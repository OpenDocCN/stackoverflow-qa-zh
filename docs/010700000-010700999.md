# StackOverflow 问答 10700000-10700999

# android - Android 在特定时间内启动任务

> ID：10700003
> 
> 赞同：0
> 
> 时间：2012-05-22T10:12:38.027
> 
> 标签：android, alarmmanager

我希望我的任务在每天中午 12 点、3 点、6 点、9 点开始。到这些时间，应该调用一个方法。我怎样才能实现这样的场景。如果有人可以授予资源或代码示例，那是令人钦佩的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:14:12.377

查看 AlarmManager [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

搜索堆栈以获取示例，这是一个[警报管理器示例](https://stackoverflow.com/questions/4459058/alarm-manager-example)

# php - XML/JSON 应该返回 FK 整数还是 FK 字符串值？

> ID：10700008
> 
> 赞同：0
> 
> 时间：2012-05-22T10:12:52.053
> 
> 标签：php, xml, json

我需要制作一个脚本，该脚本将从一个表中获取数据并生成 XML 或 JSON 响应。现在，该表具有来自其他表 (FK) 的数据，这些数据由`int`值表示。

做出从其他表返回 FK 及其值的响应是否是错误的？我不确定什么是投注编程实践。

例如，响应可能如下所示 (XML)

```
<item>
      <guid>1738291029</guid>
      <title>Some title</title>
      <link>http://www.site.info</link>
      <description>A description</description>
      <id>4</id>                   //FK int from main table!
      <category>News</category>    //String value from other table!
</item> 
```

在这里，我从链接表中返回 FK int 值及其对应的值。

# terminal - 基于 2 个参数的 Zsh 自动完成功能

> ID：10700012
> 
> 赞同：5
> 
> 时间：2012-05-22T10:13:06.093
> 
> 标签：terminal, zsh, zsh-completion

我有这样的功能：

```
p() { cd ~/Clients/$1/Projects/$2; } 
```

然后我可以输入：

```
p "Client here" "Project here" 
```

它需要我：

```
~/Clients/Client here/Projects/Project here 
```

这里没有什么特别的。但是我该如何实现这个功能的自动完成呢？我设法为第一个参数（客户端）完成了自动完成工作：

```
_p() { _files -W ~/Clients -/; }
compdef _p p 
```

但是如何自动完成第二个参数（项目）？它需要根据客户端从文件夹中自动完成：

```
~/Clients/$1/Projects 
```

希望有人能帮忙！:-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:46:22.793

IRC 上的一个聪明人 (Mikachu) 提供了帮助：

```
p() { cd ~/Clients/$1/Projects/$2; }
_p() {
  _arguments '1: :->client' '2: :->project'
  case $state in
    client)
      _files -W ~/Clients
    ;;
    project)
      _files -W ~/Clients/$words[CURRENT-1]/Projects
    ;;
  esac 
}
compdef _p p 
```

**更新：**将 $words[CURRENT-1] 更改为 ${(Q)words[CURRENT-1]} 以使其适用于包含空格的目录：

```
p() { cd ~/Clients/$1/Projects/$2; }
_p() {
  _arguments '1: :->client' '2: :->project'
  case $state in
    client)
      _files -W ~/Clients
    ;;
    project)
      _files -W ~/Clients/${(Q)words[CURRENT-1]}/Projects
    ;;
  esac 
}
compdef _p p 
```

# ruby-on-rails - 创建动态集合选择 rails 3.1

> ID：10700015
> 
> 赞同：2
> 
> 时间：2012-05-22T10:13:38.713
> 
> 标签：ruby-on-rails, jquery, ruby-on-rails-3.1, cascadingdropdown

我已经经历了 N 个在 Rails 中创建动态下拉列表的解决方案，但似乎没有任何效果。

我有一个典型的州和城市模型，我不想使用卡门。

这是我的模型：-

市场.rb

```
class Market < ActiveRecord::Base
    attr_accessible :state, :cities_attributes

    has_and_belongs_to_many :users

    has_many :cities, :dependent => :destroy

    accepts_nested_attributes_for :cities

    validates :state, :presence => true, :uniqueness => true

end 
```

城市.rb

```
class City < ActiveRecord::Base
    attr_accessible :city

    belongs_to :market

    has_and_belongs_to_many :users

end 
```

在设计/注册/新（我希望用户在注册时选择州和城市）

```
%li
  =f.collection_select :city, Market.all,:id, :state, html_options = { :class => "custom_textarea"}
%li
 =render "devise/registrations/cities", :f => f 
```

_cities.html.haml 部分

```
-unless cities.blank?
    =f.collection_select( :city, @cities, :id, :cities) 
```

注册控制器.rb

```
def update_city_select
    @cities = City.where(:country_id => params[:id])
    render :partial => "cities", :locals => {:cities => @cities}
end 
```

一旦用户选择一个州并填充相关城市，我希望城市列表发生变化。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:22:58.257

您必须在包含状态下拉列表的视图中为此使用 ajax：

```
$("#stateDropdown").change(function(){
  $.get("controller/update_city_select.html?id="+$("#stateDropdown").val(), 
        function(data){ $("#cityDropdownDiv").html(data); } );
}); 
```

这会调用您的操作，并将您的 div 的内容替换为新的城市下拉列表。

对你的部分：

```
#cityDropdownDiv
    -unless @cities.blank?
        = collection_select( :market, :city, @cities, :id, :cities) 
```

`:f => f`有了这个，您在渲染部分时不需要添加参数。

您应该在 html_option 部分的下拉列表中添加一个 id（我假设为“stateDropdown”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:22:29.150

另一个非常有帮助的教程，我想这将帮助任何想要实现依赖下拉列表的人是[http://www.petermac.com/rails-3-jquery-and-multi-select-dependencies/](http://www.petermac.com/rails-3-jquery-and-multi-select-dependencies/)

# javascript - 如何在一个元素上拥有多个数据绑定属性？

> ID：10700020
> 
> 赞同：100
> 
> 时间：2012-05-22T10:13:58.137
> 
> 标签：javascript, jquery, knockout.js

我需要在一个元素上有多个数据绑定。例如，我想要*一个*标签上`href`的`html`数据绑定。我试过这个， *`a`*

 *```
<a data-bind="html: name" 
   data-bind="attr: { href: url }" 
   data-bind="attr: { 'data-prop': xyz }">
</a> 
```

但这不起作用。似乎淘汰赛只支持绑定*一个* `data-bind`属性？如何在一个元素上同时绑定`href`、inner`html`和自定义 " " 属性？`data-prop`

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-05-22T10:16:21.910

像这样：

```
<a data-bind="html: name, attr: { href: url }"> 
```

您使用逗号分隔的绑定 - 属性与传递对象相同：

```
{
    html: name, 
    attr: { href: url }
} 
```

或者，如果您同时询问多个`attr`绑定：

```
<a data-bind="html: name, attr: { href: url, 'data-prop': FullName }"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:01:42.840

这就是我使用数据绑定实现源属性和单击事件的方式。您可能会发现它很有用。

```
<img data-bind="{click: function(data, event) {ESVendorWidget.loadFunction(data,event)},
                 attr: {src: $data.Photo.PhotoUrl }}"
     alt="package pic" class="big" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T10:43:13.773

我只是使用：

```
<input type="checkbox"
    data-bind="click: callFunction(), checkedValue: 0, checked: Card.Days"> 
```

对于复选框元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-01T08:59:48.860

**您可以使用多个属性，`,` 如下所示**

```
<a data-bind="attr: { href: url, id: id , class: classvalue}"> 
```

像这样的对象

```
{ url: 'http://stackoverflow.com', id:'newid' , classvalue: 'classname' } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-23T09:18:36.727

你可以像下面这样使用

> data-bind="text: method.method_title, attr: {'id': 'label_method_' + method.method_code}"*

# cloud-foundry - 在 cloudfoundry 上保留子域

> ID：10700021
> 
> 赞同：1
> 
> 时间：2012-05-22T10:14:05.763
> 
> 标签：cloud-foundry

一旦我在 cloudfoundry 上推送了一个应用程序并为其分配了一个名称，我就可以通过 appname.cloudfoundry.com 访问它

该应用程序名称是否仅在应用程序运行时保留？

我已经看到了重新部署应用程序并切换 url 的过程，方法是将 2 个 url 分配给同一个应用程序，然后稍后再切换它们。

这是“保留” appname 的唯一方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:35:38.297

我也想知道，经过一些研究，我找不到任何其他方法来保留子域。所以你必须像你一样为他们分配一个应用程序。

Cloudfoundry 仍在开发中，以后可能会有这样的事情。

# python - 如果我使用功能范式对序列进行排序，制作副本不是浪费吗？

> ID：10700026
> 
> 赞同：2
> 
> 时间：2012-05-22T10:14:49.087
> 
> 标签：python, functional-programming

**目标**：在不使用内置函数的情况下以函数方式对序列进行排序`sorted(..)`。

```
def my_sorted(seq):
    """returns an iterator"""
    pass 
```

**动机**：在 FP 方式中，我受到限制：

*   从不变异`seq`（可以是迭代器或已实现的列表）
*   暗示，没有就地排序。

**问题 1**由于我不能 mutate `seq`，我需要维护一个单独的可变数据结构来存储排序后的序列。与 in-place 相比，这似乎很浪费`list.sort()`。其他函数式编程语言如何处理这个问题？

**问题 2**如果我返回一个可变序列，在功能范式中可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:10:03.573

适当的防御性编程有时*会很*浪费，但您也无能为力。

这就是为什么从一开始就支持功能使用的语言对其本机不可变类型使用结构共享的原因；使用不是为它构建的语言（例如 Python）以函数式风格进行编程当然不会得到很好的支持。也就是说，排序操作不一定是结构共享的良好候选者（如果需要进行的不仅仅是微小的更改）。

因此，即使在其他函数式语言中，通常*也会*在排序中涉及至少一个复制操作。例如，Clojure 在临时可变数组上委托 Java 的本机（高度优化）排序操作，并返回包装该数组的 seq（从而使结果与用于填充相同的输入一样不可变）。如果输入是不可变的，而输出是不可变的，并且两者之间发生的事情对外部世界（尤其是任何其他线程）不可见，那么瞬态可变性通常是必要且适当的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:25:29.170

当然，排序不能完全惰性（输入的最后一个元素可能是输出的第一个元素），但您可以实现计算惰性排序，在读取整个序列后，仅根据请求逐个元素生成精确排序的输出。您还可以延迟读取输入，直到请求至少一个输出，这样排序和忽略结果将不需要计算。

对于这种计算惰性的方法，我所知道的最佳候选者是堆排序算法（您只需预先进行堆构建步骤）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:02:47.653

仅当没有其他人引用数据时，就地突变才是安全的，并期望它与排序之前一样。因此，一般来说，为排序结果使用新结构并不是很浪费。仅当您以[线性](http://en.wikipedia.org/wiki/Uniqueness_type)方式使用数据时，就地优化才是安全的。

因此，只需分配一个新结构，因为这更普遍有用。就地版本是一种特殊情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T21:39:35.887

浪费什么？位？电？挂钟时间？如果您有足够的 CPU 和大量数据，并行合并排序可能是最快完成的，但可能会产生许多中间表示。

通常，并行化算法可能会导致与串行算法非常不同的优化策略。例如，由于阿姆达尔定律，在本地重新执行冗余工作以避免共享。这在串行上下文中可能被认为是“浪费的”，但会导致算法的可扩展性更高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T10:24:57.587

使用可以以创建新数据结构的方式执行的排序算法，例如堆排序或归并排序。

# ruby-on-rails-3 - Kaminari 和页面路由

> ID：10700027
> 
> 赞同：2
> 
> 时间：2012-05-22T10:14:50.257
> 
> 标签：ruby-on-rails-3, pagination, kaminari

我在自定义页面上使用 kaminari 分页，但它生成基于 /assets 的 url：

```
http://localhost:3000/assets?action=my&controller=blogs&page=2 
```

我需要：

```
http://localhost:3000/blogs/my?page=2 
```

**错误：**

```
No route matches [GET] "/assets" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:33:31.283

我在尝试使用 Kaminari 或 Will_paginate 为自定义操作设置分页时遇到了完全相同的问题。原来问题出在我的 routes.rb 文件中。

例如，我的自定义操作在“cards”控制器中称为“all_credit”。以前在 routes.rb 我有：

```
match '/cards_credit' => 'Cards#all_credit' 
```

这给了我您上面描述的相同行为并生成基于资产/的网址。

通过将 routes.rb 中的行更改为：

```
match '/cards_credit(/:page)', :controller => 'cards', :action => 'all_credit' 
```

我能够解决这个问题，并且现在可以正确生成分页链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:48:50.267

我已经通过添加控制器参数解决了。

```
<%= paginate @blog , :params => {:controller => "GoogleUsers"} %> 
```

# iphone - iPhone - 如何在运行时检测到设备正在运行我的应用程序的临时构建

> ID：10700028
> 
> 赞同：6
> 
> 时间：2012-05-22T10:14:53.080
> 
> 标签：iphone, objective-c, xcode, ipad, ad-hoc-distribution

与应用商店部署相比，我想在运行我的应用的临时部署时使用不同的 API。这可以在运行时发现吗？我知道我可以在从 xcode 运行时使用#if TARGET_IPHONE_SIMULATOR 和#if DEBUG，但我也希望检测到临时部署。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:35:52.353

检查“../iTunesMetadata.plist”是否存在于您的 NSDocumentDirectory 中。

此文件仅存在于应用商店构建中 - 它位于应用程序的根目录中，因此对于应用商店提交是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:31:12.027

在 Build Settings 中为您的 AdHoc 配置添加预处理器宏。#if ADHOC // 做某事

# gstreamer - Gstreamer 在 waf 中包含错误。gst/gst.h：没有这样 > 文件或目录

> ID：10700032
> 
> 赞同：0
> 
> 时间：2012-05-22T10:15:24.890
> 
> 标签：gstreamer, waf

我正在尝试使用 waf 构建 Gstreamer 程序。我在使用 waf 包含 gstream 文件时遇到了一些问题。

我收到一个错误。

> [4/37] qxx：测试/播放/GSTEngine.cpp -> 构建/测试/播放/GSTEngine.cpp.4.o ../test/Playback/GSTEngine.cpp:1:21：致命错误：gst/gst .h：没有这样的文件或目录

我的 wscript(waf) 文件

```
 top = '.'
    out = 'build'

    def options(opt): 
        opt.load('compiler_cxx qt4 compiler_c')
        #opt.recurse(subdirs)

    def configure(conf):
        conf.load('compiler_cxx qt4 compiler_c boost')
        conf.check_cfg(atleast_pkgconfig_version='0.0.0') 
        gstreamer_version = conf.check_cfg(modversion='gstreamer-0.10', mandatory=True) 
        conf.check_cfg(package='gstreamer-0.10') 
        conf.check_cfg(package='gstreamer-0.10', uselib_store='MYGSTREAMER', mandatory=True) 
program_options')
        conf.env.append_value('CXXFLAGS', ['-DWAF=1']) # test

    def build(bld):
        cxxflags = bld.env.commonCxxFlags
        uselibcommon = 'QTMAIN QTCORE QTGUI QTOPENGL QTSVG QWIDGET QTSQL QTUITOOLS QTSCRIPT gstreamer-0.10'

        bld(features = 'qt4 cxx',  includes = '.', source = 'Util.cpp' , target = 'Util.o', uselib = uselibcommon, cxxflags=cxxflags)

        bld(features = 'qt4 cxx',  includes = '.', source = 'MetaData.cpp' , target = 'MetaData.o', uselib = uselibcommon, cxxflags=cxxflags)

        bld(features = 'qt4 cxx',  includes = '.', source = 'id3.cpp' , target = 'id3.o', uselib = uselibcommon, cxxflags=cxxflags)

        use = [ 'MetaData.o', 'Util.o' , 'id3.o']
        bld(features = 'qt4 cxx',  includes = '.' , source = 'GSTEngine.cpp' , target = 'GSTEngine.o', uselib = uselibcommon, use = use,  lib = ['gstreamer-0.10'], libpath = ['/usr/lib'], cxxflags=cxxflags)

    from waflib.TaskGen import feature, before_method, after_method
    @feature('cxx')
    @after_method('.')
    @before_method('apply_incpaths')
    def add_includes_paths(self):
            incs = set(self.to_list(getattr(self, 'includes', '')))
            for x in self.compiled_tasks:
                    incs.add(x.inputs[0].parent.path_from(self.path))
            self.includes = list(incs) 
```

如果我尝试将此列表包含到 GSTEngine.cpp bld 语句中的包含参数中。它可以工作并用于下一个文件。

> ['/usr/include/gstreamer-0.10','/usr/include/glib-2.0', '/usr/lib/x86_64-linux-gnu/glib-2.0/include/', '/usr/include/libxml2 /']

我是 waf 的新手，想知道如何告诉 waf 获取所有依赖于 gstreamer 的包含文件。

希望你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T05:35:31.463

好吧，我得到了解决方案

我在 waf 的 conf 部分添加了这一行

```
conf.check_cfg(atleast_pkgconfig_version='0.0.0') 
conf.check_cfg(package='gstreamer-0.10', uselib_store='GSTREAMER', args='--cflags --libs', mandatory=True)
conf.check_cfg(package='taglib', uselib_store='TAGLIB', args='--cflags --libs', mandatory=True) 
```

pkg-config 会找到 lib 并将其存储在 uselib 变量（`uselib_store='TAGLIB'`）中。所以只需在 waf 的构建部分中将变量添加到 uselib

> bld（功能='qt4 cxx cxxprogram'，包括=包含，源='main.cpp MasterDetail.qrc'，目标='app'，uselib ='TAGLIB GSTREAMER'，cxxflags=cxxflags，使用=使用，子系统='windows ', 链接标志=链接标志)

# orchardcms - 果园分类/分类法和相关的 ContentItem 内务管理

> ID：10700033
> 
> 赞同：1
> 
> 时间：2012-05-22T10:15:27.200
> 
> 标签：orchardcms

我的 Orchard 网站的一部分将从外部源（商业）同步。它将管理类别和产品的各个方面。

所有其他内容将仅由 Orchard 管理。

我需要创建 2 个系统的全面同步。

[问题的背景可以在这里找到](https://stackoverflow.com/questions/10689019/synchronise-contents-to-orchard-cms-from-another-source-regularly)

我需要;

1.  向 Orchard 添加不存在的内容
2.  删除不再相关的内容
3.  将内容移动/关联到另一个分类术语

我的问题是果园相关/相关内容的完整性对我来说有点神秘。

我遇到了几个问题，我相信我对关系数据库完整性及其“[阻抗不匹配](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)”（如果你知道它的意思）的传统理解与 Orchard CMS 的相关/关联内容项的想法。

当我删除一个 ContentItem 只是为了在某个时候添加“相同”的 ContentItem 并将它与之前的类别相关联时会发生什么？

例如

1.  "Page1" 与分类术语 "c" 相关联，它是 "a","b","c" 的叶子
2.  我同步。
3.  我现在需要删除“c”，因为它是多余的。
4.  我再次同步。
5.  分类术语“c”又回来了，但它现在是“d”的叶子
6.  “Page1”仍然是术语“c”的一部分

但这现在是一个新的“c”吗？如果是这样，它与旧的“c”有何不同？

我是否需要在删除之前将 contentItems 与“c”解除关联，以删除任何传统的“外键”关系？

有很多关于部分如何相互连接以创建内容类型的问题，但关联隐含的关系又如何呢？

我们需要了解哪些概念来建立关系关联？

我相信您可以对我所寻求的清晰程度有所了解，因为这个问题可能涉及到 Orchard 的一些基本概念。

我敢肯定，一旦我完成了同步模块，一切都会变得清晰，但目前我不想进行大的假设，因为假设是所有问题的根源！

# c - 如何减少 UDP 套接字通信中的消息丢失，仅使用单个端口？

> ID：10700042
> 
> 赞同：2
> 
> 时间：2012-05-22T10:15:50.193
> 
> 标签：c, linux, udp, udpclient

我有 UDP 客户端和服务器的编写代码片段。我使用相同的端口进行发送和接收。我的问题是客户端有很多消息丢失，所以有人可以帮我优化我的代码，这是我的 UDP 客户端代码：

```
#define SERVERIP "192.168.170.155"
#define SERVERPORT 5000
#define DEVICE_SEND_PORT 5000
#define DEVICE_RECEIVE_PORT 5000
#define BUFFERSIZE 2048

/**For socket file descriptor identification*/
#define S1READY 0x01

int m_SendSocketId;
int m_ReceiveSocketId;
int msgcount;
int socketbuffsize = 1*1024*1024;

/**
* FUNCTION NAME : waitToRead
* Implementation of select and non-blocking socket mechanism
* @param socket Socket that needs to be in select and non blocking mode
* @return Returnd the file descriptors which, returned by select function
*/
int waitToRead(int socket)
{
    fd_set fds;
    struct timeval timeout;
    int rc; // number of file descriptor returned
    int result; // result 
    int fd; // file descriptor

    fd=fcntl(socket,F_GETFL,0);
    fcntl(socket,F_SETFL,fd | O_NONBLOCK);

    // Set time limit. 
    timeout.tv_sec = 1;
    timeout.tv_usec = 0;
    // Create a descriptor containing our sockets.
    FD_ZERO(&fds);
    FD_SET(socket, &fds);
    rc = select(sizeof(fds)*8, &fds, NULL, NULL, &timeout);
    if (rc==-1)
    {
        printf("[%s:%d#%s] Select Failed\n",__FILE__, __LINE__,__func__);
        return -1;
    }

    result = 0;
    if (rc > 0)
    {
        if (FD_ISSET(socket, &fds))
            result |= S1READY;
    }
    return result;
}
/**
* FUNCTION NAME : receiveMessage
* This function opens particular port that is defined in the 
* Configuration file, and listens on that port.
* @return if there'll be any issue in listening, then it will return 
* false otherwise it will return true.
*/
bool receiveMessage()
{
    struct sockaddr_in serverAddr; //Information about the Device UDP Server
    struct sockaddr_in client_addr; // Information about Qgate Server
    char buffer[BUFFERSIZE]; // Buffer to store incoming message
    int addr_len; // to store client address length 
    int serverlen; // to store server address length
    int sockResult; // to store result given by waitToRead
    int optval = 1;
    int receivedByte = 0;

    //Open a datagram Socket
    if((m_ReceiveSocketId = socket(AF_INET, SOCK_DGRAM, 0)) < 0)
    {
        printf("[%s:%d#%s] UDP Client - socket() error\n",__FILE__, __LINE__,__func__);
        return false;
    }

    //Configure Server Address.
    //set family and port
    serverAddr.sin_family = AF_INET;
    serverAddr.sin_port = htons(DEVICE_RECEIVE_PORT);

    setsockopt(m_ReceiveSocketId, SOL_SOCKET,SO_REUSEADDR, &optval, sizeof(optval));

    /*if (setsockopt(m_ReceiveSocketId, SOL_SOCKET, SO_RCVBUF, &socketbuffsize, sizeof(socketbuffsize)) == -1) 
    {
        printf("Recieve Socket memory Allocation fail\n");
    }*/

    if((serverAddr.sin_addr.s_addr = INADDR_ANY) == (unsigned long)INADDR_NONE)
    {

        printf("[%s:%d#%s] Host Not found(%d)\n",__FILE__, __LINE__,__func__,h_errno);
        close(m_ReceiveSocketId); // close the socket
        return false;
    }

    if (bind(m_ReceiveSocketId, (struct sockaddr *) &serverAddr,sizeof(struct sockaddr_in)) < 0 )
    {
        printf("[%s:%d#%s] UDP Client- Socket Bind error=%s\n",__FILE__, __LINE__,__func__,strerror(errno));
        close(m_ReceiveSocketId); // close the socket
        return false;
    }

    serverlen = (int )sizeof(serverAddr);
    addr_len = sizeof(struct sockaddr); 
    // Loop and listen for incoming message 
    while(1)
    {
        //wait at select to, read
        sockResult = waitToRead(m_ReceiveSocketId);

        if(sockResult == S1READY)
        {
            receivedByte = read(m_ReceiveSocketId,buffer,BUFFERSIZE);   
            buffer[receivedByte] = '\0';

            if(receivedByte == -1)
            {
                printf("[%s:%d#%s] UDP Client - receive error", __FILE__,__LINE__,__func__);
                close(m_ReceiveSocketId);
                return false;
            }
            else if(receivedByte > 0)
            {
                //printf("[%s:%d#%s] received message = %d bytes\n",__FILE__,__LINE__,__func__,(int)strlen(buffer));
                printf("count: %d, buffer %s \n", msgcount++, buffer);
            }
        }

        memset(buffer, 0, BUFFERSIZE);
        fflush(stdout);
    }

    close(m_ReceiveSocketId); // close the socket
    printf("[%s:%d#%s] Recieve socket closed:%s\n",
                            __FILE__, __LINE__,__func__, strerror(errno));
    return true;
}

bool sendMessage(char *message)
{
    struct sockaddr_in  serverAddr; //Information about the server
    struct sockaddr_in deviceAddr; //Device UDP Client Address for sending message
    int optval = 1;

    //Open a datagram Socket
    if((m_SendSocketId = socket(AF_INET, SOCK_DGRAM, 0)) < 0)
    {
        printf("[%s:%d#%s] UDP Client - socket() error\n",__FILE__, __LINE__,__func__);
        return false;
    }

    // Clear out the device struct
    memset(&deviceAddr, 0x00, sizeof(struct sockaddr_in));

    deviceAddr.sin_family = AF_INET;
    deviceAddr.sin_port = htons(DEVICE_SEND_PORT);

    setsockopt(m_SendSocketId, SOL_SOCKET, SO_REUSEADDR, &optval, sizeof(optval));

    /*if (setsockopt(m_SendSocketId, SOL_SOCKET, SO_SNDBUF, &socketbuffsize, sizeof(socketbuffsize)) == -1) 
    {
        printf("send Socket memory Allocation fail\n");
    }*/

     if((deviceAddr.sin_addr.s_addr = INADDR_ANY) == (unsigned long)INADDR_NONE)
    {
        // in netdb.h 
        printf("[%s:%d#%s] Host Not found(%d)\n",__FILE__, __LINE__,__func__,  h_errno);
        close(m_SendSocketId); // close the socket
        return false;
    }

    if (bind(m_SendSocketId, (struct sockaddr *) &deviceAddr,sizeof(struct sockaddr_in)) < 0 )
    {
        printf("[%s:%d#%s] UDP Client- Socket Bind error=%s\n",__FILE__, __LINE__,__func__,strerror(errno));
        close(m_SendSocketId); // close the socket
        return false;
    }

    // Clear out the server struct
    memset(&serverAddr, 0x00, sizeof(struct sockaddr_in));

    //Configure Server Address.
    //set family and port
    serverAddr.sin_family = AF_INET;
    serverAddr.sin_port = htons(SERVERPORT);
    //serverAddr.sin_addr.s_addr = htonl(39898);

    if((serverAddr.sin_addr.s_addr = inet_addr(SERVERIP)) == (unsigned long)INADDR_NONE)
    {
        printf("[%s:%d#%s] Host Not found %d\n",__FILE__, __LINE__,__func__,h_errno);
        close(m_SendSocketId);
        return false;
    }

    // Send data to the server.
    if( sendto(m_SendSocketId, message,strlen(message) ,0, (struct sockaddr *)&serverAddr, sizeof(serverAddr)) < 0 )
    {
        printf("[%s:%d#%s] UDP Client - sendto() error=%s \n",__FILE__, __LINE__,__func__,strerror(errno));
        close(m_SendSocketId);  
        return false;
    }

    close(m_SendSocketId);
    return true;
}

int main ()
{
    int loop;
    char str[10];
    msgcount = 1;   
    pthread_t receiveThread;

    if(pthread_create(&receiveThread, NULL,(void *)&receiveMessage, NULL) != 0)
    {
        printf("[%s:%d#%s] thread create Failed(%s)\n",
            __FILE__, __LINE__,__func__, strerror(errno));
        return false;
    }

    for(loop =0; loop < 1000; loop++)
    {
        sprintf(str,"%4d",loop);
        sendMessage(str);   
    }

    pthread_join(receiveThread, NULL);  
    return 0;
} 
```

这是临时 UDP 服务器代码，它接收几乎 90% 以上的消息并发送相同的消息，但 udpclient 无法接收消息。

```
int main()
{
        int sock;
        int addr_len, bytes_read, bytes_send;
        char recv_data[1024];
        int i;
        int count=0;
        struct sockaddr_in server_addr , client_addr;

        if ((sock = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {
            perror("Socket");
            exit(1);
        }

        server_addr.sin_family = AF_INET;
        server_addr.sin_port = htons(5000);
        server_addr.sin_addr.s_addr = INADDR_ANY;
        bzero(&(server_addr.sin_zero),8);

        //client_addr.sin_family = AF_INET;

        setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &optval, sizeof(optval));

        if (bind(sock,(struct sockaddr *)&server_addr,sizeof(struct sockaddr)) == -1)
        {
            perror("Bind");
            exit(1);
        }

        addr_len = sizeof(struct sockaddr);

        printf("\nUDPServer Waiting for client on port 5000");
        fflush(stdout);

    while (1)
    {
        bytes_read = recvfrom(sock,recv_data,1024,0,(struct sockaddr *)&client_addr, (socklen_t *)&addr_len);
        recv_data[bytes_read] = '\0';

        if(recv_data[0]!=0x07)
        {
            recv_data[0] = 0x09;
            //client_addr.sin_port = htons(51254);

            bytes_send = sendto(sock, recv_data, bytes_read, 0, (struct sockaddr *)&client_addr, (socklen_t)sizeof(client_addr));
            if(bytes_send < 0 )
            {
                perror("send to ");
            }
            printf("\nNumber  %d", ++count);
            memset(&recv_data, 0x00, 1024);

        }
        else
        {
            printf("Received Keep ALive\n");        
        }
        memset(&client_addr, 0x00, sizeof(struct sockaddr_in));

        fflush(stdout);

    }
    return 0;
} 
```

任何帮助将不胜感激。谢谢尤维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:22:14.107

您的代码与 UDP 丢弃数据包无关，除非您发送数据包的速度对于网络或接收器而言太快。UDP不可靠。它丢弃数据包。如果您的应用程序协议不需要丢弃数据包，则您必须通过基于 ACK 或基于 NACK 的重试协议在该级别构建可靠性。

或者在这种情况下像其他人一样使用 TCP。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T12:39:43.323

问题出在 sendMessage 函数中，这里我每次需要发送消息时都在重新创建套接字，我认为这需要时间。我还不知道哪个调用被阻塞，但是发送套接字可以解决我的问题。现在消息的丢弃率只有 20% 到 30%。

# windows - 外壳问题：别名不扩展

> ID：10700048
> 
> 赞同：1
> 
> 时间：2012-05-22T10:16:24.997
> 
> 标签：windows, bash, msys, mks

我有以下问题：我有许多当前正在使用[MKS Toolkit](http://www.mkssoftware.com/products/tk/ds_tkdev.asp)运行的测试脚本。我们设法使用[mingw shell (msys)](http://www.mingw.org/)运行这些脚本，但还有其他脚本使用了一些`alias`内置的 MKS Toolkit 而不是 bash 的 es。

问题是没有人愿意更改这些脚本，甚至不使用脚本自动更改。这意味着我应该定义和使用这些别名。我尝试在 msys shell 的“/etc/profile”文件中定义别名，但没有任何成功。我也尝试使用`shopt -s expand_aliases`（在“/etc/profile”中），但这也不起作用。

有人可以分享一个关于如何做到这一点的想法。请注意，现有脚本必须保持不变。

欢迎任何想法或想法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:48:37.560

`/etc/profile`仅用于登录 shell 。如果您想要脚本中的别名，您应该将它们放在一个单独的文件中并将它们源到需要它们的脚本中。例如：

**别名.sh**：

```
alias walrus="echo coo coo cah joo" 
```

**脚本.sh**：

```
#!/bin/bash

shopt -s expand_aliases
. aliases.sh

walrus 
```

进而

```
$ ./script.sh
coo coo cah joo 
```

这可能是最合理的做法。如果您坚持根本不更改脚本*，*那么您也许可以像这样间接执行它们：

```
bash --rcfile aliases.sh -i script.sh 
```

这将告诉 bash 执行一个交互式 shell（从而在执行 script.sh 之前扩展别名并获取我们的别名脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:15:24.240

[这个答案](https://stackoverflow.com/a/1615920/13136)给了我解决方案。它涉及`BASH_ENV`在执行之前定义变量

```
bash script_name.sh 
```

BASH_ENV 将指向设置 shell 环境的脚本。就我而言，要导出`alias`es 以及脚本所需的函数，如下所示：

```
shopt -s expand_aliases

alias my_alias="echo my_alias"

function MyFunction {
    echo "MyFunction(DUMB):" $* 
}

export -f MyFunction 
```

# c++ - 是否为派生类生成移动构造函数/赋值运算符

> ID：10700050
> 
> 赞同：5
> 
> 时间：2012-05-22T10:16:26.450
> 
> 标签：c++, c++11

如果 X 类派生自 Y 类并且 Y 类具有以下任何一种：

*   用户声明的复制构造函数，
*   用户声明的复制赋值运算符，
*   用户声明的析构函数
*   用户声明的移动构造函数，
*   用户声明的移动赋值运算符，

移动构造函数和移动赋值运算符是否会隐式默认为 X 类，前提是它没有声明上述任何内容？

例如

```
struct Y
{
     virtual ~Y() {}

     // .... stuff

};

struct X : public Y
{
   // ... stuff but no destructor, 
   //               no copy/move assignment operator 
   //               no copy/move constructor

   // will X have a default move constructor / assignment operator?
}; 
```

我目前正在使用 gcc，但我主要对正确的行为应该是什么感兴趣（而不是特定编译器是否符合标准）..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:51:49.960

就派生类而言，属性或基类具有用户定义或隐式特殊功能这一事实并不重要。重要的是他们的存在。

兼容的 C++11 编译器应该自动为结构和类提供移动构造函数和赋值运算符，如果可能的话（在标准中明确定义），即使只有具有动态分配缓冲区的类才能真正从中受益（移动`int`is只是复制它）。

因此，如果您的类嵌入了 a`std::string`或 a `std::unique_ptr`（例如），那么它的移动构造函数将调用嵌入的`string`或`unique_ptr`移动构造函数，它将是高效的......免费的。

因此，只需更改编译模式即可略微提高性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:52:46.470

是的，它们在 §12.8.9 中：

如果类 X 的定义没有显式声明移动构造函数，当且仅当

*   X 没有用户声明的复制构造函数，
*   X 没有用户声明的复制赋值运算符，
*   X 没有用户声明的移动赋值运算符，
*   X 没有用户声明的析构函数，并且
*   移动构造函数不会被隐式定义为已删除。

和§12.8.10

类 X 的隐式声明的移动构造函数将具有以下形式

```
X::X(X&&) 
```

同样，对于 12.8.20 中的移动赋值运算符：

如果类 X 的定义没有显式声明移动赋值运算符，则当且仅当

*   X 没有用户声明的复制构造函数，
*   X 没有用户声明的移动构造函数，
*   X 没有用户声明的复制赋值运算符，
*   X 没有用户声明的析构函数，并且
*   移动赋值运算符不会被隐式定义为已删除。

基类不直接进入它。

# java - Java 和 Android 中的对象序列化

> ID：10700051
> 
> 赞同：0
> 
> 时间：2012-05-22T10:16:31.677
> 
> 标签：java, android

如何在单个响应中将多个对象写入 ObjectOutputStream（对象不是固定的，对象是根据用户的请求动态创建的）。我可以使用 Arraylist 还是 Vector，请给出一些示例程序。

```
TexxtViews text=new TexxtViews(2, -2, 2, "WELCOME TO CCS");//First Object
ButtonView button=new ButtonView(-2, 2, "OK");//Second Object
ArrayList array=new ArrayList();
array.add(text);
array.add(button);
   OutputStream out = resp.getOutputStream();
   ObjectOutputStream outSt = new ObjectOutputStream(out);
  outSt.writeObject(array); 
```

试过这段代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:25:14.353

```
public class Employee implements java.io.Serializable
{
   public String name;
   public String address;
   public int transient SSN;
   public int number;
   public void mailCheck()
   {
      System.out.println("Mailing a check to " + name
                           + " " + address);
   }
}

    import java.io.*;

public class SerializeDemo
{
   public static void main(String [] args)
   {
      Employee e = new Employee();
      e.name = "Reyan Ali";
      e.address = "Phokka Kuan, Ambehta Peer";
      e.SSN = 11122333;
      e.number = 101;
      try
      {
         FileOutputStream fileOut =
         new FileOutputStream("employee.ser");
         ObjectOutputStream out =
                            new ObjectOutputStream(fileOut);
         out.writeObject(e);
         out.close();
          fileOut.close();
      }catch(IOException i)
      {
          i.printStackTrace();
      }
   }
} 
```

并反序列化回来

```
 import java.io.*;
   public class DeserializeDemo
   {
      public static void main(String [] args)
      {
         Employee e = null;
         try
         {
            FileInputStream fileIn =
                          new FileInputStream("employee.ser");
            ObjectInputStream in = new ObjectInputStream(fileIn);
            e = (Employee) in.readObject();
            in.close();
            fileIn.close();
        }catch(IOException i)
        {
            i.printStackTrace();
            return;
        }catch(ClassNotFoundException c)
        {
            System.out.println(.Employee class not found.);
            c.printStackTrace();
            return;
        }
        System.out.println("Deserialized Employee...");
        System.out.println("Name: " + e.name);
        System.out.println("Address: " + e.address);
        System.out.println("SSN: " + e.SSN);
        System.out.println("Number: " + e.number);
    }
} 
```

# sencha-touch - 在标题栏中间动态添加面板

> ID：10700061
> 
> 赞同：2
> 
> 时间：2012-05-22T10:17:08.117
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个带有标题栏的面板，其中已经有两个按钮，一个在左侧，另一个在栏的右侧。现在我想知道如何将面板（或其他）添加到栏的中心。

**这个面板里面需要有图片和se字符串。**

这就是我目前所做的，但面板显示在左侧按钮的右侧，我不知道如何将它放在标题栏的中间。

```
this.getTitlebar().add([{
    xtype: 'panel',
    layout:'hbox',
    items:[{
      xtype:'img',
      width:32,
      height:32,
      src:data.image.small.url
    },{
      html: data.key,
      style:'color:#FFF'
    }]
}]); 
```

**[更新]：居中：真**

我试图在我的面板配置中添加 centered: true 但它没有用，它实际上变得更糟

由此

![在此处输入图像描述](../Images/6c5d842777710f60ff6c3fedf7f2dbdf.png)

对此

![在此处输入图像描述](../Images/d3b3706763d479c228d8834050da011d.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-26T08:31:25.353

不需要添加“spacer”

```
items: [
    // your_first_button(default:left)
    {},
    // your_central_panel
    {centered: true},
    // your_second_button
    {right: 0}
] 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:09:28.567

如果您想实现相同的目标，请不要使用 a`Ext.Titlebar`而是使用 a `Ext.Toolbar`。

诸如`{xtype:'spacer'}`在标题栏中不起作用的事情......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T12:17:48.330

要按照描述对齐您的项目，只需使用此原型：

```
items: [
  {your_first_button},
  {xtype: 'spacer'},
  {your_central_panel},
  {xtpye: 'spacer'},
  {your_second_button},
] 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:36:55.027

您是否尝试过组件的插入方法？

你可以有这样的东西

```
yourComponent.insert(index,componentTobeAdded); 
```

添加后，调用Toolbar的组件布局，显示添加的面板。

# xml - XPath 过滤子节点

> ID：10700064
> 
> 赞同：3
> 
> 时间：2012-05-22T10:17:22.673
> 
> 标签：xml, xpath

我有一个 xml 包含以下信息，我正在使用 Xpath 来解析它

```
<root>
  <a>
    <b></b>
    <c></c>
    <d></d>
  </a>
  <a>
    <b></b>
    <c></c>
    <d></d>
  </a>
</root> 
```

我的目标是获取标签“a”的节点列表，并在每个包含“b”和“c”的子节点列表中（等过滤掉“d”！）我目前正在做的是使用“/root/a”来获取包含所有'a'，'b'和'c'的节点，然后摆脱'c'，我的目标是在XPath中进行过滤而不是使用额外的代码，无论如何我可以做到吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:22:33.950

您可以通过使用下面的模式复制所有内容来过滤掉一个元素，然后截取您想要过滤掉的元素。

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="a/d"/>

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

这是因为特殊模板比一般模板具有更高的优先级。所以第二个适用于除`d`下面之外的所有元素`a`。第一个模板什么都不做，即忽略元素。

# android - Android - 动画视图高度变化。

> ID：10700065
> 
> 赞同：1
> 
> 时间：2012-05-22T10:17:24.123
> 
> 标签：android

高度是公共财产，因此没有二传手。因此，我不能将它与 ObjectAnimator.ofPropertyValuesHolder 一起使用。如何为视图的高度变化设置动画？

提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T10:51:53.300

您可以使用 ValueAnimator 并添加一个 UpdateListener 来更改每次动画更新的视图高度。

# c - 使用 OpenCV 测量光量？

> ID：10700069
> 
> 赞同：0
> 
> 时间：2012-05-22T10:17:41.910
> 
> 标签：c, opencv

我的想法是使用视觉传感器（相机）来测量光量。我想知道是否可以使用 OpenCV 获取有关光强度的信息？是否有一些 openCV 函数属性可以从场景中获取此类信息？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:29:45.023

光强度是一个棘手的问题，因为大多数颜色系统无法区分颜色的亮度和光强度之间的差异。您可以通过测量整个场景的“亮度”来了解场景中的光强度。饱和度也可能会给你一个不错的线索。

为此，我会将色彩空间转换为 HSL，然后聚合 L 通道以获得非常粗略的亮度测量。S 通道是饱和度。

OpenCV 有这个[本机](http://opencv.willowgarage.com/documentation/cpp/imgproc_miscellaneous_image_transformations.html?highlight=hls#cv-cvtcolor)* 但它不是一个困难的操作。维基百科页面有公式。

[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

*感谢 jlengrand 和 Seçkin Savaşçı

# asp.net-mvc-3 - 使用 Entity Framework 4.3 保存复杂的视图模型

> ID：10700072
> 
> 赞同：1
> 
> 时间：2012-05-22T10:18:17.467
> 
> 标签：asp.net-mvc-3, entity-framework-4.3

我有 Customer、Order 和 OrderItem 表。OrderItem.OrderID 指向 Order.ID；并且 Order.CustomerID 指向 Customer.ID，即常见的 Customer -> Order -> OrderItem 设置。

我有一个视图模型——Customer，它包含 Order 对象和 OrderItem 对象。

如果用户在一个视图上创建了一个新的 Customer、新的 Order 和新的 OrderItems，然后将它们绑定到 Customer 视图模型对象（包含所有 Customer、Order、OrderItem 数据）；有没有办法使用 EF 保存这个客户视图模型？

我的困惑来自这样一个事实，因为 Customer、Order、OrderItem(s) 都是新记录；这意味着尚未生成 Customer.ID（自动递增的数字）（尚未保存记录）；那么 EF 如何知道在保存 Order.CustomerID 时使用什么 ID？

我是否需要先保存客户，获取 Customer.ID，然后保存 Order，然后获取 Order.ID，然后保存 OrderItem(s)？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:43:46.763

你只需调用这个：

```
context.Customers.Add(customer);
context.SaveChanges(); 
```

如果您的映射中的所有内容都正确配置，EF 将理解关系并首先正确保存客户，检索其 Id 并将其用于保存相关订单。它将以相同的方式处理订单项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:00:13.503

只要您在保存之前建立对象关系就可以了

```
customer.Orders = new List<Orders>();
customer.Orders.Add(order);

order.OrderItems = new List<OrderItems>();
order.OrderItems.Add(orderItem);

context.Customer.Add(customer);
context.SaveChanges(); 
```

# mysql - 在 netbeans 中创建和使用数据表

> ID：10700073
> 
> 赞同：0
> 
> 时间：2012-05-22T10:18:21.347
> 
> 标签：mysql, netbeans, datatable

我有一张桌子：

```
vegetable name -- calcium contents -- Potassium contents -- vitamins -- fibers-- price (etc) 
```

假设表中有 5 个条目（行），我必须首先手动输入数据，就像第一次输入数据一样。

我的要求/问题是：

1.  在 GUI 上，当我从下拉菜单中选择蔬菜名称时，我应该显示内容，然后所有内容都应该被添加以获得最终得分，但“价格”除外。

2.  在 GUI 上，如果我选择“蔬菜名称”和任何其他“属性”（如“纤维”），则只应显示该值。例如查询——菠菜、纤维？回答菠菜纤维 = 20 单位，或菠菜维生素 = 40 单位等。

3.  我还想知道我应该在这里使用什么类型的数据库以及如何填充数据以便稍后在程序中访问它。我相信它是一个简单的小尺寸数据表，那么最有效的方法是什么？对代码的具体帮助将很有帮助，因为我对 java 和 netbeans 完全陌生。

另外，我可以有一个单独的 GUI 来在同一个表中添加/附加来自用户的更多数据吗？如果是，请问是怎么做的？我正在使用 Netbeans 7.1.2。

经过一番搜索，我得到了有关 netbeans 中 MySQL 数据表的信息。( [http://netbeans.org/kb/docs/ide/java-db.html](http://netbeans.org/kb/docs/ide/java-db.html) ) 我已经在表格中创建并输入了条目，但不知道如何访问它们以解决我上面的问题 1 和 2。也不确定它是否是我应该用于这种简单用途的正确数据表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:48:10.467

看来您需要先了解**JDBC**。只是为了澄清连接到 IDE 内的数据库通常用于更多的开发/管理类型的职责，并且您**不会**在 Swing 程序中使用它。

因此，例如，您需要加载一组测试数据来测试通常使用 MySQL 工作台或通过 IDE 加载的函数。但是，当您运行程序时，您不会以这种方式连接。

您需要学习的是如何从前端连接到数据库，如何执行查询以及如何显示查询。在这一点上，我建议买几本关于 JDBC 的书，甚至在 google 上搜索 JDBC 介绍教程。

无需过多考虑前端即可学习 JDBC。做几个例子，一旦你熟悉了 JDBC，就可以在前端工作了。

您可能想花时间学习基本的 SQL，因为这将是正确查询数据库所必需的。我假设您没有执行任何 SQL。

这是一个相当不错的网站链接，其中包含您可能想要使用的信息[http://infolab.stanford.edu/~ullman/fcdb/oracle/or-jdbc.html](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-jdbc.html)

请记住，IDE（Netbeans）基本上使用 JDBC 来允许您连接和操作数据。因此，虽然它基于 JDBC，但 IDE 数据库浏览器并不是**您**在编写 Swing 界面时将使用的工具。

# c# - 使用枚举 c# 分配属性的最佳方法

> ID：10700074
> 
> 赞同：0
> 
> 时间：2012-05-22T10:18:23.067
> 
> 标签：c#, enums

我怎样才能有效地扩展枚举以拥有超过 2 个选项。我正在逐行读取文件中的事件。我有一个构造函数

```
public enum EventType
{ A,D }

public class Event
{
    public EventType Type { get; set; }

} 
```

我像这样分配了 Type 属性：

```
 Type = tokens[2].Equals("A") ? EventType.A : EventType.D, 
```

`token[2]`保存像“A”这样的值的字符串在哪里。

当只有`A`and时，这很好用`D`，但我想再有 2 种类型；说`R`和`C`。当我将它们添加到枚举字段时，如何获取类型？以上给出了编译错误，就好像使用 Type 作为变量一样。

感谢您的即时帮助！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:21:33.200

实际上只有三种明智的方法可以解决这个问题：

## 枚举.TryParse

如果令牌将始终与您的枚举成员*完全*对应，您可以使用[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/system.enum.tryparse.aspx)：

```
EventType type;
if (Enum.TryParse(tokens[2], out type)) {
    Type = type;
}
else { /* token does not exist as an enum member */ } 
```

这种方法是最简单的，但它可能比下一种方法慢，而且它还有另一个缺点：提供的代码`tokens[2]`的作者和枚举的作者必须始终保持他们的代码同步。

## 使用字典

```
var dict = new Dictionary<string, EventType>
{
    { "A", EventType.A },
    { "D", EventType.D },
    // more items here
}

Type = dict[tokens[2]]; // no error checking, please add some 
```

这需要一些设置，但它可能是最快的，它还允许考虑输入字符串和/或枚举值的变化。

## 使用属性

或者，您可以使用自定义属性注释您的枚举成员，并编写一个辅助方法，该方法使用反射来根据此属性的值查找正确的成员。该解决方案有其用途，但可能性最小；大多数时候，您应该更喜欢这两种选择之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:22:48.100

你可以`Enum.Parse`用来解析一个字符串。对于错误处理，您可以使用`Enum.GetNames(typeof(EventType))`并迭代返回的字符串数组，其中包含枚举的所有可能名称。

```
var type = (EventType)Enum.Parse(typeof(EventType), tokens[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:24:28.670

您可以想使用[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/system.enum.parse)来获取匹配值：

```
Type = Enum.Parse(typeof(EventType), tokens[2]) 
```

如果`tokens[2]`未在 中定义`EventType`，则`Enum.Parse`抛出异常，因此您可以使用[`Enum.IsDefined`](http://msdn.microsoft.com/en-us/library/system.enum.isdefined)检查字符串是否存在枚举值：

```
Enum.IsDefined(typeof(EventType), tokens[2]) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-22T10:22:53.090

```
EventType et;
switch(tokens[2]) 
{
   case "A":
      et=EventType.A;
      break;
   case "B":
      et=EventType.B;
      break;
   case "C":
      et=EventType.C;
      break;
}
return et; 
```

# javascript - 动态加载包含复选框的 test.php 时，复选框提醒脚本不记得复选框状态

> ID：10700075
> 
> 赞同：0
> 
> 时间：2012-05-22T10:18:26.073
> 
> 标签：javascript, jquery, ajax, checkbox, dynamic-loading

我有一个有效的复选框提醒脚本： http: [//mauricederegt.nl/test/index.html](http://mauricederegt.nl/test/index.html)

它只是记住了复选框的状态，所以当你稍后回到网页时，它仍然会被选中到未选中。这一切都很好。

现在我需要在我的 HTML 页面中动态加载一个 php 页面（原始 php 页面从我的数据库中获取一些内容并显示一个名称列表。在该列表下方，出现此复选框，然后是来自 db 的另一个列表）。

我已将复选框放置在 php 文件中，但在加载 php 文件时它将显示在 HTML 文件中。js 文件仍然加载在 HTML 文件中（也尝试将其加载到 php 文件中，但这没有效果）。

问题：不再记得该复选框:(请参阅此演示： http: [//mauricederegt.nl/test/index2.html](http://mauricederegt.nl/test/index2.html)

我认为这是因为页面现在是动态加载的并且在 HTML 中不可见？

我该如何解决这个问题，以便再次记住该复选框？

如果需要，请查看 js 代码的 HTML 文件的源代码（此处发布太多）

亲切的问候，

php代码：

```
 <?php  
$q=$_GET["q"];
$checked = ($_GET['checked'] == 1 ) ? 'checked="checked"' : '';

if ($q == 1) {
echo '<ul>
        <li>Mike</li>
        <li>Peter</li>
        <li>Richard</li>
        <li>Quintin</li>
        </ul>
<div id="soundcheck" class="button blue"><input type="checkbox" value="Name" id="sound" '.$checked.' /><label for="sound"></label></div>
<ul>
        <li>Apple</li>
        <li>Banana</li>
        <li>Pineapple</li>
        </ul>';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:31:12.617

问题是检查然后设置复选框的记住状态的代码仅在页面首次加载（绑定到 DOM 就绪事件）时调用，因此在动态加载内容时不会调用。

调用现有代码的这一部分：

```
$('div#soundcheck input:checkbox').each(function() {
    // on load, set the value to what we read from storage:
    var val = storedData.get(this.id);
    if (val == 'checked') $(this).attr('checked', 'checked');
    if (val == 'not') $(this).removeAttr('checked');
    if (val) $(this).trigger('change');
}); 
```

动态加载复选框后，应该可以解决问题。

编辑：您需要将上述代码添加到现有 Javascript 的这一部分：

```
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("scoreboard").innerHTML=xmlhttp.responseText;
        // add the above code here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:59:41.190

如果加载 GET 的 php，我假设它返回以下内容：

```
<php
echo <<<OUTPUT
<div id="soundcheck" class="button blue">
<input type="checkbox" value="Name" id="sound">
This is the checkbox, uncheck it and refresh the page. It should remain unchecked!
</div>
OUTPUT; 
```

相反，让它返回：

为了让它更紧一点，我会选择：

```
<php
echo <<<OUTPUT
<div id="soundcheck" class="button blue">
<input type="checkbox" value="Name" id="sound">
<label for="sound">This is the checkbox, uncheck it and refresh the page. It should remain unchecked!</label>
</div>
OUTPUT; 
```

无论他们提交了什么，这将始终返回一个空白复选框。

现在，如果问题是除非他们取消选中该框，否则它*应该保持选中状态，请使用：*

```
<php
$checked ($_GET['checked'] == 1 ) ? 'checked="checked" : '';
echo <<<OUTPUT
<div id="soundcheck" class="button blue">
<input type="checkbox" value="Name" id="sound" $checked>
<label for="sound">This is the checkbox, uncheck it and refresh the page. It should remain unchecked!</label>
</div>
OUTPUT; 
```

在你的js中使用以下内容：

```
xmlhttp.open("GET","test.php?q="+str+"&checked=1",true); 
```

# sql - SQL Server 列加密

> ID：10700076
> 
> 赞同：2
> 
> 时间：2012-05-22T10:18:35.547
> 
> 标签：sql, sql-server, sql-server-2008, tsql, encryption

出于安全原因，我的应用程序中有几列需要加密。SQL Server 2008 怎么可能做到这一点？另外，我需要总是手动解密它们还是会自动发生？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:24:55.697

您可以创建一个`Certificate`然后`Symmetric Key`使用证书的一个：

```
CREATE CERTIFICATE YourCertificate
 WITH SUBJECT = 'Encrypted Content';
GO

CREATE SYMMETRIC KEY SSN_Key
  WITH ALGORITHM = AES_256
   ENCRYPTION BY CERTIFICATE YourCertificate;
GO 
```

解密：您可以使用`DecryptByKey`：

来自 MSDN 的示例是：

```
SELECT CardNumber, CardNumber_Encrypted AS 'Encrypted card number',
   CONVERT(nvarchar,
   DecryptByKey(CardNumber_Encrypted, 1 , 
   HashBytes('SHA1', CONVERT(varbinary, CreditCardID)))) AS 'Decrypted card number'  
FROM Sales.CreditCard; 
```

[http://msdn.microsoft.com/en-us/library/ms179331(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms179331(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:26:06.867

看看 MSDN 帖子[如何：加密数据列](http://msdn.microsoft.com/en-us/library/ms179331(v=sql.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T20:08:32.973

首先：使用以下代码创建您的合成密钥：

```
USE [yourDB]    
GO    
CREATE ASYMMETRIC KEY ClaveAsym    
WITH ALGORITHM = RSA_2048 ---->Take a look in this type of algorithms    
ENCRYPTION BY PASSWORD = 'yourKey'
GO 
```

*请记住这一点，您必须始终声明要解密或加密的变量：*

```
DECLARE @KEYID INT SET @KEYID = AsymKey_ID('ClaveAsym') 
```

**解密数据**

```
SELECT columnA, CAST(DecryptByAsymKey(@keyid, columnUser, N'yourKey') AS VARCHAR(100)), CONVERT(VARCHAR(MAX), DECRYPTBYASYMKEY(@keyId, columnPass, N'yourKey')) FROM yourTable 
```

**加密数据**

```
DECLARE @User VARCHAR(MAX), @pass VARCHAR(MAX)    
SET @User = 'yourUser'    
sET @pass = 'yourPass'    
DECLARE @KEYID INT SET @KEYID = AsymKey_ID('ClaveAsym')    
INSERT INTO yourTable( User, passw) VALUES EncryptByAsymKey (@keyid, @User ), EncryptByAsymKey (@keyid, @pass)) 
```

# enterprise-library - 具有工作流基础 4.0 的企业库在启动服务时抛出异常？

> ID：10700080
> 
> 赞同：0
> 
> 时间：2012-05-22T10:18:41.613
> 
> 标签：enterprise-library, workflow-foundation-4

我想在 wf4.0 中使用企业库验证。下面是我的配置。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration> 
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="Service1" behaviorConfiguration="PublishMetadata">
        <endpoint address=""
        binding="basicHttpBinding" contract="ITestService" behaviorConfiguration="Validation"/>       
      </service>      
      </services>

    <behaviors>
      <endpointBehaviors>
        <behavior name="Validation">
          <validation enabled="true"/>
        </behavior>
      </endpointBehaviors>

      <serviceBehaviors>
        <behavior name="PublishMetadata">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <extensions>
      <behaviorExtensions>
        <add name="validation"
             type="Microsoft.Practices.EnterpriseLibrary.Validation.Integration.WCF.ValidationElement, Microsoft.Practices.EnterpriseLibrary.Validation.Integration.WCF, Version=4.1.0.0, Culture=neutral, PublicKeyToken=null" />
      </behaviorExtensions>
    </extensions>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

当我尝试在网络浏览器中浏览服务时抛出异常。例外 ：-

## “/”应用程序中的服务器错误。

值不能为空。参数名称：operation.SyncMethod 描述：当前Web请求执行过程中发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentNullException：值不能为空。参数名称：操作.SyncMethod

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:25:06.307

众所周知，WF 服务是 WCf 异步服务的一种。企业库不支持异步服务。一位专家建议在企业库中进行一些更新，但也不适用于工作流服务。要查看完整的讨论，请点击此链接。

[http://entlib.codeplex.com/discussions/357087](http://entlib.codeplex.com/discussions/357087)

并感谢“randylevy”的支持和理解

# android - 包含大量数组的 JSON 文件：在 Android 中解析。

> ID：10700081
> 
> 赞同：1
> 
> 时间：2012-05-22T10:18:43.827
> 
> 标签：android, json, parsing, sdk

我有一个包含很多属性的 JSON 文件。在使用 Android SDK 提供的方法之前，我已经解析了 JSON 文件。但是我完全不知道如何处理这个文件，因为属性在数组中。

有人猜吗？

```
{
"properties": {
    "position" : { "valueType": "text" },
    "image" : { "valueType": "text" },
    "architekt" : { "valueType": "text" },
    "baustil" : { "valueType": "text" },
    "besuchbar" : { "valueType": "text" },
    "bildbeschreibung" : { "valueType": "text" },
    "bundesland" : { "valueType": "text" },
    "eintrittspreis" : { "valueType": "text" },
    "geo_lat" : { "valueType": "text" },
    "geo_lon" : { "valueType": "text" },
    "hoehe" : { "valueType": "text" },
    "internetpraesenz" : { "valueType": "text" },
    "land" : { "valueType": "text" },
    "oeffnungszeiten" : { "valueType": "text" },
    "ort" : { "valueType": "text" },
    "parkplaetze" : { "valueType": "text" },
    "plz" : { "valueType": "text" },
    "sehenswuerdigkeit" : { "valueType": "text" },
    "strasse" : { "valueType": "text" }
},
"items": [
    {
        "label": "Assf",
        "position": ["Testroute::2","Rathausroute::2"],
        "image": [" http:\/\/134.108.119.74\/mediawiki-1.18.2\/index.php\/Datei:Rathaus_Goeppingen.png"],
        "bildbeschreibung": ["Vorderansicht des Rathaus G\u00f6ppingen"],
        "sehenswuerdigkeit": ["Rathaus G\u00f6ppingen"]
    },
    {
        "label": "Burg Hohenstaufen",
        "position": ["Testroute::2","Rathausroute::13"],
        "image": [" http:\/\/134.108.119.74\/mediawiki-1.18.2\/index.php\/Datei:Burg Hohenstaufen Fresko.jpg"],
        "architekt": ["Friedrich I. von Schwaben"],
        "baustil": ["H\u00f6henburg, Gipfellage"],
        "besuchbar": ["wahr"],
        "bildbeschreibung": ["\u00c4lteste Abbildung der Burg Hohenstaufen aus dem Jahre 1470"],
        "bundesland": ["Baden-W\u00fcrttemberg"],
        "eintrittspreis": ["unentgeltlich besuchbar"],
        "geo_lat": ["48.743056"],
        "geo_lon": ["9.716389"],
        "hoehe": ["19 Meter"],
        "internetpraesenz": ["http:\/\/www.awdfasdfa.de"],
        "land": ["Germany"],
        "oeffnungszeiten": ["Immer Ge\u00f6ffnet"],
        "ort": ["G\u00f6ppingen Hohenstaufen"],
        "parkplaetze": ["falsch"],
        "plz": ["73037"],
        "sehenswuerdigkeit": ["Burg Hohenstaufen"]
    },
    {
        "label": "Test",
        "position": ["Testroute::1","Rathausroute::23"],
        "image": [" http:\/\/134.108.119.74\/mediawiki-1.18.2\/index.php\/Datei:Rathaus_Goeppingen.png"],
        "architekt": ["Joseph Poelaert"],
        "baustil": ["Barock"],
        "besuchbar": ["wahr"],
        "bildbeschreibung": ["Vorderansicht des Rathaus G\u00f6ppingens"],
        "bundesland": ["Baden-W\u00fcrttemberg"],
        "eintrittspreis": ["f\u00fcr Umme"],
        "geo_lat": ["48.7025"],
        "geo_lon": ["9.65277"],
        "hoehe": ["19 Meter"],
        "internetpraesenz": ["http:\/\/www.awdfasdfa.de"],
        "land": ["Germany"],
        "oeffnungszeiten": ["Mo: 9:30 bis 13:30 und 14:00 bis 18:30 &lt;br \/&gt; Sa&amp;So: 10:00 bis 20:00"],
        "ort": ["G\u00f6ppingen"],
        "parkplaetze": ["wahr"],
        "plz": ["70825"],
        "sehenswuerdigkeit": ["Rathaus G\u00f6ppingen"],
        "strasse": ["Robert-Bosch-str. 12"]
    }
] 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:23:16.553

[它很容易](http://developer.android.com/reference/org/json/JSONObject.html)

```
json = new JSONObject(textThatISJSON);
JSONArray properties = json.getJSONArray("properties");
JSONArray position = properties.getJSONArray("position"); 
```

# mongodb - $addToSet 执行更新

> ID：10700082
> 
> 赞同：1
> 
> 时间：2012-05-22T10:18:48.510
> 
> 标签：mongodb

我可以使用 $addToSet 来更新现有的子文档吗？如果是这样，我如何告诉 MongoDb 匹配是当“oid”和“instance”相同并且“value”字段应该更新时。

谢谢

```
{ $addToSet : { "data" : { $each : [
 {"oid" : "1.3.6.1.4.1.111.3.10.9.9.88",
      "instance" : "0",
      "value" : "8888"}

{"oid" : "1.3.6.1.4.1.111.3.10.9.9.77",
      "instance" : "0",
      "value" : "88888888"}

 ] } } }

"_id" : 483,
  "data" : [{
      "oid" : "1.3.6.1.4.1.111.3.10.2.5.35.3",
      "instance" : "0",
      "value" : "0"
    }, {
      "oid" : "1.3.6.1.4.1.111.3.999.2.5.2",
      "instance" : "0",
      "value" : "RFCluster"
    }, {
      "oid" : "1.3.6.1.4.1.111.3.30.5.1.1",
      "instance" : "0",
      "value" : null
    }]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:38:57.217

您不能仅使用 $addToSet 更新特定的子文档。我认为您应该更改架构，以便每个“数据”元素都是自己的文档，并将 ID 移动到 data_id 中，例如：

```
{
  "data_id": 483,
  "oid" : "1.3.6.1.4.1.111.3.10.2.5.35.3",
  "instance" : "0",
  "value" : "0"
} 
```

然后你可以很容易地使用类似[upsert](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)的东西来更新一个值：

```
db.colname.update(
    { "data_id" 483, "oid" : "1.3.6.1.4.1.111.3.10.2.5.35.3", "instance" : "0" }, // criteria
    { $set: { 'value' : "new value" } }, // update spec
    true // this is to enable "upsert"
); 
```

# ajax - Extbase AJAX 调用仅适用于某些操作

> ID：10700085
> 
> 赞同：0
> 
> 时间：2012-05-22T10:19:03.440
> 
> 标签：ajax, action, typo3, fluid, extbase

虽然我设法获得了一个有效的 AJAX 调用，但它不适用于我已经创建的操作，而不是新创建的操作。

我的打字稿看起来像这样：

```

    lib.AJAXPrototype= PAGE
    lib.AJAXPrototype {
      typeNum = 896571
      config {
        disableAllHeaderCode = 1
        xhtml_cleaning = 0
        admPanel = 0
              debug = 0
              no_cache = 1
        additionalHeaders = Content-type:text/html
      }
    }

    AJAX_Plugintyp < lib.AJAXPrototype
    AJAX_Plugintyp {
      typeNum = 89657201
      10 < tt_content.list.20.myext_myplugin1
    }

```

我的 AJAX 调用如下所示：

```
    $.ajax({
      url: "index.php",
      data: "tx_myext_myplugin1[controller]=Mycontroller1&tx_myext_myplugin1[action]=ajax&type=89657201",
      success: function(result) {
        alert(result);
      }
    });

```

我的ajaxAction：

```
    /**
         * action ajax
         *
         * @return void
         */
        public function ajaxAction() {
            $test = 'sometext';
            $this->view->assign('test', $test);
        } 

```

我的 Ajax.html（查看/输出）：

```
    <f:section name="main">
    <f:flashMessages />
    <div id="ajaxd">{test}</div>
    </f:section>

```

我不会从中得到任何输出，我只是为 Ajax 输出创建了这个动作。但是，如果我使用任何其他控制器/动作组合，它就可以工作！我可能对新的 Action 做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:06:28.313

关于 ajax 和 Extbase 的两件事

**首先**将 JS 直接放在视图中通常会失败，因为 Fluid 试图将 JavaScript 的数组解析为自己的数组/变量。很不舒服。解决方案是将 JS 放在单独的文件中（因此我问了你一个关于这个的问题）。[看到这个问题/答案](https://stackoverflow.com/a/10546958/1066240)

第二件事是`Firebug`（或其他类似工具）。Extbase 链接的超长路径很容易在其中犯一些恼人的错误，然后您需要逐个字符仔细比较。

Firebug 将帮助您快速找到 AJAX 问题，只需打开它切换到`Net`选项卡，然后您将看到在某些操作后使用 ajax 发送的内容以及返回的内容。很可能你收到了类似的东西：

```
Uncaught TYPO3 Exception:
The action "xxxxx" (controller "Yyyy") is not allowed by this plugin... 
```

但检查它的唯一方法是使用 Firebug 进行调试 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:18:31.037

好的，现在它可以工作了。这听起来可能很疯狂，但我并没有真正改变任何东西来让它工作。

我确实忘记将它添加到 ext_localconf.php：

```
    Tx_Extbase_Utility_Extension::configurePlugin(
            $_EXTKEY,
            'Myplugin1',
            array(
                'Mycontroller' => 'list, ajax',
            ),
            // non-cacheable actions
            array(
                'Mycontroller' => 'list, ajax',
            )
        ); 

```

但是，我昨天做了这个，后来它没有用。今天我再次尝试在打字稿中进行一些随机编辑（更改页面类型等），突然它起作用了！但是，我回到了昨天的确切状态，它仍然有效。我很困惑，不知道我是否只需要重新排列打字稿，或者是否出于某种原因不得不重新编写它，但我很高兴它现在可以工作了！

# ipad - 可信计算、iPad、认证未经修改的应用程序

> ID：10700095
> 
> 赞同：3
> 
> 时间：2012-05-22T10:19:31.350
> 
> 标签：ipad, trusted-computing

由于Apple控制了整个硬件/软件堆栈，是否有可能获得以下信息（通过某种类型的可信计算）：

*   硬件证明软件是正版的，没有越狱的 iOS
*   iOS 向*我的服务器*证明运行的应用程序是未经修改的应用程序

实现的效果如下：

当我的服务器发送数据时，保证数据只能以我打算使用的方式使用（因为它在未修改的情况下运行我的应用程序，在未越狱的 iOS 上）。

这可以防止诸如修改后的应用程序窃取从服务器传输到客户端的数据之类的事情。我意识到理论上可以窃听，但这可以通过加密来消除。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T02:33:31.867

简而言之，没有。

您在不支持 TC 的平台上谈论可信计算概念。IOS 不包括任何靠近`Trusted Computing - Remote Attestation`. **它没有 TPM**。

如果引导链中下一个元素的签名无效，Apple 芯片建立的信任链只会尝试停止执行。如果一件事失败（越狱），他们就没有真正有效的检测方法。它与 Microsoft 推出的 Secure Boot 非常相似，但它与 Trusted Computing`attest`当前运行的系统版本非常不同。

借助可信计算，TPM 存储系统启动 (SRTM) 的测量值 (PCR)。在启动时，执行的第一件事（CRTM - 我们真正需要隐式信任的唯一内容）将通过测量 BIOS 来启动链，将测量值发送到 TPM（在 PCR 中）并将执行传递给它（BIOS）。然后 BIOS 对引导链中的下一个元素执行相同的操作。

然后可以使用存储在 PCR 中的测量值来加密或解密信息（SEAL/UNSEAL 操作），具体取决于内存中加载的环境。

TPM 不对测量值（好或坏）采取行动。这个想法不是限制可以加载的内容，而是能够知道平台上加载了什么环境。如果某些内容已被修改，TPM 将不包含正确的 PCRs 值，并且 UNSEAL 操作（使用 PCRs 作为密钥进行解密）将不起作用。

在远程证明的情况下，我们谈论的是 QUOTE 操作。它与 SEAL 基本相同，但使用其他密钥来确保评估方可以验证证明确实来自真实/合规的 TPM。

当然，系统可以使用 SEAL 操作来保护用于解密操作系统的机密，从而以某种方式产生与安全启动相同的效果。

有关更多信息，请参阅我的其他帖子。

# mfc - MFC - 如何在 2 个不同的视图之间发送消息

> ID：10700098
> 
> 赞同：1
> 
> 时间：2012-05-22T10:19:41.300
> 
> 标签：mfc, message, user-defined, cview

我有 2 个 CView 派生类，CThumbView 和 CMainView。CThumbView 类显示图像的缩略图，CMainView 类控制显示原始图像的视图。

我想在我的应用程序启动时显示第一个缩略图及其原始缩略图。我尝试使用 OnInitialUpdate，但这不是理想的方式，因为它打扰了处理主视图的其他功能。

如何通过在两个视图之间发送用户定义的消息来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T05:13:34.010

由于您使用的是文档视图架构，因此您需要从视图中利用文档的[CDocument::UpdateAllViews](http://msdn.microsoft.com/en-us/library/eys41xfw.aspx)函数来更新其余视图。此函数将调用每个视图的 OnUpdate。

数据由文档保存。视图访问数据并相应地更新自己。

# macos - 将 Mac 文件夹加密到 CDROM 以用于 Windows

> ID：10700107
> 
> 赞同：0
> 
> 时间：2012-05-22T10:20:16.417
> 
> 标签：macos, encryption, osx-lion

我一直在努力弄清楚这怎么可能收效甚微。

我在 Mac OS X Lion 上，需要为 Windows 用户加密 CD-R。

我要做的就是将包含重要网站文件的文件夹加密到 CD-R，以便我可以通过 CD 上的帖子安全地发送文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:28:38.143

[truecrypt](http://www.truecrypt.org/)是一个免费的、跨平台的解决方案，应该适合你。它可以配置为加密目录或特殊*块文件*，只能通过密码访问。

想必您也可以将 Windows 安装文件放在 CD-ROM 上，以便收件人更轻松地访问数据。

另一种方法是使用[GPG](http://www.gnupg.org/)来加密文件，`.zip`甚至`.tar.gz`使用 AES 加密来压缩自身。

# c# - 如何从配置中加载权限集

> ID：10700113
> 
> 赞同：1
> 
> 时间：2012-05-22T10:20:36.390
> 
> 标签：c#, .net, c#-4.0, .net-4.0, code-access-security

我想知道是否有某种方法可以从配置文件中加载权限集。

例如，具有以下权限的权限集：

*   一个 FileIOPermission。
*   一个 SqlClientPermission。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:43:04.090

`PermissionSet.FromXml(SecurityElement.FromString(yourXmlRepresentation))`对你的场景有用吗？如果没有，请发布您的配置文件内容示例，以及您尝试用于读取权限集的代码。

# cakephp - 重新定位 Cake 的默认布局文件夹

> ID：10700116
> 
> 赞同：1
> 
> 时间：2012-05-22T10:20:42.920
> 
> 标签：cakephp, path, cakephp-1.2

我正在开发一个 CakePHP 1.2 应用程序，我无法控制 /app 目录并将我的视图文件夹重新定位到 /path/to/mycomponent/views 并且可以通过设置控制器的默认视图路径来呈现我的视图

```
var $viewPath = "mycomponent/views"; 
```

我在 /path/to/mycomponent/views/layouts 下有一些布局（包括 basic.ctp）

有没有办法在特定布局中呈现我的视图？

从我的控制器调用它会给我一个找不到页面的错误：

```
function index()
    {
        $this->autoLayout = true;
        $this->pageTitle = 'Browse items';
        $this->render("browse", "basic");
        // also tried: $this->render("browse", "/path/to/mycomponent/views/layouts/basic.ctp");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:29:17.980

最后通过向应用程序配置的 viewPaths 数组添加路径来使其工作。此代码进入您的控制器构造函数或覆盖 beforeFilter 方法中：

```
$config = Configure::getInstance();
$config->viewPaths[] = " /path/to/mycomponent/views/"; 
```

现在我可以指定以下内容：

```
$this->layout = 'basic'; 
```

我的控制器的视图呈现在`basic.ctp`布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T09:54:01.520

仅供参考。我相信 cakePhp 2.x 应该这样做。

> 公共函数 beforeRender() { parent::beforeRender();
> $this->layout = 'mylayout'; }

这将转到路径：*/app/View/Layouts/mylayout.ctp*

**笔记：**

如果要修改某些控制器的视图路径，请在控制器类声明之前添加：

> App::build(array('View' => '/Folder/'));
> 
> 类 ExampleController 扩展 AppController{...}

这会将*示例*控制器的所有渲染视图的路径设置为*/app/Views/Folder/*

所以完整的例子是：

> App::build(array('View' => '/Folder/'));
> 
> 类 ExampleController 扩展 AppController{
> 
> ```
> public function beforeRender() {
>     parent::beforeRender();        
>     $this->layout = 'mylayout';
> }  
> 
> public function index() {
>     $this->render('Home');
>     //This will load view: "/app/Views/Folder/Home.ctp"
>     //From layout: "/app/Views/Layouts/mylayout.ctp"
> } 
> ```
> 
> }

# apache - .htaccess mod_rewrite 具有各种 URL 深度

> ID：10700119
> 
> 赞同：2
> 
> 时间：2012-05-22T10:21:19.363
> 
> 标签：apache, .htaccess, mod-rewrite

.htaccess mod_rewrite 具有各种 URL 深度

我是 mod_rewrite 的新手，并试图制作一个 mode_rewrite 命令来覆盖所有可能的 URL 深度并显示索引页面。

最大长度：

```
loader.php?lang=en&cat0=products&cat1=books&cat2=cooking&pageid=pudding
/en/products/books/cooking/pudding.php

loader.php?lang=en&cat0=products&pageid=index
/en/products/index.php 
```

URL 始终以“lang”开头并以“pageid”结尾，但中间的深度可能会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:53:01.140

```
RewriteRule ^([^/]+)(?:/([^/]+))?(?:/([^/]+))?(?:/([^/]+))?/([^/]+)\.php loader.php?lang=$1&cat0=$2&cat1=$3&cat2=$4&pageid=$5 [L] 
```

如果我是正确的。

# mysql - MySQL多语句执行顺序

> ID：10700120
> 
> 赞同：0
> 
> 时间：2012-05-22T10:21:24.947
> 
> 标签：mysql, sql, routines

我创建了一个在一个表中插入记录的例程，然后它搜索该 id（使用 select 语句）并使用该 id 更新另一个表的字段。这可能吗？这是一个例程，所以我的问题是语句是否按顺序执行？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:32:21.700

1.  您无需搜索 id。您可以使用`LAST_INSERT_ID()`来获取最后插入的行的 id。

    `INSERT INTO tablename (<columns>) VALUES (<columnvalues>);`

    `SELECT LAST_INSERT_ID() INTO somevariable;`

2.  然后你可以写你的`UPDATE`陈述。

    `UPDATE sometable SET sometable.col = somevariable WHERE sometable.something = @something`

3.  例程中的语句按照它们编写的顺序执行。

# php - JiBX/PiBX SOAP 绑定示例

> ID：10700123
> 
> 赞同：0
> 
> 时间：2012-05-22T10:21:37.880
> 
> 标签：php, xml, soap, binding, jibx

我试图找到一些示例，如何使用 JiBX/PiBX 编写 binding.xml 以跟踪 SOAP 响应，但没有运气。有谁知道如何做到这一点？

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
       <ns6:getDataResp xmlns:ns6="http://domain.com/response/data/">
       <s3:requestId xmlns:s3="http://domain.com/entity/">12</s3:requestId>
       <s4:errorCode xmlns:s3="http://domain.com/entity1/">0</s4:errorCode>
           <ns6:dataResp>
               <ns5:Data>Some string data</ns5:Data>
           </ns6:dataResp>
       </ns6:getDataResp>
    </soapenv:Body> 
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:12:41.873

如果您使用的是 JiBX，那么您很幸运。你有几个选择：

1.  apache cxf 项目有一个用于 JiBX 的数据绑定模块。您可以使用其中一种开源 Web 服务器（例如 servicemix）来进行 SOAP 处理。这意味着您只需要将消息模式（在您的示例中为 getDataResp）与 JiBX 绑定。[你可以在这里](http://blog.tourgeek.com/2012/04/creating-soap-and-rest-services-for.html)找到一个很好的例子。
2.  JiBX 有自己的 Web 服务器，称为[JiBX/WS](http://jibx.sourceforge.net/jibxws/index.html)。它还将为您完成所有 SOAP 处理。

我希望这有帮助！

Don
JiBX 贡献者

# php - 递归标签内容

> ID：10700124
> 
> 赞同：0
> 
> 时间：2012-05-22T10:21:51.547
> 
> 标签：php, regex, preg-match

我希望改进以下正则表达式，因为我现在也想匹配嵌套标签：

`'%{if:\s*"\'([^\']*)\' == \'([^\']*)\'"}((?:(?!{else}|{/endif}).)*){else}((?:(?!{/endif}).)*){/endif}%sei'`

基本上匹配：

```
{if: "'x' == 'y'"}
    a
{else}
    b
{/endif} 
```

或者

```
{if: "'x' == 'y'"}
    c
{/endif} 
```

但是，我希望它以某种方式递归，因此嵌套语句也可以在不破坏任何内容的情况下匹配（此时如果添加嵌套语句，它会中断）。

也会有类似的表达`!=`。

我发现这个[http://www.devnetwork.net/viewtopic.php?f=38&t=102670&sid=02b7c691a2be894336c694700f8f911a#p551340](http://www.devnetwork.net/viewtopic.php?f=38&t=102670&sid=02b7c691a2be894336c694700f8f911a#p551340)匹配`<div>`标签，虽然有点不确定如何调整它以适应我的正则表达式......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:10:48.673

如果您将嵌套限制在某个预定的深度（这可能是一个坏主意，也可能不是一个坏主意），您可以将其与正则表达式匹配。否则，你不能。您提供的链接将 HTML 与正则表达式相匹配，这通常被使用，但通常[被](https://stackoverflow.com/a/1732454/1353187)认为是一个坏主意。如果您不想使用其他形式的解析，请考虑匹配最里面的 ifs，替换为某物并再次匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:31:26.837

在这种情况下，使用正则表达式 (PCRE) 并不是最佳选择，因为您需要重新解析每个嵌套级别的内部内容（使用适当解析器的原因之一会更好）。

也就是说，可以使用以下模式来完成：

```
~
{if:\s*+
    (?<condition>
        [^{}]++
    )
}

(?<then>
    (?:
        (?:(?!{if:[^{}]++}|{else}|{/endif}).)*+
        (?R)*+
    )*+
)

(?:
    {else}
    (?<else>
        (?:
            (?:(?!{if:[^{}]++}|{else}|{/endif}).)*+
            (?R)*+
        )*+
    )
)?+

{/endif}
~six 
```

Perl 示例[@ideone](http://ideone.com/aDG3z)。

在这个文本上

```
if: "'x' == 'y'"}
    a
{else}
    b
{/endif}

{if: "'x' == 'y'"}
    c
{/endif}

{if:minimal}{else}{/endif}

{if: "'nested' == 'things'"}
    {if: "'x' == 'y'"}x{if:minimal}{else}{/endif}x{/endif}
{else}
    b{if: "'x' == 'y'"}c{/endif}{if: "'x' == 'y'"}c{/endif}
{/endif}

{if:foo} unbalanced {if:bar}ignores first if{/endif} 
```

它匹配

```
*** matched if:
  * cond: "'x' == 'y'"
  * then:
    a

  * else:
    b

*** matched if:
  * cond: "'x' == 'y'"
  * then:
    c

*** matched if:
  * cond: minimal
  * then:
  * else:
*** matched if:
  * cond: "'nested' == 'things'"
  * then:
    {if: "'x' == 'y'"}x{if:minimal}{else}{/endif}x{/endif}

  * else:
    b{if: "'x' == 'y'"}c{/endif}{if: "'x' == 'y'"}c{/endif}

*** matched if:
  * cond: bar
  * then: ignores first if 
```

# c# - 添加服务引用后不明确的 System.SerializationAttribute 引用

> ID：10700125
> 
> 赞同：0
> 
> 时间：2012-05-22T10:21:52.330
> 
> 标签：c#, wcf, web-services

我正在将服务引用（到 Exchange Web 服务）添加到我的项目中，并且在构建时遇到了一个模棱两可的引用错误。（Resharper 实际上给了我一个设计时错误，VS 不是）

我正在使用 AutoMapper（有用的库[https://github.com/AutoMapper/AutoMapper/wiki](https://github.com/AutoMapper/AutoMapper/wiki)）将我的业务实体映射到 DAL，并且编译器向我保证 System.SerializationAttribute 存在于 AutoMapper 程序集和 mscorlib 中。它在 AutoMapper 程序集中不存在，所以我想这有点像红鲱鱼......

我有点困惑 - 如果我删除服务引用，我可以毫无问题地使用 System.SerializationAttribute 装饰器。一旦我添加对 EWS 的服务引用，**整个项目中的任何 System.SerializationAttribute 装饰器都会出现此错误！**这给了我一个线索，即引用正在造成歧义，但在哪里？

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.450")]
[System.SerializableAttribute()] <-- ambiguous ref issue with this decorator
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://schemas.microsoft.com/exchange/services/2006/types")]
public enum RuleValidationErrorCodeType { 
```

我还有另一个问题，当我尝试将其添加为网络参考时，我无法进入“添加网络参考”对话框。我只是得到一个“无法为对话框创建控件”。有人见过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:50:43.013

AutoMapper 2.0.0.0 似乎有一个错误，如您在此处看到的，但使用 Silverlight 版本

[https://github.com/AutoMapper/AutoMapper/issues/181](https://github.com/AutoMapper/AutoMapper/issues/181)

但是如果您的应用程序不使用 Silverlight，您应该能够避免该问题。

您确定使用 AutoMapper 的“no-silverlight”dll 吗？

当你下载 AutoMapper 时，你会得到 2 个文件夹：

*   net40-客户端
*   SL4

两者都有一个 AutoMapper.dll 如果你引用 net40-client 那个，你应该没问题。

# javascript - 如何删除已经生成的脚本标签并重新生成？

> ID：10700127
> 
> 赞同：2
> 
> 时间：2012-05-22T10:22:19.090
> 
> 标签：javascript, jquery, twitter, facebook-like

我正面临一个关键问题。我有一个包含两个部分的页面。在页面的第一部分，通过 ajax 请求呈现 html。在第二页上，html 在页面加载时呈现。页面的第一部分是单独处理的，具有不同的分页脚本。分页也是通过向同一个 url 发送 ajax 请求来处理的。

我对第一部分有疑问。为第一部分生成 html 的脚本也在使用 javascript 生成大量 javascript 标签和 html。现在，在该 html 中插入新的脚本标记时我正在做的事情是这样的：

```
var script   = document.createElement("script");
script.type  = "text/javascript";
script.text  = "window.twttr = (function (d,s,id) {var t, js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;js.src=\"//platform.twitter.com/widgets.js\"; fjs.parentNode.insertBefore(js, fjs);return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });}(document, \"script\", \"twitter-wjs\"));(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return;js = d.createElement(s); js.id = id; js.src = \"//connect.facebook.net/en_GB/all.js#xfbml=1\"; fjs.parentNode.insertBefore(js, fjs);}(document, \"script\", \"facebook-jssdk\"));var script_generated=1";               // use this for inline script
document.body.appendChild(script); 
```

实际上是 Twitter 和 Facebook connect 语句在页面第一部分的每个项目上显示一个 Facebook 喜欢按钮和一个 Twitter 按钮。页面第一次加载时，脚本标签生成成功。但是，当我单击分页时，它会发送一个新的 ajax 请求以获取新页面的 html，它还会再次生成相同的脚本标记。所以在第二页上我的 Twitter 按钮和 Facebook like 按钮没有显示出来。

我认为这是由于 Facebook 和 Twitter 的双重连接声明。然后我生成一个变量并在生成该脚本标记时设置一些值。并且在每个请求中，我都会检查该变量是否存在。如果它存在，我不会像这样生成特定的脚本标签：

```
if(typeof script_generated === "undefined") {
  var script   = document.createElement("script");
  script.type  = "text/javascript";
  script.text  = "window.twttr = (function (d,s,id) {var t, js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;js.src=\"//platform.twitter.com/widgets.js\"; fjs.parentNode.insertBefore(js, fjs);return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });}(document, \"script\", \"twitter-wjs\"));(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return;js = d.createElement(s); js.id = id; js.src = \"//connect.facebook.net/en_GB/all.js#xfbml=1\"; fjs.parentNode.insertBefore(js, fjs);}(document, \"script\", \"facebook-jssdk\"));var script_generated=1";
           // use this for inline script
  document.body.appendChild(script);
} 
```

执行此脚本标记不会重新生成，但推文和 Facebook 之类的按钮仍然不会出现。

现在我已经解释（我可能错了），因为脚本标签是由 ajax 请求生成的，所以按钮没有正确显示，因为它们没有找到它们的脚本标签。

现在我想要的是，每当向该文件发送请求时，它首先检查该特定脚本标签是否存在，如果存在则删除它并生成一个新标签，否则生成。请指导我如何做到这一点。

如果我对问题的解释有误，那么请让我知道确切的问题是什么以及如何克服这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:36:18.720

好吧，当您动态添加时，您可以为脚本标签提供 id。

```
var script   = document.createElement("script");
script.setAttribute('id', 'addedScript');
script.type  = "text/javascript";
script.text  = "window.twttr = (function (d,s,id) {var t, js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;js.src=\"//platform.twitter.com/widgets.js\"; fjs.parentNode.insertBefore(js, fjs);return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });}(document, \"script\", \"twitter-wjs\"));(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return;js = d.createElement(s); js.id = id; js.src = \"//connect.facebook.net/en_GB/all.js#xfbml=1\"; fjs.parentNode.insertBefore(js, fjs);}(document, \"script\", \"facebook-jssdk\"));var script_generated=1";
// use this for inline script
document.body.appendChild(script); 
```

之后，您可以使用它检查脚本标签是否存在，并使用 .remove() 查询函数删除。

```
if(addedScript != undefined) {
  $("#addedScript").remove();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:35:22.213

您好，您可以获得该脚本标签的引用对象，您可以使用 object.src 更改引用的 src 文件。

应该是这样的

```
var $jsRef = $('<script type="text/javascript" >').appendTo(document.body);
$jsRef.attr("src","jsFileName.js");

// You can also add content like this
$jsRef.append(content);

// You can change the js file name or content the same way
$jsRef.attr("src","newJSFileName.js");

// Changing the content like this
$jsRef.empty();
$jsRef.append(content); 
```

或者，您可以为脚本标签设置 id 并根据 id 更改内容，而不是使用对象访问。

# performance - 为了清楚起见，值得在调用方法之前创建变量参数

> ID：10700130
> 
> 赞同：0
> 
> 时间：2012-05-22T10:22:37.660
> 
> 标签：performance, maintenance, readability

为方法参数使用尽可能有意义和清晰的名称被认为是最佳实践：

```
public myFunction(String meaningfulName1, String meaningfulName2, boolean meaningfulName3) 
```

但是，在调用该方法时，有时我们会发现这一点，这会降低可读性：

```
myFunction("", "foo", false); 
```

为了清晰起见，是否值得为参数创建变量的开销？

```
String meaningfulName1 = "";
String meaningfulName2 = "foo";
String meaningfulName3 = false;
myFunction(meaningfulName1,meaningfulName2,meaningfulName3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:15:50.937

根据您的命名约定，我假设您不使用 c#，但在 c# 以及许多其他语言中，您可以在调用方法时使用命名参数。

```
myFunction(meaningfulName1: "", meaningfulName2: "foo", meaningfulName3: false) 
```

我经常使用这种技术来帮助提高可读性，因为从内容上看不同的参数代表什么并不明显。特别是有很多方法调用`0, 1, true, false, null`是很好的候选者，您需要在参数命名中更加明确以使代码可读。

在不能选择命名参数的语言中，当内容从上下文中不明显时，我肯定会分解变量以提高可读性。

然而，在我编写的大多数代码中，我很少使用常量参数调用我的方法，大多数参数都是在其他地方计算的，并且已经包含在好的命名变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:37:24.793

以我的经验，我很确定显式方式更好（至少在大多数情况下）。第一种方式不会给您带来太多的性能提升；但是对于继续进行维护工作的人会很有帮助。

毕竟，[预优化是万恶之源](https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil)。

P/s：第二种方式对于具有 LONG 参数列表的方法也是非常必要的（除了“objectize”参数方法）。但我希望你不必处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:31:06.410

如果您在定义函数时正确记录了函数，那么对参数的解释只是 ctrl + 单击，甚至鼠标悬停在 IDE 中。

作为开发人员，我更有可能对该函数对这些变量的作用和返回感兴趣，而不是它们在运行时的上下文（即使我确切地知道每个 var 是什么，我也不能在不查看实际内容的情况下依赖输出发生），所以我还是想看看它的代码。

# eclipse - Eclipse：如何在类内（方法外）放置断点

> ID：10700139
> 
> 赞同：0
> 
> 时间：2012-05-22T10:23:06.087
> 
> 标签：eclipse, debugging, breakpoints, watchpoint

```
import java.util.Properties;

public class Pavan {
    Properties props = new Properties();
(X) String message = props.getProperty("message");
    String name = message;

    public static void main(String args[]) {
        Pavan k = new Pavan();

    }

} 
```

你好 ，

这是我的示例程序。我正在使用 Eclipse IDE 3.6 版本。

我可以在方法中放置断点（在这种情况下它是主要方法）这里我的问题是，我不能在 (X) 字符串消息行放置断点吗？

请告诉我，提前谢谢？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:58:22.060

据我所知，您不能在方法之外放置断点。为什么要在这一行设置断点？我从未尝试过，但似乎您可以添加[观察点](http://help.eclipse.org/indigo/topic/org.eclipse.cdt.doc.user/tasks/cdt_t_add_watch.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:58:38.267

目前尚不清楚您的确切含义，但是您[在 Eclipse 中有几种类型的断点](http://www.eclipse-tips.com/tips/29-types-of-breakpoints-in-eclipse)：

*   行断点
*   异常断点
*   类加载断点
*   观察点
*   方法断点
*   打印点

我认为您的情况可能需要一个观察点...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:06:50.103

当有可执行代码时，可以在类之外设置断点。就像您给出的示例中的初始化语句（想不出任何其他示例......）一样。用 Eclipse 进行尝试显示，可以从上下文菜单中选择“切换断点”，但实际上创建了一个“[观察点](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_add_watch.htm)”。

# objective-c - 将 Facebook 库与 MGTwitterEngine 链接时出错

> ID：10700144
> 
> 赞同：1
> 
> 时间：2012-05-22T10:23:22.217
> 
> 标签：objective-c, ios, xcode

我正在尝试将 Facebook 集成到我的应用程序中，并且已经毫无问题地实现了 MGTwitterEngine。由于我尝试同时实现 Facebook sdk 和 MGTwitterEngine，我不断收到错误消息。我已经读到两个 SDK 之间有一个重复的库，个人说它与 JSON 库有关。我从 Facebook sdk 中删除了它，但我仍然收到错误消息。有谁知道问题可能是什么？

所以我知道它在错误中指的是我的 armv6 但在我尝试运行 Facebook sdk 之前根本没有错误

谢谢

```
Ld "/Users/Alex/Library/Developer/Xcode/DerivedData/grocery-bhrkiajnjqfieahhdxilwtjggbqc/Build/Intermediates/grocery.build/Release-iphoneos/grocery.build/Objects-normal/armv6/grocery" normal armv6
cd /Users/Alex/Documents/Dictator/Lotto
setenv IPHONEOS_DEPLOYMENT_TARGET 3.1
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv6 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -L/Users/Alex/Library/Developer/Xcode/DerivedData/grocery-bhrkiajnjqfieahhdxilwtjggbqc/Build/Products/Release-iphoneos "-L/Users/Alex/Documents/Dictator/Lotto/Classes/Twitter+OAuth 2/SAOAuthTwitterEngine" -F/Users/Alex/Library/Developer/Xcode/DerivedData/grocery-bhrkiajnjqfieahhdxilwtjggbqc/Build/Products/Release-iphoneos -filelist "/Users/Alex/Library/Developer/Xcode/DerivedData/grocery-bhrkiajnjqfieahhdxilwtjggbqc/Build/Intermediates/grocery.build/Release-iphoneos/grocery.build/Objects-normal/armv6/grocery.LinkFileList" -dead_strip -miphoneos-version-min=3.1 -framework Security -lxml2 -framework MessageUI -framework Foundation -framework UIKit -framework CoreGraphics -framework CoreData -framework MapKit -framework SystemConfiguration -lOAuth -o "/Users/Alex/Library/Developer/Xcode/DerivedData/grocery-bhrkiajnjqfieahhdxilwtjggbqc/Build/Intermediates/grocery.build/Release-iphoneos/Lotto Fetcher.build/Objects-normal/armv6/grocery"

ld: duplicate symbol _main in /Users/Alex/Library/Developer/Xcode/DerivedData/grocery-bhrkiajnjqfieahhdxilwtjggbqc/Build/Intermediates/grocery.build/Release-iphoneos/Lotto Fetcher.build/Objects-normal/armv6/main-280587BD193E8878.o and /Users/Alex/Library/Developer/Xcode/DerivedData/grocery-bhrkiajnjqfieahhdxilwtjggbqc/Build/Intermediates/grocery.build/Release-iphoneos/Lotto Fetcher.build/Objects-normal/armv6/main-B9843B6026D6EFA4.o for architecture armv6    

clang: error: linker command failed with exit code 1 (use -v to see invocation)
Duplicate symbol 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:27:44.090

在您的项目中搜索 main.m 文件的两个副本。:-)

# android - 有没有办法在应用程序中以编程方式捕获清除数据操作？

> ID：10700146
> 
> 赞同：5
> 
> 时间：2012-05-22T10:23:24.060
> 
> 标签：android

我开发了一个 android 应用程序，它有一组活动和一个正在运行的后台服务。我将一些应用程序数据保存到设备的内存中，因此当用户从设置->应用程序->清除数据按钮单击清除数据选项时，保存在内存中的所有数据都会被清除。当用户单击我的应用程序服务或广播接收器类中的清除数据按钮时，我必须捕获清除数据单击事件或操作（如果有），任何人都可以建议单击应用程序的清除数据时设备是否抛出任何操作所以我可以在我的应用广播接收器类中捕捉到该动作并执行所需的任务？？？

请通过一些示例向我提供解决方案。

问候， 皮克斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-23T17:00:10.747

最好的方法是在应用程序首次运行或保存所有必需的详细信息时在 SharedPreferences 中存储一个值，例如“IS_DATA_CLERED”，并始终确保在应用程序的生命周期中的任何时候都不会修改此值。

```
SharedPreferences appSharedPrefs = PreferenceManager
            .getDefaultSharedPreferences(this);
SharedPreferences.Editor editor = appSharedPrefs.edit();
editor.putBoolean("IS_DATA_CLEARED",false);
editor.apply(); 
```

然后每次都做下面的检查。

```
SharedPreferences sharedPreferences = PreferenceManager
            .getDefaultSharedPreferences(this);
boolean IS_DATA_CLEARED =  appSharedPrefs.getBoolean("IS_DATA_CLEARED",true);

if(IS_DATA_CLEARED){
  //DATA IS CLEARED
}
else{
  //DATA IS NOT CLEARED
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-29T14:41:58.103

您可以做的是在清单文件的应用程序标记中使用以下属性。

```
android:manageSpaceActivity=".path.to.MyActivity" 
```

这会将设置中的“清除数据”按钮替换为“管理空间”。现在您可以将用户重定向到由您控制的自定义活动。

活动的启动将作为您的回调。在您的活动中处理您的数据并使用以下代码

```
private void clearPreferences() {
    try {
        // clearing app data
        Runtime runtime = Runtime.getRuntime();
        runtime.exec("pm clear YOUR_APP_PACKAGE_GOES HERE");

    } catch (Exception e) {
        e.printStackTrace();
    }
   } 
```

清除应用程序数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T11:42:47.677

> 当用户单击我的应用程序服务或广播接收器类中的清除数据按钮时，我必须捕获清除数据单击事件或操作（如果有），任何人都可以建议单击应用程序的清除数据时设备是否抛出任何操作所以我可以在我的应用广播接收器类中捕捉到该动作并执行所需的任务？？？

空无一人。AFAIK，按清除数据也会停止您的进程，因此您的代码将不会运行。您将用户按下清除数据视为与用户第一次安装您的应用程序的情况相同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-11T09:41:37.450

也许在您的清单中设置一个广播接收器并收听

“android.intent.action.PACKAGE_DATA_CLEARED”

从设置中清除应用程序数据时广播的意图。您应该能够在 android 开发者网站上找到有关此的更多信息。

[http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_DATA_CLEARED](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_DATA_CLEARED)

# c# - 数据库和代码之间的连接

> ID：10700154
> 
> 赞同：0
> 
> 时间：2012-05-22T10:23:57.827
> 
> 标签：c#, sql-server, asp.net-mvc

我有一个错误：

```
One or more validation errors were detected during model generation:

\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'DynamicMenu' has no key defined.    Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'ambt_Dynamic_Menu' is based on type 'DynamicMenu' that has no keys defined. 
```

在助手类中，代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Data.Models;
using Data;

namespace Ambermoda.Web
{
    public class MenuHelper
    {
        public static List<DynamicMenu> GetMenu()
        {
            DataContext db = new DataContext();
            List<DynamicMenu> list = db.ambt_Dynamic_Menu.ToList();

            return list;
        }
    }
} 
```

所以我不知道该如何解决。我检查了所有（在我看来）会产生这个错误的东西，但是有任何结果。

我有类似的帖子，但其中任何一个都不能解决我的问题。

如果有人有什么想法，请写出来:)

谢谢！

**更多代码**

动态菜单.cs

```
 [Table("abmt_Dynamic_Menu")]
    public class DynamicMenu
    {
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int dmn_id { get; set; }
        public string dmn_code { get; set; }
        public string dnm_parent_code { get; set; }
        public string dnm_title { get; set; }
        public string dnm_title_en { get; set; }
        public int dnm_order { get; set; }
    } 
```

数据上下文.cs

```
public class DataContext : DbContext
{
    public DataContext() { }

    public DbSet<DynamicMenu> ambt_Dynamic_Menu { get; set; }
} 
```

连接字符串：

```
<add name="DataContext" providerName="System.Data.SqlClient" connectionString="Data Source=Mikasasa-lap\Mikasasa;Database=Ambermoda;Integrated Security=True;Pooling=False;"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:37:18.077

根据您提供的源代码，您正在使用 Code First 方法。
CF 假定类应该具有按命名约定命名为“Id”的属性，并且该属性将被视为主键。

否则，您应该通过属性 [Key] 或使用 fluent API 手动声明主键（请参阅[EntityTypeConfiguration.HasKey](http://msdn.microsoft.com/en-us/library/gg671266%28v=vs.103%29.aspx)方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:38:21.010

您需要告知哪个字段是您的数据库主键。使用该属性`Key`来执行此操作：

```
[Table("abmt_Dynamic_Menu")]
public class DynamicMenu
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int dmn_id { get; set; }
    public string dmn_code { get; set; }
    public string dnm_parent_code { get; set; }
    public string dnm_title { get; set; }
    public string dnm_title_en { get; set; }
    public int dnm_order { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:32:24.227

检查 DyanmicMenu 表是否有主键

# javascript - 外部JavaScript文件使用的JavaScript内联变量？（可变范围问题）

> ID：10700156
> 
> 赞同：0
> 
> 时间：2012-05-22T10:24:15.213
> 
> 标签：javascript, jquery

我有以下代码：

```
<script type="text/javascript">
    var ops = {
        slideshow: {
            slices: 20,
            boxCols: 11,
            boxRows: 6,
            animSpeed: 750,
            pauseTime: 6000
        },
        tweets: {
            username: 'stigmahost',
            count: 6,
            refresh_interval: 120,
            auto_join_text_default: 'I said,',
            auto_join_text_ed: "I",
            auto_join_text_ing: "I am",
            auto_join_text_reply: "I replied to",
            auto_join_text_url: "I was looking at",
            just_now: 'Now',
            X_seconds_ago: '{x} seconds ago',
            about_a_minute_ago: 'About a minute ago',
            about_X_minutes_ago: 'About {x} minutes ago',
            about_an_hour_ago: 'About an hour ago',
            about_X_hours_ago: 'About {x} hours ago',
            about_a_day_ago: 'About a day ago',
            about_X_days_ago: 'About {x} ημέρες ago'
        },
        map:
        {
            latitude: 37.966667,
            longitude: 23.716667,
            zoom: 8
        }
    }
</script> 
```

在该代码之后，我**立即**有了该代码：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=MyKey&sensor=true"> </script>
<script type="text/javascript" src="js/js.js"></script>
<script type="text/javascript" src="js/jquery.tweet.js"></script> 
```

然后从**js.js**文件中，我尝试使用**ops**变量，但没有任何运气。你知道为什么我不能在**js.js中使用变量****ops**吗？

 **在 js 文件中，我使用该代码来确定 ops 变量的类型：

```
console.dir(ops); 
```

在我的控制台中，我得到了**未定义**的结果。

我做错什么了吗？

* * *

我取得了一些进展。js.js 文件是这样的：

```
jQuery(document).ready(
    function()
    {
        console.dir(typeof ops);
        ...
        File code here
        ...
    }
); 
```

上面的代码在我的控制台中返回“未定义”

现在我尝试了：

```
console.dir(typeof ops);

jQuery(document).ready(
    function()
    {
        console.dir(typeof ops);
        ...
        File code here
        ...
    }
); 
```

并在我的控制台中返回第一次尝试的“对象”和第二种类型的“未定义”。

那能帮上忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:13:35.970

```
$.getScript("js.js", function() {
    //declare ops-variable in here and use it
}); 
```

* * *

没有jQuery：

```
var Loader = function () {

}
Loader.prototype = {
require: function (scripts, callback) {
    this.loadCount      = 0;
    this.totalRequired  = scripts.length;
    this.callback       = callback;

    for (var i = 0; i < scripts.length; i++) {
        this.writeScript(scripts[i]);
    }
},
loaded: function (evt) {
    this.loadCount++;

    if (this.loadCount == this.totalRequired && typeof this.callback == 'function') this.callback.call();
},
writeScript: function (src) {
    var self = this;
    var s = document.createElement('script');
    s.type = "text/javascript";
    s.async = true;
    s.src = src;
    s.addEventListener('load', function (e) { self.loaded(e); }, false);
    var head = document.getElementsByTagName('head')[0];
    head.appendChild(s);
}
}

 var l = new Loader();
l.require([
"js.js"
function() {
    // do same stuff in this callback
}); 
```**

# google-apps-script - 如何与“管理库”共享我的代码？

> ID：10700158
> 
> 赞同：0
> 
> 时间：2012-05-22T10:24:17.783
> 
> 标签：google-apps-script

我只是看到新的“管理库”来分享我们的代码。我知道如何共享库以及如何在另一个脚本中包含特定版本，但我不知道如何从库中调用函数。

在我的图书馆里，我有简单的功能

```
function test() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  ss.toast("this is a test");
} 
```

我打开另一个电子表格并包含我的库的特定版本，我只是写

```
function onOpen() {
  test();
} 
```

可惜没有运行...

你能帮助我吗 ？

**更新**： [https ://developers.google.com/apps-script/guide_libraries](https://developers.google.com/apps-script/guide_libraries)
[https://developers.google.com/apps-script/guide_versions](https://developers.google.com/apps-script/guide_versions)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:31:08.913

您可以在此处找到库和版本的文档：

[https://developers.google.com/apps-script/guide_libraries](https://developers.google.com/apps-script/guide_libraries)

[https://developers.google.com/apps-script/guide_versions](https://developers.google.com/apps-script/guide_versions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:18:35.640

1）在您的“图书馆项目”中，您应该保存为一个版本（文件>管理版本）

2）在您的“实时项目”中，您应该添加此库（资源 > 管理库）。然后添加projectID hash，重要的是Identifier。（例如**图书馆**）。这是类，如何在代码中调用方法

> mylibrary.test();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T22:15:03.340

这是关于如何共享和使用谷歌应用程序脚本库的分步屏幕截图说明。 [http://ramblings.mcpher.com/Home/excelquirks/gooscript/lib](http://ramblings.mcpher.com/Home/excelquirks/gooscript/lib)

布鲁斯

# php - 如何将 PHP 中方法的结果作为变量/数组传递到 Twig 并在 html 中显示？

> ID：10700159
> 
> 赞同：1
> 
> 时间：2012-05-22T10:24:18.427
> 
> 标签：php, model-view-controller, twig

我在 github 上有这个项目的 repo：[https ://github.com/villimagg/php-mvc-twig](https://github.com/villimagg/php-mvc-twig)

我很难找出如何通过 MVC 模式中的方法传递结果以使用 Twig 模板引擎在 html 中显示。

我在 github 上获得的这个项目只是我用来学习事物如何工作的简单的基本 mvc 框架，并且我想包含 Twig 模板引擎。到目前为止，我只使用 php 并将结果传递到视图中没有任何问题，到目前为止，我已经设法让 Twig 使用 css 和所有内容显示模板。但是当我需要从方法 f.ex 中检索一些动态数据时。并使用 Twig 显示它，我不知道它是如何完成的。

有人愿意帮助我吗？我想更多像我这样的新手也想知道类似的事情。请在 github 上下载该项目，或 fork 它，并与我们分享您的想法。

我想对开源社区表示感谢，感谢我迄今为止所学到的一切，这基本上是我在编程中所知道的一切。谢谢你一千次。

亲切的问候，维利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:22:19.930

只需将数组中的变量作为第二个`render`参数传递。

```
$this->view->render('error/error', array(
  'string' => $string,
  'array'  => $array
)); 
```

并显示它：

```
{{ string }}

{% for element in array %}
  element
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:18:28.687

我实际上正在学习 MVC 框架，而且我刚开始使用 Twig，所以我正在寻找关于如何将它们结合起来的教程或文章。事实证明，如果您在 Google 上搜索“PHP MVC Twig”，您会在 Github 和 StackOverflow 上获得第一个结果

本教程可能会帮助您或至少将您推向正确的方向。

[http://php-html.net/tutorials/model-view-controller-in-php/](http://php-html.net/tutorials/model-view-controller-in-php/)

# java - 从部署在 Tomcat 中的 Web 项目调用另一个 Java 项目的方法

> ID：10700166
> 
> 赞同：2
> 
> 时间：2012-05-22T10:24:49.160
> 
> 标签：java, tomcat

我有一个在 Tomcat7 上运行的 Web 项目。当用户上传 pdf 文件时，我想将其传递给另一个 Java 项目，该项目可以通过命令行调用（不是我编写的，而是 Apache 编写的）。

由于 Web 项目本身非常庞大，我不想在 Web 项目中包含其他 Java 项目。从逻辑上讲，将项目分开也是有意义的。

这就是流程的工作方式 - 用户上传 pdf 文件。这将传递给 Web 项目业务层。. 从“其他”项目中获取 pdf 的详细信息后，我想通过 Web Projects DAO 层将其保存在数据库中。

你能建议调用另一个项目的方法的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:36:48.467

您可以编写一个 shell 脚本并从您的 web 项目中调用它来调用另一个项目

```
Runtime.getRuntime().exec("script.sh"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:33:47.033

您可以为此命令行工具创建一个包装器并将其作为服务托管。您的 web 组件将更容易处理服务。此外，所有异常情况都可以由服务处理，从而使您的 webproject 更容易

# tridion - 如何知道 Tridion 2011 sp1 的 Anguilla Project 中的特定方法需要使用哪个对象？

> ID：10700176
> 
> 赞同：3
> 
> 时间：2012-05-22T10:25:39.080
> 
> 标签：tridion, tridion-2011

在实现 GUI 扩展的过程中，我需要一些命令示例：要知道当前关注的字段，JavaScript 文件中的当前字段值。对于安圭拉项目文档中的那些，我们可以找到一些方法，但是用于调用这些方法的适当对象是什么？如何了解他们？如何跟踪 JavaScript 文件中的“focusmove”事件？请帮我。提前致谢。早期反应表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:56:15.820

我认为目前唯一*真正的*方法是不幸地要求它。

如果你在这里问一些真正的问题，你可能会得到真正的答案。像这样的模糊问题会得到像这样的模糊答案。

如果您尝试获取字段的当前值，您可能需要检查[此问题](https://stackoverflow.com/questions/10463406/get-a-fields-current-value-in-component-editor-tridion-2011-sp1)。有关安圭拉的其他更具体的问题，请发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:51:41.910

一些控制被记录在案。API 文档与 CME 安装程序一起分发。我相信，安装程序中有特殊的选项。

# asp.net - ASP.NET 无法在 64 位 Windows server 2008 R2 上创建 ActiveX 组件

> ID：10700178
> 
> 赞同：0
> 
> 时间：2012-05-22T10:25:45.330
> 
> 标签：asp.net, vba, iis-7.5, activexobject, windows-server-2008-x64

我有一个网站，用户在其中上传 xslm (excel) 文件，然后在服务器上的这些文件中运行一个宏。我无法完成这项工作；当我在 IIS 7.5 (Win Server 2008 R2) 上部署它时，会生成一个异常

System.Exception：无法创建 ActiveX 组件

我检查了Windows日志，它说：

机器默认权限设置不授予 CLSID {00024500-0000-0000-C000-000000000046} 和 APPID 对用户 IIS APPPOOL\DefaultAppPool SID (S-1-5-82-) 不可用的 COM 服务器应用程序的本地激活权限3006700770-424185619-1745488364-794895919-4004696415）来自地址 LocalHost（使用 LRPC）。可以使用组件服务管理工具修改此安全权限。

[我检查了ASP.NET Cannot create ActiveX component](https://stackoverflow.com/questions/1847444/asp-net-cannot-create-activex-component)上列出的步骤，但是它对我没有用，因为层次结构中没有组件（Microsoft Excel 应用程序）：

组件服务 -> 计算机 -> 我的电脑 -> DCOM 配置 -> Microsoft Excel 应用程序

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:30:24.210

开始运行 mmc -32 文件添加删除管理单元组件服务添加确定控制台根组件服务计算机我的电脑 DCOM 配置 Microsoft Excel 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:48:54.677

1.  您需要从 DCOM 向 Excel 授予权限
2.  检查您计算机上的 Office 版本（如 32 位和 64 位）。
3.  在带有 32 位 Office 的 64 位系统上，试试这个：开始 -> 运行 -> mmc -32 文件 -> 添加/删除管理单元

组件服务 -> 添加。然后按“确定”

控制台根目录>组件服务>计算机>我的电脑>DCOM 配置>Microsoft Excel 应用程序（存在！）...授予权限并尝试...

希望这可以帮助。

# c# - 如何从 MAC 或 IP 地址获取设备类型？

> ID：10700179
> 
> 赞同：3
> 
> 时间：2012-05-22T10:25:55.197
> 
> 标签：c#, ip-address, device, mac-address, hostname

我正在用 C# 制作一个设备发现窗口应用程序。如果我有 MAC 地址或 IP 地址，这是否可以知道设备类型？

设备类型是指计算机或路由器或移动设备或任何其他设备？

注意：主机名条目对它没有用，因为主机名是由用户定义的。例如，我可以将“诺基亚 N70”名称分配给我的计算机。

感谢期待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:28:41.577

您可以从 MAC 地址获取制造商。为了获得更多信息，您需要进行端口扫描以获取相关设备的“指纹”。

[NMAP](http://nmap.org/)等应用程序使用这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:29:08.067

非欺骗性 MAC 地址在开始时确实包含制造商字符串，但我不知道有任何公开可用的数据库保存它们。之后也没有设备映射。

当您添加使用需要自己的 MAC 地址的虚拟机时，问题就更加复杂了。

IP 地址，不，它们是由网络管理员根据需要分配的，通​​常几乎是随机的。

所以简而言之，没有。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T10:28:40.230

IP 地址：否。Internet 协议地址无法帮助您确定正在使用的设备

至于MAC地址：见[这个](http://www.coffer.com/mac_find/)网站。

基本上，每个供应商都“拥有”一系列 MAC 地址，这个特定的网站可以为您提供每个供应商使用的范围。漂亮整齐。

# python - 在 mod_wsgi 下运行应用程序时记住的 web.py 会话注释

> ID：10700186
> 
> 赞同：1
> 
> 时间：2012-05-22T10:26:39.620
> 
> 标签：python, session, wsgi, web.py

出于某种原因，web.py 似乎无法记住我的会话。它适用于内置的网络服务器，但是当我将我的应用程序与 WSGI 一起使用时，不会记住会话。

我检查了磁盘存储会话文件夹，并且正在创建文件。似乎它不“记住”这些会话。

我的代码中有这个：

```
app = web.application(urls, globals(), autoreload=False)
application = app.wsgifunc()
curdir = os.path.dirname(__file__)
session = web.session.Session(
    app, web.session.DiskStore(os.path.join(curdir, 'sessions')), 
    { 'name': None, 'uid': 0, 'logged_in': False, 
      'username': None, 'password': None}) 
```

当我执行这部分登录时，它会很好地重定向到`/account`内置网络服务器（我的 post 方法检查登录，然后将 logged_in 设置为`True`），但在 wsgi 中它只是再次返回登录屏幕：

```
def GET(self):
    if session.logged_in != True:
        return self.getLoginScreen()
    else:
        raise web.seeother('/account') 
```

在 Ubuntu 12.04 上使用 Apache2 运行 WSGI。我的 apache2 错误日志是空的。

# android - 如何检测 ListView onItemClick 发生了什么？

> ID：10700188
> 
> 赞同：1
> 
> 时间：2012-05-22T10:26:50.743
> 
> 标签：android, listview

在`Activity`我有两个`ListViews`但现在我必须检测`ListView`用户点击了什么。我已经`adapters`为`setOnItemClickListener(this);`每个`ListView`.

```
@Override
public void onItemClick(AdapterView<?> a, View v, int i, long l) {
    switch (v.getId()) {
        case R.id.list_1:
            Toast.makeText(this, "111111111", 0).show();
            break;
        case R.id.list_2:
            Toast.makeText(this, "222222222", 0).show();
            break;
    }
} 
```

但`v.getId()`返回 -1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:29:09.373

使用`a.getId()`而不是`v.getId()`

我的意思是使用`AdapterView<?> a`

```
switch (a.getId()) {
        case R.id.list_1:
            Toast.makeText(this, "111111111", 0).show();
            break;
        case R.id.list_2:
            Toast.makeText(this, "222222222", 0).show();
            break;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:29:20.750

在 onCreate() 中，获取对列表视图的引用：

```
listview1 = findViewById(R.id.list_1);
listview2 = findViewById(R.id.list_2); 
```

然后，`onItemClicked()`您可以像这样进行测试：

```
 if (a == listview1){
       //something
    }
 else if(a==listview2){
      //something
    } 
```

# sass - sass 监视文件夹中的文件并缩小，但控制输出文件名

> ID：10700190
> 
> 赞同：3
> 
> 时间：2012-05-22T10:26:52.443
> 
> 标签：sass

我知道我可以观看文件夹中的单个文件并将其压缩如下：

```
sass --watch HealthyArticles.scss:HealthyArticles.min.css --style compressed 
```

我想做的是：

```
sass --watch *.scss:*.min.css --style compressed 
```

问题是我得到了错误：

```
Errno::EINVAL: Invalid argument - *.scss 
```

要点是控制输出文件名。这可能与 sass 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:39:10.187

我想你可能正在寻找指南针。所有这些东西都被嵌入到 Rails 中，所以我不确定所有东西是如何链接在一起的，但我相信如果你使用的是没有框架的 SCSS，那么 Compass 就是你所追求的。

从[http://compass-style.org/](http://compass-style.org/)下载并运行如下内容：

```
gem install compass 
$ compass create asd --bare --sass-dir "input_directory" --css-dir "output_directory" 
```

您可以在配置文件中进行设置：

```
output_style = :compressed 
```

或者，您可以只运行一个执行类似操作的脚本（这是 Ruby）：

```
files = Dir["/path/to/scss/folder/*.scss"].map do |file|
  "#{file}:#{file.gsub(".scss", ".min.css")}"
end
`sass --watch #{files} --style compressed` 
```

# c - fork() 打印两次之前的语句

> ID：10700192
> 
> 赞同：6
> 
> 时间：2012-05-22T10:27:03.573
> 
> 标签：c, fork, stdout, buffering, io-redirection

我正在尝试`fork()`重新定向以检查在父级中完成的重新定向是否也适用于子级。我写了以下简单的程序

```
#include<stdio.h>
#include<unistd.h>
#include<stdlib.h>

int main ()
{
    freopen( "error.txt", "w+t", stdout ); // From now on, stdout = error.txt
    printf (" ERROR!  WHY DONT U UNDERSTAND?\n");
    if ( fork() == 0 ) 
    {   
        printf(" I AM CHILD\n");
        exit(0);
    }   
    else-
    {   
        printf (" EITHER I AM A PARENT OR SOMETHING GOT SCREWED\n");
    }   

    return 0;
} 
```

`error.txt`我得到的输出（ ）是

```
ERROR!  WHY DONT U UNDERSTAND?
EITHER I AM A PARENT OR SOMETHING GOT SCREWED
ERROR!  WHY DONT U UNDERSTAND?
I AM CHILD 
```

令人惊讶的是，`ERROR! WHY DONT U UNDERSTAND?`打印***两次***，即使它在`fork()`调用之前出现很多并且应该只由父打印一次。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T10:31:03.207

由于在`reopen`流是非交互式之后，它是完全缓冲的并且不会在`'\n'`. 在`fork`调用之前，缓冲区仍然包含消息，而在`fork`此缓冲消息被复制之后（因为两个进程都有自己的副本`stdout`），然后由父进程和子进程刷新。请参阅 C 标准的第 7.19.3 部分。

`fflush`您可以通过调用before来避免这种行为`fork`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T10:29:43.293

这是因为缓冲。做一个`fflush`正确的之后`printf`。

这两个进程最终都得到了`stdio`'s 内部内容的相同副本，并且都继续在`exit`. 如果你打电话`_exit`给孩子，你也可以防止它发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T10:31:03.433

刷新缓冲区将解决问题。在 print 语句之后使用 fflush 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:33:48.563

似乎`ERROR! WHY DONT U UNDERSTAND`在分叉后仍然缓冲并被两个进程写入。

如果你添加

```
fflush(stdout); 
```

在您第一次`printf()`刷新内部缓冲区之后，它只在您的文件中出现一次。

# php - 消息队列实现

> ID：10700193
> 
> 赞同：2
> 
> 时间：2012-05-22T10:27:14.020
> 
> 标签：php, message-queue, rabbitmq

我正在寻找在发送日志时无需让生产者连接到任何服务器的最快方法来记录消息。最好的情况是将消息记录到非常快速的本地（内存，本地消息队列）然后退出。然后一个单独的进程将其出列并将其发送给实际的消费者（可能具有持久连接）。这有助于通过防止额外的连接来降低生产者进程（例如 Web 服务器句柄）的处理速度。

使用 PHP 的 RabitMQ 会引起我的兴趣吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:13:04.457

Logstash ( [http://www.logstash.net/](http://www.logstash.net/) ) 在您选择的本地日志文件上设置侦听器，然后通过 AMQP（RabbitMQ，我上次在 2012 年检查）将它们作为消息发送到您选择的中央日志存储/数据库（比如说，一个 mongoDB 实例）。

您可以自定义 Logstash 侦听器，以便在将日志文件发送到队列代理之前，仅从日志文件中过滤掉某些有趣的日志消息类型/代码。

之后，您可以将 Graylog2 ( [http://graylog2.org/](http://graylog2.org/) ) 设置为一个有用的界面，用于读取、排序和过滤源自所有服务器的日志，按时间顺序组织在一个视图中（假设您的服务器时间足够同步）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:08:14.717

正如@robthewolf 在他的评论中指出的那样，连接到消息队列是一个额外的连接，无论是否在本地。另外，我不确定您所说的“处理”到底是什么意思（格式化消息？显示日志？）。

根据您的描述，我认为您应该研究[Graylog](http://graylog2.org/about)。您可以将Monolog与[Gelf](https://github.com/Seldaek/monolog) [-PHP](https://github.com/mlehner/gelf-php)一起使用，通过 AMQP 将您的日志消息发送到您的 Graylog-Server。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:12:22.553

你提出的解决方案会奏效。但是消息很有可能会在内存队列中堆积，因为实际连接到消息服务器的生产者可能无法将消息发送到消息服务器，因为日志将以更快的速度放入内存队列。

# facebook - FB.login 中的自动登录

> ID：10700201
> 
> 赞同：0
> 
> 时间：2012-05-22T10:27:49.527
> 
> 标签：facebook, facebook-javascript-sdk

我需要知道 facebook 的 javascript SDK 中的函数 FB.login 是否可以在不提示对话框的情况下进行自动登录。我认为我需要一些许可，但任何人都在为我工作。如果有人知道我会apreciatte它。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:07:55.137

您的意思是，如果您网站的用户拥有 FB 帐户并且已经登录，那么您不想向他显示登录对话框，对吗？然后看看这里：[https ://developers.facebook.com/docs/authentication/client-side/](https://developers.facebook.com/docs/authentication/client-side/)

> 下面的示例实现了以下功能：
> 
> ...
> 
> **2 - init 是带有status: true**的 SDK，以启用在初始化时检查用户的身份验证状态

这意味着如果用户已经登录，那么

> FB.Event.subscribe('auth.statusChange', function(response)

将在显示登录对话框之前调用。

# html - html ul li - 选项卡

> ID：10700202
> 
> 赞同：6
> 
> 时间：2012-05-22T10:27:49.987
> 
> 标签：html, css, tabs, html-lists

我在这里为一些我认为可能如此简单的事情挠头。

我有一个使用 ul/li 元素创建的选项卡。

假设我有以下内容：

*   选项卡1
*   选项卡2
*   Tab3
*   Tab4

选项卡水平显示，如下所示：

选项卡 1 选项卡 2 选项卡 3

Tab4

有一个固定的宽度，所以它水平溢出。

我想要的是标签数量最少的行位于顶部，如下所示：

Tab4

选项卡 1 选项卡 2 选项卡 3

我怎样才能做到这一点？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:10:54.573

非常感谢所有回复的家伙。但也许我的问题并不清楚。另外我是stack-overflow.com的新手，所以请放轻松:)

无论如何，我昨晚为解决这个问题所做的是使用 jQuery，删除当前选项卡并重新创建它们 - 但这次为每个 ul/行添加固定数量的列表项/选项卡。如果每个选项卡的数量超过固定数量，则为它们创建一个新的 ul 元素。每个 UL 元素都会像一个新行

这是我的 javascript/jQuery

```
// contains tab headers and contents
var tabsContainer = $('.tabs');
// this is a UL element containing the tab headers
var currentUlElement = $('.tabNavigation');
// this are the LI elemets which are the actual tabs
var currentLiElements = currentUlElement.children('li');

// we can only have 6 tabs plus the '+' tab (total 7) in a row.
// if there's mroe than that we need to sort the overflow
if (currentLiElements.length > 7) {

    // remove all current tab headers
    currentUlElement.remove();

    // create new tab headers container
    var newUlElementRow = $('<ul />');
    // make the list items appear like tabs
    newUlElementRow.addClass('tabNavigation');
    // add the new tabs header container to the front of the main tab/content container control
    tabsContainer.prepend(newUlElementRow);

    for (var index = 0; index < currentLiElements.length; index++) {

        // if one row of tabs is complete
        if (index == 6) {
            // create a new tab headers container
            newUlElementRow = $('<ul />');
            // make the list items appear like tabs
            newUlElementRow.addClass('tabNavigation');
            // add the new tabs header container to the front of the main tab/content container control
            tabsContainer.prepend(newUlElementRow);
        }

        // add the tab/list item to the new tab headers container
        newUlElementRow.append(currentLiElements.get(index));
    }

    // re-enable the tab click actions
    trackNetPeople.SetupTabs();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:12:26.233

乍一看可能听起来有点混乱。但也不是太难。

CSS：

```
ul {position:relative;}
ul li {padding:3px 10px;height:20px}
ul li:last-child{position:absolute}
ul li:not(:last-child) {float:left;color:green;margin-top:20px; /*height of li*/}
​ 
```

现场演示：

[http://jsfiddle.net/f6GEp/](http://jsfiddle.net/f6GEp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:56:47.287

我不知道你想用什么类型的语言来完成这个，但这里是`jQuery`解决方案：

**现场示例：http:** [//jsfiddle.net/gzZ6C/1/](http://jsfiddle.net/gzZ6C/1/)

**jQuery**

```
$(function(){
    $('ul').prepend($('ul').find('li:last'));
    $('ul').find('li:not(:first)').css('float','left');
}); 
```

更新：添加了浮动样式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:35:10.450

我认为你不能，因为你没有使用任何“行”。它只是被推送到下一行的文本。

如果您的选项卡来自数据库，您可以使用 PHP 处理它们，使用数组对它们进行排序，但是您仍然需要另一种方式来显示它们。桌子可能是一个不错的选择（无论如何在这种情况下）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T10:49:43.473

你可以这样写：

**HTML**

```
<ul>
    <li>test4</li>
    <li>test1</li>
    <li>test2</li>       
    <li>test3</li>
</ul> 
```

**CSS**

```
li + li{
    float:left;
} 
```

检查这个[http://jsfiddle.net/mxgNT/](http://jsfiddle.net/mxgNT/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-04T13:26:28.500

如果不查看您的标签 css 样式，则很难分辨。但是考虑使用一些框架的选项卡式界面，如引导选项卡、基础选项卡或 jQuery ui 选项卡。如果您需要高级响应式选项卡式解决方案，请查看 zozo tabs，其中有很多示例。

[http://zozoui.c​​om/tabs](http://zozoui.com/tabs)

干杯

法里设计

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T10:46:59.140

我一定没有清楚地理解您的问题，但您似乎试图将最后一个 tab li 元素与其他 li 元素分开：

这可以使用以下方法完成：

```
.tabs ul li:last-child {
  display: block;
} 
```

并将最后一个 li 设为第一个，使用 jQuery 作为：

```
$(function(){

   $('.tabs ul').prepend($('.tabs ul').find('li:last'));

}); 
```

# relational-database - 创建一些用于将数据从一个数据库转换到另一个数据库的工具

> ID：10700206
> 
> 赞同：0
> 
> 时间：2012-05-22T10:28:10.810
> 
> 标签：relational-database, data-migration, database-migration

这可能是一种实施问题。我想知道我是否可以在哪里制作一个工具来将一些关系数据库转换为其他类型的数据库。方法是什么？

例如，如果我想将数据和结构从 mysql 数据库转换为 mssql。我需要使用正则表达式来解析 SQL 文件吗？或者我可以先将其转换为 XML 或 JSON，然后从该结构解析到我的目标数据库？

使用现有工具将 mysql 转换为 mssql 或任何类似工具不在此范围内。因为我想知道它实际上是如何完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:58:14.370

嗯，这是一个广泛的问题，但一般来说，拥有自己的结构和数据的抽象表示会是一件好事，因为您可以通过编写导入器和导出器“轻松”扩展您的系统，并且实际上将您的代码解耦一点通过将关系数据库概念抽象为您自己的格式。

进口商将“逆向工程”给定的数据库，通过将其转换为您自己的表示形式（如您所说，xml/json 甚至您自己的查询语言——我猜这会更好）。然后，导出器只需将您的格式转换为请求的 SQL 方言。没有正则表达式，没有其他“硬编码”的东西。

这将允许您扩展您的系统并支持更多数量的源和目标，并且还可以处理所选“目标”不支持的“源”中的某些 SQL 功能等错误。

我的 2 美分，希望对您有所帮助！

# php - div宽度输出刷新中的JQuery表单

> ID：10700209
> 
> 赞同：0
> 
> 时间：2012-05-22T10:28:22.733
> 
> 标签：php, jquery, html

我有一些代码： 在 index.html 文件中，我有一个 div

```
<div id="logindiv">
    <?php require_once('login.php'); ?>
</div> 
```

与 jquery 一起使用

```
<script type="text/javascript">
  $(document).ready(function() {
    $.post('login.php', $('#login').serialize(), function (
      data, textStatus) {
        $('#login').html(data);
    });
    return false;
});
</script> 
```

我想将登录表单放入 div 中，以便登录在 div 内工作而无需刷新页面。此外，重定向到其他文件（如 you-are-logged-In.php）会自动显示在 div id=login 中。

而 login.php 是

```
<?PHP
    require_once("./include/membersite_config.php");
    if(isset($_POST['submitted'])) {
        if($fgmembersite->Login()) {
            $fgmembersite->RedirectToURL("login-home.php");
        }
    }
?>
<div id='fg_membersite'>
    <form id='login' accept-charset='UTF-8'>
        <fieldset>
            <legend>Login</legend>
            <input type='hidden' name='submitted' id='submitted' value='1'/>
            <div class='short_explanation'>* required fields</div>
            <div>
                <span class='error'>
                    <?php echo $fgmembersite->GetErrorMessage(); ?>
                </span>
            </div>
            <div class='container'>
                <label for='username' >UserName*:</label><br/>
                <input type='text' name='username' id='username' value='<?php echo $fgmembersite->SafeDisplay('username') ?>' maxlength="50" /><br/>
                <span id='login_username_errorloc' class='error'></span>
            </div>
            <div class='container'>
                <label for='password' >Password*:</label><br/>
                <input type='password' name='password' id='password' maxlength="50" /><br/>
                <span id='login_password_errorloc' class='error'></span>
            </div>
            <div class='container'>
                <input type='submit' name='Submit' value='Submit' onClick='loadLoginDiv();' />
            </div>
            <div class='short_explanation'>
                <a href='reset-pwd-req.php'>Forgot Password?</a>
            </div>
        </fieldset>
    </form>
    <!-- client-side Form Validations:
    Uses the excellent form validation 
    script from JavaScript-coder.com-->
    <script type='text/javascript'>
    // <![CDATA[
        var frmvalidator  = new Validator("login");
        frmvalidator.EnableOnPageErrorDisplay();
        frmvalidator.EnableMsgsTogether();
        frmvalidator.addValidation("username","req","Please provide your username");
        frmvalidator.addValidation("password","req","Please provide the password");
    // ]]>
    </script>
</div> 
```

如何在不刷新页面的情况下使用表单？它提交一次而不是多次而不刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:04:30.677

页面加载时您正在执行 Ajax 请求，这是不正确的。您必须通过 Ajax 请求替换通常的提交。

```
<script type="text/javascript">
  $(document).ready(function() {
    $('#login').live('submit', function() {
        $.post('login.php', $(this).serialize(), function (
          data, textStatus) {
            $('#login_wrapper').html(data);
        });
        return false;
    });
   });
</script> 
```

# objective-c - ios5 反向认证 twitter 空响应

> ID：10700210
> 
> 赞同：1
> 
> 时间：2012-05-22T10:28:23.947
> 
> 标签：objective-c, ios5, twitter, xauth

我刚刚收到一封来自 twitter 的电子邮件，说我的密钥现已启用反向身份验证，所以我 git 克隆了以下项目：[https ://github.com/seancook/TWiOS5ReverseAuthExample](https://github.com/seancook/TWiOS5ReverseAuthExample)

并在那里交换了钥匙。我尝试运行演示，它似乎工作，我没有收到任何错误，但我从 twitter 得到的响应是一个空的 json。我不知道出了什么问题，因为空的 json 没有任何意义。

有人对此有任何运气吗？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:56:36.843

在正常身份验证中，您输入密码，网站会验证您是正确的用户。在反向身份验证中，网站会为您提供密码或密码短语，然后您验证您在正确的网站上。

当您设置反向身份验证密码短语时，twitter.com 将在您输入用户名和密码后但在您输入加密密钥之前显示此密码短语，每次登录时。这验证您已访问真实的 twitter.com 网站。如果您以某种方式被误导到另一个与 twitter.com 相似的网站，则该冒充网站将无法为您提供由您设置的正确的反向身份验证密码短语。这可以保护您、您的加密密钥和密码。

反向验证密码短语可以是您想要的任何内容；一个词，一个短语，一个积极的信息，或者一些愚蠢的东西。

例子：

我爱我的狗邋遢，八六七五三哦九，蓝猴矿井，或任何你想要的东西

如何使用反向认证点击[这里](https://dev.twitter.com/docs/ios/using-reverse-auth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:55:43.743

这听起来可能很愚蠢，但请检查您是否没有使用您的 CONSUMER_SECRET 反转您的 CONSUMER_KEY。我没有仔细观察就这样做了，也无法弄清楚出了什么问题，但它与您得到的响应相同。一旦我注意到它一切正常。

# php - Magento 覆盖控制器初始化方法

> ID：10700217
> 
> 赞同：1
> 
> 时间：2012-05-22T10:28:42.620
> 
> 标签：php, magento, magento-1.6

我试图用[这些指令](http://prattski.com/2010/06/24/magento-overriding-core-files-blocks-models-resources-controllers/)覆盖 Controller ，但它们只适用于 Action 方法，而不适用于其他任何方法。是否可以覆盖 Controller _init() 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:00:58.110

确保您正在扩展正确的文件。这种方法确实有效。使用 CustomerController 进行测试。将重新发布我的代码：

配置.xml：

```
<admin>
    <routers>
        <module>
            <use>admin</use>
            <args>
                <module>Company_Module</module>
                <frontName>module</frontName>
            </args>
        </module>
        <adminhtml>
            <args>
                <modules>
                    <module before="Mage_Adminhtml">Company_Module</module>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

公司/模块/控制器/CustomerController.php：

```
<?php
include_once("Mage/Adminhtml/controllers/CustomerController.php");
class Company_Module_CustomerController extends Mage_Adminhtml_CustomerController
{
    protected function _initCustomer($idFieldname = 'id')
    {
        Mage::log('overridden');
        parent::_initCustomer($idFieldname);
    } 
} 
```

请注意包含，请注意它扩展了控制器`Mage_Adminhtml_CustomerController` **NOT** `Mage_Adminhtml_Controller_Action`，并且请注意该`_initCustomer()`功能受到保护，这可能是阻碍您的原因。

# hibernate - 可嵌入属性更改列的默认大小

> ID：10700221
> 
> 赞同：1
> 
> 时间：2012-05-22T10:28:58.877
> 
> 标签：hibernate, jpa

我想使用 JPA 和 Hibernate 创建一个映射类。对于它的大多数属性，该类使用多语言属性。例如，它希望在语言 LanA 和 Language LanB 中都有 name 属性。

```
@Embeddable
public class MultiLingualTO {
@Basic
@Column(updatable = true, length = 50, nullable = false, name = "aStr")
public String getLanAString() {
    return lanAString;
}

public void setLanAString(String lanAString) {
    this.lanAString= lanAString;
}

@Basic
@Column(updatable = true, length = 50, nullable = false, name = "lStr")
public String getLatinString() {
    return latinStringh;
}

public void setLatinString(String latinStringh) {
    this.latinStringh = latinStringh;
}

private String lanAString;
private String latinStringh;

} 
```

但是这些字符串的长度是不同的。默认值为 50，但有时我想设置该值，例如 250 或 900。

有没有办法这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:13:50.580

假设您想根据嵌入组件的人员来更改长度，那么可以。您的消费者可以为列`@Embeddable`定义一个。`@AttributeOverride`像这样的东西：

```
 @Embedded
    @AttributeOverrides( {
        @AttributeOverride(name="aStr", column = @Column(length=250) ),
        @AttributeOverride(name="lStr", column = @Column(length=900) )
    } )
    private MultiLingualTO multiLingualTO; 
```

[请参阅 Hibernate Annotations 文档http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e714](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e714)中的“2.2.2.4\. Embedded objects (aka components)”

`length`是一个整数。

# winforms - C++/CLI Windows Forms ToolStrip 应用程序失败并出现错误 CLR20r3，隐私问题？

> ID：10700222
> 
> 赞同：0
> 
> 时间：2012-05-22T10:28:59.920
> 
> 标签：winforms, c++-cli, clr, toolstrip

我在使用 Windows 窗体和 C++/CLI 进行开发时遇到了这个问题。

只要我不在 ToolStrip 中插入按钮（标签和其他都可以），我的应用程序就可以工作。我认为这与工具条按钮对图像的要求有关。我什至尝试了标准按钮集，但应用程序以完全相同的方式失败。

应用程序编译，但在开始呈现此错误消息时失败：

```
 Description:
      Stopped working

    Problem signature:
      Problem Event Name:   CLR20r3
      Problem Signature 01: milionar.exe
      Problem Signature 02: 0.0.0.0
      Problem Signature 03: 4fbb6849
      Problem Signature 04: mscorlib
      Problem Signature 05: 2.0.0.0
      Problem Signature 06: 4a275af7
      Problem Signature 07: 2b5d
      Problem Signature 08: 333
      Problem Signature 09: MXYABJ2RSFG4UKNKGMSPJ2KFPMZXHCC5
      OS Version:   6.1.7600.2.0.0.256.48
      Locale ID:    1033

      Read our privacy statement online:
      http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

    If the online privacy statement is not available, please read our privacy statement offline:
      C:\Windows\system32\en-US\erofflps.txt

          Read our privacy statement online:
          http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

          If the online privacy statement is not available, please read our privacy statement offline:
          C:\Windows\system32\en-US\erofflps.txt 
```

我在 Windows 7 64 位上使用 Visual Studio 2008。

# auto-generate - 通过 GUI 工具而不是手动 bean 定义/XML 配置来生成 Activiti BPMN

> ID：10700224
> 
> 赞同：1
> 
> 时间：2012-05-22T10:29:00.860
> 
> 标签：auto-generate, bpmn, activiti

我们正在为 Activiti 流程寻找基于 GUI 的开发工具，以减少与 XML 配置和 Java 支持相关的正式开发任务。理想情况下，我们希望以 GUI 驱动的任何更改（配置和功能）结束，以减少必要的支持技能。这让我相信我们正在追求类似 Oracle SOA Suite/Jdeveloper 或 Mule 中使用的功能，由此我们可以通过 GUI 创建后端逻辑，而无需进行任何重新开发或代码更改 - 配置将是通过使用向导等的设计器在高级别的上完成。

我们已经查看了 Activiti Eclipse 插件属性，并将现有的 BPMN 图文件分解为它们的 XML 并手动修改它，但这仍然需要生成服务类来支持该流程。对于使用向导或对话框自动生成支持后端的流程，是否有人对此类需求或任何设计器前端有任何经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:39:06.917

通过 GUI 创建后端逻辑（这意味着 Java）不是 activiti 的目的。您可以使用多种工具创建图表，这可以为非 IT 人员完成。但是您必须自己实现服务任务。

# iphone - 如何在泄漏的“扩展详细信息”面板中显示详细信息？

> ID：10700231
> 
> 赞同：1
> 
> 时间：2012-05-22T10:29:36.177
> 
> 标签：iphone, ios

我正在使用 Leaks 检查我的应用程序，确实发现了一些内存泄漏。但是在“Extended Detail”面板中，我无法直接定位到源代码。只有发生泄漏的内存地址。

这是快照： ![在此处输入图像描述](../Images/135a35ff02c5b2063d150645ff188922.png)

这是其他人的快照： ![在此处输入图像描述](../Images/cc193f9a7ab9f01b78223d3d23c68fcb.png)

我一直在谷歌寻找信息，但没有结果。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:33:16.597

如上图所示，双击内存泄漏红色粗线，在 Instrument 的下半部分，您将能够看到所有的泄漏和相关信息。如果您想查找有关特定泄漏的详细信息，只需单击其地址字段中出现的箭头。这将刷新窗口并通过表末尾的责任调用者列告诉您详细信息，它给出了发生泄漏的具体方法名称。如果双击该行，它将打开已实现该方法的相应 .m 文件。

此链接将对您有所帮助。 [http://soulwithmobiletechnology.blogspot.in/2011/04/how-to-check-memory-leaks-in-xcode-4.html](http://soulwithmobiletechnology.blogspot.in/2011/04/how-to-check-memory-leaks-in-xcode-4.html)

# php - 如何使用php将一个日期减去另一个日期

> ID：10700232
> 
> 赞同：4
> 
> 时间：2012-05-22T10:29:36.703
> 
> 标签：php

我想使用 php 将一个日期减去另一个日期并以天 - 小时 - 分钟 - 秒格式显示结果。我如何使用 php 做到这一点。我尝试使用时间戳，但它没有给出正确的值。请给建议

例如：从日期 2012-04-27 19:30:56 到日期 2012-04-27 19:37:56

我用了这段代码

```
if(strtotime($history['datetimestamp']) > strtotime($lasttime)) {

                 $totalelapsed1 = (strtotime($history['datetimestamp'])-strtotime($lasttime)); 

                     if($totalelapsed1 > 60 ) {
                         $sec = $totalelapsed1%60;
                         $min = round($totalelapsed1/60 , 0);

                         $minute = $min + $minute;
                         $second = $sec + $second;

                        // echo $min. " min " .$sec." sec";

                     } else {
                         //echo "0 min " . $totalelapsed1." sec";

                         $minute = 0 + $minute;
                         $second = $totalelapsed1 + $second;

                    }

                } else {
                     $minute = 0 + $minute;
                     $second = 0 + $second;
                    // echo "0 min 0 sec";
                } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T10:34:51.230

从[如何减去两个日期和时间以获得](https://stackoverflow.com/questions/3371011/how-to-subtract-two-dates-and-times-to-get-difference/3371061#3371061)VolkerK 的[差异](https://stackoverflow.com/users/4833/volkerk)：

> 你必须像这样使用： -
> 
> ```
> <?php
> 
> //$now = new DateTime(); // current date/time
> $now = new DateTime("2010-07-28 01:11:50");
> $ref = new DateTime("2010-07-30 05:56:40");
> $diff = $now->diff($ref);
> printf('%d days, %d hours, %d minutes', $diff->d, $diff->h, $diff->i);
> prints 2 days, 4 hours, 44 minutes 
> ```
> 
> 见[http://docs.php.net/datetime.diff](http://docs.php.net/datetime.diff)
> 
> 编辑：但是您也可以将问题更多地转移到数据库方面，例如通过将到期日期/时间存储在表中，然后执行类似...的查询`WHERE key='7gedufgweufg' AND expires<Now()` 许多 rdbms 对日期/时间算术具有合理/良好的支持。

链接网址：-[如何减去两个日期和时间以获得差异](https://stackoverflow.com/questions/3371011/how-to-subtract-two-dates-and-times-to-get-difference)

[http://www.webpronews.com/calculating-the-difference-between-two-dates-using-php-2005-11](http://www.webpronews.com/calculating-the-difference-between-two-dates-using-php-2005-11)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T10:30:37.113

我建议使用 DateTime 和 DateInterval 对象。

```
$date1 = new DateTime("2007-03-24");
$date2 = new DateTime("2009-06-26");
$interval = $date1->diff($date2);
echo "days difference ".$interval->d." days "; 
```

阅读更多 php [DateTime::diff 手册](http://php.net/manual/en/datetime.diff.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:33:36.837

This script resolve my issue

```
$date1 = date("d-m-Y H:i:s",strtotime($date1));

$date2 = date("d-m-Y H:i:s",strtotime($lasttime));

$diff = abs(strtotime($date2) - strtotime($date1));

$years   = floor($diff / (365*60*60*24));  $months  = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));  $days    = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));

$hours = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24 - $days*60*60*24)/ (60*60));  $minuts  = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24 - $days*60*60*24 - $hours*60*60)/ 60);  $seconds = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24 - $days*60*60*24 - $hours*60*60 - $minuts*60)); 

printf("%d years, %d months, %d days, %d hours, %d minuts\n, %d seconds\n", $years, $months, $days, $hours, $minuts, $seconds); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:34:30.327

尝试使用[DateTime:diff()](http://www.php.net/manual/en/datetime.diff.php)。

该页面上提供了示例。

# tabs - 如何在 ExtJs4 中将选项卡添加到网格值

> ID：10700239
> 
> 赞同：0
> 
> 时间：2012-05-22T10:29:46.227
> 
> 标签：tabs, grid, extjs4

在网格面板中我有值，当我单击网格值时，它应该在同一个网格面板中的新选项卡中打开，其中包含与网格值相关的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:51:27.427

如果我正确地关注您，那么`itemclick:function(){}`您可以在您的内部尝试此代码以打开一个新标签

```
 Ext.getCmp('tabpanel_id').add({
        title: 'New Tab',
        layout:'fit',
        closable: true,
        items:[

           //stuff inside tab panel

        ]
    }).show(); 
```

# c++ - Visual Studio 2008 64 位上的 C++ Boost 库，编译器无法打开 .obj 文件

> ID：10700242
> 
> 赞同：0
> 
> 时间：2012-05-22T10:29:51.717
> 
> 标签：c++, visual-studio-2008, boost, 64-bit

我一直在 64 位 pc 上的 Microsoft Visual Studio 2008 上开发我的 C++ 应用程序。该程序包含并使用 Boost 库，我一直在使用它们时遇到了一些麻烦。我目前在 VS2008 上的工作模式是“Debug x64”。

我将 Boost 库放入 C:\Boost 目录，并将 Boost 路径包含到解决方案属性（配置属性、其他包含目录）中，但在编译阶段出现错误。

`Error 30 fatal error LNK1104: cannot open file 'C:\Boost\boost_1_44_0\.obj'`

这个错误是什么意思？

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-11T15:44:34.587

只是为了使上面的评论更简洁，我遇到了同样的问题。

通过从 *Configuration Properties > Linker > Input > Additional Dependencies*中删除我的 boost 目录， 并从 *Configuration Properties > Linker > General > Additional Libraries*中删除任何 boost 目录。

我不再得到我的`Error 30 fatal error LNK1104: cannot open file 'C:\boost.obj'`错误。

# jquery - 如何将图像从 iframe 复制到 textarea？

> ID：10700243
> 
> 赞同：2
> 
> 时间：2012-05-22T10:29:53.493
> 
> 标签：jquery, asp.net

我想将图像从 iframe 复制到 div ot 到 textarea 像这样[jsfiddle.net/purmou/xEtL9/](http://jsfiddle.net/purmou/xEtL9/)

```
<textarea rows="10" cols="40" id="content">
</textarea>

<div id="fake">
    <iframe width="100%" height="400px" src="http://www.w3schools.com/"></iframe>
</div> 
```

和

```
 $(function(){
            $("#fake iframe").click(function(){
                var update = $("<div>").append(
                    $("<iframe>").attr("src", $(this).attr("src"))
                ).html();

                $("#content").val(function( i, v ) {
                    return v + update;
                });
            });
        }); 
```

但是对于 iframe 它不起作用..有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:05:01.483

这与 iframe 不直接支持 onclick 有关。

此处讨论：[将点击事件处理程序添加到 iframe](https://stackoverflow.com/questions/6452502/adding-onclick-event-to-iframe)

基本上它说您需要通过 iframe 的文档对象的侦听器订阅事件：

> 您可以使用闭包来传递参数：

```
iframe.document.addEventListener('click', function(event) {clic(this.id);}, false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:19:06.897

您没有为 IFrame 提供 id 并且必须使用 IFrame id 而不是 <IFrame> 标记。

检查下面的代码

<iframe id="iframe1" width="100%" height="400px" src="http://www.w3schools.com/"/>

& $("iframe1").attr("src", $(this).attr("src"))

快乐编码！！！

# devexpress - aspxgridview 2 上下文菜单

> ID：10700244
> 
> 赞同：0
> 
> 时间：2012-05-22T10:29:59.153
> 
> 标签：devexpress, aspxgridview

我们可以为 devexpress aspxgridview 提供 2 个上下文菜单，一个用于行的上下文菜单和一个用于列标题的上下文菜单吗？如果是，那么我们该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:02:34.183

> **是**的，你可以做到。。

按照这个 -[如何为网格列标题或行显示弹出菜单](http://www.devexpress.com/Support/Center/e/E723.aspx) 很好的 DevExpress 示例，它表明您正在寻找。

检查此标记以`AspxGridView`获取`multiple context menu`..

```
<dxm:ASPxPopupMenu ID="pmColumnMenu" runat="server" ClientInstanceName="pmColumnMenu">
        <Items>
            <dxm:MenuItem Name="cmdShowCustomization" Text="Column Chooser...">
            </dxm:MenuItem>
        </Items>
        <ClientSideEvents ItemClick="function(s, e) {
            if(e.item.name == 'cmdShowCustomization')
            grid.ShowCustomizationWindow();
    }" />

</dxm:ASPxPopupMenu>
   <dxm:ASPxPopupMenu ID="pmRowMenu" runat="server" ClientInstanceName="pmRowMenu">
         <Items>
             <dxm:MenuItem Text="Export to PDF" Name="cmdExport">
             </dxm:MenuItem>
         </Items>
     <ClientSideEvents ItemClick="function(s, e) {
        if(e.item.name == 'cmdExport')
            alert('Export simulation.');
    }" /> 
```

如需更多帮助，请查看此[搜索结果](http://search.devexpress.com/?q=context%20menu%20on%20rows&p=T4%7CP5%7C57&d=762)。

希望这有助于...

# entity-framework-4.1 - 实体框架 4.1 - 删除包含或加载实体时的 DbUpdateExcepetion

> ID：10700246
> 
> 赞同：0
> 
> 时间：2012-05-22T10:30:14.930
> 
> 标签：entity-framework-4.1

我正在尝试使用“删除”方法从我的上下文中删除对象。但我得到一个 UpdateException 说：

> ORA-01407: 无法将 ("NAMUR_TEST_ALERTE"."TX_HST_TRACE_DATA"."TRD_ID_INFO_TRACE") 更新为 NULL

其中 TRD_ID_INFO_TRACE 是我的外键。

这是我的查询 linq ：

```
List<Trace> query = (from t in Repository.DataContext.Trace                                          
                                     .Include("Datas")
                                      select t).ToList<Trace>(); 
```

如果我禁止包含指令。它工作正常。

但我不能，因为这样做的目的是检索数据，使用序列化存储它们，最后从数据库中删除它们。

我怎样才能使删除保留我的包含？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:39:49.203

问题是您的模型没有配置为级联删除，但您的数据库可能是。如果模型未配置为级联删除，则删除主体实体将强制将依赖实体中的 FK 设置为 null，并且此更改将作为更新发送到数据库。

解决此问题的一种方法是在 EDMX 或 ftuent API 中配置您的关系（它应该是默认映射的约定）以级联删除。另一种方法是在删除跟踪实例之前在代码中删除所有相关的数据实例。

# iphone - 如何在 cocos3d 中拍照

> ID：10700248
> 
> 赞同：0
> 
> 时间：2012-05-22T10:30:28.937
> 
> 标签：iphone, objective-c, xcode, cocos3d

我制作了一个增强现实应用程序，我需要从相机拍照并在其上覆盖 3d 模型。

我已经可以使用 3d 徽标截取 gl view 的屏幕截图，但我不知道如何从相机拍摄图像。

如何从相机拍照？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:15:08.820

如果您要显示实时视频流形式的相机，您可以使用[GPUImage](https://github.com/BradLarson/GPUImage)。

如果只需要拍摄静止图像，请使用 AVFoundation 的 AVCaptureStillImageOutput。请参阅[AVCam - Apple 的示例代码](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)，您可以在其中剥离预览实时视频 ( `AVCaptureVideoPreviewLayer`) 的部分，并在需要时捕获静止图像。

```
//you'll need to create an AVCaptureSession

_session = [[AVCaptureSession alloc] init];

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

//there are steps here where you adjust capture device if needed

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];

if ([device supportsAVCaptureSessionPreset: AVCaptureSessionPreset640x480]) {
    _session.sessionPreset = AVCaptureSessionPreset640x480;
}

_stillImageOutput = [[AVCaptureStillImageOutput alloc] init];

NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
[_stillImageOutput setOutputSettings:outputSettings];
[outputSettings release];

AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in _stillImageOutput.connections) {
   for (AVCaptureInputPort *port in [connection inputPorts]) {
       if ([[port mediaType] isEqual:AVMediaTypeVideo] ) {
            videoConnection = connection;
           break;
       }
   }
   if (videoConnection) { break; }
}

[_session addOutput: _stillImageOutput];

[_session startRunning]; 
```

此代码用于拍照：

```
AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in _stillImageOutput.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) { break; }
}

[_stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error) {

    if (imageSampleBuffer != NULL) {
        NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
        UIImage *image = [UIImage imageWithData: imageData];
        //do something with image or data
    }
} 
```

希望能帮助到你。

# facebook - Facebook.init 回调未调用

> ID：10700249
> 
> 赞同：0
> 
> 时间：2012-05-22T10:30:30.060
> 
> 标签：facebook, actionscript-3, callback

我们有一个 Facebook 画布应用程序，它内置在 Flash 中并使用 Facebook actionscript API。这个应用程序已经运行了一年多，但截至本周，它已经坏了，代码没有任何变化。

该应用程序使用 GraphAPI_Web_1_8_1.swc，问题是不再调用来自 Facebook.init 的回调。

很多人都遇到过同样的问题，并且已经在各种论坛上发布了一种解决方法，据说可以解决这个问题：[http ://ederchrono.com/blog/2012/05/09/fixing-fb-graph-api-for- as3/](http://ederchrono.com/blog/2012/05/09/fixing-fb-graph-api-for-as3/)

我们已经尝试过了，但它对我们的应用程序不起作用，并且错误仍然存​​在。

有没有人有这个错误的解决方案？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:21:19.023

尝试这个：

标签的 id 和 name 属性`<object>`必须设置为相同的值。IIRC，activeX 浏览器使用“名称”，所有其他浏览器使用“id”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:13:37.753

[这里](http://code.google.com/p/facebook-actionscript-api/issues/detail?id=416&sort=-id)的解决方案

简而言之，您必须在 FacebookJSBridge.as 中将“FB.JSON”替换为“JSON”

# php - PHP 电子邮件表单，执行但仅发送到“某些”电子邮件服务

> ID：10700250
> 
> 赞同：0
> 
> 时间：2012-05-22T10:30:32.230
> 
> 标签：php, forms, email

我正在开发一个简单的电子邮件联系表单，该表单当前执行没有错误并显示我添加的成功消息。

但是，经过测试，电子邮件只能由我拥有的 Microsoft Outlook 地址接收。

Gmail、Hotmail 和 Yahoo 没有收到邮件，而我主要针对的是 Gmail。

我检查了每种情况下的垃圾邮件/垃圾文件夹，但没有任何迹象。

如果有人有任何想法为什么会这样，那就太好了。我没有发布代码，因为它至少在一种情况下确实有效，但如果有帮助，这里是“标题”的格式。

```
 $headers = 'From: '.$email_from."\r\n".
 'Reply-To: '.$email_from."\r\n" .
 'X-Mailer: PHP/' . phpversion();
 @mail($email_to, $email_subject, $email_message, $headers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:28:49.320

如果相同的代码可以向一个收件人发送电子邮件，但不能向另一个收件人发送电子邮件，那么问题出在收件人身上。

我怀疑这是因为收件人的电子邮件提供商认为您的电子邮件看起来像垃圾邮件。

我建议去掉`Reply-to`标题，并将地址放在`From`字段中，一方面 - 基本上，您可以做的越多，使您的电子邮件看起来不像垃圾邮件越好。

如果这不起作用，请尝试使用您的代码尽可能发送有限的消息 - 不添加额外的标题信息，文本中没有链接 - 如果可行，请慢慢开始添加内容，直到您停止收到消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:01:14.393

然后将您要邮寄的电子邮件添加到您已硬编码的 $email_to 字段中，无论是 gmail 还是 yahoo

或者，如果您从表单中动态地传递电子邮件，则将其设置为

$email_to = $_post['email'];

然后将其添加到您的标题中，然后它应该发送给收件人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:28:07.083

您发送的 IP 可能已被列入黑名单（如果您的服务器位于共享 IP 上，则使用该 IP 的人发送了一些坏东西）。

如果可能，尝试使用不同的 IP 地址，如果它有效，那么您就知道问题所在并且可以向您的虚拟主机投诉。

# tfs - TFS 2010 迭代积压工作簿容量和中断表中缺少团队成员

> ID：10700252
> 
> 赞同：0
> 
> 时间：2012-05-22T10:30:41.837
> 
> 标签：tfs, agile

我们使用 TFS 2010 和 MSF for Agile Software Development v5.0 模板。

打开 Iteration Backlog.xlsm Excel 表时，我们发现并非所有团队成员都列在容量或中断表中。

这些选项卡从哪些列表中读取，我应该如何更新它们

[我在团队资源管理器的相关项目下正确设置了所有团队成员]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:48:12.183

为了让它们出现，它们需要在给定的迭代中被分配给至少一个任务。

实现这一目标的最简单方法是在“迭代积压”工作表中这样做。如果稍后您从所有任务中删除团队成员的分配，他/她将保留在“中断”/“容量”表中，但在包含名称的单元格中显示数据验证错误警告。

# magento - 将 Magento 转移到 127.0.0.1 时出现重复错误

> ID：10700255
> 
> 赞同：0
> 
> 时间：2012-05-22T10:30:48.607
> 
> 标签：magento, magento-1.4, mysql-error-1064, duplicates

我的一个客户有一个相当大的网站。出于某种原因，我不得不将网站转移到本地主机。

数据库超过 1GB，但我仍然设法通过 phpmyadmin 导入它。

现在，当我转到前端时，出现以下错误。

> SQLSTATE [23000]：违反完整性约束：1062 键 'PRIMARY' 的重复条目 '2386019'

我已经用谷歌搜索了，但似乎没有一个解决方案可以解决问题。

任何建议都非常感谢。

提前谢谢了

多姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:45:46.677

我的猜测是，尽管看起来数据库已导入，但某些部分已超时。

这是一个解释如何通过 dos 命令行导入的链接，这对于大型数据库导入效果更好：[http ://www.technotaste.com/blog/easy-mysql-import-from-the-command-line-在窗口/](http://www.technotaste.com/blog/easy-mysql-import-from-the-command-line-on-windows/)

# android - 发送请求时移除端口

> ID：10700257
> 
> 赞同：2
> 
> 时间：2012-05-22T10:30:50.110
> 
> 标签：android, apache

我正在开发一个与我们的服务器通信的应用程序。服务器端的其中一个库中存在错误。此错误要求将端口与主机一起发送。

问题是当我发送请求时，端口似乎被剥离了。我最初使用 HTTPClient 并像这样设置标头

```
httpClient.addHeader(new BasicHeader("Host", "company.net:80")); 
```

但服务器端他们只收到“company.net”

我也尝试过像这样使用 requestInterceptor

```
 httpClient.addRequestInterceptor(new HttpRequestInterceptor() {

            public void process(
                    final HttpRequest request,
                    final HttpContext context) throws HttpException, IOException {
                request.setHeader("Host", "company.net:80");
                Log.i(TAG, "intercepted and set host header");
            }
        }); 
```

但很可惜，同样的问题发生了。

我最后的尝试是使用 URLConnection 而不是 httpClient

```
 urlConnection.addRequestProperty("Host", "company.net:80"); 
```

你大概可以猜到结果。

如何发送包含端口的主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:43:44.657

这似乎是`HttpClient`（参见[此处](https://stackoverflow.com/a/6076176/691639)）的默认行为，因为它在发送请求之前将主机标头设置为您实际将其发送到的主机。由于端口 80 是默认的 HTTP 端口，因此它不包含在其主机版本中。您可以尝试链接中的方法，看看是否适合您。

# c# - 远程发布到 iframe

> ID：10700267
> 
> 赞同：1
> 
> 时间：2012-05-22T10:31:24.647
> 
> 标签：c#, asp.net-mvc-3

我不确定如何执行此操作以及是否可能，但是可以。

我正在使用 RemotePost 将一些参数发送到远程服务器，如下所示：

```
RemotePost post = new RemotePost { Url = "some url" };
post.Add("Name", name);
post.Add("UserId", userId);
post.Add("Ref", reference);
post.Add("Hash", hash);
post.Post(); 
```

有用。当我按下“发送”按钮时，它会发送请求，但也会在我正在查看的当前页面中打开网页。

我喜欢的是页面在 iframe 内打开，而不是用新页面重新加载我的整个页面。

我不太确定该怎么做（如果可能的话）。

例如，我可以简单地在我的网页中创建一个 iframe：

```
<iframe name="myframe"></iframe> 
```

然后使用 RemotePost 像这样：

```
RemotePost post = new RemotePost { Url = "some url" };
post.Add("Name", name);
post.Add("UserId", userId);
post.Add("Ref", reference);
post.Add("Hash", hash);
post.Post("myframe"); 
```

这有可能吗？

# css - 将多个元素放在列的右侧

> ID：10700268
> 
> 赞同：0
> 
> 时间：2012-05-22T10:31:27.473
> 
> 标签：css, css-float, html-table

我想将一个元素放在一列的左侧，并将三个元素放在右侧。

即，看起来像这样：

```
|item1                   item2 item3 item4| 
```

（在原来的问题中，column 是几列顶部的一个 span）

这有效：

```
table {
    width:10cm;
}
.push-left{
    display:inline-block;
    float:left;
}
.push-right{
    display:inline-block;
    float:right;
    padding:0 5px 0 5px;
}

<table>
<tr>
<td>
<div class="push-left">item1</div>
<div class="push-right">item4</div>
<div class="push-right">item3</div>
<div class="push-right">item2</div>
</td>
</tr>
</table> 
```

请注意，float:right 项目需要在 html 中以相反的顺序放置。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:40:05.893

将 item2 - item3 - item4 放入包装器中，并浮动包装器。

```
.inline{
  display:inline-block;
  padding:0 5px 0 5px;
}
.push-right{
    float:right;
}

<div class="push-right">
  <div class="inline">item2</div>
  <div class="inline">item3</div>
  <div class="inline">item4</div>
</div> 
```

并且每当您使元素浮动时，它都会包裹到其内容中，`display: inline-block`不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:59:09.567

将第一项放在表格的单独单元格中，将其他三个项放在另一个单元格中。右对齐第二个单元格。

如果实际表格的行数多于代码中显示的行数，您可能需要通过添加新单元格和/或`colspan`属性来修改表格结构。

# jquery - jQM复选框，如何更改状态？

> ID：10700270
> 
> 赞同：1
> 
> 时间：2012-05-22T10:31:33.557
> 
> 标签：jquery, css, jquery-mobile

看起来 jQM 使用 CSS 复选框。有没有简单的方法来切换状态？或者我是否需要始终通过 CSS 更改课程？

离开

```
<label id="RememberMe" for="checkbox-1" data-theme="c" class="ui-btn ui-btn-icon-left ui-corner-top ui-corner-bottom ui-controlgroup-last ui-checkbox-off ui-btn-up-c">
    <span class="ui-btn-inner ui-corner-top ui-corner-bottom ui-controlgroup-last" aria-hidden="true">
        <span class="ui-btn-text">Memorize</span>
        <span class="ui-icon ui-icon-shadow ui-icon-checkbox-off"></span>
    </span>
</label> 
```

上

```
<label id="RememberMe" for="checkbox-1" data-theme="c" class="ui-btn ui-btn-icon-left ui-corner-top ui-corner-bottom ui-controlgroup-last ui-checkbox-on ui-btn-up-c">
    <span class="ui-btn-inner ui-corner-top ui-corner-bottom ui-controlgroup-last" aria-hidden="true">
        <span class="ui-btn-text">Memorize</span>
        <span class="ui-icon ui-icon-shadow ui-icon-checkbox-on"></span>
    </span>
</label> 
```

有没有比更改 CSS 类更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:36:21.337

您只需更改`checked`底层`<input>`元素的属性，然后刷新 jQuery Mobile 小部件：

```
$("#checkbox-1").prop("checked", true).checkboxradio("refresh"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:43:19.837

```
 $("#checkbox-1").attr("checked",true).checkboxradio("refresh"); 
```

# android - RelativeLayout 添加规则“RelativeLayout.LEFT_OF”不起作用

> ID：10700273
> 
> 赞同：17
> 
> 时间：2012-05-22T10:31:43.230
> 
> 标签：android, android-layout, android-relativelayout

我有一个如下的relativeLayout：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:id="@+id/parent" >

    <ListView 
        android:layout_width="360dp"
        android:layout_height="600dp"
        android:id="@+id/list"
        android:inputType="text"
        android:maxLines="1"
        android:layout_margin="50dp"
        android:layout_alignParentRight="true"
        />
</RelativeLayout> 
```

在java代码中，我想在listview的左侧添加一个视图，但是没有用：

```
m_relativeLayout = (RelativeLayout)findViewById(R.id.parent);
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
layoutParams.addRule(RelativeLayout.LEFT_OF, m_listView.getId());
Button button2 = new Button(this);
button2.setText("I am button 2");
m_relativeLayout.addView(button2, layoutParams); 
```

只有当我将列表视图设置为**alignParentRight**时，它才会起作用。这是一个android错误还是我错过了什么？

我总是尝试`addView(View child, int index, LayoutParams params)`，但它可能只适用于线性布局。那么有没有正常的解决方案来完成这项`RelativeLayout.LEFT_OF`工作？

**编辑**

我已经尝试过`RelativeLayout.BELOW`and `RelativeLayout.RIGHT_OF`，并且它们工作得很好，所以这意味着我没有足够的地方来获取按钮？我试图给更多的空间，但它仍然不起作用。

我用的是东芝AT100（1280*800）和风景，所以空间够用。测试`below`和`right`一样`left`。我想如果我将控件 A 放在相对布局中，然后我添加控件 B 并将其标记在控件 A 的左侧，结果应该是控件 B 将控件 A 推到其右侧，对吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T14:26:18.217

> 我想如果我将控件 A 放在相对布局中，然后我添加控件 B 并声明它在控件 A 的左侧，结果应该是控件 B 将控件 A 推到其右侧，对吗？

`RelativeLayout.LayoutParams`您的假设不正确，除非您使用规则指定，否则控件 A 不会被向右推。`RelativeLayout`如果您没有为它们指定放置规则，则从屏幕的左上角开始将其子项彼此一层一层地放置。当您将`View`A 添加到`RelativeLayout`没有任何规则（如`layout_alignParentRight`）的情况下，它将从屏幕的左上角开始放置。然后，当您添加`View`B 时，该规则`to_leftOf`将适用于该位置，但该规则对于将保持其在屏幕上的位置`View`的 A 没有任何意义。`View`这将使`View`B 位于`View`A 的左侧但在屏幕之外，因为`View`A 的边界从屏幕的左边框开始。

将`Button`放置`ListView`在您使用时的左侧，`layout_alignParentRight="true"`因为现在有空间可以实际看到`Button`（不再在外面了）。`addView(View child, int index, LayoutParams params)`在 a 中工作是`LinearLayout`因为它会将`LinearLayout`其子项排列在一行或一列中（取决于方向），因此当您`View`在特定位置添加 a 时，它将`Views`在它之后将另一个推到右侧或下方（取决于方向）（没有相对a 中的视图定位`LinearLayout`，唯一的规则是孩子们一个接一个地来）。

从`ListView`没有设置任何规则的 开始，这里有一个示例，说明如何使`Button`出现在 的左侧`ListView`：

```
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
Button button2 = new Button(this);
button2.setText("I am button 2");
button2.setId(1000);
m_relativeLayout.addView(button2, layoutParams);
RelativeLayout.LayoutParams rlp = (RelativeLayout.LayoutParams) m_listView
            .getLayoutParams();
rlp.addRule(RelativeLayout.RIGHT_OF, button2.getId()); 
```

Button 将正常添加到屏幕上，并且从屏幕的左上角开始出现。如果没有上面代码中的两行，`Button`and将重叠，因为这是没有任何规则的孩子`ListView`的正常行为。`RelativeLayout`然后我们显式地修改 的位置`ListView`以将其移动到右侧（上面代码的最后两行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T11:42:57.023

如果您的变量名称是指示性的，那是因为您将小部件添加到 LinearLayout，因此 RelativeLayout 的标签被忽略。

这条线就是我所说的：

```
m_linearLayout.addView(button2, layoutParams); 
```

**编辑**

你说`alignParentRight`工作......唯一的区别是 ot 不采用锚参数。也许`m_listView.getId()`没有返回正确的 ID。您可以逐步使用调试器，看看它是否返回了正确的值。

也许您可以尝试专门调用 id ...

```
layoutParams.addRule(RelativeLayout.LEFT_OF, R.id.list); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-24T15:13:41.610

要执行它，请使用预定义的视图**ID**或声明一个。在**values 文件夹**中创建**ids.xml**然后添加一个像这样的**项目**：

```
<item name="imageViewID" type="id"/> 
```

在您创建新视图实例的代码中使用此 ID，如下所示：

```
RelativeLayout layout=new RelativeLayout(context);

ImageView imageView = new ImageView(context);
imageView.setId(R.id.imageViewID);

RelativeLayout.LayoutParams layoutParams = new LayoutParams(50, 50);
layoutParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
layout.addView(imageView, layoutParams);

TextView  textView = new TextView(context);

RelativeLayout.LayoutParams textViewParams= new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
textViewParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
textViewParams.addRule(RelativeLayout.BELOW, imageView.getId());
layout.addView(nameView, nameLayoutParams); 
```

或者我们可以直接使用这个函数**View.generateViewId()**来执行相同的操作。像这样：

```
imageView.setId(View.generateViewId()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-12T03:23:46.180

setId 在 align 被调用之前，特别是对于新的对象视图。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T11:24:21.403

我想你可能已经忘记添加or的可见性`m_listView`了。`RelativeLayout``m_listView``GONE`

你能检查一下吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T12:59:57.673

如果您使用的是自定义 id 而不是常规生成的 Android id（例如`R.id.my_id`），请确保 id 不等于 0（或负数），否则该规则将被忽略。

# ios - 如何在 UISplitView 的详细视图中清除 UIWebView 的内容

> ID：10700274
> 
> 赞同：1
> 
> 时间：2012-05-22T10:31:53.213
> 
> 标签：ios, ipad, uitableview, uiwebview

我在详细视图中有一个 Web 视图。当从主视图 (UITableView) 中选择的对象在 Web 视图中加载其内容时。当我在主视图中返回时，Web 视图中的内容仍然存在。我想清除网页视图的内容。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:35:49.577

您可以添加一个在您移回主视图时调用的委托，并在此调用中：

```
[webView stringByEvaluatingJavaScriptFromString :@"document.open();document.close()"]; 
```

# css - 无法使用 dotnetnuke 使引导响应式设计工作

> ID：10700276
> 
> 赞同：10
> 
> 时间：2012-05-22T10:32:10.797
> 
> 标签：css, twitter-bootstrap, dotnetnuke

我在 DotNetNuke 的项目中使用了 twitter 引导程序。我使用 HTML、CSS、bootstrap 进行设计和布局。当我在不同的移动设备上测试响应式设计时，即使我调整了浏览器窗口的大小，响应式设计也能正常工作。

由于它运行良好，我将设计转换为 DotNetNuke Skin。现在，响应式设计只有在我调整浏览器窗口大小时才能正常工作，而不是在移动设备上。我了解 DNN 加载样式表的流程，并且我遵循了它。我已经将我的 skin.css 作为 bootstrap.css 的组合，然后是 bootstrap-responsive.css 的内容

我无法找到问题，就好像我对我的 html 使用相同的 skin.css，它工作正常，但它不适用于 DNN（在移动设备上）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-22T11:12:42.963

您缺少针对移动设备以实现适当规模的元数据。在页面标题中插入以下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-30T19:06:34.727

我只是注意到一些有趣的事情并想分享它，也许它会对某人有所帮助。在站点标题部分中，您应该首先包含 bootstrap.css，然后才包含 bootstrap-responsive.css，因为显然 responsive.css 取决于 bootstrap.css

当然，元标记也应该存在。

```
<link href="/css/bootstrap.css" rel="stylesheet" type="text/css" />
<link href="/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />  
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-22T12:55:38.777

确保在basic**之后****而不是**之前包含响应式 CSS（responsive.css） 。

# python - Mako 中的块和定义

> ID：10700277
> 
> 赞同：1
> 
> 时间：2012-05-22T10:32:18.160
> 
> 标签：python, templates, mako

我对 Mako 完全陌生，所以请耐心等待。

我有一系列用于布局的块。其中一个块需要在同一页面上声明一些变量。我无法让它正常工作。这是非常基本的，我知道，但我正在学习并且无法在 Mako 文档中找到解决方案。执行此操作的正确语法和/或方法是什么？

我想让 userInputViews 更加全球化，因为它在其他块中也类似地使用。currentSet 的值是任意的，不被分析，因为它被传递到页面并且工作正常。

我得到的错误是关于 userInputViews 未定义。

```

<%
用户输入视图 = [
  "中介地址",
  "调解员出生日期",
  “调解员电子邮件地址”
]
%>

<%block name="contentAction">
  % if set(userInputViews) == set(currentSet):
    当前选择了用户输入
  ％ 万一
</%块>

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:18:57.663

我只是想自己学习 Mako，但我相信您已经在与块不同的命名空间中声明了 userInputViews。

[http://docs.makotemplates.org/en/latest/runtime.html](http://docs.makotemplates.org/en/latest/runtime.html)

建议使用空字典调用渲染作为“变量”，然后将“全局”变量插入字典。

那么如果我想在模板请求中设置对每个人都是全局的值怎么办？例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-23T14:54:01.450

使`<% userInputViews`块成为[模块级](https://docs.makotemplates.org/en/latest/syntax.html#module-level-blocks) `<%!`块。

# c# - 如何发送本地化电子邮件

> ID：10700285
> 
> 赞同：0
> 
> 时间：2012-05-22T10:32:27.267
> 
> 标签：c#, localization

我想向用户发送一封本地化的电子邮件，但从资源文件中检索到的文本似乎是基于我的文化。

```
SmtpClient client = new SmtpClient();
client.Host = "xxx.xxx.xxx";
client.Credentials = new NetworkCredential("name", "password");
MailMessage mm = new MailMessage();
mm.Sender = new MailAddress("xxx@xxx.com");
mm.From = new MailAddress("xxx@xxx.com");
mm.To.Add(new MailAddress(email));
mm.Subject = Localization.EmailUserActiveTitle;
mm.Body = "<div><h3>" + Localization.EmailUserActiveBodyPart1 + "</h3></div></br>" +
            "<div>" + Localization.EmailUserActiveBodyPart2 + "</div>" +
            "<div><b>" + content + "</b></div></br>" +
            "<div>" + Localization.EmailUserActiveBodyPart3 + "</div>" +
            "<div>" + Localization.EmailUserActiveBodyPart4 + "</div>";
mm.IsBodyHtml = true;
mm.Priority = MailPriority.Normal;
client.Send(mm); 
```

但是当我检索`Localization.EmailUserActiveBodyPart1`它时，它是根据我当前的文化进行本地化的。

如何检索指定的文化资源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:40:20.267

ResourceManager 使用 Thread.CurrentThread.CurrentUICulture 属性来确定要加载的资源的本地化语言版本。

因此，如果您想强制本地化为特定语言（例如，与您发送电子邮件的用户相关的语言偏好），那么只需在您的代码之前执行此操作：

```
var previousUICulture = Thread.CurrentThread.CurrentUICulture;
Thread.CurrentThread.CurrentUICulture = new CultureInfo("fr-FR"); // Replace with the relevant culture name for your user 
```

并在您的代码之后清理*：

```
Thread.CurrentThread.CurrentUICulture = previousUICulture; 
```

*Obviously this is not a reliable clean-up. A `finally` block or wrapping this language-switching functionality in an `IDisposable` and using a `using` block would prevent your code running in a random language in case of a failure, but that's outside the point.

# android - listview中的android片段

> ID：10700286
> 
> 赞同：3
> 
> 时间：2012-05-22T10:32:27.347
> 
> 标签：android

我的应用程序是一个社交网络，用户在其中共享链接并标记它们以让合适的人接收它。基本上，主要活动只是帖子的列表视图。我使用开放协议解析器在服务器端获取 Web 对象元数据。

现在我需要根据元数据（视频、应用程序、网页......）在每个帖子项目中显示正确的布局。当然，布局必须对用户点击事件和调用意图做出反应。

所以我的第一个想法是为每个项目都有一个框架布局，我在其中加载一个特定的片段，负责根据资源类型生成正确的布局。

但是我真的不确定在列表视图项中加载片段是一个好习惯，因为视图的重用系统完全搞砸了。

我只想知道为你们实现此功能的最佳方式是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:41:45.663

这并不是片段的真正设计目的。您不需要使用片段来拥有`ListView`不同类型的行 - 只需覆盖`getItemViewType()`和`getViewTypeCount()`在您的 中`ListAdapter`，然后确保根据元数据按需创建正确类型的行。

# java - 当文件移动/重命名时 - java RAF 和 File 有什么区别

> ID：10700287
> 
> 赞同：-1
> 
> 时间：2012-05-22T10:32:40.310
> 
> 标签：java, java-io, inode

我只想在 java/linux 上下文中讨论这个问题。

```
RandomAccessFile rand = new RandomAccessFile("test.log", "r"); 
```

VS

```
File file = new File("test.log"); 
```

创建完成后，我们开始读取文件到最后。

1.  在 java.io.File 情况下，如果在文件读取之前 mv 或删除物理文件，它将在读取文件时抛出 IOException。

    ```
    public void readIOFile() throws IOException, InterruptedException {
        File file = new File("/tmp/test.log");
        System.out.print("file created"); // convert byte into char
        Thread.sleep(5000);
        while (true) {
            char[] buffer = new char[1024];
            FileReader fr = new FileReader(file);
            fr.read(buffer);
            System.out.println(buffer);
        }
    } 
    ```

2.  但在 RandomFileAccess 情况下，如果您在文件读取之前 mv 或删除物理文件，它将完成读取文件而不会出现错误/异常。

    ```
    public void readRAF() throws IOException, InterruptedException {
        File file = new File("/tmp/test.log");
        RandomAccessFile rand = new RandomAccessFile(file, "rw");
        System.out.println("file created"); // convert byte into char
        while (true) {
            System.out.println(file.lastModified());
            System.out.println(file.length());
            Thread.sleep(5000);
            System.out.println("finish sleeping");
            int i = (int) rand.length();
            rand.seek(0); // Seek to start point of file
            for (int ct = 0; ct < i; ct++) {
                byte b = rand.readByte(); // read byte from the file
                System.out.print((char) b); // convert byte into char
        }
    } 
    ```

    }

谁能向我解释为什么？与文件的inode有什么关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T13:31:49.490

与许多其他 java IO 工具不同，File 只是一个不可变的句柄，当您需要执行文件系统网关操作时，您`RandomAccessFile`会`InputStream`不时拖动它。您可能将其视为参考： File instance is **pointing** to some specified **path**。另一方面`RandomAccessFile`，仅在构建时才具有路径的概念：它转到指定的路径，打开文件并获取**文件系统描述符**——您可以将其视为给定文件的唯一 id，它不会在移动和其他一些操作——并在它的整个生命周期中使用这个 id 来寻址文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T02:10:28.120

There is no evidence here that you have moved or renamed the file *at all.*

If you did thatt from outside the program, clearly it is just a timing issue.

If you rename a file before you try to open it with the old name, it will fail. Surely this is obvious?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:38:22.763

java.io.File 类提供了基于操作系统的文件系统服务，例如创建文件夹、文件、验证权限、更改文件名等。

java.io.RandomAccessFile 类提供对存储在数据文件中的记录的随机访问。使用这个类，可以对数据进行读写和操作。另一种灵活性是它可以读取和写入原始数据类型，这有助于结构化方法处理数据文件。

与 java.io 中的输入和输出流类不同，RandomAccessFile 用于读取和写入文件。RandomAccessFile 不继承自 InputStream 或 OutputStream。它实现了 DataInput 和 DataOutput 接口。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T10:42:17.450

主要区别之一是，文件不能直接控制写入或读取，它需要 IO 流来做到这一点。作为 RAF，我们可以写入或读取文件。

# c# - 在 asp.net 中执行删除之前确认 Linkbutton

> ID：10700288
> 
> 赞同：4
> 
> 时间：2012-05-22T10:32:42.790
> 
> 标签：c#, asp.net, .net

我的 asp.net 表单中有一个删除链接按钮。当用户单击按钮时，它将从我的数据库中删除内容，这些内容已在按钮的 OnClick() 中编码。但在此之前，我需要有一个确认框，其中包含是或否选项。如果用户点击“是”，我该如何进行删除，如果用户点击“否”，我该如何限制删除？我的问题是 onclick 和 onclientclick 不能一起工作。请帮助我..这是示例代码..

我在哪里放置以下脚本？

```
<script type="text/javascript">
    function Confirm() {
        var confirm_value = document.createElement("INPUT");
        confirm_value.type = "hidden";
        confirm_value.name = "confirm_value";
        if (confirm("Do you want to delete data?")) {
            confirm_value.value = "Yes";
        } else {
            confirm_value.value = "No";
        }
        document.forms[0].appendChild(confirm_value);
    }
</script> 
```

代码背后：

```
protected void Mark_Click(object sender, EventArgs e)
{
    a.Delete(name);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T10:38:59.123

使用以下代码：

```
OnclientClick="return Confirm()" 
```

从函数返回 true/false `Confirm()`，如果 Confirm() 返回 true，则回发将发生，否则不会。

[参考在线样本进行测试](http://www.w3schools.com/aspnet/prop_webcontrol_linkbutton_onclientclick.asp)

注意：我们使用大写的 Confirm()，因为 post 有用户定义的函数 Confirm()。所以请不要与java脚本的内置函数confirm()混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:47:36.527

使用 OnClientClick="return confirm()"

# nlp - 这个 CYK 解析器结果是否正确？

> ID：10700289
> 
> 赞同：2
> 
> 时间：2012-05-22T10:32:48.277
> 
> 标签：nlp, compiler-construction, dynamic-programming, chomsky-normal-form, cyk

我正在尝试学习[CYK 解析算法](http://en.wikipedia.org/wiki/CYK_algorithm)。

对于这组语法规则，结果表对于给定的两个句子是否正确？

```
S -> NP VP
VP -> VB NP
NP -> DT NN
PP -> IN NP
NP -> NP PP
NP -> NN
VP -> VP PP
IN -> with
NN -> dog
NN -> cat
VB -> ate
NN -> mouse
DT -> the

['S']
[None, None]
[None, None, 'VP']
['NP', None, None, 'NP']
['DT', 'NN', 'VB', 'DT', 'NN']
['the', 'cat', 'ate', 'the', 'dog']

['S']
['NP', None]
['NP', None, 'VP']
['NP', None, None, 'NP']
[None, None, 'VP', None, None]
[None, None, 'VP', None, None, 'PP']
['NP', None, None, 'NP', None, None, 'NP']
['DT', 'NN', 'VB', 'DT', 'NN', 'IN', 'DT', 'NN']
['the', 'cat', 'ate', 'the', 'dog', 'with', 'the', 'cat'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-18T10:19:00.347

你可以先尽量减少你的语法，因为有一些不必要的规则，而且这就是它的原因`not in CNF`。

更简洁地看一下，您碰巧`None`在第一个示例，第二行，第二列。实际上可以有一个`S`，但是由于 CYK 中的逻辑不能做进一步的优化，例如`NP->NN`. 从那里`S -> NP VP`提到的`None`单元格消失了。由于 CYK 无法执行这些，**语法必须在 CNF 中**。所以，基本上它大致就像您试图在 C++ 程序上应用 C 编译器（没有 C++ 库）。你很*幸运*，甚至在顶部获得了正确的结果。

话虽如此，我不会沉迷于你的第二个例子。

澄清一下，如果语法**仅**具有以下两种形式的`CNF`规则，则该语法是 in：

 **> S -> AB
> A -> a

`NP -> NN`很明显，CNF中没有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T22:46:20.700

虽然给定的文法不是 Chomosky 范式，但我们可以像下面这样轻松地将其转换为 CNF（例如，去掉非法产生式`NP -> NN`并用附加规则扩充文法）：

```
S -> NP VP
S -> NN VP
VP -> VB NP
VP -> VB NN
NP -> DT NN
PP -> IN NP
PP -> IN NN
NP -> NP PP
NP -> NN PP
VP -> VP PP
IN -> with
NN -> dog
NN -> cat
VB -> ate
NN -> mouse
DT -> the 
```

将语法修改为上述的，带有 CYK 算法的 DP 表（参考[这里](https://stackoverflow.com/questions/52921637/cyk-algorithm-implementation/70297170#70297170)的实现，虽然它假设语法中的每个符号都是单个字符的长度，但可以很容易地扩展）将如下所示，对于第一句话：

[![在此处输入图像描述](../Images/9ece48b2162d0d74af4b7e5103387a64.png)](https://i.stack.imgur.com/7NycE.png)

它将具有以下解析树：

[![在此处输入图像描述](../Images/7e7f4f3be19e1c2cc6f093a97a4f7fcd.png)](https://i.stack.imgur.com/k5sEc.png)

用第二句，下面的动画显示了生成的 DP 表，

[![在此处输入图像描述](../Images/b418f6948157ea35df463ecddbf970da.png)](https://i.stack.imgur.com/9QmYa.gif)

使用以下解析树：

[![在此处输入图像描述](../Images/bdd456bec3ba8aa749310b2ec27485cc.png)](https://i.stack.imgur.com/PqnZ8.png)**

# actionscript-3 - Air App / AS3 - 从文件夹加载所有图像

> ID：10700293
> 
> 赞同：1
> 
> 时间：2012-05-22T10:33:10.547
> 
> 标签：actionscript-3, flash, air

我需要将所有图像加载到一个文件夹中。我怎么能这样做？我必须创建选择器，但不是系统选择器。这就是为什么我想从文件夹加载所有图片（它可以是文件夹的系统选择器）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:07:25.993

我想我明白你在问什么：如何在 a 中给出文件列表`DropDownList`？

```
<fx:Declarations>
    <s:ArrayCollection id="files" />
</fx:Declarations>

<s:initialize>
    <![CDATA[
        var folder:File = new File("/path/to/folder/");
        for each(var file:File in folder.getDirectoryListing()) {
            files.addItem(file.nativePath);
        }
    ]]>
</s:initialize>

<s:VGroup>
    <s:DropDownList dataProvider="{files}" width="300" />
</s:VGroup> 
```

# iphone - 限制 UIScrollView 可滚动区域

> ID：10700294
> 
> 赞同：0
> 
> 时间：2012-05-22T10:33:13.183
> 
> 标签：iphone, cocoa-touch, uikit

我正在使用 UIScrollView 来显示一个大文档，我想限制用户可以以某种方式查看的区域。我几乎已经使用以下代码达到了预期的结果：

```
[childView setFrame:CGRectMake(offsetX, offsetY, contentWidth, contentHeight)];
[scrollView setContentSize:CGSizeMake(contentWidth, contentHeight)]; 
```

使用负数将子视图移动到滚动视图区域之外`offsetX`。`offsetY`这在缩放级别 1.0 下完美运行，但在任何其他缩放级别上都不起作用。我已经实现`- (void)setZoomScale:(float)zoomScale`了这样的：

```
- (void)setZoomScale:(float)zoomScale {
    [super setZoomScale:zoomScale];
    [childView setFrame:CGRectMake(offsetX * zoomScale, offsetY * zoomScale, contentWidth, contentHeight)];
} 
```

但这不起作用，随着视图的缩放，偏移量逐渐变得更远。实现这一目标的最佳方法是什么？

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:23:50.473

显然，您可以将最小和最大缩放比例固定为 1。

但是，如果我在 scrollViewDidZoom 中设置 contentSize，它对我有用：

```
- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
    [scrollView setContentSize:CGSizeMake(1024*scrollView.zoomScale, 1024*scrollView.zoomScale)];
} 
```

顺便说一句，确保关闭反弹以准确检查：

```
scrollView.bounces = NO; 
```

# sql - SQL 查询的最高计数

> ID：10700297
> 
> 赞同：1
> 
> 时间：2012-05-22T10:33:18.033
> 
> 标签：sql, sql-server

我想要一个用于选择顶行的变量。我可以根据变量选择顶行。但是，如果未提供变量，我想选择所有行。

目前我正在使用这个查询：

```
DECLARE @TOPCOUNT int;
SET @TOPCOUNT=10;

SELECT TOP(@TOPCOUNT) * FROM TABLE1 
```

**更新：**

1.  原始查询非常冗长和复杂，所以我不会在 else 子句中没有 top count 的情况下重写整个查询。

2.  我不想使用动态查询，因为它会产生影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:39:56.460

像这样的东西：

```
DECLARE @TOPCOUNT int;
--SET @TOPCOUNT=10;

IF @TOPCOUNT IS NULL
    SELECT * FROM TABLE1
ELSE
    SELECT TOP(@TOPCOUNT) * FROM TABLE1 
```

在上述更新之后添加 - 如果这是存储过程的参数，则只需为以下内容提供默认值`@TOPCOUNT`：

```
@TOPCOUNT INT = 2147483647 --max size of INT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:38:37.407

这样的事情会有所帮助。如果您想要所有行，只需使用 -1 初始化您的 @TOPCOUNT。

```
IF @TOPCOUNT = -1 BEGIN
  SELECT * FROM TABLE1
END
ELSE BEGIN
  SELECT TOP(@TOPCOUNT) * FROM TABLE1
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:38:44.317

```
IF @TOPCOUNT IS NULL SET @TOPCOUNT=2147483647 
```

# android - 在 ChildBrowser、Phonegap/Android 中显示标题/标题

> ID：10700299
> 
> 赞同：0
> 
> 时间：2012-05-22T10:33:30.420
> 
> 标签：android, cordova, childbrowser

我正在使用[ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)，它可以很好地在我的 PhoneGap 应用程序中显示外部网页。我的问题是我无法在子网页中添加标题/标题。有什么建议么？

到目前为止我尝试了什么

而不是`toolbar.addView(edittext);`我添加

```
final TextView rowTextView = new TextView(ctx.getContext()); 
rowTextView.setText(myTitle); 
toolbar.addView(rowTextView); 
```

但看起来我还需要将 myTitle 变量传递给执行方法，以便在 PluginResult execute() 中我可以使用类似的东西

```
result = this.showWebPage(args.getString(0), args.optJSONObject(1), myTitle); 
```

我可以为 iOS 添加与您相同的代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:33:10.850

您必须“升级” ChildBrowser：在第 340 行附近的某个地方有以下代码：`webview.setWebViewClient(client);`. 将其替换为以下内容：

```
webview.setWebViewClient(new WebViewClient() {
  @Override
    public void onPageFinished(WebView view, String url) {
      webview.loadUrl("javascript:(function(){"+"var t=document.head.getElementsByTagName('title')[0];t.innerHTML="+myNewTitle+"})()");
    }
}); 
```

您还必须调整读取代码的选项`showWebPage()`to set `myNewTitle`。但在那之后，你应该很高兴。

**编辑：**

基本上我决定——至少为了我的使用，也可能是你的——不需要工具栏。最初，我调整了 ChildBrowser，以便我可以通过将完整的 HTML 源发送回 JS 代码来轻松地执行 Google oAuth2。我绝对不需要工具栏，因为用户会去谷歌想要它去的地方。我不得不从代码中破解一些东西，而原作者可能会对我对他的代码所做的事情感到生气......这是一个清单：

```
import android.view.Gravity;
import android.util.TypedValue;
import android.graphics.Color;
import android.graphics.Typeface;

public class ChildBrowser extends Plugin {
  **public String zeTitle;**

//  private EditText edittext;
private TextView edittext; 
```

必须将所有引用`EditText`更改为`TextView`.

```
result = this.showWebPage(args.getString(0), args.optJSONObject(1)**, args.getString(2)**); 
```

您还需要更改 .js 文件中的内容。

```
public String showWebPage(final String url, JSONObject options**, String myNewTitle**) {
  if (options != null) {
    showLocationBar = options.optBoolean("showLocationBar", true);
  }
  **zeTitle=myNewTitle;** 
```

注释掉所有`ImageButton`相关代码。

```
edittext = new TextView(ctx.getContext()); // insread of EditText 
```

注释掉`edittext.setOnKeyListener`

```
// edittext.setText(url);
edittext.setText(zeTitle);
edittext.setTextSize(TypedValue.COMPLEX_UNIT_PX, 24);
edittext.setGravity(Gravity.CENTER);
edittext.setTextColor(Color.DKGRAY);
edittext.setTypeface(Typeface.DEFAULT_BOLD); 
```

仅将需要的内容添加到工具栏：

```
// toolbar.addView(back);
// toolbar.addView(forward);
toolbar.addView(edittext);
// toolbar.addView(close); 
```

最后：

```
public class ChildBrowserClient extends WebViewClient {
// EditText edittext;
  TextView edittext;

/**
 * Constructor.
 * 
 * @param mContext
 * @param edittext 
 */
public ChildBrowserClient(TextView mEditText) {
//  this.edittext = mEditText;
} 
```

在 JS 代码中：

```
cb.showWebPage(YOUR_URL, {showLocationBar:true}, YOUR_TITLE); 
```

你应该很高兴。我将在 GitHub 上发布我使用的 ChildBrowser 的更新版本。

# javascript - 如何在页面重新加载jquery之前调用函数

> ID：10700305
> 
> 赞同：0
> 
> 时间：2012-05-22T10:33:56.113
> 
> 标签：javascript, jquery, ajax

我的页面中有几个链接，我想在页面尝试重新加载时调用一个函数。

我试过

```
$(window).unload(function() {
  alert('Handler for .unload() called.');
}); 
```

它不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:35:59.730

你可以试试：

```
window.onbeforeunload = function() {

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T10:37:13.100

控制台：（`Blocked alert('Handler for .unload() called.') during unload.`在 Chrome 中）

我认为这是由于用户体验原因而被阻止的。

如果您尝试`console.log('Handler for .unload() called.');`呼叫成功。

编辑：看到[$(window).unload 没有触发](https://stackoverflow.com/questions/9385778/window-unload-is-not-firing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:57:26.177

window.onbeforeunload = unloadMessage;

```
 function unloadMessage() {
           //do your codeing here...
   } 
```

# php - 服务器请求性能：一次调用获取大量图像

> ID：10700307
> 
> 赞同：0
> 
> 时间：2012-05-22T10:33:58.267
> 
> 标签：php, iphone, objective-c

我有一个表格视图，其中包含每个单元格的图像。由于会有很多单元格，是否可以打包所有需要的图像，并通过一个请求检索它们，还是您必须单独请求每个图像？试图减轻服务器上的压力。或者这是正常的做法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:53:20.373

我认为你应该只异步加载图像，而不是处理这样的优化。正如你所问的，是的，这是正常的做法，除非你的服务器有非常*大的*流量（*巨大的*= google.com、facebook.com 等）。

我使用[SDWebImage 开源库](https://github.com/rs/SDWebImage)，它工作得非常好，对你来说是透明的。导入后，对于每个单元格，您应该执行以下操作：

```
[cell.myImageView setImageWithURL:[NSURL URLWithString:imageURL] placeholderImage:[UIImage imageNamed:@"MyPlaceholderImage"]]; 
```

它会尝试动态加载（和缓存）每个图像，在加载时放置一个占位符图像。

我在一个有 100 多行的表格中使用它，它就像一个魅力。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:38:00.277

如果需要，您可以将图像集合作为 zip 文件提供。

（你是怎么做到的？这取决于。我不知道图像是静态的还是动态的。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T10:49:48.593

尝试将图像转换为 base64 格式，然后发送

# chm - 能够解析 html 元关键字的 CHM Creator

> ID：10700308
> 
> 赞同：2
> 
> 时间：2012-05-22T10:34:25.770
> 
> 标签：chm

我有很多杂志的扫描图像（每月出版），我必须以可搜索的方式组织它。用户应该能够明智地查看杂志问题，或者可以搜索预定义的类别/关键字。

我现在的想法是创建 CHM，因为它比创建新的定制软件需要更少的努力。为此，我将创建单独的 HTMl 页面（以编程方式），其中嵌入图像以及关键字（与图像路径一起存储在 Excel 表中），该图像应包含在结果中。

所以我想要一个可以解析 html 元标记并在 chm 关键字列表中添加关键字的 chm 创建者。

我发现的一个这样的软件是[Abee CHM Maker](http://abeetech.com/chmmakerpro/index.htm) 但我需要一些免费的替代品。

如果您有任何其他想法以最小的努力组织它，那么也欢迎您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:56:18.273

[Free Pascal](http://www.freepascal.org "自由帕斯卡")有一个 CHM 创建器包、一个 html DOM 实现和一个用于 CHM 项目 (.hhp) 的基本命令行编译器。创建者包独立于 MS 工具或任何其他二进制 blob，并且在源代码中可用。就 FPC 的可移植性而言，它是可移植的（不像纸上的 gcc 那样可移植，但在实践中足以支持所有主要架构和操作系统）

可以制作类似的东西，我制作了类似的东西，但不是元，我将标题折叠回 TOC 和索引并清理 html（TeX4ht 输出）并修复链接，然后再将其转换为 chm。

但这需要一些工作，如果您不熟悉 Object Pascal/Delphi（语言），它可能是一座太远的桥梁。（如果这符合您的目标，所需的时间不会与 Abee 的成本相提并论）。

另一方面，在一个可自由编程的系统中，您可以自己决定自动化程度。我曾经做过很多工作，现在所有新的 tex4ht 输出（具有一定的固定设置）格式都很好地转换为 chms。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:39:24.520

创建 chm 文件的标准（免费）方法是使用 Microsoft 的 HTML 帮助研讨会： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms670169 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms670169(v=vs.85).aspx)

亲切的问候，
博

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T15:02:37.507

看看这是否对您有帮助（它当然可以满足您的需要）：

KEL CHM 创建者：[http://dumah7.wordpress.com/2009/02/17/kel-chm-creator-v-1-4-0-0/](http://dumah7.wordpress.com/2009/02/17/kel-chm-creator-v-1-4-0-0/)

或者，我认为您可以在每张图片上添加标签（右键单击它-> 属性-> 详细信息-> 标签）并使用 Windows 资源管理器搜索它们。我从来没有这样做过，但它应该可以工作（我猜）。

# linux - 通过命令行恢复停止的进程

> ID：10700312
> 
> 赞同：3
> 
> 时间：2012-05-22T10:34:46.737
> 
> 标签：linux, process, signals, kill

我在 Linux CentOS 中执行了以下 C 代码来创建一个进程。

```
#include <stdio.h>
#include <unistd.h>

    int main ()
    {
          int i = 0;

          while ( 1 )
          {
                printf ( "\nhello %d\n", i ++ );
                sleep ( 2 );
          }
    } 
```

我已将其编译为`hello_count`. 当我这样做`./hello_count`时，输出是这样的：

```
hello 0
hello 1
hello 2
... 
```

直到我杀了它。我已经使用以下命令停止了执行

```
kill -s SIGSTOP 2956 
```

当我做

```
ps -e 
```

该过程`2956 ./hello_count`仍然列出。

是否有任何命令或任何方法可以恢复（而不是重新启动）进程 ID 为 2956 的进程？

此外，当我停止进程时，命令行显示：

```
[1]+ Stopped      ./hello_count 
```

上一行中的 是什么`[1]+`意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:38:09.560

*   要继续停止的进程，即恢复使用**kill -SIGCONT PID**
*   Regd [1]+ 是 bash 处理作业的方式。有关更多信息，请尝试bash 提示符下的**帮助作业**。

# java - 无法在 org.junit.runner 中找到/导入 Runwith 类？

> ID：10700315
> 
> 赞同：3
> 
> 时间：2012-05-22T10:34:52.447
> 
> 标签：java, class, selenium, import, junit

当我在 org.junit.runner 中导入 Runwith 时，出现以下错误...

***注释类型 Runwith 的属性值未定义***

它给了我在 Junit-Runner 包中创建一个类的建议......我不知道，我应该在那个代码中放什么......

Junit-4.10 在库和构建路径中。我正在使用它，但不确定它是 Junit 还是 Selenium 的问题……有什么建议吗？

这是代码，我正在使用并得到使用 @Runwith 的错误。（第 2 行和第 5 行）

```
package package1;
import org.junit.runner.Runwith;
import org.junit.runners.Suite.SuiteClasses;

@Runwith(Suite.Class)
@SuiteClasses({WPHomePage.class, WPRegisterpage.class})

public class BatchJavaFile {

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T14:12:19.163

`@Runwith(Suite.Class)`应该是`@RunWith(Suite.class)`（注意大写）

您可能还需要另一个导入

```
import org.junit.runners.Suite; 
```

# ios - NSTimer 没有在它应该触发的时候触发

> ID：10700317
> 
> 赞同：2
> 
> 时间：2012-05-22T10:35:07.657
> 
> 标签：ios, animation, nstimer

我有一个按字母顺序划分的表格视图。我在每个部分的页脚的 UIImage 视图中显示动画横幅，并且需要确定单击 UIImage 视图时显示的图像。我在调用 startAnimating 之前设置了一个计时器。计时器每 5 秒触发一次，与动画变化的速率相同，但计时器的触发速度要快得多。有时它会在 5 秒内发射 2 或 3 次。这是我启动计时器和动画的代码：

```
-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger) section {

...

    imgAdBar = [[bannerView alloc]initWithFrame:CGRectMake(footer.frame.origin.x,footer.frame.origin.y,footer.frame.size.width,footer.frame.size.height)];

    imgAdBar.image=[UIImage imageNamed:[NSString stringWithFormat:@"%@", [animationArray objectAtIndex:0]]]; 
    [imgAdBar saveBannerArray:animationArray];
    [imgAdBar setUserInteractionEnabled:YES];
    imgAdBar.animationImages = images;
    imgAdBar.animationDuration=[images count]*5;
    imgAdBar.animationRepeatCount=0;
    timerCount=0;
    [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(timerRunning:) userInfo:nil repeats:YES];
    [imgAdBar startAnimating];
    [footer addSubview:imgAdBar];
    footer.backgroundColor = [UIColor clearColor];

}
return footer;
} 
```

这是选择器：

```
-(void)timerRunning:(NSTimer*)theTimer
{
NSLog(@"timerCount=%d",timerCount);

imgAdBar.timerCount=timerCount;
if (timerCount==numAnimationImages) {
    timerCount=0;
}
NSLog(@"currentImage=%@",[animationArray objectAtIndex:timerCount]);
timerCount++;
} 
```

我计划使用该计时器来索引我的图像数组，以便我可以知道显示的是哪个。任何人都知道为什么它应该在它应该触发的时候不触发？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:09:51.670

在头文件中声明一个 NSTimer 作为属性

```
@propterty (nonatomic, retain) NSTimer *someTimer; 
```

在您触发计时器的行中

```
someTimer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(timerRunning:) userInfo:nil repeats:YES]; 
```

不要忘记在 -(void)viewDidUnload 中释放它

```
[someTimer release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:17:14.350

您必须使用 NSTimer 作为属性...由于 `viewForFooterInSection` 在许多部分中被多次调用，因此您必须在重新初始化它之前使其无效，或者您必须检查以下代码是否为 null .. **无效：**

```
 NSTimer *timer; // declare in ViewDidLoad
  // code in viewForFooterInSection
    [timer invalidate];
        timer = [NSTimer scheduledTimerWithTimeInterval: 0.5
                         target: self
                         selector: @selector(handleTimer:)
                         userInfo: nil
                         repeats: YES]; 
```

**检查零**

```
if (timer == nil) {

        timer = [NSTimer scheduledTimerWithTimeInterval: 0.5
                                                 target: self
                                               selector: @selector(handleTimer:)
                                               userInfo: nil
                                                repeats: YES];
    } 
```

希望它应该有所帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T00:44:26.813

由于您不使用`timerCount`除非有点击的值，因此您不需要在计时器上更新它：存储开始动画时的时间就足够了。知道每张图片显示 5 秒，您可以通过将点击时间与开始动画的时间之间的差值（以秒为单位）除以 5，然后取除以图像总数的其余部分。

假设您有十张图像，每张图像循环显示五秒钟。假设动画开始于`08:15:51`。现在假设在动画开始后`08:19:23`或几秒后点击。`212`除以五后得到`42`; 除以 10 的余数，得到`2`. 因此，您知道用户点击了动画循环中的第三张图片（像往常一样，索引从零开始）。

# c# - 带有嵌套构造函数的 CA2000

> ID：10700319
> 
> 赞同：3
> 
> 时间：2012-05-22T10:35:13.523
> 
> 标签：c#, .net, visual-studio-2010, code-analysis

我再次收到另一个 CA2000 警告。

以下代码生成 CA2000 警告：

```
// Use an emulated GPS device
nmeaInterpreter.Start(new VirtualDevice(new NmeaEmulator())); 
```

出现以下警告：

```
CA2000 : Microsoft.Reliability : In method 'GpsService.Start()', call System.IDisposable.Dispose on object 'new NmeaEmulator()' before all references to it are out of scope. 
```

我已经检查了微软关于 CA2000 的文档，但找不到一个很好的例子来说明如何处理嵌套构造函数。显然我不想自己存储对模拟器的引用。我希望仅将引用传递给构造函数。

C# 是否在我需要处理的引擎盖下创建了一个临时对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:41:44.720

> C# 是否在我需要处理的引擎盖下创建了一个临时对象？

是的，任何时候使用`new`运算符，都会创建一个新对象。通常您可以依靠垃圾收集器为您处理此类事情，但 CA2000 会提醒您注意您创建的对象实现了`IDisposable`接口这一事实，因此您应该调用该`Dispose`方法以确保它使用的任何非托管资源得到适当释放。

[正如文档所描述的那样](http://msdn.microsoft.com/en-us/library/ms182289.aspx)，在调用构造函数时像这样嵌套对象创建有点危险，因为如果其中一个对象的构造失败，则无法确保嵌套对象被正确处理。

我不太确定你为什么要开始使用这种模式。类`VirtualDevice`应该单独负责管理它创建的对象的生命周期。该`GpsService.Start()`方法所要做的（或知道！）就是创建一个`VirtualDevice`对象。反过来，该对象应该创建它需要的任何嵌套对象，随后可以确保正确处理这些对象。

# android - 在单个项目中为 android 2.3 和 4.0.3 开发？

> ID：10700327
> 
> 赞同：2
> 
> 时间：2012-05-22T10:36:01.217
> 
> 标签：android, themes

好吧，最近我一直在使用 2.3 模拟器编写应用程序，我主要是在 2.3.7 手机中测试该应用程序，但昨天我将手机更新到 android 4.0.3 并且 UI 看起来很糟糕，事实上，保持“糟糕”的 2.3 用户界面。

现在我试图在两个版本的 android 中获得一个漂亮的应用程序，问题是我不想有 2 个单独的项目来编辑它们，所以我想使用一个项目和 2 个虚拟机不同的版本。

问题是，如果我创建一个以 2.3 为目标的项目，我无法调用 HOLO 主题资源，如果我创建一个 4.0.3 项目，它甚至无法在 android 2.3 中运行，对吧？

所以...我需要做什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:36:48.550

1.  您需要将 targetSDKVersion 设置为 15，minSDKVersion 设置为 10。
2.  您需要为这两个版本创建各种资源文件夹。例如，在“res”文件夹中创建一个文件夹“values-v14”，并为 ICS 定义小部件样式。拥有另一个文件夹“values-v10”并保留 2.3.3 的样式
3.  如果需要，请使用版本限定符为不同版本定义单独的布局。下面的链接会给你更清晰的想法。

[http://developer.android.com/training/basics/supporting-devices/platforms.html](http://developer.android.com/training/basics/supporting-devices/platforms.html)

[http://developer.android.com/training/backward-compatible-ui/index.html](http://developer.android.com/training/backward-compatible-ui/index.html)

# bash - 使用 gawk 解析：如何在 gawk 之外保留一些变量值

> ID：10700328
> 
> 赞同：0
> 
> 时间：2012-05-22T10:36:08.563
> 
> 标签：bash, shell, gawk

我有一个文件 f1.txt，内容为：

```
192.168.100.253:34611  69.171.228.46:80   5   2426   7    901      12      3327
192.168.100.253:34610  69.171.228.46:80   5   1068   6    626      11      1694
192.168.100.253:46808  69.171.224.24:80   4    470   5    563       9      1033 
```

然后，我使用如下 gawk 语句：

```
gawk 'NR==1 {node1 = $1;node2 = $2}' f1.txt
echo "node" $node1 
```

我期待 node1 = 192.168.100.253:34611 和 node2 = 69.171.228.46:80。我想再使用一条 FS 值为 : 的 gawk 语句，以进一步获取我稍后可以在脚本中使用的 ip add 和 port no。但是 node1 和 node2 本身的值不会被存储。这些像 C 中的自动 var 吗？我如何解析它以保留 node1 和 node2 值？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:54:14.077

这些值被“保留”在`gawk`脚本中，但是由于您不打印它们或任何东西，所以您遇到了问题。脚本中的变量`gawk`完全独立于 shell 中的任何变量。当您运行时`gawk`，它是一个单独的进程。您可以将 shell 变量值传递给`gawk`; 您无法`gawk`通过直接赋值将变量值返回给 shell。

有一个`split()`函数`gawk`可用于拆分脚本中的每个字段，`node1`并将拆分字段放入索引为 1 的数组中，但之后您将如何处理这些值？你几乎有义务打印它们：`node2``gawk`

```
array=($(gawk 'NR == 1 {split($1, node1, ":"); split($2, node2, ":");
                        print node1[1], node1[2], node2[1], node2[2]}' f1.txt)) 
```

现在你有一个 shell 数组：

```
echo ${array[*]} 
```

从那里，你可以在 shell 脚本中做你想做的事：

```
node1_ipv4=${array[0]}
node1_port=${array[1]}
node2_ipv4=${array[2]}
node2_port=${array[3]} 
```

* * *

注意：这个答案是明确的`bash`plus `gawk`; 其他外壳或其他变体`awk`可能需要不同的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:58:24.087

对文件运行 gawk 两次，解析出 node1 和 node2：

```
node1=$(gawk 'NR==1 {print $1}' f1.txt)
node2=$(gawk 'NR==1 {print $2}' f1.txt) 
```

然后撬开IP和端口：

```
echo $node1 | gawk -F ':' '{printf("ip: %s port: %d\n", $1, $2)}' 
```

节点2也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T13:58:57.967

```
# One call to gawk to put the two desired nodes into an array
nodes=( $(gawk 'NR==1 {print $1, $2}' f1.txt) )
# nodes=( 192.168.100.253:34611 69.171.228.46:80 )

# Use % to remove the :port suffix from each array element
addresses=( ${nodes[@]%:*} )
# addresses=( 192.168.100.253 69.171.228.46 )

# Use # to remove the address: prefix from each array element
ports=( ${nodes[@]#*:} )
# ports=( 34611 80 )

# Array subscripting
node1_addr=${addresses[0]};   # 192.168.100.253
node2_port=${ports[1]};       # 80 
```

# c# - 用于标记输出 C# 的下拉列表

> ID：10700330
> 
> 赞同：0
> 
> 时间：2012-05-22T10:36:10.450
> 
> 标签：c#, drop-down-menu, visual-web-developer

我想用按钮显示从 DropDownList 输出的不同标签

```
select Item on DropDownList and click button to show output in label 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:43:25.953

```
protected void Button1_Click(object sender, EventArgs e)
{
       Label1.Text = DropDownList1.SelectedValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:37:56.687

把这个写在`button click event`

```
protected void Button1_Click(object sender, EventArgs e) { 
    label.text = ComboBox.SelectedText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:58:24.477

```
protected void Button1_Click(object sender, EventArgs e)
{
    lable1.Text=DropDownList1.SelectedValue.ToString();
} 
```

或者你可以

```
 protected void Button1_Click(object sender, EventArgs e)
   {
       String input=DropDownList1.SelectedIndex >= 0 ? DropDownList1.SelectedItem.ToString() : "";
       lable1.Text=input;
   } 
```

# jquery - 如何知道对象的类型是 jquery 中的复选框？

> ID：10700333
> 
> 赞同：3
> 
> 时间：2012-05-22T10:36:21.620
> 
> 标签：jquery

如何检测对象的类型是“复选框”或其他东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:36:59.997

您可以使用[`is`](http://api.jquery.com/is/)方法：

```
if ($(this).is(":checkbox")) {
    // is checkbox
} else {
    // not checkbox
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:37:28.153

您可以检查其*类型*属性。使用 JQuery：

```
if($('input').attr('type') == 'checkbox') {
   // do if checkbox
} else {
  // do if not checkbox
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T10:38:40.760

```
$(element).attr('type') == 'checkbox' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T10:38:46.470

您可以使用：

```
$("input[type='checkbox']").whatever(); 
```

# asp.net - 在一台机器上创建并在另一台机器上运行的脚本

> ID：10700338
> 
> 赞同：1
> 
> 时间：2012-05-22T10:36:38.657
> 
> 标签：asp.net, jmeter

我已经使用我的机器为应用程序服务器创建了一个脚本，现在我想在其他机器上运行这个脚本，但是当我运行这个脚本时，我收到以下错误：

> 视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。

我怎样才能使用这个脚本，或者我应该在那台机器上创建另一个脚本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:10:38.543

您是否尝试测试 ASP.NET 应用程序？

如果是，那么假设您在测试中错误地处理了 VIEWSTATE：您需要关联请求中的 VIEWSTATE，以便将正确的值发送回服务器。

记录和重放方法在这里不起作用：如果您只是尝试使用脚本中记录的值，那么您可能会遇到问题。您需要做的是从服务器的先前响应中获取 VIEWSTATE 的值，将其剥离，对其进行编码，然后将其发回。

我可以查看链接数量和操作方法：[https](https://stackoverflow.com/a/10650186/993246) ://stackoverflow.com/a/10650186/993246 。

# java - 如何在 Metro 下解析带有 MTOM 附件的入站消息而不提取所有附件数据？

> ID：10700340
> 
> 赞同：6
> 
> 时间：2012-05-22T10:36:46.900
> 
> 标签：java, jax-ws, mtom, xop

使用 JAX-WS-RI 或 Metro，我可以使用 com.sun.xml.ws.api.server.AsyncProvider 接口编写 WebService。

我可以选择获取包括 SOAP 标头在内的整个消息

```
import javax.xml.transform.Source;
import com.sun.xml.ws.api.server.AsyncProvider;
import com.sun.xml.ws.api.server.AsyncProviderCallback;

import javax.xml.ws.ServiceMode;
import javax.xml.ws.WebServiceContext;
import javax.xml.ws.WebServiceProvider;

@ServiceMode(value=Service.Mode.MESSAGE)
@WebServiceProvider()
public class AddNumbersAsynchImpl implements AsyncProvider<Source> {
... 
```

然后我可以写一些东西来解析消息并相应地处理

```
public void invoke(Source source, AsyncProviderCallback<Source> cbak, WebServiceContext ctxt) {
        DOMResult dom = new DOMResult();
        Transformer trans = TransformerFactory.newInstance().newTransformer();
        trans.transform(source, dom);

        XPath xpath = XPathFactory.newInstance().newXPath();
        xpath.setNamespaceContext(new MyNamespaceContext());

        String opName = (String) xpath.evaluate("name(/S:Envelope/S:Body/X:*[1])", dom.getNode(), XPathConstants.STRING);

        if(knownOp(opName)) {
            doOp(opName, dom.getNode(), cbak);
        }
        else {
            doFault("Unknown operation " + opName, cbak);
        }

} 
```

然而，这样做的部分原因是为了使现有的基于 XML 的应用程序适应 SOAP 堆栈。该应用程序为它所接受的消息定义了一套完整的模式，并且很容易生成一个 WSDL 来定义服务。

对于小的 XML 消息，这一切都很好。

但是，如果我希望在一些消息庞大的操作中以更面向流的方式处理 XML，我会遇到两个使用 MTOM 附件的问题。我将我的 Provider 的设置更改如下；

```
import com.sun.xml.ws.api.message.Message;
import javax.xml.ws.soap.MTOM;
import com.sun.xml.ws.developer.StreamingAttachment;
import com.sun.xml.ws.developer.StreamingDataHandler;

ServiceMode(value=Service.Mode.MESSAGE)
@WebServiceProvider()
@StreamingAttachment(parseEagerly=true, memoryThreshold=1000L)
@MTOM(enabled=true, threshold=1000) 
public class AddNumbersAsynchImplMessage implements AsyncProvider<Message> {
... 
```

我将适当的 MTOM 策略添加到我的 WSDL；

```
<definitions
        name="AddNumbersAsynch"
        targetNamespace="http://asynch.duke.example.org"
        xmlns:tns="http://asynch.duke.example.org"
        xmlns="http://schemas.xmlsoap.org/wsdl/"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
        xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata"
        xmlns:wsrm="http://docs.oasis-open.org/ws-rx/wsrmp/200702"
        xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
        xmlns:wsoma="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization"
        xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsp:Policy wsu:Id="AddNumbersAsynch_policy">
            <wsam:Addressing wsp:Optional="false" />
            <wsoma:OptimizedMimeSerialization/>
        </wsp:Policy> 
```

并酌情为该操作声明我的消息模式

```
 <complexType name="sendBulk">
            <sequence>
                <element name="data" type="base64Binary"
                    xmime:expectedContentTypes="application/xml"
                    xmlns:xmime="http://www.w3.org/2005/05/xmlmime"/>
            </sequence>
        </complexType>
        <element name="sendBulk" type="tns:sendBulk"/>

        <complexType name="sendBulkResponse">
            <sequence>
                <element name="return" type="xsd:string" />
            </sequence>
        </complexType>
        <element name="sendBulkResponse" type="tns:sendBulkResponse"/> 
```

适当设置绑定；

```
<binding name="AddNumbersBinding" type="tns:AddNumbersPortType">
<wsp:PolicyReference URI="#AddNumbersAsynch_policy"/>
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document" />
    <operation name="sendBulk">
        <soap:operation soapAction="" />
        <input>
            <soap:body use="literal" />
        </input>
        <output>
            <soap:body use="literal" />
        </output>
    </operation>
</binding> 
```

我生成客户端并修改代码

```
port = new AddNumbersService().getAddNumbersPort(new SyncStartForAsyncFeature(), new MTOMFeature(1000));
  Source data = new StreamSource(new FileInputStream(file));
  String result = port.sendBulk(data); 
```

并且 http 转储显示数据正在以多部分 mime 的形式发送，并在“消息正文”中使用适当的 xop:include 元素

```
---[HTTP request - http://localhost:8080/ProviderTest2/addnumbersAsynchMessage]---
Accept: text/xml, multipart/related
Content-Type: multipart/related;start="<rootpart*daff762b-9651-40aa-ae2f-30d30a3c5e2e@example.jaxws.sun.com>";type="application/xop+xml";boundary="uuid:daff762b-9651-40aa-ae2f-30d30a3c5e2e";start-info="text/xml"
SOAPAction: "http://message.asynch.duke.example.org/AddNumbersPortType/sendBulkRequest"
User-Agent: Metro/2.2 (branches/2.2-7015; 2012-02-20T20:31:25+0000) JAXWS-RI/2.2.6 JAXWS/2.2 svn-revision#unknown
--uuid:daff762b-9651-40aa-ae2f-30d30a3c5e2e
Content-Id: <rootpart*daff762b-9651-40aa-ae2f-30d30a3c5e2e@example.jaxws.sun.com>
Content-Type: application/xop+xml;charset=utf-8;type="text/xml"
Content-Transfer-Encoding: binary

<?xml version='1.0' encoding='UTF-8'?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Header><To xmlns="http://www.w3.org/2005/08/addressing">http://localhost:8080/ProviderTest2/addnumbersAsynchMessage</To><Action xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" S:mustUnderstand="1">http://message.asynch.duke.example.org/AddNumbersPortType/sendBulkRequest</Action><ReplyTo xmlns="http://www.w3.org/2005/08/addressing">
    <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
</ReplyTo><FaultTo xmlns="http://www.w3.org/2005/08/addressing">
    <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
</FaultTo><MessageID xmlns="http://www.w3.org/2005/08/addressing">uuid:406ce4bc-7332-4849-b16b-69cec6ca21ea</MessageID></S:Header><S:Body><sendBulk xmlns="http://message.asynch.duke.example.org"><data><xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:5f88ee1b-0aa1-46ef-bad3-93df9b2aaa02@example.jaxws.sun.com"/></data></sendBulk></S:Body></S:Envelope>
--uuid:daff762b-9651-40aa-ae2f-30d30a3c5e2e
Content-Id: <5f88ee1b-0aa1-46ef-bad3-93df9b2aaa02@example.jaxws.sun.com>
Content-Type: application/xml; charset=UTF-8
Content-Transfer-Encoding: binary

....snip! 
```

在服务器内部，我得到一个附件；

```
public void invoke(Message source, AsyncProviderCallback<Message> cbak, WebServiceContext ctxt) {

        Map<String, DataHandler> attachments = (Map<String, DataHandler>) ctxt.getMessageContext().get(javax.xml.ws.handler.MessageContext.INBOUND_MESSAGE_ATTACHMENTS); 
        for(String attachmentKey: attachments.keySet()) {
            StreamingDataHandler handler = (StreamingDataHandler) attachments.get(attachmentKey);
            System.out.println("Got attachment " + attachmentKey + " of type " + attachments.get(attachmentKey));
        }
        if(attachments.isEmpty()) {
            System.out.println("Got No attachments");
        } 
```

然后我希望顶部解析传入的消息并获取批量附件的上下文 - 例如包含它的元素的名称 - 但不是批量附件本身，YET；

```
XMLStreamWriter sw = new MyXMLStreamWriter();
source.writeTo(sw); 
```

希望附件解析器还没有读取所有输入的 HTTP 流，或者如果它已经将它分块到一个文件中，然后我可以在其中逐块读取它。问题是我找不到一种解析 Message 的方法，它不会将传入的消息转换为附件中的 base64 编码数据。在我得到指示元素开始的 SAX/StaX 事件后，它后面跟着一个字符事件，它是 base64 编码的数据。查看 StreamMessage 的代码，无法“插入”任何 XMLReader 或 XMLStreamReader 等。在 Message 已经绑定到的现有 XMLStreamReader 的“前面”（并不令人惊讶，因为我们正在处理消息）。但是那个 XMLStreamReader 实现是一个 com.sun.xml.ws.encoding.MtomCodec$MtomXMLStreamReaderEx ，它总是' 将一行中的附件解包到内存中。无法对 com.sun.xml.ws.encoding.MtomCodec 类进行参数化，以便它不会首先将事件传递给其内部的 MtomXMLStreamReaderEx 类，该类将内联附件解包。

我尝试将附件读入一个临时文件，然后将消息上下文附件替换为 FileDataSource，但由于 Metro 忽略了这些，因此只会使原始 DataSource 引发 ReadOnce 类型错误。

```
Map<String, DataHandler> attachments = (Map<String, DataHandler>) ctxt.getMessageContext().get(javax.xml.ws.handler.MessageContext.INBOUND_MESSAGE_ATTACHMENTS);
            HashMap<String, DataHandler> clonedAttachments = new HashMap<String, DataHandler>(attachments);
            for(String attachmentKey: attachments.keySet()) {
                StreamingDataHandler handler = (StreamingDataHandler) attachments.get(attachmentKey);
                File tempFile = File.createTempFile("Attachment" + attachmentKey, ".xmlb64", new File("C:\\Users\\Administrator\\workspaceTool1\\TomcatWorkingDir"));
                handler.moveTo(tempFile);
                FileDataSource newSource = new FileDataSource(tempFile);
                clonedAttachments.put(attachmentKey, new DataHandler(newSource));
                System.out.println("Got attachment " + attachmentKey + " of type " + attachments.get(attachmentKey));
            }
            if(attachments.isEmpty()) {
                System.out.println("Got No attachments");
            }
            else {
                ctxt.getMessageContext().put(javax.xml.ws.handler.MessageContext.INBOUND_MESSAGE_ATTACHMENTS, clonedAttachments);
            } 
```

我还尝试通过将注释设置为禁用来关闭提供程序中的 MTOM；

```
@MTOM(enabled=false) 
```

然后删除它，然后删除 StreamingAttachment 注释无济于事。我还在 sun-jaxws.xml 文件中为它的端点元素设置了 enable-mtom="false" 属性，同样无济于事；似乎 xop:Include 解析是硬连线的。我不想更改 wsdl，因为我确实希望客户尽可能使用 MTOM。（但请参阅下面的我的 swaRef 答案）

如果我使用 swaRef，我可以让 Metro 做我想做的事，但我的理解是 MTOM 是获得支持的协议？使用 swaRef 我必须编辑 WSDL ；

```
<types>

        <xsd:schema
            xmlns="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://swaRef.asynch.duke.example.org"
            elementFormDefault="qualified">

        <xsd:import namespace="http://ws-i.org/profiles/basic/1.1/xsd"  
                        schemaLocation="http://www.ws-i.org/profiles/basic/1.1/swaref.xsd"/>

            <complexType name="sendBulk">
                <sequence>
                    <element name="data" type="wsi:swaRef"
                        xmlns:wsi="http://ws-i.org/profiles/basic/1.1/xsd"/>
                </sequence>
            </complexType>
            <element name="sendBulk" type="tns:sendBulk"/> 
```

我还必须生成一个新客户端并以不同的方式调用 sendBulk 方法；

```
FileDataSource newSource = new FileDataSource(file);
DataHandler data = new DataHandler(newSource);
String result = port.sendBulk(data); 
```

但是现在当我解析数据元素时，我得到了相应的 cid，然后我可以根据需要使用它来检索附件；

```
DataHandler handler = attachments.get(dataText.substring("cid:".length()));
InputStream input = handler.getInputStream(); 
```

因此，对于 MTOM 和 Metro，尽管附件可能还没有被读取到我解析数据元素的程度，或者确实以块的形式有效地流式传输到临时文件，但我无法读取输入消息的“其余部分”没有将整个依恋读入记忆中，这似乎是自我挫败？除了倾倒 Metro - 建议重新：Axis，欢迎 CXF - 有没有人发现这个问题的任何方法？

记录[了一个功能请求](http://java.net/jira/browse/JAX_WS-1070)。

# c# - 在 LINQ to SQL 请求中“通过文字”进行研究

> ID：10700342
> 
> 赞同：1
> 
> 时间：2012-05-22T10:36:56.597
> 
> 标签：c#, linq-to-sql

我面临一个关于我需要通过请求获得的结果的问题。

这就是我现在使用的：

```
v = v.Where(i => i.Intitule.Contains(Intitule)); 
```

Intitule 是一个字符串，包含用户在文本框中写入的内容。

**例如 ：**

如果 intitule 包含以下文本：“这是一条评论”

如果使用这些键进行研究：“这是”

它完美地工作

但是，如果我使用“此评论”进行研究

它不再工作了......

基本上，我需要对每个单词进行研究......

我希望我足够清楚。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:41:36.187

使用[`SqlMethods.Like`](http://msdn.microsoft.com/en-us/library/bb355235.aspx)：

```
Intitule = "%" + String.Join("%", Intitule.Split(' ')) + "%";
v = v.Where(i => SqlMethods.Like(i.Intitule,Intitule)); 
```

# c# - 在 MEF 中正确使用 [Import] 属性

> ID：10700344
> 
> 赞同：8
> 
> 时间：2012-05-22T10:37:06.010
> 
> 标签：c#, asp.net-mvc-3, model-view-controller, mef, extensibility

我正在学习 MEF，我想创建一个简单的示例（应用程序）来看看它是如何工作的。于是我想到了一个简单的翻译器。我创建了一个包含四个项目（DLL 文件）的解决方案：

合同
Web
BingTranslator
GoogleTranslator

**合同**包含`ITranslate`接口。顾名思义，它只包含合约（接口），因此出口商和进口商可以使用它。

```
public interface ITranslator
{
    string Translate(string text);
} 
```

**BingTranslator**和**GoogleTranslator**都是该合同的出口商。他们都执行此合同并提供（导出）不同的翻译服务（一个来自 Bing，另一个来自 Google）。

```
[Export(typeof(ITranslator))]
public class GoogleTranslator: ITranslator
{
    public string Translate(string text)
    {
        // Here, I would connect to Google translate and do the work.
        return "Translated by Google Translator";
    }
} 
```

是`BingTranslator`：

```
[Export(typeof(ITranslator))]
public class BingTranslator : ITranslator
{
    public string Translate(string text)
    {
        return "Translated by Bing";
    }
} 
```

现在，在我的**Web**项目中，我只想从用户那里获取文本，使用其中一位翻译器（Bing 和 Google）进行翻译，然后将结果返回给用户。因此，在我的**Web**应用程序中，我依赖于翻译器。因此，我以这种方式创建了一个控制器：

```
public class GeneralController : Controller
{
    [Import]
    public ITranslator Translator { get; set; }

    public JsonResult Translate(string text)
    {
        return Json(new
        {
            source = text,
            translation = Translator.Translate(text)
        });
    }
} 
```

拼图的最后一块应该是将这些组件（部分）粘合在一起（从较小的部分组成整首歌曲）。因此，在`Application_Start`Web**项目**中，我有：

```
 var parts = new AggregateCatalog
            (
                new DirectoryCatalog(Server.MapPath("/parts")), 
                new DirectoryCatalog(Server.MapPath("/bin"))
            );
        var composer = new CompositionContainer(parts);
        composer.ComposeParts(); 
```

其中`/parts`是我放置*GoogleTranslator.dll*和*BingTranslator.dll*文件的文件夹（导出器位于这些文件中），并且在该`/bin`文件夹中我只有包含导入器的*Web.dll文件。*但是，我的问题是，MEF 没有使用所需的翻译器填充`Translator`属性。`GeneralController`我在这个网站上阅读了几乎所有与 MEF 相关的问题，但我无法弄清楚我的示例有什么问题。谁能告诉我我在这里错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T11:00:10.453

好的，你需要做的是（没有规定性能，这只是为了看到它工作）

```
public class GeneralController : Controller
{
    [Import]
    public ITranslator Translator { get; set; }

    public JsonResult Translate(string text)
    {
        var container = new CompositionContainer(
        new DirectoryCatalog(Path.Combine(HttpRuntime.BinDirectory, "Plugins")));
        CompositionBatch compositionBatch = new CompositionBatch();
        compositionBatch.AddPart(this);
        Container.Compose(compositionBatch);

        return Json(new
        {
            source = text,
            translation = Translator.Translate(text)
        });
    }
} 
```

* * *

我不是 MEF 方面的专家，坦率地说，我使用它的目的是什么，它对我没有多大作用，因为我只用它来加载 DLL，然后我有一个依赖注入的入口点，从那时起我使用 DI容器而不是 MEF。

MEF 势在必行——据我所知。在您的情况下，您需要主动编写您需要 MEFed 的内容，即*您的控制器*。**所以你的控制器工厂需要组成你的控制器实例。**

由于我很少在我的 MVC 应用程序中使用 MEFed 组件，因此我为那些需要 MEF 的操作设置了一个过滤器（而不是在我的控制器工厂中使用 MEF 处理我的所有控制器）：

```
public class InitialisePluginsAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        CompositionBatch compositionBatch = new CompositionBatch();
        compositionBatch.AddPart(filterContext.Controller);
        UniversalCompositionContainer.Current.Container.Compose(
            compositionBatch);
        base.OnActionExecuting(filterContext);
    }
} 
```

这`UniversalCompositionContainer.Current.Container`是一个使用我的目录目录初始化的单例容器。

* * *

# 我个人对 MEF 的看法

MEF，虽然不是 DI 框架，但它做了很多。因此，与 DI 有很大的重叠，**如果您已经使用 DI 框架，它们必然会发生冲突**。

MEF 在运行时加载 DLL 方面非常强大，尤其是当您拥有 WPF 应用程序时，您可能正在加载/卸载插件并期望其他一切都按原样工作，添加/删除功能。

对于 Web 应用程序，这没有多大意义，因为您真的不应该在工作的 Web 应用程序中删除 DLL。因此，它的用途非常有限。

我将在 ASP.NET MVC 中写一篇关于插件的文章，并将使用链接更新这篇文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T15:10:15.020

MEF 只会在它自己构建的对象上填充导入。在 ASP.NET MVC 的情况下，创建控制器对象的是 ASP.NET。它不会识别该`[Import]`属性，因此您会看到缺少依赖项。

要让 MEF 构造控制器，您必须执行以下操作：

1.  用 标记控制器类本身`[Export]`。
2.  实现包装 MEF 容器的[IDependencyResolver实现。](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver%28v=vs.98%29.aspx)您可以通过向 MEF 容器询问匹配的导出来实现[GetService 。](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver.getservice%28v=vs.98%29.aspx)您可以使用请求的类型生成 MEF 合同字符串`AttributedModelServices.GetContractName`。
3.  通过调用[DependencyResolver.SetResolver](http://msdn.microsoft.com/en-us/library/gg416564%28v=vs.98%29.aspx)来注册该解析器`Application_Start`。

您可能还需要标记大部分导出的部分，`[PartCreationPolicy(CreationPolicy.NonShared)]`以防止在多个请求中同时重用同一个实例。否则，保存在您的 MEF 部件中的任何状态都将受到竞争条件的影响。

**编辑**：这篇[博](http://www.bryanavery.co.uk/post/2012/03/12/Using-MEF-in-MVC-3.aspx)文有一个很好的例子来说明整个过程。

**edit2**：可能还有另一个问题。MEF 容器将保存`IDisposable`对其创建的任何对象的引用，以便在释放容器本身时释放这些对象。但是，这不适用于具有“每个请求”生命周期的对象！对于任何实现`IDisposable`.

使用像[AutoFac这样的替代方案可能更容易，它有一个用于](http://code.google.com/p/autofac/)[ASP.NET MVC 集成](http://code.google.com/p/autofac/wiki/Mvc3Integration)的 NuGet 包，并且支持[每个请求的生命周期](http://code.google.com/p/autofac/wiki/InstanceScope)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T13:31:57.407

正如@Aliostad 所提到的，您确实需要在控制器创建期间/之后运行组合初始化代码才能使其工作 - 仅将其放在 global.asax 文件中是行不通的。

但是，您还需要使用`[ImportMany]`而不是 just `[Import]`，因为在您的示例中，您可以使用您发现的二进制文件中的任意数量的 ITranslator 实现。关键是，如果您有很多`ITranslator`，但要将它们导入单个实例，您可能会从 MEF 获得异常，因为它不知道您真正想要哪种实现。

因此，您可以使用：

```
[ImportMany]
public IEnumerable<ITranslator> Translator { get; set; } 
```

快速示例：

[http://dotnetbyexample.blogspot.co.uk/2010/04/very-basic-mef-sample-using-importmany.html](http://dotnetbyexample.blogspot.co.uk/2010/04/very-basic-mef-sample-using-importmany.html)

# android - Android：在后台堆栈中保留一个活动的多个实例

> ID：10700346
> 
> 赞同：4
> 
> 时间：2012-05-22T10:37:15.237
> 
> 标签：android, android-activity, android-ui, android-lifecycle

我有一个`Activity A`我开始的`Activity B`。在`Activity B`我想启动一个新的 B 实例（具有不同的内容），以便我可以导航回 B 的不同实例。例如：

> A -> B（内容 x）-> B'（内容 y）-back-> B（内容 x）

**我的问题：**

对于示例导航路径：

> A -> B -> B' -> B''

当按回 B'' 时，我按预期返回 A 而不是 B'。android 不是在后台堆栈中存储活动的实例，还是我必须做一些事情来告诉 android 保存每个实例，以便我可以在它们之间导航？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:50:11.027

您应该阅读 Google 的[Tasks and Back Stack](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)文档。

# c# - BackgroundWorker 从外部类报告进度？

> ID：10700348
> 
> 赞同：5
> 
> 时间：2012-05-22T10:37:19.780
> 
> 标签：c#, .net, winforms, backgroundworker

我有一个工作解决方案，可以将进度和文本报告到进度条和应用程序主窗体上的标签。我现在已经将我的工作方法移动到一个类中，以便可以跨多种形式访问它们等。

worker 方法中`BW.ReportProgress()`包含将进度和文本推送回主窗体中的 BackgroundWorker 的语句。

为了更好地了解这里是文件布局：

`MainScreen.cs`

```
List repSelected = new List();
XMLandRar xXMLandRar = new XMLandRar();

private void Rarbtn_Click(object sender, EventArgs e)
        {
            GetReps();

            //Run worker
            if (!CreateRarBW.IsBusy)
            {
                CreateRarBW.RunWorkerAsync();
            }
        }

//Worker
private void CreateRarBW_DoWork(object sender, DoWorkEventArgs e)
{
    xXMLandRar.RarFiles(repSelected);
}

//Progress reporting
private void CreateRarBW_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progBar.Value = e.ProgressPercentage;
    Statuslbl.Text = e.UserState.ToString();
} 
```

然后我新创建的包含所有工作方法的类，并将进度推送到主窗体。

`XMLandRar.cs`

```
public class XMLandRar
{
    public void RarFiles(List repSelected)
    {
        int step = 100 / repSelected.Count();
        int i = 0;
        //Iterate through list and run rar for each
        foreach (string rep in repSelected)
        {
            CreateRarBW.ReportProgress(i, "Raring files for " + rep);
            DirectoryExists(rep);
            ProcessRunner(rep);
            i += step;
            CreateRarBW.ReportProgress(i, "Raring files for " + rep);
        }
    }
}
```

我遇到的问题是，在`XMLandRar`类中 CreateRarBW 无法识别（显然）-如何`ReportProgress`在应用程序的主屏幕中调用 BW？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T11:14:00.750

在您的班级中创建一个`XMLandRar`您可以订阅的活动。

这样`XMLandRar`类就不需要知道或关心 UI 或进度条，它只关心是否有人愿意听就发送消息。并且还可以有多个订阅者（假设您想向后台工作人员和日志报告，也许）

例子：

```
private void Rarbtn_Click(object sender, EventArgs e)
{
    GetReps();

    //Run worker
    if (!CreateRarBW.IsBusy)
    {
        // This should be done once, maybe in the contructor. Bind to new event.
        xXMLandRar.ReportProgress += new EventHandler<XMLandRar.ProgressArgs>(xXMLandRar_ReportProgress);

        CreateRarBW.RunWorkerAsync();
    }
}

protected void xXMLandRar_ReportProgress(object sender, XMLandRar.ProgressArgs e)
{
    // Call the UI backgroundworker
    CreateRarBW.ReportProgress(e.Percentage, e.Message);
}

public class XMLandRar
{
    // Event handler to bind to for reporting progress
    public EventHandler<ProgressArgs> ReportProgress;

    // Eventargs to contain information to send to the subscriber
    public class ProgressArgs : EventArgs
    {
        public int Percentage { get; set; }
        public string Message { get; set; }
    }

    public void RarFiles(List repSelected)
    {
        int step = 100 / repSelected.Count();
        int i = 0;
        //Iterate through list and run rar for each
        foreach (string rep in repSelected)
        {
            // Report progress if somebody is listening (subscribed)
            if (ReportProgress != null)
            {
                ReportProgress(this, new ProgressArgs { Percentage = i, Message = "Raring files for " + rep });
            }

            DirectoryExists(rep);
            ProcessRunner(rep);
            i += step;

            // Report progress if somebody is listening (subscribed)
            if (ReportProgress != null)
            {
                ReportProgress(this, new ProgressArgs { Percentage = i, Message = "Raring files for " + rep });
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T10:42:18.360

回调中的`sender`对象是调用此回调`DoWork`的实例。`BackgroundWorker`

这可以使用实例并将其添加到您的新`XMLandRar`类中。

```
private void CreateRarBW_DoWork(object sender, DoWorkEventArgs e)
{
    var worker = sender as BackgroundWorker.
    xXMLandRar.RarFiles(repSelected, worker);
} 
```

`XMLandRar.cs`

```
public class XMLandRar
{
    public void RarFiles(List repSelected, BackgroundWorker worker)
    {
    // ...
    }
} 
```

**或者**您将`BackgroundWorker`实例设置为`XMLandRar`.

```
public class XMLandRar
{
    protected BackgroundWorker mWorker;

    public XMLandRar(BackgroundWorker worker) {
        mWorker = BackgroundWorker;
    }

    public void RarFiles(List repSelected)
    {
        // Do something with {mWorker}
    }
} 
```

**或者**如评论中所述，使用`XMLandRar`类中的事件。

`XMLandRar.cs`

```
public class XmlandRarCompletedEventArgs : EventArgs
{
    public readonly bool Finished;
    public readonly bool Canceled;

    public XmlandRarCompletedEventArgs(bool finished)
    {
        Finished = finished;
        Canceled = !finished;
    }    

}public class OnXmlandRarUpdateEventArgs : EventArgs
{
    public readonly int Percentage;
    public readonly string Message;

    public XmlandRarCompletedEventArgs(int perc) :
        this(perc, "") {
    }   

    public XmlandRarCompletedEventArgs(int perc, string message)
    {
        Percentage = perc;
        Message = message;
    }    

}

public delegate void OnXmlandRarDoWorkHandler(object o);
public delegate void OnXmlandRarUpdateHandler(object o, OnXmlandRarUpdateEventArgs args);
public delegate void OnXmlandRarCompleteHandler(object o, XmlandRarCompletedEventArgs args);

public class XMLandRar
{
    public event OnXmlandRarDoWorkHandler OnDoWork;
    public event OnXmlandRarUpdateHandler OnUpdate;
    public event OnXmlandRarCompletedHandler OnComplete;

    public void RarFiles(List repSelected)
    {
        TriggerDoWork();

        int step = 100 / repSelected.Count();
        int i = 0;
        //Iterate through list and run rar for each
        foreach (string rep in repSelected)
        {
            TriggerUpdate(i, "Raring files for " + rep);
            DirectoryExists(rep);
            ProcessRunner(rep);
            i += step;
            TriggerUpdate(i, "Raring files for " + rep);
        }

        TriggerComplete(true);
    }

    private void TriggerDoWork() 
    {
        if (OnDoWork != null) {
            OnDoWork(this);
        }
    }

    private void TriggerUpdate(perc) {
    }
        if (OnUpdate != null) {
            OnUpdate(this, new OnXmlandRarUpdateEventArgs(perc));
        }

    private void TriggerUpdate(perc, string message) 
    {
        if (OnUpdate != null) {
            OnUpdate(this, new OnXmlandRarUpdateEventArgs(perc, message));
        }
    }

    private void TriggerComplete(bool finished)
    {
        if (OnComplete != null) {
            OnComplete(this, new XmlandRarCompletedEventArgs(finished));
        }
    }
} 
```

**用法：**

```
private void CreateRarBW_DoWork(object sender, DoWorkEventArgs e)
{
    var worker = sender as BackgroundWorker;
    // Attach events to class
    xXMLandRar.OnDoWork += delegate(object o) {
        // ...
    };
    xXMLandRar.OnUpdate += delegate(object o, OnXmlandRarUpdateEventArgs args) {
        // ...
    };
    xXMLandRar.OnComplete += delegate(object o, XmlandRarCompletedEventArgs args) {
        // ...
    };
    xXMLandRar.RarFiles(repSelected, worker);
} 
```

希望没有错别字，因为我在办公室。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-07T23:36:57.323

我已经修复了提交的代码中的错误并清理了它......这是一个工作示例，可以帮助那些可能无法理解代码的人，因为它已经被破坏了......虽然我想说的是代码在清理和增强后的意图和功能非常好。

这是工作代码，可以让您在项目中开始使用 backGroundWorker 线程来满足您的任何需求。

只需修改此方法 -

```
 public void RarFiles(List<string> repSelected) 
```

做任何你需要的工作。您还必须修改您计划使用的参数。即您可能需要一个 DataTable 或一些自定义对象...您可以修改

```
 public class OnXmlandRarUpdateEventArgs : EventArgs 
```

满足您的需求..当您收到回调时..您可以使用对这些项目所做的更改来更新您的主 UI 表单..

你可能需要做一些调整..但你明白我的意思..

这是表单代码.. 不要忘记在表单上创建一个按钮...

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace ThreadSample
    {
        public partial class Form1 : Form
        {
            List<string> repSelected = new List<string>();
            XMLandRar xXMLandRar = new XMLandRar();
            BackgroundWorker CreateRarBW = new BackgroundWorker();
            public Form1()
            {
                InitializeComponent();
                repSelected = new List<string> { "asdf", "asdfsd", "h;ljj" };
                CreateRarBW.DoWork += new DoWorkEventHandler(CreateRarBW_DoWork);
            }

            private void Rarbtn_Click(object sender, EventArgs e)
            {
                //GetReps();

                //Run worker
                if (!CreateRarBW.IsBusy)
                {
                    // This should be done once, maybe in the contructor. Bind to new event.
                    xXMLandRar.ReportProgress += new EventHandler<XMLandRar.ProgressArgs>(xXMLandRar_ReportProgress);

                    CreateRarBW.RunWorkerAsync();
                }
            }

            protected void xXMLandRar_ReportProgress(object sender, XMLandRar.ProgressArgs e)
            {
                // Call the UI backgroundworker
                CreateRarBW.ReportProgress(e.Percentage, e.Message);
            }

            //private void CreateRarBW_DoWork(object sender, DoWorkEventArgs e)
            //{
            //    var worker = sender as BackgroundWorker;
            //    xXMLandRar.RarFiles(repSelected, worker);
            //}

            private void CreateRarBW_DoWork(object sender, DoWorkEventArgs e)
            {
                var worker = sender as BackgroundWorker;
                // Attach events to class
                xXMLandRar.OnDoWork += delegate(object o)
                {
                    // ...
                    MessageBox.Show("Hey ... Something is going on over there in the classLib .. " + o);
                };
                xXMLandRar.OnUpdate += delegate(object o, OnXmlandRarUpdateEventArgs args)
                {
                    // ...
                    //foreach (object oo in args)
                    {
                        MessageBox.Show("Hey ... Something is going on over there in the classLib .. Message is " + args.Message + " and Percentage is " + args.Percentage);
                    }
                };
                xXMLandRar.OnComplete += delegate(object o, XmlandRarCompletedEventArgs args)
                {
                    MessageBox.Show("Hey ... Something is going on over there in the classLib .. Canceled is " + args.Canceled + " and Finished is " + args.Finished);
                    // ...
                };
                xXMLandRar.RarFiles(repSelected);//, worker);
            }
        }
    } 
```

这是类代码。您可以在当前项目中创建一个类...请记住 CreateRarBW 对象是一个 BackGroundWorker 实例...（上面没有包含...）

```
 using System;
    using System.Collections.Generic;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.IO;
    using System.Diagnostics;
    using System.Threading;

    namespace ThreadSample
    {
        public class XmlandRarCompletedEventArgs : EventArgs
        {
            public readonly bool Finished;
            public readonly bool Canceled;

            public XmlandRarCompletedEventArgs(bool finished)
            {
                Finished = finished;
                Canceled = !finished;
            }
        }

        public class OnXmlandRarUpdateEventArgs : EventArgs
        {
            public readonly int Percentage;
            public readonly string Message;

            public OnXmlandRarUpdateEventArgs(int perc) : this(perc, "")
            {

            }   

            public OnXmlandRarUpdateEventArgs(int perc, string message)
            {
                Percentage = perc;
                Message = message;
            }

        }

        public delegate void OnXmlandRarDoWorkHandler(object o);
        public delegate void OnXmlandRarUpdateHandler(object o, OnXmlandRarUpdateEventArgs args);
        public delegate void OnXmlandRarCompleteHandler(object o, XmlandRarCompletedEventArgs args);

        public class XMLandRar      // : BackgroundWorker
        {

            // Event handler to bind to for reporting progress
            public EventHandler<ProgressArgs> ReportProgress;

            // Eventargs to contain information to send to the subscriber
            public class ProgressArgs : EventArgs
            {
                public int Percentage { get; set; }
                public string Message { get; set; }
            }

            public event OnXmlandRarDoWorkHandler OnDoWork;
            public event OnXmlandRarUpdateHandler OnUpdate;
            public event OnXmlandRarCompleteHandler OnComplete;

            public void RarFiles(List<string> repSelected)
            {
                TriggerDoWork();

                int step = 100 / repSelected.Count();
                int i = 0;
                //Iterate through list and run rar for each
                foreach (string rep in repSelected)
                {
                    TriggerUpdate(i, "Raring files for " + rep);
                    //DirectoryExists(rep);
                    //ProcessRunner(rep);
                    i += step;
                    TriggerUpdate(i, "Raring files for " + rep);
                }

                TriggerComplete(true);
            }

            private void TriggerDoWork()
            {
                if (OnDoWork != null)
                {
                    OnDoWork(this);
                }
            }

            private void TriggerUpdate(int perc)
            {

                if (OnUpdate != null)
                {
                    OnUpdate(this, new OnXmlandRarUpdateEventArgs(perc));
                }
            }

            private void TriggerUpdate(int perc, string message)
            {
                if (OnUpdate != null)
                {
                    OnUpdate(this, new OnXmlandRarUpdateEventArgs(perc, message));
                }
            }

            private void TriggerComplete(bool finished)
            {
                if (OnComplete != null)
                {
                    OnComplete(this, new XmlandRarCompletedEventArgs(finished));
                }
            }
        }

    } 
```

# php - 如何在wordpress的用户帖子中添加上传字段

> ID：10700350
> 
> 赞同：0
> 
> 时间：2012-05-22T10:37:25.923
> 
> 标签：php, wordpress

我想在用户帖子中添加上传字段，我的想法是为每个用户帖子提供 PDF 上传功能。因此用户可以发布带有一些描述的 PDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:43:02.793

检查此链接以从客户端上传图像，如果您想从客户端上传 pdf 文件，您必须对此插件进行一些更改。

[http://wordpress.org/extend/plugins/nextgen-public-uploader](http://wordpress.org/extend/plugins/nextgen-public-uploader)

# php - PHP 作为模板引擎：限制功能并确保安全

> ID：10700353
> 
> 赞同：0
> 
> 时间：2012-05-22T10:37:32.337
> 
> 标签：php, security, model-view-controller, templates

我在 MVC 风格的应用程序中使用 PHP 作为模板引擎。但是，我们现在需要通过 Web 前端编辑模板。有没有办法让这个安全可靠，所以有权编辑模板的用户没有能力在服务器上运行危险代码？或者，是否应该放弃使用 PHP 作为模板引擎，而使用许多其他模板引擎之一，例如 Smarty？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:46:53.460

如果您真的想确保它的安全：不要将 PHP 用于您的模板。没有干净的方法来处理与您的应用程序代码不同的这些模板。

实际上，您正在寻找的是像 Smarty 或 FLOW3 的 FLUID（我更喜欢后者）这样的模板引擎，因为它们正是为这种需求（以及其他需求）而构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:51:27.820

我强烈推荐[树枝](http://twig.sensiolabs.org/)。Twig 非常好，因为它非常模块化和可扩展，因此您最终会得到一个模板引擎，它既简单又复杂。

在生产中打开缓存也非常快。它也非常安全，因为它会清理和过滤向用户显示的内容，因此编辑模板的人不能执行任意 PHP 代码。

# javascript - 适用于 Android 平板电脑的 JavaScript、CSS、HTML5 编辑器

> ID：10700354
> 
> 赞同：1
> 
> 时间：2012-05-22T10:37:34.683
> 
> 标签：javascript, android, html, css, editor

任何人都可以为 Andorid 平板电脑推荐很酷的 JavaScript、CSS、HTML5 编辑器吗？

iPad 有以下很酷的应用程序

[http://panic.com/dietcoda/](http://panic.com/dietcoda/)

不过我还是更喜欢 Android 平台，并为它寻找很酷的软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:47:51.987

我使用 DroidEdit Pro。在我的摩托罗拉 Xoom 上完美运行。

链接：[https ://play.google.com/store/apps/details?id=com.aor.droidedit.pro&feature=search_result](https://play.google.com/store/apps/details?id=com.aor.droidedit.pro&feature=search_result)

有一个免费版本，您也可以先试用。链接：[https](https://play.google.com/store/apps/details?id=com.aor.droidedit&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hb3IuZHJvaWRlZGl0Il0) ://play.google.com/store/apps/details?id=com.aor.droidedit&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hb3IuZHJvaWRlZGl0Il0 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T04:57:32.953

你可以试试 anWriter 编辑器。支持 HTML、CSS 和 JavaScript 语法高亮和自动补全（以及完整版的 PHP 和 SQL）。完全支持硬件键盘。

[Google Play 上的免费版（有添加）](https://play.google.com/store/apps/details?id=com.ansm.anwriter)

[Google Play 上的完整版](https://play.google.com/store/apps/details?id=com.ansm.anwriter.pro)

# php - 如何使用我的 Wordpress 主题中的评论数覆盖 disqus 评论数

> ID：10700357
> 
> 赞同：1
> 
> 时间：2012-05-22T10:37:54.663
> 
> 标签：php, wordpress, wordpress-theming, disqus

我的第一个问题在这里！我想将主题左侧的disqus“1 Comentario y 0 Reacciones”覆盖为评论计数。它应该看起来像[所附的图像](http://i728.photobucket.com/albums/ww290/itos/Workeet/workeet-disqus-comments.jpg)。

我已经在数据库中搜索了类似的问题，但没有运气。

如果您想签出，这是[我在测试服务器中的博客。](http://s4401.at2.pressdns.com/)

我试图将此代码放在我的主题的functions.php 中，这样Disqus 就不会覆盖来自主题的注释。

```
// Disqus: Prevent from replacing comment count
remove_filter('comments_number', 'dsq_comments_text');
remove_filter('get_comments_number', 'dsq_comments_number');
remove_action('loop_end', 'dsq_loop_end'); 
```

还有 Disqus 插件的高级选项中的输出 Javascript 选项，但没有运气。希望有人帮助我（我欠你一杯啤酒！）

**更新**：显然问题发生在主页、类别、搜索页面中，但不在单个帖子中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:15:01.660

好的，在查看@dInGd0nG 帖子[链接](http://www.wpbeginner.com/wp-themes/how-to-prevent-disqus-from-overriding-your-wordpress-comment-count/)后，我找到了解决此问题的**简单方法。**只需转到您的 wordpress 主题的 functions.php 并插入以下代码段：

```
// Disqus: Prevent from replacing comment count
remove_filter('comments_number', 'dsq_comments_text');
remove_filter('get_comments_number', 'dsq_comments_number');
remove_action('loop_end', 'dsq_loop_end'); 
```

就这样。这比从 Disqus 插件转到高级选项卡并在页脚中输出 Javascript 更好，因为这会使其变慢。

# php - 有效地对分隔的数字字符串进行排序，并重新排列相关的分隔字符串以匹配排序

> ID：10700360
> 
> 赞同：1
> 
> 时间：2012-05-22T10:37:57.703
> 
> 标签：php, performance, sorting, delimiter

我已经从长期的组合查询和文件读取过程中生成了三个字符串，每个字符串都相互关联。

* * *

**例子：**

```
$versions = "1 2 5 4 10 6 8 7 3 9";
$weights = "50.2 60.5 35 10 15.98 60 50 60.1 70 75";
$ids = "512 318 112 326 155 191 977 961 943 441"; 
```

我想根据版本号按升序对它们进行排序。

**示例结果：**

```
$versions = "1 2 3 4 5 6 7 8 9 10";
$weights = "50.2 60.5 70 10 35 60 60.1 50 75 15.98";
$ids = "512 318 943 326 112 191 961 977 441 155"; 
```

* * *

我的问题是：有没有比我现在做的更有效的方法？
请注意，这些字符串可能会变得很大，到目前为止我见过的最大的是大约 600 个不同的版本

我执行以下操作：

*   爆炸字符串
*   复制以版本号为键的数组
*   按键排序数组
*   内爆字符串

这是代码和[一个活生生的例子](http://codepad.viper-7.com/L2oFHk)：

```
$versions = "1 2 5 4 10 6 8 7 3 9";
$weights = "50.2 60.5 35 10 15.98 60 50 60.1 70 75";
$ids = "512 318 112 326 155 191 977 961 943 441";

$a_versions = explode(" ", $versions);
$a_weights = explode(" ", $weights);
$a_ids = explode(" ", $ids);

$s_versions = array();
$s_weights = array();
$s_ids = array();

//set keys to correspond to version number
foreach($a_versions as $key => $ver){
    $s_versions[$ver] = $a_versions[$key];
    $s_weights[$ver] = $a_weights[$key];
    $s_ids[$ver] = $a_ids[$key];
}

//sort according to keys
ksort($s_versions, SORT_NUMERIC);
ksort($s_weights, SORT_NUMERIC);
ksort($s_ids, SORT_NUMERIC);

//implode back
$versions = implode(" ", $s_versions); 
$weights = implode(" ", $s_weights); 
$ids = implode(" ", $s_ids); 

echo "
    <pre>
        $versions
        $weights
        $ids
    </pre>
";

/*==========
Results
    1 2 3 4 5 6 7 8 9 10
    50.2 60.5 70 10 35 60 60.1 50 75 15.98
    512 318 943 326 112 191 961 977 441 155
==========*/ 
```

* * *

性能提升#1：

> 用 array_combine 替换 foreach 循环可能会带来一点性能提升。– 斯文斯

确实如此，根据[一个简单的单元测试](http://codepad.viper-7.com/IktTtR)，它快了大约 11-15%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:36:25.023

This is the best I could find:

```
$versions = array_flip(explode(' ', $versions));
$weights = explode(' ', $weights);
$ids = explode(' ', $ids);

ksort($versions, SORT_NUMERIC);
foreach ($versions as $version => $idx) {
  $result[0][] = $version;
  $result[1][] = $weights[$idx];
  $result[2][] = $ids[$idx];
}

return array(
  implode(' ', $result[0]),
  implode(' ', $result[1]),
  implode(' ', $result[2]),
); 
```

See: [http://codepad.viper-7.com/flcvnO](http://codepad.viper-7.com/flcvnO) for a comparison of what I tested (including you initial code and the one with array_combine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:46:31.400

这是另一种方法。这是最简单的例子，没有键：

```
$versions = "1 2 5 4 10 6 8 7 3 9";
$weights = "50.2 60.5 35 10 15.98 60 50 60.1 70 75";
$ids = "512 318 112 326 155 191 977 961 943 441";

$a_versions = explode(" ", $versions);
$a_weights = explode(" ", $weights);
$a_ids =  explode(" ", $ids);

$version_weight_id = array_map(null, $a_versions, $a_weights, $a_ids);

print_r($version_weight_id); 
```

如果您想要更多键控，则必须具有 map 功能，如下所示：

```
function version_weight_id($v, $w, $id) {

    return array('version' => $v, 'weight' => $w, 'id' => $id);

}

$versions = "1 2 5 4 10 6 8 7 3 9";
$weights = "50.2 60.5 35 10 15.98 60 50 60.1 70 75";
$ids = "512 318 112 326 155 191 977 961 943 441";

$a_versions = explode(" ", $versions);
$a_weights = explode(" ", $weights);
$a_ids =  explode(" ", $ids);

$version_weight_id = array_map('version_weight_id', $a_versions, $a_weights, $a_ids);

array_multisort($version_weight_id, $a_versions);

print_r($version_weight_id); 
```

### 编辑：

这是另一种不需要地图功能的方法：

```
$versions = "1 2 5 4 10 6 8 7 3 9";
$weights = "50.2 60.5 35 10 15.98 60 50 60.1 70 75";
$ids = "512 318 112 326 155 191 977 961 943 441";

$a_versions = explode(" ", $versions);
$a_weights = explode(" ", $weights);
$a_ids =  explode(" ", $ids);

$weights_ids = array_map(null, $a_weights, $a_ids);
$versions_weights_ids = array_combine($a_versions, $weights_ids);

print_r($versions_weights_ids); 
```

问题是你必须知道主键是版本，子数组 0 的键是权重，子数组 1 的键是 id。

要打印出您的结果，您将使用：

```
foreach($versions_weights_ids as $version => $weight_id) {
echo "
    <pre>
        $version
        {$weight_id[0]}
        {$weight_id[1]}
    </pre> ";
} 
```

如果您正在寻找 ajax 解决方案，我会考虑 JSON，并使用类似的东西：

```
$versions = "1 2 5 4 10 6 8 7 3 9";
$weights = "50.2 60.5 35 10 15.98 60 50 60.1 70 75";
$ids = "512 318 112 326 155 191 977 961 943 441";

$a_versions = explode(" ", $versions);
$a_weights = explode(" ", $weights);
$a_ids =  explode(" ", $ids);

$weights_ids = array_map(null, $a_weights, $a_ids);
$versions_weights_ids = array_combine($a_versions, $weights_ids);

echo json_encode($versions_weights_ids); 
```

这样，您可以使用框架的 each 方法或针对特定版本（或多个版本）进行输出。

# android - 如何实现点击某区域做动作？

> ID：10700362
> 
> 赞同：1
> 
> 时间：2012-05-22T10:38:03.320
> 
> 标签：android, facebook, sliding

[这](https://github.com/gitgrimbo/android-sliding-menu-demo/blob/master/SlidingMenuDemo/src/grimbo/android/demo/slidingmenu/SlideAnimationThenCallLayout.java)是 facebook 滑动菜单的示例。

滑动时，用户可以看到 20% 的空间，这与 facebook 类似。Facebook 通过单击这 20% 的任意位置来实现它，并且菜单向后滑动。

如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:46:05.703

一种方法是在您的活动中使用 OnTouchListener。您可以准确检测屏幕上的触摸位置。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.LinearLayout;
import android.widget.Toast;

public class AndroidTestActivity extends Activity implements OnTouchListener {
  LinearLayout main;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    main = (LinearLayout) findViewById(R.id.main_layout);
    main.setOnTouchListener(this); // you need to set the touch listener for your view. And every element around the detection area.
  }

  public boolean onTouch(View v, MotionEvent e) {
    if(e.getX() <= main.getWidth() / 5) {
      Toast.makeText(this, "In the %20..", Toast.LENGTH_SHORT).show();
      return true;      
    }

    return false;
  }
} 
```

您还需要标识您的主要布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" > 
```

# machine-learning - weka - 绘制学习曲线

> ID：10700364
> 
> 赞同：3
> 
> 时间：2012-05-22T10:38:10.760
> 
> 标签：machine-learning, weka

我正在尝试为我的模型绘制学习曲线，该曲线说明了错误与迭代次数之间的关系或类似的东西：

![在此处输入图像描述](../Images/e96f5dfe611591fa973109ec144daf2e.png)

我读了这篇文章： [http ://weka.wikispaces.com/Learning+curves](http://weka.wikispaces.com/Learning+curves)

但我有几个问题：

1.  无法从数据库源获取数据
2.  无法获得错误和迭代次数之间的关系
3.  分析数据集并将输出格式选择为“GNUplot”后，当我按保存输出时无法保存图像，测试输出显示：

```
（生成PNG：

设置终端 png 大小 800,600

设置输出“plot.png”

重新绘制）

```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-03-27T13:50:07.310

这个教程很不错的[教程](https://www.youtube.com/watch?v=ArU4x0Lnwi4)

它解释了用于创建学习曲线的所有配置细节。我将总结：

*   打开实验器
*   选择高级配置模式
*   目的地：选择方便的位置，提供任意名称.arff 文件名
*   对于结果生成器，左键单击文本框
*   对于拆分评估器，选择回归进行回归或分类进行分类
*   对于拆分评估器，左键单击文本框
*   对于分类器选择：meta->filteredClassifier
*   左键单击分类器的文本框
*   分类器：选择你想要的分类器/预测器
*   对于过滤器：选择无监督->实例->删除百分比
*   关闭所有对话框
*   对于数据集选择一个数据集
*   为生成属性选择启用
*   选择属性拆分评估器->分类器->删除百分比
*   输入要绘制的所有数据百分比
*   转到运行选项卡
*   点击运行
*   转到分析选项卡
*   选择比较字段您想要的错误
*   点击瓶坯测试

# php - 在netbeans php中跳转到方法签名的方法是什么？

> ID：10700365
> 
> 赞同：3
> 
> 时间：2012-05-22T10:38:11.813
> 
> 标签：php, netbeans, editor

问题是当我在 Netbeans 中编写 PHP 代码时，我想稍微舒服一点。
当编辑光标位于长方法源的中间时，
我想按一个**快捷键**跳转到该方法的开头。

例如：

```
public function doStuff($arg1,$arg2) <--- I want to jump here...
{
$a = $b;
$b = $c;
$c = $d;
$d = $e; <--- cursor is here
.....
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:52:05.180

这对我来说很好：`Ctrl+7`+`return`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:49:37.150

最好的解决方案：不要编写超过一屏的函数（这已经很长了）。

具有许多局部变量的长函数对可维护性非常不利：它们难以理解并且会包含不成比例的更多错误。

取而代之的是，将它们分解为只做一件事的更小的函数，并且有一个可以准确描述它们所做工作的名称。

# cordova - 无法在我的 iPhone 应用程序中加载图像

> ID：10700366
> 
> 赞同：1
> 
> 时间：2012-05-22T10:38:12.180
> 
> 标签：cordova, sencha-touch-2, phonegap-plugins, sencha-architect

我使用带有PhoneGap的sencha触摸框架在iPhone中创建一个混合应用程序，在设备中我无法从互联网加载图像或音频，在浏览器中它可以工作。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:00:03.887

检查您的 phonegap config.xml 是否允许访问您的媒体所在的域 - 请参阅[phonegap 的 Access 元素文档](https://build.phonegap.com/docs/config-xml#access)。

例如，您可以通过设置进行测试：

```
<access origin="*" /> 
```

进入您的 config.xml - 这将允许您的应用程序连接到任何 URL。

# javascript - 获取 div 的 X,Y 位置

> ID：10700387
> 
> 赞同：1
> 
> 时间：2012-05-22T10:39:18.333
> 
> 标签：javascript, jquery

我有 3x3 的 jQuery div 列表，如下所示：

```
div1 div2 div3
div4 div5 div6
div7 div8 div9 
```

当一个 div 被拖放时，我想获得它相对于其他 div 元素的 X 和 Y 位置。因此，如果将 div1 拖到 div3 位置，我需要检索代表 div1 新位置的位置 0,3。我需要使用插件吗？

所以只需要像这样覆盖 droppable 并获得位置：

```
$( ".myClass" ).droppable({ drop: function( event, ui ) 
            { 
alert('my position in relation to other divs is '+????
            } 
        }); 
```

我已经添加了一个 jsFiddle： http: [//jsfiddle.net/aL3tr/](http://jsfiddle.net/aL3tr/) 可以检索被丢弃项目的 X 和 Y 坐标吗？在这种情况下，Y 位置将始终为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:22:27.827

将此添加到您的可拖动

```
stop: function(e,ui) {alert(ui.offset.top+","+ui.offset.left);} 
```

（更新）

好的，对于所有的兄弟姐妹

```
 $( "#sortable" ).sortable({
        update: function(e,ui) {
            console.log(ui.item.parent());
            var i=ui.item;
            ui.item.parent().children().each(
                function (i,e) {
                    alert(ui.item.offset().top-$(e).offset().top);
                }
            );
        },
        revert: true
    }); 
```

此处获取 X 相对距离，Y 始终为 0 但您可以通过类似方式获取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:07:30.450

我叉了你的小提琴： http: [//jsfiddle.net/44R97/](http://jsfiddle.net/44R97/)检查#sortable-list中的位置：

```
stop: function() {
    var myPos = $('#sortable').find('li.ui-draggable');
    alert("I am at position "+($('#sortable').find('li').index(myPos)+1));
} 
```

请注意， .index() 从 0 开始计数。因此，我在结果中添加了 1...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:32:27.103

我更新了您的[小提琴](http://jsfiddle.net/aL3tr/10/)以使用以下代码段显示单击元素的坐标：

```
$("li").click(function() {
    alert("I am at (" + this.offsetLeft + "," + this.offsetTop + ").");
}); 
```

# java - 图数据库（neo4j）与关系数据库。需要设计帮助

> ID：10700392
> 
> 赞同：3
> 
> 时间：2012-05-22T10:39:32.637
> 
> 标签：java, database, neo4j

我必须使用一个开源项目（[biojava](http://biojava.org/wiki/Main_Page)），但我对某些性能不满意，我想花一些时间来改进它。

例如，我有一个以这种方式编码的文本数据库：

```
chrX    Cufflinks   exon    65175856    65175971    .   .   .   gene_id "XLOC_002576"; transcript_id "TCONS_00004217"; exon_number "1"; gene_name "RP6-159A1.2"; oId "CUFF.3698.1"; nearest_ref "ENST00000456392"; class_code "p"; tss_id "TSS3873";    
chrX    Cufflinks   exon    128986006   128986088   .   .   .   gene_id "XLOC_002577"; transcript_id "TCONS_00004218"; exon_number "1"; oId "CUFF.3750.1"; class_code "u"; tss_id "TSS3874"; 
```

并非每个字段都是必需的，每个字段都`gene_id`可能与多个`transcript_id`(1..n) 相关联，并且每个字段`transcript_id`都有 1 个或多个`exon`。

库的行为是将整个文本文件加载到 中`ArrayList`，并且对于每次搜索，必须迭代列表。这适用于小列表，但在我的情况下，我有 10^10 个查询和一个非常大的列表，并且在一台好的计算机上需要几天时间。

Neo4j 会是一个不错的选择吗？什么是实施它的好方法？例如，创建一个纯字符串实体并在它们之间建立关系是不是很糟糕？还是将 Hsqldb 与单个表一起使用更好？

请注意我不需要持久性，但速度和同步是强制性的。

编辑：如果你愿意，你可以看看[这里](https://github.com/biojava/biojava/tree/master/biojava3-genome/src/main/java/org/biojava3/genome/parsers/gff)的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:05:33.367

如果速度很关键，因为您的数据模式看起来“简单”，您可以执行“手动”解决方案。如果开发时间比“绝对速度”更重要，那么内存 RDBMS 是一个不错的选择。如果不需要持久性，我会避免使用 neo4j，因为它更适合持久性，并且您的数据似乎更“关系”而不是“复杂图”

如果速度很关键，并且您不采用 Hsqldb 之类的解决方案，那么我们的想法是填充 3 种对象（基因、转录本、外显子），并使用哈希图对它们进行索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:27:11.383

当您想在大海捞针时，Neo4J 工作得很好，即当您有一个大数据集时，但是当您运行查询时，您只对查询少量数据感兴趣。例如，如果您有如下图表：

```
(gene) -> (transcript) -> (exon) 
```

那么 Neo4J 将擅长运行诸如“从基因 XLOC_002576 开始，给我它的所有转录本并给我所有其他与这些转录本相关的基因”之类的查询。（我不知道什么是转录本和外显子，所以这个查询可能没有意义，但你明白了）。

如果您不是大海捞针，而是为每个查询处理整个数据集，那么 Neo4J 不太可能成为这项工作的工具。如果数据集真的很大（如数百 GB），您是否正在将整个数据集缩减为一个小答案，并且您不介意将处理分布在多台机器上，那么也许使用[hadoop](http://hadoop.apache.org/) map reduce 并上传大文本文件到 HDFS 可能是一种选择。

如果您提供有关查询配置文件的更多信息，这将有助于提供更好的答案。即你对数据做了什么？“搜索”是什么意思？

# python - 列表理解建议

> ID：10700393
> 
> 赞同：2
> 
> 时间：2012-05-22T10:39:35.753
> 
> 标签：python, list-comprehension

```
>>> odd,even=[ ],[ ]
>>> [even.append(x) if x%2==0 else odd.append(x) for x in range(51)]
[None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None]
>>> odd
[1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49] 
```

我的问题：是否可以在列表理解语句中将奇数和偶数分开，即使没有`odd, even = [], []`在开头声明？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T10:46:10.073

最好只循环一次。这是6条线，但它们是*快速*线

```
odd, even=[ ], [ ]
for x in range(51):
    if x%2:
        odd.append(x)
    else:
        even.append(x) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T11:54:53.547

```
even,odd = [],[]
for x in range(51): 
    (odd if x%2 else even).append(x) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T10:43:34.607

考虑这个

```
evens = [i for i in xrange(1,1000) if i % 2]
odds = [i for i in xrange(1,1000) if i % 2 != 0] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-22T10:44:33.947

```
>>> even, odd = [[x for x in range(51) if x%2 == 0], [x for x in range(51) if x%2 == 1]]
>>> even
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50]
>>> odd
[1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49] 
```

我不推荐这种方法，但我猜这是一种你可以用“只有一个循环”来做到的方法：

```
>>> even, odd = zip(*[(x, x + 1) for x in range(0, 51, 2)])
>>> even
(0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50)
>>> odd
(1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49, 51) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-22T14:08:42.860

我想提请注意`itertools`，特别是 Python 帮助中的[itertools 食谱](http://docs.python.org/dev/library/itertools.html#itertools-recipes)。在这里我们可以使用该`partition`函数（向后移植到 Python 2.7）

```
from itertools import tee, ifilter, ifilterfalse

def partition(pred, iterable):
    'Use a predicate to partition entries into false entries and true entries'
    # partition(is_odd, range(10)) --> 0 2 4 6 8   and  1 3 5 7 9
    t1, t2 = tee(iterable)
    return ifilterfalse(pred, t1), ifilter(pred, t2)

def is_odd(n):
    return bool(n%2)

evens, odds = partition(is_odd, range(51))

print list(evens)
print list(odds) 
```

事实上，文档字符串中的示例准确地解释了这种情况下的使用。它返回迭代器，因此需要`list`在打印时使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-22T11:34:04.693

如果这是一个为了方便而使用数字的简化问题，那么我的答案是不相关的，但是执行您所要求的最简单的方法实际上是：

```
>>> odd, even = range(1, 51, 2), range(0, 51, 2) 
```

这给了你：

```
>>> list(odd)
[1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 41, 43, 45, 47, 49]
>>> list(even)
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-22T11:02:45.777

试试这个版本：对我来说优雅、紧凑、易于理解

```
even,odd = [],[]
for x in range(51): x%2 and even.append(x) or odd.append(x) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-22T13:02:57.657

解决一般问题：

> 给定一个谓词函数`predicate`返回一个对象，`True`或者`False`当给定一个对象时，根据谓词将一个列表分成两个子列表，同时保留顺序

`sorted`然后我们可以使用函数是*稳定*的这一事实，因此如果我们使用`predicate`as 键进行排序，则列表在未知点被有效地分成两部分，同时保留每个部分内的顺序，其中谓词`False`在左侧的值和值它`True`在右边。

现在我们可以使用[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)相同的密钥在这个未知点进行拆分。

```
from itertools import groupby

predicate = lambda x: x % 2 == 0

def group_by_predicate(L, pred):
    return [list(i) for k, i in groupby(sorted(L, key=pred), key=pred)]

odd, even = group_by_predicate(range(51), predicate) 
```

即使 is 的值不是均匀间隔的，这也会起作用`predicate`......`True`例如，如果`predicate`是`True`素数。

# jquery - jQuery UI Multiselect - 多次选择一个选项？

> ID：10700394
> 
> 赞同：0
> 
> 时间：2012-05-22T10:39:48.640
> 
> 标签：jquery, jquery-plugins

我想问一下是否可以在 jQuery UI Multiselect 中多次选择一个选项。

为了清楚起见，假设我有一个带有苹果和橙子的下拉菜单，是否可以选择 10 个苹果和 5 个橙子？

提前致谢

# azure - 如何从窗口 azure 访问事件日志

> ID：10700395
> 
> 赞同：5
> 
> 时间：2012-05-22T10:39:48.983
> 
> 标签：azure, event-log

我想从 Azure webrole 的实例中获取窗口事件日志。当我通过事件查看器连接到实例的 RDP 时，我能够看到“应用程序”和“错误”类型的窗口事件日志。**有什么方法可以使用 API 或其他方式直接访问该日志，或者我需要使用诊断来使该日志数据能够传输到存储并从那里我可以访问？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T23:57:55.570

如果要直接访问 Azure VM 事件日志，最好的选择是使用 Azure 诊断和 Azure Cmdlet 来访问事件日志详细信息。据我了解，这很容易设置，一旦您可以访问事件日志，您就可以将其下载并保存到本地计算机。该方法描述如下：

[http://michaelwasham.com/2011/09/20/windows-event-logs-with-windows-azure-diagnostics-and-powershell/](http://michaelwasham.com/2011/09/20/windows-event-logs-with-windows-azure-diagnostics-and-powershell/)

还有一种简单的方法是，您可以创建一个 ASP 页面并使用事件日志 API 直接在您的 Web 角色上访问事件日志，并按照您希望的方式对其进行自定义。你可以在网上找到几个关于如何做到这一点的例子，即[这个](http://www.dotnetspider.com/resources/40743-Reading-Windows-Event-Log-Application-Log-using.aspx)。这是获取所需内容的一种非常简单的方法，这种方法的唯一缺点是 ASP 页面将在网站上可用，除非您找到一些保护它的方法。

尽管您可以使用上述任何一种方法，但设置 Windows Azure 诊断程序以从机器收集事件日志并将其发送到 Windows Azure 存储，是最好和首选的方法。步骤在此处描述，以防您不知道：

[https://msdn.microsoft.com/en-us/library/windows/desktop/bb427443(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/bb427443(v=vs.85).aspx)

收集这些日志的任何其他方法（使用 Azure Connect 和 Remoting 等）都将是复杂且麻烦的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:58:48.017

应该可以使用[http://technet.microsoft.com/en-us/library/cc766438.aspx](http://technet.microsoft.com/en-us/library/cc766438.aspx)

尽管默认情况下会阻止该端口，但您需要更改防火墙设置。有关端口号，请参阅本文（搜索事件日志）[http://support.microsoft.com/kb/832017/en](http://support.microsoft.com/kb/832017/en)

# button - Excel 2010 - 禁用按钮

> ID：10700398
> 
> 赞同：2
> 
> 时间：2012-05-22T10:40:00.983
> 
> 标签：button, excel, false-positive, vba

我的电子表格上有 3 个不同的表单按钮。我想在按下一个时禁用其中的两个。那可能吗？

在 C# 中，按钮可以是真或假，但我在 VBA Excel 2010 中找不到任何示例？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:53:36.413

您不能禁用表单按钮。如果您想使用该功能，请使用 ActiveX 按钮。

然而，还有一个替代方案。创建 2 个公共布尔变量，然后在按钮 1 的单击事件中将变量设置为 True 或 False。根据布尔变量，其他 2 个按钮将运行它们的代码或不运行。例如

```
Option Explicit

Dim enableB2 As Boolean, enableB3 As Boolean

Sub Button1_Click()
    If enableB2 = False Then
        enableB2 = True: enableB3 = True
    Else
        enableB2 = False: enableB3 = False
    End If

    '
    '~~> Rest of the code
    '
End Sub

Sub Button2_Click()
     If enableB2 = True Then
        '
        MsgBox "Hello You clicked Button 2"
        '
     End If
End Sub

Sub Button3_Click()
     If enableB3 = True Then
        '
        MsgBox "Hello You clicked Button 3"
        '
     End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T13:45:41.170

我只是想为任何从谷歌（不喜欢使用 ActiveX 按钮）点击这个的人提供一种替代方法：而不是使用全局`Boolean`变量，您可以在禁用按钮时将按钮中的文本变灰，并检查文本颜色在运行宏之前分配给按钮的宏。

例如，如果您有以下子：

```
Public Sub SetFormButtonEnabled(ByVal oWks As Object, ByVal sName As String, ByVal bValue As Boolean) As Boolean
    If blnValue Then
       ' Enabled: black text
       oWks.Shapes(sName).TextFrame.Characters.Font.ColorIndex = 1
    Else
       ' Disabled: grey text
       oWks.Shapes(sName).TextFrame.Characters.Font.ColorIndex = 16
    End If
End Sub 
```

和功能：

```
Public Function GetFormButtonEnabled(ByVal oWks As Object, ByVal sName As String) As Boolean
    ' Enabled if text colour is black, otherwise it is disabled
    GetFormButtonEnabled = (oWks.Shapes(sName).TextFrame.Characters.Font.ColorIndex = 1)
End Function 
```

然后您可以像使用 ActiveX 按钮的属性`SetFormButtonEnabled`一样使用该功能，并在执行 click 宏之前检查按钮是否启用。`button.Enabled``GetFormButtonEnabled`

要使用这些来回答最初的问题，请使用一个名为按钮`btnTest1-3`（我在创建后使用这种约定命名按钮，但`Button 1-3`也可以正常工作）并单击宏`btnTest1_Click`（再次模仿 ActiveX 约定，但可以命名任何东西）：

```
Public Sub btnTest1_Click()
    If Not GetFormButtonEnabled(Me, "btnTest1") Then Exit Sub
    SetFormButtonEnabled Me, "btnTest2", False
    SetFormButtonEnabled Me, "btnTest3", False
    ' Do some work...
End Sub

Public Sub btnTest2_Click()
    If Not GetFormButtonEnabled(Me, "btnTest2") Then Exit Sub
    ' Do some work...
End Sub

Public Sub btnTest3_Click()
    If Not GetFormButtonEnabled(Me, "btnTest3") Then Exit Sub
    ' Do some work...
End Sub 
```

# wordpress - 在远程 iframe 中显示 Wordpress 页面的内容

> ID：10700404
> 
> 赞同：0
> 
> 时间：2012-05-22T10:40:24.173
> 
> 标签：wordpress

我想在远程页面上的 iframe 中显示 wordpress 页面的内容，但我想去掉徽标和菜单....这是因为我有一个带有管理联系人列表的上市公司网站由人事部门。我还有一个 Intranet 站点，我想在其中显示相同的联系人列表，而无需更新到位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:44:21.883

你可以这样做：

在 Intranet 视图中不想要的元素上，在它们周围包裹一个条件块。因此，例如，我想像你说的那样隐藏我的徽标和菜单，我的徽标在它自己的 div 中，我的菜单是 ul 的，我会像这样包装#logo div：

和菜单一样：

```
<?php if (!isset($_GET['iframe'])) {
?><ul id="menu"></ul><?php } ?> 
```

需要明确的是，您不会简单地将上述任何内容粘贴到主题文件中的任何位置，您需要查找要隐藏的元素并使用条件包装它们，`<?php if (!isset($_GET['iframe'])) { ?>`这将使它们在页面显示时隐藏iframe 像这样调用：

```
<iframe src="http://www.mysite.com/pageslug/?iframe=true"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:20:23.477

我会创建一个自定义页面模板，以便您完全控制内容。IME，这比可能影响实时站点的条件语句更容易。我已经为活动这样做了，这样他们就可以在投影仪上放置一个屏幕，并在网站更新时实时更新该信息。

[http://codex.wordpress.org/Pages#Page_Templates](http://codex.wordpress.org/Pages#Page_Templates)

# javascript - Extjs 复选框列：在单击复选框和该字段的其余部分之间有所不同

> ID：10700406
> 
> 赞同：0
> 
> 时间：2012-05-22T10:40:30.393
> 
> 标签：javascript, extjs, extjs4, extjs3

我有一个带有复选框列的网格，一切正常，但我想在单击复选框本身和在同一字段中单击复选框之间采取不同的操作。这在 ExtJs 中可行吗？我使用的是 3.3.1 版本，但我想来自另一个版本的示例可以帮助我入门。

```
var checkColumn = new Ext.grid.CheckColumn({
    header: 'Checklist OK ?',
    dataIndex: 'checklist_ok',
    width: 20,
    align: 'center'
});

cmDiverse = new Ext.grid.ColumnModel({
    defaults: {
        "sortable": true,
        "menuDisabled": false,
        "align": "right"
    },
    store: storeDiverse,
    columns: [{
        "id": "id",
        "header": "id",
        "hidden": true,
        "dataIndex": "id",
        "width": 20
    }, 
```

检查列，...

```
gridDiverse = new Ext.ux.grid.livegrid.EditorGridPanel({
    id: "gridDiverse",
    enableDragDrop: false,
    loadMask: true,
    clicksToEdit: 1,
    layout: 'anchor',
    cm: cmDiverse,
    .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:56:20.813

不幸的是，您无法区分在复选框内部和外部单击，因为所有侦听器都在列上，而复选框只是列内文本的格式，而不是真正的元素。

# objective-c - 书籍布局 NSTextFields——返回页面？

> ID：10700408
> 
> 赞同：2
> 
> 时间：2012-05-22T10:40:42.950
> 
> 标签：objective-c, cocoa, nstextview, nsscrollview, nstextstorage

我有`NSTextfields`一本书的布局有两个，我想不出一种快速返回上一个“页面”的方法。书本大小、字体大小、行大小都会发生变化，因此必须即时计算前一页的文本字符串。图片：

![例子](../Images/240b5f03027ad5c18df5559b6e14838a.png)

NSTextfields 每个都有一个`NSTextContainer`，它们共享一个`NSLayoutManager`和`NSTextStorage`。

前进很容易：我获取可见文本的字符范围，然后从下一个字符开始创建一个子字符串。

我回去的方法是一个杂耍。我计算出一次可以看到的最大字符数。然后，我制作了一个该长度的字符串，最后一个字符是我想要的位于书的右下角的那个。然后我循环：从头开始删除字符，每次检查可见的内容，直到我想要的字符位于右下角。这是非常非常缓慢的。

谁能建议一种更快的方法来完成我想要实现的目标？我曾想过使用，但我不知道如何为此布局**`scrollRangeToVisible`**设置 a 。`NSScrollView`

任何人都可以帮忙吗？

文本容器的设置如下：

```
-(void)setupTextViews {

articleString = [[NSAttributedString alloc] init];
articleStringPortion = [[NSAttributedString alloc] init];

bookTextStorage = [[NSTextStorage alloc] init];
bookLayoutManager = [[NSLayoutManager alloc] init];
[[self bookTextStorage] addLayoutManager:bookLayoutManager];

leftColumnRect = NSZeroRect;
rightColumnRect = NSZeroRect;

NSDivideRect(bookRect, &leftColumnRect, &rightColumnRect, NSWidth(bookRect) / 2, NSMinXEdge);

// First column
{
    NSTextContainer *textContainer = [[NSTextContainer alloc] initWithContainerSize:leftColumnRect.size];
    leftColumnTextView = [[CRMouseOverTextView alloc] initWithFrame:leftColumnRect textContainer:textContainer];
    [leftColumnTextView setDrawsBackground:NO];
    [leftColumnTextView setEditable:NO];
    [leftColumnTextView setup];

    [bookView addSubview:leftColumnTextView];

    [bookLayoutManager addTextContainer:textContainer];

    [textContainer release];
    [leftColumnTextView release];
}

// Second column
{
    NSTextContainer *textContainer = [[NSTextContainer alloc] initWithContainerSize:rightColumnRect.size];
    rightColumnTextView = [[CRMouseOverTextView alloc] initWithFrame:rightColumnRect textContainer:textContainer];
    [rightColumnTextView setDrawsBackground:NO];
    [rightColumnTextView setEditable:NO];
    [rightColumnTextView setup];

    [bookView addSubview:rightColumnTextView];

    [bookLayoutManager addTextContainer:textContainer];

    [textContainer release];
    [rightColumnTextView release];
}

} 
```

发布我糟糕的倒退代码是没有意义的，但我正在使用我发现的这种方法来找出每次可见的内容：

```
-(NSRange)getViewableRange:(NSTextView *)tv {
NSLayoutManager *lm = [tv layoutManager];
NSRect visRect = [tv visibleRect];

NSPoint tco = [tv textContainerOrigin];
visRect.origin.x -= tco.x;
visRect.origin.y -= tco.y;

NSRange glyphRange = [lm glyphRangeForBoundingRect:visRect inTextContainer:[tv textContainer]];
NSRange charRange = [lm characterRangeForGlyphRange:glyphRange actualGlyphRange:nil];

return charRange;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:30:19.010

我不确定这是否是您正在寻找的答案，但如果是我，我可能只是“缓存”一堆这些字符范围，用于所有已查看的先前页面。您甚至可能没有任何问题将它们全部存储为一本有很多页面的书。当然，当用户重新调整文本大小时，你仍然必须使用你的 kludgy 代码，或者其他什么。（要么，或者你可以从一些合适的起点重新计算......如果它足够快，或者说一章的开头或其他东西的开头。然后你只需找到包含的页面（范围）已经显示的文本并显示前一个文本。）

# android - Android：在集成页面“赞”按钮时避免两次登录 Facebook（SDK 和浏览器）

> ID：10700409
> 
> 赞同：4
> 
> 时间：2012-05-22T10:40:49.687
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试向我的 android 应用程序添加一个 LIKE 按钮，用户可以按下该按钮来喜欢粉丝页面。据我了解，由于 Facebook 的安全限制，这是不可能的。

我的替代方法是使用 WebView 和 Facebook 提供的“like social html code”显示一个 Like 按钮。这种方法的问题在于，用户必须使用 Web 界面重新登录 Facebook，才能看到类似按钮。也就是说，在他已经使用 SDK 身份验证登录之后（这也是一个 web 视图）。

是否可以仅使用一次登录来完成所有这些操作？使用 SDK 登录不会将 cookie 保存到默认 Web 浏览器（SDK 使用 Web 视图...）怎么办？

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T12:31:25.137

尝试使用 SSO 登录您的应用程序。非 SSO(Normal) 身份验证使用安装在应用程序上的 Facebook 应用程序。如果您将 SSO FB 登录到您的应用程序并简单地将 URL 传递给 webView 以获得“Like”功能，我想它应该可以工作，因为您正在使用 SSO FB 登录应用程序并在设备上预安装 facebook 应用程序来处理webview的FB。

我对此充满希望。请分享您的反馈。

# jquery - 样式输入类型：文件不一致 - IE 和 Firefox (jquery) 之间的 FilePath

> ID：10700411
> 
> 赞同：2
> 
> 时间：2012-05-22T10:40:50.640
> 
> 标签：jquery

我正在尝试设置输入类型：文件的样式。

我遇到的问题是在 Firefox 中我看不到文件路径，而在 IE 中它给了我完整的文件路径。

有什么方法可以使这两个浏览器的行为方式相同？

[http://jsfiddle.net/sandrodz/yEG4w/](http://jsfiddle.net/sandrodz/yEG4w/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:43:59.023

不，这是浏览器的一项安全功能，您获得的唯一信息是文件名和文件本身。

严格来说，IE 不应该给你客户端机器的完整文件路径，因为它可能被恶意使用。

要仅从 IE 获取文件名，请尝试以下操作：

```
var filePath = $("#fileInput").val().split("\\");
var fileName = filePath[filePath.length -1]; 
```

[**示例小提琴**](http://jsfiddle.net/yEG4w/1/)

# c# - NullReferenceException-> Hammock.WindowsPhone.dll！Hammock.Silverlight.Compat.GzipHttpWebResponse.GetResponseStream()

> ID：10700413
> 
> 赞同：1
> 
> 时间：2012-05-22T10:41:07.520
> 
> 标签：c#, windows-phone-7, hammock

我想在我的应用程序中使用 Twitter，我正在使用 Hammock Windows DLL 使用 Twitter，所以当我像这样创建其余客户端时

```
private void GetTwitterToken()
{
    var credentials = new OAuthCredentials
    {
        Type = OAuthType.RequestToken,
        SignatureMethod = OAuthSignatureMethod.HmacSha1,
        ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
        ConsumerKey = MyTwitter.ConsumerKey,
        ConsumerSecret = MyTwitter.ConsumerSecret,
        Version = MyTwitter.OAuthVersion,
        CallbackUrl = MyTwitter.CallbackUri
    };

    /*
    var client = new RestClient
    {
        Authority = "https://api.twitter.com/oauth",
        Credentials = credentials,
        HasElevatedPermissions = true
    };
    */

    var client = new RestClient
    {
        Authority = "https://api.twitter.com/oauth",
        Credentials = credentials,
        HasElevatedPermissions = true,
        SilverlightAcceptEncodingHeader = "gzip",
        DecompressionMethods = DecompressionMethods.GZip
    };

    var request = new RestRequest
    {
        Path = "/request_token"
    };
    client.BeginRequest(request, new RestCallback(TwitterRequestTokenCompleted));
}

private void TwitterRequestTokenCompleted(RestRequest request, RestResponse response, object userstate)
{
    Debug.WriteLine("Twitter Request Token Completed");

    _oAuthToken = GetQueryParameter(response.Content, "oauth_token");
    _oAuthTokenSecret = GetQueryParameter(response.Content, "oauth_token_secret");
    var authorizeUrl = MyTwitter.AuthorizeUri + "?oauth_token=" + _oAuthToken;

    if (String.IsNullOrEmpty(_oAuthToken) || String.IsNullOrEmpty(_oAuthTokenSecret))
    {
        Dispatcher.BeginInvoke(() => MessageBox.Show("error calling twitter"));
        return;
    }

    Dispatcher.BeginInvoke(() => browserControl.Navigate(new Uri(authorizeUrl)));
} 
```

我收到 NullReferenceException-> Hammock.WindowsPhone.dll 错误！

> Hammock.Silverlight.Compat.GzipHttpWebResponse.GetResponseStream() + 0x1c 字节

在堆栈中，我得到的错误是

> 在 Hammock.Silverlight.Compat.GzipHttpWebResponse.GetResponseStream()
> 
> 在 Hammock.Web.WebQuery.GetAsyncResponseCallback(IAsyncResult asyncResult)
> 
> 在 System.Net.Browser.ClientHttpWebRequest.<> *c_DisplayClassa.<InvokeGetResponseCallback>b* _8（对象状态 2）
> 
> 在 System.Threading.ThreadPool.WorkItem.WaitCallback_Context（对象状态）
> 
> 在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
> 
> 在 System.Threading.ThreadPool.WorkItem.doWork（对象 o）
> 
> 在 System.Threading.Timer.ring()

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:48:58.343

有参考问题，是导致问题的原因，已修复，感谢您的支持乔恩

# c# - .Net图表控制XY图在所有X值相同时输出不良

> ID：10700422
> 
> 赞同：2
> 
> 时间：2012-05-22T10:41:48.420
> 
> 标签：c#, mschart

我正在使用图表控件来显示散点图。

在某些情况下，数据系列由具有相等 X 值的点组成。

在这些情况下，我看到的只是一个点（而不是一条垂直线）。此外，该点的位置并非基于实际坐标。改变一个点的 X 值可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:12:06.500

根据[此条目](http://social.msdn.microsoft.com/Forums/en-CA/MSWinWebChart/thread/ab6fd210-dc1e-44b2-a1f7-dffd3cbf821e)，您无能为力。

检查您在可能导致问题的情况下运行的天气，并在您的一个点（double.Epsilon）中添加一些微小的东西。

在设置了一个点后，我曾经使用过这样的东西来检查我的情节（略有不同的问题，但你明白了......）：

```
foreach (var l_oSeries in Series)
{
    if (l_oSeries.Points.Count != 1)
        continue;

    if (l_oSeries.Points[0].XValue == 0)
    {
        l_oSeries.Points[0].XValue = double.Epsilon;
    }
} 
```

不优雅，但可以完成工作。

# javascript - Javascript奇怪的随机行为

> ID：10700424
> 
> 赞同：9
> 
> 时间：2012-05-22T10:42:00.340
> 
> 标签：javascript, canvas, random, distribution

我正在使用 JavaScript 的`Math.random()`函数将项目分配到存储桶中。之后，我在画布上显示桶。我希望这些项目能够均匀分布，但是（即使在多个浏览器中多次重试之后），左侧的分布似乎更加精细（接近于零）并且向右变得更加均匀（接近 1 ）。见下图![在此处输入图像描述](../Images/105cff8a4f292f5c7046cdad5c9d53e2.png)。

是我做错了，还是 JavaScript 的随机函数很烂？以下是用于生成此图像的代码：

```
<html>
    <head>
        <script>
            window.onload = function() {
                    var canvas = document.getElementById('canvas');
                    var ctx = canvas.getContext('2d');
                    var width = canvas.width;
                    var height = canvas.height;     
                    var buckets = width;
                    var total = width*height*0.3;
                    var bucketList = [];
                    // initialized each bucket to 0 items
                    for(var i=0; i<buckets; ++i) { 
                            bucketList[i] = 0;  
                    }
                    // distribute all items over the buckets
                    for(var i=0; i<total; ++i) {
                        ++bucketList[Math.floor(Math.random()*buckets)];
                    }
                    // draw the buckets
                    ctx.fillStyle = "rgb(200,0,0)";
                    for(var i=0; i<buckets; ++i) {
                        ctx.fillRect (i, height-bucketList[i], i+1, height);  
                    }
            }
            </script>
    </head>
    <body>
            <canvas id="canvas" width="1000px" height="500px"/>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:04:12.237

让我回答一个答案，因为我对这个问题的评论很有可能在它的邻居中丢失。

所以，有了@xiaoyi 建议的修复程序，这张照片对我来说看起来很随机：http: [//jsfiddle.net/TvNJw](http://jsfiddle.net/TvNJw)。最初在问题中建议的绘图例程错误地随着增长而增加了绘制的桶宽度`i`，而所有桶的宽度都应为`1`. 这可以很容易地通过绘制不同颜色的桶来描述。

# select - SELECT DISTINCT 优化

> ID：10700433
> 
> 赞同：0
> 
> 时间：2012-05-22T10:42:53.887
> 
> 标签：select, query-optimization, left-join, distinct, postgresql-8.4

我正在使用 PostgreSQL 8.4。优化此查询的最佳方法是什么：

```
SELECT DISTINCT campaigns.* FROM campaigns 
LEFT JOIN adverts ON campaign_id = campaigns.id 
LEFT JOIN shops ON campaigns.shop_id = shops.id 
LEFT JOIN exports_adverts ON advert_id = adverts.id 
LEFT JOIN exports ON export_id = exports.id 
LEFT JOIN rotations ON rotations.advert_id = adverts.id 
LEFT JOIN blocks ON block_id = blocks.id
WHERE
  (shops.is_active = TRUE) 
  AND exports.user_id = any(uids) 
  OR blocks.user_id = any(uids)
  AND campaigns.id = any(ids) 
```

我的桌子是：

```
CREATE TABLE campaigns (
    id integer NOT NULL,
    shop_id integer NOT NULL,
    title character varying NOT NULL,
    ...
);

CREATE TABLE adverts (
    id integer NOT NULL,
    campaign_id integer NOT NULL,
    title character varying NOT NULL,
    ...
);

CREATE TABLE shops (
    id integer NOT NULL,
    title character varying NOT NULL,
    is_active boolean DEFAULT true NOT NULL,
    ...
);

CREATE TABLE exports (
    id integer NOT NULL,
    title character varying,
    user_id integer NOT NULL,
    ...
);

CREATE TABLE exports_adverts (
    id integer NOT NULL,
    export_id integer NOT NULL,
    advert_id integer NOT NULL,
    ...
);

CREATE TABLE rotations (
    id integer NOT NULL,
    block_id integer NOT NULL,
    advert_id integer NOT NULL,
    ...
);

CREATE TABLE blocks (
    id integer NOT NULL,
    title character varying NOT NULL,
    user_id integer NOT NULL,
    ...
); 
```

我已经对该查询中使用的所有字段建立了索引。我能做些什么来优化这个查询吗？

解释这个查询：

```
Unique  (cost=284529.95..321207.47 rows=57088 width=106) (actual time=508048.104..609870.600 rows=106 loops=1)
 ->  Sort  (cost=284529.95..286567.59 rows=815056 width=106) (actual time=508048.102..602413.688 rows=8354563 loops=1)
   Sort Key: campaigns.id, campaigns.shop_id, campaigns.title
   Sort Method:  external merge  Disk: 1017136kB
   ->  Hash Left Join  (cost=2258.33..62419.56 rows=815056 width=106) (actual time=49.509..17510.009 rows=8354563 loops=1)
      Hash Cond: (rotations.block_id = blocks.id)
      ->  Merge Right Join  (cost=1719.44..44560.73 rows=815056 width=110) (actual time=42.194..12317.422 rows=8354563 loops=1)
         Merge Cond: (rotations.advert_id = adverts.id)
         ->  Index Scan using rotations_advert_id_key on rotations  (cost=0.00..29088.30 rows=610999 width=8) (actual time=0.040..3026.898 rows=610999 loops=1)
         ->  Sort  (cost=1719.44..1737.90 rows=7386 width=110) (actual time=42.144..3965.416 rows=8354563 loops=1)
           Sort Key: adverts.id
           Sort Method:  external sort  Disk: 1336kB
           ->  Hash Left Join  (cost=739.01..1244.87 rows=7386 width=110) (actual time=10.519..21.351 rows=10571 loops=1)
              Hash Cond: (exports_adverts.export_id = exports.id)
              ->  Hash Left Join  (cost=715.60..1119.90 rows=7386 width=114) (actual time=10.178..17.472 rows=10571 loops=1)
                 Hash Cond: (adverts.id = exports_adverts.advert_id)
                 ->  Hash Left Join  (cost=304.71..433.53 rows=2781 width=110) (actual time=3.614..5.106 rows=3035 loops=1)
                    Hash Cond: (campaigns.id = adverts.campaign_id)
                    ->  Hash Join  (cost=1.13..9.32 rows=112 width=106) (actual time=0.051..0.303 rows=106 loops=1)
                       Hash Cond: (campaigns.shop_id = shops.id)
                       ->  Seq Scan on campaigns  (cost=0.00..6.23 rows=223 width=106) (actual time=0.011..0.150 rows=223 loops=1)
                       ->  Hash  (cost=1.08..1.08 rows=4 width=4) (actual time=0.015..0.015 rows=4 loops=1)
                         ->  Seq Scan on shops  (cost=0.00..1.08 rows=4 width=4) (actual time=0.010..0.012 rows=4 loops=1)
                            Filter: is_active
                    ->  Hash  (cost=234.37..234.37 rows=5537 width=8) (actual time=3.546..3.546 rows=5537 loops=1)
                      ->  Seq Scan on adverts  (cost=0.00..234.37 rows=5537 width=8) (actual time=0.010..2.200 rows=5537 loops=1)
                 ->  Hash  (cost=227.06..227.06 rows=14706 width=8) (actual time=6.532..6.532 rows=14706 loops=1)
                   ->  Seq Scan on exports_adverts  (cost=0.00..227.06 rows=14706 width=8) (actual time=0.016..3.028 rows=14706 loops=1)
              ->  Hash  (cost=14.85..14.85 rows=685 width=4) (actual time=0.311..0.311 rows=685 loops=1)
                ->  Seq Scan on exports  (cost=0.00..14.85 rows=685 width=4) (actual time=0.014..0.156 rows=685 loops=1)
      ->  Hash  (cost=368.95..368.95 rows=13595 width=4) (actual time=7.281..7.281 rows=13595 loops=1)
        ->  Seq Scan on blocks  (cost=0.00..368.95 rows=13595 width=4) (actual time=0.027..3.990 rows=13595 loops=1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T21:57:51.220

拆分`or`为 2 个联合查询可能会有所帮助（没有 DISTINCT）：

```
SELECT campaigns.* 
FROM campaigns 
  LEFT JOIN adverts ON campaign_id = campaigns.id 
  LEFT JOIN shops ON campaigns.shop_id = shops.id 
  LEFT JOIN exports_adverts ON advert_id = adverts.id 
  LEFT JOIN exports ON export_id = exports.id 
  LEFT JOIN rotations ON rotations.advert_id = adverts.id 
  LEFT JOIN blocks ON block_id = blocks.id
WHERE
  (shops.is_active = TRUE) 
  AND exports.user_id = any(uids) 

UNION

SELECT campaigns.* 
FROM campaigns 
  LEFT JOIN adverts ON campaign_id = campaigns.id 
  LEFT JOIN shops ON campaigns.shop_id = shops.id 
  LEFT JOIN exports_adverts ON advert_id = adverts.id 
  LEFT JOIN exports ON export_id = exports.id 
  LEFT JOIN rotations ON rotations.advert_id = adverts.id 
  LEFT JOIN blocks ON block_id = blocks.id
WHERE
  blocks.user_id = any(uids)
  AND campaigns.id = any(ids) 
```

# python - Flask/mongodb webapp不一致测试

> ID：10700435
> 
> 赞同：0
> 
> 时间：2012-05-22T10:43:14.303
> 
> 标签：python, mongodb, pymongo, asyncore, intermittent

我有一个由随机失败的 1 节点 mongodb 支持的 Flask 集成测试：

```
pytest/test_webapi.py:59: in test_register_test
>           assert res.status_code == 302
E           assert <Response streamed [404 NOT FOUND]>.status_code == 302 
```

失败率大约为 50%。

在 test_webapi.py 中测试如下：

```
def test_register_user(self):
    res = self.client.get("/logout")

    class MySMTPServer(smtpd.SMTPServer):
        mails = []
        def process_message(self, peer, mailfrom, rcpttos, data):
            self.mails.append((rcpttos[0], data))

    server = MySMTPServer(('localhost', 12345), None)

    t = threading.Thread(target=asyncore.loop, args=(1,))
    t.start()
    time.sleep(.1)

    try:
        res = self.client.post("/register", data=self.registration)
        assert res.status_code == 200

        mail, hash = server.mails[0]

        self.conn.fsync()
        time.sleep(.1)

        res = self.client.get('/activate/' + hash)
        assert res.status_code == 302
    finally:
        server.close() 
```

webapi.py 中的相关 Flask 方法：

```
@app.route("/register", methods=["POST"])
def register_user():
    mail = flask.request.form['mail']
    user = flask.request.form["user"]
    pw = flask.request.form["pass"]

    hash = users.register(user, pw, mail=mail)
    return flask.jsonify({'_id': None}) # XXX

@app.route('/activate/<hash>', methods=['GET'])
def activate_user(hash):
    key = users.activate(hash=hash)
    if not key:
        flask.abort(404)
    return flask.redirect("/") 
```

...由操作方法支持：

```
make_key = lambda : base64.encodestring(os.urandom(32)).strip()

def register(self, user, pw, **kw):
    hash = self.make_key()
    user = self.new(user, pw, activation=hash, **kw)
    self._send_mail(**user)
    return hash

def activate(self, hash):
    user = self.users.find_one({'activation': hash})
    if not user:
        return None
    key = self.make_key()
    activation = {
        '$unset': {'activation': 1},
        '$set': {'status': 'active', 'key': key} }
    self.users.update({'_id': user['_id']}, activation)
    return user 
```

... self.users 是一个 mongodb 集合。

self.new() 使用 safe=True 持久化实体。

有趣的是，其他几个做类似事情的测试似乎从未遇到过这个问题。

我曾认为这足以确保持久对象对 pymongo 连接池中的其他线程可见。我应该更仔细地阅读 mongodb/pymongo 文档的哪一部分？还是与 asyncore 有一些奇怪的交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:06:54.267

（从评论线程移植）

在测试的上下文中，该`data`值是否只是激活密钥的 base64 编码字符串？base64 包含字母和数字，还包含“+”和“/”，这两者都会被 URL 解析器（尤其是“/”）误解。

# java - 在android中录制语音通话

> ID：10700438
> 
> 赞同：1
> 
> 时间：2012-05-22T10:43:20.403
> 
> 标签：java, android, record

我应该在通话过程中录制语音，我使用 GIO SUMSUNG 手机进行，但它同时录制语音通话和麦克风语音，我的意思是我不仅录制了对方的语音。

在我录制的声音中，麦克风的声音比另一个声音大。

我能做些什么？

我可以只录制对方的声音吗？或者它变得更响亮的声音。我以前做过，但今天我真的坚持了下来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:54:39.290

打开它

[http://code.google.com/p/android/issues/detail?id=2117#c226](http://code.google.com/p/android/issues/detail?id=2117#c226)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-16T15:02:35.173

而不是 *myAudioRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);*

使用 *myAudioRecorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL);*

此处描述了此特定选项> [http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html) 语音呼叫上行链路 + 下行链路音频源 这意味着录音将包含两种声音。

开始录制时要小心。发起呼叫或对方接听电话时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T21:03:37.060

尝试这个：

```
private MediaRecorder myAudioRecorder;

       private String outputFile = null;
       public void record()
       {

              myAudioRecorder = new MediaRecorder();
              myAudioRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
              myAudioRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
              myAudioRecorder.setAudioEncoder(MediaRecorder.OutputFormat.DEFAULT);
              myAudioRecorder.setOutputFile(outputFile);

              try {
                  myAudioRecorder.prepare();
                  myAudioRecorder.start();

               } catch (IllegalStateException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
               }

               Toast.makeText(getApplicationContext(), "start", Toast.LENGTH_SHORT).show();

       }

       public void stop()
       { myAudioRecorder.stop();
         myAudioRecorder.reset();
          myAudioRecorder.release();
          myAudioRecorder  = null;

          Toast.makeText(getApplicationContext(), "successfull",
          Toast.LENGTH_LONG).show();
          } 
```

# node.js - 使用 iisnode 运行节点快速服务器 - EventSource 处理程序未触发

> ID：10700444
> 
> 赞同：0
> 
> 时间：2012-05-22T10:43:37.163
> 
> 标签：node.js, server-sent-events, iisnode

我在使用 iisnode 让 node-express 应用程序运行时遇到了一些困难。我在 iis 中有一个简单的 http pub/sub 服务器设置。这通过 POST 接收消息，并将数据推送到相关的侦听客户端。代码...

**服务器**

```
var express = require('express');
var app = require('express').createServer();

var clients = {};

app.configure(function(){
    app.use(express.bodyParser());
    app.use(express.methodOverride());
});

app.get('/pubsubleads/leads/:id', function(request, response) {
    var id = request.params.id.toString();

    response.writeHead(200, {
        'Content-Type': 'text/event-stream',
        'Cache-Control': 'no-cache',
        'Connection': 'keep-alive'
    });

    clients[id] = response;

    request.on('close', function(){
        console.log('connection closing');
        delete clients[id];
    });
});

app.post('/pubsubleads/leads', function(request, response){
    console.log('New post');

    response.writeHead(200, {'Content-Type': 'text/plain'});
    response.end();

    var id = request.body.id;

    if(clients[id] != null) {
        console.log('id = ' + id);
        console.log('data = ' + request.body.data);

        clients[id].write('id: ' + request.body.id + '\n');
        clients[id].write('data: ' + request.body.data + '\n\n');
    }
});
app.listen(process.env.PORT);
console.log('Server started on port ' + process.env.PORT); 
```

**客户**

```
var source = new EventSource('/pubsub/data/@Session.SessionID');

source.onopen = function (e) {
    alert('onopen');
    document.body.innerHTML += 'Connected <br>';
};

source.onmessage = function (e) {
    alert('onmessage: ' + e.data);
    document.body.innerHTML += e.data + '<br/>';
};

source.onerror = function (e) {
    if (e.readyState == EventSource.CLOSED) {
        alert('closed');
    }
}; 
```

...传递给 EventSource url 的参数是唯一标识此客户端的东西。

服务器和客户端托管在同一根域下的不同子域上。我已确认服务器正在正确接收消息。我遇到的问题是客户端事件处理程序永远不会被击中。我尝试将客户端代码包装在 a 中，`$(document).ready()`但这没有影响。我已经使用独立的节点进程在 IIS 之外复制了设置，并且可以正常工作。

我在 Windows 7 64 位上使用 Chrome 18、nodejs 0.6.18、iisnode、IIS 7.5。

我的想法很新鲜，并且无法找到在线讨论的任何类似问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:57:28.300

默认情况下，IIS 在刷新前缓存最多 4MB 的响应数据，这在响应较短和静态文件的情况下提高了性能。您似乎打算随着时间的推移将短数据块流式传输回客户端，并期望这些数据块的传输延迟较低。

iisnode 允许您通过在每次写入后强制刷新响应数据来覆盖此默认 IIS 行为。请将 web.config 中的 system.webServer\iisnode\@flushResponse 配置设置设置为 true (https://github.com/tjanczuk/iisnode/blob/master/src/samples/configuration/web.config#L90) 转这种行为就。或者，如果您升级到 iisnode v0.1.19 或更高版本，您也可以使用新的 iisnode.yml 配置文件设置此值（请参阅[http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in -iisnode.html](http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in-iisnode.html)了解详细信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:57:56.513

EventSource 没有与 WebSockets 相同的客户端 API。您需要使用`addEventListener`：

```
source.addEventListener('open', function (e) {
    // opened
});

source.addEventListener('message', function (e) {
    // e.data
});

source.addEventListener('error', function (e) {
    // whoops
}); 
```

# c# - 在 MvvmCross 我如何做自定义绑定属性

> ID：10700445
> 
> 赞同：4
> 
> 时间：2012-05-22T10:43:37.633
> 
> 标签：c#, xamarin.android, mvvmcross

我正在使用`MvxBindableListView`将一个`List<>`数据对象绑定到一个`ListView`. 我用于行的布局有几个`TextView`s. 我成功地将这些`Text`属性中的每一个绑定到我的数据对象中的一个属性，但是我发现我无法绑定到`TextColor`该属性，因为 Mono For Android 中不存在该属性`TextView`；相反，您使用了该`SetTextColor()`方法。那么如何将数据对象属性绑定到方法？！以下是我尝试使用的代码：

```
 <TextView
        android:id="@+id/MyValueTextView"
        android:layout_width="50dp"
        android:layout_height="20dp"
        android:layout_gravity="right"
        android:gravity="center_vertical|right"
        android:textSize="12sp"
        local:MvxBind="
        {
          'Text':{'Path':'MyValue','Converter':'MyValueConverter'},
          'TextColor':{'Path':'MyOtherValue','Converter':'MyOtherConverter'}
        }" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:56:48.380

在会议示例中有一个为“IsFavorite”添加自定义 2 向绑定的示例 - 请参阅：

*   绑定 - [https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Bindings/FavoritesButtonBinding.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Bindings/FavoritesButtonBinding.cs)
*   [https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Setup.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Setup.cs)`FillTargetFactories`中的绑定设置

这个例子[在Android中的MVVMCross Bindings中有更详细的解释](https://stackoverflow.com/questions/10495137/mvvmcross-bindings-in-android)

对于单向“源到目标”的自定义绑定，代码应该更简单一些——你只需要处理`SetValue`——并且不需要`FireValueChanged`在任何事件处理代码中调用。

* * *

对于 textColor，我想绑定看起来有点像：

```
public class MyCustomBinding
    : MvxBaseAndroidTargetBinding
{
    private readonly TextView _textView;

    public MyCustomBinding(TextView textView)
    {
        _textView = textView;
    }

    public override void SetValue(object value)
    {
        var colorValue = (Color)value;
        _textView.SetTextColor(colorValue);
    }

    public override Type TargetType
    {
        get { return typeof(Color); }
    }

    public override MvxBindingMode DefaultMode
    {
        get { return MvxBindingMode.OneWay; }
    }
} 
```

并将设置为：

```
 protected override void FillTargetFactories(MvvmCross.Binding.Interfaces.Bindings.Target.Construction.IMvxTargetBindingFactoryRegistry registry)
    {
        base.FillTargetFactories(registry);

        registry.RegisterFactory(new MvxCustomBindingFactory<TextView>("TextColor", (textView) => new MyCustomBinding(textView)));
    } 
```

注意：我没有编译这个示例代码——当你让它工作时，请回来更正这个伪代码:)

# sql - 计算列 - 需要帮助编写语句

> ID：10700447
> 
> 赞同：0
> 
> 时间：2012-05-22T10:43:44.113
> 
> 标签：sql, sql-server, database, calculated-columns

直到我今天需要设置一个计算列之前，我才听说过计算列，所以请原谅我的愚蠢。这是我的创建表语句

```
CREATE TABLE [Match](

    [Match Org] [nvarchar](10) NULL,
    [Bypass] [nvarchar](10) NULL,
    [win] as case when [Match Org] == 'yes' or [Bypass] == 'yes' then 'yes' else 'no'

) ON [PRIMARY]

GO 
```

如果 match org 或 bypass 在其中有 yes，我希望 win 列自动计算为 yes...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T10:47:55.807

```
CREATE TABLE [Match](

    [Match Org] [nvarchar](10) NULL,
    [Bypass] [nvarchar](10) NULL,
    [win] AS CASE WHEN  ( [Match Org] = 'yes'    --- equality check is:  =
                       OR [Bypass] = 'yes' )     --- not:  ==
                  THEN 'yes' 
                  ELSE 'no'
             END                                 --- END was missing
        PERSISTED             --- you may also want to make
                              --- the column PERSISTED 
) ON [PRIMARY] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:52:33.067

```
CREATE TABLE [Match]( 

    [Match Org] [nvarchar](10) NULL, 
    [Bypass] [nvarchar](10) NULL, 
    [win] as case  when  [Match Org] = 'yes' or [Bypass] = 'yes' then 'yes' else 'no' end
)

GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:51:03.670

你可以做的是

在表中创建列

```
[win]  AS ([dbo].[GetColValue]([Match Org],[Bypass ])) 
```

您可以创建的功能

```
ALTER FUNCTION [dbo].[GetColValue](@MatchOrg nvarchar(10),@Bypass nvarchar(10))
RETURNS varchar(10)
AS
    BEGIN
        DECLARE @Result varchar(10)
        SET @Result = case 
                  when ([Match Org] = 'yes' or [Bypass] = 'yes' )
                  then 'yes' else 'no' 
                  end        
         RETURN 
        (
            @Result
        )
    END 
```

# java - 将字符串转换为日期

> ID：10700457
> 
> 赞同：0
> 
> 时间：2012-05-22T10:44:21.660
> 
> 标签：java, spring, hibernate, validation, type-conversion

我正在开发一个 Spring/Hibernate Web 应用程序。我有一个 DataTranseferObject ，其中存储来自 jsp 页面的输入以供不同的服务使用并最终保存到数据库中。

jsp 页面中的字段之一是`deliveryDate`. 我想将它作为日期类型存储在数据库中：

来自delivery.java

```
@Column(name = "DELIVERY_DATE") 
private Date deliveryDate; 

public void setDeliveryDate(Date deliveryDate){
    this.deliveryDate= deliveryDate;
}
public Date getDeliveryDate(){
    return deliveryDate;
} 
```

我正在尝试验证 jsp 页面中的字段，以便只`"yyyy-MM-dd"`允许格式。为此，我在 DataTransferObject 中有`deliveryDate`as类型，并使用注释对其进行验证：`String``@Pattern`

```
@Pattern(regexp="((19|20)\\d\\d)-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])", message="please enter date in fromat yyyy-MM-dd")
@NotNull(message="delivery date is a required field")
private String deliveryDate; 
```

由于我想将它作为 Date 类型存储在数据库中，因此我需要将其转换`String`为`Date`类型。我正在尝试使用服务来做到这一点：

```
@Transactional
public Date stringToDateConversion(String stringDate){

    DateFormat formatter;
    Date date;
    formatter = new SimpleDateFormat("yyyy-MM-dd");
    date = (Date) formatter.parse(stringDate);
    return date;
} 
```

但它不工作，因为`formatter.parse(stringDate)`给`"Unhandled exception type ParseException"`

我需要该服务返回一个 Date 类型，以便我可以在控制器中使用它：

```
 Date deliveryDate= deliveryService.stringToDateConversion(deliveryDto.getDeliveryDate());
    delivery.setDeliveryDate(deliveryDate); 
```

如何正确地将 转换`String`为`Date`类型并返回`Date`类型？

谢谢您的帮助！/D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:45:25.197

只需处理`ParseException`调用解析`String`到`Date`

```
DateFormat formatter =  null;
java.util.Date date = null;
formatter = new SimpleDateFormat("yyyy-MM-dd");
try{
  date = formatter.parse(stringDate);
  //if you want you can convert it to `java.sql.Date`
}catch(ParseException ex){//do whatever you would like to}

return date; 
```

# c - 无法正确调用子程序 单片机 PIC18F

> ID：10700459
> 
> 赞同：1
> 
> 时间：2012-05-22T10:44:22.910
> 
> 标签：c, embedded, microcontroller, microchip, mikroc

我有一个对微控制器 PIC18F 进行编程的项目，我必须将一个开关电路连接到微控制器板上，这个开关电路有一个电子锁和一个要连接的蜂鸣器。

锁最初是通电的。假设当我发送'1'时，蜂鸣器将以方波供电，锁将断电。当它收到“0”时，蜂鸣器将关闭，不再为锁供电。当它收到“2”时，锁应该通电，但如果蜂鸣器之前没有通电，则不应再次通电。

我的困惑在最后一部分。当我通过超级终端发送“2”并在它之前发送“0”时，蜂鸣器再次通电。

这是代码，

```
void buzzertest();
char uart_rd;
int buzzer;
void main() {
TRISB=0X00;
PORTB=0x00;
RB5_bit = 0xFF;                  //lock  open
UART1_Init(9600);               // Initialize UART module at 9600 bps
while (1) {                     // Endless loop
 if (UART1_Data_Ready())       // If data is received,
 {
    buzzer=1;
    uart_rd = UART1_Read();     // read the received data,
    if(uart_rd =='1') {
       RB5_bit = 0x00;  //lock closed
       buzzertest();
     }
     if(uart_rd =='0' ){   //disable buzzer
        RB1_bit = 0x00;   //buzzer
        buzzer=0;
       }//end if
      buzzer=0;

      if(uart_rd =='2'){   //disable lock
        RB5_bit=0xFF;
        if(buzzer!=1){
            buzzertest();
         }
       }//end if
     } //end outer if
    } //end while
}//end main
void buzzertest(){
 while(1){
  RB1_bit = 0xFF;  //buzzer
  Delay_ms(1000);
  RB1_bit = 0x00; //buzzer
  Delay_ms(1000);
  if (UART1_Data_Ready())
  break;
 }//end while loop
} 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:50:22.583

您在块`buzzer`外设置为 0 `if(uart_rd='0')`。所以当你来到`if(uart_rd='2')`块时，`buzzer`总是0，所以`if(buzzer!=1)`块总是被调用。

您是否尝试过使用调试器逐步完成此操作？它会很容易地出现这种事情。您还可以将这些`if`块更改为一个`switch`语句或一系列`if`/`else if`语句以避免这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:19:18.913

这是运行代码：

```
void buzzertest();
char uart_rd;
int buzzer;
void main() {
TRISB=0X00;
PORTB=0x00;
RB5_bit = 0xFF;                  //lock  open
UART1_Init(9600);               // Initialize UART module at 9600 bps
while (1) {                     // Endless loop
if (UART1_Data_Ready())       // If data is received,
 {
  uart_rd = UART1_Read();     // read the received data,
  if(uart_rd =='1') {
    RB5_bit = 0x00;  //lock closed
    buzzertest();
    buzzer=1  ;
   }
  else if(uart_rd =='0' ){   //disable buzzer
    RB1_bit = 0x00;   //buzzer
    buzzer=0;
   }//end else if

   else if(uart_rd =='2'){   //disable lock
     RB5_bit=0xFF;
     if(buzzer==1){
       buzzertest();
      }
    }//end else if
   } //end outer if
 } //end while
}//end main
void buzzertest(){
 while(1){
  RB1_bit = 0xFF;  //buzzer
  Delay_ms(1000);
  RB1_bit = 0x00; //buzzer
  Delay_ms(1000);
  if (UART1_Data_Ready())
   break;
 }//end while loop
} 
```

# ios - Trello iPhone 应用程序是如何开发的？

> ID：10700460
> 
> 赞同：10
> 
> 时间：2012-05-22T10:44:32.387
> 
> 标签：ios, web-applications, frameworks, native-code, trello

我想知道 Trello iphone 应用程序正在使用哪些库或框架。

**它是一个带有 JS 框架的 webapp 吗？如果是，是哪一个？**

**还是原生的？这里有哪些框架？**

我很好奇，因为我真的很喜欢 UI，并且在没有运气的情况下搜索了互联网。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-22T11:28:46.603

我在 Trello 团队并编写了 iPhone 应用程序。除了附件查看器之外，它都是本机代码，它只是一个 WebView。我们使用 RestKit 与我们的 API 进行通信，并帮助将数据本地缓存到 CoreData。否则，它只是一堆自定义的 UIViews 和 UIViewControllers。

# html - ie7 不采用 max-height max-width css 属性？

> ID：10700463
> 
> 赞同：1
> 
> 时间：2012-05-22T10:44:34.413
> 
> 标签：html, css

我有一个页面，我将 max-height max-width 属性赋予图像元素。它在 chrome 和 firefox 中运行良好，但在 ie-7 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:51:16.493

试试这个 CSS

```
*max-height:400px;
*max-width:400px; 
```

像那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:51:10.070

根据微软在 IE-7 中工作的最大宽度检查下面的链接

[http://msdn.microsoft.com/en-us/library/cc351024%28VS.85%29.aspx#positioning](http://msdn.microsoft.com/en-us/library/cc351024%28VS.85%29.aspx#positioning)

但是您必须设置适当的文档类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:55:04.377

```
*+html #div {
    max-height: 300px;
    max-width: 300px;
} 
```

使用这个代码......我认为它对你有用............

# django - 如何重定向像 mysite.com/ 这样的网址？到 mysite.com（没有“？”）django 或 nginx？

> ID：10700475
> 
> 赞同：0
> 
> 时间：2012-05-22T10:45:28.520
> 
> 标签：django, redirect, nginx

我遇到了以下问题：我在 nginx 下使用 Django。一段时间以来，我开始从事 SEO 工作。所以现在我需要重定向网址，例如

网站.com/? 到 site.com/

或者

site.com/some_page/? 到 site.com/some_page/

所以，问题是'？'..如果'？'之后有什么东西，我可以重定向 但如果它只是'？- 我不知道该怎么办..

我试图读取元 'REQUEST_URI' 但它是空的，而 GET 是空的，但这是正常的。也许我可以在 nginx 中对其进行一些破解，但我不确定这是正确的做法..

有什么提示可以提供帮助吗？提前谢谢..对不起我的英语）

升级版：

在nginx中尝试了以下事情：

```
 if ($request_uri ~ "[?]$") {
        rewrite ^/(.*)$ http://$host/$1? permanent;
    } 
```

如果网址像

“site.com/什么东西？”

但是当它是“site.com/something?city=4&myid=10?”时 它重定向到“site.com/something”

所以所有正常参数（“city，myid”）都丢失了。这对我不利，因为我需要拯救他们。仍然需要帮助.. 看来我用 nginx 也不是那么容易做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:02:52.337

我没有真正明白你的问题。您是否只想重定向包含或以“？”结尾的 URL。如果您想重定向所有 URL，只需使用：

```
rewrite ^/(.*)$ http://$host/$1 permanent; 
```

注意“？” 在您的重写目标结束时停止将 GET 参数添加到重定向请求中。见[http://wiki.nginx.org/HttpRewriteModule#rewrite](http://wiki.nginx.org/HttpRewriteModule#rewrite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:01:14.470

我会使用 nginx，你不需要启动 python 进程来进行重定向，并且在 nginx 中重定向非常容易，只需查看相关问题即可。

# javascript - 绘制成画布形状的图像

> ID：10700477
> 
> 赞同：3
> 
> 时间：2012-05-22T10:45:35.107
> 
> 标签：javascript, html, canvas, drawimage

我在画布中创建了一个形状，并想在其中绘制一个图像。

到目前为止，我可以将图像剪辑成形状，但我希望图像能够通过自由变换 -> 扭曲效果或类似效果自行调整。

在示例中：

*   左边的图像是剪辑的。
*   右图为原图。
*   底部图像是我想要达到的结果。

代码可以在这里看到：http: [//jsfiddle.net/NAe9c/](http://jsfiddle.net/NAe9c/)

代码结果可以在这里看到：[http ://www.tribalddb.pt/final.jpg](http://www.tribalddb.pt/final.jpg)

**编辑：**
谢谢大家
，我接受了这个问题的答案，但我找到了我的问题的另一种选择，CSS 3D。到现在才知道=P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:46:13.577

是的，您可以将事物绘制成平面并以透视方式呈现它们。您不能简单地使用 2D 变换来做到这一点，因此如果您想使用 2D 上下文但没有什么疯狂的，那么就会有一些数学问题。

我建议搜索“画布透视变换”，你会发现很多演示，比如这个：

[http://tulrich.com/geekstuff/canvas/perspective.html](http://tulrich.com/geekstuff/canvas/perspective.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:51:52.070

你需要对这样的事情进行透视校正，我认为让一个库为你做这件事会更容易，考虑过使用：

[三.js](https://github.com/mrdoob/three.js/)

# javascript - Extjs：仅在另一个字段有值时显示复选框

> ID：10700478
> 
> 赞同：0
> 
> 时间：2012-05-22T10:45:38.570
> 
> 标签：javascript, extjs, extjs4, extjs3

我有一个带有复选框列的网格，一切正常，但我只想在另一个字段具有特定值时显示复选框。我使用 3.3.1 版本，但我想另一个版本的示例会让我开始。如果不可能，禁用复选框也可以。我必须在渲染器或侦听器中这样做吗？怎么做？

```
var checkColumn = new Ext.grid.CheckColumn({ 
 header: 'Checklist OK ?',  
 dataIndex: 'checklist_ok',  
 width: 20, 
 align: 'center' 
}); 

cmDiverse = new Ext.grid.ColumnModel({ 
 defaults: {"sortable": true, "menuDisabled":false, "align":"right"}, 
 store: storeDiverse, 
 columns: [ 
   {"id":"id", "header": "id", "hidden": true, "dataIndex": "id", "width": 20}, 
   checkColumn, 
   ... 

gridDiverse = new Ext.ux.grid.livegrid.EditorGridPanel({ 
  id              : "gridDiverse", 
  enableDragDrop  : false, 
  loadMask        : true, 
  clicksToEdit    : 1, 
  layout          :'anchor', 
  cm              : cmDiverse, 
  .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:09:36.557

自己找的，在checkColumn中添加了如下渲染器

```
renderer : function(v, p, record){
  var type3m = record.get('type3m');
  if ((['6M','11e']).indexOf(String(type3m)) != -1){ //if the field type3m contains certain values
    p.css += ' x-grid3-check-col-td'; 
    return '<div class="x-grid3-check-col'+(v?'-on':'')+' x-grid3-cc-'+this.id+'"> </div>';
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T10:59:56.670

你可以像这样扩展你的 Ext.ux.grid.livegrid.EditorGridPanel：

```
Ext.extend(Ext.ux.grid.livegrid.EditorGridPanel,{
   constructor:function(config){
       config = Ext.apply({
           cm: this.createColumnModel()
       },config);
   },
   createColumnModel: function(){
      PUT YOUR LOGIC HERE AND RETURN AN ARRAY OF COLUMNS...
   }
}) 
```

# java - Google AppEngine：了解数据存储事务

> ID：10700479
> 
> 赞同：1
> 
> 时间：2012-05-22T10:45:46.010
> 
> 标签：java, google-app-engine, jpa, transactions, google-cloud-datastore

我最近遇到了这个恼人的问题，因为 GAE 无法在单个事务中处理多个实体组。Java伪代码如下：

```
public void doit(EntityManager em, long id)
{
  Customer c = null;

  em.getTransaction().begin();

  if (id != 0)
    c = em.find(Customer.class, id);

  boolean create = (c == null);

  if (create)
    c = new Customer();

  c.setName("John Doe");

  if (create)
    em.persist(c);

  em.getTransaction().commit();  
} 
```

目的是如果记录存在则更新客户数据，否则创建它。我最终遇到了一个异常，抱怨事务中有多个实体组。它不允许在一个事务中查找/更新 2 个不同的客户，因为这些实体属于不同的实体组。
所以这是我的（一般）问题：
假设我有一个银行应用程序，其中帐户实体具有余额字段。我当然想在交易中将钱从一个帐户转移到另一个帐户，以确保在转移过程中没有人更新两个帐户余额，并且在转移失败的情况下我需要回滚所有内容。GAE 甚至可以实现上述场景吗？

* * *

**更新：**使用本地 dev GAE 服务器尝试 XG 事务（请参阅下面的答案）时，请记住将以下内容添加到 VM 执行命令（否则它将不起作用）：

```
-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:33:54.853

您可以只使用 XG 交易（跨组交易） [https://developers.google.com/appengine/docs/java/datastore/transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)

# c# - 使用 xdocument 用 C# 解析 xml

> ID：10700486
> 
> 赞同：-1
> 
> 时间：2012-05-22T10:46:30.690
> 
> 标签：c#, xml, linq-to-xml

我有一个非常奇怪的 xml（这不是我的错），我想用 c# 和 linq 从中获取一些信息。XML 是：

```
<Match BeginTime="2012-05-16T13:21:56.6737546+02:00" EndTime="2012-05-16T13:24:04.3994176+02:00" Winner="2">

  <Period Number="1" MaximumDuration="PT2M" BeginTime="2012-05-16T13:21:56.6737546+02:00" 
    EndTime="2012-05-16T13:22:25.3952338+02:00" MatchDuration="PT2M" Winner="2">
    <Point Competitor="1" Value="1" MatchTime="PT6.5178048S" Time="2012-05-16T13:22:03.6018269+02:00" />
    <Point Competitor="2" Value="2" MatchTime="PT1M57S" Time="2012-05-16T13:22:21.4017106+02:00" />
  </Period>

  <Pause MaximumDuration="PT30S" AutomaticallyStartTime="true" BeginTime="2012-05-16T13:22:25.3952338+02:00" 
    EndTime="2012-05-16T13:22:36.1092608+02:00" />
  <Period Number="2" MaximumDuration="PT2M" BeginTime="2012-05-16T13:22:37.2592378+02:00"
     EndTime="2012-05-16T13:23:33.0777937+02:00" MatchDuration="PT2M" Winner="2">
    <Point Competitor="2" Value="3" MatchTime="PT10.2121084S" Time="2012-05-16T13:22:47.4932385+02:00" />
    <Point Competitor="1" Value="2" MatchTime="PT15.2950443S" Time="2012-05-16T13:22:52.5951376+02:00" />
    <Point Competitor="2" Value="2" MatchTime="PT41.1295728S" Time="2012-05-16T13:23:18.3988393+02:00" />
  </Period>
  <Pause MaximumDuration="PT30S" AutomaticallyStartTime="true" BeginTime="2012-05-16T13:23:33.0777937+02:00" />
  <Period Number="3" MaximumDuration="PT2M" />
</Match> 
```

如您所见，我有 3 个时期，在每个时期中，我的竞争对手编号为 1 或 2，并且每个竞争对手的积分都在“价值”中，但在一个时期内，我可以为一个竞争对手获得更多积分（“价值”）所以我必须以某种方式总结 ti，我正在努力解决这个问题，所以有什么建议或帮助任何人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:54:05.143

示例 XML

```
 <root>
      <ul class="connectedSortable ui-sortable" tid="1146">
        <li class="termName">Fall 2010</li>
        <li class="course" cid="2826" style="">FAC101: Art Appreciation</li>
        <li class="course" cid="2827" style="">CSC105: Using Modern Operating Systems</li>
        <li class="course" cid="2828" style="">CSC110: Introduction to Computer Science</li>
      </ul>
      <ul class="connectedSortable ui-sortable" tid="1156">
        <li class="termName">Winter 2011</li>
        <li class="course" cid="2829" style="">FAC105: Leadership and Problem Solving</li>
      </ul>
      <ul class="connectedSortable ui-sortable" tid="1159">
        <li class="termName">Spring 2011</li>
      </ul>
    </root> 
```

用 C# 阅读

```
var reader = new StringReader(termsXml);
var xdoc = XDocument.Load(reader);

var terms = from term in xdoc.Descendants("ul")
            select new
            {
                TermId = term.Attribute("tid").Value,
                Courses = term.Descendants("li")
            };

foreach (var term in terms)
{
    var courseIds = (from course in term.Courses
                        where course.Attribute("cid") != null
                        select course.Attribute("cid").Value).ToList();

    // do stuff with the courseids here

} 
```

# java - Java中的递归是如何实现的

> ID：10700491
> 
> 赞同：0
> 
> 时间：2012-05-22T10:46:54.880
> 
> 标签：java, recursion

Java中的递归是如何实现的？我的问题是关于在 Java 中执行递归方法时会发生什么。我隐约明白它使用堆栈，但我正在寻找一个清晰的解释与示例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T10:51:09.240

Java 对递归的处理与其他（命令式）语言没有太大区别。

有[一个](https://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)堆栈为每个方法调用保存一个堆栈帧。该堆栈是[调用堆栈](https://en.wikipedia.org/wiki/Call_stack)（或者只是“堆栈”，当上下文清楚地表明其含义时）。堆栈上的元素称为“堆栈帧”。

堆栈帧保存传入的方法参数和方法调用的局部变量（可能还有一些其他数据，例如返回地址）。

当一个方法调用自己（或者实际上是*任何*方法）时，就会为新调用的方法的参数和局部变量创建一个新的堆栈帧。

在方法执行期间，代码*只能*访问*当前*（即最顶层）堆栈帧中的值。

这样，单个（局部）变量似乎可以同时具有许多不同的值。

除了正常的方法调用之外，没有其他方式处理递归，除了多个堆栈帧将同时表示同一方法的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:12:54.163

当一个方法被调用时，它需要空间来保存它的参数、它的局部变量和返回地址，这个空间被称为激活记录（堆栈帧）。

递归正在调用一个恰好与调用者同名的方法，因此**递归调用实际上并不是一个调用它自己的方法，而是一个调用相同原始实例的另一个方法的实例化**。这些调用在内部由不同的激活记录表示，这意味着它们由系统区分。

# android - 自定义状态栏

> ID：10700492
> 
> 赞同：4
> 
> 时间：2012-05-22T10:46:56.550
> 
> 标签：android, statusbar

我想实现一个自定义状态栏，比如来自市场[超级状态栏的超级状态栏应用程序](https://play.google.com/store/apps/details?id=com.firezenk.ssb&hl=en)

到现在我还没有解决办法。谁能给我一个想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T03:48:25.403

查看[WindowManager](http://developer.android.com/reference/android/view/WindowManager.html)类。本质上，您将视图放置在状态栏的顶部（位置 0、0）。您需要正确设置高度，使用 BroadcastReceivers 和其他 API 来使用当前设备状态（即电池、信号、时间等）更新视图。这是可以做到的，只是非常困难。

来源：我是超级状态栏所基于的应用程序[StatusBar+的开发者。](https://play.google.com/store/apps/details?id=com.tombarrasso.android.wp7bar)它曾经在其 alpha 版本中是开源的，但不再可用。

# php - 查找并附加字符串正则表达式 PHP

> ID：10700494
> 
> 赞同：0
> 
> 时间：2012-05-22T10:47:06.100
> 
> 标签：php, html, regex

我对 php 很陌生，但这个问题可能需要正则表达式操作。基本上我网站中的所有 "" 都指向 localhost（即 img src="http://localhost/folder/img.png" ）。在源码下查看时，“localhost”不显示，但如果点击获取图片地址，它会显示“localhost”。然后我需要添加该 img src 的完整路径（即 img src="http://mywebsite.com/folder/img.png" ）。

我该怎么做呢？

任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:54:42.860

在您的项目中使用绝对 URL 来减少冲突和杂乱的开销。`BASE_URL`要使用绝对 URL，只需在通用文件中定义一个全局常量，例如：

```
define("BASE_URL", "http://localhost/project_folder", true); 
```

现在在任何地方使用它，例如：

```
<img src="<?php echo BASE_URL.'/img/image.png' ?>" /> 
```

在源代码中，生成的 html 将如下所示：`<img src="http://localhost/project_folder/img/image.png" />`

同样，您可以像这样使用它：

```
<script type="text/javascript" src="<?php echo BASE_URL ?>/js/my_script.js"></script> 
```

# java-me - J2ME中的SMS加密/解密

> ID：10700497
> 
> 赞同：0
> 
> 时间：2012-05-22T10:47:11.137
> 
> 标签：java-me, sms, encryption

我想用 J2ME 加密和解密 SMS，我尝试`TEA`了算法，但它会生成一个很长的加密文本。是否有任何其他轻量级算法可以生成与原始文本长度相同的加密文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:08:06.483

检查流[芯片](http://en.wikipedia.org/wiki/Stream_cipher)（如 RC4）。这些不会增加空间需求。加密数据的长度与普通数据相同。

如果要加密 7 位文本消息，则可以是 160 个字符。然后那些没有帮助。但如果纯文本的最大长度为 140 字节，则可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T22:44:31.693

流加密确实适用于此，但即使流加密也仅适用于位。因此，您需要压缩文本以适应尽可能少的位。使用紧缩在大多数情况下会起作用，但在较短的消息或包含不可压缩数据的消息上可能会失败。

另一种方法是自己将消息压缩成尽可能少的位。例如，数字 0..9 是 ASCII`30h`到`39h`. 但它们也可能以二进制形式存储`0000`为`1001`二进制。压缩 BCD 将是编码数字的好选择。数学专业的学生会立即看到您可以使用组和除法来满足最低存储要求，但这可能会增加相当多的 CPU 资源（更不用说开发该解决方案的乐趣了）。一旦您拥有最短的二进制表示，您就可以使用流密码进行加密。

所以现在你有了这个漂亮的短二进制表示。希望它将适合 SMS 消息。如果没有，您需要对生成的二进制表示进行编码。

基本上，您需要做的是：

```
send = Send(EncodeBin(Encrypt(EncodeTxt(plain)))) 
```

然后

```
plain = DecodeTxt(Decrypt(DecodeBin(Receive(send)))) 
```

但不要让它阻止你:)

# objective-c - ecslidingviewcontroller和uislider

> ID：10700498
> 
> 赞同：0
> 
> 时间：2012-05-22T10:47:23.650
> 
> 标签：objective-c, cocoa-touch, uislider

[我的Ecslidingviewcontroller](https://github.com/edgecase/ECSlidingViewController)项目有问题，如果我将 Uislider 插入视图中，我不能很好地触摸它，因为滑块的滑动运动被误认为是向左/向右滑动。这是 viewWillApper 上的代码：

```
 if (![self.slidingViewController.underLeftViewController isKindOfClass:[MenuViewController class]]) {
    self.slidingViewController.underLeftViewController  = [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];
  }

  if (![self.slidingViewController.underRightViewController isKindOfClass:[UnderRightViewController class]]) {
    self.slidingViewController.underRightViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"UnderRight"];
  }

  [self.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

有没有办法禁用滑块上的视图效果？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:17:59.937

**将手势识别器移动到导航栏**

```
[_navBarOutlet addGestureRecognizer:self.slidingViewController.panGesture]; 
```

**或删除此行**

```
[self.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

并添加这个

```
self.slidingViewController.shouldAddPanGestureRecognizerToTopViewSnapshot = YES; 
```

# python - 如何在python中安排定时事件

> ID：10700500
> 
> 赞同：2
> 
> 时间：2012-05-22T10:47:31.080
> 
> 标签：python, scheduler

我想在python中安排一个重复的定时事件，如下所示：“在时间X启动函数Y（在一个单独的线程中）并每小时重复一次”

“X”是固定时间戳

代码应该是跨平台的，所以我想避免使用像“cron”这样的外部程序来做到这一点。

代码提取：

```
    导入线程
    threading.Timer(10*60, mail.check_mail).start()
    #... 在此处设置定时事件
    而（1）：
        print("请输入命令")
        尝试：
            命令 = raw_input()
        除了：
            继续
        句柄命令（命令）

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:53:21.980

为您的日程安排创建一个[`dateutil.rrule`](http://labix.org/python-dateutil#head-470fa22b2db72000d7abe698a5783a46b0731b57),`rr`然后在您的线程中使用这样的循环：

```
for ts in rr:
    now = datetime.now()
    if ts < now:
        time.sleep((now - ts).total_seconds())
    # do stuff 
```

或者更好的解决方案来解释时钟变化：

```
ts = next(rr)
while True:
    now = datetime.now()
    if ts < now:
        time.sleep((now - ts).total_seconds() / 2)
        continue
    # do stuff
    ts = next(rr) 
```

# python - Sqlalchemy 存在联合继承和 Firebird

> ID：10700507
> 
> 赞同：1
> 
> 时间：2012-05-22T10:48:00.690
> 
> 标签：python, sqlalchemy, exists, declarative, class-table-inheritance

我尝试使用 sqlaclhemy 连接表继承，但发生了奇怪的情况。

```
class CommonObject(Base):
    __tablename__ = "objects"
    id = Column("objid", Integer, primary_key=True)
    objname = Column(String(32))
    ...    

class GoodsPlacement(Container, Loadable, Dumpable):
    __tablename__ = "goods_placements"
    id = Column("objid", Integer, ForeignKey("containers.objid"), primary_key=True)
    ...

class Departure(CommonObject):
     __tablename__ = "departures"
    id = Column(Integer, ForeignKey("objects.objid"),  primary_key=True)
    content_id = Column(Integer, ForeignKey("goods_placements.objid"))
    content = relationship("GoodsPlacement",
        primaryjoin="Departure.content_id==GoodsPlacement.id",
        foreign_keys=[content_id],
        lazy='joined',
        backref="departures")
    ... 
```

当我写查询时：

```
session.query(GoodsPlacement).filter(~GoodsPlacement.departures.any(Departure.status_id < 2)) 
```

它给我带来了这样的东西：

```
SELECT 
    objects.objid AS objects_objid,
    goods_placements.objid AS goods_placements_objid,
    objects.objname AS objects_objname 
FROM objects
JOIN goods_placements ON objects.objid = goods_placements.objid 
WHERE NOT (EXISTS (
    SELECT 1 
    FROM (
        SELECT
            objects.objid AS objects_objid,
            objects.objname AS objects_objname,
            departures.id AS departures_id,
            departures.content_id AS departures_content_id,
            departures.status_id AS departures_status_id 
        FROM objects
        JOIN departures ON objects.objid = departures.id)
    AS anon_1, objects 
    WHERE anon_1.departures_content_id = objects.objid
        AND anon_1.departures_status_id < :status_id_1)
) 
```

这不起作用，因为存在子句中的对象覆盖了外部对象。由于我使用的解决方法直接来自 sqlexpression，

```
session.query(GoodsPlacement).filter(~exists([1],
    and_("departures.status_id<2",
         "departures.content_id=goods_placements.objid"),
    from_obj="departures")) 
```

但它很大程度上取决于列名和表名。

如何在存在语句中为对象表指定别名？

Debian wheezy，python-2.7.3rc2，sqlaclhemy 0.7.7-1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:36:46.497

在如何设置列方面存在一个涉及声明性系统的错误。您为列提供的“objid”名称与“id”属性名称不同，是此处问题的根源。下面的测试用例近似于您的上述系统，并显示了一种解决方法，直到错误被修复：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base= declarative_base()

class CommonObject(Base):
    __tablename__ = "objects"
    id = Column("objid", Integer, primary_key=True)
    objname = Column(String(32))

class Container(CommonObject):
    __tablename__ = 'containers'
    id = Column("objid", Integer, ForeignKey("objects.objid"),  primary_key=True)

class GoodsPlacement(Container):
    __tablename__ = "goods_placements"
    id = Column("objid", Integer, ForeignKey("containers.objid"), primary_key=True)

class Departure(CommonObject):
    __tablename__ = "departures"
    id = Column(Integer, ForeignKey("objects.objid"),  primary_key=True)
    content_id = Column(Integer, ForeignKey("goods_placements.objid"))
    status_id = Column(Integer)
    content = relationship("GoodsPlacement",
        primaryjoin=lambda:Departure.__table__.c.content_id==GoodsPlacement.__table__.c.objid,
        backref="departures"
        )

session = Session()
print session.query(GoodsPlacement).filter(~GoodsPlacement.departures.any(Departure.status_id < 2)) 
```

输出：

```
SELECT objects.objid AS objects_objid, containers.objid AS containers_objid, goods_placements.objid AS goods_placements_objid, objects.objname AS objects_objname 
FROM objects JOIN containers ON objects.objid = containers.objid JOIN goods_placements ON containers.objid = goods_placements.objid 
WHERE NOT (EXISTS (SELECT 1 
FROM (SELECT objects.objid AS objects_objid, objects.objname AS objects_objname, departures.id AS departures_id, departures.content_id AS departures_content_id, departures.status_id AS departures_status_id 
FROM objects JOIN departures ON objects.objid = departures.id) AS anon_1 
WHERE anon_1.departures_content_id = goods_placements.objid AND anon_1.departures_status_id < :status_id_1)) 
```

# asp.net-mvc - 如何在 global.asax 中初始化一个变量并在其他控制器中使用它

> ID：10700508
> 
> 赞同：0
> 
> 时间：2012-05-22T10:48:09.170
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在 global.asax 中实现了一个变量，我想在其他控制器中使用它。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:59:00.857

如果你的变量是静态的，你可以使用这个 sintax - MvcApplication.VarName。其中 MVCApplication 您的主类继承自 System.Web.HttpApplication，而 VarName - 您的变量名。

# foreign-keys - OpenJPA CascadeType.DELETE 导致外键约束违反

> ID：10700515
> 
> 赞同：1
> 
> 时间：2012-05-22T10:48:47.673
> 
> 标签：foreign-keys, openjpa, cascading-deletes

我在带有 Oracle 的 WebLogic 10.0.x 上使用 OpenJPA (JPA 1.0)。我已经定义了一个 OneToMany 关系如下：

```
@Entity
public class Compound implements Serializable {
    ...
    @OneToMany(mappedBy="compound", fetch=FetchType.LAZY, cascade=CascadeType.ALL)
    private List<Submission> submissions = new ArrayList<Submission>();
    ...
}

@Entity
public class Submission implements Serializable {
    ...
    @ManyToOne(fetch=FetchType.LAZY, cascade=CascadeType.REFRESH)
    @JoinColumn(name="compoundId")
    private Compound compound;
    ...
} 
```

当我删除一个复合实体时，所有子提交实体也应该被删除。这作为一般规则起作用，除了我在这些表上设置了外键约束：

```
ALTER TABLE SUBMISSION
ADD CONSTRAINT FK_SUBMISSION_COMPOUND
    FOREIGN KEY (COMPOUNDID)
    REFERENCES COMPOUND(COMPOUNDID); 
```

现在，当我尝试删除 Compound 实体时，遇到以下异常：

```
ORA-02292: integrity constraint (HELC.FK_SUBMISSION_COMPOUND) violated - child record found {prepstmnt 3740 DELETE FROM Compound WHERE compoundId = ? [params=(long) 10384]} [code=2292, state=23000]" 
```

上述异常意味着 Open JPA 在将删除级联到子实体之前尝试删除父级。我已经通过谷歌阅读了一些关于这个异常的文章，可以追溯到 2006 年。但是，最近的文章表明这​​个 bug 已经修复了？

[http://mail-archives.apache.org/mod_mbox/openjpa-dev/200609.mbox/%3C14156901.1158019042738.JavaMail.jira@brutus%3E](https://issues.apache.org/jira/browse/OPENJPA-235)

[https://issues.apache.org/jira/browse/OPENJPA-235](https://issues.apache.org/jira/browse/OPENJPA-235)

谁能建议为什么这不起作用以及我能做些什么？我不愿意手动删除子实体，特别是因为这是我的架构中不太复杂的关系之一，我为此使用的任何解决方案都需要在其他地方应用。

谢谢杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:19:42.977

> 当我删除一个复合实体时，所有子提交实体也应该被删除。这作为一般规则起作用，除了我在这些表上设置了外键约束：

如果您可以更改外键约束，那么就数据库而言应该可以解决问题。我不确定 OpenJPA 在这里的表现如何。

```
ALTER TABLE SUBMISSION
ADD CONSTRAINT FK_SUBMISSION_COMPOUND
    FOREIGN KEY (COMPOUNDID)
    REFERENCES COMPOUND(COMPOUNDID)
    ON DELETE CASCADE; 
```

> 一件事-如上所述，这是Weblogic 10.0.x。我怀疑我们使用的是捆绑版本的 OpenJPA / Kodo，它可能已经很老了......

我自己的感觉是你提到的错误应该已经被这个版本修复了，但它也是 a) 时间足够接近以至于它可能没有被修复，并且 b) 可能是一个足够大的问题，我认为你应该花一些时间时间验证版本和修复。（实际上，我刚刚注意到[OpenJPA 1.0 是在 2007 年 8 月发布的](http://openjpa.apache.org/downloads.html)。这比我想象的要早得多，这使得您更有可能没有修复错误。）

如果您无法修改数据库（因为它是一个遗留系统，显然不打算让客户端依赖级联删除），并且如果您的版本中未修复该错误，则您必须管理顺序SQL 语句自己。

手动管理 SQL 语句的负担——这是 OpenJPA 应该*为*您做的事情之一——可能足以让管理人员升级 OpenJPA 或更新数据库中的外键约束。

我真的希望你得到比这个更好的答案。

# javascript - Jquery basic：如何随机化这个数组并仍然调用所有参数？

> ID：10700516
> 
> 赞同：0
> 
> 时间：2012-05-22T10:49:03.490
> 
> 标签：javascript, jquery

我有 2 个 div，`#col1`并且`#col2`，我需要在其中生成一些带有水果名称的 div。

到目前为止，我有：

```
var fruitArray = ['apples','banana','orange','grapes'];
for (fruit in fruitArray) {
    $('<div class="'+fruitArray[fruit]+'"></div>').appendTo('#col1').doSomething(); 

    $('<div id="'+fruitArray[fruit]+'"></div>').appendTo('#col2').doSomething(); 
} 
```

结果是这样的：

```
<div id="#col1">
    <div class="apples"></div>
    <div class="banana"></div>
    <div class="orange"></div>
    <div class="grapes"></div>
</div>
<div id="#col2">
    <div id="apples"></div>
    <div id="banana"></div>
    <div id="orange"></div>
    <div id="grapes"></div>
</div> 
```

如何随机化数组，使其看起来像：

```
<div id="#col1">
    <div class="orange"></div>
    <div class="apples"></div>
    <div class="orange"></div>
    <div class="grapes"></div>
</div>
<div id="#col2">
    <div id="grapes"></div>
    <div id="orange"></div>
    <div id="apples"></div>
    <div id="banana"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:59:05.477

简单`shuffle`扩展：

```
Array.prototype.shuffle = function() {
    var shuffledArray = [];
    while (this.length) {
        shuffledArray.push(this.splice(Math.random() * this.length, 1)[0]);
    }
    while (shuffledArray.length) {
        this.push(shuffledArray.pop());
    }
    return this;
} 
```

像这样使用它

```
var fruitArray = ['apples','banana','orange','grapes'].shuffle();
for (var i = 0; i < fruitArray.length; i++) {            
    $('<div class="'+fruitArray[i]+'"></div>').appendTo('#col1').doSomething(); 

    $('<div id="'+fruitArray[i]+'"></div>').appendTo('#col2').doSomething(); 
} 
```

# android - Honeycomb 下的 Android 不支持 Bytebuffer array() 方法

> ID：10700518
> 
> 赞同：2
> 
> 时间：2012-05-22T10:49:20.093
> 
> 标签：android, android-ndk, bytebuffer

我正在开发一个项目，我想在 Android SDK 级别和 Android NDK 级别之间发送一个字节缓冲区。

推荐的方法似乎是使用 ByteBuffer 使用 allocateDirect() 方法，即在 SDK 级别执行：

```
ByteBuffer frameBuf = ByteBuffer.allocateDirect( 10000 );
int frameSize = fillMyArrayMethod(frameBuf.array());
UseArrayInNdk(frameBuf); 
```

在我的 ICS 手机上一切正常，但是在我朋友的 Android 2.3.3 版本上，代码崩溃了。

调查发现，2.3.3版本手机上抛出UnsupportedOperationException异常的是ByteBuffer的array()方法。

显然 Honeycomb 以下的 Android 版本不支持此方法。

因此，由于我无法获得指向缓冲区的数组指针，我现在不得不在我的 NDK 中使用它之前为数组中的所有数据创建一个额外的 put()，即像这样：

```
ByteBuffer frameBuf = ByteBuffer.allocateDirect( 10000 );
Byte[] tmpBuf = new byte[10000];
int frameSize = fillMyArrayMethod(tmpBuf);

for (int i=0; i<frameSize; i++)
{
    frameBuf.put(i, tmpBuf[i]);
}
UseArrayInNdk(frameBuf); 
```

好吧，在 Android Honeycomb 及以上代码上执行此操作很好，但在 2.3.3 及以下版本是否有更智能的方法来避免额外的复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:17:18.353

Dalvik 实现的变化是直接字节缓冲区在 ICS 之前没有由数组支持。不能保证在以后的版本中可以调用 array()。[在](http://developer.android.com/reference/java/nio/ByteBuffer.html#hasArray%28%29)使用`ByteBuffer`. _ 即使您不能直接使用数组，也可以像为 ICS 编码的方式一样，始终使用批处理[put()](http://developer.android.com/reference/java/nio/ByteBuffer.html#put%28byte%5b%5d,%20int,%20int%29)方法，而无需在循环中调用它。

最后，让我引用 Android JNI 提示页面：[根据 VM 中直接字节缓冲区访问的实现方式，从用 Java 编写的代码访问数据可能非常慢。](http://developer.android.com/guide/practices/jni.html)

# apache-flex - 如何将参数传递给flex中的onTimer函数？

> ID：10700520
> 
> 赞同：0
> 
> 时间：2012-05-22T10:49:35.873
> 
> 标签：apache-flex, timer

我想将参数传递给计时器的 timerEvent 函数。

是否可以？

我知道在 c++ 中，我可以使用函数对象，或者只使用 boost::bind。有没有类似 boost::bind 的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:09:16.757

您还可以使用自定义类扩展 Timer 类，例如：

```
public class DataTimer extends Timer 
    {
        private var _data:Object;

        public function DataTimer(delay:Number, repeatCount:int=0) 
        {
            super(delay, repeatCount);
            _data = {};
        }

        public function get data():Object 
        {
            return _data;
        }

        public function set data(value:Object):void 
        {
            _data = value;
        }
    } 
```

并在你的回调函数中使用它

```
var timerObj:DataTimer = event.currentTarget as DataTimer;
trace("data: "+timerObj.data); 
```

# c++ - 支持函数声明应该去哪里？

> ID：10700521
> 
> 赞同：0
> 
> 时间：2012-05-22T10:49:36.140
> 
> 标签：c++, header-files, private-header

我有一个 .cpp 源文件，其中包含一些需要公开访问的功能和一些仅在此源文件中使用的支持功能。

我一直将***所有***这些函数声明放在头文件中，因为我个人发现在一个地方查看类提供的所有内容很有用。但是我想指出这些函数是否供内部使用，类似于`private`访问修饰符，但不使用类（它们是独立函数）。

一些可能的解决方案是：

*   将私有声明放在源文件中。
*   将私有声明放在单独的标题中。

这两种解决方案都将公共和私有功能拆分为单独的文件，我想避免这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T10:52:04.397

如果函数不是供公众使用的，则不应将其放入标题中。将它们放入使用它们的源文件中。

要完全隐藏这些函数以防止在源文件之外使用，通常需要执行以下操作之一：

*   函数声明为`static`.
*   函数被放入一个未命名的`namespace`.

后者被认为是可取的。实际上，C++ 标准 7.3.1.1 规定：

> 在命名空间范围内声明对象时，不推荐使用 static 关键字，未命名命名空间提供了更好的选择。

有关未命名命名空间与静态的更多讨论，请参阅[未命名/匿名命名空间与静态函数](https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions)和相应的[comp.lang.c++.moderated 线程](http://groups.google.com/group/comp.lang.c++.moderated/browse_thread/thread/674cad676080b4df)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T10:54:10.143

如果私有函数只在单个源文件中使用，那么您不需要任何额外的头文件。只需标记函数`static`或使用匿名函数`namespace`。

如果可以从许多源文件中使用这些函数，请在一个单独的头文件中以特殊的`namespace`. 这是我的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:41:59.617

> 支持函数声明应该去哪里？

他们不必去任何地方。使它们成为静态并将它们保存在源文件中。如果它们只在单个源文件中使用，则无需在任何标题中提出声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T12:15:27.823

你没有提到这些“函数”是否是一个类的成员，但我会假设它们是。如果是这样，我建议您查看**'pimpl idiom'**。基本上，这意味着将您想要保持私有的所有或大部分内容放入一个单独的类中，然后在您的类声明中只有一个指向该类实例的指针。例如：

```
class MyClass
{
    // ... some stuff
private:
    SecretObject obj_;
    int hiddenCall();
}; 
```

变成

```
class MyClassImpl;

class MyClass
{
private:
    MyClassImpl* impl_;
}; 
```

然后的想法是，您的实现类的所有声明和定义都将进入您的 .cpp 文件，该文件将其隐藏在编译单元之外的任何地方。这种方法有许多重要的优点：

*   隐藏实现，因此公开可用的标头不会泄露太多的实现。
*   可以通过删除标头中的依赖项来提高编译速度 - v. 如果标头包含很多，这很重要。
*   可用于将客户端代码与它们不需要构建的库“隔离”，例如数据库 API 等。

有很多缺点：

*   如果代码隐藏在 cpp 文件中，可能会使单元测试更加棘手。就我个人而言，我发现一个更好的解决方案是拥有一个单独的私有头文件和实现文件，这样你就可以控制你的代码的客户端得到什么，但测试工具仍然可以充分测试它。您可以简单地将`MyClassImpl`标头包含在您的 cpp 文件中，但不要将其包含在`MyClass`标头中 - 这会破坏对象。
*   `MyClass`和之间的间接`MyClassImpl`编码/管理可能会令人厌烦。

不过，一般来说，这可能是实现您想要达到的目标的最佳方式。查看 Herb Sutter 的文章以获得更深入的解释。

另一方面，如果您谈论的是与类没有直接关系的*自由函数*，那么我会将它们放在您的 cpp 文件中的**未命名命名空间中。**例如：

```
namespace {

    // Your stuff goes here.

}; 
```

同样，如果您采用这种方法，您会遇到如何访问这些函数的单元测试问题，但如果这确实是一个问题，则可以通过创建特定的命名空间、条件编译等来解决这个问题。不理想，但可能的。

# php - 从数据库读取纬度/经度并在地图上放置标记

> ID：10700522
> 
> 赞同：0
> 
> 时间：2012-05-22T10:49:36.230
> 
> 标签：php, javascript, jquery, sql, openlayers

下面是我的示例代码。在`index.php`我定义 jquery 选项卡。其中一个选项卡应打开地图（openlayers）并在此地图上放置标记。每个标记的纬度和经度取自 MySQL DB。问题是我不知道如何以及在哪里执行`put_marker`从 DB 读取数据的函数。我知道这应该是一个基本问题。

**索引.php**

```
 <script type="text/javascript">
              $(document).ready(function() {
                    $("#tabs").tabs({
                    ajaxOptions: {
                        success: function( html ) {
                            $("#content").html(html);
                            page_init();
                        }
                    }
                });
              });
</script>
    <div id="tabs">
        <ul>
            <li><a href="administration.php"><span>Administration</span></a></li>
            <li><a href="map.php"><span>Map</span></a></li>
        </ul>
    </div> 
```

**地图.php**

```
 <?php
        include_once 'include/DatabaseConnector.php';
        $query4="SELECT r.resLatitude, r.resLongitude FROM resources r;";
        $result4=DatabaseConnector::ExecuteQueryArray($query4);

        foreach ($result4 as $row):
// HERE I HAVE A PROBLEM
            //putMarker($row['resLatitude'],$row['resLongitude']);      
        endforeach;
    ?>
        <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
        <script type="text/javascript">
            var map, layer;

            function page_init(){
                map = new OpenLayers.Map("basicMap");
                var mapnik         = new OpenLayers.Layer.OSM();
                var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
                var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
                var position       = new OpenLayers.LonLat(2.07833,41.2969).transform( fromProjection, toProjection);
                var zoom           = 15; 
                map.addLayer(mapnik);
                map.setCenter(position, zoom );
            }

            function putMarker(latMarca, lonMarca)
            {
                var lonLat = new OpenLayers.LonLat(lonMarca ,latMarca ).transform(new OpenLayers.Projection("EPSG:4326"),map.getProjectionObject());
                var zoom=16;
                var markers = new OpenLayers.Layer.Markers( "Markers" );
                map.addLayer(markers);
                markers.addMarker(new OpenLayers.Marker(lonLat));
                map.setCenter (lonLat, zoom);
            }
        </script>
        <div id="basicMap" style="width: 100%; height: 100%;">

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:22:21.570

好吧，您在服务器端的 PHP 中获得了标记。您将它们传递给客户端的 Javascript。两个不同的地方。

实际上，即使在最简单的情况下也不需要 JSON 操作。在您的*map.php 中*，您可以执行以下操作：

```
 ..
    echo '<script type="text/javascript">';
    echo '$(document).ready(function() {';
    foreach ($result4 as $row){
        echo 'putMarker('.$row['resLatitude'].','.$row['resLongitude'].');';      
    }
    echo '});';
    echo '</script>';
    ... 
```

这些代码将在客户端解释为纯 JS，但其值取自 PHP。

*顺便说一句，以同样的方式编写代码并不是一个好方法。看看**MVC 框架**，代码和外观是相互分离的。*

# c# - 将一个数组拆分为 2 个数组 C#

> ID：10700529
> 
> 赞同：32
> 
> 时间：2012-05-22T10:50:04.213
> 
> 标签：c#, arrays, linq

**编辑：我尝试了 Take/Skip 方法，但出现以下错误：**

```
Cannot implicitly convert type 'System.Collections.Generic.IEnumerable<string>' to   
'string[]'. An explicit conversion exists (are you missing a cast?) 
```

**我不知道我做错了什么，因为我复制了 Saeed 的代码。**

我有一个字符串数组（包含 20 到 300 个项目），我想将它分成 2 个单独的数组，从第一个数组的中间开始。

我知道如何使用 for 循环来做到这一点，但我想知道是否有更快/更好的方法来做到这一点。我还需要能够正确拆分数组，即使它有奇数个项目，例如：

```
string[] words = {"apple", "orange", "banana", "pear", "lemon"};
string[] firstarray, secondarray;
SplitArray(words, out firstarray, out secondarray); // Or some other function
// firstarray has the first 3 of the items from words, 'apple', 'orange' and 'banana'
// secondarray has the other 2, 'pear' and 'lemon' 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-22T10:53:33.307

您可以使用 linq：

```
firstArray = array.Take(array.Length / 2).ToArray();
secondArray = array.Skip(array.Length / 2).ToArray(); 
```

尽管原始数组大小是奇偶校验的，为什么这有效？

第一个数组接受`array.Length / 2`元素，第二个跳过第一个`array.Length / 2`元素，这意味着这两个数组之间没有任何冲突。当然，如果元素的数量是奇数，我们不能将数组分成大小相等的两个部分。

如果你想在前半部分有更多的元素（在奇怪的情况下），这样做：

```
firstArray = array.Take((array.Length + 1) / 2).ToArray();
secondArray = array.Skip((array.Length + 1) / 2).ToArray(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T10:53:41.983

```
string[] words = {"apple", "orange", "banana", "pear", "lemon"};
int mid = words.Length/2;
string[] first = words.Take(mid).ToArray();
string[] second = words.Skip(mid).ToArray(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-22T11:00:34.450

如果您不想/不能使用 LINQ，您可以简单地执行以下操作：

```
 string[] words = { "apple", "orange", "banana", "pear", "lemon" };
    string[] firstarray, secondarray;
    int mid = words.Length / 2;
    firstarray = new string[mid];
    secondarray = new string[words.Length - mid];
    Array.Copy(words, 0, firstarray, 0, mid);
    Array.Copy(words, mid, secondarray, 0, secondarray.Length); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-22T10:57:43.430

一种更通用的方法，可以将其拆分为您指定的多个部分：

```
public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> list, int parts)
        {
          return list.Select((item, index) => new {index, item})
                       .GroupBy(x => (x.index + 1) / (list.Count()/parts) + 1)
                       .Select(x => x.Select(y => y.item));
        } 
```

*编辑感谢 skarmats

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-22T10:56:47.890

```
string[] words = { "apple", "orange", "banana", "pear", "lemon" };
var halfWay = words.Length/2;

var firstHalf = words.Take(halfWay);
var secondHalf = words.Skip(halfWay); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-03T21:55:58.327

您可以使用范围表示法很容易地实现这一点：

```
var x = new[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11};
var pivot = x.Length / 2;
var p1 = x[..pivot];
var p2 = x[pivot..]; 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-08-18T23:38:19.360

以防万一有人想使用函数：

```
 static void Main(string[] args)
    {
        string[] ar = { "apple", "orange", "banana", "pear", "lemon" };

        int half =  ar.Length / 2;

        //  Console.WriteLine(string.Join(',', Split(ar,0, half)));

        Console.WriteLine(string.Join(',', Split(ar,half, ar.Length)));

        Console.ReadKey();
    }

    public static IEnumerable<T> Split<T>(IEnumerable<T> items, int start, int end)
    {
        return items.Skip(start).Take(end);
    } 
```

# mysql - MySQl-获取每个部门的工资

> ID：10700533
> 
> 赞同：0
> 
> 时间：2012-05-22T10:50:24.250
> 
> 标签：mysql, sql

怎样才能拿到每个部门的前两名薪水？表看起来像：

```
-------------------------
name     dept      sal
-------------------------
name1    CSE       100000
name2    CSE       200000
name3    ECE       200000
name4    EEE       400000
name5    CSE       700000
name6    ECE       600000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:02:47.417

**第一部**

```
SELECT dept
FROM  `Table` 
WHERE dept = 'CSE'
ORDER BY sal DESC 
LIMIT 0 , 2 
```

**二部**

```
SELECT dept
FROM  `Table` 
WHERE dept = 'ECE' 
ORDER BY sal DESC 
LIMIT 0 , 2 
```

*每个上述查询将向您显示每个部门的前两个结果。*

**更新 ：**

```
SELECT dept, sal
FROM  `tbl_practice` 
WHERE dept =  'CSE'
OR dept =  'ECE'
ORDER BY sal DESC 
LIMIT 0 , 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:36:02.877

试试这个查询

```
select * from (
 SELECT  DISTINCT dept
        FROM    tableName )a
join tableName b
on a.dept >=b.dept
and 
a.dept <=b.dept
and sal >=(
select sal from tableName 
  where a.dept=b.dept
  order by sal limit 1,1
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:29:02.243

```
 select profession as d,(select max(sal) 
 from emp where profession like d) as firstsal,(
 select sal from emp 
 where profession like d order by sal desc limit 1,1) as secondsal from emp 
 GROUP BY profession 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:53:01.303

您需要使用聚合函数`SUM`和`GROUP BY`子句。

```
SELECT dept, SUM(Sal) TotalSalary
FROM tableName
GROUP BY dept
Order By TotalSalary DESC
Limit 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T10:53:23.887

`LIMIT`在你的 statememt 中使用： [http ://dev.mysql.com/doc/refman/5.5/en/select.html](http://dev.mysql.com/doc/refman/5.5/en/select.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T10:58:51.210

不要以为在单个 SQL 语句中就可以获取数据。如果您想使用 SQL 来实现它，您将需要使用一个存储过程，该过程将遍历所有部门并使用 limit 和 order by 获取前 2 个薪水行。

# python - waf pkg-config uselib_store 变量

> ID：10700538
> 
> 赞同：2
> 
> 时间：2012-05-22T10:50:41.243
> 
> 标签：python, gstreamer, configure, waf

我正在尝试使用 waf 为我的一个项目设置 gstreamer 的包含路径。我认为做这样的事情应该得到路径

```
def configure(conf):                                                              
    conf.check_cfg(package='gstreamer-0.10', args='--cflags --libs',              
            uselib_store='GSTREAMER') 
```

上面的代码会在命令行上被翻译成这样的东西

```
vickey@tb:~$ pkg-config --cflags --libs gstreamer-0.10
-pthread -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/gstreamer-0.10 -I/usr/include/libxml2  -pthread -lgstreamer-0.10 -lgobject-2.0 -lgmodule-2.0 -lxml2 -lgthread-2.0 -lrt -lglib-2.0 
```

文档建议它将标志存储到 uselib 变量 GSTREAMER，如果找不到包，则会引发配置错误。

当我尝试使用 GSTREAMER 打印值时

```
print(GSTREAMER) 
```

我不明白价值观。这些值是否存储在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:09:05.987

```
 1 def options(opt):                                                               
 2     opt.load("compiler_cxx")                                                    
 3                                                                                 
 4 def configure(conf):                                                            
 5     conf.check_cfg(package='gstreamer-0.10', args='--cflags --libs',            
 6             uselib_store='GSTREAMER')                                           
 7                                                                                 
 8     print (conf.env.LIB_GSTREAMER);                                                                   
 9                                                                                 
10 def build(bld):                                                                 
11     subdirs = [] 
```

# plugins - 当 slave executor 离线时，hudson 可以发送电子邮件吗

> ID：10700547
> 
> 赞同：1
> 
> 时间：2012-05-22T10:51:05.707
> 
> 标签：plugins, hudson, slave

在我的公司，我们使用 8 台从属构建机器运行 Hudson。有时，这些从站会离线，需要重新启动。如果没有人在看 Hudson 网页，这可能会被忽视。

当奴隶离线时，有没有办法向某人发送电子邮件？我似乎在列表中找不到相关的插件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-22T10:59:18.573

也许你应该考虑使用[email-ext 插件](http://wiki.hudson-ci.org/display/HUDSON/Email-ext+plugin)

再见！

# php - PHP while 循环只迭代一次

> ID：10700554
> 
> 赞同：0
> 
> 时间：2012-05-22T10:51:30.533
> 
> 标签：php, loops, while-loop, iteration

快速提问；

`$sql = mysql_query("SELECT * FROM cronjobs WHERE status = 0 ");`

```
while($cronjob = mysql_fetch_array($sql)){
    if($cronjob['suid'] != $cronjob['cuid']){
        //echo 'not equal<br>';
        $set = 0;
        $sid = $cronjob['sid'];
        $suid = $cronjob['suid'];
        $cuid = $cronjob['cuid'];
        $set = notify($sid, $suid, $cuid);
        if($set==1){
            //echo 'notified<br>';
            $sql = "UPDATE cronjobs SET status = '1' WHERE id='".$cronjob['id']."'";
            if(mysql_query($sql)){
               echo '1<br>';
              $set = 0;
          }
        }
      }
   }
} 
```

`notify()`将`return 1`（数字）

问题是即使有更多记录，也只执行了一次 while 循环迭代。我不知道这里有什么问题。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:02:15.920

请将内部 $sql 变量名更改为其他名称..外部 $sql 和内部 $sql 正在发生冲突

```
$sql = mysql_query("SELECT * FROM cronjobs WHERE status = 0 ");

while($cronjob = mysql_fetch_array($sql)){
    if($cronjob['suid'] != $cronjob['cuid']){
        //echo 'not equal<br>';
        $set = 0;
        $sid = $cronjob['sid'];
        $suid = $cronjob['suid'];
        $cuid = $cronjob['cuid'];
        $set = notify($sid, $suid, $cuid);
        if($set==1){
            //echo 'notified<br>';
            $sql_2 = "UPDATE cronjobs SET status = '1' WHERE id='".$cronjob['id']."'";
            if(mysql_query($sql_2)){
               echo '1<br>';
              $set = 0;
          }
        }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:21:50.677

只是一个观察：

因为你有：

```
$sql = mysql_query("SELECT * FROM cronjobs WHERE status = 0 ");  
while($cronjob = mysql_fetch_array($sql)){ 
```

它会在每一次循环中执行一次查询。如果你有 100 行，它会执行 100 次。如果你这样做，那么它只执行一次。

```
$sql = mysql_query("SELECT * FROM cronjobs WHERE status = 0 ");  
$res = mysql_fetch_array($sql);
while($cronjob = $res){ 
```

它也不会发生冲突！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T12:19:38.247

当查询 ($query) 和结果对象 ($result) 具有相同的变量时，这显然是一个问题。在 WHILE 循环中为 mysql_query() 尝试不同的名称。

# javascript - 是否可以在浏览器中生成 SSL 证书？

> ID：10700557
> 
> 赞同：3
> 
> 时间：2012-05-22T10:51:45.207
> 
> 标签：javascript, ssl

对于管理界面，我们希望使用 SSL 实现客户端身份验证。这个想法是，在注册过程中，每个用户都会生成一个 SSL 证书，该证书在浏览器中注册并用于向服务器验证客户端。重要的是私钥永远不会离开客户端。因此，在服务器上生成证书并将其发送给客户端不是解决方案。

是否可以使用 JavaScript 在浏览器（例如 IE 9+、Firefox 12+、Chrome）中生成 SSL 证书？是否可以注册证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T09:08:41.363

您无法在浏览器中真正生成*证书*，但您可以在浏览器中生成*证书请求*（或等效项）：密钥对在浏览器中生成，私钥永远不会离开它。

（请注意，如果您直接在浏览器中生成证书，它充其量是自签名的，因为 CA 不会给您它的私钥。这就是为什么您只能有一个证书请求，因为几乎没有需求用于生成自签名证书。不过，我认为有一个 Firefox 扩展可以做到这一点。）

证书请求被发送到服务器，但格式取决于浏览器和使用的方法。您将在服务器端获得的是公钥，由您实施的服务将其转换为证书（当然，除非您使用现有服务）。您可以在[此答案](https://stackoverflow.com/a/9198400/372643)中找到有关此的更多详细信息。

在服务器上生成证书后，可以将其重新导入以与私钥相关联。

# vb.net - 调用面板上表单按钮的点击事件

> ID：10700558
> 
> 赞同：0
> 
> 时间：2012-05-22T10:51:46.493
> 
> 标签：vb.net, winforms, forms

我有一个有两个选项卡的 tabstrip 控件。在一个选项卡上，我有面板控件，我在其中显示了另一种形式，而另一种形式有一个按钮“提交”。在其他选项卡上，我有一些控件和一个按钮“确定”。现在单击“确定”按钮时，我必须在其他选项卡的面板上调用表单的“提交”按钮的单击事件。所有这些都在 vb.net 的 windows 应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:05:34.100

将表单加载到面板后，您需要调用 AddHandler 将提交按钮的单击事件处理程序添加为确定按钮的事件处理程序。例如：

```
AddHandler btnOk.Click, AddressOf childForm.btnSubmit_Click 
```

# ios - IBAction - 为什么在头文件中声明它们

> ID：10700562
> 
> 赞同：4
> 
> 时间：2012-05-22T10:51:54.420
> 
> 标签：ios, header, ibaction

我注意到通常的做法是在头文件中声明 IBAction 方法。我还注意到， Interface Builder**没有**必要这样做来识别 IBAction 方法并允许我将它们链接到控件。那么在头文件中声明IBAction方法的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:56:58.780

没有充分的理由，除非你有充分的理由将它们暴露给其他人——或者——如果你需要在 Interface Builder.app 中打开 nib。

有些人可能出于*历史*原因或出于习惯而这样做。在 Xcode 4 之前，有一个单独的应用程序来编辑 nib（Interface Builder）。Interface Builder 没有像您在 Xc4 中所知道的那样得到编译器的支持；它只是使用一个基本的 objc 解析器来解释标题。随着时间的推移，它学会了与 Xcode 通信。在早期，您必须拖放标题才能同步它们；）

# c# - FileIO.ReadTextAsync 偶尔挂起

> ID：10700570
> 
> 赞同：2
> 
> 时间：2012-05-22T10:52:16.700
> 
> 标签：c#, windows-runtime

我只是在试验 WinRT，我正在创建的一个演示应用程序是一个基本的“记事本”风格的应用程序，它可以加载/保存到本地存储。虽然我熟悉`async`构建 WinRT 应用程序的正确方法，但我的演示应用程序使用同步`Load`来保持简单。

问题是，当拨打电话时`Load`，它在 3 次中有 2 次有效，其余时间应用程序挂在通话中`var result = await FileIO.ReadTextAsync(storageFile);`

```
public class ContentStorage : IContentStorage
{
    private const string FileName = "contents.txt";

    public string Load()
    {
        return LoadAsync().Result;
    }

    public void Save(string content)
    {
        SaveAsync(content);
    }

    private static async Task<string> LoadAsync()
    {
        var storageFile = await LocalFolder.GetFileAsync(FileName);
        var result = await FileIO.ReadTextAsync(storageFile);

        return result;
    }

    private static async void SaveAsync(string content)
    {
        var storageFile = await LocalFolder.CreateFileAsync(FileName, CreationCollisionOption.ReplaceExisting);

        FileIO.WriteTextAsync(storageFile, content);
    }

    private static StorageFolder LocalFolder
    {
        get { return ApplicationData.Current.LocalFolder; }
    }
} 
```

我在这里做一些非常愚蠢的事情吗？

FWIW，我尝试更改`Load`为仅在每个步骤上显式阻止，这将悬挂提高到 20 分之一，但我仍然不明白为什么它完全悬挂......

```
public string Load()
{
    var storageFile = LocalFolder.GetFileAsync(FileName).AsTask().Result;
    var result = FileIO.ReadTextAsync(storageFile).AsTask().Result;

    return result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:14:11.487

> 虽然我熟悉`async`构建 WinRT 应用程序的正确方法，但我的演示应用程序使用同步`Load`来保持简单。

并不真地。将同步代码与异步代码混合起来非常复杂。`async`随处使用要简单得多。

当一个`async`方法在等待一个任务后继续执行时，默认会回到原来的上下文。（我在我的[`async`/`await`博客文章](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)中对此进行了更详细的介绍）。一些上下文（比如 UI 上下文）只允许一个线程；如果该线程被阻塞（例如 on `Task.Result`），则该`async`方法无法进入该上下文以完成其执行。这会导致死锁。

了解更多信息：

*   [`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)有很多关于上下文捕获和恢复的细节。
*   Parallel Team Blog 上的 Stephen Toub 有另一篇博文[Await, and UI, and deadlocks！天啊！](http://blogs.msdn.com/b/pfxteam/archive/2011/01/13/10115163.aspx)，它详细解释了这种特殊的死锁情况。
*   [我在MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-AU/async/thread/269172a3-adb9-4b5e-9ac1-8b67ff920177#48b596cc-5eca-4d0e-8743-10d59b64e2ce)中为这种死锁写了详尽的答案。

这种死锁非常有名，以至于微软实际上已经对其进行了演示：

*   [作者：Stephen Toub 在 BUILD 会议上（2011 年 9 月 16 日）。](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)
*   [作者：DevConnections 的 Lucian Wischik（2012 年 3 月 26 日）。](http://blogs.msdn.com/b/lucian/archive/2012/03/29/talk-async-part-1-the-message-loop-and-the-task-type.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:09:58.530

尝试将`ConfigureAwait(false`) 与 await 操作一起使用，可能`ReadTextAsync`不是线程安全的，所以它会在 await 完成时挂起 UI 线程并返回到 UI 线程。

# php - Xpath 返回匹配的字符串和它周围的单词

> ID：10700571
> 
> 赞同：1
> 
> 时间：2012-05-22T10:52:20.467
> 
> 标签：php, xpath

假设我有

```
<body>
    <p>This is a paragraph</p>
    <p>This is another paragraph, there are three paragraphs in this page</p>
    <p>Lorem ipsum dolor sit amet. Just another paragraph. Ut enim ad minim veniam.</p>
</body> 
```

我想找到与“段落”匹配的所有单词，并在匹配单词之前和之后用 4 个单词将其包围。结果列表如下：

*   这是一个**段落。**
*   这是另**一段**，共有三段……
*   ...段落，本页共有三个**段落。**
*   ...坐下来。只是另外**几段**。Ut enim ad minim...

我是 xpath 的新手，所以我能做的最好的就是这段代码，它将获取所有包含“段落”的文本节点

```
$test = $xml->xpath('//body//*[text()[contains(.,"paragraph")]]'); 
```

结果：

*   这是一段
*   这是另一段，本页共有三段
*   Lorem ipsum dolor sit amet。只是另一个段落。Ut enim ad minim veniam。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:57:16.327

您提到 PHP 的事实表明您可能正在寻找 XPath 1.0 解决方案。

这里有几个问题：

*   XPath 1.0 没有很好的文本处理能力，无法用用户定义的函数来弥补

    XPath（1.0 或 2.0）无法创建新节点，因此难以返回结构化结果。

如果您坚持使用 PHP，因此使用 XPath 1.0，我想我会满足于将匹配的文本节点返回到 PHP 应用程序，然后在 PHP 中进行其余的处理。

另一种方法是使用 XSLT：在 XSLT 1.0 中这仍然是一个挑战，但借助递归模板，这当然是可能的。

# plugins - System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Xrm.Client”

> ID：10700574
> 
> 赞同：2
> 
> 时间：2012-05-22T10:52:38.043
> 
> 标签：plugins, workflow, dynamics-crm-2011, crm

我已经被这个异常困住了两天。我正在使用 MS CRM 2011，当我尝试注册 CRM 自定义工作流活动程序集 1\. 通过 pluginregistrator 工具 2\. 或者当我通过 Visual Studio 中的包项目部署插件并运行工作流之后，我得到了这个异常，并且它以等待状态停止，在详细信息页面中给出此异常。这是详细的例外情况：

> 工作流程因错误而暂停：未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Xrm.Client，版本=5.0.9688.1154，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。在 ArmenianSoftware.Crm.Spayka.ArmsoftIntegration.Workflows.CreateWorksByPlan.Execute(CodeActivityContext executionContext) 在 System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager) 在 System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation)

我正在文件系统上注册程序集，我已在文件夹 %system root%\C$\Program Files\Microsoft Dynamics CRM\Server\bin\assembly 中加载了所有需要的程序集。这个工作流工作了一段时间，但是在我不知道是什么之后，下次我部署程序集时，我在执行工作流时遇到了这个异常。这已经是我第三次遇到这个问题了，花了几个小时尝试做不同的事情（IIS 重置、异步服务重新启动、再次重新加载所有程序集并重新部署），几个小时后，以一种神秘的方式，工作流开始工作。在此工作一段时间后，在重新部署后再次崩溃。而且我无法确定解决问题的确切步骤，因此我总是花费几个小时来找出异常源，但没有任何目的。[thread1](http://social.microsoft.com/Forums/en-US/crmdeployment/thread/f1cea2b4-0b19-45bc-afe4-5ef7e7b609dd) , [thread2](http://blogs.msdn.com/b/madenwal/archive/2011/04/21/crm-service-exception-could-not-load-file-or-assembly-microsoft-identitymodel-version-3-5-0-0-culture-neutral-publickeytoken-31bf3856ad364e35-or-one-of-its-dependencies.aspx) , [thread3](http://stefanscheller.wordpress.com/2011/02/23/could-not-load-file-or-assembly-microsoft-xrm-client-at-plugin-registration/) ) 有人遇到过这个问题吗？这个异常的原因是什么？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T10:33:47.670

我发现了我的问题！

我注意到的第一件事是，在异常中所需的 Microsoft.Xrm.Client 程序集版本是 5.0.9688.1154，但在我的项目中，我引用了 5.0.9689.1985 版本的程序集。

![在此处输入图像描述](../Images/6d92c7d0afddaa3a794420b49098a436.png)

接下来是打开的 ildasm 工具，看看它有什么引用，我打开了我的自定义工作流程序集，我发现我有两个对 Microsoft.Xrm.Client 的引用，第一个是版本 5.0.9688.1154，另一个是第二：5.0.9689.1985 ![在此处输入图像描述](../Images/4971370a9f679d7376e2d93a8fcd7bcb.png)

并且出现了一个问题“如果我引用了一个版本为 5.0.9689.1985 的程序集，为什么还有这个程序集的另一个版本？”。答案肯定是我有另一个引用的程序集，它引用了版本为 5.0.9688.1154 的 Microsoft.Xrm.Client 程序集。我查看了我在项目中引用的程序集。还有问题！在我的项目中，我已将 SDK 组件更新为较新版本，但我还生成了引用 Microsoft.Xrm.Client 的 CRM 组织代理类组件，并且我尚未将此引用更新为较新版本的 CRM SDK。所以我的自定义工作流程序集也需要这个版本。我将 Proxy dll 的引用更改为较新的版本，一切正常！如果您正在阅读这篇文章，并且您没有代理程序集，

问候

加吉克·库尔克琴

# javascript - iframe 中的 Youtube 视频未隐藏在 Safari 5.1 中

> ID：10700577
> 
> 赞同：4
> 
> 时间：2012-05-22T10:52:42.730
> 
> 标签：javascript, html

我的网站上有 3 个标签。在第二个（隐藏的）div 中包含一个*iframe*中的 YouTube 视频。当我点击第二个标签（包含视频）时，视频开始播放。单击第一个或第三个选项卡（包含图像）时，内容区域仍会显示视频。而它应该显示各个选项卡的图像。Safari 5.1 中没有隐藏视频

我怎样才能做到这一点？

代码:: **3 个标签内容 (html)**

```
<div class="view-content clearthis">
    <div id="photos">
        <div class="nav">
           <a class="hide-divs" id="prev" href="#">Prev</a><a id="next" href="#">Next</a></div>
              <div id="gallery">
                <asp:PlaceHolder ID="phRoomPhotoGallary" runat="server"></asp:PlaceHolder>
                </div>
              </div>
              <div id="video">
                <div id="pnlVideo" runat="server">
                   <iframe id="objVideo" width="667" height="344" src="<%=RoomVideoURL %>" frameborder="0" title="<%=RoomName %>" allowfullscreen></iframe>
                </div>
              </div>
              <div id="floor">
                <asp:Image ID="imgFloorPlan" runat="server" Height="344" Width="667" />
              </div>
            </div> 
```

**3 个标签**

```
enter code here

 <ul class="clearthis">
     <li id="tabPhoto" runat="server"><a id="linkPhotoTab" class="photostab" href="#photos" title="<%=RoomName %>">PHOTOS</a></li>
     <li id="tabVideo" runat="server"><a id="linkVideoTab" href="#video" title="<%=RoomName %>">VIDEO</a></li>
     <li id="tabFloor" runat="server" style="margin-right: 0px;"><a id="linkFloorTab"                                  href="#floor" title="<%=RoomName %>">FLOOR PLAN</a></li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T17:54:01.257

我已经看到一些关于尝试在 Safari 中解决此问题的非常荒谬的答案。相反，请尝试添加：

“wmode=不透明”

作为 youtube 视频 url 中的第一个 GET 变量。

（例如：src="http://www.youtube.com/embed/pPBLF2Ffbaw?wmode=opaque & **rel** =0"）

在类似的情况下为我工作。

# visual-c++ - 带有提交按钮的编辑框

> ID：10700580
> 
> 赞同：0
> 
> 时间：2012-05-22T10:52:55.893
> 
> 标签：visual-c++, mfc, edit, editbox

如何将提交按钮添加到 MFC（VC++）中的编辑框。类似于 Windows 资源管理器中的“搜索编辑框”或 MS Office 应用程序中的文件打开对话框。

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:07:51.010

如果您使用的是 Visual Studio 2008 SP1 或更高版本，则可以使用[CMFCEditBrowseCtrl](http://msdn.microsoft.com/en-us/library/bb983421.aspx)。这是一个带有按钮的编辑控件。您可以自定义按钮图像以及用户单击按钮时的行为。

# directshow - IMediaControl::Run 后跟 IMediaControl::Stop 后跟 IMeidaControl::Run 不会打开某些板载摄像头

> ID：10700592
> 
> 赞同：0
> 
> 时间：2012-05-22T10:53:27.037
> 
> 标签：directshow, webcam

我有一个 DirectShow 网络摄像头应用程序。我使用 Sample Grabber 来获取缓冲区回调，并使用 IVideoWindow 来控制预览的显示坐标。我有如下运行的预览和捕获流。

g_pBuild->RenderStream(&PIN_CATEGORY_CAPTURE, &MEDIATYPE_Video,cam,g_pGrabberF,pNullRenderer2); g_pBuild->RenderStream(&PIN_CATEGORY_PREVIEW, &MEDIATYPE_Video,cam,NULL,NULL);

在某些机载摄像机上，IMediaControl::Run 后跟 IMediaControl::Stop 后跟 IMediaCOntrol::Run 不会打开摄像机。

外接 USB 摄像头在这里正常工作。我怎样才能对此进行更多诊断？任何指针，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:41:32.817

也许它特定于单元中的某个硬件问题。通过在呼叫之间添加 1 秒的睡眠来进行快速测试。如果它确实有帮助，那么您需要找到一种方法来了解何时将单元状态置于空闲状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:11:53.580

您没有提供问题的两个重要部分：

1.  过滤图拓扑
2.  `HRESULT`s 的方法调用

您可能遇到的一个问题是拓扑中的一个过滤器不能很好地处理状态转换，并且在状态之间的某处失败。据说你的第二个`Run`遇到它仍在尝试完成`Stop`。您可能会得到一个`HRESULT`指示问题（对您更好）或过滤器静默失败的提示。

过滤器图不太可能是错误本身的来源。它完美地完成所有事情的可能性很高，但是由于它在内部分配过滤器之间的调用，因此其中一个过滤器让您失望。

# android - Layout help - relative or linear

> ID：10700593
> 
> 赞同：0
> 
> 时间：2012-05-22T10:53:29.753
> 
> 标签：android, android-relativelayout, android-linearlayout

I am creating a view that is meant to show an image on the left, a gridview on the right, and at the bottom of the screen I want to include a last screen, next screen, refresh, and home navigation buttons, ie:

image | gridview

imagebtn | imagebtn | imagebtn | imagebtn |

I have tried the below but have failed? Do I need a relative view (although I failed trying that as well) or what have I done wrong?

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/flowers"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_gravity="center">

        <ImageView
        android:id="@+id/imageView1"
        android:layout_width="96dp"
        android:layout_height="512dp"
        android:contentDescription="@string/mainlogo"
        android:src="@drawable/talltree"
        android:gravity="top"
        />

        <GridView  
        android:id="@+id/gridView1"  
        android:layout_width="wrap_content"    
        android:layout_height="wrap_content"
        android:numColumns="3"
        android:verticalSpacing="1dp"
        android:horizontalSpacing="1dp"
        android:stretchMode="columnWidth"
        android:gravity="center"

        />

</LinearLayout> 

<LinearLayout
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:layout_gravity="center">

        <ImageButton
        android:id="@+id/imageButtona"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/arrow_left"
        android:contentDescription="@string/game1">
        </ImageButton>

        <ImageButton
        android:id="@+id/imageButtonb"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/gamelisttwo"
        android:src="@drawable/arrow_refresh1">
        </ImageButton>

        <ImageButton
        android:id="@+id/imageButtonc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/gohome"
        android:src="@drawable/gamelistone">
        </ImageButton>

        <ImageButton
        android:id="@+id/imageButtond"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/gamelisttwo"
        android:src="@drawable/gamelisttwo" 
        android:contentDescription="@string/game2">
        </ImageButton>
</LinearLayout>

</LinearLayout> 
```

sorry for the formating

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:00:16.920

you can achieve your need by using both RelativeLayout and LinearLayout combine

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/bottom"
    android:orientation="horizontal" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <GridView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />
</LinearLayout>

<LinearLayout
    android:id="@+id/bottom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="button1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="button2" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="button3" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="button4" />
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:04:31.447

On the first `LinearLayout` use this: `android:orientation="vertical"`

On the second `LinearLayout` use this: `android:orientation="horizontal"`

On the third `LinearLayout` use this: `android:orientation="horizontal"`

# php - MYSQL PHP表单提交问题

> ID：10700595
> 
> 赞同：0
> 
> 时间：2012-05-22T10:53:35.227
> 
> 标签：php, mysql, forms, wordpress

我有一个具有以下作用的表格：

```
foreach ($_POST as $key => $val)
    {
        mysql_query("INSERT INTO wp_10_options (option_name, option_value) VALUES ($key, $val) ON DUPLICATE KEY UPDATE option_value = $val;");
    } 
```

表单中的实际代码是这样的：

```
$args = array(
                'type'                     => 'post',
                'hide_empty'               => 0, //<--IMPORTANT!!
                'hierarchical'             => 1,
                'taxonomy'                 => 'category',
                'pad_counts'               => false );
                $categories = get_categories($args);
                foreach($categories as $category) { 
                        echo '<tr>';
                        echo "<td>$category->name</td>";
                        $sql = "SELECT option_value FROM wp_10_options WHERE option_name='$category->slug'";
                        $result = mysql_query($sql);
                            while($row = mysql_fetch_array($result))
                          {
                         echo "<td><input type='text' name='$category->slug' value='".$row['option_value']."' /></td>";
                          }

                        echo '</tr>';
                    } 
```

然而它没有给桌子增加任何东西吗？有人能看出为什么吗？我已经检查并且正在发送帖子数据？它可以很好地连接到数据库吗？

在你们所有人问之前，是的，我意识到安全威胁等等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:03:48.500

您需要在 SQL 中将 $key 和 $val 和 $val 放在引号中以发布到数据库。

```
foreach ($_POST as $key => $val) 
    { 
        mysql_query("INSERT INTO wp_10_options (option_name, option_value) VALUES ('$key', '$val') ON DUPLICATE KEY UPDATE option_value = '$val';"); 
    } 
```

您说您知道安全威胁：请参阅您关于使用 PDO/Prepared 语句的问题下的评论，这个问题会神奇地消失并使其更安全（实际上对于这样的多次插入更快！）

# c# - 如何在选中行时检查列表视图中的行，反之亦然在WPF中

> ID：10700600
> 
> 赞同：0
> 
> 时间：2012-05-22T10:53:51.453
> 
> 标签：c#, wpf, listview, checkbox

我有一个列表视图并将视图用作网格视图，如下所示：

```
<ListView Grid.Row="1" Grid.Column="0" Height="100" HorizontalAlignment="Left" Margin="10,10,10,10" Name="listView2" VerticalAlignment="Top" Width="300" ItemsSource="{Binding}" SelectionChanged="listView2_SelectionChanged" SelectionMode="Multiple">
            <ListView.View>
                <GridView AllowsColumnReorder="True">

                    <GridViewColumn Header="Select">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox  />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn DisplayMemberBinding="{Binding Path=FirstName}" Header="First Name" Width="100"/>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=LastName}" Header="Last Name" Width="100"/>

                </GridView>
            </ListView.View>    
        </ListView> 
```

现在的问题是，当用户选中复选框时，应该选择记录。同样是用户从列表中选择记录，然后应该选择相应的复选框。

怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:06:23.163

我假设您的视图模型具有 IsSelected 属性：

```
 public Boolean IsSelected
    {
        get { return isSelected; }
        set
        {
            if (isSelected != value)
            {
                isSelected = value;
                OnPropertyChanged("IsSelected");
            }
        }
    }
    private Boolean isSelected; 
```

所以，让我们改变标记：

```
<ListView ItemsSource="{Binding}" SelectionMode="Multiple">
    <!-- add style for the item in list view: -->
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}"/>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView AllowsColumnReorder="True">

            <GridViewColumn Header="Select">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <!-- bind the checkbox to the IsSelected property: -->
                        <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>

            <GridViewColumn DisplayMemberBinding="{Binding Name}" Header="Name" Width="100"/>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:50:23.073

最简单的方法：

```
 <GridViewColumn Header="None">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox Width="50"
                                      Height="50"
                                      IsChecked="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListViewItem}},
                                                          Path=IsSelected,Mode=TwoWay}" />

                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn> 
```

# msbuild - 如何让 TFS teambuild 构建 c#>VB6>c# 应用程序（ComReference prob？）

> ID：10700607
> 
> 赞同：0
> 
> 时间：2012-05-22T10:54:15.093
> 
> 标签：msbuild, tfsbuild

我正在尝试让 TFS 团队构建可靠地构建 WPF C# 应用程序。这个应用程序依赖于我们维护的 VB6Lib.dll，这个 VB6Lib.dll 本身依赖于我们也维护的其他 C# 库。

我已经建立了一个构建定义来构建（按顺序）：

*   VbDependencies.sln（这里的所有库都有 com 互操作集，因此 VB6 可以找到它们的 TLB）
*   buildVB6Lib.proj（一个调用“VB6.exe /make /d”以在构建服务器上生成 VBLib.dll 的 msbuild 文件，作为此脚本的一部分，我一直在将 VB6Lib.dll 输出复制到 C:\tmp）
*   MainApp.sln（在我的工作区中，我添加了对 C:\tmp\VB6Lib.dll 的引用）

这听起来好吗？在我的开发笔记本电脑上，我通常构建 VB6，将其输出复制到 \tmp，然后将其 regsvr32 复制到那里，然后在我的 C# 解决方案中添加对它的引用。我不相信我的构建定义正在执行这一步。

另外，有没有办法从 VB6 构建中获得更有用的输出，目前我得到“文件 'xxx.bas' 中的编译错误无法找到库项目”，但不是它找不到哪个实际库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:05:18.883

您是正确的，因为您在开发系统上构建过程的关键点在于注册 COM 对象。但是，一般不希望在构建服务器上注册 COM 对象，因为当注册错误的 COM 对象或注册失败时，这可能会导致各种版本控制问题和静默失败。

完成此操作的正确方法是手动生成互操作程序集并引用它而不是 COM 对象。这是通过 tlbimp 实用程序完成的，例如：

```
tlbimp ..\Libraries\VBLib.dll /out:..\Libraries\Interop.VBLib.dll 
```

在您的开发系统上运行该命令，然后删除对 VB6Lib.dll 的引用并添加对 Interop.VBLib.dll 的引用。然后，您可以将 tlbimp 命令作为预构建事件添加到引用项目中，以便始终从正确的版本构建互操作程序集，并且您将不再需要在构建系统上注册您的 COM 对象。

# java - J2ME：以编程方式锁定设备

> ID：10700608
> 
> 赞同：1
> 
> 时间：2012-05-22T10:54:18.500
> 
> 标签：java, java-me, midp, lcdui

我在 J2ME 中工作。我想以编程方式锁定设备。只能显示一个屏幕（其中密码文本字段和解锁按钮）。如果用户按下 END 按钮，那么它一定不起作用。

例如，假设我的应用程序在设备（移动设备）中运行，那么如果任何人获得此设备，他必须输入密码，那么他可以使用该设备，否则他无能为力（既不能打电话也不能做任何事情）。

请建议我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:50:48.447

我已经解决了这个问题。

这是解决此问题的主要代码：-

```
 protected void hideNotify() {

        Display.getDisplay(myMidlet).setCurrent(null);
        super.hideNotify();
    Thread thread = new Thread(new Runnable() {
    public void run() {

                Display.getDisplay(myMidlet).setCurrent(new LockScreen(myMidlet));
            }
     }
     );
     thread.start();

    } 
```

我将此代码写入我的 LockScreen 画布中。所以只有锁屏显示，如果用户按下结束按钮，它会再次显示锁屏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:59:01.467

很抱歉通知您，在 J2ME 中绝对没有办法做到这一点。

# processing.js - 如何预编译 processingjs 草图以加快加载时间？

> ID：10700609
> 
> 赞同：0
> 
> 时间：2012-05-22T10:54:19.107
> 
> 标签：processing.js

我的 processingjs 网页的加载时间越来越长。如何将处理的编译预缓存到 javascript？

我的应用程序可以在第一次进入网页时进行编译（也许将结果保存在本地存储中？）然后在后续加载时重用编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:20:54.193

根据用户的经验，有两种方法可以缩短加载时间。第一种是使用预编译的草图，这比较容易：github repo，或者甚至只是使用github的下载按钮（[https://github.com/processing-js/processing-js](https://github.com/processing-js/processing-js)）下载master分支，然后寻找“ ./tools/processing-helper.html”文件。这是一个帮助页面，可让您运行或编译草图到 Processing.js 使用的 JavaScript 源代码。您仍然需要与 Processing 一起运行它，因为它与提供的 API 相关联，但您可以为此使用“仅 API”版本。获取它生成的代码，添加“var mySketch =”，然后在您的页面上执行此操作：

```
<script src="processing.api.js"></script>
<script>
function whenImGoodAndReady() {
  var mySketch = (function.....) // generated by Processing.js helper
  var myCanvas = document.getElementById('mycanvas');
  new Processing(myCanvas, mySketch);
}
</script> 
```

顾名思义，只要确保在您准备好这样做时调用 load 函数 =)

另一种是后期加载，如果您有任何最初不在屏幕上的草图。

Processing.js 的完整下载中有一个“延迟加载”扩展 - 你可以将它包含在你的页面上，它只会在草图出现时加载它们。这样你就不会拖住整个页面的加载。

或者，您可以编写一个后台加载器，它与延迟加载扩展执行相同的操作：关闭 Processing.init，而是收集所有代表处理草图的脚本/画布元素，然后使用类似的方法在超时时加载它们

```
var sketchList = [];

function findSketches() {
  /* find all script/canvas elements */
  for(every of these elements) {
    sketchList.append({
      canvas: <a canvas element>,
      sourceCode: <the sketch code>
    });
  }
  // kickstart slowloading
  slowLoad();
}

function slowLoad() {
  if(sketchList.length>0) {
    var sketchData = sketchList.splice(0,1);
    try {
      new Processing(sketchData.canvas, sketchData.sourceCode);
      setTimeout(slowLoad, 15000); // load next sketch in 15 seconds
    } catch (e) { console.log(e); }
  }
} 
```

这将继续缓慢加载您的草图，直到它用完为止。

# c# - 如何调用不知道实例对象类型的泛型方法

> ID：10700610
> 
> 赞同：1
> 
> 时间：2012-05-22T10:54:22.660
> 
> 标签：c#, generics, object, instance

使用此代码：

```
World w = new World();
var data = GetData<World>(w); 
```

如果我得到`w`反射，这可以是`World`, `Ambient`,`Domention`等类型。

我怎么能得到`GetData`？？？

我只有实例对象：

```
var data = GetData<???>(w); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:00:00.500

```
var type = <The type where GetData method is defined>;

var genericType = typeof(w);

var methodInfo = type.GetMethod("GetData");

var genericMethodInfo = methodInfo.MakeGenericMethod(genericType);

//instance or null : if the class where GetData is defined is static, you can put null : else you need an instance of this class.
var data = genericMethodInfo.Invoke(<instance or null>, new[]{w}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:00:05.057

你不需要写部分。如果未声明类型，则 C# 隐式决定泛型方法中参数的类型；只是去：

```
var data = GetData(w); 
```

这是一个示例；

```
public interface IM
{

}

public class M : IM
{
}

public class N : IM
{

}

public class SomeGenericClass 
{
    public T GetData<T>(T instance) where T : IM
    {
        return instance;
    }
} 
```

你可以这样称呼它；

```
IM a = new M();
SomeGenericClass s = new SomeGenericClass();
s.GetData(a); 
```

# ruby-on-rails-3 - 如何在 Rails 3.2.3 中激活记录缓存

> ID：10700611
> 
> 赞同：2
> 
> 时间：2012-05-22T10:54:35.890
> 
> 标签：ruby-on-rails-3, caching, activerecord, memcached

如何在 Rails 3.2.3 中激活记录缓存

**库存控制器.rb：**

```
def index
  @stocks = Rails.cache.read custom_cache_path(@res.uuid, Const::ACTIVE_STOCKS)
  if @stocks.blank?
    @stocks = Stock.only_active_stocks(params[:restaurant_id])
    Rails.cache.write custom_cache_path(@res.uuid, Const::ACTIVE_STOCKS), @stocks
  end
end

def show
  @stocks = Rails.cache.read custom_cache_path(@res.uuid, Const::ACTIVE_STOCKS)
  if @stocks.blank?
    @stocks = Stock.only_active_stocks(params[:restaurant_id])
    Rails.cache.write custom_cache_path(@res.uuid, Const::ACTIVE_STOCKS), @stocks
  end
end 
```

对显示操作缓存的请求何时返回 nil？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:42:22.127

在这里很难理解您在控制器中的意图，因为您的 show 和 index 方法具有相同的实现。

话虽如此，您可能希望将任何缓存逻辑移动到此处的模型中，这样就更容易隔离您的问题。

请考虑以下重构：

库存控制器：

```
def index
  @stocks = Stock.active_for_restaurant(params[:restaurant_id])
end

def show
  @stock = Stock.fetch_from_cache(params[:id])
end 
```

股票.rb：

```
def active_for_restaurant(restaurant_id)
  Rails.cache.fetch(custom_cache_path(restaurant_id, Const::ACTIVE_STOCKS)) do
    Stock.only_active_stocks(restaurant_id)
  end
end

def fetch_from_cache(id)
  Rails.cache.fetch(id, find(id))
end 
```

有关获取的更多信息，请参见： [http ://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html#method-i-fetch](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html#method-i-fetch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T23:49:23.283

正如 rails api 所说 - 如果缓存中没有这样的数据（缓存未命中），则将返回 nil。那是你的问题吗？

顺便说一句，请确保在“active_stocks”更改时更新缓存。

# php - 在选定的 div 中显示我的结果

> ID：10700619
> 
> 赞同：0
> 
> 时间：2012-05-22T10:55:10.117
> 
> 标签：php, jquery

我有这个表格：

```
<FORM id="frmVote" action="../vote_dir/proccess.php" method="post">
     <table id="tblMain" align="center">
        <tr>
        <td class="header"></td>
        </tr>
    <tr>
        <td>
             <?php
            include "../vote_dir/loadpoll.php";
             ?>
        </td>
    </tr>
    <tr>
        <td>
             <input id="votefor" name="votefor" type="hidden"/>
        </td>
    </tr>
    <tr>
        <td class="button">
             <INPUT class="btnVote" onclick="return confirmSubmit()" type="submit" value="vote"/>
        </td>
    </tr>
    <tr>
        <td class="footer"></td>
        </tr>
     </table>
</FORM> 
```

这是 proccess.php 的一部分：

```
<?php
  $votefor = $_POST["votefor"];

  //Get the IP of the user
  $domain = $_SERVER["REMOTE_ADDR"];
  $today = date("m/d/Y");

  echo "<table id=\"tblResults\" align=\"center\">";

  //MORE CODE

// Generate the results table
  $doc = new DOMDocument();
  $doc->load("../vote_dir/xml/results.xml");
  $pollitems = $doc->getElementsByTagName("pollitem");
  foreach( $pollitems as $pollitem )
  {
    $entries = $pollitem->getElementsByTagName("entryname");
    $entry = $entries->item(0)->nodeValue;
    $votes = $pollitem->getElementsByTagName("votes");
    $vote = $votes->item(0)->nodeValue;
    $tempWidth = $vote / $maxvotes;
    $tempWidth = 300 * $tempWidth;
    $votepct = round(($vote / $maxvotes) * 100);
    echo "<tr><td width=\"45%\" class=\"polls\">$entry</td>";
    echo "<td width=\"35%\" class=\"resultbar\"><div class=\"bar\" style=\"background-color: ";
        getRandomColor();
        echo "; width: $tempWidth px;\">$votepct%</div></td><td class=\"each_vote\" width=\"20%\">($vote votes)</td></tr>";
  }
  echo "<tr><td width=\"45%\" class=\"total\" colspan=\"3\">Σύνολο ψήφων: $maxvotes</td>";
  echo "</table>";
?> 
```

就像现在它工作正常。但我试图让它将我的结果加载到特定的 div 中，而不是像这样打开结果

我正在尝试使用这个 jquery（我在其他事情中使用过），它正在部分工作，因为它在 div 中打开了结果，但它似乎没有将表单发送到 proccess.php，因为我可以看到结果页面没有任何更改或消息，例如“您已经投票”。

```
 .delegate('.btnVote', 'click', function(){
     var keyValues = {
      votefor : $(this).parent().find('input[name="votefor"]').val()
     };
     $.post('../vote_dir/proccess.php', keyValues, function(rsp){
      $('#voting').load('../vote_dir/results.php');
     });
     return false;
  }) 
```

这是我的 loadpoll.php

```
<?php 
  // Load the results xml file
  $doc = new DOMDocument();
  $doc->load("../vote_dir/xml/results.xml");
  $root = $doc->getElementsByTagName("results")->item(0);
  $question = $root->getAttribute("question");
  echo "<table id=\"tblPoll\" align=\"center\"><tr><td class=\"question\">$question</td></tr>";
  echo "<tr><td class=\"pollitem\">";
  $pollitems = $doc->getElementsByTagName("pollitem");
  $id = 1;
  // Loop through each item, and create a radio button for each item
  foreach( $pollitems as $pollitem )
  {
    $entries = $pollitem->getElementsByTagName("entryname");
    $entry = $entries->item(0)->nodeValue;
    $votes = $pollitem->getElementsByTagName("votes");
    $vote = $votes->item(0)->nodeValue;
    if ($id==1)
        echo "<input id=\"entry$id\" class=\"radiobutton\" onclick=\"setVote('$entry')\" type=\"radio\" name=\"poll\" value=\"$entry\">$entry<br>";
    else
        echo "<input id=\"entry$id\" onclick=\"setVote('$entry')\" type=\"radio\" name=\"poll\" value=\"$entry\">$entry<br>";
    $id = $id + 1;
  }
  echo "</td></tr>";
  echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:07:06.460

尝试更改

```
$(this).parent().find('input[name="votefor"]').val() 
```

到

```
$('#votefor').val() 
```

我认为“$（this）.parent（）”导致`<td>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:14:05.910

试试这个：

```
var data = $(this).parent().find('input[name= votefor]').val(); 
```

或者

```
$data = $(this).parent().find('input[name= votefor]').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:22:50.460

```
 $('.btnVote').live('click', function () {
                $.post('../vote_dir/savevote.php', { votefor: $.trim($(this).parents('form').find('input[name="votefor"]').val()) }, function (data) {
                    $('#voting').html(data);

                    //Or

                    //$('#voting').load('../vote_dir/results.php');
                });

                return false;
            }); 
```

# wcf - 如何将 AutoMapper 与 Post Action 一起使用

> ID：10700620
> 
> 赞同：2
> 
> 时间：2012-05-22T10:55:10.763
> 
> 标签：wcf, asp.net-mvc-3, automapper, self-tracking-entities

在我的解决方案中，我有一个 ASP.NET MVC3 项目和一个与数据库一起使用的 WCF 项目。我使用`entity framework self tracking`and`AutoMapper`来映射对象。

我的问题是：我如何使用`AutoMapper`诸如 crate 和 delete 以及 Edit 方法之类的 Post Action

我看到了这个[问题](https://stackoverflow.com/questions/8844443/using-automapper-in-the-edit-action-method-in-an-mvc3-application)，但没有帮助我，这给了我一个错误`argument type '...' is not assignable to parameter type '...'`

```
 [HttpPost]
      public ActionResult Create(MUser muser)
      {
        if (ModelState.IsValid)
        {
            Mapper.CreateMap<User, MUser>();
            var user = Mapper.Map<User, MUser>(muser);
            _proxy.SaveUser(user);
            return RedirectToAction("Index");

        }
        return View(muser);
      } 
```

![在此处输入图像描述](../Images/e68dabbeb356e22a57b484993a7ab166.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T11:12:36.983

您不应该将 Mapper.CreateMap 放在您的控制器中，您只需要执行一次该操作，因此创建一个引导程序或类似的东西并从您的应用程序启动方法中调用它。

我认为这就是您的错误的来源：您只能创建一次映射。

哦，你定义了错误的类型。您并没有尝试将用户转换为 MUser，但您正在以相反的方式进行操作，所以它应该是：

```
Mapper.CreateMap<MUser, User>();
Mapper.Map<MUser, User>(muser); 
```

如何执行此操作的示例：

```
public class MvcApplication : HttpApplication
{
    // some methods

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        MappingsBootstrapper.Initialize(); // call the bootstrap class that I created
    }
} 
```

然后我有一个名为“映射”的项目，它包含引导类和一些“配置”类（就像 Entity Framework 有 EntityTypeConfiguration 类和 Ninject 有 NinjectModules）：

```
public static class MappingsBootstrapper
{
    public static void Initialize()
    {
        new UserMappings();
        new BookcaseItemMappings();
    }
} 
```

和映射：

```
class UserMappings
{
    public UserMappings()
    {
        Mapper.CreateMap<User, UserSetupViewModel>();
        Mapper.CreateMap<UserSetupViewModel, User>();
    }
}

class BookcaseItemMappings
{
    public BookcaseItemMappings()
    {
        Mapper.CreateMap<NewBookViewModel, BookcaseItem>().ForMember(x => x.BookId, opt => opt.Ignore());
        Mapper.CreateMap<BookcaseItem, BookcaseItemViewModel>()
            .ForMember(x => x.Title, opt => opt.MapFrom(src => src.Book.Title))
            .ForMember(x => x.Authors, opt => opt.MapFrom(src => src.Book.Authors.Select(x => x.Name).Aggregate((i, j) => i + ", " + j)))
            .ForMember(x => x.Identifiers, opt => opt.MapFrom(src => (!string.IsNullOrEmpty(src.Book.Isbn10) ? ("ISBN10: " + src.Book.Isbn10 + "\r\n") : string.Empty) +
                                                                     (!string.IsNullOrEmpty(src.Book.Isbn13) ? ("ISBN13: " + src.Book.Isbn13) : string.Empty)))
            .ForMember(x => x.Pages, opt => opt.MapFrom(src => src.Book.Pages))
            .ForMember(x => x.ImageUri, opt => opt.MapFrom(src => src.Book.ThumbnailUriSmall));
    }
} 
```

您可以按照自己喜欢的方式进行操作，您可以将所有映射放在 Application_Start() 方法中，但我发现这是一种干净且可维护的方式。

# html - 移动 Safari 中的 Html5 视频延迟

> ID：10700621
> 
> 赞同：0
> 
> 时间：2012-05-22T10:55:11.740
> 
> 标签：html, video, safari, delay

我有以下问题。我在我的页面上嵌入了视频：

```
<video id="video_1" width="520" height="360" controls="controls">
    <source src="http://patho/to/video.mp4" type="video/mp4" />
</video> 
```

当我打开我的页面时，我看到了黑框。显示 4-5 秒后播放图标。是否可以立即看到这个播放图标？我试图做一个进度条或其他东西并检查所有媒体事件 - > [http://dev.w3.org/html5/spec/single-page.html#mediaevents](http://dev.w3.org/html5/spec/single-page.html#mediaevents)。

但看起来这个问题与我的视频无关，而是与需要时间加载的快速时间有关。我对吗 ？或者有一个解决方法？

我可以做的一件事是提前初始化视频，然后通过 js 显示它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T04:21:32.073

what you can do is use the poster setting of the video tag:

```
<video poster="http://link.to/poster.png">
    <source ... />
</video> 
```

this should lead to the image being displayed immediately after download of it, then download the play button once the player and the vid are loaded.

have fun,

jascha

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:07:52.560

看看这个关于预加载的[文档？](http://www.longtailvideo.com/html5/preload)如果您的文件很大，则无能为力。PS：IOS有自己的html5视频播放方式，硬件加速，通过系统破解显示在浏览器上方。这就是为什么我认为没有什么可以做的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T13:03:35.503

It sounds like the index is at the end of the file: [How to get your HTML5 MP4 video file to play before being fully downloaded](http://www.iandevlin.com/blog/2011/03/html5/how-to-get-your-html5-mp4-video-file-to-play-before-being-fully-downloaded).

# php - Symfony2 FOSuserbundle 和 ntlm 身份验证

> ID：10700623
> 
> 赞同：2
> 
> 时间：2012-05-22T10:55:18.283
> 
> 标签：php, symfony, ntlm, fosuserbundle

设置如何支持 FOSUserbundle 的 ntlm 身份验证？我在我的 mysql 数据库列表中列出了站点的所有可访问用户，我需要检查是由 ntlm 来宾授权的用户，还是经过验证的用户（存在于用户表中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:17:37.060

文档中的这个页面应该为您提供实现自己的侦听器所需的一切：http: [//symfony.com/doc/current/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)

此相关问题中提供了更多链接和信息：[Symfony2：从他们的 Windows 会话中自动登录用户](https://stackoverflow.com/questions/16811280/symfony2-automatically-logging-in-users-from-their-windows-session/17331193#17331193)

似乎没有可用的 NTLM 捆绑包，因此您必须自己编写一些东西。

祝你好运！

# javascript - 如何弃用 flash/flex 暴露的 javascript 函数？

> ID：10700625
> 
> 赞同：2
> 
> 时间：2012-05-22T10:55:28.563
> 
> 标签：javascript, flash, apache-flex, actionscript, externalinterface

我们开发了一个弹性组件，现在它被多个 Web 应用程序使用。我们发现一些回调是旧的并且它们有错误的参数。例如，当它们用于设置某些参数时，它们会使用一个对象，而当它们获取相同的参数时，它们会使用另一个对象。我们想让这些函数在设置和获取参数时保持一致。所以我们想开始用新的名字和正确的参数来开发新的 getter 和 setter。无论如何，由于该组件被许多其他应用程序使用，我们不能重命名回调，也不能更改它们的实现，我们可能会遇到其他 Web 应用程序的问题。所以我们想知道是否有某种方法可以弃用 Flash 暴露的回调，这样使用这些方法的人会看到一些警告，并开始用未弃用的版本替换。预先感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:03:52.343

一次是 API，始终是 API。

您不能只从 API 中删除内容，否则当前使用这些命令的应用程序将失败。只需添加新的替换 API 并保留旧 API。在文档中声明旧的已弃用，并且有更好的命令。

jQuery 就是一个例子，`live()`它`delegate()`被`on()`. 虽然已弃用，`live()`但`delegate()`仍然存在于 1.7 以适应旧 API，特别是对于那些升级了库但使用过时、未维护的插件的人。

* * *

你也可以这样做。您可以为旧 API 显示相同的接口，但在它下面，它使用新的 API 实现，但稍作修改。这样，您就不会重复您的代码。

例如，让我们以jQuery`delegate()`和. 这些不是这些方法的实际代码，但我追求的是弃用的概念（我想不出除了,和之外的其他弃用示例）。`live()``on()``delegate()``live()``on()`

```
//the three have different set-ups
.live(event,callback);
.delegate(selector,event,callback);
.on(event,selector,callback);

//to avoid multiple underlying implementations
//you can "map" the old API to use the new API's implementation
//while maintaining the old interface and functionality
live = function(event,callback){
    $(document).on(event,callback);
}
delegate = function(selector,event,callback){
    $(this).on(event,selector,callback);
}

//the new implementation as used by on
on = function(event,selector,callback){
    //implementation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:28:32.460

有几点不清楚：

1.  谁在构建代码的 Flash 端？使用该组件的人，还是他们编译了它却不知道里面有什么？

2.  一般观众的精明程度如何？

3.  使用该组件构建的应用程序的一般生命周期是多少。您是否明确说明了您的版本策略？

**IMO：（** *这只是我的观点，不是绝对的事实，这种方法对于 Linux 开发来说更典型，但对于 Windows 来说却很可怕/不典型）。*

现在，如果您的用户正在构建您的代码，我会说直接`[Deprecated()]`为 2-3 个次要版本发布元，然后将其删除，当然不要将其拖到主要版本发布中。如果您有足够的带宽，最好为旧版本提供一些支持，并可能发布补丁，但改进更为重要。某些策略可能会有所帮助。例如，如果用户接触了测试版产品，他们将更有可能更快地采用更改。

如果您的听众大多是精明的/有良好的社区沟通，那么一个小版本可能就足够了 - 最坏的情况下，旧的兼容版本几乎没有留下。同样，如果你有旧版本的补丁很好，但是你会因为坚持错误的 API 而束缚你的手，一段时间后，由于那个 API，你的用户会认为你的应用程序是过时的垃圾，这会锁定他们使用他们的东西宁愿改变。

只承诺次要版本之间的一致性非常重要。当然，如果您可以保持向后兼容多个版本，那是一件好事，但这是一个奖励而不是要求。虽然从表面上看，使用您产品的其他人可能不愿意采用这种更改，但另一种选择仍然更糟。应该有一些合理的时间，适合您提供支持的平均应用程序生命周期。在它有用之前不会使普通应用程序过时的东西，但所有东西都要适度。

# java - 如何使用 BroadcastReceiver 删除传入的短信？

> ID：10700631
> 
> 赞同：0
> 
> 时间：2012-05-22T10:55:53.990
> 
> 标签：java, android

我一直在开发可以使用 SMS 命令管理设备的应用程序；应用程序必须执行来自 SMS 的命令并删除此 Sms。因此，管理代码有效，但我无法删除短信。我有以下广播接收器：

```
public class SmsReceiver extends BroadcastReceiver {

    private static final Uri SMS_INBOX_URI = Uri.parse("content://sms");

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String body = "";
        String number = "";

        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        if (bundle != null) {
            // ---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                body += msgs[i].getMessageBody().toString();
                number +=msgs[i].getOriginatingAddress();
            }
        }

        SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
        String key=prefs.getString(context.getString(R.string.acc_key_key), "");

        if (body.trim().equals("#"+key)) {
            sendGPSCoordinates(context, number);
        } else if (body.trim().equals("?"+key)){
            sendResponces(context);
        }
        deleteSms(body, number, context);
    }

    private void deleteSms(String body, String number, Context context) {

        ContentResolver resolver=context.getContentResolver();
        int count=resolver.delete(SMS_INBOX_URI, "body = ? AND address = ?", new String[]{body, number});
        Log.e("count", String.valueOf(count));
/*      Cursor results=resolver.query(SMS_INBOX_URI, null, null, null, null);
        for (String str:results.getColumnNames()) {
            Log.e("column", str);
        }
} 
```

我有所需权限的 AndroidManifest.xml。应用程序接收短信，从 Intent 获取短信数据，管理手机并尝试删除此短信，但它总是返回计数等于 0。我试图更改短信/收件箱的 URI，但它不起作用. 请告诉我，我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:32:06.107

我假设您知道，SMS 消息是作为有序广播发送的。因此，您的接收器有能力在本地 SMS 应用程序获取之前获取它们（只需在 Manifest 中设置比本地更高的优先级）。因此，它应该只适用于`cancel`正在发送的广播，SMS 永远不会到达本机短信应用程序。

你可以这样尝试：

```
public class SmsReceiver extends BroadcastReceiver {

private static final Uri SMS_INBOX_URI = Uri.parse("content://sms");

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    String body = "";
    String number = "";

    Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    if (bundle != null) {
        // ---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i = 0; i < msgs.length; i++) {
            msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            body += msgs[i].getMessageBody().toString();
            number +=msgs[i].getOriginatingAddress();
        }
    }

    SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
    String key=prefs.getString(context.getString(R.string.acc_key_key), "");

    if (body.trim().equals("#"+key)) {
        sendGPSCoordinates(context, number);
    } else if (body.trim().equals("?"+key)){
        sendResponces(context);
    }
    abortBroadcast();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:25:07.470

```
@Override
    public final void onReceive(final Context context, final Intent intent) {
        final String action = intent.getAction();
         Bundle extras = intent.getExtras();

            String messages = "";

            if ( extras != null )
            {
                // Get received SMS array
                Object[] smsExtra = (Object[]) extras.get( SMS_EXTRA_NAME );

                // Get ContentResolver object for pushing encrypted SMS to the incoming folder
               // ContentResolver contentResolver = context.getContentResolver();

                for ( int i = 0; i < smsExtra.length; ++i )
                {
                    SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

                    String body = sms.getMessageBody().toString();
                    String address = sms.getOriginatingAddress();
                    long date = sms.getTimestampMillis(); 
```

}

在此写入查询之后以获取最后一条消息

然后触发您的删除方法。

删除最后一条传入消息的效果很好。

希望你能理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T08:05:17.630

希望这可以帮助你...

@Override public void onReceive(Context context, Intent intent) {

```
 Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    String number="";
    String Message="";      
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];         
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);             
            number = msgs[i].getOriginatingAddress();  
            Message = Message + msgs[i].getMessageBody().toString();
        }
        //---display the new SMS message---
        Toast.makeText(context, number,Toast.LENGTH_LONG).show();
        Log.d("number:::", number);            
        PubVar.IN_SMS++;
        Savesms( number,Message,PubVar.PHONENO, context);
        long counted=deleteSMS(context);
        //long count=counted++;
        //PubVar.DELETED_SMS=counted;
        System.out.println("Deleted sms :"+ counted);
    }

}

//message deletion
private int deleteSMS(Context context)
{
    Uri deleteUri = Uri.parse("content://sms");
    int count = 0;
    Cursor c = context.getContentResolver().query(deleteUri, null, null,null, null);
    while (c.moveToNext()) 
    {
        try
        {
            // Delete the SMS

            String pid = c.getString(0); // Get id;
            String uri = "content://sms/" + pid;
            count = context.getContentResolver().delete(Uri.parse(uri), null, null);
            PubVar.DELETED_SMS=PubVar.DELETED_SMS+count;
        }
        catch (Exception e) 
        {
            System.out.println("error in deleting " + e.toString());
        }
    }
    c.close();

    return count;

} 
```

# java - Java 的 Comparable 中的这个对象是什么

> ID：10700634
> 
> 赞同：-1
> 
> 时间：2012-05-22T10:56:15.913
> 
> 标签：java, comparable

对于自然排序，我使用的是可比较的，我一使用该方法就发现了

```
 public int compareTo(T o1) {      
        System.err.println("this "+this.empID+" that "+((Employee<T>)o1).empID);
        return this.empID - ((Employee<T>)o1).empID;
    } 
```

它工作正常，但是 this.empID 带有一些逻辑，我无法弄清楚。那么 this.empID 值背后的逻辑是什么，什么是迭代，就像调用排序方法一样，内部算法正在处理这部分（排序算法）

例如 ：

在尝试打印 this.empID 并且输出是

```
this 1 that 5
this 6 that 1
this 6 that 5
this 3 that 5
this 3 that 1
this 7 that 5
this 7 that 6
this 4 that 5
this 4 that 3
this 8 that 5
this 8 that 7
this 2 that 5
this 2 that 3
this 2 that 1 
```

**this**的值来自哪里，或者迭代逻辑是什么，是不是因为Sorting算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:23:36.840

如果您的问题是关于什么代码正在调用您的`compareTo`方法，那么您是对的，它通常会被称为排序算法的一部分。例如，如果您将 an 插入`Employee a`到包含（例如）的 TreeSet 中，您可能会看到类似or的`Employee b`调用，具体取决于确切的排序算法。在第一种情况下，是，在第二种情况下，是和是。`a.compareTo(b)``b.compareTo(a)``this``a``this``b``that``a`

要查看正在调用的代码`compareTo()`，您可以在该方法中设置断点并使用调试器。或者，查看调用堆栈跟踪的一种快速而粗略的技术是将以下内容添加到`compareTo()`

```
Exception e = new Exception(); // This prepares a call stack
e.printStackTrace(); // This prints it 
```

显然，这种调试输出在性能方面非常昂贵，而且冗长，因此不应将其留在生产代码中。

# sql - 使用 MS-Access 合并表

> ID：10700636
> 
> 赞同：1
> 
> 时间：2012-05-22T10:56:41.807
> 
> 标签：sql, ms-access

我创建了一个包含两个表的数据库：`Table1`和`Table2`.

`Table1`包含以下数据：

```
Account#    Account Owner
1           Person1
2           Person2 
```

`Table2`包含：

```
Account#      Date Modified     Status
1             5/15/2011         Open
2             4/15/2011         Closed
1             5/21/2011         Pending
2             6/15/2011         Cancelled 
```

使用 SQL，我怎样才能合并这两个表，以便它会给我每个帐户的最新状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:02:38.227

这将做到：

```
SELECT Table1.[Account#],
       Table1.[Account Owner],
       L.LastOfDate,
       Table2.Status
FROM   ((SELECT Table2.[Account#],
                Max(Table2.[Date Modified]) AS LastOfDate
        FROM   Table2
        GROUP  BY Table2.[Account#]) AS L
        INNER JOIN Table1
          ON L.[Account#]=Table1.[Account#])
       INNER JOIN Table2
         ON (L.[Account#]=Table2.[Account#])
            AND (L.LastOfDate=Table2.[Date Modified]); 
```

将导致：

```
Account#    Account Owner    LastOfDate     Status
1           Person1          05/21/2011     Pending
2           Person2          06/15/2011     Cancelled 
```

# python - django-gunicorn-nginx：502 网关错误

> ID：10700638
> 
> 赞同：10
> 
> 时间：2012-05-22T10:56:44.557
> 
> 标签：python, django, nginx, gunicorn

我正在尝试将我的 Web 应用程序发送到服务器，这是我第一次配置服务器。我按照本教程使用**django-gunicorn-nginx设置**[http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/](http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/)首先一切都很完美，我得到了**django 欢迎页面**。然后我在 django 项目中加载了应用程序并设置了静态根目录，现在我得到**502 bad gateway你可以在**[http://qlimp.com](http://qlimp.com)中查看

gunicorn 和 supervisor 设置的所有内容都与该教程中所示的相同。但是我修改了一些nginx conf。这里是：

```
upstream app_server_djangoapp {
    server localhost:8001 fail_timeout=0;
}

server {
    listen 80;
    server_name qlimp.com;

    access_log  /var/log/nginx/guni-access.log;
    error_log  /var/log/nginx/guni-error.log info;

    keepalive_timeout 5;

    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        if (!-f $request_filename) {
            proxy_pass http://app_server_djangoapp;
            break;
        }
    }
    location /files/ {
        autoindex on;
        root /home/nirmal/qlimp/qlimp/files/;
    }
} 
```

这是我的媒体网址：

```
MEDIA_URL = '/files/' 
```

Files 是我拥有所有静态文件的文件夹。如何让我的项目在服务器中工作？有人可以指导我吗？

**更新**

错误日志 [https://gist.github.com/2768425](https://gist.github.com/2768425)

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T15:14:15.907

第一的。不要`if`在 nginx conf 中使用。这不好。真的，真的很可怕。请改用以下内容：

```
location / {
    try_files $uri @proxy;
}

location @proxy {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://app_server_djangoapp;
} 
```

请参阅：[http](http://wiki.nginx.org/IfIsEvil) ://wiki.nginx.org/IfIsEvil和[http://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)

现在，就调试而言。你的 gunicorn 工人正在启动，因为有一些致命的错误。尝试关闭 gunicorn。如果您使用主管：

```
sudo supervisorctl stop [gunicorn process name] 
```

然后，从您的项目根目录运行：

```
python manage.py run_gunicorn -c path/to/gunicorn.conf 
```

注意任何启动错误，或者如果它确实启动，请在浏览器中测试您的站点。如果您仍然没有得到任何有意义的信息，请尝试运行标准运行服务器

```
python manage.py runserver 
```

同样，请注意任何错误，如果加载正常，请在浏览器中测试您的网站。我建议像在开发中一样在 localhost:8000 上进行测试。其中之一应该给你*一些*工作。

**更新**

您收到的错误说它无法连接到“ind=127.0.0.1”。然后，查看你正在运行的命令`gunicorn_django -bind=127.0.0.1:8001`，很容易看出问题所在。您可以使用`-b`或指定要绑定的 IP 和端口`--bind`。由于您只使用了一个`-`，因此将 IP 解释为`ind=127.0.0.1`，这显然是不正确的。你需要使用：

```
gunicorn_django --bind=127.0.0.1:8001 
```

或者

```
gunicorn_django -b 127.0.0.1:8001 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-20T14:16:16.237

您需要正确理解指令。“server_name”指令保存 IP 地址，“proxy_pass”将连接到托管服务器的端口。在你的情况下：

```
server_name 127.0.0.1;
proxy_pass http://127.0.0.1:8001; 
```

这没有理由不起作用，但如果它不起作用，那么仍然尝试“python manage.py runserver”命令以确保您的站点运行时没有错误，因为万一站点无法向 wsgi.py 提供数据可能会显示相同的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T10:32:05.790

增加keepalive_timeout。

```
server {
        listen 5000 default deferred;
        client_max_body_size 4G;
        keepalive_timeout 5;
        server_name _;
        location / {
            proxy_read_timeout 800;
            proxy_pass  http://localhost:9000;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            break;
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-10T16:36:21.270

尝试使用像 gevent 这样**的工人阶级。**我在 python 3.7 中使用 gevent 时遇到了一些麻烦，最好使用 python 3.6。

**Django，Python 3.6 示例：**

```
pip install gevent
gunicorn my_app.wsgi --workers 2 --worker-class=gevent --bind 0.0.0.0:80 --timeout=90 --graceful-timeout=10 
```

# windows - nmake 在构建 Perl 模块时失败

> ID：10700644
> 
> 赞同：0
> 
> 时间：2012-05-22T10:57:09.883
> 
> 标签：windows, perl, perl-module, nmake

我正在尝试自己构建[Win32::Daemon](http://search.cpan.org/~jdb/Win32-Daemon-20110117/Daemon.pm)。我不使用 CPAN 的原因是因为我想更深入地研究 Perl 模块的工作。最后，我希望通过看到这个工作（在这里不重要）来解决另一个问题。

我会看到 3 个选项来构建模块：cygwin、mingw、microsoft compiler (cl)

在 MinGW 上，它报告它不受支持（如果在 Makefile.PL 中很简单），一旦我修改检查以匹配 MinGW，它会扩展为更多`tchar.h`错误有它）。

但无论如何，我的真正目标是使用 MS 编译器构建它，所以虽然任何不需要任何特殊库的编译（就像我想的 cygwin 一样）会更多。

所以现在我的 nmake 输出从运行开始`name /f Makefile`：

```
NMAKE : fatal error U1073: "C:/Program" could not be created.
Stop. 
```

我粗略地翻译了德语的错误信息，但陈述很简单。我在这里看到的似乎是路径问题（可能是空格）。我还注意到正斜杠。由脚本`Makefile`创建`Makefile.PL`（我使用的是 Active Perl v5.12.1）：

```
use strict;
use warnings;

use Config qw(%Config);
use ExtUtils::MakeMaker;

unless ($^O eq "MSWin32" || $^O eq "cygwin") {
    die "OS unsupported\n";
}

require Win32;

my %param = (
    NAME          => 'Win32::Daemon',
    VERSION_FROM  => 'Daemon.pm',
    DEFINE        => '-DPERL_NO_GET_CONTEXT',
    OBJECT        => 'CCallbackList$(OBJ_EXT) CCallbackTimer$(OBJ_EXT) Constant$(OBJ_EXT) CWinStation$(OBJ_EXT) Daemon$(OBJ_EXT) ServiceThread$(OBJ_EXT)',
    XS            => { 'Daemon.xs' => 'Daemon.cpp' },
);
$param{INC} .= ' -EHsc' if $Config{'cc'} =~ /^cl/i;
$param{NO_META} = 1 if eval "$ExtUtils::MakeMaker::VERSION" >= 6.10_03;
WriteMakefile(%param);

sub MY::xs_c {
    '
.xs.cpp:
    $(PERL) -I$(PERL_ARCHLIB) -I$(PERL_LIB) $(XSUBPP) $(XSPROTOARG) $(XSUBPPARGS) $*.xs >xstmp.c && $(MV) xstmp.c $*.cpp
';
} 
```

我对 MakeMaker 了解不多，但我在这里看不到任何我可以修复的东西，并且希望它归结为`Makefile`手动修复本身。我尝试了一些事情，比如引用，但没有任何帮助。

问题是，在 Windows 上构建时，我已经习惯了这样的问题，但通常这是针对为 Unix 创建的工具。这个明确地只有 Windows，所以我希望它可以开箱即用。所以我认为*我*做错了什么。

关于在哪里找到解决方案的任何帮助？提前致谢。

编辑/添加：我在另一台装有 Active Perl 5.16.x 的 Win7 机器上试过这个，它就像一个魅力。我查看了这台机器的不同输出和当前运行时失败`perl Makefile.PL`的输出，我收到以下输出：

```
... Detected uninstalled Perl.  Trying to continue.
Unable to find a perl 5 (by these names: C:\Program Files\Perl64\bin\perl.exe perl.exe perl5.exe perl5.12.1.exe miniperl.exe, in these dirs: . [...] C:\Program Files\Perl64\site\bin C:\Program Files\Perl64\bin [...])
Have \progra~1\perl64\lib
Want \temp\perl---please-run-the-install-script---\lib
Writing Makefile for Win32::Daemon 
```

我截断了输出。现在请有人向我解释一下：为什么我可以运行`perl Makefile.PL`，或者`perl -v`它没有在它所在的确切目录中找到我的 Perl？我重新安装了它，但它没有工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:09:00.763

好的，经过数小时的搜索，我似乎终于解决了这个问题。问题存在于多个问题中。

“uninstalled perl”的第一个命令没有任何意义，但您可以通过提供`perl Makefile.PL PERL_SRC="C\:Program Files\Perl64"`. **警告：**这对我来说在命令 shell 中不起作用，我必须使用`powershell`，因为他不会正确处理路径。您可能需要稍微处理一下。*注意*：最后我通过安装原始 Active Perl 来修复它，而不是我的安装程序（公司软件分发）提供的那个

现在到找不到 perl 的问题：这是路径中的空格问题。我通过创建一个没有空格的符号链接来解决这个问题（似乎）。现在`perl Makefile.PL`不抛出任何错误，**但** `nmake -f "Makefile"`失败了。所以真正的解决方案是：*在你的 perl 路径中不要有空格！*这很糟糕，而且坦率地说，在 2012 年这应该不再是一个问题，但你去吧。

感谢大家付出的所有努力，这是一个很难解决的问题。

# c# - 从图像控制保存图像不起作用

> ID：10700645
> 
> 赞同：0
> 
> 时间：2012-05-22T10:57:13.093
> 
> 标签：c#, .net, wpf, image, save

我的 GUI 上有一个图像（框架元素）。里面有一张图。现在我在这个图像上执行双击，我想要，图像保存自己，并且将被打开，使用默认的图像查看器。

我的代码：

```
void image_MouseDown(object sender, MouseButtonEventArgs e)
{
    //Wayaround, cause there is no DoubleClick Event on Image 
    if (e.ChangedButton == MouseButton.Left && e.ClickCount == 2)
    {
        SaveToPng(((Image)sender), "SavedPicture.png");
        Process.Start("SavedPicture.png");
    }
}

void SaveToPng(FrameworkElement visual, string fileName)
{
    var encoder = new PngBitmapEncoder();
    SaveUsingEncoder(visual, fileName, encoder);
}

void SaveUsingEncoder(FrameworkElement visual, string fileName, BitmapEncoder encoder)
{
    RenderTargetBitmap bitmap = new RenderTargetBitmap(
        (int)visual.ActualWidth,
        (int)visual.ActualHeight,
        96,
        96,
        PixelFormats.Pbgra32);
    bitmap.Render(visual);
    BitmapFrame frame = BitmapFrame.Create(bitmap);
    encoder.Frames.Add(frame);

    using (var stream = File.Create(fileName))
    {
        encoder.Save(stream);
    }
} 
```

打开图片可以正常使用`Process.Start`。问题是保存，它保存了图片：`SavedPicture.png`但是，它只是黑色，所以没有图形.. 也许有人可以告诉我，我的代码有什么问题，或者知道在 WPF 中保存图像的更好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:07:21.097

图像必须在保存前显示。因此，如果您想使用`RenderTargetBitmap`，只需设置并在保存之前`Image.Source`加载（并且不能为空）。`Image``SaveToPng``ActualWidth``ActualHeight`

***示例***：

如果您有`Image`内部 a `Panel`：

```
<Grid x:Name="MyGrid">
    <Image x:Name="MyImage"/>
</Grid> 
```

我`Image.Source`在我的测试类构造函数中设置，只有在图像加载后我才保存它：

```
public MainWindow()
{
    InitializeComponent();

    BitmapImage bmp = new BitmapImage();
    bmp.BeginInit();
    bmp.UriSource = new Uri("image.png", UriKind.RelativeOrAbsolute);
    bmp.EndInit();
    MyImage.Source = bmp;

}

private void Window_Loaded(object sender, RoutedEventArgs e)
{
    RenderTargetBitmap bmp = new RenderTargetBitmap((int)MyGrid.ActualWidth,
            (int)MyGrid.ActualHeight, 96, 96, PixelFormats.Default);

    bmp.Render(MyImage);
    PngBitmapEncoder encoder = new PngBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(bmp));

    using (var stream = System.IO.File.Create("newimage.png"))
    { encoder.Save(stream); }
} 
```

如果您不想使用`Grid` `ActualWidth`并且`ActualHeight`只是将您的 with 和 height 作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:11:05.527

取决于 Image.Source 的类型，假设您有文章中的 BitmapSource，它应该遵循以下内容：

```
var encoder = new PngBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create((BitmapSource)image.Source));
using (FileStream stream = new FileStream(filePath, FileMode.Create))
    encoder.Save(stream); 
```

顺便说一句，RenderTargetBitmap 类是将一个 Visual 对象转换为位图。由团队推荐

示例 [http://msdn.microsoft.com/en-us/library/aa969819.aspx](http://msdn.microsoft.com/en-us/library/aa969819.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:38:14.430

问题解决了。

我用这个：`File.WriteAllBytes()` 从二进制格式保存图像

# linux - 在linux中写入后崩溃

> ID：10700646
> 
> 赞同：6
> 
> 时间：2012-05-22T10:57:16.550
> 
> 标签：linux

如果我使用 write() 将一些数据写入磁盘上的文件会发生什么。但是我的应用程序在刷新之前崩溃了。如果没有系统故障，是否可以保证我的数据最终会刷新到磁盘？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:44:05.883

如果您正在使用`write`（而不是`fwrite`or `std::ostream::write`），则没有进程缓冲。如果没有系统故障，那么数据迟早会（通常很快）写入磁盘。

如果你真的很关心数据的完整性，你可以在打开文件时或在flags `O_DSYNC`和`O_SYNC`flags中打开文件。如果这样做，则可以保证在从`write`.

# jquery - 通过 jquery 合并 @media 规则

> ID：10700647
> 
> 赞同：1
> 
> 时间：2012-05-22T10:57:20.467
> 
> 标签：jquery, css, media-queries

我目前正在使用 LESS 来“冒泡”我的媒体查询。所以我输出的 CSS 是这样的——

```
header {
  color: red;
}
@media only screen and (min-width: 768px) {
  header {
    color: green;
  }
}
@media only screen and (min-width: 1024px) {
  header {
    color: blue;
  }
}

section {
  color: green;
}
@media only screen and (min-width: 768px) {
  section {
    color: blue;
  }
}
@media only screen and (min-width: 1024px) {
  section {
     color: red;
  }
} 
```

正如您所看到的，对于每个正在使用的媒体查询，每个元素（标题/部分/任何内容）都有一个单独的规则声明。

我可以使用 jQuery 浏览 CSS 文件并“整理”所有类似的@media 规则（无论它们是什么）并输出（附加到？）一些 html 来复制和粘贴吗？

编辑：如果我创建了一个“应用程序”，我可以复制并粘贴原始 CSS 并让 jQuery 查找/替换/整理媒体查询，以便所有相同的查询都在一起吗？

编辑：希望能阻止任何混乱，我想创建一个应用程序，它需要一个原始副本和粘贴的文本位（这将是 CSS），然后将正确的 @media 规则编译和合并在一起。然后您可以将其粘贴回您的代码编辑器。实际上并没有“触摸” CSS 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-19T19:51:43.863

接受的答案确实解释了如何构建请求的应用程序？如今，这可以通过使用[browersify](http://browserify.org/)轻松完成。此解决方案还使用[group-css-media-queries](https://github.com/Se7enSky/group-css-media-queries)。

1.  安装browserify： npm install -g browserify
2.  npm install group-css-media-queries
3.  npm install jquery （主要原因在问题中提出）

现在您可以创建一个`main.js`：

```
var gcmq = require('group-css-media-queries');
var $ = require('jquery');
$( document ).ready(function() {
$('#css').submit(function(e){
$('#grouped textarea').val(gcmq($('#css textarea').val()));  
e.preventDefault();    
});
}); 
```

然后在您的控制台中运行：

```
>> browserify main.js -o app.js 
```

结果`app.js`现在可以包含在 HTML 文件中：

```
<script type="text/javascript" src="app.js"></script> 
```

您的应用程序的 HTML 页面应如下所示：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Merge Media queries</title>
  <script type="text/javascript" src="app2.js"></script>    
</head>

<body>
<h1>Unmerged CSS code:</h1>    
<form id="css">
<textarea id="csscode" cols="50" rows="10">header {
  color: red;
}
@media only screen and (min-width: 768px) {
  header {
    color: green;
  }
}
@media only screen and (min-width: 1024px) {
  header {
    color: blue;
  }
}

section {
  color: green;
}
@media only screen and (min-width: 768px) {
  section {
    color: blue;
  }
}
@media only screen and (min-width: 1024px) {
  section {
     color: red;
  }
}</textarea>
<input type="submit" value="merge @media">
</form><br>
<h1>Merged @media:</h1> 
<form id="grouped">  
<textarea id="groupedcode" cols="50" rows="10"></textarea>    
</form>    
</body>
</html> 
```

演示：[http](http://codepen.io/bassjobsen/pen/NqrJeM) ://codepen.io/bassjobsen/pen/NqrJeM （由于 JS 代码大，可能加载速度慢），另见[http://codepen.io/bassjobsen/pen/rVLgod](http://codepen.io/bassjobsen/pen/rVLgod)（同样没有 jQuery（见下文）和缩小的 JS，应该加载更快）

请注意，如果您只使用 jQuery 来处理表单，您将产生大量开销。可能在您的 main.js 中使用纯 JavaScript：

```
var gcmq = require('group-css-media-queries');
window.onload = function () {
    document.getElementById("css").onsubmit = function onSubmit(form) {
        var unmerged = document.getElementById('csscode').value;
        document.getElementById('groupedcode').value = gcmq(unmerged);
        return false;
    }
} 
```

而不是构建自己的应用程序，您应该考虑使用后处理插件进行@media 合并，请参阅：[https ://stackoverflow.com/a/30325426/1596547](https://stackoverflow.com/a/30325426/1596547)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:44:02.560

您可以合并所有相似的CSS，并且您需要像这样按降序编写媒体查询大小格式

```
header {
 color: red;
}
section {
   color: green;
}
@media only screen and (min-width: 1024px) {
   header {
    color: blue;
   }
   section {
    color: red;
  }
}
@media only screen and (min-width: 768px) {
   section {
    color: blue;
   }
   header {
    color: green;
   }
} 
```

供参考检查这个

[http://stackcomplete.com/media-queries-for-adaptive-to-responsive-websites/](http://stackcomplete.com/media-queries-for-adaptive-to-responsive-websites/)

# php - 将网站从 Symfony 1.4 移植到 2.0

> ID：10700648
> 
> 赞同：10
> 
> 时间：2012-05-22T10:57:24.313
> 
> 标签：php, symfony1, symfony, symfony-1.4, porting

我现在有一个用 symfony 1.4 编写的巨大网站（以一种非常糟糕的方式），我被要求对导航流程进行一些重大更改，添加一些功能等等......考虑到努力，我想知道将整个网站移植到 symfony 2.0 是否会更好，但我不确定这会有多难。

以前有人做过吗？

您对要遵循的模式、教程或文档或其他内容有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T16:37:37.140

[你可以使用这个 bundle](https://github.com/Ingewikkeld/IngewikkeldWrapperBundle)将你的遗留项目包装在一个全新的 sf2 项目中。这样，您将能够一次迁移一个项目，并且一旦您让包装器工作，就可以使用 sf2 开发新功能。您可能对[这篇关于迁移的帖子感兴趣](http://www.leaseweblabs.com/2012/02/migration-to-symfony2-continued/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T12:17:34.977

以下是我将如何去做：

你需要先学习和研究一些东西：

*   HTTP 基础知识
*   大量使用的 PHP 命名空间
*   Symfony2 文档
*   Symfony2 文档
*   Symfony2 文档
*   PHPUnit 文档

然后，当您掌握 Symfony2 的窍门时，您需要找出要从旧项目中重用的内容：

**模型，业务逻辑？** 你在 symfony 中使用过 Doctrine 吗？如果是，请查看如何将您的实体移植到 Doctrine2，并了解其中的差异。如果你使用 Propel，我会考虑切换到 Doctrine2 而不是使用 PropelBundle，至少在你习惯 Symfony2 之前。你可以找到更好的 Doctrine2 文档和示例代码。

您还需要将旧的助手类转换为 Symfony2 服务。

**意见？** Symfony2 使用 Twig 作为模板引擎，但你可以使用纯 PHP。

**控制器？** 这应该有点类似于 symfony。Symfony2 的流程与 HTTP 流程相匹配，这意味着您获得了一个 Request 对象并且必须返回一个 Response 对象。

这真的取决于我们旧项目的结构有多好。Symfony2 与 1.0-1.4 完全不同。我可能不会称它为端口，而是重写 - 但是，如果您的旧项目结构良好，您可能会重用很多。

如果没有真正看到你的代码，就不可能给出一个关于它有多难的好答案。这是非常可行的，但没有简单的路线。恕我直言，Symfony2 是 PHP 项目的未来方式，最终您将获得一个更易于维护和支持的项目。

# sql - 更新左连接？

> ID：10700649
> 
> 赞同：0
> 
> 时间：2012-05-22T10:57:30.420
> 
> 标签：sql, sql-server

我正在尝试执行以下查询。

我收到相同的专栏，但连续两天。我插入的值是 day2.Value - day1.Value。

当 tab2 不包含值（day2）时，要插入的值应该只是 0 - day1.Value

当我有 tab1 的数据但没有 tab2 的数据时，不工作的部分是 -day1.Value。相反，我只是得到一个空值？

```
UPDATE tab2
SET Change = ISNULL(tab2.Value ,0) - ISNULL(tab1.Value ,0)
FROM Table_Name tab1
LEFT OUTER JOIN Table_Name  tab2 
    ON tab2.COBDate = '2012-5-18' 
    AND tab1.FileName = tab2.FileName 
    AND tab1.ID = tab2.ID  
    AND tab1.ScenarioID = tab2.ScenarioID
WHERE tab1.COBDate = '2012-5-17' 
    AND tab1.FileName = 'GBP.csv' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:01:40.407

尝试使用 COALESCE()？

```
UPDATE tab2
SET Change = COALESCE(tab2.Value ,0) - COALESCE(tab1.Value ,0)
FROM Table_Name tab1
LEFT OUTER JOIN 
Table_Name  tab2 
ON tab2.COBDate = '2012-5-18' AND 
tab1.FileName = tab2.FileName AND 
tab1.ID = tab2.ID  AND 
tab1.ScenarioID = tab2.ScenarioID
WHERE tab1.COBDate = '2012-5-17' AND tab1.FileName = 'GBP.csv' 
```

# java - JAVA中多个多字符令牌的StringTokenizer？

> ID：10700657
> 
> 赞同：-2
> 
> 时间：2012-05-22T10:57:58.207
> 
> 标签：java, regex, arrays, string

我需要根据多个令牌拆分一个字符串，这些令牌也可能有多个字符，如下所示，

> word1:word2|word3||word4|word5|||word6|word7

我需要根据'：'，'|'，'||'，'|||'标记上面的字符串。是否可以使用 StringTokenizer 或者使用正则表达式拆分对其进行标记的代码是什么？.. 请记住，我还需要结果数组中的标记...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:02:56.890

您可以使用`StringUtils`Lang API。

[请在此处](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)找到相同的 Javadocs 。

它有以下方法——

1.  `Substring/Left/Right/Mid`- 空安全子字符串提取
2.  `SubstringBefore/SubstringAfter/SubstringBetween`- 相对于其他字符串的子字符串提取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:25:20.210

显然，您可以像这样拆分字符串：

```
line.split ("[:|]+") 
res113: Array[java.lang.String] = Array(word1, word2, word3, word4, word5, word6, word7) 
```

但是分隔符是什么？好吧 - 显然相反：

```
line.split ("[^:|]+") 
res114: Array[java.lang.String] = Array("", :, |, ||, |, |||, |) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:05:28.110

这可以通过 StringTokenizer 实现。但这必须是多步骤的过程。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T11:19:13.603

我不知道是否有可用的 API。你可以像下面这样解决。

步骤应该。

1.取字符串

2.定义要替换的正则表达式 //你应该提前知道它们

3.循环所有表达式

4.用空格替换每个表达式。

5.现在您可以使用字符串标记器。

```
String str="word1:word2|word3||word4|word5|||word6|word7";
    String[] tokens={"[:]","[|]{3}","[|]{2}","[|]"};
    for (int i = 0; i < tokens.length; i++) {
        str=str.replaceAll(tokens[i], " ");
        System.out.println(str);
    } 
```

# php - 在 PHP 中从你的 url 中获取 #

> ID：10700658
> 
> 赞同：0
> 
> 时间：2012-05-22T10:58:00.700
> 
> 标签：php, url, get

我知道`$_GET["whatever"]`得到`?whatever=*`

有没有办法`#`从 url 中获取变量：

```
www.*.com#imsomething 
```

? 在谷歌上找不到任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:01:05.797

# 之后的部分是 URL 的客户端部分，它指的是 HTML 中的锚点。因此，您只能在此之前检索所有内容。

> 客户端在检索文档时不应向服务器发送 URI 片段，并且如果没有本地应用程序片段的帮助，则不会参与 HTTP 重定向。

~ 维基百科：[http ://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

* * *

您可以使用此 Javascript 代码来获取它的内容客户端：

```
var hash = window.location.hash; 
```

获取它之后，您当然可以使用 jQuery 的 $.ajax 或类似的东西将它发送到您的服务器端代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:59:49.020

不，没有，因为它永远不会发送到服务器端。那是只在浏览器上可见的东西。

你可以用 javascript 阅读它，然后如果你真的想提交到服务器端，但通常它不会被发送。使用 javascript，您可以读取 window.location.hash 来获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:59:22.123

不，这对于服务器端语言是不可能的……您需要 JavaScript 才能阅读。

# powershell - Windows7 中的 Add-PsSnapin WebAdministration

> ID：10700660
> 
> 赞同：13
> 
> 时间：2012-05-22T10:58:08.157
> 
> 标签：powershell, windows-7, iis-7.5, snap-in, web-administration

我想使用 PowerShell 在 Windows7 64 位上管理我的 IIS7。

我尝试安装 IIS7 Powershell 管理单元 [http://www.iis.net/download/PowerShell](http://www.iis.net/download/PowerShell)

我“以管理员身份运行”，然后键入下面列出的命令：msiexec /I iis7psprov_x64.msi 但我收到此错误消息：“PowerShell 管理单元是 Windows 操作系统的一部分。请通过程序和功能或服务器管理器安装”

我认为加载 WebAdministration 模块不需要此特定功能，但我激活了“程序和功能 | 中的所有选项”。

打开或关闭 Windows 功能 | 信息系统 | 网页管理工具 | IIS 管理脚本和工具

我做这些检查：

1.) Power-Shell 已安装

```
PS C:\Program Files\IIS> $Host.Version

    Major  Minor  Build  Revision
     -----  -----  -----  --------
     2      0      -1     -1

PS C:\Program Files\IIS> $PSVersionTable
    Name                           Value
     ----                           -----
     CLRVersion                     2.0.50727.5448
     BuildVersion                   6.1.7601.17514
     PSVersion                      2.0
     WSManStackVersion              2.0
     PSCompatibleVersions           {1.0, 2.0}
     SerializationVersion           1.1.0.1
     PSRemotingProtocolVersion      2.1

PS C:\Program Files\IIS> get-host
    Name             : ConsoleHost
     Version          : 2.0
     InstanceId       : 445ad8f5-87fc-48f7-b010-f7faf948b86c
     UI               : System.Management.Automation.Internal.Host.InternalHostUserInterface
     CurrentCulture   : es-ES
     CurrentUICulture : es-ES
     PrivateData      : Microsoft.PowerShell.ConsoleHost+ConsoleColorProxy
     IsRunspacePushed : False
     Runspace         : System.Management.Automation.Runspaces.LocalRunspace 
```

2.) Set-ExecutionPolicy -ExecutionPolicy {您的执行策略}

```
PS C:\Program Files\IIS> get-ExecutionPolicy
 Unrestricted 
```

3.)Import-Module WebAdministration

```
PS C:\Program Files\IIS> Import-Module WebAdministration
 PS C:\Program Files\IIS> 
```

4.) C:\Windows\System32\WindowsPowerShell\v1.0\Modules\WebAdministration 路径存在

5.) 模块和管理单元

```
PS C:\Program Files\IIS> get-module -listavailable

ModuleType Name                      ExportedCommands
 ---------- ----                      ----------------
 Manifest   AppLocker                 {}
 Manifest   BitsTransfer              {}
 Manifest   PSDiagnostics             {}
 Manifest   TroubleshootingPack       {}
 Manifest   WebAdministration         {}

PS C:\Program Files\IIS> Get-PSSnapin -Registered

Name        : SqlServerCmdletSnapin100
 PSVersion   : 2.0
 Description : This is a PowerShell snap-in that includes various SQL Server cmdlets.

Name        : SqlServerProviderSnapin100
 PSVersion   : 2.0
 Description : SQL Server Provider

Name        : TfsBPAPowerShellSnapIn
 PSVersion   : 2.0
 Description : This is a PowerShell snap-in that includes Team Foundation Server cmdlets.

PS C:\Program Files\IIS> get-pssnapin

Name        : Microsoft.PowerShell.Diagnostics
 PSVersion   : 2.0
 Description : Este complemento de Windows PowerShell contiene cmdlets de Eventos de Windows y de contador de rendimient
               o.

Name        : Microsoft.WSMan.Management
 PSVersion   : 2.0
 Description : Este complemento de Windows PowerShell contiene cmdlets (como Get-WSManInstance y Set-WSManInstance) que
               usa el host de Windows PowerShell para administrar operaciones WSMan.

Name        : Microsoft.PowerShell.Core
 PSVersion   : 2.0
 Description : Este complemento de Windows PowerShell contiene cmdlets usados para administrar los componentes de Window
               s PowerShell.

Name        : Microsoft.PowerShell.Utility
 PSVersion   : 2.0
 Description : Este complemento de Windows PowerShell contiene cmdlets de utilidad que sirven para manipular datos.

Name        : Microsoft.PowerShell.Host
 PSVersion   : 2.0
 Description : Este complemento de Windows PowerShell contiene cmdlets (como Start-Transcript y Stop-Transcript) proporc
               ionados para su uso con el host de la consola de Windows PowerShell.

Name        : Microsoft.PowerShell.Management
 PSVersion   : 2.0
 Description : El complemento Windows PowerShell contiene cmdlets de administración para administrar los componentes de
               Windows.

Name        : Microsoft.PowerShell.Security
 PSVersion   : 2.0
 Description : Este complemento de Windows PowerShell contiene varios cmdlets para la administración de la seguridad de
               Windows PowerShell.

PS C:\Program Files\IIS> [System.Reflection.Assembly]::LoadFrom( "C:\windows\system32\inetsrv\Microsoft.Web.Administration.dll" )

GAC    Version        Location
 ---    -------        --------
 True   v2.0.50727     C:\Windows\assembly\GAC_MSIL\Microsoft.Web.Administration\7.0.0.0__31bf3856ad364e35\Microsoft....

PS C:\Program Files\IIS> (New-Object Microsoft.Web.Administration.ServerManager)

ApplicationDefaults      : Microsoft.Web.Administration.ApplicationDefaults
 ApplicationPoolDefaults  : Microsoft.Web.Administration.ApplicationPoolDefaults
 ApplicationPools         : {DefaultAppPool}
 SiteDefaults             : Microsoft.Web.Administration.SiteDefaults
 Sites                    : {Default Web Site}
 VirtualDirectoryDefaults : Microsoft.Web.Administration.VirtualDirectoryDefaults
 WorkerProcesses          : {}

PS C:\Program Files\IIS> (New-Object Microsoft.Web.Administration.ServerManager).Sites

ApplicationDefaults        : Microsoft.Web.Administration.ApplicationDefaults
 Applications               : {Default Web Site/}
 Bindings                   : {[http] *:80:}
 Id                         : 1
 Limits                     : Microsoft.Web.Administration.SiteLimits
 LogFile                    : Microsoft.Web.Administration.SiteLogFile
 Name                       : Default Web Site
 ServerAutoStart            : True
 State                      : Started
 TraceFailedRequestsLogging : Microsoft.Web.Administration.SiteTraceFailedRequestsLogging
 VirtualDirectoryDefaults   : Microsoft.Web.Administration.VirtualDirectoryDefaults
 Attributes                 : {name, id, serverAutoStart, state}
 ChildElements              : {bindings, limits, logFile, traceFailedRequestsLogging...}
 ElementTagName             : site
 IsLocallyStored            : True
 Methods                    : {Start, Stop}
 RawAttributes              : {[name, Default Web Site], [id, 1], [serverAutoStart, True], [state, 1]}
 Schema                     : Microsoft.Web.Administration.ConfigurationElementSchema 
```

6.) 我在 ps1 文件中尝试

```
$succeeded = import-module WebAdministration
 Write-Host  $succeeded

if (($succeeded -ne $null) -and ($succeeded.GetType() -eq [System.Exception]))
 {
   #Could not import, trying to snapin
   add-pssnapin WebAdministration
 } 
```

$succeeded 为空，并且“add-pssnapin WebAdministration”产生错误消息：Add-PSSnapin：此计算机上未安装 Windows PowerShell 管理单元“WebAdministration”。

```
PS C:\Program Files\IIS> Add-PSSnapin WebAdministration
 Add-PSSnapin : El complemento WebAdministration de Windows PowerShell no está instalado en este equipo
 En línea: 1 Carácter: 13
 + Add-PSSnapin <<<<  WebAdministration
     + CategoryInfo          : InvalidArgument: (WebAdministration:String) [Add-PSSnapin], PSArgum
     + FullyQualifiedErrorId : AddPSSnapInRead,Microsoft.PowerShell.Commands.AddPSSnapinCommand 
```

有什么建议吗？为什么 Add-PSSnapin WebAdministration 失败？

更新：我很困惑何时使用 Add-PSSnapin 以及何时使用 Import-Module

[http://social.technet.microsoft.com/Forums/en/ITCG/thread/3e1ca6e1-d197-4c04-a145-1e922814a618](http://social.technet.microsoft.com/Forums/en/ITCG/thread/3e1ca6e1-d197-4c04-a145-1e922814a618)

当然，WebAdministration 只是模块，并没有 PSSnapin。或许...

参考：

PowerShell IIS 管理单元

[无法安装 Powershell 管理单元](https://stackoverflow.com/questions/3613512/cannot-install-powershell-snap-in)

[http://www.iis.net/download/PowerShell](http://www.iis.net/download/PowerShell)

[http://learn.iis.net/page.aspx/429/installing-the-iis-powershell-snap-in/](http://learn.iis.net/page.aspx/429/installing-the-iis-powershell-snap-in/)

[http://learningpcs.blogspot.com.es/2010/08/powershell-iis-7-webadministration.html](http://learningpcs.blogspot.com.es/2010/08/powershell-iis-7-webadministration.html)

PowerShell 安装版本

[确定已安装的 PowerShell 版本](https://stackoverflow.com/questions/1825585/how-to-determine-what-version-of-powershell-is-installed)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T11:48:26.190

这是我在 profile.ps1 中用于加载 WebAdmin 模块的函数。它涵盖 IIS 7 和 7.5

```
# Web administration is loaded as a module on Windows 2008 R2 but as a set of snapins
# for Windows 2008 (not R2)

function Util-Load-Web-Administration
{
    $ModuleName = "WebAdministration"
    $ModuleLoaded = $false
    $LoadAsSnapin = $false

    if ($PSVersionTable.PSVersion.Major -ge 2)
    {
        if ((Get-Module -ListAvailable | ForEach-Object {$_.Name}) -contains $ModuleName)
        {
            Import-Module $ModuleName

            if ((Get-Module | ForEach-Object {$_.Name}) -contains $ModuleName)
                { $ModuleLoaded = $true } else { $LoadAsSnapin = $true }
        }
        elseif ((Get-Module | ForEach-Object {$_.Name}) -contains $ModuleName)
            { $ModuleLoaded = $true } else { $LoadAsSnapin = $true }
    }
    else
    { $LoadAsSnapin = $true }

    if ($LoadAsSnapin)
    {
        try
        {
            if ((Get-PSSnapin -Registered | ForEach-Object {$_.Name}) -contains $ModuleName)
            {
                if ((Get-PSSnapin -Name $ModuleName -ErrorAction SilentlyContinue) -eq $null) 
                    { Add-PSSnapin $ModuleName }

                if ((Get-PSSnapin | ForEach-Object {$_.Name}) -contains $ModuleName)
                    { $ModuleLoaded = $true }
            }
            elseif ((Get-PSSnapin | ForEach-Object {$_.Name}) -contains $ModuleName)
                { $ModuleLoaded = $true }
        }

        catch
        {
            Write-Error "`t`t$($MyInvocation.InvocationName): $_"
            Exit
        }
    }
} 
```

# objective-c - 如何以编程方式检测自动引用计数？

> ID：10700661
> 
> 赞同：2
> 
> 时间：2012-05-22T10:58:12.183
> 
> 标签：objective-c, ios, automatic-ref-counting

这可能是一个愚蠢的问题，但我只是想知道。我希望我的代码以编程方式检测是否启用了 ARC。我怎么做？有什么可以检查的标志吗？其实问题是，我写了一个开源库。我用过`release`和`retain`在里面。如果其他人在启用 ARC 的情况下使用我的库文件，我不希望他们出现任何错误。我该如何做到这一点？或者有什么可能的方法可以在使用之前提供任何工具来编译我的库？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-22T11:05:37.687

```
#if !__has_feature(objc_arc)
    //Do manual memory management...
#else
    //Usually do nothing...
#endif 
```

这当然是编译时检查，您不能在运行时检查 ARC。

另一种方法是为`-fno-objc-arc`在使用 ARC 的项目中使用手动内存管理的文件设置编译器标志。

无论您是想为此烦恼还是只是在任何地方使用 ARC，都取决于您想要/需要的向后兼容程度。同时支持 ARC 和 MRC 的代码可能很难阅读和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:04:12.157

您不会以编程方式检测到它，它基于*translations*运行。也就是说，它**不像**垃圾收集——它是进程范围的，需要所有链接库来支持（并在该模式下正确实现它）。您可以使用 ARC 编译一些文件，而有些则不用。

但是，您可以在[*编译*](https://stackoverflow.com/questions/9462372/how-do-i-know-whether-the-compiler-has-arc-support-enabled/9462395#9462395)[时检测到它](https://stackoverflow.com/questions/9462372/how-do-i-know-whether-the-compiler-has-arc-support-enabled/9462395#9462395)*。*

 *至于你的图书馆的分布：我不会打扰基于翻译的系统，其中引用计数操作是有条件地启用的。我会（个人）只支持一种模型（在您的情况下为 MRC，直到您选择将其迁移到 ARC），然后期望人们链接到该库，或者如果他们在他们配置的目标中编译它，以禁用 ARC。基于功能的存在有条件地启用/禁用代码是要求出现棘手的错误，特别是当它可能会影响库中 9% 的代码行时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:05:15.637

不，你不能，如果你的源代码使用了 retain-release，Xcode 就不会在 ARC 项目中编译*

# facebook - facebook api 用于导入联系人

> ID：10700666
> 
> 赞同：0
> 
> 时间：2012-05-22T10:58:28.987
> 
> 标签：facebook, playframework

嘿，任何人都可以告诉我，如何在 play 应用程序中从我的 facebook 帐户导入联系人。

请告诉我如何为我的应用程序获取这些值

```
module.fbconnect=${play.path}/modules/fbconnect

# Facebook Connect
# ~~~~~
fbconnect.id=YOUR_APP_ID_HERE
fbconnect.apiKey=YOUR_API_KEY_HERE
fbconnect.secret=YOUR_APP_SECRET_HERE
fbconnect.model=models.User
fbconnect.landUrl=/ 
```

谢谢，我期待您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:22:12.463

我确信您已经阅读了 fbconnect 模块的文档，它通过 Facebook 进行身份验证，但仅此而已。

您可以做的是获取用户 Facebook 用户 ID，`facebookOAuthCallback()`然后[手动检索好友列表](https://developers.facebook.com/docs/reference/api/)。Play 有一个很棒的库，用于访问内置的 Web 套接字；[您可以在此处找到它的文档](http://www.playframework.org/documentation/1.2.4/libs#WebServiceclient)（我假设您使用的是 Play！1，而不是 2，因为您使用的是版本 1 插件）。

另一个选项是另一个名为[play-fbgraph 的](http://code.google.com/p/play-fbgraph/)播放模块。它甚至还有一个[示例页面](http://code.google.com/p/play-fbgraph/wiki/Examples)，可以调用获取好友列表，这似乎很简单（未经测试）：

```
JsonArray friends           = FbGraph.getConnection("me/friends"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:49:05.257

这是该模块的文档： [http ://www.playframework.org/modules/fbconnect-head/home](http://www.playframework.org/modules/fbconnect-head/home)

> **先决条件**
> 
> 在您可以使用 Facebook 身份验证之前，您必须向 Facebook 注册您的应用程序。请务必记下您的应用程序 ID、API 密钥和应用程序机密。

如本模块所述：

> 轻松地将基于 Facebook 的身份验证集成到任何 Play 框架应用程序中。

该模块旨在使用 Facebook 身份验证，仅此而已。而已。

您应该考虑使用Carsten 所述的[play-fbgraph](http://code.google.com/p/play-fbgraph/)：它将允许做更多的事情。

# .net - 为什么我的应用程序总是使用最新的 GAC 版本而不是引用的版本？

> ID：10700669
> 
> 赞同：8
> 
> 时间：2012-05-22T10:58:44.233
> 
> 标签：.net, reference, version, gac, publisher-policy

**语境**

我在 GAC 中安装了 2 个不同版本的程序集，1.0 版和 2.0 版。我制作了一个引用 1.0 作为特定版本的应用程序。

**问题**

当我运行我的应用程序时，它将始终加载 2.0 版，而该应用程序专门引用 1.0 版。

**问题**

为什么会这样？如何强制我的应用程序加载已编译的版本？

在我看来，这与绑定重定向没有任何关系，因为我的应用程序在构建它时甚至不知道版本 2.0，并且引用“特定版本”元数据设置为 true。

谢谢。

* * *

**编辑：**

我引用的程序集实际上是 ODAC 包中的 Oracle.DataAccess。我注意到其他名为 Policy.x.xxx.Oracle.DataAccess 的程序集在 GAC 中发布。

* * *

**编辑2：**

查看 Oracle.DataAccess 策略后，我找到了定义绑定重定向的配置：

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
          <assemblyIdentity name="Oracle.DataAccess" publicKeyToken="89B483F429C47342"/>
            <bindingRedirect oldVersion="4.112.0.0-4.112.3.0" newVersion="4.112.3.0"/>
        </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

即使我将反向绑定重定向添加到我的应用程序配置中，GAC 中的策略似乎具有优先级。我发现一篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)处理该主题并建议使用此配置忽略策略：

```
<publisherPolicy apply="no" /> 
```

但它仍然不起作用......

* * *

**编辑3：**

我试图从 GAC 中删除该策略并重新启动我的机器。它终于奏效了。它感觉不像是一个舒适的解决方案开发，但这个策略确实破坏了我的一个应用程序，这意味着在我的情况下禁用该策略是正确的做法。

* * *

**最终编辑：**

伊戈尔给了我正确的答案。要解决这些策略，我所要做的就是使用`publisherPolicy`正确配置部分中的设置：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="Oracle.DataAccess" publicKeyToken="89B483F429C47342"/>
      <publisherPolicy apply="no"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T12:00:08.357

编辑问题后，很明显这是影响程序集绑定的策略文件。

对于 Oracle，有一个名为 Policy.XYOracle.DataAccess.config 的文件，其内容类似于：

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
          <assemblyIdentity name="Oracle.DataAccess" publicKeyToken="89B483F429C47342"/>
            <bindingRedirect oldVersion="10.1.0.000-10.2.0.100" newVersion="10.2.0.100"/>
        </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

该策略由 Oracle 安装程序安装并重定向`Oracle.DataAccess.dll`到最新版本，因为 Oracle 认为该库是向后兼容的。

编辑：如果您不希望将发布者策略应用于*特定程序集*，请将元素放入元素中：

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
        <assemblyIdentity name="myAssembly" publicKeyToken="..."  culture="en-us" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0" />
            <publisherPolicy apply="no" />
    </dependentAssembly>
</assemblyBinding> 
```

# tsql - T-SQL where 子句 case 语句

> ID：10700672
> 
> 赞同：0
> 
> 时间：2012-05-22T10:58:50.437
> 
> 标签：tsql, case, where-clause

需要一些 SQL 的小帮助。我正在使用一个`VARCHAR`值来确定在 WHERE 子句中使用哪个逻辑，但我在编写这个 case 语句时遇到了一些问题。

```
where 
   (CASE WHEN @p_flag = 'ATA' 
            THEN (@p_start_ata IS NULL AND @p_end_ata IS NULL) OR (vso.poa_ata between @p_start_ata and @p_end_ata)
         ELSE (@p_start_atd IS NULL AND @p_end_atd IS NULL) OR (vso.pol_atd between @p_start_atd and @p_end_atd)
) 
```

> 第 93 行 关键字“IS”附近的语法不正确。

它可能是一个小错误，但让我感到沮丧。也许有更好的方法来写这个？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:06:15.450

就像之前说的那样，你不能像你正在做的那样使用 case 语句。所以这可能是一个建议：

```
WHERE 
    (
        @p_flag = 'ATA'
        AND 
            (
                (@p_start_ata IS NULL AND @p_end_ata)
                OR (vso.poa_ata between @p_start_ata and @p_end_ata)
            )
    )
    OR
    (
        NOT @p_flag = 'ATA'
        AND 
            (
                (@p_start_atd IS NULL AND @p_end_atd IS NULL)
                OR (vso.pol_atd between @p_start_atd and @p_end_atd)
            )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:06:00.957

你不能这样用`CASE`！

它用于获取值而不是限制。[检查此](http://msdn.microsoft.com/en-us/library/ms181765.aspx)以查看如何正确使用`CASE`.

* * *

在您的情况下，您必须更改您的逻辑，可能使用`IF`'s 并制作想要`SELECT`的 's。

# java - JPA 多对多问题

> ID：10700683
> 
> 赞同：1
> 
> 时间：2012-05-22T10:59:20.970
> 
> 标签：java, sql, jpa, openjpa

我有两个表，用户和产品。我试图自动创建一个新表 TestedProducts，这是用户和产品之间的多对多关系。但是，我收到此错误。

```
org.apache.jasper.JasperException: javax.ejb.EJBException: The bean encountered a non-application exception; nested exception is: 
<openjpa-1.2.1-r752877:753278 fatal user error> org.apache.openjpa.persistence.ArgumentException: 
"ejb.UserEntity.products<element:interface ejb.Product>" has columns with targets, but OpenJPA does not support any joins on this mapping in this context. 
```

UserEntity 看起来很精简。

```
long id;

String firstname;
String lastname;
String password;
String email;
String description;

List<Product> products;

public void setId(long id){
    this.id = id;
}

@Id
@GeneratedValue
public long getId() {
    return id;
}

@ManyToMany
@JoinTable(name="TestedProducts", 
joinColumns=
    @JoinColumn(name="usrId", referencedColumnName="id"),
  inverseJoinColumns=
  @JoinColumn(name="prodId", referencedColumnName="id")
  )
  public List<Product> getProducts() {
    return products;
  }

  public void setProducts(List<Product> products) {
    this.products = products;
  } 
```

像这样的 ProductEntity：

```
long id;

String name;
String description;
String type;

List<User> users;

@ManyToMany(mappedBy="products") 
protected List<User> getUsers() {
    return users;
}

protected void setUsers(List<User> users) {
this.users = users;
} 
```

我跳过了其余的 setter 和 getter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:23:18.197

您需要以与在用户实体中相同的方式在产品实体中注释包含用户的列表，只是倒置。我不认为 mappedby 值的处理方式相同。

# grails - 如何在 OpenID 插件中升级 OpenId4Java jar 版本？

> ID：10700685
> 
> 赞同：0
> 
> 时间：2012-05-22T10:59:25.637
> 
> 标签：grails, plugins, openid, openid4java

我已经为我的 Grails(v2.0.1) 应用程序安装了[OpenID 插件](http://grails.org/plugin/openid)(v0.4.3)，但我无法通过 Google 作为 OpenID 提供程序进行身份验证。

我认为问题在于 OpenId4Java v0.9.4 没有正确处理 Google 的响应。前几天我在某个地方读到了这篇文章，但目前找不到参考资料（找到后会进行编辑）。

所以我想用更高版本升级插件具有的 OpenId4Java jar 的版本。但我不确定在哪里/如何做到这一点。

在`<home dir>/.grails/2.0.1/projects/<my project>/plugins/openid-0.4.3/lib`文件夹中，jar 是`java-openid-sxip-0.9.4.jar`. 我在[http://code.google.com/p/openid4java/](http://code.google.com/p/openid4java/)的推荐下载中找到的是`openid4java-0.9.6.jar`.

我以前从来没有更换过插件提供的 jar，所以我只是想知道我应该把 0.9.6 jar 放在哪里，以及如何让我的应用程序识别它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:02:37.910

似乎安装 OpenID 插件的 0.4.4 版（2012 年 5 月下旬发布）可以解决问题。它附带`openid4java-nodeps-0.9.6.jar`而不是`java-openid-sxip-0.9.4.jar`意味着使用 OpenId4Java 的较新版本（v0.9.6）。

# php - 如何在链接之间进行比较

> ID：10700686
> 
> 赞同：1
> 
> 时间：2012-05-22T10:59:26.117
> 
> 标签：php

我正在尝试为进入我的网站但仍然存在 url 比较问题的 url 做简单的禁止工具系统。

我已经创建了以下数据库表`badurl`，`url`我要禁止

```
CREATE TABLE `badurl`(
`id` int(3) NOT NULL auto_increment,
`url` text,
PRIMARY KEY (`id`),
KEY `id` (`id`)) 
```

现在假设我已经存储了以下网址`www.no_good_site.com` 并且有人发布了`http://www.no_good_site.com`但是它是相同的但它不会禁止它。

```
$user = "http://www.no_good_site.com" // visitor post this

// i'm gonna do compare by the stored banned urls
// I've stored this one www.no_good_site.com

$qry="select * from badurls where url='$user'";
$result=mysql_query($qry) or die($qry);
if(mysql_num_rows($result)=='0'){

echo "Good";

}else{

while($line=mysql_fetch_array($result)){

echo "Bad";

}} 
```

那么有什么想法我可以设置（发布和存储的url）而不用`www.` `http://`结束斜线`/`然后比较它。[ `no_good_site.com`]

因为它失败了，因为他们可能会以多种可能性进入，而我的方式需要两者完全相同。

```
no_good_site.com
no_good_site.com/
www.no_good_site.com/
http://no_good_site.com
http://no_good_site.com/
http://www.no_good_site.com
http://www.no_good_site.com/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:06:42.407

在比较之前使所有 URL 格式相似。

```
no_good_site.com => www.no_good_site.com
no_good_site.com/ = > www.no_good_site.com
www.no_good_site.com/ => www.no_good_site.com
http://no_good_site.com => www.no_good_site.com
http://no_good_site.com/ => www.no_good_site.com
http://www.no_good_site.com => www.no_good_site.com
http://www.no_good_site.com/ => www.no_good_site.com

<?php
    function formatURL($url) {

        //an array of strings I wish to remove
        $remove = array(
                        "http://",
                        "www.",
                        "index.html",
                        "index.php"
                        );

        //loop through array
        foreach($remove as $value) {
            //replace array values with nothing
            $url = str_ireplace($value, '', $url);
        }

        //if the url ends in a / then trim it off
        $url = rtrim($url,'/');

        return $url;

    }
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:09:44.730

尝试删除 http://、www。并在查询前结束'/'：

```
$user = "http://www.no_good_site.com/";  // visitor post this
$user = rtrim(str_ireplace(array('http://', 'www.'), '', $user), '/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:03:52.063

一件简单的事情是，如果您从输入的 URL 中提取域名，然后在数据库中搜索它，而不是完整的 URL。

您可以轻松地从变量中获取域名`$_SERVER`为“SERVER_NAME”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:07:13.283

也许这个？

```
$qry="select * from badurls where url LIKE '%$user%'"; 
```

域可以以协议作为前缀的形式出现**(http,ssl)**以及查询**(?blah=boo)**

# sql - 当 iReport 中的表达式比较 2 个字符串时打印

> ID：10700687
> 
> 赞同：1
> 
> 时间：2012-05-22T10:59:27.240
> 
> 标签：sql, jasper-reports, ireport

表达时我可以在打印时放置多个条件吗？你能给出语法吗？例如，

```
If Field Value = 'Cancelled' then Print Grey Color
Feild Value = 'Proposed ' then Print Black Color 
```

ETC

根据字段值，我需要更改文本字段的颜色。

我使用了这个语法

```
$F{status_Current}.StringValue() ='Canceled'? Boolean.TRUE : Boolean.FALSE 
```

但它抛出了一个错误。

有人可以为此给出正确的语法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-07T22:13:55.037

假设变量 status_Current 是字符串类型，您应该能够使用

```
$F{status_Current}.equals("Canceled")? Boolean.TRUE : Boolean.FALSE 
```

但听起来你可能正在尝试做一些我还没有做的条件格式。我研究了一下，发现[这个问题](https://stackoverflow.com/questions/13415989/using-conditional-formatting-in-ireport)希望它有所帮助。

祝你好运！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T11:42:05.290

1.  字段“status_Current”的类型是字符串

> $F{status_Current}.equals("Canceled")? Boolean.TRUE : Boolean.FALSE

2.  字段“status_Current”的类型不是字符串

> $F{status_Current}.StringValue().equals("Canceled") ？Boolean.TRUE : Boolean.FALSE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:25:16.067

尝试这个：

$F{status_Current}.StringValue().equals("Canceled") ？Boolean.TRUE : Boolean.FALSE

HTH。

# objective-c - 使用 XCODE 4.2 编译 iOS 5.0 时出现 Libpng 错误

> ID：10700700
> 
> 赞同：1
> 
> 时间：2012-05-22T11:00:12.707
> 
> 标签：objective-c, ios, opengl-es

当我尝试加载三角形时，出现下一个错误：

`Mesh_Mesh_Box001.001: 35: GL_TRIANGLE_STRIP libpng error: CgBI: unknown critical chunk`

但这适用于不同的示例。

到底是怎么回事？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T11:05:26.500

您可以尝试更改 PNG 压缩标志。

转到您的项目构建设置并查找“压缩 PNG 文件”。然后将标志更改为“否”值。

在此之后，在重建之前先清理项目。它必须工作！

;)

# spotify - 在 Spotify-Artist 对象中找不到 getAlbums-Call

> ID：10700705
> 
> 赞同：0
> 
> 时间：2012-05-22T11:00:29.723
> 
> 标签：spotify

我正在尝试从艺术家对象生成播放列表，但记录的方法[getAlbums](https://developer.spotify.com/technologies/apps/docs/beta/8a6410b5e6.html)不存在。

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:20:01.840

删除了 getAlbums 方法。一个新的实施正在进行中。

# .net - 保留已删除的数据以供历史记录或重复使用

> ID：10700707
> 
> 赞同：0
> 
> 时间：2012-05-22T11:00:37.233
> 
> 标签：.net, sql-server-2008, fluent-nhibernate

我正在开发 Asp.net Mvc 中的卡管理应用程序。我们使用 Fluent Nhibernate 作为 ORM 和 Sql Server 2008。

我们现在正在考虑在用户选择删除数据时不要真正删除数据。

我的问题是，最好的方法是什么，以及这样做的后果是什么（性能，数据库大小）？

我们数据库的一些重要表，可能有数千条记录。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:05:05.717

我从没想过这是一个好主意，尤其是在涉及外键时。这确实会使事情变得比他们需要的更复杂。而且我从不喜欢删除但没有真正删除的记录的想法。这只是一团糟，IMO。

如果您想保留已删除的行，我建议将它们放在某种存档或历史记录表中。这样，如果需要，您可以将它们留在那里以供将来分析，并且可以在以后将它们带回来（如有必要）。

数据库的大小确实不是问题。“数千”条记录对于 SQL Server 来说不算什么。在我们的制造数据库中，我们的一些表中有数亿行。性能非常出色。

使用 SQL Server 2008，您可以使用[Change Data Capture](http://msdn.microsoft.com/en-us/library/cc645937.aspx)，它可以非常好地为您处理已删除的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:11:05.643

我现在工作的地方和以前的职位，这个想法一直围绕着一个`DeletedDate`和`DeletedBy`记录。这样，每当您检索信息时，您就可以过滤掉并仅获取记录 where `DeletedDate == null`。

这种方式还为您提供了一种跟踪谁删除了数据以及何时删除数据的方法，同时还使您能够通过将数据重置`DeletedDate`为 null 来“恢复”删除。

就性能和数据库大小而言，我不会太担心它，因为 SQL Server 能够处理数百万行数据。

如果性能非常关键并且您注意到应用程序变慢了，您可以轻松地将已删除的数据归档到单独的备份数据库中。

如果您不介意将数据保存太久，您可以定期删除数据库`DeletedDate`中超过一年前的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:08:50.057

我会在删除触发器之后进行（它也有一些性能损失）并在存档表中插入已删除的行。然后可以对该存档表进行分区/数据压缩（如果使用 SQL Server 的企业版）。

存档表看起来就像基表，除了有一些额外的 ID 列，我还会输入删除日期和删除数据的用户名。

# android - 保存后视频不播放

> ID：10700709
> 
> 赞同：-3
> 
> 时间：2012-05-22T11:00:44.793
> 
> 标签：android

```
 MediaRecorder m_recorder = new MediaRecorder();
    m_recorder.setPreviewDisplay(s);
    m_recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    m_recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    m_recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    m_recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
    m_recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    m_recorder.setMaxDuration(20000); // length of video in MS
    m_recorder.setVideoSize(320, 240);
    m_recorder.setVideoFrameRate(15);
    m_recorder.setOutputFile(video.getPath());
    m_recorder.prepare(); 
```

mp4 文件保存在 sdcard 上，但该文件无法播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:15:21.227

参考以下，

```
public class AudioRecordingActivity extends Activity implements OnClickListener{

    MediaRecorder recorder;
    final String fileNameStr = "audio-android.3gp";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ((Button) findViewById(R.id.btn_record)).setOnClickListener(this);
        ((Button) findViewById(R.id.btn_stop)).setOnClickListener(this);
        ((Button) findViewById(R.id.btn_play)).setOnClickListener(this);
    }

    public void onClick(View v) {
        int id = v.getId();

         switch (id) {
         case R.id.btn_record: {
             System.out.println("Record pressed.");
             try {

                 recorder = new MediaRecorder();
                 FileOutputStream fos = openFileOutput(fileNameStr, MODE_PRIVATE);

                 recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                 recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                 recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                 recorder.setOutputFile(fos.getFD());
                 recorder.prepare();
                 recorder.start();

             } catch (IOException e) {
                 System.out.println("IOException caught during recording.");
                 e.printStackTrace();
             }
             return;
         }
         case R.id.btn_stop: {
             recorder.stop();
             recorder.release();
             System.out.println("Stop pressed.");
             return;
         }
         case R.id.btn_play: {
             System.out.println("Play pressed.");

             MediaPlayer mp = new MediaPlayer();
             try {
                 FileInputStream fis = openFileInput(fileNameStr);
                 mp.setDataSource(fis.getFD());
                 mp.prepare();
             } catch (IllegalArgumentException e) {
                 e.printStackTrace();
             } catch (IllegalStateException e) {
                 e.printStackTrace();
             } catch (IOException e) {
                 e.printStackTrace();
             }
             mp.start();

             return;
         }
         }
    }
} 
```

**主要的.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn_record"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/start" />

<Button
    android:id="@+id/btn_stop"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/stop" />

<Button
    android:id="@+id/btn_play"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/play" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T12:13:15.333

也试试这个，

```
public class AudioActivity extends Activity{

    public static int RECORD_REOUEST = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent intt = new Intent(Media.RECORD_SOUND_ACTION);
        startActivityForResult(intt, RECORD_REOUEST);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {   
         if (resultCode == RESULT_OK && requestCode == RECORD_REOUEST) 
         {
             Uri recordedAudioPath = data.getData();
             String FullPath=recordedAudioPath.toString();
                  }
         }
 } 
```

# ajax - AJAX 调用返回网页源

> ID：10700710
> 
> 赞同：0
> 
> 时间：2012-05-22T11:00:47.270
> 
> 标签：ajax, jquery, servlets, websphere-portal

我正在通过 jQuery AJAX 向 servlet 发出 GET 请求。在我使用的 servlet 中`httpResponse.sendRedirect("abc.com")`。在我的 AJAX 调用中，该网页 (abc.com) 的源被返回，而不是 servlet 将我重定向到该页面。

更多信息：我在 Websphere Portal Server 6.1 上运行所有这些，并使用 IBM 代理 servlet 处理 CORS。

我的问题是：我如何从 servlet 重定向到请求的 URI。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:04:10.690

在 ajax 调用完成后（成功）使用 window.location.href 进行重定向。只需在您的函数中返回 httpresponse 而不是重定向。

# iphone - 如何在不覆盖文件内容的情况下写入文本文件？

> ID：10700711
> 
> 赞同：1
> 
> 时间：2012-05-22T11:00:51.333
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [如何在 iOS sdk 的本地资源 txt 文件中附加字符串](https://stackoverflow.com/questions/7041237/how-to-append-string-in-local-resource-txt-file-for-ios-sdk)

我的代码是这样的：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [paths objectAtIndex: 0];

docFile_V1 = [docDir stringByAppendingPathComponent:LOG_FILE_V1];
if ([file fileExistsAtPath: docFile_V1] == YES)
{     
    if(![formatedlogStr writeToFile:docFile_V1  atomically:YES encoding:NSUTF8StringEncoding error:&error])
    {
        NSLog(@"Error: %@", [error userInfo]);
    }
} 
```

这是我写入文件的代码，但不幸的是它覆盖了文件的所有先前内容。我想写一个字符串而不覆盖前一个。

任何人都可以通过示例建议写入或附加到文件的最佳方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:04:32.467

首先，您应该在 NSMutableArray 中读取文件的内容，然后将数据附加到数组中，然后再次将其写入文件。

# .net - 使用 .NET / WIF / WCF 查询 WS-Trust 1.4 STS

> ID：10700714
> 
> 赞同：1
> 
> 时间：2012-05-22T11:01:04.263
> 
> 标签：.net, wcf, wif, saml-2.0

我需要使用 .NET 查询 WS Trust 1.4 服务以启用 SAML 2.0 身份验证方案。

编辑：更准确地说，我需要在 WS Trust 1.4 中定义的客户端支持用户交互挑战。

我查看了 WIF，它通过 WSTrustChannelFactory 提供对 WS Trust 的直接访问（请参阅代码片段中的 trustChannelFactory.TrustVersion ...），但似乎只支持 WS-Trust 1.3 和 Feb2005？

```
 WSTrustChannelFactory trustChannelFactory = new WSTrustChannelFactory(getBinding(), "http:/localhost...");

            trustChannelFactory.TrustVersion = TrustVersion.WSTrust13;
            WSTrustChannel channel = (WSTrustChannel)trustChannelFactory.CreateChannel();

            RequestSecurityToken rst = new RequestSecurityToken();

            RequestSecurityTokenResponse rstr = null;
            SecurityToken token = channel.Issue(rst, out rstr); 
```

有人知道如何使用 .NET 实现这样一个直接的 WS-Trust 查询吗？

我不能使用 WSHttpFederation 绑定，因为我们需要使用 SAML 2.0，并且必须先从应用程序服务器检索 SAMl 2.0 身份验证请求，然后再将它们传递给 IdP。

我当然可以推出自己的客户端 WS-Trust 1.4。实施，但也许有更简单的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:33:18.953

我使用 .NET 扩展方法扩展了 WIF WS Trust 实现。在这里，您可以看到第一部分（使用 RST 和 SAML Authn 请求发出请求）作为示例，说明如何重用 WIF 中已定义的内容。我使用 IL Disassembler 来查看 WIF 内部是如何完成的，这在途中非常有帮助......

```
internal static RequestSecurityTokenResponseWithSAML2Assertion Issue(this WSTrustChannel pThis,
        string pSAML2AuthnRequest,
        Func<ProfileSelectionChallengeType, wsTrust14.ChoiceSelectedType> pProfileSelectionCallback)
    {
        if (pThis != null)
        {
            if (pThis.ChannelFactory != null &&
                pThis.ChannelFactory.Endpoint != null &&
                pThis.ChannelFactory.Endpoint.Binding != null)
            {
                // Create RST Request
                RequestSecurityToken rst = new RequestSecurityToken("http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue");
                rst.TokenType = "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0";

                // we use WS Trust 1.4 but .NET WIF only provides support for WS Trust 1.3
                // so we add the needed Challenge support and reuse most of the WIF stuff
                if (pThis.TrustVersion != System.ServiceModel.Security.TrustVersion.WSTrust13)
                {
                    throw new Exception("Given WS Trust Version not supported!");
                }

                // create a WS Trust 1.3 SOAP Message
                Message issueRequest = Message.CreateMessage(pThis.ChannelFactory.Endpoint.Binding.MessageVersion,
                    "http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue",
                    new WSTrustRequestBodyWriter(rst,
                        pThis.WSTrustRequestSerializer,
                        pThis.WSTrustSerializationContext));

                // add SAML Authn Request to the WS Trust request
                XmlDocument messageAsXml = issueRequest.serializeToXml();
                messageAsXml = SAMLSupport.addSAMLAuthenticationRequest(messageAsXml, pSAML2AuthnRequest);
                issueRequest = issueRequest.generateFromXml(messageAsXml);

                // invoke the WS Trust service on the STS
                Message responseMessage = pThis.Issue(issueRequest);

                // check what we received as answer...
                var response = pThis.parseAndHandleResponse(responseMessage, pProfileSelectionCallback);
                return response;
            }
        } 
```

# java - 为什么我在 Java 中的 UART 性能会有所不同？

> ID：10700725
> 
> 赞同：1
> 
> 时间：2012-05-22T11:01:41.943
> 
> 标签：java, performance, stream, serial-port, uart

我正在使用 PC 上的普通串行端口在 Java 应用程序中发送和接收数据。PC 运行带有 java 1.6.0 的 Windows XP SP3。这是代码：

```
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.util.concurrent.ArrayBlockingQueue;

// Open the serial port.
CommPortIdentifier portId;
SerialPort serialPort;
portId = CommPortIdentifier.getPortIdentifier("COM1");
serialPort = (SerialPort) portId.open("My serial port", 1000 /* 1 second timeout */);
serialPort.setSerialPortParams(115200, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);

// Set up input and output streams which will be used to receive and transmit data on the UART.
InputStream input;
OutputStream output;
input = serialPort.getInputStream();
output = serialPort.getOutputStream();

// Wrap the input and output streams in buffers to improve performance. 1024 is the buffer size in bytes. 
input = new BufferedInputStream(input, 1024);
output = new BufferedOutputStream(output, 1024);

// Sync connection.
// Validate connection.
// Start Send- and Receive threads (see below).
// Send a big chunk of data. 
```

为了发送数据，我设置了一个线程，该线程从队列 (ArrayBlockingQueue) 中获取数据包并将其发送到 UART。接收类似。应用程序的其他部分可以简单地将包插入发送队列，然后轮询接收队列以获取回复。

```
private class SendThread extends Thread {
  public void run() {
    try {
      SendPkt pkt = SendQueue.take();
      // Register Time1.
      output.write(pkt.data);
      output.flush();
      // Register Time2.
      // Put the data length and Time2-Time1 into an array.

      // Receive Acknowledge.
      ResponsePkt RspPkt = new ResponsePkt();
      RspPkt.data = receive(); // This function calls "input.read" and checks for errors.
      ReceiveQueue.put(RspPkt);
    } catch (IOException e) { ... }
  } 
```

每个发送数据包最多 256 字节，传输需要 256*8 位 / 115200 位/秒 = 17.7 毫秒。

我将 Time2-Time1 的测量值放在一个数组中，即发送时间，稍后再检查。事实证明，有时 256 字节的传输需要 15 毫秒才能传输，这似乎很好，因为它接近理论最小值。我不确定为什么它在实践中比理论上更快。然而，问题是有时 256 字节的传输需要 32 毫秒，即所需时间的两倍。这可能是什么原因造成的？

/亨里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:07:34.693

（Windows）PC 不是实时机器。这意味着当您的应用程序必须访问硬件层时，它可能会被延迟。您无法控制这一点，并且由于系统（内核）的工作方式，在进入函数和退出函数之间没有固定的时间量。

大多数 Linux 机器的行为方式相同。在后台运行的其他任务（应用程序）会消耗处理能力，因此您的应用程序可能会在发送实际数据之前在进程队列中移动一点。

即使在发送过程中，发送的每个字节之间也可能存在延迟。这一切都由内核/硬件层处理，您的软件无法改变它。

如果您确实需要实时执行，那么您将不得不寻找[实时操作系统](http://en.wikipedia.org/wiki/Real-time_operating_system)。

这条线很好地总结了它：

> RTOS 的一个关键特性是它在接受和完成应用程序任务所需的时间量方面的一致性水平。可变性是抖动。

对于 RTOS，此抖动是已知/已定义的，而对于普通操作系统，此抖动是未知/未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:42:58.807

你用 System.nanoTime() 测量时间吗？

System.currentTimeMillis() 使用的 Windows 时钟分辨率默认约为 15 毫秒，因此实时每个任务可能需要 20 毫秒，但有些任务分布在两个滴答声上而不是一个滴答声上。

有关更多信息，请参阅[System.currentTimeMillis 与 System.nanoTime](https://stackoverflow.com/questions/351565/system-currenttimemillis-vs-system-nanotime)。

# c# - 如何在引用的 DLL 中查找编译时间而不是执行时间的错误？

> ID：10700731
> 
> 赞同：1
> 
> 时间：2012-05-22T11:02:05.930
> 
> 标签：c#, .net, dll, project, compile-time

在解决方案 1 中，我有一个名为**MainProject**的项目，该项目引用了另一个名为**Model**的项目和一个名为**Presentation的****DLL**（程序集）。

 **此 DLL 在另一个**解决方案**中构建，此解决方案包含**Presentation**项目和**ModelPerim**（此项目与 Model Project 具有相同的程序集）项目。在演示项目中，我使用 ModelPrim。

***问题：***

在 MainProject 如果存在与模型冲突（例如ModelPrim中的**属性在模型中****不存在），则在****执行时**引发此冲突，我如何在***编译时***知道此冲突？！

希望我能说明这个问题：

![在此处输入图像描述](../Images/40ba5d993ca35e9f36bab0f5df379c9c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:34:44.110

可能有多种方法可以解决您的问题。

如果可能的话，我强烈建议您将 model 和 modelperim 设为同一个库，并在两个解决方案中引用该项目。

如果这不可能，您可以设置一个构建服务器来运行单元测试以发现不一致。可以编写测试来比较两个库。

另一种解决方案是制作一个代码生成模板，该模板将从模型生成 modelperim，反之亦然。当您进行更改生成新的“克隆”时，您将运行它（如果可能，自动运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:13:27.977

我在solution2中引用Model dll而不是ModelPrim项目，然后构建solution2，所以看到了冲突道具。**

# c# - MEF 元数据确保类实现元数据属性中所述的接口

> ID：10700736
> 
> 赞同：0
> 
> 时间：2012-05-22T11:02:43.730
> 
> 标签：c#, .net, interface, mef

嗨，我有一个检测元数据属性的 MEF 容器，我想对此进行扩展并允许类实现其他接口（在下面的示例中，我想实现一个额外的接口 IPluginSettings）。

模块 GUID 标识符很重要，因为它与我的数据库应用程序中的模块 ID 相一致，如果我在 MEF 容器中查询我导入的接口，我可以遍历它们：

```
foreach (Lazy<T,IPluginMetadata> moduleInAssembly in m_Container.GetExports<T, IPluginMetadata>();)
{
  T value = moduleInAssembly.Value; // instantiate an object of type T to test for implementations of other interfaces...
  if (value is IPluginSettings)
  {
      // this module also contains an interface for settings!
  }
  Guid moduleInAssemblyId = Guid.Parse(moduleInAssembly.Metadata.PluginID);
} 
```

我有一些疑问：

1）在上述场景中，我必须实例化该类以测试它是否实现了特定接口，是否有更好的方法使用元数据执行此操作并增强 PluginExportAttribute 以接受辅助接口类型列表？

2) 如何告诉 MEF 容器导入只有 PluginExportAttribute 的类型？

3）或者不是让每个插件接口灵活/自由地声明自己的接口，我最好让插件实现一个众所周知的插件接口，其中包含一个工厂来实例化特定的插件接口？（我要问的示例在代码的底部 - 最后一部分）

4）感谢一个提议的答案，我正在使用按照下面问题 4 snipit 构造的代码，它可以工作！出于好奇，是否有将多个单独的导出属性合并到 PluginExportAttribute 中，也许在构造函数参数中获取要注册的附加类型列表？

谢谢，

克里斯

```
public interface IPluginMetadata
{
    string PluginID { get; }
}

[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class PluginExportAttribute : ExportAttribute, IPluginMetadata
{
    public PluginExportAttribute(Type t, string guid)
        : base(t)
    {
        PluginID = guid.ToUpper();
    }

    public string PluginID { get; set; }
}

[PluginExport(typeof(IAccountsPlugin),"BE112EA1-1AA1-4B92-934A-9EA8B90D622C")]
public class BillingModule : IAccountsPlugin, IPluginSettings
{
   // my class contents
} 
```

**或者我会更好地做这样的事情......？**

```
// or would i be better of by implementing a plugin base, and getting instances of the plugin via a secondary factory?
public interface IWellKnownPluginBase
{
    Guid PluginID { get; }
    Version Version { get; }
    IPluginSettings Settings { get; }
    Type GetPluginInterfaceType { get; }
    object PluginInterfaceFactory();
}

public interface IMyPlugin
{
    void DoSomethingCool();
}

[Export(typeof(IWellKnownPluginBase))] 
public class MyPluginWrapper : IWellKnownPluginBase
{
    private readonly string ID = "BE112EA1-1AA1-4B92-934A-9EA8B90D622C";

    Guid PluginID { get { return Guid.Parse(ID); } }
    Version Version { get {return new Version(1,0,0); } }
    IPluginSettings Settings { get { return new SomethingThatImplementsIPluginSettings(); }
    Type GetPluginInterfaceType { get { return gettype(IMyPlugin); }
    object PluginInterfaceFactory() { return new MyPlugin(); }

    class MyPlugin : IMyPlugin
    {
        void DoSomethingCool() {}
    }
} 
```

**问题 4 - 可以重写 PluginExport 以在构造函数中使用接口列表注册多个接口吗？**

```
[Export(typeof(IPluginSettings))]
[PluginExport(typeof(IAccountsPlugin),"BE112EA‌​1-1AA1-4B92-934A-9EA8B90D622C")]
public MyModule class : IModule, IPluginSettings
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:23:35.950

> 在上述场景中，我必须实例化该类以测试它是否实现了特定接口，是否有更好的方法使用元数据执行此操作并增强 PluginExportAttribute 以接受辅助接口类型列表？

通常，您可以通过多个导出来做到这一点：

```
[Export(typeof(IPluginSettings))]
[Export(typeof(IModule))]
public class MyModule : IModule, IPluginSettings
{
} 
```

而不是检查接口是否存在，消费者（即进口商，或者在你的情况下是调用者`GetExports`）可以只要求正确的接口。

# php - SUSE 上的 PHP 文件上传问题

> ID：10700743
> 
> 赞同：0
> 
> 时间：2012-05-22T11:03:00.097
> 
> 标签：php, apache, file-upload, suse

我在 SLES 11 SP2 上使用 Apache/PHP 5.3 上传文件时遇到了一个奇怪的问题当我尝试上传文件时，PHP 只获取文件的原始名称 ( `$_FILES['name']`)，而不是我需要的所有其他变量。

我已经检查并仔细检查了我`php.ini`的上传最大文件、设置最大大小、启用文件上传等。

有人知道发生了什么吗？

这是我用来测试它的脚本：

```
<?php
if(isset($_FILES)) {
    var_dump($_FILES);
}
?>
<!-- The data encoding type, enctype, MUST be specified as below -->
<form enctype="multipart/form-data" action="/" method="POST">
    <!-- MAX_FILE_SIZE must precede the file input field -->
    <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
    <!-- Name of input element determines name in $_FILES array -->
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" />
</form> 
```

这就是我收到的：

```
array(1) { ["userfile"]=> array(1) { ["name"]=> string(8) "test.txt" } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:06:51.607

我遇到了 $_FILES 的问题。它没有上传任何文件。

我将 php 组件从 5.3.8-0.19.6 升级到 5.3.8-0.33.2 并工作...

[看到这个帖子](https://jira.ez.no/browse/EZP-19875)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:18:36.700

将上传的文件写入 tmp 目录可能是一个问题。`upload_tmp_dir`中说什么`phpinfo()`？

编辑：

我认为没有*价值*。`upload_tmp_dir`它可能默认为 /tmp，但我会在 php.ini 中将其显式设置为 /tmp 并检查您是否正确设置了权限。设置`error_reporting`为 On 并结合查看 Apache 日志将有助于故障排除。由于您没有服务器访问权限，您可以直接在您的 php 脚本中尝试：

```
ini_set('upload_tmp_dir', '/tmp')
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T15:53:35.440

我们在 SLES 11 SP2 中使用 PHP 上传时遇到了同样的问题。在我们的例子中，`/tmp`文件夹限制是最大的。

试试`df -h`命令看看你是否需要一些清洁。

# scala - Scala - Option.getOrElse()“类型擦除”？

> ID：10700744
> 
> 赞同：4
> 
> 时间：2012-05-22T11:03:00.863
> 
> 标签：scala, option, type-erasure

我正在尝试使用该`Option.getOrElse()`方法，但它返回 etiher`Any`或而不是参数化`ScalaObject`的正确类的实例。`Option`我找不到有关此问题的任何提及，而且似乎不应该存在。我究竟做错了什么？

```
class MyClass {

  def isOk = true

}

val myVal = Some(new MyClass) // :Option[MyClass]

val check = myVal.getOrElse(false).isOk 
```

无法调用该`isOk`方法，因为它尝试调用它`Any`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T11:09:04.323

您正在尝试在( )`isOk`的基类上`MyClass`调用方法。`Boolean``Any`

尝试这个：

```
scala> class MyClass(b: Boolean) { def isOk = b }
defined class MyClass

scala> val myVal = Some(new MyClass(true))
myVal: Some[MyClass] = Some(MyClass@35d56bbe)

scala> myVal.map{_.isOk}.getOrElse(false)
res0: Boolean = true

scala> myVal.getOrElse(new MyClass(false)).isOk
res1: Boolean = true 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T11:08:24.293

按设计工作。这个表达式：

```
myVal.getOrElse(false) 
```

返回未包装的`MyClass`实例或（如果`Option`实际上是`None`） - `false`。`MyClass`和的唯一常见类型`Boolean`是...... `Any`这就是你所看到的。

为了使其工作，您必须返回与`MyClass`from兼容的内容`getOrElse()`：

```
myVal.getOrElse(new MyClass).isOk 
```

或者，也许您想实现*空对象*模式：

```
object MyClass {
  val Empty = new MyClass
}

myVal.getOrElse(MyClass.Empty).isOk 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-22T11:10:24.247

您正在使用布尔值在 Option[MyClass] 中应用 getOrElse，因此，它们的通用超类是 Any。

你应该模式匹配：

```
val check = myVal match {
  case Some(c) => c.isOk
  case None => false
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-22T11:08:34.507

您正在`getOrElse`调用`Option[MyClass]`. 您将 a`Boolean`作为参数传递给`getOrElse`. 发生的事情是 Scala 正在将选项转换为`Option[Any]`，因为是and`Any`的最具体的常见类型。`MyClass``Boolean`

将一个`MyClass`（或一个子类`MyClass`）传递给`getOrElse`而不是`false`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T15:41:44.323

因此，当 Optional 值为 时，您有一个`Option[A]`, 和一个函数`A => B`，以及一个默认值，并且您希望以 . 结尾。（在你的情况下，是和是）。`B``None``B``A``MyClass``B``Boolean`

作为一个 Haskeller，我想做的第一件事就是胡说八道。回想一下，在 Haskell 中，`Option`称为`Maybe`. 所以我们[hoogle`Maybe a -> (a -> b) -> b -> b`](http://www.haskell.org/hoogle/?hoogle=Maybe+a+-%3E+%28a+-%3E+b%29+-%3E+b+-%3E+b)，最热门的是`maybe :: b -> (a -> b) -> Maybe a -> b`，这正是我们想要的。

```
data MyClass = MyClass { isOK :: Bool }
newMyClass = MyClass { isOK = true }

myVal = newMyClass
check = maybe False isOK myVal 
```

好吧，这很好，但是 Scala 呢？好吧，相当于 hoogle 的 Scala 是[Scalex](http://scalex.org/)。我搜索了 Scalex `Option[A] => B => (A => B) => B`，但无济于事。因此，让我们看看这个`maybe`函数是如何在 Haskell 中实现的。您可以通过 hoogle 的相应链接找到源代码。

```
maybe :: b -> (a -> b) -> Maybe a -> b
maybe n _ Nothing  = n
maybe _ f (Just x) = f x 
```

似乎很容易翻译成 Scala

```
def option[A, B](opt: Option[A])(n: B)(f: A => B) = opt match {
  case None => n
  case Some(x) => f(x)
} 
```

然后可以像这样使用它：

```
val check = option(myVal)(false)(_.isOK) 
```

如果你想用更少的柯里化或拉皮条 Option 类来做到这一点，你将不得不询问比我更精通 Scala 的人，但请注意这基本上归结为 Jhonny Everson 建议的模式匹配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-22T11:08:49.673

因为您的 getOrElse 可能返回 false，所以 MyClass 和 false 的常见类型是 Any。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-22T14:57:45.897

强尼·埃弗森是对的。模式匹配就是答案。在这种情况下，他的答案中的模式相当于`exists`

```
scala> Some(new MyClass) :: None :: Nil map(_.exists(_.isOK))
res12: List[Boolean] = List(true, false) 
```

# sql - 从没有单个 ID 的表中删除

> ID：10700749
> 
> 赞同：0
> 
> 时间：2012-05-22T11:03:47.230
> 
> 标签：sql, key, sql-delete

最近，我遇到了一个 SQL 查询的问题。问题如下：我有一个名为“旧”和“新”的 2 个表。两者具有相同的结构和列“key1”、“key2”和“description”。此外，“新”表包含“旧”条目和其他条目的子集。

现在我想从“旧”表中删除所有未出现在“新”表中的条目。问题是，“key1”和“key2”是唯一的，只有两者的组合。

* * *

示例条目：

老的：

```
key1, key2, description
1, 2, "Hello"
1, 3, "World"
2, 3, "!" 
```

新的：

```
key1, key2, description
1, 3, "World"
2, 3, "!" 
```

我尝试了下面的sql语句，但它不起作用（至少在Access97中）

```
DELETE
FROM old
WHERE old.key1<>new.key1 AND old.key2 <> new.key2 
```

有没有人知道如何从旧的条目中删除所有条目，这些条目在 key1 和 key2 的组合是唯一的约束下没有出现在“新”中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:07:13.950

```
DELETE FROM old 
WHERE  NOT EXISTS (SELECT 1 
                   FROM   new 
                   WHERE  old.key1 = new.key1 
                          AND old.key2 = new.key2) 
```

您还可以检查描述匹配

```
DELETE FROM old 
WHERE  NOT EXISTS (SELECT 1 
                   FROM   new 
                   WHERE  old.key1 = new.key1 
                          AND old.key2 = new.key2 
                          AND old.description = new.description) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:13:58.060

```
DELETE *
FROM old
WHERE old.key1 & " " & old.key2 IN (select new.key1 & " " & new.key2 from new ) 
```

# db2 - 如何在 DB2 ibm 中创建一个函数来对第 5 个月的字段 01 到 06 求和？01-07在第6个月等等......

> ID：10700753
> 
> 赞同：0
> 
> 时间：2012-05-22T11:03:55.540
> 
> 标签：db2, sum

我们有一个数据库来存储我们客户的银行账户，如下所示：

```
|client|c01|c02|c03|c04|d01|d02|d03|d04|
|a     |3€ |5€ |4€ |0€ |-2€|-1€|-4€| 0€| 
```

这是我们在第 3 个月时的数据库结构。在第 4 个月将是：

```
|client|c01|c02|c03|c04|c05|d01|d02|d03|d04|d05|
|a     |3€ |5€ |4€ |2€ |0€ |-2€|-1€|-4€|-2€| 0€| 
```

注意c05和d05。

数据库自动更新会添加这些列。由于列中的这种变化，我无法轻松获得 c01、c02、c03、c04、d01、d02、d03、d04 的总和。我正在考虑创建一个函数来检查当前月份并进行循环，以便选择和汇总这些列而不会出现错误。

如果您有更好的想法，欢迎您。但主要问题是如何制作一个能够对可变数量的列求和的函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:01:11.370

每个月添加一列让我很烦恼。我知道它可以作为选择性反规范化的有效 OLAP 策略，但在这里感觉很奇怪。通常对于这些类型的东西，整个宽度都是指定的，如果没有其他原因，只是为了避免`ALTER TABLE`声明。我对您在那里存储的内容知之甚少，无法给出建议，但我想我只是更喜欢完全标准化的结构。

做了类似的努力后，最好的选择是使用动态 sql。你可以把它放在你的存储过程中，像往常一样`PREPARE`ing 和ing 。`EXECUTE`

# android - 带有 4 个文本视图的列表视图

> ID：10700754
> 
> 赞同：1
> 
> 时间：2012-05-22T11:04:05.633
> 
> 标签：android, listview, android-listview, adapter

我必须创建一个列表视图，其中单行有 4 个文本视图。我的问题是我不明白如何使用适配器，所以有人可以帮助我使用适配器及其实现吗？

这是我的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="192dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="20dp"
    android:text="Grazie per aver parcheggiato da noi!"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ListView
    android:id="@+id/mylist"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
</ListView>

<Button
    android:id="@+id/btnEsci"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Torna a scelta" />

</LinearLayout> 
```

这是单行（single_feed）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

 <!-- TEXT OF FEED -->

 <TextView
        android:id="@+id/txtId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Numero macchina: #"
        android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
        android:id="@+id/txtTarga"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Targa: #"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txtOra"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Ora ingresso: #"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/txtCosto"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Prezzo uscita: #"
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:lines="1" 
        /> 
```

这是我的适配器：

```
public class MioAdapter extends ArrayAdapter<String> {
        private final Context context;
        private final String[] values;

        public MioAdapter(Context context, String[] values) {
            super(context, R.layout.single_feed, values);
            this.context = context;
            this.values = values;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View rowView = inflater.inflate(R.layout.single_feed, parent, false);
            TextView textView = (TextView) rowView.findViewById(R.id.label);
            textView.setText(values[position]);
            // Change the icon for Windows and iPhone

            return rowView;
        } 
```

最后这是我的活动：

```
public class checkout extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        //apro la view
        super.onCreate(savedInstanceState);
        setContentView(R.layout.checkout);

        //gestsco l'adapter per creare la lista
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                    "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                    "Linux", "OS/2" };
            MioAdapter adapter = new MioAdapter(this, values);
            setListAdapter(adapter);
}; 
```

有人可以帮助我使用适配器吗？感谢所有可以帮助我解决这个简单问题的人:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:08:32.077

[查看此自定义列表视图](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

并且行中有两个文本视图，您只需添加四个文本视图，因此添加行布局文件。并在文本视图中添加单行文本视图`android:maxLines="1"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:11:27.130

对于单行（single_feed）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" > 
```

还要保持所有文本视图的 layout_width 固定，以便它们适合单行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:13:48.827

1.  在 single_feed.xml 布局中添加 4 个 Textview。这将是您的列表项的布局
2.  在 MioAdapter 的 getview 中找到所有 textview 的 id
3.  通过将 int 作为实例变量来维护适配器中的索引。
4.  在 getView 中分配文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:34:26.323

首先，某处有问题。如果你想要一个 ListView，你需要一个元素列表（一个元素，一行）。

因此，如果您希望每行有多个 TextView，则每个元素都需要多个值。因此，例如，您将需要一个数组数组。

你也可以试试 SimpleCursorAdapter。您使用您的数据构建一个 MatrixCursor：`MatrixCursor mc = new MatrixCursor(your_column_names);`并添加元素（每行一个）：（`mc.addRow(row_values);` 其中`your_column_names`和`row_values`的类型`String[]`）

然后使用 SimpleCursorAdapter，其中`String[] from = your_column_values`和`int[] to = your_TextView_ids`（来自 single_feed.xml 的 ID）

# wcf - WCF Web 服务、实体框架和保持 SQL 会话活动（第一次启动缓慢！）

> ID：10700756
> 
> 赞同：0
> 
> 时间：2012-05-22T11:04:07.583
> 
> 标签：wcf, entity-framework, sql-server-2005, iis-7, wcf-data-services

我有一个托管在 IIS 7 上的 WCF Web 服务。该 Web 服务提供 JSON 内容以供在移动应用程序中使用。它使用 MS SQL 2005 之上的实体框架，接口契约如下所示：

```
 [ServiceContract]
    public interface MyService
    {
        [WebInvoke(Method = "GET", UriTemplate = "/GetStuff?skip={skip}&take={take}&loanAmt={loanAmt}&propertyVal={propertyVal}&Term={Term}&MonthlyRent={MonthlyRent}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        [OperationContract]
        ProductsDTO GetProducts(int skip, int take, decimal loanAmt, decimal propertyVal, int Term, decimal MonthlyRent);
    } 
```

实现如下所示：

```
 public ProductsDTO GetProducts(int skip, int take, decimal loanAmt, decimal propertyVal, int Term, decimal MonthlyRent)
    {
       //Some set up code
      using (MyEntities context = new MyEntities()) 
        {
              //Get our products
        }

     return ReturnedList
    } 
```

在第一次运行时，它可能需要长达 15 秒的时间（对于移动应用程序来说是不可接受的），在随后的运行中，数据会在一秒钟内返回。在 5 分钟不活动后，WCF 服务恢复为需要 15 秒才能启动。

我最初认为瓶颈在 IIS7 并且认为我的应用程序池正在关闭。在将应用程序池设置为永不回收并研究 IIS 服务器上的 w3wp.exe 进程后，我意识到情况并非如此。在这五分钟之后关闭的是数据库会话。

在这种情况下，我想保持 SQL 会话打开以立即提供来自 WCF 应用程序的请求，但是，我不想将实体上下文设置为单例或在服务中保持打开状态，因为我知道这是糟糕的做法。我可以将 SQL 连接对象传递给上下文（使用（MyEntities context = new MyEntities(MySQLConnection))）并保持打开状态？或者有人可以提出其他建议吗？

我看过很多帖子，其中的脚本会触及 Web 服务以使其保持活力，这让我感到毛骨悚然，因此我避免走这条路。

你怎么认为？

**更新 1**

根据 Andomars 的响应，我已将以下初始化代码添加到 WCF 服务。

```
 public Service1()
        {
            // Blocking call that initializes
            // the service instance
            this.Initialize();
        }

        BackgroundWorker KeepSQLAlive = new BackgroundWorker();

        private void Initialize()
        {
            KeepSQLAlive.DoWork += new DoWorkEventHandler(KeepSQLAlive_DoWork);

            KeepSQLAlive.RunWorkerAsync();
        }

        void KeepSQLAlive_DoWork(object sender, DoWorkEventArgs e)
        {
            Timer pingback = new Timer(180000);

            pingback.Elapsed += new ElapsedEventHandler(pingback_Elapsed);

            pingback.Start();
        }

        void pingback_Elapsed(object sender, ElapsedEventArgs e)
        {
            using (MyEntities context = new MyEntities ())
            {
                context.ExecuteStoreCommand("select @@servername");
            }
        } 
```

这感觉有点像捏造，我有点担心如果不将服务创建为单例，该服务将继续产生 SQL 会话而不会杀死任何会话。但是，如果它有效，这是阻力最小的路径，因为在 Windows 服务中托管此代码将花费更多时间，而且我不清楚如何将其与 IIS 安全性集成（我想使用 SSL）。我将报告上述是否有效。（感谢大家的帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:17:44.570

`select @@servername`您可以添加一个每分钟运行（或另一个琐碎查询）的后台线程。这应该使连接池保持温暖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:33:30.453

1.  Web 服务不应该运行后台线程，所以..
2.  使用 WCF 合同编写 Windows 服务作为 IIS 和数据库之间的代理。
3.  确保您在 Windows 服务上使用连接池。
4.  从您的 Windows 服务中每 30 秒/1 分钟/5 分钟（这一次必须进行测试）从数据库中查询一次。查询后记得关闭您的连接（这不会关闭真正的连接，但会使连接可用于池）。这将使池中至少有一个活动连接为您的请求做好准备。
5.  在 IIS 上的 WCF 服务和 Windows 服务之间使用管道 (NetNamedPipeBinding)（速度很快）。
6.  考虑在 IIS 上发布已编译的应用程序。[关联](http://msdn.microsoft.com/en-us/library/bb398860.aspx)

# java - 如何从我的 index.html 文件中调用 jsp 页面？

> ID：10700760
> 
> 赞同：0
> 
> 时间：2012-05-22T11:04:15.027
> 
> 标签：java, html, jsp, jakarta-ee

我想从我的 index.html 调用我的 jsp 页面。这是 html 代码。

```
 <html>
            <head>
                <title></title>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            </head>
            <form action="DownloadFile.jsp">
                <body>
                     <div>Click here Download File from Server...</div>
                     <input type="submit" name="downloadButton" value="Download..." />
                </body>
            </form>
    </html>

JSP PAGE:

    <%

                    String filename = "Sample1.zip"; 
                    String filepath = "e:\\temp\\"; 
                    response.setContentType("APPLICATION/OCTET-STREAM"); 
                    response.setHeader("Content-Disposition","attachment; filename=\"" + filename + "\""); 

                    java.io.FileInputStream fileInputStream = new java.io.FileInputStream(filepath + filename);

                    int i; 
                    while ((i=fileInputStream.read()) != -1) {
                    out.write(i); 
                    } 
                    fileInputStream.close();
            %> 
```

但是当我按下下载按钮时，它只是将 jsp 文件内容显示为 html.it 无论如何都不会开始下载文件。这里有什么问题...

而且我无法正确下载 .docx 和 .jpg 文件。它说文件可能已损坏...

请指导我摆脱这两个问题...

有没有一种通用的方法可以在jsp中下载所有类型的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:08:11.220

您的服务器要么不支持 JSP，要么没有针对它进行配置。

您需要一个支持 JSP 的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:09:00.933

您是否使用您的网络服务器配置了 Servlet 引擎，并完成了将 jsp 文件请求转发到服务器引擎的设置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-07T13:35:07.467

实际上，您不需要 jsp 来下载您的内容。相反，如果你想从客户端下载，你可以使用 html5

```
 <!DOCTYPE html>
<html>
<body>

<p>Click on the below hyperlink to download the any such file:<p>

<a href="5.csv" download>
test
</a> 
```

# php - 如何在 opencart 中创建自定义管理页面？

> ID：10700761
> 
> 赞同：33
> 
> 时间：2012-05-22T11:04:15.987
> 
> 标签：php, e-commerce, opencart

我想知道如何在 opencart 中制作自定义管理面板页面。

需要使用控制器登录 - 管理面板似乎没有使用与普通站点相同的控制器。我知道[如何使用 opencart 制作自定义页面](https://stackoverflow.com/questions/9490723/opencart-php-custom-page-without-using-the-information-feature)（但这不适用于管理员）

一个简单的 Hello World 示例会很棒

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-22T11:47:29.433

# OpenCart 2.x

OpenCart 2 中的路径名称已更改 - 您将要创建

`admin/controller/extension/module/hello.php admin/language/en-gb/extension/module/hello.php admin/view/template/extension/module/hello.tpl` 然后路线变成

`admin/index.php?route=extension/module/hello`

# OpenCart 1.x

*   包括完整的 MVC 流程。

我发现了如何做到这一点。OpenCart 使用 MVC 模式。我推荐阅读[如何成为 OpenCart 大师？](https://stackoverflow.com/questions/13478995/how-to-become-an-opencart-guru)发布有关了解系统如何工作的帖子 - 此管理工作流程也应该足以满足客户端的需求。

1）在其中创建一个新文件`admin/controller/custom/helloworld.php`

您的文件名和控制器名称应按 desc 顺序相同：

**helloworld.php**

```
<?

class ControllerCustomHelloWorld extends Controller{ 
    public function index(){
                // VARS
                $template="custom/hello.tpl"; // .tpl location and file
        $this->load->model('custom/hello');
        $this->template = ''.$template.'';
        $this->children = array(
            'common/header',
            'common/footer'
        );      
        $this->response->setOutput($this->render());
    }
}
?> 
```

2）在中创建一个新文件`admin/view/template/custom/hello.tpl`

**你好.tpl**

```
<?php echo $header; ?>
<div id="content">
<h1>HelloWorld</h1>
<?php
echo 'I can also run PHP too!'; 
?>
</div> 
<?php echo $footer; ?> 
```

3）在中创建一个新文件`admin/model/custom/hello.php`

```
<?php
class ModelCustomHello extends Model {
    public function HellWorld() {
        $sql = "SELECT x FROM `" . DB_PREFIX . "y`)"; 
        $implode = array();
        $query = $this->db->query($sql);
        return $query->row['total'];    
    }       
}
?> 
```

4）然后您需要启用插件以避免权限被拒绝错误：

```
Opencart > Admin > Users > User Groups > Admin > Edit 
```

选择并启用访问权限。

要访问您的页面，请访问

**www.yoursite.com/opencart/admin/index.php?route=custom/helloworld**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-26T16:59:33.083

# OpenCart 3.x

我们可以使用与 OC 1 和 2 中相同的 MVC+L 结构。这里是详细示例。Lats 称之为**Custom Page**。

* * *

使用路径创建**模型**`/admin/model/custom/page.php`

```
<?php
class ModelCustomPage extends Model {

    public function getTotalInformationsOnCustomPage() {
        $query = $this->db->query("SELECT COUNT(*) AS total FROM " . DB_PREFIX . "information");
        return $query->row['total'];
    }

} 
```

您的文件路径和模型名称应该相同。`model/custom/page.php`变成`ModelCustomPage`.

在这里你可以看到 method `public function getTotalInformationsOnCustomPage()`，它只是例如，从信息模型中获取的。选修的。

* * *

使用路径创建**控制器**`/admin/controller/custom/page.php`

```
<?php
class ControllerCustomPage extends Controller {
    public function index() {

        $this->load->language('custom/page'); // calling Custom Page language

        $this->document->setTitle($this->language->get('heading_title')); // set title from Custom Page language

        $this->load->model('custom/page'); // calling Custom Page model

        $data['information_total'] = $this->model_custom_page->getTotalInformationsOnCustomPage(); // calling model method 

        // breadcrumbs
        $data['breadcrumbs'] = array();

        $data['breadcrumbs'][] = array(
            'text' => $this->language->get('text_home'),
            'href' => $this->url->link('common/dashboard', 'user_token=' . $this->session->data['user_token'], true)
        );

        $data['breadcrumbs'][] = array(
            'text' => $this->language->get('heading_title'),
            'href' => $this->url->link('custom/page', 'user_token=' . $this->session->data['user_token'], true)
        );

        // calling header, footer and column_left for our template to render properly
        $data['header'] = $this->load->controller('common/header');
        $data['column_left'] = $this->load->controller('common/column_left');
        $data['footer'] = $this->load->controller('common/footer');

        $this->response->setOutput($this->load->view('custom/page', $data)); // send our $data array to view
    }
} 
```

这是美观的管理页面的最小设置，具有所有默认菜单和面包屑。

与模型一样，您的文件路径和控制器名称应该相同。`controller/custom/page.php`变成`ControllerCustomPage`.

* * *

使用路径创建**语言**`/admin/language/en-gb/custom/page.php`

```
<?php
// Heading
$_['heading_title']           = 'Custom Page';

// Text
$_['text_custom_block']       = 'Custom Block';
$_['text_total_informations'] = 'Total informations:'; 
```

* * *

使用路径创建**视图**`/admin/view/template/custom/page.twig`

```
{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">    
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-thumbs-up"></i> {{ text_custom_block }}</h3>
      </div>
      <div class="panel-body">{{ text_total_informations }} {{ information_total }}</div>
    </div>
  </div>
</div>
{{ footer }} 
```

在此示例中，我使用了该系统固有的标准块结构。你可以使用任何你想要的 HTML。如您所见，`{{ header }}`为标准管理员导航支持添加了 , `{{ column_left }}`。`{{ footer }}`

处理`.twig`文件不要忘记[清除树枝缓存](https://stackoverflow.com/a/61524855/3187127)以查看更改。

* * *

在所有这些操作之后，不要忘记为您的新应用程序设置权限。在管理面板中，转到**System > Users > User groups**，编辑**管理员**组（或/和您想要的任何其他组）。`custom/page`在编辑页面集上找到**访问权限**和**修改权限**块，并将其标记为选中。节省。

* * *

现在您的新应用程序可以通过 url **yoursite.com/admin/index.php?route=custom/page&user_token=XXXXXX访问**

从这一点开始，您可能希望将自定义页面添加到管理面板的左侧菜单中。您可以通过编辑核心文件或更好地通过 OCMOD 文件来完成。

创造`custom_page.ocmod.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<modification>
  <name>Custom Page OCMOD</name>
  <code>custom-page</code>
  <version>1.0</version>
  <author>Me</author>
  <link>http://mywebsite.com</link>

  <file path="admin/controller/common/column_left.php">
    <operation>
      <search><![CDATA[// Stats]]></search>
      <add position="before"><![CDATA[
      $data['menus'][] = array(
        'id'       => 'menu-custom',
        'icon'     => 'fa-thumbs-up', 
        'name'     => $this->language->get('text_custom'),
        'href'     => $this->url->link('custom/page', 'user_token=' . $this->session->data['user_token'], true)
      );
      ]]></add>
    </operation>
  </file>  

  <file path="admin/language/en-gb/common/column_left.php">
    <operation>
      <search><![CDATA[// Text]]></search>
      <add position="after"><![CDATA[
        $_['text_custom']                  = 'Custom Page';
      ]]></add>
    </operation>
  </file>  

</modification> 
```

在**Extensions > Installer中安装文件**

比去**Extensions > Extensions**并[清除 OCMOD cache](https://stackoverflow.com/a/61524855/3187127)。

在这个 OCMOD 文件中，我们只是修改了 2 个 OpenCart 核心文件，没有直接编辑它们。现在您将在左侧管理菜单的自定义页面上看到一个链接。

有关 OCMOD 的更多信息，您可以在 OpenCart [修改系统相关问题](https://stackoverflow.com/a/63360046/3187127) 和 [OpenCart OCMOD 和 VQMOD 修改系统中阅读](https://stackoverflow.com/a/63442987/3187127)

# java - Java GUI 游戏菜单

> ID：10700764
> 
> 赞同：1
> 
> 时间：2012-05-22T11:04:28.630
> 
> 标签：java, swing, user-interface, menu

我正在尝试开发一个项目——我们正在创建一个带有 GUI 的小游戏。我决定从制作“主菜单”开始。本质上，会有“单人游戏”、“帮助”等按钮……

我已经用菜单等制作了 GUI。我还添加了侦听器。

我现在该如何处理这个问题？如果有人单击“单人游戏”，我希望屏幕更改为显示“单人游戏”的标题并摆脱主菜单。我需要在我的`actionPerformed()`方法中做什么才能获得这种效果？

我想我可以从那里解决它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:07:22.687

*   最好的选项是使用[JMenuItem与](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)放置的卡片进行交互，选项的描述包括。教程中的图片

*   [关于 CardLayout 的](https://stackoverflow.com/questions/10694584/whats-so-special-about-cardlayout-vs-manual-adding-removal-of-jpanels)最佳问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:25:37.207

最好的方法是将相应的窗口放在一个单独的 Jpanel 上，并在您的 gui 中有一个主面板。每当用户单击按钮时，您都会删除主面板上的任何内容，添加相应的面板，然后重新绘制 gui。

像这样的东西：

```
 if (e.getSource() == button){           
                masterPanel.removeAll();            
                masterPanel.add(newWindow);                 
                this.setVisible(true);
                this.repaint();     
            } 
```

# javascript - 使用 jQuery 检查 HTML 页面的特定表格 ID 和元素

> ID：10700774
> 
> 赞同：1
> 
> 时间：2012-05-22T11:04:45.760
> 
> 标签：javascript, jquery, html, html-table, exists

jQuery 是否有一种方法可以确定 HTML 文档中是否存在特定的表，以及`alert();`它是否存在？

我在文档中寻找的特定表的存在是：

```
<table id="main_table" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T11:06:11.463

```
$(function() {
    // after dom ready

    if($('table#main_table').length){
      alert('exists');
    }

}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:06:12.530

在`domready`活动中检查

```
$(function() {
    if ($('#main_table').length) { ... /* element exists */ }

    /** 
     * or - without passing again through jQuery function -
     * if (document.getElementById('main_table')) { ... }
     */
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:14:17.250

```
$(document).ready(function() {
     $("#check").click(function() {
         if($('table#main_table').length){
          alert('Table Exists');
        }
    });
}); 
```

​</p>

**示例：http:** [//jsfiddle.net/ipsjolly/3nVrZ/2/](http://jsfiddle.net/ipsjolly/3nVrZ/2/)

# jqgrid - 在 jqGrid 中发布不可编辑的值？

> ID：10700780
> 
> 赞同：5
> 
> 时间：2012-05-22T11:05:17.117
> 
> 标签：jqgrid

我正在使用 jqGrid，我想将不可编辑的值发布到服务器。我正在逐行编辑（不是表格）。那可能吗？

该列是可见的，我正在使用内联编辑。使用网格的“editurl”属性发布数据。

** 解决方案 ** 我以完全不同的方式解决了它，不使用 jqGrids setCell，而是使用 document.getElementById(selr + "_Verksamhetskod").value = data 设置文本框值。

不完全是我最初的想法，但它确实有效......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-29T09:02:46.400

只需将其添加到您的单元配置中：

`editable: true, editoptions: {disabled: true}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:53:27.357

好吧，如果我理解正确，您正在尝试使单元格在具有值后变为只读，但仍采用可以正确发布到服务器的格式。

您可以使用 Jquery 在每个输入字段上放置一个只读属性

```
$("#PrimaryKey".columnName").attr("disabled", true) 
```

如果输入字段中有值或输入输入后，则触发此代码。

# asp.net-mvc-3 - 关闭原始类型的 data-val-* 属性

> ID：10700783
> 
> 赞同：3
> 
> 时间：2012-05-22T11:05:25.017
> 
> 标签：asp.net-mvc-3

有谁知道用 data-val-* 属性关闭 MVC3 自动装饰原始类型的方法。

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

删除 data-val-required 属性，但我似乎找不到关闭原始类型的方法，例如：data-val-number

我有很多隐藏的 int 字段，它们不需要在表单上进行验证，但是由于这些属性它们正在被验证，导致我的应用程序出现冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:22:58.817

我想隐藏的 int 字段`[Required]`在视图模型中定义了数据注释？如果是这样，那么我相信您只需要删除数据注释即可防止`data-val-required`显示该属性。

我可能是错的，但我怀疑你会说当在其他视图中使用该视图模型时该字段是必需的？

如果是这种情况，那么您需要正确定义视图模型，而不是关闭数据注释（本质上是一种解决方法）。理想情况下，每个视图模型都应该特定于它定义的视图（请参阅以下[链接的](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)*模式 3*）。这将避免出现某些视图需要字段而其他视图不需要字段的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:26:36.577

您可以`data-val="false"`在页面上创建的 HTML 输入中指定，例如：

```
<input type="checkbox" name="foo" value="@item.foo" class="input-validation-error"
 data-val="false"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:58:54.713

我似乎无法找到关闭此功能的方法，因此创建了自己的 HtmlHelper 作为解决此问题的方法。

```
public static IHtmlString HiddenInputFor<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression, IDictionary<string, object> htmlAttributes)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, helper.ViewData);
        var memberExpression = (MemberExpression)expression.Body;
        string fullID = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(memberExpression.Member.Name);
        var builder = new TagBuilder("input");
        builder.MergeAttribute("type", "hidden");
        var value = ModelMetadata.FromLambdaExpression(expression, helper.ViewData).Model;
        builder.MergeAttribute("value", value.ToString());
        string fullName = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(ExpressionHelper.GetExpressionText(expression));
        builder.MergeAttribute("name", fullName);
        builder.GenerateId(fullID);
        var tag = builder.ToString(TagRenderMode.SelfClosing);
        return new HtmlString(tag);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T15:54:09.243

我注意到，如果您从 ajax 请求加载部分视图，则不会自动添加部分视图内的验证 (data-val-*)。所以我终于改变了我的代码，从 ajax 加载不需要验证的*繁重表单数据。*

# vb.net - 将xml文件写入Web服务

> ID：10700795
> 
> 赞同：0
> 
> 时间：2012-05-22T11:05:57.030
> 
> 标签：vb.net

我能够将 xml 文件读入数据集。目前它以字符串格式打印。是否可以通过 web 方法调用以 xml 格式打印。我想通过 dataset.writexml 发布

```
Public Function HelloWorld() As String
    Dim dsProducts As New DataSet()
    Dim swriter As New IO.StringWriter

    dsProducts.ReadXml(AppDomain.CurrentDomain.BaseDirectory & "\Product.xml").ToString()
    dsProducts.WriteXml(swriter)

    Return swriter.ToString()
End Function 
```

XMLTextWriter 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:23:12.273

看看[Xdoc。](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument%28v=vs.95%29.aspx)您的方法可以返回 XML 文档而不是字符串。此外[，此答案](https://stackoverflow.com/questions/543319/how-to-return-xml-in-asp-net)可能会帮助您找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:12:29.443

创建一个`XMLDocument`对象并调用`LoadXML(yourXMLString)`. [http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml)

这会将字符串加载到该对象中，然后您可以从那里将 XML 保存到文件中。那是你要找的吗？

**编辑：**

该类`DataSet`有一个`GetXML()`方法，该方法返回您可以传递给您的 Web 服务的 XML 字符串。这是您的网络服务所期望的吗？XML 字符串？

[http://msdn.microsoft.com/en-us/library/system.data.dataset.getxml](http://msdn.microsoft.com/en-us/library/system.data.dataset.getxml)

# serial-port - Beagle Bone 串行通信

> ID：10700796
> 
> 赞同：2
> 
> 时间：2012-05-22T11:05:59.827
> 
> 标签：serial-port, beagleboard, uart

我正在研究 Beagle Bone Rev A5，我的 UART1 和 UART2 在以下多路复用器设置下工作正常：

```
echo 20 > /sys/kernel/debug/omap_mux/uart1_rxd
echo 0 > /sys/kernel/debug/omap_mux/uart1_txd
echo 1 > /sys/kernel/debug/omap_mux/spi0_d0
echo 21 > /sys/kernel/debug/omap_mux/spi0_sclk 
```

现在我想启用硬件流控制，为此我想使用 UART4 和 UART5。任何人都可以帮我启用`Rx`, `Tx`, `RTS`, `CTS`of `UART 4`&`5`吗？这些s的`mux`设置是什么？`UART`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:22:14.437

这个页面帮助了我一点： http: [//www.jerome-bernard.com/blog/2012/06/04/beaglebone-serial-ports-and-xbees/](http://www.jerome-bernard.com/blog/2012/06/04/beaglebone-serial-ports-and-xbees/)

你必须设置：

*   UART4 - RX /sys/kernel/debug/omap_mux/gpmc_wait0 26 模式 6 - 输入
*   UART4 - TX /sys/kernel/debug/omap_mux/gpmc_wpn 6 模式 6 - 输出
*   UART5 - RX /sys/kernel/debug/omap_mux/lcd_data9 24 模式 4 - 输入
*   UART5 - TX /sys/kernel/debug/omap_mux/lcd_data8 4 模式 4 - 输出

# ruby-on-rails - 如何在某些情况下仍然允许属性为 nil 的同时验证数字性和包含性？

> ID：10700800
> 
> 赞同：16
> 
> 时间：2012-05-22T11:06:03.950
> 
> 标签：ruby-on-rails

在 Rails 应用程序中，我在模型上有几个整数属性。

用户应该能够创建记录并将这些属性留空。

或者，如果用户为这些属性输入值，则应验证它们的数值并在一定范围内。

在模型中我有这样的东西

```
validates_presence_of :name    
validates_numericality_of :a, :only_integer => true, :message => "can only be whole number."
validates_inclusion_of :a, :in => 1..999, :message => "can only be between 1 and 999." 
```

如果我现在使用要保存的最低必需属性进行测试：

```
factory :model do
  sequence(:name) { |n| "model#{n}" }
end

it "should save with minium attributes" do
  @model = FactoryGirl.build(:model)
  @model.save.should == false
end 
```

我明白了

```
Validation failed: a can only be whole number., a can only be between 1 and 999. 
```

如何仅在为 指定值的情况下验证数字性和包含性`:a`，同时在某些情况下仍允许`:a`为 nil？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-22T11:10:54.223

您可以将一个添加`:allow_nil => true`到您的`validates_numericality_of`.

```
validates_numericality_of :a, :only_integer => true, :allow_nil => true, 
    :message => "can only be whole number." 
```

如果您只想使用一种验证，也可以使用`greater_than_or_equal_to`and选项：`less_than_or_equal_to`

```
validates_numericality_of :a, :only_integer => true, :allow_nil => true, 
    :greater_than_or_equal_to => 1,
    :less_than_or_equal_to => 999,
    :message => "can only be whole number between 1 and 999." 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T11:10:53.107

应该很简单：

```
validates_numericality_of :a, :only_integer => true, :message => "can only be whole number.", :allow_nil => true 
```

第二次验证相同

# c++ - c ++解析动态数组中的getline

> ID：10700801
> 
> 赞同：2
> 
> 时间：2012-05-22T11:06:08.007
> 
> 标签：c++, foreach, dynamic-arrays

我已经问过，如何将流中的单个单词解析为变量，并且效果很好，但我不知道用户将输入多少单词。我以为我可以把它解析成一个动态数组，但我不知道从哪里开始。我怎样才能写“每行字”？

这就是我将单词解析为变量的方式：

```
string line;
getline( cin, line );
istringstream parse( line );
string first, second, third;
parse >> first >> second >> third; 
```

谢谢！

编辑：感谢你们所有人，我想我知道了......而且它有效！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:09:34.300

您可以使用`std::vector<std::string>`或`std::list<std::string>`-- 他们自动处理调整大小。

```
istringstream parse( line ); 
vector<string> v;
string data; 
while (parse >> data) {
  v.push_back(data);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T11:11:27.940

一种可能性是使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)with [`istream_iterator`](http://en.cppreference.com/w/cpp/iterator/istream_iterator)：

```
#include <iostream>
#include <sstream>
#include <vector>
#include <iterator>
#include <algorithm>

int main()
{
    std::istringstream in(std::string("a line from file"));

    std::vector<std::string> words;
    std::copy(std::istream_iterator<std::string>(in),
              std::istream_iterator<std::string>(),
              std::back_inserter(words));

    return 0;
} 
```

将`vector`根据需要增长以存储用户提供的任何数量的单词。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T11:09:38.660

你可以这样写：

```
string line;
getline( cin, line );
istringstream parse( line );
string word;
while (parse >> word)
    // do something with word 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:24:08.117

既然您用 标记了问题`foreach`，这里有一种使用标准`for_each`算法和 C++11 lambdas 的方法：

```
#include <string>
#include <sstream>
#include <iostream>
#include <algorithm> // for for_each
#include <vector>    // vector, obviously
#include <iterator>  // istream_iterator
using namespace std;

int main()
{
    string line;
    vector<string> vec;
    getline(cin, line);

    istringstream parse(line);

    for_each(
        istream_iterator<string>(parse),
        istream_iterator<string>(),

        // third argument to for_each is a lambda function
        [](const string& str) {
             // do whatever you want with/to the string
             vec.push_back(str);  // push it to the vector
        }
    );
 } 
```

A`vector`正是您所要求的 - 一个动态可调整大小的数组，您应该几乎总是更喜欢 C 风格的数组。它的大小不需要在编译时知道。

# compiler-construction - 将函数转换为使用尾递归——正式研究

> ID：10700807
> 
> 赞同：10
> 
> 时间：2012-05-22T11:06:21.117
> 
> 标签：compiler-construction, functional-programming, tail-recursion

有没有人写过正式的论文来描述一种（自动）将函数转换为尾递归的方法？我正在寻找大学级别的正式处理，包括限制（可以转换的函数类型）、转换程序，以及，如果可能的话，正确性证明？Haskell 中的示例将是一个奖励。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T11:57:18.573

> 一种（自动）将函数转换为尾递归的方法？

所以这有两个部分：

*   认识到给定的递归函数可以转换为尾递归形式并进行转换
*   以一种有效的方式实现尾调用，因此转换是值得的。

**将递归转换为尾递归**

从语法上识别尾递归定义似乎相对简单。毕竟，“尾递归”只是意味着调用在语法上出现在表达式的尾部。

例如，计划人员描述：

> 仅仅编译适当的自调用作为跳转不足以实现完全的尾递归。相反，我们在语法上将源语言中的所有子表达式位置分为两类：尾部（或归约）位置和子问题位置。在简单表达式中（如果是后件`predicate`替代），`predicate`是子问题位置，而后件和替代都在归约位置。这种句法概念可以很容易地扩展到任意嵌套的子表达式。

*   [将高阶语言编译成完全尾递归的可移植 C](http://www.iro.umontreal.ca/~feeley/papers/FeeleyMillerRozasWilsonDIRO1078.pdf)

**将函数转换为尾调用**

您问题的棘手部分是用于识别候选递归计算并将其转换为尾递归计算的优化。

一个参考是在 GHC 中，它使用内联和一系列简化规则来折叠递归调用，直到它们的底层尾递归结构仍然存在。

*   [GHC 内联的秘密](http://www.research.microsoft.com/~simonpj/Papers/inlining/index.htm)

**尾声消除**

一旦你有你的函数在一个尾递归的形式，你希望有效率地实现它。如果你可以生成一个循环，那就是一个好的开始。如果您的目标机器没有，那么[尾调用消除](http://c2.com/cgi/wiki?TailCallOptimization)“将需要一些技巧。引用下面引用的 Odersky 和 ​​Schinz，

> 多年来已经提出了各种技术来消除一般（不仅是递归）尾调用，主要用于针对 C 的编译器。
> 
> ... 将整个程序放在一个大函数中，并在该函数内使用直接跳转或 switch 语句来模拟函数调用。
> 
> ... 一种流行的技术是使用蹦床。蹦床是重复调用内部函数的外部函数。每次内部函数希望尾调用另一个函数时，它不会直接调用它，而只是将其标识（例如作为闭包）返回给蹦床，然后蹦床自己进行调用。因此避免了无限的堆栈增长，但不可避免地会损失一些性能，主要是因为蹦床所做的所有调用都是对静态未知函数的调用。
> 
> 另一种技术是Henry Baker 的“Cheney on the MTA” 使用他的技术，程序首先必须转换为连续传递样式（CPS），因此将所有调用转换为尾调用，然后可以像往常一样编译。在运行时，当堆栈即将溢出时，当前的延续被构建并返回（或 longjmped）到调用堆栈底部的蹦床“等待”。

*   [Java 虚拟机上的尾调用消除](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.98.1934&rep=rep1&type=pdf)，Michel Schinz Martin Odersky，2001

*   Henry G. Baker, Jr. CONS 不应该反对其论点，第二部分：切尼谈 MTA 草案版本，1994 年 1 月。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T13:11:23.343

Mercury 包含一些自动使事物尾递归的优化。（[Mercury](http://www.mercury.csse.unimelb.edu.au/)是一种强制纯逻辑编程语言，因此它讨论的是谓词而不是函数，但是许多相同的想法适用于 Mercury 程序和 Haskell 程序。与逻辑而非函数相比，更大的区别在于它是严格而不是懒惰）

“累加器介绍”使用额外的累加器参数生成谓词的专用版本，以便允许在递归调用之前移动关联操作。显然，这种优化不一定会导致尾递归谓词本身，但通常会导致可以通过第二次优化优化的形式：

“Last call modulo constructors”本质上允许一个递归调用，该调用之后只有构造函数应用程序被重写，这样首先构造的值包含一个“洞”，然后递归调用将其输出直接返回到“洞”的内存地址" 而不是使用正常的返回值传递约定。然而，我相信 Haskell 会因为懒惰而免费获得这种优化。

这两种优化都在论文[使 Mercury 程序尾递归](http://www.mercury.csse.unimelb.edu.au/information/papers.html#tail_lopstr_lncs)中进行了描述。

# javascript - 在固定大小的块内显示带有圆角的任意大小的图像

> ID：10700814
> 
> 赞同：0
> 
> 时间：2012-05-22T11:06:45.493
> 
> 标签：javascript, jquery, html, css

我需要在固定大小的块内显示任意大小的图像。图像需要圆角。图像必须填满整个块；如果它大于或小于块，则必须调整其大小，如果图像的纵横比与块的不同，则必须裁剪并垂直和水平居中。

到目前为止，我已经尝试过：

*   使用 CSS 边框半径对块的角进行圆角 - 图像通过 Opera 中的圆角出现（[示例](http://jsfiddle.net/Rm7nw/)）。
*   使用 CSS 边框半径对图像的角进行圆角 - 通过裁剪去除圆角。
*   使用 CSS 边框半径以图像为背景将块四舍五入 - 图像未正确调整大小。

我更喜欢纯 CSS 解决方案，但 JavaScript/jQuery 解决方案也值得赞赏。我正在寻找至少适用于现代浏览器并在旧浏览器上优雅降级的解决方案（方角，图像不会超出块等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:36:04.200

Why don't you try **[this fiddle](http://jsfiddle.net/wfJyq/2/)** I made?

The idea is to use the `background-size: cover;` CSS property which handles the centering, cropping and, well, covering. Here's an extract from the fiddle:

```
div.yourWrapper {
    width: 50px;
    height: 50px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    background: url('some_image.jpg') no-repeat center center;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

I have no idea how this downgrades in IE and seriously, supporting Opera is just wrong due to [extremely low market adoption](http://en.wikipedia.org/wiki/Opera_%28web_browser%29#Market_adoption) (but that's my personal opinion, you can start yelling at me now).

# linux - 如何使用 emacs 访问 Windows 共享文件夹

> ID：10700817
> 
> 赞同：4
> 
> 时间：2012-05-22T11:06:54.917
> 
> 标签：linux, emacs, tramp

我在 Linux 上使用 Emacs，想知道如何从 Emacs 访问我的 Windows 共享文件夹。我可以使用 nautilus（gnome 文件管理器）执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T11:30:12.750

Windows 共享文件夹通常是可以使用 tramp 访问的 samba 共享。[您可以在](http://www.fifi.org/doc/tramp/tramp-emacs.html#External%20transfer%20methods)“smb -- smbclient”小节的 tramp 文档中找到相关部分。正确的语法应该类似于

```
/smb:USER%DOMAINNAME@HOST:/REMOTEPATH 
```

# c# - 从自定义 AppDomain 运行代码

> ID：10700825
> 
> 赞同：2
> 
> 时间：2012-05-22T11:07:24.527
> 
> 标签：c#, appdomain

我有以下插件：

IPlugin.cs：

```
namespace StandalonePlugin
{
    public interface IPlugin
    {
        string Execute(string data);
    }
} 
```

独立插件.cs：

```
namespace StandalonePlugin
{
    [Export(typeof(IPlugin))]
    public class StandalonePlugin : IPlugin
    {
        public string Execute(string data)
        {
            StringBuilder result = new StringBuilder();
            result.AppendFormat("Plugintype: {0}\r\n", this.GetType().FullName);
            result.AppendFormat("Data: {0}\r\n", data);
            result.AppendFormat("AppDomain: {0}\r\n", AppDomain.CurrentDomain.FriendlyName);
            result.AppendFormat("Current Dir: {0}\r\n", Environment.CurrentDirectory);
            result.AppendFormat("Assembly location: {0}\r\n", Assembly.GetExecutingAssembly().Location);

            return result.ToString();
        }
    }
} 
```

最后是加载插件并调用它的 Execute 方法的代码：

```
namespace CustomAppDomain
{
    class Program
    {
        static void Main(string[] args)
        {
            AppDomainSetup setup = new AppDomainSetup();
            setup.ApplicationBase = AppDomain.CurrentDomain.BaseDirectory;
            setup.PrivateBinPath = @".";

            AppDomain pluginDomain = AppDomain.CreateDomain("PluginDomain", null, setup);

            string pathToDll = @"D:\Code\LearningPlugins\StandalonePlugin\bin\Debug";
            Type t = typeof(IPlugin);
            IPlugin plugin = (IPlugin)pluginDomain.CreateInstanceFromAndUnwrap(pathToDll, t.FullName);

            Console.WriteLine(plugin.Execute("Test"));

            Console.WriteLine("<ENTER> to continue");
            Console.ReadLine();
        }
    }
} 
```

这是输出：

```
> Plugintype: StandalonePlugin.StandalonePlugin 
> Data: Test 
> AppDomain:LearningPlugins.vshost.exe 
> Current Dir: D:\Code\LearningPlugins\LearningPlugins\bin\Debug 
> Assembly location: D:\Code\LearningPlugins\LearningPlugins\bin\Debug\StandalonePlugin.dll
> 
> <ENTER> to continue 
```

现在的问题是：为什么 AppDomain 列出`LearningPlugins.exe`而不是`PluginDomain`, 中指定的`AppDomain pluginDomain = AppDomain.CreateDomain("PluginDomain", null, setup);`？

澄清一下，我不在乎添加 vshost。我想知道为什么`PluginDomain`不显示 AppDomain。即使我想为插件创建一个额外的 appdomain，似乎也使用了父 AppDomain

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:29:44.657

当您在调试模式下启动应用程序时，vshost 会添加到友好名称中。解决方法是使用正则表达式

```
string myName = Regex.Replace(AppDomain.CurrentDomain.FriendlyName, 
    @"(?<basename>.*).vshost(?<extension>\..*)", "${basename}${extension}"); 
```

[vshost](http://blogs.msdn.com/b/dtemp/archive/2004/08/17/215764.aspx)的目的
您还可以检查 AppDomain.FriendlyName[问题](http://connect.microsoft.com/VisualStudio/feedback/details/106075/system-appdomain-currentdomain-friendlyname-returns-backward-compatibility-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:39:26.760

It's because you're using `AppDomain.CurrentDomain.FriendlyName`.

As explained in msdn ( [http://msdn.microsoft.com/en-us/library/system.appdomain.friendlyname](http://msdn.microsoft.com/en-us/library/system.appdomain.friendlyname) )

> The friendly name of the default application domain is the file name of the process executable

=> LearningPlugin.exe for you

So you should make something like that

in Main :

```
Console.WriteLine(plugin.Execute("Test", pluginDomain)); 
```

in Standalone Plugin :

```
public string Execute(string data, AppDomain childDomain)
        {
            StringBuilder result = new StringBuilder();
            result.AppendFormat("Plugintype: {0}\r\n", this.GetType().FullName);
            result.AppendFormat("Data: {0}\r\n", data);
            result.AppendFormat("AppDomain: {0}\r\n", childDomain.FriendlyName);//CHANGE HERE
            result.AppendFormat("Current Dir: {0}\r\n", Environment.CurrentDirectory);
            result.AppendFormat("Assembly location: {0}\r\n", Assembly.GetExecutingAssembly().Location);

            return result.ToString();
        } 
```

# jsp - java.lang.NoSuchMethodError: org.apache.struts.config.ModuleConfig.findActionConfigId(Ljava/lang/String;)

> ID：10700829
> 
> 赞同：0
> 
> 时间：2012-05-22T11:07:44.747
> 
> 标签：jsp, struts-1, web-deployment-project

我与 maven 建立了一场战争，当通过 url 运行战争时面临这个错误：500 甚至认为该方法存在于 jar 中。在开发环境中，应用程序运行良好，但面临部署战争的问题。使用 struts-core 1.3.10 jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:05:27.657

验证生成的 war 文件是否具有正确的库文件。我遇到了同样的问题，并且在放置 jar 文件后能够解决。

# p2 - P2 build simpleconfigurator/bundles.info 包括额外的捆绑包

> ID：10700846
> 
> 赞同：1
> 
> 时间：2012-05-22T11:08:35.417
> 
> 标签：p2, pde

我在使用 p2 构建产品时遇到问题。我的产品包含单个自定义功能，其中包括我的插件以及 org.eclipse.equinox.simpleconfigurator。我不使用 org.eclipse.rcp 或任何其他 Eclipse 功能。

问题是当我使用 PDE 构建我的产品时，simpleconfigurator 只收集所需的捆绑包（我依赖于这些捆绑包）。但是当我使用 p2 director 时，simpleconfigurator/bundles.info 和生成的 plugins 文件夹包含几个额外的包，我从未将它们包含在依赖项中，例如：

```
com.ibm.icu
org.eclipse.swt
org.eclipse.ui
org.eclipse.ui.workbench
org.eclipse.core.databinding
org.eclipse.core.databinding.observable
org.eclipse.core.databinding.property 
```

我想知道这些捆绑包在 p2 构建中来自哪里，以及如何控制它们中的哪些被收集在 simpleconfigurator/bundles.info 文件中。

谢谢你。乌利亚纳

# php - php 耗时脚本 - 普通 POST 或多个 AJAX 请求？

> ID：10700851
> 
> 赞同：1
> 
> 时间：2012-05-22T11:09:10.340
> 
> 标签：php, ajax, time, consuming

我会给你一个系统的摘要。它有订单，每个订单都需要由外部 API 处理。通常一次需要处理大约 100 200 个订单，因此这将是一项耗时的任务。目前我使用带有传入订单ID的普通发布请求，并且在一定程度上增加了PHP资源。

主要问题：不知道脚本是否由于某种原因耗尽了所有资源并停止。这是非常不希望的，因为它可能在执行期间随时停止，另一件事是我不想分配太多资源，因为我知道这也是一个坏主意。

所以我想知道如果我对每个订单都使用多个 AJAX 请求，那实际上不是更好吗？由于每次都发出请求并实例化对象和内容，因此总体上肯定会花费更多时间。但我很确定分配的资源不会用完，脚本会成功完成。它还使我能够以交互方式告知用户已处理了多少订单。

欢迎有经验的用户提供任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:22:16.543

如果您运行多个 AJAX 请求，它们将并行运行，因此需要更少的时间但更多的资源。

在我看来，您应该使用 AJAX，因为正如您所说，您可以通知用户进程，最好这样做，然后让用户不知道发生了什么。

如果您在一个页面上并且在处理时它冻结了 30 秒，您将不知道脚本是否崩溃或其他什么，但如果它是 60 秒但通知您进度，您会更倾向于等待让它完成。

您还可以在添加订单时对其进行预处理，然后在订单完成后完成处理（取决于您的订单处理机制）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:23:07.360

一个能够处理 >1 个订单的 ajax 调用可能会更好，而无需知道系统的详细信息。连续的 ajax 调用也是一种（服务器）资源。

# hadoop - Giraph 最短路径示例 ClassNotFoundException

> ID：10700853
> 
> 赞同：5
> 
> 时间：2012-05-22T11:09:24.020
> 
> 标签：hadoop, classnotfoundexception, shortest-path, giraph

我正在尝试从 giraph 孵化器（[https://cwiki.apache.org/confluence/display/GIRAPH/Shortest+Paths+Example](https://cwiki.apache.org/confluence/display/GIRAPH/Shortest+Paths+Example)）运行最短路径示例。但是，我没有从 giraph-*-dependencies.jar 执行示例，而是创建了自己的作业 jar。当我按照示例中所示创建单个作业文件时，我得到了

```
java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.test.giraph.Test$SimpleShortestPathsVertexInputFormat 
```

然后我将内部类（SimpleShortestPathsVertexInputFormat 和 SimpleShortestPathsVertexOutputFormat）移动到分隔文件并重命名它们以防万一（SimpleShortestPathsVertexInputFormat_v2，SimpleShortestPathsVertexOutputFormat_v2）；这些类不再**是静态**的。这已经解决了 SimpleShortestPathsVertexInputFormat_v2 找不到类的问题，但是对于 SimpleShortestPathsVertexOutputFormat_v2，我仍然遇到相同的错误。下面是我的堆栈跟踪。

```
INFO mapred.JobClient: Running job: job_201205221101_0003
INFO mapred.JobClient:  map 0% reduce 0%
INFO mapred.JobClient: Task Id : attempt_201205221101_0003_m_000005_0, Status : FAILED
    java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.test.giraph.utils.SimpleShortestPathsVertexOutputFormat_v2
            at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:898)
            at org.apache.giraph.graph.BspUtils.getVertexOutputFormatClass(BspUtils.java:134)
            at org.apache.giraph.bsp.BspOutputFormat.getOutputCommitter(BspOutputFormat.java:56)
            at org.apache.hadoop.mapred.Task.initialize(Task.java:490)
            at org.apache.hadoop.mapred.MapTask.run(MapTask.java:352)
            at org.apache.hadoop.mapred.Child$4.run(Child.java:259)
            at java.security.AccessController.doPrivileged(Native Method)
            at javax.security.auth.Subject.doAs(Subject.java:415)
            at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
            at org.apache.hadoop.mapred.Child.main(Child.java:253)
    Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.test.giraph.utils.SimpleShortestPathsVertexOutputFormat_v2
            at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:866)
            at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:890)
            ... 9 more 
```

我检查了我的工作罐子，所有课程都在那里。此外，我在伪分布式模式下使用 hadoop 0.20.203。我开始工作的方式如下所示。

```
hadoop jar giraphJobs.jar org.test.giraph.Test -libjars /path/to/giraph-0.2-SNAPSHOT-jar-with-dependencies.jar /path/to/input /path/to/output 0 3 
```

我还为 giraph-*-dependencies.jar 定义了 HADOOP_CLASSPATH。我可以毫无问题地运行 PageRankBenchmark 示例（直接来自 giraph-*-dependencies.jar），并且短路路径示例也可以正常工作（也直接来自 giraph-*-dependencies.jar）。其他 hadoop 作业可以正常工作（我读过某处以测试我的“集群”是否正常工作）。有没有人遇到过类似的问题？任何帮助将不胜感激。

* * *

**解决方案**（很抱歉这样发布，但我在几个小时内无法回答我自己的问题）

为了解决这个问题，我必须将我的 Job jar 添加到 -libjars 中（没有对 HADOOP_CLASSPATH 进行更改）。启动作业的命令现在看起来像这样。

```
hadoop jar giraphJobs.jar org.test.giraph.Test -libjars /path/to/giraph-0.2-SNAPSHOT-jar-with-dependencies.jar,/path/to/job.jar /path/to/input /path/to/output 0 3 
```

罐子列表必须用逗号分隔。虽然这解决了我的问题。我仍然很好奇为什么我必须将我的工作 jar 作为“类路径”参数传递？有人可以解释一下这背后的理性是什么吗？因为我发现调用我的工作 jar 然后再次将它作为“类路径”jar 传递它很奇怪（至少可以说）。我真的很好奇这个解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T03:25:37.600

我找到了解决该问题的替代方案。我们需要通过以下方式修改 run() 方法 -

```
...
@Override
public int run(String[] argArray) throws Exception {
    Preconditions.checkArgument(argArray.length == 4,
        "run: Must have 4 arguments <input path> <output path> " +
        "<source vertex id> <# of workers>");

    GiraphJob job = new GiraphJob(getConf(), getClass().getName());
    // This is the addition - it will make hadoop look for other classes in the same     jar that contains this class
    job.getInternalJob().setJarByClass(getClass());
    job.setVertexClass(getClass());
    ...
} 
```

setJarByClass() 将使 hadoop 在包含 getClass() 返回的类的同一个 jar 中查找丢失的类，我们不需要将作业 jar 名称单独添加到 -libjars 选项中。

# c# - 房屋信件的正则表达式模式

> ID：10700859
> 
> 赞同：-1
> 
> 时间：2012-05-22T11:09:41.813
> 
> 标签：c#, regex

我正在寻找一个能找到一封家信的正则表达式模式。

Eks（寻找字母 d）。

```
1\. Streetname 3d, 7000 Town Country. 
2\. Streetname 3 d, 7000 Town Country. 
3\. Streetname 13d, 7000 Town Country. 
4\. Streetname 13 d, 7000 Town Country. 
```

我正在写我的 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:21:10.333

一些组合：

```
const string address = "Streetname 3d, 7000 Town Country";
string streetPart = address.Split(',')[0];
char letter = streetPart[streetPart.Length - 1];
bool isLetter = char.IsLetter(letter);
Debug.WriteLine("{0}, isLetter: {1}", letter, isLetter); 
```

可能会工作......

输出：`d, isLetter: true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:26:27.897

我认为这种模式适用于您的 4 种情况。我不测试代码，只是尝试并告诉我。

```
string sPattern = "[a-zA-Z 0-9]*([a-zA-Z]),.*";
int i = 0;
foreach (string s in address)
{
     Match m = Regex.Match(s, sPattern);
     if (m.Success){
         houseLetter[i] = m.ToString(); 
     } else {
         houseLetter[i] = "Not Found";
     }
     i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:15:12.927

如果您认为有一个正则表达式可以普遍解决此问题，请停止思考。有了你的计划，我父母的街道地址将是

```
Ioakim 3rd 4242, 7000 Town Country    // "Ioakim 3rd" is the street name 
```

如您所见，您肯定会得到一定比例的错误结果。您的四个示例是唯一需要保证正确结果的情况吗？

# cookies - cookie 存储在哪里？

> ID：10700863
> 
> 赞同：0
> 
> 时间：2012-05-22T11:09:51.417
> 
> 标签：cookies

我正在从 C# 代码发送一个 HTTPWebRequest，作为响应，我得到一个包含会话 ID 的 cookie。我无法在响应的公共/非公共成员中找到 cookie。但是 fiddler 正在捕获 cookie，它的路径是“/”。谁能告诉我我应该在哪里找这个饼干？我检查了文件夹“C:\Users\UserName\AppData\Roaming\Microsoft\Windows\Cookies”，但它不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:13:52.340

根据浏览器的不同，Cookie 可能物理存储在不同的位置。

我认为您最好`HttpWebRequest`使用 cookie。

请参阅有关将 a 添加到请求对象的[此问题](https://stackoverflow.com/questions/2972643/how-to-use-cookies-with-httpwebrequest)的答案。`CookieContainer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:14:19.657

每个浏览器都将 cookie 存储到不同的位置，例如

> Cookie 信息存储在配置文件文件夹中的两个文件中。从 Firefox 3.0 和 SeaMonkey 2.0 开始，cookie 信息存储在文件 cookies.sqlite 和 permissions.sqlite 中。在 Firefox 2 或更低版本和 Mozilla Suite/SeaMonkey 1.x 中，cookie 存储在 cookies.txt 文件中，cookie 站点权限存储在 hostperm.1 文件中。文件描述 cookies.sqlite cookies.txt 保存您的所有 cookie，包括登录信息、会话数据和首选项。permissions.sqlite hostperm.1 保存有关您允许或禁止哪些站点设置 cookie、显示图像、打开弹出窗口和启动扩展安装的首选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:15:32.397

Cookie 存储取决于您的浏览器和操作系统。在较旧的浏览器中，它们只是存储在名为“Cookies”之类的文件路径中。大多数现代浏览器以某种加密方式存储 cookie，通常在 sqllite db 平面文件中。如果您可以通过实际的本地 cookie 存储（而不是使用浏览器的内置 cookie 浏览器）提供有关您尝试追踪的内容的更多信息，这将有助于获得有关在哪里查找或替代您所拥有内容的更多信息头脑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:31:39.513

如果您想通过 HttpWebRequest 使用持久性 cookie，则需要导入**wininet.dll**来处理此问题（或者您自己处理持久性）。

[MSDN 上有一个WebRequest.Create Method](http://msdn.microsoft.com/en-us/library/bw00b1dc%28v=vs.90%29.aspx)的社区内容部分的示例。

*片段*

```
[DllImport("wininet.dll", CharSet=CharSet.Auto , SetLastError=true)] 
        private static extern bool InternetGetCookie (string url, string name, StringBuilder data, ref int dataSize);

private static string RetrieveIECookiesForUrl(string url)
{
    StringBuilder cookieHeader = new StringBuilder(new String(' ', 256), 256);
    int datasize = cookieHeader.Length;
    if (!InternetGetCookie(url, null, cookieHeader, ref datasize))
    {
        if (datasize < 0) 
            return String.Empty;
        cookieHeader = new StringBuilder(datasize); // resize with new datasize
        InternetGetCookie(url, null, cookieHeader, ref datasize);
    }
    // result is like this: "KEY=Value; KEY2=what ever"
    return cookieHeader.ToString();
} 
```

# sharepoint - 如何在完整浏览器中获取“编辑模式”页面，而不是在 sharepoint 2010 中获取 PopUp

> ID：10700865
> 
> 赞同：0
> 
> 时间：2012-05-22T11:10:04.590
> 
> 标签：sharepoint

我在 SharePoint 2010 中创建了博客站点作为默认站点。当我转到单个博客文章时，它会在右侧显示默认的“编辑”链接，您可以使用该链接编辑发布的博客内容。单击此“编辑”按钮后，我需要浏览器以全页打开而不是弹出。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:11:49.793

在您可以编辑的共享点设计器中打开您的博客站点。

母版页：v4.master 内容页：home.aspx/default.aspx 页面打开此页面。你想要的可以编辑

编辑页面后，保存共享点设计器，然后转到您的共享点站点刷新站点，显示该站点已编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:02:05.130

[这个讨论](http://social.msdn.microsoft.com/Forums/en/sharepoint2010general/thread/908def07-c28d-4ca6-b675-81f06fe48265)解决了同样的问题。检查 Ashar2k11 答案。基本上你必须在 Post.aspx 页面的 XSLListViewWebPArt 中自定义 XSLT

# amazon-dynamodb - DynamoDB 有序列表

> ID：10700870
> 
> 赞同：14
> 
> 时间：2012-05-22T11:10:37.890
> 
> 标签：amazon-dynamodb

我正在尝试将列表存储为 DynamoDB 属性，但我需要能够检索列表顺序。目前我想出的唯一解决方案是通过将键附加到值并将完整值转换为字符串然后将其存储为列表来创建自定义哈希映射。

例如。key = position1, value = value1, 要存储在 DB 中的字符串 = "position1#value1"

要使用该列表，我需要过滤、组织、子字符串并重新转换为原始类型。这似乎是一个很长的路要走，但目前这是我能想出的唯一解决方案。

有没有人有更好的解决方案或想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-10-26T11:03:36.433

新添加的文档类型中的[列表类型应该会有所帮助。](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.NamingRulesDataTypes.html#HowItWorks.DataTypes)

> # 文档数据类型
> 
> DynamoDB 支持 List 和 Map 数据类型，可以嵌套表示复杂的数据结构。
> 
> *   List 类型包含有序的值集合。
> *   Map 类型包含名称-值对的无序集合。
> 
> 列表和地图非常适合存储 JSON 文档。List 数据类型类似于 JSON 数组，Map 数据类型类似于 JSON 对象。可以存储在 List 或 Map 元素中的数据类型没有限制，并且元素不必是相同的类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T20:43:25.177

我不相信可以将有序列表存储为属性，因为 DynamoDB 仅支持单值和（无序）集合属性。但是，考虑到行的所有属性加起来必须小于 64KB，存储逗号分隔值字符串（或其他分隔符方案）的性能开销可能非常小。

（来源：[http](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/DataModel.html) ://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/DataModel.html ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:25:08.040

将范围属性添加到您的[主键](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/DataModel.html#DataModelPrimaryKey)。

> ## 范围查询的复合主键
> 
> 复合主键使您能够在表中指定两个共同形成唯一主索引的属性。表中的所有项目都必须具有这两个属性。一个用作“哈希分区属性”，另一个用作“范围属性”。例如，您可能有一个“状态更新”表，其复合主键由“用户 ID”（散列属性，用于跨多个服务器划分工作负载）和“时间”（范围属性）组成。然后，您可以运行查询以获取： 1) 由 UserID 和 Time 值的组合唯一标识的特定项目；2) 特定散列“桶”的所有项目——在本例中为用户 ID；或 3) 特定时间范围内特定用户 ID 的所有项目。仅当指定了 UserID 哈希存储桶时，才支持针对“时间”的范围查询。

# android - android中ContextMenu项目的字体

> ID：10700873
> 
> 赞同：1
> 
> 时间：2012-05-22T11:10:52.413
> 
> 标签：android, typeface, android-assets, contextmenu

如何添加/更改 ContextMenu 项的字体？请指导我。

```
@Override  
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
    super.onCreateContextMenu(menu, v, menuInfo);  
    menu.setHeaderTitle("Select");  
    menu.add(0, v.getId(), 0, "Item1");  
    menu.add(0, v.getId(), 0, "Item2");
    menu.add(0, v.getId(), 0, "Item3");  
} 
```

我想使用自定义字体 (ttf) 文件更改我的项目的字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:20:56.657

> 如何添加/更改 ContextMenu 项的字体？

我不认为有对这些东西的内置支持。尽管您可以通过实现 AlertDialog 来实现您的目标。

创建新的Android项目并复制+粘贴相关文件夹中的以下文件并运行应用程序；然后长按TextView。

**主要的.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <TextView android:id="@+id/hello" android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:text="@string/hello" />
</LinearLayout> 
```

**context_menu_item.xml**

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent"
    android:layout_height="match_parent" android:textStyle="bold">
    <!-- specify android:typeface="" -->
</TextView> 
```

**BaseActicity.java**

```
public class BaseActicity extends Activity {

    protected void registerForCustomContextMenu(View targetView, String title, final String[] items) {
        final AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(title);
        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, R.layout.context_menu_item, items);
        // You can also specify typeface at runtime by overriding the
        // getView(int position, View convertView, ViewGroup parent) method of ArrayAdapter
        // convertView = super.getView(int position, View convertView, ViewGroup parent)
        // TextView textView = (TextView) convertView;
        // textView.setTypeface(tf, style)
        DialogInterface.OnClickListener onClickListener = new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                onCustomContextMenuItemSelected(items, which);
            }
        };
        builder.setAdapter(arrayAdapter, onClickListener);
        OnLongClickListener onLongClickListener = new OnLongClickListener() {
            @Override
            public boolean onLongClick(View view) {
                builder.show();
                return true;
            }
        };
        targetView.setOnLongClickListener(onLongClickListener);
    }

    protected void onCustomContextMenuItemSelected(String[] items, int which) {
    }

} 
```

**CustomContextMenuActivity.java**

```
public class CustomContextMenuActivity extends BaseActicity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TextView hello = (TextView) findViewById(R.id.hello);
        registerForContextMenu(hello);

        final String[] items = {"Red", "Green", "Blue"};
        registerForCustomContextMenu(hello, "Pick a color", items);
    }

    @Override
    protected void onCustomContextMenuItemSelected(String[] items, int which) {
        Toast.makeText(getApplicationContext(), items[which], Toast.LENGTH_SHORT).show();
    }

} 
```

**更新**

> 你能告诉我如何在运行时指定 Typoeface 吗？

替换以下代码

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, R.layout.context_menu_item, items); 
```

通过输入以下代码

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, R.layout.context_menu_item, items) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                convertView = super.getView(position, convertView, parent);
                TextView textView = (TextView) convertView;
                Typeface typeface = Typeface.createFromAsset(getContext().getAssets(), "fonts/BENGOTHB_0.TTF");
                textView.setTypeface(typeface);
                return convertView;
            }
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T11:20:15.063

在资产中创建字体文件夹并添加您的 ttf 文件，之后您可以访问您想要的新字体

```
Typeface tf = Typeface.createFromAsset(getContext().getAssets(),
                "fonts/BENGOTHB_0.TTF");
txt.setTypeface(tf). 
```

# c# - 用一个字符替换最后一个字符

> ID：10700877
> 
> 赞同：2
> 
> 时间：2012-05-22T11:10:56.523
> 
> 标签：c#, .net, string, linq

我可以拥有这些可能的 slug 字符串

```
my-post
my-post-2
my-post-2-3
my-post-2-3-4-5-6-7-8-9

this-is-my-post
this-is-my-post-2
this-is-my-post-2-3
this-is-my-post-2-3-4-5-6-7

abc-abc-abc1
abc-abc-abc1-2    
abc-abc-abc1-2-3-4-5-6 
```

它们可以是结尾有数字或没有数字的任何东西。

例如，我想做的是：

```
this-is-my-post-2-3 
```

然后`-2-3`在末尾替换为`=2=3`. 所以它变成：

```
this-is-my-post=2=3 
```

那么有没有一种干净的方法可以在 linq 中或通过一些字符串解析或其他方法来完成？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T11:13:42.587

您可以使用正则表达式找出字符串的结尾，然后对字符进行正常替换：

```
Regex.Replace(slug, @"[\d-]+$", m => m.Value.Replace('-', '=')); 
```

快速 PowerShell 测试：

```
PS> $strings | %{ [Regex]::Replace($_, '[\d-]+$', {$args[0].value.replace('-','=')}) }
my-post
my-post=2
my-post=2=3
my-post=2=3=4=5=6=7=8=9
this-is-my-post
this-is-my-post=2
this-is-my-post=2=3
this-is-my-post=2=3=4=5=6=7
abc-abc-abc
abc-abc-abc=2
abc-abc-abc=2=3=4=5=6
this-is-my-2nd-post 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T11:22:20.333

您可以使用正则表达式来隔离末尾的数字，并替换其中的破折号：

```
Regex.Replace(s, @"(-\d+)+$", m => m.Value.Replace('-', '=')) 
```

例子：

```
this-is-my-2nd-post        ->  this-is-my-2nd-post
this-is-my-2nd-post-1      ->  this-is-my-2nd-post=1
this-is-my-2nd-post-4-5-6  ->  this-is-my-2nd-post=4=5=6 
```

# javascript - 如何检查窗口是否仍在加载并且是否已完成加载？

> ID：10700881
> 
> 赞同：0
> 
> 时间：2012-05-22T11:11:16.000
> 
> 标签：javascript, window, loading, animated

我正在创建一个功能，其中用户按下按钮（打印时间表），然后出现一个弹出窗口，其中显示他们的时间表的页面，然后自动出现打印选项。但是，当弹出窗口仍在加载时间表时，我想显示一个动画 GIF。弹出窗口中的时间表不是用 AJAX 获取的，所以我不能使用 ajax 启动和停止，那么我该怎么做呢？

```
<input type="button" value="Print Timetable" class="printButton" onclick="window.open(url, ' _parent','height=550, width=800');"/> 
```

这是时间表弹出窗口中目前正在发生的事情：

```
<div id="animated-logo" class="animated-logo">
    <a href="/" title="Print your timetable">Test</a>
</div>

<script  type="text/javascript">
        $('.animated-logo').addClass('logo');
        $('.animated-logo').removeClass('animated-logo');
    if (window.print){ self.print();}

</script> 
```

显然，那个动画 gif 不会起作用，但它是一个开始。

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:18:33.737

`load()`在[这里](http://api.jquery.com/load-event/)查看 jQuery 。

HTML

```
 <div id="" class="itm-animated-logo">
        <a href="/" title="Print your timetable">Test</a>
        <div id="time-table">...</div>
    </div> 
```

jQuery

```
$("#time-table").load(function() {
  $(this).parent().removeClass("itm-animated-logo");
} 
```

CSS

```
.itm-animated-logo {background-image: loading.gif;} 
```

因此，当加载弹出窗口（使用 class `itm-animated-logo`）时，它的背景将是`loading.gif`文件。加载时间表后 ( `#time-table`)，弹出窗口的类将被删除，背景也将随之删除。

这样做的缺点可能是时间表的某些部分将被加载（因此时间表以块的形式加载）在这种情况下，它们将位于背景图像的“顶部”。要解决此问题，您可以制作一个额外的 div。也许这个解决方案更好：

HTML

```
 <div id="" class="itm-animated-logo">
        <div id="loading"><img src="loading.gif" alt="Loading your time table" height="32" width="32" /></div>
        <a href="/" title="Print your timetable">Test</a>
        <div id="time-table">...</div>
    </div> 
```

jQuery

```
$("#time-table").load(function() {
  $(this).parent().children("#loading").fadeOut("slow");
} 
```

CSS

```
#loading {
   display: block;
   width: 32px;
   height: 32px;
   margin: 50px auto;
   padding: 0;
} 
```

# mysql - 查找具有相同货号的每组行的最低价格条目的详细信息

> ID：10700892
> 
> 赞同：2
> 
> 时间：2012-05-22T11:12:12.623
> 
> 标签：mysql, sorting, grouping, greatest-n-per-group

我读了很多关于这个，但没有一个对我有用。有人可以帮忙吗？

我有一张大桌子，上面有很多不同的文章（很多都有相同的 EAN），并且总是只需要最便宜的（按价格排序）和正确的 AN：

```
*art   price   an    ean
*Test |79,00|15770|0808736558136
*Test |85,00|k3238|0808736558136
*Test |68,00|r4850|0808736558136
*Test |65,00|a1117|0808736558136
*Test |78,00|t8619|0808736558136 
```

期待这个：

```
*Test |65,00|a1117|0808736558136 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:17:01.337

```
SELECT B.*
  FROM BigTable AS B -- Why do SQL questions omit the table names so often?
  JOIN (SELECT EAN, MIN(Price) AS Price
          FROM BigTable
         GROUP BY EAN
       ) AS P
    ON B.EAN = P.EAN AND B.Price = P.Price
 ORDER BY B.EAN; 
```

子查询查找每个 EAN 的最低价格；外部查询查找与 EAN 匹配的详细信息以及该 EAN 的最低价格。如果给定 EAN 有两条最低价格相同的记录，则两者都将被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:17:35.223

```
SELECT * FROM myTable ORDER BY price ASC LIMIT 1 
```

# jsf-2 - 我可以使用 HttpSession 对象作为托管 Bean 中的实例变量吗？获取 NotSerializableException 异常

> ID：10700903
> 
> 赞同：1
> 
> 时间：2012-05-22T11:13:26.130
> 
> 标签：jsf-2

我正在使用 HttpSession 作为实例变量，例如

```
@ManagedBean
@ViewScoped
public class CountryPages_Detail {

    private HttpSession session;

    public CountryPages_Detail() {
        session = ConnectionUtil.getCurrentSession();
    } //end of constructor

    public String preview() {
        session.setAttribute("countryDetailImageNames", imageNames);
        session.setAttribute("countryDetailImages", images);
        session.setAttribute("countrySummary", countrySummary);        
        return "countryPages_View?faces-redirect=true";

    } //end of preview()
} //end of  class CountryPages_Detail 
```

ConnectionUtl 类：

```
 public static HttpSession getCurrentSession() {
     FacesContext facesContext = FacesContext.getCurrentInstance();
     ExternalContext externalContext = facesContext.getExternalContext();
     HttpServletRequest httpServletRequest = (HttpServletRequest) externalContext.getRequest();

     HttpSession currentSession = (HttpSession) externalContext.getSession(false);

     if (currentSession != null) {         
         return currentSession;
     } else {         
         return null;
     }
} //end of getCurrentSession() 
```

我想问这是正确的方法吗？实际上我在我的 web.xml 中使用

```
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param> 
```

但是，当我将其更改为 时`<param-value>client</param-value>`，首先我得到了我的一个类不可序列化的异常，现在使其可序列化之后，我得到了异常

```
SEVERE: Error Rendering View[/index.xhtml]
java.io.NotSerializableException: org.apache.catalina.session.StandardSessionFacade
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1156)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509)
    .... 
```

使用服务器时，它运行良好。为什么？我想问一下，我们什么时候在服务器中，`param-value`然后我们在 viewScope(@ViewScoped) 中的所有托管 bean 都驻留在服务器上，当我们将它更改为客户端时，那么我们所有的 @ViewScoped 托管 bean 都驻留在客户端上？此外，如果我的 bean 不在 @ViewScoped 中，那么 javax.faces.STATE_SAVING_METHOD 元素会产生什么不同吗？意味着 STATE_SAVING_METHOD 选项仅与 @ViewScoped 相关，或者它也影响 @RequestScope 或 @SessionScopr 或其他范围？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:01:43.383

您*绝对*不应该获取外部上下文资源，例如`HttpSession`作为实例变量。只需在 threadlocal 范围内检索它。您可以使用它[`ExternalContext#sessionMap()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getSessionMap%28%29)来管理会话属性映射，而无需`javax.servlet`在您的 JSF 代码中导入（这通常表明您正在以错误或笨拙的方式做事，因此您在不使用 JSF 的情况下完全围绕 JSF 工作权力）。

```
public String preview() {
    Map<String, Object> sessionMap = FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
    sessionMap.put("countryDetailImageNames", imageNames);
    sessionMap.put("countryDetailImages", images);
    sessionMap.put("countrySummary", countrySummary);        
    return "countryPages_View?faces-redirect=true";
} 
```

然而，更好的是创建一个会话范围的托管 bean。你有一些奇怪的、相当程序化的和非面向对象的设计。

```
@ManagedBean
@SessionScoped
public class Country {

     private List<Something> detailImageNames;
     private List<Something> images;
     private Something summary;

     // ...
} 
```

你在里面使用如下`CountryPagesDetail`：

```
@ManagedProperty("#{country}")
private Country country;

public String preview() {
    country.setDetailImageNames(imageNames);
    country.setDetailImages(images);
    country.setSummary(summary);        
    return "countryPages_View?faces-redirect=true";
} 
```

它是可用的`#{country.detailImageNames}`等等。

# sqlite - QSqlDatabase 和 SQLite：SELECT 查询未按预期运行

> ID：10700911
> 
> 赞同：0
> 
> 时间：2012-05-22T11:13:49.390
> 
> 标签：sqlite, qt

我在 Qt 中使用 SQLite 时遇到问题。我创建了一个表并执行了一个简单的`SELECT`查询。

```
#include <QtSql>

int main(int argc, char* argv[]) {
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setHostName("localhost");
    db.setDatabaseName(":memory:");
    if (!db.open())
        return -1;

    QSqlQuery query(db);
    bool success = query.exec("create table person (id int primary key, "
            "firstname varchar(20), lastname varchar(20))");    // Returns true
    bool valid = query.isValid();                   // Returns false, expected true
    success = query.exec("select * from person");   // Returns true
    valid = query.isValid();                        // Returns false, expected true
    bool select = query.isSelect();                 // Returns true
    int size = query.size();                        // Returns -1, should be 0

    return 0;
} 
```

为什么这些查询即使`query.exec`返回也无效`true`？为什么`size`这里不返回 0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:48:18.123

您尚未向表中插入任何数据。的文档`isValid()`说：

> 如果查询当前位于有效记录上，则返回 true；否则返回假。

创建表或从空表中选择都不会返回任何记录，因此在这两种情况下都`isValid()`应该返回`false`。

尝试在表中插入一些数据。

Note that `size()` is not supported by all database backends. Use `db.driver()->hasFeature(QSqlDriver::QuerySize)` to check if it is supported for your database. If it isn't supported, then `size()` will return -1.

# java - 高效更新多行

> ID：10700913
> 
> 赞同：1
> 
> 时间：2012-05-22T11:13:53.130
> 
> 标签：java, mysql

如何有效地更新多行？

1.  一份声明
2.  多个语句

单个语句字符串是否会变得太大而 SQL 无法处理（超过 10000 个条目/行）？

我有一个要修改的变量，即`status`：

```
| id | status | 
```

我的数据存储在一个列表（ArrayList）中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:21:27.267

在 MySQL中使用[Load Data](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)命令可能更有效。前提是您可以将输入结构化为 CSV 格式。适当地使用 REPLACE 和/或 IGNORE 关键字。这将比对 MySQL 的 1000 条单独语句快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:33:30.600

如果您想使用 JDBC 并使其高效，您绝对应该查看这篇关于批量插入性能[的博客文章（也适用于更新）。](http://www.jroller.com/mmatthews/entry/speeding_up_batch_inserts_for)

一般来说，您需要添加`rewriteBatchedStatements=true`到您的连接字符串，例如：

```
Connection con = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/database_name?rewriteBatchedStatements=true","login", "password"); 
```

这将允许驱动程序获取准备好的语句并将它们重新编写为更有效的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:16:35.020

请参阅准备好的语句：[http ://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

在循环外创建准备好的语句，然后在循环内，只需使用更新的参数执行准备好的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:34:23.370

如果您的*状态*是一组有限的值，那么我将根据状态将列表分解为子集，然后更新每个语句的行集。即使特定状态有 10K 行，您也可以在单个调用中更新多行（使用 in 运算符）。这将减少您的应用程序需要进行更新的往返。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T12:21:17.940

您也可以尝试这样的批量更新，但我不确定它们是否有效：

```
update `id_status_table` `row`
set `status` = (
    select case `row`.`id` when 1 then 'one'
                           when 2 then 'two'
                           else 'three or more' end
); 
```

虽然 10000 行的查询字符串可能会变得太大，但您可以将此类查询应用于每 1000 行。

# sql - 语法不正确

> ID：10700914
> 
> 赞同：1
> 
> 时间：2012-05-22T11:13:53.307
> 
> 标签：sql, tsql, sql-server-2005

我有一个选择的 sql 代码，我不断收到“不正确的语法”错误。

我看不出是什么导致了这个问题。

任何人都可以向我指出显而易见的事情吗？我可能已经盯着代码太久了，现在看不到它！

我的代码是：-

```
DECLARE @CostCatID AS Int

SELECT * FROM vwREP_GP_ContractProjectPurchaseRpt
WHERE PACOSTCATID IN (@CostCatID)
AND (DOC_DATE &gt;= @DateFrom) 
AND (DOC_DATE  &lt;= @DateTo)
order by 1 
```

我得到的完整错误信息是：-

> ';' 附近的语法不正确

我知道这对大多数人来说是显而易见的，但对于我疲倦的生活来说，我无法让它发挥作用。

提前致谢。

（所有工作都在 sql Server Management Studio 2005 中完成）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T11:15:33.520

`&gt;`和`&lt;`？你为什么要编码`>`和`<`？有你的问题。尝试：

```
DECLARE @CostCatID AS Int

SELECT * FROM vwREP_GP_ContractProjectPurchaseRpt
WHERE PACOSTCATID IN (@CostCatID)
AND (DOC_DATE >= @DateFrom) 
AND (DOC_DATE <= @DateTo)
ORDER BY 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:15:42.650

不知道你为什么使用`&gt;`and `&lt;`，你需要使用`>`and`<`

```
DECLARE @CostCatID AS Int

SELECT * FROM vwREP_GP_ContractProjectPurchaseRpt
WHERE PACOSTCATID IN (@CostCatID)
AND (DOC_DATE >= @DateFrom) 
AND (DOC_DATE  <= @DateTo)
order by 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:15:51.447

您正在使用`&gt;`and `&lt;`：您是否从网页复制？

```
DECLARE @CostCatID AS Int

SELECT * FROM vwREP_GP_ContractProjectPurchaseRpt
WHERE PACOSTCATID IN (@CostCatID)
AND (DOC_DATE >= @DateFrom) 
AND (DOC_DATE <= @DateTo)
order by 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T11:16:56.537

这一次，SQL 错误消息很有帮助：

> ';' 附近的语法不正确

`&gt;=`并且您的代码中没有引用该字符串。

我认为您打算使用`>=`and`<=`代替。

# mongodb - 使用 $in 进行不区分大小写的搜索

> ID：10700921
> 
> 赞同：21
> 
> 时间：2012-05-22T11:14:29.980
> 
> 标签：mongodb, nosql

如何在 mongodb 的集合中搜索列，`$in`其中包含要搜索的元素数组以及`caseInsensitive`列中这些元素的匹配？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-10-29T15:21:21.127

使用[$in](https://docs.mongodb.org/manual/reference/operator/query/in/)匹配不区分大小写：

数据示例：

```
{ 
    name : "...Event A",
    fieldX : "aAa" 
},
{ 
  name : "...Event B",
  fieldX : "Bab" 
},
{ 
  name : "...Event C",
  fieldX : "ccC" 
},
{ 
  name : "...Event D",
  fieldX : "dDd" 
} 
```

而我们希望文档被“fieldX”包含在数组的任意值（optValues）中：

```
var optValues = ['aaa', 'bbb', 'ccc', 'ddd'];

var optRegexp = [];
optValues.forEach(function(opt){
        optRegexp.push(  new RegExp(opt, "i") );
});

db.collection.find( { fieldX: { $in: optRegexp } } ); 
```

这也适用于[$all](https://docs.mongodb.org/manual/reference/operator/query/all/#op._S_all)。

我希望这有帮助！

ps：这是我在 Web 应用程序中按标签搜索的解决方案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-22T11:19:24.483

您可以将[$elemMatch](https://docs.mongodb.com/manual/reference/operator/query/elemMatch/)与正则表达式搜索一起使用，例如让我们在以下集合中搜索“**蓝色”颜色：**

```
db.items.save({ 
  name : 'a toy', 
  colors : ['red', 'BLUE'] 
}) 
```

```
> ok 
```

```
db.items.find({
  'colors': {
    $elemMatch: { 
      $regex: 'blue', 
      $options: 'i' 
    }
  }
}) 
```

```
>[ 
  {   
    "name": "someitem",
    "_id": { "$oid": "4fbb7809cc93742e0d073aef"},   
    "colors": ["red", "BLUE"]
   }
] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-03T09:29:21.060

这对我来说非常有效。

从代码中，我们可以像这样创建自定义查询：

```
{
  "first_name":{
    "$in":[
      {"$regex":"^serina$","$options":"i"}, 
      {"$regex":"^andreW$","$options":"i"}
    ]
  }
} 
```

这将在查询后转换为 mongo 中的以下内容：

```
db.mycollection.find({"first_name":{"$in":[/^serina$/i, /^andreW$/i]}}) 
```

“$nin”也一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-24T06:07:36.620

这很简单

```
const sampleData = [
  RegExp("^" + 'girl' + "$", 'i'),
  RegExp("^" + 'boy' + "$", 'i')
];
const filerObj = { gender : {$in : sampleData}}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-31T12:01:59.663

这是我使用过的数组数据中具有多个条件（正则表达式）的**不区分大小写**`$in`的搜索（查询），但它不支持不区分大小写的搜索。

示例数据

```
{ 
  name : "...Event A",
  tags : ["tag1", "tag2", "tag3", "tag4] 
},
{ 
  name : "...Event B",
  tags : ["tag3", "tag2"]
},
{ 
  name : "...Event C",
  tags : ["tag1", "tag4"]
},
{ 
  name : "...Event D",
  tags : ["tag2", "tag4"]
} 
```

我的查询

```
db.event.find(
  { $or: //use $and or $or depends on your needs
    [ 
      { tags : { 
         $elemMatch : { $regex : '^tag1$', $options : 'i' }
        } 
      },
      { tags : { 
         $elemMatch : { $regex : '^tag3$', $options : 'i' }
        } 
      }
    ]
}) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-12T09:17:06.947

在Java中做到这一点的方法是：

```
List<String> nameList = Arrays.asList(name.split(PATTERN));
List<Pattern> regexList = new ArrayList<>();
for(String name: nameList) {
regexList.add(Pattern.compile(name , Pattern.CASE_INSENSITIVE));
}
criteria.where("Reference_Path").in(regexList); 
```

# php - 通过单击函数名称获取函数签名

> ID：10700923
> 
> 赞同：0
> 
> 时间：2012-05-22T11:14:43.830
> 
> 标签：php, function, dreamweaver

是否可以在 Adob​​e Dreamweaver CS5 中单击函数名称时打开函数签名文件。

我正在使用 DW CS5 进行 PHP 编码。

谢谢你的帮助。

# android - 为什么 JSoup 解析错误的 HTML 代码？

> ID：10700924
> 
> 赞同：0
> 
> 时间：2012-05-22T11:14:46.303
> 
> 标签：android, jsoup, html-parser

我正在尝试解析网页，但是当我想在页面中获取一段文本时。当我调用 Jsoup.parse() 和 Jsoup.connect().get() 方法时，Jsoup 给我一个错误的文档。

这是网页和我的代码的一部分。doc var 有一个错误的 DOM。

```
 Document doc1 = Jsoup.parse("<p class=\"texto\"><p>El concurso fotogr&aacute;fico internacional <em>Earth and Sky Photo Contest</em> ya tiene <a href=\"http://www.twanight.org/newTWAN/index.asp\" target=\"_blank\">ganadores</a> en su tercera edici&oacute;n. Bajo el tema &ldquo;La Importancia del cielo oscuro&rdquo;, las fotos galardonadas este a&ntilde;o son aquellas que mejor transmiten la belleza de un cielo estrellado y el problema de la contaminaci&oacute;n lum&iacute;nica. Como recuerdan los organizadores, hoy d&iacute;a el exceso de luz artificial en las ciudades hace que las estrellas desaparezcan del cielo urbano. Esta foto del cometa Lovejoy sobre Australia, de Jia Hao, se hizo con el primer premio en la categor&iacute;a \"Belleza del Cielo Nocturno\".</p></p>");

 String summary = doc1.select("p.texto p").text(); 
```

doc1 变量结果为：

```
 <html>
  <head></head>
  <body>
   <p class="texto"></p>
   <p>El concurso fotogr&aacute;fico internacional <em>Earth and Sky Photo Contest</em> ya tiene <a href="http://www.twanight.org/newTWAN/index.asp" target="_blank">ganadores</a> en su tercera edici&oacute;n. Bajo el tema “La Importancia del cielo oscuro”, las fotos galardonadas este a&ntilde;o son aquellas que mejor transmiten la belleza de un cielo estrellado y el problema de la contaminaci&oacute;n lum&iacute;nica. Como recuerdan los organizadores, hoy d&iacute;a el exceso de luz artificial en las ciudades hace que las estrellas desaparezcan del cielo urbano. Esta foto del cometa Lovejoy sobre Australia, de Jia Hao, se hizo con el primer premio en la categor&iacute;a &quot;Belleza del Cielo Nocturno&quot;.</p>
   <p></p>
  </body>
 </html> 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:43:05.417

如果您指的是 <html> 和 <body> 标记，那只是 Jsoup 将您的片段包装在适当文档的外壳中。

但是，您的起始 XML：

```
<p class="texto">
    <p>
        El concurso fotogr&aacute;fico internacional <em>Earth and Sky Photo Contest</em> ya tiene <a href="http://www.twanight.org/newTWAN/index.asp" target="_blank">ganadores</a> en su tercera edici&oacute;n. Bajo el tema &ldquo;La Importancia del cielo oscuro&rdquo;, las fotos galardonadas este a&ntilde;o son aquellas que mejor transmiten la belleza de un cielo estrellado y el problema de la contaminaci&oacute;n lum&iacute;nica. Como recuerdan los organizadores, hoy d&iacute;a el exceso de luz artificial en las ciudades hace que las estrellas desaparezcan del cielo urbano. Esta foto del cometa Lovejoy sobre Australia, de Jia Hao, se hizo con el primer premio en la categor&iacute;a "Belleza del Cielo Nocturno".  
    </p>
</p> 
```

包含**嵌套**的 <p> 元素 - 这*不是*有效的 HTML，JSoup 会为您修复它。[这里](https://stackoverflow.com/a/4291608/967142)详细解释了嵌套段落- 简而言之 - 它们是自动关闭的，导致您的 DOM 与您的预期不同。

Consider converting the outer <p> into a <span> and you should be fine.

# c# - 鼠标悬停时更改通知图标

> ID：10700931
> 
> 赞同：0
> 
> 时间：2012-05-22T11:15:15.940
> 
> 标签：c#, winforms

我想使用 c# 更改鼠标悬停时的通知图标文本，例如

```
 NotifyIcon notifyicon;
  notifyicon.Icon = (Icon)resManager.GetObject("test");
            notifyicon.Visible = true;
    if(a==b)
    {
     notifyicon.Text = "Both are equal";
    }
    else
    {
     notifyicon.Text = "Not equal";
    } 
```

是否可以？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:57:44.157

请参阅MSDN 上[ToolTip 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)的文档。“示例”部分应包含您需要的信息。

# objective-c - 如何为 removeFromSuperview 设置动画

> ID：10700933
> 
> 赞同：14
> 
> 时间：2012-05-22T11:15:19.907
> 
> 标签：objective-c, ios, uiviewanimation, catransition

我使用以下方法对子视图的外观进行了动画处理：

```
CATransition *transition = [CATransition animation];
transition.duration = 0.3;
transition.type = kCATransitionReveal;
[webView.layer addAnimation:transition forKey:nil];

[self.view addSubview:webView]; 
```

但现在我想删除我的子视图。如何添加动画来做到这一点？和其他 CATransition 一样吗？什么时候添加这个？在 addSubview 之前还是之后？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-22T11:22:32.190

那么你可以先做动画然后在`animationEndListener`通话中`removeFromSuperView`

```
[UIView animateWithDuration:0.5
    delay:1.0
    options: UIViewAnimationOptionCurveEaseOut
    animations:^{
        yourView.alpha = 0;
    }completion:^(BOOL finished){
        [yourView removeFromSuperview];
    }]; 
```

# javascript - 页面加载后如何从 url 中删除查询字符串？

> ID：10700937
> 
> 赞同：37
> 
> 时间：2012-05-22T11:15:37.077
> 
> 标签：javascript, html, url, query-string

我有一个附有长查询字符串的 URL。页面加载后，我不需要查询字符串。所以我想在不重新加载页面的情况下从地址栏中删除查询字符串。

我试过`parent.location.hash = '';`了`window.location.href = '/#'`

他们没有改变。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-01-21T22:04:19.993

正如其他人所说，您可以在现代浏览器（IE10+、FF4+、Chrome5+）中使用[History API来做到这一点。](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)答案中没有完整的示例，所以我想分享我的解决方案，因为我只是需要做同样的事情：

```
history.pushState(null, "", location.href.split("?")[0]); 
```

如果您使用的是[Modernizr](http://modernizr.com/)，您还可以检查 History API 是否可用，如下所示：

```
if (Modernizr.history) {
    history.pushState(null, "", location.href.split("?")[0]);
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-22T11:19:28.187

这在使用[history api的](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)[现代浏览器](http://caniuse.com/#search=history)中是可以实现的，但可能不是解决您的问题的最佳方法。

```
history.replaceState({}, 'some title', '/'); 
```

听起来您最好处理数据然后重定向到主页，而不是直接返回 HTML 文档。

由于您不想保留 URL，因此它对书签没有用处，因此您很可能最好发出 POST 请求。

这表明您应该使用[POST-Redirect-GET 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-22T11:17:38.780

如果不重新加载页面，您将无法做到这一点，想象一下您是否可以在浏览器地址栏中放置您想要的任何内容？安全乐趣:)

**尽管您现在可以使用新的**[history API](http://diveintohtml5.info/history.html)在 HTML5 中执行此操作（仅适用于支持它的浏览器），但实际上，您的场景最好需要重写而不是包含它（似乎大锤要破解坚果）。

正如您所说，页面加载后您不需要查询字符串，您应该*真正*回发，然后在完成处理后重定向到另一个 URL。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-06-30T04:49:00.690

window.history.replaceState(null, null, window.location.pathname);

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-22T11:19:47.183

采用`history.replaceState({}, "Title", "page.html");`

相同的语法`pushState`。但是，您必须找到一种方法让 IE 理解这一点。

更好的方法是使用 Apache`mod_rewrite`模块。它很容易使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-10T13:10:17.620

我在我的个人项目中使用此代码片段，我需要在不重新加载的情况下删除 URL 参数：

```
var newURL = location.href.split("?")[0];
window.history.pushState('object', document.title, newURL); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-24T18:08:13.157

我想再添加一种方法来做到这一点，尤其是对于那些正在使用`$routeProvider`.

正如在其他一些答案中提到的那样，您可以使用：

```
var yourCurrentUrl = window.location.href.split('?')[0]; 
window.history.replaceState({}, '', yourCurrentUrl ); 
```

或通过在历史堆栈中创建新记录：

```
window.history.pushState({}, '', yourCurrentUrl ); 
```

有关使用 and 的详细说明`history.pushState`，`history.replaceState`您可以阅读[SO 上的这篇文章](https://stackoverflow.com/a/22753103/2166856)。

**但是，如果您在应用程序中使用 Angular** `$routeProvider`，那么如果与任何现有模式匹配，它仍会捕获此更改。为避免这种情况，请确保您`$routeProvider`已将[reloadOnSearch](https://docs.angularjs.org/api/ngRoute/provider/$routeProvider)标志设置为，`false`因为默认情况下它是`true`.

例如：

```
$routeProvider.when("/path/to/my/route",{
   controller: 'MyController',
   templateUrl: '/path/to/template.html',
   //Secret Sauce
   reloadOnSearch: false//Make sure this is explicitly set to false
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-22T11:47:41.957

**更新代码现在它可以工作了**

只需在您要更改其链接的页面中添加以下代码。

```
// javascript function

   function buildLin(first) {
    var firs = first.toString()
       //alert(firs);
       //document.getElementById("team").value = "1";
           document.location.hash = "#" + firs.replace(/ /g, "_");
        //alert(document.location.hash);
    }

 //jQuery to call above function after page loads

  $(document).ready(function () {
      buildLin(2);
  }); 
```

不要忘记在你的页面上添加 [http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js) ​</p>

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-05-22T11:20:24.240

`POST`您可以通过使用而不是完全避免查询字符串`GET`。

# ruby-on-rails - bundle exec rake db:populate >> rake aborted - 验证失败

> ID：10700941
> 
> 赞同：1
> 
> 时间：2012-05-22T11:15:46.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, rake, ruby-on-rails-3.2

我目前正在浏览 RoR 指南，但我被困在...

“向样本数据添加关注/关注者关系。”

这是假设可以工作的代码：`sample_app/lib/task/sample_data.rake`

```
namespace :db do
desc "Fill database with sample data"
task populate: :environment do
    make_users
    make_microposts
    make_relationships
  end
end

def make_users
 admin = User.create!(name:     "Example User2",
                     email:    "example2@railstutorial.org",
                     password: "foobar",
                     password_confirmation: "foobar")
admin.toggle!(:admin)
99.times do |n|
 name  = Faker::Name.name
 email = "example-#{n+1}@railstutorial.org"
 password  = "password"
 User.create!(name:     name,
              email:    email,
              password: password,
              password_confirmation: password)
  end
end

def make_microposts
  users = User.all(limit: 6)
  50.times do
    content = Faker::Lorem.sentence(5)
    users.each { |user| user.microposts.create!(content: content) }
  end
end

def make_relationships
  users = User.all
  user  = users.first
  followed_users = users[2..50]
  followers      = users[3..40]
  followed_users.each { |followed| user.follow!(followed) }
  followers.each      { |follower| follower.follow!(user) }
end 
```

当我`rake db:reset`重置数据库时没有问题。

当我这样做时`rake db:populate`发生错误说明：

```
 rake aborted!
 Validation failed: Follower can't be blank` 
```

所以我检查了我的数据库，除了“关系”表之外，所有表都被填充了。有什么想法或建议吗？我很确定代码有问题，`def making_relationships`确切地说。希望有人对此有解决方案..

-马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:29:24.737

由于您调用的是和( ) 之`.create!`类的模型，因此它是其中之一抛出提到的错误。`User``Micropost``user.microposts`

请发布这些模型的代码，以便我们更具体地回答。

不过，您仍然可以自己调试问题。只需点击`rails c`项目根目录，然后尝试创建具有与您在 rake 任务中尝试的相同属性的实例：

```
$ rails c

$ user = User.create!(name:     name,
                      email:    email,
                      password: password,
                      password_confirmation: password)

$ micropost = user.microposts.create!(content: "Hello, cruel world!")

# by this step you should already see some errors raised; if that's not sufficient,
# call the following methods to figure out what model suffers the validation error
user.errors.full_messages
micropost.errors.full_messages 
```

无论如何，这是不满足的验证。仔细检查您是否传递了在使用 shebang 创建模型时传递的所有必需属性`create!`。具体检查哪个模型需要存在`Follower`（无论是什么）。

# c++ - muParser 和 VC6

> ID：10700942
> 
> 赞同：0
> 
> 时间：2012-05-22T11:15:50.823
> 
> 标签：c++, mfc, visual-c++-6, equations

您好我正在尝试将 muParser 与用 VC++6 编写的遗留 MFC 应用程序一起使用，将代码迁移到更高版本不是一种选择。

有没有人在这种环境中使用 muParser 取得任何成功。任何示例源代码都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:45:36.587

将代码迁移到更高版本确实需要*成为*一种选择。按照今天的标准， VC 6 已经过时*了*，而且支持正在迅速减弱。编译器充满了错误，现在肯定没有得到修复。多年来，它一直是库维护者的祸根，终于到了他们可以完全放弃对它的支持的时间点。就像 IE 6 的消亡一样，人们欢欣鼓舞。让 muParser 在 VC 6 中工作的可能性不大。向前迁移代码的运气会好得多，而且您将有*更多*的努力可以展示。

如果这真的不可能，您总是可以在现代版本的 Visual Studio 中将 muParser 库编译为 DLL，然后从您的 VC 6 应用程序中调用它。

但该策略涉及其自身独特的痛苦品牌，当您可以将原始 MFC 应用程序移植到现代版本的 Visual Studio 时，似乎没有什么理由挣扎。即使是当前版本的 VS，MFC 库仍然很好地支持；您不会永远停留在 VC 6 中。

# c# - c#：如何在 c# 中创建一个类扩展 ByteArray

> ID：10700944
> 
> 赞同：-1
> 
> 时间：2012-05-22T11:15:52.227
> 
> 标签：c#

我正在做从 JAVA 到 c# 的转换

在我的java中我有这个类

```
public class Axe extends ByteArray {

} 
```

按理我认为应该是这样，

```
public class Axe : ByteArray {

} 
```

但问题出在 c# 中，它没有 ByteArray 供我扩展

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:36:06.013

[ByteArray](http://www.java2s.com/Tutorial/Java/0140__Collections/ByteArraywrapsjavabytearraysbytetoallowbytearraystobeusedaskeysinhashtables.htm) is a wrapper Class in java which wrappes byte[]( a array of bytes) and provides methods to maipulate. if required you could write your own wrapper class in C#,

Link provides Sample Wrapper Class for [ByteArray](http://www.java2s.com/Tutorial/Java/0140__Collections/ByteArraywrapsjavabytearraysbytetoallowbytearraystobeusedaskeysinhashtables.htm) in java.

hopes that helps

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:21:39.060

也许您应该为以下内容编写一些扩展方法`byte[]`：

```
static class ByteExtensions
{
    public static string DoSomething(this byte[] x)
    {
        return "Length of this byte array: " + x.Length;
    }
}

// ...

void Foo()
{
    var b = new byte[5];
    b.DoSomething();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:18:13.677

你不能扩展字节数组，但如果你想像数组一样使用你的类，你可以提供索引器：

```
public class Axe {

    private byte[] data = new byte[whateverLength];

    public byte this[int index] {
        get { return data[index]; }
        set { data[index] = value; }
    }

} 
```

然后你可以做这样的事情：

```
Axe myAxe = new Axe();
myAxe[someIndex] = 5; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:18:29.117

你在寻找一个：字节[]？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:19:43.040

如果您绝对想实现自己的字节类型集合，请实现[IList](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)之类的接口之一：

```
public class Axe : IList<Byte> 
```

或者如果您只需要位而不是字节，请考虑使用[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)

# android - 获取自定义列表视图的子项

> ID：10700946
> 
> 赞同：2
> 
> 时间：2012-05-22T11:16:12.447
> 
> 标签：android

我为我的应用程序创建了一个自定义列表视图项。假设对于任何点击事件，我需要列表视图中的特定孩子，我怎么能得到它？

任何链接或任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:23:58.267

假设您有一个自定义列表视图（例如 lv）。然后实现一个 onItemClickListener 如下 -

```
lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View view, int position,
                long id) {
            // Let's suppose the custom list View has one textview
            TextView tv = (TextView) lv.getChildAt(position);
        }
    }); 
```

这里的位置可以帮助您识别用户点击过的项目。对于您想要使用的每个项目，您都可以以类似的方式获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:19:01.713

您可以从支持适配器获取子数据项。

只需使用`ListView.getAdapter`然后`ArrayAdapter.getItem`从你的位置输入`OnItemClickListener`（假设你已经设置了这个）。

如果您对数据项进行更改，请记住调用`notifyDatasetChanged`适配器以显示更改。尽量不要直接操作视图，因为这会导致视图回收问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:26:24.853

```
LIstView hv10;

hv10.setAdapter(new ListAdapter(getApplicationContext(), R.id.hv10, bigList.get(i)));

RelativLayout rlv;

rlv.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        text.setText("on click");
    }

} 
```

# c# - 使用 Entity Framework 4.3 为模型设置默认值

> ID：10700949
> 
> 赞同：1
> 
> 时间：2012-05-22T11:16:17.683
> 
> 标签：c#, entity-framework

我已将实体框架添加到具有现有表的现有项目中。这些表包含几个为 NULL 的 uniqueidentifier 列。当我从这些加载数据时，我的模型属性也是 null 而不是 Guid.Empty。我尝试使用构造函数和

```
AlterColumn("tblItems", "ThreadRoot", c => c.Guid(nullable: true, defaultValue: Guid.Empty)); 
```

但它仍然返回null。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:51:01.603

在您的模型中，只需将默认值添加到属性：

```
public class Item {
    public Guid ThreadRoot { get; set; }

    public Item() {
        ThreadRoot = Guid.Empty; //default value
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:56:23.437

> 当我从这些加载数据时，我的模型属性也是 null 而不是 Guid.Empty

那是因为已经存在的数据将包含`null`，因为它们是在您发出`AlterColumn`方法之前存储的。默认值将在插入新记录时写入，而相应的列未设置。

# javascript - 使用正则表达式重新格式化包含英国邮政编码的字符串

> ID：10700950
> 
> 赞同：6
> 
> 时间：2012-05-22T11:16:23.663
> 
> 标签：javascript, regex

如何使用 Javascript 格式化字符串以匹配正则表达式？

我使用的英国邮政编码可以匹配以下任何一个

```
N1 3LD
EC1A 3AD
GU34 8RR 
```

我有以下正则表达式可以正确验证字符串，但我不确定如何使用正则表达式作为掩码来格式化`EC1A3AD`to `EC1A 3AD`/ `GU348RR`to `GU34 8RR`/ `N13LD`to `N1 3LD`。

我的正则表达式是`/^[A-Za-z]{1,2}[0-9A-Za-z]{1,2}[ ]?[0-9]{0,1}[A-Za-z]{2}$/`

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T11:59:20.477

如果您使用正则表达式`/^([A-Z]{1,2}\d{1,2}[A-Z]?)\s*(\d[A-Z]{2})$/`，您可以提取邮政编码的两个部分并用中间空格重新组合它们。

```
var list = ['N13LD', 'EC1A3AD', 'GU348RR'];

for (var i = 0; i < list.length; i++) {
  var parts = list[i].match(/^([A-Z]{1,2}\d{1,2}[A-Z]?)\s*(\d[A-Z]{2})$/);
  parts.shift();
  alert(parts.join(' '));
} 
```

**输出**

```
N1 3LD
EC1A 3AD
GU34 8RR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:22:24.217

在由可选空格分隔的位周围放置大括号：

```
/^([A-Za-z]{1,2}[0-9A-Za-z]{1,2})[ ]?([0-9]{0,1}[A-Za-z]{2})$/ 
```

但是我认为正则表达式是错误的......上面的正则表达式将“N13LD”拆分为“N13”，“LD”。

我怀疑错误的部分是`{0,1}`两个尾随字母之前 - AFAIK 必须正好是一个数字：

```
var re = /^([A-Z]{1,2}[\dA-Z]{1,2})[ ]?(\d[A-Z]{2})$/i; // case insensitive 
```

分组允许`string.match(regexp)`函数返回一个结果，其中包括每个匹配组的条目：

```
> "N13LD".match(re);
["N13LD", "N1", "3LD"]

> "GU348RR".match(re);
["GU348RR", "GU34", "8RR"]

> "EC1A3AD".match(re);
["EC1A3AD", "EC1A", "3AD"] 
```

要获得结果，只需使用简单的字符串连接将每个结果中的第二个和第三个元素连接在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-05T19:57:49.810

我使用上面@borodin 的出色答案创建了一个英国邮政编码即用型格式化程序。请注意，这不会验证邮政编码，只是在用户键入时根据 borodin 的正则表达式对其进行格式化。

```
var txtPc = $("#postcode");
var outputCount = 0;
var jigCount = 0;
var postcodePauseTime = 500;

txtPc.on("keydown", function(e) {
  var keyCode = e.which;

  var key = String.fromCharCode(keyCode);
  var isAlphaNumeric = //key.match(/^[a-z0-9]+$/i);
    (
      (keyCode >= 65 && keyCode <= 90) ||
      (keyCode >= 48 && keyCode <= 57) ||
      ([189, 190, 8, 46, 9].indexOf(keyCode) > -1) ||
      (keyCode >= 35 && keyCode <= 40)
    );

  return !!isAlphaNumeric;
});
// handle click and add class
txtPc.on("keyup", function(e) {
  PostcodeCalculateFormat(txtPc);
});

txtPc.on("blur", function() {
  PostcodeCalculateFormat(txtPc);
});

function PostcodeCalculateFormat(txtPc) {
  (function(index, txtPc) {
    setTimeout(function() {
      //prevent interferance from other keypresses by returning out of this closure
      if (index != jigCount) return;
      var isFocused = ($('#' + txtPc.attr('id') + ':focus')[0] == document.activeElement);
      var postcodeText = txtPc.val().toUpperCase(); /// + key;
      var origSpacePos = postcodeText.indexOf(" ");
      postcodeText = postcodeText.replace(/[\W_]+/g, "");
      var parts = postcodeText.match(/^([A-Z]{1,2}\d{1,2}[A-Z]?)\s*(\d[A-Z]{2})$/i);
      //if unable to match the lot, try the first part only with less strict reg
      if (!parts)
        parts = postcodeText.match(/^([A-Z]{1,2}\d{1,2}[A-Z]?)\s*(.*)$/i);
      if (parts) {
        var caretPos = 0;
        if (isFocused)
          caretPos = getCaretPosition(txtPc[0]).start;
        parts.shift();
        var newVal = parts.join(' ');
        if (newVal == txtPc.val())
          return;
        output(newVal);
        txtPc.val(newVal);
        var spacePos = newVal.indexOf(" ");
        if (isFocused) {
          if (caretPos >= spacePos && origSpacePos == -1)
            caretPos++;

          setCaretPosition(txtPc[0], caretPos, caretPos);
        }
      }
    }, postcodePauseTime);
  }(++jigCount, txtPc));
}

function output(str) {
  $("#listOutput").prepend("<li>[" + (++outputCount) + "] " + str + "</li>");
}

function getCaretPosition(ctrl) {
  // IE < 9 Support
  if (document.selection) {
    ctrl.focus();
    var range = document.selection.createRange();
    var rangelen = range.text.length;
    range.moveStart('character', -ctrl.value.length);
    var start = range.text.length - rangelen;
    return {
      'start': start,
      'end': start + rangelen
    };
  }
  // IE >=9 and other browsers
  else if (ctrl.selectionStart || ctrl.selectionStart == '0') {
    return {
      'start': ctrl.selectionStart,
      'end': ctrl.selectionEnd
    };
  } else {
    return {
      'start': 0,
      'end': 0
    };
  }
}

function setCaretPosition(ctrl, start, end) {
  // IE >= 9 and other browsers
  if (ctrl.setSelectionRange) {
    ctrl.focus();
    ctrl.setSelectionRange(start, end);
  }
  // IE < 9
  else if (ctrl.createTextRange) {
    var range = ctrl.createTextRange();
    range.collapse(true);
    range.moveEnd('character', end);
    range.moveStart('character', start);
    range.select();
  }
}
```

```
body {
  background: silver;
  padding: 20px;
  font-family: Helvetica;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

<div>Sample postcodes to type: 'BT92PE', 'EC1A3AD', 'GU348RR', 'N13LD'</div>

<div>
  Postcode: <input id="postcode" style="text-transform: uppercase; " />
</div>

<!-- for troubleshooting -->
<ul id="listOutput"></ul>
```

插入符号获取和设置函数直接取自堆栈溢出答案，我现在找不到给用户信用。如果可以的话，我会查看并更新链接。

这可以满足我的所有需求，但这不是一个非常优雅的解决方案。我很高兴有人在这方面进行改造、增强或改进。我想看看结果。

未来的改进：如果插入符号在空格之后，退格键应该一键删除空格和它之前的字母数字字符。（如果插入符号位于空格之前，则删除按钮的想法相同。）

# iphone - iPhone TextView 中带下划线的文本

> ID：10700951
> 
> 赞同：3
> 
> 时间：2012-05-22T11:16:24.347
> 
> 标签：iphone, objective-c, ios5, sqlite, xcode4.2

我的 RTF 文件中有以下文本..

“印度角核电站遭到袭击的可能性已导致当地政府官员计划评估路线，建造避难所并为公民提供钾丸，以便在发生泄漏时减少人员伤亡。”

在该文本中，“规划评估路线，建造庇护所，并为公民提供钾丸”是带下划线的文本。当我将此文本复制到 sqlite 数据库并使用 TextView 在模拟器上显示时，我没有得到下划线...如何在 iPhone 中获取它..？我想从哪种格式（word、pdf ..）的文档中复制以获得确切的文本...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:12:15.553

TextView 不支持下划线文本，因为它具有单一字体行为并且不支持 multiFont 和文本属性。您可以在 RTF 文件的文本视图中使用 Web 视图。试试这个链接，它有很多 HTML，很容易理解。 [http://kiefermat.com/2011/09/30/using-uiwebview-for-displaying-rich-text/](http://kiefermat.com/2011/09/30/using-uiwebview-for-displaying-rich-text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:06:07.550

UITextView 不支持任何文本属性。您可以使用带有一些 html 的 UIWebview 来做到这一点（简单的方法）或使用 Coretext 和 NSAttributedString 编写自己的文本字段。这个网站有很多关于后者的信息：[http ://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)

# rhomobile - Rhomobile - load_offline_data 问题

> ID：10700953
> 
> 赞同：0
> 
> 时间：2012-05-22T11:16:33.347
> 
> 标签：rhomobile

用于从 .txt 文件加载种子数据时，我面临 load_offline_data 问题

我的代码将如下所示：

```
> def initialize
>     Rho::RHO.load_all_sources()
>     products = Product.find(:all)
>     Rho::RhoUtils.load_offline_data(['products'], 'db')   end 
```

在 db/fixtures/products.txt

```
source_name|attrib|object|value
Product|name|1|product 1| Product|order_id|1|1|

Product|name|2|product 2|
Product|order_id|2|2| 
```

我收到这样的错误：

**应用程序初始化失败：#source_id' for nil:NilClass>;Trace: lib/rho/rhutils.rb:71:inblock (3 levels) in load_offline_data'**

任何人都可以帮助我..

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:17:16.433

斯里，我不得不手动要求“rho/rhutils”。

为了避免 source_id 错误，我不得不调用 Rhom::Rhom.database_full_reset(true, true)。因为这会在每次应用程序初始化时重置数据库，所以我包括了一个检查我的树表是否已经填充的警卫。

```
require 'rho/rhoapplication'
require 'rho/rhoutils'

class AppApplication < Rho::RhoApplication
  def initialize
    # Tab items are loaded left->right, @tabs[0] is leftmost tab in the tab-bar
    # Super must be called *after* settings @tabs!
    @tabs = nil
    #To remove default toolbar uncomment next line:
    #@@toolbar = nil
    super

    if Tree.find_all.empty?
      Rhom::Rhom.database_full_reset(true, true)
      Rho::RhoUtils.load_offline_data(['object_values'], '')
    else
      puts "*"*80
      puts "ALL GOOD"*5
      puts "*"*80
    end

    # Uncomment to set sync notification callback to /app/Settings/sync_notify.
    # SyncEngine::set_objectnotify_url("/app/Settings/sync_notify")
    # SyncEngine.set_notification(-1, "/app/Settings/sync_notify", '')
  end
end 
```

# google-maps - 从用户输入的顶点绘制多边形 google maps api

> ID：10700955
> 
> 赞同：0
> 
> 时间：2012-05-22T11:16:37.263
> 
> 标签：google-maps, google-maps-api-3, polygon

我的 Web 应用程序上有一个文本区域，允许用户输入多边形的顶点。我想实现一个按钮，单击该按钮时，将在谷歌地图中绘制一个带有输入顶点的多边形。顶点将始终采用以下格式：

```
25.82024674666931, 55.66104912743973,
25.54465656761206, 48.11048789757425,
25.22561664287819, 5.57756899014949,
25.47485219998054, 26.21461743851616 
```

最好的方法是什么。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:06:35.703

如果您相信输入始终是干净的，那么这只是几个步骤，没有复杂性。

首先，将逗号分隔的文本转换为 LatLngs 数组。

```
 function textToLatLngs(text) {
    var dots = text.value.split(",");
    var latLngs = [];
    for(var i = 0; i < dots.length; i += 2) {
      latLngs[i/2] = new google.maps.LatLng(parseFloat(dots[i]),
                       parseFloat(dots[i+1]));
    }
    return latLngs;
  } 
```

接下来，您可以使用 LatLngs 定义一个多边形：

```
 function drawPolygon(vertices) {
    var polygon = new google.maps.Polygon({
      strokeColor: "#f33",
      fillColor: "#fce",
      paths: vertices,
      map: map
    });
  } 
```

最后，将 HTML 和 Javascript 与事件监听器链接起来（我把我的放在了`initialize()`）

```
 function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(25.0, 25.0),
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    google.maps.event.addDomListener(
      document.getElementById("button1"), 
      'click',
      function() {
        drawPolygon(textToLatLngs(document.getElementById('coordsinput')));
      });
  } 
```

使用 HTML 表单，例如：

```
 <form id="form">
        <input id="button1" type="button" value="get polygon">
        <br /><br />
        <textarea id="coordsinput" cols="22" rows="20">
        25.82024674666931, 55.66104912743973,
        25.54465656761206, 48.11048789757425,
        25.22561664287819, 5.57756899014949,
        25.47485219998054, 26.21461743851616
    </textarea>
      </form> 
```

每次单击按钮时，该按钮都会绘制新的多边形。如果您只想移动单个多边形，则需要在单击按钮时调用 setPaths。

[http://jsbin.com/enepis/edit#preview](http://jsbin.com/enepis/edit#preview)

# sql-server - 建立 SQL 连接需要 10 - 15 秒

> ID：10700957
> 
> 赞同：5
> 
> 时间：2012-05-22T11:16:41.763
> 
> 标签：sql-server, asp.net-mvc, performance, iis-7, entity-framework-4

我们遇到了一些奇怪的性能问题，我希望有人能指出我们正确的方向。我们的场景是一个`ASP.NET MVC C#`使用`EF4 POCO`in的网站`IIS 7`（高度规范的服务器，专用于此应用程序）。

显然它在 application_startup 上的速度很慢，这是意料之中的，但是一旦加载，您就可以浏览网站，一切都很好，页面加载速度快 0.5 毫秒（我们正在使用`Mini-Profiler`）。现在，如果您停止使用该网站 5 到 10 分钟（我们将应用程序池回收设置为 2 小时并且我们正在记录，所以我们知道它没有被回收）那么第一页加载速度非常慢，10 - 15 秒，但随后您可以再次导航而不会出现问题（0.5 毫秒）。

这并不是`SQL queries`很慢，因为所有查询在第一页命中后似乎都可以正常工作，即使它们尚未运行，因此也不会在任何地方缓存。

我们已经进行了大量的测试，我无法弄清楚这一点。到目前为止，我尝试过的主要事情是预生成 EF 视图，但这并没有帮助。

在 Sql Server Profiler 中没有任何活动并且没有站点交互的情况下查看 5 分钟后，似乎`Sql Server Profiler`需要或需要 30 秒后，应用程序会出现几个“审核注销”条目，一旦发生这种情况，它似乎需要 10 - 15秒刷新应用程序。是否有空闲超时`Sql Server`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:29:24.667

如果您在连接字符串中使用以下内容，这应该可以工作：

```
server=MyServer;database=MyDatabase;Min Pool Size=1;Max Pool Size=100 
```

它将强制您的连接池始终保持至少一个连接。我必须说我不推荐这个（持久连接），但它会解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:45:45.600

你在使用 LMHOSTS 文件吗？我们有同样的问题。LMHOSTS 文件缓存默认在 10 分钟后过期。系统空闲 10 分钟后，主机将在重新加载 LMHOSTS 文件之前使用广播消息，从而导致延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:44:45.917

> 似乎在 5 分钟后查看 Sql Server Profiler 给予或花费 30 秒，而 Sql Server Profiler 中没有任何活动并且没有站点交互，应用程序出现几个“审核注销”条目，一旦发生，它似乎需要10 - 15 秒刷新应用程序。Sql Server 上是否存在空闲超时？

这告诉我问题很可能在于您的 SQL 服务器和/或与它的连接，而不是您的应用程序。SQL 服务器使用[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.80%29.aspx)，SQL 会不时清理这些池并清理它们。您似乎遇到的延迟是您的连接池已被清理（审核注销）并且您必须建立新连接。我会与您的 SQL 数据库人员交谈/工作。

对于测试，您是否有权访问与生产应用程序不在同一 SQL 服务器上运行的数据库的本地/开发副本？如果没有，请尝试进行一项设置，看看您是否遇到同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T13:18:19.943

由于它是第一次运行（每个应用程序？）速度很慢，您可能会遇到将 EDMX 或 LINQ 编译为 SQL 的过程。

可能的解决方案：

1.  使用预编译视图和预编译查询（可能需要大量重构）。
    [http://msdn.microsoft.com/en-us/library/bb896240.aspx](http://msdn.microsoft.com/en-us/library/bb896240.aspx)
    [http://blogs.msdn.com/b/dmcat/archive/2010/04/21/isolating-performance-with-precompiled-pre -generated-views-in-the-entity-framework-4.aspx](http://blogs.msdn.com/b/dmcat/archive/2010/04/21/isolating-performance-with-precompiled-pre-generated-views-in-the-entity-framework-4.aspx)
    [http://msdn.microsoft.com/en-us/library/bb896297.aspx](http://msdn.microsoft.com/en-us/library/bb896297.aspx)
    [http://msdn.microsoft.com/en-us/magazine /ee336024.aspx](http://msdn.microsoft.com/en-us/magazine/ee336024.aspx)

2.  在应用启动时试运行所有查询（在收到第一个请求之前）。
    您可以在默认连接字符串（可以是空数据库）上使用假输入（例如不存在的零键）运行查询。只要确保不抛出异常（使用 SingleOrDefault() 而不是 Single() 并在 .ToList() 上处理空结果和 0 长度列表结果）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T13:17:00.407

我将对 SQL Server 运行“SQL Server Profiler”并捕获新的跟踪，同时通过在空闲 5-10 分钟后访问该站点来重现问题。之后查看痕迹。具体来说，查找 ApplicationName 以“EntityFramework...”开头的条目。这将告诉您当时 EF 在做什么。EF 之上的自定义缓存可能存在一些问题，或者某些会话状态即将到期（检查 web.config 中的 sessionState 超时）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T02:43:08.800

创建一个简单的网页，该网页使用诸如“Select getDate()”之类的简单查询或其他一些廉价查询来访问 SQL Server。然后使用 Pingdom 或其他监视器等外部服务每隔 30 秒左右访问该页面。这应该保持连接温暖。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T01:45:00.220

尝试在 web.config 中覆盖您的超时，如下例所示：

```
Data Source=mydatabase;Initial Catalog=Match;Persist Security Info=True
;User ID=User;Password=password;Connection Timeout=120 
```

如果它有效，这不是一个解决方案..只是一个解决方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-08T08:27:53.013

在我们的案例中，应用程序托管在 Azure 应用服务计划中，并且遇到了类似的问题。原来是没有配置虚拟网络的问题。请参阅此处的问题/答案 - [EF Core 3.1.14 Recurring Cold Start](https://stackoverflow.com/questions/67409483/ef-core-3-1-14-recurring-cold-start/67445410#67445410)

# c# - 实现可逆加密的库或工具

> ID：10700958
> 
> 赞同：-3
> 
> 时间：2012-05-22T11:16:54.193
> 
> 标签：c#, encryption

> **可能重复：**
> [C# 的简单 2 路加密](https://stackoverflow.com/questions/165808/simple-2-way-encryption-for-c-sharp)

我想在我的 C# 程序中加密数据，但希望以后能够解密它。有谁知道我可以下载的任何库或工具可以让我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:21:54.070

您可以使用 Microsoft Enterprise Library，其中有一个加密块

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:23:57.883

看看[System.Security.Cryptography](http://msdn.microsoft.com/en-us/library/9eat8fht)命名空间。例如，有[`TripleDESCryptoServiceProvider`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledescryptoserviceprovider.aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:25:19.120

有一个内置的密码学类

**`System.Security.Cryptography.RSACryptoServiceProvider`**

请检查此链接[RSACryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:29:49.253

如果您查看文档中的 System.Security.Cryptography 命名空间，您会发现大多数常见加密系统的类。

有两种类型的算法：

公钥（例如 RSA） - 您使用公钥加密，然后使用私钥解密。

对称密钥（例如 AES、DES） - 使用相同的密钥执行加密和解密。

选择哪一种主要取决于你的情况。对称密钥算法通常用于加密数据，因为它们速度更快，但这带来了安全交换密钥的问题。如果您可以使用相同的密钥手动配置通信端点，那就太好了。如果没有，那么您可以使用公钥来加密所有内容，或者 - 就像在 SSL 等中使用的那样 - 添加一个握手阶段，通过公钥加密交换密钥。

# dataset - SAS：报告功能故障

> ID：10700959
> 
> 赞同：0
> 
> 时间：2012-05-22T11:16:55.163
> 
> 标签：dataset, report, sas

我想在报告过程中重写数据集的代码。

1)`One`带字段的数据集 ( `name_id` `test_var`)

2)`test_var`可以是正数、负数、零。

3）结果，我想要这样的表：

name_chr test_var_pos test_var_neg test_var_zero

/*这里的数据，按name_chr分组*/

TOTAL: SUM_POS SUM_NEG SUM_ZERO <- 毕竟我想要这个 TOTAL

4）附加：我有 name_id => name_chr 的字典

5）PS：name_id 包含点！！！（我希望它们在结果表中）

6)

```
data result(keep=name_chr test_var_pos test_var_neg test_var_zero);
  retain name_chr "";
  retain test_var_pos  0;
  retain test_var_neg  0;
  retain test_var_zero 0;
  set One;
  by name_id;  /*already sorted by name_id*/
  if(FIRST.name_id) then do;
    name_chr="";
    test_var_pos = 0;
    test_var_neg = 0;
    test_var_zero = 0;
  end;
  else do;
    if(test_var>0) then test_var_pos=test_var_pos + test_var;
    if(test_var<0) then test_var_neg=test_var_neg + abs(test_var);
    if(test_var=0) then test_var_zero=test_var_zero + 1; /*as example, test_var_zero is    a count*/

  end;
 if (LAST.name_id) then do; 
      %mFIND(name_id,name_chr);
      output;
 end;
 run; 
```

我想在 proc 报告中重写此代码并将`TOTAL`行添加到此数据集。

所以，我做什么：

1) name_id 最后必须是组值。

2) 我必须计算 test_var 的所有正值、负值和零值。

```
 proc report data = One out = Result_table(keep= name_chr test_var_pos test_var_neg test_var_zero); 
 column name_id name_chr test_var test_var_pos test_var_neg test_var_zero;
 /*from One - table*/
 define name_id /group;
 define test_var / computed;
 /*to Result_table*/
 define name_chr / computed;
 define test_var_pos / computed;
 define test_var_neg / computed;
 define test_var_zero / computed;

 compute before name_id;  /*is this eq to FIRST?*/
    name_chr="";
    test_var_pos = 0;
    test_var_neg = 0;
    test_var_zero = 0;
 endcomp;
 compute test_var_pos;
    if(test_var>0) then test_var_pos = test_var_pos + test_var;
 endcomp;
 compute test_var_neg;
    if(test_var<0) then test_var_neg = test_var_neg + abs(test_var);
 endcomp;
 compute test_var_zero;
    if(test_var=0) then test_var_zero = test_var_zero + 1;
 endcomp;
 compute after name_id; /*is it eq to LAST?*/
    /*magic to get name_chr*/
    %mFIND(name_id,name_chr);
    /*output*/
 endcomp;
 rbreak after / summarize;
 compute after rbreak; 
   name_chr = "TOTAL: ";
 encomp;
 run; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:52:56.933

Proc report does not process a data set...it presents it. It can be in HTML, PDF, RTF, etc. The typical workflow is to prepare your data with a data step or a procedure. Then present your data with a report procedure (like Proc Report).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:38:05.517

If you want the total line for presentation (CarolinaJay is right here) only, then you can massage the data so that `proc report` will create your totals for you.

With out any example dataset, I'm going to make the assumption that a name_id can be in your dataset multiple times with different `test_vars`.

Knowing that your going to use `proc report` to do the summaries, I'd probably do something like the following:

```
data prepped;
 set one;
 if test_var > 0 then test_var_pos = 1;
 else if test_var = 0 then test_var_zero = 1;
 else if test_var < 0 then test_var_neg = 1;
run; 
```

You'd want to order the if / else if statements in order of the most occurring to possibly squeeze out some efficiency if you're dealing with a very large dataset.

From there, it's a matter of `proc freq`, `proc summary`, `proc report`, proc whatever will do want you want which is to condense the counts.

For a summary by `name_id` and then an overall summary, you *could* use proc report. Again, it may not be the *best* option depending on your dataset and your computing power.

Same logic as my previous answer using proc report:

```
proc report data = prepped out=summary nowd;
 col name_id test_var_pos test_var_zero test_var_positive;
 define name_id / group;
 rbreak after / summarize;
run; 
```

Again, any of the other procs could get you the summaries by group, and then you could feed that data set into `proc report` to get that summary line on the bottom. Just exclude the `/group` on the name_id.

Getting comfortable with how the underlying data needs to be structured for each of the SAS procedures will go a LONG LONG LONG way in harnessing the power of the built in procs.

# ios - 在 iOS 中按日期排序

> ID：10700966
> 
> 赞同：1
> 
> 时间：2012-05-22T11:17:35.707
> 
> 标签：ios

我将数据与插入日期一起存储在 Sqlite 数据库中。日期也以字符串格式存储在 sqlite 中。是否可以使用排序日期检索数据。我对此表示怀疑，因为 Date 也存储为字符串。如果通过查询无法做到这一点，有没有办法对 NSDate 进行排序。

否决这个问题的问题是什么。因此，我无法发布问题。请删除反对票。了解我问题的人已经回答了。如果没有人不应该理解这个问题，那么为什么 Omar Abdelhafith 会回答这个问题。这个想法也帮助了我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:22:59.903

我现在想到的是将所有字符串数据转换为自 1970 年以来的时间间隔这样时间和日期更容易处理，因为它们是整数然后你可以做类似的事情

```
 sortDesc = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
    [array sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]]; 
```

# java - 删除在java中的hashmap中不起作用？

> ID：10700968
> 
> 赞同：-2
> 
> 时间：2012-05-22T11:17:43.947
> 
> 标签：java, hashmap

大家好，我一直在尝试解决此问题，但无法解决，问题是删除在 hashmap 中不起作用。

请看下面的代码。

```
 package com.org.common;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

@SuppressWarnings("unused")
class Workindays {
    public static int findNoOfDays(int year, int month, int day) {
        Calendar calendar = Calendar.getInstance();
        calendar.set(year, month - 1, day);
        int days = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
        return days;
    }
    public static Map<String, String> getHolydaysMap(int year, int month, int day) {
        //connect with database and check whether the date is holyday query is = SELECT * FROM holiday_calendar h WHERE date >='2008-10-01' AND date <='2008-10-30' AND type='Fixed';
        Map<String, String> holydaysMap = new LinkedHashMap<String,String>(); 

        holydaysMap.put("20","17-04-2012");
        holydaysMap.put("10","25-04-2012");
        return holydaysMap;
    }
    public static Map<String, String> getWorkingDaysMap(int year, int month, int day){
        int totalworkingdays=0,noofdays=0;
        String nameofday = "";
        ConcurrentHashMap<String,String> workingDaysMap = new ConcurrentHashMap<String,String>();
        Map<String,String> holyDayMap = new LinkedHashMap<String,String>();
        noofdays = findNoOfDays(year,month,day);
        holyDayMap = getHolydaysMap(year,month,day);

        for (int i = 1; i <= noofdays; i++) {
            Date date = (new GregorianCalendar(year,month - 1, i)).getTime(); // year,month,day
            SimpleDateFormat f = new SimpleDateFormat("EEEE");
            nameofday = f.format(date);
            String formatedDate = i+"-"+month+"-"+year;
            if(!(nameofday.equals("Saturday") || nameofday.equals("Sunday"))){
                workingDaysMap.put(String.valueOf(i),formatedDate);
                totalworkingdays++;
            }
        }
        workingDaysMap.put("totalworkingdays", String.valueOf(totalworkingdays));

        System.out.println("removeHolyday : "+removeHoliday(workingDaysMap,holyDayMap));
        return workingDaysMap;
    }
    @SuppressWarnings({ "rawtypes", "unchecked" })
    public static Map removeHoliday(ConcurrentHashMap daysMap, Map holydayMap) {
        Iterator<Map.Entry> holyDayiterator = holydayMap.entrySet().iterator();
        while (holyDayiterator.hasNext()) {
            Map.Entry holyDayEntry = holyDayiterator.next();

            Iterator<Map.Entry> daysiterator = daysMap.entrySet().iterator();
            while (daysiterator.hasNext()) {
                Map.Entry daysEntry = daysiterator.next();
                 if(daysEntry.getKey().equals(holyDayEntry.getKey()))
                      daysMap.remove(holyDayEntry.getKey());
            }
        }
        return daysMap;
    }
    @SuppressWarnings({ "rawtypes" })
    public static void main(String[] args) {
        String delimiter = null, dateValues[] = null, startDate = "01-04-2012";
        int year = 0,month=0,day=0,totalworkingdays = 0;
        Map workingDaysMap = new LinkedHashMap<String,String>();

        startDate = "01-04-2012";
        delimiter = "-";
        dateValues = startDate.split(delimiter);

        year = Integer.parseInt(dateValues[2]);
        month = Integer.parseInt(dateValues[1]);
        day = Integer.parseInt(dateValues[0]);

        workingDaysMap = getWorkingDaysMap(year, month, day);
        //System.out.println("workingdays map : "+workingDaysMap);

    }
} 
```

这是我用来删除值的方法

```
removeHolyday 
```

我刚刚给出了示例值，以通过以下方法进行测试。

```
getHolydaysMap 
```

请帮忙。

编辑：感谢所有花费宝贵时间回答，赞成和反对的人。我已经更改了代码，现在工作正常，

更新的工作代码。

问候安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:26:50.347

```
 if (Integer.parseInt(daysEntry.getKey().toString()) ==   Integer.parseInt(holyDayEntry.getKey().toString()))
                daysMap.remove( Integer.parseInt(holyDayEntry.getKey().toString()));
            break; 
```

如果条件失败，它将爆发而不是循环地图的其余部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T11:27:17.793

您没有说明您遇到的具体错误，但有一些一般性的评论。

您的 break 语句位于“if”之外，因此代码将通过，然后在第一个键后退出 while 循环。换句话说，您实际上并没有遍历所有键。

其次，您*不需要*迭代地图并测试匹配键，无论如何调用 remove 都会为您完成此操作。

第三（作为兴趣点）在迭代地图时从地图中删除项目将导致下一次循环时迭代器出现异常。在这种特殊情况下没有突出显示，因为 break 语句可以避免您遇到错误，但值得注意的是未来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:28:14.680

在您的 removeHoliday 方法中，您需要括号；您需要以下内容：

```
if (Integer.parseInt(daysEntry.getKey().toString()) == Integer.parseInt(holyDayEntry.getKey().toString())) {
    daysMap.remove( Integer.parseInt(holyDayEntry.getKey().toString()));
    break;
} 
```

代替

```
if (Integer.parseInt(daysEntry.getKey().toString()) ==     Integer.parseInt(holyDayEntry.getKey().toString()))
    daysMap.remove( Integer.parseInt(holyDayEntry.getKey().toString()));
break; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:29:03.310

考虑这样重写`removeHolydays`：

代替

```
 public static Map removeHolyday(Map daysMap, Map holydayMap) {
    Iterator<Map.Entry> holyDayiterator = holydayMap.entrySet().iterator();
    while (holyDayiterator.hasNext()) {
        Map.Entry holyDayEntry = holyDayiterator.next();
        Iterator<Map.Entry> daysiterator = daysMap.entrySet().iterator();

        while (daysiterator.hasNext()) {
            Map.Entry daysEntry = daysiterator.next();
            if (Integer.parseInt(daysEntry.getKey().toString()) == Integer.parseInt(holyDayEntry.getKey().toString()))
                daysMap.remove( Integer.parseInt(holyDayEntry.getKey().toString()));
            break;
        }
    }
    return daysMap;
} 
```

它应该是：

```
public static Map<Integer, String> remove(Map<Integer, String> daysMap, Map<Integer, String> holydayMap){
     for(Integer i : holydayMap.keySet())
         daysMap.remove(i);
     return daysMap;
} 
```

`break`正如指出的那样，这将消除错误位置的错误`ejb_guy`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T11:55:04.317

您可以使用 ConcurrentHashMap 来执行此操作，

公共静态地图 removeHolyday(ConcurrentHashMap daysMap,Map HolydayMap){

编辑：使用下面的代码来做，

```
public static Map removeHoliday(ConcurrentHashMap daysMap, Map holydayMap) {
        Iterator<Map.Entry> holyDayiterator = holydayMap.entrySet().iterator();
        while (holyDayiterator.hasNext()) {
            Map.Entry holyDayEntry = holyDayiterator.next();
            if(daysMap.containsKey(holyDayEntry.getKey())){
                daysMap.remove(holyDayEntry.getKey());
            }
        }
        return daysMap;
    } 
```

# c# - 传递参数或具有不同的操作方法

> ID：10700975
> 
> 赞同：0
> 
> 时间：2012-05-22T11:18:15.630
> 
> 标签：c#, .net, asp.net-mvc, design-patterns

我正在使用 mvc 为不同的集成创建提要 api。例如，假设我想向其他人提供发布在我网站上的问题的提要。最初的实现是将第三方的名称作为参数传递给提要控制器上的操作方法。

```
public XmlResult Get(string partner)
{

    //Call the business layer and get the List<Questions>       

    if (!string.IsNullOrEmpty(partner))
    {
        partner = partner.ToLower();

        switch (partner)
        {
            case "org1":
                Org1XMLFeedViewModel org1FeedViewModel = new Org1XMLFeedViewModel();
                org1FeedViewModel.LastBuildDate = DateTime.Now;

                foreach (QuestionInfo Question in QuestionsForFeed)
                {
                    Org1XMLFeedQuestionViewModel QuestionForFeed = new Org1XMLFeedQuestionViewModel(Question);
                    Org1FeedViewModel.Questions.Add(QuestionForFeed);
                }
                return new XmlResult(Org1FeedViewModel);                        
        case "org2":
        //similar to org1, use org2 ViewModel                       
            default:
                return new XmlResult(QuestionsForFeed);
        }
    }

    return new XmlResult(QuestionsForFeed);
} 
```

然而，现在有一种想法，也许不同的视图模型不应该在同一个动作方法中。因此，不是将伙伴作为参数传递，而是针对不同的伙伴具有不同的操作方法。

哪个更好，为什么？还是有更好的模式出现在您的脑海中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:21:57.627

控制器需要节食的圣烟；）

OT：就个人而言，我建议您将它们拆分为不同的操作方法，将它们分开，以便每个 Action 只能返回一种类型的控制器，因为它是那种*类型的 Action*。

这样做也意味着您可以从控制器中抽象出该逻辑，因为 MVC 的最佳实践是**瘦控制器，胖模型**，您将无法在这里坚持这一点，因为它是您的控制器必须在这种情况下确定模型类型。

# log4j - 电锯日志格式模式语法

> ID：10700976
> 
> 赞同：1
> 
> 时间：2012-05-22T11:18:15.863
> 
> 标签：log4j, apache-chainsaw

我们有一个具有以下模式的 log4j 文件：

```
@|%d{yyyy-MM-dd HH:mm:ss.SSS}|%X{Machine}|%X{CorrelationId}|%X{Sender}|%X{Receiver}|%-5p|%X{Runtime}|%X{ClientUser}|%c|%M|%L|%m%n 
```

我使用以下模式创建了一个 LogFilePatternReceiver：

```
@|TIMESTAMP|PROP(MACHINE)|PROP(CORRELATIONID)|PROP(SENDER)|PROP(RECEIVER)|LEVEL|PROP(RUNTIME)|PROP(CLIENTUSER)|CLASS|METHOD|LINE|MESSAGE 
```

但是当我启动那个接收器时，我得到一个错误：

```
java.lang.IllegalArgumentException: invalid expression: 
    at org.apache.log4j.rule.ExpressionRule$PostFixExpressionCompiler.compileExpression(ExpressionRule.java:132)
    at org.apache.log4j.rule.ExpressionRule.getRule(ExpressionRule.java:64)
    at org.apache.log4j.rule.ExpressionRule.getRule(ExpressionRule.java:56)
    at org.apache.log4j.varia.LogFilePatternReceiver.initialize(LogFilePatternReceiver.java:557)
    at org.apache.log4j.varia.LogFilePatternReceiver$1.run(LogFilePatternReceiver.java:801)
    at java.lang.Thread.run(Unknown Source)

regexp is @|(\w+-\w+-\w+ \w+:\w+:\w+.\w+)|(.+?)|(.+?)|(.+?)|(.+?)|(.+?)|(.+?)|(.+?)|(.+?)|(.+?)|(.+?)|(.+) 
```

我真的没有看到错误在哪里？有输入吗？我可以对非标准列使用类似的“PROP(...)”关键字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:44:10.893

是的，您可以为自己的列使用 PROP 关键字。

你可以试试最新的 Chainsaw 开发者快照吗？它可以解析包含 FileAppender 条目的 log4j.xml 或 log4j.properties 配置，并将构建一个匹配的 Chainsaw 配置来处理它。

此处提供快照..新版本还具有许多新功能：

[http://people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

通常让人们绊倒的是时间戳格式和特殊字符，但我在这里没有看到任何奇怪的东西，所以看看最新的开发人员快照是否有帮助。

斯科特

# ios - 在没有 MFI 注册的情况下将当前 iPhone Wi-Fi 设置传输到 iP 相机的方法

> ID：10700978
> 
> 赞同：1
> 
> 时间：2012-05-22T11:18:19.417
> 
> 标签：ios, mfi

我目前正在开发一个可以在 IP 摄像机上进行 Wi-Fi 设置设置过程的应用程序。现在我可以获取 iPhone 当前打开的 SSID，但 Wi-Fi 密码密钥仍然需要用户手动输入。

有没有办法从 iPhone 获取完整的 Wi-Fi 设置（SSID、密码和加密方法）。我已经看到 Withings Withbaby 应用程序这样做了，但它们在 MFI 计划中。

我对是否可以在不加入 MFI 程序的情况下完成 Wi-Fi 设置感兴趣？我公司目前不愿意花报名所需的钱。

# polymorphism - 在 RavenDb 中的多地图索引上按 Clr-Type 过滤

> ID：10700979
> 
> 赞同：5
> 
> 时间：2012-05-22T11:18:20.167
> 
> 标签：polymorphism, ravendb

我在 RavenDb 中存储所有从基类继承的对象，并且我使用 Multi-Map 索引来搜索所有子类型，如下所示：

```
public class BaseRequest
{
    public Guid Id { get; set; }
    public string RequestName { get; set; }
    public DateTime RequiredDate { get; set; }
}

public class RequestA: BaseRequest
{
    public string SomethingForA { get; set; }
}

public class RequestB : BaseRequest
{
    public int SomethingForB { get; set; }
}

public class AllRequests: AbstractMultiMapIndexCreationTask
{
    public AllRequests()
    {
        AddMap<RequestA>(requests => from req in requests select new {req.RequestName, req.RequiredDate});
        AddMap<RequestB>(requests => from req in requests select new {req.RequestName, req.RequiredDate });
    }   
} 
```

我像这样搜索它：

```
 public BaseRequest[] Search(string requestType, string requestName, DateTime? requestDate = null) {
        var q = RavenSession.Query<BaseRequest, AllRequests>();

        if (!string.IsNullOrEmpty(requestName)) {
            q = (IRavenQueryable<BaseRequest>)Queryable.Where(q, x => x.RequestName == requestName);
        }
        if (requestDate.HasValue) {
            q = (IRavenQueryable<BaseRequest>) Queryable.Where(q, x => x.RequiredDate == requestDate);
        }

        return q.ToArray();
    } 
```

我想做的是通过请求的 CLR-Type 进一步过滤结果。是否可以使用“Raven-Entity-Name”元数据字段来做到这一点，如果可以的话怎么做？

我知道我可以只使用`Query<RequestA>()`etc，但以后可能需要按多种类型进行过滤，并且这些类型将由用户动态选择。

注意：我真正想做的是使用索引来拉回给定某个 RequestName 的请求，但只返回 RequestA（后来只返回 RequestA、RequestC 和 RequestD）。我不想做多个查询来单独取回每种类型，我想做一个查询，通过参数查询，有时输入。

该系统的设计使请求类型将在每个月左右添加，我们最终可能会得到几百种不同的类型。我想动态搜索一组具有给定参数的特定类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:02:16.053

解决了。我需要使用`MetadataFor(req)`将 clr 类型添加到索引中，然后使用特定的映射类型进行查询。像这样：

```
public class AllRequests: AbstractMultiMapIndexCreationTask
{
    public class SearchMap {
      public string RequestName{get;set;}
      public DateTime RequiredDate{get;set;}
      public string RequestType{get;set;}
    }

   public AllRequests(){
        AddMap<RequestA>(requests => from req in requests select new {req.RequestName, req.RequiredDate, RequestType = MetadataFor(req)["Raven-Clr-Type"]});
        AddMap<RequestB>(requests => from req in requests select new {req.RequestName, req.RequiredDate, RequestType = MetadataFor(req)["Raven-Clr-Type"] });
    }   
} 
```

然后我可以查询请求的实际字段，也可以按如下类型查询：

```
 public BaseRequest[] Search(string requestType, string requestName, DateTime? requestDate = null) {
        var q = RavenSession.Query<AllRequests.SearchMap, AllRequests>();

        if (!string.IsNullOrEmpty(requestName)) {
            q = (IRavenQueryable<BaseRequest>)Queryable.Where(q, x => x.RequestName == requestName);
        }
        if (requestDate.HasValue) {
            q = (IRavenQueryable<BaseRequest>) Queryable.Where(q, x => x.RequiredDate == requestDate);
        }

        if (!string.IsNullOrEmpty(requestType))
        {
            q =
                q.Where(
                    x =>
                    x.RequestType == GetClrTypeFromPassedInValue(requestType));
        }
        return q.As<BaseRequest>().ToArray();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:52:43.277

元数据只是一个字段，只要有索引，就可以查询。

内置 index `Raven/DocumentsByEntityName`，如下所示：

```
database.PutIndex("Raven/DocumentsByEntityName", new IndexDefinition
{
    Map =
        @"from doc in docs 
let Tag = doc[""@metadata""][""Raven-Entity-Name""]
select new { Tag, LastModified = (DateTime)doc[""@metadata""][""Last-Modified""] };",
    Indexes =
    {
        {"Tag", FieldIndexing.NotAnalyzed},
    },
    Stores =
    {
        {"Tag", FieldStorage.No},
        {"LastModified", FieldStorage.No}
    }
}); 
```

然后你可以像这样查询它：

```
var results = s.Advanced.LuceneQuery<RequestB>()
                .WhereEquals("Tag", "Entity-Name")
                .ToArray(); 
```

# c - 将标准输出重定向到 C 中的管道

> ID：10700982
> 
> 赞同：5
> 
> 时间：2012-05-22T11:18:33.587
> 
> 标签：c, redirect, fork, pipe, stdout

这是我正在尝试制作的程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>

int main(int argc, char* argv[])
{
    char* arguments[] = {"superabundantes.py", NULL};

    int my_pipe[2];
    if(pipe(my_pipe) == -1)
    {
        fprintf(stderr, "Error creating pipe\n");
    }

    pid_t child_id;
    child_id = fork();
    if(child_id == -1)
    {
        fprintf(stderr, "Fork error\n");
    }
    if(child_id == 0) // child process
    {
        close(my_pipe[0]); // child doesn't read
        dup2(my_pipe[1], 1); // redirect stdout

        execvp("cat", arguments);

        fprintf(stderr, "Exec failed\n");
    }
    else
    {
        close(my_pipe[1]); // parent doesn't write

        char reading_buf[1];
        while(read(my_pipe[0], reading_buf, 1) > 0)
        {
            write(1, reading_buf, 1); // 1 -> stdout
        }
        close(my_pipe[0]);
        wait();
    }
} 
```

我想在孩子中执行 exec 将孩子的标准输出重定向到父母（通过管道）。我认为问题可能与dup2有关，但我之前没有使用过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:48:37.610

*您还*需要`argv[0]`在调用 exec 时提供。所以你的论点应该是：

```
char* arguments[] = {"cat", "superabundantes.py", NULL}; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-08-21T22:34:13.383

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>

int main(int argc, char* argv[])
{
    //char* arguments[] = {"cat","tricky.txt", NULL};
    char* arguments[] = {"./son1", NULL};
    int my_pipe[2];
    if(pipe(my_pipe) == -1)
    {
       fprintf(stderr, "Error creating pipe\n");
    }

    pid_t child_id;
    child_id = fork();
    if(child_id == -1)
    {
        fprintf(stderr, "Fork error\n");
    }
    if(child_id == 0) // child process
    {
        close(my_pipe[0]); // child doesn't read
        dup2(my_pipe[1], 1); // redirect stdout

        execvp(arguments[0], arguments);

        fprintf(stderr, "Exec failed\n");
    }
    else
    {
        close(my_pipe[1]); // parent doesn't write

        char reading_buf[1];

        while(read(my_pipe[0], reading_buf, 1) > 0)
        {
           write(1, reading_buf, 1); // 1 -> stdout
        }

        close(my_pipe[0]);
        wait();
   } 
```

}

/* 如果 ./son1 返回 printf() in son1 将由 parent 中的 write(1 ..) 输出 如果 son1 处于死循环中，则 son1 中的 printf() 将不会由 parent 中的 write(1 ..) 输出

```
void main()
{
    printf( "***** son run *****\n\r" );
    return;
    while(1);
} 
```

任何想法？
*/

# javascript - Javascript中的array.push不起作用

> ID：10700989
> 
> 赞同：3
> 
> 时间：2012-05-22T11:18:58.933
> 
> 标签：javascript, arrays, push

```
var conversations = new Array();
jQuery('.CChatWindow').each(function(){
    if (jQuery(this).is(":visible") && jQuery(this).attr("data-conversationid") != 0) {
        alert(jQuery(this).attr("data-conversationid")); // returns 1 and 2
        conversations.push = (jQuery(this).attr("data-conversationid"));
    }
});
alert(conversations); // returns an empty string 
```

我的代码有什么问题？array.push 似乎不起作用。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T11:19:46.783

改变

```
conversations.push = (jQuery(this).attr("data-conversationid")); 
```

至

```
conversations.push( jQuery(this).attr("data-conversationid") ); 
```

`Array.push()`是函数调用而不是赋值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T11:20:56.480

`array.push`是一个函数。像这样使用它：

```
conversations.push(jQuery(this).attr("data-conversationid")); 
```

# android - Android：在 Webview 中显示图像

> ID：10700998
> 
> 赞同：7
> 
> 时间：2012-05-22T11:19:32.707
> 
> 标签：android, image, webview

处理文件后，我得到一个 HTML 字符串，其中图像设置为

```
<img src="abc.001.png" width="135" height="29" alt="" style="margin-left:0pt; margin-top:0pt; position:absolute; z-index:-65536" /> 
```

不应修改图像的路径，因为我必须从列表中选择文件项。图像与文件位于同一目录中。我使用 loadData/loadDataWithBaseURL 加载 HTML 字符串，但没有显示图像。我只看到它的框架。

我怎样才能解决这个问题？如果我有许多索引为 .001.jpg、.002.png 等的图像，我可以应用该解决方案吗？（都在一个目录中）？

更新：谢谢，无论我如何命名图像，它都适用于 loadUrl() 语句。事实上，在将内容加载到 WebView 之前，我必须阅读和处理内容。这就是我使用 loadDataWithBaseUrl() 语句并遇到上述问题的原因。这是我在测试项目中读取和显示Test.html内容的代码。

```
 String res = "";        
    File file = new File(Environment.getExternalStorageDirectory()+"/Test.html");
    try {
        FileInputStream in = new FileInputStream(file);

        if (in != null) {               
            BufferedReader buffreader = new BufferedReader(
                    new InputStreamReader(in));
            String line;
            while ((line = buffreader.readLine()) != null) {
                res += line;
            }
            in.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }       
    wv.loadDataWithBaseURL(null, res, "text/html", "utf-8", null);
  //wv.loadUrl("file://"+Environment.getExternalStorageDirectory()+"/Test.html"); 
```

// 中的语句有效，但这不是我在实际项目中可以做的。我有一个解决方案：处理完内容后，我必须将其保存在一个临时 HTML 文件中，然后加载它，该文件稍后将被删除。但是，我仍然期待更好的解决方案:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T11:44:22.837

尝试更改图像文件的名称。我认为这是因为名称中有双点。

```
<img id="compassRose" src="CompassRose.jpg"></img> 
```

这对我有用....

**代码：**

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.webkit.WebView;

public class StackOverFlowActivity extends Activity {

    private Handler mHandler = new Handler();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView view=(WebView)findViewById(R.id.webView1);
        view.getSettings().setJavaScriptEnabled(true);
        view.loadUrl("file:///android_asset/index.html");
        view.addJavascriptInterface(new MyJavaScriptInterface(), "Android");
    }

    final class MyJavaScriptInterface
    {
        public void ProcessJavaScript(final String scriptname, final String args)
            {             
                mHandler.post(new Runnable()
                    {
                        public void run()
                            {
                                //Do your activities
                            }
                    });
            }
    }
} 
```

索引.html：

```
<html>
<head>
  <title title="Index"></title>                                   
</head>

<body>
  <h2>Android App demo</h2>
  <br /> <img src="CompassRose.jpg" />
</body>
</html> 
```

![在此处输入图像描述](../Images/1644a6b58b5692baa03ad8b7e97ebb69.png)

结果：

![在此处输入图像描述](../Images/a2555554282240f0d0336f845600eabe.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-23T07:18:11.297

只需使用：

```
webview.loadUrl("file:///android_asset/mypicture.jpg"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T12:19:50.333

您的问题出在以下行：

```
wv.loadDataWithBaseURL(null, res, "text/html", "utf-8", null); 
```

第一个参数 (baseURL) 为空。出于某种原因，即使您使用绝对 URL，WebView 也会拒绝加载任何链接的资源。如果您将代码更改为（假设您的图像存储在外部目录中），您可能会发现它会起作用：

```
wv.loadDataWithBaseURL ("file://" + Environment.getExternalStorageDirectory(), res, "text/html", "utf-8", null); 
```

如果您引用网络上的资源，请记住添加适当的权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

对不起，我的回复有点晚了。当我遇到这篇文章时，我正在研究类似的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-16T06:52:29.303

```
 WebView webView=(WebView)findViewById(R.id.my_wb);
        String url = "YOUR URL";
        webView.getSettings().setLoadsImagesAutomatically(true);
        webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
        webView.loadUrl(url); 
```