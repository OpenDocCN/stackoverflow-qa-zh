# StackOverflow 问答 12186000-12186999

# facebook - Facebook API - 在我管理的页面上以自我身份发布

> ID：12186002
> 
> 赞同：1
> 
> 时间：2012-08-29T20:29:31.930
> 
> 标签：facebook, facebook-graph-api

我试图支持以用户和页面本身的身份发布到 Facebook 页面的能力。

作为用户，我正在调用以下内容：

```
POST https://graph.facebook.com/<page_id>/feed 

message=test&access_token=<user_access_token>&format=json 
```

作为页面，我正在调用相同的调用，除了 access_token 是我/帐户为该页面返回的令牌。

在这两种情况下，帖子都是由页面制作的。

有没有办法使用 API 以我的用户身份发布到我管理的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:05:47.283

[请参阅Facebook 路线图](https://developers.facebook.com/roadmap/)上的“演员名称将始终与访问令牌匹配” - 这是解决您在此处遇到的不一致问题的迁移。

使用页面管理员的用户访问令牌仍然可以使帖子成为页面，具体取决于用户在 facebook.com 的页面管理设置中选择的内容 - 有一个选项可以“即使以身份登录也始终发布” '

启用该迁移会导致帖子始终来自访问令牌的所有者（即页面访问令牌作为页面发布，用户访问令牌作为用户发布）

# javascript - 将 JSON 插入 MongoDB 自动从字符串转换日期

> ID：12186006
> 
> 赞同：1
> 
> 时间：2012-08-29T20:29:51.967
> 
> 标签：javascript, json, mongodb, object

我有使用键`updated_at`并且`created_at`具有字符串时间戳的对象，例如`2012-08-29T16:04:34-04:00`. 我将它插入到 MongoDB 中。关键是每个对象都可以有可变数量的`updated_at`and实例`created_at`（它们在数组中）。是否有任何代码可用于搜索数组`updated_at`并`created_at`用 替换值`$.created_at = new Date($.created_at)`？

```
{
    "name":"thomas",
    "created_at":"2012-08-29T16:04:34-04:00",
    "updated_at":"2012-08-29T16:04:34-04:00",
    "logs":[
        {
            "something":"something",
            "created_at":"2012-08-29T16:04:34-04:00",
        },
        {
            "something":"something",
            "created_at":"2012-08-29T16:04:34-04:00",
        },
    ]
} 
```

到

```
{
    "name":"thomas",
    "created_at":new Date("2012-08-29T16:04:34-04:00"),
    "updated_at":new Date("2012-08-29T16:04:34-04:00"),
    "logs":[
        {
            "something":"something",
            "created_at":new Date("2012-08-29T16:04:34-04:00"),
        },
        {
            "something":"something",
            "created_at":new Date("2012-08-29T16:04:34-04:00"),
        },
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:49:50.530

```
// store your data object in x
x = {
    "name":"thomas",
    "created_at":"2012-08-29T16:04:34-04:00",
    "updated_at":"2012-08-29T16:04:34-04:00",
    "logs":[
        {
            "something":"something",
            "created_at":"2012-08-29T16:04:34-04:00",
        },
        {
            "something":"something",
            "created_at":"2012-08-29T16:04:34-04:00",
        },
    ]
}

// create a traversal function to recurse
function traverse(o) {
    // loop through object
    for (i in o) {
        // if it is a matched key (current regex matches created_at or updated_at)
        // parse the item as a date, and re-store object
        if(i.match(/(cre|upd)ated_at/)){
            o[i] = new Date(o[i])
        }
        // if the key we are looking at is an object, then recurse!
        if (typeof(o[i])=="object") {
            traverse(o[i])
        }
    }
}

// fire it up!
traverse(x)

// check the results
console.dir(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:36:23.753

```
// store your data object in x
x = {
    "name":"thomas",
    "created_at":"2012-08-29T16:04:34-04:00",
    "updated_at":"2012-08-29T16:04:34-04:00",
    "logs":[
        {
            "something":"something",
            "created_at":"2012-08-29T16:04:34-04:00",
        },
        {
            "something":"something",
            "created_at":"2012-08-29T16:04:34-04:00",
        },
    ]
}

// loop through each element of the logs array
for(y in x.logs){
    // modify the `created_at` value of the y-th element
    // by wrapping with the desired string
    x.logs[y].created_at = "new Date(" + x.logs[y].created_at + ")"
}

// check the final format of the object
console.dir(x) 
```

警告：

该对象存储一个包含修改的字符串`new Date ...`- 要存储操作的结果，您需要将修改行调整为...

```
x.logs[y].created_at = new Date( x.logs[y].created_at ) 
```

# javascript - 项目是对象的javascript数组的长度

> ID：12186009
> 
> 赞同：0
> 
> 时间：2012-08-29T20:30:14.923
> 
> 标签：javascript, jquery

我遇到了这个问题。我已经定义了一个数组并用对象填充它，如果第一种情况我的数据数组在萤火虫控制台上看起来像这样：

```
data = [
    Object { code="6", id="1073148", key="82628835"},
    Object { code="17", id="2073140", key="83628837"}
] 
```

当我检查它的长度时，我`2`从`data.length`

在第二种情况下，我有

```
data = [
    [Object { code="6", id="1073148", key="82628835"}],
    [Object { code="17", id="2073140", key="83628837"}]
] 
```

`2`当我检查时，这个也返回`data.length`

有人可以解释一下为什么我在这种不同的情况下得到相同的长度。

**`$.parseJSON`在使用让我困惑的内容填充**一些答案** 数据后进行编辑在第一种情况下我可以访问代码的值，`data[0].code`在第二种情况下我无法通过`data[0][0].code`**

 **如果它们是数组的同一个子元素，为什么我不能使用相同的索引访问它们。那为什么它们的长度相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:31:34.683

因为 data.length 在这两种情况下都只有 2

进一步解释：

每个对象都包含多个值，但是，您并没有要求这些对象的长度。

data.length = 获取数据中儿童的数量（不是孙子、堂兄弟、侄子和侄子）只是儿童。

在这两种情况下，无论对象是什么，数据中都有 2 个，因此长度 = 2

进一步：

这些对象是什么并不重要，哎呀，你可以有一个字符串和一个子数组，它仍然会返回 2，因为它将是我们要求长度的对象内部的 2 个对象

> **更新** *回答提出的第二个问题*

访问的原因很简单，首先，您的孩子是典型的对象，如您的示例所示：

```
data = [ 
    //  These two CHILDREN are Typical Objects
    Object { code="6", id="1073148", key="82628835"}, 
    Object { code="17", id="2073140", key="83628837"} 
] 
```

因此，您可以将对象 1 作为数据 [0] 访问。

*但是*，在您的第二个示例中，孩子是**ARRAY**类型对象，因此，每个孩子都可以有多个值。例如：

```
data = [   
    [Object { code="6", id="1073148", key="82628835"}],   
    [Object { code="17", id="2073140", key="83628837"}]   
]  
//  Your example here has 2 children but each child is an ARRAY type Object,
//  Each array has one child which is the object in each one
// thus you can call data[0][0] & data[1][0]
//  Could also be 
data = [   
    [Object { code="6", id="1073148", key="82628835"},   
    Object { code="17", id="2073140", key="83628837"}]   
]  
// in this later case, there is only one child
//  this one child, like in your example, is an ARRAY, but in this later example,
//  it has TWO children of its own
// thus you can call data[0][0] and data[0][1] 
```

如您所见，您的第二个示例没有两个子对象，而是包含 2 个子数组，每个数组都包含一个子对象。因此，获取对象 1 的需要变为`data[0][0]`

其中 data[0] 正在获取第一个数组子对象，第二个 [0] 正在获取该数组子对象

得到它？

如果不只是让我知道！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T20:33:54.007

当你分开它时真的很容易，见下文。

**案例 1：**包含 2 个对象的数组。

```
data => [
         Object { code="6", id="1073148", key="82628835"}, 
         Object { code="17", id="2073140", key="83628837"}
        ] 
```

**情况 2：**包含 2 个数组的数组，每个数组包含一个对象。

```
data => [
          [Object { code="6", id="1073148", key="82628835"}], 
          [Object { code="17", id="2073140", key="83628837"}]
        ] 
```

因此长度为 2，因为`data.length`在两种情况下都包含 2 个项目。.**

# html - 为什么页脚后面有这么多空白？

> ID：12186015
> 
> 赞同：0
> 
> 时间：2012-08-29T20:30:38.207
> 
> 标签：html, css, wordpress, sticky-footer

查看问题的最简单方法是在网站本身：[http ://marketsay.com/](http://marketsay.com/)

我有底部区域（蓝色），我想成为一个粘性页脚。我以为我可以在笔记本电脑上使用它，但现在我在宽屏显示器上看它，它下面有很多空间。

我已经浏览了文档和 CSS 并且无法弄清楚为什么，你能看到我遗漏的任何东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:40:26.020

您需要将以下内容添加到已有的内容中：

```
#wrap {
    position:relative;
}

#inner {
    margin-bottom:142px;
}

.disclaimer {
    position:fixed;
    bottom:0;
    width:100%;
} 
```

# c# - 未收到 UDP 数据包

> ID：12186017
> 
> 赞同：0
> 
> 时间：2012-08-29T20:30:55.370
> 
> 标签：c#, udp

我正在尝试编写一个简单的数据收集 gui。设置如下：

一方面，我有一个编程的 FPGA，它发送充满数据的简单 UDP 数据包。系统的这一部分正在工作 - 它已经过验证，我可以看到在 Wireshark 中按预期进入的数据包。

另一方面，我正在尝试用 C# 构建一个简单的接收器来收集数据包并显示数据。但是，我已经尝试了所有可以在 UDP 通信上找到的方法，但我似乎无法让 GUI 真正看到任何数据包。

数据包从 192.168.0.99:1024 发送到 192.168.0.100:1024。

我的测试代码如下：

```
private void ConnectToUDP(UDPOptions Options)
{
    UdpClient listener = new UdpClient(1024);
    IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, 1024);

    while (true)
    {
         byte[] bytes = listener.Receive(ref groupEP);
    }
} 
```

但是，除了在最后一行阻止之外，我似乎什么也做不了。（即它阻塞，但似乎从未真正接收到任何数据。）

再次，我可以看到来自 wireshark 的数据包，我将机器上的 IP 地址设置为 192.168.0.100 以实际确认传入的数据包，但我的程序看不到它们。

有人知道我做错了什么吗？

谢谢，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:03:49.413

不知道您是否仍然需要这个，或者即使这对您有用，但@INCyr，尝试将 IPEndPoint 端口从 1024 更改为 0，如下所示：

```
IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, 0); 
```

这对我有用。

# xcode - XCode 4.5 无法存档 Phonegap 项目

> ID：12186026
> 
> 赞同：1
> 
> 时间：2012-08-29T20:31:22.287
> 
> 标签：xcode, macos, cordova

我正在尝试使用 XCode 4.5 存档 Phogap 项目，但每当我这样做时，我都会收到错误消息：`Command /usr/sbin/chown failed with exit code 1` 以前有没有人遇到过这个错误？如果是这样，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T05:02:19.413

如果错误提到了关于 '3 Slices' 的内容，则不包含 armv7s 。

在您的项目和 phonegap 项目中，转到您的项目 > 构建设置 > 从“有效架构”中删除“armv7s”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T00:30:20.963

以下适用于 Xcode 4.5：

修复方法是从您的项目和 CordovaLib 项目中删除 armv6 架构，清理两个项目并重新构建。

[资源](https://issues.apache.org/jira/browse/CB-1497)

# python - 在 Firefox 中使用硒

> ID：12186035
> 
> 赞同：0
> 
> 时间：2012-08-29T20:31:45.483
> 
> 标签：python, firefox, selenium

您好，我想在下载弹出窗口上单击“确定”，但是当我尝试时

```
drive = selenium.selenium.selenium()
drive.choose_ok_on_next_confirmation() 
```

它给了我一个错误`AttributeError: type object 'selenium' has no attribute 'selenium'`。我已经尝试为首选项设置 MIME 类型，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:49:19.937

你是如何导入硒模块的？

快速谷歌搜索找到这个页面：[Selenium RC with Python in 30 seconds](http://coreygoldberg.blogspot.com/2009/09/selenium-rc-with-python-in-30-seconds.html)。该页面底部的代码是如何启动和运行 selenium 实例的最小示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:56:05.820

目前尚不清楚您在这里使用的是什么，但假设您只是使用硒遥控器，您应该能够做到

```
from selenium import selenium 
```

其次是

```
sel = selenium("localhost", 4444, "firefox", "http://www.google.com") 
```

或类似的东西。你真的应该仔细看看[文档](http://selenium.googlecode.com/svn/trunk/docs/api/py/selenium/selenium.selenium.html)

# c# - 如何从两个表中获取总和？

> ID：12186036
> 
> 赞同：-2
> 
> 时间：2012-08-29T20:31:47.063
> 
> 标签：c#, mysql

我有两个表，第一个名称是“sales”，第二个名称是“items”，两个表都有相同的列“code”和“qtd”；我想编写 MYSQL 查询女巫，我需要两个表中的 sum(qtd)，其中两个表中的代码相同。对于单表我正在使用这个

“按代码从销售组中选择代码，总和（qtd）”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:41:18.977

尝试这个：

```
Select code, sum(qtd) 
from (
select code, qtd from sales
union all
select code, qtd from items) as innerTable
group by code 
```

# git - git receive-pack 以 0000 停止

> ID：12186040
> 
> 赞同：3
> 
> 时间：2012-08-29T20:32:00.287
> 
> 标签：git, trac, opensuse

我对 git 很陌生，目前正在尝试在 opensuse 上使用 gitolite 和 trac 设置环境。

我设法使用来自[http://john.albin.net/git/git-svn-migrate](http://john.albin.net/git/git-svn-migrate)的脚本迁移了一个旧的 svn 存储库。

现在我被 trac/git-integration 困住了，因为 git-receive-pack 命令没有按预期运行。

执行以下命令时，它在打印 0000 后挂起，我必须按 CTRL+C 才能返回。

```
$ git-receive-pack .
0072c0b863c86da4bb75caa8cb5b6cd46604096b84e9 refs/heads/master report-status delete-refs side-band-64k ofs-delta
0046c0b863c86da4bb75caa8cb5b6cd46604096b84e9 refs/remotes/origin/HEAD
0048c0b863c86da4bb75caa8cb5b6cd46604096b84e9 refs/remotes/origin/master
0000 
```

我尝试在新迁移的存储库、gitolite 管理存储库和我的 Windows 客户端上的本地克隆上使用 cygwin 上的 git 执行命令。在所有情况下，我都坚持上述行为。

receive-pack 返回一些可能正确的行，然后是 0000 并挂起。

有谁知道这里发生了什么？

所有关于 git-receive-pack 的评论都集中在证书或路径错误上——它们都可以正常工作或不能正常工作。但在我的情况下，它返回几行并停止？？？

我为什么要问这个？

我的 trac 安装返回以下错误：

```
Trac[git_fs] ERROR: GitError: Could not retrieve GIT version (tried to execute/parse '/usr/bin/git-receive-pack --version' but got ValueError('need more than 0 values to unpack',)) 
```

克隆，拉和推似乎有效，但我在 svn 的标签名称中出现另一个错误，导致 svn-to-git-migration 后 gitolite 出现问题。所以我认为git可能还有另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:43:19.697

如[手册页所述](http://git-scm.com/docs/git-receive-pack)

> 由远程端提供的信息调用[`git send-pack`](http://git-scm.com/docs/git-send-pack)并更新存储库。
> 
> **最终用户通常不直接调用此命令**。
> 该协议的 UI 在 git send-pack 端，程序对用于将更新推送到远程存储库

所以不要花太多时间测试*那个*命令。检查您是否可以克隆/推送/拉取您的存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:22:42.567

你的研究把你引向了错误的方向。问题在于 openSUSE 如何构建和安装 Git，以及它链接可执行文件的方式 - 只需遵循以下链：

1.  /usr/bin/git -> ../lib/git/git-add
2.  /usr/lib/git/git-add -> git
3.  /usr/lib/git/git -> ../../bin/git-receive-pack

正如 Trac 最初制作的`[git] git_bin`那样`PathOption`，Trac 实际上会解析包含链接的路径并实际执行`/usr/bin/git-receive-pack --version`。问题当然是`git-receive-pack`不支持`--version`论点，因此失败了。

这在最近的 Trac 版本中已更改，请参阅[http://trac.edgewall.org/ticket/10997](http://trac.edgewall.org/ticket/10997)

为旧版 Trac 和插件版本修复它的补丁是微不足道的 ( `PathOption`-> `Option`)。

# c# - 打开 XML 数据标签

> ID：12186042
> 
> 赞同：1
> 
> 时间：2012-08-29T20:32:14.730
> 
> 标签：c#, excel, openxml

我正在使用 openxml 创建一个条形图，并且需要将图表底部的 x 轴标签旋转 45 度角。使用 openxml 条形图的文档，我无法弄清楚如何显示标签。下面是我用来创建图表的函数。任何建议将不胜感激。

```
 public static void InsertChartInSpreadsheet(string docName, string worksheetName, string title,
    System.Data.DataTable data)
    {
        // Open the document for editing.
        using (SpreadsheetDocument document = SpreadsheetDocument.Open(docName, true))
        {
            IEnumerable<Sheet> sheets = document.WorkbookPart.Workbook.Descendants<Sheet>().
            Where(s => s.Name == worksheetName);
            if (sheets.Count() == 0)
            {
                // The specified worksheet does not exist.
                return;
            }
            WorksheetPart worksheetPart = (WorksheetPart)document.WorkbookPart.GetPartById(sheets.First().Id);

            // Add a new drawing to the worksheet.
            DrawingsPart drawingsPart = worksheetPart.AddNewPart<DrawingsPart>();
            worksheetPart.Worksheet.Append(new DocumentFormat.OpenXml.Spreadsheet.Drawing() { Id = worksheetPart.GetIdOfPart(drawingsPart) });
            worksheetPart.Worksheet.Save();

            // Add a new chart and set the chart language to English-US.
            ChartPart chartPart = drawingsPart.AddNewPart<ChartPart>();
            chartPart.ChartSpace = new ChartSpace();
            chartPart.ChartSpace.Append(new EditingLanguage() { Val = new StringValue("en-US") });
            DocumentFormat.OpenXml.Drawing.Charts.Chart chart = chartPart.ChartSpace.AppendChild<DocumentFormat.OpenXml.Drawing.Charts.Chart>(
                new DocumentFormat.OpenXml.Drawing.Charts.Chart());

            // Create a new bar chart.
            PlotArea plotArea = chart.AppendChild<PlotArea>(new PlotArea());
            Layout layout = plotArea.AppendChild<Layout>(new Layout());
            BarChart barChart = plotArea.AppendChild<BarChart>(new BarChart(new BarDirection() { Val = new EnumValue<BarDirectionValues>(BarDirectionValues.Column) },
                new DataLabels(new DataLabelPosition { Val = new EnumValue<DataLabelPositionValues>(DataLabelPositionValues.InsideBase) }
            )));

            uint i = 0;

            // Iterate through each key in the Dictionary collection and add the key to the chart Series
            // and add the corresponding value to the chart Values.
            foreach (DataRow r in data.Rows)
            {
                BarChartSeries barChartSeries = barChart.AppendChild<BarChartSeries>(new BarChartSeries(new Index()
                {
                    Val = new UInt32Value(i)
                },
                    new Order() { Val = new UInt32Value(i) },
                    new SeriesText(new NumericValue() { Text = r[2].ToString().Trim() }
                    )));

                StringLiteral strLit = barChartSeries.AppendChild<CategoryAxisData>(new CategoryAxisData()).AppendChild<StringLiteral>(new StringLiteral());
                strLit.Append(new PointCount() { Val = new UInt32Value(1U) });
                strLit.AppendChild<StringPoint>(new StringPoint() { Index = new UInt32Value(0U) }).Append(new NumericValue(title));

                NumberLiteral numLit = barChartSeries.AppendChild<DocumentFormat.OpenXml.Drawing.Charts.Values>(
                    new DocumentFormat.OpenXml.Drawing.Charts.Values()).AppendChild<NumberLiteral>(new NumberLiteral());
                numLit.Append(new FormatCode("General"));
                numLit.Append(new PointCount() { Val = new UInt32Value(1U) });
                numLit.AppendChild<NumericPoint>(new NumericPoint() { Index = new UInt32Value(0u) }).Append(new NumericValue(r[8].ToString().Trim()));

                i++;
            }
            barChart.Append(new AxisId() { Val = new UInt32Value(48650112u) });
            barChart.Append(new AxisId() { Val = new UInt32Value(48672768u) });

            // Add the Category Axis.
            CategoryAxis catAx = plotArea.AppendChild<CategoryAxis>(new CategoryAxis(new AxisId() { Val = new UInt32Value(48650112u) }, new Scaling(new Orientation()
            {
                Val = new EnumValue<DocumentFormat.
                    OpenXml.Drawing.Charts.OrientationValues>(DocumentFormat.OpenXml.Drawing.Charts.OrientationValues.MinMax)
            }),
                new AxisPosition() { Val = new EnumValue<AxisPositionValues>(AxisPositionValues.Bottom) },
                new TickLabelPosition() { Val = new EnumValue<TickLabelPositionValues>(TickLabelPositionValues.NextTo) },
                new CrossingAxis() { Val = new UInt32Value(48672768U) },
                new Crosses() { Val = new EnumValue<CrossesValues>(CrossesValues.AutoZero) },
                new AutoLabeled() { Val = new BooleanValue(true) },
                new LabelAlignment() { Val = new EnumValue<LabelAlignmentValues>(LabelAlignmentValues.Left) },
                new LabelOffset() { Val = new UInt16Value((ushort)100) }));

             // Add the Value Axis.
             ValueAxis valAx = plotArea.AppendChild<ValueAxis>(new ValueAxis(new AxisId() { Val = new UInt32Value(48672768u) },
             new Scaling(new Orientation()
                {
                    Val = new EnumValue<DocumentFormat.OpenXml.Drawing.Charts.OrientationValues>(
                        DocumentFormat.OpenXml.Drawing.Charts.OrientationValues.MinMax)
                }),
                new AxisPosition() { Val = new EnumValue<AxisPositionValues>(AxisPositionValues.Left) },
                new MajorGridlines(),
                new DocumentFormat.OpenXml.Drawing.Charts.NumberingFormat()
                {
                    FormatCode = new StringValue("General"),
                    SourceLinked = new BooleanValue(true)

                }, new TickLabelPosition()
                {
                    Val = new EnumValue<TickLabelPositionValues>
                        (TickLabelPositionValues.NextTo)
                }, new CrossingAxis() { Val = new UInt32Value(48650112U) },
                new Crosses() { Val = new EnumValue<CrossesValues>(CrossesValues.AutoZero) },
                new CrossBetween() { Val = new EnumValue<CrossBetweenValues>(CrossBetweenValues.Between) }));

            // Save the chart part.
            chartPart.ChartSpace.Save();

            // Position the chart on the worksheet using a TwoCellAnchor object.
            drawingsPart.WorksheetDrawing = new WorksheetDrawing();
            TwoCellAnchor twoCellAnchor = drawingsPart.WorksheetDrawing.AppendChild<TwoCellAnchor>(new TwoCellAnchor());
            twoCellAnchor.Append(new DocumentFormat.OpenXml.Drawing.Spreadsheet.FromMarker(new ColumnId("0"),
                new ColumnOffset("581025"),
                new RowId("3"),
                new RowOffset("114300")));
            twoCellAnchor.Append(new DocumentFormat.OpenXml.Drawing.Spreadsheet.ToMarker(new ColumnId("17"),
                new ColumnOffset("276225"),
                new RowId("32"),
                new RowOffset("0")));

            // Append a GraphicFrame to the TwoCellAnchor object.
            DocumentFormat.OpenXml.Drawing.Spreadsheet.GraphicFrame graphicFrame =
                twoCellAnchor.AppendChild<DocumentFormat.OpenXml.
            Drawing.Spreadsheet.GraphicFrame>(new DocumentFormat.OpenXml.Drawing.
            Spreadsheet.GraphicFrame());
            graphicFrame.Macro = "";

            graphicFrame.Append(new DocumentFormat.OpenXml.Drawing.Spreadsheet.NonVisualGraphicFrameProperties(
                new DocumentFormat.OpenXml.Drawing.Spreadsheet.NonVisualDrawingProperties() { Id = new UInt32Value(2u), Name = "Chart 1" },
                new DocumentFormat.OpenXml.Drawing.Spreadsheet.NonVisualGraphicFrameDrawingProperties()));

            graphicFrame.Append(new Transform(new Offset() { X = 0L, Y = 0L },
                                                                    new Extents() { Cx = 0L, Cy = 0L }));

            graphicFrame.Append(new Graphic(new GraphicData(new ChartReference() { Id = drawingsPart.GetIdOfPart(chartPart) }) { Uri = "http://schemas.openxmlformats.org/drawingml/2006/chart" }));

            twoCellAnchor.Append(new ClientData());

            // Save the WorksheetDrawing object.
            drawingsPart.WorksheetDrawing.Save();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T08:29:41.183

放置在类别轴构造器中

```
new C.Delete { Val = false },

new C.TextProperties(new BodyProperties { Rotation = -5400000, Vertical = TextVerticalValues.Horizontal },
                    new ListStyle(),
                    new Paragraph(new ParagraphProperties(new DefaultRunProperties(), new EndParagraphRunProperties { Language = "en-US" }))), 
```

# .net - Entity Framework Code First 中的 SQL“时间”类型

> ID：12186044
> 
> 赞同：38
> 
> 时间：2012-08-29T20:32:25.520
> 
> 标签：.net, entity-framework, entity-framework-4, ef-code-first, code-first

我正在尝试使用 Entity Framework Code First 在表中创建一个“时间（7）”列。这是我的实体：

```
public class ShiftDetail
{
    public long Id { get; set; }

    [Required]
    public int DayOfWeek { get; set; }

    [Required]
    [Column(TypeName="time")]
    public DateTime StartTime { get; set; }

    [Required]
    [Column(TypeName = "time")]
    public DateTime EndTime { get; set; }

    public long ShiftId { get; set; }
    public virtual Shift Shift { get; set; }
} 
```

如您所见，我正在尝试将 StartTime 和 EndTime 列的数据库类型设置为“时间”，但出现此错误：

> (112,12)：错误 2019：指定的成员映射无效。'ShiftDetail' 类型中成员 'StartTime' 的类型 'Edm.DateTime[Nullable=False,DefaultValue=,Precision=]' 与 'SqlServer.time[Nullable=False,DefaultValue=,Precision=7]' 不兼容'CodeFirstDatabaseSchema.ShiftDetail' 类型中的成员 'StartTime'。

我也尝试过 TypeName="time(7)" 但我得到了另一个错误：

> (104,6)：错误 0040：类型 time(7) 没有使用命名空间或别名进行限定。只有原始类型可以在没有限定的情况下使用。

如何首先使用代码创建时间列？（最好没有流畅的 API）

提前致谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-29T20:42:14.037

如果要`Time`在数据库中使用类型，则必须`TimeSpan`在应用程序中使用 24 小时循环。`DateTime`不是时间的表示。

# ios - 如何在后台渲染 CALayer

> ID：12186046
> 
> 赞同：8
> 
> 时间：2012-08-29T20:32:28.933
> 
> 标签：ios, multithreading, core-graphics, calayer, copy-constructor

我需要从我的应用程序中保存屏幕截图，所以我设置了这样的代码，它可以工作：

```
- (void)renderScreen {
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];

    CGSize outputSize = keyWindow.bounds.size;
    UIGraphicsBeginImageContext(outputSize);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSaveGState(context);
    CALayer *layer = [keyWindow layer];
    [layer renderInContext:context];
    CGContextRestoreGState(context);

    UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // now save the screen image, etc...
} 
```

但是，当屏幕图像变得复杂（大量视图）时，renderInContext 在 iPad 3 上可能需要 0.8 秒，并且在此期间用户界面会锁定，这会干扰一些其他功能。所以我将渲染移到后台线程，如下所示：

```
- (void)renderScreen {
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    CALayer *layer = [keyWindow layer];
    [self performSelectorInBackground:@selector(renderLayer:) withObject:layer];
}

- (void)renderLayer:(CALayer *)layer {
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];

    CGSize outputSize = keyWindow.bounds.size;
    UIGraphicsBeginImageContext(outputSize);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSaveGState(context);
    [layer renderInContext:context];
    CGContextRestoreGState(context);

    UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // now save the screen image, etc...
} 
```

这允许界面再次顺利运行，但偶尔会导致在 renderInContext 行上出现 EXC_BAD_ACCESS 崩溃。我尝试首先检查 layer!=nil 和 [layer respondsToSelector:@selector(renderInContext:)]，这样我可以避免崩溃，但两个条件总是返回 true。

然后我阅读[了这个 SO 评论](https://stackoverflow.com/questions/11253972/ipad-3-device-crash-with-renderincontext#comment14791808_11254049)，指出图层可能在后台操作运行之前发生变异，并建议将图层的副本发送到后台操作。[这个 SO 答案](https://stackoverflow.com/a/695540/462162)和[这个](https://stackoverflow.com/a/962119/462162)答案让我开始了，我最终得到了这个类别来向 CALayer 添加一个复制方法：

```
#import "QuartzCore/CALayer.h"

@interface CALayer (CALayerCopyable)
- (id)copy;
@end

@implementation CALayer (CALayerCopyable)

- (id)copy {
    CALayer *newLayer = [CALayer layer];
    newLayer.actions = [self.actions copy];
    newLayer.anchorPoint = self.anchorPoint;
    newLayer.anchorPointZ = self.anchorPointZ;
    newLayer.backgroundColor = self.backgroundColor;
    //newLayer.backgroundFilters = [self.backgroundFilters copy]; // iOS 5+
    newLayer.borderColor = self.borderColor;
    newLayer.borderWidth = self.borderWidth;
    newLayer.bounds = self.bounds;
    //newLayer.compositingFilter = self.compositingFilter; // iOS 5+
    newLayer.contents = [self.contents copy];
    newLayer.contentsCenter = self.contentsCenter;
    newLayer.contentsGravity = [self.contentsGravity copy];
    newLayer.contentsRect = self.contentsRect;
    //newLayer.contentsScale = self.contentsScale; // iOS 4+
    newLayer.cornerRadius = self.cornerRadius;
    newLayer.delegate = self.delegate;
    newLayer.doubleSided = self.doubleSided;
    newLayer.edgeAntialiasingMask = self.edgeAntialiasingMask;
    //newLayer.filters = [self.filters copy]; // iOS 5+
    newLayer.frame = self.frame;
    newLayer.geometryFlipped = self.geometryFlipped;
    newLayer.hidden = self.hidden;
    newLayer.magnificationFilter = [self.magnificationFilter copy];
    newLayer.mask = [self.mask copy]; // property is another CALayer
    newLayer.masksToBounds = self.masksToBounds;
    newLayer.minificationFilter = [self.minificationFilter copy];
    newLayer.minificationFilterBias = self.minificationFilterBias;
    newLayer.name = [self.name copy];
    newLayer.needsDisplayOnBoundsChange = self.needsDisplayOnBoundsChange;
    newLayer.opacity = self.opacity;
    newLayer.opaque = self.opaque;
    newLayer.position = self.position;
    newLayer.rasterizationScale = self.rasterizationScale;
    newLayer.shadowColor = self.shadowColor;
    newLayer.shadowOffset = self.shadowOffset;
    newLayer.shadowOpacity = self.shadowOpacity;
    newLayer.shadowPath = self.shadowPath;
    newLayer.shadowRadius = self.shadowRadius;
    newLayer.shouldRasterize = self.shouldRasterize;
    newLayer.style = [self.style copy];
    //newLayer.sublayers = [self.sublayers copy]; // this line makes the screen go blank
    newLayer.sublayerTransform = self.sublayerTransform;
    //newLayer.superlayer = self.superlayer; // read-only
    newLayer.transform = self.transform;
    //newLayer.visibleRect = self.visibleRect; // read-only
    newLayer.zPosition = self.zPosition;
    return newLayer;
}

@end 
```

然后我更新了 renderScreen 以将图层的副本发送到 renderLayer：

```
- (void)renderScreen {
    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    CALayer *layer = [keyWindow layer];
    CALayer *layerCopy = [layer copy];
    [self performSelectorInBackground:@selector(renderLayer:) withObject:layerCopy];
} 
```

当我运行这段代码时，所有的屏幕图像都是纯白色的。显然我的复制方法不正确。那么有人可以帮助我解决以下任何可能的解决方案吗？

1.  如何为CALayer编写一个真正有效的复制方法？
2.  如何检查传递到后台进程的图层是否是 renderInContext 的有效目标？
3.  还有其他方法可以在不锁定界面的情况下渲染复杂图层吗？

更新：我根据 Rob Napier 使用 initWithLayer 的建议重写了我的 CALayerCopyable 类别。简单地复制图层仍然给我一个纯白色的输出，所以我添加了一个递归复制所有子图层的方法。但是，我仍然得到纯白色输出：

```
#import "QuartzCore/CALayer.h"

@interface CALayer (CALayerCopyable)
- (id)copy;
- (NSArray *)copySublayers:(NSArray *)sublayers;
@end

@implementation CALayer (CALayerCopyable)

- (id)copy {
    CALayer *newLayer = [[CALayer alloc] initWithLayer:self];
    newLayer.sublayers = [self copySublayers:self.sublayers];
    return newLayer;
}

- (NSArray *)copySublayers:(NSArray *)sublayers {
    NSMutableArray *newSublayers = [NSMutableArray arrayWithCapacity:[sublayers count]];
    for (CALayer *sublayer in sublayers) {
        [newSublayers addObject:[sublayer copy]];
    }
    return [NSArray arrayWithArray:newSublayers];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:43:18.787

为此，我将使用`initWithLayer:`而不是创建您自己的复制方法。`initWithLayer:`明确用于创建“图层的影子副本，例如，用于presentationLayer 方法。”

您可能还需要创建子图层的副本。我不记得`initWithLayer:`这是否适合你。但是`initWithLayer:`核心动画是如何工作的，所以它针对这样的问题进行了优化。

# ruby-on-rails-3 - rails：当 API 不支持服务帐户模型时，谷歌联盟网络 API oauth

> ID：12186047
> 
> 赞同：0
> 
> 时间：2012-08-29T20:32:34.793
> 
> 标签：ruby-on-rails-3, api, oauth, google-api, oauth-2.0

更新 1：随着我深入研究，这实际上与 Rails 没有任何关系，更多的是关于当我们调用的 API*不支持时如何让服务器使用 Google 提供的凭据访问我们的帐户的问题服务模式*

我有一个服务器应用程序需要从 Rails 连接到 Google API。我可以使用 google-api-ruby-client gem 成功通过 OAuth2 进行身份验证，并使其他 API 正常工作。有几个使用 gem 的示例，但大多数都假设您希望用户在 Web 环境中进行身份验证。其他人支持谷歌所谓的“服务模型”，它实际上是应用程序验证自己。我也有这个工作。

但是，我查询的特定 API 是 Google Affiliate Network (GAN)，它不支持服务帐户模型。特别是，我需要一个服务器能够在没有任何用户交互的情况下使用 OAuth2 进行身份验证。我已经在其他几种情况下使用 OAuth 完成了这项工作，但在这种情况下很难让它发挥作用。

有人知道 GAN 的 Rails 代码吗？

更新 2：我正在[这个关于 API 授权的谷歌文档中](https://developers.google.com/accounts/docs/OAuth2)搜索不需要用户交互的策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:44:00.073

我找到了一个可行的解决方案——它使用 Google 的“已安装应用程序”方法，它需要一些手动设置，但在其他方面是一个可行的解决方案。

[https://gist.github.com/3543368](https://gist.github.com/3543368)

# asp.net-mvc-3 - 应用程序启动时如何运行 Update-Database？

> ID：12186050
> 
> 赞同：2
> 
> 时间：2012-08-29T20:32:36.467
> 
> 标签：asp.net-mvc-3, entity-framework, database-migration

嗨，这很简单，我只需要知道如何在我的应用程序启动时运行 Update-DataBase 命令。我正在使用 EF 5.0 Code First 迁移处理 MVC3 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:42:21.317

您可以使用[MigrateDatabaseToLatestVersion](http://msdn.microsoft.com/en-us/library/hh829293%28v=vs.103%29.aspx)。

把它放在你的 Global.Asax 中，在 Application_Start 中：

```
Database.SetInitializer<YourContext>(
    new MigrateDatabaseToLatestVersion<YourContext, YourMigrationsConfig>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-02T00:44:43.587

我知道我是一个迟到的人，但我尝试了这个并且它工作得很好，如果它不存在，它可以为你创建数据库。把这个放在你的`Global.asax`

```
 var migration =  new MigrateDatabaseToLatestVersion<YourConfig,
            YourMigrationsConfig>();
        var context = new YourContext();
        migration.InitializeDatabase(context); 
```

# html - h3 未向右对齐

> ID：12186051
> 
> 赞同：2
> 
> 时间：2012-08-29T20:32:38.247
> 
> 标签：html, css

我的 css 在 mo' 上有点乱，问题区域应用了 2 个样式表。

我有一个标题，无论我改变什么，我都无法向右对齐，我真的很难过。我可以通过一些帮助来解决问题。

如果您要访问[http://c3it.webuda.com/news_and_events.php](http://c3it.webuda.com/news_and_events.php)和 ctrl+f 以*“查看其他事件”*，您可以看到有问题的标题顽固地保持左对齐，当我“检查元素”时谷歌浏览器它说该属性`text-align: right`是活动的，但没有区别。

第一个应用的样式表就是[这个。](http://pastebin.com/wYFGqMKw)

我使用的页面特定样式表[在这里。](http://pastebin.com/WRVy5kzK)

我真的被困住了，非常感谢任何花时间看的人。下面你会找到具体的`<h3>`样式，但我只能假设在我没有注意到的地方流行一些其他样式。

[html](http://pastebin.com/xCA3C2sB)

```
 <h3 id="expand_other_events">See other events..</h3> 
```

**从样式表 1：**

```
#content h1, #content h2, #content h3{
        color: #2956B2;
        text-align: left;
        font-weight: normal;
        font-family: "Ropa Sans", MyriadPro-Regular, 'Myriad Pro Regular', MyriadPro, 'Myriad Pro', Helvetica, Arial, sans-serif;
    }
 #content h3{
        padding: 0.3em 0;
        margin-left: 1.2em;
        display: inline;
        cursor: hand;
        cursor: pointer;
        font: bold 1em 'Rokkitt', serif;
        border-bottom: 1px solid #2956B2;

    } 
```

**来自样式表 2：**

```
#news_and_events h3{
    margin: 0;
    padding:0;
}
#news_and_events  p.date,
#news_and_events h3{
    text-align: right;
    font-size: 0.8em;
    color:#aaa;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:34:38.267

这是因为 h3 仅与显示的一样宽，因此右/左对齐的文本仍然填充相同的边界。

添加一个`float:right;`，它一直向右，我猜你想要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:39:02.253

你已经`display: inline`设置好了，所以它不会跨越那个 div 的整个宽度。它是右对齐的，但`h3`仅与文本一样宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:39:34.283

您已将 h3 设置为内联，您需要将其更改为：

```
display:block; 
```

# java - 带键盘的 Java ListSelectionListener 接口

> ID：12186054
> 
> 赞同：8
> 
> 时间：2012-08-29T20:32:51.390
> 
> 标签：java, swing, jtable, listselectionlistener

我已经实现了 ListSelectionListener ，如下所示，因此在选择第一个表中的特定行后，第二个表会相应更新。

```
class SelectionListener implements ListSelectionListener {

    public SelectionListener(){}

    @Override
    public void valueChanged(ListSelectionEvent e) 
    {
        if (e.getSource() == myTrumpsAndMessages.jTable1.getSelectionModel() 
            && myTrumpsAndMessages.jTable1.getRowSelectionAllowed()
            && e.getValueIsAdjusting()) 
        {
          int selected = myTrumpsAndMessages.jTable1.getSelectedRow();
            clearjTable(jTable4);
            showSubscribers(selected);
        }
    }

} 
```

有没有办法不仅在鼠标选择时调用监听器，而且在从键盘进行选择时调用监听器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T08:58:47.577

异常体验的原因 - 通过键盘选择时没有通知 - 是 valueIsAdjusting 的细微不同设置，用于键盘与鼠标触发的选择事件：

*   键盘触发选择（即使使用修饰符）仅触发一次（调整 == false）
*   鼠标触发的选择总是触发两次（第一次为真，第二次为假）

这一事实与不寻常的逻辑相结合（@Robin 发现，对他 +1 :-)

```
if (e.getSource() == myTrumpsAndMessages.jTable1.getSelectionModel() 
        && myTrumpsAndMessages.jTable1.getRowSelectionAllowed()
        // typo/misunderstanding or feature? doing stuff only when adjusting 
        && e.getValueIsAdjusting()) 
```

（仅在选择*正在*调整时才做出反应）导致看不到键盘触发的更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T08:18:27.923

> 有没有办法不仅在鼠标选择时调用监听器，而且在从键盘进行选择时调用监听器？

侦听器将被触发，与选择更改的来源无关。所以是的，这是完全可能的，甚至是默认行为。所以没有什么特别的事情可以让这个工作。

查看您的听众的代码，我建议将其重写为

```
class SelectionListener implements ListSelectionListener {
  public SelectionListener(){}
  @Override
  public void valueChanged(ListSelectionEvent e){
    if ( e.getValueIsAdjusting() ){
       return;
    }
    if (e.getSource() == myTrumpsAndMessages.jTable1.getSelectionModel() && 
        myTrumpsAndMessages.jTable1.getRowSelectionAllowed() ) {
      int selected = myTrumpsAndMessages.jTable1.getSelectedRow();
      clearjTable(jTable4);
      showSubscribers(selected);
    }
  }
} 
```

`getValueIsAdjusting()`请注意返回时方法的快速中断，`true`因为这是您在大多数情况下想要的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:38:21.880

我刚刚尝试过`ListSelectionListener`，并且`valueChanged()`事件实际上也是在键盘选择更改时触发的。请参阅下面的示例：

```
list.addListSelectionListener(new ListSelectionListener() {
  public void valueChanged(ListSelectionEvent e) {
    System.out.println(list.getSelectedValue());
  }
}); 
```

# c# - 将 VB.NET 方法调用转换为 C#

> ID：12186057
> 
> 赞同：-1
> 
> 时间：2012-08-29T20:33:01.850
> 
> 标签：c#, vb.net, web-services

我似乎不知道如何正确地将以下 VB.NET 代码转换为 C#，我将在其中声明一个 Web 服务对象，然后最终使用一个函数来返回我需要的数据。我在我的项目中创建了网络服务：http: [//mmm-acctgdev.abc.com/Central_Locating/Service/Locating.asmx](http://mmm-acctgdev.abc.com/Central_Locating/Service/Locating.asmx)

VB.NET 网络服务声明：

```
Dim oFind As New com.abc.mmm_acctgdev.Locating

//*Need to convert this into something a C# form can use 
```

VB函数调用：

```
retXML = oFind.GetLocationByNum(txtFNum.Text)

//*need this call in c# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:36:05.750

```
var oFind = new com.abc.mmm_acctgdev.Locating();
var retXML = oFind.GetLocationByNum(txtFNum.Text); 
```

# linux - 由于错误的分页请求导致内核恐慌

> ID：12186059
> 
> 赞同：0
> 
> 时间：2012-08-29T20:33:13.153
> 
> 标签：linux, crash, linux-kernel, paging

内核恐慌的原因可能是什么

```
 Unable to handle kernel paging request at virtual address 0x00000024 epc=0x9caf9876 ra=0x9432adfc 
```

1.  地址尚未动态分配
2.  页表中没有对应的虚拟地址条目

还有什么？

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:13:04.690

> 虚拟地址 0x00000024

当然这是一个 NULL 指针取消引用？访问`p->field`, where`p == NULL`和`offsetof(typeof(p), field) == 0x24`.

编辑：啊，注意这并不能解释完全的恐慌。最常见的是，NULL 指针取消引用会取消一项任务，记录“OOPS”和一个 bracktrace，然后让您尝试关闭。带着恐慌，你所能做的就是按下硬重启按钮。

如果您在 MM 中有一个 NULL 指针取消引用，那么这可能是一个完全恐慌的原因。我认为周围的消息会让您确定是否是这种情况。

# android - 在列表视图中编辑文本的 Android 搜索无法正常工作

> ID：12186060
> 
> 赞同：0
> 
> 时间：2012-08-29T20:33:16.247
> 
> 标签：android, list, search, android-edittext

我正在尝试在列表视图顶部实现编辑文本以在我的列表中进行搜索。

使用“编辑文本”进行的搜索效果不佳，他可以想到一些客户名称，而其他人则不能。请帮帮我，下面是代码

```
public class MainActivity extends Activity {

private List<Cliente> listaClientes = null;
public ClienteAdapter adapter;
private ArrayList<Cliente> arraycli   = new ArrayList<Cliente>();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     
    ListView lista = (ListView) findViewById(R.id.listView1);
    arraycli.add(new Cliente("luis", R.drawable.ic_action_search));
    arraycli.add(new Cliente("aaaaa", R.drawable.ic_launcher));
    arraycli.add(new Cliente("bbbb", R.drawable.ic_launcher));
    arraycli.add(new Cliente("ccccc", R.drawable.ic_launcher));
    arraycli.add(new Cliente("aaaa", R.drawable.ic_launcher));
    arraycli.add(new Cliente("testeeeeee", R.drawable.ic_launcher)); 
    final ClienteAdapter adapter = new ClienteAdapter(this, R.id.listView1, arraycli);
    lista.setAdapter(adapter);  
    EditText procurar = (EditText) findViewById(R.id.edprocurar);
    procurar.addTextChangedListener(new TextWatcher() {     
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            adapter.getFilter().filter(s.toString()); 

        }           
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }           
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });

} 
```

}

我的自定义适配器

```
ublic class ClienteAdapter extends ArrayAdapter<Cliente>   {    
 public ArrayList<Cliente> original; 
 public ArrayList<Cliente> fitems;   
 private Filter filter;      

 public ClienteAdapter(Context context, int textViewResourceId,
            ArrayList<Cliente> items) {
        super(context, textViewResourceId, items);
        this.original = new ArrayList<Cliente>(items);
        this.fitems = new ArrayList<Cliente>(items);

    } 
private class ViewHolder {
    public TextView ClienteNome;    
    public ImageView ClienteImg;
}

public void addItem(final Cliente item)
{       
    this.original.add(item);
}
public View getView(int position, View convertView, ViewGroup parent)
{
    View v  = convertView;
    ViewHolder holder;
      if (v == null) 
      { 
          LayoutInflater vi = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
          v = vi.inflate(R.layout.clienteitem, null);
          holder = new ViewHolder();
          holder.ClienteNome = (TextView) v.findViewById(R.id.clinome);
          holder.ClienteImg = (ImageView) v.findViewById(R.id.imagem_plista);
          v.setTag(holder);
      }
      else
          holder = (ViewHolder)v.getTag();        
      final Cliente cliente  = original.get(position);
      if (cliente != null) {
            holder.ClienteNome.setText(cliente.getNomeCliente());               
            holder.ClienteImg.setImageResource(cliente.getImagemCliente());
        }                 
  return v;
}   
public Filter getFilter()
{
     if (filter == null) 
          filter = new ClassClienteFiltro();     
     return filter; 
}   
private class ClassClienteFiltro extends Filter
{
    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults results = new FilterResults(); 
        String prefix = constraint.toString().toLowerCase(); 

         if (prefix == null || prefix.length() == 0) 
         {
             ArrayList<Cliente> list = new ArrayList<Cliente>(original); 
             results.values = list;
             results.count = list.size(); 
         }
         else
         {
             final ArrayList<Cliente> list = new ArrayList<Cliente>(original); 
             final ArrayList<Cliente> nlist = new ArrayList<Cliente>(); 
             int count = list.size();

             for (int i=0; i<count; i++) 
             {
                 final Cliente clienteclass = list.get(i);
                 final String value = clienteclass.getNomeCliente().toLowerCase();

                 if (value.startsWith(prefix)) 
                 {
                     nlist.add(clienteclass); 
                 }
             }
             results.values = nlist; 
             results.count = nlist.size(); 
         }
        return results;
    }
    @SuppressWarnings("unchecked") 
    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {
        fitems = (ArrayList<Cliente>)results.values;
         clear(); 
         int count = fitems.size(); 
         for (int i=0; i<count; i++) 
         {
             Cliente cliente = (Cliente)fitems.get(i);
             add(cliente); 
         }  
    }   
} 
```

}

我在论坛中看到了很多例子，但遗憾的是无法使其 100% 工作。请帮我。已经感谢收听

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:50:49.103

我在我的应用程序中做了类似的事情，但不是使用适配器进行搜索，而是在 onTextChanged 方法中执行搜索逻辑。

这可以通过根据用户键入的内容创建辅助 ArrayList 来实现，然后使用更新的信息创建辅助适配器。

每当用户键入时，请执行以下操作：

A. 清除辅助 ArrayList。

B. 浏览 Primary ArrayList 并搜索与用户类型匹配的名称。

C. 将这些项目添加到您的辅助 ArrayList。

D. 使用您的辅助 ArrayList 创建一个新适配器。

E. 将您的 ListView 的适配器设置为新的。

```
 arraycliSort = new ArrayList<Cliente>(); //secondary ArrayList

    yourEditText.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count){                 

            textlength = yourEditText.getText().length();
            arraycliSort.clear(); //A

            for (int i = 0; i < arraycli.size(); i++) { //B
                if (textlength <= arraycli.get(i).name.length()) {
                    if (yourEditText.getText().toString().equalsIgnoreCase((String) arraycli.get(i).name.subSequence(0,textlength)))
                    {
                        arraycliSort.add(arraycli.get(i)); //C
                    }
                }
            }

            adapter = new ClientAdapter(this, R.id.listView1, arraycli); //D
            yourListView.setAdapter(adapter); //E
        }
    }); 
```

在我的示例中，我不确定您如何访问要搜索的名称，因此我使用了 arraycli.get(i).name，您必须根据需要进行调整。

希望这能有所帮助。

# php - 未加载 PHP 5.3 的 MSSQL.so (CentOS 5.8)

> ID：12186063
> 
> 赞同：1
> 
> 时间：2012-08-29T20:33:37.783
> 
> 标签：php, sql-server, makefile, centos5, freetds

我正在尝试在运行 CentOS 5.8 和 PHP 5.3.5 的服务器上安装 PHP 的 mssql 模块。我能够让它在运行 CentOS 5.2 和 PHP 5.2.6 的开发服务器上运行，并且一切似乎都匹配（安装了 FreeTDS，模块位于模块文件夹中，extension=mssql.so 添加到 php.ini）。但是，插件不会加载；没有出现在 phpinfo() 中，我在测试脚本上得到一个未定义的函数错误。

还要注意： phpinfo() 在 configure 命令下列出了“--with-mssql=shared,/usr”，这让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:51:27.753

解决了。不是 100% 的修复是什么，但我很确定这就是修复它的原因。

首先，它可能没有帮助我试图从 php 5.3.16 而不是 5.3.6 的副本进行编译。即使那样，我在尝试编译它时也遇到了错误。我找到了一个修复程序，说`php_mssql.h`在它被 phpized 后从文件夹中删除这一行：

```
typedef unsigned char  *LPBYTE; 
```

我当时正在做`make && make install`，它现在加载没有错误。

# wpf - 如何在 WPF 中按行绑定 DataGrid.HighlightBrush

> ID：12186066
> 
> 赞同：1
> 
> 时间：2012-08-29T20:33:58.107
> 
> 标签：wpf, binding

我有一个数据网格，行的颜色不同，具体取决于其中记录的状态（有效为白色，问题为金色，禁止为红色）。

The problem is when the row is selected they all turn a uniform color and it becomes impossible to determine the status anymore. 我想以与此类似的方式绑定突出显示颜色：

```
 <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Setter Property="Background" Value="{Binding Member, Converter={StaticResource MemberBackgroundConverter}}" />
                    <Setter Property="HighlightBrushKey" Value="{Binding Member, Converter={StaticResource MemberHighlightConverter}}" />                        
                </Style>
            </DataGrid.RowStyle> 
```

上面的第一个 Setter 有效。有没有办法让第二个工作？有什么方法可以设置每行的 HighlightBrush 吗？

编辑：以下是我目前正在工作的内容。我并不是说这是最好的方法，只是这种方法有效。

XAML：

```
<DataGrid.Resources>
    <SolidColorBrush x:Key="SelectionBackgroundColorKey" />

    <LinearGradientBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="{Binding Source={StaticResource SelectionBackgroundColorKey}, Path=Color}" Offset="0.0" />
        <GradientStop Color="White" Offset="0.3" />
        <GradientStop Color="{Binding Source={StaticResource SelectionBackgroundColorKey}, Path=Color}" Offset="1.0" />
    </LinearGradientBrush>

    <SolidColorBrush x:Key="SelectionTextColorKey" Color="Black" />
    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="{Binding Source={StaticResource SelectionTextColorKey}, Path=Color}" />
</DataGrid.Resources>

<DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
        <Setter Property="Background" Value="{Binding BindsDirectlyToSource=True, Converter={StaticResource ReservationBackgroundConverter}}" />
        <Setter Property="Foreground" Value="{Binding IsNew, Converter={StaticResource IsNewForegroundConverter}}" />
    </Style>
</DataGrid.RowStyle> 
```

代码：

```
 private void DataGridReservationsSelectionChanged(object argSender, SelectionChangedEventArgs argEvtArgs)
    {
        Reservation LocalReservation;

        ((SolidColorBrush) dataGridReservations.Resources["SelectionBackgroundColorKey"]).Color = Colors.SlateGray;
        ((SolidColorBrush) dataGridReservations.Resources["SelectionTextColorKey"]).Color = Colors.Black;

        LocalReservation = dataGridReservations.SelectedItem as Reservation;

        if (LocalReservation == null)
        {
            return;
        }

        if(LocalReservation.IsArrived)
        {
            ((SolidColorBrush)dataGridReservations.Resources["SelectionBackgroundColorKey"]).Color = Colors.ForestGreen;
            ((SolidColorBrush)dataGridReservations.Resources["SelectionTextColorKey"]).Color = Colors.Black;
            return;
        }
        //Is this Reservation a Problem?
        if (LocalReservation.Member.IsProblem)
        {
            ((SolidColorBrush) dataGridReservations.Resources["SelectionBackgroundColorKey"]).Color = Colors.Goldenrod;
            ((SolidColorBrush) dataGridReservations.Resources["SelectionTextColorKey"]).Color = Colors.Black;
            return;
        }

        //Is this Reservation Banned?
        if (LocalReservation.Member.IsBanned)
        {
            ((SolidColorBrush) dataGridReservations.Resources["SelectionBackgroundColorKey"]).Color = Colors.Firebrick;
            ((SolidColorBrush) dataGridReservations.Resources["SelectionTextColorKey"]).Color = Colors.Black;
            return;
        }
    } 
```

这种方法允许我为每个独立行设置未选择的颜色，并为每个独立行设置选定的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:47:57.433

如果使用 DataGridTextColumn，您可以指定 ElementStyle：

```
<DataGrid.Resources>
    <Style x:Key="MemberCellStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="Background" Value="{Binding Member, Converter={StaticResource MemberBackgroundConverter}}" />
    </Style>
</DataGrid.Resources> 
```

...

```
 <DataGridTextColumn ... ElementStyle="{StaticResource MemberCellStyle}"> 
```

无论是否选择了行，背景颜色都将遵守绑定。

更新：

您可以使用 MultiDataTrigger 并创建 2 个条件（1 个用于您的状态，1 个用于该行是否被选中）。这是一个在代码中创建样式的示例（针对选定和未选定条件），但如果需要，它应该很容易转换为 XAML：

```
Style cellStyle = new Style( typeof( DataGridCell ) );
MultiDataTrigger triggerNotSelected = new MultiDataTrigger();
Condition dataCondition = new Condition( new Binding( "[STATUS]", [STATUSVALUE] );
Condition rowNotSelectedCondition = new Condition();
rowNotSelectedCondition.Binding = new Binding
     {
          Path = new PropertyPath( DataGridRow.IsSelectedProperty ),
          RelativeSource = new RelativeSource( RelativeSourceMode.FindAncestor, typeof( DataGridRow ), 1 )
     };
rowNotSelectedCondition.Value = false;

triggerNotSelected.Conditions.Add( dataCondition );
triggerNotSelected.Conditions.Add( rowNotSelectedCondition );
triggerNotSelected.Setters.Add( new Setter( Control.BackgroundProperty, Brushes.Gold ) );

MultiDataTrigger triggerSelected = new MultiDataTrigger();
Condition rowSelectedCondition = new Condition();
rowSelectedCondition.Binding = new Binding
    {
         Path = new PropertyPath( DataGridRow.IsSelectedProperty ),
         RelativeSource = new RelativeSource( RelativeSourceMode.FindAncestor, typeof( DataGridRow ), 1 )
    };
rowSelectedCondition.Value = true;

triggerSelected.Conditions.Add( dataCondition );
triggerSelected.Conditions.Add( rowSelectedCondition );
triggerSelected.Setters.Add( new Setter( Control.BackgroundProperty, Brushes.Khaki ) );

cellStyle.Triggers.Add( triggerNotSelected );
cellStyle.Triggers.Add( triggerSelected ); 
```

# android - 创建“ChristopheVersieux / HoloEverywhere”Seekbar

> ID：12186071
> 
> 赞同：0
> 
> 时间：2012-08-29T20:34:23.343
> 
> 标签：android

我遵循 [https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)中的示例 来创建如下图所示的 Seekbar。但是，和我的初级水平相比，它太高级了，

如果有人能告诉我如何做到这一点，我将不胜感激，我只需要相关代码吗？

![在此处输入图像描述](../Images/b96404239d3a784ed04af89bdb623317.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:21:58.523

我明白了，我错过了下面的 android:thumb：

```
<SeekBar
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/seekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/topBar"
            android:layout_marginTop="26dip"
            android:paddingLeft="10dip"
            android:paddingRight="10dip"
            android:paddingTop="10dip"
            android:max="10000"
            style="?android:attr/progressBarStyleHorizontal" 
             android:progressDrawable="@drawable/scrubber_progress_horizontal_holo_light"

              android:thumb="@drawable/scrubber_control_selector_holo" >
        </SeekBar> 
```

在可绘制中：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/scrubber_control_disabled_holo" android:state_enabled="false"/>
    <item android:drawable="@drawable/scrubber_control_pressed_holo" android:state_pressed="true"/>
    <item android:drawable="@drawable/scrubber_control_focused_holo" android:state_selected="true"/>
     <item android:drawable="@drawable/scrubber_control_normal_holo"/>

</selector> 
```

和：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@android:id/background"
        android:drawable="@drawable/scrubber_track_holo_light"/>
    <item android:id="@android:id/secondaryProgress">
        <scale
            android:drawable="@drawable/scrubber_secondary_holo"
            android:scaleWidth="100%" />
      </item>
    <item android:id="@android:id/progress">
        <scale
            android:drawable="@drawable/scrubber_primary_holo"
            android:scaleWidth="100%" />
    </item>

</layer-list> 
```

当然，您还需要那里的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:19:26.807

为了使用主题，您的 res/values 文件夹中必须有一个“themes.xml”文件，其中包含以下代码（假设库已导入...）：

```
<style name="YourTheme" parent="Theme.HoloEverywhereLight">
    <!-- You can customize the theme here! -->
</style> 
```

在应用程序的 AndroidManifest 文件中，应用主题：

```
<application
    android:icon="@drawable/app_launch_icon"
    android:label="@string/app_name"
    android:theme="@style/YourTheme" > 
```

最后在您的活动的 main.xml 布局中，在某处添加搜索栏，如下所示：

```
<SeekBar
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:progress="75" /> 
```

# facebook - 想要验证推荐计数来自 FQL 查询中的 like_count。那么，total_count 返回所有分享、喜欢和推荐？

> ID：12186072
> 
> 赞同：0
> 
> 时间：2012-08-29T20:34:23.510
> 
> 标签：facebook, share, facebook-like, facebook-fql, recommendation-engine

有人可以确认我可以通过 FQL 查询中的 like_count 提取推荐 URL 的用户数量吗？我想确认 total_count 返回所有分享、喜欢和推荐。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:27:03.853

您可以使用：

[https://graph.facebook.com/URL_ENCODED_LINK](https://graph.facebook.com/URL_ENCODED_LINK)

至少，它应该返回：

```
{
  "id": LINK, 
  "shares": COUNT_SHARES
} 
```

facebook.stackoverflow.com 的示例：[https ://graph.facebook.com/http%3A%2F%2Ffacebook.stackoverflow.com](https://graph.facebook.com/http%3A%2F%2Ffacebook.stackoverflow.com)

结果：

```
{
  "id": "http://facebook.stackoverflow.com", 
  "shares": 668
} 
```

更新：刚刚注意到您想使用 FQL 查询。如果上述方法对您不起作用，我将查看 FQL 表，应该有一些 AFAIK :)

# asp.net - 调用自定义 MembershipProvider 而不强制转换 Membership.Provider

> ID：12186078
> 
> 赞同：0
> 
> 时间：2012-08-29T20:35:01.113
> 
> 标签：asp.net, asp.net-membership, membership-provider, sqlmembershipprovider, custom-membershipprovider

有没有办法调用我在代码中实现的自定义 MembershipProvider 而不必每次都将 Membership 类转换为我的自定义提供程序？例如，我像这样设置我的 web.config：

```
<connectionStrings>
    <add name="TestDB"
         connectionString="conn_str_here"
         providerName="System.Data.SqlClient" />
</connectionStrings>

<membership defaultProvider="CustomSqlMembershipProvider">
    <providers>
    <clear/>
    <add name="CustomSqlMembershipProvider" type="Common.CustomSqlMembershipProvider" connectionStringName="TestDB"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
    </providers>
</membership> 
```

还有我的自定义提供者类：

```
namespace Common 
{
    public class CustomSqlMembershipProvider : SqlMembershipProvider
    {
        public void ChangeUsername()
        {
            // ...
        }
    }
} 
```

现在调用我的新自定义函数，是否有一些方法可以允许`Membership.ChangeUsername()`而不是必须这样做：

```
CustomSqlMembershipProvider customMembership = Membership.Provider as CustomSqlMembershipProvider;
customMembership.ChangeUsername(); 
```

在任何你想使用它的地方做演员，一段时间后开始变得烦人。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:02:55.837

您可以添加一个扩展方法：

```
namespace System.Web.Membership
{
    public static class MembershipProviderExtensions
    {
        public static void ChangeUsername(this MembershipProvider provider, string oldUsername, string newUsername)
        {
            var customProvider = provider as CustomSqlMembershipProvider;
            if (customProvider == null) throw new Exception("Invalid provider type.");

            customProvider.ChangeUsername(oldUsername, newUsername);
        }
    }
} 
```

用法：

```
Membership.Provider.ChangeUsername("bob", "jane"); 
```

# android - 活动或片段或对话框

> ID：12186086
> 
> 赞同：0
> 
> 时间：2012-08-29T20:35:21.610
> 
> 标签：android, android-activity

您好，我正在寻找我的应用程序的解决方案。我的第二个活动有 10 个按钮。现在我想要的是一个屏幕，一旦按下任何带有信息的按钮就会出现。（只是文字）我一直在寻找一段时间，我不知道哪个是最好的。我不认为活动是最好的选择，因为我不希望活动繁重、缓慢等等。

希望你能帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:37:01.490

也许您正在寻找自定义对话框？

[教程](http://www.mkyong.com/android/android-custom-dialog-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:45:22.247

你可以使用这样的东西来显示一个对话框。

```
private void ShowDialog(String message){
    AlertDialog.Builder builder;
    AlertDialog alert;

    builder = new AlertDialog.Builder(MainActivity.this);
    builder.setMessage(message)                 
           .setCancelable(false)
           .setPositiveButton(getString(R.string.button_ok), new       DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });
    alert = builder.create();

    alert.show();
} 
```

在您的按钮上单击只需调用一些信息...

```
 ShowDialog("Some Information."); 
```

# ember.js - 过渡到父级时嵌套视图不会被破坏

> ID：12186089
> 
> 赞同：2
> 
> 时间：2012-08-29T20:35:36.493
> 
> 标签：ember.js

我有一个带有嵌套路由的 ember 应用程序，但是在转换回父路由时，我遇到了销毁子视图的问题。可能最容易看这个小提琴[http://jsfiddle.net/j32yT/2/](http://jsfiddle.net/j32yT/2/) - 它首先显示“用户”列表；单击“创建”会导致带有“保存”按钮的用户创建“表单”。保存时，该操作在返回其父级的路由处被触发。

我希望在过渡时创建视图会被破坏，但似乎没有。添加一个函数来处理路由出口确实让我清理干净，但看起来有点乱。我是否误解了路由的工作原理？

**更新**

通过在我的用户路由中引入索引路由，我能够实现我想要的 - 这里有一个新的小提琴[http://jsfiddle.net/AsJca/1/](http://jsfiddle.net/AsJca/1/) - 我在正确的道路上吗？对这些东西不熟悉，所以还不明白什么可能构成最佳实践！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:56:46.913

你有一个`outlet`for`Application View`和一个 for `UsersView`，

```
<script id="application-template" type="text/x-handlebars">
    {{outlet}}
</script>

<script id="users-template" type="text/x-handlebars">
    {{#each user in controller}}
    {{user.name}}
    {{/each}}    
    <button {{action create_user}}>Create</button>
    {{outlet}}
</script> 
```

当你这样做：

```
router.get('applicationController').connectOutlet('users'); 
```

`outlet`of`applicationView`被填充`UsersView`，但看到`Users View`有它自己的。`outlet`当你这样做时，`router.get('usersController').connectOutlet('createUser');`这个出口被填充`create new form`。因此，它与创建新按钮一起驻留在`users-template`.

您可以将其更改为，

```
router.get('applicationController').connectOutlet('createUser'); 
```

如果你想更换它，但再想想你真正需要什么，你就知道了。

# c# - C# 通讯簿 GUI 未关闭

> ID：12186090
> 
> 赞同：0
> 
> 时间：2012-08-29T20:35:41.010
> 
> 标签：c#, user-interface, formclosing

好吧，所以我发现了我非常愚蠢的错误，即为什么没有创建文件夹，但我遇到了另一个问题。每当我尝试关闭窗口应用程序时，它都不会关闭。假设保存文件中的信息，但它没有，也不会关闭。

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        XmlDocument xDoc = new XmlDocument();
        string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
        xDoc.Load(path + "\\Address Book\\settings.xml");
        XmlNode xNode = xDoc.SelectSingleNode("People");
        xNode.RemoveAll();
        foreach (Person p in people)
        {
            XmlNode xTop = xDoc.CreateElement("Person");
            XmlNode xName = xDoc.CreateElement("Name");
            XmlNode xEmail = xDoc.CreateElement("Email");
            xName.InnerText = p.Name;
            xEmail.InnerText = p.Email;
            xTop.AppendChild(xName);
            xTop.AppendChild(xEmail);
            xDoc.DocumentElement.AppendChild(xTop);
        }
        xDoc.Save(path + "\\Address Book\\settings.xml");
    } 
```

这就是我现在所拥有的。

# objective-c - iOS NSKeyedUnarchiver 调用单例 getter

> ID：12186091
> 
> 赞同：0
> 
> 时间：2012-08-29T20:35:45.703
> 
> 标签：objective-c, ios, cocoa-touch, nscoding

我有一个单例类，它将从 Web 服务初始化它的数据，然后将自身保存到一个文件中（使用 NSCoding 和 NSKeyedUnarchiver），这样我就可以初始化这个文件，而不是再次从 Web 中提取所有数据。因为它是一个正在保存的单例实例，所以我希望能够像往常一样调用单例 getter，检查是否有存档副本，如果没有，将数据拉下来并存档。归档工作正常，但是当我尝试调用 [[NSKeyedUnarchiver unarchiveObjectWithFile: filePath] retain] 时，它会在 sharedInstance 初始化之前调用 sharedInstance getter。这会导致 init 被调用，然后应用程序再次下载所有数据，只是随后被取消归档程序覆盖。

我的设置有问题，还是有另一种序列化数据的方法？

这是一些（简化的）代码：

```
@implementation Helmets
@synthesize helmetList, helmetListVersion;
//Class Fields
static Helmets *sharedInstance = nil;

// Get the shared instance and create it if necessary.
+ (Helmets *)sharedInstance {
    //if(sharedInstance == nil){
        //[Helmets unarchive];             //This does not work! Calls sharedInstance() again (recursion)
        if(sharedInstance == nil){
            sharedInstance = [[super allocWithZone:NULL] init];    //Pull from web service
            [Helmets archive];    //Save instance
        //}
    //}
    return sharedInstance;
}

- (id)init {
    self = [super init];
    if (self) {
            helmetList = [[NSMutableArray alloc]init];

            //Get our data from the web service and save it (excluded)
            }
    }
    return self;
}

//This works!
+(void)archive{
    if([NSKeyedArchiver archiveRootObject:sharedInstance toFile:[Helmets getFilePath]]){
        NSLog(@"Archiving Successful");
    }
    else{
        NSLog(@"Archiving Failed");
    }
}

//This works, but calls getInstance causing data to be downloaded anyways!
+(void)unarchive{
    // Check if the file already exists
    NSFileManager *filemgr = [NSFileManager defaultManager];
    NSString *filePath = [Helmets getFilePath];
    if ([filemgr fileExistsAtPath: filePath])
    {
       sharedInstance = [[NSKeyedUnarchiver unarchiveObjectWithFile: filePath] retain];
    }
    [filemgr release];
} 
```

实例初始化如下：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    ...
    [Helmets unarchive];        //This calls sharedInstance() too soon!
    [Helmets sharedInstance];
} 
```

该类在 .h 中实现 NSCoding 并覆盖 initWithCoder 和 encodeWithCoder（存档正在工作）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:19:02.877

最后，除了您拥有的共享实例之外，您还需要一个私有方法来设置您的共享实例，并且您需要一个不同的 init，再次对实现私有。

```
- (id)initAndFetch:(BOOL)fetch
{
    if((self = [super init])) {
        ...

        if(fetch) { do the web fetch };
             ...   
    }
} 
```

在 +sharedInstance 方法中，您将传递 YES。

然后您的解码将如下所示：

```
- (id)initWithCoder:(NSCoder *)decoder
{
    if((self = [self initAndFetch:NO])) {
        title = [decoder decodeObjectForKey:@"title"];
        ...
        sharedInstance = self;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T06:20:08.217

我必须让它以下列方式工作。

```
-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (!self) {
        return nil;
    }
    UserInfo *user =[UserInfo sharedInstance];
    return user;
}

-(void)encodeWithCoder:(NSCoder *)aCoder
{
    UserInfo *user =[UserInfo sharedInstance];
    [aCoder encodeObject: user.phoneNumber   forKey:@"phoneNumber"]; 
}

-(void)save
{
    [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:[UserInfo sharedInstance]] forKey:@"USER_DATA"];
    [[NSUserDefaults standardUserDefaults]synchronize];

}

-(UserInfo*)currentUser
{
    NSData *data =[[NSUserDefaults standardUserDefaults] objectForKey:@"USER_DATA"];
    UserInfo *savedUser =[NSKeyedUnarchiver unarchiveObjectWithData:data];

    UserInfo *user =[UserInfo sharedInstance];
    return user;
} 
```

# python - 使用python为txt的每一行添加前缀和后缀

> ID：12186093
> 
> 赞同：0
> 
> 时间：2012-08-29T20:35:48.450
> 
> 标签：python, text, line, prefix

我需要在这样的文档中添加一些文本：

原始文件：

```
C:\listagem.txt

i love python  
macdonals hamburger  
yolo 4ever 
```

我需要添加后缀和前缀，所以结果如下所示：

```
teste.txt

blablablai love pythongugugugugu  
blablablamacdonalds hamburgergugugugugu  
blablablayolo 4evergugugugugu 
```

我已经尝试过这个算法，但它不起作用。

```
prefix = 'blablabla'  
suffix = 'gugugugugu'  
dest = ''  
with open('C:\listagem.txt', 'r') as src:  
    with open('teste.txt', 'w') as dest:  
        for line in src:  
            dest.write('%s%s%s\n' % (prefix, line.rstrip('\n'), suffix)) 
```

我在 Windows XP 上使用 python 3.2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:08:56.447

您的代码主要是文件，但文件名是问题所在。在 Stackoverflow 上查看[这个答案](https://stackoverflow.com/questions/6928789/strange-path-separators-on-windows)。

像这样改变你的路径：

```
with open('C:\\listagem.txt', 'r') as src: 
```

..或使用[原始字符串](http://docs.python.org/reference/lexical_analysis.html#string-literals)：

```
with open(r'C:\listagem.txt', 'r') as src:  # r'raw string' ignores backslashes 
```

..或者您可以只使用正斜杠-如果可行，我会推荐它（因为反斜杠很痛苦）：

```
with open('C:/listagem.txt', 'r') as src: 
```

另请注意，您的示例输入文件似乎包含尾随空格。在您提供的数据中， 后面有两个空格`i love python`，因此您的输出如下所示：

```
{prefix}i love python  {suffix} 
```

这可能是在您的 Stackoverflow 问题中介绍的，而不是在原始文件中介绍的。

# payment-gateway - iTransact：如何创建脚本来更改/取消用户订阅

> ID：12186095
> 
> 赞同：0
> 
> 时间：2012-08-29T20:35:55.860
> 
> 标签：payment-gateway, payment, payment-processing

如何创建 HTML 表单以允许用户更改其 iTransact (itransact.com) 订阅设置？

例如：1) 选择不自动续订：

*   表单需要将 'recur_reps' 值更改为 0

例如：2）更改他们的订阅类型：

*   表单需要更改“recur_total”和“recur_desc”的值

（即：将表单发布到的 URL 是什么以及我需要向其发布哪些表单字段？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:09:06.743

根据 iTransact 支持技术人员的说法，无法创建 HTML 表单来允许用户更改其 iTransact (itransact.com) 订阅设置。但是，有一个 XML API 允许这样做。

由于向 iTransact 的 XML API 发送 XML 请求的代码并不简单和直观，因此我决定将一个工作示例程序发布到 Stack Overflow，因为它可能有助于作为其他人的参考，特别是因为它们在iTransact.com 文档。

以下示例程序发送请求以获取现有事务的详细信息。

```
<?php

define('ITRANSACT_API_UPDATE_URL', 'https://secure.itransact.com/cgi-bin/rc/xmltrans2.cgi');
define('ITRANSACT_API_GATEWAY', '12345'); // vendor account number
define('ITRANSACT_API_USERNAME', 'fdfsdfksafdsafdsafdsafdsafdsa'); // vendor API username
define('ITRANSACT_API_KEY', 'fdsfdsafdsafdsfdsfdsfds'); // vendor API key

/**
 * iTransact's XML API requires us to encrypt the XML command with a 
 * special key known only to us and iTransact. This is to ensure that the 
 * request cannot be modified after leaving our server. 
 *
 * A keyed hash value is generated using the HMAC-SHA1 algorithm and then 
 * encoded with base-64 MIME.
 *
 * @param string $strXMLCmd: xml for the command operation
 *
 * @returns string: the base64-encrypted HASH_SHA1 payload Signature 
 *                  for the command
 */
function getITransactPayloadSignagureForCommand($strXMLCmd){

  $key = ITRANSACT_API_KEY;

  #Using built in PHP5 functions:
  $digest = hash_hmac('sha1', $strXMLCmd, $key, true);
  $strPayLoadSignature = base64_encode($digest);

  #Using PEAR module:
  #require_once 'Crypt/HMAC.php';
  #$hmac = new Crypt_HMAC($key,"sha1");
  #$digest = pack("H40", $hmac->hash(trim($payload)));
  #$actual_signature = base64_encode($digest);

  return $strPayLoadSignature;
}

/** 
 * Constructs the XML request in the iTransact format for the request
 * including login credentials
 *
 * @param string $strXMLCmd: specific xml for the operation command
 */
function construct_itransact_xml($strXMLCmd){

  $strPayLoadSignature = getITransactPayloadSignagureForCommand($strXMLCmd);

  $strXML  = '<?xml version="1.0"?>';
  $strXML .= '<GatewayInterface>';

  // Login credentials:

  $strXML .=   '<APICredentials>';
  $strXML .=     '<Username>'.ITRANSACT_API_USERNAME.'</Username>';
  $strXML .=     '<PayloadSignature>'.$strPayLoadSignature.'</PayloadSignature>';
  $strXML .=     '<TargetGateway>'.ITRANSACT_API_GATEWAY.'</TargetGateway>';
  $strXML .=   '</APICredentials>';

  $strXML .=   $strXMLCmd; // Unique part of every command

  $strXML .= '</GatewayInterface>';

  return $strXML;
}

/**
 * Sends an XML request to iTransact.
 *
 * @param string $xml: the XML to send to iTransact
 *
 * @returns string: the XML responde from iTransact
 */
function post_xml_to_iTransact($xml) {

  $url = ITRANSACT_API_UPDATE_URL;

  $ch = curl_init();

  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_HEADER, true);
  curl_setopt($ch, CURLINFO_HEADER_OUT, true);
  curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type: text/xml; charset=utf-8"));
  curl_setopt($ch, CURLOPT_POST, 0);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $xml);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

  $result = curl_exec($ch);
  $info = curl_getinfo($ch);

  curl_close($ch);

  return $result;
}

// *** MAIN ***

// construct XML command:

$strXID = '12345'; // transaction_id we wish to get details of
$strXMLCmd = '<RecurDetails><OperationXID>'.$strXID.'</OperationXID></RecurDetails>'; // command we wish to send
$strXML = construct_itransact_xml($strXMLCmd); 

// send XML command:

$strReturnedXML = post_xml_to_iTransact($strXML); // send request and fetch result
echo 'Response XML from iTransact: '.var_export(htmlspecialchars($strReturnedXML), TRUE);

?> 
```

注意：更新/取消现有定期订阅的请求将具有类似的格式，但将使用“recurUpdate”命令而不是“recurDetails”命令（有关所有可能命令的完整详细信息，请参阅：[http ://www.itransact.com /downloads/PCDeveloperGuide.pdf](http://www.itransact.com/downloads/PCDeveloperGuide.pdf) )

# java - 如何在屏幕上找到 JTree 节点的位置

> ID：12186098
> 
> 赞同：3
> 
> 时间：2012-08-29T20:36:06.780
> 
> 标签：java, swing, mouseevent, jtree, swingutilities

我想搜索 JTree 的特定节点并确定它在屏幕上的位置。我的目标是从该节点的左上角开始悬停鼠标并在我的 JFC 中执行鼠标单击。

谁能帮我这个？是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T20:51:43.820

知道坐标 x 和 y（来自鼠标事件），您可以通过`JTree.getPathForLocation`. 节点的边界由`JTree.getPathBounds(path)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:53:54.590

在不了解更多信息的情况下，很难确定这一点。

不过，我建议你看看

*   [JTree.getPathBounds](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#getPathBounds%28javax.swing.tree.TreePath%29)
*   [JTree.getRowBounds](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#getRowBounds%28int%29)
*   [JTree.getRowForPath](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#getRowForPath%28javax.swing.tree.TreePath%29)
*   [SwingUtilities.convertPointToScreen](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#convertPointToScreen%28java.awt.Point,%20java.awt.Component%29)

这应该可以帮助您确定节点在屏幕上的位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:51:14.547

您可以使用 processMouseEvent。MouseEvent 将为您提供鼠标的 X 和 Y 坐标。

# php - 未定义索引：website_url 和自定义 url $POST

> ID：12186099
> 
> 赞同：0
> 
> 时间：2012-08-29T20:36:12.367
> 
> 标签：php

现在可以完美运行。更新了代码。谢谢新家具。

```
 function foo_options(){
           global $post;
   if (isset($custom['website_url']) && isset($custom['website_url'][0])) {
   $website_url = isset($custom['website_url']) ? $custom['website_url'][0] : '';}
   ?>

<div id="foo-options">
<label>Website URL:</label><input name="website_url" value="<?php echo $website_url; ?>" />     
</div><!--end foo-options--> 
<?php

   }
{

   function update_website_url(){
       global $post;   
       if (($post != null) && isset($_POST['website_url'])) {
       update_post_meta($post->ID, "website_url", $_POST["website_url"]);
     }
  } 
```

**更新了**代码和 bin。[http://pastebin.com/2ZWisprm](http://pastebin.com/2ZWisprm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:07:47.733

为了按顺序解决问题，关于以下行：

```
update_post_meta($post->ID, "website_url", $_POST["website_url"]); 
```

`trying to access a property of a non-object`适用于`$post->ID`. 发生此错误的唯一方法是 if`$post`不是对象（例如数组），或者它是`null`.

该`undefined index`错误适用于`$_POST["website_url"]`；当您的表单当前未发布或当前 POST 数据中不存在该字段名时，就会发生这种情况。

我不知道你的`$post`变量中应该包含什么对象，所以以下只是一个猜测，但请尝试以下更新：

```
function update_website_url(){
    global $post;   
    if (($post != null) && isset($_POST['website_url'])) {
        update_post_meta($post->ID, "website_url", $_POST["website_url"]);
    }
} 
```

这将确保`$post`它不为空，并假设它是一个正确的对象，并且`website_url`索引已设置。您可能希望增加检查以使用`!empty()`而不是`isset()`，但以上应该可以解决您的错误（除非`$post`是数组或其他非对象数据类型）。

# jquery - 使用jQuery隐藏div滚动条，但保留滚动？

> ID：12186100
> 
> 赞同：9
> 
> 时间：2012-08-29T20:36:13.343
> 
> 标签：jquery, css, scroll, scrollbar

我试图能够在一个 div 内滚动，但不显示实际的滚动条。

我需要用户能够使用滚轮滚动

有人对我如何做到这一点有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T20:49:17.170

好吧，真正的原因是您想要这样做的原因，但是既然您问了，我会尝试解决您的问题。

您将需要两个 div。一个嵌套在另一个里面。

```
<div class="outside">
    <div class="inside">
        Scrolling Content Goes here.
    </div>
</div> 
```

然后，您将需要一些 CSS 来帮助解决这种情况。overflow:auto 一旦超过高度限制就会给你滚动。为了这个例子，我放了一个随机宽度。在右侧放置一个填充以将滚动条推出 .outer div 类。这样您就不必担心 .outer div 下的内容。

```
.inside { width: 500px; overflow: auto; height: 300px; padding-right: 20px; } 
```

对于外部类，您需要指定相同的高度、相同的宽度，但溢出：隐藏。

```
.outside { width: 500px; height: 300px; overflow: hidden; } 
```

示例：[jsFiddle](http://jsfiddle.net/gBdMf/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:15:22.533

这在 IE 和 Firefox 中进行了测试 - 两者处理填充略有不同，所以我使用高度和宽度来说明内容可见性。

拥有 2 个容器是有意义的 - 一个用于容器，一个用于内容，但是由于浏览器处理填充的方式不同，因此将滚动条推入隐藏区域比您想象的要困难得多。这是第三个容器进来的地方：

*   一个不带滚动条的父维度容器
*   一个包含滚动条的容器，该滚动条被推入隐藏区域
*   一个容器，其中包含具有正确宽度集的内容

这是通过样式表技巧完成的——样式表已经过注释，因此您可以按照其中的说明/注释进行操作。

希望这可以帮助！:)

```
<html>
<head>
    <style type="text/css">
    /* Propetary paragraph style */
    p {
        padding: 0px;
        margin: 0px 0px 7px 0px;
    }
    /* Global notes:
       - Since the 
    /* This is the outer container - set desired height and width here */
    .scrollabelDivContainer {
        width: 300px;
        height: 100px;
        padding: 0px;
        margin: 0px;
        overflow: hidden;
        border: 2px dashed #ddd;
    }
    /* This is the div inside the container - the height should 
       match the container and width be more (to push the 
       scrollbar into the hidden content area) */
    .scrollableDiv {
        width: 400px;
        height: 100px;
        padding: 0px;
        margin: 0px;
        overflow-x: hidden;
        overflow-y: scroll;
    }
    /* This houses the content.  Set the widget 10px less than the 
       container width to ensure the content is visible in all browsers */
    .scrollableDivContent {
        width: 290px;
        padding: 0px;
        margin: 0px;
        overflow: auto;
    }
    </style>
</head>

<body>
    <div class="scrollabelDivContainer">
        <div class="scrollableDiv">
            <div class="scrollableDivContent">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras tincidunt consequat urna ut tincidunt. Vestibulum molestie leo quis dui malesuada vulputate eget tempor purus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Cras nec orci enim, vel tristique lectus. Sed lobortis ultrices enim eu consequat.</p>
                <p>Integer magna lectus, iaculis sit amet interdum nec, ullamcorper ut purus. Sed aliquam sollicitudin lacinia. Proin porttitor aliquet lorem, eu dictum lorem suscipit et. Ut vestibulum eros quis turpis auctor id sollicitudin risus faucibus. Quisque volutpat nibh ut sem euismod rutrum. Ut eget orci non quam scelerisque laoreet sit amet a metus. Mauris aliquam facilisis lacinia.<p>
            </div>
        </div>
    </div>
</body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:46:49.293

也许您可以使用 css 并隐藏或对其进行一些样式设置，使其看起来隐藏。这是我找到的一些链接。

[http://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

[http://www.yourhtmlsource.com/stylesheets/scrollbars.html](http://www.yourhtmlsource.com/stylesheets/scrollbars.html)

# python - 如何使 python 需求可移植？

> ID：12186101
> 
> 赞同：3
> 
> 时间：2012-08-29T20:36:14.067
> 
> 标签：python, deployment

我不是 python 专业人士，但 python 真的很有用，所以我正在努力提高我的技能。

我正在开发一个使用“请求”和“请求”的项目。这两个包都有依赖关系，通常由“pip”或“easy_install”处理。这对于开发环境或安装到一两台机器来说很好，但我需要将我的项目部署到 200 多台机器上。将我的依赖项与我的项目打包以使其可移植的最佳方法是什么？

蟒蛇v2.7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:38:09.463

在您的机器上：

```
pip freeze > requirements.txt 
```

在其他机器上：

```
pip install -r requirements.txt 
```

另外，我建议您查看以`virtualenv`更舒适的方式处理依赖项的工具。有关更复杂的解决方案（例如，分布式依赖项管理），请查看`Puppet`. PyCon 的精彩演示：[使用 Puppet 进行依赖管理](http://rcrowley.org/talks/pycon-2011/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:43:56.877

使用需求文件`pip`，或使用像[buildout](http://buildout.org/)这样的部署工具，它支持复杂的安装并可以为您固定版本：

```
[buildout]
versions = myversions
parts =
    mypackage

[myversions]
mypackage = 1.0
requests = ...

[mypackage]
recipe = zc.recipe.egg
eggs = mypackage 
```

# c# - 如何从 C# 中的 Main() 获取复杂的返回值

> ID：12186104
> 
> 赞同：1
> 
> 时间：2012-08-29T20:36:36.630
> 
> 标签：c#, return, exe

用 C# 编写的 exe 文件，我需要将复杂的返回值返回到另一个 C# 项目

这是我的代码：

```
class Program
{
    private class MyObject
    {
        private int num;

        public int Num
        {
            get
            {
                return (this.num);
            }
            set
            {
                this.num = value;
            }
        }

        public MyObject(int num)
        {
            this.Num = num;
        }

    }

    [STAThread]
    public static MyObject Main(string[] args)
    {
        return new MyObject(5);
    }
} 
```

这给了我以下错误： ...\ConsoleApplication1.exe' 不包含适合入口点的静态'Main' 方法。

我试过玩它，但我没有成功让它返回一个复杂的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T20:37:47.063

您不能从作为`Main`流程入口点的方法执行此操作。

如果您正在编写直接从其他代码调用的代码，那么几乎可以肯定的是，您应该构建一个类库项目。您*可以*将一个应用程序的引用添加到另一个应用程序，但这并不常见（至少在单元测试之外）。如果你想这样做，你应该只调用一个不同的方法而不是`Main`. （您*可以*在一个类中以这种方式声明一个`Main`方法，并使用不同的类作为“正常”入口点，但这似乎毫无意义地复杂。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:02:19.700

如前所述，如果您将 exe 作为独立的可执行文件调用，则`Main`必须运行并且您得到的只是传统的进程输入/输出。

但是，如果您确实需要，也可以将 exe 作为库引用。

如果这是您的 exe 的代码：

```
public class MyObject
{
    private int num;

    public int Num
    {
        get
        {
           return (this.num);
        }
        set
        {
           this.num = value;
        }
    }

    public MyObject(int num)
    {
        this.Num = num;
    }    
}

public class Program
{
    public static MyObject DoWork(int num)
    {
        return new MyObject(num);
    }

    [STAThread]
    public static int Main(string[] args)
    {
        DoWork(5);

        return 0;
    }
} 
```

从另一个 exe 或 dll（假设您已经引用了第一个 exe），您可以像这样调用代码：

```
MyObject obj = Program.DoWork(8) 
```

不过，这是一种非常不寻常的方法。如果您有在多个地方定义了您需要的丰富类/方法的库，那么您真的应该将它们放在一个 dll 中。

# sql - 使用 SQL 将度/分/秒转换为小数

> ID：12186110
> 
> 赞同：3
> 
> 时间：2012-08-29T20:37:05.920
> 
> 标签：sql

是否有任何 SQL 脚本可以将度/分/秒（保存在 A 列中）转换为小数（保存在新的 B 列中）？我搜索了现有的解决方案，但所有示例均指小数->度/分/秒。我很欣赏任何例子，因为我不擅长 SQL 脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:32:16.103

以下似乎有效：

```
SELECT DMS, DEGREES + (MINUTES / 60) + (SECONDS / (60 * 60)) AS DECIMAL_DEGREES
  FROM (SELECT DMS,
               TRUNC(DMS) AS DEGREES,
               TRUNC((DMS - TRUNC(DMS)) * 100) AS MINUTES,
               ((DMS * 100) - TRUNC(DMS * 100)) * 100 AS SECONDS
          FROM TEST_DMS) 
```

或者，如果您更喜欢将其全部作为一种表达方式：

```
SELECT DMS,
       TRUNC(DMS) +
         (TRUNC((DMS - TRUNC(DMS)) * 100) / 60) +
         (((DMS * 100) - TRUNC(DMS * 100)) * 100) / (60 * 60) AS DECIMAL_DEGREES
  FROM TEST_DMS 
```

至少这些与我可信赖的、生锈的 HP-41C 返回的结果一致。:-)

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T08:46:56.547

我从事一个项目...我使用脚本来解决 oracle db 上的 DMS 转换问题

```
SELECT 
CASE
WHEN LENGTH(longitude)=7 THEN ROUND (cast(substr(longitude, 1, 1) as numeric(10,5)) +  cast(substr(longitude, 3, 2) as numeric(10,5))/60 +  cast(substr(longitude, 6, 2) as numeric(10,5))/3600,4) 
WHEN LENGTH(longitude)=8  THEN ROUND (cast(substr(longitude, 1, 2) as numeric(10,5)) +  cast(substr(longitude, 4, 2) as numeric(10,5))/60 +  cast(substr(longitude, 7, 2) as numeric(10,5))/3600,4)
ELSE
ROUND (CAST (longitude as Numeric(10,5)),4)
END AS LONGITUDE,
CASE
WHEN LENGTH(latitude)=7 THEN ROUND (cast(substr(latitude, 1, 1) as numeric(10,5)) +  cast(substr(latitude, 3, 2) as numeric(10,5))/60 +  cast(substr(latitude, 6, 2) as numeric(10,5))/3600,4) 
WHEN LENGTH(latitude)=8  THEN ROUND (cast(substr(latitude, 1, 2) as numeric(10,5)) +  cast(substr(latitude, 4, 2) as numeric(10,5))/60 +  cast(substr(latitude, 7, 2) as numeric(10,5))/3600,4)
ELSE
ROUND (CAST (latitude as Numeric(10,5)),4)
END AS LATITUDE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T08:10:31.443

我用下面的做同样的事情

```
declare @cord  varchar (max)

set  @cord=  '2504N 05534E'

select

case when  CHARINDEX(' ', @cord,1)>0 then
case when  right(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', @cord,1)-1))),1) = 'N' then
(left(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', @cord,1)-1))),2))
+
(SUBSTRING(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', @cord,1)-1))),3,2)/60.0)
else
-1*(
(left(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', @cord,1)-1))),2))
+
(SUBSTRING(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', @cord,1)-1))),3,2)/60.0)
)
end
end latitude
,case when  CHARINDEX(' ', @cord,1)>0 then
 case when right(LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', @cord,1),100))),1) = 'E' then
(left(LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', @cord,1),100))),3) )
+
(SUBSTRING( LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', @cord,1),100))),4 
,2)/60.0)
else
-1*(
(left(LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', @cord,1),100))),3) )
+
(SUBSTRING( LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', @cord,1),100))),4 
,2)/60.0)
 )
 end
 end  longitude

,geography::Point(
     case when  CHARINDEX(' ', @cord,1)>0 then
        case when  right(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', 
 @cord,1)-1))),1) = 'N' then
        (left(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', @cord,1)-1))),2))
        +
        (SUBSTRING(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', 
 @cord,1)-1))),3,2)/60.0)
        else
        -1*(
        (left(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', @cord,1)-1))),2))
        +
        (SUBSTRING(LTrIM(RTRIM(left( @cord, CHARINDEX(' ', 
 @cord,1)-1))),3,2)/60.0)
        )
        end
     end 
     ,case when  CHARINDEX(' ', @cord,1)>0 then
        case when right(LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', 
 @cord,1),100))),1) = 'E' then
        (left(LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', 
 @cord,1),100))),3) )
        +
        (SUBSTRING( LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', 
 @cord,1),100))),4 ,2)/60.0)
        else
        -1*(
        (left(LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', 
 @cord,1),100))),3) )
        +
        (SUBSTRING( LTrIM(RTRIM(SUBSTRING( @cord, CHARINDEX(' ', 
 @cord,1),100))),4 ,2)/60.0)
        )
        end
    end  
    , 4326)  
      as geography_Point 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-22T08:55:04.467

基于@user2621989 的回答，这里测试了他的查询的 SQL Server 版本：

```
DECLARE @longitude varchar(max) = '50°03''10"'
DECLARE @latitude varchar(max) = '15°00''50"'

SELECT 
CASE
WHEN LEN(@longitude)=8 THEN ROUND (cast(SUBSTRING(@longitude, 1, 1) as numeric(9,6)) +  cast(SUBSTRING(@longitude, 3, 2) as numeric(9,6))/60 +  cast(SUBSTRING(@longitude, 6, 2) as numeric(9,6))/3600,4) 
WHEN LEN(@longitude)=9  THEN ROUND (cast(SUBSTRING(@longitude, 1, 2) as numeric(9,6)) +  cast(SUBSTRING(@longitude, 4, 2) as numeric(9,6))/60 +  cast(SUBSTRING(@longitude, 7, 2) as numeric(9,6))/3600,4)
ELSE
ROUND (CAST (@longitude as numeric(9,6)),4)
END AS longitude,
CASE
WHEN LEN(@latitude)=8 THEN ROUND (cast(SUBSTRING(@latitude, 1, 1) as numeric(9,6)) +  cast(SUBSTRING(@latitude, 3, 2) as numeric(9,6))/60 +  cast(SUBSTRING(@latitude, 6, 2) as numeric(9,6))/3600,4) 
WHEN LEN(@latitude)=9  THEN ROUND (cast(SUBSTRING(@latitude, 1, 2) as numeric(9,6)) +  cast(SUBSTRING(@latitude, 4, 2) as numeric(9,6))/60 +  cast(SUBSTRING(@latitude, 7, 2) as numeric(9,6))/3600,4)
ELSE
ROUND (CAST (@latitude as numeric(9,6)),4)
END AS latitude 
```

退货

```
longitude       latitude
50.05280000000  15.01390000000 
```

# php - 用于 PHP 的带有电子邮件和密码的 Google Analytics Core Reporting API

> ID：12186116
> 
> 赞同：1
> 
> 时间：2012-08-29T20:37:36.117
> 
> 标签：php, google-analytics, oauth-2.0, google-analytics-api

到目前为止，我使用 GAPI [http://code.google.com/p/gapi-google-analytics-php-interface/使用 PHP 从 Google Analytics 中获取一些数据。](http://code.google.com/p/gapi-google-analytics-php-interface/)有了它，你可以使用类似的东西：

```
$ga = new gapi($User, $Password); 
```

登录 Analytics 并轻松提取数据。

但现在 GAPI-Support 已取消，您必须使用[https://developers.google.com/analytics/devguides/reporting/core/v3/](https://developers.google.com/analytics/devguides/reporting/core/v3/)访问数据。但是在所有示例中，他们使用的方法是用户必须在网络浏览器中登录才能获得访问权限。但是我在网络服务器上有一个脚本，我只有`$User`和`$Password`......那么有人可以给我一个例子，说明如何在 PHP 中对用户进行身份验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:05:31.637

OAuth has a flow called [*Client Credentials Grant*](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4). Google implements this with so called [*Service Accounts*](https://developers.google.com/console/help/#service_accounts), where you get a *client ID* and a *certificate file* instead of a *username/password* combination.

For using a *Service Account* to request authorization to the *Google Analytics API*, just follow [this answer](https://stackoverflow.com/a/10089698/1467115).

# windows - 在 MSI 中多次使用同一合并模块的正确方法是什么？

> ID：12186117
> 
> 赞同：0
> 
> 时间：2012-08-29T20:37:37.210
> 
> 标签：windows, windows-installer, installation, merge-module

我正在创建一个 Windows 安装程序脚本，我有两个功能要安装在他们自己的文件夹中。

我想对这两个文件夹执行合并模块。但是，Windows Installer 只允许合并模块的一个副本，因此我只能将它安装到一个应用程序文件夹中。

是否可以这样做，如果没有，是否有解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:57:01.813

合并模块很麻烦，最好使用作为单独的 MSI 文件提供的先决条件。你指的是什么合并模块？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:41:34.280

合并模块不能两次导入单个 MSI。

一种更好的方法是将合并模块组件安装到一个共享文件夹中，您的两个组件都将从那里使用它。

另一种选择是添加`CopyFile`元素并将合并模块安装的所有内容复制到第二个组件的文件夹中。但是我建议使用*shared folder*。为什么需要复制文件？后来，在更新之后，共享组件的版本可能会变得不同，这会给您带来麻烦。

# pinvoke - ORCA Api - C# p/invoke 问题

> ID：12186118
> 
> 赞同：0
> 
> 时间：2012-08-29T20:37:41.390
> 
> 标签：pinvoke, powerbuilder

我正在尝试使用 C# 中的 Powerbuilder ORCA Api，但我在编组方面遇到了一些问题。[这](http://pborca.googlecode.com/svn/trunk/pborca11.h "逆戟鲸 11")是 ORCA Api 的 C 头文件，我正在尝试实现 PBORCA_SccGetConnectProperties 函数，该函数需要 pborca_scc 结构。这是我的定义：

```
[DllImport(OrcaModule, CharSet = CharSet.Auto)]
internal static extern int PBORCA_SccGetConnectProperties(IntPtr ORCASession,
    [MarshalAs(UnmanagedType.LPWStr)] string Workspace,
    ref OrcaSccInfo SCCInfo);

public delegate int TextOutDelegate(
        [MarshalAs(UnmanagedType.LPWStr)] string data,
        int userData);

public delegate void BuildProjectDelegate(
        OrcaBuildError BuildError,
        IntPtr userData);

[StructLayout(LayoutKind.Sequential)]
public sealed class OrcaSccInfo
{
  internal IntPtr Wnd = IntPtr.Zero;

  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
  internal string ProviderName = null;

  internal int Capabilities = 0;

  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
  internal string UserID = null;

  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 301)]
  internal string Project = null;

  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 301)]
  internal string LocalProjPath = null;

  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 301)]
  internal string AuxPath = null;

  [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 301)]
  internal string LogFile = null;

  internal TextOutDelegate SccMsgHandler = null;
  internal BuildProjectDelegate OrcaMsgHandler = null;
  internal int lCommentLen = 0;
  internal int lAppend = 0;
  internal IntPtr CommBlk = IntPtr.Zero;
  internal int DeleteTempFiles = 0;
} 
```

像这样调用函数时：

```
ret = Interop.PBORCA_SccGetConnectProperties(session.Handle,
                @"D:\PB11-test\test.pbw",
                ref scc); 
```

我收到一个 FatalExecutionEngineError 消息，它可能是由于编组错误。我一遍又一遍地重复这个问题，似乎找不到我在编组函数、结构或委托的方式上犯的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:42:08.167

对于委托定义，第二个参数应该是 uint 而不是 int。

```
public delegate int TextOutDelegate([MarshalAs(UnmanagedType.LPWStr)] string data, uint userData); 
```

第二个委托中的第一个参数可能是一个 ref 或一个指针。

```
public delegate void BuildProjectDelegate(ref OrcaBuildError BuildError, IntPtr userData); 
```

在类定义中，您可以在委托成员以及任何接受委托的方法中尝试 [MarshalAs(UnmanagedType.FunctionPtr)]​​。

OrcaSccInfo 类在 C# 中的大小是否与您期望在 C++ 代码中的大小相同？当我将它放入 Linqpad 并获得大小时，Auto charset 为 2584，Ansi charset 为 1320，当我在 64 位上设置 Pack=1 和在 32 位上设置 1300 时，我得到 1316。

您是否尝试过用 StringBuilders 替换字符串，尤其是在 Dllimport 声明本身中？

是否有可能您的代表在被使用之前就被处理掉了？将委托传递给非托管代码不会创建垃圾收集器可以看到的引用，因此除非您在自己的代码中保留对委托的引用，否则它将比您预期的更早被处理掉。

# wpf - ListView 选项卡导航跨 ListViewItems 是网格的列

> ID：12186119
> 
> 赞同：1
> 
> 时间：2012-08-29T20:37:44.143
> 
> 标签：wpf, xaml, listview, tabindex, keyboard-navigation

我有一个水平显示项目的 ListView。每个项目都是一个 1 列网格。外观是一个网格，其中列数是动态的。除了标签导航之外，所有这些都有效并且看起来像我想要的那样。我已经`KeyboardNavigation.TabNavigation="Continue"`在 ListView 上设置，并且在 ItemContainerStyle 上将 KeyboardNavigation.IsTabStop 设置为 false，这允许我通过一个项目中的每一行，然后到下一个项目，等等。但是，我想从第一行开始在第一项中到第二项中的第一行，依此类推，然后到下一行。

前任。

> Item1Row1 -> Item2Row1 -> Item3Row1 -> ...
> 
> Item1Row2 -> Item2Row2 -> Item3Row2 -> ...

我为每个单元格中的控件设置了选项卡索引（我已经测试过是正确的），但我无法弄清楚在 ListView/ListViewItems 中启用 TabIndexes 需要哪些设置。任何帮助将不胜感激。这是xml...

```
<ListView VerticalAlignment="Top" Background="Transparent" BorderThickness="0" KeyboardNavigation.TabNavigation="Continue" ItemsSource="{Binding RawProductDataItemViewModels}">
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="KeyboardNavigation.IsTabStop" Value="False"/>
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid VerticalAlignment="Top" Margin="2.5,0,2.5,0">
                <Grid.RowDefinitions>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                    <RowDefinition SharedSizeGroup="ButtonAndGridGroup"/>
                </Grid.RowDefinitions>

                <TextBlock Margin="5,4,0,0" Grid.Row="0">
                        <TextBlock.Text>
                            <MultiBinding StringFormat="Lane #{0}">
                                <Binding Path="Lane"/>
                            </MultiBinding>
                        </TextBlock.Text>
                </TextBlock>
                <TextBox Grid.Row="1" Margin="0,4,0,0" Width="75" Text="{Binding RollNumber, StringFormat='{}{0:#####-#}', TargetNullValue=''}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=1}"/>
                <TextBox Grid.Row="2" Margin="0,4,0,0" Width="75" Text="{Binding PCode}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=2}"/>
                <TextBox Grid.Row="3" Margin="0,4,0,0" Width="75" Text="{Binding RollWidth}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=3}"/>
                <TextBox Grid.Row="4" Margin="0,4,0,0" Width="75" Text="{Binding RollWeight}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=4}"/>
                <TextBox Grid.Row="5" Margin="0,4,0,0" Width="75" Text="{Binding GrossWeight}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=5}"/>
                <TextBox Grid.Row="6" Margin="0,4,0,0" Width="75" Text="{Binding BurnWeight}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=6}"/>
                <TextBox Grid.Row="7" Margin="0,4,0,0" Width="75" Text="{Binding SqFtWeight}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=7}"/>
                <TextBox Grid.Row="8" Margin="0,4,0,0" Width="75" Text="{Binding Cure}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=8}"/>
                <TextBox Grid.Row="9" Margin="0,4,0,0" Width="75" Text="{Binding Rigidity}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=9}"/>
                <TextBox Grid.Row="10" Margin="0,4,0,0" Width="75" Text="{Binding Telescope}"
                            TabIndex="{Binding Lane, Converter={StaticResource IntegersTo2DIndex}, ConverterParameter=10}"/>
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:08:22.517

我决定在后面的代码中处理这个问题。我删除了 xaml 中文本框上的选项卡索引。该解决方案并不漂亮，但在我看来，它比删除列表框和对所有通道进行编码以便我可以使用选项卡索引更好。

**在 ListView 上预览 Key Down 处理程序：**

```
private void LanesListView_PreviewKeyDown(object sender, KeyEventArgs e)
{
    UIElement uie = e.OriginalSource as UIElement;

    // 'Ctrl + Tab' or 'Shift + Enter' (Reverse Tab)
    if ((e.Key == Key.Tab || e.Key == Key.Return) &&
        (Keyboard.Modifiers & ModifierKeys.Shift) == ModifierKeys.Shift &&
         uie != null)
    {
        MoveFocusPrevious(uie, (UIElement)sender);

        e.Handled = true;
    }
    else if ((e.Key == Key.Tab || e.Key == Key.Return) && uie != null)
    {
        // Normal 'Enter' or 'Tab' key click
        MoveFocusNext(uie, (UIElement)sender);

        e.Handled = true;
    }
} 
```

**移动焦点方法：**

```
private void MoveFocusNext(UIElement uie, UIElement sender)
{
    if(!uie.MoveFocus(new TraversalRequest(FocusNavigationDirection.Right)))
    {
        uie.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)); // Move Down
        uie = (UIElement)Keyboard.FocusedElement;
        MoveFocusToFirst(uie, sender); // Move to to first
    }
}

private void MoveFocusPrevious(UIElement uie, UIElement sender)
{
    if (!uie.MoveFocus(new TraversalRequest(FocusNavigationDirection.Left)))
    {
        uie.MoveFocus(new TraversalRequest(FocusNavigationDirection.Previous)); // Move Up
        uie = (UIElement)Keyboard.FocusedElement;
        MoveFocusToLast(uie, sender); // Move focus to last
    }
}

private void MoveFocusToLast(UIElement uie, UIElement sender)
{
    bool isLast = false;

    // Move right until hitting last item
    while(!isLast)
    {
        // If Focus cannot be moved, it is last item.
        isLast = !uie.MoveFocus(new TraversalRequest(FocusNavigationDirection.Right));
        uie = (UIElement)Keyboard.FocusedElement;
    }
}

private void MoveFocusToFirst(UIElement uie, UIElement sender)
{
    bool isFirst = false;

    // Move left until hitting last item
    while (!isFirst)
    {
        // If Focus cannot be moved, it is last item.
        isFirst = !uie.MoveFocus(new TraversalRequest(FocusNavigationDirection.Left)); 
        uie = (UIElement)Keyboard.FocusedElement; 
    }
} 
```

# objective-c - iphone开发UIBarButtonItem动作

> ID：12186122
> 
> 赞同：-2
> 
> 时间：2012-08-29T20:37:51.663
> 
> 标签：objective-c, ios

我在情节提要中制作了我的 iOS 应用程序的布局。现在我想在按钮上添加事件。我在互联网上发现很容易拖放以添加动作。

[https://developer.apple.com/library/archive/referencelibrary/GettingStarted/RoadMapiOS-Legacy/chapters/RM_YourFirstApp_iOS/Articles/05_ConfiguringView.html#//apple_ref/doc/uid/TP40007514-CH7-SW4](https://developer.apple.com/library/archive/referencelibrary/GettingStarted/RoadMapiOS-Legacy/chapters/RM_YourFirstApp_iOS/Articles/05_ConfiguringView.html#//apple_ref/doc/uid/TP40007514-CH7-SW4)

但是当我这样做时，什么也没有发生。我和他们说的一样，但我仍然没有看到添加出口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:19:53.753

您必须从情节提要拖到 .h 文件中。

在故事板中，您有一个带有按钮的 UIViewController，该 UIViewController 有一个类，您必须使用右键从按钮拖动到 ViewController 所在类的 .h 中。

如果您的助手编辑器处于活动状态，则有一个类似吸烟的图标，单击它，设置为自动，然后选择 .h。

# c# - 获取 DataGrid 宽度

> ID：12186123
> 
> 赞同：2
> 
> 时间：2012-08-29T20:38:06.377
> 
> 标签：c#, wpf, binding, datagrid

我的问题是我的数据网格填充了如下代码：

```
(...)
                while (rdr.Read())
                {
                    dataGrid1.Items.Add(new Produkt { nazwa = rdr.GetString(rdr.GetOrdinal("nazwa")), cena = rdr.GetString(rdr.GetOrdinal("cena")), kod = rdr.GetString(rdr.GetOrdinal("kod")) });

                }
(...) 
```

但在我声明数据网格中的所有列之前：

```
 DataGridTextColumn col1 = new DataGridTextColumn();
    DataGridTextColumn col2 = new DataGridTextColumn();
    DataGridTextColumn col3 = new DataGridTextColumn();
    dataGrid1.Columns.Add(col1);
    dataGrid1.Columns.Add(col2);
    dataGrid1.Columns.Add(col3);
    col1.Binding = new Binding("nazwa");
    col2.Binding = new Binding("cena");
    col3.Binding = new Binding("kod");
    col1.Header = "nazwa";
    col2.Header = "cena";
    col3.Header = "kod"; 
```

现在我已经通过输入的文本添加了过滤，所以我在数据网格（每列）下有 3 个文本框，但它们的宽度不像数据网格中列的宽度。我已经尝试过类似`textbox1.width = datagrid.columns[1].width`的想法，但这不起作用。有人知道我的问题的解决方案吗？

感谢您的任何回答！

附言。我不能像那样声明宽度（fe `textbox.width = 200`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:01:38.273

尝试这样的事情：

XAML 文件：

```
<Window x:Class="GridAutoWidth.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="30" />
        </Grid.RowDefinitions>
        <DataGrid Name="dgProducts" ItemsSource="{Binding Products}" />

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{Binding ElementName=dgProducts, Path=Columns[0].ActualWidth}" />
                <ColumnDefinition Width="{Binding ElementName=dgProducts, Path=Columns[1].ActualWidth}" />
                <ColumnDefinition Width="{Binding ElementName=dgProducts, Path=Columns[2].ActualWidth}" />
            </Grid.ColumnDefinitions>            
            <TextBox Grid.Column="0" />
            <TextBox Grid.Column="1" />
            <TextBox Grid.Column="2" />            
        </Grid>
    </Grid>
</Window> 
```

代码隐藏文件：

```
using System.Windows;

namespace GridAutoWidth
{    
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new MainViewModel();
        }
    }
} 
```

主视图模型：

```
using System.Collections.ObjectModel;

namespace GridAutoWidth
{
    class MainViewModel
    {
        public MainViewModel()
        {
            for (int i = 0; i < 10; i++)
            {
                Products.Add(new Product 
                {
                    Name = "Name " + i,
                    Price = (decimal)(18 * (i + 8.4)),
                    Code = "Sample code " + i
                });
            }
        }

        private ObservableCollection<Product> _products = new ObservableCollection<Product>();

        public ObservableCollection<Product> Products
        {
            get { return _products; }
            set { _products = value; }
        }
    }

    public class Product
    {
        public string Name { get; set; }
        public decimal Price { get; set; }
        public string Code { get; set; }
    }
} 
```

# expressionengine - 进行 Expression Engine 2 开发的免费方式？

> ID：12186126
> 
> 赞同：0
> 
> 时间：2012-08-29T20:38:11.647
> 
> 标签：expressionengine

我正在考虑进行一些 Expression Engine 开发，但看起来 Expression Engine 2.x 不再有免费的 Core 版本可供下载。这是针对单个客户的，因为我通常不做 EE 工作。

我是否可以将他们的文件/数据库下载到我的本地机器上进行开发，或者这会违反任何类型的许可吗？或者我是否应该购买许可证，即使我自己不会运行 EE 站点？客户端拥有完整的 EE 许可证，但我不知道我想花 99 美元为客户端构建一个基本模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:06:41.147

> 购买 ExpressionEngine 许可证后，可以在生产环境中进行单个“实时”安装，并根据需要进行辅助“仅限开发使用”安装，以支持实时安装（例如开发和登台服务器）。

参考：[http ://expressionengine.com/user_guide/license.html](http://expressionengine.com/user_guide/license.html)

所以，是的，如果您下载客户端文件/数据库并在本地安装以继续构建或测试它，那完全没问题，并且在许可协议范围内。

# php - 在开始时需要带有斜杠的先前目录文件有什么区别吗？

> ID：12186129
> 
> 赞同：0
> 
> 时间：2012-08-29T20:38:28.280
> 
> 标签：php, include, include-path, slash

说我在`foo/bar/index.php`并且想要`foo/index.php`。

我要求它说`require_once '../index.php';` 我在某处看到这样做不是一个好习惯，最好在前面加上一个斜线`require_once '/../index.php';`

你能解释一下区别以及为什么一个比另一个更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:41:30.920

你最好使用`/foo/index.php` `../`只会让你退一步。因此，如果您的目录结构发生变化，您将不得不更改所有链接。

如果您可以提供帮助，请从根开始构建链接，而不是相反。

# python - Wing IDE 101 说某些值无效

> ID：12186132
> 
> 赞同：0
> 
> 时间：2012-08-29T16:25:25.543
> 
> 标签：python, wing-ide

在 WingIDE 101 中：

当我转到源-当前文件属性-调试-每次运行前显示此对话框-应用：我收到错误：

> 某些值无效：
> 
> *   Python 可执行文件“C:\Program Files\Common Files\Microsoft Shared\Windows Live\”不是文件
> *   初始目录 '' 不存在
> 
> 请更正这些值并重试。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:58:23.180

检查 Initial Directory 的单选按钮选择是否设置为 Use Default 或在此处输入有效的初始目录（如果将其设置为 Custom）。同样，在 Environment 选项卡下，您需要更正 Python Executable 的单选按钮设置或输入 python.exe 的有效路径。

# java - 字符串布尔错误java

> ID：12186141
> 
> 赞同：-3
> 
> 时间：2012-08-29T20:39:05.133
> 
> 标签：java, string, boolean

有人能告诉我我在这里做错了什么吗？

```
(Util.parseBoolean((String)request.getAttribute("testVal"), false)) 
```

我收到此错误。

```
java.lang.ClassCastException: java.lang.Boolean incompatible with java.lang.String 
```

如果我从请求中得到什么值会这样做。谢谢

Util 只查找请求值，如果它是 y 或 true，则返回布尔值 true。但我的问题是，当它进入这一行时，它会抛出异常说该错误，所以我无法知道发生了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:56:11.727

当您遇到异常并且您不了解导致它的原因时，好的第一步是准确隔离它发生的位置。在那一行代码中发生了很多事情，因此很难确切知道是什么操作导致了错误。

查看异常的完整堆栈跟踪可能会有所帮助，因为它可以让您了解异常发生时您在执行路径中的位置。

但是，一种简单的调试技术是将具有许多操作的一行分成许多具有较少操作的行，并查看哪一行实际生成了异常。在您的情况下，这可能类似于：

```
Object o = request.getAttribute("testVal");
String s = (String) o;
boolean b = Util.parseBoolean( s, false ) 
```

如果 Shivan Dragon 提出的原因是正确的，那么这三行中的第二行将发生异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:45:27.170

很可能这段代码：`request.getAttribute("testVal")`返回一个布尔值，它不能转换为字符串，因此是（运行时）异常。

任何一个：

*   检查使用布尔值（类似于`request.setAttribute("testVal", Boolean.FALSE)`）填充请求属性“testVal”并用字符串替换该值的代码

或者

*   不要在代码中将值转换为 String，也不要使用看似实用的类从 String (*) 中构建布尔值

(*) 顺便说一句，布尔类可以通过其孤独的自我完成所有工作，无需为此创建自己的库：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html#valueOf(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html#valueOf(java.lang.String) )

# html - 垂直对齐居中图像

> ID：12186142
> 
> 赞同：0
> 
> 时间：2012-08-29T20:39:13.227
> 
> 标签：html, css, image, vertical-alignment

对我来说，图像不会以垂直对齐为中心，因为它们似乎应该如此。我只在怪癖模式下为 IE7 编码（不幸的是）。我的代码如下。任何人都知道为什么这不会垂直对齐

```
<html>
<head>
</head>
<body>
<div style="height:500px; width 500px; line-height:500px; background-color:Green; vertical-align:middle;">
   <img src="./images/load.gif" style="vertical-align:middle;"/>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:46:36.000

如果要在 div 中垂直对齐图像，则应执行以下操作：

```
div {
    position:relative;
    height:500px;
    width:500px;
}

div img {
    position:absolute;
    top:50%;
    margin-top:-XXXpx; /* where XXX is half the height of the image */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:24:12.827

您可以将图像设置为背景图像，然后使用以下内容将背景居中：

```
<div style="height:500px; width 500px; line-height:500px; background: green url('/images/load.gif') left center no-repeat ; "></div> 
```

# ssis - SSIS - 如何访问包含在 Foreach 循环容器中的脚本任务中的结果集数据？

> ID：12186148
> 
> 赞同：0
> 
> 时间：2012-08-29T20:39:34.533
> 
> 标签：ssis, foreach-loop-container

我有两个嵌套的 foreach 循环容器。每个都在不同的结果集上循环。我有一个脚本任务，在内部 foreach 循环容器中，我需要能够访问两个循环的当前行的值。一种方法是在两个循环上使用变量映射，但是有没有办法从脚本中访问当前行？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:58:10.027

如果将此变量添加到脚本任务编辑器中的列表或列表中，则可以通过对象`Variables`的属性访问在脚本任务中的循环容器中映射的变量。`Dts``ReadOnlyVariables``ReadWriteVariables`

将每个循环的当前行映射到变量，然后在脚本任务中访问此变量。这还不够吗？

例子：

```
string fileName = (string) Dts.Variables["FileName"].Value; 
```

您可以在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/ms135941.aspx](http://msdn.microsoft.com/en-us/library/ms135941.aspx)

更新：
您可以一次将整行映射到变量。用作变量类型并在Foreach 循环中的变量映射中`Object`设置 Index = 。您应该收到枚举器，该类型与枚举集合有关。`-1`

# php - 对基于浏览器的 YouTube API 使用客户端身份验证时，oauth2 的重定向 URI 片段中有额外的字段

> ID：12186151
> 
> 赞同：2
> 
> 时间：2012-08-29T20:39:50.297
> 
> 标签：php, html, redirect, uri, oauth-2.0

我正在尝试设置一种使用 YouTube API 将视频上传到 YouTube 的自动方式。该应用程序需要上传视频以供 YouTube 进行某些处理。目前，我正在设置 oauth2.0 部分，并且能够重定向用户以使用他们的信息登录。但是，当用户随后使用我指定的重定向 uri 重定向回我的站点时，我需要能够接受 URL 末尾的自定义字段。现在，Web 服务器只是将用户重定向到我想要的页面，但会删除 YouTube 返回的所有关于身份验证的信息。我根本不懂PHP，但认为它可能是解决这个问题的方法。本质上，我希望能够将用户重定向到网站上保留额外信息的页面，以便我可以使用它。谢谢你的帮助。

[http://ocf.berkeley.edu/~gregory/youtubeTestCode/indexRedirect#access_token=ya29.AHES6ZS8kOZN2T59fKpoUE0t7roUXqTPWDAwTMvrhZ5TjlZO57JZNQ&token_type=Bearer&expires_in=3600](http://ocf.berkeley.edu/~gregory/youtubeTestCode/indexRedirect#access_token=ya29.AHES6ZS8kOZN2T59fKpoUE0t7roUXqTPWDAwTMvrhZ5TjlZO57JZNQ&token_type=Bearer&expires_in=3600)

重定向格式为[http://ocf.berkeley.edu/~gregory/youtubeTestCode/indexRedirect](http://ocf.berkeley.edu/~gregory/youtubeTestCode/indexRedirect)后跟 #access_token=ya9232.jdfka7327293&token_type=Bearer&expires_in=3600

但是，我没有包含此特定 URL 的页面..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:26:30.270

YouTube 有两种身份验证方法 - 客户端和服务器端。（实际上还有更多，但我从未使用过其他的）。

文档是[https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2)但我会尝试解释您需要的内容。

“客户端”是您正在使用的 - 您基本上通过 URL 发送用户并让谷歌完成工作并取回访问令牌。

“服务器端”是您需要的（如您所料）。要进行转换，而不是将用户发送到以“&response_type=token”结尾的 url，请将此位更改为“&response_type=code& access_type=offline”

当您收到回电时，您有 ?code=4/ux5gNj-_mIu4DOD_gNZdjX9EtOFFf - 希望您可以在 # 之前阅读此内容

然后，您使用 POST 将此代码发送到 Google 服务器，并以 JSON 格式发回令牌。之前取自该页面：

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

code=4/ux5gNj-_mIu4DOD_gNZdjX9EtOFf&
client_id=1084945748469-eg34imk572gdhu83gj5p0an9fut6urp5.apps.googleusercontent.com&
client_secret=hDBmMRhz7eJRsM9Z2q1oFBSe&
redirect_uri=http://localhost/oauth2callback&
grant_type=authorization_code 
```

响应是：

```
{
  "access_token" : "ya29.AHES6ZTtm7SuokEB-RGtbBty9IIlNiP9-eNMMQKtXdMP3sfjL1Fc",
  "token_type" : "Bearer",
  "expires_in" : 3600,
  "refresh_token" : "1/HKSmLFXzqP0leUihZp2xUt3-5wkU7Gmu2Os_eBnzw74"
} 
```

所以“相对”简单地改变，但你需要 PHP 部分来做 POST，因为它需要你的密钥（你不想通过 Javascript 透露）。

我会把你留给谷歌如何：

1.  在 PHP 中读取参数（提示 - 使用 $_GET['paramter name']）
2.  使用 CURL 向 Google 发送 POST 消息。

另一种方法是查看 YouTube SDK for PHP - 这些是预先编写的库，其中包含 POST 和 GET 位。但这使用了一种叫做“Zend”的东西，它可能会变得复杂。[https://developers.google.com/youtube/2.0/developers_guide_php](https://developers.google.com/youtube/2.0/developers_guide_php)

# java - 处理大量报告数据

> ID：12186152
> 
> 赞同：0
> 
> 时间：2012-08-29T20:39:58.297
> 
> 标签：java, architecture, reporting, scalability

我有一个报告系统，我需要将来自 3 个不同服务器（系统）的数据组合起来显示给用户。就几千条记录而言，这可以正常工作，但随着系统超时的增加。

我正在考虑使用另一种方法。当用户运行结果时，我将生成一个向数据库生成报告的请求。一个正在运行的守护程序将拾取它并收集数据并生成报告，并将通过电子邮件将报告数据的链接发送给用户。我可以在这里做很多事情。

1）将收集的数据以表格形式插入数据库，以便在页面上简单地显示给用户。2）生成html并将其存储到数据库中。

虽然我认为第一个选项是最好的，但还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:24:03.250

几个想法：

1.  考虑使用 hadoop 使您的报告处理非常可扩展
2.  考虑每隔一段时间（例如每小时）运行报告。当用户请求报告时，您可以立即向他们显示最近生成的报告。
3.  绝对不要存储html。而是在用户发出请求时呈现它。顺便说一句，这也使您可以灵活地向不同的用户显示不同版本的报告

# asp.net - 插入错误信息

> ID：12186157
> 
> 赞同：1
> 
> 时间：2012-08-29T20:40:30.027
> 
> 标签：asp.net, sql-server, insert

我使用 ASP.NET 中的 Visual Web Developer 和 SQL Server 数据库创建了一个 Web 应用程序。在`SqlDataSource`我与`INSERT INTO`.

所以我的代码是：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
            SelectCommand="SELECT * FROM [Table1]"
            InsertCommand="INSERT INTO [Table1] ([Name(nick)], [E-mail], [Text]) VALUES (@Name(nick), @E-mail, @Text)">
        <InsertParameters>
            <asp:Parameter Name="Name(nick)" />
            <asp:Parameter Name="E-mail" />
            <asp:Parameter Name="Text" />
        </InsertParameters>
 </asp:SqlDataSource> 
```

一切看起来都很好，没有任何错误。当我在网络浏览器中查看我的项目或开始调试时，我有正常的网页。然后我输入一些文本，点击发送按钮和应用程序中的错误。

> *说明：'(' 附近的语法不正确。必须声明标量变量“@Name”。*
> 
> *规范：System.Data.SqlClient.SqlException：'(' 附近的语法不正确。必须声明标量变量“@Name”。*

在我的表格中，我拥有所有这些值，在我的网页中，我也使用它。你能帮我看看有什么问题吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:41:48.317

替换为这个查询

```
INSERT INTO Table1 (Name, E-mail, Text) VALUES (@Name, @E-mail, @Text) 
```

（尼克）在您的查询中产生问题

```
InsertCommand="INSERT INTO Table1 (Name, E-mail, Text) VALUES (@Name, @E-mail, @Text)"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:43:10.493

语法似乎不正确。您需要列出字段名称，然后是参数名称
，我认为正确的字段是`Name`，并且您有一个名为的参数`@nick`，但据我所知，也可能是相反的。

```
 InsertCommand="INSERT INTO [Table1] ([Name], [E-mail], [Text]) VALUES (@nick, @E-mail, @Text)" 
```

附带说明一下，尽量避免使用数据类型 (TEXT) 的名称作为字段名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:51:50.973

`Name(nick)`不允许包含括号的参数，它会导致问题。`InsertParameters`只需在和 中替换它`InsertCommand`。

```
 InsertCommand="INSERT INTO [Table1] ([Name], [E-mail], [Text]) VALUES (@Name, @E-mail, @Text)">
  -- [Name] is considered as column in the table
 <asp:Parameter Name="Name" /> 
```

# trigger.io - trigger.io - 嵌入外部网站

> ID：12186160
> 
> 赞同：0
> 
> 时间：2012-08-29T20:40:45.360
> 
> 标签：trigger.io

我想在我的应用程序中嵌入一个外部网站，所以我在这里使用标签进行了尝试：

```
<iframe src="http://www.uniteich.at" frameborder="0" width="420" height="315"></iframe> 
```

但我收到以下错误：“不安全的 JavaScript 尝试从带有 URL [http://www.uniteich.at/](http://www.uniteich.at/)的框架访问带有 URL content://io.trigger.forge2dd999d0f14b11e1bc8612313d1adcbe/src/index.html 的框架。域、协议和端口必须匹配。”

那么有没有一个很好的解决方案来使用 trigger.io 在 ios/android 应用程序中嵌入一个网站？

提前致谢，

安内

编辑：好的，为了更清楚我想要什么：我只想在用户点击底部的特定标签栏按钮时加载一个外部网站。我做了这个事件处理程序：

```
 var dessertButton = forge.tabbar.addButton({
text: "Uniteich",
icon: "img/strawberry.png",
index: 2
}, function (button) {
button.onPressed.addListener(function () {
    //LOAD EXTERNAL WEBSITE IN CONTENT CONTAINER HERE
});
}); 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:32:30.930

这个问题是跨域请求。欲了解更多信息，请阅读[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

要解决这个问题，您需要使用[forge.request](http://docs.trigger.io/en/v1.4/modules/request.html#modules-request)。将 www.uniteich.at 添加到您的配置权限后，首先尝试简单的 forge.get，如下所示：

```
button.onPressed.addListener(function () {
   var mainElement = document.getElementById("main");

   forge.request.get("http://www.uniteich.at/index.html", function(content) {
     mainElement.innerHTML = content;
   }, 
   function(error) {
     mainElement.innerHTML = "<b>Error</b>" + error.message;
   });
}); 
```

如果这不起作用或不够（我现在不在我的开发计算机旁），您可以使用 forge.request.ajax 的更多选项。

# vim - 使用 Linux shell 脚本编辑和重命名文件

> ID：12186161
> 
> 赞同：1
> 
> 时间：2012-08-29T20:40:53.520
> 
> 标签：vim, vi, ex, ed

我正在尝试使用 Vi 或 ex 执行命令以通过删除前五行来编辑文件，替换`x`为`y`，删除每行末尾的多余空格但保留回车符，并删除文件的最后八行，然后将文件重命名为 shell 脚本并从当前脚本运行新脚本。

这将是在 cron 中安排的。我一直在寻找一种使用命令行或 Vim 脚本或其他东西的简单方法。

有任何想法吗？输入文件的格式没有变化，只是行数，所以我不能指定最后八行的行号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:26:18.477

您实际上在这里有大约六个问题。这是前五个的答案，这可能是您最难解决的问题：

```
sed -e ':label' -n -e '1d' -e 's/x/y/g' -e 's/[ \t]*$//g' -e '1,9!{P;N;D};N;b label' file.txt > script.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:40:51.780

Vi 是一个交互式编辑器。您可能不想将它用于将由 cron 运行的东西。另外，我同意评论说这可能是一个坏主意。是因为它可能：

```
printf 'one\ntwo\nthree\nfour\nfive\necho x \n1\n2\n3\n4\n5\n6\n7\n8\n' \
| sed '1,5d;s/  *$//;s/x/y/' \
| tail -r | sed 1,8d | tail -r \
| sh 
```

我们的第一个 sed 脚本完成了大部分工作。我们用 反转行`tail -r`，然后删除前 8 行，然后再次反转。这修剪了最后 8 行。

请注意，在 Linux 系统（或任何带有 GNU coreutils 的系统）上，您可能还有一个`tac`反转行的命令，但`tail -r`更便携。

此外，final`| sh`只是运行输出。如果你真的想把它保存为脚本，你可以通过将输出重定向到一个文件来做到这一点......但我至少会让你想象一下。不能为您编写所有脚本，可以吗？！:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:43:46.673

要通过脚本编辑文件，您可以使用`ed` （即使很难学习或记住）。

您还可以使用一些脚本语言（Python、Perl、AWK、Ruby）来实现您的目标。

# voip - 我需要什么来开发一个星号脚本来自动创建扩展并将其分配给加入我的网络的客户

> ID：12186162
> 
> 赞同：1
> 
> 时间：2012-08-29T20:41:15.457
> 
> 标签：voip, asterisk, cisco

这个想法是有一个安装了 Asterisk 服务器的 LAN，这样如果有人连接到网络，asterisk 服务器就会了解“加入的客户端事件”连接，从而创建该客户端向另一个人发出 voip 呼叫所需的凭据在网络上。我对 voip 和星号都是新手，所以请多多包涵，因为我不知道是否存在这样的功能。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:12:58.097

您需要阅读有关星号实时架构的信息。

但无论如何，你需要编写 voip 客户端来支持自动配置。

# compact-framework - 无法加载 DLL 'coredll.dll'：找不到指定的模块

> ID：12186167
> 
> 赞同：1
> 
> 时间：2012-08-29T20:41:50.130
> 
> 标签：compact-framework, opennetcf

我正在编写一个小应用程序来测试 OpenNETCF 库加载并偶然发现了这个奇怪的消息

```
Unable to load DLL 'coredll.dll' : the specified module could not be found 
```

我在 Windows Embedded 7 Compact 瘦客户端上使用 Compact Framework 3.5。

代码是

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

using OpenNETCF.Threading;

namespace Windows7EmbeddedTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

            MessageBox.Show("Starting the test");

            bool notRunning;
            NamedMutex mutex = new NamedMutex(false, "myappname", out notRunning);

            MessageBox.Show("test went well!");

        }    
    }
} 
```

有什么想法可以解决这个问题吗？我在我的 Windows Embedded Compact 7 瘦客户端中搜索 coredll.dll，但什么也没找到。我的理解是它是 Windows CE 设备的一个组成部分。那么为什么 OpenNETCF 在 Windows Embedded Compact 7 机器上找不到呢？我需要手动下载/安装这个 dll 吗？注册吗？如果 Windows Embedded Compact 7 附带它，那么寻找它的途径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:43:41.037

您是否绝对肯定您的瘦客户端设备运行的是 Windows Embedded Compact (Windows CE) 而不是 Windows Embedded Standard (WES)？

我问的原因是因为 coredll.dll 是 Windows CE 操作系统的一个基本部分。它类似于桌面的 kernel32.dll 和 user32.dll（以及其他几个），它们都封装成一个。不可能有一个不包含 coredll.dll 的 Windows CE 操作系统。

通常它是一个隐藏文件，因此它不会显示在资源管理器中，除非您“显示隐藏文件”或使用远程文件查看器之类的东西，但 .NET 加载程序找不到它的事实让我怀疑它不存在，这反过来让我相信你在运行 WES 而不是 CE。

# javascript - 在javascript中将一位数更改为两位数

> ID：12186168
> 
> 赞同：2
> 
> 时间：2012-08-29T20:41:57.140
> 
> 标签：javascript

如何将零添加到输出中以获得百分比？这是代码：

```
 var margin = 0;             
    if(total_quantity>1000){margin = .32;}
    else if(total_quantity>575){margin = .35;}
    else if(total_quantity>143){margin = .36;}
    else if(total_quantity>71){margin = .38;}
    else if(total_quantity>36){margin = .40;}
    else{margin = .55;} 
    document.getElementById('margin').value=margin; 
```

0.40 边距的输出始终为 4%。我需要它是 40%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:52:29.967

```
var margin = 0;
if (total_quantity > 1000) {
    margin = .32;
} else if (total_quantity > 575) {
    margin = .35;
} else if (total_quantity > 143) {
    margin = .36;
} else if (total_quantity > 71) {
    margin = .38;
} else if (total_quantity > 36) {
    margin = .40;
} else {
    margin = .55;
}
function formatPercentage (decimalNumber) {
    return parseInt(decimalNumber * 100, 10); + "%";
}

document.getElementById('margin').value = formatPercentage(margin); 
```

* * *

**编辑**

你说**“但我得到了两个百分号”** ......那么这应该是你的`formatPercentage`功能：

```
function formatPercentage (decimalNumber) {
    return parseInt(decimalNumber * 100, 10);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:52:03.040

在您的帖子中，您可能想说“0.40 边距的输出始终为 0.4%。我需要它为 40%”，对吗？将您的保证金乘以 100，您将获得 40% 而不是 0.4%

# ruby-on-rails - 使用选择标签销毁多条记录

> ID：12186169
> 
> 赞同：0
> 
> 时间：2012-08-29T20:41:58.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我试图允许用户在我的 rails 3 应用程序中选择要销毁的多个记录。

我的产品索引中有一个 check_box_tag，如下所示：

```
 <td><%= check_box_tag "product_ids_destroy[]", product.id %></td> 
```

并在我的索引中添加了提交标签：

```
<%= submit_tag "Delete Selected" %> 
```

在我的产品控制器中，我创建了一个方法：

```
 def destroy_select
    product_ids = params["product_ids_destroy"]
    objs = Product.find(:all, :conditions => ["products.id IN (?)", product_ids])
    objs.each { |o| o.destroy}
  end 
```

并定义了我的 routes.rb：

```
 resources :products do
    collection do
      delete 'destroy_select'
    end 
```

该方法在控制台中有效。如何将我从索引中收集的 product_ids“连接”到控制器方法以销毁每条记录？我可以在提交标签中添加该方法作为选项吗？另外，如果我想在销毁之前添加确认，是否将其添加到我的提交标签中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:54:52.100

检查您的路线使用

```
bundle exec rake routes 
```

然后在您的表单上，您可以将表单的操作设置为该命名路由和删除方法

您可以对控制器的操作进行微小的重构

```
def destroy_select
  Product.destroy_all(params["product_ids_destroy"]) unless params["product_ids_destroy"].blank?
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:01:16.743

要将表单提交与控制器中的正确操作挂钩，您必须使表单使用 DELETE 方法。该选项 ( `:method => :delete`) 必须在您的`form_for`or`form_tag`函数调用中设置。

不过，您可以将您的确认消息挂在`submit_tag`它本身上。查看[文档](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/submit_tag)`:confirm => 'My message?'`中的选项。

希望有帮助！

# javascript - Angularjs 发送邮件

> ID：12186173
> 
> 赞同：2
> 
> 时间：2012-08-29T20:42:08.227
> 
> 标签：javascript, jquery, javascript-framework, email, angularjs

我开始使用 AngularJs，我真的很喜欢它，并且刚刚发现了这个 angular 插件 -> [https://github.com/witoldsz/angular-http-auth](https://github.com/witoldsz/angular-http-auth)，它可以让你实现一个识别系统。

有人知道我提到的用于轻松发送电子邮件的资源吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:17:24.320

您必须在服务器上实现发送电子邮件。或者，有一些付费服务，如[Postmark](http://developer.postmarkapp.com/)，为您提供了一个 JSON API，可以很容易地连接到 AngularJS 以发送电子邮件。

# matlab - 还有比这更好的矢量化技术吗？

> ID：12186178
> 
> 赞同：4
> 
> 时间：2012-08-29T20:42:37.477
> 
> 标签：matlab, vector, matrix, vectorization

我正在尝试查看是否有其他方法可以更有效地对该代码示例进行编码。这里，y 是 1xM 矩阵，（例如，1x1000），z 是 NxM 矩阵，（例如，5x1000）。

```
mean(ones(N,1)*y.^3 .* z,2) 
```

这段代码工作正常，但我担心如果 N 增加很多，`ones(N,1)*y.^3`可能会变得太浪费并使一切变慢。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:21:03.780

对于这么小的矩阵来说，它并没有那么糟糕。很多时候，您可以从使用 bsxfun 来解决此类问题。这里的矩阵太小而无法真正获得任何东西。

```
>> N = 5;M =1000;
>> y = rand(1,M);
>> z = rand(N,M);
>> mean(ones(N,1)*y.^3 .* z,2)
ans =
      0.12412
      0.11669
      0.12102
      0.11976
      0.12196

>> mean(bsxfun(@times,y.^3,z),2)
ans =
      0.12412
      0.11669
      0.12102
      0.11976
      0.12196

>> z*y.'.^3/M
ans =
      0.12412
      0.11669
      0.12102
      0.11976
      0.12196 
```

如您所见，所有三种解决方案都返回相同的结果。所有都同样有效。

现在我将比较所需的时间。

```
>> timeit(@() mean(ones(N,1)*y.^3 .* z,2))
ans =
   0.00023018

>> timeit(@() mean(bsxfun(@times,y.^3,z),2))
ans =
   0.00026829

>> timeit(@() z*y.'.^3/M)
ans =
   0.00016594 
```

正如我所说，你不会获得太多。事实上，bsxfun 并没有什么收获，甚至还慢了一点。但是，如果您将表达式重写为我提出的第三种形式，您可以获得一点。不多，但有点。

编辑：如果 N 很大，那么时间会发生一些变化。

```
>> N = 2000;M = 1000;
>> y = rand(1,M);
>> z = rand(N,M);
>> timeit(@() mean(ones(N,1)*y.^3 .* z,2))
ans =
     0.034664

>> timeit(@() mean(bsxfun(@times,y.^3,z),2))
ans =
     0.012234

>> timeit(@() z*y.'.^3/M)
ans =
    0.0017674 
```

不同之处在于第一个解决方案显式创建了扩展的 y.^3 矩阵。这是低效的。

bsxfun 解决方案更好，因为它从不明确形成扩展 y.^3 矩阵。但是它仍然形成了一个 N×M 的乘积矩阵。所以这个解决方案仍然必须抓取并填充一大块内存。

你应该明白为什么矩阵向量乘法在所有情况下都是最好的。从来没有形成过大的矩阵。由于 * 只是一个点积（因此是乘积之和），因此它必须更有效。然后我在事后除以 M 以创建所需的平均值。

比上一个小改进...

```
>> timeit(@() z*(y.*y.*y).'/M)
ans =
    0.0015793 
```

略高于幂运算。

和[时间](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)？这来自 File Exchange，这是一个非常有用的实用程序，由 Steve Eddins 编写，用于计时代码片段。

# asp.net-mvc-3 - MVC 音乐商店教程 - 专辑和流派为空

> ID：12186179
> 
> 赞同：1
> 
> 时间：2012-08-29T20:42:37.467
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

通过教程 v2.0，我刚刚添加了对 sdf 数据库的数据访问。当我在运行应用程序后单击 Stores 链接时，我在 StoreController 的以下行中收到 ArgumentNullException：

var 流派 = storeDB.Genres.ToList();

在监视窗口中，我看到 StoreDB 不为空，但专辑和流派为空。起初我认为这是一个连接字符串问题，但我已经从完成的代码文件中提取了数据库以及连接字符串。运行完整的解决方案工作正常，但我的失败如上所述。我没有看到我输入的代码有任何差异。事实上，我输入的大部分内容都是复制粘贴的。

我如何将实际问题归零？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:30:15.963

MusicStoreEntities 类没有从 DbContext 继承。IOW，我已经从类定义中删除了 :DbContext 并且没有注意到它：

```
public class MusicStoreEntities: DbContext
{
    public DbSet<Album> Albums { get; set; }
    public DbSet<Genre> Genres { get; set; }
} 
```

# xcode - 将视图设置为视图控制器的委托

> ID：12186181
> 
> 赞同：0
> 
> 时间：2012-08-29T20:42:46.483
> 
> 标签：xcode, delegates

我在视图控制器中传递数据和执行函数时遇到问题。我想从视图访问视图控制器中的标签出口（是的，我知道这可能是我的应用程序的错误结构）。

有代表团在 UIPopovers 上工作，但我如何将视图的委托设置为 viewcontroller？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:59:38.720

例如，您有一个 UIView 的子类。我们将其命名为 SubClassUIView；在另一个视图中，您想使用来自 SubClassUIView 的数据。所以，你的 SubClassUIView 应该这样做：

子类UIView.h

```
@interface SubClassUIView:UIView

@property (nonatomic, retain) UILabel* someLabelYouWantToUse;

@end. 
```

子类UIView.m

```
@implementation SubClassUIView

@synthesize someLabelYouWantToUse;

@end. 
```

并访问`someLabelYouWantToUse`

```
SubClassUIView* scView = [SubClassUIView alloc]init];
NSLog(@"%@", scView.someLabelYouWantToUse.text); 
```

# php - PHP MySQL - 获取特定行的索引

> ID：12186184
> 
> 赞同：3
> 
> 时间：2012-08-29T20:43:04.973
> 
> 标签：php, mysql, indexing, row

我正在使用 MySQL 数据库来记录我正在创建的游戏中的玩家高分。通过 PHP 文件“highscores.php”访问 MySQL 数据库。

高分都记录在数据库中，但我希望通过 PHP 文件实现实际的排名数字。我希望能够查询特定玩家的排名，而不是只查询他/她的高分。

我正在使用它来获得我的播放器的高分：

```
$username = $_GET["username"];

$checkID = mysql_query("SELECT * from Highscores WHERE Username =
'$username' ORDER BY Score DESC");

$row = mysql_fetch_array($checkID);

echo $row["Score"]; 
```

现在要获得我的玩家在所有其他玩家中的排名，我需要做的就是找到相关行的索引......但是我该怎么做呢？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:53:47.007

您可以像这样直接使用 SQL 来执行此操作：

```
SELECT @rownum:=@rownum+1 ‘rank’, h.*
FROM Highscores h, (SELECT @rownum:=0) r
ORDER BY score DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:14:03.437

你可以做 -

```
// gets all the records with higher scores than current user
$ranking = mysql_query("SELECT count(*) AS ranking FROM Highscores WHERE Score > (SELECT Score FROM Highscores WHERE Username = '$username' ORDER BY Score DESC LIMIT 1)");
// creates an array from the mysql query above
$ranking_array = mysql_fetch_assoc($ranking); 
// gets the number of higher scores from the array
$ranked_above = $ranking_array['ranking']; 
// takes the total number ranked above and adds a 1 to get their rank
$current_rank = $ranked_above++; 
```

请注意上面关于 SQL 注入的评论，不再使用`mysql_`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:50:22.457

根据您的数据库设计，我不知道除了从按分数排序的数据库中选择整个分数表之外，您还有很多选择，循环遍历它，为每个项目分配分数索引值，但只提取那些特定于您的项目用户进行展示。

听起来您可能想要考虑运行一些过程来定期对数据库中的分数进行排名，或者可能创建一个存储过程来选择所有的 socres，给它们排名值，并从中选择与用户相关的值。

# c# - 为什么这个下拉列表没有做它应该做的？

> ID：12186191
> 
> 赞同：0
> 
> 时间：2012-08-29T20:43:21.557
> 
> 标签：c#, javascript, asp.net

我在 asp.net 中有一个下拉列表，在视图中使用嵌套的 for 循环，以及我从控制器传递的变量。向用户显示的值应该是停靠点的名称，而值是该停靠点的 id。名称和停止 ID 都在我从控制器传递到视图的列表中。但是，当显示下拉列表时，会在整个列表中重复第一个站点名称。我知道正在选择正确的停止 ID，但名称重复。这是我的代码：

```
 <select id="stop" onchange="sendInfo();">

@foreach(var blah in ViewBag.foobar)
{
  foreach (var foo in ViewBag.stops)
    { 
      <option value="@foo">@blah</option>
    }
}
 </select> 
```

foo 是正确使用的停止 id，但 blah 是停止名称的名称，它是重复的。我觉得我很近，但并不完全在那里。我希望这足够清楚，解释起来很混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:49:18.010

试试这个：

```
 @{
            if(ViewBag.foo != null && ViewBag.blah != null && ViewBag.foo.Count == ViewBag.blah.Count)
            {
                for (int i = 0; i < ViewBag.foo.Count; i++ )
                {
                    <option value="@ViewBag.foo[i]">@ViewBag.blah[i]</option>
                }
            }
        } 
```

另外，一些小贴士：

1.  对相关数据使用两个列表是不合适的。为什么你没有一个单一的属性，比如 a `Dictionary<string, string>`？
2.  `foo`而且`blah`不是他们的真名，对吧？
3.  避免使用`ViewBag`与功能相关的数据（如创建控件，就像您正在做的那样）。对于这种情况，最好创建一个专门的**视图模型**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:59:38.153

我不肯定我明白你在说什么，但如果停止和 ID 之间存在 1:1 的关系，你为什么不创建一个包含两者的类，比如

```
public class Stop
{
    public string Name { get; set; }
    public int Id { get; set; }
} 
```

并传入这些列表并执行一个循环：

```
@{
    var stops = (IEnumerable<Stop>)ViewBag.Stops;
}

<select>
    foreach (var stop in stops)
    {
        <option value="@stop.Id">@stop.Name</option>
    }
</select> 
```

# c++ - 简单 SSE 循环比非 SSE 版本慢

> ID：12186193
> 
> 赞同：1
> 
> 时间：2012-08-29T20:43:29.917
> 
> 标签：c++, gcc, sse

我正在尝试将 SSE 浮点 [4] 添加与标准浮点 [4] 添加进行比较。作为一个演示，我计算了有和没有 SSE 的总和分量的总和：

```
#include <iostream>
#include <vector>

struct Point4
{
  Point4()
  {
    data[0] = 0;
    data[1] = 0;
    data[2] = 0;
    data[3] = 0;
  }

  float data[4];
};

void Standard()
{
  Point4 a;
  a.data[0] = 1.0f;
  a.data[1] = 2.0f;
  a.data[2] = 3.0f;
  a.data[3] = 4.0f;

  Point4 b;
  b.data[0] = 1.0f;
  b.data[1] = 6.0f;
  b.data[2] = 3.0f;
  b.data[3] = 5.0f;

  float total = 0.0f;
  for(unsigned int i = 0; i < 1e9; ++i)
  {
    for(unsigned int component = 0; component < 4; ++component)
    {
      total += a.data[component] + b.data[component];
    }
  }

  std::cout << "total: " << total << std::endl;
}

void Vectorized()
{
  typedef float v4sf __attribute__ (( vector_size(4*sizeof(float)) ));

  v4sf a;
  float* aPointer = (float*)&a;
  aPointer[0] = 1.0f; aPointer[1] = 2.0f; aPointer[2] = 3.0f; aPointer[3] = 4.0f;

  v4sf b;
  float* bPointer = (float*)&b;
  bPointer[0] = 1.0f; bPointer[1] = 6.0f; bPointer[2] = 3.0f; bPointer[3] = 5.0f;

  v4sf result;
  float* resultPointer = (float*)&result;
  resultPointer[0] = 0.0f;
  resultPointer[1] = 0.0f;
  resultPointer[2] = 0.0f;
  resultPointer[3] = 0.0f;

  for(unsigned int i = 0; i < 1e9; ++i)
  {
    result += a + b; // Vectorized operation
  }

  // Sum the components of the result (this is done with the "total += " in the Standard() loop
  float total = 0.0f;
  for(unsigned int component = 0; component < 4; ++component)
  {
    total += resultPointer[component];
  }
  std::cout << "total: " << total << std::endl;
}

int main()
{

//  Standard();

  Vectorized();

  return 0;
} 
```

但是，使用标准方法的代码似乎比使用矢量化方法（约 0.4 秒）的代码更快（~.2 秒）。是因为 for 循环对 v4sf 值求和吗？有没有更好的操作我可以用来计算这两种技术之间的差异并仍然比较输出以确保两者之间没有差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:07:30.280

然后，您的版本较慢的原因是 SSE 是您必须每次迭代从 SSE 寄存器解压缩到标量寄存器 4 次，这比从矢量化加法中获得的开销更大。看看拆解，你应该得到一个更清晰的画面。

我认为您想要做的是以下（使用 SSE 更快）：

```
for(unsigned int i = 0; i < 1e6; ++i)
{
    result += a + b; // Vectorized operation
}

// Sum the components of the result (this is done with the "total += " in the Standard() loop
for(unsigned int component = 0; component < 4; ++component)
{
    total += resultPointer[component];
} 
```

此外，以下可能会更快：

```
for(unsigned int i = 0; i < 1e6/4; ++i)
{
    result0 += a + b; // Vectorized operation
    result1 += a + b; // Vectorized operation
    result2 += a + b; // Vectorized operation
    result3 += a + b; // Vectorized operation
}

// Sum the components of the result (this is done with the "total += " in the Standard() loop
for(unsigned int component = 0; component < 4; ++component)
{
    total += resultPointer0[component];
    total += resultPointer1[component];
    total += resultPointer2[component];
    total += resultPointer3[component];
} 
```

# oracle11g - ORA-00926: 缺少 VALUES 关键字

> ID：12186199
> 
> 赞同：-1
> 
> 时间：2012-08-29T20:43:36.397
> 
> 标签：oracle11g, dbvisualizer

我已将 VALUES 子句移到语句中的不同位置，但没有运气。我是新手，感谢您提供任何帮助。谢谢你。

```
INSERT INTO KEYITEM.296 (KEYVALUECHAR, KEYSETNUM)
VALUES ('NOT PUBLIC', 0)
SELECT
    KEYITEM296.KEYVALUECHAR,
    KEYITEM296.KEYSETNUM
FROM
    ITEMDATA
LEFT OUTER JOIN
    KEYITEM296
ON
    (
       ITEMDATA.ITEMNUM = KEYITEM296.ITEMNUM)
WHERE
    ITEMDATA.ITEMTYPENUM = 862 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:49:29.727

我是 DB2 的粉丝，但您不能在 INSERT 中混合使用 VALUES 和 SELECT。

正确的 SQL 将用于 INSERTing 数据：

```
INSERT INTO KEYITEM.296 (KEYVALUECHAR, KEYSETNUM)
SELECT
    KEYITEM296.KEYVALUECHAR,
    KEYITEM296.KEYSETNUM
FROM
    ITEMDATA
LEFT OUTER JOIN
    KEYITEM296
ON
    (
       ITEMDATA.ITEMNUM = KEYITEM296.ITEMNUM)
WHERE
    ITEMDATA.ITEMTYPENUM = 862 
```

或者

```
INSERT INTO KEYITEM.296 (KEYVALUECHAR, KEYSETNUM)
VALUES ('NOT PUBLIC', 0) 
```

或者，如果您想做 INSERT 然后选择：

```
INSERT INTO KEYITEM.296 (KEYVALUECHAR, KEYSETNUM)
VALUES ('NOT PUBLIC', 0);
SELECT
    KEYITEM296.KEYVALUECHAR,
    KEYITEM296.KEYSETNUM
FROM
    ITEMDATA
LEFT OUTER JOIN
    KEYITEM296
ON
    (
       ITEMDATA.ITEMNUM = KEYITEM296.ITEMNUM)
WHERE
    ITEMDATA.ITEMTYPENUM = 862 ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:47:53.063

```
INSERT INTO KEYITEM296 (KEYVALUECHAR, KEYSETNUM, ITEMNUM)
VALUES ('NOT PUBLIC', 0, 862 );

  --You must complete your insert with ITEMNUM
  -- you must add ; separator
  -- you must delete '.' of your query

SELECT
    KEYITEM296.KEYVALUECHAR,
    KEYITEM296.KEYSETNUM
FROM
    ITEMDATA
LEFT OUTER JOIN
    KEYITEM296
ON
    (
       ITEMDATA.ITEMNUM = KEYITEM296.ITEMNUM)
WHERE
    ITEMDATA.ITEMTYPENUM = 862 ; 
```

# objective-c - 如何检测 Mac 应用程序中按下的按键组合？

> ID：12186201
> 
> 赞同：0
> 
> 时间：2012-08-29T20:43:42.307
> 
> 标签：objective-c, macos, keyboard

我知道 Mac 应用程序中的键盘事件可以像这样触发：

```
- (void) keyDown(NSEvent*)event {
    switch ([event keyCode]) {
        case someKeyCode:
            NSLog(@"blah blah blah");

        default:
            break;
    }
} 
```

但是我如何让我的应用程序对按下的*组合*键做出反应，例如[Konami Code](http://en.wikipedia.org/wiki/Konami_Code)？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:47:02.510

您将需要建立一个历史列表来跟踪过去按下的键无论多长时间。并且当键列表包含与您的“代码”匹配时，无论它是 konami 代码还是其他。您的匹配会触发另一个事件并清除密钥历史记录。

通过控制键的字符串将数据添加到数组中

```
static NSMutableArray *array = [NSMutableArray array];
[array addObject:@"[UP]"]; // etc for each key you would have a special key 
```

然后你可以像这样测试

```
if ([[array componentsJoinedByString:@""] isEqualToString:@"[UP][UP][DOWN][DOWN]"]){
    array = [NSMutableArray array];
    [self commandfound]
} 
```

希望有帮助

# mysql - cPanel Cron 作业没有运行我的 sql 脚本

> ID：12186206
> 
> 赞同：0
> 
> 时间：2012-08-29T20:43:59.810
> 
> 标签：mysql, cron, cpanel

我有一个用户可以实际测试/提交数据的 php/mysql 应用程序，所以我想删除/删除数据库中的所有表并运行我的 sql 脚本以每小时重新创建和填充所有表。

所以，在我的 cpanel 中，我有一个 cron 工作 [见下文]

### /home/lwarinz/call_nw_test_script.sh

```
#!/bin/bash
mysql -hlocalhost -ulwarinz_hawaii -pdbAdmin67 -elwarinz_northwind \
      </home/lwarinz/nw_test_Script.sql; 
```

**注意**：我有删除和重新创建表的查询，但我使用这个简短的查询进行测试：

```
USE lfwebz_northwind;
UPDATE employees SET FirstName = "Elizabeth" WHERE EmployeeID = 3; 
```

**但无论我更改/调整什么，我都会收到以下错误：**

```
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual
that corresponds to your MySQL server version for the right syntax to use near
'lwarinz_northwind' at line 1 
```

我已经改变了很多东西，但仍然没有任何效果。

我知道数据库、用户和密码是正确的。我写了一个小的数据库连接代码来测试，所以我确定。由于我是新手，因此编写 cron 作业，我不知道要检查什么。谁能给我关于我需要测试、更改、移动等的任何想法？

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:47:02.880

/home/lwarinz/call_nw_test_script.sh

```
#!/bin/bash
mysql -hlocalhost -ulwarinz_hawaii -pdbAdmin67 lwarinz_northwind </home/lwarinz/nw_test_Script.sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:45:14.333

因为您是在命令行上指定数据库，所以不要将 USE 作为脚本的一部分。

```
#!/bin/bash
mysql -hlocalhost -ulwarinz_hawaii -pdbAdmin67 lwarinz_northwind \
      </home/lwarinz/nw_test_Script.sql; 
```

脚本：

```
UPDATE employees SET FirstName = "Elizabeth" WHERE EmployeeID = 3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:49:57.857

只是想留下这张便条。我一直在努力解决这个问题，终于到了我知道我的脚本正确的地步。第 4 次联系我的网站提供商，让最后一个人查看脚本并解释它为什么不起作用。长话短说，我的空间中有一些“不正常”的东西需要调整[我仍然不确定我是否相信]，所以它现在可以工作了。

感谢大家的意见，我很感激。

# vba - 在 ms access 2010 中重新启用完整菜单、功能区

> ID：12186208
> 
> 赞同：1
> 
> 时间：2012-08-29T20:44:07.550
> 
> 标签：vba, ribbon, ms-access-2010

我希望我的 Access 程序看起来像独立的，并且我摆脱了自定义的所有菜单。我仍然看到丝带和办公室图标，我会在其中恢复它。然后我找到了隐藏功能区（包括所有菜单）的这个很棒的答案[在 MS-Access 中禁用除报告（打印预览）之外的功能区栏](https://stackoverflow.com/questions/3442894/disabling-the-ribbon-bar-except-for-reports-print-preview-in-ms-access) 所以，我使用了

```
DoCmd.ShowToolbar "Ribbon", acToolbarNo
```

然后是新的问题现在我不能修改任何东西，设计和更多的代码。我该如何恢复？

谢谢

编辑：我知道，

```
DoCmd.ShowToolbar "Ribbon", acToolbarYes
```

可能是要走的路，但我也无法访问 VBA。

阿南塔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:46:44.810

在打开数据库的同时按住 shift 键，然后按下`alt+F11`并查看是否会出现代码窗口。

# objective-c - 将应用程序锁定到一个方向

> ID：12186211
> 
> 赞同：1
> 
> 时间：2012-08-29T20:44:19.897
> 
> 标签：objective-c, ios, xcode

出于几个不同的原因，我想确保我的应用程序只在横向左方向运行。我已取消选择目标摘要中“支持的设备方向”下的所有其他方向，将所有情节提要设置为横向，并将其添加到我的所有课程中：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

但我仍然有一些问题。它启动到横向左侧，无论如何该视图都保持在横向左侧，但是当我按下一个推动新视图的按钮时，它会推动该视图，但如果转动设备，该视图会旋转。如果我推送另一个视图然后在导航控制器栏中按回，它也会默认恢复为纵向。我需要做一些更积极的事情来确保所有视图控制器始终保持在横向状态吗？

# knockout.js - 如何将函数添加到映射对象？

> ID：12186212
> 
> 赞同：1
> 
> 时间：2012-08-29T20:44:22.587
> 
> 标签：knockout.js, knockout-mapping-plugin

我从服务器获取了一组对象，我想向其中添加方法。在下面的示例中，我希望它被称为 doAlert。当我尝试使用 data-bind="click: doAlert" 绑定到 doAlert 时，剔除会引发异常。我怀疑我添加的功能是错误的，所以任何建议都将不胜感激。谢谢

```
 $(document).ready(function () {
    var url = GetUrl();
    $.getJSON(url, function (data) {

        var mapping = {   
            doAlert: function (options) {
                alert('test');    
            }
        }

        var viewModel = ko.mapping.fromJS(data, mapping);
        ko.applyBindings(viewModel);
    });
});

<ul data-bind="foreach: $data">
<li>
    <span data-bind="text: Title"></span>
    <div class="btn-group" style="display:inline">
        <a class="btn-small btn dropdown-toggle" data-toggle="dropdown" href="#">Action
                    <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
            <a data-bind="click: doAlert"><li>Edit</li></a>
            <a><li>Delete</li></a>
        </ul>
    </div>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:49:26.287

查看这个[JsFiddle 演示](http://jsfiddle.net/gurkavcu/RtThN/)

我为演示稍微更改了您的 viewModel，但您的 html 保持不变。

您需要在映射中定义一个创建函数。

```
// Fake Data for demonstration
var fakeData = [{
    "id": 1,
    "Title": "C++"},
{
    "id": 2,
    "Title": "Java"},
{
    "id": 3,
    "Title": "JavaScript"},
{
    "id": 4,
    "Title": "Scala"},
{
    "id": 5,
    "Title": "Python"}
];

function Model() {

var self = this;

// You are using foreach syntax so we need to define an observableArray
this.dataArray = ko.observableArray([]);

this.loadData = function() {   
    $.ajax({
        type: 'POST',
        url: '/echo/json/',
        data: {
            json: ko.toJSON(fakeData)
        },
        success: function(data) {

            var mapping = {

                create: function(options) {                  
                    options.data.doAlert = function() {
                        alert(options.data.Title);
                    }
                    return options.data;
                }
            }
            // Map returning object into the our dataArray
            ko.mapping.fromJS(data, mapping, self.dataArray);
        },
        dataType: 'json'
    });
}
}
};

var viewModel = new Model();
ko.applyBindings(viewModel);
viewModel.loadData();​ 
```

传递给 create 函数的选项参数具有一些属性。我们可以通过 options.data 属性访问我们的数据。[查看映射文档](http://knockoutjs.com/documentation/plugins-mapping.html)中有关选项参数的更多信息

# components - 未处理 ADF 声明性组件？

> ID：12186213
> 
> 赞同：-1
> 
> 时间：2012-08-29T20:44:34.487
> 
> 标签：components, oracle-adf, declarative

所以正如标题所说，我制作了一个声明性组件，但是当我将它添加到网页时，它只显示标签，而不是内容

我的标签

```
> <?xml version='1.0' encoding='UTF-8'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1"
      xmlns:af="http://xmlns.oracle.com/adf/faces/rich">
  <jsp:directive.page contentType="text/html;charset=UTF-8"/>
 <af:componentDef var="attrs" componentVar="component">
 <af:goImageLink id="cm" icon="/img/contextmenu.gif" destination=""
                rendered="#{attrs.showPopup}">
  <af:showPopupBehavior popupId="contextMenu" triggerType="click"
                        alignId="cm" align="endAfter"/>
</af:goImageLink>
<af:popup id="contextMenu" contentDelivery="immediate" launcherVar="source"
          eventContext="self" rendered="#{attrs.showPopup}">
  <af:menu binding="#{backingBeanScope.popupProcedimentos.menu}" id="m1"></af:menu>
</af:popup>
<af:popup rendered="#{attrs.showPopup}" id="p1" contentDelivery="immediate"
          binding="#{backingBeanScope.popupProcedimentos.popupProcedimento}"
          launcherVar="source" eventContext="self">
  <af:dialog binding="#{backingBeanScope.popupProcedimentos.dialog}"
             stretchChildren="first" id="d1" title="Nova janela"
             contentWidth="500" contentHeight="500">
    <af:inlineFrame sizing="preferred"
                    binding="#{backingBeanScope.popupProcedimentos.inlineFrame}"
                    shortDesc="Nova página" id="iframe"
                    source="#{backingBeanScope.listaProcessoAdministrativo.procedimentoUrl}#{attrs.DDocName}"></af:inlineFrame>
  </af:dialog>
</af:popup>
<af:xmlContent>
  <component xmlns="http://xmlns.oracle.com/adf/faces/rich/component">
    <display-name>popupProcedimentos</display-name>
    <component-extension>
      <component-tag-namespace>component</component-tag-namespace>
      <component-taglib-uri>/popupproceds</component-taglib-uri>
      <attribute>
        <attribute-name>showPopup</attribute-name>
        <attribute-class>java.lang.Boolean</attribute-class>
        <default-value>false</default-value>
      </attribute>
      <attribute>
        <attribute-name>DDocName</attribute-name>
        <required>true</required>
        <attribute-class>java.lang.String</attribute-class>
      </attribute>
    </component-extension>
  </component>
</af:xmlContent>
</af:componentDef>
</jsp:root> 
```

我只是像这样在另一个页面中调用它

```
>     <popupproced:popupProcedimentos DDocName="sss" id="popup"  showPopup="true" >  </popupproced:popupProcedimentos> 
```

但是渲染的 html 页面只是显示这样的标签，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:16:52.240

我忘记在我用来测试它的页面的项目中声明标签库。现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:43:26.067

声明性组件的第一行无效

***"> <?xml 版本='1.0' 编码='UTF-8'?>"***

坦率

# php - 使用 Yii Active Record 查找最多一列

> ID：12186217
> 
> 赞同：5
> 
> 时间：2012-08-29T20:44:51.900
> 
> 标签：php, mysql, activerecord, yii, max

Yii Active Record如何找到数据库中一列的最大值？

我可以通过纯 sql 和`createCommand`方法来完成，但我想通过 Active Record 和`CDbCriteria`类来完成。有什么办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T20:56:02.793

您需要按如下方式更改选择标准。

```
$model = new Model;
$criteria=new CDbCriteria;
$criteria->select='max(column) AS maxColumn';
$row = $model->model()->find($criteria);
$somevariable = $row['maxColumn']; 
```

参考：

[http://www.yiiframework.com/forum/index.php/topic/6730-how-can-i-use-max-in-find-method/page_view_findpost_p_80659 *_* _ *_* _](http://www.yiiframework.com/forum/index.php/topic/6730-how-can-i-use-max-in-find-method/page__view__findpost__p__80659)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-08T04:12:16.493

这避免了创建不必要的临时对象：

```
$criteria = new CDbCriteria;
$criteria->select = 'max(column)';
// additional where conditions, if you so wish
$criteria->addColumnCondition(array('published' => 1));
$model = SomeModel::model();
$value = $model->commandBuilder->createFindCommand(
    $model->tableName(), $criteria)->queryScalar(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T06:20:50.420

您可以通过 DESC 限制结果和顺序，例如

```
$criteria = new CDbCriteria;
$criteria->order = 'column DESC';
$row = Model::model()->find($criteria);
$somevariable = $row->column; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T21:47:37.907

如果您需要 WHERE 子句：

在控制器中：

```
$max = $model->getMax($filter); 
```

在模型中：

```
public $maxColumn = 0;
public function getMax($filter = null)
{
    /* Get max in column1 WHERE column2 = $filter */
    $criteria               = new CDbCriteria;
    $criteria->select       = 'MAX(t.column1) as maxColumn';
    $criteria->condition    = 't.column2 LIKE :parm';
    $criteria->params       = array(':parm'=>$filter);

    $tempmodel  = $this->find($criteria);
    $max        = $tempmodel['maxColumn'];
    return $max;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T22:43:34.680

```
$model = MyModel::model();

$maxId = $model->getCommandBuilder()
        ->createSqlCommand('SELECT MAX(id) FROM '.$model->tableName())
        ->queryScalar();

$maxId = Yii::app()->db
        ->createCommand('SELECT MAX(id) FROM '.$model->tableName())
        ->queryScalar(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-20T08:42:22.713

就是这个。

```
function getMaxId( $modelName ){
    $criteria = new CDbCriteria;
    $criteria->order = 'id DESC';
    $model = $modelName::model()->find( $criteria );
    return $model->id;
} 
```

# filtering - D3 过滤数据点

> ID：12186220
> 
> 赞同：2
> 
> 时间：2012-08-29T20:45:09.047
> 
> 标签：filtering, d3.js, geojson

我正在实现经典的墨卡托示例（https://github.com/mbostock/d3/blob/master/examples/mercator/mercator.html），我已将其更改为放大阿富汗并仅使用一个自定义滑块. 我正在读取发生爆炸的地点的 GeoJSON 数据，并且图表在加载时将它们全部映射。我想使用滑块一次仅查看一个月的爆炸点，但无法过滤结果。我已经根据 Google 组中的帖子尝试了几件事，但无法理解如何过滤之前从“explosions.json”中读取的数据。谢谢您的帮助！

```
 <!DOCTYPE html>
    <html>
    <head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>IED Attacks in Afghanistan (2004-2009)</title>
<script type="text/javascript" src="../d3.v2.js"></script>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../lib/jquery-ui/jquery-ui.min.js"></script>
<style type="text/css">

    @import url("../lib/jquery-ui/jquery-ui.css");

    body, .ui-widget {
    font: 14px Helvetica Neue;
    }

    svg {
    width: 960px;
    height: 600px;
    border: solid 1px #ccc;
    background: #eee;
    }

    line {
    stroke: brown;
    stroke-dasharray: 4,2;
    }

    path {
    fill: #ccc;
    stroke: #fff;
    }

    div {
    width: 960px;
    }

</style>
</head>
<body>
<h3>IED Attacks in Afghanistan (2004-2009)</h3>
<script type="text/javascript">

        // Create the Mercator Projection (Map)
        var xy = d3.geo.mercator(),
            path = d3.geo.path().projection(xy);

        // Create the states variable
        var states = d3.select("body")
        .append("svg")
        .append("g")
            .attr("id", "states");
        // Create the equator variable
        var equator = d3.select("svg")
        .append("line")
            .attr("x1", "0%")
            .attr("x2", "100%");
        // Create the explosions variable
        var explosions = d3.select("svg")
        .append("g")
            .attr("id","explosions");

        // Load in the states & equator data from the file 'world-countries.json'
        d3.json("world-countries.json", function(collection) {
            states
                .selectAll("path")
                .data(collection.features)
                .enter().append("path")
                .attr("d", path)
                .append("title")
                .text(function(d) { return d.properties.name; });
            equator
                .attr("y1", xy([0, 0])[1])
                .attr("y2", xy([0, 0])[1]);
        });

        // the variable that holds our translate, center on Afghanistan
        var translate = xy.translate(); //create translation to center gride in different area
        translate[0] = -1741;
        translate[1] = 1487;
        xy.translate(translate); // center

        xy.scale(12000); //zoom in

        // Load in the explosions data from the file 'explosions.json'
        d3.json("explosions.json", function(collection) {
            explosions
                .selectAll("path") //make a path and attach data
                .data(collection.features)
                .enter().append("path")
                .attr("d", path)
                .style("stroke","red") //color the path points
                .style("stroke-width",2) //size of point stroke
                .attr("class","explosionpoint")
                .append("title") //title is the 'name' field in the json file
                .text(function(d) { return d.properties.name; });
        });

    </script>

    <p></p>
    <!-- Slider -->
    <div id="scale"></div><p></p>
    <script type="text/javascript">

        $("#scale").slider({
        min: 20040101, //min : 1/1/04
        max: 20100101, //max: 1/1/10
        value: 20060601, //default slider value
        step: 100, // step is the allow increments the slider can move. 100 = one month
        slide: function(event, ui) {

            /* REMOVE ALL EXPLOSION PATHS EXCEPT FOR A PARTICULAR MONTH OR RELOAD WITH FILTERED RESULTS */
        }
        });

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T18:00:39.640

您需要发布部分或全部的 explodes.json 对象以获得具体答案。但是，如果 JSON 的结构如下`{explosion1:{data1:true, data2:true}, explosion2:{data1:true, data2:false}}`：

```
function filterJSON(json, key, value) {
  var result = {};
  for (var explosionIndex in json) {
    if (json[explosionIndex][key] === value) {
      result[explosionIndex] = json[explosionIndex];
    }
  }
  return result;
} 
```

（例如`filterJSON(myjson, "data1", true)`，将使用 data1:true 给出所有爆炸）

这不是 d3 特有的。

然后你可以在 d3 方面使用这样的东西：

```
explosions.data(myFilteredData).exit().remove(); // remove ones you don't want
explosions.enter().append("path")... // add back ones you do want 
```

* * *

如果我了解您的应用程序，实际上最好只切换`visiblity`SVG 元素的属性。

```
var sliderrange = [20040101, 20040201]; //replace with code based on your slider
explosions.selectAll(".explosionpoint").attr("visibility", function(d) {
  //Replace with the correct date comparison logic
  return d.date < sliderrange[1] && d.date > sliderrange[0] ? "visible" : "hidden";
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-08T08:27:01.480

D3 确实有一种非常自然的方式来做到这一点。我假设您的数据如下所示：

```
[{name: explosion1name, day: 20040110,...}, {name: explosion2name, day: 20040111,...}] 
```

...并且您有一些变量，我们称之为`explosionsData`，以引用数据。

然后，您可以使用从滑块中获取值的函数来绘制爆炸。请参阅`.filter`我在下面添加的内容。

```
function drawExplosions(startDay, endDay) {
    explosions.selectAll("path") //make a path and attach data
            .data(collection.features)
            .enter().append("path")
            .filter( function (d) { return ( (d.day > startDay) && (d.day < endDay) )})
            .attr("d", path)
            .style("stroke","red") //color the path points
            .style("stroke-width",2) //size of point stroke
            .attr("class","explosionpoint")
            .append("title") //title is the 'name' field in the json file
            .text(function(d) { return d.properties.name; }); 
```

每当您的滑块值发生变化时，只需调用此函数。

# regex - 具有限制的 XSD 数据类型字符串：max。仅 2 位数字

> ID：12186221
> 
> 赞同：0
> 
> 时间：2012-08-29T20:45:10.010
> 
> 标签：regex, xsd

我有要求：最大。2 位数字 - 只有数字，以下代码是否正确：

```
<xsd:simpleType name="cstCODE">
  <xsd:restriction base="xsd:string">
    <xsd:pattern value="[0-9]{2}" />
    <xsd:maxLength value="2" />
  </xsd:restriction>
</xsd:simpleType>
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:26:54.893

简而言之，您的 XSD 片段可能是正确的，这里有一些需要考虑的事项：

**您对max**一词的使用使我认为也可以允许更少。在这种情况下，您的模式需要维护。

```
<xsd:simpleType name="cstCODE"> 
    <xsd:restriction base="xsd:string"> 
        <xsd:pattern value="[0-9]{1,2}"/> 
        <xsd:maxLength value="2"/> 
    </xsd:restriction> 
</xsd:simpleType> 
```

您使用 xsd:string 作为似乎是数值的基本类型也很有趣（可能是无意的）；在希望在线上允许空值而不使用 nillable 的情况下，这是一个重要的区别。那么您的模式可能如下所示：

```
<xsd:simpleType name="cstCODE"> 
    <xsd:restriction base="xsd:string"> 
        <xsd:pattern value="[0-9]{0,2}"/> 
        <xsd:maxLength value="2"/> 
    </xsd:restriction> 
</xsd:simpleType> 
```

这里的另一个问题可能与正数/负数和/或 0 填充有关。这是模式可以变得更复杂的地方。

如果您使用 xsd:string 作为基本类型是学习曲线的一部分，那么您可以使用数字基本类型以及随之而来的方面来实现相同的“范围”限制。偶尔我会重温这张[图表](http://www.w3.org/TR/xmlschema-2/#built-in-datatypes)；在那里，您可以选择符合您需求的类型，单击它，然后查看适用于它的约束方面。例如，如果我选择一个 unsignedShort 那么：

```
<xsd:simpleType name="cstCODE"> 
    <xsd:restriction base="xsd:unsignedShort"> 
        <xsd:totalDigits value="2"/> 
    </xsd:restriction> 
</xsd:simpleType> 
```

# java - Android：创建可循环的音调

> ID：12186223
> 
> 赞同：1
> 
> 时间：2012-08-29T20:45:12.353
> 
> 标签：java, android, audio

我一直在尝试生成音调（444 赫兹、1000 赫兹等），然后在 Android 中播放。我的第一次搜索给了我[这个](https://stackoverflow.com/questions/2413426/playing-an-arbitrary-tone-with-android)堆栈溢出问题。虽然这在给定持续时间的情况下效果很好，但我更愿意使持续时间无限（可循环）。

首先，我只使用整数值作为音调，因为这意味着我可以使用 1 秒并且它应该正确循环。然而，仍然有一些频率不能正确循环。

其次，我以为我只能计算正弦波的 1 个周期，然后循环。但是我发现[这不是一个可行的方法](https://stackoverflow.com/questions/9118922/generate-a-single-period-of-a-frequency)

在给定任何频率的情况下，我如何生成可以循环播放的音调？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-26T22:00:26.220

您可以创建一个线程，每隔一段时间（例如 2 秒）运行您的音调：

```
private Runnable startSoundRunnable = new Runnable() {
  @Override
  public void run() {
    while (true) {
      try {
        toneGenerator.startTone(ToneGenerator.TONE_CDMA_ALERT_AUTOREDIAL_LITE, 2000);
        sleep(2000);
      } catch (Exception ex) {}
    }
  }
};

// Run thread
new Thread(startSoundRunnable).start(); 
```

# javascript - 严格模式返回此无违规

> ID：12186232
> 
> 赞同：2
> 
> 时间：2012-08-29T20:46:00.047
> 
> 标签：javascript, this, ecmascript-5, strict-mode

我也想吃蛋糕：我想有一个方法，`this`当它绑定到一个对象时返回链接，但`undefined`在使用 null|undefined 范围调用它时返回。这似乎工作正常，但如果你把它放到[JSLint 中](http://jslint.com/)，那么你会得到一个 Strict Violation 错误。我不需要使用严格模式，但似乎这应该是可能的并且[它有效](http://jsfiddle.net/hYZNr/6/)（打开控制台）。这可以吗和/或你怎么能达到这个效果？

```
var o = {}; // or some pre-existing module
o.meth = (function (undefined) {

    // contrived example where you'd want to be able to locally 
    // access `meth` even if the outer `o.meth` was overwritten

    'use strict';

    var hash = Object.create(null); // "object" with no properties

    // global ref - or `null` where strict mode works
    var cantTouchThis = (function () {
        return this; 
    }).call(null);

    function meth (k, v) {
        var n;
        if (typeof k == 'object') { // set multi
            for (n in k) {
                meth(n, k[n]);
            }
        } else {
             if (v === undefined) { return hash[k]; } // get
             hash[k] = v; // set
        }
        if (this == cantTouchThis) { return; }
        return this;
    }

    return meth;

}()); 
```

如果您查看控制台：

```
var localM = o.meth; // now scopeless
console.log(  o.meth('key', 'val')  ); // should return `o`
console.log(  localM('key', 'val')  ); // should return `undefined` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:02:40.463

这几乎可以满足您的要求。

`dontTouchThis`将`null`在支持“使用严格”指令的环境中，并将在不支持它的环境中引用全局对象。

首先，你可以用;替换那个`.call(null)`块。`(function(){return this})()`它或多或少会产生相同的效果。

其次，不要忘记调用函数有 4 种方式，当涉及到`this`值时：作为方法、作为独立（无基础）函数、通过调用/应用和使用`new`运算符。这意味着：

*   `new (o.meth)`将返回`o`
*   `o.meth.call(o2, ...)`将返回`o2`
*   `o.meth.call(null, ...)`将返回`undefined`

最后，如果有人给全局变量取别名`meth`，那么在支持严格模式的环境`meth()`中将返回全局对象，而不是`undefined`因为`cantTouchThis`(being `null`) 不等于`this`(它将引用全局对象)。

```
// in global scope

var meth = o.meth;
meth(...); // `this` references global object, will return global object

(function() {

  // in local scope
  var meth = o.meth;

  meth(...); // `this` is `undefined`, will return `undefined`

})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:48:28.293

为了安全起见，我最终使用了一个本地函数来“接地”范围解析：

```
var gnd = (function () {
    var globe = this || window;
    return function (o) {
        // for grounding (securing) scope
        return o == null || o === globe ? 0 : o;
    };
}()); 
```

[在此处](https://github.com/ryanve/dj/blob/master/dj.js#files)查看源代码中的用法。

# html - 行高问题 子元素

> ID：12186233
> 
> 赞同：2
> 
> 时间：2012-08-29T20:46:00.820
> 
> 标签：html, css, ckeditor

我对列表项的行高有疑问。

简而言之，我们为正文分配了一个行高，<li> 显然继承了该行高。

如果我在列表项中放置一个 <span> 并指定一个小于标准正文字体的字体大小，则 <li> 保留文档的行高，而不是 span 实际使用的内容。

需要考虑的一件事是，对于实际的 HTML，我能做的事情非常有限，因为这是由 ckeditor（所见即所得）编辑器创建的 HTML。如果您打开该编辑器，创建一些列表项，然后更改字体大小，您会得到以下结果：

```
<ul>
    <li><span style='font-size:8px'>Item 2 -- and some supporting text</span>
    <li><span style='font-size:8px'>Item 2 -- and some supporting text</span>
    <li><span style='font-size:8px'>Item 2 -- and some supporting text</span>
</ul>​ 
```

我不能真正改变它的输出，但我们当然可以尝试使用 CSS 规则来控制它。

我提出了一个说明问题的 jsfiddle：http: [//jsfiddle.net/virtualpromote/pW47c/](http://jsfiddle.net/virtualpromote/pW47c/)

如果您知道一种使 <li> 的行高基于其中的 <span> 高度的方法，那就太棒了。

-- Javascipt 不是解决这个问题的选项。生成的 HTML 实际上被传递到一个应用程序中，该应用程序会动态地创建一个 PDF，因此当然不能解析我们可以在事后应用的任何 javascript 规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:50:02.247

您是否尝试将列表元素的行高设置为正常？

```
li {line-height: normal;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:07:40.107

约翰，

比利护城河有正确的想法，这样的事情会奏效：

```
li span { line-height: 10px; display:block; }​ 
```

span 标签与其容器元素 li 内联。将其更改为 block 会强制它位于内联元素之外，因此不在 li 行高之内。

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T21:18:11.333

最简单的事情是不要在行高中添加单位。简单地使用 1.3 将使您的行高保持成比例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T21:06:29.700

您想将行高减少 0.3 以使跨度使用正常的行高吗？如果是这样，您可以执行以下操作：

```
li {line-height: .8em;} 
```

# knockout.js - 观察视图模型中内部数组的变化创建了敲除映射插件

> ID：12186234
> 
> 赞同：1
> 
> 时间：2012-08-29T20:46:03.960
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我正在使用敲除映射插件从具有内部数组的数据创建视图模型。我可以让 html 正确加载，并在我的视图模型中获取添加和删除功能，以对 DOM 进行所需的更改。但是当我尝试使用 stringifyJson 保存更改时，字符串未定义。

```
var viewModel = {
groupItem: ko.observableArray(),
add: function() {
    this.scheduleitems.push({
        time: ko.observable("03:00"),
        LL: ko.observable(""),
        L: ko.observable(""),
        H: ko.observable(""),
        HH: ko.observable("")
    });
   },
   remove: function(item,parent) {
        parent.scheduleitems.remove(item);
},
save: function() {
    var data = ko.utils.stringifyJson(this.groupItem);
    console.log(data);
}
};

var data3 = [
{
        "title": "P1 Alarms",
        "id": "dadas-sadf-asdf-asd",
        "behaviouritems": [
            {"title": "GPRS","LL": true,"L": false,"H": true,"HH": false},
            {"title": "SMS","LL": false,"L": false,"H": false,"HH": true},
            {"title": "Software","LL": false,"L": false,"H": true,"HH": false}
        ],
        "scheduleitems": [
            {"time": "00:00","LL": false,"L": false,"H": false,"HH": true},
            {"time": "02:00","LL": true,"L": false,"H": false,"HH": false}
        ]
}]

ko.mapping.fromJS(data3, null, viewModel.groupItem);
console.log(viewModel.groupItem);

ko.applyBindings(viewModel, document.getElementById("customerDiv")); 
```

这是一个问题的小提琴：http: [//jsfiddle.net/davidoleary/q2BSZ/](http://jsfiddle.net/davidoleary/q2BSZ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:15:19.617

恐怕这是一个错误，我不应该使用 stringifyJson。如果我使用以下任何一种，我发现我得到了预期的结果，包括通过 UI 所做的所有更改。

```
var result = ko.mapping.toJS(this);
console.log(result );

var jsonResult = ko.mapping.toJSON(this);
console.log(jsonResult); 
```

# c# - 在 Timer 方法中更改 pictureBox1 属性

> ID：12186245
> 
> 赞同：0
> 
> 时间：2012-08-29T20:46:51.470
> 
> 标签：c#, visual-studio-2010

所以我的 C# 程序中有这个很棒的 pictureBox1。每 5 秒我调用一个 time 方法，如下所示：

```
public Form1()
{
    InitializeComponent();
    aTimer = new System.Timers.Timer(10000);
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    aTimer.Interval = 2000;
    aTimer.Enabled = true;
}

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{ 
} 
```

我正在尝试更改我得到的图片框对象的属性。但是在尝试这样做时出现此错误：

> 错误 1 ​​非静态字段、方法或属性 'Simma.Form1.pictureBox1' 需要对象引用 C:\Users\John\Desktop\Simma\Simma\Form1.cs 39 13 Simma

不过，pictureBox1 设置为 Public。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:51:44.930

问题一定出在您没有向我们展示的代码中……大概在`OnTimedEvent`.

最简单的解决方法是创建`OnTimedEvent`一个实例方法。这不是可访问性的问题（并且该字段*不应该*是公共的 - 将其设为私有！）这是尝试使用*静态*方法中的*实例*字段的问题。

 *但是请注意，您*也不*应该尝试从非 UI 线程访问 UI 元素。当前，您的计时器将在不同的线程中触发其事件，从而导致跨线程问题。

最简单的解决方法是使用 a[`System.Windows.Forms.Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)而不是 a `System.Timers.Timer`。*

# asp.net - Page_PreRender 和 Global.asax

> ID：12186246
> 
> 赞同：1
> 
> 时间：2012-08-29T20:46:54.790
> 
> 标签：asp.net

我想在 global.asax 级别上绑定到 Page PreRender 方法，但由于某种原因，该方法永远不会被调用。我的方法看起来像：

```
 protected void Page_PreRender(object source, EventArgs e)
    {
        /* do stuff */
    } 
```

我可以在 Global.asax 中调用这样的页面事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:02:21.453

global.asax 派生自 HttpApplication 类，不包含 Page_PreRender 事件，正如您在 MSDN 参考中看到的那样：

[http://msdn.microsoft.com/en-us/library/system.web.httpapplication(VS.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.httpapplication(VS.90).aspx)

如果您想全局捕获 PreRender 事件，您可以为 . 创建不同的基类`System.Web.UI.Page`，覆盖此事件，然后将此类用于您的页面。

例如

```
public abstract class BasePage : System.Web.UI.Page
{
    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);
    }
} 
```

并`BasePage`在您的页面上使用

# jquery - 关闭/重新打开主页应用程序后如何保持当前页面/状态？

> ID：12186247
> 
> 赞同：0
> 
> 时间：2012-08-29T20:46:56.327
> 
> 标签：jquery, ios, jquery-mobile

我使用 .NET 和 jQuery Mobile 开发了一个移动 Web 应用程序，我计划将其用作 iPad 上的“主页应用程序”。在某些情况下，此应用程序的用户可能会在做某事（发送/检查电子邮件、在网络上查找内容等）时冒险离开应用程序，然后返回到我的应用程序（通过多任务处理）窗格，例如）。目前，每次加载主页应用程序时，都会再次重新加载默认主页 URL，导致应用程序丢失其状态。

在这些情况下，如何保持应用程序的状态？我无法在文档中找到任何关于此的内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:50:13.720

您需要使用 Web Storage 将状态保存在客户端上。然后，您的站点将读取存储的状态并在存在时将其恢复。请参阅：[http ://www.html5rocks.com/en/features/storage](http://www.html5rocks.com/en/features/storage)

FWIW，您也可以使用 cookie 来实现，但网络存储*更*易于使用，并且几乎在移动浏览器中得到普遍支持。

# c - 工具提示控件上的透明背景

> ID：12186250
> 
> 赞同：2
> 
> 时间：2012-08-29T20:47:03.727
> 
> 标签：c, winapi, background, tooltip, transparent

通过禁用其视觉样式，我能够在工具提示控件上进行自定义绘画。

我很好奇我们是否可以将工具提示控件设置为“分层”（即透明）。

我尝试在其上添加 WS_EX_LAYERED 样式并调用

```
SetLayeredWindowAttributes(hwndTooltip, 0, 50, LWA_ALPHA); 
```

但它不会变得透明。

我为 manin 窗口做了这个，主窗口变得透明。

搜索后，没有关于如何使工具提示透明的进一步信息。

所以`How to make tooltip control transparent background?`

ps：hwndTooltip 是桌面的孩子，而不是主窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:20:56.803

无法完成。参考及说明：

[http://tech.dir.groups.yahoo.com/group/wtl/message/14214](http://tech.dir.groups.yahoo.com/group/wtl/message/14214)

# python - python中的动态类实例化混淆

> ID：12186251
> 
> 赞同：0
> 
> 时间：2012-08-29T20:47:05.557
> 
> 标签：python, dynamic, instantiation

昨晚很晚，我问了一个类似但很糟糕的问题（[访问实例变量，但不是 Python 中的实例方法](https://stackoverflow.com/q/12171729/1472743)），这引起了相当多的混乱。如果可以，我会删除它，但我不能。

我现在可以更清楚地提出我的问题了。

背景：我正在尝试构建一个二十一点游戏来学习 python 语法。每只手都是 Hand 类的一个实例，我现在正试图让手分开。因此，当需要拆分手时，我需要创建两个新的手实例。考虑到进一步的拆分是可能的，我想重用相同的方法来重新拆分手。因此，我（我认为）需要动态实例化 Hand 类。

以下是我用来阻止机制的代码片段：

```
import os

os.system("clear")

class Hand():
    instances=[]
    def __init__(self, hand_a, name):
        Hand.instances.append(self)
        self.name = name
        self.hand_a = hand_a

    def show_hand(self):
        ln = len(self.hand_a)
        for x in range(ln):
            print self.hand_a[x]

class Creation():
    def __init__(self):
        pass
    def create_name(self):
        hil = len(Hand.instances)
        new_name = 'hand_' + str(hil + 1)
        return(new_name)

    def new_instance(self):
        new_dict = {0: 'Ace of Clubs', 1: '10 of Diamonds'}
        new_hand_name = {}
        new_hand_name.setdefault(self.create_name(), None)
        print new_hand_name
        new_hand_name[0] = Hand(new_dict, self.create_name())
        print new_hand_name[0]  

hand = Hand("blah", 'hand')
hand_z = Hand("blah_z", 'hand_z')
creation = Creation()
creation.new_instance() 
```

这是输出：

```
{'hand_3': None}
<__main__.Hand instance at 0x10e0f06c8> 
```

关于以下语句创建的实例：

```
new_hand_name[0] = Hand(new_dict, self.create_name) 
```

new是`new_hand_name[0]`指实例的变量吗？或者，是`hand_3`变量？

即调用实例方法时，我可以使用`hand_3.show_hand()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:09:58.517

首先，回答您的问题：`new_hand_name[0]`是引用实例的变量 - 更具体地说，它是`new_hand_name`键 0 访问的字典中的值。`new_hand_name`如果您打印它，字典将如下所示：

```
{'hand_3': None, 0: <__main__.Hand instance at 0x10e0f06c8>} 
```

将 的值添加`"hand_3"`到字典中是不必要的，但就此而言，字典也是如此。

您*真正*想做的与新类的动态实例化无关，这与您的问题无关。问题是一手牌可能代表一个单一的卡片列表，但也可能代表一个卡片列表的列表，每个卡片都必须单独播放。解决这个问题的一个好方法是在玩家和手之间进行分离，并允许玩家拥有*多手*。想象一下这个设计（我也省略了很多二十一点功能，但留下一点让您了解如何与程序的其余部分一起工作）。

```
def draw_random_card():
    """
    whatever function returns a new card. Might be in a Deck object, depends on
    your design
    """
    # some code here

class Player:
    def __init__(self):
        self.hands = []

    def deal(self):
        """add a random hand"""
        self.hands.append(Hand([draw_random_card(), draw_random_card()]))

    def split(self, hand):
        """split the given hand"""
        self.hands.remove(hand)
        self.hands += hand.split()

class Hand:
    def __init__(self, cards):
        self.cards = cards

    def hit(self):
        """add a random card"""
        self.cards.append(draw_random_card())

    def split(self):
        """split and return a pair of Hand objects"""
        return [Hand(self.cards[0], draw_random_card()),
                Hand(self.cards[1], draw_random_card())] 
```

这不是更简单吗？

回应您的评论：

1.  您可以将任何特定手牌称为Players 类`self.hands[0]`或`self.hands[1]`在 Players 类中。

2.  如果您想跟踪特定的手，您可以只传递手本身，而不是传递引用该手的字符串。像这样：

    ```
    def process_hand(hand):
        """do something to a hand of cards"""
        h.hit()
        print h.cards()
        h.hit()
    h = Hand(cards)
    process_hand(h) 
    ```

    这很重要：您在函数中对手的修改对*实际手本身*起作用。为什么要额外添加一个传递字符串的步骤，然后您必须查找？

    另请注意，特定于每手牌的信息（例如下注）可能应该存储在 Hand 类本身中。

3.  如果您确定要使用特定名称来引用每只手（同样，在这种情况下没有必要），您只需使用带有这些名称的字典作为键：

    ```
    self.hands = {}
    self.hands["hand1"] = Hand([card1, card2])
    self.hands["hand2"] = Hand([card1, card2])
    print self.hands["hand1"] 
    ```

    但同样，可能没有充分的理由这样做。（请注意，这与“动态”实例化新变量非常不同。研究字典的工作原理是个好主意）。

# php - 我应该为 Simplepie 设置一个自定义用户代理吗

> ID：12186253
> 
> 赞同：1
> 
> 时间：2012-08-29T20:47:14.340
> 
> 标签：php, feed, simplepie

我正在创建一个提要聚合器。我会爬博客，有时每隔一小时或每两小时检查一次，看看他们是否有新帖子。我为此使用 Simplepie。

我想知道是否应该更改 Simplepie 拥有的自定义用户代理（`SIMPLEPIE_USERAGENT`）。另外，如果我应该改变它，用户代理的最佳实践是什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:13:34.680

是的，您应该这样做，否则他们可能会开始向 SimplePie 维护者（即我 :) 抱怨它。使用自定义用户代理可以让他们知道如果出现问题该联系谁。

理想的格式是“Your Program Name/1.0”，其中 1.0 是版本。您还可以包含 URL（如果这样做，请在它们前面加上 +）和联系地址，使其成为“您的程序名称/1.0 (+http://example.com/)”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:51:33.710

你应该改变它吗？嗯，这取决于你在做什么。有些网站会根据 UA 阻止您。那是他们的权利。

如果您尝试抓取数据并且不关心遵守规则，那么您可以将其更改为您想要的任何内容。

最佳做法是表明自己的身份并遵守 robots.txt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T00:24:24.337

我总是将我的应用程序的名称作为用户代理，这样如果我的脚本导致他们的服务器出现问题，服务器管理员可以联系我。（这是任何人关心的唯一原因）

# c# - 我如何在 c# 中使用 bool 方法解决此错误线程

> ID：12186254
> 
> 赞同：0
> 
> 时间：2012-08-29T20:47:24.887
> 
> 标签：c#, multithreading, windows-services

我的 Windows 服务项目中的这段代码给了我编译错误 **Expected a method with void InitializeBridge signature**

```
 static void Main(string[] args)
      {
            if (args != null && args.Length == 1 && args[0].StartsWith("-c"))
            {
                 BridgeService bridgeService = new BridgeService();

                 if (Vytru.Platform.Bridge.Configuration.LicenseValidetor.ValidCountAndTypeDevices())
                 {
                      Console.WriteLine("Bridge Service Is Started ......");

                      var daemonThread = new Thread(SharedData.InitializeBridge);
                      daemonThread.Start();
                 }
                 else
                 {
                      Console.WriteLine("Bridge Service License is not Valid ...");
                 }
            }
            else
            {
                 ServiceBase[] ServicesToRun;
                 ServicesToRun = new ServiceBase[] 
                  { 
                      new BridgeService() 
                  };
                 ServiceBase.Run(ServicesToRun);
            }
      } 
```

这是我的静态方法`InitializeBridge`..

```
 public static bool InitializeBridge()
      {
            return DeviceList.All(CreateBridgeConnection);

      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:50:00.403

基本上，您不能从返回的方法创建`ThreadStart`or 。这是可以传递给构造函数的两种委托类型，这里没有适用的方法组转换。`ParameterizedThreadStart``bool``Thread`

如果您不关心返回值（一开始看起来很奇怪），最简单的方法可能是使用 lambda 表达式来调用它并忽略返回值：

```
var daemonThread = new Thread(() => SharedData.InitializeBridge()); 
```

# php - 处理 php 脚本错误，同时由 cron 执行

> ID：12186258
> 
> 赞同：1
> 
> 时间：2012-08-29T20:47:56.320
> 
> 标签：php, error-handling, cron, cron-task

我有一个 MVC 框架，里面有一个控制器。控制器从服务器下载图像。我需要每 5 分钟用这些图像刷新我的数据库。因此，我计划创建 php 脚本来下载文件并将其保存到我的数据库中。为了每 5 分钟执行一次。我将设置 Cron 作业。

现在的问题是，

1.  在 php 脚本中处理错误的最佳实践是什么？

    因为 Cron 将每 5 分钟执行一次，而不知道最后查询的图像已经丢失并且没有保存。

2.  我如何通知自己发生了一些不寻常的事情，我需要自己维护数据库的一致性（在少数情况下我不介意）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:53:07.040

> 在 php 脚本中处理错误的最佳实践是什么？因为 Cron 将每 5 分钟执行一次，而不知道最后查询的图像已经丢失并且没有保存。

使用此处描述的断言：http: [//php.net/manual/en/function.assert.php](http://php.net/manual/en/function.assert.php)

> 我如何通知自己发生了一些不寻常的事情，我需要自己维护数据库的一致性（在少数情况下我不介意）。

在断言中使用 mail()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:53:38.470

将 try-catch 与数据库事务一起使用（如果可能）。您可以将错误转储到 error_log() 并将其设置为生成电子邮件或将电子邮件添加到错误处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T21:00:33.970

除了其他评论。我经常发现它在 cron 脚本中很有用，这些脚本可能会遇到问题或需要比期望的执行间隔更长的时间才能运行多个执行实例，以提供一些指示上次执行时间、执行成功等的文本文件，您可以检查以确定脚本是否应按计划运行。可能很简单，例如在脚本启动时编写文件并在成功执行时将其删除，然后在下次执行时检查此文件以决定是否运行。

# c# - C# 将任务添加到 Outlook 中的文件夹

> ID：12186259
> 
> 赞同：1
> 
> 时间：2012-08-29T20:47:58.540
> 
> 标签：c#, outlook, vsto, task, directory

我需要将我以编程方式创建的任务添加到 Outlook 中的文件夹中。

我有创建任务的代码，也有创建文件夹的代码。这工作正常。

现在棘手的部分，如何将我新创建的任务（此时任务是内存中的一个对象）添加到我新创建的文件夹（或者只是一个文件夹）？

此时我希望将它们添加到一个文件夹中，但是在 Outlook 中，我可以创建一个类似项目的“文件夹”，我可以在其中创建任务（参见随附的屏幕截图）。我希望真正能够以编程方式而不是文件夹来执行此操作。

![任务文件夹图像](../Images/3ce6e396525b0a898eaaebca5a892de7.png)

有没有人有可能为我指明正确方向的示例或文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:40:47.077

如果您有对 a 的引用[`Folder`](http://msdn.microsoft.com/en-us/library/office/ff863890.aspx)，则可以使用在 that[`Folder.Items.Add`](http://msdn.microsoft.com/en-us/library/office/ff861028.aspx)中创建 a 。如果你用过，那么你应该用把物品移到特定的地方。[`TaskItem`](http://msdn.microsoft.com/en-us/library/office/ff867891.aspx)`Folder`[`Application.CreateItem`](http://msdn.microsoft.com/en-us/library/office/bb219889%28v=office.12%29.aspx)[`TaskItem.Move`](http://msdn.microsoft.com/en-us/library/office/ff869122.aspx)`Folder`

# c# - 无法通过 C# 中的 .NET 远程处理检索 int 属性

> ID：12186263
> 
> 赞同：0
> 
> 时间：2012-08-29T20:48:14.047
> 
> 标签：c#, .net, .net-remoting

我在通过 .NET 远程处理通道读取属性时遇到问题。这是我的课的开始：

```
[Serializable]
public class MachineID
{
    private string mySystemDeviceSerial = null;
    /// <summary>
    /// Returns the hard drive serial that Windows is installed on.
    /// </summary>
    public string SystemDeviceSerial
    {
        get { return mySystemDeviceSerial; }
    }

    private string mySystemName = null;
    /// <summary>
    /// Returns the current name of the system.
    /// </summary>
    public string SystemName
    {
        get { return mySystemName; }
    }

    private string myLastError = string.Empty;
    /// <summary>
    /// Returns the last error that occurred. Returns string.Empty if no error has occurred.
    /// </summary>
    public string LastError
    {
        get { return myLastError; }
    }

    private int myPort = -2;
    public int Port
    {
       get { return this.myPort; }
       set { this.myPort = value; }
    } 
```

所有属性都可以在本地计算机上正常访问。但是，当我尝试通过 .NET 远程处理通道从客户端读取 Port 属性时，我没有得到分配给 myPort 的值，而是初始值 -2。我对此感到困惑，因为所有字符串属性都可以正常读取。有任何想法吗？我没有正确序列化这个类吗？

值得注意的是，为了使这个类和成员可序列化，我所做的只是在类的顶部添加 [Serializable] 属性。我不确定这是否是正确的方法，所以也许这可能是问题的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:59:36.727

我的猜测（我强调这只是一个猜测）是您的订单错误-您是

1.  从远程主机检索项目
2.  更新它（在主机上），然后
3.  期望客户端中的值更新为您在主机上更改的值。

当您使用 时`[Serializable]`，您将对象转换为字节流，通过线路将其传输到远程客户端，然后在客户端上将其重构为新对象。这意味着客户端的副本与服务器的副本完全断开连接。如果您希望客户端的副本始终显示来自服务器的更新值（而不重新传输整个对象），请使其从 MarshalByRefObject 继承，就像@Hans-Passant 建议的那样。这使得客户端复制一个透明代理，每次访问它的一个属性时都会查询服务器。

# shopify - 将自定义分析与 Shopify 集成

> ID：12186267
> 
> 赞同：2
> 
> 时间：2012-08-29T20:48:31.427
> 
> 标签：shopify

我正在开发类似于 Google Analytics 的分析产品，并希望为我们的 Shopify 用户提供集成。

我只需要做两件事：

1) 将我们的 JavaScript 片段插入到所有商店页面的正文中

2）在购买后仅在“谢谢”页面的正文中插入第二个转换片段以记录销售，并传回订单总额和订单号

你能指出我正确的方向吗？

* * *

ScriptTag 端点看起来是最佳的，只是它似乎没有提供任何方法来区分“谢谢”页面和其他页面，或者将订单详细信息从“谢谢”页面传递到脚本中。

似乎我需要一个可以将任意代码注入所有页面的端点，或者一个可以让我更改主题布局文件以在标记之前添加代码的端点`</body>`。

如果我能做到这一点，看起来我可以在模板语言中使用条件来仅在 URL 与“谢谢”页面 URL 匹配时显示转换代码，并使用 {{ total_price }} 和 {{ order_number }} 在该代码中。

卸载 webhook 是否允许我在应用程序的权限被撤销之前进行更改？如果允许我编辑布局文件，我似乎需要一种在卸载时进行清理以从主题中删除我的代码的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T13:42:17.130

它有两种方法可以解决这个问题：

**ScriptTags**：您已经知道这种方法。确实，脚本会加载到每个页面中，但是您可以`document.url`在 js 中查看您所在的页面，并根据该页面有条件地执行代码。

以这种方式插入的脚本在“onLoad”事件期间执行。那时您可以访问 DOM，并且基本上可以对页面做任何您想做的事情。

**Snippets**：使用[Assets](http://api.shopify.com/asset.html)端点，您可以对用户的主题进行任意更改。**小心这种力量！**对页面进行复杂更改的推荐方法是在主题中创建自定义片段并添加您的内容，然后告诉用户将`include`标签插入到需要出现的代码中。这减少了主主题文件中的混乱。

我建议尽可能使用 ScriptTags。如下所述，它们不需要清理，并且在设置应用程序时无需用户交互。

--

至于卸载 webhook：它是在应用从商店中卸载*后*触发的，因此您不再有权访问。它旨在用于触发您的清理（删除数据库条目等）。请注意，ScriptTags 和 Webhook 订阅会自动清理，但您对主题所做的任何更改都不会

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T23:32:34.477

您在一篇文章中提出了很多问题。

对于您的#1 和#2，请阅读：

```
http://api.shopify.com/scripttag.html 
```

其次，对于您的应用安装/卸载，请阅读：

```
http://api.shopify.com/webhook.html 
```

请注意有关 app/uninstalled 的部分，因为您对此感兴趣。

至于知道何时有人安装您的应用程序，这完全取决于您自己。应该不会太难，因为您可能首先阅读了如何制作和应用程序。Shopify 在 github 上提供了大量样板代码，几乎可以向您展示您在此处询问的所有内容。

# spring - JNDI 和 Spring 配置 - jee:lookup

> ID：12186274
> 
> 赞同：0
> 
> 时间：2012-08-29T20:49:04.383
> 
> 标签：spring, tomcat, jndi

我想使用 JNDI 将我的课程作为资源之一发布。在 Tomcat 的 context.xml 中，我有

```
<Resource
   name="jdbc/dialect"
   type="pl.meble.taboret.utils.SQLiteDialect"
   auth="Container"/> 
```

在我的 web.xml

```
 <resource-ref>
    <description>sqlite dialect</description>
    <res-ref-name>jdbc/dialect</res-ref-name>
    <res-type>pl.meble.taboret.utils.SQLiteDialect</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

并在其中一个 Spring 配置文件中：

```
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@18706f6: defining beans
djfdoigjdoijfdsofjsdoij//the message added at the end of no-parameter constructor of SQLite dialect class
INFO : org.springframework.beans.factory.config.PropertiesFactoryBean - Loading properties file from class path resource [config.properties]
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@18706f6: defining beans
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialect': Invocation of init method failed; nested exception is javax.naming.NamingException: Cannot create resource instance
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.naming.NamingException: Cannot create resource instance
    at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:146)
    at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
    at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
    at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
    at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more 
```

我在无参构造函数的末尾加了打印，好像是构造了对象，所以不知道为什么会报错`Invocation of init method failed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:07:55.860

我很确定您需要使用驱动程序而不是方言（这是我为 MySQL 设置的，只需为您的特定 sql impl 更改驱动程序）。

```
<Resource name="jdbc/myname" auth="Container" type="javax.sql.DataSource"
maxActive="100" maxIdle="30" maxWait="10000"
username="user" password="pass" driverClassName="com.mysql.jdbc.Driver"
url="jdbc:mysql://url/db"/> 
```

接着

```
<resource-ref>
    <description>The JNDI Database resource</description>
    <res-ref-name>jdbc/myname</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Application</res-auth>
    <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
```

我想你会想要将你的 hibernate.dialect 设置为 pl.meble.taboret.utils.SQLiteDialect 而不是你在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T11:33:01.667

尝试以下操作：

```
<Resource
    name="jdbc/dialect"
    type="java.lang.String"
    value="pl.meble.taboret.utils.SQLiteDialect"
    auth="Container"/>

<resource-ref>
    <description>sqlite dialect</description>
    <res-ref-name>jdbc/dialect</res-ref-name>
    <res-type>java.lang.String</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

然后执行 JNDI 查找，将值转换为字符串并将其提供给 Class.forName() 方法。

# c# - 如何避免使用 QueryOver 重复

> ID：12186277
> 
> 赞同：1
> 
> 时间：2012-08-29T20:49:09.103
> 
> 标签：c#, nhibernate, queryover

我有两种方法，不喜欢重复：

```
public Order LatestOrderOver(decimal amount)
{
    return session.QueryOver<Order>()
        .Where(o => o.Amount > amount)
        .OrderBy(sr => sr.CompleteUtcTime).Desc
        .Take(1)
        .SingleOrDefault<Order>();
}

public Order LatestAmericanOrderOver(decimal amount)
{
    return session.QueryOver<Order>()
        .Where(o => o.Amount > amount && o.Country == "USA")
        .OrderBy(sr => sr.CompleteUtcTime).Desc
        .Take(1)
        .SingleOrDefault<Order>();
} 
```

*当您在 QueryOver 中使用类似的标准*（在 Where 子句中）和最后的类似选项时，避免重复的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:53:48.343

如果您使用的是 Linq To Objects，则可以重构委托：

```
private Order LatestOrderOver(Func<Order, bool> f) {
  return
    session.QueryOver<Order>()
    .Where(f)
    .OrderBy(sr => sr.CompleteUtcTime).Desc
    .Take(1)
    .SingleOrDefault<Order>();
}

public Order LatestOrderOver(decimal amount) {
  return LatestOrderOver(o => o.Amount > amount);
}

public Order LatestAmericanOrderOver(decimal amount) {
  return LatestOrderOver(o => o.Amount > amount && o.Country == "USA");
} 
```

否则它可能只更改`Func<>`为`Expression<>`，但我没有太多经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:01:46.277

除了 Guffa 的建议，您如何看待扩展方法？

```
public static class QueryOverExtensions
{
    public static Order LastOrder(this IQueryOver<Order, Order> query)
    {
        return query
            .Where(o => o.Amount > amount)
            .OrderBy(sr => sr.CompleteUtcTime).Desc
            .Take(1)
            .SingleOrDefault<Order>();
    }

    // Other query over extension methods
} 
```

然后你可以把你的方法写成：

```
public Order LatestOrderOver(decimal amount)
{
    return session.QueryOver<Order>()
       .LastOrder();
}

public Order LatestAmericanOrderOver()
{
    return session.QueryOver<Order>()
        .Where(o => o.Country == "USA")
        .LastOrder();
} 
```

# java - java字符串全部替换

> ID：12186282
> 
> 赞同：0
> 
> 时间：2012-08-29T20:49:21.460
> 
> 标签：java, string, replace

我有一个包含字符串对的二维数组。如果找到一个字符串，它应该用它的对替换它。

编码：

```
 for (int i = 0; i < pairs.length; i++) {
        if (name.contains(pairs[i][0])) {
            name.replaceAll(pairs[i][0], abbr[i][1]);
        }
    } 
```

它没有替换字符串。错误是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:50:46.463

您忽略了分配 的结果`replaceAll`，因此修改丢失。

也许您想将修改后的字符串保留为`name`：

```
for (int i = 0; i < pairs.length; i++) {
    if (name.contains(pairs[i][0])) {
        name = name.replaceAll(pairs[i][0], abbr[i][1]);
    }
} 
```

请注意，java`String`对象是不可变的，因此调用`name.replaceAll` *不会*修改`name`，它会返回一个带有修改的*新* `String`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:51:17.683

字符串是不可变的。

```
name.replaceAll(pairs[i][0], abbr[i][1]); 
```

创建一个新字符串（它不会修改“名称”字符串）

尝试

```
name = name.replaceAll(pairs[i][0], abbr[i][1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:53:15.187

正在创建字符串的修改版本，但是它的返回值正在丢失。

name = name.replaceAll(pairs[i][0], abbr[i][1]);

应该管用。

# oracle - Oracle 字符串搜索性能问题

> ID：12186284
> 
> 赞同：1
> 
> 时间：2012-08-29T20:49:30.397
> 
> 标签：oracle, performance, indexing, hint

我在一个包含超过 160 万条记录的表中的 Oracle 11GR2 中有一个简单的搜索存储过程。我很困惑，如果我想在一个列中搜索一个作品，例如“%boston%”，它需要 12 秒。我在名称列上有一个索引。

```
select description from travel_websites where name like "%boston%"; 
```

如果我只搜索以 Boston 开头的单词，例如“boston%”，则只需 0.15 秒。

`select description from travel_websites where name like "boston%";`

我添加了一个索引提示并尝试强制优化器在名称列上使用我的索引，它也没有帮助。

```
select description /*+ index name_idx */  from travel_websites where name like "%boston%"; 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T21:03:50.040

您不能对具有前导通配符（即`like '%boston%'`）的谓词使用索引范围扫描。如果您考虑索引如何存储在磁盘上，这是有道理的——如果您不知道要搜索的字符串的第一个字符是什么，则无法遍历索引来查找与该字符串匹配的索引条目. 您可以对读取每个叶块的索引进行全面扫描，并在`name`那里搜索以查看它是否包含您想要的字符串。但这需要对索引进行全面扫描，然后您必须每次访问该表`ROWID`您从索引中获取任何不属于您刚刚完全扫描的索引的列。根据表和索引的相对大小以及谓词的选择性，如果您正在搜索前导通配符，优化器可能很容易决定只进行表扫描会更快。

[Oracle 确实支持全文搜索](https://stackoverflow.com/questions/202623/does-oracle-support-full-text-search)，但您必须使用 Oracle Text，这需要您在`name`列上构建 Oracle Text 索引并使用[CONTAINS 运算符](http://docs.oracle.com/cd/B19306_01/text.102/b14218/cqoper.htm)进行搜索，而不是使用`LIKE`查询。Oracle Text 是一个非常强大的产品，因此在构建索引、刷新索引和构建查询时有很多选项需要考虑，具体取决于您想要获得的复杂程度。

您的索引提示未正确指定。假设在 上有一个索引`name`，该索引的名称是`name_idx`，并且您想强制对索引进行全面扫描（重申一下，如果存在前导通配符，则对索引进行范围扫描不是有效选项） ，你需要类似的东西

```
select /*+ index(travel_websites name_idx) */ description
  from travel_websites
 where name like '%boston%' 
```

但是，不能保证全索引扫描会比全表扫描更有效。并且完全有可能优化器已经在没有提示的情况下选择了索引全扫描（您没有指定三个查询的查询计划是什么）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:08:35.410

默认情况下，Oracle（以及据我所知的大多数其他数据库）索引字符串，以便索引只能用于**从字符串开头查找字符串匹配**项。这意味着，a `LIKE 'boston%'`(startswith) 将能够使用索引，而 a `LIKE '%boston'`(endswith) 或`LIKE '%boston%'`(contains) 则不能。

如果您确实需要可以快速找到子字符串的索引，则不能对字符串使用常规索引类型，但可以使用[`TEXT`](http://www.g-solutions.net/icreate-content/main/oracle_wildcard_searching.aspx)索引，遗憾的是可能需要稍微不同的查询语法。

# mysql - Rails has_and_belongs_to_many

> ID：12186288
> 
> 赞同：1
> 
> 时间：2012-08-29T20:49:40.787
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我正在尝试在我的 rails 应用程序中设置 Employee 模型和 NetworkDrive 模型之间的 has_and_belongs_to_many 关系。

在 employee.rb 我指定

```
has_and_belongs_to_many :network_drives</code> 
```

并在network_drive.rb ...

```
has_and_belongs_to_many :employee</code> 
```

但是，它似乎正在生成像“：network_drife_ids”而不是“：network_drive_ids”这样的模型属性，这给了我这样的错误

`uninitialized constant Employee::NetworkDrife`

这是准确的，考虑到模型称为 NetworkDrive，而不是 NetworkDrive。

对不起，如果这是一个重复的问题，但我不知道如何搜索这个问题。我在这里尝试了关于 HABTM 关系的问题提供的几种解决方案，但无济于事。

更新：这是整个错误，在尝试将其更改为 as has_many :through 关系之后。

```
NameError: uninitialized constant EmployeeItRequest::EmployeeItRequestDrife
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/inheritance.rb:111:in `compute_type'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/reflection.rb:172:in `klass'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/reflection.rb:216:in `association_primary_key'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/associations/has_many_association.rb:104:in `foreign_key_present?'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/associations/association.rb:165:in `find_target?'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/associations/collection_association.rb:332:in `load_target'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

更新：NetworkDrive.tableize 的结果

```
NoMethodError: undefined method `tableize' for #<Class:0x0000000229fef8>
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.7/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
    from (irb):1
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands/console.rb:47:in `start'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands/console.rb:8:in `start'
    from /usr/local/rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T20:55:28.637

这不是 HABTM 的问题，而是 rails 的内置变形规则之一，它转换`drives`为单数`drife`而不是`drive`.

在控制台中：

```
"drives".singularize  # => "drife" 
```

您可以通过添加变形规则来覆盖默认格式：

**初始化器/inflections.rb**

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.clear :inflection_drives
  inflect.irregular 'network_drive', 'network_drives'
end 
```

# javascript - 将页面标题添加到 javascript 代码

> ID：12186291
> 
> 赞同：1
> 
> 时间：2012-08-29T20:49:48.643
> 
> 标签：javascript

我有这个 javascript 片段，它将一个 id 和引用页面传递到一个 php 页面，然后我收集 ip 地址，我想做的也是捕获页面元标题并将其转发到 php 页面。但是我对javascript很陌生，不确定是否可行。

任何建议将不胜感激下面是我的javascript代码，谢谢。

```
var track = new Image();
track.src="http://testsite.co.uk/~vtrack/track/track.php?id=801003&self=" +   document.referrer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:50:42.690

```
document.title = `Your Title goes here` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:51:48.310

```
track.src = "http://testsite.co.uk/~vtrack/track/track.php?id=801003" +
            "&self=" + document.referrer +
            "&pageTitle=" + document.title; 
```

# c# - 有没有办法像 DataTable 一样管理对不规则 XML 文档的更改？

> ID：12186305
> 
> 赞同：4
> 
> 时间：2012-08-29T20:51:05.777
> 
> 标签：c#, .net, xml, linq, xmldocument

我正在寻找一种方法来导入和导出 XML 数据文档的更改列表（不规则的结构；不自然地适合 DataSet）。

如果我有一个常规结构，我会使用 DataTable，我可以评估哪些记录已被编辑，然后提交或取消更改，我还可以传输所需更改的数据包。

如何使用 XML 数据执行此操作？

如果没有一个好的答案，我想我最好的选择是使用带有方案 [XPath, Value] 的 DataTable，尽管存储效率低，导航困难。

我希望对文档进行更改（使用 XPath 或 LINQ 或数据绑定控件或其他），然后记住更改并仅通过 TCP 发送更改。

然后我想接收另一个更改列表并将其应用于 XML 文档。我不想发送整个文档的大小，因为我需要知道和评估正在发送的更改。

（澄清一下：我的程序需要发送和接收文档更改。管道的另一端不是基于.net，也不属于这个问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:10:42.333

您需要对这些更改采取行动还是只存储它们，如果您只想存储更新的版本，您可以使用二进制差异算法来传递 2 个 xml 文件之间的差异。然后以不同的方式更新存储版本。很好的算法是[bifdiff](http://damaestro.us/blog/bsdiff-very-interesting-binary-diff) 可以在[这里](https://github.com/LogosBible/bsdiff.net)找到 C# 版本。

另一种方法是使用 MS 的这个[XmlDiff](http://msdn.microsoft.com/en-us/library/aa302294.aspx)类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:31:57.550

1.  你怎么想只发送更改？
2.  您希望每次都有很多变化还是只是微小的变化？
3.  你需要考虑什么样的改变？
4.  您是否尝试跨流程边界维护同一文档的副本？
5.  您将如何解决冲突的更改？
6.  您是否要在更改传播之前锁定 xml 文档？
7.  两个副本是独立的，还是一个是主副本？

如果您使用 XmlDocument 事件，例如 NodeInserted、NodeDeleted、NodeChanged，您可以构建此类更改的列表，然后在另一个副本上执行它们。如果更改的总量比文档本身长，您可以发送文档。压缩 xml 数据也有帮助。

除此之外，我没有看到任何其他简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T02:34:21.460

当你得到结构不规则的 XML 数据时；不适合 DataSet 并且您希望对象模型轻松处理数据。您可以使用带有 /classes 选项的[XML 架构定义工具 (Xsd.exe)](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)从 XML 文件生成 C# 或 VB.Net 类。

XSD.exe 位于：

```
C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\xsd.exe
C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\Bin\xsd.exe 
```

从 Visual Studio 命令行运行 xsd.exe。 -开始-所有程序
-Visual Studio -工具 - 命令行

这是查看所有 XSD 命令行参数的命令：

```
xsd /? 
```

要将不规则的 XML 文件 (XmlResponseObject.xml) 转换为类：

```
xsd c:\Temp\XmlResponseObject.xml /classes /language:CS /out:c:\Temp\ 
```

这将生成一个 csharp 文件，其中包含表示 XML 的类。您*可能*希望将其重构为单独的类文件，注意单个文件中的重复类通过命名空间消除歧义。无论哪种方式，这些类都不会是所有 xml 属性中最好看的，但好的部分是您可以通过 XML 绑定到它们。这是我通过 REST Web 服务检索 XML 的示例，xmlResponseObject 是适合 XML 的类的 ObjectModel。

```
public interface IYourWebService
{
    XmlResponseObject GetData(int dataId);
}

public class YourWebService : IYourWebService
{
    public XmlResponseObject GetData(int dataId)      
    {
        XmlResponseObject xmlResponseObject = null;
        var url = "http://SomeSite.com/Service/GetData/" + dataId;
        try
        {
         var request = WebRequest.Create(url) as HttpWebRequest;
         if (request != null)
         {
            request.AllowAutoRedirect = true;
            request.KeepAlive = true;
            request.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET CLR 1.1.4322; InfoPath.2; .NET4.0C; .NET4.0E)";
            request.Credentials = CredentialCache.DefaultNetworkCredentials;
            request.CookieContainer = new CookieContainer();
            var response = request.GetResponse() as HttpWebResponse;
            if (request.HaveResponse && response != null)
            {
                var streamReader = new StreamReader(response.GetResponseStream());
                var xmlSerializer = new XmlSerializer(typeof(XmlResponseObject));
                xmlResponseObject = (XmlResponseObject)xmlSerializer.Deserialize(streamReader);
            }
         }
        }
        catch (Exception ex)
        {
        string debugInfo = "\nURL: " + url;
        Console.Write(ex.Message + " " + debugInfo + " " + ex.StackTrace);
        }
    return xmlResponseObject;
    }
} 
```

鉴于您只想发送和接收文档更改，您可以使用 IsDirty 标志修改类。我敢肯定，尽管一旦您有了要使用的课程，就很容易检测到差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T22:46:16.657

您在这里遇到的问题是 XML 只是一种表示数据的形式，它不一定是数据本身。这是您正在使用的某种 XML 编辑器，还是 XML 只是一种传输方式？

如果您正在谈论将 xml 作为一种传输方式，那么当您谈论发送 XML 更改描述时，您可能希望在生成更改本身时生成这些更改描述，并且很有可能不会更改描述在与原始数据相同的模式中。

此外，数据集可以这样做的原因是因为数据集中的每一行都有一个已知的唯一键。因此可以将更改发送回该行而不是整个集合。XML 不是那样工作的，每一行都没有唯一的键。XPath 可用作更改定位器，但这可能比发送具有足够编辑的整个文档效率低。

为什么不简单地将 XML 视为文本，就像使用任何标准修补算法一样？（查看 Git 或 Hg 的来源）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T10:54:57.520

要将任何 XML 数据加载到`DataSet`中，您必须提供相应的模式。
请参阅[Deriving DataSet Relational Structure from XML Schema (XSD)](http://msdn.microsoft.com/en-us/library/bfdchewb)。

此外，`DataSet`/`DataTable`不适用于 XML 文档。他们可以从 XML*导入*数据，也可以将数据*导出*到 XML。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T20:56:38.653

我之前曾多次尝试寻找免费或开源的 XML diff 工具，但从未找到任何真正符合要求的东西。从本质上讲，您正在查看树差异，这本身就是[一个完整的学科](https://stackoverflow.com/questions/1871076/are-there-any-free-xml-diff-merge-tools-available)。我想，您使用 XML 的事实从属于这一点，因为它只不过是另一种形式的树。您“只”需要定义指定节点的内容。

尽管[树编辑距离的分解算法](http://www.cs.haifa.ac.il/~oren/Publications/TEDinTALG.pdf)计算了两棵树之间的距离，但我怀疑您可以对其进行转换以提供所有更改，因为这是距离测量的基础。检测后如何传达变化完全取决于您。范围可以从 XML 到 JSON。请注意，该算法的作者提到他们用几十行创建了一个 Python 版本，所以如果你去掉 a 行，他们可能会有所帮助。

如果你能做到这一点，看起来你可能是第一个发布实用概念证明的人:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T15:43:08.077

我在任何地方都没有找到任何有用的答案。似乎早在 2003 年，MS 就在谈论创建 XPathDocument2 或实现我所要求的东西（谈论即将发布的版本的书籍提到它），但它似乎并没有被执行。所以这是我尝试的解决方案：

使用 XPathDocument/XPathNavigator，并为更改/删除/插入添加事件处理程序。对于这些事件中的每一个，在 DataTable {XPath | 旧值 | NewValue} 表示更改。准备好提交时，将表发送过去然后清除它。如果改为取消，请使用表信息撤消 XPathDocument 中的更改。

我还没有实现这个，但它似乎可以服务。

# javascript - .filter jquery 错误

> ID：12186310
> 
> 赞同：1
> 
> 时间：2012-08-29T20:51:31.100
> 
> 标签：javascript, jquery

我有一个问题，这里是 javascript/jquery

```
 getTextForDisplay: function() {

            var displayText = "Select...";
            var options = this.dataSource._data;

            var selectedOptions = $.filter(options, function(index){
                return this.selected;

            });

            if (selectedOptions.length == 1) {
              displayText = "length1";
            } 
            else if (selectedOptions.length > 1) {
                displayText = "Multiple...";
            } 
            return displayText;
        }
    }); 
```

所以这是关于具有复选框的多选下拉框，选项变量是一个可观察的数组，从视图模型中提取其数据，所以我想要做的是显示“length1”，如果只有一个复选框是如果选中了多个复选框，则选中并显示“多个...”，这看起来很简单，但是当我运行它时我不断收到错误消息。错误是 c.replace 不是函数，错误在 jquery.min.js 文件中。如果我从 .filter 中删除索引，那么它仍然不起作用，但也不会出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:58:14.033

jQuery 没有定义`jQuery.filter()`函数（至少，不在[公共 API 中](http://api.jquery.com/jquery.filter/)）。它[`.filter()`](http://api.jquery.com/filter/)确实定义了一种`jQuery`集合方法。

也许[`jQuery.grep()`](http://api.jquery.com/jquery.grep/)是你正在寻找的？

```
var selectedOptions = $.grep(options, function (option, index) {
    return option.selected;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T20:55:47.680

没有这样的东西`$.filter()`，除非您自己编写或使用插件。

正确的语法是

```
options.filter(function (index) {
    ...
}); 
```

这是文档：[http ://api.jquery.com/filter/](http://api.jquery.com/filter/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:05:16.347

您没有正确使用该`jQuery.filter`方法，但是，有一个文档化的方法可以满足您的需求。您应该使用记录的方法而不是未记录的方法。

```
$.grep(options, function(){
    return this.selected;
}); 
```

为此，`options`必须是类似数组的结构。

# c# - 是否有 SqlGeometryBuilder 的实现？

> ID：12186313
> 
> 赞同：5
> 
> 时间：2012-08-29T20:51:39.173
> 
> 标签：c#, spatial, entity-framework-5, sqlgeography

在实体框架中实现空间类型 (System.Data.Spatial.DBGeometry) 之前，我们可以使用“Microsoft.SqlServer.Types.SqlGeometry”来处理缺乏空间支持的问题。这个库有 SqlGeometryBuilder 类，用于创建基于不同几何点的 SqlGeometry。

我决定从 SqlGeometry 转到 DBGeometry，但是我找不到任何与 SqlGeometryBuilder 过去所做的功能相同的函数。你知道这是否有任何功能吗？或者你知道它是否会包含在下一个版本中？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T21:07:34.113

这是一个很晚的回应（我只看到了这个问题）但是......

您仍然可以在使用 EF 时实现 SqlGeometryBuilder。您只需在 DbGeometry 和 SqlGeometry 之间进行转换即可使用它，然后再从 SqlGeometry 转换回 DbGeometry 以传回数据库。当您需要使用由 SqlGeometry 而不是 DbGeometry 实现的函数时，这也很有帮助。

希望它现在或以后的项目有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T07:26:25.637

```
System.Data.Common.CommandTrees.ExpressionBuilder.Spatial.SpatialEdmFunctions 
```

# c# - 使用块从内部返回一次性对象

> ID：12186319
> 
> 赞同：3
> 
> 时间：2012-08-29T20:51:53.187
> 
> 标签：c#, memory-management, .net-4.0, memory-leaks, using

在分析我的程序时，我注意到很多 byte[] 卡在内存中。我做了一些挖掘，发现大多数以某种方式创建的实例如下：

```
public byte[] CreateBytes(byte[] bytes)
{
    using (var start = new MemoryStream()) 
    {
        using (var memStr = new MemoryStream(bytes))
        {
            //do stuff
            return start.ToArray();
        }
    }
} 
```

然后将返回的 byte[] 传递给其他方法，并用于`MemoryStream`从另一个 using 块中创建另一个：

```
using (var uncompressedStream = new MemoryStream(uncompressedData))
{
    using (var compressedStream = new MemoryStream())
    {
        //Do some compression
    }
}

myObject.Bytes = uncompressedData;
uncompressedData = null;

return myObject; 
```

（`uncompressedData`是从 CreateBytes() 返回的值）。

我的问题是，**什么时候 byte[] 得到清理？** 我是否特别需要将其设置为 null，如果需要，在哪里？在第二个 using 块之后，我不再需要它，但如果我简单地说`uncompressedData = null;`，我不确定这是否会回收内存。

我原以为 using 语句`CreateBytes(byte[] bytes)`会处理字节，但由于它返回引用，是否会推迟和/或放弃处理？

**编辑**：我添加了另一行代码。由于我将 uncompressedBtyes 存储在另一个对象中，将 uncompressedData 设置为 null 是没有意义的，并且 byte[] 将一直存在`myObject`（或直到`myObject.Bytes`设置为 null），对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:53:42.920

当两个条件都满足时， byte[] 会被清理：

*   没有对该内存块的引用
*   垃圾收集器决定收集那个内存块

GC 基于各种因素在不确定的时间运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:55:10.590

字节数组，就像内存中的任何其他托管对象一样，一旦不再可以从任何根引用访问，就有资格进行垃圾收集。您可以相信 GC 知道什么时候发生了这种情况，并智能地安排时间来实际清理合格的对象。尽量不要担心何时真正清理了符合清理条件的对象，GC 可能比你更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:55:48.497

除了埃里克回答：

当您确定不再需要它`byte[]`时，分配给它`null`。

这并不能保证内存*现在*会被回收，也不能保证之后会被回收，这只是一种*帮助* `GC`识别它作为收集主题的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T20:57:35.897

该语句实际上与您返回`using`的数组无关。`byte`

是一次性的，并且该`MemoryStream`对象的处置是该`using`语句所管理的（请注意，处置与垃圾收集不同，但通常是其前身）。

当你打电话时`ToArray()`，你正在创造一些不是一次性的新东西；一旦超出范围，垃圾收集器将在不确定的时间对其进行清理（这通常是一个经过良好优化的过程）。

# javascript - jQuery滑块的CSS边距问题

> ID：12186322
> 
> 赞同：1
> 
> 时间：2012-08-29T20:52:21.323
> 
> 标签：javascript, jquery, html, css

我对嵌入到轮播中的背景图像有疑问。[单击此处](http://iamnatesmithen.com/bodyworks/index.php)我注意到，当我从一张幻灯片单击到另一张幻灯片时，我网站上的背景图片会移动到不合适的位置。我的轮播的边缘顶部当前设置为`margin-top:-275px;`，背景图像设置为`margin-top:-64px;`我有点担心这些设置。

有没有人可以解决这个问题？

要激活幻灯片，请单击导航栏下的红色细选项卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:11:49.157

我想那是因为你有

```
.rslides li {
  top:0;
} 
```

它对`position:relative`（并且当前幻灯片有）没有任何作用，但它使用`position:absolute`（隐藏的幻灯片）向下移动幻灯片。

当您单击一个选项卡时，有一段时间新选项卡会淡入，但还`position:relative`没有。然后，在那一刻，新幻灯片不在您想要的位置。

所以删除那条线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T22:13:11.090

发生跳跃是因为您在动画切换结束时将`LI`项目从切换`position: absolute;`到。`position: relative;`这可以通过删除您的 CSS 规则来避免：

`.rslides li { left: 0; top: 0; }`

指定`width`and`height`很好，但是一旦你指定`left`and `top`- 然后从相对定位切换到绝对定位，你就会看到你所看到的跳跃。

至于每个面板的定位 - 它与您布置盒子的方式有关。您指定的尺寸对于您提供的内容来说不够大。例如：`<div id="header">`是`37px`高，这是社交媒体按钮的合适大小，但您也可以将它作为容器`#nav-menu` `UL`- 这是另一个`102px`高。

看来，为了纠正这一点并使事情重叠，您正在使用负边距 - 这让您都被抛弃了。

我的建议是使用标准化的布局系统，例如以下任何一种：

*   [http://cssgrid.net/](http://cssgrid.net/)
*   [http://960.gs/](http://960.gs/)
*   [http://www.1kbgrid.com/](http://www.1kbgrid.com/)
*   [http://foundation.zurb.com/docs/grid.php](http://foundation.zurb.com/docs/grid.php)

并使用它来执行您的布局任务，而不是尝试使用混合绝对/相对定位自行制作重叠图层。

或者，如果您要走重叠层路线（同样，不建议），请真正承诺。在整个布局中绝对定位事物。

为了实现这一点，您可能会考虑 CSS 规则，例如：

```
#header {
    display: block;
    position: absolute;

    left: 50%; top: 0px;
    height: 139px; /* Your Social media links height + nav buttons height */
    width: 1018px; /* Your current width */
    margin-left: -509px; /* Half the width - centers on page */
} 
```

再一次 - 这是更多的工作，更难维护并且更不优雅 - 但至少会给你带来一致的间距/尺寸。

# mongodb - 如何使用 Morphia 持久化多维数组

> ID：12186323
> 
> 赞同：2
> 
> 时间：2012-08-29T20:52:27.003
> 
> 标签：mongodb, multidimensional-array, morphia

我正在尝试使用 Morphia 将此类持久保存到 mongodb 中，

```
@Entity  
public class A {  
    @Id  
    private String id;  
    private int[][][] param = {{{0,0},{1,1}}, {{2,2},{3,3}}};  
} 
```

int 数组参数另存为

`[ { "className" : "[[I"} , { "className" : "[[I"}]`

没有数据被保存，显然我无法加载对象。有趣的是，如果我将 int 数组放入 Map 中，`Map.put("param", param)`比如

`[ [ [ 0 , 0] , [ 1 , 1]] , [ [ 2 , 2] , [ 3 , 3]]]`

我的问题是，我可以使用 Morphia 保留多维数组字段吗？如果是，最好的方法是什么？

# javascript - 我应该如何检测 IE 浏览器？

> ID：12186325
> 
> 赞同：13
> 
> 时间：2012-08-29T20:52:35.497
> 
> 标签：javascript, cross-browser, browser-feature-detection

我已经对特定功能进行了功能检测，以决定是否可以使用它或是否必须使用变通方法。但是，不幸的是，我发现 IE 在该功能中有一些错误，即使它存在，它也对我毫无用处。因此，即使它通过了功能检测，我也需要检测浏览器是 IE，所以如果它是 IE，我不会使用该功能。

我试图看看我是否可以对实际的错误行为进行功能检测（这将是最好的，因为如果 IE 将来修复该行为，它会适应），但似乎没有任何方法可以做到这一点（主题另一个[问题](https://stackoverflow.com/questions/12172346/how-to-identify-buggy-behavior-in-input-event-without-browser-detection)）。这意味着我只能试图最终确定它是一个 IE 浏览器，这样我就可以避免这个错误的功能。 **我不想使用 useragent 字符串**，因为我们都知道它很容易被欺骗并且很容易出错。

所以，我想对它是否是IE浏览器进行特征检测。

到目前为止我的方法是这样的：

```
var isIE = (document.body.attachEvent && window.ActiveXObject); 
```

这将查看该`attachEvent()`方法是否存在以及是否`ActiveXObject`存在支持。因为`attachEvent`Opera 支持`attachEvent`.

这是检测 IE 的可靠方法吗？有没有更好的方法？

请不要回复我真的不应该做浏览器检测，而是应该使用特征检测。我已经在进行功能检测，但这导致了一个问题，因为“支持”该功能并因此通过功能检测的浏览器结果非常错误，以至于我无法在该浏览器中使用该功能。所以，现在我必须检测有问题的浏览器。

如果您想了解更多有关使用此功能的具体情况，请参阅[this other question](https://stackoverflow.com/questions/12172346/how-to-identify-buggy-behavior-in-input-event-without-browser-detection)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T21:00:57.643

条件注释条件编译，这里解释：

[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

或者在这里找到的相关表亲：

[http://www.javascriptkit.com/javatutors/conditionalcompile.shtml](http://www.javascriptkit.com/javatutors/conditionalcompile.shtml)

两者都是 Internet Explorer 独有的，因此它们将允许您嗅探 IE。

```
<script type="text/javascript">

/*@cc_on
document.write("JScript version: " + @_jscript_version + ".<br>");
   /*@if (@_jscript_version >= 5)
      document.write("JScript Version 5.0 or better.<br \/>");
      document.write("This text is only seen by Internet Explorer browsers that support JScript 5+<br>");
   @else @*/
      document.write("This text is seen by all other browsers (ie: Firefox, IE 4.x etc)<br>");
   /*@end
@*/

</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T20:59:53.710

在链接的帖子中，给出了有条件评论的建议。这将使您甚至可以检测到 IE 的版本。

在你的脑海中添加这样的东西：

```
<!--[if lt IE 9]>
  <script type="text/javascript">
    var lt9=true;
  </script>
<![endif]--> 
```

这是特定于 IE 的，在其他浏览器中将作为注释被忽略。

对于简单的检测，请使用以下内容：

```
<!--[if gte IE 6]>
  <script type="text/javascript">
    // this is IE greater than or equal to 6
    var isIE=true;
  </script>
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:59:38.210

使用条件注释而不是条件编译具有允许检测 IE 版本的优点（与 JScript 版本相反，JScript 版本是您可以从条件编译中获得的最佳版本）。您可以使用`innerHTML`以下脚本从脚本中执行此操作。以下示例显示了如何检测 IE 8 或更低版本：

```
var div = document.createElement("div");
div.innerHTML = "<!--[if lte IE 8]><i></i><![endif]-->";
var isIe8orLower = (div.getElementsByTagName("i").length == 1);

alert("Is IE 8 or lower: " + isIe8orLower); 
```

请注意，[IE 10 和更高版本根本不支持条件注释](http://www.sitepoint.com/microsoft-drop-ie10-conditional-comments/)。但是，[条件编译](http://msdn.microsoft.com/en-us/library/ie/121hztk3%28v=vs.94%29.aspx)仍然有效，是次佳选择，因此我建议使用它，尽管如上所述，它无法识别 IE 的实际版本。

# .net - 如何在 WebBrowser 中加载的网页内设置框架窗口的 onbeforeunload？

> ID：12186328
> 
> 赞同：1
> 
> 时间：2012-08-29T20:52:45.083
> 
> 标签：.net, iframe, webbrowser-control, onbeforeunload, mshtml

在组件中加载的网页的 iFrame 中加载的某些网页`WebBrowser`在关闭网页时会弹出确认窗口。这个确认窗口阻止了主网页关闭，所以我必须点击离开页面的选项。我想通过更改`onbeforeunload`在 iFrame 中加载的网页的事件来避免这种情况。

我已尝试修改[此解决方案](https://stackoverflow.com/questions/8883076/how-to-intercept-the-onbeforeunload-event-in-a-webbrowser-control "对，就是那个！")并将其应用于我的案例。但是，该解决方案似乎仅在访问加载到内部的页面事件时才适用`WebBrowser`，而不是在其中的 iFrame 事件时适用。

所以这就是我尝试过的。

我首先从上述解决方案中声明了接口：

```
[ComImport]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("00020400-0000-0000-C000-000000000046")]
public interface IDispatch
{
    [PreserveSig]
    int GetTypeInfoCount(out int Count);
    [PreserveSig]
    int GetTypeInfo(
        [MarshalAs(UnmanagedType.U4)] int iTInfo,
        [MarshalAs(UnmanagedType.U4)] int lcid,
        out ITypeInfo typeInfo
    );

    [PreserveSig]
    int GetIDsOfNames(
        ref Guid riid,
        [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.LPWStr)] string[] rgsNames,
        int cNames,
        int lcid,
        [MarshalAs(UnmanagedType.LPArray)] int[] rgDispId
    );

    [PreserveSig]
    int Invoke(
        int dispIdMember,
        ref Guid riid,
        uint lcid,
        ushort wFlags,
        ref System.Runtime.InteropServices.ComTypes.DISPPARAMS pDispParams,
        out object pVarResult,
        ref System.Runtime.InteropServices.ComTypes.EXCEPINFO pExcepInfo,
        IntPtr[] pArgErr
    );
} 
```

然后，我想将`onbeforeunload`事件设置为`null`或以某种方式删除它的内容，以便弹出窗口不会...弹出。

```
HTMLDocument document = (HTMLDocument)webBrowser2.Document.DomDocument;

// iFrame's id is "iF".
HTMLFrameElement frame = (HTMLFrameElement)document.getElementById("iF");
IHTMLWindow2 window = frame.contentWindow;

// Everything works fine until the following line.
var event = (ExtendedWebBrowser.IDispatch)window.onbeforeunload;

// Although no exception is thrown, event variable is always null, no matter if the webpage in the iFrame has or does not have onbeforeunload event specified.
// Setting the event to null does nothing. I'd have to come up with how to read this event before trying to set it to something.
window.onbeforeunload = null; 
```

所以我的最后一个问题是：**如何获取和设置在 WebBrowser 控件中加载的网页的 iFrame 内加载的网页的 onbeforeunload 事件（或任何其他事件）？**

随时要求任何进一步的解释。提前致谢。

## 编辑：

**应用程序的进一步解释。**

应用程序按顺序导航到网页列表。每一页处理完后，需要关闭，加载下一个。每个网页都有一个 iframe，它反过来从不同的域加载网页。我对应用程序没有任何问题，除非在 iframe 内加载的网页调用`confirm`或`popup`在其`onbeforeunload`事件中。确认弹出框阻止应用程序处理更多网页。我需要摆脱这个弹出确认窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:44:59.033

如果您在弹出弹出窗口时遇到问题，我已经为您提供了一个解决方案，并且如果您想在客户端机器上禁用/启用 javascript（或者甚至只是读取/查询它是否已启用/禁用），我已包含该答案对你来说，我们开始吧：

您要禁用哪个弹出消息？如果是警报消息，试试这个，显然解决窗口或框架对象以满足您的特定需求，我只是假设顶级文档，但如果您需要 iframe，您可以使用 window.frames(0) 访问它。对于第一帧等等...（关于 JavaScript 部分）...这里有一些代码，假设 WB 是您的网络浏览器控件...

```
WB.Document.parentWindow.execScript "window.alert = function () { };", "JScript" 
```

但是，在您的情况下，由于您想禁用打印，只需`.alert`换成`.print`.

您必须在整个页面加载完成后才运行上述代码，我知道这很难做到（并且尚未发布完整证明版本）但是我已经这样做了一段时间（完整证明）现在，如果您阅读我之前标记为“webbrowser”和“webbrowser-control”的一些答案，您可以收集有关如何准确执行此操作的提示，但如果您想取消 .confirm JavaScript，请回到手头的问题消息，只需将 window.alert 替换为 window.confirm （当然，使用正确的对象限定您的 window.object 以到达您正在使用的文档层次结构）。您还可以使用上述技术禁用 .print 方法以及新的 IE9 .prompt 方法。

这是一个常量字符串（在 VB 中声明），它将摆脱 4 个弹出窗口，包括新的 IE9 弹出窗口。此外，它将摆脱 onbeforeunload 事件，并且它将在其运行的每个页面上执行所有这些操作。如果你有框架，你也不需要在框架中运行它们，只在父文档中运行就足够了。在这里（在 VB6 中声明）， _ 只是为了便于阅读，我放置在此处的行延续，& 用于字符串连接，而 ; 在 javascript 中只是意味着将下面的内容视为另一行代码。这样，您可以在一个物理行中运行多行代码（我认为是 5 行）。

```
Public Const DEFAULT_JS_TO_RUN_AFTER_EACH_PAGE_LOAD As String = _
& "window.alert = function () { }; window.confirm = function () { }; " _
& "window.prompt = function () { }; window.print = function () { }; " _
& "window.onbeforeunload = function () { };" 
```

如果要完全禁用 JavaScript，可以使用注册表来执行此操作，并且必须在 webbrowser 控件加载到内存之前更改注册表，并且每次更改它（打开和关闭）都必须重新加载 webbrowser 控件并进入内存（或只是重新启动您的应用程序）。

> 注册表项是 \HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\ - 键名是 1400，禁用它的值是 3，启用它是 0。

当然，因为 Zones 键下有 5 个区域，您需要为活动区域或所有区域更改它以确保。但是，如果您只想抑制 js 对话框弹出消息，那么您真的不需要这样做。

让我知道你的情况，如果我能提供进一步的帮助。

# c++ - 为 LIB 查找已加载的 DLL

> ID：12186331
> 
> 赞同：0
> 
> 时间：2012-08-29T20:52:58.860
> 
> 标签：c++, c, visual-studio

在 VS 2005 中，我可以`libs`通过在 IDE 中显式设置选项来查看链接器正在搜索的路径。如何找到相应`dll`的加载位置？

```
1>Searching libraries
1>    Searching C:\Program Files (x86)\Microsoft Visual Studio 8\VC\lib\msvcrtd.lib:
1>      Found _memcpy
1>        Referenced in deflate.obj
1>        Referenced in gzio.obj
1>        Referenced in infback.obj
1>        Referenced in inflate.obj
1>        Loaded msvcrtd.lib(MSVCR80D.dll) 
```

在上述情况下，`MSVCR80D.dll`来自哪里？我在**VC**目录中搜索了**dll**，弹出了10多个结果。有什么简单的方法可以找到准确加载的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:38:03.547

The DLLs are actually loaded at runtime, not at link time. Actually, native DLLs don't even have to be present in the machine to do the link.

You can see that information running your program in the debugger (usually F5) and the opening the "Modules window" from the "Debug" submenu, IIRC.

Also, you can analyze the executable and try deducing which DLL will be loaded. The best tool for that is, no doubt, the [Dependency Walker](http://www.dependencywalker.com/). It can analyze DLLs too (cool) but it may have troubles with managed DLLs.

# scala - Play 2.0 上的 CDN 使用情况

> ID：12186335
> 
> 赞同：5
> 
> 时间：2012-08-29T20:53:30.903
> 
> 标签：scala, playframework, playframework-2.0, cdn, amazon-cloudfront

我有一个包含大量静态内容的高流量网站。它目前在 Play 1.2.4 上，但我正在迁移到 Play 2.0.2。

对于 Play 1.X，我们编写了一些我们使用的代码，而不是 html 模板中的 @asset。

```
/**
 * Drop-in replacement for @asset. Use to take advantage of cloudfront on live.
 * Paths are always absolute to root. Leading '/' is optional.
 *
 * @param path relative to the application root. This should usually be "public/some-file"
 * @return path to asset on the currently configured CDN.
 */
def cdnAsset(path: String) : String = {
  cdnEnabled match {
    case "true" =>
      path(0) match {
        case '/' => "https://" + cdnUrl + path
        case _ =>  "https://" + cdnUrl + "/" + path
      }

    case _ =>
        play.mvc.Router.reverse(play.Play.getVirtualFile(path))
  }
} 
```

对于 Play 2.0，我认为我们可以改进这一点。我认为如果我们不必使用自定义代码乱扔模板而不是使用 Play 2.0 提供的 @Asset.at 会更好。我不确定做到这一点的最佳方法。[我想知道在 Play 1.2.X Hosting static HTML in a Play](https://stackoverflow.com/questions/10524285/hosting-static-html-in-a-play-app-on-cloudfront)上的这个问题的答案中是否做了类似的事情 ！[CloudFront 上的应用程序](https://stackoverflow.com/questions/10524285/hosting-static-html-in-a-play-app-on-cloudfront) 可以为 Play 2.0 完成。

我想充分利用 Play 2.0 提供的 Assets 控制器，因为它执行了一些很不错的优化。

有谁知道这样做的方法？我在想如果它可以通过一些路由器魔法来完成，那将是理想的，但我对 Play 还是有点太初学者了，不知道这是否或如何可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:02:46.023

James Ward 写了一个[很好的教程](http://www.jamesward.com/2012/08/08/edge-caching-with-play2-heroku-cloudfront)来干净地做到这一点。

# jquery - 每个 TH 之后的新行数

> ID：12186344
> 
> 赞同：3
> 
> 时间：2012-08-29T20:54:14.880
> 
> 标签：jquery

我有一张桌子，里面有几行，下面有几行。有没有办法将样式应用到 TD，就像在使用 jQuery 的 TH 的每一行之后以奇数/偶数重新启动一样？

```
<table>
<tr>
  <th>header 1</th>
</tr>
<tr>
  <td>123</td>
</tr>
<tr>
  <td>445</td>
</tr>
<tr>
  <td>7899</td>
</tr>
<tr>
  <th>header 2</th>
</tr>
<tr>
  <td>asd</td>
</tr>
<tr>
  <td>ddd</td>
</tr>
<tr>
  <td>ggg</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:04:11.767

```
var i = 0;

$('table tr').each(function() {

    if ($(this).is(':has(th)')) return i = 0;    
    $(this).children().addClass(i++ % 2 ? 'odd' : 'even');
});​ 
```

[http://jsfiddle.net/u9hjA/](http://jsfiddle.net/u9hjA/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T21:05:29.347

试试下面的东西，

**演示：http:** [//jsfiddle.net/Tvyfz/2/](http://jsfiddle.net/Tvyfz/2/)

```
$(function () {
   var zc = 0;

   $('table tr').each (function (idx, el) {
      if ($(el).find('th').length != 0) {
         zc = 0;
      } else {
         $(el).addClass((++zc%2)?'even':'odd');
      }

   });
}); 
```

**注意：**您的标记没有正确关闭`</tr>`

**编辑：**小清理。

# protocol-buffers - Protobuf C# 消息翻译成 JAVA

> ID：12186349
> 
> 赞同：2
> 
> 时间：2012-08-29T20:54:35.340
> 
> 标签：protocol-buffers, protobuf-net

我正在尝试将使用 C# 生成的消息翻译成 JAVA。作为第一步，我生成了原始文件，这就是我得到的

```
package Om.Business.Scanner;

message ScannerActivityDetail {
   optional string ActivityId = 1;
   optional string ContextId = 2;
   optional int32 ActivityStart = 3;
   optional bcl.DateTime ActivityEnd = 4;
} 
```

我如何在 java 世界中解释 bcl.DateTime？

我正在使用 protobuf-net 并尝试反序列化 C# 应用程序生成的消息。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:04:17.960

看着[`bcl.proto`](https://code.google.com/searchframe#XB9svDNAlPQ/trunk/Tools/bcl.proto)，应该很简单。以明显的方式创建一个`Map<DateTime.TimeSpanScale, TimeUnit>`，然后：

```
public static Date toDate(bcl.DateTime proto) {
    TimeUnit unit = SCALE_TO_UNIT_MAP.get(proto.getScale());
    if (unit == null) {
        throw new IllegalArgumentException("Invalid scale: " + proto.getScale());
    }
    long millis = unit.toMillis(proto.getValue());
    return new Date(millis);
} 
```

您可以以完全相同的方式使用[Joda Time](http://joda-time.sf.net)的类型，因为它也有一个接受 a 的构造函数。（您可能需要考虑指定哪个时区......）`DateTime``long`

# javascript - 可以将 Object 对象强制转换为 Array 对象吗？

> ID：12186351
> 
> 赞同：2
> 
> 时间：2012-08-29T20:54:37.433
> 
> 标签：javascript

Crockford 在[http://javascript.crockford.com/survey.html](http://javascript.crockford.com/survey.html)中写道：

*“有两种方法可以创建一个新数组：

var myArray = [];
var myArray = new Array();”*

所以我对我正在阅读的一些 AJAX 代码中的这两行感到困惑：

```
var obj={};    // obj is an Object object (i.e. a hash table)
obj[4] = 'x';  // now obj is suddenly an Array object via an integer key? 
```

在 JavaScript 中，对象和数组实际上是一样的东西，但是键类型有一个变体？

换句话说，这与在 php 中我们可以使用*名称*（字符串）或整数作为哈希键的相同吗？

我已经用谷歌搜索了这个问题的答案，但似乎无法确定一篇讨论这个问题的文章。

想到的一种可能性是，第一行可能是语法 lint，因为第二行在创建新的 Array 对象时覆盖了 obj 的先前定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:58:45.967

它不会变成一个数组，它只是一个具有“4”属性的对象，如下所示：

```
var obj = {
  '4': 'x'
}; 
```

当用作属性时，它只是转换为字符串`obj['4'] = 'x';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:00:46.393

在 JavaScript 中，除了原始数据类型之外的所有东西都是对象。对象可以有一个属性，有两种访问对象属性的方法：

1.  点表示法，`foo.bar`只要属性名称是有效标识符，您就可以使用它。

2.  括号表示法，`foo['bar']`如果密钥不是[有效的标识符*^([spec])*](http://es5.github.com/#x7.6) ，则必须使用它。例如，如果它是一个数字，或者包含一个空格，或者您有一个带有名称的变量。

因此，括号表示法*不是*数组的特征，如果您看到它，它并不意味着该值是一个数组。这是访问属性的两种简单方法之一。

数组的元素只是带有数字键的属性。数组建立在对象之上，并实现了一些以特殊方式处理这些数字属性的附加方法。例如，`.length`当您添加新元素时，该属性会自动更新。但最终它们只是正常的属性。

在您的示例中，您有一个简单的对象。`obj[4]`您必须使用or访问该属性，`obj['4']`因为`obj.4`它是无效的，因为`4`它不是有效的标识符（基本上，您可以用作变量名的所有内容都是有效的标识符。`var 4 = 'foo';`无效）。

而且由于数组只是对象，如果您*可以*使用数字作为标识符，您还可以使用`arr.4`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:58:44.307

据我所知，不，不能将对象强制转换为数组。*但是*，它看起来和行为都像一个数组，这就是这里发生的事情。数字和任何其他可以强制转换为字符串的东西，对于 Javascript 对象来说都是完全有效的属性名称，所以

```
obj[4] = 1;
obj['spam'] = 2; 
```

都是在对象上设置属性的有效方法。这不会使对象成为数组。Array 是一类特殊的对象，具有特定的方法（`.slice()`、`.concat()`等）和一个`length`与数组中的项目数保持同步的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T21:04:28.903

Javascript 是一种松散类型、基于原型的语言。甚至像布尔值这样的原始类型**也可以**被视为对象（[尽管您不会走得太远](http://jsfiddle.net/uaYvZ/1/)）。javascript 中的几乎所有内容，从根本上来说，都是一个对象。

理解这一点，数组就是一个对象。您可以任意向任何对象添加属性：

```
var xml = new XMLHttpRequest();
xml[4] = 'x';
console.log(xml); 
```

该对象仍然是 XMLHttpRequest 的一个实例。它现在有一个标记为 的`4`属性`x`。你**可以**这样对待任何事情——甚至是一个函数：

```
var test_func = function () {
    alert('woah!');
}
test_func[4] = 'x';
console.log(test_func[4]); 
```

这里的要点是，该`obj[key] = value`符号并不表示“数组”类型，就像在 PHP 等语言中一样。相反，它是访问任何对象属性的另一种方法，并且等效于`obj.key = value`（但是，您不能使用`obj.4 = 'x'`，这是无效的语法）。另一个要点是 javascript 中的任何对象都可以以几乎任何方式修改或使用。你*不应该*滥用对象，但你*可以*

在这里查看：http: [//jsfiddle.net/w2AqJ/](http://jsfiddle.net/w2AqJ/)

**文档**

*   MDN 上的数组 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)
*   *Andrew Dupont*认为有害的 Javascript“关联数组” -* [http://andrewdupont.net/2006/05/18/javascript-associative-arrays-considered-harmful/](http://andrewdupont.net/2006/05/18/javascript-associative-arrays-considered-harmful/)*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T21:05:50.653

是的

Javascript Array 与传统的数组有很大的不同，你可以把它想象成一个对象。

```
 var array = [1,2,3] is equivalent to var object = {'0' : 1, '1' : 2, '2' : 3} 
```

除了继承自 Array.prototype 的数组和继承自 Object.prototype 的对象，其中 Array.prototype 将包含长度等方法。*

# svn - SVN 上的 Cleartool lsco -avo -cview 等效项

> ID：12186353
> 
> 赞同：1
> 
> 时间：2012-08-29T20:54:41.523
> 
> 标签：svn, cleartool

SVN 上的等效命令是`cleartool lsco -avo -cview -me`什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:01:47.107

我`svn status`相信。

```
cleartool lsco -avo -cview -me 
```

用于列出当前用户 ( )`lsco`在当前视图 ( ) 中所有当前签出的文件 ( )`-cview``-me`

如果您要`svn status`在 svn 工作区（相当于 ClearCase 快照视图）中执行操作，您也会获得当前修改的文件。有关其他选项，
请参阅“[在本地副本中修改的文件的 svn 列表”。](https://stackoverflow.com/questions/1168464/svn-list-of-files-that-are-modified-in-local-copy)
例如，在 Windows 上：

```
svn status -u | grep '^M' 
```

（有关该`-u`选项的更多信息，请参阅“ [What svn command will list all the files modified on a branch?](https://stackoverflow.com/questions/160370/what-svn-command-would-list-all-the-files-modified-on-a-branch) ”）

* * *

[Beyonddc](https://stackoverflow.com/users/287281/beyonddc)的OP 具​​有该命令的更高级版本：

```
find . -maxdepth 1 -type d -exec bash -c "cd '{}' && svn status | grep '^M'" \; 
```

# c# - 将对象保存到数据库c#

> ID：12186354
> 
> 赞同：0
> 
> 时间：2012-08-29T20:54:45.547
> 
> 标签：c#, database, class, sqlconnection

我有类 Report 和类 Program，我想要完成的（到目前为止还没有运气）是将数据从类 Program 和方法 SaveRep() 发送到类 Report 方法 Save() 并将其保存在此方法中。

如果问题表述不当，我深表歉意，我真的很困惑，请帮忙。谢谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Configuration;
using System.Data.SqlClient;

namespace Application
{
 class Program
 {
    static void Main(string[] args)
    {            
        //call method SaveRep
    }

    public void SaveRep(...)
    {
       int RepID = 1;
       string Data1 = "SomeData1"
       string Data2 = "SomeData2"

       //This method should send the data above to method Save() in Report class
       //data to this method will be provided from another method.
    }        
  }

  public class Report
  {
    private static int _repID;
    public int RepID
    {
        get { return _repID; }
        set { _repID = value; }
    }

    private static string _data1;       
    public string Data1
    {
        get { return _data1; }
        set { _data1 = value; }
    }

    private static string __data2;
    public string Data1
    {
        get { return _data2; }
        set { _data2 = value; }
    }

    public void Save()
    {
        string strConnectionString = (@"server=(local)\sqlexpress;Integrated Security=True;database=DataBase");

        SqlConnection connection = new SqlConnection(strConnectionString);
        connection.Open();

        // This method should save  all data (RepID,Data1,Data2)
        // to the DB, provided to her by SaveRep method from Program class.
        // Properties are columns from a database
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:58:06.927

```
 string connectionString = ....; //adjust your connection string

    string queryString = "INSERT INTO ....;"; //Adjust your query
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        using( SqlCommand command = new SqlCommand(
            queryString, connection))
        {
        connection.Open();
        command .ExecuteNonQuery();
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:05:28.673

```
public void Save()
{
  string yourConnString="Replace with Your Database ConnectionString";
  using(SqlConnection connection = new SqlConnection(yourConnString))
  {    
     string sqlStatement = "INSERT Table1(Data1) VALUES(@Data1)";
     using(SqlCommand cmd = new SqlCommand(sqlStatement, connection))
     {
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@Data1",Data1);
       //add more parameters as needed  and update insert query

        try
        {
           connection.Open();
           cmd.ExecuteNonQuery();
        }
        catch(Exception ex)
        {
          //log error
        }    
     }
  }
 } 
```

假设您`Data1`的名称是您的列名。更新 sqlStatement 以获取相关列。

现在`SaveRep`，你可以这样称呼它

```
 public void SaveRep()
 {
   Report objReport=new Report();
   objReport.Data1="Something somethinng";
   objReport.Save();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:09:24.043

前几位演讲者没有注意到的一件小事，就是你的`Report`班级被严重破坏了。为什么`static`在变量上使用关键字？不要那样做！好吧，除非你知道它是做什么的，而在这里我感觉你不知道。将您的 Report 类更新为如下所示：

```
public class Report
{
    public int RepID {get;set;}
    public string Data1 {get;set;}
    public string Data2 {get;set;}

    public void Save()
    {
        // what others said
    }
} 
```

原始代码中的“静态”使所有 te 变量成为全局/共享的。这意味着如果您使用 来创建 500 个报表对象`new`，它们都将具有相同的 ID，即 Data1 和 Data2。对这 500 个对象中的任何一个进行任何更改都会导致所有对象发生更改。但它具有误导性，对象不会改变。他们只会拥有**相同**的数据。查看“ID”字段，我认为您宁愿想要一个具有单独数据的单独对象以用于单独的记录..

# sql - 将列转换为行

> ID：12186356
> 
> 赞同：0
> 
> 时间：2012-08-29T20:54:56.033
> 
> 标签：sql, tsql, sql-server-2005

我知道如何以一种方式执行此操作，但我创建的查询大约需要 1:30 才能运行，并且由于系统限制，我需要对其进行优化以更快。我已经使用同一个表的多个连接来执行此操作，但想知道是否有更短的查询或更有效的查询我可以使用。

我给出了一个查询示例，但它确实从下面引用的 OrderItemFormDateFields 表的行中提取了大约 100 列。我已经创建了列，我得到了我需要的结果，但同样，它很慢。如果您需要有关表格的更多详细信息，请告诉我。

我想我基本上是在寻找一种动态填充而不是列出每一列的方法。我已经看到了一些使用枢轴和案例语句的不同方式，但我对枢轴还不是很好，而且案例似乎效率更低。谢谢！

```
SELECT
OrderNumber
,Product
,OrderDate
,   oifd1.value as  'ADD_SUBJ_ADDRESS'
,   oifd2.value as  'ADD_SUBJ_BATHS'
,   oifd3.value as  'ADD_SUBJ_BEDROOMS'
,   oifd4.value as  'ADD_SUBJ_DATE'
,   oifd5.value as  'ADD_SUBJ_GLA'
FROM(
SELECT CAST(oi.orderid as VARCHAR(MAX))+'.'+CAST(oi.orderitemid as VARCHAR(MAX))     as      OrderNumber
,p.abbreviation as product, o.orderdate
FROM OrderItems oi
join products p on p.productid = oi.productid
join orders o on o.orderid = oi.orderid)x
left    join    orderitemformdatafields     oifd1   on      oifd1.orderreference    =   OrderNumber and oifd1.fieldname in  (     'SUBJ_STREET_ADDR')
left    join    orderitemformdatafields     oifd2   on      oifd2.orderreference    =   OrderNumber and oifd2.fieldname in  (      'ADD_SUBJ_BATHS')
 left   join    orderitemformdatafields     oifd3   on      oifd3.orderreference    =   OrderNumber and oifd3.fieldname in  (      'ADD_SUBJ_BEDROOMS')
 left   join    orderitemformdatafields     oifd4   on     oifd4.orderreference =   OrderNumber and oifd4.fieldname in  (     'ADD_SUBJ_DATE')
left    join    orderitemformdatafields     oifd5   on      oifd5.orderreference    =   OrderNumber and oifd5.fieldname in  (     'ADD_SUBJ_GLA') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:59:52.993

您的问题之一是您要扫描整个表五次以查找 的五个不同值`fieldname`。如果您不索引该列，则最好。

另外，您最好在`OrderNumber`.

如果您从程序（例如网页）调用此查询，则可能更容易“透视”该程序中的数据。获取数据，将其写入数组，然后将其作为列而不是行读回。（假设数据并不庞大。）

**编辑添加**一些关于索引的链接：

*   [数据库索引如何工作？](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)
*   [MSDN - 索引](http://msdn.microsoft.com/en-us/library/ms189271(v=sql.105))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:09:44.160

希望这会帮助你。

```
select * from (
SELECT CAST(oi.orderid as VARCHAR(MAX))+'.'+CAST(oi.orderitemid as VARCHAR(MAX))     as      OrderNumber
,p.abbreviation as product, o.orderdate
,oifd.value as value
,oifd.fieldname as fieldname
FROM OrderItems oi
join products p on p.productid = oi.productid
join orders o on o.orderid = oi.orderid
left join orderitemformdatafields     oifd   on  oifd.orderreference = CAST(oi.orderid as VARCHAR(MAX))+'.'+CAST(oi.orderitemid as VARCHAR(MAX))
) as p
PIVOT
(
    MAX(value) FOR fieldname in ([SUBJ_STREET_ADDR],[ADD_SUBJ_BATHS],[ADD_SUBJ_BEDROOMS],[ADD_SUBJ_DATE],[ADD_SUBJ_GLA])
)AS pvt 
```

# java - org.apache 包无法在 Eclipse 中解析

> ID：12186358
> 
> 赞同：10
> 
> 时间：2012-08-29T20:55:00.603
> 
> 标签：java, eclipse, apache

以下

```
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient; 
```

无法解决。我下载了 Apache Http 包并通过外部 jars 选项导入它们，但仍然无法解决。在 Android 中它似乎可以工作，猜测它在 SDK 中，但在这里我不是在做 Android。我收到了错误的包裹吗？

我相信这是链接：

[阿帕奇](http://hc.apache.org/downloads.cgi)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T21:02:07.183

*听起来*不错：

```
1) The .jar file in question should be something like "httpcore-4.0.1.jar". 
   Please confirm the name.

2) Adding this to "External Libraries" is absolutely the correct thing to do.

3) For compiling in the Eclipse IDE, you must:

   a) Select your project

   b) Select "Build Path" > "Add External Libraries"

4) For running in the Eclipse IDE, you must

   a) Select "Run" > "Run configurations".  
      Choose your (Java Application?) configuration.

   b) Select "Classpath" > "Add External Jar"

5) For running outside of the Eclipse IDE, you must make sure the .jar 
   file is present and your -cp (Classpath) argument is set correctly. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-17T19:59:54.377

将罐子拖到我的项目中后，我遇到了同样的问题。

右键单击 jar 并选择`Build-path -> Add-to-Build-Path`为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:59:55.477

如果您首先将这些 JAR 添加到一个 Android 项目，但现在想在另一个（非 Android）项目中使用它们，请确保您已将这些 JAR 导入到另一个项目中。在 Eclipse 中，每个项目都维护自己的构建类路径设置，因此将 JAR 导入一个项目不会自动使它们可用于其他项目。

# java - Spring Web Flow 中的字段验证

> ID：12186359
> 
> 赞同：0
> 
> 时间：2012-08-29T20:55:03.067
> 
> 标签：java, spring, spring-mvc, spring-webflow

Spring Web Flow 中的字段验证

我正在尝试在 Spring Web Flow 的控制器中验证我的字段。我的代码中有以下代码，如果我有错误，它会很好，但如果我没有错误，我会返回什么？我这样做是对的吗？

我的控制器中的代码：

```
public Event validateVisit(Visit visit, MessageContext messageContext)
{
        String temp = visit.getType_of_visit() + "";
        if(temp.equals(""))
        {   
            MessageBuilder errorMessageBuilder = new MessageBuilder().error();
            errorMessageBuilder.source("type_of_visit");
            errorMessageBuilder.code("type_of_visit_missing");      
            messageContext.addMessage(errorMessageBuilder.build());
            return new EventFactorySupport().error(this);
        }
} 
```

这是我的 flow.xml

```
<view-state id="SchoolVisitReport" view="SchoolVisitReport.jsp" model="visit">
            <transition on="submit" to="addVisit">
                <evaluate expression="flowActions.validateVisit(visit, messageContext)"/>
            </transition>
            <transition on="cancel" to="endState"/>
    </view-state>

<decision-state id="addVisit">
       <if test="flowActions.addVisit(visit)" then="endState" else="errorState" />
 </decision-state> 
```

如果我这样做是正确的，请告诉我。如果没有错误，我将无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:55:50.383

我相信您使用 return new EventFactorySupport().success(this); 表示没有发生错误。

# javascript - d3.js - 时间尺度上均匀分布的条形图

> ID：12186366
> 
> 赞同：22
> 
> 时间：2012-08-29T20:55:34.150
> 
> 标签：javascript, charts, axis, d3.js

我正在 d3.js 中构建一个条形图，其中每个条形代表一个月内的总 TB 病例。数据本质上由一个日期（最初是 %Y-%m 格式的字符串，但使用 d3.time.format.parse 解析）和一个整数组成。我希望轴标签相对灵活（仅显示年份边界、每个月标签等），但我也希望条形间隔均匀。

当我使用日期刻度时，我可以获得灵活的轴标签：

```
var xScaleDate = d3.time.scale()
    .domain(d3.extent(thisstat, function(d) { return d.date; }))
    .range([0, width - margin.left - margin.right]); 
```

...但由于每个月的天数不同（例如，2 月和 3 月明显比其他月份更靠近），条形图的间距并不均匀。我可以使用线性比例得到均匀间隔的条：

```
var xScaleLinear = d3.scale.linear()
      .domain([0, thisstat.length])
      .range([0, width - margin.left - margin.right]); 
```

...但我不知道如何拥有基于日期的轴标签。我尝试过同时使用两个刻度，并且只从 生成一个轴`xScaleDate`，只是为了看看会发生什么，但是刻度自然不会完全对齐。

有没有一种直接的方法可以实现我所缺少的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-02T07:29:55.613

您可以结合序数和时间尺度：

```
// Use this to draw x axis
var xScaleDate = d3.time.scale()
    .domain(d3.extent(thisstat, function(d) { return d.date; }))
    .range([0, width - margin.left - margin.right]);

// Add an ordinal scale
var ordinalXScale = d3.scale.ordinal()
    .domain(d3.map(thisstat, function(d) { return d.date; }))
    .rangeBands([0, width], 0.4, 0);

// Now you can use both of them to space columns evenly:
columnGroup.enter()
    .append("rect")
    .attr("class", "column")
    .attr("width", ordinalXScale.rangeBand())
    .attr("height", function (d) {
        return height - yScale(d.value);
    })
    .attr("x", function (d) {
        return xScaleDate(d.date);
    })
    .attr("y", function (d){
        return yScale(d.value);
    }); 
```

我刚才创建了一个示例来演示这种方法：[http ://codepen.io/coquin/pen/BNpQoO](http://codepen.io/coquin/pen/BNpQoO)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:04:31.697

我遇到了同样的问题，我最终接受了有些月份比其他月份长，并调整了栏的宽度，以使栏之间的间隙保持不变。因此，在 crossfilter 主页演示（http://square.github.com/crossfilter/ - 使用 d3）中调整 barPath 函数，我得到了这样的结果：

```
var colWidth = Math.floor(x.range()[1] / groups.length) - 1;//9;
if (i < n - 1) {
     //If there will be column on the right, end this column one pixel to the left
      var nextX = x(groups[i+1].key)
      colWidth = nextX - x(d.key) - 1;
}
path.push("M", x(d.key), ",", height, "V", yVal, "h",colWidth,"V", height); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-30T20:17:32.353

尝试`d3.scale.ordinal`：

```
 var y = d3.scale.ordinal()
     .domain(yourDomain)
     .rangeRoundBands([0, chartHeight], 0.2); 
```

Tweek **0.2**参数。

# jquery - 将 jQuery 分数变量传递给 Facebook 共享代码

> ID：12186370
> 
> 赞同：0
> 
> 时间：2012-08-29T20:55:44.503
> 
> 标签：jquery, share

我有一个 jquery 测验，它返回一个 10 的值。

我想做的是在用户参加测验后“分享到 facebook”和“tweet 你的分数”按钮。

这是我用于链接的代码：

```
<a class="facebook" href="http://www.facebook.com/dialog/feed?app_id=xxxxxxxxxxxxxxxxx&redirect_uri=<?=urlencode("https://www.facebook.com/=app_xxxxxxxxxxxxxxxxx");?>&display=page&link=<?=urlencode("https://www.facebook.com/=app_xxxxxxxxxxxxxxxxx");?>&picture=<?=urlencode("");?>&caption=&description=<?=urlencode("I just took the Quiz and scored xx/10\. Want to take the quiz? Click here.");?>&name=<?=urlencode("");?>" title="Share on Facebook" target="_blank">Share on Facebook</a>

  <a href="http://twitter.com?status=<?=urlencode("I just took the Quiz and scored xx/10\. Want to take the quiz? Click here.");?>" title="Tweet" target="_blank" class="twitter">Share on Twitter</a> 
```

所以我希望描述中的 xx/10 显示用户得分，它存储在一个 jQuery 变量中。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:03:41.413

好吧，jQuery 变量只是一个 Javascript 变量。由于看起来 PHP 正在输出该文本，这意味着您必须在提交分数时将 Javascript 变量的值传递给您的 PHP 脚本。

您要么必须使用 Javascript 捕获表单提交，要么使用 Javascript 提交表单。

或者，您可以创建一个基于会话的测验，并在 PHP 中计算结果。

# java - 在动态 x,y 中播放 .gif 动画 - Android

> ID：12186374
> 
> 赞同：0
> 
> 时间：2012-08-29T20:55:50.400
> 
> 标签：java, android, animation, gif

我正在尝试在某些 x,y 坐标上播放 gif 动画。我尝试使用 Movie 类，但遗憾的是大多数 gif 动画播放有线且不够流畅。在 Movie 类中，我可以简单地设置我希望电影所在位置的 x,y 坐标，现在我想使用 GifDecoder 类，但不知道如何在动态 x,y 坐标中播放它，它一直在变化，也让它看起来很光滑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:48:37.150

如果您想使用[GifDecoder](http://www.gif4j.com/java-api-pro/com/gif4j/GifDecoder.html)，那么[这里](http://www.basic4ppc.com/android/help/gifdecoder.html)有一些我认为可能对您有所帮助的资源。

可以在[此处](http://droid-blog.net/2011/10/15/tutorial-how-to-play-animated-gifs-in-android-%E2%80%93-part-2/)找到教程。

# c# - 块 IEnumerable/ICollection 类 C# 2.0

> ID：12186376
> 
> 赞同：2
> 
> 时间：2012-08-29T20:56:03.927
> 
> 标签：c#, collections, c#-2.0

我正在处理尝试在 C# 2.0 中实现 IEnumerable（和 ICollection）的自定义集合类中的项目块。例如，假设我一次只想要 1000 件物品，而我的收藏中有 3005 件物品。我有一个可行的解决方案，我在下面演示，但它看起来很原始，我认为必须有更好的方法来做到这一点。

这是我所拥有的（例如，我使用 C# 3.0 的 Enumerable 和 var，只需将这些引用替换为您心中的自定义类）：

```
var items = Enumerable.Range(0, 3005).ToList();
int count = items.Count();
int currentCount = 0, limit = 0, iteration = 1;

List<int> temp = new List<int>();

while (currentCount < count)
{
    limit = count - currentCount;

    if (limit > 1000)
    {
        limit = 1000 * iteration;
    }
    else
    {
        limit += 1000 * (iteration - 1);
    }
    for (int i = currentCount; i < limit; i++)
    {
        temp.Add(items[i]);
    }

    //do something with temp

    currentCount += temp.Count;
    iteration++;
    temp.Clear();
} 
```

任何人都可以在 C# 2.0 中提出一种更优雅的方法吗？我知道这个项目是否来自过去 5 年，我可以使用 Linq（如[这里](https://stackoverflow.com/questions/1349491/how-can-i-split-an-ienumerablestring-into-groups-of-ienumerablestring)和[这里](https://stackoverflow.com/questions/6849315/how-do-i-segment-the-elements-iterated-over-in-a-foreach-loop)所示）。我知道我的方法会起作用，但我不想让我的名字与如此丑陋的（在我看来）代码相关联。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T21:12:12.670

首先 。`yield`是你的朋友，它是在 2.0 中引入的。考虑：

```
public static IEnumerable<List<T>> Chunk<T>(IEnumerable<T> source, int chunkSize)
{
  List<T> list = new List<T>(chunkSize);
  foreach(T item in source)
  {
    list.Add(item);
    if(list.Count == chunkSize)
    {
      yield return list;
      list = new List<T>(chunkSize);
    }
  }
  //don't forget the last one!
  if(list.Count != 0)
    yield return list;
} 
```

然后我们在类型和大小上是灵活的，所以它可以很好地重复使用。唯一限制为 2.0 意味着我们不能将其作为扩展方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:07:28.230

有几种方法可以解决这个问题。

如果您只想将每个项目与其所属的块的索引相关联：

```
int processed = 0;
foreach (int item in items)
{
    int chunkIndex = processed++ / CHUNK_SIZE;
    ProcessItem(item, chunkIndex);
} 
```

如果您想批量处理项目，但不需要一次收集整个块：

```
int processed = 0, count = items.Count;
List<int> chunk = new List<int>(CHUNK_SIZE);
foreach (int item in items)
{
    chunk.Add(item);
    if (++processed % CHUNK_SIZE == 0 || processed == count) {
        ProcessChunk(chunk);
        chunk.Clear();
    }
} 
```

如果要将所有块作为列表列表：

```
int processed = 0, count = items.Count;
List<List<int>> chunks = new List<List<int>>();
foreach (int item in items)
{
    int chunkIndex = processed++ / CHUNK_SIZE;
    if (chunks.Count == chunkIndex) {
        chunks.Add(new List<int>(CHUNK_SIZE));
    }

    chunks[chunkIndex].Add(item);
} 
```

# simperium - 使用 Simperium 的 CoreData 模式演变

> ID：12186379
> 
> 赞同：1
> 
> 时间：2012-08-29T20:56:13.340
> 
> 标签：simperium

Simperium 如何使用 CoreData 处理模式演变？根据文档，目前似乎不支持模式演变，那么应用程序中有处理它的技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:00:28.427

任何可由 Core Data 的轻量级迁移处理的模式更改也可由 Simperium 处理。目前，只要您正确处理用户设备上的本地迁移，其他更改（例如重命名或删除属性）就可以与 Simperium 一起使用。

这是因为 Simperium 的模式默认是动态的。尚未公开的是一种锁定特定版本的模式并将其映射到应用程序模型的相应版本的方法。我们正在内部对此进行测试；如果您需要，请与我们联系。

# php - 在 SQL 中连接 3 个表

> ID：12186380
> 
> 赞同：0
> 
> 时间：2012-08-29T20:56:15.033
> 
> 标签：php, sql

我有 3 张桌子

`_virtuemart_product_medias`包含

```
'Full texts'    'id'    'virtuemart_product_id'     'virtuemart_media_id'   'ordering' 
```

`_virtuemart_products_pl_pl`包含

```
 'virtuemart_product_id'    'product_s_desc'    'product_desc'  'product_name'
 'metadesc'     'metakey'   'customtitle'   'slug' 
```

`_virtuemart_medias`包含

```
'virtuemart_media_id'   'virtuemart_vendor_id'  'file_title'
'file_description'  'file_meta'     'file_mimetype'     'file_type'
'file_url' 
```

怎么获得`_virtuemart_products_pl_pl (*), _virtuemart_products_pl_pl (*)`

在哪里

```
_virtuemart_products_pl_pl.virtuemart_product_id = _virtuemart_product_medias.virtuemart_product_id
AND
_virtuemart_product_medias.virtuemart_media_id = _virtuemart_medias.virtuemart_media_id 
```

我需要sql查询，但我不知道如何构建它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:32:30.483

你可以使用 PHP/SQL 的 innerjoin 函数来连接不同的表吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:05:24.737

```
SELECT vpp.* 
    FROM _virtuemart_product_medias vpm
        JOIN _virtuemart_products_pl_pl vpp ON vpm.virtuemart_product_id = vpp.virtuemart_product_id
        JOIN _virtuemart_medias vm ON vpm.virtuemart_media_id = vm.virtuemart_media_id 
```

您声明要在结果中包含两个 _virtuemart_products_pl_pl 表。如果您需要其他表，只需在 vpp.* 之后添加 ,vm.* 或 ,vpm.* （请记住用逗号分隔每个不同的表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:59:07.223

```
select t1.*, t2.*
from t1, t2, t3
where t1.id=t2.id
and t2.id=t3.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T11:38:30.577

像这样试试

```
select table1.name,table3.name from table1,table2,table3 
where table1.uid = table2.person_id and table3.user_id = table1.uid 
```

你会从这个朋友那里得到。如果它对你有用，请接受答案

# unit-testing - 用于单元测试的应用引擎capability_stub 是否允许禁用服务？

> ID：12186381
> 
> 赞同：1
> 
> 时间：2012-08-29T20:56:16.207
> 
> 标签：unit-testing, google-app-engine, capability, testbed

当我在应用引擎的测试平台框架中查看capability_stub.py 的源代码时，我看到一条评论指出每个服务都始终处于启用状态。现在，除了编写我自己的存根之外，有没有办法通过禁用某些服务来模拟某些中断？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:01:57.160

```
testbed = testbed.Testbed()
testbed.activate()
testbed.init_capability_stub()
stub = testbed.get_stub('capability_service')
stub.SetPackageEnabled('memcache', False)
from google.appengine.api import capabilities
assert(capabilities.CapabilitySet('memcache').is_enabled() == False) 
```

# java - 将 URL 中的分号作为参数传递

> ID：12186382
> 
> 赞同：0
> 
> 时间：2012-08-29T20:56:21.580
> 
> 标签：java, url, jsonp

我有如下 HTML 字符串

```
<span style="font-weight:bold; color:red;"> Hello </span> 
```

我想将它作为 JSONP 请求传递，以便服务器可以轻松解析它。喜欢

```
../save/question?id=5&code="<span style="font-weight:bold; color:red;"> Hello </span>"&callback=123213 
```

但由于字符串中的分号，服务器无法正确解析。任何解决方案，所以当我从服务器检索数据时，我得到了带有样式的完整 HTML 字符串。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:00:01.013

分号和冒号都是 URL 中的保留字符，因此必须转义。

构造您的查询字符串，然后通过 javascript[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)将其添加到您的请求中。

# ember.js - `insertNewline` 可以调用 transitionTo 吗？

> ID：12186383
> 
> 赞同：1
> 
> 时间：2012-08-29T20:56:33.590
> 
> 标签：ember.js, ember-data, ember-old-router

我的问题的示例代码在[这里](http://jsfiddle.net/bazzel/e7VLr/5/)。这是一个简单的 Ember 应用程序，默认显示包含 TextField 的 SearchView。

当用户输入一些文本并按 Enter 键时，我想通过在文本框中输入的值转换到另一个状态（displayUserProfile）。

起初，在 Textbox 的**insertNewline**回调中，我调用了应用程序路由器的**transitionTo**方法，将值作为参数对象的一部分传递：

```
App.SearchTextFieldView = Em.TextField.extend({
  insertNewline: function() {
    App.router.transitionTo('displayUserProfile', {
      username: this.get('value')
    });
  }
}); 
```

这很好用，但后来我注意到 pangratz 对[有关无限滚动的问题](https://stackoverflow.com/questions/11907093/infinite-scroll-with-ember-js)的回答使用了[不同的方法](https://github.com/pangratz/dashboard/commit/68d1728ec26dae5062eae5be43d61083cfc34f14)。相反，他调用视图控制器上的一个方法，该控制器又调用控制器目标（即路由器）上的一个方法。

这将我的代码更改为：

```
App.SearchTextFieldView = Em.TextField.extend({
  insertNewline: function() {
    Em.tryInvoke(this.get('controller'), 'displayUserProfile', this.get('value').w());
  }
});

App.SearchController = Em.Object.extend({
  displayUserProfile: function(username) {
    this.get('target').transitionTo('displayUserProfile', {
      username: username
    });
  }
}); 
```

我的问题是：哪种方法更好？直接从视图调用**transitionTo**或将其委托给视图的控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T02:21:45.877

我会推荐一种不同的方法。`insertNewLine`应该触发一个由路由器处理的动作，然后路由器将转换其状态。

```
App.SearchTextFieldView = Em.TextField.extend({
  insertNewline: function() {
    this.get('controller.target').send('showUser', {username: this.get('value')});
  }
});

App.Router = Ember.Router.extend({
  ...
  foo: Ember.Router.extend({
    showUser: function(router, evt) {
      router.transitionTo('displayUserProfile', evt);
    });
  }
}); 
```

您应该将 showUser 处理程序放在应用程序中有效的最顶层路由。

这种方法遵循 Ember 应用程序中事件的一般模式，视图处理 DOM 级事件，并在适当的情况下将它们转换为由路由器处理的语义动作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:11:25.457

我个人认为第二种方法更好。首先，静态访问路由器是个坏主意。然后对我来说，您必须保持视图无逻辑，因此委托给控制器似乎是一个不错的选择。
在您的情况下，这只是对路由器的调用，但您可以想象在文本字段值上处理一些算法。如果您在视图中执行此处理，这将导致视图、混合 UI 代码和逻辑代码。View 应该只处理 UI 代码。

# external - Hive - 无法在 Hbase 存储的外部表中创建分区

> ID：12186384
> 
> 赞同：0
> 
> 时间：2012-08-29T20:56:36.197
> 
> 标签：external, hbase, hive

HBase 表规范

```
DESCRIPTION ENABLED {NAME => 'hbase_2_hive_names', FAMILIES => [{NAME => 'age',
DATA_BLOCK_ENCODING => 'NONE', BLOOMFILTER => 'NONE', REPLICATION_SCOPE => '0', VERSIONS => 
'3', COMPRESSION =>  true 'NONE', MIN_VERSIONS => '0', TTL => '2147483647', KEEP_DELETED_CELLS 
=> 'false', BLOCKSIZE => '65536', IN_MEMORY => 'false', ENCODE_ON_DISK => 'true', BLOCKCACHE 
=> 'true'}, {NAME => 'id', DATA_BLOCK_ENCODING => 'NONE', BLOOMFILTER => 'NONE', 
REPLICATION_SCOPE => '0', VERSIONS => '3', COMPRESSION => 'NONE', MIN_VERSIONS => '0', TTL => 
'2147483647', KEEP_DELETED_CELLS => 'false', BLOCKSIZE => '65536', IN_MEMORY => 'false', 
ENCODE_ON_DISK => 'true', BLOCKCACHE => 'true'}, {NAME => 'name', DATA_BLOCK_ENCODING 
=>'NONE', BLOOMFILTER => 'NONE', REPLICATION_SCOPE => '0', VERSIONS => '3', COMPRESSION => 
'NONE', MIN_VERSIONS => '0', TTL => '2147483647', KEEP_DELETED_CELLS => 'false', BLOCKSIZE => 
'65536', IN_MEMORY => 'false', ENCODE_ON_DISK => 'true', BLOCKCACHE => 'true'}]} 
```

在 Hive 中创建外部表：

```
CREATE EXTERNAL TABLE hbase_hive_names(hbid INT, id INT,  fn STRING, ln STRING)
PARTITIONED BY (age INT) STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'
WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,id:id,name:fn,name:ln,age:age")
TBLPROPERTIES("hbase.table.name" = "hbase_2_hive_names"); 
```

得到以下错误

```
 Error in metadata: java.lang.RuntimeException:
   MetaException(message:org.apache.hadoop.hive.serde2.SerDeException      
   org.apache.hadoop.hive.hbase.HBaseSerDe: columns has 4 elements while hbase.columns.mapping has 5 elements (counting the key if implicit) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T15:03:06.247

HIVE 列列表（hbid INT、id INT、fn STRING、ln STRING）= 4 列您尝试映射到 5 个限定符“hbase.columns.mapping”=“:key, id:id, name:fn, name:ln , 年龄: 年龄"

留心 ;）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-19T09:57:23.977

`Hbase`有行，所以你应该在喜欢这个`key string`时添加`create external table`

```
CREATE EXTERNAL TABLE
   hbase_hive_names(key STRING,hbid INT, id INT, fn STRING, ln STRING)
PARTITIONED BY (age INT) 
STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler' 
WITH SERDEPROPERTIES
   ("hbase.columns.mapping" = ":key,id:id,name:fn,name:ln,age:age")
TBLPROPERTIES("hbase.table.name" = "hbase_2_hive_names"); 
```

# python - 如果在 Python 中超出范围，则在列表/数组索引处获取值或“无”

> ID：12186388
> 
> 赞同：60
> 
> 时间：2012-08-29T20:56:50.423
> 
> 标签：python

是否有干净的方法来获取列表索引处的值，或者`None`索引在 Python 中是否超出或范围？

显而易见的方法是：

```
if len(the_list) > i:
    return the_list[i]
else:
    return None 
```

但是，冗长会降低代码的可读性。有没有一种干净、简单、单线可以代替的方法？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-29T20:59:16.560

尝试：

```
try:
    return the_list[i]
except IndexError:
    return None 
```

或者，一个班轮：

```
l[i] if i < len(l) else None 
```

例子：

```
>>> l=list(range(5))
>>> i=6
>>> print(l[i] if i < len(l) else None)
None
>>> i=2
>>> print(l[i] if i < len(l) else None)
2 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-01-22T06:18:21.040

我发现列表切片对此很有用：

```
>>> x = [1, 2, 3]
>>> a = x [1:2]
>>> a
[2]
>>> b = x [4:5]
>>> b
[] 
```

所以，如果你想要 x[i]，总是访问 x[i:i+1]。如果存在，您将获得一个包含所需元素的列表。否则，您会得到一个空列表。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-11T11:43:31.783

如果您正在处理小列表，则不需要添加 if 语句或类似的东西。一个简单的解决方案是将列表转换为字典。然后你可以使用`dict.get`：

```
table = dict(enumerate(the_list))
return table.get(i) 
```

您甚至可以设置另一个默认值`None`，而不是使用 的第二个参数`dict.get`。例如，用于在索引超出范围`table.get(i, 'unknown')`时返回。`'unknown'`

请注意，此方法不适用于负索引。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-29T21:07:04.077

出于您的目的，如果不满足给定条件，您可以按默认返回的方式排除该`else`部分。`None`

```
def return_ele(x, i):
    if len(x) > i: return x[i] 
```

结果

```
>>> x = [2,3,4]
>>> b = return_ele(x, 2)
>>> b
4
>>> b = return_ele(x, 5)
>>> b
>>> type(b)
<type 'NoneType'> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-29T21:00:30.770

```
return the_list[i] if len(the_list) > i else None 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-01-10T10:21:16.423

结合切片和迭代

```
next(iter(the_list[i:i+1]), None) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-24T08:44:10.837

**1\. 如果……否则……**

```
l = [1, 2, 3, 4, 5]
for i, current in enumerate(l):
    following = l[i + 1] if i + 1 < len(l) else None
    print(current, following)
# 1 2
# 2 3
# 3 4
# 4 5
# 5 None 
```

**2\. 试试……除了……**

```
l = [1, 2, 3, 4, 5]
for i, current in enumerate(l):
    try:
        following = l[i + 1]
    except IndexError:
        following = None
    print(current, following)
# 1 2
# 2 3
# 3 4
# 4 5
# 5 None 
```

**3\. 听写**

适合小清单

```
l = [1, 2, 3, 4, 5]
dl = dict(enumerate(l))
for i, current in enumerate(l):
    following = dl.get(i + 1)
    print(current, following)
# 1 2
# 2 3
# 3 4
# 4 5
# 5 None 
```

**4.列表切片**

```
l = [1, 2, 3, 4, 5]
for i, current in enumerate(l):
    following = next(iter(l[i + 1:i + 2]), None)
    print(current, following)
# 1 2
# 2 3
# 3 4
# 4 5
# 5 None 
```

**5\. itertools.zip_longest**

```
from itertools import zip_longest

l = [1, 2, 3, 4, 5]
for i, (current, following) in enumerate(zip_longest(l, l[1:])):
    print(current, following)
# 1 2
# 2 3
# 3 4
# 4 5
# 5 None 
```

使用 Jupyter 的魔法命令`%%timeit`

在里面

```
from itertools import zip_longest

l = list(range(10000000)) 
```

结果

| 方法 | 消耗 |
| --- | --- |
| 如果别的... | 2.62 秒 |
| 试试……除了…… | 1.14 秒 |
| 听写 | 2.61 秒 |
| 列表切片 | 3.75 秒 |
| itertools.zip_longest | 1.14 秒 |

# c# - 正则表达式仅在左侧贪婪（.net）

> ID：12186389
> 
> 赞同：1
> 
> 时间：2012-08-29T20:56:52.193
> 
> 标签：c#, .net, regex, regex-greedy, non-greedy

我正在尝试捕获两个字符串之间的匹配。

例如，我正在寻找出现在 Q 和 XYZ 之间的所有文本，使用“最快”匹配（不继续向外扩展）。这个字符串：

> 马戏团 Q 你好**Q SOMETEXT XYZ**今天是一天 XYZ 好的 XYZ

应该返回：

> Q 某些文本 XYZ

但相反，它返回：

> Q 你好 Q SOMETEXT XYZ

这是我正在使用的表达式： **Q.*?XYZ**

它向左走得太远了。当我在星号后使用问号时，它在骑行方面工作正常。我怎样才能对左侧做同样的事情，并在我击中第一个左 Q 后停止，使其与右侧的工作方式相同？[我已经尝试过http://msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)中的问号和其他符号，但有些东西我只是想不通。

我是一个正则表达式新手，所以对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:09:03.380

好吧，非贪婪匹配正在工作 - 它获得满足正则表达式的最短字符串。您必须记住的是，*正则表达式是一个从左到右的过程*。所以它匹配第一个 Q，然后得到最短的字符数，然后是 XYZ。如果您希望它不超过任何 Q，则必须使用否定字符类：

```
Q[^Q]*?XYZ 
```

[^Q] 匹配任何不是 Q 的字符。请注意，这仅适用于单个字符。如果您的开头分隔符是多个字符，则必须以不同的方式进行。为什么？好吧，取分隔符“PQR”，字符串是

```
foo PQR bar XYZ 
```

如果您尝试使用之前的正则表达式，但您将字符类扩展为：

```
PQR[^PQR]*?XYZ 
```

那么你会得到

```
'PQR bar XYZ' 
```

如你所料。但是如果你的字符串是

```
foo PQR Party Time! XYZ 
```

你不会得到任何匹配。这是因为 [] 描述了一个“字符类”——它只匹配一个字符。使用这些类，您可以匹配一系列字符，只需列出它们。

```
th[ae]n 
```

将匹配“than”和“then”，但不匹配“thin”。在开头放置一个克拉 ('^') 会否定类 - 意思是“匹配除这些字符之外的任何内容” - 所以通过将我们的单字符分隔符转换为 [^PQR]，而不是说“不是 'PQR'”，你'重新说“不是'P'，'Q'或'R'”。如果你愿意，你仍然可以使用它，但前提是你 100% 确定你的分隔符中的字符只会在你的分隔符中。如果是这种情况，使用贪婪匹配会更快，并且只否定定界符的第一个字符。正则表达式将是：

```
PQR[^P]*XYZ 
```

但是，如果你不能保证，那么匹配：

```
PQR(?:.(?!PQR))*?XYZ 
```

正则表达式不直接支持负字符串匹配（因为当您考虑它时无法定义），因此您必须使用*负前瞻*。

```
(?!PQR) 
```

就是这样一个前瞻。它的意思是“断言接下来的几个字符不是这个内部正则表达式”，不匹配任何字符，所以

```
.(?!PQR) 
```

匹配任何没有后跟 PQR 的字符。把它打包成一个组，这样你就可以懒洋洋地重复它，

```
(.(?!PQR))*? 
```

并且您匹配“不包含我的分隔符的字符串”。我唯一做的就是添加一个 ?: 使其成为非捕获组。

```
(?:.(?!PQR))*? 
```

根据您用于解析正则表达式的语言，它可能会尝试单独传回每个匹配的组（对于查找和替换很有用）。这使它无法这样做。

快乐的正则表达式！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T21:08:23.103

贪婪的概念只适用于右侧。

要使表达式仅匹配 XYZ 之前的最后一个 Q，使其不匹配它们之间的 Q：

```
Q[^Q]*?XYZ 
```

# crystal-reports - 有没有办法修改 Crystal Reports XI 报表 RPT 文件的元数据？

> ID：12186390
> 
> 赞同：1
> 
> 时间：2012-08-29T20:56:58.097
> 
> 标签：crystal-reports, crystal-reports-xi

有没有办法将 Crystal Reports XI 报表 .rpt 文件的元数据修改为文本？
假设我需要修改 Crystal Reports XI .rpt 文件以更改
整个文件中的常见情况。我知道如果更改表名或数据源，Crystal Reports
会处理从旧到新的重新映射过程。我不是在寻找那个。
我在这里寻找的是一种将 .rpt 文件或对象表示
为文本的方法，在文本编辑器中手动修改它，然后将其导入为 .rpt 格式。
一个很好的类比是 Borland Builder 6 表单文件 (.dfm)。我可以将按钮对象复制
为文本并将其粘贴到文本编辑器中。修改一些属性和事件，复制
对象块并将其粘贴回 Borland Builder 6 设计模式窗口。
Borland Builder 6 知道这个文本块是一个 dfm 对象并将其粘贴到
适当的位置，根据您输入的属性显示新的修改按钮
。Crystal Reports 中有这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:45:46.670

不幸的是，我不知道。如果没有第三方软件，甚至没有办法在对象之间进行搜索和替换（参见[这篇文章](https://stackoverflow.com/a/8458644/403572)）。在我看来，这是 CR 的主要缺陷之一。

不过，没有什么能阻止某人使用 Crystal Reports API 创建您描述的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T23:07:28.453

使用 XI，您可以使用 SDK 做很多事情，但需要在 Crystal Reports 之外完成。例如，[RptToXml](http://code.google.com/p/rpttoxml/)。

使用 2008，您可以创建一个[加载项](http://scn.sap.com/docs/DOC-6934)。它将向 Crystal Reports 添加一个名为“加载项”的新顶级菜单。一些快速研究表明，您将只能对活动报告采取行动，通过参数传递给您的代码（在您的代码对其进行操作之前它会复制该参数）。遗憾的是，API 并没有让您访问 Crystal Reports 本身，这将非常强大（想想宏）。我怀疑 SAP 的 OEM 合作伙伴可以使用更强大的插件 SDK。

如果您有 BusinessObjects Enterprise，您可能想要研究 MetaData Manager（4 万美元）。

另一种选择*可能*是[Crystal Reports for Eclipse](http://www.businessobjects.com/campaigns/forms/downloads/crystal/eclipse/datasave.asp)。也许您可以使用 Eclipse 的插件框架或与它结合使用[的第三方脚本语言](https://stackoverflow.com/questions/103202/is-there-a-macro-recorder-for-eclipse)（CR for Eclipse）来做一些满足您需求的事情。

# ruby-on-rails - 如何处理多个开发人员的 database.yml 开发模式配置？

> ID：12186396
> 
> 赞同：0
> 
> 时间：2012-08-29T20:57:20.977
> 
> 标签：ruby-on-rails, database

当一个项目中有多个开发人员时，处理 database.yml 的开发模式数据库配置的标准方法是什么？

所有开发人员都应该有相同的数据库设置吗？这是一个聪明的要求吗？

还是应该进行某种类型的 gitignore 和符号链接？我这样做了，分支后，database.yml 消失了:(

我还提出了一个似乎运行良好的 erb 解决方案，但不确定是否会产生意想不到的后果。以下将允许开发人员在他们的 bash_profile 中设置环境变量，以防他们的本地设置与默认设置不同。这将允许我们的 database.yml 文件留在 git 中。

```
development:
  adapter: postgresql
  database: <%= ENV['DEV_DB_DATABASE'] || 'app_development' %> 
  username: <%= ENV['DEV_DB_USERNAME'] || 'postgres' %>
  password: <%= ENV['DEV_DB_PASSWORD'] || '' %>
  host: localhost
  encoding: UTF8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:11:14.403

将`database.yml.sample`文件添加到 rails 应用程序，同时添加`database.yml`到`.gitignore`. 这样，所有开发人员都可以拥有不同的数据库设置。

# ms-access - 在 Access VBA 中创建频率表

> ID：12186397
> 
> 赞同：1
> 
> 时间：2012-08-29T20:57:23.057
> 
> 标签：ms-access, vba

我有一张桌子，不同的参与者在几天内获得多盒药物。我正在尝试创建一个频率表，显示按盒子数量分配给参与者的药物数量。
![在此处输入图像描述](../Images/c7d44276eb644c1bb7ad6587543f548f.png)

我正在寻找的结果是 -

2盒=1（因为只有Lynda一共得到了2盒），4盒=2（因为Ryan和Rinky加起来药盒一共得到了4盒）

请让我知道在这种情况下哪种方法最好。谢谢你的帮助。
-名字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:08:30.473

我想你想要：

```
SELECT t.SumOf, Count(t.[PARTICIPANT ID]) AS CountOf
FROM (SELECT Table1.[PARTICIPANT ID], Sum(Table1.MEDICINE_BOX) AS SumOf
FROM Table1
GROUP BY Table1.[PARTICIPANT ID])  AS t
GROUP BY t.SumOf; 
```

其中 table1 是您的表的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:25:52.363

如果你的表是这样的：

```
medicine_dispense
participantID   date    amount_boxes
ABC             8/29/12  1
ABC             8/30/12  2
XYZ             8/29/12  1
XYZ             8/30/12  1 
```

然后是这样的查询：

```
select
amount_boxes, count(participantID)
from
medicine_dispense 
```

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:45:51.370

我将使用通用 SQL。您可以将 SQL 粘贴到 SQL 视图中的 Access 查询中。（您可能必须删除 CHECK() 约束。）

```
create table participant_meds (
  participant varchar(10) not null,
  distribution_date date not null default current_date,
  num_boxes integer not null check (num_boxes > 0),
  primary key (participant, distribution_date)
);

insert into participant_meds values ('Ryan', '2012-02-03', 1);
insert into participant_meds values ('Ryan', '2012-06-07', 3);
insert into participant_meds values ('Rinky', '2012-02-28', 4);
insert into participant_meds values ('Lynda', '2012-03-04', 2);
insert into participant_meds values ('Russ', '2012-04-05', 2);
insert into participant_meds values ('Russ', '2012-05-08', 2);
insert into participant_meds values ('Russ', '2012-06-12', 2); 
```

结果数据，排序，用于复制/粘贴。

```
participant distribution_date   num_boxes
Lynda   2012-03-04  2
Rinky   2012-02-28  4
Russ     2012-04-05 2
Russ     2012-05-08 2
Russ     2012-06-12 2
Ryan     2012-02-03 1
Ryan     2012-06-07 3 
```

此查询为您提供每个参与者的总箱子数。

```
select sum(num_boxes) boxes, participant
from participant_meds
group by participant;

6;"Russ"
2;"Lynda"
4;"Ryan"
4;"Rinky" 
```

在 FROM 子句中使用该查询，就像它是一个表一样。（我会考虑将该查询存储为视图，因为我怀疑每个参与者的框总数可能有用。此外，Access 历来擅长优化使用视图的查询。）

```
select boxes num_boxes, count(participant) num_participants
from (select sum(num_boxes) boxes, participant
      from participant_meds
      group by participant) total_boxes
group by num_boxes
order by num_boxes;

num_boxes  num_participants
--
2          1
4          2
6          1 
```

# database - 凭证数据库

> ID：12186398
> 
> 赞同：0
> 
> 时间：2012-08-29T20:57:25.303
> 
> 标签：database, cursor, android-sqlite

如何创建一个只有一行来存储用户名和密码值的 sqlite 数据库。任何时候尝试添加其他数据，应用程序都不允许。

```
 public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub      

    String sqlDataStore = "create table if not exists " +
    DATABASE_NAME + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

                + COLUMN_USER + " text not null,"
                + COLUMN_CODE + " text not null);";

    db.execSQL(sqlDataStore);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:45:03.793

```
String sqlDataStore = "create table if not exists " +
TABLE_NAME + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

            + COLUMN_USER + " text not null,"
            + COLUMN_CODE + " text not null);"; 
```

`TABLE_NAME`不是`DATABASE_NAME`。_

如果您想要更好的答案，请提交您编写的代码以添加新数据。

# eclipse - 为什么我在启动我的 tomcat 服务器时收到 ClassNotFoundException？

> ID：12186400
> 
> 赞同：0
> 
> 时间：2012-08-29T20:57:34.547
> 
> 标签：eclipse, tomcat

我在 tomcat 服务器上有一个 sourceWeb 项目，在 web 库中我也看到了一个 commons-dbcp.jar 文件！那为什么这么说

```
WARNING: Failed to register in JMX: javax.naming.NamingException: Could not load resource factory class [Root exception is java.lang.ClassNotFoundException: org.apache.commons.dbcp.BasicDataSourceFactory]
    Aug 29, 2012 2:33:26 PM org.apache.catalina.core.StandardContext resourcesStart
    SEVERE: Error starting static Resources
    java.lang.IllegalArgumentException: Document base C:\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\sourceInputWeb does not exist or is not a readable directory
        at org.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.java:142) 
```

编辑::: 我看到 tomcat 也有一个 dbcp jar，它的版本是 1.5，我项目的 web 库中的版本是 1.1 .. 但是我已经提到它像这样加载。没有包含所有参数，但如果你看类名是完全限定的，那么这个版本不匹配应该不正确吗？

```
<Resource name="jdbc/CodesDataSource" type="javax.sql.DataSource"
        factory="org.apache.commons.dbcp.BasicDataSourceFactory"
        driverClassName="oracle.jdbc.OracleDriver" auth="Container"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:09:09.840

您需要显式添加`commons-dbcp-1.1.jar`和`commons-pool-1.1.jar`到您的类路径。

检查这个：[http ://commons.apache.org/dbcp/](http://commons.apache.org/dbcp/)

# ruby-on-rails - 使用 Rails 应用程序格式化表单

> ID：12186406
> 
> 赞同：0
> 
> 时间：2012-08-29T20:57:55.837
> 
> 标签：ruby-on-rails

如何在 Rails 应用程序上格式化表单？我有我的 application.css 文件，没有给表单操作页面内的表单标签提供或 id 的类。但是表单以某种方式继承了格式，但这不是我想要的。

另外，我怎样才能让我的 rails 应用程序中的每个页面都有自己的页面和 css 文件？我不想制作一个母版页并将页面代码嵌入正文标签中

就像我想让每个页面都有自己的 application.html.erb 以及如何让 rails 知道这一点而不加载默认页面？

我是一个 php 人，所以使用样式和模板让我很困惑。当我想使用 css 格式化表单时。我知道怎么做，我也写了如下代码：

```
<form id="FirstForm"> 
```

在我遵循的 Rails 应用程序教程中，表单标签和字段内根本没有 id 标记或格式。不知道这是怎么格式化的？是否允许在 rails 表单标签内写入 id 和类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:06:06.537

你可以通过`id`，`class`如你所愿。

例子：

```
<%= form_for @article, :url => { :action => "create" }, :html => {:id => "FirstForm", :class => "your_class"} do |f| %> 
```

检查[完整的文档](http://guides.rubyonrails.org/form_helpers.html)。

# php - Preg_replace 问题 bbcode

> ID：12186407
> 
> 赞同：0
> 
> 时间：2012-08-29T20:58:00.750
> 
> 标签：php, preg-replace, bbcode

我的 preg_replace 函数有问题，我正在尝试将一些 bbcode 转换为 HTML，但它不起作用。我要开始工作的是`[size=200:37pfziz0][TEXT][/size:37pfziz0]` （不知道为什么这些数字会出现在那里，但需要考虑它们。所以我正在尝试做`[size=(1):(2)](3)[/size:(4)]`

我用eregi和preg都试过了，但似乎都不起作用：

```
$txt = eregi_replace("\\[size=([^\\[]+):([^\\[]+)\\]([^\\[]*)\\[/size:([^\\[]+)\\]", "<font size=\"\\1\%\">\\3</font>", $txt);
$txt = preg_replace("#\[size\=(.*?):(.*?)\](.*?)\[/size:(.*?)\]#is", "<font size=\"\\1\%\">\\3</font>", $txt); 
```

谁能告诉我我做错了什么？我花了大约一个小时做报价，最终使用这种方法得到了很好的结果：

```
$txt = preg_replace("#\[quote\=(.*?):(.*?)\](.*?)\[/quote:(.*?)\]#is", "<blockquote>Quote by: \\1<br/>\\3</blockquote>", $txt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:21:08.367

好的，考虑到您的示例 bbcode 有点困难，经过一番测试，这就是我想出的：

```
preg_replace( '/\[size=([^\]\:]+)\:([^\]]+)\](.*?)\[\/size\:([^\]]+)\]/is', '<font size="$1%">$3</font>', $text); 
```

关于这一点的小提示：正如您`[text]`在代码之间给出的示例一样，我用来`(.*?)`匹配两者之间的内容。如果您不需要在标签之间支持方括号，您可能需要更改此设置。

正如您可能看到的，我在使用正则表达式时有自己的习惯。首先，我总是将`/`其用作分隔符，因为我认为转义字符会更容易一些。其次，我使用美元符号进行匹配，以保持简单，并且没有太多的斜线。

# android - Android - 如果我在自己的设备上制作新版本的应用程序进行测试，我应该更改 versionCode/versionName 吗？

> ID：12186413
> 
> 赞同：3
> 
> 时间：2012-08-29T20:58:18.690
> 
> 标签：android

我不确定何时需要`versionCode/versionName`在创建新的 .apk 并将其放在我自己的设备上之前更改清单文件中的值。

如果我只是要在自己的手机上进行测试，可以完全不更改它们吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:00:02.713

不，如果您只是在手机上进行测试，则可以保持不变。

实际上，当您在市场上实际发布应用程序时，版本代码和版本名称会派上用场，使用户能够知道他们拥有的版本以及目前市场上可用的版本。

但是，由于目前您只是在自己进行测试，因此您可以保持不变。不会成为任何问题的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:59:50.530

**简短回答：**不，您不需要更改它们

**更多细节：**为了在您自己的手机上进行测试，您无需更改它们就可以了。它不会崩溃任何东西。根据您对模拟器的使用，您可能会非常频繁地在您的设备上进行测试，这将是一个很大的痛苦！对我来说，我在测试期间从不更改它们，而且我几乎只使用手机进行测试（我无法忍受模拟器）。

但是，明智的做法是在您将应用程序发布到 Google Play 商店时更改它们，以便准确地向您的客户展示更新的版本。他们欣赏这样的细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T21:09:18.197

大多数时候，您希望增加版本以跟踪错误以及修复错误的版本。所以主要用于跟踪。

除此之外，版本号不会影响。

唯一可能遇到问题的时候是运行开发人员构建（直接从 Eclipse 安装）并运行独立的 apk。只有在这种情况下，您可能需要卸载以前的应用程序，但即使那样，版本号也不会影响，因为它与签名有关，而不是版本号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T21:01:59.233

如果您正在测试，则无需更改它。

如果您将其投放市场并对其进行更新，

版本代码是一个应该递增的整数，版本名称是将在描述中显示的名称。

# twitter - 在 Windows 8 Metro 应用程序中检索和显示推文

> ID：12186416
> 
> 赞同：-1
> 
> 时间：2012-08-29T20:58:38.260
> 
> 标签：twitter, windows-8, microsoft-metro, blend

所以基本上我正在尝试在我正在尝试制作的新应用程序中显示来自 5-10 个不同来源/推特帐户的最新推文。

与 tweetro/metrotwit 在应用程序中检索和显示推文的方式类似。但规模要小得多。

关于如何做到这一点的任何想法？

将不胜感激。

邓肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:24:34.203

只需使用[Twitter API](https://dev.twitter.com/)发送一个 Web 服务请求，以数据友好的格式（如 XML 或文本）访问这些特定的推文。然后只需将该数据绑定到 ListView 或任何你喜欢的东西。

# php - PHP MySQL搜索标题和多个标签顺序

> ID：12186419
> 
> 赞同：1
> 
> 时间：2012-08-29T20:58:59.227
> 
> 标签：php, mysql, search, full-text-search

我正在寻找改进网站搜索功能的最佳方法。

我有两个 MySQL 表“文章”和“标签”

**->“文章”中的列**

```
aid (auto increment)
headline
..and a few more 
```

**->“标签”中的列（每个标签的新条目）**

```
tid (auto increment)
aid (ID from 'articles')
tag 
```

例如，如果我有一篇标题为*“这是一篇绿色文章”*的文章，并且该文章的标签是*“蓝色”、“黄色”*

假设还有另一篇标题为*“这是另一个测试”*的文章，其标签为*“蓝色”、“黄色”、“粉色”*和*“黑色”*

如果访客现在正在搜索*“green pink black”*，mysql 应该找到文章*“This is a green Article”*以及另一篇文章，因为它的标签是*“pink”*和*“black”*

此外，我需要一个按相关性对文章进行排序的功能。所以在这个例子中，文章“This is another Test”应该首先显示，因为如果标签*“pink”*和*“black”*以及文章*“This is a green Article”*在位置二（标题中只有“green”）

在过去的几个小时里，我尝试了一些查询，比如 match..against 和 joins ，但这对我来说太复杂了。

有人给我提示吗？

（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:06:13.307

您的查询应如下所示：

```
SELECT
    DISTINCT articles.aid
FROM articles
INNER JOIN tags
    ON articles.aid = tags.aid
WHERE tags.tag IN ("green", "pink", "black"); 
```

由于两个表都有一个共同的属性（即文章 ID），因此您可以使用 INNER JOIN 来连接两个表，并根据两个表中的其他属性（在本例中为标签名称）过滤结果。

上面的查询将为您提供带有任何绿色、粉色或黑色标签的文章 ID 列表。

*编辑*

抱歉，我没有看到您对相关性的要求。如果您想找出在每篇文章中找到了多少标签，请将其转换为 GROUPed 查询，并计算找到的标签数量：

```
SELECT
    articles.aid,
    articles.headline,
    COUNT(tags.tid)
FROM articles
INNER JOIN tags
    ON articles.aid = tags.aid
WHERE tags.tag IN ("green", "pink", "black")
GROUP BY articles.aid; 
```

试试这个场景...

首先，设置数据库：

```
mysql> CREATE TABLE articles (aid integer auto_increment, headline varchar(32), key(aid));
Query OK, 0 rows affected (0.13 sec)

mysql> CREATE TABLE tags (tid integer auto_increment, aid integer, tag VARCHAR(16), key(tid));
Query OK, 0 rows affected (0.09 sec)

mysql> INSERT INTO articles (headline) values ("This is a green Article"), ("This is another Test");
Query OK, 2 rows affected (0.05 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM articles;
+-----+-------------------------+
| aid | headline                |
+-----+-------------------------+
|   1 | This is a green Article |
|   2 | This is another Test    |
+-----+-------------------------+
2 rows in set (0.00 sec)

mysql> INSERT INTO tags (aid, tag) VALUES (1, "blue"), (1, "yellow"), (2, "blue"), (2, "yellow"), (2, "pink"), (2, "black");
Query OK, 6 rows affected (0.04 sec)
Records: 6  Duplicates: 0  Warnings: 0 
```

然后运行一些查询：

```
mysql> SELECT articles.aid, articles.headline, COUNT(tags.tid) FROM articles INNER JOIN tags ON articles.aid = tags.aid WHERE tags.tag IN ("green", "pink", "black") GROUP BY articles.aid;
+-----+----------------------+-----------------+
| aid | headline             | COUNT(tags.tid) |
+-----+----------------------+-----------------+
|   2 | This is another Test |               2 |
+-----+----------------------+-----------------+
1 row in set (0.00 sec)

mysql> SELECT articles.aid, articles.headline, COUNT(tags.tid) FROM articles INNER JOIN tags ON articles.aid = tags.aid WHERE tags.tag IN ("green", "pink", "black", "yellow") GROUP BY articles.aid;
+-----+-------------------------+-----------------+
| aid | headline                | COUNT(tags.tid) |
+-----+-------------------------+-----------------+
|   1 | This is a green Article |               1 |
|   2 | This is another Test    |               3 |
+-----+-------------------------+-----------------+
2 rows in set (0.00 sec) 
```

# python - 如何计算日期：使用 DateTimeField 创建后一年？

> ID：12186424
> 
> 赞同：1
> 
> 时间：2012-08-29T20:59:25.880
> 
> 标签：python, django, django-models

我有一个带有`created`DateTimeField 的订阅模型。订阅自创建之日起持续一年。我也有一个`expired`领域。不是 100% 确定我是否想将它作为 DateTimeField() 或布尔值。我跑题了。我想要做的基本上是检查/跟踪订阅何时到期。

如果有人能提供任何见解如何做到这一点，我会非常感激。

```
class Subscription(models.Model):
    user = models.ForeignKey(User)
    subscribed = models.BooleanField(default=False)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)
    expired = models.DateTimeField()

    def expiration(self):
         date = created + datetime.timedelta(365).isoformat()
         return self(expired=date) 
```

错误：“datetime.timedelta”对象没有属性“isoformat”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:12:49.337

请参阅[https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods)：

# 更新

因为你不能在 expired 的设置中使用 self.created。

## 模型.py

```
class Subscription(models.Model):
    user = models.ForeignKey(User)
    subscribed = models.BooleanField(default=False)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)
    expired = models.DateTimeField()

    def save(self, *args, **kwargs):
        self.expired = datetime.datetime.now()+datetime.timedelta(365) # original answer used this line: self.created + datetime.timedelta(365).isoformat()
        super(Subscription, self).save(*args, **kwargs) # Call the "real" save() method. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:15:13.400

您的`date`计算正在调用您正在创建`isoformat`的`timedelta`实例，我怀疑这是您的错误来自哪里。

我认为您只需要一些括号（和`self`）：

```
date = (self.created + datetime.timedelta(365)).isoformat() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:24:04.080

假设你要坚持`expired`做`DateTimeField`模特，那么你真正想做的就是覆盖`clean`

```
def clean(self):
    if self.expired is None:
        self.expired = self.created + timedelta(days=365)
    return super(Subscription, self).clean() 
```

# coldfusion - 任何使用 Mura 的人，我怎样才能安全地添加 globalFunctions.cfc

> ID：12186428
> 
> 赞同：2
> 
> 时间：2012-08-29T20:59:37.510
> 
> 标签：coldfusion, mura

我是 Mura 的新手，并且有很多我正在尝试使用的现有代码。我有一个 globalFunction.cfc 文件，其中包含许多我需要访问现有代码的函数。以前我总是将我的 application.cfc 扩展到全局函数，所以它们总是在那里。对于 Mura，我不确定将它包含在哪里，并且仍然保持安装“升级安全”。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:19:14.537

在您的 [site]/includes 文件夹中有一个 Application.cfc。我相信这是您希望扩展 globalFunction.cfc 的那个。它是更新安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T17:57:30.697

槊，

您可以将要在整个站点中使用的任何功能放在主题文件夹中的 eventHandler 或 contentRenderer 文件中。这些是更新安全的，根据您想要使用它们的方式，您可以将一个用于显示，另一个用于功能。

事件处理程序例如：

```
<!--- PAGE - Default  --->
<cffunction name="onPageDefaultBodyRender" output="true" returntype="any">
    <cfargument name="$">
    <cfif $.getcontentID() neq "00000000000000000000000000000000001">#$.dspInclude('/themes/MYTHEME/display_objects/bodies/dsp_body_default.cfm')#</cfif>
</cffunction> 
```

内容渲染器 例如：

```
<cffunction name="removeLinks" returntype="string" access="public">
    <cfargument name="str" default="" required="true">

    <cfset str=reReplace(str, "<[[:space:]]*[aA].*?>(.*?)<[[:space:]]*/[[:space:]]*a[[:space:]]*>","\1","all") />

    <cfreturn trim(str) />
</cffunction> 
```

这里的 EventHandler 只是在主页上显示一个不同的主体，如果我使用 $.removeLinks(MYURLSTRING)，contentRenderer 会删除任何链接。

高温高压

# mysql - 如何清除 MySQL Query Planner 的统计信息

> ID：12186429
> 
> 赞同：2
> 
> 时间：2012-08-29T20:59:39.813
> 
> 标签：mysql, query-optimization

我有许多复杂的查询，我正在尝试进行基准测试。我们发现，在一个生产机器上，查询计划器没有更新，这可能是我们看到的一些性能不佳的原因（MyISAM 表）。需要明确的是，表上的所有索引都显示为 NULL 基数。

当然，我需要在我的生产机器上执行 ANALYZE TABLE，但我想在执行此操作之前以某种方式在开发环境中对我的查询性能进行基准测试。我的开发环境在表上显示了良好、可用的索引。我想..“UNANALYZE”表，这样我就可以比较我们在生产中的损坏索引的性能与我们应该期望的正确索引的性能。只是删除索引会给我相同的结果，还是有更好的方法来刷新统计信息？

顺便说一句，我认识到 NULL 基数是一个明显的问题并且很容易修复。但是，我想量化这对性能的影响程度。你知道..为了科学！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:20:32.177

你不能，AFAIK，但你可以在 SQL 语句上使用 FORCE_INDEX() 子句来强制使用不充分的索引，然后 MySQL 将回退到表扫描；）

# iphone - CCLabelBMFont（字体大小 600）使视网膜设备（不是模拟器）崩溃

> ID：12186440
> 
> 赞同：1
> 
> 时间：2012-08-29T21:00:20.590
> 
> 标签：iphone, cocos2d-iphone, retina-display

我正在使用 CCLabelBMFont 在我的游戏中显示一个非常大的字母。SD字体大小为300，HD字体大小为600

```
letter =[CCLabelBMFont labelWithString:@"A" fntFile:@"font-test4.fnt"]; 
```

带有 4 个支持文件（font-test4.fnt / -hd.fnt 和 font-test4.png / -hd.png

在两种模拟器模式（视网膜和非视网膜）下一切正常。

但是，当在 iPhone4 上运行时，CCLabelBMFont 类会在完整性检查时断言

//缩放W。完整性检查

```
propertyValue = [nse nextObject];
NSAssert( [propertyValue intValue] <= [[CCConfiguration sharedConfiguration] maxTextureSize], @"CCLabelBMFont: page can't be larger than supported"); 
```

//缩放H。完整性检查

```
propertyValue = [nse nextObject];
NSAssert( [propertyValue intValue] <= [[CCConfiguration sharedConfiguration] maxTextureSize], @"CCLabelBMFont: page can't be larger than supported"); 
```

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:21:22.093

您正在达到最大纹理大小限制。检查位图字体的 png 文件，特别是 HD 变体。如果它在任一维度（宽度或高度）上大于 2048 像素，则只有 iPad 2（使用 iOS 5.1）、iPad 3 和 iPhone 4S 可以加载该纹理。这些设备最多支持 4096x4096 纹理，旧设备仅支持 2048x2048。

除此之外，字体大小为 300/600 的字体实在是太大了。您应该考虑替代方法来实现您想要实现的目标，因为如此大的字体会极大地浪费（仍然是宝贵的）内存。

不过，模拟器并不太关心这些问题。它在您的 Mac 上运行，可以使用您 Mac 的所有内存和其他资源。

# iphone - 播放视频和某些屏幕时隐藏 revmob 横幅

> ID：12186442
> 
> 赞同：0
> 
> 时间：2012-08-29T21:00:25.903
> 
> 标签：iphone, ios, xcode, revmob

我已经在我的应用程序中实现了 revmob 广告。一个电影播放器​​应用程序。

我遇到的问题是，当我播放电影时，横幅仍然显示，该应用程序基本上链接到在股票 iphone 视频播放器中播放的 mp4 文件。

当播放器处于活动状态时，我如何告诉 xcode 隐藏广告

我知道我使用 [RevMobAds hideBanner]；命令我不知道把代码放在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:37:51.137

作为替代方案，您可以将横幅用作 UIView 的子类：

```
RevMobAds *revmob = [[[RevMobAds alloc] initWithAppId:appID delagate:self]];
RevMobBannerView *bannerView = [revmob bannerView]; 
```

然后以与任何 UIView 相同的方式将其集成到您的布局中。您可以查阅[RevMob API 文档](http://sdk.revmob.com/ios-api/index.html)了解更多信息。

# php - 使用 PHP 生成占位符图像，例如 placedog.com 和 placekitten.com

> ID：12186460
> 
> 赞同：2
> 
> 时间：2012-08-29T21:01:55.867
> 
> 标签：php, image

有谁知道我可以从哪里开始生成具有通过 url 传递的尺寸的图像。

我想要这样的东西：

如果 url 是 example.com/400/200，则使用特定图像库生成的图像以 400px 宽 x 200px 高生成。

我知道如何使用 imagecreate() 生成图像，但希望创建的图像是使用图像库创建的图像，就像[placekitten.com](http://www.placekitten.com)和[placedog.com](http://www.placedog.com)一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:05:43.777

PHP 内置库 - GD [http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

您可以像上传 X 照片并在其中标记图片重要部分的中心坐标，然后将其存储在 MySQL 中，其中包含以下数据：min_width、min_height、max_width、max_height。该数据将是可以从原始照片复制的矩形边界。然后查询可以在最小和最大[宽度/高度]之间使用的每张图片，并从中制作图像并从中随机选择一张。您还可以存储结果，以便在每次查询该大小后它不会改变并且速度更快（也可以在某处保存较小的图片）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:06:44.693

您应该检查[http://placehold.it/](http://placehold.it/)。

该服务是免费的、可定制的，并且由于它是另一个域，因此网页加载速度更快。

否则有一些关于 GD 库的不错的教程：

[http://motyar.blogspot.com/2010/09/create-image-placeholder-with-php.html](http://motyar.blogspot.com/2010/09/create-image-placeholder-with-php.html)

# javascript - 点击链接，div滑出，链接的div滑入，点击关闭并重新加载第一个div

> ID：12186469
> 
> 赞同：1
> 
> 时间：2012-08-29T21:02:57.943
> 
> 标签：javascript, jquery, show-hide

我希望我自己知道如何写这个。 [http://www.cubancouncil.com/work/project/coppola-winery/](http://www.cubancouncil.com/work/project/coppola-winery/)

链接页面具有我想使用的确切功能。我如何相信他们的剧本有效。单击一个图像，该图像通过向右滑动来隐藏该图像的容器 div，然后从右到左加载/滑动一个较大的图像，该图像位于固定位置。

如果这里有人很好地用解决方案回答这个问题，您介意更进一步并评论您的部分代码，以便我可以将其链接到正确的 html 吗？

我认为理解这个脚本会让我走上一条通往更高级的 Javascript 和 Jquery 的道路。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:07:34.837

编辑：我找到了一个更好的[例子](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)，提供了一些代码。转到它讨论如何向左滑动元素的部分。如果您有任何问题，请告诉我们。

我还冒昧地为您提供了一个完整的工作示例（与文章中的示例完全相同），因此您可以在浏览器中运行它

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <style>
    .slide {
      position: relative;
      background-color: gray;
      height: 100px;
      width: 500px;
      overflow: hidden;
    }
    .slide .inner {
      position: absolute;
      left: -500px;
      bottom: 0;
      background-color:#e3e3e3;
      height: 30px;
      width: 500px;
    }
    </style>
    <script>
        $(document).ready(function() {
          $('#slideleft button').click(function() {
            var $lefty = $(this).next();
            $lefty.animate({
              left: parseInt($lefty.css('left'),10) == 0 ?
                -$lefty.outerWidth() :
                0
            });
          });
        });
    </script>
</head>
<body style>
    <div id="slideleft" class="slide">
        <button>slide it</button>
        <div class="inner">Slide to the left</div>
    </div>
</body>
</html> 
```

这篇文章解释了大部分内容，但我会给你一个快速的总结。从本质上讲，我们所做的是我们正在制作它，以便无论您试图滑动什么，我们都在改变左侧位置以便它出来。最初，我将 CSS 设置为 -500px，因此它位于屏幕之外。然后，javascript 监听按钮单击并通过更改左侧位置来移动 div。Jquery 的[animate()](http://api.jquery.com/animate/)函数完成了大部分工作。

令人困惑的是三元运算符。您可以在[此处](https://stackoverflow.com/questions/6259982/js-how-to-use-the-ternary-operator)找到更多信息。本质上，它只是检查 left 属性是否为 0。如果是，我们希望将其移回外部 -500px。如果左边不是 0px，我们知道它一定在屏幕之外，所以我们把它移回 0px。

如果您还有其他任何困惑，请告诉我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:43:34.387

为你创建了简单的小提琴**（注意它在悬停时工作！！）**但它应该让你继续前进，在我的国家有点晚了所以我的大脑不能正常工作:) [小提琴在这里](http://jsfiddle.net/qGVfp/)

```
$(document).ready(function(){
var innerHeigth = $(".inner").outerHeight();  
$(".wrapper").hover(function(){        
$(".inner").stop().animate({top:-innerHeigth},1000);
 //alert(innerHeigth)
 },function(){
 $(".inner").stop().animate({top:0},1000);

 });
 }); 
```

# c++ - 调用 std::map::find 时出现“映射/设置迭代器不兼容”

> ID：12186472
> 
> 赞同：1
> 
> 时间：2012-08-29T21:03:13.467
> 
> 标签：c++, visual-studio-2010, map, c++11, iterator

C++ 0x11（有点。你知道，微软，等等），Visual Studio 2010 SP1，Windows 7 Enterprise。

我有一个功能：

```
// typedef boost::variant</*stuff*/> value_t;
// typedef unsigned short key_t
// typedef std::map<key_t, value_t> map_t

value_t find(const key_t key, const map_t &map)
{
    const map_t::const_iterator iter(map.find(key));

    // ...More stuff and then return.
} 
```

在 std::map::find 的主体中，有一个迭代器比较，我收到错误消息“map/set iterators incompatible”，如 VC\include\xtree:321 中所定义。这个错误的本质是来自两个不同容器的迭代器被相互比较，但错误来自**容器自己的 find 函数！！！**反过来说，另一个容器的迭代器是从哪里来的。

好的，症状：

*   这*是*一个线程应用程序。
*   它只发生在运行时，在实际应用程序的随机压力测试期间。
*   我们没有看到任何无效或明显的垃圾字段。

我对更大社区的问题：

假设这是线程环境中的计时错误，是否可以在此过程的中途更改映射的内部状态，修改模板类_Tree_const_iterator::_Getcont() 的值是多少？我假设在该线程中的查找完成之前，地图正在被清除并重新填充到另一个线程中。单凭这一点能行吗？或者交换或移动操作怎么样？

我将追踪丢失的互斥锁或其他任何东西，我只是想确保我理解所有可能的手段，我可​​以在这个上下文中进入这个状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T23:03:40.780

> 假设这是线程环境中的计时错误

然后所有的赌注都取消了。如果您的代码是线程化的并且不是线程安全的，那么您可能会遇到各种错误。`std::map`不是线程安全的（在修改它时您无法访问它），因此您可能会遇到很多错误。

在假设其他错误之前确保您的代码是线程安全的。

# android - 试用版申请的时间限制

> ID：12186473
> 
> 赞同：2
> 
> 时间：2012-08-29T21:03:17.443
> 
> 标签：android, version, trial

我正在寻找我制作的应用程序的试用版。基本上，我想对应用程序在出现一个窗口之前运行多长时间设置一个时间限制，该窗口指出用户必须购买应用程序的付费版本。

感谢您提前提供任何提示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:13:12.307

当您的应用程序首次安装在设备上时，请连接到您的服务器并为其分配一个唯一的设备 ID。

每次启动应用程序时，请检查与设备对应的到期日期，并在试用期结束时显示适当的消息。

否则，禁用一些功能并仅在用户购买时才发布它们。

不要使用 SharedPreferences，因为用户可以轻松清除应用程序数据并且时间会被重置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:13:51.197

使用带有存储电话 ID 和日期的数据库的服务器。然后检索当前电话的状态。当用户安装一个新的 rom 时，id 会改变，所以不应该经常发生。

# iphone - AFNetworking 未在块内同步返回数据

> ID：12186474
> 
> 赞同：0
> 
> 时间：2012-08-29T21:03:21.890
> 
> 标签：iphone, ios, xcode, json, afnetworking

无法使用 AFNetworking 在块内同步接收 JSON。我检查了这个[解决方案](https://stackoverflow.com/a/7970037/1634365%20but%20no%20result)。在方法结束时它总是为零。

这是我的方法：

```
- (BOOL)whois:(NSString *)domain withZone: (NSString*) zone
{        
    __block NSString *resultCode;

    NSURL *url = [[NSURL alloc] initWithString:@"myurl"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {     
        resultCode = [JSON valueForKeyPath:[NSString stringWithFormat:@"%@.%@", domain,zone]];  //checked with NSLog, works well              
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue addOperation: operation];
    [operation waitUntilFinished];

    if(resultCode == @"available") //nil here
    {
        return YES;
    }
    return NO; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:27:34.813

而不是创建一个，`NSOperationQueue`开始你然后调用它会阻塞主线程直到它完成。那么你的 resultCode 不应该为零。`AFJSONRequestOperation``[operation start]``[operation waitUntilFinished]`

正如**@mattt**在您链接的帖子中所说，强烈建议不要像这样冻结线程。考虑找出另一种方法来执行此操作，例如从成功块调用您希望继续的新方法，以及从失败块调用不同的失败方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T20:12:00.937

您的方法无法在其当前设计下运行。

```
- (BOOL)whois:(NSString *)domain withZone: (NSString*) zone
{        
    __block NSString *resultCode;

    NSURL *url = [[NSURL alloc] initWithString:@"myurl"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

    // *** Runs 1st
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {     

        // *** runs 3rd
        resultCode = [JSON valueForKeyPath:[NSString stringWithFormat:@"%@.%@", domain,zone]];  //checked with NSLog, works well              
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    // *** Runs 2nd
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue addOperation: operation];
    [operation waitUntilFinished];

    if(resultCode == @"available") //nil here
    {
        return YES;
    }
    return NO; 
} 
```

因为块中的材料是第三次异步运行，所以您将无法以当前设计的方式将该值返回给更大的方法。也许使用这样的东西：

```
- (void)whois:(NSString *)domain withZone: (NSString*) zone
{        

    NSURL *url = [[NSURL alloc] initWithString:@"myurl"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

    __weak id weakSelf = self;
    // Runs 1st
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {     

        NSString *resultCode = [JSON valueForKeyPath:[NSString stringWithFormat:@"%@.%@", domain,zone]];  //checked with NSLog, works well       
        [weakSelf receivedResultCode:resultCode];       
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];
}

- (void) receivedResultCode:(NSString *)resultCode {
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue addOperation: operation];
    [operation waitUntilFinished];

    if(resultCode == @"available") //nil here
    {
        // do @YES stuff
    }
    else {
        // do @NO stuff
    }
} 
```

显然，您必须更改调用它的人的设计，因为它不会以您指定的方式返回值。也许有更好的解决方案，但我认为这是它工作所需的设计类型。

# c# - 具有多个相等运算符的动态评估语句

> ID：12186475
> 
> 赞同：1
> 
> 时间：2012-08-29T21:03:24.427
> 
> 标签：c#, eval

我见过很多表达式解析器/标记器，它们可以采用某个字符串并评估结果。例如，您可以抽出字符串：

```
4+4 
```

进入以下代码：

```
MSScriptControl.ScriptControl sc = new MSScriptControl.ScriptControl();
//' You always need to initialize a language engine
sc.Language = "VBScript";
//' this is the expression - in a real program it will probably be
//' read from a textbox control 
string  expr  = "4+4";
double res  = sc.Eval(expr); 
```

并得到 8。但是，是否有可以评估字符串的解析工具：

```
4 = 4 = 4 
```

? 到目前为止，所有示例都因无法比较 double 和 boolean 的错误而失败（从编译器的角度来看这是有道理的，但从人类的角度来看，我们可以看到这是真的）。有人遇到可以实现这一目标的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:11:34.340

从人类的角度来看，只有当我们将 x = y = z 视为特殊运算符（具有三个操作数）时，这才是正确的，其中它意味着 x = y、y = z、x = z。这是表达式的特定句法解释。人类（尤其是程序员）也可以像大多数编译器一样解释它，即选择最左边的分组（x = y），然后将该比较的结果（布尔值）与 z 进行比较。即使对人类来说，在这种语法下这也没有意义。从人类的角度来看，这似乎很明显，因为在选择对给定上下文“有意义”的语法时，人类是出了名的模糊。

如果您真的想要那种级别的“模糊性”，则需要研究[Wolfram Alpha](http://www.wolframalpha.com/input/?i=4%20=%204%20=%204)之类的东西，它会执行上下文分析以尝试找到表达式含义的最佳猜测。如果您在此处输入“4 = 4 = 4”，它将回复 True。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:12:33.443

您需要为您的“语言”定义语法并构建解析器，因为您的预期行为不受正常表达式语法的覆盖（并且正常语言也应该将其评估为“假”，因为我听说过的每种语言都将 = 作为二进制操作，因此将在某些时候以“4 = true”结束）。有一些工具可以为 C# 构建解析器...

旁注：匹配“人类视角”是非常困难的问题，即使是人与人之间的交流也没有解决:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:06:25.937

尝试

```
var result = (int) HtmlPage.Window.Eval("4 + 4"); 
```

# java - 是否可以为 2^14 音频帧实现 65 微秒 FFT？

> ID：12186483
> 
> 赞同：4
> 
> 时间：2012-08-29T21:03:59.673
> 
> 标签：java, performance, fft, aec

我正在开发一个 Java 项目，我需要在 65 微秒内实现 FFT 转换。FFT 的输入是 2^14 个实数。我已经尝试过可以从 Internet 上找到的每个 Java FFT 库，例如 JTransforms 和 Apache Common Math，但没有一个可以达到这个速度。最快的库是 JTransforms，但仍然需要大约 1 毫秒。那么有人可以告诉我是否有可能在 JAVA 中达到这样的速度（65 微秒）？据我所知，在这种情况下，C 库 FFTW 可以足够快，但我不能在这里使用 JNI，我需要一个纯 Java 实现，因为它将作为 Applet 部署在网站中。

PS 我的工作是使用 FFT 将 2^14 音频帧传输到频域，然后对其应用声学回声消除算法 (MDF)。2^14 由普通房间的标准回声延迟决定。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:34:06.570

执行时间高度依赖于主机配置，小程序在客户端计算机上执行。这意味着不同的客户可能会观察到不同的表现。在中等配置下，不太可能在 65 微秒内获得 2^14 个数字的 FFT。

在这里，您可以看到FFTW 等最佳库的[这些基准测试。](http://www.centerspace.net/blog/nmath/fft-performance-benchmarks-in-net/)即使使用 FFTW，在具有 2.80 Ghz、Intel Core i7 CPU 和 4Gb 内存的机器上计算 2^13 点 FFT 也需要超过 50 微秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:24:15.857

您是否尝试过重复执行转换？Java 通常在运行时可以收集有关代码热点的信息后开始优化。第一次（少数）处决需要更长的时间。您也可以尝试使用服务器 VM（请参阅[“java -server”和“java -client”之间的真正区别？](https://stackoverflow.com/questions/198577/real-differences-between-java-server-and-java-client)）

在您尝试 JNI 之前，请先研究一下它的开销，因为这实际上可能需要超过 65µs 的时间。

1ms 与 65µs 的差异似乎太大了，因此我怀疑代码没有被 VM 优化。

# jquery - jQuery onclick 中的条件

> ID：12186484
> 
> 赞同：0
> 
> 时间：2012-08-29T21:04:03.583
> 
> 标签：jquery, onclick, conditional

当网站加载全屏时将设置为 false

```
 var fullscreen = false; 
```

然后我想根据全屏是真还是假对多个 div 做不同的事情。

```
 var fullscreen = false;

fullscreen.on('click', function(){
    if (fullscreen == false) {
        fullscreen = true;
        backgroundCurtain.css({"background" : "black", "padding" : "0"});
        pictureInner.css({"width": "100%"});
        fullscreen.css({"backgroundPosition" : "-26px 0"});
        pictureContainer.css({"width" : "auto", "padding" : "0"});
        imageResized.css({"maxHeight" : "100%", "maxWidth" : "100%"});
        var imageWidth = imageResized.width();
        pictureInner.css({"width" : imageWidth});
        alert(imageWidth);
    }
    else if (fullscreen == true) {
        fullscreen = false;
        backgroundCurtain.removeAttr("style").children().removeAttr("style");
    }
}); 
```

这根本不起作用，我不知道为什么？

对于那些想在现场调试它的人，请尝试按现场上的任何图片；[https://dl.dropbox.com/u/9677524/Webbdesign/william.html](https://dl.dropbox.com/u/9677524/Webbdesign/william.html)（如果上传到公共 Dropbox 页面，脚本在 Chrome 上不起作用，afaik）

# jquery - jQuery 效果和队列

> ID：12186487
> 
> 赞同：0
> 
> 时间：2012-08-29T21:04:11.260
> 
> 标签：jquery, effects, queueing

我正在尝试使用 jQuery 效果链来操作对象。链中的一些效果取决于对象的当前位置。但似乎整个效果链在执行之前都已排队，因此任何获取当前定位的函数调用都会返回不正确的值。

我正在使用的标准链接的两个替代方案 (.fadein().fadeOut().animate()) 是在每个效果完成后使用回调来开始下一个效果。或者我可以看看使用 jQuery 队列。

我是否正确假设如果我对回调进行编码，例如 .fadeIn(500,startNextEffect) 当淡入效果排队时将不会评估 startNextEffect 的内容？还有什么更容易我想念的吗？

谢谢你，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:24:59.900

`position`您可以使用 css属性重叠图像，而不是使用`fadeIn()`和`fadeOut()`效果：

[这是 jsFiddle 示例。](http://jsfiddle.net/pyQdB/12/)

**jQuery：**

```
$(document).ready(function() {
    $('img').click(function() {
        $('img').fadeOut(400);
        $(this).next().delay(100).fadeIn(600);
    });
}); 
```

**CSS：**

```
img { position:absolute; left:10px; top:10px; }​ 
```

# scala - 如何将片段函数绑定到按钮或图像的 onclick 事件？

> ID：12186490
> 
> 赞同：4
> 
> 时间：2012-08-29T21:04:20.113
> 
> 标签：scala, intellij-idea, lift

我已经定义了这个函数来建立一个学生列表，每个学生都有他的名字、姓氏和一个图像，这取决于一个属性可以是一个勾号或一个叉号。我想将 onClick 事件分配给标签 Academic(my image) 以调用我的代码片段中的一个名为 Academic(Student s) 的函数，该函数接收学生，然后重定向到另一个页面。谁能帮我？？

```
def students(xhtml: NodeSeq) = {

    def bindStudents(template: NodeSeq): NodeSeq = {

      studentsList.flatMap {
        s => bind("studentTag", template, "name" -> s.Name, "surname" -> s.Surname,
          AttrBindParam("academic", if (s.HasIssue("Academic")) tickUrl else crossUrl, "src"),         
        )}
    }
    bind("list", xhtml, "studentsList" -> bindStudents _)
  }

 def academic(s:Student)={
    //do some stuff with s
    redirectTo("/OtherPage.html")
  } 
```

代码

```
<list:studentsList>
            <tr>
                <td> <studentTag:name /> </td>
                <td> <studentTag:surname /> </td>
                <td>
                     <img  studentTag:academic=""/>
                </td>
</list:studentsList> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T23:57:22.497

SHtml 中有一个名为“ [onEvent](http://scala-tools.org/mvnsites/liftweb-2.4/net/liftweb/http/SHtml$.html) ”的方法。

我不太确定如何以旧方式执行此操作，但如果您使用新[的设计器友好的 CSS 绑定助手](http://simply.liftweb.net/index-7.10.html#toc-Section-7.10)，它将非常简单：

HTML 模板：

```
<div data-lift="MySnippet">
    Name:<span id="name">Student Name</span>
    SurName:<div class="surname">Surname</span>
    <img src="imageURL" class="clickable"/>
</div> 
```

这是片段：

```
class MySnippet
{
    val studentName = "whatever"
    val surName = "..."

    def onClickCallback(s: String): JsCmd = {
        // Do what ever you want, BTW, I never have idea
        // what the ``s`` the lift will passed in.

        Alert('Hey, you clicked me.') // This is the javascript that browser will execute when user click on the element.
    }

    // Note there is no argument list
    def render = {
        "#name" #> studentName & // Replace the HTML tag with id="name" to studentName 
        ".surname" #> surName & // Replace the HTML tag with class=surname to surName 
        ".clickable [onClick]" #> SHtml.onEvent(onClickCallback) // Append onClick attribute to HTML tag that has "clickable" class, and it will calle onClickCallable in your snippet.
    }
} 
```

# 更新

抱歉，我没有注意到您绑定到列表。但既然有柯里化功能，也不会太难。

HTML 代码：

```
<table data-lift="MySnippet">
  <tr>
    <td><span class="name">Name</span></td>
    <td><span class="surname">SurName</span></td>
    <td><img src="test.jpg"/> </td>
  </tr>
</talbe>

case class Student(name: String, surname: String)

class MySnippet
{
    def onClickCallback(student: Student)(s: String): JsCmd = {
        Alert("You Click:" + student)
    }

    val xs = Student("Brian", "Hsu") :: Student("David", "Walter") :: Nil

    def render = {
        "tr" #> xs.map { student => 
            ".name" #> student.name &
            ".surname" #> student.surname &
            ".clickable [onClick]" #> SHtml.onEvent(onClickCallback(student)_) 
        }
    }
} 
```

# java - 从 json 反序列化时保留引用

> ID：12186492
> 
> 赞同：0
> 
> 时间：2012-08-29T21:04:25.853
> 
> 标签：java, gson

我正在我的应用程序中实现一个标记系统。我有一个所有`Tags`要标记对象的主列表。对象可以有多个标签，这些标签是对主列表中标签的引用。

当我将数据保存为 json 文件，然后在我的应用程序再次运行时加载它时，这些引用会丢失（`tagInMainList == referenceToTag`不保留）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:13:11.770

我会非常关心身份，除非您需要最小化内存使用和/或其他大量优化。恐怕，您需要一个自定义反序列化器。有了它，您可以简单地`return tag`使用`return myTagInterner.intern(tag)`Guava 的[interner](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Interner.html)替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:59:03.870

如果你松散地耦合你的引用，以至于它们只包含在地图查找中使用的键值怎么办？你仍然可以支持类似`tagInMainList.equals(keyBasedReferenceToTag)`or的等式`tagInMainList.getKey().equals(keyBasedReferenceToTag)`。JSON 会更简单，甚至可能更简洁。

# opengl - 代码::blocks 的 OpenGL 设置“找不到 -lXxf86vm”

> ID：12186494
> 
> 赞同：2
> 
> 时间：2012-08-29T21:04:43.077
> 
> 标签：opengl, glut, codeblocks, freeglut

我正在为学校建立一个开发环境。我们将使用 GLUT 进行图形编程。我在 Ubuntu 上安装了 freeglut 使用

```
sudo apt-get install freeglut3-dev 
```

我将使用 code::blocks 编写所有内容（根据讲师的规范），但是当我尝试在 code::blocks 中构建默认的 GLUT 项目时，我得到以下信息

```
Compiling: main.cpp 
Linking console executable: bin/Debug/glut_test
/usr/bin/ld: cannot find -lXxf86vm
collect2: ld returned 1 exit status 
```

在我看来，我缺少一些依赖，但我无法终生弄清楚它是什么。我不知道**-lXxf86vm**是什么，Google 或我能找到的任何其他论坛也不知道。

有人有想法吗？

更新 1）这可能与我在这台笔记本电脑中有 Nvidia Optimus 卡这一事实有关。

我也尝试运行默认的 OpenGL 项目，但它引发了以下错误

```
main: X server has no OpenGL GLX extension 
```

我将尝试安装 bumblebee 看看是否能帮到我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T23:04:23.230

> 我不知道 -lXxf86vm 是什么，Google 或我能找到的任何其他论坛也不知道。

这个库为 XF86VidModeSwitch 扩展提供了一个 API。XF86VidMode 已被 XRandR 取代，但 freeglut 可能需要它来支持游戏模式。

只需安装包“libxxf86vm-dev”，

> 更新 1）这可能与我在这台笔记本电脑中有 Nvidia Optimus 卡这一事实有关。

不，这不是缺少这个特定库的原因

> 我也尝试运行默认的 OpenGL 项目，但它引发了以下错误

好吧，你还没有正确安装 NVidia-Drivers。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T17:29:44.510

CodeBlocks 总是将“Xxf86vm”添加到新的 GLUT 项目中。我不知道它是什么，或者为什么 CodeBlocks 添加它，（非常烦人的错误？）但你几乎肯定不需要它！

您可以在以下位置找到它：项目 -> 构建选项... -> 链接器设置。
在左侧窗格中选择您的项目名称，它应该出现在：“链接库”下。
现在，只需将其从列表中删除即可。没有它，您的代码应该可以正常编译和运行。

# php - PHP Swiftlet mysqli 错误

> ID：12186495
> 
> 赞同：1
> 
> 时间：2012-08-29T21:04:45.797
> 
> 标签：php, mysql

错误：

> 致命错误：Swiftlet\App::autoload(): 在 / hermes/waloraweb009/b1166/htdocs/jim/ss test/Swiftlet/App.php 在第 223 行

我是 MVC 的新手，正在尝试 Swiftlet。我正在尝试设置一个 MYSQL 数据库模型。

我已将错误确定为：

```
class Database extends \Swiftlet\Model {
    public $mysqli;

    public function __construct(App $app) {
        $this->mysqli = new mysqli($this->app->getConfig('dbHost'),
                                   $this->app->getConfig('dbUser'),
                                   $this->app->getConfig('dbPassword'),
                                   $this->app->getConfig('dbName'));
    }
} 
```

但我不知道为什么。为什么它会尝试加载`mysqli`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:10:52.923

似乎问题在于您可能在`\Swiftlet`命名空间中。当试图从这个命名空间中实例化 mysqli （全局命名空间中的一个项目）时，它试图在它通常看起来自动加载它的命名空间中的类的地方自动加载。该类不存在，因此您会收到自动加载错误。

尝试像这样更改您的 mysqli 实例化：

```
$this->mysqli = new \mysqli($this->app->getConfig('dbHost'), $this->app->getConfig('dbUser'), $this->app->getConfig('dbPassword'), $this->app->getConfig('dbName')); 
```

请注意，`myslqi`现在以`\`引用全局命名空间中的 mysql 类为前缀。

# python - 使用 Scrapy，无法抓取超过我的起始网址的链接

> ID：12186500
> 
> 赞同：1
> 
> 时间：2012-08-29T21:05:06.617
> 
> 标签：python, scrapy, web-crawler

我一直在努力爬取一个网站并且被卡住了。我需要从一个 url 开始，并抓取源自它的所有后续 url，以及源自这些的所有 url，等等，尽可能细化。我已经搜索了以前的帖子，但仍然找不到解决问题的方法。

运行我的代码后，它会从我的起始 url 中抓取链接，但不会抓取起始 url 上的链接。我一直在尝试解决这个问题，但不能。

我相信我的问题可能与我正在设置但不确定的规则有关。我已经删除了允许的域，并确保在我的代码中包含了 follow=True，并且我知道包含 callback=parse 会是一个问题，但似乎包含 callback='parse_item' 不是，我我也尝试删除它，这没有什么区别。

我没有对管道或设置文件夹进行更改，因为我不确定我会对它们做什么。我的项目非常标准，它是一个字段，我使用它来加载它，从 hospitalone.items 导入 HospitaloneItem。我的其余代码如下：

```
class HopitaloneSpider(CrawlSpider):
    name = 'example.org'
    #allowed_domains = ['http://>example.org/']
    start_urls = [
        'http://example.org/'
    ]

    rules = (
        #Rule(SgmlLinkExtractor(allow='>example\.org', )),
        Rule(SgmlLinkExtractor(allow=('\w+$', )), callback='parse_item', follow=True),
    )

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        item = HospitaloneItem()
        item['name'] = hxs.select('//a').extract()
        return item 
```

任何帮助都会很棒。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:10:40.467

我认为问题在于您使用的是 CrawlSpider，因此您不能覆盖 parse 方法。这是一个可能对您有所帮助的链接：http: [//doc.scrapy.org/en/latest/topics/spiders.html#crawling-rules](http://doc.scrapy.org/en/latest/topics/spiders.html#crawling-rules)

按照示例实现不同的解析函数

# excel - Excel - 在单个单元格中分别计算字母和数字

> ID：12186510
> 
> 赞同：6
> 
> 时间：2012-08-29T21:05:42.160
> 
> 标签：excel, excel-formula, vba

我需要一种方法来分别计算一个单元格中的数字和字母。

例如，如果一个单元格包含`1234567ABC`我需要能够将其输出为

*   “7个数字”和
*   “三个字母”。

我想不出一种方法来使用可行的`len()`功能，`countif`只计算单元格本身。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T21:19:39.070

如果每个单元格仅填充数字和字母，则实现此目的的一种快速非 vba 方法是嵌套一个替换函数 10 次以删除 10 个数字字符。你剩下的只是阿尔法。然后你可以`len()`从原始长度中减去字母文本/减去该数字以获得数字长度。

假设“1234567ABC”在单元格 A1 中：

这个公式给出了字母的数量。(3)

```
=LEN(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(A1,0,""),1,""),2,""),3,""),4,""),5,""),6,""),7,""),8,""),9,"")) 
```

这个公式给出了总数： (7)

```
=LEN(A1)-LEN(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(A1,0,""),1,""),2,""),3,""),4,""),5,""),6,""),7,""),8,""),9,"")) 
```

如果您想开始以其他方式/更深入地处理数据，则可能需要 VBA 解决方案。

**笔记**

为了满足您原始帖子中的要求，请将此后缀添加到上述公式的末尾：

```
=x & " Numbers / Letters" 
```

其中 x = 上述两个公式。这将在计算的数字之后添加文本。

**延伸阅读：**

以下链接详细说明了执行类似操作的 VBA UDF： [http ://www.mrexcel.com/forum/excel-questions/16364-how-remove-numbers.html](http://www.mrexcel.com/forum/excel-questions/16364-how-remove-numbers.html)

**附加更新**（感谢 lori_m）

这个公式更容易阅读/更新：

```
=SUM(LEN(A1)-LEN(SUBSTITUTE(A1,{1,2,3,4,5,6,7,8,9,0},""))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T23:54:11.017

从我在“ [Analyze format of alpha-numeric string”中的](https://stackoverflow.com/questions/10081492/vba-function-to-analyze-format-of-alpha-numeric-string/10082533#10082533)回答：

要获得更详细的答案，此字符串 `1234567ABC456` 将报告为 `7N3L3N`

像这样的正则表达式将完成这项工作

*   同时按[alt](/questions/tagged/alt "显示标记为“alt”的问题") [f11](/questions/tagged/f11 "显示标记为“f11”的问题")进入 VBE
*   插入模块
*   复制并粘贴下面的代码
*   同时按[alt](/questions/tagged/alt "显示标记为“alt”的问题") [f11](/questions/tagged/f11 "显示标记为“f11”的问题")返回 Excel

那么您可以在 Excel 中使用该函数（它也检测无效字符串），即在 B1 中
`=AlphaNumeric(A1)`

![在此处输入图像描述](../Images/e827c8577d90e364c7532184cb1a4af0.png)

```
Function AlphaNumeric(strIn As String) As String
    Dim objRegex As Object
    Dim objRegMC As Object
    Dim objRegM As Object
    Dim strOut As String
    Set objRegex = CreateObject("vbscript.regexp")
    With objRegex
        .Global = True
        .ignorecase = True
        .Pattern = "[^\w]"
        If .test(strIn) Then
            AlphaNumeric = "One or more characters is invalid"
        Else
            .Pattern = "(\d+|[a-z]+)"
            Set objRegMC = .Execute(strIn)
            For Each objRegM In objRegMC
                strOut = strOut & (objRegM.Length & IIf(IsNumeric(objRegM), "N", "L"))
            Next
            AlphaNumeric = strOut
        End If
    End With
End Function 
```

# java - DB MetaData 更改 - 如何创建动态 sql？

> ID：12186514
> 
> 赞同：0
> 
> 时间：2012-08-29T21:05:48.970
> 
> 标签：java

我使用的数据库表经常变化，这意味着可以添加反映我的 sql 的新列。

我想的解决方案是首先将元数据“读取”到某个地图中并使用它来检索类似这样的值。

读取元数据：

```
public class Dynamic {
static public final Map<Integer, String> metadata = initMetaData();
HashMap<String, String> data = new HashMap<String, String>();

private static Map<Integer, String> initMetaData() {
    Map<Integer, String> tmpMap = new HashMap<Integer, String>();
    try {
        Connection connection = DBConnection.getConnection();
        try {
            Statement stmt = connection.createStatement();
            ResultSet result = stmt.executeQuery("SELECT * FROM TMP WHERE ROWNUM = 1");
            for (int i = 1; i <= result.getMetaData().getColumnCount(); i++) {
                tmpMap.put(new Integer(i), result.getMetaData().getColumnName(i));
            }
        } finally {
            connection.close();
        }
    } catch (SQLException ex) {
        …..
    }
    return Collections.unmodifiableMap(tmpMap);
}

public static String getColumnName(Integer index) {
    return metadata.get(index);
} 
```

并且在运行 sql 时：

```
public static void test()        
    try {
        Connection connection = DBConnection.getConnection()
        try {
            Statement stmt = connection.createStatement();
            ResultSet result = stmt.executeQuery("SELECT * FROM TMP where idx = 'R5'");

            while (result.next()) {
            Dynamic d = new Dynamic()
                for (int i = 1; i <= Dynamic.metadata.size(); i++) {                        
                         d.setData(Dynamic.getColumnName(i),result.getString(Dynamic.getColumnName(i)));       
                }
            } 
```

在这种方法中，我有两个问题（我注意到）：

1）我需要执行两个循环

2）我不知道通过结果集使用哪个 get 函数，因为类型也可以改变。

我怎样才能克服这些问题？

我也很感激能得到一些其他的建议，也许有一个简单的原因

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:24:22.107

1）你有什么替代内循环的方法？您将如何获得字段值？你认为循环少量整数会有很多开销吗？
2) 您可以从获取字段名称的相同元数据中获取有关字段数据类型的额外信息，并相应地映射方法名称。
3) 你真的应该为多个表创建一个映射 - table/fieldSeq/fieldType/methodName 可能还有一些额外的细节 - 你不必一直动态地获取它们。

# com - 调试 VB6 COM+ Web 应用程序挂起

> ID：12186515
> 
> 赞同：4
> 
> 时间：2012-08-29T21:05:55.047
> 
> 标签：com, asp-classic, vb6, windbg, com-interop

我在一个经典的 ASP Web 应用程序上工作，它使用了几个用 VB6 编写的旧 COM 组件。所有 VB6 组件都在 COM+ 应用程序中注册，这些应用程序在它们自己的 dllhost 进程中运行。大部分应用程序已转换为 .Net，但仍有许多遗留页面和组件。COM Interop 用于两个方向，从经典的 ASP 和 VB6 调用一些 .Net 程序集以及从 ASP.Net 调用 VB6 组件。该应用程序以经典管道模式在 Windows Server 2008 R2 (IIS 7.5) 上运行。

在大多数情况下，该应用程序运行良好。最终放弃了向 .Net 的过渡，取而代之的是开发了一种新产品。同时，旧产品必须保持其异构状态。

我无法跟踪 Web 应用程序挂起的间歇性问题。用户在浏览器等待时只会看到一个空白屏幕，而服务器从不响应。挂起一直存在，直到我手动终止托管 VB6 组件的 dllhost 进程，所以我相信问题就在那里。可能是内存泄漏或失控的循环循环。

系统每天有成千上万的用户，但问题每周只发生一到两次。幸运的是，我们有一个网络农场，它会在服务器停止响应时自动将其拉出，因此对客户的影响为零。不过，我想弄清楚发生了什么。

我重新编译了所有 VB6 组件以包含调试符号并重新部署到生产环境中。当问题发生时，我使用 32 位任务管理器 (c:\windows\syswow64\taskmgr.exe) 对 dllhost 进程进行故障转储。我最终得到了一个 dllhost.dmp 文件，我将它带到我的开发工作站并在 VS2010 中打开。我有 VB6 在我的符号路径中创建的 .pdb 符号文件。当我在 VS2010 中启动调试会话时，我可以转到 Modules 屏幕并看到确实加载了我的组件的所有符号。

然后去哪儿？调用堆栈没有显示我自己的任何组件。它看起来像这样：

![调用堆栈](../Images/bf25e3c2ad85785661d1726763dbf6fd.png)

调用堆栈顶部的反汇编如下所示：

![拆卸](../Images/57ef5dc01b1bebd9dbcc82af9be7ac7c.png)

不知道我还能做什么。我检查了调用堆栈的每一帧的所有本地人，这对我来说是胡言乱语。我没有看到对我自己的任何组件的任何引用。

也许 WinDbg 会产生更多信息？不知道从哪里开始。

我很确定，如果我能在挂起发生时找到正在调用的 VB6 类/方法，我就能深入了解它。我尝试添加一些日志记录，但结果不一致。

也许我的 VB6 组件完全没有问题，但我遇到了 Windows 或 IIS 中的一些错误？

任何建议都将不胜感激，但目前不能选择放弃 VB6。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:46:14.993

不是一个完整的答案，但[CoRegisterSurrogateEx](http://msdn.microsoft.com/en-us/library/ms687209%28v=vs.90%29.aspx)被记录为只要代理进程正在运行就阻塞：

> CoRegisterSurrogateEx 函数是一个阻塞函数。在 COM+ 确定进程将被关闭之前，它不会返回。在调用此函数之前，将此线程上的 COM 初始化为多线程单元 (MTA)。

所以我认为错误不在这个调用堆栈上。（您可以看到它在 WaitForSingleObject 调用上仍然阻塞，很可能是它用来阻塞直到进程关闭的机制）。

# ruby - 如何在 ruby 中循环数组？

> ID：12186518
> 
> 赞同：0
> 
> 时间：2012-08-29T21:06:06.373
> 
> 标签：ruby, loops

嗨，我刚开始学习 ruby​​，我正在尝试遍历我创建的数组，如下所示：

```
server[0] = ['hostname' => 'unknown01', 'ip' => '192.168.0.2', 'port' => '22']
server[1] = ['hostname' => 'unknown02', 'ip' => '192.168.0.3', 'port' => '23']
server[2] = ['hostname' => 'unknown03', 'ip' => '192.168.0.4', 'port' => '24'] 
```

我尝试使用此代码：

```
i=0
server[i].each do |x|
    print x['hostname']
    print x['ip']
    i+=1
end 
```

但它只循环通过服务器 [0] 我如何循环通过服务器 [0-3]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:10:10.697

您根本不需要使用`i`，只需执行以下操作：

```
server.each do |x|
    print x['hostname']
    print x['ip']
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:13:11.743

您正在做的是设置`i`为`0`，所以当您到达 时`server[i].each`，您正在调用`server[0].each`。即使你增加`i`它并不会改变你枚举的内容。正确的代码是：

```
server.each 
```

枚举`server`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:38:14.107

This probably isn't doing what you think it is. Since you're putting your key/value pairs inside of square brackets, it winds up being an array of one hash (other languages call them maps and dictionaries). Probably you want to exchange your square brackets with curly brackets like this:

```
servers = []
servers[0] = {'hostname' => 'unknown01', 'ip' => '192.168.0.2', 'port' => '22'}
servers[1] = {'hostname' => 'unknown02', 'ip' => '192.168.0.3', 'port' => '23'}
servers[2] = {'hostname' => 'unknown03', 'ip' => '192.168.0.4', 'port' => '24'} 
```

But since you're just setting each one by its index, you don't need to build it up this way, you can just place them in their respective positions within the array.

```
servers = [
  {'hostname' => 'unknown01', 'ip' => '192.168.0.2', 'port' => '22'},
  {'hostname' => 'unknown02', 'ip' => '192.168.0.3', 'port' => '23'},
  {'hostname' => 'unknown03', 'ip' => '192.168.0.4', 'port' => '24'},
] 
```

Then to iterate over each one you can do:

```
servers.each do |server|
  puts server['hostname']
  puts server['ip']
  puts
end 
```

# asp.net-mvc-4 - 从 mvc4 应用程序调用 asp.net WebApi 抛出 500

> ID：12186519
> 
> 赞同：0
> 
> 时间：2012-08-29T21:06:06.817
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在使用 asp.net WebApi 项目时遇到了一些麻烦。我正在使用 rtm 位。

在我的 api 控制器中，我有这个

```
[HttpPut]
public Business Update([FromBody]Business business)
{
    try
    {
        if (business.Id == Guid.Empty)
        {
            throw new HttpResponseException(HttpStatusCode.BadRequest);
        }

        return _repository.Update(business);

    }
    catch (Exception ex)
    {
        log4net.ILog log = log4net.LogManager.GetLogger(this.GetType());
        log.Info(string.Format("Update Error Business"));
        log.Info(ex);
        throw;
    }
} 
```

我的 mvc4 应用程序我正在从我的应用程序的存储库中调用此 api 方法

```
public static HttpResponseMessage Put(string apiMethod,string baseAddress,object objectData)
{
    var myHttpClient = new HttpClient
    {
        BaseAddress = new Uri(baseAddress)
    };
    myHttpClient.DefaultRequestHeaders.Authorization = new BasicAuthenticationHeaderValue("username", "Password1");
    myHttpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
    var put = myHttpClient.PutAsJsonAsync(apiMethod, objectData);
    var x = put.Result;
    return x;
} 
```

我不断收到服务器 500 错误。我在 api 控制器上有一个断点，它没有被击中。如果从 3rd 方工具手动调用 api，则会调用 api。

我已经检查了所有基本的东西，但似乎无法弄清楚发生了什么。

有人有任何提示我可以用来找出问题所在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:44:41.223

我也陷入了类似的情况。不确定它是否与您的情况完全相同。通常 PUT/DELETE 有一些问题。这是我的问题（您可以决定它是否与您的问题相似）： [PUT 和 DELETE 在 Windows 2008 Server IIS 7 和 7.5 中为 asp.net webapi 返回 404](https://stackoverflow.com/questions/12136143/put-and-delete-returns-404-for-asp-net-webapi-in-windows-2008-server-iis-7-and-7)

# select - 如何使用 knockout.js 构建一个元素的 s with both text and values, and also set an initially-selected value? I'm using knockout.js to build a <select>element's <option>s, and also to set its default-selected value. All works as expected un ID：12186520 赞同：5 时间：2012-08-29T21:06:11.090 标签：select, binding, knockout.js, default, options 回答 #1 赞同：4 时间：2012-08-29T21:25:29.453 绑定用于确定使用optionsValue哪个属性来设置value生成option元素的属性。 这一行更改使您的示例对我有用： self.selectedAccount = ko.observable(1); 您的value绑定设置为selectedAccount哪个是 ID，并且您生成的options元素中的值确实是 ID。 回答 #2 赞同：0 时间：2012-08-29T21:22:37.543 您必须使“值”成为选项列表中的其中之一..... 我最终写了一些咖啡脚本来处理这个...... replaceWithMatchingExt = (observableToFind, observablePropertyToSet, list, match) -> return if not observablePropertyToSet return if not observableToFind() return if list.length == 0 observablePropertyToSet (x for x in list when x[match]() == observableToFind()[match]())[0] replaceWithMatching = (prop, list, match) -> replaceWithMatchingExt(prop, prop, list, match) 然后允许我（也咖啡脚本......） replaceWithMatching @Product, @Products(), 'Id' 鉴于 Product 是值，Products 是选择列表....而“Id”是我要匹配的属性。即，我可以使用 Id 来计算等效产品。 然后，代码将可观察的 Product 替换为 Products 列表中的一个对象（如果它与一个对象匹配）。</option></select>

# ms-access - pc 上文件版本的 MSAccess 错误 - OCX

> ID：12186521
> 
> 赞同：0
> 
> 时间：2012-08-29T21:06:12.833
> 
> 标签：ms-access, ocx

我有一个 Access 2003 应用程序，用户最近在我发布新版本的那一天开始遇到问题，其中一个屏幕有一个默认值为“date()”的字段，而不是显示它显示的日期“#姓名？'。如果一些不同步的 dll 或 ocx 但不确定是哪一个，我确定这一点。有人知道吗？我在用户机器上回滚到以前版本的应用程序，它们现在很好（但我需要尽快推出具有新功能的新版本）。所以我认为我的开发箱上的一些文件已经更新，只是不确定是哪一个。

谢谢

大学教师

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:12:32.620

这是典型的缺失参考。如果您使用的是 ActiveX 控件，那么您很容易在其他 PC 上遗漏一些东西。另一个常见原因是使用早期绑定和库引用。

缺少引用通常会影响日期等 VBA 核心功能。

# c++ - 以模板类型为参数的模板的 typedef

> ID：12186531
> 
> 赞同：0
> 
> 时间：2012-08-29T21:06:43.803
> 
> 标签：c++, typedef

我在下面的 typedef 有问题，我似乎做对了：

```
template <typename T>
  struct myclass1 {
  static const int member1 = T::GetSomeInt();
};

template <int I>
struct myclass2 {
  typedef myclass1< myclass2<I> > anotherclass;
  static int GetSomeInt();
};

anotherclass MyObj1; // ERROR here not instantiating the class 
```

当我尝试初始化另一个类对象时，它给了我一个错误。

知道我做错了什么吗？我的 typedef 似乎有问题。

任何帮助表示赞赏，谢谢布莱恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:08:21.910

你是`anotherclass`直接指的。该名称在该范围内不存在。您需要将变量声明为

```
myclass2<some_int>::anotherclass MyObj1; 
```

`some_int`你想要参数化的任何整数值在哪里`myclass2`。

我认为您还需要将其标记`myclass2<I>::GetSomeInt()`为存在，`constexpr`以便可以在`myclass1<T>::member1`.

通过这些调整，以下代码编译得很好：

```
#include <iostream>

template<typename T>
struct myclass1 {
    static const int member1 = T::GetSomeInt();
};

template<int I>
struct myclass2 {
    typedef myclass1<myclass2<I>> anotherclass;
    constexpr static int GetSomeInt() { return I; };
};

int main(int argc, char *argv[]) {
    myclass2<3>::anotherclass obj;
    std::cout << obj.member1 << std::endl;
} 
```

请注意，这需要 C++11 用于`constexpr`. 如果你想要 C++03，那么我不认为你`myclass1<T>::member1`是合法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:34:27.837

您正在创建一个`typedef`使用`myclass1`并传入模板化类作为参数。因此，您需要使用模板模板参数。这意味着`myclass1`应该将 的声明更改为告诉编译器`T`in`template <typename T>`本身就是一个模板类。

看看是否更改以下代码

```
template <typename T>
  struct myclass1 {
  static const int member1 = T::GetSomeInt();
}; 
```

这解决了问题：

```
template < template <typename BasicType> class T>
  struct myclass1 {
  static const int member1 = T::GetSomeInt();
}; 
```

# oop - 说一个对象有依赖是什么意思？

> ID：12186539
> 
> 赞同：0
> 
> 时间：2012-08-29T21:07:07.947
> 
> 标签：oop, object, dependencies

我一直在阅读对象 x 具有依赖关系。有些人说这很糟糕，有些人在某些情况下还可以，但我一开始就不明白这意味着什么。我看到了这个：

[什么是依赖注入？](https://stackoverflow.com/questions/130794/what-is-dependency-injection?rq=1)

但是一开始就不明白依赖的概念。该标签实际上给出了一个很好的定义，但希望有一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:18:32.207

“依赖”可能意味着许多不同的东西，取决于（双关语）上下文；）

在这种情况下，它的真正意思是“我需要什么特定的‘对象’（可能有很多）来完成工作？”

例如，一个组件需要“打印”的东西。依赖项是“打印”，但请求的对象可以打印到 HP Laserjet 9200、Oki 点阵或 .pdf 文件。

换句话说，您可以在这里用“插件”一词代替“依赖”，并保持相同的含义。

'希望有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:25:34.963

在谈论依赖注入时，我通常会说*classes*，而不是 objects 具有依赖关系。

如果需要类存在并且可能以某种方式工作，则类对类`A`具有依赖性。例如，如果 class调用了，则它依赖于 class 。如果班级消失或改变，您的班级可能会中断。`B``B``A``new B()``B``B``A`

在某些语言中，您可以通过允许类依赖于来打破依赖关系`interface`。如果你依赖 interface`I`而`B`implements `I`， B 可以消失并被`C`那个也 implements取代`I`，并且`A`根本不需要改变。例如，您可以在操作系统中使用驱动程序，如果您更换磁盘，您可能会得到一个实现“磁盘驱动器”接口的新驱动程序，但是您的操作系统仍然以相同的方式与磁盘通信而不知道它到底是什么类型的磁盘。

依赖注入是关于让你依赖接口而不是类，基本上而不是说`new B()`，你只需声明你想要一个实现的对象，`I`并且将为你注入一个合适的实现。您的班级`A`不必知道该班级`B`甚至`C`存在。

# servicestack - ServiceStack 和并发

> ID：12186540
> 
> 赞同：4
> 
> 时间：2012-08-29T21:07:22.120
> 
> 标签：servicestack

我们正在评估 ServiceStack 并发现所有示例主机一次只允许处理一个请求。如果将 Debug.WriteLine 和 Thread.Sleep 添加到任何入口点，这很容易看到。

我假设我们要么遗漏了一些设置，要么遗漏了一个关于如何使用 ServiceStack 的重要观点。

谢谢，罗斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:42:03.847

这实际上是我们测试 ServiceStack 的一个错误。我们使用的是相同的浏览器，但使用了不同的选项卡/窗口，这实际上阻止了自己发出并发请求。一旦使用了两种不同的浏览器（例如 IE 和 Chrome），我们就可以看到 ServiceStack 同时处理两个请求。

# ruby-on-rails - 如何在 Tomcat 上为 JRuby/Rails 应用程序使用 Rack::FiberPool 和 EventMachine？

> ID：12186541
> 
> 赞同：2
> 
> 时间：2012-08-29T21:07:21.770
> 
> 标签：ruby-on-rails, tomcat, jruby, eventmachine, fibers

我有一个使用[Rack::FiberPool](https://github.com/mperham/rack-fiber_pool)和[EventMachine](https://github.com/eventmachine/eventmachine)的 JRuby/Rails 应用程序。我有一些基于事件的动作控制器：

```
class TwitterController < ApllicationController
  def tweets
    fiber = Fiber.current
    tweets = nil 

    EventMachine.next_tick do  
      http = EM::HttpRequest.new("http://search.twitter.com/search?q=rails+3&format=json").get
      http.callback do
        tweets = JSON.parse(http.response)
        fiber.resume
      end

      http.errback do
        puts "request failed"
        fiber.resume
      end     
    end

    Fiber.yield

    render :json => tweets
  end
end 
```

当我使用瘦服务器手动运行时，它工作正常：

```
rails s thin 
```

但是当我部署到 Tomcat 时它不起作用。无论如何在Tomcat中使用EventMachine？

谢谢。

# html - 在宽度未知的桌子上溢出

> ID：12186543
> 
> 赞同：1
> 
> 时间：2012-08-29T21:07:24.480
> 
> 标签：html, css, cross-browser

我对这段代码有问题：

**CSS：**

```
 #pageBound{
            float:left;
            position:relative;
            left: 50%;
        }
        #page{
            float:left;
            position:relative;
            right: 50%;
        }
        .scroll{
            height: 150px;
            overflow-y: auto;
        }
        .myTable{
            border-collapse: collapse;
        }
        .myTable td{
            border: 1px solid black;
            padding: 10px 5px;
        } 
```

**HTML**

```
<div id='pageBound'>
    <div id='page'>
        <div class='scroll'>
            <table class='myTable'>
                <tr><td>25.08.12 22:32:59</td></tr>
                <tr><td>25.08.12 22:32:59</td></tr>
                <tr><td>25.08.12 22:32:59</td></tr>
                <tr><td>25.08.12 22:32:59</td></tr>
            </table>
        </div>
    </div>
</div> 
```

这里的工作示例：http: [//honzabrabec.cz/test/overflow.html](http://honzabrabec.cz/test/overflow.html)

在除 Opera 之外的所有浏览器中，它都会稍微缩小表格（将滚动条附加到内部），因此表格中的行会中断。在表格周围添加另一个带有填充的包装器并不能解决问题。但是，如果我将 'overflow-y:auto' 更改为 'overflow-y:scroll' 它在除 IE 之外的所有浏览器中都可以正常工作。如果我将另一个带有“溢出-y：滚动”的表添加到此页面，同样的修复甚至可以工作。

我希望它的行为方式与现在在 Opera 中的行为方式相同。这意味着桌子不会缩小。换句话说，我需要表格以与溢出 div 不存在相同的方式显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:32:19.050

你可以更换

```
.scroll {
    height: 150px;
    overflow-y: auto;
} 
```

和

```
.scroll {
    height: 150px;
    overflow-y: scroll;
} 
```

但问题是如果表格的高度可以小于 150px，也会有一个滚动条，即使它不是必需的。

**编辑：**

对不起，你已经知道了。

但我会选择适用于兼容浏览器的解决方案。

对于使用 IE 的用户，您可以尝试使用 javascript 解决方案：[http ://remysharp.com/2008/01/21/fixing-ie-overflow-problem/](http://remysharp.com/2008/01/21/fixing-ie-overflow-problem/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:17:55.233

你可以加

```
.myTable{
white-space: nowrap;
} 
```

但随后它出现了一个水平滚动条。

然后，您可以添加

```
.myTable{
white-space: nowrap;
margin-right: 17px;/* or more */
} 
```

它适用于 Firefox，但也许有一个浏览器有 30px 的滚动条......

# sql - Sybase *= 到 Ansi 标准，同一个内表有 2 个不同的外表

> ID：12186549
> 
> 赞同：2
> 
> 时间：2012-08-29T21:07:44.647
> 
> 标签：sql, outer-join, sap-ase, ansi-sql

我正在尝试迁移一些遗留程序代码。我无法找出 ANSI 标准语法来产生相同的结果。

以下是我尝试过的众多组合之一。第二个连接的内表是什么，是第一个连接的输出还是源表。

请帮助我有很多代码要更改。

原始 SQL 语句

```
select * from  
JT1 a, JT2 b, JT3 c  
where a.ID *= b.ID   
  and c.JOB *= b.JOB 
```

我的转换

```
select *   
from JT1 a  
 left outer join JT2 b   
 on a.ID = b.ID  
 right outer join JT3 c  
 on c.JOB = b.JOB 
```

下面是 SQL 表定义和示例数据。

```
Create table JT1 (  
 ID   int(4)   not null,  
 NAME char(20) not null)  

Create table JT2 ( 
  ID  int(4)   not null, 
  JOB char(20) not null)  

Create table JT3 ( 
  JOB  char(20) not null, 
  DUTY char(20) not null)  

INSERT INTO dbo.JT1 VALUES(10, "Saunders")  
INSERT INTO dbo.JT1 VALUES(20, "Pernal")  
INSERT INTO dbo.JT1 VALUES(30, "Marenghi")  
INSERT INTO dbo.JT2 VALUES(20, "Sales")  
INSERT INTO dbo.JT2 VALUES(30, "Clerk")   
INSERT INTO dbo.JT2 VALUES(30, "Mgr")  
INSERT INTO dbo.JT2 VALUES(40, "Sales")  
INSERT INTO dbo.JT2 VALUES(50, "Mgr")  
INSERT INTO dbo.JT3 VALUES("Mgr","Evaluate")  
INSERT INTO dbo.JT3 VALUES("Mgr","Reports")  
INSERT INTO dbo.JT3 VALUES("Mgr","Meeting")  
INSERT INTO dbo.JT3 VALUES("Clerk","Stocking")  
INSERT INTO dbo.JT3 VALUES("Clerk","Customer Request") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:59:06.647

好的，我花了一段时间，但试试这个：

```
select   a.ID,  a.NAME, b.ID,   b.JOB,  a.JOB,  a.DUTY    
from (Select * from #jt1    
      cross join #jt3  ) a 
left outer join #jt2 b    
  on a.ID = b.ID    and a.job = b.job 
```

多次使用左连接运算符的问题在于，您确实有一个隐藏的交叉连接。这应该会得到正确的结果，至于结果是否一直不正确是由于开发人员不了解他们在做什么，只有你自己知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:21:59.613

原始查询等效于：

```
select * 
from JT1 a
left join JT2 b on a.ID = b.ID
left join JT3 c on c.JOB = b.JOB 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T21:26:39.467

`*=`相当于`left [outer] join`

`=*`相当于`right [outer] join`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-29T07:47:02.403

如何创建查询...

示例表：交易

```
输入日期 PartyIdno 类别 贷记/借记金额
------ ---------- ---------- --------- ------------ --- -----
     1 02-01-2016 1 收据 C 8,200
     1 02-01-2016 5 付款 D 8,200
     2 14-02-2016 1 销售额 D 11,200
     2 14-02-2016 4 销售额 C 6,500
     2 14-02-2016 2 销售额 C 4,700

输出
------

输入日期 PartyIdno 借方 贷方 余额
----- ------ ---------- ------ -------- -----------                   
                             SubId 子金额
                             ----- ---------
  1 02-01-2016 1 8,200 8,200 铬
      02-01-2016 5 8,200 博士
  2 14-02-2016 1 11,200 3,000 博士
      14-02-2016 4 6,500 铬
      14-02-2016 2 4,700 铬

```

SQL 语句：

```
GLOBALSSS.Open_DB_Connection()

Dim cmd As New Sql Command("Select T1.ENTRY,COALESCE(T1.PARTYIDNO,T2.PARTYIDNO) AS Color FROM TRANSACT T1 FULL OUTER JOIN (SELECT PARTYIDNO FROM TRANSACT WHERE ENTRY=1) T2 ON 1 = 0 WHERE T1.PARTYIDNO =1 或 T2.PARTYIDNO-1 "，连接)

Dim da 作为新的 SqlDataAdapter(cmd)

将 dt 调暗为新数据表

da.填充（dt）

DataGridView1.DataSource = dt

GLOBALSSS.Close_DB_Connection()

```

# scheme - 为什么线程没有执行（Racket）

> ID：12186554
> 
> 赞同：2
> 
> 时间：2012-08-29T21:08:12.377
> 
> 标签：scheme, racket

我有一个程序，它的一个函数需要太长时间，比如说`longfunc`（在 longfunc 中完成的具体事情是生成一堆文件）。所以我想使用`thread`异步执行 this `longfunc`。但是，当我像下面这样写时，它并没有真正执行`longfunc`，因为没有生成文件......

`(thread (λ () (longfunc arg1 arg2)))`

当我得到上面的线程描述符，测试线程是否正在运行时，它说的是真的，这太奇怪了......

任何人都可以解释线程发生了什么吗？是因为一些内部调度方案吗？如何让线程正常运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T22:12:18.983

线程应该正常启动和运行。例如，运行这个程序

```
#lang racket

(thread (lambda ()
          (for ([i 10])
            (sleep 2)
            (printf "thread 1\n"))))

(thread (lambda ()
          (for ([i 20])
            (sleep 1)
            (printf "thread 2\n")))) 
```

应该向您显示两个线程同时运行。

# django - 是否可以对使用 Django 的复选框进行检查/取消选中操作？

> ID：12186555
> 
> 赞同：0
> 
> 时间：2012-08-29T21:08:20.210
> 
> 标签：django

我在 detail.html 上有一个简单的复选标记框。当我按下“发送”按钮时，它会将我带到 results.html。在 Django 中，当我选中和取消选中复选框时，是否可以绕过“发送”按钮并定向到 results.html？

这是 detail.html {% csrf_token %}

results.html 看起来像这样：

```
<ul>
{% for choice in poll %}
    <li>{{ choice }} </li>
{% endfor %}
</ul> 
```

view.py 看起来像这样：

```
from django.shortcuts import render_to_response
from django.core.context_processors import csrf

def handle(request):
artists = {}
if request.method == 'POST':
    artists = request.POST.getlist('artists')
return render(request, 'polls/results.html', {'poll': artists}) 
```

urls.py 看起来像这样：

```
from django.conf.urls import patterns, url
from django.conf import settings

urlpatterns = patterns('',
    url(r'^detail/$', 'django.views.generic.simple.direct_to_template', {'template': 'polls/detail.html'}),
    url(r'^results/$', 'polls.views.handle'),
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:10:10.460

这与 Django 无关。您需要编写一些 Javascript 来监听`onclick`复选框的事件并进行`location.href`相应的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T22:49:16.393

页面加载后发生的操作无法由 Django 处理。使用 Javascript 通过 AJAX 请求与 Django 对话。

# jsp - 请求的资源在 Tomcat 上不可用

> ID：12186563
> 
> 赞同：3
> 
> 时间：2012-08-29T21:08:52.650
> 
> 标签：jsp, tomcat, resources, struts, struts-1

我正在尝试使 Struts 教程正常工作，但是当我尝试在 Tomcat 中运行该文件时遇到以下错误。

`The requested resource () is not available.`

**Tomcat 日志输出：**

```
Aug 29, 2012 9:55:37 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\GTK2-Runtime\bin;c:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;.
Aug 29, 2012 9:55:37 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:StrutsExample1' did not find a matching property.
Aug 29, 2012 9:55:37 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Aug 29, 2012 9:55:37 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1367 ms
Aug 29, 2012 9:55:37 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Aug 29, 2012 9:55:37 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Aug 29, 2012 9:55:38 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Aug 29, 2012 9:55:39 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Aug 29, 2012 9:55:39 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/56  config=null
Aug 29, 2012 9:55:39 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1468 ms 
```

**我的`web.xml`文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>StrutsExample1</display-name>

  <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
      <param-name>config</param-name>
      <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
 </servlet>

  <servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

**`struts-config.xml`：**

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
          "http://struts.apache.org/dtds/struts-config_1_3.dtd">

<struts-config>

    <form-beans>
        <form-bean name="helloWorldForm" type="com.vaannila.form.HelloWorldForm"/>
    </form-beans>

    <global-forwards>
        <forward name="helloWorld" path="/helloWorld.do"/>
    </global-forwards>

    <action-mappings>
        <action path="/helloWorld" type="com.vaannila.action.HelloWorldAction" name="helloWorldForm">
            <forward name="success" path="/helloWorld.jsp" />
        </action>
    </action-mappings>

</struts-config> 
```

我将 Tomcat 作为 Eclipse 的插件运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-19T21:42:08.567

servlet 映射`*.do`只是通过扩展映射资源。讯息

```
The requested resource () is not available 
```

显示资源路径为空。请求的资源是 Web 应用程序根。

即使您有欢迎文件`index.jsp`，它也可能不会被 Tomcat 加载。它也可能不存在。

如果您使用的是 Struts 框架，则不应直接访问 JSP，而要访问 Struts 动作，您应该指定映射到动作的有效 URL。即`http://localhost:8080/StrutsExample1/helloworld.do`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T00:56:38.990

你是在服务器上运行.java文件吗) 文件包含一些 .java 文件的方法。浏览器只能运行 .html（或 .jsp）文件。

# c++ - getline() 即使在 clear() 之后也会先跳过

> ID：12186568
> 
> 赞同：12
> 
> 时间：2012-08-29T21:09:13.190
> 
> 标签：c++, arrays, char, buffer, getline

所以我有一个函数可以不断跳过第一个 getline 并直接跳到第二个。我试图清除缓冲区但仍然没有运气，这是怎么回事？

```
void getData(char* strA, char* strB)
{
    cout << "Enter String 1: ";               // Shows this line
    cin.clear();
    cin.getline(strA, 50);                    // 50 is the character limit, Skipping Input

    cout << endl << "Enter String 2: ";       // Showing This Line
    cin.clear();
    cin.getline(strB, 50);                   // Jumps Straight to this line
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T21:12:30.390

确保您没有使用`cin >> str`. 在调用函数之前。如果你使用`cin >> str`然后想使用`getline(cin, str)`，你必须先调用`cin.ignore()`。

```
string str;
cin >> str;
cin.ignore(); // ignores \n that cin >> str has lefted (if user pressed enter key)
getline(cin, str); 
```

如果使用 c 字符串：

```
char buff[50];
cin.get(buff, 50, ' ');
cin.ignore();
cin.getline(buff, 50); 
```

**ADD**：你的错误可能不在函数本身，而是*在*调用函数之前。流必须在 first 中`cin`只读取一个换行符。`\n'``cin.getline`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:23:17.900

`cin.clear();`清除流上的任何错误位 - 它不消耗任何可能未决的数据。

您想用于使用`cin.ignore()`流中的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:18:56.190

在您阅读某些内容后，bufor 内仍有“返回”字符，因此您必须`cin.ignore()`在每次阅读后进行。

您也可以使用`cin.sync()`来清除流。实际上清除方法只清除标志。

还有一个选项是您可以转到流的末尾，没有什么可读的，您应该毫无问题地编写。

```
std::cin.seekg(0, std::ios::end); 
```

您将使用什么取决于您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T19:38:30.063

使用`cin.ignore(-1);`它不会删除输入字符串的第一个字符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-15T08:58:42.660

在使用 get 行进行更大输入后，cin 会导致错误。因此，在 getline 之后使用此代码将输入队列和下降位恢复正常。

```
cin.getline(a,5);
    while(getchar()!='\n');
    cin.clear(); 
```

运行一个while循环以从队列中删除所有字符 cin.ignore() 导致进一步输入出现问题，而 cin.clear() 只是重置fallbit

# ruby-on-rails - 关系；无法从数据库中获取所有事件

> ID：12186573
> 
> 赞同：0
> 
> 时间：2012-08-29T21:09:36.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的模型是；

```
class region
has_many :cities
end

class event
belongs_to :city
end

class city
has_many :events
belongs_to :region
end 
```

事件控制器

```
def index   
    @region = Region.find(params[:region_id])
    @cities = @region.cities
    @city = City.find(params[:city_id])
    @events = @city.events  
    @events_by_date = @events.group_by(&:start_on)

  end 
```

页面：region/x/cities/x/events

显示来自城市的所有事件。

问题：如何在我的 /region/events 页面上显示所有城市的所有事件？我创建了一个资源

```
resources :regions do 
  resources :events do
  collection do
     get 'all_events'
  end
end 
```

但是我如何在事件控制器中定义“all_event”动作？

我不能在我的 eventcontroller @events = @cities.events 中执行此操作，因为 event belongs_to :city。有解决方案吗？

我试过这个：

控制器：

```
@region = Region.find(1)
@events = Event.includes(:city)
@events_by_date = @events.group_by(&:published_on) 
```

看法：

```
%ul.property_list
                  - @events_by_date[date].each do |event|
                    %li.restaurant
                      %span.icon
                      %h5
                        = link_to event.title, polymorphic_path([@region, event.city.name, event]) 
```

错误：未定义的方法“region_Assisi_event_path”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:19:46.950

如果我正确理解这一点，您需要做的就是：

在您的控制器中

```
 def all_events
     @events = Event.includes(:city)
   end 
```

然后在您的视图中，使用一个块来访问所有实例

```
 @events.each do |event|
       event.name
       event.city.name   #not sure if you have a name attribute 
```

# c# - C# Selenium WebDriver FireFox Profile - 使用带身份验证的代理

> ID：12186579
> 
> 赞同：9
> 
> 时间：2012-08-29T21:10:15.110
> 
> 标签：c#, selenium, webdriver, selenium-firefoxdriver

当您在下面的代码中设置代理服务器参数时，如果您的代理服务器需要身份验证，那么 FireFox 将带来身份验证对话框，基本上您无法自动填写。那么无论如何设置**USERNAME**和**PASSWORD**？

```
FirefoxProfile profile = new FirefoxProfile();
String PROXY = "192.168.1.100:8080";
OpenQA.Selenium.Proxy proxy = new OpenQA.Selenium.Proxy();
proxy.HttpProxy=PROXY;
proxy.FtpProxy=PROXY;
proxy.SslProxy=PROXY;
profile.SetProxyPreferences(proxy);
FirefoxDriver driver = new FirefoxDriver(profile); 
```

如果您尝试将代理字符串格式化为类似的格式`http://username:pass@192.168.1.1:8080` ，则会收到错误，该字符串无效。所以我想知道一定有一种方法可以实现这一目标。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T14:41:14.607

```
 String PROXY = "http://login:pass@proxy:port";
        ChromeOptions options = new ChromeOptions();

        options.AddArguments("user-data-dir=path/in/your/system");

        Proxy proxy = new Proxy();

        proxy.HttpProxy = PROXY;
        proxy.SslProxy  = PROXY;
        proxy.FtpProxy  = PROXY;

        options.Proxy = proxy;

        // Initialize the Chrome Driver
        using (var driver = new ChromeDriver(options)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-15T23:00:35.107

您可以为代理编写自己的 firefox 扩展，并从 selenium 启动。您需要编写 2 个文件并将其打包。

**背景.js**

```
var proxy_host = "YOUR_PROXY_HOST";
var proxy_port = YOUR_PROXY_PORT;

var config = {
    mode: "fixed_servers",
    rules: {
      singleProxy: {
        scheme: "http",
        host: proxy_host,
        port: proxy_port
      },
      bypassList: []
    }
 };

function proxyRequest(request_data) {
    return {
        type: "http",
        host: proxy_host, 
        port: proxy_port
    };
}

browser.proxy.settings.set({value: config, scope: "regular"}, function() {;});

function callbackFn(details) {
return {
    authCredentials: {
        username: "YOUR_USERNAME",
        password: "YOUR_PASSWORD"
    }
};
}

browser.webRequest.onAuthRequired.addListener(
        callbackFn,
        {urls: ["<all_urls>"]},
        ['blocking']
);

browser.proxy.onRequest.addListener(proxyRequest, {urls: ["<all_urls>"]}); 
```

**清单.json**

```
{
  "name": "My Firefox Proxy",
  "version": "1.0.0b",
  "manifest_version": 2,
  "permissions": [
    "browsingData",
    "proxy",
    "storage",
    "tabs",
    "webRequest",
    "webRequestBlocking",
    "downloads",
    "notifications",
    "<all_urls>"
  ],
  "background": {
    "scripts": ["background.js"]
  },
  "browser_specific_settings": {
    "gecko": {
      "id": "myproxy@example.org"
    }
  }
} 
```

* * *

接下来，您需要将这些文件打包到 DEFLATED 模式下以*.xpi*结尾的压缩存档，如**my_proxy_extension.xpi**。

你有两个选择：

1.  签署你的扩展 [在这里你可以阅读更多关于验证扩展和扩展结构的信息](https://stackoverflow.com/questions/30865644/firefox-extension-xpi-file-structure-description-contents-creation-and-inst/31043045#31043045)

    **或者**

2.  运行无符号。对于这一步：

    *   打开 Firefox 标志`about:config`并将选项**xpinstall.signatures.required**设置为**false**

    **或者**

    *   在以下位置更新 Firefox 配置文件：

        **Windows**：C:\Program Files\Mozilla Firefox\defaults\pref\channel-prefs.js

        **Linux**：/etc/firefox/syspref.js

    将下一行添加到文件末尾：

    **pref("xpinstall.signatures.required",false);**

在此步骤之后运行 selenium 并安装此扩展：

```
FirefoxProfile profile = new FirefoxProfile();

profile.addExtension(new File("path/to/my_proxy_extension.xpi"));

driver = new FirefoxDriver(profile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T03:20:21.817

您可以做的是创建配置文件并将身份验证数据保存在其中。如果您的配置文件名为“webdriver”，您可以在初始化时从代码中选择它：

```
ProfilesIni allProfiles = new ProfilesIni(); 
FirefoxProfile profile = allProfiles.getProfile("WebDriver"); 
profile.setPreferences("foo.bar",23);
WebDriver driver = new FirefoxDriver(profile); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-12T16:12:51.380

在没有 AutoIt 的情况下使用 MS UI 自动化做到了：

```
public void AuthInProxyWindow (string login, string pass)
    {
        var proxyWindow = AutomationElement.RootElement
            .FindFirst(TreeScope.Subtree,
                new PropertyCondition(AutomationElement.ClassNameProperty, "MozillaDialogClass"));

        var edits = proxyWindow.FindAll(TreeScope.Subtree,
            new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.Edit));

        var unamePoint = edits[1].GetClickablePoint();
        Mouse.MoveTo(new Point((int) unamePoint.X, (int) unamePoint.Y));
        Mouse.Click(MouseButton.Left);

        SendKeys.SendWait(login);
        var pwdPoint = edits[2].GetClickablePoint();
        Mouse.MoveTo(new Point((int) pwdPoint.X, (int) pwdPoint.Y));
        Mouse.Click(MouseButton.Left);
        SendKeys.SendWait(pass);

        Keyboard.Press(Key.Return);
        Logger.Debug("Authefication in Firefox completed succesfully");
    } 
```

[通过Microsoft.TestApi](https://www.nuget.org/packages/Microsoft.TestApi/)移动鼠标

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-05T08:26:29.633

要阻止 Firefox 为您提供身份验证弹出窗口，请确保您将代理 URL 设置为在设置阶段包含身份验证详细信息，如下所示：

```
var myProxy = user + ":" + pass + "@" + proxyIP + ":" + proxyPORT;
options.SetPreference("network.proxy.type", 1);
options.SetPreference("network.proxy.http", myProxy);
options.SetPreference("network.proxy.http_port", proxyPORT);
options.SetPreference("general.useragent.override", useragent);
driver = new FirefoxDriver(driverService, options); 
```

# jquery - 用位置值计算元素，乘以匹配元素的数量

> ID：12186581
> 
> 赞同：1
> 
> 时间：2012-08-29T21:10:18.973
> 
> 标签：jquery, size, position, each

我在弄清楚如何获取与值匹配的元素数量时遇到了一些麻烦。这是我的粗略代码：

```
var $numElements = $('#casestudy-content article').length;
console.log($numElements);
$('#casestudy-content article').each(function() {
    var $leftElements = $(this).position().left;
    if ( $leftElements === 0 ) {
        console.log($leftElements);
    }
}); 
```

所以我可以计算总共有多少元素。我可以找到位置为 0 的元素......但我不知道如何计算返回 0 的元素。我需要找到多少元素 = left: 0; 并将其乘以一个数字。有什么建议么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:13:19.803

你可以使用`filter`方法。

```
var len = $('#casestudy-content article').filter(function() {
               return $(this).position().left === 0
          }).length 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:13:38.680

```
var leftAlignedElements = 0;
$('#casestudy-content article').each(function(){
   if($(this).position().left === 0){
      leftAlignedElements++;
   }
});

console.log(leftAlignedElements); 
```

# objective-c - 应用程序未运行时推送通知 - launchOptions 字典为空

> ID：12186582
> 
> 赞同：5
> 
> 时间：2012-08-29T21:10:18.810
> 
> 标签：objective-c, ios, ios5, push-notification, ios5.1

我在这里阅读了一些关于在应用程序未运行时接收推送通知的问题（比在后台更多，这意味着它已完全关闭）。[这个问题尤其](https://stackoverflow.com/q/9184309/877472)有助于弄清楚如何使用 launchOptions 字典确定一个人是否正在接收。

但是，我很困惑，我完全承认这可能是我的一个重大疏忽：当我的设备在应用程序关闭时收到此应用程序的推送通知，然后我打开我的应用程序时，launchOptions 字典是一个空指针。从前面提到的链接中接受的答案的描述以及其他地方，我认为我应该能够看到通知有效负载；但是什么都没有。我正在为 iOS 5.1.1 开发。

我唯一的另一个想法是检查启动时的徽章数量（大于零，做某事......），但这似乎非常不可靠。

谁能告诉我我错过了什么？预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T21:25:20.763

`application:didFinishLaunchingWithOptions:`由于通知而启动应用程序时，只会使用有效负载信息调用。例如，如果用户点击通知警报（在通知中心添加）或`content-avialble = 1`在有效负载中收到的通知（报亭通知）并且如果您的应用不在前台也不在后台，则可能会发生这种情况。

如果您的应用在后台运行时收到通知。如果是报亭通知，或者如果用户点击警报的操作按钮，则调用下面的方法

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

不`[[UIApplication sharedApplication] applicationState]`等于`UIApplicationStateActive`。

在上述情况下，如果用户没有点击通知警报的操作按钮并通过点击它来启动应用程序，则不会调用`didFinishLaunchingWithOptions`或`didReceiveRemoteNotification`调用。

如果您的应用在前台`didReceiveRemoteNotification`调用时收到通知，则`[[UIApplication sharedApplication] applicationState]`等于`UIApplicationStateActive`.

对于徽章 in `notification`，如果您的应用程序未运行，则不会执行任何代码，并且徽章在应用程序图标中增加 1。当您启动应用程序（点击应用程序图标）`didFinishLaunchingWithOptions`时，通常会调用它。（如果收到通知时应用在后台或前台，同上）

所以我认为这涵盖了所有可能的情况。另请注意，背景案例适用于`iOS SDK >= 4.0`

# ajax - 在 Node.js 中使用 Websocket 进行资源管理

> ID：12186591
> 
> 赞同：3
> 
> 时间：2012-08-29T21:11:04.280
> 
> 标签：ajax, node.js, backbone.js, websocket, socket.io

我目前正在使用 express-static 来提供静态内容，并使用 express-resource 来处理来自我的骨干模型的所有 ajax 请求。我希望我的网站充满活力，所以显然是时候在问题上抛出一些 websockets (socket.io) 了！

在这样做的同时，我注意到我的代码中有很多冗余，并且不相信我需要所有这些 ajax 调用了。我一直在考虑用 websockets 完全替换我的 ajax 请求！

看起来很简单，用 socket.emit 调用替换默认的主干同步。ezpz

我的问题是，对于使用 websockets 进行资源管理（如在 express-resource 中）的正确方法有什么想法吗？

我最好的想法是让 url 包含“操作”（新建、创建、显示、编辑、更新、销毁），例如“show/resourceName/resourceId”或“destroy/resourceName/resourceId”。

有什么想法吗？欢迎大家发表意见！（作为说明，我同意这不适用于某些移动运营商、旧版本的 IE 以及其他让我们开发人员感到沮丧的限制）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:32:49.500

不确定你是否已经看过这个，但是有一个项目是 Backbone.sync 的覆盖和一个使用 socket.io 的服务器端组件：

[https://github.com/scttnlsn/backbone.io](https://github.com/scttnlsn/backbone.io)

如果它不能直接对您有用，它肯定包含一些想法和指导。

# javascript - 在跨子域上将 JS 变量从子 Iframe 传递给父 JSP

> ID：12186596
> 
> 赞同：0
> 
> 时间：2012-08-29T21:11:29.753
> 
> 标签：javascript, localhost, parent-child

我被困在 1 个位置，需要一些帮助。我在 apache tomcat 服务器上创建了两个子域，例如 server.xml 中的 domain1.localhost.com 和 domain2.localhost.com。在 domain1 上，我有一个包含 iFrame（托管在 domain2 上）的 JSP。我们如何将 JS 变量从子 Iframe 传递到父 JSP 并将其存储在托管在 domain1.localhost.com 上的 JSP 的本地变量中？

我尝试在两个 JSP 上定义 document.domain = "localhost" 但没有奏效。由于明显的跨域策略，即使父 DOM 窗口在子 iFrame（子域上）中也不可用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:21:31.110

很抱歉，但我认为这是不可能的。但也许你可以解释你想要达到的目标，也许我们可以想出一些替代方案:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:37:12.350

您使用的确切域名结构是什么？如果您使用 mydomain.localhost，则无法使用 .localhost 作为域名的共享部分，因为它是一级域。如果您使用的是 mydomain.localhost.com ，那么共享部分（document.domain）应该是 "localhost.com" ，而不仅仅是您在问题中提到的 "localhost" 。document.domain 应该可以正常工作，但是即使您有两个不同的域，例如 company1.com 和 company2.com，仍然可以在[EasyXDM](http://easyxdm.net/wp/)的帮助下将值从 iframe 传递给父级。

# html - HTML表格定位和列间距

> ID：12186599
> 
> 赞同：2
> 
> 时间：2012-08-29T21:11:44.480
> 
> 标签：html, html-table

在我的代码的“表格样式”部分，有没有办法调整表格中列之间的空间？另外，我应该输入什么属性来确保表格位置与左侧和顶部完全对齐？

```
<table style="width: 960px; height: 81px;" border="0"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:15:40.833

对于当前和未来的兼容性，请使用 CSS：

```
// cellspacing
table { border-collapse:separate; border-spacing: 5px; } 
```

要确保表格与左侧和顶部对齐，请删除所有顶部和左侧边距。您可能还想根据表需要存在的位置更改定位（位置：相对或位置：绝对）。

参考：[边框折叠](https://developer.mozilla.org/en-US/docs/CSS/border-collapse)| [边框间距](https://developer.mozilla.org/en-US/docs/CSS/border-spacing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:15:30.187

`cellpadding`控制单元格内部的间隙并`cellspacing`控制它们之间的空间。

```
<table style="width: 960px; height: 81px;" border="0" cellpadding="0" cellspacing="0"> 
```

至于对齐，您可以在表格单元格中控制它：

```
<td align="left" valign="top"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T21:14:24.367

您可以尝试使用 cellspacing 属性来创建空间

# heroku - 使用 Heroku Toolbelt 返回特定的配置变量

> ID：12186600
> 
> 赞同：0
> 
> 时间：2012-08-29T21:11:54.237
> 
> 标签：heroku, environment-variables, config

这是一个超级快速的问题，我在 Heroku 文档的任何地方都找不到答案。是否有像这样的单行命令`heroku config`可以接受变量名作为参数并仅返回该特定配置变量的值，而不是整个列表？

例如，类似：

```
heroku config:show CLOUDANT_URL 
```

可能会返回：

```
https://<username>.heroku:<password>@app<number>.heroku.cloudant.com 
```

或者如果没有，有谁知道如何扩展 Heroku Toolbelt 并编写一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:41:53.677

已经几个月了，但是，根据[Heroku 文档](https://devcenter.heroku.com/articles/config-vars#setting-up-config-vars-for-a-deployed-application "Heroku 文档")，

```
$ heroku config:get GITHUB_USERNAME
joesmith 
```

我只是自己用过。希望有帮助！

# javascript - 如何在单击时从输入字段中删除最后一个字符？

> ID：12186603
> 
> 赞同：3
> 
> 时间：2012-08-29T21:12:22.850
> 
> 标签：javascript

我有一个表单，当单击按钮时，它会在输入字段中输入一个值。我想添加另一个按钮来删除添加的最后一个字符。我将如何使用 jQuery 完成此任务

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T22:02:18.067

```
<script>
function addTextTag(txt)
{
document.getElementById("text_tag_input").value+=txt;
}
function removeTextTag()
{
var strng=document.getElementById("text_tag_input").value;
document.getElementById("text_tag_input").value=strng.substring(0,strng.length-1)
}
</script>

<input id="text_tag_input" type="text" name="tags" />

    <div class="tags_select">
    <a href="javascript:addTextTag('1')">1</a>
    <a href="javascript:addTextTag('2')">2</a>
    <a href="javascript:addTextTag('3')">3</a>
    <a href="javascript:removeTextTag()">delete</a>
</div>​ 
```

使用您的代码本身的修改版本尝试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T21:18:24.717

简单的答案是，如果您使用的是 jquery，请执行以下操作：

```
//select the button, add a click event
$('#myButtonId').on('click',function () { 
    //get the input's value
    var textVal = $('#myInputId').val();
    //set the input's value
    $('#myInputId').val(textVal.substring(0,textVal.length - 1));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T22:26:08.400

```
var lastChar = function (x) {
        "use strict";
        var a = document.getElementById(x),
            b = a.value;
        a.value = b.substring(0, b.length - 1);
    }; 
```

不需要 jQuery。x 变量是您要破坏的输入的 id。

# php - 如何在 PHP 中解码格式错误的字符串

> ID：12186604
> 
> 赞同：2
> 
> 时间：2012-08-29T21:12:26.073
> 
> 标签：php, iconv

我有一个充满编码错误的数据库，并且在试图反向查找原始数据时不知所措。

这是来自土耳其的示例地址。

```
MÃ?Â¼ze MÃ?Â¼dÃ?Â¼rlÃ?Â¼Ã?Å¸Ã?Â¼
KonyaltÃ?Â± Cad.
MuratpaÃ?Å¸a
Antalya 
```

**更新**

问题有两个方面。

1.  原始`latin1_swedish_ci`表格中的字符损坏。即字符集之外的字符。
2.  在 phpMyAdmin 导出/导入期间双 utf-8 编码。

后者的解决方案似乎是：

```
$str = str_replace('?', chr(194).chr(131), $str);
$str = utf8_decode(utf8_decode($str)); 
```

这并不能解决最初的损坏问题，即编码信息已丢失，正如@cleong 所建议的那样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:17:02.660

我假设您的数据库是 MySQL。您是否更新了编码并尝试了？首先检查您是否可以让它正确显示在 MySQL 中。将编码/排序规则设置为 UTF-8，使用 phpmyadmin 或 MySQL CLI 查询并检查其外观。

# google-chrome-extension - Chrome 扩展绑定到表单提交

> ID：12186609
> 
> 赞同：1
> 
> 时间：2012-08-29T21:12:53.283
> 
> 标签：google-chrome-extension, submit, bind

我正在编写一个 chrome 扩展，当用户提交表单时需要做一些工作。我有一个在后台运行的内容脚本，它运行以下代码：

```
$(document.body).on('submit', 'form', function () {
         doWork();
}); 
```

这在大多数网站上都能完美运行，但在 twitter 的登录表单上会中断。但奇怪的是，它并没有完全崩溃。如果我**单击**twitter 上的“登录”按钮，该`doWork()`功能将运行。但是，如果我**按 Enter**提交表单，`doWork()`则永远不会运行。

在我努力调试的过程中，我将我的代码复制并粘贴到开发工具中以重新绑定该函数，并查看它是否有效。确实如此——即使使用回车，新的绑定也有效。

我的下一个想法是，也许 jQuery.on 没有处理通过 javascript 创建的元素*（假设按钮通过 javascript 提交了一个隐藏的动态创建的表单，而不是可见的表单，出于某种原因）*。因此，我像上面一样重新启动事件，但添加了一行以提醒我提交表单的类名 - 所有表单在 twitter 登录页面上都有唯一的类名。

不幸的是，您可能已经猜到了，单击“登录”与按 Enter 会以相同的类名发出警报 - 因此，无论我以哪种方式看待它，我都有一个绑定到该表单提交的事件，但出于某种疯狂的原因当我按下回车键时没有被调用。

# sql - 如何通过查询添加列，该查询计算 MS ACCESS 2007 中具有循环关系的表中具有特定条件的总行数

> ID：12186610
> 
> 赞同：0
> 
> 时间：2012-08-29T21:12:58.407
> 
> 标签：sql, ms-access, ms-access-2007

我有一个包含以下字段的简单表“员工”：

```
ID, ParentID, Name 
```

ParentID 为 Nullable，因为员工可能没有经理。此表与自身具有一对多关系：

```
ID --one--to--many--> ParentID 
```

现在我想要一个返回这些列的查询：

名称，其 ParentID 等于当前行 ID 的行数（该行是该行的管理器）

样品表：

```
ID | ParentID | Name
======================
 1 |     0    | John
----------------------
 2 |     1    | Bob
----------------------
 3 |     1    | Alice
----------------------
 4 |     3    | Jack 
```

这样我可以找到一个员工是多少其他员工的经理。结果应该是这样的：

```
Name  | Count of Employees
==========================
John  |   2
--------------
Bob   |   0
--------------
Alice |   1
--------------
Jack  |   0 
```

如何在 MS ACCESS 2007 中实现这一点？* 我尝试过内置查询生成器，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:21:22.673

所以你只想计算一个经理有多少员工？

您将不得不将表连接到自身。它可以在查询生成器中完成，但 SQL 语句将更容易放在这里。

```
SELECT [Employees].Name, [Employees].ParentID, [Employees].Name, Count([Employees1].ParentID) AS NoOfEmployees
FROM [Employees] LEFT JOIN [Employees] AS [Employees1] ON [Employees].ID = [Employees1].ParentID
GROUP BY [Employees].ID, [Employees].ParentID, [Employees].Name; 
```

我从表中添加了另外两个列，并将计数列重命名为 NoOfEmployees。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:16:44.050

你的意思是：

```
 SELECT t1.ID, t2.ParentID 
 FROM Employees t1 
 LEFT JOIN Employees t2
 ON t1.ID = t2.ParentID 
```

数数你会说

```
 SELECT t1.ID, Count(t2.ParentID)
 FROM Employees t1 
 LEFT JOIN Employees t2
 ON t1.ID = t2.ParentID
 GROUP BY t1.ID 
```

# c# - WinRT 相当于这些 .Net 培养方法吗？

> ID：12186612
> 
> 赞同：5
> 
> 时间：2012-08-29T21:13:05.577
> 
> 标签：c#, .net, windows-runtime, currentculture

.NET 框架中这些项目的 WinRT 等效项是什么？

```
CultureInfo.CurrentCulture.LCID
Encoding.GetEncoding(int codePage)
Encoding.CodePage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:04:06.800

AFAIK LCID 在 Silverlight 中也消失了，至少在 Windows Phone 上是这样，如果你真的需要它 - 你必须从像[这里](http://msdn.microsoft.com/en-us/goglobal/bb964664.aspx)这样的文档中获取一个表格。

与编码相同 - 您需要将名称映射到代码页，例如使用[此处](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Text.Encoding%29;k%28TargetFrameworkMoniker-.NETCore,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:46:39.133

LCID 和代码页在 WinRT 中已弃用。您应该从 LCID 迁移到使用语言名称。您应该从使用代码页编码迁移到 Unicode 编码（UTF-8、UTF-16）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T18:06:29.063

[这里是 .NET Framework 支持](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Text.Encoding%29;k%28TargetFrameworkMoniker-.NETCore,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)的编码映射：

```
class CodePage
{
    public static string GetEncodingString(int codePage)
    {
        string encodingString = null;
        switch (codePage)
        {
            case 37:
                encodingString = "IBM037"; // IBM EBCDIC (US-Canada)
                break;
            case 437:
                encodingString = "IBM437"; // OEM United States
                break;
            case 500:
                encodingString = "IBM500"; // IBM EBCDIC (International)
                break;
            case 708:
                encodingString = "ASMO-708"; // Arabic (ASMO 708)
                break;
            case 720:
                encodingString = "DOS-720"; // Arabic (DOS)
                break;
            case 737:
                encodingString = "ibm737"; // Greek (DOS)
                break;
            case 775:
                encodingString = "ibm775"; // Baltic (DOS)
                break;
            case 850:
                encodingString = "ibm850"; // Western European (DOS)
                break;
            case 852:
                encodingString = "ibm852"; // Central European (DOS)
                break;
            case 855:
                encodingString = "IBM855"; // OEM Cyrillic
                break;
            case 857:
                encodingString = "ibm857"; // Turkish (DOS)
                break;
            case 858:
                encodingString = "IBM00858"; // OEM Multilingual Latin I
                break;
            case 860:
                encodingString = "IBM860"; // Portuguese (DOS)
                break;
            case 861:
                encodingString = "ibm861"; // Icelandic (DOS)
                break;
            case 862:
                encodingString = "DOS-862"; // Hebrew (DOS)
                break;
            case 863:
                encodingString = "IBM863"; // French Canadian (DOS)
                break;
            case 864:
                encodingString = "IBM864"; // Arabic (864)
                break;
            case 865:
                encodingString = "IBM865"; // Nordic (DOS)
                break;
            case 866:
                encodingString = "cp866"; // Cyrillic (DOS)
                break;
            case 869:
                encodingString = "ibm869"; // Greek, Modern (DOS)
                break;
            case 870:
                encodingString = "IBM870"; // IBM EBCDIC (Multilingual Latin-2)
                break;
            case 874:
                encodingString = "windows-874"; // Thai (Windows)
                break;
            case 875:
                encodingString = "cp875"; // IBM EBCDIC (Greek Modern)
                break;
            case 932:
                encodingString = "shift_jis"; // Japanese (Shift-JIS)
                break;
            case 936:
                encodingString = "gb2312"; // Chinese Simplified (GB2312) *
                break;
            case 949:
                encodingString = "ks_c_5601-1987"; // Korean
                break;
            case 950:
                encodingString = "big5"; // Chinese Traditional (Big5)
                break;
            case 1026:
                encodingString = "IBM1026"; // IBM EBCDIC (Turkish Latin-5)
                break;
            case 1047:
                encodingString = "IBM01047"; // IBM Latin-1
                break;
            case 1140:
                encodingString = "IBM01140"; // IBM EBCDIC (US-Canada-Euro)
                break;
            case 1141:
                encodingString = "IBM01141"; // IBM EBCDIC (Germany-Euro)
                break;
            case 1142:
                encodingString = "IBM01142"; // IBM EBCDIC (Denmark-Norway-Euro)
                break;
            case 1143:
                encodingString = "IBM01143"; // IBM EBCDIC (Finland-Sweden-Euro)
                break;
            case 1144:
                encodingString = "IBM01144"; // IBM EBCDIC (Italy-Euro)
                break;
            case 1145:
                encodingString = "IBM01145"; // IBM EBCDIC (Spain-Euro)
                break;
            case 1146:
                encodingString = "IBM01146"; // IBM EBCDIC (UK-Euro)
                break;
            case 1147:
                encodingString = "IBM01147"; // IBM EBCDIC (France-Euro)
                break;
            case 1148:
                encodingString = "IBM01148"; // IBM EBCDIC (International-Euro)
                break;
            case 1149:
                encodingString = "IBM01149"; // IBM EBCDIC (Icelandic-Euro)
                break;
            case 1200:
                encodingString = "utf-16"; // Unicode *
                break;
            case 1201:
                encodingString = "unicodeFFFE"; // Unicode (Big endian) *
                break;
            case 1250:
                encodingString = "windows-1250"; // Central European (Windows)
                break;
            case 1251:
                encodingString = "windows-1251"; // Cyrillic (Windows)
                break;
            case 1252:
                encodingString = "Windows-1252"; // Western European (Windows) *
                break;
            case 1253:
                encodingString = "windows-1253"; // Greek (Windows)
                break;
            case 1254:
                encodingString = "windows-1254"; // Turkish (Windows)
                break;
            case 1255:
                encodingString = "windows-1255"; // Hebrew (Windows)
                break;
            case 1256:
                encodingString = "windows-1256"; // Arabic (Windows)
                break;
            case 1257:
                encodingString = "windows-1257"; // Baltic (Windows)
                break;
            case 1258:
                encodingString = "windows-1258"; // Vietnamese (Windows)
                break;
            case 1361:
                encodingString = "Johab"; // Korean (Johab)
                break;
            case 10000:
                encodingString = "macintosh"; // Western European (Mac)
                break;
            case 10001:
                encodingString = "x-mac-japanese"; // Japanese (Mac)
                break;
            case 10002:
                encodingString = "x-mac-chinesetrad"; // Chinese Traditional (Mac)
                break;
            case 10003:
                encodingString = "x-mac-korean"; // Korean (Mac) *
                break;
            case 10004:
                encodingString = "x-mac-arabic"; // Arabic (Mac)
                break;
            case 10005:
                encodingString = "x-mac-hebrew"; // Hebrew (Mac)
                break;
            case 10006:
                encodingString = "x-mac-greek"; // Greek (Mac)
                break;
            case 10007:
                encodingString = "x-mac-cyrillic"; // Cyrillic (Mac)
                break;
            case 10008:
                encodingString = "x-mac-chinesesimp"; // Chinese Simplified (Mac) *
                break;
            case 10010:
                encodingString = "x-mac-romanian"; // Romanian (Mac)
                break;
            case 10017:
                encodingString = "x-mac-ukrainian"; // Ukrainian (Mac)
                break;
            case 10021:
                encodingString = "x-mac-thai"; // Thai (Mac)
                break;
            case 10029:
                encodingString = "x-mac-ce"; // Central European (Mac)
                break;
            case 10079:
                encodingString = "x-mac-icelandic"; // Icelandic (Mac)
                break;
            case 10081:
                encodingString = "x-mac-turkish"; // Turkish (Mac)
                break;
            case 10082:
                encodingString = "x-mac-croatian"; // Croatian (Mac)
                break;
            case 12000:
                encodingString = "utf-32"; // Unicode (UTF-32) *
                break;
            case 12001:
                encodingString = "utf-32BE"; // Unicode (UTF-32 Big endian) *
                break;
            case 20000:
                encodingString = "x-Chinese-CNS"; // Chinese Traditional (CNS)
                break;
            case 20001:
                encodingString = "x-cp20001"; // TCA Taiwan
                break;
            case 20002:
                encodingString = "x-Chinese-Eten"; // Chinese Traditional (Eten)
                break;
            case 20003:
                encodingString = "x-cp20003"; // IBM5550 Taiwan
                break;
            case 20004:
                encodingString = "x-cp20004"; // TeleText Taiwan
                break;
            case 20005:
                encodingString = "x-cp20005"; // Wang Taiwan
                break;
            case 20105:
                encodingString = "x-IA5"; // Western European (IA5)
                break;
            case 20106:
                encodingString = "x-IA5-German"; // German (IA5)
                break;
            case 20107:
                encodingString = "x-IA5-Swedish"; // Swedish (IA5)
                break;
            case 20108:
                encodingString = "x-IA5-Norwegian"; // Norwegian (IA5)
                break;
            case 20127:
                encodingString = "us-ascii"; // US-ASCII *
                break;
            case 20261:
                encodingString = "x-cp20261"; // T.61
                break;
            case 20269:
                encodingString = "x-cp20269"; // ISO-6937
                break;
            case 20273:
                encodingString = "IBM273"; // IBM EBCDIC (Germany)
                break;
            case 20277:
                encodingString = "IBM277"; // IBM EBCDIC (Denmark-Norway)
                break;
            case 20278:
                encodingString = "IBM278"; // IBM EBCDIC (Finland-Sweden)
                break;
            case 20280:
                encodingString = "IBM280"; // IBM EBCDIC (Italy)
                break;
            case 20284:
                encodingString = "IBM284"; // IBM EBCDIC (Spain)
                break;
            case 20285:
                encodingString = "IBM285"; // IBM EBCDIC (UK)
                break;
            case 20290:
                encodingString = "IBM290"; // IBM EBCDIC (Japanese katakana)
                break;
            case 20297:
                encodingString = "IBM297"; // IBM EBCDIC (France)
                break;
            case 20420:
                encodingString = "IBM420"; // IBM EBCDIC (Arabic)
                break;
            case 20423:
                encodingString = "IBM423"; // IBM EBCDIC (Greek)
                break;
            case 20424:
                encodingString = "IBM424"; // IBM EBCDIC (Hebrew)
                break;
            case 20833:
                encodingString = "x-EBCDIC-KoreanExtended"; // IBM EBCDIC (Korean Extended)
                break;
            case 20838:
                encodingString = "IBM-Thai"; // IBM EBCDIC (Thai)
                break;
            case 20866:
                encodingString = "koi8-r"; // Cyrillic (KOI8-R)
                break;
            case 20871:
                encodingString = "IBM871"; // IBM EBCDIC (Icelandic)
                break;
            case 20880:
                encodingString = "IBM880"; // IBM EBCDIC (Cyrillic Russian)
                break;
            case 20905:
                encodingString = "IBM905"; // IBM EBCDIC (Turkish)
                break;
            case 20924:
                encodingString = "IBM00924"; // IBM Latin-1
                break;
            case 20932:
                encodingString = "EUC-JP"; // Japanese (JIS 0208-1990 and 0212-1990)
                break;
            case 20936:
                encodingString = "x-cp20936"; // Chinese Simplified (GB2312-80) *
                break;
            case 20949:
                encodingString = "x-cp20949"; // Korean Wansung *
                break;
            case 21025:
                encodingString = "cp1025"; // IBM EBCDIC (Cyrillic Serbian-Bulgarian)
                break;
            case 21866:
                encodingString = "koi8-u"; // Cyrillic (KOI8-U)
                break;
            case 28591:
                encodingString = "iso-8859-1"; // Western European (ISO) *
                break;
            case 28592:
                encodingString = "iso-8859-2"; // Central European (ISO)
                break;
            case 28593:
                encodingString = "iso-8859-3"; // Latin 3 (ISO)
                break;
            case 28594:
                encodingString = "iso-8859-4"; // Baltic (ISO)
                break;
            case 28595:
                encodingString = "iso-8859-5"; // Cyrillic (ISO)
                break;
            case 28596:
                encodingString = "iso-8859-6"; // Arabic (ISO)
                break;
            case 28597:
                encodingString = "iso-8859-7"; // Greek (ISO)
                break;
            case 28598:
                encodingString = "iso-8859-8"; // Hebrew (ISO-Visual) *
                break;
            case 28599:
                encodingString = "iso-8859-9"; // Turkish (ISO)
                break;
            case 28603:
                encodingString = "iso-8859-13"; // Estonian (ISO)
                break;
            case 28605:
                encodingString = "iso-8859-15"; // Latin 9 (ISO)
                break;
            case 29001:
                encodingString = "x-Europa"; // Europa
                break;
            case 38598:
                encodingString = "iso-8859-8-i"; // Hebrew (ISO-Logical) *
                break;
            case 50220:
                encodingString = "iso-2022-jp"; // Japanese (JIS) *
                break;
            case 50221:
                encodingString = "csISO2022JP"; // Japanese (JIS-Allow 1 byte Kana) *
                break;
            case 50222:
                encodingString = "iso-2022-jp"; // Japanese (JIS-Allow 1 byte Kana - SO/SI) *
                break;
            case 50225:
                encodingString = "iso-2022-kr"; // Korean (ISO) *
                break;
            case 50227:
                encodingString = "x-cp50227"; // Chinese Simplified (ISO-2022) *
                break;
            case 51932:
                encodingString = "euc-jp"; // Japanese (EUC) *
                break;
            case 51936:
                encodingString = "EUC-CN"; // Chinese Simplified (EUC) *
                break;
            case 51949:
                encodingString = "euc-kr"; // Korean (EUC) *
                break;
            case 52936:
                encodingString = "hz-gb-2312"; // Chinese Simplified (HZ) *
                break;
            case 54936:
                encodingString = "GB18030"; // Chinese Simplified (GB18030) *
                break;
            case 57002:
                encodingString = "x-iscii-de"; // ISCII Devanagari *
                break;
            case 57003:
                encodingString = "x-iscii-be"; // ISCII Bengali *
                break;
            case 57004:
                encodingString = "x-iscii-ta"; // ISCII Tamil *
                break;
            case 57005:
                encodingString = "x-iscii-te"; // ISCII Telugu *
                break;
            case 57006:
                encodingString = "x-iscii-as"; // ISCII Assamese *
                break;
            case 57007:
                encodingString = "x-iscii-or"; // ISCII Oriya *
                break;
            case 57008:
                encodingString = "x-iscii-ka"; // ISCII Kannada *
                break;
            case 57009:
                encodingString = "x-iscii-ma"; // ISCII Malayalam *
                break;
            case 57010:
                encodingString = "x-iscii-gu"; // ISCII Gujarati *
                break;
            case 57011:
                encodingString = "x-iscii-pa"; // ISCII Punjabi *
                break;
            case 65000:
                encodingString = "utf-7"; // Unicode (UTF-7) *
                break;
            case 65001:
                encodingString = "utf-8"; // Unicode (UTF-8) *
                break;
        }

        return encodingString;
    }
} 
```

# javascript - 可以使用 FB JS SDK 在 FB iframe 中获取您的页面的引荐来源网址吗？

> ID：12186621
> 
> 赞同：0
> 
> 时间：2012-08-29T21:13:58.090
> 
> 标签：javascript, facebook, sdk

我已经在 google 和 SO 上搜索了很长一段时间，但似乎找不到关于如何做的答案，而且我知道可以做到（crazyegg.com 似乎能够引入推荐人）。有谁知道使用他们的 JS SDK 是否允许我这样做？谢谢！

# python - Python同时增加两个字符串

> ID：12186624
> 
> 赞同：5
> 
> 时间：2012-08-29T21:14:14.130
> 
> 标签：python, for-loop

我希望能够同时进行`list1 = list('asdf')`交互`list2 = list('qwer')`。最好的方法是什么？

```
for i, p in list1, list2:
    print(i,p) 
```

哪里`i`是 increment`list1`和哪里`p`是 increment `list2`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T21:15:16.943

使用[`zip`](http://docs.python.org/library/functions.html#zip)（或者[`itertools.izip`](http://docs.python.org/library/itertools.html#itertools.izip)如果两个列表很大）：

```
for i, p in zip(list1, list2):
    print(i, p) 
```

或者， if`list1`可能与`list2`使用[`izip_longest`from的长度不同`itertools`](http://docs.python.org/library/itertools.html#itertools.izip_longest)

# objective-c - 在标题中声明子视图控制器的属性

> ID：12186625
> 
> 赞同：0
> 
> 时间：2012-08-29T21:14:19.193
> 
> 标签：objective-c, xcode

`NameSubViewController`并`NameSubView`添加到`ViewController.m`：

```
#import "NameSubViewController.h"
#import "NameSubView.h"

...

 - (void)viewDidLoad
{
[super viewDidLoad];

NameSubViewController *nameController = [[NameSubViewController alloc] initWithNibName:@"NameSubViewController" bundle:nil];
NameSubView *nameSubView = (NameSubView *)[nameController view];
} 
```

但我想为它们创建属性，以便我可以从视图的每个部分访问它们。写什么`ViewController.h`来声明那里的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:16:46.443

。H

```
@property (nonatomic, retain) NameSubView *nameSubView; 
```

.m 下划线`@implementation`

```
@synthesize nameSubView; 
```

# objective-c - 声明 extern NSString 会导致链接器错误

> ID：12186631
> 
> 赞同：15
> 
> 时间：2012-08-29T21:14:53.923
> 
> 标签：objective-c, ios, xcode, boolean

这太荒谬了，我试图创建一个声音布尔来打开应用程序声音。我不断得到

```
Undefined symbols for architecture i386:
"_kPlaySoundPrefsKey", referenced from:
  -[AppDelegate application:didFinishLaunchingWithOptions:] in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经检查了我的所有文件是否都在构建阶段链接，我已经删除了 appdelegate .m，在我什至在我的任何视图控制器中调用 bool 之前我得到了错误，并在构建阶段重新导入它。检查我有相关的框架。我什至检查了我使用相同代码制作的以前的应用程序，它的代码似乎完全相同，没有错误（使用以前版本的 xcode 构建）。回到基础，只要将以下代码添加到我的 App Delegate，我就会收到错误消息，

。H

```
#import <UIKit/UIKit.h>
extern NSString *kPlaySoundPrefsKey;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

.m

```
#import "AppDelegate.h"
#import <AudioToolbox/AudioToolbox.h> 

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
 {

NSDictionary *defaultDict = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]
 forKey:kPlaySoundPrefsKey];

return YES;
} 
```

如果我改变`extern NSString *kPlaySoundPrefsKey;`它 `NSString *kPlaySoundPrefsKey;`构建然后崩溃......我现在没有想法

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-30T00:53:14.760

当您`extern`在告诉编译器类型并且您将在其他地方定义它时声明某些内容时。在您的情况下，您永远不会定义变量。

因此，在您的 .h 中，您将拥有：

```
extern NSString* kPlaySoundPrefsKey; 
```

但是在某些 .m 中，您还必须拥有

```
NSString* kPlaySoundPrefsKey = @"play_sounds"; // or some value 
```

由于在您的情况下这些是常量，您还可以指定：

```
extern NSString* const kPlaySoundPrefsKey; 
```

和

```
NSString* const kPlaySoundPrefsKey = @"play_sounds"; 
```

如果有人写过类似的东西，添加 const 限定符会导致编译器错误

```
kPlaySoundPrefsKey = @"some_other_value"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T08:29:32.013

I am also got the same error even if I am properly declared and define the extern const string , The problem is, my constant file not in the compile source list .

**Make sure that your .m file appears in the "Compile Sources" Build Phase for your build target. Sometimes, adding files to a project in Xcode doesn't add all implementation files to the appropriate targets.**

Hope this will helpful for some people. Refe: [linker-error-undefined-symbols-symbols-not-found](https://stackoverflow.com/questions/10357311/linker-error-undefined-symbols-symbols-not-found)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T00:44:49.943

首先，确保它已定义：

```
// AppDelegate.h
extern NSString* const kPlaySoundPrefsKey; // << declaration

// AppDelegate.m
NSString * const kPlaySoundPrefsKey = @"kPlaySoundPrefsKey";  // << definition 
```

也可以看看：

[仅“extern const”与“extern”](https://stackoverflow.com/questions/7296197/extern-const-vs-extern-only/7296223#7296223)

[关于 Objective-C 项目中使用的 extern 的 3 个问题](https://stackoverflow.com/questions/7330048/3-questions-about-extern-used-in-a-objective-c-project/7330190#7330190)

[在 Objective-C 代码中使用外部“C”的链接器错误](https://stackoverflow.com/questions/7376003/linker-error-using-extern-c-in-objective-c-code/7376015#7376015)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T08:50:26.393

谢谢你们的帮助

我添加了

`NSString *kPlaySoundPrefsKey = @"playSoundKey";`

`[[NSUserDefaults standardUserDefaults] registerDefaults:defaultDict];`

到应用程序委托。那解决了它

# asp.net - asp-Url 路由不重定向到资源 - 在本地工作但不在托管服务器上

> ID：12186632
> 
> 赞同：0
> 
> 时间：2012-08-29T21:15:00.897
> 
> 标签：asp.net, url-routing

```
void RegisterRoutes(RouteCollection routes)
{      
    routes.MapPageRoute("cats", "categories/{ct1}/{ct2}", "~/mypage1.aspx", false, new RouteValueDictionary { {"catname",""}});
    routes.MapPageRoute("lists", "lists/{li1}/{li2}", "~/mypage2.aspx", false, new RouteValueDictionary { {"liname",""}});       
} 
```

我已经注册了路线

```
protected void Application_Start(object sender, EventArgs e)
{  
    RegisterRoutes(RouteTable.Routes);  
} 
```

但问题是第一条路线完美运行，但它说`resource not found`在第二条路线
中令人讨厌的是它正在找到正确的路线，因为如果我评论第二条路线，那么它将给出`compile`没有匹配路线的时间错误。我试图用不同的方法重定向到路线，但没有一个有效..
这是有效的

```
<a href='<%# GetRouteUrl("cats",new {ct=Eval("Category_Id"),catname=Eval("Category_Name")}) %>' 
```

但这不是

```
<a href='<%# GetRouteUrl("lists",new {lid= Eval("List_Id"),liname=Eval("List_Name_Url")}) %>'> 
```

即使从后面的代码中它也不起作用..
我什至更改了路线并添加了1个参数并进行了相应更改，但仍然没有找到它..我什至从`lists`路线中删除了可选参数设置，但仍然无法正常工作..检查下面的链接

[到那里检查](http://www.superduper10.com)

单击`readmore`按钮或链接`jquerytab`或`image`
它正在工作`local`..
它如何在本地而不是在服务器上工作......即使我将服务器的连接字符串放在我的本地计算机中，它也不起作用....它可以工作本地与本地连接字符串..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:26:11.930

您的“阅读更多”网址存在问题，请尝试允许“。” 在 web.config 中：

看到这是有效的：

[http://www.superduper10.com/lists/1/top-ten-european-cities-to-visit](http://www.superduper10.com/lists/1/top-ten-european-cities-to-visit)

如果您使用的是 .NET 4.0，则可以在 web.config 的 system.web 部分中设置此标志，**它将允许您在 url 末尾添加点**：

```
<httpRuntime relaxedUrlToFileSystemMapping="true" /> 
```

看到这个：

[“没有找到您要查的资源。” url 末尾有“点”时出错](https://stackoverflow.com/questions/429963/the-resource-cannot-be-found-error-when-there-is-a-dot-at-the-end-of-the-ur)

# java - 启动扩展 SherlockMapActivity 的 Activity 会引发 NoClassDefFoundError 异常

> ID：12186633
> 
> 赞同：3
> 
> 时间：2012-08-29T21:15:04.237
> 
> 标签：java, android, actionbarsherlock, actionbarsherlock-map

我正在尝试使用 SherlockMapActivity 在地图活动上使用 Sherlock 操作栏。但是，当从 SherlockMapActivity 扩展的活动启动时，会抛出 NoClassDefFoundError 异常，告诉我找不到该类。

当我更改实现并使用普通 MapActivity 作为基类时，活动开始时没有任何问题。

我将 actionbarsherlock-plugin-maps-4.0.0.jar 包含在 lib 文件夹中，并将其包含在类路径中。还包括支持库 4。Sherlock 操作栏适用于不从 SherlockMapActivity 扩展的所有其他活动。

我现在不知道这是否重要，使用 Sherlock 操作栏的地图活动是图书馆项目的一部分。

有什么想法吗？

**更新**

```
08-29 23:08:38.326: E/AndroidRuntime(8862): FATAL EXCEPTION: main
08-29 23:08:38.326: E/AndroidRuntime(8862): java.lang.NoClassDefFoundError: com.appandmore.android.storefinder.core.ui.activity.RadiusStoreActivity
08-29 23:08:38.326: E/AndroidRuntime(8862):     at com.appandmore.android.storefinder.core.ui.activity.HomeActivity.onClick(HomeActivity.java:70)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at android.view.View.performClick(View.java:2506)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at android.view.View$PerformClick.run(View.java:9112)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at android.os.Handler.handleCallback(Handler.java:587)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at android.os.Looper.loop(Looper.java:130)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at android.app.ActivityThread.main(ActivityThread.java:3835)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at java.lang.reflect.Method.invoke(Method.java:507)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
08-29 23:08:38.326: E/AndroidRuntime(8862):     at dalvik.system.NativeStart.main(Native Method) 
```

**更新 2**

我暂时用一个简单的地图活动替换了地图活动，不包含自定义代码，只是扩展了 SherlockMapActivty。它因同样的原因而崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:07:42.723

您必须将 .jar 文件保存在 .jar 文件之后`libs`而不是`lib`文件夹中`ADT-17`。此外，构建路径不是强制性的，它将自行管理。

# objective-c - 设置分页控制

> ID：12186634
> 
> 赞同：0
> 
> 时间：2012-08-29T21:15:09.027
> 
> 标签：objective-c, ios, uiview, uiscrollview, uipagecontrol

我正在尝试设置 Page Control，并且我使用 Apple 的 Page Control 示例作为跳板来集成到我的应用程序中。

我的主要问题是，在 Apple 示例中它使用的是 initWithXib，而我不再使用它了。我在故事板上画了它，并将它链接到我在加载 scrollViewPage 时指向的类。然而它没有出现？有没有像 Xib 这样的 initWithStoryboard？

经过研究，我尝试了initWithCoder，但它不起作用或我编码错误。

任何指导将不胜感激。

谢谢！艾伦

# android - 修改联系人不起作用 (java.lang.NullPointerException)

> ID：12186641
> 
> 赞同：2
> 
> 时间：2012-08-29T21:15:34.390
> 
> 标签：android, exception, android-contacts, contactscontract, rawcontacts

我在 Android 中编辑联系人时遇到问题。我正在使用`contentProviderOperation`with `newUpdate`，但它不起作用。它仅在该字段已有内容时才有效。如果我填写了一个字段，请删除它，然后保存并再次尝试编辑它，我发现它没有保存，这就是我得到异常的时候。

这是我必须编辑的代码：

```
 if (emailantigo.equals("") && !email.equals("")) {
debug("email " + email);
            debug("id " + contactId);
            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValue(ContactsContract.RawContacts.CONTACT_ID, contactId)
                    .withValue(ContactsContract.CommonDataKinds.Email.TYPE,
                            ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                            .withValue(
                                    ContactsContract.Data.MIMETYPE,
                                    ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                                    .withValue(ContactsContract.CommonDataKinds.Email.ADDRESS,
                                            email).build());
        } else if (!email.equals(emailantigo)) {
debug("email " + email);
            debug("id " + contactId);
            ops.add(ContentProviderOperation
                    .newUpdate(ContactsContract.Data.CONTENT_URI)
                    .withSelection(
                            ContactsContract.RawContacts.CONTACT_ID
                            + "=? AND "
                                    + ContactsContract.Data.MIMETYPE
                                    + "='"
                                            + ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE
                                            + "'",
                                            new String[] { String.valueOf(contactId) })
                                            .withValue(ContactsContract.CommonDataKinds.Email.TYPE,
                                                    ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                                                    .withValue(
                                                            ContactsContract.Data.MIMETYPE,
                                                            ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                                                            .withValue(ContactsContract.CommonDataKinds.Email.ADDRESS,
                                                                    email).build());
        }
        try {
            cr.applyBatch(ContactsContract.AUTHORITY, ops);
        } catch (Exception e) {
            e.printStackTrace();
        }
    public void debug(String msg) {
            Log.i("CONTATOS", msg);
        } 
```

这是我从 LogCat 得到的异常：

```
java.lang.NullPointerException
android.os.Parcel.readException(Parcel.java:1266)
android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
android.database.DatabaseUtils.readExceptionWithOperationApplicationExceptionFromParcel(DatabaseUtils.java:137)
android.content.ContentProviderProxy.applyBatch(ContentProviderNative.java:460)
android.content.ContentProviderClient.applyBatch(ContentProviderClient.java:95)
android.content.ContentResolver.applyBatch(ContentResolver.java:622) 
```

** 编辑 2 **

自己找到解决方案

有效的部分代码：

```
Cursor cursorEmail = cr.query(
                ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
                ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = "
                        + contactId, null, null);

        if (cursorEmail.moveToFirst()) {
            if (!email.equals(emailantigo))
                key_email = ops
                        .add(ContentProviderOperation
                                .newUpdate(ContactsContract.Data.CONTENT_URI)
                                .withSelection(
                                        ContactsContract.Data.CONTACT_ID
                                                + "=? AND "
                                                + ContactsContract.Data.MIMETYPE
                                                + "=? AND "
                                                + ContactsContract.CommonDataKinds.Email.TYPE
                                                + "=?",
                                        new String[] {
                                                String.valueOf(contactId),
                                                ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE,
                                                String.valueOf(ContactsContract.CommonDataKinds.Email.TYPE_WORK) })
                                .withValue(
                                        ContactsContract.Data.MIMETYPE,
                                        ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                                .withValue(
                                        ContactsContract.CommonDataKinds.Email.TYPE,
                                        ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                                .withValue(
                                        ContactsContract.CommonDataKinds.Email.ADDRESS,
                                        email).build());
        }
        cursorEmail.close();

        if (!key_email && emailantigo.equals("") && !email.equals(emailantigo)) {
            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                    .withValue(ContactsContract.Data.RAW_CONTACT_ID,
                            String.valueOf(contactId))
                    .withValue(
                            ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Email.ADDRESS,
                            email)
                    .withValue(ContactsContract.CommonDataKinds.Email.TYPE,
                            ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                    .build());
        } 
```

newInsert 不适用于 Data._ID 或 Data.Contact_ID，我不知道为什么，这背后一定有一些逻辑，但它现在可以工作了^^！

Obs：未在同步联系人中测试。

# java - 中断 Java DataInputStream readFully()

> ID：12186643
> 
> 赞同：9
> 
> 时间：2012-08-29T21:15:49.973
> 
> 标签：java, blocking, datainputstream

我有一个从服务器流式传输视频 (MJPEG) 的 Java 小程序。我用 C#（Windows 服务）编写了一个代理服务器，用于放置在小程序和多个视频服务器之间。HTML/CSS/Js 前端与 Java 小程序一起使用。所有功能都可以正常工作（终于！！！），除了一件事。

视频服务器允许您通过 REST 接口播放录制的视频。剪辑完成后，服务器会保持连接打开，以防您要向其发送诸如倒带或搜索之类的命令。剪辑在小程序中播放良好，直到结束。如果您尝试开始一个新剪辑（这需要从 Javscript 向小程序发送命令），浏览器会冻结。但是，使用相同连接的后续命令会起作用，例如播放、暂停和搜索。如果我停止 Windows 服务，浏览器会再次响应。

这就是我*假设*正在发生的事情：剪辑结束（或暂停）；不再发送数据，但连接仍处于活动状态。小程序在代理上等待下一帧，但代理在视频服务器上等待下一帧，不会再发送任何数据。

这是读取每一帧的while循环中的代码

```
byte[] img = new byte[mContentLength];
inputStream.skipBytes(headerLen);
inputStream.readFully(img); 
```

我需要以某种方式中断这段代码。

当在 HTML 前端选择一个新的视频剪辑时，我们会通知小程序，它会调用 CameraStream 类的 disconnect()。这就是那个功能：

```
// DataInputStream inputStream
// HttpURLConnection conn
public void disconnect() {
    System.out.println("disconnect called.");
    if(running) {
        running = false;
        try {
            // close the socket
            if(inputStream != null) {
                inputStream.close();
            }
            if(conn != null) {
                conn.disconnect();
            }
            inputStream = null;
            System.out.println("closed.");
        } catch(Exception ignored) {
            System.out.println("exc:" + ignored.getMessage());
            main.reportErrorFromThrowable(ignored);
        }
    }
} 
```

为了测试这一点，我让一个快速剪辑播放并运行到最后。然后我选择一个新剪辑。在我的 Java 控制台中，我得到了输出`disconnect called.`，但没有得到后续`closed.`消息，也没有捕获到通用异常。当我停止 Windows 服务时，我终于收到了`closed.`消息，所以看起来像是`inputStream.close();`被阻塞了。

所以我想我的问题是如何停止阻塞？通话是否被`readFully(img)`阻塞？或者它是断开功能（如我得到的控制台输出所建议的那样）？

**编辑：**澄清一下，我编写了 Java 小程序、HTML、CSS、Javascript 和 C# 代理服务器，因此我可以访问所有这些代码。我无法修改的唯一代码是视频服务器上的 REST 接口。

**edit2：**我打算为这篇文章提供赏金[https://stackoverflow.com/questions/12219758/proxy-design-pattern](https://stackoverflow.com/questions/12219758/proxy-design-pattern)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:26:00.380

一般来说，Java I/O 方法是阻塞的。最好的解决方案似乎是创建另一个线程来读取数据并使用 NIO 缓冲区。基于 NIO 的读取示例（警告：未经测试！）：

```
// get the InputStream from somewhere (a queue possibly)
ReadableByteChannel inChannel = Channels.newChannel(inputStream);
ByteBuffer buf = ByteBuffer.allocate(mContentLength + headerLen);
inChannel.read(buf);
byte[] img = new byte[mContentLength];
inChannel.get(img, headerLen, mContentLength); 
```

`Channel`此代码从 中创建一个`InputStream`并使用`Channel`来读取数据。该`ReadableByteChannel.read(ByteBuffer)`函数的 JavaDoc 说中断包含调用的线程`inChannel.read(buf)`将停止读取。

您将不得不调整此代码，我只是将其从脑海中拉出来。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:01:35.803

我终于想出了答案：

```
public void disconnect() {
    if(running) {
        running = false;
        try {
            try{
                // had to add this
                conn.getOutputStream().close();
            }
            catch(Exception exc){
            }
            // close the socket
            if(inputStream != null) {
                inputStream.close();
            }
            if(conn != null) {
                conn.disconnect();
            }
            inputStream = null;

        } catch(Exception ignored) {
            main.reportErrorFromThrowable(ignored);
        }
    }
} 
```

Even though I'm using an HttpUrlConnection, which is one way and doesn't have an output stream, trying to close the output stream raised an exception and for some reason made it all work.

# node.js - express.js 中的多语言路由？

> ID：12186644
> 
> 赞同：19
> 
> 时间：2012-08-29T21:15:55.847
> 
> 标签：node.js, express, localization

我想知道是否有关于如何在 express.js 中实现多语言路由的最佳实践示例。我想使用`accept-language`标题来获取浏览器语言，然后自动重定向到相应的语言路径，比如

`www.foo.bar/de/startseite`或者 `www.foo.bar/en/home`

对此有何建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T14:51:29.963

我已经完成了以下操作：安装 i18n-node 模块并在 express js 中注册。这是代码。

```
var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , i18n = require("i18n");

  var app = express();

i18n.configure({
    // setup some locales - other locales default to en silently
    locales:['de', 'en'],
    // disable locale file updates
    updateFiles: false
});

app.configure(function(){
  ...
  app.use(i18n.init);
  ...
});
// register helpers for use in templates
app.locals({
  __i: i18n.__,
  __n: i18n.__n
}); 
```

在此之后设置以下内容以获取所有请求

```
// invoked before each action
app.all('*', function(req, res, next) {
    // set locale
    var rxLocal = /^\/(de|en)/i;
    if(rxLocal.test(req.url)){
        var arr = rxLocal.exec(req.url);
        var local=arr[1];
        i18n.setLocale(local);
    } else {
        i18n.setLocale('de');
    }
    // add extra logic
    next();
});

app.get(/\/(de|en)\/login/i, routes.login); 
```

也许这有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T22:21:25.173

我只是直接以检测到的语言提供内容。

例如，`example.com/home`以最佳可用的方式提供主页`Accept-Language`（如果您在网站本身上提供语言选择选项，可能会被 cookie 覆盖）。

您需要确保响应的`Vary:`标题包括`Accept-Language`.

IMO，在 URI 中包含语言代码是一个丑陋的黑客。RFC 的意图是单个*资源*（您的主页）普遍由单个 URI 表示。为 URI 返回的实体可能会根据其他信息（例如语言首选项）而有所不同。

考虑当讲德语的用户复制 URL 并将其发送给讲英语的用户时会发生什么。该收件人更愿意以英文查看您的网站，但由于他收到了指向 的链接`example.com/de/startseite`，因此他直接访问了德文版本。

显然，这对于用户在地址栏中看到的内容的完全国际化并不理想（因为*home*是英文），但它更符合 RFC 的意图，我认为它对用户更有效，尤其是作为链接在电子邮件/社交/其他地方传播。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-10T16:53:05.103

## 中间件推荐

@miro 的答案非常好，但可以在单独文件中的以下中间件中进行改进（如 @ebohlman 建议的那样）。

### 中间件

```
module.exports = {
  configure: function(app, i18n, config) {
    app.locals.i18n = config;
    i18n.configure(config);
  },
  init: function(req, res, next) {
    var rxLocale = /^\/(\w\w)/i;
    if (rxLocale.test(req.url)){
      var locale = rxLocale.exec(req.url)[1];
      if (req.app.locals.i18n.locales.indexOf(locale) >= 0)
        req.setLocale(locale);
    }
    //else // no need to set the already default
    next();
  },
  url: function(app, url) {
    var locales = app.locals.i18n.locales;
    var urls = [];
    for (var i = 0; i < locales.length; i++)
      urls[i] = '/' + locales[i] + url;
    urls[i] = url;
    return urls;
  }
}; 
```

也在[github](https://github.com/Wtower/express-experiment/blob/master/services/i18n_urls.js)的示例项目中。

### 解释

中间件具有三个功能。第一个是一个小助手，它配置`i18n-node`并保存设置`app.locals`（还没有弄清楚如何从`i18n-node`它自己访问设置）。

主要的是第二个，它从 url 获取语言环境并将其设置在请求对象中。

最后一个是帮助器，对于给定的 url，它返回一个包含所有可能语言环境的数组。例如，用我们调用它`'/about'`会得到`['/en/about', ..., '/about']`.

### 如何使用

在`app.js`：

```
// include
var i18n = require('i18n');
var services = require('./services');

// configure
services.i18nUrls.configure(app, i18n, {
  locales: ['el', 'en'],
  defaultLocale: 'el'
});

// add middleware after static
app.use(services.i18nUrls.init);

// router
app.use(services.i18nUrls.url(app, '/'), routes); 
```

[Github 链接](https://github.com/Wtower/express-experiment/blob/master/app.js)

可以从任何带有`i18n-node`'s 的控制器访问区域设置`req.getLocale()`。

### RFC

@josh3736 推荐的内容肯定符合 RFC 等。尽管如此，这对于许多 i18n 网站和应用程序来说是一个相当普遍的要求，甚至 Google 也尊重本地化并在不同 url 下提供的相同资源（可以在网站管理员工具中验证这一点）。不过，我建议在 lang 代码之后使用相同的别名，例如`/en/home`等`/de/home`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T21:41:20.183

不确定您计划如何组织或共享内容，但您可以将正则表达式与快速路由一起使用，然后提供不同的模板。像这样的东西：

```
app.get(/^\/(startseite|home)$/, function(req, res){

}); 
```

我做的一件事是用子域组织我的内容，然后使用中间件从基于拆分 url 的数据库中获取内容，但它们都共享相同的路由和模板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T02:07:38.747

编写一个中间件函数，解析任何“Accept-Language”标头，如果没有这样的标头，则将请求级局部变量设置为具有默认值（如“en”）的适当代码（如两字母语言代码）或者您不支持列出的任何语言。在您的路线中，检索本地文件并将其附加到任何模板文件名上，如果除了模板选择之外还有任何与语言相关的处理，则在其上进行分支。

# c# - 在 .Net 中限制打印数量

> ID：12186645
> 
> 赞同：0
> 
> 时间：2012-08-29T21:16:13.737
> 
> 标签：c#, .net

我需要一种允许用户仅打印 x 份文档的方法。

例如，用户单击一个按钮，它会打印 1 个图像副本。用户不能更改数量。

这适用于 .net Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:20:01.350

不能干干净净。如果不出意外，用户可以简单地“打印一次”到 PDF 文档渲染器或其他“打印机”，生成的 PDF 可以打印 N 次。用户可以截取屏幕截图并打印出来。即使您可以针对“打印”对话框编写脚本，但您不能，任何经验不足的用户都会绕过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:18:03.400

Web 浏览器的打印数量无法脚本化。

# algorithm - 他们使用什么技术来压缩 URL？

> ID：12186646
> 
> 赞同：0
> 
> 时间：2012-08-29T21:16:30.583
> 
> 标签：algorithm, compression

大多数网站使用什么算法/技术来压缩 URL？

Adfly 将 URL 缩短为“5Y8F2”，这非常棒。它产生了我见过的压缩程度最高的 URL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:26:52.553

您可以在 Wiki 中找到一条信息：[URL 缩短](http://en.wikipedia.org/wiki/URL_shortening)。

引用这篇文章：

> 有几种技术可以实现 URL 缩短。假设 26 个字母和 10 个数字，可以以 36 为基数生成密钥。在这种情况下，序列中的每个字符将是 0、1、2、...、9、a、b、c、...、y、z。或者，如果区分大写和小写字母，则每个字符可以表示以 62 为底的数字 (26 + 26 + 10) 内的单个数字。为了形成密钥，可以制作散列函数，或者生成随机数，使得密钥序列不可预测。或者用户可以提出他们自己的密钥。例如，[http](http://en.wikipedia.org/w/index.php?title=TinyURL&diff=283621022&oldid=283308287) ://en.wikipedia.org/w/index.php?title=TinyURL&diff=283621022&oldid=283308287可以缩短为[http://bit.ly/tinyurlwiki](http://bit.ly/tinyurlwiki)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T21:25:58.663

我认为他们不会压缩它，他们只是生成一个 URL 并将其映射到您压缩的真实 URL。因此，如果他们决定让它长 N 个字母，他们将能够支持（所有可能的 URL 字符）^N

# magento - 列出 Magento 中具有特定属性值的所有产品

> ID：12186647
> 
> 赞同：1
> 
> 时间：2012-08-29T21:16:31.693
> 
> 标签：magento, content-management-system

我想要做的是在产品列表页面的 Magento 中的分层导航下方添加一些链接。我的分层导航工作得很好，但我还有一些其他的项目组，我想在单击链接时列出它们。这些项目可以通过我添加的自定义属性来标识。例如，featured_product 列表。

# ruby - 如何从 Ruby 1.8 中的特定字符索引开始匹配正则表达式？

> ID：12186648
> 
> 赞同：1
> 
> 时间：2012-08-29T21:16:33.610
> 
> 标签：ruby, regex, ruby-1.8

在 Ruby 1.9 中，我会使用`String#match(regexp,start_index)`. 我确信在 Ruby 1.8 中必须有一个（计算效率高的）等价物，但我找不到它。你知道这是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:18:10.007

你可以开始正则表达式`^.{start_index}`

或在执行匹配之前先获取子字符串。

或者，如果您受限于使用 Ruby 1.8，但可以安装自己的库，那么您可以使用[Oniguruma](http://oniguruma.rubyforge.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:14:57.130

据我所知，在纯 Ruby 1.8 中，从任意索引开始，***没有有效的方法将正则表达式与大字符串进行匹配。***

这似乎是一个重大缺陷。我猜这个故事的寓意是：使用 Ruby 1.9！

# wordpress - 在 WordPress 多站点环境中自动创建博客

> ID：12186649
> 
> 赞同：1
> 
> 时间：2012-08-29T21:16:41.927
> 
> 标签：wordpress, plugins, registration

我正在寻找一种让用户在多站点设置上注册并自动为他们创建博客的方法……不，不是标准的 ms 注册系统处理它的方式。我想完全摆脱这个过程的第二步。[他们注册为“用户”，并在http://my.site.com/user](http://my.site.com/user)上为他们自动创建一个博客。

后续问题...有人知道自动修剪多站点平台的方法吗？IE，在“x”时间范围内（或在一定时间段过后）未登录的用户会自动删除他们的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:22:01.813

只需在 wordpress 安装后制作一份 Wordpress 文件和数据库布局的纯副本。当您拥有它时，用户完成注册后，只需将文件从原始目录（如“_original_wordpress”）复制到“username_dir”，然后创建新数据库或添加带有 username_ 前缀的表。此外，您还必须配置 config.php 或 wordpress 中包含数据库数据的任何内容。

至于第二个问题 - 使用 CRON。用 PHP 编写脚本，列出一个月前最后一次活动的所有用户，从 MySQL 中的数据库和目录“/username/”中删除表，然后它就消失了:) 这样它就可以定期执行，就像每个一样把它放在 CRON 中一天一次？

好吧，这只是解决您的任何问题的方法之一，但它看起来非常简单。

# c - 如何找出用于构建二进制文件的 *.c 和 *.h 文件？

> ID：12186656
> 
> 赞同：7
> 
> 时间：2012-08-29T21:17:32.540
> 
> 标签：c, linux, gcc, build

我正在构建一个构建多个共享库和可执行文件的项目。用于构建这些二进制文件的所有源文件都位于单个 /src 目录中。因此，要弄清楚哪些源文件用于构建每个二进制文件并不明显（存在多对多关系）。

**我的目标是编写一个脚本，为每个二进制文件解析一组 C 文件，并确保只从它们调用正确的函数。**

一种选择似乎是尝试从 Makefile 中提取此信息。但这不适用于生成的文件和标题（由于依赖于包含）。

另一种选择可能是简单地浏览调用图，但这会变得复杂，因为很多函数都是通过使用函数指针来调用的。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T21:38:49.583

您可以首先使用调试信息 (gcc -g) 编译您的项目，并使用`objdump`它来获取包含哪些源文件。

```
objdump -W <some_compiled_binary> 
```

Dwarf 格式应包含您要查找的信息。

```
 <0><b>: Abbrev Number: 1 (DW_TAG_compile_unit)
    < c>   DW_AT_producer    : (indirect string, offset: 0x5f): GNU C 4.4.3 
    <10>   DW_AT_language    : 1    (ANSI C)
    <11>   DW_AT_name        : (indirect string, offset: 0x28): test_3.c    
    <15>   DW_AT_comp_dir    : (indirect string, offset: 0x36): /home/auselen/trials    
    <19>   DW_AT_low_pc      : 0x82f0   
    <1d>   DW_AT_high_pc     : 0x8408   
    <21>   DW_AT_stmt_list   : 0x0 
```

在这个例子中，我从 test_3 编译了目标文件，它位于 .../trials 目录中。然后当然你需要围绕这个编写一些脚本来收集相关的源文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:22:02.203

这是一个想法，需要根据您的具体构建进行改进。进行构建，使用脚本（例如`script log.txt make clean all`）记录它。最后一个（或最后一个）步骤应该是目标文件的链接。（提示：寻找`cc -o <your_binary_name>`）。该行应该链接所有在你的树`.o`中应该有相应文件的文件。`.c`然后为所有包含的头文件 grep 这些`.c`文件。

如果您`.c`在树中的文件中有重复名称，那么我们需要查看链接器行中的完整路径或从`Makefile`.

Mahmood 下面的建议也应该有效。如果你有一个带有符号的图像，`strings <debug_image> | grep <full_path_of_src_directory>`应该给你一个 C 文件列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T21:23:22.207

首先，您需要将调试符号与刚刚编译的二进制文件分开。检查这个问题如何做到这一点： [如何在构建目标之外生成 gcc 调试符号？](https://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target)

然后你可以尝试自己解析这个文件。我知道如何为 Visual Studio 这样做，但是当您使用 GCC 时，我将无法进一步帮助您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T21:34:04.020

您可以使用 unix`nm`工具。它显示对象中定义的所有符号。所以你需要：

1.  在您的二进制文件上运行`nm`并获取所有未定义的符号
2.  在您的二进制文件上运行`ldd`以获取其所有动态依赖项的列表（您的二进制文件链接到的.so 文件）
3.  对您在步骤 2 中找到的`nm`每个文件运行。`.so`

这将为您提供二进制文件使用的*动态*符号的完整列表。

例子：

```
nm -C --dynamic /bin/ls
....skipping.....
00000000006186d0 A _edata
0000000000618c70 A _end
                 U _exit
0000000000410e34 T _fini
0000000000401d88 T _init
                 U _obstack_begin
                 U _obstack_newchunk
                 U _setjmp
                 U abort
                 U acl_extended_file
                 U bindtextdomain
                 U calloc
                 U clock_gettime
                 U closedir
                 U dcgettext
                 U dirfd 
```

ls 命令使用所有带有大写“U”的符号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T08:22:44.943

如果您的目标是分析 C 源文件，您可以通过自定义 GCC 编译器来实现。您可以为此目的使用[MELT](http://gcc-melt.org/)（MELT 是一种高级域特定语言来扩展 GCC）-在 GCC 中添加您自己的用 MELT 编码的分析通行证-但您应该首先了解 GCC 中端内部表示（Gimple、Tree , ...)。

Customizing GCC takes several days of work (mostly because GCC internals are quite complex in the details).

Feel free to ask me more about MELT.

# android - 片段中的 MapView

> ID：12186660
> 
> 赞同：0
> 
> 时间：2012-08-29T21:18:04.133
> 
> 标签：android, android-fragments, android-mapview

我试图获得`MapView`一个片段，但我不知道如何。当我研究这个时，我看到了对库的一些操作，但是它改变了我`Fragment`的扩展扩展`FragmentActivity`，然后一切都变得一团糟！

请帮助我编写代码，以便我可以`MapView`在片段中使用。

这是我的代码：

```
public class MyPlayerFrag extends Fragment{

    Context context;
    ImageView image;
    TextView caption;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        LinearLayout player_layout = (LinearLayout) inflater.inflate(com.idouchach.casa.tramway.R.layout.player, container, false);

        image = (ImageView) player_layout.findViewById(R.id.image_view);
        caption = (TextView) player_layout.findViewById(R.id.caption);

        return player_layout;
    }

    public void updateImage(Content content){
        if(image != null){
            try{
                Bitmap img = BitmapFactory.decodeStream(context.getAssets().open(content.getImg()));
                image.setImageBitmap(img);
                image.invalidate();
            }catch(Exception ex){
                ex.printStackTrace();
            }
        }
        if(caption != null)
            caption.setText(content.getTitle());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:11:55.103

抱歉，没有官方支持的将 a`MapView`放入片段的方法。

# python - 来自 Mac OS X 端口的 Django 和 python 2.7

> ID：12186662
> 
> 赞同：0
> 
> 时间：2012-08-29T21:18:08.930
> 
> 标签：python, django, macos, python-2.7, macports

我从 Mac OS X 10.7 上的端口安装了 Django 1.4.1 和 Python 2.7。当我尝试运行 manage.py runserver 8000 时，出现错误：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x10bb840d0>>
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/Library/Python/2.7/site-packages/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/Library/Python/2.7/site-packages/django/db/models/loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "/Library/Python/2.7/site-packages/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/rankor777/PycharmProjects/PyCart/PyCartApp/models.py", line 40, in <module>
    class Photo(models.Model):
  File "/Users/rankor777/PycharmProjects/PyCart/PyCartApp/models.py", line 41, in Photo
    title = models.Model(max_length=128)
  File "/Library/Python/2.7/site-packages/django/db/models/base.py", line 289, in __init__
    if args_len > len(self._meta.fields):
AttributeError: 'Model' object has no attribute '_meta' 
```

这是什么，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:31:44.543

我不知道您为什么认为这与 MacPorts 有关。回溯显示错误，该错误位于第 41 行`PyCartApp/models.py`：你已经把`models.Model(max_length=128)`我认为你打算放的地方`models.CharField(max_length=128)`。

# c++ - 在回溯中使用“delete”解除分配时出现“free()”错误

> ID：12186668
> 
> 赞同：1
> 
> 时间：2012-08-29T21:18:36.980
> 
> 标签：c++, debugging, ipopt

我从 gdb 收到以下错误：

```
*** glibc detected *** /.root0/autohome/u132/hsreekum/ipopt/ipopt/debug/Ipopt/examples/ex3/ex3: free(): invalid next size (fast): 0x0000000120052b60 *** 
```

这是回溯：

```
#0  0x000000555626b264 in raise () from /lib/libc.so.6
#1  0x000000555626cc6c in abort () from /lib/libc.so.6
#2  0x00000055562a7b9c in __libc_message () from /lib/libc.so.6
#3  0x00000055562aeabc in malloc_printerr () from /lib/libc.so.6
#4  0x00000055562b036c in free () from /lib/libc.so.6
#5  0x000000555561ddd0 in Ipopt::TNLPAdapter::~TNLPAdapter ()
   from /home/ba01/u132/hsreekum/ipopt/ipopt/build/lib/libipopt.so.1
#6  0x00000055556a9910 in Ipopt::GradientScaling::~GradientScaling ()
   from /home/ba01/u132/hsreekum/ipopt/ipopt/build/lib/libipopt.so.1
#7  0x00000055557241b8 in Ipopt::OrigIpoptNLP::~OrigIpoptNLP ()
   from /home/ba01/u132/hsreekum/ipopt/ipopt/build/lib/libipopt.so.1
#8  0x00000055556ae7f0 in Ipopt::IpoptAlgorithm::~IpoptAlgorithm ()
   from /home/ba01/u132/hsreekum/ipopt/ipopt/build/lib/libipopt.so.1
#9  0x0000005555602278 in Ipopt::IpoptApplication::~IpoptApplication ()
   from /home/ba01/u132/hsreekum/ipopt/ipopt/build/lib/libipopt.so.1
#10 0x0000005555614428 in FreeIpoptProblem ()
   from /home/ba01/u132/hsreekum/ipopt/ipopt/build/lib/libipopt.so.1
#11 0x0000000120001610 in main () at ex3.c:169` 
```

这是代码`Ipopt::TNLPAdapter::~TNLPAdapter ()`

```
 TNLPAdapter::~TNLPAdapter()
  {
    delete [] full_x_;
    delete [] full_lambda_;
    delete [] full_g_;
    delete [] jac_g_;
    delete [] c_rhs_;
    delete [] jac_idx_map_;
    delete [] h_idx_map_;
    delete [] x_fixed_map_;
    delete [] findiff_jac_ia_;
    delete [] findiff_jac_ja_;
    delete [] findiff_jac_postriplet_;
    delete [] findiff_x_l_;
    delete [] findiff_x_u_;
  } 
```

我的问题是：为什么使用`free()`时会抛出错误？另外，我想单步执行，以便查看导致错误的解除分配。我相信错误发生在外部库（IPOPT）中，但我已使用调试标志编译它；这足够了吗？`~TNLPAdapter()``delete[]``~TNLPAdapter()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:30:25.470

`new[]`/ 后面的原始内存分配/释放机制通常与/`delete[]`使用的相同。原始内存分配/释放函数的标准库实现/实际上可以直接调用和. 因此，即使您使用.`malloc``free``operator new[]``operator delete[]``malloc``free``free``delete []`

您收到的错误表明堆的完整性被违反。堆已损坏。问题的根源可能在这个函数中（双重释放？）或在一些完全不同的地方（双重释放或内存溢出？）。无法从您发布的代码中说出发生了什么。

找出`delete []`报告问题的特定调用，并查看是否有其他代码覆盖了该内存块。或者只是使用一些外部工具，如 valgrind 来抓捕罪犯。

# c# - 如何防止我的 Ackerman 函数溢出堆栈？

> ID：12186672
> 
> 赞同：5
> 
> 时间：2012-08-29T21:18:49.977
> 
> 标签：c#, recursion, stack-overflow

有没有办法让我的 Ackerman 函数不创建堆栈溢出是针对相对较小的数字，即 (4,2)。这是错误

> {无法计算表达式，因为当前线程处于堆栈溢出状态。}

```
private void  Button1Click(object sender, EventArgs e)
        {
            var t = Ackermann(4,2);
            label1.Text += string.Format(": {0}", t);
            label1.Visible = true;
        }

        int Ackermann(uint m, uint n)
        {
            if (m == 0)
                return  (int) (n+1);
            if (m > 0 && n == 0)
                return Ackermann(m - 1, 1);
            if (m > 0 && n > 0)
                return Ackermann(m - 1, (uint)Ackermann(m, n - 1));
            else
            {
                return -1;
            }
        } 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T00:27:50.553

避免的最好方法`StackOverflowException`是不使用堆栈。

让我们摆脱否定的情况，因为当我们调用时它是没有意义的`uint`。或者，如果我们将否定测试作为方法中的第一件事，在考虑其他可能性之前，下面的内容也将起作用：

首先，我们需要一艘更大的船：

```
 public static BigInteger Ackermann(BigInteger m, BigInteger n)
    {
        if (m == 0)
            return  n+1;
        if (n == 0)
            return Ackermann(m - 1, 1);
        else
            return Ackermann(m - 1, Ackermann(m, n - 1));
    } 
```

现在成功至少在数学上是可能的。现在，这个`n == 0`案例是一个足够简单的尾声。让我们手动消除它。我们将使用`goto`它，因为它是临时的，所以我们不必担心 velociraptors 或 Dijkstra：

```
 public static BigInteger Ackermann(BigInteger m, BigInteger n)
    {
    restart:
        if (m == 0)
            return  n+1;
        if (n == 0)
        {
            m--;
            n = 1;
            goto restart;
        }
        else
            return Ackermann(m - 1, Ackermann(m, n - 1));
    } 
```

这已经需要更长的时间来炸毁堆栈，但是炸毁它，它会的。不过看看这个表格，请注意，`m`递归调用的返回永远不会设置它，而`n`有时是。

扩展它，我们可以把它变成一个迭代形式，同时只需要处理跟踪以前的值`m`，并且我们将以递归形式返回的地方，我们以`n`迭代形式分配给。一旦我们用完`m`等待处理的 s，我们就返回 的当前值`n`：

```
 public static BigInteger Ackermann(BigInteger m, BigInteger n)
    {
        Stack<BigInteger> stack = new Stack<BigInteger>();
        stack.Push(m);
        while(stack.Count != 0)
        {
            m = stack.Pop();
            if(m == 0)
                n = n + 1;
            else if(n == 0)
            {
                stack.Push(m - 1);
                n = 1;
            }
            else
            {
                stack.Push(m - 1);
                stack.Push(m);
                --n;
            }
        }
        return n;
    } 
```

至此，我们已经回答了OP的问题。这将需要很长时间才能运行，但它会返回尝试过的值（m = 4，n = 2）。它永远不会抛出 a ，尽管它最终会在超过and`StackOverflowException`的某些值时耗尽内存。`m``n`

作为进一步的优化，我们可以跳过向堆栈添加一个值，只是在之后立即弹出它：

```
 public static BigInteger Ackermann(BigInteger m, BigInteger n)
    {
        Stack<BigInteger> stack = new Stack<BigInteger>();
        stack.Push(m);
        while(stack.Count != 0)
        {
            m = stack.Pop();
        skipStack:
            if(m == 0)
                n = n + 1;
            else if(n == 0)
            {
                --m;
                n = 1;
                goto skipStack;
            }
            else
            {
                stack.Push(m - 1);
                --n;
                goto skipStack;
            }
        }
        return n;
    } 
```

这对堆栈没有帮助，对堆也没有任何意义，但考虑到循环的数量，这个东西会对大值进行，我们可以剃掉的每一点都是值得的。

在保持优化的同时消除`goto`，留给读者练习:)

顺便说一句，我对这个测试太不耐烦了，所以我做了一个作弊表格，当 m 小于 3 时使用 Ackerman 函数的已知属性：

```
 public static BigInteger Ackermann(BigInteger m, BigInteger n)
    {
        Stack<BigInteger> stack = new Stack<BigInteger>();
        stack.Push(m);
        while(stack.Count != 0)
        {
            m = stack.Pop();
        skipStack:
            if(m == 0)
                n = n + 1;
            else if(m == 1)
                n = n + 2;
            else if(m == 2)
                n = n * 2 + 3;
            else if(n == 0)
            {
                --m;
                n = 1;
                goto skipStack;
            }
            else
            {
                stack.Push(m - 1);
                --n;
                goto skipStack;
            }
        }
        return n;
    } 
```

使用这个版本，我可以在一秒多后得到`true`for的结果`Ackermann(4, 2) == BigInteger.Pow(2, 65536) - 3`（Mono，Release build，在 Core i7 上运行）。鉴于非作弊版本在返回此类 值的正确结果方面是一致的`m`，我将此视为先前版本正确性的合理证据，但我将让它运行并查看。

编辑：当然，我真的不希望以前的版本在任何合理的时间范围内返回，但我想我还是让它继续运行，看看它的内存使用情况如何。6 小时后，它的大小正好低于 40MiB。我很高兴虽然显然不切实际，但如果在真机上有足够的时间，它确实会返回。

编辑：显然有人认为`Stack<T>`达到其 2³¹ 项目的内部限制也算作一种“堆栈溢出”。如果必须，我们也可以处理：

```
public class OverflowlessStack <T>
{
    internal sealed class SinglyLinkedNode
    {
        //Larger the better, but we want to be low enough
        //to demonstrate the case where we overflow a node
        //and hence create another.
        private const int ArraySize = 2048;
        T [] _array;
        int _size;
        public SinglyLinkedNode Next;
        public SinglyLinkedNode()
        {
            _array = new T[ArraySize];
        }
        public bool IsEmpty{ get{return _size == 0;} }
        public SinglyLinkedNode Push(T item)
        {
            if(_size == ArraySize - 1)
            {
                SinglyLinkedNode n = new SinglyLinkedNode();
                n.Next = this;
                n.Push(item);
                return n;
            }
            _array [_size++] = item;
            return this;
        }
        public T Pop()
        {
            return _array[--_size];
        }
    }
    private SinglyLinkedNode _head = new SinglyLinkedNode();

    public T Pop ()
    {
        T ret = _head.Pop();
        if(_head.IsEmpty && _head.Next != null)
            _head = _head.Next;
        return ret;
    }
    public void Push (T item)
    {
        _head = _head.Push(item);
    }
    public bool IsEmpty
    {
        get { return _head.Next == null && _head.IsEmpty; }
    }
}
public static BigInteger Ackermann(BigInteger m, BigInteger n)
{
    var stack = new OverflowlessStack<BigInteger>();
    stack.Push(m);
    while(!stack.IsEmpty)
    {
        m = stack.Pop();
    skipStack:
        if(m == 0)
            n = n + 1;
        else if(m == 1)
            n = n + 2;
        else if(m == 2)
            n = n * 2 + 3;
        else if(n == 0)
        {
            --m;
            n = 1;
            goto skipStack;
        }
        else
        {
            stack.Push(m - 1);
            --n;
            goto skipStack;
        }
    }
    return n;
} 
```

同样，调用`Ackermann(4, 2)`返回：

![在此处输入图像描述](../Images/a2b437df9904c466f01daf8e80b31a83.png)

这是正确的结果。使用的堆栈结构永远不会抛出，因此唯一剩下的限制是堆（当然还有时间，如果输入足够大，您将不得不使用“宇宙寿命”作为衡量单位......）。

由于它的使用方式类似于图灵机的磁带，我们想起了任何可计算函数都可以在足够大小的图灵机上计算的论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:41:41.590

使用记忆。就像是：

```
private static Dictionary<int, int> a = new Dictionary<int, int>();

private static int Pack(int m, int n) {
 return m * 1000 + n;
}

private static int Ackermann(int m, int n) {
  int x;
  if (!a.TryGetValue(Pack(m, n), out x)) {
    if (m == 0) {
      x = n + 1;
    } else if (m > 0 && n == 0) {
      x = Ackermann(m - 1, 1);
    } else if (m > 0 && n > 0) {
      x = Ackermann(m - 1, Ackermann(m, n - 1));
    } else {
      x = -1;
    }
    a[Pack(m, n)] = x;
  }
  return x;
} 
```

然而，这个例子只展示了这个概念，它仍然不会为 Ackermann(4, 2) 给出正确的结果，因为它`int`太小而无法容纳结果。为此，您需要一个 65536 位而不是 32 位的整数。

# php - $_SESSION 用于临时变量？

> ID：12186678
> 
> 赞同：0
> 
> 时间：2012-08-29T21:19:08.540
> 
> 标签：php, mysql, web-applications

**用户故事：**

我是 Web 应用程序的管理员，我需要删除 Web 应用程序的另一个用户。我从用户列表中选择用户，然后可以从后续页面中删除用户。

**当前（错误）解决方案：**

现在我将要删除的用户的 ID/主键存储在隐藏的表单元素中（可怕，可怕，可怕，我知道 - 有人可以使用元素检查器删除任何用户......）。这种事情的最佳做法是什么？我是否将要删除的用户的 ID/主键保存为 $_SESSION 变量？一块饼干？一个散列 URL 并用 $_GET 抓取它？

**编辑**

有不同的用户组，由不同的管理员管理。A组的管理员不知道B组（及其用户）等。所有用户都在一个表中，所有用户都可以在任意数量的组中。我需要保护用户 ID 并脱离 DOM，以便有人无法更改它并删除他们没有管辖权的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:27:34.853

没有必要使用`$_SESSION`这样的任务：会话是用于维护页面之间的状态，这里没有这样的情况。

处理资源 [例如用户] 时的最佳实践是设置[RESTful 环境](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)。

虽然您还没有设置这样的系统，但您仍然可以利用 HTTP 请求`$_GET`和`$_POST`php 数组：

```
<form action="delete.php" method ="post">
    <select id="user" name="user">
        <option value="1">Joh Doe</option>
        <option value="2">Jane Doe</option>
        <option value="3">Dun No</option>
    </select>
    <input type="submit" value="Submit"/>
</form> 
```

当您提交此表单时，您向 发出`POST`请求`delete.php`，该`$_POST`数组将包含一个`user`具有选定值的键 - 然后您可以使用 PDO 准备语句通过该键删除用户。

反对拒绝删除权限，如果登录的用户没有足够的权限，您必须设置脚本以阻止请求 - 这是您必须正确设置的另一层，所以我建议您使用框架 [如[Symfony](http://www.symfony.com)或 YII] 所以您可以利用他们的安全组件。

隐藏字段的想法是在[CSRF 保护](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)的背后，所以它根本不是毫无意义的——是的，它依赖于会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:30:33.380

我只是确保您在删除用户时验证用户权限。

编写例如函数 isUser() 来检查会话/cookies 中的数据并在您登录时返回 true 是很好的，那么您还可以访问 var 来声明您作为用户的权利。此外，当您检查您的数据是否正常并且您实际上使用正确的数据登录时，您可以制作 $user_rights var，其中包含站点访问级别（等）。

然后简单地说：

```
if(isUser() and $user_rights == 9) { /* code here, 9 is e.g. admin right */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:22:22.313

会话没有错。会话用于临时存储在 1 页以上。

# php - 结合 htaccess 重写

> ID：12186686
> 
> 赞同：1
> 
> 时间：2012-08-29T21:20:14.170
> 
> 标签：php, .htaccess, url, url-rewriting

我正在使用 php CodeIgniter 并在我的 .htaccess 文件中有以下重写规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

由于我希望用户通过 SSL 使用该站点，因此我想添加以下重写规则：

```
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://www.link.com/$1 [R,L] 
```

但是，当我这样做时，子目录中的每个页面都会有 /index.php/actual_page - 之前的 index.php 是不需要的。我认为这可能来自`RewriteRule ^(.*)$ index.php/$1 [L]`那里，但没有它可以正常工作。`RewriteRule ^(.*)$ [https://www.link.com/](https://www.link.com/)$1 [R,L]`

那么，如何在不破坏第一次重写的情况下将 url 重写为 https 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:30:26.233

确保 https 重定向发生在重写 index.php 之前。你希望它看起来像这样：

```
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://www.link.com/$1 [R,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# javascript - 使用 javascript 切换复选框在 IE 中不起作用

> ID：12186687
> 
> 赞同：1
> 
> 时间：2012-08-29T21:20:20.880
> 
> 标签：javascript, html

我有一堆按类别组织的复选框。每个类别都有一个复选框，可以切换相应的复选框组。由于某种原因，它在 IE 中不起作用；但是，我能够获得单独的全选/清除所有链接以正常工作。

请参阅此处的代码：http: [//jsfiddle.net/mobilemelody/DyZF4/1/](http://jsfiddle.net/mobilemelody/DyZF4/1/)

有关更多上下文，这些框用于打开和关闭地图 API 中的谷歌融合层。谢谢！

**编辑**

抱歉，我最初将代码放在 JSfiddle 中，因为我认为这对人们来说更容易..

Javascript：

```
function toggleOn(source) {
        var checkboxes = source;
        for(var i = 0; i < checkboxes.length; i++)
            checkboxes[i].checked = true;
    }
    function toggleOff(source) {
        var checkboxes = source;
        for(var i = 0; i < checkboxes.length; i++)
            checkboxes[i].checked = false;
    }
    function toggle(toggleBox, source) {
        var checkboxes = source;
        for(var i = 0; i < checkboxes.length; i++)
            checkboxes[i].checked = toggleBox.checked;
    } 
```

HTML：

```
 <div>
    <table>
    <tr><td colspan="5"><label><strong>Routes:</strong></label></td></tr>
    <tr>
    <td><input type="checkbox" checked="checked" name="route" id="toggle-local" onClick="toggle(this, document.getElementsByClassName('local'))">local</td>
    <td><input type="checkbox" checked="checked" name="route" id="17" value="17" class="local"/><label>17</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="19" value="19" class="local"/><label>19</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="22" value="22" class="local"/><label>22</label></td>
    </tr><tr>
    <td></td>
    <td><input type="checkbox" checked="checked" name="route" id="23" value="23" class="local"/><label>23</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="29" value="29" class="local"/><label>29</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="35" value="35" class="local"/><label>35</label></td>
    </tr><tr>
    <td></td>
    <td><input type="checkbox" checked="checked" name="route" id="36" value="36" class="local"/><label>36</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="45" value="45" class="local"/><label>45</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="49" value="49" class="local"/><label>49</label></td>
    </tr><tr>
    <td></td>
    <td><input type="checkbox" checked="checked" name="route" id="51" value="51" class="local"/><label>51</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="71" value="71" class="local"/><label>71</label></td>
    </tr><tr>
    <td><input type="checkbox" checked="checked" name="route" id="toggle-stage" onClick="toggle(this, document.getElementsByClassName('stage'))">stage</td>
    <td><input type="checkbox" checked="checked" name="route" id="61" value="61" class="stage"/><label>61</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="68" value="68" class="stage"/><label>68</label></td>
    </tr><tr>
    <td><input type="checkbox" checked="checked" name="route" id="toggle-shuttle" onClick="toggle(this, document.getElementsByClassName('shuttle'))">shuttle</td>
    <td><input type="checkbox" checked="checked" name="route" id="222" value="222" class="shuttle"/><label>222</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="233" value="233" class="shuttle"/><label>233</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="257" value="257" class="shuttle"/><label>257</label></td>
    </tr><tr>
    <td></td>
    <td><input type="checkbox" checked="checked" name="route" id="259" value="259" class="shuttle"/><label>259</label></td>
    </tr><tr>
    <td><input type="checkbox" checked="checked" name="route" id="toggle-school" onClick="toggle(this, document.getElementsByClassName('school'))">school</td>
    <td><input type="checkbox" checked="checked" name="route" id="113" value="113" class="school"/><label>113</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="117" value="117" class="school"/><label>117</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="125" value="125" class="school"/><label>125</label></td>
    </tr><tr>
    <td></td>
    <td><input type="checkbox" checked="checked" name="route" id="126" value="126" class="school"/><label>126</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="127" value="127" class="school"/><label>127</label></td>
    <td><input type="checkbox" checked="checked" name="route" id="139" value="139" class="school"/><label>139</label></td>
    </tr></table>
</div>

<a id="select-all" onClick="toggleOn(document.getElementsByName('route'))" style="cursor: pointer;">select all</a> | 
<a id="clear-all" onClick="toggleOff(document.getElementsByName('route'))" style="cursor: pointer;">clear all</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:31:25.477

`document.getElementsByClassName()`**IE** **< 9**不支持。但是，您可以使用[这个](http://polyfilljs.com/js/mylibs/getelementsbyclassname.js) [pollyfill](http://en.wikipedia.org/wiki/Polyfill)，它将为*旧版*浏览器定义它：

```
(function () {
        document.getElementsByClassName = function(classes) {
            return this.querySelectorAll('.' + classes.replace(' ', ' .'));
        }
}()); 
```

[另一种选择是改用 jQuery 的[类](http://api.jquery.com/class-selector/)选择器。]

# dynamics-crm-2011 - 使用 Javascript 在字段上为没有适当字段级安全权限的用户设置值

> ID：12186688
> 
> 赞同：1
> 
> 时间：2012-08-29T21:20:32.920
> 
> 标签：dynamics-crm-2011, crm

我有一个客户希望在用户更改第二个布尔字段的值（让我们称之为 fieldB）时更改布尔字段的值（让我们称之为 fieldA）。fieldA 启用了字段级安全性。

我已经创建了执行此操作的 JavaScript，并且当用户在 fieldA 上具有适当的字段级安全权限时，它工作得很好。当他们没有适当的特权时，它似乎不起作用？

是否可以让 JavaScript 为在fieldA 上**没有**字段级别权限的用户更改 fieldA 的值？如果没有，是否可以采取一种技巧来覆盖 JS 中的 FLS 临时性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:46:02.603

强制使用 JavaScript 有什么特别的原因吗？我建议使用更新前插件来规避 FLS 问题。

# sql - 如何在 SQL 语句语法中执行内联 if-then

> ID：12186693
> 
> 赞同：3
> 
> 时间：2012-08-29T21:21:27.323
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures, sql-server-2008-r2

我正在尝试将我的电子邮件附加到我的@email 字符串中，传入了错误的@status。它可以在没有我注释掉的行的情况下工作。我想我很接近，但语法错误。@override_email 为空。

```
DECLARE @retval INT
DECLARE @email nvarchar(200)
DECLARE @override_email nvarchar(200) = null
DECLARE @status INT = 2
DECLARE @in_customer_id INT = 160308

SET @email = COALESCE(@override_email, (
                      SELECT
                        COALESCE(CustomerDetail.Email, '')
                        /*+ (if @status NOT IN (3,4,5) ', alex@email.com')*/
                      FROM
                        tbl_customer_detail     CustomerDetail
                      WHERE
                        CustomerDetail.customer_id = @in_customer_id))                      
select @email 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:29:53.920

您可以使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)表达式执行此操作：

```
DECLARE @retval INT
DECLARE @email nvarchar(200)
DECLARE @override_email nvarchar(200) = null
DECLARE @status INT = 2
DECLARE @in_customer_id INT = 160308

SET @email = COALESCE(@override_email, (
                      SELECT
                        COALESCE(CustomerDetail.Email, '')
                        + case when @status NOT IN (3,4,5) then ', alex@email.com' else '' end
                      FROM
                        tbl_customer_detail     CustomerDetail
                      WHERE
                        CustomerDetail.customer_id = @in_customer_id))                      
select @email 
```

# windows - 为什么我不能在一个线程中创建一个对话框并在另一个线程中处理它的消息？

> ID：12186697
> 
> 赞同：0
> 
> 时间：2012-08-29T21:21:45.387
> 
> 标签：windows, multithreading, visual-c++

我做了这样的事情：

线程 1：

```
pDlg = new CAxDialogImpl<A>();
// start thread2 here 
```

线程 2：

```
pDlg->Create();

while(GetMessage(&msg, 0, 0, 0) > 0)
{
 ...
} 
```

这样的代码会导致崩溃。有没有人可以解释为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:45:26.610

这取决于创建基础窗口 (HWND) 的位置。如果 CAxDialogImpl 构造函数创建窗口，那么它将存在于线程 1 上，并且无法在线程 2 上处理它的消息。如果 CAxDialogImpl::Create() 方法创建了 HWND，那么它将存在于线程 2 上并且消息可以愉快在那里处理。

实际崩溃发生在哪里？

# c++ - 为什么 C++ 允许未命名的函数参数？

> ID：12186698
> 
> 赞同：43
> 
> 时间：2012-08-29T21:21:51.313
> 
> 标签：c++, function, parameters

以下是完全合法的`C++`代码

```
void foo (int) {
    cout << "Yo!" << endl;
}

int main (int argc, char const *argv[]) {
    foo(5); 
    return 0;
} 
```

我想知道，考虑到无法从函数内引用它们，是否存在将未命名参数留在函数中的值。

为什么这是合法的开始？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-29T21:24:19.663

是的，这是合法的。这对于在不打算使用相应参数的实现中实现基类中的虚函数很有用：您必须声明该参数以匹配基类中虚函数的签名，但您不打算使用它，所以你不指定名称。

另一种常见情况是当您向某个库提供回调时，您必须遵守该库已建立的签名（感谢[Aasmund Eldhuset](https://stackoverflow.com/users/626853/aasmund-eldhuset)提出这一点）。

还有一种特殊情况用于[定义您自己的后递增和后递减运算符](http://www.learncpp.com/cpp-tutorial/97-overloading-the-increment-and-decrement-operators/)：它们必须具有带有`int`参数的签名，但该参数始终未使用。不过，这种约定几乎是语言设计中的一种黑客行为。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-29T21:34:14.323

当然，在声明函数时不命名参数是合法的，但在实现中也是合法的。当函数需要声明参数以具有特定的固定签名但不需要参数时，最后一个明显奇怪的版本很有用。

例如，对于派生类中的方法、回调函数或模板参数，可能会发生这种情况。

不给参数命名清楚地表明不需要该参数并且不会使用它的值。一些编译器如果你命名一个参数然后根本不使用它会发出一个警告，说明函数体可能存在问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-09T12:03:26.383

只是想提一个特定的（不寻常但有趣的）用例 - “密码习语”。

它使用一个类型的“虚拟”参数，其构造函数只能对其朋友访问。**它的目的只是检查调用者是否可以访问这个构造函数。所以它不需要名字，因为它没有在函数中使用，只有编译器使用它。**

它是这样使用的：

```
class Friendly; // Just a forward declaration

class Key {
private:
    Key() {}
    friend class Friendly;
};

class Safe() {
public:
    static int locked(Key, int i) {
        // Do something with `i`,
        // but the key is never used.
        return i;
    }
private:
    static void inaccessible() {}
};

class Friendly {
public:
    void foo() {
        int i = Safe::locked(Key(), 1); // OK
        int j = Safe::locked({}, 2);    // OK, sice C++11
    }
    void bar() {
        Safe::inaccessible(); // Not OK, its inaccessible
    }
};

int i = Safe::locked(3);        // Not OK, wrong parameters
int j = Safe::locked(Key(), 4); // Not OK, `Key` constructor is inaccessible
int k = Safe::locked({}, 5);    // Not OK, `{}` means `Key()` implicitly 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-02-01T20:53:56.223

我只想补充一点，有时是否命名参数会有所不同。例如，编译器将命名的右值引用视为左值，将未命名的右值引用视为右值。

```
// named-reference.cpp  
// Compile with: /EHsc  
#include <iostream>  
using namespace std;

// A class that contains a memory resource.  
class MemoryBlock  
{  
   // TODO: Add resources for the class here.  
};

void g(const MemoryBlock&)   
{  
   cout << "In g(const MemoryBlock&)." << endl;  
}

void g(MemoryBlock&&)   
{  
   cout << "In g(MemoryBlock&&)." << endl;  
}

MemoryBlock&& f(MemoryBlock&& block)  
{  
   g(block);  
   return block;  
}  

int main()  
{  
   g(f(MemoryBlock()));  
} 
```

此示例产生以下输出：

> 在 g(const MemoryBlock&) 中。
> 在 g(MemoryBlock&&) 中。

在此示例中，主函数将右值传递给`f`. 的主体`f`将其命名参数视为左值。从`f`to的调用`g`将参数绑定到左值引用（ 的第一个重载版本`g`）。

# javascript - .attr('title') 的问题

> ID：12186699
> 
> 赞同：4
> 
> 时间：2012-08-29T21:21:57.337
> 
> 标签：javascript, jquery

我正在尝试检索标题属性并用它替换当前段落文本。关于我的脚本的其他所有内容都运行良好。标题属性返回为“未定义”。我是 javascript 的新手，我已经到处寻找答案......到目前为止我没有看到任何东西。

**JS：**

```
$(document).ready(function(){

    $('.thumbnails a').click(function(e){
        e.preventDefault();

        $('.thumbnails a').removeClass('selected');
        $('.thumbnails a').children().css('opacity','1');

        $(this).addClass('selected');
        $(this).children().css('opacity','.4');

        var photo_caption = $(this).attr('title');
        var photo_fullsize = $(this).attr('href');
        var photo_preview = photo_fullsize.replace('_large','_preview');

        $('.preview').html('<a href="'+photo_fullsize+'" title="'+photo_caption+'" style=background-image:url('+photo_preview+')></a>');

        $('.caption').html('<p><a href="'+photo_fullsize+'" title="'+photo_caption+'">View larger</a></p><p>'+photo_caption+'</p>');
    });
}); 
```

**HTML：**

```
<li>
   <a href="images/webdesign/indiePantry_large.jpg" target="_blank">
      <img src="images/webdesign/indiePantry_thumbnail.jpg" 
             width="160" height="160" title="Indie Pantry" />
   </a>
</li> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T21:25:02.677

标题在图像上，而不是`<a>`元素上：

```
var photo_caption = $('img', this).prop('title'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-29T21:25:04.197

在您的代码中，`this`引用`a`标签，而不是图像。

尝试：

```
$('img', this).attr('title'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T21:25:28.800

您正在使用`this`但在您的代码的情况下，`this`指的`<a>`是没有 title 属性的。你需要使用`$(this).find('img').attr('title');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T21:26:12.787

`this`是你的`a`标签，`a`没有`title`（img 有）

通过 chrome 和 f12 开发人员面板尝试一下。您可以在 javascript 代码中设置断点并随时检查确切`this`的内容。

# php - 如何在 nginx PHP 脚本上应用 Monit

> ID：12186702
> 
> 赞同：0
> 
> 时间：2012-08-29T21:21:58.650
> 
> 标签：php, daemon, monit

我正在使用一个名为 Monit 的 linux 工具，我正在尝试监视 PHP 守护程序脚本。

我不知道如何正确发出命令。

请给我提供一些示例命令给那些有 monit 经验的人。

我使用这样的命令。

$admin: sudo monit script.php

$admin: sudo monit ./script.php

但它一直说它不是服务

请帮助我。我通常会使用以下命令运行 PHP 守护程序

$admin: 须藤 ./script.php

它会运行。现在我想用monit来监控它。但是我上面使用的命令不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:28:10.073

问题是系统无法找到监控服务。做一个`whereis monit`或`locate monit`第一个以找到它的位置。如果最近在您的系统中安装了 monit，您可能需要执行 an`updatedb`命令`locate`才能找到它。

找到位置后，切换到该目录，然后尝试执行`sudo monit full/path/to/script.php`

# objective-c - 使用 IBAction 代替 touchesBegan：

> ID：12186712
> 
> 赞同：0
> 
> 时间：2012-08-29T21:22:43.580
> 
> 标签：objective-c, ios, uitouch, touchesbegan

设置 IBAction 来处理您的触摸事件与使用 touchesBegan: touchesMoved 等之间有什么真正的区别吗？什么考虑会导致一个人比另一个人更受青睐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:07:05.493

## 可访问性

如果`IBAction`您的意思是附加到诸如 之类`UIControlEventTouchUpInside`的事件，那么控制事件会附加相当多的“魔法”，这将需要一些工作来复制触摸事件。

最明显的是，如果您触摸 a `UIButton`，然后在释放前将按钮拖出*一小段*距离，按钮仍会发送其`UIControlEventTouchUpInside`事件。距离是通过可用性实验选择的：当某人仍然认为自己正在按下按钮时，他们的手指可以滑多远？

我怀疑使用控制事件也会使[iOS 6 引导访问](http://www.apple.com/ios/ios6/#accessibility)和其他辅助功能更容易理解您的应用程序。

## 将视图与模型分离

使用控制事件意味着 View 不需要知道点击时它有什么效果。这在模型-视图-控制器范式中被认为是一件好事。理想情况下，您的控制器将收到事件，并更新模型以适应。

## 结论

如果您*可以*实现与控制事件的交互，则最好这样做。

不过，有时您的控件需要复杂的交互。如果您正在使用多点触控来实现诸如手指绘画之类的东西，您将需要*准确*地知道触摸发生的地点和时间。在这种情况下，实现与、 和`touchesBegan`的`touchesMoved`交互。`touchesEnded``touchesCancelled`

# emacs - 在 Emacs 中显示所有打开的缓冲区

> ID：12186713
> 
> 赞同：3
> 
> 时间：2012-08-29T21:22:47.490
> 
> 标签：emacs, elisp, emacs23

在 emacs 中，是否有 Mx 命令或组合键将所有当前打开的缓冲区呈现到不同的窗口中？为清楚起见，假设我有四个打开的缓冲区，我现在只看到一个正在显示，我想一步一步在一个象限中显示每个缓冲区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:32:36.630

我推荐 ibuffer。Mx ibuffer 可能是您想要的。这是我的 ibuffer 配置：

```
;; *Messages* is so annoying. Also, I really like ibuffer
(require 'ibuf-ext)
(add-to-list 'ibuffer-never-show-predicates "^\\*Messages")
(add-to-list 'ibuffer-never-show-predicates "^\\*Completions")
(global-set-key (kbd "C-b") 'ibuffer)
(kill-buffer "*scratch*")
('ibuffer)
(switch-to-buffer "*Ibuffer*") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T02:09:10.320

如果没有已知的方法，您将能够从以下代码开始：

```
(defun buffer-in-window-list ()
  (let (buffers)
    (walk-windows (lambda (window) (push (window-buffer window) buffers)) t t)
    buffers))

(defun display-all-buffers ()
  (interactive)
  (let (buffers-in-window (buffer-in-window-list))
    (dolist (buffer (buffer-list))
      (when (and (not (string-match "\\`[[:space:]]*\\*" (buffer-name buffer)))
                 (not (memq buffer buffers-in-window)))
        (set-window-buffer (split-window (get-largest-window)) buffer)))
    (balance-windows))) 
```

该`display-all-buffers`命令为当前未在任何地方显示的每个缓冲区（包括其他帧）打开一个新窗口。出于可用性考虑，它会忽略名称以`*`（可选地，以空格字符为前缀）开头的缓冲区，因为它们通常仅供内部使用。

请注意，Emacs 不允许用户制作太小的窗口。因此，当要显示的缓冲区过多时，该命令将按照最近显示或选择的顺序显示尽可能多的缓冲区并发出错误信号。

# java - 为什么 Vector.indexOf 方法不适用于此类？

> ID：12186715
> 
> 赞同：0
> 
> 时间：2012-08-29T21:22:59.523
> 
> 标签：java, vector, equals, indexof

我有一堂完全一样的课：

```
public class Operator {
        private String oper;
        private boolean ltr;
        private int pc;
        //Ignore these methods...
        public Operator(String t,int prc,boolean as) {oper=t;pc=-prc;ltr=as;}
        public int precedence() {return pc;}
        public boolean associativity() {return ltr;}
        public String getName() {return oper;}

    public int hashCode() {
        int hash = 3;
        hash = 19 * hash + (this.oper != null ? this.oper.hashCode() : 0);
        hash = 19 * hash + (this.ltr ? 1 : 0);
        hash = 19 * hash + this.pc;
        return hash;
    }
    public boolean equals(Object o){
        if (o instanceof String){
            return oper.equals(o);
        }
        return false;
    }
    public String toString(){
        return oper;
    }
} 
```

当我这样做时：`System.out.println(new Operator("+",4,true).equals("+"));`它打印为 true，这意味着 equals 方法正在工作。
但是当我这样做时：

```
Vector oprs = new Vector();
oprs.addElement(new Operator("+",4,true));
int iof = oprs.indexOf("+");
System.out.println(iof); 
```

iof 是`-1`. 手动搜索发现它很好，并`System.out.println(oprs.elementAt(0));`打印`+`. 我认为`indexOf`使用`equals`方法来查找元素（就像在 Java SE 中一样）那么到底为什么`oprs.indexOf`不工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:27:14.703

“+”的类型是字符串。您无法重新定义 String 类的相等性，因此您的 equals 方法不是自反的。查看比较器类。它（以及使用它的集合类）可能会对您有所帮助。

# c# - C# 和网络共享数据库

> ID：12186716
> 
> 赞同：4
> 
> 时间：2012-08-29T21:23:11.483
> 
> 标签：c#, database, file, networking, share

我确定以前有人问过这个问题，但我正在开发一个需要网络共享数据库的应用程序。我没有设置专用 SQL 服务器的选项，所以我唯一的选择是基于文件的数据库。

最初将使用 5-10 个用户，他们将主要从数据库中读取数据，并且每小时最多只写入几次。

我在这里读到人们建议我远离 Access，但是还有哪些其他选择可以实现我所追求的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:23:57.993

我建议使用[SQL Server Compact Edition](http://www.microsoft.com/en-us/download/details.aspx?id=17876)或[SQLite](http://www.sqlite.org/)。

两者都不需要服务器来运行（它们是基于文件的），并且两者都比 Access 数据库功能更全面、更可靠。

# ios - iOS -- 字符串 -- 在特定位置插入字符串

> ID：12186719
> 
> 赞同：0
> 
> 时间：2012-08-29T21:23:20.633
> 
> 标签：ios, string

我有一长串。我想取这个长字符串，搜索出现在引号之间的任何单词（即“字符串”），并在单词之前插入一个字符串（即“x”），并在单词之后插入一个字符串（即“y”）。

任何解决方案将不胜感激！谢谢！

我看到我可以使用以下内容来获取引号之间的文本：

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"([\"])    
(?:\\\\\\1|.)*?\\1" options:0 error:&error];

NSRange range = [regex rangeOfFirstMatchInString:myString options:0 range:NSRangeMake(0,     
[myString length]]; 
```

但是，现在我需要替换引号内的文本，在之前插入 html 标签“bold”，在之后插入“/bold”。无论如何我可以这样做吗？此外，如果给定字符串中多次出现引用文本，我将如何使用上述代码循环遍历字符串以逐个修改每段引用文本？

我遇到了这篇文章（[单击此处]] [1](https://stackoverflow.com/questions/8921312/how-can-i-use-regex-to-put-quotes-around-a-statement)，但我不太确定如何修改示例代码以达到我想要的结果。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:54:42.027

我将向您推荐此页面：[Objective-C 中的 Shortcuts to concatenate NSStrings](https://stackoverflow.com/questions/510269/how-do-i-concatenate-strings-in-objective-c)

该页面讨论了通过使用两个 NSMutable 字符串并将一个字符串添加到一起，这似乎是它给出的两个字符串中的可取之处。不幸的是，没有将两个或多个字符串添加在一起的操作（这真的很糟糕）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:13:50.803

尝试这个：

```
NSString *original=@"The quick 'brown fox' The quick 'brown fox' ";
NSString *target=[original stringByReplacingOccurrencesOfString:@"'brown fox'" withString:@"<b>brown fox</b>"]; 
```

# sql - 将四位数字转换为小时格式SQL

> ID：12186721
> 
> 赞同：0
> 
> 时间：2012-08-29T21:23:28.650
> 
> 标签：sql, casting, intersystems-cache

我已经研究了 Cast and Convert，但我找不到这样做的方法。我需要将四位数字转换为小时格式。例如，0800 将变为 8:00 或 1530 将变为 15:30。我不能使用函数，我使用的是 InterSystem 的 CacheSQL。有什么建议么？提前致谢！

编辑：如果更方便的话，我可以将四位数字除以 100 以从原始 1500 获得 15 或从 0830 获得 8.30 之类的值。这是否使转换为小时：分钟格式更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:00:54.487

对于 CacheSQL，您可以这样做：

```
SELECT {fn TRIM(LEADING '0' FROM LEFT(col_name, 2) || ':' || RIGHT(col_name, 2)) }
FROM table_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:39:20.823

Well, if it is something like Oracle you might have a try with the `to_date()` function.

Read more [here](http://www.techonthenet.com/oracle/functions/to_date.php).

Example:

```
SELECT to_date(yourColumn, 'HH24MI') FROM ... 
```

**EDIT** (why? see comments): If necessary (I'm actually not familiar with Oracle) you can wrap another function like TIME() around it.

```
SELECT TIME(to_date(yourColumn, 'HH24MI')) FROM ... 
```

Read more about [TIME() here](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/date-and-time-functions.html#function_time).

```
</EDIT> 
```

In MySQL the equivalent would be the `STR_TO_DATE()` function:

```
SELECT STR_TO_DATE(yourColumn, '%H%i') FROM ... 
```

Read about [STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_str-to-date) and its [parameters](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_date-format) under the DATE_FORMAT() function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:40:00.067

In SQL Server 2008, given data that looks like

```
create table #data
(
  HHMM int not null ,
)
insert #data values ( 0800 )
insert #data values ( 0815 )
insert #data values ( 1037 )
insert #data values ( 2359 ) 
```

You can say:

```
select * ,
       strTime = right( '0' + convert(varchar, HHMM / 100 ) , 2 )
               + ':'
               + right( '0' + convert(varchar, HHMM % 100 ) , 2 ) ,
       myTime  = convert(time ,
                   right( '0' + convert(varchar, HHMM / 100 ) , 2 )
                 + ':'
                 + right( '0' + convert(varchar, HHMM % 100 ) , 2 ) ,
                 120
                 )
from #data 
```

Other SQL implementations likely have similar functionality.

In earlier versions of SQL Server that lack the `time` datatype, just use `datetime`, thus:

```
select * ,
       strTime = right( '0' + convert(varchar, HHMM / 100 ) , 2 )
               + ':'
               + right( '0' + convert(varchar, HHMM % 100 ) , 2 ) ,
       myTime  = convert(datetime,
                   right( '0' + convert(varchar, HHMM / 100 ) , 2 )
                 + ':'
                 + right( '0' + convert(varchar, HHMM % 100 ) , 2 ) ,
                 120
                 )
from #data 
```

You'll get a `datetime` value that is 1 Jan 1900 with the desired time-of-day.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-19T13:57:04.373

```
left( case when (EndTime / 100) < 10 then  ('0'+ convert(varchar, EndTime / 100 )) else convert(varchar, EndTime / 100 )  end, 2 )
                 + ':'
                 + right( '0' + convert(varchar, EndTime % 100 ) , 2 ) 
```

# android - PopUpWindow 中的 EditText 就像禁用一样，不接受任何输入

> ID：12186722
> 
> 赞同：0
> 
> 时间：2012-08-29T21:23:33.167
> 
> 标签：android, android-edittext, popupwindow

这是我初始化 popUpWindow 的地方

```
popUp = new PopupWindow(this);
layout = new LinearLayout(this);
mainLayout = new LinearLayout(this);
tv = new TextView(this);

ques = new EditText(this);
sol = new EditText(this);

params = new LayoutParams(LayoutParams.WRAP_CONTENT,
LayoutParams.WRAP_CONTENT);
layout.setOrientation(LinearLayout.VERTICAL);
tv.setText("Hi this is a sample text for popup window");
layout.addView(ques, params);
popUp.setContentView(layout); 
```

这是我试图设置监听器的地方：

```
popUp.showAtLocation(layout, Gravity.BOTTOM, 10, 10);
popUp.update(50, 50, 300, 80);

popUp.setFocusable(true);
ques.clearFocus();
ques.addTextChangedListener(new TextWatcher() {

public void afterTextChanged(Editable s) {}
 public void beforeTextChanged(CharSequence s, int start, int count, int after) { }

 public void onTextChanged(CharSequence s, int start, int before, int count) {
                                           xx=ques.getText();
                                        }});

ques.setEnabled(true);
ques.getText(); 
```

弹出窗口看起来很好，里面有一个editText，但它好像不起作用，keyBoard 不显示，如果我正常书写，它仍然显示为空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:38:02.783

我有同样的问题，只需使用：

```
popUp.setFocusable(true); 
```

# python - 调整扫描线填充以检测离散对象

> ID：12186729
> 
> 赞同：4
> 
> 时间：2012-08-29T21:24:06.920
> 
> 标签：python, image-processing, image-segmentation

我正在尝试在 Python 中检测颜色足够接近的连续区域。我独立地偶然发现了 8 路递归洪水填充算法（当找到的和所需的 RGB 颜色之间的欧几里得距离超过阈值时终止），它在小规模上效果很好，但会导致 2 兆像素图像的堆栈溢出。

Stack Overflow 和 Wikipedia 将扫描线填充作为答案，但我发现的每一个解释都是用 C++ 或关于用已知顶点填充多边形的。有人可以为类似于递归洪水填充的情况指出一个很好的伪代码解释吗？

由于缺乏形式数学（我在高中），我在研究图像分割方面遇到了困难。如果有对 K-Means 或类似内容的简单英语解释，那也很棒。OpenCV 看起来很有希望，但似乎我得到的只是一个颜色扁平化的图像；我只关心对象中 x,y 处的像素列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T23:10:49.807

扫描线洪水填充的思路如下

1.  给你初始点（种子）（x，y）
2.  尽可能向左走，直到像素 (x-1, y) 不被填充或到达 x=0
3.  您到达的 x 将是扫描线的开始；保留两个标志“寻找上方的洞穴”和“寻找下方的洞穴”，均初始化为 true
4.  这是扫描线循环的开始。检查 (x, y-1) 上面的像素是否要填充，现在考虑上视标志和像素有 4 种情况：
    *   如果“往上看”为真并且要填充像素，那么您找到了一个“新洞穴”，将 (x, y-1) 存储在“待办事项列表”中并将“往上看”标记为假
    *   如果“look above”为假且像素不被填充，则当前洞穴已完成，您需要寻找另一个洞穴，因此只需将“look_above”标记为 true
    *   在其他情况下（往上看是真的，不填充像素，或者往上看是假的，要填充像素）你什么也不做
5.  使用“look below”标志和像素颜色 (x, y+1) 重复相同的推理
6.  绘制像素 (x, y) 并移动到 (x+1, y)，从 (5) 开始重复，除非您移动到的像素不会被绘制。
7.  如果“待办事项列表”中有任何内容，请选择它并使用您在待办事项列表中找到的坐标（x，y）返回（1）

这是 4 连接洪水填充的版本。对于 8 连接填充，您还需要在开始扫描线时检查 (x-1, y-1) 和 (x-1, y+1) 处的洞穴，并且需要检查 (x+1, y) 处的洞穴-1) 和 (x+1, y+1) 在扫描线结束（如果相应的标志为真）。

在扫描线上移动时，您要做的是将图片中的绿点添加到您的待办事项列表中：

                                                         ![处理示例](../Images/1ba803f86ab49d5388a59827e4de75fa.png)

请注意，种子的数量不会是“最少的”（例如，示例中的前两个“种子之上”最终会在同一个洞穴中，因此只需要其中一个）。存储它们所需的堆栈数量通常比逐像素递归方法所需的数量要小得多。

另一种限制所需内存量的可能方法是使用边界绘制算法：

1.  您将初始种子 (x, y) 放入`current_active`列表并绘制它
2.  将列表初始化`next_active`为空
3.  对于`current_active`列表中的每个像素，检查需要绘制的邻居：当您找到一个绘制它并将其添加到`next_active`列表中时
4.  完成后，将`current_active`列表设置为`next_active`列表并从 2 开始重复，除非列表为空

[您可以在此视频](http://youtu.be/5JEveaFK9iE)中看到这两种算法的示例。

# c# - 使用 JasperReports Server API 从运行报告中检索 PDF

> ID：12186736
> 
> 赞同：3
> 
> 时间：2012-08-29T21:24:22.043
> 
> 标签：c#, .net, asp.net-mvc-3, pdf, jasperserver

我正在尝试使用 Jasper 提供的 API 运行报告并取回 PDF。我正在使用 C#。他们的文件说它将附加到响应中，但不清楚如何获取文件或响应的真正位置。我很抱歉，如果这个问题不是非常了解，我只是错过了一些东西，但我今天才开始看这个。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:30:02.717

[http://community.jaspersoft.com/questions/541220/run-report-jasperserver-rest-web-services](http://community.jaspersoft.com/questions/541220/run-report-jasperserver-rest-web-services) [http://community.jaspersoft.com/sites/default/files/docs/jasperreports-server-web-services -指南.pdf](http://community.jaspersoft.com/sites/default/files/docs/jasperreports-server-web-services-guide.pdf)

更具体地说：

[使用 REST webservice 和 asp.net C# 从 jasperserver 获取报告](https://stackoverflow.com/questions/9623685/get-report-from-jasperserver-using-rest-webservice-and-asp-net-c-sharp/9633661#9633661)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:09:19.600

您可以运行 e 报告并以不同的方式取回它。

如果您使用 HTTP API，您只需要链接到您想要的报告并提供用户名和密码，您可以使用 web 服务，这样您就可以将报告附加到 http 响应中。

希望这可以帮助你！

# java - >>> 使用继承的 Hibernate 示例 <<<

> ID：12186739
> 
> 赞同：0
> 
> 时间：2012-08-29T21:24:30.633
> 
> 标签：java, hibernate

我有两个实体，一个是项目，另一个是水果。我想首先作为另一个的超类来实现，并且我希望超类的所有参数都被它的子类继承。

我还希望在构建数据库时将该超类表及其所有属性绑定到子类表，即，如果我创建更多子类，我不希望所有子类都写入应该在超类中的值。

我应该如何实现这一目标？

项目.java

```
 @MappedSuperclass
  @DiscriminatorColumn(name="Item")
  @Inheritance(strategy = InheritanceType.JOINED)
  public abstract class Item implements java.io.Serializable
   {
      // here goes all values of the class Item
   } 
```

水果.java

```
 @Entity
   @PrimaryKeyJoinColumn(name="ART_ID")
   public class Fruit extends Item implements java.io.Serializable{
      // here goes proper values of this class 
   } 
```

数据库.db

```
 create table Item
   (
    ITEM_ID          bigint not null auto_increment,
    ITEM_NAME         varchar(25) not null,
    );

   create table Fruit
    (
    FRUIT_DATEFROZEN date,
    );

); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:18:39.867

[我为我拥有的复杂继承树](https://stackoverflow.com/questions/6202816/hibernate-discriminator-column-with-table-per-subclass)实现了类似以下的内容。

```
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type", discriminatorType = DiscriminatorType.STRING)
public abstract class Item
{
    @Id
    Long id;

    String name;
}

@DiscriminatorValue("FRUIT")
@SecondaryTable( name = "fruit" )
public class NumberAnswer extends Item
{
    @Column(table = "fruit")
    Date frozen;
}

create table Item
(
  ID     bigint not null auto_increment,
  NAME   varchar(25) not null,
);

create table Fruit
(
  ID     bigint not null
  FROZEN date,
); 
```

# c++ - C++ mpz_class 和二进制文件

> ID：12186740
> 
> 赞同：0
> 
> 时间：2012-08-29T21:24:34.563
> 
> 标签：c++, pointers, binaryfiles, gmp

我正在使用 mpz_class（使用 MPIR 2.5.1 和 Visual Studio C++ 2010，以及 MPIR 的 C++ 版本），对我来说，在内存中存储大量数字是不可行的，所以我想用二进制文件来做。

我已经用文本文件完成了这个，但是当我使用 100,000+ 位数时，二进制文件应该（希望）节省大量空间。

我写了一个简短的例子来帮助你理解我想要做什么：

```
ofstream binFile;
binFile.open ("binary.bin", ios::out | ios::binary);

mpz_class test;
test.set_str("999999999999999",10);

binFile.write((char *)(&test), sizeof(test));

cout << "NUMBER: " << test << "\tSIZE: " << sizeof(test) << endl;
binFile.close(); 
```

我正在尝试编写表示 mpz_class 实例的字符数据。然后，为了测试它，我尝试读取文件：

```
ifstream binFile2;
binFile2.open("binary.bin", ios::in | ios::binary);

mpz_class num1 = 0; 
binFile2.read ((char *)(&num1), sizeof(num1));

cout << "NUMBER: " << num1 << "\tSIZE: " << sizeof(num1) << endl;
binFile2.close(); 
```

我在网上看到的许多示例都使用这种方法将类数据存储到二进制文件中，但我的输出是这样的：

```
NUMBER: 999999999999999 SIZE: 12

NUMBER: 8589934595      SIZE: 12 
```

为什么不能直接存储类数据，然后再读取呢？mpz_class 的实例不可能是 12 的大小，这是指针的大小吗？

我也试过这个，但我认为它基本上是一样的：

```
char* membuffer = new char[12]; //sizeof(test) returned 12
binFile2.read (membuffer , sizeof(test));
memcpy(&test, &membuffer, sizeof(test)) 
```

任何有关如何解决此问题的建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:58:28.733

I think you need to spend more time with the GMP manual (section 12.1):

> Conversions back from the classes to standard C++ types aren’t done automatically, instead member functions like get_si are provided (see the following sections for details).

So, what you probably need to do is call `mpz_class::get_str` and `mpz_class::set_str`. Anyway, the C++ interface is just a light wrapper around the C API, so you're probably better off using the low-level stuff, since it's much better documented. In this case, you would have to use `mpz_get_str` and `mpz_set_str` (for integers).

Just keep in mind that there's no API function that can provide a direct binary serialization of the GMP data types, so you need to work with strings. I'm not sure if there are certain limitations to the size of these beasts, so you should test your code thoroughly if you plan to make use of such large numbers. Maybe the best choice is to extract a string representation in base 62 (maximum allowed) so that it doesn't blow up your memory (in base 2 it will eat up one byte for every bit) and then write that to file.

# mysql - MySQL 查询中的条件表更改

> ID：12186742
> 
> 赞同：0
> 
> 时间：2012-08-29T21:24:43.947
> 
> 标签：mysql, sql, conditional

我试图解决这个问题。但我想我无处可去。

我有 3 张桌子：

这个故事包含所有问题和问题类型：

```
 Table: Ref
    id    |    type   |   info
    ==========================
    1          SS         Education
    ---------------------------
    2          RB         Gender
    ---------------------------
    3          ST         State 
```

此表包含上表“参考”中问题的“选项”

```
 Table: ref_ans
    id    |  q_id   |   answer_text
    ===========================
    1          1        Masters     
    ---------------------------
    2          1        Bachelors     
    ---------------------------
    3          1        Undergrad
    ---------------------------
    4          2        Male     
    ---------------------------
    5          2        Female
    ---------------------------
    6          2        Dont want to disclose 
```

此表包含状态（表中`type`的 =“ST” `Ref`）

```
 Table: us_states

    id    |  answer_text 
    ===========================
    1        Alaska     
    ---------------------------
    2        Alabama     
    ---------------------------
    3        Arkansan
    ---------------------------
    4        Arizona     
    ---------------------------
    5        Baltimore
    ---------------------------
    etc 
```

我想要的结果是：

```
 ref.id, ref_ans.id, ref.answer_text / us_states.answer_text 
```

**对于给定的`ref.question_id`**。

条件是：如果 question_id 要求的答案是“ST”，它应该从 中提取答案`us_states`，否则，它应该从`ref-ans`表中提取答案。

我试过这个。显然，这不起作用：

```
 SELECT ref.id, 
         CASE WHEN ref.type = 'ST' THEN 
             (SELECT ID, answer_text FROM us_states )
         ELSE 
             (SELECT id, answer_text FROM ref_ans)  
    END

    FROM ref
   WHERE ref.ID = <id> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:32:11.040

尝试：

```
SELECT    a.id, 
          COALESCE(b.id, c.id) AS ans_id,
          COALESCE(b.answer_text, c.answer_text) AS answer_text
FROM      ref a
LEFT JOIN ref_ans b ON a.id = b.q_id
LEFT JOIN us_states c ON a.type = 'ST'
WHERE     a.id = <id> AND (
              (a.type <> 'ST' AND b.id IS NOT NULL) OR
              (a.type =  'ST' AND c.id IS NOT NULL)
          ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:11:35.553

假设所有三个表都通过 id（第 1 列）连接：

```
 SELECT ref_ans.id, ref.id, if(ref.type='ST', us_states.answer_text, ref_ans.answer_text) as answer_text
    FROM ref_ans  
    JOIN ref  on ref.id=ref_ans.id
    JOIN us_states on ref.id=us_states.id
    WHERE ref_ans.q_id = <id> 
```

# box2d - box2d 最大多边形顶点

> ID：12186744
> 
> 赞同：5
> 
> 时间：2012-08-29T21:24:58.317
> 
> 标签：box2d, polygon

我正在开发的游戏中使用 box2d 进行物理。问题是我有一个需要精确碰撞的精灵，所以我使用一个多边形创建了精灵的轮廓。

问题是 box2d 每个多边形最多只能支持 8 个顶点。box2d 中有没有办法使用超过 8 个顶点的多边形？我必须将多边形分成三角形吗？有没有其他方法可以做到这一点？我考虑过使用链边，但它们不会与其他链碰撞..

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T01:54:33.213

如果您只需要 8 多一点，您可以更改 b2Settings.h 文件中 b2_maxPolygonVertices 的值。如果你需要更多，你应该把它保持在 8 并将形状分割成更小的多边形（你不需要分割成三角形，除非形状是凹的）。

# .htaccess - 如何将所有子域请求重定向到 htaccess 中的主域？

> ID：12186750
> 
> 赞同：3
> 
> 时间：2012-08-29T21:25:03.143
> 
> 标签：.htaccess

我需要重定向所有子域请求以重定向到我的 htaccess 中的主域。我需要它还包括某种通配符重定向。

例如，washington.mysite.com/ 重定向到 mysite.com/washington

但我还需要将子域上的任何旧网址重定向到 mysite.com/washington

例如，washington.mysite.com/category.aspx?washington-attractions&CatID=17 重定向到 my-site.com/washington

到目前为止，这是我的代码：

```
RewriteCond %{HTTP_HOST} ^washington\.mysite\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.washington\.mysite\.com$
RewriteRule ^(.*)$ "http\:\/\/www\.mysite\.com\/washington/$1" [R=301,L] 
```

但是它仍然将旧 URL 附加到新 URL

例如，washington.mysite.com/category.aspx?washington-attractions&CatID=17 重定向到 my-site.com/washington/category.aspx?washington-attractions&CatID=17

基本上我需要将washington.mysite.com/*(anything) 重定向到 my-site.com/washington

我们欢迎所有的建议 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:34:21.957

```
RewriteCond %{HTTP_HOST} ^(www\.)?washington\. [NC]
RewriteRule ^(.*)$ http://www.mysite.com/washington [R=301,L] 
```

在你的`RewriteRule`你有`/$1`匹配`(.*)`通配符组的括号。这就是您从附加的旧 URL 获取路径的原因。

我结合了你的 2 `RewriteCondition`，使`(www\.)`匹配成为可选的`?`.

旗帜`[NC]`就是[`nocase`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_nc)旗帜。

要清除查询字符串，请附加`?`到重写 URL 的末尾

```
RewriteCond %{HTTP_HOST} ^(www\.)?washington\. [NC]
RewriteRule ^(.*)$ http://www.mysite.com/washington? [R=301,L] 
```

# android - 动态更改 ViewPagerIndicator 标题

> ID：12186754
> 
> 赞同：4
> 
> 时间：2012-08-29T21:25:18.150
> 
> 标签：android, title, viewpagerindicator

我当前的项目使用一些`ListFragments`来显示数据行。这些行每隔几秒钟就会动态更新一次。行数随每次更新和每个`ListFragment`.

我想向用户显示行数，并认为最合适的地方是*ViewPagerIndicator*`Fragment`中的标题旁边。我提供了一个示例图像以便更好地理解：

 *![查看页面指示器](../Images/ae2bc33a235b2484e13abb8787fdf9e9.png)

可悲的是，我对如何实现这一目标一无所知。我尝试了以下方法：

```
public class PagerAdapter extends FragmentPagerAdapter {
    private int numOne = 0;
    private int numTwo = 0;

    // ...

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return "List 1 (" + numOne + ")";
        case 1:
            return "List 2 (" + numTwo + ")";
        default:
            return "";
    }

    public void setNumOne(int num) {
        this.numOne = num;
    }

    public void setNumTwo(int num) {
        this.numTwo = num;
    }
} 
```

当我现在调用该`setNumXXX()`方法时，什么都没有发生，直到我在片段之间移动，似乎触发了触发`getPageTitle()`。

我的问题是：每次*值更改**时，如何强制更新标题？`num`*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T21:37:14.450

如果您调用`notifyDataSetChanged()`指标实例，它将重绘自身并获取新标题。*

# visual-studio-2010 - SSRS - T-SQL - 连接多行

> ID：12186762
> 
> 赞同：0
> 
> 时间：2012-08-29T21:25:34.903
> 
> 标签：visual-studio-2010, tsql, reporting-services, business-intelligence

我有连接多个表的 T-SQL 查询。我在 SSRS 中使用它作为数据集查询。我只选择两列，ID 和名称。我有三个具有相同“ID”值但三个不同“名称”值的记录。在 SSRS 中，我得到了第一个“名称”值，我需要将所有三个具有相同 ID 的值连接起来，并将其放在表格的一个单元格中。

我该怎么做呢？

我正在使用查找来组合多维数据集 + sql 直接从表中提取 ID，但使用名称的 Case 语句来定义别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:31:57.620

您可以在 TSQL 中使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)将它们作为单独的列来完成此操作，然后您可以在报告单元格中组合这些列，或者您可以使用[这些](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)连接方法之一来获取一列中的所有名称。

例如，您可以这样做：

```
SELECT  SomeTableA.Id,
        STUFF(
          (SELECT ',' + SomeTableB.Names AS [text()]
           FROM SomeTable SomeTableB
           WHERE SomeTableB.Id = SomeTableA.Id
                    FOR XML PATH('')), 1, 1, '' )
        AS ConcatenatedNames
FROM  SomeTable SomeTableA
INNER JOIN AnotherTable
  ON SomeTableA.Id = AnotherTable.SomeId
... 
```

# android - Android - getResource() 贵吗？

> ID：12186765
> 
> 赞同：11
> 
> 时间：2012-08-29T21:25:56.833
> 
> 标签：android, resources

如果我需要使用资源两次，将其存储在字符串中会更好吗？

```
public class Testing extends Activity{
    private String c_stringName;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
            c_stringName= this.getString(R.string.name);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:07:18.533

如果你挖到机器。它们之间的唯一区别是 1 个参考。它可能看起来像运行多个

```
c_stringName= this.getString(R.string.name); 
```

正在做很多工作，但它是相同的并将其存储到字符串引用中。

# javascript - jQuery 褪色发光特殊文字效果

> ID：12186768
> 
> 赞同：1
> 
> 时间：2012-08-29T21:26:15.057
> 
> 标签：javascript, jquery, jquery-ui, animation, css-transitions

我想让黑色错误消息文本“发光”，红色轮廓在一秒钟后消失，但是，如果更新，返回“全发光”并再次开始消失，即使它没有完全消失首先。有没有相当简单的 jQuery/CSS 方法来做到这一点？我认为两种同时褪色技术会相互竞争，是异步的，而且我不太清楚如何产生发光效果，或者是否可以使用标准样式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:32:13.177

您不需要使用任何外部插件，只需使用**jQuery 1.8**和**css3**就可以做到这一点，但这并不容易。您需要将 css3`text-shadow`属性与`animate()`

**更新：**修复了错误。

[**这是工作 jsFiddle 文本发光效果。**](http://jsfiddle.net/Jf4vB/32/)

**jQuery：**

```
var red = $(".red");
red.click(function() {
   if ( !$(this).is(':animated') )

    //you just adjust here
    red.glowEffect(0,40,500);
    //which is:
    //red.glowEffect( start value , destination value , duration );
});

$.fn.glowEffect = function(start, end, duration) {
    var $this = this;
    return this.css("a", start).animate({
        a: end
    }, {
        duration: duration,
        step: function(now) {
            $this.css("text-shadow","0px 0px "+now+"px #c61a1a");
        }
    });
};​ 
```

**CSS：**

```
.red { text-shadow: 0px 0px 0px #c61a1a; } 
```

**注意：**不需要像`-webkit- -ms- -moz- -o-`jQuery 1.8 那样自动定义供应商前缀。

**资料来源：**上周我问了类似的问题，得到了很好的答案：

[如何在不使用 css 过渡的情况下将 jQuery animate 与 css3 属性结合起来？](https://stackoverflow.com/questions/12062818/how-to-combine-jquery-animate-with-css3-properties-without-using-css-transitions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:34:23.670

[一个纯粹的 CSS3 解决方案无耻地从这里](http://www.sitepoint.com/css3-glowing-link-effect/#fbid=bsgdXahsa5j)偷走了：

```
a.glow, a.glow:hover, a.glow:focus {  
    text-decoration: none;  
    color: #aaf;  
    text-shadow: none;  
    -webkit-transition: 500ms linear 0s;  
    -moz-transition: 500ms linear 0s;  
    -o-transition: 500ms linear 0s;  
    transition: 500ms linear 0s;  
    outline: 0 none;  
} 
a.glow:hover, a.glow:focus  {  
    color: #fff;  
    text-shadow: -1px 1px 8px #ffc, 1px -1px 8px #fff;  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T11:32:13.170

这是适用于负面动画的 barlasapaydin 答案的一个版本：

```
$.fn.glowEffect = function(start, end, duration, callback) {
    // Fetch last animation position
    if (this.data("last-glow")) 
        start = this.data("last-glow");

    return this.animate({
        'placeholder': end // This can be anything, it's just a placeholder to allow the animation to run
    }, {
        duration:duration,
        step: function(now, fx) {
            // Calculate current position
            now = parseInt(start + (end - start)*(fx.pos));
            // Set current animation position
            $(fx.elem).css("text-shadow","0px 0px "+now+"px #c61a1a")
                // Save position (if animation is interrupted)
                .data("last-glow", now);
        },
        complete:callback
    });
};

$(".red").click(function() {
    $(this)
        .stop()
        .glowEffect(0,50,1000, // Fade in
                    function() 
                    { 
                        $(this).glowEffect(50,0,1000);  // Fade out
                    });
}); 
```

代码有点复杂，但效果很好。

[http://jsfiddle.net/Jf4vB/38/](http://jsfiddle.net/Jf4vB/38/)

关于“步骤”对象的一些有用的第三方文档：

[http://cdmckay.org/blog/2010/03/01/the-jquery-animate-step-callback-function/](http://cdmckay.org/blog/2010/03/01/the-jquery-animate-step-callback-function/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T21:28:33.337

使用 jQuery UI 的动画插件，您可以在文本后面创建一个模糊的红色阴影（使用 CSS3 属性），然后对其不透明度、大小等进行动画处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T21:30:37.297

我会使用 CSS3 “text-shadow” 属性来实现发光效果，并使用 $(".textid").stop().addClass("glow", 1000); 为动画。

编辑：好的，那不起作用：http: [//jsfiddle.net/2pBxP/](http://jsfiddle.net/2pBxP/) :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T21:31:29.517

要在 JQuery 中制作循环动画，您可以执行以下操作：

[带有循环和延迟的JQuery淡入淡出](https://stackoverflow.com/questions/1301529/jquery-fade-with-loop-and-delay)

然后，您可以使用 CSS3 添加文本发光（或阴影），但请注意，某些浏览器不支持此功能。

# java - 通配符和类型变量有什么区别？

> ID：12186769
> 
> 赞同：4
> 
> 时间：2012-08-29T21:26:24.373
> 
> 标签：java, wildcard, type-variables

考虑以下 Employee 类和一个名为 Manager 的子类-

```
public class Employee
{
    private String name;

    public Employee(String name)
    {
        this.name = name;
    }

    public String getInfo()
    {
        return name;
    }
}

public class Manager extends Employee
{
    public Manager(String name)
    {
        super(name);
    }
} 
```

在另一个类中，我定义了两个函数如下 -

```
import java.util.ArrayList;

public class WildCardsAndTypeVariables
{
    public static <T extends Employee> void displayInfo(ArrayList<T> employees)
    {
        for (int i=0; i<employees.size(); i++)
        {
                Employee employee = (Employee) employees.get(i);
                System.out.println(employee.getInfo());
        }
    }

    public static void displayInfo2(ArrayList<? extends Employee> employees)
    {
        for (int i=0; i<employees.size(); i++)
        {
                Employee employee = (Employee) employees.get(i);
                System.out.println(employee.getInfo());
        }
    }

    public static void main(String[] args)
    {
    Employee e1 = new Employee("John");
    Employee e2 = new Employee("Joe");
    Employee e3 = new Manager("Joseph");

    ArrayList<Employee> employees = new ArrayList<Employee>();
    employees.add(e1);
    employees.add(e2);
    employees.add(e3);

    displayInfo(employees);
    displayInfo2(employees);
   }
} 
```

我从 displayInfo() 和 displayInfo2() 得到相同的输出。

那么，考虑到这个例子，通配符和类型变量有什么区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:57:55.633

在这种情况下，方法只接受一个参数并具有`void`返回类型，您不会获得任何好处，也不会在通配符类型版本和泛型方法版本之间的语义上产生任何差异。当您在方法签名（参数类型或返回类型）中多次使用类型变量时，泛型方法的真正威力就出现了，一个简单的例子是

```
public static <T extends Employee> T firstEmployee(ArrayList<T> employees) {
  return employees.get(0);
} 
```

其中说“此方法采用一个 ArrayList，其成员都是`Employee`（或`Employee`自身）的某个子类的所有实例，并且它返回的值是*同一*类的实例”。这是您无法仅使用通配符表达的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:28:28.973

当您使用类型（例如 T）时，您将只能发送特定类型的具体对象。

但是，当您使用通配符时，您正在定义对象的边界。因此，您可以传递 T 类型的对象（或）任何 T 类型的对象。

在你的情况下，你只有 Empoylee，所以差别不大。但是，假设您有扩展 Employee 的类 Contractor。然后你会看到不同之处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:32:13.200

你的例子有很多问题。

在`displayInfo2`中，您应该使用`? extends Employee`，因为您正在读取而不是写入`Employee`传递数组中的对象。例如，如果您想将一个数组传递`Manager`给该方法，则在您进行此更正之前它不会进行类型检查。

一旦解决了这个问题，您就不需要`employees.get()`在任何一种方法中都将调用转换为。

不同之处仅在于您`T`在`displayInfo`. Java 中的某些情况要求您为类型命名（我将继续使用链接编辑这篇文章），但在这个特定的示例中，您只需使用通配符就可以了，因为您只关心`Employee`部分。

# ios - Mac OS X 上的 CGContextShowText 异常。在 iOS 上很好

> ID：12186774
> 
> 赞同：2
> 
> 时间：2012-08-29T21:26:51.723
> 
> 标签：ios, macos, exception, cgcontext

我有这行代码：

```
CGContextSelectFont(context, "Courier", [storedTextSize floatValue], kCGEncodingFontSpecific);
CGContextSetTextDrawingMode(context, kCGTextFill);
CGContextSetTextPosition(context, 0.0f, round([storedTextSize floatValue] / 4.0f));
CGContextShowText(context, [string UTF8String], strlen([string UTF8String])); 
```

它在 iOS 和 Mac OS 上产生相同的正确结果。令我困惑的是，当我添加一般的“异常断点”时，它会在最后一行（仅在 Mac OS X 上）停止应用程序，并显示“线程 1：断点 1.2”消息。我可以单击“继续执行程序”几次，然后该过程正确完成。

它不会停止 iOS 上的应用程序。如果我禁用它运行的异常断点（看起来很好）。

我不明白这个。这里发生了什么事 ？有没有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:51:04.343

存在内部错误，但已处理。如果没有向您显示任何消息或错误，您应该假设实现已恢复。您还应该理智地检查您的参数和上下文。你不应该担心它，除非当然异常展开到你的程序中或者给你一个消息或错误（因为一切都被正确显示）。如果异常进入您的程序（来自此 API），您不应尝试捕获或从异常中恢复。如果某些东西确实指定了它可以抛出，以及它会抛出什么，那么您可能会考虑处理它——但 CG 接口并非如此。

# java - 在 Solr 中存储 PDF

> ID：12186777
> 
> 赞同：1
> 
> 时间：2012-08-29T21:27:09.323
> 
> 标签：java, solr, apache-tika

我正在尝试进行设置（在我的本地环境中），以便我可以将 PDF 存储在 Solr 中，但我无法让它工作。现在我正在处理 Solr 提供的示例文件夹中的文件。

我没有修改 solr-3.6.0/example/conf 中的 solrconfig.xml，因为它似乎已经按照[提取请求处理](http://wiki.apache.org/solr/ExtractingRequestHandler#Configuration)程序中的描述进行了配置。也就是说，它已经包含以下内容：

```
<lib dir="../../dist/" regex="apache-solr-cell-\d.*\.jar" />
<lib dir="../../contrib/extraction/lib" regex=".*\.jar" /> 
```

还有这个：

```
<requestHandler name="/update/extract" 
              startup="lazy"
              class="solr.extraction.ExtractingRequestHandler" >
<lst name="defaults">
  <str name="fmap.content">text</str>
  <str name="lowernames">true</str>
  <str name="uprefix">ignored_</str>
  <str name="captureAttr">true</str>
  <str name="fmap.a">links</str>
  <str name="fmap.div">ignored_</str>
</lst> 
```

我正在使用以下命令从示例目录运行 Solr：

```
java -jar start.jar 
```

我正在尝试使用以下命令将 pdf 发送到 Solr：

```
java -Durl=http://localhost:8983/solr/update/extract -Dauto -jar /Applications/Solr-3.6.0/example/exampledocs/post.jar /path/to/pdf/mypdf.pdf 
```

如果我不对 /Solr-3.6.0/example/solr/conf/schema.xml 进行任何更改，我会收到以下消息：

```
FATAL: Solr returned an error #400 [doc=null] missing required field: id 
```

如果我将 schema.xml 中 id 元素中的属性“required”的值更改为 false，我会得到：

```
FATAL: Solr returned an error #400 Document is missing mandatory uniqueKey field: id 
```

我认为，如果架构中元素的 required 属性为 false，那么我可以只发送不包含该字段的文件，但显然情况并非如此。

我还尝试在发送该 pdf 的命令中添加参数**-Dparams=literal.id=mypdf1**但这也无济于事。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:28:10.163

我相信我的困惑是由于您需要为发送给 Solr 的文档提供一个 id，同时在 Solr-3.6.0/example/solr/conf/**模式中有一个 id 元素。 .xml** _

我相信我得到的第一个错误是指模式中的 id 元素。第二个错误是指文档 ID。

在 ZeroPage 的帮助下，我也能够通过将文档 ID 添加到 url 而不是将其作为单独的参数传递来克服第二个错误。这个查询现在对我有用：

```
java -Durl=http://localhost:8983/solr/update/extract?literal.id=form1 -jar /Applications/Solr-3.6.0/example/exampledocs/post.jar /path/to/pdf/form1.pdf 
```

如果我们希望 Solr 索引 PDF 的全部内容，我们需要添加**uprefix**和**fmap.content**属性：

```
java -Durl="http://localhost:8983/solr/update/extract?literal.id=form1&uprefix=attr_&fmap.content=attr_content&commit=true" -jar /Applications/Solr-3.6.0/example/exampledocs/post.jar /path/to/pdf/form1.pdf 
```

# pdf - 如何从PDF中提取数字签名？

> ID：12186783
> 
> 赞同：1
> 
> 时间：2012-08-29T21:27:57.087
> 
> 标签：pdf, pdf-generation

看起来这应该是一件容易的事——或者至少以前在某个地方问过，但我找不到任何有用的东西。是否有命令行实用程序可以提供有关数字签名 pdf 的信息？

到目前为止，我只尝试了 PLOP DS，但它提供了以下内容：

```
Signatures: 1
    invisible signature field 'sigField': signed 
```

还有什么可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:59:06.137

看看[iText](http://itextpdf.com/)，它是一个用于在 Java 中创建和操作 Pdfs 的库。您可以在此处找到有关签名的一些有用示例：http: [//itextpdf.com/examples/iia.php](http://itextpdf.com/examples/iia.php?id=222) ?id=222 （参见`verifySignatures()`方法）

# asp.net-mvc - mvc4 + EF 中的多级菜单

> ID：12186785
> 
> 赞同：0
> 
> 时间：2012-08-29T21:28:26.237
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

在 asp.net mvc3 和 Code First EF 中创建模型多级菜单的最佳方法是什么？在我的实现中：

```
public class Menu{
public int id{get;set;}
public string Name{get;set;}
public List<Menu> Menus{get;set;}
} 
```

但我认为，在递归中，EF 不能绑定这个模型:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:38:50.450

This, in principle should work. I think the Entity Framework is messing with the 's' at the end of the "Menus" word. Try this and tell me whether it was successful:

```
public class Menu{
public int id{get;set;}
public string Name{get;set;}
public List<Menu> SubMenus{get;set;}
} 
```

# assembly - 打印 x86 汇编数组

> ID：12186792
> 
> 赞同：0
> 
> 时间：2012-08-29T21:28:58.153
> 
> 标签：assembly, x86

我在 x86 程序集中打印数组时遇到问题。

我想在每个周期结束时使用换行符每次打印一行，但似乎我尝试使用的代码是错误的。这里是：

```
SECTION .data 

Matrix:
db "00000"
db "00000"
db "01110"
db "00000"
db "00000",10

NewLine:  db 10

SECTION .text

global  _start

_start:

mov esi,2

mov eax,4
mov ebx,1
mov ecx,[Matrix+esi]
mov edx,5
int 80h

mov eax,4
mov ebx,1
mov ecx,NewLine
mov edx,1
int 80h

mov eax,1
mov ebx,0
int 80h 
```

在这个简化案例中，我的目标是打印由五个元素组成的 Matrix 的第三行，一个换行符和一个退出。我得到的输出只是换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:23:31.083

我认为正在发生的事情是：

```
mov ecx,NewLine 
```

将 NewLine 的地址放在 ECX 中，这样：

```
mov ecx,[Matrix+esi] 
```

将地址 Matrix+ESI 的*内容*放入 ECX。您应该将地址放入 ECX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:45:28.233

当它显然是 Linux 代码时，为什么它被标记为“dos”？无论如何，MRAB 建议的“lea”解决方案应该可以工作。使用 esi = 2，它只会将您移动到第一行的第二个字节 - 如果您想打印第三行，您希望 esi 为 10...等等。

最好的，弗兰克

# android - 单独的换行符 (0x0A) 是否违反 INI 格式？

> ID：12186793
> 
> 赞同：0
> 
> 时间：2012-08-29T21:28:59.620
> 
> 标签：android, ini, ini4j

如果 INI 格式具有单个换行符 (0x0A)而前面***没有***回车符 (0x0D) 是否违规？

[Ini4j](http://ini4j.sourceforge.net)在我的 Android 应用程序中对此感到厌烦。

请不要问我*为什么*在 Android 应用程序中使用 INI...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:44:56.103

由于`*.ini`是 Windows 格式，因此您可以预期，每个换行符必须是`\r\n`.

至少在来源中，只有`Registry`类明确依赖`\r\n`. 在所有其他情况下，似乎使用了系统属性`line.separator`。

仍然有争议的是跨平台库应该依赖它......

* * *

该问题可以通过设置解决，`setEmptyOption(true)`例如

```
Config c = new Config();
c.setEmptyOption(true);
Ini i = new Ini();
i.setConfig(c); 
```

# css - 移动设备 - 不同的背景 - 媒体查询不起作用

> ID：12186798
> 
> 赞同：0
> 
> 时间：2012-08-29T21:29:39.447
> 
> 标签：css, mobile, background, media-queries

[现场直播。](http://parlourdc.com/wp)

这是我第一次尝试为移动设备和常规屏幕使用不同的 CSS。为此，我正在使用-

```
@media only screen 
    and (min-device-width : 320px) 
    and (max-device-width : 480px) {
        background: url('img/background.jpg') no-repeat center center fixed;
        background-size: cover;
        height: 100%;
} 
```

但是，它似乎不起作用（我只能在 iPhone 上测试）。关于为什么会这样的任何想法？我也试过`@media all`无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:37:01.713

```
media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
         body{
           background: url('img/background.jpg') no-repeat center center fixed;
           background-size: cover;
           height: 100%;
         }
} 
```

正文是您要定位的 HTML 元素，因此假设您`<body>`的 HTML 中有一个标签，则当设备满足宽度标准时，将应用上述 CSS 样式。

编辑：也试试这样的背景，如果文件在那里应该工作......

```
background: transparent url(/img/background.jpg/) no-repeat center center fixed; 
```

编辑：原来是一个标签修复了这个问题，你可以[在这里](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)`!important`阅读更多关于 CSS 优先级的信息。

# android - MapView - 禁止拖动，但允许缩放

> ID：12186801
> 
> 赞同：0
> 
> 时间：2012-08-29T21:29:54.627
> 
> 标签：android, android-mapview

我有一个 ViewPager，里面有 3 个片段，在右外侧我想显示一个 MapView - 到目前为止工作正常。但我想禁用拖动它，但仍然让用户放大/缩小 - 具有固定的中心。如果允许用户拖动地图，它会干扰 viewpager 的滚动功能。试图禁用可点击+可聚焦但 - 当然 - 不再缩放..

在stackoverflow上查看了其他问题，但到目前为止没有一个提供有效的解决方案..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:56:02.507

忽略我到目前为止所说的一切（这就是我编辑答案的原因），而是在您的 MapActivity 类中使​​用以下代码（它工作得很好，刚刚尝试过！）：

```
final GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
final MapController mapController = mapView.getController();

mapController.animateTo(point);
mapController.setZoom(6);

mapView.setOnTouchListener(new View.OnTouchListener() {

@Override
public boolean onTouch(View arg0, MotionEvent arg1) {
  if(arg1.getAction() ==  MotionEvent.ACTION_UP)
  {
    mapController.setCenter(point);
    return true;
  }
  if(arg1.getPointerCount() > 1)
  {
   mapController.setCenter(point);
   return false;
  }
  else
  {
   return true;
  }
 } 
 }); 
```

# neo4j - 一切都应该与neo4j中的节点0连接吗

> ID：12186803
> 
> 赞同：10
> 
> 时间：2012-08-29T21:29:57.267
> 
> 标签：neo4j

在 Neo4j 中，所有节点都应该连接到节点 0，以便您可以创建跨越所有对象的遍历吗？当您处理大型数据集时，这是一个性能问题吗？如果是这样，有多少节点太多了？如果我现在没有看到它的用例，假设我使用索引来查找特定节点，是否可以不让节点连接到节点 0？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T21:56:44.813

没有必要或要求将所有内容连接到根节点。索引在寻找遍历的起点方面非常有用。如果您说连接到起始节点（如根节点）的节点少于 5000 个，那么关系扫描比索引查找便宜。

要判断哪个更好，您需要对域有更多的了解。

# internet-explorer - Windows手机浏览器？

> ID：12186804
> 
> 赞同：0
> 
> 时间：2012-08-29T21:30:00.283
> 
> 标签：internet-explorer, windows-phone

我正在为我的网站制作移动版本，我想知道 Windows 手机是否使用 IE 作为浏览器？如果是这样，它是否支持 CSS3？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:42:51.893

WP7手机上的浏览器确实是基于IE的。它们支持基本的 CSS3 特性，但肯定不是全部。您必须查阅功能支持图表，这些图表很容易通过谷歌搜索找到（例如，[这个](http://www.quirksmode.org/m/css.html)）。

有趣的是，“Mango”版本的手机似乎基本上运行的是 IE7（基于我可以通过查看 IE7 中的页面来重现 WP7 问题的事实）。据说，较新的基于 IE9。

最终，在为移动设备编写网页时最好是相当保守的。那里有很多旧手机，如果您的网站使用所有最先进的技术，它们就会崩溃。请记住，即使手机在技术上支持动画等功能，但如果它是旧手机，它可能不一定是很好的体验。

# c++ - C++ 创建一个类的实例

> ID：12186805
> 
> 赞同：0
> 
> 时间：2012-08-29T21:30:17.583
> 
> 标签：c++, oop, class, methods, overriding

```
class Game {
  private:
    string title;
    bool running;
    State currentState;

  public:
    sf::RenderWindow window;
    void setup();
    void run();
}; 
```

我有一个名为 currentState 的变量。这是状态：

```
#ifndef STATE_HPP
#define STATE_HPP

using namespace std;

class State {
  private:

  public:
    void start();
    void update();
    void render();
};

#endif 
```

然后我有一个名为 PlayState 的类，它继承了 State：

```
#ifndef PLAY_STATE_HPP
#define PLAY_STATE_HPP

#include <SFML/Graphics.hpp>

#include "Game.hpp"
#include "State.hpp"

using namespace std;

class PlayState : public State {
  private:
    sf::CircleShape shape;
    Game game;

  public:
    PlayState();
    void start();
    void update();
    void render();
};

#endif 
```

在我的 Game.cpp 上，我正在创建 currentState，方法是：

```
currentState = PlayState(); 
```

但是，问题是它不起作用。currentState.update() 是 state.update()。创建 PlayState 时，我似乎**没有覆盖 State 方法**。

这是 PlayState.cpp：

```
#include <SFML/Graphics.hpp>
#include <SFML/Window.hpp>
#include <stdio.h>

#include "PlayState.hpp"

PlayState::PlayState() {
  printf("heyyy\n");
}

void PlayState::start() {
  shape.setRadius(100.f);
  shape.setOrigin(20.0f, 20.0f);
  shape.setFillColor(sf::Color::Green);
}

void PlayState::update() {
  sf::Event event;
  while (game.window.pollEvent(event)) {
    if (event.type == sf::Event::Closed) {
      game.window.close();
      //running = false;
    }
  }

  printf("here\n");
}

void PlayState::render() {
  printf("here\n");
  game.window.clear();
  game.window.draw(shape);
  game.window.display();
} 
```

关于如何“覆盖”这些方法的任何想法？谢谢你。

**编辑** 我必须使 State.cpp 函数成为虚拟函数，以便它们可以被覆盖。我还必须将 State *currentState 定义为指针并使用“currentState = new PlayState();”创建 PlayState。另外，现在我使用 ->update() 和 ->draw() 访问 .update 和 .draw。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:39:23.647

Two problems. As @McAden said, the functions in `State` that are to be overridden in `PlayState` need to be marked virtual. The other problem is that the data member `currentState` in `Game` has type `State`. When you assign an object of type `PlayState` to it, it gets the `State` part of the `PlayState` object, but not the derived parts. This is called "slicing". To prevent it, make `currentState` a pointer to `State`, and when you create that `PlayState` object, assign its address to the `Game` object's `currentState`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:32:25.000

您正在寻找的是虚函数的概念。

[维基百科条目](http://en.wikipedia.org/wiki/Virtual_function)

国家需求：

```
virtual void update(); 
```

PlayState 需要：

```
void update(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T22:10:12.747

您需要使用虚拟修饰符来制作您的函数，即。

```
virtual void Update(); 
```

当调用 currentState->Update() 时，这将调用最顶层的重写函数，如果你想调用类方法中的任何父类函数，只需指定 ie。状态::更新(); 调用函数时。

# c++ - 使用指针算术释放内存

> ID：12186809
> 
> 赞同：0
> 
> 时间：2012-08-29T21:30:27.200
> 
> 标签：c++

C++ 新手在这里。我正在尝试仅使用指针编写自己的数组实现，但我碰壁了，我不知道如何克服。

我的构造函数抛出此错误

```
array.cpp:40:35: error: invalid conversion from ‘int*’ to ‘int’ [-fpermissive] 
```

当我的数组初始化时，我希望它为整数释放数组中的所有空间。

```
Array::Array(int theSize){
size = theSize;
int *arrayPointer = new int; 
int index = 0;
while(theSize > index){
  *(arrayPointer + index) = new int; //This is the trouble line.
  ++index;
 }
} 
```

我在做什么错stackoverflow？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:33:08.720

`arrayPointer`指向单个`int`，它不指向 的数组`int*`，这行需要：

```
*(arrayPointer + index) = new int; 
```

但类型`*(arrayPointer + index)`是 an `int`，因此编译器错误。

分配一个数组`int`：

```
int* arrayPointer = new int[size]; 
```

如果这是为了初始化一个成员变量，那么：

```
arrayPointer = new int[size]; 
```

否则`arrayPointer`将是构造函数的本地。由于该类现在有一个动态分配的成员，因此您需要同时实现复制构造函数和赋值运算符或防止复制（请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)）。记得`delete[] arrayPointer`在析构函数中。

* * *

只是提到`std::vector<int>`，即使这是一个学习练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:41:52.280

执行以下操作：

```
#include <cstddef>

template <typename T>
class Array
{

public:

    T* const arrayPointer; // arrayPointer can't be reallocated
    const size_t size; // size can't change

    Array(const int theSize) : arrayPointer(new T[theSize]),
                               size(theSize) {}

    ~Array() {
        delete[] arrayPointer;
    }

private:

    Array(const Array& other) {} // forbid copy

    Array& operator= (const Array& other) {} // forbid assignment

} ; 
```

*   为什么要使用`template <typename T>`？因此，您可以拥有任何类型的数组。
*   为什么要使用`new T[ theSize ]`？所以你可以同时分配`theSize`元素。
*   为什么要使用`: arrayPointer( new T[ theSize ])`？因此，如果分配失败（由于 theSize 太大），对象会在没有初始化的情况下失败。它被称为 RAII。
*   为什么要使用`delete [] arrayPointer`？因为您使用`new[]`了并且必须释放整个数组。
*   为什么是那些`const`？避免任何人更改数组的大小并使字段不一致。
*   这些私有方法是什么？他们禁止复制，所以没有人可以制作`array1 = array2; delete array2;`，什么会释放array1的arrayPointer。

用法（它将分配 10 个 int 的数组：）

```
Array< int > arr( 10 ) ; 
```

使用权：

```
arr.arrayPointer[ 0 ] = 5 ; 
```

注意 - 您可以访问`arrayPointer`范围 0..9 的单元格。您可以添加`operator[]`到您的类以避免使用`arrayPointer`和使用`arr[ 0 ]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:36:54.273

您提到的那一行试图将 int* 设置为 int var => 取消引用 int* 提供 int ：

```
*(arrayPointer + index) // is a int 
```

无论如何，您正在您尚未保留的内存中移动（并取消引用内存）。因此，您可以通过执行此指令来访问受保护的内存区域。

将所有构造函数替换为：

```
Array::Array(int theSize)
{
    size = theSize;
    arrayPointer = new int[theSize]; // Replace your local var with a member one. Else you will lose your array ;)
} 
```

# r - RODBC sqlQuery() 在成功执行时返回错误消息

> ID：12186814
> 
> 赞同：1
> 
> 时间：2012-08-29T21:31:01.667
> 
> 标签：r, rodbc

这是一个时间敏感/紧急问题。我有一些 R 代码，其中涉及使用 RODBC 包的许多 SQL 查询。这段代码每天早上都在专用的 Linux 服务器上运行——它会提取一些数据，进行一些统计，然后将数据重新插入 MSSQL DB。

今天，我们的 sysarch 升级到 Ubuntu 12.04.1，从那时起，我遇到了一堆 ODBC 问题。在进行了一些更改之后，我们得到了它，以便可以建立 ODBC 连接，但现在有一个更大的问题。基本上，每次执行 CREATE 或 DROP 命令时，我都会从 RODBC 收到错误消息，即使已创建/删除了已识别的表。示例（`bts.connect`是 的结果`odbcConnect([connection information])`）：

```
> sqlQuery(bts.connect, "SELECT OBJECT_ID('tempdb.dbo.#tempscores')")
1 1050250967 
```

所以#tempscores 表存在

```
> sqlQuery(bts.connect, "DROP TABLE #tempscores")
[1] "[RODBC] ERROR: Could not SQLExecDirect 'DROP TABLE #tempscores'" 
```

即使它存在，我们也“不能”放弃它

```
> sqlQuery(bts.connect, "SELECT OBJECT_ID('tempdb.dbo.#tempscores')")
1 NA 
```

但是我们已经放弃了它。

```
> sqlQuery(bts.connect, "CREATE TABLE #tempscores (dummy int)")
[1] "[RODBC] ERROR: Could not SQLExecDirect 'CREATE TABLE #tempscores (dummy int)'" 
```

我们也无法创建它，但它存在并且我们可以从中选择：

> sqlQuery(bts.connect, "SELECT OBJECT_ID('tempdb.dbo.#tempscores')") 1 1066251024 sqlQuery(bts.connect, "SELECT * FROM #tempscores") [1] dummy <0 rows> (或 0-length行名称）

我束手无策，我真的需要这个明天早上为客户成功运行。有人知道是什么导致了这种奇怪的行为吗？

# jquery - IE7 中的 jQuery .get 和 .append 使当前内容消失

> ID：12186817
> 
> 赞同：1
> 
> 时间：2012-08-29T21:31:14.157
> 
> 标签：jquery, internet-explorer, jquery-get

该代码适用于 Firefox、Safari、Chrome 和 IE8+，但不适用于 IE7。它会导致内容消失。我在 IE 中尝试过开发人员工具，如果我找到内容中的某一行并向其中添加任何 CSS，则内容会重新出现。

我在滚动事件上调用以下代码。当`$(document).scrollTop()`接近某个值时。

```
$.get('NewMoviesSub.aspx?c=' + (currentSet * 25).toString(), {
    curset: (currentSet * 25)
}, function(data) {
    var content = $(data).find('.movieTable');
    $("#MoviesDiv").append(content);
});​ 
```

我已经逐步完成了所有其他代码，并且在代码中触发`$("#MoviesDiv")`时内容消失了。`.append`由于 get 是异步的，因此内容的更改发生在对函数的初始调用之后的某个时间。所以这就是为什么我什至关闭了滚动功能并尝试了一个按钮调用以确保该函数只被调用一次。但是内容还是消失了。

此代码旨在帮助我不断获得越来越多的电影。

中找到的新内容`('.movieTable')`是一个包含更多电影行的表格。无论我使用`.append`还是`.appendTo`得到相同的结果。

我查看了其他示例，其中 .append 对其他人不起作用，我尝试了几种解决方案，但没有一个对我有帮助。

`content`编辑：如果您访问[https://www.clearplay.com/NewMovies.aspx](https://www.clearplay.com/NewMovies.aspx)，控制台将输出现在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:18:16.333

我正在寻找另一个问题的另一种解决方案，我遇到了这个问题：[Nick Berardi 的回答](https://stackoverflow.com/a/1228452/1280057)

他的回答是提供一种修复 IE 6 和 7 的方法，当更改 DOM 时，IE 不会更新。解决方法是使父元素重绘。他建议使用 jQuery css display none 和 block。我在我的问题上对其进行了测试，它可以很好地解决症状。

我仍然希望对这个问题有一个真正的解决方案，但由于我不能花更多时间在它上面，所以我正在写这篇文章。

编辑：这只是轻微的工作。只要您不将鼠标悬停在海报上，它们仍然会显示出来，但是当您滚动一段距离时，浏览器也需要很长时间才能重新显示整个内容。

# php - 如何在 Zend Framework 中显示自定义错误消息？

> ID：12186819
> 
> 赞同：0
> 
> 时间：2012-08-29T21:31:20.517
> 
> 标签：php, zend-framework

我有一个采埃孚申请。在我的 bootstrap.php 中，我为我的应用程序定义了路由。现在，当我在地址栏中键入一个与任何路由都不匹配的 URL 时，我收到一个致命错误。我不想这样，我只想显示“找不到页面”错误。应用程序为什么会抛出致命错误，而不是转到我的错误控制器？

这是我的路线的样子：

```
$router->addRoute('page1',
        new Zend_Controller_Router_Route_Static('page1', array(
            'controller' => 'mycontroller',
            'action' => 'index',
            'id' => '2626'
        ))
    ); 
```

例如，如果我浏览到 /page2，我会收到一个致命错误，因为它无论如何都会转到“mycontroller”，并尝试执行我在该控制器中执行的操作。但我不想让它去那里。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:31:02.917

ErrorController 应该是这样的。

```
class ErrorController extends Zend_Controller_Action {

  public function errorAction() {
    $errors = $this->_getParam('error_handler');

    if (!$errors || !$errors instanceof ArrayObject) {
      $this->view->message = 'You have reached the error page';
      return;
    }

    switch ($errors->type) {
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ROUTE:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
        // 404 error -- controller or action not found
        $this->getResponse()->setHttpResponseCode(404);
        $priority = Zend_Log::NOTICE;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = "Page Not Found";
        $this->renderScript('error/error_404.phtml');
        break;
      default:
        // application error
        print_r($this->getResponse());
        $this->getResponse()->setHttpResponseCode(500);
        $priority = Zend_Log::CRIT;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = 'Application error';
        if ($log = $this->getLog()) {
        $log->log($this->view->message, $priority, $errors->exception);
        $log->log('Request Parameters', $priority, $errors->request->getParams());
        $this->renderScript('error/error_500.phtml');
        }

    // conditionally display exceptions
        if ($this->getInvokeArg('displayExceptions') == true) {
                $this->view->exception = $errors->exception;
        }

        $this->view->request = $errors->request;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->renderScript('error/error_500.phtml');
        break;
    }

    // Log exception, if logger available
    if ($log = $this->getLog()) {
      $log->log($this->view->message, $priority, $errors->exception);
      $log->log('Request Parameters', $priority, $errors->request->getParams());
    }

    // conditionally display exceptions
    if ($this->getInvokeArg('displayExceptions') == true) {
      $this->view->exception = $errors->exception;
    }

    $this->view->request = $errors->request;
  }

  public function getLog() {
    $bootstrap = $this->getInvokeArg('bootstrap');
    if (!$bootstrap->hasResource('Log')) {
      return false;
    }
    $log = $bootstrap->getResource('Log');
    return $log;
  }

} 
```

呸！[您可以使用$this->getResponse()->HttpResponseCode()](http://framework.zend.com/manual/en/zend.http.response.html)定义*任何* [HTTP 状态](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)响应代码

此外，我们根据最佳实践（在引号中）检查是否需要 LOGS。！

问题？:)

# ruby-on-rails - 如何模仿从联系我们页面红宝石的指定电子邮件发送的邮件

> ID：12186822
> 
> 赞同：0
> 
> 时间：2012-08-29T21:31:28.070
> 
> 标签：ruby-on-rails, ruby, email, actionmailer

我按照[本教程](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)从 Rails 发送电子邮件，它工作得很好。但我想为我的应用程序改进这一点。如果有人要使用联系我们页面，我真的不想一直收到自己的电子邮件。目前我将邮件设置设置为我自己的电子邮件并发送到我自己的电子邮件。我的问题是，有没有办法设置它，使我从通过联系我们页面发送的电子邮件中收到的邮件是他们在表格中输入的电子邮件？

为了澄清，例如在标准的联系我们页面中，有名称、电子邮件、主题、正文。现在当我将邮件发送给自己时， :from 和 :to 参数是我自己的电子邮件，有没有办法将邮件的 :from 参数设置为页面上指定的电子邮件？我尝试将 mail(:subject => "[YourWebsite.tld] #{message.subject}") 更改为 mail(:from => "#{message.from}", :subject => "[YourWebsite.tld] #{message.subject}") 但这似乎不起作用，我不太确定用谷歌搜索这个特定问题，因为我想出的大多数联系我们页面教程都与我已经完成的相似尝试过，这更具体地用于向他人发送邮件而不是接收。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:41:48.107

您不应尝试更改 from 字段；大多数邮件服务器不会让您出于明显的原因。您应该能够做的是在地址框中添加一个带有电子邮件的回复标题（尽管这通常是虚假的，尤其是垃圾邮件）。当然要非常小心地验证您的输入。

顺便说一句，我会为您的服务器设置一个单独的电子邮件用户来发送，以避免使用您自己的电子邮件帐户时出现问题。所以使用：

```
:reply_to => message.from 
```

# django - 这会创建备份并更新原始 Django 对象吗？

> ID：12186823
> 
> 赞同：0
> 
> 时间：2012-08-29T21:31:35.103
> 
> 标签：django, django-models, django-forms

这是进行备份和更新原始文件的明智方法吗？

```
 project = Project.objects.get(pk=project_id)                  
# ...
    if request.method == "POST": # If the form has been submitted...           
        project_form = ProjectForm(request.POST, instance=project)
        if  project_form.is_valid():
            project.save(force_insert=True)    # Make a backup copy

            updated_project = project_form.save(commit=False)
            updated_project.editor_id = editor_id
            if request.POST["beginyear"]:  by = int(request.POST["beginyear"])
            if request.POST["beginmonth"]: bm = int(request.POST["beginmonth"])
            if (by > 0) and (bm > 0):
                updated_project.begin_date = "%4.4d-%2.2d-01" % (by,bm,)
# ...
            updated_project.save() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:38:57.673

Is it working at all? I am asking if copy is properly saved, because for me it looks it doesn't: force_insert does what it says actually - it just makes INSERT request instead of UPDATE in SQL. What you need is to make copy - you can do it like that:

```
project.pk = None
project.save() 
```

* * *

I would also refactor it a little bit if you don't mind:

```
by = request.POST.get("beginyear")
bm = request.POST.get("beginmonth")
if by and bm:
    try:
        updated_project.begin_date = datetime.datetime(year=int(by), month=int(bm), day=1)
    except ValueError:
       #some handling here
       pass 
```

So now you don't have to initialize `by` and `bm` and I think it is more obvious what it does now.

# r - 变换色阶，但用 ggplot2 保留一个漂亮的图例

> ID：12186827
> 
> 赞同：15
> 
> 时间：2012-08-29T21:32:02.707
> 
> 标签：r, ggplot2

我已经看到了一些类似的问题，但我想尽可能直接地问我的具体问题：

我有一个散点图，其中“z”变量编码为色标：

```
library(ggplot2)
myData <- data.frame(x = rnorm(1000),
                     y = rnorm(1000))
myData$z <- with(myData, x * y)

badVersion <- ggplot(myData,
              aes(x = x, y = y, colour = z))
badVersion <- badVersion + geom_point()
print(badVersion) 
```

产生这个：![坏版本](../Images/5f4b174635b1ad15629b898c2db15598.png)

如您所见，由于“z”变量是正态分布的，因此很少有点用分布的“极端”颜色着色。这是应该的，但我有兴趣强调差异。一种方法是使用：

```
betterVersion <- ggplot(myData,
                        aes(x = x, y = y, colour = rank(z)))
betterVersion <- betterVersion + geom_point()
print(betterVersion) 
```

产生这个：![更好的版本](../Images/287c31f25d3c28400114bbcdc8f85c2f.png)

通过将 rank() 应用于“z”变量，我更加强调“z”变量内的细微差异。可以想象在这里使用任何转换，而不是排名，但你明白了。

我的问题是，本质上，什么是最直接的方式，或最“真正的 ggplot2”方式，以原始单位（z 的单位，而不是 z 的等级）获得图例，同时保持转换后的版本彩色点？

我有一种感觉，它以某种方式使用 rescaler()，但我不清楚如何使用 rescaler() 进行任意转换等。一般来说，更清晰的例子会很有用。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T04:24:33.400

`scales` 尤其是 看包装`?trans`

我认为在给定获得值或更极端的概率的情况下映射颜色的转换应该是合理的（基本上`pnorm(z)`）

我觉得`scale_colour_continuous(trans = probability_trans(distribution = 'norm')`应该有效，但它会引发警告。

所以我定义了一个新的转换（见`?trans_new`）

我必须定义一个变换和一个逆

```
library(scales)
norm_trans <- function(){
  trans_new('norm', function(x) pnorm(x), function(x) qnorm(x))
}

badVersion + geom_point() + scale_colour_continuous(trans = 'norm')) 
```

![在此处输入图像描述](../Images/4917da6986b51605b4fc689494c82919.png)

使用提供的`probability_trans`会引发警告并且似乎不起作用

```
# this throws a warning
badVersion + geom_point+
  scale_colour_continuous(trans = probability_trans(distribution = 'norm'))

## Warning message:
## In qfun(x, ...) : NaNs produced 
```

![在此处输入图像描述](../Images/6740f16ce6c98ff6fab4fad4d7ace296.png)

# javascript - 在ajax调用后保留一个javascript变量

> ID：12186835
> 
> 赞同：0
> 
> 时间：2012-08-29T21:32:27.537
> 
> 标签：javascript, jquery, ajax

我是 javascript 和 jQuery 的新手。我正在使用 ajax 调用从我的服务器获取数据。事实是，调用后我丢失了我的 javascript 变量。这就是我所做的：该变量在任何函数之外定义并在另一个函数中处理。

```
var a = 0;
function myfunction(url){
$.ajax({
        url: url,
        timeout: 20000,
        success: function(data){
                  // Do some stuff
                  // The a variable is now undefined
                },
        error: function(){
                  // Do some stuff
                }
       });
} 
```

一切正常，唯一的事情是我需要保留我的变量......但看起来它已经消失了......

有谁知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:37:35.163

你说你在另一个函数中使用你的变量（但不要向我们展示那个函数）。但是，该函数可能在您的 AJAX 调用完成之前运行。这就是“异步”的含义——它们不会同时发生。

要解决此问题，请在回调中添加更多代码`success`，它只会在`a`变量更改后运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:40:32.310

这有效，并且 url 确实在范围内。你应该检查的是你是否得到一个错误——这将阻止成功运行（在那里扔一个`alert("error");`或类似的东西来测试）。

我在 FireFox 中使用 Firebug 来帮助我。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">

var a = 0;

function doSomething (url){
    $.ajax({
            url: url,
            timeout: 20000,
            success: function(data){
                      alert(a);
                    },
            error: function(){
                      // Do some stuff
                    }
           });
    }

</script>

<a href="#" onclick="doSomething('variableScope.html'); return false;">Do it</a> 
```

# mysql - 将数据框写入 MySql DB 表

> ID：12186839
> 
> 赞同：14
> 
> 时间：2012-08-29T21:32:39.073
> 
> 标签：mysql, r

如何将数据框`R`写入`MySQL`？

```
dateTime            host    authId     sessionId      status                    action 
2012-08-22 14:58:23 foo.com 221501398 2c10b368ae23ba3        questions#instant_answers
2012-08-22 14:58:23 foo.com 221501398 22c10b368ae23                      questions#new
2012-08-22 14:58:23 foo.com 221501398 01a36f64bd3f80c                     sessions#new 
```

我想一次将数据帧全部写入`MySQL`数据库表。我已经使用`RMySql`包连接并建立连接。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-29T23:05:25.583

使用 dbWriteTable 函数。它看起来像这样：

```
dbWriteTable(connection, value = data.frame, name = "MyTable", append = TRUE ) 
```

该功能有据可查。

PS 另请看： [RMySQL dbWriteTable with field.types](https://stackoverflow.com/questions/8864174/rmysql-dbwritetable-with-field-types)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T21:42:48.010

参见SQL`help(dbSendQuery)`中的通用`update ...`语句，并将`help(dbWriteTable)`整个数据框写入新表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T14:53:45.990

使用下面的命令对我有用。请注意，这会将行追加`yourtable`到名为`yourTableInMySQL`.

```
library(RMySQL)
dbWriteTable(con, "yourTableinMySQL", yourtable, append = TRUE) 
```

# facebook - Google+ 和 facebook api/rss 提要，例如 twitter api 提要

> ID：12186841
> 
> 赞同：0
> 
> 时间：2012-08-29T21:32:49.060
> 
> 标签：facebook, feed, google-plus

我搜索了很多，我也可以在 StackOverflow 中看到一些与我相同的问题，但没有得到答案。

我需要获取他/她的帐户下发布的任何用户（google+ 和 facebook）消息，并将其作为 xml 响应提供给移动应用程序，该应用程序将用户帖子显示为更好的格式/设计 - 所以在这里我需要获取使用个人资料 ID/用户名来自 google+/facebook 的帖子。

例如：就像从 twitter 我可以看到状态

[https://api.twitter.com/1/statuses/user_timeline.xml?include_entities=true&include_rts=true&screen_name=screenname&count=2](https://api.twitter.com/1/statuses/user_timeline.xml?include_entities=true&include_rts=true&screen_name=screenname&count=2)

有没有任何图书馆或任何特定的方式可以让我得到它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:14:31.523

我只能与 Facebook 和 Twitter 交谈，因为它们是我使用过的仅有的两个社交媒体 API。

这两个 API 都是 RESTful 服务。对于 Twitter 和 Facebook，您需要在透视平台上创建应用程序，以便为将通过 RESTful 服务获取数据的应用程序 获取[OAuth令牌。](http://oauth.net/2/)

对于 FaceBook，您可以利用[Graph API Explorer](http://developers.facebook.com/tools/explorer/?method=GET&path=54604796)进行开发。这使您无需在 FaceBook 平台上创建应用程序即可进行开发。

FaceBook 和 Twitter 都有社区驱动的项目，用于以各种语言访问这些 Web 服务。由于您正在为 Android 执行此操作，因此我假设您希望您的程序能够在 Java 中获取此数据。

**[RestFB](http://restfb.com/)**是我对 Java FaceBook 库的推荐

```
FacebookClient facebookClient = new DefaultFacebookClient(authToken);
User facebookUser = facebookClient.fetchObject("me", User.class); 
```

**[Twitter4j](http://twitter4j.org/en/index.html)**是一个很棒的 Java Twitter 库

对于[FaceBook](http://developers.facebook.com/docs/coreconcepts/)，核心概念是一个很好的起点。有关 Twitter 的更多信息，请参阅[概述文档](https://dev.twitter.com/start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:06:29.413

您可以使用 Google+ 的活动 API。这目前仅限于公开帖子，但应该足以让您入门。配置文件 ID 来自用户的配置文件。您还可以通过其他方式获取此内容，包括搜索 API。

可以在 Google plus 页面 (https://developers.google.com/+/api/latest/activities) 上找到各种语言的文档和简单示例，以下 JavaScript 示例可能有助于了解事物的工作原理：

```
// globals used for auth, showing debugging
var debug = true;
var key   = "your api key from https://code.google.com/apis/console";

function handleRequestIssue(request){
    // For now, just show the error
    console.log("Error, status:" + request.status + " /  response:" + request.responseText);
}

function performXHR(URL){
  var objReturn = "";      
  var request = new XMLHttpRequest();
  request.open('GET', URL, false);
  request.send(); // because of "false" above, will block until the request is done 
                  // and status is available. Not recommended, however it works for simple cases.

  if (request.status === 200) {
    if (debug) console.log(request.responseText);
    var objReturn = jQuery.parseJSON(request.responseText).items;

    if (debug){
      for (value in objReturn){
        console.log(value);
      }
    } 
  }else{
    handleRequestIssue(request);
  }
  return objReturn;
}

// Gets the activities for a profile
function getActivities(profileID){
  var activities = null;      
  var URL        = "https://www.googleapis.com/plus/v1/people/" + profileID + "/activities/public?alt=json&key=" + key;
  activities     = performXHR(URL);
  console.log(activities.length);
  return activities;
} 
```

此时您可以在调试器中看到活动。您始终可以将内容呈现为 div 或其他内容中的 HTML。

```
function renderActsComments(activities, identifier, filter){
    var renderMe = "";
    console.log("activities retrieved: " + activities.length);

    for (var i=0; i < activities.length; i++) {
      var render = true;
      console.log("trying to do something with an activity: " + i);
      var activity = activities[i];
      if (filter != null && filter.length > 0){
        if (activity.crosspostSource.indexOf(filter) == -1){
          render = false;
        }
      }

      if (render == true){
        renderMe += "<br/><div class=\"article\"><p>" + activity.title + "</p>";
        console.log(activity.id);

        // get comments
        var comments = getCommentsForActivity(activity.id);
        var left = true;
        for (var j=0; j<comments.length; j++){
          if (left){
            left = false;
            renderMe += "<br/><p class=\"speech\">" + comments[j].object.content + "</p>";
            renderMe += "<a href=\"" + comments[j].actor.url + "\">" + comments[j].actor.displayName + "</a>";
            renderMe += "<a href=\"" + comments[j].actor.image.url.replace(/\?.*/, "") + "\">";
            renderMe += " <img border=0 src=\"" + comments[j].actor.image.url + "\"/></a>";
            renderMe += "</p>";
          }else{
            renderMe += "<br/><p class=\"speechAlt\">" + comments[j].object.content + "</p>";
            left = true;
            renderMe += "<p class=\"profileAlt\">";
            renderMe += "<a href=\"" + comments[j].actor.image.url.replace(/\?.*/, "") + "\">";
            renderMe += "<img border=0 src=\"" + comments[j].actor.image.url + "\"/></a>";
            renderMe += "<a href=\"" + comments[j].actor.url + "\"> " + comments[j].actor.displayName + "</a>";
            renderMe += "</p>";
          }
        }
        renderMe += "</div>";
      }
    }
    console.log("I'm done");

    document.getElementById(identifier).innerHTML = renderMe;
    return renderMe;
} 
```

# java - JOptionPane 给出错误

> ID：12186842
> 
> 赞同：2
> 
> 时间：2012-08-29T21:32:52.830
> 
> 标签：java, swing, joptionpane, event-dispatching, substance

我想使用`JOptionPane`s 处理一些异常。这是主要方法：

```
public class MainRun {

public static void main(String args[]){    
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                UIManager.setLookAndFeel(new SubstanceRavenGraphiteGlassLookAndFeel());
            }catch (Exception e){
                e.printStackTrace();
            }                 
            new MainGui().setVisible(true);                
            new Initialized().start();
            new PriorityMessageQueue().start();
        }
    }); 
```

`MainGui`是应用程序的主窗口 ( `JFrame`)。`PriorityMessageQueue`我在线程内处理了异常。

```
public class PriorityMessageQueue extends Thread {

@Override
public void run() {

    while (true) {
        try {
            instantMessages = instant.getMobitelMessagesToBeSent();
        } catch (Exception ex) {
                        JOptionPane.showMessageDialog(
                        null,
                        ex.getMessage(),
                        "Database Error",
                        JOptionPane.ERROR_MESSAGE);

        }

        ... 
```

运行此程序后，出现错误

```
 org.jvnet.substance.api.UiThreadingViolationException: Component creation must be done on Event Dispatch Thread
at org.jvnet.substance.utils.SubstanceCoreUtilities.testComponentCreationThreadingViolation(SubstanceCoreUtilities.java:2312)
at org.jvnet.substance.SubstanceOptionPaneUI.createUI(SubstanceOptionPaneUI.java:83)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:37)
at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:244)
at javax.swing.UIDefaults.getUI(UIDefaults.java:752)
at javax.swing.UIManager.getUI(UIManager.java:989)
at javax.swing.JOptionPane.updateUI(JOptionPane.java:1859)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1822)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1785)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1753)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1731)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1711)
at GUI.MainGui.showOptionPane(MainGui.java:1039)
at SMS.PriorityMessageQueue.run(PriorityMessageQueue.java:86)
    UIDefaults.getUI() failed: createUI() failed for
      javax.swing.JOptionPane
   [,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.0,border=,flags=0,maximumSize=,minimumSize=,p
   referredSize=,icon=,initialValue=,message=DatabaseConnection class
   connect,messageType=ERROR_MESSAGE,optionType=DEFAULT_OPTION,wantsInput=false]
   java.lang.reflect.InvocationTargetException
   java.lang.Error
at javax.swing.UIDefaults.getUIError(UIDefaults.java:712)
at javax.swing.MultiUIDefaults.getUIError(MultiUIDefaults.java:133)
at javax.swing.UIDefaults.getUI(UIDefaults.java:758)
at javax.swing.UIManager.getUI(UIManager.java:989)
at javax.swing.JOptionPane.updateUI(JOptionPane.java:1859)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1822)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1785)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1753)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1731)
at javax.swing.JOptionPane.<init>(JOptionPane.java:1711)
at GUI.MainGui.showOptionPane(MainGui.java:1039)
at SMS.PriorityMessageQueue.run(PriorityMessageQueue.java:86) 
```

并且`JOptionPane`将无法正常显示！

![在此处输入图像描述](../Images/aea122008c6407209bd5f8276a53c6e0.png)

我怎样才能获得 parentComponent ( )，而不是传递`null`给？`JOptionPane``MainGui` `JFrame`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T21:38:11.963

A `JOptionPane` is a mini Swing GUI, and like all Swing GUIs, it must be created on the Swing event thread, not on a background thread. This can be done by creating your `JOptionPane` in a `Runnable` and then queuing the `Runnable` on the event thread:

```
SwingUtilities.invokeLater(new Runnable() {
  public void run() {
    JOptionPane.showMessageDialog(....);
  }
}); 
```

For example,

```
} catch (Exception ex) {
   final String exMessage = ex.getMessage();

   SwingUtilities.invokeLater(new Runnable() {
     public void run() {
       JOptionPane.showMessageDialog(
         null,
         exMessage,
         "Database Error",
         JOptionPane.ERROR_MESSAGE);
       );
     }
   });
  }
} 
```

As for your question,

> Instead of passing `null` to `JOptionPane`, how can I get the parentComponent (`MainGui` `JFrame`)?

You'll need a reference to the main GUI. How you get this will depend on how your program is organized.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T22:33:06.407

*   `Substance`EDT 非常敏感，所有更新都必须在 EDT 上完成

*   否则你只能从ts中看到`toolbar`（来自`Native OS`）`Swing JComponen`

*   或例外`RepaintManager`（我认为来自`Trident`包装）

*   `JOptionPane`必须包裹在`invokeLater()`中，然后你的`JOptionPane`coudl 是可见的，

*   我认为你`exception`在谈论另一个问题，隐藏在你的代码中的东西，也许没有什么东西 used `Substance L&F`，这是次要问题

# python - Python检测损坏的编码

> ID：12186847
> 
> 赞同：1
> 
> 时间：2012-08-29T21:33:14.910
> 
> 标签：python, encoding

在爬取了许多网站后，在其中一些网站中，我收到了损坏的编码数据。我对它们无能为力，我只需要检测它们。例如像这样的文本：

> ·ç¼wÃdª«¦Ê³f

或者

> ãà³n³¾å¢

我怎样才能识别这样的文字？我是任何语言，所以搜索非英语文本不是一种选择。我能想到的唯一选择是**猜测语言**模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:35:18.017

[NLTK](http://nltk.org/)有一个[`guess_encoding`](http://nltk.org/api/nltk.html#nltk.util.guess_encoding)函数，它接受一个字节字符串并尝试所有可用的编码，这是否符合您的目的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:42:04.630

看看[https://github.com/LuminosoInsight/python-ftfy](https://github.com/LuminosoInsight/python-ftfy)

如果我理解正确，它将尝试“修复”错误编码/解码的文本。

# c# - 仅针对一个命名空间解析 XML

> ID：12186851
> 
> 赞同：2
> 
> 时间：2012-08-29T21:33:52.330
> 
> 标签：c#, xml, xml-parsing

我只需要解析一个名称空间的 XML 文件。

“仅关于一个命名空间”是指如果我有这样的文档：

```
<xc:document xmlns:xc="asdasd">
  <asdf>
    <xc:abcd />
  </asdf>
</xc:document> 
```

我希望`<asdf>`,`</asdf>`被视为文本。

本文档的结构应如下所示：

```
document
|
|- text (<asdf>)
|- abcd
|- text (</asdf>) 
```

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:42:00.567

首先使用 xslt 转换文档，以便您希望将其视为文本的节点实际上是文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:38:46.973

几乎任何 XML 解析器都会失去区分，例如使用单引号还是双引号，或者使用 CDATA 部分，或者标签内的空格（而不是标签之间）。

所以：<boy socks="black" ></boy> 可能会以 <boy socks='black'/> 的形式返回

如果您想将输入视为不是 XML，您将不得不求助于非 XML 工具，*或者*完全重新考虑您的情况，因为这是一件非常不寻常的事情。

如果您小心的话，使用 Perl 这样的文本处理语言是相当容易的。例如，

```
perl -p -e 's#<(/?[^:]+[\s>])#\&lt;$1#g' 
```

通过将要视为文本的 < 符号更改为 < 将有很长的路要走 反而。如果您在 Perl 中读取整个文件而不是（如本例中）一次读取一行，那么这种方法实际上效果最好，这样您就可以匹配分布在多行上的关闭标签，

```
</boy
> like this. 
```

但是，最好使用 XML 解析器而不是正则表达式来解析 XML，所以如果我上面提到的那种更改是可以的，这在 XSLT 中真的很容易做到。

# c++ - 关于 C++ 中的局部和全局静态变量

> ID：12186857
> 
> 赞同：35
> 
> 时间：2012-08-29T21:34:24.400
> 
> 标签：c++, static

C++ Primer 说

> 每个局部静态变量在第一次执行通过对象的定义之前被初始化。当函数结束时，局部静态不会被破坏；它们在程序终止时被销毁。

**局部静态变量与全局静态变量有什么不同吗？除了声明它们的位置之外，还有什么不同？**

```
void foo () {   
    static int x = 0;
    ++x;

    cout << x << endl;
}

int main (int argc, char const *argv[]) {
    foo();  // 1
    foo();  // 2
    foo();  // 3
    return 0;
} 
```

与之比较

```
static int x = 0;

void foo () {   
    ++x;

    cout << x << endl;
}

int main (int argc, char const *argv[]) {
    foo();  // 1
    foo();  // 2
    foo();  // 3
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-29T21:38:52.510

区别在于：

*   该名称只能在函数内访问，并且没有链接。
*   它在执行第一次到达定义时被初始化，不一定在程序的初始化阶段。

第二个区别对于避免*静态初始化顺序惨败*很有用，其中全局变量可以在初始化之前访问。通过将全局变量替换为返回对局部静态变量的引用的函数，您可以保证在任何访问它之前对其进行初始化。（但是，仍然不能保证在任何东西完成访问它之前它不会被销毁；如果您认为您需要一个全局可访问的变量，您仍然需要非常小心。请参阅评论以获取在这种情况下提供帮助的[链接](https://stackoverflow.com/a/335746/14065)。 )

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-29T21:37:54.297

他们的范围不同。文件中的任何函数都可以访问全局范围的静态变量，而函数范围的变量只能在该函数内访问。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-24T10:07:24.580

希望这个例子有助于理解静态局部变量和全局变量之间的区别。

```
#include <iostream>

using namespace std;

static int z = 0;

void method1() {
    static int x = 0;
    cout << "X : " << ++x << ", Z : " << ++z << endl;
}

void method2() {
    int y = 0;
    cout << "Y : " << ++y << ", Z : " << ++z << endl;
}

int main() {
    method1();
    method1();
    method1();
    method1();
    method2();
    method2();
    method2();
    method2();
    return 0;
} 
```

输出：

```
X : 1, Z : 1
X : 2, Z : 2
X : 3, Z : 3
X : 4, Z : 4
Y : 1, Z : 5
Y : 1, Z : 6
Y : 1, Z : 7
Y : 1, Z : 8 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-29T21:38:42.190

有真名是：

```
static storage duration object. 
```

全局变量也是“静态存储持续时间对象”。与全局变量的主要区别是：

*   它们在第一次使用之前不会被初始化
    注意：构造过程中的异常意味着它们没有被初始化，因此没有被使用。
    所以下次输入该函数时会重试。
*   它们的可见性受到其范围的限制
    （即在函数之外无法看到它们）

除此之外，它们就像其他“静态存储持续时间对象”一样。

注意：像所有“静态存储持续时间对象”一样，它们以与创建相反的顺序被销毁。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T21:40:16.207

主要或最严重的区别是初始化时间。局部静态变量在第一次调用声明它们的函数时被初始化。全局变量在调用 main 函数之前的某个时间点初始化，如果全局静态变量很少，它们会以未指定的顺序初始化，这可能会导致问题；这被称为静态初始化惨败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T21:40:18.700

在您的第一个代码块中，x 是 foo() 函数的本地函数，这意味着它是在 foo() 中创建的，并在函数结束时在 cout 之后销毁。但是，在您的第二个块中， x 是全局的，这意味着 x 的范围是整个程序。如果你想在 int main 下你可以 cout << x << endl 但是它会打印，在第一个块中它会说 x 没有声明

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-17T07:42:05.193

1.  程序中的所有函数都知道它们，而全局变量只在有限的范围内知道。
2.  全局静态变量可以在程序启动之前初始化，而局部静态变量可以在执行到达点时初始化。

# testing - 最佳自动化返工量

> ID：12186859
> 
> 赞同：0
> 
> 时间：2012-08-29T21:34:33.373
> 
> 标签：testing, automation, agile

在功能的开发周期中，功能不断变化，即使在满足所有要求（UI 改进等）之后也是如此。如果您对该功能进行了自动化测试，这些更改可能会破坏您的自动化，您将不得不对其进行返工。但是，如果功能不断变化，那么在每次修订后都重新进行自动化是没有意义的。但是，在某些时候，您必须将其自动化，以便进行回归测试。我们如何才能找到返工自动化的最佳时间？我们如何获得最佳数量？我的团队同意我们对其中一项功能的自动化进行了过度改造。我们犯的一个错误示例是在一次会议之前重新设计自动化，我们向客户展示了该功能以获得客户反馈。我们应该知道客户反馈会导致对该功能进行更多更改。在这种情况下，功能测试应该就足够了。有没有人有任何技巧或经验可以分享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:07:26.553

一般提示是在开始构建*之前*就“完成”对功能的含义达成共识。

如果在构建过程中您遇到了一些您想添加以改进功能（或其他）的新调整，请不要将它们添加到现有故事中 - 编写一个新故事......并确保您优先考虑它您需要做的其他事情。

这有时但并非总是表明您正在处理太大的功能增量。尝试进一步拆分和细化故事，直到您可以为该功能写下一些非常具体的“完成”定义。考虑在开始构建之前将这些“完成”测试自动化（但不要过火）。

您可能会找到使用[说明](http://specificationbyexample.com/)手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:42:20.643

根据我的经验，您一直在开发的功能还没有被客户完全理解。

像@adrianh 建议的那样，将功能分成小部分。

给不稳定的客户的另一个提示：让他们首先亲眼看到伪原型，甚至可能在计划会议上（直接将其编码为 html 或更简单的东西，例如原型/绘图工具）。让他们玩。这样，您将更轻松地使用您的功能。

# android - 从 WebView 到 HttpClient 共享 cookie/会话不起作用

> ID：12186865
> 
> 赞同：1
> 
> 时间：2012-08-29T21:35:33.430
> 
> 标签：android, cookies, webview, httpclient, share

我知道这个问题已经被问了一百次，我已经阅读并尝试了 2 个小时，但我找不到我的错误:-(

我正在尝试创建一个简单的网络浏览器，因此有一个网络视图，我可以在其中登录网站并访问图片区域。在 DefaultHttpClient 的帮助下，我希望能够在安全区域下载图片。因此，我试图从 webview 共享 cookie 并将它们传递给 HttpClient，以便它经过身份验证并能够下载。但是无论我尝试做什么，我总是会得到 403 响应...

基本上步骤如下：

1）输入URL，webview加载网站

2) 在表单中输入登录详细信息

3）导航到图片并长按上下文菜单

4) 检索图像 URL 并将其传递给 AsynTask 进行下载

这是带有 Cookie 内容的 AsyncTask 的代码：

```
protected String doInBackground(String... params) {

//params[0] is the URL of the image

            try
            {

                CookieManager cookieManager = CookieManager.getInstance();

                String c = cookieManager.getCookie(new URL(params[0]).getHost());               

                BasicCookieStore cookieStore = new BasicCookieStore();
                BasicHttpContext localContext = new BasicHttpContext();
                localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
                String[] cookieParts = null; 
                String cookies[] = null;

                cookies = c.split(";");

                for(int i=0;i<cookies.length;i++)
                {                   
                    cookieParts = cookies[i].split("=");
                    BasicClientCookie sessionCookie = new BasicClientCookie(cookieParts[0].trim(), cookieParts[1].trim());
                    sessionCookie.setDomain(new URL(params[0]).getHost());

                    cookieStore.addCookie(sessionCookie);                   
                }

                DefaultHttpClient httpClient = new DefaultHttpClient();

                httpClient.setCookieStore(cookieStore);

                HttpGet pageGet = new HttpGet(new URL(params[0]).toURI());

                HttpResponse response = httpClient.execute(pageGet, localContext);
                if(response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) 
```

--> 永远不会发生，总是得到 403

.) 问题之一是 webview 为主机 * *www 保存了一些 cookie。**example.com，但要下载的图像 URL (params[0]) 是 **静态的。**example.com。该行 `cookieManager.getCookie(new URL(params[0]).getHost());` 返回 null，因为 static.example.com 没有 cookie，而只有 www.example.com。

.) 当我手动说 cookieManager.getCookie("www.example.com"); 我得到了一些 cookie，我将它们添加到 HttpClient cookie 存储中：添加了 5 个 cookie - testcookie = 0 - PHPSESSID = 320947238someGibberishSessionId - email = my@email.net - pass = 32423te32someEncodedPassGibberish - user = 345542

因此，尽管这些 cookie、会话 ID 和其他内容被添加到 HttpClient，但它永远无法下载图像。我完全迷失了......虽然我猜它要么与 cookie 域有关，要么我仍然缺少其他 cookie。

但是，当我必须指定特定的 URL 来获取 cookie 时，我应该从哪里知道 web 视图中存在哪些 cookie？:-(

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T10:07:11.860

我想我们在上面的代码片段中让它变得太复杂了。使用这些简单的步骤 -

1)**从 webView 检索 cookie -**无论您的 webview 在哪里，都使用此代码重新

```
String cookie = CookieManager.getInstance().getCookie(
                        url.toString());
                Log.d("mytcs", "cookie downloadlistner " + cookie); 
```

2）**使用参数将其传递给您的下载 asyncTask** -

```
downloadImageTask = new DownloadImage();
                    downloadPDFTask.execute(url, cookie); 
```

（我假设你知道在 asyncTask 中检索这个 cookie，你将使用 params[ **1** ]，

3)**在你的 http 请求中设置这个 cookie** -

```
if (cookie != null)
    con.setRequestProperty("cookie", cookie); 
```

con在哪里`HttpURLConnection con;`

因此您可以根据需要设置它，在`HttpGet`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:16:13.263

您可能已经想出了答案，因为这是一个很晚的答案。但是，以防万一……

尝试这个。当您从 WebView 检索 cookie 时，只需`example.com`在域名中使用。在设置cookie`BasicClientCookie`和设置域时，将域名设置为`.example.com`. 注意“。” 在一开始的时候。现在，我认为会话应该在您的应用程序中的所有子域中工作。

# xampp - Apache 启动时崩溃 - W2008 服务器

> ID：12186867
> 
> 赞同：2
> 
> 时间：2012-08-29T21:35:46.837
> 
> 标签：xampp, apache

我在我的 Windows Server 2008 上安装了 Xampp。它运行良好，直到我决定安装一些更新。现在 Apache 不再启动，我收到这些错误；

```
[Wed Aug 29 23:31:20.328125 2012] [core:warn] [pid 1540:tid 312] AH00098: pid file
C:/xampp/apache/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
[Wed Aug 29 23:31:20.968750 2012] [ssl:warn] [pid 1540:tid 312] AH01873: Init:Session        Cache is not configured [hint: SSLSessionCache] 
```

我正在尝试在服务器上安装 Cacti 以监视所有内容...不要认为它是相关的，只是说

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:05:49.907

如果您仍然需要它： [http](http://httpd.apache.org/docs/2.4/upgrading.html#post_234) ://httpd.apache.org/docs/2.4/upgrading.html#post_234 Apache 2.4 将不会在 Windows 上添加 SSL 支持，直到启用附加模块（与 Apache 2.2 配置相比）：socache_shmcb_module

此附加信息位于 httpd-ssl.conf 的开头，但阅读它需要时间:)

```
# Required modules: mod_log_config, mod_setenvif, mod_ssl, socache_shmcb_module (for default value of SSLSessionCache) 
```

# php - 跨 3 个表的复杂多连接查询

> ID：12186870
> 
> 赞同：0
> 
> 时间：2012-08-29T21:36:46.423
> 
> 标签：php, mysql, join

我有 3 张桌子：

`shops`, 主键`cid,zbid`
`shop_items`, 主键`id`
`shop_inventory`, 主键`id`

`shops a`与`shop_items b`以下`a.cid=b.cid AND a.zbid=b.szbid` `shops`相关：与`shop_inventory`

`shop_items b`与`shop_inventory c`以下有关：`b.cid=c.cid AND b.id=c.iid`

现在，我想运行一个返回`a.*`（来自的所有列`shops`）的查询。那将是：

```
SELECT a.* FROM shops a WHERE a.cid=1 AND a.zbid!=0 
```

请注意，该`WHERE`子句是必要的。

接下来，我要返回每个商店的商品数量：

```
SELECT
  a.*,
  COUNT(b.id) items
FROM shops a
LEFT JOIN shop_items b ON b.cid=a.cid AND b.szbid=a.zbid
WHERE a.cid=1
GROUP BY b.szbid,b.cid 
```

如您所见，我添加了一个`GROUP BY`子句以使其起作用。

接下来，我想返回商店中每件商品的平均价格。这并不难：

```
SELECT
  a.*,
  COUNT(b.id) items,
  AVG(COALESCE(b.price,0)) average_price
FROM shops a
LEFT JOIN shop_items b ON b.cid=a.cid AND b.szbid=a.zbid
WHERE a.cid=1
GROUP BY b.szbid,b.cid 
```

我的下一个标准是它变得复杂的地方。我还想返回每个商店的唯一买家。这可以通过查询`shop_inventory c`、获取`COUNT(DISTINCT c.zbid)`. 现在记住这些表是如何相关的；这只应针对与相应商店拥有`c`的商品相关的行进行。`b``a`

我尝试执行以下操作：

```
SELECT
  a.*,
  COUNT(b.id) items,
  AVG(COALESCE(b.price,0)) average_price,
  COUNT(DISTINCT c.zbid)
FROM shops a
LEFT JOIN shop_items b     ON b.cid=a.cid AND b.szbid=a.zbid
LEFT JOIN shop_inventory c ON c.cid=b.cid AND c.iid=b.id
WHERE a.cid=1
GROUP BY b.szbid,b.cid 
```

然而，这并没有奏效，因为它弄乱了`items`价值。实现此结果的正确方法是什么？

我还希望能够返回每家商店的购买总数。这将通过查看`shop_inventory c`并累加`c.quantity`每家商店的价值来完成。我该如何添加呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:49:31.593

试试这个解决方案：

```
SELECT    a.*,
          COALESCE(b.item_cnt,  0) AS item_cnt,
          COALESCE(b.avg_price, 0) AS avg_price,
          COALESCE(b.buyer_cnt, 0) AS buyer_cnt
FROM      shops a
LEFT JOIN (
          SELECT    a.cid, 
                    a.szbid, 
                    COUNT(*)     AS item_cnt, 
                    AVG(a.price) AS avg_price,
                    b.buyer_cnt
          FROM      shop_items a
          LEFT JOIN (
                    SELECT   cid,
                             iid,
                             COUNT(DISTINCT zbid) AS buyer_cnt
                    FROM     shop_inventory
                    WHERE    cid = 1
                    GROUP BY cid, 
                             iid
                    ) b ON a.cid = b.cid AND a.id = b.iid
          WHERE     a.cid = 1 AND
                    a.szbid <> 0
          GROUP BY  a.cid,
                    a.szbid
          ) b ON a.cid = b.cid AND a.zbid = b.szbid
WHERE     a.cid = 1 AND 
          a.zbid <> 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:49:32.717

而不是`COUNT(DISTINCT c.zbid)`+`LEFT JOIN shop_inventory`你可以写一个子选择：

```
SELECT
  a.*,
  COUNT(b.id) items,
  AVG(COALESCE(b.price,0)) average_price,

  ( SELECT COUNT(DISTINCT c.zbid)
    FROM shop_inventory c
    WHERE c.cid=b.cid AND c.iid=b.id
  )

FROM shops a
LEFT JOIN shop_items b     ON b.cid=a.cid AND b.szbid=a.zbid
WHERE a.cid=1
GROUP BY b.szbid,b.cid 
```

# objective-c - MKAnnotation 的 Objective C 地图视图委托 viewForAnnotation 在单击后被调用

> ID：12186873
> 
> 赞同：0
> 
> 时间：2012-08-29T21:36:53.063
> 
> 标签：objective-c, mkmapview, mkannotation

我有一个简单的地图视图。它有一个方法

```
-(void)loadAndDisplayPois{
NSLog(@"loadAndDisplayPois");
 if(mapView.annotations.count > 0)
     [mapView removeAnnotations:mapView.annotations];
self.pois = [self loadPoisFromDatabase];
NSLog(@"self.pois.count: %i", self.pois.count);
[mapView addAnnotations:self.pois];
NSLog(@"mapView.annotations.count: %i",mapView.annotations.count);} 
```

在我下载数据并将其保存到数据库之后，该方法被调用，并且我确信该方法会因为日志而被调用。处理下载的类在将数据保存到数据库后执行，`[self.senderObj performSelector:@selector(loadAndDisplayPois)];`其中 senderObj 是 MapViewController。pois 数组中的计数日志在我第一次单击后显示为 4。但是视图上没有注释，因为`viewForAnnotation`没有调用（数组中的一个注释（我的当前位置））。在我通过单击 TEST 按钮再次执行该方法后，会在地图上显示所有内容。

在我单击 TEST 按钮`viewForAnnotation`之后和之后调用该方法。`viewWillAppear`

从 2 天开始就让我发疯了。我不能了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:55:51.993

好吧，我把它缩小了。但我还是不明白。

```
if(mapView.annotations.count > 0)
    [mapView removeAnnotations:mapView.annotations];
self.pois = [self loadPoisFromDatabase];
[mapView addAnnotations:self.pois]; 
```

我通过一个按钮执行此代码，它可以工作。由另一个类调用相同的代码，不起作用。为什么？？？？

区别在哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:12:27.897

您不必手动调用 viewForAnnotation，您必须指出显示地图的类是 MKMapView 的委托

在你的`.h`

```
 @interface yourViewController : UIViewController<MKMapViewDelegate> 
```

编辑：

我在一个项目中使用了这段代码并为我工作：

```
- (void)updateAnnotations {
    if (self.mapView != nil && self.mapView.annotations != nil) {
        NSArray *annotationsCopy = [NSArray arrayWithArray:[self.mapView.annotations filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"!(self isKindOfClass: %@)", [MKUserLocation class]]]];

        [self.mapView removeAnnotations:annotationsCopy];
    }

    for (int i = 0 ; i < [appDelegate.centrosComerciales count] ; i++) {
        CC *ccAct = (CC *)[appDelegate.centrosComerciales objectAtIndex:i];
        CMapPoint *mp = [[CMapPoint alloc] initWithCC:ccAct];
        [self.mapView addAnnotation:mp];
        [mp release];
    }
} 
```

我没有删除 mapView.annotations，而是删除了注释的副本，没有用户位置注释。

在 viewWillAppear 上调用 updateAnnotations 方法。

它与您的代码非常相似，但我删除了 annotationsCopy 而不是直接删除了 mapView.annotations。

# java - Java REST 接口

> ID：12186878
> 
> 赞同：0
> 
> 时间：2012-08-29T21:37:11.923
> 
> 标签：java, php, rest, slim

我有一个 PHP Web 应用程序环境。我正在使用 Slim Framework 作为我的应用程序的 REST 接口。我的应用程序前端是使用 Backbone.js 和 jQuery 编写的。

有一个实用程序（.jar 文件），当我使用命令行进行远程调用（我猜这是一个 Web 服务）时，它会返回数据。

我如何最好地将其合并到上面描述的我的 web 应用程序中？

我的应用程序前端将有一个 Button，它应该对 REST 接口进行 AJAX 调用并以 JSON 格式获取数据。

我的做法：PHP-REST 接口 url 是：/api/phprestapi.php 存在

在 url: /api/javarestapi.java (也许) 处添加一个 JAVA-REST 接口来分隔这两个

现有环境：Ubuntu 上的 LAMP 堆栈

我如何实现这一目标？所涉及的努力是什么？

感谢您的指点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:18:47.620

如果我理解正确，您需要能够将从 jar 输出的数据返回到 php.ini 中。如果是这种情况，那么您应该开始研究从 php [1] 执行程序的不同方法。exec 可能是最知名的。

如果您想进一步控制，我建议您了解更多有关 jar 调用的 Web 服务以及在 php.ini 中调用 Web 服务的信息。但是，这将比上面的第一个选项花费更多的时间。

[1] [http://php.net/manual/en/ref.exec.php](http://php.net/manual/en/ref.exec.php)

# javascript - Grails — CSS 和 JavaScript 缓存

> ID：12186886
> 
> 赞同：0
> 
> 时间：2012-08-29T21:37:56.093
> 
> 标签：javascript, css, caching, grails

当我对 CSS 和 JavaScript 文件进行更改时，我的用户通常需要重新加载几次才能获得更改（显然是为了清除缓存）。

我想知道是否有人对解决此问题的插件有很好的体验。

我目前正在使用 grails 1.3.7，并在生产环境中使用 tomcat。

在我看来，[这](http://grails.org/plugin/cached-resources)可能是我最好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:23:31.353

正如您所说，缓存资源插件是一个不错的选择。

您需要将它与[资源](http://grails.org/plugin/resources)插件一起安装。假设资源插件已正确安装和配置，您无需对缓存资源插件执行任何操作即可使其正常工作。因此，缓存资源插件明显缺乏文档。您需要知道的所有内容都与资源插件相关联。

# jquery - 移动设备上的悬停和点击事件

> ID：12186892
> 
> 赞同：13
> 
> 时间：2012-08-29T21:38:11.907
> 
> 标签：jquery, ipad, mobile, responsive-design

我正在为台式机和移动设备创建一个响应式网站。我有一个悬停和单击事件问题，我不确定如何为移动设备上的用户解决。

在网站上，我有一个包含在链接中的框（div）。在桌面上，当用户将鼠标悬停在其上时，带有文本内容的不同颜色的框会滑下第一个框。当用户单击该框时，该链接会将他们带到指定页面。我为此使用 jQuery。

现在，在移动设备上，当用户点击框时，第二个框会向下滑动。但实际点击链接需要第二次点击。我为其创建此内容的公司要求，在移动设备上，当用户点击一个框时，第二个框将向下滑动，并在 2 秒延迟后自动将它们发送到指定页面。这样，用户只需点击一次。

我不知道如何使这项工作。我曾考虑过使用 jQuery mobile，但我无法找到绕过第一次点击（移动设备将其视为悬停事件）并激活链接的方法。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T21:58:39.833

我同意@DZittersteyn 的观点，即这是一个糟糕的设计。您可以更好地在移动设备中默认显示内容，以便点击的人知道他点击了什么。

```
if(!!('ontouchstart' in window)){//check for touch device
  $('myElement').unbind('click mouseenter mouseleave'); //use off if you used on, to unbind usual listeners
  $('myElement').on('click',function(){
    //slide down code
    setTimeout(function(){
       window.location.href='asdasd.html';
       },2000);
    });
} 
```

或者你可以使用

```
if(!!('ontouchstart' in window)){//check for touch device
//behaviour and events for touch device
}
else{
//behaviour and events for pointing device like mouse
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T09:51:22.017

```
if (('ontouchstart' in window || (window.DocumentTouch && document instanceof DocumentTouch))) {
    $(".touch")
        .bind("touchstart", function() {
            $(this)
                .addClass("active")
                .bind("touchend", function() {
                    $(this).removeClass("active");
                });
        })
        .bind("touchenter", function() {
            $(this)
                .addClass("hover")
                .bind("touchleave", function() {
                    $(this).removeClass("hover active");
                });
        });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T21:48:25.150

尝试使用 jQuery 来监听移动设备的`touchstart`和`touchend`事件。

前任：

```
$('selector').bind('touchstart', function(){
  //some action
});
$('selector').bind('touchend', function(){
  //set timeout and action
}); 
```

希望这可以帮助。

# mysql - Write lock for MySQL should pause a read lock

> ID：12186895
> 
> 赞同：1
> 
> 时间：2012-08-29T21:38:17.987
> 
> 标签：mysql, locking

According to the MySQL documentation, if any session holds a Read lock for a table, then another session requests a Write lock for the same table, the Write lock must be given and the Read lock waits.

I tried it, connected to the MySQL server from two consoles (Windows 7). Locked the table A from the first console (read lock), then tried to lock the same table from the second console (write lock), but the second console just waits till the first lock releases.

Who is wrong: me or the documentation? (MySQL Server version 5.5.27)

The citation from the MySQL official documentation:

> "WRITE locks normally have higher priority than READ locks to ensure that updates are processed as soon as possible. This means that if one session obtains a READ lock and then another session requests a WRITE lock, subsequent READ lock requests wait until the session that requested the WRITE lock has obtained the lock and released it."

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:41:06.417

关键字是**后续**的`subsequent READ lock requests`。我认为这是说现有的 READ 锁*不会*被暂停，而是会延迟在 WRITE 锁生效时发生的 READ 锁。所以我认为文档是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:41:18.577

那里写着：

> 这意味着如果一个会话获得了 READ 锁，然后另一个会话请求了 WRITE 锁，则**后续**的READ 锁请求将等待，直到请求 WRITE 锁的会话获得并释放锁。

已经获得的 READ 锁不会在操作中被破坏。那会造成破坏。等待的是**后续请求**。

# linux - copy contents of a file starting from regex word to end of the file

> ID：12186896
> 
> 赞同：0
> 
> 时间：2012-08-29T21:38:20.730
> 
> 标签：linux, file, bash, shell, copy

I want to copy a content of a file starting from word (searched word/line) to the end of the file.

Example: File1:

```
this is a sample text for file1 in PA
this is a sample text for file1 in CA
this is a sample text for file1 in CT
this is a sample text for file1 in IL
this is a sample text for file1 in MI
end of the file. 
```

I want to copy contents to file2 from line that has "CT" till the end of the file. Output : File2

```
this is a sample text for file1 in CT
this is a sample text for file1 in IL
this is a sample text for file1 in MI
end of the file. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:53:02.007

您可以使用`sed`：

```
sed -n '/searchtext/,$p' file1 > file2 
```

或`awk`：

```
awk '/searchtext/ {flag=1} flag;' file1 > file2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:58:15.493

```
awk '{if($0~/CT/)p=1;if(p)print}' your_file 
```

# tomcat - Birt 4.2 JDBCException: Cannot load JDBC Driver class: com.mysql.jdbc.Driver (Tomcat 6.0)

> ID：12186905
> 
> 赞同：1
> 
> 时间：2012-08-29T21:38:56.687
> 
> 标签：tomcat, jdbc, birt, classnotfoundexception

I'm trying to get Birt 4.2.0 working on a Tomcat 6.0 server, and I simply can not get it to load the mySql JDBC driver. My report works fine in Eclipse's preview, and it works fine when I feed it to the ReportEngine, but the web viewer keeps spitting out this exception:

```
SEVERE: DriverClassLoader failed to load class: com.mysql.jdbc.Driver
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at org.eclipse.birt.core.framework.URLClassLoader.findClass1(URLClassLoader.java:188)
    at org.eclipse.birt.core.framework.URLClassLoader$1.run(URLClassLoader.java:156)
    at org.eclipse.birt.core.framework.URLClassLoader$1.run(URLClassLoader.java:1)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.birt.core.framework.URLClassLoader.findClass(URLClassLoader.java:151)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.loadExtraDriver(JDBCDriverManager.java:1024)
    at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.findDriver(JDBCDriverManager.java:819)
    at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.loadAndRegisterDriver(JDBCDriverManager.java:946) 
```

(followed by about eighty more lines of stacktracing, which I have omitted for brevity)

I have mysql-connector-java-5.1.21-bin.jar, which I've placed in /usr/local/apache-tomcat-6.0.33/webapps/birt/WEB-INF/lib. After a lot of googling, I've also tried putting it in many other places, including /usr/local/apache-tomcat-6.0.33/lib, /usr/local/apache-tomcat-6.0.33/common/lib, and /usr/local/apache-tomcat-6.0.33/webapps/birt/WEB-INF/platform/plugins/org.eclipse.birt.report.data.oda.jdbc_5.1.21/drivers. None had any impact. The data source in my .rptdesign file reads as follows:

```
<data-sources>
    <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="Playrific live" id="49">
        <list-property name="privateDriverProperties">
            <ex-property>
                <name>metadataBidiFormatStr</name>
                <value>ILYNN</value>
            </ex-property>
            <ex-property>
                <name>disabledMetadataBidiFormatStr</name>
            </ex-property>
            <ex-property>
                <name>contentBidiFormatStr</name>
                <value>ILYNN</value>
            </ex-property>
            <ex-property>
                <name>disabledContentBidiFormatStr</name>
            </ex-property>
        </list-property>
        <property name="odaDriverClass">com.mysql.jdbc.Driver</property>
        <property name="odaURL">jdbc:mysql://10.177.134.242:3406/db_playsmrt</property>
        <property name="odaUser">[redacted]</property>
        <encrypted-property name="odaPassword" encryptionID="base64">[redacted]</encrypted-property>
    </oda-data-source>
</data-sources> 
```

At this point, the only thing I can think of is that either mysql-connector-java-5.1.21-bin.jar belongs in yet another location that I haven't tried yet, or there's some environmental variable somewhere that needs to be set, but I can't find anything about what that could be. Does anyone have any idea what's going on?

**Update**

Annnd a reboot fixed it. I feel stupid now.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T10:13:55.447

我在尝试在 jboss eap 6.1 中运行我的 BIRT 报告时遇到了非常相似的情况，其中我的 mysql 驱动程序配置为 jboss 模块。我的应用程序按预期工作，但 BIRT 找不到 com.mysql.jdbc.Driver。为了解决它，我添加了

```
 <module name="com.mysql" export="true"/> 
```

到我的 jboss-deployment-structure.xml 文件，以便容器导出 com.mysql 依赖项并且 BIRT 的 JDBCDriverManager 可以看到它。我重新部署了我的应用程序并且它有效。

# bash - concatenate a string into a file through a command that is a single valued argument to a script

> ID：12186909
> 
> 赞同：0
> 
> 时间：2012-08-29T21:39:06.580
> 
> 标签：bash

I need to concatenate a string into a file through a command that is a single valued argument to a script:

defining sample text: `TEXT="sample text"`

defining characteristic script : `transfer.sh $1`

desired usage (to be corrected): `./transfer.sh "echo $TEXT >> test.log"`

desired output in test.log ... `(previous contents) sample text`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:49:19.547

您可以在文件中使用`eval`命令：`transfer.sh`

```
eval $1 
```

它将`test.log`在最后一行生成“示例文本”。请注意，您传递给`transfer.sh`脚本的任何内容都将被执行。因此，如果您的用户通过`"rm -r /home/alan/papers"`，您`papers`文件夹中的所有内容都将被删除。

# java - Lucene Scoring Function - bias towards shorter documents

> ID：12186911
> 
> 赞同：3
> 
> 时间：2012-08-29T21:39:19.380
> 
> 标签：java, apache, lucene, tf-idf

I want Lucene Scoring function to have no bias based on the length of the document. This is really a follow up question to [Calculate the score only based on the documents have more occurance of term in lucene](https://stackoverflow.com/questions/3758987/calculate-the-score-only-based-on-the-documents-have-more-occurance-of-term-in-l/12186362#12186362)

I was wondering how Field.setOmitNorms(true) works? I see that there are two factors that make short documents get a high score:

1.  "boost" that shorter length posts - using doc.getBoost()
2.  "lengthNorm" in the definition of norm(t,d)

[Here is the documentation](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/Similarity.html)

I was wondering - if I wanted no bias towards shorter documents, is Field.setOmitNorms(true) enough?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-05T18:04:56.537

使用 BM25Similarity 你可以减少到 0f：

> @param b 控制文档长度标准化 tf 值的程度

或者

> @param k1 控制非线性项频率归一化（饱和度）。

两个参数都会影响 SimWeight

```
indexSearcher.setSimilarity(new BM25Similarity(1.2f,0f)); 
```

更多解释可以在这里找到：http: [//opensourceconnections.com/blog/2015/10/16/bm25-the-next-generation-of-lucene-relevation/](http://opensourceconnections.com/blog/2015/10/16/bm25-the-next-generation-of-lucene-relevation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T07:35:43.090

当您使用 TF-IDF 评分时，较短的文档意味着更相关。

您可以在 Lucene 中使用自定义评分函数。它很容易自定义评分算法。子类 DefaultSimilarity 并覆盖您要自定义的方法。

[这里](http://www.lucenetutorial.com/advanced-topics/scoring.html)有一个代码示例可以帮助您实现它

# jquery - jquery函数上的点符号？

> ID：12186919
> 
> 赞同：1
> 
> 时间：2012-08-29T21:39:55.953
> 
> 标签：jquery

我在一本 jQuery 书中遇到了这个问题：

```
$(elems).mouseenter(function(e) {
           $(this).css("opacity", 0.5);
        }).mouseout(function(e) {
           $(this).css("opacity", 1.0);
        }) 
```

我删除了大部分代码以便于阅读，然后得到了这个：

```
$(elems).mouseenter(function(e)).mouseout(function(e)) 
```

看起来一般你可以做到这一点？：

```
$(elems).mouseenter(function(e)).mouseout(function(e)).mouseSOMETHING1(function(e)) 
```

另一个词使用 . 连接函数？

另外，如果我将此代码分解为：

```
$(elems).mouseenter(function(e) {$(this).css("opacity", 0.5);});
$(elems).mouseout(function(e) {$(this).css("opacity", 1.0);}); 
```

这是一样的吗？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T21:43:00.337

是的。jQuery 的关键特性之一就是可**[链接性](http://blogs.telerik.com/blogs/posts/09-02-06/chainability-the-magic-of-jquery.aspx)**。这是通过在几乎每次调用中返回 jQuery 对象本身来完成的，允许您将它传递给链的下一个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:44:25.253

您所说的称为方法链接，是的，它在 jQuery 中得到了很好的支持。看看这个快速演练：

[方法链 - 完整的 jQuery 教程](http://www.jquery-tutorial.net/introduction/method-chaining/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T21:44:26.653

它之所以有效，是因为所有这些函数都返回 jQuery 对象。

```
 $(elems)  //return jquery object
     .mouseenter(/* ...*/)  //return jquery object
     .mouseout(/* ..*/)     //return jquery object 
```

通过这种方式，您可以链接尽可能多的功能。

```
$(elems).mouseenter(function(e) {$(this).css("opacity", 0.5);});
$(elems).mouseout(function(e) {$(this).css("opacity", 1.0);}); 
```

这两种方法在功能上是相同的。除了第二种方法对 get 进行了不必要的 jQuery 函数调用`$(elems)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T21:45:13.797

Yes`$(elems).mouseenter(function(e)).mouseout(function(e)).mouseSOMETHING1(function(e))`通常是可以接受的，因为 jquery 函数返回有问题的 jquery 对象。当你把它写成：

```
$(elems).mouseenter(function(e) {$(this).css("opacity", 0.5);});
$(elems).mouseout(function(e) {$(this).css("opacity", 1.0);}); 
```

它绝对等同于写成`$(elems).mouseenter().mouseout()`

# javascript - 32 位或 64 位对 jquery/javascript 有影响吗？

> ID：12186922
> 
> 赞同：3
> 
> 时间：2012-08-29T21:40:02.687
> 
> 标签：javascript, jquery, 32bit-64bit

网站服务器平台是 32 位还是 64 位对 jQuery/javascript 有影响吗？我写了一些代码，目前在 32 位 linux 上运行。从托管在 64 位服务器上的网站运行这个 javascript (jQuery) 代码会有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T21:41:07.123

不，这根本没有区别。您的 JavaScript 不会直接在任何 CPU 上运行。CPU 架构只对编译后的代码很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T21:41:21.277

CPU 无关紧要，JavaScript 是一种高级解释性编程语言，它根本不关心架构，只要它运行的引擎正常工作即可。

在您的情况下，它听起来像客户端 JavaScript，它（通常）在客户端上运行，这基本上是用户计算机而不是您的服务器。

# android - Android 当前用户帐号信息

> ID：12186926
> 
> 赞同：1
> 
> 时间：2012-08-29T21:40:30.090
> 
> 标签：android, android-contacts

我正在获取用户手机上所有联系信息的姓名和电话号码，但手机当前用户的姓名和图片未出现在此列表中。

```
Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
    String trimedNumber = phoneNumber.replaceAll("[^A-Za-z0-9 ]", "").replaceAll(" ","");
    if(trimedNumber.length()<10) 
    {
        return returnValue;
    }
    trimedNumber = trimedNumber.substring(trimedNumber.length()-10, trimedNumber.length()-1);

    Cursor cursor = getContentResolver().query(uri, null, null, null, null);

    if (!cursor.moveToFirst()) {
        return returnValue; 
```

如何获取当前用户的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:10:42.060

对于当前用户，我假设您是指手机的所有者。这个问题并不总是能解决，但这里有一个获取所有者编号的方法：

```
/*
 * Tries to get the user's phone number. Note that there is no guaranteed solution to this problem because the phone
 * number is not physically stored on all SIM-cards, or broadcasted from the network to the phone. This is especially 
 * true in some countries which requires physical address verification, with number assignment only happening 
 * afterwards. Phone number assignment happens on the network - and can be changed without changing the SIM card 
 * or device (e.g. this is how porting is supported).
 */
private String getPhoneNumber() {
    TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String phoneNumber = telephonyManager.getLine1Number();
    if (phoneNumber != null) return PhoneNumberUtils.formatNumber(phoneNumber);
    else return phoneNumber;
} 
```

# c# - 尝试上传文件时出现“远程服务器返回错误：(401) Unauthorized”错误

> ID：12186929
> 
> 赞同：0
> 
> 时间：2012-08-29T21:40:45.083
> 
> 标签：c#, asp.net, sharepoint, put, http-status-code-401

我发现了很多关于 (401) Unauthorized error 的问题，但没有一个向我解释如何诊断问题。

我创建了一个新的 MVC ASP.net 应用程序来学习如何将文件上传到共享点文件夹。截至目前，我似乎无法将文件从 C:\testfolder\file.txt 复制到 C:\testfolder\UploadedFiles

这是我在源文件路径和目标文件夹中发送的方法：

```
 //Flag to indicate whether file was uploaded successfuly or not
        bool isUploaded = true;
        try
        {
            // Create a PUT Web request to upload the file.
            WebRequest request = WebRequest.Create(targetDocumentLibraryPath);

            //Set credentials of the current security context
            request.PreAuthenticate = true;
            request.UseDefaultCredentials = true;
            ICredentials credentials = new NetworkCredential( "Username", "password", "Domain"); //I used my username and password here
            request.Credentials = credentials;
            //request.Credentials = CredentialCache.DefaultCredentials;
            request.Method = "PUT";

            // Create buffer to transfer file
            byte[] fileBuffer = new byte[1024];

            // Write the contents of the local file to the request stream.
            using (Stream stream = request.GetRequestStream())
            {
                //Load the content from local file to stream
                using (FileStream fsWorkbook = File.Open(sourceFilePath, FileMode.Open, FileAccess.Read))
                {
                    //Get the start point
                    int startBuffer = fsWorkbook.Read(fileBuffer, 0, fileBuffer.Length);
                    for (int i = startBuffer; i > 0; i = fsWorkbook.Read(fileBuffer, 0, fileBuffer.Length))
                    {
                        stream.Write(fileBuffer, 0, i);
                    }

                }
            }

            // Perform the PUT request
            WebResponse response = request.GetResponse();

            //Close response
            response.Close();
        }
        catch (Exception ex)
        {
            //Set the flag to indiacte failure in uploading
            isUploaded = false; //The remote server returned an error: (401) Unauthorized.
        }

        //Return the final upload status
        return isUploaded; 
    } 
```

我尝试了以下方法：

*   更改文件夹的权限，以便能够为所有用户写入/读取它们。
*   使用其他文件夹位置（SharePoint、本地驱动器、网络驱动器）将文件上传到。

关于如何解决这个问题的任何想法？任何关于如何调试问题的前景也值得赞赏。

更新：可能是我的帐户设置为 IIS 中的应用程序池帐户。我仍然不确定问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:27:29.460

这不会像代理设置一样吗？

您是否需要将默认代理设置添加到您的

```
WebRequest 
```

还需要添加吗

```
<system.net> 
  <defaultProxy useDefaultCredentials="true" /> 
</system.net> 
```

到您的网络配置？

这可能会有所帮助。

[我应该如何设置默认代理以使用默认凭据？](https://stackoverflow.com/questions/299940/how-should-i-set-the-default-proxy-to-use-default-credentials)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-10T17:33:14.453

[我决定尝试另一种方法并使用此处](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)描述的 httpposted 文件和 .saveAs()

# excel - 将命名范围从 Excel 粘贴到 Powerpoint 到命名形状 - VBA

> ID：12186931
> 
> 赞同：0
> 
> 时间：2012-08-29T21:40:57.897
> 
> 标签：excel, powerpoint, shape, vba

我想构建一个宏，将我们的 Excel-Data-Sheet 与 Reporting-Powerpoint-Presentation 连接起来。所以我选择并复制了这个命名范围（“A”）。然后我想将数据粘贴到 Powerpoint 中与我的范围（“A”）同名的形状中。

```
Sub SyncWithPPT()

Dim pptApp As PowerPoint.Application
Dim pptPres As PowerPoint.Presentation
Dim pptShape As PowerPoint.Shape

Set pptApp = New PowerPoint.Application
pptApp.Visible = msoTrue
Set pptPres = pptApp.presentations.Open("workingPath")

ActiveWorkbook.Names("A").RefersToRange.Select
Selection.Copy
Set pptShape = pptPres.Slides("anySlide").Shapes("A")
pptShape.Table.cell(1, 1).Shape.TextFrame.TextRange.Paste 'Here it won't paste correctly

End Sub 
```

一切都很好，除了粘贴。当我粘贴选择时，所有内容都粘贴到单元格（1、1）中。
但我想将每个单元格复制到不同的单元格中。就像使用 STRG + V 粘贴时一样。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:39:12.220

这对我有用（Office 2007）......

```
Sub Tester()

    Dim ppt, sld

    'presentation is already open...
    Set ppt = GetObject(, "powerpoint.application")
    Set sld = ppt.activepresentation.slides(1)

    ActiveSheet.Range("A1:B2").Copy

    sld.Shapes(1).Table.Cell(1, 1).Select
    ppt.ActiveWindow.View.Paste

    Set sld = Nothing
    Set ppt = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:21:08.670

```
'this is how to extract each cell information
'assuming that ppt communication is already done.

Dim n As Integer, j As Integer
Dim ultimaFila As Long    

j = 1 'columna
ultimaFila = Range("A65536").End(xlUp).Row

For n = 1 To ultimaFila

   pptShape.Table.cell(n, j).Value = Application.Workbooks("Book1").Worksheets("Sheet1").Cells(n, j).Value        

Next n

End Sub 
```

# objective-c - 在图像中制作不可见部分

> ID：12186932
> 
> 赞同：0
> 
> 时间：2012-08-29T21:41:04.677
> 
> 标签：objective-c, image, animation

我有两张图像，一张在另一张上，当我点击顶部图像或在其上滑动时，我想删除小部分（手指）。在这个“已删除”部分中，其他图像应该是可见的。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:46:18.293

我会使用 3 张带有透明胶片的图像，当您点击时，其中一张会消失。我认为这是实现您想要的最简单的方法。

# php - php入口转换

> ID：12186940
> 
> 赞同：1
> 
> 时间：2012-08-29T21:41:21.523
> 
> 标签：php, transformation

我有一个超过 20000 行的数据库。

列具有以下表达式：

```
<td align="left" valign="top"><input name="mail" type="hidden" id="mail" value="mail@domain.com," /></td> 
```

我只想检索电子邮件地址；我怎么能用php做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:02:29.173

我建议使用[TRIM](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_trim)删除电子邮件值之前和之后的额外文本：

```
SELECT TRIM(TRAILING  '," /></td>'
            FROM TRIM(LEADING '<td align="left" valign="top"><input name="mail" type="hidden" id="mail" value="'
            FROM your_field)) AS email
FROM your_table; 
```

它将起作用，因为您在评论中确认了这一点`this is the exacte expression in each column only the email adress which is different`。

使用仅 MySQL 的解决方案将比使用 MySQL 检索数据和使用 PHP 提取电子邮件更快。它还使您能够编写查询以轻松快速地将电子邮件保存在另一个列或表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T22:00:45.620

如果 HTML 在所有行中完全相同，您实际上可以在 SQL 中执行此操作，如下所示：

```
SELECT REPLACE(
    REPLACE(
        field_name,
        '<td align="left" valign="top"><input name="mail" type="hidden" id="mail" value="',\
        ''
    ),
    '" /></td>',
    ''
) as email
FROM table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T22:02:11.080

只要这种格式是完全静态的，你就可以摆脱一个相当草率的正则表达式，如下所示：

```
$ cat emailreg.php
<?php
$html = '<td align="left" valign="top"><input name="mail" type="hidden" id="mail" value="mail@domain.com," /></td>';
if(preg_match('@value="(?P<email>[^",]+),"@', $html, $matches)) {
    var_dump($matches['email']);
}
$ php emailreg.php
string(15) "mail@domain.com"
$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T22:09:51.700

执行以下操作，假设 $column 包含您的列值，如下所示：

```
$column='<td align="left" valign="top"><input name="mail" type="hidden" id="mail" value="mail@domain.com," /></td>' ;
$xml = simplexml_load_string( $column );
echo $xml->input[0]['value'] . "\n" ; 
```

输出示例：

```
mail@domain.com, 
```

它将显示您的电子邮件。当然这很好，当你已经有了`$column`。如果您想像这样处理整个查询，请按照其他人的建议进行，在查询时处理它会更快。

如果您喜欢这里的功能，您可以使用：

```
function getmail( $column )
{
    return simplexml_load_string( $column )->input[0]['value'] ;
} 
```

和用法：

```
echo getmail( '<td align="left" valign="top"><input name="mail" type="hidden" id="mail" value="mail@domain.com," /></td>' ) ; 
```

玩得开心。

# xslt - XSLT 如何处理散布在其他 XML 元素中的多个 XML 文本节点

> ID：12186945
> 
> 赞同：0
> 
> 时间：2012-08-29T21:41:50.923
> 
> 标签：xslt

当一个元素包含其他元素穿插文本时，如何保持文本元素的顺序？在这个（简化的）示例中：

```
 <block>1st text<bsub>2nd text</bsub>3rd text</block> 
```

所需的输出是：

```
 "1st text 2nd text 3rd text" 
```

我试过了：

```
 <xsl:template match="block">
    <xsl:value-of select=".">
    <xsl:apply-templates select="bsub"/>
    <xsl:value-of select=".">
  </xsl:template>

  <xsl:template match="bsub">  
    <xsl:value-of select=".">
  </xsl:template> 
```

并输出：

```
 "1st text 2nd text 3rd text 2nd text 1st text 2nd text 3rd text" 
```

如何使用 选择单个文本元素（的`<block>`）`<xsl:value-of>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:58:19.553

不要使用 value-of 来处理这样的混合内容 - 使用 apply-templates 来代替它，这一切都对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:44:16.530

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="/">
  <t>
   <xsl:apply-templates />
  </t>
</xsl:template>

<xsl:template match="block|bsub">
  <xsl:apply-templates />
</xsl:template>

<xsl:template match="text()">
  <xsl:value-of select="concat(.,' ')" />
</xsl:template>

</xsl:stylesheet> 
```

...当应用于您的输入文档时...

```
<block>1st text<bsub>2nd text</bsub>3rd text</block> 
```

...产量...

```
<t>1st text 2nd text 3rd text </t> 
```

# android - Android Rounded Line in Ad / 广告获得焦点

> ID：12186947
> 
> 赞同：0
> 
> 时间：2012-08-29T21:42:01.643
> 
> 标签：android, adsense

我已经在我的应用中实现了 Google Ad。问题是：每次我触摸广告并返回应用程序时，都会出现一条圆线。这就像广告获得焦点一样。

问题的[图片](http://resources.reament.com/pictures/android.error.001.png)。

广告代码（我在应用程序中合并）如下：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads">

        <com.google.ads.AdView
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:layout_alignParentRight="true"                         
                         ads:adUnitId="a150203b883dd6d"
                         ads:adSize="BANNER"
                         android:focusable="false"
                         android:focusableInTouchMode="false"
                         ads:testDevices="TEST_EMULATOR, 39e0b3669eb01337"
                         ads:loadAdOnCreate="true"/>

</merge> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:10:58.220

可能是广告在 webview 中呈现为 html 吗？如果是这样，并且您可以访问那里显示的 css，请像这样编辑它：

```
a {outline:0}
a:focus { outline:0;} 
```

# wxwidgets - 如何正确绘制巨大的图像

> ID：12186953
> 
> 赞同：0
> 
> 时间：2012-08-29T21:42:55.527
> 
> 标签：wxwidgets

我对 wxWidgets 还很陌生，所以请多多包涵。假设我有一个 10Kx10K 的图像，而我的 wxScrolledWindow 的大小为 640x480。我将整个图像加载到我在绘制函数中使用的 wxBitmap 中。

现在在我的 OnPaint 函数中，我只是说

```
wxPaintDC dc(this);
dc.DrawBitmap(_Bitmap, 0, 0 ); 
```

这在最初的几幅画中有些作用，但很快 Window 内容就出现了问题，并且出现了伪影。当我非常快速地来回移动滚动条时，这种情况发生得非常快。

我在 Windows 7 机器上使用最新的 wxWidgets。

那么，如何改进我的绘画代码呢？

非常感谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T23:10:33.320

使用 10000x10000 wxBitmap 本身是一个坏主意，它可能根本无法在旧系统上创建（即 400MiB 的视频 RAM！）。完全绘制它是纯粹的疯狂。

我不知道您的数据来自哪里，但在典型情况下，例如要在屏幕上显示的地图，您应该将其分解为图块，将当前在屏幕上可见的图块转换为 wxBitmap（或其中几个）只画那些。

*然后*你可以通过使用双缓冲来优化你的绘图（在 Windows 7 下它相对无用，它自己双缓冲所有内容），但你应该使用大小合理的后备存储位图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:59:05.150

这听起来像是使用双缓冲可能会有所帮助的东西。

开始尝试的第一件事是用[wxBufferedPaintDC替换 wxPaintDC](http://docs.wxwidgets.org/2.8/wx_wxbufferedpaintdc.html#wxbufferedpaintdc)

如需更多建议，请参阅关于该主题的 wiki 文章：[http ://wiki.wxwidgets.org/Flicker-Free_Drawing](http://wiki.wxwidgets.org/Flicker-Free_Drawing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T22:22:02.043

正如 Ravenspoint 好心指出的那样，wxWidgets 的 wiki 上有一篇文章。因此，根据那篇文章，需要发生两件事。首先用一个空函数覆盖 EVT_ERASE_BACKGROUND。

```
void Canvas::EraseBackground( wxEraseEvent& WXUNUSED(event))
{
} 
```

其次是实施基本的双缓冲方案。这是我的做法。

```
void Canvas::OnPaint(wxPaintEvent& WXUNUSED(event))
{
    int x, y;
    GetViewStart(&x, &y);
    wxRect Client_Area = GetClientRect();

    int width  = Client_Area.width;
    int height = Client_Area.height;

    wxBitmap Current = _Bitmap.GetSubBitmap(wxRect( x * 10, y * 10, width, height ));

    wxPaintDC dc(this);
    dc.DrawBitmap(Current, 0, 0, false );
} 
```

我的 x 和 y 滚动率都设置为 10。这就是为什么我将视图起始坐标相乘。

非常欢迎任何更多的见解。

谢谢，克里斯蒂安

# c++ - boost.filesystem create_directories 抛出 std::bad_alloc

> ID：12186955
> 
> 赞同：5
> 
> 时间：2012-08-29T21:43:01.977
> 
> 标签：c++, windows, boost, boost-filesystem

我有一个使用 Boost 1.47.0 在 Windows XP SP3 中运行的 Visual Studio 2008 C++03 应用程序。

该调用`boost::filesystem::create_directories( L"c:\\foo\\bar" );`引发`std::bad_alloc`异常。

在输出窗口中，我看到一条调试堆消息：“HEAP [test.exe]: Invalid allocation size - CDCDCCDCE (exceeded 7ffdefff)”

调用堆栈显示 boost.filesystem 在 Microsoft 标准库文件 xlocale 第 309 行中创建新的语言环境和最后可见的代码行。

```
msvcp90.dll!std::_Allocate<char>()  + 0x17 bytes    
msvcp90.dll!std::allocator<char>::allocate()  + 0xf bytes    
msvcp90.dll!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::_Copy()  + 0x70 bytes    
msvcp90.dll!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::_Grow()  + 0x26 bytes    
msvcp90.dll!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::assign()  + 0x50 bytes    
msvcp90.dll!std::basic_string<char,std::char_traits<char>,std::allocator<char> >::basic_string<char,std::char_traits<char>,std::allocator<char> >()  + 0x24 bytes    
msvcp90.dll!std::locale::_Locimp::_Locimp()  + 0x47 bytes    
> test.exe!std::locale::locale<windows_file_codecvt>(const std::locale & _Loc={...}, const windows_file_codecvt * _Facptr=0x00b48f60)  Line 309 + 0x69 bytes    C++
test.exe!`anonymous namespace'::default_locale()  Line 735    C++
test.exe!`anonymous namespace'::path_locale()  Line 777 + 0x2a bytes    C++
test.exe!boost::filesystem3::path::wchar_t_codecvt_facet()  Line 797 + 0x25 bytes    C++
test.exe!boost::filesystem3::path::codecvt()  Line 388 + 0x5 bytes    C++
test.exe!boost::filesystem3::path::path<wchar_t const *>(const wchar_t * begin=0x00b460f8, const wchar_t * end=0x00b46116)  Line 162 + 0x5 bytes    C++
test.exe!boost::filesystem3::path::parent_path()  Line 313 + 0x57 bytes    C++
test.exe!boost::filesystem3::detail::create_directories(const boost::filesystem3::path & p={...}, boost::system::error_code * ec=0x00000000)  Line 832 + 0x13 bytes    C++
test.exe!boost::filesystem3::create_directories(const boost::filesystem3::path & p={...})  Line 318 + 0x29 bytes    C++
test.exe!wmain(int __formal=1, int __formal=1)  Line 112 + 0xc bytes    C++
test.exe!__tmainCRTStartup()  Line 583 + 0x19 bytes    C
test.exe!wmainCRTStartup()  Line 403    C
kernel32.dll!_BaseProcessStart@4()  + 0x23 bytes 
```

有人可以建议如何解决这个问题吗？

**编辑**我更新为提升 1.50.0。问题依然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:00:46.513

这似乎是微软在运行 DEBUG 构建时的一个[已知错误。](http://connect.microsoft.com/VisualStudio/feedback/details/750951/std-locale-implementation-in-crt-assumes-all-facets-to-be-allocated-on-crt-heap-and-crashes-in-destructor-in-debug-mode-if-a-facet-was-allocated-by-a-custom-allocator)`std::locale`报告于 2012 年 6 月。

The message you get regarding memory address CDCDCDCE implies accessing deleted memory, as this bug describes.

There is no solution currently described in Microsoft's site, but I would suggest trying a different facet by changing `L"c:\\foo\\bar"` to `"c:\\foo\\bar"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:44:16.107

This problem smells like a mismatch in `_SECURE_SCL` (or maybe the somewhat related `_HAS_ITERATOR_DEBUGGING` - but I doubt the latter, since the call stack indicates a non-debug build). See [https://stackoverflow.com/a/6104239/12711](https://stackoverflow.com/a/6104239/12711) for some info and make sure `_SECURE_SCL` is defined the same way in the builds for `test.exe` and the boost filesystem library linked in.

AFAIK, boost will use the VC default (which is `_SECURE_SCL=1` even in release builds for VS2008), so if you're setting `_SECURE_SCL=0` that may be the problem.

# python - Python合并两个CSV文件

> ID：12186956
> 
> 赞同：1
> 
> 时间：2012-08-29T21:43:05.033
> 
> 标签：python

我有两个 CSV 文件。一：

```
s555555,7
s333333,10
s666666,9
s111111,10
s999999,9 
```

还有两个：

```
s111111,,,,,
s222222,,,,,
s333333,,,,,
s444444,,,,,
s555555,,,,,
s666666,,,,,
s777777,,,,, 
```

我想结束：

```
[['s111111', '10', '', '', '', ''],
 ['s222222', '',   '', '', '', ''],
 ['s333333', '10', '', '', '', ''],
 ['s444444', '',   '', '', '', ''],
 ['s555555', '7',  '', '', '', ''],
 ['s666666', '9',  '', '', '', ''],
 ['s777777', '',   '', '', '', '']] 
```

这是我的代码：

```
new_marks = get_marks_from_file('assign1_marks.csv')
marks     = get_marks_from_file('marks.csv')

def merge_marks(all_marks, new_marks, column):
    for n in range(len(new_marks)):
        for a in range(len(all_marks)):
            if all_marks[a][0]==new_marks[n][0]:
                 all_marks[a][column]= new_marks[n][column]

                return marks 
```

我究竟做错了什么？我不断得到：

```
>>> merge_marks(marks, new_marks, 1)

[['s111111', '',  '', '', '', ''],
 ['s222222', '',  '', '', '', ''],
 ['s333333', '',  '', '', '', ''],
 ['s444444', '',  '', '', '', ''],
 ['s555555', '7', '', '', '', ''],
 ['s666666', '',  '', '', '', ''],
 ['s777777', '',  '', '', '', '']] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:55:23.290

线

```
 return marks 
```

必须取消三个级别的缩进，以使其脱离 for 循环和 if 语句。现在它正在返回`all_marks[a][0]==new_marks[n][0]`它找到的第一个匹配项，并且永远不会替换其他匹配项。

您还想返回`all_marks`而不是`marks`：在这种情况下，全局变量`marks`恰好是相同的并且也被更改了，但是如果您使用一个字面上命名为其他任何名称的变量来调用它，它将失败。

因此解决方案是：

```
def merge_marks(all_marks, new_marks, column):
    for n in range(len(new_marks)):
        for a in range(len(all_marks)):
            if all_marks[a][0]==new_marks[n][0]:
                 all_marks[a][column]= new_marks[n][column]

    return all_marks 
```

# jquery - jquery和分页问题

> ID：12186958
> 
> 赞同：1
> 
> 时间：2012-08-29T21:43:22.220
> 
> 标签：jquery, pagination

我正在使用轮播插件。代码是

```
// carousel
var Carousel = {
    settings: {
        itemsPerPage: 1,
        itemsPerTransition: 1,
        noOfRows: 1,
        pagination: true,
        nextPrevLinks: true,
        speed: 'normal',
        easing: 'swing'
    },
    init: function(el, options) {
        if (!el.length) {return false;}
        this.options = $.extend({}, this.settings, options);
        this.itemIndex = 0; 
        this.container = el;
        this.runner = this.container.find('ul');
        this.items = this.runner.children('li');
        this.noOfItems = this.items.length;
        this.setRunnerWidth();
        if (this.noOfItems <= this.options.itemsPerPage) {return false;} // bail if there are too few items to paginate
        this.insertMask();
        this.noOfPages = Math.ceil((this.noOfItems - this.options.itemsPerPage) / this.options.itemsPerTransition) + 1;
        if (this.options.pagination) {this.insertPagination();}
        if (this.options.nextPrevLinks) {this.insertNextPrevLinks();}
        this.updateBtnStyles();
    },
    insertMask: function() {
        this.runner.wrap('<div class="mask" />');
        this.mask = this.container.find('div.mask');

        // set mask height so items can be of varying height
        var maskHeight = this.runner.outerHeight(true);
        this.mask = this.container.find('div.mask');
        this.mask.height(maskHeight);
    },
    setRunnerWidth: function() {
        this.noOfItems = Math.round(this.noOfItems / this.options.noOfRows);
        var width =  this.items.outerWidth(true) * this.noOfItems;
        this.runner.width(width);
    },
    insertPagination: function() {
        var i, links = [];
        this.paginationLinks = $('<ol class="pagination-links" />');
        for (i = 0; i < this.noOfPages; i++) {
            links[i] = '<li><a href="#item-' + i + '">' + (i + 1) + '</a></li>';
        }
        this.paginationLinks
            .append(links.join(''))
            .appendTo(this.container)
            .find('a')
                .bind('click.carousel', $.proxy(this, 'paginationHandler'));
    },
    paginationHandler: function(e) {
        this.itemIndex = e.target.hash.substr(1).split('-')[1] * this.options.itemsPerTransition;
        this.animate();
        return false;
    },
    insertNextPrevLinks: function() {
        this.prevLink = $('<div id=leftbutton <img src=images/leftbutton.png width=80 height=48></div>')
                            .bind('click.carousel', $.proxy(this, 'prevItem'))
                            .appendTo(this.container);
        this.nextLink = $('<div id=rightbutton <img src=images/rightbutton.png width=80 height=48></div>')
                            .bind('click.carousel', $.proxy(this, 'nextItem'))
                            .appendTo(this.container);
    },
    nextItem: function() {
        this.itemIndex = this.itemIndex + this.options.itemsPerTransition;
        this.animate();
        return false;
    },
    prevItem: function() {
        this.itemIndex = this.itemIndex - this.options.itemsPerTransition;
        this.animate();
        return false;
    },
    updateBtnStyles: function() {
        if (this.options.pagination) {
            this.paginationLinks
                .children('li')
                    .removeClass('current')
                    .eq(Math.ceil(this.itemIndex / this.options.itemsPerTransition))
                        .addClass('current');
        }

        if (this.options.nextPrevLinks) {
            this.nextLink
                .add(this.prevLink)
                    .removeClass('disabled');
            if (this.itemIndex === (this.noOfItems - this.options.itemsPerPage)) {
                this.nextLink.addClass('disabled');
            } 
            else if (this.itemIndex === 0) {
                this.prevLink.addClass('disabled');
            }
        }
    },
    animate: function() {
        var nextItem, pos;
        // check whether there are enough items to animate to
        if (this.itemIndex > (this.noOfItems - this.options.itemsPerPage)) {
            this.itemIndex = this.noOfItems - this.options.itemsPerPage; // go to last panel - items per transition
        }
        if (this.itemIndex < 0) {
            this.itemIndex = 0; // go to first
        }
        nextItem = this.items.eq(this.itemIndex);
        pos = nextItem.position();

        if (headache) {
            this.runner
                .stop()
                .animate({left: -pos.left}, this.options.speed, this.options.easing);
        }
        else {
            this.mask
                .stop()
                .animate({scrollLeft: pos.left}, this.options.speed, this.options.easing);
        }
        this.updateBtnStyles();
    }
};

// bridge
$.fn.carousel = function(options) {
    return this.each(function() {
        var obj = Object.create(Carousel);
        obj.init($(this), options);
        $.data(this, 'carousel', obj);
    });
}; 
```

我遇到的问题是分页。我希望能够将它移动到不同的 DIV。更改 appendTo 会破坏代码，我无法指定另一个 div 来粘贴它。

任何帮助都会很棒。

# c++ - for循环中的Qt字符串生成器

> ID：12186963
> 
> 赞同：10
> 
> 时间：2012-08-29T21:43:42.377
> 
> 标签：c++, qt4, stringbuilder, qstring

按照[这个](http://labs.qt.nokia.com/2011/06/13/string-concatenation-with-qstringbuilder/)和[这个](http://doc-snapshot.qt-project.org/4.8/qstring.html#more-efficient-string-construction)文档，我会在 for 循环中使用 QStringBuilder 。我应该应用它的代码是

```
QStringList words;
QString testString;

for (auto it = words.constBegin(); it != words.constEnd(); ++it)
{
    testString += "[" + *it + "] ";
} 
```

但是我不明白如何编写它来使用 QStringBuilder ，因为我正在做一个赋值，而不是 QStringBuilder 要求我使用 % 运算符并且只在文档之后做一个赋值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T22:04:24.997

AFAICS[在这里](http://qt-project.org/forums/viewthread/16144)，QStringBuilder 没有运算符 %=。

但是，如果你想保持你的循环，你可以尝试这样的事情：

```
#include <QStringBuilder>
#include <QStringList>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    QStringList words;
    words << "a1" << "a2" << "a3";
    QString testString;

    for (auto it = words.constBegin(); it != words.constEnd(); ++it)
    {
        testString = testString % *it % " ";
    }
    cout << testString.toStdString() << endl;
} 
```

还提到了`QT_USE_QSTRINGBUILDER`宏，它将所有`+`用法转换为`%`，前提是不会在代码的其他地方产生问题。

编辑：

根据 Marvin 的评论，我相信我应该对我的答案进行一些澄清：这个答案显示了在循环中显式使用 QStringBuilder 和 operator% 的一种方式。QStringBuilder 是为了优化连接表达式而创建的，该优化是通过消除对临时变量的需要，计算连接字符串的总大小并一次性分配它来实现的（显然，这只能在表达）。

这意味着它的最佳使用可能不在循环中（例如上面的代码）。然而，即便如此，它也为您提供了某种优化，从下面两个版本的 gprof 和 Measure-Command 输出中都可以看出。

版本 1 - QStringBuilder 和 operator%（gprof 累积秒数：0.46；PowerShell Measure-Command：5:23s）

```
for (auto it = words.constBegin(); it != words.constEnd(); ++it)
{
    for (int i = 0; i < 100000; ++i)
    {
        testString = testString % *it % " ";
    }
} 
```

版本 2 - Qstring 和 operator+（gprof 累积秒数：0.61；PowerShell Measure-Command：10:47s）

```
for (auto it = words.constBegin(); it != words.constEnd(); ++it)
{
    for (int i = 0; i < 100000; ++i)
    {
        testString = testString + *it + " ";
    }
} 
```

所以，我想说使用 QStringBuilder 和 operator% 可能不会让你明显更糟（请注意，上面的值有点偏差，除非你的应用程序实际上是在没有任何 I/O 的情况下执行数千个连接）。但是，像往常一样，由您来衡量您的执行时间并决定什么对您最有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:55:22.097

我想只要你有线

```
DEFINES *= QT_USE_QSTRINGBUILDER 
```

在您的 .pro 文件中，编译器将使用 QStringBuilder 来连接字符串。这将适用于 Qt 4.8 及更高版本。

**编辑**：Qt 文档说这个宏可能会使您的项目与源不兼容。本文[讨论](http://blog.qt.digia.com/blog/2011/06/13/string-concatenation-with-qstringbuilder/)了如何解决这个问题。基本上，您需要将“+”表达式的结果显式转换为`QString`，例如 use`QString(s1 + s2)`而不是 just `s1 + s2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-27T08:39:47.687

`QString`有一个方法[`reserve()`](https://doc.qt.io/qt-5/qstring.html#reserve)，它允许在前面保留更大的内存部分。这在例如可以粗略估计结果字符串大小的循环中很有用，因为它可以用来避免由于字符串不断增长而导致的常量分配。

# spring.net - Spring.net 不在父容器中寻找定义

> ID：12186965
> 
> 赞同：4
> 
> 时间：2012-08-29T21:43:57.623
> 
> 标签：spring.net, spring.codeconfig

在我的项目中，我有 2 个 spring 配置，一个在代码中，一个在 xml 中。代码上下文将加载 MockConfigurations 类中定义的模拟对象。xml 配置在 app.config 中定义。我将 xml 配置设置为代码配置的父级。

```
public static IApplicationContext GetMergedContainer()
{
    var scanner = new AssemblyObjectDefinitionScanner();
    scanner.IncludeType<MockConfigurations>();

    var context = new CodeConfigApplicationContext(ContextRegistry.GetContext());
    context.Scan(scanner);
    context.Refresh();
    return context;
} 
```

在 spring 文档（[http://www.springframework.net/doc-latest/reference/html/web.html](http://www.springframework.net/doc-latest/reference/html/web.html)）中它说：如果在当前上下文中找不到引用的对象定义，则 Spring.NET 搜索所有祖先上下文在上下文层次结构中，直到找到对象定义（或最终失败并引发异常）。

这对我不起作用：

```
var element = GetMergedContainer().GetObject<IElement>(); 
```

抛出 Spring.Objects.Factory.NoSuchObjectDefinitionException：未定义名为“[Namespace].IElement”的对象：未在上下文中定义请求的类型。

从父级获取对象是否正常：

```
var element = GetMergedContainer().ParentContext.GetObject<IElement>(); 
```

我错过了什么吗？有没有人成功地将 XML 上下文设置为代码上下文的父级？

任何帮助将不胜感激。

提前致谢。

我正在使用 Spring.Core.1.3.2 和 Spring.CodeConfig.1.0.4

[更新]

我正在用更简单的代码（[http://www.springframework.net/codeconfig/refdoc/migration-example.html](http://www.springframework.net/codeconfig/refdoc/migration-example.html)）重新创建这种情况

我再次将 XML 配置作为代码配置的父级，并尝试从仅存在于 XML（父级）上下文中的代码上下文中解析对象。

这有效：

```
ConsoleReport report = ctx["ConsoleReport"] as ConsoleReport;
ConsoleReport report = ctx.GetObject("ConsoleReport") as ConsoleReport; 
```

这失败了：

```
ConsoleReport report = ctx.GetObject<ConsoleReport>(); 
```

错误如下：

> Spring.Objects.Factory.NoSuchObjectDefinitionException 未处理消息=未定义名为“Spring.Evaluation.ConsoleReport”的对象：请求的类型未在上下文中定义。Source=Spring.Core.Configuration ObjectName=Spring.Evaluation.ConsoleReport StackTrace: at Spring.Context.ApplicationContextExtensions.GetObject[T](IApplicationContext context) in c:_prj\spring-net-codeconfig\src\Spring.Core.Configuration\ Context\Extension\ApplicationContextExtensions.cs：c:\users\oscar\documents\visual studio 2010\Projects\Spring.Evaluation\Spring.Evaluation\Program 中 Spring.Evaluation.Program.Main(String[] args) 的第 69 行。 cs：System.AppDomain._nExecuteAssembly 的第 16 行（RuntimeAssembly 程序集，String [] args）在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，

我正在尝试将代码配置添加到使用后一种方法的项目（有点大）中，我非常希望保持所有这些代码行的原样。

# python - Python os.walk 在同一网络上的另一台计算机上

> ID：12186968
> 
> 赞同：0
> 
> 时间：2012-08-29T21:44:15.840
> 
> 标签：python, operating-system

我想在 Windows 7 中的 python 2.7 中但在同一网络上的计算机上执行 os.walk。像 os.walk('\192.168.0.2') 这样的东西，但这不起作用。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:02:54.963

尝试`net use`或 UNC 路径。

或者试试 Linux，你可能会比 Windows 更好。

[http://pcsupport.about.com/od/commandlinereference/p/net-use-command.htm](http://pcsupport.about.com/od/commandlinereference/p/net-use-command.htm)

[http://www.uwplatt.edu/oit/terms/uncpath.html](http://www.uwplatt.edu/oit/terms/uncpath.html)

在 python 中，使用 Windows 路径通常更容易，例如，
`r'\\hostname\share'`而不是`'\\\\hostname\\share'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:21:35.333

我的想法也是选择 Linux，或者至少是带有 SSH 服务的 Windows。

1.  [通过 SSH 设置公钥身份验证](http://www.petefreitag.com/item/532.cfm)，并确保您可以 ssh 到该 Windows 机器（当然，开启 SSH 服务）而无需密码和密码短语。
2.  使用[Fabric](http://docs.fabfile.org/en/1.4.3/index.html)，一个 Python（2.5 或更高版本）库和命令行工具来简化 SSH 用于应用程序部署或系统管理任务的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T00:10:29.660

对于 Windows，我所做的是打开文件资源管理器，然后导航到网络驱动器上感兴趣的（子）文件夹，然后右键单击属性。复制位置信息，并将其粘贴到您的 Python 文件中。

前任。

```
for root, dirs, files in os.walk("//<network name>/<folder>/<sub-folder1>/<sub-folder2>/.../<sub-folderN>"):
    for file in files:
        print(file) 
```

# backbone.js - 只有 GET 和 POST 的 CRUD

> ID：12186980
> 
> 赞同：3
> 
> 时间：2012-08-29T21:45:58.347
> 
> 标签：backbone.js, crud

我将不得不使用 GET 和 POST 来执行 CRUD 操作，而不是使用 DELETE、PUT 和 c 的默认同步方法。有没有比重写 save()、fetch() 和其他方法更优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T22:12:48.037

Backbone 通过以下方式内置了对此类事物的支持[`emulateHTTP`](http://backbonejs.org/#Sync-emulateHTTP)：

> **模拟HTTP** `Backbone.emulateHTTP = true`
> 
> 如果您想使用不支持 Backbones 的默认 REST/HTTP 方法的旧版 Web 服务器，您可以选择打开`Backbone.emulateHTTP`. 设置此选项将使用 HTTP 伪造`PUT`和`DELETE`请求，使用 true 方法`POST`设置标头。`X-HTTP-Method-Override`如果`emulateJSON`也打开，则 true 方法将作为附加`_method`参数传递。
> 
> ```
> Backbone.emulateHTTP = true;
> 
> model.save();  // POST to "/collection/id", with "_method=PUT" + header. 
> ```

因此，设置`Backbone.emulateHTTP`并`true`调整您的服务器端代码以查看`X-HTTP-Method-Override`标头以了解 POST 请求的含义。

# ios - modalViewController 关闭后 ViewController 的移动视图

> ID：12186985
> 
> 赞同：0
> 
> 时间：2012-08-29T21:46:22.490
> 
> 标签：ios, uiviewcontroller

我有两个 ViewController：A 和 B。A 是 B 的代表。我从 A 呈现 B，当我关闭它时，我正在尝试移动 A 的视图。我在委托中设置了方法来听什么时候B 被解雇以试图改变观点。这是我现在在 B 被解雇时使用的，但它不起作用。我怎样才能让它工作？

```
[self dismissViewControllerAnimated:YES completion:^{
    NSLog(@"view dismissed");
    [self moveViews:self];
}];

- (IBAction)moveViews:(id)sender
{
    [UIView animateWithDuration:0.5
                     animations:^{
                         self.view.center = CGPointMake(160, 250);
                         //self.tableView.center = CGPointMake(160, -100);
                         self.addView.center = CGPointMake(160, 240);
                     }
                     completion:^(BOOL finished){}];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:21:45.953

查看您的 moveViews 方法，您不会将视图从一个视图控制器移动到另一个视图控制器。您正在移动视图的位置。问题是被关闭的视图控制器将不再是屏幕的一部分，因此它不可见。我的建议是实现 iOS 5 UIViewController 遏制并将被解雇的视图控制器添加为另一个视图控制器的子视图控制器。这是因为模态视图控制器中包含的信息（控件、动作目标和模型）是模态视图控制器的一部分。检查 UIViewController 类的文档和此处提到的包含：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:22:46.153

我认为问题在于，您在这里调用`[self moveViews:self];`视图 B 上的方法。

在 B 中有一个 id （例如名为 sender ）属性。

当您进行转换时，将 B 中的 sender 属性设置为 A。

称呼

```
 [self dismissViewControllerAnimated:YES completion:^{
    NSLog(@"view dismissed");
    [self.sender performSelector:@selector(moveViews)];
}]; 
```

然后 B 将被解雇并在 A 上调用方法 moveViews。

在 A 你有一个方法

```
 - (void)moveViews
{[UIView animateWithDuration:0.5
                     animations:^{
                         self.view.center = CGPointMake(160, 250);                        
      }
                     ];
} 
```

应该工作，玩得开心

# stata - Stata中的“记录太长”错误是什么意思？

> ID：12186986
> 
> 赞同：1
> 
> 时间：2012-08-29T21:46:23.267
> 
> 标签：stata

我正在将出生证明信息的大型数据集从原始 DAT 文件转换为 Stata DTA。我有一个国家经济研究局准备的数据字典，并且成功输入了其他年份的类似文件。

但是，当我在这个特定文件上运行输入程序时，我收到错误

> 记录太长

输出数据集丢失了约 14% 的记录。磁盘上有足够的空间用于输出。这个看似自相矛盾的错误意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:46:23.267

我决定发布这个并回答它，仅仅是因为我几乎找不到关于这个 Stata 错误的在线文档。

就我而言，这实际上是一个简单的解决方法。原始数据来自一个 zip 文件。当我再次取消归档原始数据时，我发现原始文件比我一直使用的原始文件大 1GB 左右 - 丢失了 14%。无论解压缩错误导致截断也可能截断中间记录，因此当我运行输入程序时，Stata 产生了“记录太长”错误。

# ios - 当我在应用程序预启动期间包含 openssl FIPS 库时，gdb 会引发错误。链接没问题

> ID：12186989
> 
> 赞同：0
> 
> 时间：2012-08-29T21:46:44.367
> 
> 标签：ios, openssl, xcode4.3, fips

编辑这个问题，因为问题现在不同了。

我通过为正确的平台（armv7）构建它来摆脱链接问题。现在，我陷入了另一个不允许我启动我的应用程序的问题。这是我的测试应用程序的输出，它基本上检查是否启用了 FIPS 模式：

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Mon Oct 17 16:52:01 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "--host=i386-apple-darwin --target=arm-apple-darwin".
Setting environment variable "MallocStackLogging" to null value.
tty /dev/ttys003
sharedlibrary apply-load-rules all
target remote-mobile /tmp/.XcodeGDBRemote-22227-108
Switching to remote-macosx protocol
mem 0x1000 0x3fffffff cache
mem 0x40000000 0xffffffff none
mem 0x00000000 0x0fff none
[Switching to process 7171 thread 0x1c03]
[Switching to process 7171 thread 0x1c03]
Re-enabling shared library breakpoint 1
Re-enabling shared library breakpoint 2
Re-enabling shared library breakpoint 3
openssFIPSTest(235) malloc: recording malloc stacks to disk using standard recorder
openssFIPSTest(235) malloc: stack logs being written into /private/var/mobile/Applications/CBBB042A-B015-48B3-8CB4-8539EC8FD406/tmp/stack-logs.235.openssFIPSTest.index
openssFIPSTest(235) malloc: Please issue: cp /private/var/mobile/Applications/CBBB042A-B015-48B3-8CB4-8539EC8FD406/tmp/stack-logs.235.openssFIPSTest.jsOD6R.link /tmp/
89a6797b8847c7f20ce1ca972858d3a7e2d97e4d 
```

它甚至没有得到第一种方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions. 
```

预发布本身存在一些错误。我已经多次重启了 mac book 、 ipad 和 xcode ，但没​​有运气。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:19:09.647

您已经在 PC/Mac 上为 x86 构建了静态库，并尝试将其与 armv6/armv7 的 iOS 二进制文件链接。

如果您想在模拟器和所有 iDevices 上运行您的应用程序，您需要构建一个多架构静态库 (i386/armv6/armv7)。

# oracle - 如何在 PLSQL 中填充内存表？

> ID：12186991
> 
> 赞同：3
> 
> 时间：2012-08-29T21:46:51.523
> 
> 标签：oracle, collections, plsql

我不知道这是否是正确的术语，但我将“内存表”称为像这样创建的对象：

```
create type InMemReg is object (field1 varchar2(10), field2 varchar2(20), field3 number);
create type InMemTab is table of InMemReg; 
```

在这种情况下，我的“内存表”是“InMemTab”。我的问题是，当我以前不知道元素的数量时，如何填充这种对象？我在某些地方看到过这种类型的初始化：

```
declare
  v_uno InMemReg := InMemReg('a','b',1999);
  v_dos InMemReg := InMemReg('A','Z',2000);
  t_tres  InMemTab := InMemTab();
begin
  t_tres := InMemTab(v_uno, v_dos); 
```

在这种情况下，我在初始化“t_tres”之前有明确的 2 个对象，但是在我可以有 n 个元素的动态场景中，我不知道如何填充它。

在另一种 OO 语言中可能是这样的：

```
t_tres.add(OtherObject) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T21:54:36.673

该类型`InMemTab`是 Oracle 用语中的嵌套表。

该方法的等效`add`方法是调用该`extend`方法，然后分配`OtherObject`给嵌套表中的最后一个位置。

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    v_uno InMemReg := InMemReg('a','b',1999);
  3    v_dos InMemReg := InMemReg('A','Z',2000);
  4    t_tres  InMemTab := InMemTab();
  5  begin
  6    t_tres.extend;
  7    t_tres( t_tres.count ) := v_uno;
  8    t_tres.extend;
  9    t_tres( t_tres.count ) := v_dos;
 10    dbms_output.put_line( 't_tres has ' || t_tres.count || ' elements.' );
 11* end;
 12  /
t_tres has 2 elements.

PL/SQL procedure successfully completed. 
```

您也可以将其纳入`add`程序

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    v_uno InMemReg := InMemReg('a','b',1999);
  3    v_dos InMemReg := InMemReg('A','Z',2000);
  4    t_tres  InMemTab := InMemTab();
  5    procedure add( p_nt    IN OUT InMemTab,
  6                   p_elem  IN     InMemReg )
  7    as
  8    begin
  9      p_nt.extend;
 10      p_nt( p_nt.count ) := p_elem;
 11    end;
 12  begin
 13    add( t_tres, v_uno );
 14    add( t_tres, v_dos );
 15    dbms_output.put_line( 't_tres has ' || t_tres.count || ' elements.' );
 16* end;
 17  /
t_tres has 2 elements.

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T01:12:08.493

从数据本身填充集合是很常见的，这意味着您没有显式添加字符串和数字集，而是从其他表中提取数据。因为这是与集合有关的常见且自然的事情，Oracle 通过 pl/sql 中的“BULK COLLECT INTO”子句使其变得容易。例如：

```
DECLARE
   TYPE EmployeeSet IS TABLE OF employees%ROWTYPE;
   underpaid EmployeeSet;
     -- Holds set of rows from EMPLOYEES table.
   CURSOR c1 IS SELECT first_name, last_name FROM employees;
   TYPE NameSet IS TABLE OF c1%ROWTYPE;
   some_names NameSet;
     -- Holds set of partial rows from EMPLOYEES table.
BEGIN
-- With one query,
-- bring all relevant data into collection of records.
   SELECT * BULK COLLECT INTO underpaid FROM employees
      WHERE salary < 5000 ORDER BY salary DESC;
-- Process data by examining collection or passing it to
-- eparate procedure, instead of writing loop to FETCH each row.
   DBMS_OUTPUT.PUT_LINE
     (underpaid.COUNT || ' people make less than 5000.');
   FOR i IN underpaid.FIRST .. underpaid.LAST
   LOOP
     DBMS_OUTPUT.PUT_LINE
       (underpaid(i).last_name || ' makes ' || underpaid(i).salary);
   END LOOP;
-- You can also bring in just some of the table columns.
-- Here you get the first and last names of 10 arbitrary employees.
   SELECT first_name, last_name
     BULK COLLECT INTO some_names
     FROM employees
     WHERE ROWNUM < 11;
   FOR i IN some_names.FIRST .. some_names.LAST
   LOOP
      DBMS_OUTPUT.PUT_LINE
        ('Employee = ' || some_names(i).first_name
         || ' ' || some_names(i).last_name);
   END LOOP;
END;
/ 
```

您通常不需要担心扩展或您将拥有多少元素，您通常可以将它吸进去，然后根据需要使用集合的内置功能（计数、循环、比较不同的集合、设置操作， ETC）

# javascript - 得到的选定选项文本，而不是值给定以下 HTML： <select multiple=""><option value="1" selected="">One</option> <option value="2" selected="">Two</option> <option value=" 3">Three</option></select> 如何获取所选选项的名称 One 和 Two 而不是选项值 1 和

> ID：12186992
> 
> 赞同：2
> 
> 时间：2012-08-29T21:46:52.350
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T21:48:49.737

这是一种选择：

```
var arr = $("select option[selected]").map(function() {
    return this.innerHTML;
}).get(); 
```

**演示：http:** [//jsfiddle.net/ESRQR/](http://jsfiddle.net/ESRQR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:58:23.077

```
var result=$("select option[selected]").text(); 
```

这将为您提供`text`所选选项的而不是其`value`

[点击这里进行演示](http://jsfiddle.net/TBa8s/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:28:37.740

尝试这个：

var selected = $('select option:selected').text();

警报（选中）；

小提琴链接：http: [//jsfiddle.net/5rgju/5/](http://jsfiddle.net/5rgju/5/)

# amazon-s3 - 为大于 5GB 的文件计算 Amazon-S3 Etag 的算法是什么？

> ID：12186993
> 
> 赞同：86
> 
> 时间：2012-08-29T21:47:00.253
> 
> 标签：amazon-s3, s3cmd

上传到 Amazon S3 的小于 5GB 的文件有一个 ETag，它只是文件的 MD5 哈希值，这样可以轻松检查您的本地文件是否与您在 S3 上放置的文件相同。

但是如果你的文件大于 5GB，那么亚马逊会以不同的方式计算 ETag。

例如，我对一个 5,970,150,664 字节的文件进行了 380 个部分的分段上传。现在 S3 显示它的 ETag 为`6bcf86bed8807b8e78f0fc6e0a53079d-380`. 我的本地文件的 md5 哈希值为`702242d3703818ddefe6bf7da2bed757`. 我认为破折号后面的数字是分段上传中的部分数。

我还怀疑新的 ETag（在破折号之前）仍然是一个 MD5 哈希，但在多部分上传的过程中包含了一些元数据。

有谁知道如何使用与 Amazon S3 相同的算法来计算 ETag？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-11-10T23:59:44.337

假设您将一个 14MB 的文件上传到没有服务器端加密的存储桶中，并且您的部分大小为 5MB。计算每个部分对应的3个MD5校验和，即前5MB、后5MB、后4MB的校验和。然后取它们连接的校验和。MD5 校验和通常打印为二进制数据的十六进制表示，因此请确保您采用解码后的二进制连接的 MD5，而不是 ASCII 或 UTF-8 编码的连接。完成后，添加连字符和零件数以获取 ETag。

以下是从控制台在 Mac OS X 上执行此操作的命令：

```
$ dd bs=1m count=5 skip=0 if=someFile | md5 >>checksums.txt
5+0 records in
5+0 records out
5242880 bytes transferred in 0.019611 secs (267345449 bytes/sec)
$ dd bs=1m count=5 skip=5 if=someFile | md5 >>checksums.txt
5+0 records in
5+0 records out
5242880 bytes transferred in 0.019182 secs (273323380 bytes/sec)
$ dd bs=1m count=5 skip=10 if=someFile | md5 >>checksums.txt
2+1 records in
2+1 records out
2599812 bytes transferred in 0.011112 secs (233964895 bytes/sec) 
```

此时所有校验和都在`checksums.txt`. 要连接它们并解码十六进制并获取批次的 MD5 校验和，只需使用

```
$ xxd -r -p checksums.txt | md5 
```

现在附加“-3”以获取 ETag，因为有 3 个部分。

**笔记**

*   如果您通过 aws-cli 上传，那么[您](https://github.com/aws/aws-cli)`aws s3 cp`很可能有 8MB 的块大小。根据[文档](http://docs.aws.amazon.com/cli/latest/topic/s3-config.html#multipart-chunksize)，这是默认设置。
*   如果存储桶启用了服务器端加密 (SSE)，则 ETag 不会是 MD5 校验和（请参阅[API 文档](https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html#API_PutObject_Example_11)）。但是，如果您只是想验证上传的部分是否与您发送的内容相匹配，您可以使用`Content-MD5`标头，[S3 会为您进行比较](https://docs.aws.amazon.com/AmazonS3/latest/API/API_UploadPart.html)。
*   `md5`在 macOS 上只写出校验和，但`md5sum`在 Linux/brew 上也输出文件名。你需要去掉它，但我确信有一些选项可以只输出校验和。您无需担心空白会导致`xxd`忽略它。

**代码链接**

*   [我用macOS 的工作脚本](https://gist.github.com/emersonf/7413337)编写的要点。
*   [s3md5](https://github.com/Teachnova/)的项目。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-05-06T10:17:36.820

根据此处的答案，我编写了一个 Python 实现，它可以正确计算多部分和单部分文件 ETag。

```
def calculate_s3_etag(file_path, chunk_size=8 * 1024 * 1024):
    md5s = []

    with open(file_path, 'rb') as fp:
        while True:
            data = fp.read(chunk_size)
            if not data:
                break
            md5s.append(hashlib.md5(data))

    if len(md5s) < 1:
        return '"{}"'.format(hashlib.md5().hexdigest())

    if len(md5s) == 1:
        return '"{}"'.format(md5s[0].hexdigest())

    digests = b''.join(m.digest() for m in md5s)
    digests_md5 = hashlib.md5(digests)
    return '"{}-{}"'.format(digests_md5.hexdigest(), len(md5s)) 
```

官方工具使用的默认 chunk_size 为 8 MB `aws cli`，它对 2+ 个块进行分段上传。它应该可以在 Python 2 和 3 下工作。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-08T23:17:07.650

[bash 实现](https://github.com/antespi/s3md5)

[蟒蛇实现](https://github.com/tlastowka/calculate_multipart_etag)

该算法的字面意思是（从 python 实现中的自述文件复制）：

1.  md5 块
2.  将 md5 字符串 glob 在一起
3.  将 glob 转换为二进制
4.  md5 全局块 md5s 的二进制文件
5.  将“-Number_of_chunks”附加到二进制文件的 md5 字符串的末尾

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-10-01T07:13:44.180

算法相同，java版本：（BaseEncoding、Hasher、Hashing等来自[guava库](https://github.com/google/guava "这里")

```
/**
 * Generate checksum for object came from multipart upload</p>
 * </p>
 * AWS S3 spec: Entity tag that identifies the newly created object's data. Objects with different object data will have different entity tags. The entity tag is an opaque string. The entity tag may or may not be an MD5 digest of the object data. If the entity tag is not an MD5 digest of the object data, it will contain one or more nonhexadecimal characters and/or will consist of less than 32 or more than 32 hexadecimal digits.</p> 
 * Algorithm follows AWS S3 implementation: https://github.com/Teachnova/s3md5</p>
 */
private static String calculateChecksumForMultipartUpload(List<String> md5s) {      
    StringBuilder stringBuilder = new StringBuilder();
    for (String md5:md5s) {
        stringBuilder.append(md5);
    }

    String hex = stringBuilder.toString();
    byte raw[] = BaseEncoding.base16().decode(hex.toUpperCase());
    Hasher hasher = Hashing.md5().newHasher();
    hasher.putBytes(raw);
    String digest = hasher.hash().toString();

    return digest + "-" + md5s.size();
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-09-26T16:19:10.470

不确定它是否有帮助：

我们目前正在做一个丑陋（但到目前为止很有用）的黑客攻击来*修复*多部分上传文件中的*错误 ETag*，其中包括对存储桶中的文件应用更改；这会触发来自 Amazon 的 md5 重新计算，从而将 ETag 更改为与实际 md5 签名匹配。

在我们的例子中：

文件：bucket/Foo.mpg.gpg

1.  获得的 ETag：“3f92dfeff0a11d175e60fb8b958b4e6e-2”
2.  对文件做*一些事情*（*重命名它*，添加一个像假标题这样的元数据，等等）
3.  获得的 Etag：“c1d903ca1bb6dc68778ef21e74cc15b0”

我们不知道算法，但由于我们可以“修复”ETag，我们也不需要担心它。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-08-05T18:25:33.927

这是这个疯狂的 AWS 挑战拼图中的另一部分。

FWIW，这个答案假设您已经知道如何计算“MD5 的 MD5 部分”，并且可以从此处已经提供的所有其他答案重建您的 AWS Multi-part ETag。

这个答案解决的是不得不“猜测”或以其他方式“判断”原始上传部分大小的烦恼。

我们使用几种不同的工具上传到 S3，它们似乎都有不同的上传部分大小，所以“猜测”真的不是一种选择。此外，我们有很多文件是历史上在零件尺寸似乎不同时上传的。此外，使用内部服务器副本强制创建 MD5 类型 ETag 的旧技巧也不再有效，因为 AWS 已将其内部服务器副本更改为也使用多部分（只是具有相当大的部分大小）。

所以...你怎么能算出物体的零件尺寸？

好吧，如果您首先发出一个 head_object 请求并检测到该 ETag 是一个多部分类型的 ETag（在末尾包含一个 '-<partcount>'），那么您可以发出另一个 head_object 请求，但带有一个额外的 part_number 属性1（第一部分）。这个后续的 head_object 请求将返回第一部分的 content_length。Viola... 现在您知道所使用的零件尺寸，您可以使用该尺寸重新创建本地 ETag，它应该与上传对象时创建的原始上传 S3 ETag 匹配。

此外，如果您想要准确（也许一些多部分上传使用可变部分大小），那么您可以继续调用 head_object 请求并指定每个部分编号，并根据返回的部分内容长度计算每个部分的 MD5。

希望有帮助...

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-05-06T05:33:43.130

根据 AWS 文档，ETag 不是多部分上传的 MD5 哈希，也不是加密对象：[http ://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonResponseHeaders.html](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTCommonResponseHeaders.html)

> 由 PUT 对象、POST 对象或复制操作或通过 AWS 管理控制台创建并通过 SSE-S3 或明文加密的对象具有 ETag，即其对象数据的 MD5 摘要。
> 
> 由 PUT 对象、POST 对象或复制操作或通过 AWS 管理控制台创建并由 SSE-C 或 SSE-KMS 加密的对象具有不是其对象数据的 MD5 摘要的 ETag。
> 
> 如果一个对象是由 Multipart Upload 或 Part Copy 操作创建的，则无论加密方法如何，ETag 都不是 MD5 摘要。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-09-19T04:36:37.763

在上面的答案中，有人问是否有办法为大于 5G 的文件获取 md5。

对于获取 MD5 值（对于大于 5G 的文件），我可以给出的答案是将其手动添加到元数据中，或者使用程序进行上传以添加信息。

例如，我使用 s3cmd 上传文件，它添加了以下元数据。

```
$ aws s3api head-object --bucket xxxxxxx --key noarch/epel-release-6-8.noarch.rpm 
{
  "AcceptRanges": "bytes", 
  "ContentType": "binary/octet-stream", 
  "LastModified": "Sat, 19 Sep 2015 03:27:25 GMT", 
  "ContentLength": 14540, 
  "ETag": "\"2cd0ae668a585a14e07c2ea4f264d79b\"", 
  "Metadata": {
    "s3cmd-attrs": "uid:502/gname:staff/uname:xxxxxx/gid:20/mode:33188/mtime:1352129496/atime:1441758431/md5:2cd0ae668a585a14e07c2ea4f264d79b/ctime:1441385182"
  }
} 
```

它不是使用 ETag 的直接解决方案，但它是一种以您可以访问的方式填充所需元数据 (MD5) 的方法。如果有人上传没有元数据的文件，它仍然会失败。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-11-12T14:34:21.063

这是ruby中的算法......

```
require 'digest'

# PART_SIZE should match the chosen part size of the multipart upload
# Set here as 10MB
PART_SIZE = 1024*1024*10 

class File
  def each_part(part_size = PART_SIZE)
    yield read(part_size) until eof?
  end
end

file = File.new('<path_to_file>')

hashes = []

file.each_part do |part|
  hashes << Digest::MD5.hexdigest(part)
end

multipart_hash = Digest::MD5.hexdigest([hashes.join].pack('H*'))
multipart_etag = "#{multipart_hash}-#{hashes.count}" 
```

感谢[Ruby 中最短的 Hex2Bin](https://stackoverflow.com/questions/5244414/shortest-hex2bin-in-ruby)和[多部分上传到 S3 ...](https://itsecureadmin.com/2015/11/multipart-uploads-to-s3-using-aws-sdk-v2-for-ruby/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-17T21:47:15.273

这是计算 ETag 的 PHP 版本：

```
function calculate_aws_etag($filename, $chunksize) {
    /*
    DESCRIPTION:
    - calculate Amazon AWS ETag used on the S3 service
    INPUT:
    - $filename : path to file to check
    - $chunksize : chunk size in Megabytes
    OUTPUT:
    - ETag (string)
    */
    $chunkbytes = $chunksize*1024*1024;
    if (filesize($filename) < $chunkbytes) {
        return md5_file($filename);
    } else {
        $md5s = array();
        $handle = fopen($filename, 'rb');
        if ($handle === false) {
            return false;
        }
        while (!feof($handle)) {
            $buffer = fread($handle, $chunkbytes);
            $md5s[] = md5($buffer);
            unset($buffer);
        }
        fclose($handle);

        $concat = '';
        foreach ($md5s as $indx => $md5) {
            $concat .= hex2bin($md5);
        }
        return md5($concat) .'-'. count($md5s);
    }
}

$etag = calculate_aws_etag('path/to/myfile.ext', 8); 
```

这是一个增强版本，可以根据预期的 ETag 进行验证 - 如果您不知道，甚至可以猜测块大小！

```
function calculate_etag($filename, $chunksize, $expected = false) {
    /*
    DESCRIPTION:
    - calculate Amazon AWS ETag used on the S3 service
    INPUT:
    - $filename : path to file to check
    - $chunksize : chunk size in Megabytes
    - $expected : verify calculated etag against this specified etag and return true or false instead
        - if you make chunksize negative (eg. -8 instead of 8) the function will guess the chunksize by checking all possible sizes given the number of parts mentioned in $expected
    OUTPUT:
    - ETag (string)
    - or boolean true|false if $expected is set
    */
    if ($chunksize < 0) {
        $do_guess = true;
        $chunksize = 0 - $chunksize;
    } else {
        $do_guess = false;
    }

    $chunkbytes = $chunksize*1024*1024;
    $filesize = filesize($filename);
    if ($filesize < $chunkbytes && (!$expected || !preg_match("/^\\w{32}-\\w+$/", $expected))) {
        $return = md5_file($filename);
        if ($expected) {
            $expected = strtolower($expected);
            return ($expected === $return ? true : false);
        } else {
            return $return;
        }
    } else {
        $md5s = array();
        $handle = fopen($filename, 'rb');
        if ($handle === false) {
            return false;
        }
        while (!feof($handle)) {
            $buffer = fread($handle, $chunkbytes);
            $md5s[] = md5($buffer);
            unset($buffer);
        }
        fclose($handle);

        $concat = '';
        foreach ($md5s as $indx => $md5) {
            $concat .= hex2bin($md5);
        }
        $return = md5($concat) .'-'. count($md5s);
        if ($expected) {
            $expected = strtolower($expected);
            $matches = ($expected === $return ? true : false);
            if ($matches || $do_guess == false || strlen($expected) == 32) {
                return $matches;
            } else {
                // Guess the chunk size
                preg_match("/-(\\d+)$/", $expected, $match);
                $parts = $match[1];
                $min_chunk = ceil($filesize / $parts /1024/1024);
                $max_chunk =  floor($filesize / ($parts-1) /1024/1024);
                $found_match = false;
                for ($i = $min_chunk; $i <= $max_chunk; $i++) {
                    if (calculate_aws_etag($filename, $i) === $expected) {
                        $found_match = true;
                        break;
                    }
                }
                return $found_match;
            }
        } else {
            return $return;
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-12-22T18:33:51.810

Rust 中的一个版本：

```
use crypto::digest::Digest;
use crypto::md5::Md5;
use std::fs::File;
use std::io::prelude::*;
use std::iter::repeat;

fn calculate_etag_from_read(f: &mut dyn Read, chunk_size: usize) -> Result<String> {
    let mut md5 = Md5::new();
    let mut concat_md5 = Md5::new();
    let mut input_buffer = vec![0u8; chunk_size];
    let mut chunk_count = 0;
    let mut current_md5: Vec<u8> = repeat(0).take((md5.output_bits() + 7) / 8).collect();

    let md5_result = loop {
        let amount_read = f.read(&mut input_buffer)?;
        if amount_read > 0 {
            md5.reset();
            md5.input(&input_buffer[0..amount_read]);
            chunk_count += 1;
            md5.result(&mut current_md5);
            concat_md5.input(&current_md5);
        } else {
            if chunk_count > 1 {
                break format!("{}-{}", concat_md5.result_str(), chunk_count);
            } else {
                break md5.result_str();
            }
        }
    };
    Ok(md5_result)
}

fn calculate_etag(file: &String, chunk_size: usize) -> Result<String> {
    let mut f = File::open(file)?;
    calculate_etag_from_read(&mut f, chunk_size)
} 
```

查看一个简单实现的仓库：[https ://github.com/bn3t/calculate-etag/tree/master](https://github.com/bn3t/calculate-etag/tree/master)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-30T16:38:00.977

node.js 实现 -

```
const fs = require('fs');
const crypto = require('crypto');

const chunk = 1024 * 1024 * 5; // 5MB

const md5 = data => crypto.createHash('md5').update(data).digest('hex');

const getEtagOfFile = (filePath) => {
  const stream = fs.readFileSync(filePath);
  if (stream.length <= chunk) {
    return md5(stream);
  }
  const md5Chunks = [];
  const chunksNumber = Math.ceil(stream.length / chunk);
  for (let i = 0; i < chunksNumber; i++) {
    const chunkStream = stream.slice(i * chunk, (i + 1) * chunk);
    md5Chunks.push(md5(chunkStream));
  }

  return `${md5(Buffer.from(md5Chunks.join(''), 'hex'))}-${chunksNumber}`;
}; 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-11-18T05:21:53.560

简短的回答是您获取每个部分的 128 位二进制 md5 摘要，将它们连接成一个文档，然后对该文档进行哈希处理。[此答案](https://stackoverflow.com/a/19896823/5556676)中提出的算法是准确的。

**注意：**如果您“触摸”blob（即使不修改内容），带有连字符的多部分 ETAG 表单将变为不带连字符的表单。也就是说，如果您复制或对已完成的多部分上传对象（又名 PUT-COPY）进行就地复制，S3 将使用算法的简单版本重新计算 ETAG。即目标对象将有一个不带连字符的etag。

您可能已经考虑过这一点，但是如果您的文件小于 5GB，并且您已经知道它们的 MD5，并且上传并行化几乎没有任何好处（例如，您正在从慢速网络传输上传，或者从慢速磁盘上传)，那么您也可以考虑使用简单的 PUT 而不是多部分 PUT，并在您的请求标头中传递您已知的 Content-MD5 - 如果它们不匹配，亚马逊将无法上传。请记住，您需要为每个 UploadPart 付费。

此外，在某些客户端中，为 PUT 操作的输入传递已知的 MD5 将使客户端免于在传输期间重新计算 MD5。例如，在 boto3 (python) 中，您将使用[client.put_object()](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.put_object)方法的`ContentMD5`参数。如果您省略该参数，并且您已经知道 MD5，那么客户端将在传输之前浪费循环再次计算它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-15T08:07:45.553

我喜欢上面艾默生的主要答案——尤其是那`xxd`部分——但我太懒了，`dd`所以我用了`split`，猜测一个 8M 的块大小，因为我上传的是`aws s3 cp`：

```
$ split -b 8M large.iso XXX
$ md5sum XXX* > checksums.txt
$ sed -i 's/ .*$//' checksums.txt 
$ xxd -r -p checksums.txt | md5sum
99a090df013d375783f0f0be89288529  -
$ wc -l checksums.txt 
80 checksums.txt
$ 
```

很明显，我的 S3 etag 的两个部分都与我文件的计算 etag 匹配。

更新：

这一直运作良好：

```
$ ll large.iso
-rw-rw-r-- 1 user   user   669134848 Apr 12  2021 large.iso
$ 
$ etag large.iso
99a090df013d375783f0f0be89288529-80
$ 
$ type etag
etag is a function
etag () 
{ 
    split -b 8M --filter=md5sum $1 | cut -d' ' -f1 | pee "xxd -r -p | md5sum | cut -d' ' -f1" "wc -l" | paste -d'-' - -
}
$ 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-29T18:23:45.797

我刚刚看到 AWS S3 控制台“上传”使用了 17,179,870 的不寻常部分（块）大小 - 至少对于较大的文件。

使用该零件大小可以使用前面描述的方法为我提供正确的 ETag 散列。感谢 @TheStoryCoder 的 php 版本。

感谢@hans 提出使用 head-object 查看每个部分的实际尺寸的想法。

我使用 AWS S3 控制台（2020 年 11 月 28 日）上传了大约 50 个文件，大小从 190MB 到 2.3GB 不等，所有文件的部分大小都相同，为 17,179,870。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-16T08:05:10.670

在 Node.js (TypeScript) 中实现的工作算法。

```
/**
 * Generate an S3 ETAG for multipart uploads in Node.js 
 * An implementation of this algorithm: https://stackoverflow.com/a/19896823/492325
 * Author: Richard Willis <willis.rh@gmail.com>
 */
import fs from 'node:fs';
import crypto, { BinaryLike } from 'node:crypto';

const defaultPartSizeInBytes = 5 * 1024 * 1024; // 5MB

function md5(contents: string | BinaryLike): string {
  return crypto.createHash('md5').update(contents).digest('hex');
}

export function getS3Etag(
  filePath: string,
  partSizeInBytes = defaultPartSizeInBytes
): string {
  const { size: fileSizeInBytes } = fs.statSync(filePath);
  let parts = Math.floor(fileSizeInBytes / partSizeInBytes);
  if (fileSizeInBytes % partSizeInBytes > 0) {
    parts += 1;
  }
  const fileDescriptor = fs.openSync(filePath, 'r');
  let totalMd5 = '';

  for (let part = 0; part < parts; part++) {
    const skipBytes = partSizeInBytes * part;
    const totalBytesLeft = fileSizeInBytes - skipBytes;
    const bytesToRead = Math.min(totalBytesLeft, partSizeInBytes);
    const buffer = Buffer.alloc(bytesToRead);
    fs.readSync(fileDescriptor, buffer, 0, bytesToRead, skipBytes);
    totalMd5 += md5(buffer);
  }

  const combinedHash = md5(Buffer.from(totalMd5, 'hex'));
  const etag = `${combinedHash}-${parts}`;
  return etag;
} 
```

我已将此发布到 npm

```
npm install s3-etag 
```

```
import { generateETag } from 's3-etag';

const etag = generateETag(absoluteFilePath, partSizeInBytes); 
```

在此处查看项目：[https ://github.com/badsyntax/s3-etag](https://github.com/badsyntax/s3-etag)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-04-08T06:25:51.793

我有一个适用于 iOS 和 macOS 的解决方案，而无需使用 dd 和 xxd 等外部​​助手。刚刚找到，所以就照原样报告，打算后期改进。目前，它同时依赖于 Objective-C 和 Swift 代码。首先，在 Objective-C 中创建这个辅助类：

**AWS3MD5Hash.h**

```
#import <Foundation/Foundation.h>

NS_ASSUME_NONNULL_BEGIN

@interface AWS3MD5Hash : NSObject

- (NSData *)dataFromFile:(FILE *)theFile startingOnByte:(UInt64)startByte length:(UInt64)length filePath:(NSString *)path singlePartSize:(NSUInteger)partSizeInMb;

- (NSData *)dataFromBigData:(NSData *)theData startingOnByte:(UInt64)startByte length:(UInt64)length;

- (NSData *)dataFromHexString:(NSString *)sourceString;

@end

NS_ASSUME_NONNULL_END 
```

**AWS3MD5Hash.m**

```
#import "AWS3MD5Hash.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define SIZE 256

@implementation AWS3MD5Hash

- (NSData *)dataFromFile:(FILE *)theFile startingOnByte:(UInt64)startByte length:(UInt64)length filePath:(NSString *)path singlePartSize:(NSUInteger)partSizeInMb {

   char *buffer = malloc(length);

   NSURL *fileURL = [NSURL fileURLWithPath:path];
   NSNumber *fileSizeValue = nil;
   NSError *fileSizeError = nil;
   [fileURL getResourceValue:&fileSizeValue
                           forKey:NSURLFileSizeKey
                            error:&fileSizeError];

   NSInteger __unused result = fseek(theFile,startByte,SEEK_SET);

   if (result != 0) {
      free(buffer);
      return nil;
   }

   NSInteger result2 = fread(buffer, length, 1, theFile);

   NSUInteger difference = fileSizeValue.integerValue - startByte;

   NSData *toReturn;

   if (result2 == 0) {
       toReturn = [NSData dataWithBytes:buffer length:difference];
    } else {
       toReturn = [NSData dataWithBytes:buffer length:result2 * length];
    }

     free(buffer);

     return toReturn;
 }

 - (NSData *)dataFromBigData:(NSData *)theData startingOnByte:  (UInt64)startByte length:(UInt64)length {

   NSUInteger fileSizeValue = theData.length;
   NSData *subData;

   if (startByte + length > fileSizeValue) {
        subData = [theData subdataWithRange:NSMakeRange(startByte, fileSizeValue - startByte)];
    } else {
       subData = [theData subdataWithRange:NSMakeRange(startByte, length)];
    }

        return subData;
    }

- (NSData *)dataFromHexString:(NSString *)string {
    string = [string lowercaseString];
    NSMutableData *data= [NSMutableData new];
    unsigned char whole_byte;
    char byte_chars[3] = {'\0','\0','\0'};
    NSInteger i = 0;
    NSInteger length = string.length;
    while (i < length-1) {
       char c = [string characterAtIndex:i++];
       if (c < '0' || (c > '9' && c < 'a') || c > 'f')
           continue;
       byte_chars[0] = c;
       byte_chars[1] = [string characterAtIndex:i++];
       whole_byte = strtol(byte_chars, NULL, 16);
       [data appendBytes:&whole_byte length:1];
    }

        return data;
}

@end 
```

现在创建一个普通的 swift 文件：

**AWS Extensions.swift**

```
import UIKit
import CommonCrypto

extension URL {

func calculateAWSS3MD5Hash(_ numberOfParts: UInt64) -> String? {

    do {

        var fileSize: UInt64!
        var calculatedPartSize: UInt64!

        let attr:NSDictionary? = try FileManager.default.attributesOfItem(atPath: self.path) as NSDictionary
        if let _attr = attr {
            fileSize = _attr.fileSize();
            if numberOfParts != 0 {

                let partSize = Double(fileSize / numberOfParts)

                var partSizeInMegabytes = Double(partSize / (1024.0 * 1024.0))

                partSizeInMegabytes = ceil(partSizeInMegabytes)

                calculatedPartSize = UInt64(partSizeInMegabytes)

                if calculatedPartSize % 2 != 0 {
                    calculatedPartSize += 1
                }

                if numberOfParts == 2 || numberOfParts == 3 { // Very important when there are 2 or 3 parts, in the majority of times
                                                              // the calculatedPartSize is already 8\. In the remaining cases we force it.
                    calculatedPartSize = 8
                }

                if mainLogToggling {
                    print("The calculated part size is \(calculatedPartSize!) Megabytes")
                }

            }

        }

        if numberOfParts == 0 {

            let string = self.memoryFriendlyMd5Hash()
            return string

        }

        let hasher = AWS3MD5Hash.init()
        let file = fopen(self.path, "r")
        defer { let result = fclose(file)}

        var index: UInt64 = 0
        var bigString: String! = ""
        var data: Data!

        while autoreleasepool(invoking: {

                if index == (numberOfParts-1) {
                    if mainLogToggling {
                        //print("Siamo all'ultima linea.")
                    }
                }

                data = hasher.data(from: file!, startingOnByte: index * calculatedPartSize * 1024 * 1024, length: calculatedPartSize * 1024 * 1024, filePath: self.path, singlePartSize: UInt(calculatedPartSize))

                bigString = bigString + MD5.get(data: data) + "\n"

                index += 1

                if index == numberOfParts {
                    return false
                }
                return true

        }) {}

        let final = MD5.get(data :hasher.data(fromHexString: bigString)) + "-\(numberOfParts)"

        return final

    } catch {

    }

    return nil
}

   func memoryFriendlyMd5Hash() -> String? {

    let bufferSize = 1024 * 1024

    do {
        // Open file for reading:
        let file = try FileHandle(forReadingFrom: self)
        defer {
            file.closeFile()
        }

        // Create and initialize MD5 context:
        var context = CC_MD5_CTX()
        CC_MD5_Init(&context)

        // Read up to `bufferSize` bytes, until EOF is reached, and update MD5 context:
        while autoreleasepool(invoking: {
            let data = file.readData(ofLength: bufferSize)
            if data.count > 0 {
                data.withUnsafeBytes {
                    _ = CC_MD5_Update(&context, $0, numericCast(data.count))
                }
                return true // Continue
            } else {
                return false // End of file
            }
        }) { }

        // Compute the MD5 digest:
        var digest = Data(count: Int(CC_MD5_DIGEST_LENGTH))
        digest.withUnsafeMutableBytes {
            _ = CC_MD5_Final($0, &context)
        }
        let hexDigest = digest.map { String(format: "%02hhx", $0) }.joined()
        return hexDigest

    } catch {
        print("Cannot open file:", error.localizedDescription)
        return nil
    }
}

struct MD5 {

    static func get(data: Data) -> String {
        var digest = [UInt8](repeating: 0, count: Int(CC_MD5_DIGEST_LENGTH))

        let _ = data.withUnsafeBytes { bytes in
            CC_MD5(bytes, CC_LONG(data.count), &digest)
        }
        var digestHex = ""
        for index in 0..<Int(CC_MD5_DIGEST_LENGTH) {
            digestHex += String(format: "%02x", digest[index])
        }

        return digestHex
    }
    // The following is a memory friendly version
    static func get2(data: Data) -> String {

    var currentIndex = 0
    let bufferSize = 1024 * 1024
    //var digest = [UInt8](repeating: 0, count: Int(CC_MD5_DIGEST_LENGTH))

    // Create and initialize MD5 context:
    var context = CC_MD5_CTX()
    CC_MD5_Init(&context)

    while autoreleasepool(invoking: {
        var subData: Data!
        if (currentIndex + bufferSize) < data.count {
            subData = data.subdata(in: Range.init(NSMakeRange(currentIndex, bufferSize))!)
            currentIndex = currentIndex + bufferSize
        } else {
            subData = data.subdata(in: Range.init(NSMakeRange(currentIndex, data.count - currentIndex))!)
            currentIndex = currentIndex + (data.count - currentIndex)
        }
        if subData.count > 0 {
            subData.withUnsafeBytes {
                _ = CC_MD5_Update(&context, $0, numericCast(subData.count))
            }
            return true
        } else {
            return false
        }

    }) { }

    // Compute the MD5 digest:
    var digest = Data(count: Int(CC_MD5_DIGEST_LENGTH))
    digest.withUnsafeMutableBytes {
        _ = CC_MD5_Final($0, &context)
    }

    var digestHex = ""
    for index in 0..<Int(CC_MD5_DIGEST_LENGTH) {
        digestHex += String(format: "%02x", digest[index])
    }

    return digestHex

}
} 
```

现在添加：

```
#import "AWS3MD5Hash.h" 
```

到您的 Objective-C 桥接头。你应该可以接受这个设置。

**示例用法**

要测试此设置，您可以在负责处理 AWS 连接的对象中调用以下方法：

```
func getMd5HashForFile() {

    let credentialProvider = AWSCognitoCredentialsProvider(regionType: AWSRegionType.USEast2, identityPoolId: "<INSERT_POOL_ID>")
    let configuration = AWSServiceConfiguration(region: AWSRegionType.APSoutheast2, credentialsProvider: credentialProvider)
    configuration?.timeoutIntervalForRequest = 3.0
    configuration?.timeoutIntervalForResource = 3.0

    AWSServiceManager.default().defaultServiceConfiguration = configuration

    AWSS3.register(with: configuration!, forKey: "defaultKey")
    let s3 = AWSS3.s3(forKey: "defaultKey")

    let headObjectRequest = AWSS3HeadObjectRequest()!
    headObjectRequest.bucket = "<NAME_OF_YOUR_BUCKET>"
    headObjectRequest.key = self.latestMapOnServer.key

    let _: AWSTask? = s3.headObject(headObjectRequest).continueOnSuccessWith { (awstask) -> Any? in

        let headObjectOutput: AWSS3HeadObjectOutput? = awstask.result

        var ETag = headObjectOutput?.eTag!
        // Here you should parse the returned Etag and extract the number of parts to provide to the helper function. Etags end with a "-" followed by the number of parts. If you don't see this format, then pass 0 as the number of parts.
        ETag = ETag!.replacingOccurrences(of: "\"", with: "")

        print("headObjectOutput.ETag \(ETag!)")

        let mapOnDiskUrl = self.getMapsDirectory().appendingPathComponent(self.latestMapOnDisk!)

        let hash = mapOnDiskUrl.calculateAWSS3MD5Hash(<Take the number of parts from the ETag returned by the server>)

        if hash == ETag {
            print("They are the same.")
        }

        print ("\(hash!)")

        return nil
    }

} 
```

如果服务器返回的 ETag 没有以 ETag 结尾的“-”，则只需传 0 即可计算 AWSS3MD5Hash。如果您遇到任何问题，请发表评论。我正在研究一个快速的解决方案，我会在完成后立即更新这个答案。谢谢

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-11-12T12:09:01.980

关于块大小，我注意到它似乎取决于零件的数量。AWS 文档的最大零件数为 10000。

因此，从默认的 8MB 开始，知道文件大小、块大小和部分可以计算如下：

```
chunk_size=8*1024*1024
flsz=os.path.getsize(fl)

while flsz/chunk_size>10000:
  chunk_size*=2

parts=math.ceil(flsz/chunk_size) 
```

零件必须上圆

* * *

## 回答 #19

> 赞同：-4
> 
> 时间：2012-08-31T06:11:14.787

不，

到现在还没有匹配普通文件ETag和Multipart文件ETag和本地文件MD5的解决方案。

# python - python中的Johansen协整检验

> ID：12186994
> 
> 赞同：11
> 
> 时间：2012-08-29T21:47:00.783
> 
> 标签：python, statistics, pandas, statsmodels

在处理统计和时间序列分析（熊猫和统计模型）的任何 Python 模块中，我找不到任何关于执行约翰森协整检验的功能参考。anybpdy 是否知道周围是否有一些代码可以对时间序列之间的协整进行这种测试？谢谢你的帮助，

马鲁伊齐奥

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-03-14T16:32:53.823

这现在在 Python 的 statsmodels 中实现：

```
from statsmodels.tsa.vector_ar.vecm import coint_johansen
x = getx() # dataframe of n series for cointegration analysis
jres = coint_johansen(x, det_order=0, k_ar_diff=1) 
```

有关输入/结果的完整描述，请参阅[文档](https://www.statsmodels.org/dev/generated/statsmodels.tsa.vector_ar.vecm.coint_johansen.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-29T23:14:01.947

statsmodels 没有 Johansen 协整检验。而且，我也从未在任何其他 python 包中见过它。

statsmodels 有 VAR 和结构 VAR，但还没有 VECM（矢量纠错模型）。

*更新：*

正如 Wes 所提到的，现在有一个针对 Johansen 的 statsmodels 协整检验的拉取请求。我已经翻译了 LeSage 的空间计量经济学工具箱中的 matlab 版本，并编写了一组测试来验证我们是否得到了相同的结果。它应该在 statsmodels 的下一个版本中可用。

*更新2：*

`coint_johansen`statsmodels 0.9.0 中包含协整检验以及矢量误差校正模型 VECM。（另见第三个答案）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-08T22:39:46.993

见[http://github.com/statsmodels/statsmodels/pull/453](http://github.com/statsmodels/statsmodels/pull/453)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T16:31:07.947

检查这个：[https ://searchcode.com/codesearch/view/88477497/](https://searchcode.com/codesearch/view/88477497/)

它提供了一个库，您可以在其中找到 Johansen 协整检验。

# java - 将大型 WAR 文件上传到 Cloud Foundry 失败

> ID：12186997
> 
> 赞同：0
> 
> 时间：2012-08-29T21:47:04.607
> 
> 标签：java, spring, cloud-foundry

尝试 vmc 推送时，我得到：

```
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (301M): OK      
HTTP exception: Errno::EPIPE:Broken pipe 
```

关于这个问题的唯一建议似乎是[减小应用程序的大小](http://support.cloudfoundry.com/entries/20235341-http-exception-errno-epipe-broken-pipe)。

没有办法减少我的应用程序大小。它依赖于一个非常大的数据文件。有没有办法将这种规模的应用程序部署到 Cloud Foundry？如果我可以传输文件，文件系统限制似乎允许它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:21:35.830

你检查过日志文件吗？`vmc logs <app-name>`

此外，我希望您尝试将您的应用程序部署在微云上，以便您可以通过 SSH 连接到其中并查看发生了什么。如果您仍有问题，最好的办法是向 Cloud Foundry 的支持团队提出一个案例 - [http://support.cloudfoundry.com](http://support.cloudfoundry.com)。这样您就可以与支持代理共享您的战争文件，并让他们调查您的问题。