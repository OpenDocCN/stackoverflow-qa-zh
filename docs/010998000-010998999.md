# StackOverflow 问答 10998000-10998999

# c# - 从 VisualStudio 2005 升级到 2010（对于 WinForms 项目）是否容易/安全？

> ID：10998001
> 
> 赞同：3
> 
> 时间：2012-06-12T13:45:11.487
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio-2005, upgrade

我的团队使用 win 表单和 Visual Studio 2005 为我们的项目构建了许多工具。我们正在考虑升级到 VS 2010。

只是想了解任何兼容性问题以及升级的任何好处。

升级是否涉及大量时间和精力，还是 Visual Studio 会处理它？

您的回答将帮助我们做出决定。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:53:47.317

优点：

*   .NET 改进（前提是您升级了框架版本）
*   较新的 .NET 的较新的第 3 方库和工具的可用性（同上）
*   IDE 改进

中性的：

*   WinForms 在 .NET 2.0 和 4.0 之间没有太大变化。

缺点：

*   VS 2010 是一个非常重的程序，需要更多的 CPU 和 RAM 以及更快的磁盘才能顺利运行。

**你决定。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:53:34.510

据我所知没有缺点

我只知道您在视觉方面的所有更改都将放在[表单或用户控件的名称].Designer.[cs/vb]

我是 VS2010 的用户，我对此非常满意，

但是为什么不等待VS2012呢？

亲切的问候，

科尔内

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:54:38.207

是的，这是可能且简单的，但很大程度上取决于您在应用程序中使用的功能。它不应该在 VS 2010 中贬值。备份您的项目并尝试转换它，转换向导将列出在转换您的应用程序时遇到的所有警告和错误。然后您可以根据它做出决定是否升级您的应用程序？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T14:41:07.340

您需要检查[C# 2008](http://msdn.microsoft.com/en-us/library/cc713578%28v=vs.90%29.aspx)和[C# 2010中的重大更改，然后检查](http://msdn.microsoft.com/en-us/library/ee855831.aspx)[.NET 3.5](http://msdn.microsoft.com/en-us/library/dd310284.aspx)和[.NET 4.0](http://msdn.microsoft.com/en-us/library/ee941656%28VS.100%29.aspx)中的迁移问题，但*前提*是您选择升级 Framework 目标。只需将其升级为 VS 2010 可读和可编译，不会引入任何重大问题。但是，请检查您的项目是否涉及在 VS 2010 中升级/删除的外部组件，例如报告组件、SQL 连接等。根据我的经验，第三方组件受到的影响最大。

至于好处，很多。查看[Visual Studio Gallery](http://visualstudiogallery.msdn.microsoft.com/)中的一些非常有用的扩展（我最喜欢的是免费的[Coderush Xpress ），使用](http://visualstudiogallery.msdn.microsoft.com/9741bffc-033d-4c8c-86d7-08060ba98444)[Roslyn](http://blogs.msdn.com/b/jasonz/archive/2012/06/05/announcing-microsoft-roslyn-june-2012-ctp.aspx)体验 C# REPL 的乐趣，或者见鬼，每次我被迫使用 2008 或其他版本时，Intellisense 的[改进](http://weblogs.asp.net/scottgu/archive/2009/10/22/vs-2010-code-intellisense-improvements-vs-2010-and-net-4-0-series.aspx)让我感到恐惧IDE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T13:54:09.130

在 VS2010 中打开 VS2005 解决方案，一个向导将打开并升级您的解决方案。只需对现有解决方案进行备份并尝试一下。VS 2010 很不错！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T14:02:34.770

每个人的利弊清单都有不同的期望和差异。因此，决定它是否适合您的最佳方法是继续尝试。如前所述，当您尝试打开项目文件时，它会升级您的项目文件（包括先为您备份）。

您可以从 Microsoft 网站下载试用版并将其与现有的 VS2005 安装一起安装。如果您担心一起安装，请将其安装到虚拟机中或从[http://blogs.msdn.com/b/briankel/archive/2010/06/25/now-available-下载现成的虚拟机映像visual-studio-2010-rtm-virtual-machine-with-sample-data-and-hands-on-labs.aspx](http://blogs.msdn.com/b/briankel/archive/2010/06/25/now-available-visual-studio-2010-rtm-virtual-machine-with-sample-data-and-hands-on-labs.aspx)

# python - 用于选择具有一些相关概率的 N 个值的代码

> ID：10998002
> 
> 赞同：0
> 
> 时间：2012-06-12T13:45:15.867
> 
> 标签：python, algorithm, probability, probability-theory

假设我们有一组`x`值`N`和`{x_i; i=1,...,N}`一组相关的概率`{w_i; i=1,...,N}`。

我们希望通过根据概率从集合中选择每个值来从集合中获得`x`一组新`x^`的`N`值。我们如何编码（即伪代码算法，可以翻译成任何语言）。`{x^_i; i=1,...,N}``x_i``x``w_i`

编辑：python代码：

```
def resample(self,x,w):
    N = len(w)
    new_x = empty(N)
    c = cumsum(w)

    for i in range(N):
        r = random()
        for j in range(N):
            if( j == N-1 ):
                new_x[i] = x[j]
                break
            else:
                if( (c[j] <= r) and (r < c[j+1]) ):
                    new_x[i] = x[j+1]
                    break

    new_w = ones(N,dtype=float)/N
    return new_x, new_w 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:59:20.577

你可以调用一个函数，它给你一个介于 0 和 1 之间的随机数。
如果概率是 w_1 = 0.2，w_2 = 0.5，w_3 = 0.3，你可以：
如果你得到一个介于 0 和 0.2 之间的数字，则选择 x_1 如果
你得到一个介于 0.2 和 0.7 之间的数字，
否则选择 x_3。

更一般地说，如果 w_1 + ... + w_(n-1) <= 随机数 < w_1 + ... + w_(n-1) + w_n，则选择 x_n

这不是整个伪代码，只是对其最有问题的部分的解释，但我认为如果你对你的问题有一个基本的了解就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:01:54.670

我认为最好的选择是预处理概率集，然后得到一个随机值。

让我解释一下我的意思：

首先，您创建一个新集合，例如 h_i，其中放置每个对象的累积概率。

```
x_i:{A,B,C,D}
w_i:{0.2,0.3,0.4,0.1}
h_i:{0.2,0.5,0.9,1} 
```

最后一个元素当然是 1。（但如果不是（你有丢失的案例）它仍然有效。

现在生成一个随机数 0≤r≤1 并查找 h 大于 r 的第一个元素。

例如，如果你得到 0.56，你选择 C，因为 0.9(h_C) > 0.56 并且 0.5(h_B) ≤ 0.56

此操作在数组上可能会很昂贵，但如果您选择二叉搜索树来存储集合 h_i，您可以获得非常好的结果。

也就是说，如果您想在同一概率集中选择大量随机值。如果集合不断变化，我会使用另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T00:42:58.630

```
# import the random library
import random

# define the input data
X = ["A","B","C","D"]
w = [0.2,0.3,0.4,0.1]

# size of the new sample
n = 10

# empy list to store the result
Xp = []

# the actual code
while len(Xp) < n:
    random_choice = random.choice(w)
    if random_choice >= random.random():
        Xp.append(X[w.index(random_choice)])

# have a look
Xp 
```

出[39]：

['C'，'C'，'C'，'B'，'D'，'B'，'A'，'D'，'A'，'B']

# php - PHP，处理和拆分 CSV 文件

> ID：10998003
> 
> 赞同：1
> 
> 时间：2012-06-12T13:45:17.587
> 
> 标签：php

S0 记录器每月附带一个 csv 文件。该文件每 5 分钟更新一次，可以随时检索。在月底，该文件计数超过 8500 行。当新的一个月开始时，会制作一个新文件。

文件格式是这样的：

```
Datum / Uhrzeit (UTC);Main meter - Sales office (kWh);Meter 9;Temperature - Server room;Supply conductor air conditioner

01.06.12 00:00:00;438.220;0.001;274;155
01.06.12 00:05:00;438.240;0.001;274;203
01.06.12 00:10:00;438.259;0.001;275;134
01.06.12 00:15:00;438.283;0.001;274;176
01.06.12 00:20:00;438.303;0.001;274;206 
```

`dd.mm.yy`（这是欧洲日期格式）

我想将每月文件拆分为文件名为 yymmdd.csv 的每日文件，并存储这些文件以供进一步使用和处理。列名没有用。

白天，它的数据每五分钟更新一次，但一天结束后，不需要重新处理这些数据，因为没有任何变化。我发现 fgetcsv 是最合适的方法。但是如何防止对数据进行重新处理，这种处理相当耗时且不必要呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:03:56.907

假设每月文件总是附加到。

您可以保留一个名为 eg 的小文件`2012-january.csv.ptr`。该文件保留文件中的最后一个位置；如果它不存在，则从头开始。

每次成功读取时，您都使用`ftell()`. 当您到达末尾时，您将写入`.ptr`文件中的最后一个位置。

当`.ptr`文件存在时，您使用 回溯到文件中`fseek()`，然后按正常方式开始处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:03:51.947

结合我想出的答案：它有效，但有时再次运行脚本时，我错过了拆分文件中的一行，我不知道为什么。

```
<?php  
$fh = fopen('2012_06.csv.ptr', 'r');  
$pos1 = fread( $fh, 8192 );  
//echo $pos1 , 'a',"<BR>";
fclose ($fh);
if ($fp = fopen('2012_06.csv', 'r'))
fseek ($fp , $pos1 );
{
$line_number = 0;
while ($line = fgetcsv($fp, 0, ';')) {
if ($line_number++ == 0) {
  continue;
}
$date = explode(' ', $line[0]);
$file = $date[0] .'.log';

file_put_contents(
  'Monthly/'. $file, 
  implode(';', $line) ."\n",
  FILE_APPEND
);
}
$pos2 = ftell ($fp);
//echo $pos2;
fclose($fp);
}
$fh = fopen('2012_06.csv.ptr', 'w');
fwrite ($fh, $pos2);
fclose ($fh);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:05:27.890

Here is the code:

```
if ($fp = fopen('log.csv', 'r')) {
  $line_number = 0;

  while ($line = fgetcsv($fp, 0, ';')) {
    if ($line_number++ == 0) {
      continue;
    }

    $date = explode(' ', $line[0]);
    $file = $date[0] .'.log';

    file_put_contents(
      'monthly/'. $file, 
      implode(';', $line) ."\n",
      FILE_APPEND
    );
  }

  fclose($fp);
} 
```

It reads CSV file line by line, extracts date part from the first column and creates new file and appends data to it.

P.S. folder "monthly" must be writable

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:55:04.497

你可以使用任何数据库吗？简单的表将用于数据存储和以后的处理。

# mysql - MySQL 案例何时不起作用

> ID：10998012
> 
> 赞同：1
> 
> 时间：2012-06-12T13:45:52.107
> 
> 标签：mysql, sql, list, if-statement

我正在尝试在更新单个项目的位置时更新列表中项目的位置，例如：

1.  项目1
2.  项目2
3.  第 3 项
4.  第 4 项
5.  项目5

将 item5 移动到位置 2 会将列表更新为：

1.  项目1
2.  item5 <<*新位置*
3.  item2 << [*下移了一个*]
4.  item3 << [*下移了一个*]
5.  item4 << [*下移了一个*]

.

```
UPDATE subjects SET  
position = (CASE WHEN position < {$position} THEN position + 1
WHEN position > {$position} THEN position - 1 else position END CASE)
WHERE position <= position AND position >= {$position}; 
```

此 SQL 查询不起作用。但是我还想做的是 IF position < {$position} 然后将 WHERE 子句作为现在的样子，但是如果 position > {$position} 我想让 <= 和 >= 交换（这随后将允许在将位置向上或向下移动列表时进行更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:15:09.463

我不确定要求`WHERE position <= position`是什么，因为`position`总是`position`在同一行中相等......

我也看不到您的更新语句如何仅使用一个参数，您肯定需要更新项目的当前位置以及将其移动到的位置吗？

假设以上是正确的，您可以按如下方式编写查询（`$new`对新位置和`$current`当前位置使用 2 个参数）：

```
UPDATE  subjects
SET     position = CASE WHEN position = {$current} THEN {$new} 
                        ELSE position + SIGN({$current} - {$new}) 
                    END
WHERE   position BETWEEN LEAST({$current}, {$new}) AND GREATEST({$current}, {$new}) 
```

前提是只需要更新当前值和新值之间的行，这由 where 子句覆盖。接下来，更新语句使用该`SIGN`函数来确定移动是上移还是下移，从当前位置添加或删除 1（要移动的行除外，它使用新位置更新）

**工作示例**

[http://sqlfiddle.com/#!2/99c64/1](http://sqlfiddle.com/#!2/99c64/1)

我必须在模式部分进行更新，因此您无法确切地看到表在 SQL Fiddle 中是如何更改的，但是您应该从结果中看到值“3”的行已从位置移至位置 8位置 3，从 8 到 4 的所有位置都向下移动了 1。在下面的小提琴中，过程是相反的（第 8 行移至第 3 行，第 3 行移至第 7 行上移 1）。

[http://sqlfiddle.com/#!2/a087b/1](http://sqlfiddle.com/#!2/a087b/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:39:01.523

如果`position`有约束，由于 MySQL语句`UNIQUE`的工作方式非标准，您需要 2 或 3 个步骤：`UPDATE`

```
UPDATE subjects 
  SET position = -67             --- an impossible value
WHERE position = 5 ;

UPDATE subjects 
  SET position = position + 1     
WHERE position BETWEEN 2 AND 5 
ORDER BY position DESC ;   

UPDATE subjects 
  SET position = 2
WHERE position = -67 ; 
```

# drag-and-drop - 替代支持插值的 dragdealer.js？

> ID：10998013
> 
> 赞同：1
> 
> 时间：2012-06-12T13:45:52.840
> 
> 标签：drag-and-drop, slider, scrollbar

我需要通过外部句柄控制元素的滚动，为此，可以使用出色的 dragdealer.js (http://code.ovidiu.ch/dragdealer/) 但似乎还没有自 2010 年以来更新，并且有一些功能可能需要改进，例如具有不同大小的“步骤”的能力，以及动态控制滚动速度，例如，如果您想在“幻灯片”之间滚动滚动元素"大小不一。

您认为我应该看一下最近的库/插件吗？

# windows - xcopy 完成操作成功，但没有发生复制

> ID：10998014
> 
> 赞同：1
> 
> 时间：2012-06-12T13:45:56.880
> 
> 标签：windows, batch-file, windows-server-2008-r2, batch-processing, xcopy

我在使用 Xcopy 进行复制时遇到了一个奇怪的问题。

我正在使用 Windows Server 2008 R2。有一个批处理文件 (.CMD) - 实际上是 2 个批处理文件 - 它执行许多操作。其中有2个Xcopy。

第一个 Xcopy 成功完成了复制。然后执行一些批处理操作，并在一段时间后执行第二个 Xcopy。它显示成功状态，例如“已复制 300 个文件”，但是...文件未复制！

奇怪的行为：我在批处理中放了一个暂停命令，在这第二个奇怪的 Xcopy 之后，我在提示符处运行相同的命令并且..它有效！

我无法解释这一点，所以我在这里寻求帮助。完整的命令是：

`xcopy /s /e /h /r /i /y E: D:`

作为好奇/信息的问题，另一个Xcopy（有效！）是：

`xcopy /s /e /h /r /i /y E: D:`

或者....**相同的命令**！！！每个都在一个单独的批处理文件中运行 - 第一个批处理“调用”第二个批处理。

E: 是 CD-ROM，所以在第一个 Xcopy 之后，第一个 Batch 请求另一个 Disc 并调用第二个 Batch，它（假定）将整个 CD 内容复制到 D:（HDD）。

如果这个问题很愚蠢，我很抱歉，我没有意识到纠正 Xcopy 的不稳定行为是多么简单。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:21:17.177

非常感谢巴厘岛 C ！

但我发现了问题：正确的语法是

`xcopy /s /e /h /r /i /y E:\ D:\`

您可以看到反斜杠使一切变得不同！这些文件被复制到另一个目录，实际上是当前工作目录。带有反斜杠的副本很好。

但我很欣赏你的建议...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:00:24.913

要复制全部内容，请尝试使用

`xcopy /e /h /r /i /y /t E:\*.* D:\`

我省略了，`/s`因为它与开关相矛盾`/e`，我怀疑它会成为问题的根源，但值得一试。我使用`\t`开关复制源的目录结构。

我还使用通配符`*.*`来复制内容，而不仅仅是驱动器号，有些东西在 cmd 提示符下工作但不是批量，但尝试使用它。

另一种选择是使用`robocopy`.

# hibernate - Hibernate缓存陈旧数据：多对多单向映射

> ID：10998016
> 
> 赞同：0
> 
> 时间：2012-06-12T13:46:02.923
> 
> 标签：hibernate

我有如下多对多关系（在库类型应用程序中）：

```
User:    
@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(
        name = "user_book",
        joinColumns = {@JoinColumn(name = "fk_user")},
        inverseJoinColumns = {@JoinColumn(name = "fk_book")}
)
private List<Book> books = null;

Book:
@ManyToMany(cascade = {CascadeType.ALL}, 
            mappedBy = "books", fetch = FetchType.LAZY)
private List<User> users; 
```

问题：当我编辑一本书的名称时，表中的值会更新，但是由于休眠缓存，用户对象仍然持有对旧书实体的引用。因此，虽然在后端我有正确的 Book 值，但在 UI 上我仍然看到陈旧的值。我正在使用 ehcache 并且还启用了二级缓存。缓存配置：

```
<defaultCache
        maxElementsInMemory="10000"
        eternal="false"
        timeToLiveSeconds="120"
        overflowToDisk="false"
        diskPersistent="false"
        />
<cache name="org.hibernate.cache.UpdateTimestampsCache"
       maxElementsInMemory="10000"
       timeToIdleSeconds="300"
        />

<cache name="org.hibernate.cache.StandardQueryCache"
       maxElementsInMemory="10000"
       timeToIdleSeconds="300"
        /> 
```

我也在使用 OEMIV 过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:12:55.780

我认为您必须调用该方法

```
Flush() 
```

这是因为您对一级或二级缓存所做的任何更改都将存储到缓存中，但是直到您刷新缓存后，数据才会真正存储到数据库中。

希望这可以帮助！

# php - 在 Doctrine 2 中使用相关实体 id 删除关联

> ID：10998018
> 
> 赞同：0
> 
> 时间：2012-06-12T13:46:10.640
> 
> 标签：php, symfony, doctrine, doctrine-orm

教义 2 文档指出：

> 删除两个实体之间的关联也同样简单。有两种策略可以做到这一点，按键和元素。

“按键”是什么意思？它是`id`相关实体的字段还是只是相关实体在集合中的*位置？*例如这里`$ithComment`使用（即注释的*位置）：*

```
// Remove by Key
$user->getComments()->remove($ithComment);
$comment->setAuthor(null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:09:38.737

它是集合中相关实体的位置。在检查 ArrayCollection..

```
public function add($value)
{
    $this->_elements[] = $value;
    return true;
}

public function remove($key)
{
    if (isset($this->_elements[$key])) {
        $removed = $this->_elements[$key];
        unset($this->_elements[$key]);

        return $removed;
    }

    return null;
} 
```

您可以看到没有使用对集合项标识符的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T12:34:51.110

我有解决方案，也许对你有好处：

```
public function addSectors(ArrayCollection $sectors)
{
    foreach($sectors as $k => $sector) {
        $this->addSector($sector);
    }
}    

public function removeSectors($sectors)
{   
    foreach($sectors as $k => $sector) {
        unset($this->sectors[$k]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:21:58.350

根据 Doctrine2 API，一个 Doctrine Collection 的 remove 方法，

> “从集合中删除指定索引处的元素”

（见[https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Collections/Collection.php#L78](https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Collections/Collection.php#L78)）

我的结论是，你说的关键确实是相关实体的位置。

# jquery-mobile - 将 Django-dynamic-formsets 与 JQuery Mobile 的单选按钮集成

> ID：10998022
> 
> 赞同：0
> 
> 时间：2012-06-12T13:46:32.143
> 
> 标签：jquery-mobile, django-forms

我正在使用 Django 和 django-dynamic-formset 插件来生成 JQuery Mobile (JQM) 站点。我有嵌套表单，允许用户单击“添加”链接到表单的另一行。这在没有 JQM 的情况下工作得很好，但是当 JQM 用于设置表单小部件的样式时，单选按钮标签不会触发正确的单选按钮。

我基于生成的 HTML[提出了一个静态的行为示例。](http://johnwoltman.com/a/1.html)单击“添加”链接，然后尝试为添加的项目选择严重性。标签的“for”属性似乎正确更新，所以我不知道我做错了什么。

[django-dynamic-formset 指南](http://code.google.com/p/django-dynamic-formset/wiki/Usage#Formset_options)为我提供了一种在用户单击“添加”按钮后调用 JavaScript 函数的方法，但我不知道是否应该调用 JQM 方法来解决问题。当我使用 JQM 的 enhanceWithin 函数时，它会触发页面加载，它将我的表单提交给 Django，此时我不希望这样做，因为表单还没有验证。

**编辑**：我将一个更好的示例上传到相同的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:36:06.450

在足够的咖啡因和花生 M&M 之后，我想通了。

**失败原因：** django-dynamic-formset (DDF) 插件复制了你给它的表单。但是表单是按原样克隆的，其中已经包含所有 JQuery Mobile (JQM) 处理。这会导致 JQM 忽略它并使单选按钮行为异常。

**解决方案：**`formTemplate` DDF 插件允许您通过其参数指定要克隆的表单。JQM 允许您禁用某些元素的自动移动增强功能。创建表单的未增强版本，并将其作为您的`formTemplate`.

**更多细节**：我把这个编码到我的 HTML 头中，*在*引用 JQM 之前：

```
<script>
    $(document).bind('mobileinit',function(){
        $.mobile.ignoreContentEnabled = true;   // required for using the natural forms
    });
</script> 
```

并包括这种风格来隐藏我的“自然”形式：

```
<style>
    .natural-form { visibility: hidden; display: none; }
</style> 
```

在 Django 代码中，我添加了一个`<div class='natural-form>`并将我的表单的虚拟版本放入其中（确保`<div>`用唯一的 ID 将其包围以供稍后参考）。在我的 DDF 初始化中，我给它唯一的 ID 作为`formTemplate`.

在另一个论坛上有人告诉我，我必须破解 DDF 和 JQM 才能使其正常工作。这两个库的设计给我留下了深刻的印象 - 足够灵活，以至于 JQuery 的新手可以将所有部分粘贴在正确的位置并从中获得一些东西。

# oauth-2.0 - Google API 的 OAuth2 是否需要每个用户都登录 Google？

> ID：10998023
> 
> 赞同：0
> 
> 时间：2012-06-12T13:46:32.267
> 
> 标签：oauth-2.0, google-oauth

我不明白 OAuth2 如何适用于 Google API。

假设我已经登录 API 的控制台并选择了几个我想使用的 API。我的网站应该向其用户提供这些 API。

我怀疑我的网站用户是否必须登录 GOOGLE 才能使用这些 API。

例如，一些喜欢使用 Facebook 登录的用户无法使用 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:22:44.087

取决于 API。如果您代表他们访问用户数据（任务、日历等），那么用户当然需要拥有 Google 帐户，并且在授权您的应用程序时需要登录。

但并非所有 API 都对用户数据起作用。搜索和翻译等 API 不需要用户授权访问，并且通常使用简单的 API 密钥而不是 OAuth。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:12:12.313

用户必须登录 Google 才能授权您的应用程序。

您的应用在调用 Google API 时需要提供访问令牌。访问令牌由 Google 用户授予，以便您的应用程序能够访问该用户在 Google 上的资源。所以很明显，用户必须登录谷歌。

# php - symfony - 试图合并两种形式，但我得到一个约束错误

> ID：10998024
> 
> 赞同：0
> 
> 时间：2012-06-12T13:46:35.340
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我有这个 schema.yml

```
Makeproduct:  
  actAs: 
    Timestampable: ~ 
  columns:  
    product_id:   { type: integer(8), notnull: true }  
    ingredient_id: { type: integer(8), notnull: true }  
    ingredient_quantity: { type: integer(8), notnull: true } 
    measure_id: { type: integer(8), notnull: false } 
   relations:  
    Product:
      local: product_id
      foreign: id
      foreignAlias: ProductIngredients 
    Ingredient:
      local: ingredient_id
      foreign: id
      foreignAlias: ProductIngredients 
    Measure:  
      local:         measure_id  
      foreign:       id 

Ingredient:
  actAs:
    I18n:
      fields: [name]
  columns:
    name: { type: string(50), notnull:true}
    price: { type: decimal, notnull:true}

Category:
  actAs:
    I18n:
      fields: [name]
  columns:
    name: { type: string(50), notnull:true}
  relations: 
    ProductsCategory:  
      class:        Product
      local:        id
      foreign:     category_id 
      type:         many 

Measure:
  columns:
    name: { type: string(2), notnull:true}
  relations: 
    ProductsCategory:  
      class:        Makeproduct
      local:        id
      foreign:     measure_id 
      type:         many 

Product:
  actAs:
    I18n:
      fields: [name, description]
      actAs:
        Sluggable: { fields: [name], uniqueBy: [lang, name] } 
  columns:
    category_id:   { type: integer(8), notnull: true }  
    name: { type: string(50), notnull:true}
    pic: { type: string(150)}
    description: { type: clob}
    price: { type: decimal, notnull:true}
  relations: 
    Ingredients:
      class: Ingredient 
      foreignAlias: Products 
      refClass: Makeproduct 
      local: product_id
      foreign: ingredient_id
    Category:  
      local:         category_id  
      foreign:       id 
```

我已经在这个模式启动 build --forms 上创建了我的表单，但现在我想将 ProductForm 与 MakeproductForm 合并，因为我希望当我在 ProductForm 中时我也可以输入成分，将它们连接到当前产品.

我尝试按照symfony 网站上的[这个示例](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms)执行此操作，并且在我的代码中进行了此更改：

MakeproductForm :

```
class MakeproductForm extends BaseMakeproductForm
{
  public function configure()
  {

  unset($this['created_at'], $this['updated_at']);

  $this->useFields(array('ingredient_id', 'ingredient_quantity', 'measure_id'));

  }
} 
```

产品形式：

```
class ProductForm extends BaseProductForm
    {
      public function configure()
      {

          $this->setWidgets(array(
          'id'               => new sfWidgetFormInputHidden(),
          'category_id'      => new sfWidgetFormDoctrineChoice(array('model' => $this->getRelatedModelName('Category'), 'add_empty' => false)),
          'pic'    => new sfWidgetFormInputFile(),
          'price'            => new sfWidgetFormInputText(),
          //'ingredients_list' => new sfWidgetFormDoctrineChoice(array('multiple' => true, 'model' => 'Ingredient')),      
        ));  

        $this->setValidators(array(
          'id'               => new sfValidatorChoice(array('choices' => array($this->getObject()->get('id')), 'empty_value' => $this->getObject()->get('id'), 'required' => false)),
          'category_id'      => new sfValidatorDoctrineChoice(array('model' => $this->getRelatedModelName('Category'))),
          'pic'    => new sfValidatorFile((array('mime_types' => 'web_images','path' => sfConfig::get('sf_web_dir').'/images/', 'required' => false))),
          'price'            => new sfValidatorNumber(),
          //'ingredients_list' => new sfValidatorDoctrineChoice(array('multiple' => true, 'model' => 'Ingredient', 'required' => false)),    
        ));

        $this->widgetSchema->setNameFormat('product[%s]');

        $this->errorSchema = new sfValidatorErrorSchema($this->validatorSchema);    

        $this->embedI18n(array('en', 'it'));
        $this->widgetSchema->setLabel('en', 'English');
        $this->widgetSchema->setLabel('it', 'Italian');

        //$this->mergeForm(new MakeproductForm(Doctrine::getTable('Makeproduct')->find($this->getObject()->getId())));

      $subForm = new sfForm();
      for ($i = 0; $i < 2; $i++)
      {
        $makeproduct = new Makeproduct();
        $makeproduct->Ingredient = $this->getObject();

        $form = new MakeproductForm($makeproduct);

        $subForm->embedForm($i, $form);
      }
      $this->embedForm('newIngredients', $subForm);

      } 
```

现在的问题是它无法识别产品的 id，并给我一个 costraint 错误：

> SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`dolcisymfony`. `makeproduct`, CONSTRAINT `makeproduct_product_id_product_id`FOREIGN KEY ( `product_id`) REFERENCES `product`( `id`)）

我确定我遗漏了一些东西，但是按照那个例子我无法解决问题，并且mrge这两种形式：你能帮我，给我一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:47:30.757

我认为你的问题是关于这条线：

```
$makeproduct->Ingredient = $this->getObject(); 
```

我想应该是这样的：

```
$makeproduct->Product = $this->getObject(); 
```

# xml - XSLT，如何按元素名称排序

> ID：10998029
> 
> 赞同：1
> 
> 时间：2012-06-12T13:46:51.680
> 
> 标签：xml, xslt

我是 XSLT 的新手。我只是提出一个问题，希望有人能提供帮助。

假设我有一个源 xml，

```
<?xml version="1.0"?>
<docroot>
    <vc6>foo</vc6>
    <vc7>bar7</vc7>
    <vc8 arch="x64">amd64demo</vc8>
    <vc7>foo7</vc7>
    <vc6>bar</vc6>
</docroot> 
```

我想把它变成：

```
<?xml version="1.0"?>
<docroot>
    <vc6>bar</vc6>
    <vc6>foo</vc6>
    <vc7>bar7</vc7>
    <vc7>foo7</vc7>
    <vc8 arch="x64">amd64demo</vc8>
</docroot> 
```

那是，

1.  的子元素应按元素名称排序，因此> 位于`<vc6`> 之前`<vc7`。
2.  如果两个子元素具有相同的元素名称，则应按其文本值对它们进行排序，因此 'bar' 位于 'foo' 之前。

xsl怎么写？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T16:39:00.930

修改legoscia的答案：

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="node()">
      <xsl:sort select="name()" />
      <xsl:sort select="." />
    </xsl:apply-templates>
  </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:50:36.997

`xsl:sort`在[这个答案](https://stackoverflow.com/a/5962936/113848)中有一些如何使用的例子。像这样的东西应该适合你：

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="node()">
      <xsl:sort select="name()" />
      <xsl:sort select="." />
    </xsl:apply-templates>
  </xsl:copy>
</xsl:template> 
```

# r - 大数据集的正态曲线直方图

> ID：10998036
> 
> 赞同：0
> 
> 时间：2012-06-12T13:47:08.230
> 
> 标签：r, histogram

我是 R 新手，我正在尝试为以下数字绘制直方图

输入.txt

```
a b c 1.111 
d e f 2.3433 
g h i 9.87667 
............ 
............ 
```

总记录 - 2444910

最大值 - 142701.38999976

所以，到目前为止我已经尝试过了

```
setwd ("/path/")
data <- read.table ("input.txt", sep="\t", header=F)
x <-data$V4
bins = seq(0,150000,by=10000)
h <- hist(x, breaks=bins, probability=TRUE)
s = sd(x)
m = mean(x)
curve(dnorm(x, mean=m, sd=s), add=TRUE, lwd=3, col="red")
lines(density(x), col="blue")
abline(v=mean(x),col="blue")
mtext(paste("mean ", round(mean(x),1), "; sd ", round(sd(x),1), "; N ",length(x),sep=""), side=1, cex=.75)
dev.off() 
```

但是，我只能在 (0,0) 坐标附近获得一个直方图条。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:54:10.740

```
dat <- data.frame(V4=c(runif(10000, 1,5000), 149999))
hist(dat$V4, breaks=c(seq(0,5000,100), 150000) ) 
```

要排除异常值：

```
hist(dat$V4[dat$V4 <5000], breaks=c(seq(0,5000,100)) ) 
```

# android - android中活动之间的调用方法

> ID：10998037
> 
> 赞同：0
> 
> 时间：2012-06-12T13:47:08.757
> 
> 标签：android, methods, android-activity, call

我正在制作一个 android 应用程序，我需要从另一个活动中调用一个活动中的方法。我有一项主要活动和其他几项活动。当按下后退按钮时，其他的应该在主活动中执行一个方法，我该怎么做？我知道如何编写后退按钮，但如何从另一个活动中调用该活动？我没有使用特殊或自定义线程。请帮助我，并提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:50:51.983

在调用活动中有一个名为“设置结果”的继承方法`onActivityResult(int requestCode, int resultCode, Intent data)`应该让您在被调用活动中执行代码。

看看这里的例子和一些提示：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# java - 来自 RDz 的 Java Web 服务调用

> ID：10998038
> 
> 赞同：0
> 
> 时间：2012-06-12T13:47:09.053
> 
> 标签：java, service, web, mainframe

我不知道任何人对 RDz 有多熟悉，但如果您了解 IBM 大型机的知识以及 Web 服务的工作原理，那么也许您可以帮助我。

我的 MF 有一个 UNIX 端和一个 CICS 端，我需要在 UNIX 端放置一个 Java 应用程序，可以从 CICS 调用该应用程序，其中从 unix 端的 java 程序调用 Web 服务，然后返回一些数据。

无论如何，我有其他一切工作，但我需要知道如何使用通过 CommArea CAH 参数传递给我的数据调用 Web 服务。我是网络服务的新手，但学习总是很好。

编辑：这个java程序需要独立并且能够在没有任何手动操作的情况下自行运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:49:00.320

从 CICS 应用程序调用 Web 服务是通过[INVOKE SERVICE](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.applicationprogramming.doc/commands/dfhp4_invokeservice.html) CICS API 完成的。

为了使其工作，您从希望调用的 Web 服务的 WSDL 开始。您通过 IBM 提供的程序[DFHWS2LS](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.webservices.doc/reference/dfhws_ws2ls.html&resultof=%2522%2564%2566%2568%2577%2573%2532%256c%2573%2522%2520%2522%2564%2566%2568%2577%2573%2532%256c%2522%2520)运行 WSDL （DFH 是 IBM 对所有 CICS 的缩写，WS2LS 表示 Web 服务到语言结构）。DFHWS2LS 是 IBM 所称的[Web Services Assistant](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.webservices.doc/concepts/dfhws_utility.html)的一部分。

在 DFHWS2LS 之外，您将获得一个[Web 服务绑定 (WSBIND) 文件](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.webservices.doc/concepts/dfhws_wsbind.html)和语言结构。您在程序中包含的语言结构并将数据从 commarea 移动到其中。您提供给 CICS 系统程序员的 WSBIND 文件，以便他们可以将它包含在您的[管道的](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.exampleapplication.doc/topics/dfhxa_t241.html&resultof=%2522%2570%2569%2563%256b%2575%2570%2522%2520%2522%2564%2569%2572%2565%2563%2574%256f%2572%2579%2522%2520%2522%2564%2569%2572%2565%2563%2574%256f%2572%2569%2522%2520)[拾取目录](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.exampleapplication.doc/topics/dfhxa_t241.html&resultof=%2522%2570%2569%2563%256b%2575%2570%2522%2520%2522%2564%2569%2572%2565%2563%2574%256f%2572%2579%2522%2520%2522%2564%2569%2572%2565%2563%2574%256f%2572%2569%2522%2520)中。您还必须创建一个[管道配置文件](http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/index.jsp?topic=/com.ibm.cics.ts.webservices.doc/concepts/dfhws_pipelineconfig.html)。

所有这些都是说你问了一个非常大的问题。:) 有关于这个主题的多日课程和书籍。

# android - 如何使用片段动态创建 ViewPager？

> ID：10998055
> 
> 赞同：1
> 
> 时间：2012-06-12T13:48:06.167
> 
> 标签：android, android-fragments, android-viewpager

如何动态创建 PagerView？不使用xml？假设我有一个这样的 xml 布局：

```
<FrameLayout android:id="@+id/a_frame_for_pagerview"
             ... >

<!-- I WANT MY PAGERVIEW HERE BUT DYNAMICALLY, NO XML -->

</FrameLayout> 
```

它不需要是 FrameLayout，只是使用它，因为我认为它会是这种情况。

谢谢你的帮助。

编辑：

我的主要问题是我有太多因内存而崩溃的寻呼机，我希望它们被处理，但即使我删除了寻呼机所在的片段，它仍然引用旧的寻呼机（从我第一次创建片段) 所有的碎片都被破坏了，所以什么也没有出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:10:09.290

你可以这样做：

在您的 XML 中：

```
<android.support.v4.view.ViewPager
    android:id="@+id/viewPager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    /> 
```

在你的框架中：

```
[....]
mViewPager.setAdapter(new MyFragmentAdapter(getFragmentManager()));
[....]
public class MyFragmentAdapter extends FragmentPagerAdapter{

    public MyFragmentAdapter(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Fragment getItem(int arg0) {
        // TODO Auto-generated method stub
        YourClassFragment fragment = new YourClassFragment();  
        Bundle args = new Bundle();  

        args.putParcelable("EXTRA_DATA", "VALUE");  
        fragment.setArguments(args);  

        return fragment;  
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return yourNumberOfFragment;
    }

} 
```

# jquery - jquery .trigger 运行 5 次

> ID：10998058
> 
> 赞同：0
> 
> 时间：2012-06-12T13:48:21.153
> 
> 标签：jquery, triggers

我有一个奇怪的问题，如果我触发 .change 里面的代码 .change 执行 5 次，直到它跳回来。在调试时我可以看到它是如何在第 15 行和第 25 行之间跳转的。首先我想知道为什么`$(this).addClass('teiedit');`不将 teiedit 类添加到表单选择类中，其次为什么 .trigger 执行 .change 内的代码 5 次？

代码在 pastebin 上：http: [//pastebin.com/u8xmQZXU](http://pastebin.com/u8xmQZXU)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:04:15.673

I personnaly prefer watching events with data :

```
if(!$('.form-select').data('eventAttached')){
    $('.form-select').data('eventAttached',true);

    $('.form-select').change(function() {
        ....
    });
} 
```

simple, effective, and not technical. Although namespacing is better.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:55:13.027

attach 调用了多少次？您可能想尝试这样的事情来确保事件只绑定一次而不是 5 次：

```
var textarea = jQuery("#edit-body-und-0-value");
var grippie = textarea.parents('.resizable-textarea').find('.grippie');
var filter = jQuery('#edit-body-und-0-format--2');

$('.form-select').off();

// check if selection in text formats changes
$('.form-select').change(function() {
    ....
}); 
```

或者你可以尝试[命名](http://docs.jquery.com/Namespaced_Events)你的事件

# php - php dbase 扩展切断浮点数

> ID：10998060
> 
> 赞同：0
> 
> 时间：2012-06-12T13:48:27.133
> 
> 标签：php, dbase

我在 php 读取 dbase (dbf) 文件时遇到了奇怪的问题。

**我的开发环境**

*   操作系统：赢 7
*   php版本：5.3.8
*   网络服务器：apache 2.2

**我的生产环境**

*   操作系统：Centos 5.5
*   php版本：5.3.12
*   网络服务器：nginx 1.2.1

这两个环境都使用标准的 php dbase 扩展（unix：[http](http://pecl.php.net/package/dbase) ://pecl.php.net/package/dbase，win：http : [//downloads.php.net/pierre/](http://downloads.php.net/pierre/)）。

我有 dbf 文件，其中一列是浮点数（10,2），其值为 26.14。当我在我的开发环境中读取此文件时，它显示正确（“26.14”），但在生产环境中执行完全相同的操作，它只输出“26”。代码如下：

```
<?php
$db = dbase_open($path_to_dbf, 0);
$record_numbers = dbase_numrecords($db);
for ($i = 1; $i <= $record_numbers; $i++)
{
   $row = dbase_get_record_with_names($db, $i);
   echo '<pre>', var_dump($row), '</pre>'; 
}
?> 
```

我真的很困惑，不知道从哪里开始寻找解决这个问题的方法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T10:50:19.133

我知道这是一个老问题，但也许它会帮助某人。

可能你有一个“，”作为分隔符，而不是“。”

我有这个问题，这有帮助：

```
setlocale(LC_NUMERIC, 'C'); 
```

# business-intelligence - Qlikview 滚动 12 个月财政

> ID：10998061
> 
> 赞同：9
> 
> 时间：2012-06-12T13:48:31.003
> 
> 标签：business-intelligence, qlikview

该论坛似乎更适合更多编程问题，但如果有人会查看以下链接中的逻辑问题，我会很感兴趣。我的问题是如何使用已经定义的日历计算前 12 个月的总数。我在 QV 社区中发现的例子很少。请参阅以下链接了解更多详情。我愿意查看 SQL 或 QV 脚本解决方案。

我们的财政年度从 11 月到 10 月。我希望最终用户选择年份和图表来显示最后滚动的 12 个月保证金。我在累积前几个月的总数时遇到了问题。我的目标是让它看起来类似于手动计算的 Excel 图像“目标”中的 Rolling 12 Month Total - GP 列。（看QV链接的截图）

滚动保证金方程：我尝试使用集合分析来制作滚动平均方程

```
=Sum({<master_date={'>=$(=MonthStart(Max(master_date), -12))<=$(=MonthEnd(Max(master_date)))'}>} 
```

万事达

```
TempCalendar:
LOAD
$(vDateMin) + RowNo() - 1 AS DateNumber,
Date($(vDateMin) + RowNo() - 1) AS TempDate
AUTOGENERATE 1
WHILE $(vDateMin)+IterNo()-1<= $(vDateMax); 
```

MasterCalendar：这使用 master_date 将项目连接在一起。这个财政日历很难和滚动平均值放在一起

```
LOAD
TempDate AS master_date,
Day(TempDate) AS CalendarDay,
      WeekDay(TempDate) AS CalendarWeekDay,
      Week(TempDate) AS CalendarWeek,
      Month(TempDate) AS CalendarMonth,
      Year(TempDate) AS CalendarYear,
      'Q' & Ceil(Month(TempDate)/3) AS CalendarQuarter,
      WeekDay(TempDate) & '-' & Year(TempDate) AS CalendarWeekAndYear,
      Month(TempDate) & '-' & Year(TempDate) AS CalendarMonthAndYear,
      If(Num(TempDate) >= $(vYearStart) AND Num(TempDate) < $(vMonthNow), -1, 0) AS YTD, 
      If(Num(TempDate) >= $(vYearStartLY) AND Num(TempDate) < $(vMonthNowLY), -1, 0) AS LY_YTD,
      Year2Date(TempDate) * -1 AS YTD_Flag,
      Year2Date(TempDate,-1, 1, $(vToday))*-1 AS LY_YTD_Flag
RESIDENT TempCalendar ORDER BY TempDate ASC;

DROP TABLE TempCalendar; 
```

FiscalCalander> 这定义了我们的财政年度

```
FiscalCalendar:
LOAD date(date#(20011101,'YYYYMMDD')+recno(),'MM/DD/YY') AS "master_date"
AUTOGENERATE today()-date#(20011101,'YYYYMMDD');
LEFT JOIN (FiscalCalendar)
LOAD
"master_date",
date(monthstart(master_date),'MMM YY') AS "MonthFisical",
date(monthstart(master_date),'MMM') AS "MonthFisical_MonthTitle",
date(yearstart(master_date,1,11),'YYYY') AS "YearFiscal",
month(master_date)-month(num(today(1))) AS FiscalMonthsElapsed,
YearToDate(master_date, 0,11)*-1 AS YTD_FLAG_Fiscal,
YearToDate(master_date,-1,11)*-1 AS LY_YTD_FLAG_Fiscal
RESIDENT FiscalCalendar; 
```

要查看屏幕截图：http: [//community.qlikview.com/message/219912#219912](http://community.qlikview.com/message/219912#219912)

感谢您抽出宝贵时间查看此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T09:59:53.093

解决方案不在日历中：您必须在日历和事实表之间创建一个数据透视表。

在此数据透视表中，您有 2 种类型：DIRECT 和 CROSSING。

对于 DIRECT 类型，事实表中的一行链接到日历中的日期 对于 CROSSING 类型，事实表中的一行链接到日历中未来 12 个月的所有日期。

所以在 Qlikview 中，您一直使用 DIRECT 类型，除非您想为每个月显示过去 12 个月的总数。在这种情况下，您使用 CROSSING，因为所有行都链接到未来 12 个月的日期，所以这意味着（相反的观点）一个月链接到过去 12 个月的所有数据。

例子：

[xlsx](http://community.qlik.com/servlet/JiveServlet/download/229267-39718/Best%20Practice%20Moving%20Average.xlsx)

[大众汽车](http://community.qlik.com/servlet/JiveServlet/download/229267-39719/Best%20Practice%20Moving%20Average%20-%20public%20version.qvw)

# jquery - 从当前页面打印另一页而不弹出/显示目标页面的内容

> ID：10998070
> 
> 赞同：2
> 
> 时间：2012-06-12T13:49:06.570
> 
> 标签：jquery, html, printing, printing-web-page

我想从当前页面打印另一页，而不使用 jquery 插件或任何其他简单方法弹出目标页面？

表示当前页面有一个打印按钮。当我按打印时，第二页打印到打印机而不弹出或显示目标页面的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:56:37.113

1.  在 iframe 中包含第二页（使用 style="display:none" 隐藏它）
2.  在另一个页面的标题中添加一个打印功能，您可以使用 javascript 从主页调用该功能，如以下答案所示：[How do I print an IFrame from javascript in Safari/Chrome](https://stackoverflow.com/questions/472951/how-do-i-print-an-iframe-from-javascript-in-safari-chrome#answer-473270)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:52:21.327

您可以使用 CSS 来修改页面的显示（例如使用 display:none 来隐藏元素）：

`<link rel="stylesheet" type="text/css" href="style.css" media="print" />`

# mobile - 有没有办法从网站内对移动应用程序进行评分

> ID：10998075
> 
> 赞同：0
> 
> 时间：2012-06-12T13:49:36.583
> 
> 标签：mobile, app-store, rating, google-play

如何创建一个允许用户直接对 Apple iOS AppStore 或 Google Play 中的应用进行评分的网站？如果没有，有没有办法为该应用触发新的 iOS6 Facebook 喜欢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:53:14.167

我认为评价应用程序的唯一方法是通过设备上的 App Store 或通过 iTunes。

# hex - scapy hexdump()

> ID：10998079
> 
> 赞同：4
> 
> 时间：2012-06-12T13:49:51.907
> 
> 标签：hex, scapy, hexdump

我想知道哪个`hexdump()`scapy 使用，因为我想修改它，但我根本找不到任何东西。

我发现的是：

```
def hexdump(self, lfilter=None):

  for i in range(len(self.res)):

     p = self._elt2pkt(self.res[i])
     if lfilter is not None and not lfilter(p):
           continue
     print "%s %s %s" % (conf.color_theme.id(i,"%04i"),
                         p.sprintf("%.time%"),
                         self._elt2sum(self.res[i]))
     hexdump(p) 
```

但这只是 的替代方法`pkt.hexdump()`，它`pkt.summary()`具有以下功能`hexdump(pkt)`

谁能告诉我在哪里可以找到`hexdump(pkt)`源代码？

我想要的是十六进制数据包，几乎就像`str(pkt[0])`（我可以通过 逐字节检查`str(pkt[0])[0]`），但除了十六进制值之外别无其他，就像显示在`hexdump(pkt)`.

也许你们可以帮我解决这个问题：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T10:32:19.693

找到它，所以，回答我自己的问题，它位于 utils.py

```
def hexdump(x):

   x=str(x)
   l = len(x)
   i = 0
   while i < l:
       print "%04x  " % i,
       for j in range(16):
           if i+j < l:
               print "%02X" % ord(x[i+j]),
           else:
               print "  ",
           if j%16 == 7:
               print "",
       print " ",
       print sane_color(x[i:i+16])
       i += 16 
```

# jquery - 使用 onclick 换色器更改段落文本颜色，但仅适用于父段落

> ID：10998082
> 
> 赞同：0
> 
> 时间：2012-06-12T13:50:02.560
> 
> 标签：jquery, html, css

我目前有一个 3 列文档，在每列的页脚是一个颜色转换器，可以改变段落文本的颜色，我相信这很简单，但它应该只改变父 div 的颜色，目前代码更改页面上的所有段落。

代码：

```
$('a.text_blue').click(function() {
    $('p').removeAttr('class').addClass('blue_text');   
});
$('a.text_red').click(function() {
    $('p').removeAttr('class').addClass('red_text');    
});
$('a.text_black').click(function() {
    $('p').removeAttr('class').addClass('black_text');  
}); 
```

HTML 看起来像这样：

```
<div class="colour_changer">
        <a href="#" class="text_blue"></a>
        <a href="#" class="text_red"></a>
        <a href="#" class="text_black"></a>
</div> 
```

如果您需要查看 CSS，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:55:58.187

在您的澄清评论之后，您可以使用`siblings`来获取`p`元素的兄弟`a`元素。因为从它的声音他们共享一个父母，这应该工作：

```
$('a.text_blue').click(function() {
    $(this).siblings('p').removeAttr('class').addClass('blue_text');   
}); 
```

如果您减少了问题的标记，并且它们不是真正的兄弟姐妹，您可以使用`parent`向上`div`，然后`find`获取后代`p`元素：

```
$('a.text_blue').click(function() {
    $(this).parent().find('p').removeAttr('class').addClass('blue_text');   
}); 
```

* * *

附带说明一下，您可以重写代码，这样您就不必将单独的事件处理程序绑定到每个`a`元素。你可以这样做：

```
<a href="#" data-class="blue-text"></a> 
```

然后委托事件处理程序：

```
$(".color_changer").on("click", "a", function() {
    $(this).parent().find("p").removeAttr("class").addClass($(this).data("class"));
}); 
```

* * *

**更新**

现在您已经发布了指向您的代码的链接，我可以给您一个明确的答案！`p`您需要定位的元素是 parent 的兄弟元素`div`：

```
$('a.text_blue').click(function() {
    $(this).parent().siblings('p').removeAttr('class').addClass('blue_text');   
}); 
```

而且由于您使用的是 jQuery 1.6，您仍然可以通过以下`delegate`方法从事件委托中受益：

```
$(".color_changer").delegate("a", "click", function() {
    $(this).parent().siblings('p').removeAttr("class").addClass($(this).data("class"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:52:10.723

发生这种情况是因为您正在引用页面中的所有段落。给你想要的段落一个ID，然后选择

```
 $('#yourparagraph').removeAttr('class').addClass('red_text'); 
```

或者你可以使用类

```
 $('.yourclass').removeAttr('class').addClass('red_text'); 
```

取决于你的需要。

但是您的问题不是很清楚，这可能与您想要的不同，因为我没有看到

代码中的标签，但通常你必须告诉 jQuery 你希望你的代码应用在哪个元素上。简单写p标签时，会影响整个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:54:01.297

在您的 JS 中，您将点击事件绑定到所有段落

```
$('p').removeAttr('class').addClass('red_text'); 
```

这是抓取页面上的每个 p 元素（因此，每个 div 中的每个 p ）。

给每个父 div 一个 id，然后更改您的事件处理程序以仅更改父 div 中的段落，因此，例如，您给了 3 个 div id 的 #div_1、#div_2 和 #div_3 ...

```
$("#div_1 p").removAttr('class').addClass('red_text'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:58:49.797

```
$('p') 
```

是引用页面上*每个*<p> 标记的简写。

您应该像这样为要修改 id 属性的元素提供

```
<p id="iWantThisToChangeColors"> 
```

并修改您的代码以仅引用该 ID，如下所示：

```
$('a.text_blue').click(function() {
     $('#iWantThisToChangeColors').removeAttr('class').addClass('blue_text');   
}); 
```

有很多更有效的方法可以更改元素中文本的颜色等简单内容，以及回显颜色转换器链接，但这将为您完成，而无需过多修改当前代码。

# asp.net-mvc - 当任何异步调用遇到异常时如何将用户重定向到自定义错误页面

> ID：10998084
> 
> 赞同：1
> 
> 时间：2012-06-12T13:50:19.027
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, datatables

我正在研究 asp mvc，其中我有 jquery 数据表和一些图表元素，我正在通过 ajax 调用获取所有项目。

现在，如果任何 ajax（数据表 json 数据和图表图像）调用遇到异常，我需要重定向用户。现在我正在使用数据表的错误回调，它为我提供了发生异常时生成的所需 html，但同时与数据表一起，我向控制器发送了 7 个 jquery 调用，其输出取决于数据表的结果，所以这 7 个调用陷阱在无限循环中。现在，如果我的数据表的函数遇到错误，我该如何在服务器端停止此处理。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:19:20.207

处理您的 jQuery Ajax 的错误事件并在该函数中做任何您想做的事情。

```
$.ajax(
      {
          success: function (result) {

              });
          },
          error: function (x, e) {
           //Write you code here
              alert(x.readyState + " " + x.status + " " + e.msg);
          }
      }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:56:18.440

我在我的 MVC3 项目中使用了一个 aspx 页面，如下所示：

```
<customErrors mode="RemoteOnly" defaultRedirect="Error.aspx">
</customErrors> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T21:40:26.713

在**AJAX 错误处理**中，您应该始终关注双方：服务器端和客户端。你需要决定每一方会发生什么。

[Kapil Khandelwal](https://stackoverflow.com/users/1371805/kapil-khandelwal)的[回答](https://stackoverflow.com/a/10998593/538387)很棒，但它只涵盖客户端。

我还鼓励您阅读此 Q/A：[ASP.NET MVC Ajax 错误处理](https://stackoverflow.com/a/4707762/538387)

定义一个通用或特定的错误处理程序并装饰返回 JsonResult 或响应任何类型的 AJAX 调用的方法总是有用的。就像是：

```
public class JsonErrorHandler : ActionFilterAttribute 
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.HttpContext.Request.IsAjaxRequest() && filterContext.Exception != null)
        {
            // Log the Error
            // Do necessary things...

            filterContext.HttpContext.Response.StatusCode = (int)System.Net.HttpStatusCode.InternalServerError;

            filterContext.Result = new JsonResult()
            {
                //JsonRequestBehavior = JsonRequestBehavior.AllowGet,
                Data = new
                {
                    filterContext.Exception.Message,
                    filterContext.Exception.StackTrace
                }
            };

            filterContext.ExceptionHandled = true;
        }
    }
} 
```

然后你像这样使用它：

```
[JsonErrorHandler]
public JsonResult GetMyData(...)
{
    .
    .
    .
} 
```

# c++ - 在 C++ 源代码文件中解析和添加调试语句

> ID：10998097
> 
> 赞同：-1
> 
> 时间：2012-06-12T13:50:57.800
> 
> 标签：c++

我厌倦了调试我的官方项目代码流 - 它分布在多个文件和数百万/数千行中。**因此，我开始编写一个 C++ 程序，该程序将从目标为 add printf( , FILE** , **LINE** );的文件中获取输入文件名；- 每个 C++ 语句之后的额外调试语句，例如：

```
void my_func()
{
call_other();
}
in file 1.cpp at line 1 
```

会成为

```
void my_func()
{
call_other();
printf("call_other() 1.cpp 1")
} 
```

所以每个文件代码都会被解析，并且会添加这个额外的调试语句。

但是问题出现了各种类型的陈述：

```
if(condition) statement else statement;
C++ templates
switch case
etc 
```

我无法建立我应该遵循的语法，例如：

如果该行以分号结尾并且下一个标记不是“{”，则添加此调试行。

我相信案例比我想象的要多。在累积到数百万行代码的数千个文件中实施相同之前，我应该考虑的任何建议？

有没有我已经可以使用的工具/已知技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:59:59.780

如果您绝对需要这样做，请查看[clang](http://clang.llvm.org)并编写一个在 AST 级别上工作的源到源转换器。网上有各种各样的帖子可以让你开始使用它。一个例子：[http ://eli.thegreenplace.net/2012/06/08/basic-source-to-source-transformation-with-clang/](http://eli.thegreenplace.net/2012/06/08/basic-source-to-source-transformation-with-clang/)

# qt - Qt - 如何在 QLineEdit 中更改占位符的方向？

> ID：10998105
> 
> 赞同：2
> 
> 时间：2012-06-12T13:51:46.320
> 
> 标签：qt, placeholder, direction, qlineedit

我在 RTL 中使用 Qt 4.7.4 和我的应用程序语言。我已将应用程序布局设置为 RightToLeft。因此，除了 QLineEdit 中的占位符外，现在所有内容都是从右到左的。

我尝试了 setAlignment 方法，但它会反向更改文本和占位符方向。然后我尝试了 setStylesheet 但它不适用于

```
direction:rtl;
text-align:right;
unicode-bidi:embed; 
```

我认为这是一个错误，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:51:56.177

4.7 版的变更日志如下：

> QWidget::setLayoutDirection 不再影响 QTextEdit、QLineEdit 和基于它们的小部件的文本布局方向（Qt::LeftToRight 或 Qt::RightToLeft）。
> 
> 现在从键盘布局和文本语言（符合 Unicode 标准）检测默认文本布局方向（Qt::LayoutDirectionAuto）。
> 
> 要以编程方式强制 QTextEdit 的文本方向，您可以使用具有不同 textDirection 属性的新 QTextOption 更改与该小部件关联的 QTextDocument 的 defaultTextOption。
> 
> **对于 QLineEdit，目前唯一的方法是将 Qt::Key_Direction_L/R 键盘事件发送到该小部件。**

希望有帮助。

# c++ - auto_ptr 与 shared_ptr 的性能

> ID：10998106
> 
> 赞同：1
> 
> 时间：2012-06-12T13:51:49.503
> 
> 标签：c++, boost, shared-ptr, smart-pointers, auto-ptr

我没有找到有关**auto_ptr**和**shared_ptr**性能问题的信息（我使用*tr1*实现）。由于 shared_ptr 比 auto_ptr 更复杂，所以 auto_ptr 更快？所以一般问题听起来像你对shared_ptr的性能与auto_ptr的比较有什么看法？

PS：我知道现在 unique_ptr 比 auto_ptr 更可取，但并非所有编译器都支持它，所以问题是关于 auto_ptr 和 shared_ptr

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:56:27.663

1.  取消引用时没有性能差异。

2.  如果您使用 make_shared 分配 shared_ptr，则不会浪费任何堆分配。

3.  复制指针（不是对象）时，shared_ptr 会慢一点，因为它需要增加它的引用计数器。

但是，这些可能无关紧要，所以坚持使用 shared_ptr 和 make_shared。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:59:40.987

`auto_ptr`是一个已弃用的 C++98 构造。因此，它*可能*带来的任何性能优势都远远超过了您不应再在新编写的 C++11 代码中使用它，而是要求编译器/库维护者实现对`unique_ptr`.

That being said, use what *semantically* fits your use case, unless you have *profiled* that you have a problem with `*_ptr`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:56:03.243

一般来说，唯一好的答案是**测量**。

但是对于这种情况，您知道`shared_ptr`，除非您使用`make_shared`它涉及计数器块的动态分配，并且除非您有一个非常好的小对象分配器，否则创建第一个肯定会非常慢（谈论数量级）指向对象的共享指针。

但是，也许有了 Boost 和标准库，分配确实得到了优化。也许，也许！，您可以`make_shared`只为对象及其控制块使用 1 个分配。所以……*测量*。

顺便说一句，`auto_ptr`已弃用。

使用任何现代编译器`unique_ptr`代替。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T13:58:32.370

与所有性能问题一样：您需要在特定设置中自己测量它。

不过，一般而言，您可以预期 a 的开销会`shared_ptr<>`比 for更多，`auto_ptr<>`因为它必须在幕后做更多的工作以确保封闭指针的正确共享行为。

另一方面，两者并没有真正的可比性：`auto_ptr<>`仅支持一个副本（所有权在副本上转移），而`shared_ptr<>`支持多个副本。因此，除非您仅将上述指针用于一个复制指针，否则您无法进行有意义的比较。如果您*确实*使用单副本指针并且您确定不需要更多副本，请使用专门的`auto_ptr<>`.

无论如何，性能差异是否显着取决于您的特定项目。

# c# - 使用 Microsoft Moles 模拟一个简单的类

> ID：10998107
> 
> 赞同：1
> 
> 时间：2012-06-12T13:51:54.777
> 
> 标签：c#, unit-testing, moq, rhino-mocks, moles

我对单元测试和 TDD 以及一般的模拟是新手，但是我理解的一般概念。我的问题是如何模拟一个类，以便我可以调用实例化方法而不会在我的单元测试和我的实现类中重复代码？鉴于以下情况：

```
//Simple Interface
public interface IProduct {
    double price { get; set; }
    double tax { get; set; }
    double calculateCost();
}

//Simple Implementation of IProduct
public class SimpleProduct : IProduct {
    private double _price;
    private double _tax;

    public double price {
        get { return _price; }
        set { _price = value; }
    }

    public double tax {
        get { return _tax; }
        set { _tax = value; }
    }

    public double calculateCost() {
        return _price + (_price * _tax);
    }
}
//Complex implementation of IProduct
public class MarylandProduct : IProduct {
    private double _price;
    private double _tax;

    public double price {
        get { return _price; }
        set { _price = value; }
    }

    public double tax {
        get { return _tax; }
        set { _tax = value; }
    }

    public double calculateCost() {
        if (_price <= 100) return _price + (_price * _tax);
        else {
            double returnValue = 100 + (100 * _tax); //use tax rate for first 100
            returnValue += (_price - 100) + ((_price - 100) * 0.05); //use a flat rate of 0.05 for everything over 100
            return returnValue;
        }
    }
} 
```

我已经开始编写具有以下内容的单元测试：

```
[TestMethod]
[HostType("Moles")]
public void molesCalculateCostforMarylandProduct() {
    //Assign
    MMarylandProduct marylandProduct = new MMarylandProduct();
    marylandProduct.priceGet = () => 1000;
    marylandProduct.taxGet = () => 0.07;

    const double EXPECTED = 1052;

    //Act
    double actual = marylandProduct.Instance.calculateCost();

    //Assert
    Assert.AreEqual(EXPECTED, actual);
} 
```

我希望能够在我的单元测试中为 a`MarylandProduct`或 a调用计算成本方法。`SimpleProduct`通常从数据库中获取价格和税金，但我已经这样做了，以便对这些值进行存根处理，以避免与数据库或服务或提供这些值的任何其他东西发生任何耦合。归根结底是我想编写一个单元测试来测试功能，`calculateCost()`而不必在单元测试中存根该方法，因为我知道在 2 年内逻辑`MarylandProduct`会发生变化。

因此，例如，一旦我运行了这个测试，我应该能够进入并更改代码`MarylandProduct.calculateCost()`以添加“奢侈税”，即在超过 750 的任何价格上加 50。如果我这样做，我知道我的单元测试将失败，因为预期值是 1052，现在`MarylandProduct`返回的东西不是预期的。

我只是以错误的方式解决这个问题吗？我只是缺少 TDD 的精神吗？谢谢你的帮助。

编辑：（添加我尝试过的其他模拟框架）

```
[TestMethod]
    public void rhinoMockCalculateCostForMarylandProduct() {
        //assign
        IProduct marylandProduct = MockRepository.GenerateMock<IProduct>();
        marylandProduct.Stub(price => price.price).Return(1000);
        marylandProduct.Stub(tax => tax.tax).Return(0.07);

        const double EXPECTED = 1052;

        //act
        double actual = marylandProduct.calculateCost();

        //assert
        Assert.AreEqual(EXPECTED, actual);
    }

    [TestMethod]
    public void moqCalculateCostForMarylandProduct() {
        //assign
        var marylandProduct = new Mock<IProduct>();
        marylandProduct.Setup(price => price.price).Returns(1000);
        marylandProduct.Setup(tax => tax.tax).Returns(0.07);

        const double EXPECTED = 1052;

        //act
        double actual = ((MarylandProduct)marylandProduct.Object).calculateCost();

        //assert
        Assert.AreEqual(EXPECTED, actual);
    } 
```

我想避免在单元测试和类的实现中放置重复的代码，因为如果类中的代码发生更改，那么单元测试仍然会通过，因为它没有被更改。我知道预计会在单元测试中做出这种改变，但是当你有大量的单元测试时，这种设计是否可以接受？在你的单元测试和你的实现中有重复的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:49:41.310

好吧，您似乎误解的是 Mock 的目的。模拟用于隔离被测系统 (SUT)。因此，您模拟 SUT 的依赖项，以便您可以单独测试 SUT（例如，删除对数据库或某些服务的依赖项）。你不要模拟你正在测试的对象，否则，你在测试什么？

如果我正确理解您的问题，您的域模型具有 IProduct 的实现（为什么您需要产品的不同 impls 是另一个问题）。

您想测试该实现的 CalculateCost 方法。我看不出你为什么需要为此使用模拟。从表面上看，Product 不应该有任何依赖关系，因此没有什么可以模拟的。

例如

假设您的域中有此产品：

```
public class MyProduct : IProduct {
    private double _price;
    private double _tax;

    public double Price {
        get { return _price; }
        set { _price = value; }
    }

    public double Tax {
        get { return _tax; }
        set { _tax = value; }
    }

    public double CalculateCost() {
        return //some complex logic here.
    }
} 
```

这个对象已经被隔离了，它没有依赖关系，因此不需要模拟。

要对其进行测试，您只需直接使用它：

```
[TestMethod]
public void CalculateCost() {
    //arrange
    var myProduct = new MyProduct();
    myProduct.Price = 1000;
    myProduct.Tax= 0.07;

    //act
    double actualCost = myProduct.CalculateCost();

    //assert
    double expectedCost = 1052;

    Assert.AreEqual(expectedCost, actualCost );
} 
```

推荐阅读： http: [//www.manning.com/osherove/](http://www.manning.com/osherove/)

# dynatree - 列出 Dynatree 中选中的节点

> ID：10998110
> 
> 赞同：1
> 
> 时间：2012-06-12T13:52:14.260
> 
> 标签：dynatree, jquery-dynatree

我用 Dynatree 创建了树，里面有复选框。

你能帮我如何在其中获取选中复选框的列表（或数组），以便我可以使用它们进行操作（将它们移动到另一棵树中）？

Tnx 在广告中！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:52:22.563

好的，这里是：

```
 var selNodes = node1.tree.getSelectedNodes();
        // convert to title/key array
        var selKeys = $.map(selNodes, function(node1){
            alert("[" + node1.data.key + "]: '" + node1.data.title + "'");
        }); 
```

# java - Liferay Tomcat 在与另一个 CMS 系统相同的 Linux 机器上运行

> ID：10998114
> 
> 赞同：0
> 
> 时间：2012-06-12T13:52:24.417
> 
> 标签：java, linux, tomcat, liferay

我目前正在与运行 CMS 的外部网站在同一个盒子上运行一个带有 Tomcat 的 Life ray 站点。Tomcat 使用了机器上 69% 的资源，并且经常在用户很少或没有用户的情况下崩溃。任何想法最好的路线？我有一种感觉，这可能是因为 2 个引擎在一个 VM 上运行并且它们发生冲突。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:37:46.880

你检查过你的JVM参数吗？

在我的开发环境中，我使用具有以下设置的 Liferay：-Xms256m -Xmx1500m -XX:MaxPermSize=768M

要设置这些设置，您必须在 LIFERAY_HOME/TOMCAT_DIR/bin/setenv.sh 编辑文件

# c# - 图像重叠并绘制两次

> ID：10998116
> 
> 赞同：0
> 
> 时间：2012-06-12T13:52:34.293
> 
> 标签：c#, xna

我有一个云和一个人精灵，它们都是分开绘制的，但由于某种原因，它们被绘制在一起并重叠，然后将自己定位在两个精灵的定义位置。

我的精灵类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;

namespace MarioFake
{
class Sprites
{

    public Vector2 MarioPosition = new Vector2(200, 200);
    private Texture2D MarioStill;

    public Vector2 LargeCloudPosition = new Vector2(100, 100);
    private Texture2D LargeCloud;

    public void LoadContent(ContentManager theContentManager, string theAssetName)
    {
        MarioStill = theContentManager.Load<Texture2D>(theAssetName);
        LargeCloud = theContentManager.Load<Texture2D>(theAssetName);
    }

    public void Draw(SpriteBatch theSpriteBatch)
    {
        theSpriteBatch.Draw(MarioStill, MarioPosition, Color.White);
        theSpriteBatch.Draw(LargeCloud, LargeCloudPosition, Color.White);
    }

}
} 
```

以及我的游戏类中的绘图方法：

```
 protected override void Draw(GameTime gameTime)
    {
        graphics.GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();

        MarioStill.Draw(this.spriteBatch);
        LargeCloud.Draw(this.spriteBatch);

        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:03:01.307

如果你创建一个像这样的通用精灵类，精灵类不需要保存马里奥和云的信息。

```
 public class Sprite
    {
        public Vector2 Location;
        public Texture2D Texture;

        public void Draw(SpriteBatch spriteBatch)
        {
            spriteBatch.Draw(Texture, Location, Color.White);
        }
    } 
```

你可以像这样创建你的马里奥和云。

```
Sprite Mario = new Sprite() { Location = new Vector2(200, 200), Texture = Content.Load<Texture2D>("MarioTexture") };
Sprite Cloud = new Sprite() { Location = new Vector2(100, 100), Texture = Content.Load<Texture2D>("CloudTexture") }; 
```

并像以前一样绘制它们。

```
 Mario.Draw(spriteBatch);
            Cloud.Draw(spriteBatch); 
```

这是一个完整的游戏类示例，演示了加载和渲染两个精灵。

```
 public class Sprite
    {
        public Vector2 Location;
        public Texture2D Texture;

        public void Draw(SpriteBatch spriteBatch)
        {
            spriteBatch.Draw(Texture, Location, Color.White);
        }
    }

    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        List<Sprite> sprites;

        Sprite mario, cloud;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // Create the sprites.            
            sprites = new List<Sprite>();
            mario = new Sprite() { Location = new Vector2(100, 100), Texture = Content.Load<Texture2D>("MarioTexture") };
            cloud = new Sprite() { Location = new Vector2(200, 200), Texture = Content.Load<Texture2D>("CloudTexture") };
            sprites.Add(mario);
            sprites.Add(cloud);
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            spriteBatch.Begin();
            foreach (var sprite in sprites)
                sprite.Draw(spriteBatch);
            spriteBatch.End();

            base.Draw(gameTime);
        }
    } 
```

# javascript - 为什么从 Ajax 中的 Label 读取值不起作用

> ID：10998117
> 
> 赞同：0
> 
> 时间：2012-06-12T13:52:34.683
> 
> 标签：javascript, asp.net, html, ajax

我正在尝试使用 Ajax 从 Label(asp) 中读取值。但我总是得到 Undefind :|

我的代码是：

```
function NIS2USD() {
    var from = document.getElementById("NIS").value;
    var to = document.getElementById("USD").value;
    var amount = document.getElementById("totalAmountLabel").value;
    request = new XMLHttpRequest();
    request.onreadystatechange = ProcessResponse;
    request.open("GET", "Convert.aspx?from=" + num1 + "&to=" + num2 + "&amount=" +    amount, true);
    request.send();
}
function USD2NIS() {
    var from = document.getElementById("USD").value;
    var to = document.getElementById("NIS").value;
    var amount = document.getElementById("totalAmountLabel").value;
    request = new XMLHttpRequest();
    request.onreadystatechange = ProcessResponse;
    request.open("GET", "Convert.aspx?from=" + num1 + "&to=" + num2 +  "&amount="+amount, true);
    request.send();
}
function ProcessResponse() {
    if (request.readyState == 4 && request.status == 200) {
        document.getElementById("totalAmountLabel").innerHTML = request.responseText;
    }
} 
```

我的标签定义是：

```
<asp:Label ID="totalAmountLabel" runat="server" Text="Label"></asp:Label> 
```

为什么我总是得到undef？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:56:56.197

试试这个来获取标签的客户端 ID。

```
var amount = document.getElementById("<%=totalAmountLabel.ClientID%>").innerHTML; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:00:54.600

这是因为在更新面板内时控件会被重命名。如果您有 jQuery 参考，请尝试使用它

```
$('#<%=totalAmountLabel.ClientID%>') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:57:18.363

我假设`<asp:Label>`正在生成一个 HTML`<label>`标记。如果是这样，它没有`.value`属性。试试`.innerHTML`吧。

```
var amount = document.getElementById("totalAmountLabel").value; 
```

应该

```
var amount = document.getElementById("totalAmountLabel").innerHTML; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:57:23.400

将 javascript 更改为（javascript 代码必须在页面中定义才能正常工作，而不是在 JS 文件中，因为`<%= %>`）：

```
 document.getElementById("<%= totalAmountLabel.ClientID %>").innerHTML = request.responseText; 
```

或者保留 javascript 并将标签更改为（对于 4.0）：

```
<asp:Label ID="totalAmountLabel" runat="server" Text="Label" ClientIDMode="static"></asp:Label> 
```

静态的客户端 ID 模式确保客户端上的 ID 实际上是 totalAmountLabel

# ios - NSNotificationCenter 无法将活动指示器设置为隐藏

> ID：10998118
> 
> 赞同：2
> 
> 时间：2012-06-12T13:52:37.787
> 
> 标签：ios, iphone, xcode, uiactivityindicatorview

您好，我在 appdelegate 中创建了一个 nsnotificationcenter。下载完成后它会发送通知。我的课堂上有一个活动指示器，下载完成后我要隐藏它，但它不起作用。我可以看到我的 nslog，但它不会隐藏活动指示符。

这是我的代码：

viewdidload:

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshView:) name:@"loadingFinished" object:nil]; 
```

我的功能：

```
-(void)refreshView:(NSNotification*)notification
{

    activity.hidden = YES;
    self.view.userInteractionEnabled =YES;
    NSLog(@"alles geladen zeiger wird geladen");

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:56:24.940

如果您在任何其他线程，那么它将无法工作 cz UI 不能在内线程中工作。用这个

```
-(void)refreshView:(NSNotification*)notification
{

dispatch_async(dispatch_get_main_queue(), ^{
 activity.hidden = YES;
    self.view.userInteractionEnabled =YES;

        });    
    NSLog(@"alles geladen zeiger wird geladen");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:55:04.323

通知回调可能不会在主线程中调用，但您所有的 UI 更新都必须在主线程中完成。因此，在您的通知回调中，使用`[self performSelectorOnMainThread:@selector(refreshViewFromMainThread)]`并声明一个新方法：

```
- (void)refreshViewFromMainThread
{
    activity.hidden = YES;
    self.view.userInteractionEnabled = YES;
} 
```

# mysql - MySQL，phpmyadmin，如何导入用户定义的函数

> ID：10998120
> 
> 赞同：2
> 
> 时间：2012-06-12T13:52:45.010
> 
> 标签：mysql, phpmyadmin

使用 MySQL，如何使用 phpmyadmin 将用户定义的数据库函数从一个数据库服务器导入另一台数据库服务器？

可以使用以下 SQL 获取用户定义函数的列表：

```
select * from information_schema.routines; 
```

这是我想移动到不同数据库服务器的函数：

```
CREATE DEFINER=`XXX`@`%` FUNCTION `BDayDiff`( d1 DATE, d2 DATE ) RETURNS int(11)
   DETERMINISTIC
BEGIN
 DECLARE dow1, dow2, days, wknddays INT;
 SET dow1 = DAYOFWEEK(d1);
 SET dow2 = DAYOFWEEK(d2);
 SET days = DATEDIFF(d2,d1);
 SET wknddays = 2 * FLOOR( days / 7 ) +
                IF( dow1 = 1 AND dow2 > 1, 1,                              
                    IF( dow1 = 7 AND dow2 = 1, 1,              
                        IF( dow1 > 1 AND dow1 > dow2, 2,      
                            IF( dow1 < 7 AND dow2 = 7, 1, 0 )  
                          )
                      )
                  );
 RETURN FLOOR(days - wkndDays);
END 
```

但我收到一个错误：

```
Error

SQL query:

CREATE DEFINER = `XXX`@`%` FUNCTION `BDayDiff` (
d1 DATE,
d2 DATE
) RETURNS INT( 11 ) DETERMINISTIC BEGIN DECLARE dow1,
dow2,
days,
wknddays INT;

MySQL said: Documentation
#1064 - You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use 
near '' at line 5 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T06:41:03.287

通过添加 $ 试试这个，它对我有用。

```
DELIMITER $

CREATE DEFINER=`XXX`@`%` FUNCTION `BDayDiff`( d1 DATE, d2 DATE ) RETURNS int(11)
   DETERMINISTIC
BEGIN
 DECLARE dow1, dow2, days, wknddays INT;
 SET dow1 = DAYOFWEEK(d1);
 SET dow2 = DAYOFWEEK(d2);
 SET days = DATEDIFF(d2,d1);
 SET wknddays = 2 * FLOOR( days / 7 ) +
                IF( dow1 = 1 AND dow2 > 1, 1,                              
                    IF( dow1 = 7 AND dow2 = 1, 1,              
                        IF( dow1 > 1 AND dow1 > dow2, 2,      
                            IF( dow1 < 7 AND dow2 = 7, 1, 0 )  
                          )
                      )
                  );
 RETURN FLOOR(days - wkndDays);
END$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:11:14.377

希望这在 phpmyadmin 中是可能的：

*   执行 SHOW CREATE FUNCTION
*   您将看到 CREATE FUNCTION 语句，对另一个 MySQL 服务器执行它
*   对每个功能重复此步骤。

请注意，函数可能具有安全选项（DEFINER、SQL SECURITY），请在文档中阅读这些选项[（CREATE PROCEDURE 和 CREATE FUNCTION 语法）](http://dev.mysql.com/doc/refman/5.5/en/create-procedure.html)；如果要使用它们，请检查是否在另一台服务器上创建了指定用户。

[显示创建函数语法](http://dev.mysql.com/doc/refman/5.5/en/show-create-function.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-13T10:53:50.090

```
If you are using phpmyadmin interface to execute the query for function then you should follow the steps as below: 

DELIMITER $$

CREATE FUNCTION `BDayDiff`( d1 DATE, d2 DATE ) RETURNS int(11)
    DETERMINISTIC
BEGIN
 DECLARE dow1, dow2, days, wknddays INT;
 SET dow1 = DAYOFWEEK(d1);
 SET dow2 = DAYOFWEEK(d2);
 SET days = DATEDIFF(d2,d1);
 SET wknddays = 2 * FLOOR( days / 7 ) +
                IF( dow1 = 1 AND dow2 > 1, 1,                              
                    IF( dow1 = 7 AND dow2 = 1, 1,              
                        IF( dow1 > 1 AND dow1 > dow2, 2,      
                            IF( dow1 < 7 AND dow2 = 7, 1, 0 )  
                          )
                      )
                  );
 RETURN FLOOR(days - wkndDays);
END $$

DELIMITER ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T08:16:20.253

为了导出用户定义的函数：

在 PhpMyAdmin 中打开您的数据库。之后单击“导出”按钮。在打开的窗口中，它应该是下面的复选框（如果没有显示，请选择“自定义 - 显示所有可能的选项”）： 1）添加 DROP TABLE / VIEW / PROCEDURE / FUNCTION / EVENT；2) 增加CREATE PROCEDURE/FUNCTION/EVENT；检查并导出它。

只需将其导入您的数据库，它就可以正常工作！

PS 您可以在 Information Schema DB 的 Routines 表中看到这些功能，但您不能直接导入它，因为即使您是 root 用户也没有权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-31T09:24:04.487

如果您已从 PHPMyAdmin 导出它，则需要在代码开头包含

```
 DELIMITER $
CREATE DEFINER=`root`@`localhost` FUNCTION

DELIMITER ; 
```

这可以解决您的问题。

# android - 使用 Phonegap 在本地保存 XML 项目

> ID：10998124
> 
> 赞同：0
> 
> 时间：2012-06-12T13:52:50.733
> 
> 标签：android, xml, cordova, favorite

我一直在使用 Phonegap 构建一个 Android 应用程序，它解析并显示一个 XML 文件。这一切正常，但我想添加一个额外的功能，以便人们可以将 XML 文件中的项目标记/保存为收藏夹。

如何将一个 XML 元素中的所有内容（从`<item>`to的所有内容）复制`</item>`到本地 xml 文件？之后，我只需要解析本地 xml 文件，用户就可以看到所有他喜欢的帖子。那不会是问题。但是，将是/是一个问题是创建该 XML 并添加项目。删除功能也很重要。

或者有没有比在本地保存东西更简单、更聪明的方法？

也许我完全错过了解释这一点的教程，那么请指点我！

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:26:46.477

[使用FileWriter](http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileWriter)将 XML 文件保存到 SD 卡或内部存储是有意义的。然后，如果您将 url 保存到文件中，您可以使用 XHR 加载它，这将使您能够轻松地再次解析 XML。这是一篇博客文章，我在其中从您可以调整[的文件 url 加载 .sql 文件。](http://simonmacdonald.blogspot.ca/2011/12/on-fourth-day-of-phonegapping-creating.html)

# jquery - 禁用单击分钟单元格

> ID：10998126
> 
> 赞同：0
> 
> 时间：2012-06-12T13:52:51.483
> 
> 标签：jquery, html, css

[见小提琴](http://jsfiddle.net/workdreamer/vrW2n/2/)

我有 html 表格和一个文本框和一个按钮。通过拖动单元格进行单元格选择。单击按钮我得到文本框的值并放入单元格的跨度标记。我必须禁用单击分钟单元格 0、15、30、45。在小提琴中，当我单击分钟单元格时，您会看到它使 css 变为绿色并且 css 长度增加（警报中的那些 chking）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:47:03.307

这是你想要的吗 ？

**--已编辑--**

现在您只能以直线方式（向上或向下）突出显示。可能有一种更优雅的方式来完成所有这一切，但我认为这会如你所愿

**演示：http:** [//jsfiddle.net/vrW2n/9/](http://jsfiddle.net/vrW2n/9/)

```
// Add this variable    
var lastRow = 0; 
```

在`mousedown()`：

```
 // This line gets the index of the first clicked row.
    lastRow = $(this).closest("tr")[0].rowIndex;

    active = true;
    $(".csstdhighlight").removeClass("csstdhighlight"); // clear previous selection

    //This is the big trick
    $(".temp_selected").removeClass("temp_selected");
... 
```

并在`mousemove()`：

```
...
    /* Begin my edit
    Compares the actual 'mousemove' row index
    with the last and next row index
    */
    var thisRow = $(this).closest("tr")[0].rowIndex;

    if( lastRow == thisRow || lastRow == thisRow - 1 || lastRow == thisRow + 1 ){
        lastRow = $(this).closest("tr")[0].rowIndex;
    }else
        return;
    // End my edit
... 
```

# playframework - 如何自动测试 playframework 演变

> ID：10998127
> 
> 赞同：3
> 
> 时间：2012-06-12T13:52:52.437
> 
> 标签：playframework, automated-tests

我们正在使用 play 1.2.x DB 进化功能。我想让脚本创建和开发在游戏自动测试中测试的模式

所以我在测试套件之前需要一个空数据库。

我想过：

*   注册@OnApplicationStartup 监听器，它可以删除数据库中的所有结构（这可能需要一些脏代码），然后让数据库进化来完成剩下的工作。但是游戏演变也是@OnApplicationStartup，我不知道如何确保我的听众是第一个。这可以通过另一个 hack 来克服——从代码中调用 DB 进化。
*   使用一些脚本删除和重新创建数据库 - 在运行自动测试之前，但这并不能使我的测试始终是我想要的测试。例如，我需要始终记住使用我的脚本，而不仅仅是自动测试。从 Eclipse 执行测试时，不会执行此脚本。

还有其他选择吗？

或者也许有人可以建议任何其他解决方案来测试这些东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:48:35.417

更简单：使用内存数据库（在语法上与您的 prod 数据库兼容，以便 SQL 工作正常）。

每次运行都会有一个新的数据库，并且进化将始终执行。

# asp.net-mvc-3 - 设置 Html.DropdownList 的默认值和 CSS 类

> ID：10998132
> 
> 赞同：2
> 
> 时间：2012-06-12T13:53:25.300
> 
> 标签：asp.net-mvc-3, drop-down-menu

我的控制器中有：

```
 ViewBag.CityId = new SelectList(new CityRepository().GetAll().OrderBy(x => x.Name),"CityId", "Name", new Guid("74898AD1-73BB-41E1-B1E1-484EACAFA4C4")); 
```

在我看来：

```
<%:Html.DropDownList("CityId", (IEnumerable<SelectListItem>)ViewBag.CityId, new { @class = "select-choice-1" })%> 
```

但问题是没有选择默认值。如何一次设置默认值和Css Class？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:05:18.113

您需要为下拉列表使用不同的构造函数：

```
@Html.DropDownListFor(model => model.SelectedCity, (IEnumerable<SelectListItem>)ViewBag.CityId, "Select a City", new { @class = "select-choice-1" }) 
```

进一步阅读：[MVC 3 布局页面、Razor 模板和 DropdownList](https://stackoverflow.com/questions/4674033/mvc-3-layout-page-razor-template-and-dropdownlist)

# javascript - EXTJS4 MVC 面板中的 Yui 图表

> ID：10998134
> 
> 赞同：0
> 
> 时间：2012-06-12T13:53:32.077
> 
> 标签：javascript, extjs, yui

我正在开发 EXTJS4 MVC 门户，我想在 portletpanel 中显示 YUI 图表。我不知道如何配置 YUI 图表。

请帮忙.....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:08:47.183

为了将 YUI3 图表渲染到 Extjs 4 面板中，您需要先渲染面板，然后将图表渲染到面板的主体中。为此，您需要等到 Ext Panel 被渲染。这是基本思想：

```
YUI().use('charts', function (Y) {
  panel.on('render', function () {
    var chart = new Y.Chart({ render: panel.body.dom /* more options */ });
  });
}); 
```

至于如何配置 YUI3 图表，我不能比 YUI 文档和示例做得更好：http: [//yuilibrary.com/yui/docs/charts/](http://yuilibrary.com/yui/docs/charts/)

# c# - 非常慢的性能结构

> ID：10998138
> 
> 赞同：1
> 
> 时间：2012-06-12T13:53:39.033
> 
> 标签：c#, .net, performance, caching

由于我没有错误，我不知道这是否是提出这个问题的正确地方，如果不是，请指向正确的论坛。反正...

我正在做一个社交网络项目，现在运行速度很慢，有些页面需要 5 到 15 秒才能加载。有一个“缓存”结构，但无论谁这样做，都没有使用已经`Cache`从 c# .net 构建，而是创建了一个静态`List<object>` 作为系统的缓存。即使tought是不正确的，我可以处理...

问题是，在每个页面请求上，我都必须从这个`cache`非常大的地方加载用户数据，而且用户结构也很大，所以我想知道，而不是每次请求页面时都从缓存中加载用户数据我将使用每个页面所需的最常用数据创建一些会话，例如照片、姓名、昵称、id，当我需要从用户那里加载不常见的任何其他类型的数据时，我会从缓存中请求它。 ..

我不知道这是否是正确的方法，而不是问这个问题的正确地方，但我真的需要非常糟糕地解决这个问题。所以我想从这里的专家那里得到一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:56:07.677

部分性能问题可能是需要扫描缓存中的项目。字典可能会更好，因为您可以按键检索项目。这是更接近本机缓存结构的实现。

会话不利于网站的可扩展性。如果您打算将其与 facebook 或其他东西一样大，那么使用会话进行缓存会杀死您

请参阅其他相关问题：

[什么是在 Web 应用程序中存储大型临时“会话”数据的好方法](https://stackoverflow.com/questions/7417675/what-is-a-good-way-to-store-large-temporary-session-data-in-a-web-application)

和另一个体面的问题

[为什么在高流量网站中使用 Session 存储状态是个坏主意？](https://stackoverflow.com/questions/769338/why-is-it-a-bad-idea-to-use-session-to-store-state-in-high-traffic-websites/769350#769350)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:41:16.203

同意杰森+1

根据您的评论，用户对象有一个键（ID）。

如果你有钥匙，字典会快得多。此外，如果您的对象具有可以表示为 Int32 的自然键，则覆盖 gethash 和 equals。针对 10,000 的字典查找应该是毫秒。

键控集合听起来像您需要的。对于键控集合，其中一个属性 (ID) 是键。
[键控集合](http://msdn.microsoft.com/en-us/library/ms132438.aspx)

如果这是一个静态列表，我会通过数据库查找字典。因为你有一个单键字典会打败数据库。如果它是复合键，那么您将不得不使用数据库进行索引查找。

# git - git - 将分支描述推送到远程

> ID：10998142
> 
> 赞同：13
> 
> 时间：2012-06-12T13:53:52.937
> 
> 标签：git

每周一次，我们召开集成会议，审查未合并到 master 的分支中的代码。作为起点，我们使用它来列出打开的分支

`git branch -a --no-merged master`

我们以票号命名我们的分支机构，因此很难看到我们真正在看什么。我回来

`BUG_1231231`
`BUG_1412434`
`FEATURE_1231231`
`FEATURE_1232244`

我知道我可以通过运行添加和查看描述
`git branch --edit-description BUG_1231231`
`git config branch.BUG_1231231`

问题是这些描述似乎存储在我本地存储库的配置中。这些描述可以推送到遥控器吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T14:21:38.840

考虑到描述存储在配置文件中（这里是本地文件，在您的 Git 存储库中），那么，**不**，分支描述不会被推送。

配置文件不会被推送（永远）。请参阅“[是否可以从远程位置克隆 git config？](https://stackoverflow.com/questions/6547933/is-it-possible-to-clone-git-config-from-remote-location/6548056#6548056) ”

不过，简单的文本文件是我当时[推荐的分支描述的初始答案。](https://stackoverflow.com/a/2108832/6309)

分支描述都是关于帮助发布有用的信息。
不适用于将该消息复制到不必发布相同信息/提交的其他存储库上。

> 使用`branch.$name.description`作为配置键，给用户一个地方来写分支的目的是什么等等，以便以后可以教各种子系统，例如“ `push -s`”，“ `request-pull`”和“ ”，以使用这些信息。`format-patch --cover-letter`

* * *

2020 年更新（8 年后）：

[philb](https://stackoverflow.com/users/6026237/philb)[在评论](https://stackoverflow.com/questions/10998142/git-pushing-branch-descriptions-to-remote/10998641?noredirect=1#comment114613165_10998641)中提到了关于“分支描述应该是可版本化的”的问题[`gitgitgadget/git`438 。](https://github.com/gitgitgadget/git/issues/438)
菲尔布补充说：

> 如果实现了这一点，分支描述将存储在 refs 中，然后可以推送到远程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:14:49.573

这似乎是一个相当新的 git 功能，可能还没有得到很好的支持。查看 README 功能，[git 中的分支描述](https://stackoverflow.com/questions/2108405/branch-descriptions-in-git)

# url - 如何从 Coldfusion 中的 url 中检索 id？

> ID：10998143
> 
> 赞同：2
> 
> 时间：2012-06-12T13:53:53.183
> 
> 标签：url, coldfusion, parameters

我正在更新一个站点，并且正在努力寻找一种从 URL 获取 id 的方法。例如我有这个：

```
 http://some.html/search.cfm?id=9900000000301 
```

如何从 Coldfusion8 中的 URL 获取 id 值*“9900000000301”*？

我已经尝试*了 url.id*以及各种 *cgi.query_string* 变体，但数字仍然遥不可及:-(

感谢帮助！

**编辑**：
如果我转储 URL 结构，我得到这个：

```
catch - struct

TYPE: default
VALUE: search 
```

这对我来说没什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:08:18.337

Url.Id*将*起作用 - 除了一个例外。

如果您创建了一个名为 Url 的变量，则可以（在 Adob​​e CF 中）“隐藏”Url 范围，因此无法访问它。

例如，如果您有一个带有名为 url 的参数的函数，则在该函数内引用 url 将引用 Arguments.Url，而不是 Url 范围。如果是这种情况，您需要重命名参数才能访问正确的 Url 范围。

[（或者，切换到[更好的 CFML 引擎](http://getrailo.org)，其中范围名称始终优先于非范围变量，因此不能隐藏范围。）]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T14:02:33.053

应该工作得`url.id`很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T14:08:53.097

根据您希望如何使用数据，这里有两个示例。第一个检查它是否已定义，第二个将变量设置为该值。

```
<cfif isDefined("URL.id")>
  <cset myVariable = URL.id>
</cfif> 
```

希望这可以帮助！

# android - 从 ssh 运行后，android 模拟器将无法在 ubuntu 12.04 上启动

> ID：10998146
> 
> 赞同：14
> 
> 时间：2012-06-12T13:54:02.360
> 
> 标签：android, android-emulator, android-source, ubuntu-12.04

我在 Ubuntu 12.04 上基于[http://source.android.com/source/building.html](http://source.android.com/source/building.html)构建了 android 源代码，当我运行模拟器时出现错误并且模拟器无法启动：

```
WARNING: Application calling GLX 1.3 function "glXCreatePbuffer" when GLX 1.3 
         is not supported!  This is an application bug!
X Error of failed request:  GLXUnsupportedPrivateRequest
  Major opcode of failed request:  146 (GLX)
  Minor opcode of failed request:  16 (X_GLXVendorPrivate)
  Serial number of failed request:  20
  Current serial number in output stream:  22 
```

知道我该如何解决吗？

我需要提一下，我使用 SSH 连接到机器。当我从 Ubuntu 机器连接并运行时，它工作正常，但是当我通过 SSH 用我的 macbook 机器连接到它并尝试运行它时，它给了我上述错误。

BR，拉明

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T14:37:27.570

昨天发现了一个工作。

问题似乎出在 android-sdks/tools/emulator 上，而 emulator- **arm**似乎工作正常。

测试 cd 到 android-sdks/tools 目录并输入： `emulator-arm -avd your_avd`

看起来这迫使模拟器使用软件渲染器而不是 OpenGL，但对我来说（使用 NX）它有效。

我在这里找到了工作： [https ://answers.launchpad.net/ubuntu/+source/xorg/+question/203681](https://answers.launchpad.net/ubuntu/+source/xorg/+question/203681)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T23:24:41.230

此错误可能表明应用程序需要直接访问屏幕。在 SSH 上使用 nx 而不是 X 可以避免这个问题。看看模拟器上是否也有运行时选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:23:09.637

MacOSX X 服务器抱怨滥用某些 GL 功能，这可能是由任一方的缺陷引起的。当使用 Ubuntu 作为客户端时，X 环境显然匹配得很好。

也许您应该尝试在本地显示器上运行模拟器，并通过 VNC 或类似的方式查看它。如果 SSH 连接很重要，您可以通过 SSH 建立 VNC 隧道，一些 VNC 客户端直接提供该选项。

# javascript - 突出显示链接的特定 div (tds) 悬停

> ID：10998147
> 
> 赞同：5
> 
> 时间：2012-06-12T13:54:05.647
> 
> 标签：javascript, jquery

所以我才刚刚开始发现 jquery 是多么的棒，以及一个基本的功能是如何让我发疯的去理解的。我正在尝试突出显示具有通过后端生成的特定“id”的 div

```
 <br/><br/><br/><br/>
<div id="id_1">
    <h2>id_1 - 
        <a class="marker_id_1" href="#top" name="id_1" id="id_1">Top</a>
    </h2>
</div>
<div id="id_1">
    <h2>id_1 - 
        <a class="marker_id_1" href="#top" name="id_1" id="id_1">Bottom</a>
    </h2>
</div>
<div id="id_2">
    <h2>id_2 - 
        <a class="marker_id_2" href="#top" name="id_2" id="id_2">Top</a>
    </h2>
</div>
<div id="id_2">
    <h2>id_2 - 
        <a class="marker_id_2" href="#top" name="id_2" id="id_2">Bottom</a>
    </h2>
</div>​ 
```

因此，如果我将鼠标悬停在“id_1”顶部，我想突出显示“id_1”顶部和底部。下面是一个链接，所以它会更容易理解。

[http://jsfiddle.net/4PgC6/66/](http://jsfiddle.net/4PgC6/66/)

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:57:06.243

## 您不能`id`对不同的元素使用相同的。

使用`name` 你可以做

```
$('a').hover(function() {
  var name = this.name;
  $('a[name='+ name +']').css('color', '#f00')
},function() {
  var name = this.name;
  $('a[name='+ name +']').css('color', 'blue')
}); 
```

**[演示](http://jsfiddle.net/4PgC6/67/)**

使用`class`

```
$('a').hover(function() {
  var className = this.className;
  $('a.' + className).css('color', '#f00')
},function() {
  var className = this.className;
  $('a.' + className).css('color', 'blue')
}); 
```

**[演示](http://jsfiddle.net/XQwB3/1/)**

如果您想`.on()`用于悬停，请使用

```
$('a').on('hover', function(e) {
    if (e.type == 'mouseenter') {
        var divName = this.name;
        console.log(divName);
        $('div', 'td.' + divName).addClass('match-highlight');
    } else {
        var divName = this.name;
        $('div', 'td.' + divName).removeClass('match-highlight');
    }
}); 
```

**[演示](http://jsfiddle.net/XQwB3/14/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:06:34.127

```
$('div').mouseenter(function() {
   var hoveredid = $(this).attr('id'); 
    $('[id='+hoveredid+']').each(function() {
        $(this).addClass("highlighted");
    });
}).mouseleave(function() {
   var hoveredid = $(this).attr('id'); 
   $('[id='+hoveredid+']').each(function() {
        $(this).removeClass("highlighted");
    });
}); 
```

如前所述， id 应该是唯一的。但如果不是我发现使用 '[id=' 而不是 '#' 进行访问，则您可以访问所有 div，因为您将 id 视为属性。（请参阅：http: [//jsfiddle.net/ 4PgC6/68/](http://jsfiddle.net/4PgC6/68/) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:01:36.267

首先，a 和 div 不能有相同的 ID。**Id 应该是唯一的**。改为使用**数据**。像那样：

```
<a href="#" data-id="id_1"></a> 
```

然后用这样的脚本阅读它：

```
$('a').hover(function() {
  divID = $(this).data('id');
  $('#'+divId).css('color', '#f00');
},function() {
  divID = $(this).data('id');
  $('#'+divId).css('color', 'blue');
}); 
```

[http://jsfiddle.net/acrashik/4PgC6/69/](http://jsfiddle.net/acrashik/4PgC6/69/)

# objective-c - 为什么我们必须将 __block 变量设置为 nil？

> ID：10998149
> 
> 赞同：6
> 
> 时间：2012-06-12T13:54:09.597
> 
> 标签：objective-c, xcode4.3

从[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW11)

> 使用生命周期限定符来避免强引用循环
> 
> 您可以使用生命周期限定符来避免强引用循环。例如，通常如果您有一个按父子层次结构排列的对象图，并且父母需要引用他们的孩子，反之亦然，那么您可以使父子关系强而子父关系弱. 其他情况可能更微妙，特别是当它们涉及块对象时。
> 
> 在手动引用计数模式下，`__block id x;`具有不保留的效果`x`。在 ARC 模式下，`__block id x;`默认为保留`x`（就像所有其他值一样）。要获得 ARC 下的手动引用计数模式行为，您可以使用`__unsafe_unretained __block id x;`. 然而，顾名思义`__unsafe_unretained`，使用非保留变量是危险的（因为它可能会悬空），因此不鼓励使用。两个更好的选择是使用`__weak`（如果您不需要支持 iOS 4 或 OS X v10.6），或者将`__block` 值设置为`nil`以中断保留周期。

好的，那么`__block`变量有什么不同？

为什么定在`nil`这里？变量是否`__block`保留了两次？谁持有所有参考资料？块？堆？堆栈？线程？什么？

以下代码片段使用有时用于手动引用计数的模式来说明此问题。

```
MyViewController *myController = [[MyViewController alloc] init…];

// ...

myController.completionHandler =  ^(NSInteger result) {
   [myController dismissViewControllerAnimated:YES completion:nil];
};

[self presentViewController:myController animated:YES completion:^{
   [myController release];
}]; 
```

如前所述，您可以使用`__block`限定符并`nil`在完成处理程序中将 myController 变量设置为：

```
MyViewController * __block myController = [[MyViewController alloc] init…]; //Why use __block. my controller is not changed at all

// ...

myController.completionHandler =  ^(NSInteger result) {
    [myController dismissViewControllerAnimated:YES completion:nil];

    myController = nil; //Why set to nil here? Is __block variable retained twice? Who hold all the reference? The block? The heap? The stack? The thread? The what?
}; 
```

还有为什么编译器`myController`没有设置为`nil`。为什么我们必须这样做？似乎编译器知道什么时候 myController 将不再被使用，即块何时到期。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T14:05:36.533

When you have code of this form:

```
object.block = ^{
    // reference object from inside the block
    [object someMethodOrProperty];
}; 
```

`object` will retain or copy the block you give to it. But the block itself will also retain `object` because it is strongly referenced from within the block. This is a retain cycle. Even after the block has finished executing, the reference cycle still exists and neither the object nor the block can be deallocated. Remember that a block can be called multiple times, so it cannot just forget all the variables it references after it has finished executing once.

To break this cycle, you can define `object` to be a `__block` variable, which allows you to change its value from inside the block, e.g. changing it to `nil` to break the cycle:

```
__block id object = ...;
object.block = ^{
    // reference object from inside the block
    [object someMethodOrProperty];

    object = nil;
    // At this point, the block no longer retains object, so the cycle is broken
}; 
```

When we assign `object` to `nil` at the end of the block, the block will no longer retain `object` and the retain cycle is broken. This allows both objects to be deallocated.

One concrete example of this is with with `NSOperation`'s `completionBlock` property. If you use the `completionBlock` to access an operation's result, you need to break the retain cycle that is created:

```
__block NSOperation *op = [self operationForProcessingSomeData];
op.completionBlock = ^{
    // since we strongly reference op here, a retain cycle is created
    [self operationFinishedWithData:op.processedData];

    // break the retain cycle!
    op = nil;
} 
```

As the documentation describes, there are a number of other techniques you can also use to break these retain cycles. For example, you will need to use a different technique in non-ARC code than you would in ARC code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T13:36:26.597

我更喜欢这个解决方案

```
typeof(self) __weak weakSelf = self;
self.rotationBlock = ^{
    typeof (weakSelf) __strong self = weakSelf;

    [self yourCodeThatReferenceSelf];
}; 
```

发生的情况是该块将捕获 self 作为*弱*引用，并且不会有保留周期。然后在代码运行之前将块内的 self 重新定义为 __strong self = weakSelf。这可以防止 self 在您的块运行时被释放。

# c# - 获取文件名的一部分 C#

> ID：10998150
> 
> 赞同：3
> 
> 时间：2012-06-12T13:54:11.310
> 
> 标签：c#, filenames

我有一个文件名`dayhappy_02_02345.csv`

如何将`02`零件取出以在变量中使用，以及如何获取`02345`零件以便可以将这两个值传递给函数的变量。

使用 c#。

我已经看过了，`GetFileName`但这只能获取文件名、扩展名或完整文件名。

谢谢

斯特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:56:51.000

对于该特定文件名，

```
string sData = "dayhappy_02_02345.csv";
string[] sArr = sData.split('_');

string sPart1 = sArr[1];
string sPart2 = sArr[2]; 
```

可以，但这是一种特殊情况，*仅适用*于这种类型的文件名

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T13:56:01.733

获取您已经知道的文件名，然后使用[String.Split()](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)获取各个部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T13:56:37.067

你必须使用正则表达式：

```
var match = new Regex(@".*_(\d+)_(\d+)").Match(Path.GetFileNameWithoutExtension(fileNAme));
var v02 = match.Groups[0].Value;
var v02345 = match.Groups[1].Value; 
```

# java - 为什么我们需要在接口中指定参数名称？

> ID：10998151
> 
> 赞同：23
> 
> 时间：2012-06-12T13:54:11.623
> 
> 标签：java, interface, parameters, named-parameters

**当我们创建接口方法时，我们不能在java**中做类似的事情：

```
void interface_method(Integer,String, /* other parameter */); 
```

相反，我注意到我们还需要给参数名称 lile：

```
void interface_method(Integer i, String s); 
```

此外，接口实现者不需要与接口方法中的参数名称相同。

[我在这里](https://stackoverflow.com/questions/8614182/why-do-we-have-to-name-interface-method-parameters)发现了一个关于 c# 的类似问题。他们提到了**命名参数**的一种情况，但我没有在 java 中找到任何其他相关原因。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T13:58:09.160

从技术角度来看，这是没有必要的。

我一直把它当作语法规范化和文档辅助。

这样就有了：

1.  没有理由区分类和接口方法的语法，并且
2.  可以使用（描述性！）参数名称生成默认 Javadoc 文档。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-12T13:58:56.927

如果没有参数名称，就很难区分相同类型的参数。

```
double divide(double, double); 
```

约定说第二个参数是除数。但是使用命名参数，它更明确且更清晰。反过来，文档可以清楚地使用名称，而不是在尝试解释该方法应如何使用以及每个参数的含义时必须不断地说“第一个参数”或“第二个参数”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-12T13:58:41.533

我对此的看法：

1.  这是参数名称的语言规范；

2.  接口即接口，名称有助于传达含义；

3.  接口实际上并不是像 C/C++ 中那样的实现的前向声明，因此比较并不完全正确；

# navision - XMLPort 跳过空标签

> ID：10998152
> 
> 赞同：2
> 
> 时间：2012-06-12T13:54:13.340
> 
> 标签：navision, dynamics-nav

我在 Dynamics Nav 中创建了一个 XMLport。我遇到的问题是空标签出现在 XML 中，我需要删除它们。我必须做些什么来修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-28T09:12:18.570

您必须将代码添加到每个元素和属性的 OnBeforePassVariable 触发器。只需检查该值是否为空并跳过它。

```
awesomefield - Export::OnBeforePassVariable()
IF awesomefield  = '' THEN
  currXMLport.SKIP; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:05:25.847

只需将 XMLDoc.transformNodeToObject 函数与此样式表一起使用

```
 <xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" >

  <xsl:output method="xml" indent="yes" />
  <!--Remove alle empty nodes recursively-->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <!--Strip white space between nodes-->
  <xsl:template match="*[normalize-space() = '']"/>
</xsl:transform> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T20:34:49.723

默认情况下，XMLport 中的新元素的“MinOccurs”和“MaxOccurs”属性设置为“Once”。尝试将该元素的“MinOccurs”属性设置为“零”。这可能会奏效。

# ruby-on-rails - 需要识别搜索返回的项目数量

> ID：10998154
> 
> 赞同：2
> 
> 时间：2012-06-12T13:54:21.157
> 
> 标签：ruby-on-rails, search, pg-search

我在数据输入之前实施搜索，以确保用户没有复制现有条目，并且我无法确定如何捕获和使用搜索结果的数量来引导用户进行下一步。

我正在使用 rails 3 和 pg_search gem

模型/request.rb

```
class Request < ActiveRecord::Base
  attr_accessible :description, :title, :user_id, :who

  belongs_to :user
  has_many :comments

  include PgSearch
  pg_search_scope :search, against: [:title, :description, :who],
     using: {tsearch: {dictionary: "english"}},
       associated_against: {user: :name},
       ignoring: :accents

  def self.request_search(query)
    if query.present?
      search(query)
      where("title @@ :q or description @@ :q or who @@ :q", q: query)
    else
      scoped
    end
  end
end 
```

requests_controller.rb

```
 def index
    @requests = Request.request_search(params[:search]).order(sort_column + " " +  sort_direction).paginate(:per_page => 4, :page => params[:page])
    @users = User.all
  end 
```

-- 开始编辑（根据 Jesse 的回答）

requests_controller.rb（续）

```
 private

  def sort_column
    Request.column_names.include?(params[:sort]) ? params[:sort] : "title"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end 
```

application_helper.rb

```
 def sortable(column, title = nil)
    title ||= column.titleize
    css_class = column == sort_column ? "current #{sort_direction}" : nil
    direction = column == sort_column && sort_direction == "asc" ? "desc" : "asc"
    link_to title, params.merge(:sort => column, :direction => direction, :page => nil), {:class => css_class}
  end 
```

_requests.html.erb（部分）

```
<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>

<div class="row">
    <table class="table table-striped pretty">
       <thead>
          <tr>
            <th><%= sortable "title" %></th>
            <th><%= sortable "who", "Requested Pro" %></th>
            <th><%= sortable "created_at", "When" %></th>
            <th><%= sortable "request.user", "Requested by" %></th>
          </tr>
       </thead>
       <tbody>
       <% @requests.each do |request| %>
         <tr>
           <td><%= request.title %></td>
           <td><%= request.who %></td>
           <td><%= request.created_at %></td>
           <td><%= request.user.name %></td>
           <td><%= link_to 'Show', request, :class => 'btn btn-mini'%></td>
           <% if can? :update, @course %>
           <td><%= link_to 'Edit', edit_request_path(request) %></td>
               <td><%= link_to 'Destroy', request, 
                            confirm: 'Are you sure?', 
                            method: :delete, 
                            :class => 'btn btn-mini' %></td>
           <% end %>
         </tr>
      <% end %>
      </tbody>
    </table>
    <div class="pull-right"><%= will_paginate @requests %></div>    
</div>
<%= button_to 'New Request', new_request_path, :class => 'btn btn-large btn-primary mleft20 mtop20' %> 
```

-- 结束编辑

例如，有两种方法可以从其他页面到达索引页面，搜索后或通过链接。如果用户在搜索后到达索引，我想在视图中的搜索结果之前插入一些文本：您的搜索产生了“x”项。如果您没有看到您要查找的内容，请单击按钮输入新请求。

否则，如果用户只是链接到索引，我希望能够隐藏文本并按原样显示索引。

我想我可以通过 request_search 以某种方式访问​​搜索属性（如果调用它们是正确的），但我不确定如何在视图中实现它（经过多次尝试）。

其次，如果我可以添加，如果用户决定创建一个新条目，我希望将搜索文本复制到一个条目字段中......

请让我知道我是否已经清楚地说明了问题以及您是否可以为我提供一些启发。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:12:23.033

```
 def index
    @requests = Request.request_search(params[:search]).order(sort_column + " " +  sort_direction).paginate(:per_page => 4, :page => params[:page])
    @users = User.all
    @search = params[:search] 
 end 
```

在你看来：

```
<% if @search.present? %> 
  <p>Your search yielded <%= pluralize(@requests.total_entries, "item") %>. If you don't see what you're looking for, enter a new request by clicking on the button.</p>
<% end %>

<%= form_tag, url: "/" do %>
  <%= label_tag :search, "Search for:"%>
  <%= text_field_tag :search, value: @search %>
  <%= submit_tag "Search" %>
<% end %> 
```

最后说明：看起来您一定遗漏了获取“sort_column”的代码。因为“sort_column”将是一个未引用的变量，所以您将无法运行上述代码。

# php - 尝试将学生密钥从 html 表单传递到 php 文件以扫描数据库

> ID：10998156
> 
> 赞同：1
> 
> 时间：2012-06-12T13:54:22.713
> 
> 标签：php, mysql, html, forms

基本上在设置网页时遇到问题，该网页将接收用户输入的学生密钥。然后，这会将学生密钥解析到另一个文件，该文件将针对 mysql 后端运行它，以查看该学生已经拥有的记录。但是不能让它为我的生活工作请帮助我仍然是新手。

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

  mysql_select_db("support_log", $con);

  $result= mysql_query("SELECT student.first_name, student.surname, student.year_group, student.STKEY, student_log.issue
        FROM `student` JOIN `student_log`
        WHERE student.STKEY like '$_POST[stkey]'");

  $result2 = mysql_query($result) or die("Error: " . mysql_error()); 
  if(mysql_num_rows($result2) == 0){ 
  echo("no records found"); 
  } ELSE { 

    echo "<table border='1'>
    <tr>
    <th>First name</th>
    <th>Surname</th>
    <th>Year Group</th>
    <th>Student Key</th>
    <th>Issue</th>
    </tr>";

    while($row = mysql_fetch_array($result2))
    {
    echo "<tr>";
    echo "<td>" . $row['First_Name'] . "</td>";
    echo "<td>" . $row['surname'] . "</td>";
    echo "<td>" . $row['year_group'] . "</td>";
    echo "<td>" . $row['stkey'] . "</td>";
    echo "<td>" . $row['issue'] . "</td>";
    echo "</tr>";
    }
    echo "</table>";
  }
  mysql_close($con);
?> 
```

将我的 where 语句更改为：

```
 WHERE student.STKEY like '$_POST[stkey]'"); 
```

我不再从 PHP 接收错误，但现在收到错误查询为空，这是我的代码的一部分，用于检测是否没有结果。虽然我已经在 phpmyadmin 中测试了该查询，但它会吐出结果。通过查看代码，有人有任何解决方案吗？我还通过在 post 命令上运行 echo 来检查解析，以确保输入的数据是正确的。

编辑：摆脱了现在抛出的整个 result2 检查：警告：mysql_fetch_array() 期望参数 1 是资源，在第 24 行的 C:\wamp\www\stkey_submit.php 中给出的布尔值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:56:31.137

尝试`$_POST['stkey']`代替`$_POST[stkey]`

编辑：如果您在查询中使用它，最好这样做：

```
$stkey = mysql_real_escape_string($_POST['stkey']);
$sql = "SELECT ....... like '$stkey'";
mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:00:55.927

```
$result= mysql_query("SELECT student.first_name, student.surname, student.year_group, student.STKEY, student_log.issue
    FROM `student` JOIN `student_log`
    WHERE student.STKEY like " . $_POST["stkey"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:10:40.440

如何在将 stkey 的值包含在查询中之前将其存储在变量上？

```
$stkey = $_POST['stkey'];
$result= mysql_query("SELECT student.first_name, student.surname, 
        student.year_group, student.STKEY, student_log.issue
        FROM `student` JOIN `student_log`
        WHERE student.STKEY LIKE '%$stkey%'"); 
```

您可能还想使用 MySqli 或 PDO 而不是 MySql 数据库 API。看看 Nettuts 的这篇文章：http: [//net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)

# c# - 无限异步方法（如何等到上下文模型创建？）

> ID：10998157
> 
> 赞同：1
> 
> 时间：2012-06-12T13:54:24.727
> 
> 标签：c#, database, asp.net-mvc-3

编辑：accountrepository 的问题-membershipprovider

我目前正在尝试构建一种游戏，我希望有一个无限循环来查找未完成的游戏并更新它们。（每隔几分钟）

下面是我想连续运行的代码，我在 application_start 上调用 Engine 类。当我尝试时收到一个问题，即我的模型尚未创建。

有没有办法***等到创建模型*****然后**启动该线程？

提前致谢 ！（下面的堆栈跟踪）

“在创建模型时不能使用上下文。”

```
 public class VluchtEngine
    {
        private VluchtRepository _vluchtRepository;

        private TimeSpan WaitTime = new TimeSpan(0, 0,30);

        public VluchtEngine(PigeonFancierContext c)

        {
            _vluchtRepository = new VluchtRepository(c);

            Task t2 = Task.Factory.StartNew(Run);

            }

        public void Run()
        {

            while (/*_vluchtRepository.FindAll().Where(p => p.IsGesimuleerd ==                   false).Count() > 0)*/true)
            {
                foreach (var vlucht in _vluchtRepository.FindAll())
                {
                    foreach (var duif in vlucht.Inschrijvingen)

                    {
                        duif.AfgelegdeAfstand += 1;
                        if (duif.AfgelegdeAfstand == vlucht.Afstand)
                            duif.IsAangekomen = true;
                    }

                    if(vlucht.Inschrijvingen.Where(p => p.IsAangekomen).Count() == 0)
                    {
                        vlucht.IsGesimuleerd = true;
                    }
                }

                _vluchtRepository.SaveChanges();

                Thread.Sleep(WaitTime);

            }

        }

}
}

[InvalidOperationException: The context cannot be used while the model is being created.]
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +577466
   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +18
   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +63
   System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() +15
   System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() +37
   System.Linq.Queryable.Where(IQueryable`1 source, Expression`1 predicate) +63
   PigeonFancier.Infrastructuur.MelkerRepository.FindByEmail(String email) in C:\Users\Jonas\Documents\Visual Studio 2010\Projects\PigeonFancier\PigeonFancier\Infrastructuur\MelkerRepository.cs:39
   PigeonFancier.Infrastructuur.MelkerModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) in C:\Users\Jonas\Documents\Visual Studio 2010\Projects\PigeonFancier\PigeonFancier\Infrastructuur\MelkerModelBinder.cs:22
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:18:35.577

我会建议使用 `Windows Service`而不是尝试在 Applciation 开始时运行代码

如果不是那么 `Ajax Call with Sleep Interval of 60 seconds in Master Page`或`HTML5 Web Sockets`

# logging - RSpec：如何测试 Rails 记录器的消息期望？

> ID：10998160
> 
> 赞同：76
> 
> 时间：2012-06-12T13:54:34.473
> 
> 标签：logging, rspec, mocking, stubbing

我正在尝试测试 Rails 记录器是否接收到我的某些规范中的消息。我正在使用[Logging gem](https://github.com/TwP/logging)。

假设我有这样的课程：

```
class BaseWorker

  def execute
    logger.info 'Starting the worker...'
  end

end 
```

和一个像这样的规范：

```
describe BaseWorker do

  it 'should log an info message' do
    base_worker = BaseWorker.new
    logger_mock = double('Logging::Rails').as_null_object
    Logging::Rails.stub_chain(:logger, :info).and_return(logger_mock)

    logger_mock.should_receive(:info).with('Starting the worker...')
    base_worker.execute
    Logging::Rails.unstub(:logger)
  end

end 
```

我收到以下失败消息：

```
 Failure/Error: logger_mock.should_receive(:info).with('Starting worker...')
   (Double "Logging::Rails").info("Starting worker...")
       expected: 1 time
       received: 0 times 
```

我尝试了几种不同的方法来让规范通过。这适用于例如：

```
class BaseWorker

  attr_accessor :log

  def initialize
    @log = logger
  end

  def execute
    @log.info 'Starting the worker...'
  end

end

describe BaseWorker do
  it 'should log an info message' do
    base_worker = BaseWorker.new
    logger_mock = double('logger')
    base_worker.log = logger_mock

    logger_mock.should_receive(:info).with('Starting the worker...')
    base_worker.execute
  end
end 
```

但是必须设置一个这样的可访问实例变量似乎在这里摇尾巴。（实际上，我什至不确定为什么将 logger 复制到 @log 会使其通过。）

什么是测试日志记录的好解决方案？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-07-11T05:41:10.537

虽然我同意您通常不想测试记录器，但有时它可能很有用。

我对`Rails.logger`.

使用 RSpec 不推荐使用的`should`语法：

```
Rails.logger.should_receive(:info).with("some message") 
```

使用 RSpec 的新`expect`语法：

```
expect(Rails.logger).to receive(:info).with("some message") 
```

**注意：在控制器和模型规范中，您必须在记录消息***之前*放置此行。如果你把它放在后面，你会收到这样的错误消息：

```
Failure/Error: expect(Rails.logger).to receive(:info).with("some message")
       (#<ActiveSupport::Logger:0x007f27f72136c8>).info("some message")
           expected: 1 time with arguments: ("some message")
           received: 0 times 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-12-15T14:36:46.293

使用 RSpec 3+ 版本

**包含单个调用的实际代码`Rails.logger.error`**：

```
Rails.logger.error "Some useful error message" 
```

规格代码：

```
expect(Rails.logger).to receive(:error).with(/error message/) 
```

如果您希望在规范运行时实际记录错误消息，请使用以下代码：

```
expect(Rails.logger).to receive(:error).with(/error message/).and_call_original 
```

**包含多次调用的实际代码`Rails.logger.error`**：

```
Rails.logger.error "Technical Error Message"
Rails.logger.error "User-friendly Error Message" 
```

规格代码：

```
expect(Rails.logger).to receive(:error).ordered
expect(Rails.logger).to receive(:error).with(/User-friendly Error /).ordered.and_call_original 
```

***此外，如果您只关心匹配第一条消息而不是任何后续消息，那么您可以使用以下***

```
 expect(Rails.logger).to receive(:debug).with("Technical Error Message").ordered.and_call_original
  expect(Rails.logger).to receive(:debug).at_least(:once).with(instance_of(String)).ordered 
```

*注意上面的变化设置`.ordered`很重要，否则期望设置开始失败。*

参考：

[http://www.relishapp.com/rspec/rspec-mocks/v/3-4/docs/setting-constraints/matching-arguments](http://www.relishapp.com/rspec/rspec-mocks/v/3-4/docs/setting-constraints/matching-arguments)

[http://www.relishapp.com/rspec/rspec-mocks/v/3-4/docs/setting-constraints/message-order](http://www.relishapp.com/rspec/rspec-mocks/v/3-4/docs/setting-constraints/message-order)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-09-19T14:48:57.730

*而不是在记录消息之前*使用此行：

```
expect(Rails.logger).to receive(:info).with("some message")
something that triggers the logger... 
```

您可以将 Rails 记录器设置为间谍并`have_received`改用：

```
allow(Rails.logger).to receive(:info).at_least(:once)

something that triggers the logger...

expect(Rails.logger).to have_received(:info).with("some message").once 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-06-03T18:29:49.243

如果您的目标是测试日志记录功能，您还可以考虑验证输出到标准流。

这将使您免于模拟过程并测试消息是否会真正到达它们应该到达的位置（STDOUT/STDERR）。

使用 RSpec 的[输出匹配器](https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/output-matcher)（在 3.0 中引入），您可以执行以下操作：

```
expect { my_method }.to output("my message").to_stdout
expect { my_method }.to output("my error").to_stderr 
```

如果是库之类的，`Logger`或者`Logging`您可能必须使用`output.to_<>_from_any_process`.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-20T11:36:14.830

如果您想在测试中保持一致性，但最后设置期望值，您需要在设置中添加：

```
setup do
 allow(Rails.logger).to receive(:info)
end
...

it 'should log an info message' do
 {code}

  expect(Rails.logger).to have_received(:info).with('Starting the worker...')
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-19T06:12:35.827

即使我有非常相似的错误：

```
Failure/Error: expect(Rails.logger).to receive(:info).with("some message")
       (#<ActiveSupport::Logger:0x007f27f72136c8>).info("some message")
           expected: 1 time with arguments: ("some message")
           received: 0 times 
```

以下对我有用，

```
expect { my_method }.
            to output(/error messsage/).to_stdout_from_any_process 
```

参考：[https ://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/output-matcher](https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/output-matcher)

# interop - Microsoft Outlook 互操作（提取附件）非常慢

> ID：10998170
> 
> 赞同：2
> 
> 时间：2012-06-12T13:55:16.927
> 
> 标签：interop, outlook, ms-office, mapi

我正在使用**Microsoft.Office.Interop.Outlook**提取电子邮件附件：

```
var MAPI = new Application().GetNamespace("MAPI");
var ExampleFolder = MAPI.GetDefaultFolder(OlDefaultFolders.olFolderSentMail)

foreach (dynamic i in ExampleFolder.Items)
  if (i.Attachments.Count > 0)
    ; // DoSomething(); 
```

不幸的是，这是**非常缓慢**的。

*   有没有更快的方法来检查附件？
*   是否可以按日期过滤/排序电子邮件：仅循环浏览最后 n 个项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:24:54.750

当然，您可以使用 Items.Sort 对集合进行排序。您还可以使用 Items.Find/FindNext 或 Items.Restrict 仅查找带有附件的项目。您需要的属性是 PR_HASATTACH (DASL name `http://schemas.microsoft.com/mapi/proptag/0x0E1B000B`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-29T14:51:48.727

@Kiquenet（我无法在您的下方添加评论），这是获取带有附件的项目的代码`Items.Restrict`：

```
//fanti's code
var MAPI = new Application().GetNamespace("MAPI");
var ExampleFolder = MAPI.GetDefaultFolder(OlDefaultFolders.olFolderSentMail) 
```

*   `Urn`方式（测试，**好的**-> 来源[https://social.msdn.microsoft.com/Forums/windowsapps/en-US/b6fef244-756c-4ab0-a22b-78137cfb4349/datereceived-filter-nor-happeinig?forum=outlookdev](https://social.msdn.microsoft.com/Forums/windowsapps/en-US/b6fef244-756c-4ab0-a22b-78137cfb4349/datereceived-filter-nor-happeinig?forum=outlookdev)） ：

    ```
    var itemsWithAttachment = ExampleFolder.Items.Restrict("@SQL= urn:schemas:httpmail:hasattachment = True"); 
    ```

*   `DASL`方式（经过测试，**ko-** >“应该工作”源[https://docs.microsoft.com/en-us/office/client-developer/outlook/pia/how-to-filter-and-efficiently-enumerate-items-在一个文件夹中](https://docs.microsoft.com/en-us/office/client-developer/outlook/pia/how-to-filter-and-efficiently-enumerate-items-in-a-folder)）：

    ```
    const string PR_HAS_ATTACH = "https://schemas.microsoft.com/mapi/proptag/0x0E1B000B";
    var itemsWithAttachment = ExampleFolder.Items.Restrict("@SQL=\"" + PR_HAS_ATTACH + "\" = 1"); 
    ```

要按日期过滤，只需像这样添加“AND”或“OR”（*Urn*方式）：

```
var itemsWithAttachmentAndDate = ExampleFolder.Items.Restrict("@SQL= urn:schemas:httpmail:hasattachment = True"
 + " AND urn:schemas:httpmail:datereceived <= '" + DateTime.Now.AddMonths(-3) + "'"); 
```

仅遍历最后 n 个项目：

```
int n = 3;
for (int i = itemsWithAttachmentAndDate.Count - 1; i > n; i--)
{
    //current item: itemsWithAttachmentAndDate[i] //Beware: "dynamic" typed!
    ; //DoSomething();
} 
```

# c - 简单 C 引导程序/内核的问题

> ID：10998172
> 
> 赞同：5
> 
> 时间：2012-06-12T13:55:27.737
> 
> 标签：c, x86, kernel, nasm, osdev

最近，我开始对编写自己的非常基本的操作系统感兴趣。我写了（好吧，复制了）一些基本的程序集，它建立了一个堆栈并做了一些基本的事情，这似乎工作得很好，但是试图将 C 引入混合中却把一切都搞砸了。

我有两个主要的项目文件：loader.s 是一些 NASM，它创建堆栈并调用我的 C 函数，以及 kernel.c 包含基本的 C 函数。

我目前的问题本质上是当我运行 kernel.bin 文件时 QEMU 冻结了。我猜我的代码有很多问题——也许这个问题并不适合 StackOverflow 格式，因为它非常特殊。我的项目文件如下：

**装载机.s:**

```
BITS 16                         ; 16 Bits

extern kmain                    ; Our 'proper' kernel function in C

loader:
    mov ax, 07C0h           ; Move the starting address [7C00h] into 'ax'
    add ax, 32              ; Leave 32 16 byte blocks [200h] for the 512 code segment
    mov ss, ax              ; Set 'stack segment' to the start of our stack
    mov sp, 4096            ; Set the stack pointer to the end of our stack [4096 bytes in size]

    mov ax, 07C0h           ; Use 'ax' to set 'ds'
    mov ds, ax              ; Set data segment to where we're loaded
    mov es, ax              ; Set our extra segment

    call kmain              ; Call the kernel proper

    cli                     ; Clear ints

    jmp $                   ; Hang

; Since putting these in and booting the image without '-kernel' can't find
; a bootable device, we'll comment these out for now and run the ROM with
; the '-kernel' flag in QEMU
        ;times 510-($-$$) db 0          ; Pad remained of our boot sector with 0s
        ;dw 0xAA55                      ; The standard 'magic word' boot sig 
```

**内核.c：**

```
#include <stdint.h>

void kmain(void)
{
        unsigned char *vidmem = (char*)0xB8000; //Video memory address
        vidmem[0] = 65; //The character 'A'
        vidmem[1] = 0x07; //Light grey (7) on black (0)
} 
```

我像这样编译所有东西：

> nasm -f elf -o loader.o loader.s
> 
> i386-elf-gcc -I/usr/include -o kernel.o -c kernel.c -Wall -nostdlib -fno-builtin -nostartfiles -nodefaultlibs
> 
> i386-elf-ld -T linker.ld -o kernel.bin loader.o kernel.o

然后像这样测试：

> qemu-system-x86_64 -kernel kernel.bin

希望有人可以帮我看看这个——代码片段不是很长。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T14:35:23.600

天哪，从哪里开始？（休斯，是你吗？）

来自的代码`loader.s`进入主引导记录 (MBR)。然而，MBR 也保存着硬盘驱动器的分区表。所以，一旦你*组装*了`loader.s`，你必须将它与 MBR 合并：来自 的代码*，*`loader.s`来自 MBR 的分区表。如果您只是将`loader.s`代码复制到 MBR 中，那么您就破坏了硬盘驱动器的分区。要正确进行合并，您必须知道分区表在 MBR 中的确切位置...

`loader.s`进入 MBR的输出称为“第一阶段引导加载程序”。由于上述原因，您在第一阶段只有 436 个字节。在这一点上你*不能*做的一件事是在其上添加一些 C 编译器输出（即使你的二进制文件大于一个扇区，即 MBR）并将其复制到硬盘驱动器。虽然它*可能会*暂时在旧硬盘上工作，但现代硬盘在扇区 1 中携带更多分区信息，这些信息会被您的复制破坏。

这个想法是你编译`kernel.c`成一个*单独*的二进制文件，“第二阶段”。第一*阶段*，在可用的 436 字节中，然后使用 BIOS（或 EFI）从硬盘驱动器上的特定点*加载*第二阶段（因为您将无法将分区表和文件系统解析添加到第一阶段阶段），然后*跳转*到刚刚加载的代码。由于第二阶段没有相同的大小限制，它可以继续做*正确*的事情，即解析分区信息，找到“home”分区，解析它的文件系统，然后加载并解析*实际*内核二进制。

我希望你知道我正在从近地轨道观察这一切。引导加载是一个复杂的过程，没有人希望在一篇 SO 帖子中详细说明它。因此，有专门针对这些主题的网站，例如[OSDev](http://osdev.org)。但请注意：这种开发需要*经验丰富*的程序员、能够进行专业级研究的人、以聪明的方式提出问题并承担自己的责任。由于这些技能现在普遍下降，如果你错误地处理它，操作系统开发网站就会有脾气暴躁的反应。(*)

(*)：或者他们将未注释的源代码扔给你，就像我完成这篇文章时 dwalter 所做的那样。;-)

**编辑：**当然，这都不是模拟器冻结的真正原因。i386-elf-gcc 是为 32 位保护模式生成代码的编译器，假设是“平面”内存模型，即从零开始的代码/数据段。你`loader.s`的是 16 位实模式代码（如`BITS 16`部分所述），它*不会*激活保护模式，并且*不会*将段寄存器初始化为 GCC 预期的值，然后在 false 下继续跳转到 GCC 生成的代码假设... BAM。

# php - 从生成的 URL 获取 ZIP 文件

> ID：10998175
> 
> 赞同：1
> 
> 时间：2012-06-12T13:55:33.903
> 
> 标签：php, url, zip, request

我有一个 URL，可在请求时开始下载 .zip 文件。URL 看起来像这样： [http ://website.nl/servlets/ogexport?koppeling=WEBSITE&user=](http://website.nl/servlets/ogexport?koppeling=WEBSITE&user=) **&password=** &og=BOG&kantoor=**

如何确保在该过程中生成的 zip 文件在我的 PHP 解压缩脚本中使用？

```
$file = 'testing.zip';
$path = pathinfo(realpath($file), PATHINFO_DIRNAME).'/xml';

// unzippen
$zip = new ZipArchive;
$res = $zip->open($file);
if ($res === TRUE) {
    $zip->extractTo($path);
    $zip->close();
            echo 'success';
    // debug("ZIP bestand uitgepakt", 2);
} else {
    // debug("ZIP niet uitgepakt", 2);
    echo 'something went wrong.';
}

$xml_path = $path."/testing.xml";
echo $file.'<br>';
echo $xml_path; 
```

希望得到帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:21:06.090

我建议使用 php [curl](http://php.net/manual/pt_BR/book.curl.php)下载远程文件。这是一个[示例](http://www.phpriot.com/articles/download-with-curl-and-php)

# java - Spring Roo 没有已知的附加组件

> ID：10998177
> 
> 赞同：3
> 
> 时间：2012-06-12T13:55:44.023
> 
> 标签：java, spring, spring-roo

我在 roo shell 中尝试以下命令

**数据库逆向工程师 --package ~.domain --schema PUBLIC**

并产生以下...

**Spring Roo 自动插件发现服务目前不可用**

当我只是尝试进行插件搜索时，我得到以下信息

**没有已知的附加组件。你在线吗？尝试“下载状态”命令**

下载状态很好。使用代理可能存在问题，但我已经修复了 settigs.xml 和代理设置，除非我遗漏了任何内容。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:56:27.717

如果这与代理无关，则可能与注册时 RooBot Add 中的当前错误有关。请参阅 Jira 问题 - [ROO-3184](https://jira.springsource.org/browse/ROO-3184)、[ROO-3191](https://jira.springsource.org/browse/ROO-3191)。它还没有修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:42:15.890

我有过类似的经历。每当我输入**addon list**时，roo 都会怀疑我是否在线。当我输入**proxy configuration**时，roo 会告诉我我没有配置。

要让 roo 使用您的代理设置，请创建一个**ROO_OPTS**环境变量并指定**-Djava.net.useSystemProxies=true**

重新启动 roo，它将使用您的代理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:38:05.057

试过 osgi start 命令。下载驱动并发出ROO命令：

```
osgi start --url file:C:\dev\h2DataBase\h2\bin\h2-1.3.168.jar 
```

# php - PHP 睡眠（）不工作

> ID：10998178
> 
> 赞同：6
> 
> 时间：2012-06-12T13:55:44.617
> 
> 标签：php, sleep

我正在制作一个 php 文件，该文件将在五分钟后运行一个事件。从文档看来，等待五分钟只需要`sleep(300)`，但这不起作用。我已经测试了所有其他代码，并且在我添加该`sleep`行之前它工作正常。

```
<?php
/**
 * Twitter App
 * bagelBack.php
 * Takes parameters from $_POST and creates a tweet
 * RKoutnik, 2012
 * Code originally found on http://140dev.com/twitter-api-programming-tutorials/hello-twitter-oauth-php/
 */

$name = '@'.$_POST['twitterName'];
$type =  $_POST['bagelType'];

/* BEGIN CONTENT SPINNER TO IMPRESS LYNK */
$bagels = array(
    0 => "bagel",
    1 => "breakfast treat",
    2 => "doughy food-type item",
    3 => "round yeast-raised munchie",
    4 => "doughnut-shaped roll",
    5 => "hard-crusted treat"
);
$finished = array(
    0 => "finished toasting",
    1 => "completed toasting",
    2 => "stopped being raw",
    3 => "concluded the toasting phase",
    4 => "been sucessfully executed",
    5 => "been roasted to a crisp"
);

$food = $bagels[array_rand($bagels)];
$fin = $finished[array_rand($finished)];
sleep(300);
$tweet_text = $name.", Your ".$type." ".$food." has ".$fin;

$result = post_tweet($tweet_text);
echo "Response code: " . $result . "\n";

function post_tweet($tweet_text) {

  // Use Matt Harris' OAuth library to make the connection
  // This lives at: https://github.com/themattharris/tmhOAuth
  require_once('tmhOAuth.php');

  // Set the authorization values
  // In keeping with the OAuth tradition of maximum confusion, 
  // the names of some of these values are different from the Twitter Dev interface
  // user_token is called Access Token on the Dev site
  // user_secret is called Access Token Secret on the Dev site
  // The values here have asterisks to hide the true contents 
  // You need to use the actual values from Twitter
  $connection = new tmhOAuth(array(
    'consumer_key' => '[redacted]',
    'consumer_secret' => '[redacted]',
    'user_token' => '[redacted]',
    'user_secret' => '[redacted]',
    'curl_ssl_verifypeer'   => false
  )); 

  // Make the API call
  $connection->request('POST', 
    $connection->url('1/statuses/update'), 
    array('status' => $tweet_text)
  );

  return $connection->response['code'];
}
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T13:58:14.253

尝试`set_time_limit(0);`在文档顶部添加。它有可能达到“最大执行时间”并导致脚本终止。

# javascript - KMZ 点在 Google 地图中以小比例显示位置不准确

> ID：10998188
> 
> 赞同：3
> 
> 时间：2012-06-12T13:56:13.540
> 
> 标签：javascript, google-maps, google-maps-api-3, zooming, kmz

当地图缩小（例如缩放：5）时，我在小范围内准确地显示 KMZ 文件中的点时遇到问题。

例如，Farmers Markets KMZ 图层中的一些点从水中开始，然后当您放大这些点时，这些点会移动到陆地上，并在您放大地图时变得更加准确。只有在一定程度上放大时，这些点才会显示在它们的准确位置。

缩小地图时，如何在小比例下更准确地显示点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:40:13.817

当放置自定义图标时，我在常规 API 标记中看到了类似的行为，当缩小时，标记似乎被“撞”到一边。这种效果与标记图像的锚定位置有关。默认情况下，KML 标记看起来锚定在图像的中心底部。

请注意，下面的农贸市场 PNG 图像有很多空白的“填充”。由于地图的锚点位于图像的底部，因此在缩小时，红点会出现向北移动。

![标记图像](../Images/c97d8be15c6851177e1daf553f8a35e0.png)

我发现一个页面说图标需要至少为 32x32，所以填充应该留在那里。

要更改锚定位置，请将`<hotspot>`选项添加到 IconStyle，[如此处所述](https://developers.google.com/kml/documentation/kmlreference#iconstyle)，例如，添加到图像的中心：

`<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction">`

# jmx - 在 JBOSS AS 7.1.1 中获取 MBean 服务的实例

> ID：10998190
> 
> 赞同：1
> 
> 时间：2012-06-12T13:56:17.523
> 
> 标签：jmx, jboss7.x, mbeans

我正在尝试访问部署到 JBOSS AS 7.1.1 中的 MBean 服务。我的 MBean 服务也是一个队列监听器。我正在尝试获取此 MBean 服务的实例以将其注册为另一个 SAR 中的队列侦听器。

我试过这段代码，但它不工作，

```
MBeanServer server  = ManagementFactory.getPlatformMBeanServer(); 
ObjectName mbeanObject =
        new ObjectName("myproject.service.Test:service=com.mytest.program");
TestServiceMBean handler = MBeanServerInvocationHandler.newProxyInstance(
      server, mbeanObject, TestServiceMBean.class, false); 
```

我也试过这个

```
TestServiceMBean testMBeanService =
       (TestServiceMBean)server.getAttribute(mbeanObject,  "Instance"); 
```

在这两种情况下，我都没有得到`TestServiceMBean`. 谁能帮助我获得对 MBean 测试服务的访问权限。

```
<mbean code="com.mytest.program.TestService"
      name="myproject.service.Test:service=com.mytest.program">
</mbean> 
```

这是代码：

```
public class TestService implements TestServiceMBean, MessageListener { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:29:49.800

穆图；

对于**AttributeNotFoundException**：至少我们知道 MBean 实际已注册:) 所以问题是，您的 TestService mbean 是否定义了一个名为**Instance**的属性，它是否有返回类型**TestServiceMBean**并且它实际上返回**this**吗？如果没有，这就是你需要做的。

**测试服务：**

```
public TestServiceMBean getInstance() {
    return this;
} 
```

**测试服务MBean：**

```
public TestServiceMBean getInstance(); 
```

* * *

对于调用处理程序，您不需要强制转换，但返回的类不会具有您期望的名称。之所以称为**Proxy0**，是因为它是一个合成动态代理，但您应该会发现它确实实现了**TestServiceMBean**接口，并且您应该能够针对它调用操作。

# jquery - iPad 和视差效果

> ID：10998202
> 
> 赞同：1
> 
> 时间：2012-06-12T13:56:59.917
> 
> 标签：jquery, css, html, parallax

我在 iPad 上遇到视差效果问题，我不需要它来完全发挥作用，我知道它不会向右滚动，但由于某种原因，所有背景都关闭了，并且固定位置设置不正确. 同样在某些时候，我的位置固定导航链接不可点击，尽管它们具有足够高的 z-index。

如果我取出固定在背景上的位置，我会看到它们，但是它们向左移动得太远了，在右边有一个巨大的间隙。我哪里错了？这是我第一次尝试这种效果，我让它在 IE 7 + Chrome 和 Firefox 中运行良好。

这是链接：http: [//inrekor.awcbits.com/](http://inrekor.awcbits.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:57:24.840

我也在研究视差，并意识到它在 iOS 设备上不起作用。可能与在移动设备上查看时，Nike Better World 视差网站是静态图像的原因相同。

其他人已经解决了这个问题并且可能会有所帮助：[CSS“位置：固定；” 在 iPad/iPhone 上？](https://stackoverflow.com/questions/4889601/css-position-fixed-into-ipad-iphone)

# uml - 如何在UML序列图中绘制多个返回

> ID：10998211
> 
> 赞同：7
> 
> 时间：2012-06-12T13:57:29.423
> 
> 标签：uml, sequence-diagram

在 UML 序列图中，一个方法只能有一条返回线（至少在 Astah 中，我无法从一个方法中绘制两条返回线），如何在 if-else 块中对多个返回进行建模？

在下面的例子中，返回线'a'结束了methodX()，如何绘制返回线'b'？

```
String methodX(int i) {
  if (i>0)
    return 'a';
  else
    return 'b';
}

     +------------+            +------------+
     |    Foo     |            |     Bar    |
     +-----+------+            +------+-----+
           |                          |
           |        methodX(i)         |
          +-+----------------------->+-+
          | |                        | |
  +-----+------------------------------------+
  | alt | | |  [i>0]                 | |     |
  +-----+ | |           a            | |     |
  |       | |<- - - - - - - - - - - -+-+     |
  |       | |                         |      |
  |       | |                         |      |
  +------------------------------------------+
  |       | |  [else]                 |      |
  |       | |                         |      |
  |       | |           b             |      |
  |       | |<- - - - - - - - - - - - | ??   |
  |       | |                         |      |
  |       | |                         |      |
  +------------------------------------------+
          | |                         |
          +-+                         |
           +                          + 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:14:44.033

问题在于您的工具，而不是 UML。查看[UML 的视觉范例](http://www.visual-paradigm.com/)。`alt`您可以在每个片段的开头手动添加激活，并在激活结束时发送返回消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:23:01.450

快速观察：

(1) 请记住，一个类/对象可能会向自己发送消息（“DoSomething”），这使得“替代品”更难以理解。

(2) 使用“alt”时，必须提及条件。“alt”，代表“if-then-else”、“switch-case”以及编程语言中的类似概念。

而那些句子，有条件，必须添加到 UML 图（“[条件]”）。

(3) 在“alt”的每个条件或情况下，可能在几个对象之间有多个消息，或者对它们自己，或者没有（只有“return”箭头）。

```
..........................................................
.......+---------+..............+---------+...............
.......|   Foo   |..............|   Bar   |...............
.......+----+----+..............+----+----+...............
............|........................|....................
..........+-+-+....................+-+-+..................
..........|   |......methodX().....|   |..................
..........|   +------------------->+   |..................
..........|   |....................|   |..DoSomething()...
..........|   |....................|   +---+..............
..........|   |....................|   |...|..............
..........|   |....................|   |...|..............
..........|   |....................|   |...|..............
..........|   |....................|   |<--+..............
..........|   |....................|   |..................
..+-----+-------------------------------------+...........
..|.alt.|.|   |....................|   |......|...........
..+-----+-------------------------------------+...........
..|.[option=1].....................|   |......|...........
..|.......|   |....................|   |......|...........
..|.......|   |....................|   +---+..|...........
..|.......|   |....................|   |...|..|...........
..|.......|   |....................|   |...|..|...........
..|.......|   |....................|   |...|..|...........
..|.......|   |....................|   |<--+..|...........
..|.......|   |<-------------------+   |......|...........
..|.......|   |....................|   |......|...........
..+-----+-------------------------------------+...........
..|.[option=2].....................|   |......|...........
..|.......|   |....................|   |......|...........
..|.......|   |....................|   |......|..// The wide bar its kept,
..|.......|   |<-------------------+   |......|..// even if there is a
..|.......|   |....................|   |......|..// previous return arrow
..+-------------------------------------------+...........
..|.[else]|...|....................|   |......|...........
..|.......|   |....................|   |......|...........
..|.......|   |....................|   |......|...........
..|.......|   |<-------------------+   |......|...........
..|.......|   |....................|   |......|...........
..+-------------------------------------------+...........
..........|   |....................|   |..................
..........+-+-+....................+-+-+..................
............|........................|....................
............|........................|....................
............X........................X....................
.......................................................... 
```

干杯。

PD 有适合猫吃的芝士汉堡或金枪鱼汉堡吗？

# sql-server - 适用于 Amazon RDS 的 SQL Server 报告服务

> ID：10998213
> 
> 赞同：10
> 
> 时间：2012-06-12T13:57:39.500
> 
> 标签：sql-server, amazon-ec2, amazon-rds

最近，我们将一个业务应用程序数据库迁移到了 Amazon AWS SQL Server RDS。我们喜欢使用云化数据库进行备份和扩展的灵活性，但我们需要为收集的分析数据编写报告。我们的内部数据分析师最擅长使用 SQL Reporting Services。通常，它作为 SQL Server 安装的组件安装，但我们显然在 RDS 上没有该选项。

我的问题是，**是否有人能够通过 Amazon RDS 成功部署和使用 SQL 报告服务？**

我试过的：

我试图启动另一个 EC2 实例，安装“具有高级服务的 SQL Server Express”，并将 SSRS 指向 RDS，但它说我的许可证类型不兼容。

我也计划为此直接联系 AWS 团队，但我想我会先联系 SO，看看是否有人遇到过这个问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T17:27:49.730

您可能需要使用某个 Microsoft 创建的“Amazon Machine Image”，特别是“SQL Server Optimized”AMI：[Microsoft AMIs](http://aws.amazon.com/windows/amis/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-07T19:48:34.120

另一种选择是应用 SQL Server SSRS 容器，托管在 EC2 VM 上，连接到 RDS。Windocks.com 上有一个博客，其中概述了交付配置容器以提高可扩展性（多个 SSRS 容器）并简化管理的步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-19T03:00:15.577

我已经在 Windows ECS/2 VM 上的 Docker 容器中成功运行 SSRS 有一段时间了，就在今天，亚马逊刚刚发布了关于在 RDS 上本地运行 SSRS 的最新消息：[https ://aws.amazon.com/about- aws/whats-new/2020/05/amazon-rds-for-sql-server-now-supports-sql-server-reporting-services/?nc1=h_ls](https://aws.amazon.com/about-aws/whats-new/2020/05/amazon-rds-for-sql-server-now-supports-sql-server-reporting-services/?nc1=h_ls)

# c# - 无法从 SQL Server Compact 获取输出

> ID：10998214
> 
> 赞同：2
> 
> 时间：2012-06-12T13:57:47.487
> 
> 标签：c#, sql-server-ce

我在 Visual Studio 2010 中的按钮后面有以下代码

```
private void button1_Click(object sender, EventArgs e)
{
    SqlCeConnection Con = new SqlCeConnection();

    Con.ConnectionString = "Data Source = 'DB.sdf';" + "Password='my Password';";

    SqlCeCommand Query = new SqlCeCommand("SELECT Password FROM Admin");

    try        
    {
       Con.Open();
    }
    catch(Exception ex)
    {
       MessageBox.Show(ex.Message);
    }

    SqlCeDataReader Reader=Query.ExecuteReader();
    MessageBox.Show(Reader["Password"].ToString());
} 
```

它工作正常，执行和连接没有异常但是当我按下按钮时它会引发一个异常说

> 错误：执行阅读器连接属性尚未初始化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:01:03.617

[我不会尝试在 UI 事件处理程序中评论数据库访问代码，它会过多地偏离答案。我要说的是，尽量不要这样做。]

**您没有**在[命令构造函数](http://msdn.microsoft.com/en-US/library/8xbzx6zd%28v=vs.100%29)或相关[`Connection`属性](http://msdn.microsoft.com/en-US/library/system.data.sqlserverce.sqlcecommand.connection%28v=vs.100%29)中将连接与命令相关联。

* * *

我会将整个方法重写为以下内容，以消除危险的 try-catch（捕获所有内容，非常糟糕的做法）并利用事实`using`陈述也为您处理对象处理：

```
string password = null;

using (var conn = new SqlCeConnection("Data Source = 'AlviMBRental.sdf'; Password='my Password';"))
using (var comm = new SqlCeCommand("SELECT Password FROM Admin", conn))
{
    conn.Open();

    using (var reader = comm.ExecuteReader())
    {
        password = (string)reader["Password"];

    } // Dispose reader

    // Alternatively, if the resultset is single column and single row, you can do:
    var passwordScalar = (string)comm.ExecuteScalar();

} // Dispose command, close / dispose connection.

MessageBox.Show(password ?? "No password found."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:01:29.467

您没有将您的命令与您的连接相关联 - 试试这个：

```
SqlCeConnection Con = new SqlCeConnection("Data Source = 'AlviMBRental.sdf';Password='my Password';";

SqlCeCommand Query = new SqlCeCommand("SELECT Password FROM Admin", Con);  //   <== specify "Con" here! 
```

否则，您`SqlCeCommand`将无法与之合作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:03:08.997

试试这样：

```
private void button1_Click(object sender, EventArgs e)
{
    var connectionString = "Data Source='AlviMBRental.sdf';Password='my Password';";
    using (var con = new SqlCeConnection(connectionString))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "SELECT Password FROM Admin";
        using (var reader = cmd.ExecuteReader())        
        {
            if (reader.Read())
            {
                MessageBox.Show(reader["Password"].ToString())
            }
        }
    }
} 
```

确保您已将连接与命令对象相关联。还要确保您已将 IDisposable 对象包装`using`在我的示例中所示的语句中。

# bash - 数字类型的文件名

> ID：10998218
> 
> 赞同：2
> 
> 时间：2012-06-12T13:57:54.837
> 
> 标签：bash, sorting

我有一个包含脚本的文件夹，其名称模式是脚本版本`UPDATE[x.y.z]`在哪里。`x.y.z`

我需要的是一个 bash 脚本，它运行按其版本排序的脚本，因此字母排序不好。

例如`UPDATE1.11.0`应该在`UPDATE1.2.3`.

有没有我可以使用的比较器来指示排序顺序？如果没有，还能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:13:41.160

如果您没有 GNU 排序（即您在 OSX 或 FreeBSD 或 NetBSD 中），您可以通过对不同字段进行排序来伪造它。

```
[ghoti ~]$ printf "foo1.2.3\nfoo1.11.0\nfoo1.4.1\nfoo1.4.0\n" | sort -nt. -k2,3
foo1.2.3
foo1.4.0
foo1.4.1
foo1.11.0
[ghoti ~]$ 
```

这错过了主要版本号，因为它不是由点分隔的。但无论如何它可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:00:37.563

如果你有 GNU`sort`或其他支持它的版本，你可以使用版本排序。

```
sort -V 
```

或者

```
sort --version-sort 
```

另外，在[我的回答](https://stackoverflow.com/questions/4023830/bash-how-compare-two-strings-in-version-format/4025065#4025065)中，我发布了一个比较版本的脚本。

# operating-system - 哪个会更好？线程或进程

> ID：10998219
> 
> 赞同：1
> 
> 时间：2012-06-12T13:57:57.430
> 
> 标签：operating-system

假设你有 3 个给定的任务。您可以使用进程或线程运行它们。我的意思是 3 个不同的进程或将它们组合并运行 3 个不同的线程。你会更喜欢哪一个，为什么？

我告诉他，如果我将使用进程，那么我将在一个进程完成时使用一个进程，然后我将与另一个进程交换。让我们假设，如果一项任务占用 4 个字节的内存，那么通过这种方式，我将能够仅用 4 个字节完成我的任务。但是如果我在一个进程中使用 3 个线程，那么我必须使用 12 个字节。然后他告诉我假设你有很多空间，你更喜欢哪一个？

任何其他解释都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:01:43.603

实际上，基于过程的方法通常更可靠。如果进程共享大部分数据和代码，线程就可以了......

# json - go中int64的json解析；空值

> ID：10998222
> 
> 赞同：9
> 
> 时间：2012-06-12T13:58:08.943
> 
> 标签：json, go, int64

我正在尝试在 Go 中解析一个 json 流。我创建了一个简化的示例：

```
 package main
 import (
    "encoding/json"
    "fmt"
 )

 var d = []byte(`{ "world":[{"data": 2251799813685312}, {"data": null}]}`)

 type jsonobj struct{ World []World }
 type World struct{ Data int64 }

 func main() {
    var data jsonobj
    jerr := json.Unmarshal(d, &data)
    fmt.Println(jerr)
 } 
```

这会给我

```
go run testmin.go
json: cannot unmarshal null into Go value of type int64 
```

我在[sql 包](http://golang.org/pkg/database/sql/#NullInt64)中找到了一个可为空的 int64 ，但 json 似乎无法处理它。

是否有 json 可以处理的可为空的 int64 类型？*如果可能的话，我会对将 json null*转换为 -1 或 MinValue感到满意。

谢谢你的意见，法比安

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-12T14:02:41.747

只需使用`*int64`. 指针可以为 nil，也可以指向具有关联值的 int64，它们可以与 Go 的 JSON 包一起正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-22T22:51:47.967

[https://github.com/guregu/null](https://github.com/guregu/null)包含 null.Int null.String 等以及相应的 JSON 序列化/反序列化。

# objective-c - iPhone中的PDF文件在哪里？我可以将它们加载到应用程序中吗？

> ID：10998224
> 
> 赞同：0
> 
> 时间：2012-06-12T13:58:12.870
> 
> 标签：objective-c, ios, pdf

我想让我正在开发的应用程序的用户能够从他的设备加载 PDF 文件，就像他从图库中加载图像一样。是否有可能，如果可以，PDF文件在哪里？

非常感谢您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:13:56.153

我认为这是不可能的，请参阅：[https ://stackoverflow.com/a/7778719/1451392](https://stackoverflow.com/a/7778719/1451392)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:48:58.060

不，这是不可能的。每个应用程序都有自己的内存空间（.app 文件夹），它可以访问（加上一些特殊的文件夹，如图片库）。您可以通过 访问您的内存份额`[NSUserDefaults sharedDefaults]`。

# java - 使用 XMLUnit 查找两个 XML 文件中的差异

> ID：10998229
> 
> 赞同：1
> 
> 时间：2012-06-12T13:58:20.000
> 
> 标签：java, xmlunit

如何在使用 XMLUnit 的DetailedDiff 函数时仅检查特定节点而不是所有节点的差异

这是我的代码：

```
public static void main(String[] args) 
    {
        //URL url1 = xmlunittest.class.getResource("MSHIS1.xml");
    //  URL url2 = xmlunittest.class.getResource("MSHIS.xml");

        Logger L = new Logger();

        FileReader fr1 = null;
        int countofdifferences = 0;
        FileReader fr2 = null;
        try {
            fr1 = new FileReader("MSHIS.xml");
            fr2 = new FileReader("MSHIS1.xml");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        try {
            Diff diff = new Diff(fr1, fr2);
            L.writeToBVTLOG("Similar? " + diff.similar());
            L.writeToBVTLOG("Identical? " + diff.identical());

            DetailedDiff detDiff = new DetailedDiff(diff);
            List differences = detDiff.getAllDifferences();
            for (Object object : differences) {
                Difference difference = (Difference)object;
                L.writeToBVTLOG("------------------------");
                L.writeToBVTLOG(difference.toString());
                L.writeToBVTLOG("------------------------");

                countofdifferences++;
            }

        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        L.writeToBVTLOG(countofdifferences);
    } 
```

但问题是，我只想让程序告诉我 4 个特定节点是否发生了任何变化。那么如何从列出所有差异中到达那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T14:29:34.910

您可以实现自己的[DifferenceListener](http://xmlunit.sourceforge.net/api/org/custommonkey/xmlunit/DifferenceListener.html)忽略某些节点（或只关注某些节点）并告诉 XMLUnit 在检查差异时使用它。这是一个忽略任何名为“myelement”的元素的DifferenceListener：

```
public class IgnoreMyAttributeElements implements DifferenceListener()
{

      @Override
      public int differenceFound(Difference differenceIn)
      {
         Node controlNode = differenceIn.getControlNodeDetail().getNode();

         if(controlNode.getNodeType() == Node.ELEMENT_NODE)
         {
            if(controlNode.getLocalName().equals("myelement");
            {
               return DifferenceListener.RETURN_IGNORE_DIFFERENCE_NODES_IDENTICAL;
            }
         }

         return DifferenceListener.RETURN_ACCEPT_DIFFERENCE;
      }

      @Override
      public void skippedComparison(Node nodeIn, Node nodeIn2)
      {
         //don't care about these events
      }
} 
```

然后将其传递给DetailedDiff：

```
DetailedDiff diff =  new DetailedDiff(XMLUnit.compareXML(oldXml, newXml));
diff.overrideDifferenceListener(new IgnoreMyAttributeElements());
List<?> allDifferences = diff.getAllDifferences();
//do something with differences 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T01:41:11.000

您可以先转换两个文档`javax.xml.transform.TransformerFactory`，使其仅包含您感兴趣的节点。或者您可以在差异上使用 getControlNodeDetail() 和 getTestNodeDetail() 来查看差异是否适用于您想要的节点。

# android - android 应用程序在使用 3g 连接连接到 web 服务时挂起并且在 WIFI 下工作正常

> ID：10998230
> 
> 赞同：0
> 
> 时间：2012-06-12T13:58:28.170
> 
> 标签：android, web-services, 3g

我正在开发一个使用 web 服务的 android 应用程序，服务输出是 XML

我正在使用此代码连接到 Web 服务

```
public  String converse(String host, int port, String path)
            throws IOException, URISyntaxException {

        BufferedReader in = null;
        String serviceResponse = null ;
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            String serviceUrl = "http://"+host+":"+port+path;
            System.out.println("service url "+serviceUrl);
            request.setURI(new URI(serviceUrl));

            System.out.println("Request "+request.toString());
            HttpResponse response = client.execute(request);

            in = new BufferedReader
            (new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
            in.close();
            serviceResponse  = sb.toString();

            } finally {
            if (in != null) {
                try {
                    in.close();
                    } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
        return serviceResponse;
    } 
```

当应用程序使用 WI-FI 启动时，一切正常，当我使用 3G 连接重新启动应用程序时，它挂起并显示以下对话框 ![android中的等待对话框](../Images/f8791a3f13f85ccbe7833d7ca48d80b9.png)

除了这段代码，我在另一个方法中使用了这个方法

```
public void fillAdapter() {
        //calling web service using the mentioned method
    } 
```

这个函数在异步任务中使用来填充 ListView 适配器

```
protected class AsyncLoading extends AsyncTask<Void,Void, BaseModel[]>{

        @Override 
        protected void onPreExecute(){
            pd =ProgressDialog.show(BaseListActivity.this, "loading in progress", "waiting .");
        }
        @Override
        protected BaseModel[] doInBackground(Void... params) {
            fillAdapter();
            return listItems;

        }
        @Override
        protected void onPostExecute(BaseModel[] doc){
            //list.setAdapter(doc);
            if(doc != null) {
            if(doc.length > 0 ) {
                if(doc[0] instanceof Activity)
                    adapter = new OffersListAdapter(getApplicationContext(),doc);
                else if (doc[0] instanceof Offer)
                    adapter = new OffersListAdapter(getApplicationContext(),doc);
                else if (doc[0] instanceof Branch) {
                    adapter = new BranchListAdapter(getApplicationContext(),doc);
                    Log.i("Branch"," Added Branch");
                }else if (doc[0] instanceof Consolation) {
                    adapter = new ListAdapter(getApplicationContext(),doc);
                    adapter.setDisplayImage(false);
                }else if ( doc[0] instanceof Event) {
                    adapter = new EventListAdapter(getApplicationContext(),doc);

                }
                else
                    adapter = new ListAdapter(getApplicationContext(),doc);

            }//end if doc != null
                list.setAdapter(adapter);

            }
            handler.sendEmptyMessage(0);
        } 
```

我看到了 [这篇文章](https://stackoverflow.com/questions/3497104/application-does-not-work-when-on-3g-on-wifi-works-fine)，但我没有一个好的结果我提前两天在这个问题上工作，在此先感谢。

**注意：这个问题通常在应用程序第一次连接到服务时出现**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:08:42.423

我认为与 Wi-Fi 相比，您的 3G 连接速度较低。因此，请使用[Asynctask](https://stackoverflow.com/questions/9671546/asynctask-android-example)在单独的线程而不是主线程中从服务器加载数据。在获取数据时显示**ProgressDialog是个好主意。**

并且在某些情况下，Apis 将在 Wi-Fi 中工作，并且可能无法在 3G 连接中。所以在设备浏览器中测试您的 url 以使其确认

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:04:35.387

您应该为每个可能需要一些时间才能执行的任务使用 AsyncTask。请参阅[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:04:55.143

我在您的代码中看到的问题是您没有在 Thread 中进行网络操作。因此，如果您在主线程上执行异步操作，如果应用程序在 5 秒内未收到响应，应用程序将显示上述对话框。在您的情况下，3g 连接可能需要超过 5 秒才能返回响应。

最好的办法是在 Thread 中包含上面的代码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T13:34:31.910

我已经解决了这个问题，我有一个闪屏活动，我在其中使用 C2DM 并使用服务在该活动中注册设备

```
 registrationIntent.putExtra("app", PendingIntent.getBroadcast(getApplicationContext(), 0, new Intent(), 0));

        registrationIntent.putExtra("sender", "someemailaddress@gmail.com");
        startService(registrationIntent); 
```

我将此代码放在 asyncTask 中并且没有阻止 UI 感谢每一位试图帮助我的人

# android - 九补丁可绘制与形状可绘制。应该首选哪个？

> ID：10998236
> 
> 赞同：10
> 
> 时间：2012-06-12T13:58:39.043
> 
> 标签：android

我和我的同事并行开发了两个应用程序，每个应用程序都具有相似的样式。这些应用程序的主视图背景是径向渐变。他将他的图像实现为九块图像，而我使用可绘制的形状来实现。两者都产生相似且可接受的结果。

所以我的问题是，我们应该使用哪个？内存消耗和性能之间是否存在权衡？我想图像可能需要一些时间来加载，但可绘制的形状需要更多时间来绘制（由于计算）。然后这些是否存储在缓存中，并且这些惩罚仅在它们第一次显示时发生，或者这些问题是否持续存在？？？

形状可绘制：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <gradient
        android:startColor="#003472"
        android:endColor="#000034"
        android:gradientRadius="350"
        android:type="radial"/>
</shape> 
```

九个补丁：

![在此处输入图像描述](../Images/2bb79557cb8f4f05f34800ebd5ab9b39.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:03:39.450

Shape drawable 非常适合具有简单恒定颜色变化的渐变图像。另一方面，9-patch 图像非常适合具有大量细节、拉伸区域颜色恒定的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T21:10:51.243

刚刚碰到这个问题。

如果您有涉及它的动画，请不要在 XML 中使用形状。原因是缓存（特别是如果您使用硬件加速）会使它看起来真的“滞后”，因为屏幕不会经常刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T02:21:19.237

看看@Ivan Bartsov 给出的答案。但是通过仔细的代码分析，他得出结论，对于大多数一般情况，使用 9 补丁需要的进程比生成的梯度使用更少的内存。因此，在大多数情况下，最好使用 9 个补丁。

看看他对模式细节的回答：[我应该使用什么来获得更好的性能、九个补丁或可绘制的 xml 资源？](https://stackoverflow.com/questions/18073505/what-should-i-use-for-better-performance-nine-patch-or-drawable-xml-resource)

# java - Jersey REST 服务作为 Spring 组件

> ID：10998241
> 
> 赞同：5
> 
> 时间：2012-06-12T13:58:44.337
> 
> 标签：java, rest, service, jersey

我的应用程序中有一个休息服务，我希望它使用弹簧豆。我使用的 Spring 是 2.5 版。web.xml 的一部分：

```
<servlet>
    <servlet-name>jersey-servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.app.rest</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

在 pom.xml 我有依赖项：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.8</version>
</dependency>
<dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.8</version>
</dependency> 
```

在 context.xml 我添加了：

```
<context:component-scan base-package="com.app.rest"/> 
```

并且：

```
<tx:annotation-driven proxy-target-class="true" /> 
```

服务类的有趣部分：

```
@Component
@Path("/notification")
@Scope("singleton")
public class PushNotification {

    @Autowired
    //@Resource(name = "sendMessageServiceFacade")
    private SendMessageServiceFacade sendMessageServiceFacade;

    @Autowired
    //@Resource(name = "responseCode")
    private NotificationResponseMessage responseCode;

    @Autowired
    //@Resource(name = "validator")
    private PushMessagePreValidator validator;

    @POST
    @Path("/register")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response registerDevice(PushWooshRegisterDeviceDto dto) {
        if (validator.validate(dto) == 200) {
            return invokePushMessage(dto, PushMessageType.REGISTER.getMsgType());
        } else {
            return buildFailResponse();
        }
    }

    @GET
    @Path("/{param}")
    public Response ping(@PathParam("param") String param) {
        return Response.status(200).entity(param).build();
    } 
```

GET 方法按预期工作（基本上它工作:)），但 POST 方法在线抛出 NullPointerException：if (validator.validate(dto) == 200)。

我不知道为什么@Autowired 注释在这里不起作用，我尝试使用@Resource - 效果相同。

任何提示都可能有所帮助。

在此先感谢，马雷克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:22:50.380

如果您想将 Jersey 与 Spring 一起使用，则需要使用 Spring 集成模块 - 即依赖 jersey-spring 并使用 SpringServlet 而不是 Jersey ServletContainer servlet 类。有关更多信息，请参见此处：http: [//jersey.java.net/nonav/apidocs/latest/contribs/jersey-spring/com/sun/jersey/spi/spring/container/servlet/package-summary.html](http://jersey.java.net/nonav/apidocs/latest/contribs/jersey-spring/com/sun/jersey/spi/spring/container/servlet/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:06:29.003

如果您实现了*org.springframework.validation.Validator*接口，您应该看到*validate*方法需要两个参数，即*Object*类型和*Errors*类型，因此您需要在*validate*调用中添加另一个类

```
BeanPropertyBindingResult v = new BeanPropertyBindingResult(dto,"Errors");
validator.validate(dto, v); 
```

# iphone - 拖动uibutton时如何应用缩放动画？

> ID：10998248
> 
> 赞同：0
> 
> 时间：2012-06-12T13:59:03.713
> 
> 标签：iphone, animation, uiview, uibutton, drag

我想将缩放动画应用于 UIButton。当用户将按钮拖到屏幕上方时，缩放会减小，而当向下拖动到屏幕缩放时，UIButton 会增加。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:07:46.573

看看 CGAffineTransform。在您的拖动代码中，只需根据视图的 y 坐标设置比例。

# asp.net - 使用 file:// 在 GridView 中使用 HyperLink 打开资源管理器

> ID：10998249
> 
> 赞同：3
> 
> 时间：2012-06-12T13:59:05.787
> 
> 标签：asp.net

我正在尝试在客户端打开资源管理器以查看目录。在我的 aspx 网络表单中，我有一个 gridview，它有一列超链接。在 aspx 标记中，我有以下内容：

```
<asp:HyperLink Text="ICPnt" id="MyDir" runat="server" Target="_blank" NavigateUrl='<%# "file://" + Eval("MyDir").ToString() %>' ></asp:HyperLink> 
```

当使用 Visual Studio 在调试模式下启动 asp.net 应用程序并将光标移到超链接上时，我看到了弹出路径，

```
file://MachineName/C$/WINNT/MyDir 
```

这看起来是正确的。当我单击超链接时，什么都没有发生。我什至没有看到光标变成沙漏图标或任何东西。我想我已经很接近了，但看不到缺少的步骤或错误。

另一个测试：

我`file://MachineName/C$/WINNT/MyDir`在 Windows 和 Internet Explorer 中都输入了内容，并得到了一个新的资源管理器来弹出并显示我的 VM 环境中的目录内容。作为测试，我将完全相同的 file:// 路径复制并粘贴到我的 aspx 标记中并再次测试。当我点击它时，什么也没有发生。

```
<asp:HyperLink Text="ICPnt" id="WSM2MDir" runat="server" Target="_blank" NavigateUrl='<%# "file://MachineName/C$/WINNT/MyDir" %>' ></asp:HyperLink> 
```

任何帮助表示赞赏。谢谢

# iphone - 出现时放大网页视图

> ID：10998252
> 
> 赞同：3
> 
> 时间：2012-06-12T13:59:11.690
> 
> 标签：iphone, ios, xcode, uiwebview, zooming

我有一个 UIWebView 加载一个以横向格式设置的 PDF 并且很难在 iPhone 屏幕上阅读。我的代码是这样的：

```
- (void)viewWillAppear:(BOOL)animated {
NSURL *url = [NSURL URLWithString:_entry.articleUrl];   
NSLog(@"%@",url);
[_webView loadRequest:[NSURLRequest requestWithURL:url]];
self.title = _entry.articleTitle;
timer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(tick) userInfo:nil repeats:YES];

} 
```

有哪些方法可以将其设置为放大更多并可能移至顶部 pdf 页面的右侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:28:06.493

首先确保您的 UIWebView 启用了 scalesPageToFit 属性

```
self.myWebView.scalesPageToFit = YES; 
```

然后在您的 HTML 中，在“head”标签内添加此标签

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"> 
```

你可以让**maximum-scale=1.5**如果这会让它看起来更好。

我不确定它是否是 PDF 文件，如何将这些标签添加到其中。也许您可以添加标签并在 html 文件中实现 PDF。

这是在 HTML 中嵌入 PDF 文件的方法

```
<embed src="filename.pdf" width="500" height="375"> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:30:27.147

在 IOS 版本小于 5 中：

```
 UIScrollView *sv = [[_webView subviews] objectAtIndex:0];
 [sv setZoomScale:2.0 animated:NO];// increase scale factor to zoom more 
```

在 IOS 5 中：

```
 [_webView.scrollView setZoomScale:2.0 animated:NO];// increase scale factor to zoom more 
```

您可以使用**内容偏移量**移动到右上角

# javascript - Twitter Bootstrap：数据属性和编程 API 之间的性能比较？

> ID：10998253
> 
> 赞同：5
> 
> 时间：2012-06-12T13:59:16.207
> 
> 标签：javascript, dom, twitter-bootstrap

据此[，](http://twitter.github.com/bootstrap/javascript.html)数据属性 API 并不总是性能最高的。
您是否注意到从数据属性切换到程序化 api 的显着改进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:00:27.740

我试过

```
$(document).ready(function() {
  $('body').off('.data-api');
}); 
```

在此处下载的 javascript.html（调用所有 javascript 插件的地方）：[https ://github.com/twitter/bootstrap/zipball/master](https://github.com/twitter/bootstrap/zipball/master)

**数据 API 关闭：**

有 16026 次调用，需要 226.998 毫秒

![基准 twitter bootstrap data-api 关闭](../Images/560f1d5bf322f1cd6627cd50442564ff.png)

**data-api on（原始文件）：**

相同数量的呼叫，大约需要相同的时间

![在此处输入图像描述](../Images/ef0395213e970e6f3bab2fb5bc3b7579.png)

**结论**

尽管页面包含所有 twitter bootstrap jquery 插件，但差异很小。

我认为这绝对是一个好的实践问题，而不是性能方面的大优化。

# python - 获取protobuf消息的父消息（在python中）

> ID：10998254
> 
> 赞同：4
> 
> 时间：2012-06-12T13:59:18.840
> 
> 标签：python, protocol-buffers

是否有任何官方支持的方式来获取 Python 中给定 ProtoBuf 消息的父消息？Python protobuf 接口的设计方式，我们保证每条消息最多有一个父消息。如果能够在不构建外部索引的情况下从消息导航到其父级，那就太好了。

显然，此信息存在，我可以使用以下代码获取指向任何给定消息的父级的弱指针：

```
>>> my_parent = my_message._listener._parent_message_weakref 
```

但是，这使用了内部属性——如果可能的话，我更愿意使用官方支持的方法。

如果没有官方支持的方法来做到这一点，那么我需要决定是构建一个外部子→父索引（这可能会损害性能），还是使用这种“hackish”方法（适当地包装）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:42:10.490

在进一步研究（阅读源代码）之后，很明显在 Python 中没有官方支持的方式来执行此操作。

# javascript - 哪个“控制器”以 JSON 格式转换来自 .NET WebService 的 XML 响应？

> ID：10998260
> 
> 赞同：0
> 
> 时间：2012-06-12T13:59:41.487
> 
> 标签：javascript, .net, xml, json, web-services

.NET 中的 Web 服务（asmx，还有 wcf）使用 XML 作为信息的模式（由于 Saop 协议）。

但在客户端，在 Web 服务方法调用之后：

```
WebService.myOwnMethod("string", function (result) {
    console.log(result.Name);
}); 
```

我可以将结果作为 Javascript 对象进行管理。所以我认为有从 XML 到 JSON 的转换？或者直接将 XML 转为 Js 对象。

那么，是谁进行了这种解析呢？脚本管理器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:21:02.453

您可以使用 ResponseFormat 以 JSON 格式发送数据，例如：

```
[WebMethod(Description = "Description of your web method")]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public returntype YourMethodName()
{
} 
```

如果您的 Web 服务方法的 responseformat 设置为 json，它将以 json 格式返回数据。

# c# - 在 C# 中，是否有一种简单的方法来格式化字符串以包含边距？

> ID：10998262
> 
> 赞同：0
> 
> 时间：2012-06-12T13:59:59.373
> 
> 标签：c#, string-formatting

> **可能重复：**
> [Word wrap aa string in multiple lines](https://stackoverflow.com/questions/3961278/word-wrap-a-a-string-in-multiple-lines)

我的第一个猜测是我必须自己做，但我想我会要求确保没有任何内置库。我有一个字符串/段落，我想输出到一个简单的文本文件。但是，我希望左边距中有这么多空格（准确地说是 23 个），而且我不希望单行超过 80 个字符。基本上，代码会将 23 个字符添加到每行的开头，然后在每 80 个字符之后添加新行。最难的部分是添加新行，因为我不想在单词中间添加新行。我一个人在这里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:14:03.597

[在这里查看左右填充示例](http://www.dotnetperls.com/string-format)

# java - JarSplice 的命令行参数？

> ID：10998264
> 
> 赞同：2
> 
> 时间：2012-06-12T14:00:07.627
> 
> 标签：java, jar

[JarSplice](http://ninjacave.com/jarsplice)允许将 jar 文件和其他依赖项和库聚合到一个可执行的 jar 文件中。

但是，我的可执行 jar 需要两个命令行参数，当我调用 JarSplice jar 时，它们似乎根本没有传递。

我在网站上没有看到任何关于如何做到这一点的内容，或者是否有可能。好奇是否有人遇到过这个问题，或者找到了可能的解决方案。

**更新**

我还应该补充一点，我的主类是在 JarSplice 设置中指定的，并且被成功调用。但是，如果我调用 java -jar myjar.jar param1 param2，然后尝试打印 param1 和 param2，它们为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:19:25.933

我很害怕，这个工具有一些严重的缺陷。

它不仅将您的*Main-Class*设置在*fat.jar* `MANIFEST.MF`中，还将它自己的设置`org.ninjacave.jarsplice.core.JarSpliceLauncher`为*Main-Class*。

然后，当您启动*fat.jar*（使用`java -jar fat.jar`）时，该类使用 a`JarSpliceLauncher`启动一个**新进程**`ProcesBuilder`，并且不向其传递任何额外参数。

[对我来说，它只是JarSplice](http://ninjacave.com/jarsplice)中的一个错误/糟糕的设计。

现在，解决方法是将您的实际*Main-Class*传递给`java`可执行文件，如下所示：

```
java -cp fat.jar org.myawesomeapp.MyAwesomeClass [params....] 
```

此外，还有其他（*更好*的）选项：

1.  阅读有关[Maven 程序集插件的信息，它是`jar-with-dependencies`描述符](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)。
2.  在 Eclipse 中，您可以使用*Export* => *Runnable JAR* => Select *Extract required libraries into generated JAR*。

# c++ - 无法使用 x86 g++ 编译 x64 LD_PRELOAD

> ID：10998267
> 
> 赞同：0
> 
> 时间：2012-06-12T14:00:16.707
> 
> 标签：c++, compilation, g++

我的命令有什么问题？我想在 x86 g++ 上编译 x64 ld_preload，命令：

> g++ -fPIC -m64 -shared -Wl,-soname,test.so -ldl -o test.so test.cpp

错误

> 在 /usr/include/c++/4.4/bits/stl_tree.h:62、/usr/include/c++/4.4/set:60、test.cpp:17 中包含的文件中：/usr/include/c++/4.4 /bits/stl_algobase.h:60：致命错误：bits/c++config.h：没有此类文件或目录编译终止。make: *** [test.so] 错误 1

17行测试.cpp

```
#include <set> 
```

安装包 g++-multilib。

**更新**

文件搜索：

```
#include <...> search starts here:
 /usr/include/c++/4.4
 /usr/include/c++/4.4/backward
 /usr/local/include
 /usr/lib/gcc/i686-linux-gnu/4.4.5/include
 /usr/lib/gcc/i686-linux-gnu/4.4.5/include-fixed
 /usr/include/x86_64-linux-gnu
 /usr/include 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:50:07.193

`bits/c++config.h`GNU C++ 库中的文件依赖于体系结构。

32位版本在

```
 /usr/include/c++/4.4/i486-linux-gnu/bits/c++config.h 
```

或类似的取决于分布。

在 32 位平台上，64 位版本在

```
 /usr/include/c++/4.4/i486-linux-gnu/64/bits/c++config.h 
```

**编辑**

要检查搜索了哪些目录，请键入：

```
$ g++ -m64 -c -v test.cpp 
```

它应该报告类似

```
Using built-in specs.
Target: i486-linux-gnu
...
#include <...> search starts here:
 /usr/include/c++/4.4
 /usr/include/c++/4.4/i486-linux-gnu/64
 /usr/include/c++/4.4/backward
 /usr/local/include
 /usr/lib/gcc/i486-linux-gnu/4.4.1/include
 /usr/lib/gcc/i486-linux-gnu/4.4.1/include-fixed
 /usr/include/x86_64-linux-gnu
 /usr/include 
```

你需要检查是否

```
 /usr/include/c++/4.4/i486-linux-gnu/64 
```

在名单上。

还要检查文件

```
/usr/include/c++/4.4/i486-linux-gnu/64/bits/c++config.h 
```

存在。

# c# - 向从接口继承的类添加方法

> ID：10998270
> 
> 赞同：0
> 
> 时间：2012-06-12T14:00:27.017
> 
> 标签：c#, c#-4.0

这是 .NET 4.0/C#。我有一个从接口继承的类：

```
public class DocumentModel : IDocumentObject
{
     //this is not in the interface and wont ever be
     public void NewMethod(){//my code}
} 
```

在我的`DocumentModel`课程中，我添加了一个不属于接口的公共方法。当我调用它时，

```
var doc = new DocumentModel();
doc.NewMethod(); 
```

我得到以下信息：

> 错误 30“IDocumentObject”不包含“NewMethod”的定义，并且没有
> 扩展方法“NewMethod”接受“IDocumentObject”类型的第一个参数

如何向我的类中添加不在接口中的方法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:04:48.200

使用显式类型“DocumentModel”而不是`var` 在创建 DocumentModel 类的对象时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T14:02:37.243

在接口中添加方法声明。

```
public interface IDocumentObject
{
void NewMethod();
} 
```

或者，如果您不希望在接口中使用它，则必须创建类类型而不是接口类型的类的实例。

```
DocumentModel doc = new DocumentModel(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:11:50.647

Romil 所说的可能会有所帮助，但下面的代码按原样运行。显式声明您的类型将有助于编译器确定正确的类型。使用`var`决定变量编译器的类型，它可能会将其键入为接口，而不是具体类。[您可以在ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)之类的反汇编程序中查看您的输出程序集，看看实际发生了什么。

```
using System;
using System.Collections.Generic;

interface iDoc
{

}

class doc : iDoc
{
    public void meth()
    {
        Console.WriteLine("asdf");
    }
}
public class MyClass
{
    public static void Main()
    {
        var d = new doc();
        d.meth();
        Console.ReadLine();
    }
} 
```

作为进一步的示例，如果您将变量的类型显式声明为接口，您仍然可以将其转换回其具体类型并调用如下所示的方法。

```
iDoc d = new doc();
((doc)d).meth(); 
```

# javascript - 这个预加载器有效吗？它不用于显示状态，只是加快可能的图像加载以供以后使用

> ID：10998273
> 
> 赞同：0
> 
> 时间：2012-06-12T14:00:31.400
> 
> 标签：javascript, jquery, html, image, preloader

我一直在阅读处理网站图像的最佳方法（当用户单击元素时循环显示图像），并且似乎预加载器是有利的。

假设您可以取出预加载器，并且当前设置将简单地将 image1 从数组中插入到 div 中，预加载器是否通过在开始时包含所有潜在的 HTML 请求来工作，因此减少了以后的潜在加载时间，或者这是一个无用的实现正如它所写的那样？

我真的应该从 中获取图像`imageObj`吗`.append(...)`？

-注意 - 我知道我实际上只允许按原样调用 image1，但这只是一种练习。

# HTML

```
<body>
    <a href='#' id="image1">
    Click for image 1
    </a>
    <hr/>
    <a href='#' id="image2">
    Click for image 2
    </a>
    <hr/>
    <a href='#' id="image3">
    Click for image 3
    </a>
    <hr/>
    <a href='#' id="image4">
    Click for image 4
    </a>
    <div id="image">
    </div>
</body> 
```

# JavaScript/jQuery

```
// JavaScript Document

function preloader() 
{
    var i = 0;

    imageObj = new Image();

    images = new Array();
    images[0]="images/image1.jpg"
    images[1]="images/image2.jpg"
    images[2]="images/image3.jpg"
    images[3]="images/image4.jpg"

    for(i=0; i<=3; i++) 
    {
        imageObj.src=images[i];
    }
}

$(document).ready(function(){

    preloader();

    $('#image1').click(function(){
        alert("Handler for #image1 .click() called.");
        $('#image').append('<img id="theImg" src=' + images[0] + ' />');
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:06:19.850

此代码的效果是“触摸”每个可能的图像，以便将其加载到您的缓存中，而不是加载到您的 DOM 中（如果有意义的话）。

> 我真的应该从 .append(...) 中的 imageObj 获取图像吗？

不，那部分只是强制 get 将图像预加载到浏览器缓存中。请注意它是如何在循环中几乎立即被覆盖的。

如果您想要极快的加载速度，那么还可以考虑让您的图像来自多个子域或 CDN。

# ruby-on-rails - 根据登录时的用户类型重定向用户

> ID：10998277
> 
> 赞同：1
> 
> 时间：2012-06-12T14:00:54.210
> 
> 标签：ruby-on-rails, session, redirect

我有两个控制器：管理员和客户，还有一个用于处理登录和身份验证的调用会话。我正在尝试使用一种登录表单，以便当管理员登录时，他们会被重定向到他们所在的网站部分，如果客户登录，他们会被带到他们的部分。

编辑：将参数更改为通过电子邮件登录，但现在当我尝试以客户身份登录时出现错误 No route matches {:action=>"show", :controller=>"customers"} :S!!

代码：

```
class SessionsController < ApplicationController

 def new
 end

 def create
   user = User.find_by_email(params[:email])
   customer = Customer.find_by_email(params[:email])

   if user and user.authenticate(params[:password])
     session[:user_id] = user.id
     redirect_to admin_url

   elsif customer and customer.authenticate(params[:password])
     session[:customer_id] = customer.id
     redirect to customer_url  

   else
     redirect_to login_url, alert: "Invalid user/password combination"
 end

end

 def destroy
   session[:user_id] = nil
   session[:customer_id] = nil
   redirect_to store_url, notice: "Logged out"
 end
end 
```

登录页面的代码（存储在 app/sessions/new.html.erb 中）：

```
<div class="depot_form">
<% if flash[:alert] %>
    <p id="notice"><%= flash[:alert] %></p>
<% end %>

<%= form_tag do %>
<fieldset>
    <legend>Please Log In</legend>

    <div>
        <%= label_tag :email, 'Email:' %>
        <%= text_field_tag :email, params[:email] %>
    </div>

    <div>
        <%= label_tag :password, 'Password:' %>
        <%= password_field_tag :password, params[:password] %>
    </div>

    <div>
        <%= submit_tag "Login" %>
    </div>
</fieldset>
 <% end %>
</div> 
```

另外，如果相关，我在 config/routes 文件中有这个：

```
controller :sessions do
   get  'login' => :new
   post 'login' => :create
  delete 'logout' => :destroy
end 
```

编辑：将参数更改为通过电子邮件登录，但现在当我尝试以客户身份登录时出现错误 No route matches {:action=>"show", :controller=>"customers"} :S!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:20:16.697

问题是你`params[:email]`根本不存在！尝试使用`params[:name]`，并希望您的客户知道他必须将他的电子邮件写入姓名字段。

```
user = User.find_by_name(params[:name])
customer = Customer.find_by_email(params[:name]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:21:11.877

如果您只有一个登录表单，则用户名/电子邮件的输入将在 params 哈希中结束

```
params[:email] 
```

或者

```
params[:name] 
```

但看起来 params[:email] 不存在，因为您只使用一种形式。由于您可以成功地以管理员身份进行身份验证，我猜想用户名的输入标题为“名称”，因此在您的参数哈希中，当您以客户身份进行身份验证时，您的身份验证针对

```
params[:name] #this is what I think the input on the form is named 
```

代替

```
params[:email]  #which is what it looks like your code is looking for. 
```

你可以发布视图代码吗？

# django - Postgres chocking on specific input

> ID：10998280
> 
> 赞同：0
> 
> 时间：2012-06-12T14:00:59.480
> 
> 标签：django, postgresql, unicode

I have a multi-lingual Django/Postgres-based app that fails on the following input (sanitized):

```
STATEMENT:  INSERT INTO "main_model" ("a_id", "b", "c", "d", "text", "f", "g", "h")
  VALUES (1, 2, 'c', 'd', '...nahlá<U+009A>ení ... nahla<U+009A>ování...', 'f', 'g', 'h')
  RETURNING "main_model"."id"
ERROR:  current transaction is aborted, commands ignored until end of transaction block 
```

The `text` strings are in unicode, and it appears postgres is chocking on it. This is one example, but this is happening on several other languages as well.

Is there a better way to understand what the exact error on this statement is?

Is there any sanitation I need to do on the unicode strings before throwing them on the DB?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:46:14.173

I stumbled onto [https://stackoverflow.com/a/10437521/24545](https://stackoverflow.com/a/10437521/24545)

The lesson learned from this issue is to ensure there are no errors that are caught and not handled.

In my case I had a try/except block that was hiding a real error, and the next time it came up was a transaction error in postgres.

# android - android 2.3.3 和 4.x 在运行动画时似乎有不同的效果

> ID：10998281
> 
> 赞同：1
> 
> 时间：2012-06-12T14:00:59.343
> 
> 标签：android, animation

我的问题是：

我自定义了一个如下 JPTabBarMainMenu 的视图，将其设置为列表视图标题的一部分。在 JPTabBarMainMenu 中有两个按钮，当我单击两个按钮之一时动画会运行。

问题是动画在 android 2.3.3 上运行得很好，但不会在 4.0.3 和 4.0.4 上运行，我猜它不会在 4.x 上运行。我不知道原因。

```
JPTabBarMainMenu  extends FrameLayout{ 
```

代码如下：

```
onAnimationStart/onAnimationRepeat/onAnimationEnd won't getting called.

 FrameLayout.LayoutParams params = (LayoutParams) mSlider.getLayoutParams();

            JPTranslateAnimation slideRightAnimation = new MaringTranslateTranslateAnimation(params.leftMargin, tabItem.getLeft() + offset / 2, 0, 0, mSlider);
            slideRightAnimation.setDuration(slideRightAnimation.computeDuration(
                    JPTranslateAnimation.ANIMATION_STD_DURATION, mTabLayout.getWidth()));
            slideRightAnimation.setRepeatCount(0);
            slideRightAnimation.setFillAfter(true);
            slideRightAnimation.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub
                    isRunningAnimation = true;
                    if(mSelectionChangedListener != null){
                        mSelectionChangedListener.onSelectionChangedStart(oldIndex, mCurrentTab);
                    }

                    if(oldIndex != -1){
                        TabItem item = mTabItems.get(oldIndex);
                        item.onTabItemSelected(false);
                    }
                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    // TODO Auto-generated method stub
                    isRunningAnimation = false;

                    if(mSelectionChangedListener != null){
                        mSelectionChangedListener.onSelectioinChangedEnd(oldIndex, mCurrentTab);
                    }

                    TabItem item = mTabItems.get(mCurrentTab);
                    item.onTabItemSelected(true);

                    if(mDrawSelectorByDefault == false){
                        mSlider.setVisibility(View.INVISIBLE);
                    }

                }
            });
            if(mSlider.getVisibility() != View.VISIBLE){
                mSlider.setVisibility(View.VISIBLE);
            }
            mSlider.startAnimation(slideRightAnimation); 
```

# r - 为矢量对象创建帮助文件

> ID：10998282
> 
> 赞同：0
> 
> 时间：2012-06-12T14:01:02.603
> 
> 标签：r, vector, package, prompt

我在 Mac OS X（英特尔，64 位）上使用 R 版本 2.15.0。当我应用于向量对象时，除非我指定参数`prompt`，否则它会引发错误。`file`此外，当我确实提供了一个文件名时，帮助文件框架中有一些奇怪的地方（例如，许多\name、\alias 和\usage 命令，一个用于向量的每个元素）。这些是指定向量时提示的预期结果吗？复制问题的示例命令：

```
> COL <- rgb(1:4 / 4, 4:1 / 4, c(1, 0, 1, 0))
> prompt(COL)
Error in file(file, ifelse(append, "a", "w")) : 
  invalid 'description' argument
In addition: Warning messages:
1: In if (is.na(filename)) return(Rdtxt) :
  the condition has length > 1 and only the first element will be used
2: In if (file == "") file <- stdout() else if (substring(file, 1L,  :
  the condition has length > 1 and only the first element will be used
3: In if (substring(file, 1L, 1L) == "|") { :
  the condition has length > 1 and only the first element will be used
> prompt(COL, file="COL.Rd")
Created file named ‘COL.Rd’.
Edit the file and move it to the appropriate directory. 
```

另一个奇怪的组件：在我的机器上运行 32 位 R 并加载到包中时，R 将无法正确加载并允许从包中访问矢量对象（即它抛出错误：）`Error: internal error -3 in R_decompress1`。但是，当我直接加载 .rda 对象时，在 R 32 位中一切正常。在 64 位机器上运行 R 32 位时是否会出现此类问题/不一致？

编辑：还有一个问题。关于默认情况下如何在 R 64 位中打开`.R`和打开文件的任何想法？`.rda`“获取信息”技巧不起作用......单击“全部更改”时，它会恢复为默认的 R 32 位。这似乎是某些文件类型的问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:54:58.210

正如保罗所说，下次分开你的问题。

关于`prompt`功能：

*   如果不指定 anthing，则文件名设置为`NULL`，默认行为是对象本身用于创建文件名。当您传递一个向量时，该函数将其视为对象向量，因此会创建一个名称向量。这给出了错误信息。

*   如果要记录矢量对象，请改用参数`name`，例如：`prompt(name="COL")`. 这会给你想要的行为

*   如果你想查看一个列表，`?prompt`告诉你应该指定`filename=NA`. 输出将改为控制台。

默认情况下以 64 位打开 .R 和 .rda 文件取决于操作系统。在 Windows 中，您可以执行此操作，例如通过控制面板 > 默认程序 > 设置关联，然后将关联设置为 R 的 64 位二进制文​​件（可在 ...\R\R-2.15.0\bin\x64 中找到） .

如果没有进一步的细节，第二个问题是不可能回答的。我建议您弄清楚如何重现该问题（请参阅[此问题](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)）并在新问题中提出

# php - 验证网站的 API

> ID：10998283
> 
> 赞同：0
> 
> 时间：2012-06-12T14:01:02.777
> 
> 标签：php, javascript, api, validation, web

我是这方面的新手，这可能是一个简单的问题。但我想验证 API 是否来自网站。

因此，我是一家拥有自己网站的公司的经销商。所有用户都通过我的网站在主要公司的网站上注册，这意味着用户名/密码与公司的网站相关联。现在，我的网站上有一些东西，我只想向注册用户展示。此外，我有 API 来检查任何用户的用户名和密码组合，作为回报，我在 (file_get_contents) 的帮助下得到类似于以下消息：

如果成功：

```
***<?xml version="1.0" ?> 
  <!DOCTYPE ValidateUser (View Source for full doctype...)> 
- <ValidateUser>
  <Customer>james</Customer> 
  <Result>Success</Result> 
  </ValidateUser>*** 
```

或者如果失败，则：

```
***<?xml version="1.0" ?> 
  <!DOCTYPE ValidateUser (View Source for full doctype...)> 
- <ValidateUser>
  <Customer>james</Customer> 
  <Result>Failed</Result> 
  <Reason>User/Password combination unknown</Reason> 
  </ValidateUser>*** 
```

情况就是这样。我正在考虑编写一个带有 if 语句的 php 代码，它可以检查或验证上述消息是否来自 API 请求，基于此我可以允许或拒绝用户访问我网站上的特定页面。

希望它对你有意义。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:20:14.833

看看[PHP SimpleXML](http://www.php.net/manual/en/simplexml.examples-basic.php)。使用它进行解析应该相当容易。

一些类似于以下的代码应该可以解决问题：

```
$result = file_get_contents('http://www.example.com/validate?username=john&pwd=mypwdhash');
$simpleXML = new SimpleXMLElement($result);

if ($simpleXML->ValidateUser[0]->Result == "Success"){
   // success
} else{
  // fail
} 
```

或者，您可以只在 XML 字符串中搜索单词“success”。

附带说明：使用这种方法对用户进行身份验证并不那么安全，因为它涉及 GET 请求，其中您提到了用户名和密码哈希（我假设您确实使用密码哈希而不是明文密码，对吗？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:53:54.943

您可能不想听到这个 - 但这种共享密码的方法确实不是相关第三方网站提供的一个很好的设置。这实质上意味着用户正在为其他站点输入密码给您（如果我没记错的话，是第三方）。如果您可以通过身份验证访问您身边的用户数据，他们可能应该为此使用 openAuth (http://www.oauth.net) 而不是共享密码...

我不一定说你应该告诉他们（因为它可能会让你付出代价），但我会考虑一下。如果他们的侧手指存在安全漏洞，则可能会指向您，因为您可以访问某些密码。

# php - php sql 多重搜索

> ID：10998286
> 
> 赞同：0
> 
> 时间：2012-06-12T14:01:06.627
> 
> 标签：php, sql, search

我想编写一个可以搜索由一列分隔的多个关键字的php代码。目前，我的代码可以准确地处理特定的单个关键字。还; 我应该在 SQL 表中进行哪些更改？

```
<?php
include('db.php');
if($_POST)
{
$q=$_POST['searchword'];
$sql_res = mysql_query("SELECT tag_id, tag_name FROM ttl_tags WHERE tag_name like '%$q%' ORDER BY tag_id LIMIT 5");
while($row=mysql_fetch_array($sql_res))
{
$tagid=$row['tag_id'];
$tagname=$row['tag_name'];
$re_tagname='<b>'.$q.'</b>';
$final_tagname = str_ireplace($q, $re_tagname, $tagname);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:04:07.437

如果我没看错你的问题，你想在一列中搜索多个关键字吗？如果是这样，您可以这样做：

```
 $sql_res = mysql_query("SELECT tag_id, tag_name FROM ttl_tags 
            WHERE tag_name like '%$q%' OR tag_name like 'ANOTHER_PARAMETER'  
            ORDER BY tag_id LIMIT 5"); 
```

您可以放置​​任意数量的“OR”。

# c# - XNA 相机场景大小

> ID：10998288
> 
> 赞同：0
> 
> 时间：2012-06-12T14:01:13.950
> 
> 标签：c#, xna

我似乎无法弄清楚这一点。因此，相机正在观察世界，例如位于 (0,0,0) 的 (0,0,5.0f)。假设屏幕分辨率为 800x600。现在，由于世界的中心是 (0,0,0) 相机可见的极值点（比如在 x 轴上，右侧）是什么？

如果相机定位在 (0,0,50.0f)，值会是多少？基本上，我该如何解决这个问题？

```
+-------------------+
|         |         |
|         |         |
|         |         |
+---------+---------¤ <-- what's the x-value of this point?
|         |         |
|         |         |
|         |         |
+-------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:23:55.797

如果我正确理解了这个问题，您想知道屏幕右中心点的世界空间位置吗？

这实际上在 XNA 中很容易做到（感谢 MS！），您可以使用视口类将屏幕空间位置“取消投影”到世界空间。

基本上，游戏中绘制的每个像素都会经过一些转换，以将其转换为可以在我们的 2D 显示器上绘制的 2D 图像，您也可以反向运行这些转换，XNA 有一个方法可以做到这一点。

```
Vector3 screenLocation = new Vector3(GraphicsDevice.Viewport.Width, GraphicsDevice.Viewport.Height / 2, 0);
Vector3 worldLocation = GraphicsDevice.Viewport.Unproject(screenLocation, camera.ProjectionMatrix, camera.ViewMatrix, camera.WorldMatrix); 
```

编辑：

如果您想查看相机视图中的对象是否可以被绘制，您可以使用边界平截头体进行测试。

```
BoundingFrustum frustum = new BoundingFrustum(camera.WorldViewProjectionMatrix); 
```

frustum 包含一个名为 Intersects 的方法，它有很多覆盖来测试诸如边界框之类的东西是否在 frustum 内。

# c# - 法语字符被转换为 © 符号

> ID：10998289
> 
> 赞同：1
> 
> 时间：2012-06-12T14:01:14.583
> 
> 标签：c#, encoding, smtp, html-email

我正在尝试通过 C# 中的 SMTP 发送邮件。

邮件内容示例 [法语]：

```
<html xmlns='http://www.w3.org/1999/xhtml'><head> <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' /><body>
Votre compte à été activé
</body></html> 
```

收到的邮件 : Votre compte Ã Ã©tÃ© activÃ©

谁能帮助我为什么显示版权标志的邮件内容代替了法语字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T11:17:14.453

请确保您传递的字符串与您在此处打印的 "Votre compte à été activé" 相同，并且使用 UTF-8 很好，它可以显示任何类型的字符，但您需要确保它与您选择的其他地方相同首先保存正确。

如果您从 sql 数据库中选择它，则必须使用 nvarchar 数据类型来存储任何类型的字符。如果它是 varchar 它会引发同样的问题。

# php - 代码点火器在控制器末尾加载视图

> ID：10998293
> 
> 赞同：2
> 
> 时间：2012-06-12T14:01:30.420
> 
> 标签：php, codeigniter

在 Ci 上，您可以直接从控制器的构造函数加载视图，我正在加载页面的页眉和页脚（因为每个函数都相同）

```
class Add extends CI_Controller{
    public function __construct()
    {
        parent::__construct();
        $this->load->helper('url');
        $this->load->view('header_view');
        $this->load->view('footer_view');       
    }

    function whatever()
    {
        //do stuff
    }

 } 
```

但这会在加载我的函数之前加载页脚视图，那么有没有办法在每个函数末尾“手动”加载视图的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:12:14.483

我会在主视图中添加页眉/页脚和数据，或者使用模板库（我使用这个[）](http://williamsconcepts.com/ci/codeigniter/libraries/template/)。

如果在功能的主视图中；

```
// in view for html page
<?php $this->load->view('header'); ?>
<h1>My Page</h1>
<?php $this->load->view('footer'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:12:08.590

您不应该在构造函数中呈现任何视图。CI 控制器应该看起来更像这样：

```
class Add extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->helper('url'); 
    }

     function index()
     {
        $this->load->view('header_view');
        $this->load->view('home_page');
        $this->load->view('footer_view');
     }

     function whatever()
     {
        /*
         * Some logic stuff
         */

        $data_for_view = array(
            'product' => 'thing',
            'foo'     => 'bar'
        );

        $this->load->view('header_view');
        $this->load->view('show_other_stuff', $data_for_view);
        $this->load->view('footer_view');
     }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T00:47:33.807

我想出了这种方法：

```
 class Add extends CI_Controller{
    public function __construct()
    {
        parent::__construct();

        // load some static
        $this->data['page_footer'] = $this->common_model->get_footer();

    }
    private function view_loader () {
        //decide what to load based on local environment
        if(isset($_SESSION['user'])){
            $this->load->view('profile_view',  $this->data);
        } else {
             $this->load->view('unlogged_view',  $this->data);
        }
    }

    function index()
    {
        $this->data['page_content'] = $this->profile_model->do_stuff();

        // call once in every function. this is the only thing to repeat.
        $this->view_loader();
    }

  } 
```

# jquery - jQuery淡入淡出效果不流畅？

> ID：10998299
> 
> 赞同：0
> 
> 时间：2012-06-12T14:01:48.827
> 
> 标签：jquery, fadein, fadeout

我正在尝试使用 jQuery 淡化数组中的一些文本，但我注意到效果并不总是平滑 - 有时数组中的一个项目会比另一个项目停留的时间更长，有时淡化会很快发生。似乎它有时会挂起，但页面上几乎没有任何东西可以挂起它。难道我做错了什么？

代码在这里：

CSS：

```
div { color:blue; font-size:6em }
.red { color:red; } 
```

脚本：

```
var arr = [ "one", "two", "three", "four", "five" ];

(function timer(counter) {
var text = arr[counter];

$('#target').fadeOut(function(){
    if(text === 'one') {
        $('#target').addClass("red");
    }
    else {
        $('#target').removeClass("red");
    }
    $('#target').empty().append(text).fadeIn();
});

delete arr[counter];
arr.push(text);

setTimeout(function() {
    timer(counter + 1);
}, 3000);
})(0); 
```

和 HTML：

```
<div id="target"></div> 
```

jsfiddle：http: [//jsfiddle.net/58Jv5/4/](http://jsfiddle.net/58Jv5/4/)

注意：我在 Mac 上看到 FF 12 中的问题，Safari 似乎工作正常。

# c++ - 困惑：指向动态数组语法的指针

> ID：10998301
> 
> 赞同：0
> 
> 时间：2012-06-12T14:02:04.123
> 
> 标签：c++

```
int* p_bob = new int;

*p_bob = 78; 
```

上面的代码对我来说很有意义。我使用取消引用操作来分配新内存并分配值 78。

```
int* p_dynint = new int[10];
*p_dynint[2] = 12; 
```

然而，这没有任何意义。如果我尝试在 p_dynint[] 上使用取消引用运算符，则会收到错误消息。为什么数组会有所不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:04:09.060

`*p_bob = 78;`这将值分配给`78`指向的内存`p_bob`（它表示一个`int`）。

`p_dynint[2] = 12;`只需访问第三个元素。

`p_dynint[2]`实际上等价于`*(p_dynint+2)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:04:56.377

`p_dynint[2]`相当于`*(p_dynint + 2)`。取消引用隐含在`[]`运算符中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T14:22:13.437

这样做没有真正的问题：

```
int* p_dynint=new int[10];
//write first element
*p_dynint=10;
//write second element
*(p_dynint+1)=20;
//write three elements to std::cout
std::cout<<p_dynint[0]<<p_dynint[1]<<p_dynint[10]<<std::endl; 
```

这个例子也突出了数组的一个问题。你可以读写**任何东西**。生成的输出`p_dynint[10]`是一个 int，但它的值只是转换为 int 的接下来的几个字节。

如果可能的话使用容器（为了进一步推理阅读[这个](http://www.parashift.com/c++-faq-lite/containers.html#faq-34.1)）

# macos - 在 OSX 中搜索和销毁 Rouge 进程

> ID：10998303
> 
> 赞同：3
> 
> 时间：2012-06-12T14:02:12.617
> 
> 标签：macos, process

**INFO：**我前几天安装了SymformSync，一个分布式云存储系统，但当天又删除了。（我喜欢这个想法，但它不适合像我这样使用笔记本电脑的人。）但是，有一个进程 symformsync 不断弹出并在 CPU 上消耗大量资源。我删除了应用程序，但这个过程仍然不断弹出！不用说，我不喜欢无法控制自己 CPU 上的进程！

**Q：**如何找到这个不断自启动的进程，如何删除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T04:39:52.660

来自 Symform 的回答：

感谢您联系 Symform 支持。我了解到您需要从 Mac 中删除 Symform 的说明。

这是信息：

1.  访问 Mac 上的终端程序，方法是转到右上角的搜索工具，然后输入终端。

2.  打开终端后，根据您要执行的操作，输入以下命令：

正常卸载只会停止服务并删除软件。它将保留服务配置和日志文件。

sudo /Library/Application\ Support/Symform/scripts/uninstall

要完全删除 Symform 软件、配置和日志的所有方面，还可以使用清除操作。这也将删除任何同步和贡献支持文件和目录。

sudo /Library/Application\ Support/Symform/scripts/uninstall --purge

1.  运行这些命令中的任何一个时，您都需要输入 Mac 密码。

# delphi - FireMonkey 应用程序中的 TFileOpenDialog

> ID：10998309
> 
> 赞同：4
> 
> 时间：2012-06-12T14:02:22.407
> 
> 标签：delphi, delphi-xe2, firemonkey

我正在使用 FireMonkey，并希望用户使用 TFileOpenDialog 提供的界面选择一个目录（我发现 SelectDirectory 界面充其量已经过时 - 是的，即使使用 sdNewUI 选项也是如此）。

![带有 [fdoPickFolders] 选项的 TFileOpenDialog](../Images/fdf3f220ac7ffd8be28f4623f6aade4a.png)

首先，在 FireMonkey 应用程序中包含 VCL.Dialogs 单元（使用 TFileOpenDialog）是不好的做法吗？

其次，这仍然仅适用于 Windows Vista 及更高版本。这是检查兼容 Windows 版本的正确方法吗？

```
{IFDEF WIN32 or WIN64}
  if Win32MajorVersion >= 6 then
    // Create TOpenFileDialog with fdoPickFolders option 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:26:08.750

为了将来参考，使用 IFileDialog 创建一个 Windows Vista 及以上文件夹对话框：

```
uses
  ShlObj, ActiveX;

...

var
  FolderDialog : IFileDialog;
  hr: HRESULT;
  IResult: IShellItem;
  FileName: PChar;
  Settings: DWORD;
begin
  if Win32MajorVersion >= 6 then
    begin
      hr := CoCreateInstance(CLSID_FileOpenDialog,
                   nil,
                   CLSCTX_INPROC_SERVER,
                   IFileDialog,
                   FolderDialog);

      if hr = S_OK then
        begin
          FolderDialog.GetOptions(Settings);
          FolderDialog.SetOptions(Settings or FOS_PICKFOLDERS);
          FolderDialog.GetOptions(Settings);
          FolderDialog.SetOptions(Settings or FOS_FORCEFILESYSTEM);
          FolderDialog.SetOkButtonLabel(PChar('Select'));
          FolderDialog.SetTitle(PChar('Select a Directory'));

          hr := FolderDialog.Show(Handle);
          if hr = S_OK then
            begin
              hr := FolderDialog.GetResult(IResult);

              if hr = S_OK then
                begin
                  IResult.GetDisplayName(SIGDN_FILESYSPATH,FileName);
                  ConfigPathEdit.Text := FileName;
                end;
            end;
        end;
    end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-18T09:29:53.940

```
if SelectDirectory('Select a directory', chosenDirectory, chosenDirectory) then 
```

# ruby - 如何在 radrails 控制台中显示页面中的文本？

> ID：10998317
> 
> 赞同：0
> 
> 时间：2012-06-12T14:02:39.497
> 
> 标签：ruby, console, report, watir

我使用 radrails IDE 来运行 watir 测试。

我打开了一个包含错误信息的页面，现在我想在控制台中显示此页面的文本。我怎样才能做到这一点？

这是我的代码：

```
ie4=Watir::IE.attach(:title, "My page")
ie4.send_keys [:control, "a"]
ie4.send_keys [:control, "c"] 
puts (ie4.send_keys [:control, "v"]) 
```

此代码给出`1`而不是错误文本。也有人可以建议一种在 watir 中制作 html 测试报告的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:10:57.347

看起来您只是想复制页面的所有文本？

你可以这样做：

```
ie4=Watir::IE.attach(:title, "My page")
puts ie4.text 
```

# c# - 无法使用 32feet.Net C# 库通过蓝牙将文件从 Windows 传输到 Linux

> ID：10998320
> 
> 赞同：0
> 
> 时间：2012-06-12T14:02:54.973
> 
> 标签：c#, windows, linux, bluetooth

使用以下命令启动第一个 linux 服务侦听过程：

*obexpushd –B[00:15:83:3D:0A:57]:9 –d –o /home/myfolder*

在 Windows 上，以下代码用于执行 obex 传输：

```
InTheHand.Net.BluetoothAddress address = peerDevice.DeviceAddress;
   System.Uri uri = new Uri("obex://" + address.ToString() + "/" + srcfile.Name);
   request = new ObexWebRequest(uri);
   startcopy = DateTime.Now;

   request.ReadFile(file); // this performs the file read from the hard drive

   try
   {
       response = (ObexWebResponse)request.GetResponse(); // here file should be pushed to the listening service
   }
   catch (System.InvalidOperationException ex)
   {
       if (response != null) {
                            response.Close();
       }
       return;
   } 
```

设备可以互相看到，并且它们的 obex 服务也是可见的。传输似乎成功，但实际上没有传输任何数据。该代码可以在 windows 和 windows 之间正常工作。

Obexpushd 进程输出显示：

```
obexpushd 0.10.2 Copyright (C) 2006-2010 Hendrik Sattler
This software comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions.
Listening on bluetooth/[00:15:83:3D:0A:57]:9
OBEX_EV_ACCEPTHINT, OBEX_CMD_CONNECT
0: Connection from "bluetooth/[00:09:DD:50:94:0B]:9"
0: OBEX_EV_REQHINT, OBEX_CMD_CONNECT
0: OBEX_EV_REQ, OBEX_CMD_CONNECT
0: Sending response code 0
0: OBEX_EV_REQDONE, OBEX_CMD_CONNECT
0: OBEX_EV_REQHINT, OBEX_CMD_PUT
0.1: OBEX_EV_REQCHECK, OBEX_CMD_PUT
0.1: OBEX_EV_REQDONE, OBEX_CMD_PUT
0.1: OBEX_EV_REQHINT, OBEX_CMD_DISCONNECT
0.1: Sending response code 100
0.1: OBEX_EV_REQ, OBEX_CMD_DISCONNECT
0.1: OBEX_EV_REQDONE, OBEX_CMD_DISCONNECT 
```

我也尝试在 C# 代码中禁用身份验证，但这没有帮助。

有谁知道如何解决这个问题或者从哪里开始寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:14:07.890

好吧，似乎没有人对这个话题很感兴趣。:) 幸运的是我自己找到了解决方案。

但是，它涉及大量分析（obex 传输协议和 32feet 库）和一点运气。*Linux obexpushd*实现的区别在于它对 OBEX 传输数据包的解释。

我在页面上找到了 OBEX 规范：[OBEX 规范](http://netwinder.osuosl.org/pub/netwinder/docs/nw/irda/IrOBEX12.pdf)。

在调试了 23feet obex 传输的内部后，我发现代码将用于向接收器发送文件的 OBEX PUT 命令发送到何处。Obex 规范给出了 PUT 初始化数据包的以下示例：

放置命令 | 数据包长度 | 名称标题 | 名称标题的长度 | 对象名称 | 长度标题 | 物体长度 | 对象体块头 | 正文标题的长度 | 正文字节

32feet 库发送的第一个数据包**没有****Body Header**，这会导致*obexpushd* Linux 命令出错。

如果是 32feet 库中的错误、obexpushd 或 OBEX 规范不够精确，则不确定，但是在第一个数据包中添加 Body 标头解决了问题。从我的实验结果表明，必须在第一个数据包中发送对象的至少 2 个第一个字节。此外，添加标头不会导致其他任何崩溃，Windows<->Windows 传输仍然可以很好地工作。

# c# - ssl webservice中的自定义用户名/密码

> ID：10998328
> 
> 赞同：1
> 
> 时间：2012-06-12T14:03:11.963
> 
> 标签：c#, wcf, ssl, basichttpbinding

我有一个使用传输安全模式运行的基本httpbinding WCF 服务。这很好用，但是我想对请求此服务的用户进行身份验证，因此尝试使用 TransportWithMessagCredential 的安全模式和 UserName 的消息 clientCredentialType 并添加了一个服务行为来调用自定义密码验证器。我的问题是，当我尝试使用 Visual Studio 调用引用时，我收到一条错误消息，提示找不到该服务。请在下面找到我的代码，并建议我可能需要进行的任何更改以使其正常工作，并在尝试添加服务时提示我输入用户名/密码。

**网页配置**

```
<?xml version="1.0"?>
<configuration>
<system.diagnostics>
<sources>
  <source name="System.ServiceModel" switchValue="Information, ActivityTracing"
    propagateActivity="true">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add initializeData="WcfTraces.svclog" type="System.Diagnostics.XmlWriterTraceListener"
        name="traceListener">
        <filter type="" />
      </add>
    </listeners>
  </source>
  <source name="System.ServiceModel.MessageLogging" switchValue="Warning, ActivityTracing">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add name="ServiceModelMessageLoggingListener">
        <filter type="" />
      </add>
    </listeners>
  </source>
</sources>
<sharedListeners>
  <add initializeData="c:\users\**\web_messages.svclog"
    type="System.Diagnostics.XmlWriterTraceListener, System, Version=2.0.0.0, Culture=neutral,     PublicKeyToken=***"
    name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
    <filter type="" />
  </add>
</sharedListeners>
</system.diagnostics>
<system.serviceModel>
<diagnostics>
  <messageLogging logEntireMessage="true" logMalformedMessages="true"
    logMessagesAtServiceLevel="false" logMessagesAtTransportLevel="true" />
</diagnostics>
<bindings>
  <basicHttpBinding>
    <binding name="basicBindingConfig">
      <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="None" />
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service behaviorConfiguration="ServiceBehavior" name="nameSpaceX.Service">
    <endpoint address="https://************:443/***.svc/"
      binding="basicHttpBinding" bindingConfiguration="basicBindingConfig"
      contract="nameSpaceY.IService">
      <identity>
        <certificateReference x509FindType="FindByThumbprint" findValue="****************" />
      </identity>
    </endpoint>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"
        httpsGetUrl="https://*****:443/***.svc" />
      <serviceDebug includeExceptionDetailInFaults="false" />
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom"
          customUserNamePasswordValidatorType="namespaceX.UserNameValidator, namespaceX" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel>

</configuration> 
```

**用户名验证器.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IdentityModel.Selectors;
using System.IdentityModel.Tokens;

namespace namespaceX
{
class UserNameValidator: UserNamePasswordValidator
{
    public override void Validate(string username, string password)
    {
        if(username == "test" && password == "1234")
            return;
        throw new SecurityTokenException("Incorrect username or Password");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:14:41.733

您不需要 *.svc 的路径。通常`httpsGetUrl`属性被跳过或存储...？wsdl

```
<serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"
  httpsGetUrl="https://*****:443/***.svc" /> 
```

假设这里的 URL 与服务端点中的 URL 相同。Ti 应该是不同的 url，因为一个是实现，第二个是元数据。

# php - PHP 日期时间更新

> ID：10998331
> 
> 赞同：0
> 
> 时间：2012-06-12T14:03:43.893
> 
> 标签：php, oop, datetime

我正在使用 PHP > 5.3，我对 DateTime 有疑问：

首先我无法使用：

```
$date   = new DateTime('2012-06-08 00:00:00');
$t = $date->createFromFormat('Y/m/d', '2012-06-11 23:59:59'); 
```

我收到以下错误消息：

> 调用未定义的方法 DateTime::createFromFormat()

我可以使用该类中的其他功能。

我对如何更新对象初始日期感到困惑的第二件事，还是我必须创建一个新对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T14:05:58.403

`createFromFormat` is a static method of `DateTime` so you would need to call it like:

```
$t = DateTime::createFromFormat('Y-m-d', '2012-06-11'); 
```

You can update the initial `$date` object by doing:

```
$date = DateTime::createFromFormat('Y-m-d', '2012-06-11'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:09:27.483

`DateTime::createFromFormat()` 当您有非常规格式的日期字符串时最有用。您通过给出奇怪日期字符串的格式来创建一个日期对象，以便它知道如何解析它。像这样：

```
$datestring= '2012-06-11 23:59:59';
$mydate= DateTime::createFromFormat('Y-m-d H:i:s', $datestring);
echo $mydate->format('Y/m/d'); 
```

在您的情况下，日期字符串是标准格式。所以你可以像这样创建你的日期：

```
$mydate= new DateTime($datestring); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T14:08:29.950

程序（非 OOP）风格

```
$t = date_create_from_format('Y/m/d', '2012-06-11 23:59:59'); 
```

为你工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T16:00:06.477

是的，我是对的...eclipse 问题：当我从调试模式执行 phpinfo 时，我发现它以 PHP 5.2 运行，更改了项目设置并立即更改！所有功能都在那里！

感谢大家的大力投入！！一如既往地很高兴在stackoverflow中提问:)

# iphone - Windows 上的 iPhone 应用程序演示

> ID：10998332
> 
> 赞同：-1
> 
> 时间：2012-06-12T14:03:46.237
> 
> 标签：iphone, ios, windows, ios-simulator

> **可能的重复：** [PC 上的 iPhone 开发](https://stackoverflow.com/questions/2261267/iphone-development-on-pc)

我开发了一个 iOS 本机应用程序。我的经理想在 Windows 机器上演示该应用程序。那可能吗？

当我搜索时，我找到[了 MobiOne](http://en.wikipedia.org/wiki/Mobile_application_development#Mobile_application_testing)。但这只是为了检查 HTML 应用程序。有没有适用于 Windows 的 iPhone 模拟器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:17:41.403

[使用VNC](http://en.wikipedia.org/wiki/Virtual_Network_Computing)远程共享 Mac 屏幕并进行演示。简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:06:36.860

不，没有这样的事情。正如您所说，有针对 HTML 应用程序的应用程序，但对于原生 iPhone 应用程序，没有这样的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T16:46:01.503

1.  远程登录到您的 Mac 并从那里开始是最好的选择。

2.  将 ad-hoc 分发到您的真实 iOS 设备并在那里进行真实演示。

3.  有一个叫做[Hackintosh](http://en.wikipedia.org/wiki/OSx86)的东西可以让你在你的 PC 上安装 Mac OS X。如果你真的想从你的电脑上运行它，你也可以从那里开始。

据我所知，没有任何适用于 Windows 的 iPhone 模拟器。

# jboss7.x - 石英 1.8.3 和 JBoss 7.1.1

> ID：10998335
> 
> 赞同：0
> 
> 时间：2012-06-12T14:03:52.757
> 
> 标签：jboss7.x, quartz-scheduler

使用 Quartz 1.8.3 和 JBoss 7.1.1 并使用以下属性文件：

```
#============================================================================
 # Configure Main Scheduler Properties
 #============================================================================
 org.quartz.scheduler.instanceName = MyScheduler
 org.quartz.scheduler.instanceId = AUTO
 #============================================================================
 # Configure ThreadPool
 #============================================================================
 org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
 org.quartz.threadPool.threadCount = 25
 org.quartz.threadPool.threadPriority = 5
 #============================================================================
 # Configure JobStore
 #============================================================================
 org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreCMT
 org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
 org.quartz.jobStore.useProperties = false
 org.quartz.jobStore.dataSource = quartzDS
 org.quartz.jobStore.nonManagedTXDataSource = quartzDSNoTx
 org.quartz.jobStore.tablePrefix = QRTZ_

 org.quartz.jobStore.clusterCheckinInterval = 20000
 org.quartz.jobStore.isClustered = false

 org.quartz.jobStore.acquireTriggersWithinLock=true

 #============================================================================
 # Configure Datasources  
 #============================================================================

 org.quartz.dataSource.quartzDS.jndiURL= java:jboss/datasources/myDS
 org.quartz.dataSource.quartzDSNoTx.jndiURL= java:jboss/datasources/myDS

 #============================================================================
 # Quartz Plugin
 #============================================================================
 org.quartz.plugin.jobstop.class = com.viagents.quartz.JobStopPlugin
 org.quartz.plugin.jobstop.tablePrefix = QRTZ_ 
```

我初始化 Quartz 的方式是在如下所示的方法上使用 @Singleton、@Startup 和 @PostConstruct 注释：

```
 @EjbInterface(type = EjbInterface.Type.LOCAL)
    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public void startJobs() {

        try {

            Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();
            this.registerJMX(scheduler);
            scheduler.start();

 ...........................................

 } 
```

如果 org.quartz.jobStore.isClustered 属性为 false，我无法获取调度程序，我会收到以下异常：

```
 13:20:23,636 INFO  [org.quartz.core.QuartzScheduler] (MSC service thread 1-15) Quartz Scheduler v.1.8.3 created.
 13:20:23,646 INFO  [org.quartz.impl.jdbcjobstore.JobStoreCMT] (MSC service thread 1-15) Using db table-based data access locking (synchronization).
 13:20:23,682 INFO  [org.quartz.impl.jdbcjobstore.JobStoreCMT] (MSC service thread 1-15) Removed 0 Volatile Trigger(s).
 13:20:23,684 INFO  [org.quartz.impl.jdbcjobstore.JobStoreCMT] (MSC service thread 1-15) Removed 0 Volatile Job(s).
 13:20:23,687 INFO  [org.quartz.core.QuartzScheduler] (MSC service thread 1-15) Scheduler MyScheduler_$_NON_CLUSTERED shutting down.
 13:20:23,689 INFO  [org.quartz.core.QuartzScheduler] (MSC service thread 1-15) Scheduler MyScheduler_$_NON_CLUSTERED paused.
 13:20:23,691 INFO  [org.quartz.core.QuartzScheduler] (MSC service thread 1-15) Scheduler MyScheduler_$_NON_CLUSTERED shutdown complete.
 13:20:23,707 INFO  [stdout] (MSC service thread 1-15) java.lang.reflect.UndeclaredThrowableException
 13:20:23,709 INFO  [stdout] (MSC service thread 1-15)   at $Proxy33.rollback(Unknown Source)
 13:20:23,710 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.jdbcjobstore.JobStoreSupport.rollbackConnection(JobStoreSupport.java:3604)
 13:20:23,713 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3776)
 13:20:23,715 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3725)
 13:20:23,717 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.jdbcjobstore.JobStoreSupport.cleanVolatileTriggerAndJobs(JobStoreSupport.java:747)
 13:20:23,719 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.jdbcjobstore.JobStoreSupport.initialize(JobStoreSupport.java:605)
 13:20:23,721 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.jdbcjobstore.JobStoreCMT.initialize(JobStoreCMT.java:142)
 13:20:23,723 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1269)
 13:20:23,724 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1460)

 13:20:23,862 INFO  [stdout] (MSC service thread 1-15) Caused by: java.lang.reflect.InvocationTargetException
 13:20:23,865 INFO  [stdout] (MSC service thread 1-15)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 13:20:23,866 INFO  [stdout] (MSC service thread 1-15)   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 13:20:23,868 INFO  [stdout] (MSC service thread 1-15)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 13:20:23,869 INFO  [stdout] (MSC service thread 1-15)   at java.lang.reflect.Method.invoke(Method.java:597)
 13:20:23,870 INFO  [stdout] (MSC service thread 1-15)   at org.quartz.impl.jdbcjobstore.AttributeRestoringConnectionInvocationHandler.invoke(AttributeRestoringConnectionInvocationHandler.java:71)
 13:20:23,872 INFO  [stdout] (MSC service thread 1-15)   ... 85 more
 13:20:23,873 INFO  [stdout] (MSC service thread 1-15) Caused by: java.sql.SQLException: You cannot rollback during a managed transaction!
 13:20:23,875 INFO  [stdout] (MSC service thread 1-15)   at org.jboss.jca.adapters.jdbc.BaseWrapperManagedConnection.jdbcRollback(BaseWrapperManagedConnection.java:1022)
 13:20:23,876 INFO  [stdout] (MSC service thread 1-15)   at org.jboss.jca.adapters.jdbc.WrappedConnection.rollback(WrappedConnection.java:778)
 13:20:23,878 INFO  [stdout] (MSC service thread 1-15)   ... 90 more
 13:20:23,880 INFO  [org.jboss.as] (MSC service thread 1-11) JBAS015951: Admin console listening on http://127.0.0.1:9990 
```

如果我将集群属性设置为 true，我会得到：

```
13:29:31,562 INFO  [org.quartz.core.QuartzScheduler] (MSC service thread 1-4) Scheduler meta-data: Quartz Scheduler (v1.8.3) 'ViSixdScheduler' with instanceId 'Se-PC1339507771533'
   Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
   NOT STARTED.
   Currently in standby mode.
   Number of jobs executed: 0
   Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 25 threads.
   Using job-store 'org.quartz.impl.jdbcjobstore.JobStoreCMT' - which supports persistence. and is clustered.
 13:29:31,579 INFO  [org.quartz.impl.StdSchedulerFactory] (MSC service thread 1-4) Quartz scheduler 'MyScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
 13:29:31,581 INFO  [org.quartz.impl.StdSchedulerFactory] (MSC service thread 1-4) Quartz scheduler version: 1.8.3
 13:29:33,577 INFO  [org.quartz.utils.UpdateChecker] (Timer-1) New Quartz update(s) found: 1.8.5 [http://www.terracotta.org/kit/reflector?kitID=default&pageID=QuartzChangeLog]
 13:29:43,970 INFO  [org.quartz.impl.jdbcjobstore.JobStoreCMT] (MSC service thread 1-4) ClusterManager: detected 1 failed or restarted instances.
 13:29:43,972 INFO  [org.quartz.impl.jdbcjobstore.JobStoreCMT] (MSC service thread 1-4) ClusterManager: Scanning for instance "Se-PC1339504980109"'s failed in-progress jobs.
 13:29:43,979 ERROR [org.quartz.impl.jdbcjobstore.JobStoreCMT] (MSC service thread 1-4) ClusterManager: Error managing cluster: null: java.lang.reflect.UndeclaredThrowableException
         at $Proxy33.commit(Unknown Source)      at org.quartz.impl.jdbcjobstore.JobStoreSupport.commitConnection(JobStoreSupport.java:3624) [quartz-1.8.3.jar:]
         at org.quartz.impl.jdbcjobstore.JobStoreSupport.doCheckin(JobStoreSupport.java:3213) [quartz-1.8.3.jar:]
         at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.manage(JobStoreSupport.java:3820) [quartz-1.8.3.jar:] 
```

如果我不在调度程序上调用 start 我只能解雇工作 @once .... 但如果不启动它就毫无用处:(

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T11:53:44.617

看看这个[石英 2.0 教程](http://www.mastertheboss.com/jboss-application-server/442-quartz-2-tutorial-on-jboss-as-7.html) 问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:08:07.787

你的quartzDS 数据源是如何在你的standalone.xml 中定义的？使用 Quartz 1.8.5 和 Jboss 7.1.1，我看到看到的堆栈跟踪与您相同。将石英数据源 jta 属性设置为 false 后，石英启动时没有错误。使用 jta 设置 false 它更像是到单个数据库的普通 JDBC 连接

```
<datasource jta="false" jndi-name="java:/quartzDS" pool-name="quartzDS" enabled="true" use-java-context="true" use-ccm="true">

. 
```

# maven - 我的 Maven 插件没有执行

> ID：10998336
> 
> 赞同：2
> 
> 时间：2012-06-12T14:03:55.277
> 
> 标签：maven

我已遵循本指南：

[http://maven.apache.org/guides/plugin/guide-java-plugin-development.html](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)

我用 pom 文件创建了一个 maven-plugin 项目“hello-maven-plugin”：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>sample.plugin</groupId>
  <artifactId>hello-maven-plugin</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>maven-plugin</packaging>

  <name>Sample Parameter-less Maven Plugin</name>

  <dependencies>
    <dependency>
      <groupId>org.apache.maven</groupId>
      <artifactId>maven-plugin-api</artifactId>
      <version>2.0</version>
    </dependency>
  </dependencies>

<build>
    <plugins>
      <plugin>
        <groupId>sample.plugin</groupId>
        <artifactId>hello-maven-plugin</artifactId>
        <version>1.0-SNAPSHOT</version>
        <executions>
          <execution>
            <phase>compile</phase>
            <goals>
              <goal>sayhi</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

当我构建它时：

```
mvn install 
```

它打印“你好，世界”。按预期在控制台中。

我创建了另一个 maven 项目“my-project-usage”，我想在其中使用“hello-maven-plugin”插件。它有这个pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>my-project</artifactId>
    <groupId>com</groupId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>
  <artifactId>my-project-usage</artifactId>
  <build>
    <plugins>
      <plugin>
            <groupId>sample.plugin</groupId>
            <artifactId>hello-maven-plugin</artifactId>
            <version>1.0-SNAPSHOT</version>
      </plugin>
    </plugins> 
  </build>
</project> 
```

当我构建这个项目时，hello-maven-plugin 永远不会执行，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:12:11.397

将此`<execution>`块从第一个 POM 移到第二个，因为您需要在此处执行插件，您使用插件的地方，而不是插件本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:12:02.177

您在该部分中指定插件的调用`<plugin>`，因此您需要从第一个 pom 中进行适当的设置：

```
<plugins>
  <plugin>
    <groupId>sample.plugin</groupId>
    <artifactId>hello-maven-plugin</artifactId>
    ...
    <executions>
      <execution>
        <phase>compile</phase>
        <goals>
          <goal>sayhi</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

该`<phase>`部分指定插件应在 maven 的哪个阶段运行以及`<goal>`指定要执行的插件的哪个目标

# objective-c - NSViewController.view (Subviews) setTag

> ID：10998339
> 
> 赞同：0
> 
> 时间：2012-06-12T14:03:59.637
> 
> 标签：objective-c, cocoa, nsview, subview, nsviewcontroller

Each time I press a button, mainController is calling [self.view addSubview: createCustomView.view]. Everything works fine here. The problem is that I need to put a tag on each subview I create in order to retrieve them later. I've already tried this :

```
MainController.m

NSNumber *i;
createCustomView.view.tag = i; //readonly 
```

And what I actually wanna do is :

```
int i;
[createCustomView.view setTag:i]; 
```

But the setTag method doesn't exist. My question is : Is there a way I can do this other than using identifier string which brings some problems in my case?

Thanks in advance

Here's the .h file of the Controller

```
#import <Foundation/Foundation.h>
#import "TransactionButtonView.h"
@class TransactionButtonController;
@interface TransactionViewController : NSViewController
{
TransactionButtonController *transactionButtonController;
}
-(IBAction)createOnPushButton:(id)sender;
-(void)recalculatePositionOnRemove:(long)tag;

@property (nonatomic,assign) TransactionButtonController *transactionButtonController;

@end 
```

Here's the .m file of the Controller

```
#import "TransactionViewController.h"
#import "TransactionButtonController.h"
#import "MainController.h"
@implementation TransactionViewController
@synthesize transactionButtonController;

-(IBAction)createOnPushButton:(id)sender
{
transactionButtonController = [[TransactionButtonController alloc] initWithNibName:@"TransactionButton" bundle:nil];
NSPoint originPoint;

for (int i=1; i <= [[self.view subviews]count]; i++) {
        originPoint.y = transactionButtonController.view.bounds.origin.y + self.view.bounds.size.height - transactionButtonController.view.bounds.size.height*i;
transactionButtonController.view.tag = i; // Here's the PROBLEM!!!
    [[transactionButtonController view]setIdentifier:[[NSNumber numberWithInt:i]stringValue]]; //here's the not good option

}
originPoint.x = transactionButtonController.view.bounds.origin.x;
[[transactionButtonController view] setFrameOrigin:originPoint];
[self.view addSubview:transactionButtonController.view];
[transactionButtonController sendVarsToButton:@"xxx" :@"591" :5 :87456356472456];

}

-(void)recalculatePositionOnRemove:(long)tag
{
NSPoint originPoint;
for (long i = tag; i<[[self.view subviews]count]; i++) {

    originPoint.y = transactionButtonController.view.bounds.origin.y +self.view.bounds.size.height - transactionButtonController.view.bounds.size.height*i;
    originPoint.x = transactionButtonController.view.bounds.origin.x;

     [[transactionButtonController.view viewWithTag:i+1] setFrameOrigin:originPoint];
}
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:07:41.490

如果要向视图添加标签，请执行以下操作：

```
theView.tag = 1; 
```

要删除它：

```
[[myParentView viewWithTag:1] removeFromSuperview] 
```

# android - 如何在全球范围内设置 Android setCustomAnimations？

> ID：10998340
> 
> 赞同：0
> 
> 时间：2012-06-12T14:04:00.853
> 
> 标签：android, animation, global-variables, android-fragments

我有一个自定义动画，我使用了 90% 的应用程序。我需要减少代码冗余：

`FT.setCustomAnimations(R.anim.slide_in, R.anim.hyperspace_out, R.anim.hyperspace_in, R.anim.slide_out);`

并想放入某种全局设置或变量中。

对我如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:09:23.860

您将在整个应用程序范围内的类中拥有某种静态方法，例如：

```
public class FragmentAnimator {

  public static animateOut(FragmentTransaction ft) {
    ft.setCustomAnimations(R.anim.slide_in, R.anim.hyperspace_out, R.anim.hyperspace_in,  R.anim.slide_out);
  }
} 
```

然后`FragmentAnimator.animateOut(FT);`只要你需要这样做就打电话。

# c++ - How to create a static const array of const char*

> ID：10998343
> 
> 赞同：11
> 
> 时间：2012-06-12T14:04:06.667
> 
> 标签：c++

I tried the following line:

```
static const const char* values[]; 
```

But I get the following warning on VC++ warning C4114:

> same type qualifier used more than once.

What is the correct declaration? The goal is to create an immutable array of c strings.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T14:07:38.243

您写`const const`而不是`static const char* const values[];`（您将指针和基础值定义为`const`）

此外，您需要对其进行初始化：

`static const char* const values[] = {"string one", "string two"};`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T14:05:34.427

Try

```
static const char* const values[]; 
```

The idea is to put the two `const`s on either side of `*`: the left belongs to `char` (constant character), the right belongs to `char*` (constant pointer-to-character)

# php - PHP pdf generator query

> ID：10998346
> 
> 赞同：0
> 
> 时间：2012-06-12T14:04:11.783
> 
> 标签：php, pdf, generator

Can anyone please suggest me which php based pdf generator supoorts svg,background-image(css) and table.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:09:59.770

I used `mPDF` that is very capable of this - even You can create an `HTML` with `CSS` and **images** and then let `mPDF` to generate `PDF` from the source `HTML`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:08:51.300

你应该试试[http://www.tcpdf.org](http://www.tcpdf.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:06:55.147

FPDF 或 tcpdf 似乎是最受欢迎的选择。我个人使用 FPDF，并从 MySQL 表中创建了一些非常动态的 PDF。

# html - How to render same margins for every browser?

> ID：10998358
> 
> 赞同：1
> 
> 时间：2012-06-12T14:04:59.010
> 
> 标签：html, css, cross-browser, css-reset

I have an HTML5 canvas image where I've drawn some points and I want to align some div tags and text input tags next to the points.

Unfortunately, browsers do not agree with the space between each div and input tags.

I've found a hack for the input tag, by specifying height with CSS. Now input tags have the same space between them for every browsers. It seems the default height of input tags was not the same depending on the browser, very very weird.

I've tried the same thing for my div tags, but I can't get the right alignment for every browsers.

text input tags alignment working with every browsers with CSS hack: [http://jsfiddle.net/baptx/XcKZj/](http://jsfiddle.net/baptx/XcKZj/)

div tags alignment is not the same depending on the browser (configured for Firefox): [http://jsfiddle.net/baptx/92gPY/](http://jsfiddle.net/baptx/92gPY/)

I'm using Firefox on Linux and I've noticed that Windows version does not render the same margins. Chrome does also not agree with Linux Firefox, when running on Linux or Windows. Opera is great, it always agree with Linux Firefox, running on Linux or Windows.

I first thought, it was due to web browser engine, Gecko rendering differently compared to Webkit, but if Windows and Linux version of Firefox do not agree, it should be something else.

Has anyone and idea where it comes from and how to fix this with div tags?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T14:10:37.447

**为什么**：因为规定的样式表没有规定像边距这样的间距。

**解决方案**：使用 CSS 重置样式表，并在站点范围的样式表中明确声明您自己的默认值。

这是一个有一些重置的网站：[http ://www.cssreset.com/](http://www.cssreset.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T14:13:57.403

听起来您需要在样式中包含重置 css。这将有助于统一（但不能完全消除）浏览器之间的差异。

这是两个流行的重置：

[埃里克迈耶的重置](http://meyerweb.com/eric/tools/css/reset/)

[YUI 重置](http://yuilibrary.com/yui/docs/cssreset/)

# asp.net-mvc-3 - MVC3 Async Controllers for async loading from Entity Framework

> ID：10998359
> 
> 赞同：2
> 
> 时间：2012-06-12T14:05:11.650
> 
> 标签：asp.net-mvc-3, asynchronous, entity-framework-4.1, asynccontroller

To improve performance of our MVC3 application we want to mark some Controller's to AsyncController. We use EF 4.x (latest stable), and need some advices, links how to make async calls to EF in a proper way. How to Dispose Entities etc.

If its possible at all and make sense. Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T14:09:34.157

不要误以为通过使控制器异步可以提高性能。在大多数情况下，你会让事情变得更糟。异步控制器可以提高性能的唯一情况是当您利用 IO/完成端口时。当您进行 IO 密集型操作（例如数据库或 Web 服务调用）时，可能会发生这种情况。只有使用 ADO.NET BeginXXX 和 EndXXX 的异步版本，您才能从异步控制器中受益。

如果您只是创建一个异步控制器并在其中调用 DataContext 上的同步操作，那么您将失去所有好处，甚至使事情变得更糟。

另一个可以使用异步控制器来提高性能的有用场景是当您想要并行化多个操作时。仅当您正在执行的工作可以并行化时，才可以使用它。

我建议你看看[下面的文章](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)。它是关于异步 ASP.NET 页面的，但概念在 MVC 中完全相同（其中页面是控制器）。在幕后，异步控制器是使用相同的机制实现的。因此，在深入了解异步编程之前，请确保您已经非常了解 IO/完成端口的概念。

另一个建议：不要做任何过早的优化。从负载测试你的应用程序开始，只有当你发现你的同步数据库调用实际上是一个瓶颈时，你才应该看看异步控制器。

# linux - What is the correct way to use node dependent paths in Netbeans?

> ID：10998360
> 
> 赞同：1
> 
> 时间：2012-06-12T14:05:18.763
> 
> 标签：linux, maven, netbeans, maven-2, netbeans-7

I'm using Netbeans 7.1.2 on Linux (bash) with Maven2.

Depending on what computer on the network I log in to, the path to maven varies. It is either /gfs/blah/maven or /nfs/blah/maven. I have an environment variable to take care of this on the command line.

However, I am apparently not allowed to use an environment variable under Tools -> Options -> Miscellaneous -> Maven -> Maven Home

What is the correct was of handling this?

Thanks!

# path - Linux内核在哪里寻找可执行文件

> ID：10998361
> 
> 赞同：1
> 
> 时间：2012-06-12T14:05:24.950
> 
> 标签：path, kernel

首先是一些背景。我最近安装了一些软件（实际上是 TeX live），并且二进制文件由安装程序放置在非标准位置（/usr/local/texlive/2011/bin/x86_64-linux）。没问题，因为我可以更改 $PATH 以包含此目录。但是，我在 Makefiles 中使用了乳胶，Make 说它找不到“乳胶”。我最终意识到 Make 要求内核以独立于 shell 的方式运行乳胶。因此，我将所有乳胶可执行文件移动到 /usr/local/bin 并且一切正常，大概是因为内核现在可以看到可执行文件。

如果这是正确的，我的问题是：当被要求运行一个独立于 shell 的程序时，内核在哪里寻找可执行文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:24:48.557

内核不寻找可执行文件——它总是被告知（绝对或相对）路径。所有程序执行（我相信）基本上都归结为调用[execve()](http://linux.die.net/man/2/execve)函数，需要告知可执行文件的路径。

当您仅使用名称调用程序时，取决于解释您的命令（shell、make）的任何内容来定位程序。或者，可以使用诸如[execlp()](http://linux.die.net/man/3/execlp)之类的库函数，它们自己进行路径解析（请参阅“特殊语义”）。

# android - Android button - maintain image transparency across press states

> ID：10998363
> 
> 赞同：0
> 
> 时间：2012-06-12T14:05:28.887
> 
> 标签：android, android-layout, android-button

A noob quesiton here:

I have a button with a partially-transparent PNG background. I am trying to maintain the transparency of the button across different press states. The problem is: when I apply a gradient to the background image (to indicate the button is pressed), the gradient darkens the whole 'block of space' occupied by the image, not just the image itself.

How do I keep the transparent parts of the image transparent? Thanks in advance...

**selector_button_singleplayer.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_focused="true" android:state_pressed="false" android:drawable="@drawable/button_singleplayer" />
<item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/gradient_button_singleplayer" />
<item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/gradient_button_singleplayer" />
<item android:drawable="@drawable/button_singleplayer" /> 
```

**gradient_button_singleplayer.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <bitmap android:src="@drawable/button_singleplayer"/>
</item>
<item>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
        <gradient android:angle="90" android:startColor="#880f0f10" android:centerColor="#880d0d0f" android:endColor="#885d5d5e"/>
    </shape>
</item>
</layer-list> 
```

**my button:**

```
<Button android:id="@+id/main_menu_choose_single_player"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginRight="25dip"
android:background="@drawable/selector_button_singleplayer"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:29:20.017

去图像按钮

将 android:src 设置为 button_singleplayer

你的 gradient_button_singleplayer.xml 将是

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
        <gradient android:angle="90" android:startColor="#880f0f10" android:centerColor="#880d0d0f" android:endColor="#885d5d5e"/>
    </shape> 
```

你的 selector_button_singleplayer.xml 将是

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_focused="true" android:state_pressed="false" android:drawable="@android:color/transparent" />
<item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/gradient_button_singleplayer" />
<item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/gradient_button_singleplayer" />
<item android:drawable="@android:color/transparent" /> 
```

你的 imageButton 将是

```
<ImageButton android:id="@+id/main_menu_choose_single_player"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginRight="25dip"
android:background="@drawable/selector_button_singleplayer"
android:src="@drawable/button_singleplayer"
/> 
```

# jquery - 将验证和错误保存在同一个 jQuery 对话框中 - CakePHP

> ID：10998371
> 
> 赞同：0
> 
> 时间：2012-06-12T14:06:01.613
> 
> 标签：jquery, ajax, validation, cakephp, dialog

在我的表中创建或编辑对象时，我有一个 jquery 对话框，该对话框打开了视图，用于在其中编辑或添加对象。当他们提交时，一切正常。我还向它添加了验证检查，但如果有任何验证错误，会发生什么，对话框关闭并且用户被重定向到带有验证错误消息的实际页面。

我想要做的是在对话框中显示验证错误，而不是转到页面。我环顾四周，发现我可能必须为此使用 ajax，但我不知道如何开始。

这是我的模型的代码。我删除了一些额外的东西以保持简短。

```
class LocalClock extends AppModel
{
    public $useDbConfig = 'default';
    public $useTable = 'local_clocks';

    public $validate = array(
        'utc_offset_sec' => array(
            'rule' => 'notEmpty',
            'rule' => 'numeric',
            'message' => 'Please Enter a Valid Number'
        ),
        'in_month' => array(
            'rule' => 'notEmpty',
            'rule' => 'numeric',
            'message' => 'Please Enter a Valid Number'
        ),
        'in_week' => array(
            'rule' => 'notEmpty',
            'rule' => 'numeric',
            'message' => 'Please Enter a Valid Number'
        ),
        'in_day' => array(
            'rule' => 'notEmpty',
            'rule' => 'numeric',
            'message' => 'Please Enter a Valid Number'
        ),
        'in_hour' => array(
            'rule' => 'notEmpty',
            'rule' => 'numeric',
            'message' => 'Please Enter a Valid Number'
        )
    );

    public function setStatType( $type )
    {
        $this->table = 'local_clocks';
        $this->_schema = array(
            'col1' => array('type' => 'int'),
            'col2' => array('type' => 'string'),
            'col3' => array('type' => 'string'),
            'col4' => array('type' => 'string'),
            'col5' => array('type' => 'string'),
    }
}
?> 
```

这是我的控制器的代码：

```
class LocalClocksController extends AppController
{
    public $components = array('RequestHandler', 'Session');   // enable checking for incoming request attributes

    public $helpers = array('Html', 'Form', 'Session', 'Javascript', 'Paginator');

    public $paginate = array(
        'limit' => 10,
        'order' => array(
            'LocalClock.id' => 'asc'
        )
    );

    public function index()
    {
        $this->LocalClock->table = 'local_clocks';
        $this->LocalClock->getDataSource()->tableFields['local_clocks'] = array( "id", "name", "auto_offset", "utc_offset_sec", "in_month", "in_week", "in_day", "in_hour", "out_month", "out_week", "out_day", "out_hour", "offset_sec");

        if ($this->RequestHandler->accepts('xml'))
        {
            // xml handler
            $this->set('localClocks', $this->LocalClock->find('all'));
            $this->set('_serialize', array('local_clocks'));
            $data = $this->paginate('LocalClock');
            $this->set('localClocks', $data);
        }
        elseif ($this->RequestHandler->accepts('json'))
        {
            //json handler
            $this->set('localClocks', $this->LocalClock->find('all'));
            $this->set('_serialize', array('local_clocks'));
            $data = $this->paginate('LocalClock');
            $this->set('localClocks', $data);
        }
        elseif( $this->RequestHandler->accepts('html'))
        {
            //html handler
            //$this->LocalClock->getDataSource()->tableFields['local_clocks'] = array( "id", "name", "auto_offset", "utc_offset_sec", "in_month", "in_week", "in_day", "in_hour", "out_month", "out_week", "out_day", "out_hour", "offset_sec");
            $this->set('localClocks', $this->LocalClock->find('all'));

            $data = $this->paginate('LocalClock');
            $this->set('localClocks', $data);
        }
    }

    public function add()
    {
        if ($this->request->is('post'))
        {
            if ($this->LocalClock->save($this->request->data))
            {
                $this->set('localClocks', $this->request->data);
                $this->LocalClock->save($localClocks);
                $this->Session->setFlash('Local Clock: '. $this->request->data['LocalClock']['name'] . ' has been created.');
                $this->redirect(array('action' => 'index'));
            }
            else
            {
                $this->Session->setFlash('Unable to add new Local Clock.');
            }
        }
    }

    public function edit($id = null)
    {
        $this->LocalClock->id = $id;
        if ($this->request->is('get'))
        {
            $this->request->data = $this->LocalClock->read();
            $this->set('localClocks', $this->LocalClock->read());
        }
        else
        {
            if ($this->LocalClock->save($this->request->data))
            {
                $this->Session->setFlash('Local Clock: '. $this->request->data['LocalClock']['name'] . ' has been updated.');
                $this->redirect(array('action' => 'index'));
            }
            else
            {
                $this->Session->setFlash('Unable to update Local Clock: '. $this->request->data['LocalClock']['name']);
                $this->set('localClocks', $this->request->data);
            }
        }
    }
?> 
```

这是我的 index.ctp 的代码：

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/start/jquery-ui.css" type="text/css" media="all" />

<p> <?php echo $this->Paginator->prev('« Previous', null, null, array('class' => 'disabled')); ?>;
<?php echo $this->Paginator->numbers(); ?>
<?php echo $this->Paginator->next('Next »', null, null, array('class' => 'disabled')); ?>; </p>

<script>
$(function() 
{
    var $dialog = $("#edit_dialog").dialog(
        {
            autoOpen: false,
            title: 'Edit Local Clock',
            height: 500,
            width: 500,
            resizable: true,
            modal: true
        });
    $(".edit_dialog").click(function()
    {
        $dialog.load($(this).attr('href'), function ()
                {
                    $dialog.dialog('open');
                });
        return false;
    });
});
</script>

<script>
$(function()
{
    var $dialog = $("#add_dialog").dialog(
        {
            autoOpen: false,
            title: 'Create Local Clock',
            height: 500,
            width: 500,
            resizable: true,
            modal: true
        });
    $(".add_dialog").click(function()
    {
        $dialog.load($(this).attr('href'), function ()
                {
                    $dialog.dialog('open');
                });
        return false;
    });
});
</script>

<p><marquee><u>Local Clocks</u></marquee></p>

<div>

<table>
    <thead><tr>
<th> <?php echo $this->Paginator->sort('id', 'ID'); ?> </th>  <th>Name      </th>  <th>Auto Offset  </th>  <th>UTC Offset Sec  </th>  <th>In Month  </th>
<th>In Week  </th>  <th>In Day    </th>  <th>In Hour      </th>  <th>Out Month       </th>  <th>Out Week  </th>
<th>Out Day  </th>  <th>Out Hour  </th>  <th>Offset Sec   </th>  <th>Actions         </th>
    </tr></thead>

    <tbody>

<?php  foreach($localClocks as $LocalClock) { ?>

        <tr>
    <td>  <?php echo $LocalClock['LocalClock']['id']; ?>              </td>
    <td>  <?php echo $LocalClock['LocalClock']['name']; ?>            </td>
    <td>  <?php echo $LocalClock['LocalClock']['auto_offset']; ?>     </td>
    <td>  <?php echo $LocalClock['LocalClock']['utc_offset_sec']; ?>  </td>
    <td>  <?php echo $LocalClock['LocalClock']['in_month']; ?>        </td>
    <td>  <?php echo $LocalClock['LocalClock']['in_week']; ?>         </td>
    <td>  <?php echo $LocalClock['LocalClock']['in_day']; ?>          </td>
    <td>  <?php echo $LocalClock['LocalClock']['in_hour']; ?>         </td>

    <td>
        <?php echo $this->Html->link('View', array('action' => 'view', $LocalClock['LocalClock']['id']), array('class' => 'view_dialog')); ?>
    <?php echo $this->Html->link('Edit', array('action' => 'edit', $LocalClock['LocalClock']['id']), array('class' => 'edit_dialog'));?>
    <?php echo $this->Form->postLink('Delete', array('action' => 'delete', $LocalClock['LocalClock']['id']), array('confirm' => 'Are you sure?')); ?>
            </td>
        </tr>
<?php } ?>

    </tbody>
</table>

</div>

<div>
    <?php echo $this->Html->link('Create Local Clock', array('action' => 'add'), array('class' => 'add_dialog')); ?>
</div>

<div id="view_dialog">
</div>

<div id="edit_dialog">
</div>

<div id="add_dialog">
</div> 
```

最后是我的edit.ctp：

```
<p>Edit Settings for Local Clock: <?php echo $localClocks['LocalClock']['name']; ?> </p>

<div>

<?php echo $this->Form->create('LocalClock', array('action' => 'edit', 'inputDefaults' => array('label' => false))); ?>
<?php echo $this->Form->input('id', array('type' => 'hidden')); ?>

<table>
    <thead><tr>
        <th>Field</th>  <th>Current Value</th>  <th>New Value</th>
    </tr></thead>

    <tbody>
    <tr> <td>Name</td> <td> <?php echo $localClocks['LocalClock']['name']; ?> </td> <td> <?php echo $this->Form->input('LocalClock.name');?> </td> </tr>
    <tr> <td>Auto Offset </td> <td> <?php echo $localClocks['LocalClock']['auto_offset']; ?> </td> <td> <?php echo $this->Form->input('LocalClock.auto_offset');?> </td> </tr>
    <tr> <td>UTC Offset Sec</td> <td> <?php echo $localClocks['LocalClock']['utc_offset_sec']; ?> </td> <td> <?php echo $this->Form->input('LocalClock.utc_offset_sec');?> </td> </tr>
    <tr> <td>In Month</td> <td> <?php echo $localClocks['LocalClock']['in_month']; ?> </td> <td> <?php echo $this->Form->input('LocalClock.in_month');?> </td> </tr>
    </tbody>
</table>

<?php echo $this->Form->end('Save Changes'); ?>
</div> 
```

如果我可以在编辑对话框中获得帮助并在不关闭和重定向到页面的情况下进行验证，那么我应该能够对 add 函数执行相同的操作。

感谢您的帮助，如果有任何不清楚或是否有人需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:03:10.127

为了解决这个问题，首先在编辑文件的末尾添加一个 ajax 提交按钮，就在 $this->Form->end() 之前。（把括号里的'Save changes'删掉，因为ajax提交可以改这么说）。

```
<?php
    // The Ajax Helper submit is used to submit the changes made to the edit form
    // because it allows the modal window to be loaded with the updated edit view
    // without leaving the modal window. 
    echo $this->Ajax->submit('Save Changes', array(
        'url' => array('controller' => 'localClocks', 'action' => 'edit'),
        'update' => 'editTable'));

    // Call the close Dialog() function if data was validated sucessfully; valid == true. 
    // Else it stays open displaying validation error message.
    if (false != $valid)
    {
        echo "<script>closeDialog()</script>";
    }

echo $this->Form->end(); ?> 
```

接下来在控制器文件中，将编辑功能更改为：

```
public function edit($id = null)
    {
        $this->LocalClock->id = $id;
        $this->set('valid', false);
        if ($this->request->is('get'))
        {
            $this->request->data = $this->LocalClock->read();
            $this->set('localClocks', $this->LocalClock->read());
        }
        else
        {
            if ($this->LocalClock->save($this->request->data))
            {
                $this->Session->setFlash('Local Clock: '. $this->request->data['LocalClock']['name'] . ' has been updated.');
                $this->set('valid', true);
                //$this->redirect(array('action' => 'index'));
            }
            else
            {
                $this->Session->setFlash('Unable to update Local Clock: '. $this->request->data['LocalClock']['name']);
                $this->set('localClocks', $this->request->data);
                $this->set('valid', false);
            }
        }
    } 
```

这里唯一的新内容是代码将布尔值分配给变量，以根据是否存在验证错误来确定是否关闭对话框。

就是这样。它可以直接插入其他所有内容。我希望这对其他人有帮助。

# php - 在 Fedora 上安装 MediaWiki 的问题

> ID：10998373
> 
> 赞同：0
> 
> 时间：2012-06-12T14:06:13.733
> 
> 标签：php, linux, installation, mediawiki, fedora

我正在尝试在 Fedora 17 上安装 MediaWiki

我已按照以下说明[安装指南](http://www.wikihow.com/Install-MediaWiki-on-Fedora)。

我已经到了应该在 localhost/wiki 页面上配置 MediaWiki 的阶段。

相反，我得到一个页面，指定该目录下的文件。

我的 php 设置/安装似乎有问题。

如果您需要我发布其他信息，请告诉我。

关于如何解决这个问题的任何想法？

* * *

编辑：以下文件可见

```
[TXT]   api.php 12-Apr-2011 04:07   4.5K     
[DIR]   config/ 12-Jun-2012 12:58   -    
[DIR]   images/ 12-Jun-2012 12:58   -    
[TXT]   index.php   01-Jan-2010 23:09   4.2K     
[TXT]   opensearch_desc.php 21-Mar-2009 18:48   3.0K     
[DIR]   skins/ 
```

* * *

现在感谢 php 页面的源代码显示在其中出现以下消息

```
* This is the main web entry point for MediaWiki.
 *
 * If you are reading this in your web browser, your server is probably
 * not configured correctly to run PHP applications! 
```

任何想法如何配置？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:27:05.680

您可以尝试添加一个

```
.htaccess 
```

文件到您看到的目录，其中：

```
Options -Indexes 
```

在其中，禁用目录列表。

编辑：

查看本地 Apache 文件夹中的 httpd.conf 文件。您还需要修改 DirectoryIndex 值以显示 index.php：

```
DirectoryIndex index.php index.html index.htm 
```

编辑2：

要运行安装脚本，您需要使 webserver/apache 用户可写入“config”目录。

```
chmod a+w config 
```

重启apache：

```
service httpd restart 
```

然后重新加载页面。

高温高压

# java - 没有网络和文件访问权限的 JUnit 测试沙箱？

> ID：10998376
> 
> 赞同：1
> 
> 时间：2012-06-12T14:06:28.950
> 
> 标签：java, maven, junit, sandbox

我可以创建一个没有文件系统和网络访问的 junit 环境吗？我想对我们的测试用例执行更严格的规则。

理想情况下，这可以使用 maven 进行配置，并适用于默认测试阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:11:32.037

基于此答案[https://stackoverflow.com/a/309427/116509](https://stackoverflow.com/a/309427/116509)，我认为您可以设置`SecurityManager`测试设置并在拆卸时恢复原始设置。

但是，恕我直言，应该允许一些单元测试接触文件系统，例如，如果被测试的类实际上创建文件作为其合同的一部分。（您可以使用依赖注入来确保在临时目录中创建文件）。同样，使用 HTTP 的类的良好单元测试应该针对 HTTP 端点进行测试。否则你最终只会嘲笑一切，你的测试变得毫无价值。我想默认应该是拒绝访问，然后开发人员需要专门覆盖这种测试的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:11:57.887

处理这些对文件系统/网络访问的依赖的典型方法是在测试上下文中模拟它们。这样，真正的代码可以通过正常的渠道，但您的测试不必依赖文件系统或网络。

研究模拟框架以帮助您完成很多工作。启用这种测试也会使您的代码更干净。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:12:34.073

您可以使用[Ashcroft](http://docs.codehaus.org/display/ASH/Home)禁止在测试中访问文件系统和其他资源。它使用 Java 安全管理器来限制对某些资源的访问。

另一种方法是使用 AspectJ 并实现几个禁止调用某些 API 或包的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T14:12:37.090

我不确定您所说的 JUnit 环境是什么意思，但您不需要文件系统或网络访问来运行单元测试。另一方面，如果您正在测试使用网络和文件系统 API 的代码，您可能会遇到问题。在这种情况下，您可能需要将代码抽象为更小的可测试块。您不应该在单元测试中测试网络和文件系统 API 是否正常工作，这些是集成测试。您应该只在单元测试中测试*您的*代码。

# c - 在 Eclipse 中打开一个文件

> ID：10998378
> 
> 赞同：-2
> 
> 时间：2012-06-12T14:06:34.923
> 
> 标签：c, eclipse, file

我用 C 写了一些东西，需要打开`file.txt`和管理一些数据。我刚刚开始使用 Eclipse（在 Code::blocks 和 Netbeans 之后），但我找不到正确的路径来放置我的文件以允许 Eclipse 读取它......有什么建议吗？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define COD 10
#define DIP 1000
#define SIZE 5

int main (int argc, char *argv[])
{
    int ora, minuti, i = 0, j = 0, min_lav;
    int num_dip = 0, trovato, dip_lav = 0;
    int vett_or[SIZE][SIZE];
    char cod_dip[COD+1], vett_dip[DIP][COD+1];

    FILE *fp;

    /* Apertura del file */
    fp = fopen (argv[1], "r");

    /* Verifica della corretta apertura del file */
    if (fp == NULL)
    {
        printf ("Errore nell'apertura del file %s\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    /* Primo caso */
    if (argc == 2)
    {
        /* Lettura dele righe e copia degli elementi in un vettore */
        while (fscanf (fp, "%d %d %s\n", &ora, &minuti, cod_dip) == 3)
        {
            strcpy(vett_dip[num_dip], cod_dip);
            num_dip++;
        }

        /* Stampa dei dipendenti */
        for (i = 0; i < num_dip; i++)
            printf ("Dipendente %d: %s\n", i+1, vett_dip[i]);

        /* Ricerca elementi diversi */
        for (i = 0; i < num_dip; i++)
        {
            trovato = 0;

            for (j = 0; j < i && trovato == 0; j++)
            {
                if (strcmp(vett_dip[i], vett_dip[j]) == 0)
                    trovato = 1;
            }

            if (trovato == 0)
                dip_lav++;
        }

        printf ("\n===================================\n");
        printf ("Ci sono stati %d dipendenti a lavoro", dip_lav);
        printf ("\n===================================\n");

    }

    /* Secondo caso*/
    if (argc == 3)
    {
        while (fscanf (fp, "%d %d %s\n", &ora, &minuti, cod_dip) == 3)
        {
            if (strcmp(argv[2], cod_dip) == 0) {
                vett_or[i][0] = ora;
                vett_or[i][1] = minuti;
                i++;
            }

        }

        /* Stampa del dipendente */
        if (i == 1)
            printf ("Per il dipendete selezionato è stato registrato un solo passaggio\n");

        printf ("Dipendente %s:\n", argv[2]);
        printf ("Primo passaggio: %d  %d\n",vett_or[0][0], vett_or[0][1]);
        printf ("Ultimo passaggio: %d  %d\n", vett_or[i-1][0], vett_or[i-1][1]);

        min_lav = ((vett_or[i-1][0]*60)+vett_or[i-1][1]) - ((vett_or[0][0]*60)+(vett_or[0][1]));

        printf ("Il dipendente selezionato ha lavorato per %d minuti\n\n",min_lav );

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:11:24.840

在 Eclipse 中，您实际上无法打开与项目无关的单个文件（这可能很烦人）。

创建一个项目并将文件添加到其中。然后你就可以打开文件了；）

编辑：好的，原来我没有正确阅读你的问题。请忽略这个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:08:38.510

您需要将要打开的文本文件放在 Eclipse 项目的文件夹中，该文件夹（可能）在您的工作区文件夹中（或调用使用绝对路径打开文本文件的函数）。如果您创建一个新项目，您可以在新项目向导窗口中看到您的工作区文件夹的路径。

编辑：可能是您的问题的解决方案[从 Eclipse 中的文件读取](https://stackoverflow.com/questions/681059/read-from-file-in-eclipse)

> 将文件复制到那里后，您是否尝试刷新（右键单击-> 刷新）项目文件夹？这将使您的文件系统与 Eclipse 的内部文件系统同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:11:05.670

调用以`getcwd`查找进程的当前目录怎么样？

```
 char dir[1024];
  getcwd(dir,1024); 
```

或者，您可以指定文件的绝对路径吗？

# php - 使用 PHP 打开并写入 xlms 文件

> ID：10998381
> 
> 赞同：2
> 
> 时间：2012-06-12T14:06:44.877
> 
> 标签：php

我用 PHP5 开发 webapp 来读取或实现 xlsm 文件。

我尝试过使用 PHPEXCEL，但是这个库不支持 xlsm-files 格式。我需要的就是打开文件，将数据写入其中并存储为 xlsm 文件。不应更改宏。

返回包含宏的文件很重要，因为该文件每天用于执行多次导入。我可能不会更改文件格式。

如果有人对此特定任务有提示或导师课程，请写信给我。

谢谢4你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:09:48.823

If you need to retain macros from an Excel template, then you'll need to use something like COM because there aren't any other libraries that handle macros from PHP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:21:06.080

xslm 文件实际上是 ZIP 文件，其中包含 XML 文档和其他资产。PHPEXCEL 和其他类似的 MS Office 文件格式读取器和写入器仅读取较旧的二进制 blob 格式，而不是较新的[Office Open XML 格式](http://en.wikipedia.org/wiki/Office_Open_XML)。

尝试使用[ZipArchive](http://php.net/manual/en/class.ziparchive.php)在 PHP 中打开文件，并使用 PHP XML 库之一来读取文件中的 xml。只要您不更改宏，就会保留宏。

但是，如果您确实需要*执行*宏，则需要完整的 Office 运行时。在这种情况下，您必须在带有 Office 副本的 Windows 上使用 COM 来运行该文件。

# android - 列表视图中的按钮

> ID：10998383
> 
> 赞同：1
> 
> 时间：2012-06-12T14:06:52.610
> 
> 标签：android, android-listview

我有行布局的列表视图，如

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" 
    android:weightSum="5"
    >

        <TextView 
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:id="@+id/ArriveTime"
        android:gravity="center" 
        android:layout_weight="1" />

        <TextView 
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:id="@+id/Name"
        android:gravity="center" 
        android:layout_weight="1" />

        <Button
        android:focusable="false"

        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:id="@+id/Arrive"
        android:gravity="center" 
        android:layout_weight="1"           
        android:text="Arrive" />

        <Button
        android:focusable="false"

        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:id="@+id/Encounter"
        android:gravity="center" 
        android:layout_weight="1"           
        android:text="Encounter" />

        <Button
         android:focusable="false"

        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:id="@+id/Exit"
        android:gravity="center" 
        android:layout_weight="1"           
        android:text="Exit" />

</LinearLayout> 
```

我希望点击行时能够点击按钮，所以我设置`android:focusable="false"`并点击我说

```
 MainGrid.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {

             Log.d("zzzzzzzzzzzzzzzzzzzzzzzz",""+ oldPosition);

            if(oldPosition != -1)
            {
                MainGrid.getChildAt(oldPosition).setFocusable(false);
                //MainGrid.findViewById(oldPosition).setFocusable(false);
            } 

            // Set the whole list view unfocusable 
             MainGrid.setFocusable(false);

            // focus only on this 
            view.setFocusable(true);

            oldPosition = position -1;

            SetMenueOnClick(position-1) ;
 }}); 
```

问题是，在第一次单击该行后，按钮处于活动状态，我无法再次单击它任何解决此问题的想法，我需要激活我单击的行上的按钮，然后将焦点转移到该行以进一步单击

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:34:13.023

如果您希望线条和按钮都可点击（一直），您不需要经历所有这些旋转。只需将这两行添加到 xml 行中的按钮标注中：

```
 android:focusable="false"
    android:focusableInTouchMode="false" 
```

然后，您只需在适配器中为每个按钮设置按钮单击侦听器，并在您正常调用列表的活动中设置项目单击侦听器。

如果您希望在单击该行之前禁用按钮（我不清楚这是目标还是只是您试图让两者都可点击的方式的后果），xml中的设置是与可聚焦标注相同，将按钮设置为禁用，然后在`onListItemClick`设置`if`语句中使用标志来切换它们可点击和不可点击使用`button.setEnabled(false);`and `button.setEnabled(true);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:31:28.000

除了 setFocusable(true)，您还可以使用 setChecked(boolean b)。但是您可以在 CompoundButton 上使用此方法。

来自java：

```
CompoundButton cb = (CompoundButton) findViewById(R.id.yourButton); 
cb.setChecked(true); 
```

在 XML 中

```
<CompoundButton
    android:id="@+id/yourButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/button_stats"
    android:text="@string/stat_hard">
</CompoundButton> 
```

其中 button_stats.xml 是一个位于 res/drawable 的文件，其中包含以下几行：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/generic_button_normal" android:state_checked="false"/>
<item android:drawable="@drawable/generic_button_checked" android:state_checked="true"/>
</selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:33:32.963

您可以尝试使用：

```
android:descendantFocusability="blocksDescendants" 
```

在您的布局 XML 中，而不是单独修改每个元素。

您可以在列表视图问题中阅读有关按钮的更多信息[here](http://code.google.com/p/android/issues/detail?id=3414)

特别是评论 #27 & #31

希望能帮助到你

# php - IE8 Php 标头位置打开一个新窗口

> ID：10998399
> 
> 赞同：2
> 
> 时间：2012-06-12T14:08:04.157
> 
> 标签：php, search, iframe, header, window

我有一个页面动态填充来自 PHP 和数据库的内容，内容被加载到 iframe 中。现在，当我进行自定义搜索时，结果在所有浏览器上都很好，但 IE8（可能还有早期版本）。浏览器在新窗口中对结果进行排序，而不是填充 iframe！

我的 php 搜索页面：

```
 <?php
if (isset($_REQUEST[searchname])) {
    $searchname = $_REQUEST[searchname];

    if (strlen($searchname) < 3) {
        $location = "necrologies_iframe.php?action=tooshort";
        header("Location: {$location}");
    } else {
        $location = "necrologies_iframe.php?action=search&nom={$searchname}";
        header("Location: {$location}");
    }
}
?> 
```

有没有办法用结果填充 iframe 而不是打开新窗口？

## 编辑

搜索表单/按钮：

```
<form id="form1" name="form1" method="get" target="frame" action="http://www.cablevision.qc.ca/fr/code/necrologies_search.php">
<p><strong><a href="javascript:void(0);" onClick="necro_search('est');" >Abitibi-Est</a> |  <!--//href="index.php?option=com_content&amp;view=article&amp;id=123&amp;Itemid=146&amp;action=est-->
    <a href="javascript:void(0);" onClick="necro_search('ouest');" >Abitibi-Ouest</a> |     <!--//href="index.php?option=com_content&amp;view=article&amp;id=123&amp;Itemid=146&amp;action=ouest"-->
    <a href="javascript:void(0);" onClick="necro_search('rn');" >Rouyn-Noranda</a> |        <!--//href="index.php?option=com_content&amp;view=article&amp;id=123&amp;Itemid=146&amp;action=rn"-->
    <a href="javascript:void(0);" onClick="necro_search('temis');">T&eacute;miscamingue</a> <!--//href="index.php?option=com_content&amp;view=article&amp;id=123&amp;Itemid=146&amp;action=temis"-->
    </strong> |
<input name="searchname" type="text" id="searchname" value=<?php if (isset($_REQUEST[nom])) { echo '"' . $_REQUEST[nom] . '"'; } else { echo '"rechercher les archives"'; } ?> size="25" />
<input type="submit" name="submit" id="submit" value="Rechercher" /> 
```

页面的 iframe 部分

```
<iframe id="frame" "width="638px" frameborder="0" src="code/necrologies_iframe.php" scrolling="yes" horizontalscrolling="no" verticalscrolling="yes"></iframe> 
```

iframe 页面代码

```
 <style type="text/css">
<!--
table
{
    line-height: 135%;
    font-family: Arial, Helvetica, sans-serif;
    font-size:13px;
}
.border {
    border: 1px solid #000000;
}

.borderbas {
    border-bottom: 1px solid #000000;
}

.padding {
    padding: 5px;
}
-->
</style>
<?php
// fichier de connection a la DB
require_once("includes/connection.php");
require_once("includes/functions.php");
?>

<?php
$action = $_REQUEST[action];
$datedujour = date("Y-m-d");
switch ($action) {
    case "search":
        $searchname = utf8_decode(mysql_prep($_REQUEST[nom]));
        $necroresult = mysql_query("SELECT * FROM necrologies WHERE nom LIKE '%{$searchname}%' AND approuve = '1' ORDER BY id DESC ");
        if (mysql_affected_rows() == 0) {
            // message que je fais afficher si il ne trouve rien (au lieu d'une page blanche qui ne veux rien dire
            $message = "<br /><br /><br /><br /><h3>Aucun r&eacute;sultat trouv&eacute; </h3><br>Veuillez modifier le nom de la recherche...<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />";
        } else {
            // sinon on affiche le nombre de resultats trouvés
            $necro_num_rows = mysql_num_rows($necroresult);  
            $message = $necro_num_rows . " r&eacute;sultat(s) trouv&eacute;s...";
            $affiche_liste = 1;
        }
        break;

    case "tooshort":
        echo "<br><br><center>Recherche trop courte, veuillez entrer plus de 4 caract&egrave;res...</center><br><br><br><br><br><br><br><br><br><br><br><br><br>";
        break;

    case "est":
    case "ouest":
    case "rn":
    case "temis":
        $affiche_liste = 1; // pour faire afficher la liste des necro
        $necroresult = mysql_query("SELECT * FROM necrologies WHERE datefin > '{$datedujour}' AND approuve = '1' AND region = '{$action}' ORDER BY id DESC ");
        break;
    default:
        // default on vois toutes les necro de toute les regions
        $necroresult = mysql_query("SELECT * FROM 
            necrologies WHERE datefin > '{$datedujour}' AND approuve = '1' 
            ORDER BY id DESC ");
        $affiche_liste = 1;
}
?>

<br />

<?php
// affichage du message
if (isset($message)) { 
    echo "<br><strong><center>" . $message . "</strong></center><br>";
}

// liste des necro dans des tables
if ($affiche_liste == 1 || !isset($_REQUEST[action])) { 
    while ($row = mysql_fetch_array($necroresult)) {

    ?>

    <!-- Debut de la table fancy round corner -->
    <div align="center">
      <table  border="0" align="left" cellpadding="0" cellspacing="0" class="tb">
        <tr>
          <td width="16"><img src="/fr/images/roundtable/top_lef.gif" width="16" height="16"></td>
          <td height="16" background="/fr/images/roundtable/top_mid.gif"><img src="/fr/images/roundtable/top_mid.gif" width="16" height="16"></td>
          <td width="24"><img src="/fr/images/roundtable/top_rig.gif" width="24" height="16"></td>
        </tr>
        <tr>
          <td width="16" background="/fr/images/roundtable/cen_lef.gif"><img src="/fr/images/roundtable/cen_lef.gif" width="16" height="11"></td>
          <td align="center" valign="middle" bgcolor="#FFFFFF">

                <!-- Debut du content de la table fancy round corner -->
                <table width="576" border="0" cellspacing="0" cellpadding="0" class="border" >
                  <tr >
                    <td rowspan="2" valign="top"><img src="/fr/images/necrologies/<?php  echo utf8_encode($row['photo']); ?>" alt="photo" /><br><a href="necrologies_print.php?id=<?php echo $row[id]; ?>" target="_blank"><img src="/fr/images/cnq/imprimable.gif" border="0" width="150" height="50"></a></td>
                    <td width="200" bgcolor="#DFEFFF" class="borderbas" style="border-left: 1px solid #000000; border-right: 1px solid #000000"><center><?php echo nl2br(mb_convert_encoding($row['nom'], "UTF-8", "Windows-1252")); ?></center></td>
                    <td bgcolor="#DFEFFF" class="borderbas">
              <center>
                      <strong>
                      <?php
            $maison = $row[maison];         
            if ($maison == "N/D") {
                echo "(information non disponible)"; 
            } else { 
                if (substr($maison, 0, 6) == "La dir") {
                    echo utf8_encode($maison);
                } else {
                    echo  "La direction des fun&eacute;railles a &eacute;t&eacute; confi&eacute;e &agrave;/aux <br>";
                    echo utf8_encode($maison);  
                }
            }
            ?>
            </strong></center></td>
                  </tr>
                  <tr>
                    <td style="border-left: 1px solid #000000; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: x-small;" colspan="2"><div class="padding" align="left"><?php echo nl2br(mb_convert_encoding($row['description'], "UTF-8", "Windows-1252")); ?></div></td>
                  </tr>
                </table>
            <!-- Fin du content de la table fancy round corner -->

          </td>
          <td width="24" background="/fr/images/roundtable/cen_rig.gif"><img src="/fr/images/roundtable/cen_rig.gif" width="24" height="11"></td>
        </tr>
        <tr>
          <td width="16" height="16"><img src="/fr/images/roundtable/bot_lef.gif" width="16" height="16"></td>
          <td height="16" background="/fr/images/roundtable/bot_mid.gif"><img src="/fr/images/roundtable/bot_mid.gif" width="16" height="16"></td>
          <td width="24" height="16"><img src="/fr/images/roundtable/bot_rig.gif" width="24" height="16"></td>
        </tr>
      </table>
    </div>
    <!-- Fin de la table fancy round corner -->

    <!--[if IE 8]>
   <style type="text/css">
        .tb{
        float:left;
        align:left;
        width:550px;
        scrolling-horizontal:none;
        }
    </style>
 <![endif]-->
     <!--[if IE 7]>
   <style type="text/css">
        .tb{
        float:left;
        align:left;
        width:550px;
        scrolling-horizontal:none;
        }
    </style>
 <![endif]-->
     <!--[if IE 6]>
   <style type="text/css">
        .tb{
        float:left;
        align:left;
        width:550px;
        scrolling-horizontal:none;
        }
    </style>
 <![endif]-->

    <br /><br />  
    <?php
    }
}
?>

<?php
// close la connection
mysql_close($connection); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:46:26.593

目标应命名为框架或窗口；较旧的浏览器不使用框架的 ID。所以改变：

`<iframe id="frame" ...`

到

`<iframe name="frame" id="frame" ...`

# android - 确认后MediaRecorder视频存储

> ID：10998405
> 
> 赞同：0
> 
> 时间：2012-06-12T14:08:35.813
> 
> 标签：android, video, storage, mediarecorder

捕获视频是我目前正在开发的应用程序的一部分。视频捕获和存储工作正常。

我按照 android[教程进行视频捕获](http://developer.android.com/guide/topics/media/camera.html)，所有录制的视频在录制停止后直接存储。

有没有办法让用户决定（通过对话框）他/她是否要存储视频？之后我真的不想删除视频。

# c# - 为什么使用 ThreadPool 检查代理比不使用 ThreadPool 需要更多时间？

> ID：10998406
> 
> 赞同：0
> 
> 时间：2012-06-12T14:08:37.277
> 
> 标签：c#, multithreading, threadpool, asyncsocket, socks

例如，使用[这篇](https://stackoverflow.com/questions/1062035/how-to-config-socket-connect-timeout-in-c-sharp)文章，我编写了检查 200 个代理的代码。套接字的超时时间为 2 秒。一切正常，但问题是**代码 #1**需要超过 2 分钟才能检查 200 个代理，限制为 2 秒超时。但是使用**Code #2检查 200 个代理需要 2 秒，使用****Code #2**检查 1000 个代理也需要 2 秒。

**代码 #1**使用线程池。 **代码 #1**打开`proxyCount`套接字，进入休眠状态 2 秒，然后检查成功。正好需要 2 秒。

那么**代码 #1**中的问题在哪里？为什么至少有 20 个线程的 ThreadPool 比没有线程的要慢得多？

**代码 #1**

```
int proxyCount = 200;  
CountdownEvent cde = new CountdownEvent(proxyCount);     
private void RefreshProxyIPs(object obj)
{     
    int workerThreads, ioThreads;
    ThreadPool.GetMinThreads(out workerThreads, out ioThreads);
    ThreadPool.SetMinThreads(20, ioThreads);

    var proxies = GetServersIPs(proxyCount);
    watch.Start();
    for (int i = 0; i < proxyCount; i++)
    {
        var proxy = proxies[i];
        ThreadPool.QueueUserWorkItem(CheckProxy, new IPEndPoint(IPAddress.Parse(proxy.IpAddress), proxy.Port));
    }
    cde.Wait();
    cde.Dispose();
    watch.Stop();
}

private List<IPEndPoint> list = new List<IPEndPoint>();
private void CheckProxy(object o)
{
     var proxy = o as IPEndPoint;
     using (var socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
     {
         var asyncResult = socket.BeginConnect(proxy.Address, proxy.Port, null, null);
         if (asyncResult.AsyncWaitHandle.WaitOne(2000))
         {
             try
             {
                 socket.EndConnect(asyncResult);
             }
             catch (SocketException)
             {
             }
             catch (ObjectDisposedException)
             {
             }
         }
         if (socket.Connected)
         {
             list.Add(proxy);
             socket.Close();
         }
     }
     cde.Signal();
} 
```

**代码 #2**

```
int proxyCount = 200;
var sockets = new Socket[proxyCount];
var socketsResults = new IAsyncResult[proxyCount];
var proxies = GetServersIPs(proxyCount);
for (int i = 0; i < proxyCount; i++)
{
      var proxy = proxies[i];
      sockets[i] = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
      socketsResults[i] = sockets[i].BeginConnect(IPAddress.Parse(proxy.IpAddress), proxy.Port, null, proxy);             
}
Thread.Sleep(2000);
for (int i = 0; i < proxyCount; i++)
{
     var success = false;
     try
     {
         if (socketsResults[i].IsCompleted)
         {
              sockets[i].EndConnect(socketsResults[i]);
              success = sockets[i].Connected;
              sockets[i].Close();
         }

         sockets[i].Dispose();
     }
     catch { }

     var proxy = socketsResults[i].AsyncState as Proxy;
     if (success) {  _validProxies.Add(proxy); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:22:23.450

您启动的线程池线程不是很好的 tp 线程。他们不执行任何实际工作，只是阻止 WaitOne() 调用。所以其中 20 个立即开始执行，并且在 2 秒内没有完成。线程池调度程序只允许另一个线程在其中一个完成或在 0.5 秒内*没有完成时启动。*然后它允许额外的一个运行。所以需要一段时间才能完成*所有*请求。

您可以通过调用 SetMinThreads() 并将最小值设置为 200 来修复它。但这非常浪费系统资源。您不妨调用 Socket.BeginConnect() 200 次，然后在 2 秒后找出发生了什么。您的快速版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:24:31.147

看起来在第一个示例中，您正在等待每个代理连接超时或 2 秒，以先到者为准。另外，您正在排队 200 个单独的工作请求。您的线程池大小可能会比这小得多。[使用GetMaxThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getmaxthreads.aspx)检查它。您只会同时运行该数量的工作请求，并且下一个请求必须等待前一个项目超时。

# android - 我可以使用意图过滤器将应用程序的名称设置为活动标签以外的名称吗？

> ID：10998411
> 
> 赞同：0
> 
> 时间：2012-06-12T14:08:57.607
> 
> 标签：android, label, intentfilter

我有一个包含四个活动的应用程序。我已经在其中一个上设置了意图过滤器，因此当用户启动应用程序时，它将首先显示给用户。它有一个标签，上面写着“增加费用”。

现在手机中应用程序图标下的名称显示“添加费用”。

我希望活动有不同的标签，因为它们显示在每个活动顶部的菜单中，并帮助用户了解活动的内容。但我希望应用程序名称不是带有意图过滤器的活动标签。

那可能吗？

我的清单的一部分：

如您所见，我尝试在应用程序级别设置 android:label="@string/app_name" 但这不起作用。活动上的标签无论如何都会显示在图标下方。

```
<application
    android:icon="@drawable/ic_money_bag"
    android:label="@string/app_name" 
    android:theme="@android:style/Theme.Holo.Light" >
    <activity
        android:name=".AddExpenseActivity"
        android:label="@string/add_expense_header" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ListExpensesActivity"
        android:label="@string/list_expenses_header" >
        </activity>
    <activity
        android:name=".AddExpenseAccountActivity"
        android:label="@string/add_expense_account_header" />
    <activity
        android:name=".ListExpenseAccountsActivity"
        android:label="@string/list_expense_accounts_header" />
</application> 
```

问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:13:25.623

您可以在每个活动中使用 setTitle(String s) 来动态更改出现在标题栏中的名称。因此，对于您将其设置为 onCreate 任何您想要的可能就足够了。

```
setTitle("Hello StackOverflow"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:17:58.007

尝试给予

```
<intent-filter android:label="@string/app_name">
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
```

当为活动指定标签时，我将在启动器中显示相同的标签

你能做的是给意图过滤器标签

# jquery - 如何使用 jQuery 读取 cookie 并将其存储在变量中？

> ID：10998412
> 
> 赞同：0
> 
> 时间：2012-06-12T14:09:02.440
> 
> 标签：jquery

我想读取“bar”cookie 的内容并将其存储在变量“foo”中

我的第一个刺是这个，但我没有收到警报。我认为赋值语句是不正确的。

```
var foo = $.cookie('bar');
alert (foo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:12:33.143

如果您希望 jQuery 处理 cookie 操作，则需要使用库。

## jQuery Cookie 插件来自 carhartl

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

当您可以在直接的 javascript 中如此轻松地使用库时，有些人不赞成使用它。就我个人而言，我一直使用上面的库。

但是，如果您想探索非 jQuery 方式...

## 直截了当的 JavaScript 方法

谷歌搜索提供了这个页面：[http ://www.tutorialspoint.com/javascript/javascript_cookies.htm](http://www.tutorialspoint.com/javascript/javascript_cookies.htm)

我从来没有使用直接的 js 来操作 cookie，所以我只是从该站点复制/粘贴以方便操作。您可以参考本段上方的链接以了解具体信息。

### 写一个饼干

```
document.cookie = "key1=value1;key2=value2;expires=date";
function WriteCookie()
{
   var cookievalue= "ABCD";
   document.cookie="name=" + cookievalue;
   alert("Setting Cookies : " + "name=" + cookievalue );
} 
```

### 阅读所有 Cookie

```
function ReadCookie()
{
   var allcookies = document.cookie;
   alert("All Cookies : " + allcookies );

   // Get all the cookies pairs in an array
   cookiearray  = allcookies.split(';');

   // Now take key value pair out of this array
   for(var i=0; i<cookiearray.length; i++){
      name = cookiearray[i].split('=')[0];
      value = cookiearray[i].split('=')[1];
      alert("Key is : " + name + " and Value is : " + value);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:31:39.820

首先，你必须在[这里](http://plugins.jquery.com/project/cookie)下载 jQuery cookie 插件。随后将此链接添加到文档的头部标签。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.cookie.js"></script> 
```

例如，您的 Html 文档具有以下标签：

```
<a href="#" id="showCookie">Show cookie</a>
<a href="#" id="deleteCookie">Delete cookie</a>
<input disabled id="verbose" type="text" /> 
```

要读取 cookie，请将此脚本添加到您的 html 页面：

```
$("#showCookie").click(function(e){
  e.preventDefault();
var yourcookie=$.cookie(cookieName).val();
  $("#verbose").val("Cookie value is " + yourcookie + ".");

}); 
```

所以和创建cookie：

```
jQuery(document).ready(function(){

var cookieName = 'level';
var cookieOptions = {expires: 7, path: '/'};
$.cookie(cookieName, $(this).attr("id"), cookieOptions);
)}; 
```

并结束所有删除 cookie：

```
$("#deleteCookie").click(function(e){
e.preventDefault();
  $("#verbose").val("Cookie 'level' with value \"" + $.cookie(cookieName) + "\" removed.");
  $("#" + $.cookie(cookieName)).removeClass("selected"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T14:12:43.003

我认为你需要这个：

[http://archive.plugins.jquery.com/project/Cookie](http://archive.plugins.jquery.com/project/Cookie)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T14:13:13.097

你有一个/jQuery cookie 插件吗？[这是给你的](https://github.com/carhartl/jquery-cookie)。Cookies 还不是 jQuery Core 的一部分。

# python - python - 如何将CSV变量中的行读入python中的多维数组？

> ID：10998413
> 
> 赞同：5
> 
> 时间：2012-06-12T14:09:15.763
> 
> 标签：python, csv, multidimensional-array, python-2.7

字符串如下所示：

```
x = '''"High";"10";"Assigned";"2012/06/12 10:11:02"
"Low";"20";"Assigned";"2012/06/12 10:11:02"
"Medium";"30";"Assigned";"2012/06/12 10:11:02"''' 
```

我希望它是这样的：

```
x = [
[High, 10, Assigned, 2012/06/12 10:11:02],
[Low, 20, Assigned, 2012/06/12 10:11:02],
[Medium, 30, Assigned, 2012/06/12 10:11:02]] 
```

解析这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T14:14:07.683

```
>>> import csv
>>> result = [row for row in csv.reader(x.splitlines(), delimiter=';')]
>>> import pprint
>>> pprint.pprint(result)
[['High', '10', 'Assigned', '2012/06/12 10:11:02'],
 ['Low', '20', 'Assigned', '2012/06/12 10:11:02'],
 ['Medium', '30', 'Assigned', '2012/06/12 10:11:02']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:15:31.957

```
out = []
for line in x.splitlines():
    out.append( line.split(';') ) 
```

或者，在一行中：

```
out = [line.split(';') for line in x.splitlines()] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:18:27.553

使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)的单线：

```
[line.split(';') for line in x.replace('"','').split('\n')] 
```

给出：

```
[['High', '10', 'Assigned', '2012/06/12 10:11:02'],
 ['Low', '20', 'Assigned', '2012/06/12 10:11:02'],
 ['Medium', '30', 'Assigned', '2012/06/12 10:11:02']] 
```

并且也摆脱了`"`只留下单引号的结果`'`

# sql-server - SQL 计算日志中出现之间的（时间）间隔

> ID：10998414
> 
> 赞同：1
> 
> 时间：2012-06-12T14:09:17.183
> 
> 标签：sql-server, tsql, sequences

我有记录某些物品何时被发送或退回到特定位置的表格，我想计算出每次退回特定物品的时间间隔。

样本数据：

```
Item   ReturnDate:
Item1, 20120101
Item1, 20120201
Item1, 20120301
Item2, 20120401
Item2, 20120601 
```

所以在这种情况下，我们可以看到第一次退回第 1 项之前有一个月的差距，在第二次退回之前还有一个月。第 2 项在 2 个月后回来了。

我的出发点是：

```
Select r1.Item, r1.ReturnDate, r2.Item, r2.ReturnDate, DateDiff(m, r1.ReturnDate, r2.ReturnDate)
from Returns r1
inner join Returns r2 on r2.VehicleNo = r1.VehicleNo 
```

但是，在此示例中，每个项目都与它已返回的每个其他实例进行比较 - 而不仅仅是下一个。所以我需要限制这个查询，所以它只会比较相邻的返回。

一种解决方案是用计数（该项目被退回的次数）标记每个退货：

```
Item   ReturnDate, ReturnNo:
Item1, 20120101,   1
Item1, 20120201,   2
Item1, 20120301,   3
Item2, 20120401,   1
Item2, 20120601,   2 
```

这将使我能够使用以下 T-SQL（或类似的）：

```
Select r1.Item, r1.ReturnDate, r2.Item, r2.ReturnDate, DateDiff(m, r1.ReturnDate, r2.ReturnDate)
from Returns r1
inner join Returns r2 on r2.VehicleNo = r1.VehicleNo 
and (r1.ReturnNo + 1 = r2.ReturnNo) 
```

我的第一个问题是这是否是一种明智/最佳的方法，或者是否有更好的方法？

其次，计算 ReturnNo 的最简单/最巧妙的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:35:39.107

如果您使用的是 SQL Server 2005+，请使用 ROW_NUMBER() 来完成您想要的操作：

```
WITH RankedReturn AS
(
  SELECT Item, ReturnDate, 
    ROW_NUMBER() OVER (PARTITION BY Item ORDER BY ReturnDate DESC) AS ReturnNo
  FROM Returns
)
SELECT * FROM RankedReturn 
```

显然，现在您有了 CTE，您可以将所需的任何内容放入外部 SELECT 中。我会为此使用 OUTER APPLY：

```
WITH RankedReturn AS
(
  SELECT Item, ReturnDate, 
    ROW_NUMBER() OVER (PARTITION BY Item ORDER BY ReturnDate DESC) AS ReturnNo
  FROM Returns
)
SELECT rOuter.Item, rOuter.ReturnDate, DATEDIFF(month, prev.PrevDate, ReturnDate) AS Months
FROM RankedReturn rOuter
OUTER APPLY 
  (
    SELECT ReturnDate AS PrevDate 
    FROM RankedReturn rInner 
    WHERE rOuter.Item = rInner.Item AND rOuter.ReturnNo = rInner.ReturnNo - 1
  ) prev 
```

糟糕，[SQL Fiddle 在这里](http://sqlfiddle.com/#!3/7d384/9)。

**编辑因为月差计算是倒退的；现在修复**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T14:35:22.617

计算 ReturnNo 的最简单方法是使用`OVER`：

```
SELECT [Item], [ReturnDate], 
    ROW_NUMBER() OVER (PARTITION BY [Item] ORDER BY [ReturnDate]) AS ReturnNumber
FROM Returns 
```

[http://sqlfiddle.com/#!3/e18ad/1/0](http://sqlfiddle.com/#!3/e18ad/1/0)

您还可以尝试使用[计算运行总计的技术来计算](http://geekswithblogs.net/Rhames/archive/2008/10/28/calculating-running-totals-in-sql-server-2005---the-optimal.aspx)两行之间的差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T14:38:15.910

我会这样做：

```
select  itemNo,
        dt,
        DATEDIFF(day, previousDt, dt) as daysSince
from    (select itemNo, 
                dt,
                (select top 1 dt from testTable where itemNo = outerTbl.itemNo and dt < outerTbl.dt order by dt desc) as previousDt
        from    testTable as outerTbl
        ) as x 
```

...这里有一些设置代码供其他人测试解决方案

```
create table testTable(
itemNo nvarchar(20),
dt datetime)
go

insert into testTable values('Item1', '2012-01-01');
insert into testTable values('Item1', '2012-02-01');
insert into testTable values('Item1', '2012-03-01');
insert into testTable values('Item2', '2012-04-01');
insert into testTable values('Item2', '2012-05-01');
go 
```

# qt - 如何使用 QPainter::drawPolyLine 绘制圆角

> ID：10998426
> 
> 赞同：3
> 
> 时间：2012-06-12T14:09:45.763
> 
> 标签：qt, qpainter

我目前正在尝试使用 QGroupBox 作为基础创建一个自定义容器小部件并在绘制事件中绘制新框架，使用 drawPolyLine 创建它一切正常，但我想用圆角绘制框架角落。有没有人遇到过使用 drawPolyLine 的方法，或者我需要重写我的代码来实现它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:34:17.230

对于自定义灵活形状，[QPainterPath](http://doc.qt.nokia.com/4.7-snapshot/qpainterpath.html)是其中最强大的一类。例如，您可以使用[QPainterPath::arcTo()](http://doc.qt.nokia.com/4.7-snapshot/qpainterpath.html#arcTo)来绘制单个圆角，尽管绘制完整形状可能需要一些数学运算。

另一种可能性是定义单个形状并使用`intersected()`or合并它们`subtracted()`，正如 cbamber85 在评论中所建议的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-02T17:14:03.730

QPen 有一个 Qt::RoundCap 的“Cap Style”选项，它可能会根据笔的宽度产生圆角。

# jquery - 从 2 个文本区域和 4 个复选框收集数据

> ID：10998431
> 
> 赞同：0
> 
> 时间：2012-06-12T14:10:08.510
> 
> 标签：jquery

这是我的第一篇文章，也是我第一次使用 jquery。

我已经渲染并创建了 2 个文本框和 4 个复选框。

每个文本区域有 2 个复选框

我如何在这些之间创建关系..所以当我得到 textarea （它有一个 id ）时，如果它们被选中，我也会得到另外两个复选框的 2 个 id（我也为那些复选框传递了 id）。

谢谢你。

我希望这是有道理的。

以下有2个相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:20:36.993

最好让它们有一些共同点，你可以用它来识别一组元素。我现在可以想出两种方法：

1.  在普通类之后为每个元素赋予相同的类。例如，`class="checkBox1 one"`对于复选框和`class="textArea one"`文本区域。

2.  将它们放在同一个容器中，在这种情况下，a`<div>`可能是最好的。

如果您使用我更喜欢的第二个，您可以轻松地制作适用于每个事件的事件：

HTML：

```
<div id="container1" class="container">
 <input class="checkBox1" type="checkbox"/>
 <input class="checkBox2" type="checkbox"/>
 <input type="textarea"/>
</div> 
```

jQuery：

```
$('.container *').click(function(){
    alert('clicking on an element inside ' + $(this).parent().attr('id'));
}); 
```

这将导致“单击 container1 内的元素”。

其他示例是，如果您想在`<textarea>`单击复选框时清空：

```
$('.container checkbox').click(function(){
   $(this).siblings('textarea').val("");
}); 
```

# php - 当数组格式不正确时，Zend 分页器无法正常工作

> ID：10998433
> 
> 赞同：1
> 
> 时间：2012-06-12T14:10:12.583
> 
> 标签：php, mysql, zend-framework, zend-paginator

嗨，当 $business_list 数组格式如下时，我的 zend 分页器运行良好。

但是当数组格式改变时，它只显示一页而不是多页。

```
$paginator = Zend_Paginator::factory($business_list);

Array
(
    [0] => Array
        (
            [id] => 216
            [userid] => 141
            [title] => first req
            [image] => 
            [logo] => 
            [description] => 
this is the first requirment
            [date] => 2012-06-12 10:31:01
            [area] => 1
            [budget] => 1
            [type] => 1
            [status] => 1
            [CmBusinessSection] => Array
                (
                    [0] => Array
                        (
                            [id] => 315
                            [business_id] => 216
                            [section_id] => 1
                            [subsection_id] => 13
                            [description] => 
                        )

                    [1] => Array
                        (
                            [id] => 316
                            [business_id] => 216
                            [section_id] => 3
                            [subsection_id] => 14
                            [description] => 
                        )

                    [2] => Array
                        (
                            [id] => 317
                            [business_id] => 216
                            [section_id] => 4
                            [subsection_id] => 15
                            [description] => 
                        )

                )

            [CmUser] => Array
                (
                    [id] => 141
                    [username] => venki
                    [password] => 
                    [firstname] => venkatesh
                    [lastname] => abus
                    [image] => 54winter.jpg
                    [email] => xxx@xx.com
                    [phone] => 23423452
                    [group_id] => 2
                    [status] => 
                    [registered_date] => 2012-06-04 06:32:58
                    [last_visit] => 0000-00-00 00:00:00
                    [is_active] => 1
                    [subscribe] => 1
                )

        )

    [1] => Array
        (
            [id] => 214
            [userid] => 98
            [title] => gopicontractor
            [image] => 54bluehills.jpg
            [logo] => 239waterlilies.jpg
            [description] => 
TIt uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is
            [date] => 2012-06-11 12:18:58
            [area] => 1
            [budget] => 1
            [type] => 3
            [status] => 1
            [CmBusinessSection] => Array
                (
                    [0] => Array
                        (
                            [id] => 305
                            [business_id] => 214
                            [section_id] => 1
                            [subsection_id] => 5
                            [description] => 
                        )

                    [1] => Array
                        (
                            [id] => 306
                            [business_id] => 214
                            [section_id] => 1
                            [subsection_id] => 6
                            [description] => 
                        )

                    [2] => Array
                        (
                            [id] => 307
                            [business_id] => 214
                            [section_id] => 3
                            [subsection_id] => 1
                            [description] => 
                        )

                    [3] => Array
                        (
                            [id] => 308
                            [business_id] => 214
                            [section_id] => 4
                            [subsection_id] => 9
                            [description] => 
                        )

                )

            [CmUser] => Array
                (
                    [id] => 98
                    [username] => gopi.s
                    [password] => 
                    [firstname] => venkatesh
                    [lastname] => franc
                    [image] => 
                    [email] => ss@ss.com
                    [phone] => 23423452
                    [group_id] => 3
                    [status] => 
                    [registered_date] => 2012-05-16 12:36:57
                    [last_visit] => 0000-00-00 00:00:00
                    [is_active] => 1
                    [subscribe] => 1
                )

        )
) 
```

上述数组格式正确显示分页。

这是在分页中仅显示一页的数组。

Zend_Paginator 对象 (

```
[_cacheEnabled:protected] => 1
[_adapter:protected] => Zend_Paginator_Adapter_Array Object
    (
        [_array:protected] => Array

            (
                [0] => Array
                    (
                        [id] => 89
                        [username] => xx
                        [password] => xx
                        [firstname] => xx
                        [lastname] => xx
                        [image] => 
                        [email] => xx@ymail.com
                        [phone] => 2342345
                        [group_id] => 2
                        [status] => offline
                        [registered_date] => 2012-05-15 10:58:53
                        [last_visit] => 
                        [is_active] => 1
                        [subscribe] => 0

                        [CmBusiness] => Array
                            (
                                [0] => Array
                                    (
                                        [id] => 204
                                        [userid] => 89
                                        [title] => xxhousing
                                        [image] => 760067.jpg
                                        [logo] => xx_818f3c97e6_o.jpg
                                        [description] => xx
                                        [date] => 2012-05-31 13:36:17
                                        [area] => 1
                                        [budget] => 1
                                        [type] => 1
                                        [status] => 1

                                        [CmAmount] => Array
                                            (
                                                [id] => 1
                                                [amount] => 1000-1500
                                                [status] => 1
                                            )

                                        [CmBusinessSection] => Array
                                            (
                                                [0] => Array
                                                    (
                                                        [id] => 251
                                                        [business_id] => 204
                                                        [section_id] => 1
                                                        [subsection_id] => 6
                                                        [description] => xx

                                                    )
                                                [1] => Array
                                                    (
                                                        [id] => 252
                                                        [business_id] => 204
                                                        [section_id] => 3
                                                        [subsection_id] => 2
                                                        [description] => xx

                                                    )
                                                [2] => Array
                                                    (
                                                        [id] => 253
                                                        [business_id] => 204
                                                        [section_id] => 3
                                                        [subsection_id] => 4
                                                        [description] => xx

                                                    )
                                                [3] => Array
                                                    (
                                                        [id] => 254
                                                        [business_id] => 204
                                                        [section_id] => 4
                                                        [subsection_id] => 9
                                                        [description] => xx
                                                    )
                                           )
                                        [CmArea] => Array
                                            (
                                                [id] => 1
                                                [area] => manchester
                                                [status] => 1
                                            )
                                        [CmType] => Array
                                            (
                                                [id] => 1
                                                [type] => Personal business
                                                [status] => 1
                                            )

                                    )
                                [1] => Array
                                    (
                                        [id] => 205
                                        [userid] => 89
                                        [title] => xx
                                        [image] => 41217850-desktop-wallpapers-new-windows-xp.jpg
                                        [logo] => 356anger_n.jpg
                                        [description] => xx

                                        [date] => 2012-05-31 13:37:15
                                        [area] => 1
                                        [budget] => 1
                                        [type] => 3
                                        [status] => 1
                                        [CmAmount] => Array
                                            (
                                                [id] => 1
                                                [amount] => 1000-1500
                                                [status] => 1
                                            )
                                       [CmBusinessSection] => Array
                                            (
                                                [0] => Array
                                                    (
                                                        [id] => 255
                                                        [business_id] => 205
                                                        [section_id] => 1
                                                        [subsection_id] => 6
                                                        [description] =>xx
                                                    )
                                                [1] => Array
                                                    (
                                                        [id] => 256
                                                        [business_id] => 205
                                                        [section_id] => 3
                                                        [subsection_id] => 1
                                                        [description] => xx
                                                    )
                                                [2] => Array
                                                    (
                                                        [id] => 257
                                                        [business_id] => 205
                                                        [section_id] => 3
                                                        [subsection_id] => 2
                                                       [description] => xx
                                                    )
                                                [3] => Array
                                                    (
                                                        [id] => 258
                                                        [business_id] => 205
                                                        [section_id] => 4
                                                        [subsection_id] => 10
                                                        [description] => xx

                                                    )
                                            )
                                        [CmArea] => Array
                                            (
                                                [id] => 1
                                                [area] => manchester
                                                [status] => 1
                                            )
                                        [CmType] => Array
                                            (
                                                [id] => 3
                                                [type] => Bilde companies
                                                [status] => 1
                                            )

                                    )
                                [2] => Array
                                    (
                                        [id] => 206
                                        [userid] => 89
                                        [title] => Nuestros recursos
                                        [image] => 
                                        [logo] => 
                                        [description] => xx
                                        [date] => 2012-05-31 13:38:04
                                        [area] => 1
                                        [budget] => 1
                                        [type] => 4
                                        [status] => 1
                                        [CmAmount] => Array
                                            (
                                                [id] => 1
                                                [amount] => 1000-1500
                                                [status] => 1
                                            )
                                        [CmBusinessSection] => Array
                                            (
                                                [0] => Array
                                                    (
                                                        [id] => 259
                                                        [business_id] => 206
                                                        [section_id] => 1
                                                        [subsection_id] => 5
                                                        [description] => 
                                                    )
                                                [1] => Array
                                                    (
                                                        [id] => 260
                                                        [business_id] => 206
                                                        [section_id] => 1
                                                        [subsection_id] => 6
                                                        [description] => 
                                                    )
                                                [2] => Array
                                                    (
                                                        [id] => 261
                                                        [business_id] => 206
                                                        [section_id] => 3
                                                        [subsection_id] => 2
                                                        [description] => 
                                                    )
                                                [3] => Array
                                                    (
                                                        [id] => 262
                                                        [business_id] => 206
                                                        [section_id] => 4
                                                        [subsection_id] => 10
                                                        [description] => 
                                                    )

                                            )
                                        [CmArea] => Array
                                            (
                                                [id] => 1
                                                [area] => manchester
                                                [status] => 1
                                            )
                                        [CmType] => Array
                                            (
                                                [id] => 4
                                                [type] => Designer
                                                [status] => 1
                                            )

                                    )

                            )

                    )

            )

        [_count:protected] => 1
    )
[_currentItemCount:protected] => 
[_currentItems:protected] => 
[_currentPageNumber:protected] => 1
[_filter:protected] => 
[_itemCountPerPage:protected] => 2
[_pageCount:protected] => 1
[_pageRange:protected] => 
[_pages:protected] => 
[_view:protected] => 
```

)

# java - 如何在本地网络上查找活动服务器的实例？

> ID：10998435
> 
> 赞同：0
> 
> 时间：2012-06-12T14:10:24.330
> 
> 标签：java, sockets, networking, client

我有一个 Java 电子表格应用程序，它提供的功能之一（我开发的）是工作表共享。基本上，任何人都可以是客户端或服务器，因为该应用程序同时具有服务器和客户端代码。作为服务器的用户创建共享，指定 IP，然后创建共享并激活（最佳情况），服务器在其 IP 和选定端口上侦听客户端。

此时，客户端需要输入正在侦听的服务器的 IP 和端口才能连接。然后，服务器为该客户端创建一个新套接字并在单独的线程上与 in 通信，而服务器继续侦听另一个线程（传统的 TCP 行为）。这一切都很好。

我需要开发的是自动发现，例如客户端不需要输入 IP 或端口，他们只需从菜单中选择“加入共享...”，然后它就开始寻找服务器。当找到一个时，它应该发送它在该 IP 上的活动共享列表。然后用户从列表中选择要加入的共享，并连接。

但是，我对如何解决这个问题存有疑问。我应该像 DHCP 那样使用广播来轮询服务器吗？或者有没有更简单的方法？

我想实现的是：

客户端 -> 轮询本地网络 -> 找到服务器 -> 服务器向客户端发送活动共享列表 -> 客户端选择要加入的共享 -> 已连接！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:46:58.870

从技术上讲，您正在寻找的是运行电子表格应用程序的活动服务器。

一种可能性是您的服务器代码每隔一段时间（比如每 15 秒）向网络发送一条“活动”消息。您的客户端代码将侦听这些“活动”消息，并生成有意义的电子表格服务器列表。

另一种可能性是使用您用来存储电子表格的相同数据库引擎来存储所连接服务器代码的 IP 和端口。客户端代码只会读取数据库表以获取连接。

# iphone - NavigationController 不旋转

> ID：10998436
> 
> 赞同：0
> 
> 时间：2012-06-12T14:10:27.167
> 
> 标签：iphone, objective-c, ios, xcode, uinavigationcontroller

我有两个视图，都在 NavigationController 下。我**不**希望视图 1（左侧）旋转，但我**确实**希望视图 2（右侧）旋转。视图 1 和视图 2 被路由到不同的类。 ![在此处输入图像描述](../Images/0ba45bb7d854ec15067786a58a402b59.png)

我将此代码放在 View 2 类中以实现该行为，但它不起作用。它适用于我的应用程序中的模态视图，我想

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

我不想让视图№1 在任何情况下都可以旋转。任何想法如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:14:23.753

您想要的行为对用户不友好，并且可能对 HIG 不利。它不起作用的原因是 UINavigationController 中有针对这种破坏性行为的保护。当您拥有具有不同旋转规则的视图控制器导航、选项卡或模式时，它有时可能会失败、抖动或根本无法正常工作，如您所见。

基本上我是说不要这样做。并不是说它不可能。

# asp.net-mvc-3 - .NET 4.5 / VS2012 中带有句点的 MVC3 路由

> ID：10998441
> 
> 赞同：0
> 
> 时间：2012-06-12T14:10:35.437
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, visual-studio-2012, asp.net-4.5

我在 VS2010/.NET 4/MVC3 中工作的路线似乎在 VS2012 和 .NET 4.5 中被破坏（尽管仍然使用 MVC3）。

以前我有这样的路线：-

```
routes.MapRoute("TMS", "{controller}/{action}/{id}.{extension}"); 
```

已成功匹配 uri：

`/Test/Test/tile.png`

它调用了以下`Test`操作`TestController`：-

```
public ActionResult Test(string id, string extension) 
```

使用 id = "tile" 和 extension="png"。

然而，在 VS2012 的一个相同项目中，尽管使用 .NET 4.5，但由于路由不匹配，我得到了 404。将句点更改为路由中的 / 和 uri 会导致路由匹配并调用操作，但这还不够好 - 我需要在路由中设置那个句点，就像以前工作的那样（因为这个动作是设计的将磁贴作为 TMS 服务器提供服务；URL 格式是一种 API）。

有没有人遇到过这样的问题？

`<httpRuntime relaxedUrlToFileSystemMapping="true"/>`根本没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:20:08.020

我想知道您正在测试的 2 个环境之间的 Web 服务器设置是否不同：如果 .png 扩展名未设置为由 MVC 处理，或者选中了“验证物理文件是否存在”选项。

# iphone - SetNeedsDisplay 单点触控

> ID：10998445
> 
> 赞同：3
> 
> 时间：2012-06-12T14:10:55.000
> 
> 标签：iphone, xamarin.ios

我正在尝试使用 MonoTouch 创建自定义 ProgressBar。我创建了一个用计时器重绘线条的类。我的问题是，当`SetNeedsDisplay`被调用时，视图不会重绘自身。只有在提供触摸时才会`SetNeedsDisplay`调用 OnDraw 方法。我该怎么做才能在`OnDraw`没有触摸的情况下调用该方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:38:56.330

您需要确保`SetNeedsDisplay`在 ui-thread 中调用，否则它不会重绘视图。[来源](https://stackoverflow.com/questions/1503761/what-is-the-most-robust-way-to-force-a-uiview-to-redraw)

# nservicebus - NServiceBus Studio - 从一个事件开始

> ID：10998448
> 
> 赞同：0
> 
> 时间：2012-06-12T14:11:04.220
> 
> 标签：nservicebus

我正在关注 TekPub ( [http://tekpub.com/view/nsb/1](http://tekpub.com/view/nsb/1) ) 上的 NSB 视频，作为对 NSB Studio 的介绍（顺便说一句，做得很好）。我可以很好地创建 PetShop 示例，但现在我正在寻找创建自己的系统。在 PetShop 示例中，流程从 Sales 组件（在 FrontEnd 端点中）开始在总线上*发送*SubmitOrder 命令。创建 SubmitOrder 命令后，Studio 创建了一个 SubmitOrderSender，它托管在 FrontEnd 端点中。

在我现有的系统中，我有一个可以做一些工作的进程，我想用一个*事件*而不是一个*命令*来启动 NSB 进程。在 Studio 中，我创建了一个新服务（“Foo”）并手动添加了一个新组件（“XxxRecievedSender”）。然后我让 XxxReceivedSender 发布一个事件（“XxxReceived”）。然后我右键单击 XxxReceived 事件，并添加了一个新订阅者（“通知”）。Studio 创建了通知服务并添加了一个订阅 XxxReceivedEvent 的“XxxReceivedProcessor”。

我从视频中注意到的不同之处在于，生成的 SubmitOrderSender 具有 ISubmitOrder 接口和 Send(SubmitOrder) 方法。因为我手动创建了我的 XxxReceivedSender，所以我没有这些，所以我添加了它们（除了 Publish 而不是 Send）。然后，在我的 mvc 前端，我将 IXxxReceivedSender 添加到家庭控制器，然后执行 Sender.Push(new XxxReceived())。然后，我遇到了需要将 MsmqSubscriptionStorage() 添加到 .configure() 的错误，然后出现更多未创建队列的错误。一旦我修复了这两个问题，应用程序就会运行，但是当事件发布时，不会收到 XxxReceivedProcessor。

我在想我在这里做错了什么，但我无法弄清楚它是什么。有什么建议吗？由于 Studio 是一个全新的功能，我会对正确使用它的方式非常感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:54:41.517

尝试查看订阅端点中的 UnicastBusConfig，看看那里有一个条目告诉 NServiceBus 在 MVC 端点订阅您的事件。

如果已处理，则自行启动订阅者并查看消息到达您的发布者。如果是这样，则启动发布者并查看消息是否已处理并且错误队列中没有消息。

# php - 无法为 $_SESSION 赋值

> ID：10998450
> 
> 赞同：1
> 
> 时间：2012-06-12T14:11:11.193
> 
> 标签：php, mysql, session, variables, variable-assignment

```
session_start();
//Yes i did call session start but forgot to add it here
print $userID.":::";

$_SESSION['id'] = $userID;
$_SESSION['email'] = $userEmail;
$_SESSION['password'] = $userPassword;
$_SESSION['picture'] = $userProfilePicture;
print "ID: ".$_SESSION['id']; 
```

结果：1:::ID:

我无法将任何变量分配给代码中的会话变量，这是为什么呢？我以前做过，除了变量之外，代码是相同的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:15:05.873

为了让会话在 PHP 页面上运行，您必须调用 session_start(); 功能位于您要访问会话的每个页面的顶部。

# php - GD lib 文本在 y 坐标中的位置

> ID：10998452
> 
> 赞同：0
> 
> 时间：2012-06-12T14:11:14.393
> 
> 标签：php, image-processing, gd

我正在使用 GD 在图像上放置文本。GD 将文本放在基线上。我正在使用 ImageTTFBBox 来获取框的高度，并且能够计算出文本底部的位置。但是由于 gd 使用基线来放置文本。如何确定基线在哪里？文本、位置和大小都是动态的。

例如，我使用 giddyup 52px 字体并将其放在左上角，没有边距/填充。我使用 ImageTTFBBox 获得文本高度，它是 54px。所以我使用 imagettftext() 将文本放置在 0,54px 处。

文本将向下约 12 像素，因为文本框的基线位于 54 像素，而不是文本的底部，最终约为 66 像素。

感谢您的时间，

托德

# c# - 使用 Moq 验证委托

> ID：10998455
> 
> 赞同：44
> 
> 时间：2012-06-12T14:11:20.070
> 
> 标签：c#, unit-testing, delegates, moq

我有一个通过参数获得委托的类。这个类调用那个委托，我想用 Moq 对它进行单元测试。我如何验证这个方法是否被调用？

示例类：

```
public delegate void Foo(int number);

public class A
{
   int a = 5;

   public A(Foo myFoo)
   {
      myFoo(a);
   }
} 
```

我想检查 Foo 是否被调用。谢谢你。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-09-11T18:54:39.940

从[这个提交](https://github.com/Moq/moq4/commit/e614ae5b4a14896503b59e2a70ac799bb66e741b)起，起订量现在支持模拟代表，对于您的情况，您可以这样做：

```
var fooMock = new Mock<Foo>();
var a = new A(fooMock.Object); 
```

然后您可以验证委托已被调用：

```
fooMock.Verify(f => f(5), Times.Once); 
```

或者：

```
fooMock.Verify(f => f(It.IsAny<int>()), Times.Once); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-12T14:41:33.893

使用匿名函数怎么样？它可以在这里像一个内联模拟，你不需要一个模拟框架。

```
bool isDelegateCalled = false;
var a = new A(a => { isDelegateCalled = true});

//do something
Assert.True(isDelegateCalled); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T14:19:54.293

Moq 不支持模拟代表。但是您可以使用与您的委托签名匹配的方法创建一些接口：

```
public interface IBar
{
    void M(int number);
} 
```

然后创建mock，它实现了这个接口，并使用这个mock对象来创建delegate：

```
Mock<IBar> bar = new Mock<IBar>();
Foo foo = new Foo(bar.Object.M); 
A a = new A(foo);
bar.Verify(x => x.M(5)); 
```

练习完 sut 后，您将能够验证对模拟对象的期望。

更新：实际上您可以简单地传递`bar.Object.M`给您的 sut，而无需`Foo`创建委托实例。但无论如何，模拟委托需要创建接口。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-12T14:20:55.410

你可以这样做：

```
 public interface IWithFOOMethod
 {
     void FooAlikeMethod(int number);
 }

 Mock<IWithFOOMethod> myMock = new Mock<IWithFOOMethod>();

 A a = new A(myMock.Object.FooAlikeMethod);

 myMock.Verify(call => call.Foo(It.IsAny<int>()), Times.Once()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T14:37:21.900

由于 Moq 不支持模拟代表，我通常会使用以下方式处理此问题：

```
var list = new List<int> ();
var del = i => list.Add (i);
var a = new A(del);
list.ShouldContainOnly (new[] { 5 }); 
```

提供的委托执行一些简单的、可验证的操作。

# c++ - 更高效地写入硬盘

> ID：10998464
> 
> 赞同：0
> 
> 时间：2012-06-12T14:11:57.823
> 
> 标签：c++, hard-drive

我正在使用 std::fstream 将图像流写入硬盘。由于大多数硬盘驱动器都有 32MB 的缓存，是创建一个缓冲区以累积高达 32MB 的图像数据然后写入磁盘更有效，还是将每个图像都写入磁盘更有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:14:31.037

缓存用作读/写缓存，以缓解由于排队引起的问题……以下是我使用磁盘的经验：

1.  如果磁盘不是 SSD，那么串行写入比寻找文件更好。寻找是 I/O 性能的杀手。
2.  磁盘通常以扇区大小写入。扇区大小通常为 512b 或 4k（较新的磁盘）。尝试一次写入一个扇区的数据。
3.  捆绑 I/O 总是比多个小型 I/O 快。简单的原因是磁盘上的处理器有一个较小的队列要刷新。
4.  无论你能凭记忆服务，服务。仅在必要时使用磁盘。您始终可以在写入时执行修改/无效缓存条目，具体取决于您的可靠性策略。确保你不交换，所以你的内存缓存大小必须是合理的，开始。
5.  如果您正在执行此 I/O 管理，请确保您没有使用操作系统页面缓存进行双重缓冲。O_DIRECT 为此。
6.  如果可靠性不是问题，请使用非阻塞。O_NONBLOCK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:20:22.677

系统的每个部分，从`fstream`磁盘驱动程序到磁盘驱动程序，都比您的应用程序更了解特定效率。

如果您尝试过，您无法改进各种缓冲方案，所以不要打扰。

# blackberry - 如何以编程方式在日语中设置应用程序名称？

> ID：10998467
> 
> 赞同：3
> 
> 时间：2012-06-12T14:12:01.897
> 
> 标签：blackberry, java-me

目前我正在尝试使用设置应用程序名称

```
net.rim.blackberry.api.homescreen.HomeScreen.setName("これはある"); 
```

但它抛出异常：`IllegalArgumentException`。

任何人都可以提供解决方案吗？

我正在使用黑莓 JDE 5.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:32:56.100

这可能是字符串编码问题。尝试

`new String(new String("これはある").getBytes("UTF-16BE"), "UTF-16BE");`

这不漂亮，但我认为这会奏效。

这是黑莓字符串规范的链接：http: [//www.blackberry.com/developers/docs/5.0.0api/java/lang/String.html](http://www.blackberry.com/developers/docs/5.0.0api/java/lang/String.html)

默认情况下，它是 ISO-8859-1，不包括日文字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:55:23.000

您面临的问题是如何将源代码中表示的字符串以相同的字符放入您的应用程序中。对于拉丁字符，这非常简单，因为我们可以将字符放在引号中，然后得到一个字符串，例如“Hello world”

当你去非拉丁语，比如日语，它会变得更难。您仍然可以直接在源代码中编写日语，但您需要确保您的编辑器和编译器在编码上达成一致，以便正确解释字符。Java-SE 编译器接受一个参数“-encoding”，它允许您指定 Java 源文件的编码。
不幸的是，黑莓编译器 rapc 不提供指定编码的选项，即使它调用 javac 本身也是如此。因此 rapc 使用平台默认值，在 Linux 和 OSX 上为 utf-8，在 Windows 上为 iso-8859-1。

解决这个问题的方法是使用 Java 语言的一个特性来解析字符串——unicode 转义。通过在字符串中输入六个字符序列“\u3053”，java 编译器会将该数字解析为十六进制并使用相应的 unicode 代码点，从而解决源文件编码问题。所以 "Hello world" 和 "\u0048\u0065\u006c\u006c\u006f\u0020\u0057\u006f\u0072\u006c\u0064" 将导致相同的字符串出现在你的类文件中。

正因为如此，斯维特林从评论中的回答是正确的方法：

```
net.rim.blackberry.api.homescreen.HomeScreen.setName("\u3053\u308C\u306F\u3042\u‌​308B"); 
```

# java - 使用 int 或 Integer

> ID：10998470
> 
> 赞同：4
> 
> 时间：2012-06-12T14:12:07.153
> 
> 标签：java, integer, int

在我的代码中有很多最终值，比如 10000。它们永远不会改变，我对它们什么都不做，只是有时会检查`if(number1 == number2)`.

`int`使用或`Integer`这样的数字更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T14:13:35.697

在您的情况下，使用`int`.

在一般情况下，如果您处于可以可行地使用原始值几乎总是首选的情况：

*   它们可能更节省内存
*   您始终可以可靠地使用 ==，而类类型并非如此`Integer`- 您必须使用它`.equals()`来确保您得到了您想要的东西。有关更多详细信息，请参见[此处](https://www.owasp.org/index.php/Java_gotchas#Immutable_Objects_.2F_Wrapper_Class_Caching)。

如今，内存需求已不再是一个问题，但最大的问题是第二个问题，如果您不知道它可能会导致很多错误（特别是因为有些情况下`==`会按您的预期工作） ，以及其他不会的 - 从这个意义上说，它不是一个“可靠”的错误。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T14:13:28.200

由于`Integer`s 是对象，因此它们会占用更多内存空间。如果您从不使用`Integer`方法或其他任何需要它成为对象的东西，那么`int`s 的内存效率更高，因为`int`它是一种原始类型。

在宏伟的计划中，考虑到现代计算机有多少内存，这可能并不重要。不过安全无害。

我应该注意，如果您使用`==`for `Integer`s，您正在检查引用是否相同。对于`Integer`对象，该`equals()`方法将是首选。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T14:13:26.560

使用 int，因为它是原始类型。由于内存效率，选择原始类型而不是选择完整的包装对象始终是更好的选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T14:15:05.150

`int`它是还是并不重要`Integer`。在 java 中，它们可以通过使用[autoboxing](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)来互换。

但是，如果您打算将它们存储在一个集合中，它确实会有所不同。集合只接受对象，这意味着您必须使用`Integer`.

如果您决定使用`Integer`并想比较它们，请不要使用`==`. 相反，使用`compareTo`方法或`equals`方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T14:18:02.253

您正在比较参考，因此最好使用 int。切勿使用“==”来比较 Integer 对象（或 Float、Double、Short、Character、Byte、Long、BigDecimal...）是否相等。比较原始形式的数字——即使用 int、short、long、double。

如果要比较整数，请使用方法 compareTo()。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-12T14:27:40.053

可以使用**int ，必须使用 Integer**：

如果这些值可以为空`Integer`，但您必须使用这些方法`compareTo`并`Equals`在它们之间进行比较。

如果您的值不能为空，请使用`int`，这样您将使用经典运算符`==`、`>=`、`<`等获得更具可读性的代码...

```
 // int primitive, easy to handle
 int a = 5;
 int b = 5;
 int c = null; // Compile error, can't have null primitive values
 if(a == b) // True
 if(a > b) // False
 if(a >= b) // True

 // Integer, more complicated:
 Integer A = new Integer(5);
 Integer B = new Integer(5);
 Integer c = null; // Work

 if(A == B) // False, they are not the same objects
 if(A.equals(B)) // True, same value

 if(A > B) // Compile error...
 if(A.compareTo(B)>0) // A > B, the int version is more readable
 if(A.compareTo(B)>=0) // A >= B, the int version is more readable 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-12T14:29:50.880

对于常量使用`int`，与常量一样，您只需要能够获取它们的值。在这种情况下，所有其他附带的东西`Integer`都是多余的。

在您需要将整数作为参数传递的情况下，使用它会很方便，`Integer`因为您可以获得参数值的另一个选项`null`（即具有无效参数的情况，或合法的无值情况）。

# iphone - 使用 GCD 创建循环

> ID：10998476
> 
> 赞同：4
> 
> 时间：2012-06-12T14:12:17.527
> 
> 标签：iphone, objective-c, objective-c-blocks, grand-central-dispatch

所以这就是我所拥有的：

```
 dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.1*NSEC_PER_SEC), dispatch_get_current_queue(), ^{
                bool ready = some_function();
                if( ready ) {                    
                   do_smth_here()
                } else {
                   //invoke this block one more time after 0.1 sec
                }
            }); 
```

问题是如何获得对当前块的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T21:49:14.320

我通常不会跳过上面显示的循环，而是声明一个我可以调用的实例方法，在内部，它会根据需要处理重新触发。这样，任何给定的块都是一次性的，但重新触发会创建一个新块。

只要块的创建不是非常昂贵——如果状态来自封装实例方法的任何东西就不会那么昂贵——它就足够高效并且简单得多。

```
- (void) retriggerMethod
{
     ... do stuff here, assuming you want to do it on first invocation ...
     dispatch_after( ..., ^{
         [self retriggerMethod];
     });
} 
```

您可以根据需要对其进行重组。如果您想防止同时重新触发等，您可以轻松添加 BOOL 实例变量......

这也为取消提供了方便的钩子；只需向实例添加一个 BOOL ，指示下一次调用是否真的应该做任何事情并重新安排。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T20:12:31.313

Jeffrey Thomas 的答案很接近，但是在 ARC 下，它会泄漏块，而没有 ARC，它会崩溃。

如果没有 ARC，`__block`变量就不会保留它所引用的内容。块是在堆栈上创建的。所以`callback`变量指向堆栈上的一个块。当您第一次传递`callback`到`dispatch_after`（块外）时，`dispatch_after`成功地在堆上制作了块的副本。但是，当该副本被调用并再次传递`callback`给`dispatch_after`时，`callback`是一个悬空指针（指向堆栈上现在已销毁的块），并且`dispatch_after`（通常）会崩溃。

使用 ARC，`__block`块类型的变量（如`callback`）会*自动*将块复制到堆中。所以你不会遇到崩溃。但是对于 ARC，`__block`变量会保留它引用的对象（或块）。这导致了一个保留周期：块引用自身。Xcode 将在递归`dispatch_after`调用中向您显示警告：“在此块中强烈捕获'回调'可能会导致保留周期”。

要解决这些问题，您可以显式复制块（将其从堆栈移动到 MRC 下的堆）并设置`callback`为 nil（在 ARC 下）或释放它（在 MRC 下）以防止泄漏：

```
 __block void (^callback)() = [^{
        if(stop_) {
            NSLog(@"all done");
#if __has_feature(objc_arc)
            callback = nil; // break retain cycle
#else
            [callback release];
#endif
        } else {
            NSLog(@"still going");
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 1*NSEC_PER_SEC), dispatch_get_current_queue(), callback);
        }
    } copy];
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 1*NSEC_PER_SEC), dispatch_get_current_queue(), callback); 
```

显然，您可以删除`#if`并只使用适合您的内存管理的分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T16:17:46.300

我认为这是您正在寻找的代码：

```
__block void (^callback)();
callback = ^{
    bool ready = some_function();
    if( ready ) {
        do_smth_here()
    } else {
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.1*NSEC_PER_SEC), dispatch_get_current_queue(), callback);
    }
};

dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.1*NSEC_PER_SEC), dispatch_get_current_queue(), callback); 
```

感谢[^ Blocks 提示和技巧](http://www.friday.com/bbum/2009/08/29/blocks-tips-tricks/)

# image - Qt 中的 SVG 映射

> ID：10998485
> 
> 赞同：1
> 
> 时间：2012-06-12T14:12:43.797
> 
> 标签：image, qt, svg, mapping

我有一个位置的地图。我需要创建一个包含不同映射区域的 SVG 文件。即我想在地图上定义多个多边形，并映射它们的坐标。然后我需要做的是能够在 Qt 中操作该文件。

例如：我从谷歌地球上拍了一张图片，我为我的游泳池画了一个多边形，为我的房子画了一个多边形。使用 Qt 的 SVG 模块，我希望能够访问我创建的那些多边形以及它们的坐标，例如 QGraphicsItem。

如果这令人困惑，我很抱歉，如果我能澄清一下，请告诉我。

# java - C2DM 实施建议

> ID：10998489
> 
> 赞同：0
> 
> 时间：2012-06-12T14:12:56.353
> 
> 标签：java, android, android-c2dm

苦苦挣扎的程序员们，

我已经查阅了有关 c2dm 的所有文档，但仍在寻找一些建议。我是否需要在我的应用程序中实现一个服务来监听谷歌服务器将它们推送到设备时创建的意图？

[http://android-developers.blogspot.com/2010/05/android-cloud-to-device-messaging.html](http://android-developers.blogspot.com/2010/05/android-cloud-to-device-messaging.html)

[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

文档说明它会在收到 Intent 时通过在应用程序清单中具有正确的 Intent 过滤器和权限来唤醒应用程序。但是，当应用程序甚至没有加载到内存中时，这怎么可能呢？操作系统如何知道要去哪里？

在我看来，我需要一个具有这些权限的后台服务，然后在收到通知时启动我的应用程序。

有人对这个想法有一些见解吗？

也许有人使用 c2dm 实现了后台服务

或发现它是不需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:21:49.880

意图过滤器不需要启动应用程序或服务。当操作系统看到您已为其注册 Intent 过滤器的事件发生时，它将启动 Intent 过滤器附加到的 Intent，如清单中所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:36:07.563

一般来说，您不需要服务。这取决于您需要对消息做出什么样的反应。如果您想开始一项活动 - 可以直接从 C2DM 消息接收器开始。

顺便说一句，C2DM 意图不是服务意图。它们是接收者意图。服务即使想要也无法捕获它们。*在 API 级别上，您本身*不能触发意图- 您有 call `startActivity()`、 or `start/bindService()`、 or `sendBroadcast()`。根据调用的 API，系统会将意图与活动、服务或接收者进行匹配。

我已经实现了 C2DM。就我而言，我确实有一项服务——但这只是因为我的应用程序中对 C2DM 消息的反应是一个无 UI 的 HTTP 请求，可能需要一些时间。这似乎是宏观方案中相当常见的模式——C2DM 只是一个触发器，它只告诉应用程序新数据在后端等待。在这种情况下，服务会悄悄地向后端查询所述新数据并进行处理。这就是我的情况。但它不必是这种方式。

单独的接收器不是 HTTP 的好工具，因为接收器对象是瞬态的——一旦传递了一个意图，Android 就会假定接收器完成并丢弃它。在此之后，应用程序的进程没有运行对象，并且随时可能关闭。另一方面，服务一旦启动，就会一直运行，直到明确完成（`stopService()`被调用）。这告诉 Android 应用程序正在做某事，请不要终止。正在运行的服务并不能保证应用程序在内存不足的情况下不会关闭，但总比没有好。

从技术上讲，即使唯一运行的是广播接收器，您的应用程序也在运行。当 C2DM 消息到达时，Android 将启动应用程序（进程，而不是主要活动）。除非您刷新一些 UI，否则用户不会知道。从接收器调用应用程序的哪些其他组件取决于您。

# apache-flex - 如何在 flash-builder 中进行简单的文本输入数学计算？

> ID：10998492
> 
> 赞同：-1
> 
> 时间：2012-06-12T14:13:05.203
> 
> 标签：apache-flex, math, flash-builder, sum

有人可以告诉我如何在 2 种情况下使用文本输入正确实现数学计算，如 (+,-,/,*)：

1 - 更多状态
2 - 在视图中输入结果在其他

这是我的代码的一部分：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        creationComplete="init()" currentState="State1" overlayControls="false" title="Calculator">
    <s:states>
        <s:State name="State1"/>
        <s:State name="RezultatCalculator"/>
    </s:states>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import spark.events.DropDownEvent;
            protected function init():void
            {
                addEventListener(TransformGestureEvent.GESTURE_SWIPE, swipeHandler);
            }
            protected function swipeHandler(event:TransformGestureEvent):void
            {
                if (event.offsetX == 1)
                {
                    navigator.pushView(CalculatorView);
                }
            }

            protected function primulcalcul_openHandler(event:DropDownEvent):void
            {
                // TODO Auto-generated method stub

            }

        ]]>
    </fx:Script>
    <s:Scroller includeIn="State1" left="3" right="3" top="0" height="547">
        <s:VGroup width="100%" height="100%" gap="24" horizontalAlign="justify" paddingTop="8"
                  verticalAlign="top">
            <s:Label id="actot" width="237" height="60" text="Active Totale" textAlign="center"
                     verticalAlign="middle"/>
            <s:TextInput id="actot_val" width="183" height="60" fontFamily="_sans" fontSize="28"
                          textAlign="center" softKeyboardType="number" />
            <s:Label id="disp" width="159" height="60" text="Disponibilitati" textAlign="center"
                     verticalAlign="middle"/>
            <s:TextInput id="disp_val" width="164" height="60" fontFamily="_sans" fontSize="28"
                         textAlign="center" softKeyboardType="number"/>
            <s:Label id="datot" width="159" height="60" text="Datorii Totale" textAlign="center"
                     verticalAlign="middle"/>
            <s:TextInput id="datot_val" width="164" height="60" fontFamily="_sans"
                         fontSize="28" textAlign="center" softKeyboardType="number"/>
            <s:Label id="caprop" width="159" height="60" fontSize="24" text="Capitaluri Proprii"
                     textAlign="center" verticalAlign="middle"/>
            <s:TextInput id="caprop_val" width="164" height="60" fontFamily="_sans" fontSize="28"
                         textAlign="center" softKeyboardType="number"/>

            <s:Button id="butstart0" width="401" height="70" label="START"
                      click="currentState='RezultatCalculator'" enabled="true"/>
        </s:VGroup>
    </s:Scroller>
    <s:CalloutButton id="primulcalcul" includeIn="RezultatCalculator" x="22" y="28" width="145"
                     height="63" label="primulcalcul" enabled="true"
                     open="primulcalcul_openHandler(event)"/>
    <s:TextArea id="Primul_val" includeIn="RezultatCalculator" x="203" y="27" width="267"
                editable="false" prompt="result"/>
    <fx:Script>
        <![CDATA[
            import flash.globalization.NumberFormatter;
            import flashx.textLayout.formats.Float;
            import flashx.textLayout.formats.Float;
            import learnmath.mathml.components.MathMLFormula;
            import learnmath.mathml.formula.layout.MathBox;
            public function MathMLFormula():void
            {
                var Primul_val:Number=new Number
                var datot:Number=new Number
                var disp:Number=new Number
                    Primul_val=0
                NumberFormatter(TextArea(Primul_val))==NumberFormatter(TextInput(datot))+NumberFormatter(TextInput(disp)); /* this is one of the examples, i tied some different values like valueOf */
            }
        ]]>
    </fx:Script>

</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:53:19.147

我有一些建议，但我不确定你的问题到底是什么。

首先，在您的 TextArea 上使用[限制](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/SkinnableTextBase.html#restrict)属性。限制属性将阻止人们输入非数字键。有点像这样：

```
 <s:TextInput id="datot_val" width="164" height="60" fontFamily="_sans"
                         fontSize="28" textAlign="center" softKeyboardType="number" restrict="0-9"/> 
```

如果您在支持它的设备上使用移动应用程序，那么使用 softKeyboardType 完全有可能使这成为非问题。

您在评论中提到的代码行看起来容易出错：

```
NumberFormatter(TextArea(Primul_val))==NumberFormatter(TextInput(datot))+NumberFormatter(TextInput(disp)); 
```

首先，datot 和 disp 是标签；不是文本输入。它们具有硬编码的非数字值。我认为您想使用 datot_val 和 disp_val。这是文本输入。由于它们已经是输入，因此您不需要像这样投射它们。

其次，您不需要将 TextInput 转换为 NumberFormatter。您通常不会将 NumberFormatter 用作静态类，而是创建它的实例。[有关NumberFormatter 的](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/formatters/NumberFormatter.html#includeExamplesSummary)更多信息，请点击此处。

所以，我相信你的行会被改写成这样：

```
 Primul_val.text== String(
                                int(datot.text) + int(disp.text)
                               ); 
```

我添加了一些额外的行，这样括号就不会混淆。我接受 datot (AKA datot.text) 的输入并将其转换为 int。我接受 disp (disp.text) 的输入并将其转换为 int。我将两者加在一起并将它们都转换为字符串。该字符串存储在 Primul_val 的文本值中。

这有助于清除任何东西吗？

# java - 是否可以确定视图列是否包含常量或仅 UI 数据？

> ID：10998495
> 
> 赞同：1
> 
> 时间：2012-06-12T14:13:09.413
> 
> 标签：java, lotus-notes, lotus-domino

根据 Lotus Notes 的[文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.api.doc%2Fr_domino_ViewEntry_ColumnValues.html)，包含具有常量值的列或 UI 仅用作其数据的视图，该列不会通过视图条目的 getColumnValues 方法包含在列值向量中。因此，如果您在视图中定义了 5 列，并且其中一列是常量值，则视图条目仅返回 4 列值的向量。

尽管从视图索引效率 POV 可以理解这一点，但不幸的是，它使开发人员在分析视图及其数据的元结构时面临重大困境。

IBM 一直未能（多年来？）提供一种方法来允许开发人员查询 viewColumns 结构以确定列值向量中缺少哪一列。是否有任何编程方法来确定从 viewentry 对象的 getColumnValues 方法中省略哪一列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:13:58.833

您可以诱使视图将列中的常量值视为公式。我相信它就像附加一个空字符串或将其包装在 @Text 公式中一样简单。例如：

```
"Constant Value"  // won't be returned by NotesViewEntry's getColumnValues() method

@Text("Constant Value")  // should be returned

"Constant Value" + ""  // should also be returned 
```

如果这不是一个选项，您可以通过 NotesView 类访问列本身。您应该能够将获得的列值与实际存在的列进行比较。通过将哪些列没有值与视图中存在的列列表进行比较，这应该告诉您哪些列被省略了。

或者，您可以检查列本身以查看哪些具有恒定公式或者是“仅 ui”的类型。不幸的是，我相信没有比这更好的方法了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:38:31.017

使用 NotesView.getColumns，然后使用 NotesViewColumn.isFormula()、isHidden() 和 isField() 来确定显示哪些列以及它们的值是什么。当您尝试确定列具有固定值时要非常小心...

# c# - 如果子外键已经存在，则 SaveChanges 上的 DbUpdateException - 在实体框架代码优先

> ID：10998498
> 
> 赞同：2
> 
> 时间：2012-06-12T14:13:23.970
> 
> 标签：c#, .net, sql, entity-framework, orm

[*将 Code First DbContext 与 Entity Framework 5.0 RC 一起使用*]

### 具有 2 个导航属性/2 个外键的实体

```
public class Compositon
{

    public string Id { get; set; }

    public string SimpletonId { get; set; }

    [ForeignKey("SimpletonId")]
    public Simpleton Simpleton { get; set; }

    public string CompanitonId { get; set; }

    [ForeignKey("CompanitonId")]
    public Companiton Companiton { get; set; }
} 
```

### 第一遍 - SaveChanges 到空数据库的工作

```
var composition = new Compositon();
compositon.Id = "UniquePrimaryKey";
var simpleton = new Simpleton();
// This foreign key does not exist in database yet
simpleton.Id = "Simpleton1";
composition.Simpleton = simpleton;
var companiton = new Companiton();
companiton.Id = "SomeOther1";
composition.Companiton = companiton;
// Repositor references the DbContext
Repositor.Compositons.Add(composition);
Repositor.SaveChanges(); 
```

### 第二遍 - 现有的子外键导致父错误

```
var composition = new Compositon();
compositon.Id = "AnotherUniquePrimaryKey";
var simpleton = new Simpleton();
// This foreign key already exists in database
simpleton.Id = "Simpleton1";
composition.Simpleton = simpleton;
var companiton = new Companiton();
companiton.Id = "SomeOther2";
composition.Companiton = companiton;
Repositor.Compositons.Add(composition);
Repositor.SaveChanges(); 
```

`DbUpdateException: An error occurred while updating the entries.`

*我需要能够将这些父类保存到数据库中，因为它们是唯一的，即使它们有时包含已经存储的导航属性 - 如何从这个子主键冲突中保存父类？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:41:46.000

在第二遍中，您将需要`Simpleton`从`DbContext`. 我猜你可以这样做：

```
`simpleton = Repositor.Simpletons.First(s => s.Id == "Simpleton1");` 
```

目前，您正在创建一个全新的，实体框架试图插入它，因此违反了密钥。

# c++ - Winsock2 - 如何在客户端使用 IOCP

> ID：10998504
> 
> 赞同：5
> 
> 时间：2012-06-12T14:13:39.493
> 
> 标签：c++, windows, sockets, visual-c++, winsock2

我最近开始在 Windows 上学习 IOCP，并一直在阅读以下文章：

[http://www.codeproject.com/Tips/95363/Another-TCP-echo-server-using-IOCP](http://www.codeproject.com/Tips/95363/Another-TCP-echo-server-using-IOCP)

您可以从以下位置下载文章的示例：

[http://dl.dropbox.com/u/281215/documentation/iocp-1.00.html](http://dl.dropbox.com/u/281215/documentation/iocp-1.00.html)

该示例包含两个简单的应用程序 - **iocp_echo_server**和**TcpEchoClient**。

我了解 IOCP 通常用于客户端/服务器模型的服务器端，但我想使用 IOCP 创建客户端。

到目前为止，我已经尝试修改上面的客户端示例，以便每当服务器向客户端发送响应时，它都会自动被拾取，但是它不起作用。

我保留了 iocp_echo_server.c 原样。我修改后的 TcpEchoClient.c 版本如下所示：

```
//TcpEchoClient.c - a minimalistic echo client
// -----------------------------------------------------------------------------

// C language includes
#include <stdio.h>
#include <winsock2.h>
#include "mswsock.h"  // for AcceptEx
#include <stdlib.h> // exit
#include <string.h>

// Windows includes
#include <windows.h>

#pragma warning(disable: 4996) // sprintf

// -----------------------------------------------------------------------------

// configuration
enum
{
    BUFLEN = 1000,
    SERVICE_PORT = 4000,
    SERVER_ADDRESS = INADDR_LOOPBACK
};

enum // socket operations
{
    OP_NONE,
    OP_ACCEPT,
    OP_READ,
    OP_WRITE
};

typedef struct _SocketState // socket state & control
{
    char operation;
    SOCKET socket;
    DWORD length;
    char buf[1024];
} SocketState;

// variables
static HANDLE cpl_port;

static SOCKET sock;
static SocketState sock_state;
static WSAOVERLAPPED sock_ovl;

static LPFN_ACCEPTEX pfAcceptEx;
static GUID GuidAcceptEx = WSAID_ACCEPTEX;

static int msgNumber;
static char msgBuf[BUFLEN];
static struct sockaddr_in sin;

// prototypes
static void createConnection(void);
static void createSocket(void);
static void init(void);
static void initWinsock(void);
static void prepareEndpoint(void);
static void recvBuffer(void);
static void run(void);
static void sendBuffer(void);

static SOCKET create_accepting_socket(void);
static void create_io_completion_port(void);
static BOOL get_completion_status(DWORD*, SocketState**,WSAOVERLAPPED**);

// -----------------------------------------------------------------------------

void main(void)
{
    init();
    run();
}

// -----------------------------------------------------------------------------

static void createConnection(void)
{
    printf("* connecting\n");
    if (WSAConnect(sock, (LPSOCKADDR)&sin, sizeof(sin), NULL, NULL, NULL, NULL) == SOCKET_ERROR)
    {
        int err = WSAGetLastError();
        printf("* error %d in connect\n", err);
        exit(1);
    }
    printf("* connected\n");
}

// -----------------------------------------------------------------------------

static void createSocket(void)
{
    sock = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);
    if (sock == INVALID_SOCKET)
    {
        int err = WSAGetLastError();
        printf("* error %d creating socket\n", err);
        exit(1);
    }

    // for use by AcceptEx
    sock_state.socket = 0; // to be updated later
    sock_state.operation = OP_ACCEPT;

    if (CreateIoCompletionPort((HANDLE)sock, cpl_port, (ULONG_PTR)&sock_state, 0) != cpl_port)
    {
        int err = WSAGetLastError();
        printf("* error %d in listener\n", err);
        exit(1);
    }
}

// -----------------------------------------------------------------------------

static void init(void)
{
    initWinsock();
    create_io_completion_port();
    createSocket();
    prepareEndpoint();
    createConnection();
}

// -----------------------------------------------------------------------------

static void initWinsock(void)
{
    WSADATA wsaData;

    if (WSAStartup(0x202, &wsaData) == SOCKET_ERROR)
    {
        int err = WSAGetLastError();
        printf("* error %d in WSAStartup\n", err);
        exit(1);
    }
}
// -----------------------------------------------------------------------------

static void prepareEndpoint(void)
{
    sin.sin_family = AF_INET;
    sin.sin_addr.s_addr = htonl(SERVER_ADDRESS);
    sin.sin_port = htons(SERVICE_PORT);

    // bind_listening_socket()
    {
        //if (bind(sock, (SOCKADDR*)&sin, sizeof(sin)) == SOCKET_ERROR)
        //{
        //    printf("* error in bind!\n");
        //    exit(1);
        //}
    }

    // start_listening()
    {
        //if (listen(sock, 100) == SOCKET_ERROR)
        //{
        //    printf("* error in listen!\n");
        //    exit(1);
        //}
        //printf("* started listening for connection requests...\n");
    }

    // load_accept_ex()
    {
        //DWORD dwBytes;

        // black magic for me!!!
        // You do not need to call in your code WSAIoctl. You can directly use AcceptEx and adds Mswsock.lib.
        //WSAIoctl(sock, SIO_GET_EXTENSION_FUNCTION_POINTER, &GuidAcceptEx, sizeof(GuidAcceptEx), &pfAcceptEx, sizeof(pfAcceptEx), &dwBytes, NULL, NULL);
    }

    // start_accepting()
    {
        //SOCKET acceptor = create_accepting_socket();
        //DWORD expected = sizeof(struct sockaddr_in) + 16;

        //printf("* started accepting connections...\n");

        // uses listener's completion key and overlapped structure
        //sock_state.socket = acceptor;
        //memset(&sock_ovl, 0, sizeof(WSAOVERLAPPED));

        // starts asynchronous accept
        //if (!pfAcceptEx(sock, acceptor, sock_state.buf, 0 /* no recv */, expected, expected, NULL, &sock_ovl))
        //{
        //    int err = WSAGetLastError();
        //    if (err != ERROR_IO_PENDING)
        //    {
        //        printf("* error %d in AcceptEx\n", err);
        //        exit(1);
        //    }
        //}
    }
}

// -----------------------------------------------------------------------------

static void recvBuffer(void)
{
    char* buf = msgBuf;
    int pendingLen = BUFLEN;

    printf("* receiving reply\n");

    while (pendingLen > 0)
    {
        int partialLen = recv(sock, buf, pendingLen, 0);

        if (partialLen > 0)
        {
            pendingLen -= partialLen;
            buf += partialLen;
            continue;
        }

        // ------

        if (partialLen == 0)
        {
            printf("* connection closed by the server\n");
        }
        else // partialLen < 0
        {
            int err = WSAGetLastError();
            printf("* error %d in recv\n", err);
        }

        exit(1);
    }
}

// -----------------------------------------------------------------------------

static void run(void)
{
    DWORD length;
    BOOL resultOk;
    WSAOVERLAPPED* ovl_res;
    SocketState* socketState;

    for (;;)
    {
        sendBuffer();

        resultOk = get_completion_status(&length, &socketState, &ovl_res);

        recvBuffer();
    }
}

// -----------------------------------------------------------------------------

static void sendBuffer(void)
{
    char* buf = msgBuf;
    int pendingLen = BUFLEN;

    printf("* sending message\n");
    sprintf(msgBuf, "%05 *****", msgNumber++);

    while (pendingLen > 0)
    {
        int partialLen = send(sock, buf, pendingLen, 0);

        if (partialLen > 0)
        {
            pendingLen -= partialLen;
            buf += partialLen;
            continue;
        }

        // -----------

        if (partialLen == 0)
        {
            printf("* connection closed by the server\n");
        }
        else // partialLen < 0
        {
            int err = WSAGetLastError();
            printf("* error %d in send\n", err);
        }

        exit(1);
    }
}

// -----------------------------------------------------------------------------

static SOCKET create_accepting_socket(void)
{
    SOCKET acceptor = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (acceptor == INVALID_SOCKET)
    {
        printf("* error creating accept socket!\n");
        exit(1);
    }
    return acceptor;
}

// -----------------------------------------------------------------------------

static void create_io_completion_port(void)
{
    cpl_port = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);
    if (!cpl_port)
    {
        int err = WSAGetLastError();
        printf("* error %d in line %d CreateIoCompletionPort\n", err, __LINE__);
        exit(1);
    }
}

// -----------------------------------------------------------------------------

static BOOL get_completion_status(DWORD* length, SocketState** socketState, WSAOVERLAPPED** ovl_res)
{
    BOOL resultOk;
    *ovl_res = NULL;
    *socketState = NULL;

    resultOk = GetQueuedCompletionStatus(cpl_port, length, (PULONG_PTR)socketState, ovl_res, INFINITE);

    if (!resultOk)
    {
        DWORD err = GetLastError();
        printf("* error %d getting completion port status!!!\n", err);
    }

    if (!*socketState || !*ovl_res)
    {
        printf("* don't know what to do, aborting!!!\n");
        exit(1);
    }

    return resultOk;
}

// -----------------------------------------------------------------------------
// the end 
```

当服务器通过调用发送响应时：

```
WSASend(socketState->socket, &wsabuf, 1, NULL, 0, ovl, NULL) 
```

我希望它会在这条线上被客户接收：

```
resultOk = get_completion_status(&length, &socketState, &ovl_res); 
```

但它没有……</p>

有人能告诉我我做错了什么吗？

**编辑：**

我采取了以下几点：

*   在客户端，您使用 WSAConnect() 创建出站连接。
*   需要时调用 WSARecv() 和 WSASend() 开始读/写操作
*   如果要使用 I/O 完成端口，则必须使用 WSASend/WSARecv。

并尝试创建一个简单的基于 IOCP 的客户端：

```
#include <iostream>
#include <winsock2.h>
#pragma comment(lib,"ws2_32.lib")

static DWORD WINAPI ClientWorkerThread(LPVOID lpParameter);

int main(void)
{
    WSADATA WsaDat;
    if (WSAStartup(MAKEWORD(2, 2), &WsaDat) != NO_ERROR)
        return 0;

    // Step 1 - Create an I/O completion port.
    HANDLE hCompletionPort = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);
    if (!hCompletionPort)
        return 0;

    // Step 2 - Find how many processors.
    SYSTEM_INFO systemInfo;
    GetSystemInfo(&systemInfo);
    const int nNumberOfProcessors = systemInfo.dwNumberOfProcessors;

    // Step 3 - Create worker threads.
    for (int i = 0; i < nNumberOfProcessors; i++)
    {
        HANDLE hThread = CreateThread(NULL, 0, ClientWorkerThread, hCompletionPort, 0, NULL);
        CloseHandle(hThread);
    }

    // Step 4 - Create a socket.
    SOCKET Socket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);
    if (Socket == INVALID_SOCKET)
        return 0;

    struct hostent *host;
    if ((host = gethostbyname("localhost")) == NULL)
        return 0;

    SOCKADDR_IN SockAddr;
    SockAddr.sin_family = AF_INET;
    SockAddr.sin_addr.s_addr = *((unsigned long*)host->h_addr);
    SockAddr.sin_port = htons(8888);

    // Step 5 - Associate the socket with the I/O completion port.
    CreateIoCompletionPort((HANDLE)Socket, hCompletionPort, (ULONG_PTR)0, 0);

    if (WSAConnect(Socket, (SOCKADDR*)(&SockAddr), sizeof(SockAddr), NULL, NULL, NULL, NULL) == SOCKET_ERROR)
        return 0;

    char buffer[1000];
    memset(buffer, 0, 999);
    WSABUF wsaBuf = {strlen(buffer), buffer};
    DWORD dwSendBytes = 0;
    DWORD dwReceivedBytes = 0;
    DWORD dwFlags = 0;
    WSAOVERLAPPED wsaOverlapped;
    SecureZeroMemory((PVOID)&wsaOverlapped, sizeof(wsaOverlapped));
    wsaOverlapped.hEvent = WSACreateEvent();

    for(;;)
    {
        WSARecv(Socket, &wsaBuf, 1, &dwReceivedBytes, &dwFlags, &wsaOverlapped, NULL);
        std::cout << wsaBuf.buf;

        //WSASend(Socket, &wsaBuf, 1, &dwSendBytes, 0, &wsaOverlapped, NULL);

        int nError = WSAGetLastError();
        if(nError != WSAEWOULDBLOCK&&nError != 0)
        {
            std::cout << "Winsock error code: " << nError << "\r\n";
            std::cout << "Server disconnected!\r\n";
            shutdown(Socket, SD_SEND);
            closesocket(Socket);

            break;
        }
        Sleep(1000);
    }

    WSACleanup();
    system("PAUSE");
    return 0;
}

static DWORD WINAPI ClientWorkerThread(LPVOID lpParameter)
{
    HANDLE hCompletionPort = (HANDLE)lpParameter;
    DWORD dwBytesTransferred = 0;

    while (TRUE)
    {
        BOOL bRet = GetQueuedCompletionStatus(hCompletionPort, &dwBytesTransferred, (LPDWORD)0, (LPOVERLAPPED*)0, INFINITE);
    }

    return 0;
} 
```

我知道有几件事我做错了，但我不知道它们是什么。

有人可以看看我的代码并给我一些提示吗？

非常感谢

**编辑2：**

抱歉这篇文章太长了。

在阅读了下面 Remy 的评论后，我又尝试实现基于 IOCP 的客户端，但我仍然不确定我是否走在正确的轨道上。

如果有人可以在下面查看我的新代码（在 VS2010 下编译良好且省略错误检查）并给我一些反馈，我将不胜感激。

**非阻塞客户端：**

```
#include <iostream>
#include <winsock2.h>
#pragma comment(lib, "ws2_32.lib")

static DWORD WINAPI ClientWorkerThread(LPVOID lpParameter);

typedef struct _PER_HANDLE_DATA 
{
    SOCKET Socket;
} PER_HANDLE_DATA, * LPPER_HANDLE_DATA;

typedef struct
{
    WSAOVERLAPPED wsaOverlapped;
    WSABUF wsaBuf;
    int OperationType;
} PER_IO_DATA, * LPPER_IO_DATA;

int main(void)
{
    WSADATA WsaDat;
    WSAStartup(MAKEWORD(2, 2), &WsaDat);

    // Step 1 - Create an I/O completion port.
    HANDLE hCompletionPort = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);

    // Step 2 - Find how many processors.
    SYSTEM_INFO systemInfo;
    GetSystemInfo(&systemInfo);

    // Step 3 - Create worker threads.
    for (int i = 0; i < (int)systemInfo.dwNumberOfProcessors; i++)
    {
        HANDLE hThread = CreateThread(NULL, 0, ClientWorkerThread, hCompletionPort, 0, NULL);
        CloseHandle(hThread);
    }

    // Step 4 - Create a socket.
    SOCKET Socket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);

    PER_HANDLE_DATA *pPerHandleData = new PER_HANDLE_DATA;
    pPerHandleData->Socket = Socket;

    struct hostent *host;
    host = gethostbyname("localhost");

    SOCKADDR_IN SockAddr;
    SockAddr.sin_family = AF_INET;
    SockAddr.sin_addr.s_addr = *((unsigned long*)host->h_addr);
    SockAddr.sin_port = htons(8888);

    // Step 5 - Associate the socket with the I/O completion port.
    CreateIoCompletionPort((HANDLE)Socket, hCompletionPort, (DWORD)pPerHandleData, 0);

    WSAConnect(Socket, (SOCKADDR*)(&SockAddr), sizeof(SockAddr), NULL, NULL, NULL, NULL);

    static char buffer[1000];
    memset(buffer, 0, 999);

    PER_IO_DATA *pPerIoData = new PER_IO_DATA;

    pPerIoData->wsaBuf.buf = buffer;
    pPerIoData->wsaBuf.len = sizeof(buffer);

    DWORD dwSendBytes = 0;
    DWORD dwReceivedBytes = 0;
    DWORD dwFlags = 0;

    SecureZeroMemory((PVOID)&pPerIoData->wsaOverlapped, sizeof(pPerIoData->wsaOverlapped));
    pPerIoData->wsaOverlapped.hEvent = WSACreateEvent();

    WSARecv(Socket, &pPerIoData->wsaBuf, 1, &dwReceivedBytes, &dwFlags, &pPerIoData->wsaOverlapped, NULL);
    std::cout << pPerIoData->wsaBuf.buf;

    for (;;)
    {
        int nError = WSAGetLastError();
        if (nError != WSAEWOULDBLOCK&&nError != 0)
        {
            std::cout << "Winsock error code: " << nError << "\r\n";
            std::cout << "Server disconnected!\r\n";
            shutdown(Socket, SD_SEND);
            closesocket(Socket);

            break;
        }

        Sleep(1000);
    }

    delete pPerHandleData;
    delete pPerIoData;
    WSACleanup();
    return 0;
}

static DWORD WINAPI ClientWorkerThread(LPVOID lpParameter)
{
    HANDLE hCompletionPort = (HANDLE)lpParameter;
    DWORD bytesCopied = 0;
    OVERLAPPED *overlapped = 0;
    LPPER_HANDLE_DATA PerHandleData;
    LPPER_IO_DATA PerIoData;
    DWORD SendBytes, RecvBytes;
    DWORD Flags;
    BOOL bRet;

    while (TRUE)
    {
        bRet = GetQueuedCompletionStatus(hCompletionPort, &bytesCopied, (LPDWORD)&PerHandleData, (LPOVERLAPPED*)&PerIoData, INFINITE);

        if (bytesCopied == 0)
        {
            break;
        }
        else
        {
            Flags = 0;
            ZeroMemory(&(PerIoData->wsaOverlapped), sizeof(WSAOVERLAPPED));

            PerIoData->wsaBuf.len = 1000;
            WSARecv(PerHandleData->Socket, &(PerIoData->wsaBuf), 1, &RecvBytes, &Flags, &(PerIoData->wsaOverlapped), NULL);
        }
    }

    return 0;
} 
```

**非阻塞服务器：**

```
#include <iostream>
#include <winsock2.h>
#pragma comment(lib,"ws2_32.lib")

int main()
{
    WSADATA WsaDat;
    WSAStartup(MAKEWORD(2,2), &WsaDat);

    SOCKET listenSocket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);

    SOCKADDR_IN server;
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons(8888);

    bind(listenSocket, (SOCKADDR*)(&server), sizeof(server));

    listen(listenSocket, 1);

    SOCKET acceptSocket = SOCKET_ERROR;
    sockaddr_in saClient;
    int nClientSize = sizeof(saClient);
    while (acceptSocket == SOCKET_ERROR)
    {
        std::cout << "Waiting for incoming connections...\r\n";
        acceptSocket = WSAAccept(listenSocket, (SOCKADDR*)&saClient, &nClientSize, NULL, NULL);
    }

    std::cout << "Client connected!\r\n\r\n";

    char *szMessage = "Welcome to the server!\r\n";
    WSAOVERLAPPED SendOverlapped;
    DWORD SendBytes;

    WSABUF DataBuf;
    DataBuf.len = 1000;
    DataBuf.buf = szMessage;

    SecureZeroMemory((PVOID)&SendOverlapped, sizeof(WSAOVERLAPPED));
    SendOverlapped.hEvent = WSACreateEvent();

    for (;;)
    {
        WSASend(acceptSocket, &DataBuf, 1, &SendBytes, 0, &SendOverlapped, NULL);

        int nError = WSAGetLastError();
        if (nError != WSAEWOULDBLOCK && nError != 0)
        {
            std::cout << "Winsock error code: " << nError << "\r\n";
            std::cout << "Client disconnected!\r\n";

            shutdown(acceptSocket, SD_SEND);
            closesocket(acceptSocket);

            break;
        }

        Sleep(1000);
    }

    WSACleanup();
    return 0;
} 
```

再次感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T00:37:06.003

尝试这样的事情：

客户：

```
#include <iostream>
#include <string>
#include <winsock2.h> 
#pragma comment(lib, "ws2_32.lib") 

typedef struct 
{ 
    WSAOVERLAPPED Overlapped; 
    SOCKET Socket; 
    WSABUF wsaBuf; 
    char Buffer[1024];
    DWORD Flags;
} PER_IO_DATA, * LPPER_IO_DATA; 

static DWORD WINAPI ClientWorkerThread(LPVOID lpParameter) 
{ 
    HANDLE hCompletionPort = (HANDLE)lpParameter; 
    DWORD NumBytesRecv = 0; 
    ULONG CompletionKey; 
    LPPER_IO_DATA PerIoData; 

    while (GetQueuedCompletionStatus(hCompletionPort, &NumBytesRecv, &CompletionKey, (LPOVERLAPPED*)&PerIoData, INFINITE))
    {
        if (!PerIoData)
            continue;

        if (NumBytesRecv == 0) 
        {
            std::cout << "Server disconnected!\r\n\r\n";  
        }
        else
        {
            // use PerIoData->Buffer as needed...
            std::cout << std::string(PerIoData->Buffer, NumBytesRecv);

            PerIoData->wsaBuf.len = sizeof(PerIoData->Buffer); 
            PerIoData->Flags = 0; 

            if (WSARecv(PerIoData->Socket, &(PerIoData->wsaBuf), 1, &NumBytesRecv, &(PerIoData->Flags), &(PerIoData->Overlapped), NULL) == 0)
                continue;

            if (WSAGetLastError() == WSA_IO_PENDING)
                continue;
        }

        closesocket(PerIoData->Socket);
        delete PerIoData;
    } 

    return 0; 
} 

int main(void) 
{ 
    WSADATA WsaDat; 
    if (WSAStartup(MAKEWORD(2, 2), &WsaDat) != 0)
        return 0; 

    HANDLE hCompletionPort = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0); 
    if (!hCompletionPort)
        return 0;

    SYSTEM_INFO systemInfo; 
    GetSystemInfo(&systemInfo); 

    for (DWORD i = 0; i < systemInfo.dwNumberOfProcessors; ++i) 
    { 
        HANDLE hThread = CreateThread(NULL, 0, ClientWorkerThread, hCompletionPort, 0, NULL); 
        CloseHandle(hThread); 
    } 

    SOCKET Socket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED); 
    if (Socket == INVALID_SOCKET)
        return 0;

    SOCKADDR_IN SockAddr; 
    SockAddr.sin_family = AF_INET; 
    SockAddr.sin_addr.s_addr = inet_addr("127.0.0.1"); 
    SockAddr.sin_port = htons(8888); 

    CreateIoCompletionPort((HANDLE)Socket, hCompletionPort, 0, 0); 

    if (WSAConnect(Socket, (SOCKADDR*)(&SockAddr), sizeof(SockAddr), NULL, NULL, NULL, NULL) == SOCKET_ERROR)
        return 0;

    PER_IO_DATA *pPerIoData = new PER_IO_DATA;
    ZeroMemory(pPerIoData, sizeof(PER_IO_DATA)); 

    pPerIoData->Socket = Socket; 
    pPerIoData->Overlapped.hEvent = WSACreateEvent(); 
    pPerIoData->wsaBuf.buf = pPerIoData->Buffer; 
    pPerIoData->wsaBuf.len = sizeof(pPerIoData->Buffer); 

    DWORD dwNumRecv;
    if (WSARecv(Socket, &(pPerIoData->wsaBuf), 1, &dwNumRecv, &(pPerIoData->Flags), &(pPerIoData->Overlapped), NULL) == SOCKET_ERROR)
    {
        if (WSAGetLastError() != WSA_IO_PENDING)
        {
            delete pPerIoData;
            return 0;
        }
    } 

    while (TRUE) 
        Sleep(1000); 

    shutdown(Socket, SD_BOTH); 
    closesocket(Socket); 

    WSACleanup(); 
    return 0; 
} 
```

服务器：

```
#include <iostream>  
#include <winsock2.h>  
#pragma comment(lib,"ws2_32.lib")  

typedef struct
{
    WSAOVERLAPPED Overlapped;
    SOCKET Socket;
    WSABUF wsaBuf;
    char Buffer[1024];
    DWORD BytesSent;
    DWORD BytesToSend;
} PER_IO_DATA, * LPPER_IO_DATA; 

static DWORD WINAPI ServerWorkerThread(LPVOID lpParameter)
{
    HANDLE hCompletionPort = (HANDLE)lpParameter;
    DWORD NumBytesSent = 0;
    ULONG CompletionKey;
    LPPER_IO_DATA PerIoData;

    while (GetQueuedCompletionStatus(hCompletionPort, &NumBytesSent, &CompletionKey, (LPOVERLAPPED*)&PerIoData, INFINITE))    
    {
        if (!PerIoData)
            continue;

        if (NumBytesSent == 0)
        {
            std::cout << "Client disconnected!\r\n\r\n";
        }
        else
        {
            PerIoData->BytesSent += NumBytesSent;
            if (PerIoData->BytesSent < PerIoData->BytesToSend)
            {
                PerIoData->wsaBuf.buf = &(PerIoData->Buffer[PerIoData->BytesSent]);
                PerIoData->wsaBuf.len = (PerIoData->BytesToSend - PerIoData->BytesSent);
            }
            else
            {
                PerIoData->wsaBuf.buf = PerIoData->Buffer;
                PerIoData->wsaBuf.len = strlen(PerIoData->Buffer);
                PerIoData->BytesSent = 0;
                PerIoData->BytesToSend = PerIoData->wsaBuf.len;
            }

            if (WSASend(PerIoData->Socket, &(PerIoData->wsaBuf), 1, &NumBytesSent, 0, &(PerIoData->Overlapped), NULL) == 0)
                continue;

            if (WSAGetLastError() == WSA_IO_PENDING)
                continue;
        }

        closesocket(PerIoData->Socket);
        delete PerIoData;
    }

    return 0;
} 

int main()  
{  
    WSADATA WsaDat;  
    if (WSAStartup(MAKEWORD(2,2), &WsaDat) != 0)
        return 0;  

    HANDLE hCompletionPort = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, 0, 0);
    if (!hCompletionPort)
        return 0;

    SYSTEM_INFO systemInfo;
    GetSystemInfo(&systemInfo);

    for (DWORD i = 0; i < systemInfo.dwNumberOfProcessors; ++i)
    {
        HANDLE hThread = CreateThread(NULL, 0, ServerWorkerThread, hCompletionPort, 0, NULL);
        CloseHandle(hThread);
    } 

    SOCKET listenSocket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);  
    if (listenSocket == INVALID_SOCKET)
        return 0;  

    SOCKADDR_IN server;
    ZeroMemory(&server, sizeof(server));
    server.sin_family = AF_INET;  
    server.sin_addr.s_addr = INADDR_ANY;  
    server.sin_port = htons(8888);  

    if (bind(listenSocket, (SOCKADDR*)(&server), sizeof(server)) != 0)
        return 0;  

    if (listen(listenSocket, 1) != 0)
        return 0;  

    std::cout << "Waiting for incoming connection...\r\n";  

    SOCKET acceptSocket;  
    do  
    {  
        sockaddr_in saClient;  
        int nClientSize = sizeof(saClient);  
        acceptSocket = WSAAccept(listenSocket, (SOCKADDR*)&saClient, &nClientSize, NULL, NULL);  
    }
    while (acceptSocket == INVALID_SOCKET);

    std::cout << "Client connected!\r\n\r\n";  

    CreateIoCompletionPort((HANDLE)acceptSocket, hCompletionPort, 0, 0); 

    LPPER_IO_DATA pPerIoData = new PER_IO_DATA;
    ZeroMemory(pPerIoData, sizeof(PER_IO_DATA));

    strcpy(pPerIoData->Buffer, "Welcome to the server!\r\n");  

    pPerIoData->Overlapped.hEvent = WSACreateEvent(); 
    pPerIoData->Socket = acceptSocket; 
    pPerIoData->wsaBuf.buf = pPerIoData->Buffer;  
    pPerIoData->wsaBuf.len = strlen(pPerIoData->Buffer);  
    pPerIoData->BytesToSend = pPerIoData->wsaBuf.len;  

    DWORD dwNumSent;
    if (WSASend(acceptSocket, &(pPerIoData->wsaBuf), 1, &dwNumSent, 0, &(pPerIoData->Overlapped), NULL) == SOCKET_ERROR)
    {
        if (WSAGetLastError() != WSA_IO_PENDING)
        {
            delete pPerIoData;
            return 0;
        }
    }  

    while (TRUE)  
        Sleep(1000);  

    shutdown(acceptSocket, SD_BOTH);  
    closesocket(acceptSocket);  

    WSACleanup();  
    return 0;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T18:21:05.380

您看过 MSDN 文档中的[WSARecv](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741688%28v=vs.85%29.aspx)示例吗？

从本质上讲，您必须首先启动异步 WSARecv 操作，然后通过完成端口获得其完成的通知。

或者换一种说法：Windows I/O 完成端口使用的是前摄器模型（与 Linux/FreeBSD/NetBSD 的反应器模型相反）。

# qt - Qt：QGLShaderProgram 关闭日志消息

> ID：10998508
> 
> 赞同：0
> 
> 时间：2012-06-12T14:13:50.867
> 
> 标签：qt, opengl, shader

调用 QGLShaderProgram::link() 时有没有办法关闭日志消息？ [http://qt-project.org/doc/qt-4.8/qglshaderprogram.html#link](http://qt-project.org/doc/qt-4.8/qglshaderprogram.html#link)

消息如下所示：

```
QGLShader::link: "Vertex shader(s) linked, fragment shader(s) linked.
" 
```

Qt 代码如下所示：src/opengl/qglshaderprogram.cpp:893

```
 glLinkProgram(program);
    value = 0;
    glGetProgramiv(program, GL_LINK_STATUS, &value);
    d->linked = (value != 0);
    value = 0;
    glGetProgramiv(program, GL_INFO_LOG_LENGTH, &value);
    d->log = QString();
    if (value > 1) {
        char *logbuf = new char [value];
        GLint len;
        glGetProgramInfoLog(program, value, &len, logbuf);
        d->log = QString::fromLatin1(logbuf);
        QString name = objectName();
        if (name.isEmpty())
            qWarning() << "QGLShader::link:" << d->log;
        else
            qWarning() << "QGLShader::link[" << name << "]:" << d->log;
        delete [] logbuf;
    }
    return d->linked;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:46:59.443

因此，似乎唯一可能的解决方案是重定向 qWarning()，如：[如何重定向 qDebug、qWarning、qCritical 等输出？](https://stackoverflow.com/questions/4954140/how-to-redirect-qdebug-qwarning-qcritical-etc-output)

```
 qInstallMsgHandler([](QtMsgType , const char* ) { });  // empty message handler
 bool result = program.link();
 qInstallMsgHandler(0);  // restore default message handling 
```

# mysql - 仅用于选择两个主题的复杂连接

> ID：10998513
> 
> 赞同：0
> 
> 时间：2012-06-12T14:14:07.277
> 
> 标签：mysql, sql, join

我在 MySQL 中做一个项目。我有一个问题`join`。

```
+---+-----------+-----------+
|id | name      | elective  |
+---+-----------+-----------+
| 1 | Jone      | Math      |
| 2 | Jane      | Math      |
| 3 | Doe       | Math      | 
| 4 | Bloggs    | Math      |
| 5 | Peter     | Math      | 
| 6 | Chris     | Math      | 
| 7 | Mark      | Math      | 
| 3 | Doe       | Physics   | 
| 4 | Bloggs    | Physics   |
| 5 | Peter     | Physics   | 
| 6 | Chris     | Physics   | 
| 7 | Mark      | Physics   | 
| 5 | Peter     | Chemistry | 
| 6 | Chris     | Chemistry | 
| 7 | Mark      | Chemistry | 
+---+-----------+-----------+ 
```

在上表中，很少有人选择了两个以上的科目，而很少有人只选择了两个科目。而其他人只选择了一个主题。

但我只想显示第二个，即只参加过两个科目的人。我想使用内部连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:20:30.630

```
select id, name from tablename
group by id, name
having count (elective) = 2 
```

* * *

仅使用`joins`要求的 OP：

```
select t1.id, t1.name
from tablename t1
inner join tablename t2 on t2.id = t1.id and t2.name = t1.name and t2.name <> t1.name
left outer join tablename t3 on t3.id = t2.id and t3.name <> t1.name and t3.name <> t2.name
where t3.name is null 
```

表`t1`和`t2`选择两个不同`electives`的为相同的`id/person`。表`t3`将选择另一个`elective`。当我输入我想要的子句`where`时，这意味着它不存在与先前选择的子句不同的第三个。`t3.name``NULL``elective`

如果存在第三个，则该`where`子句将删除那些`names`.

两者`inner joins`都存在`select`于至少两个不同的地方`electives`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:19:53.550

```
SELECT id, name, COUNT(elective) FROM table GROUP BY id, name HAVING COUNT(elective) = 2 
```

# vim - 用breakindent补丁编译VIM

> ID：10998516
> 
> 赞同：1
> 
> 时间：2012-06-12T14:14:10.240
> 
> 标签：vim, compilation, ubuntu-12.04

在 Ubuntu 12.04 Precise 中，让 breakindent 补丁在 VIM 中工作的唯一方法似乎是在打补丁后编译 VIM 本身。这是我所做的：

安装 pbuilder 并创建本地环境

```
sudo apt-get install pbuilder debootstrap
sudo pbuilder create --debootstrapopts --variant=buildd 
```

获取资源

```
sudo apt-get source vim 
```

[使用从官方 repo](https://retracile.net/raw-attachment/blog/2011/08/23/21.30/vim-7.3.285-breakindent.patch)中检索到的 breakindent 补丁来修补它们

```
cd vim-7.3.429
patch -p1 < vim-breakindent.patch
sudo pbuilder build vim_7.3.429-2ubuntu2.1.dsc 
```

Pbuilder 正确生成 deb 包，但是在安装它们之后，没有可用的 breakindent 选项：

```
:set bri
E518: Unknown option: bri 
```

哪里错了？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:35:02.150

`pbuilder`仍在使用未修改`.dsc`的`.orig.tar.gz`, 和`.debian.tar.gz`来构建包。将补丁应用到您的本地副本并没有帮助。

您可能应该将补丁添加到`debian/patches/`and ，在(可以帮助) 中添加`debian/patches/series`本地版本号，并重新制作源存档 (类似于)。`debian/changelog``debchange``dpkg-buildpackage -S`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:55:37.060

更新：它按照更多步骤工作。

1.  之后`apt-get source`：

    ```
    cd vim-7.3.429
    sudo chmod u=rw,g=r,o=r ../vim-breakindent.patch
    sudo cp ../vim-breakindent.patch debian/patches/debian/. 
    ```

2.  在 中添加了一个新条目`debian/changelog`，版本从`vim_7.3.429-2ubuntu2.1`到`vim_7.3.429-2ubuntu2.2`

3.  `debian/vim-breakindent.patch`在末尾添加`debian/patches/series`
4.  生成新的源包：

    ```
    sudo pdebuild 
    ```

5.  编译新的`.dsc`：

    ```
    sudo pbuilder build vim_7.3.429-2ubuntu2.2.dsc 
    ```

6.  安装新的 deb：

    ```
    sudo dpkg -i /var/cache/pbuilder/result/*.deb 
    ```

# backbone.js - Backbone.js 单击一个 div 触发所有 div 的事件

> ID：10998517
> 
> 赞同：1
> 
> 时间：2012-06-12T14:14:12.707
> 
> 标签：backbone.js

我对主干.js 很陌生，并且正在关注本教程，以获得单击元素[Site](http://lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/)的模型的正确方法。但是，当我单击一个元素时，会触发所有 div 的警报。我知道该事件必须附加到所有 div，并且由单击 div 触发，如果我将 ID 附加到每个 div，我可以解决这个问题，但是根据教程，这不是正确的方法它。这是教程[链接的 JSFiddle](http://jsfiddle.net/derickbailey/6cA7C/3/)

和我的代码（script.js）

```
 var Item = Backbone.Model.extend
    ({
        defaults:
        {
            price:35,
            photo: "images/flower1.jpg"
        }
    });

    var Cart = Backbone.Collection.extend
    ({
        model: Item
    });

    var items = [
      { id: 1, title: "Macbook Air", price: 799 },
      { id: 2, title: "Macbook Pro", price: 999 },
      { id: 3, title: "The new iPad", price: 399 },
      { id: 4, title: "Magic Mouse", price: 50 },
      { id: 5, title: "Cinema Display", price: 799 }
    ];

    var cartCollection = new Cart(items);

    var ItemView = Backbone.View.extend
    ({
        tagName: "div",
        className: 'item-wrap',
        template: $("#itemTemplate").html(),

        render: function()
        {
            var templ = _.template(this.template);
            $(this.el).html(templ(this.model.toJSON()));
            return this;
        }

    })

    var CartCollectionView = Backbone.View.extend
    ({
        el: $("#yourcart"),

        initialize: function()
        {
            this.collection = cartCollection;
            this.collection.bind('onclick', function(item)
            {
                alert('Item has been clicked');
            });
            this.render();
        },

        events:
        {
            "click div": "clicked"
        },

        clicked: function(e)
        {
            e.preventDefault();
            var id = $(e.currentTarget).data("id");
            console.log(id);
            var item = this.collection.get(id);
            console.log(item);
            var title = item.get("title");
            console.info("Showing title "+title);
            //alert(title);
        },

        render: function()
        {
            this.collection.each(function(item)
            {
                this.renderItem(item);
            }, this);
        },

        renderItem: function(item)
        {
            var itemView = new ItemView({ model:item});
            $(this.el).append(itemView.render().el);
        }
    });

    $(document).ready(function() {
    console.info('Doc ready');
        var cart = new CartCollectionView();

    }); 
```

和 html (index.html)

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>
           Shopping Cart
        </title>
        <link rel="stylesheet" href="lib/style.css" type="text/css">
    </head>
    <body>
    <span id="yourcart"></span>
    <script id="itemTemplate" type="text/template">
    <img src="<%= photo %>" alt="<%= title %>">
    <div id="test" data-id="<%= id %>">
      <h2><%= title %></h2>
      <h4>&pound;<%= price %></h4>
    </div>
</script>
        <script src="lib/jquery.js" type="text/javascript"></script>
        <script src="lib/underscore.js" type="text/javascript"></script>
        <script src="lib/backbone.js" type="text/javascript"></script>
        <script src="lib/script.js" type="text/javascript"></script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:51:50.287

使这项工作正常需要`<div>`每个视图只有一个。在您的示例中，特定 itemm 的事件处理程序应在 中注册`ItemView`，而不是`CartView`.

# python - 在函数中使用时，列表推导中不需要方括号

> ID：10998521
> 
> 赞同：13
> 
> 时间：2012-06-12T14:14:32.310
> 
> 标签：python, syntax, list-comprehension

我使用以下代码提交了一个拉取请求：

```
my_sum = sum([x for x in range(10)]) 
```

一位审稿人建议这样做：

```
my_sum = sum(x for x in range(10)) 
```

（区别只是缺少方括号）。

我很惊讶第二种形式似乎是相同的。但是当我尝试在第一个工作的其他环境中使用它时，它失败了：

```
y = x for x in range(10)
        ^ SyntaxError !!! 
```

两种形式是否相同？为什么函数中不需要方括号有什么重要的原因吗？或者这只是我必须知道的事情？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-12T14:17:05.577

这是一个生成器表达式。要让它在独立的情况下工作，请使用大括号：

```
y = (x for x in range(10)) 
```

并且 y 成为一个生成器。您可以迭代生成器，因此它可以在预期可迭代的地方工作，例如`sum`函数。

**使用示例和陷阱：**

```
>>> y = (x for x in range(10))
>>> y
<generator object <genexpr> at 0x0000000001E15A20>
>>> sum(y)
45 
```

随身携带发电机时要小心，您只能通过它们一次。所以在上述之后，如果你再次尝试使用`sum`，就会出现这种情况：

```
>>> sum(y)
0 
```

因此，如果您传递的生成器实际上是一个列表或集合或类似的东西，您必须小心。如果函数或类存储参数并尝试多次迭代它，您将遇到问题。例如考虑这个：

```
def foo(numbers):
    s = sum(numbers)
    p = reduce(lambda x,y: x*y, numbers, 1)
    print "The sum is:", s, "and the product:", p 
```

如果你给它一个生成器，它会失败：

```
>>> foo(x for x in range(1, 10))
The sum is: 45 and the product: 1 
```

您可以轻松地从生成器生成的值中获取列表：

```
>>> y = (x for x in range(10))
>>> list(y)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

您可以使用它来修复前面的示例：

```
>>> foo(list(x for x in range(1, 10)))
The sum is: 45 and the product: 362880 
```

但是请记住，如果您从生成器构建列表，则需要存储每个值。在您有很多项目的情况下，这可能会使用更多内存。

**为什么在您的情况下使用生成器？**

低得多的内存消耗是`sum(generator expression)`优于的原因`sum(list)`：生成器版本只需存储单个值，而列表变体必须存储 N 个值。因此，您应该始终使用不会产生副作用的生成器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T14:20:15.730

它们不相同。

第一种形式，

```
[x for x in l] 
```

是一个列表理解。另一个是生成器表达式，这样写：

```
(x for x in l) 
```

它返回一个生成器，而不是一个列表。

如果生成器表达式是函数调用中的唯一参数，则可以跳过其括号。

见[PEP 289](http://www.python.org/dev/peps/pep-0289/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T14:19:14.450

第一个是列表理解第二个是生成器表达式

```
 (x for x in range(10))
    <generator object at 0x01C38580>
    >>> a = (x for x in range(10))
    >>> sum(a)
    45
    >>> 
```

为生成器使用大括号：

```
>>> y = (x for x in range(10))
>>> y
<generator object at 0x01C3D2D8>
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T14:38:20.543

阅读此[PEP：289](http://www.python.org/dev/peps/pep-0289/)

> 例如，下面的求和代码将在内存中构建一个完整的正方形列表，遍历这些值，当不再需要引用时，删除该列表：
> 
> ```
> sum([x*x for x in range(10)]) 
> ```
> 
> 通过使用生成器表达式来节省内存：
> 
> ```
> sum(x*x for x in range(10)) 
> ```
> 
> **随着数据量变大，生成器表达式往往会表现得更好，因为它们不会耗尽缓存内存，并且它们允许 Python 在迭代之间重用对象。**

使用大括号产品生成器：

```
>>> y = (x for x in range(10))
>>> y
<generator object <genexpr> at 0x00AC3AA8> 
```

# asp.net - asp.net mvc 3 在控制器文件中所做的更改未反映

> ID：10998524
> 
> 赞同：1
> 
> 时间：2012-06-12T14:14:43.497
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我是 ASP.NET MVC3 的新手，我得到了简单的工作来在现有的网站中添加一个页面。

在控制器文件中所做的任何更改都不会反映。即使我将 Controller 文件夹重命名为 Controller1 等。但网站运行良好！！！拉力赛很烂。但是重命名视图和其他文件夹会引发错误。

我做错什么了吗？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:16:25.890

由于 ASP.NET MVC 使用 ASP.NET Web 应用程序模型，如果您更改控制器中的代码，您应该重新编译您的项目以使更改生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T20:11:47.707

**确保在服务器**的 bin 目录中为您的项目加载了最新的 dll 和 pdb 文件。

EG [在服务器上...] D:\MyProjectFolder\bin\myProject.dll EG [在服务器上...] D:\MyProjectFolder\bin\myProject.pdb

# php - 用于不同 url 的 PHP 切换案例

> ID：10998526
> 
> 赞同：1
> 
> 时间：2012-06-12T14:14:50.303
> 
> 标签：php, codeigniter, switch-statement

我正在 CodeIgniter 框架上构建一个站点，并且我正在使用 PHP 开关来加载与页面相关的特定 javascript。当我到达第三个 URI 段时，我的问题就出现了，这通常是一个变量。例如，我对说没有意见

```
case 'foo/bar': 
```

但是如果我的 url 类似于[http://mysite.com/foo/bar/1234](http://mysite.com/foo/bar/1234)，其中 1234 如果变量传递给控制器​​怎么办。为每个变量写一个案例显然是没有意义的，因为现在大约有 30k。

目前这是我的代码的工作片段......

```
switch( $this->uri->uri_string() ) {

            case '': 

            break;

            case 'browse':

            break;

            case 'contest/leaderboard': 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:18:53.437

那么你使用“开始于”条件：

```
$uri = $this->uri->uri_string();
if (0 === strpos($uri, 'foo/bar')) {
    // starts with foo/bar
} elseif (0 == strpos($uri, .... etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:31:05.833

您还可以分解正斜杠上的 url，然后检查数组的每个元素。

例如

```
$url_parts = explode('/', $this->uri->uri_string());
switch($url_parts[0]){
  case 'foo':
     if(count($url_parts) > 1){
       if($url_parts[1] == "bar"){
         // when the url begins with foo/bar
       }
     }
     break;
   case 'browse':
     //when url is browse
   break;
} 
```

这样做的好处是您可以包含所有以 foo 开头的 url 共有的代码。不确定这是否是必需的，但可能有用

# asp.net - UpdatePanel 未使用大量数据进行更新

> ID：10998527
> 
> 赞同：0
> 
> 时间：2012-06-12T14:14:52.777
> 
> 标签：asp.net, updatepanel, scriptmanager

我有一个包含 GridView 和提交按钮的 UpdatePanel，当 GridView 包含的记录不多时，选择提交按钮会导致更新面板更新确定，但是，当网格视图包含大量数据时，单击提交按钮不会导致要更新的 UpdatePanel。

任何想法，我不知道使用 ScriptManage/UpdatePanel 可以发送的数据量是否有限制，但在一个实例中，页面大小为 718Kb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:21:10.423

如果重新绑定 GridView，则不需要 GridView 处于 ViewState 中，并且可以将 GridView 属性的 EnableViewState 设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:29:57.580

我不知道大小有任何限制，但也许页面只是在某个地方超时？如果可以的话，最好的办法是限制来回传递的数据量。

ek_ny 的建议 回复：EnableViewState 是一个很好的方案，如果你可以实现它，它会减少你的页面大小。

另一个想法是在您的 Gridview 中实现分页，以便您一次只显示可管理数量的行。

# c# - 花时间并附加到日期以制作日期时间？

> ID：10998528
> 
> 赞同：2
> 
> 时间：2012-06-12T14:14:58.137
> 
> 标签：c#, datetime

说我有以下内容：

```
string fromTime = "8:00am";
string someDate = "06/01/2012"; 
```

我想最终这样做：

```
DateTime dt = Convert.ToDateTime(someDate + someTime); 
```

基本上我想约会并添加时间到上面的结果是

`06/01/2012 8:00am`

但将其存储在日期时间变量中。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T14:17:33.440

您可以使用[DateTime.TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)方法，该方法允许您在解析时指定格式：

```
class Program
{
    static void Main()
    {
        string s = "06/01/2012 8:00am";
        string format = "dd/MM/yyyy h:mmtt";
        DateTime date;
        if (DateTime.TryParseExact(s, format, CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
        {
            Console.WriteLine(date);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:18:08.200

试试这个：

```
DateTime dt = DateTime.ParseExact(someDate + " " + someTime, "MM/dd/yyyy h:mmtt", CultureInfo.InvariantCulture); 
```

# asp.net - Silverlight MediaElement 未在更改事件中报告正确的 DownloadProgress 值

> ID：10998534
> 
> 赞同：1
> 
> 时间：2012-06-12T14:15:14.190
> 
> 标签：asp.net, wcf, silverlight

我`MediaElement`在 ASP.NET 应用程序的 Silverlight 4 岛中使用控件。的来源`MediaElement`是 WCF 数据服务中使用 webHttpBinding 和`transferMode="streamed"`. 该方法返回一个`Stream`. 媒体已成功检索并在客户端上播放。我遇到的问题是`DownloadProgressChanged`我在下载过程中尝试更新进度条。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.downloadprogresschanged%28v=vs.95%29.aspx)，此事件应触发：

> 每当下载的总内容量增加 0.05 或更多（作为 1.0 的系数，表示完成）或达到 1.0。

这不是我看到的行为。我正在使用以下代码输出 的值`DownloadProgress`：

```
private void previewMediaElement_DownloadProgressChanged(object sender, RoutedEventArgs e)
{
    Debug.WriteLine("progress = " + previewMediaElement.DownloadProgress);
    // Update value of a progress bar
} 
```

这是示例视频的结果：

*   进度 = 7.34134975033385E-15
*   进度 = 1.44467771079348E-14
*   进度 = 2.15522044655359E-14
*   进度 = 2.86576318231369E-14
*   进度 = 4.14781056723434E-14
*   进度 = 1

无论视频大小如何，该`DownloadProgress`值都保持极小，直到它跳到 1。随着视频大小的增加，这些极小值的数量也会增加。对于流式响应，此事件是否应该正常工作？

# iphone - NSArray vs NSDictionary 查找

> ID：10998535
> 
> 赞同：2
> 
> 时间：2012-06-12T14:15:31.450
> 
> 标签：iphone, cocoa-touch, ios5, ios4, cocos2d-iphone

对于检查列表中是否已存在对象，这更快且成本更低。通过使用 NSArray 包含对象或检查 NSDictionary 的键是否已存在？

NSArray containsObject 选择器是否还遍历整个数组元素？另外检查一个键是否已经存在于字典中呢？这是否需要遍历所有键。

最后，检查一个对象是否已经存在于（同一个类的）大对象列表中的最好和最快的方法是什么。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T15:22:08.893

根据 Collection Classes 的文档，NSDictionary 是基于 HashTables 的。这意味着如果您在字典中搜索一个键，所需的时间比遍历数组要少得多。

因此，搜索密钥应该是 o(1+numberofcollisions)。其中遍历数组是o(n)。您可以对数组进行快速排序，然后对其进行二进制搜索，这将使成本大大降低。但是，对于您的降压，NSDictionary（哈希表）对于搜索来说非常便宜。

来自苹果[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Dictionaries.html)

> > 在内部，字典使用哈希表来组织其存储并提供对给定相应键的值的快速访问。但是，为字典定义的方法使您免受使用哈希表、哈希函数或键的哈希值的复杂性。这些方法直接获取键，而不是它们的散列形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T21:12:58.163

你在说多少价值观？速度上的差异可能无关紧要，因此使选择成为代码中最有意义的选择。事实上，这可能应该是第一要务，除非并且直到您知道存在速度问题。

短版：使用 NSDictionary 除非您有特殊需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:57:06.863

我会说最快的方法是在插入对象时对数组进行排序：

```
NSMutableArray *myArray;

[myArray addObject:someCustomObject];
[myArray sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    // custom compare code here
}]; 
```

虽然这会降低插入对象的性能，但会大大增加您的查找时间。

对 NSArray 进行二分搜索：

```
BOOL binarySearchContains(NSArray *sortedArray, id object, NSComparator comparisonBlock)
{
    // simple recursive helper function
    __block BOOL (^_binaryRecurse)(NSArray *, id, int lo, int hi) = ^BOOL(NSArray *array, id object, int lo, int hi)
    {
        int middleIndex = ((hi - lo) / 2) + lo;

        if (hi == lo || middleIndex < 0 || middleIndex >= [array count])
            return NO;

        int compareResult = (comparisonBlock(object, [array objectAtIndex:middleIndex]));

        if (compareResult < 0)
            return _binaryRecurse(array, object, lo, middleIndex - 1);
        if (compareResult > 0)
            return _binaryRecurse(array, object, middleIndex + 1, hi);

        return YES;
    };

    return _binaryRecurse(sortedArray, object, 0, [sortedArray count]);
} 
```

在我的测试中，`bsearch`大约比`-containsObject:`.

# javascript - 在backbone.js中设置模型的属性值

> ID：10998538
> 
> 赞同：1
> 
> 时间：2012-06-12T14:15:37.573
> 
> 标签：javascript, jquery, backbone.js

我正在按照教程学习backbone.js。我尝试了一些代码，它看起来很奇怪。`src`我首先用being初始化了一个模型实例，对模型实例`thesource.jpg`做了 a `console.log`，然后将`src`属性设置为`aaa`后跟 a `console.log`。

在 javascript 控制台中，我看到两个输出`src`的`aaa`. 他们不应该不同吗？

**JS代码**

```
var Photo = Backbone.Model.extend({
   defaults: {
        src: 'placeholder.jpg',
        title: 'An image placeholder',
        coordinates: [0, 0]
    },

    initialize: function() {
        this.bind("change:src", function() {
            var src = this.get("src");
            console.log('Image source updated to ' + src);
        });
        console.log('This model has been initialized!');
    },

    changeSrc: function(source) {
        this.set({src: source});
    }
});

window.myPhoto = new Photo({title: "My awesomeness",
                        src: "thesource.jpg",
                        location: "Boston",
                        tags: ['big game', 'vacation']});

console.log(myPhoto.attributes);
myPhoto.set({src:'aaaa'});
console.log(myPhoto.attributes); 
```

**控制台输出**

![在此处输入图像描述](../Images/f44301e59fa50062e35352a2507a599a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:21:56.687

当您在 google chrome 中记录对象时，它们的状态会在您在控制台中展开它们的属性时检索，而不是在您记录它们时检索。

您可以尝试记录克隆：

```
console.log(JSON.parse(JSON.stringify(myPhoto.attributes)));
myPhoto.set({src:'aaaa'});
console.log(JSON.parse(JSON.stringify(myPhoto.attributes))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:12:33.630

上面的答案有效，但我只想指出，Backbone 的功能基本上已经完成了。您可以使用`toJSON`，它克隆所有属性并返回一个对象。

```
console.log(myPhoto.toJSON());
myPhoto.set({src: 'aaaa'});
console.log(myPhoto.toJSON()); 
```

这将显示一个浅副本，因此它并不完全相同，但它的输入更少，并且在您正在寻找的情况下仍然可以工作。

# ios - UIImage imageNamed 返回 nil

> ID：10998544
> 
> 赞同：53
> 
> 时间：2012-06-12T14:16:17.427
> 
> 标签：ios, xcode, uiimage, imagenamed

我对 iOS 和 Xcode 很陌生。

我试图用

```
[UIImage imageNamed:@"imageName.png/jpg and so on"]; 
```

但它只返回零。该图像应该在我的项目包中，考虑到我可以从 InterfaceBuilder 中的拖放菜单中选择它，并且它是通过“将文件添加到”项目名称“...”菜单添加到 Xcode 中的。

无论我使用 .png 还是 .jpg 图像都没有区别，结果保持不变：它们通过 IB 工作，但如果我尝试自己运行 imageNamed 方法则不会。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-12T16:51:57.020

使用 imageNamed 时图像返回 nil 的原因只有几个：

*   该图像不在您的捆绑包中。确保图像实际上在您的项目中。确保通过单击文件并选择它所属的目标来检查目标。

*   您的图像名称拼写错误或扩展名有问题。

*   您正在使用视网膜显示器，但没有 @2x 图像。尝试将您的模拟器更改为视网膜，看看它是否出现。

*   如果您使用的是资产目录，请确保您在属性检查器中选择了正确的设备。

一些技巧：

如果您正在使用模拟器进行测试，请从模拟器中删除应用程序并清理您的项目，然后重新运行。如果它仍然出现，它应该出现在您的手机上（如果没有，则可能是文件名大小写或@2x 版本的问题）。

如果您在手机上进行测试并且它没有显示，请确保您使用的是相同版本的模拟器（如果您有 iPhone 4/4s，请确保使用带有视网膜的 4/4s 模拟器）。

根据这篇文章的最后一件事：[JPG 图像不加载 UIImage imageNamed](https://stackoverflow.com/questions/7148874/jpg-problem-with-uiimage-imagenamed-method)某些 JPG 类型与 imageNamed 一起使用并且没有扩展名时存在一些问题。IMO，您无论如何都应该使用 PNG，因为 iOS 会为您压缩它们，除非您只需要使用 JPG。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-12T14:27:06.023

重新迈克韦勒的评论。复选框是....

![在此处输入图像描述](../Images/76d53b1c1f7014e371afbc6e699cd9d9.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-06T20:04:14.523

就我而言，PNG 格式不正确。

出于某种原因，Xcode 预览正确显示了它，但是当我尝试使用 UIImage 加载它时，它返回 nil。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-03-23T21:58:32.887

如果您验证了以上所有内容并发现您的 UIImage(named: "myImage")**从您正在构建的动态框架内的代码中**返回 nil ，那么您必须将代码更改为：

```
UIImage(named: "myImage", in: Bundle(identifier: "com.myframework.name"), compatibleWith: nil) 
```

这应该正确地从 CXAssets 检索资产。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-09-11T19:14:32.170

对于磁盘“file.jpg”上命名的jpg文件，我刚刚遇到了这个问题

我试图在没有扩展名的情况下加载，只是@“file”。虽然这适用于 png，但不适用于 jpg。一旦我使用了@“file.jpg”，它就起作用了！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-06-21T06:38:16.820

**斯威夫特 5**

如果您在动态框架中获得 UIImage nil，则应使用捆绑标识符设置图像。

您可以像这样创建 Bundle 的扩展；

*   创建一个扩展；

    ```
    extension Bundle {
        public static let myFramework = Bundle(identifier: "com.myFramework.bundle")
    } 
    ```

*   然后你可以这样使用；

    ```
    UIImage(named: "myImageName", in: Bundle.myFramework, compatibleWith: nil) 
    ```

**或者**

你可以这样使用；

```
UIImage(named: "myImageName", in: Bundle(for: type(of: self)), compatibleWith: nil) 
```

我认为第一个更有用，因为它比第二个更具可读性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-26T05:26:46.153

尝试重新导出您的图像。

我有一个类似的问题， UIImage imageNamed 返回 nil 并且这些答案都没有解决我的问题。

我发现它实际上是png文件的问题。我在 GIMP 图像编辑器中打开了该文件，将其保存为一个新文件，再次将其导出为 png 并神奇地开始工作。

我根本没有更改代码中的任何内容，因此实际的图像文件肯定有问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-12T14:18:46.197

尝试

```
[UIImage imageNamed:@"imageName.png"]; 
```

相反（带有扩展名）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-14T03:37:05.737

我有同样的问题：@“photo.jpg”导致'nil' UIImage。更改为“实际”文件规范，@“photo.JPG”工作正常！我没有意识到那里有区分大小写的！非常不直观。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-01T17:07:35.850

我有一个类似的问题，最后清理解决了它：图像出现在模拟器中，但在 iPhone 上运行应用程序时没有显示 id。
我做了什么：1）从iPhone中删除了应用程序2）在修复错误并显示图像之后执行产品/清洁！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-30T02:13:19.720

尝试使用`UIImage(contentsOfFile:)`而不是`imageNamed`. 它适用于我下载的图像。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-03-04T13:13:38.927

检查文件末尾是否没有空格。名称 like`name @2x.png`将无法加载，但`name@2x.png`很好

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-12T14:58:24.090

图像是否可以在模拟器上工作，但不能在设备上工作？

如果是这样，在这种情况下，它***总是***与名称的大小写有关。该设备需要精确的案例，如果我没记错的话，模拟器并不那么挑剔。

例如对于名为**image.png的图像**

```
[UIImage imageNamed:@"Image"]; 
```

可以在模拟器上工作，但不能在设备上工作......

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-08-28T23:03:00.950

确保您的 .xcassets 文件中有您正在使用的设备的图像。标记为 iPad 的图像不会显示在手机（或模拟手机）上。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-09-02T09:36:46.450

除了@Inturbidus 的回答：对于那些来到这里从事**应用程序扩展**工作的人：

您正在使用的图像应该属于**两个**目标 - 托管应用程序和扩展程序。

在其他情况下，您总是会`nil`尝试从扩展程序的代码中访问它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-11T18:47:32.387

对于 Xcode 6.4，单击 Images.xcassets 并检查您调用的每个图像是否有条目。您可以右键单击图像并选择“在 Finder 中显示”以检查图像是否添加了正确的图像。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-06T21:19:12.687

确保图像的属性检查器名称字段与您使用的名称完全匹配。在我的情况下，图像是文件夹的一部分，因此图像名称是“文件夹/名称”。使用这个长名称解决了这个问题。XCode 7.3.1

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-04-24T13:22:51.607

就我而言，使用带有重音字符的名称被证明是一个糟糕的主意。我将 Astéroïdes 更改为 Asteroids，它运行良好。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-01-24T12:25:02.847

在我的情况下，问题是资产目录中的图像名称。例如，如果您有名称为“TEst”的图像并将名称更改为“Test”，则不会对更改编制索引。如果您的队友将通过此更改拉取提交，则其资产目录中的图像将具有以前的名称“TEst”。抓住这种情况的机会很小，但有可能。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-02-10T05:47:04.147

我的项目中有多个 .xcasset，其中 2 个有重复的图像名称。所以在我的情况下它没有加载图像。

# xslt - 仅当具有给定模式的模板存在时才应用 XSLT 模板

> ID：10998545
> 
> 赞同：3
> 
> 时间：2012-06-12T14:16:19.710
> 
> 标签：xslt, xslt-1.0

在我网站的主 XSLT 模板中，我有：

```
<xsl:apply-templates select="/data" mode="page-scripts"/> 
```

在导入上述主样式表的另一个页面上，我有一个插入一些 JavaScript 的模板：

```
<xsl:template match="/data" mode="page-scripts">
    <!-- JavaScript -->
</xsl:template> 
```

在没有上述模板的页面上，`data`节点的内容按照默认模板输出。

什么是避免这种情况的好方法，而不必有一个与`page-scripts`模式匹配的空白模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:22:16.493

> 在没有上述模板的页面上，数据节点的内容按照默认模板输出。
> 
> 什么是避免这种情况的好方法，而不必有一个与页面脚本模式匹配的空白模板？

没有办法阻止选择执行 XSLT 内置模板，除非覆盖它们。

一个好的解决方案是将“空白”覆盖模板放在“主”样式表本身中，从而避免在任何导入样式表中添加任何此类模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:23:12.297

抱歉，我刚刚在[这里](https://stackoverflow.com/questions/3577606/xslt-apply-template-with-mode-incorrect-result-with-no-matching-mode)找到了答案。

我必须放入`<xsl:template match="*" mode="page-scripts"/>`我的主样式表来覆盖默认模板。

# android - 从列表视图中删除一个项目

> ID：10998551
> 
> 赞同：0
> 
> 时间：2012-06-12T14:16:57.830
> 
> 标签：android, listview, listitem

我需要更改方法onListItemClick() 来删除列表中的项目.. 想法？我不知道如何使它适应我的课堂。我有一个 Db 类 I 和一个 Helper 类。

这是代码：

```
 Cursor cursor = db.rawQuery("select * from " + PRODUCT_TABLE, null);

        setListAdapter(new CursorAdapter(this, cursor, true) {

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent){

            TextView textView = new TextView(ProdottiSelectionActivity.this);
            return textView;
        }

        @Override
        public void bindView (View view, Context context, Cursor cursor){

            TextView textView = (TextView) view;
            textView.append(cursor.getString(1));
            textView.append("\n");
            textView.append(cursor.getString(2));
            textView.append("\n");
            textView.append(cursor.getString(3));
            textView.append("\n");
            textView.append(cursor.getString(4));
            }
        });
    }

@Override
protected void onDestroy(){
    super.onDestroy();
    dbHelper.close();
    }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    setResult(1, new Intent(String.valueOf(id)));
    finish();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:26:42.780

您将需要以下内容

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    db.open();
    //you have to determine user clicked on which item 
    String[] whereArgs={String.valueOf(item_id)};
    db.delete(DATABASE_TABLE_4,"item_id = ?",whereArgs);    
    cursor.requery();  //deprecated 
    adapter.notifyDataSetChanged(); //deprecated 
    db.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:21:57.327

在数据库上运行删除查询，这也会更新列表视图。

```
db.execSQL("delete from " + PRODUCT_TABLE + " where id = 1", null); 
```

例如，如果您想删除 id = 1 的产品，或者您也可以使用[delete 方法](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#delete%28java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)。

另请参阅问题

*   [安卓 db.delete(); 在 ListActivity](https://stackoverflow.com/questions/10198348/android-db-delete-on-listactivity)
*   [Android 删除查询](https://stackoverflow.com/questions/6337764/android-delete-query)

这与您的问题相似。

# cuda - 带有 CUDA 代码的 DLL 的可移植性

> ID：10998557
> 
> 赞同：3
> 
> 时间：2012-06-12T14:17:15.357
> 
> 标签：cuda

我有 DLL，其中包含 CUDA 函数（图像处理）。此 DLL 使用 VISUAL STUDIO 2008 Express 版本编译。我用 LabVIEW 调用这个 DLL。

这个 DLL 和 LabVIEW VI 是在一台计算机（办公室）上开发的，我需要在不同的计算机（实验室）上运行相同的程序。

Q1：我必须在实验室的电脑上安装 cuda 工具包或 cuda SDK 吗？Q2：我必须在实验室的计算机上重新编译 DLL 还是 DLL 是完全可移植的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:10:59.827

1.  是的，如果您使用 SDK 中的任何函数/包装器（如`cudaSafeCall`），则必须安装 CUDA 工具包和 SDK。一般来说 SDK 不是必需的。您还需要在实验室计算机上安装兼容的 NVIDIA GPU 驱动程序。
2.  如果实验室计算机和您自己的计算机具有相同的 Microsoft Visual Studio 运行时、CUDA 运行时版本并且实验室计算机具有具有适当计算能力的 GPU 设备，则您无需重新编译您的代码。有关 CUDA 代码兼容性的更多信息，请参阅 CUDA C 编程指南中的 3.1.2 - 3.1.4 部分。

# c# - 比较 GridDataItem 单元格中的日期以便为该单元格着色

> ID：10998561
> 
> 赞同：0
> 
> 时间：2012-06-12T14:17:28.390
> 
> 标签：c#, telerik-grid

我需要更改单元格的颜色 - 这取决于日期 - 我可以更改单元格的颜色，这里没有问题

```
 GridDataItem item = e.Item as GridDataItem;

        **if ((item["run_Date"].Text > DateTime.Now))** //error is in this line of code
        {
            foreach (GridColumn col in radgrdResultDetail.MasterTableView.Columns)
            {
                item["run_Date"].BackColor = Color.FromArgb(255, 106, 106);

            }
        } 
```

但是它试图访问“日期”-我遇到了我的错误，我附上了我的 e.item 的图像

![在此处输入图像描述](../Images/de8afb7b7bac3b6eb49ecf3e55afbcc6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:33:23.610

您收到的确切错误消息是什么？我的假设是，当您将字符串 cell.Text 与 DateTime 对象 DateTime.Now 进行比较时，您会得到一个无效的强制转换异常。尝试将文本转换为日期时间对象，如下所示：

```
if(DateTime.Compare(Convert.ToDateTime(item["run_date"].Text), DateTime.Now) > 0) 
```

或查看单元格本身，我认为它返回一个对象，并将其转换为日期时间对象

```
if(DateTime.Compare((DateTime)item["run_date"], DateTime.Now) > 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:51:24.790

试试这个

```
protected void RadGrid1_ItemDataBound(object sender, Telerik.Web.UI.GridItemEventArgs e)
{
    //Is it a GridDataItem
    if (e.Item is GridDataItem)
    {
        //Get the instance of the right type
        GridDataItem item= e.Item as GridDataItem;

        //Check the formatting condition
        if(DateTime.Compare(Convert.ToDateTime(item["run_date"].Text), DateTime.Now) > 0)
        {
            item["run_Date"].BackColor = Color.FromArgb(255, 106, 106);
            //Customize more...
        }
    }
} 
```

参考：
[ItemDataBound 上行/单元格的条件格式](http://www.telerik.com/help/aspnet-ajax/grid-appearance-conditional-formatting.html)
[如何在指定条件下更改 RadGrid 的行颜色？](http://humrahimcs.wordpress.com/2011/12/19/how-to-change-row-color-for-radgrid-with-specified-conditions/)

# php - 简单的strtotime数学

> ID：10998564
> 
> 赞同：0
> 
> 时间：2012-06-12T14:17:37.773
> 
> 标签：php, math

我正在尝试获取从以下步骤开始经过的总分钟和秒数：

1：`strtotime('now') - strtotime('-1 day');`

2：我会得到像**120**这样的东西让我们说......

3：所以... 120 = 2 分钟——我的问题是剩下的！

4：例子：

```
 130 = 2 minutes 10 seconds
    130 / 60 = 2.1666~

    121 = 2 minutes 1 seconds
    121 / 60 = 2.0166~

    122 = 2 minutes 2 seconds
    122 / 60 = 2.0366~ 
```

*   5：所以使用示例 122，我有 2 分钟， **但我如何从那里抓住 2 秒？** 我试图`explode`在期间，并使用剩余部分，但这是不对的。

PS：我从来没有送过数学礼物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:23:36.680

您还可以使用 DateTime 数学（php >= 5.3）：

```
$d1 = new DateTime(strtotime('now'));
$d2 = new DateTime(strtotime('-1 days'));

$diff = $d1->diff($d2);

echo "{$diff->i} minutes, {$diff->s} seconds\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:30:35.973

这就是你如何使用 PHP 的[`DateTime`](http://www.php.net/manual/en/class.datetime.php)::[`diff`](http://www.php.net/manual/en/datetime.diff.php)返回[`DateInterval`](http://www.php.net/manual/en/class.dateinterval.php)

```
 $dt = new DateTime();
   $dt2 = new DateTime("-120 seconds");
   $diff = $dt->diff( $dt2 );
   echo( $diff->format("%i min and %s sec") ); 
```

# php - 如何使用 jQuery 从模板文件中调用函数

> ID：10998570
> 
> 赞同：2
> 
> 时间：2012-06-12T14:18:02.557
> 
> 标签：php, jquery, html

我有 2 个文件，.tpl 和 .inc.php

在我的 .inc.php 中，我使用 2 个查询来获取一些数据。使用 smarty，我将查询响应传递给 .tpl 文件，并在表和选择列表中显示这些数据。

现在，我希望当用户在选择列表中选择一个新项目时，我的列表会自动更新。

我实际上能够检测到选择列表上的变化。

问题是，我怎么能调用这个函数

```
updateToolPrivilegesTableForSelectedTool($Object) 
```

来自 .tpl 文件。该函数位于 .inc.php 文件中。使用 jquery 应该可以做到这一点，但我不知道如何。

这是我的代码：

PHP：

```
<?php

updateToolPrivilegesTable();

$tool =$_DB->queryRaw("SELECT objects FROM backend_menu WHERE parent != 0");
while ($row_tool = $tool->next_assoc())
{
    $resultstool[] = $row_tool;
}

$smarty->assign("tool_name",$resultstool);
$smarty->assign("privileges",$resultsprivlieges);
$smarty->TDisplay("users/backend_tools_user_privileges.tpl", "Backend Tools Privileges", "general-content.tpl");

function updateToolPrivilegesTable()
{
global $_DB;
global $resultsprivlieges;
$resultsprivlieges = array();
$privlieges = $_DB->queryRaw("SELECT `group_id`, `user_id`, `Object`, `Read`, `Update`, `Insert`, `Delete` FROM `backend_privileges`");

while ($row = $privlieges->next_assoc())
{
    $resultsprivlieges[] = $row;
}
}

function updateToolPrivilegesTableForSelectedTool($Object)
{
global $_DB;
global $resultsprivlieges;
$resultsprivlieges = array();
$privlieges = $_DB->queryRaw("SELECT `group_id`, `user_id`, `Object`, `Read`, `Update`, `Insert`, `Delete` FROM `backend_privileges` WHERE `Object`=$Object");

while ($row = $privlieges->next_assoc())
{
    $resultsprivlieges[] = $row;
}
}

?> 
```

HTML (.tpl)

```
<h1> Backend Tools Privileges</h1>

<table>
<tr>
<td>Tool</td>
<td>
<SELECT name="object" id="selectTool">
        {foreach from=$tool_name item=toolItem name=foo}    
                <OPTION name="object" VALUE="{$toolItem['objects']}">{$toolItem['objects']}</OPTION>
        {/foreach}
</SELECT>
</td>
</tr>
</table>

<table width='700px' id="employeetable" class="tablesorter" style='table-layout:fixed;'>
<thead>
    <tr>
        <th>Group Id</th>
        <th>User Id</th>
        <th>Object</th>
        <th>Read</th>
        <th>Update</th>
        <th>Insert</th>
        <th>Delete</th>
    </tr>
</thead>
<tbody>
    {foreach from=$privileges item=privilegesItem name=foo}
    <tr>
        <td>{$privilegesItem['group_id']}</td>
        <td>{$privilegesItem['user_id']}</td>
        <td>{$privilegesItem['Object']}</td>
        <td>{$privilegesItem['Read']}</td>
        <td>{$privilegesItem['Update']}</td>
        <td>{$privilegesItem['Insert']}</td>
        <td>{$privilegesItem['Delete']}</td>
    </tr>
    {/foreach}
</tbody>
</table>
</form>

{literal}
<script type="text/javascript">

$(selectTool).change(function() 
{
!!!!!!! Here I shuld call the function updateToolPrivilegesTableForSelectedTool($Object) from .php file.
}
</script>
{/literal} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:37:10.183

您可以简单地使用表单发布来重新加载页面，其中包含下拉列表中的选定对象作为发布变量，并在您的选择框中提交 onchange 表单。

因此，将您的下拉菜单更改为：

```
<form action="mypage.php" method="post">
   <select name="object" id="selectTool" onChange="form.submit()">
        <option>Please pick an object to filter...</option>
        {foreach from=$tool_name item=toolItem name=foo}    
                <option name="object" VALUE="{$toolItem['objects']}">{$toolItem['objects']}</option>
        {/foreach}
   </select>
</form> 
```

然后在你的 PHP 中有：

```
if(isset($_POST['object']{0})){
    updateToolPrivilegesTableForSelectedTool($_POST['object']);
}else{
    updateToolPrivilegesTable();
} 
```

当心！更改 updateToolPrivilegesTableForSelectedTool 中的查询以避免数据库注入：

```
$privlieges = $_DB->queryRaw("SELECT `group_id`, `user_id`, `Object`, `Read`, `Update`, `Insert`, `Delete` FROM `backend_privileges` WHERE `Object`='".mysql_real_escape_string($Object)."'"); 
```

更好的 Ajax 解决方案需要更多代码，因为您需要动态替换整个 tbody 并将 updateToolPrivilegesTableForSelectedTool 移动到单独的文件中。如果您使用某种 jQuery 表格排序器插件，您可能也必须再次调用表格排序器。让这一切正常工作会更加棘手，我认为您应该首先了解表单发布的基础知识。

# python - 在 Python 中轻松发出 YAML

> ID：10998573
> 
> 赞同：1
> 
> 时间：2012-06-12T14:18:19.500
> 
> 标签：python, yaml

我有这个数字代码，到目前为止，它有一堆`print`s 在计算运行时提供几条信息。

为了让我更容易处理信息，我使用 YAML。对于 C++，存在以下语法

```
YAML::Emitter out;
out << YAML::BeginSeq;
out << "eggs";
out << "bread";
out << "milk";
out << YAML::EndSeq; 
```

这很好用。我现在想知道 Python 是否存在类似的东西。我刚才遇到的一个粗略的等价物是 PyYAML，如果我没记错的话，上面的等价物看起来像

```
print yaml.emit([yaml.StreamStartEvent(),
                 yaml.DocumentStartEvent(),
                 yaml.SequenceStartEvent(anchor=None, tag=None, implicit=True),
                 yaml.ScalarEvent(anchor=None, tag=None, implicit=(True, False), value=u'eggs'),
                 yaml.ScalarEvent(anchor=None, tag=None, implicit=(True, False), value=u'bread'),
                 yaml.ScalarEvent(anchor=None, tag=None, implicit=(True, False), value=u'milk'),
                 yaml.SequenceEndEvent()
               ]) 
```

哇，好啰嗦。你知道不那么冗长的语法/Python YAML 包吗？当然总是`yaml.dump()`有，但重要的是要立即写出数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:15:14.610

PyYAML 尝试确保其输出始终格式正确，因此您不能发出部分文档。

解决方案是始终发出完整的文档！

```
import yaml
print yaml.dump(["eggs", "bread", "milk", "squick"], explicit_start=True)
print yaml.dump(dict(a=1, b=2, c=3), explicit_start=True) 
```

这将输出一个包含 2 个文档的流，您可以使用`yaml.load_all`.

# jquery - 更改 iframe 的高度和来源

> ID：10998574
> 
> 赞同：0
> 
> 时间：2012-06-12T14:18:19.617
> 
> 标签：jquery, iframe

我的页面上有一个 iFrame，下面有一个链接列表。我需要这些链接来更改 iFrame 的来源和高度，并在单击时转到页面顶部、命名锚点“顶部”。

可能使用jQuery？

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:27:57.023

是的，使用 jquery 绝对可以做到这一点。我不确切知道 iframe 中的代码是什么样的，但是要按名称选择 iframe，例如，您可以：

```
$("iframe[name='figher_profile']").contents(); 
```

然后设置它的高度

```
$("iframe[name='figher_profile']").height($("iframe[name='figher_profile']").contents().find("html").css("height", "100")); //Setting the height to 100 px 
```

要更改 iframe 的来源：

```
var location = "http://google.com";
$("iframe[name='figher_profile']").attr('src', location); 
```

如果您想对具有 id 或类的 iframe 执行相同操作，只需将 [name='ifr'] 替换为 #id 或 .class ，如下所示：

```
$("iframe#id") //for id
$("iframe.class") //for class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:26:57.737

有很多方法可以做到这一点......因此，我只发布最补救的方法......

```
<div class="profile_container">
</div>
<a href="#" id="link1">abcd</a>
    <script>
$(document).ready(function(){
  var srcLink = 'http://placehold.it/440x440';
  var srcheight = '440'; 
  var iframeHtml = '<iframe src="'+srcLink+'" width="900" height="'+srcheight+'" frameborder="0" scrolling="no" name="figher_profile"></iframe>';
  $('#link1').click(function(){
    $('.profile_container').html(iframeHtml);
  });
});
    </script> 
```

[http://jsfiddle.net/gorelative/AmKJX/1/](http://jsfiddle.net/gorelative/AmKJX/1/)

# c - 有没有更好的方法来存储整数对？

> ID：10998577
> 
> 赞同：1
> 
> 时间：2012-06-12T14:18:25.823
> 
> 标签：c, cuda

如果这是非常基本的，我很抱歉，但我仍在学习我可以在 C 中做的所有事情，但不知道如何做到这一点。

我在程序中创建了成对的整数，然后需要存储它们。到目前为止我一直在做的方式是创建一个结构：

```
struct list_el {
    short *val; //first value
    short *val2; //second value
    struct list_el * next;
};
typedef struct list_el item; 
```

我可以在我的正常程序中很好地迭代列表，但我想将它发送给 Cuda，但我不确定如何将整个结构转移到 Cuda（我知道我可以引用它）。我想知道是否有另一种方法可以构造这些数据，所以也许是它的数组？我需要的格式只是简单的配对（例如 10:5、20:40 等）。我认为最坏的情况是我可以使用一个 char 字符串并将这些对作为字符，然后在主数组位于 Cuda 时解析它们，但我想知道是否有更好的方法来创建这个列表列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:22:39.113

不要存储引用两个`int`s 的内容，而是存储包含 s 副本的内容`int`。

```
struct list_el {
    int val; //first value
    int val2; //second value
    struct list_el * next;
};
typedef struct list_el item; 
```

有时最好保留一个引用，有时最好保留一个值。根据您尝试做的事情，使用正确的工具来完成这项工作。

顺便说一句，您的引用持有结构仅持有对`short`s 的引用。要真正持有对`int`s 的引用，您需要

```
struct list_el {
    int *val; //reference to first value
    int *val2; //reference to second value
    struct list_el * next;
};
typedef struct list_el item; 
```

请注意，如果您持有一个引用，则程序的其余部分不应在您处理结构引用之前处理该引用的内存，以防止访问不再与程序关联的内存（这是一个错误）。

如果您不想使用类似构造的列表，还有其他技术。

```
int val[2] = { 1, 2 }; 
```

将存储两个`int`s，但只有两个整数。

```
int val[2][9]; 
```

将存储九对两个`int`s，也可以很容易地表示为

```
int val[9][2]; 
```

当然，还有旧的备用

```
int val = 3;
int val2 = 4; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T16:41:01.703

假设您可以使用两个单独的数组，并考虑如何在 CUDA 中使用/读取/写入它们，我将把数据安排在两个数组中，主要是由于内核中全局内存的合并访问。

```
int *h_val1, *h_val2; // allocate arrays in the host and initialize them 
```

设 N 为数组的大小，在设备内存中分配数组

```
int *d_val1, *d_val2;
cudaMalloc( (void**) &d_val1, N * sizeof(int) );
cudaMalloc( (void**) &d_val2, N * sizeof(int) ); 
```

并将数据从主机复制到设备内存

```
cudaMemcpy(h_val1, d_val1, N * sizeof(int), cudaMemcpyHostoToDevice);
cudaMemcpy(h_val2, d_val2, N * sizeof(int), cudaMemcpyHostoToDevice); 
```

配置并启动内核以运行与数组中的元素一样多的线程。

```
// kernel configuration
dim3 dimBlock = dim3 ( BLK_SIZE, 1, 1 );
dim3 dimGrid  = dim3 ( (N / BLK_SIZE) + 1 );

yourKernel<<<dimGrid, dimBlock>>>(d_val1, d_val2); 
```

考虑到这一点，实现你的内核

```
__global__ void
yourKernel(int* val1, int* val2, N)
{
    // map from threadIdx/BlockIdx to index position
    int gid = threadIdx.x + blockIdx.x * blockDim.x;

   if (gid < N)
   {
        int r_val1 = val1[ idx ]; // load from global memory to register
        int r_val2 = val2[ idx ]; // load from global memory to register

        // do what you need to do with pair val1:val2
   }
} 
```

调用 CUDA 函数时不要忘记检查错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T14:22:54.573

只使用二维数组怎么样？

```
int pairs[30][2];

pairs[0][0] = 10;
pairs[0][1] = 5;
// etc. 
```

~~我必须测试它，但我想~~我测试了它，你甚至可以做类似的事情

```
int pairs[][2] = {{10, 5}, {20, 40}, ...}; 
```

用于初始化。

注意：如果您提前知道将拥有多少双并且数量不会增长/缩小（大量），则此方法效果很好。如果您的配对数量变化很大，从长远来看，坚持使用结构列表并使用 Edwin 的答案可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T15:18:48.743

拥有一个二维数组是一个很好的解决方案，但我会像保留结构解决方案一样回答。

将短整数存储在结构中没有任何问题，但我不会将值存储在短 * 中。对我来说，动态分配内存是不值得的，因为您需要一个新结构。

你可以有一个结构数组来存储这些数据。这是一个固定大小的数组示例`item`。

```
#include <stdio.h>

struct list_el {
    short val; //first value
    short val2; //second value
};
typedef struct list_el item;

item listA[20];

int main()
{
    listA[0].val = 1;
    listA[0].val2 = 2;

    printf("\n%i %i\n", listA[0].val, listA[0].val2);
    return 0
} 
```

即使您提出您不会事先知道您将拥有多少个这些结构的论点，我也只会像这样为数组分配空间：

```
#include <stdio.h>
#include <stdlib.h>

struct list_el {
    short val; //first value
    short val2; //second value
};
typedef struct list_el item;

item * p_list_el,  * pCurStruct;

int main()
{
    int idx;

    /* p_list_el is the pointer to the array. Don't modify.
       pCurStruct can be modified to walk the array. */

    p_list_el = malloc(sizeof(item) * 20);

    for(idx=0, pCurStruct=p_list_el; idx < 20; idx++)
    {
        pCurStruct[idx].val = idx;
        pCurStruct[idx].val2 = idx + 1;
    }

    for(idx=0, pCurStruct=p_list_el; idx < 20; idx++)
    {
        printf("\n%i %i\n", pCurStruct[idx].val, pCurStruct[idx].val2);
    }

    free(p_list_el);
} 
```

# c++ - 有没有类似矩阵数组的东西？

> ID：10998583
> 
> 赞同：-2
> 
> 时间：2012-06-12T14:18:52.993
> 
> 标签：c++

我只是在想如何做到这一点......我的意思是这个数组可以以非常少的方式存储多个值。条款

例如。3x3 矩阵的 3 项数组将有 27 个项及其矩阵分组

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:21:34.613

我猜你的意思是一个三维数组，当然你可以拥有它们，例如

```
float ***values; 
```

或者

```
float values[10][5][5]; 
```

但我建议你坚持使用对象：

```
class Matrix {
  float **data;
}

vector<Matrix> matrices; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:21:05.353

您可以存储一个数组`int**`，每个数组都`int**`指向自己的一组`int[][]`s。

# iphone - 使用嵌套 JSON 填充 UITableView

> ID：10998586
> 
> 赞同：0
> 
> 时间：2012-06-12T14:19:09.773
> 
> 标签：iphone, ios, json, uitableview

正如标题所示，我正在尝试从 JSON 填充 UITableView。我得到了看起来像的 json 对象

```
 {
    applications: {
           iphone: {
             application: [
                            {
                              title: "Title",
                             },
                             {
                              title: "Title2",
                             },
                             {
                              title: "Title3",
                             }
                           ]
                      }
                     }
    } 
```

它就这样继续下去，`title`在应用程序中嵌套了几个字段。

我想使用所有标题作为我的单元格标签。我可以得到这样的清单

```
for (int i = 0; i < 10; i++)
    {
        titleString = [[[[[result objectForKey:@"applications"] objectForKey:@"iphone"] objectForKey:@"application"] objectAtIndex:i] objectForKey:@"title"];
        NSLog(@"title %@", titleString);
    } 
```

这确实有效，因为我可以记录标题列表......但我知道我以错误的方式处理这个问题，我什至无法弄清楚 myArray`return [myArray count]`在`numberOfRowsInSection`方法中会是什么......完全丢在这里！帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:27:32.230

`[[[result objectForKey:@"applications"] objectForKey:@"iphone"] objectForKey:@"application"]`将返回数组，因此最好存储此数组并在需要的地方使用它，如下所示：

```
NSArray *titleArray = [[[result objectForKey:@"applications"] objectForKey:@"iphone"] objectForKey:@"application"]; 
```

要存储此数组，您可以使用实例变量，以便您可以使用整个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:25:42.250

您可以将这些标题存储在一个数组中，然后将此数组用作表的数据源。您的 myArray 将是您存储标题的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T15:05:20.627

首先是应用程序字典
这个应用程序字典有一个键 iPhone 字典
这个 iphoneDic 有一个字典数组

```
NSMutableDictionary *applicationsDict = [response objectForKey:@"applications"];
NSMutableDictionary *iphoneDict = [applicationsDict objectForKey:@"iphone"];
NSMutableArray *applicationArray = [iphoneDict objectForKey:@"application"]; 
```

现在在 table view 的方法 numberOfRowInSection: 中返回数组计数

```
return [applicationArray count] 
```

现在在 cellForRowAtIndexPath: mthod 我们将使用这个 applicationArray
Use Array ...

```
NSMutableDictionary *titleDict = [applicationArray objectAtIndex:indexPath.row];
cell.titleLabel.text = [titleDict objectForKey:@"title"]; 
```

我希望这能帮到您

# android - 在 Android 中设计长表单的聪明方法？

> ID：10998588
> 
> 赞同：1
> 
> 时间：2012-06-12T14:19:13.297
> 
> 标签：android, android-layout, screen-resolution

我想创建一种包含大约 40 个问题的“电子问卷”。设计表单（主要由 Spinner 元素组成）时，我发现在 QVGA 分辨率下，我可以在布局中放置最多 3 个问题，其文本大小仍然可供老年人阅读。

现在当然一种解决方案是使用滚动框，但我认为这很不方便（而且不清楚：“我错过了上面的某个地方吗？”）甚至可能“丑陋”。

另一方面，每个布局只保留 3 个问题，它在更大的显示器上一定很难看。

我只是想问问其他人是如何解决这个设计挑战的，以及是否有比我迄今为止想到的更聪明的解决方案...... 8-/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:25:18.987

针对不同屏幕尺寸和分辨率的不同布局可能是处理此问题的最佳方式。有关更多信息，请参阅[Android 开发人员指南上的这篇文章。](http://developer.android.com/guide/practices/screens_support.html#DesigningResources)此外，长表单（从设计和可用性的角度来看）可能有点令人生畏，所以从人类的角度来看，我建议每页做几个问题，以防止用户感到沮丧。

# svn - SVN 在没有 SSH 的服务器上，可能吗？

> ID：10998592
> 
> 赞同：2
> 
> 时间：2012-06-12T14:19:16.870
> 
> 标签：svn, ssh, hosting

我的主机（共享）不提供任何 SSH 访问（也不打算）。

有没有办法可以在上面创建一个 SVN 服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:29:16.537

是的，您可以在没有 SSH的情况下[使用 svnserve 协议](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.svnserve.html)运行 svn 服务器。

此外，您可以让 Apache 使用 svn_dav 插件通过 HTTP 提供[SVN 访问，](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.httpd.html)而无需 HTTPS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:25:02.207

有一些方法可以设置 SVN，这样它就不需要 SSH（虽然它不会受到保护）。但是，您需要访问机器（通常使用 SSH）才能以这种方式设置 SVN。大多数提供基本网络空间解决方案的供应商都不支持这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T15:51:48.377

您是说您没有对服务器的命令行访问权限，或者您不能使用 svn+ssh 访问您的 Subversion 存储库？

如果您没有对服务器的命令行访问权限，则很难设置任何内容以使用 Subversion。

# c# - ComplexTypes 和动态包装器

> ID：10998596
> 
> 赞同：0
> 
> 时间：2012-06-12T14:19:34.683
> 
> 标签：c#, ilgenerator

[DynamicWrapper](http://dynamicwrapper.codeplex.com/)让接口以这种方式关联到对象

```
IDoSomething actor = objectWithoutInterface.As<IDoSomething>(); 
```

我怎样才能扩展这个库，以便我可以编写类似的东西

```
actor.Get(MyTypeCopy myComplexObject); 
```

为了打电话

```
objectWithoutInterface.Get(MyType myComplexType); 
```

MyTypeCopy 是另一个命名空间中 MyType 的副本？

一种解决方案是添加

```
Get(dynamic myComplexObject); 
```

到接口，并在调用方法之前应用强制转换（序列化/反序列化）。

有没有办法添加 DynamicMethod 以在 DynamicWrapper 库中应用强制转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:57:02.383

只需添加

`ilGenerator.Emit(OpCodes.Call, convertType);`

推入每个参数后

# java - 没有使用 Play 应用样式！2.0 PDF模块

> ID：10998602
> 
> 赞同：0
> 
> 时间：2012-06-12T14:19:50.910
> 
> 标签：java, css, pdf, playframework

我最近[为 Play 安装了 PDF 模块！2.0](https://github.com/joergviola/play20-pdf)并且能够毫不费力地将其连接起来以呈现 PDF。但是，它似乎没有加载我的样式表，因为没有样式应用于 PDF。

我尝试使用类路径引用我的样式表：

```
<link rel="stylesheet" type="text/css" href="/public/css/pdf.css" media="screen" /> 
```

我还尝试使用以下方法引用它`@routes`：

```
<link rel="stylesheet" type="text/css" href="@routes.Assets.at("css/pdf.css")" media="screen" /> 
```

为了保持简单，我在样式表中只包含了一种样式：

```
td {
    color: blue;
} 
```

如果我渲染为 HTML，我的表格中的文本是蓝色的，但如果我渲染为 PDF，它全是黑色的。

如果这是一个已知问题，我在任何地方都看不到它。我的印象是这应该可以工作，所以看起来我一定是错过了什么或做错了什么。任何人都可以帮忙吗？

我也在[这里报告了这个问题](https://github.com/joergviola/play20-pdf/issues/4)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T21:14:35.660

我不确定这是否是唯一的问题，但是当我写有关 play 1.x 的 PDF 模块时，我在书中写了一个问题。

您正在使用的 CSS（以及第一次生成 Play 时的默认值）是使用`media="screen"`. PDF 被归类为打印。因此，您需要设置 media="print"。

```
media="print" 
```

所以它会是

```
<link rel="stylesheet" type="text/css" href="/public/css/pdf.css" media="print" /> 
```

# windows - Windows 驱动程序错误检查 7E 驱动程序加载

> ID：10998612
> 
> 赞同：1
> 
> 时间：2012-06-12T14:20:17.610
> 
> 标签：windows, exception, driver, breakpoints, bsod

这个难倒我。

我的驱动程序在所有来宾虚拟系统（Windows xp/7 x86 和 x64）以及一些特定主机中都可以正常工作。

但是，在*我的*PC 上，当我在 OSRLoader 中启动驱动程序时，我收到了一个 0x7E 停止代码。

是的，测试签名和调试模式都已启用。

这是一些转储信息（警告，巨大）：

```
0: kd> !analyze -v
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

SYSTEM_THREAD_EXCEPTION_NOT_HANDLED_M (1000007e)
This is a very common bugcheck.  Usually the exception address pinpoints
the driver/function that caused the problem.  Always note this address
as well as the link date of the driver/image that contains this address.
Some common problems are exception code 0x80000003\.  This means a hard
coded breakpoint or assertion was hit, but this system was booted
/NODEBUG.  This is not supposed to happen as developers should never have
hardcoded breakpoints in retail code, but ...
If this happens, make sure a debugger gets connected, and the
system is booted /DEBUG.  This will let us see why this breakpoint is
happening.
Arguments:
Arg1: ffffffff80000003, The exception code that was not handled
Arg2: fffff88000c0af0f, The address that the exception occurred at
Arg3: fffff88002fb1d78, Exception Record Address
Arg4: fffff88002fb15e0, Context Record Address

Debugging Details:
------------------

EXCEPTION_CODE: (HRESULT) 0x80000003 (2147483651) - One or more arguments are invalid

FAULTING_IP: 
CI!CiValidateImageHeader+167
fffff880`00c0af0f cc              int     3

EXCEPTION_RECORD:  fffff88002fb1d78 -- (.exr 0xfffff88002fb1d78)
ExceptionAddress: fffff88000c0af0f (CI!CiValidateImageHeader+0x0000000000000167)
   ExceptionCode: 80000003 (Break instruction exception)
  ExceptionFlags: 00000000
NumberParameters: 1
   Parameter[0]: 0000000000000000

CONTEXT:  fffff88002fb15e0 -- (.cxr 0xfffff88002fb15e0)
rax=0000000000000000 rbx=00000000000000ff rcx=1748c3f2dac60000
rdx=0000000000000008 rsi=fffff88002fb2100 rdi=00000000c0000428
rip=fffff88000c0af0f rsp=fffff88002fb1fb0 rbp=0000000000000000
 r8=0000000000000001  r9=fffff80002d0bbe0 r10=fffff80002e4a900
r11=fffff88002fb1fa8 r12=0000000000006000 r13=fffff98018700000
r14=fffffa8002621520 r15=0000000000000001
iopl=0         nv up ei ng nz na pe nc
cs=0010  ss=0018  ds=002b  es=002b  fs=0053  gs=002b             efl=00000282
CI!CiValidateImageHeader+0x167:
fffff880`00c0af0f cc              int     3
Resetting default scope

CUSTOMER_CRASH_COUNT:  1

DEFAULT_BUCKET_ID:  VISTA_DRIVER_FAULT

BUGCHECK_STR:  0x7E

PROCESS_NAME:  System

CURRENT_IRQL:  0

ERROR_CODE: (NTSTATUS) 0x80000003 - {EXCEPTION}  Breakpoint  A breakpoint has been reached.

EXCEPTION_PARAMETER1:  0000000000000000

LAST_CONTROL_TRANSFER:  from fffff80002f35b18 to fffff88000c0af0f

STACK_TEXT:  
fffff880`02fb1fb0 fffff800`02f35b18 : 00000000`00000006 00000000`000fffff fffffa80`02621520 00000000`00000000 : CI!CiValidateImageHeader+0x167
fffff880`02fb2090 fffff800`02f3591a : 00000000`00000000 00000000`01000000 fffffa80`055e6010 00000000`00000000 : nt!SeValidateImageHeader+0x58
fffff880`02fb20d0 fffff800`0302dea2 : fffffa80`02621520 fffffa80`055e6010 00000000`00000001 00000000`00000006 : nt!MiValidateImageHeader+0x21a
fffff880`02fb21a0 fffff800`02fba3cf : fffff880`02fb2400 00000000`00000000 fffff880`02fb26b8 fffff880`02fb23f8 : nt! ?? ::NNGAKEGL::`string'+0x4e3e3
fffff880`02fb23b0 fffff800`02cce293 : fffffa80`02505b60 fffff880`02fb2658 fffff880`02fb2448 00000000`00000000 : nt!NtCreateSection+0x162
fffff880`02fb2430 fffff800`02cca830 : fffff800`030a7f16 00000000`00000000 fffff800`02fbc607 00000000`00000001 : nt!KiSystemServiceCopyEnd+0x13
fffff880`02fb2638 fffff800`030a7f16 : 00000000`00000000 fffff800`02fbc607 00000000`00000001 fffffa80`0254c518 : nt!KiServiceLinkage
fffff880`02fb2640 fffff800`030a82dc : ffffffff`80000ea4 fffffa80`00100000 fffffa80`0254c518 00000000`00000000 : nt!MmCheckSystemImage+0x96
fffff880`02fb2770 fffff800`030a84f7 : ffffffff`80000ea4 fffff800`00000001 fffff8a0`0b36c500 00000000`00000000 : nt!MiCreateSectionForDriver+0xcc
fffff880`02fb2820 fffff800`030b3d9a : 00000000`00000000 fffff880`02fb29f8 fffffa80`02505b60 fffff800`02e48e00 : nt!MiObtainSectionForDriver+0xd7
fffff880`02fb2880 fffff800`030b69bd : fffff880`02fb29f8 00000000`00000000 00000000`00000000 00000000`00000000 : nt!MmLoadSystemImage+0x23a
fffff880`02fb29a0 fffff800`030b7375 : 00000000`00000001 00000000`00000000 00000000`00000000 fffffa80`02829388 : nt!IopLoadDriver+0x44d
fffff880`02fb2c70 fffff800`02cdc1e1 : fffff8a0`00000000 ffffffff`80000e90 fffff800`030b7320 fffffa80`02505b60 : nt!IopLoadUnloadDriver+0x55
fffff880`02fb2cb0 fffff800`02f6e6e6 : b9ce705b`ee973fcb fffffa80`02505b60 00000000`00000080 fffffa80`024ef5f0 : nt!ExpWorkerThread+0x111
fffff880`02fb2d40 fffff800`02cad566 : fffff880`009eb180 fffffa80`02505b60 fffff880`009f5f40 50320c1b`3fdc0847 : nt!PspSystemThreadStartup+0x5a
fffff880`02fb2d80 00000000`00000000 : fffff880`02fb3000 fffff880`02fad000 fffff880`02fb13f0 00000000`00000000 : nt!KiStartSystemThread+0x16

FOLLOWUP_IP: 
CI!CiValidateImageHeader+167
fffff880`00c0af0f cc              int     3

SYMBOL_STACK_INDEX:  0

SYMBOL_NAME:  CI!CiValidateImageHeader+167

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: CI

IMAGE_NAME:  CI.dll

DEBUG_FLR_IMAGE_TIMESTAMP:  4a5be01d

STACK_COMMAND:  .cxr 0xfffff88002fb15e0 ; kb

FAILURE_BUCKET_ID:  X64_0x7E_CI!CiValidateImageHeader+167

BUCKET_ID:  X64_0x7E_CI!CiValidateImageHeader+167

Followup: MachineOwner
--------- 
```

作为顶部状态的一点点，我*已经*启动 /DEBUG 并且它显示的只是我已经拥有的。

我的代码中的第一次登录甚至没有被击中：

```
/*
 * DriverEntry
 *  Driver entry point
 */
NTSTATUS DriverEntry(IN PDRIVER_OBJECT driver, IN PUNICODE_STRING path)
{
    // Setup vars
    UNICODE_STRING devLink, devName;
    PDEVICE_OBJECT devObj = NULL;
    NTSTATUS ntsReturn;

    // Log Entry
    LOG("Driver Entry");

    // Setup driver unload function
    driver->DriverUnload = DrvUnload; 
```

WinDbg 在它的视图中没有显示任何类似的东西。

我怎么知道是什么原因造成的？当没有附加windbg时，断点会导致蓝屏，并且（显然）在附加时冻结我的计算机*，*给我没有真正的可用数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:38:32.040

看起来您在 CI.dll 中遇到了调试断言。您可以`g`从调试器中键入并继续加载您的驱动程序。

这是 x64 版本的 Windows 的默认行为。如果您不想看到该断言，您必须在启动时按 F8 并选择每次启动都有效的“禁用驱动程序签名强制”。（每次重新启动时都必须这样做）。或者，您可以使用 32 位 Windows 和 32 位版本的驱动程序进行调试。

这是更多信息：

[http://msdn.microsoft.com/en-us/library/ff547565(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ff547565(v=vs.85).aspx)

# html - IE7垂直对齐中间 - 不起作用

> ID：10998614
> 
> 赞同：6
> 
> 时间：2012-06-12T14:20:21.457
> 
> 标签：html, css

请在下面的链接中找到，

[http://jsfiddle.net/anglimass/Y8AvM/](http://jsfiddle.net/anglimass/Y8AvM/)

我只想让我的 div 也垂直对齐中间 ie7。

有人可以帮忙吗？

谢谢

* * *

对不起大家，

我找到了一个很好的解决方案请参阅下面的链接，

[http://jsfiddle.net/anglimass/ct4tx/](http://jsfiddle.net/anglimass/ct4tx/)

谢谢，

参考：[http ://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizo​​ntally-and-vertically/](http://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizontally-and-vertically/)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T14:23:57.077

它在 IE7 中不起作用，因为 IE7[不支持](http://caniuse.com/css-table) `display: table-cell`.

我什至已经[告诉过你了。](https://stackoverflow.com/questions/6956365/display-table-cell-does-not-work-in-ie-7)

这是在 IE7 中有效的另一种垂直居中技术：[如何在 div 内垂直对齐图像](https://stackoverflow.com/questions/7273338/how-to-properly-vertically-align-an-image/7310398#7310398)

这是适用于您的代码的上述答案中最简单的技术版本：http: [//jsfiddle.net/thirtydot/Y8AvM/1/](http://jsfiddle.net/thirtydot/Y8AvM/1/)

**HTML：**

```
<div class="inlay">
    <span class="helper"></span><img src="http://goldstudios.net/uploader/uploads/Wildebeest_$1$2ryes3hf$Fl0tEsFaORwBW2seye9qN0.jpg" />
</div>​ 
```

**CSS：**

```
html, body {
    height: 100%;
    background: #ddd;
}
.inlay {
    height: 100%;
    text-align: center;
}

.inlay img {
    vertical-align: middle;
}
.helper {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
} 
```

它适用于所有现代浏览器，当然还有 IE7。

# c# - 如何从 WCF 中的 System.ServiceModel.Channels.RequestContext 获取 HttpMethod

> ID：10998618
> 
> 赞同：3
> 
> 时间：2012-06-12T14:20:30.817
> 
> 标签：c#, wcf, rest

如何从 System.ServiceModel.Channels.RequestContext 获取 HttpMethod ？HostedHttpContext 的 HttpMethod 属性 `(System.ServiceModel.Activation.HostedHttpContext)`是`Internal`

**更新 - 说明：**

我创建了一个`BasicAuthenticationInterceptor`（*继承*RequestInterceptor）用于我的 REST WCF 服务中的基本 HTTP 身份验证。在`void ProcessRequest(ref RequestContext requestContext)`方法中，我需要检查**HTTP 方法**（例如，如果它是**POST**）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:19:10.680

消息应该具有类型的属性`HttpRequestMessageProperty`（其键是`HttpRequestMessageProperty.Name`。尝试从上下文中查询请求消息，然后从消息中获取该属性。该属性具有请求中使用的 HTTP 动词。

# asp.net-mvc-3 - 如果提交按钮被禁用，则不会触发 HttpPost 方法

> ID：10998619
> 
> 赞同：0
> 
> 时间：2012-06-12T14:20:32.157
> 
> 标签：asp.net-mvc-3

我的看法如下：DemoView.cshtml

```
@model Mvc3Razor.Models.UserModel
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>
    Create</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>UserModel</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.UserName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.UserName)
            @Html.ValidationMessageFor(model => model.UserName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.City)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.City)
            @Html.ValidationMessageFor(model => model.City)
        </div>
        <p>
            <input type="submit" value="Create" /></p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
<script type="text/javascript">
    $(function () {
        $('input[type="submit"]').click(function () {
            $(this).attr('disabled', 'disabled');
        });
    });
</script> 
```

还有一个控制器：HomeController.cs

```
[HttpPost]
        public ViewResult Create(UserModel um)
        {
            if (!TryUpdateModel(um))
            {
                ViewBag.updateError = "Create Failure";
                return View(um);
            }

            _usrs.Create(um);
            return View("Details", um);

        } 
```

为了防止多次单击按钮，我试图在用户单击“创建”按钮后禁用该按钮，但是一旦“创建”按钮被禁用，它就不会触发 HttpPost 方法。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:26:32.293

尝试在提交表单时禁用按钮，而不是在单击提交按钮时禁用：

```
$("form").submit(function() {
    $(this).attr("disabled", "disabled");
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:47:25.810

我建议在成功发布后将用户重定向回索引页面。你想使用[PRG 模式](http://www.eworldui.net/blog/post/2008/05/ASPNET-MVC---Using-Post2c-Redirect2c-Get-Pattern.aspx)

> [发布、重定向、获取 (PRG) 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)，其中“帮助避免重复的表单提交并允许 Web 应用程序通过浏览器书签和重新加载按钮更直观地表现”

```
usrs.Create(um);
//Redirect to Index Page here 
```

有关更多详细信息，请参阅此[SO 问题](https://stackoverflow.com/questions/7940939/mvc3-model-validation-best-practice-redirect-after-post-state-change)

# python - 在 python matplotlib 中旋转轴文本

> ID：10998621
> 
> 赞同：431
> 
> 时间：2012-06-12T14:20:34.230
> 
> 标签：python, matplotlib

我不知道如何在 X 轴上旋转文本。它是一个时间戳，因此随着样本数量的增加，它们会越来越近，直到它们重叠。我想将文本旋转 90 度，以便样本靠得更近，它们不会重叠。

下面是我所拥有的，除了我无法弄清楚如何旋转 X 轴文本外，它工作正常。

```
import sys

import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import datetime

font = {'family' : 'normal',
        'weight' : 'bold',
        'size'   : 8}

matplotlib.rc('font', **font)

values = open('stats.csv', 'r').readlines()

time = [datetime.datetime.fromtimestamp(float(i.split(',')[0].strip())) for i in values[1:]]
delay = [float(i.split(',')[1].strip()) for i in values[1:]]

plt.plot(time, delay)
plt.grid(b='on')

plt.savefig('test.png') 
```

* * *

## 回答 #1

> 赞同：700
> 
> 时间：2016-06-08T16:36:15.803

这对我有用：

```
plt.xticks(rotation=90) 
```

* * *

## 回答 #2

> 赞同：228
> 
> 时间：2019-05-14T22:59:20.060

这里有许多“正确”的答案，但我会再添加一个，因为我认为一些细节被遗漏了。OP 要求旋转 90 度，但我将更改为 45 度，因为当您使用不为零或 90 度的角度时，您也应该更改水平对齐方式；否则你的标签会偏离中心并且有点误导（我猜很多来这里的人都想将轴旋转到 90 以外的位置）。

## 最简单/最少的代码

### 选项1

```
plt.xticks(rotation=45, ha='right') 
```

如前所述，如果您宁愿采用面向对象的方法，这可能是不可取的。

### 选项 2

另一种快速方法（它适用于日期对象，但似乎适用于任何标签；但怀疑这是推荐的）：

```
fig.autofmt_xdate(rotation=45) 
```

`fig`你通常会从：

*   `fig = plt.gcf()`
*   `fig = plt.figure()`
*   `fig, ax = plt.subplots()`
*   `fig = ax.figure`

## 面向对象/直接处理`ax`

### 选项 3a

如果您有标签列表：

```
labels = ['One', 'Two', 'Three']
ax.set_xticklabels(labels, rotation=45, ha='right') 
```

### 选项 3b

如果要从当前图中获取标签列表：

```
# Unfortunately you need to draw your figure first to assign the labels,
# otherwise get_xticklabels() will return empty strings.
plt.draw()
ax.set_xticklabels(ax.get_xticklabels(), rotation=45, ha='right') 
```

### 选项 4

与上面类似，但改为手动循环。

```
for label in ax.get_xticklabels():
  label.set_rotation(45)
  label.set_ha('right') 
```

### 选项 5

我们在这里仍然使用`pyplot`(as `plt`)，但它是面向对象的，因为我们正在更改特定`ax`对象的属性。

```
plt.setp(ax.get_xticklabels(), rotation=45, ha='right') 
```

### 选项 6

这个选项很简单，但是 AFAIK 你不能以这种方式设置标签水平对齐，所以如果你的角度不是 90，另一个选项可能会更好。

```
ax.tick_params(axis='x', labelrotation=45) 
```

**编辑：** 讨论了这个确切的“错误”，但尚未发布修复程序（截至`3.4.0`）： [https ://github.com/matplotlib/matplotlib/issues/13774](https://github.com/matplotlib/matplotlib/issues/13774)

* * *

## 回答 #3

> 赞同：201
> 
> 时间：2014-04-11T10:04:49.417

**简单的方法**

如此处[所述](http://matplotlib.org/1.3.1/users/recipes.html)`matplotlib.pyplot` `figure`，该类中有一个现有方法可以为您的身材自动旋转适当的日期。

您可以在绘制数据后调用它（即`ax.plot(dates,ydata)`：

```
fig.autofmt_xdate() 
```

如果您需要进一步格式化标签，请查看上面的链接。

**非日期时间对象**

根据*languitar*的评论，我为 non-datetime 建议的方法`xticks`在缩放等时不会正确更新。如果它不是`datetime`用作 x 轴数据的对象，您应该遵循[*Tommy*的回答](https://stackoverflow.com/a/32478701/943773)：

```
for tick in ax.get_xticklabels():
    tick.set_rotation(45) 
```

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2012-06-12T14:34:35.537

试试 pyplot.setp。我认为你可以这样做：

```
x = range(len(time))
plt.xticks(x,  time)
locs, labels = plt.xticks()
plt.setp(labels, rotation=90)
plt.plot(x, delay) 
```

* * *

## 回答 #5

> 赞同：57
> 
> 时间：2017-09-01T09:38:23.920

来自

```
plt.xticks(rotation=90) 
```

这也是可能的：

```
plt.xticks(rotation='vertical') 
```

* * *

## 回答 #6

> 赞同：52
> 
> 时间：2012-06-12T14:48:56.823

我想出了一个类似的例子。再一次，轮换关键字是……嗯，它是关键。

```
from pylab import *
fig = figure()
ax = fig.add_subplot(111)
ax.bar( [0,1,2], [1,3,5] )
ax.set_xticks( [ 0.5, 1.5, 2.5 ] )
ax.set_xticklabels( ['tom','dick','harry'], rotation=45 ) ; 
```

* * *

## 回答 #7

> 赞同：43
> 
> 时间：2019-01-24T18:23:26.520

如果要在轴对象上应用旋转，最简单的方法是使用`tick_params`. 例如。

```
ax.tick_params(axis='x', labelrotation=90) 
```

Matplotlib 文档参考[这里](https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.tick_params.html)。

这在您有一个由`plt.subplots`.`set_xticks`

* * *

## 回答 #8

> 赞同：36
> 
> 时间：2018-03-20T03:09:05.353

如果使用`plt`：

```
plt.xticks(rotation=90) 
```

如果使用 pandas 或 seaborn 进行绘图，假设`ax`作为绘图的轴：

```
ax.set_xticklabels(ax.get_xticklabels(), rotation=90) 
```

执行上述操作的另一种方法：

```
for tick in ax.get_xticklabels():
    tick.set_rotation(45) 
```

* * *

## 回答 #9

> 赞同：32
> 
> 时间：2015-09-09T11:45:41.137

我的回答受到 cjohnson318 回答的启发，但我不想提供硬编码的标签列表；我想旋转现有的标签：

```
for tick in ax.get_xticklabels():
    tick.set_rotation(45) 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2020-05-08T09:03:24.770

最简单的解决方案是使用：

```
plt.xticks(rotation=XX) 
```

但是也

```
# Tweak spacing to prevent clipping of tick-labels
plt.subplots_adjust(bottom=X.XX) 
```

例如，对于我使用 rotation=45 和 bottom=0.20 的日期，但您可以对您的数据进行一些测试

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2016-11-23T17:15:37.110

```
import pylab as pl
pl.xticks(rotation = 90) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-05-23T23:00:21.900

这将取决于你在绘制什么。

```
import matplotlib.pyplot as plt

 x=['long_text_for_a_label_a',
    'long_text_for_a_label_b',
    'long_text_for_a_label_c']
y=[1,2,3]
myplot = plt.plot(x,y)
for item in myplot.axes.get_xticklabels():
    item.set_rotation(90) 
```

对于为您提供 Axes 对象的 pandas 和 seaborn：

```
df = pd.DataFrame(x,y)
#pandas
myplot = df.plot.bar()
#seaborn 
myplotsns =sns.barplot(y='0',  x=df.index, data=df)
# you can get xticklabels without .axes cause the object are already a 
# isntance of it
for item in myplot.get_xticklabels():
    item.set_rotation(90) 
```

如果您需要旋转标签，您可能还需要更改字体大小，您可以使用它`font_scale=1.0`来执行此操作。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-07-10T11:37:23.080

将 x 轴标签旋转 90 度

```
for tick in ax.get_xticklabels():
    tick.set_rotation(45) 
```

# java - 在 JAVA 中读取列表时可以使用 .contains(BigDecimal.ZERO) 吗？

> ID：10998624
> 
> 赞同：5
> 
> 时间：2012-06-12T14:20:55.190
> 
> 标签：java, contains, bigdecimal

在 JAVA 中读取列表时我们可以使用 .contains(BigDecimal.ZERO) 吗？

我在尝试：

```
 if (selectPriceList.contains(BigDecimal.ZERO)) {
        return true;
    }
    return false; 
```

但它总是返回 false。

这似乎有效，但需要更正吗？

```
 BigDecimal zeroDollarValue = new BigDecimal("0.0000");
    if (selectPriceList.contains(zeroDollarValue)) {
        return true;
    }
    return false; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T14:27:12.653

出现此问题的原因是`scale`，小数点右侧的位数 of`BigDecimal.ZERO`设置为 0，而`scale`of设置`zeroDollarValue`为 4。

equals 方法`BigDecimal`比较比例和值 - 如果两者不同，则返回 false。

您可能可以使用

```
return selectPriceList.contains(BigDecimal.ZERO.setScale(4)); 
```

假设您所有的价格都精确到小数点后四位。如果没有，您可能必须使用

```
for(BigDecimal bd : selectPriceList) {
    if(bd.compareTo(BigDecimal.ZERO) == 0) {
        return true;
    }
}
return false; 
```

有关详细信息，请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)。

# c++ - 使用 BNF 语法提取信息

> ID：10998626
> 
> 赞同：7
> 
> 时间：2012-06-12T14:20:57.057
> 
> 标签：c++, parsing, bnf, information-extraction

我想从正文中提取信息并能够查询它。

该文本正文的结构将由 BNF 语法（或变体）指定，要提取的信息将在运行时指定（此时查询的语法无关紧要）。

所以要求很简单，真的：

*   接收一些结构化的正文
*   使用语法以可利用的形式加载它来解析它
*   运行查询以选择其中的某些部分

举个例子，假设我们有这样的语法（定制的 BNF 格式）：

```
<digit> ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
<id> ::= 15 * digit

<hex> ::= 10 * (<digit> | a | b | c | d | e | f)

<anything> ::= <digit> | .... (all characters)

<match> ::= <id> (" " <hex>)*

<nomatch> ::= "." <anything>*

<line> ::= (<match> | <nomatch> | "") [<CR>] <LF>

<text> ::= <line>+ 
```

此类文本将符合的内容：

```
012345678901234
012345678901234 abcdef0123

Nor the previous line nor this one would match 
```

然后我想列出规则中出现的所有标签，例如使用类似 XPath 的语法：

```
match//id 
```

这将返回一个列表。

* * *

这听起来相对容易，除了我有两个很大的限制：

*   BNF 语法应在运行时读取（从类似字符串/向量的结构）
*   查询也将在运行时读取

一些精度：

*   语法预计不会经常更改，因此生成内存结构的“编译”步骤是可以接受的（并且可能是实现良好速度所必需的）
*   速度至关重要，即时收集所需部分的奖励积分
*   有可能通过回调消除歧义的奖励积分（例如，有时必要的消除歧义信息可能需要数据库访问）
*   多部分语法的加分（有利于语法元素的模块化和重用）

例如，我知道 lex/yacc 和 flex/bison，但是它们似乎只创建要编译的 C/C++ 代码，这不是我所关心的。

> 您是否知道一个强大的库（最好是免费和开源的），它可以将 BNF 语法“即时”转换为解析器，并使用该解析器从文本体中生成结构化的内存输出？

*编辑：*我对替代品持开放态度。目前的想法是，也许正则表达式可以允许这种提取，但是考虑到所涉及的语法的复杂性，这可能会很快变得丑陋，因此维护正则表达式将是一项非常可怕的任务。此外，通过分离语法和提取，我希望能够针对不同的提取需求重用相同的语法，而不是每次都有稍微不同的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:05:03.240

我有一个专有的解决方案，可以将语法源转换为内存表示。结果是一个纯数据结构。任何代码都可以使用它。我也有实际实现解析器的 C++ 类。规则处理程序被实现为虚拟方法。

我们的解决方案与 YACC/Bison 的主要区别在于不生成 C/C++ 代码。这意味着可以在不重新编译应用程序的情况下重新加载语法。语法可以用在规则处理程序代码中使用的应用程序 ID 进行注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T20:26:50.493

GOLD 解析器系统生成一个 LALR 解析表，该表在运行时显然已加载 AFAIK。我相信它有一个 C++“解析”引擎，所以应该很容易集成。

你会阅读你的语法，派生一个子进程来让 GOLD 解析器生成器生成表，然后调用你的有线 GOLD 解析器来加载和解析。

我不知道您如何将*操作*附加到您可能想要做的减少操作。我对 GOLD 没有具体的经验。祝你“黄金”好运。

# vb.net - 使用 vb.net 将代码中的自定义控件文本全球化

> ID：10998638
> 
> 赞同：1
> 
> 时间：2012-06-12T14:21:24.177
> 
> 标签：vb.net, globalization

我有一个 Web 应用程序，它使用从 sql server 2005 使用 ResourceProviderFactory 传递的全球化值。我可以使用 <%$ Resources: "Resourcekey" %> 全球化 UI 中的标签但是，我想知道如何全球化我的 vb.aspx 页面后面的代码中可用的动态/自定义控件？

请帮帮我..提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:52:10.437

我们必须使用 GetGlobalResourcesObject(Class, ResourceKey) 来执行此操作。例如，lblHello.Text = GetGlobalReourceObject("GlobalKey", "Hello").ToString()

# c - 是否可以将 struct 转换为另一个？

> ID：10998639
> 
> 赞同：14
> 
> 时间：2012-06-12T14:21:27.843
> 
> 标签：c, sockets, casting, struct

任何人都可以描述`(struct sockaddr *)&server`这里的工作原理吗？是否可以将更大的结构转换为更小的结构？

请参阅这些结构：

```
// IPv4 AF_INET sockets:
struct sockaddr_in {
    short            sin_family;   // e.g. AF_INET, AF_INET6
    unsigned short   sin_port;     // e.g. htons(3490)
    struct in_addr   sin_addr;     // see struct in_addr, below
    char             sin_zero[8];  // zero this if you want to
};

struct in_addr {
    unsigned long s_addr;          // load with inet_pton()
};

struct sockaddr {
    unsigned short    sa_family;    // address family, AF_xxx
    char              sa_data[14];  // 14 bytes of protocol address
}; 
```

这是主程序：

```
int main(int argc , char *argv[])
 {
        int socket_desc;
        struct sockaddr_in server;

    //Create socket
    socket_desc = socket(AF_INET , SOCK_STREAM , 0);
    if (socket_desc == -1)
    {
        printf("Could not create socket");
    }

    server.sin_addr.s_addr = inet_addr("74.125.235.20");
    server.sin_family = AF_INET;
    server.sin_port = htons( 80 );

    //Connect to remote server
    if (connect(socket_desc , (struct sockaddr *)&server , sizeof(server)) < 0)
    {
        puts("connect error");
        return 1;
    }

    puts("Connected");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T14:23:39.787

这被称为[类型双关语](http://en.wikipedia.org/wiki/Type_punning)。在这里，两个结构的大小相同，因此不存在结构大小的问题。尽管您几乎可以将任何东西转换为任何东西，但使用结构进行操作很容易出错。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T14:24:42.730

这是 C 的“继承”形式（注意引号）。这是有效的，因为 C 不关心地址中的底层数据，只关心你表示它的内容。

该函数通过使用 sa_family 字段确定它实际上是什么结构，并将其转换为`sockaddr_in`函数内部的正确结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T14:24:35.017

您可以将 sockaddr_in 转换为 sockaddr，但通常不能将任何结构转换为任何其他结构并假设事情会正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T14:25:32.143

在 C 中，可以将任何东西强制转换为任何东西。您甚至可以省略对 (struct sockaddr*) 的强制转换，并且可能只会收到编译器警告。

# c# - 模块通信在 DNN 中不起作用

> ID：10998650
> 
> 赞同：1
> 
> 时间：2012-06-12T14:21:59.027
> 
> 标签：c#, .net, dotnetnuke

我正在使用 DNN6，我创建了两个模块并尝试使用模块通信器在它们之间进行连接，这是我的代码：

```
 #region IntermoduleCommunication
ModuleCommunicationEventArgs oArgs = new ModuleCommunicationEventArgs();
oArgs.Value = Session["ShoppingCart"];
if (ModuleCommunication != null)
 ModuleCommunication(this, oArgs);
#endregion 
```

但我在 ModuleCommunication 变量中得到“空”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:14:00.467

您是否将模块包装在 DNN 清单中的更新面板中（启用了支持部分渲染选项）？

如果我没记错的话，IMC 将无法通过 UpdatePanels 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:09:13.230

无论您提供什么代码，它都应该可以工作。为了获得帮助，您需要为两者`IModuleCommunicator`和`IModuleListener`实现提供代码。但是您可以[在此处查看示例实现](http://kemmis.info/blog/archive/2008/02/22/dotnetnuke-inter-module-communication-or-how-your-modules-can-get-their.aspx)。如果您需要更多帮助，请告诉我。

此外，如果您没有使用最新版本的 dnn，请尝试通过创建最新的 dnn 实例来测试它。如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-28T15:34:32.150

要使其正常工作，您需要实现 IModuleCommunicator 接口。如下图右击IModuleCommunicator，解压接口。

```
public partial class MyClass: PortalModuleBase, IModuleCommunicator 
```

提取后将生成以下内容

```
 public event ModuleCommunicationEventHandler ModuleCommunication; 
```

我从按钮单击事件中调用它

```
protected void btn1_Click(Object sender, EventArgs e)
        {
    if (ModuleCommunication == null) return;

                ModuleCommunicationEventArgs args = new ModuleCommunicationEventArgs();
                args.Sender = this.GetType().ToString(); ;
                args.Target = "MyTarget";

} 
```

将整个事情包装在一个 try catch 块中以捕获异常......希望这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T18:22:02.287

这里的答案很简单，你已经忘记了事件是如何工作的，它们就像任何其他对象一样，你必须实例化它们。又名。

```
public event ModuleCommunicationEventHandler ModuleCommunication = new ModuleCommunicationEventHandler(SomeStaticMethodThatWillBeCalledByDefault); 
```

# jsf - 如何在javascript中检索复合组件中的元素？

> ID：10998651
> 
> 赞同：1
> 
> 时间：2012-06-12T14:21:59.707
> 
> 标签：jsf, composite-component

我希望能够在 javascript 中访问复合组件中的元素。由于页面上可能有该组件的多个实例。如何访问该组件的特定实例中的某些特定元素？

```
<ui:component
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui">

    <cc:implementation> 
        <script type='text/javascript'>
            function getAddedTagsInputField(){
                return ...;
            }             
        </script>        
        ...
        ...        
        ...
        <h:inputHidden id="tagsToAdd_in" /> 
    </cc:implementation>

</ui:component> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:23:57.230

只需让 JSF 动态打印元素的客户端 ID。您可以使用它`#{cc.clientId}`来获取组合本身的客户端 ID，然后将 JSF 组件的 ID 附加到它上面。

```
var hiddenElement = document.getElementById("#{cc.clientId}:tagsToAdd_in"); 
```

# bamboo - 将快照从 Bamboo 部署到 Artifactory 时遇到问题

> ID：10998653
> 
> 赞同：4
> 
> 时间：2012-06-12T14:22:12.013
> 
> 标签：bamboo, artifactory

我想将快照构建从 Bamboo 部署到 Artifactory。我的存储库的`Handle Snapshots`选项被选中，它`Maven Snapshot Version Behavior`被设置为`Unique`. 存储库的布局是`gradle-default`.

我的目标是制定一个在类似于以下位置的位置部署工件的构建计划：

```
repo-local:com.company/project/1.0-SNAPSHOT/project-1.0-20120612.101600.txt 
```

在 Bamboo 中，我有一个`Artifactory Generic Deploy Task`, 为该`Edit Published Artifacts`字段配置了以下内容：

```
project-1.0-SNAPSHOT.txt=>com.company/project/1.0-SNAPSHOT 
```

但是 Artifactory 拒绝了我的构建工件，说`The repository 'repo-local' rejected the artifact 'repo-local:com.company/project/1.0-SNAPSHOT/project-1.0-SNAPSHOT.txt' due to its snapshot/release handling policy.`

如何让 Artifactory 接受工件并自动替换`SNAPSHOT`为文件名中的时间戳？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T18:17:43.550

您的问题很可能是您部署到的路径不被您选择的布局视为有效的集成修订版（gradle-default）。gradle-default 布局需要集成修订，例如：

```
org/module/1.0-12345678912345/module-1.0-12345678912345.jar 
```

即在基本修订后附加一个 14 位长的时间戳；虽然您的路径包含*SNAPSHOT*而不是 14 位长时间戳。

如果你想有这样的模式：

```
com.company/project/1.0-SNAPSHOT/project-1.0-20120612.101600.txt 
```

您必须自定义布局以接受*-SNAPSHOT*作为文件夹集成修订版，并修改您的工件以包含时间戳作为文件集成修订版。

我猜您的假设是 Artifactory 会将非唯一的集成修订版转换为唯一的集成修订版；仅当存储库设置为默认 Maven 布局并且工件遵循 Maven 布局时，Artifactory 才会执行此转换。

这是因为 Maven 实际上已经定义了集成修订的标准，而 Gradle 没有这样的标准；所以基本上，Gradle 修订版几乎可以是任何东西。

最重要的是，唯一和非唯一集成修订的概念在 Gradle 世界中并不真正存在，它实际上没有任何内置功能来支持这些特性；因此，当您在 Gradle 中看到 Mavenized 路径时，它基本上只是在模仿模式。

# javascript - InputRichText 显示输出

> ID：10998659
> 
> 赞同：1
> 
> 时间：2012-06-12T14:22:24.357
> 
> 标签：javascript, jsf-2, primefaces, facelets, icefaces

我希望 inputRichText 显示它之前输入的数据库的输出。原因是用户有机会在同一页面中输入和显示数据。输入数据后，他可以将其保存并在同一个 inputRichText 中检索。你能告诉我这是内置的还是我应该自定义js代码？如果是这样，如果有人有 js 脚本，我将不胜感激。也赞赏替代想法。现在我正在为 inputRichText 使用 Icefaces 组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:55:11.017

您可以使用该`value`属性将 inputRichText 的内容设置为字符串，也可以使用与 type 的支持 bean 组件绑定`InputRichText`，但以前是更优选的方式。

您可以重复使用用于持久化数据的相同对象，以便稍后显示内容。它将从数据库中获取值，并且将显示为文本。您必须在显示页面之前初始化字符串。

# javascript - JavaScript：获取传递函数的参数？

> ID：10998663
> 
> 赞同：1
> 
> 时间：2012-06-12T14:22:42.080
> 
> 标签：javascript, sqlite

正如标题所说，我想知道是否可以获取传递函数的参数。经过数小时的搜索和查看类似问题后，我仍然没有接近，所以我将附上一个简单的例子，而不是我正在研究的内容 - 因为我开始怀疑这是不可能的。

**预期的全局功能**

```
function getTransaction(anyMethod)
{   
    db.transaction
    (
        function(transaction) 
        {
            anyMethod(transaction);         
        },

        function errorCB(err) {
            redirectToLoginWithError("Error processing SQL");
        },

        function successCB() {
            ;//alert("Success!");
        }

    );  
} 
```

**要调用的函数**

```
function iWork(tx)
{
  tx.doSomething();
}

function iDontWork(tx, param1, param2)
{
  tx.doSomething(param1, param2);
} 
```

**实际通话**

```
// Works fine
getTransaction(iWork);
// The problem
getTransaction(iDontWork, value1, value2);

getTransaction(iDontWork2, value1, value2, ..., valueX); 
```

我尝试了几种不同的方法，但到目前为止都没有成功。最接近的（虽然不是非常）是

> getTransaction(function(){iDontWork(value1, value2)}));

这确实通过 getTransaction 调用了正确的函数，但没有正确传递参数：Params (value1, value2) 被保留，但事务对象丢失/未定义。我可以看到为什么会发生这种情况，但我看不到任何解决方案。总而言之，我也同意 getTransaction 应该被废弃并以某种方式重新编写。关键是要获得一种可以很好扩展的灵活方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:35:20.303

只需重构`getTransation`以获取一个函数和一组参数。将`transaction`变量添加到参数数组并使用以下命令调用函数[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：

```
function getTransaction(anyMethod, methodArgs) {
    var someFunction = anyMethod;
    // if no args provided, use an empty array
    methodArgs = methodArgs || [];

    db.transaction (
        function(transaction) {
            // transaction is always the first arg; prepend it to the arg list
            methodArgs.unshift(transaction);
            // call method with argument array
            anyMethod.apply(null, methodArgs);
        },

    // ...

    );
} 
```

只需将其用于：

```
doTransaction(iDontWork, [param1, param2]);
doTransaction(iWork); 
```

**编辑**：

正如@rambo coder 指出的那样，您可以通过切片使用常规参数（而不是参数数组）`arguments`：

```
function getTransaction(anyMethod) {
    var someFunction = anyMethod;

    db.transaction (
        function(transaction) { 
            var methodArgs = arguments.slice(1);
            methodArgs.unshift(transaction);
            anyMethod.apply(null, methodArgs);
        },

     ... 
```

通过这种方式，您可以直接向 提供参数`getTransaction`，就像您在示例 ( `doTransaction(iDontWork, param1, param2);`) 中所做的那样，而不是将它们放入数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:24:42.147

```
getTransaction(function (x) {
    iDontWork(x, value1, value2);
}); 
```

您`getTransaction`假设它的单个参数是一个带有一个参数的函数。您需要创建一个新函数，该函数接受一个参数，但还包括您想要的特定参数值（即`value1`和`value2`）。

* * *

以上使用匿名函数；您也可以使用命名函数来做到这一点：

```
function forwarder(x) {
    iDontWork(x, value1, value2);
}

getTransaction(forwarder); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:30:17.963

您可以通过创建部分函数来做到这一点：

```
function iDontWork(param1, param2){
    return function(tx) {
        tx.doSomething(param1, param2);
    }
} 
```

和：

```
getTransaction(iDontWork(value1, value2)); 
```

# .net-4.0 - 从自定义 IHttpHandler 调用 MvcHttpHandler.ExecuteRequest 时出错

> ID：10998664
> 
> 赞同：7
> 
> 时间：2012-06-12T14:22:50.003
> 
> 标签：.net-4.0, asp.net-mvc-4, ihttphandler

我有一个自定义的 IHttpHandler 调用 MvcHttpHandler ，如[本答案](https://stackoverflow.com/a/2968460/170190)中所述实现。

它在 asp.net MVC2 中运行良好，但是在我使用 IISExpress 7.5 将代码迁移到 MVC4 之后，我开始在线获取 InvalidOperationException：

```
httpHandler.ProcessRequest(HttpContext.Current); 
```

带有消息：

> 'HttpContext.SetSessionStateBehavior' 只能在引发 'HttpApplication.AcquireRequestState' 事件之前调用。

ASP.NET 开发服务器不会产生任何问题。

有谁知道这里发生了什么，以及如何解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T14:38:48.733

我相信您需要使用`httpContext.Server.TransferRequest`MVC 更新。

看到这个问题：[MVC3 Application Inside Webforms Application Routing is throwing a HttpContext.SetSessionStateBehavior Error in IIS7.5](https://stackoverflow.com/questions/10639822/mvc3-application-inside-webforms-application-routing-is-throwing-a-httpcontext-s)

# regex - 正则表达式匹配两个单独的短语

> ID：10998665
> 
> 赞同：10
> 
> 时间：2012-06-12T14:22:51.587
> 
> 标签：regex, string, whitespace, match, phrases

我正在寻找一个可以确保网页上同时显示两个短语的正则表达式。

我需要在网络上确保的两个短语是`Current QPS (last 10s, ignored 0)`和`Average Latency (last 100 queries)`

网页看起来像（查询时间会有所不同，但文字不会改变）：

```
Query Statistics

Average QPS 25.3673   
Average Latency 0.1002   
Average Latency (last 100 queries) 0.0834   # Match this one, ignore output-0,0834
Average Search Latency 0.0555   
Average Docsum Latency 0.0330   
Sampling period 3133524.9570   
Current QPS (last 10s, ignored 0) 24.8000  # Also match this one, ignore output 24.8000 
Peak QPS 170.9000   
Number of requests 79717858   
Number of queries 79489080 
```

我能够匹配网站上的每个短语，但不能同时匹配这两个短语。如何让我的工具忽略两个短语之间的内容？

PS我在这里没有用任何语言编程，正则表达式将被放入一个接受正则表达式的工具中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T14:26:15.570

如果您可以确定它们将按该顺序出现（如果有的话），那么这应该有效：

```
(<query 1>).*(<query 2>) 
```

例如

```
(Average Latency \(last \d+ queries\)).*(Current QPS \(last \d+s, ignored \d+\)) 
```

您可能需要检查`.`运算符是否与工具中的换行符匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:26:56.227

我的第一个建议是在你的正则表达式中以你希望它们出现的任何顺序简单地添加这两个模式

```
/($regex1.*?$regex2|$regex2.*?$regex1)/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:27:33.893

这可能取决于您使用的工具——特别是它如何处理多行。

你可以试试这个：

```
Average Latency \(last \d+ queries\)\s(.*\s)*Current QPS \(last \d+s, ignored \d+\)\s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T14:31:14.960

**这应该工作**

```
(?im)^(Average\s+Latency\s+\(last\s+100\s+queries\)|Current\s+QPS\s+\(last\s+10s,\s+ignored\s+0\)).+ 
```

# struts2 - 如何使用 Struts2 上传 Microsoft word .docx 和 .xlsx 文件

> ID：10998674
> 
> 赞同：1
> 
> 时间：2012-06-12T14:23:11.623
> 
> 标签：struts2

我们在我们的应用程序中使用 Struts2，我正在使用 struts2 上传功能进行文件上传。现在我的要求是，我们需要让用户上传到“.docx”和“.xlsx”。`allowedTypes`我在 strut.xml 中列出了“application/msword”和“application/vnd.ms-excel” 。这样，我们只能上传**“** .doc”和“.xls”文件，但**不能**上传“.docx”和“.xlsx”文件。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:26:14.517

来自[http://sanjaal.com/java/tag/microsoft-office-2010-mime-types/](http://sanjaal.com/java/tag/microsoft-office-2010-mime-types/)

以下是用于 MS Office 2010 文档文件格式的 mime 类型。

```
.docm: application/vnd.ms-word.document.macroEnabled.12
.docx: application/vnd.openxmlformats-officedocument.wordprocessingml.document
.dotm: application/vnd.ms-word.template.macroEnabled.12
.dotx: application/vnd.openxmlformats-officedocument.wordprocessingml.template
.potm: application/vnd.ms-powerpoint.template.macroEnabled.12
.potx: application/vnd.openxmlformats-officedocument.presentationml.template
.ppam: application/vnd.ms-powerpoint.addin.macroEnabled.12
.ppsm: application/vnd.ms-powerpoint.slideshow.macroEnabled.12
.ppsx: application/vnd.openxmlformats-officedocument.presentationml.slideshow
.pptm: application/vnd.ms-powerpoint.presentation.macroEnabled.12
.pptm: application/vnd.ms-powerpoint.presentation.macroEnabled.12
.pptx: application/vnd.openxmlformats-officedocument.presentationml.presentation
.xlam: application/vnd.ms-excel.addin.macroEnabled.12
.xlsb: application/vnd.ms-excel.sheet.binary.macroEnabled.12
.xlsb: application/vnd.ms-excel.sheet.binary.macroEnabled.12
.xlsm: application/vnd.ms-excel.sheet.macroEnabled.12
.xlsx: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
.xltm: application/vnd.ms-excel.template.macroEnabled.12
.xltx: application/vnd.openxmlformats-officedocument.spreadsheetml
.xps:  application/vnd.ms-xpsdocument 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:33:29.283

您可以通过在处理上传文件的操作中验证文件名来做到这一点。例如：

```
private File attachement;

...
public void validate() {
  if (attachement.getName().endsWith(".docx") || (attachement.getName().endsWith(".xlsx")))
    addActionError(...);
} 
```

# extjs - ExtJS 可调整大小的容器/面板在调整大小时不会从左侧和顶部（西 + 北）位置更改位置

> ID：10998680
> 
> 赞同：1
> 
> 时间：2012-06-12T14:23:49.040
> 
> 标签：extjs, resize, position, containers, resizable

如果我有这样的事情：

```
 var container = Ext.create('Ext.container.Container', {
    plain:true,
    width : 300,
    height: 300,
    html: 'Super',
    cls:'container',
    renderTo:Ext.getBody(),
    draggable:true,
    closable:false,
    resizable:{
        pinned:true,
        dynamic:true
    }
}).center(); 
```

容器是“可调整大小的”，但只会在右侧和底部（南、东）侧调整大小。如果我在左侧或顶部调整容器的大小，容器将不会移动，它位于同一位置。如何处理？如果我打开一个窗口，它也会改变位置。

例如：

```
 var win = Ext.create('Ext.window.Window', {
    plain:true,
    width : 300,
    height: 300,
    html: 'Super',
    cls:'container',
    renderTo:Ext.getBody(),
    draggable:true,
    closable:false,
    resizable:{
        pinned:true,
        dynamic:true
    }
}).center().show(); 
```

做这项工作。但我会用一个容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:40:27.340

我忘记输入“floating:true”，默认情况下窗口是 true，但不是容器。这是一个介绍此功能的链接：[http](http://www.sencha.com/learn/components/) ://www.sencha.com/learn/components/ “浮动组件”。然后容器按方面调整大小。

# gstreamer - 将我自己的 gstreamer 插件添加到 totem player 或 mplayer

> ID：10998687
> 
> 赞同：0
> 
> 时间：2012-06-12T14:24:03.690
> 
> 标签：gstreamer, mplayer, totem

我想将一些我已经实现的 gstreamer 插件添加到 totem player/mplayer 中，以便它可以使用这些插件来播放给定的文件。

请告诉我哪个播放器有简单的步骤来添加 gstreamer 插件，请告诉我如何向该播放器添加 gstreamer 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:07:50.077

mplayer 没有使用 gstreamer，你在那里不走运。对于图腾，你不需要做任何特别的事情。如果 gst-inspect 显示你的插件，totem 也可以使用它们。你能举一些关于你写什么样的插件的例子（什么格式的解码器或解复用器或协议源？）

# sql - 在 SQL 中存储 SQL

> ID：10998688
> 
> 赞同：1
> 
> 时间：2012-06-12T14:24:03.767
> 
> 标签：sql

我想在 SQL db 中存储 SQL 语句。您会为此推荐什么数据类型？

目前我正在使用 varchar(max)，可以吗？

我也有一个问题，可能是因为括号，它告诉我： `Incorrect syntax near the keyword 'NULL'.`

您有任何示例我应该如何执行查询以避免此类错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:27:02.253

最好在你的 sql 语句中使用`nvarchar(max)`和转义**`'`**替换为，**`''`**这样它不会对你造成任何问题

# php - 为什么存储在 MySQL 中的日期都是错误的？

> ID：10998692
> 
> 赞同：0
> 
> 时间：2012-06-12T14:24:09.790
> 
> 标签：php, mysql, html, database, forms, http-post

我正在构建一个 PHP 到 MySQL 网页，直到现在我才注意到它。我从表单字段中发布到 PHP 脚本的日期被发送到 MySQL 表进行存储。即使在表单中的日期字段中正确显示并且验证了 POST 日期值是准确的，它也不会正确地进入我的 MySQL 表。出于某种奇怪的原因，年份是 2006 年而不是 2012 年。但是，时间是正确的。

这是我的表单日期字段：

```
<input type=text id="date" name="srdate" value=<?php echo date("m/d/y"); ?> 
```

我的 MySQL 表中的日期列是 TYPE DATE。

我确实检查了存储在表中的日期，它的日期错误，不是 2012 年而是 2006 年。

任何的想法，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:26:31.677

MySQL 唯一可接受的日期输入格式是`YYYY-MM-DD HH:MM:SS`. 您在 PHP 中生成的日期看起来像（今天）`06/12/12`MySQL 将尝试解析的日期，但看到的是`12th December, 2006`，而不是实际的 2012 年 6 月 12 日。

[另外，请注意，您的代码对SQL 注入攻击](http://bobby-tables.com)敞开了大门。阅读并了解如何防止这些，然后再使用此代码进一步。否则你的服务器会得到 pwn3d。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:26:17.917

您需要使用`yyyy-mm-dd`语法。

虽然我希望 MySQL 在尝试插入时抛出错误，`06/12/12`但显然将其解析为`2006-12-12`：

```
mysql> SELECT cast('06/12/12' as date);
+--------------------------+
| cast('06/12/12' as date) |
+--------------------------+
| 2006-12-12               |
+--------------------------+
1 row in set (0.00 sec)

mysql> SELECT cast('2012-06-12' as date);
+----------------------------+
| cast('2012-06-12' as date) |
+----------------------------+
| 2012-06-12                 |
+----------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T14:28:27.180

从[手册](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-types.html)：

尽管 MySQL 尝试以多种格式解释值，但日期部分必须始终按年-月-日顺序（例如，'98-09-04'）给出，而不是按月-日-年或日-月-其他地方常用的年份顺序（例如，'09-04-98'、'04-09-98'）。

# gpu - 特斯拉相对于 GeForce 的优势

> ID：10998693
> 
> 赞同：5
> 
> 时间：2012-06-12T14:24:12.903
> 
> 标签：gpu, gpgpu, nvidia, hpc, tesla

我已经阅读了一些我可以在互联网上找到的关于这两个系列卡片之间差异的信息，但我不禁觉得它们在某种程度上是广告。虽然最强大的 GeForce 价格约为 700 美元，但特斯拉的起价约为 2500 美元，相差很大。

虽然列出的最大优势之间的 ECC 内存很有趣，但我怀疑它是否解释了这种差异。第二个最突出的事情是双精度数字的性能要好得多，但我将主要关注整数运算，所以这并不重要。顶级 GeForce 卡也有很多内存。虽然两个系列都使用 GDDR5，但 GeForce 显存带宽甚至高于特斯拉。

有没有人有客观比较这两个系列的个人经验？因为我认为特斯拉的大部分成本与高级工具和支持有关，而不是与它们的性能有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:26:52.767

这个答案可能已经过时了，因为我在 GPGPU 上工作已经一两年了。然而，当 Tesla 首次发布时，它们是唯一原生支持所有操作的全双精度计算的卡。而 GeForce 卡枚举了许多双精度计算。

对于科学计算，您会发现 Cuda API 可以使用双精度变量的 GeForce 很好地编译，但您返回的结果实际上会具有较低的精度。

希望这有帮助，

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T01:40:14.130

NVIDIA 官方对这个问题的回答在[这里](http://www.nvidia.com/object/why-choose-tesla.html)

# security - 如果 Magento 中的 local.xml 可以公开访问，会有哪些安全问题？

> ID：10998697
> 
> 赞同：2
> 
> 时间：2012-06-12T14:24:35.870
> 
> 标签：security, magento

我对 Magento 知之甚少，也没有自己建立相关网站，但我发现客户网站的 local.xml 文件可以公开访问 - [http://domain.com/app/etc/local.xml](http://domain.com/app/etc/local.xml)包含用户名和密码。我假设这个文件不应该公开访问，但 Magento 不会自动阻止访问（通过发送 403 标头）？这对安全有什么影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T14:28:41.810

世界将拥有您的数据库连接信息，并且密钥就在那里，因此他们可以破坏您客户的所有安全信息。

Magento 阻止应用程序通过该目录中的 .htaccess 访问 etc。

```
Order deny,allow
Deny from all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:49:47.177

[如何将 local.xml 移动到 Web 根目录结构之外。](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_move_local.xml_outside_the_doc_root)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T15:54:14.000

除了数据库和加密密钥信息之外，它还可以包含有关缓存服务器的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-12T11:55:51.597

在标准的 Magento 安装中，正确配置为可公开访问 local.xml 文件不是安全威胁。

也就是说，如果与标准服务器配置发生任何偏差，并且以一种或另一种方式读取文件成为可能，那么您可能采取的所有其他安全措施都将变得绝对。

因此，强烈建议不要公开访问此文件，以防万一，如果不是其他的话。

# c# - Winforms 绑定到 ListBox

> ID：10998701
> 
> 赞同：2
> 
> 时间：2012-06-12T14:24:52.707
> 
> 标签：c#, winforms, binding

我有一个带有 ListBox 的 Windows 窗体。表格有这个方法

```
public void SetBinding(BindingList<string> _messages)
{
  BindingList<string> toBind = new BindingList<string>( _messages );
  lbMessages.DataSource = toBind;
} 
```

在其他地方，我有一个名为 Manager 的类，它具有此属性

```
public BindingList<string> Messages { get; private set; } 
```

以及它的构造函数中的这一行

```
Messages = new BindingList<string>(); 
```

最后，我有我的启动程序，它实例化表单和管理器，然后调用

```
form.SetBinding(manager.Messages); 
```

我还需要做什么才能使 Manager 中的语句像这样：

```
Messages.Add("blah blah blah..."); 
```

会导致在表单的 ListBox 中添加一行并立即显示？

我根本不必这样做。我只希望我的 Manager 类能够在其工作时发布到表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:51:09.787

我认为问题出`SetBinding`在您制作**新**绑定列表的方法上，这意味着您不再绑定到 Manager 对象中的列表。

尝试将当前的 BindingList 传递给数据源：

```
public void SetBinding(BindingList<string> messages)
{
  // BindingList<string> toBind = new BindingList<string>(messages);
  lbMessages.DataSource = messages;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:09:42.787

添加一个新的 Winforms 项目。删除一个列表框。原谅设计。只是想表明它可以通过使用 BindingSource 和 BindingList 组合来实现您想要实现的效果。

> 使用**BindingSource**是这里的关键

**经理班**

```
public class Manager
{
    /// <summary>
    /// BindingList<T> fires ListChanged event when a new item is added to the list. 
    /// Since BindingSource hooks on to the ListChanged event of BindingList<T> it also is
    /// “aware” of these changes and so the BindingSource fires the ListChanged event. 
    /// This will cause the new row to appear instantly in the List, DataGridView or make any
    /// controls listening to the BindingSource “aware” about this change.
    /// </summary>
    public  BindingList<string> Messages { get; set; }
    private BindingSource _bs;

    private Form1 _form;

    public Manager(Form1 form)
    { 
        // note that Manager initialised with a set of 3 values
        Messages = new BindingList<string> {"2", "3", "4"};

        // initialise the bindingsource with the List - THIS IS THE KEY  
        _bs = new BindingSource {DataSource = Messages};
        _form = form;
    }

    public void UpdateList()
    {
         // pass the BindingSource and NOT the LIST
        _form.SetBinding(_bs);
    }
} 
```

**Form1类**

```
 public Form1()
    {
        mgr = new Manager(this);
        InitializeComponent();

        mgr.UpdateList();
    }

    public void SetBinding(BindingSource _messages)
    {
        lbMessages.DataSource = _messages;

        // NOTE that message is added later & will instantly appear on ListBox
        mgr.Messages.Add("I am added later");
        mgr.Messages.Add("blah, blah, blah");
    } 
```

# html - UL 打破了 dvs 内的 html 滚动（使用 display: box 时）

> ID：10998702
> 
> 赞同：0
> 
> 时间：2012-06-12T14:24:53.730
> 
> 标签：html, css

当我将列表（ul）添加到使用 display:box 的 div 时，它会破坏滚动。它适用于“p”标签：

工作示例（调整浏览器窗口以查看滚动）：http: [//jsbin.com/ojeyuj](http://jsbin.com/ojeyuj)

非工作示例（ul-list）：http: [//jsbin.com/ojeyuj/2](http://jsbin.com/ojeyuj/2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:03:42.550

我插入

```
display: -webkit-box;
display: -moz-box;
display: -ms-box;
display: box;
-webkit-box-orient: vertical;
-moz-box-orient: vertical;
-ms-box-orient: vertical;
box-orient: vertical; 
```

在 #box_inner2 css 的顶部（在 flex 之前），它对我有用。不知道为什么它不适用于两者，但希望能解决您的问题。

我从来不知道有一个显示：盒子；知道一个我可以阅读它们的好地方吗？

# pdf - 如何从智能卡向 PDF 文件添加电子签名？

> ID：10998704
> 
> 赞同：1
> 
> 时间：2012-06-12T14:24:55.087
> 
> 标签：pdf, pdf-generation, itext, smartcard, cac

我有一个 Java EE 应用程序需要实现 PDF 文件的电子签名。用户需要能够单击链接，该链接将根据数据库中的数据生成 PDF 文件，并在浏览器中查看 PDF。然后，用户需要能够使用存储在其智能卡上的私钥“签署”文档（该智能卡插入到他们正在使用的 PC 上的智能卡读卡器中）。用户使用的是 Windows 7 和 JRE 1.6

我希望使用 iText 生成 PDF，但不清楚我将在客户端使用什么解决方案从智能卡中提取信息，然后应用该信息来签署 PDF 并将 PDF 显示为签名（显示用户的签名或更新文档以说明它已签名）。

有没有人这样做过并有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:58:36.100

1.  它无助于从智能卡读取证书，因为您需要私钥。
2.  您不应该（并且通常不能）从智能卡中读取私钥（这就是使用智能卡的原因）
3.  要访问智能卡，您需要连接原生 API 之一，如普通 PC/SC、PKCS#11 或 CSP。
4.  要从浏览器执行此操作，您需要 ActiveX 或 Applet。
5.  从头开始构建它是*非常*雄心勃勃的

一些关键信息是： - 什么阅读器 - 什么智能卡 - 什么浏览器 - 选择什么操作系统或开发解决方案

我们有一个使用小程序技术构建的商业产品，它*完全按照*您的要求（获取 PDF、智能卡接口、签名哈希、以 PDF 支持的任何形式插入签名、发布签名的 PDF）。如果你有兴趣，我会提供联系方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-21T21:25:51.063

使用 PDF 工作室。我的 CAC 阅读器 config.cfg 文件有问题，但在我删除“slot = 1”行后，它就像一个冠军一样工作。我的文件现在看起来像这样：

```
name = SunPKCS11
library = /usr/lib64/libcackey.so 
```

欲了解更多信息，请访问： [https ://www.qoppa.com/pdfstudio/](https://www.qoppa.com/pdfstudio/)

# asp.net-mvc - 使用 Ninject 从另一个项目加载局部视图

> ID：10998705
> 
> 赞同：1
> 
> 时间：2012-06-12T14:24:58.010
> 
> 标签：asp.net-mvc, user-controls, ninject

好的，所以我有一些我试图从另一个 MVC 项目加载的用户控件。我已将 UserControls 项目添加到 Map Route 参数中，因此它“应该”在那里。

我开始在两个项目中都使用 Ninject，但它返回时出现以下错误：

> 未找到部分视图“UserDetails”或没有视图引擎支持搜索的位置。

如果我从 userControls 项目中删除 Ninject 东西，它会加载正确的控制器方法，但由于需要 ninject 访问模型而失败。

有没有办法将 Ninject 保留在第二个项目中或在第二个项目中使用第一个项目的绑定？

**更新：**

我在 ASP.NET MVC 中有两个应用程序，它们是同一解决方案中的不同项目。我在两个项目中都使用了 Ninject。我正在尝试使用将一个项目的部分视图加载到另一个项目中

```
@{ Html.RenderAction("UserDetails", "UserDetails", ...} 
```

当我这样做并在 UserDetails 控制器的构造函数上放置一个断点时，它会被命中。构造函数有以下几行代码：

```
 _guestDetailsField = guestDetailsField;
 _guest = guest;
 _bookingSelection = bookingSelection; 
```

当我调试过去时，我得到一个“无可用源”页面，当我继续时，页面加载了上面给出的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:29:50.533

您不能跨应用程序共享视图。事实上你可以，但你必须编写一个自定义的[虚拟路径提供程序](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)，这可能是相当多的工作。例如，您可以查看[以下文章](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)，该文章说明了一个自定义提供程序，该提供程序允许将 Razor 视图嵌入到单独的程序集中并在多个 MVC 应用程序中重用它们。

# php - PHP curl post并返回第二页信息

> ID：10998713
> 
> 赞同：-2
> 
> 时间：2012-06-12T14:25:19.050
> 
> 标签：php, post, curl, loading

我不认为这是可以做到的，但对于任何有挑战的人来说，试试吧……

我创建了一个 PHP curl 脚本，它将变量发布到页面并返回源代码。

现在这里有点棘手......它发布的信息页面仅处理数据并显示加载屏幕，一旦处理数据，它就会进入他们的屏幕以显示结果。这是我想返回的第三页。有任何想法吗？

当前脚本：

```
extract($_POST);

//set POST variables
$url = 'http://check.domain.co.uk/loading.php';
$fields = array(
        'field1'=>urlencode($field1),
        'field1'=>urlencode($field2),
        'field1'=>urlencode($field2)
    );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

以下是第一个和第二个 url 的示例（不是真实的）：

[http://check.domain.co.uk/loading.php](http://check.domain.co.uk/loading.php)

[http://check.domain.co.uk/instantaudit.php](http://check.domain.co.uk/instantaudit.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:40:45.750

好吧，在过去（在 Google 发布公共 api 之前），开发人员通常会执行此类技巧来登录并从 Analytics 或 Adsense 检索信息。

您可以从旧的[PHP Adsense 类](http://code.google.com/p/php-adsense-account-library/source/browse/trunk/adsense.php?r=2#70)中获取灵感（看看他们如何反复使用 curl）。

基本上，**该解决方案非常难看**，并且在目标域更新其页面的 html 时可能会被破坏（因为您解析返回的 html 以获取链接）：

*   curl 包含所有参数的第一页
*   解析返回的内容提取下一个url（检查类`preg_match`中的调用`AdSense`）
*   curl 解析后的 url 以检索下一个数据
*   依此类推，直到你达到你想要的内容

我提醒你**，它在未来不可能是一个可靠的解决方案，**因为最终性依赖于一个外部来源，它可能会随着时间的推移而改变（并破坏你的过程）。

# c# - ASP.NET 无 Cookie 会话 URL 问题仅在移动 Safari 中

> ID：10998714
> 
> 赞同：7
> 
> 时间：2012-06-12T14:25:21.943
> 
> 标签：c#, asp.net, mobile, cookies, appharbor

我们托管在 AppHarbor 上，并使用他们的 memcacher 插件，如他们的文档中所述进行设置：

```
<sessionState cookieless="false" regenerateExpiredSessionId="true" mode="Custom"
          customProvider="MemcachedSessionProvider" xdt:Transform="Insert">
  <providers>
    <add name="MemcachedSessionProvider"
         type="MemcachedProviders.Session.SessionStateProvider,MemcachedProviders"
         dbType="none" />
  </providers>
</sessionState> 
```

我们看到的问题只能通过以下方式重现：

1.  在 iOS Safari（或 twitter iphone 应用程序的内置 webkit 浏览器）中通过 twitter 缩短 URL 到 [appfail.net：http://t.co/6tRXopEJ](http://t.co/6tRXopEJ)
2.  单击我们的“运行演示”按钮，然后使用我们的演示帐户自动登录用户。

此时服务器发出302重定向到一个无效的URL，例如： [http://appfail.net/(F(FckQ4UX0zD_WSxk_adpkk3YysHsYQS4TSVpljxmswyBqEAZ1q-YhW4KePrpYQfJ4KlLGaiyje_TbpeSARVyI8LioQ7Jp5EIc0Zm9u99IqRRkkoMh_wr-jrsrvje4J7KpUt1n87xEMzMeqHzpMz9ksm42IqNnf3F9B6GBwrnuA5EY_YsV0))/Applications](http://appfail.net/(F(FckQ4UX0zD_WSxk_adpkk3YysHsYQS4TSVpljxmswyBqEAZ1q-YhW4KePrpYQfJ4KlLGaiyje_TbpeSARVyI8LioQ7Jp5EIc0Zm9u99IqRRkkoMh_wr-jrsrvje4J7KpUt1n87xEMzMeqHzpMz9ksm42IqNnf3F9B6GBwrnuA5EY_YsV0))/Applications)

该 url 似乎包含一个 SessionID，其格式与 IIS 用于无 cookie 会话的格式相同。这也是有道理的，因为 IIS 可以配置为使用基于 UserAgent 的无会话 cookie - 因此它为什么只在移动 safari 中重现（尽管我不确定为什么它只发生在 t.co/ 重定向中，而不是什么时候发生直接加载页面）

奇怪的是——我们关闭了无 cookie 会话！正如您在上面的会话状态中看到的那样。我也尝试过设置 'cookieless="UseCookies"'... 不走运！

我添加了日志记录，甚至验证了系统在运行时配置为“UseCookies”。

所以，我想知道我们怎么可能只使用 RedirectToAction() 将用户重定向到无 cookie 的 URL？

我想知道这是否与自定义会话状态提供程序——MemcachedProvider 有关？还是更基本的东西？

谢谢山姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T16:29:25.643

这可能是由于错误的 ASP.NET 客户端能力检测，请检查这个问题：[Asp.Net Forms Authentication when using iPhone UIWebView](https://stackoverflow.com/questions/4158550/problem-with-asp-net-forms-authentication-when-using-iphone-uiwebview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T18:33:41.303

Microsoft[于 2011 年 9 月发布了一个修补程序，](http://support.microsoft.com/kb/2600088)它解决了我在 Windows 8 预览版中使用 IE10 时遇到的类似问题。

# python - 套接字线程在超时块中挂起

> ID：10998715
> 
> 赞同：1
> 
> 时间：2012-06-12T14:25:22.683
> 
> 标签：python, sockets, gevent

我正在尝试计算从给定套接字接收所有数据所需的时间，因此我使用“with Timeout(5, False)”等待 5 秒的数据，然后保存最后一次接收的时间。但是，当我提供多个线程时，当前的代码只会停滞不前。我想帮助弄清楚为什么它应该在超时时挂起。

```
#!/usr/bin/env python
import sys
import time
from gevent import socket, Timeout
from gevent.pool import Pool

def calc_wait(website):
    data = ''
    start = stop = time.time()
    sock_buffer = ''

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((website,80))
    s.send('HEAD / HTTP/1.1\n\n')

    with Timeout(5, False):
        while True:
            data = s.recv(1024)
            if data:
                sock_buffer += data
                stop = time.time()

    print ('Recieved {0} bytes in {1} seconds from {2}'
           .format(len(sock_buffer), stop-start, s.getpeername()))

    return 0

if __name__ == "__main__":

    targs = ['google.com', 'yahoo.com', 'bing.com',\
             'tide.com', 'monkey.com', 'python.com',\
             'a.com', 'b.com', 'c.com', 'd.com']

    pool = Pool(10)
    for t in targs:
        pool.spawn(calc_wait, t)
    pool.join() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:04:31.800

问题不在于套接字挂起，而是当套接字结束时您永远不会中断，从而创建了一个无限循环。这是修复它所需的代码：

```
with Timeout(5, False):
    while 1:
        data = s.recv(1024)
        if not data:
            break

        sock_buffer += data
        stop = time.time() 
```

编辑：一旦套接字完成它的连接，即使你正在调用它也不会产生 greenlet 线程`#recv`。因此，如果您希望超时能够触发，您需要手动屈服`gevent.sleep()`：

```
with Timeout(5, False):
    while True:
        data = s.recv(1024)
        if data:
            sock_buffer += data
            stop = time.time()

        gevent.sleep() 
```

来自 gevent 文档：“以 0 秒为单位调用 sleep 是表达合作收益的规范方式。”

# php - 尝试通过服务访问我的本地主机并收到 301 错误？

> ID：10998719
> 
> 赞同：-1
> 
> 时间：2012-06-12T14:25:35.110
> 
> 标签：php, json, web-services, localhost

![在此处输入图像描述](../Images/f990de67d3d1f1d31e6fa2c403095eaf.png)我试图访问我的本地主机，即 localhost/app 并试图在 json 中取回一些数据，这是 php 脚本

```
<?php

 header('Access-Control-Allow-Origin: *'); 

//test if a post request came

if(isset($_POST)) {

    //return a json request

    $contactDetails = array(
  "email" => "some@some.com",
  "twitter" => "@example",

);

echo json_encode($contactDetails);

 }

?> 
```

这个 php 文件位于 index.php

我试图使用 localhost/app 页面访问此页面，但我在 firebug 中收到 301 错误，我不知道为什么，任何帮助表示赞赏

**它可以在网络浏览器上运行，但当我尝试从其他地方请求信息时却不行**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:30:57.740

您正在尝试从外部（即实时）网站访问本地主机 URL？除非你给它一个公共 IP，否则该网站将无法访问你的本地主机，我假设你没有。

# google-maps-api-3 - 解决经度和纬度转换问题

> ID：10998720
> 
> 赞同：0
> 
> 时间：2012-06-12T14:25:35.993
> 
> 标签：google-maps-api-3, dynamics-crm-2011, dynamics-crm-online

我正在尝试使用以下代码根据 Microsoft Dynamics CRM 2011 Online 的地址返回经度和纬度。地址正常，但下面的代码不起作用。谁能帮我找出原因。

```
try
{
    var xHReq = new ActiveXObject("Msxml2.XMLHTTP");
    xHReq.Open("GET", "http://maps.google.com/maps/api/geocode/xml?sensor=false&address=" + address, false);
    xHReq.Send(null);

    var resultXml =xHReq.responseXML;
alert(resultXml);
    var addressComponents=resultXml.selectNodes("//GeocodeResponse/result/geometry/location");
    if (addressComponents != null && addressComponents.length > 0) 
    {
        var long = parseFloat(resultXml.selectSingleNode("//GeocodeResponse/result/geometry/location/lng").nodeTypedValue);
        var lat = parseFloat(resultXml.selectSingleNode("//GeocodeResponse/result/geometry/location/lat").nodeTypedValue);

        crmForm.all.address1_latitude.DataValue = lat;
        crmForm.all.address1_longitude.DataValue = long;
        alert(lat);

crmForm.all.address1_latitude.ForceSubmit = true;
        crmForm.all.address1_longitude.ForceSubmit = true;
        }

} 
```

我收到以下错误消息：权限被拒绝。

我开始怀疑我是否因为网站是 https:// 而遇到问题。

有没有其他人遇到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:24:07.587

如果您自己的代码尚未在该域中（*跨域限制*），则您不能使用 XMLHttp 访问域中的数据。由于您的代码不是从 google.com 提供的，因此您无法访问该域中的数据。

对于 Javascript，请使用 Mano 评论的 Javascript API 中的地理编码服务。本质上，它使用 JSON 并且不受这种方式的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T12:14:26.517

请转到网址，[http://rubenb.home.xs4all.nl/latitudelongitude/latlon.html](http://rubenb.home.xs4all.nl/latitudelongitude/latlon.html)

只需输入地址即可将地址转换为经度和纬度。只要您使用以下格式，您就可以输入世界上的任何地址：街道、城市、国家或街道、城市、州。甚至您可以找到属于门牌号码的经度和纬度。您可以将经度或纬度复制并粘贴到 GPS 或任何使用经度/纬度的程序，如“poi 编辑器”或“IGo poi explorer”。如果您想为您的导航工具创建一个 Poi 文件，这个站点非常有用。

该站点使用来自 Google 的地理编码脚本。地理编码是估计给定位置的纬度和经度的过程。

# javascript - JQuery 文档单击解除绑定删除所有子项单击事件

> ID：10998723
> 
> 赞同：2
> 
> 时间：2012-06-12T14:25:47.053
> 
> 标签：javascript, jquery, javascript-events, onclick

我使用 JQuery 的 live() 将点击事件添加到特定元素：

```
 $('#foo').live('click'); 
```

后来，我将 bind() 添加到文档中：

```
 $(document).bind('click'); 
```

单击文档后，我取消绑定文档单击

```
 $(document).unbind('click'); 
```

这导致了问题：我的#foo 元素不再具有单击事件，因为它是文档的子元素。如何删除文档的点击而保持#foo 元素不变？

这是演示：http: [//jsfiddle.net/zS2Mt/2/](http://jsfiddle.net/zS2Mt/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T14:28:59.017

您可以使用事件命名空间

[命名空间事件](http://docs.jquery.com/Namespaced_Events)

```
$(document).bind('click.documentEvent');

$(document).unbind('click.documentEvent'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:30:38.770

这是一种方法。您可以只有两个单击事件，并在单击文档时检查单击事件的目标，并验证它不是链接。我确信有更好的方法可以做到这一点，但它有效：

```
var clicked = "I am clicked. Click outside!";
var unclicked = "Click me now!";

$('#foo').click(function() {
   if($(this).html() == unclicked) {
       $(this).html(clicked);
   }      
});

$(document).click(function(e) {
   if(e.target != $('#foo')[0] && $('#foo').html() == clicked) {
       $('#foo').html(unclicked);
   }      
}); 
```

[http://jsfiddle.net/zS2Mt/3/](http://jsfiddle.net/zS2Mt/3/)

# git - 在外部 3-way diff 工具中查看已经提交的 Git 合并

> ID：10998728
> 
> 赞同：31
> 
> 时间：2012-06-12T14:26:14.680
> 
> 标签：git, merge, commit, difftool

有没有办法查看已经在 3-way diff 中提交的合并？

如果在 3 周前提交了分支之间的巨大合并，有什么方法可以在BeyondCompare3 等**外部差异工具中看到它的 3 路差异？**我正在寻找**合并提交中更改的文件**。如果我可以让它只显示冲突和手动更改的任何内容，而不是查看两个分支之间文件的全部差异，则奖励。

如果左侧有 <<<<< ===== >>>>> 冲突标记，而右侧是提交的结果，我不介意解决 2 路差异。

我尝试查看*diff-tree*、*diff-files*、*diff*、*difftool*、*show*等，但无法弄清楚。我知道 gitk 只会在合并提交中显示更改，但我不喜欢上下差异视图，当有大量更改时很难理解。

如果我能做类似的事情`git difftool --cc firstparent..secondparent..result`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T15:20:29.483

**更新的答案：**我下面脚本的原始版本是有缺陷的，`$conflicting_files`事实上它不仅包含真正有冲突的文件，还包含在两个父分支中更改的所有文件（但不一定有冲突）。此外，它没有使用基本原理中宣传的“配置的合并工具”，而是`diffuse`. 我已经在[当前版本的脚本](https://github.com/sschuberth/dev-scripts/blob/master/git/git-show-merge-resolution.sh)中解决了这两个问题。

**原始答案：** 假设我们有一个“master”分支，主要开发正在进行中，还有一个“topic”分支，它在 master 的某些（旧）状态之上添加了一些功能。通过说您只是在寻找合并提交中更改的文件，我假设您只对合并提交中引入“主”的更改“主题”感兴趣（包括任何冲突解决），而不是非自“主题”分支以来在“主”中完成的冲突更改。进一步假设“master”是合并提交的第一个父级，“topic”是第二个父级，这可以通过

```
git difftool <merge commit>^1 <merge commit> 
```

请注意，在这里使用 3-way diff 是没有意义的，因为我们正在查看**包含任何冲突解决**的状态。这也是 GitHub 为合并提交显示的内容，顺便说一下，请参阅我用于测试的[这个合并提交。](https://github.com/git/git/commit/8cde60210dd01f23d89d9eb8b6f08fb9ef3a11b8)

为了在 3-way diff 工具中只查看冲突文件及其分辨率，我想出了这个脚本

```
#!/bin/sh

if [ $# -ne 1 ]; then
    echo "Rationale : Show the conflict resolution of a given merge commit in the configured merge tool."
    echo "Usage : $(basename $0) <merge commit>"
    exit -1
fi

# Test e.g. with https://github.com/git/git/commit/8cde60210dd01f23d89d9eb8b6f08fb9ef3a11b8
our=$1^1
their=$1^2
base=$(git merge-base $our $their)

conflicting_files=$(git merge-tree $base $our $their | grep -A 3 "changed in both" | grep "base" | grep -Po "[^\s]+$")
for f in $conflicting_files; do
    diffuse -r $our -r $base -r $their $f
done 
```

我使用的是[Diffuse](http://diffuse.sourceforge.net/)而不是[Beyond Compare](http://scootersoftware.com/)，因为第一个可以直接处理 Git 提交而不是本地文件；根据您的喜好更改参数的顺序。要使用 BC，您可能需要进行临时结帐；我也在考虑重做合并，应用已知的分辨率，并运行任何`git mergetool`配置过的东西，但是这两个想法都需要更多的工作才能不弄乱你的工作树并正确地进行清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T01:48:35.443

我不知道如何在没有一些hackery的情况下在git中进行三向差异，但是对于双向差异我会使用[`meld`](http://meldmerge.org/). `meld`如果您签出项目的三个不同版本，按目录执行新的差异并选择“三向比较”选项，则能够进行三向比较。

首先安装融合

`sudo apt-get install meld`

然后将 meld 设置为 difftool

`git config --global diff.tool meld`

找到提交

`git log | more`

打开提交

`git difftool <old-version>..HEAD`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T22:32:00.773

像 sschuberth 一样，我编写了一个脚本来帮助我找到合并提交中的更改。它使用 vimdiff 一次处理一个文件来显示父级和合并提交之间的差异。

```
#! /usr/bin/env ruby

require 'pp'
require 'tmpdir'

merge = ARGV[0] || abort("I need a merge commit as the first argument")
file = ARGV[1] || abort("I need a path as the second argument")
cmd = "vimdiff"

commits = `git log -n 1 #{merge} --format="%H %P"`.split(' ')
abort "expected three commits" unless commits.size == 3
commits[0], commits[1] = commits[1], commits[0]
tmpdir = Dir.mktmpdir
commits.each do |commit|
  tfile = "#{tmpdir}/#{commit[0..10]}"

  puts "git show #{commit}:./#{file} > #{tfile}"
  `git show #{commit}:./#{file} > #{tfile}`
  cmd += " #{tfile}"
end
puts cmd
exec(cmd) 
```

它有点骇人听闻，但我发布它是因为它可以帮助某人。

# .net - .net System.MemberwiseClone 和联锁写入

> ID：10998730
> 
> 赞同：0
> 
> 时间：2012-06-12T14:26:17.053
> 
> 标签：.net, atomic, interlocked

执行值类型数组的 MemberwiseClone 时：

```
 var arr = new double[100]; 
```

如果使用其他线程上的互锁写入来修改这些双精度数，MemberwiseCloned 副本是否有任何损坏双精度数的风险？我不关心稍微陈旧的值，只是撕裂以及 interlocked 和 memberwiseclone 之间的交互（我猜这会转化为内存 blit 类型的操作？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:42:25.983

是的。在 32 位操作系统上，这甚至可以保证有撕裂的风险。在 64 位上，它是实现定义的。我不会轻易冒险，因为即使您测试它不会发生，那么您的测试也只能在您的特定 .NET 版本和特定硬件上进行。**你无法确定。**

**在 64 位上，您可以通过实现自己的克隆版本**（可能不会慢很多）可靠地防止撕裂。

# spring - 无法使用弹簧安全登录

> ID：10998734
> 
> 赞同：0
> 
> 时间：2012-06-12T14:26:29.157
> 
> 标签：spring, spring-mvc, spring-security

我正在尝试自定义在现有 spring mvc 应用程序中实现的 spring security 登录机制。这是来自 spring security xml 文件的条目

```
<security:form-login login-page="/login" default-target-url="/my-account" always-use-
default-target="false" authentication-failure-handler-ref="failureHandler" 
authentication-success-handler-ref="successHandler" /> 
```

这工作正常，因为当用户想要登录时，他/她被重定向到具有类似 URL 的登录页面

```
www.myapp.com/login 
```

根据新要求，我们必须实施一个全局登录面板，该面板将在整个应用程序中存在，用户可以从那里登录，同时在某些情况下，尝试访问安全区域的用户将被重定向到登录页面并在这种情况的 URL 可以像

```
www.myapp.com/login/ 
```

作为 Spring Security 的新手，我不确定我应该如何处理这个用例，如果我 在这方面将指针更改`login-page="/login"`为任何指针，真的会很有帮助`login-page="/*"`

**编辑**

我在我的 spring-security xml 文件中看到了以下条目

```
<bean id="mainAuthEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint"
        scope="tenant">
        <property name="loginFormUrl" value="/login" />
        <property name="forceHttps" value="true" />
        <property name="useForward" value="false" />
    </bean> 
```

现在它让我更加困惑，如果有的话，我需要改变的地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:54:50.487

从评论中，听起来您想要一个 iframe 或 ajax 身份验证方法。

这篇文章可能是您研究的一个很好的起点：

[http://java.dzone.com/articles/implementing-ajax](http://java.dzone.com/articles/implementing-ajax)

# iphone - 在 xcode 4.0（部署目标 4.0）中运行在 xcode 4.2（部署目标 5.0）中创建的项目

> ID：10998738
> 
> 赞同：0
> 
> 时间：2012-06-12T14:26:45.937
> 
> 标签：iphone, objective-c, ios, ios5, ios4

这是情况。我在 xcode 4.2 中创建了一个项目，部署目标设置为 5.0。但我想向后兼容我的代码直到 4.0。现在我在 xcode 4.2 中没有 4.2 或 4.0 的模拟器，所以我在 xcode 4.0 中运行我的代码。这里我有两个错误：

```
 1\. unknown "strong". I removed it by adding retain instead.
  2\. unknown "@" in project, so I added below code in main.h 

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
int retVal = UIApplicationMain(argc, argv, nil, nil);
[pool release];
return retVal; 
```

这是我们在ARC或iOS5之前的main.h中一般写的

现在我遇到的另一个问题是 main.h 被调用但 AppDelegate 没有被调用，即 aplicationDidFinishLaunching 从未被调用。然后我把上面的代码修改成这样

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass(AppDelegate.class));
[pool release];
return retVal; 
```

现在，我没有遇到任何问题，构建成功，并且在两个版本的 xcode 中都被编译。我只是想知道为什么会发生这种情况，我可以继续我的项目在 xcode 4.2 中使用上述主要定义，因为这对我来说似乎并不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:08:57.430

试试[这个](https://stackoverflow.com/questions/8755578/how-to-make-code-compatible-for-both-ios-5-and-ios-4-iphone)。那应该回答你的问题。

基本上你需要首先瞄准iOS4，它应该适用于iOS5。问题是当你首先开始使用 iOS5 时，因为 iOS4 不知道新功能。这可能看起来很痛苦，但考虑是否有必要支持 iOS4，我们现在有 iOS6，iOS5 在所有版本中占多数......

# matlab - 可以选择数据的绘图上的可缩放、可拖动的框

> ID：10998739
> 
> 赞同：8
> 
> 时间：2012-06-12T14:26:52.937
> 
> 标签：matlab, user-interface, matlab-figure, matlab-guide

这是设置：

我有一个数据的图形图，我试图找出是否可以尝试在图形上放置一个可以移动和改变宽度的框，并返回一些值，如曲线下的百分比和面积。它看起来像这样：

![例子](../Images/876e46abe2eecaea0890253e9a205ac9.png)

关于从哪里开始的任何建议？我的感觉是，与标准绘图相比，使用更多的 GUI 界面可能是可行的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T14:30:28.397

我会从`imrect`. 它是可拖动的，您可以为其添加回调。

*（直接取自 MATLAB 帮助）*

```
figure, imshow('cameraman.tif');
h = imrect(gca, [10 10 100 100]);
addNewPositionCallback(h, @(p) title(mat2str(p, 3)));
fcn = makeConstrainToRectFcn('imrect', get(gca,'XLim'), get(gca, 'YLim'));
setPositionConstraintFcn(h, fcn); 
```

更改为`addNewPositionCallback`适合您需要的内容。具体来说，从图像中获取所需的像素（通过使用位置），然后计算您喜欢的任何内容。

# c# - 如何从 SharePoint 的 TextBox 中列出列中的所有元素？

> ID：10998742
> 
> 赞同：1
> 
> 时间：2012-06-12T14:26:58.353
> 
> 标签：c#, list, sharepoint, collections, splistitem

我编写了这段代码，它只给了我列表中列的最后一个元素。如何获取 中的所有元素`TextBox`？

```
SPListItemCollection items = list.GetItems(myquery);

foreach (SPListItem item in items)
{
    if (item["Title"] != null)
    {
        TextBox1.Text = (string)item["Title"];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:01:45.483

您在每次迭代时都会覆盖文本框中的文本，因此您只会看到最后一个值...试试这个：

```
TextBox1.Text = TextBox1.Text + " " + (string)item["Title"]; 
```

# html - 按钮在 IE 中无法使用

> ID：10998744
> 
> 赞同：0
> 
> 时间：2012-06-12T14:27:04.080
> 
> 标签：html, internet-explorer, button, jsf-2, primefaces

在我的应用程序中，我有以下`<h:outputLink>`和的组合`<p:commandButton>`：

```
<h:outputLink target="_blank" value="theURL">
    <p:commandButton value="Click" type="button" />
</h:outputLink> 
```

上面的按钮在 Chrome 和 Firefox 中正常工作。但是，当我使用 IE 时，单击按钮时没有任何反应。

如果您能给我任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:32:28.173

生成的 HTML 标记在语法上毫无意义。你最终得到一个

```
<a><button></button></a> 
```

应该调用谁的动作？链接或按钮之一？

我建议只`<p:button>`使用`window.open()`.

```
<p:button value="Click" onclick="window.open('theURL');return false;" /> 
```

如果使用该链接是为了纯粹的 SEO 目的，那么我建议`<p:commandButton>`用它自己生成的标记替换为 a`<span>`而不是 as `<button>`。例如

```
<h:outputLink target="_blank" value="theURL">
    <span class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="button">
        <span class="ui-button-text">Click</span>
    </span>
</h:outputLink> 
```

# .net - 为什么我得到正方形而不是文本？

> ID：10998750
> 
> 赞同：7
> 
> 时间：2012-06-12T14:27:19.797
> 
> 标签：.net, wpf, fonts, font-family

我试图在我的 WPF 应用程序中安装和使用字体，但我得到的只是这样： ![在此处输入图像描述](../Images/8547013512b3566010fd4dd7a2b03876.png)

这是我尝试使用该字体的代码：

```
richtext1.FontFamily = "SH_Roq'a"; 
```

预期结果是：（来自 MS Word 的快照） ![在此处输入图像描述](../Images/7dbe48bf6b7b293ddc6fddd16cd7f198.png)

如果我尝试将字体文件添加到项目文件夹中，并将其用作资源，如下所示：

```
richtext1.FontFamily = "./#SH_Roq'a"; 
```

我不会得到方形结果，但是，我也不会有预期的字体！我得到的是 Tahoma 字体：

![在此处输入图像描述](../Images/ab516a58c109663c5a73dd379a654b15.png)

不是目标字体，请在[此处](http://ufonts.com/download/sh-roqa/81511.html)下载目标字体文件进行实验

任何帮助表示赞赏！

**编辑**

上面捕获的文本的纯文本是：

```
تفاح احمر 
```

所以对于那些使用字体的专家来说，他们可以尝试一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:25:19.180

字体有几个问题：

1.  它不是 Unicode 编码的：它使用平台 ID 3、编码 ID 0 的 cmap 子表，也称为“符号”表。在旧式 Windows 桌面应用程序之外，这些通常不能很好地工作。

2.  没有 OpenType 布局功能（GSUB、GPOS 等）对于正确塑造阿拉伯语/乌尔都语/波斯语写作（初始、中间、最终、孤立形式；lam-alef 连字等）至关重要。

3.  它使用一个非常非常旧的 OS/2 表（版本 0）。某些 Microsoft 技术至少需要版本 1。在该表的 fsSelection 字段中还设置了保留位以及许多其他可疑设置。

我不再看那里了。这种字体似乎是用非常古老的工具构建的，使用了过时的字体构建知识。它需要大量更新才能在现代环境中正常工作。

# java - 将 java 列表传递给 html 模板

> ID：10998758
> 
> 赞同：1
> 
> 时间：2012-06-12T14:28:08.363
> 
> 标签：java, html, playframework

我有一个 html 文件的打印导出，它从 Map 中导入，如下所示

```
Template t = TemplateLoader.load("Printing/acount.html");
Map<String, Object> map = new HashMap<String, Object>();
map.put("accountName ", e.accountName);
map.put("accountAmount ", acAmount);
    return t.render(map); 
```

并将参数加载到 html 文件中

```
<div>
     Account: <font size="3"><b>${ accountName }</b> ${accountAmount}</font> <br/> 
```

它的出口看起来像

账户 15884 5.000

如果我想在我的导出中有多个记录怎么办？

让我们说

账户 15885 2.000

账户 15886 4.000

账户 15887 3.000

第二种情况下的html和java代码应该如何传递未知数量的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:35:18.703

如果你有列表，你可以做

```
map.put("accounts", theAccountList); 
```

在模板（我假设是 FreeMarker）中，您可以：

```
<#list accounts as account>
 <div>Account: <font size="3"><b>${account.getName()}</b> ${account.getAmount()}</font> <br/></div>
</#list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:34:40.577

您现在正在创建一个和`Map`的值。您应该做的是添加一个对象列表，每个对象都包含和的值。`accountName``accountAmount``accountName``accountAmount`

它看起来像这样：

```
Map<String, Object> map = new HashMap<String, Object>();
List<Account> accounts = new ArrayList<Account>();
map.put("accounts", accounts);
return t.render(map); 
```

然后，在您的模板中，您可以遍历 in 中的项目`${ accounts }`（例如，for each `account`in ）并打印and`accounts`的每个值。`account.name``account.amount`

我不熟悉这些模板的确切语法，但方法应该遵循这些原则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:35:36.190

使用列表和 for 循环。查找 JSP 或 JSTL for 循环。

# image-processing - GIMP：从文件夹中的所有图像文件创建图像堆栈

> ID：10998761
> 
> 赞同：3
> 
> 时间：2012-06-12T14:28:26.443
> 
> 标签：image-processing, gimp, script-fu

我需要比较需要堆叠大量图像的分割算法的结果 - 例如原始图像和二进制图像。所以我想到了一个 GIMP 脚本，它采用目录的名称并将所有包含的图像文件放入图层中，以便可以在 GIMP 中打开和关闭它们以比较结果。如何使用 GIMP 实现这一目标？谢谢你的提示！

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:09:58.590

我刚刚意识到 gimp 2.8 中的命令“文件”>“作为图层打开”做了类似的工作！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T20:03:32.053

“没有脚本-fu”。但是 Python 适合您的需求。这是一个简单的脚本 - 核心逻辑应该是 4 行左右，因此我将在这里为您编写它：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from gimpfu import *
import os

def load_images_in_dir(image, drw, path):

    for filename in os.listdir(path):
        try:
            if filename.lower().split(".")[-1] in ("png", "jpg"):
                #import pdb as debug; debug.set_trace()
                image_id, layer_ids = pdb.gimp_file_load_layers(image,
                     os.path.join(path, filename))
                for id in layer_ids:
                    new_layer = gimp.Item.from_id(id)
                    pdb.gimp_image_add_layer(image, new_layer, 0)
        except Exception, error:
            print error

register(
        "open_images_in_dir",
        "Open all files in a directory",
        "Open all files in a directory",
        "Joao S. O. Bueno",
        "Joao S. O. Bueno",
        "2012\. Creative Commons Citation Needed license",
        "Open Images in Dir as Layers...",
        "*",
        [(PF_IMAGE, "image", "the image", None),
         (PF_DRAWABLE, "drw", "the drawable", None),
         (PF_DIRNAME,"path", "Directory to Open", "."),],
        [],
        load_images_in_dir,
        menu="<Image>/File/")

main() 
```

请注意，代码的第二部分只是注册函数的样板。确实 - 调用“gimp_file_load_layers”不能正常工作 - 因为它返回一个对象“id”列表，这些对象“id”不应该来自 Python - 但是对“Item.from_id”方法的调用允许绕过这个不便。不过，这仅在 gimp-2.8 中可用

要让它在 gimp 2.6 中工作，您将不得不求助于在新图像中打开文件，然后他们将图层复制到目标图像。

将上面的脚本复制到 GIMP 的插件目录（例如，在 *nix 下，~/.gimp-2.8/plug-ins - 或检查 GIMP 中的 edit->prerencers->folders 以获取插件文件夹） - 和将其标记为可执行文件。

# matlab - Matlab椭圆曲线RMP函数

> ID：10998764
> 
> 赞同：0
> 
> 时间：2012-06-12T14:28:40.390
> 
> 标签：matlab, elliptic-curve

```
function [X,Y,n] = PC(A,B,p)
% This function m-file finds and plots all the points that lie in E_p(A,B)
% These points are on the curve y^2 = x^3 + AX + b (mod p)
    RHS = zeros(3,1);
    LHS = zeros(3,1);
    X = zeros(2,1);
    Y = zeros(2,1);
    for i=0:1:(p-1)
        RHS(i+1) = (i)^3 + A*(i) + B;
        RHS(i+1) = rmp(RHS(i+1),p);
        LHS(i+1) = (i)^2;
        LHS(i+1) = rmp(LHS(i+1),p);

    end
    ii=1;
    for z=0:1:(p-1)
        I=find(RHS==z);
        J=find(LHS==z);
        q1 = isempty(I);
        q2 = isempty(J);
        if (q1) == 0
            if q2 == 0
                n=length(I);
                m=length(J);
                for h=1:1:n
                    for g=1:m
                        X(ii)=I(h)-1;
                        Y(ii)=J(g)-1;
                        ii=ii+1;
                    end
                end
            end
        end
    end
    n=length(X) + 1;
    %%%%%%%PLOTTING%%%%%%%%%%%
    h=plot(X,Y,'ko');
    set(h(1),'LineWidth',1.5)
    axis([0, (max(X)+1), 0,(max(Y)+1) ])
    xlabel('X','FontSize',15,'FontWeight','bold')
    ylabel('Y','FontSize',15,'FontWeight','bold')
    title(['The points in E_{',int2str(p),'}',int2str(A),',',int2str(B),')'],'FontSize',12,'FontWeight','bold') 
```

该代码将找到并绘制特定素数曲线上的所有点。该 m 文件将 A、B 和 p 作为其输入，并生成两个向量 X、Y，其中包含位于 y2 x3 + Ax + B (mod p) 上的所有点 (x, y)。

我只想知道**什么是 rmp 功能以及为什么使用它**。我试图在 matlab 文档中找到它，但我找不到它。

# javascript - 将点击事件“this”传递给另一个函数，这是正确的做法吗？

> ID：10998769
> 
> 赞同：1
> 
> 时间：2012-06-12T14:28:57.083
> 
> 标签：javascript, jquery

目前正在尝试维护一种对象方法，目前我想在点击处理程序被操作时调用一个切换方法。所以处理程序在init方法中，当我点击链接时，我调用toggle_pane（）传递点击'this'的链接，这听起来正确还是我应该做什么？欢迎大家咨询！

这是我正在处理的代码片段：

JS

```
init: function(){

            var _ = this,
                slides_li = _.els.slides.children();

            // Click handlers
            slides_li.on('click', function(e) {
               _.toggle_pane(this); 
            });

        },
        toggle_pane: function(li){

            var _ = this,
                slides_li = _.els.slides.children();

            if( !$(li).hasClass('active')) {
             console.log( 'dont have active' );   
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:33:07.270

是的，这是一种方法。虽然，一个普通的旧下划线并不是最好的变量名。我会推荐一些更清晰的东西，比如`var _this = this;`.

试着看看 jQuery 源代码本身，它做了一些杂耍`this`。

# ios - Xcode 4.3.2 应用测试

> ID：10998770
> 
> 赞同：-5
> 
> 时间：2012-06-12T14:28:56.910
> 
> 标签：ios, xcode

> **可能重复：**
> [在 iPhone 上测试应用程序而不向 Apple 支付 99 美元](https://stackoverflow.com/questions/4024704/test-app-on-iphone-without-paying-99-to-apple)

昨天我安装了 Xcode 4.3.2，我想在我的 iPod touch 上测试我的应用程序；）我应该怎么做才能在我的 iPod 上免费测试我的应用程序？（我付不起 99 美元）在此先感谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:19:23.507

要么您支付 99 美元并获得证书，以便在沙盒环境下将其安装到您的 iPod 上进行开发测试。或者您越狱您的 iPod 并按照[此处的步骤操作](https://stackoverflow.com/questions/246422/how-can-i-deploy-an-iphone-application-from-xcode-to-a-real-iphone-device)

# solr - 如何在 Solr 中处理关系数据

> ID：10998773
> 
> 赞同：5
> 
> 时间：2012-06-12T14:29:05.290
> 
> 标签：solr, search-engine, solrnet, faceted-search, facets

我们现在正计划推出具有多面目录导航的电子商务网站 Solr 搜索。

我们有一些复杂的产品数据模式及其动态的规范属性。

我们当然无法理解如何将这些数据映射到 Solr 中？我们是否需要有两个索引，一个用于产品索引，另一个用于与产品或单个模式映射的规范属性。

但是如何，任何例子都会很棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T20:18:01.973

目前您不能跨多个 solr 索引加入。Solr 4.0 中将会有[Join](http://wiki.apache.org/solr/Join)功能。但是，这将允许在单个索引中加入文档。

规范化的数据库模式必须在 Solr 中对其进行索引之前展平。这实际上是您将获得最大运行时性能提升的地方，因为数据库中的连接非常昂贵。

跨产品和规格复制某些列是可以的。如果您可以描述个人属性和基数，我可能会进一步发表意见。

我的背景是，我已经将一个高度规范化的数据库模式索引到 3 个 solr 索引中。我使用了基数测试，并搜索用例来缩小这种分裂。例如，我在一个索引中有客户协议，在另一个索引中有代理协议，在另一个索引中有客户和代理之间的关系。我得到了我能得到的最少的索引。一个服务层集成了三个索引。在此处创建单个索引会使维护变得过于庞大和复杂。

您可以尝试的其他方法之一是搜索 solr，并通过数据库搜索来丰富单个文档。这会带来一些成本，但如果您已经在 solr 搜索中解析了主键，那么这些查找将不会那么昂贵。

# c# - WCF 缓存列表错误

> ID：10998776
> 
> 赞同：1
> 
> 时间：2012-06-12T14:29:21.030
> 
> 标签：c#, asp.net, wcf, list

我正在尝试缓存从 WCF 中的 SQL Server 检索到的动态列表，到目前为止，检索过程工作正常，并且我已经对其进行了测试，并且完全没有问题，问题是当我尝试缓存时检索列表，发生错误，我无法找出其背后的原因。

这是我的方法：

```
public List<ErrorEntities> GetALL()
{
            List<ErrorEntities> res = null;
            if (HttpContext.Current.Cache["GetALL"] == null)
            {
                SqlCommand com = Global.GetCommand("select * from [BlockingList]");
                com.Connection.Open();
                SqlDataReader reader = com.ExecuteReader();
                res = Fill(reader);

                HttpContext.Current.Cache.Add("GetALL", res, null, DateTime.Now.Add(new TimeSpan(0, 0, 15)), Cache.NoSlidingExpiration, CacheItemPriority.Normal, null);

                com.Connection.Close();
                return res;
            }
            else
            {
                res = HttpRuntime.Cache["GetALL"] as List<ErrorEntities>;
                return res;
            }
} 
```

我尝试通过添加以下代码行来启用 web.config 文件上的缓存，但问题也没有解决：

```
<scriptResourceHandler enableCompression="true"    enableCaching="true" /> 
```

这是我在编译解决方案时遇到的错误：

> 由于内部错误，服务器无法处理请求。有关错误的更多信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为）以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志。
> 
> ```
> Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more 
> ```
> 
> 有关错误的信息以及它在代码中的来源。
> 
> ```
> Exception Details: System.ServiceModel.FaultException: The server was unable to process the request due to an internal error.  For more 
> ```
> 
> 有关错误的信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为）以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志。
> 
> ```
> Source Error: 
> 
> Line 113:        
> Line 114:        public ServiceReference1.ErrorEntities[] GetALL() {
> Line 115:            return base.Channel.GetALL();
> Line 116:        }
> Line 117: 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:28:59.597

我假设有问题的代码在 WCF 方法中被调用。

WCF 在其自己的上下文中工作，`HttpContext.Current`不应在那里使用。

`System.Web`Microsoft在 .NET 4.0 中添加了不依赖的新缓存。

`MemoryCache`在 WCF 中应该可以正常工作。

尝试使用此代码获取缓存对象：

```
ObjectCache cache = MemoryCache.Default; 
```

[http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)

我还建议对一次性资源使用`using`或阻止（在代码示例中）`try-finally``Connection`

# php - 缓存关于参数的 CakePHP 元素

> ID：10998777
> 
> 赞同：0
> 
> 时间：2012-06-12T14:29:22.767
> 
> 标签：php, cakephp, cakephp-2.0

我需要缓存 CakePHP 元素。但是我的元素因参数而异。 **myElement**接受一个名为**$type**的参数。
当**$type**改变我的元素的内容时。

我这样称呼我的元素： **echo $this->element('myElement', array('type' => 2), array('cache' => true));**
在这样的另一个页面中：
**echo $this->element('myElement', array('type' => 3), array('cache' => true));**

当我通过将调试模式增加到 2 来启用缓存时，这两个元素都会给我相同的输出。是否可以缓存一个元素的不同版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T21:08:13.653

```
echo $this->element('myElement', array('type' => 3), array('cache' => array('key' => 'my_element_type_3')); 
```

`'cache'`键可以采用`config`和的数组`key`。将 设置`key`为唯一名称（在名称中附加类型）应使其唯一。

如果元素没有太多共同点，则为每个元素设置不同的元素文件可能会更容易。`$this->element('myElementType3'); $this->element('myElementType2');`等等

# gps - WP7模拟器中的测试位置

> ID：10998778
> 
> 赞同：1
> 
> 时间：2012-06-12T14:29:24.943
> 
> 标签：gps, location, windows-phone-7.1

因此，我正在使用[本指南](http://msdn.microsoft.com/en-us/library/ff431782%28v=vs.92%29.aspx)，但在测试以确定它是否有效时运气为零。该代码的唯一变化是，我没有更改 TextBlock，而是设置了一个在函数外部声明的静态 GeoCoordinate 对象。

```
public static void PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        coord = e.Position.Location;
    } 
```

好吧，我将状态更改为显示一个带有 OK 按钮的 MessageBox，而不是显示在文本框中，并删除了按钮事件。

在 MainPage 渲染中，我有：

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        if (watcher == null)
        {
            watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
            watcher.MovementThreshold = 20;

            watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(StatusChanged);
            watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(PositionChanged);
        }
        watcher.Start();
        if (!App.ViewModel.IsDataLoaded)
        {
            string blah = "";
            blah += coord.Latitude.ToString();
            blah += "; " + coord.Longitude.ToString(); 
```

但是，如果我不初始化坐标，它会出错（可以理解）但是如果我这样做 = new GeoCoordinate(); 它为所有数字项返回 NaN。我在从未命中的事件处理程序中设置了断点（虽然是预期的行为？）

在模拟器中，我使用了 >> 的东西，将其设置为 live 并选择了几个位置，将切换位置的时间设置为 10 秒并在运行调试时播放它。我是否在错误地调试/运行模拟器的位置部分？

更新：在更新它以删除字符串 blah items 以根据位置创建列表后，它似乎正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T19:03:39.923

您的`PositionChanged`方法会更新您的坐标，但除非您有机会设置它，否则您永远不会阅读它，您的代码也不会使用任何数据绑定来自动更新——如果您的坐标在您的 ViewModel 上（假设您遵循 MVVM 模式，按属性名称），那么侦听位置变化的事件处理程序也可以为当前`blah`变量的 ViewModel 版本引发 PropertyChanged 事件

# c# - c# 中的pictureBox.Image.Save() 不起作用

> ID：10998779
> 
> 赞同：1
> 
> 时间：2012-06-12T14:29:26.993
> 
> 标签：c#, image, picturebox

我不明白这个问题。因为这通常工作到现在。该方法是点击后的反应，用于将图像保存在称为画布的图片框上。我将图像加载到画布上，然后进行一些编辑。然后我想保存图像。如果我在加载图像之前单击 printScreenButton 它可以工作，但是当我加载图像时它会停止工作。问题可能出在哪里？

```
private void printScreenButton_Click(object sender, EventArgs e)
      {
          canvas.Image.Save("name.png", System.Drawing.Imaging.ImageFormat.Png); 
      } 
```

**编辑：**
工作==创建名为name.png的
文件不起作用==未创建名为name.png的文件

绘制图像的代码 == 放入图片框

```
` private void drawTransformedBitmap(Matrix transformationMatrix) 
        {
            Graphics g = Graphics.FromImage(canvasBitmapShow); //prepare graphics

            if (antialiasing)
            {
                g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBilinear;
            }
            else 
            {
                g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor;
            }

            g.Clear(Color.White); //clear canvas

            g.Transform.Reset(); //clear transformations
            g.Transform = transformationMatrix; //set transformations from transformationMatrix
            g.DrawImage(canvasBitmapTarget, 0, 0); //draw from Bitmap called canvasBitmapTarget

            canvas.Invalidate(); //refresh canvas
        }` 
```

一开始的初始化：

```
canvasBitmapShow = new Bitmap(canvas.Width, canvas.Height);
canvasBitmapSource = new Bitmap(canvas.Width, canvas.Height);
canvasBitmapTarget = new Bitmap(canvas.Width, canvas.Height);
canvasBitmapBackup = new Bitmap(canvas.Width, canvas.Height);

canvas.Image = canvasBitmapShow; //set the Image 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:56:13.170

> canvas.Image.Save("name.png", System.Drawing.Imaging.ImageFormat.Png);

*永远不要*写这样的代码，你没有指定文件的完整路径。这使得文件的实际位置在很大程度上取决于程序的当前工作目录。Environment.CurrentDirectory 的值。这可能会发生意外变化，使用未将 RestoreDirectory 属性设置为 true 的 OpenFileDialog 就是一个示例。

如果没有异常，则可以确定文件已保存。它被保存的确切*位置是一个猜测。*至少使用 SaveFileDialog 或 Environment.GetFolderPath() 来获得可预测的目录名称。此外，默认工作目录不会在您的用户机器上运行，您无法写入 c:\program 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:54:29.783

当您加载图像时，我想使用[OpenFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)更改了[CurrentDirectory](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)，只需将[RestoreDirectory设置为 true 以防止这种行为，但请注意，根据](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.restoredirectory.aspx)[此处](https://stackoverflow.com/questions/930816/why-does-openfiledialog-change-my-working-directory)的答案，显然它有时会在操作系统中表现不同

解决问题的最简单方法可能是使用[SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)保存文件。

# c++ - 类的std::thread调用方法

> ID：10998780
> 
> 赞同：91
> 
> 时间：2012-06-12T14:29:27.057
> 
> 标签：c++, multithreading, c++11

> **可能重复：**
> [使用成员函数启动线程](https://stackoverflow.com/questions/10673585/start-thread-with-member-function)

我有一个小班：

```
class Test
{
public:
  void runMultiThread();
private:
  int calculate(int from, int to);
} 
```

如何在方法的两个线程中`calculate`使用两组不同的参数（例如`calculate(0,10)`，`calculate(11,20)`）运行方法`runMultiThread()`？

PS谢谢我忘记了我需要 pass`this`作为参数。

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-06-12T14:32:03.820

没那么难：

```
#include <thread>

void Test::runMultiThread()
{
    std::thread t1(&Test::calculate, this,  0, 10);
    std::thread t2(&Test::calculate, this, 11, 20);
    t1.join();
    t2.join();
} 
```

如果仍需要计算结果，请改用*future*：

```
#include <future>

void Test::runMultiThread()
{
     auto f1 = std::async(&Test::calculate, this,  0, 10);
     auto f2 = std::async(&Test::calculate, this, 11, 20);

     auto res1 = f1.get();
     auto res2 = f2.get();
} 
```

# wordpress - WordPress 速记/代码图片位置

> ID：10998781
> 
> 赞同：0
> 
> 时间：2012-06-12T14:29:38.080
> 
> 标签：wordpress

有没有一种快捷的方式来链接 WordPress 中的图像...我发现自己不得不输入

```
http://domain.com/cms/wp-content/themes/site_theme/simgs/structure/categories.png 
```

为了让图像加载。我想做类似的事情

```
<img src="simgs/structure/categories.png" ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:34:01.527

您应该在 Wordpress 中使用模板标签而不是硬编码 URL。例如，使用上面的 URL，将是：

```
<img src="<?php echo get_stylesheet_directory_uri(); ?>/simgs/structure/categories.png" /> 
```

请注意，我不确定 get_stylesheet_directory_uri() 函数是否返回斜杠，因此您可能需要查看模板的输出源才能找到答案。

# git - 如何为 Git 控制台着色？

> ID：10998792
> 
> 赞同：401
> 
> 时间：2012-06-12T14:30:00.413
> 
> 标签：git, colors, console

我最近看到`git`Windows 中的控制台是彩色的，例如绿色表示添加，红色表示删除等。我如何为我的`git`控制台着色？

要安装它，我使用了以下命令：`$ sudo apt-get install git-core`

* * *

## 回答 #1

> 赞同：721
> 
> 时间：2012-10-25T18:47:49.520

正如[@VonC所](https://stackoverflow.com/users/6309/vonc)[指出](https://stackoverflow.com/a/17278947/6309)的，从 Git 1.8.4 开始默认`color.ui``auto`

* * *

来自 Unix & Linux Stackexchange 问题[How to colorize output of git?](https://unix.stackexchange.com/questions/44266/how-to-colorize-output-of-git) 以及[@Evgeny 的回答](https://unix.stackexchange.com/a/44297/20879)：

```
git config --global color.ui auto 
```

> 这是一个元配置，包括命令可用的`color.ui`所有各种配置。这在 中进行了深入解释。`color.*``git``git help config`

所以基本上它比单独设置不同的设置更容易和更具未来性`color.*`。

[`git config`文档](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)中的深入解释：

> **`color.ui`**：此变量确定变量的默认值，例如`color.diff`和`color.grep`控制每个命令系列的颜色使用。随着更多命令学习配置以设置`--color`选项的默认值，它的范围将扩大。`always`如果您希望所有不打算用于机器消耗的输出都使用颜色，`true`或者`auto`如果您希望此类输出在写入终端时使用颜色，`false`或者`never`如果您更喜欢 git 命令不使用颜色，除非通过某些明确启用，请将其设置为其他配置或`--color`选项。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-06-12T14:31:34.320

例如参见[https://web.archive.org/web/20080506194329/http://www.arthurkoziel.com/2008/05/02/git-configuration/](https://web.archive.org/web/20080506194329/http://www.arthurkoziel.com/2008/05/02/git-configuration/)

有趣的部分是

> 彩色输出：
> 
> ```
> git config --global color.branch auto
> git config --global color.diff auto
> git config --global color.interactive auto
> git config --global color.status auto 
> ```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-03-28T17:54:44.333

将下一个代码添加到您的 .gitconfig 文件中：

```
[color]
    ui = auto
[color "branch"]
    current = yellow reverse
    local = yellow
    remote = green
[color "diff"]
    meta = yellow bold
    frag = magenta bold
    old = red bold
    new = green bold
[color "status"]
    added = yellow
    changed = green
    untracked = cyan 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-08-06T18:39:16.507

如果您要求，Git 会自动为其大部分输出着色。您可以非常具体地了解您想要什么颜色以及如何上色；但要打开所有默认终端着色，请将 color.ui 设置为 true：

```
git config --global color.ui true 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-06-24T15:13:42.973

在 Ubuntu 或任何其他平台中（是的，Windows 也是如此！）；从[2013-08-23 发布](http://article.gmane.org/gmane.linux.kernel/1550161)的[git1.8.4](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.4.txt#L178-L180)开始，**您无需执行任何操作**：

 **> 许多教程教用户将“color.ui”设置为“auto”作为您设置“ `user.name/email`”后的第一件事，以向自己介绍 Git。**现在变量默认为“ `auto`”。**

所以你会默认看到颜色。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-07-08T17:36:59.870

在您的`~/.gitconfig`文件中，只需添加以下内容：

```
[color]
  ui = auto 
```

它会处理你所有的 git 命令。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-12-25T01:52:26.587

另一种方法是编辑`.gitconfig`（如果不存在则创建一个），例如：

```
vim ~/.gitconfig 
```

然后添加：

```
[color]
  diff = auto
  status = auto
  branch = auto 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-02-26T13:22:39.053

GIT 默认使用彩色输出，但在某些系统（如 CentOS）上未启用。您可以像这样启用它

```
git config --global color.ui  true 
git config --global color.ui  false 
git config --global color.ui  auto 
```

您可以从这里选择您需要的命令。

这里**--global**是可选的，可以对系统中的每个存储库应用操作。如果您只想为当前存储库应用着色，那么您可以执行以下操作 -

```
 git config color.ui  true 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-07-07T09:03:45.453

好吧，如果你对默认设置不满意，你可以使用[ANSI转义码](https://en.wikipedia.org/wiki/ANSI_escape_code)帮你设置颜色，如果你想修改一些文字，你可以写bash来帮你。见下图：

# 样例

```
# .gitconfig

[alias]
    st-color = "!f() { \
        echo -n -e '\\033[38;2;255;0;01m\\033[4m' ;\
        git status -s | grep ' D' | \
        sed -e 's/^ ./DELETE:/' ; \
        echo -n -e '\\033[m' ;\
        \
        echo -n -e '\\033[48;2;128;128;128m' ;\
        echo -n -e '\\033[38;2;0;255;01m' ;\
        git status -s | grep ' [AM]' | \
        sed -e 's/^ ./NEW OR MODIFY:/' ; \
        echo -n -e '\\033[m' ;\
        \
        echo -n -e '\\033[38;2;255;0;255m' ;\
        echo Rename ;\
        git status -s | grep 'R ' | \
        sed -e 's/^..//' ; \
        echo -n -e '\\033[m' ;\
    }; f" 
```

# 演示

[![在此处输入图像描述](../Images/0e8a38d80b535c710b021bb6edcd52da.png)](https://i.stack.imgur.com/GCmS2.png)

# 解释

1.  `.gitconfig`您可以使用以下语法编写长脚本：

    ```
    [alias]
        your-cmd = !f() { \
            \
        }; f" 
    ```

2.  `echo -n -e` （查看更多[回声](https://ss64.com/bash/echo.html)）

    *   -n = 不输出尾随换行符。
    *   -e 启用对以下反斜杠转义的解释
3.  `\\033[38;2;255;0;0m\\033[4m`（查看更多[SGR 参数](https://en.wikipedia.org/wiki/ANSI_escape_code#SGR_parameters)）

    *   `\\033[38;2;255;0;0m`：38 表示**前景色**。255;0;0 =*红色*| **r;g;b**
    *   `\\033[4m`: 下划线
4.  `grep` : grep 命令用于搜索文本。

5.  `sed -e 's/be_replace_string/new_string/'` 将字符串替换为新字符串。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-09-23T03:38:05.260

**改进 Windows 10 上的 Git“分支类型”颜色：**

*显示* `git branch -avv` *所有示例的命令...*

* * *

**1\. Git 默认配色方案：**

```
git config --system --remove-section color.branch
```

[![在此处输入图像描述](../Images/f0e936e1da80241abcd6ede78582352c.png)](https://i.stack.imgur.com/BP9ue.png)

* * *

**2.本页另一个[答案](https://stackoverflow.com/a/29320572/147511)中给出的分支颜色：**

```
git config --system color.branch.local “黄色”
git config --system color.branch.current "黄色反转"
git config --system color.branch.remote "green"
```

[![在此处输入图像描述](../Images/3f654ce55583f5276e79ea5c5e7a66a7.png)](https://i.stack.imgur.com/h8XRO.png)

* * *

**3.可能改进的分支配色方案：**

```
git config --system color.branch.local “黄色”
git config --system color.branch.current "亮白色黄色"
git config --system color.branch.remote "正常绿色"
git config --system color.branch.upstream "亮白色青色"
```

[![在此处输入图像描述](../Images/b3656460128e1bc5bc4e645180aaf955.png)](https://i.stack.imgur.com/G2BK2.png)

* * *

**4\. 自己制作：**

指定前景色和（可选）背景色。在 Windows 10 中有效的一组颜色是根据以下正则表达式给出的（是的，您可以使用`brightblack`它，它实际上非常有用）：

```
（正常|（亮）？（黑|红|绿|黄|蓝|品红|青|白））

```

据我所知，该`dim`选项（请参阅底部的文档链接）在 Windows 10 控制台中没有任何作用，并且该选项与颜色`bold`具有相同的效果。`bright*`现在回想一下示例中显示的配置语法：

```
git config <config-type> color.branch.<slot>  "<fg> <bg>" 
```

该参数`<config-type>`通常是`--system`或`--global`。如果省略，则指定的颜色将仅应用于当前存储库。使用刚刚详述的颜色名称，您可以为特定分支类型设置前景色`<fg>`和背景色，其中是以下之一：`<bg>``<slot>`

*   `current`（当前分支）
*   `local`（当地分支机构）
*   `remote`（refs/remotes/ 中的远程跟踪分支）
*   `upstream`（上游跟踪分支）
*   `plain`

与往常一样，您可以通过以下命令显示整个 git 配置，其中将包括您在此处描述的设置的任何选项：

```
git config -l --show-origin 
```

请注意，还有一组与日志输出颜色有关的配置选项（此处未讨论）：

```
git config --system color.decorate.(branch|remoteBranch|tag|stash|HEAD|grafted) <color> 
```

* * *

参考：[https ://git-scm.com/docs/git-config](https://git-scm.com/docs/git-config)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-20T21:22:14.427

使用 Git 2.18，您可以更好地控制如何在控制台中指定颜色。
**“ `git config`”命令使用单独的选项**，例如“ `--int`”、“ `--bool`”等**来指定调用者希望将值解释为什么类型**。

引入了一个新的 " `--type=<typename>`" 选项，这将使定义新类型更加简洁。

请参阅[提交 fb0dc3b](https://github.com/git/git/commit/fb0dc3bac135e9f6243bd6d293e8c9293c73b9cd)（2018 年 4 月 18 日）和[Taylor Blau（ 2018 年 4 月 9 日）](https://github.com/ttaylorr)[提交的 0a8950b](https://github.com/git/git/commit/0a8950be5d5d8699b4c1f31116bdf896278db484)（2018 年 4 月 9 日[）](https://github.com/ttaylorr)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 e3e042b](https://github.com/git/git/commit/e3e042b185ce3037acb61382da53521ac0beebbf))^(中，2018 年 5 月 8 日）)[`ttaylorr`](https://github.com/ttaylorr)
^([`gitster`](https://github.com/gitster))

> ## `builtin/config.c`: 支持`--type=<type>`作为首选别名`--<type>`
> 
> `git config`长期以来，调用者能够提供“类型说明符”，它指示`git config`(1) 确保传入值可以解释为该类型，以及 (2) 传出值在该类型下被规范化。
> 
> 在另一个系列中，我们建议使用 `--type=color`和`--default`替换`--get-color`.
> 
> 但是，我们传统上`--color`用来表示“将此输出着色”，而不是“应将此值视为颜色”。
> 
> 目前，`git config`不支持这种着色，但我们应该小心避免过早地蹲在这个选项上，以便 将来`git config`可以支持`--color`（在传统意义上），如果需要的话。
> 
> 在这个补丁中，我们还支持,`--type=<int|bool|bool-or-int|...>`等。**这使得前面提到的即将发布的补丁支持使用默认 via 查询颜色值****，而不会浪费****。**`--int``--bool`
> **`--type=color --default=...``--color`**
> 
> 当给出多个传统风格的`--<type>`标志时，我们保留了抱怨的历史行为，并将其扩展到冲突的新风格`--type=<type>`标志。`--int --type=int`（及其可交换对）不会抱怨，但`--bool --type=int`（及其可交换对）会抱怨。

因此，在您拥有`--bool`and之前`--int`，现在（[文档](https://github.com/git/git/blob/fb0dc3bac135e9f6243bd6d293e8c9293c73b9cd/Documentation/git-config.txt#L161-L188)）：

```
--type <type> 
```

> ' `git config`' 将确保任何输入或输出在给定的类型约束下都是有效的，并且将以`<type>`' 的规范形式规范化传出值。
> 
> 有效`<type>`的包括：
> 
> *   ' `bool`'：将值规范化为“ `true`”或“ `false`”。
> *   ' `int`'：将值规范化为简单的十进制数。`k`' '、' `m`' 或 ' '的可选后缀`g`将导致值在输入时乘以 1024、1048576 或 1073741824。
> *   ' '：如上所述，根据 ' ' 或 ' '`bool-or-int`进行规范化。`bool``int`
> *   ' '：通过将前导添加到指定用户的值和主目录来`path`规范化。此说明符在设置值时无效（但您可以从命令行使用，让您的 shell 进行扩展。）`~``$HOME``~user``git config section.variable ~/`
> *   ' `expiry-date`'：通过从固定或相对日期字符串转换为时间戳来规范化。此说明符在设置值时无效。

```
--bool::
--int::
--bool-or-int::
--path::
--expiry-date::
  Historical options for selecting a type specifier. Prefer instead `--type`,
(see: above). 
```

* * *

请注意，Git 2.22（2019 年第 2 季度）解释了“ `git config --type=color ...`”是为了替换“ `git config --get-color`”，但有一点没有记录在案，现在已修复。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 cd8e759](https://github.com/git/git/commit/cd8e7593b9c881996a04858a3329e8ed9f1d4dbc)（2019 年 3 月 5 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 f6c75e3](https://github.com/git/git/commit/f6c75e392e2d8426b622408ae74f0e2b545609a7))^(中，2019 年 3 月 20 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `config`: 文档`--type=color`输出是完整的一行
> 
> 尽管较新的 " `--type=color`" 选项到 " `git config`" 是为了向上兼容传统的 " `--get-color`" 选项，但与后者不同的是，它的输出不是最后缺少 LF 的不完整行。
> 这使得它与“”等其他类型的输出一致`git config --type=bool`。
> 
> [记录它](https://github.com/git/git/blob/cd8e7593b9c881996a04858a3329e8ed9f1d4dbc/Documentation/git-config.txt#L236-L245)，因为它有时会让毫无戒心的用户感到惊讶。

现在是这样写的：

> `--type=color [--default=<default>]`优先于`--get-color` （但请注意，`--get-color`它将省略由 打印的尾随换行符 `--type=color`）。

* * *

您可以看到`git config --type=bool`与 Git 2.26（2020 年第一季度）一起使用来替换`git config --bool`示例模板中的“”调用。

请参阅[Lucius Hu ( ) 的](https://github.com/lebensterben)[提交 81e3db4](https://github.com/git/git/commit/81e3db42f3212a8e441e4ecee9a2928921cb9045)（2020 年 1 月 19 日[）](https://github.com/lebensterben)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 7050624](https://github.com/git/git/commit/7050624abceb6f7b4ca0ca7ddfce5831f8a40b8f))^(中，2020 年 1 月 30 日）)[`lebensterben`](https://github.com/lebensterben)
^([`gitster`](https://github.com/gitster))

> ## [`templates`](https://github.com/git/git/commit/81e3db42f3212a8e441e4ecee9a2928921cb9045)：修复不推荐使用的类型选项`--bool`
> 
> ^(签字人：Lucius Hu)
> 
> `--bool`选项标记为历史，`git-config`建议用户`--type=bool`改用。
> 此提交替换模板中所有出现的`--bool`。
> 
> 另请注意，没有找到其他不推荐使用的类型选项，包括`--int`、`--bool-or-int`、`--path`或`--expiry-date`。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-04-01T07:02:31.227

参考这里： [https ://nathanhoad.net/how-to-colours-in-git/](https://web.archive.org/web/20180818074329/https://nathanhoad.net/how-to-colours-in-git)

脚步：

1.  打开 ~/.gitconfig 进行编辑

    vi ~/.gitconfig

2.  粘贴以下代码：

    ```
    [color]
      ui = auto
    [color "branch"]
      current = yellow reverse
      local = yellow
      remote = green
    [color "diff"]
      meta = yellow bold
      frag = magenta bold
      old = red bold
      new = green bold
    [color "status"]
      added = yellow
      changed = green
      untracked = cyan 
    ```

3.  保存文件。

只需更改本地存储库中的任何文件并执行

```
git status 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-10-31T13:29:01.070

假设您希望当前分支为黄色，所有其他分支为青色粗体。我正在考虑您希望这些更改在本地完成，即在您当前的存储库中完成，而不是针对您系统中存在的所有存储库。使用“cd .git”进入 .git 文件，然后打开“config”文件。在配置文件中键入以下内容，而不更改配置文件中的任何其他内容。

```
 [color]
         ui=true
    [color "branch"]
         local=cyan bold 
         current=yellow bold 
```

然后保存配置文件。打开 git 控制台并执行**git branch**。你会看到区别**

# javascript - 跨浏览器对日期字符串进行相同的解释

> ID：10998798
> 
> 赞同：1
> 
> 时间：2012-06-12T14:30:16.833
> 
> 标签：javascript, internet-explorer, firefox, google-chrome

所以，我有一个从服务器返回的 ISO 日期时间，例如“2012-06-11T18:05”。这次是 UTC。当我将该字符串传递给 Chrome 或 IE 时，它们会给我本地时间的时间（因此，对于 CDT，它给了 01:05 PM）（这就是我想要的）。如果我将它传递给 Firefox，它会假定它已经是当地时间，它会报告当地时间下午 6:05。所以，我想我会通过执行“2012-06-11T18:05+0000”来将它的 UTC 时间添加到字符串中。这在 Chrome 和 Firefox 中效果很好，但 IE 将其报告为无效日期。

什么是跨浏览器、符合标准的方式我可以指定给定的日期时间字符串表示 UTC 时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:46:58.743

您可以自己解析传入的数据并使用它来构建有效的日期对象。

像这样的东西：

```
// input (from somewhere)
var incomingDate = "2012-06-11T18:05";
// parse Input using Regexp
var parsedIncomingDate= incomingDate.match(/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2})$/);
// convert parsed UTC times into ms accoring to the users browser timezone
var getUTCms = Date.UTC(parsedIncomingDate[1],parsedIncomingDate[2], parsedIncomingDate[3], parsedIncomingDate[4], parsedIncomingDate[5]); 

// ms to Date Object
var dateObj = new Date(getUTCms); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:11:26.940

如果你正在寻找一个好的日期库，我写了[moment.js](http://momentjs.com)来解决这样的问题。它还具有自动 ISO8601 解析功能。

```
moment("2012-06-11T18:05"); // parse as local time
moment("2012-06-11T18:05+0000"); // parse as utc time 
```

查看[http://momentjs.com/docs/](http://momentjs.com/docs/)上的文档以获取有关该库可以做什么的更多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:41:21.507

您可以`Date.UTC`像这样使用方法：

```
var my_date = new Date(Date.UTC(2012, 5, 11, 18, 5, 0)); 
```

见[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/UTC)

# javascript - 如何使用 JQuery 从元素内的所有输入元素中获取值

> ID：10998806
> 
> 赞同：5
> 
> 时间：2012-06-12T14:30:39.593
> 
> 标签：javascript, jquery, html

如何在表单的一行中获取所有输入元素？例如，在下面的代码片段中，我有一个复选框和一个文本输入框。我想获取这两种输入类型的值，并在包含 div id="hist" 元素的下一个 td 元素中将它们显示给用户。

```
 <tr><td>Head</td>
            <td><input type="text" name="headH" id="headH" ></td>
            <td><input class="NA" type="checkbox" name="headNA" id="headNA" value="N/A"></td>
            <td><div class="hist"></div><%=Utils.getMeasurementsCreateDiv1("Head","H",num) %>
            </td></tr>
        <tr><td>Neck</td>
            <td><input type="text" name="neckH" id="neckH" ></td>
            <td><input class="NA" type="checkbox" name="neckNA" id="neckNA" value="N/A"></td>
            <td><div class="hist"></div><%=Utils.getMeasurementsCreateDiv1("Neck","H",num) %></td>
        </tr>
        <tr><td>UE</td>
            <td><input type="text"name="uEH" id="uEH"></td>
            <td><input class="NA" type="checkbox" name="ueNA" id="ueNA" value="N/A"></td>
            <td><div class="hist"></div><%=Utils.getMeasurementsCreateDiv1("UExt","H",num) %></td> 
```

我还有一个 5 个单选按钮和一个附加的文本输入框。这些都不在同一行，但我想获取“pain1”元素和“cerCommentH”元素的值并显示它。请注意，以下只是一个代码片段。我的表单中有几个这样的元素，所以我不能使用它们的“id”单独处理它们。

```
 <tr>
            <td>Mech</td>
            <td>
                <input type="radio" name="pain1" value="Pain a">Pain a
                <input type="radio" name="pain1" value="Pain b">Pain b

            </td></tr>  
            <tr><td></td>
            <td>
                <input type="radio" name="pain1" value="Pain c">Pain c  
                <input type="radio" name="pain1" value="Pain d">Pain d
                <input type="radio" name="pain1" style="display:none;" value="">
                <input type="button" value="Clear" onclick="document.history.pain1l[4].checked = true;">
        </td>
        <td><div class="hist"></div><%=Utils.getMeasurementsCreateDiv1("Cehi","H",num) %></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="radio" name="pain1" value="Other">Other
                <input type="text" name="cerCommentH" id="cerCommentH">
            </td>
            <td></td>
            <td></td>
        </tr> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:37:50.073

假设您可能想对每个人做一些事情：

```
$('tr:has(input)').each(function() {
   var row = this;
   var values = "";
   $('input', this).each(function() {
      values =  values + "," + $(this).val() 
   });
   values = "<div>(" + values.substring(1) + ")</div>";

   $('.hist', row).html(values); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:35:24.770

如果你需要它 serialize() 方式，那么：

```
var result = '';
$('tr input').each(function(){
    result += $(this).attr('name')+'='+$(this).val()+'&'
})
//post result after all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:35:29.920

```
//suppose trid is the id of the tr element
var all = $('#tr input');
//or if tr has no id, but table does have a id 'table1'
var tr = $('input', '#table1 tr:first'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T14:38:12.757

您可以将其序列化为一个数组，然后可以使用 serializeArray 将其作为数据直接输入到 jquery ajax 方法中。

```
var rowIndex = 1; // row index to pull
// select all inputs that you desire to send, then use serializeArray();
var data = $("tr").eq(rowIndex).find("input").serializeArray();
$.post(url,data,onDoneHandler); 
```

# android - 我无法在 Android 中取消警报/PendingIntents

> ID：10998811
> 
> 赞同：1
> 
> 时间：2012-06-12T14:30:50.133
> 
> 标签：android, alarmmanager, android-pendingintent

在我的主要活动中，我有一个方法 setRepeatingAlarm() 在应用程序首次加载时设置警报。该方法通过遍历列并从 SQLite 表中的每一行获取整数值来成功设置警报。这是基本的方法：

```
 for (int i : AlarmDays) {

        Calendar cal = Calendar.getInstance();
        if (cal.get(Calendar.MINUTE) >= i)
            cal.add(Calendar.HOUR, 1);
        cal.set(Calendar.MINUTE, i);

        Intent intent = new Intent(ManageDebts.this, TimeAlarm.class);
        pendingIntent = PendingIntent.getBroadcast(this, i,
                intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                60 * 60 * 1000, pendingIntent);
    } 
```

方法完成后，它会再次遍历行，并将每行放入 CustomAdapter（列表）中以显示数据。这是我在主类中的 onCreate 中的上下文（再次，基本）：

```
 datasource = new DebtDataSource(this);
    datasource.open();

    **am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    setRepeatingAlarm();**

    values = datasource.getAllDebt();
    adapter = new MyArrayAdapter(this, values);
    setListAdapter(adapter); 
```

我希望用户长按一行并删除该项目，或者有一个按钮可以删除所有行。一切正常，但我无法让警报消失。

我了解如何做到这一点（通过设置相同的 pendingIntent 和相同的附加功能来取消方法），但我的尝试被挫败了！我不知道把它放在哪里？以上所有内容都在**同一**类中。

无论用户删除一行还是全部，我认为最简单的方法是删除所有警报并再次循环通过该方法来重置它们。谁能帮忙告诉我把这个取消代码放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T14:43:27.340

在长按列表

```
PendingIntent pi = PendingIntent.getBroadcast(context, unique_id, i, 0);
am.cancel(pi); 
```

unique_id 对于每个待处理的意图都是独立的，因此获取 listview id ，添加 +1 以便它成为您的待处理意图 ID。

这样特定的 PendingIntent 将被删除。

取消所有警报 只需在设置警报和取消警报时创建一个 for 循环。

# iphone - Iphone 相机，钛金属加速器

> ID：10998823
> 
> 赞同：0
> 
> 时间：2012-06-12T14:31:35.000
> 
> 标签：iphone, camera, titanium, appcelerator-mobile

我正在使用 Titanium Appcelerator 创建一个 iPhone 应用程序。对于其中一个选项卡，我想包括一个相机。当我单击相机图像时，我希望应用程序：

*   打开相机拍照
*   询问用户是否想再拍一张照片
*   然后再次打开相机是
*   （环形）
*   将图像（本地保存）放入数组中
*   返回键！

我似乎无法在任何地方找到相机功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:34:39.640

此链接提供了一个简短的示例，但建议查看厨房水槽演示应用程序，厨房水槽有一个几乎所有内容的示例。

[http://developer.appcelerator.com/question/66021/api---相机](http://developer.appcelerator.com/question/66021/api---camera)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T05:01:49.547

```
var win = Titanium.UI.createWindow({
    title:"Using the Camera and Video",
    backgroundColor:"#FFFFFF"
});

var button = Titanium.UI.createButton({
    title:"Use camera",
    width:180,
    height:48,
    bottom: 12,
    zIndex:2
});

button.addEventListener("click", function(e){
    //Open the photo gallery
    Titanium.Media.showCamera({
        //function to call upon successful load of the gallery
        success:function(e){
            if(e.mediaType === Titanium.Media.MEDIA_TYPE_PHOTO){
                //e.media represents the photo or video
                var imageView = Titanium.UI.createImageView({
                    image:e.media,
                    width:320,
                    height:480,
                    top:12,
                    zIndex:1
                });
                win.add(imageView);
            }else if(e.mediaType === Titanium.Media.MEDIA_TYPE_VIDEO){

                var w = Titanium.UI.createWindow({
                    title:"New Video",
                    backgroundColor:"#000000"
                });

                var videoPlayer = Titanium.Media.createVideoPlayer({
                    media:e.media,
                    backgroundColor:"#FFFFFF",
                    //movieControlMode:Titanium.Media.VIDEO_CONTROL_DEFAULT,
                    /*other values
                     * Titanium.Media.VIDEO_CONTROL_EMBEDDED
                     * Titanium.Media.VIDEO_CONTROL_FULLSCREEN
                     * Titanium.Media.VIDEO_CONTROL_HIDDEN
                     * Titanium.Media.VIDEO_CONTROL_NONE
                     */
                    //movieControlStyle:Titanium.Media.VIDEO_CONTROL_FULLSCREEN,
                    //scalingMode:Titanium.Media.VIDEO_SCALING_ASPECT_FIT
                    /*other values
                     * Titanium.Media.VIDEO_SCALING_ASPECT_FILL
                     * Titanium.Media.VIDEO_SCALING_MODE_FILL
                     * Titanium.Media.VIDEO_SCALING_NONE
                     */
                });

                w.add(videoPlayer);

                videoPlayer.addEventListener("complete", function(e){
                    w.remove(videoPlayer);
                    videoPlayer = null;
                    w.close();
                });

                w.open({modal:true});
            }

        },
        error:function(e){
            alert("There was an error");
        },
        cancel:function(e){
            alert("The event was cancelled");
        },
        //Allow editing of media before success
        allowEditing:true,
        saveToPhotoGallery:true,
        //Media types to allow
        mediaTypes:[Titanium.Media.MEDIA_TYPE_PHOTO,Titanium.Media.MEDIA_TYPE_VIDEO],
        //The other is Titanium.Media.MEDIA_TYPE_VIDEO,
        //If recording video, you can set the quality to record at
        videoQuality:Titanium.Media.QUALITY_HIGH
        /*other possible values for this property are
         * Titanium.Media.QUALITY_MEDIUM
         * Titanium.Media.QUALITY_LOW
         */
    });
});

Titanium.App.addEventListener('camera_button', function(){
    Titanium.Media.takePicture();
});

win.add(button);

win.open(); 
```

# html-helper - MVC 4 中的自定义 html 助手

> ID：10998827
> 
> 赞同：15
> 
> 时间：2012-06-12T14:31:52.900
> 
> 标签：html-helper, asp.net-mvc-4

我创建了助手类

```
namespace SEM.API.Helpers
{
    public static class Navigation
    {
        public static string BuildSomething(this HtmlHelper helper)
        {
            return "empty";
        }
    }
} 
```

并将命名空间添加到 webconfig`<add namespace="SEM.API.Helpers" />` 但我仍然收到错误消息：

> CS1061：“System.Web.Mvc.HtmlHelper”

多次改造后仍未解决

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-12T14:33:41.997

> 并将命名空间添加到 webconfig`<add namespace="SEM.API.Helpers" />`

确保你在`~/Views/web.config`而不是在`~/web.config`.

要尝试的另一件事是将`@using`指令添加到您的视图中：

```
@using SEM.API.Helpers
@Html.BuildSomething() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T07:11:50.620

此外，`~/Areas/[Area name]Views/web.config`如果使用了 Areas，您应该添加到相同的字符串中。

# php - 按值对php多维数组进行排序

> ID：10998830
> 
> 赞同：0
> 
> 时间：2012-06-12T14:32:02.370
> 
> 标签：php, arrays, sorting, object, multidimensional-array

我需要通过变量“i_lastname”对这个多维 php 对象进行排序。

我用 usort 和 ksort 尝试了大多数示例，但无济于事。大多数例子都是这样的，但对我不起作用。

```
function sort_by_name($a, $b)
{
  return ($a->i_lastname < $b->i_lastname ? -1 : 1);
}
usort($cards, 'sort_by_name'); 
```

这是对象结构。

谢谢你。

```
Array
(
    [0] => Array
        (
            [officer_id] => 4D5DEF60
            [card_id] => 5
            [general] => Array
                (
                    [0] => Array
                        (
                            [i_officer_id] => 4D5DEF60
                            [i_officer_name] => 
                            [i_datetime] => 2012-06-12 13:47:00
                            [i_location] => 17 Rue de Neuch, Yvette, France
                            [i_lat] => 48.6955
                            [i_lon] => 2.21458
                            [i_reason] => DUI
                        )
                )
            [subject] => Array
                (
                    [0] => Array
                        (
                            [subject_id] => 6
                            [i_lastname] => Toro
                            [i_firstname] => Benicio
                        )
                    [1] => Array
                        (
                            [subject_id] => 9
                            [i_lastname] => Limon
                            [i_firstname] => Pedro
                        )
                )
            [vehicle] => Array
                (
                )
        )

    [1] => Array
        (
            [officer_id] => 4D5DEF60
            [card_id] => 2
            [general] => Array
                (
                    [0] => Array
                        (
                            [i_officer_id] => 0f3b45a3
                            [i_officer_name] => 
                            [i_datetime] => 2012-06-06 19:42:00
                            [i_location] => 10231 Yankee St, Miami, USA
                            [i_lat] => 39.5952
                            [i_lon] => -84.2003
                            [i_reason] => Speeding
                        )
                )
            [subject] => Array
                (
                    [0] => Array
                        (
                            [subject_id] => 3
                            [i_lastname] => Doe
                            [i_firstname] => John
                        )
                    [0] => Array
                        (
                            [subject_id] => 15
                            [i_lastname] => Doe
                            [i_firstname] => Jane
                        )
                )
            [vehicle] => Array
                (
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:37:34.817

您应该使用`['...']`而不是`->...`- 您正在处理数组，而不是对象。

您的回调应如下所示：

```
return strnatcasecmp($a['i_lastname'],$b['i_lastname']); 
```

任何[`strcmp`](http://php.net/strcmp), [`strcasecmp`](http://php.net/strcasecmp),[`strnatcmp`](http://php.net/strnatcmp)或[`strnatcasecmp`](http://php.net/strnatcasecmp)应该可以正常工作，您只需要决定哪一个最适合您正在做的事情。

# xcode - xcode 故事板不接受更改

> ID：10998834
> 
> 赞同：14
> 
> 时间：2012-06-12T14:32:12.060
> 
> 标签：xcode, storyboard

我的故事板似乎被锁定了。我为两个不同的场景添加了新的标签和图像视图，但在运行时标签和图片不显示。（所有原始项目都正确显示。）我尝试过清理、构建和构建以进行运行、测试和分析。我已将整个项目复制到另一台 Mac。它运行程序，接受代码更改，但是这台 Mac 也不允许更改情节提要。（没有添加项目，没有改变原始项目的位置。）就像故事板被锁定以进行编辑一样。

我搜索了有关故事板锁定的信息，但找不到任何似乎适用于我的东西（即我不是从事同一程序的团队中的一员。）

我会很感激任何想法。

（第 2 台 Mac 上的 Xcode 4.2，最初出现问题的 Xcode 4.3.2。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-23T12:49:35.050

我遇到了同样的问题，并意识到我正在使用***Localization Locking*****设置，该设置位于Interface Builder Documents**下的右侧菜单中。

![本地化锁定](../Images/d83593e1883128d32b19079c872f10ed.png)

`Nothing`如果您希望能够对情节提要进行更改，请确保所选设置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-02T08:29:56.800

我在 xocde6 中遇到了同样的问题，我在[苹果开发者网站上得到了答案](https://developer.apple.com/library/ios/documentation/MacOSX/Conceptual/BPInternational/LocalizingYourApp/LocalizingYourApp.html)

1.  在项目导航器中，选择 .storyboard 或 .xib 文件。

2.  从编辑器 > 本地化锁定菜单中选择锁定级别。有关此菜单中锁定选项的说明，请参阅锁定级别。

要解锁文件中的所有视图，请选择重置锁定控件。

例如，要防止对 nib 文件进行任何会影响本地化字符串文件的编辑，请选择 Reset Locking Controls，然后选择 Localizable Properties。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-01-24T12:10:08.207

对我有用的解决方案是在选择锁定视图后转到

*编辑器 > 本地化锁定 > 重置锁定控件*

它会重置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-18T17:12:26.653

我解决问题的方式：

我的故事板**Target Membership**不知何故未被选中。

当您在 Xcode 中选择故事板时，您将在与接受的答案相同的菜单中找到 Target Membership 选项，即右侧菜单中的 File Inspector（第一个选项）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-17T02:15:06.387

我发现 Launch Screen Storyboard 有一个插座，我已经删除了为其提供服务的视图控制器。

# ios - iOS 6 不推荐使用 MPMusicPlayerController

> ID：10998841
> 
> 赞同：5
> 
> 时间：2012-06-12T14:32:46.670
> 
> 标签：ios, mpmediaplayercontroller, ios6

我刚刚看到 Apple 发布的 iOS 5.1 到 iOS 6.0 API 的差异。他们说一些重要的方法`MPMusicPlayerController.h`被删除到`MPMediaPlayback`协议中（播放、暂停、停止......）。

有人知道如何更新我的应用程序，他们使用下面的代码来使用 iOS 6 吗？

```
MPMusicPlayerController *musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
musicPlayer play; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T23:41:29.743

该类`MPMusicPlayerController`符合`MPMediaPlayback`协议，调用`[MPMusicPlayerController iPodMusicPlayer]`返回一个`MPMusicPlayerController`. 此外，从`MPMusicPlayerController`类中删除的所有不推荐使用的方法都存在于`MPMediaPlayback`协议中。这意味着：

1.  无需更改代码即可在 iOS 6 下运行。该`play`方法仍然存在于每个`MPMusicPlayerController`实例中，并且调用它应该执行与它一直相同的操作。

2.  实际上没有任何方法被“删除”。它们被转移到协议中，大概是因为具有媒体播放器 API 的抽象允许通过提供符合`MPMediaPlayback`协议的自定义对象实现来完成非常酷的事情。

# command - 创建 Textmate Bundle 命令并操作选定的文本

> ID：10998842
> 
> 赞同：0
> 
> 时间：2012-06-12T14:32:46.753
> 
> 标签：command, textmate, code-snippets

我在 Textmate 中做了很多关于温度的工作，我很想创建一个可以执行以下操作的命令或片段。我可以突出显示下面的 131 之类的数字

```
Cook the food at 131. 
```

他们运行命令，它会自动计算摄氏度并对其进行格式化，从而导致

```
Cook the food at 131&deg;F / 55&deg;C. 
```

我有一些使用片段的经验，但不是太多，尤其是在操作选定的文本方面。我认为对于比我更了解命令的人来说，这将是一个微不足道的问题！

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:50:06.120

得到你正在寻找的东西。另外，提醒一下，命令字段实际上只接受可以通过 bash 执行的任何内容，因此，如果您熟悉其中的任何内容，或者想使用您熟悉的语言，那么它是一个非常强大的字段。为此，我将使用 python，因为 bash 和浮点数学不能很好地结合在一起。

转到`Bundles -> Bundle Editor -> Edit Commands`并选择最适合的语言（如果您希望在整个 baord 中应用此语言，您可能需要使用`Source`or`Text`捆绑包。

创建一个新命令并为文本输入：

```
#!/usr/bin/env python

from sys import stdin

degF = int( stdin.read() )
degC = (degF - 32) * 5 / 9

print str(degF) + "&deg;F / " + str(degC) + "&degC;." 
```

接下来设置您的下拉菜单，使输入为`Selected Text`，输出为`Replace Selected Text`

激活需要`Key Equivalent`然后输入您希望使其应用的键盘命令。

最后，为此选择范围。如果您希望它可用于任何类型的文件，请将其留空。如果您希望在所有非基于代码的文件中使用它，（纯文本、html 等）输入`text`. 对于仅与代码相关的文件，请输入`source`. 如果您愿意，Yuo 还可以变得更细化 ( `source.php`)

希望有帮助！

# android - 从原始位图创建裁剪位图

> ID：10998843
> 
> 赞同：2
> 
> 时间：2012-06-12T14:32:51.697
> 
> 标签：android, bitmap

在我的 android 应用程序中，我有一个位图，我想创建另一个从该位图中裁剪的位图。换句话说，我想从原始位图中获取特定部分。

我正在使用`Bitmap.createBitmap(Bitmap source, int x, int y, int width, int height)` ，但我得到的图像似乎被放大了。

可能是什么原因，我该如何纠正？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:53:40.327

Bitmap.createBitmap(Bitmap source, int x, int y, int width, int height) 绝对是正确的方法。我怀疑您只是错误地使用了参数。

例如，要获得名为 img 的 100x100 位图的中心 50x50 像素，您可以使用：

Bitmap.createBitmap(img, 25, 25, 50, 50);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:51:58.020

我的建议：

```
r = this.getContext().getResources();
Drawable copyFrom= r.getDrawable(R.drawable.OriginalPNG);
Bitmap b1 = Bitmap.createBitmap(IMAGES_WIDTH, IMAGES_HEIGHT,Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(b1);

copyFrom.setBounds(0, 0, IMAGES_WIDTH, IMAGES_HEIGHT);
copyFrom.draw(canvas);

Bitmap copyTo;  

copyTo = Bitmap.createBitmap(copyFrom, x, y, W, H); 
```

其中 IMAGES_WIDTH 和 IMAGES_HEIGHT 是原始 PNG 的尺寸，W,H 是您要复制的区域的尺寸。x 和 y 指定原始 PNG 上从何处开始复制的点。将 x,y 都设为零意味着从左上角开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:40:38.327

干得好

[https://github.com/lorensiuswlt/AndroidImageCrop](https://github.com/lorensiuswlt/AndroidImageCrop)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:14:43.577

```
 Rect re=new Rect(350, 150, 350, 150);

    public void takePicture(final String fileName) {
    Log.i(TAG, "Tacking picture");
    PictureCallback callback = new PictureCallback() {

        private String mPictureFileName = fileName;

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.i(TAG, "Saving a bitmap to file");
            Bitmap picture = BitmapFactory.decodeByteArray(data, 0, data.length);
           Bitmap finalBitmap = Bitmap.createBitmap(picture, 850, 500, 960, 720);

            try {

                FileOutputStream out = new FileOutputStream(mPictureFileName);
                finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
                finalBitmap.recycle();
                mCamera.startPreview();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };

    mCamera.takePicture(null, null, callback);

} 
```

# iphone - 核心动画和 NSTimer

> ID：10998844
> 
> 赞同：0
> 
> 时间：2012-06-12T14:32:52.073
> 
> 标签：iphone, objective-c, xcode, core-animation, nstimer

我想做的是在计时器滴答作响时为标签设置动画。我有一个基于窗口的应用程序。

1.  我在一个while循环中尝试了核心动画，但程序只是冻结了。
2.  我尝试了由计时器（NSTimer）触发的核心动画，但没有任何反应。

问题：我调试了程序，一切看起来都很好，所有的语句都在执行，但是没有任何反应。我认为不允许循环或由计时器触发的核心动画。还有其他方法吗？

我所拥有的是：

```
drawingTimer = [NSTimer scheduledTimeWithTimeInterval:60.0 target:self
                selector:@selector(slideWords) userInfo:nil repeats:NO];

-void (slideWords){
 randomNumber = 1 + arc4Random()%2;

 if(randomNumber = 1){
    Redlabel.alpha = 1.0;
    RedLabel.frame = CGRectMake(0, -50, 320, 100);
    [UIWindow animateWithDuration:5.0 animations:^{
        Redlabel.alpha = 1.0;
        Redlabel.frame = CGRectMake(0,300,320,100);
    }completion:^(BOOL finished){
        [UIWindow animateWithDuration:0.5 delay:0.5 options:0 animations:^{
            Redlabel.alpha = 0.0;
        }completion:^(BOOL finished){
        }];
    }];
 }

 if(randomNumber = 2){
    GreenLabel.alpha = 1.0;
    GreenLabel.frame = CGRectMake(0, -50, 320, 100);
    [UIWindow animateWithDuration:5.0 animations:^{
        GreenLabel.alpha = 1.0;
        GreenLabel.frame = CGRectMake(0,300,320,100);
    }completion:^(BOOL finished){
        [UIWindow animateWithDuration:0.5 delay:0.5 options:0 animations:^{
            GreenLabel.alpha = 0.0;
        }completion:^(BOOL finished){
        }];
    }];
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:22:26.437

正如 danh 在他的评论中所说，你的两个 if 语句都应该是

```
if (randomNumber == value) 
```

单个等号不是比较运算符，而是赋值运算符。编译器应该给你一个警告。

其次，animateWithDuration 是 UIView 方法，而不是 UIWindow 方法。我猜编译器允许您编写的内容，因为 UIWindow 继承自 UIView，但是向未实现该方法的子类发送类消息是一个坏主意。

您的动画方法应阅读

```
[UIView animateWithDuration: x... 
```

第三，使用计时器触发的核心动画应该可以正常工作。但是，既然您的计时器不重复，为什么还要使用计时器呢？使用带延迟的动画方法的形式，让你的代码更干净。那么您根本不需要计时器或单独的“slideWords”方法。您的代码可能如下所示：

```
 randomNumber = 1 + arc4Random()%2;

 if(randomNumber = 1){
    Redlabel.alpha = 1.0;
    RedLabel.frame = CGRectMake(0, -50, 320, 100);
    [UIWindow animateWithDuration:5.0 
      delay: 60.0
      options: 0
      animations:^{
        Redlabel.alpha = 1.0;
        Redlabel.frame = CGRectMake(0,300,320,100);
    }completion:^(BOOL finished){
        [UIWindow animateWithDuration:0.5 delay:0.5 options:0 animations:^{
            Redlabel.alpha = 0.0;
        }completion:^(BOOL finished){
        }];
    }];
 }

 if(randomNumber = 2){
    GreenLabel.alpha = 1.0;
    GreenLabel.frame = CGRectMake(0, -50, 320, 100);
    [UIWindow animateWithDuration:5.0 
      delay: 60.0
      options: 0
      animations:^{
        GreenLabel.alpha = 1.0;
        GreenLabel.frame = CGRectMake(0,300,320,100);
    }completion:^(BOOL finished){
        [UIWindow animateWithDuration:0.5 delay:0.5 options:0 animations:^{
            GreenLabel.alpha = 0.0;
        }completion:^(BOOL finished){
        }];
    }];
 } 
```

第四：您应该遵循 Cocoa 中的强命名约定。方法名称和变量名称应以小写字母开头，名称中的每个单词都应大写。只有类名应该大写。（Apple 的 Core Foundation 函数遵循不同的命名规则，但那些不是方法，它们是 C 函数......）

所以你的“RedLabel”应该是“redLabel”，“GreenLabel”应该是“greenLabel”

# ssl - Astyanax 和 Cassandra 之间的安全通信

> ID：10998846
> 
> 赞同：4
> 
> 时间：2012-06-12T14:32:58.610
> 
> 标签：ssl, cassandra, astyanax

有没有人想出一种方法来保护 Cassandra 和 Astyanax 客户端之间的通信？SSL 最好能够进行客户端证书身份验证 + 加密......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T18:34:19.347

我假设您已经在 cassandra 中启用了 SSL 并拥有密钥库文件，如果没有关于[在 Astyanax 中启用 SSL 的完整博客，请点击此处。](http://lyubent.github.io/security/planetcassandra/2013/05/31/ssl-for-astyanax.html)

在构建 Keyspace 上下文时，您需要将密钥库文件及其密码传递给 Astyanax：

```
AstyanaxContext<Keyspace> ctx = new AstyanaxContext.Builder()
    .forKeyspace("MyKeyspace")
    // Config parameters
    .withConnectionPoolConfiguration(
         new com.netflix.astyanax.connectionpool.impl.ConnectionPoolConfigurationImpl("MyConnectionPool")
        .setSeeds("127.0.0.1")
        .setSSLConnectionContext(
             new SSLConnectionContext(
             "/path/to/certificate/cassandra_external_trust.jks", // tell Astyanax the fully qualified path to the keystore file C* is using
             "somePassword")))                                    // supply the keystore file's password too
    .buildKeyspace(ThriftFamilyFactory.getInstance());
ctx.start(); 
```

# regex - 删除字符串中的最后一个空行

> ID：10998847
> 
> 赞同：1
> 
> 时间：2012-06-12T14:33:02.870
> 
> 标签：regex, vb.net

我有一个字符串，其中包含许多从数据表转换而来的数据行。我的字符串的最后一行没有任何内容，没有空格或任何东西。我怎样才能摆脱这一行？我已经尝试过正则表达式，但似乎无法完成任何工作。我正在用VB编写。

代码原样：

```
Dim objSW As StreamWriter
Dim merRersult As String
Dim objSW As StreamWriter

Dim objFS As New FileStream(path, FileMode.CreateNew)
objFS.Close()
objSW = New StreamWriter(path, True)
merRersult = Delta.Utilities.Convert.DataTableToCSV(dt, True, sep)

'Write out mer file
 Dim merResultNoLines As String
 merResultNoLines = Regex.Replace(merRersult, "^\r?\n?$", "")

 objSW.WriteLine(merRersult)
 objSW.Close() 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T14:34:48.827

您应该尝试通过以下方式使用[String.TrimEnd](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx#Y0)方法：

```
merResultNoLines = merRersult.TrimEnd('\n', '\r') 
```

# weblogic - Weblogic - 从 10.3.0 升级到 10.3.4

> ID：10998850
> 
> 赞同：0
> 
> 时间：2012-06-12T14:33:09.953
> 
> 标签：weblogic

我目前正在开发 Weblogic 10.3.0，需要升级到 10.3.4 以满足项目要求。我尝试从 oracle 站点为 10.3.4 运行 1 GB exe，但它总是在提取时失败，并显示“状态代码 = 50”。

我猜这是因为我的机器上已经存在 WL 服务器。有人可以建议如何升级到 10.3.4 而不必卸载我的 10.3.0 版本。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:55:36.587

您可以尝试将其安装到不同的目录，更改 WebLogic 主目录，然后重新启动您的域以确认它可以正常工作。

# heroku - 错误 H13（连接关闭且无响应）Heroku

> ID：10998852
> 
> 赞同：5
> 
> 时间：2012-06-12T14:33:20.313
> 
> 标签：heroku, ruby-on-rails-3.2

我正在研究 Ruby on Rails。一个在本地服务器上运行良好的项目，当我在 heroku 上部署它时，它会出现以下错误。谢谢！

```
2012-06-12T14:19:23+00:00 heroku[router]: Error H13 (Connection closed without response) -> GET sheets-vip.heroku.com/ dyno=web.1 queue= wait= service= status=503 bytes=
2012-06-12T14:19:23+00:00 heroku[nginx]: 122.179.134.45 - - [12/Jun/2012:14:19:23 +0000] "GET / HTTP/1.1" 503 601 "-" "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0" myapp1101.heroku.com
2012-06-12T14:27:35+00:00 app[web.1]: !! Unexpected error while processing request: can't modify frozen array
2012-06-12T14:27:35+00:00 heroku[router]: Error H13 (Connection closed without response) -> GET sheets-vip.heroku.com/ dyno=web.1 queue= wait= service= status=503 bytes=
2012-06-12T14:27:35+00:00 heroku[nginx]: 122.179.134.45 - - [12/Jun/2012:14:27:35 +0000] "GET / HTTP/1.1" 503 601 "-" "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0" myapp1101.heroku.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:16:38.040

当您的应用程序依赖项的深层内容发生故障时，会发生此错误。例如，当传入请求很大时（即它是一个 +100K 的 JSON 文档），我们看到了这个错误。我们可以通过设置来解决这个问题：

```
Rack::Utils.key_space_limit = some appropriate value 
```

也就是说，H13 是机架错误的 b/c。尝试增加应用程序的登录，因为这可能指向错误（这就是我们最终将 Rack 密钥空间限制归零的方式）。

# jquery - jQuery 宽度返回像素而不是 %

> ID：10998854
> 
> 赞同：1
> 
> 时间：2012-06-12T14:33:27.687
> 
> 标签：jquery, jquery-ui

```
 <div class="ui-progress" style="width: 10%;">

 console.log($(this).width()); 
```

返回以像素为单位的宽度而不是 %。我如何获得百分比？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T14:34:34.320

尝试这个：

```
var width = $('.ui-progress').width();
var parentWidth = $('.ui-progress').offsetParent().width();
var percent = 100*width/parentWidth; 
```

或者

```
var width = ( 100 * parseFloat($('.ui-progress').css('width')) / parseFloat($('.ui-progress').parent().css('width')) ) + '%'; 
```

### 笔记

您可以使用`.offsetParent()`if parent of `.ui-progress`has CSS `position:absolute`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:34:42.680

它返回以像素为单位的宽度，因为这就是浏览器解释百分比的方式。它可能在您的 CSS 中显示为百分比，但在浏览器显示时会变成像素值。

console.log($(this).attr("style"));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T11:23:53.440

如果 div 被隐藏，您可以获得 % 。当 div 被隐藏时 $(selector).width() 返回百分比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-04T13:57:43.103

这是解决方案，

```
var xdom = $('.ui-progress')[0];
var percentWidth = xdom.style['width']; 
```

或者

```
var percent_width=xdom.style.width; 
```

# c# - 通过 POST 上传 ASP 文件将 postdata 转换为文件

> ID：10998859
> 
> 赞同：0
> 
> 时间：2012-06-12T14:33:44.593
> 
> 标签：c#, asp.net, post, file-upload

我有一个小 C# API，到目前为止，它一直在做 GET 并且运行良好，但我想添加客户端能够通过 POST 上传文件的能力，还没有网络表单或任何附加到 API 的东西所以现在我只是使用 Fiddler 通过 POST 上传文件

```
public override string PostAction(string parameters, System.Collections.Specialized.NameValueCollection querystring, string postdata)
    { ..... } 
```

当我调试时，我看到 postdata 包含 Fiddler 发送的整个正文，我假设它是 base 64。

来自 Fiddler2 的请求正文：

```
---------------------------acebdf13572468
Content-Disposition: form-data; name="fieldNameHere"; filename="sample_iTunes.mov"
Content-Type: video/quicktime

<@INCLUDE *C:\Users\Public\Videos\Sample Videos\sample_iTunes.mov*@>
---------------------------acebdf13572468-- 
```

我可以看到 postdata =

```
"---------------------------acebdf13572468\r\nContent-Disposition: form-data; name=\"fieldNameHere\"; filename=\"sample_iTunes.mov\"\r\nContent-Type: video/quicktime\r\n\r\n\0\0\0 ftypqt   \0qt  \0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\bwide\01�4mdat\0\0�\0\0��\0\0\0\0\0 \0Ĉ�\f�\n1\0\0�3ivx@�\0\0�����x�o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6���o�m����6�(a lot more stuff)----acebdf13572468--\r\n" 
```

有没有从这里获取文件的正确方法？或者我是否需要尝试对文件输出进行子串化（从 quicktime 结束 \r\n\r\n 到结束 ----acebdf13572468--\r\n），然后执行 Bytes[] file = Convert.从Base64字符串？

谢谢

# django - django 关于 ajaxSend... 我到底把它放在哪里？

> ID：10998861
> 
> 赞同：0
> 
> 时间：2012-06-12T14:33:53.713
> 
> 标签：django

我把在这里找到的 ajaxSend 代码放在哪里：

[https://docs.djangoproject.com/en/1.2/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/1.2/ref/contrib/csrf/#ajax)

我的意思是，我有一个基本的 htm 文件，它有一个部分，看起来有点像这样：

```
<script>
    $(function() {
        $("#loginThing").click(function(){
            ... and then i define buttons to be pressed etc etc
    });
</script> 
```

所以呢？我把代码放在 ${function(){}); 上面吗？调用（但在脚本标签中）？我把它*放在*函数调用中吗？我是否必须以任何方式改变它 - 它被称为的方式，也许 - 以任何方式或形式？

我将它卡在 $(function()) 调用上方（但在脚本标记中），但它不像我的 ajax 调用的行为有任何不同。事实上，我没有最模糊的概念如何测试这是否在做任何事情。我没有使用任何测试代码（我知道，很糟糕。但这是一个学习进步。而且，我不喜欢测试代码）。有什么方法可以“手动”测试吗？就像，只使用Firefox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:57:08.020

> 我在哪里放 ajaxSend 代码

它只需要在您当前的函数定义之外。

```
<script>
    $(function() {
        $("#loginThing").click(function(){
            // ... and then i define buttons to be pressed etc etc
    });

    $(document).ajaxSend(function(event, xhr, settings) {
        // ... Rest of function goes here
    });
</script> 
```

> 有什么方法可以“手动”测试吗？就像，只使用Firefox？

我不能告诉你如何在 Firefox 中测试它，因为我不使用它。但是，Chrome 有一个非常适合此功能的内置界面。

在 Chrome 中打开您的页面并点击 Command-Option-I（在 Mac 上，Windows 可能类似）。转到网络选项卡。在最左边的列中，您应该会看到 POST 请求的 url。点击它。它将为您提供您需要探索的所有详细信息、Cookie（查找`csrftoken`以确保页面中存在 Django 的 csrf cookie）、请求和响应标头等。

> 它不像我的 ajax 调用的行为有任何不同。事实上，我没有最模糊的概念如何测试这是否在做任何事情。

他们应该是，你只是不能“看到”它。使用上述 Chrome 工具查看与服务器的通信。要确认它“正在做任何事情”：

1.  从 Django 站点中删除刚刚添加的 javascript 代码
2.  对受 csrf 保护的表单执行 AJAX POST
3.  请注意，POST 失败

# objective-c - iOS：我找不到我的文件？

> ID：10998865
> 
> 赞同：0
> 
> 时间：2012-06-12T14:34:02.330
> 
> 标签：objective-c, ios, file, path, nsfilemanager

我有这个树状：

```
Project Folder
      build
      Project
      ProjectTests
      Pictures 
```

在子文件夹“项目”中，我有 AppDelegate 和一个名为“Alert.txt”的文件。我想从我的 AppDelegate 访问该文本文件，所以我尝试了：

```
- (void) applicationDidFinishLaunching:(UIApplication *)application
{
    NSLog(@"test");
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath: @"Alert.txt" ] == YES)
        NSLog(@"good");

} 
```

当然它打印“测试”，但不是“好”。什么是正确的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:36:28.547

要获取文件的路径，请使用

```
NSString * myFile = [[NSBundle mainBundle]pathForResource:@"Alert" ofType:@"txt"];    
NSFileManager *fileManager = [NSFileManager defaultManager];
if ([fileManager fileExistsAtPath: myFile ])
    NSLog(@"good"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:38:40.870

尝试以下操作：

`NSString *path = [[NSBundle mainBundle] pathForResource:@"Alert" ofType:@"txt];`

# twitter-bootstrap - Twitter Bootstrap 响应式布局在 IE8 或更低版本中不起作用

> ID：10998877
> 
> 赞同：56
> 
> 时间：2012-06-12T14:34:45.763
> 
> 标签：twitter-bootstrap, css, internet-explorer-8, media-queries

我使用 twitter bootstrap 开发了一个站点，似乎响应式布局部分在 IE8 及以下的所有 IE 浏览器中都被破坏了。这些浏览器不支持吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-03T20:13:40.793

如果你想有更好的性能并且你的结构不是太复杂。

你可以试试[Respond.JS](https://github.com/scottjehl/Respond/)

来自作者：

> 这不是唯一的 CSS3 媒体查询 polyfill 脚本。但这该死的可能是最快的。
> 
> 如果您正在寻找更强大的 CSS3 媒体查询支持，您可以查看[http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/)。在测试中，我发现该脚本在渲染复杂的响应式设计（文件大小和性能方面）时明显变慢，但它确实支持比该脚本更多的媒体查询功能。给作者的大礼帽！:)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-12T15:32:59.910

要在 IE 8 及更低版本中支持`@media`查询，请查看 [css3-mediaqueries-js](http://code.google.com/p/css3-mediaqueries-js/)。

***Wouter van der Graaf的***css3-mediaqueries.js**是一个 JavaScript 库，可以让 IE 5+、Firefox 1+ 和 Safari 2 透明地解析、测试和应用 CSS3 媒体查询。Firefox 3.5+、Opera 7+、Safari 3+ 和 Chrome 已经提供原生支持。**

 **PS：我使用**Twitter Bootstrap**和这个插件，效果很棒！希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-04T06:56:21.483

这些是我为使其工作而采取的步骤：

看看 IE8 中的 response.js 演示页面：
[https ://rawgithub.com/scottjehl/Respond/master/test/test.html](https://rawgithub.com/scottjehl/Respond/master/test/test.html)

它可以通过将 response.js 下载到您的供应商/资产或类似的地方来在本地工作。

禁用您的本地引导程序并在您的 css 中尝试此操作：

```
/*styles for 800px and up @ 16px!*/
@media screen and (min-width: 50em){
  body {
    background: blue;
  }
} 
```

有用！

因为我使用的是cdn，所以我需要在本地下载并托管它：http:
[//getbootstrap.com/getting-started/#download](http://getbootstrap.com/getting-started/#download)

所以，它适用于这些：

```
= stylesheet_link_tag 'bootstrap.min.css'
= stylesheet_link_tag 'bootstrap-theme.min.css'
= stylesheet_link_tag 'my-css'
= javascript_include_tag 'respond.min' 
```

您还需要摆脱任何 @import 声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T08:51:24.467

我已经尝试了上述所有方法，并且效果很好，但是速度很慢。我提供下一种方法。我们应该分解包含 @media 的 css 文件并将每个规则插入到单独的文件中。然后我们应该根据浏览器屏幕宽度有条件地上传每个文件。所有这些操作都将执行脚本 cload.js。下载 cload.js 并阅读如何使用它，你可以 [在这里](http://webbystep.ru/all-posts/13-media-ie8-bootstrap)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T10:30:22.740

~~[你们都应该阅读这个论坛帖子](https://groups.google.com/d/msg/twitter-bootstrap/aPxuIgbrtvc/WSMJvwZ9E18J)。~~

它非常清楚地解释了 IE 和 Twitter Bootstrap 之间的挑战。它还为您提供实际可行的解决方案。

**引用：**

> [这里的问题是，在像http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)这样的官方页面上， 它声称可以在所有浏览器中运行，甚至是 IE7。理论上可以，但是在进行响应式开发时，您必须围绕某种思维框架进行设计和开发。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-13T16:55:51.657

我在以下位置使用了 html5shiv：

[https://code.google.com/p/html5shiv/](https://code.google.com/p/html5shiv/)

这对我有用。它也可以使用凉亭。**

# php - stumbleupon 的 API - 获取页面的 stumbleupon 共享数量

> ID：10998880
> 
> 赞同：1
> 
> 时间：2012-06-12T14:34:52.633
> 
> 标签：php, javascript

是否有用于获取页面的 stumbleupon 共享数量的 API？我想提供一个页面的完整 url 并获取它在 stumbleupon 上获得的共享数量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:44:43.010

我们没有 API 可以让您查看特定页面的共享数量。我们提供的最接近的东西是我们的徽章，它可以让您查看您的一个页面的喜欢数量。您可以在[http://www.stumbleupon.com/dt/badges](http://www.stumbleupon.com/dt/badges)进行设置。

# javascript - 使用 JavaScript 访问输入名称数组

> ID：10998881
> 
> 赞同：0
> 
> 时间：2012-06-12T14:34:53.117
> 
> 标签：javascript, jquery, html, forms, dom

我有以下 HTML 表单

```
<form action="#" method="post">

 <table>
 <tr>  
  <td><label>Product:<label> <input type="text" /></td>
  <td><label>Price:<label> <input type="text" /></td>
  <td><label>Quantity:<label> <input type="text"/></td>
  <td><label>Amount:<label> <input type="text" name="amount[]"/></td>
 </tr>

 <tr>  
 <td><label>Product:<label> <input type="text" /></td>
 <td><label>Price:<label> <input type="text" /></td>
 <td><label>Quantity:<label> <input type="text"/></td>
 <td><label>Amount:<label> <input type="text" name="amount[]"/></td>
 </tr>

 <!---only two rows have been created by the user -->

 <input type="button" value="Add product" onClick="addProductRow()"/> 
 <input type="submit" value="Submit"/>
 </table>  
</form> 
```

输入字段由用户动态创建（有用于向页面添加行的按钮）。当用户添加价格和数量时，金额（价格*数量）必须显示在相关金额字段中。

我的问题是，如何访问每个金额字段以使用 JavaScript 或 jQuery 插入总金额。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:41:57.823

使用 jQuery（如果你没有 id 并且页面上只有一个表）

```
var total;
$("table").find("tr").each(function(index, elem){
    total = total + parseInt($("td:eq(3) input", this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:36:32.540

在这种情况下，我会使用`parentNode`直到您到达包含`<tr>`，然后使用该表行节点来搜索输入字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:37:23.273

您还应该为每个字段添加一个 ID（一个数组名称`quantityfields[]`，`pricefields[]`也可以使用）并使用标准`document.getElementById("quantityfields[0]")`

我还看到`document.getElementsByName(name)`which 将返回一个数组，您可以遍历并做自己的事情，并且您不必使用额外的 ID，但我认为`getElementById`更常见。

# c++ - 如何在 C++ 中从 ASN1_ENUMERATED unsing openssl 中获取值

> ID：10998884
> 
> 赞同：0
> 
> 时间：2012-06-12T14:35:11.853
> 
> 标签：c++, cryptography, openssl, asn.1

我在 openssl 的页面上没有找到关于如何使用 ASN1_ENUMERATED 的文档。

使用 BERViewer 可视化结构：
![在此处输入图像描述](../Images/f4594492b739746a576c538e5adda631.png)

所以我用：

```
ASN1_SEQUENCE_ANY *asn1SequenceAny = sk_ASN1_TYPE_new_null();
asn1SequenceAny = d2i_ASN1_SEQUENCE_ANY(&asn1SequenceAny, (const unsigned char**)&data,len);

ASN1_TYPE *asn1Type = NULL;
asn1Type = sk_ASN1_TYPE_pop(asn1SequenceAny);
if(asn1Type->type == V_ASN1_ENUMERATED)
{
    asn1Type->value.enumerated->data; // How to get sequence inside [0] ?
} 
```

磁盘“asn1Type->value.enumerated->data”上的枚举数据如下所示：
![在此处输入图像描述](../Images/6050449cf2cacbb3653ae82ab1ee085d.png)

如何从 [0] 获取 ASN1_SEQUENCE_ANY：

```
SEQUENCE
     |__SEQUENCE
     |__SEQUENCE 
```

我试过：ASN1_ENUMERATED_get，返回-1。为什么不是零？

文章非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:37:41.190

OpenSSL 提供了许多函数来解码这些消息。您必须知道对其进行编码的相应函数是什么，因为解码例程还解析输出以确保解码的消息与您调用的解码方法所暗示的预期类型相匹配。你似乎想要：

```
d2i_ASN1_OBJECT (3ssl) - ASN1 OBJECT IDENTIFIER functions 
```

但如果这不正确，您可以搜索 OpenSSL 文档`d2i`，您会发现很多功能可以尝试。

如果您下载[OpenSSL 源代码](http://www.openssl.org/source/)，解压后，查看`apps`子目录，并通读`asn1pars.c`文件。或者，您可以点击[此链接](https://code.google.com/p/commitmonitor/source/browse/trunk/common/openssl/apps/asn1pars.c?spec=svn629&r=629)在线查看。希望这可以帮助！

# wpf - WPF OpacityMask 未按预期运行

> ID：10998894
> 
> 赞同：0
> 
> 时间：2012-06-12T14:35:41.680
> 
> 标签：wpf, opacitymask

我正在为 WPF 应用程序开发倒计时控件。以下 xaml 演示了我所追求的：

```
<Canvas>
    <Canvas>
        <Ellipse Width="110" Height="110" Fill="Black" Canvas.Left="95" Canvas.Top="95" />
        <Ellipse Width="100" Height="100" Fill="Red" Canvas.Left="100" Canvas.Top="100" />
        <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="72" Canvas.Left="131" Canvas.Top="100">3</TextBlock>
    </Canvas>
    <Canvas>
        <Path Stroke="Blue" Fill="White">
            <Path.Data>
                <PathGeometry>
                    <PathFigure StartPoint="150,150">
                        <LineSegment Point="200,150" />
                        <ArcSegment x:Name="arc1" Point="200,150" Size="50,50" SweepDirection="Clockwise" />
                        <ArcSegment x:Name="arc2" Point="200,150" Size="50,50" SweepDirection="Clockwise" />
                        <LineSegment Point="150,150" />
                    </PathFigure>
                </PathGeometry>
            </Path.Data>
            <Path.Triggers>
                <EventTrigger RoutedEvent="Path.Loaded">
                    <BeginStoryboard>
                        <Storyboard Duration="0:0:1" Storyboard.TargetProperty="Point" RepeatBehavior="Forever">
                            <PointAnimationUsingPath Duration="0:0:0.5" Storyboard.TargetName="arc1">
                                <PointAnimationUsingPath.PathGeometry>
                                    <PathGeometry>
                                        <PathFigure StartPoint="200,150">
                                            <ArcSegment Size="50,50" Point="100,150" SweepDirection="Clockwise" />
                                        </PathFigure>
                                    </PathGeometry>
                                </PointAnimationUsingPath.PathGeometry>
                            </PointAnimationUsingPath>
                            <PointAnimationUsingPath Duration="0:0:0.5" Storyboard.TargetName="arc2">
                                <PointAnimationUsingPath.PathGeometry>
                                    <PathGeometry>
                                        <PathFigure StartPoint="200,150">
                                            <ArcSegment Size="50,50" Point="100,150" SweepDirection="Clockwise" />
                                        </PathFigure>
                                    </PathGeometry>
                                </PointAnimationUsingPath.PathGeometry>
                            </PointAnimationUsingPath>
                            <PointAnimationUsingPath BeginTime="0:0:0.5" Duration="0:0:0.5" Storyboard.TargetName="arc2">
                                <PointAnimationUsingPath.PathGeometry>
                                    <PathGeometry>
                                        <PathFigure StartPoint="100,150">
                                            <ArcSegment Size="50,50" Point="200,150" SweepDirection="Clockwise" />
                                        </PathFigure>
                                    </PathGeometry>
                                </PointAnimationUsingPath.PathGeometry>
                            </PointAnimationUsingPath>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Path.Triggers>
        </Path>          
    </Canvas>
</Canvas> 
```

现在，我不想让整个事情变白，而是想“揭示”倒计时中的下一个数字。我认为使用 OpacityMask 会起作用，但是当我尝试时，事情变得很奇怪。这是我正在处理的 xaml：

```
<Canvas>
    <Canvas>
        <Ellipse Width="110" Height="110" Fill="Black" Canvas.Left="95" Canvas.Top="95" />
        <Ellipse Width="100" Height="100" Fill="Red" Canvas.Left="100" Canvas.Top="100" />
        <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="72" Canvas.Left="131" Canvas.Top="100">3</TextBlock>
    </Canvas>
    <Canvas>
        <Ellipse Width="110" Height="110" Fill="Black" Canvas.Left="95" Canvas.Top="95" />
        <Ellipse Width="100" Height="100" Fill="Yellow" Canvas.Left="100" Canvas.Top="100" />
        <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="72" Canvas.Left="131" Canvas.Top="100">2</TextBlock>
        <Canvas.OpacityMask>
            <VisualBrush>
                <VisualBrush.Visual>
                    <Path Stroke="Blue" Fill="White">
                        <Path.Data>
                            <PathGeometry>
                                <PathFigure StartPoint="150,150">
                                    <LineSegment Point="200,150" />
                                    <ArcSegment x:Name="arc1" Point="200,150" Size="50,50" SweepDirection="Clockwise" />
                                    <ArcSegment x:Name="arc2" Point="200,150" Size="50,50" SweepDirection="Clockwise" />
                                    <LineSegment Point="150,150" />
                                </PathFigure>
                            </PathGeometry>
                        </Path.Data>
                        <Path.Triggers>
                            <EventTrigger RoutedEvent="Path.Loaded">
                                <BeginStoryboard>
                                    <Storyboard Duration="0:0:10" Storyboard.TargetProperty="Point" RepeatBehavior="Forever">
                                        <PointAnimationUsingPath Duration="0:0:5" Storyboard.TargetName="arc1">
                                            <PointAnimationUsingPath.PathGeometry>
                                                <PathGeometry>
                                                    <PathFigure StartPoint="200,150">
                                                        <ArcSegment Size="50,50" Point="100,150" SweepDirection="Clockwise" />
                                                    </PathFigure>
                                                </PathGeometry>
                                            </PointAnimationUsingPath.PathGeometry>
                                        </PointAnimationUsingPath>
                                        <PointAnimationUsingPath Duration="0:0:5" Storyboard.TargetName="arc2">
                                            <PointAnimationUsingPath.PathGeometry>
                                                <PathGeometry>
                                                    <PathFigure StartPoint="200,150">
                                                        <ArcSegment Size="50,50" Point="100,150" SweepDirection="Clockwise" />
                                                    </PathFigure>
                                                </PathGeometry>
                                            </PointAnimationUsingPath.PathGeometry>
                                        </PointAnimationUsingPath>
                                        <PointAnimationUsingPath BeginTime="0:0:5" Duration="0:0:5" Storyboard.TargetName="arc2">
                                            <PointAnimationUsingPath.PathGeometry>
                                                <PathGeometry>
                                                    <PathFigure StartPoint="100,150">
                                                        <ArcSegment Size="50,50" Point="200,150" SweepDirection="Clockwise" />
                                                    </PathFigure>
                                                </PathGeometry>
                                            </PointAnimationUsingPath.PathGeometry>
                                        </PointAnimationUsingPath>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Path.Triggers>
                    </Path>
                </VisualBrush.Visual>
            </VisualBrush>
        </Canvas.OpacityMask>                      
    </Canvas>
</Canvas> 
```

我不确定如何描述正在发生的事情，或者它为什么会这样，但这不是我想要的，也不是我所期望的。我缺少一些简单的东西吗？或者任何人都可以提供一种替代方法来完成我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:49:34.000

我发现了这个问题。它与我用来创建不透明蒙版的视觉画笔的视口/视框有关。这是相关的变化：

```
<Canvas.OpacityMask>
            <VisualBrush Viewbox="0,0,300,300" ViewboxUnits="Absolute" Viewport="0,0,300,300" ViewportUnits="Absolute"> ... 
```

无论如何，我都不是 WPF 专家，但我对出了什么问题的理解如下。画笔的默认视口从边界容器的左上角开始。在我的情况下，边界容器是我制作动画的路径。在动画期间，容器的左上角发生了变化。组成路径的不同部分是相对于这个不断变化的左上点定义的。基本上，它们是相对于移动目标绘制的。视图框设置表明我们希望使用其使用的相同坐标系来处理整个原始视觉。

任何对正在发生的事情有更好理解的人都可以给出更清晰的解释，随时编辑此答案或添加评论。

# spring - @Autowired 在 DelegatingFilterProxy 中

> ID：10998896
> 
> 赞同：3
> 
> 时间：2012-06-12T14:35:47.277
> 
> 标签：spring, jakarta-ee, spring-mvc

我有以下问题：

我正在使用 Spring MVC 3 开发基于 Web 的应用程序。在我的 web.xml 配置中，我有两个上下文（root-context.xml -Global Context - 由 ContextLoadListener 和 servlet-context.xml - 用于 DispatcherServlet）。

但是，在我的配置中，我需要一个使用 DelegatingFilterProxy 实现的过滤器，并配置如下：

```
<filter>
 <filter-name>cheapigFilter</filter-name>
 <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>      
</filter> 
```

此过滤器指向一个名为 SegrancaFilter 的类，该类从 OncePerRequestFilter 扩展而来。但是，为了让这个过滤器执行它的任务，它需要访问 servlet-context.xml 中的 bean @Autowired 并且过滤器本身必须是 Spring 托管的 bean，所以我必须用 @Component 标记它（这不起作用，因为我既没有在根上下文中设置也没有将过滤器设置为 XML bean）。

如果我放置

```
<mvc:annotation-driven /> <context:component-scan base-package="br.com.cheapig" /> 
```

在我的根上下文中，我所有的 bean 都将连接两次，导致应用程序调用 bean 方法两次。那是因为我在 root-context.xml 和 servlet-context.xml 中会有相同的配置。但是，如果我删除 servlet-context.xml 的此配置并将其保留在 root-context.xml 中，则会出现以下错误：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 51 more 
```

为了提供更多信息，我的过滤器实现如下：

```
package br.com.cheapig.seguranca;

import java.io.IOException;
import java.util.Date;
import java.util.Locale;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.i18n.LocaleContextHolder;
import org.springframework.stereotype.Component;
import org.springframework.web.filter.OncePerRequestFilter;
import org.springframework.web.servlet.LocaleResolver;

import br.com.cheapig.controlador.HistoricoVisitasController;
import br.com.cheapig.dominio.HistoricoVisitas;
import br.com.cheapig.dominio.Usuario;
import br.com.cheapig.exception.ControleAcessoException;
import br.com.cheapig.util.CheapigUtil;
import br.com.cheapig.util.ConstantesAmbiente;
import br.com.cheapig.util.ConstantesGenericas;
import br.com.cheapig.util.ConstantesHistoricoVisitas;
import br.com.cheapig.util.ConstantesSessao;
import br.com.cheapig.util.WorkflowUtil;
import br.com.cheapig.workflow.Request;

/**
 * Classe responsável por fazer a filtragem do controle de acesso aos recursos do site
 * 
 * @author Guilherme Macedo
 * @since Apr 30, 2012
 */
@Component(value = "cheapigFilter")
public class SegurancaFilter extends OncePerRequestFilter {

    @Autowired
    private ConstantesAmbiente constantesAmbiente;

    @Autowired
    private LocaleResolver localeResolver;

    @Autowired
    private ControleAcesso controleAcesso;

    @Autowired
    private HistoricoVisitasController historicoVisitasController;

    /**
     * Cria um novo objeto SegurancaFilter
     */
    public SegurancaFilter() {
        super();
    }

    /**
     * @see org.springframework.web.filter.OncePerRequestFilter#doFilterInternal(javax.servlet.http.HttpServletRequest,
     *      javax.servlet.http.HttpServletResponse, javax.servlet.FilterChain)
     */
    @SuppressWarnings("unchecked")
    @Override
    protected void doFilterInternal(HttpServletRequest pRequest, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        Locale locale = new Locale("pt", "br");
        this.localeResolver.setLocale(pRequest, response, locale);
        LocaleContextHolder.setLocale(locale);
        String path = pRequest.getRequestURI().substring(pRequest.getContextPath().length());
        String uri = pRequest.getRequestURI();
        HttpSession vSession = pRequest.getSession();
        String appId = (String) vSession.getAttribute("facebookAppId");
        if(appId == null || appId.isEmpty()){
            vSession.setAttribute("facebookAppId", this.constantesAmbiente.getFacebookAppId()); 
        }

        if (path.startsWith("/resources") || path.startsWith("/css")) {
            filterChain.doFilter(pRequest, response); // Goes to default servlet.
        } else {
            this.salvaVisita(pRequest);

            if (uri.equals("/") || uri.equals("/cheapig/")) {
                pRequest.getSession().setAttribute("loadCidadeList", true);
            } else {
                pRequest.getSession().setAttribute("loadCidadeList", false);
            }
            String vUrl = uri.substring("/cheapig".length());
            String vLogado = (String) vSession.getAttribute(ConstantesSessao.SESSION_LOGADO);

            if (vLogado == null) {
                vLogado = ConstantesGenericas.SIGLA_NAO;
                vSession.setAttribute(ConstantesSessao.SESSION_LOGADO, ConstantesGenericas.SIGLA_NAO);
            }

            if (vLogado.equals(ConstantesGenericas.SIGLA_SIM) && vUrl.contains("login")) {
                String vRedirectURL = "/cheapig/";  
                response.sendRedirect(vRedirectURL);
            }else{
                Usuario vUsuario = (Usuario) vSession.getAttribute(ConstantesSessao.SESSION_USUARIO);

                try {
                    if (vLogado.equalsIgnoreCase(ConstantesGenericas.SIGLA_NAO)) {
                        this.controleAcesso.verificaPermissoesAnonimas(vUrl);
                    } else {
                        this.controleAcesso.verificaAcesso(vUsuario, vUrl);
                    }                   
                    pRequest.getRequestDispatcher(uri).forward(pRequest, response);
                } catch (ControleAcessoException e) {
                    Request vRequest = new Request();
                    vRequest.setRequestURI(uri);
                    vRequest.setRequestURL(vUrl);
                    vRequest.setRequestParameters(WorkflowUtil.montaParametrosURLParameterMap(pRequest.getParameterMap()));
                    vRequest.setRequestMethod(pRequest.getMethod());
                    vSession.setAttribute("COMING_REQUEST", vRequest);
                    response.sendRedirect("/cheapig/loginTela");
                    return;
                }   
            }

        }
    }

    public ControleAcesso getControleAcesso() {
        return this.controleAcesso;
    }

    public LocaleResolver getLocaleResolver() {
        return this.localeResolver;
    }

    @Override
    protected void initFilterBean() throws ServletException {

    }

    /**
     * Coleta as informações do usuário e persiste no histórico de visitas
     * 
     * @param request
     *            HttpServletRequest
     */
    private void salvaVisita(HttpServletRequest request) {
        String locale = request.getLocale().getLanguage();
        String browser = CheapigUtil.identificaBrowser(request.getHeader(ConstantesHistoricoVisitas.HTTP_BROWSER));
        String metodo = request.getMethod();
        String ip = request.getRemoteAddr();
        String pagAcessada = request.getRequestURI();
        String host = request.getRemoteHost();

        HistoricoVisitas historico = new HistoricoVisitas();
        historico.setLinguagemNavegador(locale);
        historico.setBrowser(browser);
        historico.setDataAcesso(new Date());
        historico.setHost(host);
        historico.setIpVisitante(ip);
        historico.setPagAcessada(pagAcessada);
        historico.setRequestMethod(metodo);

        this.historicoVisitasController.cadastrarHistoricoVisitas(historico);
    }

    public void setControleAcesso(ControleAcesso controleAcesso) {
        this.controleAcesso = controleAcesso;
    }

    public void setLocaleResolver(LocaleResolver localeResolver) {
        this.localeResolver = localeResolver;
    }
} 
```

我的根上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/aop       
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        ">

    <mvc:annotation-driven />
    <context:component-scan base-package="br.com.cheapig" />

    <!-- <import resource="cheapig/servlet-context.xml" /> -->

    <!-- Root Context: defines shared resources visible to all other web components -->
    <!-- Configurações de Internacionalização -->
    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="latin1" />
    </bean>

    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>

    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
        <property name="defaultLocale" value="pt" />
    </bean>

    <bean id="handlerMapping"
        class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="interceptors">
            <ref bean="localeChangeInterceptor" />
        </property>
    </bean>

    <!-- Mapeamento da view "rssViewer" para o bean "rssViewer" -->
    <bean class="org.springframework.web.servlet.view.BeanNameViewResolver" />
    <bean id="rssViewer" class="br.com.cheapig.servico.CustomRssViewer" />

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <!-- one of the properties available; the maximum file size in bytes -->
        <property name="maxUploadSize" value="3145728" />
        <property name="maxInMemorySize" value="3145728"></property>
    </bean>

    <bean id="velocityEngine"
        class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
        <property name="velocityProperties">
            <value>
                resource.loader=file
                file.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
            </value>
        </property>
    </bean>
    <!-- <bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean"> 
        <property name="velocityProperties"> <value> resource.loader=class class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader 
        </value> </property> <property name="resourceLoaderPath"> <value>/WEB-INF/velocity</value> 
        </property> </bean> -->

    <!-- <bean id="controleAcesso" class="br.com.cheapig.seguranca.ControleAcesso"> 
        <bean id="cheapigFilter" class="br.com.cheapig.seguranca.SegurancaFilter" 
        > <property name="controleAcesso" ref="controleAcesso" /> <property name="localeResolver" 
        ref="localeResolver" /> </bean> -->

</beans> 
```

我的 servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
<!--    <annotation-driven /> -->
    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Imports user-defined @Controller beans that process client requests -->
    <beans:import resource="controllers.xml" />
    <beans:import resource="hibernateMySQL5.xml"/>  
    <beans:import resource="integracaoTiles2.xml"/>
    <beans:import resource="servicoEmail.xml"/>

    <!-- <context:component-scan base-package="br.com.cheapig" /> -->
    <task:annotation-driven/>
</beans:beans> 
```

关键是：如何配置我的应用程序以便@Autowired 在我的过滤器中工作而无需多次加载我的bean？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:57:03.327

您可以有选择地进行组件扫描。在您的根上下文中：

```
<context:component-scan base-package="...">
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan> 
```

在你的 servlet-context.xml

```
<context:component-scan base-package="..." use-default-filters="false">
    <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation" />
    <context:include-filter expression=".*Filter" type="regex" />
</context:component-scan> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:35:48.043

过滤器被设计为被调用两次。查看[此页面上的图表](http://www.springwebdevelopment.com/all-about-filters)：

FilterX ---> FilterY ---> Servlet ---> FilterY ---> FilterX

# android - 在应用程序打开之前服务不断崩溃

> ID：10998897
> 
> 赞同：0
> 
> 时间：2012-06-12T14:35:51.707
> 
> 标签：android, android-service

我无法启动`Service`. 它甚至在应用程序启动之前就崩溃了。

```
 Intent repSer = new Intent(this,repService.class);

      startService(repSer); 
```

这就是它`Service`本身。：

```
public class repService extends Service {
@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    while(true){
        Thread timer = new Thread(){
            public void run(){
                try {
                    sleep(5000);
                    // do something

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } finally {
                    // do something
                }
            }
        };
        timer.start();  
    }   
}
} 
```

也许这是错的？我的清单条目：

```
 <service android:name = ".repService"/>  
  </application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:38:53.380

您只是不断地循环遍历 while 并在内部使用计时器启动新线程。您可能正在超载线程。只要 while() 语句可以循环，您就可以创建另一个线程并启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:51:31.877

如果您尝试执行此代码，您肯定会得到`java.lang.OutOfMemoryError` 因为循环永远不会中断。

这是您的应用程序崩溃的主要原因。

还要确保您已`<service android:name=".repService" />`在清单中定义

您的清单应如下所示

![在此处输入图像描述](../Images/acb8fbeb6b7c6828baeb020043e3a1ec.png)

# xcode - 在 Xcode 中将多个警报添加到单个警报视图

> ID：10998898
> 
> 赞同：1
> 
> 时间：2012-06-12T14:35:52.020
> 
> 标签：xcode, alert, alertview

首先，我对 xcode 相当陌生。我正在尝试将多个警报添加到单个视图。我正在为 ipad 创建一个表单，允许用户在文本框中输入信息。由于需要填写多个文本框，我不希望弹出多个警报框来显示每个错误，而是希望一个警报视图显示多个错误。下面的注释代码是我想象中的写法

```
- (IBAction)showMessage:(id)sender {
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Name" //"Address" 
                                   //if name=nil  message:@"PLease fill out your name"
                               //if address=nilmessage:@"PLease fill out your address"

delegate:nil
                                        cancelButtonTitle:@"OK"
                                        otherButtonTitles:nil];

[message show]; 
```

}

*是否可以在消息之前和之后放置 if 语句才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:58:40.983

您可以通过执行以下操作附加消息乘法：

```
 - (IBAction)showMessage:(id)sender {
    NSString *theMessage = @"PLease fill out your ";
    BOOL nameFlag = FALSE;
    if(name.length == 0)
    {  nameFlag = TRUE // For appending message
      [theMessage stringByAppendingFormat:@"name"];
    }

    if(address.length == 0)
    {
       if(nameFlag){ 
      [theMessage stringByAppendingFormat:@"& address"
       }
       else
       {    
         [theMessage stringByAppendingFormat:@"address"
        }
    }

    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Message"
                                            message:theMessage
                                            delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];  
    [message show];
    [message release];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:39:43.023

像这样做：

```
- (IBAction)showMessage:(id)sender {
        NSString *theMessage = @"";
        if (textField.text.length == 0) {
        theMessage = @"hey";
        } else if (textField2.text.length == 0) {
        theMessage = @"hey2";
        } else if (textField.text.length == 0) && (textField2.text.length == 0) {
        theMessage = @"doubleHey";
        }

        UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Name"
                                                message:theMessage
                                                delegate:nil
                                                cancelButtonTitle:@"OK"
                                                otherButtonTitles:nil];  
        [message show];
        [message release];
} 
```

# wpf - WPF：如何将命令应用于嵌套列表框的上下文菜单

> ID：10998899
> 
> 赞同：1
> 
> 时间：2012-06-12T14:35:58.017
> 
> 标签：wpf, listbox

我正在使用 PRISM 开发 wpf 应用程序。这是我的第一个 WPF 应用程序，我发现自己处于无法前进的境地。

我的场景是这样的，我有一个与 ListBox 绑定的组列表，您可以将其称为父 ListBox，每个组对象都有一个与之关联的用户列表，并且我将该列表与嵌套在其中的另一个 ListBox 绑定父列表框。如您在此处看到的，两种绑定都工作正常：

![在此处输入图像描述](../Images/d391594c02cda0f94abe573da89359e5.png)

我面临两个问题。

**1.**我可以分别选择组和单个用户，但它们不同步，这意味着如果我选择一个用户，那么包含该用户的组不会被选中。我试过 IsSynchronizedWithCurrentItem="True" 但这似乎不起作用。

如果有人能指出正确的方向如何实现这一点，或者除了在 ListBox 中使用 ListBox 之外还有其他方法，我将不胜感激。

**2.**我有一个与父 ListBox 关联的上下文菜单，并且我能够成功地将命令与菜单绑定，但是我在将命令与嵌套的 ListBox 上下文菜单绑定时遇到了麻烦，这是我的代码

```
<ListBox x:Name="lstOfGroups" 
             ItemsSource="{Binding CurrentContest.Groups}"
             SelectedItem="{Binding SelectedGroup}"
             ItemTemplate="{StaticResource GroupTemplate}"
             Style="{StaticResource ListBoxStyle1}"
             ItemContainerStyle="{StaticResource ListBoxItemStyle1}"
             Background="Transparent" SelectionMode="Single"
             IsSynchronizedWithCurrentItem="True"
             Height="400">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" Margin="5" Width="1200"/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>

                <ListBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Add Contestant" Command="{Binding AddGroupCommand}"/>
                        <MenuItem Header="Edit Contestant" Command="{Binding EditGroupCommand}"/>
                        <MenuItem Header="Delete Contestant" Command="{Binding DeleteGroupCommand}"/>
                    </ContextMenu>
                </ListBox.ContextMenu>
            </ListBox>

<DataTemplate x:Key="GroupTemplate" >
        <Border x:Name="spPubItemBorder" Margin="3" BorderBrush="Black" BorderThickness="1" CornerRadius="10" Background="Honeydew">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal">
                    <TextBlock Name="tbGroupName" Grid.Column="0" Style="{StaticResource ItemTextBox}">
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}Group Name: {0}">
                            <Binding Path="Name" />
                        </MultiBinding>
                    </TextBlock.Text>
                    </TextBlock>
                    <TextBlock Name="tbGroupAmount" Grid.Column="1" Style="{StaticResource ItemTextBox}">
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}Group Amount: {0}">
                            <Binding Path="Amount" />
                        </MultiBinding>
                    </TextBlock.Text>
                    </TextBlock>
                </StackPanel>
                <!--<ItemsControl ItemsSource="{Binding ContestantList}"
                              AlternationCount="2" ItemTemplate="{StaticResource ContestantTemplate}">

                </ItemsControl>-->
                <ListBox x:Name="lstOfContestant" Grid.Row="1"
                     ItemsSource="{Binding ContestantList}"
                     SelectedItem="{Binding SelectedContestant, ElementName=lstOfGroups}"
                     ItemTemplate="{StaticResource ContestantTemplate}"
                     Style="{StaticResource ListBoxStyleForContestant}"
                     ItemContainerStyle="{StaticResource ListBoxItemStyleForContestant}"
                     Background="Transparent" SelectionMode="Single"
                     Height="Auto">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal" Margin="5" Width="375"/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>

                    <ListBox.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Add Contestant" Command="{Binding Path=DataContext.AddContestantCommand,ElementName=contestantManager}"/>
                            <MenuItem Header="Edit Contestant" Command="{Binding Path=DataContext.EditContestantCommand,ElementName=contestantManager}"/>
                            <MenuItem Header="Delete Contestant" Command="{Binding Path=DataContext.DeleteContestantCommand,ElementName=contestantManager}"/>
                        </ContextMenu>
                    </ListBox.ContextMenu>
                </ListBox>

            </Grid>
        </Border>
    </DataTemplate> 
```

我想知道是否有人也可以在这里为我指明正确的方向。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:18:28.077

对于 #1，将`IsSelected`组 ListBox 的属性设置为 true，如果`IsKeyboardFocusWithin`

```
<Style x:Key="GroupListBoxItemStyle" TargetType="ListBoxItem">
  <Style.Triggers>
    <Trigger Property="IsKeyboardFocusWithin" Value="True">
      <Setter Property="IsSelected" Value="True" />
    </Trigger>
  </Style.Triggers>
</Style> 
```

当`ListBoxItem`键盘焦点位于`ListBoxItem`

至于＃2，听起来你得到了错误的项目，可能是因为你`ElementName`在绑定中使用，但是名称设置在多个项目上。尝试使用`RelativeSource`绑定来查找`ContextMenu`自身，然后绑定到`PlacementTarget.DataContext`

```
<MenuItem Header="Add Contestant"
          Command="{Binding PlacementTarget.DataContext.AddContestantCommand, 
              RelativeSource={RelativeSource FindAncestor, 
              AncestorType={x:Type ContextMenu}}}" /> 
```

# java - Jsoup 清洁剂不删除元素

> ID：10998900
> 
> 赞同：1
> 
> 时间：2012-06-12T14:36:00.747
> 
> 标签：java, jsoup

```
doc = Jsoup.parse(html2);
Whitelist whitelist = new Whitelist();
Whitelist.simpleText().addTags("table","td", "tr","tbody");
Cleaner cleaner = new Cleaner(whitelist);
cleaner.clean(doc);

Elements gradesTableBody = doc.select(".user-grade").select("tbody").select("tr");
Log.d("output", gradesTableBody.html()); 
```

输出 html 仍然包含`<img>`标签等。清洁器不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:39:04.550

`Cleaner.clean`返回一个*新*文档（您目前只是丢弃）。

你需要做

```
doc = cleaner.clean(doc);
^^^^^ 
```

此外，这些行没有意义：

```
Whitelist whitelist = new Whitelist();
Whitelist.simpleText().addTags("table","td", "tr","tbody"); 
```

我想你可能想做

```
Whitelist whitelist = Whitelist.simpleText().addTags("table","td", "tr","tbody"); 
```

# php - 使用 Drupal 视图

> ID：10998909
> 
> 赞同：0
> 
> 时间：2012-06-12T14:36:30.807
> 
> 标签：php, drupal, views

我有一个列出所有内容作者的页面。我遇到的麻烦是显示作者的最新文章以及他的所有其他信息。目前它正在显示他的头像名字姓氏。但是获得适当的加入以显示最新的内容文章或播客却让我望而却步。有没有办法使用 Drupal 视图模块来显示最新的文章或播客（节点）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-24T20:50:20.373

嗨，我建议您使用[视图字段视图](https://www.drupal.org/project/views_field_view)

您创建一个新视图，使用给定的上下文过滤器显示 1 个作者的最新文章，然后使用视图字段视图嵌入该视图并在该视图中传递来自作者的 nid。希望它有帮助，让我知道。

# javascript - HighCharts 到 2 个或更多相同的 div

> ID：10998911
> 
> 赞同：0
> 
> 时间：2012-06-12T14:36:38.140
> 
> 标签：javascript, jquery, jquery-selectors, highcharts

我有以下代码，它只填充 1 个 div：

```
$(function () {
    var $container = $('.portlet_content_18');

    var chart = new Highcharts.Chart({
        chart: {
            renderTo: $container[0],
            height: 400
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
});​ 
```

HTML 看起来的地方链接了这个：

```
<div class="portlet_content_18">
<div class="portlet_content_18"> 
```

如何让它填充两个 div？或者如果有 10、20、100 或更多相同的 div 具有相同的类，则所有 div？

这是一个jsfiddle：http: [//jsfiddle.net/Chmts/](http://jsfiddle.net/Chmts/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:39:06.797

使用 $.each ：

```
$('.portlet_content_18').each(function(){
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: this,
            height: 400
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
})); 
```

# sql - 与总的父子关系的公用表表达式

> ID：10998915
> 
> 赞同：0
> 
> 时间：2012-06-12T14:36:56.063
> 
> 标签：sql, sql-server, common-table-expression

我目前缺乏对常用表表达式的了解，因此非常感谢您对此的任何帮助。

我有三个表`[Category]`，它们定义了 Product`[Product]`和`[Mapping]`Category 之间的关系（一对多）。每个类别都有一个 ParentId，它指定其父类别。

我想要实现的是一个列表，其中包括 Category 表中的每一行以及分配给它的产品数量及其所有子项。

例如（类别表数据）

```
Category ID 1 (ParentID 0) has 1 product
Category ID 2 (ParentID 1) has 2 products
Category ID 3 (ParentID 2) has 3 products 
```

我追求的结果是这样的......

```
ID     ParentID     Products
1      0            6
2      1            5
3      2            3 
```

再次对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:08:52.867

好的，假设您使用的是 SQL Server 2005+（因为您在谈论 CTE），请尝试以下查询：

```
WITH CTE1 AS
(
    SELECT A.ID, A.ParentID, COUNT(*) Products
    FROM Category A
    INNER JOIN Mapping B
    ON A.ID = B.CategoryID
    GROUP BY A.ID, A.ParentID
), CTE2 AS 
(
    SELECT *
    FROM CTE1
    UNION ALL
    SELECT B.ID, B.ParentID, A.Products
    FROM CTE2 A
    INNER JOIN CTE1 B
    ON A.ParentID = B.ID
)
SELECT ID, ParentID, SUM(Products) Products
FROM CTE2
GROUP BY ID, ParentID
OPTION(MAXRECURSION 0) 
```

[你可以在这个sql fiddle](http://sqlfiddle.com/#!3/8b333/19)上看到一个例子。在`OPTION(MAXRECURSION 0)`那里，它会尽可能多地迭代级别，因此您要么确保数据不会无限循环，要么限制递归级别。

# php - Apache isn't running my PHP index script

> ID：10998925
> 
> 赞同：2
> 
> 时间：2012-06-12T14:37:39.810
> 
> 标签：.htaccess, php, apache, .htaccess, mod-rewrite

If I decide to place this in my [.htaccess](/questions/tagged/.htaccess "show questions tagged '.htaccess'") file:

```
IndexIgnore */*
RewriteEngine ON
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?page_request=$1 [QSA,L] 
```

The site runs fine. I then decided to `mv index.php subdir/index.php`, so I change the last line to the following:

```
RewriteRule ^(.*)$ /subdir/index.php?page_request=$1 [QSA,L] 
```

And all I see is an Apache directory listing. What am I doing wrong? This probably a very simple solution, but my resources haven't turned up anything.

What bothers me is that this *should* work. It is intuitive and natural to think that all that is needed is to change the file location of `index.php`.

## Edit

I have tried `RewriteBase`, and `RewriteCond %{REQUEST_URI} !/subdir/index.php`. Neither has worked.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:09:14.623

Have you tried enabling rewrite logging? Try adding this to your vhost:

```
RewriteLogLevel 3
RewriteLog "/usr/local/var/apache/logs/rewrite.log" 
```

The rule you posted seems to work just fine for me...

**Edit:**

Ok I was able to replicate the issue on my Mac and figured out that this is what you need:

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ subdir/index.php?page_request=$1 [QSA,L]

RewriteCond %{REQUEST_URI} /
RewriteRule ^(.*)$ subdir/index.php?page_request=$1 [QSA,L] 
```

The problem is, when you just go to `http://localhost/` `%{REQUEST_FILENAME}` doesn't have a value. There might be a way to combine these rules into one, but I haven't figured it out yet.

**Edit 2:**

I just tried this and it also worked:

```
DirectoryIndex subdir/index.php

RewriteEngine On   
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ subdir/index.php?page_request=$1 [QSA,L] 
```

However, it doesn't have anything for the value of the page_request `$_GET` variable, so you'd have to handle that case in your code.

This works because you're telling Apache to look in the subdirectory for the index page instead of the current directory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:40:37.513

Try removing the slash..

```
RewriteRule ^(.*)$ subdir/index.php?page_request=$1 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T15:03:15.533

RewriteRule ^(.*)$ ./subdir/index.php?page_request=$1 [QSA,L]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T18:35:11.060

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !/subdir/index.php 
RewriteRule (.*) /subdir/index.php?page_request=$1 [QSA,L] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-12T14:40:33.193

Use this:

```
 RewriteRule ^(.*)$ subdir/index.php?page_request=$1 [QSA,L] 
```

# c# - 关于 throw 和 assert 的混淆

> ID：10998928
> 
> 赞同：1
> 
> 时间：2012-06-12T14:37:51.520
> 
> 标签：c#, exception, assert, throw

这是我第一次编写一个库（供我在几个游戏中使用），所以我认为为了良好的编程习惯，我应该彻底注释我的代码，添加 XML 摘要并在这个库的用户做错事时使用异常处理，比如在许多 .NET 类中（用户可能是我或我的队友）

这是 NoteRow 类的构造函数（顺便说一句，我正在开发音乐游戏），它需要在创建时确定数组的大小

```
bool[] l1NoteData;
public NoteRow(int numberOfNotes)
{
     this.l1NoteData = new bool[numberOfNotes];
} 
```

现在我有这个方法来切换 l1NoteData 数组上的布尔值。

```
public void toggleNote(uint index)
{
     l1NoteData[index] = !l1NoteData[index]
} 
```

因此，作为防御性编程，我想检查索引（该类的用户将指定，即我或我的队友）是否超出了创建此类时指定的范围。

我已经阅读了许多 throw exception vs. assert vs. return bool 等，但仍然感到困惑并且无法选择。这是我的担忧：

*   我是否应该使用“if”语句来检查索引是否超过 l1NoteData.length，然后在出现异常时触发异常，知道当使用“超出范围”索引执行该行时异常会触发？(IndexOutOfRangeException) 如果是这样，那么抛出异常有什么用？如果出现问题，无论如何都会有默认异常？
*   我读过 Assert 是为程序员准备的。通知程序员代码不像程序员**假设**的那样工作。与抛出异常（由用户处理异常测试用例）相比，人们永远无法注入测试用例来使断言触发（如果它被触发则代码错误）。现在这个图书馆的用户将是我。所以我被认为是程序员或用户？我，作为这个类的**用户**，可能会调用`toggleNote`并输入超出数组限制的索引，所以会抛出异常。或者我，作为我的游戏的**程序员**（这个库是我游戏的一部分）应该把 assert 放在那里，所以我不会犯错误调用`toggleNote`我的游戏中的超限指数。（使用这个库）我现在可以知道游戏的代码是错误的，因为 assert 被触发然后修复它并最终进入发布版本。（然后断言代码将消失）
*   从上面的问题来看，如果我彻底测试，我确定没有更多的错误导致断言运行，然后进入发布版本。我知道断言不会在发布版本的代码中......但这真的很好吗？程序中可能还存在更多错误，因此现在当用户遇到该错误时，断言不再用于捕获错误。所以当我可以使用异常并且如果用户导致该异常触发时，断言真的是一件好事，我作为开发人员可以收到该错误报告来修复它等等（但用户是我和我的朋友）
*   抛出异常比返回 bool 指示成功/失败要好 100%？您认为哪个示例更适合返回 bool？

对不起，我的英语令人困惑，因为我已经对这个问题感到困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:41:19.340

断言仅用于测试。断言不用于生产应用程序中的错误处理

您应该预先检查（如果）输入是否来自用户，是否会出现错误等。

如果一个错误完全出乎意料，那么这就是异常处理的目的。

如果你自己的程序提供了 index 参数，那么如果传递了错误的值就是一个 bug。例外情况很好。

对此提出了几个很好的问题

[异常真的是异常错误吗？](https://stackoverflow.com/questions/180937/are-exceptions-really-for-exceptional-errors)

[Debug.Assert 与异常](https://stackoverflow.com/questions/506285/debug-assert-vs-exceptions)

[C# 中的异常与“如果”](https://stackoverflow.com/questions/4773636/exceptions-vs-if-in-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:44:25.280

使用预检查（函数顶部的简单 if 语句）抛出自己的异常的最大原因是您可以指定自己的非常详细的异常消息。您可以明确地说“嘿，笨蛋。您试图切换一个不存在的音符”，而不是默认的“索引超出数组边界”或其他任何内容。或者任何你想要的。

您自己的例外的另一种情况是那些浏览您的库代码的人。您明确检查错误，任何浏览您的库源的人都会收到警告，这是一个潜在的错误。明确说明您想要在代码中执行的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T14:44:50.100

第一的。通常说，返回码之前的异常的一个好处是异常不能被忽略。这为您提供了用例。如果您不希望使用您的库的用户（程序员）错过重要的事情，请使用例外。第二。我认为，无论是作为程序员还是作为用户，您都不应该在库中的一般情况下使用断言。我的意思是你应该在使用你的库的代码中使用断言来检查你的假设是否正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T14:43:41.023

问自己一个简单的问题：你想阻止它发生吗？

如果是，请检查方法入口的索引，如果无效则抛出异常。这是在方法调用上验证参数的常用方法。

如果不是，那么您有一些选择。

*   您可以使用`System.Diagnostics.Debug`or`System.Diagnostics.Trace`记录无效的索引，然后静默返回，无需执行任何操作。
*   你可以忽略它，它`IndexOutOfBoundsException`无论如何都会抛出一个。
*   您可以防止它停止异常，否则从方法中正常返回。

# lisp - 如何让 lisp 中的 list 输出更好？

> ID：10998931
> 
> 赞同：1
> 
> 时间：2012-06-12T14:37:57.717
> 
> 标签：lisp, listener, lispworks

我在 lisp 中声明了以下列表：

```
 (defvar car-owners-2 (list (list 'yaakov (list 'volvo 100000.0)) 
                             (list 'moshe (list 'vw 75000.0)) 
                             (list 'rachel (list 'mazda 60000.0)) 
                             (list 'sarah (list 'volvo 100000.0)) 
                             (list 'david  (list 'renault 50000.0))
                             (list 'leah  (list 'vw 75000.0)))) 
```

当我想从监听器文件中看到它时，我得到了这个令人作呕的输出：

```
 CL-USER 19 : 6 > car-owners-2
    (((QUOTE YAAKOV) (QUOTE (# 100000.0))) ((QUOTE MOSHE) (QUOTE (# 75000.0))) 
    ((QUOTE RACHEL) (QUOTE (# 60000.0)))   ((QUOTE SARAH) (QUOTE (# 100000.0)))
    ((QUOTE DAVID) (QUOTE (# 50000.0)))    ((QUOTE LEAH) (QUOTE (# 75000.0)))) 
```

如何使输出正常？为什么它打印#而不是名称？我希望输出是这样的：

```
((YAAKOV (VOLVO 100000.0)) (MOSHE (VW 75000.0)) (RACHEL (MAZDA 60000.0))...) 
```

谢谢。我使用 LispWorks 6.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:14:31.897

也许以这种方式创建相同的列表：

```
> '((yaakov (volvo 100000.0))
    (moshe (vw 75000.0))
    (rachel (mazda 60000.0))
    (sarah (volvo 100000.0))
    (david (renault 50000.0))
    (leah (vw 75000.0))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T19:34:26.537

> CL-用户 19 : 6 >

首先，我会退出调试器。

这将是通常的提示：

> CL-USER 19 >

`19`说它是第 19 种读法。以上`: 6`表示您在调试器中，并且读取了调试器中的第 6 种形式。

> CL-用户 19 : 6 > :top

`:top`带你到顶级。

然后检查变量的值，如`*print-level*`和`*print-length*`。

```
CL-USER 12 > (setf *print-level* 2)
2

CL-USER 13 > (list (list 'yaakov (list 'volvo 100000.0)) 
                             (list 'moshe (list 'vw 75000.0)) 
                             (list 'rachel (list 'mazda 60000.0)) 
                             (list 'sarah (list 'volvo 100000.0)) 
                             (list 'david  (list 'renault 50000.0))
                             (list 'leah  (list 'vw 75000.0)))
((YAAKOV #) (MOSHE #) (RACHEL #) (SARAH #) (DAVID #) (LEAH #))

CL-USER 14 > (setf *print-level* nil)
NIL

CL-USER 15 > (list (list 'yaakov (list 'volvo 100000.0)) 
                             (list 'moshe (list 'vw 75000.0)) 
                             (list 'rachel (list 'mazda 60000.0)) 
                             (list 'sarah (list 'volvo 100000.0)) 
                             (list 'david  (list 'renault 50000.0))
                             (list 'leah  (list 'vw 75000.0)))
((YAAKOV (VOLVO 100000.0)) (MOSHE (VW 75000.0))
 (RACHEL (MAZDA 60000.0)) (SARAH (VOLVO 100000.0))
 (DAVID (RENAULT 50000.0)) (LEAH (VW 75000.0))) 
```

# django - 每次项目运行时，应用引擎数据存储都会自动清除

> ID：10998936
> 
> 赞同：1
> 
> 时间：2012-06-12T14:38:14.427
> 
> 标签：django, google-app-engine, djangoappengine

每次我运行我的项目（django 中的 dev_appserver.py myapp 或 manage.py runserver）时，都会清除数据存储区。我在 django 中通过 model.put() 或 model.save() 保存了数据。在当前会话中，我可以在管理页面中看到数据，但是下次运行项目时，之前的所有数据存储都丢失了。

我知道应用引擎有 --clear_datastore 运行条件，但我不想要这个功能。

顺便问一下，本地数据存储文件在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:44:09.717

您可以将`--datastore_path=/datastore/path/dev_appserver.datastore`参数与 dev_appserver.py 一起 使用

`--blobstore_path=/path/to/blobstore/folder`也是一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T16:17:43.360

事实上 --datastore_path= 不是最好的标志，因为它只设置了部分存储选项最好的恕我直言：

--storage_path=...

将存储所有本地文件（例如 Datastore、Blobstore 文件、Google Cloud Storage 文件、日志等）的路径，除非被 --datastore_path、--blobstore_path、--logs_path 等覆盖。

在[https://developers.google.com/appengine/docs/python/tools/devserver?csw=1找到](https://developers.google.com/appengine/docs/python/tools/devserver?csw=1)

# rhino-mocks - Rhino Mock AAA 期待中的期待

> ID：10998938
> 
> 赞同：0
> 
> 时间：2012-06-12T14:38:17.200
> 
> 标签：rhino-mocks, arrange-act-assert

是否可以使用 Rhino Mock AAA 语法模拟以下情况：

```
// Interface
interface IFoo
{
    void ExecuteFoo( Expression<Action> action );
    void Increment(out int value); // value++
}

// Situation to mock:
var foo = new Foo();
int value = 7;
foo.ExecuteFoo( () => foo.Increment( out value ) );    

// and here is mock that needs to be remade:
fooMock.Expect( f => f.ExecuteFoo( Arg<Expression<Action>>.Is.NotNull ));
fooMock.ExecuteFoo( () => foo.Increment( out value ) ); 
```

但是，我需要传递这个期望，而不是 .Is.NotNull 约束：

```
fooMock.Expect(f => f.Increment(out Arg<int>.Out(8).Dummy)); 
```

我知道这可能看起来有点奇怪，但是让我们说 ExecuteFoo 是至关重要的，它必须像这样完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:41:51.573

由于编译器处理它们的方式，您不能真正对 lambda 设定期望。请参阅：[http ://weblogs.asp.net/psteele/archive/2010/06/18/rhino-mocks-lambdas-and-expectations.aspx](http://weblogs.asp.net/psteele/archive/2010/06/18/rhino-mocks-lambdas-and-expectations.aspx)

# css - 如何为没有定义子元素的 html 元素选择和应用样式？

> ID：10998939
> 
> 赞同：0
> 
> 时间：2012-06-12T14:38:17.900
> 
> 标签：css, css-selectors

如何为没有定义子元素的html元素选择和应用样式？例如：

```
<p>Lorem</p>
<p>Isum <span>dolor</span></p> 
```

我想为第一个 p 应用一些样式，因为它不包含 span 元素。

CSS可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:45:25.747

您必须在第一个 p 上放置一个选择器才能仅在 CSS 中执行此操作：

[http://jsfiddle.net/6EmxP/](http://jsfiddle.net/6EmxP/)

您可以使用 jQuery 路由来做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:43:38.683

你为什么不给它上`<p>`一堂课或类似的东西？如果您希望它是动态的，请添加一个使用 javascript 的类。您可以使用它更好地设置条件。在这种情况下，CSS 不是您的答案。这在某些方面可能会有所帮助:) [http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:44:01.040

我不认为你可以用css做到这一点。你可以用jQuery来做到这一点......

见[http://api.jquery.com/has/](http://api.jquery.com/has/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T14:59:01.017

您的第一个`p`元素实际上有一个孩子：它是一个文本节点。否则，`:empty`可以使用。

当你知道元素的确切位置时，`:nth-child`就可以使用了。不需要上课（但会更快）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T14:45:03.957

我认为您不需要选择父母。

```
<p class="Lorem">Lorem</p>
<p>Isum <span>dolor</span></p>

.Lorem + p {color: green;} 
```

# windows-7 - 如何使旧版本的 Merant PVCS 在 Windows 7 中工作？

> ID：10998940
> 
> 赞同：1
> 
> 时间：2012-06-12T14:38:18.623
> 
> 标签：windows-7, pvcs

我正在尝试在Windows 7中制作旧版本的Merant PVCS功能。我公司安装的版本是：8.0.2.3 Build 662

应用程序安装正常，但无法打开。它基本上只是在屏幕上闪烁并消失，没有任何错误消息。

在 XP 兼容模式下运行也不是一个选项，因为我的公司已禁用该功能。

我找到了一篇关于它的支持文章：http: [//communities.serena.com/serena/topics/pvcs_vm_8_2_1_does_not_run_on_windows_7-1d2sbp](http://communities.serena.com/serena/topics/pvcs_vm_8_2_1_does_not_run_on_windows_7-1d2sbp)

但实际修复的链接似乎丢失或失效。

任何帮助都会膨胀！

# jquery - Jquery或语法中的逻辑错误？

> ID：10998941
> 
> 赞同：0
> 
> 时间：2012-06-12T14:38:20.663
> 
> 标签：jquery, html

通过单击收音机的选项之一是显示相同数量的选项日期，更改显示或无“”相应的表格，但这没有发生。你有逻辑或语法错误？

```
<style>
  #ch2   ,#ch3   ,#ch4   ,#ch5   ,#ch6   ,#ch7   ,#ch8   ,#ch9   ,#ch10  ,#ch11  ,#ch12{
        display: none;
  }

</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(function(){
        $("input[type=radio]").change(function(){
                var valor = $(this).val();
                for(i=1;i<=valor;i++){
                        $('#ch'+i).css("display","");
                }
                for(j=1;i<=12;i++){
                        $('#ch'+i).css("display","none");
                }

        })
});
</script>
<form name="senddata" method="post" action="">
        <table width="100%" border="0" id="radios" style="display: none">
        <tr>
                <td><label><input type="radio" name="parcelas" value="1" />1X</label></td>
                <td><label><input type="radio" name="parcelas" value="2" />2X</label></td>
                <td><label><input type="radio" name="parcelas" value="3" />3X</label></td>
                <td><label><input type="radio" name="parcelas" value="4" />4X</label></td>
                <td><label><input type="radio" name="parcelas" value="5" />5X</label></td>
                <td><label><input type="radio" name="parcelas" value="6" />6X</label></td>
                <td><label><input type="radio" name="parcelas" value="7" />7X</label></td>
                <td><label><input type="radio" name="parcelas" value="8" />8X</label></td>
                <td><label><input type="radio" name="parcelas" value="9" />9X</label></td>
                <td><label><input type="radio" name="parcelas" value="10" />10X</label></td>
                <td><label><input type="radio" name="parcelas" value="11" />11X</label></td>
                <td><label><input type="radio" name="parcelas" value="12" />12X</label></td>
        </tr>
        </table>
        <table width="100%" border="0" id="ch1">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data1"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch2">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data2"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch3">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data3"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch4">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data4"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch5">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data5"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch6">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data6"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch7">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data7"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch8">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data8"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch9">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data9"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch10">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data10"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch11">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data11"/></td>                
        </tr>
        </table>
        <table width="100%" border="0" id="ch12">
        <tr>
                <td>Data<br /><input name="input" type="text" name="data12"/></td>                
        </tr>
        </table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:39:59.900

```
for(i = 1; i <= valor; i++){
  $('#ch'+i).css("display","block"); // or inline but not left empty string
}
// here not j=1 and here you mix with j and i
for(j = valor+1; j <= 12; j++){
  $('#ch'+i).css("display","none");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:43:24.050

只需指定一个值而不是什么都不做：

```
$('#ch'+i).css("display","table"); 
```

这应该可以解决问题，在[jsfiddle](http://jsfiddle.net/KPP42/)上尝试一下。

# c - 获取 fork()ing 的写时复制行为，无需 fork()

> ID：10998943
> 
> 赞同：11
> 
> 时间：2012-06-12T14:38:25.190
> 
> 标签：c, fork, copy-on-write

我有一个大缓冲区：

```
char *buf = malloc(1000000000); // 1GB 
```

如果我派生了一个新进程，它将有一个与父进程共享内存的 buf，直到其中一个或另一个写入它。即使这样，内核也只需要分配一个新的 4KiB 块，其余的将继续共享。

我想制作一个 buf 的副本，但我只会更改一点副本。我想要不分叉的写时复制行为。（就像你在分叉时免费获得一样。）

这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-12T15:18:17.713

您需要在磁盘上创建一个文件或`shm_open`为该块创建一个 POSIX 共享内存段 ( )。第一次，将其映射为`MAP_SHARED`. 当您准备好制作副本并切换到 COW 时，`mmap`再次调用`MAP_FIXED`和`MAP_PRIVATE`以在您的原始地图之上进行映射，然后`MAP_PRIVATE`制作第二份副本。这应该会给你你想要的效果。

# wolfram-mathematica - 奇怪的 Mathematica 绘图行为

> ID：10998949
> 
> 赞同：0
> 
> 时间：2012-06-12T14:38:51.057
> 
> 标签：wolfram-mathematica

运行命令时：

```
Plot[1/x, {x, 0, 10}] 
```

我得到非常奇怪的输出：
![在此处输入图像描述](../Images/4824d0f5196bce8ca40db29c66d74abc.png)
不仅如此，而且在运行时

```
Plot[1/x, {x, 0, 1000}, Mesh -> All] 
```

哪个应该标记它产生之间的线的点，给我这个：
![在此处输入图像描述](../Images/26d294d8906f2c5ce64c9b2de05b15dd.png)
请注意它`1000`在这里 - 不是`10`。
在阅读了 Mathematica 的解释后`Plot`，它说如果函数快速变化，它会产生更多的点。该函数`1/x`的变化非常缓慢 - 我虽然 Mathematica 没有生成足够的点 - 但使用`Mesh -> All`我表明它是不正确的。

有没有人遇到过这种奇怪的行为？谁能向我解释一下是什么原因造成的，如何解决？

PS：这不是唯一会产生不良输出的功能 - 它实际上很常见。 PPS：我试着和-
一起玩，但没有帮助。 编辑：我刚刚注意到 X 轴不是 0 - 如果您查看第一张图，您将看到最后一个数字，并且在它上方。X轴实际上是！所以也许问题是：为什么X轴在而不是？`MaxRecursion``WorkingPresicion`

`0.4``0.6``0.2``0.2``0`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:08:44.197

嗯，mma 只是想表现得友善一点。如果您输入`Plot[1/x, {x, 0, 10}, PlotRange -> All, PlotStyle -> Thick]`，您将获得正确的绘图范围，但由于它是无穷大（对于 y 轴），那么函数的其余部分基本上为零。所以你会看到一个“空”的情节，这更加不直观......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T14:51:30.933

我在你的第一个情节中没有看到任何奇怪之处，我看到了双曲线图。Mathematica 甚至对您很好，忽略了您评估的尝试`1/0`。

在您的第二个情节中，我认为您期望 Mathematica 沿着它绘制的线绘制 1000 个点？你给了多少像素来在 x 方向上绘制这 1000 个点？我认为您所看到的是大多数基于计算机的绘图所共有的人工制品：在（也许）250 像素上要求 1000 点，并且必须给出一些东西。或者我不明白你为什么关心输出。

最后你问：*为什么X轴是0.2而不是0*

答案是 Mathematica 已经决定图表看起来会很好。如果要强制 x 轴在 0 处穿过 y 轴，请使用命令`AxesOrigin`中的选项`Plot`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T17:00:03.290

您可能会在以下方面找到价值`DiscretePlot`：

```
DiscretePlot[1/x, {x, 0.5, 10, 0.2},
  PlotRange -> All, 
  AxesOrigin -> {0, 0}
] 
```

![数学图形](../Images/5b5dd77616bd92c11b56ae9c7db028d5.png)

或添加选项`Joined -> True`并获取：

![数学图形](../Images/db6b39216e8f499083c15a0053810c86.png)

# spring - Spring Hibernate 异常处理

> ID：10998950
> 
> 赞同：0
> 
> 时间：2012-06-12T14:38:51.413
> 
> 标签：spring, hibernate, jta

在 Spring + Hibernate + JTA 项目中，我试图让异常处理工作。对于以下代码：

```
@Transactional(propagation = Propagation.REQUIRED, isolation = Isolation.DEFAULT)
public HandsetManufacturer createHandsetManufacturer(
        HandsetManufacturer handsetManufacturer)
        throws HandsetManufacturerAlreadyExistsException{
    HandsetManufacturer handsetManufacturer2=new  HandsetManufacturer();
    try {

            handsetManufacturerDao.findByUniqueProperty(
                HandsetManufacturer.class, NAME_PROPERTY,
                handsetManufacturer.getName());
        throw new HandsetManufacturerAlreadyExistsException();
    } catch (BusinessObjectNotFoundException ignoreMe) {
    }
    //handsetManufacturer2= handsetManufacturerDao.create(handsetManufacturer);

    try{
        handsetManufacturer2= handsetManufacturerDao.create(handsetManufacturer);
    }catch (JDBCException e) {
        System.out.println("::HibernateException::"+e.getSQL());
        System.out.println("::HibernateException::"+e.getErrorCode());
        System.out.println("::HibernateException::"+e.getSQLState());
        System.out.println("::HibernateException::"+e.getSQLException());
        System.out.println("::HibernateException::"+e.getMessage());
        System.out.println("::HibernateException::"+e.getCause());
        throw new TechnicalException(e);
    }

    return handsetManufacturer2;
} 
```

我正在尝试捕获底层的 hibernate/jdbc/db 异常（例如，当依赖实体仍然存在时，删除将失败并出现 org.springframework.orm.hibernate3.HibernateJdbcException）并执行一些操作。然而，捕获代码永远不会到达。

但是如果我从我的方法中删除“@Transactional(propagation = Propagation.REQUIRED,isolation = Isolation.DEFAULT)”，它将到达捕获块。我想这与 Spring 管理它的方式有关，但我不知道如何在 JDBCException 期间捕获异常并使用 @Transaction 注释

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:40:03.117

我猜你的 DAO 也被配置为具有 REQUIRED 传播的事务。在 Hibernate 中，有很多动作会延迟到会话刷新。刷新发生的时间之一是在事务提交之前。这意味着如果您的方法（我猜它是某些服务中的方法）正在围绕它进行事务处理，那么在您的 DAO create() 中的 Hibernate 持久化或保存操作实际上不会进入数据库，直到您的服务方法完成。

一种解决方法是显式执行 Session flush() （您可以考虑放入 DAO 的 create() ），这样它将触发数据库更新，从而导致您期望抛出的异常。

# asp.net - 日期之间 - SQL Server 2008 - ASP.net

> ID：10998959
> 
> 赞同：1
> 
> 时间：2012-06-12T14:39:16.500
> 
> 标签：asp.net, sql, sql-server-2008

我有这个查询

```
WITH NumberedRows AS
(
    SELECT  Serial, 
            DateReceived, 
            DeviceLevel, 
            ROW_NUMBER() OVER (ORDER BY DateReceived) AS RowNumber
    FROM TBLReadings 
) 
SELECT *
FROM NumberedRows
WHERE RowNumber % 5 = 1 and Serial like '+447584996153' 
```

我需要在日期之间搜索 - 最近 7 天。我知道搜索..

```
WHERE DateReceived BETWEEN 'blahblah' and 'blahblah' 
```

但是功能是什么？我尝试了不同的格式来专门调用日期。

当前数据以`dd/mm/yyyy 00:00:00`格式检索日期。

我不知道如何在搜索中正确使用日期函数（我猜这就是为什么我在日期之间搜索时无法获取任何数据，因为我只显示 col 名称而没有数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:49:24.857

如果您的日期是`DATE`或`DATETIME`数据类型，您可以简单地使用：

```
WHERE DateReceived >= '20120601'            --- at or after the 1st of June
  AND DateReceived < '20120608'             --- and before the 8th of June 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:06:31.777

如果您打算将日期值作为参数传递给查询，那么您可以简单地让 .NET 处理时间剥离：

```
WITH NumberedRows AS
(
    SELECT  Serial, 
            DateReceived, 
            DeviceLevel, 
            ROW_NUMBER() OVER (ORDER BY DateReceived) AS RowNumber
    FROM TBLReadings 
    Where DateReceived >= @Date1
        And DateReceived < DateAdd(d,8,@Date1)
) 
SELECT *
FROM NumberedRows
WHERE RowNumber % 5 = 1 and Serial like '+447584996153' 
```

在传递日期值的 .NET 代码中，您只需使用对象的`Date`属性`DateTime`来仅传递日期部分。：

```
myCommandVar.AddParameterWithValue( myDateVar.Date ); 
```

另一种选择是，如果您总是想使用今天的日期并且不想传递参数，则如下所示：

```
Where DateReceived >= DateAdd( d, DateDiff( d, 0, CURRENT_TIMESTAMP ), 0 )
        And DateReceived < DateAdd( d, DateDiff( d, 0, CURRENT_TIMESTAMP ), 8 ) 
```

在这种情况下，我通过计算自日期 0 以来的天数，然后将该天数添加到 0，从当前日期和时间中剥离时间部分。请注意，在第二部分中，我从日期 8 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T14:52:45.900

尝试使用 DATEADD 函数获取最近 7 天的数据：

```
WHERE DateReceived > DATEADD(day,-7, getutcdate()) 
```

或者

```
WHERE DateReceived > DATEADD(day,-7, GETDATE()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T14:44:54.877

您可以使用转换功能来比较不包括时间比较的日期。

`Select Convert(varchar(12),GetDate(),112)`这将以 yyyyMMdd 格式返回日期

因此，如果您的查询可以是`WHERE Convert(varchar(12,DateReceived,112) BETWEEN Convert(varchar(12,DateFrom,112) and Convert(varchar(12,DateTo,112)`

# c# - 这是 C# 中的闭包示例吗？

> ID：10998960
> 
> 赞同：8
> 
> 时间：2012-06-12T14:39:23.553
> 
> 标签：c#, closures

```
static void Main(string[] args)
{
    var s = 3;

    Func<int, Func<int>> func = 
        x => () =>
    {
        return x;
    };

    var result1 = func(s);

    func = null;

    s = 5;

    var result2 = result1();

    Console.WriteLine(result2);

    Console.ReadKey();
} 
```

我的理解是 x 实际上并未声明为变量，例如。var x = 3。相反，它被传递给外部函数，该函数返回一个返回原始值的函数。在它返回 this 的时候，它会在 x 周围创建一个闭包来记住它的值。再后来，如果你改变 s，它就没有效果了。

这是正确的吗？

（顺便说一下，输出是 3，这是我所期望的）。

编辑：这是一个关于为什么我认为它的图表

![闭包示例](../Images/5b6112b769cbd5353a1924a637068fe1.png)

x=3 被传递给 func，它返回一个简单地返回 x 的函数。但是 x 在内部函数中不存在，只有它的父级，并且在我将其设为 null 后，它的父级不再存在。当运行内部函数时，x 存储在哪里？它必须从父级创建一个闭包。

进一步澄清：

```
 int s = 0;

    Func<int, Func<int>> func = 
        x => () =>
    {
        return x;
    };

    for (s = 0; s < 5; s++)
    {
        var result1 = func(s);

        var result2 = result1();

        Console.WriteLine(result2);
    }; 
```

输出为 0、1、2、3、4

但是，以您的示例为例：

```
static void Main(string[] args)
{
    int s = 0;

    Func<int, Func<int>> func = 
        x => () =>
    {
        return s;
    };

    List<Func<int>> results = new List<Func<int>>();

    for (s = 0; s < 5; s++)
    {
         results.Add(func(s));
    };

    foreach (var b in results)
    {
        Console.WriteLine(b());
    }

    Console.ReadKey();
} 
```

输出是 5 5 5 5 5，这不是你想要的。它没有捕获变量的值，它只是保留了对原始 s 的引用。

闭包是在 javascript 中创建的，正是为了避免这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T14:41:53.143

不，`s`这`x`不是`x => () => x`.

```
 Func<int, Func<int>> func = x => () => x;

        var a = func(3);

        var b = func(5);

        Console.WriteLine(a());
        Console.WriteLine(b()); 
```

你会得到`3`和`5`预期的一样。在这两种情况下，它实际上都不会记住`x`其他时间，但它*确实*`x`在外部 lambda 的持续时间内本地 关闭。

基本上，每次调用`x => () => x`都会创建一个新的委托，该委托捕获（而不是传入的）`() => x`的本地值。`x``s`

即使您使用`s`并传递它，并对其进行更改，您仍然会得到`3`and `5`：

```
 int s = 3;
        Func<int, Func<int>> func = x => () => x;

        var a = func(s);

        s = 5;

        var b = func(s);

        // 3 and 5 as expected
        Console.WriteLine(a());
        Console.WriteLine(b()); 
```

现在，它*确实*捕获了局部函数中的局部变量，该变量在`x` *每次**调用*时生成。因此，`x`在调用较大的 lambda 之间不会持续存在，但如果稍后在 lambda 中更改，它将被捕获。

例如，假设你有这个：

```
 int s = 3;
        Func<int, Func<int>> func = x => 
            () => {
                      Func<int> result = () => x;
                      x = 10 * x;
                      return result;
                   };

        var a = func(s);

        s = 5;

        var b = func(s); 
```

在这种情况下，`x`匿名方法内部的闭包更加明显。运行它的结果将是 30 和 50，因为`x`对匿名方法内的修改会影响到该匿名方法的本地闭包`x`，但是，这些不会在调用之间结转，因为它只捕获`x`传递给匿名方法的本地，而不是`s`用来称呼它的。

因此，总而言之，在您的图表和示例中： * **main**传递`s`到较大的 lambda （图中的**func**） * **func**`x`在调用它以生成匿名方法时关闭`() => x`

一旦对外部 lambda 进行调用 (func)，关闭程序就会开始和结束，因为它仅在该 lambda 本地，并且不会关闭来自 main 的任何内容。

这有帮助吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T14:44:22.270

没变

```
Func<int, Func<int>> func = 
    x => () =>
{
    return x;
}; 
```

至

```
Func<int, Func<int>> func = 
    x => () =>
{
    return s;
}; 
```

它*关闭*了`s`变量。

# c# - 通过其容器的内联初始化向字典添加值

> ID：10998961
> 
> 赞同：30
> 
> 时间：2012-06-12T14:39:28.087
> 
> 标签：c#, dictionary, initialization

我有以下`City`课程。每个城市对象都包含一个字典，其中键是语言标签（比如说：“EN”、“DE”、“FR”...），而值是相应语言中的城市名称（例如：Rome / Rom 等） .

```
public class City:
{
  private IDictionary<string, string> localizedNames = new Dictionary<string, string>(0);
  public virtual IDictionary<string, string> Names
  {
    get { return localizedNames ; }
    set { localizedNames = value; }
  }
} 
```

无论使用哪种语言，大多数城市都具有相同的名称，因此`City`构造函数实际上创建了英语映射：

```
 public City(string cityName)
  {
    this.LocalizedNames.Add("EN", cityName);
  } 
```

**问题来了**：有没有办法通过内联初始化添加其他值？

我尝试了以下不同的变体但没有语义成功（不编译）：

```
AllCities.Add(new City("Rome") { Names["DE"] = "Rom" }; 
```

我也尝试创建一个新字典，但这显然会覆盖“EN”参数：

```
AllCities.Add(new City("Rome") { Names = new Dictionary<string, string>() { { "DE", "Rom" } } }; 
```

有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2017-03-10T23:11:41.023

这是实际的内联初始化：

```
private IDictionary<string, string> localizedNames = new Dictionary<string, string>{
    {"key1","value1"},
    {"key2","value2"}
}; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-12T14:46:45.827

```
AllCities.Add(new City("Rome") { Names = { { "DE", "Rom" }, { "...", "..." } } }); 
```

这是使用初始化语法来调用 .Add 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-08-03T05:58:24.150

有一个比使用[匿名对象](https://stackoverflow.com/a/42729249/13574233)更好的方法：

```
IDictionary<string, string> dict = new Dictionary<string, string>
{
    ["key1"] = "value1",
    ["key2"] = "value2",
    ["key3"] = "value",
}; 
```

* * *

**编辑：关于 OP 要求解释**

从[对象和集合初始化器（C# 编程指南）](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/object-and-collection-initializers#collection-initializers)：

```
var numbers = new Dictionary<int, string>
{
    [7] = "seven",
    [9] = "nine",
    [13] = "thirteen"
}; 
```

> 前面的示例生成调用[Item[TKey]](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.item#System_Collections_Generic_Dictionary_2_Item__0_)来设置值的代码。在 C# 6 之前，您可以使用以下语法初始化字典和其他关联容器。请注意，它不是使用带括号和赋值的索引器语法，而是使用具有多个值的对象：

```
var moreNumbers = new Dictionary<int, string>
{
    {19, "nineteen" },
    {23, "twenty-three" },
    {42, "forty-two" }
}; 
```

> 此初始化程序示例调用[Add(TKey, TValue)](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.add#System_Collections_Generic_Dictionary_2_Add__0__1_)将三个项目添加到字典中。由于编译器生成的方法调用，这两种初始化关联集合的不同方法的行为略有不同。两种变体都适用于`Dictionary`该类。其他类型可能仅支持基于其公共 API 的一种或另一种。

* * *

对我来说，这只是一个可读性的东西。我认为阅读和理解所做的工作更容易，因为您还可以使用`[]`括号检索值。我对性能一无所知，但我想第一种方法也是更好的选择。

# php - PHP, Printf,Sprintf 函数

> ID：10998963
> 
> 赞同：2
> 
> 时间：2012-06-12T14:39:33.130
> 
> 标签：php, function, printf

我正在研究`printf`并且`sprintf`我不明白几点。有人可以帮我理解以下`format`说明符吗[`sprintf()`](http://php.net/manual/en/function.sprintf.php)：

*   一个可选的**对齐说明符**，说明结果是左对齐还是右对齐。默认为右对齐；此处的 - 字符将使其左对齐。

*   一个可选数字，一个**宽度说明符**，表示此转换应产生多少个字符（最少）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T14:47:25.217

宽度说明符：

```
given:    printf('|%5d|', 1);
prints:   |    1|
           ^^^^^-- 4 spaces + 1 char = width of 5 
```

结盟：

```
given:    printf('|%-5d|', 1);
prints    |1    |
           ^^^^^-- 1 char + 4 right-justified spaces = width of 5. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:50:53.907

我们举一个简单的例子：

```
<?php

$strs = "hello world";
printf("%-15s", $strs);
echo "\n";
printf("%15s", $strs);

?> 
```

**输出：**

```
hello world    
    hello world

^^^^^^^^^^^^^^^
|||||||||||||||
123456789012345  (width=15) 
```

这里 15 是字符串的最小打印宽度，`-`标志是在左边缩进字符串。

# c++ - 我应该如何编写一个国际化的异常处理程序

> ID：10998965
> 
> 赞同：-5
> 
> 时间：2012-06-12T14:39:40.713
> 
> 标签：c++, exception-handling, internationalization

我想国际化我的应用程序。我应该如何编写传递给我的异常类构造函数的消息？我希望能够只配置一个文件，它可以用于各种国际语言，如中文、法语等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:56:39.263

异常处理不应该国际化。国际化应该在显示层，一旦你发现异常，并传递相关信息进行显示。您在异常中传递的字符串应该只是一个键，用于在内部查找消息；附加信息应在异常中的单独字段中传递。

# java - 调用 System.gc() 时可以使用 G1 垃圾收集器吗

> ID：10998970
> 
> 赞同：4
> 
> 时间：2012-06-12T14:39:48.793
> 
> 标签：java, garbage-collection, jvm

在 Hotspot 中，当调用 System.gc() 时，我可以通过在命令行中添加 -XX:+ExplicitGCInvokesConcurrent 选项来使用 Concurrent-Mark-Sweep 收集器。

当调用 System.gc() 时，是否有任何等同于让 JVM 使用 G1 收集器的方法？默认情况下，似乎使用标准并行收集器。

我猜不是，但我只是想知道是否有人可以确认。

不用担心！我不打算自己调用 System.gc()，但是 JVM 的某些部分（直接缓冲区，RMI）依赖于它被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:53:43.453

从[这个错误帖子](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=b19ec5f11f4c2cffffffffe39efbc6ace5cf5?bug_id=6975893)：

> G1 现在观察 ExplicitGCInvokesConcurrent

还有这个[链接](http://hg.openjdk.java.net/jdk7u/jdk7u/hotspot/rev/5130fa1b24f1)可以确认它。

AFAIK 没有特殊命令，[Oracle JVM 选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)列表和这个[更长的列表](http://stas-blogspot.blogspot.fr/2011/07/most-complete-list-of-xx-options-for.html)都没有引用此类命令选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T08:02:37.690

```
bool G1CollectedHeap::should_do_concurrent_full_gc(GCCause::Cause cause) {
  switch (cause) {
    case GCCause::_gc_locker:               return GCLockerInvokesConcurrent;
    case GCCause::_java_lang_system_gc:     return ExplicitGCInvokesConcurrent;
    case GCCause::_g1_humongous_allocation: return true;
    default:                                return false; 
```

} }

和

bool ExplicitGCInvokesConcurrent = false {产品}

# jmeter - Jmeter - 可变用户线程添加时间？

> ID：10998971
> 
> 赞同：2
> 
> 时间：2012-06-12T14:39:53.100
> 
> 标签：jmeter, load-testing

我们可以在前一个线程在 Jmeter 中完成其请求后添加一个用户线程吗？

我有 10 个用户，想在第一个用户收到回复后添加第二个用户？即第一个用户页面加载需要 400 毫秒，我的第二个用户应该在 400 毫秒后添加。同样对于第三个用户，取决于第二个用户的加载时间？

希望这很清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:34:07.790

有点棘手的情况，但可以通过[Inter-Thread Communication Plugins](http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication)实现。

您应该像这样创建测试计划：

```
TestPlan
  - Thread Group
    - Sampler
      - Communication PreProcessor
      - Communication PostProcessor 
```

在 TestPlan 级别，您应该使用 __fifoPut 函数将初始值放入 FIFO。

这将像这样工作：在采样器启动之前，调用 PreProcessor。所有 100 个线程都将阻塞并等待 FIFO 在其中包含一些值。只有一个线程会开始工作，因为 __fifoPut 函数只向 FIFO 中添加了一个值。采样器完成其请求后，将调用 PostProcessor 并将另一个值放入 FIFO。这将解除阻塞另一个线程。等等。

线程解除阻塞的顺序是随机的。如果您需要严格的顺序，您可以使用 FIFO 队列名称，该队列名称按其编号链接线程。

# mysql - 如何查询两个mysql表并提取不在表上或满足条件的结果

> ID：10998974
> 
> 赞同：4
> 
> 时间：2012-06-12T14:40:01.853
> 
> 标签：mysql, select, where

我有两张桌子

## 用户表

```
 user_id | name  |
    1    | peter |
    2    | kofi  |
    3    | sam   |
    4    | nasah |
    5    | sarah |
    6    | david |
    7    | dan   | 
```

## 时间表

```
 time_id | user_id | register
    1    |     1   |  present
    2    |     2   |  absent
    3    |     3   |  absent
    4    |     4   |  present
    5    |     5   |  absent 
```

在“注册”栏下的“时间”表中，用户可以在登录系统时注册“出席”或“不在”。

我想要一个 mysql 查询来选择注册“缺席”或根本没有注册的用户。

返回结果应该是

```
kofi  | absent
sam   | absent
sarah | absent
david | 
dan   | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T15:13:54.333

那这个呢

```
SELECT t2.name, t1.register 
FROM time t1
RIGHT JOIN user t2
ON t2.user_id=t1.user_id
WHERE (t1.register = 'absent' OR t1.register is null) 
```

## [它的工作，在这里测试](http://sqlfiddle.com/#!2/c25ab/1)。

* * *

## 更新 1

根据您的对话，您希望根据时间/日期进一步过滤

***假设我想找出那些在 2012 年 6 月 13 日之前缺席或没有进入系统的人，假设时间表中有一个列名“日期”***

使用以下查询

```
SELECT t2.name, t1.register, t1.mydate 
FROM time t1
RIGHT JOIN user t2
ON t2.user_id=t1.user_id
WHERE 
     (t1.register = 'absent' OR t1.register is null)
     AND
     (t1.mydate <= '2012-06-13' OR t1.mydate is null) 
```

## [这是新要求的演示](http://sqlfiddle.com/#!2/15203/3)

* * *

希望这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:41:47.143

使用此查询：

```
SELECT t1.name,t2.register from user t1 
left join time t2 on t1.user_id=t2.user_id
where t2.register='absent' or t2.register IS NULL; 
```

# c - static inline void 和 void 有什么区别？

> ID：10998975
> 
> 赞同：17
> 
> 时间：2012-06-12T14:40:09.243
> 
> 标签：c, static, inline, void

我正在使用 C 语言并修改以前由其他人编写的代码。我在一些事情上苦苦挣扎，我试图尽可能多地了解正在发生的事情。`static inline void`那么，正如我的问题所述，创建函数之间和`void`创建函数时有什么区别？我提前为这篇长文道歉，但我想让你知道我确实做了一些研究，但不明白我发现了什么。

我发现[了一个让我困惑的解释`static`](http://msdn.microsoft.com/en-us/library/bz4heb45)：

> static 说明符表示该函数不能被其他文件引用；也就是说，名称不是由链接器导出的。

通过阅读本文，我假设引用函数与调用函数不同？我假设是因为这个函数是从另一个 .c 文件中调用的。如果是这样，什么是引用函数？

通过同一个网站，他们解释了[内联函数](http://msdn.microsoft.com/en-us/library/cx3b23a3)，我不明白这是什么意思。

> __inline 关键字告诉编译器将函数定义中的代码替换为函数调用的每个实例。但是，替换仅由编译器自行决定。例如，如果函数的地址被占用或太大而无法内联，则编译器不会内联函数。

啊？？？

非常感谢任何帮助，我再次为这篇非常长的帖子道歉。

**以下位于 file1.c 中（使用通用名称，因为我认为这并不重要）**

```
COMPLEX cNoiseSample;
CGauss( &cNoiseSample, loopbackRadio->pState ); 
```

**以下位于file2.c中**

```
static inline void CGauss( COMPLEX * pcGauss, P_OS_UNIFORM_RAND_STATE pState )
{
    //code
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T14:44:44.547

`static`意味着它不能被另一个编译单元（源文件）引用。“引用”是指被调用或以其他方式引用的名称，例如分配给函数指针。

`inline`是对编译器的一个提示，即函数的代码应该在调用它的地方内联生成，而不是作为要分支到的单独函数生成。这通常是出于性能原因。处理微软的报价：

> 如果函数的地址被占用或太大而无法内联，则编译器不会内联函数。

内联函数没有地址，因为它不作为单独的实体存在。它的代码与调用它的代码无缝地交织在一起。因此，如果您获取函数的地址（例如分配给指针），那么编译器必须将其生成为真正的函数，并且不能内联它。

`void`表示函数不返回值。

* * *

查看您的代码示例后，我猜想`CGauss()`某处有一个单独的定义，它是从**file1.c**调用的，而**file2.c**正在调用它自己的私有版本。要么，要么**file1.c**是`#include`ing **file2.c**。这会很讨厌。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T14:43:50.240

`static`仅当您拥有多个源文件时才有意义。它指定`static`不能从不同文件中的函数访问函数或变量。

`inline`是一种编译器优化，可在某些情况下加速您的代码。每当你调用一个函数时，都会有一些与之相关的开销。因此，编译器可以做的是通过复制+粘贴（几乎）内联代码来完全摆脱该函数。

下面是一个内联的例子：

```
int dotproduct(int x1, int y1, int x2, int y2) {
    return multiply(x1,x2)+multiply(y1,y2);
}

inline int multiply(int a, int b) {
    return a*b;
} 
```

编译器会将其转换为：

```
int dotproduct(int x1, int y1, int x2, int y2) {
    return x1*x2+y1*y2;
} 
```

如果你想花哨，你也可以内联 dotproduct 函数；）

请注意，`inline`关键字只是推动编译器内联某些函数。它可能会或可能不会真正做到，这取决于它自己的判断。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-12T14:48:47.447

**静态关键字**

定义一个 C 函数静态意味着（如文档所说）该函数只能从定义它的源文件中访问。在这种情况下，术语“引用”意味着调用此函数或例如获取指向它的函数指针.

**内联**

通常，当您用 C 编写函数时，编译器会为该函数生成机器码：

```
foo:
   /* some machine code */
   ret 
```

每次调用此函数时，编译器都会插入一条指令，例如

```
 call <foo> 
```

进入调用者的机器代码，这意味着“跳转到 foo，执行你在那里找到的内容，当你遇到 ret 指令时，返回这个位置”。

相反，对于内联函数，编译器不会生成单独的函数 foo()，而是将函数 foo 的机器代码插入每个调用站点。执行此代码时，效果相同。

那么我们为什么要这样做呢？内联代码的优点是节省了两次跳转（调用和各自的 ret），这使您的代码执行得更快一些。不利的一面是，您的代码会变得更大，因为您在每个调用站点上都插入了机器代码，而不是只有一个可调用函数的副本。这就是为什么你通常只内联小函数的原因。

此外，您不能将函数指针指向内联函数，并且调试变得更加困难，因为您不能轻松地在内联函数上设置断点。

因此，内联留给编译器作为优化选项，通过使用诸如 C++ 的 inline、您的**inline 指令或 GCC 的 __attribute** ((inline)) 之类的关键字，您只会向编译器提示内联可能值得在这里尝试.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-20T20:59:58.537

我想补充以上所有内容，在阅读以上内容之前，了解 c 编程的工作原理很重要。如果您只是编写开放代码，例如

```
Setup(){
    int MainVar
}

MyRoutine(){
   int myVar1;
   int myVar2;
   bool myVar3;
   // Do stuff with myVars
   MainVar = myVar1 - myVar2;
   myVar3 = true;
} 
```

然后任何人都可以直接从第二个程序访问 MyRoutine.myVar1。他们可以在 MyRoutine 中使用它之前更改 myVar2 的值，（1\. 如果它不受保护，2\. 如果他们知道它在那里，3\. 如果他们知道它的作用）//Do stuff，从而改变了什么原程序员打算。

想象一下，您正在编写一个银行程序，并且让代码易受攻击，因此有人可以更改存款的价值，而无需在您的例程中更改来自另一家银行的 WITHDRAWL。其他人可能会出现并编写一个单独的程序来将该值更改 2 或 10，并在不存在的地方创造货币。但是，如果您在代码、例程、方法或变量之前加上 STATIC，则这些项目不能被另一个程序访问、查看和最重要的更改。

您可以在任何时候使用静态，使整个例程关闭，或仅关闭单个变量。因此允许其他人对您的代码的某些方面进行更改，但保留那些需要保护的方面。

在 MyRoutine 中设置静态会阻止某人从另一个程序执行 MyRoutine。由于 MyVar 是在 MyRoutine 中声明的，因此无法从其他程序访问它们。但是如果在程序的其他地方声明了一个名为 MainVar 的变量，它就可以访问。

```
Setup(){
    int MainVar  // This can be accessed from outside this code
}

static MyRoutine(){  // Because of static these vars are not
   int myVar1;
   int myVar2;
   bool myVar3;
   // Do stuff with myVars
   MainVar = myVar1 - myVar2;
   myVar3 = true;
} 
```

在这里，只有带有静态的变量受到保护。myVar3 可以从其他地方读取，通知另一个例程交换已完成。

```
Setup(){
    int MainVar    // This can be accessed from outside this code
}

MyRoutine(){
   static int myVar1;  // This can NOT be accessed from outside this code
   static int myVar2;  // This can NOT be accessed from outside this code
   bool myVar3;        // This can be accessed from outside this code
   // Do stuff with myVars
   MainVar = myVar1 - myVar2;
   myVar3 = true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T14:46:14.967

静态只是意味着本质上该函数在定义它的源文件之外用于所有意图和目的“不可见”。

inline 要求编译器在编译时调用函数的每个位置将函数调用代码直接替换到源代码中（例如用函数代码替换函数调用） - 但是，不能保证会发生，它只是向您的编译器建议它。

它比这更具技术性，您可能会得到更好的答案，但用简单的语言来说，这就是术语的含义。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-01-06T00:39:41.857

就是这么简单。

`void*`可以返回一个 void 指针（任何引用）。但`void`不能退任何东西。

例如：

# 1)

```
int x=7;

void *abc()    
{    
    return &x;    
}     

int main()    
{    
    printf("%d\n",*((int*)(abc())));    
} 
```

> 输出：7

# 2)

```
int x=7;

void abc()    
{    
    return &x;    
}

int main()    
{    
    printf("%d\n",*((int*)(abc())));    
} 
```

它将产生编译错误`printf("%d\n",*((int*)(abc())));`

因为`void`不能退货。

# c# - C# Open XML SDK 2.0 Excel 电子表格 - 从字符串数组加载单元格范围

> ID：10998977
> 
> 赞同：1
> 
> 时间：2012-06-12T14:40:22.180
> 
> 标签：c#, excel, insert, openxml, rows

在 .Net windows 桌面应用程序中，我能够将数据字符串数组导入 Excel 电子表格中的一系列单元格。C#代码如下：

```
using Excel = Microsoft.Office.Interop.Excel;

// Create Application, Workbook, and Worksheet
xlApp = new Microsoft.Office.Interop.Excel.Application();
xlWorkBook = xlApp.Workbooks.Add(misValue);
xlWs = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

// Move data from temp array into Excel spreadsheet.
Excel.Range c1 = (Excel.Range)xlWs.Cells[startRowNum, 1];
Excel.Range c2 = (Excel.Range)xlWs.Cells[startRowNum + myTable.Rows.Count - 1,   Columns.Count];
Excel.Range range = xlWs.get_Range(c1, c2);
range.Value = tempArray; 
```

我正在尝试在 ASP.Net 网页中复制此过程。使用 Visual Studio 2010 和 C#。如何将字符串数组同样导入 Open XML SDK 2.0 Excel 电子表格单元格范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T04:12:42.607

正如所回答的，图书馆可能更容易使用。另一种库选择是[SpreadsheetLight](http://spreadsheetlight.com/)。下面是代码的样子：

```
SLDocument sl = new SLDocument("YourFile.xlsx");
// row 1 column 1
sl.SetCellValue(1, 1, "String1");
// row 1 column 2
sl.SetCellValue(1, 2, "String2");
sl.SaveAs("AnotherFile.xlsx"); 
```

您不必担心设置单元格值的顺序。在内部，SpreadsheetLight 在 Open XML SDK 上运行。免责声明：我写了 SpreadsheetLight。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T16:36:11.147

直接使用 OpenXML SDK 而不是通过 Excel 的自动化模型要复杂得多且容易出错。因此，我建议为此使用库；特别是如果您的任务变得更复杂（例如[http://excelpackage.codeplex.com/](http://excelpackage.codeplex.com/)）。 **编辑**：可以在这里找到使用 ExcelPackage 进行类似操作的示例：[http](http://excelpackage.codeplex.com/wikipage?title=Using%20a%20template%20to%20create%20an%20Excel%20spreadsheet) ://excelpackage.codeplex.com/wikipage?title=Using%20a%20template%20to%20create%20an%20Excel%20spreadsheet虽然我不知道与使用原始 SDK 相比，期望的性能如何，我猜 ExcelPackage 无论如何都在内部使用 SDK，因此它可能会产生一些开销。可能只有针对您的具体场景的测量才能在这里提供明确的答案。

如果您想坚持使用 SDK，尽管这是将字符串插入 Excel 工作簿的示例：

```
string filePath = "workbook.xlsx";
string sheetName = "Sheet1";
uint startRow = 9;
string columnName = "C";
string[] data = new string[] { "A", "B", "C" };

using (var spreadsheetDocument = SpreadsheetDocument.Open(filePath, true))
{
    // Find the Id of the worksheet in question
    var sheet = spreadsheetDocument.WorkbookPart.Workbook
        .Sheets.Elements<Sheet>()
        .Where(s => s.Name == sheetName).First();
    var sheetReferenceId = sheet.Id;

    // Map the Id to the worksheet part
    WorksheetPart worksheetPart = (WorksheetPart)spreadsheetDocument.WorkbookPart.GetPartById(sheetReferenceId);
    var sheetData = worksheetPart.Worksheet.GetFirstChild<SheetData>();

    // Inset the data at the given location
    for (uint i = 0; i < data.Length; i++)
    {
        uint rowNumber = startRow + i;

        // Find the XML entry for row i
        var row = sheetData.Elements<Row>().Where(r => r.RowIndex == rowNumber).FirstOrDefault();
        if (row == null)
        {
            // Row does not exist yet, create it
            row = new Row();
            row.RowIndex = rowNumber;

            // Insert the row at its correct sequential position
            Row rowAfter = null;
            foreach (Row otherRow in sheetData.Elements<Row>())
            {
                if (otherRow.RowIndex > row.RowIndex)
                {
                    rowAfter = otherRow;
                    break;
                }
            }

            if (rowAfter == null)
                // New row is the last row in the sheet
                sheetData.Append(row);
            else
                sheetData.InsertBefore(row, rowAfter);
        }

        // CellReferences in OpenXML are "normal" Excel cell references, e.g. D15
        string cellReference = columnName + rowNumber.ToString();

        // Find cell in row
        var cell = row.Elements<Cell>()
            .Where(c => c.CellReference == cellReference)
            .FirstOrDefault();
        if (cell == null)
        {
            // Cell does not exist yet, create it
            cell = new Cell();
            cell.CellReference = new StringValue(cellReference);

            // The cell must be in the correct position (e.g. column B after A)
            // Note: AA must be after Z, so a normal string compare is not sufficient
            Cell cellAfter = null;
            foreach (Cell otherCell in row.Elements<Cell>())
            {
                // This is ugly, but somehow the row number must be stripped from the
                // cell reference for comparison
                string otherCellColumn = otherCell.CellReference.Value;
                otherCellColumn = otherCellColumn.Remove(otherCellColumn.Length - rowNumber.ToString().Length);

                // Now compare first to length and then alphabetically
                if (otherCellColumn.Length > columnName.Length ||
                    string.Compare(otherCellColumn, columnName, true) > 0)
                {
                    cellAfter = otherCell;
                    break;
                }
            }

            if (cellAfter == null)
                // New cell is last cell in row
                row.Append(cell);
            else
                row.InsertBefore(cell, cellAfter);
        }

        // Note: This is the most simple approach.
        //       Normally Excel itself will store the string as a SharedString,
        //       which is more difficult to implement. The only drawback of using
        //       this approach though, is that the cell might have been the only
        //       reference to its shared string value, which is not deleted from the
        //       list here.
        cell.DataType = CellValues.String;
        cell.CellValue = new CellValue(data[i]);
    }
} 
```

请注意，这个例子并不完美，因为它根本没有考虑复杂的场景（例如样式、打印边距、合并单元格......）。对于生产用途，您可能希望将某些功能提取到方法中（例如在正确的位置插入行或单元格），甚至单独提取到类中（例如，关于按正确顺序比较单元格引用的部分）。

**编辑**：使用 SDK 而不是通过自动化模型的性能要好得多（这可能是 SDK 的第二个巨大优势，第一个是您不需要安装 Excel）。如果您仍然看到性能瓶颈，这里有一些改进的想法：

1.  确保已经在模板文档中创建了单元格（例如，在每个使用 Excel 中插入一个 0）。这可以节省您创建新单元的工作量。
2.  确保模板中不存在任何单元格，然后按顺序创建所有单元格（节省您至少为行找到正确插入位置的工作）。
3.  直接操作 XML，难度更大，需要更多了解 OpenXML 的内部工作原理。对于相当统一的文档，这可能是可以接受的。

# c# - NHibernate 列表索引映射到不可为空的数据库列

> ID：10998979
> 
> 赞同：2
> 
> 时间：2012-06-12T14:40:31.023
> 
> 标签：c#, nhibernate, list, indexing

我正在尝试使用 NHibernate 映射一个列表，该列表是父子关系的一部分。数据库结构为：

```
CREATE TABLE [dbo].[salesvouchers](
[ID] [int] IDENTITY(1,1) NOT NULL,
[id_vouchertype] [int] NOT NULL,
[id_salespoint] [int] NOT NULL) /*and a couple more fields*/
CREATE TABLE [dbo].[salesvouchersitems](
[ID] [int] IDENTITY(1,1) NOT NULL,
[id_salesvoucher] [int] NOT NULL,
[itemposition] [int] NOT NULL) 
```

这两个表都通过具有外键的 id_salesvoucher 列相关联。问题是 itemposition 列是 SalesVoucherItem 列表的索引。将此映射文件用于 salesvoucher 类：

```
<class name="SalesVoucher" table="salesvouchers">
      <id name="Id" column="id">
         <generator class="native" />
      </id>
      <list name="Items" table="salesvouchersitems" lazy="true" cascade="all-delete-orphan">
         <key column="id_salesvoucher"/>
         <index column="itemposition"/>
         <one-to-many class="SalesVoucherItem"/>
      </list>
   <!--and more fields not relevant here-->
   </class> 
```

这似乎很好，但是在进行测试以将新的 SalesVoucher 类插入到列表中的几个 SalesVoucherItem 的数据库中时，它会引发 SQL 错误：“无法将 NULL 插入 itemposition 列。列不接受空值”

似乎 NH 试图在该位置插入一个 NULL ，这对我来说没有意义，因为列表中的索引是强制性数据，应该在数据库中声明为这样。有任何想法吗？谢谢您的帮助！问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:48:08.670

您必须将 itemposition 列公开为属性并设置其值。NHibernate 无法为您做到这一点。

# python - wxpython 安装了 wxmac 自制公式：如何开始工作？

> ID：10998981
> 
> 赞同：0
> 
> 时间：2012-06-12T14:40:36.267
> 
> 标签：python, macos, wxpython, osx-lion, homebrew

我安装了 wxmac (wx) homebrew formular`--python`和`--devel`选项以获得 python 和 64 位支持。现在，如果我尝试从 wxPyWiki运行[入门示例，我会收到以下错误：](http://wiki.wxpython.org/Getting%20Started#A_First_Application%3a_.22Hello.2C_World.22)

```
This program needs access to the screen
Please run with a Framework build of python, and only when you
are logged in the main display of your Mac. 
```

我尝试运行程序的方式是简单地输入`python wx.py`iTerm2，然后我得到了响应。

有什么问题，我该如何让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:59:51.970

从 python.org 下载名为“Python 2.7.3 Mac OS X 64-bit/32-bit x86-64/i386 Installer”的 64 位 Mac Python 版本。然后访问 wxPython 的网站并下载开发可可构建，因为这是唯一可用于 Mac 的 64 位 wxPython。然后，当它们都安装时，它应该可以工作。

# qmake - 无法从 .pri 文件设置 OBJECTS_DIR

> ID：10998983
> 
> 赞同：1
> 
> 时间：2012-06-12T14:40:38.000
> 
> 标签：qmake

我想为所有目标文件创建一个目录并创建像这样设置 OBJECTS_DIR 的 Common.pri 文件

```
OBJECTS_DIR = $$PWD/../ 
```

但是当构建项目时，我在给定的目录中找不到 obj 文件。如果我直接在 .pro 文件中写这个，我会得到预期的结果。我成功地包含了 Common.pri 文件。我用

```
!include( ../../Common.pri)::warning(Fail to include Common.pri) 
```

如何实现我想要的。我在谷歌找不到任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:52:48.457

[PWD](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#pwd)变量指定通向包含正在解析的当前文件的目录的完整路径，也就是说，在您的情况下，通向 Common.pri 文件而不是 .pro 文件的完整路径。我会`warning($$OBJECTS_DIR)`在 .pri 和 .pro 文件中放置一个函数来验证 OBJECTS_DIR 变量的值。

# objective-c - Objective-C 中的 isa 指针

> ID：10998984
> 
> 赞同：17
> 
> 时间：2012-06-12T14:40:37.887
> 
> 标签：objective-c, ios

从这个参考：

> 当一个新对象被创建时，它的内存被分配，它的实例变量被初始化。对象变量中的第一个是指向其类结构的指针。这个称为 isa 的指针使对象可以访问其类，并通过该类访问它所继承的所有类。

根据我对[this](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ObjCRuntimeGuide/ObjCRuntimeGuide.pdf)和[this](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/ObjC.pdf)的理解，它允许使用自省但以务实的方式（iOS 开发），**程序员可以从了解/理解这个特殊指针中受益什么？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-12T14:43:32.350

真正的好处是更好地理解 Objective-C 运行时，与 C++ 等静态语言相比，它实际上相当复杂。`isa`实际上，指针并没有真正使用那么多，除非你正在破解运行时做一些特别的事情。[本指南](https://developer.apple.com/legacy/library/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/CocoaObjects.html)包含有关运行时如何使用它的更多信息。

您不应该真正`isa`在生产代码中直接使用。这就像`retainCount`- 你理解它很重要，但你不应该称之为它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-08T13:49:02.483

在 64 位环境中，不应访问对象的 ISA 字段。ISA 字段不再包含指针。它包括一些指针数据并使用剩余的位来保存其他运行时信息。CLASS 属性或 OBJECT_GETCLASS 函数可用于读取 isa 字段。OBJECT_SETCLASS 可用于写入 isa 字段。

参考： [https ://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaTouch64BitGuide/ConvertingYourAppto64-Bit/ConvertingYourAppto64-Bit.html#//apple_ref/doc/uid/TP40013501-CH3-SW1](https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaTouch64BitGuide/ConvertingYourAppto64-Bit/ConvertingYourAppto64-Bit.html#//apple_ref/doc/uid/TP40013501-CH3-SW1)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-23T18:05:44.310

在运行时，当消息被发送到一个对象时，该对象会转到创建它的类并说：“我收到了这条消息。运行匹配方法的代码。” 这与大多数编译语言不同，其中要执行的方法是在编译时确定的。

* * *

对象如何知道哪个类创建了它？

它使用它的**isa**指针。每个对象都有一个名为 isa 的实例变量。创建对象时，该类将返回对象的 isa 实例变量设置为指向该类。它被称为 isa 指针，因为对象“是”该类的实例。尽管您可能永远不会显式使用 isa 指针，但它的存在使 Objective-C 获得了很大的力量。

* * *

一个对象只有在它的类（由它的 isa 指针指向）实现了相关的方法时才响应消息。因为这发生在运行时，XCode 不能总是在编译时（构建应用程序时）确定对象是否会响应消息。如果 XCode 认为您正在向一个不会响应的对象发送消息，它将给您一个错误，但如果不确定，它将让应用程序构建。

* * *

如果由于某种原因（并且有很多可能性），您最终向不响应的对象发送消息，您的应用程序将引发异常。所以**isa指针是***运行时错误*的原因。让我们在这里查看详细信息和示例：[IOS - Objective-C - Exceptions And Unrecognized Selectors](http://technicaltut.blogspot.com/2016/01/ios-objective-c-exceptions-and-unrecognized-selectors.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T14:43:07.433

isa 指向类对象，所以这可以工作

```
if(self->isa == [self class])
    NSLog(@"True"); 
```

了解如何使用它会有一些好处，例如对创建对象的类对象进行自省和测试

# asp.net-mvc - 在 Telerik MVC 网格中自动生成具有动态对象集合的网格列作为模型

> ID：10998988
> 
> 赞同：0
> 
> 时间：2012-06-12T14:40:50.603
> 
> 标签：asp.net-mvc, telerik-grid, telerik-mvc

我的模型是一个 IEnumerable，我想将它绑定到一个 Telerik mvc 网格。此外，网格应该自动生成列并显示我的动态对象中的所有内容。

我在 Telerik 论坛上找到了几篇关于这个主题的帖子，比如这里：[http ://www.telerik.com/community/forums/aspnet-mvc/general/dynamically-generate-grid-columns.aspx](http://www.telerik.com/community/forums/aspnet-mvc/general/dynamically-generate-grid-columns.aspx)

不幸的是，结果是一样的：网格在页脚中显示了总行数，但没有显示任何行。

有任何想法吗？

**更新：**我在 Telerik 论坛上附加了一个示例项目：[http ://www.telerik.com/community/forums/aspnet-mvc/grid/auto-generate-grid-columns-with-collection-of-dynamic-objects- as-model.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/auto-generate-grid-columns-with-collection-of-dynamic-objects-as-model.aspx)

**更新：**这是试用的示例代码：

索引.cshtml：

```
@model IEnumerable<dynamic>
@(
    Html.Telerik().Grid(Model).Name("Grid")
                .Columns(columns => columns.AutoGenerate(true))
                .Pageable()
                .Sortable()
                .Groupable()
                .Filterable()
) 
```

HomeController.cs：

```
public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View(GetStaticData());
        }

        private static IEnumerable<dynamic> GetStaticData()
        {
            dynamic products = new[]
                                    {
                                         new { ProductID = 1, ProductName = "Motor" },
                                         new { ProductID = 2, ProductName = "Converter" },
                                         new { ProductID = 3, ProductName = "Transformer" }
                                    };

            return products; 
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:39:43.910

这个帖子似乎说它不受支持。 [http://www.telerik.com/community/forums/aspnet-mvc/grid/display-dynamic-objects-in-grid.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/display-dynamic-objects-in-grid.aspx)

这篇文章说您可以重载列绑定并传入属性名称。

[http://www.telerik.com/community/forums/aspnet-mvc/grid/dynamic-view-with-grid.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/dynamic-view-with-grid.aspx)

看起来您可以使用动态数据，但不能使用自动生成的列。

谢谢，

# postscript - 如何为 postscripts curveto 运算符生成控制点？

> ID：10998993
> 
> 赞同：2
> 
> 时间：2012-06-12T14:41:12.647
> 
> 标签：postscript, bezier, spline

我正在寻找一种将一堆连接线渲染为后记中漂亮的连续曲线的方法。渲染曲线穿过我的所有点很重要。

`curveto`似乎是绘制曲线的唯一可用方法，但该功能需要贝塞尔控制点，而我没有。

那么，有没有办法为我的点计算控制点以便`curveto`可以使用？最好在后记中。

作为参考，我之前在 .NET 中使用过[GraphicsPath.addCurve(float[])](http://msdn.microsoft.com/en-us/library/h3t2be9h.aspx)，它在渲染之前在内部转换为三次贝塞尔控制点。我正在后记中寻找类似的东西。

（我可以使用样条函数对点进行插值，然后使用大量单独的线对其进行渲染。看起来不错，但并不是一个很好的解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:53:34.990

如果您使用样条函数对点进行插值，那么您就有一些曲线片段的三次方程。并且可以将它们转换为伯恩斯坦多项式基以找到相应贝塞尔曲线的控制点。

A*t^3+B*t^2+C*t+D = P0*(1-t)^3+P1*3*t*(1-t)^2+P2*3*t^2* (1-t)+P3*t^3

做一些代数 - 扩大括号，等于 t 的相同幂的系数，通过三次方程系数 A，B，C，D 表示 P(i)

```
 p0 = D
 p1 = D + C/3
 p2 = D + C * 2/3 + B/3
 p3 = D + C + B + A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:11:33.957

我通过使用[此处](http://www.codeproject.com/Articles/31859/Draw-a-Smooth-Curve-through-a-Set-of-2D-Points-wit)的代码示例（“使用 Bezier Primitives 通过一组 2D 点绘制平滑曲线”）解决了这个问题。

# javascript - 如何在 TinyMCE 弹出窗口中添加 TinyMCE 编辑器

> ID：10998999
> 
> 赞同：1
> 
> 时间：2012-06-12T14:41:33.270
> 
> 标签：javascript, plugins, popup, tinymce

我有一个 TinyMCE 插件，我想在弹出窗口中动态创建新的 TinyMCE 编辑器。问题是在我的弹出窗口中加载 tiny_mce_popup.js 脚本时我不能这样做，并且该脚本对于我的插件是必需的。有什么解决方法吗？