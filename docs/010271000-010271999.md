# StackOverflow 问答 10271000-10271999

# android - Android - 连接到 MSSQL 在线数据库

> ID：10271004
> 
> 赞同：0
> 
> 时间：2012-04-22T18:51:37.557
> 
> 标签：android

我是 Android 编程新手。我有一个带有 sql 2008 db 的网站，现在我想让用户能够使用他们的智能手机向这个 db 输入数据。我想知道建立它的最佳方法是什么。因为我是新手，所以我不想构建不那么专业的东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:06:10.727

如果我是你，我会考虑以下两种选择：

1.  拥有针对移动使用优化的 Web 应用程序；

    优点：

    *   更新立即交付，因为没有客户端应用程序，一切都在服务器上完成；

    *   Web 应用程序可以在许多带有浏览器的设备上使用，而不仅仅是 Android：iPhone、Blackberry、PC、Mac 等；

    缺点：

    *   用户需要在线才能使用该应用程序；

    *   您无法利用本机设备应用程序可用的本机 UI 组件；

2.  编写将通过 Web 应用程序公开的多个 REST 端点与数据库一起工作的 Android 应用程序（再次）；

    利弊与您在第一个选项中的完全相反。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T09:07:19.403

对我来说正确的答案是使用 KSoap 库。我很容易，而且效果很好。这是一个教程，将向您展示如何逐步完成。

[http://java.dzone.com/articles/invoke-webservices-android](http://java.dzone.com/articles/invoke-webservices-android)

# c - 如何在 C 中拆分包含 ;s 的 txt 文件？

> ID：10271005
> 
> 赞同：1
> 
> 时间：2012-04-22T18:51:42.917
> 
> 标签：c

我想拆分这个txt文件。如何将它与分号分开？它必须在 C 中。

x.txt：

```
stack;can;3232112233;asdasdasdasd 
```

结果

```
string[0]=stack
string[1]=can 
```

等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:55:38.640

看这个例子：

```
#include <stdio.h>
#include <string.h>

int main(void) {

    int j, i=0; // used to iterate through array

    char userInput[81], *token[80]; //user input and array to hold max possible tokens, aka 80.

    printf("Enter a line of text to be tokenized: ");
    fgets(userInput, sizeof(userInput), stdin);

    token[0] = strtok(userInput, ";"); //get pointer to first token found and store in 0
                                       //place in array
    while(token[i]!= NULL) {   //ensure a pointer was found
        i++;
        token[i] = strtok(NULL, " "); //continue to tokenize the string
    }

    for(j = 0; j <= i-1; j++) {
        printf("%s\n", token[j]); //print out all of the tokens
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:53:51.017

使用将完整文件读入缓冲区[`fread`](https://stackoverflow.com/questions/174531/easiest-way-to-get-files-contents-in-c/174552#174552)，然后使用[`strtok`](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)with`;`作为分隔符并继续保存您的字符串。

# wpf - 使用 WPF 附加属性来布局 LOB 表单

> ID：10271008
> 
> 赞同：0
> 
> 时间：2012-04-22T18:52:36.743
> 
> 标签：wpf, xaml, attached-properties, lob

我在我的应用程序中编写了很多数据输入类型的表单，我得出的结论是我需要让它变得更容易一些。在做了一些阅读之后，似乎可以使用子类 ItemsControl 来表示表单。

我已经这样做了，现在有类似的东西

```
<MySubClassedForm></MySubClassedForm> 
```

我现在想做的是设置一个附加属性，比如“LabelText”，这样它就可以在里面的任何控件上使用。

举个例子，

```
<MySubClassedForm>
<TextBox MySubClassedForm.LabelText="Surname" />
<Image MySubClassedForm.LabelText="LabelText" />
</MySubClassedForm> 
```

附加属性定义：-

```
 public static DependencyProperty LabelTextProperty = DependencyProperty.RegisterAttached("LabelText", typeof(string), typeof(MySubclassedForm),
         new UIPropertyMetadata(string.Empty));

        public string LabelText
        {
            get { return (string)GetValue(LabelTextProperty); }
            set { SetValue(LabelTextProperty, value); }
        } 
```

我首先将附加属性放在 MySubClassedForm 上，然后出现以下错误：-
*附加属性“MySubClassedForm.LabelText”未在“TextBox”或其基类之一上定义。*

请你能告诉我我做错了什么以及我需要做些什么来完成这项工作吗？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:01:14.920

您需要定义静态 getter 和 setter 方法：

```
public static readonly DependencyProperty LabelTextProperty =
    DependencyProperty.RegisterAttached(
        "LabelText", typeof(string), typeof(MySubclassedForm),
        new UIPropertyMetadata(string.Empty)); 

public static string GetLabelText(DependencyObject obj) 
{ 
    return (string)obj.GetValue(LabelTextProperty);
}

public static void SetLabelText(DependencyObject obj, string value) 
{ 
    obj.SetValue(LabelTextProperty, value); 
} 
```

在此处获取有关[自定义附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx#custom)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:58:53.140

你应该看看[magellan](http://code.google.com/p/magellan-framework/wiki/Forms) 它既有 WPF 表单引擎，又有优秀的 MVC 框架。任何一个都可以在没有另一个的情况下使用。

它让你做

```
<Form>
    <Field For="{Binding Path=Server.Server}" />
    <Field For="{Binding Path=Server.CachedExchangeMode}" />
    <Field For="{Binding Path=Server.Username}" />
    <Field For="{Binding Path=Server.SecurityMode}" />
</Form> 
```

这将为您的视图模型上的属性自动生成正确的输入字段类型。

# ruby-on-rails - 如何在heroku中将域添加到rails应用程序

> ID：10271017
> 
> 赞同：2
> 
> 时间：2012-04-22T18:53:16.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, dns

我将我的应用程序部署到heroku，并将我的godaddy域添加到heroku：

```
heroku domains:add www.domain.com
heroku domains:add domain.com 
```

但是当我输入时`domain.com`有时它不起作用，它会将我重定向到godaddy。只有 `www.domain.com`工作正常。我在配置中有什么遗漏吗？这是我的 DNS 记录设置

主持人

```
 @    68.178.232.100 

   @    75.101.145.87 
   @    75.101.163.44 

   @    174.129.212.2 
```

C-NAME（别名）

```
 www          proxy.heroku.com 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T19:26:43.637

根据您的描述，您的 Heroku 设置很好。您需要确保您的 GoDaddy DNS 记录正确指向 Heroku，特别是您的 @ 记录设置正确，以便根域由 Heroku 处理。

**更新：**

Heroku IP 是：

```
75.101.163.44
75.101.145.87
174.129.212.2 
```

`68.178.232.100`是GoDaddy。删除那条记录，你应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:37:48.860

检查您的 DNS 设置。如果您的 DNS 设置正确，您可能只需要等待它传播到其他域名服务器，这可能需要长达一周的时间。很可能只需要一两天。

# android - “位图太大，无法上传到纹理中”

> ID：10271020
> 
> 赞同：157
> 
> 时间：2012-04-22T18:53:32.647
> 
> 标签：android, android-imageview, android-image, android-bitmap

我正在将位图加载到 ImageView 中，并看到此错误。我收集此限制与 OpenGL 硬件纹理 (2048x2048) 的大小限制有关。我需要加载的图像是大约 4,000 像素高的双指缩放图像。

我试过在清单中关闭硬件加速，但没有任何乐趣。

```
 <application
        android:hardwareAccelerated="false"
        ....
        > 
```

是否可以将大于 2048 像素的图像加载到 ImageView 中？

* * *

## 回答 #1

> 赞同：409
> 
> 时间：2013-02-14T14:57:56.970

这不是问题的直接答案（加载图像> 2048），而是任何遇到错误的人的可能解决方案。

就我而言，图像在两个维度上都小于 2048（准确地说是 1280x727），并且在 Galaxy Nexus 上特别遇到了这个问题。图像在`drawable`文件夹中，没有任何合格的文件夹。Android 假定没有密度限定符的可绘制对象是 mdpi，并针对其他密度将它们放大或缩小，在这种情况下，xhdpi 放大了 2 倍。移动罪魁祸首图像以`drawable-nodpi`防止缩放解决了该问题。

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2013-03-27T17:57:55.530

我以这种方式缩小了图像：

```
ImageView iv  = (ImageView)waypointListView.findViewById(R.id.waypoint_picker_photo);
Bitmap d = new BitmapDrawable(ctx.getResources() , w.photo.getAbsolutePath()).getBitmap();
int nh = (int) ( d.getHeight() * (512.0 / d.getWidth()) );
Bitmap scaled = Bitmap.createScaledBitmap(d, 512, nh, true);
iv.setImageBitmap(scaled); 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2012-04-22T19:02:27.397

所有渲染都基于 OpenGL，所以你不能超过这个限制（`GL_MAX_TEXTURE_SIZE`取决于设备，但最小值是 2048x2048，所以任何低于 2048x2048 的图像都可以）。

有了这么大的图像，如果你想在手机上放大，你应该设置一个类似于你在谷歌地图中看到的系统。将图像分成几部分和几个定义。

或者您可以在显示之前缩小图像（请参阅[user1352407](https://stackoverflow.com/questions/10271020/bitmap-too-large-to-be-uploaded-into-a-texture/15666017#15666017)对此问题的回答）。

另外，请注意您将图像放入哪个文件夹，Android 可以自动放大图像。看看下面[Pilot_51](https://stackoverflow.com/questions/10271020/bitmap-too-large-to-be-uploaded-into-a-texture/14877627#14877627)对这个问题的回答。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2015-03-21T04:23:09.803

与其花费数小时尝试手动编写/调试所有这些下采样代码，不如使用`Picasso`? 它是为处理`bitmaps`所有类型和/或大小而设计的。

我已经使用这行代码来消除我的**“位图太大......”**问题：

```
Picasso.load(resourceId).fit().centerCrop().into(imageView); 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2016-11-27T11:55:14.273

在 ( ) 中添加以下 2 个属性`AndroidManifest.xml`对我有用：

```
android:largeHeap="true"
android:hardwareAccelerated="false" 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-12-29T12:59:56.153

`drawable-nodpi`将图像文件从文件夹更改为文件`drawable`夹对我有用。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-07-30T20:53:32.133

我用毕加索也遇到了同样的问题。图像至少在尺寸、宽度或高度方面太大。最后我在这里找到了解决方案。您可以根据显示尺寸缩小大图像并保持纵横比：

```
 public Point getDisplaySize(Display display) {
    Point size = new Point();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
        display.getSize(size);
    } else {
        int width = display.getWidth();
        int height = display.getHeight();
        size = new Point(width, height);
    }

    return size;
} 
```

并使用此方法通过 Picasso 加载图像：

```
 final Point displySize = getDisplaySize(getWindowManager().getDefaultDisplay());
        final int size = (int) Math.ceil(Math.sqrt(displySize.x * displySize.y));
        Picasso.with(this)
                .load(urlSource)
                .resize(size, size)
                .centerInside()
                .into(imageViewd); 
```

同样为了获得更好的性能，您可以根据显示屏的宽度和高度下载图像，而不是整个图像：

```
 public String reviseImageUrl(final Integer displayWidth,     final Integer displayHeight,
        final String originalImageUrl) {
    final String revisedImageUrl;

    if (displayWidth == null && displayHeight == null) {
        revisedImageUrl = originalImageUrl;
    } else {
        final Uri.Builder uriBuilder = Uri.parse(originalImageUrl).buildUpon();

        if (displayWidth != null && displayWidth > 0) {
            uriBuilder.appendQueryParameter(QUERY_KEY_DISPLAY_WIDTH, String.valueOf(displayWidth));
        }

        if (displayHeight != null && displayHeight > 0) {
            uriBuilder.appendQueryParameter(QUERY_KEY_DISPLAY_HEIGHT, String.valueOf(displayHeight));
        }

        revisedImageUrl = uriBuilder.toString();
    }

    return revisedImageUrl;
}

    final String newImageUlr = reviseImageUrl(displySize.x, displySize.y, urlSource); 
```

接着：

```
 Picasso.with(this)
                .load(newImageUlr)
                .resize(size, size)
                .centerInside()
                .into(imageViewd); 
```

**编辑：getDisplaySize()**

`display.getWidth()/getHeight()`已弃用。而不是`Display`使用`DisplayMetrics`.

```
public Point getDisplaySize(DisplayMetrics displayMetrics) {
        int width = displayMetrics.widthPixels;
        int height = displayMetrics.heightPixels;
        return new Point(width, height);
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-04-18T21:45:47.417

`BitmapRegionDecoder`成功了。

您可以覆盖`onDraw(Canvas canvas)`、启动新线程并解码用户可见的区域。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-01-05T15:40:36.763

正如 Larcho 所指出的，从 API 级别 10 开始，您可以使用`BitmapRegionDecoder`从图像中加载特定区域，然后，您可以通过仅在内存中分配所需区域来完成以高分辨率显示大图像。我最近开发了一个库，它通过触摸手势处理提供大图像的可视化。[源代码和示例可在此处获得](https://github.com/diegocarloslima/ByakuGallery)。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-02-05T10:51:43.600

查看级别

您可以使用以下代码在运行时为单个视图禁用硬件加速：

myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-05-17T15:28:37.563

我遇到了同样的问题，这是我的解决方案。将图像的宽度设置为与android屏幕宽度相同，然后缩放高度

```
Bitmap myBitmap = BitmapFactory.decodeFile(image.getAbsolutePath());
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y;
Log.e("Screen width ", " "+width);
Log.e("Screen height ", " "+height);
Log.e("img width ", " "+myBitmap.getWidth());
Log.e("img height ", " "+myBitmap.getHeight());
float scaleHt =(float) width/myBitmap.getWidth();
Log.e("Scaled percent ", " "+scaleHt);
Bitmap scaled = Bitmap.createScaledBitmap(myBitmap, width, (int)(myBitmap.getWidth()*scaleHt), true);
myImage.setImageBitmap(scaled); 
```

这对于任何尺寸的安卓屏幕都更好。请让我知道这对你有没有用。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-02-27T12:39:24.610

缩小图像：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;

// Set height and width in options, does not return an image and no resource taken
BitmapFactory.decodeStream(imagefile, null, options);

int pow = 0;
while (options.outHeight >> pow > reqHeight || options.outWidth >> pow > reqWidth)
    pow += 1;
options.inSampleSize = 1 << pow; 
options.inJustDecodeBounds = false;
image = BitmapFactory.decodeStream(imagefile, null, options); 
```

图像将按 reqHeight 和 reqWidth 的大小缩小。据我了解， inSampleSize 仅采用 2 个值的幂。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-05-17T06:56:06.703

使用 Glide 库而不是直接加载到 imageview

滑翔：[https ://github.com/bumptech/glide](https://github.com/bumptech/glide)

```
Glide.with(this).load(Uri.parse(filelocation))).into(img_selectPassportPic); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-05T11:19:40.867

我一个接一个地尝试了上述所有解决方案，持续了好几个小时，但似乎都没有奏效！最后，我决定四处寻找有关使用 Android 相机捕获图像并显示它们的官方示例。官方的例子（[这里](http://developer.android.com/training/camera/photobasics.html)），终于给了我唯一有效的方法。下面我介绍我在该示例应用程序中找到的解决方案：

```
public void setThumbnailImageAndSave(final ImageView imgView, File imgFile) {

            /* There isn't enough memory to open up more than a couple camera photos */
    /* So pre-scale the target bitmap into which the file is decoded */

    /* Get the size of the ImageView */
    int targetW = imgView.getWidth();
    int targetH = imgView.getHeight();

    /* Get the size of the image */
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imgFile.getAbsolutePath(), bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    /* Figure out which way needs to be reduced less */
    int scaleFactor = 1;
    if ((targetW > 0) || (targetH > 0)) {
        scaleFactor = Math.min(photoW/targetW, photoH/targetH);
    }

    /* Set bitmap options to scale the image decode target */
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true;

    /* Decode the JPEG file into a Bitmap */
    Bitmap bitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath(), bmOptions);

    /* Associate the Bitmap to the ImageView */
    imgView.setImageBitmap(bitmap);
    imgView.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-21T21:24:51.717

使用正确的**可绘制**子文件夹为我解决了这个问题。我的解决方案是将全分辨率图像 (1920x1200) 放入**drawable-xhdpi**文件夹，而不是**drawable**文件夹。

我还将按比例缩小的图像 (1280x800) 放入**drawable-hdpi**文件夹。

这两个分辨率与我正在编程的 2013 年和 2012 年 Nexus 7 平板电脑相匹配。我还在其他一些平板电脑上测试了该解决方案。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-16T07:19:33.087

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
    ///*
    if (requestCode == PICK_FROM_FILE && resultCode == RESULT_OK && null != data){

        uri = data.getData();

        String[] prjection ={MediaStore.Images.Media.DATA};

        Cursor cursor = getContentResolver().query(uri,prjection,null,null,null);

        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(prjection[0]);

        ImagePath = cursor.getString(columnIndex);

        cursor.close();

        FixBitmap = BitmapFactory.decodeFile(ImagePath);

        ShowSelectedImage = (ImageView)findViewById(R.id.imageView);

      //  FixBitmap = new BitmapDrawable(ImagePath);
        int nh = (int) ( FixBitmap.getHeight() * (512.0 / FixBitmap.getWidth()) );
        FixBitmap = Bitmap.createScaledBitmap(FixBitmap, 512, nh, true);

       // ShowSelectedImage.setImageBitmap(BitmapFactory.decodeFile(ImagePath));

        ShowSelectedImage.setImageBitmap(FixBitmap);

    }
} 
```

这段代码是工作

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-30T18:07:12.753

对于那些想要放置小尺寸图像的人的注意事项：

**Pilot_51**的解决方案（将图像移动到`drawable-nodpi`文件夹）有效，但还有另一个问题：它会使图像在屏幕上变得太小，除非图像被调整到非常大（如 2000 x 3800）的分辨率以适合屏幕 - 然后它会使您的应用程序更重.

 ****解决方案**：把你的图像文件放进去`drawable-hdpi`——它对我来说就像一个魅力。**

# path-finding - 游戏寻路

> ID：10271022
> 
> 赞同：5
> 
> 时间：2012-04-22T18:53:36.253
> 
> 标签：path-finding

在所有类型的游戏中都使用了哪些寻路算法？（无论如何，在角色移动的所有类型中）Dijkstra 曾经使用过吗？我并不是真的想编写任何代码。只是做一些研究，但如果你粘贴伪代码或其他东西，那很好（我能理解 Java 和 C++）。

我知道 A* 就像在 2D 游戏中使用的算法。这很好，但不是基于网格的 2D 游戏呢？诸如帝国时代或林克的觉醒之类的东西。没有不同的方形空间可供导航，那么它们是做什么的？

3D游戏有什么作用？我读过这个东西[http://www.ai-blog.net/archives/000152.html](http://www.ai-blog.net/archives/000152.html)，我听说这是这个主题的一个伟大的权威，但它并没有真正解释如何，一旦网格被设置，路径查找完成。如果他们使用的是 A*，那么在 3D 环境中如何完成类似的操作？样条曲线究竟如何用于圆角？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T23:36:31.257

Dijkstra 算法计算从起始位置可到达图中*所有节点的最短路径。*对于普通的现代游戏来说，这既是不必要的，又是极其昂贵的。

您区分了 2D 和 3D，但值得注意的是，对于任何基于图形的算法，搜索空间的维数都没有区别。您链接到的网页讨论了航点图和导航网格；两者都是基于图形的，原则上可以在任意数量的维度上工作。虽然没有“可移动的不同方形空间”，但在空间中*有*独立的“槽”可供 AI 移动，并且由游戏设计师精心布置。

最后，A* 实际上是 3D 游戏和 2D 游戏中使用的算法。让我们看看 A* 是如何工作的：

1.  开始时，您知道当前位置和目标位置的坐标。您对到目的地的距离做出了乐观的估计，例如起始位置和目标之间的直线长度。
2.  考虑图中的相邻节点。如果其中一个是您的目标（或包含它，在导航网格的情况下），您就完成了。
3.  对于每个相邻节点（在导航网格的情况下，这可能是多边形的[几何中心](https://en.wikipedia.org/wiki/Centroid)或某种其他类型的中点），估计沿着那里行驶的相关成本作为两个度量的总和：路径的长度你已经走了这么远，另一个乐观的估计仍然必须走完的距离。
4.  将上一步中的选项按其估计成本以及您之前考虑过的所有选项进行排序，然后选择估计成本最低的选项。从第 2 步开始重复。

有一些细节我这里没有讨论，但是这应该足以看出 A* 基本上是如何独立于你的空间的维数的。您还应该能够看到为什么这适用于连续空间。

有一些密切相关的算法可以处理标准 A* 搜索中的某些问题。例如，递归最佳优先搜索 (RBFS) 和简化的内存有界 A* (SMA*) 需要较少的内存，而实时学习 A* (LRTA*) 允许代理在计算完整路径之前移动。我不知道这些算法是否真的用在现在的游戏中。

至于拐角的圆角，这可以通过距离线（其中拐角被圆弧替换）或任何类型的[样条](https://en.wikipedia.org/wiki/Spline_%28mathematics%29)函数来实现全路径平滑。

此外，算法可能依赖于搜索空间上的梯度（空间中的每个点都与一个值相关联），而不是图。这些可能不适用于大多数游戏，因为它们需要更多的时间和内存，但无论如何可能会很有趣。示例包括各种[爬山算法](https://en.wikipedia.org/wiki/Hill-climbing_algorithm)（默认为实时）和[势场](http://aigamedev.com/open/tutorials/potential-fields/)方法。

也存在从连续空间中以程序方式获取图的方法，例如[单元分解](https://en.wikipedia.org/wiki/Boustrophedon_cell_decomposition)、[Voronoi 骨架](http://www.inf.u-szeged.hu/~palagyi/skel/skel.html)化和[概率路线图骨架](https://en.wikipedia.org/wiki/Probabilistic_roadmap)化。前者会产生与导航网格兼容的东西（尽管可能很难使其与手工制作的导航网格同样有效），而后两者会产生更像航点图的结果。所有这些，以及潜在的场方法和 A* 搜索，都与机器人技术相关。

* * *

资料来源：

*   [人工智能：现代方法](http://aima.cs.berkeley.edu/index.html)，第 2 版
*   [算法设计与分析导论](http://www.pearsonhighered.com/educator/product/Introduction-to-the-Design-and-Analysis-of-Algorithms-3E/9780132316811.page),第2版

# c++ - 加载 .obj 文件时出现链接器错误

> ID：10271023
> 
> 赞同：-1
> 
> 时间：2012-04-22T18:53:37.923
> 
> 标签：c++, visual-studio-2010, visual-studio

我正在尝试使用此[obj 加载器加载](http://www.kixor.net/dev/objloader/)包含球体顶点的 obj 文件，并且在编译时出现此错误：

`1>ShaderPerspective.obj : error LNK2019: unresolved external symbol "public: int __thiscall objLoader::load(char *)" (?load@objLoader@@QAEHPAD@Z) referenced in function "void __cdecl loadObj(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?loadObj@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z`)

失败的代码是：

```
void loadObj(const std::string &strObjFile)
{
    objLoader *objData = new objLoader();
    objData->load("data\\sphere.obj");  
} 
```

我知道这是一个链接器错误，但作为 c++ 和 Visual Studio 的初学者，如果有人能指出我如何让​​它工作的正确方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:06:28.123

你试过什么？我怀疑您只需要将其项目作为解决方案的一部分。或者可能只是将其 .obj 文件添加到链接器选项中。

# iphone - 延迟 imageviews xcode

> ID：10271028
> 
> 赞同：0
> 
> 时间：2012-04-22T18:54:09.833
> 
> 标签：iphone, ios, xcode, imageview, delay

我点击播放按钮 6 个图像视图将被按下的图像填充，我希望它查看 1、等待 1 秒、查看 2、等待 1 秒等。

我应该添加哪些代码：

```
[imageview7 setImage:imageview1HG.image];
      [imageview8 setImage:imageview2HG.image];
        [imageview9 setImage:imageview3HG.image];
        [imageview10 setImage:imageview4HG.image];
        [imageview11 setImage:imageview5HG.image];
        [imageview12 setImage:imageview6HG.image]; 
```

我试过这个：但它不起作用：

```
[self performSelector:@selector(GameViewController)  withObject:nil afterDelay:1]; 
```

希望有人知道再见谢谢

**编辑更多解释我的代码**

```
-(IBAction)play {

 [self performSelector:@selector(delay) withObject:nil afterDelay:5.0];

play.enabled=NO;

UIImage *img = [UIImage imageNamed:@""];

if (imageview7.image == nil) {

    if([textview.text isEqualToString:labelsText.text]){

        -(void)delay {
        [imageview7 setImage:imageview1HG.image];
        [imageview8 setImage:imageview2HG.image];
        [imageview9 setImage:imageview3HG.image];
        [imageview10 setImage:imageview4HG.image];
        [imageview11 setImage:imageview5HG.image];
            [imageview12 setImage:imageview6HG.image];}
    }
    else {

        -(void)delay {
    [imageview7 setImage:imageview1H.image];
    [imageview8 setImage:imageview2H.image];
    [imageview9 setImage:imageview3H.image];
    [imageview10 setImage:imageview4H.image];
    [imageview11 setImage:imageview5H.image];
            [imageview12 setImage:imageview6H.image];} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:57:23.930

我猜你想在延迟后一个接一个地在 UIImageView 上设置图像。这是它的代码。

定义

```
@interface ViewController : UIViewController
{  
    NSMutableArray * imageViews;
    NSMutableArray * images;
    int count;
    NSTimer * timer1;
}
-(void)setImageForView:(UIImageView *)imageView withImage:(UIImage *)image;
-(void)update;
-(IBAction)setImageOnViewOneAfterOther;
@end 
```

定义

```
-(void)setImageForView:(UIImageView *)imageView withImage:(UIImage *)image{

    [imageView setImage:image];
}
-(void)update{

    if (count < [imageViews count]) {
        [self setImageForView:[imageViews objectAtIndex:count] withImage:[images objectAtIndex:count]];
        count ++;
    }else{
        [timer1 invalidate];
    }

}
-(IBAction)setImageOnViewOneAfterOther{
    count = 0;
    imageViews = [[NSMutableArray alloc] initWithObjects:img1v,img2v,img3v,img4v,img5v,img6v, nil]; // Set of all UIImageViews 
    images = [[NSMutableArray alloc] initWithObjects:img1,img2,img3,img4,img5,img6, nil];//Set of all UIImage's where img = [UIImage imageNamed:@"someImage1.png"];
    timer1 = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(update) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:29:13.610

为什么不动画呢？

```
UIImageView* animatedImageView = [[UIImageView alloc]init];
animatedImageView.animationImages = [NSArray arrayWithObjects:    
                                 [UIImage imageNamed:@"1.gif"],
                                 [UIImage imageNamed:@"2.gif"],
                                 [UIImage imageNamed:@"3.gif"],
                                 [UIImage imageNamed:@"4.gif"], nil]; //etc
animatedImageView.animationDuration = float([animatedImageView.animationImages count]);
animatedImageView.animationRepeatCount = 0;
[animatedImageView startAnimating];
[self.view addSubview: animatedImageView]; 
```

# javascript - 为什么页面加载时会执行javascript？

> ID：10271032
> 
> 赞同：0
> 
> 时间：2012-04-22T18:54:44.873
> 
> 标签：javascript, jsp

我正在使用 JSP 编写一个站点。我在下面包含了一个代码片段。

我遇到的问题是每次页面加载时`addBookmark()`都会执行 javascript 内部的方法，但我没有看到警报。当我按下按钮时，我看到了警报，但`addBookmark()`没有调用该方法。是什么导致了这种奇怪的行为？

```
<% User user = new User() %>
<script type="text/javascript">
   function add()
   {
      <% user.addBookmark(); %>                               
      alert("addBookmark");
   }
</script>

<button type="button" style="float: right" onclick="add()">Bookmark</button> 
```

谢谢是提前！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:59:30.360

JSP 在页面加载时执行，因为 JSP 中的所有命令都在您的服务器上执行。相反，Javascript 仅在浏览器中执行。

所以你看到的是服务器正在构建页面，执行功能，然后输出页面。该功能不再在您的 javascript 中。如果它本身不输出一些javascript代码，至少不会。

当您单击按钮时，jsp 代码已经执行。如果你想在那一刻执行代码，你需要用 javascript 而不是 jsp 编写它，或者使用另一个请求调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T18:59:31.043

因为 JSP 不直接与浏览器通信，也不知道浏览器对页面做了什么以及用户做了什么。它只是一个简单的解释器，可以遍历您的代码并查找`<%`. 任何介于两者之间并被执行的代码，`<%`其余`%>`的只是被写入浏览器。这意味着 JSP 解释器不会读取您的 JavaScript，服务器只会添加书签。

您正在寻找的是对服务器的实际添加书签的请求。`mypage.jsp?addBookmark=true`诸如添加书签之类的东西。

# javascript - 检测不提供回调的异步函数的执行结束

> ID：10271039
> 
> 赞同：1
> 
> 时间：2012-04-22T18:55:47.953
> 
> 标签：javascript, google-maps-api-3

通常，一个异步函数，比如说`async(arg, cb)`，在末尾提供一个回调函数占位符 ( `cb`)，这样您就可以在异步例程结束时运行自己的代码。如果异步函数没有回调参数怎么办？显然`cb`缺少：

```
async(args);
myFunction(); 
```

`myFunction()`将首先运行。我怎样才能在结束`myFunction()`后才运行`async`？我尝试编写自己的回调包装器但没有成功；他们只是重定向函数调用。

**编辑**我对上述问题的答案很感兴趣，但我将举例说明我是如何遇到这种情况的。

我的示例是在 Google Maps Directions 服务中。异步函数是一个名为 的绘图例程`directionsDisplay.setDirections(result);`，我想在绘图完成后居中并放大。我把`setTimeout`3 秒的时间放在一起，这样我想要的事情就会发生，但这是一个笨拙的解决方案。更改 Google Maps API 似乎是不可能的。有什么更好的？

方向服务在这里。

[http://jsfiddle.net/ryxtj/1/](http://jsfiddle.net/ryxtj/1/)

只需在任一下拉列表中选择一个城市。3 秒后，地图应该会移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:16:18.440

当然，一个更好的解决方案 - 而不是让 DirectionsRenderer 重新定位地图，然后自己再次更改它 - 是告诉 DirectionsRenderer 首先不要重新定位地图。

然后，您可以根据需要自由地重新定位它。

请参阅 [https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)

可以告诉它preserveViewport - 然后你不需要打扰任何凌乱的听众。

像这样：http: [//jsfiddle.net/8kbf2/1/](http://jsfiddle.net/8kbf2/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:04:10.047

一个简单的谷歌搜索找到了我这个相关的帖子：[谷歌地图 V3 setDirections() 回调](https://stackoverflow.com/questions/7228400/google-maps-v3-setdirections-callback)

其中显示了在方向更改时添加事件侦听器。

Javascript 是单线程的，不具备信号量或互斥锁等同步功能。因此，无法让您的代码“等待”直到异步函数完成或将异步函数转换为同步函数。

解决这个问题的唯一方法是使用事件处理程序和/或回调函数。没有自尊的 API 提供者会为您提供异步函数的 API，而无需知道它何时完成。如果他们这样做了，那么它就是一个非常糟糕的 API，您必须进入该 API 的源代码实现，找到处理事件完成的位置并安装回调（通过修改原始源代码）。除非他们已经在设计中提供了完成事件或完成回调，否则您无法从代码“外部”做任何其他事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T19:03:51.417

这应该为您提供回调/事件：

```
google.maps.event.addListener(directionsDisplay, 'directions_changed', function() {
  // ... CALLBACK
}); 
```

来源：[Google Maps V3 setDirections() 回调](https://stackoverflow.com/questions/7228400/google-maps-v3-setdirections-callback)

在您问题的另一部分：不，您不能直接同步异步调用，而无需对导致它的代码进行任何修改或一些 hacky 覆盖。

例如：
您可以尝试弄清楚代码是如何异步的，也许它是一个 setTimeout(func,1) 调用。然后，您可以覆盖 setTimeout 函数并获取调用，并可能向其添加回调。但这是一个非常不干净的解决方案。

# c - WRITE 和 READ 中的错误是什么？

> ID：10271042
> 
> 赞同：0
> 
> 时间：2012-04-22T18:55:57.847
> 
> 标签：c, fork, pipe

这是一个关于管道和进程的小 C 程序，父进程将创建 2 个子进程，第一个将从链中读取数字，第二个将读取字母。我一开始是要求 WORD，我没有加保护，这只是一个测试，所以假设大约 20 个字母，然后父进程将在第一个管道中写入数字，在第二个管道中写入字母，然后他将创建使用 fork() 的孩子，如果他是孩子，他将从第一个管道中读取数字，如果他是父亲，那么他将创建另一个孩子来阅读字母。

```
# include <stdio.h>
# include <unistd.h>
# include <string.h>
# include <fcntl.h>

main()
{
    printf("I am the father, I will create 2 sons, the first will read the numbers , the second will read the letters\n");
    char * word;
    printf("please type the word: \n");
    scanf("%s",word);
    printf("Now 2 pipes will be created\n");
    int fd1[2];
    int fd2[2];
    pipe(fd1); pipe(fd2);
    printf("Now the father will write numbers in the first pipe, and letters in the second\n");
    int i;
    char numbers[20]; int j=0;
    char caracters[20]; int k=0;
    for (i=0;i<20;i++)
    {
        if(word[i]>='0' && word[i]<='9') //if number
        {
            close(fd1[0]); //closing reading
            write(fd1[1],word[i],2);

        }
        else
        {
            close(fd2[0]);  
            write(fd2[1],word[i],2);
        }

    }
    printf("The father has wrote in the 2 pipes, now its time for the sons\n");
    int f=fork();
    if(f==0) //first son
    {
        for(i=0;i<20;i++) {         
            close(fd1[1]); //closing writing
            read(fd1[0],numbers[j],strlen(numbers[j])+1);
            j++;

        }
        printf("first son read everything, he got %d Numbers\n", j);
    }
    else
    {
        f=fork();
        if(f==0)
        {
            for(i=0;i<20;i++) {         
            close(fd2[1]); //closing writing
            read(fd2[0],caracters[k],strlen(caracters[k])+1);
            k++;

        }   
        printf("second son read everything, he got %d caracters\n", j);
    }
} 
```

编译后：

```
In function 'main':
Line 25: warning: passing argument 2 of 'write' makes pointer from integer without a cast
Line 31: warning: passing argument 2 of 'write' makes pointer from integer without a cast
Line 41: warning: passing argument 1 of 'strlen' makes pointer from integer without a cast
Line 41: warning: passing argument 2 of 'read' makes pointer from integer without a cast
Line 54: warning: passing argument 1 of 'strlen' makes pointer from integer without a cast
Line 54: warning: passing argument 2 of 'read' makes pointer from integer without a cast
Line 60: error: expected declaration or statement at end of input 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:02:26.347

`write`和的原型`read`是

```
ssize_t write(int fd, const void *buf, size_t count);

ssize_t read(int fd, void *buf, size_t count); 
```

`write`/的参数 2`read`应该是一个指针。但是您发送的是一个字符（实际上是一个整数）`word[i]`并且`numbers[i]`

即使你的也有同样的问题`strlen`

此外，声明`word`为一个数组，而不仅仅是一个指针。否则，您将写入指针指向的任何随机位置。或者，如果您想将其保留为指针，请为其保留`malloc`一些内存。

毕竟，只需将`word`,`numbers`而不是`numbers[j]`或传递`words[i]`给您抱怨的函数

编辑：您的最后一条`for`语句也`for(i=0;i<20;i++)`缺少右括号，因此出现`Line 60: error: expected declaration or statement at end of input`错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:04:22.693

代替：

```
write(fd1[1],word[i],2); 
```

做这个：

```
write(fd1[1],(void*)&word[i],2); 
```

...即，将指针传递给数据的位置，而不是数据本身的值。

# c# - 在回发时保留按钮的文本

> ID：10271043
> 
> 赞同：0
> 
> 时间：2012-04-22T18:56:04.447
> 
> 标签：c#, asp.net, ispostback

我这辈子都想不通！我想要做的是在第一页加载时将按钮的文本和标签的文本设置为当前时间。但是，当用户单击按钮时，只有标签的文本会更新为当前时间，而按钮的文本仍然是页面首次加载时的时间。我知道我可以用 Ajax 做到这一点，但我知道有办法只使用 IsPostBack 方法来做到这一点。谁能帮我？

```
public partial class TestPage : System.Web.UI.Page 
```

{

```
protected void Page_Load(object sender, EventArgs e)
{

    Button1.Text = "Initial Page Load Time: " + DateTime.Now.ToLongTimeString() + ". (Click to update current time in Label)";
    Label1.Text = "Current Time: " + DateTime.Now.ToLongTimeString();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:21:04.157

将 HiddenField 添加到您的页面，然后将代码更改为；

```
protected void Page_Load(object sender, EventArgs e)
{
    if ( !Page.IsPostBack ){
        HiddenField1.Value = "Initial Page Load Time: " + DateTime.Now.ToLongTimeString() + ". (Click to update current time in Label)";
    }
    Button1.Text = HiddenField1.Value;
    Label1.Text = "Current Time: " + DateTime.Now.ToLongTimeString();
} 
```

HiddenField 值将保留在 PostBack 上，因此您可以从中设置按钮文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:06:11.247

只需在设置文本之前添加：

```
if (Page.IsPostBack)
   return 
```

# c - 是否可以确定 pthread_t 结构是否未使用？

> ID：10271044
> 
> 赞同：1
> 
> 时间：2012-04-22T18:56:15.510
> 
> 标签：c, struct, pthreads

是否可以确定我声明的 pthread_t 结构是否未使用？我有一个 pthread_t 结构数组，在我的程序结束时，我在每个结构上调用 pthread_join()，但如果其中一些从未使用过，我不想在它们上调用 pthread_join()。判断 pthread_t 结构是否未使用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:01:15.553

`pthread_t`传递给的对象`pthread_join()`必须引用一个可连接的线程。所以你需要自己跟踪 - 在 pthread_t 对象旁边保留一个标志以跟踪它是否被使用（也许将标志与 pthread_t 一起打包在一个结构中）。

请记住，除了`pthread_t`尚未使用对象之外，如果您从线程分离或加入线程，您还需要清除标志（我不确定这是否是`pthread_t`对象何时变为 '的详尽列表不可加入'...）。

# python - Django 不接受模板中的变量

> ID：10271049
> 
> 赞同：-1
> 
> 时间：2012-04-22T18:56:50.937
> 
> 标签：python, django

例如，这不起作用：

```
{% for i in artist_number %}
    <li><a href="#{{ forloop.counter0 }}">{{hash_1.items.forloop.counter0.0}}</a></li>
{% endfor %} 
```

但这有效：

```
{% for i in artist_number %}
    <li><a href="#{{ forloop.counter0 }}">{{hash_1.items.0.0}}</a></li>
{% endfor %} 
```

为什么 Django 不简单地将 forloop.counter0 的值放到这里 hash_1.items.X.0

这只是一个例子。这是我无法解决的另一个问题：

```
list = [0,1,2,3,4,5,6,7,8,9,10]
hash_1= {}
#some operations done with these variables.

{% for i in list %}
    <li><a href="#{{ forloop.counter0 }}">{{hash_1.items.i.0}}</a></li>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:07:35.977

您想要[`{% with %}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#with)或[`slice`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#slice)。

# python - haystack startswith 包括后续单词的第一个字母

> ID：10271050
> 
> 赞同：1
> 
> 时间：2012-04-22T18:56:51.073
> 
> 标签：python, django, django-haystack

我对`startswith`来自`SearchQuerySet`. 我是以下索引：

```
class PropertyProjectIndex(indexes.SearchIndex):
    text = indexes.CharField(document=True, use_template=True)
    project_district_num  = indexes.CharField(model_attr='project_district_num', null=True)
    property_type = indexes.CharField(model_attr='property_type', null=True)
    project_title = indexes.CharField(model_attr='project_title', null=True) 

    def get_model(self):
        return PropertyProject 
```

当我运行查询

```
sqs = SearchQuerySet().models(PropertyProject).filter(project_title__startswith='S') 
```

我有类似`PALM SPRING`和的结果`RISING SUITES`。似乎还考虑了后续单词的第一个字母。当我阅读 django 的文档时，它会`__startswith=S`翻译成`where attribute like 'S%'`SQL。这不一样`SearchQuerySet`吗？

# c# - 如何使 DataGrid 列中的某些单元格可编辑，而将其他单元格保留为只读？

> ID：10271052
> 
> 赞同：1
> 
> 时间：2012-04-22T18:57:01.763
> 
> 标签：c#, wpf, xaml, datagrid

我有下表：

```
 <DataGrid ItemsSource="{Binding Websites}" AutoGenerateColumns="False" >
        <DataGrid.Columns>
            <DataGridHyperlinkColumn Header="Website" Binding="{Binding Uri}"/>             
        </DataGrid.Columns>         
    </DataGrid> 
```

我希望用户不能编辑前 15 行，并且能够编辑其他所有内容。

这样做的最佳方法是什么？

# eclipse - Eclipse 的 EJB 3 插件

> ID：10271056
> 
> 赞同：0
> 
> 时间：2012-04-22T18:57:07.197
> 
> 标签：eclipse, jakarta-ee, eclipse-plugin, ejb-3.0

您能否为 Eclipse 提供好的 EJB3 插件？您使用什么插件在 Eclipse 中开发 EJB3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:45:03.700

下载面向 Java EE 开发人员的 Eclipse IDE - 它与支持 EJB 创建的 WTP 工具捆绑在一起。您需要在 Eclipse 中创建正确类型的项目 (EJB Project) 才能使用这些工具。

但是不要期望太多，与例如 NetBeans 相比，支持并不是特别完善（客户端类生成和更多好东西）。另一方面，EJB 3.X 不需要太多的 IDE 支持......

# java - Android 布尔计时器时间表

> ID：10271057
> 
> 赞同：0
> 
> 时间：2012-04-22T18:57:20.097
> 
> 标签：java, android, service, timer

我需要针对问题的帮助/建议..我创建了一个`service`，在此我需要在两个`integers`或两个`strings`时运行一个动作`equals`..最好的方法是什么？

我试过一个`timer:`

`timer.schedule(new mainTask(), mydate.equals(date));`

```
private class mainTask extends TimerTask
    { 
        public void run() 
        {

        }
    } 
```

但这不接受参数中的布尔值`when`..

我可以用什么来得到我想要的？

ps：我的参数取自数据库

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:14:31.723

不确定你的意思，但如果守护进程应该依赖于字符串和整数，你为什么不定义一个这样的方法：

```
private boolean myDaemon(String s1, String s2, int i1, int i2) {

return ( s1.equals(s2) || ( i1 == i2));
} 
```

并将其用作您的参数？

但是，如果您只想`schedule`在此条件适用的情况下使用计时器，那么您必须编写如下内容：

```
if (myDaemon(s1,s2,i1,i2)) scheduleMytimer(); 
```

ps Timer 的第二个参数不是条件而是 DeamonFlag！

# sql - 如何在不使用“go”的情况下运行这个 sql 脚本？

> ID：10271064
> 
> 赞同：1
> 
> 时间：2012-04-22T18:58:09.873
> 
> 标签：sql

我正在尝试创建一个脚本来创建和填充表，然后为我的应用程序创建存储过程以访问它们。我的脚本运行得很好，直到我进入存储过程。我正在尝试将 .sql 文件读入我的应用程序，然后在一次执行中通过我的连接运行此脚本。有什么办法可以从这部分脚本中删除“go”关键字以使其在一次执行中运行？

```
if object_id('GetStudentByID') is not null
drop procedure GetStudentByID;
go
create procedure GetStudentByID
(@StudentID INT)
as
select StudentID,FirstName,LastName
from Student
where StudentID = @StudentID; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T19:36:48.733

像这样：

```
if object_id('GetStudentByID') is not null
    EXEC('drop procedure GetStudentByID;');

EXEC('create procedure GetStudentByID
(@StudentID INT)
as
select StudentID,FirstName,LastName
from Student
where StudentID = @StudentID;'); 
```

* * *

这是一个常见问题，因为虽然不是很明显，但“GO”*不是*SQL Server 命令。相反，它是由 Management Studio（以及 SQLCMD）实现的命令，允许您告诉它如何将 SQL 命令文本流划分为单独的可编译批处理。

由于 SQL Server 本身没有这样的命令，因此在您需要 SQL 脚本以适应存储过程、代理作业等的情况下，您必须采取不同的方式。执行此操作的 SOP 方法是使用**sp_executeCmd( ...)**或 **EXEC('string')**（如上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:31:16.107

您必须在一个批次中创建过程。我不确定你想要达到什么目的。您是否想执行单个命令，因为您无法将应用程序编程为多次执行？如果是这样，请尝试为每个过程设置一个循环（如果您无法使其工作，请在此处发回代码:)）

如果您想一起执行它们以便它们在同一时间点一起失败或成功，则将它们包装在事务中。然后你可以保留 GO 批处理分隔符，但它们会等到最后才提交它们。

例如

```
BEGIN TRANSACTION; 
GO

if object_id('GetStudentByID') is not null
drop procedure GetStudentByID;
go
create procedure GetStudentByID
(@StudentID INT)
as
select StudentID,FirstName,LastName
from Student
where StudentID = @StudentID;
GO
/* replace this line with other procedures */

COMMIT TRANSACTION; 
GO 
```

# ios - 如何解决IOS的AudioToolBox内出现的EXC_BAD_ACCESS

> ID：10271066
> 
> 赞同：2
> 
> 时间：2012-04-22T18:58:17.830
> 
> 标签：ios, audio, memory-management, mpmovieplayercontroller, mpmusicplayercontroller

我需要帮助解决在 MPMoviePlayerController 和 MPMusicPlayerController 之间的转换过程中我遇到 AudioToolBox (AVAudioSessionPropertyListener) 中偶尔发生的 EXC_BAD_ACCESS 崩溃的问题。以下是调用跟踪：

```
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000009
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x3676ef78 objc_msgSend + 16
1   AVFoundation                    0x31e60b1c _ZL30AVAudioSessionPropertyListenerPvmmPKv + 236
2   AudioToolbox                    0x3630b300 AudioSessionPropertyListeners::CallPropertyListenersImp(unsigned long, unsigned long, void const*) + 268
3   AudioToolbox                    0x3630b5de AudioSessionPropertyListeners::CallPropertyListeners(unsigned long, unsigned long, void const*) + 234
4   AudioToolbox                    0x3630925a SSServer_AudioSessionInterruptionListenerMessage + 50
5   AudioToolbox                    0x362b0d2c _XAudioSessionInterruptionListenerMessage + 56
6   AudioToolbox                    0x36245cdc mshMIGPerform + 368
7   CoreFoundation                  0x3532151c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
8   CoreFoundation                  0x353214be __CFRunLoopDoSource1 + 134
9   CoreFoundation                  0x3532030c __CFRunLoopRun + 1364
10  CoreFoundation                  0x352a349e CFRunLoopRunSpecific + 294
11  CoreFoundation                  0x352a3366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x3659f432 GSEventRunModal + 130
13  UIKit                           0x32399e76 UIApplicationMain + 1074
14  MyGreatApp                      0x00054986 main (main.m:14)
15  MyGreatApp                      0x00054944 start + 32 
```

我的应用交替使用音乐播放器和电影播放器​​。电影播放器​​用于播放播客。每次播放新的播客时，都会为电影播放器​​分配一个自动释放。完成电影播放器​​后，我会删除已设置的所有观察者，确保电影播放器​​已停止，然后重新启动音乐播放器。

下面是一些初始化电影播放器​​使用的相关代码：

```
[musicPlayer pause];

self.moviePlayer = [[[MPMoviePlayerController alloc] initWithContentURL: address] autorelease];   // Release the old moviePlayer and create a new one.

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePreloadDidFinish:) name:MPMoviePlayerLoadStateDidChangeNotification object:self.moviePlayer];    

// Register to receive a notification when the movie has finished playing. 
[[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayer];

// Register to receive a notification when the movie playback state changes (specifically looking for the state of interrupted). 
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackStateChanged:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:self.moviePlayer];

[self.moviePlayer play]; 
```

电影可以在播放完后结束，或者用户可以通过按下快进按钮来终止电影。以下是处理这两种情况的相关代码：

```
-(IBAction) fastForwardMovie: (id) sender {

        // The self.moviePlayer is still playing, but the user wants to skip the rest of the movie/podcast. 
        // Lets fake a movie playback did finish event
        NSNotification *notification = [NSNotification notificationWithName:MPMoviePlayerPlaybackDidFinishNotification object:nil];
        [self moviePlayBackDidFinish: notification];    // Fake a finished playback so that the music player can be restarted
        return;
}

//  Notification called when the movie FINISHED playing.
- (void) moviePlayBackDidFinish:(NSNotification*)notification { 
    // Remove further notifications until the next time we need the movie player
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerLoadStateDidChangeNotification object:self.moviePlayer] ;
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayer] ;
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackStateDidChangeNotification object:self.moviePlayer] ;

    // Get rid of the movie player
    self.moviePlayer.initialPlaybackTime = -1;  // seems that the best way to kill the movie player is first setting the playback time to -1
    [self.moviePlayer stop];                    // followed by stopping the player

    [musicPlayer play];
} 
```

电影（播客）结束后，即使发生崩溃，音乐也会播放（但应用程序已终止）。这是因为我使用的是 iPod 音乐播放器，但这可能表明问题与电影播放器​​有关。

最后一点。我已尝试仔细遵循 Apple 的音频会话编程指南的指导方针，其中说当所需的配置是让所有音频混合时，您应该“使用可混合类别配置配置音频会话”和“利用电影播放器的默认 useApplicationAudioSession 值为 YES”。

谁能帮我弄清楚我可能做错了什么导致 AVAudioSessionPropertyListener 与 EXC_BAD_ACCESS 一起崩溃？或者至少你能给我一个关于如何隔离这个问题以确定根本原因的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:38:53.197

换个电话试试`[musicPlayer performSelectorOnMainThread:@selector(play) ...]`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:22:24.540

我们刚刚跟踪了一次非常相似的崩溃。

我们的结果如下所述：

[https://github.com/mattgallagher/AudioStreamer/issues/6](https://github.com/mattgallagher/AudioStreamer/issues/6)

特别是 MyAudioSessionInterruptionListener（或传递给 AudioSessionInitialize 的回调的名称）及其 inClientData 在注册后无法更改，因此即使底层对象已被释放，回调也必须始终做一些明智的事情。

为 AudioStream 建议的解决方案是使用静态变量，并确保它指向当前对回调感兴趣的对象，而不是指向已释放的对象 - 重要的是不要使用 inClientData。

# windows-phone-7 - Window Phone 是否有相当于 iOS Core Text

> ID：10271072
> 
> 赞同：2
> 
> 时间：2012-04-22T18:59:07.913
> 
> 标签：windows-phone-7, text, core-text

我们有一个渲染大量文本的 iOS 应用程序：http: [//bit.ly/IekVmU](http://bit.ly/IekVmU)

我们在 iOS 中使用 CoreText 来呈现预先格式化的文本，并允许用户更改格式、字体大小和字体。

我们正在尝试将其移植到 Windows Phone，但我不确定 Windows Phone 中是否有 CoreText 的替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:13:05.130

WP7 允许您从 Runs 创建文本，例如：

```
<TextBlock TextWrapping="Wrap">
    <TextBlock.Inlines>
        <Run FontWeight="Bold">I am Bold</Run>
        <Run>I am not</Run>
    </TextBlock.Inlines>
</TextBlock> 
```

这允许您创建具有混合格式的文本块。

# c# - 如何更新实体框架中的重复键？

> ID：10271073
> 
> 赞同：0
> 
> 时间：2012-04-22T18:59:17.797
> 
> 标签：c#, entity-framework

我基本上有一个看起来像这样的循环：

```
foreach(var file in files)
{
    // ...
    db.Images.Add(new ImageFingerPrint { FileName = file, FingerPrint = fingerprint });
}

int recordsAffected = db.SaveChanges(); 
```

`FileName`是PK。如果它已经存在于数据库中，我只想让它更新它`FingerPrint`。我想基本上是在做一个[替换。](http://dev.mysql.com/doc/refman/5.6/en/replace.html)

如果这不容易/可能，我该如何简单地截断整个表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:59:46.157

我使用的通常模式是

```
foreach(var file in files)
{
    var image = db.Images.SingleOrDefault(i => i.FileName == file);
    if (item == null)
    {
        image = new ImageFingerPrint() { FileName = file };
        db.Images.Add(image);
    }

    image.FingerPrint = fingerprint;
}    
db.SaveChanges(); 
```

当对象具有一些数据库生成的字段（如`IDENTITY`主键、`CreatedDate`列或时间戳）时，这会变得更容易。然后很容易检查这些字段是否是默认的，如果它们是对象是新的，则应该“添加”。

根据循环的复杂性，您可能需要预先确定“现有”和“新”文件名 -

```
var existing = files.Where(f => db.Images.Contains(f)); 
// & use .ToList() if you're going to be iterating the collection multiple times

foreach (file in existing)
{
    // updates
}

foreach (var file in files.Except(existing))
{
    // inserts
} 
```

当有性能优势时，我会使用这种方法 - 例如，其中一个操作可以作为批量操作完成，而另一个则不能。否则，如果插入和更新操作明显不同，它可以使代码更清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:06:10.013

您可以使用截断表格

```
db.Images.Clear();
db.SaveChanges(); 
```

假设没有外键约束。

如果要获取现有项目，请尝试 LINQ 查询：

```
var existing = (from im in db.Images
               where im.FileName.Equals(file)
               select im).SingleOrDefault();
if(existing != null)
    existing.FingerPrint = fingerprint;
else
    db.Images.Add(...)
db.SaveChanges(); 
```

# hibernate - 最小而全面的 Hibernate 架构

> ID：10271076
> 
> 赞同：2
> 
> 时间：2012-04-22T18:59:35.040
> 
> 标签：hibernate, jpa-2.0

[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#architecture-overview-minimal)提到了 hibernate 支持的两种架构，一种最小且全面的架构。我想知道最小架构指的是什么？一个例子会很有帮助。

根据我的理解，大多数时候我们总是提供 jdbc/datasource 详细信息作为休眠配置，仅此而已！我们让 hibernate 管理连接池以及事务管理和回滚。这是否意味着我们默认使用综合架构？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:13:55.383

最小架构是最简单的 Hibernate 设置。在 Hibernate 之下是 JDBC，事务由 Hibernate 在代码中管理（它只是 JDBC 上的一个薄层）。

综合架构涉及更多。连接生命周期和事务可以通过一些插件机制来管理。例如，Java EE 应用服务器将提供连接管理工具以及事务管理器 (JTA)。

同样，Spring Framework 有自己的事务管理器，Hibernate 可能会使用它。

总结一下。如果您编写独立的 Hibernate 应用程序，您可能会使用最小架构。编写部署到服务器的基于 Spring 的应用程序或基于 Java EE 的应用程序，您可能会使用综合架构。

# c# - 如何使用 c# 读取/编辑 .plist 文件

> ID：10271079
> 
> 赞同：2
> 
> 时间：2012-04-22T18:59:39.390
> 
> 标签：c#, .net, plist

我需要对保存 safari 默认主页的文件进行一些更改，它位于当前位置（在我的计算机中）

```
C:\Users\Sandbox\AppData\Roaming\Apple Computer\Preferences\com.apple.Safari.plist 
```

但我不知道如何使用 c# 编辑此文件，因为我不知道应该编辑的行在哪里，当我使用记事本或 Dreamweaver 或任何文本编辑器打开文件时，我看到以下内容：

![在此处输入图像描述](../Images/a3df1a8155161be2887d88773a18e3e5.png)

我确定这是保存首选项的文件，因为删除它会导致主页消失，我搜索了这个问题，我发现 .plist 是一种适用于 MAC 的 XML 文件格式。

现在是否可以在 Windows 和 C# 应用程序中编辑此文件以设置我的主页？

# c# - 申请工作日前一天现在不上班

> ID：10271084
> 
> 赞同：0
> 
> 时间：2012-04-22T19:00:58.237
> 
> 标签：c#, asp.net, c#-4.0

我的项目前天还在工作，但奇怪的是它不再工作了。

我没有对代码进行任何更改。网页不断给出错误`webdev.webserver40.exe has stopped working`错误。这是我的网站代码：

```
 <%@ Page Title="Loading..." Language="C#" MasterPageFile="~/Site1.master" AutoEventWireup="true"
    CodeBehind="~/Loading.aspx.cs" Inherits="memberlogin.Loading" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script type="text/javascript">
setTimeout('Redirect()',4000);
function Redirect()
{
  location.href = 'Members.aspx';
}
</script>
    <style type="text/css">
        .style1
        {
            width: 80%;
            background-image: url('Images/loading.gif');
            height: 100%;
        }
        .bg
        {
            width: 960px ;
            height: auto;
            background-image: url('Images/clouds.jpg');
        }
    </style>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent" >
    <h1>
        <span class="input">Members-only page.</span>
    </h1>
    <h2>
        Client Side Application Download Started.
    </h2>
            &nbsp;&nbsp;
            <table class="style1">
                <tr>
                    <td align="center" valign="middle">
            <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        Loading, Please wait...<br />
                        <br />
                    </td>
                </tr>
            </table>
            <br />
            <br />

</asp:Content> 
```

我放了一个 try catch 块来了解错误是什么。这是背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Net;
using System.Web.UI.WebControls;

namespace memberlogin
{
    public partial class Loading : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(Launcher));
            t.Start();
        }

        public void Launcher()
        {

            try
            {
                string filename = "~/Downloads/User.exe";
                WebClient req = new WebClient();
                HttpResponse Response = HttpContext.Current.Response;
                Response.Clear();
                Response.ClearContent();
                Response.ClearHeaders();
                Response.Buffer = true;
                Response.AddHeader("Content-Disposition", "attachment;filename=\"" + Server.MapPath(filename) + "\"");
                byte[] data = req.DownloadData(Server.MapPath(filename));
                Response.BinaryWrite(data);
                Response.End();
            }
            catch (Exception e)
            {
                System.Windows.Forms.MessageBox.Show(e.Message + e.Source);
            }

        }
    }
} 
```

我现在收到此错误： ![在此处输入图像描述](../Images/004c24b61c6b5f227f375419b6082913.png)

`MemberLogin`是我的项目的名称。我需要在早上[我所在的晚上]之前提交这个，我还需要做文档，请帮帮我。我有大约 6 个小时，而不是更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:17:21.000

尝试查明抛出异常的一个好方法是打开第一次机会异常：

在 Visual Studio 中：

调试 > 异常 > CLR 异常 > 抛出（选中）

任何时候抛出异常，调试器都会中断。

# javascript - 使用javascript单击图像后的页面链接

> ID：10271086
> 
> 赞同：0
> 
> 时间：2012-04-22T19:00:59.560
> 
> 标签：javascript, html

所以我试图简单地根据网页上按下的图像重新定位页面。我之前有代码，但是对于我必须做的 100 件事来修复东西，它不再工作了。谁能弄清楚为什么？

因此，当您现在单击`cloudybubble.png`页面上的图像时，它会将您带到`cloudy_name.php`. 还会有其他图像将您带到其他页面来执行此操作。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WhethertheWeather</title>

<!--<link rel="stylesheet" type="text/css" href="demo/css/screen.css" media="all" />-->
        <script src="http://www.adrianpelletier.com/mint/?js" type="text/javascript"></script>
        <script type="text/javascript" src="demo/scripts/jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="demo/scripts/jquery-ui-1.7.1.custom.min.js"></script>
        <script type="text/javascript" src="demo/scripts/execute.js"></script>

<script>
    function showWeather(_Weather) {
     //alert(Weather);
        myform._Weather.value=Weather;
    //  alert(Weather);

    // ._Weather
        myform.submit();

        }

    $(document).ready(function() {
        $('cloudybubble.png').click(function() {
            window.location="http://http://www.tcnjart.com/christineaustin/whethertheweather/cloudy_name.php;"
        });
    });

    // window.location="http://http://www.tcnjart.com/christineaustin/whethertheweather/cloudy_name.php"; //
</script>

</script>

<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body background="images/gradientsky.jpg"> 

<div id="weather">

<ul id="nav-reflection">
<form method="post" action="cloudy_name.php" id="myform">
        <li class="button-color-1"><a href="javascript:showWeather('cloudy')"; title="My fancy link"><img src="images/cloudybubble.png" width="211" height="180" align="left"></a></li>

    <input type="hidden" name="weather" value="whatever">
</form>
</ul>
</div>

</body>
</html> 
```

新脚本

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WhethertheWeather</title>

<!--<link rel="stylesheet" type="text/css" href="demo/css/screen.css" media="all" />-->
        <script src="http://www.adrianpelletier.com/mint/?js" type="text/javascript"></script>
        <script type="text/javascript" src="demo/scripts/jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="demo/scripts/jquery-ui-1.7.1.custom.min.js"></script>
        <script type="text/javascript" src="demo/scripts/execute.js"></script>

<script>
    function showWeather(_Weather) {
     //alert(Weather);
        myform._Weather.value=Weather;
    //  alert(Weather);

    // ._Weather
        myform.submit();

        }

    $('#cloudybubble').click(function() {
    window.location = "http://http://www.tcnjart.com/christineaustin/whethertheweather/cloudy_name.php;"
});

</script>

</script>

<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body background="images/gradientsky.jpg"> 

<div id="weather">

<ul id="nav-reflection">
<form method="post" action="cloudy_name.php" id="myform">
        <li class="button-color-1"><a href="javascript:showWeather('cloudy')"; title="My fancy link"><img id="cloudybubble" src="images/cloudybubble.png" width="211" height="180" align="left" />
</a></li>

    <input type="hidden" name="weather" value="whatever">
</form>
</ul>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:07:34.417

编辑：修改以考虑评论中的新信息。

我们可以对您页面上的所有图像进行通用处理，以便它们使用相同的 JavaScript。

在 HTML 中，将超链接放回 a 标记中。然后，在 a 标签中添加一个类，我建议使用“weatherLink”。然后将要登录的文本（即“cloudy”）放入数据库中，并将其设置为链接的ID。

HTML：

```
<li class="button-color-1">
    <a id="cloudy" class="weatherLink" href="http://www.tcnjart.com/christineaustin/whethertheweather/cloudy_name.php" title="My fancy link">
        <img src="images/cloudybubble.png" width="211" height="180" align="left" />
    </a>
</li> 
```

现在我们的 JavaScript 需要更新如下的 jQuery 点击处理程序。

JavaScript：

```
$(document).ready(function () {
    $('a.weatherLink').click(function (e) {
        e.preventDefault();
        showWeather(this.id);
        window.location.href = this.href;
        return false;
    });
}); 
```

现在，如果您添加任何其他图像，只需将超链接留在 a 标记中，给它weatherLink 类，并给它一个可以传递给 showWeather() 的唯一 id。给定正确的 HTML，您无需再复制任何 JavaScript。

这是一个 jsFiddle 测试页面，供您查看结果：http: [//jsfiddle.net/willslab/jkB9z/9/](http://jsfiddle.net/willslab/jkB9z/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:08:04.767

`id`在您的`img`标签中添加一个并在您的选择器中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T21:06:42.123

你绝对应该在服务器端这样做。

如果您的用户没有 javascript 怎么办？相信我，其中有很多（主要是出于安全原因）。

将表单的操作定义到某个 PHP 页面，处理您需要做的更改或 w/e，并相应地重定向用户（使用`header('Location: http://www.hi.com');`）。

# c - 在结构中包含版本号字段是否明智？

> ID：10271087
> 
> 赞同：0
> 
> 时间：2012-04-22T19:01:02.030
> 
> 标签：c, legacy

不久前，我完成了 Michael Feathers 强烈推荐的“有效地使用遗留代码”。在对我日益衰老的最后确认中，我绝对相信在那本书中看到了一个代码示例，其中他定义了一个`struct`包含版本号作为其字段之一的代码示例。

但是，我完全无法再次找到我可能在哪里看到此代码示例。有谁知道那本书里有没有？

否则，在 ? 中包含版本号通常是个好主意`struct`？如何/何时可以使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:06:50.300

通常情况是相反的。外部媒体上的持久、序列化数据结构将被版本化（包含版本号），而内存中的结构将仅存在于单个版本中，可能泛化到足以能够在统一模型中表示多种持久格式，并且通常不包含版本号。

但是，这种版本控制方法意味着，如果您修改（编辑、更新）数据结构并将其保存回来，它通常会被编码为最新的可用格式，无论好坏。有时这是不可取的。例如，这可能会破坏与创建此数据并且可能仍需要访问它的较低软件版本或较低功能节点/进程/系统的兼容性。在这种情况下，您可能会决定将格式版本存储在内存结构中，并在序列化时坚持使用它，以避免这种“隐含的格式升级”，或者防止旧格式无法表示或不应该出现的更新类型允许。

# java - for循环中的if语句

> ID：10271091
> 
> 赞同：-1
> 
> 时间：2012-04-22T19:02:10.417
> 
> 标签：java

我有一个整数数组列表和一个名称数组列表。当它与特定名称对应时，我想将某个数字添加到其中一个整数数组列表中，并为每个其他数组列表添加一个 0。我认为我所拥有的应该可以工作，但它只是在所有内容中添加一个 0 并在名称正确时忽略特殊情况。“评分”是一个整数，“用户”是一个字符串。"Names" 是一个字符串数组列表。语言是Java。

```
for(int i = 0; i<names.size(); i++)
            {   

                if (names.get(i)==user)

                    allratings.get(i).add(rating);

                if (names.get(i)!=user) 

                    allratings.get(i).add(0);
            } 
```

我的语法有问题吗？当我插入打印行时，我发现我的 names 数组列表和我的 allratings 数组列表完全匹配。我哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T19:11:52.883

User 是一个字符串，在 Java`==`中不用于字符串比较，因为它比较的是引用（或指针，如果您愿意）而不是字符串的文本内容。采用：

```
if (names.get(i).equals(user)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T19:11:22.130

`.equals()`在 Java 中比较字符串时使用：

```
if (user.equals(names.get(i))) 
```

比较 Java 中的字符串 with`==`将比较引用，这可能不是您想要的。似乎引用是不同的，即使它们包含相同的字符串。这就是为什么您的条件总是返回错误的原因。您想比较字符串的实际值。这是用`.equals()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T19:20:43.423

注意`==`比较引用。通常，由于 Java 维护的字符串字面量池，如果比较引用，可能会返回`true`. 如果您创建 a`String s = "test"`和 another `String s2 = "test"`，由于字符串池（这是 Java 优化），它们都将指向同一个引用，因此 return `true`。但是，不要这样做。安全使用`.equals()`！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T19:14:18.990

像这样比较字符串在 Java 中是行不通的；因为它们指向内存中的不同位置。要解决此问题，请先尝试`intern()`它们（这将使它们指向内存中的相同数据），或使用如下方法`equals()`：

```
string1.equals(string2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T19:06:25.847

看起来相等测试失败了（这就是为什么 != 每次迭代都成功）。如果 'names.get(i)' 和 'user' 的值看起来相同，则可能是类型不同；这些值之一是否需要对不同类型的 CAST？

# ruby - Ruby 的假文件系统

> ID：10271093
> 
> 赞同：3
> 
> 时间：2012-04-22T19:02:24.677
> 
> 标签：ruby, file, filesystems, virtual

我需要一些将实际文件系统伪装成假的代码。因此，当我启动它时，它会转换`/home/user/Documents/fake_fs`为`/`，因此每个`Dir`or`File`调用都会转到该目录。一个例子：

我想在 上制作一个文件`/some_file`，所以我使用：

```
File.open('/some_file', 'w') do |f|
  f.puts 'something on this file'
end 
```

它会写在`/home/user/Documents/fake_fs/some_file`而不是`/some_file`. 有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:44:58.297

你有两个选择：

## 选项 1 - 使用宝石伪造它

[FakeFS](https://github.com/defunkt/fakefs.git)将完全按照您的意愿行事，但需要注意的是某些文件系统操作将无法正常工作。FakeFS 重写了 Ruby 标准库中的各种文件操作调用，因此可能会遗漏某些内容，或者某些内容可能无法正常工作。

## 选项 2 - 重新编写代码以使其更具可测试性

您本质上是硬编码`/`，作为您的应用程序开始查找文件的根。如果您将此设置为可配置的，您的代码可以对其进行操作以进行测试。

例如：

```
$root = ENV['ROOT_DIR'] || '/'
File.open(File.join($root,'some_file'),'w') do |file|
  # whatever
end 
```

然后，您的测试可以设置`ROOT_DIR`为您想要的位置。

`chroot`也可能有助于这样做，例如

```
Dir.chroot(ENV['ROOT_DIR'] || '/')

File.open('/some_file','w') do |file|
  # whatever
end 
```

有关`man chroot`更多信息，请参阅。

就个人而言，我会选择选项2。

# arrays - 从数组中的 Smarty 数组获取数据

> ID：10271096
> 
> 赞同：1
> 
> 时间：2012-04-22T19:02:35.910
> 
> 标签：arrays, smarty

我有一个 Smarty 数组，数组中的一些元素也是数组。我在这里处理别人的代码，我必须在输出中插入一些额外的位，所以我不能只是循环遍历数组并输出结果。

我正在使用的代码是：

```
{foreach from=$setall item=item}

                    {if $item.req_type != 6}
                        {if $item.attr_value}
                         <div class="detailed_line" >

                            <p>
                               <label>{$item.name}</label>
                                {$item.attr_value|JView:$item.attr_id:$data->id:$item.type:$item.req_type}
                            </p>
                         </div>
                        {/if}
        {/if}
        {/foreach} 
```

因此，我可以使用以下方法获取单个值：

```
{$setall.5.attr_value} 
```

但是，如果其中一个值是另一个数组，那么我不确定如何遍历它并输出这些值。

这是我第一次尝试 Smarty 模板，所以我什至不知道从哪里开始。

任何想法将不胜感激！

此致

安迪·雅各布斯

* * *

**编辑：在下面回复 periklis 的回答：**

感谢那。我对此进行了细微的更改尝试：

```
{foreach name = "loop" from=$setall.0 item="item" key="key"}
        {if is_array($item)}
        {foreach name = "inner_loop" from=$item item="inner_item" key="inner_key"}
        Inner item:{$inner_item}<br />
        {/foreach}    
        {else}
        Outer item:{$item}<br />
        {/if}
        {/foreach}<br /> 
```

所以，对于初学者来说，我只是想在主数组的第一个位置输出数组。这就是我得到的：

[http://j412.workinprogress.co.uk/component/jomdirectory/23-Friendship-Travel](http://j412.workinprogress.co.uk/component/jomdirectory/23-Friendship-Travel)

您可以在顶部看到默认输出的数据。我需要做的是显示 setall 数组中的一些值，然后是描述，然后是 setall 的其余部分。

例如，如果您查看 Destinations，您会看到该记录的第 4 个元素应输出“British Isles Europe”，但它只显示“array”。

希望这更有意义！

问候

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:06:20.670

尝试这样的事情：

```
{foreach name = "loop" from=$setall item="item" key="key"}
    {if is_array($item)}
        {foreach name = "inner_loop" from=$item item="inner_item" key="inner_key"}
            Inner item:{$inner_item}
        {/foreach}    
    {else}
            Outer item:{$item}
    {/if}
{/foreach} 
```

# silverlight - Windows Phone 上带有事件的动态 ItemTemplate

> ID：10271097
> 
> 赞同：0
> 
> 时间：2012-04-22T19:02:41.013
> 
> 标签：silverlight, windows-phone-7

我需要我的应用程序的每个用户都可以将自己的项目模板定义为跳转列表。它工作正常，但是当模板是这样的时候我遇到了问题：

```
<DataTemplate x:Key="ItemTemplate">
        <Grid HorizontalAlignment="Stretch" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="400" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <TextBlock 
                Text="{Binding RazonSocial}" 
                Tap="Clientes_Tap"
                FontSize="{StaticResource PhoneFontSizeNormal}" 
                Grid.Column="0" 
                VerticalAlignment="Top"/>

        </Grid>
</DataTemplate> 
```

问题是线路`Tap="Clientes_Tap"`。没有这条线它工作正常，我从文件中读取模板并将其分配给跳转列表。但是有了这条线，我得到了一个错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:09:57.500

这是因为当您的 XAML 包含对方法的引用（此处为事件处理程序）时，您无法从文件中实例化/反序列化控件

也许您可以在阅读 XAML 后“附加”您的事件处理程序，或者使用诸如 MVVM Light 工具包的事件到命令之类的绑定表达式？

[http://mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

# grails - Groovy/GSP 中鸭子类型的安全操作符

> ID：10271101
> 
> 赞同：4
> 
> 时间：2012-04-22T19:02:58.747
> 
> 标签：grails, groovy, gsp

我是 Grails 开发的新手，我想知道处理这个问题的标准方法是什么：

在 GSP 中，我遍历了一个域对象列表，其中有很多，但不是所有的都有 getX() 方法。我想要一个看起来像这样的标签：

```
<g:each in="${myObjects}>
  ${it.x}
</g:each> 
```

但是，由于我的一些对象没有 getX 方法，我得到一个“没有这样的属性”异常。如果有某种操作符，例如阻止 NPE 的“安全操作符”，我会很高兴。有没有不做'instanceof'的好方法来处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T19:32:30.527

恐怕 Groovy 的操作员不会在这里为您提供帮助。如果您要调用方法的引用可能为空，则安全导航运算符 ( ) 将为您提供[帮助`?.`；](http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator)如果您的属性是所有对象的属性，Elvis 运算符 ( ) 会为您提供帮助，[但`?:`其中](http://groovy.codehaus.org/Operators#Operators-ElvisOperator)`x`一些对象可能为 null（类似于`it.x ?: 'no x here'`）。

在这种情况下——我假设你正在处理不同类的对象的集合，其中一些没有`x`属性——你可能会询问对象是否具有属性`x`（请注意，如果对象实现了一个名为`getX`, 那么`it.hasProperty('x')`将是真的）：

```
<g:each in="${myObjects}>
  ${it.hasProperty('x') ? it.x : 'no x here'}
</g:each> 
```

`'no x here'`用您的备用值替换该位。此外，如果两个选项的逻辑比简单的表达式更复杂，您可以考虑使用[`<g:if>`](http://grails.org/doc/2.0.x/ref/Tags/if.html)/标记而不是三元运算符:)[`<g:else>`](http://grails.org/doc/2.0.x/ref/Tags/else.html)

# python - NDB 使用用户 API 形成实体组

> ID：10271103
> 
> 赞同：2
> 
> 时间：2012-04-22T19:02:59.183
> 
> 标签：python, google-app-engine, google-cloud-datastore, data-modeling

我正试图围绕一个看似非常简单的用例，但我似乎失败了。练习的目标是在高复制数据存储中为使用 Google Accounts 用户名登录的用户查找一组记录，并保持高度一致。

我的数据如下所示：

```
class Account(ndb.Model):
    owner = ndb.UserProperty()
    name = ndb.StringProperty()

class Content(ndb.Model):
    content = ndb.StringProperty() 
```

当我第一次创建帐户时，我只需执行以下操作：

```
current_user = users.get_current_user()
new_account = Account(owner=current_user, name='Some Name')
new_account.put() 
```

现在创建内容：

```
new_content = Content(parent=new_account.key, content='Some Content')
new_content.put() 
```

当用户登录时，我只能通过UserProperty查询，但我似乎无法将用户设置为实体组的父级，那么如何确保我始终可以通过登录用户查找Account并且非常一致？

拥有帐户后，祖先查询过程将确保内容检索的一致性，但我一直坚持根据 User 来确定祖先。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T02:40:24.387

最简单和最好的方法是使用键名。在这种情况下，您的 Account 实体的键名应该是用户的 ID。您可以像这样创建帐户：

```
new_account = Account(owner=current_user, id=current_user.user_id(), name='Some Name') 
```

你可以像这样查找它们：

```
existing_account = Account.get_by_id(current_user.user_id()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:20:41.110

我不确定您究竟为什么要这样做，但您还必须为其创建一个父实体`Account`，以便您可以使用祖先对其执行查询。

# mercurial - Mercurial 安全和谷歌账户

> ID：10271104
> 
> 赞同：1
> 
> 时间：2012-04-22T19:03:09.027
> 
> 标签：mercurial, google-account

有没有人有使用 Google 帐户管理 Mercurial 安全性的经验，我想创建公共存储库，但我想与一些 Google 用户分享。没有其他人应该知道我的存储库的任何事情。谢谢你的建议

# c - 信号中断时释放共享内存

> ID：10271106
> 
> 赞同：0
> 
> 时间：2012-04-22T19:03:18.737
> 
> 标签：c, signals, shared-memory

我正在用 C 编写一个程序，并且正在创建几个使用 POSIX 共享内存的子进程。现在我正在尝试处理程序被 SIGINT 等信号中断的情况。我知道，我需要安装信号函数，由于代码的不一致，直接在信号处理程序中释放资源是不好的，所以只需要切换布尔标志。同时我的主要代码是循环直到标志被切换。

所以它是这样的：

```
 bool signal_interrupt = false;     

 void sig_handler(int sig_num)
 {
   signal_interrupt = true;
 }

 int main(void)
 {
   while (!signal_interrupt)
   {
     /* code, arguments processing, functions calling...*/
     signal_interrupt = true;
   }
 } 
```

我的问题是我不知道如何在程序的某些功能中释放资源。该函数的代码是否应该与主函数中所示的循环相同？程序如何对信号中断做出反应？它从当前函数返回到主函数，如果找到信号函数，它的处理程序会被调用吗？感谢您的任何建议，我真的很想了解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:12:53.980

哦，是的，共享内存等外部资源确实需要释放。

但是，从进程的角度来看，系统调用是原子的，因此从信号处理程序执行它们没有问题。只需调用外部资源析构函数然后退出。（不用担心调用 free(3)。）

# java - 我的 JFrame 中什么都没有出现

> ID：10271107
> 
> 赞同：1
> 
> 时间：2012-04-22T19:03:34.430
> 
> 标签：java, user-interface

每次我尝试运行程序时，只出现一个空窗口，我不知道为什么。以前，当我在 main 方法中拥有几乎所有东西时，我能够让所有东西都出现在窗口中，但是现在当我尝试不同的东西时，它就不会出现，即使我关闭它也不会阻止程序运行以为我在我的代码中解释了这一点。代码可能还有其他问题，但我真正需要帮助的唯一一个就是这个。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class AirplaneSeats extends JFrame implements ActionListener{

private static final int FRAME_WIDTH    = 400;
private static final int FRAME_HEIGHT   = 300;
private static final int FRAME_X_ORIGIN = 150;
private static final int FRAME_Y_ORIGIN = 250;

private JLabel reservetype = new JLabel("Select Reservation Type:");
private JLabel greenseat = new JLabel("Select availiable (green numbered) seat:");

private JButton firstclass;
private JButton coach;

private JButton one;
private JButton two;
private JButton three;
private JButton four;
private JButton five;
private JButton six;
private JButton seven;
private JButton eight;
private JButton nine;
private JButton ten;
private JButton eleven;
private JButton twelve;
private JButton nothing;

public static void main(String [] args){
    JFrame frame = new JFrame("Island Airlines");
    frame.setVisible(true);
    }

public AirplaneSeats(){
    Container contentPane;

    contentPane= getContentPane();
    contentPane.setLayout(null);
    contentPane.setBackground(Color.white);

    setTitle("JMenuFrame: Testing Swing Menus");
    setSize(FRAME_WIDTH, FRAME_HEIGHT);
    setResizable(false);
    setLocation(FRAME_X_ORIGIN,FRAME_Y_ORIGIN);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    reservetype.setBounds(10, 10, 200, 20);
    greenseat.setBounds(10, 100, 250, 20);

    contentPane.add(reservetype);
    contentPane.add(greenseat);

    firstclass = new JButton("first class");
    coach = new JButton("coach");

    contentPane.add(firstclass);
    contentPane.add(coach);

    firstclass.setBounds(60, 40, 80, 35);
    coach.setBounds(150, 40, 80, 35);

    firstclass.addActionListener(this);
    coach.addActionListener(this);

    one = new JButton("1");
    two = new JButton("2");
    three = new JButton("3");
    four = new JButton("4");
    five = new JButton("5");
    six = new JButton("6");
    seven = new JButton("7");
    eight = new JButton("8");
    nine = new JButton("9");
    ten = new JButton("10");
    eleven = new JButton("11");
    twelve = new JButton("12");
    nothing = new JButton("");

    one.setBounds(20, 120, 30, 30);
    three.setBounds(60, 120, 30, 30);
    five.setBounds(100, 120, 30, 30);
    seven.setBounds(150, 120, 30, 30);
    nine.setBounds(190, 120, 30, 30);
    eleven.setBounds(230, 120, 30, 30);
    two.setBounds(20, 160, 30, 30);
    four.setBounds(60, 160, 30, 30);
    six.setBounds(100, 160, 30, 30);
    eight.setBounds(150, 160, 30, 30);
    ten.setBounds(190, 160, 30, 30);
    twelve.setBounds(230, 160, 30, 30);

    contentPane.add(one);
    contentPane.add(two);
    contentPane.add(three);
    contentPane.add(four);
    contentPane.add(five);
    contentPane.add(six);
    contentPane.add(seven);
    contentPane.add(eight);
    contentPane.add(nine);
    contentPane.add(ten);
    contentPane.add(eleven);
    contentPane.add(twelve);
    contentPane.add(nothing);

    one.addActionListener(this);
    two.addActionListener(this);
    three.addActionListener(this);
    four.addActionListener(this);
    five.addActionListener(this);
    six.addActionListener(this);
    seven.addActionListener(this);
    eight.addActionListener(this);
    nine.addActionListener(this);
    ten.addActionListener(this);
    eleven.addActionListener(this);
    twelve.addActionListener(this);

}

@Override
public void actionPerformed(ActionEvent event) {
    // TODO Auto-generated method stub

}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:08:14.540

在您的主要方法中，您只需创建并显示一个普通的香草 JFrame 对象，而不是 AirplaneSeats 对象。也许您想创建并显示您的 AirplaneSeats 对象？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:22:12.627

将您的主要方法更改为

```
public static void main(String [] args){
   AirplaneSeats airplaneSeats = new AirplaneSeats();
   airplaneSeats.setVisible(true);
} 
```

你有`JFrame frame = new JFrame("Island Airlines");`它只是创建一个空白的jframe。

# python - Python Oauth2 - 使用 Google 登录

> ID：10271110
> 
> 赞同：21
> 
> 时间：2012-04-22T19:03:56.360
> 
> 标签：python, oauth, token

我一直在寻找 2 天的答案，但没有任何结果。

我正在尝试在 Django 上集成 Oauth2 以使用 Google 登录。我的代码抛出异常 - “令牌无效”。

有时候是这样的：

```
resp, content = client.request(access_token_url, "POST")
    if resp['status'] != '200':
        print content
        raise Exception("Invalid response from Google."+content) 
```

在 google_authenticate()

请帮我。

我的代码：

```
 def google_login(request):
    scope = "https://www.googleapis.com/auth/userinfo.profile"

    request_token_url = "https://www.google.com/accounts/OAuthGetRequestToken?scope=%s" % scope
    authorize_url = 'https://www.google.com/accounts/OAuthAuthorizeToken'
    authenticate_url = "https://accounts.google.com/o/oauth2/auth"

    response_type = "code"
    redirect_uri = "http://127.0.0.1:8000/login/google/auth"
    scope = "https://www.googleapis.com/auth/userinfo.profile"

    oauth_key = settings.GOOGLE_KEY
    oauth_secret = settings.GOOGLE_SECRET

    consumer = oauth.Consumer(oauth_key, oauth_secret)
    client = oauth.Client(consumer)

    # Step 1: Get a request token. This is a temporary token that is used for 
    # having the user authorize an access token and to sign the request to obtain 
    # said access token.

    resp, content = client.request(request_token_url, "POST")
    request_token = dict(urlparse.parse_qsl(content))

    if resp['status'] != '200':
        raise Exception("Invalid response from Google.")

    # Step 2\. Store the request token in a session for later use.
    request.session['request_token'] = dict(cgi.parse_qsl(content))

    # Step 3\. Redirect the user to the authentication URL.
    url = "%s?oauth_token=%s&client_id=%s&response_type=%s&redirect_uri=%s&scope=%s" % (authenticate_url,
        request.session['request_token']['oauth_token'],
        oauth_key,response_type,redirect_uri,scope)

    return HttpResponseRedirect(url)

def google_authenticate(request):
    access_token_url = 'https://www.google.com/accounts/OAuthGetAccessToken'

    oauth_key = settings.GOOGLE_KEY
    oauth_secret = settings.GOOGLE_SECRET

    consumer = oauth.Consumer(oauth_key, oauth_secret)

    # Step 1\. Use the request token in the session to build a new client.
    token = oauth.Token(request.session['request_token']['oauth_token'],
        request.session['request_token']['oauth_token_secret'])
    if 'oauth_verifier' in request.GET:
        token.set_verifier(request.GET['oauth_verifier'])
    client = oauth.Client(consumer, token)

    # Step 2\. Request the authorized access token from Google.
    resp, content = client.request(access_token_url, "POST")
    if resp['status'] != '200':
        print content
        raise Exception("Invalid response from Google."+content)

    access_token = dict(cgi.parse_qsl(content))

    # Step 3\. Lookup the user or create them if they don't exist.
    try:
        user = User.objects.get(username=access_token['screen_name'])
    except User.DoesNotExist:
        # When creating the user I just use their screen_name@twitter.com
        # for their email and the oauth_token_secret for their password.
        # These two things will likely never be used. Alternatively, you 
        # can prompt them for their email here. Either way, the password 
        # should never be used.
        user = User.objects.create_user(access_token['screen_name'],
            '%s@twitter.com' % access_token['screen_name'],
            access_token['oauth_token_secret'])

        # Save our permanent token and secret for later.
        profile = Profile()
        profile.user = user
        profile.oauth_token = access_token['oauth_token']
        profile.oauth_secret = access_token['oauth_token_secret']
        profile.save()

    # Authenticate the user and log them in using Django's pre-built 
    # functions for these things.
    user = authenticate(username=access_token['screen_name'],
        password=access_token['oauth_token_secret'])
    login(request, user)

    return HttpResponseRedirect('/') 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-11T06:41:20.153

经过很长一段时间，浪费了很多时间，我放弃了 OAuth2，因为它很难配置，我只需要登录一个用户。下面的代码应该可以帮助需要做类似事情的人，并且可以定制。我所做的只是按照关于形成 url 的说明进行操作 -> [https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

我创建了两个视图（对于不使用 Django 的任何人 - 页面）并链接到第一个： 这个页面我称为 login/google 并从登录页面链接到它。

```
def google_login(request):
    token_request_uri = "https://accounts.google.com/o/oauth2/auth"
    response_type = "code"
    client_id = XXXXXX-your_client_id
    redirect_uri = "http://mysite/login/google/auth"
    scope = "https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"
    url = "{token_request_uri}?response_type={response_type}&client_id={client_id}&redirect_uri={redirect_uri}&scope={scope}".format(
        token_request_uri = token_request_uri,
        response_type = response_type,
        client_id = client_id,
        redirect_uri = redirect_uri,
        scope = scope)
    return HttpResponseRedirect(url) 
```

上面的代码重定向到第二个页面（这个页面必须在google app定义中定义为一个redirect uri）。我将此页面称为 login/google/auth：

```
def google_authenticate(request):
    parser = Http()
    login_failed_url = '/'
    if 'error' in request.GET or 'code' not in request.GET:
        return HttpResponseRedirect('{loginfailed}'.format(loginfailed = login_failed_url))

    access_token_uri = 'https://accounts.google.com/o/oauth2/token'
    redirect_uri = "http://mysite/login/google/auth"
    params = urllib.urlencode({
        'code':request.GET['code'],
        'redirect_uri':redirect_uri,
        'client_id':XXXXX_your_google_key,
        'client_secret':XXXXX_your_google_secret,
        'grant_type':'authorization_code'
    })
    headers={'content-type':'application/x-www-form-urlencoded'}
    resp, content = parser.request(access_token_uri, method = 'POST', body = params, headers = headers)
    token_data = jsonDecode(content)
    resp, content = parser.request("https://www.googleapis.com/oauth2/v1/userinfo?access_token={accessToken}".format(accessToken=token_data['access_token']))
    #this gets the google profile!!
    google_profile = jsonDecode(content)
    #log the user in-->
    #HERE YOU LOG THE USER IN, OR ANYTHING ELSE YOU WANT
    #THEN REDIRECT TO PROTECTED PAGE
    return HttpResponseRedirect('/dashboard') 
```

我真的希望这可以帮助人们，并节省我浪费的时间。非常欢迎对代码发表评论！

# asp.net - 停止开发人员在多开发人员环境中使用相同的会话名称

> ID：10271114
> 
> 赞同：2
> 
> 时间：2012-04-22T19:04:27.923
> 
> 标签：asp.net

我正在处理一个 10-15 人的 ASP.NET (4.0) 开发人员团队，我怎么能阻止他们在他们的代码中使用相同的会话名称？或者换句话说，开发人员怎么会知道 Session 名称已经存在，所以他应该使用其他名称。在我的情况下，每个开发人员都在使用 Session [“ID”]，我想，如果 Session [“ID”] 已经被使用，那么开发人员可能会获得某种信息，以便他不应该使用相同的会话名称。

可能这可能很容易或偏离轨道..但我正面临这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:49:11.737

我假设您正在谈论确保开发人员不会对 Session 值使用相同的键。

建立命名约定可能是解决问题的最简单方法。

我还发现将与会话相关的值包装在帮助程序类中以避免这个问题并且使此类数据的消耗更清洁（并且更抽象）是有帮助的。

## 例子

```
public static class MyClass
{
    public static UserId
    {
       get{ return (int)Session["UserId"]; }
       set{ Session["UserId"] = value; }
    }
} 
```

只要您使用适当的源代码控制，任何冲突都会很快显现出来。

如果您想让键名*非常*明显，那么您可以将它们作为类中的单独字段进行管理，所有这些字段都组合在同一个位置。

```
public static class MyClass
{
    private static readonly string _userIdKey = "UserId";
    private static readonly string _anotherKey = "AnotherKey";

    public static UserId
    {
       get{ return (int)Session[_userIdKey ]; }
       set{ Session[_userIdKey ] = value; }
    }
} 
```

最后，您可以针对这些帮助程序类运行单元测试，以确保键不会被覆盖，尽管这可能是矫枉过正。

# swing - 遍历Jframe中的所有对象

> ID：10271116
> 
> 赞同：4
> 
> 时间：2012-04-22T19:04:45.237
> 
> 标签：swing, jframe, loops

我有一个简单的问题。我有一个用 javax.swing.JFrame 制作的项目。我想遍历我在 Jframe 中添加的所有对象。这可能吗，我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T19:18:28.880

这将遍历 JFrame 的 contentPane 中的所有组件并将它们打印到控制台：

```
public void listAllComponentsIn(Container parent)
{
    for (Component c : parent.getComponents())
    {
        System.out.println(c.toString());

        if (c instanceof Container)
            listAllComponentsIn((Container)c);
    }
}

public static void main(String[] args)
{
    JFrame jframe = new JFrame();

    /* ... */

    listAllComponentsIn(jframe.getContentPane());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T12:43:52.807

以下代码将使用 FOR 循环清除 JFrame 中的所有 JTextField

```
Component component = null; // Stores a Component

Container myContainer;
myContainer = this.getContentPane();
Component myCA[] = myContainer.getComponents();

for (int i=0; i<myCA.length; i++) {
  JOptionPane.showMessageDialog(this, myCA[i].getClass()); // can be removed
  if(myCA[i] instanceof JTextField) {
    JTextField tempTf = (JTextField) myCA[i];
    tempTf.setText("");
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T21:27:22.407

从“根”组件遍历所有组件并用它们“做某事”（消费者）的迭代方式：

```
public static void traverseComponentTree( Component root, Consumer<Component> consumer ) {
    Stack<Component> stack = new Stack<>();
    stack.push( root );
    while ( !stack.isEmpty() ) {
        Component current = stack.pop();
        consumer.accept( current ); // Do something with the current component
        if ( current instanceof Container ) {
            for ( Component child : ( (Container) current ).getComponents() ) {
                stack.add( child );
            }
        }
    }
} 
```

# c# - 复杂的分组方式

> ID：10271120
> 
> 赞同：3
> 
> 时间：2012-04-22T19:05:34.867
> 
> 标签：c#, .net, linq, group-by

我有一个家庭作业，其中给出`IEnumerable<Movie>` 了电影包含的位置`HashSet<string> genres`（由字符串表示的类型列表，如“喜剧”、“戏剧”等）。

如何使用 LINQ 和 group by 按类型对电影进行排序？（创建`IGrouping<string, IEnumerable<Movie>>`）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T19:10:28.037

听起来您想先将电影扁平化为动作/流派对，*然后*分组：

```
var grouped = from movie in movies
              from genre in movie.Genres
              group movie by genre; 
```

或避免查询表达式：

```
var grouped = movies.SelectMany(movie => move.Genres,
                                (movie, genre) => new { movie, genre })
                    .GroupBy(pair => pair.genre, pair => pair.movie); 
```

# iphone - 核心数据：如何使用 NSPredicate 查找空字段

> ID：10271122
> 
> 赞同：1
> 
> 时间：2012-04-22T19:06:07.153
> 
> 标签：iphone, sqlite, core-data, ios4

我有一个数据库，其中包含一些字符串字段，其中只有空格。在我的情况下，这不是一个有效的情况，所以我希望找到这些字段并用预定义的字符串替换它们。

有没有办法使用 NSPredicate 只获取这些对象，或者我必须迭代所有对象，修剪目标字段并检查长度是否为零？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:23:54.637

你可以尝试这样的事情：

```
NSString *regex = @"\s+";
NSPredicate *regexPredicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:20:48.957

```
NSString *whiteSpaceStr = @"    This      line  contains many   white       space!   ";

// OR you string could be only

NSString *whiteSpaceStr = @"     ";

while ([whiteSpaceStr rangeOfString:@"  "].location != NSNotFound) {
    whiteSpaceStr = [whiteSpaceStr stringByReplacingOccurrencesOfString:@"  " withString:@" "];
} 
```

# jquery - jQuery 在单击时展开 DIV 并替换内容

> ID：10271128
> 
> 赞同：1
> 
> 时间：2012-04-22T19:06:31.123
> 
> 标签：jquery

当用户单击选项卡时，我正在尝试创建可扩展的展开。

它基本上是 2 行选项卡，每行都有自己的颜色，当用户单击其中一个时，隐藏的 DIV 应该动画出来。我不认为这很难做到，但是当用户在另一个选项卡已经打开的情况下单击另一个选项卡时，就会出现问题。然后新内容必须取代现有内容的位置。

这就是我到目前为止所拥有的； [http://jsfiddle.net/craigzilla/W3afW/](http://jsfiddle.net/craigzilla/W3afW/)

* * *

```
                     4张图片代表应该发生的事情
                      当您单击选项卡 01、02、03 和 08 时  

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:59:55.543

## *[jsFiddle 演示](http://jsfiddle.net/L5P2Y/)*

```
$(document).ready(function() {
    var $cont;    
    function tgl_conts(){
        $('.content').stop().animate({height: 0},1200);
        $cont.stop().animate({height:210},1200);
    }

    $('.tab').on('click',function(){
        var tabClass=$(this).attr('class').split(' ')[1];
        $cont = $('.'+tabClass+':not(.tab)');
        var h = ($cont.height() === 0) ? tgl_conts() :  ( $cont.stop().animate({height: 0},1200) );  
    });

}); 
```

小心！！！我删除了您的所有 ID（也包括 CSS），并为您的重复项添加了单独的类：

`.turquoise``.turquoise2`
同样的，因为`.pink` `.pink2`每个元素都有 2 个元素，我们必须区分它们！

**PS：实用性不错！很好的表达，好主意兄弟！**

**编辑**
为 jQuery UI 库添加了“速度”（动画时间）和缓动设置：

## *[缓动演示](http://jsfiddle.net/roXon/L5P2Y/1/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:23:56.397

好的......所以基本上你想要做的是`<div>`在你的每个选项卡中都有一个元素。当用户单击其中一个选项卡时，jQuery 将确保没有其他“弹出”的 div 元素可见，然后显示相应的 div。

我将以 3 个标签为例 -

```
<div class="tab" id="pink">
    <img src="http://placehold.it/160x160" width="160" height="160" />
    <span class="tab_text">TITLE 01</span>
    <div class="pop-out">Some pink information</div>
</div>
<div class="tab" id="turquoise">
    <img src="http://placehold.it/160x160" width="160" height="160" />
    <span class="tab_text">TITLE 02</span>
    <div class="pop-out">Some turquoise information</div>
</div>
<div class="tab" id="yellow">
    <img src="http://placehold.it/160x160" width="160" height="160" />
    <span class="tab_text">TITLE 03</span>
    <div class="pop-out">Some yellow information</div>
</div> 
```

请注意，每次我使用`id`属性时，它们都是**唯一**的。该`id`属性应始终具有唯一值，而不是`class`您可以看到的属性可以具有相同的值。`class="pop-out"`

*   `pop-out`将是我们识别所有弹出 div 元素的方式
*   当用户单击选项卡时，我们将添加一个附加`sel`类（selected 的缩写）。这样我们就可以跟踪上次打开的 div（如果有的话），并确保在打开新的之前关闭它。

现在，假设我们希望触发器是整个选项卡。用户点击它的任何地方都会触发弹出窗口。

```
$(".tab").on('click',function(){
  $("div.pop-out.sel").fadeOut().removeClass('sel'); // this will hide the last selected div and remove its selected class
  $(this).find("div.pop-out").fadeIn().addClass('sel'); // this will display the div of the element the user clicked and add the selected class.
} 
```

[显然，您可以替换任何您想要的动画。]

现在我们还可以使用以下方法跟踪打开的选项卡 -

```
$("div.pop-out.sel").closest("div.tab"); 
```

这将返回当前正在显示的弹出 div 的父级。记得先测试一个选定的 div 是否 *真的*存在 :)

# python - 元组上的 copy.copy 与 copy.deepcopy 性能

> ID：10271132
> 
> 赞同：5
> 
> 时间：2012-04-22T19:07:00.733
> 
> 标签：python, performance, python-3.x, copy, deep-copy

```
%python -m timeit -s "import copy" "x = (1, 2, 3)" "copy.deepcopy(x)"
100000 loops, best of 3: 10.1 usec per loop

%python -m timeit -s "import copy" "x = (1, 2, 3)" "copy.copy(x)"
1000000 loops, best of 3: 0.609 usec per loop 
```

为什么`deepcopy`比 慢 15 倍`copy`？

每个函数都必须遍历元组的元素。在该迭代期间，`copy`为每个元素创建另一个引用；`deepcopy`深度复制每个元素。

但是每个元素都是一个`int`，并且对一个进行深度复制`int`只会创建另一个对它的引用。换句话说，这两个函数似乎执行完全相同的步骤，执行相同的次数。

这是验证过程中没有创建新实例的验证：

```
ActivePython 3.2.1.2 (ActiveState Software Inc.) based on
Python 3.2.1 (default, Jul 18 2011, 14:31:09) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> x = (1,2,3)
>>> import copy
>>> y = copy.copy(x)
>>> z = copy.deepcopy(x)
>>> x is y
True
>>> x is z
True
>>> x[1] is z[1]
True 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T19:12:21.257

元组是不可变的，但它们可以包含可变元素：

```
>>> a = (1, 2, [])
>>> a[2].append(1000)
>>> a
(1, 2, [1000]) 
```

请注意，元组不会改变：它是列表。元组仍然包含完全相同的列表。

`deepcopy`应该递归复制那些可变元素。`copy`只需复制对它们的引用。

```
>>> from copy import copy, deepcopy

>>> a = (1, 2, [])
>>> c = copy(a)
>>> d = deepcopy(a)

>>> a[2].append(1000)

>>> c
(1, 2, [1000])
>>> d
(1, 2, []) 
```

# iphone - 循环播放小声音

> ID：10271139
> 
> 赞同：0
> 
> 时间：2012-04-22T19:07:46.553
> 
> 标签：iphone, objective-c

我现在播放小声音：

```
SystemSoundID reload = [GameFlow createSoundID:@"Reload.wav"];
AudioServicesPlaySystemSound(loop); 
```

现在我想播放这个声音 3 秒，例如循环播放，有什么内置的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:32:29.867

我不认为有任何内置的东西。你可以无限循环播放声音（即设置为 99 次重复或某个适当的数字），然后设置 an`NSTimer`在 3 秒后触发并停止声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:19:37.290

您可以使用[AVAudioPlayer](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)。这是一个[例子](http://mobileorchard.com/easy-audio-playback-with-avaudioplayer/)。要设置特定数量的循环，请使用：

```
player.numberOfLoops = 3; 
```

# android - Galaxy Nexus 问题 - 4G 支持检测

> ID：10271142
> 
> 赞同：2
> 
> 时间：2012-04-22T19:08:04.587
> 
> 标签：android, 4g

我使用的 4G 设备检测代码适用于除三星 Galaxy Nexus（toro）以外的所有其他设备

这是我使用的代码

```
boolean is4G = this.getPackageManager().hasSystemFeature("com.verizon.hardware.telephony.lte"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:15:35.527

您的应用程序仅适用于 verizon 吗？

我认为他们已经更改了 toro 中的功能名称

[https://bitbucket.org/kejar31/android_vendor_samsung/src/956695341253/toro/proprietary/com.vzw.hardware.lte.xml](https://bitbucket.org/kejar31/android_vendor_samsung/src/956695341253/toro/proprietary/com.vzw.hardware.lte.xml)

试试这个代码..它可能工作

```
hasSystemFeature("com.vzw.hardware.lte"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:22:04.277

4G实际上是一个营销术语，而不是一个技术术语。这通常意味着手机具有 LTE、WiMAX 或 HSPA 连接。查看[这个](https://stackoverflow.com/questions/2802472/detect-network-connection-type-on-android)问题，了解有关确定 Android 上当前连接类型的详细信息。

# c++ - 如何生成数组c ++的所有长度为k的唯一子集

> ID：10271147
> 
> 赞同：2
> 
> 时间：2012-04-22T19:08:16.487
> 
> 标签：c++, set, subset

我需要一种方法来生成数组的所有长度为 k 的唯一子集，类似于 python 中的 itertools.combinations() 。我试图让这些集合用于关联挖掘，直到支持小于 2。任何通过 2 的集合都被证明是令人头疼的。此外，不能为此使用任何 STL 函数。

任何见解将不胜感激。

最接近我的问题所在：[在 Python 中生成大小为 k（包含 k 个元素）的所有子集](https://stackoverflow.com/questions/7378180/generate-all-subsets-of-size-k-containing-k-elements-in-python)

PS集合（数组）中的每个元素都是整数。

主要：

```
int temp = 0;
int setsize = 2;
int **testarray = subsets(itemset,itemsetSize,setsize);
for (int i = 0; i < 1300; i++)
{
    for(int j = 0; j < 10; j++)
    {
        cout<<testarray[i][j];
    }
}
cout<<endl; 
```

在功能中：

```
int** subsets (int inputArray[],int arraySize, int k)
{
    size_t n = arraySize;

    int **resultArray = 0;
    resultArray = new int *[1000];

    size_t i = (1 << k) -1;

    while( !(i >> n) ) 
    {
        int pushBack = 0;
        int pushBack2 = 0;
        int v[500];
        for (size_t j = 0; j<n; j++)
        {
            if (i & (1 << j))
            {
                v[pushBack] = inputArray[j];
                pushBack++;
            }
        }
        resultArray[pushBack2] = v;
        pushBack2++;
        i = (i+(i&(-i)))|(((i^(i+(i&(-i))))>>2)/(i&(-i)));          
    }
    return resultArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:15:35.527

```
#include <vector>
#include <iostream>
using namespace std;

vector<vector<int>> subsets(const vector<int>& input, int k)
{
    size_t n = input.size();

    vector<vector<int>> result;

    size_t i = (1 << k) - 1;

    while( !(i >> n) ) 
    {
        vector<int> v;

        for (size_t j = 0; j < n; j++)
           if (i & (1 << j))
                v.push_back(input[j]);

        result.push_back(v);

        i = (i+(i&(-i)))|(((i^(i+(i&(-i))))>>2)/(i&(-i))); 
    }

    return result;
}

int main()
{
    auto out = subsets({5,2,8,14,3,9,11}, 3);
    for (auto x : out)
    {
        for (auto y : x)
            cout << y << " ";
        cout << endl;
    }
} 
```

输出：

```
5 2 8 
5 2 14 
5 8 14 
2 8 14 
5 2 3 
5 8 3 
2 8 3 
5 14 3 
2 14 3 
8 14 3 
5 2 9 
5 8 9 
2 8 9 
5 14 9 
2 14 9 
8 14 9 
5 3 9 
2 3 9 
8 3 9 
14 3 9 
5 2 11 
5 8 11 
2 8 11 
5 14 11 
2 14 11 
8 14 11 
5 3 11 
2 3 11 
8 3 11 
14 3 11 
5 9 11 
2 9 11 
8 9 11 
14 9 11 
3 9 11 
```

# awk - AWK - 如何改进这个例子？

> ID：10271151
> 
> 赞同：0
> 
> 时间：2012-04-22T19:08:43.067
> 
> 标签：awk

我有一个文件：

```
AA
BB 
```

此命令打印出：

```
$ awk 'BEGIN { system("awk '"'"'{print}'"'"' file") }'

AA
BB 
```

相同，但在“printf”中：

```
$ awk 'BEGIN { system("awk '"'"'{printf "%s ", $0}'"'"' file") }'

/bin/sh: Illegal option -, 
```

如何改进最后一条命令以获得结果：

```
AA BB 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:41:52.967

希望您的问题只是出于好奇。毫无疑问，有更好的方法来完成您可能尝试做的任何事情，如果不是的话。

您可以使用变量来表示引号，而不是尝试使用复杂的单引号和双引号序列（如果它们没有正确配对可能会产生奇怪的副作用）。通过本质上是三级引用，它使代码更易于阅读。下面的技术有点类似于 Perl 的`q()`引用。

将变量设置`q`为单引号的八进制等效项，然后您可以执行以下操作：

```
awk 'BEGIN{q = "\047"; system("awk " q "{print}" q " file")}' 
```

间距由您决定 - 每个字符串段都连接到其相邻段。

这是您可能会发现更具可读性的另一种方式：

```
awk 'BEGIN{q = "\047"; system("awk " q"{print}"q " file")}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:27:19.307

这可能对您有用：

```
awk 'BEGIN{system("awk '\''{printf \"%s \", $0} END { print \"\" }'\'' file")}'
AA BB 
```

或更容易：

```
awk 'BEGIN{system("paste -sd\" \" file")}'
AA BB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:12:50.510

简单，不要使用`awk`; 使用`tr`.

```
tr '\n' ' ' file; echo; 
```

或者，如果您在一个管道中需要所有这些

```
tr '\n' ' ' file | awk 'END { print }' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T19:16:58.163

如果你想纯粹在 awk 中做，你可以尝试这样的事情：

```
awk '{printf "%s ", $0} END { print "" }'  <  aabb.txt 
```

# javascript - 如何更改 IFrame 中的文本颜色

> ID：10271153
> 
> 赞同：6
> 
> 时间：2012-04-22T19:09:14.023
> 
> 标签：javascript, html, css, iframe

我有一个带有链接到文本文件的 IFrame 的 html 页面，我的 html 页面的正文设置为黑色，而 IFrame txt 的默认颜色是黑色，所以我看不到我的文本：/ 我想知道如何更改文字颜色，谢谢。佐基拉

```
<iframe src="http://wordpress.org/extend/plugins/about/readme.txt" width="470" frameborder="0" marginheight="0" marginwidth="0" style="overflow-x:hidden"></iframe> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:57:27.400

这至少在 FF、IE 和 Opera 中是这样的。

```
document.getElementById('your_iframe_id').contentWindow.document.body.style.color='white'; 
```

在 Chrome 中，您只能更改`IFRAME`背景颜色：

```
document.getElementById('your_iframe_id').style.background='white'; 
```

在 IE 中更改背景颜色：

```
document.getElementById('your_iframe_id').contentWindow.document.body.style.backgroundColor='yellow'; 
```

然后有一个很大的但是......`contentWindow`如果 iframe 和主机页面在同一个域中，这些表达式包括 , 仅适用。

（默认情况下IE只有那个白色背景）

# php - 在 PHP 中使用 Twitter 搜索时出错

> ID：10271154
> 
> 赞同：0
> 
> 时间：2012-04-22T19:09:19.987
> 
> 标签：php, twitter

在搜索 2 或 3 后使用 PHP 在 Twitter 上搜索时，我收到了您的错误是速率限制。增强您在 PHP 中的冷静

```
 function twitter_class()
{
    $this->realNamePattern = '/\((.*?)\)/';

$this->intervalNames   = array('second', 'minute', 'hour', 'day', 'week', 'month', 'year');
$this->intervalSeconds = array( 1,        60,       3600,   86400, 604800, 2630880, 31570560);

    $this->badWords = array('somebadword', 'anotherbadword');
}
function searchURL($language, $query) {
    $func_args=func_get_args();
    $vars = array_map('urlencode', $func_args + array('', ''));        
    return vsprintf('http://search.twitter.com/search.atom?lang=%s&q=%s', $vars);
}

function getTweets($q,$lang, $limit=15)
{
    $output = '';

    // get the seach result

   $ch = curl_init($this->searchURL($lang, $q));

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);

    $response = curl_exec($ch);

    if ($response !== FALSE)
    {
        $xml = simplexml_load_string($response);

        $output = '';
        $tweets = 0;

        for($i=0; $i<count($xml->entry); $i++)
        {
            $crtEntry = $xml->entry[$i];
            $account  = $crtEntry->author->uri;
            $image    = $crtEntry->link[1]->attributes()->href;
            $tweet    = $crtEntry->content;

            // skip tweets containing banned words
            $foundBadWord = false;
            foreach ($this->badWords as $badWord)
            {
                if(stristr($tweet, $badWord) !== FALSE)
                {
                    $foundBadWord = true;
                    break;
                }
            }

            $tweet = str_replace('<a href=', '<a target="_blank" href=', $tweet);

            // skip this tweet containing a banned word
            if ($foundBadWord)
                continue;

            // don't process any more tweets if at the limit
            if ($tweets==$limit)
                break;
            $tweets++;

            // name is in this format "acountname (Real Name)"
            preg_match($this->realNamePattern, $crtEntry->author->name, $matches);
            $name = $matches[1];

            // get the time passed between now and the time of tweet, don't allow for negative
            // (future) values that may have occured if server time is wrong
            $time = 'just now';
            $secondsPassed = time() - strtotime($crtEntry->published);

            if ($secondsPassed>0)
            {
                // see what interval are we in
                for($j = count($this->intervalSeconds)-1; ($j >= 0); $j--)
                {
                    $crtIntervalName = $this->intervalNames[$j];
                    $crtInterval = $this->intervalSeconds[$j];

                    if ($secondsPassed >= $crtInterval)
                    {
                        $value = floor($secondsPassed / $crtInterval);
                        if ($value > 1)
                            $crtIntervalName .= 's';

                        $time = $value . ' ' . $crtIntervalName . ' ago';

                        break;
                    }
                }
            } 
```

这是我的代码，请查看它并找到我滞后的确切解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:28:44.763

使用 Twitter API 没有限制。如果您在共享服务器上测试该代码（意味着您的 ip 是否被使用 twitter API 的其他人使用），则可能导致此问题。或者你提出了太多的要求......

[https://dev.twitter.com/docs/rate-limiting#search](https://dev.twitter.com/docs/rate-limiting#search)

> 搜索 API 速率限制
> 
> 对 search.twitter.com 上托管的 Search API 的请求不计入 REST API 限制。但是，来自 IP 地址的所有请求都适用于搜索速率限制。搜索速率限制未公开以阻止不必要的搜索使用和滥用，但它高于 REST 速率限制。我们认为搜索速率限制对于大多数应用程序来说既宽松又足够，并且知道许多应用程序供应商已经发现它适合他们的需求。
> 
> 搜索 API 的要求
> 
> 搜索 API 的使用要求应用程序包含唯一且可识别的用户代理字符串。HTTP 引荐来源网址是预期的，但不是必需的。使用搜索 API 但未包含用户代理字符串的应用程序将收到较低的速率限制。
> 
> 超出 Search API 速率限制的应用程序将收到 HTTP 420 响应代码。最佳做法是注意此错误情况并尊重返回的 Retry-After 标头。Retry-After 标头的值是您的应用程序在再次从 Search API 请求日期之前应等待的秒数。
> 
> 改用流式 API
> 
> 搜索 API 最适合用户发起的即席查询。如果您的应用程序需要重复的 Search API 轮询，您可能需要考虑使用 Streaming API。
> 
> 避免被限价的提示
> 
> 以下提示可帮助您进行防御性编码并减少速率受限的可能性。
> 
> 鉴于速率限制，您可能想要提供的某些应用程序功能根本不可能，尤其是在结果的新鲜度方面。如果实时信息是您的应用程序的目标，请查看用户流或站点流。
> 
> 缓存
> 
> 如果您期望大量使用，请将 API 响应存储在您的应用程序或您的网站上。例如，不要尝试在您的网站登录页面的每个页面加载时调用 Twitter API。相反，不经常调用 API 并将响应加载到本地缓存中。当用户访问您的网站时，会加载结果的缓存版本。
> 
> 优先考虑活跃用户
> 
> 如果您的网站跟踪许多 Twitter 用户（例如，获取他们的当前状态或有关其 Twitter 使用情况的统计信息），请考虑仅请求最近登录您网站的用户的数据。
> 
> 适应搜索结果
> 
> 如果您的应用程序监控大量搜索词，则对没有结果的搜索的查询频率要低于对有结果的搜索的查询频率。通过使用回退，您可以及时了解流行的查询，但不会浪费周期请求很少更改的查询。
> 
> 或者，考虑使用 Streaming API 并过滤您的搜索词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:34:13.777

如果您想绕过 twitter 限制，那么您要么获得许多具有不同 IP 的机器并在它们之间分配搜索请求，以便在不同时间调用它们，要么将查询移动到客户端（假设您有很多客户在寻找）并希望他们提高您的带宽，尽管它不会那么安全。

# jquery - .click() 适用于静态内容，但不适用于从 ajax 调用插入的内容

> ID：10271156
> 
> 赞同：0
> 
> 时间：2012-04-22T19:09:28.557
> 
> 标签：jquery

我正在使用 jQuery 玩（阅读：最初的尝试）并制作一个简单的笔记应用程序。现在，我正在从数据库 ala ajax 中提取内容并将其插入到页面中。但是，当我尝试在动态内容（保存按钮）上为 .click() 进行简单回调时，它不起作用。目的是将内容发送回要存储的数据库。

如果我采用与 jquery 动态生成的相同内容，并将其静态地放入 web 服务器发送的 HTML 中，它确实有效。我不明白为什么一个有效而另一个无效。

[有问题的网站](http://96.126.120.41/notes/index.html)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
        <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
        <link rel="stylesheet" type="text/css" href="layout.css" />
        <script type="text/javascript" src="jquery-1.7.1.min.js"></script>

        <!--Get notes out of database and show them-->
        <script type="text/javascript">
        $(function()
        {
                $.ajax({
                        url: 'noteGet.php',
                        data: "",
                        dataType: 'json',
                        success: function(rows)
                        {
                                for (var i in rows) {
                                        var noteId = rows[i][0];
                                        var noteContent = rows[i][2];
                                        $('#allNotes')
                                                .append('<span id="stickyNote'+noteId+'" class="stickyNote"><textarea id="stickyNoteTextArea'+noteId+'" class="stickyNoteTextArea">'+noteContent+'</textarea><a href="#" id="stickyNoteSave'+noteId+'">save</a></span>')
                                }
                        }
                });

                //works
                $('#stickyNoteSave1').click(function() {
                        alert("save button clicked");
                });

                //does not work
                $('#stickyNoteSave13').click(function() {
                        alert("save button clicked");
                });

        });
        </script>

        <!--
        <script type="text/javascript">
                $('#noteForm').submit(function(event) {
                        event.preventDefault();

                        $.post("notePost.php", $('#noteTextArea').serialize(), function(data) {
                                alert(data);
                        });
                });

        });
        </script>
        -->

</head>
<body>
        <span id="allNotes">
                <!---The .click callback with the jquery selector works for only this span!-->
                <span id="stickyNote1" class="stickyNote"><textarea id="stickyNoteTextArea1" class="stickyNoteTextArea">fake</textarea><a href="#" id="stickyNoteSave1">special save</a></span>')
        </span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:12:24.297

当您绑定一个事件时，该事件会附加到您的选择器匹配的 DOM 元素上。如果该元素尚不存在，则没有任何约束。

解决方案是使用委托：

```
$('#container').on('click', '.elementselector', function() {

}) 
```

`#container`应该是包含新插入元素的元素（可以是`document`，但更具体的更好）并且`.elementselector`应该是匹配您实际想要事件的元素的选择器，例如`#stickyNoteSave13`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:11:20.550

使用[`delegate`](http://api.jquery.com/delegate/),[`live`](http://api.jquery.com/live/)或[`on`](http://api.jquery.com/on/)代替`click`:

```
// live
$('#stickyNoteSave13').live('click',function(){/*...*/}); 
```

或者

```
// on
$('#stickyNoteSave13').on('click',function(){/*...*/}); 
```

或者

```
// delegate
$('sticky-notes-container-selector').delegate('#stickyNoteSave13','click',function(){/*...*/}); 
```

我看到你使用 jQuery 1.7+，所以我建议使用这样的“on”方法：

```
 $('sticky-notes-container-selector').delegate('click','#stickyNoteSave13',function(){/*...*/}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:10:48.057

使用`live`：

```
 $('#stickyNoteSave13').live('click',function() {
        alert("save button clicked");
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T19:12:31.230

jQuery 1.7 之后不推荐使用 jQuery 的 live，所以应该使用 on()

```
$(document).on('click', '#stickyNoteSave13', function(){/*...*/}); 
```

# string - 从汇编中的读取输入中删除尾随换行符

> ID：10271159
> 
> 赞同：2
> 
> 时间：2012-04-22T19:09:34.057
> 
> 标签：string, assembly, stdin, nasm

我最近一直在自学汇编，我认为 NASM 汇编器及其语法是最有效和最容易使用的。我目前正在使用标准输入和输出；但是，我不知所措，因为我需要从正在阅读的字符串中删除换行符（回车符、换页符、换行符、- 0xd、0xc 和 0xa）。考虑以下：

```
 section .data
;; ...
    section .bss
input:  resb    255
 .len:  equ     $ - input

    section .text
    global  _start

_start:
    ;; Display message prompting for input, then...
    mov     edx, input.len
    mov     ecx, input
    mov     ebx, 0
    mov     eax, 3
    int     0x80 
```

目前，我希望去除尾随的换行符。考虑以下伪代码：

```
if the last character in `input` is 0xa or 0xc or 0xd:
    subtract the last character from `input`
repeat until false 
```

我很可能已经把自己说清楚了，但这里有一个 Python 等价于上面的伪代码：

```
while input[-1] is "\r" or input[-1] is "\f" or input[-1] is "\n":
    input = input[:-1] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:37:47.170

这不是特别优雅或高效，但它可能提供一个起点：

```
jcomeau@intrepid:/tmp$ cat test.nasm ; nasm -f elf -o test.o test.nasm; ld -o test test.o; ./test
    section .bss
input:  resb    255
 .len:  equ     $ - input

    section .text
    global  _start

_start:
    ;; Display message prompting for input, then...
    mov     edx, input.len
    mov     ecx, input
    mov     ebx, 0
    mov     eax, 3
    int     0x80  ;read in from stdin
    call    rstrip
    mov     edx, eax  ;count
    mov     ebx, 1  ;stdout
    mov     eax, 4
    int     0x80  ;write out
    mov     eax, 1
    xor     ebx, ebx
    int     0x80
rstrip:
    dec     eax  ;convert 1-based length to 0-based pointer
.loop:
    cmp     byte [ecx + eax], 0xa
    je      .chop
    cmp     byte [ecx + eax], 0xc
    je      .chop
    cmp     byte [ecx + eax], 0xd
    je      .chop
.done:
    inc     eax  ;convert pointer back to length
    ret
.chop:
    mov     byte [ecx + eax], 0
    dec     eax
    jns     .loop
    jmp     .done
this is a test
this is a testjcomeau@intrepid:/tmp$ 
```

# networking - 无法从外部连接到访客 [VirtualBox]

> ID：10271163
> 
> 赞同：2
> 
> 时间：2012-04-22T19:09:58.950
> 
> 标签：networking, virtualization, virtualbox

在我的工作场所，所有机器的 MAC 地址都需要由 IT 人员额外解锁才能访问网络和互联网。

我想在 VirtualBox 的虚拟机中设置一个测试服务器，它应该可以从网络/子网内部访问。为了实现这一点，我考虑使用一个桥接网络适配器，该适配器具有从当前关闭的机器借来的手动指定的 MAC 地址。

这导致以下信号流：

[HOST] <--> [GUEST]: ping 来宾不起作用，但通过其他方式访问来宾有效

[Outside HOST] --> [GUEST]：从其他网络机器连接到访客根本不起作用。

GUEST 正确地获得了正确子网中的 IP 地址，并且还可以连接到 Internet。

我借用MAC地址的机器可以正常连接HOST，反之亦然。

我已经尝试过 Windows 和 Mac OS X 主机以及 Windows 和 Linux 来宾，结果相同。

我在家里尝试过完全相同的配置，在这里可以从其他网络机器连接到 VM。

我知道我可以使用带有端口转发的 NAT 适配器，这确实有效，但是手动添加所有使用的端口很麻烦。

我工作场所的严格网络限制是否有可能以某种方式检测到两个 MAC 地址正在通过主机上的一个 NIC（一个来自虚拟适配器和物理适配器）使用，从而阻止传入流量？

如果是，是否有可能欺骗公司防火墙认为 VM 是合法的物理机器？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T18:39:46.960

问题自己解决了。今天我尝试了 virtio-net 适配器类型，突然我可以从其他网络机器连接到来宾。之后我将设置切换回来，它仍然可以工作。

我想我的问题的原因不是公司的防火墙，而是最后一次 VirtualBox 更新。

编辑：我今天又遇到了这个问题。并非所有数据包都可以从外部通过虚拟机。启用了一个网桥适配器和一个 NAT 适配器。我必须禁用 NAT 适配器才能成功连接到 VM。

# java - BigInteger 到键

> ID：10271164
> 
> 赞同：1
> 
> 时间：2012-04-22T19:10:10.357
> 
> 标签：java, security

是否可以将 BigInteger 转换为接口键？

[http://docs.oracle.com/javase/7/docs/api/java/security/Key.html](http://docs.oracle.com/javase/7/docs/api/java/security/Key.html)

我正在尝试实现 RSA 算法，并自己生成密钥，而不是使用 KeyPairGenerator 生成密钥。但是，当使用 Cipher 加密我的消息时，它需要一个密钥。我曾尝试将 BigInteger 转换为 Key，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:48:20.217

`RSAPublicKey`这是从模数和公共指数创建实现的示例。

```
KeyFactory factory rsa = KeyFactory.getInstance("RSA");
BigInteger n = ... ; /* modulus */
BigInteger e = ... ; /* public exponent */
RSAPublicKeySpec spec = new RSAPublicKeySpec(n, e);
RSAPublicKey pub = (RSAPublicKey) factory.generatePublic(spec);
Cipher enc = Cipher.getInstance("RSA");
enc.init(Cipher.WRAP_MODE, pub);
byte[] encryptedContentKey = enc.wrap(secret); 
```

一个 RSA 密钥对是一个私钥*和*一个公钥，每一个都包含多个`BigInteger`对象形式的数字。一对中的每个密钥共享相同的“模数”。公钥有一个“公共指数”，而私钥有一个“私人指数”。为了计算效率，私钥通常以“中国剩余定理形式”存储，其中包括附加数字。

如果要加密，则需要将 a传递`PublicKey`给`init()`.`Cipher`

如果要解密，则需要将 a传递`PrivateKey`给`init()`.`Cipher`

（一些提供程序允许您使用 a`Cipher`来执行签名操作，并在您反转密钥时使用正确的填充，但是当`Signature`类更清楚地表达您的意图时，不建议或不需要这样做。）

# javascript - php javascript从mysql获取数据在服务器端产生500错误

> ID：10271167
> 
> 赞同：1
> 
> 时间：2012-04-22T19:10:11.667
> 
> 标签：javascript, php, mysql

我的网页中有一个 mysql 数据库和 php+js+jquery 页面。

在此示例中，浏览器会加载一个包含以下内容的 php 页面：

```
<script type="text/javascript">
    function MuestraNoticia(str)
    {
    if (str=="")
      {
      document.getElementById("rss_rcpt").innerHTML="";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("rss_rcpt").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","auth/peticion_noticia.php?page="+str,true);
    xmlhttp.send();
    }
    MuestraNoticia(1);
</script>
<div id="rss_rcpt">
</div> 
```

peticion_noticia.php

```
<?php
    $event=$_GET["page"];
    if($page == 1){

    //allow sessions to be passed so we can see if the user is logged in
    session_start();
    //connect to the database so we can check, edit, or insert data to our users table
    $con = mysql_connect('localhost', 'user', 'pwd') or die(mysql_error());
    $db = mysql_select_db('dbname', $con) or die(mysql_error());
    $SQL = "SELECT * FROM tablename";
    $result = mysql_query($SQL);
    echo "<table class='PaperPage'>";
    echo "<tr>";
    $GLOBALS['normalizeChars'] = array(
        'Á'=>'&Aacute;', 'É'=>'&Eacute;', 'Í'=>'&Iacute;', 'Ó'=>'&Oacute;', 'Ú'=>'&Uacute;', 'Ñ'=>'&Ntilde;',
        'á'=>'&aacute;', 'é'=>'&eacute;', 'í'=>'&iacute;', 'ó'=>'&oacute;', 'ú'=>'&uacute;', 'ñ'=>'&ntilde;'
    );
    function arregla($toClean){
        return strtr($toClean, $GLOBALS['normalizeChars']);
    }

    while ($row = mysql_fetch_array($result)) {
        arregla($row['contenido']);
        echo "<td class='PaperFechaData' style='width:100px'>" .$row['fecha']. "</td>";
        echo "<td class='PaperTitData' style='width:820px'>" .$row['titulo']. "</td>";
        echo "</tr><tr>";
        echo "<td colspan='2' class='PaperCabData' style='width:920px'>". .$row['cabecera']. "</td>";
        echo "</tr><tr>";
        echo "<td class='PaperImgData'><img src='".$row['img']."' width='400px' height='400px'></td>";
        echo "<td class='PaperTxtData' style='width:520px'>" .$row['contenido']. "</td>";
        echo "</tr>";
        echo "<tr><td colspan='2'></td></tr>";
    }
    echo "</table>";
    mysql_close($con);
    } else {
        die();
    }   
?> 
```

我的网页的另一部分具有相同的代码结构，没有任何问题，在这种情况下浏览器返回 HTTP/1.0 500 内部服务器错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:31:23.790

```
 echo "<td colspan='2' class='PaperCabData' style='width:920px'>". .$row['cabecera']. "</td>"; 
```

你有两个相邻的点。

# c# - 创建动态表

> ID：10271171
> 
> 赞同：1
> 
> 时间：2012-04-22T19:10:51.743
> 
> 标签：c#, .net, visual-studio-2010, dynamic

我正在使用 C# 来发展我的技能。我正在尝试我在网上找到的教程：http: [//geekswithblogs.net/dotNETvinz/archive/2009/03/17/dynamically-adding-textbox-control-to-aspnet-table.aspx](http://geekswithblogs.net/dotNETvinz/archive/2009/03/17/dynamically-adding-textbox-control-to-aspnet-table.aspx)但是当我尝试代码时并添加 Generate table 方法，它告诉我`Table table = new Table();`找不到类型或命名空间名称。有谁知道我应该为此使用哪个命名空间。这是代码的其余部分：

```
 private void GenerateTable(int colsCount, int rowsCount)
        {
            //Creat the Table and Add it to the Page
            Table table = new Table();
            table.ID = "Table1";
            Page.Form.Controls.Add(table);
            // Now iterate through the table and add your controls 
            for (int i = 0; i < rowsCount; i++)
            {
                TableRow row = new TableRow();
                for (int j = 0; j < colsCount; j++)
                {
                    TableCell cell = new TableCell();
                    TextBox tb = new TextBox();

                    // Set a unique ID for each TextBox added
                    tb.ID = "TextBoxRow_" + i + "Col_" + j;

                    // Add the control to the TableCell
                    cell.Controls.Add(tb);
                    // Add the TableCell to the TableRow
                    row.Cells.Add(cell);
                }
                // Add the TableRow to the Table
                table.Rows.Add(row);
            }
        } 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:20:03.843

确保您正在为表[MSDN Ref导入命名空间](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)

有没有

```
using System.Web.UI.WebControls; 
```

在文件的顶部？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T13:36:07.500

不幸的是，教程通常会忽略他们正在使用的库，这可能会令人不安。但是有一个简单的解决方法：在这种情况下，谷歌你遇到的错误，`C# Table`第三个结果显示：

**表类 (System.Web.UI.WebControls) - MSDN - Microsoft**

在括号之间是您需要包含的库：

```
@using System.Web.UI.WebControls; // for .cshtml pages
using System.Web.UI.WebControls; // for .cs pages 
```

始终在搜索中包含 C#，并查找“MSDN”搜索结果。

# vhdl - 对 FPGA 进行编程？

> ID：10271172
> 
> 赞同：1
> 
> 时间：2012-04-22T19:10:52.970
> 
> 标签：vhdl, fpga

我想在具有用于所述 FPGA 的插槽（zif 等或任何适用的）的板上对 FPGA 进行编程，无需焊接即可将其从该插槽中移除和重新连接。我想知道在哪里可以买到适合以这种方式对 FPGA 进行编程的电路板？

一旦 FPGA 被编程，它们将通过焊料连接到另一个不同的 PCB。

我希望基本上以一种可以对 EPROM 进行编程的类似方式对 FPGA 进行编程。

如果可能的话，我希望使用 VHDL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T10:11:00.450

FPGA 不像 EPROM 那样进行编程——它们的内部是完全易失的。在系统使用中，它们是从其他一些非易失性存储器“配置”的。例如，许多可以直接连接到标准串行闪存设备以加载该配置。

这种非易失性存储器是您需要以某种方式“编程”的设备。例如：

*   在焊接之前，使用一些外部机构
*   using JTAG (if it has such an interface).
*   Or, you can load a configuration into the FPGA over JTAG which then allows you to program the flash using the FPGA!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:29:21.170

听起来你好像误解了一两件事。STM32F103 是一个[微控制器](http://en.wikipedia.org/wiki/Microcontroller)，即具有内置存储器、I/O 和类似功能的处理器，通常使用 C 或 C++ 编程。

VHDL（一种硬件描述语言）用于对[FPGA](http://en.wikipedia.org/wiki/Fpga)（以及其他）进行编程。这两种芯片有根本的区别。处理器是“静态”芯片，它逐条执行程序指令，而在 FPGA 中，芯片硬件本身是可编程的——您（通过使用例如 VHDL）描述芯片的实际连接性和功能，并从本质上创建大量小型、定制和特定应用的处理器。

您可能首先应该更多地了解这两种芯片之间的差异 - 然后看看例如一些[Digilents](http://www.digilentinc.com/Products/Catalog.cfm?NavPath=2,400&Cat=10&FPGA) FPGA 板。

此外，在一块板上对芯片进行编程、拆焊并将其焊接到另一块板上也不是一个好主意。今天的微控制器和 FPGA 都应该焊接到他们的最终电路板上，然后编程（例如通过 JTAG）——很抱歉，你提出的建议没有多大意义——如果你看看引脚数和今天的芯片包，你可能会明白为什么。

# javascript - 如何创建一个函数以在 javascript 插件中返回一个值？

> ID：10271173
> 
> 赞同：0
> 
> 时间：2012-04-22T19:10:56.860
> 
> 标签：javascript, jquery

我有这个倒计时

```
(function($){

    var options = {
        display_as_text     : false,
    remaining : 0,
        separator           : ':',
        significant_days    : 3,
    display_on_complete : null, // id of element to display when countdown is complete
    hide_on_complete : null // hide the timer once it hits zero
    };

    $.fn.countdown = function (config_options)
    {
        /*
         * Initialise
         *
         * Prepare data and trigger regular execution of code
         *
         * @param   container   Reference to DOM element where counter will be displayed
         */
        var initialise = function (container){

        }

        var update = function (seconds_remaining){          

        } 
```

我需要访问更新并根据我发送的值重置时间，但我不知道如何访问它。这是我实例化插件的方式

```
$('#timer').countdown({remaining : 1000}); 
```

但是我如何调用更新来更新秒...我试图将它设置为一个变量并调用它但没有去...任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:43:45.563

最常见的方法（我见过）是做 jQuery-UI 风格的事情：

1.  `$(selector).plugin({...})`绑定插件并允许以通常的方式链接。
2.  `$(selector).plugin('method')``method`作为访问者调用。
3.  `$(selector).plugin('method', arg)``method`作为具有指定的 mutator调用`arg`。

因此，在您的情况下，您需要在插件中添加一些参数解析逻辑，以便您可以说出类似`$(selector).countdown('update', 11)`.

您可以使用[`$.isPlainObject`](http://api.jquery.com/jQuery.isPlainObject/)and[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)来确定插件的调用方式，并将可变长度参数列表分开：

```
$.fn.countdown = function(options) {
    if(!$.isPlainObject(options)) {
        var stdarg = Array.prototype.slice.call(arguments);
        if(stdarg[0] == 'update' && stdarg.length > 1) {
            return this.each(function() {
                // Set up value using stdarg[1]
            });
        }
        // ...
    }

    return this.each(function() {
        // Bind as usual
    });
}; 
```

还有一个简单的演示（现实当然会更干净，更有条理）：http: [//jsfiddle.net/ambiguous/DEVBD/](http://jsfiddle.net/ambiguous/DEVBD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:22:57.307

我不确定您是否要检索剩余的秒数或调用`update`插件内的函数。但无论哪种方式，如果不查看完整源代码，就无法判断这是否包含在插件中。

如果你操作它，你总是可以向插件添加一个自定义 API，在插件范围内使用类似这样的东西：

```
$(this).data('countdown', {
    update: update
}); 
```

然后使用以下命令调用它：

```
$('#timer').data('countdown').update(12345); 
```

同样的想法也适用于获取内部变量，例如剩余秒数，f.ex:（假设调用了内部变量`seconds_remaining`）：

```
$(this).data('countdown', {
    getSecondsRemaining: function() {
        return seconds_remaining;
    }
}); 
```

接着：

```
$('#timer').data('countdown').getSecondsRemaining(); 
```

# php - 将值保存到数据库，然后将值附加到它

> ID：10271175
> 
> 赞同：0
> 
> 时间：2012-04-22T19:11:15.737
> 
> 标签：php, javascript, mysql, web, append

所以我在做一个项目，我做了一个网页，在这个页面上我有一个总值，它是一个名为 total 的 div 内的浮点数。我想要做的是将此值保存到我的网站空间（我由 123 reg 托管）上的数据库中，以便每个用户保存他们获得的总数，然后网站数据库中的总数会不断更新并再次显示在网站上作为“全球总量”。

我不知道我将如何去做这个任何接受者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:23:40.957

好的，所以基本上你可能想看看 Javascript，尤其是如何使用 javascript 提交表单：
[http ://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

然后你想看看如何在 PHP 中处理这些数据。
数据应该在`$_GET`or`$_POST`变量中。

您可能想了解 SQL`INSERT`语句。
[http://www.ntchosting.com/mysql/insert-data-into-table.html](http://www.ntchosting.com/mysql/insert-data-into-table.html)（在底部的某个地方）

然后您可能想了解如何使用 MySQL `SELECT`-Statement。有了它，您可以使用求和操作来获取所有总数的总和，然后使用 PHP 将其再次回显到页面中。

或者使用 AJAX，您可以以某种“实时”动作将其加载到页面中。

# c# - C# - 多选列表框更改值

> ID：10271181
> 
> 赞同：0
> 
> 时间：2012-04-22T19:11:52.460
> 
> 标签：c#, listbox, multi-select

我在多选框中有一些字符串，每次用户选择一个值时，它都会相应地更新，如下所示：

```
 if (lstSpecial.SelectedIndex == 0)
        {
            special1.Price = 18;

        }
        else if (lstSpecial.SelectedIndex == 1)
        {

            special1.Price = 25;

        }
        else if (lstSpecial.SelectedIndex == 2)
        {
            special1.Price = 40;

        }
        else if (lstSpecial.SelectedIndex == 3)
        {
            special1.Price = 30;

        } 
```

这对我来说很好，但是如果用户从列表框中选择超过 1 个值，Special1.Price 分别存储每个值，我该如何做到这一点？我发现当我尝试选择 2 个或更多时，这些值会被最后一个选择的值覆盖。

Price 属性只是一个简单的获取和设置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:55:17.807

要遍历列表框中的所有选定项，您应该使用 SelectedIndices，它是选定项的从零开始的索引的集合。

我有 if-else if... 带有数组名称的价格，如果需要，它更容易编写并且更好地扩展（如果 lstSpecial 包含超过 4 个项目，您可能需要检查以避免边界故障。）。

```
const int[] prices = new int[]{18,25,40,30};
int total = 0;
foreach(int index in lstSpecial.SelectedIndices)
    total += prices[index];
special1.Price = total; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:30:43.730

正如您所说，价格是一个属性，可能是 int 类型。它一次只能保存一个值。如果要保存多个值，则需要使用集合。您可以将价格声明为列表，然后您可以在 if 语句中添加每个价格。下面一行的东西。
声明您的 Price 属性，例如：

```
public List<int> Price {get;set;} 
```

那么：（以下场景最好使用switch）

```
if (lstSpecial.SelectedIndex == 0)
        {
            special1.Price.Add(18);

        }
        else if (lstSpecial.SelectedIndex == 1)
        {

            special1.Price.Add(25);

        }
        else if (lstSpecial.SelectedIndex == 2)
        {
            special1.Price.Add(40);

        }
        else if (lstSpecial.SelectedIndex == 3)
        {
            special1.Price.Add(30);

        } 
```

这样，您将拥有所有选定的价格。您可以使用以下方法检查它们：

```
foreach(int p in special1.Price)
{
Console.WriteLine(p);
} 
```

我不确定你的班级结构，但如果特殊班级代表一个项目，那么最好有一个“特殊”的集合，然后为每个项目添加价格

# mysql - 如何加快这个 MySQL 日期相等查询？

> ID：10271183
> 
> 赞同：1
> 
> 时间：2012-04-22T19:11:53.343
> 
> 标签：mysql, database, performance, date

```
SELECT SPX.date, SPX.value, GS.value, IBM.value
  FROM SPX, GS, IBM
  WHERE SPX.date=GS.date AND GS.date=IBM.date AND
  SPX.date >= '2007-04-22' AND SPX.date <= '2012-04-22'
  ORDER BY Date ASC 
```

我是 MySQL 的初学者，正在尝试用财务数据做一些事情。上面的查询显示了我尝试获取股票 SPX、GS 和 IBM 的数据池。然而，这个查询并没有那么快。有没有办法加快速度？

这也是每日数据，因此在此示例中，每只股票大约有 1500 个数据点

# ios - ios 在 NSMutableURLRequest 上崩溃

> ID：10271185
> 
> 赞同：1
> 
> 时间：2012-04-22T19:12:02.383
> 
> 标签：ios, nsurlrequest

```
NSURL *url = [NSURL URLWithString:@"http://locationofurlonlocalhost.mp4"];

...

NSMutableURLRequest *req;
req = [NSMutableURLRequest requestWithURL:url // <-- CRASH IS HERE!! thx to a breakpoint stepthrough
          cachePolicy:NSURLRequestUseProtocolCachePolicy
          timeoutInterval:30.0]; 
```

url 的日志将导致：

```
Printing description of url:
<NSURLRequest http://locationofurlonlocalhost.mp4> 
```

崩溃将记录

```
-[NSURLRequest absoluteURL]: unrecognized selector sent to instance 0x88003e0 
```

URL 看起来很好，所以我不确定发生了什么。这可能是因为模拟器无法访问 url 吗？我可以连接到 sim 的 safari 以及我的桌面 safari 上的 url。我该怎么办？

** 编辑 **

已确定 url 对象发布得太早。在`...`url 被传递给不同的选择器，然后其余的代码发生在那里。如何强制保留网址？我已经尝试过：

```
__strong NSURL *url = [[NSURL alloc] initWithString:@"http://locationofurlonlocalhost.mp4"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:28:41.340

这绝对看起来像您的网址已以某种方式发布。如果您打印`url`变量的描述并以 结束`NSURLRequest`，那么您正在查看释放的内存。

尝试使用 alloc / initWithString: 作为故障排除步骤。

# php - 如何返回一个空的 json_encode 对象

> ID：10271187
> 
> 赞同：2
> 
> 时间：2012-04-22T19:12:18.390
> 
> 标签：php, jquery, ajax, json

我基本上有一个 ajax 函数，它从数据库中获取最新帖子，我想知道的是，如果没有找到数据，我应该返回什么，因为返回 null 似乎是 firebug 的问题？

**php代码**

```
function getLatestChat(){
   global $session, $form;

   $data = $session->getLatestChat(mysql_real_escape_string($_REQUEST['withUser']),
      mysql_real_escape_string($_REQUEST['ignoreMessages']));

   if($data){//successful
      echo json_encode($data);   
   }        

   return;
} 
```

**jQuery代码**

```
function getLatestChat(){
   var ignoreMessagesArr = $(".chatID").map(function(){ return this.value;}).get().join(",");

   $.ajax({
      traditional: true,
      dataType: "json",
      type: "GET", url: "include/process.php", 
      data:{
      getLatestChat: "true",
         withUser: currentCCID,
     ignoreMessages: ignoreMessagesArr
      },
      success: function(data){
         $.each(data, function(i, elem){
        $('.chat-latestContainer').append(elem.value);
     });             
      }
   }
}); 
```

目前该方法要么返回**$data**对象，要么返回**null**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:15:48.060

您可以返回一个空对象来表示对象中没有数据：

```
return '{}'; 
```

或者，如果您的 Javascript 代码需要一个数组，则返回一个空数组：

```
return '[]'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:19:06.087

运行一个简单的

```
if(isset($retunValue)){
 //code
} 
```

检查它以检查它是否设置。

你也可以试试

```
if(!empty($returnValue)){
  //code
} 
```

在您的 if 代码中，您可以将其设置为适合您需要的任何内容以供进一步使用。如果不需要它，您可以忽略它，只需将不会引发错误的东西传回您的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:19:48.327

重写为（例如）：

```
function getLatestChat($session, $form){
   $ret = {};

   $data = $session->getLatestChat(mysql_real_escape_string($_REQUEST['withUser']),
      mysql_real_escape_string($_REQUEST['ignoreMessages']));

   if($data){//successful
      $ret = json_encode($data);   
   }        

   return $ret;
}

echo getLatestChat($session, $form); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T19:36:39.890

在这种情况下，我倾向于明确说明响应类型，但也许有更成熟的做法......

```
<?php

header('Content-Type: application/json');

// ... do stuff here: fetch data, json_encode etc.

// No data, no response
if (strlen($json) === 0) { // assuming we json encoded the data above
    header('HTTP/1.1 204 No Content');        
    exit();
}

// everything is ok
header('HTTP/1.1 200 OK');
echo $json; 
```

我刚刚在 FF11 和最新的 Firebug 上检查了这个，它似乎工作正常。

# markdown - 在 Markdown 列表中添加标准代码块的格式

> ID：10271188
> 
> 赞同：1
> 
> 时间：2012-04-22T19:12:19.503
> 
> 标签：markdown, code-formatting

我发现我无法在编号列表中获取代码块。

例如，当我通过缩进四个空格来添加代码块时，通常如下所示：

```
1\. Do the first thing

    $ git stuff
    $ git other stuff 

2\. second thing:

    $ git more stuff 
```

结果是这样的，其中的`$ git`行是普通文本并且没有格式化为代码：

> 1.  做第一件事
>     
>     
>     
>     $ git 东西 $ git 其他东西
>     
>     
> 2.  第二件事：
>     
>     
>     
>     $ git 更多东西

我可以使用反引号来做到这一点，即

```
1\. Do the first things

    `$ git stuff`  
    `$ git other stuff` 

2\. second thing:

    `$ git more stuff` 
```

但如果可以的话，我想“正常”地做积木（4 个空格缩进）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:35:58.253

根据您需要进行额外缩进[的文档；](http://daringfireball.net/projects/markdown/syntax)+4 个空格或 +1 个制表符（分别为第 0 列的 8/2）。

```
1\. Item 1

        $git stuff
        $git other stuff

2\. Item 2

        $git more stuff 
```

这些换行符是必要的。

# c++ - 将其“删除”到使用 std::shared_ptr 分配的对象？

> ID：10271193
> 
> 赞同：5
> 
> 时间：2012-04-22T19:12:47.233
> 
> 标签：c++, memory-management, c++11, shared-ptr

我知道，每当您使用传统指针`delete this`分配一些东西时，都可以在 C++中说。`new`事实上，我也知道如果你小心处理它是一个很好的做法。我可以让一个对象说它`delete this`是否被一个 持有`std::shared_ptr`？那应该调用析构函数，对吧？为了给你一个想法，我正在制作一个游戏，其中一艘船可以发射导弹，我想让导弹自行删除。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T19:16:50.020

不，这不安全，对象的生命周期是由 的持有者决定的`shared_ptr`，所以对象本身无法决定它是否想死。如果你这样做，你会在最后一次`shared_ptr`死亡时得到双重删除。我能提供的唯一解决方案是“重新考虑你的设计”（你可能一开始就不需要`shared_ptr`，导弹可能是值或池对象）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T20:45:28.107

导弹要删除自己，它必须拥有自己，或者至少与他人分享自己的所有权。既然你说`shared_ptr`导弹有一个，我假设你已经有多个对象共享导弹的所有权。

导弹有可能`shared_ptr`拥有自己的所有权，从而分享自己的所有权。然而，这总是会创建一个循环所有权模式：只要导弹的 shared_ptr 数据成员引用它自己，引用计数就永远不会下降到零，因此导弹就会泄露。

您可以让外部对象或事件告诉导弹删除自身，但我不确定重点是什么。为了告诉导弹删除自己，该通信应该通过 a 进行`shared_ptr`，然后删除不会真正发生，直到`shared_ptr`放开导弹。

是的，有可能。不，我认为这不是一个好主意。对我来说，它看起来很容易发生内存泄漏，实际上并没有增加价值。但是对于好奇的人，这里是你将如何做到的：

```
#include <iostream>
#include <memory>

class missile
    : public std::enable_shared_from_this<missile>
{
    std::shared_ptr<missile> self_;
public:
    missile()
      {} 

    ~missile() {std::cout << "~missile()\n";}

    void set_yourself()
    {
        self_ = shared_from_this();
    }
    void delete_yourself()
    {
        if (self_)
            self_.reset();
    }
};

int main()
{
    try
    {
        std::shared_ptr<missile> m = std::make_shared<missile>();
        m->set_yourself();
        std::weak_ptr<missile> wp = m;
        std::cout << "before first reset()\n";
        m.reset();
        std::cout << "after first reset()\n";
        // missile leaked here
        m = wp.lock();
        m->delete_yourself();
        std::cout << "before second reset()\n";
        m.reset();  // missile deleted here
        std::cout << "after second reset()\n";
    }
    catch (const std::exception& e)
    {
        std::cout << e.what() << '\n';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-04T12:27:47.083

我知道我参加节目迟到了，但我刚刚自己也想这样做，并意识到这是“可能的”，但你需要注意一些事情。

霍华德的回答是正确的，但没有抓住重点，因为您不应该将原件`shared_ptr`的建造留给客户。这就是造成内存泄漏风险的原因。相反，您应该封装构造并且只允许弱指针。

这是一个例子：

```
class Missile{
private:
    Missile(...){ }; // No external construction allowed
    Missile(const Missile&) = delete; // Copying not allowed
    void operator = (const Missile&) = delete; // -||-

    std::shared_ptr<Missile> m_self;
public:
    template<typename... Args>
    static MissilePtr makeMissile(Args... args){ 
        auto that = std::make_shared<Misile>(args...);
        that.m_self = that; // that holds a reference to itself (ref count = 2)
        return that; // 'that' is destroyed and ref-count reaches 1.
    }

    void die(){
        m_self.reset();
    }

    ...
};

typedef std::weak_ptr<Missile> MissilePtr;

void useMissile(MissilePtr ptr){
    auto missile = ptr.lock(); // Now ptr cannot be deleted until missile goes out of scope
    missile->die(); // m_self looses the reference but 'missile' still holds a reference
    missile->whatever(); // Completely valid. Will not invoke UB
} // Exiting the scope will make the data in missile be deleted. 
```

调用将在语义上产生与所有引用已删除对象都将过期的附加好处`die()`相同的效果。此外，如果其中任何一个用于访问，则删除将被延迟，直到用于访问的临时对象被销毁，从而为您节省终生的麻烦。`delete this``MissilePtr``MissilePtr``this``std::shared_ptr`

但是，您必须确保始终保持至少一个`MissilePtr`，并且在某些时候调用，`die()`否则最终会导致内存泄漏。就像使用普通指针一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-15T10:53:04.940

这个问题很老了，但我有一个类似的问题（在这种情况下，一个“监听器”对象必须管理自己的生命周期，同时仍然能够共享弱指针），并且谷歌搜索并没有为我提供解决方案，所以我正在分享我找到的解决方案，假设：

*   该对象管理它自己的生命周期，因此永远不会共享一个share_ptr，而是一个weak_ptr（如果你需要shared_ptr，一个类似的解决方案+ use_shared_from_this 可以做到）。
*   破坏 RAII 是一个坏主意，因此我们不会这样做：我们在这里解决的是对象本身拥有 shared_ptr 的问题，因为包含成员 share_ptr 会导致对对象破坏的双重调用，并且通常崩溃（或至少未定义的行为），因为析构函数被调用了两次（一次在正常对象销毁时，第二次在销毁自包含的 shared_ptr 成员时）。

代码：

```
#include <memory>
#include <stdio.h>

using std::shared_ptr;
using std::weak_ptr;

class A {
    struct D {
            bool deleted = false;
            void operator()(A *p) {
                printf("[deleter (%s)]\n", p, deleted ? "ignored":"deleted");
                if(!deleted) delete p;
        }
    };

    public: shared_ptr<A> $ptr = shared_ptr<A>(this, D());

    public: ~A() {
        std::get_deleter<A::D>($ptr)->deleted = true;
    }

    public: weak_ptr<A> ptr() { return $ptr; }
};

void test() {
    A a;

    printf("count: %d\n", a.ptr().lock().use_count());
    printf("count: %d\n", a.ptr().use_count());
}

int main(int argc, char *argv[]) {
    puts("+++ main");

    test();

    puts("--- main");
} 
```

输出：

```
$ g++ -std=c++11 -o test test.cpp && ./test
+++ main
count: 2
count: 1
[deleter (ignored)]
--- main 
```

shared_ptr 删除器永远不应该为分配在堆栈中的对象调用，所以当它在正常的对象销毁时，它只是绕过删除（我们到了这一点，因为已经调用了默认的对象析构函数）。

# c# - 在 1 个网站上使用和注册多个 ASP.NET mvc3 解决方案

> ID：10271195
> 
> 赞同：2
> 
> 时间：2012-04-22T19:12:52.750
> 
> 标签：c#, asp.net-mvc-3

我已经阅读了有关区域的信息并且知道如何使用它们。但是是否有另一种方法可以在 mvc 3 中使用已完成的 Web 应用程序并将其放入不同的 mvc 3 应用程序中并访问它？

或者在一台主机上运行 2 个不同的解决方案？

mysite/1stapplication mysite/2ndapplication

区域的工作方式相同，但有多个完整的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:26:19.890

No, each web application is a different one. At most, you can share aseemblies between them but the asp.net mvc projects themselves will be considered separate applications. If you want in fact to host them at the same address, then it's possible. Just put each app in a virtual directory on the server.

# openssl - 如何使用 OpenSSL 提取公钥？

> ID：10271197
> 
> 赞同：144
> 
> 时间：2012-04-22T19:12:57.657
> 
> 标签：openssl, public-key-encryption, pki

以下命令生成一个包含公钥和私钥的文件：

```
openssl genrsa -des3 -out privkey.pem 2048 
```

来源：[这里](http://www.openssl.org/docs/HOWTO/keys.txt)

*使用 OpenSSL，私钥也包含公钥信息，因此不需要单独生成公钥*

我们如何从 privkey.pem 文件中提取公钥？

谢谢。

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-04-22T19:19:02.890

```
openssl rsa -in privkey.pem -pubout > key.pub 
```

将公钥写入`key.pub`

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2014-05-01T17:36:29.730

虽然上述技术适用于一般情况，但它不适用于 Amazon Web Services (AWS) PEM 文件。

我确实在 AWS 文档中发现以下命令有效： `ssh-keygen -y`

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html)

**编辑** 感谢@makenova 的完整行：

```
ssh-keygen -y -f key.pem > key.pub 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-12-03T13:44:34.217

对于那些对细节感兴趣的人-您可以通过执行以下操作查看公钥文件中的内容（如上所述生成）：-

```
openssl rsa -noout -text -inform PEM -in key.pub -pubin 
```

或者对于私钥文件，这个： -

```
openssl rsa -noout -text -in key.private 
```

它将键的实际组件（模数，指数，素数，...）作为文本输出到控制台上

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-11-19T01:55:45.153

对于 AWS 导入现有公钥，

1.  从 .pem 导出执行此操作...（在 linux 上）

    ```
    openssl rsa -in ./AWSGeneratedKey.pem -pubout -out PublicKey.pub 
    ```

这将产生一个文件，如果你在一个看起来像这样的文本编辑器中打开它......

```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAn/8y3uYCQxSXZ58OYceG
A4uPdGHZXDYOQR11xcHTrH13jJEzdkYZG8irtyG+m3Jb6f9F8WkmTZxl+4YtkJdN
9WyrKhxq4Vbt42BthadX3Ty/pKkJ81Qn8KjxWoL+SMaCGFzRlfWsFju9Q5C7+aTj
eEKyFujH5bUTGX87nULRfg67tmtxBlT8WWWtFe2O/wedBTGGQxXMpwh4ObjLl3Qh
bfwxlBbh2N4471TyrErv04lbNecGaQqYxGrY8Ot3l2V2fXCzghAQg26Hc4dR2wyA
PPgWq78db+gU3QsePeo2Ki5sonkcyQQQlCkL35Asbv8khvk90gist4kijPnVBCuv
cwIDAQAB
-----END PUBLIC KEY----- 
```

2.  但是 AWS 不会接受这个文件。

    您必须从文件中删除`-----BEGIN PUBLIC KEY-----`and `-----END PUBLIC KEY-----`。保存并导入，它应该可以在 AWS 中使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-24T20:54:22.827

如果您正在寻找如何将 Amazon AWS`.pem`密钥对复制到其他区域，请执行以下操作：

```
openssl rsa -in .ssh/amazon-aws.pem -pubout > .ssh/amazon-aws.pub 
```

然后

```
aws ec2 import-key-pair --key-name amazon-aws --public-key-material '$(cat .ssh/amazon-aws.pub)' --region us-west-2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-25T09:10:13.417

使用 openssl 从 pem 文件中提取 pub 文件为

```
openssl x509 -inform pem -in private_key.pem -pubkey -noout > public_key.pub 
```

# objective-c - 无法更改我将其子类化的列的颜色

> ID：10271199
> 
> 赞同：2
> 
> 时间：2012-04-22T19:13:30.620
> 
> 标签：objective-c, cocoa, nstableview, nstextfieldcell

我将表的列子类化为`NStextFieldCell`. 当我想用下面给定的代码更改列的颜色时，颜色不会改变。为什么？

```
- (void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    if(row%2==0)
        [cell setBackgroundColor:[NSColor knobColor]];
    else
        [cell setBackgroundColor:[NSColor lightGrayColor]];

    [cell setDrawsBackground: YES];
} 
```

`NSTextFieldCell`我在子类中使用此代码

```
- (NSRect)titleRectForBounds:(NSRect)theRect 
{
    NSRect titleFrame = [super titleRectForBounds:theRect];
    NSSize titleSize = [[self attributedStringValue] size];
    titleFrame.origin.y = theRect.origin.y + (theRect.size.height - titleSize.height) / 2.0;
    return titleFrame;
}

- (void)drawInteriorWithFrame:(NSRect)cellFrame inView:(NSView *)controlView 
{
    NSRect titleRect = [self titleRectForBounds:cellFrame];
    [[self attributedStringValue] drawInRect:titleRect];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:21:23.813

尝试：

```
[cell contentView] setBackgroundColor:[NSColor redColor]]; 
```

# android - 检查互联网连接

> ID：10271201
> 
> 赞同：0
> 
> 时间：2012-04-22T19:13:48.577
> 
> 标签：android, eclipse

我想我应该首先说我对 eclipse 和 java 完全陌生。我正在尝试使用启动我的网页的 eclipse 创建一个 android 应用程序。我有一个运行良好的代码示例，但它几乎是从我在网上找到的示例中复制和粘贴的，所以请原谅我草率的代码。我想知道如何检查 Internet 或 wifi 连接是否可用。如果没有连接，则显示警报（没有 Internet 连接）。我发现了一些类似的问题，但我只是不确定在哪里放置代码？有人可以告诉我吗？

```
 package com.mysite.news;

    import com.mysite.news.R;
    import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.Window;

import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class WebActivity extends Activity {

    private WebView wv;

    private String LASTURL = "";

    Menu myMenu = null;

    private static final String PREFS_NAME = "MyPrefs";

    private Boolean imgOn;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate( Bundle savedInstanceState ) {
        super.onCreate( savedInstanceState );
        this.getWindow().requestFeature( Window.FEATURE_PROGRESS );
        setContentView( R.layout.web_view );

        wv = ( WebView ) findViewById( R.id.web_view );

        WebSettings webSettings = wv.getSettings();
        webSettings.setSavePassword( true );
        webSettings.setSaveFormData( true );
        webSettings.setJavaScriptEnabled( true );
        webSettings.setUseWideViewPort(true);
        webSettings.setLoadWithOverviewMode(true);
        webSettings.setSupportZoom(false);

        SharedPreferences settings = getSharedPreferences( PREFS_NAME, 0 );
        imgOn = settings.getBoolean( "IMGMODE", false );
        webSettings.setLoadsImagesAutomatically( imgOn );

        final Activity activity = this;

        // start ProgressDialog with "Page loading..."
        final ProgressDialog dialog = new ProgressDialog( activity );
        dialog.setMessage( "Page loading..." );
        dialog.setIndeterminate( true );
        dialog.setCancelable( true );
        dialog.show();

        wv.setWebChromeClient( new WebChromeClient() {
            public void onProgressChanged( WebView view, int progress ) {
                // set address bar and progress
//              activity.setTitle( " " + LASTURL );
//              activity.setProgress( progress * 100 );

                if( progress == 100 ) {
                    // stop ProgressDialog after loading
                    dialog.dismiss();

//                  activity.setTitle( " " + LASTURL );
                }
            }
        } );

        wv.setWebViewClient( new WebViewClient() {
            public void onReceivedError( WebView view, int errorCode, String description, String failingUrl ) {
                Toast.makeText( getApplicationContext(), "Error: " + description + " " + failingUrl, Toast.LENGTH_LONG ).show();
            }

            @Override
            public boolean shouldOverrideUrlLoading( WebView view, String url ) {
                if( url.indexOf( "mysite" ) <= 0 ) {
                    // the link is not for a page on my site, so launch another Activity that handles URLs
                    Intent intent = new Intent( Intent.ACTION_VIEW, Uri.parse( url ) );
                    startActivity( intent );
                    return true;
                }
                return false;
            }

            public void onPageStarted( WebView view, String url, Bitmap favicon ) {
                LASTURL = url;
                view.getSettings().setLoadsImagesAutomatically( true );
                view.getSettings().setBuiltInZoomControls( true );
            }

            public void onPageFinished( WebView view, String url ) {
                view.loadUrl( "javascript:(function() { " +
                                      "hide('sidebar');" +
                                      //"var parent = document.getElementsByClassName('page-navigation')[0];"+
                                      //"var panel = document.getElementsByClassName('panel-tools')[0];"+
                                      //"var div = document.createElement('div');"+
                                      //"div.innerHTML = panel.innerHTML;"+
                                      //"parent.appendChild(div);"+
                                      //"panel.innerHTML = '';"+
                                      //"div.style['margin-left'] = '31px';"+
                                      "var panel = document.getElementById('search');" +
                                      "panel.style['width'] = '55px';" +

                                      //"var imgs=document.getElementsByTagName('IMG');for(var i=0;i<imgs.length;i++){if (imgs[i].height=60) {imgs[i].src='';imgs[i].width=0;} }"+
                                      //"var urls=document.getElementsByTagName('li');for(var i=0;i<urls.length;i++){if (urls[i].style='margin: -14px 0pt 0pt;'){urls[i].style['display'] = 'none';}}"+
                                      //"hideByClass('panel-tools');"+
                                      "function hide(id){if (document.getElementById(id)){document.getElementById(id).style['display'] = 'none';}}" +
                                      //"function hideByClass(c){var e=document.getElementsByClassName(c);for(var i=0;i<e.length;i++){e[i].style['display'] = 'none';}}"+
                                      "})()" );
                if( imgOn ) {
                    view.getSettings().setLoadsImagesAutomatically( true );
                    view.getSettings().setSupportZoom(false);

                }
            }
        } );
        wv.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        wv.setScrollbarFadingEnabled(false);
        wv.loadUrl( "http://www.mysite.com" );
    }

    @Override
    public boolean onKeyDown( int keyCode, KeyEvent event ) {
        if( ( keyCode == KeyEvent.KEYCODE_BACK ) && wv.canGoBack() ) {
            wv.goBack();
            return true;
        }
        return super.onKeyDown( keyCode, event );
    }

    @Override
    public boolean onCreateOptionsMenu( Menu menu ) {
        super.onCreateOptionsMenu( menu );

        this.myMenu = menu;
        MenuItem item = menu.add( 0, 1, 0, "MAIN PAGE" );
        item.setIcon( R.drawable.home );
        MenuItem item2 = menu.add( 0, 2, 0, "BACK" );
        item2.setIcon( R.drawable.arrowleft );
        MenuItem item3 = menu.add( 0, 3, 0, "Reload" );
        item3.setIcon( R.drawable.s );
        MenuItem item4 = menu.add( 0, 4, 0, "CLEAR CACHE" );
        item4.setIcon( R.drawable.trash );
        MenuItem item5 = menu.add( 0, 5, 0, "Rate" );
        item5.setIcon( R.drawable.vote );
        MenuItem item6 = menu.add( 0, 6, 0, "Exit" );
        item6.setIcon( R.drawable.close );
        return true;
    }

    @Override
    public boolean onOptionsItemSelected( MenuItem item ) {
        switch( item.getItemId() ) {
            case 1:
                wv.loadUrl( "http://mysite.com" );
                break;
            case 2:
                if( wv.canGoBack() ) {
                    wv.goBack();
                }
                break;
            case 3:
                wv.loadUrl( LASTURL );
                break;
            case 4:
                wv.clearCache( true );
                break;
            case 5:
                Intent marketIntent2 = new Intent(Intent.ACTION_VIEW, Uri.parse(
                      "https://play.google.com/store/apps/details?id=" + getPackageName()));
                    startActivity(marketIntent2);
                break;
            case 6:
                finish();
                break;

        }

        return true;
    }

    private void saveSettings( Boolean val ) {
        SharedPreferences settings = getSharedPreferences( PREFS_NAME, 0 );
        SharedPreferences.Editor editor = settings.edit();
        editor.putBoolean( "IMGMODE", val );
        editor.commit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T12:55:01.517

```
private boolean checkNetwork() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = cm.getActiveNetworkInfo();
    if (networkInfo != null && networkInfo.isConnected()) {
        return true;
    } else {
        Toast.makeText(getApplicationContext(),
                "Sorry, Network Unavailable! :(", Toast.LENGTH_LONG).show();
    }
    return false;
} 
```

这个片段帮助了我，希望它也能帮助你。您的用法可能如下所示。

```
if (!checkNetwork()) {
    //TODO Network Not Available
} else {
    //TODO Network Available    
} 
```

您可能希望将`Toast notification` **NOT**放在`function()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:22:18.583

检查此链接 [如何检查 android 中的互联网连接？](https://stackoverflow.com/questions/2326767/how-do-you-check-the-internet-connection-in-android)

在加载 url 之前使用相同的解决方案。如果互联网不可用，则显示错误对话框，否则加载 url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:22:44.543

这是我用于网络连接的辅助类：

```
public class NetworkUtils
{

    public static boolean isOnline( Service service )
    {
        ConnectivityManager cm = (ConnectivityManager) service.getSystemService( Context.CONNECTIVITY_SERVICE );

        NetworkInfo netInfo = cm.getActiveNetworkInfo();

        if ( netInfo != null && netInfo.isConnected() )
        {
            return true;
        }

        return false;
    }

} 
```

并且不要忘记将权限添加到 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission> 
```

# wordpress - 如何在没有任何插件的情况下在 wordpress 中的 single.php 中添加 facebook like 按钮

> ID：10271208
> 
> 赞同：1
> 
> 时间：2012-04-22T19:14:49.840
> 
> 标签：wordpress, facebook-like

如果这个问题不适合该网站，我很抱歉。在我的 wordpress 网站中，我想在 single.php 文件中添加带有动态永久链接的 facebook like 按钮，但没有任何插件。换句话说，当通过 single.php 文件打开单个帖子时，我想在帖子之后添加点赞按钮。任何形式的帮助或建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:19:45.287

[这可能有效](http://www.wpbeginner.com/wp-tutorials/how-to-add-facebook-like-button-in-wordpress/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:33:58.020

在`single.php`循环内的文件中

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
....
<?php the_content(); ?>
<iframe src="http://www.facebook.com/plugins/like.php?href=<?php the_permalink() ?>&amp;send=false&amp;layout=button_count&amp;width=85&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:85px; height:21px;" allowTransparency="true"></iframe>
<?php endwhile; ?>
<?php endif; ?> 
```

[你可以读这个。](http://mashable.com/2010/05/07/wordpress-facebook-like-buttons/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:57:04.060

您可以将以下代码添加到functions.php中。

```
 function setFacebookLike($content) {
  global $post;
      if($post->post_type=="post") {

          $content.= '<iframe src="http://www.facebook.com/plugins/like.php?href='.get_permalink($post->ID).'&amp;send=false&amp;layout=button_count&amp;width=85&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:85px; height:21px;" allowTransparency="true"></iframe>';
      }
      return $content;
  }
  add_filter ('the_content', 'setFacebookLike'); 
```

# c# - HttpContex.Current.Profile 显示用户名 null

> ID：10271210
> 
> 赞同：1
> 
> 时间：2012-04-22T19:14:58.993
> 
> 标签：c#, .net, asp.net-mvc, httpcontext, asp.net-profiles

我正在使用 asp.net 配置文件系统。我在 mASP.NET MVC 中创建了一个名为 CustomProfile 的模型。在这个模型中，我创建了 3 个函数 CreateProfile()、SaveData()、LoadProfile()。

我从 AcountController 的登录操作中调用 LoadProfile()，但问题是当我在 LoadProfile() 函数中使用 HttpContext.Current.Profile 时，它​​显示用户名 null。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:55:12.777

需要在 IIS 中的该网站/Web 应用程序上启用 Windows 或表单身份验证

# .net - 复杂的表单验证（禁用对子对象属性的验证）

> ID：10271211
> 
> 赞同：0
> 
> 时间：2012-04-22T19:15:10.627
> 
> 标签：.net, asp.net-mvc, validation

在我的业务领域中，“用户”实体与单个“人员”实体相关联（因此用户实例包含安全/登录信息，但人员实体包含人员的联系信息）。

我的 ViewModel 看起来像这样：

```
class UserViewModel {
    [Required]
    public String UserName { get; set; }

    public Int64 PersonId { get; set; }
    public PersonViewModel Person { get; set; }

    public Boolean PersonViewModelIsNew { get; set; }
}

class PersonViewModel {
    [Required]
    public String FirstName;
    [Required]
    public String LastName;
    // etc
} 
```

该网页允许访问者编辑用户，以便他们可以用全新的个人实例或从数据库中提取的现有个人替换用户的个人信息。

附上表格截图：

![表格截图](../Images/59dd7572fbc96f70e2cd099c6d6a649e.png)

这个想法是，如果选择了“另一个员工”单选按钮（映射到“UserViewModel.PersonViewModelIsNew”属性），那么“UserViewModel.Person”成员的验证将被禁用。

但是 ASP.NET MVC 没有像 WebForms 那样的验证组的概念，那么我怎样才能控制这样的验证呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:12:33.143

我想这更像是一个绑定问题而不是验证问题（因为验证发生在绑定之后）。

我发现一种解决方案是使用 [Bind(Exclude="Person")] 标记 ViewModel，并在我的 Action 方法中执行此操作：

```
if( model.PersonViewModelIsNew ) {
    TryUpdateModel( model.Person, "Person" );
}

if( !ModelState.IsValid ) return View( model );

// Update DB here 
```

这种方法目前似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:43:09.737

[MVC Foolproof Validation 项目](https://foolproof.codeplex.com/)添加了一些很好的验证规则，这些规则涵盖了 ASP.NET MVC 中包含的验证器未涵盖的某些情况，例如 RequiredIfTrue Validation 属性，它看起来与您需要的类似。

当然，如果您有特殊要求，您可以编写自定义验证规则，通过继承 ValidationAttribute 类来创建自定义验证属性，您还可以选择在客户端提供验证。

# vb.net - 开发一个不会失去焦点的应用程序？

> ID：10271212
> 
> 赞同：10
> 
> 时间：2012-04-22T19:15:20.943
> 
> 标签：vb.net, vb6

我想开发一个应用程序，它不允许用户在打开时打开或跳转到另一个应用程序。它应该在`Visual Basic`. 例如，如果我的应用程序已打开（正在运行）并且用户尝试打开任何其他 Windows 应用程序，如“媒体播放器”，那么它不应该打开。该应用程序甚至不应允许“任务管理器”运行。应用程序在运行时应完全阻止 Windows 环境。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T22:26:00.573

一个非常好的问题。:)

**是否有可能在VB中实现它？**

答案是**肯定**的！

**这简单吗？**

当然不！

但是，这里有一些关于如何解决问题的提示。

**1）禁用任务管理器**

```
Sub DisableTaskManager()
    Shell "REG add HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System /v DisableTaskMgr /t REG_DWORD /d 1 /f", vbNormalFocus
End Sub

Sub EnableTaskManager()
    Shell "REG add HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\System /v DisableTaskMgr /t REG_DWORD /d 0 /f", vbNormalFocus
End Sub 
```

**2) 确保您的程序始终处于领先地位**

***a) 隐藏任务栏***

```
Option Explicit

'~~> http://allapi.mentalis.org/apilist/FindWindow.shtml
Private Declare Function FindWindow Lib "user32" Alias _
"FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName _
As String) As Long

'~~> http://allapi.mentalis.org/apilist/SetWindowPos.shtml
Private Declare Function SetWindowPos Lib "user32" _
(ByVal hwnd As Long, ByVal hWndInsertAfter As Long, _
ByVal x As Long, ByVal y As Long, ByVal cx As Long, _
ByVal cy As Long, ByVal wFlags As Long) As Long

Private Const SWP_HIDEWINDOW = &H80
Private Const SWP_SHOWWINDOW = &H40

'~~> Show/Hide Taskbar
Sub Sample()
    '~~> To show the taskbar
    ShowTskBar True

    '~~> To hide the taskbar
    ShowTskBar False
End Sub

Sub ShowTskBar(ShouldI As Boolean)
    Dim Sid As Long

    Sid = FindWindow("Shell_traywnd", "")

    If ShouldI = True Then
        If Sid > 0 Then _
        Sid = SetWindowPos(Sid, 0, 0, 0, 0, 0, SWP_SHOWWINDOW)
    Else
        If Sid > 0 Then _
        Sid = SetWindowPos(Sid, 0, 0, 0, 0, 0, SWP_HIDEWINDOW)
    End If
End Sub 
```

**b) 始终显示您的应用程序**

```
'~~> http://www.allapi.net/apilist/SetWindowPos.shtml
Private Declare Function SetWindowPos Lib "user32" _
(ByVal hwnd As Long, ByVal hWndInsertAfter As Long, _
ByVal x As Long, ByVal y As Long, ByVal cx As Long, _
ByVal cy As Long, ByVal wFlags As Long) As Long

Const HWND_TOPMOST = -1
Const HWND_NOTOPMOST = -2
Const SWP_NOSIZE = &H1
Const SWP_NOMOVE = &H2
Const SWP_NOACTIVATE = &H10
Const SWP_SHOWWINDOW = &H40

Private Sub Form_Activate()
    SetWindowPos Me.hwnd, HWND_TOPMOST, 0, 0, 0, 0, _
    SWP_NOACTIVATE Or SWP_SHOWWINDOW Or SWP_NOMOVE Or SWP_NOSIZE
End Sub 
```

**b) 以最大化模式显示您的应用程序**

最大化您的表单，以便桌面仅显示您在 Kiosk 应用程序中显示的表单。根据需要，您还可以禁用最小化按钮或标题栏。**在这种情况下，请记住添加一个按钮，以便用户可以单击该按钮退出表单**。

**3）禁用开始菜单**

此代码取决于您使用的 Windows 版本。在谷歌上搜索一下，你会发现很多例子。

同样，你必须照顾一些小事，但这篇文章会给你一个好的开始。如果您正在一个地方寻找完整的解决方案，那么我怀疑您是否会得到它；）

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:13:31.860

查看[Desktop APIi](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682124(v=vs.85).aspx)以创建您自己的“沙箱”，但要非常小心，因为很容易将自己锁定在主桌面之外。

另请参阅[此问题](https://stackoverflow.com/q/1149978/588306)以获取更多信息。

# jqgrid - 如何使用 Enter 选择项目并在内联编辑中启用 jqgrid 中的双击

> ID：10271215
> 
> 赞同：1
> 
> 时间：2012-04-22T19:15:42.037
> 
> 标签：jqgrid

Enter 不会在内联编辑中选择元素中的项目并阻止双击。

重现步骤：

打开 [http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)

在 IE9 中

选择

行编辑（新）输入类型

双击第一行“桌面计算机”开始内联编辑

单击第一行 FedEx 字段中的“Ship via”列以打开下拉列表。

按向下键选择银泰

按回车

观测到的：

1.  FedEx 出现在 Ship Via 列中

2.  双击此行不再启动内联编辑

预期的：

1.  银泰应该出现

2.  双击应该再次将行置于内联编辑模式。

怎么修 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:17:32.990

[我建议像在change](https://github.com/tonytomov/jqGrid/commit/145e2caae027e2ba49f4b34b1a03caee57fdd3db)中那样解决问题。这个想法很简单。是一个变更焦点，许多必需的最终操作可以在当前控件中完成。例如，如果`<select>`“更改”事件将被触发，`onfocusout`将被调用并且弹出菜单（上下文菜单或日期选择器）将被关闭等等。

所以我建议添加该行

```
$(ta).closest("tr.jqgrow").focus(); 
```

[行](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.inlinedit.js#L108)后的 'keydown' 事件处理程序内部。您可以在[演示](http://www.ok-soft-gmbh.com/jqGrid/KeyupInEditing1.htm)中看到结果。

# ruby-on-rails - 在 Lion 上安装 Ruby on Rails（再次），这里有什么问题：

> ID：10271217
> 
> 赞同：0
> 
> 时间：2012-04-22T19:16:03.277
> 
> 标签：ruby-on-rails, ruby, xcode, gcc, installation

我知道以前有人问过这个问题，并且我尝试了很多东西，但我无法让它发挥作用。

```
rvm install 1.9.3 --with-gcc=clang 
```

或者

```
rvm pkg install libyaml 
```

给出：

```
Fetching yaml-0.1.4.tar.gz to /Users/usr/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/usr/.rvm/src
Error running 'tar xmzf /Users/usr/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/usr/.rvm/src ', please read /Users/usr/.rvm/log/yaml/extract.log
Configuring yaml in /Users/usr/.rvm/src/yaml-0.1.4.
Error running ' ./configure --prefix="/Users/usr/.rvm/usr"  ', please read /Users/usr/.rvm/log/yaml/configure.log
Compiling yaml in /Users/usr/.rvm/src/yaml-0.1.4.
Error running 'make ', please read /Users/usr/.rvm/log/yaml/make.log 
```

三个日志文件是：

提取日志：

```
[2012-04-22 18:41:07] tar xmzf /Users/usr/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/usr/.rvm/src 
yaml-0.1.4/tests/example-reformatter-alt.c: Can't unlink already-existing object
yaml-0.1.4/tests/example-deconstructor.c: Can't unlink already-existing object
…
100 rows like this
…
yaml-0.1.4/win32/config.h: Can't unlink already-existing object
tar: Error exit delayed from previous errors. 
```

配置日志：

```
[2012-04-22 20:12:18]  ./configure --prefix="/Users/usr/.rvm/usr"  --with-gcc=clang 
configure: WARNING: unrecognized options: --with-gcc
./configure: line 2215: confdefs.h: Permission denied
./configure: line 2219: confdefs.h: Permission denied
./configure: line 2223: confdefs.h: Permission denied
./configure: line 2227: confdefs.h: Permission denied
./configure: line 2231: confdefs.h: Permission denied
./configure: line 2235: confdefs.h: Permission denied
./configure: line 2239: confdefs.h: Permission denied
checking for a BSD-compatible install... ./configure: line 2443: conftest.one: Permission denied
./configure: line 2444: conftest.two: Permission denied
mkdir: conftest.dir: Permission denied
usage: install [-bCcpSsv] [-B suffix] [-f flags] [-g group] [-m mode]
           [-o owner] file1 file2
   install [-bCcpSsv] [-B suffix] [-f flags] [-g group] [-m mode]
           [-o owner] file1 ... fileN directory
   install -d [-v] [-g group] [-m mode] [-o owner] directory ...
config/install-sh -c
checking whether build environment is sane... ./configure: line 2492: conftest.file Permission denied
configure: error: ls -t appears to fail.  Make sure there is not a broken
alias in your environment
configure: error: newly created file is older than distributed files!
Check your system clock 
```

制作日志：

```
[2012-04-22 20:44:29] make 
make: *** No targets specified and no makefile found.  Stop. 
```

ruby -v 给出 *未更新，如您所见：

```
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0] 
```

gcc -v 给出：

```
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2335.15~25/src/configure --disable-checking --enable-werror --prefix=/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2335.15~25/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00) 
```

xcodebuild -version 给出：

```
Xcode 4.3.2
Build version 4E2002 
```

关于如何解决这个问题的任何想法？几年前很难启动并运行轨道..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:33:10.113

为了解决这个问题，我遵循[了本指南](http://samsoff.es/posts/how-to-install-ruby-193)，然后添加了

```
"$(rbenv init -)" 
```

到我的 bash_login 文件。

# haskell - 为什么我在这个 Haskell 代码中得到“无法匹配预期类型”？

> ID：10271219
> 
> 赞同：2
> 
> 时间：2012-04-22T19:16:15.123
> 
> 标签：haskell

我有一个工作正常的功能：

```
 z::Int->Int->[Char]
      z x y =show(x)++show(y)++show(x*y) 
```

它实际上只是一个将一些数字转换为字符串的函数。然后我用我的快速排序功能对字符串进行快速排序。

```
quicksort.z 2 3 
```

但在这里我得到了错误

```
Couldn't match expected type `a0 -> [a1]' with actual type `[Char]'
In the return type of a call of `z'
In the second argument of `(.)', namely `z 2 3'
In the expression: flagskib . z 2 3 
```

我尝试了诸如括号之类的修复和使用 $ 函数，但没有帮助。

我很欣赏关于它的任何话。问题已经解决了，所以这篇文章的全部意义就是学习。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T19:23:29.317

`quicksort`接受一个论点。`z`需要两个。组合运算符具有以下类型

```
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

也许您现在可以看到问题所在。类型不匹配。

```
quicksort $ z 2 3 
```

将工作。所以会`quicksort . z 2 $ 3`或类似地`(quicksort . z 2) 3`因为对`z`参数的应用`2`返回一个参数的函数，它与`(.)`（部分应用）的类型匹配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T19:26:46.607

我假设`quicksort`有 type `[a] -> [a]`。 `(.)`用于函数组合，因此它期望组合两个函数，但您使用 a`[Char]`代替。你写的相当于`\x -> quicksort ((z 2 3) x)`，这显然行不通。您应该改用`($)`右关联函数 application: `quicksort $ z 2 3`，相当于`quicksort (z 2 3)`.

# spring - PROCEDURE 的参数数量不正确；预期为 1，得到 0。无法从代码中确定错误

> ID：10271222
> 
> 赞同：2
> 
> 时间：2012-04-22T19:16:50.297
> 
> 标签：spring, stored-procedures, jdbc, spring-jdbc

//设置输入参数

```
Map<String,Object> inParams = new HashMap<String,Object>();
inParams.put("Sig",resourceHistoryBean.getId());

List<ResourceHistoryBean> resourceHistoryList= new ArrayList<ResourceHistoryBean>(); 
```

// 定义存储过程

```
try{        
    SimpleJdbcCall readResult = new SimpleJdbcCall(getDataSource())
            .useInParameterNames("Sig")
            .declareParameters(new SqlParameter("Sig", Types.VARCHAR))
            .withProcedureName("SP_ResourceAllocationDtls")
            .withSchemaName("hrms")
            .returningResultSet("ResourceHistory", new ParameterizedRowMapper<ResourceHistoryBean>() {
                public ResourceHistoryBean mapRow(ResultSet rs, int rowNum)
                        throws SQLException {
                    ResourceHistoryBean bean = new ResourceHistoryBean();
                    resourceHistoryBean.setProjectName(rs.getString(RH_PROJECT_NAME));
                    return bean;
                }
            });
    readResult.compile(); 
```

// 执行存储过程

```
Map<String, Object> out = readResult.execute(inParams);
resourceHistoryList = (List<ResourceHistoryBean>) out.get("ResourceHistory"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:31:31.363

看起来我能够找到上述问题的替代解决方案（参数传递到存储过程并使用映射类）：

```
public List<ResourceHistoryBean> getResourceHistory(final ResourceHistoryBean resourceHistoryBean)throws Exception{

    try {
        // call stored procedure and pass parameter to it
        List resourceHistoryList = getJdbcTemplate().query(
                "call hrms.SP_ResourceAllocationDtls(?)",
                new Object[] {resourceHistoryBean.getId()}, new HistoryMapper());
        return resourceHistoryList;
    } catch (Exception e) {
        throw e;
    } finally {
        closeTemplate();

    }

} 
```

// 映射器类

```
class HistoryMapper implements RowMapper, IDatabaseConstants {

public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
    ResourceHistoryBean resourceHistoryBean = new ResourceHistoryBean();
    resourceHistoryBean.setProjectName(rs.getString(RH_PROJECT_NAME));
    return resourceHistoryBean;
}
} 
```

# bash - 如何获取调用 bash 脚本的别名的名称

> ID：10271224
> 
> 赞同：6
> 
> 时间：2012-04-22T19:17:07.147
> 
> 标签：bash, scripting, alias

`$0`扩展为 shell 脚本的名称。

```
$ cat ./sample-script
#!/bin/bash
echo $0
$ chmod 700 ./sample-script
$ ./sample-script
./sample-script 
```

如果通过符号链接调用 shell 脚本，则`$0`扩展为它的名称：

```
$ ln -s ./sample-script symlinked-script
$ ./symlinked-script
./symlinked-script 
```

我怎样才能得到别名的名称？这里 `$0' 再次扩展为文件名：

```
$ alias aliased-script=./sample-script
$ aliased-script
./sample-script 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T19:22:34.107

[根据手册页](http://ss64.com/bash/alias.html)，别名非常愚蠢

> ...读取命令时扩展别名，而不是执行命令时...

所以由于 bash 基本上只是用另一个字符串替换一个字符串然后执行它，因此命令无法知道别名中扩展了什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T19:26:56.980

我想您已经知道这一点，但为了记录，答案是：*您需要通过实现别名的代码进行合作。*

```
alternate_name () {
  MY_ALIAS_WAS=alternate_name real_name "$@"
} 
```

或者，如果您真的想使用被取代的别名语法：

```
alias alternate_name="MY_ALIAS_WAS=alternate_name real_name" 
```

...进而...

```
$ cat ~/bin/real_name
#!/bin/sh
echo $0, I was $MY_ALIAS_WAS, "$@" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T19:19:55.917

bash 不提供此功能。这就是为什么使用符号链接而不是别名来调用多路复用命令的原因。

# php - 在 foreach() 和 for() 内部时无法在 db 中插入值

> ID：10271226
> 
> 赞同：-1
> 
> 时间：2012-04-22T19:17:34.397
> 
> 标签：php

当表单发布时，它会作为`value1,value2,value3, value4`. 它已被分解为个人价值。一切都很好，除了当我试图将它`value1,value2,value3`插入`$variable[$i]`它时，它没有插入到表中。但是当`echo $variable[$i];`它工作正常时。

关于为什么不将值插入数据库的任何想法。

```
foreach ($_POST['ECB'] as $lx) {

for($i=0;$i<=$Count;$i++) { 
        $k += mysql_num_rows($el);
    echo $variable[$i];
        mysql_select_db($database_m, $m);
        $query_stat = "Insert into table (field) values ('$variable[$i]')";
        $Result = mysql_query($query_stat, $m) or die(mysql_error());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:55:34.053

如果数据库中字段的类型是某种数字类型（`INT`,等） `DECIMAL`，`FLOAT`那么您必须从 SQL 查询中删除单引号。它应该如下所示。

```
$query_stat = "Insert into table (field) values (".$variable[$i].")"; 
```

# ruby - 在 Ruby 中使用 Nokogiri 解析 HTML

> ID：10271230
> 
> 赞同：6
> 
> 时间：2012-04-22T19:17:51.740
> 
> 标签：ruby, xpath, nokogiri

使用此 HTML 代码：

```
<div class="one">
  .....
</div>
<div class="one">
  .....
</div>
<div class="one">
  .....
</div>
<div class="one">
  .....
</div> 
```

如何使用 Nokogiri 选择第二个或第三个 div 类是一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:51:14.420

您可以使用 Ruby 将大型结果集缩减为特定项目：

```
page.css('div.one')[1,2]  # Two items starting at index 1 (2nd item)
page.css('div.one')[1..2] # Items with indices between 1 and 2, inclusive 
```

因为 Ruby 索引从零开始，所以您必须注意需要哪些项目。

或者，您可以使用 CSS 选择器来查找第[*n*个项目](http://www.w3.org/TR/selectors/#nth-child-pseudo)：

```
# Second and third items from the set, jQuery-style
page.css('div.one:eq(2),div.one:eq(3)')

# Second and third children, CSS3-style
page.css('div.one:nth-child(2),div.one:nth-child(3)') 
```

或者，您可以使用 XPath 获取特定匹配项：

```
# Second and third children
page.xpath("//div[@class='one'][position()=2 or position()=3]")

# Second and third items in the result set
page.xpath("(//div[@class='one'])[position()=2 or position()=3]") 
```

对于 CSS 和 XPath 替代方案，请注意：

1.  编号从 1 开始，而不是 0
2.  您可以使用`at_css`and`at_xpath`来取回第一个这样的匹配元素，而不是 NodeSet。

    ```
    # A NodeSet with a single element in it:
    page.css('div.one:eq(2)')

    # The second div element
    page.at_css('div.one:eq(2)') 
    ```

最后，请注意，如果您使用 XPath 按索引选择单个元素，则可以使用更短的格式：

```
# First div.one seen that is the second child of its parent
page.at_xpath('//div[@class="one"][2]')

# Second div.one in the entire document
page.at_xpath('(//div[@class="one"])[2]') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T19:48:32.900

```
page.css('div.one')[1] # For the second
page.css('div.one')[2] # For the third 
```

# java - 在具有官方下载和许可库的设备上启动应用程序时，使用 Proguard 混淆 Android 应用程序会导致致命异常

> ID：10271233
> 
> 赞同：0
> 
> 时间：2012-04-22T19:18:18.037
> 
> 标签：java, android, proguard

我试图混淆一个完全用 C++ 编写的完成的应用程序，只有下载和许可是用 java 编写的。它在不使用 proguard 的情况下工作得很好，但是一旦它被混淆，我在手机上启动应用程序时会出现以下错误。

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fantasyhaze.rememory/com.fantasyhaze.rememory.Main}: android.database.sqlite.SQLiteException: no such table: MetadataColumns: , while compiling: SELECT APKVERSION,_id,DOWNLOADSTATUS,DOWNLOADFLAGS FROM MetadataColumns LIMIT 1
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1840)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1861)
    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:150)
    at android.app.ActivityThread.main(ActivityThread.java:4310)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.database.sqlite.SQLiteException: no such table: MetadataColumns: , while compiling: SELECT APKVERSION,_id,DOWNLOADSTATUS,DOWNLOADFLAGS FROM MetadataColumns LIMIT 1
    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1438)
    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1406)
    at N.<init>(Unknown Source)
    at N.a(Unknown Source)
    at com.google.android.vending.expansion.downloader.impl.DownloaderService.a(Unknown Source)
    at com.fantasyhaze.rememory.GameActivity.onCreate(Unknown Source)
    at com.fantasyhaze.rememory.Main.onCreate(Unknown Source)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1804)
    ... 11 more 
```

我在 proguard.cfg 中使用了以下配置

```
-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public interface com.google.android.vending.licensing.ILicensingService

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-keepclassmembers public class com.google.android.vending.expansion.downloader.impl.DownloadsDB { 
    public static final java.lang.String * ; 
} 
```

在构建应用程序时，它会给出一些警告，我不知道在使用 play_licensing 和 play_apk_expansion 的东西时如何解决。

```
-obfuscate:
    [mkdir] Created dir: D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\bin\proguard
      [jar] Building jar: D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\bin\proguard\original.jar
 [proguard] ProGuard, version 4.7
 [proguard] Reading program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\bin\proguard\original.jar]
 [proguard] Reading program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\lib\play_apk_expansion\downloader_library\bin\classes.jar]
 [proguard] Reading program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\lib\play_licensing\library\bin\classes.jar]
 [proguard] Reading program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\lib\play_apk_expansion\zip_file\bin\classes.jar]
 [proguard] Reading program jar [C:\Android\android-sdk\tools\support\annotations.jar]
 [proguard] Reading library jar [C:\Android\android-sdk\platforms\android-15\android.jar]
 [proguard] Preparing output jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\bin\proguard\obfuscated.jar]
 [proguard]   Copying resources from program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\bin\proguard\original.jar]
 [proguard]   Copying resources from program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\lib\play_apk_expansion\downloader_library\bin\classes.jar]
 [proguard] Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry [classes.jar:META-INF/MANIFEST.MF])
 [proguard]   Copying resources from program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\lib\play_licensing\library\bin\classes.jar]
 [proguard] Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry [classes.jar:META-INF/MANIFEST.MF])
 [proguard]   Copying resources from program jar [D:\SlidersEdgeUniverse\FloWars\CPE\trunk\Rememory\Source\PRO_Android\lib\play_apk_expansion\zip_file\bin\classes.jar]
 [proguard] Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry [classes.jar:META-INF/MANIFEST.MF])
 [proguard]   Copying resources from program jar [C:\Android\android-sdk\tools\support\annotations.jar]
 [proguard] Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry [annotations.jar:META-INF/MANIFEST.MF]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:57:13.397

第一次发帖的错误信息

> 无法启动活动 ComponentInfo{com.fantasyhaze.rememory/com.fantasyhaze.rememory.Main}：android.database.sqlite.SQLiteException：没有这样的表：MetadataColumns：，编译时：SELECT APKVERSION,_id,DOWNLOADSTATUS,DOWNLOADFLAGS FROM MetadataColumns LIMIT 1

表示 SQLite 数据库存在问题，因为缺少所需的表。

我建议使用[dex2jar](http://code.google.com/p/dex2jar/)反编译 APK 文件，然后使用[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)查看 Java 类文件，找出哪些 Java 类文件丢失或以某种方式被混淆，导致应用程序崩溃..

根据我个人的经验，Proguard 的大多数问题都与某些必要的属性被错误地混淆的类有关，或者在混淆过程中这些类刚刚被删除。

像这样的陈述

> -保持公共类 * 扩展 android.app.Activity

在你的 proguard.pro 文件中允许你从 Proguard 的混淆过程中排除类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:01:52.007

我最近遇到了这个错误，似乎在混淆代码后，反射停止在`DownloadsDB`课堂上工作。问题源于在`DownloadsContentDBHelper.onCreate`方法内部检索通过反射声明的嵌套类的问题，至少在我的情况下没有返回任何类。

所以我换了线

```
Class<?>[] arrayOfClass = DownloadsDB.class.getDeclaredClasses(); 
```

和

```
 Class<?>[] arrayOfClass = new Class[] {MetadataColumns.class, DownloadColumns.class}; 
```

手动指定所需的类。类字段也可以通过名称访问，因此我指示 proguard 完全保留类和所有成员：

```
-keep class com.google.android.vending.expansion.downloader.impl.DownloadsDB* {*;} 
```

这似乎对我有用。

# javascript - jQuery - 在操作页面中设置字段值，同时通过加载函数加载它

> ID：10271236
> 
> 赞同：0
> 
> 时间：2012-04-22T19:18:43.597
> 
> 标签：javascript, jquery

我有两个 html 页面，directory.html 和 customer.html

我正在尝试从我的 directory.html 页面为我的操作页面 (customer.html) 中显示的文本字段设置值。

我正在使用jQuery的加载功能来加载我的目录页面，有人可以指导我如何在通过加载功能加载操作页面后立即设置文本字段的值（自动）？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:26:47.520

在 load 函数中使用 load-finished 回调：

```
 //Store customer.html form field values here.
   var field1 = $('#field1').val();
   $("#directory").load("directory.html", {var:'value'}, function(){
       //load the info from the first page here
       $('#field1').val(field1);
    }); 
```

# javascript - 避免重复 AJAX 请求

> ID：10271237
> 
> 赞同：-1
> 
> 时间：2012-04-22T19:18:48.937
> 
> 标签：javascript, jquery, facebook

我刚刚看到 Facebook 用来查看喜欢某些评论的人的 ajax 工具提示。

最初悬停时引擎发出了一个 ajax 请求，但之后当我再次悬停时，引擎没有发出任何 ajax 请求，但仍然显示任何喜欢该评论的人。

facebook是否将我提出的每个请求的每个数据都存储在javascript中的某个变量中？

拜托，我需要一些线索：D

感谢您的每一次帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:25:43.020

好吧，如果您的服务器很幸运能够像 Facebook 一样受到攻击，我希望您也会尽可能多地缓存在客户端上！在 Javascript 中的全局变量中维护缓存或将数据附加到 DOM 是非常简单的。

就像是：

```
var fbCached = {};

//Do AJAX call for post postID...

fbCached.postID = ajaxResponse; 
```

我对 Facebook 如何真正避免重复的 AJAX 调用并不感兴趣——这就是我的做法。他们还可能存储进行 AJAX 调用的时间戳，以便他们可以查看是否值得重新检查帖子。

# java - 如何在 FrameLayout 中显示/隐藏 ImageView

> ID：10271246
> 
> 赞同：0
> 
> 时间：2012-04-22T19:20:02.640
> 
> 标签：java, android, imageview, android-linearlayout, android-framelayout

我试图特别显示/隐藏 a `ImageView`，它在 a 内`FrameLayout`。同时，我要隐藏或显示（相反`ImageView`），`LinearLayout`id**为recents_linear_layout**

```
<com.android.systemui.recent.RecentsPanelView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/recents_root"
android:layout_height="match_parent"
android:layout_width="match_parent">

<FrameLayout
    android:id="@+id/recents_bg_protect"
    android:background="@drawable/status_bar_recents_background"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:clipToPadding="false"
    android:clipChildren="false">

    <com.android.systemui.recent.RecentsHorizontalScrollView android:id="@+id/recents_container"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginRight="@dimen/status_bar_recents_right_glow_margin"
        android:divider="@null"
        android:stackFromBottom="true"
        android:fadingEdge="horizontal"
        android:scrollbars="none"
        android:fadingEdgeLength="@dimen/status_bar_recents_fading_edge_length"
        android:layout_gravity="bottom|left"
        android:orientation="horizontal"
        android:clipToPadding="false"
        android:clipChildren="false">

        <LinearLayout android:id="@+id/recents_linear_layout"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="horizontal"
            android:clipToPadding="false"
            android:clipChildren="false">
        </LinearLayout>

    </com.android.systemui.recent.RecentsHorizontalScrollView>

**<ImageView android:id="@+id/landscape"
    android:gravity="center"
    android:layout_gravity="center"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="0.0dip"
    android:src="@drawable/landscape_img"
    android:visibility="gone" />**

</FrameLayout>

<include layout="@layout/status_bar_no_recent_apps"
    android:id="@+id/recents_no_apps"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:visibility="invisible" />

</com.android.systemui.recent.RecentsPanelView> 
```

我的java代码，抛出一个`NullPointerException`，因为它找不到`ImageView`（因为这是在执行`com.android.systemui.recent.RecentsHorizontalScrollView`。这是代码

```
 mLinearLayout = (LinearLayout) findViewById(R.id.recents_linear_layout);
    mLinearLayout.setVisibility(mRecent ? LinearLayout.GONE : LinearLayout.VISIBLE);
mLandScape = (ImageView) findViewById(R.id.landscape);
mLandScape.setVisibility(mRecent ? View.VISIBLE : View.GONE); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:32:10.840

你可以使用 ((Activity)getContext()).findViewById(R.id.landscape) 虽然你应该避免它，因为不能保证上下文是一个活动。我不明白你为什么要在这个视图中隐藏一些视图。我认为这是活动的责任。您应该使用回调方法创建一些接口来通知活动有关您的事件，然后让它隐藏图像视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:41:00.007

**FIXED** 修复正在制作一个外部布局容器，其中旧 Layout 和 ImageView 作为子项

```
 <com.android.systemui.recent.RecentsHorizontalScrollView android:id="@+id/recents_container"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginRight="@dimen/status_bar_recents_right_glow_margin"
        android:divider="@null"
        android:stackFromBottom="true"
        android:fadingEdge="horizontal"
        android:scrollbars="none"
        android:fadingEdgeLength="@dimen/status_bar_recents_fading_edge_length"
        android:layout_gravity="bottom|left"
        android:orientation="horizontal"
        android:clipToPadding="false"
        android:clipChildren="false">

        <LinearLayout android:id="@+id/child_container"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="horizontal"
            android:clipToPadding="false"
            android:clipChildren="false">

            <LinearLayout android:id="@+id/recents_linear_layout"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:orientation="horizontal"
                android:clipToPadding="false"
                android:clipChildren="false" />

        <ImageView android:id="@+id/sense_landscape"
        android:gravity="center"
        android:layout_gravity="center"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="0.0dip"
        android:src="@drawable/sense_landscape"
        android:visibility="visible" />

        </LinearLayout>

    </com.android.systemui.recent.RecentsHorizontalScrollView> 
```

# jquery - 为什么不停止动画然后开始新的淡入淡出工作？

> ID：10271248
> 
> 赞同：0
> 
> 时间：2012-04-22T19:20:06.373
> 
> 标签：jquery, jquery-animate

我对使用 JQuery 还很陌生，只是在玩。我试图让一个元素在单击按钮时淡入。如果用户再次单击按钮，而元素仍在淡入，我希望它再次开始隐藏/不可见。所以我首先停止所有动画`stop(true)`，然后隐藏元素并让它淡入。

我无法让它工作。似乎第二次淡入是从元素当时的不透明度开始的，然后从那里淡入。我也尝试过使用`css("opacity", 0)`，`hide()`但随后该元素将其不透明度设置为 0，并且 fadeIn 似乎不再起作用。

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"> </script>
    </head>
    <body>
        <script type="text/javascript">
            $(document).ready(function () {
                $("button").click(function () {
                    $("span").stop(true).hide().fadeIn(3000);
                });
            })
        </script>
        <button>FadeIn</button> <span>Hello, world!</span>
    </body>
</html> 
```

使用 JQuery 1.7.2 并在 Chrome 和 IE 中尝试过。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:32:44.323

`.stop(true)`只是停止动画并将其留在原处。如果您在 a 的中间`fade()`，那么该对象将在淡入淡出中间留下一个不透明度值。

如果您想停止动画并将不透明度置于已知状态，那么您可能只想将其设置为您希望它开始的位置。 `.hide()`设置`display: none`- 它不会弄乱不透明度。

因此，如果您在执行`fadeOut()`时处于 a 的中间`.stop(true)`，那么您可以这样做`.stop(true, true)`，这会将当前动画跳到结尾，从而为您提供一个很好的起点`fadeIn()`。

您还可以在原处停止动画，然后从那里淡出到完全不透明：

```
.stop(true).fadeTo(3000, 1); 
```

当您中断上一个动画时，这通常是您想要做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:23:25.897

稍等`true`一下`"jump to the end"`：

`.stop(true,true)`

[http://jsfiddle.net/V8wRE/2/](http://jsfiddle.net/V8wRE/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:28:45.527

问题是，当您停止跨度并且动画未完成时，该`fadeIn`功能会将您的跨度淡化为最后一个已知的不透明度（由于动画未完成，因此不是 1），因此您可以将第二个 true 标志传递给`stop`Esailija 所说的功能，或者您可以使用`fadeTo`代替`fadeIn`：

```
 $("span").stop(true).hide().fadeTo(3000,1); 
```

在这里工作演示：http: [//jsfiddle.net/V8wRE/3/](http://jsfiddle.net/V8wRE/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T19:45:48.757

我今天早些时候遇到了这个问题，但是使用 fadeTo 而不是 fadeIn。我刚刚使用了这段代码

```
$(news_controls).hover(function(){
        $(this).stop().fadeTo("fast", 1);
},function(){
        $(this).stop().fadeTo("slow", 0.4);
}); 
```

但是，正如您所说的那样，需要两个真正的标志才能跳转到末尾，因此您的代码应该如下所示

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"> </script>
    </head>
    <body>
        <script type="text/javascript">
            $(document).ready(function () {
                $("button").click(function () {
                    $("span").stop(true, true).hide().fadeIn(3000);
                });
            })
        </script>
        <button>FadeIn</button> <span>Hello, world!</span>
    </body>
</html> 
```

# objective-c - 当用户长按它时，如何显示带有 UITableViewCell 内容的消息框？

> ID：10271249
> 
> 赞同：0
> 
> 时间：2012-04-22T19:20:13.483
> 
> 标签：objective-c, ios

我有一个表格，某些单元格中的数据太长并且超出了运行范围。虽然他们可以点击它来查看名称的更多详细信息，但我想添加一种方法让他们长按它几秒钟，然后打开标准消息框并显示单元格的全部内容，然后他们可以点击确定将其关闭。

我知道，`UILongPressGestureRecognizer`但我不确定从那里去哪里，设置它然后让它显示单元格的内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:30:32.423

这对我有用。我在 UITableViewController 中使用此代码

```
-(void)viewDidLoad{

//Recognize long tap
UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc] 
                                      initWithTarget:self action:@selector(handleLongPress:)];
gestureRecognizer.minimumPressDuration = 1.0; //seconds
[self.view addGestureRecognizer:gestureRecognizer];
[gestureRecognizer release];

}

 -(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer{
CGPoint p = [gestureRecognizer locationInView:self.view];

NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:p];

if (indexPath != nil) {
//Do something
}
} 
```

# eclipse - Servet：接收 JSP 文件在 WebContent 中不存在

> ID：10271252
> 
> 赞同：0
> 
> 时间：2012-04-22T19:20:40.793
> 
> 标签：eclipse, jsp, servlets, web.xml

我正在使用 Eclipse 来编写 servlet。现在，我想做一个`example.jsp`类似于 servlet 的东西（访问属性或 ServletConfig、ServletContext 的参数...）

我把example.jsp放在WebContent上面，项目名是ProjectExample。

在 web.xml 中，我是这样声明这个 servlet 的：

```
<servlet>
    <servlet-name>JSP Example</servlet-name>
    <jsp-file>example.jsp</jsp-file>  
    <init-param>
      <param-name>name</param-name>
      <param-value>hqt</param-value>
    </init-param>
// I meet warning at <jsp-file>: that doesn't found this file 
//although I have change to: `/example.jsp`, `ProjectExample/example.jsp` or `/ProjectExample/example.jsp`
</servlet> 
```

因为 Container 不识别这个文件，所以当我使用时：`getServletConfig().getInitParameter("name")`我会收到 null ！！！

请告诉我如何解决这个问题。

谢谢 ：）

@：如果在代码中输入错误，那不是问题，因为它只是拼写错误。我不知道为什么 StackOverFlow 不再允许复制/粘贴功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:31:37.993

我认为主要问题不在于您的配置，而在于配置 jsp 页面的方式。

更改您的`<jsp-file>/example.jsp</jsp-file>`并将其添加到 JSP：

```
Who am I? -> <%= getServletName() %> 
```

我的盒子输出是：

```
Who am I? -> jsp 
```

这是因为所有 JSP 共享同一个称为“jsp”的 servlet 配置。它在 $CATALINE_HOME/conf/web.xml 中配置（如果您使用的是 Tomcat）。对于我的 Tomcat 7，配置如下所示：

```
<servlet>
    <servlet-name>jsp</servlet-name>
    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
    <init-param>
        <param-name>fork</param-name>
        <param-value>false</param-value>
    </init-param>
    <init-param>
        <param-name>xpoweredBy</param-name>
        <param-value>false</param-value>
    </init-param>
    <load-on-startup>3</load-on-startup>
</servlet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:14:21.167

你的 servlet 应该有`init`方法，在那里你可以读取你需要的参数：

```
public class SimpleServlet extends GenericServlet {
    protected String myParam = null;

    public void init(ServletConfig servletConfig) throws ServletException{
        this.myParam = servletConfig.getInitParameter("name");
      }

    //your servlet code...
} 
```

这个例子取自[这里](http://tutorials.jenkov.com/java-servlets/web-xml.html)

# css - 沙漏形发光CSS

> ID：10271257
> 
> 赞同：1
> 
> 时间：2012-04-22T19:20:56.963
> 
> 标签：css, effects, glow

我有一个设计师的图片，看起来像这样：

![在此处输入图像描述](../Images/3b7a49e05e7af66441da67418ca382ea.png)

我想让它垂直重复 1px 高度（作为滚动条握把的背景）。有没有办法使用 CSS3 模拟图像中间的发光效果？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:41:26.860

在其上创建另一个 div，具有以下背景：

```
background-image: linear-gradient(bottom, rgba(255,255,255, 0) 33%, rgba(255,255,255, 0.5) 67%, rgba(255,255,255,0) 100%); 
```

当然，为了有任何用处，应该这样重写：

```
 background-image: linear-gradient(bottom, rgba(255,255,255, 0) 33%, rgba(255,255,255, 0.5) 67%, rgba(255,255,255,0) 100%);
    background-image: -o-linear-gradient(bottom, rgba(255,255,255, 0) 33%, rgba(255,255,255, 0.5) 67%, rgba(255,255,255,0) 100%);
    background-image: -moz-linear-gradient(bottom, rgba(255,255,255, 0) 33%, rgba(255,255,255, 0.5) 67%, rgba(255,255,255,0) 100%);
    background-image: -webkit-linear-gradient(bottom, rgba(255,255,255, 0) 33%, rgba(255,255,255, 0.5) 67%, rgba(255,255,255,0) 100%);
    background-image: -ms-linear-gradient(bottom, rgba(255,255,255, 0) 33%, rgba(255,255,255, 0.5) 67%, rgba(255,255,255,0) 100%); 
```

# ios - xcode 4.2.1 构建失败 不允许操作

> ID：10271258
> 
> 赞同：1
> 
> 时间：2012-04-22T19:21:04.730
> 
> 标签：ios, xcode, jailbreak

我按照该网站[http://iphonedevwiki.net/index.php/Xcode](http://iphonedevwiki.net/index.php/Xcode)的步骤将我的应用程序部署到越狱的 Ipad，但在编译错误后收到错误：无法执行 '/usr/local/bin/ldid3\. py'（不允许操作）

我将 chmod +x 设置为该文件但仍然相同

我试图在终端中执行“ldid3.py”，但出现错误：语法无效

我正在使用 MacOS Lion 10.7.3 和 Xcode 4.2.1

任何帮助将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:27:32.833

我自己花了很多时间调试这个问题。我不知道任何 Python，所以花了我一段时间，但解决方案很简单。该 ldid3.py 脚本从不将首选项写入磁盘。只需`f.flush()`在`f.write(...)`. 我希望这会有所帮助。

# php - meeplace 中的语法错误

> ID：10271264
> 
> 赞同：0
> 
> 时间：2012-04-22T19:21:48.630
> 
> 标签：php, syntax, syntax-error

我一直在与 meeplace 合作，我遇到了关于代码中的语法错误的问题。它在广告管理页面中：

```
echo "<option value='0'>AM</option>";
echo "<option value='12' ".$select.">PM</option>"; 
```

`echo " </select></td>\r\n </tr>\r\n \r\n <tr>\r\n <td align=\"right\">Total Views Allowed:</td>\r\n <td><input type=\"text\" id=\"ad_total_views\" style=\"width:50px;\" value=\"\" disabled=\"disabled\" /> <label><input type=\"checkbox\" checked=\"checked\" onclick=\"if(this.checked==true){$('#ad_total_views').val('');$('#ad_total_views').attr('disabled','disabled');}else{$('#ad_total_views').val('');$('#ad_total_views').removeAttr('disabled');$('#ad_total_views').focus()}\" />Unlimited</label></td>\r\n </tr>\r\n \r\n <tr>\r\n <td align=\"right\">Total Clicks Allowed:</td>\r\n <td><input type=\"text\" id=\"ad_total_clicks\" style=\"width:50px;\" value=\"\" disabled=\"disabled\" /> <label><input type=\"checkbox\" checked=\"checked\" onclick=\"if(this.checked==true){$('#ad_total_clicks').val('');$('#ad_total_clicks').attr('disabled','disabled');}else{$('#ad_total_clicks').val('');$('#ad_total_clicks').removeAttr('disabled');$('#ad_total_clicks').focus()}\" />Unlimited</label></td>\r\n </tr>\r\n </table></td>\r\n </tr>\r\n <tr bgcolor=\"#FFFFFF\">\r\n <td class=\"td_th\" align=\"center\">Smarty Code (Developer)</td>\r\n <td>{\$ads->getAdCode(<span id=\"smartycode\">1</span>)}</td>\r\n </tr>\r\n <tr bgcolor=\"#FFFFFF\">\r\n <td class=\"td_th\" align=\"center\">&nbsp;</td>\r\n <td><input type=\"button\" value=\"Create New Campaign\" onclick=\"new_ad()\" /></td>\r\n </tr>\r\n </TBODY></TABLE>\r\n<br />\r\n\r\n<TABLE cellSpacing=1 cellPadding=4 width=\"100%\" border=0>\r\n <TBODY>\r\n <TR class=\"td_title\">\r\n <TD colSpan=7>Ad Campaigns</TD></TR>\r\n <TR bgColor=#ffffff>\r\n \r\n <TD width=\"10%\" align=\"center\" class=\"td_th\">&nbsp;</TD>\r\n <TD width=\"4%\" align=\"center\" class=\"td_th\">ID</TD>\r\n <TD width=\"29%\" align=\"center\" class=\"td_th\">Campaign Name</TD>\r\n <TD width=\"12%\" align=\"center\" class=\"td_th\">Start Date</TD>\r\n <TD width=\"11%\" align=\"center\" class=\"td_th\">End Date</TD>\r\n <TD width=\"17%\" align=\"center\" class=\"td_th\">Viewed / Views Allowed</TD>\r\n <TD width=\"17%\" align=\"center\" class=\"td_th\">Clicked / Clicks Allowed</TD>\r\n </TR>\r\n ";`

我不太确定出了什么问题，错误出现在上面的第三行代码中。

```
Parse error: syntax error, unexpected '(', expecting T_VARIABLE or '$' in /mgt/body/ad_list.php on line 185 
```

如果其他人遇到过这个问题或知道一个简单的答案来解决这个问题，那就太好了。我已经尝试了一些事情，比如让它不止一条线，但没有运气！：秒

**更新**

我设法将问题缩小到这一点：

```
 <label><input type=\"checkbox\" checked=\"checked\" onclick=\"if(this.checked==true){$('#ad_total_views').val('');$('#ad_total_views').attr('disabled','disabled');}else{$('#ad_total_views').val('');$('#ad_total_views').removeAttr('disabled');$('#ad_total_views').focus()}\" />Unlimited</label></td>\r\n 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:36:29.343

这是很久以来看到的一个疯狂`echo`的..我建议你使用`Heredoc`

## 例子

```
$str = <<<EOD
Example of string
spanning multiple lines
using heredoc syntax.
EOD;

echo $str ; 
```

## 回到你的脚本

```
<?php
$select ="test";
echo "<option value='0'>AM</option>";
echo "<option value='12' " . $select . ">PM</option>";
echo <<<DATA

</select>
</td>

</tr>

<tr>

    <td align="right">Total Views Allowed:</td>
    <td><input type="text" id="ad_total_views" style=""
        "width:50px;" value="" disabled="disabled" /> <label><input
            type="checkbox" checked="checked" onclick="if(this.checked==true){\$ ('#ad_total_views') . val ( '' );$

('#ad_total_views') . attr ( 'disabled', 'disabled' );
}else{\$('#ad_total_views').val('');$('#ad_total_views').removeAttr('disabled');\$('#ad_total_views').focus()}" />Unlimited</label></td>
</tr>

<tr>

    <td align="right">Total Clicks Allowed:</td>
    <td><input type="text" id="ad_total_clicks" style=""
        "width:50px;" value="" disabled="disabled" /> <label><input
            type="checkbox" checked="checked" onclick="if(this.checked==true){\$( '#ad_total_clicks').val('');$('#ad_total_clicks').attr('disabled','disabled');
}else{\$('#ad_total_clicks').val('');\$('#ad_total_clicks').removeAttr('disabled');\$('#ad_total_clicks').focus()}" />Unlimited</label></td>
</tr>

</table>
</td>

</tr>

<tr bgcolor="#FFFFFF">

    <td class="td_th" align="center">Smarty Code (Developer)</td>
    <td>{\$ads->getAdCode(<span id="smartycode">1</span>)}
    </td>
</tr>

<tr bgcolor="#FFFFFF">

    <td class="td_th" align="center">&nbsp;</td>
    <td><input type="button" value="Create New Campaign" onclick="new_ad()" /></td>
</tr>

</TBODY>
</TABLE>

<br />

<TABLE cellSpacing=1 cellPadding=4 width="100%"  border=0>

    <TBODY>

        <TR class="td_title">

            <TD colSpan=7>Ad Campaigns</TD>
        </TR>

        <TR bgColor=#ffffff>

            <TD width="10%" align="center" class="td_th">&nbsp;</TD>
            <TD width="4%" align="center" class="td_th">ID</TD>
            <TD width="29%" align="center" class="td_th">Campaign Name</TD>
            <TD width="12%" align="center" class="td_th">Start Date</TD>
            <TD width="11%" align="center" class="td_th">End Date</TD>
            <TD width="17%" align="center" class="td_th">Viewed / Views
                Allowed</TD>
            <TD width="17%" align="center" class="td_th">Clicked / Clicks
                Allowed</TD>
        </TR>

DATA;

?> 
```

演示：[http ://codepad.viper-7.com/3Scnp4](http://codepad.viper-7.com/3Scnp4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:34:15.897

试试这个：

```
echo ' </select></td>'."\r\n".' </tr>'."\r\n".' '."\r\n".' <tr>'."\r\n".' <td align="right">Total Views Allowed:</td>'."\r\n".' <td><input type="text" id="ad_total_views" style="width:50px;" value="" disabled="disabled" /> <label><input type="checkbox" checked="checked" onclick="if(this.checked==true){$(\'#ad_total_views\').val(\'\');$(\'#ad_total_views\').attr(\'disabled\',\'disabled\');}else{$(\'#ad_total_views\').val(\'\');$(\'#ad_total_views\').removeAttr(\'disabled\');$(\'#ad_total_views\').focus()}" />Unlimited</label></td>'."\r\n".' </tr>'."\r\n".' '."\r\n".' <tr>'."\r\n".' <td align="right">Total Clicks Allowed:</td>'."\r\n".' <td><input type="text" id="ad_total_clicks" style="width:50px;" value="" disabled="disabled" /> <label><input type="checkbox" checked="checked" onclick="if(this.checked==true){$(\'#ad_total_clicks\').val(\'\');$(\'#ad_total_clicks\').attr(\'disabled\',\'disabled\');}else{$(\'#ad_total_clicks\').val(\'\');$(\'#ad_total_clicks\').removeAttr(\'disabled\');$(\'#ad_total_clicks\').focus()}" />Unlimited</label></td>'."\r\n".' </tr>'."\r\n".' </table></td>'."\r\n".' </tr>'."\r\n".' <tr bgcolor="#FFFFFF">'."\r\n".' <td class="td_th" align="center">Smarty Code (Developer)</td>'."\r\n".' <td>{\$ads->getAdCode(<span id="smartycode">1</span>)}</td>'."\r\n".' </tr>'."\r\n".' <tr bgcolor="#FFFFFF">'."\r\n".' <td class="td_th" align="center">&nbsp;</td>'."\r\n".' <td><input type="button" value="Create New Campaign" onclick="new_ad()" /></td>'."\r\n".' </tr>'."\r\n".' </TBODY></TABLE>'."\r\n".'<br />'."\r\n".''."\r\n".'<TABLE cellSpacing=1 cellPadding=4 width="100%" border=0>'."\r\n".' <TBODY>'."\r\n".' <TR class="td_title">'."\r\n".' <TD colSpan=7>Ad Campaigns</TD></TR>'."\r\n".' <TR bgColor=#ffffff>'."\r\n".' '."\r\n".' <TD width="10%" align="center" class="td_th">&nbsp;</TD>'."\r\n".' <TD width="4%" align="center" class="td_th">ID</TD>'."\r\n".' <TD width="29%" align="center" class="td_th">Campaign Name</TD>'."\r\n".' <TD width="12%" align="center" class="td_th">Start Date</TD>'."\r\n".' <TD width="11%" align="center" class="td_th">End Date</TD>'."\r\n".' <TD width="17%" align="center" class="td_th">Viewed / Views Allowed</TD>'."\r\n".' <TD width="17%" align="center" class="td_th">Clicked / Clicks Allowed</TD>'."\r\n".' </TR>'."\r\n".' '; 
```

PHP 可能会因为字符串中的 $ 而感到困惑，因为它是一个双引号字符串，并且`$`被解析为该字符串内的变量开始。

# c - 位域声明中的整数宽度是否相关？

> ID：10271265
> 
> 赞同：2
> 
> 时间：2012-04-22T19:22:01.287
> 
> 标签：c, integer, bit-fields

我试图找到一个我不应该写的理由

```
struct bitfield {
  signed foo:4;
  unsigned bar:2;
}; 
```

而不是详细指定

```
struct bitfield {
  signed int foo:4;   
  unsigned int bar:2; 
}; 
```

由于位域的每个成员的大小都在冒号后明确指定，是否有任何缺点？

我是否使用`char`, `short`, `long`,有关系`long long`吗？指定的位域位数是否必须总是小于声明类型的宽度？

* * *

发现了一些相关的问题：

*   [非 int 类型的位域？](https://stackoverflow.com/q/2280492/1025391)
*   [在位域中声明不同的数据类型有什么用？](https://stackoverflow.com/q/9213622/1025391)

答案范围从

*   不要使用除 (signed/unsigned) 之外的任何其他类型`int`或`_Bool`和
*   `_Bool`, `signed int`,`unsigned int`或其他一些实现定义的类型。(C99 6.2.7.1 (4) )

在这种情况下：这种不特定*的其他一些实现定义的类型*可能是什么样的，我在这个地方的选择可能会产生哪些其他缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:43:02.227

### “有时”和“是”

C99 要求宽度表达式*“不超过指定类型的对象中的位数”*，因此如果使用的类型太小，代码要么无法编译，要么至少不可移植。见§6.7.2.1 (3)。

关于更新的第三个问题和一般，*“究竟是什么后果？”* 问题，可能受到影响的事情是：可移植性、对齐和填充。该标准仅对第一个给出了明确的规范。如果没有位域，通常可以根据预测编译器会做什么来生成最佳对齐值来安排对齐和填充。虽然不能保证，但似乎在某些环境中使用类似**short**的东西会因为减少对齐和填充而节省内存。

实现精确布局和可移植性偶尔冲突目标的一种可能方法是声明没有位字段的内存数据结构，可能使用`<stdint.h>`类型。然后，如果您想使用位域来解码某些内容，请将内存中的源对象分配给一个临时变量，该变量是位域和位特定类型的联合，或者通过强制转换来故意违反类型双关规则指针。（Linux 无处不在。）

更好的方法可能是避免位域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:24:20.550

在您的代码的两个版本中，宽度都是明确的；这是有符号和无符号的宽度`int`。`signed`只是 的别名`int`， 也是`signed int`。同样，`unsigned`是 的别名`unsigned int`。Lone `signed`and `unsigned`are 不是修饰符，而是本身的类型名称。

# c++ - 将 const char 与字符串进行比较

> ID：10271268
> 
> 赞同：2
> 
> 时间：2012-04-22T19:22:16.590
> 
> 标签：c++, if-statement, char, constants

我在将 const char 与字符串进行比较时遇到问题...如果我使用 Com_Printf ("%s", value); 它返回我想要的（0.3c），但是如何将值转换为字符串并将其与 0.3c 进行比较？这就是我所拥有的：

```
value = SearchInfostring(msg, "shortversion");
if (value != "0.3c")
{
    Com_Printf (MSG_WARNING,
            Com_Printf (MSG_WARNING,
                "> WARNING: Value: Should be 0.3c, is:  %s \n",
                value);
//Run stuff
} 
```

返回：警告：值：应该是 0.3c，是：0.3c

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T19:29:58.207

如果 value 是 const char* 类型，则表达式

```
value != "0.3c" 
```

正在比较两个指针（地址），而不是字符串。您想比较字符串和字符串文字，因此可以使用`strcmp`：

```
if(strcmp(value, "0.3c"))
{
   // strings are not equal
}
else
{
   // strings are equal
} 
```

请记住，C++ 中的首选字符串类型是`std::string`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T19:28:34.340

使用`std::string`for `value`。

```
std::string value = SearchInfoString(msg, "shortversion"); 
```

然后，您可以正常比较它。如果出于某种原因根本无法使用字符串（返回值可以转换），请使用`strcmp`.

```
if (strcmp (value, "0.3c") != 0)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:29:15.213

根据您使用它的方式，它似乎`SearchInfoString`返回. 因此，您可以只使用to比较。例如：`char *``Com_Printf``strcmp()``value``"0.3c"`

```
if (strcmp(value, "0.3c") != 0)
{
    // Print warning
} 
```

# touch - 在 logCat 中查看日志消息

> ID：10271271
> 
> 赞同：0
> 
> 时间：2012-04-22T19:22:25.653
> 
> 标签：touch, logging

我想要一点帮助。

我正在尝试提取“触摸”信息并发送它。对于调试，我想打印到我提取到日志的信息。我使用了 Log.v，但它不起作用。每次触摸屏幕时，我都会看到新消息，但没有我写的内容。我认为我的视图定义有问题。我想定义所有的屏幕。附件是我的代码和日志消息。

```
>1\. "TouchScreen.java"
    public class TouchScreenActivity extends Activity {
        /** Called when the activity is first created. */
        View mButtonLable;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            mButtonLable = findViewById(R.id.super_view);
            mButtonLable.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View view, MotionEvent motionEvent) {
            int i, len, id;
            float x, y, t;

            len = motionEvent.getPointerCount();
            float[][] touch = new float[len][4];
            for (i = 0; i < len - 1; i++) {
                   id = motionEvent.getPointerId(i);
                    x = motionEvent.getX(i);
                    y = motionEvent.getY(i);
                    t = motionEvent.getEventTime();
                    touch[i][0] = x;*
                    touch[i][1] = y;
                    touch[i][2] = id;
                    touch[i][3] = t;
                    Log.v("TouchScreenActity", "x = " + x + ", y = " + y
                    + ", id = " + id + ",t = " + t);
                }

                return false;
            }

        });

    }

    >2."main.xml:
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

        <TextView
            android:id="@+id/super_view"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="2"
            android:background="#f00" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/hello" />

    </LinearLayout>

my Logcat
>04-18 23:46:52.390: D/HierarchicalStateMachine(301): processMsg: SupplicantStartedState
>04-18 23:46:52.390: D/WifiStateMachine(301): SupplicantStartedState{ what=65574 when=-19ms }
>04-18 23:46:52.390: I/wpa_supplicant(19652): SCAN_RESULTS : [2] 
>04-18 23:46:52.400: D/HierarchicalStateMachine(301): handleMessage: X
>04-18 23:46:52.400: D/HierarchicalStateMachine(301): handleMessage: E msg.what=65575
>04-18 23:46:52.400: D/HierarchicalStateMachine(301): processMsg: DisconnectedState
>04-18 23:46:52.400: D/WifiStateMachine(301): DisconnectedState{ what=65575 when=-17ms >obj=android.net.wifi.WifiStateMachine$StateChangeResult@40877448 }
>04-18 23:46:52.400: D/WifiStateMachine(301): setDetailed state, old =SCANNING and new >state=CONNECTING
>04-18 23:46:52.400: D/HierarchicalStateMachine(301): processMsg: ConnectModeState
>04-18 23:46:52.400: D/WifiStateMachine(301): ConnectModeState{ what=65575 when=-18ms >obj=android.net.wifi.WifiStateMachine$StateChangeResult@40877448 }
>04-18 23:46:52.400: D/HierarchicalStateMachine(301): handleMessage: X
>04-18 23:46:52.400: D/WpsStateMachine(301): InactiveState{ what=65575 when=-1ms >obj=android.net.wifi.WifiStateMachine$StateChangeResult@40877448 }
>04-18 23:46:52.460: I/wpa_supplicant(19652): Wireless event: new AP: 00:21:27:f5:3d:20
>04-18 23:46:52.460: I/wpa_supplicant(19652): CTRL-EVENT-STATE-CHANGE id=4 state=4 >BSSID=00:21:27:f5:3d:20
>04-18 23:46:52.460: V/WifiMonitor(301): Event [CTRL-EVENT-STATE-CHANGE id=4 state=4 >BSSID=00:21:27:f5:3d:20]
>04-18 23:46:52.460: D/HierarchicalStateMachine(301): handleMessage: E msg.what=65575
>04-18 23:46:52.460: D/HierarchicalStateMachine(301): processMsg: DisconnectedState
>04-18 23:46:52.470: I/wpa_supplicant(19652): Current ps mode is 0
>04-18 23:46:52.470: I/wpa_supplicant(19652): Associated with 00:21:27:f5:3d:20
>04-18 23:46:52.470: I/wpa_supplicant(19652): CTRL-EVENT-STATE-CHANGE id=4 state=7 >BSSID=00:00:00:00:00:00
>04-18 23:46:52.470: D/WifiStateMachine(301): DisconnectedState{ what=65575 when=-1ms >obj=android.net.wifi.WifiStateMachine$StateChangeResult@413643e0 }
>04-18 23:46:52.470: I/wpa_supplicant(19652): CTRL-EVENT-CONNECTED - Connection to >00:21:27:f5:3d:20 completed (reauth) [id=4 id_str=]
>04-18 23:46:52.470: D/WifiStateMachine(301): setDetailed state, old =CONNECTING and new >state=CONNECTING
>04-18 23:46:52.470: D/HierarchicalStateMachine(301): processMsg: ConnectModeState
>04-18 23:46:52.470: D/WifiStateMachine(301): ConnectModeState{ what=65575 when=-2ms >obj=android.net.wifi.WifiStateMachine$StateChangeResult@413643e0 }
>04-18 23:46:52.470: D/HierarchicalStateMachine(301): handleMessage: X
>04-18 23:46:52.470: D/WpsStateMachine(301): InactiveState{ what=65575 when=-1ms >obj=android.net.wifi.WifiStateMachine$StateChangeResult@413643e0 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:48:40.573

我认为您的问题出在 for 循环声明中。

```
 for (i = 0; i < len - 1; i++) 
```

如果你的 len 为 1，这个循环的主体将永远不会被执行，不是吗？只需将其更改为：

```
 for (i = 0; i < len; i++) 
```

# android - Android程序添加地图活动

> ID：10271276
> 
> 赞同：1
> 
> 时间：2012-04-22T19:22:52.467
> 
> 标签：android, dictionary, android-activity, mapactivity

我有两个班，`Syros1Activity`和`MapActivity` 。在第一个活动 ( `Syros1Activity`) 中，我有一些按钮。第二个是`Map`。我想连接这些按钮之一，当我选择它时启动 MapActivity。这是我的代码：

地图活动：

```
import android.os.Bundle;
import com.view.View;
import com.google.android.maps.MapView;

public class  MapActivity {

public void onCreate(Bundle savedInstanceState) {
     super.**onCreate**(savedInstanceState); --->Here i get a mistake The method onCreate(Bundle) is undefined for the type Object
     setContentView(R.layout.maplayout);
     MapView mapView = (MapView) findViewById(R.id.mapview);
     mapView.setBuiltInZoomControls(true);
}

protected boolean isRouteDisplayed(){ return false;}
private void setBuiltInZoomControls(boolean b) {
     throw new UnsupportedOperationException("Not yet implemented");
}

private void setBuiltInZoomControls(boolean b) {
    throw new UnsupportedOperationException("Not yet implemented");
 }

private MapView findViewById(int mapview) {
    // TODO Auto-generated method stub
return null;
}

private void setContentView(int maplayout) {
    // TODO Auto-generated method stub
}
} 
```

Syros1活动：

```
import android.app.Activity;
import android.content.Intent;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.Toast;
import android.view.View;
import android.view.View.OnClickListener;

public class Syros1Activity extends Activity implements OnClickListener{
    private static final int PROGRESS = 0x1;
    private ProgressBar mProgress;
    private int mProgressStatus = 0;

    private static final String DEBUG_TAG = null;
    private static final OnClickListener OnClickListener = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn11 = (Button) findViewById(R.id.Button11);
               btn11.setOnClickListener(this);

        Button btn12 = (Button) findViewById(R.id.Button12);
               btn12.setOnClickListener(this);

        Button btn13 = (Button) findViewById(R.id.Button13);
               btn13.setOnClickListener(this);

        Button btn21 = (Button) findViewById(R.id.Button21);
               btn21.setOnClickListener(this);

        Button btn22 = (Button) findViewById(R.id.Button22);
               btn22.setOnClickListener(this);

        Button btn23 = (Button) findViewById(R.id.Button23);
               btn23.setOnClickListener(this);

    }

    public void  getLocation (Location location  ) { 
        try { 
            LocationManager locMgr = (LocationManager)
                getSystemService(LOCATION_SERVICE);
            Location recentLoc = locMgr.
                getLastKnownLocation(LocationManager.GPS_PROVIDER);
            Log.i(DEBUG_TAG, "loc: " + recentLoc.toString());

            }
    catch (Exception e) {
        Log.e(DEBUG_TAG,"Location failed", e);

    }

    }

    public void onClick(View v) {
        if (v.getId() == R.id.Button11){
            Toast.makeText(this, "Loading Google Map", Toast.LENGTH_SHORT)
            .show();
            Intent intent =new Intent();
            intent.setClass(getApplicationContext(),MapActivity.class);
            startActivity(intent);  
        }

         else if(v.getId() == R.id.Button12){
            Toast.makeText(this, "Loading Sights", Toast.LENGTH_SHORT)
            .show();
        }
         else if(v.getId() == R.id.Button13){
            Toast.makeText(this, "Loading Beach", Toast.LENGTH_SHORT)
            .show();
    }
        else if(v.getId() == R.id.Button21){
            Toast.makeText(this, "Loading Bars", Toast.LENGTH_SHORT)
            .show();
    }
        else if(v.getId() == R.id.Button21){
        Toast.makeText(this, "Loading Bars", Toast.LENGTH_SHORT)
        .show();
    }
        else if(v.getId() == R.id.Button22){
            Toast.makeText(this, "Loading Restaurant", Toast.LENGTH_SHORT)
            .show();
    }  
        else if(v.getId() == R.id.Button23){
           Toast.makeText(this, "Loading Developer Information", Toast.LENGTH_SHORT)
           .show();
    } 
    }

    public static OnClickListener getOnclicklistener() {
        return OnClickListener;
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:30:30.350

重命名你的`MapActivity`类，调用它`MyMapActivity`

然后像这样定义类，`public class MyMapActivity extends MapActivity`

+

确保您使用其中一种 Google API，以便您可以使用 Google 地图库

+

确保将此代码添加到您的`AndroidManifest.xml`（在应用程序标记下）文件中，以便使用 Google 地图

```
<uses-library android:required="true" android:name="com.google.android.maps" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:51:34.240

你在清单文件中使用了这个权限吗

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

如果没有在应用程序标签之外的清单文件中提及它

# django - 如何在带有模板的文件中运行 JSLint / JSHint？

> ID：10271278
> 
> 赞同：3
> 
> 时间：2012-04-22T19:23:09.427
> 
> 标签：django, jslint, jshint

我试图在工作中引入一些工具来提高代码质量。我在以前的公司使用的一个明显的解决方案是`jslint`在签入代码之前运行。

问题是我们正在使用 Django 来做我们的模板（不过，我假设我们在使用其他模板语言时也会遇到类似的问题）。

如何获取如下代码，并在忽略模板标签的同时正确使用 JSLint/JSHint？

```
var a = { "test" : "test"};
{% comment %}
{% endcomment %}
{{ my_variable }}
window.x = "y"; 
```

我已经看到[这个问题专门关于 JSHint](https://stackoverflow.com/questions/9877050/how-to-run-jshint-on-files-with-django-template-markup-in-them)，看起来它可以处理某些情况，但它没有解决内联变量，就像`{{ my_variable }}`上面一样。

有没有办法使用 JSHint/JSLint 忽略某些行，或者让 linting 正确执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:24:42.110

就像使用这些工具对咖啡脚本进行 linting 一样，您正在尝试在其 pervue 之外对内容进行 lint。使用虚拟值和 JSHint 生成的文件可能最容易运行模板。

可能与如何在带有 Django 模板标记的文件上运行 JSHint 重复[？](https://stackoverflow.com/questions/9877050/how-to-run-jshint-on-files-with-django-template-markup-in-them)

# php - Apache 重定向工作不正常

> ID：10271279
> 
> 赞同：0
> 
> 时间：2012-04-22T19:23:15.733
> 
> 标签：php, apache, mod-rewrite, redirect

我正在为我的婚礼网站设置重定向，以便`http://www.mydomain.com/rsvp.php/q/something`重定向到`http://www.mydomain.com/rsvp.php?q=something`，但仅在服务器端（也就是说，客户端仍然可以`rsvp.php/q/something`在其地址栏中看到）。

现在，我的 apache 配置中有以下内容：

```
<VirtualHost *>
        ServerAdmin my@email.com
        ServerName www.mydomain.com
        DocumentRoot /var/www/www.mydomain.com
        Options -Indexes +FollowSymLinks
        RewriteEngine on
        RewriteRule ^/rsvp.php/q/(.*) /rsvp.php?q=$1
</VirtualHost> 
```

现在，我还在 PHP 文件的顶部有一个元重定向（如果用户在 q 查询变量中没有任何内容），它重定向到 index.html：

```
<?php
  $userHash = $_GET['q'];
?>

<!doctype html>
<html>
        <head>
                <title>Wedding - RSVP Page</title>
<?php

        // If we don't have a user hash, then let's redirect to the main
        // page.
        if (!$userHash) {
          echo '<meta http-equiv="refresh" content="0; url=http://www.mydomain.com/">';
        }
?> 
```

同样，这似乎工作正常，但有一个例外。我正在使用一个表格让用户输入他们的 RSVP 数据。在提交时，它会调用一个脚本`submit-form.php`. 当访问地址[http://www.mydomain.com/getID.php](http://www.mydomain.com/getID.php)时，它会重定向到index.html，这不是我想要的。

如果我删除`RewriteRule`，它会按预期工作，除了我没有得到一个好的 url（我必须使用`q=something`而不是`q/something`）。我不太擅长 mod_rewrite，所以我想知道是否有人可以给我一些帮助，让我知道我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:38:31.497

您需要告诉 apache 不要重写现有文件，使用`RewriteCond`.

在您的 .htaccess 添加以下代码：

```
rewriteengine on
Options +FollowSymLinks

RewriteCond %{SCRIPT_FILENAME} !-d  #not a directory
RewriteCond %{SCRIPT_FILENAME} !-f  #not a file
RewriteRule ^rvsp/([^/\.]+)?$  rvsp.php?q=$1 
```

然后，在您的 rvsp.php 文件中，添加以下代码：

```
<?php
$q = $_GET['q'];
?> 
```

表单中的操作`getID.php`应如下所示：

```
http://www.mydomain.com/rvsp/query 
```

`query`用户输入在哪里

# javascript - 理解定义为函数与未定义为函数的 JS 对象

> ID：10271280
> 
> 赞同：4
> 
> 时间：2012-04-22T19:23:20.817
> 
> 标签：javascript, object

相对 JS 新手在这里试图了解定义 JS 对象的两种方式之间的区别......

在某些情况下，我看到了一些我称之为“命名空间”对象或“处理程序”的示例，它们可能看起来像这样：

```
var example = {
  message: null,
  setup: function( message ) {
    example.message = message;
    alert( message );
  }
} 
```

我可能会使用这样的东西来分组一些相关的功能。如果我打电话，`example('foo!')`我希望会`foo!`出现一条警报消息，如果我打电话，`example.message`我希望它会返回`foo!`。

*我的第一个问题是：这种对象（未定义为函数）叫什么？*

我在我的网站中经常使用这样的对象，作为处理程序来设置一堆用于 ajax 交互的绑定等。我一直在尝试学习面向对象的 javascript，并且一直在做一些阅读[（](https://developer.mozilla.org/en/Introduction_to_Object-Oriented_JavaScript)[1、2](https://developer.mozilla.org/en/JavaScript/A_re-introduction_to_JavaScript)）。在 Mozilla 文档中，建议将对象定义为函数，所以更像这样：

```
var example = function( message ) {
    ....
} 
```

*我的第二个问题是：这种对象（定义为函数）叫什么？*

我不太了解两者之间的区别，所以我遇到了很多问题，这就提出了问题 3：

*如果你将一个对象定义为一个函数，如果你不一定希望它们在实例化时执行，你如何定义对象的属性？*

IE。如果我这样做：

```
var example = function( message ) {
    alert('message');
} 
```

然后我知道这`example('foo!')`会触发警报`foo!`。但是，如何在对象上定义其他属性或方法以供以后访问和/或调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T19:34:43.927

> 我的第一个问题是：这种对象（未定义为函数）叫什么？

这被称为*[对象文字表示法](http://www.fotiweb.com/2006/12/13/javascript-object-literal-notation/)。*

> 我的第二个问题是：这种对象（定义为函数）叫什么？

这就是*[函数表达式](https://developer.mozilla.org/en/JavaScript/Reference/Operators/function)*。

**更多阅读：**

*   [命名函数表达式揭秘](http://kangax.github.com/nfe/)
*   [函数声明与函数表达式](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)

> 如果你将一个对象定义为一个函数，如果你不一定希望它们在实例化时执行，你如何定义对象的属性？

您可以使用`this`关键字来添加属性或使用`prototype`如下属性：

```
var example = function( message ) {
    alert('message');
    this.hello = function(){
        alert('hello'); 
    }
} 
```

或者

```
var example = function( message ) {
    alert('message');
}

example.prototype.hello = function(){ 
   alert('hello');
}

var e = new example('hello');
e.hello(); 
```

使用时`this`，需要使用`new`关键字来实例化对象。

* * *

**对 OOP 感兴趣的读物：**

*   [面向对象 JavaScript 简介](https://developer.mozilla.org/en/Introduction_to_Object-Oriented_JavaScript)
*   [面向对象的 JavaScript：创建可扩展、可重用的高质量 JavaScript 应用程序和库](https://rads.stackoverflow.com/amzn/click/com/1847194141)，作者 Stoyan Stefanov

# ruby - 为什么 "101is5".to_i 在 Ruby 中返回 101？

> ID：10271288
> 
> 赞同：-1
> 
> 时间：2012-04-22T19:23:52.833
> 
> 标签：ruby, casting, integer

我打开了我喜欢的 irb 控制台（Ruby 1.9.3），然后输入：

```
"101is5".to_i 
```

我得到：

```
101 
```

我假设这是预期的行为，但我看不出这样做有什么好处？为什么我们想要一个包含数字和字符的字符串成功地进行整数转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T19:28:07.507

如果您想获得错误，请`Integer("101is5")`改用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:56:39.073

这种行为的一个令人愉快的效果是，您不必从作为数字列表的字符串或文件中剔除 EOL。

# ruby-on-rails - MongoDB 可以自动为地理位置数据生成特殊索引吗？

> ID：10271290
> 
> 赞同：1
> 
> 时间：2012-04-22T19:23:54.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, geolocation, mongoid

我目前在 Ruby on Rails 应用程序中有一个 Mongoid 模型，如下所示：

```
class Listen
    include Mongoid::Document
    field :song_title, type: String
    field :song_artist, type: String
    field :loc, :type => Array
    field :listened_at, type: Time, default: -> { Time.now }

    index(
        [[:loc, Mongo::GEO2D]], background: true
    )
end 
```

例如，当我尝试查询集合时

```
listens = Listen.where(:loc => {"$within" => {"$centerSphere" => [location, (radius.fdiv(6371))]}}) 
```

我返回错误（位置已被清除，X 未返回）

```
Mongo::OperationFailure (can't find special index: 2d for: { loc: { $within: { $centerSphere: [ [ XX.XXXXXXX, X.XXXXXXX ], 0.0001569612305760477 ] } } }): 
```

我知道我可以通过 rake 任务创建索引，`rake db:mongoid:create_indexes`但我不想每次创建模型时都必须这样做。模型有什么方法可以在插入集合时自动创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:43:40.470

不，没有办法。

您必须创建一次索引（不仅仅是 Geo），才能使用它。

# c# - 所有 LINQ 查询表达式关键字的列表？

> ID：10271293
> 
> 赞同：5
> 
> 时间：2012-04-22T19:24:18.627
> 
> 标签：c#, .net, linq

所以我最近一直在用 LINQ 做事，我一直在网上寻找所有集成 LINQ 关键字的完整列表，但我找不到任何东西。

这些是我知道的一些：

```
from in 
let 
group by into
orderby
where
select 
```

还有其他我不知道的吗？我在哪里可以找到集成 LINQ 的所有功能的完整列表？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T19:26:05.090

您需要区分[*标准 LINQ 查询运算符*](http://msdn.microsoft.com/en-us/library/bb397896.aspx)和 C# 中由[*查询表达式*](http://msdn.microsoft.com/en-us/library/bb397676.aspx)支持的运算符。前者比后者多得多——VB 直接在语言中支持其中一些。

有关所有不同运算符的详细信息，以及哪些查询表达式部分绑定到它们，您可能需要阅读我的[Edulinq 博客文章系列](http://codeblog.jonskeet.uk/category/edulinq/)。这是出于教育目的重新实现 LINQ to Objects，查看每个运算符的行为方式等。[第 41 部分](http://codeblog.jonskeet.uk/2011/01/28/reimplementing-linq-to-objects-part-41-how-query-expressions-work/)明确介绍了查询表达式，包括底部的备忘单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:28:02.313

[您可以在此处](http://goo.gl/n9flt)阅读官方 MSDN 文档。另一个很好的参考可以在[odetocode](http://goo.gl/01UX1)上找到。

**编辑：**

我只是想澄清一下，您要查找的是 LINQ 的 C# 关键字，而不是运算符。

# java - 是否可以将 JFrame 添加到 java 中的 JPanel？

> ID：10271296
> 
> 赞同：0
> 
> 时间：2012-04-22T19:24:52.047
> 
> 标签：java, jframe, jpanel

我一直在研究一系列 JPanel，我想将另一个类的 JFrame 添加到我的一个面板中。这可以做到吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:25:54.000

不，您不能将任何内容添加`Window`到另一个组件，这样做会导致`RuntimeException`. 您可以做的是将[`contentPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#getContentPane%28%29)from添加`JFrame`到您的`JPanel`.

# sql-server - 使用同一行中的另一个列值更新 SQL Server 2005 中的 XML 节点（在 XML 列中）

> ID：10271297
> 
> 赞同：2
> 
> 时间：2012-04-22T19:24:59.443
> 
> 标签：sql-server, xml, tsql

我有一个带有`XML`列 ( `XMLColumn`) 和`VARCHAR`列 ( `ABCColumn`) 的临时表。

我正在尝试用同一行`XMLColumn`中的值替换特定 XML 节点的值。`ABCColumn`我需要对临时表中的每一行执行此操作。如果没有一个游标来保存每次提取的替换值，这是否可行？

我尝试使用更新临时表

```
XmlColumn.modify('replace value of ... with ...') 
```

但在这种情况下我没有变量。我需要获取 a 的值`XYZColumn`并将其用作替换值。我看到的每个示例都使用变量或硬编码值 - 而不是同一行的列值。

另外，我正在使用 SQL Server 2005。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:54:39.757

**编辑：我投票支持 RBarryYoung 的答案，改用它！**

我能想到的唯一方法是游标：

```
declare cur_t cursor for (select id, val_col from YourTable)
declare @id int
declare @val int
open cur_t

fetch cur_t into @id, @val
while @@fetch_status = 0
    begin
    update  YourTable
    set     xml_col.modify(
        'replace value of (/root/val/text())[1] with sql:variable("@val")')
    where   id = @id
    fetch cur_t into @id, @val
    end  

close cur_t
deallocate cur_t 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!3/ba805/4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T20:09:16.710

像这样：

```
UPDATE  YourTable
SET     xml_col.modify(
    'replace value of (/root/val/text())[1] with sql:column("val_col")'
    ) 
```

（感谢 Andromar；我刚刚编辑了他的答案并使用了他的 SQLFiddle，（这也适用于这个。））

# java - 雅各布和无线

> ID：10271299
> 
> 赞同：2
> 
> 时间：2012-04-22T19:25:04.250
> 
> 标签：java, wmi, wifi, wireless, jacob

我`Jacob`用来找出我的无线网卡检测到的所有接入点的 MAC 地址。

根据 WMI 文档`Ndis80211BSSIList`是：`"The list of in-range BSSIDs and their properties"`. 据我所知，它返回 Class 的对象数组`MSNdis_80211_WLanBssId`，每个对象都有一些属性。

我的问题是如何访问每个实例的这些属性（每个实例都是不同的 BSSID，具有 MAC 地址或 SSID 等属性）。任何帮助都是有价值的。

```
 public class testWMIJacob {

        public static void main(String[] args) {
                String host = "localhost";  

                String connectStr = String.format("winmgmts:\\\\%s\\root\\wmi", host); 

                String query = "SELECT * FROM MSNdis_80211_BSSIList ";

                ActiveXComponent axWMI = new ActiveXComponent(connectStr);                
                Variant vCollection = axWMI.invoke("ExecQuery", new Variant(query));               

                EnumVariant enumVariant = new EnumVariant(vCollection.toDispatch());
                Dispatch item = null;                
                while (enumVariant.hasMoreElements()) {                    
                        item = enumVariant.nextElement().toDispatch();                          

                        String req = Dispatch.call(item,"Ndis80211BSSIList").toString();    
                }
        }

} 
```

# .net - 在 WPF MVVM 中绑定到没有代理对象的派生属性

> ID：10271300
> 
> 赞同：0
> 
> 时间：2012-04-22T19:25:07.463
> 
> 标签：.net, wpf, xaml, mvvm, wpfdatagrid

假设我有一个域模型，例如：

```
class User  {
    public string FirstName  { get; set; }
    public string LastName   { get; set; }
    public string MiddleName { get; set; }
    public int    Age        { get; set; }
    // tons of other stuff
} 
```

我有一个`ObservableCollection`称为`UserList`，我将其绑定到 DataGrid ，如下所示：

```
<dg:DataGrid ItemsSource="{Binding Path=UserList}" SelectedIndex="{Binding Path=Selecteduser}">
    <dg:DataGrid.Columns>
        <dg:DataGridTextColumn Header="Name" Binding="{Binding Path=FirstName, Mode=OneWay}" />
        <dg:DataGridTextColumn Header="Age" Binding="{Binding Path=Age, Mode=OneWay}" />
    </dg:DataGrid.Columns>
</dg:DataGrid> 
```

现在我决定为用户的全名添加一个网格列。我的`User`对象没有这个属性，但是如果你给我一个`User`对象，它很容易计算出来。如何在我的`User`对象上绑定到这样的派生“属性”，而无需创建代理类（也称为视图模型）`User`并重写大量代码来处理此代理、将状态从域对象复制到代理对象等？

一个相当干净和明显的解决方案将是一个扩展方法，但显然你不能绑定到它。

我只是想告诉网格：*对于这个列，给我一个用户和一些指示这是什么的键（例如“全名”），我会将数据传回给你用于该列。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:57:30.600

您当然可以通过像这样的多重绑定来创建大多数派生属性：

```
<DataGridTextColumn Header="FullName">
    <DataGridTextColumn.Binding>
        <MultiBinding StringFormat="{}{0} {1}}">
            <Binding Path="FirstName"/>
            <Binding Path="LastName"/>
        </MultiBinding>
    </DataGridTextColumn.Binding>
</DataGridTextColumn> 
```

对于更复杂的事情，您可能必须直接绑定到 User 对象并使用具有创建派生值的转换器参数的[绑定转换器：](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

```
public class UserConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        User user = (User)value;
        string result = string.Empty;

        switch ((string)parameter)
        {
            case "FullName":
                result = string.Format("{0} {1}", user.FirstName, user.LastName);
                break;
        }

        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后像这样绑定：

```
<DataGridTextColumn Header="FullName"
    Binding="{Binding Converter={StaticResource UserConverter}, ConverterParameter=FullName}"/> 
```

# javascript - JavaScript：如何从多维数组中获取值？

> ID：10271312
> 
> 赞同：7
> 
> 时间：2012-04-22T19:26:48.493
> 
> 标签：javascript, arrays, multidimensional-array

我正在尝试从多维数组中获取值。这就是我到目前为止所拥有的。
当我选择数组中的第一个选项时，我需要 99 的值和图像，例如“Billy Joel”。

```
var concertArray = [
    ["Billy Joel", "99", "equal.png"],
    ["Bryan Adams", "89", "higher.png"],
    ["Brian Adams", "25", "lower.png"]
];

function populate(){
    for(i = 0; i < concertArray.length; i++){
        var select = document.getElementById("test");
        select.options[select.options.length] = new Option(concertArray[i][0], concertArray[i][1]);
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T21:50:27.940

您可以尝试将多维数组转换为对象数组，如下所示：

```
var concertArray = [
    {name: "Billy Joel", value: 99, image: "equal.png"},
    {name: "Bryan Adams", value: 89, image: "higher.png"},
    {name: "Brian Adams", value: 25, image: "lower.png"}
]; 
```

然后你可以像普通对象一样访问数组中的项目：

```
var concertName = concertArray[0].name;
var concertPrice = parseFloat(concertArray[0].value);
var concertImage = concertArray[0].image; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T19:33:12.960

```
let concertArray = [
    ["Billy Joel", "99", "equal.png"],
    ["Bryan Adams", "89", "higher.png"],
    ["Brian Adams", "25", "lower.png"]
];

let i = 0;

console.log(concertArray[i][1]) // 99
console.log(concertArray[i][2]) // equal.png
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:36:08.947

AFAIK，`Option`构造函数只接受两个参数，文本和`value`. 如果你想传递更多的数据，我建议你使用 HTML5 数据 API：

```
var opt = new Option(concertArray[i][0], concertArray[i][1]);
opt.setAttribute('data-image', concertArray[i][2]);
select.options[select.options.length] = opt; 
```

然后你可以抓住它使用`getAttribute('data-image')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-30T07:00:30.177

您可以使用 2 个 for 循环访问值，如下所示。

```
var concertArray = [
    ["Billy Joel", "99", "equal.png"],
    ["Bryan Adams", "89", "higher.png"],
    ["Brian Adams", "25", "lower.png"]
    ];

function populate(){
    for(i=0;i<arr.length;i++)
    {
        for(j=0;j<arr[i].length;j++)
        {
             console.log(arr[i][j]);
        }
    }
} 
```

# android - 在不同的活动中更新对象变量

> ID：10271314
> 
> 赞同：0
> 
> 时间：2012-04-22T19:27:46.900
> 
> 标签：android, object

我有一个用于创建对象的自定义类，如下所示（伪代码）：

```
class PhotoObject implements Parcelable {
    String photoUrl;
    String uploaderName;
    int numberOfLikes;
    // constructor, getters, setters, parcelable methods...
} 
```

我有`ArrayList`一个`PhotoObject`对象`MainActivity`。`GridView`它们中的每一个都代表 in中的一张照片`MainActivity`。当我单击一张照片时，我会将其传递`PhotoObject`给`PhotoDetails`活动。如果我喜欢 中的照片`PhotoDetails`，`numberOfLikes`变量计数会增加一 ( `numberOfLikes++`)。这是
问题：
当我返回变量（当然）没有增加一时，它与我喜欢照片之前一样。`MainActivity``numberOfLikes`

所以我的问题是在（对象内部）中的对象中**更改此变量的最佳方法是什么**？我考虑过制作variable ，但这意味着它对于所有对象实例都是相同的，对吧？`MainActivity``ArrayList``PhotoObject``numberOfLikes``static`

我希望我足够清楚地解释了我的问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:34:05.943

您是否尝试过将喜欢的数量设为静态然后打电话

```
YOUR_CLASS_NAME.numberOfLikes++; 
```

# windows-phone-7 - WP7 将 toast 从一台设备发送到另一台设备

> ID：10271315
> 
> 赞同：0
> 
> 时间：2012-04-22T19:27:49.140
> 
> 标签：windows-phone-7, toast

只是想知道是否可以从一部 WP7 手机向另一部手机发送祝酒词。

使用示例：

用户 A 按下手机上的按钮，以提醒附近驾驶状态为“空”的其他用户需要他们在用户 A 的 GPS 位置

如果有人可以就这是否可能以及如何完成提供一些见解，那就太好了。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:12:04.630

**你能？**

不。

如果我正确理解你的问题，不，这是不可能的。

我理解您的问题是“我可以做到这一点而不必在某处的服务器上实现某些东西吗？” 不幸的是，答案是“不”。

正如@softarn 和@MrMDavidson 所暗示的那样，您需要做的是，您需要在服务器上实现一些东西。

**但为什么不呢？**

原因很简单。*如果*可以做到这一点，那么它将为滥用打开大门。想象一下，如果无需通过 Microsoft 服务器，我可以编写一些代码，不断向我的所有用户（当然是下载了我的应用程序）发送推送通知。如果我的用户使用按位收费的数据计划会怎样？好吧，我刚刚搞砸了一大群用户，他们不仅对我感到不满，而且对他们愚蠢的手机感到不满。或者，如果微软想让所有 Windows Phone 用户选择仅每 15 分钟而不是立即获得推送通知，该怎么办？好吧，如果不作为中间人，微软将完全无法提供这样的功能。

**这是伪造它的方法**

因此，为了与 toast 通知进行交互，微软需要扮演中间人的角色，因此如果需要，他们可以代表用户拔出插件/监控/调节 toast 通知。

如果您想实现一些*模拟*这种行为的服务器代码，那当然是可能的。正如@MrMDavidson 所说，您基本上需要在应用程序架构中采取以下步骤：

1.  用户的 GPS 位置变化
2.  WP7 应用程序联系您拥有的服务器，通知它用户已移动
3.  您的服务器代码记录了这一点，将数据存储在 SQL 数据库中
4.  存储您的新位置后，服务器会扫描 SQL 数据库以查找“附近”且状态设置为“空”的应用程序的所有其他用户
5.  对于数据库中符合 (a) 在附近和 (b) 状态为空的条件的每个用户，服务器代码调用用户的“频道 uri”，发送所需的消息

**对您的用户来说，一切都一样**

这将有效地实现您的目标，并且从用户的角度来看，体验将是无缝的，并且无论出于何种意图和目的，它看起来就像他们直接从另一个用户的手机收到通知一样。

希望澄清一些事情，我确实假设您熟悉发送 Toast 通知的一般工作流程。

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:13:54.990

如果用户 A 的手机知道用户 B 手机的推送通知 URI，那么可以，您可以从一部手机向另一部手机发送通知。然而问题变成了；您如何将用户 B 的通知 URI 分发到用户 A 的电话？您要么需要一个“离线”机制（例如电子邮件），要么需要一个服务器来充当中央存储库。您可能最好在推送通知的顶部设置一个服务层来管理用户与用户的关系。然后用户 A 的电话可以说“告诉我的朋友他们需要他们！”。这可以是对您的服务器的异步触发和忘记调用。然后，您的服务器可以实现重试和并行执行，以通知所有用户 A 的朋友该位置需要他们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T21:03:20.740

是的，当然这是可能的。继续阅读推送通知的工作原理，尽管我认为它不会像您想象的那么容易。您将需要（我认为）电话通过该服务器进行通信。

# python - python，创建向量的优雅方式

> ID：10271316
> 
> 赞同：0
> 
> 时间：2012-04-22T19:27:51.940
> 
> 标签：python

什么是创建维度为 N 的所有向量集的优雅方法，每个元素都是介于 0 和 K 之间的整数（[0，K]）。

我当前的代码是：

```
def nodes_init(n, k):
    nodes = {}
    e = np.identity(n)
    nodes[tuple(np.zeros(n))] = 0
    s = Set()
    s.add(tuple(np.zeros(n)))
    s_used = Set()
    while len(s) != 0:
        node = s.pop()
        if node in s_used:
            continue
        s_used.add(node)
        for i in xrange(len(e)):
            temp = node + e[i]
            temp = cap(temp, k)
            temp = tuple(temp)
            nodes[temp] = 0
            if not temp in s_used:
                s.add(temp)
    return nodes

def cap(t, k):
    for i in xrange(len(t)):
        if t[i] > k:
            t[i] = k
    return t 
```

我不喜欢它。字典的键`nodes`是所需的向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:37:24.117

使用[迭代工具](http://docs.python.org/library/itertools.html)

```
from itertools import product

def nodes_iter(n, k):
    """ returns generator (lazy iterator) rather than creating whole list """
    return product(range(k+1),repeat=n) 
```

示例用法：

```
for node in nodes_iter(3,1):
    print node

(0, 0, 0)
(0, 0, 1)
(0, 1, 0)
(0, 1, 1)
(1, 0, 0)
(1, 0, 1)
(1, 1, 0)
(1, 1, 1) 
```

# c++ - C++ 多分配 Python 功能

> ID：10271317
> 
> 赞同：1
> 
> 时间：2012-04-22T19:27:58.957
> 
> 标签：c++, syntax

我正在努力学习 C++。在进行实验时，我输入了以下代码，并不期望它能够工作，但希望它会：

```
int one = 1, two = 2;
one, two = two, one;

cout << "one = " << one << "\n";
cout << "two = " << two << "\n"; 
```

编译器没有抱怨这一事实让我感到鼓舞，因为这是我喜欢 python 的主要特性之一，而我所学过的大多数编程语言都不匹配——在分配之前评估多个表达式的能力结果不使用临时变量。但是，当我运行它时，我发现这段代码似乎无效。

在玩了一会儿之后，我发现`two`实际上正在设置变量 - 所以，如果我运行这段代码：

```
one, two = 3, 4; 
```

`two`将等于 3，但`one`将保持不变。所以我的问题是，编译器在这个语句中到底在做什么？我这辈子都想不通。

谢谢，布兰登

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T19:33:03.477

C++ 不支持多赋值 python 样式，逗号运算符不符合您的意图：[http ://en.wikipedia.org/wiki/Comma_o​​perator](http://en.wikipedia.org/wiki/Comma_operator)

如果您为两者分配相同的值`one`，`two`那么您可以这样做

```
one = two = 3; 
```

但在你的情况下，你不是，所以它们必须在不同的行上：

```
one = 3;
two = 4; 
```

如果要交换值，则必须使用临时的第三个变量：

```
int temp = one;
one = two;
two = temp; 
```

如果我们考虑以下几点：

```
one, two = 3, 4; 
```

简单的情况是`3 ,4;`这里 4 将被丢弃，所以只剩下 3 个，然后你有

```
one, two = 3; 
```

现在你有了赋值运算符`=`，它比运算符具有更高的优先级，`,`所以不管发生什么情况，`one, two`首先`two = 3;`评估`one, two`结果是：

```
two = 3; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T19:46:45.753

在 C++11 中有[`std::tie`](http://en.cppreference.com/w/cpp/utility/tuple/tie).

例子：

```
#include <tuple>
#include <iostream>

int main()
{
    int a, b;
    std::tie(a, b) = std::make_tuple(1, 2);
    std::cout << a << ", " << b;
} 
```

输出：`1, 2`。`std::tie()`创建引用元组 - 并`std::tuple`具有`operator=()`.

我知道它与 Python 中使用的语法不同，但它在功能上是相同的，您可能想要使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-22T19:39:24.647

首先，`=`运算符的优先级高于`,`因此下面的两行是等效的：

```
(one), (two = 3), (4);
one, two = 3, 4; 
```

其次，逗号操作符是对多条语句进行分组的一种方式，但只表示最后一条的值，所以：

```
int a, b;
a = (b = 5, b*b);
cout << a << '\n'; 
```

将打印 25。希望能够启发您了解编译器在做什么。

# html - 从外部 html 文件执行链接

> ID：10271321
> 
> 赞同：0
> 
> 时间：2012-04-22T19:28:24.467
> 
> 标签：html, filter, hyperlink

我有 2 个 html 文件：

*   索引.html
*   投资组合.html

在portfolio.html 中，我的作品分为4 类：网络、3d、代码和视频。此外，我还包含了一个过滤器脚本，它仅显示所选类别的工作并且它正在工作。

在 index.html 中，我需要有指向我的投资组合每个类别的链接，但我不知道该怎么做。

以下是代码：

索引.html：

```
...
<a href="portfolio.html#web"><img src="img/web.png"></a>
<a href="portfolio.html#triD"><img src="img/triD.png"></a>
<a href="portfolio.html#codes"><img src="img/codes.png"></a>
<a href="portfolio.html#video"><img src="img/video.png"></a>
... 
```

投资组合.html：

```
...
<!-- filter goes here: -->
<p id="picker">
    <a href="#" id="all" class="current" name="all">All</a> | 
    <a href="#" id="web" class="filter" name="web">Web</a> | 
    <a href="#" id="triD" class="filter" name="triD">3D</a> | 
    <a href="#" id="codes" class="filter" name="codes">Codes</a> | 
    <a href="#" id="video" class="filter" name="video">Video</a>
</p>

<!-- my work goes here: -->
<div class="my-work codes">...</div>
<div class="my-work web">...</div>
<div class="my-work triD">...</div>
<div class="my-work codes">...</div>
... 
```

过滤器.js：

```
$(function()
{   
   $("#all").click(function(){
       $(".my-work").slideDown();
       $("#catpicker a").removeClass("current");
       $(this).addClass("current");
       return false;
   });

   $(".filter").click(function(){
        var thisFilter = $(this).attr("id");
        $(".my-work").slideUp();
        $("."+ thisFilter).slideDown();
        $("#catpicker a").removeClass("current");
        $(this).addClass("current");
        return false;
   });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:04:28.350

其实我已经找到了我的问题的正确答案。在portfolio.html中，在header中的所有脚本之后，应该添加以下脚本：

```
$(document).ready(function()
{
    var type = window.location.hash;
    //window.location.hash = window.location.hash.replace(type,''); //should be added if you want to remove: ...#class in address bar
    $(type).trigger('click');
}); 
```

# bash - 从终端查询最新版本的 CUDA SDK/工具包？

> ID：10271327
> 
> 赞同：0
> 
> 时间：2012-04-22T19:28:57.867
> 
> 标签：bash, cuda, installation, expect

有没有办法——从终端——查询最新的工具包/SDK版本？？？

例如，NVIDIA 是否有某种服务器可以登录并发出离散命令以获取最新的 SDK 和工具包？

..................................................... ................................
**背景：**

我编写了一个小脚本来执行核心 CUDA 组件（开发驱动程序、工具包和 SDK）的无人值守安装。

请注意，驱动程序已经自动更新，因为我向他们传递了一个标志，告诉他们检查最新版本，所以我只需要下载一次，所有未来对 CUDA 安装的更新现在都可以工作

有一些初始错误，但在一些帮助下解决了。[[1]](https://superuser.com/questions/412259/expect-script-inside-bash-script-optional-statement) [[2]](https://stackoverflow.com/questions/10150939/formatting-expect-script-inside-of-user-command-in-bash-script)。

如果服务器正在运行，则将其`init`关闭`X11`，以完成视频开发驱动程序的安装。如果它不存在`yum`，则要安装。`expect`

```
#!/bin/bash 
CR="\r"
YES="\"Yes\r\""
INSTALL_PATH_REQUEST="\"Enter install path\""
CUDA_PATH_REQUEST="\"Enter CUDA install path\""
UNINSTALL_REQUEST="\"Would you like to uninstall?\""
TOOLKIT=`ls -t cudatoolkit* | head -n 1`
TOOLKIT_EXPECT="sh $TOOLKIT"
SDK=`ls -t gpucomputingsdk* | head -n 1`
SDK_INSTALL_PATH="\"/usr/local/CUDA_SDK\r\""
SDK_EXPECT="sh $SDK"
DUMMY="dummy"
/bin/su root -c "yum -q -y install expect expectk;
/sbin/init 3; sh `ls -t NVIDIA*|head -n 1` -s --update -a -X;
/usr/bin/expect <<EOF;
spawn $TOOLKIT_EXPECT
expect -timeout 300 $INSTALL_PATH_REQUEST
send $CR
expect -timeout 300 {
 {Would you like to uninstall?} {
  send $YES

  exp_continue
 }
 expect -timeout 500 $DUMMY
 eof
}
EOF
/usr/bin/expect <<EOF;
spawn $SDK_EXPECT
expect -timeout 300 $INSTALL_PATH_REQUEST
send $SDK_INSTALL_PATH
expect -timeout 300 $CUDA_PATH_REQUEST
send $CR
expect -timeout 500 $DUMMY
EOF
/sbin/init 5" 
```

如果有人能弄清楚如何远程查询 SDK 和工具包以获取更新，这将是（几乎）完美的无人值守安装程序。如果您认为我遗漏了什么，任何其他建议也将不胜感激。

PS 您需要同一目录中的开发驱动程序、工具包和 SDK 文件才能正常工作。当它要求您输入密码时，即要求您输入 root 密码。我选择安装 SDK`/usr/local/CUDA_SDK/`以允许所有用户访问。如果您希望将其安装在其他位置，请在脚本中进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:56:37.243

我不相信 NVIDIA 提供了一种查询最新发布版本的驱动程序、工具包、SDK 等的方法。在 windows 驱动程序上现在有一个自动更新功能，linux 驱动程序可能也有一个（不确定），但我认为我们没有办法查询当前的发布版本。

总是有针对不同平台和技术的各种驱动程序版本（例如用于 Tesla 的预发布开发人员驱动程序、用于 Windows 的 WHQL 驱动程序等）。

我认为大多数集群运营商只想升级到任何软件的稳定版本，而且每年最多只会发生几次，所以我认为人工检查（和下载）最新版本并不是什么大不了的事，然后从下载的文件自动安装。

# java - 无向图上的DFS？

> ID：10271328
> 
> 赞同：-1
> 
> 时间：2012-04-22T19:29:00.467
> 
> 标签：java, depth-first-search

我正在研究一个由在特定学校成为朋友的学生组成的无向友谊图。我想使用 dfs 获得派系（图中的所有连接子图）。但由于某种原因，我的 dfs 无法正常工作。对算法或代码的任何建议表示赞赏

这是手动创建的示例图..

```
import java.util.LinkedHashMap;

public class DFS {

    /**
     * @param args
     */

    class Node {

        String personName, schoolName;
        Node next;

        public Node(String personName, String schoolName, Node next) {

            this.personName = personName;
            this.schoolName = schoolName;
            this.next = next;
        }

        public String toString() {

            return this.personName + " " + this.schoolName;

        }

    }

    public Node[] build() {

        Node[] graph = new Node[6];

        for (int i = 0; i < graph.length; i++) {

            Node temp = new Node(Integer.toString(i + 1), "MIT", null);
            graph[i] = temp;

        }

        graph[0].next = new Node("2", "MIT", null);

        graph[1].next = new Node("1", "MIT", null);
        graph[1].next.next = new Node("3", "MIT", null);
        graph[1].next.next.next = new Node("4", "MIT", null);

        graph[2].next = new Node("2", "MIT", null);
        graph[2].next.next = new Node("4", "MIT", null);

        graph[3].next = new Node("3", "MIT", null);
        graph[3].next.next = new Node("2", "MIT", null);    

        graph[4].next = new Node("6", "MIT", null);
        graph[5].next = new Node("5", "MIT", null);

        printGraph(graph);

        return graph;

    }

    public void dfsDriver() {

        Node[] graph = build();

        LinkedHashMap<String, Integer> names = new LinkedHashMap<String, Integer>();

        int count = 0;

        for (int i = 0; i < graph.length; i++) {

            if (graph[i] != null) {

                names.put(graph[i].personName, count);

                count++;
            }               
        }

        boolean[] visited = new boolean[graph.length];

        for (int v = 0; v < visited.length; v++) {

            visited[v] = false;
        }

        for (int i = 0; i < graph.length; i++) {

            if (graph[i] != null) {

                if (!visited[i]) {

                        System.out.println("Starting at " + graph[i].personName);

                        dfs(i, visited, names, graph);                      
                }               
            }               
        }

    }

    private void dfs(int i, boolean[] visited, LinkedHashMap<String, Integer> names, Node[] subGraph) {

        visited[i] = true;

        for (Node e = subGraph[i].next; e != null; e = e.next) {

            System.out.println("visiting " + e.personName);

            int index = names.get(e.personName);

            if (!visited[index]) {

                dfs(index, visited, names, subGraph);

            }           
        }

    }   

    public void printGraph(Node[] list) {

        System.out.println();

        for (int i = 0; i < list.length; i++) {

            if (list[i] != null) {

                System.out.print(list[i]);

                for (Node a = list[i].next; a != null; a = a.next) {

                    System.out.print(" " + a);

                }

                System.out.println();
            }
        }
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        DFS a = new DFS();

        a.dfsDriver();

    }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T20:08:31.780

**#1 : The graph creation is inefficient.** See this method in your code:

```
public Node[] build() { 
```

There are 6 nodes that you wanted and look how many times are you calling "`new Node`". Its 6 + 10 times..Try to modify your data structures so that they suit to the inputs. The current DS is :

```
class Node {
    String personName, schoolName;
    Node next; 
```

Think about modifying this so that each node can "point" to multiple other nodes without creating new object for its frends every time.

**#2 Confusing print statement in dfs method()**

It should be like this:

```
private void dfs(int i, boolean[] visited, 
                 LinkedHashMap<String, Integer> names, Node[] subGraph) {
    visited[i] = true;
    for (Node e = subGraph[i].next; e != null; e = e.next) {
        int index = names.get(e.personName);
        if (!visited[index]) {
            System.out.println("visiting " + e.personName);
            dfs(index, visited, names, subGraph);
        }           
    }
} 
```

**#3: There is no mechanism to store the end results**

You want all connected subgraphs from the main graph. However I dont see any provision to store/ mark the graph. You can modify the 2nd `for loop` inside `public void dfsDriver()` method so that it will create a new graph from the NEW nodes visited after each iteration.

# ruby-on-rails - 我可以为现有的 Nginx 添加乘客支持而不是重建一个吗？

> ID：10271332
> 
> 赞同：3
> 
> 时间：2012-04-22T19:29:49.490
> 
> 标签：ruby-on-rails, nginx, passenger

我有一个运行 nginx 的服务器，服务于两个 php 网站，现在我想让它服务于一个 rails 应用程序，我已经用谷歌搜索了，但是没有关于向现有 nginx 添加乘客支持的注释，所有这些都告诉我运行乘客-install-nginx-module 构建一个 nginx。

我可以为我的 nginx 添加乘客支持而不是重建它吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-14T21:20:34.350

您仍然需要重建 nginx。如果你运行passenger-install-nginx-module，你会看到这个输出：

> Nginx 不像其他一些 Web 服务器那样支持可加载模块，因此为了安装 Nginx 并支持Passenger，必须重新编译它。

有关步骤，请参阅[将 Passenger 作为普通 Nginx 模块安装](https://www.phusionpassenger.com/library/install/nginx/install_as_nginx_module.html)。

```
cd /path-to-nginx-source-dir
./configure --prefix=/opt/nginx \
  --add-module=$(passenger-config --nginx-addon-dir) \
  --add-module=/path-to-some-nginx-module
make
sudo make install 
```

/path-to-passenger-module 的值可以通过以下命令获取：

```
passenger-config --nginx-addon-dir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-15T18:10:05.057

如果您使用 Phusion Passenger Standalone，则无需重新构建 nginx。

从[乘客的维基](https://github.com/phusion/passenger/wiki/Why-can%27t-Phusion-Passenger-extend-my-existing-Nginx%3F#but-i-dont-want-to-recompile-nginx-are-there-alternatives)：

> **“但我不想重新编译Nginx。有替代方案吗？”**
> 
> 是的。使用 Phusion 乘客的独立模式。Phusion Passenger Standalone 是一个独立的服务器。它不扩展 Nginx，因此不需要重新编译 Nginx。因此，它将与您现有的 Nginx 安装完美配合。
> 
> 使用Passenger Standalone 时，您应该：
> 
> ```
> Start Passenger Standalone on a certain port or socket file.
> Add reverse proxy rules to your Nginx configuration file, to forward requests to Passenger Standalone. 
> ```
> 
> 如果您曾经使用过 Unicorn 和 Puma，那么使用 Passenger Standalone 将会非常熟悉：用法几乎相同。

# python - 在python中重新定位子列表的最快方法

> ID：10271334
> 
> 赞同：9
> 
> 时间：2012-04-22T19:30:05.473
> 
> 标签：python, list

从 Python 列表中重新定位子列表的最快方法是什么？

假设我们有一个列表`L = [a,b,c,d,e,f,g,h]`，现在我想把`[c,d,e]`它放在`g`列表后面。我怎样才能*快速*做到这一点？

编辑：换句话说，我想编写一个函数：

1.  *从 L 中提取长度为n*的子列表 L_sub ，留下 L_temp
2.  将给定位置*i*处的 L_sub 的项目插入 L_temp

我猜的主要问题是如何尽快将列表插入列表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T21:41:26.630

我认为 OP 想要就地执行此操作。

使操作快速的关键是尽量减少列表的创建和列表的缩短/延长。这意味着我们必须努力始终对列表索引进行 1:1 分配，因此 no`L[i:i] = L[a:b]`和 no `L[a:b] = []`。将循环与`insert`and一起使用`pop`更糟糕，因为这样会多次缩短和延长列表。串联列表也很糟糕，因为您首先必须为每个部分创建一个列表，然后创建越来越大的串联列表，每个`+`. 由于您想“就地”执行此操作，因此您必须`L[:]`最后将生成的列表分配给。

```
 # items:   0 | 1   2   3 | 4   5   6   7 | 8   9
    #            a   span1   b     span2     c
    # pos:       1           4               8

    # Result:
    #          0 | 4   5   6   7 | 1   2   3 | 8   9
    #            a     span2         span2   c 
```

我们先做一个观察。如果`a = start`, `b = end = start + length`, 和`c`是插入位置，那么我们希望做的操作是在`|`标记处剪切并交换`span1`和`span2`。但是如果`b = start`and是插入位置，那么我们`c = end`也*想*交换and 。所以在我们的函数中，我们只处理两个必须交换的连续段。`a`*`span1``span2`*

 *我们不能完全避免创建新列表，因为我们需要在移动内容时存储重叠的值。但是，我们*可以*通过选择将两个跨度中的哪一个存储到临时列表中来使列表尽可能短。

```
def inplace_shift(L, start, length, pos):
    if pos > start + length:
        (a, b, c) = (start, start + length, pos)
    elif pos < start:
        (a, b, c) = (pos, start, start + length)
    else:
        raise ValueError("Cannot shift a subsequence to inside itself")
    if not (0 <= a < b < c <= len(L)):
        msg = "Index check 0 <= {0} < {1} < {2} <= {3} failed."
        raise ValueError(msg.format(a, b, c, len(L)))

    span1, span2 = (b - a, c - b)
    if span1 < span2:
        tmp = L[a:b]
        L[a:a + span2] = L[b:c]
        L[c - span1:c] = tmp
    else:
        tmp = L[b:c]
        L[a + span2:c] = L[a:b]
        L[a:a + span2] = tmp 
```

Kos 似乎在他的时间安排上犯了一个错误，所以我在更正参数（`end`从`start`和计算`length`）后用他的代码重新编写了它们，这些是从最慢到最快的结果。

```
Nick Craig-Wood: 100 loops, best of 3: 8.58 msec per loop 
vivek: 100 loops, best of 3: 4.36 msec per loop
PaulP.R.O. (deleted?): 1000 loops, best of 3: 838 usec per loop
unbeli: 1000 loops, best of 3: 264 usec per loop
lazyr: 10000 loops, best of 3: 44.6 usec per loop 
```

我没有测试任何其他方法产生正确的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T20:10:45.490

我会用 python 子字符串来做

```
def subshift(L, start, end, insert_at):
    temp = L[start:end]
    L = L[:start] + L[end:]
    return L[:insert_at] + temp + L[insert_at:]

print subshift(['a','b','c','d','e','f','g','h'], 2, 5, 4) 
```

`start`并`end`指要剪切的子字符串的位置（结束在通常的python样式中是非排他的。 指在剪切*后*`insert_at`重新插入子字符串的位置。

 *如果子字符串的长度超过一个或两个字符，我认为这将比任何包含迭代的解决方案更快，因为经过优化的 C 代码正在完成繁重的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T20:39:07.037

让我们检查一下到目前为止我们得到了什么：

代码

```
def subshift(L, start, end, insert_at):
    'Nick Craig-Wood'
    temp = L[start:end]
    L = L[:start] + L[end:]
    return L[:insert_at] + temp + L[insert_at:]

# (promising but buggy, needs correction;
# see comments at unbeli's answer)
def unbeli(x, start, end, at): 
    'unbeli'
    x[at:at] = x[start:end]
    x[start:end] = []

def subshift2(L, start, length, pos):
    'PaulP.R.O.'
    temp = pos - length
    S = L[start:length+start]
    for i in range(start, temp):
        L[i] = L[i + length]
    for i in range(0,length):
        L[i + temp] = S[i]
    return L

def shift(L,start,n,i):
    'vivek'
    return L[:start]+L[start+n:i]+L[start:start+n]+L[i:] 
```

基准：

```
> args = range(100000), 3000, 2000, 60000

> timeit subshift(*args)
100 loops, best of 3: 6.43 ms per loop

  > timeit unbeli(*args)
1000000 loops, best of 3: 631 ns per loop

> timeit subshift2(*args)
100 loops, best of 3: 11 ms per loop

> timeit shift(*args)
100 loops, best of 3: 4.28 ms per loop 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T06:57:27.203

这是一个替代的就地解决方案：

```
def movesec(l,srcIndex,n,dstIndex):
    if srcIndex+n>dstIndex: raise ValueError("overlapping indexes")
    for i in range(n):
        l.insert(dstIndex+1,l.pop(srcIndex))

    return l

print range(10)
print movesec(range(10),3,2,6) 
```

输出：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]    # orginal
[0, 1, 2, 5, 6, 7, 3, 4, 8, 9]    # modified 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T20:17:41.007

```
>>> L = ['a','b','c','d','e','f','g','h']
>>> L[7:7] = L[2:5]
>>> L[2:5] = []
>>> L
['a', 'b', 'f', 'g', 'c', 'd', 'e', 'h'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T20:18:08.663

```
def shift(L,start,n,i):
    return L[:start]+L[start+n:i]+L[start:start+n]+L[i:] 
```**

# node.js - node.js eventEmitter + http.request

> ID：10271336
> 
> 赞同：6
> 
> 时间：2012-04-22T19:30:12.477
> 
> 标签：node.js, eventemitter

我做了本教程[node.js eventEmitter](http://www.mshiltonj.com/blog/2011/10/04/nodejs-eventemitter-example-with-custom-events/)，效果很好。我添加了一个使用 http.request 获取数据的方法，该方法可以工作并发出数据。

问题是监听器没有捕捉到事件！

有人可以帮忙吗？

代码 ：

```
var events = require('events');
var util = require('util');
var http = require('http');

//http request options, it query the twitter api and get the public timeline, works!
var options = {
    hostname : 'api.twitter.com',
    port : 80,
    method : 'get',
    path : '/1/statuses/public_timeline.json?count=3&include_entities=true'
}

// The Thing That Emits Event
Eventer = function(){
  events.EventEmitter.call(this);

//tutorial examples
  this.kapow = function(){
    var data = "BATMAN"
    this.emit('blamo', data);
  }

//tutorial examples
  this.bam = function(){
     this.emit("boom");
  }

//my method
  this.GetTweetList = function(){
    var tweets = "";
        var req = http.request(options, function(response){
                    var body = "";
                    response.on('data',function(data){
                        body += data;
                    });
                    response.on('end', function(){
                        tweets = JSON.parse(body);
                        this.emit("tweets", tweets);
                        util.puts('!!!!!!!!!! got some data !!!!!!!!!! \n');
                    });
                });
        req.end();
    }
 };
util.inherits(Eventer, events.EventEmitter);

// The thing that listens to, and handles, those events
Listener = function(){

//tutorial examples
this.blamoHandler =  function(data){
    console.log("** blamo event handled");
    console.log(data);
  },

//tutorial examples
  this.boomHandler = function(data){
    console.log("** boom event handled");
  }

//my listener method
  this.GetTweetListHandler = function(data){
        console.log("** tweets event handled");
        util.put(data);
        util.puts('!!!!!!!!!! got some data in listener !!!!!!!!!! \n');

    }

};

// The thing that drives the two.
//instanciating the object and liking the methodes
var eventer = new Eventer();
var listener = new Listener(eventer);
eventer.on('blamo', listener.blamoHandler);
eventer.on('boom', listener.boomHandler);
eventer.on('tweets', listener.GetTweetListHandler);

//calling the methodes
eventer.kapow();//works
eventer.bam();//works
setInterval(eventer.GetTweetList, 2000);
//eventer.GetTweetList();// still waiting but the eventer display that he got the data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:38:02.353

很难发现...

问题是`this`来自的指针`this.emit("tweets", tweets);`。您正在从传递给的匿名回调中执行此调用`response.on`，因此`this`不代表`Eventer`您创建的对象。要解决它，您需要“保存”`this`指针（一种常见做法）。

```
var tweets = "";
var self = this;
....
self.emit("tweets", tweets); 
```

# wcf - 断开/故障时是否存在 WCF 客户端事件？

> ID：10271344
> 
> 赞同：1
> 
> 时间：2012-04-22T19:31:04.037
> 
> 标签：wcf, client-server, nettcpbinding, faulted

我在 WCF 中使用 netTcpBinding，我想知道，在客户端，它何时断开连接或其通道状态何时出现故障，以便我可以重新连接服务器。

这个想法是使用通道事件创建一个保持活动状态。我知道有可能知​​道客户端使用 Channel.Faulted 事件在服务器端断开/进入故障状态。这样我就可以删除客户端在服务器上的任何订阅。但是，我无法在服务器端重新连接客户端。这正是我想做的。

# python - 在连接中轻松替换分隔符

> ID：10271345
> 
> 赞同：3
> 
> 时间：2012-04-22T19:31:10.187
> 
> 标签：python, string, delimiter, implode

我有一个这样的元组列表（字符串是填充符......我的实际代码对这些有未知值）：

```
list = [
  ('one', 'two', 'one'),
  ('one', 'two', 'one', 'two', 'one'),
  ('one', 'two', 'one', 'two', 'one', 'two', 'one'...)
] 
```

我想将所有其他字符串（在本例中为“两个”字符串）包装在`<strong> </strong>`标签中。令人沮丧的是我不能这样做，`'<strong>'.join(list)`因为其他每个人都没有/。这是我能想到的唯一方法，但标志的使用让我感到困扰......而且我似乎在谷歌机器上找不到关于这个问题的任何其他内容。

```
def addStrongs(tuple):
  flag = False
  return_string = ""
  for string in tuple:
    if flag :
      return_string += "<strong>"
    return_string += string
    if flag :
      return_string += "</strong>"
    flag = not flag
  return return_string

formatted_list = map(addStrongs, list) 
```

如果这是错误的，我深表歉意，我还是 python 新手。有一个更好的方法吗？我觉得这在其他领域也很有用，比如添加左/右引号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T19:40:16.313

```
>>> tuple = ('one', 'two', 'one', 'two', 'one')
>>> ['<strong>%s</strong>' % tuple[i] if i%2 else tuple[i] for i in range(len(tuple))]
['one', '<strong>two</strong>', 'one', '<strong>two</strong>', 'one'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T19:51:45.463

```
from itertools import cycle
xs = ('one', 'two', 'one', 'two', 'one')
print [t % x for x, t in zip(xs, cycle(['<strong>%s</strong>', '%s']))] 
```

使用`cycle`你可以应用于比“其他”更复杂的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T19:47:47.553

比 unbeli 的回答稍微 Pythonic：

```
item = ('one', 'two', 'one', 'two', 'one')
['<strong>%s</strong>' % elem if i % 2 else elem for i, elem in enumerate(item)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T21:22:18.277

[@jhibberd 的回答](https://stackoverflow.com/a/10271537/989121)很好，但以防万一，这里没有导入的相同想法：

```
a = ('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i')
formats = ['%s', '<strong>%s</strong>']
print [formats[n % len(formats)] % s for n, s in enumerate(a)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T19:46:42.133

你也可以用`enumerate`。对我来说，它看起来更干净。

```
tuple = ('one', 'two', 'one', 'two', 'one')
['<strong>%s</strong>' % x if i%2 else x for i, x in enumerate(tuple)] 
```

# extjs - Ext 有很多关联存储不加载

> ID：10271348
> 
> 赞同：-1
> 
> 时间：2012-04-22T19:31:23.503
> 
> 标签：extjs

我定义了两个模型，ScoreCard 和 CaregoryWeight。记分卡有许多 CategoryWeights。

当我创建一个网格并将关联存储传递给它 (scoreCard.categoryWeights()) 时，即使从 RESTful 服务返回项目，它也不显示任何内容。

怎么了？请帮忙。

下面是我的代码：

```
Ext.define(ModelNames.CategoryWeight, {
extend : 'Ext.data.Model',
idProperty : 'id',

fields : [ {
    name : 'id',
    type : 'int'
}, {
    name : 'weight',
    type : 'float'
}, {
    name : 'category_id',
    type : 'int'
}, {
    name : 'scorecard_id',
    type : 'int'
} ],
associations : [ {
    type : 'belongsTo',
    model : ModelNames.Category,
    primaryKey : 'id',
    forgientKey : 'category_id'
}, {
    type : 'belongsTo',
    model : ModelNames.ScoreCard,
    primaryKey : 'id',
    forgientKey : 'scorecard_id'
} ]});

Ext.define(ModelNames.ScoreCard, {
extend : 'Ext.data.Model',
idProperty : 'id',

fields : [ {
    name : 'id',
    type : 'int'
}, {
    name : 'description',
    type : 'string',
    defaults : ''
}, {
    name : 'isTemplate',
    type : 'boolean',
    defaults : true
}, {
    name : 'isValid',
    type : 'boolean',
    defaults : false
} ],
associations : [ {
    type : 'hasMany',
    model : ModelNames.ScoreRecord,
    name : 'scoreRecords',
    storeConfig : {
        autoLoad : true,
        autoSync : true,
        proxy : {
            type : 'rest',
            url : '/' + CONTEXT_PATH + '/RESTFul/ScoreRecord',
            reader : {
                type : 'json',
                root : 'items'
            },
            writer : 'json'
        }
    }
}, {
    type : 'hasMany',
    model : ModelNames.CategoryWeight,
    name : 'categoryWeights',
    storeConfig : {
        autoLoad : true,
        autoSync : false,
        proxy : {
            type : 'rest',
            url : '/' + CONTEXT_PATH + '/RESTFul/CategoryWeight',
            reader : {
                type : 'json',
                root : 'items'
            },
            writer : 'json'
        }
    }
} ]}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:20:06.210

错字：foreignKey

由于答案不允许少于两个词，我会补充一点，除了发现错字之外，我不知道你的代码是否有效，为什么或为什么不有效。

# jquery - jquery验证表单并在colorbox中提交并导致colorbox

> ID：10271350
> 
> 赞同：0
> 
> 时间：2012-04-22T19:31:41.173
> 
> 标签：jquery, forms, validation, submit, colorbox

我正在使用 colorbox 从链接打开一个表单（在单独的 html 文件中），执行验证并将表单提交到 php 脚本。这一切都在工作。

我现在要做的是让 php 脚本的结果出现在颜色框中。提交的脚本如下：

```
$.post('processForm.php', $("#chngPass").serialize(), function(data) {
    $('#FormContainer').html("<div id='message'></div>");  
    $('#message').html("<h2>Thank you for request</h2>")  
        .fadeIn(1500, function() {  
            $('#message').append(data);  
        });           
}); 
```

在某一时刻，我确实收到了消息，但在颜色框关闭时出现在主页上。现在我无法在成功中展示任何东西。

我知道我需要使用“return false”来停止页面刷新，但我已经在脚本的各个部分尝试过，所以不确定应该去哪里。

谁能指出我正确的方向。

'formContainer' 是表单页面中包含表单的 div，目的是用消息替换内容

谢谢

更新：感谢您到目前为止的输入。仍然无法让验证和提交脚本工作。

我现在使用了几种方法来提交表单，最新的一种是：

```
 submitHandler: function() { 
        var url = "../2010/includes/scripts/php/memberFunctions.php"; //the form processing url
        $.ajax({
       type: "POST",
       url: url,
       data: $("#chngPass").serialize(), 
       success: function(data)
       {
       $("#chngPassWrapper").html(data); 
               }
    });

    return false; // avoid the actual submit of the form.

    } 
```

我在没有验证脚本的情况下尝试这个，它可以工作，表单提交，然后在颜色框中用提交的结果替换表单。

放回验证脚本表单再次提交但不停止表单提交刷新页面但提交的结果出现在刷新页面的左上角。

如何使用验证，使用帖子并阻止表单执行提交和刷新页面

这是将上述内容置于上下文中的完整脚本：[链接] [http://jsfiddle.net/longestdrive/fJELU/](http://jsfiddle.net/longestdrive/fJELU/)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:16:21.337

哈！解决了

我认为验证脚本正在工作，因为它似乎是独立的，但其中一条规则不正确，然后将脚本抛出（感谢萤火虫！）

equalto 规则应该是 equalTo

结果！！

# jakarta-ee - 从实体生成表 - JTA

> ID：10271358
> 
> 赞同：0
> 
> 时间：2012-04-22T19:32:35.010
> 
> 标签：jakarta-ee, jpa, glassfish

我使用 JPA 工具从`@Entity`类生成表。当设置为`RESOURCE_LOCAL`它工作得很好。但是，在我在 glassfish 服务器上设置数据源并进行`persistence.xml`相应修改后，它会停止并出现异常：

```
javax.persistence.PersistenceException: Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [jdbc/mysqltest].
Internal Exception: javax.naming.NamingException: Lookup failed for 'jdbc/mysqltest' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory,
... 
```

因此，每次我想修改表结构时，我都需要将其改回

从

```
<persistence ...>
    <persistence-unit name="Foo" transaction-type="JTA">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/footest</jta-data-source>
        <properties>
            <property name="eclipselink.target-server" value="None"/>
            <property name="eclipselink.logging.level" value="FINEST"/>
        </properties>
    </persistence-unit>
</persistence> 
```

至

```
<persistence ...>
    <persistence-unit name="Foo" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/test"/>
            <property name="javax.persistence.jdbc.user" value="root"/>
            <property name="javax.persistence.jdbc.password" value="root"/>
            <property name="eclipselink.target-server" value="None"/>
            <property name="eclipselink.logging.level" value="FINEST"/>
        </properties>
    </persistence-unit>
</persistence> 
```

有没有办法不用修改配置就可以使用表格生成工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:37:21.270

jta-data-source 名称是否有效？尝试完全限定 URL。

```
<jta-data-source>java:/jdbc/footest</jta-data-source> 
```

# matlab - OpenCV vs Matlab - 线路/走廊检测

> ID：10271359
> 
> 赞同：0
> 
> 时间：2012-04-22T19:32:35.807
> 
> 标签：matlab, opencv, line, computer-vision, detection

对于我的计算机视觉课程，我将做一个项目，我将根据走廊的图像提取关于走廊的信息。特别是，向消失点延伸的走廊线会很有趣。我的问题是我是否应该使用 Matlab、OpenCV 或其他东西来实现这一点。

我没有太多时间来做这个项目。这一事实使 Matlab 看起来是一个不错的选择，因为您通常可以在那里快速启动和运行。另一方面，我希望在课程完成后将我为这个课程项目所做的工作进一步扩展以进行研究。这使得 OpenCV 看起来更好，因为（根据我的阅读）它更有效。另一种选择可能是在项目的 Matlab 中实现它，而不是稍后将该代码移植到 OpenCV 表单中。需要注意的是，我在 C/C++ 方面有丰富的经验，但在 Matlab 和 OpenCV 方面都只有一点点经验。

目前，我倾向于从一开始就使用 OpenCV。但是，我想听听在这里比我有更多经验的人的意见。如果您想通过 OpenCV 和 Matlab 推荐一些东西，请说出来。此外，如果您对哪些软件包或工具包可能对此类项目有用有任何提示，我们将不胜感激。

有什么建议么？谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:28:55.533

使用哪个更容易编写一段代码来读取图像文件并显示它？如果你非常了解 C++，那么调试代码应该很容易。既然你说你对Matlab的经验很少，如果你在代码调试中犯了一个小错误可能需要很长时间。所以我建议将问题分解为：

1.  读取图像并显示它，这在两者中都很容易
2.  使用简单/经典方法检测边缘，这两种方法都非常容易，显示结果并目视检查是否正确完成
3.  使用稳健的线拟合方法，RANSAC 和 Hough 变换方法可能是您要使用的方法，OpenCV 使使用比您想象的更容易，Matlab 还内置了使用 Hough 变换检测线的函数，并为您提供每个段的起点/终点。但是，如果您正在寻找消失点，则不需要这些。

决定权在你，这不是一个非常困难的问题，可以在网上找到大量帮助。祝项目顺利，请告诉我们进展如何。

# asp.net-mvc - 如何使用 PayPal 添加“捐赠”按钮

> ID：10271360
> 
> 赞同：1
> 
> 时间：2012-04-22T19:32:36.053
> 
> 标签：asp.net-mvc, payment, paypal

我想添加一些`donate with paypal`

到我的网站。

我该如何实现呢？

我添加一个`paypal`按钮，然后

我需要用我的贝宝电子邮件调用一些贝宝 API 方法，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:36:09.077

您可以使用“创建按钮”向导创建 Html 按钮（将输出带有 paypal 参数的 html 表单），而无需调用 Paypal 的 API 或 Paypal IPN。

[https://www.paypal.com/us/cgi-bin/?cmd=_donate-intro-outside](https://www.paypal.com/us/cgi-bin/?cmd=_donate-intro-outside)

仅当您想跟踪收款时才使用 Paypal API 或 IPN。例如：为支付您费用的用户提供额外服务。

# linux - 用于分析 linux 中内存分配模式的工具？

> ID：10271361
> 
> 赞同：2
> 
> 时间：2012-04-22T19:32:40.973
> 
> 标签：linux, memory-management, profiling, trace

你们知道任何好的工具来分析/可视化在 Linux 中运行的程序的内存分配模式吗？

我想知道一生中是否有任何特定的模式；就像一开始的大分配阶段，然后是一些维护和最后的大免费。同样很高兴知道，如果程序分配/释放许多相同大小的“对象”......比如树节点或其他东西。

# pdf - 让我的applescript处理当前目录中的指定文件？

> ID：10271369
> 
> 赞同：1
> 
> 时间：2012-04-22T19:33:21.693
> 
> 标签：pdf, ms-word, applescript

我需要定期从 word 文件生成 PDF，而且我已经厌倦了手工操作。

手动，我所做的只是打开一个文件，然后单击“另存为 PDF”。因此，有人会认为 applescript 是一种非常简单的方法。[如果您有除 applescript 之外的其他方法，我愿意接受。]

我快到了，以下脚本有效，除了完整路径是硬编码的。

```
 tell application "Microsoft Word"
    open file "Macintosh HD:Users:me:repos:training:class:Activities:ActivityGuide.docx"
    set doc to document "ActivityGuide.docx"
    save as doc file name "Macintosh HD:Users:me:repos:training:class:Activities:ActivityGuide.pdf" file format format PDF
end tell 
```

我需要它在其他机器上为其他人工作，因此用户名和路径的其他部分可能会改变。如果我可以从脚本的当前目录执行此操作，我会被设置。

我发现了这个：[Applescript to launch file from current folder?](https://stackoverflow.com/questions/7003699/applescript-to-launch-file-from-current-folder)

```
tell application "Finder"
    open file "somefile.txt" of folder of (file (path to me))
end tell 
```

它适用于通过 Finder 从 Word 中的当前目录打开应用程序，但我认为如果我要使用“另存为”，我需要使用“Microsoft Word”应用程序打开它。但是，如果我将“Finder”的应用程序更改为“Microsoft Word”，则这种打开方法不起作用。

欢迎任何建议。[编辑：清晰度]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:24:32.707

试试这个

```
set x to path to me
tell application "Finder" to set tFile to (file "ActivityGuide.docx" of (container of x)) as alias

set newFile to (text 1 thru -5 of (tFile as string)) & "pdf"
tell application "Microsoft Word"
    open tFile
    tell document 1
        save as file name newFile file format format PDF
        close saving no
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T17:51:30.147

可能对您有帮助的另一件事是在 System Preferences:Keyboard:Shortcuts: App Shortcuts:All Applications

创建一个名为“另存为 PDF ...”的快捷方式，将快捷方式分配给 command+P，因为大多数应用程序是打印的快捷方式，然后只需按两次，它就会提示您将其另存为 PDF（我得到了来自 David Sparks 的提示），并且根据应用程序，它将默认为打开文件的位置。您也可以使用应用程序默认文件夹 X 进行设置。

希望这是针对其他问题的全球解决方案，但看起来您已经有了这个孤立问题的答案。

# node.js - 如何使用 Node.js 库 Winston 为日志添加时间戳？

> ID：10271373
> 
> 赞同：113
> 
> 时间：2012-04-22T19:33:58.567
> 
> 标签：node.js, logging, winston

我想在日志中添加时间戳。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-04-26T20:38:02.287

我自己也在处理同样的问题。我有两种方法可以做到这一点。

当您包含 Winston 时，它通常默认添加控制台传输。为了让时间戳在这种默认情况下工作，我需要：

1.  删除控制台传输并使用时间戳选项再次添加。
2.  创建您自己的 Logger 对象，并将时间戳选项设置为 true。

首先：

```
var winston = require('winston');
winston.remove(winston.transports.Console);
winston.add(winston.transports.Console, {'timestamp':true}); 
```

第二个更清洁的选择：

```
var winston = require('winston');
var logger = new (winston.Logger)({
    transports: [
      new (winston.transports.Console)({'timestamp':true})
    ]
}); 
```

控制台传输的其他一些选项可以在[这里](https://github.com/winstonjs/winston#console-transport "这里")找到：

*   级别：此传输应记录的消息级别（默认为“调试”）。
*   静音：布尔标志，指示是否抑制输出（默认为 false）。
*   colorize：布尔标志，指示我们是否应该对输出进行着色（默认为 false）。
*   时间戳：布尔标志，指示我们是否应该在输出前加上时间戳（默认为 false）。如果指定了函数，则将使用其返回值而不是时间戳。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2018-02-01T22:55:07.980

以上答案对我不起作用。如果您尝试使用最新版本的 Winston - 3.0.0-rc1 为日志添加时间戳，这就像魅力一样：

```
 const {transports, createLogger, format} = require('winston');

    const logger = createLogger({
        format: format.combine(
            format.timestamp(),
            format.json()
        ),
        transports: [
            new transports.Console(),
            new transports.File({filename: 'logs/error/error.log', level: 'error'}),
            new transports.File({filename: 'logs/activity/activity.log', level:'info'})
        ]
    }); 
```

我使用了'format.combine()'。由于我的所有传输都需要时间戳，因此我在 createLogger 中添加了格式化选项，而不是在每个传输中。我在控制台和文件（activity.log）上的输出如下：

```
{"message":"Connected to mongodb","level":"info","timestamp":"2018-02-01T22:35:27.758Z"}
{"message":"Connected to mongodb","level":"info","timestamp":"2018-02-01T22:35:27.758Z"} 
```

我们可以像往常一样在“format.combine()”中为这个时间戳添加格式：

```
format.timestamp({format:'MM-YY-DD'}) 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2018-04-30T11:02:18.657

我们也可以这样做

```
var winston = require('winston');
const { createLogger, format, transports } = require('winston');
var config = require('../configurations/envconfig.js');

var loggerLevel = process.env.LOGGERLEVEL ||  config.get('LOGGERLEVEL');

var logger = winston.createLogger({
  format: format.combine(
    format.timestamp({
      format: 'YYYY-MM-DD HH:mm:ss'
    }),
    format.printf(info => `${info.timestamp} ${info.level}: ${info.message}`+(info.splat!==undefined?`${info.splat}`:" "))
  ),
  transports: [
    new (winston.transports.Console)({ level: loggerLevel }),
  ]
});
module.exports = logger; 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-15T19:23:30.160

您可以使用内置的[util](http://nodejs.org/api/util.html)和[forever](https://github.com/nodejitsu/forever)来为您的 nodejs 服务器实现带时间戳的日志记录。当您启动服务器时，将日志输出添加为参数的一部分：

```
forever start -ao log/out.log server.js 
```

然后你可以在你的 server.js 中编写 util

**服务器.js**

```
var util = require('util');
util.log("something with timestamp"); 
```

对于 out.log 文件，输出将如下所示：

**输出日志**

```
15 Mar 15:09:28 - something with timestamp 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-23T11:18:56.203

虽然我不知道温斯顿，但这是一个建议。我使用[log4js](https://github.com/nomiddlename/log4js-node)进行日志记录，默认情况下我的日志如下所示

```
[2012-04-23 16:36:02.965] [INFO] Development - Node Application is running on port 8090
[2012-04-23 16:36:02.966] [FATAL] Development - Connection Terminated to  '127.0.0.1' '6379' 
```

开发是我的节点进程的环境 & [INFO|FATAL] 是日志级别

在 log4js 中可以为日志维护不同的配置文件。我有开发和生产资料。还有一些记录器类型，如滚动文件附加器、控制台附加器等。作为插件，您的日志文件将根据日志级别 [Trace、Info、Debug、Error、Fatal] 变得丰富多彩；）

~~log4js 将覆盖您的 console.log~~它现在是 0.5+ 中的可配置参数

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-08-05T22:10:56.457

我接受了 Biswadev 的回答并创建了一个字符串化的 JSON 对象。这样，如果我以后需要处理日志，它将采用结构良好的格式。

```
const winston = require('winston');
const { createLogger, format, transports } = require('winston');

const dotenv = require('dotenv');
dotenv.config();

var logger = createLogger({
    level: 'info',
    format: format.combine(
        format.timestamp({
            format: 'YYYY-MM-DD HH:mm:ss',
        }),
        format.printf((info) =>
            JSON.stringify({
                t: info.timestamp,
                l: info.level,
                m: info.message,
                s: info.splat !== undefined ? `${info.splat}` : '',
            }) + ','
        )
    ),
});

if (process.env.NODE_ENV !== 'PRODUCTION') {
    logger.add(new transports.Console({ format: winston.format.cli() }));

    // Turn these on to create logs as if it were production
    // logger.add(new transports.File({ filename: 'log/output/error.log', level: 'error' }));
    // logger.add(new transports.File({ filename: 'log/output/warn.log', level: 'warn' }));
    // logger.add(new transports.File({ filename: 'log/output/info.log', level: 'info' }));
} else {
    logger.add(new transports.File({ filename: 'log/output/error.log', level: 'error' }));
    logger.add(new transports.File({ filename: 'log/output/warn.log', level: 'warn' }));
    logger.add(new transports.File({ filename: 'log/output/info.log', level: 'info' }));
}

module.exports = {
    logger,
}; 
```

**用法：**

```
app.listen(port, () => logger.info(`app is running on port ${port}`)); 
```

**输出：**

info.log 文件：

```
{"t":"2020-08-06 08:02:05","l":"info","m":"app is running on port 3001","s":""}, 
```

安慰：

```
info:    app is running on port 3001 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-21T19:45:16.657

我们可以使用 console-stamp 将时间戳和日志级别添加到现有控制台：`require('console-stamp')(console, '[yyyy-mm-dd HH:MM:ss.l]')`

有关详细信息，请参阅[https://github.com/starak/node-console-stamp](https://github.com/starak/node-console-stamp)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-30T14:01:48.903

有时默认的时间戳格式对您来说并不方便。你可以用你的实现覆盖它。

代替

```
var winston = require('winston');
var logger = new (winston.Logger)({
transports: [
  new (winston.transports.Console)({'timestamp':true})
]
}); 
```

你可以写

```
var winston = require('winston');
var logger = new (winston.Logger)({
transports: [
  new (winston.transports.Console)({
     'timestamp': function() {
        return <write your custom formatted date here>;
     }
  })
]
}); 
```

有关详细信息，请参阅[https://github.com/winstonjs/winston#custom-log-format](https://github.com/winstonjs/winston#custom-log-format)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-08-21T16:01:58.977

另一种解决方案是将记录器包装到一个文件中，该文件导出一些函数，如 logger.info()、logger.error() 等，然后您只需传递一个额外的密钥以在每个消息日志上发送。

loggerService.js

```
const logger = winston.createLogger({ ... })

function handleLog(message, level) {
  const logData = {
    timestamp: Date.now(),
    message,
  }

  return logger[level](logData)
}

function info(message) {
  handleLog(message, 'info')
}

function error(message) {
  handleLog(message, 'error')
}

function warn(message) {
  handleLog(message, 'warn')
}

module.exports = {
  info,
  error,
  warn
} 
```

任何文件.js

```
const logger = require('./services/loggerService')

logger.info('Hello World!') 
```

你的日志.log

```
{"timestamp":"2019-08-21 06:42:27","message":"Hello World!","level":"info"} 
```

# java - 比较像java中的原始类型这样的对象

> ID：10271377
> 
> 赞同：2
> 
> 时间：2012-04-22T19:34:23.480
> 
> 标签：java, compare, comparable

考虑实现 Iterable 接口的方式让客户端使用 foreach 循环遍历类中的*某些*内容，有没有办法允许通过 <、> == 等进行对象比较？让 Comparable 接口允许这样做似乎几乎是显而易见的，但据我所知，事实并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:35:37.567

不幸的是，这是不可能的，因为 Java 不支持运算符重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:38:47.657

`a<b`翻译成是微不足道的`a.compareTo(b)<0`

但是没有运算符重载的选项

更不用说如何处理空值了

# c# - 返回集合的方法的错误处理实践

> ID：10271378
> 
> 赞同：0
> 
> 时间：2012-04-22T19:34:34.207
> 
> 标签：c#, exception, exception-handling

如果我试图从集合中获取一个元素（并且值必须存在），那么最好的做法是什么？返回空？

此外，如果我试图从集合中获取一个元素但该值不存在（并且并不严格必须存在，即它不是致命的），那么最好的做法是什么？

最后，如果从方法返回的集合是空的，我猜如果它是致命的，最好的 aciton 方法是抛出异常，否则不会。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:15:15.103

提供一对方法通常是有帮助的，其中一个将保证它将返回一个项目或抛出，另一个保证它可能会或可能不会返回一个项目，但只有在集合有以某种方式损坏（超出所请求的项目不存在）。有些人不喜欢使用参数来指示在未找到项目时是否应该抛出该方法的概念。虽然使用参数不应该是指示需要哪种函数变体的主要方式，但在尝试避免重复代码时，使用此类参数进行重载可能很有用。

# c# - Web Service文件传输，如何添加重试？

> ID：10271383
> 
> 赞同：1
> 
> 时间：2012-04-22T19:35:03.597
> 
> 标签：c#, asp.net, web-services

我有一些代码使用任务通过 Web 服务传输文件。但是，如果网络中断或发生超时，则会导致文件不完整。我真的在努力使这项服务尽可能可靠，但我不确定在哪里真正开始添加代码，这些代码会在未发送块时捕获，然后尝试多次重新发送它但也不发送下一个块，直到完成。也许如果它无法在 X 次内重新发送该块，则完全失败并记录一个事件。

任何人都可以提出任何建议吗？

```
Action<Guid, string> action = (smGuid, pubAttFullPath) =>
        {
            try
            {
                //Set filename from object
                string FileName;
                FileName = System.IO.Path.GetFileName(pubAttFullPath.ToString());

                //Declare Web Service
                TransferFile.TransferFileSoapClient ws_TransferFile = new TransferFile.TransferFileSoapClient();

                //
                bool transfercompleted = false;
                using (FileStream fs = new FileStream(
                     pubAttFullPath.ToString(),
                     FileMode.Open,
                     FileAccess.Read,
                     FileShare.Read))
                {
                    //Declare Buffers and Counts
                    byte[] buffer = new byte[49152];
                    long fileSize = fs.Length;
                    long totalReadCount = 0;
                    int readCount;
                    float percentageComplete = 0;

                    //Loop and copy file until it changes to not exactly the same byte count as the buffer
                    //which means the file is about to complete.
                    while ((readCount = fs.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        if (!transfercompleted)
                        {

                            totalReadCount += readCount;
                            byte[] bytesToTransfer;

                            if (readCount == buffer.Length)
                            {
                                //Copy bytes until buffer is different
                                bytesToTransfer = buffer;
                                ws_TransferFile.WriteBinaryFile("ABCD", bytesToTransfer, FileName);
                                percentageComplete = (totalReadCount / (float)fileSize * 100);
                                percentageComplete = (float)Math.Round(percentageComplete, 2, MidpointRounding.ToEven);
                                //Update progress to DB

                                InsertProgress.InsertProgressSoapClient ws_InsertProgress = new InsertProgress.InsertProgressSoapClient();
                                if (percentageComplete == 10.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 10.0);
                                }
                                if (percentageComplete == 20.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 20.0);
                                }
                                if (percentageComplete == 30.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 30.0);
                                }
                                if (percentageComplete == 40.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 40.0);
                                }
                                if (percentageComplete == 50.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 50.0);
                                }
                                if (percentageComplete == 60.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 60.0);
                                }
                                if (percentageComplete == 70.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 70.0);
                                }
                                if (percentageComplete == 80.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 80.0);
                                }
                                if (percentageComplete == 90.00)
                                {
                                    ws_InsertProgress.InsertProgressService(smGuid.ToString(), 90.0);
                                }
                            }
                            else
                            {
                                // Only a part is requred to upload,
                                // copy that part.
                                List<byte> b = new List<byte>(buffer);
                                bytesToTransfer = b.GetRange(0, readCount).ToArray();
                                ws_TransferFile.WriteBinaryFile("ABCD", bytesToTransfer, FileName);
                                percentageComplete = 100;

                                //Insert Progress as complete
                                InsertProgress.InsertProgressSoapClient ws_InsertProgress = new InsertProgress.InsertProgressSoapClient();
                                ws_InsertProgress.InsertProgressService(smGuid.ToString(), 100);
                                transfercompleted = true;
                                fs.Close();
                                break;
                            }
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                EventLog.WriteEntry("Application", ex.Message.ToString(), EventLogEntryType.Error);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:30:44.600

Web 服务对于文件传输来说是个坏主意。我使用了几次，但是传输的附加数据量使传输数据的大小比使用简单处理程序发送文件大 1,5-2 倍。处理程序将允许您毫无问题地进行相同的操作。正确的进度处理和恢复会导致很多问题。你真的应该重新考虑使用 httphandler。如果你喜欢使用 web 服务，这里是一个很好的例子：

[http://msdn.microsoft.com/en-us/library/ms172362%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms172362%28v=vs.85%29.aspx)

如果您决定使用*IHttpHandler* ，请参阅：

[http://msdn.microsoft.com/en-us/library/ms228090%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms228090%28v=vs.100%29.aspx)

然后您可以使用以下代码来正确处理重试/恢复：

```
 using (Stream stream = new FileStream(
                 pubAttFullPath.ToString(),
                 FileMode.Open,
                 FileAccess.Read,
                 FileShare.Read))
                {
                    context.Response.AddHeader("Accept-Ranges", "bytes");
                    context.Response.Buffer = false;

                    if (context.Request.Headers["Range"] != null)
                    {
                        context.Response.StatusCode = 206;
                        string[] range = context.Request.Headers["Range"].Split(new[] { '=', '-' });
                        startBytes = Convert.ToInt32(range[1]);
                    }

                    int dataToRead = size - startBytes;

                    context.Response.ContentType = "application/octet-stream";
                    context.Response.AddHeader("Content-Length", dataToRead.ToString());
                    context.Response.AddHeader("Connection", "Keep-Alive");
                    context.Response.AddHeader("Content-Disposition", "attachment; filename=" + HttpUtility.UrlEncode(fileName, Encoding.UTF8));

                    if (startBytes > 0)
                    {
                        context.Response.AddHeader("Content-Range", string.Format(" bytes {0}-{1}/{2}", startBytes, size - 1, size));
                        stream.Seek(startBytes, SeekOrigin.Begin);
                    }

                    while (dataToRead > 0)
                    {
                        // Verify that the client is connected.
                        if (context.Response.IsClientConnected)
                        {
                            // Read the data in buffer.
                            int length = stream.Read(buffer, 0, buffer.Length);

                            // Write the data to the current output stream.
                            context.Response.OutputStream.Write(buffer, 0, length);

                            // Flush the data to the HTML output.
                            context.Response.Flush();
                            dataToRead = dataToRead - length;
                        }
                        else
                        {
                            // prevent infinite loop if user disconnects
                            dataToRead = -1;
                        }
                    }
                } 
```

# css - 了解 CSS 精灵和链接

> ID：10271388
> 
> 赞同：0
> 
> 时间：2012-04-22T19:35:17.100
> 
> 标签：css, sprite

我一直在研究如何使用 CSS 精灵作为图像链接，但我无法弄清楚。我有一个 PNG（此处：）![http://i.stack.imgur.com/ta3Va.png](../Images/c79196c539a7ecccdf6d3032f0c071b7.png)，其中包含两个图像（为简单起见）。我希望每张图片都充当可以链接到外部网站（Twitter 和 Facebook）的图标。我这样设置我的 CSS：

**CSS**

```
#authorpage-links  ul {
    list-style-type:none;
}

#authorpage-links ul li {
    background: url("/links-authorpage1.png") no-repeat scroll 0 0 transparent;
}

#authorpage-links ul li.twitter {
    background: url("/links-authorpage1.png") no-repeat 0 0; 
    width: 20px; 
    height: 14px; 
}

#authorpage-links ul li.facebook {
    background: url("/links-authorpage1.png") no-repeat -21px 0; 
    width: 14px; 
    height: 14px; 
} 
```

...和我的 HTML 是这样的：

**HTML**

```
<ul id="authorpage-links">
<li id="authorpage-links" class="twitter">
<a target="_blank" href="http://twitter.com/"></a>
</li>
<li id="authorpage-links" class="facebook">
<a target="_blank" href="http://facebook.com/"></a>
</li>
</ul> 
```

现在，2个问题：

1) 使用列表显示这些图像是最好的方式还是应该使用 div？

2) 这是我的 CSS ID 和类的问题吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:50:49.080

基于您对 CSS 的修订（我稍后会谈到的问题）到以下内容：

```
#authorpage-list {
    list-style-type: none;
}
#authorpage-list li {
    float: left;
}
#authorpage-list li a {
    background-color: transparent; /* I broke the background down into individual parts */
    background-image:    url(http://i.stack.imgur.com/ta3Va.png);
    background-position: 0 0;
    background-repeat: no-repeat;
    width: 15px;
    height: 15px;
    display: block; /* in order that the a elements could be assigned a width/height */
    border: 1px solid #f90; /* for diagnostic purposes while working on this, adjust to taste */
}

#authorpage-list #authorpage-facebook-link a {
    /* a specific selector, in order to be more specific than the previous
       selector which styled the defaults for the a elements in this position */
    background-position: -21px 0;
}​ 
```

并将您的 HTML 修改为以下内容：

```
<ul id="authorpage-list">
    <li id="authorpage-twitter-link" class="twitter">
    <a target="_blank" href="http://twitter.com/"></a>
    </li>
    <li id="authorpage-facebook-link" class="facebook">
    <a target="_blank" href="http://facebook.com/"></a>
    </li>
</ul> 
```

我想出了这个：[JS Fiddle 演示](http://jsfiddle.net/davidThomas/ECBRM/2/)。

​<小时 />

# CSS 问题

1.  这是就 HTML 而言最大的禁忌（或者就我所见，它甚至比`blink`标签更糟糕）：您的 HTML 中有***多个******相同*** 的示例。`id`一个在文档中`id` ***必须***是唯一的。如果不是，则您的 HTML 无效。这会导致 CSS 和 JavaScript 出现问题，而且......这很*糟糕*。

    如果您有多个元素需要共享一个属性/样式或其他任何内容，请使用 a `class`，而不是`id`.

2.  你的选择器。`#authorpage-links ul`应该匹配`ul`的祖先元素中的元素`id="#authorpage-links"`。*是带有*that的`ul`元素。我会忽略它的子元素也有 that ，因为我认为我已经涵盖了那部分。你所有的其他 CSS 都是从那个基础开始的，这是不准确的，所以没有工作。*`id``id`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:39:04.303

您的`<li>`元素可能大小为 14x14，但标签中没有任何内容`<a>`，因此这些标签将缩小到 0x0 区域，从而有效地使您的列表元素可点击区域不可见。您可能应该在锚标记中放置一个空格，因此有一些东西可以将它们推开，例如

```
<a target="_blank" href="http://facebook.com/">&nbsp;</a>
                                               ^^^^^^ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T19:39:39.447

您的`a`链接需要有大小。我这样做是为了让 a 有一个可点击的区域。由于您`lis`不需要尺寸，因此我为`a`链接提供了尺寸。

将您的 li css 替换为：

```
ul#authorpage-links li a {
    display: inline-block;
    background: url("/links-authorpage1.png") no-repeat scroll 0 0 transparent;
}

ul#authorpage-links li.twitter a {
    background-position: 0 0; 
    width: 20px; 
    height: 14px; 
}

ul#authorpage-links li.facebook a {
    background-position -21px 0; 
    width: 14px; 
    height: 14px; 
} 
```

还要从您的`lis`.

“......很棒的答案......” - Sparky672*

# android - Android/Google TV STB 或支持 HLS 的多媒体中心

> ID：10271393
> 
> 赞同：0
> 
> 时间：2012-04-22T19:36:01.137
> 
> 标签：android, h.264, http-live-streaming, google-tv

有人知道可以编程的Android STB，即允许.apk 安装并具有内置的HLS 支持吗？

问候， STeN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:20:26.900

使用 Sigma Designs 芯片组的 Android STB 应该支持 HLS。至少 Sigma Designs 在去年进行了演示，他们告诉我这是提供给所有 STB 制造商的 BSP 的一部分。

对于特定的供应商，[PeerTV](http://www.peertv.com/)告诉我他们有 HLS 支持。您可能需要发送几封电子邮件并打几个电话才能获得可靠的答案。阿里巴巴上的很多机顶盒厂商都会以低价提供样机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:43:27.797

所有 Google TV 设备都允许添加用户程序。（它们既是开发盒又是用户设备）。目前只有索尼完全支持 HLS。

# c# - 异步 SQL 查询执行 - Task.WaitAll(tasks) 永远不会完成

> ID：10271405
> 
> 赞同：2
> 
> 时间：2012-04-22T19:37:26.757
> 
> 标签：c#, asynchronous, async-await

我有一个应用程序可以使用异步查询执行将数据从 MS SQL 服务器移动到 MySQL 服务器；数据移动正常，但 RunAllTask​​s() 方法中的 Task.WaitAll(tasks) 调用永远不会完成。

异步任务都遵循 PumpLocsAsync() 模式，其中对 MS SQL 的调用通过 BeginExecuteReader 异步调用；当阅读器返回结果时，MySQL 会正常插入。

..

```
async Task PumpLocsAsync()
{
     using (var conn = new SqlConnection(SqlConnStr))
     using (var cn = new MySqlConnection(MysqlConnStr))
     using (var cmd = new SqlCommand())
     {
          cmd.Connection = conn;
          cmd.CommandText = "SELECT HERE";

          conn.Open();
          var handle = cmd.BeginExecuteReader();
          await Task.Factory.FromAsync(handle, (ar) =>
          {
               var rdr = cmd.EndExecuteReader(ar);
               var qry = @"INSERT HERE";

               cn.Open();
               using (var cmdm = new MySqlCommand(qry, cn))
               {
                   cmdm.CommandTimeout = MysqlCmdtimeout;
                   <PARAM SETUP HERE>
                   <COLUMN MAPPING HERE>

                   while (RetryUtility.RetryMethod<bool>(() => rdr.Read(), 3, 1000))
                   {
                       <LOADING PARAMS WITH BITS HERE>
                       RetryUtility.RetryAction(() => cmdm.ExecuteNonQuery(), 3, 1000);
                   }
               }
               Console.WriteLine("Finished Locs!");
               cn.Close();
          });
          conn.Close();
    }
}

...

        void RunAllTasks()
        {
            Task[] tasks = { PumpLocsAsync(), PumpPicsAsync() };

            try
            {
                Task.WaitAll(tasks);
                Console.WriteLine("Finished with all tasks...");
                foreach (var task in tasks)
                {
                    Console.WriteLine("Id: {0}, Status: {1}", task.Id, task.Status);
                }
            }

.... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T19:51:00.473

您误解了如何调用`Task.Factory.FromAsync()`，将方法的结果和`BeginXxx`方法的委托传递给它`EndXxx`：

```
var rdr = await Task.Factory.FromAsync(
    cmd.BeginExecuteReader,
    (Func<IAsyncResult, SqlDataReader>)cmd.EndExecuteReader,
    null); 
```

如果您想在操作完成后做某事，只需将其放在此行下方，`await`将确保它在正确的时间执行。

# android - Android - 无法使用 OAuth 访问令牌来检索 Google 阅读器提要

> ID：10271406
> 
> 赞同：1
> 
> 时间：2012-04-22T19:37:30.547
> 
> 标签：android, oauth-2.0, google-reader

我需要获取 OAuth2 身份验证令牌以将其传递给服务器，以便它可以为用户获取 Google 阅读器提要列表。服务器是 .NET - 我无法访问它或它的代码，但很可能它使用的是[非官方的 Reader API](http://code.google.com/p/pyrfeed/wiki/GoogleReaderAPI)

我可以使用 Android 帐户管理器通过以下代码为此目的获取有效令牌（注意 authTokenType="reader"）

```
Account account = accounts[0];
manager.getAuthToken(account, "reader", null, this, new AccountManagerCallback<Bundle>() {
    public void run(AccountManagerFuture<Bundle> future) {
        try {
            // If the user has authorized your application to use the tasks API
            // a token is available.
            String token = future.getResult().getString(AccountManager.KEY_AUTHTOKEN);
            // Now you can send the token to API...
            cacheManager.putString(GOOGLE_AUTH, token);
            GoogleReaderManager.startAddFeedActivity(AddGoogleReaderSourcesActivity.this);
            finish();
        } catch (OperationCanceledException e) {
            Log.e(TAG, "User cancelled", e);
            finish();
        } catch (Exception e) {
            Log.e(TAG, "Failed to obtain Google reader API_KEY", e);
        }
    }
}, null); 
```

当我将令牌发送到服务器端 .Net 应用程序时，上面的代码工作正常：该应用程序能够检索阅读器提要列表。

问题是这只适用于“Google inside”设备。在 Nook 我没有这样的运气，因为我无法找到将 Google 帐户添加到客户经理的方法。所以我正在尝试使用 OAuth 2 协议，如此[处所述](https://developers.google.com/accounts/docs/OAuth2WebServer)

就获取令牌而言，它工作正常：用户从返回代码令牌的移动页面批准应用程序，然后移动应用程序交换身份验证令牌。但是，此令牌不适用于服务器进程。我有一种感觉，也许我在这个 URL 中使用了错误的范围：

[https://accounts.google.com/o/oauth2/auth?response_type=code&scope=https://www.google.com/reader/api/0/subscription/list&redirect_uri=http://localhost&approval_prompt=force&state=/ok&client_id =](https://accounts.google.com/o/oauth2/auth?response_type=code&scope=https://www.google.com/reader/api/0/subscription/list&redirect_uri=http://localhost&approval_prompt=force&state=/ok&client_id=) {apps.client.id}

我在各种组合中尝试过的范围：

1.  [https://www.google.com/reader/api](https://www.google.com/reader/api)
2.  [https://www.google.com/reader/api/0](https://www.google.com/reader/api/0)
3.  [https://www.google.com/reader/api/0/subscription/list](https://www.google.com/reader/api/0/subscription/list)
4.  [https://www.google.com/reader/api+https://www.google.com/reader/atom](https://www.google.com/reader/api+https://www.google.com/reader/atom)

这是从获取令牌 POST 返回的 JSON 示例

```
{"expires_in":3600,
     "token_type":"Bearer",
     "access_token":"ya29.AHES6ZSEvuUb6Bvd2DNoMnnN_UnfxirZmf_RQjn7LptFLfI",
     "refresh_token":"1\/bUwa5MyOtP6VyWqaIEKgfPh08LNdawJ5Qxz6-qZrHg0"} 
```

我弄乱了范围或令牌类型吗？不确定如何更改令牌类型。还有其他想法吗？

PS谷歌账号登录页面问：`Manage your data in Google Reader`，这就是我怀疑范围错误的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:41:21.983

我让它为[https://www.google.com/reader/api/0/subscription/list](https://www.google.com/reader/api/0/subscription/list)工作。所以想和大家分享。

我有有效的`access_token`：

这就是我试图解决的问题（部分）：

*   Google 提供 OAuth 2.o playgound；他们实际上模拟了 OAuth 2.0 的所有方面以及最终的 API 调用以获取数据。我发现这非常有帮助，因为它清楚地显示了发送请求的内容。这是网址：[https ://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)
*   使用它，我在下面调整了我的 api 调用，它可以工作:)

    ```
    public static  String getReaderContent(String accessToken){
       String url = "https://www.google.com/reader/api/0/subscription/list" ; 

       HttpClient client = new HttpClient();

       GetMethod method = new GetMethod(url);
       String response="";
       method.setRequestHeader("Authorization", "OAuth "+accessToken);
       try {
         int statusCode = client.executeMethod(method);
         String response= method.getResponseBodyAsString();

         System.out.println("response " + responseStr);
       } catch (HttpException e) {
         e.printStackTrace();
       } catch (IOException e) {
        e.printStackTrace();
      }
    return response;
    } 
    ```

所以这适用于获取订阅列表；但无法使其适用于您在问题中提到的阅读器 api。

如果你有办法绕过谷歌阅读器 API，请告诉我。

# iphone - hitTest：withEvent：不工作

> ID：10271409
> 
> 赞同：6
> 
> 时间：2012-04-22T19:37:54.197
> 
> 标签：iphone, ios

我正在制作一个应用程序，其中有一个背景视图，并且有六个`UIImageView`作为子视图。我`UITapGestureRecognizer`要看看什么时候轻按其中一个`UIImageView`s 并且下面的 handleTap 方法是手势识别器调用的方法。但是，当我运行它时，`hitTest:withEvent:`即使我点击其中一个 imageViews，它也总是返回背景视图。当我调用hitTest时，它与事件有关吗？

谢谢

```
- (void) handleTap: (UITapGestureRecognizer *) sender
{
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        CGPoint location = [sender locationInView: sender.view];
        UIView * viewHit = [sender.view hitTest:location withEvent:NULL];
        NSLog(@"%@", [viewHit class]);
        if (viewHit == sender.view) {}
        else if ([viewHit isKindOfClass:[UIImageView class]])
        {
            [self imageViewTapped: viewHit];
            NSLog(@"ImageViewTapped!");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T21:21:30.653

UIImageView 默认配置为不注册用户交互。

从 UIImageView 文档：

> 新的图像视图对象默认配置为忽略用户事件。如果要在 UIImageView 的自定义子类中处理事件，则必须在初始化对象后将 userInteractionEnabled 属性的值显式更改为 YES。

所以，在你初始化你的视图之后，你应该有：

```
view.userInteractionEnabled = YES; 
```

这将重新打开交互，您应该能够注册触摸事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:13:02.707

对您的方法（包含视图上的单个 GR）进行了重写，但它会让我们的大脑受伤，让坐标系正确，这绝对是发布代码中的问题。

更好的答案是将 N 个手势识别器附加到每个 UIImageViews。它们都可以具有相同的目标并使用相同的 handleTap: 方法。handleTap: 可以在不搜索任何几何图形的情况下获取视图，如下所示：

```
UIImageView *viewHit = (UIImageView *)sender.view; 
```

# c++ - 这两个分区函数之间的区别

> ID：10271410
> 
> 赞同：0
> 
> 时间：2012-04-22T19:37:55.270
> 
> 标签：c++, function, sorting

我真的不明白他们之间是否有**区别**。顺便说一下，函数是用于**分区**的函数。我问这个的原因是因为我正在实现一个**合并排序**，并且下面的第一个函数不起作用。两者都写，但我根本不明白为什么第一个不起作用

**第一个功能；**

```
vector<int>partition(vector<int>vec,int start,int finish)
{
    vector<int>list;
    for(int i=start;i<finish;i++)
        list.push_back(vec[i]);
    return list;
} 
```

**第二个功能；**

```
vector<int>partition(vector<int>vec,int start,int finish)
{
    vector<int>parted;
    int size=finish-start+1;
    for(int i=0;i<size;i++)
        parted.push_back(vec[i+start]);
    return parted;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:43:11.727

唯一的区别是第一个不会包含`vec[finish]`在输出中，而第二个会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:10:16.023

好像您只是从向量中复制一个范围，您可以使用 std::copy 。同样为了良好的实践，尽可能通过 const-reference 传递。正如其他人指出的那样，两者之间的区别在于第一个函数将完成视为一次通过结束，而第二个函数包含它。通常，您可能希望保持一致并使用第一个，因为它与 STL 一致。

# android - Android 定位服务不工作

> ID：10271414
> 
> 赞同：0
> 
> 时间：2012-04-22T19:38:46.327
> 
> 标签：android, geolocation

这里是这样：我花了整夜搜索互联网，尤其是 StackOverflow，试图找出为什么我无法在 Android 中获得基本的定位服务。我在各种模拟环境中进行了尝试，从 Android 1.6 到 Android 4，都模拟了 GPS 服务，以及在实际的 Android 2.2.2 设备上。位置总是返回为空，我已经尝试了至少七个不同的可下载示例项目，逐字使用它们，并获得相同的结果。

显然，我错过了一些关键。如果有人能指出我做错了什么，将不胜感激。

com.mytestproject.android：

```
package com.mytestproject.android;
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;
import com.mytestproject.android.R;
public class MyTestProject extends Activity {
private TextView mytext;
private LocationManager locmgr = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mytext = (TextView) findViewById(R.b.mytext);

    //grab the location manager service
    locmgr = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    mytext.setText("waiting for location");
}

//Start a location listener
LocationListener onLocationChange=new LocationListener() {
    public void onLocationChanged(Location loc) {
        //sets and displays the lat/long when a location is provided
        String latlong = "Lat: " + loc.getLatitude() + " Long: " + loc.getLongitude();   
        mytext.setText(latlong);
    }

    public void onProviderDisabled(String provider) {
    // required for interface, not used
    }

    public void onProviderEnabled(String provider) {
    // required for interface, not used
    }

    public void onStatusChanged(String provider, int status,
    Bundle extras) {
    // required for interface, not used
    }
};

//pauses listener while app is inactive
@Override
public void onPause() {
    super.onPause();
    locmgr.removeUpdates(onLocationChange);
}

//reactivates listener when app is resumed
@Override
public void onResume() {
    super.onResume();
    locmgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,10000.0f,onLocationChange);
}
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView
android:id="@+id/mytext"  
android:textSize="15pt"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="1"/>
</LinearLayout> 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.johnandbrian.android"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"></uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MyTestProject"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:42:39.090

将此添加到`onCreate()`函数中，

```
locmgr.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,10000.0f,onLocationChange); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:35:45.533

如果`onLocationChanged()`甚至没有被调用，即使是示例项目，那么我认为“位置始终为空”并不是对问题的准确描述。`onLocationChanged()`仅在位置*更改*时调用。所以听起来你（a）在使用模拟器时没有注入模拟位置或以其他方式驱动位置引擎，并且（b）在真实设备上移动得不够多。我建议将一个示例项目加载到真实设备上，*到外面去*，然后移动一些（几 10 米）。在方法中（在示例项目中）放置一些面包屑`onLocationChanged()`以验证它是否被调用。

# java - android alarmmanager 多个警报，一个覆盖另一个？

> ID：10271417
> 
> 赞同：17
> 
> 时间：2012-04-22T19:38:54.317
> 
> 标签：java, android

我在帖子中搜索了我的问题的答案，但没有找到任何可以解决我问题的东西。我正在尝试使用一个 AlarmSettings 类设置 3 个不同的警报。当我设置两个警报时，第二个优先于第一个，第一个永远不会响起。我认为这可能与我的未决意图有关......我真的是 android 新手，非常感谢您的帮助。这是我设置警报的代码：

```
public void setAlarm() {

        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.set(Calendar.HOUR_OF_DAY, timepicker.getCurrentHour());
        calendar.set(Calendar.MINUTE, timepicker.getCurrentMinute());
        calendar.set(Calendar.SECOND, 0);

        if (timepicker.getCurrentHour() < calendar.get(Calendar.HOUR_OF_DAY)) { //if the alarm hour is less than the current hour
            calendar.add(Calendar.DATE, 1);                                     //then add 24 hours (1 DATE or Day)                 
        }

        //Create the text that we want to set the TextView alarmtime to in Main
        StringBuilder sb = new StringBuilder();
        if (timepicker.getCurrentHour() > 12) {
            sb.append(timepicker.getCurrentHour() - 12);
        } else {
            sb.append(timepicker.getCurrentHour());
        }
        sb.append(":");
        sb.append(timepicker.getCurrentMinute());
        sb.append(" ");
        if (timepicker.getCurrentHour() > 12) {
            sb.append("pm");
        } else {
            sb.append("am");
        }

        if (((GlobalVariables)getApplication()).getCurrentAlarmBeingEdited() == 1) {
            ((GlobalVariables)getApplication()).setAlarm1Cal(calendar);
            Main.alarmTime1.setText(sb);

            Intent intent1 = new Intent(AlarmSettings.this, AlarmReceiver.class);
            intent1.putExtra("alarm_num", ((GlobalVariables)getApplication()).getCurrentAlarmBeingEdited());
            PendingIntent pendingIntent1 = PendingIntent.getActivity(getApplicationContext(), 0, intent1, PendingIntent.FLAG_ONE_SHOT);

            alarmmanager1.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent1);

        } else if (((GlobalVariables)getApplication()).getCurrentAlarmBeingEdited() == 2) {
            ((GlobalVariables)getApplication()).setAlarm2Cal(calendar);
            Main.alarmTime2.setText(sb);

            Intent intent2 = new Intent(AlarmSettings.this, AlarmReceiver.class);
            intent2.putExtra("alarm_num", ((GlobalVariables)getApplication()).getCurrentAlarmBeingEdited());
            PendingIntent pendingIntent2 = PendingIntent.getActivity(getApplicationContext(), 0, intent2, PendingIntent.FLAG_ONE_SHOT);

            alarmmanager2.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent2);

        } else if (((GlobalVariables)getApplication()).getCurrentAlarmBeingEdited() == 3) {
            ((GlobalVariables)getApplication()).setAlarm3Cal(calendar);
            Main.alarmTime3.setText(sb);

            Intent intent3 = new Intent(AlarmSettings.this, AlarmReceiver.class);
            intent3.putExtra("alarm_num", ((GlobalVariables)getApplication()).getCurrentAlarmBeingEdited());
            PendingIntent pendingIntent3 = PendingIntent.getActivity(getApplicationContext(), 0, intent3, PendingIntent.FLAG_ONE_SHOT);

            alarmmanager3.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent3);
        }

        finish();

        Toast.makeText(getApplicationContext(), "system time: " + System.currentTimeMillis() + "\n" + "picked time: " + calendar.getTimeInMillis(), Toast.LENGTH_LONG).show();      
    } 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-22T19:46:41.900

```
PendingIntent pendingIntent1 = PendingIntent.getActivity(getApplicationContext(), 0, intent1, PendingIntent.FLAG_ONE_SHOT); 
```

将 0 属性更改为警报的 id，例如，您有三个警报，

用 0,1,2 重复上面的代码。

这样他们就不会互相覆盖。

# c# - C# 中的结构

> ID：10271420
> 
> 赞同：1
> 
> 时间：2012-04-22T19:39:14.493
> 
> 标签：c#, struct

我在我的程序中使用如下结构：

```
public struct chromo_typ
{
        public string   bits;  
        public float    fitness;

        chromo_typ(string bts, float ftns)
        {
            bits = bts;
            fitness = ftns;
        }
}; 
```

我在 main() 中使用结构中定义的构造函数，即 chromo_typ(string bts, float ftns)。我的 main() 包含以下代码：

```
chromo_typ[] temp = new chromo_typ[VM_Placement.AlgorithmParameters.pop_size];

                    chromo_typ ct = new chromo_typ();

                    int cPop = 0;

                    //loop until we have created POP_SIZE new chromosomes
                    while (cPop < VM_Placement.AlgorithmParameters.pop_size)
                    {
                        // we are going to create the new population by grabbing members of the old population
                        // two at a time via roulette wheel selection.
                        string offspring1 = p.Roulette(TotalFitness, Population);
                        string offspring2 = p.Roulette(TotalFitness, Population);

                        //add crossover dependent on the crossover rate
                        p.Crossover(offspring1, offspring2);

                        //now mutate dependent on the mutation rate
                        p.Mutate(offspring1);
                        p.Mutate(offspring2);

                        //add these offspring to the new population. (assigning zero as their
                        //fitness scores)
                        temp[cPop++] = ct.chromo_typ(offspring1, 0.0f);
                        temp[cPop++] = ct.chromo_typ(offspring2, 0.0f);

                    }//end loop 
```

我在`temp[cPop++] = ct.chromo_typ(offspring1, 0.0f);`和`temp[cPop++] = ct.chromo_typ(offspring2, 0.0f);`

> 错误：`'VM_Placement.Program.chromo_typ' does not contain a definition for 'chromo_typ' and no extension method 'chromo_typ' accepting a first argument of type 'VM_Placement.Program.chromo_typ' could be found (are you missing a using directive or an assembly reference?)`

我是否错误地使用了结构？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T19:43:15.800

在这种情况下，`chromo_typ`是一个构造函数，但您将其作为实例方法调用。构造函数用于构造对象，即

```
temp[cPop++] = new chromo_typ(arg1, arg2); 
```

它不是您可以在您的类型的实例上调用的方法。

在旁注中，在 C# 中命名类型的规范方法是使用以大写字母开头并使用驼峰式大小写，即

```
public struct ChromoTyp { } 
```

当然，这不是一个规则，但遵循社区已经在使用的模式通常是一个好主意。

# jquery - Jquery UI：具有远程自动完成功能的组合框

> ID：10271432
> 
> 赞同：0
> 
> 时间：2012-04-22T19:40:19.017
> 
> 标签：jquery, autocomplete, combobox

我使用带有自动完成插件的 jQuery UI。我想要一个类似 jQueryUi 的组合框（带有一个可以单击以查看列表的箭头），但是当有人在组合框/文本字段中输入一些文本时，将从后端检索数据。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:04:12.077

这是一个工作示例：http: [//jsfiddle.net/and7ey/TFerw/3/](http://jsfiddle.net/and7ey/TFerw/3/)

看到[这个问题](https://stackoverflow.com/questions/8011323/how-to-use-remote-source-with-jquery-ui-combobox)

# jquery - jquery css缩放图标到不透明的图像

> ID：10271435
> 
> 赞同：0
> 
> 时间：2012-04-22T19:40:51.060
> 
> 标签：jquery, css

我喜欢阅读有关使用 jquery 和 css在图像[中](http://www.jankoatwarpspeed.com/post/2009/04/06/Add-zoom-icon-to-images-using-CSS-and-jQuery.aspx)添加缩放图标的文章。我在悬停图像中`hover`添加 css 。`opacity`这在我`hover`图像（图像上的鼠标光标）时有效，但是当我在缩放图标上鼠标光标时，图像上隐藏了 css 不透明度。在所有悬停（图像+缩放图标）中解决不透明图像的任何方法。谢谢

jsfiddle 中的演示：[这里](http://jsfiddle.net/X7N33/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:10:34.120

您需要在悬停 时设置不透明度，而`a`不是`img`.

```
#gallery2 a:hover img{
    opacity:0.6;
    filter:alpha(opacity=60);
} 
```

它的工作示例：http: [//jsfiddle.net/skip405/X7N33/1/](http://jsfiddle.net/skip405/X7N33/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:14:15.847

您必须将元素`:hover`从`img`元素移动到`a`元素。这是一个工作演示[http://jsfiddle.net/pomeh/3mSLs/3/](http://jsfiddle.net/pomeh/3mSLs/3/)。顺便说一句，您不需要 Javascript 来显示/隐藏图标 :)

HTML 代码

```
<div id="gallery2">   
    <a href="http://www.imagehost.co.za/thumb-CF6F_4F945924.jpg">  
        <img src="http://www.imagehost.co.za/thumb-CF6F_4F945924.jpg" />
        <span></span>
    </a>
</div>​ 
```

CSS 代码

```
#gallery2 a span {
    background-image:url(http://www.jankoatwarpspeed.com/examples/zoom_icon/zoom.png);
    background-repeat:no-repeat;
    width:48px;
    height:48px;
    position:absolute;
    left:15px;
    top:15px;
    opacity: 0;
    filter:alpha(opacity=0);
    -webkit-transition: opacity 0.6s linear;  /* Saf3.2+, Chrome */
       -moz-transition: opacity 0.6s linear;  /* FF4+ */
        -ms-transition: opacity 0.6s linear;  /* IE10 */
         -o-transition: opacity 0.6s linear;  /* Opera 10.5+ */
            transition: opacity 0.6s linear;
}

#gallery2 img {
    border: solid 1px #999;
    padding:5px;
}

/* when you hover the A element, fade the image */
#gallery2 a:hover img {
    opacity:0.6;
    filter:alpha(opacity=60);
}

/* no need for Javascript to show the span element */
#gallery2 a:hover span {
    -webkit-transition: opacity 0.6s linear;  /* Saf3.2+, Chrome */
       -moz-transition: opacity 0.6s linear;  /* FF4+ */
        -ms-transition: opacity 0.6s linear;  /* IE10 */
         -o-transition: opacity 0.6s linear;  /* Opera 10.5+ */
            transition: opacity 0.6s linear;
    opacity: 1;
    filter:alpha(opacity=100);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:50:52.177

这是因为您将鼠标悬停在图标而不是图像上。如果您也将悬停事件添加到图标，那么当您将鼠标悬停在图标上时，图像不透明度会发生变化，您应该没问题。

# css - 使用 CSS 重置倾斜 div 中文本的角度

> ID：10271438
> 
> 赞同：2
> 
> 时间：2012-04-22T19:40:59.227
> 
> 标签：css

我做了一个小提琴：

[http://jsfiddle.net/89x4d/](http://jsfiddle.net/89x4d/)

我试图保持倾斜的 div 但保持 p 文本笔直。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T19:46:24.843

您应该使用`20deg`代替`0deg`P 来补偿 DIV 变换（因为结果是变换的组合。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T19:54:46.347

为了消除偏斜的影响，你必须给出正的变换值。

```
p {
   -webkit-transform: skew(20deg) !important;
   -moz-transform: skew(20deg) !important;
   -o-transform: skew(20deg) !important;
   transform: skew(20deg) !important;
} 
```

[演示](http://jsfiddle.net/Starx/89x4d/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-21T06:47:01.070

```
div {
    width: 200px;
    height:50px;
        background: red;
-webkit-transform: skew(-20deg);
-moz-transform: skew(-20deg);
-o-transform: skew(-20deg);
    transform: skew(-20deg);
    margin: 20px;

    padding:0 25px;
}
p {
   -webkit-transform: skew(20deg) !important;
-moz-transform: skew(20deg) !important;
-o-transform: skew(20deg) !important;
    transform: skew(20deg) !important; 
}
```

```
<div>
<p>hey i'm straight, ok?</p>
</div>
```

嘿，我是直的，好吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T19:56:26.353

我不确定你是否可以让它向后倾斜，似乎字体扭曲太多。

skew(20) 是我能得到的最接近的，但你可以设置 2 个 div，1 个用于倾斜框，另一个用于移动它。

[http://jsfiddle.net/gP9ne/3/](http://jsfiddle.net/gP9ne/3/)

在那里设置一个小提琴供您查看

马丁

编辑：实际上看起来没有任何不同：pi 认为它只是红色的黑色，字体不喜欢我的屏幕：p

总是想太多！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-21T08:01:19.500

正如其他人指出的那样，逆转`skew`可能`<p>`会导致一些不良结果。

它也不是超级可重用的，因为对于每个新`skew`角度，您都需要相应的 CSS 选择器/声明来反转内部内容。

作为替代方案，使用`:before`选择器将倾斜的元素添加到文本后面。

**HTML**

```
<div>
  <p>hey i'm straight, ok?</p>
</div> 
```

**CSS**

```
div {
  width: 200px;
  height:50px;
  margin: 20px;
  position:relative;
}

div:before {
  content: "";
  display:block;
  background: red;
  position:absolute;
  width:100%;
  height:100%;
  z-index:-1;
  -webkit-transform: skew(-20deg);
  -moz-transform: skew(-20deg);
  -o-transform: skew(-20deg);
  transform: skew(-20deg);
} 
```

和一个[演示](http://jsfiddle.net/brettdewoody/zyq6nwyc/)。

# c++ - while循环中的条件语句

> ID：10271439
> 
> 赞同：1
> 
> 时间：2012-04-22T19:41:13.617
> 
> 标签：c++, conditional

我肯定错过了什么。我正在做一个学习 c++ 的练习，它询问用户是否输入 c、p、t 或 g 字符然后继续，否则重新请求提示，所以我写了这个：

```
#include <iostream>
#include <cstring>
#include <string>

using namespace std;

int main(void){
  cout << "Please enter one of the following choices:" << endl;
  cout << "c) carnivore\t\t\tp) pianist\n";
  cout << "t) tree\t\t\t\tg) game\n";
  char ch;
  do{
    cout << "Please enter a c, p, t, or g: ";
    cin >> ch;
    cout << "\"" << ch << "\"" << endl;
  }while(ch != 'c' || ch != 'p' || ch != 't' || ch != 'g');

  cout << "End" << endl;

  cin.clear();
  cin.ignore();
  cin.get();

  return 0;
} 
```

这不起作用，我得到的只是提示重新请求它，即使按下任何一个正确的字符也是如此。

但是，如果我更改此行：

```
while(ch != 'c' || ch != 'p' || ch != 't' || ch != 'g'); 
```

到

```
while(ch != 'c' && ch != 'p' && ch != 't' && ch != 'g'); 
```

这是为什么？我的理解是“OR”语句应该起作用，因为其中一项测试是正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T19:43:27.517

> 这是为什么？我的理解是“OR”语句应该起作用，因为其中一项测试是正确的。

确切地。总有*一项测试*通过。一个字符要么不是`'c'`，要么不是`'p'`。不能同时是`'c'`和`'p'`。所以条件总是为真，导致无限循环。

带有连词的替代条件有效，因为一旦`ch`等于其中一个替代条件，它就为假：其中一个不等式为假，因此整个条件为假。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T19:44:17.217

> 我的理解是“OR”语句应该起作用，因为其中一项测试是正确的。

好吧，您可以使用`||`，但表达式必须是：

```
while(!(ch == 'c' || ch == 'p' || ch == 't' || ch == 'g')); 
```

通过应用[德摩根定律](http://De%20Morgan%27s%20laws)，上述简化为：

```
while(ch != 'c' && ch != 'p' && ch != 't' && ch != 'g'); 
```

# php - 如果有值则更新行，否则插入

> ID：10271440
> 
> 赞同：1
> 
> 时间：2012-04-22T19:41:20.077
> 
> 标签：php, mysql

我有一个表单，用户可以在其中插入数据，但他们可以返回同一页面来编辑他们的信息。我的表结构是： `id (auto int index), user id (links to other tables), Doc_Name, Abstract`

我有一个插入查询：

```
$user_id = intval($_SESSION['user_id']);
$Doc_Name = mysql_real_escape_string($_POST['Doc_Name']);
$abstract = mysql_real_escape_string($_POST['abstract']);

$the_query = sprintf("INSERT INTO `document` (`user_id`,`Doc_Name`,`abstract`) VALUES
('%d','%s','%s')", $user_id, $Doc_Name, $abstract); 
```

但是，如果他们已经是这个 user_id 的一行，那么我想要更新查询：

```
 mysql_query("UPDATE document SET `Doc_Name` = '$Doc_Name', 'abstract='$abstract'
 WHERE id='$_SESSION[user_id]'") or die(mysql_error()); 
```

另外，为了让用户知道他们输入了什么，我尝试在文本框中使用这个回显，但这也不起作用，

```
<textarea name="Doc_Name" style="width:500px; height:150px" type="text" id="Doc_Name"
value="<? echo $row_settings['Doc_Name']; ?>"  size="300"> </textarea> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T19:43:54.733

您可以使用 INSERT ... ON DUPLICATE KEY UPDATE 语法

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

> INSERT INTO table (a,b,c) VALUES (1,2,3) ON DUPLICATE KEY UPDATE c=c+1;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:44:02.457

您想要[INSERT ... ON DUPLICATE UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:43:05.237

对于您可以使用的文本区域

```
<textarea name="Doc_Name" style="width:500px; height:150px" type="text" id="Doc_Name" size="300"><? echo $row_settings['Doc_Name']; ?></textarea> 
```

标签之间的所有内容都显示并可编辑

编辑：对其他海报：很好，不知道[插入重复](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T19:50:27.730

查询：

```
SELECT * FROM document WHERE id='{$SESSION['user_id']}' 
```

php:

```
if(mysql_num_rows(mysql_query($query)) > 0) {
    //code to be executed if id exists
} 
```

# android - 使用 FragmentPagerAdapter 的带有选项卡的 FragmentActivity

> ID：10271445
> 
> 赞同：0
> 
> 时间：2012-04-22T19:41:43.163
> 
> 标签：android, tabs, android-fragments, android-4.0-ice-cream-sandwich

我正在开发一个带有基于选项卡的界面的小型 android 移动应用程序。一个选项卡显示地图，另一个选项卡将显示搜索功能。

我在地图上遇到了一个烦人的问题，如果我在地图上向左（滑动）平移，它将转到右侧选项卡，而不是实际平移地图。

我仍然希望顶部的选项卡以它们的方式工作，同时禁用从一个选项卡内容到另一个选项卡内容的“滑动”。

这是我托管标签的主要活动：

[http://msse-idroid-mobile.googlecode.com/svn/trunk/FinalProject/src/com/idroid/activities/FragmentTabsActivity.java](http://msse-idroid-mobile.googlecode.com/svn/trunk/FinalProject/src/com/idroid/activities/FragmentTabsActivity.java)

以下是填充选项卡的片段：

[http://msse-idroid-mobile.googlecode.com/svn/trunk/FinalProject/src/com/idroid/fragments/](http://msse-idroid-mobile.googlecode.com/svn/trunk/FinalProject/src/com/idroid/fragments/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:59:29.430

像 Endomondo 那样做。

在地图顶部添加一个按钮以启用/禁用地图上的平移，以禁用地图平移只需执行`setClickable(false);`.

这样你就可以得到两样东西。平移和滑动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:02:54.187

我最终通过覆盖 ViewPager 类中的功能推出了自己的解决方案。看这里：

[http://msse-idroid-mobile.googlecode.com/svn/trunk/FinalProject/src/com/idroid/view/MyViewPager.java](http://msse-idroid-mobile.googlecode.com/svn/trunk/FinalProject/src/com/idroid/view/MyViewPager.java)

# inno-setup - 如何在产品名称中使用撇号？

> ID：10271446
> 
> 赞同：0
> 
> 时间：2012-04-22T19:41:45.020
> 
> 标签：inno-setup

我想在使用 InnoSetup 创建设置时在产品名称中使用撇号。

我这样定义一个变量：

```
#define APP_NAME = "ABC's tool" 
```

我在 AppName、AppVerName 和 OutputBaseFilename 中使用这个变量。

如果我如上所示定义它，我会收到以下错误：

```
Compile Error!
Line: 185
Error: Column 50:
comma (',') expected. 
```

如果我将变量定义更改为：

```
#define APP_NAME = "ABC''s tool" 
```

它编译正常，但我在产品名称（ABC 的工具）中得到双撇号。

任何想法如何定义以获得一个撇号？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:36:27.290

对不起，我应该以前测试过这个。我正在使用更多变量定义 AppName，例如：

```
#define APP_NAME = "ABC's tool"
#define APP_VER = "2012"
[Setup]
AppName = {#APP_NAME} {#APP_VER} 
```

我已经对此进行了测试，它适用于新文件。但是，如果我在我的脚本中这样做，我会得到一个错误。

我已经解决了，所以我对 APP_NAME 进行了硬编码，无论我想在哪里使用它，例如：

```
AppName = {ABC's tool} {#APP_VER}
OutputBaseFilename=ABC's tool {#APP_VER} 
```

# jquery - jquery的新手-淡出对我不起作用

> ID：10271447
> 
> 赞同：1
> 
> 时间：2012-04-22T19:42:05.630
> 
> 标签：jquery, fadeout

谁能理解为什么这个简单的代码不起作用：

```
 <script src="/jQuery/jquery-1.7.2.min.js" type="text/javascript"></script>

    <script type="text/javascript">
//<![CDATA[

        $(document).ready(function() = {
        $('div.FadeOutMessageBox').click(function () { $(this).fadeOut("slow"); });
        };
        //]]>
    </script>

    <asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server" />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>

                <div id="FadeOutBox" class="FadeOutMessageBox">
                     thank you bla bla
                     click this message to make it go away
                </div>
... 
```

它假设在页面上放置一些简单的 div，点击时会淡出。但是当我单击此 div 时没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:45:02.613

```
$(document).ready(function() = { 
```

应该

```
$(document).ready(function(){ 
```

编辑：您还需要确保关闭任何`(`或`{`打开的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:45:46.387

```
<script type="text/javascript">
    $(function() {
        $('div.FadeOutMessageBox').click(function () { $(this).fadeOut("slow"); });
    });
</script> 
```

试试这个！

> 1：您不小心在函数 () 和 { 之间添加了一个 =
> 
> 2: "$(function() {" 实际上和"$(document).ready(function() {" 是一样的，所以它是一个很好的捷径！
> 
> 3：你最后错过了 )。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T19:47:32.100

你错过了最后一个`)`所以准备永远不会关闭：

`});`

# javascript - div 中的文本从表单中获取输入

> ID：10271448
> 
> 赞同：0
> 
> 时间：2012-04-22T19:42:09.483
> 
> 标签：javascript, html, jquery

以下是我的 div，我想知道如何从表单中获取输入让我们从文本字段“名称”中说，并在下面的 div 中显示该输入名称而不是 jhon，请帮助！

```
<div id='faix' class="bg4 w460 h430 tac poa dpn ">
                    <h4 class="fwb fs22 cf3 mb5 ff3 mt150 ">Thank you John for contacting us!</h4><h4 class="fwb fs22 cf3 mb5 ff3"> We will get in touch with you shortly.</h4>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:55:09.837

见[http://jsfiddle.net/wfAgb/](http://jsfiddle.net/wfAgb/)

```
//get the name
var Name = $('#name').val();
//replace John with the new name
$('.mt150').text($('.mt150').text().replace('John', Name)); 
```

您可以大有裨益地围绕名称进行跨越，以便您可以直接更改它。

```
<h4 class="fwb fs22 cf3 mb5 ff3 mt150 ">Thank you <span id="formName">John</span> for contacting us!</h4> 
```

然后做

```
var Name = $('#name').val();
$('#formName').text(Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:49:18.040

html:

```
<form id="myForm">
  <input id="name" name="name" value=""/>
</form> 
```

js：

```
$("#myForm").submit(function(){
  $("#faix h4.mt150").empty().append("Thank you "+$("#name").val()+" for contacting us!");
    return false;
})​ 
```

演示：http: [//jsfiddle.net/BPXpb/1/](http://jsfiddle.net/BPXpb/1/)

# c# - 对象不包含标题的定义

> ID：10271456
> 
> 赞同：0
> 
> 时间：2012-04-22T19:43:06.953
> 
> 标签：c#, asp.net-mvc-3

我有一个控制器通过 ViewBag 将数据传递给我的视图

我的控制器：

```
var aJobs = from a in gdb.AcceptedJobs
            where a.Job.EmployerID == (Guid)Session["UserID"] && !a.Archived
            select new { a.Job.Title, a.Job.Address };
ViewBag.jobs = aJobs;
return View("Employer"); 
```

我的观点：

```
foreach (var job in ViewBag.jobs)
{
    @job.Title
    @job.Address
} 
```

现在，当我浏览到页面时出现错误`object does not contain a definition for Title`，`@job.Title`这是为什么？

我正在使用 ASP.Net MVC3 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:50:54.680

尝试以这种方式创建您的匿名类型

```
select new { Title = a.Job.Title, Address = a.Job.Address }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T13:04:43.430

当我调试时，抛出错误，我检查了当地人。然后我可以清楚地看到，在第一次迭代中，作业对象包含一个标题字符串，其值为我的名字。

# php - 如何将 Lithium PHP 框架与集合的枚举列表和模型中的更改集合一起使用

> ID：10271458
> 
> 赞同：3
> 
> 时间：2012-04-22T19:43:15.763
> 
> 标签：php, mongodb, lithium

我希望使用 Lithium 框架来构建我的应用程序配置界面，因为我喜欢它的最小方法和以文档存储（即 Mongodb）为中心的模型。

但是，（我知道它还没有完全发布），几乎没有信息、教程或示例可以让您从简单的博客教程继续前进。

我现在要做的是构建一个应用程序，它将向我展示我在 Mongodb 中拥有的集合，然后让我使用我选择的任何集合。我似乎无法弄清楚：

a）我将如何构建一个枚举集合的模型 - 最好根据我的内部命名方案，

b）我如何打破约定模型，以便我可以指定要使用的集合的名称？

我认为有两件事我正在努力回答这两个问题 - 也许是对如何在 MVC 中移动模型超出简单的集合-模型-控制器-视图示例的基本误解，其次，告诉的实际过程mongo 数据源使用什么集合。

任何指针或例子，感激地收到。

克里斯

**更新：：**

所以我想出了如何设置集合 - 作为参考，您可以在 $_meta 数组中设置源，如下所示：

```
protected $_meta = array(
    'source' => '<<collectionName>>'
); 
```

仍然不知道如何使用一个模型来列出我在我的数据库中拥有的所有集合。任何想法如何从哲学和技术的方式做到这一点？

**进一步更新：**

所以感谢下面的评论，我得到了进一步的帮助。至少我现在可以重新表述一下这个问题。我可以像这样定义我的模型：

```
<?php
namespace app\models;
use lithium\data\Model;

class Posts extends \lithium\data\Model{

    protected $_meta = array('source' => false);

    public function testcolls(){
        return (self::connection()->sources());
    }
}
?> 
```

那么在我看来，我可以使用：

```
<?php foreach ($post->testcolls() as $coll): ?>
    <h2><?=$coll ?></h2>
<?php endforeach; ?> 
```

这行得通 - 但是，我真正想做的不是在我的模型中创建一个“testcolls”方法，而是正如 Medhi 下面建议的那样，我需要覆盖 find 方法。我似乎无法弄清楚如何做到这一点以及它需要返回什么。文档对此并不太清楚。

**最终更新**

基于下面的评论和一些实验，我想出了以下方法，可以使用集合作为参数调用 find 。

模型：

```
class Dataqueues extends \lithium\data\Model{

    protected $_meta = array('source' => false);

    public static function find($filter, array $options = array()) {
        if (isset($options['collection'])){
            self::meta('source', $options['collection']);
        }
        return parent::find('all',$options);
    }   
} 
```

控制器：

```
class DataqueuesController extends \lithium\action\Controller {

    public function index() {
        $dataqueues = Dataqueues::find('all',array('limit'=>20,'collection'=>'W501'));
        return compact('dataqueues');
    }
} 
```

最后得到一个返回集合列表的模型也很简单：

```
class Collections extends \lithium\data\Model{

    protected $_meta = array('source' => false);

    public static function find($filter, array $options = array()) {

        return self::connection()->sources();
    }   
} 
```

请注意，控制器不支持选项或过滤器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:31:21.417

没有什么可以阻止您拥有一个`Collections`模型，您可以在其中设置`$_meta['source'] = false`以防止 Lithium 在名为集合的数据库中查找集合。

在这个模型中，你可以调用`YourModel::connection()->sources()`来列出你所有的 Mongo Collections。
sources() 的文档：http: [//li3.me/docs/lithium/data/source/MongoDb::sources()](http://li3.me/docs/lithium/data/source/MongoDb::sources())。基本上它调用`listCollections()`MongoDB 实例[http://php.net/manual/en/mongodb.listcollections.php](http://php.net/manual/en/mongodb.listcollections.php)

您可以覆盖您的 Model::find() 方法以返回集合列表，而不是文档列表，或者将集合作为参数传递`Collections::find('all', array('conditions' => ..., 'collection' => 'foo'))`......或者你想要的任何东西:-)

锂的设计不会对您施加太大压力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:18:50.407

**首先**，Lithium 遵循约定优于配置的方法。

这意味着什么：

配置：'source' => '<< collectionName >>'

约定：将您的模型和集合命名为相同的东西，框架处理其余部分。
IE：“人”集合将具有“人”模型

**其次**，连接到您的数据库：

在 app\bootstrap\connections.php 中配置您的 connections.php 文件。我知道我说的是约定优于配置，但你仍然需要让框架知道数据库在哪里以及登录信息是什么。有关详细信息，请查看 [http://li3.me/docs/manual/quickstart](http://li3.me/docs/manual/quickstart)。以下是相关代码：

```
// MongoDB Connection
Connections::add('default', array('type' =>  'MongoDb', 'database' => 'blog', 'host' => 'localhost')); 
```

**第三**，获取数据
创建一个模型，匹配你的集合名称，然后在你的控制器中，添加这一行：

```
$model = Models::all(); 
```

其中 model 是您存储在集合中的单数名称，Models 是您的模型的名称。**就是这样**。
如果您在此行之后放置一个断点，您将看到您的模型集合。有关更多信息，请参阅[http://li3.me/docs/manual/working-with-data/using-models.wiki](http://li3.me/docs/manual/working-with-data/using-models.wiki)

**最后**，要将它传递给您的视图，只需将这行代码放在控制器的末尾：

```
return compact('model', 'model2', 'model3'); 
```

其中 model 将是您在第三步中刚刚提取的内容。我添加的模型 2 和模型 3 是您将如何传递您提取的任何其他集合的方式。

在您看来，您只需引用 $model 并假设相关字段就在那里。您不必担心放置 getter 或 setter 或其他类似的东西。例如：如果要显示 $model 中的数据：

```
foreach ($model as $aModel) {
    echo $aModel;
} 
```

请参阅访问视图变量： http: [//li3.me/docs/manual/handling-http-requests/views.wiki](http://li3.me/docs/manual/handling-http-requests/views.wiki)

希望这可以帮助。

# php - 超链接排序数据库

> ID：10271464
> 
> 赞同：1
> 
> 时间：2012-04-22T19:43:42.290
> 
> 标签：php, sorting, hyperlink

我想通过单击超链接的列标题进行排序...

是的，如果我将 sql 语句放在 if 条件中，我设法做到了..

例子

```
td> <a style="width:100px;font-family:Arial;font-size:12px;color:white" href="?run=Process">Process</a></td> 
```

php;

```
$run = $_GET['run'];
if($run=="Process")
{
$sql = "select * from audit";
} 
```

但是这里的问题...我想在if条件之前分配sql语句~

当我分配

```
 $sql = "select audit.user,audit.tarikh,activity_ref.activity from audit left join activity_ref on audit.taskID = activity_ref.idactivity_ref 
   where audit.user = '".$_SESSION['USER']."'"; 
```

或者

```
$user = $_POST["searchUser"];

if($user)
{
        $sql = "select audit.user,audit.tarikh,activity_ref.activity from audit left join activity_ref on audit.taskID = activity_ref.idactivity_ref 
       where audit.user = '$user'";
} 
```

if 条件 == 过程不理解 $user value / $_session['User'] value.. 我在开始时为它们分配了一些值。

我整天都在尝试..我想我不太理解这个概念你能帮我吗:(..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:54:32.917

发生这种情况是因为我忘记放这段代码了~

```
 if($_SERVER['QUERY_STRING'])
{

} 
```

应该是这样的

```
 if($_SERVER['QUERY_STRING'])
{
    $run = $_GET['run'];
    if($run=="Process")
     {
        $sql = "select audit.user,audit.tarikh,activity_ref.activity from audit left        join activity_ref on audit.taskID = activity_ref.idactivity_ref 
         where audit.user = '".$_SESSION['USER']."'";

    }
} 
```

# macos - 我的 mac osx 启动的 plist 无法运行

> ID：10271467
> 
> 赞同：1
> 
> 时间：2012-04-22T19:43:51.427
> 
> 标签：macos, plist, sh, launchd

它看起来像加载但在使用launchctl list和使用launchctl start时状态为1......它说没有这样的过程......我把它保存在/Users/IMG/Library/LaunchAgents中。sh 脚本运行良好。日志没有显示任何内容 - 没有创建文件。我对 plist 很陌生，所以请原谅无知。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.IMG.shed</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Users/IMG/2012/Dropbox/Dev_2012/Java/sh_IMG.sh</string>
    </array>
    <key>StandardOutPath</key>
    <string>myjob.log</string>
    <key>StandardErrorPath</key>
    <string>myjob.log</string>
    <key>Debug</key>
    <true/>

    <key>RunAtLoad</key>
    <true/>
    <key>StartInterval</key>
    <integer>60</integer>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:50:27.247

我首先想到的是该进程没有创建标准输出日志文件的权限（尽管我认为个人代理的工作目录的默认值是用户的主目录）。有一个可选的属性键`WorkingDirectory`- 也许尝试设置它以查看是否有任何变化。

*参考*：[Launchd.plist 手册页](https://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man5/launchd.plist.5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:31:00.327

在 XCode 4.5.2 中，在 Product 菜单下，您需要选择 Edit Scheme。您将看到管理方案框出现了几个方案。其中之一称为 Run < *ProjectName* >。单击工作目录旁边的复选框使用自定义工作目录并将其指向您的 plist 所在的路径。

这详细说明了unhillbilly给出的答案。所以感谢 unhillbilly 引导我进入工作目录。

# postgresql - 使用简单模型对 1TB 数据进行报告/分析的数据库

> ID：10271472
> 
> 赞同：3
> 
> 时间：2012-04-22T19:44:15.060
> 
> 标签：postgresql, hadoop, nosql, analytics, business-intelligence

大数据 = 1TB，每年增长 10%。模型很简单。一张有 25 列的表。没有与其他表的连接..

我正在寻找对 25 列的子集进行简单的查询过滤..

我猜想在过滤列上有索引的传统 SQL 存储是必要的。Hadoop 是矫枉过正，没有意义，因为这是一个实时服务。蒙哥？像pentaho这样的双引擎？

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:33:43.320

似乎传统解决方案确实听起来不错，除非您描述的真正简单的模型不会有任何重大变化。

NoSQL 听起来不是 BI / Reporting 的最佳选择。

买个好硬件。花时间进行性能测试并构建所有必需的索引。实施适当的新数据上传策略。根据您的需要和性能测试在 PostgreSQL 中实现表级[分区。](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html)

PS 如果我现在有机会从 ORACLE/DB2 切换，我肯定会选择 PostgreSQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:02:59.570

我建议在这里调查 Infobright——它是基于列的和压缩的，所以你不会存储完整的 TB，有一个开源版本，所以你可以在不被一群销售人员打电话的情况下试用它（但上次我看起来 OSS 版本缺少一些非常有用的东西，所以你最终可能想要一个许可证）。上次我试了一下，它看起来像 MySQL 一样，所以不难集成。当我上次检查它时，它是面向单服务器的，并声称可以在单台服务器上处理高达 50TB 的容量。我*认为*如果你决定朝那个方向前进，Infobright 可以坐在 Pentaho 后面。

infobright 所做的事情是它非常接近无管理员 - 没有手动索引或索引维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:52:17.123

听起来像列存储会有所帮助。取决于您如何处理插入，以及是否必须进行更新。但是，如果您要进行商业化，除了 infobright 之外，然后按矢量方式结帐，它更快且价格相似。

如果您想要免费/开源，请查看 Luciddb - 文档不多，但它非常擅长它的功能！

如果您想要令人难以置信的速度，请查看矢量。我相信它的价格与 infobright 差不多，但要快得多。

# php - 如何通过图像 ID 生成图像路径

> ID：10271476
> 
> 赞同：0
> 
> 时间：2012-04-22T19:45:04.800
> 
> 标签：php, image, uploading

在上传图像之前，系统必须知道上传路径。
图像路径由图像 ID 生成。
例如：图片123456有这个路径 images/123/456
当然图片ID = 最后插入的图片ID + 1
如何获取最后上传图片的ID（数据存储在数据库中）

我可以做
`select max(image_id) from images`
或
`select image_id FROM images order by image_id desc limit 1`

但是每次某些用户想要上传图像时，它们似乎都需要做很多工作。
是否有一些更简单的解决方案来获取最后一个 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:06:30.470

您需要通过几个步骤来完成。

1.  用户上传图片
2.  你在数据库中插入一个骨架记录，所以你可以得到这个新记录的 ID
3.  使用这个新 ID 处理/移动上传的文件
4.  更新骨架记录以“激活”它

您不能在上传之前执行此操作，因为 PHP 直到上传完成后才会开始执行。

为了最大程度的安全，您可以在事务中执行数据库操作。如果上传有任何问题（错误的文件类型、上传失败、无法处理文件等），您只需回滚事务并撤消所有操作。

# heroku - VPS 对我来说够用吗？

> ID：10271478
> 
> 赞同：0
> 
> 时间：2012-04-22T19:45:15.967
> 
> 标签：heroku, hosting, vps, appharbor, vds

我有 3 个 ASP.NET 网站和 3 个 Ruby on Rails 网站。我计划将它们托管在 VPS 主机上。假设他们每个人每天有 1000 人出席。

现在我对 VPS 托管犹豫不决。我可以并排托管它们（ASP.NET 网站和 3 个 Ruby on Rails 网站）吗？或者我应该使用和购买 2 个不同的主机：第一个用于 ASP.NET 网站，第二个用于 RoR 网站？

我选择多大功率的 VPS 来托管它们？大约需要多少钱？

我计划每月支付不超过 25 美元的费用。如果我使用 heroku 和 appharbor，他们会托管所有这些（3 和 3）吗？费用是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:19:27.963

我认为用这笔钱你可以拥有 2 个 Amazon EC2 实例，运行这些应用程序应该没问题，而且你可以在第一年免费拥有一个。

但是有了 heroku 和 appharbor，也许你几乎可以免费获得它。两者（不确定 appharbor）都为每个应用程序免费提供 1 个实例，因此这对您的应用程序来说应该没问题。如果需要，您应该只需要为 DB 和 EC2 中可以免费拥有的其他附加组件付费，但会花费一些内存。

所以你必须把所有关于你的应用程序的事情都放在桌面上，因为 PaaS 不是正常的托管，成本取决于你的应用程序需要什么。所以你看看你的应用程序是否需要缓存服务、数据库大小和后台进程？...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:12:01.330

我坚信 1 个 VPS 实例足以处理 5 到 6 个网站，每个网站每天有 1000 名访问者。关于电源，1 GB RAM 或 2 GB RAM windows VPS 对于这些站点来说应该足够了。

我知道 Windows VPS 可以处理 ASP.Net 网站，但我不确定 Ruby on Rails。

我从未听说过“heroku 和 appharbor”，所以对他们没有任何建议。

# python - 如何执行两个列表的元素乘法？

> ID：10271484
> 
> 赞同：168
> 
> 时间：2012-04-22T19:45:55.623
> 
> 标签：python, list, multiplication, elementwise-operations

我想执行元素乘法，在 Python 中将两个列表乘以值，就像我们可以在 Matlab 中那样。

这就是我在 Matlab 中的做法。

```
a = [1,2,3,4]
b = [2,3,4,5]
a .* b = [2, 6, 12, 20] 
```

对于from和from的每种组合`x * y`，列表推导式将给出 16 个列表条目。不确定如何映射这个。`x``a``y``b`

如果有人对为什么感兴趣，我有一个数据集，想将它乘以`Numpy.linspace(1.0, 0.5, num=len(dataset)) =)`.

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2012-04-22T19:48:34.507

使用与`zip()`: 混合的列表理解。

```
[a*b for a,b in zip(lista,listb)] 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2012-04-22T19:47:43.690

由于您已经在使用，因此将数据存储在数组而不是列表`numpy`中是有意义的。`numpy`完成此操作后，您将免费获得诸如元素产品之类的东西：

```
In [1]: import numpy as np

In [2]: a = np.array([1,2,3,4])

In [3]: b = np.array([2,3,4,5])

In [4]: a * b
Out[4]: array([ 2,  6, 12, 20]) 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-11-14T16:55:15.740

使用 np.multiply(a,b)：

```
import numpy as np
a = [1,2,3,4]
b = [2,3,4,5]
np.multiply(a,b) 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-03-07T05:19:03.803

您可以尝试在循环中将每个元素相乘。这样做的捷径是

```
ab = [a[i]*b[i] for i in range(len(a))] 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-11-20T21:56:53.670

还有一个答案：

`-1`... 需要导入
`+1`... 非常易读

```
import operator
a = [1,2,3,4]
b = [10,11,12,13]

list(map(operator.mul, a, b)) 
```

输出 [10, 22, 36, 52]

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-03-02T12:32:28.087

相当直观的方法：

```
a = [1,2,3,4]
b = [2,3,4,5]
ab = []                        #Create empty list
for i in range(0, len(a)):
     ab.append(a[i]*b[i])      #Adds each element to the list 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2016-08-04T05:31:42.713

你可以使用乘法`lambda`

```
foo=[1,2,3,4]
bar=[1,2,5,55]
l=map(lambda x,y:x*y,foo,bar) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-08-21T15:09:18.333

对于大型列表，我们可以使用迭代方式：

```
product_iter_object = itertools.imap(operator.mul, [1,2,3,4], [2,3,4,5]) 
```

`product_iter_object.next()`给出输出列表中的每个元素.

输出将是两个输入列表中较短者的长度。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-12-23T15:42:54.740

创建一个数组；将每个列表乘以数组；将数组转换为列表

```
import numpy as np

a = [1,2,3,4]
b = [2,3,4,5]

c = (np.ones(len(a))*a*b).tolist()

[2.0, 6.0, 12.0, 20.0] 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-01-13T01:59:29.307

该`map`功能在这里非常有用。使用`map`我们可以将任何函数应用于迭代的每个元素。

Python 3.x

```
>>> def my_mul(x,y):
...     return x*y
...
>>> a = [1,2,3,4]
>>> b = [2,3,4,5]
>>>
>>> list(map(my_mul,a,b))
[2, 6, 12, 20]
>>> 
```

当然：

```
map(f, iterable) 
```

相当于

```
[f(x) for x in iterable] 
```

所以我们可以通过以下方式获得我们的解决方案：

```
>>> [my_mul(x,y) for x, y in zip(a,b)]
[2, 6, 12, 20]
>>> 
```

在 Python 2.x`map()`中意味着：将函数应用于可迭代的每个元素并构造一个新列表。在 Python 3.x 中，`map`构造迭代器而不是列表。

而不是`my_mul`我们可以使用 `mul`运算符

蟒蛇 2.7

```
>>>from operator import mul # import mul operator
>>>a = [1,2,3,4]
>>>b = [2,3,4,5]
>>>map(mul,a,b)
[2, 6, 12, 20]
>>> 
```

Python 3.5+

```
>>> from operator import mul
>>> a = [1,2,3,4]
>>> b = [2,3,4,5]
>>> [*map(mul,a,b)]
[2, 6, 12, 20]
>>> 
```

请注意，由于`map()`构造了一个迭代器，我们使用`*`可迭代解包运算符来获取一个列表。解包方法比`list`构造函数快一点：

```
>>> list(map(mul,a,b))
[2, 6, 12, 20]
>>> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-08-04T07:19:41.557

可以使用枚举。

```
a = [1, 2, 3, 4]
b = [2, 3, 4, 5]

ab = [val * b[i] for i, val in enumerate(a)] 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-11-08T11:09:19.687

gahooa 的答案对于标题中的问题是正确的，但是如果列表已经是 numpy 格式***或***大于 10，它会更快（3 个数量级）并且更具可读性，按照建议进行简单的 numpy 乘法NPE。我得到这些时间：

```
0.0049ms -> N = 4, a = [i for i in range(N)], c = [a*b for a,b in zip(a, b)]
0.0075ms -> N = 4, a = [i for i in range(N)], c = a * b
0.0167ms -> N = 4, a = np.arange(N), c = [a*b for a,b in zip(a, b)]
0.0013ms -> N = 4, a = np.arange(N), c = a * b
0.0171ms -> N = 40, a = [i for i in range(N)], c = [a*b for a,b in zip(a, b)]
0.0095ms -> N = 40, a = [i for i in range(N)], c = a * b
0.1077ms -> N = 40, a = np.arange(N), c = [a*b for a,b in zip(a, b)]
0.0013ms -> N = 40, a = np.arange(N), c = a * b
0.1485ms -> N = 400, a = [i for i in range(N)], c = [a*b for a,b in zip(a, b)]
0.0397ms -> N = 400, a = [i for i in range(N)], c = a * b
1.0348ms -> N = 400, a = np.arange(N), c = [a*b for a,b in zip(a, b)]
0.0020ms -> N = 400, a = np.arange(N), c = a * b 
```

即来自以下测试程序。

```
import timeit

init = ['''
import numpy as np
N = {}
a = {}
b = np.linspace(0.0, 0.5, len(a))
'''.format(i, j) for i in [4, 40, 400] 
                  for j in ['[i for i in range(N)]', 'np.arange(N)']]

func = ['''c = [a*b for a,b in zip(a, b)]''',
'''c = a * b''']

for i in init:
  for f in func:
    lines = i.split('\n')
    print('{:6.4f}ms -> {}, {}, {}'.format(
           timeit.timeit(f, setup=i, number=1000), lines[2], lines[3], f)) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-05-02T19:02:10.770

维护列表类型，并在一行中完成（当然，在将 numpy 导入为 np 之后）：

```
list(np.array([1,2,3,4]) * np.array([2,3,4,5])) 
```

或者

```
list(np.array(a) * np.array(b)) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-20T18:21:16.333

您可以将其用于相同长度的列表

```
def lstsum(a, b):
    c=0
    pos = 0
for element in a:
   c+= element*b[pos]
   pos+=1
return c 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-12-24T14:05:43.367

```
import ast,sys
input_str = sys.stdin.read()

input_list = ast.literal_eval(input_str)

list_1 = input_list[0]

list_2 = input_list[1]

import numpy as np

array_1 = np.array(list_1)

array_2 = np.array(list_2)

array_3 = array_1*array_2

print(list(array_3)) 
```

# php - cURL - 需要在不同的脚本中使用相同的会话 cookie

> ID：10271485
> 
> 赞同：2
> 
> 时间：2012-04-22T19:46:08.247
> 
> 标签：php, curl

我的 cURL 会话每次运行时都会生成一个新的 cookie。如何将相同的 cookie 用于不同的脚本？

我的设置：

```
curl_setopt($curl, CURLOPT_COOKIESESSION, false);
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefilename);
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefilename); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:56:29.090

您是否尝试过使用 True？
`curl_setopt($curl, CURLOPT_COOKIESESSION, true);`
您是否确认 cookie 正在写入 $cookiefilename？
您是否尝试在 cookie 的持续时间内“重新运行”脚本？

您正在尝试重复使用 cookie？

# permissions - 打开文件时 LWJGL 小程序崩溃

> ID：10271495
> 
> 赞同：2
> 
> 时间：2012-04-22T19:47:12.720
> 
> 标签：permissions, jar, applet, lwjgl, jar-signing

我正在使用 LWJGL 制作一个 java 应用程序。将项目导出到 jar 并对其进行签名时，当我尝试打开这样的文件时它会崩溃：

```
 File file;
    try {
        file = new File(getClass().getResource(map_filename).toURI());
    } catch (URISyntaxException e) {
        e.printStackTrace();
        return null;
    } 
```

您可以在此处查看小程序： [http](http://www.cs.tau.ac.il/~vladis2/LD23.html) ://www.cs.tau.ac.il/~vladis2/LD23.html 单击播放按钮后它会立即崩溃。整个代码在这里： [http](http://www.cs.tau.ac.il/~vladis2/LD23.zip) ://www.cs.tau.ac.il/~vladis2/LD23.zip也许你可以找到这个错误，即使我很确定它是关于前提的，但我确实签署了它工作正常，直到我尝试从 jar 中打开文件。

如果你想自己编译它，你需要外部： [http ://www.cs.tau.ac.il/~vladis2/lwjgl.rar](http://www.cs.tau.ac.il/~vladis2/lwjgl.rar)

那么是什么导致小程序崩溃呢？

请尽快提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:12:52.200

您不能使用 File 从 Jar 中读取文件，您需要使用输入流，因此失败。

# c++ - Opengl 半球内表面

> ID：10271501
> 
> 赞同：-1
> 
> 时间：2012-04-22T19:48:01.993
> 
> 标签：c++, opengl, geometry

我想尝试创建一个半球体。

这是我的代码

```
void drawHalfSphere(int scaley, int scalex, GLfloat r) {
int i, j;
GLfloat v[scalex*scaley][3];

for (i=0; i<scalex; ++i) {
 for (j=0; j<scaley; ++j) {
    v[i*scaley+j][0]=r*cos(j*2*M_PI/scaley)*cos(i*M_PI/(2*scalex));
    v[i*scaley+j][1]=r*sin(i*M_PI/(2*scalex));
    v[i*scaley+j][2]=r*sin(j*2*M_PI/scaley)*cos(i*M_PI/(2*scalex));
 }
}

glBegin(GL_QUADS);
for (i=0; i<scalex-1; ++i) {
  for (j=0; j<scaley; ++j) {
    glVertex3fv(v[i*scaley+j]);
    glVertex3fv(v[i*scaley+(j+1)%scaley]);
    glVertex3fv(v[(i+1)*scaley+(j+1)%scaley]);
    glVertex3fv(v[(i+1)*scaley+j]);
  }
}
glEnd();
}

void RenderScene() 
{
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  glLoadIdentity (); 

  glRotatef(fRotation,1,0,0);
  glColor3f(1,0,0);
  drawHalfSphere(25.0,25.0,0.5);
  glutSwapBuffers();
} 
```

当我旋转半球时，有一个点，球的各个部分消失了。它就像一堵墙，在我旋转球体的后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:06:11.853

您是否尝试过，在初始化期间：

```
glCullFace(GL_FRONT_AND_BACK); 
```

或者你的远方飞机太近了：

```
 void gluPerspective(...,GLdouble zFar); 
```

# javascript - 改变样式不透明度的 jQuery/JavaScript 函数

> ID：10271506
> 
> 赞同：2
> 
> 时间：2012-04-22T19:48:53.783
> 
> 标签：javascript, jquery, html, function, styles

我如何编写一个函数，onmouseover；

*   获取此 div 中的所有“img”标签
*   更改图像的样式以将不透明度降低到 0.5

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:51:01.267

```
$('.whatever').on('mouseenter', function() {
    $('img', this).css('opacity', '0.5');
}).on('mouseleave', function() {
    $('img', this).css('opacity', '1');
}); 
```

但是，您可以使用纯 CSS 来做同样的事情：

```
.whatever:hover img { opacity: 0.5; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:50:59.763

这是一种可能性：

```
$("#yourDiv").bind("mouseover", function(){
    $(this).find("img").css("opacity", "0.5");
}); 
```

# android - Android 上 mTextEditorWatcher 的问题

> ID：10271507
> 
> 赞同：3
> 
> 时间：2012-04-22T19:48:54.970
> 
> 标签：android

对不起之前的“为什么Android这么乱？” 问题。我只是被这里的小问题弄得不知所措。我正在尝试制作一个字符。EditText 上的计数器：

```
final TextWatcher mTextEditorWatcher = new TextWatcher() {
        EditText edit_text = (EditText) findViewById(R.id.editText1);
        TextView text_view = (EditText) findViewById(R.id.textView1);

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    };

    public void onTextChanged(CharSequence s, int start, int before, int count) {
       //This sets a textview to the current length
       text_view.setText(String.valueOf(s.length()));
    };

    //public void afterTextChanged1(Editable s) {
    //};

    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub

    };
}; 
```

然后它崩溃了。这就是为什么我之前实际上是在询问 EditText/TextView 声明的原因。我不明白这段代码有什么问题？

LogCat 日志：

```
04-23 00:57:46.029: E/AndroidRuntime(347): Uncaught handler: thread main exiting due to uncaught exception
04-23 00:57:46.109: E/AndroidRuntime(347): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.dtype.writer/com.dtype.writer.DTypeActivity}: java.lang.NullPointerException
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.os.Looper.loop(Looper.java:123)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-23 00:57:46.109: E/AndroidRuntime(347):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 00:57:46.109: E/AndroidRuntime(347):  at java.lang.reflect.Method.invoke(Method.java:521)
04-23 00:57:46.109: E/AndroidRuntime(347):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-23 00:57:46.109: E/AndroidRuntime(347):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-23 00:57:46.109: E/AndroidRuntime(347):  at dalvik.system.NativeStart.main(Native Method)
04-23 00:57:46.109: E/AndroidRuntime(347): Caused by: java.lang.NullPointerException
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.Activity.findViewById(Activity.java:1612)
04-23 00:57:46.109: E/AndroidRuntime(347):  at com.dtype.writer.DTypeActivity$1.<init>(DTypeActivity.java:29)
04-23 00:57:46.109: E/AndroidRuntime(347):  at com.dtype.writer.DTypeActivity.<init>(DTypeActivity.java:28)
04-23 00:57:46.109: E/AndroidRuntime(347):  at java.lang.Class.newInstanceImpl(Native Method)
04-23 00:57:46.109: E/AndroidRuntime(347):  at java.lang.Class.newInstance(Class.java:1479)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-23 00:57:46.109: E/AndroidRuntime(347):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
04-23 00:57:46.109: E/AndroidRuntime(347):  ... 11 more
04-23 00:57:46.128: E/dalvikvm(347): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

[这个解决方案是从这里](https://stackoverflow.com/a/4455667/1349940)借来的，Cameron Ketcham 建议使用`mEditText.addTextChangedListener(mTextEditorWatcher);`将 TextWatcher 设置为 EditText。这可能是我问题的核心吗？

2012 年 4 月 24 日更新：仍然没有找到任何可行的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T19:22:15.993

我认为那是因为你放了：

> mTextView = (EditText) findViewById(R.id.textView1);

当它必须是：

> mTextView = ( **TextView** ) findViewById(R.id.textView1);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:12:50.790

应该以这种方式工作。

```
private TextWatcher mTextEditorWatcher;
private EditText mEditText; 
private TextView mTextView;

public void onCreate() {
    mEditText = (EditText) findViewById(R.id.editText1);
    mTextView = (EditText) findViewById(R.id.textView1);
    mTextEditorWatcher = new TextWatcher() {

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    };

    public void onTextChanged(CharSequence s, int start, int before, int count) {
       //This sets a textview to the current length
       mTextView.setText(String.valueOf(s.length()));
    }

    //public void afterTextChanged1(Editable s) {
    //}

    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub

    }
  };
  mEditText.addTextChangedListener(mTextEditorWatcher);
} 
```

# bash - 如何 wget/curl 动态构建的 zip 存档？

> ID：10271508
> 
> 赞同：1
> 
> 时间：2012-04-22T19:49:02.983
> 
> 标签：bash, curl, wget

我正在尝试创建一个脚本来下载[动态构建的](https://github.com/verekia/initializr) [Initializr](http://initializr.com) zip 存档。就像是：

```
wget http://www.initializr.com/builder?mode=less&boot-hero&h5bp-htaccess&h5bp-nginx&h5bp-webconfig&h5bp-chromeframe&h5bp-analytics&h5bp-build&h5bp-iecond&h5bp-favicon&h5bp-appletouchicons&h5bp-scripts&h5bp-robots&h5bp-humans&h5bp-404&h5bp-adobecrossdomain&jquery&modernizrrespond&boot-css&boot-scripts 
```

该网址[在浏览器](http://www.initializr.com/builder?mode=less&boot-hero&h5bp-htaccess&h5bp-nginx&h5bp-webconfig&h5bp-chromeframe&h5bp-analytics&h5bp-build&h5bp-iecond&h5bp-favicon&h5bp-appletouchicons&h5bp-scripts&h5bp-robots&h5bp-humans&h5bp-404&h5bp-adobecrossdomain&jquery&modernizrrespond&boot-css&boot-scripts)中有效，但在脚本中无效。在脚本中，它会下载一小部分存档，并将其保存为`builder?mode=less`而不是`initializr-less-verekia-3.0.zip`.

`builder?mode=less`实际上解压缩，所以它只是一个错误命名的 zip 文件。但它可能丢失了它应该拥有的 80% 的文件。

有人知道如何编写脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:51:27.363

url 包含 shell 元字符，因此您必须引用整个 url：

```
wget 'your...url...here' 
```

如果 initializr 网站没有将正确的文件名放入 HTTP 响应标头中，wget 将根据所请求的 url 使用最佳猜测版本。您可以强制它写入特定的文件名

```
wget 'your url here' -O name_of_file.zip 
```

# jquery - 使用 ajax 调用向 web 方法发送和接收输入文本

> ID：10271513
> 
> 赞同：0
> 
> 时间：2012-04-22T19:49:38.780
> 
> 标签：jquery, asp.net, ajax, vb.net, webmethod

我正在尝试将简单的 ajax 脚本用于 webmethod，如下所示：

```
 <script type="text/javascript">
        $(document).ready(function () {
         $("#btnretreive").click(function () {
            $.ajax({
                 type: "POST",
                 url: "Default.aspx/Gettext",
                 data: {inputtext: $('#sometext').val()},
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",
                 success: function(msg) {
                     $("#Result").text(msg.d);
                   }
             });
         });
     });
 </script> 
```

这是我的网络方法：

```
 <WebMethod()> _
    Public Shared Function Gettext(ByVal inputtext As String) As String
           Return inputtext
    End Function 
```

这是我的 HTML 部分：

```
<input id="sometext" type="text" />
<input id="btnretreive" type="button" value="button" />
<div id="Result"></div> 
```

现在我的问题是我无法发送输入文本并接收它。谁能指出我在这里做的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:00:17.303

您需要在 Web 方法中使用 ScriptMethod 属性才能返回 Json。

```
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.script.services.scriptmethodattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.services.scriptmethodattribute.aspx)

**注意：**您也必须保留 WebMethod 属性，如 MSDN 中所示。

此外，您需要将传递给 WebMethod 的 Json 对象转换为字符串，例如：

```
data: JSON.stringify({inputtext: $('#sometext').val()}), 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:53:53.690

由于您将 contentType 指定为应用程序 JSON jQuery 可能将数据发布为 json，asp.net 无法识别，因此不会接收参数值，webmethods 在查询字符串中接收参数，尝试删除 contentType，只留下 dataType，还尝试删除 'POST ' 作为类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:59:02.180

从记忆中，我相信数据部分需要在一个字符串中。所以这条线将是

```
data: '{inputtext : ' + $('#sometext').val() + '}', 
```

# function - 在 Lua 中设置函数原型

> ID：10271514
> 
> 赞同：4
> 
> 时间：2012-04-22T19:49:39.873
> 
> 标签：function, lua, coronasdk

一个简单的问题：如何为尚未实现的功能设置原型？

我只是想这样做，因为我指的是一个还不存在的函数。在 C 中，我们会做这样的事情：

```
int foo(int bar);

int myint = foo(1);

int foo(int bar)
{
     return bar;
} 
```

我如何在 Lua（使用电晕）中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T20:56:42.967

你不能。琥珀的评论是正确的。

Lua 没有类型签名或函数原型的概念。

的类型`foo`是它包含的对象的类型，它是动态的，在运行时会发生变化。它可能`function`在某一瞬间发生，`string`或者`integer`在下一瞬间发生。

*从概念上讲*，Lua 没有像 C 那样的编译步骤。当你说“运行这段代码”时，它开始从顶部开始执行指令，然后向下运行。在*实践*中，Lua 在执行之前首先将你的代码编译成字节码，但是编译器不会对这样的事情犹豫不决：

```
greet()

function greet()
    print('Hello.')
end 
```

因为其中包含的值`greet`是在运行时确定的。只有当你在运行时实际尝试*调用*（即像函数一样调用）中的值`greet`时，Lua 才会发现它不包含可调用值（函数或表/用户数据，其元表包含一个`__call`成员）你会得到一个运行时错误：“尝试调用全局'greet'（一个零值）”。其中“nil value”是`greet`尝试调用时包含的任何值。在我们的例子中，它是`nil`.

因此，您必须确保`foo`在尝试调用之前调用了创建函数并将其分配给的代码`foo`。

* * *

如果您认识到这一点可能会有所帮助：

```
local myint = foo(1)

function foo(bar)
     return bar
end 
```

是语法糖吗：

```
local myint = foo(1)

foo = function(bar)
     return bar
end 
```

`foo`正在被分配一个函数值。这必须在您尝试调用该函数之前发生。

* * *

这个问题最常见的解决办法就是把文件的函数当作“编译时间”，即：在文件执行时声明你所有的常量数据和函数，准备好在“执行时间”使用。然后，调用一个`main`函数开始“执行时间”。

例如：

```
function main()
    greet()
end

function greet()
    print('Hello.')
end

main() 
```

正如`greet`在 中声明的那样`_G`，`main`可以访问它。

# android - 如何在我的 Android 应用中调整音频质量

> ID：10271521
> 
> 赞同：0
> 
> 时间：2012-04-22T19:50:17.507
> 
> 标签：android, android-mediarecorder

我有一个录制音频的应用程序，当我将它与内置的录音机应用程序进行比较时，质量很差。

我尝试下载其他一些录音机，它们的音频质量确实比我的应用程序更好。

如何为我的应用程序获得最高质量的音频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:18:54.430

假设录音环境是合理的（即没有明显的背景噪音），有两个主要因素会影响音频的质量：

*   录制音频的格式
*   如果有的话，你做了什么后处理

对于录制格式，如果您想要最高质量，请使用无损格式，例如线性 PCM，而不是有损格式，例如 MP3。如果使用`android.media.AudioRecord.AudioRecord`，则可以在构造函数中指定录制声音数据的位深度和采样率：

`AudioRecord(int audioSource, int sampleRateInHz, int channelConfig, int audioFormat, int bufferSizeInBytes)`

一般来说，采样率越高质量越好。位深度由`audioFormat`参数控制，您可以指定`AudioFormat.ENCODING_PCM_8BIT`或`AudioFormat.ENCODING_PCM_16BIT`。16 位通常质量更高，我想大多数设备都会处理这个问题。最大采样率会因设备而异，但您应该能够获得 44.1kHz（16bit @ 44.1kHz 是标准 CD 格式），因为在所有设备上都“保证”了该采样率（请参阅[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html#AudioRecord%28int,%20int,%20int,%20int,%20int%29)）

在后处理方面，您可以对获得的数字音频样本执行回声消除、降噪、音频压缩、过滤等，但这对于获得合理质量的音频应该不是必需的。

如果您将录制的音频质量与其他应用程序的音频质量进行比较，则应首先确保以与您比较的应用程序相同的格式录制/保存音频。那么任何差异都可能出现在后处理阶段。

# ruby-on-rails - rails中的render方法输出错误的脚本标签

> ID：10271523
> 
> 赞同：0
> 
> 时间：2012-04-22T19:50:29.567
> 
> 标签：ruby-on-rails, haml

所以我在视图中的haml文件中有这条线

%script {:charset => "utf-8", :src => "http://widgets.twimg.com/j/2/widget.js"}

但是当我加载它并检查 chrome 中的 javascript 控制台时，它会输出它。

{:charset => "utf-8", :src => "http://widgets.twimg.com/j/2/widget.js"}

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:53:52.560

后面有一个空格`%script`。删除它，它会正常工作：

`%script{:charset => "utf-8", :src => "http://widgets.twimg.com/j/2/widget.js"}`

# codeigniter-2 - Codeigniter 和 MVC 学习

> ID：10271526
> 
> 赞同：0
> 
> 时间：2012-04-22T19:50:54.067
> 
> 标签：codeigniter-2

我一直在研究 codeigniter 和 MVC 架构，但这让我很困惑。我只需要一个链接或地方，我可以轻松地学习它并且有很多实践

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:58:44.663

试试这些：

[PHP & 代码点火器](https://stackoverflow.com/questions/3732433/php-and-codeigniter-in-action)

[CodeIgniter 用户指南](http://codeigniter.com/user_guide/overview/mvc.html)

[Codeigniter MVC 维基](http://codeigniter.com/wiki/MVC)

[Codeigniter 的 MVC](http://www.jimohalloran.com/2007/09/06/how-i-use-codeigniters-mvc/)

希望这些帮助！

# android - Android渐变颜色 - 结果不正确

> ID：10271531
> 
> 赞同：2
> 
> 时间：2012-04-22T19:51:04.467
> 
> 标签：android, colors, gradient

我想创建一个重复图像的背景，并在它上面添加一个从白色到透明的渐变。因此，它应该在视图顶部以全白开始，然后在底部以完全透明结束，背景图像完全可见。我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <bitmap 
        android:dither="true" 
        android:src="@drawable/bg" 
        android:tileMode="repeat" >
    </bitmap>
</item>
<item>
    <shape>
        <gradient 
            android:angle="90" 
            android:endColor="#ffffffff" 
            android:startColor="#00000000" />
    </shape>
</item> 
```

问题是我没有得到从白色（*#ffffff*）到透明的渐变，而是从灰色到透明的渐变。使用颜色选择器，我得到了*endColor*的代码，它是#dfdfdf。

为什么会出错？谢谢！

截图：![在此处输入图像描述](../Images/5a275297bdb2a1e70d27dd5b8451593d.png)

*规格*

我以一种风格使用此背景：

```
<resources>
<style name="Theme.NoBackground" parent="android:Theme">
    <item name="android:windowBackground">@drawable/background</item>"
</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T20:49:00.170

您的渐变从透明黑色到不透明白色。

你不需要这个吗？

```
android:endColor="#ffffffff" 
android:startColor="#00ffffff" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:33:41.393

我遇到了与灰色阴影相同的问题（使用黑色以外的渐变时）。我解决它的方法是更改​​要用于渐变的颜色的 alpha。

```
public static int alpha(int color, int alpha)
{
    return Color.argb(alpha,
            Color.red(color),
            Color.green(color),
            Color.blue(color));
} 
```

您还可以通过多次将 alpha 为 0 的颜色传递给数组来减小渐变的大小

```
colour = alpha(color, 0XFF);
int gradientColor = alpha(color, 0X00); 
GradientDrawable shadow = new GradientDrawable(Orientation.TOP_BOTTOM,
    new int[]{color, gradientColor, gradientColor, gradientColor}); 
```

# session - CakePHP 2.0 Auth + FB 登录集成会话丢失问题

> ID：10271533
> 
> 赞同：1
> 
> 时间：2012-04-22T19:51:11.023
> 
> 标签：session, facebook-graph-api, cakephp-2.0, authentication

在将 FB 登录集成到应用程序时，我遇到了会话丢失问题。FB 登录成功，当用户重定向到我的应用程序时，它会创建身份验证会话。

$this->Auth->login($user['User']); $this->redirect('/dashboard');

重定向后它会丢失会话并将用户重定向到登录页面。

我只是在阅读一些文章，并尝试解决方案，但没有任何帮助。

谢谢，维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T06:41:32.813

对于 Facebook 登录，成功验证后，您需要在 Auth 会话中附加/写入用户详细信息，如下所示，

$this->Auth->user($this->request->data);

# json - 发布引用类型的对象

> ID：10271536
> 
> 赞同：3
> 
> 时间：2012-04-22T19:51:33.283
> 
> 标签：json, facebook-c#-sdk, facebook-php-sdk, facebook-opengraph, facebook-android-sdk

这个问题我已经有一段时间了，我也看到其他人也有这个问题。它必须处理发布您在 Open Graph 中创建的自定义对象以与您的应用程序一起发布。我主要在所有平台上都遇到这个问题，但现在假设我使用的是 Android。如果有人在 C# 或 IOS 甚至 PHP 中完成了此操作，请发布您的答案。

一个例子：

我有一个向 Facebook 发布餐点的对象。假设它的属性如下。

```
mealName = "Lunch"
mealType = "Vegetarian"
mealLocation = "Somewheresville, OH" 
```

现在我的 Open Graph 中有另一个对象，它叫做 DailyFood。它具有如下属性。

```
day = "12/01/2012"
meal = "MyCustomMeal" // This references a meal object 
```

现在，当我去发帖时，我尝试在 Java 中执行以下操作。

```
//Build Meal
JSONObject mealData = new JSONObject();
mealData.put("mealName", "Lunch");
mealData.put("mealType", "Vegetarian");
mealData.put("mealLocation", "Somewheresville, OH");

Bundle params = new Bundle();
params.putString("day", "12/01/2012");
params.putString("meal", mealData.ToString());
AsyncFacebookRunner request = new AsyncFacebookRunner(facebook); 
```

这是我生成以下错误代码的地方。

```
{"error":
{"message":"(#3503) is an invalid value for property 
\"meal\" with type \"Reference\"","type":"OAuthException","code":3503}} 
```

现在我知道它说 OAuthException 但我可以使用这个应用程序将提要发布到 Facebook 就好了。如果其他人在任何平台上遇到此错误并找到解决方案，请在此处发布。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:00:28.487

所以这个问题的答案是，您实际上需要一个可供您的应用程序使用的网站，以便能够参考其在 Facebook 上发布的内容。至少在文档中，我无法找出这是在哪里记录的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:15:37.300

根据这个官方[视频](https://www.facebook.com/photo.php?v=10151871729105582)，无论我们在哪个平台上使用 android、ios 等，您都必须拥有 web 应用程序才能使用开放图发布动作

因为它仅从 web url 中获取元标记和属性，这作为参考。

# java - 如何在 Java 中创建锯齿状二维数组？

> ID：10271540
> 
> 赞同：9
> 
> 时间：2012-04-22T19:52:33.643
> 
> 标签：java, arrays, matrix, multidimensional-array, jagged-arrays

我们的家庭作业要求我们使用锯齿状数组来存储二维布尔矩阵的值。是否有用于锯齿状数组的内置 java 类，还是我必须使用`Array`of手动创建它`ArrayLists`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T19:54:44.390

在 Java 中，二维数组是一维数组对象的数组。每个一维数组可以有不同的长度，这意味着你可以得到开箱即用的锯齿状数组。

例如，以下是完全有效的 Java，并打印出`3 5 3 4`：

```
 int x[][] = {{0,1,2,3,4},{0,1,2},{0,1,2,3}};
    System.out.println(x.length);
    System.out.println(x[0].length);
    System.out.println(x[1].length);
    System.out.println(x[2].length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:21:51.380

实际上听起来您可能想要一个稀疏矩阵实现。如果您必须修改矩阵，则可以从中获得更好的性能。数组复制操作非常昂贵。[Java中的稀疏矩阵/数组](https://stackoverflow.com/questions/390181/sparse-matrices-arrays-in-java)

# java - 比较 B 和 C、D 和 A 的字符串返回 true

> ID：10271543
> 
> 赞同：0
> 
> 时间：2012-04-22T19:53:19.813
> 
> 标签：java, graph-algorithm

嘿，我现在在我的程序的最后润色中，我遇到了最奇怪的错误，基本上我正在比较两个都包含两个字符串的对象，所以我正在比较字符串的所有组合以查看对象是否相关通过一个共同的字符串。

它是用于 kruskals 循环检查器的，所以它比这更复杂一点，但这就是这个错误的基础，我添加了一些手动 system.out 调试，它告诉我最奇怪的事情，例如这是它的基础，它只是将 label1 与 label1 进行比较，但会重复 1 1 1 2 2 1 2 2

```
private static ArrayList<Graph> caseForConnection(
        Connection consideredConnection, ArrayList<Graph> subTrees)
        throws Exception {
    ArrayList<Graph> ret = new ArrayList<Graph>();
    System.out.println("Considering connection " +consideredConnection.getSaveDetails()[1] +consideredConnection.getSaveDetails()[2] + "  "+consideredConnection.getSaveDetails()[3]);
    String label1 = consideredConnection.getNode(1).getLabel();
    String label2 = consideredConnection.getNode(2).getLabel();
    for (Graph x : subTrees) {
        for (Connection c : x.getConnectionList()) {
            System.out.println("Comparing to connection "+  c.getSaveDetails()[1] +c.getSaveDetails()[2] +"  " +c.getSaveDetails()[3]);
            if (c.getNode(1)
                    .getLabel()
                    .equalsIgnoreCase(label1)) {
                if (ret.contains(x)) {
                    System.out.print(("Found " + c.getNode(1)
                            .getLabel() +" is the same as " + label1+ " And this is twice"));
                    throw new Exception("Cycle Found");
                }
                System.out.print(("Found " + c.getNode(1)
                        .getLabel() +" is the same as " + label1));
                ret.add(x);
            } else if (c
                    .getNode(1)
                    .getLabel()
                    .equalsIgnoreCase(label2)) {
                if (ret.contains(x)) {
                    System.out.print(("Found " + c.getNode(1)
                            .getLabel() +" is the same as " + label1+ " And this is twice"));
                    throw new Exception("Cycle Found");
                }
                System.out.print(("Found " + c.getNode(1)
                        .getLabel() +" is the same as " + label2));
                ret.add(x);
            }
            if (c.getNode(2)
                    .getLabel()
                    .equalsIgnoreCase(label1)) {
                if (ret.contains(x)) {
                    System.out.print(("Found " + c.getNode(1)
                            .getLabel() +" is the same as " + label1+ " And this is twice"));
                    throw new Exception("Cycle Found");
                }
                System.out.print(("Found " + c.getNode(2)
                        .getLabel() +" is the same as " + label1));
                ret.add(x);
            } else if (c
                    .getNode(2)
                    .getLabel()
                    .equalsIgnoreCase(label2)) {
                if (ret.contains(x)) {
                    System.out.print(("Found " + c.getNode(1)
                            .getLabel() +" is the same as " + label1+ " And this is twice"));
                    throw new Exception("Cycle Found");
                }
                System.out.print(("Found " + c.getNode(2)
                        .getLabel() +" is the same as " + label2));
                ret.add(x);
            }
        }
    }
    return ret;
} 
```

现在奇怪的是，我的控制台输出了这个

找到 C 与 B 相同 找到 D 与 A 相同

通过连接 AC BC BD AD CG BF GF CF，其中 label1 为 a，第一个为 label 2 c，它只发生在这两个上，当然，给我一个无效的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:04:06.793

Your code is very repetitive, which makes it exposed to such crazy bugs. Why don't you make the followinrg additions:

In Node:

```
String normLabel() { return getLabel().toUpperCase(); } 
```

In Connection:

```
public boolean matches(Connection other) {
  final String this1 = getNode(1).normLabel(), this2 = getNode(2).normLabel(),
               other1 = other.getNode(1).normLabel(), 
               other2 = other.getNode(2).normLabel();
    return this1.equals(other1) || this2.equals(other1) ||
           this1.equals(other2) || this2.equals(other2);
  } 
```

Then your main code can collapse into the following:

```
private static List<Graph> caseForConnection(
    Connection consideredConnection, ArrayList<Graph> subTrees)
{
  final List<Graph> ret = new ArrayList<Graph>();
  for (Graph g : subTrees) {
    for (Connection c : g.getConnectionList()) {
      if (c.matches(consideredConnection)) {
        if (ret.contains(g)) throw new RuntimeException("Cycle Found");
        ret.add(g);
      }
    }
  }
  return ret;
} 
```

There's a good chance the bug will just evaporate, but even if it doesn't, it'll be much easier to track down.

# r - 如何从R中矩阵列表中的每个矩阵中删除列？

> ID：10271544
> 
> 赞同：6
> 
> 时间：2012-04-22T19:53:22.050
> 
> 标签：r, list, matrix, indexing

我对在 R 中使用 list 函数不是很熟悉。这是我第一次使用矩阵列表。我正在尝试从矩阵列表中的每个矩阵中删除相同的列，但我不确定这如何与 R 中的索引一起使用。

现在我的列表中有 8 个矩阵。每个矩阵是 [120, 56]。我想从每个矩阵中删除~~行列~~17-40 和 49-56。因此，我最终会得到一个包含 [120, 24] 的 8 个矩阵的列表。

这是我拥有的矩阵列表的示例：

```
MatrixList <- list(maxT = matrix(1:56, 120, 56, byrow = TRUE),
        minT = matrix(1:56, 120, 56, byrow = TRUE),
        meanT = matrix(1:56, 120, 56, byrow = TRUE),
        rain24 = matrix(1:56, 120, 56, byrow = TRUE),
        rain5d = matrix(1:56, 120, 56, byrow = TRUE),
        maxT2 = matrix(1:56, 120, 56, byrow = TRUE),
        minT2 = matrix(1:56, 120, 56, byrow = TRUE),
        meanT2 = matrix(1:56, 120, 56, byrow = TRUE)) 
```

我知道这似乎是一个简单的问题，但我是新手，只是不确定如何结合使用 for 循环和内部索引来删除列。我宁愿学习如何有效地做到这一点，而不是单独为每个矩阵做这件事，然后创建列表。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T20:02:17.273

通常情况下，@DWin 很早就给出了很好的答案。这是我简单的头脑发现更容易理解的替代方案。

您可以使用运算符`lapply`来遍历您的列表，然后使用标准子集`[`。

与其将`[`运算符用作函数（如@DWin 建议的那样），我更喜欢在内部编写一个匿名函数`lapply`，该函数看起来与您为转换列表的单个元素（即单个矩阵的子集）所执行的操作完全相同：

```
mls <- lapply(MatrixList, function(x)x[-c(17:40, 49:56), ])
str(mls)

List of 8
 $ maxT  : int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ...
 $ minT  : int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ...
 $ meanT : int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ...
 $ rain24: int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ...
 $ rain5d: int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ...
 $ maxT2 : int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ...
 $ minT2 : int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ...
 $ meanT2: int [1:88, 1:56] 1 1 1 1 1 1 1 1 1 1 ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T20:00:09.473

lapply() 是要使用的函数，“技巧”是使用“TRUE”作为第一个参数来获取所有行，然后使用负索引删除列：

```
smallerMtx <- lapply(MatrixList, "[", TRUE, -c(17:40 , 49:56))
str(smallerMtx )
#------------
List of 8
 $ maxT  : int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ...
 $ minT  : int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ...
 $ meanT : int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ...
 $ rain24: int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ...
 $ rain5d: int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ...
 $ maxT2 : int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ...
 $ minT2 : int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ...
 $ meanT2: int [1:120, 1:24] 1 1 1 1 1 1 1 1 1 1 ... 
```

我想我们需要解决您是否真的要删除行或列。（您在第一句话中说列，但后来似乎说行。您的示例/请求的数字部分建议删除列，但也许您来自首先指定列的编程传统？？？？

# mysql - 用行中的 substr 数据编写 sql

> ID：10271545
> 
> 赞同：0
> 
> 时间：2012-04-22T19:53:24.057
> 
> 标签：mysql, sql

我在数据库中有这张表，它叫`data` ![表数据](../Images/1cfc09493cf3044f220cfe4447dc3bbc.png)

我想做这个sql

```
 $sql = mysql_query("SELECT $menucompare,( substr($menucompare, 13, 2)) AS dayname FROM data WHERE ... "); 
```

观测值

```
 $menucompare // is variable which the date is selected from table(date or date2 or date3..) 
```

假设我们`04/10/2012-(Tuesday)`在一周`6`内的表中有这个日期`w_date`，所以在减去它在 sql 中所说的之后，它将是`Tu`。

第 7 周有 2 个日期之一。我想要的是每周输出按天排序的天名

像这样的例子

```
 week 7

   Tu
   Fr
   .
   . 
```

或者

```
week 6
Tu
.
. 
```

这会发生吗？这里有特殊`WHERE`条款吗？是否可以编写 sql 来计算一周中有多少个日期，例如第 7 周有多少个日期，在第 7 周的表格中有 2 个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:21:11.417

您在这里问了几个不同的问题，但在我尝试直接解决它们之前，可能值得考虑（如果可能的话）将`date`列的数据类型更改为[`DATE`](http://dev.mysql.com/doc/refman/5.6/en/datetime.html)类型，然后使用诸如[`DATE_FORMAT(`date`, "%a")`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)获取第一个相关日期名称的字符。

此外，在将其他语言的变量插入 SQL 语句时，请务必小心避免恶意 SQL 注入：考虑使用[准备好的语句](http://dev.mysql.com/doc/refman/5.6/en/sql-syntax-prepared-statements.html)。可悲的是，在这种情况下，由于您的数据库设计，您会偶然发现另一个问题：有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/3135973/variable-column-names-using-prepared-statements)。

关于你的问题：

1.  > 这[显示的示例输出]会发生吗？

    是的，它可以。您想对结果进行“分组”，因此请查看语句的`GROUP BY`子句[`SELECT`](http://dev.mysql.com/doc/refman/5.6/en/select.html)。尝试如下命令：

    ```
    SELECT
      `w_date`,
      GROUP_CONCAT(SUBSTR(`date`, 13, 2) SEPARATOR "\n") AS `daynames`
    FROM `data`
    WHERE ...
    GROUP BY `w_date`; 
    ```

    如您所见，结果以您想要的方式分组 - 但日期缩写列表是周数的单独结果列；准确地输出如图所示的数据是必须在应用程序级别进行的进一步操作。

2.  > 是否可以编写 sql 来计算一周中有多少个日期，例如第 7 周有多少个日期

    是的，一点没错。要获取给定一周的记录总数：

    ```
    SELECT COUNT(*) FROM `data` WHERE `w_date` = 7; 
    ```

    或者对于给定一周内的*不同天数：*

    ```
    SELECT COUNT(DISTINCT `date`) FROM `data` WHERE `w_date` = 7; 
    ```

    或者每周得到这样的：

    ```
    SELECT `w_date`, COUNT(*) FROM `data` GROUP BY `w_date`; 
    ```

# javascript - 如何使用 EmberJS 扩展命名空间

> ID：10271546
> 
> 赞同：6
> 
> 时间：2012-04-22T19:53:30.533
> 
> 标签：javascript, jquery, model-view-controller, ember.js

我已经用 Javascript 编程了一段时间。最近我做了一个相当大的 jQuery 项目并应用了这篇精彩文章中描述的模块模式：http: [//www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

这一切都很顺利，而且代码看起来很流畅且易于管理，但我觉得它可能会更好。我花了一天时间寻找一些 Javascript 框架，主要是那些：

*   有 UI 绑定支持
*   有一个模板系统
*   可以使用 jQuery
*   帮助我以与模块模式类似的方式组织我的代码

我偶然发现了 AngularJS、KnockOutJS、SpineJS、JavascriptMVC 等框架。真正突出并受到称赞的框架是 EmberJS。

我决定试一试，但这并不容易。EmberJS 教程的可用性非常有限。在尝试了很长时间之后，我设法让一些东西运行起来，我喜欢 EmberJS 所做的！只有一件事我似乎无法弄清楚 - 这也是我的问题：**如何扩展 Ember 命名空间（使用 Ember.Application.create 制作）？**

**澄清一下：**我的项目的旧版本有一个 Core-namespace 和一个 Util-namespace。两者都包含它们各自的所有其他类都可以使用的功能。如何在初始命名空间之上拥有具有函数的 Core- 和 Util-命名空间？

我只是这样做：

```
MyNamespace = Ember.Application.create();
MyNamespace.Core = Ember.Application.create();
MyNamespace.Util = Ember.Application.create(); 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T20:30:38.097

您不能嵌套`Ember.Namespace`'s（`Ember.Application`作为 的子类`Ember.Namespace`），请参阅问题[#683](https://github.com/emberjs/ember.js/issues/683)。

核心贡献者之一 Tome Dale 就复杂应用程序的布局添加了一个有趣的答案，请参阅[评论](https://github.com/emberjs/ember.js/issues/683#issuecomment-5122333)。

所以你可以`App = Ember.Application.create()`在这个命名空间下使用和创建你的控制器、视图等。或者您可以 - 如果您打算在其他项目/应用程序中重用某些代码 - 像这样拆分命名空间：

```
Util = Ember.Namespace.create({
    importantNames: 'Einstein'.w()
});

Core = Ember.Namespace.create({
    sqrt: function(x) { return Math.sqrt(x); }
});

App = Ember.Application.create();

...

App.myListController = Ember.Object.create({
    importantNamesBinding: 'Core.importantNames',
    sqrtBinding: 'Util.sqrt'
}); 
```

一个`Ember.Application`extends `Ember.Namespace`，并添加有关处理事件（单击，...）的功能。当你编写一个带有视图的应用程序时，这些东西很有用——在你的`Core`和`Util`命名空间中你不需要这些东西，这就是为什么这*只是*一个`Ember.Namespace`.

# java - 检查 ArrayList 中的 Array 元素是否包含某个值

> ID：10271547
> 
> 赞同：0
> 
> 时间：2012-04-22T19:53:41.420
> 
> 标签：java, arrays, search, arraylist

我有这个 ArrayList - `ArrayList<Object[]> tree`...

我也有这个数组 - `Object[] move`...它的大小为 2。

在我的程序中，一个**唯一的**二维数组被添加`move[0]`到`move[1]`. 然后将该数组添加到 ArrayList 中，然后重复该过程，因此我有一个“移动”列表。

我的问题是我不确定如何在 ArrayList（'tree'）中找到仅在元素中包含某个值的数组（'moves'）**——**`move[1]`因为该元素每次都是唯一的。**`move[0]`**

 **然后我想制作一个所有匹配项的数组/列表。例如，包含与 的`move[0]`值匹配的所有`move[1]`值的数组`3`。所以我会留下一个包含所需移动的二维数组的数组/列表。

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:06:17.287

最简单的方法是遍历您的`tree`对象并使用找到的匹配项构建一个新对象`ArrayList`，但这将花费与 that 的大小成线性关系的时间`tree`。如果您正在寻找速度，那么您可以维护 a `HashMap<Integer, ArrayList<Object[]>>`，其中键是您存储的整数`move[1]`，值是具有该键的所有移动的列表，因此检索该列表可以在 O(1 )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:31:31.730

在我看来，您需要的是一个`key-value`数据结构，而您选择了一种相当奇怪的方式来实现它。如果你不能使用泛型（由于某种原因你在旧的 jdk 中），
你应该使用 a或者使用using 类型来强制类型安全。 `HashTable``HashMap`**

# sql - 如何在 SQL Server 查询中将整数转换为十进制？

> ID：10271548
> 
> 赞同：52
> 
> 时间：2012-04-22T19:53:48.750
> 
> 标签：sql, sql-server, type-conversion

`height`在我的 SQL Server 表中，列是整数类型。我想做一个除法，并在我的查询中将结果作为十进制：

```
Select (height/10) as HeightDecimal 
```

如何转换以使`HeightDecimal`不再是整数？谢谢。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-22T19:57:00.343

```
SELECT height/10.0 AS HeightDecimal FROM dbo.whatever; 
```

如果您想要特定的精度刻度，请这样说：

```
SELECT CONVERT(DECIMAL(16,4), height/10.0) AS HeightDecimal
  FROM dbo.whatever; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-22T19:55:50.873

```
SELECT CAST(height AS DECIMAL(18,0)) / 10 
```

**编辑：** 这是如何在引擎盖下工作的？

结果类型与两个参数的类型相同，或者，如果它们不同，则由[数据类型优先级表](http://msdn.microsoft.com/en-us/library/ms190309.aspx)确定。因此，您可以将任一参数转换为非整数。

现在`DECIMAL(18,0)`，或者您可以等效地写成`DECIMAL`，仍然是一种整数类型，因为默认`0`的小数位数表示“小数点右侧没有数字”。因此，在不同的情况下，对它的强制转换可能对四舍五入很有效——这与我们试图完成的相反。

但是，十进制对所有事物都有自己的规则。它们通常是非整数，但总是精确的数字。我们强制发生的 DECIMAL 除法的结果类型在我们的例子中被[特别确定](http://msdn.microsoft.com/en-us/library/ms190476.aspx)为 DECIMAL(29,11)。因此，除法的结果将舍入到 11 位，这与除以 10 无关，但除以 3 时，舍入变得可观察到。您可以通过操纵左侧操作数的比例来控制舍入量。您还可以通过在整个表达式周围放置另一个 ROUND 或 CAST 操作来进行更多但不能更少的舍入。

相同的机制在公认的答案中支配着更简单和更好的解决方案：

```
 SELECT height / 10.0 
```

在这种情况下，除数`DECIMAL(3,1)`的类型是 ，结果的类型是`DECIMAL(17,6)`。尝试除以 3 并观察四舍五入的差异。

如果您只是讨厌所有关于精度和比例的讨论，并且只是希望 SQL Server 从某个时候开始以良好的旧双精度浮点算术执行所有计算，那么您也可以强制执行此操作：

```
SELECT height / CAST(10 AS FLOAT(53)) 
```

或等价地

```
SELECT height / CAST (10 AS FLOAT) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-22T19:56:42.893

您可以将高度转换为小数：

```
select cast(@height as decimal(10, 5))/10 as heightdecimal 
```

或者您在除以的值中放置一个小数点：

```
declare @height int
set @height = 1023

select @height/10.0 as heightdecimal 
```

请参阅[sqlfiddle](http://sqlfiddle.com/#!3/bb685/3)示例

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T19:57:28.453

```
select cast (height as decimal)/10 as HeightDecimal 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-18T21:09:54.583

```
declare @xx int 
set     @xx = 3 
select @xx      
select @xx * 2  -- yields another integer  
select @xx/1    -- same
select @xx/1.0  --yields 6 decimal places 
select @xx/1.00 --       6 
select @xx * 1.0  --     1 decimal place - victory
select @xx * 1.00 --     2         places - hooray 
```

另外 _ 将一个 int 插入到 temp_table 中，比如 decimal(10,3) _ 工作正常。

# android - 在不使用移动连接的情况下显示网页

> ID：10271552
> 
> 赞同：0
> 
> 时间：2012-04-22T19:53:57.083
> 
> 标签：android, webview, webpage

我正在使用 Android 的 WebView，这样我就不必对缩放和滚动进行编程。我在资产文件夹中有我想要的网页，这是我的代码。每次我在模拟器中运行时都会收到错误，*没有这样的文件或目录*。我的问题是我需要改变什么才能使它起作用？

刚刚将我的 .java 更新为此，现在当我按下*button1*时我收到一个强制关闭，我的 XML 与下面的相同。

**好的，我修复了最后一部分，现在发生的只是应用程序打开后出现空白屏幕。**

```
package com.DS;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;

public class CheatMathActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final Button button1 = (Button) findViewById(R.id.button1);
button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){

            WebView webView = (WebView) findViewById(R.id.webView);
            webView.getSettings().setJavaScriptEnabled(true);
            webView.getSettings().setBuiltInZoomControls(true);
            webView.getSettings().setSupportZoom(true);
            webView.loadUrl("file:///android_asset/stuffyoumustknowcoldforapcalc.htm");

    } });  
} 

} 
```

好的，这是我的 XML，在添加 WebView 之前，我有一些家庭活动，它有两个按钮和一个 textview，一旦我添加了 WebView，图形布局显示的所有内容都是灰色屏幕，中间显示 WebView。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:gravity="center_horizontal"
android:orientation="vertical"
android:background="#4876ff" >
<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginTop="90dp"
    android:textColor="#0000ff"
    android:text="AP Calculus" />
 <Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:layout_marginTop="38dp"
    android:text="More Coming Soon!" />
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button2"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="87dp"
    android:textColor="#FFFAFA"
    android:text="If you have any questions or want to report a bug, feel free to email                        me at fgoyer3856@gmail.com
                    Thank you!" />
<TextView
    android:id="@+id/titleView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="37dp"
    android:gravity="center_vertical"
    android:text="Welcome to Math Cheat Sheet!"
    android:textAppearance="?android:attr/textAppearanceLarge" />
<WebView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:31:29.860

好吧，如果您使用 Intent（如您在上面发布的那样），则会显示一个新的外部浏览器实例并将`Uri`集合加载到`Intent`而不是使用您自己的`WebView`. 为了实现您的要求，您必须获取对`WebView`活动布局内部的引用，然后加载您的页面。此外，如果你想从你的`assets/`文件夹中加载你的页面，你应该使用`AssetManager`，以及`WebView.loadData()`方法。您的`onCreate()`方法应如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  // get a reference to the webview
  final WebView wV = (WebView) findViewById(R.id.webview);

  // get page content from assets/your_page.html as a String
  InputStream is = getAssets().open("your_page.html");
  BufferedReader br = new BufferedReader(new InputStreamReader(is));
  StringBuffer sb = new StringBuffer();
  String line;
  while((line=br.readLine())!=null){
    sb.append(line);
    sb.append("\n");
  }
  is.close();
  final String html = sb.toString();

  // get a reference to the button
  Button button1 = (Button) findViewById(R.id.button1);
  button1.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){

      // load html string into your WebView
      wV.loadData( html, "text/html", "utf-8" );
    }
  });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:59:08.637

在您的布局上放置一个 webview。并在您的活动中像这样加载您的 html 资产。

```
webView = (WebView) findViewById(R.id.webView1);
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setBuiltInZoomControls(true);
webView.getSettings().setSupportZoom(true);
webView.loadUrl("file:///android_asset/stuffyoumustknowcoldforapcalc.htm"); 
```

并且不要忘记将文件`stuffyoumustknowcoldforapcalc.htm`放在名为`assets`.

```
package com.DS;

import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.Button;
import android.webkit.WebView;

public class CheatMathActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){

                webView = (WebView) findViewById(R.id.webView1);
                webView.getSettings().setJavaScriptEnabled(true);
                webView.getSettings().setBuiltInZoomControls(true);
                webView.getSettings().setSupportZoom(true);
                webView.loadUrl("file:///android_asset/stuffyoumustknowcoldforapcalc.htm");

        } });  
    } 

} 
```

# iphone - Bonjour 联网（发送消息）到两个以上的 iOS 设备

> ID：10271553
> 
> 赞同：0
> 
> 时间：2012-04-22T19:53:57.350
> 
> 标签：iphone, objective-c, ios, xcode, bonjour

我正在使用此 Stack Overflow 问题 (http://stackoverflow.com/questions/3240617/cfnetwork-and-bonjour-integration-for-iphone-to-mac-integration) 的答案中的示例代码，您可以[在此处下载](http://bill.dudney.net/roller/objc/resource/NetworkingTesting.zip)

我正在运行代码，并且可以向另一台设备发送消息。有没有办法将两个以上的设备链接到这个网络，以便消息可以同时发送到设备列表中的特定设备？

这是一个应用程序的计划；

我想要一个应用程序的管理员版本，管理员用户可以向列表中的所有连接的 iPad（最多 12 个）发送消息。一旦他们收到消息，他们就可以回复它，管理员用户可以看到哪个 iPad 发送了回复。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:50:46.067

您应该宣传两个 bonjour 服务，一个服务器服务和一个客户端服务。服务器应该只连接到客户端，客户端应该只连接到服务器。

Bonjour 是一种服务发现协议，它使“了解”网络中的对等点的过程。这意味着，一旦您知道对等方（服务器/客户端），您（而不是 Bonjour）必须建立连接，从那时起，由您的应用程序来做它想做的事情。

请注意，您必须记住您连接到的客户端的 IP 地址（您从 Bonjour 服务获取此信息）并在应用程序从睡眠中唤醒时重新连接（当应用程序进入后台时，iOS 会关闭套接字连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:08:40.910

不确定我是否为时已晚，但请查看[Chatty](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)。这真的很酷。我相当轻松地将 iPhone 应用程序移植到 Mac，并将其设置为服务器，将 iPhone 应用程序设置为客户端。

我使用的是您最初发布的示例应用程序中的代码，并且正在努力找出为什么它只允许一个连接。值得庆幸的是，我能够将 Chatty 转换为我的需求。

# image - 如何从 Coldfusion cfdirectory 查询中选择随机文件？

> ID：10271556
> 
> 赞同：0
> 
> 时间：2012-04-22T19:54:14.813
> 
> 标签：image, random, coldfusion, filter

只是想知道，有没有办法从 ColdFusion *cfdirectory*查询中选择最多 5 个随机结果。

我可以做这个：

```
<cfdirectory action="list" directory="#expandpath("some/")#" filter="tag*.*" name="dir"> 
```

这给了我所有的图像

```
tag123.jpg
tag111.jgp
tag234.jpg... 
```

我可以使用*maxrows*输出，但是有没有办法从总共过滤的 20 张图像中挑选出 5 张随机图像？

感谢您的一些见解！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T20:19:25.123

你知道这是对的`RandRange()`吗？只需从该查询中随机选择一行。

如果需要，添加额外的逻辑以确保没有重复。

# emacs - 如何自动启用 Emacs jtags-mode？

> ID：10271561
> 
> 赞同：3
> 
> 时间：2012-04-22T19:54:55.723
> 
> 标签：emacs, elisp

在 Emacs 24+ 的开发版本中通过 ELPA使用`jtags-mode`（版本 0.96），我似乎无法以编程方式启用次要模式（手动调用工作正常）。在我用我尝试过的东西和我期望工作的设置深入研究血腥细节之前，最重要的是，在添加`jtags-mode`到 Java 挂钩变量之后，当我第一次访问 Java 源文件时，我从 Emacs 收到以下抱怨：

```
Toggling jtags-mode off; better pass an explicit argument. [2 times] 
```

在彻底阅读有关`jtags-mode`设置的文档后，我希望以下内容就足够了：

```
;; Support for Java coding. 
(autoload 'jtags-mode "jtags" "Toggle jtags mode." 1)

(defun java-setup ()
  (setq tab-stop-list '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80 84 88 92)
    indent-tabs-mode nil
    tab-width 4
    fill-column 96
    c-comment-start-regexp "\\(@\\|/\\(/\\|[*][*]?\\)\\)"
    jtags-display-menu-flag t
    jtags-mode 1)
  (java-mode-indent-annotations-setup))

(add-hook 'java-mode-hook 'java-setup)
(add-hook 'java-mode-hook 'jtags-mode)
... 
```

但这导致了上面的抱怨。从那以后，我试图`jtags-mode`直接在`java-setup()`函数中调用，但无济于事。

如果没有明显或简单的解决方案，我很乐意就如何调试此问题提供指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:11:18.597

Functions named `xxx-mode` are often *toggle* functions when called without arguments, i.e. they turn the mode on if it was off and vice versa. As you have added this function to a hook, this is how it is called. Several minor modes provide a function like `turn-on-xxx-mode` that are designed to be added to hook directly.

When called with an argument, 1 typically activates them and -1 deactivates. Try calling it from your setup function rather than adding the `jtags-mode` function to the hook

I would suggest activating the minor mode from your setup function. Also, in your setup code, you set the `jtags-mode` *variable* to 1, which normall is not the right thing to do. For example:

```
(defun java-setup ()
  (setq tab-stop-list '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 80 84 88 92)
    indent-tabs-mode nil
    tab-width 4
    fill-column 96
    c-comment-start-regexp "\\(@\\|/\\(/\\|[*][*]?\\)\\)"
    jtags-display-menu-flag t)
  (jtags-mode 1)
  (java-mode-indent-annotations-setup))

(add-hook 'java-mode-hook 'java-setup) 
```

Finally, a reservation. I haven't used `jtags-mode`, this answer is based on general knowledge on how minor modes work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T02:13:13.890

顺便说一句，如果您使用 Emacs-24 重新编译 jtags-mode 文件，问题应该会消失，因为 Emacs-24 在这方面更改为次要模式的工作方式，因此没有参数并不意味着再切换。之所以进行此更改，是因为您遇到了类似的问题。

# symfony - 如何检查用户是否在控制器内登录 Symfony2？

> ID：10271570
> 
> 赞同：77
> 
> 时间：2012-04-22T19:55:34.530
> 
> 标签：symfony, login, symfony-security

我[在这里](https://stackoverflow.com/questions/9660764/in-symfony-2-how-do-i-check-if-a-user-is-not-logged-in-inside-a-template)阅读了如何在基于 Symfony2 的网站的树枝模板中检查用户的登录状态。但是，我需要知道如何检查用户是否从控制器内部登录。我很确定以下代码是正确的：

```
$user = $this->get('security.context')->getToken()->getUser(); 
```

但它总是返回一些东西，例如登录用户或匿名用户。

任何的想法？提前致谢。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-10-20T01:16:00.970

**警告**`'IS_AUTHENTICATED_FULLY'`：如果用户使用“记住我”功能登录，单独检查将返回 false。

根据 Symfony 2 文档，有 3 种可能性：

> **IS_AUTHENTICATED_ANONYMOUSLY** - 自动分配给在站点的防火墙保护部分中但尚未实际登录的用户。这只有在允许匿名访问时才有可能。
> 
> **IS_AUTHENTICATED_REMEMBERED** - 自动分配给通过记住我 cookie 进行身份验证的用户。
> 
> **IS_AUTHENTICATED_FULLY** - 自动分配给在当前会话期间提供了登录详细信息的用户。

这些角色代表三个级别的身份验证：

> 如果你有这个`IS_AUTHENTICATED_REMEMBERED`角色，那么你也有这个`IS_AUTHENTICATED_ANONYMOUSLY`角色。如果你有这个 `IS_AUTHENTICATED_FULLY`角色，那么你也有其他两个角色。换句话说，这些角色代表了三个不断增加的认证“强度”级别。

我遇到了一个问题，我们系统中使用“记住我”功能的用户被视为他们根本没有在仅检查过的页面上登录`'IS_AUTHENTICATED_FULLY'`。

答案是如果他们没有完全认证，则要求他们重新登录，或者检查记住的角色：

```
$securityContext = $this->container->get('security.authorization_checker');
if ($securityContext->isGranted('IS_AUTHENTICATED_REMEMBERED')) {
    // authenticated REMEMBERED, FULLY will imply REMEMBERED (NON anonymous)
} 
```

希望这可以使人们免于犯我犯的同样错误。在查找如何检查某人是否在 Symfony 2 上登录时，我使用了这篇文章作为参考。

资料来源：[http ://symfony.com/doc/2.3/cookbook/security/remember_me.html#forcing-the-user-to-re-authenticate-before-accessing-certain-resources](http://symfony.com/doc/2.3/cookbook/security/remember_me.html#forcing-the-user-to-re-authenticate-before-accessing-certain-resources)

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-08-06T21:34:03.343

# SecurityContext 将在`Symfony 3.0`

之前`Symfony 2.6`你会使用`SecurityContext`.
`SecurityContext`将被弃用，`Symfony 3.0`取而代之的是[`AuthorizationChecker`](http://symfony.com/doc/current/components/security/authorization.html#authorization-checker).

**供`Symfony 2.6+`&`Symfony 3.0`使用[`AuthorizationChecker`](http://symfony.com/doc/current/components/security/authorization.html#authorization-checker)。**

* * *

# Symfony 2.6（及以下）

```
// Get our Security Context Object - [deprecated in 3.0]
$security_context = $this->get('security.context');
# e.g: $security_context->isGranted('ROLE_ADMIN');

// Get our Token (representing the currently logged in user)
$security_token = $security_context->getToken();
# e.g: $security_token->getUser();
# e.g: $security_token->isAuthenticated();
# [Careful]             ^ "Anonymous users are technically authenticated"

// Get our user from that security_token
$user = $security_token->getUser();
# e.g: $user->getEmail(); $user->isSuperAdmin(); $user->hasRole();

// Check for Roles on the $security_context
$isRoleAdmin = $security_context->isGranted('ROLE_ADMIN');
# e.g: (bool) true/false 
```

* * *

# Symfony 3.0+（以及来自 Symfony 2.6+）

`security.context`变成`security.authorization_checker`.
我们现在从而`security.token_storage`不是`security.context`

```
// [New 3.0] Get our "authorization_checker" Object
$auth_checker = $this->get('security.authorization_checker');
# e.g: $auth_checker->isGranted('ROLE_ADMIN');

// Get our Token (representing the currently logged in user)
// [New 3.0] Get the `token_storage` object (instead of calling upon `security.context`)
$token = $this->get('security.token_storage')->getToken();
# e.g: $token->getUser();
# e.g: $token->isAuthenticated();
# [Careful]            ^ "Anonymous users are technically authenticated"

// Get our user from that token
$user = $token->getUser();
# e.g (w/ FOSUserBundle): $user->getEmail(); $user->isSuperAdmin(); $user->hasRole();

// [New 3.0] Check for Roles on the $auth_checker
$isRoleAdmin = $auth_checker->isGranted('ROLE_ADMIN');
// e.g: (bool) true/false 
```

* * *

在文档中阅读更多内容： 如何在 twig 中执行此操作？：[Symfony 2：如何检查用户是否未在模板中登录？](https://stackoverflow.com/questions/9660764/symfony-2-how-do-i-check-if-a-user-is-not-logged-in-inside-a-template/23612913#23612913)[`AuthorizationChecker`](http://symfony.com/doc/current/components/security/authorization.html#authorization-checker)

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-04-22T20:05:21.577

试试这个：

```
if( $this->container->get('security.context')->isGranted('IS_AUTHENTICATED_FULLY') ){
    // authenticated (NON anonymous)
} 
```

更多的信息：

> “匿名用户在技术上是经过身份验证的，这意味着匿名用户对象的 isAuthenticated() 方法将返回 true。要检查您的用户是否真正经过身份验证，请检查 IS_AUTHENTICATED_FULLY 角色。”

资料来源：[http ://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-02-11T08:47:42.947

要添加到 Anil 给出的答案，在**symfony3**中，您可以使用`$this->getUser()`来确定用户是否已登录，一个简单的条件`if(!$this->getUser()) {}`就可以了。

如果您查看基本控制器中可用的源代码，它的功能与 Anil 定义的完全相同。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-09-27T08:35:45.180

如果您使用 中的安全注释，则`SensioFrameworkExtraBundle`可以使用一些表达式（在 中定义`\Symfony\Component\Security\Core\Authorization\ExpressionLanguageProvider`）：

*   `@Security("is_authenticated()")`：检查用户是否经过身份验证而不是匿名
*   `@Security("is_anonymous()")`: 检查当前用户是否为匿名用户
*   `@Security("is_fully_authenticated()")`： 相当于`is_granted('IS_AUTHENTICATED_FULLY')`
*   `@Security("is_remember_me()")`： 相当于`is_granted('IS_AUTHENTICATED_REMEMBERED')`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-03-01T22:08:09.870

如果您使用角色，您可以检查`ROLE_USER` 这是我使用的解决方案：

```
if (TRUE === $this->get('security.authorization_checker')->isGranted('ROLE_USER')) {
    // user is logged in
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-15T19:31:54.143

从 a 扩展`baseController`并实现一些基本函数是一个很好的`Userinterface`做法

```
/**

*/
class BaseController extends AbstractController
{

    /**
     * @return User

     */
    protected function getUser(): ?User
    {
        return parent::getUser();
    }

    /**
     * @return bool
     */
    protected function isUserLoggedIn(): bool
    {
        return $this->getUser() instanceof User;
    }
} 
```

# xml - 成功删除后删除 someXml.xmlNode[numb] 失败

> ID：10271579
> 
> 赞同：0
> 
> 时间：2012-04-22T19:57:08.977
> 
> 标签：xml, actionscript-3, flash

我找到了问题发生的地方，但无法理解原因和纠正方法。

它可以在其他框架中使用，但差别不大：XML 在成功删除后无法删除：

```
<work name="New Work Title 14" img="" logo="" link="" image=""></work>
<work name="New Work Title 15" img="" logo="" link="" image=""></work>
.... etc 
```

来自相同脚本工作的框架的 XML：

```
<person name="New Object Name 8" poz="" mail="" thumb="" img=""/> 
```

第一个跟踪和第三个跟踪在一些成功删除后给出相同的值：

```
function deleteWork(){

    trace(siteDataXML[Work_Node].length()) // freezes on ~10

    trace(delete siteDataXML[Work_Node][Work_List.selectedIndex]) //always true

    trace(siteDataXML[Work_Node].length()) // freezes on ~10

    Work_DP.removeItemAt(Work_List.selectedIndex); //
    trace("dp ", Work_DP.length)                 // decreases as it should

    debug("Data Deleted. Autosaving...")
    Work_Save();

} 
```

可能是`</work>`原因，但在其他测试文件中它删除了类似的 xml 节点。`</work>`如果我在没有删除的情况下生成 xml ，它应该可以工作。

任何的想法？希望有人可以提供帮助。

## 更新！

我想我找到了原因。

Flash 自动转换

```
<work name="New Work Title 14" img="" logo="" link="" image=""></work> 
```

到

```
<work name="New Work Title 14" img="" logo="" link="" image="" /> 
```

在此删除后不会删除节点。

我补充说`<![CDATA[]]>`：

```
<work name="New Work Title 14" img="" logo="" link="" image=""><![CDATA[]]></work> 
```

但是为什么会这样呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:35:20.467

截止日期的原因我不能花太多时间在它上面，并通过重新制作管理面板页面脚本绕过它。找到了更好的方法。

我正在尝试在新的干净文件上模拟该问题，但无法...

我认为解决方案应该是添加`<![CDATA[]]>`到 xmls 以防止对话。如果所有 XML-s 都保留相同的格式，则删除应该可以正常工作。

PS当文本转换为xml并保存时，cdata被转换为转义格式。用 cdata 保持 htmlText 格式的方法是：

```
someXML.someNode[i] = new XML('<test aaa="aaaa" bbb="bbbb" ccc="cccc"><![CDATA['+someTextField.htmlText+']]></test>') 
```

不是这样：

```
someXML.someNode[i] = '<![CDATA['+someString+']]>' 
```

# java - 递归解析一个 XML 文件 jdom

> ID：10271587
> 
> 赞同：0
> 
> 时间：2012-04-22T19:57:52.173
> 
> 标签：java, xml, xml-parsing, jtree

我在解析一个名为“test.xml”的 XML 文件时遇到了麻烦，如下所示：

```
<?xml version="1.0"  encoding="iso-8859-1"?>
<un>
<deux> <cinq></cinq> <six></six> <sept></sept> </deux>
<trois> <huit></huit><noeuf></noeuf>  </trois>
<quatre><dix></dix><onze></onze> </quatre>
</un> 
```

我想得到这样的结构： [[[un]] , [[deux,trois,quatre]] , [[cinq,six,sept],[huit,noeuf],[dix,onze]]] 但我得到这个 [[[cinq, Six, sept]], [[huit, noeuf]], [[dix, onze]], [[deux, trois, quatre]]]

这是我的代码：

```
 import java.util.ArrayList;

 import javax.xml.parsers.DocumentBuilder;
 import javax.xml.parsers.DocumentBuilderFactory;

 import org.w3c.dom.Document;
 import org.w3c.dom.Node;
 import org.w3c.dom.NodeList;
 import org.w3c.dom.Element;

public class Wassim {

/**
 * @param args
 */

public static void GetAllXml(ArrayList<ArrayList<ArrayList<String>>> ListTree, Node node)
{
    ArrayList<ArrayList<String>> child = new ArrayList<ArrayList<String>>(); 
    ArrayList<String> childOfChild = new ArrayList<String>();

    NodeList nl= node.getChildNodes();
    if (nl.getLength()>0)
    {
    for (int i=0;i<nl.getLength();i++)
    {

          Node n = nl.item(i);
          if (n instanceof Element)
          {

              childOfChild.add(n.getNodeName());
              GetAllXml(ListTree, n);
          }
    }
    child.add(childOfChild);
    ListTree.add(child);
    }

}

public static void main(String[] args) {
    // TODO Auto-generated method stub

     try{
         DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
         DocumentBuilder parser = factory.newDocumentBuilder();
         Document doc = parser.parse("test.xml");
         Node root = doc.getDocumentElement();
         ArrayList<ArrayList<ArrayList<String>>> ListTree = new ArrayList<ArrayList<ArrayList<String>>>();
         GetAllXml( ListTree, root);
         System.out.println(ListTree);

     }
     catch(Exception e)
     {
         e.printStackTrace();
     }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:35:08.053

对于每个元素，这是一个两步过程：

1.  将所有子元素添加到列表中
2.  处理所有子元素

像这样的东西：

```
private static List<Element> getChildren(Node parent) {
    NodeList nl = parent.getChildNodes();
    List<Element> children = new ArrayList<Element>(nl.getLength());
    for (int i = 0; i < nl.getLength(); i++) {
       Node n = nl.item(i);
       if (n instanceof Element)
            children.add((Element) n);
    }
    return children;
}

public static void GetAllXml(
    ArrayList<ArrayList<ArrayList<String>>> ListTree, Node node) {
    ArrayList<ArrayList<String>> child = new ArrayList<ArrayList<String>>();
    ArrayList<String> childOfChild = new ArrayList<String>();

    List<Element> children = getChildren(node);
    // add children node names
    for (Element e : children)
         childOfChild.add(e.getNodeName());

    if (childOfChild.size() > 0) {
        child.add(childOfChild);
        ListTree.add(child);
    }

    // process next level
    for (Element e : children)
        GetAllXml(ListTree, e);
} 
```

# c++ - Natty Narwhal 和 Oneiric Ocelot 之间共享对象链接的差异

> ID：10271588
> 
> 赞同：0
> 
> 时间：2012-04-22T19:58:07.550
> 
> 标签：c++, ubuntu, g++, ubuntu-11.10

我正在使用 twitcurl 使用[http://code.google.com/p/twitcurl/wiki/WikiHowToUseTwitcurlLibrary上的确切说明编写一个简单的概念证明 C++ 应用程序（可在](http://code.google.com/p/twitcurl/wiki/WikiHowToUseTwitcurlLibrary)[https://github.com/paulspencerwilliams/CPlusPlusSocialPlayground](https://github.com/paulspencerwilliams/CPlusPlusSocialPlayground)获得） . 我可以毫无问题地编译和安装 twitcurl，并且可以在 Natty Narwhal 上编译和执行我的应用程序。但是，在 Oneiric Ocelot 上编译我的应用程序（通过 Makefile）会给我以下链接问题：

```
g++ -ltwitcurl twitterClient.cpp -o twitterClient
/tmp/ccbxmSF3.o: In function `main':
twitterClient.cpp:(.text+0x1f7): undefined reference to `twitCurl::twitCurl()'
twitterClient.cpp:(.text+0x22e): undefined reference to `twitCurl::setTwitterUsername(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x247): undefined reference to `twitCurl::setTwitterPassword(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x280): undefined reference to `twitCurl::getOAuth()'
twitterClient.cpp:(.text+0x292): undefined reference to `oAuth::setConsumerKey(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
twitterClient.cpp:(.text+0x2e9): undefined reference to `twitCurl::getOAuth()'
twitterClient.cpp:(.text+0x2fb): undefined reference to `oAuth::setConsumerSecret(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
twitterClient.cpp:(.text+0x50c): undefined reference to `twitCurl::getOAuth()'
twitterClient.cpp:(.text+0x51e): undefined reference to `oAuth::setOAuthTokenKey(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
twitterClient.cpp:(.text+0x52d): undefined reference to `twitCurl::getOAuth()'
twitterClient.cpp:(.text+0x53f): undefined reference to `oAuth::setOAuthTokenSecret(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
twitterClient.cpp:(.text+0x56c): undefined reference to `twitCurl::oAuthRequestToken(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x664): undefined reference to `twitCurl::getOAuth()'
twitterClient.cpp:(.text+0x676): undefined reference to `oAuth::setOAuthPin(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
twitterClient.cpp:(.text+0x691): undefined reference to `twitCurl::oAuthHandlePIN(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
twitterClient.cpp:(.text+0x6a0): undefined reference to `twitCurl::oAuthAccessToken()'
twitterClient.cpp:(.text+0x6af): undefined reference to `twitCurl::getOAuth()'
twitterClient.cpp:(.text+0x6c1): undefined reference to `oAuth::getOAuthTokenKey(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x6d0): undefined reference to `twitCurl::getOAuth()'
twitterClient.cpp:(.text+0x6e2): undefined reference to `oAuth::getOAuthTokenSecret(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x88e): undefined reference to `twitCurl::statusUpdate(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x8ab): undefined reference to `twitCurl::getLastWebResponse(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x8e7): undefined reference to `twitCurl::getLastCurlError(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x97e): undefined reference to `twitCurl::timelineUserGet(bool, bool, unsigned int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool)'
twitterClient.cpp:(.text+0x9bb): undefined reference to `twitCurl::getLastWebResponse(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0x9f7): undefined reference to `twitCurl::getLastCurlError(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
twitterClient.cpp:(.text+0xa86): undefined reference to `twitCurl::~twitCurl()'
twitterClient.cpp:(.text+0xc64): undefined reference to `twitCurl::~twitCurl()'
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

任何想法在这两个平台上编译的区别是什么？为了进行精确比较，我在 AWS 上的 Ubuntu 64 位映像上进行了尝试，并得到了相同的症状。

编辑：我已经更改了 Makefile 中参数的顺序，但似乎没有超过第一个问题。但是，现在编译时出现以下错误：

```
g++ twitterClient.cpp -o twitterClient -ltwitcurl
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libtwitcurl.so: undefined reference to `curl_easy_getinfo'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libtwitcurl.so: undefined reference to `curl_easy_setopt'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libtwitcurl.so: undefined reference to `curl_easy_init'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libtwitcurl.so: undefined reference to `curl_slist_append'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libtwitcurl.so: undefined reference to `curl_slist_free_all'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libtwitcurl.so: undefined reference to `curl_easy_perform'
/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libtwitcurl.so: undefined reference to `curl_easy_cleanup'
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:00:21.497

较新`gcc`版本的 Oneiric 要求在源文件之后设置链接参数：

```
g++ twitterClient.cpp -o twitterClient -ltwitcurl 
```

# java - 是否有任何软件可以为您显示完整的代码？

> ID：10271589
> 
> 赞同：0
> 
> 时间：2012-04-22T19:58:10.047
> 
> 标签：java

有谁知道是否有软件/程序可以为您显示一整段代码？

我有一个带有很长一段代码的 Java 类，我想为我的期末项目报告截取它。问题是我使用的是小屏幕笔记本电脑，无法显示整个代码。我需要展示整段代码。

是否存在这样的软件/程序？或者有没有显示整段代码的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:10:49.233

Try SnagIt ([http://www.techsmith.com/snagit.html](http://www.techsmith.com/snagit.html)). It is a fancy screenshot taking tool. You can point it to a "scrolling panel" (like in your IDE) and it will take a screenshot of that panel by essentially scrolling it and capturing the full contents. Here is a tutorial: [http://www.snagitguide.com/tag/snagit-scrolling-capture/](http://www.snagitguide.com/tag/snagit-scrolling-capture/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T21:11:53.800

免费的开源编辑器[Notepad++](http://notepad-plus-plus.org/download)为各种语言（包括 Java）的源代码提供彩色语法高亮显示。如果您在笔记本电脑上运行 Windows，则可以下载它，粘贴代码，选择菜单`Language, J, Java`以确保正确着色。选择所需的代码片段，右键单击并选择`Plugin commands, Copy Text With Syntax Highlighting`。然后，您就可以将任意长度的彩色格式化代码粘贴到您的文字处理器中了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T20:22:23.700

在 Gnome 编辑器 gedit 中，您可以打印到 SVG 图像。我选择纵向格式，页面大小为 A1，一页上有很多代码。

# android - 无法使用 BroadcastReceiver 捕获 android.intent.action.DELETE

> ID：10271590
> 
> 赞同：1
> 
> 时间：2012-04-22T19:58:15.820
> 
> 标签：android, android-intent, broadcastreceiver

我正在尝试注册一个`BroadcastReceiver`来捕捉一个`Intent`动作`android.intent.action.DELETE`，但我什么也没得到。

您可能会在下面找到`BroadcastReceiver`：

```
 <receiver
        android:name=".receiver.UninstallReceiver"
        android:enabled="true">
        <intent-filter>
            <action android:name="android.intent.action.DELETE" />
        </intent-filter>
    </receiver> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:08:42.907

> 我什么也得不到

`ACTION_DELETE`与`startActivity()`, not一起使用`sendBroadcast()`，因此您无法`Intents`使用`BroadcastReceiver`.

# javascript - 在此行发现多个注释：结束标记 () 未正确关闭，预期 >

> ID：10271591
> 
> 赞同：1
> 
> 时间：2012-04-22T19:58:17.803
> 
> 标签：javascript, html, jsp

我在脚本标签中使用嵌入的 javascript 函数 disableReturnDate() 编写了以下 html 代码。但是在关闭标签上给出了一个错误

****错误****

> ```
> Multiple annotations found at this line:
>   - End tag (</script>) not closed properly, expected >.
>   - Unknown tag (script function addReturnDate() { if (document.getElementById('RoundTrip').checked) 
>    { document.write("Select Return Date:"); document.write("<script>DateInput('returndate',true,'DD-MON-YYYY');"); 
>    document.write("<input type=\"button\" onClick=\"alert(this.form.returndate.value)\" value=\"Show date value 
>    passed\">"); } } </script> ).
>   - End tag of element <script> 
> ```

****代码****

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Enter Date-Time, Arrival and Departure Location</title>
<script type="text/javascript" src="calendarDateInput.js"></script>
<script type="text/javascript">
function disableReturnDate() {
    this.form1.returndate.disabled=true;
}
</script>
</head>
<body onload="disableReturnDate()">
<form name="form1" method="post" action="retrievePossibleRoutes.jsp">
Select Travel Date:  
<script>DateInput('traveldate',true,'DD-MON-YYYY');</script> 
<input type="button" onClick="alert(this.form.traveldate.value)" value="Show date value passed">
<br>
Select Return Date:  
<script>DateInput('returndate',true,'DD-MON-YYYY');</script> 
<input type="button" onClick="alert(this.form.returndate.value)" value="Show date value passed">
<input type="radio" name="journeyType" id="OneWay" onClick="disableReturnDate()" checked>One Way<br>
<input type="radio" name="journeyType" id="RoundTrip" onClick="enableReturnDate()">Round Trip<br> 
<br>
Select Departure Location:
<select name="comboDep">
<option></option>
<option></option>
</select>
<input type="submit"/>
<br>
Select Arrival Location:
<select name="comboArrv">
<option></option>
<option></option>
</select>
<input type="submit"/>
</form>
</body>
</html> 
```

知道有什么问题。错误中显示的代码是以前编写的，但我现在已经删除了它，它仍然显示在错误消息中。期待回复

PS 到 calendarDateInput.js 的链接是[http://www.dynamicdrive.com/dynamicindex7/jasoncalendar.htm](http://www.dynamicdrive.com/dynamicindex7/jasoncalendar.htm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:10:09.343

You can verify HTML by using the W3C validator: [http://validator.w3.org/check](http://validator.w3.org/check)

Two errors of significance show up. Put

```
<!doctype html> 
```

at the start of the HTML (you can specify more info in the `doctype` tag, so look into this a bit more), and add make sure that all tags have the `type` attribute set:

```
<script type="text/javascript"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T20:17:28.290

> 错误中显示的代码是以前编写的，但我现在已经删除了它，它仍然显示在错误消息中

这意味着您的浏览器已缓存旧版本。[清除缓存并重](http://www.wikihow.com/Clear-Your-Browser%27s-Cache)试。

# c# - 如何使 iTextSharp 表格边框的角变圆？

> ID：10271592
> 
> 赞同：6
> 
> 时间：2012-04-22T19:58:26.200
> 
> 标签：c#, itext

我想在 itextsharp 中制作一个圆角矩形。这是我现在没有四舍五入的输出：

![在此处输入图像描述](../Images/941745db3a1545b7740b63143053341c.png)

这是我处理该输出的代码：

```
pdftbl = new PdfPTable(3);
pdftbl.WidthPercentage = 100;
width = new float[3];
width[0] = 0.6F;
width[1] = 0.2F;
width[2] = 0.6F;
pdftbl.SetWidths(width);
pdfcel = new PdfPCell(new Phrase(Insuredaddress, docFont9));
pdfcel.BorderColor = Color.BLACK;
pdftbl.AddCell(pdfcel);
pdfcel = new PdfPCell(new Phrase("", docWhiteFont9));
pdfcel.Border = 0;
pdftbl.AddCell(pdfcel);
pdfcel = new PdfPCell(new Phrase(BkrAddrss, docFont9));
pdfcel.BorderColor = Color.BLACK;
pdftbl.AddCell(pdfcel);
objDocument.Add(pdftbl); 
```

我可以更改/添加什么来达到预期的效果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T21:00:41.050

iText[Sharp] 没有开箱即用的这个功能。这是一种迂回的做事方式，但首先您必须实现[IPdfPCellEvent](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPCellEvent.html)接口，然后将事件处理程序附加到您添加到表中的**每个单元格。**首先是一个简单的实现：

```
public class RoundRectangle : IPdfPCellEvent {
  public void CellLayout(
    PdfPCell cell, Rectangle rect, PdfContentByte[] canvas
  ) 
  {
    PdfContentByte cb = canvas[PdfPTable.LINECANVAS];
    cb.RoundRectangle(
      rect.Left,
      rect.Bottom,
      rect.Width,
      rect.Height,
      4 // change to adjust how "round" corner is displayed
    );
    cb.SetLineWidth(1f);
    cb.SetCMYKColorStrokeF(0f, 0f, 0f, 1f);
    cb.Stroke();
  }
} 
```

请参阅[PdfContentByte 文档](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfContentByte.html)- 基本上上面的所有代码都是根据您的需要绘制一个带有圆角的单元格边框。

然后像这样分配上面创建的事件处理程序：

```
RoundRectangle rr = new RoundRectangle();    
using (Document document = new Document()) {
  PdfWriter writer = PdfWriter.GetInstance(document, STREAM);
  document.Open();
  PdfPTable table = new PdfPTable(1);
  PdfPCell cell = new PdfPCell() {
    CellEvent = rr, Border = PdfPCell.NO_BORDER,
    Padding = 4, Phrase = new Phrase("test")
  };
  table.AddCell(cell);  
  document.Add(table);
} 
```

# android - Android - Busybox 架构

> ID：10271595
> 
> 赞同：0
> 
> 时间：2012-04-22T19:58:51.050
> 
> 标签：android, arm, busybox

我想在我的模拟器上安装busybox，但我不确定我应该安装哪一个。

我从[http://busybox.net/downloads/binaries/](http://busybox.net/downloads/binaries/)很好地下载了它，并使用 adb 将其推送到模拟器。

我的模拟器似乎是 ARMv5：

```
$ ./adb shell busybox uname -m
armv5tejl 
```

*这是我的问题*

1.  为什么我的busybox-armv6l 可以在我的ARMv5 模拟器上运行？
2.  我可以在所有 Android 手机上使用 busybox-armv6l 吗？
3.  如果我想针对所有安卓手机，我必须安装不同的busybox吗？

非常感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:58:23.383

1.  仿真由支持 armv6 的 Qemu 完成。即使没有启用 armv6 支持，armv5 和 armv6 之间的区别主要是 SIMD 指令，这些指令可能不会在busybox-armv6l 二进制文件中使用（它们主要用于处理多媒体）。
2.  可能，但你不能确定。我认为我从未见过 Android 在具有 armv5 CPU 的设备上运行，但这并非不可能。如果要针对所有可能的设备，请使用 armv5 二进制文件。
3.  不，armv6/7 设备可以运行 armv5 代码，我真的不认为busybox 在为 armv6/7 编译时会获得很大的性能提升，所以我会坚持使用 armv5 版本。

# objective-c - xCode 目标 C：自定义 UITableViewCell 连接

> ID：10271600
> 
> 赞同：0
> 
> 时间：2012-04-22T19:59:10.207
> 
> 标签：objective-c, xcode, cocoa-touch

我正在尝试实现一个自定义 UITableView 单元格作为表格视图的原型。因此，我创建了一个名为 CustomCell 的自定义类，并将原型单元格中的类从 UITableViewCell 设置为 CustomCell，但我不确定如何将原型单元格内的 UI 元素连接到 CustomCell 内的相应 Outlets（因为自定义单元格不是一个视图控制器）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:04:16.193

自定义单元格不是视图控制器并不重要，您可以以完全相同的方式从 Interface Builder 中的视图元素到您的 CustomCell.h 文件中按 ctrl 拖放您的插座。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:09:48.270

试试这个教程：[http ://www.e-string.com/content/custom-uitableviewcells-interface-builder](http://www.e-string.com/content/custom-uitableviewcells-interface-builder)

# javascript - 获取子 div id 的父 div id

> ID：10271601
> 
> 赞同：0
> 
> 时间：2012-04-22T19:59:11.890
> 
> 标签：javascript, jquery, dom

```
<div id="p">
 <div id="c">
  <img />
 </div>
</div> 
```

我正在动态生成内部 div，并为用户提供在内部 div 内添加图像的工具。因此，当用户单击内部 div 打开一个对话框时，我得到了 eventobject，然后

```
 eventobject = argument.callee.caller.argumets[0];
          var innderdivid = $(eventobject.srcElement).parent().attr("id"); 
```

通过上面的代码，我得到了内部 div id 并将图像插入其中。

但是当 div 为空时，问题就开始了。当它为空时，eventobject.srcElement 本身就是 innerdiv，所以在 innerdivid 中，我得到了“p”而不是“c”。但我想要一些出路，所以当 usr 单击空 div 时，我也通过上面的代码获得 innerdiv id "c"。告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:19:46.497

使用 1x1 透明间隔 GIF 或具有文本“单击我”的图像初始化图像。在您的样式表中，将高度和宽度设置为用户友好的值。

# css - CSS Center Div - 问题

> ID：10271603
> 
> 赞同：0
> 
> 时间：2012-04-22T19:59:18.477
> 
> 标签：css, layout, html

我目前正在开发一个简单的网站，但我需要在屏幕中间居中放置一个 div，以适应不同的浏览器尺寸。

我几乎让它工作了，但没有人能告诉我我哪里出错了。
要查看的实时站点是 [http://adamnicolaou.com/](http://adamnicolaou.com/)

谢谢您的帮助

这是我的CSS：

```
/* DEFAULTS
-------------------------------------------------------------------------------*/
* { font-family:FuturaFont; color:#F1F2F2; background-color:#333133; }
/* FONT - TEXT
-------------------------------------------------------------------------------*/
@font-face { font-family:FuturaFont; src: url('../font/FuturaLT_Light.ttf'),                  url('../font/FuturaLT_Light.eot'); /* IE9 */ }
* { font-family:FuturaFont, helvetica; color:#F1F2F2; background-color:#333133; letter-spacing:2px;}
h5 { font-size:25px; text-transform:uppercase; text-align:center; margin-top:5px; }
h1 { font-size:20px; text-transform:uppercase; }
p { font-size: 18px; letter-spacing:3px; text-transform:uppercase; }
h4 { font-size:18px; text-transform:uppercase; line-height:25px;}
footer small { font-size: 12px; text-transform:none; text-align: center;  }

/* LAYOUT
-------------------------------------------------------------------------------*/
html, body, #container { height:97.5%; margin: 0; padding: 0; padding-bottom:-8%;}
body { min-width:1164px; min-height:720px;}
#container { height: auto; min-height: 98%; margin:auto 0; margin-left:auto; margin-right:auto; position:relative; }
#content { padding-bottom: 10px; margin-left:135px;  margin-top:60px; width:900px; position:relative; margin-left:auto; margin-right:auto; }
footer {   font-size:15px; text-align:center; height:20px; position:relative; }
#enter { vertical-align:middle; position:relative; margin-top:5%; padding:0; }
header { padding-left:10px; padding-right:10px; background-color:transparent; }
aside { margin-left:520px; position:relative; margin-top:-530px;}

/* LINKS - NAVIGATION - HEADER
-------------------------------------------------------------------------------*/
a { text-decoration:none; border:0px; padding:0; }
a:hover { text-decoration:underline; }
#nav ul { list-style:none; text-align:right; text-transform:uppercase; padding-right:10px; line-height:32px; position:relative; margin-top:-130px; font-size:20px;  }
#logo { padding:10px;  position:relative; z-index:10;}
.navtext { margin-top:-62px; margin-left:160px; z-index:10; position:relative; background-color:transparent; width:800px; }
body#home ul li .home, body#design ul li .design, body#photography ul li .photography,      body#contact ul li .contact { text-decoration:underline; }
#content a .imglink:hover { border:3px; border-style:solid; color:#626162; }

/* PORTFOLIO IMAGES
-------------------------------------------------------------------------------*/
#content .img { padding:10px; position:relative; } 
```

这是我的首页 HTML 代码：

```
<body id="index">
    <div id="container">
        <header>
            <div id="nav">
            </div> <!--- END OF NAV DIV --->
        </header>
        <div id="enter">
            <center><img src="images/enter_logo.png"><br></center><br><br>
            <a href="welcome"><h5>Enter</h5></a>
        </div>
    </div> <!--- END OF CONTAINER DIV --->
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:14:12.743

如果您正在寻找垂直居中，请在您的 CSS 规则中尝试：

```
#outer {
    position:static;
}
#middle {
    position:absolute;
    top:50%;
}
#inner {
    position:absolute;
    top:-50%;
} 
```

你可以在这个[小提琴中查看](http://jsfiddle.net/7Nxvg/)

只需调整窗口大小并查看它的外观

# java - Java：在循环中更改按钮的图像图标（用于幻灯片）

> ID：10271604
> 
> 赞同：0
> 
> 时间：2012-04-22T19:59:25.960
> 
> 标签：java, slideshow

我想创建一个循环，用存储在 ArrayList 中的 BufferedImages 更改 JButton 的图像图标。当我尝试时，它只是将其设置为最后一张图像，而跳过所有其他图像。相关代码是这样的：

```
 private void playButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
    for (int x = 0; x < myPhotos.size(); x++) {
        icon.setImage(myPhotos.get(x));
        displayButton.setIcon(icon);
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
            Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

myPhotos 是缓冲图像的数组列表。

图标是一个 ImageIcon

displayButton 是一个 JButton。

我认为问题可能是 JButton 的图标只能设置一次，我希望你们中的一个人足够聪明，知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:02:34.900

不要在这里使用睡眠，因为你会挡住绘画。您应该使用 Swing 的计时器来执行重复任务，即在固定时间间隔后更改图标。

# android - 将解析的 URL（来自 JSON）添加到字符串数组

> ID：10271606
> 
> 赞同：0
> 
> 时间：2012-04-22T19:59:32.097
> 
> 标签：android, facebook, json

我是 SO 新手，虽然我已经阅读了常见问题解答，但我希望我能正确回答这个问题。

**的背景**

我已经成功地使用 Facebook SDK 获取数据并将它们显示在自定义列表视图中。然而，作为任何初学者，我总是放慢速度，列表视图像疯了一样滞后。为了解决这个问题，我开始使用以下示例实现延迟加载：[https ://stackoverflow.com/a/3068012/450534](https://stackoverflow.com/a/3068012/450534)

**绊脚石**

在这个示例中，@Fedor 已将 URL 硬编码为字符串数组。现在我想用从 Facebook 查询结果 (JSON) 中获取的字符串替换该字符串数组。

此外，这是一个可以遵循的好例子（严格适用于这种情况）还是有更好的例子？我花了将近 2 天的时间试图弄清楚延迟加载部分。但由于缺乏有效的搜索或我刚刚开始的事实，我感到很困惑。

我希望这个问题是有道理的。感谢您的意见。

干杯....

使用 JSON 解析 Facebook 查询返回的图像链接示例。

```
04-23 01:44:28.505: V/PICTURE LINK URL :(3902): https://s-external.ak.fbcdn.net/safe_image.php?d=AQBZ5-jVGrHA2hpU&w=90&h=90&url=http%3A%2F%2Fblog.mozilla.org%2Ftheden%2Fwp-content%2Fthemes%2FTheDen%2Fimg%2Fbg-header.png 
```

@Fedor 在他的示例中硬编码 URL 的方式的一个子集。

```
private String[] mStrings={
            "http://a1.twimg.com/profile_images/349012784/android_logo_small_normal.jpg",
            "http://a1.twimg.com/profile_images/841338368/ea-twitter-icon.png",
            "http://a3.twimg.com/profile_images/64827025/android-wallpaper6_2560x160_normal.png",
            "http://a3.twimg.com/profile_images/77641093/AndroidPlanet_normal.png",
            "http://a1.twimg.com/profile_images/850960042/elandroidelibre-logo_300x300_normal.jpg",
            "http://a1.twimg.com/profile_images/655119538/andbook.png",
            "http://a3.twimg.com/profile_images/768060227/ap4u_normal.jpg",
            "http://a1.twimg.com/profile_images/74724754/android_logo_normal.png",
            "http://a3.twimg.com/profile_images/681537837/SmallAvatarx150_normal.png"
    }; 
```

**编辑**

新的编辑将占用大量空间。因此，我将它链接到 pastebin： http: [//pastebin.com/HZfCTMy6](http://pastebin.com/HZfCTMy6)

facebook API 有一个错误，如果新闻提要上有共享帖子，它不会给出“图片”标签，并且必须进行另一个查询才能使用“object_id”标签获取图片 URL。在 pastebin 代码中，这被放入从第**155**`if + else if`行开始的代码块中

 **这确实是一段很长的代码，我很感激您花时间阅读它。

对此的任何帮助将非常非常感激。两天多，没有解决方案。:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:31:45.133

如果您有这样的硬编码定义：

```
class A {
    private String[] strings = { "str1", "str2", ... };

    public A() {
        ...
    }
    ...
} 
```

你可以简单地通过添加一个 setter 来打破它（并将 String 数组更改为动态集合）：

```
class A {
    private ArrayList<String> strings;

    public A() {
        this.strings = new ArrayList<String>();
        ...
    }

    public void addString(String str) {
        this.strings.add(str);
    }
    ...
} 
```

如果构造函数中有代码依赖于数组来获取值，则将其移至新方法并在完成添加字符串后调用它。

至于来自 facebook 的数据格式，由于它们返回 json，因此很容易获得您需要的确切数据，只需提取所需的 url 并将它们添加到列表中即可。

* * *

# 编辑

这来自您的代码：

```
ArrayList<String> listOfURLS;
....
if (json_data.has("picture"))   {
    for (int j = 0; j < json_data.length(); j++) {
        listOfURLS = new ArrayList<String>();
        listOfURLS.add(changedString);
    }
} else if (json_data.has("object_id")) {
    getPictureURL();
    listOfURLS = new ArrayList<String>();
    listOfURLS.add(finalPictureFromObjectID);
} 
```

这当然会导致*listOfUrls*中只有一个 url，你每次都构造一个新的*ArrayList ，你不应该那样做。*它应该看起来像：

```
ArrayList<String> listOfURLS;
....
if (json_data.has("picture"))   {
    for (int j = 0; j < json_data.length(); j++) {
        listOfURLS.add(changedString);
    }
} else if (json_data.has("object_id")) {
    getPictureURL();
    listOfURLS.add(finalPictureFromObjectID);
} 
```**

# node.js - 在 ExpressJS 响应中发送 JQuery Mobile 错误消息

> ID：10271609
> 
> 赞同：0
> 
> 时间：2012-04-22T19:59:46.047
> 
> 标签：node.js, jquery-mobile, express

我想在凭据错误的情况下为用户显示错误消息。我怎么能在 Express JS 中做到这一点？我尝试了以下代码，但它不起作用：

```
app.get('/', function(req, res, next) {
        passport.authenticate('local', function(err, user, info) {
        if (err) { return next(err) }
        if (!user) { return res.send($( "<div class='ui-loader ui-overlay-shadow ui-body-e ui-corner-all'><h1>YOUR MESSAGE</h1></div>" )
        .css({ "display": "block", "opacity": 0.96, "top": $(window).scrollTop() + 100 })
        .appendTo( $.mobile.pageContainer )
        .delay( 800 )
        .fadeOut( 400, function() {
        $( this ).remove();
        })
        );  }
        req.logIn(user, function(err) {
        if (err) { return next(err); }
        return res.redirect('/account');
        });
        })(req, res, next);
    }); 
```

这有什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:49:32.913

错误消息是否来自策略的验证回调？像这样：

```
// verify callback
return done(null, false, { message: 'Invalid password' }); 
```

如果是这种情况，它将作为`info`上述代码段的参数结束：

```
passport.authenticate('local', function(err, user, info) {
  // arguments to this callback are what was given to done()
  // info.message => 'Invalid password'

  var msg = "<h1>" + info.message + "<h1>"
  res.send(msg)
} 
```

# c++ - 带引用传递参数的指针算术

> ID：10271613
> 
> 赞同：2
> 
> 时间：2012-04-22T20:00:19.007
> 
> 标签：c++, math, pointers, reference

正如标题所说，我需要修改通过引用传递的数组的`i`^(第 th元素......)

我有以下情况：

```
function1(Node *&array, int i) {
   array = array +i; // crash!!!
   // operation on array[i]
}

function2() {
   Node** array;
   // filling the array bla bla bla
   function1(*(array+0), i);
} 
```

问题是：我在写作时做错了什么`array = array +i;`？？？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:04:33.450

由于`array`被声明为指向节点的指针类型，因此参数`*(array+0)`（其计算结果为`*array`）是指向节点的类型。所以你应该声明

```
function1(Node *array, int i) 
```

如果您想`array`在函数中将其视为指向节点的类型指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:14:30.830

我认为你`function1`的设计不正确。我不会尝试传递索引，而是简单地传递`i`-th 元素。

```
function1(Node* array) {
    array->foo = ....
} 
```

并这样称呼它：

```
function1(array[i]); 
```

你真的应该改掉使用`+`运算符作为索引数组的方法的习惯。使用索引`[]`语法。我知道它们可以互换，但索引语法传达了意图。

* * *

在评论中，您声明该索引实际上仅在内部已知`function1`，实际上不是问题中所述的参数。在这种情况下，传递`Node**`给`function1`.

您的带有 reference 参数的代码会修改`array[0]`，因为这`Node*`是您传入的引用。但是您想修改`i`-th 节点。如果您传递对 a 的引用，`Node*`那么您只能修改该对象。为了做你需要的事情，你需要通过`Node**`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:53:46.060

假设您正在尝试修改数组元素，您只需将指针或引用传递给要修改的数组元素。

示例 1：传递对要操作的元素的引用。

```
function1(Node &element) {
   // operation on element
}

function2() {
   Node** array;
   // filling the array bla bla bla
   function1(array[0][i]);
} 
```

示例 2：传递指向要操作的元素的指针。

```
function1(Node *element) {
   // operation on *element
}

function2() {
   Node** array;
   // filling the array bla bla bla
   function1(*array + i);
} 
```

示例 3：传递指向数组的指针和元素的索引。

```
function1(Node *array, int i) {
   Node *element = array + i;
   // operation on *element
}

function2() {
   Node** array;
   // filling the array bla bla bla
   function1(*array, i);
} 
```

示例 4：与示例 3 相同，但使用本地引用。

```
function1(Node *array, int i) {
   Node &element = array[i];
   // operation on element
}

function2() {
   Node** array;
   // filling the array bla bla bla
   function1(*array, i);
} 
```

示例 5：与示例 3 相同，但将参数重新用作局部变量。请注意，这仅适用于数组不是参考！你应该避免这种风格。

```
function1(Node *array, int i) {
   array += i;
   // operation on *array
}

function2() {
   Node** array;
   // filling the array bla bla bla
   function1(*array, i);
} 
```

# android - 安卓游戏中的分数显示

> ID：10271614
> 
> 赞同：2
> 
> 时间：2012-04-22T20:00:21.323
> 
> 标签：android

我刚刚完成了一个安卓游戏“杀死他们”，现在我想添加一个高分数据库，这是游戏的代码：

包kill.them.all；

```
import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;

public class GameView extends SurfaceView {
    private Bitmap bmp;
    private SurfaceHolder holder;
    private GameLoopThread gameLoopThread;
    private List<Sprite> sprites = new ArrayList<Sprite>();
    private long lastClick;
    private Bitmap bmpBlood;
    private List<TempSprite> temps = new ArrayList<TempSprite>();
public GameView(Context context) {
    super(context);
    gameLoopThread = new GameLoopThread(this);
    holder = getHolder();
    holder.addCallback(new Callback() {

        public void surfaceDestroyed(SurfaceHolder holder) {

        }

        public void surfaceCreated(SurfaceHolder holder) {
            createSprites();
            gameLoopThread.setRunning(true);
            gameLoopThread.start();

        }

        public void surfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {
        }
    });

bmpBlood = BitmapFactory.decodeResource(getResources(), R.drawable.blood1);
}
private void createSprites() {
    sprites.add(createSprite(R.drawable.bad1));

}

private Sprite createSprite(int resouce) {
    Bitmap bmp = BitmapFactory.decodeResource(getResources(), resouce);
    return new Sprite(this, bmp);
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.BLACK);
      for (int i = temps.size() - 1; i >= 0; i--) {
            temps.get(i).onDraw(canvas);
      }
    for (Sprite sprite : sprites) {
        sprite.onDraw(canvas);
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (System.currentTimeMillis() - lastClick > 300) {
        lastClick = System.currentTimeMillis();
      synchronized (getHolder()) {
          float y=event.getY();
            float x=event.getX();
    for (int i = sprites.size() - 1; i >= 0; i--) {
        Sprite sprite = sprites.get(i);
        if (sprite.isCollition(x,y)) {
            sprites.remove(sprite);

            temps.add(new TempSprite(temps, this, x, y, bmpBlood));
            break;
        }
    }
    }
        }
        return true;
    }
} 
```

我只想在游戏开始 20 秒后显示游戏结束和得分（你杀死了多少精灵）！但我不知道该怎么做，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T13:28:28.293

```
//in global
int heroKill=0;

 if (sprite.isCollition(x,y)) {
        sprites.remove(sprite);
        heroKill++;
        temps.add(new TempSprite(temps, this, x, y, bmpBlood));
        break;
    }

 //indrawable
 lblHeroKillShow.setText(""+heroKill):

 //returning from game
public void onBackPressed() {
    super.onBackPressed();
// more implementation.
 //impelement database
 mydatabase.add(herokill);
} 
```

# php - 自定义页面和页面模板 wordpress

> ID：10271616
> 
> 赞同：2
> 
> 时间：2012-04-22T20:00:38.707
> 
> 标签：php, wordpress, wordpress-theming

我使用 wordpress 作为我个人投资组合网站的 CMS。我希望能够创建不同的页面，这些页面的标题等略有不同。

环顾四周后，我意识到我可以使用 pages.php 和模板页面，但是我不明白它们是如何工作的。

例如，目前我通过在仪表板上创建一个新页面并在那里执行 html 来创建一个联系页面。我把永久链接放在我标题中的“a”标签中。然后很好地转到该页面，但我希望我的标题有所不同。

我想基本上我很困惑，因为我看过的说明并没有解释页面是如何显示的。在页面模板中我这样做吗？

```
<?php
/*
Template Name: [your page name here]
*/
?>
<?php include(“header_new.php”); ?>

<?php get_footer(); ?> 
```

但让我困惑的是wordpress是如何知道要放置页面的？显然对于索引你做了一个后循环。但我只想显示我的页面。

我错过了这样的东西吗？...

```
<?php
/*
Template Name: [your page name here]
*/
?>
<?php include(“header_new.php”); ?>
// POST PAGE FUNCTION HERE>>>>????
<?php get_footer(); ?> 
```

我当前的主题可以在这里查看

希望这不是我错过的显而易见的事情。非常感谢您花时间提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:31:53.250

先看一下这个页面模板（只是一个例子）

```
<?php
/*
Template Name: Contact Page
*/
?>
<?php get_header('contact'); ?>

    <div id="post-wrap" class="full-width-wrap">
        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
        <h1 class="page-title"><?php the_title(); ?></h1>           
        <?php the_content(); ?>
        <?php endwhile; ?>
        <?php endif; ?> 
    </div>

<?php get_footer(); ?> 
```

如果您将上述代码保存在一个文件中并将其命名并将其`page-contactpage.php`保存/保存在主题的根文件夹中（index.php 所在的位置），那么它将成为您的模板之一，您可以从`template`组合框中选择此模板（位于当您从`admin->Add New Page`. 如果您使用此模板创建页面，那么您的页面将使用此模板而不是默认页面模板。

`get_header('contact');`请注意，我使用的是不同的标题行，而不是同一文件夹中的`header.php`标题必须具有名称`header-contact.php`（可能具有不同的内容）。现在，如果您在创建时选择此模板，您的联系页面将使用具有不同标题的此模板。

# php - 文件名的唯一 ID。

> ID：10271617
> 
> 赞同：1
> 
> 时间：2012-04-22T20:00:44.387
> 
> 标签：php, function

嗨，我已经为我的项目制作了这段代码。

```
uniqid().date('ymdhis').rand(); 
```

这有多独特？

它是否足够独特以防止任何可能的碰撞？即使对于每天提交的文件数量天文数字的大型网站？

还是我应该添加更多功能？（我不想，因为输出已经很长了。）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:09:16.843

Depending on what language you are using (i assume it is php) it is more then enough.

uniqid() is a command that generates a id based on a timestamp, making sure that it won't output a string twice. so only the `uniqid()` would already suffice

# spring - Spring：@Transactional with readonly=true 不调用 conn.setReadOnly(true)

> ID：10271624
> 
> 赞同：4
> 
> 时间：2012-04-22T20:01:27.147
> 
> 标签：spring, hibernate, transactions, readonly

我已经用`@Transactional` `readonly=true`.

因为那个 spring/hibernate 没有调用 jdbc 连接驱动程序的 setReadonly 方法。我能做些什么？

因为我将使用主从复制，并且 jdbc 池使用连接上的只读标志将查询路由到主服务器或从服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T09:47:19.520

首先，当您的 PU 事务模式为 RESOURCE_LOCAL 时，您应该只为 JDBC 连接设置 readOnly 标志。如果它是 JTA，那么您不能更改该设置，因为您不会为事务中的每个 jdbc 调用获得相同的 jdbc 连接实例（JTA - 而不是 Hibernate - 将确保事务行为）。当它是 LOCAL 时，Hibernate 在第一次需要它时打开一个 jdbc 连接，并在事务期间保留它。

**1\. JPA**

如果您将 JPA 与 Hibernate 作为提供程序一起使用，则可以通过将您自己的 JpaDialect 实现提供给 EMF 定义来添加此额外行为。使用 Hibernate 时，通常会注入一个 HibernateJpaDialect。

JpaDialect 接口有一个`getJdbcConnection(em, readOnly)`方法可以返回实际 JDBC 连接的句柄。此方法在事务开始时由 JpaTransactionManager 调用。默认情况下，由于这种 JTA/RESOURCE_LOCAL 对偶性，HibernateJpaDialect 不会更改返回连接上的只读设置，但如果您只运行本地事务，则可以这样做。

这是实现您的目标的此类 JpaDialect 的实现：

**ResourceLocalReadOnlyAwareHibernateJpaDialect**

```
public class ResourceLocalReadOnlyAwareHibernateJpaDialect extends HibernateJpaDialect {
  public ConnectionHandle getJdbcConnection(EntityManager entityManager, boolean readOnly) throws PersistenceException, SQLException {
    Session session = getSession(entityManager);
    return new HibernateReadOnlyAwareConnectionHandle(session, readOnly);
  }

  // this is similar to spring's HibernateJpaDialect own internal class,
  // except for the readonly flags.
  private static class HibernateReadOnlyAwareConnectionHandleimplements ConnectionHandle {
    private final Session session;
    private final boolean readOnly;
    private static volatile Method connectionMethod;

    public HibernateConnectionHandle(Session session, boolean readOnly) {
      this.session = session;
      this.readOnly = readOnly;
    }

    public Connection getConnection() {
      try {
        if (connectionMethod == null) {
          // reflective lookup to bridge between Hibernate 3.x and 4.x
          connectionMethod = this.session.getClass().getMethod("connection");
        }
        Connection con = (Connection) ReflectionUtils.invokeMethod(connectionMethod, this.session);
        con.setReadOnly(this.readOnly);
        return con;
      } catch (NoSuchMethodException ex) {
        throw new IllegalStateException("Cannot find connection() method on Hibernate session", ex);
      }
    }

    public void releaseConnection(Connection con) {   // #1
      con.setReadOnly(false);
      JdbcUtils.closeConnection(con);
    }
  }

} 
```

注意#1：在关闭连接之前将 readOnly 标志重置为 false （实际上不是真正的`connection.close()`调用，只是将连接释放到池中）。不太确定是什么触发了这个方法调用，但是在与更改位置相同的类中重置 readOnly 标志看起来是合法的。

**2.纯休眠**

首先，确保`HibernateTransactionManager.prepareConnection`保持真实。

然后，我不知道该怎么办。您必须调试 Spring 的`HibernateTransactionManager.isSameConnectionForEntireSession()`：如果该方法返回 true，将调用 connection.setReadOnly()，因此一切正常。

如果没有，您可以将 Hibernate 的 connectionReleaseMode 设置更改为 ON_CLOSE（hibernate 属性`hibernate.transaction.auto_close_session=true`，这是 Hibernate 3.1 之前的默认值），或者覆盖`HibernateTransactionManager.isSameConnectionForEntireSession()`以始终返回 true（对于 HibernateTransactionManager 注释而言，这被认为是安全的）。两者都是“高级调整”，但应该是安全的 AFAIK。实际上，我认为应该将 ON_CLOSE**和**AFTER_TRANSACTION 释放模式`HibernateTransactionManager.isSameConnectionForEntireSession()`更改为返回 true ：关于 HibernateTransactionManager，在事务完成后无论如何都会进行清理，因此不会改变 Hibernate 行为。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T19:18:13.383

这里提到了两个值得研究的解决方案：[http ://www.dragishak.com/?p=307](http://www.dragishak.com/?p=307)

1.  使用 AOP 将 JDBC 连接设置为只读。这是博文的重点。
2.  使用连接池中的钩子根据`TransactionSynchronizationManager.isCurrentTransactionReadOnly()`. 这取决于您使用的连接池实现（例如 BoneCP、c3p0，不确定 DBCP 是否支持它）。请参阅上面链接的评论部分。**

# java - Java格式加倍到忽略零的特定位数

> ID：10271629
> 
> 赞同：2
> 
> 时间：2012-04-22T20:01:34.510
> 
> 标签：java, format, double

我想将一些双精度值格式化为忽略起始零的特定位数。

例如，假设格式为 6 位：

```
131.468627436358  ->  131.469
3.16227766016838  ->  3.16228
0.66018099039325  ->  0.660181
0.02236067977499  ->  0.0223607 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:23:13.920

BigDecimal 允许正确处理有效数字。这个：

```
MathContext round3SigFig = new MathContext(3,RoundingMode.HALF_UP);
System.out.println((new BigDecimal(0.000923874932)).round(round3SigFig)); 
```

产生：

```
0.000924 
```

但是，显然，通过任意精度对象表示传递浮点并不理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:39:36.533

使用对数函数计算您需要的附加位数。

```
public static int leadingZeros (double d) {
    return (d >= 1.0) ? 0 : (int) (-1 * (Math.floor (Math.log (d) / Math.log (10))));
} 
```

为了

```
 System.out.println (leadingZeros (4));
    System.out.println (leadingZeros (0.4));
    System.out.println (leadingZeros (0.04));
    System.out.println (leadingZeros (0.004)); 
```

它返回 0、1、2、3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:34:01.923

将此视为最后的机会选项：如何将数字转换为字符串，记住前六位数字并带有“，”并转换回双精度数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T20:34:31.897

我相信这与以下问题密切相关：[使用最多五个总数字格式化双精度值，如有必要，四舍五入十进制数字](https://stackoverflow.com/questions/9978205/format-double-values-using-a-maximum-of-five-total-digits-rounding-decimal-digi)

我链接到哪些用途的问题中有一个答案，`MathContext`并且`BigDecimal`（比如也许WeCouldStealAVan的答案）。但是，这对我来说不太奏效，因为我关心数字的总数。但是，它可能对您有用。

我最终编写了自己的自定义解决方案，其格式完全符合我的需要。也许这也满足您的要求，或者可以轻松修改以满足它们：

```
public static String format( double value, int totalDigits )
{
    String s = String.valueOf( value );
    int decimal = s.indexOf( '.' );

    // there is no decimal part, so simply return the String
    if ( decimal == -1 )
    {
        return s;
    }
    else
    {
        int finalLength;

        // example: 23.34324
        // the final result will be length totalDigits + 1 because we will include the decimal
        if ( decimal < totalDigits )
        {
            finalLength = totalDigits + 1;
        }
        // example: 99999
        // the final result will be length totalDigits because there will be no decimal
        else if ( decimal == totalDigits )
        {
            finalLength = totalDigits;
        }
        // example: 999999.999
        // we can't make the final length totalDigits because the integer portion is too large
        else
        {
            finalLength = decimal;
        }

        finalLength = Math.min( s.length( ), finalLength );

        return s.substring( 0, finalLength );
    }
}

public static void main( String[] args )
{
    double[] data = { 1, 100, 1000, 10000, 100000, 99999, 99999.99, 9999.99, 999.99, 23.34324, 0.111111 };
    for ( double d : data )
    {
        System.out.printf( "Input: %10s \tOutput: %10s\n", Double.toString( d ), format( d, 5 ) );
    }
} 
```

# php - PHP中的复选框

> ID：10271631
> 
> 赞同：0
> 
> 时间：2012-04-22T20:01:36.193
> 
> 标签：php

我正在开发一个 PHP Web 应用程序，该应用程序目前允许用户输入属性信息。此信息的一部分是租金金额。我要做的是创建一个页面，其中每个租金都列在一个复选框旁边。当用户勾选该框时，租金将被移除（已支付）并显示在另一个页面中，即已支付租金页面。

我有正确显示每个用户的租金列表，但我需要帮助的是实现允许用户勾选并将租金标记为已支付的复选框，然后将其移动到另一个页面。

任何人都可以提供一些指示吗？我对 PHP 相当陌生，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:18:17.920

我认为在这种情况下你必须为你的项目使用 AJAX，当用户选择一个复选框然后向服务器发送一个 get 或 post 请求时，如果一切正常，你可以将用户重定向到另一个页面并显示结果！php 本身是一个服务器端编程，所以你需要一个客户端脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:22:46.920

使用 jQuery 和 PHP：

```
<?php
    foreach($property as $p):
        ... # somewhere along the line where you list properties
        echo "<input class='property_rent_checkbox' type='checkbox' value='".$p['id']."' />";
    endforeach;
?> 
```

然后按照 vahid 的建议使用 Ajax（使用 jQuery）：

```
<script type="text/javascript">
    $('input.property_rent_checkbox').click(function(){
        $.ajax('/make_rented.php', dataType:'html',type:'GET',data:{id:($(this).val())}, 
            complete:function(r){ 
                if(r.responseText!=='OK') 
                    return alert('didn\'t work'); 
            return alert('Successfully rented'); 
        }});
    });
</script> 
```

你还需要一个文件`make_rented.php`：

```
<?php 
    if(empty($_GET['id']) || !is_numeric($_GET['id'])) return;
    // ... use SQL to make rented... then send back "OK"
    die('OK');
?> 
```

这个例子是概念性的，应该指导你如何编程，但你也应该知道样板不存在于框架之外，这完全取决于你自己的编程技术和你在编写代码时要考虑的应用程序中的其他因素.

# jqgrid - jqGrid中的导航栏问题

> ID：10271634
> 
> 赞同：0
> 
> 时间：2012-04-22T20:02:00.553
> 
> 标签：jqgrid, navigation

我的 jqGrid 配置遇到问题。我正在尝试使用此配置激活导航栏：

```
$(function(){ 
    $("#list").jqGrid({
        url:'test.xml',
        datatype: 'xml',
        mtype: 'GET',
        colNames:['Name','Last Name', 'Id Nbr'],
        colModel :[ 
           {name:'name', index:'name', width:200}, 
           {name:'lastName', index:'lastName', width:200}, 
           {name:'idnbr', index:'idnbr', width:60}
        ],
        pager: '#pager',
        rowNum:10,
        rowList:[10,20,30],
        sortname: 'name',
        sortorder: 'desc',
        viewrecords: true,
        gridview: true,
        loadonce: true,
        sortable: true,
        rownumbers: true,
        height: '100%',
        width: '800',
        caption: 'My first grid'
    }); 
}); 
jQuery("#list").jqGrid('navGrid','#pager',{edit:true,add:true,del:true}); 
```

我的 HTML 代码如下所示：

```
<table id="list"><tr><td/></tr></table> 
<div id="pager"></div> 
```

我在 Stackoverflow 上阅读了很多关于如何配置导航栏的答案，但我无法在栏中获得我的添加、编辑、删除、查找和刷新按钮，只有页面处理。

我想知道我的代码是否遗漏了什么，因为我试图获得这个按钮，但直到现在还没有结果。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:18:25.490

错误是您`navGrid` **在**. `$(function(){/*it should be here*/});`因此该方法不仅会在创建网格之前被调用，而且可能会在元素被放置（加载）到页面之前发生`<table>`事件`<page>`。

只需将`navGrid`上面一行的调用移到内部`$(function(){/*it should be here*/});`（与 jQuery.ready 相同`$(document).ready(function () {/*the same code inside*/})`，请参阅[jQuery.ready](http://api.jquery.com/ready/)），您的代码将按预期工作。

# visual-c++ - 逆向工程频繁联锁Increment/Decrement

> ID：10271635
> 
> 赞同：1
> 
> 时间：2012-04-22T20:02:08.650
> 
> 标签：visual-c++, reverse-engineering, interlocked

我试图对一些代码进行逆向工程并多次遇到一个常见的模式，但我不确定它会是什么。该代码是使用 VC++ 2010 编译的，并使用一些外部 CLR 组件进行显示（但据我所知，不适用于任何内部组件）。

我看到的一些模式是在一些返回对象的函数中，它们要么：

*   `InterlockedIncrement`在`obj_ptr - 12`返回之前做一个
*   检查`InterlockedDecrement`on的结果`obj_ptr - 12`，如果结果为 0，则调用`*(*(obj_ptr - 24) + 64)(obj_ptr - 24)`

它看起来像一些基于引用计数的 GC，并急切地调用析构函数。任何人都可以确认这是否正确，还是其他系统？

如果那是正确的 - 我可以看到一些已知的界面吗？我想知道我是否可以假设在返回值之前进行增量的地方可以假设为该类型的“新”的一些扩展版本。

另外，我在哪里可以找到有关此的更多信息？看起来这不能是标准对象的 vtable 的一部分，我希望它是前面的短指针。也许是 RTTI ......但我找不到任何关于它的布局的好例子。我不希望这里有任何多重继承会使基类更进一步。

# xml - XSLT 合并挑战

> ID：10271639
> 
> 赞同：1
> 
> 时间：2012-04-22T20:02:28.910
> 
> 标签：xml, xslt, merge

首先，我不喜欢 XSLT。其次，我知道有几篇关于如何使用 XSLT 执行合并的文章，但我没有找到任何关于我的特定挑战的内容。

我有 2 个 XML 文件。一个是新的客户信息，另一个是下面的当前/以前的信息。我需要生成的 XML 来合并所有客户/地址并将属性（NoChange、Updated、Deleted、New）添加到最终 XML 的属性中：

* * *

### 输入 1

当前客户信息。

```
<Customer>
 <CustId>1</CustId>
 <CustName>Acme</CustName>
 <Addresses>
  <Address>
   <AddressesId>1</AddressesId>
   <Street>123 Main</Street>
  </Address>
  <Address>
   <AddressesId>2</AddressesId>
   <Street>345 Main</Street</Street>
  </Address>
  <Address>
   <AddressesId>4</AddressesId>
   <Street>888 Goner St.</Street>
  </Address>
 </Addresses>
</Customer> 
```

* * *

### 输入 2

更新信息。

```
<Customer>
 <CustId>1</CustId>
 <CustName>Acme</CustName>
 <Addresses>
  <Address>
   <AddressesId>2</AddressesId>
   <Street>999 Updated St.</Street>
  </Address>
  <Address>
   <AddressesId>3</AddressesId>
   <Street>3999 New St.</Street>
  </Address>
 </Addresses>
</Customer> 
```

* * *

### 结果

```
<Customer>
 <CustId>1</CustId>
 <CustName>Acme</CustName>
 <Addresses>
  <Address>
   <Address status="NoChange">
   <AddressesId>1</AddressesId>
   <Street>123 Main</Street>
  </Address>
  <Address>
   <Address status="Updated">
   <AddressesId>2</AddressesId>
   <Street>999 Updated St.</Street>
  </Address>
   <Address status="New">
   <AddressesId>3</AddressesId>
   <Street>3999 New St.</Street>
  </Address>
  <Address status="Deleted">
   <AddressesId>4</AddressesId>
   <Street>888 Goner St.</Street>
  </Address>
 </Addresses>
</Customer> 
```

我怎样才能做我想要的合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:56:48.760

我决定尝试将此作为 XSLT 3.0 中新 xsl:merge 指令的用例。使用当前的 Saxon 实现，以下给出了预期的结果：

```
<xsl:stylesheet version="3.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

  <xsl:mode on-no-match="shallow-copy"/>

  <xsl:strip-space elements="*"/>
  <xsl:output indent="yes"/>

  <xsl:variable name="original" select="doc('merge018-current.xml')"/>
  <xsl:variable name="updates" select="doc('merge018-updates.xml')"/>

  <xsl:template name="main">
    <xsl:apply-templates select="$original"/>
  </xsl:template>  

  <xsl:template match="Addresses">
    <Addresses>
      <xsl:merge>
        <xsl:merge-source for-each="$updates, $original"
                        select=".//Address">
          <xsl:merge-key select="AddressesId"/>
        </xsl:merge-source>
        <xsl:merge-action>
          <xsl:variable name="status" select="
            if (count(current-group()) = 1)
            then if (current-group()[1]/root(.) is $original) then 'Deleted' else 'New'
            else if (deep-equal(current-group()[1], current-group()[2])) then 'NoChange' else 'Updated'"/>
          <Address status="{$status}">
            <xsl:copy-of select="current-group()[1]/(AddressesId, Street)"/>
          </Address>
        </xsl:merge-action>
      </xsl:merge>
    </Addresses>
  </xsl:template>
</xsl:stylesheet> 
```

我并不是建议将此作为一种实用的解决方案，只是为了您的兴趣而提供它。如果您对此或类似的东西作为测试用例发布有任何异议，请现在说出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:00:30.197

**I. 这个 XSLT 1.0 转换**（相应的 XSLT 2.0 解决方案更短更容易）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kAddrById" match="Address"
  use="concat(../../CustId, '+', ../../CustName,
              '+', AddressesId)"/>

 <xsl:key name="kNodeByGenId" match="node()"
          use="generate-id()"/>

 <xsl:param name="pUpdatesPath" select=
  "'file:///c:/temp/delete/CustomersUpdates.xml'"/>

 <xsl:variable name="vUpdates" select=
   "document($pUpdatesPath)"/>

 <xsl:variable name="vmainDoc" select="/"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Addresses">
  <Addresses>
   <xsl:apply-templates select="Address | $vUpdates/*/*/*">
    <xsl:sort select="AddressesId" data-type="number"/>
   </xsl:apply-templates>
  </Addresses>
 </xsl:template>

 <xsl:template match="Address">
   <xsl:variable name="vIsThisUpdate" select=
     "generate-id(/) = generate-id($vUpdates)"/>

   <xsl:variable name="vOtherDoc" select=
    "$vmainDoc[$vIsThisUpdate]
    |
     $vUpdates[not($vIsThisUpdate)]
    "/>

    <xsl:variable name="vCustId" select="../../CustId"/>
    <xsl:variable name="vCustName" select="../../CustName"/>
    <xsl:variable name="vAddrId" select="AddressesId"/>

    <xsl:variable name="vOtherNodeId">
     <xsl:for-each select="$vOtherDoc">
       <xsl:value-of select=
       "generate-id(key('kAddrById',
                        concat($vCustId,'+', $vCustName,
                               '+', $vAddrId)
                       )
                   )"/>
     </xsl:for-each>
    </xsl:variable>
    <xsl:apply-templates mode="selected"
     select="self::node()
              [$vIsThisUpdate
             or
              (not($vIsThisUpdate) and not(string($vOtherNodeId)))
              ]">
     <xsl:with-param name="pIsUpdating" select="$vIsThisUpdate"/>
     <xsl:with-param name="pOtherDoc" select="$vOtherDoc"/>
     <xsl:with-param name="pOtherNodeId"
                     select="string($vOtherNodeId)"/>
    </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="Address" mode="selected">
  <xsl:param name="pIsUpdating"/>
  <xsl:param name="pOtherDoc" select="/.."/>
  <xsl:param name="pOtherNodeId"/>

  <xsl:variable name="vStatus">
   <xsl:choose>
     <xsl:when test="$pIsUpdating and not($pOtherNodeId)">New</xsl:when>
       <xsl:when test="$pIsUpdating">
         <xsl:variable name="vOldStreet">
          <xsl:for-each select="$pOtherDoc">
            <xsl:value-of select=
              "key('kNodeByGenId', $pOtherNodeId)/Street"/>
          </xsl:for-each>
         </xsl:variable>

         <xsl:choose>
           <xsl:when test=
           "Street = string($vOldStreet)">NoChange</xsl:when>
           <xsl:otherwise>Updated</xsl:otherwise>
         </xsl:choose>
       </xsl:when>
       <xsl:otherwise>Deleted</xsl:otherwise>
   </xsl:choose>
  </xsl:variable>

  <Address>
    <Address status="{$vStatus}"/>
    <xsl:apply-templates/>
  </Address>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Customer>
    <CustId>1</CustId>
    <CustName>Acme</CustName>
    <Addresses>
        <Address>
            <AddressesId>1</AddressesId>
            <Street>123 Main</Street>
        </Address>
        <Address>
            <AddressesId>2</AddressesId>
            <Street>345 Main</Street>
        </Address>
        <Address>
            <AddressesId>4</AddressesId>
            <Street>888 Goner St.</Street>
        </Address>
    </Addresses>
</Customer> 
```

**并在`c:/temp/delete/CustomersUpdates.xml`此 XML 文档**中（与提供的略有不同，以使第一个地址以状态“NoChange”结束）：

```
<Customer>
    <CustId>1</CustId>
    <CustName>Acme</CustName>
    <Addresses>
        <Address>
            <AddressesId>1</AddressesId>
            <Street>123 Main</Street>
        </Address>
        <Address>
            <AddressesId>2</AddressesId>
            <Street>999 Updated St.</Street>
        </Address>
        <Address>
            <AddressesId>3</AddressesId>
            <Street>3999 New St.</Street>
        </Address>
    </Addresses>
</Customer> 
```

**产生想要的正确结果**：

```
<Customer>
   <CustId>1</CustId>
   <CustName>Acme</CustName>
   <Addresses>
      <Address>
         <Address status="NoChange"/>
         <AddressesId>1</AddressesId>
         <Street>123 Main</Street>
      </Address>
      <Address>
         <Address status="Updated"/>
         <AddressesId>2</AddressesId>
         <Street>999 Updated St.</Street>
      </Address>
      <Address>
         <Address status="New"/>
         <AddressesId>3</AddressesId>
         <Street>3999 New St.</Street>
      </Address>
      <Address>
         <Address status="Deleted"/>
         <AddressesId>4</AddressesId>
         <Street>888 Goner St.</Street>
      </Address>
   </Addresses>
</Customer> 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kAddrById" match="Address"
  use="concat(../../CustId, '+', ../../CustName,
              '+', AddressesId)"/>

 <xsl:param name="pUpdatesPath" select=
  "'file:///c:/temp/delete/CustomersUpdates.xml'"/>

 <xsl:variable name="vUpdates" select=
   "document($pUpdatesPath)"/>

 <xsl:variable name="vmainDoc" select="/"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Addresses">
  <Addresses>
   <xsl:apply-templates select="Address | $vUpdates/*/*/*">
    <xsl:sort select="AddressesId" data-type="number"/>
   </xsl:apply-templates>
  </Addresses>
 </xsl:template>

 <xsl:template match="Address[root() is $vUpdates]">
    <xsl:variable name="vOtherDoc" select="$vmainDoc"/>

    <xsl:variable name="vOtherNode" select="my:OtherNode(., $vOtherDoc)"/>

    <xsl:variable name="vStatus" select=
     "concat('New'[not($vOtherNode)],
             'NoChange'[$vOtherNode 
                       and current()/Street eq $vOtherNode/Street],
             'Updated'[$vOtherNode and current()/Street ne $vOtherNode/Street]
             )"/>
    <xsl:apply-templates select="self::node()" mode="selected">
     <xsl:with-param name="pStatus" select="$vStatus"/>
    </xsl:apply-templates>
 </xsl:template>

  <xsl:template match="Address[not(root() is $vUpdates)]">
   <xsl:variable name="vOtherDoc" select="$vUpdates"/>

    <xsl:variable name="vOtherNode" select="my:OtherNode(., $vOtherDoc)"/>

    <xsl:apply-templates select="self::node()[not($vOtherNode)]" mode="selected">
      <xsl:with-param name="pStatus" select="'Deleted'"/>
    </xsl:apply-templates>
  </xsl:template>

 <xsl:template match="Address" mode="selected">
  <xsl:param name="pStatus"/>

  <Address>
    <Address status="{$pStatus}"/>
    <xsl:apply-templates/>
  </Address>
 </xsl:template>

 <xsl:function name="my:OtherNode" as="element()?">
   <xsl:param name="pThis" as="element()"/>
   <xsl:param name="pOtherDoc" as="document-node()"/>

    <xsl:sequence select=
     "key('kAddrById',
          concat($pThis/../../CustId,'+', $pThis/../../CustName,
                 '+', $pThis/AddressesId
                 ),
                 $pOtherDoc
          )"/>
 </xsl:function>
</xsl:stylesheet> 
```

**当此转换应用于相同的文档时，会产生相同的正确结果。**

# function - 将具有不同返回类型的函数的地址分配给函数指针

> ID：10271640
> 
> 赞同：0
> 
> 时间：2012-04-22T20:02:33.830
> 
> 标签：function, pointers

int (*ptFunction) (float,char,char);

字符函数（浮点数，字符，字符）；

如果我们像上面两个函数声明那样使用不同的返回类型，下面的赋值会正常工作还是会产生编译错误？

ptFunction = &func;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:43:12.510

以下代码引发错误（在 g++ 中）：

```
int (*pFun)(float, char, char);

char fun1(float, char, char) {}

int main() {

  pFun = &fun1; // error: invalid conversion from char (*)(float, char, char) to int (*)(float, char, char)

  return 0;
} 
```

# c++ - 为 c++ 类重载 operator+。

> ID：10271642
> 
> 赞同：-8
> 
> 时间：2012-04-22T20:02:48.567
> 
> 标签：c++, class, object, overloading, operator-keyword

我正在尝试为我的类实现 operator+（它必须连接来自同一类的两个对象的单链表），但程序给出错误：“lab5.exe 中 0x01351ca3 处的未处理异常：0xC0000005：访问冲突读取位置 0xcccccccc 。” 奇怪的是它正确连接，因为我在 operator+ 中返回 temp 之前正在检查它（通过 //temp.print();）。

如果您能解释一下我的错误在哪里，我将不胜感激。这是代码：

```
#include <iostream>
#include <cstdlib>
#include <string>
using namespace std;

    class list{

    struct lista
    {
        int num;
        char* word;
        lista* next;
    };
    lista* head;
    char* name;
    public:
        list(char* name1){head=NULL;name=new char[strlen(name1)+1];strcpy(name,name1);}
        char getChar(int key, int index);
        void setChar(int key, int index, char c);
        void insert(int number,char* txt);
        void remove(int number);
        void print();
        list(const list &o);
        list& operator=(const list &x);
        list& operator+(list &x);
        ~list();
    };
    void list::insert(int number,char* txt){
        lista* ptr,*tmp;
            ptr=head;
        lista* newlista=new lista;
        newlista->num=number;
        newlista->next=NULL;
        newlista->word= new char[strlen(txt)+1];
        strcpy(newlista->word,txt);
        if(head==NULL){
            head=newlista;
            newlista->next=NULL;
        }
        else while(ptr!=NULL){
                if(strcmp(txt,ptr->word)>=0){
                    if(ptr->next!=NULL && strcmp(txt,ptr->next->word)<=0)
                {
                    tmp=ptr->next;
                    ptr->next=newlista;
                    newlista->next=tmp;
                    break;
                }
                    else if(ptr->next!=NULL && strcmp(txt,ptr->next->word)>0)
                        ptr=ptr->next;
                    else
                     {
                        //next is empty
                        ptr->next=newlista;
                        break;
                     }
        }
                else{
                    //txt less than in 1st element
                    newlista->next=head;
                    head=newlista;
                    break;
                }      
        }
        return;
    }

    void list::print(){
        cout<<name<<";"<<endl;
        lista *druk;
        druk=head;
        while(druk!=NULL){
            cout<<"txt: "<<druk->word<<" | "<<"num: "<<druk->num<<endl;
            druk=druk->next;
        }
        cout<<endl;
        return;
    }

    void list::remove(int number){
        if(head==NULL)
            return;
        if(head->num==number){
            lista* ptr=head;
            head=head->next;
            delete [] ptr->word;
            delete ptr;
            return;
        }
        lista* ptr=head;
        while(ptr->next!=NULL && ptr->next->num!=number)
            ptr=ptr->next;
        if(ptr->next==NULL){
            cout<<number<<" element not found"<<endl;
            return;
        }
        lista* todelete=ptr->next;
        ptr->next=todelete->next;
        delete [] todelete->word;
        delete todelete;
        return;
    }
    list::list(const list &o)
    {
        lista *xtr = o.head;
        head=NULL;// without it doesn't work.
        lista *etr=head;// set etr on head?
        while (xtr)
        {
    lista* ntr = new lista;
        if (!ntr)
            {
    cerr << "list::CopyConstructor: Allocation memory failure!";
    cerr << endl;
    break;
            }
    ntr->num = xtr->num;
    ntr->word= new char[strlen(xtr->word)+1];
    strcpy(ntr->word,xtr->word);
    ntr->next = NULL;
        if (head)
            etr->next = ntr;    
        else
            head = ntr;
    etr = ntr; // keep track of the last element in *this
    xtr = xtr->next;
        }
    name = new char[strlen(o.name)+5];
    strcpy(name,o.name);
    strcat(name,"Copy");
    }

    list& list::operator=(const list &x)
    {
        if(this==&x)
            return *this;
        lista *etr=head;
        while(etr) // removing list from this
        {
            etr=etr->next;
            delete head;
            head=etr;
        }
        lista *xtr=x.head;
        while(xtr)
        {
            int copied=xtr->num;
            lista *ntr= new lista;
            ntr->word=new char[strlen(xtr->word)+1];
            if (!ntr) 
                {
    cerr << "list::operator=: Allocation memory failure!" << endl;
    break;
                }
            ntr->num=copied;
            strcpy(ntr->word,xtr->word);
            ntr->next=NULL;
            if (!head)
                head = ntr;
            else
                etr->next = ntr;

                etr = ntr; // keep track of the last element in *this
                xtr = xtr->next;
    }
    char *name=new char[strlen(x.name)+1];
    strcpy(name,x.name);
    return *this;
    }

    list::~list()
    {
        cout<<"Object with name:"<<name<<" destroyed!"<<endl;
        delete [] name;
        lista *dtr=head;
        while(dtr) // removing lista from this
        {
            dtr=dtr->next;
            delete [] head->word;
            delete head;
            head=dtr;
        }

    }

    list& list::operator+(list &x)
    {
        list temp(this->name);
        temp=*this;// using previously made operator= which creates the deep copy of singly linked list from this into temp;
        lista *xtr=x.head;
        while(xtr)
        {
            temp.insert(xtr->num,xtr->word);
            xtr=xtr->next;
        }   
        //temp.print();
        return temp;
    }
    int main(){
        list l1("lista1");
        l1.insert(5,"Endian");
        l1.insert(7,"Endianness");
        l1.insert(100,"Hexediting");
        l1.insert(34,".mil");

        l1.print();
        list l2(l1); // usage of CC - the same as list l2=l1; 
        l2.print();
        l2.remove(5);
        l2.print();
        l1.print();

        list l3("asajnment");
            l3=l2=l1;
        l3.print();
        list l4("Testing+");
        l4.insert(155,"+++++++");
        l4.insert(144,"-----");
        l4.insert(111,"lalala");
        l4.print();
        l1=l4+l3;
        l1.print();
        getchar();
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:24:01.627

我认为您不应该在 operator+ 中返回参考

```
list list::operator+(list &x)
    {
        list temp(this->name);
        temp=*this;// using previously made operator= which creates the deep copy of singly linked list from this into temp;
        lista *xtr=x.head;
        while(xtr)
        {
            temp.insert(xtr->num,xtr->word);
            xtr=xtr->next;
        }   
        //temp.print();
        return temp;
    } 
```

如果您想像评论中提到的那样返回链接参考：

```
list& list::operator+(list &x)
        {
            lista *xtr=x.head;
            while(xtr)
            {
                this->insert(xtr->num,xtr->word);
                xtr=xtr->next;
            }   
            return this;
        } 
```

这会将`x`的值连接到您当前的对象。

您的编译器仍然应该警告您您正在返回对临时的引用。

此外，您应该开始接受更多的答案，并考虑观众在看到您的帖子时的想法，您认为您发布的内容是否格式良好、信息丰富等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:53:16.023

您正在返回对临时对象的引用。这是不正确的。

当它被外部代码使用时，引用的对象已经被销毁。

# c# - 从 SHA256 解密

> ID：10271645
> 
> 赞同：10
> 
> 时间：2012-04-22T20:03:18.570
> 
> 标签：c#, cryptography, encryption

我有将字符串加密为 sha256 和 base64 旁边的代码：

```
 public static string Sha256encrypt(string phrase)
    {
        UTF8Encoding encoder = new UTF8Encoding();
        SHA256Managed sha256hasher = new SHA256Managed();
        byte[] hashedDataBytes = sha256hasher.ComputeHash(encoder.GetBytes(phrase));
        return Convert.ToBase64String(hashedDataBytes);
    } 
```

如何在另一端解密我的密码？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-22T20:07:01.267

您无法解密[One Way Hash](http://en.wikipedia.org/wiki/Cryptographic_hash_function)的结果。您应该做的是比较输入密码的哈希值与数据库中存储的哈希值。

例子：

```
var password = "1234";
var hashedPassword = Sha256encrypt(password);

var allowLogin = hashedPassword == storedPassword; //storedPassword from Database, etc. 
```

不过，这只是最基本的，在使用散列算法时，您也应该考虑使用[Salt](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T20:04:25.980

这本身是不可能的。SHA 是一种哈希函数，这意味着它是单向的，仅用于验证和类似的事情。由于 SHA-256 的结果是固定长度（256 位），这也意味着大部分信息在计算时都会丢失。

不过，您可以对其进行暴力破解，这意味着您可以尝试计算大量不同输入的哈希值并查看哈希值是否匹配。

在未来的某个时候，可能会发现 SHA 的加密弱点，从而使其易于破解，但实际上它不是一个可逆的函数。

[请参阅Wikipedia](http://en.wikipedia.org/wiki/Cryptographic_hash_function)上有关散列函数的详细信息。

# android - 如何更改 android 进度对话框消息字体？

> ID：10271646
> 
> 赞同：2
> 
> 时间：2012-04-22T20:04:04.163
> 
> 标签：android, android-layout, android-widget

谁能回答我下面的问题？

如何更改 android 进度对话框消息字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:00:01.627

试试这种方式，为我工作：

首先在java类中你必须导入这个：

```
 import android.text.Html; 
```

然后把这一行：

```
progressDialog.setMessage(Html.fromHtml(getString(R.string.progress_txt))); 
```

而不是这个：

```
 progressDialog.setMessage("File downloading"); 
```

然后在 strings.xml 中写成这样：

```
 <string name="progress_txt">
  <![CDATA[
  <b><font face="serif">File downloading</font></b>
    ]]> 
 </string> 
```

运行应用程序你会发现字体已经改变。

希望这有帮助

# php - 简单的 PHP 漏洞测试

> ID：10271647
> 
> 赞同：-1
> 
> 时间：2012-04-22T20:04:04.823
> 
> 标签：php, variables, directory-traversal

基本上，我想创建一个站点来向人们展示如何通过模拟 PHP 漏洞来防止它们。但是，我无法让他们自己工作。

我想查看一个变量是否等于一个有效页面（我只有两个用于测试），如果是，则加载该页面。否则，我看看它是否包含“../”。如果这些都不是真的，它只是说“找不到页面”。

到目前为止，这是我的代码：

```
<?php
if($page=="LOLone.php" || $page=="LOLtwo.php"){
echo "Welcome, look at the LOL cats!";
include($page);
}else if(strlen(strstr($page,"../"))>0){
echo "Congrats, you found the transversal attack vulnerability!";
}else{
echo "Page not found!";
}
?> 
```

每当我尝试使用`page=LOLone.php`（`LOLtwo.php`或什至`../`）时，它都会显示“找不到页面！” 我不能像现在这样比较变量吗，或者这可能是我的网络主机安全吗？我有点困惑，但我对 PHP 比较陌生，所以我觉得我错过了一些简单的东西......

好吧，我犯了一个简单的错误。也是一个很大的。对不起。感谢所有回复，我会非常小心我自己的服务器被黑客入侵。在这个例子中，我应该是干净的，因为只有当它等于指定值时，我才让它包含页面。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:13:15.147

尝试

```
$webPath = "/home/www/somesite/userpages" ;
$pages = array(
"page1.php",
"page2.php"     
);

//http://testing.com?page=xxx
$_GET['page'] = "../../etc/passwd" ; //Sample Hack

//Prepare Include 

$page = realpath($_GET['page']);
$dirName = dirname($page);
$baseName = basename($page) . ".php";

if($dirName != $webPath)
{
    die("Die! Die! Die!");
}

if(!in_array($baseName, $pages))
{
    die("Kill! Kill! Kill!");
}

echo "Welcome" ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:14:45.740

代替

```
if(strlen(strstr($page,"../"))>0) 
```

和

```
if( strpos($page, '../') !=== false ) 
```

现在，您正在检查`strstr()`通话的长度，这不是正确的方法。现在它改为检查`../`- 如果它不是假的 - 我们确定字符串有它的位置。

但是，您可能应该从另一个更简单的项目开始 - 因为一个只会确保您的服务器由于您忘记停止的漏洞而被黑客入侵。

# makefile - 未使用 Makefile 规则编译源文件

> ID：10271652
> 
> 赞同：0
> 
> 时间：2012-04-22T20:04:24.077
> 
> 标签：makefile

我有以下生成文件

```
CXX       = g++
CXXFLAGS  = -c -g -pg -Wall -Wextra
LINK      = g++
TARGET    = ../../Binaries/tests
SOURCES   := ../Src/$(wildcard *.cpp)
OBJS_DIR  := ../Objects
OBJS      = $(sort $(patsubst %.cpp, $(OBJS_DIR)/%.o, $(patsubst %.c, $(OBJS_DIR)/%.o, $(notdir $(SOURCES)))))

tests: $(TARGET)

$(TARGET): $(OBJS)
  $(LINK) $? -o $@

$(OBJS): $(SOURCES)
  $(CXX) $(CXXFLAGS) $? -o $@ 
```

其中，当使用`make tests`（或只是`make`）运行时，会给出以下输出：

```
g++  -o ../../Binaries/tests
g++: fatal error: no input files
compilation terminated.
make: *** [../../Binaries/tests] Error 4 
```

在我看来，make 正在尝试链接文件（尚不存在）而不检查`$(OBJS)`. 我的目标是拥有一个完全自给自足的 Makefile，能够在 ../Src 中找到`*.cpp`文件，在 ../Objects中找到`*.o`文件（它将生成其ef），但是我写的规则没有似乎正在解决这个问题。谁能告诉我这里哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:22:29.633

最有可能的是，问题出在以下行：

```
SOURCES   := ../Src/$(wildcard *.cpp) 
```

它应该是这样的：

```
SOURCES   := $(wildcard ../Src/*.cpp) 
```

将源转换为对象也可以重写如下：

```
OBJS      := $(SOURCES:../Src/%.cpp=$(OBJS_DIR)/%.o) 
```

最后编译规则通常通过[模式规则](http://www.gnu.org/software/make/manual/make.html#Pattern-Rules)实现：

```
$(OBJS_DIR)/%.o : ../Src/%.cpp
    $(CXX) $(CXXFLAGS) $< -o $@ 
```

# macros - 有没有一种干净的方法可以将函数添加到动态创建的命名空间？

> ID：10271653
> 
> 赞同：11
> 
> 时间：2012-04-22T20:04:24.810
> 
> 标签：macros, clojure, lisp, noir

我正在创建一个黑色 web 应用程序，我需要动态创建新的视图和模型。我一直在关注黑色示例，其中资源的视图和控制器具有单独的命名空间，我发现它是一种非常干净的方法。

为此，我需要能够动态地创建与视图和模型对应的新命名空间，然后在其中实习适当的函数。我的想法是在单独的命名空间中指定宏，当在新命名空间中调用时，将提供适当的路由/部分/任何内容。

例如（原谅我的第一个 defmacro）：

```
(ns project.views.proto
  (:use noir.core
        hiccup.core
        hiccup.element
        hiccup.form))

(defmacro def-all-page
  [path]
  `(defpage ~path []
     (html
      [:h1 "Ya'll here"]))) 
```

被称为...

```
(ns project.proto
   (:use [clojure.contrib.with-ns :only [with-ns]])

(create-ns 'foo)
(intern 'foo 'path "path")  ; In reality, the path is dynamic which is why I intern it
(with-ns 'foo
    (clojure.core/refer-clojure)
    (use 'noir.core
         'hiccup.core
         'hiccup.element
         '[project.views.proto :only [def-all-page]])

    (def-all-page path) 
```

但是，从我的新命名空间中调用它会给我一个 NullPointerException。我非常感谢任何帮助，以及是否有更好的方法。就像，只使用引用包含所有必要定义的命名空间？

第一次发帖，我不认为这是重复[的](https://stackoverflow.com/questions/8371850/variable-passed-to-macro-gets-resolved-in-wrong-namespace)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T22:33:26.950

首先，这个问题已经有点过时了。Noir 和 Clojure 都在过去一年中不断发展。为了清楚起见，我将把 Noir 排除在外，并尝试回答您有关使用宏动态创建函数的问题。

跟随 REPL：

```
$ lein repl
user=> (in-ns 'foo)
#<Namespace foo>
foo=> (clojure.core/refer-clojure)
nil
foo=> (defmacro say-hello-to
 #_=>           [name]
 #_=>           `(defn ~(symbol (str "hello-" name))
 #_=>                  []
 #_=>                  ~(str "hello: " name)))
#'foo/say-hello-to 
```

在这里，我们创建了一个命名空间“foo”，其中包含一个用于定义“hello-yourname”函数的宏。让我们创建另一个命名空间：

```
foo=> (in-ns 'bar)
#<Namespace bar>
bar=> (clojure.core/refer-clojure)
nil
bar=> (refer 'foo :only '[say-hello-to])
nil
bar=> (say-hello-to "tom") 
#'bar/hello-tom
bar=> (say-hello-to "jerry") 
#'bar/hello-jerry 
```

让我们看看这些是否真的有效：

```
bar=> (hello-tom)
"hello: tom"
bar=> (hello-jerry)
"hello: jerry" 
```

我认为这与您的原始示例非常接近。

希望这可以帮助！

# facebook - 上传照片、视频和音频

> ID：10271655
> 
> 赞同：0
> 
> 时间：2012-04-22T20:04:31.720
> 
> 标签：facebook, video

FB 的人会批准上传照片、视频和音频文件的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:13:30.443

Yes. It's all there in the [https://developers.facebook.com/docs/](https://developers.facebook.com/docs/). If you read it, you will be able to see all the limitations.

For example, here are references for Photo and Video.

*   [https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)
*   [https://developers.facebook.com/docs/reference/api/video/](https://developers.facebook.com/docs/reference/api/video/)

# highcharts - Highcharts 垂直线（十字准线）逻辑

> ID：10271657
> 
> 赞同：10
> 
> 时间：2012-04-22T20:04:36.757
> 
> 标签：highcharts

我想知道是否可以激活悬停在图表上时出现并突出显示点的垂直线？

例如在这个图表中：[http](http://www.highcharts.com/stock/demo/compare) ://www.highcharts.com/stock/demo/compare -> 当悬停在图表线上时，每个系列中的合适点都会突出显示，并且它们之间会连接一条垂直线。我需要一个事件来触发这条线并突出显示特定`x`值的点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T13:19:37.690

这条垂直线默认出现在 highstock 上，但在 highcharts 上默认为空。您可以启用它设置工具提示十字准线像[**这里**](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/crosshairs-x/)。
要在相同的 y 值上突出显示所有系列，您必须像**[这里](http://jsfiddle.net/ricardolohmann/SuDP9/)**一样将 shared 设置为 true 。
代码：

```
tooltip: {
    crosshairs: {
        color: 'green',
        dashStyle: 'solid'
    },
    shared: true
} 
```

[您可以按照以下参考](http://www.highcharts.com/ref/#tooltip--crosshairs)设置您的十字准线。

# heroku - Heroku delay_job 错误 - 反序列化错误？

> ID：10271658
> 
> 赞同：0
> 
> 时间：2012-04-22T20:04:47.710
> 
> 标签：heroku, rake, delayed-job

有人可以帮我理解这个错误吗？无法弄清楚如何搭便车，它正在停止我所有的延迟工作......

```
heroku rake jobs:work --app thehockeycommunity --trace
** Execute jobs:work
[Worker(host:8e8e4caf-9879-4fd7-94c5-d22d866c5720 pid:4)] New Relic Ruby Agent Monitoring DJ worker host:8e8e4caf-9879-4fd7-94c5-d22d866c5720 pid:4
[Worker(host:8e8e4caf-9879-4fd7-94c5-d22d866c5720 pid:4)] Starting job worker
rake aborted!
syntax error on line 2874, col 3: `'
/usr/ruby1.8.7/lib/ruby/1.8/yaml.rb:133:in `load'
/usr/ruby1.8.7/lib/ruby/1.8/yaml.rb:133:in `load'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/backend/base.rb:103:in `deserialize'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/backend/base.rb:69:in `payload_object'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/backend/base.rb:55:in `name'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:165:in `handle_failed_job'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:128:in `run'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:173:in `reserve_and_run_one_job'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:106:in `work_off'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:105:in `times'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:105:in `work_off'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:80:in `start'
/usr/ruby1.8.7/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:79:in `start'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:76:in `loop'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/worker.rb:76:in `start'
/app/.bundle/gems/ruby/1.8/gems/delayed_job-2.0.7/lib/delayed/tasks.rb:13
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/usr/ruby1.8.7/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/.bundle/gems/ruby/1.8/gems/rake-0.9.2.2/bin/rake:33
/app/.bundle/gems/ruby/1.8/bin/rake:19:in `load'
/app/.bundle/gems/ruby/1.8/bin/rake:19
Tasks: TOP => jobs:work
new-host-4:The-Hockey-Community alextoul$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:09:31.890

我知道这是一个古老的、没有答案的问题，但是如果其他人偶然发现了这个问题，请注意项目中的空 YAML 文件有时会触发这样的错误可能会有所帮助。

# android - 适用于 Android 的 OpenCV 2.4。Java和本机代码生产力之间的奇怪差异

> ID：10271659
> 
> 赞同：0
> 
> 时间：2012-04-22T20:04:50.750
> 
> 标签：android, opencv, android-ndk, computer-vision

像这样，用Java编写的：

```
// ...preparing inputs
Imgproc.goodFeaturesToTrack(curImage, prevPts, NUM_OF_PTS, 0.001, 10);
// ...
Video.calcOpticalFlowPyrLK(prevImage, curImage, prevPts2f, nextPts2f, status, err);
// ... visualization, Core.circle 
```

在 C 上比这快得多：

```
Mat* now=(Mat*)addrGray;
Mat* frame=(Mat*)addrRgba;
Mat* prev=(Mat*)addrPrevGray;

goodFeaturesToTrack( *now,
        vnew,
        maxCorners,
        qualityLevel,
        minDistance,
        Mat(),
        blockSize,
        useHarrisDetector,
        k );
for( size_t i = 0; i < vnew.size(); i++ ) {
    circle(*frame, Point(vnew[i].x, vnew[i].y), 10, Scalar(255,0,0,255));
}
calcOpticalFlowPyrLK(*prev, *now, vprev, vprevNow, status, track_error, winSize, maxLevel, tc, derivLambda,flags);
vprev.clear();
vector<Point2f>::iterator iter=vnew.begin();
while (iter != vnew.end()) {
    vprev.push_back(*iter);
    ++iter;
}
vnew.clear();
vprevNow.clear(); 
```

为什么以及如何解决？或者有什么更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:24:56.747

因为它是 C。C 比 Java 快得多，你无法修复它。如果您需要快速性能，请使用本机代码和 NDK

# php - 在另一个用户的浏览器中发生事件后刷新一个用户的网页

> ID：10271660
> 
> 赞同：1
> 
> 时间：2012-04-22T20:05:18.457
> 
> 标签：php, events, cakephp

我有这个网站，我在 PHP 中实现了 2 个用户之间的一个非常简单的消息传递系统（使用 CakePHP 更准确）。

一切正常，一个用户发送消息，另一个用户接收它。唯一的问题是第二个用户必须刷新页面才能看到消息。

当第一个用户发送消息时，有什么方法可以告诉第二个用户的浏览器刷新？消息存储在 MySQL 数据库中。当用户进入消息传递页面时，我会显示属于他的从最后到第一条的所有消息，并将它们从数据库中提取出来。

简单的方法是制作一些定期刷新页面的 javascript 函数，但这不是最好的解决方案，并且可能会让用户感到烦恼。理想情况下，当用户收到新消息时，页面应该刷新......

我一直在考虑的另一种方法是对函数进行 AJAX 调用，以某种方式传递用户进入页面时最后收到的消息的日期时间，然后检查是否有新消息，如果为真，则刷新页面。如果我设法让它工作，这不会是坏事，但仍然会暗示这个页面中的其他问题与其他正在发生的事情。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:49:16.857

看看 Socket.io 和 Node.js。它们允许您执行诸如此类的实时操作，并且 socket.io 向后兼容旧版浏览器。

# drawing - 绘制软件架构的工具

> ID：10271661
> 
> 赞同：3
> 
> 时间：2012-04-22T20:05:19.100
> 
> 标签：drawing, presentation

有人知道是否有一些免费软件可以让我轻松绘制软件架构吗？

[我不是指 UML、工作流、图表或其他技术材料，而是像这样](http://www.d-simlab.com/images/dsimfed.jpg)的“面向演示”的绘图。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T23:55:43.727

希望[这](http://dia-installer.de/index.html.en)会有所帮助，我在寻找 MS Visio 的免费替代品时找到了那个。

这里是[来源](http://www.makeuseof.com/tag/a-free-open-source-alternative-to-microsoft-visio/)（这也是谷歌搜索 Visio 的免费替代品的第一批结果之一）

# ios - iOS 上的 openCV cvRetrieveFrame 或 cvReleaseCapture 内存泄漏

> ID：10271663
> 
> 赞同：2
> 
> 时间：2012-04-22T20:05:24.193
> 
> 标签：ios, opencv

我在这段代码中遇到了内存泄漏，我无法找到我做错了什么。

```
CvCapture* capture = cvCaptureFromFile([[url path] UTF8String]);

while (cvGrabFrame(capture)) {    
  IplImage *frame = cvRetrieveFrame(capture);

  if (frame) {
    [...]
  } else {
    break;
  }
}

cvReleaseCapture(&capture); 
```

如果我删除 cvRetrieveFrame，内存泄漏就会消失。如果我用一个 cvQueryFrame 更改 cvGrabFrame 和 cvRetrieveFrame 会发生相同的行为。

启用或注释掉 cvReleaseCapture 时的行为相同。所以这可能与此有关，但我无法弄清楚是什么。

我在 iOS 上使用 openCV r7286。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:08:48.157

这是openCV中的一个错误。最新的主干中提供了修复程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T06:28:12.833

做这样的事情怎么办？

```
IplImage *frame;
while (cvGrabFrame(capture)) 
{  
     frame = cvRetrieveFrame(capture);    
     if (frame) {     [...]   } 
     else {     break;   } 
} 
```

只声明一个指针，不多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:49:57.427

cvRetrieveFrame 不会做很复杂的事情。我想您在这部分代码中泄漏了内存：

```
if (frame) {
 [...]
} 
```

你有多确定那部分没有泄漏内存？愿意分享那一点吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-19T10:46:33.807

在 while 循环上方声明 IplImage* 帧一次。或者在每次迭代后释放分配的帧指针。

# mysql - 在 mySQL 中创建多列约束，而不是 ALTER

> ID：10271664
> 
> 赞同：0
> 
> 时间：2012-04-22T20:05:30.890
> 
> 标签：mysql

# 问题：

在 mySQL 中创建表时是否可以强制执行多列约束，而不是稍后通过更改表来包含它？

# 背景：

我注意到几乎所有对“*如何在 mySQL 中创建多列唯一约束*”问题的答案都涉及`ALTER`在表上使用，这里仅举两个例子：

*   [ON DUPLICATE KEY：多列唯一约束](https://stackoverflow.com/questions/6889586/on-duplicate-key-multi-column-unique-constraint)
*   [使用多列作为 mysql 的唯一标识符](https://stackoverflow.com/questions/3798555/use-multiple-columns-as-unique-identifier-for-mysql)

我发现创建表时创建多列约束的唯一示例是针对不同风格的 sql：

*   [如何在多列上放置唯一约束](https://stackoverflow.com/questions/4968354/how-to-place-unique-contraint-on-multiple-column)
*   [如何在 ormlite ( SQLite ) 中执行多列唯一约束](https://stackoverflow.com/questions/5264305/how-to-do-multiple-column-unique-constraint-in-ormlite-sqlite)
*   [微软 sql 示例](http://bytes.com/topic/sql-server/answers/169970-unique-constraint-multiple-columns)

有没有办法在创建表时创建约束，因为我发现这样更干净？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:07:49.613

```
CREATE TABLE mytable (
   field1 int,
   field2 int,
   field3 int,
   UNIQUE KEY (field1, field2, field3)
); 
```

# java - jsp异常错误

> ID：10271665
> 
> 赞同：0
> 
> 时间：2012-04-22T20:05:58.343
> 
> 标签：java, html, jsp

我收到错误“jsp 文件中的 17：/index.jsp Void 方法无法返回值”我认为我的异常代码是错误的。当用户不输入任何数字时，我不知道如何返回空字符串。有什么建议么

```
<%@ page import="java.io.*"%><%@
page import="java.util.*"%><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<%
    String sum = (String) session.getAttribute("sum");

            sum = "5";
            session.setAttribute("sum",sum);

    int isum = Integer.parseInt(sum);
    try {
    isum=Integer.parseInt(request.getParameter("number"));
    } catch (NumberFormatException nfe) {return "";}      
    if(request.getParameter("number")!=null && Integer.parseInt(request.getParameter("number"))==isum)
    {
     if(request.getParameter("submit") != null){
            out.print("Hello");}
    }
  %>

  <body>
    <title>MAIN</title>
    <form action="index.jsp" method="post">
    Enter 5 = <input type="text" name="number">
    <input type="submit" value="continue" name="submit">
    </form>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:09:35.697

All code you write into your JSP will be compiled into the `_jspService` method. As you can see below, the signature has `void` return type.

```
public void _jspService(HttpServletRequest request, 
   HttpServletResponse  response) 
     throws IOException, ServletException {

} 
```

You should remove the `return` statement at the below line:

```
} catch (NumberFormatException nfe) {return "";} 
```

Since you're dealing with web pages, instead of `return`ing a value, you should show the user an appropriate message. In your case, it will be an error message.

```
} catch (NumberFormatException nfe) {
    out.println("Error!");
} 
```

## Most Importantly

You should not use scriptlets in any JSP code you write in 2012\. Learn about more advanced techniques such as JSTL and do consider using Servlets too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:09:28.907

You're misunderstanding a basic programming concept: a void method can't return any value. Check this line:

```
catch (NumberFormatException nfe) {
    return "";
} 
```

There's your error. A JSP can't return a value. Instead, you should do something with the exception like post it in your log. for now, I'll just print it in the console:

```
catch (NumberFormatException nfe) {
    System.out.println("Error parsing the number: " + nfe.getMessage());
} 
```

# cakephp - cakephp 查找线程 parent_id - 不同的名称

> ID：10271668
> 
> 赞同：3
> 
> 时间：2012-04-22T20:06:23.340
> 
> 标签：cakephp

我想使用 CakePHP 的`Model::find('threaded')`方法，但在我的 MySQL 表中，父键字段是`father`而不是`parent_id`- 是否可以将它与此字段名称一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:06:26.647

在 2.1 上，您可以传递 option `parent`，您可能需要附加树行为才能使其工作。

在 2.1 之前，您可以在模型中使用虚拟字段：

```
public $virtualFields = array(
    'parent_id' => 'Model.father'
); 
```

# ruby - 重置 IRB 控制台

> ID：10271676
> 
> 赞同：11
> 
> 时间：2012-04-22T20:07:30.530
> 
> 标签：ruby, console

如何与会话中定义的所有常量、对象等告别，以*恢复*`irb`原状？通过“ *in* ”，我的意思是不操纵子会话。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-22T20:29:37.683

类型

```
exec($0) 
```

在您的 irb 控制台会话中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T00:54:47.247

我正在使用 Fedora 16，执行 $0 对我不起作用。但我找到了以下方法：

CTRL+L 或 system("clear") 或 system("reset")

# wpf - Updating datagrid from a thread with ObservableCollection databinding

> ID：10271678
> 
> 赞同：3
> 
> 时间：2012-04-22T20:07:49.113
> 
> 标签：wpf, data-binding, mvvm

I'm new to WPF and MVVM and I started with ["Jason Dolinger on Model-View-ViewModel"](http://blog.lab49.com/archives/2650) article and example but I have some questions regarding databinding.

1) In his demo application, he's subclassing DependencyObject for the ObservableCollection Items. What are the pros/cons compared to INotifyPropertyChanged ?

2) What is the best way to update the view from the model in a datagrid/listview ? In his example, he registers as a listener when a Quote object is added or updated :

```
_source.QuoteArrived += new Action<Quote>(_source_QuoteArrived); 
```

Than the ViewModel creates and adds the QuoteViewModel object to the collection OR updates the view by setting the updated Quote object in the convenient QuoteViewModel object using a dictionary called _quoteMap.

```
void _source_QuoteArrived(Quote quote)
{

    QuoteViewModel qvm;
    if (_quoteMap.TryGetValue(quote.Symbol, out qvm))
    {
        qvm.Quote = quote;
    }
    else
    {
        qvm = new QuoteViewModel();
        qvm.Quote = quote;

        this.Quotes.Add(qvm);

        _quoteMap.Add(quote.Symbol, qvm);
    }
} 
```

Is there a better way to update the view from the model when a Quote object has been updated or am I forced to create a dictionnary ? It would be so easier if the listview could be updated immediately when a Quote object is updated... without having Quote to subclass INotifyPropertyChanged or DependencyObject.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:10:04.740

对于您的第一个问题，请参阅[此 StackOverflow 问题](https://stackoverflow.com/questions/291518/inotifypropertychanged-vs-dependencyproperty-in-viewmodel)。一般来说，人们似乎更喜欢 `INotifyPropertyChanged`.

至于您的第二个问题，鉴于报价可以随时到达，您需要某种方法将到达的报价映射到您收藏中已有的报价。使用字典似乎是一种明智的做法。你还有什么建议？

您说 ListView 立即更新会很好，但是 ListView 怎么知道新的 Quote 对应的对象是什么？ListView 纯粹监视一个实现的集合`INotifyCollectionChanged`，它对内部结构一无所知`Quote`，或者`Quote.Symbol`

# c# - ASP.NET C#、SQL 渲染图像、sql 查询等

> ID：10271680
> 
> 赞同：-2
> 
> 时间：2012-04-22T20:08:10.627
> 
> 标签：c#, asp.net, sql

我正在为一个组织创建一个军事站点。该网站的一部分将成为新闻/博客墙。

新闻将由一篇简单的文章和几张图片组成，具体取决于文章作者选择的内容。

在我的数据库中，我制作了两张表，一张用于新闻，一张用于图片。将这些连接在一起，图片表只包含图片的 URL，而不是整个图片。

现在解决问题：

如果只有一张图片连接到文章，一切正常，但如果我得到几张图片，我会为每张图片获得几行但同一篇文章。

这给了我下一个问题，我的 ASP.NET ListView 是一篇新文章，每篇文章呈现一张图片和相同的文章文本 >.<

我一直在向我大学的老师寻求帮助，但他们似乎都忙于其他讲座。

我还想知道如何在 ListView 中渲染出多张图片，我想在代码隐藏中使用一些 foreach 来获取更多图像标签，但如何？

如果有帮助，我会发布我的 SQL 查询的这张图片，请查看第 2 行和第 3 行。

```
ALTER PROCEDURE [dbo].[GetLatestNews] AS 
BEGIN 
   SELECT News.NyhetID, News.Rubrik, News.Nyhet, News.Datum, Picture.Picture 
   FROM Picture
   RIGHT OUTER JOIN News as News ON News.NyhetID = Picture.NyhetID 
   ORDER BY News.NyhetID DESC 
END 
```

提前谢谢大家，记住我是一个新手程序员，这可能很容易？我真的很伤心，因为我告诉自己不会那么难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:14:30.013

我会使用两个查询。用news 表中的所有数据填充一个，并从图片表中填充一个。

在您的页面加载事件中，使用这两个表中的数据填充两个私有实例变量。

在您的 ASPX 页面中，创建两个列表视图，一个用于新闻项目的父视图，一个用于图像的子视图。在新闻列表视图“Item_DataBound”事件中，使用 FindControl 从图片数据源中查找子列表视图和数据项。然后将子列表视图绑定到图片数据的子集，您可以使用 LINQ 执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:41:36.340

预期的行为是否限制每篇文章仅一张图片？也就是说，News 和 Picture 是一对多的关系，一个 News 可能包含一个 Picture，但一个 Picture 可能属于多个 News？

我想你可能有你的表结构倒退。理想情况下，这两个表如下所示。

```
NEWS
----
NewsID
NewsContent
PictureID

PICTURE
-------
PictureID
PictureURL 
```

这样一来，一篇新闻文章只能有一个图片，但该图片可以在多篇新闻文章中被引用。

# java - 用于自定义 XML 的 Eclipse IDE 内容辅助

> ID：10271691
> 
> 赞同：4
> 
> 时间：2012-04-22T20:09:55.400
> 
> 标签：java, eclipse, jsf, richfaces

在不安装 JBoss 工具的情况下，如何在 Eclipse Indingo for Richfaces 组件标签中激活内容辅助？

我的 Eclipse 版本只是对 JSF 的默认组件有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:04:49.943

将**JSF Project Facet**添加到您的项目中。（您可以*禁用库配置*并仍然受益于 Richfaces 代码完成）

更多信息在这里：

[Eclipse 帮助 - 项目方面](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jst.j2ee.doc.user/topics/cfacets.html)

[JSF 项目方面](https://stackoverflow.com/questions/4533341/add-jsf-project-facet-in-eclipse-why-need-it)

# java - Questions About Hashmaps and 2D Grids

> ID：10271692
> 
> 赞同：1
> 
> 时间：2012-04-22T20:10:02.430
> 
> 标签：java, grid, hashmap, 2d, libgdx

I'm working with a very large grid-based world that has around 50-90% of its grid spaces empty at any given time, therefore I chose to use a HashMap over an array.

The problem is that basic interactions don't seem to be working right, and I think it's because of some disconnect between the position the hashmap is using as a key and position as the grid object knows it.

These are the problems I'm having:

*   object's ability to detect its neighbors is unreliable
*   object deletion is unreliable

Here is the code:

The `getNeighbors` method of `GridObject`:

```
public ArrayList<GridObject> getNeighbors()
{
  ArrayList<GridObject> neighbors = new ArrayList<GridObject>(8);
  final int[] d = {-1, 0, 1};
  for(int i : d)
    for(int j : d)
      if(j != 0 || i != 0) // Don't use (0, 0)
      {        // Manager is just a wrapper for the HashMap; treat this like HashMap.get()
        GridObject p = manager.get(location.x + i, location.y + j);
    if(p != null) neighbors.add(p);
      }
  return neighbors;
} 
```

This is from the update method of the `Manager` class. `MarkedForRemoval` is a `java.util.Stack` of Points that is populated by `GridObject` s that call `Manager.markForRemoval()`, which just pushes a passed point into the stack. `update()` runs once a frame:

```
public void update()
{
    // libgdx graphics stuff
    renderTarget.setColor(new Color(0f, 0f, 0f, 0f));
    renderTarget.fill();

    for(GridObject p : map.values())
    {
      renderTarget.drawPixel(p.location.x, p.location.y, Color.rgba8888(p.team.getColor()));
      p.update();
    }
    while(!markedForRemoval.isEmpty())
      map.remove(markedForRemoval.pop());
    } 
```

And this is the `Manager.put()` method, which is the only way that new GridObjects are added:

```
public GridObject put(int x, int y)
{
  final Point p = new Point(x, y);
  return map.put(p, new GridObject(this, p));
} 
```

And finally the `Manager.get()` method:

```
public GridObject get(int x, int y)
{
  return get(new Point(x, y));
} 
```

I am using java.awt.Point to store the locations, which has both Objects.equals() and Object.hashCode() implemented correctly, as far as I know.

I am lost as to where I have gone wrong.

# encoding - iTextSharp - acroform field encoding

> ID：10271696
> 
> 赞同：3
> 
> 时间：2012-04-22T20:10:30.720
> 
> 标签：encoding, itextsharp

I'm trying to fill out a AcroForm's textfield with iTextSharp. The Acroform textfield was created also by iTextSharp by this piece of code:

```
TextField Field = new TextField(OutputWriter, FieldPos, "MyField");
OutputWriter.AddAnnotation(Field.GetTextField()); // OutputWriter is writing to form.pdf 
```

I fill the form using this code:

```
PdfReader reader = new PdfReader("form.pdf");
PdfStamper filledOutForm = new PdfStamper(reader, new FileStream("filled_form.pdf", FileMode.Create));

AcroFields form = filledOutForm.AcroFields;
form.SetField("MyField", "some unicode data"); 
```

However, when I open filled_form.pdf in Acrobat Reader, unicode characters are not visible unless I edit manually the field (e.g. I append a character by hand to the field).

I also tried to set field's font by:

```
BaseFont fieldFontRoman = BaseFont.CreateFont(@"C:\Windows\Fonts\times.ttf",
                                BaseFont.IDENTITY_H,
                                BaseFont.EMBEDDED);
form.SetFieldProperty("MyField", "textfont", fieldFontRoman, null); 
```

Then, when I open filled_form.pdf in Acrobat Reader, everything looks fine unless I edit manually the field. After that, non unicode characters disappear (they change into blank spaces). They are here in the field because if I copy whole content of the field by CTRL + C and paste it to notepad, I can see all characters.

Please advise. I would like to see all characters in the field without the need of editing the field manually and of course after editing it manually I would like no characters to disappear.

Thank you

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T04:05:02.923

创建 PdfStamper 后设置 SubstitutionFont：

```
stamper.AcroFields.AddSubstitutionFont(myFont.BaseFont); 
```

# javascript - 使用 JS 迭代嵌套的 JSON 对象

> ID：10271702
> 
> 赞同：-3
> 
> 时间：2012-04-22T20:11:03.960
> 
> 标签：javascript, jquery, json

我有从 api.movi​​edb.com 收到的这个 JSON 对象

它是非常嵌套的 JSON 对象，我在从中检索特定数据时遇到问题。

[这是](https://gist.github.com/2466491)对象的要点

我需要从图像海报数组中专门获取“url”

我尝试使用此 $.each 对其进行迭代

但问题是 var 图像由于未定义而引发错误

```
 $.each(data, function(i,item){
          images = data.posters.image.url;
          var name = "<div id='each'><p>" + item.name + "</p><br><img src=" + image + "><br><p>" + item.overview + "</p></div>";
          $("#result").append(name);
     //$("<img/>").attr("src", item.image).appendTo("#result");
  }); 
```

* * *

```
[
    {
        "score": null,
        "popularity": 3,
        "translated": true,
        "adult": false,
        "language": "en",
        "original_name": "Masculin feminin",
        "name": "Masculin feminin",
        "alternative_name": "Masculin féminin oder: Die Kinder von Marx und Coca Cola",
        "movie_type": "movie",
        "id": 4710,
        "imdb_id": "tt0060675",
        "url": "http://www.themoviedb.org/movie/4710",
        "votes": 7,
        "rating": 10,
        "runtime": 110,
        "certification": "",
        "overview": "The film stars French New Wave icon Jean-Pierre Léaud as Paul, a romantic young idealist and literary lion-wannabe who chases budding pop star, Madeleine (Chantal Goya, a real life Yé-yé girl).",
        "released": "1966-03-22",
        "posters": [
            {
                "image": {
                    "type": "poster",
                    "size": "thumb",
                    "height": 130,
                    "width": 92,
                    "url": "http://cf2.imgobject.com/t/p/w92/issm1E827fK7KHMEdRORA9BoTPs.jpg",
                    "id": "4ea5ebb234f8633bdc0020cb"
                }
            },
            {
                "image": {
                    "type": "poster",
                    "size": "w154",
                    "height": 217,
                    "width": 154,
                    "url": "http://cf2.imgobject.com/t/p/w154/issm1E827fK7KHMEdRORA9BoTPs.jpg",
                    "id": "4ea5ebb234f8633bdc0020cb"
                }
            },
            {
                "image": {
                    "type": "poster",
                    "size": "cover",
                    "height": 261,
                    "width": 185,
                    "url": "http://cf2.imgobject.com/t/p/w185/issm1E827fK7KHMEdRORA9BoTPs.jpg",
                    "id": "4ea5ebb234f8633bdc0020cb"
                }
            },
            {
                "image": {
                    "type": "poster",
                    "size": "w342",
                    "height": 482,
                    "width": 342,
                    "url": "http://cf2.imgobject.com/t/p/w342/issm1E827fK7KHMEdRORA9BoTPs.jpg",
                    "id": "4ea5ebb234f8633bdc0020cb"
                }
            },
            {
                "image": {
                    "type": "poster",
                    "size": "mid",
                    "height": 704,
                    "width": 500,
                    "url": "http://cf2.imgobject.com/t/p/w500/issm1E827fK7KHMEdRORA9BoTPs.jpg",
                    "id": "4ea5ebb234f8633bdc0020cb"
                }
            },
            {
                "image": {
                    "type": "poster",
                    "size": "original",
                    "height": 938,
                    "width": 666,
                    "url": "http://cf2.imgobject.com/t/p/original/issm1E827fK7KHMEdRORA9BoTPs.jpg",
                    "id": "4ea5ebb234f8633bdc0020cb"
                }
            }
        ],
        "backdrops": [
            {
                "image": {
                    "type": "backdrop",
                    "size": "thumb",
                    "height": 172,
                    "width": 300,
                    "url": "http://cf2.imgobject.com/t/p/w300/AnnWas1TyMRRyFuNT9bCZoeqg3t.jpg",
                    "id": "4ea5ebb734f8633bdc0020cf"
                }
            },
            {
                "image": {
                    "type": "backdrop",
                    "size": "poster",
                    "height": 448,
                    "width": 780,
                    "url": "http://cf2.imgobject.com/t/p/w780/AnnWas1TyMRRyFuNT9bCZoeqg3t.jpg",
                    "id": "4ea5ebb734f8633bdc0020cf"
                }
            },
            {
                "image": {
                    "type": "backdrop",
                    "size": "w1280",
                    "height": 736,
                    "width": 1280,
                    "url": "http://cf2.imgobject.com/t/p/w1280/AnnWas1TyMRRyFuNT9bCZoeqg3t.jpg",
                    "id": "4ea5ebb734f8633bdc0020cf"
                }
            },
            {
                "image": {
                    "type": "backdrop",
                    "size": "original",
                    "height": 768,
                    "width": 1336,
                    "url": "http://cf2.imgobject.com/t/p/original/AnnWas1TyMRRyFuNT9bCZoeqg3t.jpg",
                    "id": "4ea5ebb734f8633bdc0020cf"
                }
            }
        ],
        "version": 463,
        "last_modified_at": "2012-04-20 11:05:03 UTC"
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:16:49.857

```
$.each(data, function(i,item){
    var name = item.name;
    var overview = item.overview;
    $.each(item.posters, function(i,poster){
        var name = "<div id='each'><p>" + name + "</p><br><img src=" + poster.image.url + "><br><p>" + overview + "</p></div>";
        $("#result").append(name);
    }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:16:37.720

如果您将该 JSON 数据分配给一个字符串变量，例如称为 called `jsonString`，那么您可以使用类似这样的方法将其转换为 JS 对象：

```
var jsObject = JSON.parse(jsonString); 
```

然后您可以通过通常的机制访问属性。因此，要获取第一张海报的网址： `jsObject.posters[0].image.url`

请注意，此技术不适用于 IE 7 和其他较旧的浏览器。[请参阅http://caniuse.com/json](http://caniuse.com/json)上的支持图表

# wordpress - Order of results of the_category

> ID：10271703
> 
> 赞同：0
> 
> 时间：2012-04-22T20:11:07.860
> 
> 标签：wordpress

A template I'm using is calling [`the_category()`](http://codex.wordpress.org/Function_Reference/the_category) to list the categories which a post belongs. It's ordering them by name. Is there a way to reverse the order by ID category?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:12:58.757

`the_category(' ')`用这个替换你的

```
$cats=get_the_category();
$cid=array();
foreach($cats as $cat)  { $cid[]=$cat->cat_ID; }
    $cid=implode(',', $cid);
    foreach((get_categories('orderby=name&include='.$cid)) as $category) { // notice orderby
        echo '<a href="'.get_category_link($category->cat_ID).'">'.$category->cat_name.'</a> '; // keep a space after </a> as seperator 
    } 
```

您可以使用**orderby**值以下之一

```
id
name - default
slug
count
term_group 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:01:11.767

目前 the_category 没有按功能排序。你需要去**wp-includes/category-template.php**该文件中有一个名为“get_the_terms”的函数。在这个函数中有一行像`$terms = wp_get_object_terms( $id, $taxonomy );`

wp_get_object_terms 可以为 args 提供额外的参数。您可以在此处编辑，如下所示；

```
$args = array('orderby' => 'id', 'order' => 'ASC');
$terms = wp_get_object_terms( $id, $taxonomy, $args); 
```

您可以根据需要修改 $args

希望这可以帮助

# java - Issue with Server accepting multiple UDP datagrams on one port

> ID：10271706
> 
> 赞同：-1
> 
> 时间：2012-04-22T20:11:35.083
> 
> 标签：java, multithreading, loops, udp, port

I'm making a UDP client/server program. The client collects data and sends it to the server.

The client sends a datagram with a random port number to the server on a specific UDP port 6789\. The client and server then use the random port to share information.

The problem I have is that only one client can connect. I feel that it is because port 6789 never gets reopened for the next client.

This is the code just for the server receiving the initial connection on port 6789\.

```
public class MonitorServer extends Thread{

    public static void main(String[] args) {

try{

    DatagramSocket connectSocket = new DatagramSocket(6789);     
    while( true )
    {
            String portString = "";
            int portInt = 0;
            byte [] buffer = new byte[100];

System.out.println("portTest 01 " +portInt);
            DatagramPacket portPacket = new DatagramPacket(buffer, buffer.length);
            connectSocket.receive(portPacket);
            portString = new String (portPacket.getData());
            connectSocket.disconnect();  
            connectSocket.close();

System.out.println("portTest 02 " +portString);
            portString = portString.replaceAll("[^0-9.,]+","");
            portInt = Integer.parseInt(portString);

System.out.println("portTest 03 " +portString);                    
            ClientConnection c = new ClientConnection(portInt);
            new Thread(c).start();

System.out.println("portTest 04 " +portString); //<<-- never prints
   }
  }

  catch (Exception e) {}
 }

} 
```

It seems like this section of code only runs once. I added System.outs to troubleshoot and it looks like it stops at:

```
 ClientConnection c = new ClientConnection(portInt);
            new Thread(c).start();

System.out.println("portTest 04 ");  //<-- Never prints 
```

I need it to keep running to accept connections. What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:29:38.380

在您的代码中，MonitorServer.startServer 方法永远不会返回，因为它进入了无限的 while 循环。这意味着`MonitorServer`' 的构造函数永远不会返回，这意味着 main 中的 while 循环永远不会到达关闭并且永远不会循环。你需要从`MonitorServer`一个新的`Thread`或`Executor Service`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:06:00.073

您应该在接收循环之外在 5678 上创建一次套接字。不是每次收到。

注意，UDP 中没有“connectig”之类的东西，除了 DatagramSocket.connect() 所做的有限的事情，这是对等方不知道的。

# php - How does array_udiff() work?

> ID：10271708
> 
> 赞同：1
> 
> 时间：2012-04-22T20:11:52.390
> 
> 标签：php

Here's the code, it's very simple:

```
<?php
$tab = array (
    (object)array( 'id' => 1,),
    (object)array( 'id' => 4,),
    (object)array( 'id' => 12,),
    (object)array( 'id' => 22,),
    (object)array( 'id' => 25,),
);

$tab_json = array (
    (object)array( 'id' => 1,),
    (object)array( 'id' => 4,),
    (object)array( 'id' => 12,),
    (object)array( 'id' => 22,),
    (object)array( 'id' => 25,),
    (object)array( 'id' => 2,),
);
$difference = array_udiff($tab_json, $tab, function($a, $b) {
    echo $a->id." <-> ".$b->id."\n";
    return (count(array_diff_assoc(get_object_vars($a), get_object_vars($b))))>0;
});
?> 
```

Here's the output:

```
12 <-> 4
12 <-> 1
12 <-> 22
12 <-> 25
2 <-> 12
4 <-> 25
4 <-> 1
22 <-> 4
25 <-> 1
12 <-> 4
12 <-> 1
12 <-> 22
25 <-> 12
4 <-> 22
1 <-> 4
1 <-> 22
1 <-> 4
1 <-> 1
1 <-> 25
25 <-> 4
25 <-> 1
25 <-> 12
25 <-> 25
25 <-> 4
4 <-> 1
4 <-> 12
4 <-> 25
4 <-> 22
22 <-> 1
22 <-> 12
22 <-> 25
22 <-> 12
12 <-> 1
12 <-> 12
12 <-> 2
2 <-> 12
2 <-> 25 
```

I don't understand how it's computed: look at `12`: it's compared more than 10 times (whereas, from what I understand, it should be compared no more than the number of elements of the second array), and moreover it's compared three times with `1`!

Tested on:

```
PHP 5.3.9
PHP 5.3.2-1ubuntu4.14 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:30:06.370

实际产生结果的方式`array_udiff()`当然是一个实现细节，可能会发生变化。所以虽然我说的现在可能是真的，但你不能依赖它。

例如，如果您需要使用旧版本的 PHP，您可能会很好地实现该函数的兼容版本，它只是将第一个数组的每个元素与第二个数组的每个元素进行比较，丢弃任何匹配项。

另一方面，如果您想要最高性能，您可以快速排序第二个数组的元素，然后对第一个数组的元素执行二进制搜索。

PHP 5.3 似乎结合了快速排序和线性搜索。但是，一旦找到更大的元素，它就会中止搜索。

# php - Undefined index in first lines of thumbnail generation script

> ID：10271709
> 
> 赞同：0
> 
> 时间：2012-04-22T20:12:00.123
> 
> 标签：php, thumbnails, isset

I'm using a script i found to generate thumbnails, but i'm getting an error in the first in lines 3 and 4\. I'm guessing one of the functions is deprecated (it's a year old), but i really have no idea. GD support is enabled. I'm reading linked questions and realizing there is something i'm not getting about `isset`, but i'm not sure how to write this for both 'image' and 'width', it also seems like it is set in the next few lines. All help appreciated.

> Notice: Undefined index: image in C:\xampp\htdocs\thumbnail\thumbnail.php on line 3
> 
> Notice: Undefined index: width in C:\xampp\htdocs\thumbnail\thumbnail.php on line 4

```
<?php

$imageSrc = (string)$_GET['image'];    
$width = $_GET['width']; 

if (is_numeric($width) && isset($imageSrc)){ 
    header('Content-type: image/jpeg');
    makeThumb($imageSrc, $width); 
}

function makeThumb($src,$newWidth) { 
    // read the source image given 
    $srcImage = imagecreatefromjpeg($src); 
    $width = imagesx($srcImage); 
    $height = imagesy($srcImage); 

    // find the height of the thumb based on the width given 
    $newHeight = floor($height*($newWidth/$width)); 

    // create a new blank image 
    $newImage = imagecreatetruecolor($newWidth,$newHeight);

     // copy source image to a new size 
     imagecopyresized($newImage,$srcImage,0,0,0,0,$newWidth,$newHeight,$width,$height);

     // create the thumbnail 
     imagejpeg($newImage); 
} 
?> 
```

I realize generating scripts on the fly for every page load is not efficient, but i'm just trying to get something working.

I made the the third change suggested by Lawrence and i'm still getting an error:

> Notice: Undefined variable: width in C:\xampp\htdocs\thumbnail\thumbnail.php on line 13

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:17:07.673

您需要在使用前检查那里的设置：

**改变：**

```
$imageSrc = (string)$_GET['image'];    
$width = $_GET['width']; 
```

**至**

```
$imageSrc = (isset($_GET['image']))?$_GET['image']:null;    
$width =  (isset($_GET['width']))?$_GET['width']:null; 
```

**或 if else 方式**

```
if(isset($_GET['image'])){$imageSrc = $_GET['image'];}else{$imageSrc =null;}
if(isset($_GET['width'])){$width = $_GET['width'];}else{$width =null;} 
```

**或者你可以忘记这两行，然后做：**

```
if (isset($_GET['width']) && is_numeric($_GET['width']) && isset($_GET['image'])){ 
    header('Content-type: image/jpeg');
    makeThumb(basename($_GET['image']), $_GET['width']); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:17:28.810

利用`isset`

尝试

```
$imageSrc = isset($_GET['image']) ? $_GET['image'] : null;    
$width = isset($_GET['width']) ? $_GET['width'] : null ; 
```

# c++ - How to make one object follow another

> ID：10271710
> 
> 赞同：-3
> 
> 时间：2012-04-22T20:12:03.420
> 
> 标签：c++, object, tracking

I am making a game and I have my hero and enemy. Now I want enemy to follow hero when distance between them is 400 for example. How can I make it work. Here is what I ve got so far, but it doe not work. Objects::calcAngle(Objects* obj) - calculates angle between central points of 2 objects.

```
float Objects::calcAngle(Objects* obj){
    float dx = obj->X - this->X; 
    float dy = obj->Y - this->Y;
    float angle=atan(dy/dx)*180/PI;
    return angle;
}

void Enemy::Attack(mainCar* car){
    float angle=0;
    angle=this->calcAngle(car);
    if(this->Distance(car)<400){
        this->attack=true;
        this->heading=this->calcAngle(car)+90; 
        this->Vtri=abs(this->Vtri);
    } else if (this->Distance(car)>400) {
        this->attack=false;
    }
} 
```

Vtri is speed of movement. heading is direction in degrees.

If you can give me a link to where it is described or just tell me here, it would be great. I have 2 days to submitt my project.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:59:00.800

为了使对象从源点移动到目标点，您需要做一些事情：

1.  当前位置 X 和 Y 坐标
2.  目标位置 X 和 Y 坐标
3.  从源头移动到目的地的攻角
4.  从目的地移动到源头的速度

**伪代码：**

```
dy = PositionDestination.Y - PositionCurrent.Y
dx = PositionDestination.X - PositionCurrent.X
angle = atan2(dy/dx)

vx = v * cos(angle)
vy = v * sin(angle)

PositionCurrent += Vector(vx, vy) 
```

**C＃：**

```
 // angle is the arctan placed in the correct quadrant of the Y difference and X difference
 float angleOfAttack = 
      (float)Math.Atan2((double)(PositionDestination.Y - PositionCurrent.Y), 
      (double)(PositionDestination.X - PositionCurrent.X));

 // velocity is the cos(angle*speed), sin(angle*speed)
 Vector2 velocity = 
      new Vector2((float)Math.Cos(angleOfAttack) * projectileMoveSpeed,
      (float)Math.Sin(angleOfAttack) * projectileMoveSpeed);

 // new position is +velocity
 PositionCurrent += velocity; 
```

因此，您首先根据源坐标和目标坐标获得角度。然后，您可以根据角度和速度获得速度方向和距离。最后，根据速度矢量将当前位置移动到新位置。

# list - Ocaml 将列表追加到另一个列表而不重复

> ID：10271711
> 
> 赞同：1
> 
> 时间：2012-04-22T20:12:15.757
> 
> 标签：list, append, ocaml

我的 Ocaml 项目中有一个帮助功能，可以帮助将一个列表附加到另一个没有重复元素的列表。例如，追加`list x: [d, e, f, g]`到`list y [a, b, c, d]`，结果应该是 [a, b, c, d, e, f, g]

我写的函数是这样的：

```
 (* helper function checks if list contains element *)
let rec find e l =
    match l with
        [] -> false
        |(h::t) -> if (h = e) then true else find e t
;;

    (* helper function append l1 to l2 without duplicate *)
let rec help_append_list l1 l2 =
    match l1 with
        [] -> l2
        |(h::t) -> if (find h l2 = false) then (help_append_list t ([h]@l2)) else (help_append_list t l2)
;; 
```

但是当我使用它时，这看起来不太好用，结果还是出现了重复的元素。

请看看上面的功能，给我一些关于如何纠正它们的建议......

谢谢你=)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T20:35:31.967

如果你使用`Set`，你只需要两个集合的并集就可以了。

如果`l2`in`help_append_list`没有重复，则您的函数可以正常工作。

假设`x`and`y`可以有自己的重复，并且顺序无关紧要，您可以使用：

```
let append_list x y = help_append_list x (help_append_list y []) 
```

我对你的功能有一些意见。首先，与[List 模块](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)中的功能`find`相同。您可能想出于学习目的编写它，因此应替换为：`exists``if (h = e) then true else ...``||`

```
let rec find e = function
    | [] -> false
    | h::t -> h = e || find e t 
```

其次，`[h]@l2`是一种低效的编写方式`h::l2`：

```
let rec help_append_list l1 l2 =
    match l1 with
    | [] -> l2
    | h::t -> if find h l2 then help_append_list t l2
              else help_append_list t (h::l2) 
```

# gcc - Clang 是否与 GCC 的 -malign-double 标志等效？

> ID：10271714
> 
> 赞同：8
> 
> 时间：2012-04-22T20:12:31.417
> 
> 标签：gcc, clang, compiler-flags

似乎`-malign-double`编译器选项已从 Clang 中删除。示例代码：

```
#include <stddef.h>
#include <stdio.h>

typedef struct X { char a; long long b; } X;

int main(void)
{
  printf("%zd\n", offsetof(X, b));
  return 0;
} 
```

当使用 GCC 在 32 位模式下编译时 ( `-m32`)，可以根据是否`-malign-double`启用分别输出 8 或 4。但是 Clang 似乎不支持这个选项：

```
$ clang test.c -m32 -malign-double
clang: warning: argument unused during compilation: '-malign-double'
$ ./a.out
4 
```

叮当版本：

```
Apple clang version 3.1 (tags/Apple/clang-318.0.58) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.3.0
Thread model: posix 
```

我似乎在 Clang 支持的编译器标志的完整列表中找不到任何官方文档，它们似乎大部分都遵循 GCC 的文档。

是否有任何电流等效`-malign-double`于 Clang？还是我现在不得不使用不同的编译器？我需要它来编译一些链接到使用该标志的纯二进制第三方库的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-12-28T09:20:08.347

现在似乎已修复：

```
commit 3205dbb3f1f96e77e106f964dcf1b5f69fba4ecc
Author: Craig Topper <craig.topper@intel.com>
Date:   Thu Mar 21 20:07:24 2019 +0000

    [Driver] Pass -malign-double from the driver to the cc1 command line

    -malign-double is currently only implemented in the -cc1 interface.
    But its declared in Options.td so it is a driver option too.
    But you try to use it with the driver you'll get a message about the
    option being unused.

    This patch teaches the driver to pass the option through to cc1 so it won't
    be unused. The Options.td says the option is x86 only but I didn't see any
    x86 specific code in its implementation in cc1 so not sure if the
    documentation is wrong or if I should only pass this option through the
    driver on x86 targets.

    Differential Revision: https://reviews.llvm.org/D59624

    llvm-svn: 356706 
```

# php - A php redirect in my root is breaking the ability to browse a particular subfolder on my website

> ID：10271716
> 
> 赞同：0
> 
> 时间：2012-04-22T20:12:41.643
> 
> 标签：php, redirect

I recently decided to redirect my main website to my photography section, to make the photography section effectively the main website. I therefore have the following in my index.php file in the root...

```
<?php Header( "Location: http://notails.com/photography" );  ?> 
```

The odd thing is, if I try to browse to [http://notails.com/photography/admin](http://notails.com/photography/admin) which is a password protected folder, I get redirected to [http://notails.com/photography](http://notails.com/photography). If I go to the index.php file in the root and comment out that line, then try to browse to the admin page I am able to. I don't understand why a bit of PHP in a file in one folder is redirecting me from another folder! Any ideas?

As an aside, I'd be happy for someone to tell me how to do this redirect in my htaccess file instead of in the index.php file. I looked into it but I could find instructions on lots of things *except* this specific thing (redirect from the 'root' to a subfolder of the site)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:34:59.390

重定向网站可能有多种解决方案。

最简单的方法是修改根目录中的 .htaccess 文件（即 public_html 或类似的东西；无论您当前的 index.php 或 .html 文件在哪里）。

（注意：使用 index.php 时，必须重命名或删除 index.html）。

（将以下内容添加到 .htaccess 文件的底部...我说的是添加而不是修改，以防万一您不熟悉内容并且不确定要更改什么）。

解决方案：（.htaccess 的最后一行）

> RedirectMatch 永久 ^/$ [http://yourdomain/yoursubdirectory/index.php](http://yourdomain/yoursubdirectory/index.php)

关于访问：我不清楚您是如何“浏览到管理员”的。它是在您网站的页面中完成的（通过您网站目录结构的某些显示）吗？

通常，请确保“/yourdomain/yoursubdirectory/index.php”没有设置并为根目录使用特定变量，然后将“photography/admin”附加到它。如果是这种情况……您现在将得到不存在的“/yourdomain/yoursubdirectory/yoursubdirectory/admin”。

您可能只需要在“/photography/index.php”文件中更正该引用。

希望这里有帮助。

J. [http://omki.us](http://omki.us)

# yii - 在创建扩展时如何调整现有库以遵循 Yii 标准？

> ID：10271718
> 
> 赞同：1
> 
> 时间：2012-04-22T20:12:57.460
> 
> 标签：yii

我想把 sourceforge.net 上的 HybridAuth 库变成一个 Yii 扩展。但是，该库不遵循 Yii 标准。例如，名为 Hybrid_Auth 的类位于名为 Auth.php 的文件中。

我真的不想修改源代码 - 这样代码可以在以后使用新版本的 HybridAuth 轻松更新。如果我尝试在 Yii 中实例化一个 Hybrid_Auth 对象，它将查找一个名为 HyBrid_Auth.php 的文件，该文件不存在。我怎样才能让 Yii 在 Auth.php 文件中查找 Hybrid_Auth 类？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:08:55.273

如何将其放入扩展文件夹并创建您自己的工厂类来创建所需类的实例？

所以它看起来像

```
extensions/library_folder/
extensions/YourClass.php 
```

和课堂上这样的事情

```
require_once 'library_folder/Hybrid_Auth.php';

class YourClass {
    public function __construct(){
        return new HybridAuth();     
    }
} 
```

# objective-c - How can I get a class object that is declared in another class?

> ID：10271722
> 
> 赞同：0
> 
> 时间：2012-04-22T20:13:17.340
> 
> 标签：objective-c, ios, cocos2d-iphone

I've found some questions similar to mine, but I still didn't get it.

I have the first class loaded that inherits CCScene, than I create an object go UIView class and use addChild and than I create an object of another UIView class and use addSubView. So CCScene -> UIView -> UIView

declaration of the first object:

startLayer.h:

```
@interface startLayer : CCScene {
@public
    PlayScene *tView;
} 
```

startLayer.m:

```
tView = [[PlayScene alloc]initWithFrame:CGRectMake(0, 0, 320, 520)];
tView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"backGround.jpg"]];
CCUIViewWrapper* wrapper = [CCUIViewWrapper wrapperForUIView:tView];
[self addChild:wrapper]; 
```

the second object:

PlayScene.h:

```
@interface PlayScene : UIView {
    @public
    gameOverMenu* gorm ;
} 
```

PlayScene.m:

```
gorm = [[gameOverMenu alloc]initWithFrame:CGRectMake(0, 0, 320, 520)];
gorm.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"backGround.jpg"]];
[self addSubview:gorm]; 
```

So in gameOverMenu class I got UITextField subView:

```
UITextField* tf = [[UITextField alloc]initWithFrame:CGRectMake(100, 350, 150, 20)];
[tf setPlaceholder:@"Type your name.."];
[self addSubview:tf]; 
```

and I wanted to make keyboard move the View, I was told to write something like this in my RootViewController:

```
- (void)viewDidLoad {
[super viewDidLoad];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];

 }

-(void)keyboardDidShow:(NSNotification*)notification {
    NSDictionary* userInfo = [notification userInfo];
    NSValue* value = [userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey];
    CGSize keyboardSize = [value CGRectValue].size;
//    NSLog (@"%@", NSStringFromCGRect(gm.frame));
    NSLog(@"%@", gm.superview);
//    NSLog(@"%d", [gm.subviews count]);
    gm.frame = CGRectMake(gm.frame.origin.x, gm.frame.origin.y, gm.frame.size.width,      gm.frame.size.height-keyboardSize.height);
//    NSLog (@"%@", NSStringFromCGRect(gm.frame));//    NSLog(@"%@", gm.superview);

//    NSLog(@"%d", [gm.subviews count]);
}

-(void)keyboarDidHide:(NSNotification*)notification {
    NSDictionary* userInfo = [notification userInfo];
    NSValue* value = [userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey];
    CGSize keyboardSize = [value CGRectValue].size;

    gm.frame = CGRectMake(gm.frame.origin.x, gm.frame.origin.y, gm.frame.size.width, gm.frame.size.height+keyboardSize.height);
}

@class gameOverMenu;

@interface RootViewController : UIViewController {
    @public
    gameOverMenu* gm;
} 
```

but NSLog shows that gm object has no frame, no superclass and no subViews, I guess that means that I should use my form object here but I don't know how to get it from another class. I created cocos2d project by the way, so I had to write [self viewDidLoad]; in AppDelegate and I have no other methods implemented in RootViewController.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:16:20.807

在我看来，在您的 RootViewController 中，您并没有创建`gameOverMenu`对象；因为这是 RootViewController 的 ivar，所以它`nil`位于`keyboardDidShow`.

我不确定我是否理解您要执行的操作，但请记住，从 RootViewController 您可以通过调用以下方法访问在 cocos2d 中运行的当前场景：

```
CCScene* container = [CCDirector sharedDirector].runningScene; 
```

您的图层是场景的唯一子级，因此您可以通过以下方式访问它：

```
[container.children objectAtIndex:0] 
```

您可以在您的类中创建 ivars 和访问器（属性），以便一切都更干净，但我希望这有助于快速修补您的代码。

# android - 编译原始文件夹中的文本文件以使其无法访问

> ID：10271725
> 
> 赞同：2
> 
> 时间：2012-04-22T20:13:33.920
> 
> 标签：android, file, text, compilation, apk

我可以将**原始文件夹**中的文本文件编译为二进制文件以对其进行加密以防止其他用户读取吗？

我应该在哪里放置文本文件来编译**apk**文件中的二进制文件，以便用户无法阅读？

我一直在`res/raw`文件夹中放置许多文本文件，因为我不希望任何人使用我的文本文件。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:42:42.963

> 可以将原始文件夹中的文本文件编译为二进制文件吗？

我假设“编译”是指“加密”。欢迎您加密文件并将其放入`res/raw/`. 这对你没有什么好处，因为任何人都可以反编译你的应用程序，获取你的加密密钥，并解密文件。

> 我不喜欢任何人使用我的文本文件

它们不是您的文件。它们是用户的文件，因为它是用户的设备。如果用户希望访问这些文件，用户将这样做。如果您不希望以这种方式访问​​文件，请首先不要将它们放在用户的设备上。

# git - Git 存储库服务器的 Web 界面允许用户帐户自我管理

> ID：10271726
> 
> 赞同：2
> 
> 时间：2012-04-22T20:13:42.883
> 
> 标签：git, redmine, gitolite, gitorious, gitlab

这个问题是[https://stackoverflow.com/q/438163/1168342](https://stackoverflow.com/q/438163/1168342)的扩展 我想特别知道是否有 Git 存储库服务器的 Web 界面允许用户：

1.  如果他们还没有，请注册一个帐户。（假设服务器仅通过 VPN 可见）
2.  与同一服务器上的其他用户管理（创建/共享）私人存储库。

我查看了 Redmine 和 GitLab，两者似乎都需要超级用户来创建帐户。GitLab 在 Gitolite 上运行，[它似乎支持预配置帐户的后端](http://sitaramc.github.com/gitolite/users.html)。但我正在寻找管理用户/共享的前端软件的东西。

ps 这也是一个与[大学环境的最佳源代码控制相关的更集中的问题（管理存储库的开销低）](https://stackoverflow.com/q/9693202/1168342)

* * *

我们想要的解决方案应该适用于整个大学，允许任何注册用户（例如 LDAP）在没有管理员干预的情况下创建和共享存储库。想想超过 10K 的用户，每个学生/课程（每学期）有几个 repos，团队动态创建而没有实验室助理或教授，以及研究/俱乐部/小组使用等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:51:38.930

如果您有 LDAP 或 ActiveDirectory（打开 LDAP），您可以允许用户使用他们的 LDAP 电子邮件地址和密码登录 Gitlab。

~~但是管理员或项目主管仍需要将用户添加到项目中。~~

然后，要自动将用户添加到项目中，请使用系统挂钩。可惜系统钩子的文档比较少，网上没有什么文档；它是您安装的 Gitlab 应用程序的一部分。但是在你安装它之后，你可以通过 (http://yourgitlabhost/help/system_hooks) 来访问它。

您需要编写一个小型 Web 应用程序来接收这些钩子，然后调用 Gitlab API (http://yourgitlabhost/help/api) 将新登录的用户添加到相应的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:21:23.017

[Gitorious](https://gitorious.org/)允许独立用户注册，并且最近刚刚发布了他们的第一个带有[私有存储库](http://blog.gitorious.org/2012/02/29/private-repositories-2/)的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T23:12:16.313

如果您不想在[Private Assembla](http://portfolio.assembla.com/private_install.html)中询问您的可能性，或[构建自己的“Assembla”](https://www.assembla.com/spaces/assembladev/)，

你可以考虑一下 SCM-Manager

*   [scm-userrepo-plugin](http://plugins.scm-manager.org/scm-plugin-backend/page/detail/sonia.scm.plugins/scm-userrepo-plugin.html)用于由用户创建存储库
*   [scm-auth-ldap-plugin](http://plugins.scm-manager.org/scm-plugin-backend/page/detail/sonia.scm.plugins/scm-auth-ldap-plugin.html)或[scm-activedirectory-auth-plugin](http://plugins.scm-manager.org/scm-plugin-backend/page/detail/sonia.scm.plugins/scm-activedirectory-auth-plugin.html)用于管理用户

**最后说明（题外话）**：请不要通过将学生浸入 Git 来破坏他们

# java - JPA Unidrectional OneToMany 通过 JoinColumn 返回相同的记录 n 次而不是 n 不同的记录

> ID：10271727
> 
> 赞同：2
> 
> 时间：2012-04-22T20:13:46.207
> 
> 标签：java, mysql, jpa, one-to-many

我们正在尝试在我们从其他人的应用程序导入的一些只读表上创建 JPA 映射。这些是多个 100 亿行的表，因此更改它们的模式不是一种选择。我们有一个表 Message 表，它有一个 OBJECT_ID 值和另一个表 DistributionGroup 表，它有许多与任何给定 OBJECT_ID 相关联的 ENTITY_ID 行。相关表定义如下：

```
CREATE TABLE Message (
OBJ_ID varchar(255) NOT NULL,
FileName varchar(255) NOT NULL,
KEY FileName (FileName)) ENGINE=InnoDB;

CREATE TABLE DistributionGroup (
OBJ_ID varchar(255) NOT NULL,
ENTITY_ID varchar(255) NOT NULL,
KEY OBJ_ID (OBJ_ID)) ENGINE=InnoDB; 
```

以及将这两者联系起来的 JPA 映射：

```
public class MessageRecord {
    private String obj_id;
    private String file;
    private List<DGRecord> list = new ArrayList<DGRecord>();

    @Id
    @Column(name = "OBJ_ID", nullable = false)
    public String getObjID () { return obj_id; }
    public void setObjID (String obj_id) { this.obj_id = obj_id; }
    //... (Similar for FileName)

    @OneToMany
    @JoinColumn(name="OBJ_ID", referencedColumnName="OBJ_ID")
    public List<DGRecord> getDGRecordList() { return list; }
    public void setDGRecordList(List<DGRecord> list) { this.list = list; }
}

public class DGRecord {
    private String obj_id;
    private String entity_id;

    @Id
    @Column(name = "OBJ_ID", nullable = false)
    public String getObjID () { return obj_id; }
    public void setObjID (String obj_id) { this.obj_id = obj_id; }

    @Column(name = "ENTITY_ID", nullable = false)
    public String getEntityId () { return entity_id; }
    public void setEntityId (String entity_id) { this.entity_id = entity_id; }
} 
```

现在，当我们运行一些代码来迭代给定 MessageRecord 的所有 DGRecords 时，就会发生奇怪的事情：

```
MessageRecord record = [obtained earlier];
for (DGRecord dg : record.getDGRecordList()) {
    System.out.println(dg.getEntityId());
    //Do some work with the ENTITY_ID
} 
```

当我对数据库手动运行此操作时，我得到了我期望看到的内容：

```
SELECT * FROM DistributionGroup WHERE OBJ_ID = 'ArbitraryObjID';
OBJ_ID, ENTITY_ID
ArbitraryObjID, EntityID1
ArbitraryObjID, EntityID2
ArbitraryObjID, EntityID3 
```

但是实际代码的输出，当`record`具有相同的时`ArbitraryObjID`，是：

```
EntityID1
EntityID1
EntityID1 
```

对于任何给定的组合，它不会返回 n 个不同的 DGRecord，而是返回 n 次相同的 DGRecord 值，其中 n 是手动运行查询返回的不同行数。我不确定这是否相关，但它实际上是在同一个对象上循环 n 次（由 System.out.println(dg) 返回相同的 package.DistributionGroup@MemoryAddress n 次证明）。

我们做错了什么，我们该如何解决？请记住，表模式更改或添加连接表的成本非常高，实际上是不可能的。但在当前的设置下，这似乎仍然可以工作，因为它作为人类工作得足够好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:30:37.517

我认为你的映射是错误的，

尝试，

```
@JoinColumn(name="OBJ_ID", referencedColumnName="ENTITY_ID") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T05:30:45.743

将 @Id 注释添加到 ENTITY_ID 列

```
 @Id
  @Column(name = "ENTITY_ID", nullable = false)
  public String getEntityId () { return entity_id; }
  public void setEntityId (String entity_id) { this.entity_id = entity_id; } 
```

# php - 为简单的联系表单调试 php

> ID：10271728
> 
> 赞同：2
> 
> 时间：2012-04-22T20:14:00.403
> 
> 标签：php, forms

让我的简单 php 电子邮件联系表正常工作时遇到问题。没有生成或返回错误，但我没有收到任何电子邮件。

这是我的表格[http://bitstream.ca/beta2/contact.html](http://bitstream.ca/beta2/contact.html)

还有我正在使用的 php（当然还有我正确的电子邮件）

任何人都可以看到下面的表单代码有任何错误吗？有哪些一般的调试步骤可以尝试？提前致谢！

```
<?php 
$errors = '';
$myemail = 'foo@foo.foo';//<-----Put Your email address here.
if(empty($_POST['name'])  || 
   empty($_POST['email']) || 
   empty($_POST['message']))
{
    $errors .= "\n Error: all fields are required";
}

$name = $_POST['name']; 
$email_address = $_POST['email']; 
$message = $_POST['message']; 

if (!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z {2,3})$/i", $email_address))
  {
  $errors .= "\n Error: Invalid email address";
  }
  if( empty($errors))
  {
    header('Location: contact-form-thank-you.html');
  } 
 ?>
<!DOCTYPE HTML> 
<html>
 <head>
 <title>Contact form handler</title>
 </head>
<body>
<!-- This page is displayed only if there is some error -->
<?php
   echo nl2br($errors);
?>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:17:17.733

您应该添加对 mail() 函数（或其他一些邮件 PEAR 类或类似的）的调用以实际发送电子邮件。看这里： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:19:13.990

`if`在你的陈述之间插入这个：

```
if(empty($errors)) {
    mail($email,$subject,$message,$headers);
    header('Location: contact-form-thank-you.html');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:28:51.047

你可以试试

```
<?php
$errors = array ();
$myemail = 'foo@foo.foo'; // <-----Put Your email address here.
$name = $_POST ['name'];
$to = $_POST ['email'];
$message = $_POST ['message'];
$subject = "Sample Email";
$headers = "From: $myemail" . "\r\n" . "Reply-To: $myemail" . "\r\n" . 'X-Mailer: PHP/' . phpversion ();

if (empty ( $_POST ['name'] ) || empty ( $_POST ['email'] ) || empty ( $_POST ['message'] )) {
    $errors [] = "Error: all fields are required";
}

if (! preg_match ( "/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z {2,3})$/i", $to )) {
    $errors [] = "Error: Invalid email address";
}

if (count ( $errors ) == 0) {
    if (@mail ( $to, $subject, $message, $headers )) {
        $errors [] = "Can't send Email";
    }
    header ( 'Location: contact-form-thank-you.html' );
}
?>
<!DOCTYPE HTML>
<html>
<head>
<title>Contact form handler</title>
</head>
<body>
    <!-- This page is displayed only if there is some error -->
<?php
echo implode ( "<br />", $errors );
?>
 </body>
</html> 
```

# gwt - 如何在 JS/JSNI 中创建的按钮上调用 Java 方法

> ID：10271730
> 
> 赞同：0
> 
> 时间：2012-04-22T20:14:11.320
> 
> 标签：gwt, smartgwt

我想通过单击一个按钮来调用 Java 方法，该按钮不是像往常一样在 GWT 中创建，而是使用纯 HTML 创建的。

以下是示例代码：-

```
private native void createHeaderSpanContents(Element element)/*-{

element.innerHTML='<button type="button" onclick="this.@ca.bell.nis.psp.client.gui.AbstractSearchResultGrid::hideColumns()()"></button>Identification'; 
```

}-*/;

```
public void hideColumns() {
    // Hide the columns
} 
```

上面从 JSNI 中调用 hideColumns() Java 方法的方式在这里不起作用。请帮忙！

问候， -Trans。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:19:20.900

您可以使用[`Button.wrap()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Button.html#wrap%28com.google.gwt.dom.client.Element%29)a `Button`out of an `Element`，例如：

```
Button b = Button.wrap(Document.getElementById("foo"));
b.addClickHandler(new ClickHandler() {
  @Override
  public void onClick(ClickEvent e) {
    hideColumns();
  }
}): 
```

# matrix - 矩阵和将 Float4 转换为 Vector3

> ID：10271739
> 
> 赞同：0
> 
> 时间：2012-04-22T20:15:42.913
> 
> 标签：matrix, unity3d

我对矩阵有基本的了解，并且已经快速阅读了这个简单的问题，但是如果我要将 Vector3 转换为 Float4 会很简单：

Vector3(x,y,z) = Float4(x,y,z,0)

如果没有，任何人都可以指出我进一步阅读如何进行这种转换等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:31:51.943

您无需担心手动转换；隐式转换一直存在于 API 中。

[http://unity3d.com/support/documentation/ScriptReference/Vector4-operator_Vector4.html](http://unity3d.com/support/documentation/ScriptReference/Vector4-operator_Vector4.html)

[http://unity3d.com/support/documentation/ScriptReference/Vector4-operator_Vector3.html](http://unity3d.com/support/documentation/ScriptReference/Vector4-operator_Vector3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:09:31.903

首先，我找不到关于 Float4 类的任何信息（http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=Float4）。但是，理论上，我的解决方案如下：

```
Vector3 v3(1,2,3);
Float4 f4(4,5,6,0);

v3.x = f4.x;
v3.y = f4.y;
v3.z = f4.z; 
```

# java - GUI 随 RadioButton 选择而改变

> ID：10271744
> 
> 赞同：2
> 
> 时间：2012-04-22T20:16:16.687
> 
> 标签：java, user-interface, jlabel, jtextfield, jradiobutton

根据标题，我正在尝试使用 RadioButton 选择来更改我的 GUI。更具体地说，JLabels 和 JTextfields。本质上，我希望看起来像这样：[http://i40.tinypic.com/262sec7.png](http://i40.tinypic.com/262sec7.png)，其中前三个标签和字段始终相同，最后两个字段和标签不同。

我知道它需要通过 RadioButtons 的 ActionListeners 发生。是否应该在 ActionListeners 中创建标签以下的所有内容？然后根据 RadioButton 选择清除并再次创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:23:53.690

您正在寻找[CardLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)。

[CardLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)是一个[LayoutManager](http://docs.oracle.com/javase/7/docs/api/java/awt/LayoutManager.html)，它允许您添加多个组件并选择使用`CardLayout.show(Container parent, String name)`. 一次只能看到一个组件。

这里有一个教程：http: [//docs.oracle.com/javase/tutorial/uiswing/layout/card.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

在您的情况下，您将为`JPanel`每个单选按钮添加不同的所有控件。然后，单选按钮`ActionListener`将简单地调用`CardLayout.show( ... )`以显示适当的控件集。

# c++ - cudaGetLastError 返回“未知错误”

> ID：10271747
> 
> 赞同：1
> 
> 时间：2012-04-22T20:16:48.717
> 
> 标签：c++, visual-studio-2008, cuda

我是 CUDA C 的新手。我正在编写一个简单的数组 Add 和 Reduce，当它运行从设备复制回主机的错误检查时，我得到一个“未知错误”。我不确定错误检查器是否有问题并且没有返回正确的 cudaError 但我无法弄清楚出了什么问题......

```
using namespace std;

#include <iostream>

void CudaAddReduce(int *input, int *output, size_t size);

__global__ void Fill(int *fillItem);

__global__ void Add(int *input1, int *result);

__global__ void Reduce(int *intputArray, int *outputArray);

main(int argc, char *argv[])
{
const int N = 100;
int inp[N];
int outp[N];
size_t size = (N * sizeof(int));

CudaAddReduce(inp,outp,size);

cout << outp[N] << endl;

}

void CudaAddReduce(int *input, int *output, size_t size)
{

// allocate buffers to device 

//input
int *d_input;
if (cudaMalloc(&d_input,size) != cudaSuccess){
    cerr << cudaGetErrorString(cudaGetLastError()) << endl;
    cout << "Input allocation to device" << endl;
    exit(1);
}
////////////////////////////
//output
int *d_output;
if (cudaMalloc(&d_output,size) != cudaSuccess){
    cerr << cudaGetErrorString(cudaGetLastError()) <<endl;
    cout << "output allocation to device" << endl;
    exit(1);
}

//////////////////////////////////
//copy buffers to device from host
//////////////////////////////////
//input
if (cudaMemcpy(d_input, input, size, cudaMemcpyHostToDevice) != cudaSuccess){
    cerr << cudaGetErrorString(cudaGetLastError()) << endl;
    cout << "Input Copy from host to device" << endl;
    exit(1);
}

/////////////////////////////////
//execute device kernals
/////////////////////////////////
int numThreads = 256;
int numBlocks = 1;

//Fill Kernal
Fill<<<numBlocks,numThreads>>>(d_input);

// Add Kernal
Add<<<numBlocks,numThreads>>>(d_input,d_output);

//execute Reduce Kernal
Reduce<<<numBlocks,numThreads>>>(d_output,d_input);

cudaThreadSynchronize();

/////////////////////////////////
//copy result from device to host
/////////////////////////////////
//output 

if  (cudaMemcpy(output,d_output,size,cudaMemcpyDeviceToHost)!= cudaSuccess){
    cerr << cudaGetErrorString(cudaGetLastError()) << endl;
    cout << "Output Copy from device to host" << endl;
    exit(1);
}

//clear device buffers
cudaFree(d_input);
cudaFree(d_output);
} 

__global__ void Fill(int *fillItem)
{
int id = blockIdx.x * blockDim.x + threadIdx.x;
fillItem[id] = 1;
}
__global__ void Add (int *input1, int* result)
{
int id = blockIdx.x * blockDim.x + threadIdx.x;
result[id] = input1[id] + input1[id];
}
__global__ void Reduce(int *inputArray, int *outputArray)
{
extern __shared__ int sdata[];

// each thread loads one element from global to shared mem
unsigned int tid = threadIdx.x;
unsigned int i = blockIdx.x * blockDim.x + threadIdx.x;
sdata[tid] = inputArray[i];
__syncthreads();

// do reduction in shared mem
for(unsigned int s=1; s < blockDim.x; s *= 2)
{
    if(tid % (2*s) == 0)
    {
        sdata[tid] += sdata[tid + s];
    }
__syncthreads();
}

// write result for this block to global mem
if(tid == 0) outputArray[blockIdx.x] = sdata[0];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:27:01.657

编辑：在你的内核中，你试图访问数组元素超出范围！您的数组大小为 100，但您使用的线程维度为 256，每个线程都在尝试写入！您需要使用一致的尺寸。

你在什么时候收到错误？这两个 malloc 函数看起来应该可以正常运行，而 cudaGetErrorString 不太可能出错。我对未知错误的典型经验是，您试图从不应该复制的地方复制到或复制到不应该的地方，或者大小错误。

为什么要将未分配的数组复制到内存中？您从未在 main.xml 中填写过数组。

此外，您不需要使用 <<<>>> 声明内核函数。这些仅在您使用该功能时才需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-06T20:07:21.433

我遇到了这个错误，原来是我的操作系统版本。与依赖库之一不匹配。一旦我升级了操作系统，然后重新安装了驱动程序，这个错误就消失了。

- 约翰

# ruby-on-rails - Rails：一对多外键不正确

> ID：10271750
> 
> 赞同：3
> 
> 时间：2012-04-22T20:17:08.313
> 
> 标签：ruby-on-rails, foreign-keys, one-to-many, shoulda

我对rails比较陌生。我正在尝试在 Rails 中设置一对多关联。但是，我认为我的 foreign_key 做错了，因为我的测试失败了。我的测试如下：

在 user_spec 中：

```
 it {should have_many :invitations} 
```

用户型号：

```
 has_many :invitations 
```

邀请模型：

```
belongs_to :sender, :class_name => "User" 
```

邀请迁移：

```
class CreateInvitations < ActiveRecord::Migration
  def change
    create_table :invitations do |t|
      t.integer :sender_id
      t.string :token

      t.timestamps
    end
  end
end 
```

我从测试中得到的错误是：

```
Failure/Error: it {should have_many :invitations}
       Expected User to have a has_many association called invitations (Invitation does not have a user_id foreign key.) 
```

我不确定我哪里出错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:34:35.910

错误表明问题不在belongs_to，而是在has_many

```
 has_many :invitations , :foreign_key => "sender_id" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T20:24:42.113

菲弗尔是对的。您刚刚使用别名来关联到 User 类。将列名更改为`user_id`或告诉 rails 使用另一个外键：

*邀请.rb*

```
belongs_to :sender, :class_name => "User" 
```

*用户.rb*

```
has_many :invitations, :foreign_key => "sender_id" 
```

# jquery - jQuery clone 太喜欢克隆自己了。如何避免？

> ID：10271751
> 
> 赞同：3
> 
> 时间：2012-04-22T20:17:12.757
> 
> 标签：jquery

看我的例子：http: [//jsfiddle.net/ujvHe/](http://jsfiddle.net/ujvHe/)

当您第二次单击 +add 按钮时，它会生成 4 行字段，当您第三次按下它时，会生成 8 个行字段。

当您单击+添加时，我只想在这些字段中附加一行。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:20:34.390

那是因为你一次又一次地克隆克隆的标记，试试这个：

```
 $(function(){
                $('#products_addlink').live('click', function(){
                    var $orig = $('.products_add:first').clone(true);

                    $('#products_adds').append($orig);
                });
            }); 
```

[http://jsfiddle.net/ujvHe/1/](http://jsfiddle.net/ujvHe/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:20:06.010

你可以使用`$('.products_add:eq(0)')`而不是`$('.products_add')`

这样你只克隆第一个具有`products_add`类的项目

演示：http: [//jsfiddle.net/gRffg/](http://jsfiddle.net/gRffg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:20:49.273

您最好的选择是将克隆作为变量放在复制它的函数之外。

或者，如果您每次都必须进行实时克隆，

```
var $orig = $('.products_add').first().clone(true); 
```

# java - 如何解决自定义 Nutch 插件的依赖关系？

> ID：10271754
> 
> 赞同：0
> 
> 时间：2012-04-22T20:17:23.983
> 
> 标签：java, eclipse, plugins, ivy, nutch

我在 Eclipse 中为 Ivy 和依赖解析而苦苦挣扎。我为 Nutch 创建了一个自定义插件，它依赖于我的 Eclipse 工作区中的另一个项目。现在，当我构建它时，它会抱怨该项目中的类。我认为构建类路径设置中的标准 Eclipse 机制（我已将该项目添加为依赖项项目）不起作用，因此我必须通过 ivy.xml 定义依赖项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:42:37.317

[查看Nutch wiki](http://wiki.apache.org/nutch/HowToMakeCustomSearch)的相关页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:35:21.587

旧方法是：在`NUTCH_INSTALLATION/src/plugin/<your_plugin>/plugin.xml`文件中声明依赖项。

如果您想使用 ivy ：在文件`<dependencies>`中的标记内声明依赖项。`NUTCH_INSTALLATION/src/plugin/<your_plugin>/ivy.xml`

# c - 在多个线程之间共享套接字描述符

> ID：10271761
> 
> 赞同：3
> 
> 时间：2012-04-22T20:18:06.737
> 
> 标签：c, multithreading, sockets, select, network-programming

只是一个快速的问题。我有一个网络 C 应用程序（TCP 服务器），它有多个工作线程（Pthreads）。每个工作线程都使用一个`select`系统调用，每个线程都将监听`socket descriptor`添加到其选择集中。因此，每个工作线程都有效地侦听传入连接，并且一次只有一个线程成功接受特定连接，并且该连接`socket descriptor`被添加到相应线程的`select`集合中。

我的问题是每个线程都有自己的`select`集合，我是否可以向套接字描述符位于另一个工作线程选择集合中的客户端发送或接收数据？换句话说，我可以使用任何工作线程的选择集中的套接字描述符来从我想要的任何线程执行 I/O 吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:32:44.560

您可以在不同线程之间共享套接字和文件描述符。这就是大多数服务器所做的。

# ios - 将图像插入视频文件

> ID：10271764
> 
> 赞同：0
> 
> 时间：2012-04-22T20:18:21.863
> 
> 标签：ios

我需要能够用图像覆盖录制的视频文件的一部分。我不知道该怎么做。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T21:50:34.507

如果您使用的是[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)类，您将能够访问`moviePlayerController.currentPlaybackTime`. 鉴于此，您的问题的一个解决方案可能是 1\. 确定您想要掩盖的开始和结束时间。[2\. 使用Timer](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Timers/Timers.html)
监控 currentPlaybackTime 。 3\. 在您的时间窗口内将您的图像放在视频上，并在时间窗口过去后将其移除。

# ios - Apple inapp Purchase

> ID：10271765
> 
> 赞同：0
> 
> 时间：2012-04-22T20:18:54.157
> 
> 标签：ios, in-app-purchase

I am new to in app purchase concept of apple. I am developing an application which displays videos from a server. All videos are charged, to pay for a particular video I am thinking of implementing the in app purchase(I dont know whether this can be done any other way).

This is how I am trying to implement it. When user pays for a video he will get the url for that particular video and he can then download that video and watch it. here is my doubt do I need to add all the video urls to app store before it can be made available for in app purchase?

Is there any way that the urls are kept on my server and once payment confirmation is obtained I can make that url visible to the user?

I have goe through these tutorials [Tutorial1](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases) and [Tutorial2](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)

Can some one please help me? How can I do this properly in ios? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:45:32.323

That's right, you can let user select a video, and when you get `SKPaymentTransactionStatePurchased`, provide him a link from your server. After that, just `finishTransaction`. You can also update a list of videos dynamicly from your server before showing to the user.

# c - 如何使用 C 开发适用于 Windows Mobile 的应用程序？

> ID：10271768
> 
> 赞同：0
> 
> 时间：2012-04-22T20:19:20.367
> 
> 标签：c, windows-mobile

好吧，我需要为 Windows mobile 6.1/6.5 开发应用程序，我正在寻找如何使用 C 语言编程来做到这一点。听说有可能，但目前还没有发现，只是在旧版本的 VS 上支持 C++/CLI 编程语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:40:19.717

使用[嵌入式 Visual C++ 4.0](http://www.microsoft.com/download/en/details.aspx?id=24809)。

它也是免费的。

不过，仅供参考：IMO：Visual Studio 2008 完成工作要快得多。

# asp-classic - THIS 在 ASP 中写出页面标题

> ID：10271771
> 
> 赞同：-4
> 
> 时间：2012-04-22T20:19:41.507
> 
> 标签：asp-classic, title

我有这个：

```
<head>
<title>This is my title</title>
</head> 
```

然后我如何制作一个写出标题内容的.ASP脚本^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:29:03.143

简单的。

```
<title><%="This is my title"%></title> 
```

或者

```
<title><%=String%></title> 
```

# c# - 存储哈希值

> ID：10271772
> 
> 赞同：0
> 
> 时间：2012-04-22T20:19:46.340
> 
> 标签：c#, linq, authentication, hash, salt

有没有办法为这种哈希方法存储盐？我不知道该怎么做？

谢谢。

```
 public void AddStudent(Student student)
    { 
        student.StudentID = (++eCount).ToString();
        student.Salt = GenerateSalt();
        byte[] passwordHash = Hash(student.Password, student.Salt);
        student.Password = Convert.ToBase64String(passwordHash);
        student.TimeAdded = DateTime.Now;
        students.Add(student);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:34:34.170

这应该与您想要的一致。不确定这些学生的存储位置，但也可能需要更改。

```
[DataMember(Name = "StudentID")]
public string StudentID { get; set; }
[DataMember(Name = "FirstName")]
public string FirstName { get; set; }
[DataMember(Name = "LastName")]
public string LastName { get; set; }
[DataMember(Name = "Password")]
public string Password;
[DataMember(Name = "Salt")]
public byte[] Salt;

protected RNGCryptoServiceProvider random = new RNGCryptoServiceProvider();

public byte[] GenerateSalt()
{
    byte[] salt = new byte[10];
    random.GetNonZeroBytes(salt);
    return salt;
} 

public static byte[] Hash(string value, byte[] salt)
{
    return Hash(Encoding.UTF8.GetBytes(value), salt);
}

public static byte[] Hash(byte[] value, byte[] salt)
{
    byte[] saltedValue = value.Concat(salt).ToArray();

    return new SHA256Managed().ComputeHash(saltedValue);
}

public void AddStudent(Student student)
{
    byte[] salt = GenerateSalt();

    student.StudentID = (++eCount).ToString();
    byte[] passwordHash = Hash(student.Password, salt);
    student.Salt = salt;
    student.Password = Convert.ToBase64String(passwordHash);
    student.TimeAdded = DateTime.Now;
    students.Add(student);
} 
```

# ios - NYTimes iPad app 风格的网格视图

> ID：10271774
> 
> 赞同：1
> 
> 时间：2012-04-22T20:19:55.703
> 
> 标签：ios, ipad, gridview

有谁知道纽约时报 iPad 应用程序的外观（特别是这个视图：http: [//i.zdnet.com/blogs/zdnet-ipad-app-new-york-times.jpg](http://i.zdnet.com/blogs/zdnet-ipad-app-new-york-times.jpg)）是如何实现的？![文章选择视图](../Images/07c9882b01c52adcda5ce42484e12d30.png)

本质上，我想知道是否有人可以为我指出正确的方向，以创建类似于上述网格的具有不同大小的单元格的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:39:45.040

基本上，您从 UIScrollView 开始，然后开始重新创建 UITableView 自动为您完成的所有工作。

# android - 全角的 Android XML 图像

> ID：10271775
> 
> 赞同：2
> 
> 时间：2012-04-22T20:19:56.530
> 
> 标签：android, xml, layout, width

我的 xml 文件有问题，我希望 background_bar 占据全屏宽度（在屏幕顶部），但我不能这样做。请帮助我这是我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

 <RelativeLayout
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/main_background_bar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/background_bar"/>

    <ImageView
        android:id="@+id/main_logo_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="5dp"
        android:src="@drawable/logo_bar" />

    <ImageView
        android:id="@+id/main_title_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="27dp"
        android:layout_toRightOf="@+id/main_logo_bar"
        android:src="@drawable/notifme_title_bar" />

    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:39:49.753

尝试将`android:scaleType="fitXY"`其变体之一添加到 background_bar。

# netbeans - NetBeans 平台单个 JAR 文件

> ID：10271776
> 
> 赞同：0
> 
> 时间：2012-04-22T20:20:04.533
> 
> 标签：netbeans, jar, netbeans-platform

有什么方法可以仅使用单个 JAR 文件分发 NetBeans 平台应用程序？理想情况下，我们希望为所有平台使用单个 JAR 文件，但我们愿意为每个支持的平台使用不同的 JAR 文件。

我意识到我应该更具体一点：分发并不是指安装。我们希望能够通过执行单个可执行 JAR 文件来运行 NetBeans 平台应用程序，而无需其他文件或安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:02:06.797

我确信可以使用[以下安装程序](https://stackoverflow.com/questions/1276091/installer-generator-written-in-java)之一将应用程序分发到单个 jar 中。

没有什么可以阻止您使用这种方法，尽管值得注意的是，您可以仅使用 NetBeans IDE 中的菜单选项为大多数主要平台（Linux、Mac 和 Windows）生成本机安装程序以及独立于操作系统的 ZIP 分发。

# jquery - 如何在jQuery中为选择器返回这个数组索引？

> ID：10271778
> 
> 赞同：0
> 
> 时间：2012-04-22T20:20:16.323
> 
> 标签：jquery, jquery-selectors

如何让 alert() 返回 123、456 或第 n 个组键？

我想检索索引键是对相应的选项值做一些链式操作。

注意：索引键也可以是字母数字。

HTML：

```
<select name="option[group][123]">
    <option>a</option>
    <option>b</option>
</select>
<select name="option[value][123]">
    <option>1</option>
    <option>2</option>
</select>

<select name="option[group][456]">
    <option>a</option>
    <option>b</option>
</select>
<select name="option[value][456]">
    <option>1</option>
    <option>2</option>
</select> 
```

脚本：

```
$("select[name^='option[group]']").change(function(){
  alert('Index:' + $(this).fieldsetIndexKeyIdentifier());
  // Do something with option values of group
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:22:38.823

您可以像这样从 name 属性中解析它：

```
$("select[name^='option[group]']").change(function(){
    var nums = this.name.match(/\[(\d+)\]$/)
    if (nums) {
        alert('Index:' + nums[1]);
    }
  // Do something with option values of group
}); 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/TcRzW/](http://jsfiddle.net/jfriend00/TcRzW/)

或者，如果您想要名称中最后一个索引中的任何字符序列，则应为：

```
$("select[name^='option[group]']").change(function(){
    var nums = this.name.match(/\[([^\]]+)\]$/)
    if (nums) {
        alert('Index:' + nums[1]);
    }
  // Do something with option values of group
}); 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/TcRzW/](http://jsfiddle.net/jfriend00/TcRzW/)

如果你现在想知道你正在处理哪个组号，你可以这样做：

```
var selectGroups$ = $("select[name^='option[group]']");
selectGroups$.change(function(){
    var index = selectGroups$.index(this);
    // index will be a number like 0, 1, 2, 3 for which
    // sequential "select[name^='option[group]']" we are operating on.
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T21:33:20.780

这并不能直接回答问题，但我完成了这样的链接选择字段：

```
$("select[name^='option[group]']").change(function(){
    var valueField = this.name.replace(/group/, 'value');
    $("select[name='"+ valueField +"']").somefunction(...);
}); 
```

# jquery - 如何让 jsFiddle 默认为非最小化 jQuery 库？

> ID：10271783
> 
> 赞同：3
> 
> 时间：2012-04-22T20:20:35.220
> 
> 标签：jquery, jsfiddle

最近的某个时候，当您为其选择 jQuery 库选项时，jsFiddle（我一直在 StackOverflow 上用于回答问题的工具）中的默认设置切换为使用 jQuery 的最小化版本。这意味着我无法在 Chrome 调试器中进入 jQuery 库，这是我了解 jQuery 函数如何工作的主要方法之一，但没有很好的文档记录。

所以，我想知道是否有人知道是否有办法将其更改为默认为非最小化 jQuery，以便更容易调试涉及单步执行 jQuery 的代码？

我知道我可以通过`<script src=xxx>`到 Go​​ogle CDN 手动链接非最小化版本的 jQuery，但我更愿意使用 jsFiddle 的内置功能来选择合适的库版本，但只是让它使用非最小化版本。而且，它曾经使用非最小化版本。毕竟它是一个测试工具，所以对我来说至少可以选择使用非缩小版本是有意义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:38:29.793

我不得不深入挖掘，但我找到了 jsFiddle 开发人员的电子邮件地址。

piotr (at sign) zalewa.info

我想他将是唯一能够真正回答这个问题的人。

你实际上已经回答了你自己的问题。

我曾问过这个开发人员“zalun”关于让 jQuery 成为默认 JavaScript 库的问题，他说最终会，但现在要设置一个默认小提琴并根据需要从中分叉。

根据需要从这里分叉：

[http://jsfiddle.net/prbGP/](http://jsfiddle.net/prbGP/)

它是 No-Library（纯 JS）框架，添加了 Google 的 CDN jQuery 非缩小最新版本的资源。

# html - HTML5 套接字/多人游戏

> ID：10271787
> 
> 赞同：2
> 
> 时间：2012-04-22T20:21:21.333
> 
> 标签：html

我刚刚开始 HTML5 游戏开发，我使用画布制作了几个游戏，并使用 Javascript 访问它。

不过，我想知道如何制作多人在线游戏。我是否一定需要为此使用服务器端的东西？

我听说过 HTML5 套接字，还有其他选择吗？

谢谢你。

编辑：非常感谢任何简单的示例或链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:24:32.020

你需要一个服务器，P2P 在浏览器之间还不能工作。请参阅：[我是否需要服务器才能使用 HTML5 的 WebSockets？](https://stackoverflow.com/questions/1530023/do-i-need-a-server-to-use-html5s-websockets)

Websocket（HTML5 套接字）是一种在浏览器和服务器之间建立双向开放连接的方法。否则，您将不得不使用仅拉取的 XHR（又名 Ajax）。Mozilla 写了一篇很棒的文章来解释他们是如何构建的：[BrowserQuest](http://hacks.mozilla.org/2012/03/browserquest/)（或者只是玩它：[http](http://browserquest.mozilla.org/) ://browserquest.mozilla.org/ ）

替代品通常基于*Flash XMLSocket*！

# hadoop - hadoop如何设置节点数？

> ID：10271792
> 
> 赞同：2
> 
> 时间：2012-04-22T20:22:03.597
> 
> 标签：hadoop, nodes

我正在使用由我们部门技术人员管理的 hadoop 集群。要使用它，我只需要在两个文件（core-site.xml 和 mapred-site.xml）中设置参数就可以了。

我的问题是，有没有办法控制我的 hadoop 程序中涉及的节点数量？我知道如果我自己管理集群，我可以修改配置文件中的重复数。但由于我无权访问该文件，我似乎不走运。

我知道 setNumMapTasks() 和 setNumReduceTasks() 方法。这两种方法可以以编程方式设置 map/reduce 任务的数量。但是这些数字不一定会转化为实际运行的节点，对吧？

我听说 Amazon EC2 允许您使用命令设置涉及的节点数，常规的 hadoop 实现是否允许这样做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:34:37.740

没有。它不能通过程序来完成。您可以更改配置以实现它

# c++ - C++ 不断收到错误 LNK2019：未解析的外部符号

> ID：10271796
> 
> 赞同：8
> 
> 时间：2012-04-22T20:22:36.013
> 
> 标签：c++, templates, linker

我试图用谷歌搜索，但总是会遇到不同的问题。当我尝试编译这个程序时，我得到了 3 个未解决的外部：

```
1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall DynIntStack<char>::~DynIntStack<char>(void)" (??1?$DynIntStack@D@@QAE@XZ) referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol "public: void __thiscall DynIntStack<char>::pop(char &)" (?pop@?$DynIntStack@D@@QAEXAAD@Z) referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol "public: void __thiscall DynIntStack<char>::push(char)" (?push@?$DynIntStack@D@@QAEXD@Z) referenced in function _main 
```

**DynIntStack.h**

```
/****************************************************************************
DynIntStack class.

Chad Peppers

This class creates a object for stacking nodes

In addition, there should be member functions to perform the following 
operations:
- Push to the stack
- Pop to the stack
- Function to check if empty

****************************************************************************/
// Specification file for the DynIntStack class
#ifndef DYNINTSTACK_H
#define DYNINTSTACK_H

template <class T>
class DynIntStack
{
private:
   // Structure for stack nodes
   struct StackNode
   {
      T value;        // Value in the node
      StackNode *next;  // Pointer to the next node
   };

   StackNode *top;      // Pointer to the stack top

public:
   // Constructor
   DynIntStack()
      {  top = NULL; }

   // Destructor
   ~DynIntStack();

   // Stack operations
   void push(T);
   void pop(T &);
   bool isEmpty();
}; 
#endif 
```

**DynIntStack.cpp**

```
/****************************************************************************
DynIntStack class.

Chad Peppers

This class creates a object for stacking nodes

In addition, there should be member functions to perform the following 
operations:
- Push to the stack
- Pop to the stack
- Function to check if empty

****************************************************************************/

#include <iostream>
#include "DynIntStack.h"
using namespace std;

/*************************************************************************
Basic class constructor.

Input Parameters:  Information to build the  stack

Return Type:  void

*************************************************************************/

template<class T>
DynIntStack<T>::~DynIntStack()
{
   StackNode *nodePtr, *nextNode;

   // Position nodePtr at the top of the stack.
   nodePtr = top;

   // Traverse the list deleting each node.
   while (nodePtr != NULL)
   {
      nextNode = nodePtr->next;
      delete nodePtr;
      nodePtr = nextNode;
   }
}

/*************************************************************************
Function to push an item in the stack

Input Parameters:  T

Return Type:  void

*************************************************************************/

template<class T>
void DynIntStack<T>::push(T num)
{
   StackNode *newNode; // Pointer to a new node

   // Allocate a new node and store num there.
   newNode = new StackNode;
   newNode->value = num;

   // If there are no nodes in the list
   // make newNode the first node.
   if (isEmpty())
   {
      top = newNode;
      newNode->next = NULL;
   }
   else  // Otherwise, insert NewNode before top.
   {
      newNode->next = top;
      top = newNode;
   }
}

/*************************************************************************
Function to pop an item in the stack

Input Parameters:  T

Return Type:  void

*************************************************************************/
template<class T>
void DynIntStack<T>::pop(T &num)
{
   StackNode *temp; // Temporary pointer

   // First make sure the stack isn't empty.
   if (isEmpty())
   {
      cout << "The stack is empty.\n";
   }
   else  // pop value off top of stack
   {
      num = top->value;
      temp = top->next;
      delete top;
      top = temp;
   }
}

/*************************************************************************
Basic class deconstructor.

Input Parameters:  None

Return Type:  void

*************************************************************************/
template<class T>
bool DynIntStack<T>::isEmpty()
{
   bool status;

   if (!top)
      status = true;
   else
      status = false;

   return status;
} 
```

**主文件**

```
#include <iostream>
#include "DynIntStack.h"
using namespace std;

int main(){

    int value = 0;
    char value2;
    //DynIntStack<int> stack;
    DynIntStack<char> stack1;

    cout << "Pushing 1\n";
    stack1.push('T');
    stack1.pop(value2);
    cout << value2;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T20:26:48.900

您需要将 .cpp 文件中的所有模板实现放在头文件中，或者放在头文件包含的文件中。并且不要试图编译实现文件。一些系统试图编译带有 .cpp 后缀的文件。编译器需要查看代码才能实例化模板。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T20:27:50.913

在 DynIntStack.h 的底部，放

```
#include <DynIntStack.cpp> 
```

发生的事情是编译器看不到模板实现代码，所以不能为它发出任何东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-06T10:05:25.843

该问题最简单的解决方案是：

Wherever you want to include your template class e.g. "DynIntStack.h" instead do "DynIntStack.cpp". e.g. in your main.cpp above.

Simple as that, no need to change anything else.

# php - 狮子上的多个版本的PHP，如何删除一个

> ID：10271800
> 
> 赞同：0
> 
> 时间：2012-04-22T20:22:50.117
> 
> 标签：php, osx-lion

我正在尝试在我的 Mac (lion) 上设置 PHP 开发环境，但我很难安装 pear 、 phpunit 和 xdebug 因为我认为我的计算机上运行了多个版本的 PHP。

当我在命令行中输入 **php -i**

我安装了 Xdebug：2.1.2
服务器 API：命令行界面
Windows：没有
Zend 服务器：没有
PHP 版本：5.3.8
Zend API nr：220090626
PHP API nr：20090626
调试构建：没有
线程安全构建：没有
配置文件路径： /etc
配置文件：/private/etc/php.ini
扩展目录：/usr/lib/php/extensions/no-debug-non-zts-20090626

但是当我在首选项中启用网络共享时，创建一个文件 **然后在我的浏览器中导航到它，例如：localhost/phpinfo.php**

 **我得到这些设置：

Xdebug 已安装：无
服务器 API：Apache 2.0 处理
程序 Windows：无
Zend 服务器：无
PHP 版本：5.4.0
Zend API 编号：220100525
PHP API 编号：20100525
调试构建：无线程
安全构建：无
配置文件路径：/usr/local /php5/lib
配置文件：/usr/local/php5/lib/php.ini
扩展目录：

如您所见，我有两个不同的配置文件……这是怎么回事？我需要能够安装 phpunit，这给我带来了很多麻烦！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:25:00.410

这很正常。PHP 保留两个 .ini 文件的副本，因为命令行操作与基于 Web 的使用有很大不同。在 CLI 模式下运行时，诸如最大执行时间、内存限制、各种特定于 Web 的配置选项等内容会被禁用/最大化。

但是，我会担心两个不同的 PHP 版本。你有 5.3.8 的命令行和 5.4.0 的基于 web 的。这意味着您有两个完全独立的 PHP 安装。cli 版本似乎是一次性的，因为它正在查找 /private，而不是用于 config/ini 信息的通常 /usr/local 目录。**

# wpf - 如何以编程方式创建/填充关于 MVVM 的视图？

> ID：10271804
> 
> 赞同：1
> 
> 时间：2012-04-22T20:23:52.740
> 
> 标签：wpf, mvvm, mvvm-light

在我的 WPF 应用程序中，我有一个由三个视图（自定义用户控件）组成的 MainView。我的视图布局已完成（在 XAML 中），但现在我必须读取配置文件并填充我的视图。当我阅读配置文件时，应该创建模型对象以及视图项。

更复杂的视图（我们称之为 View1）将包含一组按类别分隔的按钮（排列在 StackPanels+GroupBox 中）的选项卡。

由于视图的主要组件是触发模型操作的按钮，我的问题是：如何使用 MVVM 实现这一点？

ViewModel 会负责创建它的视图吗？如果不是，它将如何使用命令？

PS我正在使用MVVM Light Toolkit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:18:37.050

不，ViewModel 不负责创建其视图。通常人们使用 XAML DataTemplates 将 ViewModel 对象映射到 UserControl。这被称为“ViewModel 优先”。您也可以自己创建视图，并手动注入 ViewModel。这称为“先查看”。通常 ViewModel 首先似乎更受欢迎。

我不确定你的按钮是什么问题。您只需在 ViewModel 中公开 RelayCommands，然后在视图中将按钮绑定到它们。

# sql - 返回 GROUP BY 字段中每个值的最新记录？

> ID：10271807
> 
> 赞同：1
> 
> 时间：2012-04-22T20:24:11.380
> 
> 标签：sql, openoffice-base

我是一名医院医生，正在尝试从 OO.org Base 生成一份报告，该报告将为我提供每位患者最近的三项血液测试。

我有一个包含以下表格的数据库：“pat”（每个唯一患者的详细信息）“visit”（每次入院的详细信息，与“pat”具有一对多关系）“bld”（每组的详细信息血液结果，每个都有一个日期（bld.date）和时间（bld.time）字段，与“访问”具有一对多的关系）

我的出发点是以下 SQL 查询：

```
SELECT *
FROM "bld"
INNER JOIN "visit" ON "bld"."visit" = "visit"."id"
INNER JOIN "pat" ON "visit"."pat" = "pat"."id"; 
```

它会返回每个血液结果以及相关的患者和入院详细信息。

我对 SQL 的（初出茅庐的）知识已经有限，我真的非常感谢关于如何只返回每次录取的三个最新结果的指针。

PS 如果除了最近的三个结果之外，我还可以获得第一个结果，那将是一个巨大的奖励。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T20:31:51.100

你没有告诉你正在使用什么 sql db，但我想这会起作用

```
SELECT TOP 3 *
FROM bld
INNER JOIN visit ON bld.visit = visit.id
INNER JOIN pat ON visit.pat" = pat.id
ORDER BY bld.date desc, bld.time desc 
```

> PS 如果除了最近的三个结果之外，我还可以获得第一个结果，那将是一个巨大的奖励。

使用“SELECT TOP 1 *”而不是“SELECT TOP 3 *”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T20:33:50.097

好的，既然我了解了您要做什么，请尝试以下 PHP 代码：

```
$query1 = "SELECT id FROM pat";

$data1 = mysqli_query($dbc,$query1);
while($row = mysqli_fetch_array($data1)) {
    $query2 = "SELECT * FROM `bld` 
    INNER JOIN `visit` ON `bld`.`visit` = `visit`.`id`
    INNER JOIN `pat` ON `visit`.`pat` =  {$row['id']}
    OREDER BY `bld`.`date` DESC, `bld`.`time` DESC LIMIT 3";
    $data2 = mysqli_query($dbc,$query2);
    while($row = mysqli_fetch_array($data1)) {
        //code to be executed   
    }
} 
```

我建议您将`bld.time`and`bld.date`合并为一列并`timestamp`改用。

# ruby-on-rails - 编译错误，意外的 kENSURE，预计 Rails 3 项目中出现 $end 错误

> ID：10271809
> 
> 赞同：0
> 
> 时间：2012-04-22T20:24:15.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, compiler-errors, erb

有人可以告诉我我在这里做错了什么吗？当我尝试加载表单 (/posts/show) 时出现以下错误：

```
SyntaxError in Posts#show

Showing /Users/fkhalid2008/loand/app/views/posts/show.html.erb where line #10 raised:

compile error
/Users/fkhalid2008/loand/app/views/posts/show.html.erb:10: syntax error, unexpected kENSURE, expecting $end
Extracted source (around line #10):

7: </div>
8:   <button type="submit" class="btn span6 large">Submit</button>
9: <% end %> 
```

以下是相关代码：

**帖子/节目**

```
<%= form_remote_tag( :update => 'message', :url => {:controller => 'main', :action => 'send_message', :user_id => @post.user.id }) %> 
<br>
<br />
<br />
<div class="field">
Hello! My name is <%= f.text_field :subject %> and I'm contacting you in response to your ad. I'm interested in learning more so get in touch! Here's my contact details: <%= f.text_field :body %>.
</div>
<button type="submit" class="btn span6 large">Submit</button>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:44:40.497

您正在尝试使用`form_tag_remote`块：

```
<%= form_remote_tag ... %>
    ...
<% end %> 
```

但是您忽略了`do`启动块。你的 ERB 应该看起来更像这样：

```
<%= form_remote_tag(...) do %> 
    <!-- ----------------^^ -->
<% end %> 
```

ERB 处理器本质上是把 ERB 源从里到外转换成一个 Ruby 代码块来执行；这个额外的步骤可能会导致一些非常奇怪的错误，这些错误很难追踪。从 ERB 到 Ruby 的部分转换涉及一些异常处理，因此看起来令人困惑和奇怪

```
unexpected kENSURE, expecting $end 
```

在错误消息中。

# solr - 为什么 Solr 不索引我的文档？

> ID：10271810
> 
> 赞同：0
> 
> 时间：2012-04-22T20:24:16.967
> 
> 标签：solr

这就是我的 schema.xml 中的内容：

```
<fields>
  <field name="id" type="string" indexed="true" stored="true" required="true" />
  <field name="about" type="string" indexed="true" stored="true" />
  <field name="music" type="string" indexed="true" stored="true" />
  <field name="movies" type="string" indexed="true" stored="true" />
  <field name="occupation" type="string" indexed="true" stored="true" />  
  <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
</fields>

<uniqueKey>id</uniqueKey> 
```

这是我发布的文档：

```
<add>
    <doc>
        <field name="id">abc123</field>     
        <field name="about">I am somebody</field>
        <field name="music">pop</field>
        <field name="movies">titanic</field>
        <field name="occupation">web dev</field>
    </doc>
</add> 
```

文档被推送到 Solr 就好了，当我使用 Solr Admin 搜索时，`*:*`它显示我的文档如下：

```
<?xml version="1.0" ?>
<response>
  <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">1</int>
    <lst name="params">
      <str name="indent">on</str>
      <str name="start">0</str>
      <str name="q">*:*</str>
      <str name="version">2.2</str>
      <str name="rows">10</str>
    </lst>
  </lst>
  <result name="response" numFound="1" start="0">
    <doc>
      <str name="about">I am somebody</str>
      <str name="id">abc123</str>
      <str name="movies">titanic</str>
      <str name="music">pop</str>
      <str name="occupation">web dev</str>
    </doc>
  </result>
</response> 
```

但是，当我使用文档中明确包含的关键字（例如“titanic”或“web”）进行搜索时，没有结果显示：

```
<?xml version="1.0" ?>
<response>
  <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">1</int>
    <lst name="params">
      <str name="indent">on</str>
      <str name="start">0</str>
      <str name="q">titanic</str>
      <str name="version">2.2</str>
      <str name="rows">10</str>
    </lst>
  </lst>
  <result name="response" numFound="0" start="0"/>
</response> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:59:00.270

看起来您需要指定字段名称（q=movies:titanic）或在 schema.xml 中设置默认字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:59:45.187

如果您指定字段名称，我怀疑您的搜索将起作用。如果您希望能够在不指定字段名称的情况下进行搜索，则需要`<defaultSearchField>`在 schema.xml 中指定。

# sql - 只需在一列中显示具有 3 个或更多相等数据的行

> ID：10271811
> 
> 赞同：-3
> 
> 时间：2012-04-22T20:24:19.837
> 
> 标签：sql

如何在一列中显示具有 3 个或更多相等数据的行，例如：

```
1
1
1
2
2
3
3
3 
```

这样我的选择就显示

```
1
3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:26:54.950

```
SELECT YourColumn
FROM YourTable
GROUP BY YourColumn
HAVING COUNT(*) >= 3; 
```

# c# - 知道如何改进我的 if else 语句以使其工作吗？

> ID：10271817
> 
> 赞同：0
> 
> 时间：2012-04-22T20:25:10.333
> 
> 标签：c#, razor, if-statement, webmatrix

嗨，我正在尝试做一个 if else 语句：

```
@{
if(isset(Request["approve"])) { 
        var sql6 = "UPDATE Medical SET NurseDecision = 1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appMedical = new[]{myCDSID, medicalData.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql6,appMedical);

        var sql7 = "UPDATE PermitApp SET NurseDecision = 1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appPermitApp =new[]{myCDSID, reqPermit.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql7,appPermitApp);

    } elseif(isset(Request["reject"])){

        var sql8 = "UPDATE Medical SET NurseDecision = -1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appMedical1 = new[]{myCDSID, medicalData.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql8,appMedical1);

        var sql9 = "UPDATE PermitApp SET NurseDecision = -1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appPermitApp1 =new[]{myCDSID, reqPermit.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql9,appPermitApp1);
        }
} 
```

以这样的一种形式提交 2 个提交按钮：

```
<form>
<input class="button" type="submit" style="margin:10px auto;" name="reject" value="Reject" />
<input class="button" type="submit" style="margin:10px auto; margin-left:400px;" name="approve" value="Approve" />
</form> 
```

然而这是一个错误：

```
CS1026: ; expected on this line>> } elseif(isset(Request["reject"])){ 
```

谁能指出我的错误？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:08:58.570

`elseif`不是关键字，并且`isset`在 c# 中不可用这里的一些代码应该可以帮助您。

```
@{
    if(!string.IsNullOrEmpty(Request["approve"])) { 
        var sql6 = "UPDATE Medical SET NurseDecision = 1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appMedical = new[]{myCDSID, medicalData.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql6,appMedical);

        var sql7 = "UPDATE PermitApp SET NurseDecision = 1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appPermitApp =new[]{myCDSID, reqPermit.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql7,appPermitApp);

    } else if(!string.IsNullOrEmpty(Request["reject"])){

        var sql8 = "UPDATE Medical SET NurseDecision = -1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appMedical1 = new[]{myCDSID, medicalData.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql8,appMedical1);

        var sql9 = "UPDATE PermitApp SET NurseDecision = -1, NurseCDSID = @0, NurseDate = GetDate() WHERE MedId = @1 AND AppId = @2 AND CDSID = @3";
        var appPermitApp1 =new[]{myCDSID, reqPermit.MedId, permitAppAppId, employeeCDSID};
        db.Execute(sql9,appPermitApp1); 
    }
} 
```

# c# - 带有 WPF 数据上下文的 LINQ to SQL

> ID：10271819
> 
> 赞同：1
> 
> 时间：2012-04-22T20:25:35.683
> 
> 标签：c#, wpf, datacontext

我正在尝试学习 WPF 并试图找出将我的**LINQ to SQL**类绑定到**WPF 窗口**的最佳方法。

到目前为止，我有这个：

```
using (Database.DataClasses1DataContext db = new Database.DataClasses1DataContext())
{
    var user = db.Users.Where(u => u.Email == TextboxEmail.Text).FirstOrDefault();
    CustomerTab.DataContext = user;
} 
```

在**XAML中**

```
<TextBox Name="TextboxContactName" Grid.Row="1" Margin="0,2" Grid.Column="1" Text="{Binding Path=ContactName, UpdateSourceTrigger=LostFocus, Mode=TwoWay}"></TextBox> 
```

因此，这提供了一种将名称显示到文本框的单向绑定。

我一直在尝试在线跟踪示例，但我的问题是，当文本框失去焦点时，如何使其自动更新 LINQ。

我需要在失去焦点事件中手动输入它吗？

*编辑* 我试图在文本框失去焦点时运行它：

```
 using (Database.DataClasses1DataContext db = new Database.DataClasses1DataContext())
    {
        Database.User customer = (Database.User)CustomerTab.DataContext;

        db.SubmitChanges();
    } 
```

但客户对象没有更新。我知道我可以这样做：

```
customer.ContactName = textbox.Text;
db.submitChanges(); 
```

但我认为 WPF 应该为我处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:04:27.753

you should at least add a layer of abstraction between the UI and the Data layer. In order to get the data persisted you need to save the context, not just to update the property in the user object. it's not a best practice anyway, and try to think about the fact that everytime the textbox lost focus there is a trip to the database. anyway adding an abstraction layer, and saving the context in the setter of the property should work for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:00:26.043

我对绑定没有什么经验，但是在你的 XAML 中试试这个：

```
<TextBox Name="TextboxContactName" Grid.Row="1" Margin="0,2" Grid.Column="1" Text="{Binding Path=ContactName, UpdateSourceTrigger=LostFocus}"></TextBox> 
```

**编辑1：**

[Fine print](http://goo.gl/1dN8c) - “UpdateSourceTrigger 属性指定何时使用更改更新源。这仅适用于 Mode=TwoWay 绑定（这是默认设置）。”

**编辑2：**

如果这不起作用，您可能需要显式调用`SubmitChanges()`.`DataContext`

# delphi - 如何格式化 DBGrid 列以显示两个小数位？

> ID：10271822
> 
> 赞同：8
> 
> 时间：2012-04-22T20:26:01.410
> 
> 标签：delphi, formatting, lazarus, dbgrid, elevatedb

我想格式化特定的单元格以强制保留两位小数。数据来自 ElevateDB 存储过程并连接到 TDataSource。

**编辑：SQL 编程注意：**

我不确定这是否只是 ElevateDB 问题。在了解**Fields Editor**之前，我尝试通过在存储过程中使用 CAST (NumericField as varchar(10)) 语句在 SQL 级别格式化数据。通过这样做，它不会在该特定字段的字段编辑器中 公开**DisplayFormat属性。**

当我从存储过程中删除 CAST() 语句时，**DisplayFormat**属性出现在**Fields Editor**中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T20:35:10.233

您可以通过格式化基础字段来格式化 DBGrid 列。如果未完成，请在数据集中创建静态字段，然后将相关字段的 DisplayFormat 属性设置为，`0.00`然后您就完成了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-22T20:55:37.620

我使用与 Uwe 回答的方法相同的方法，在打开数据集后的代码中只需添加这行代码来格式化 certian 列：

```
 TFloatField(MyDs.FieldByName('Cost')).DisplayFormat := '0.00'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T10:37:32.157

`DrawDataCell`您可以使用事件格式化字段。

```
procedure TFormMain.DBGridCompareDrawDataCell(Sender: TObject;
  const Rect: TRect; Field: TField; State: TGridDrawState);
begin
  if Field.Name = 'FIELDNAME' then
    TFloatField(Field).DisplayFormat := '#,##0.00';
end; 
```

# orbeon - Orbeon：让所有输入字段显示

> ID：10271823
> 
> 赞同：1
> 
> 时间：2012-04-22T20:26:47.743
> 
> 标签：orbeon, xforms

我正在尝试使用 Orbeon 3.9 CE 为 XML 文档创建编辑器。我遇到了一个问题，如果现有的输入 XML 文档没有，我为各种属性创建的 xforms 字段不会显示在 Web 表单中。我搜索了 Stack Overflow 和 Orbeon 文档和 wiki，但无法找到解决此问题的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T22:55:44.793

这是根据规范实现的：如果`ref`解析为空序列（或 XForms 1.1 规范使用的 XPath 1.0 用语中的“空节点集”），[则认为该控件是不相关的](http://www.w3.org/TR/xforms11/#ui-processing)。如果缺少节点，则没有自动创建节点的规定。所以这将需要完成：

1.  在 XForms 之外，处于 XML 预处理阶段以添加缺失的元素或属性。
2.  在 XForms 中，加载实例后，通过在实例中插入适当的[节点。](http://www.w3.org/TR/xforms11/#action-insert)

除非您只需要添加几个节点，否则第一个选项很可能更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:42:25.953

@avernet 的回答是正确的。

[有人在这个线程](http://orbeon-forms-ops-users.24843.n4.nabble.com/Missing-mandatory-field-elements-td4469324.html)上问了类似的问题。

我提出的建议是创建一个 XBL 组件来自动处理这个问题。我提出了[这样一个组件的第一个版本，](https://gist.github.com/2156397)与其说是最终的可用解决方案，不如说是一个建议。但这可能会对你有所帮助。

# objective-c - 方法声明的不完整实现和缺少上下文

> ID：10271825
> 
> 赞同：-2
> 
> 时间：2012-04-22T20:26:50.833
> 
> 标签：objective-c, cocoa-touch

我是开发新手，我正在根据在线教程和斯坦福大学在 iTunesU 上的讲座自学（我只有 15 岁）。我试图在我的应用程序中实施的电子邮件表单有两个问题。我截图了，这里是它的链接： http: [//tinypic.com/r/2utq05c/5](http://tinypic.com/r/2utq05c/5)

我已经尝试了一切，但似乎无法让它工作。任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:18:56.500

看到那条`@end`线了吗？这结束了类的实现。您只能在类实现中实现方法，即`@implementation`在行与其对应的`@end`.

这不是该文件中唯一的语法错误。你还没有写完你的`email`方法，所以你在它之后拥有的方法在技术上就在其中。方法不能进入方法内部，所以这是另一个错误。解决该问题的方法是简单地完成该`email`方法。

# vb.net - 更改树视图中的级别节点位置

> ID：10271826
> 
> 赞同：0
> 
> 时间：2012-04-22T20:26:51.333
> 
> 标签：vb.net, treeview, move, nodes, levels

几天来，我一直在处理**VB.net**上的 TreeViews 问题。我有一个应用程序，它有一个树视图，其层次结构如下：

```
节点 1
     |--- 节点 2
          |--- 节点 3
               |--- 节点 4

```

这意味着每个节点只有一个孩子，整个树视图只有一个根。我想要完成的是，通过使用“上移”和“下移”按钮来切换这些节点的位置。假设我想将“节点 2”向上移动，它将占据“节点 1”的位置，而“节点 1”将转到“节点 2”的位置。

我尝试了一些东西，但永远无法让它工作，所以我所做的只是更改这些节点的属性（文本、工具提示文本……）。我希望能够通过实际移动节点来做到这一点，不仅使它看起来“正确”，而且还可以了解有关此控件的更多信息，因为对我来说，处理它有点令人困惑（我是 .Net 开发的新手）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:32:35.010

要将节点 2 作为节点 1 的父节点：

```
TreeView1.Nodes("Node1").Parent = TreeView1.Nodes("Node2") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:15:46.777

写了一些代码给你一个方向（**未经测试**）：

```
Enum Directions
    Up
    Down
End Enum

Public Sub MoveNode(ByVal nodeToBeMoved As Windows.Forms.TreeNode, ByVal direction As Directions)
    Dim parent As TreeNode = nodeToBeMoved.Parent
    If parent Is Nothing AndAlso
        direction = Directions.Up Then
        MsgBox("Node cannot be moved up!")
        Exit Sub
    End If

    Dim child As TreeNode = nodeToBeMoved.FirstNode
    If child Is Nothing AndAlso
        direction = Directions.Down Then
        MsgBox("Node cannot be moved down!")
        Exit Sub
    End If

    Dim childFirstNode As TreeNode = child.FirstNode

    nodeToBeMoved.Nodes.Clear()
    If direction = Directions.Up Then
        parent.Nodes.Clear()
        nodeToBeMoved.Nodes.Add(parent)
        parent.Nodes.Add(child)
    Else
        child.Nodes.Clear()
        child.Nodes.Add(nodeToBeMoved)
        nodeToBeMoved.Nodes.Add(childFirstNode)
    End If
End Sub 
```

# c# - 使用我的 ASP.net 菜单控件创建悬停效果

> ID：10271827
> 
> 赞同：0
> 
> 时间：2012-04-22T20:26:53.060
> 
> 标签：c#, asp.net, menu, hover

**我的问题：如何为我的 ASP.net 菜单创建悬停效果。** 问题是，由于标准的 ASP.net 菜单没有悬停功能，因此很难/不可能（？）创建。

做完功课后，我看到一些人用 css、jquery 和其他方法进行了尝试……但**我更喜欢**没有非常复杂的解决方案的“普通”html 或 css。如果这真的不可能，有没有明确的方法如何使用它？

大多数 css 选项都失败了，或者非常复杂。

究竟应该发生什么：例如一个菜单项

```
<asp:MenuItem NavigateUrl="~/Pages/Test.aspx" Text="Test" Value="Test" Selectable="true"></asp:MenuItem> 
```

由于悬停效果，应该得到不同的背景。

也许将 C# 代码中的 CSS 更改为其他内容？

*感谢您的回答！*

**~已解决~** 非常感谢您的帮助！由于这两个答案，问题得到了解决。当我注意到在此菜单中悬停效果也不起作用时，我尝试执行该菜单。出了什么问题？我使用 2 个 css 文件。而且因为第一个 css 文件包含一些关于如何处理 a:hover 的指令，所以所有其他的悬停效果都被忽略了。

现在我知道为什么悬停效果不起作用了，我可以解决这个问题。非常感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:17:41.747

好吧，伙计们，我花了很长时间才弄清楚如何使用 ASP.net 菜单创建**悬停效果。**所以，我找到了一种简单的方法，不需要所有困难的东西或大量的代码。

如果您在浏览器中查看您的 asp 页面，请转到**页面源代码**。当您查看菜单时，您会注意到它看起来像这样：

```
<li>
    <a class="level1" href="Home.aspx">
    <img src="../Images/home.png" alt="" title="" class="icon" />Home</a></li>
<li>
    <a class="level1" href="Page2.aspx">
    <img src="../Images/homehover.png" alt="" title="" class="icon" />Page2</a><ul class="level2"> 
```

**解决方案是更改您的CSS：**

```
a:hover[href*="Home"][class*="level1"]
{
     color: black;
} 
```

这段 CSS 选择 A 元素，其中（在 HTML 中）属性 href 和 class 包含（或等于）Home 和 level1。

如果你有一个比我更复杂的菜单可能会有点不同，因为我只有 2 层深。（菜单和子菜单）希望对你们有帮助！

然后这是我关于stackoverflow的第一个问题/答案的结尾。谢谢你的帮助！

ps：如果不起作用，请将所有相关css文件中的所有a：hover语句删除到带有菜单的页面。如果您使用 StaticHoverStyle/DynamicHoverStyle，也可能会出现问题。

# php - 将外部 div 或 ul 加载到自己的网页中 - 来自 google/yahoo/facebook

> ID：10271836
> 
> 赞同：-1
> 
> 时间：2012-04-22T20:27:53.657
> 
> 标签：php, jquery, include

嘿

如果您知道来自 div 或 ul 的页面和 id，是否可以从另一个/外部页面（例如 google facebook yahoo ...）获取来自 div 或 ul 的内容？

如果您使用 php - include，您将使用 jquery .load() 包含整个页面...（太多），我想这是可能的。只有我认为它很慢，它只适用于来自同一域名的网页（不是雅虎。bbc ....）

有人能帮我吗？或者有更多经验的人？
亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:53:05.350

创建一个名为`x-request.php`站点根目录的 php 文件，并将以下 PHP 代码放入其中。

```
<?php
    echo file_get_contents('http://' . $_GET['url']);
?> 
```

在要显示内容的文件中添加以下 JavaScript：

```
$(function(){

    $('#selector').load('/x-request.php?url=google.com #container');

}); 
```

`#selector`将,替换`#container`为相关的 ID 和`google.com`相关的地址。

php 文件将获取整个页面。对 php 页面的 jQuery 请求只会获得指定的 id（`#container`在我的示例中）。

有关详细信息，请参阅：查看[http://api.jquery.com/load/](http://api.jquery.com/load/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:49:47.080

也许这不是您想要的，但有一种方法可以发出跨域 GET 请求。[http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

您可能必须进行解析，我不确定。昨晚我在玩它，我能够在我的本地页面中加载 google.com 页面哈哈。

但是，我认为最好去 google、yahoo、facebook 等的 API 文档为您获得更好的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:31:39.263

您不能请求网页的特定部分。HTTP 协议不允许这样做 - 最多您可以请求特定范围的字节，但是您需要确切知道所需的 div 在哪里，以及它有多大。

您必须获取整个页面，使用 dom 操作来提取相关部分，然后插入。这不能通过 Javascript 工作，因为您不能轻松地在 JS 中执行 3rd 方请求。这必须是服务器端操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T20:32:10.707

[您可以使用 PHP 中的DOMDocument 类](http://php.net/manual/en/class.domdocument.php)加载和操作任何 HTML 内容，这应该非常快......

# macos - MAC终端下意外删除的文件如何恢复？

> ID：10271838
> 
> 赞同：-1
> 
> 时间：2012-04-22T20:28:01.280
> 
> 标签：macos, osx-lion

我在 MAC Lion 终端下执行了“rm -R *”，显然删除的文件并没有进入垃圾箱。不确定是否有一种简单的方法可以恢复它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:30:21.927

尝试使用 testdisk/photorec 来恢复文件。它是免费和开源的，并且运行良好。如果你安装了自制软件，它就像

`brew install testdisk`

编辑：刚刚意识到，这是题外话。

# ruby-on-rails - Rails 3 rake 错误您已经激活了 rake 0.9.2.2，但您的 Gemfile 需要 rake 0.9.2

> ID：10271840
> 
> 赞同：1
> 
> 时间：2012-04-22T20:28:12.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我在控制台中运行 rake db:migrate 时：

```
rake aborted!
You have already activated rake 0.9.2.2, but your Gemfile requires rake 0.9.2\. C
onsider using bundle exec.

(See full trace by running task with --trace)

C:\Rails\myapp>bundle install
Using rake (0.9.2)
Using abstract (1.0.0)
Using activesupport (3.0.9)
Using builder (2.1.2)
Using i18n (0.5.0)
Using activemodel (3.0.9)
Using erubis (2.6.6)
Using rack (1.2.4)
Using rack-mount (0.6.14)
Using rack-test (0.5.7)
Using tzinfo (0.3.30)
Using actionpack (3.0.9)
Using mime-types (1.16)
Using polyglot (0.3.2)
Using treetop (1.4.10)
Using mail (2.2.19)
Using actionmailer (3.0.9)
Using arel (2.0.10)
Using activerecord (3.0.9)
Using activeresource (3.0.9)
Using addressable (2.2.6)
Using bundler (1.0.18)
Using multipart-post (1.1.4)
Using faraday (0.7.6)
Using friendly_id (4.0.0)
Using hashie (1.2.0)
Using json (1.6.1)
Using multi_json (1.0.4)
Using mysql (2.8.1)
Using oauth2 (0.5.2)
Using omniauth (1.0.2)
Using omniauth-oauth2 (1.0.0)
Using omniauth-facebook (1.2.0)
Using rdoc (3.10)
Using thor (0.14.6)
Using railties (3.0.9)
Using rails (3.0.9)
Using rest-client (1.6.7)
Using sequel (3.20.0)
Using simple_form (1.5.2)
Using sinatra (1.0)
Using sqlite3 (1.3.4)
Using sqlite3-ruby (1.3.3)
Using taps (0.3.23)
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem
is installed.

rake aborted!
You have already activated rake 0.9.2.2, but your Gemfile requires rake 0.9.2\. C
onsider using bundle exec.

(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T20:52:21.133

这可能是因为您的系统上有更新的 Rake 版本。您可以按照错误所述执行操作：`bundle exec rake db:migrate`在您的应用程序上下文中运行 rake（rake 0.9.2），或者只是删除您的 Gemfile.lock 并再次捆绑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:24:21.153

我也遇到了同样的情况，`bundle exec`当然在终端中工作，但 RubyMine 不听。事实证明，`global`gemset 使用了`rake`比我的“本地”gem set 更新的版本，我最终`rake`从`global`gemset 中卸载以使 RubyMine 再次高兴（在重新启动之后）。

# ruby-on-rails - Rails 3 - 当我尝试渲染“新”方法时，NilClass:Class 的未定义方法“model_name”

> ID：10271841
> 
> 赞同：3
> 
> 时间：2012-04-22T20:28:16.897
> 
> 标签：ruby-on-rails, ruby

我想在用户创建**订单**时保留表单中的值（因此，如果用户在字段中有错误，那么用户将获得带有他/她已经打印的参数的页面）。所以我接下来做

**控制器**

```
class OrdersController < ApplicationController
  ...

  def new
    @everpresent_field_placeholder = "Fill that"
    @order = Order.new
  end

  def create
    order = Order.new( params[:order] )

    if order.save
      flash[:success] = "Yay! Order created!"
    else
      render 'new'
      flash[:error] = order.errors.full_messages.to_sentence :last_word_connector => ", ",        
                                                             :two_words_connector => ", "
    end
  end
end 
```

**查看新订单**：

```
<legend>Order's creating</legend>

<%= form_for @order, :html => {:class => "form-horizontal"} do |f| %>
  <%= field_set_tag do %>    
    <div class="control-group">
      <%= f.label :number_of_order, "Number of order", :class => "control-label" %>

      <div class="controls">
        <%= f.text_field :number_of_order, 
                         :class => "span2",                         
                         :placeholder => @everpresent_field_placeholder %>
      </div>
    </div>

    <%= f.submit "Create", :class => "btn btn-large btn-success" %>
  <% end %>
<% end %> 
```

但是，当我在订单号中输入错误并单击“创建”时，我会收到这样的错误：

```
NoMethodError in Orders#create

Showing .../app/views/orders/new.html.erb where line #3 raised:

undefined method `model_name' for NilClass:Class

Extracted source (around line #3):

1: <legend>Order's creating</legend>
2: 
3: <%= form_for @order, :html => {:class => "form-horizontal"} do |f| %>
4:   <%= field_set_tag do %>    
5:     <div class="control-group">
6:       <%= f.label :number_of_order, "Number of order", :class => "control-label" %> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:35:04.143

调用`render 'new'`不会调用该控制器方法——它只会呈现与该操作关联的模板。也就是说，您的`create`操作永远不会设置`@order`- 也许如果您在操作中`order`替换对的引用，那将解决问题。`@order``create`

# django - 如何在 Django 中连接多个模块？

> ID：10271842
> 
> 赞同：0
> 
> 时间：2012-04-22T20:28:21.517
> 
> 标签：django, django-1.4

我有 3 个模型。

```
class Picture(models.Model)
  name = models.CharField(max_length=255)
  image_field = models.ImageField(upload_to="foo/")
  slug = models.SlugField()
  [...]

class Size(models.Model):
  name = models.CharField(max_length=255)
  width = models.IntegerField()
  height = models.IntegerField()
  crop = models.BooleanField(default=True)
  upscale = models.BooleanField(default=False)

  def __unicode__(self):
    return self.name

class Cache(models.Model):
  size = models.ForeignKey('Size')
  picture = models.ForeignKey('Picture')
  image_field = models.ImageField(upload_to="picture/resize/") 
```

我想按如下方式使用它们：首先生成图片对象。然后创建 Size 对象。对于每个大小和图片，都应该在需要时生成一个缓存对象。

我的问题是我不知道把代码放在哪里。它应该类似于（伪代码）：

```
def get_cached_picture(Picture,Size):
  try:
    cacheObj = Cache.objects.get(picture=Picture, size=Size):
    [.. use cacheObj  ..]
  except Cache.DoesNotExist:
    [.. resize Picture according to Size, insert into cache, use it ..] 
```

那么我在哪里可以插入此代码？我知道我可以在视图中做到这一点，但有没有办法将它嵌入到模型中？缓存永远不应该在管理员中填充，而是应该在需要缓存和图片之间的某种组合时生成。

这可能很容易做到，但我缺少谷歌的正确关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:40:16.347

**假设：**

1.  您希望能够动态加载特定大小的图像“表示”。
2.  尺寸模型将存储表示可以具有的一组预定义尺寸。

* * *

*我将把你的缓存模型称为**表示**，因为我认为在这里的上下文中更有意义。*

这个过程的切入点显然是一个视图。收到一个请求，您确定需要搜索“Image1.jpg”@800x600。最简单的方法是将您的查询直接放入视图中。但是为了可重用性，最好执行以下任何操作：

*   一个实用函数，然后从视图中调用它来检索一个表示对象
*   Representation 模型的类方法，因为您已经将 Picture 和 Size 作为外键引用。
*   在 Representation 模型上使用[自定义管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)来执行与上述类似的操作

如果其他人有自己的视图并且需要直接检索 Rep 实例，则任何这些都将使其可作为应用程序重用。

虽然您的伪代码指的是这个过程在图片模式下，但我认为它可能应该在表示模型上，因为它包含两个外键，您可以轻松查看是否有适当的代表。如果没有，请创建它。

视图应该只需要调用一些简单的东西，而不是拥有所有的逻辑：

```
# as classmethod
rep = Representation.get_cached_picture(picture, size)
# or with a manager
rep = Representation.objects.get_cached_picture(picture, size) 
```

# android - 将叠加应用于缩放位图 - 缩放叠加问题

> ID：10271844
> 
> 赞同：0
> 
> 时间：2012-04-22T20:28:39.773
> 
> 标签：android, matrix, overlay, scale

我正在从 SD 卡加载一个带有 jpg 的图像视图，并对其进行缩放，以便在不剪裁的情况下最大限度地放大它。然后我想用一个圆圈覆盖位图，以触摸事件的坐标为中心。

我从 imageview 保存当前位图，创建一个新的覆盖位图，添加一个画布，绘制原始位图，绘制圆，将缩放代码重新应用到新的覆盖位图，然后使用新的覆盖位图重新加载图像视图。第一次触摸图片画圆，圆画得很准确，但是图片缩放不正确。在第二次触摸时，图像缩放得到纠正，但圆圈画在“错误”的位置——它画在我在屏幕上触摸的位置，但现在图像缩放正确，所以目标已经移动。在第三次和所有随后的接触中，一切都按照我从一开始就希望的那样进行。

这是我的代码：

```
private static Matrix curMatrix = new Matrix();

public boolean onTouch(View v, MotionEvent event) {
    int eventType = event.getAction() & MotionEvent.ACTION_MASK;
    switch (eventType) {
        case MotionEvent.ACTION_UP:
            ImageView i = (ImageView) v;        

            //Save the current bitmap
            i.buildDrawingCache();
            Bitmap bm = i.getDrawingCache();

            //Create new overlay bitmap
            Bitmap bmOverlay = Bitmap.createBitmap(i.getWidth(), i.getHeight(), Bitmap.Config.ARGB_8888);

            //Create new drawing canvas and paint
            Canvas c = new Canvas(bmOverlay);
            Paint p = new Paint();
            p.setColor(Color.RED);
            p.setAlpha(50);

            //Draw the saved bitmap onto the canvas
            c.drawBitmap(bm, new Matrix(), null);

            //Draw a circle on the current canvas, centered on event coordinates
            c.drawCircle(event.getX(), event.getY(), 100F, p);

            //Autosize canvas to previous imageview settings
            RectF drawableRect = new RectF(0, 0, (float) c.getWidth(), (float) c.getHeight());
            RectF viewRect = new RectF(0, 0, (float) i.getWidth(), (float) i.getHeight());
            curMatrix.setRectToRect(drawableRect, viewRect, Matrix.ScaleToFit.CENTER);

            //Apply the autosize transformation
            i.setImageMatrix(curMatrix);        

            //Reload the imageview with the new bitmap
            i.setImageBitmap(bmOverlay);
            }
            return true;
    } 
```

这里有一些图片可以更好地解释正在发生的事情：

开始 - 我要点击鱼：
![开始](../Images/f658250e46a2feace504c7b2d4ec3e37.png)

第一次点击——点击准确，缩放丢失：
![首次点击](../Images/72a588e494c8d6689e639d46d90c0600.png)

第二次单击 - 缩放重新出现，但单击应用于原始缩放，因此它关闭：
![第二次点击](../Images/fd2d010445a6f52b7dca7bdfbbea1962.png)

第三次和所有后续点击 - 就像我从一开始就希望的那样工作：
![第三次点击](../Images/4dc9874a2ab6fa7eb906cddd3e420d22.png)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:23:16.347

像往常一样，我把事情复杂化了。对于那些感兴趣的人，以下更简单的代码可以工作。只需将其设置为 ImageView 的 TouchListener，当您触摸图像时，它将绘制一个以您的触摸点为中心的半径为 100（像素？）的半透明红色圆圈：

```
public class GetCoordinatesTouchListener implements OnTouchListener {
    public boolean onTouch(View v, MotionEvent event) {
        int eventType = event.getAction() & MotionEvent.ACTION_MASK;
        switch (eventType) {
            case MotionEvent.ACTION_UP:
                ImageView i = (ImageView) v;
                //Save the current bitmap from the imageview
                i.buildDrawingCache();
                Bitmap bm = i.getDrawingCache();
                //Create new overlay bitmap
                Bitmap bmOverlay = Bitmap.createBitmap(i.getWidth(), i.getHeight(), Bitmap.Config.ARGB_8888);
                //Create new drawing canvas and paint
                Canvas c = new Canvas(bmOverlay);
                Paint p = new Paint();
                p.setColor(Color.RED);
                p.setAlpha(50);
                //Draw the saved bitmap onto the canvas
                c.drawBitmap(bm, new Matrix(), null);
                //Draw a circle on the current canvas, centered on event coordinates
                c.drawCircle(event.getX(), event.getY(), 100F, p);
                //Reload the imageview with the new bitmap with FIT_XY scaling
                i.setScaleType(ImageView.ScaleType.FIT_XY);
                i.setImageBitmap(bmOverlay);
            }
        return true;
    }
} 
```

# c++ - C++ STL 向量迭代器不兼容

> ID：10271850
> 
> 赞同：1
> 
> 时间：2012-04-22T20:29:23.520
> 
> 标签：c++, stl, vector

```
// Erase the missing items
vector<AlignedFDRData>::size_type StandardNum = FDRFreq.at(0).fData.size();
vector<AlignedFDRData>::iterator iter = FDRFreq.begin(); 
while (iter != FDRFreq.end()){
    if( iter->fData.size() < StandardNum){
        FDRFreq.erase(iter);
    }
    else{
        ++iter;
    }
} 
```

这部分用于擦除FDRFreq向量项，其中数据长度小于标准数，但调试断言失败：向量迭代器不兼容。我是 C++ STL 的新手，感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T20:34:22.173

您的问题是调用`std::erase`. 警告由标准库实现中的迭代器调试扩展触发。`erase`在擦除元素之后将迭代器返回到新的有效位置，然后从那里继续迭代。然而，这仍然是非常低效的。

使用[Erase-Remove Idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom)从`vector`.

```
FDRFreq.erase(std::remove_if(
                begin(FDRFreq), end(FDRFreq), 
                [&StandardNum](const AlignedFDRData& x) { 
                  return fData.size() > StandardNum; }),
              end(FDRFreq)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T20:31:25.687

您的代码需要成为

```
while (iter != FDRFreq.end()){
    if( iter->fData.size() < StandardNum){
        iter = FDRFreq.erase(iter);
    }
    else{
        ++iter;
    }
} 
```

“向量迭代器不兼容”意味着您正在使用的迭代器已失效 - 也就是说，不能保证它指向的元素仍然存在于该内存位置。向量元素的擦除使该位置之后的迭代器无效。`.erase`返回一个新的、有效的迭代器，您可以使用它来代替。

如果您是 STL 新手，我强烈建议您阅读 Scott Myer 的*Effective STL*（和*Effective C++*，当您在使用它时）

# java - 数组和引用传递

> ID：10271864
> 
> 赞同：-2
> 
> 时间：2012-04-22T20:31:02.003
> 
> 标签：java, pass-by-reference

在下面的代码中，为什么在method2中改变了原始数组，arr2[0]仍然等于1.5？忽略其他数组和变量。

```
public class Problem3
{
    public static int method1(int[] array)
    {
        array[0] += 10;
        return array[0];
    }

    public static int method2(int aNum, String aStr,
        int[] array1, float[] array2, int[] array3)
    {
        float[] fNums = {1.5F, 2.5F};
        array2 = fNums;

        return 10 + method1(array3);
    }

    public static void main(String[] args)
    {
        int num = 1000;
        String aStr = "Hello!";
        int[] arr1 = {1, 2, 3};
        float[] arr2 = {0.5F, 1.5F};
        int[] arr3 = {5, 6, 7};
        int retNum = method2(num, aStr, arr1, arr2, arr3);

        System.out.println(arr2[0]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:35:11.307

因为你改变了对整个数组的引用，并没有修改传入的数组。

当您调用 method2 时，参数指向在外部创建的数组。在 method2 中，您使参数指向一个新数组。这不会改变调用方法中的变量指向的数组，它仍然指向原始数组。

如果您只是修改了在方法 2 中给出的现有数组，那么您会在调用方法中看到这些更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T20:42:07.943

基本上，因为`array2`is not `arr2`，但它们在调用时引用内存中的相同数组`method2`：

```
method2(num, aStr, arr1, arr2, arr3); 
```

```
public static int method2(int aNum, String aStr, int[] array1, float[] array2, int[] array3) 
```

然后，您`array2`引用了一个新数组`fNums`，并且您没有更改引用的数组`arr2`：

```
float[] fNums = {1.5F, 2.5F};
array2 = fNums; 
```

有关更多详细信息，请参阅此[答案](https://stackoverflow.com/a/9404727/597657)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T20:41:37.843

我相信Java使用按值传递参数传递语义。通过`float[] arr2`在 PSVM() 中声明，它的范围仅限于此，如果将数组传递给另一个函数，它会按值传递。

另一方面，如果您在PSVM()`float[] arr2` *之外*声明（但在类定义内），那么它的范围将在类内是全局的。但是，我仍然认为您的代码不会起作用，因为 IIRC，您不能像您的代码在`method2()`.

# html - 创建 CSS 功能区 - 可以在页眉中创建在页脚中复制不起作用

> ID：10271880
> 
> 赞同：0
> 
> 时间：2012-04-22T20:34:00.667
> 
> 标签：html, css

这是代码[http://jsfiddle.net/4XSjz/](http://jsfiddle.net/4XSjz/)

我基本上从`h1`我创建的标题中复制了相同的信息，当它为`h4`标签和页脚更改时，它没有。是不是因为我的元素太多了？我也希望它粘在底部，我已经做到了，我可以看到丝带的边缘，而不是中间部分。

谢谢

PS：我刚刚意识到我没有背景颜色 - 好的，那很好，那么我想让丝带没有被切掉的部分并且向上而不是向下重叠？

**详细说明：**好的，所以我在上面的代码中有功能区，给定颜色的背景颜色将为该功能区创建适当的背景颜色，从而创建 css 功能区。

我想做的是保留丝带，但基本上去掉三角形的切口。然后我想在其最暗的颜色重叠并将其放在矩形上方。

像这样的东西：

```
 /_/________________\_\
/-----------------------\ 
```

我希望能有所澄清

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T21:19:41.040

也许尝试用 .footer 替换 CSS 中的 h4 - 它指的是类，而不是对象。

# ruby - OAuth2::Error ，使用 Oauth-facebook 登录问题

> ID：10271881
> 
> 赞同：3
> 
> 时间：2012-04-22T20:34:01.617
> 
> 标签：ruby, ruby-on-rails-3, omniauth

**这是我点击注册并使用 Facebook 授权应用程序后遇到的错误。**

```
: {"error":{"message":"Error validating application. Invalid application     ID.","type":"OAuthException","code":101}} 
```

我不知道如何解决这个问题以及错误来自哪里。这是我的omniauth.rb

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :developer unless Rails.env.production?
  provider :facebook, ['I_PUT_MY_API_ID_KEY'], ['I_PUT_MY_API_SECRET_KEY'],
  :scope => 'email, user_relationships, user_status,user_about_me publish_actions',    :display => 'popup'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:31:32.350

`provider :facebook, ['I_PUT_MY_API_ID_KEY'], ['I_PUT_MY_API_SECRET_KEY']` 我的 习惯`provider :facebook, "I_PUT_MY_API_ID_KEY", "I_PUT_MY_API_SECRET_KEY"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:35:21.813

当我取下“[”和“]”时，它没有括号

# iphone - UITouch 触摸移动的手指方向和速度

> ID：10271883
> 
> 赞同：13
> 
> 时间：2012-04-22T20:34:19.770
> 
> 标签：iphone, ios, uitouch

如何在 touchmoved 功能中获取手指运动的速度和方向？

我想获取手指速度和手指方向并将其应用于 UIView 类方向移动和动画速度。

我读了这个链接，但我无法理解答案，此外它没有解释我如何检测方向：

[UITouch 移动速度检测](https://stackoverflow.com/questions/668247/uitouch-movement-speed-detection)

到目前为止，我尝试了这段代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *anyTouch = [touches anyObject];
    CGPoint touchLocation = [anyTouch locationInView:self.view];
    //NSLog(@"touch %f", touchLocation.x);
    player.center = touchLocation;
    [player setNeedsDisplay];
    self.previousTimestamp = event.timestamp;    
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.view];
    CGPoint prevLocation = [touch previousLocationInView:self.view];
    CGFloat distanceFromPrevious = [self distanceBetweenPoints:location :prevLocation];
    NSTimeInterval timeSincePrevious = event.timestamp - previousTimestamp;

    NSLog(@"diff time %f", timeSincePrevious);
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-22T20:57:46.437

方向将根据 touchesMoved 中的“location”和“prevLocation”的值确定。具体来说，位置将包含新的触摸点。例如：

```
if (location.x - prevLocation.x > 0) {
    //finger touch went right
} else {
    //finger touch went left
}
if (location.y - prevLocation.y > 0) {
    //finger touch went upwards
} else {
    //finger touch went downwards
} 
```

现在 touchesMoved 将针对给定的手指移动多次调用。将手指第一次触摸屏幕时的初始值与最终完成移动时的 CGPoint 值进行比较将是代码的关键。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T22:04:07.343

为什么不只是以下作为 obuseme 回应的变体

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

         UITouch *aTouch = [touches anyObject];
         CGPoint newLocation = [aTouch locationInView:self.view];
         CGPoint prevLocation = [aTouch previousLocationInView:self.view];

         if (newLocation.x > prevLocation.x) {
                 //finger touch went right
         } else {
                 //finger touch went left
         }
         if (newLocation.y > prevLocation.y) {
                 //finger touch went upwards
         } else {
                 //finger touch went downwards
         }
} 
```

# git - 摆脱一个开发者的提交

> ID：10271887
> 
> 赞同：0
> 
> 时间：2012-04-22T20:34:37.483
> 
> 标签：git

我正在与其他几个开发人员一起开发一个项目，我们正在使用 git 进行版本控制。我们所有人都是不同程度的 git 新手。出于某种原因，我们的开发人员提交的一个已经覆盖了较新的工作 - 其他开发人员将提交更改，一切都很好 - 这个开发人员将提交更改，新的更改将被他的旧版本覆盖。这本身就是一个主题（欢迎任何见解）。

我的问题是：我怎样才能浏览历史并删除他的提交？我会使用变基吗？樱桃采摘？正如我所说，我或多或少是一个 git 新手，我没有任何有经验的人可以求助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:38:34.400

你应该可以使用[git filter-branch](http://linux.die.net/man/1/git-filter-branch)来做到这一点。请注意，这可能会极大地改变您的树，因此请先进行多个备份并仔细验证结果。

# twitter - $.getJSON 与 Twitter rate_limit_api

> ID：10271894
> 
> 赞同：1
> 
> 时间：2012-04-22T20:35:33.123
> 
> 标签：twitter, getjson

我无法让 Twitter 的 rate_limit_status [https://dev.twitter.com/docs/api/1/get/account/rate_limit_status](https://dev.twitter.com/docs/api/1/get/account/rate_limit_status)正常工作。我曾经使用 curl 和网络浏览器[https://api.twitter.com/1/account/rate_limit_status.json](https://api.twitter.com/1/account/rate_limit_status.json)对其进行测试，它确实返回了一个 JSON 对象，但是当我运行下面的代码时，我得到的只是 200，所以我知道我成功地得到了响应。它不受限制，所以即使我超过了我的限制，它仍然可以工作。我已经用谷歌搜索并搜索了这个论坛，但我似乎无法找到我的特定代码不起作用的原因。如您所见，我在 .getJSON 函数中放置了一个警报，但都没有关闭。我正在使用其他 Twitter API 获取朋友，使用与以下基本相同的代码成功获取关注者。我是 JQuery 的新手，所以我想知道我是否遗漏了什么。提前感谢您的帮助！

```
function getRateLimit (){
var uri = "https://api.twitter.com/1/account/rate_limit_status.json";
$.getJSON(uri, function(data) {
            alert("Alert before.");
    console.log(data["reset_time"]);
            console.log(data["remaining_hits"]);
            alert("For testing purposes.");
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:03:08.317

[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)阻止了它的工作。即使它可以工作，它也会显示每个用户而不是您的应用程序的速率限制。（返回请求者IP地址的限速状态）

您必须在服务器端获取这些数据，其他一切都没有意义。

# java - 通过 Netbeans 向数据库添加值

> ID：10271895
> 
> 赞同：0
> 
> 时间：2012-04-22T20:35:44.857
> 
> 标签：java, database, add

我收到一个 SQLexception 错误，列计数与第 1 行的值计数不匹配。我已尝试更改数据库，因为相应地检查了语句，但未能识别问题。有什么建议请...

```
JButton btnNewButton_1 = new JButton("Save");
btnNewButton_1.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {

String PHN = textField_a.getText();
String Week1 = textField_4.getText();
String Week2 = textField_5.getText();
String Week3 = textField_6.getText();
String Week4 = textField_7.getText();

if (PHN.equals("") || (Week1.equals("") || (Week2.equals("") || (Week3.equals("") || (Week4.equals("") ))))) {
JOptionPane.showMessageDialog(frmTemplate, "Please enter values in all the fields.");   
}

else {

try {
db.stmt.executeUpdate("INSERT INTO weight (PHN, Week1, Week2, Week3, Week4)"+"VALUES"+"("+"'"+PHN+"',"+"'"+Week1+"',"+"'"+Week2+"'"+"'"+Week3+"'"+"'"+Week4+"')");
JOptionPane.showMessageDialog(frmTemplate, "New Record Added");

textField_a.setText(null);
textField_4.setText(null);
textField_5.setText(null);
textField_6.setText(null);
textField_7.setText(null);

}
catch (SQLException e) {
JOptionPane.showMessageDialog(frmTemplate, "The value you have entered already exist");
e.printStackTrace();

}

}
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:49:30.873

看起来您缺少几个逗号。尝试查看[PreparedStatement](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)类来创建你的语句。使用它比尝试构建查询字符串要容易得多，并且它可以保护您免受[sql injection](http://en.wikipedia.org/wiki/SQL_injection)的影响。祝你好运！

# iphone - Retina 显示屏中的横向与非 Retina 显示屏

> ID：10271896
> 
> 赞同：0
> 
> 时间：2012-04-22T20:35:45.017
> 
> 标签：iphone, objective-c

我有一个风景 ViewConroller，

我创建并添加它：

```
gameVC = [[GameViewController alloc] initWithNibName:@"GameViewController" 
                                                                  bundle:nil];
[viewController.view removeFromSuperview];
[self.window addSubview:gameVC.view]; 
```

在`GameViewController`我有方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if(interfaceOrientation == UIInterfaceOrientationLandscapeRight){
        return YES;
    }else if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) {
        return YES;
    }else {
        return NO;
    }
} 
```

现在的问题是，当我在 iphone 3（或其他非视网膜屏幕）上运行应用程序时，屏幕看起来像 xib 文件，而当我在 iphone 4（或其他视网膜屏幕）上运行它时，UIViewController 上的 UIViews 在左侧 10-20 个像素。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:47:19.763

在 Interface Builder 的 Size Inspector 中为 GameViewController.xib 检查视图的自动调整大小掩码。此外，父视图（有问题的视图）的精确尺寸可能是错误的尺寸（相差几个像素）。

# zend-framework - Zend 显示图像

> ID：10271899
> 
> 赞同：0
> 
> 时间：2012-04-22T20:35:48.007
> 
> 标签：zend-framework

嗨，我正在使用 zend 框架，我想要的是显示图像。我的图像位于文件夹 /uploads/photo/default.jpg 中。如果我将文件夹移动到 /public/... 一切正常，但如果可以的话，我宁愿离开那里，因为所有图像都是个人资料的图像，所以我不想将它们公开...我的代码显示图像是

```
<img id="image" src=<?php echo $this->baseUrl().'/uploads/foto/default.jpg'; ?> > 
```

而且我知道它不起作用，但是有一种方法可以将我的文件夹留在那里更改我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:53:46.520

这些图像需要可公开访问，以便浏览器可以查看它们。如果您不想将它们物理存储在公用文件夹中，则需要从那里访问它们（通过创建从 public/uploads 到您的上传文件夹的符号链接），或者通过提供它们。一个 PHP 脚本，它将能够从文件所在的任何位置读取数据。

通过提供二进制数据。PHP 有它自己的问题，因为它会更慢，并且您需要确保发送适当的标头。但这将允许您限制访问，例如只允许用户查看他们朋友的个人资料图片，如果这是您的目标。

# android - 通过box2d在android andengine中创建圆圈？

> ID：10271900
> 
> 赞同：0
> 
> 时间：2012-04-22T20:36:19.417
> 
> 标签：android, box2d, andengine, game-physics

我可以创建矩形来创建墙，例如：

```
 final Rectangle wall = new Rectangle(CAMERA_WIDTH-2, 0, 2, CAMERA_HEIGHT -2);
    PhysicsFactory.createBoxBody(this.physicsWorld, wall, BodyType.StaticBody, FIXTURE_DEF);
    scene.attachChild(wall); 
```

但我想创建圈子？例如 ball.it 应该是上面的 box2d 的主体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:52:04.487

其实很简单：

```
Body circleBody = PhysicsFactory.createCircleBody(pWorld, pSprite, BodyType.StaticBody, FixtureDef); 
```

# objective-c - NSString 的 initWithContentsOfFile 无法加载任何大于 40kb 的文件，为什么以及解决方案是什么？

> ID：10271902
> 
> 赞同：0
> 
> 时间：2012-04-22T20:36:33.153
> 
> 标签：objective-c, ios, nsstring, initwithcontentsoffile

我想将文件加载到 NSString 变量中，并且正在使用 NSString`initWithContentsOfFile`来执行此操作。但是，任何大于 40kb 的文件，该方法都会失败，并且 nil 会返回到我的变量中。这是我正在使用的代码：

```
NSString *fileContents;    
fileContents = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil]; 
```

我猜它由于内存不足而失败，但它肯定可以处理小至 40kb 的文件？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:47:54.920

在打印错误并发现我收到 Cocoa 错误代码 261 后，我很快就能通过快速的 Google 发现我的问题是导致问题的 NSStringEncoding 参数。我从 NSUTF8StringEncoding 更改为 NSASCIIStringEncoding，我的问题得到了解决。

# mysql - 如何使用查询替换文本

> ID：10271904
> 
> 赞同：0
> 
> 时间：2012-04-22T20:36:53.350
> 
> 标签：mysql, sql

如何使用 sql 替换字段中的某些文本？

示例表：

```
id               text
-------------------------------
1        hello my name is keven
2        hello my name is steve
3        hi my name is sam 
```

在保持剩余文本不变的情况下，如何在字段中`hello`替换为？`hi``text`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:40:22.033

```
UPDATE YOUR_TABLE SET `text` = REPLACE(`text`, 'hello', 'hi') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:40:33.213

如[本文所示](http://www.mydigitallife.info/how-to-find-and-replace-text-in-mysql-database-using-sql/)

```
update TABLE_NAME set 
FIELD_NAME = replace(FIELD_NAME, ‘find this string’, ‘replace found string with this string’); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:42:10.253

```
Select id, REPLACE(text,'hello','hi') AS text from table; 
```

它在某种程度上依赖于数据库，但这应该适用于大多数数据库。

# forms - 在“发送给朋友”表单中删除消息文本区域作为必需元素

> ID：10271914
> 
> 赞同：0
> 
> 时间：2012-04-22T20:38:44.527
> 
> 标签：forms, validation, magento

我正在使用 Magento 1.5.1.0。我想在“发送给朋友”表单中删除“消息”文本区域作为必填字段。我在哪里可以改变这种行为？

问候，伯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:08:21.493

验证是硬编码的（magento 社区版）。您必须覆盖验证方法

# sudo - 以 root 身份运行脚本，无需 root 访问权限

> ID：10271915
> 
> 赞同：1
> 
> 时间：2012-04-22T20:38:55.633
> 
> 标签：sudo, su, root

我试图让一个脚本以 root 身份运行，以添加目录和更改权限，但我不确定如何在不提示用户输入密码的情况下让它以 root 身份运行。用户不一定是 sudoer，因此执行任何类型的 sudo -S 命令或将 sudoer 首选项更改为不需要密码在这里都不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:26:09.213

须藤是你的朋友。配置 /etc/sudoers 以允许任何人在特定位置运行脚本，例如：

```
ALL   ALL = NOPASSWD: /path/to/my/root/script 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T12:27:33.783

```
#!/bin/bash 
```

#从图形用户界面（Ubuntu GUI 桌面）作为超级用户执行指令的 Linux 脚本示例

#这两条指令仅适用于这个例子，它改变了给定文件的根所有权

#如果尚未完成，则将此脚本更改为可执行文件

```
echo $0 | chmod ugo+x 
```

#为这个具体的例子创建一个文件

```
echo "some text" > ./my_file 
```

#

#执行root指令，例如在ubuntu登录时启动的自定义启动脚本很有用

#弹出询问密码框

**`PASSWD=`zenity --entry --text "输入root密码" --hide-text**

#以超级用户身份执行动作

**`sudo -S su root -c "chown root ./my_file" <<< "$PASSWD"`**

#

#仅针对此特定示例的以下操作

# 显示文件所有权以检查文件是否属于root

```
printf $'\n'; ls -al ./my_file; printf $'\n' 
```

#必要时恢复当前用户所有权

```
sudo -S su root -c "chown `whoami` ./my_file" <<< "$PASSWD" 
```

#再次显示文件所有权以检查它是否属于当前用户

```
printf $'\n'; ls -al ./my_file; printf $'\n' 
```

#如果此终端会话未关闭，则清除缓存以再次提示密码

```
sudo -k 
```

# php - PHP Slots，生成组合

> ID：10271917
> 
> 赞同：0
> 
> 时间：2012-04-22T20:39:01.680
> 
> 标签：php, html, slots

所以我有一系列可能的组合：

```
$faces = array ('Bar', 'Cherry', 'Lemon', 'Seven', 'DoubleBar', 'TripleBar'); 
```

和一系列的支出

```
$payouts = array (
'Bar|Bar|Bar' => '5', 
'Double Bar|Double Bar|Double Bar' => '10',
'Triple Bar|Triple Bar|Triple Bar' => '15', 
'Cherry|Cherry|Cherry' => '20',
'Seven|Seven|Seven' => '70',
'Seven|Any|Any' => '70',
'Diamond|Diamond|Diamond' => '100',
); 
```

每个轮子都有一个数组（总共 3 个），我怎样才能使加权随机组合与 Seven|Any|Any 正常工作？

我知道我可以创建两个大小为 6^3 的数组，一个代表权重，另一个数组代表每个可能的组合，并使用类似这个脚本的东西，但是没有更短、更有效的方法吗？

```
function weighted_random_simple($values, $weights){
    $count = count($values);
    $i = 0;
    $n = 0;
    $num = mt_rand(0, array_sum($weights));
    while($i < $count){
        $n += $weights[$i];
        if($n >= $num){
            break;
        }
        $i++;
    }
    return $values[$i];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:45:08.597

一个关联可能结果的计数而不是实际位置的数组怎么样？

例如，您进行跑步，得到类似 A/A/B 的结果，因此您有 2 个 A，然后查看表格

```
$payouts = array(
   2 => array('Bar' => 10, 'Double Bar' => 20, etc...)
   3 => array('Diamond' => 100, 'Bar' => 40, etc...)
); 
```

# objective-c - xCode Storyboard：将 IB Elements 连接到源文件

> ID：10271919
> 
> 赞同：0
> 
> 时间：2012-04-22T20:39:13.277
> 
> 标签：objective-c, xcode, cocoa-touch

我不明白如何将元素连接到源文件。我有一个自定义 UITableViewCell ，我想将自定义标签从它拖到我的 CustomCell.h 文件中，但是当我将它拖到它上面时，它什么也没做......并且在故事板中没有文件所有者。对此有简短的回答吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:45:17.470

是的，他们这样做的方式很奇怪。正如您可能在界面构建器中知道的那样，当您想要链接到出口时，您通常会从文件所有者拖动到元素。在这个例子中也是同样的情况。所以在你设置了单元格的类之后，你就有了标签。并且您已经在 CustomCell.h 中创建了一个 IBOutlet UILabel，只需控制从您拥有标签的单元格拖动，您就会看到链接它所需的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:59:43.703

在 xcode 中打开助手编辑器（从工具栏）（它将并排打开两个视图，一个带有 xib 的视图，另一个带有相应的 .h 文件）。控制从标签拖动到创建的属性。

# java - 我无法通过 maven 获取 jar 文件

> ID：10271920
> 
> 赞同：0
> 
> 时间：2012-04-22T20:39:36.113
> 
> 标签：java, jakarta-ee, maven, netbeans-plugins, jxta

我正在尝试通过 Netbeans 中的 maven 下载 JXTA 2.7，但我无法做到这一点。你知道为什么吗？我得到了同伴面板加载错误；

```
org.apache.maven.project.ProjectBuildingException: Error resolving project artifact: Could not transfer artifact com.kenai.jxse:jxse:pom:2.7 from/to repository.jboss.org (http://repository.jboss.org/maven2): Access denied to: http://repository.jboss.org/maven2/com/kenai/jxse/jxse/2.7/jxse-2.7.pom, ReasonPhrase:Forbidden. for project com.kenai.jxse:jxse:jar:2.7
    at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:296)
    at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:236)
    at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:251)
    at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:258)
    at org.netbeans.modules.maven.repository.ui.ArtifactMultiViewFactory.readMavenProject(ArtifactMultiViewFactory.java:237)
    at org.netbeans.modules.maven.repository.ui.ArtifactMultiViewFactory.access$000(ArtifactMultiViewFactory.java:103)
    at org.netbeans.modules.maven.repository.ui.ArtifactMultiViewFactory$1.run(ArtifactMultiViewFactory.java:166)
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1411)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:1991)
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not transfer artifact com.kenai.jxse:jxse:pom:2.7 from/to repository.jboss.org (http://repository.jboss.org/maven2): Access denied to: http://repository.jboss.org/maven2/com/kenai/jxse/jxse/2.7/jxse-2.7.pom, ReasonPhrase:Forbidden.
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:286)
    at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:285)
    ... 8 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not transfer artifact com.kenai.jxse:jxse:pom:2.7 from/to repository.jboss.org (http://repository.jboss.org/maven2): Access denied to: http://repository.jboss.org/maven2/com/kenai/jxse/jxse/2.7/jxse-2.7.pom, ReasonPhrase:Forbidden.
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:951)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:941)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:669)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.maven.wagon.authorization.AuthorizationException: Access denied to: http://repository.jboss.org/maven2/com/kenai/jxse/jxse/2.7/jxse-2.7.pom, ReasonPhrase:Forbidden.
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:835)
    at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)
    at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
    at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:601)
... 4 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:44:43.403

看起来您正在使用的存储库 (http://repository.jboss.org/maven2/com/kenai/jxse/jxse/2.7/jxse-2.7.pom) 已被弃用并被禁用。

看到[这个](https://community.jboss.org/message/625343?_sscc=t)和[这个](http://www.coderanch.com/t/539666/tools/Maven-JBoss-Repository-Error)。此 jira 问题中有更多信息：[https ://issues.jboss.org/browse/JBBUILD-682](https://issues.jboss.org/browse/JBBUILD-682)

# java - 如何实现和维护多个 actionListener

> ID：10271924
> 
> 赞同：4
> 
> 时间：2012-04-22T20:39:51.493
> 
> 标签：java, actionlistener, code-maintainability

好的，我有一个包含多个 Menu 和 MenuItem 的类（我们称之为：MenuBarClass）。我想为每个 MenuItem 分配一个动作侦听器，但是.. 而不是做类似的事情：

```
menuitem_1.addActionListener(new ActionListener() { public void actionPerformed(ActionEvent e) {} });
menuitem_2.addActionListener(new ActionListener() { public void actionPerformed(ActionEvent e) {} });
menuitem_3.addActionListener(new ActionListener() { public void actionPerformed(ActionEvent e) {} });
// ...
menuitem_N.addActionListener(new ActionListener() { public void actionPerformed(ActionEvent e) {} }); 
```

我希望我的代码更易于维护，而且……更重要……我不想在一个巨大的 ActionListener 类中出现很多“如果”，例如：

```
public void actionPerformed(ActionEvent e) {
  if (e.getSource().equals(menuitem_1)) {
    //do stuff..
  } else if (e.getSource().equals(menuitem_2)) {
    //do stuff..
  } else ...
} 
```

如果可能的话，我该怎么做？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:16:01.037

[您可以使用反射](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/package-summary.html)API 创建实用方法来减少冗长：

```
package demo;    
import java.awt.event.*;
import java.lang.reflect.*;

public class ListenerProxies {    
  private static final Class<?>[] INTERFACES = { ActionListener.class };

  public static ActionListener actionListener(final Object target,
                                                    String method) {
    final Method proxied = method(target, method);
    InvocationHandler handler = new InvocationHandler() {
      @Override
      public Object invoke(Object proxy, Method method, Object[] args)
          throws Throwable {
        ActionEvent event = (ActionEvent) args[0];
        return proxied.invoke(target, event);
      }
    };
    return (ActionListener) Proxy.newProxyInstance(target.getClass()
        .getClassLoader(), INTERFACES, handler);
  }

  private static Method method(Object target, String method) {
    try {
      return target.getClass().getMethod(method, ActionEvent.class);
    } catch (NoSuchMethodException e) {
      throw new IllegalStateException(e);
    } catch (SecurityException e) {
      throw new IllegalStateException(e);
    }
  }
} 
```

这可以像这样使用：

```
package demo;
import static demo.ListenerProxies.actionListener;
import java.awt.event.ActionEvent;
import javax.swing.*;

public class Demo {

  public static void main(String[] args) {
    Demo test = new Demo();
    JButton hello = new JButton("Say Hello");
    hello.addActionListener(actionListener(test, "sayHello"));
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(hello);
    frame.pack();
    frame.setVisible(true);
  }

  public void sayHello(ActionEvent event) {
    System.out.println("Hello");
  }
} 
```

这样做的缺点是缺少编译时检查该`sayHello(ActionEvent)`方法是否存在。

性能成本可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:02:48.330

实际上，这些`ActionListener`对象是通过命令设计模式的命令对象。您可以创建自定义子类而不是匿名子类，并获得更多的优雅。

现在，如果困扰您的是您如何将动作侦听器与命令对象连接起来，我会使用反射来做这样的事情：

*   创建一个自定义注释，类似于`@MenuAction`它可能采用正确命令对象的类。
*   创建一个通用的动作监听器来读取、实例化和执行这个命令。
*   将通用动作侦听器添加到所有菜单项。

如果您认为它好，您可以创建一个框架并在多个项目中使用这种通用方法，但这比简单地`ActionListener`手动连接几个菜单项和正确的实现要多得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T21:06:19.270

如果每个菜单项您想要做的事情都相似，您可以创建一个实现`ActionListener`构造函数参数的类。例如，如果每个菜单项都应该打开一个`JFrame`，您可以执行以下操作：

```
public class OpenFrameAction implements ActionListener
{
    private final JFrame frame;

    public OpenFrameAction(final JFrame frameToOpen)
    {
        this.frame = frameToOpen;
    }

    public void actionPerformed(ActionEvent e)
    {
        this.frame.setVisible(true);
    }
} 
```

然后对于每个菜单项：

```
menuitem_1.addActionListener(new OpenFrameAction(myFrameForMenuItem1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T21:27:17.243

扩展siegi的答案。如果要执行的动作有共同点（跳下悬崖、跳探戈、喝杯咖啡），你真的只想为每个项目添加单独的听众。如果是这种情况，您不能指望 Java 为您执行任何可维护性魔法。

更常见的情况是动作确实有一些共同点（做探戈，做狐步舞等）。如果是这种情况，您可以按照 siegi 的建议或将侦听器附加到菜单（而不是项目）。该事件应该告诉您选择了哪个项目，您可以在侦听器中使用它：

```
// something like this
actionPerformed(ActionEvent e)
{
    this.doDance(e.getSource().getSelectedValue());
} 
```

# php - PHP运行外部程序，Apache挂起

> ID：10271927
> 
> 赞同：3
> 
> 时间：2012-04-22T20:40:25.560
> 
> 标签：php, apache, external-process

基本上我的情况如下。

1.  上传文件
2.  在文件上运行外部进程（生成另一个文件）
3.  当外部进程关闭时，处理生成的文件。

目前在 PHP 中，我运行程序如下：

```
$cmd = 'cd the_directory/; ./the_program'
system($cmd); 
```

该程序运行良好，一切正常，但程序最后说**“按 Enter 退出...”**因此 Apache 无限期挂起，因为该程序正在等待用户输入。我们的合作伙伴声明他们已将这个程序完美地集成到他们的后端，并且没有遇到这个问题。到目前为止，我在 PHP 中执行的所有外部程序都无需用户输入即可退出，这似乎是这种情况的常态。

在我看来，代码不应该只是没有需要用户输入的结束消息。我错过了什么吗？或者有没有办法解决这个问题？还是他们只需要更改代码？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:45:43.463

我认为您应该尝试[proc_open](http://www.php.net/manual/en/function.proc-open.php)。

有了它，您不仅可以将外部命令作为进程执行，还可以设置管道来获取和发送信息到该进程。

仔细看看这个函数的第三个参数，研究一下这个函数的 PHP 手册中的例子，你可以看到这样的东西：

```
fwrite($pipes[0], '<?php print_r($_ENV); ?>'); 
```

因此，您可以将所需的内容写入刚刚打开的进程的输入管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:51:04.597

如果您使用 Windows 环境：

```
$run_cmd = "cmd /c c:/app_folder/app.exe";
$WshShell = new COM("WScript.Shell");
$oExec = $WshShell->Run($run_cmd, 0, false); 
```

请注意，后者将导致进程窗口最终关闭

如果您使用 UNIX（我自己还没有测试过）：

```
exec('\app_folder\app &'); 
```

# c++ - uint32_t 和 uint8_t[4] 未定义行为的联合？

> ID：10271929
> 
> 赞同：4
> 
> 时间：2012-04-22T20:40:40.860
> 
> 标签：c++, c, unions, strict-aliasing, type-punning

在[这个答案](https://stackoverflow.com/a/8568531/1025391)的评论中，据说使用如下的联合将整数分成它们的字节是未定义的行为。在那个地方给出的代码与此相似但不完全相同，如果我更改了代码的未定义行为相关方面，请注明。

```
union addr {
 uint8_t addr8[4];
 uint32_t addr32;
}; 
```

到目前为止，我认为这将是一种很好的方法来做类似的事情`addr = {127, 0, 0, 1};`并获得相应 `uint32_t`的回报。（我承认这可能会根据我的系统的字节顺序产生不同的结果。但是问题仍然存在。）

这是未定义的行为吗？如果是这样，为什么？（我不知道*C++ 中的 UB 是什么意思是访问非活动的工会成员。*）

* * *

**C99**

*   在这一点上，C99 显然非常接近 C++03。

**C++03**

*   *在一个联合中，任何时候最多有一个数据成员处于活动状态，即任何时候最多可以有一个数据成员的值存储在一个联合中。*C++03，第 9.5 节 (1)，第 162 页

然而

*   *如果一个 POD 联合包含多个共享一个公共初始序列的 POD 结构 [...]，则允许​​检查任何 POD 结构成员的公共初始序列，*同上。
*   *如果两个 POD-struct [...] 类型具有相同数量的非静态数据成员，则它们是布局兼容的，并且相应的非静态数据成员（按顺序）具有布局兼容类型*C++03，第 9.2 (14) 节，第 157 页
*   *如果两个类型 T1 和 T2 是同一类型，则 T1 和 T2 是布局兼容类型。*C++03，第 3.9 (11) 节，第 53 页

结论

*   as`uint8_t[4]`和`uint32_t`不是同一类型（我猜，一个[严格的别名](https://stackoverflow.com/a/99010/1025391)）（加上两者都不是 POD-structs/union）上面确实是 UB？

**C++11**

*   *请注意，聚合类型不包括联合类型，因为具有联合类型的对象一次只能包含一个成员。*C++11，脚注 46，第 42 页

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T20:46:28.447

> 我不知道 C++ 中的 UB 是什么意思是访问不活动的工会成员。

基本上，这意味着您可以从联合中读取而不调用未定义行为的唯一成员是最后写入的成员。换句话说，如果您写入`addr32`，您只能从 读取`addr32`，`addr8`反之亦然。

[此处](https://stackoverflow.com/a/3071899/477878)也提供了一个示例。

编辑：由于是否是 UB 已经进行了很多讨论，请考虑以下（完全有效的）C++11 示例；

```
union olle {
    std::string str;
    std::wstring wstr;
}; 
```

在这里你肯定可以看到激活str和读取wstr可能是有问题的。您可以将其视为一个极端示例，因为您甚至必须通过执行新位置来激活成员，但规范实际上涵盖了这种情况，没有提到它在其他方面被视为有关活动成员的特殊情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T20:52:12.643

[编辑：阅读下面我编辑的部分，因为我现在不确定这是否是未定义的行为；但是，在我进一步确认之前，我的大部分答案都会保持不变] 是的，这是未定义的行为。C++ 标准第 9.5.1 节规定：

> 在一个union中，任何时候最多只能有一个非静态数据成员处于活动状态，即任何时候最多可以有一个非静态数据成员的值存储在一个union中。[注意：为了简化联合的使用，我们做了一个特别的保证：如果一个标准布局联合包含几个共享一个公共初始序列（9.2）的标准布局结构，并且如果这个标准布局联合类型的对象包含一个标准布局结构，允许检查任何标准布局结构成员的公共初始序列；见 9.2。——尾注]

这意味着也只能有效地读取最近写入的成员（从其他成员读取在技术上是未定义的行为）。任何时候都只能*有一名*工会成员处于活动状态。不是两个。

你可能会问为什么？考虑你的例子。C++ 不要求`addr32`. 它可以是大端、小端或中端。如果您写入`addr8`，然后从 读取`addr32`，C++ 不能保证您会得到正确的值，因为在这种情况下是字节序。一台计算机，它可能是一个值，而在另一台计算机上，它可能是一个不同的值。因此，这样做（即写入一个成员并读取另一个成员）是未定义的行为。

**编辑：**对于那些想知道“活动”是什么意思的人，[关于工会的 MSDN 文档](http://msdn.microsoft.com/en-us/library/5dxy4b7b%28v=vs.90%29.aspx)指出：

> 联合的活动成员是最近设置值的成员，并且只有该成员具有有效值。

**编辑 编辑：**我一直认为这样做的行为是不确定的，但现在我不太确定在 R. Martinho Fernandes 的评论和回答以及重新阅读 MSDN 的引用之后。该值当然是未指定/未定义的，但现在我不太确定行为是否是（未定义的值意味着您可能会得到不同的结果；未定义的行为意味着您的系统可能会崩溃，两者是不同的东西）。我将进一步考虑这一点，并与我认识的其他人交谈，看看我是否能找到更明确的答案。

但是，我确实认为可以肯定地说，通常读取联合中的非活动成员*可能*是未定义的行为（当然，标准中的特殊说明除外），但我不知道它是否*总是*如此（即除了我引用的 C++ 标准部分的特别说明之外，可能还有一些例外情况）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-22T21:21:46.830

坦率地说，我在标准中找不到任何提及这样做是未定义的行为。该标准确实为工会定义了“活动成员”的概念，但除了解释如何更改活动成员（§9.5p4）和定义常量表达式（§5.9p2）之外，它似乎没有将这个想法用于任何其他事情）。具体来说，它似乎没有明确提及访问活动成员或非活动成员的有效性。

据我所见，类似以下内容可能会导致严格的别名违规，这是未定义的行为：

```
union example0 {
    short some_other_view[sizeof(double)/sizeof(short)];
    double value;
}; 
```

由于工会的一些特殊规则，这不会导致严格的别名违规。如果您使用无法别名的类型访问相同的内存位置，就会发生这种情况，即“正常”的严格别名违规。

*但是*，由于在别名规则方面存在例外情况`char`，因此以下内容不会导致相同类型的违规：

```
union example1 {
    char byte_view[sizeof(double)];
    double value;
}; 
```

据我所见，标准中没有任何内容使以下代码具有未定义的行为：

```
example1 e;
e.value = 10.0;
std::out << e.byte_view[0]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-22T20:46:46.987

基本上是因为在 C++ 中，您只能访问联合的活动成员。

这意味着如果你设置`addr8`了，那么你应该只访问那个，直到你设置`addr32`，这样你就可以访问它等等。将一个成员设置为从另一个成员访问数据会导致未定义的行为。

当您设置一个成员时，它被认为是*活动*的，并且在另一个成员成为活动成员之前它一直*如此*。

# android - Android：MapView 中的色调屏幕（谷歌地图）

> ID：10271932
> 
> 赞同：0
> 
> 时间：2012-04-22T20:40:59.143
> 
> 标签：android, google-maps, android-mapview

我在扩展 MapActivity 的 Activity 中使用以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="My Google Maps Key"
    android:clickable="true" /> 
```

我想要实现的目标：当用户在夜间使用地图时，屏幕应该被染成深色（黑色或深蓝色）。由于填充整个屏幕的 MapView 是从 ViewGroup 派生的 - 我想有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:07:42.157

好吧，您可以将 放入`MapView`中`FrameLayout`，然后应用于[`android:foreground`](http://developer.android.com/reference/android/widget/FrameLayout.html#attr_android%3aforeground)，`FrameLayout`或类似的东西。

但是，我怀疑这不会很好地工作。我怀疑你*真正*想要的是一组备用图块，就像谷歌导航所使用的那样，你有深色图块和浅色文本。我担心您的色调只会使地图无法阅读。但是，也许您会找到可以实现目标的颜色和透明度级别。

# jquery - Rails 3.2 与 ruby 1.9.3 US-ASCII 问题中的无效字节序列

> ID：10271935
> 
> 赞同：1
> 
> 时间：2012-04-22T20:42:01.713
> 
> 标签：jquery, ruby-on-rails, ruby, utf-8

有没有人可以帮助我解决这个让我疯狂好几天的问题......

实际上。我已将我的 rails 配置升级到 3.2，将 ruby​​ 升级到 1.9.3，从那时起我的 jquery 文件不再工作，给我一个错误：

US-ASCII 中的无效字节序列

经过多次尝试，我发现这条线导致了问题：

```
rates.push(new Array('<%= tva_rate.id %>', '<%= tva_rate.tva_taux %>', '<%= tva_rate.tva_code %>')); 
```

我认为那是 < 和 > 字符...问题是我需要这些来使代码正常工作...我尝试添加：

```
# encoding: utf-8 
```

但它确实有效......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:28:46.757

经过一周的调查，我终于解决了这个问题。如果您知道问题不直接在于 javascript 代码，而在于它所引用的数据，这可能会让您很感兴趣......

实际上，在相应的表中，我有一条带有“é”字符的记录导致问题...这意味着当您从 Ruby 1.8... 更新到 Ruby 1.9... 时，您必须清除无效字符中的数据升级前。

然后，如果您在更新后重新创建数据库中的条目，那么一切都会像魅力一样工作。

希望它可以帮助。

担

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:45:27.593

您可以添加到您的 .bashrc

```
export RUBYOPT=-Ku 
```

# javascript - jQuery UI 模态对话框：在错误的地方关闭和调整图标

> ID：10271938
> 
> 赞同：2
> 
> 时间：2012-04-22T20:42:10.440
> 
> 标签：javascript, css, jquery-ui, jquery-ui-dialog, asp.net-webpages

我正在尝试在 ASP.NET 网页站点上使用 jQuery UI 模态对话框小部件。但是，当我使用以下代码时，我最终会得到一个对话框，其中关闭图标 (x) 在标题文本下方而不是与它内联，并且在对话框左侧，按钮上方的调整大小图标，而不是右下角，它应该在的地方。

你可以看到我在这里谈论的一个例子：

[http://www.cutrategamer.com/app/sandbox](http://www.cutrategamer.com/app/sandbox)

这是源代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>jQuery UI Example Page</title>
<link href="Styles/start/jquery-ui-1.8.18.custom.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.19.custom.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {

            // Dialog
            $('#dialog').dialog({
                autoOpen: false,
                width: 600,
                buttons: {
                    "Ok": function () {
                        $(this).dialog("close");
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                }
            });

            // Dialog Link
            $('#dialog_link').click(function () {
                $('#dialog').dialog('open');
                return false;
            });

            //hover states on the static widgets
            $('#dialog_link, ul#icons li').hover(
                    function () { $(this).addClass('ui-state-hover'); },
                    function () { $(this).removeClass('ui-state-hover'); }
                );

        });

        </script>

        <!-- Adding jquery UI stuff -->

    <style type="text/css">

            /*demo page css*/

            body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}

            .demoHeaders { margin-top: 2em; }

            #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}

            #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}

            ul#icons {margin: 0; padding: 0;}

            ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}

            ul#icons span.ui-icon {float: left; margin: 0 4px;}

        </style>

</head>
<body>
<!-- Dialog NOTE: Dialog is not generated by UI in this demo so it can be visually styled in themeroller-->

        <h2 class="demoHeaders">Dialog</h2>

        <p><a href="#" id="dialog_link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Open Dialog</a></p>

        <!-- ui-dialog -->

        <div id="dialog" title="Dialog Title">

            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

        </div>

</body>
</html> 
```

谁能告诉我我需要做什么才能修复这个小部件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:16:48.113

您的自定义 jQuery UI CSS 文件 (jquery-ui-1.8.18.custom.css) 不包含 jQuery Dialog CSS，因此缺少大量代码。您需要再次重建它并在构建它时包含 jQuery Dialog。

# android - Android：replaceAll() 和双引号问题

> ID：10271939
> 
> 赞同：1
> 
> 时间：2012-04-22T20:42:17.547
> 
> 标签：android, regex

我不知道我哪里出错了。我想替换`"`为`""` 我使用了以下代码。

```
input.replaceAll("\"", "\"\""); 
```

这似乎不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:44:25.037

字符串是不可变的，所以当你“改变”你的字符串时，你需要重新分配它。

```
input = input.replaceAll("\"", "\"\""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:44:41.840

字符串是不可变的，因此您需要将其分配给另一个字符串：

```
input = input.replaceAll("\"", "\"\""); 
```

# python - 使用联结表在表单上生成多选选项 - > web2py

> ID：10271941
> 
> 赞同：0
> 
> 时间：2012-04-22T20:42:37.630
> 
> 标签：python, database, web2py

我有两张表，它们之间存在多对多关系。一个表保存属性类型，另一个保存区域。

为了简单起见，我们假设它是这样的：

```
_property_
id
name
description

_region_
id
name

_property-region_
id
property.id
region.id 
```

我想构建一个表单来创建新属性，并且我希望这个表单包含一个多选选项，允许用户指定该属性在哪个/多个区域中可用。

我知道我可以在`list:reference`不实际创建联结表的情况下创建多选表单，但我有兴趣学习如何在不对数据库进行反规范化的情况下执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:29:02.743

它不是去正规化吗？每个区域都可以有许多属性，并且关系由区域保存......在查询级别上，您只需询问保存属性 id 的区域......（无论哪种方式，即使您有 junction/通过表）

如果您有关于关系的特定信息，则必须自己处理该逻辑。不是那么难，创建两个表单验证属性信息，记录将在数据库中，因此您拥有 id。然后只需将该 id 添加为关系的一部分，并将所有选定的项目添加为其他。

# java - 使鼠标按钮触发类事件

> ID：10271944
> 
> 赞同：4
> 
> 时间：2012-04-22T20:43:06.973
> 
> 标签：java, swing

我真的在努力制作一个上面有按钮的程序，当点击一个按钮时，它会调用一个类来工作。我现在只使用 Java 大约 10 周，并且掌握了基础知识，但我还没有找到任何可以让我了解我想在这里做什么的地方。

我努力了

```
public void mouseEntered(MouseEvent e) {

                 if (e.getButton()== MouseEvent.BUTTON3){
                       Object triangle;
                       Frame.class.getClass();
                 }

          } 
```

我也试过

```
panel.addMouseListener(new MouseAdapter() {
if (e.getButton()== MouseEvent.BUTTON1) {
    Frame.class.getClass(circle); } 
```

无论哪种方式我都尝试过，我通常会收到一个错误，无法找到对象或`getClass()`类型`Object`中的方法不适用于参数（`JButton`）。

谁能帮我弄清楚我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:28:05.600

```
public class MainFrame extends JFrame {

private JButton button = new JButton("Run AnotherClass");

MainFrame() {
    super();
    this.setTitle("Demo App");
    this.setSize(200,200);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setLayout(new FlowLayout());
    this.add(button);
    button.addActionListener(new ButtonHandler());
}

public class ButtonHandler implements ActionListener {      
    public void actionPerformed(ActionEvent e) {
        new AnotherClass();
    }
}

public static void main(String[] args) {
    new MainFrame().setVisible(true);
} 
```

}

```
public class AnotherClass {
public AnotherClass()   {       
    JOptionPane.showMessageDialog(null, "AnotherClass is in operation");
} 
```

}

# objective-c - Objective-C 中的变量作用域

> ID：10271945
> 
> 赞同：1
> 
> 时间：2012-04-22T20:43:12.870
> 
> 标签：objective-c, ios, cocoa, scope

我开始使用Objective-C，关于变量范围的一些东西我仍然没有得到。我搜索了一下，但我仍然无法抓住我做错了什么。

我正在尝试创建一个代码，它会给我两点之间的 x,y 差异。第一个 IF 中的第一个 NSLog 显示了 pointWhereDragBegan.x 和 .y 的正确值，但是当我尝试在第二个 IF 语句中获取 pointWhereDragBegan 的值时，我得到的 pointWhereDragBegan.x 的值是 -1.998683 和 .y为 0.0。

我确定这很简单，我只是无法理解我的错误。

```
- (void)drag:(UILongPressGestureRecognizer *)drag{

CGPoint pointWhereDragBegan;
if(drag.state == UIGestureRecognizerStateBegan){
    pointWhereDragBegan = [drag locationInView:self];        
    NSLog(@"Drag started at %f,%f",pointWhereDragBegan.x,pointWhereDragBegan.y);        
}

if(drag.state == UIGestureRecognizerStateEnded){
    CGPoint pointWhereDragEnded = [drag locationInView:self];  

    float xDragged = pointWhereDragEnded.x - pointWhereDragBegan.x;
    float yDragged = pointWhereDragEnded.y - pointWhereDragBegan.y;

    NSLog(@"Drag ended at %f,%f",pointWhereDragEnded.x,pointWhereDragEnded.y);
    NSLog(@"The user moved %f, %f",xDragged,yDragged);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:49:13.333

`drag.state`永远不会同时`UIGestureRecognizerStateBegan`和`UIGestureRecognizerStateEnded`。这个方法应该被调用两次：每个状态一次。

因此，为了解决您的问题，您需要`pointWhereDragBegan`在方法范围之外坚持。例如，您可以使用实例变量。

# asp.net-mvc - MVC 是否可以在模型中访问 HttpContext.Current.User 以及如何测试

> ID：10271949
> 
> 赞同：3
> 
> 时间：2012-04-22T20:44:06.030
> 
> 标签：asp.net-mvc, unit-testing

在我的一个模型类中，我具有以下属性：

```
public virtual bool OkToChangeApprovedForPayment
        {
            get
            {
                return ExportedDateTime == null && PMApproved == true && HttpContext.Current.User.IsInRole(Resources.Roles.VectorOpsAdmin);
            }
        } 
```

如您所见，其中一个条件是测试用户所处的角色。像这样访问模型中的 HttpContext 是否可以？如果不是什么是更好的方法呢？

如果可以，您将如何对其进行单元测试？您将如何替换对 HttpContext 的调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:32:16.950

这是安全的（当然，如果您的模型在运行请求的上下文中执行）。

不过，这将很难测试。您可以将 HttpContextBase 的实例注入更适合测试的模型中。

# c# - 将子元素动态添加到 Path 时的 StackOverflow

> ID：10271953
> 
> 赞同：0
> 
> 时间：2012-04-22T20:44:41.290
> 
> 标签：c#, wpf, stack-overflow

我正在尝试向网格动态添加一些路径，但这会生成一个无限循环，从而导致 SO。

```
 private void SubLayout_Loaded(object sender, RoutedEventArgs e)
    {
        GeometryGroup myGeometryGroup = new GeometryGroup();
        EllipseGeometry myEllipseGeometry = new EllipseGeometry();
        myEllipseGeometry.Center = new Point(100, 41.5);
        myEllipseGeometry.RadiusX = 5;
        myEllipseGeometry.RadiusY = 5;
        myGeometryGroup.Children.Add(myGeometryGroup);
        points.Data = myGeometryGroup;
    } 
```

XAML：

```
 <Path x:Name="points" Fill="Gold" Stroke="Black" 
StrokeThickness="1"> </Path> 
```

错误：

System.StackOverflowException 未处理

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T20:46:54.087

我明白 了`myGeometryGroup.Children.Add(myGeometryGroup);`，你*可能* 会做

```
myGeometryGroup.Children.Add(myEllipseGeometry); 
```

# c# - 是否有使用 Epoch 的通用日期表示？自 Epoch 以来的滴答声与毫秒数

> ID：10271956
> 
> 赞同：1
> 
> 时间：2012-04-22T20:44:51.137
> 
> 标签：c#, .net, api, datetime, epoch

我正在构建一个需要日期的 API，并且我想使用 Epoch 来表示它。

由于我在 .NET 中使用 C# 进行开发，因此刻度是一种简单的表示形式（100 纳秒）。但是，我还需要迎合其他编程语言的 API 实现者。

是否在 C# 之外使用了 Ticks 的概念？我应该回到自 Epoch 以来的毫秒数，这样 API 的设计就不会过多地带有 .net 风格吗？

我知道如何进行转换，但我正在寻找更有意义的方法。我的目标是让所有可能实现此 API 的所有语言的程序员都能轻松地表示日期。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:27:36.127

无论您是否选择在 API 中使用 XML，[XML Schema Part 2: Datatypes Second Edition](http://www.w3.org/TR/xmlschema-2/)中定义的标准都是一个非常安全的选择。请参阅第 3.2.7 节，建议使用多种 ISO-8601 格式之一的特定版本。

# mysql - 搜索包含数十亿条记录的 MySQL 数据库的最快方法是什么？

> ID：10271960
> 
> 赞同：0
> 
> 时间：2012-04-22T20:45:19.343
> 
> 标签：mysql, database

我一直在寻找一种非常快速有效的方法来搜索一个巨大的数据库，而不使用 PHP 和 Mysql 以外的任何东西。我可以使用哪些选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:46:46.933

如果你有 100 行，你会这样做。这就是索引的用途。

你能做的最多就是关注表的设计、索引策略，并在解决方案中投入足够的硬件。

如果任何人都可以在这里一两段中回答普遍适用的灵丹妙药（因为您没有对表结构提供任何见解），您不认为它已经内置到 MySQL 中了吗？

好消息是您可能会发现，对于大多数搜索，即使在大型数据库上，MySQL 也能很好地完成这项工作。

# mysql - 仅连接特定行

> ID：10271965
> 
> 赞同：0
> 
> 时间：2012-04-22T20:46:02.683
> 
> 标签：mysql, join

我正在寻找一个 SQL 查询，它将根据连接行的内容返回 1 或零。

两张表：

事件：

*   event_id
*   描述符

预选赛：

*   qualifier_id
*   event_id
*   qualifier_type
*   价值

每个事件可以有多个限定符。

我目前的查询是：

```
select event_id, if(qualifier_type = 15, 1, 0)
from events 
join qualifiers q using (event_id)
where q.qualifier_type = 15; 
```

在一个完美的世界中，我会很好地规范化这些表格并将不同的限定符放入事件中，但目前这是不可能的。

编辑：目前，此查询仅返回具有关联的行。相反，我需要返回**所有**行和一个额外的列，指定此关联是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:53:39.397

```
SELECT e.event_id, COUNT(q.qualifier_type) AS needs_qualtype_15
  FROM events AS e
  LEFT JOIN qualifiers AS q ON q.event_id = e.event_id AND q.qualifier_type = 15
 GROUP BY e.event_id 
```

这将为您提供所有事件的列表，并指示限定符类型 15 是否与事件相关联。

另一种写法是：

```
SELECT e.event_id, COUNT(q.qualifier_type) AS needs_qualtype_15
  FROM events AS e
  LEFT JOIN
       (SELECT event_id, qualifier_type
          FROM qualifiers WHERE qualifier_type = 15
       ) AS q
    ON q.event_id = e.event_id
 GROUP BY e.event_id; 
```

两种公式都只依赖于`COUNT(expr)`计算非空值。对于具有匹配限定符的事件，COUNT 为 1；对于没有的事件，它是 0。第一个版本通过将限定符类型的条件包含到 ON 连接条件中来压缩查询。第二个版本更清晰，但更冗长。一个好的优化器很有可能会以相同的方式执行这两个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:49:36.547

```
Case
    When qualifier_type = 15 then 0
    Else 1
End 
```

更多在这里，[http://dev.mysql.com/doc/refman/5.0/en/case-statement.html](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:53:27.047

不完全清楚你在追求什么，但试试这个：

```
SELECT DISTINCT
   event_id, 
   CASE WHEN qualifier_type IS NULL THEN  0 ELSE 1 END AS [ColumnName]
FROM events 
LEFT JOIN qualifiers q 
WHERE q.qualifier_type = 15; 
```

# c++ - Visual C++ - get() - 重新定义不同的类型修饰符 c2373

> ID：10271966
> 
> 赞同：0
> 
> 时间：2012-04-22T20:46:21.763
> 
> 标签：c++, dll, mql4

我已经有一段时间了。我需要一个基本的 IRC Ping Pong 函数来在 IRC 服务器 ping 时返回正确的响应。我将函数 get() 的名称更改为其他名称，但仍然出现错误。我想也许函数名称 get() 已经在其中一个包含或其他东西中定义了。

```
#include "stdafx.h"
#include "Ping_Pong.h"
#include <iostream>
#include <ws2tcpip.h>

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

CWinApp theApp;

#define MT4_EXPFUNC __declspec(dllexport)
#pragma comment(lib, "Ws2_32.lib")

class MT4_EXPFUNC IRC {

private:
    char buf[513];
    char rbuf[513];
    char sbuf[513];
    char *tok;
    int recv_bytes;
    int irc_socket;
    struct addrinfo hints;
    struct addrinfo *results;
public:
    char *nick, *user, *host, *chan, *type, *mesg;
    int irc_connect(const char *host, const char *port, const char *nick);
    void socket_err(const char* err_string);
    //int join(const char *channel); 
```

这是相关函数的名称

```
 int __stdcall get();

    char *check(const char* test_str);
    char *pop_arg(char **save_ptr);
    int init_comarg();
    int say(const char *channel, const char *message);
    int sayf(const char *channel, const char *message, ...);
    int mode(const char *channel, const char *mode, char *target);
    //void die();

}; 
```

这是我遇到问题的功能。

```
MT4_EXPFUNC int __stdcall IRC::get()
    {

    memset(rbuf, 0, 513);
    recv_bytes = recv(irc_socket, rbuf, sizeof(rbuf), 0);
    if (recv_bytes <= 0) {
        return -1;
    }
    std::cout << rbuf;
    // Auto-Respond to PING messages.
    if (rbuf[0] == 'P' && rbuf[1] == 'I') {
        tok = strtok(rbuf, "PING :");
        sprintf(buf, "PONG %s", tok-1 );
        send(irc_socket, buf, strlen(buf), 0);
        std::cout << buf;
        memset(buf, 0, 513);
    }
    if ( strstr(rbuf, "PRIVMSG")) {
        memcpy(sbuf, rbuf, 513);
        nick = strtok(sbuf, "!") + 1;
        user = strtok(NULL, "@");
        host = strtok(NULL, " ");
        type = strtok(NULL, " ") - 1;
        chan = strtok(NULL, " ");
        mesg = strtok(NULL, ":");
    }
    return 1;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:04:03.633

在下面链接的教程中，建议使用以下代码创建一个[.def文件：](http://msdn.microsoft.com/en-us/library/28d6s79h%28v=vs.80%29.aspx)

```
Library "Ping_Pong"
Export   get 
```

我删除了 .def 并且它起作用了。

[http://www.xpworx.com/metatrader-mql-articles/mql4-articles/create-your-own-metatrader-extension-dll.php](http://www.xpworx.com/metatrader-mql-articles/mql4-articles/create-your-own-metatrader-extension-dll.php)

# google-app-engine - 需要一本好书和示例应用程序来使用 Grails、Html5/JS 和 Google 应用程序引擎制作云网络移动应用程序

> ID：10271977
> 
> 赞同：2
> 
> 时间：2012-04-22T20:47:56.567
> 
> 标签：google-app-engine, grails, extjs

经过多年/几十年使用任务管理器：Lotus Notes、Outlook、Palm（那是一个很好的）等。现在使用[Appigo](http://www.appigo.com/)，在使用[Toodledo之后](http://www.toodledo.com/)，我和我的一个朋友（都是程序员）厌倦了所有这些与我们个人的 GTD 风格相去甚远，我们决定构建一个，我们可以尽可能多地定制它。我们将向公众开放源代码。从功能和技术的角度来看，Appigo 和 Toodledo 的灵感很大。我们喜欢云上的服务器，浏览器和移动平台上的客户端。我们一直在思考这个问题，但是当我们看到 Grails 并做了一些教程时，巧合的是关于任务管理器的主题，我们说“太好了，我们可以使用这项技术来构建我们的，这听起来很酷”。（至少对于web部分和模型，核心部分）。同样遵循 Appigo 策略，我们计划使用 Google App Engine 来托管后端。在移动端，[Sencha](http://www.sencha.com/)但任何其他框架都可以（Dojo、jQuery 等）。

毫不奇怪，我们的移动和 Web 客户端将主要使用 REST 与服务器通信，我们计划拥有一个服务器端 MVC（Grails）和一个客户端 MVC（如 Sencha 或 Dojo 建议）

我们不想过多地打扰数据库，我们喜欢 Grails 创建模型驱动对象和存储的想法。

我们的项目将是开源的并托管在 github 上供任何人使用。

**好的，这是实际的问题：**

你们知道可以帮助我们完成端到端的好书或示例应用程序或文章吗？当然我们可以一个人去，但是我们会非常喜欢阅读一些书籍，教程首先将这些东西粘合在一起，决定使用的好模式，学习技巧，经验......等等。我们没有使用 Grails 的经验。（但有很多 java 和 javascript web 开发），当然我可以找到关于 Grails 的书籍，但我们想要端到端的东西，有一个专注于实践和模式的好示例。

基本上是一本书或文章，它以某种方式触及了这个主题的一部分**“良好实践和经验，构建类似在谷歌云平台上运行的任务管理器，服务器端使用 Grails 完成，浏览器和移动客户端使用健壮的 HTML5 javascript 框架”。**

有人可以指出我们吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:20:44.867

我已经完成了几个使用 grails + google app 引擎构建的引擎。我的经验是，你将不得不建立实际工作的知识思想。

开始很容易，但是一旦你到达膝盖深处，就会出现一些非常有趣的问题。

话虽如此，我发现有用的主要资源如下：

[http://shop.oreilly.com/product/9780596522735.do](http://shop.oreilly.com/product/9780596522735.do)

[http://www.amazon.com/Groovy-Action-Dierk-Koenig/dp/1932394842](https://rads.stackoverflow.com/amzn/click/com/1932394842)

[http://www.manning.com/gsmith/](http://www.manning.com/gsmith/)

[https://developers.google.com/appengine/docs/java/overview](https://developers.google.com/appengine/docs/java/overview)

上面的链接提供了一个很好的 Java 视图。但是您需要能够将其提炼成常规。

[http://www.grails.org/plugin/app-engine](http://www.grails.org/plugin/app-engine)

最后是 www.google.com

但我发现那里的大多数博客都过时于早期版本的 grails。他们看到的很多问题已经在 2.0 中得到修复，或者根本不再是问题。

# parsing - 解析具有不同长度行的 CSV 文件

> ID：10271980
> 
> 赞同：0
> 
> 时间：2012-04-22T20:48:21.727
> 
> 标签：parsing, csv

我正在调用一个 web 服务，它返回一个逗号分隔的数据集，其中包含不同的列和多个文本限定的行（第一行表示列名）。我需要将每一行插入数据库，同时连接不同的行。

数据是这样返回的

```
"Email Address","First Name","Last Name", "State","Training","Suppression","Events","MEMBER_RATING","OPTIN_TIME","CLEAN_CAMPAIGN_ID"

"scott@example.com","Scott","Staph","NY","Campaigns and activism","Social Media","Fundraiser",1,"2012-03-08 17:17:42","Training" 
```

`State`和之间最多可以有 60 列`Member_Rating`，这些字段中的数据将被连接并插入到一个数据库列中。列表中的前四个字段和后三个字段将始终相同。我不确定解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:37:54.257

我不确定此解决方案是否符合您的需求。但愿如此。这是一个`perl`脚本，`-`除了前四个和后三个之外，所有字段都用空格包围。它使用非标准模块，`Text::CSV_XS`必须使用`CPAN`或类似工具安装。

内容`infile`：

```
"Email Address","First Name","Last Name","State","Training","Suppression","Events","MEMBER_RATING","OPTIN_TIME","CLEAN_CAMPAIGN_ID"
"scott@example.com","Scott","Staph","NY","Campaigns and activism","Social Media","Fundraiser",1,"2012-03-08 17:17:42","Training" 
```

内容`script.pl`：

```
use warnings;
use strict;
use Text::CSV_XS;

my $csv = Text::CSV_XS->new({ 
        allow_whitespace => 1,
});

open my $fh, q[<], $ARGV[0] or die qq[Open: $!\n];

while ( my $row = $csv->getline( $fh ) ) {
        my $concat = join q[ - ], (@$row)[4 .. @$row-4];
        splice @$row, 4, scalar @$row - (3 + 4), $concat;
        $csv->print( \*STDOUT, $row );
        print qq[\n];
} 
```

像这样运行它：

```
perl script.pl infile 
```

具有以下输出：

```
"Email Address","First Name","Last Name",State,"Training - Suppression - Events",MEMBER_RATING,OPTIN_TIME,CLEAN_CAMPAIGN_ID
scott@example.com,Scott,Staph,NY,"Campaigns and activism - Social Media - Fundraiser",1,"2012-03-08 17:17:42",Training 
```

# python - Python：迭代具有不同维度的列表，有没有通用的方法？

> ID：10271981
> 
> 赞同：10
> 
> 时间：2012-04-22T20:48:25.067
> 
> 标签：python, arrays, list, loops, multidimensional-array

```
# 2x3 dimensional list
multidim_list = [ 
                  [1,2,3],
                  [4,5,6],    
                ]
# 2x3x2 dimensional list
multidim_list2 = [ 
                   [ 
                     [1,2,3],
                     [4,5,6],  
                   ],
                   [ 
                     [7,8,9],
                     [10,11,12],  
                   ]
                 ]

def multiply_list(list):
    ... 
```

我想实现一个函数，它将列表中的所有元素乘以 2。但是我的问题是列表可以有不同数量的维度。

有没有一种通用的方法来循环/迭代多维列表，例如将每个值乘以 2？

EDIT1：感谢您的快速回答。对于这种情况，我不想使用 numpy. 递归看起来不错，甚至不需要复制列表，实际上可能非常大。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T20:54:15.703

递归是你的朋友：

```
from collections import MutableSequence
def multiply(list_):
    for index, item in enumerate(list_):
        if isinstance(item, MutableSequence):
            multiply(item)
        else:
            list_[index] *= 2 
```

您可以只做`isinstance(item, list)`而不是`isinstance(item, MutableSequence)`，但后一种方式更具前瞻性和通用性。有关简短说明，请参阅[词汇表。](http://docs.python.org/glossary.html#term-abstract-base-class)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-22T20:54:26.837

您可以使用 numpy：

```
import numpy as np

arr_1 = np.array(multidim_list)
arr_2 = np.array(multidim_list2) 
```

结果：

```
>>> arr_1*2
array([[ 2,  4,  6],
       [ 8, 10, 12]])
>>> arr_2*2
array([[[ 2,  4,  6],
        [ 8, 10, 12]],

       [[14, 16, 18],
        [20, 22, 24]]]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T20:54:20.483

[numpy](http://numpy.scipy.org/)数组开箱即用。

# wordpress - 将 URL 从 postNuke 重写为 Wordpress

> ID：10271984
> 
> 赞同：2
> 
> 时间：2012-04-22T20:48:53.397
> 
> 标签：wordpress, .htaccess, rewrite

我有一个 postNuke 网站，我目前正在转移到 Wordpress，我希望旧网站的格式不会在转换中丢失。我试过玩它，但我无处可去！

当前站点当前将 URL 重写为：

```
domain.com/Article1234.html 
```

其中 1234 是文章的内部 ID 号。

旧站点中的 ID 与新站点中的 ID 相同。新 wordpress 站点中的 URL 当前重写为自定义结构：

```
/%category%/%postname% 
```

这是 .htaccess 文件中的内容：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

需要做什么才能将旧格式重定向到新格式？更改htaccess中的重写规则？301重定向？用于重写的wordpress插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:02:23.920

如果你没有很多文章，你可以使用[`RedirectPermanent`](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#redirectpermanent)，但你必须在你的 .htaccess 文件中自己编写指令。

或者你可以像这样使用 .htaccess

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^Article([0-9]+)\.html$ /index.php?p=$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

这将重写`Article1234.html`为`index.php?p=1234`，然后 wordpress 将进行 301 重定向。

修改永久链接时要小心，因为 .htaccess 可能会被覆盖，为避免这种情况，您可以在 .htaccess 之前放置自定义重写规则`# BEGIN WordPress`。

# c# - Visual Studio 在不需要时建议完全限定的命名空间

> ID：10271985
> 
> 赞同：15
> 
> 时间：2012-04-22T20:48:55.020
> 
> 标签：c#, visual-studio, intellisense

使用 Visual Studio 2010（也可能是 2008），我注意到 Intellisense 会建议枚举的完全限定命名空间的行为。

例如，我可以编写如下代码：

```
element.HorizontalAlignment = HorizontalAlignment.Right;
element.VerticalAlignment = VerticalAlignment.Bottom; 
```

但是当我尝试写它时，它建议我这样写：

```
element.HorizontalAlignment = System.Windows.HorizontalAlignment.Right;
element.VerticalAlignment = System.Windows.VerticalAlignment.Bottom; 
```

这种不必要的额外代码确实会加起来并使其可读性降低，我基本上必须与 Intellisense 抗争以避免它。

这有我的理由吗？我可以把它关掉吗？我认为原因是枚举的名称与属性的名称相同。但这真的不是一个很好的理由。

**编辑：**

这是另一个示例，说明为什么不需要完全限定的命名。

```
using SomeOtherNamespace;

namespace SomeNamespace
{
    public class Class1
    {
        public Class2 Class2 { get; set; }

        public Class1()
        {
            // These all compile fine and none require fully qualified naming.  The usage is context specific.
            // Intellisense lists static and instance members and you choose what you wanted from the list.

            Class2 = Class2.Default;
            Class2.Name = "Name";
            Class2.Name = Class2.Default.Name;
            Class2 = Class2;
        }
    }
}

namespace SomeOtherNamespace
{
    public class Class2
    {
        public static Class2 Default { get; set; }

        // public static Class2 Class2;  (This throws an error as it would create ambiguity and require fully qualified names.)

        // public static string Name { get; set; }  (This also throws an error because it would create ambiguity and require fully qualified names.

        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T20:55:02.973

I *suppose* you are working in `WPF` environment (I see element) and you have *somehow* the reference to `System.Windows.Forms` dll.

My deduction is based on fact that `HorizontalAlignment` can be found in both namespaces:

in [System.Windows.Forms.HorizontalAlignment](http://msdn.microsoft.com/en-us/library/system.windows.forms.horizontalalignment.aspx)

and

in [System.Windows.FrameworkElement.HorizontalAlignment](http://msdn.microsoft.com/it-it/library/system.windows.frameworkelement.horizontalalignment%28v=vs.95%29.aspx)

Having two references pointing to the same type, `VS` asks to specify what namespace *exactly* you mean.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T14:58:39.780

这似乎确实是`same name for property & the type`。
这是`smallest reproducible example`模仿事物的东西（可能更小，但这揭示了更多）......

```
namespace Company.Project.SubProject.Area.Test.AndSomeMore
{
    public class TestClass
    {
        public TestEnum MyEnum { get; set; }
        public TestEnum TestEnum { get; set; }
        public SndTestEnum NewEnum { get; set; }
    }
    public enum TestEnum
    {
        None,
        One,
        Two
    }
    public enum SndTestEnum
    {
        None,
        One,
        Two
    }
}
namespace MyCallerNS
{
    public class MyTestClass : TestClass
    {
        public MyTestClass()
        {
            this.TestEnum = Company.Project.SubProject.Area.Test.AndSomeMore.TestEnum.One;
            this.MyEnum = Company.Project.SubProject.Area.Test.AndSomeMore.TestEnum.Two;
            this.NewEnum = SndTestEnum.None;
        }
    }
} 
```

`MyEnum`和`TestEnum`属性（以枚举为目标）都`TestEnum`提供“完全限定”名称（其他名称与其属性类型不同，但类型与其他属性的名称匹配，因此两者都被“污染”） - 而 SndTestEnum 具有不同的命名（用于类型、属性）和在任何一种情况下都可以正常工作。

...有趣的是，即使您`namespace MyCallerNS`将所有内容删除并放在“长名称空间”下 - 它仍然会添加`AndSomeMore.`到前面。

正如我所见，没有解决方案（缺少 Re# 和 3rd 方工具），
这似乎不是智能感知`as smart as the compiler`，正如@Rick 所建议的那样。

或者更确切地说 - 编译器需要时间来解决问题（手头有所有信息），而智能感知没有那种“深度”和洞察力（我猜，真的很简化 - 我们需要@Eric :) 和做出快速/最简单的选择。

**编辑：**实际上，在我之前
的想法中，更多的是关于每个执行的“工作” - 而智能感知（作为完成“服务”）必须向您提供列表中的所有选择（属性名称和类型） （我没有看到它们都存在，而是一个猜测。并且有一个选择来涵盖两者可能会很痛苦）
所以为了区分它添加了完全限定的名称。
它“失败”的地方（有点）是最后“粘贴”了“短版”——我确实应该这么想。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T10:30:55.953

我发现如果我输入`element.HorizontalAlignment =`，那么 VS2010 会自动建议`System.Windows.HorizontalAlignment`如果你按下 tab 键将被选中。如果不按 Tab 键，而是键入“Ho”来缩小列表，然后按 Tab，您将得到 Horizo​​ntalAlignment。

如果您能够使用[Resharper](http://www.jetbrains.com/resharper/)，那么在输入 '= ' 后，您将看到最明显的选择：

```
HorizontalAlignment.Center
HorizontalAlignment.Left
HorizontalAlignment.Stretch
HorizontalAlignment.Right 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T05:01:13.117

这是编译器比 Intellisense 更智能的情况。

如果您正在访问与其类型同名的属性，例如“public TextAlignment TextAlignment { get; set; }”，则不需要完全限定分配给它的枚举值的命名空间。但是，Intellisense 似乎还不够聪明，无法知道这一点。代码没有资格就可以正常工作，你只需要善于注意和躲避 Intellisense。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T19:51:14.180

除了上面的答案，我还有一些涉及 Microsoft Office 自动化的项目。我的课程结构为

*   `CustomNameSpace.Library.Microsoft.Word.CustomClass1`
*   `CustomNameSpace.Library.Microsoft.Excel.AnotherCustomClass`

当尝试访问 .NET 框架本身的 Microsoft 命名空间中的任何内容时，Intellisense 会强制您完全限定名称。在根冲突的情况下，它还会像这样预先添加全局关键字：`global::Windows.Forms.etc...`.

# jquery - JQuery 悬停动画

> ID：10271986
> 
> 赞同：0
> 
> 时间：2012-04-22T20:48:58.030
> 
> 标签：jquery, css

我有一个 Jquery 新手问题：

这是我的小提琴：http: [//jsfiddle.net/NinjaSk8ter/T8TNP/](http://jsfiddle.net/NinjaSk8ter/T8TNP/)

这是我需要完成的事情：http: [//www.detailpaintinginc.com/index.php](http://www.detailpaintinginc.com/index.php)

我在悬停时遇到问题：

您会注意到较低的颜色框在悬停时都会改变不透明度。

特定子 div（带有类“框”）的不透明度应更改为 0.5 即使我只将鼠标悬停在一个孩子上，它现在的所有孩子的不透明度都在变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:07:12.123

这是一个工作演示[http://jsfiddle.net/pomeh/U4dyE/](http://jsfiddle.net/pomeh/U4dyE/)你不需要Javascript来做这个效果，看看代码:)

HTML 代码

```
<div id="container">
     <div class="wrap">
         <div class="box"></div>
         <div class="box"></div>
     </div>
</div>​ 
```

CSS 代码

```
#container {
    width: 300px;
    height: 300px;    
}

/* DRY :) */
.wrap, .box {
    width: 50px;
    height: 50px; 
    float: left;
    margin: 1px 1px 1px 1px;
}

.box {
    background-color: red;

    opacity: 1;
    filter:alpha(opacity=100);
    /* animation for "mouse out" */
    -webkit-transition: opacity 0.5s linear;  /* Saf3.2+, Chrome */
       -moz-transition: opacity 0.5s linear;  /* FF4+ */
        -ms-transition: opacity 0.5s linear;  /* IE10 */
         -o-transition: opacity 0.5s linear;  /* Opera 10.5+ */
            transition: opacity 0.5s linear;
}

.box:hover {
    opacity: 0.5;
    filter:alpha(opacity=50);
    /* animation for "mouse in" */
    -webkit-transition: opacity 0.5s linear;  /* Saf3.2+, Chrome */
       -moz-transition: opacity 0.5s linear;  /* FF4+ */
        -ms-transition: opacity 0.5s linear;  /* IE10 */
         -o-transition: opacity 0.5s linear;  /* Opera 10.5+ */
            transition: opacity 0.5s linear;
} 
```

​</p>

​JS代码

```
// absolutely none ! :) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:55:58.340

Why not just apply the effect directly to the divs instead of targeting the parent?

```
$('.box').hover(function() {
    $(this).stop().animate({
        "opacity": .5
    }, 50)
}, function() {
    $(this).stop().animate({
        "opacity": 1
    }, 50)
}); 
```

Also, your width on the .wrap element was too narrow which is why the boxes weren't appearing side by side.

**[jsFiddle example](http://jsfiddle.net/j08691/T8TNP/6/)**.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:58:03.283

Your wrapper needs to be a bit wider for the boxes to have room on the same line. Also you should run the hover function on each box, not their parent, to get them to react individually:

```
$(function () {
    $('.wrap .box').hover(function() {
        $(this).stop().animate({'opacity': 0.5}, 50);
    }, function() {
        $(this).stop().animate({'opacity': 1}, 50);
    });
});​ 
```

[http://jsfiddle.net/Codemonkey/T8TNP/7/](http://jsfiddle.net/Codemonkey/T8TNP/7/)

# facebook - 疯狂的 Facebook UI 对话框错误

> ID：10271990
> 
> 赞同：0
> 
> 时间：2012-04-22T20:49:30.293
> 
> 标签：facebook, facebook-graph-api, fb.ui

所以我找不到任何理由看到以下行为，如果有人有一些见解，将不胜感激。

基本上，我使用`FB.UI`JavaScript SDK 向带有链接的用户发送消息。链接以`Guid`, like结尾`http://www.domainname.com/register/33a1a0ae-e0fe-4eb6-9bf9-146d5492e3d6`。这有时有效，但偶尔会因来自 FB 的通用 500 错误而失败。

我已经撤回了`HTTP POST`请求并找到了可以重新创建的解决方案，不幸的是我无法共享访问代码以允许 SO 用户实际运行它（我替换了所有敏感参数）。以下是两个相同的请求，它们仅在`Guid`. 第一个每次都成功，第二个每次都失败。我有很多`Guid`这样做的，如果不可靠的话。

> https://www.facebook.com/dialog/send?access_token=XXX&api_key=XXX&app_id=XXX&channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D5%23cb%3Df2cb8f5c1ca0402% 26origin%3Dhttp%253A%252F%252Fwww.domainname.com%252Ff350c0fd55d5764%26domain%3Dwww.domainname.com%26relation%3Dparent.parent&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php% 3Fversion%3D5%23cb%3Df11a615f3b71192%26origin%3Dhttp%253A%252F%252Fwww.domainname.com%252Ff350c0fd55d5764%26domain%3Dwww.domainname.com%26relation%3Dparent.parent&description=test&display=iframe&link=http%3A%2F.%2 domainname.com%2Fregister%2F**33a1a0ae-e0fe-4eb6-9bf9-146d5492e3d6**&locale=en_US&name=test&next=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter。php%3Fversion%3D5%23cb%3Df22e359d88321ce%26origin%3Dhttp%253A%252F%252Fwww.domainname.com%252Ff350c0fd55d5764%26domain%3Dwww.domainname.com%26relation%3Dparent%26frame%3Df33c13cd4ecc156%26result%3D%2522xxRESULTTOKENxx%2522&picture= http%3A%2F%2Fwww.domainname.com%2Fimg.gif&sdk=joey&to=XXX
> 
> https://www.facebook.com/dialog/send?access_token=XXX&api_key=XXX&app_id=XXX&channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D5%23cb%3Df2cb8f5c1ca0402% 26origin%3Dhttp%253A%252F%252Fwww.domainname.com%252Ff350c0fd55d5764%26domain%3Dwww.domainname.com%26relation%3Dparent.parent&channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php% 3Fversion%3D5%23cb%3Df11a615f3b71192%26origin%3Dhttp%253A%252F%252Fwww.domainname.com%252Ff350c0fd55d5764%26domain%3Dwww.domainname.com%26relation%3Dparent.parent&description=test&display=iframe&link=http%3A%2F.%2 domainname.com%2FFregister%2F**dd171262-dbcc-43c3-b9d1-e37dc53e3520**&locale=en_US&name=test&next=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter。php%3Fversion%3D5%23cb%3Df22e359d88321ce%26origin%3Dhttp%253A%252F%252Fwww.domainname.com%252Ff350c0fd55d5764%26domain%3Dwww.domainname.com%26relation%3Dparent%26frame%3Df33c13cd4ecc156%26result%3D%2522xxRESULTTOKENxx%2522&picture= http%3A%2F%2Fwww.domainname.com%2Fimg.gif&sdk=joey&to=XXX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:44:38.423

我测试了这两个网址：

*   [http://www.domainname.com/register/33a1a0ae-e0fe-4eb6-9bf9-146d5492e3d6](http://www.domainname.com/register/33a1a0ae-e0fe-4eb6-9bf9-146d5492e3d6)
*   [http://www.domainname.com/register/dd171262-dbcc-43c3-b9d1-e37dc53e3520](http://www.domainname.com/register/dd171262-dbcc-43c3-b9d1-e37dc53e3520)

使用 js sdk 发送方法，确实第一个 url 导致来自 facebook 的 500，而第一个设法发送它。我不明白为什么第一个 UID 会触发错误，而第二个不会。

我一直要求提供此类 url 的工作示例的原因是，当您使用 facebook 共享 url 时，他们会废弃该 url（除非它已经在他们的缓存中）并提取该 url 的元数据，以便可以组成提要故事。

由于 Facebook 无法访问我尝试的网址，因此它可能会以某种方式触发该错误。如果我尝试这个网址： http: [//laine.webhop.org/tresendas/register/33a1a0ae-e0fe-4eb6-9bf9-146d5492e3d6](http://laine.webhop.org/tresendas/register/33a1a0ae-e0fe-4eb6-9bf9-146d5492e3d6) 然后它可以工作，我没有收到服务器错误，即使它具有相同的 UID我尝试的第一个网址。

我建议您尝试使用 facebook 可访问的 url，如果您仍然收到某些 UID 的错误，那么您可能应该打开一个新的错误报告。

# xml - 架构有效性错误：元素“游戏”：没有可用于验证根的匹配全局声明

> ID：10271991
> 
> 赞同：1
> 
> 时间：2012-04-22T20:49:30.577
> 
> 标签：xml, xsd

我已经检查了相关问题，并且一直在寻找解决这个问题的方法，但我想我找不到补救措施。这是我的 xml 文件的代码

```
<?xml version="1.0" encoding="UTF-8"?>

<game xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="game.xsd">
<info>
    <name>"Mensch, aergere dich nicht!"</name>
    <description>"Mensch ärgere dich nicht ist ein Gesellschaftsspiel für zwei bis sechs Personen."
                <i>"Das Spielbrett ist in der Einzelausgabe doppelseitig bedruckt" 
                    <b> "sodass Mensch ärgere dich nicht für maximal sechs Spieler"</b>
                </i>
                <b>"auf der einen und maximal vier Spieler auf der anderen Seite spielbar ist."
                </b>    
     </description>
    <started>2012-09-24-06:00</started>
    <players number="2">
        <screenname player="1">"Onat Derebek"</screenname>
        <screenname player="2">"Kutay Derebek"</screenname>
    </players>
    <rounds>1</rounds>
    <winner player="1"></winner>
</info>
<moves> 
<!-- Erste figuren -->
    <roll player="1">6</roll>
    <piece player="1" nr="1" field="26"/>

    <roll player="2">6</roll>
    <piece player="2" nr="5" field="36"/>

    <roll player="1">6</roll>
    <piece player="1" nr="1" field="32"/>

</moves> 
```

这是我的 xsd 文件的代码

```
<element name="game">
    <complexType>
        <sequence>
            <element name="info" type="tns:infoType" maxOccurs="1" minOccurs="1"></element>
            <element name="moves" type="tns:movesType" maxOccurs="1" minOccurs="1"></element>
        </sequence>
    </complexType>
</element>

<complexType name="infoType">
    <sequence>
        <element name="name" type="string" maxOccurs="1"
            minOccurs="0">
        </element>
        <element name="description" type="tns:descriptionType"
            maxOccurs="1" minOccurs="0">
        </element>
        <element name="started" type="dateTime" maxOccurs="1"
            minOccurs="0">
        </element>
        <element name="players" minOccurs="0">
            <complexType>
                <sequence>
                    <element name="screenname" minOccurs="0" maxOccurs="4">
                        <complexType>
                            <simpleContent>
                                <extension base="string">
                                    <attribute name="player"
                                        type="tns:playerType" use="required">
                                    </attribute>
                                </extension>
                            </simpleContent>
                        </complexType>
                    </element>
                </sequence>

                <attribute name="number" type="tns:playerType" use="required"></attribute>
            </complexType>
        </element>
        <element name="rounds" type="int" minOccurs="0"></element>
        <element name="winner" minOccurs="0">
            <complexType>
                <attribute name="player" type="tns:playerType" use="required"></attribute>
            </complexType>
        </element>
    </sequence>
</complexType>

<complexType name="descriptionType" mixed="true">
    <choice maxOccurs="unbounded" minOccurs="1">
        <element name="i" type="tns:descriptionType"></element>
        <element name="b" type="tns:descriptionType"></element>
    </choice>
</complexType>

<complexType name="movesType">
    <choice minOccurs="0" maxOccurs="unbounded">
        <element name="roll" nillable="false">
            <complexType mixed="false">
                <simpleContent>
                    <extension base="tns:simpleIntType">
                        <attribute name="player" use="required">
                            <simpleType>
                                <restriction base="int">
                                    <minInclusive value="1"></minInclusive>
                                    <maxInclusive value="4"></maxInclusive>
                                </restriction>
                            </simpleType>
                        </attribute>
                    </extension>
                </simpleContent>
            </complexType>
        </element>
        <element name="piece">
            <complexType>
                <attribute name="nr" use="required">
                    <simpleType>
                        <restriction base="int">
                            <minInclusive value="1"></minInclusive>
                            <maxInclusive value="16"></maxInclusive>
                        </restriction>
                    </simpleType>
                </attribute>
                <attribute name="player" use="required">
                    <simpleType>
                        <restriction base="int">
                            <minInclusive value="1"></minInclusive>
                            <maxInclusive value="4"></maxInclusive>
                        </restriction>
                    </simpleType>
                </attribute>
                <attribute name="field" use="required">
                    <simpleType>
                        <restriction base="int">
                            <minInclusive value="1"></minInclusive>
                            <maxInclusive value="72"></maxInclusive>
                        </restriction>
                    </simpleType>
                </attribute>
            </complexType>
        </element>
    </choice>
</complexType>

<simpleType name="simpleIntType">
    <restriction base="int">
        <maxInclusive value="6"></maxInclusive>
        <minInclusive value="1"></minInclusive>
    </restriction>
</simpleType>

<simpleType name="playerType">
    <restriction base="int">
        <minInclusive value="1"></minInclusive>
        <maxInclusive value="4"></maxInclusive>
    </restriction>
</simpleType> 
```

我需要在一小时内解决这个问题，因为我必须为大学项目上传

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:59:00.680

我对在德国童年假期玩“Mensch ärgere dich nicht”有着美好的回忆，事实上，我们带了一套回家，有时在拜访父母家时仍然会出现。它类似于在英格兰被称为 Ludo 的游戏，但规则的细微差别意味着它的效果要好得多。

> 我需要在一小时内解决这个问题

那么希望你已经学到了关于时间管理的有用课程。

显然，根元素（游戏）有一个元素声明。您没有向我们展示架构文档的 xs:schema 元素，因此命名空间可能存在问题；但我认为更可能的解释是您错误地调用了模式验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:22:33.420

我认为您的问题是在您的 XSD 中，您将其`http://www.w3.org/2001/XMLSchema`用作默认命名空间，因此所有类型都在该命名空间中定义，而您的 XML 文件不使用任何命名空间。

尝试`http://www.w3.org/2001/XMLSchema`与前缀相关联（例如 xmlns:xs="http://www.w3.org/2001/XMLSchema"`）并在没有目标命名空间的情况下定义您的模式 - 这种方式对我来说很好。

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="game">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="info" type="infoType" maxOccurs="1" minOccurs="1"></xs:element>
          <xs:element name="moves" type="movesType" maxOccurs="1" minOccurs="1"></xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:complexType name="infoType">
    <xs:sequence>
      <xs:element name="name" type="xs:string" maxOccurs="1"
          minOccurs="0">
      </xs:element>
      <xs:element name="description" type="descriptionType"
          maxOccurs="1" minOccurs="0">
      </xs:element>
      <xs:element name="started" type="xs:dateTime" maxOccurs="1"
          minOccurs="0">
      </xs:element>
      <xs:element name="players" minOccurs="0">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="screenname" minOccurs="0" maxOccurs="4">
              <xs:complexType>
                <xs:simpleContent>
                  <xs:extension base="xs:string">
                    <xs:attribute name="player"
                        type="playerType" use="required">
                    </xs:attribute>
                  </xs:extension>
                </xs:simpleContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>

          <xs:attribute name="number" type="playerType" use="required"></xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="rounds" type="xs:int" minOccurs="0"></xs:element>
      <xs:element name="winner" minOccurs="0">
        <xs:complexType>
          <xs:attribute name="player" type="playerType" use="required"></xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="descriptionType" mixed="true">
    <xs:choice maxOccurs="unbounded" minOccurs="1">
      <xs:element name="i" type="descriptionType"></xs:element>
      <xs:element name="b" type="descriptionType"></xs:element>
    </xs:choice>
  </xs:complexType>

  <xs:complexType name="movesType">
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element name="roll" nillable="false">
        <xs:complexType mixed="false">
          <xs:simpleContent>
            <xs:extension base="simpleIntType">
              <xs:attribute name="player" use="required">
                <xs:simpleType>
                  <xs:restriction base="xs:int">
                    <xs:minInclusive value="1"></xs:minInclusive>
                      <xs:maxInclusive value="4"></xs:maxInclusive>
                  </xs:restriction>
                </xs:simpleType>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="piece">
        <xs:complexType>
          <xs:attribute name="nr" use="required">
            <xs:simpleType>
              <xs:restriction base="xs:int">
                <xs:minInclusive value="1"></xs:minInclusive>
                <xs:maxInclusive value="16"></xs:maxInclusive>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
          <xs:attribute name="player" use="required">
            <xs:simpleType>
              <xs:restriction base="xs:int">
                <xs:minInclusive value="1"></xs:minInclusive>
                  <xs:maxInclusive value="4"></xs:maxInclusive>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
          <xs:attribute name="field" use="required">
            <xs:simpleType>
              <xs:restriction base="xs:int">
                <xs:minInclusive value="1"></xs:minInclusive>
                  <xs:maxInclusive value="72"></xs:maxInclusive>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>

  <xs:simpleType name="simpleIntType">
    <xs:restriction base="xs:int">
      <xs:maxInclusive value="6"></xs:maxInclusive>
        <xs:minInclusive value="1"></xs:minInclusive>
    </xs:restriction>
  </xs:simpleType>

  <xs:simpleType name="playerType">
    <xs:restriction base="xs:int">
      <xs:minInclusive value="1"></xs:minInclusive>
        <xs:maxInclusive value="4"></xs:maxInclusive>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

# android - Android：action_send put extra_stream 从 res/drawable 文件夹导致崩溃

> ID：10271993
> 
> 赞同：0
> 
> 时间：2012-04-22T20:49:41.433
> 
> 标签：android, drawable, send

我正在创建一个游戏，并试图让用户通过 text/facebook/etc 分享他们的胜利。我正在使用下面的代码从我的 res/drawable 文件夹中获取图像。我很确定我做对了，但是在我选择发送方法（例如 facebook）后，我的应用程序不断崩溃。任何帮助将不胜感激。

```
Intent ShareIntent = new Intent(android.content.Intent.ACTION_SEND);
ShareIntent.setType("image/jpeg");
Uri winnerPic = Uri.parse("android.resource://com.poop.pals/" + R.drawable.winnerpic);
ShareIntent.putExtra(Intent.EXTRA_STREAM, winnerPic);
startActivity(ShareIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:39:04.200

您的应用只能通过资源 api 访问 Android 的资源，文件系统上没有您可以通过其他方式打开的常规文件。

您可以做的是将文件从`InputStream`您可以获得的文件复制到其他应用程序可以访问的位置的常规文件中。

```
// copy R.drawable.winnerpic to /sdcard/winnerpic.png
File file = new File (Environment.getExternalStorageDirectory(), "winnerpic.png");
FileOutputStream output = null;
InputStream input = null;
try {
    output = new FileOutputStream(file);
    input = context.getResources().openRawResource(R.drawable.winnerpic);

    byte[] buffer = new byte[1024];
    int copied;
    while ((copied = input.read(buffer)) != -1) {
        output.write(buffer, 0, copied);
    }

} catch (FileNotFoundException e) {
    Log.e("OMG", "can't copy", e);
} catch (IOException e) {
    Log.e("OMG", "can't copy", e);
} finally {
    if (input != null) {
        try {
            input.close();
        } catch (IOException e) {
            // ignore
        }
    }
    if (output != null) {
        try {
            output.close();
        } catch (IOException e) {
            // ignore
        }
    }
} 
```

# visual-studio-2010 - Visual Basic 2010：修复“断断续续”的图形？

> ID：10271995
> 
> 赞同：0
> 
> 时间：2012-04-22T20:49:45.830
> 
> 标签：visual-studio-2010, graphics, flicker

我的基本问题在于，我正在绘制的图像经常会“闪烁”。除此之外，我的程序流程完全按照我的意愿工作，如下所示：

*   使用 G.Clear，清除所有先前的屏幕实例。

*   绘制实体/形状。

*   为下一个实体的位置执行功能，并重新启动流程。

（这基本上显示了一个运动中的钟摆，不幸的是它强烈地闪烁。）

我相信问题纯粹在于 G.Clear 造成了波动。

如果这不够简洁，我深表歉意，并提前感谢任何可以在这里帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:56:38.133

Try switching doublebuffering on.

# regex - powershell 正则表达式 - 提取函数名称 C 源程序

> ID：10271998
> 
> 赞同：0
> 
> 时间：2012-04-22T20:50:23.790
> 
> 标签：regex, powershell

我需要提取作为脚本参数提供的 C 源文件中定义的函数的名称。我对 PowerShell 不是很熟悉，但不应该是这样的：

```
If ($FileExists -eq $True)
{
     select-string $args[0] -pattern "\(void\|double\|char\|int\) \.*(.*)"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:33:53.893

我将定义您要在其中搜索并在 Include 参数中使用它们的文件扩展名列表，然后通过管道传输到 select-string 并提取捕获组匹配项。

```
dir -Path C:\c-program -Include *.h, *.c -Recurse | Select-String -Pattern '(void|double|char|int) (\w+)\(' | % {$_.Matches[0].Groups[2].Value} 
```

这是一个使用来自维基百科的函数名称的罐头示例：

```
'void incInt(int *y)','int main(int argc, char* args[])','int subtract(int x, int y)' | Select-String -Pattern '(void|double|char|int) (\w+)\(' | % {$_.Matches[0].Groups[2].Value} 
```