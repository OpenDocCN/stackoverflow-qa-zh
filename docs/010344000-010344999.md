# StackOverflow 问答 10344000-10344999

# ruby-on-rails - 运行 rails 服务器时出错 - 如何更改 ruby gem 环境的默认 ruby ？

> ID：10344000
> 
> 赞同：2
> 
> 时间：2012-04-27T02:25:13.103
> 
> 标签：ruby-on-rails, ruby, rubygems

所以我遇到了这个问题（[创建 Rails 模型时出现语法错误](https://stackoverflow.com/questions/7753021/syntax-error-when-creating-a-rails-model)），它有一个类似于我的错误。我从中推断出我的问题是使用 Ruby 1.8 而不是 1.9。我尝试按照其中一个答案中的说明卸载 gem 并更新 ruby​​gems，但这并没有解决问题。我还尝试通过 rvm 将默认 ruby​​ 设置为 1.9 - 它可以工作，但不能解决问题。

当我运行“gem env”时，我得到以下信息：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /usr/bin/ruby1.8
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /usr/lib/ruby/gems/1.8
     - /home/owner/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

在 usr/bin 中，我有一个“ruby”，它是 usr/bin/ruby1.9.1 的符号链接。

基本上，**我需要知道如何更改这里使用的红宝石（至少我认为这会解决我的问题）。**

我的操作系统是 Linux Mint 12。Rails --version 返回“Rails 3.2.3”

我的完整错误如下（来自在项目目录中运行“rails s”）：

```
=> Booting WEBrick
=> Rails 3.2.3 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/usr/lib/ruby/gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load': /media/Windows/Users/Owner/Projects/rails_projects/sample_app/config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_sample_app_session'
                              ^
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:588
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:587:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:587
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `send'
    from /usr/lib/ruby/gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /media/Windows/Users/Owner/Projects/rails_projects/sample_app/config/environment.rb:5
    from /media/Windows/Users/Owner/Projects/rails_projects/sample_app/config.ru:4:in `require'
    from /media/Windows/Users/Owner/Projects/rails_projects/sample_app/config.ru:4
    from /usr/lib/ruby/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /usr/lib/ruby/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /media/Windows/Users/Owner/Projects/rails_projects/sample_app/config.ru:1:in `new'
    from /media/Windows/Users/Owner/Projects/rails_projects/sample_app/config.ru:1 
```

我的宝石文件是：

```
source 'https://rubygems.org'

gem 'rails'
gem 'bootstrap-sass'
gem 'tilt'
gem 'execjs'
gem 'therubyracer', :platforms => :ruby

group :development do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails'
  gem 'guard-rspec', '0.5.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
  gem 'rspec-rails'
  gem 'capybara', '1.1.2'
  # System-dependent gems# Test gems on Windows
    group :test do
    gem 'rspec-rails'
    gem 'capybara', '1.1.2'
    gem 'rb-fchange', '0.0.5'
    gem 'rb-notifu', '0.0.4'
    end 
    gem 'guard-spork', '0.3.2'
    gem 'spork', '0.9.0'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

小路：

> echo $PATH /usr/bin/rubycurrent:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/用户/游戏

“哪个红宝石”返回：

```
/usr/bin/rubycurrent/ruby 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T18:58:05.930

所以我终于弄明白了。这就是我所做的。

首先，为了排除故障，我卸载了 ruby​​ 1.8。之后我再次尝试运行**rails s**并得到以下错误：

```
 bash: /usr/local/bin/rails: /usr/bin/ruby1.8: bad interpreter: No such file or directory 
```

当我检查**/usr/local/bin/rails**脚本时，我看到它在顶部包含**/usr/bin/ruby1.8 。**在尝试了很多不同的方法让它工作之后，唯一有效的方法是卸载 ruby​​、rubygems、rails 和 rvm，然后重新安装它们（我不得不这样做几次......最后它工作了一次）。

您可以尝试下面列出的内容，看看它是否适合您： http: [//fatal-errors.com/ubuntu-10-ruby-1-9-rails-3-not-working-solved/99008](http://fatal-errors.com/ubuntu-10-ruby-1-9-rails-3-not-working-solved/99008)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:29:08.873

编辑您的终端配置文件（~/.bashrc、~/.zshrc 等）并确保包含 ruby​​ 1.9 的目录出现在 /usr/bin 之前的路径变量中。一般来说，修改 /usr/bin 是不好的，因为这里的东西通常是系统依赖。

# iphone - 在 -(BOOL)application:didFinishLaunchingWithOptions 中获取设备令牌：

> ID：10344003
> 
> 赞同：1
> 
> 时间：2012-04-27T02:26:08.680
> 
> 标签：iphone, objective-c, ios, apple-push-notifications, devicetoken

我不知道如何在里面获取设备令牌 (APN)

```
- (BOOL)application:didFinishLaunchingWithOptions: 
```

我可以在 AppDelegate 中获取设备令牌的唯一地方是

```
- (void)application:didRegisterForRemoteNotificationsWithDeviceToken: 
```

其中 application:didRegisterForRemoteNotificationsWithDeviceToken 将异步运行或在 didFinishLaunchingWithOptions 之后运行。那么，有没有办法在 didFinishLaunchingWithOptions 中获取设备令牌？因为我想将它传递到从 didFinishLaunchingWithOptions 推送的 ViewController 中。

这是我的示例代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    for (id key in launchOptions) {
        NSLog(@"Key: %@, Value %@", key, [launchOptions objectForKey: key]);
    }
    AddViewController *avc = [[AddViewController alloc] init];
    avc.managedObjectContext = self.managedObjectContext;
    avc.pushToken = self.pushToken;
    UINavigationController *uinav = [[UINavigationController alloc] init ];

    [uinav pushViewController:avc animated:YES];
    [_window addSubview:uinav.view];
    [avc release];

    [self.window makeKeyAndVisible];

    // Let the device know we want to receive push notifications
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
     (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];
    return YES;
}

- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSLog(@"My token is: %@", deviceToken);
    self.pushToken = [NSString stringWithFormat:@"%@", deviceToken];
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:34:41.040

`application:didRegisterForRemoteNotificationsWithDeviceToken:`是您获得当前设备令牌的唯一机会。但是，您可以将结果存储`NSUserDefaults`并在启动时从那里读取。大多数情况下，如果应用程序尚未卸载/重新安装，则设备令牌在两次启动之间保持不变。

# php - php中的ODBC错误？

> ID：10344005
> 
> 赞同：-1
> 
> 时间：2012-04-27T02:26:16.427
> 
> 标签：php, odbc, azure-sql-database, unixodbc

嗨，我想知道以下错误是什么意思，为什么我会得到它？

`[unixODBC][Driver Manager]Data source name not found, and no default driver specified`

我的论点`odbc_conntect()`——`"Driver={SQL Server Native Client 10.0};Server=tcp:database.windows.net;Database=someDB;Encrypt=yes;", 'user@database', 'passwd'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:09:25.550

它不起作用的原因是我没有安装正确的驱动程序或`unixODBC`设置`dsn`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:29:45.823

你在 UNIX 上运行这个 prog 并且字符串是基于 windows 的

# c# - 从 ItemsControl.DataTemplate 访问 ItemsControl.Items

> ID：10344008
> 
> 赞同：0
> 
> 时间：2012-04-27T02:26:50.343
> 
> 标签：c#, silverlight

`ItemsControl.Items`是否可以通过绑定以某种方式将集合传递给控件中的每个单独项目？

我想要做的看起来像这样（特别是 WorkspaceCubes 绑定）：（它目前不起作用，因为您无法绑定到 an`ItemsControl`或其`Items`）

```
<ItemsControl x:Name="workspace" ItemsSource="{Binding Path=CubeViewModels}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas Background="SkyBlue" Margin="0"></Canvas>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Canvas>
                <Sift:CubeView WorkspaceCubes="{Binding ElementName=workspace, Path=Items}"  DataContext="{Binding}"></Sift:CubeView>
            </Canvas>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:29:17.193

不确定您的目的，但您可以尝试：

```
<ItemsControl x:Name="workspace" ItemsSource="{Binding Path=CubeViewModels}" DataContext="{Binding Path=CubeViewModels}"> 
    <ItemsControl.ItemsPanel> 
        <ItemsPanelTemplate> 
            <Canvas Background="SkyBlue" Margin="0"></Canvas> 
        </ItemsPanelTemplate> 
    </ItemsControl.ItemsPanel> 
    <ItemsControl.ItemTemplate> 
        <DataTemplate> 
            <Canvas> 
                <Sift:CubeView WorkspaceCubes="{Binding}"></Sift:CubeView> 
            </Canvas> 
        </DataTemplate> 
    </ItemsControl.ItemTemplate> 
</ItemsControl> 
```

# php - 如何使用 javascript 更新 php 变量

> ID：10344020
> 
> 赞同：0
> 
> 时间：2012-04-27T02:29:21.857
> 
> 标签：php, javascript, ajax, forms

不确定我应该寻找，这是我需要完成的。

我正在创建一个股票交易模拟游戏。

我创建了一个 php 函数，它出现在我的页面代码中（其中 AAPL 是符号）：

```
<?php displayQuoteDetailed(AAPL); ?> 
```

我想在我的侧边栏中有一个文本输入和一个提交按钮，以更改 php 函数上的符号以显示报价，而无需重新加载整个页面。

从我的谷歌搜索来看，这似乎可以通过使用 javascript 来完成，但我无法准确找到如何更改 php 函数中使用的符号以及如何在不重新加载页面的情况下更新股票报价。谢谢你的帮助！我边走边学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:33:11.750

您需要使用 AJAX（XMLHttpRequest 除非使用 IE）。如果您是新手并且希望您的应用程序可以在大多数 Web 浏览器上运行，请使用 jQuery：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

# algorithm - 是否可以在 O(1) 中计算 Number 中的 Set 位数？

> ID：10344022
> 
> 赞同：0
> 
> 时间：2012-04-27T02:29:36.097
> 
> 标签：algorithm

我在一次面试中被问到上述问题，面试官非常肯定答案。但我不确定。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:32:40.327

当然。显而易见的蛮力方法只是一个大查找表，其中输入数字的每个可能值都有一个条目。如果数字很大，这不是很实用，但仍然足以证明它是可能的。

编辑：有人提出这完全是胡说八道，基本上任何算法都可以这样说。

在有限的程度上，这是一个公平的说法——但限制是如此严重，以至于对于大多数算法来说它仍然完全没有意义。

我最初的观点（至少在我记得的情况下）是人口计数大约相当于许多其他操作，例如我们通常假设为 O(1) 的加法和减法。

在硬件层面，单周期`POPCNT`指令的电路可能比单周期指令更容易`ADD`。仅举一个例子，对于任何实际大小的数据字，我们可以在 4 位块上并行使用表查找，然后将这些块的结果相加。即使使用不太可能的最坏情况假设（例如，为每个表单独存储），这仍然很*容易*在现代 CPU 中实现——事实上，它可能至少比提到的单周期加法或减法更简单一些以上¹。

这与许多其他算法形成鲜明对比。举一个明显的例子，让我们考虑排序。即使是大多数人能想象到的最琐碎的排序——2 个项目，每个 8 位，我们已经在一个 64 KB 的查找表中获得恒定的复杂性。*早*在我们可以做一个相当简单的排序（例如，100 个项目）之前，我们需要一个查找表，其中包含的数据项比宇宙中的原子多得多*。*

从相反的方向来看，在某些时候，基本上*没有*O(1) 是肯定的。让我们考虑最简单的操作。对于 N 位 CPU，按位`OR`通常实现为一组`OR`并行的 N 个门。与加法不同，一位与另一位之间没有交互，因此对于任何实际大小的 CPU，这很容易在一条指令中执行。

尽管如此，如果我按位指定`OR`每个操作数为 100 petabit，那么甚至没有任何方法可以接近实际的方法来完成具有恒定复杂性的工作。使用通常的并行`OR`门方法，我们最终得到（除其他外）300 petabit 的输入和输出线——这个数字甚至完全使最大 CPU 上的引脚数量*相形见绌。*

在合理的硬件上，`OR`对 100 petabit 操作数进行按位运算需要一段时间（更不用说相当多的硬盘空间了）。如果我们将其增加到 200 petabit 操作数，时间可能会（大约）翻倍——所以从这个角度来看，这是一个 O(N) 操作。显然，对于其他“微不足道”的操作（如加法、减法、按位、按`AND`位等`XOR`）也是如此。

尽管如此，除非您有非常*具体*的指示说您将要处理非常庞大的操作数，否则您通常会将其中的每一个都视为恒定复杂性操作。从这些方面来看，就在固定时间执行的难度而言，POPCNT 指令一方面介于按位`AND`/ `OR`/`XOR`和另一方面的加法/减法之间。

* * *

[1\. 你可能想知道它怎么可能比在执行一些其他操作之后`add`实际包含 an 时更简单。`add`如果是这样，赞一个——这是一个很好的问题。]

[答案是因为它只需要一个*小得多的*加法器。例如，一个 64 位 CPU 需要一个半加器和 63 个全加器。在简单的实现中，您执行按位加法——即，将一个操作数的位 0 添加到另一个操作数的位 0。这会生成一个输出位和一个进位位。该进位位成为下一对位的加法输入。有一些技巧可以在某种程度上将其并行化，但是野兽的本质（可以这么说）是位串行的。]

[使用 POPCNT 指令，我们在进行单独的表查找后有一个加法，*但*我们的结果仅限于输入字的大小。给定相同大小的输入（64 位），我们的最终结果不能大于 64。这意味着我们只需要一个 6 位加法器而不是 64 位加法器。]

[由于如上所述，加法基本上是位串行的，这意味着`POPCNT`指令末尾的加法基本上*比*普通加法快得多。具体来说，它在操作数大小上是对数的，而简单的加法在操作数大小上大致是线性的。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:24:20.637

一些处理器可以在一条指令中完成，显然对于有限大小的整数。查找 POPCNT 助记符以获取更多详细信息。

对于无限大小的整数，显然您需要读取整个输入，因此下限为 O(n)。

面试官可能是指位计数技巧（第一个谷歌结果如下）：[http ://www.gamedev.net/topic/547102-bit-counting-trick---new-to-me/](http://www.gamedev.net/topic/547102-bit-counting-trick---new-to-me/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T02:51:10.580

如果位大小是固定的（例如 32 位或 64 位机器的自然字长），您可以迭代这些位并在 O(1) 时间内直接计算它们（尽管肯定有更快的方法来做到这一点） . 对于任意精度数（BigInt 等），答案必须是否定的。

# java - 如果您使用游戏引擎和 3D 建模软件，那么编程语言有什么用？

> ID：10344023
> 
> 赞同：3
> 
> 时间：2012-04-27T02:29:38.283
> 
> 标签：java, 3d, game-engine

我正在创建一个游戏，到目前为止，我已经在 J​​ava 项目上工作了大约一个月。我非常了解 Java，并且在我的游戏中的所有内容都在工作，直到实现它的 3D 建模。

我正在学习 3DS Max 来创建粗略的 3D 模型，我并不关心模型是否好看，只要我创建一个可以运行的游戏。我阅读了很多关于碰撞检测、人工智能、动画、场景图和许多其他方面的 Java 3D API。起初我的印象是我会创建 3D 模型并将它们导入到我的 Java 程序中，而其他一切都将使用 Java 编码来处理。我刚刚意识到我可以使用游戏引擎来完成所有这些工作，并且我可以看到使用它们后整个过程会简单得多，但我完全不确定我的 Java 代码在整个设计中的作用。

我相信我可以将模型从 3DS Max 导入到我的游戏引擎中，但我不知道接下来会发生什么。我的 Java 代码在游戏引擎中发挥什么功能？游戏引擎应该会为游戏创建所有图形元素，但我认为其中很多，例如动画、照明、相机等是在 3D 建模软件中完成的？另外，我在哪里为我的游戏创建 GUI？

所有的 Swing 组件，至少就我所见，无法与 3D 建模环境中的图形进行比较，并且与 3D 环境形成鲜明的、不复杂的对比。我知道这个问题似乎是主观的，但我仍在寻找一个更客观的答案，希望能详细说明我上面列出的 3 个核心组件（或其他必要组件）之间的一般使用差异（代码、3D 建模，游戏引擎）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:58:57.650

好吧，你仍然需要一个游戏引擎来为你的游戏提供动力，把你的模型和纹理渲染成一个带有物理、碰撞和人工智能的实际游戏。您的建模程序不会*为*您执行此操作。现在，如果您决定自己实际编写游戏引擎代码，您将在其中度过很多不眠之夜——这是***很多***工作。但正如您所指出的，您可能会使用其中一种可用的游戏引擎来减少您需要做的编码量。

您的问题是有效的，因为您可以选择用多种语言中的任何一种编写的游戏引擎，那么为什么选择 Java？除了你，没有人能真正回答这个问题——但 Java 的优点之一是可移植性。如果您想创建一个可以在各种平台上运行的游戏，那么 Java 绝对不是一个糟糕的选择。另一个优势是可以重用的大量可用代码，通常以低成本（或无成本）。

这实际上取决于您对产品的最终愿景以及您的目标受众。

# php - 即使我添加了 session_start()，我设置的会话变量也会出现未定义的错误

> ID：10344026
> 
> 赞同：0
> 
> 时间：2012-04-27T02:29:46.487
> 
> 标签：php, session

我通过管理面板登录到这个系统，然后加载页面顶部有 session_start() 的字体结束页面，并尝试回显我在管理员登录发生时设置的会话变量。但它给了我会话变量上未定义的索引错误。但这些是在管理区域打印的。我不知道为什么会这样。

在前端

```
 session_start();
 echo("username = ".$_SESSION['username']."<br />"); 
```

ps：重要 - 它以前工作过。这是我在许多服务器中安装的系统，我以前从未遇到过此错误。即使在这台服务器上它几天前也能正常工作。也许客户改变了什么？服务器配置值？我不知道。非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:33:31.943

session_start(); 之前的文件中是否有任何空白？这是会话问题的最常见原因... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:34:25.977

而不是仅仅这样`session_start();`做`if(!isset($_SESSION)) session_start();`

# erlang - 为什么 Erlang 在分布式应用程序中没有变得非常流行？

> ID：10344027
> 
> 赞同：8
> 
> 时间：2012-04-27T02:29:51.830
> 
> 标签：erlang

我最近一直在学习 Erlang。Erlang 对于实现分布式应用程序非常强大。

我认为 Erlang 的核心优势是：

1.  面向并发，不需要锁
2.  “让它崩溃”的设计理念，避免做太多防御性编码
3.  代码热交换，应用分发变得简单

虽然有一些项目使用了 Erlang，例如 CouchDB、RabbitMQ 等，但与 Java/Python 相比，Erlang 的影响仍然微不足道。大多数人在设计分布式应用程序时会考虑 Hadoop/MapReduce，而不是 Erlang。Erlang有什么问题？

# html - :first-letter CSS - 将其限制为模板中文章的首字母

> ID：10344030
> 
> 赞同：0
> 
> 时间：2012-04-27T02:30:23.657
> 
> 标签：html, css, css-selectors

我无法在此示例中仅定位第一个字母：http: [//jsfiddle.net/gB94x/](http://jsfiddle.net/gB94x/)

显然，“阅读更多”也不应该有首字下沉。

HTML 不能更改，它是固定模板的一部分。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:33:23.037

`.od_article>p`引用所有`p`直接子级的标签，这`.od_article`就是你的问题。你只想要第一个`p`标签。更改`.od_article>p:first-letter`为`.od_article>p:first-of-type:first-letter`如下更新的小提琴。

[http://jsfiddle.net/gB94x/1/](http://jsfiddle.net/gB94x/1/)

**更新：**

`:first-of-type`不幸的是，我不相信 IE7 支持。我不确定它是否支持`:first-child`，但作为参考，`:first-child`如果它应用的元素是其父元素的第一个子元素，则匹配。

我想不出一个解决方法，但查看 HTML 时，`p`您想要更改其第一个字母的有 class `CaptionPic1`。如果第一段总是有这个类，就用那个，所以`.CaptionPic1:first-letter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:37:13.960

您的选择器：

```
.od_article>p:first-letter 
```

正在尝试将样式应用于其父母拥有班级的*每个* 孩子的第一个字母。`p``od_article`

您可以使用它来获取第一个`p`元素：

```
.od_article>p:first-of-type:first-letter 
```

或者，如果您需要支持像 IE7和IE8`:first-of-type`这样的旧浏览器，它们不理解 CSS3 伪类（例如使用这样的兄弟选择器：`h1``p``h1``:first-child`

```
.od_article>h1:first-child+p:first-letter 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/gB94x/6)

# flash - 无法在 Windows 7（32 位）上安装 Adob e Flash Builder 4.6

> ID：10344032
> 
> 赞同：0
> 
> 时间：2012-04-27T02:30:42.637
> 
> 标签：flash, adobe, extract, builder

我已经下载了Adobe Flash Builder 4.6 安装程序，但是当我双击它时，它开始解压文件，然后提示“解压文件时出错，请尝试重新下载Adobe Flash Builder 4.6 安装程序”。

我用谷歌搜索了这个问题，这篇文章[http://forums.adobe.com/thread/837849](http://forums.adobe.com/thread/837849)说 Adob​​e Flash Builder 默认将文件提取到桌面，我们可以通过以下方式更改提取位置

"*幸运的是，有一个解决方法： - 打开一个命令窗口，然后 cd 到您下载的自解压 exe 的位置 - 使用 /d 选项（目标）运行该 exe，这允许您自定义路径安装程序被提取。

就我而言，完整的语法字符串是这样的：FlashBuilder_4_5_LS10.exe /dc:\customExtractionFolder*"

我按照上面的说明进行操作，不幸的是，我仍然遇到同样的错误。能不能帮帮我，谢谢！！！这个问题困扰了我好几天！

[编辑：我在这里http://forums.adobe.com/message/4172311](http://forums.adobe.com/message/4172311)找到了同样问题的帖子，但没有解决......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:38:02.783

好的，让我回答我自己的问题。

我尝试在不同的平台和不同的计算机（windows 7、32/64bit）上安装 Adob​​e Flash Builder 4.6，我得到了同样的错误！（真是又气又恼！）然后，偶尔重启电脑，再运行一遍，解压安装成功！

我不知道为什么！土坯！！！

# database - windows phone 7 在数据库中保存图像和声音

> ID：10344035
> 
> 赞同：0
> 
> 时间：2012-04-27T02:30:50.113
> 
> 标签：database, image, windows-phone-7, audio, local-database

我目前正在做我最后一年的项目。我必须创建一个 Windows 手机应用程序。我的应用程序允许用户录制声音和图像并将其存储在他们的 Windows Phone 数据库中。我知道为了让我们在使用 SQL ce 的数据库中存储图像和声音，我们必须将它们转换为字节。我目前面临的问题是，一旦图像被保存并且当我尝试检索它时，图片就是黑色图像。我也不确定如何将声音保存在数据库中。如果不是很麻烦，可以帮帮我吗？我对 Windows Phone 开发真的很陌生，我不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:38:06.617

我将所有内容保存到隔离存储中，并将所述数据的位置存储在数据库中。你会发现这更容易:-)

# css - Webkit CSS 过渡旋转不旋转

> ID：10344036
> 
> 赞同：2
> 
> 时间：2012-04-27T02:31:05.877
> 
> 标签：css, webkit

我很难使用 CSS 转换在 webkit 中将项目旋转​​ 360 度。

我创建了一个 JS Fiddle 来展示我正在尝试做的事情：http: [//jsfiddle.net/russelluresti/PnTk8/2/](http://jsfiddle.net/russelluresti/PnTk8/2/)

过渡应该分两步进行。首先，该项目应仅沿 Y 轴旋转 1/2 圈。然后，一旦过渡完成，它应该向相反的方向旋转一整圈并缩小到原始尺寸的 1/2。我遇到的问题是第二个转换只是缩放而不是旋转，即使`rotateY(-360deg)`and的旋转值`rotateY(0deg)`应该导致完全旋转。

这只是一个概念验证，所以我目前只针对 webkit。但是，我想坚持使用过渡，而不是关键帧动画。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:35:35.760

据我所知，从 rotateY(-180deg) 旋转到 rotateY(-360deg) 与 rotateY(0) 的状态相同。让我们这样说吧：想象你将一张纸朝同一个方向翻转两次，与一开始的状态完全一样。结果，浏览器将其视为“根本没有变化”，因此在旋转时没有过渡。

另一个例子会使这一点更清楚：

给定度数 根据您的情况设置，rotateY(-90deg) => rotateY(-300deg) => rotateY(60deg) 将同样工作，第二个转换不会开始。因为相对于原始状态：rotateY(0), rotateY(-300deg) 与 rotateY(60deg) 处于相同状态。

# c# - Razor 条件块中表单元素的条件输出

> ID：10344037
> 
> 赞同：1
> 
> 时间：2012-04-27T02:31:13.957
> 
> 标签：c#, asp.net-mvc, razor, syntax, conditional-statements

这有效：

```
@if (ViewBag.SkipPhone == null)
{
     <span>@Html.LabelFor(model => model.Phone)</span>
     <span>@Html.TextBoxFor(model => model.Phone)</span>
     <span>@Html.ValidationMessageFor(model => model.Phone)</span>
} 
```

但我想做这样的事情：

```
@if (ViewBag.SkipPhone == null)
{
                Html.LabelFor(model => model.Phone);
                Html.TextBoxFor(model => model.Phone);
                Html.ValidationMessageFor(model => model.Phone);                
} 
```

我了解 HTML 助手输出字符串，这就是第二个不起作用的原因。但是有没有合适的方法来做这种事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:56:22.303

这个应该可以...

```
@if (ViewBag.SkipPhone == null)
{
     @Html.LabelFor(model => model.Phone)
     @Html.TextBoxFor(model => model.Phone)
     @Html.ValidationMessageFor(model => model.Phone)              
} 
```

正如 Andrew Barber 在下面评论的那样，您在每一行之前都缺少 @ 并且在这种情况下您要添加分号（不需要它们）...

我的观点中有这样的代码，它们确实按预期工作......

# java - 如何使用其中的条目/值初始化 LinkedList？

> ID：10344040
> 
> 赞同：45
> 
> 时间：2012-04-27T02:31:58.450
> 
> 标签：java, linked-list, initialization

所以我知道如何拥有一个链表并使用 add 方法按条目输入条目。但是，我不想按条目添加条目。有没有办法在列表中声明具有初始值的链表？

例如，如果我想在列表中包含 1.0 和 2.0，我可以在一行中做些什么吗？就像是：

```
List<Double> temp1 = new LinkedList<Double>(1,2); 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-27T02:32:54.757

你可以这样做：

```
List<Double> temp1 = new LinkedList<Double>(Arrays.asList(1.0, 2.0)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-27T02:54:23.970

`LinkedList`具有以下构造函数，它接受类型参数`Collection`：

```
public LinkedList(Collection<? extends E> c) 
```

此构造函数“按照集合的迭代器返回的顺序构造一个包含指定集合元素的列表。”

因此，您可以使用此构造函数来声明 a`LinkedList`并在声明时使用值对其进行初始化。您可以提供任何`Collection<Double>`类型的实例。

如果您只有一组值但没有`Collection`对象，那么您可以使用`java.util.Arrays`具有静态`asList()`方法的类，该方法会将提供的一组值转换为 a`List`并返回。请参见下面的示例：

```
 List<Double> list = new LinkedList<Double>(Arrays.asList(1.2,1.3,3.2)); 
```

如果您需要一个实例，`List<Double>`那么您必须提供带小数位的值，否则您将获得一个`List<Integer>`带有这些值的实例。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-05-08T02:27:18.137

如果你使用的是 JDK9+，你可以`List.of(...)`像这样使用：

```
List<Double> myList = new LinkedList<>(List.of(10D, 11D)); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-22T21:01:47.020

您还可以创建类似的方法

```
static <T> LinkedList<T> createLinkedList(T...elements) {
    LinkedList<T> newList = new LinkedList<T>();
    for (T el : elements) {
        newList.add(el);
    }

    return newList;
} 
```

并将其用于：

```
 LinkedList<Integer> a = createLinkedList(1, 2, 3);

        for (Integer item : a) {
            System.out.println(item);
        } 
```

# workflow-foundation-4 - Workflow Foundation - 我可以让它适合吗？

> ID：10344041
> 
> 赞同：0
> 
> 时间：2012-04-27T02:32:37.393
> 
> 标签：workflow-foundation-4

我已经研究了一周左右的工作流基础，但是多年来一直了解它以及它的概念和用例，只是从来没有机会投入任何时间来更深入。

我们现在有一些项目，我们可以从作为服务公开的集中式业务逻辑中受益，因为这些项目需要不同平台上的许多不同接口，我可以看到“业务逻辑孤岛”正在发生。

我玩弄了一些概念证明来发现什么是可能的以及如何实现它，我必须说，对于普通的 C# 开发人员来说，这是一个基本的相移。

我想实现三件事：

1.  运行时实例化状态机
2.  可由用户自定义（以不同的顺序执行不同的任务，并具有在状态之间调用的独特功能）。
3.  WCF 暴露

因此，我沿着测试状态机工作流、xamlx wcf 服务、具有持久性和监视功能的 appfabric 托管服务、在运行时从数据库加载 xamlx 服务等的路线进行了测试，但所有这些示例似乎都不能很好地结合在一起。例如，托管状态机服务在 appfabric 中时，服务方法调用的顺序存在问题，例如：“无法在标识符为 'efa6654f-9132-40d8-b8d1-5e611dd645b1' 的服务实例上执行操作 'MethodName'这次。请确保以正确的顺序执行操作，并且使用中的绑定提供有序的交付保证“。

此外，如果您在运行时从 sql 存储调用实例工作流服务，则无法在 appfabric 中跟踪它们。

我要感谢 Ron Jacobs 提供的所有非常有帮助的动手实验室和博客文章。

有没有任何人知道的例子可以将所有这些概念联系在一起？

我是在尝试做一些不可能的事情，还是以正确的方式尝试？

感谢您的所有帮助以及您可以提供帮助的任何评论。

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:24:36.427

关于该错误，您似乎已经修改了部署后的 WF（您的列表中的#2 是吗？），因此您提到了错误。

版本控制（或者在这种情况下，在部署 WF 后对其进行修改）将在即将到来的版本中得到改进，但我认为它不会达到你在 #2 中所需要的（如果我理解的话），因为每个实例都使用相同的 WF。

# php - 将 MySQL fetch_assoc() 存储在变量中

> ID：10344054
> 
> 赞同：0
> 
> 时间：2012-04-27T02:34:15.220
> 
> 标签：php, mysql, arrays

如果我有类似 $data = getSomeData();

这是一个关联数组，然后我使用诸如此类`$data['username']`的东西，每次我使用数组中的东西时`$data['id']`都必须调用它吗？`getSomeData();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:38:09.357

不，如果`getSomeData();`返回一个数组，那么`$data`就是数组的值。为什么它会调用该函数？

PHP 中有一种叫做魔术方法的东西，它适用于类。我必须仔细检查，但`__get`你可以覆盖它。但我将不理会这个问题，因为这个问题已经很复杂了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:40:03.087

不， 的结果`getSomeData()`存储在 中`$data`，因此您使用的是 中的值`$data`。

# wcf - 在 WCF 中，如何删除 404 响应正文？

> ID：10344059
> 
> 赞同：0
> 
> 时间：2012-04-27T02:34:44.127
> 
> 标签：wcf, http-status-code-404, asp.net-routing

我配置了 WCF 服务，并且正在使用路由来配置它。一切都按我想要的方式工作，除了 404 消息有一个正文说明`Service Endpoint not found.`

我希望 404 有一个空的响应正文。

这是我的路线注册：

```
public class Global : HttpApplication
{

    protected void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes(RouteTable.Routes);

    }

    private void RegisterRoutes(RouteCollection routes)
    {
        routes.Add(new ServiceRoute("RootService", new WebServiceHostFactory(), typeof(ServiceProvider)));
    } 
```

这是我的服务类：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
[ServiceContract]
public class ServiceProvider 
{
    [WebGet]
    public Test ValidUrl()
    {
        return new Test();
    }
} 
```

如何使这个 url [http://localhost/RootService](http://localhost/RootService)的响应有一个空的 404 正文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:22:25.300

我找到了一些方法来做到这一点，我在下面列出了两种。他们的关键是将 UriTemplate 设置为 *. 这使得该方法匹配所有未明确匹配的路由。

```
 [WebGet(UriTemplate="*")]
    public void ErrorForGet()
    {
        throw new WebFaultException(HttpStatusCode.NotFound);
    } 
```

我也不喜欢这种方式，但它有效：

```
 [WebGet(UriTemplate="*")]
    public void ErrorForGet()
    {
        WebOperationContext.Current.OutgoingResponse.SetStatusAsNotFound();
    } 
```

这两种方法都有重载，它们将字符串作为消息提供给请求的客户端。WebFaultException 需要像这样走这条路：`throw new WebFaultException<string>("Resource not found", HttpStatusCode.NotFound);`

# css - 段落元素和 2 div 的问题

> ID：10344062
> 
> 赞同：0
> 
> 时间：2012-04-27T02:35:22.723
> 
> 标签：css

我的段落内容有一个小问题，它被 2 个 div 包围：

[http://jsfiddle.net/NinjaSk8ter/6sv5T/](http://jsfiddle.net/NinjaSk8ter/6sv5T/)

我需要让内容出现在 contentheader div 下方并包装 imagebox div 并且不与 imagebox div 重叠。p 内容应围绕 contentheader 和 imagebox。

我尝试为内容标题和图像框应用 z-index，但没有成功。

但是，我确实为段落标签设置了 margin-top，以便内容会出现在 contentheader div 下方，但我认为这不是正确的方法。

我希望能够为内容应用“contentbox”类，但我不确定如何使这个 div 位于其他 contentheader 和 imagebox div 之外。

如果有人能告诉我这是如何完成的，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:58:57.990

我已经重新安排了您的 HTML 和 CSS，您可以在此处看到：**[jsFiddle 示例](http://jsfiddle.net/j08691/6sv5T/1/)**。

HTML

```
<div id="mid-featureleft">
   <div class="imagebox">
   </div>

   <div class="contentheader">
      <h1>Georgio Versari Painters  Artisans</h1>
   </div>
   <p>Content Content Content Content Content Content Content Content Content Content Content Content</p>
</div>​ 
```

CSS

```
#mid-featureleft {
    height:250px;
    width:609px;
    margin: 12px 0 0 0;
    float:left;
    position:relative;
    background-color:#E7EFF7;
}
#mid-featureleft p {
    color: #0C2A55;
    margin:0;
    font-size:12px;
    line-height:14px; 
    padding: 5px 5px 5px 5px;
}
#mid-featureleft .contentheader {
    height:29px;
    width:286px;
    text-align:left;
    line-height:29px;
    margin:0 0 0 0;
    padding: 0 0 0 6px;
    float:left;
    background-color:red;
}

#mid-featureleft .imagebox {
    height:200px;
    width:272px;
    float: right;
    margin:0 0 0 20px;
    background-color:green;
}​ 
```

# iphone - iPhone应用中长按home键

> ID：10344064
> 
> 赞同：0
> 
> 时间：2012-04-27T02:35:57.923
> 
> 标签：iphone, button, home-button

我想在我的应用中根据截取长home键，对于自己的操作，我想知道这个，能不能通过苹果的审核？如果未获得批准，我在哪里可以找到使用这些条款的主页按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:59:24.400

见[这里](https://stackoverflow.com/questions/7112723/ios-home-button-warning-is-it-possible)：

> 改变设备上开关行为的应用程序将被拒绝

这会改变主页按钮开关的行为，因此将被拒绝。如果你甚至可以写它，那就是。

# arrays - CUDA数组元素移位操作

> ID：10344065
> 
> 赞同：2
> 
> 时间：2012-04-27T02:36:06.693
> 
> 标签：arrays, cuda, shift

我目前正在 CUDA 上执行数组移位操作，但我被困在我需要在 GPU 上并行化操作的部分（我已经为 CPU 完成了它）。因此，该操作基本上是在数组中移动元素。

因此，例如，如果我有一个 M × N 矩阵，对于每一行，如果我看到 -1，我会将 -1 替换为它旁边的元素，依此类推，直到我到达行尾，我需要对所有列并行执行此操作。

举个简单的例子：

```
 3  4  1 -1  5  6  7  8
-1  4  5  2  1  2  5  2
 2  4  5  1  2  3  4 -1 
```

对于该矩阵，生成的矩阵将是：

```
 3  4  1  5  6  7  8  8
 4  5  2  1  2  5  2  2
 2  4  5  1  2  3  4 -1 
```

PS。最后一个元素保持不变，因为它到达了无法替换的边界。此外，每一行只会出现一个-1

所以，这基本上是操作，但我的问题是如何为每一行分配一个线程或.. 并行化所有行并在 cuda 中同时进行转换？此外，我的数组使用等式从二维数组转换为一维数组

```
array1d[i+width*j]  =  array2d[i][j]; 
```

到目前为止，我已经尝试过：

```
__global__ void gpu_shiftArray(int *Arr, int *location, int width, int height)
{
int i = blockIdx.x * blockDim.x + threadIdx.x;
int j = blockIdx.y * blockDim.y + threadIdx.y;

int index = i+width*j;

//shift when I see -1
if(Arr[index] == -1)
{
    Arr[index] = (index % height) ? Arr[index+1] : 
    }
    //location stores the index of -1, so anything after the -1 will be shifted too
if((location[i]+width*j) <= index)
{
    Arr[index] = (index % height) ? Arr[index+1] : 
}
} 
```

它的输出并不完全正确（相差 5-10 个值），但我不确定为什么也不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:49:20.963

这看起来可以通过稍微修改的“流压缩”算法来完成，该算法使用“谓词总和”作为原语。有关详细信息，请参阅以下链接： [使用 CUDA 的并行前缀和（扫描）](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch39.html)。

唔。我可以看到，使用选票函数（将源数据与 -1 进行比较）和一些位算术来确定扭曲线程在进行复制时如何（以及是否）选择目标偏移量也可能有优势。

# cocoa - 覆盖 NSDocument 窗口标题中的“已编辑”

> ID：10344068
> 
> 赞同：8
> 
> 时间：2012-04-27T02:36:26.293
> 
> 标签：cocoa, osx-lion, nswindow, nsdocument, nswindowcontroller

如何防止窗口标题为脏的 NSDocument 显示“已编辑”？

我正在使用网络服务管理自己的保存和自动保存，只是不想让标题栏中的注意力分散。

我试过覆盖：

*   NSDocument 的`-isDocumentEdited`并且`-hasUnautosavedChanges`总是返回`NO`。
*   `-[NSWindowController setDocumentEdited]`什么都不做，或者总是使用`NO`而不管参数的实际值。
*   `-[NSWindowController synchronizeWindowTitleWithDocumentName]`什么都不做。
*   `-[NSWindow setDocumentEdited]`什么都不做，或者总是使用`NO`而不管参数的实际值。

在所有情况下，当我对保存的文档进行更改时，标题栏仍会更改为已编辑。

如果我重写`-[NSDocument updateChangeCount:]`并且`-[NSDocument updateChangeCountWithToken:forSaveOperation:]`什么都不做，我可以防止这种情况发生，但它也会影响保存、自动保存和其他文档行为。

我也试过这个：

```
[[self.window standardWindowButton: NSWindowDocumentVersionsButton] setTitle:nil]; 
```

这显示了一个空白字符串而不是 Edited，但破折号仍然出现 - 通常将文档名称和 Edited 分开的破折号。

知道如何从文档中撬开这部分窗口吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T01:53:25.287

几个选项：

1.  要获得指向“破折号”的指针，请在 [window.contentView.superview.subviews] 中查找字符串值等于“-”的 TextField。您也可以将其文本设置为空字符串。

    ```
    @implementation NSWindow (DashRetrivalMethod)
    - (NSTextField*)versionsDashTextField
    {
        NSTextField* res = nil;
        NSView* themeFrame = [self.contentView superview];
        for (NSView* tmp in [themeFrame subviews])
        {
            if ([tmp isKindOfClass:[NSTextField class]])
            {
                if ([[(NSTextField*)tmp stringValue] isEqualToString:@"—"])
                {
                      res = (NSTextField*)tmp;
                      break;
                }
            }
        }
        return res;
    }
    @end 
    ```

2.  你可以覆盖 NSWindow 的 -setRepresentedURL:。这也会影响 NSWindowDocumentIconButton 和弹出菜单，但您可以根据需要手动创建它：[NSWindow standardWindowButton: NSWindowDocumentIconButton]。

3.  覆盖这三个 NSDocument 的未记录方法之一：

    ```
    // Always return here NO if you don't want the version button to appear. 
    // This seems to be the cleanest options, besides the fact that you are 
    /// overriding a private method.
    - (BOOL)_shouldShowAutosaveButtonForWindow:(NSWindow*)window;

    // Call super with NO
    - (void)_setShowAutosaveButton:(BOOL)flag; 

    // Here the button and the dash are actually created
    - (void)_endVersionsButtonUpdates; 

    // Here Cocoa hide or unhide the edited button
    - (void)_updateDocumentEditedAndAnimate:(BOOL)flag 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:51:00.310

`- (BOOL)hasUnautosavedChanges`除了覆盖之外，您是否尝试过覆盖 NSDocuments `- (BOOL) isDocumentEdited`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T18:00:24.770

虽然这是一个较晚的答案，但您可以通过覆盖轻松确定 NSDocument 窗口的标题

```
- (NSString *)windowTitleForDocumentDisplayName:(NSString *)displayName 
```

在您的 NSWindowController 中并返回适当的标题。

您也可以通过覆盖 NSDocument 的属性来做到这一点：

```
- (NSString *)displayName 
```

但Apple**不**建议这样做，因为操作系统错误处理程序通常会使用它。

我添加了这个答案，因为其他答案都没有真正让我走上正确的道路。

# android - 在每个列表视图行上显示小计

> ID：10344074
> 
> 赞同：3
> 
> 时间：2012-04-27T02:37:31.303
> 
> 标签：android, android-layout, android-widget

我正在尝试显示绑定到我的每一行的数据库值的小计`ListView`。我不想将小计保留为数据库列，因此我试图在显示值时累积它们。当然，这带来了如何处理滚动的明显问题，滚动会显示和重新显示一个值，弄乱正在运行的小计。

详细地说，每个列表视图行都有两个字段，一个值和一个小计。该值来自数据库行，小计是直到并包括该行的所有数据库行的总和。如果不需要，我不想将小计包含在数据库行中，因为这会使插入和删除行变得更加困难。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:44:43.303

创建一个自定义适配器，创建一个数组来保存小计，并在您的 getView 中使用它来维护您的小计，即使在滚动时也是如此。

```
public class CustomCursorAdapter extends SimpleCursorAdapter {

private Cursor c;
private Context context;
private Activity activity;
private int[] subtotal;
private int subtotalhold;
private int layout;

public CustomCursorAdapter(Context context, int layout, Cursor c,
        String[] from, int[] to) {
    super(context, layout, c, from, to);

    this.c = c;
    this.context = context;
    this.activity = (Activity) context;
    this.layout = layout;

    subtotal = new int[c.getCount()];
    subtotalhold=0;
    c.moveToFirst();
    int i = 0;
    while (c.isAfterLast() == false) {
        subtotalhold = subtotalhold + c.getInt(columnIndex);
        subtotal[i] = subtotalhold;
        i++;
        c.moveToNext();
    }
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null)
        convertView = View.inflate(context, layout, null);
    c.moveToPosition(position);

    TextView subtotal = (TextView) convertView.findViewById(R.id.subtotal);
            subtotal.setText(subtotal[position]);

            // rest of your code to populate the list row
    return (row);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:18:45.537

遍历正在加载到 ListView 中的值，然后同时计算它......

# iphone - iOS 检测拖动停止

> ID：10344075
> 
> 赞同：1
> 
> 时间：2012-04-27T02:37:37.743
> 
> 标签：iphone, objective-c, ios, uislider, uitouch

我很难过的超级简单的问题：

我正在使用`UISlider`应该检测用户何时拖动（但不*点击*）滑块的拇指。这很有效，拇指显然可以被拖动，但是当拖动事件停止时我需要得到通知。是否有一个我没有看到的控制事件可以让我区分拖动的停止和点击的停止？

或者在方法中有一些简单的方法来完成这个`touchesEnded:`吗？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:48:51.797

用这个：

```
[slider addTarget:self action:@selector(slidingStopped:)forControlEvents:UIControlEventTouchUpInside];

- (void) slidingStopped:(id)sender
{
    NSLog(@"stopped sliding");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T23:37:39.393

我知道这是一个旧帖子，但这就是我所做的。它可以适应 UISlider 问题。

```
BOOL buttonDidMove = NO;

- (void)viewDidLoad
{
    [super viewDidLoad];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self action:@selector(buttonMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside];
    [button addTarget:self action:@selector(buttonTouchUpInside) forControlEvents: UIControlEventTouchUpInside];
    [button setTitle:@"Tap Me" forState:UIControlStateNormal];
    button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
    button.backgroundColor = [UIColor yellowColor];
    [self.view addSubview:button];
}

- (void)buttonTouchUpInside
{
    if (buttonDidMove) {
        buttonDidMove = NO;
        return;
    }
    NSLog(@"buttonTouchUpInside");
    [self initNetworkCommunication];
}

- (void)buttonMoved:(UIButton *)control withEvent:(UIEvent *)event
{
    NSLog(@"buttonMoved");
    buttonDidMove = YES;
    UITouch *touch = [[event touchesForView:control] anyObject];
    control.center = [touch locationInView:self.view];
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T02:51:09.777

```
[ratingScale addTarget:self action:@selector(slideEnds:) forControlEvents:UIControlEventTouchDragInside]; 
```

其中 ratingScale 将是您的示例 UISlider 和 slideEnds 将是您为上述事件触发的示例选择器。

touchDragInside 标准确保只有在您继续拖动时才会触发选择器。如果您只是在滑块拇指上注册点击，它不会触发。

# excel - 如何获取当前 VBA 函数返回的工作表和单元格？

> ID：10344076
> 
> 赞同：8
> 
> 时间：2012-04-27T02:38:03.197
> 
> 标签：excel, vba

是否有一个变量可以提供将接收自定义 VBA 函数结果的工作表和单元格？

例如，如果`A!B1`公式`=MyCustomFunc()`在我的代码中：

```
public function MyCustomFunc()
    'what can I call here to get the values "A" and "B1"?
end function 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T05:49:37.603

这是你正在尝试的吗？

```
Option Explicit

Public Function MyCustomFunc()
    '~~> Judicious use of 'Volatile' is advised.
    '~~> This will be called everytime the sheet is recalculated
    Application.Volatile

    MsgBox Application.Caller.Parent.Name & ", " & Application.Caller.Address
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:34:04.250

你想要`Application.ThisCell`。

这将返回当前正在计算的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:41:22.253

`ActiveSheet.Name`会给你工作表名称。`ActiveCell.Row`会给你行号，`ActiveCell.Column`会给你列字母。然后您可以将它们组合起来以获取单元格地址。

# jquery - x 和 y 位置。扫雷风格

> ID：10344079
> 
> 赞同：0
> 
> 时间：2012-04-27T02:38:19.930
> 
> 标签：左键, jquery, positioning

当我用[左键](/questions/tagged/left-button "显示标记为“左键”的问题")单击时，它应该如下图所示。

![在此处输入图像描述](../Images/9972754c707f89ad51455f745cdfaf72.png)

但相反，我的代码正在这样做。

![在此处输入图像描述](../Images/99de171386ba74ab81a23ae86164ab0b.png)

我做了一个例子（见下面的小提琴）。正如您在图像中看到的，我目前的问题是：

**上面和下面的所有内容（不仅是第一行）也在变化。**

*在我的小提琴示例中，我正在使用`.css('background-color', 'red')`它来测试它。*

[这是我的小提琴。](http://jsfiddle.net/Nymos/RCRQJ/1/)

我在这两个帖子中收集了信息。

*   [DOM对象的jQuery xy文档坐标](https://stackoverflow.com/questions/1002934/jquery-x-y-document-coordinates-of-dom-object)
*   [jQuery：获取给定'y'位置上方的元素](https://stackoverflow.com/questions/4195620/jquery-get-elements-above-a-given-y-position)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:06:11.250

不知道你想要什么，但试试这个：

```
$.expr[':'].xy = function (obj, index, meta, stack) {
    var xy = meta[3].split(',');
    var x = xy[0];
    var y = xy[1];
    var el = $(obj);
    var el_offset = el.offset();
    return el_offset.left == y && (el_offset.top-el.height() == x || el_offset.top+el.height() == x);
} 
```

[工作示例](http://jsfiddle.net/RCRQJ/4/)

**更新：**

嗯，您可以像这样选择所有这些：

```
$.expr[':'].xy = function (obj, index, meta, stack) {
    var xy = meta[3].split(',');
    var y = xy[0];
    var x = xy[1];
    var el = $(obj);
    var el_offset = el.offset();
    // check for top and bottom 3 blocks
    if ((el_offset.top-el.height() == y || el_offset.top+el.height() == y) &&  (el_offset.left+el.width() == x || el_offset.left == x || el_offset.left-el.width() == x))
        return true;
    // left and right
    else if (el_offset.top == y && (el_offset.left+el.width() == x || el_offset.left-el.width() == x))
        return true;

    return false;
} 
```

然后这样做：

```
$(document).ready(function myfunction() {

    $('.content').on("click", function () {
        var obj_left = $(this).offset().left;
        var obj_top = $(this).offset().top;

        $('#wrap').find('.content:xy(' + obj_top + ',' + obj_left + ')').css('background-color', 'red');
    });

}); 
```

# ruby-on-rails - Rails：重构 RESTful 控制器规范：人们为什么不这样做？

> ID：10344080
> 
> 赞同：0
> 
> 时间：2012-04-27T02:38:22.343
> 
> 标签：ruby-on-rails, rest, rspec

像大多数 Rails 人一样，我的宁静控制器坚持非常一致的模式，任何更改很少超过一两行。

我喜欢相当彻底地测试（使用 RSpec），包括控制器测试中的分配、响应、重定向等。

问题是，我 75% 的控制器规范都遵循完全相同的模式，一个明显的步骤似乎是将它们重构为一个方法/一组方法，我可以从每个规范中调用它们......例如）'restful_controller_specs' 调用，或单独的 'restful_index_specs'、'restful_show_specs' 等，如果资源不完全标准。

然而，在查看其他人的项目时，据我所知，似乎没有其他人真正做到这一点。

所以简而言之，我是否错过了一个很好的理由来解释为什么不积极重构 restful 控制器规范？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:09:47.297

我认为大多数 Rails 开发人员都是通过学习 Rails 来学习编程的，这并不是学习如何编程的理想方式，因此重构之类的东西不是他们学到或遇到的概念。许多人没有意识到文件就像`config/routes.rb`并且`db/migrate/*`只是 ruby​​ 代码，您可以根据需要向其中添加循环和数组以及类和子类，就像任何 ruby​​ 程序一样。

致所有的 Rails 编码员：学习 ruby​​！*好好*学习吧！这是一门真正的编程语言！Rails 完全由红宝石制成。

# .net - Box-API 调用示例

> ID：10344083
> 
> 赞同：1
> 
> 时间：2012-04-27T02:39:22.983
> 
> 标签：.net, rest, box-api

我一直在使用 box-api v1.0，现在看到有一个新的并且想利用它。但是我对 REST 很陌生，并不真正了解在这里做什么。

我获取文件夹的代码是这样的：

```
wcGetFolders.OpenReadAsync(new Uri("https://www.box.net/api/1.0/rest?action=get_account_tree&api_key=" + api_key + "&auth_token=" + auth_token + "&folder_id=" + currentFolder + "&params[]=onelevel&params[]=nozip")); 
```

但现在有了新的 API，我不确定如何格式化字符串。

以前我可以将所有参数放在 uri 中。

我还能这样做吗？

新的 API 帮助表明请求如下所示：

```
https://api.box.com/2.0/folders/FOLDER_ID \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \ 
```

我不知道如何处理反斜杠和引号，基本上我根本不知道如何格式化 uri，即使所有 -h 等参数实际上都进入了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:05:18.327

文档中的示例请求是针对 cURL 给出的，cURL 是一个用于发出 HTTP 请求的命令行工具，所以这就是示例所指的内容。

[v2 Box API 是 RESTful 的，您可以在此处](https://en.wikipedia.org/wiki/Representational_State_Transfer#RESTful_web_services)和[此处](https://stackoverflow.com/questions/343288/what-am-i-not-understanding-about-rest)阅读更多信息。

简而言之，您尝试获取信息的文件夹的文件夹 ID 应该插入到 FOLDER_ID 出现的资源 URL 中。

您的代码示例表明您正在使用 .NET 进行开发，因此我建议您使用可用于 .NET 的 REST 库之一，[其中许多都在此处列出](https://stackoverflow.com/questions/4073564/net-rest-client-frameworks)。您可能还会发现使用 REST 客户端（例如[Postman](https://chrome.google.com/webstore/detail/fdmmgilgnpjigdojojpjoooidkmcomcm)）来玩弄 API 很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:59:23.513

简单来说，只需忽略 BOX 文档中示例的编写方式即可。他们只需要以独立于编程语言的方式显示信息，在这种情况下，他们选择了命令行语法。

-H 指的是您在发出 HTTP 请求时将传入的标头信息。

不知道在 .NET 中会如何，但在使用 cURL 库的 PHP 中，它会是这样的：

```
$crl = curl_init();

curl_setopt($crl, CURLOPT_URL, 'https://www.box.com/api/2.0/folders/0');
curl_setopt($crl, CURLOPT_HTTPHEADER, array('Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN',));
curl_setopt($crl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($crl, CURLOPT_RETURNTRANSFER, true);

$results = curl_exec($crl);

curl_close($crl); 
```

# model-view-controller - 控制器和外观有什么区别？

> ID：10344085
> 
> 赞同：8
> 
> 时间：2012-04-27T02:39:27.980
> 
> 标签：model-view-controller, design-patterns, language-agnostic, controller, facade

在我的应用程序中，我曾经在主应用程序中使用它们作为控制器来调用 Facade 方法，因为我认为它们是相同的东西，但现在我认为我错了。

我的应用程序使用多个 Facades，每个 Facades 用于一种任务。如果我改用Controller，正确的方法是只有一个Controller吗？

我的问题是外观和控制器之间有什么区别。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T02:46:15.147

通常情况会相反，因为您的系统中的外观往往比控制器少。Facades 旨在包装复杂的功能，它们的主要目标是隐藏底层系统的复杂性。您可以将 Facade 视为包装复杂功能并提供更简单的交互方法的层。

另一方面，控制器通常与系统中非常特定的功能相关联。它的主要目标是调解视图和模型之间的交互，或者在某些情况下只是一个模型。

外观与多个控制器交互更为典型，反之亦然。

# iis-7.5 - msdeploy mvc 到 Windows7 得到 ERROR_DESTINATION_NOT_REACHABLE 和 404

> ID：10344093
> 
> 赞同：8
> 
> 时间：2012-04-27T02:40:49.150
> 
> 标签：iis-7.5, windows-7-x64, msdeploy

我正在尝试将`msdeploy`MVC 应用程序添加到 windows7 框中，在命令行上运行。并不断收到此错误：

> 错误代码：ERROR_DESTINATION_NOT_REACHABLE 更多信息：无法连接到目标计算机（“192.168.xxx.xxx”）。在目标计算机上，确保安装了 Web Deploy 并且启动了所需的进程（“Web 管理服务”）。错误：远程服务器返回错误：（404）未找到。错误计数：1。

我已经验证了 Wmsvc（似乎正在使用）和 MsDepSvc 都在运行。并且防火墙被禁用。在浏览器中，当我访问[https://192.168.xxx.xxx:8172/msdeploy.axd](https://192.168.xxx.xxx:8172/msdeploy.axd)时，出现服务器错误 404，似乎比命令行停止的位置更远。

我可以在网上找到的大多数关于设置 IIS7 和 Web 部署的说明都是针对 MS 服务器的。我的本地机器和 Windows7 机器都安装了相同版本的 Msdeploy。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T21:03:03.170

我在 Azure 上的 VM 遇到了完全相同的问题，解决方案是首先**启用 IIS 管理服务，然后安装 Web Deploy**（我使用了 Web Platform Installer）。似乎安装顺序很重要。你可以在这里找到我写的一篇博客文章[http://davidjrh.intelequia.com/2012/10/configurando-web-platform-installer-y.html](http://davidjrh.intelequia.com/2012/10/configurando-web-platform-installer-y.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T04:53:29.873

对于非服务器操作系统（即 Windows 7），不支持通过 Web 管理服务发布的 Web 部署。相反，您将不得不使用远程代理服务，这是一个仅限管理员的发布服务。[您可以在http://technet.microsoft.com/en-us/library/dd569059(v=WS.10).aspx](http://technet.microsoft.com/en-us/library/dd569059(v=WS.10).aspx)找到更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-04T19:43:27.157

我在使用 MSDeploy 将我的 Web 应用程序部署到运行 Windows 7 的远程 IIS 7.5 Web 服务器时遇到了同样的问题。在阅读了 Sayed 的帖子后，我今天才弄清楚如何解决这个问题，所以我想在这里为任何愿意运行的人发布我的解决方案像我一样陷入这个问题。试试这个：

*   启用 IIS 管理服务（在控制面板 >> 添加或删除功能 >> 添加或删除 Windows 功能）
*   安装 Web 部署 ( [http://www.iis.net/downloads/microsoft/web-deploy](http://www.iis.net/downloads/microsoft/web-deploy) )
*   使用管理权限打开 cmd，键入“net start msdepsvc”以启动“Web Deploy Agent Service”。
*   在浏览器中查看此链接：**`http://serveraddress/MsDeployAgentService/`**，如果提示输入用户名和密码，则 MsDeployAgentService 正在服务器上运行，请转到下一步。
*   在 VS 中，**在创建发布时输入`http://serveraddress/MsDeployAgentService/`Service URL，而不是`https://serveraddress:8172/MsDeploy.axd`**，然后单击测试连接。现在应该可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:22:38.047

在检查管理服务和 Web Deploy 3.0 是否已正确安装后，我发现（至少从 VS2012 开始）服务 URL 在这里似乎也很重要，尝试发布到以下任何一个都对我不起作用：

*   FQDN (localmachine.domain.local)
*   域 IP 地址 (172.22.xxx.xxx)
*   环回 IP (127.0.0.1)

而以下 DID 工作：

*   本地主机
*   NetBIOS 名称（本地机器）

# jquery - 在 jquery DataTable 中进行排序或分页时，如何控制处理时间？

> ID：10344096
> 
> 赞同：0
> 
> 时间：2012-04-27T02:41:54.707
> 
> 标签：jquery, datatables

我在 jQuery Datatables 中有一个问题。每次单击排序时都会显示此“正在处理”消息，并且排序是客户端排序。这真的很烦人，因为它看起来像一个闪烁。我怎么能做这样的事情？如果处理时间小于 1 秒，不显示“处理中”消息？

```
$('#tblUsers').dataTable({
                    "bDestroy": true,
                    "bProcessing": true,
                    "sProcessing": false,
                    "sAjaxSource": path,
                    "bFilter": false,
                    "bLengthChange": false,
                    "bInfo": false,
                    "iDisplayLength": 15,
                    "sPaginationType": "full_numbers",
                    "aoColumns":
                [
                    { "mDataProp": "UserName" },
                    { "mDataProp": "FirstName" },
                    { "mDataProp": "LastName" },
                    { "sDefaultContent": "", "fnRender": function (oObj) { return "<a onclick=AssignUser(this,'" + oObj.aData.UserName + "','btnRemove_" + oObj.aData.UserName + "') id='btnAssgin_" + oObj.aData.UserName + "'> Assign User</a>"; }
                    },
                     { "sDefaultContent": "", "fnRender": function (oObj) { return "<a onclick=RemoveUser(this,'" + oObj.aData.UserName + "','btnAssgin_" + oObj.aData.UserName + "') id='btnRemove_" + oObj.aData.UserName + "' disabled='true'>Remove User</a>"; }
                     }

                ],
                    "aoColumnDefs": [
                                      { "sWidth": "20%", "aTargets": [0] },
                                      { "sWidth": "20%", "aTargets": [1] },
                                      { "sWidth": "20%", "aTargets": [2] },
                                      { "sWidth": "20%", "aTargets": [3] },
                                      { "sWidth": "20%", "aTargets": [4] }
                                    ]
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:57:39.463

如果您不想看到处理指示符，只需设置`bProcessing`为 false（或将其完全删除，默认情况下为 false）。如果您不想看到它，不知道为什么要包括在内`bProcessing`！继承代码？

[回应评论的更新]

我现在知道了。但我认为这是一条红鲱鱼，这又回到了卡夫曼的评论。在完成之前，您不知道处理需要多长时间。

“但是格雷格！” 我听到你们中的一些人说，“只是在它至少有一秒钟之前不要显示那个正在处理的东西！简单！”

你所要做的就是用一个问题来换取同一问题的延迟版本。假设处理需要 1.2 秒。您等待显示“处理”指示器一秒钟，然后您决定“是的，这很长，让我们显示指示器！” 但随后指示器仅显示 0.2 秒。一个丑陋的“闪光”，只是延迟了更长的时间。事实上，我认为在这种情况下，如果它一直可见，它会看起来更好。

除非您始终可以相对确定地预测该过程需要多长时间，否则我看不到解决此问题的好方法。你不能这样做，因为每个客户端环境都会有所不同。

我建议不要试图抓住这条红鲱鱼……要么保持启用，要么不启用。这是我诚实的建议。

# java - Java：添加两个相同类型的值，它们都是 java.lang.Number 的子类

> ID：10344098
> 
> 赞同：5
> 
> 时间：2012-04-27T02:42:06.950
> 
> 标签：java

我想要一个像下面这样的构造函数。

```
public Attribute(String attrName, Number attrValue){
    this.name = attrName;
    this.value = attrValue;
} 
```

在此，我想要一个名为 incrementValue(Number n) 的方法，它将 n 添加到值中。我知道您不能将两个 Number 对象加在一起，因为可能存在转换问题。但是，如果我使用检查来保证 value 和 n 是相同的类型，是否可以将它们加在一起？或者也许有更好的方法来解决这个问题。

现在我正在声明 Integer 和 Double 的实例变量并将值分配给正确的类型。我想知道如何扩展它以允许 Number 的任何子类。显然，我可以为每个方法编写单独的方法，但这似乎是糟糕的编程。

这在java中可能吗？我会完全错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T02:49:42.317

您可以[将所有`Number`s 转换为单一类型](http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html#doubleValue%28%29)（`double`损耗最小）：

```
class Attribute {

    private double value;

    public Attribute(String attrName, Number attrValue) {
        this.name = attrName;
        this.value = attrValue.doubleValue();
    }

} 
```

但是IMO你最好只重载构造函数；`Number`根据我的经验，这真的不是一个非常有用的课程（而且[我似乎不是唯一一个这么认为的人](https://stackoverflow.com/questions/8671787/what-is-the-purpose-of-the-number-class)）。

```
class Attribute {

    public Attribute(String attrName, int attrValue) {
        this.name = attrName;
        this.value = attrValue;
    }

    public Attribute(String attrName, double attrValue) {
        this.name = attrName;
        this.value = attrValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:47:00.003

不，这在 Java 中是不可能的。你能做的最好的事情就是浏览所有`Number`你知道的案例。

我当然可以编写一个`Number`不可能的子类，尽管这将是一个有点荒谬的实现。

# javascript - 如何使用 javascript 更改 JSON 中根元素的名称？

> ID：10344103
> 
> 赞同：0
> 
> 时间：2012-04-27T02:42:48.380
> 
> 标签：javascript, json

是否可以更改此变量名称：

```
var grid = { 
    "name": "test", 
    "columns":
    [
        {"name":"col1"},
        {"name":"col2"}
    ], 
    "rows":
    [
         {"name":"col1", "value":"text1"},
         {"name":"col2", "value":"text2"}
    ] 
} 
```

我想将网格更改为 grid1。这可能吗？感谢您在这里的指导。我对此进行了研究，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T02:44:06.833

这不是真正的 JSON；它只是一个 JavaScript 对象。所以“网格”只是一个 JavaScript 变量。您可以将其复制到具有不同名称的变量中，然后删除原始变量，如下所示：

```
var grid1 = grid;
delete grid; 
```

# mysql - 混合计数并存在于一个查询中

> ID：10344104
> 
> 赞同：-1
> 
> 时间：2012-04-27T02:43:06.993
> 
> 标签：mysql, sql, sql-server, sql-server-2008

假设我们有一个表并在其上保存 customerid 和 orderid。

在**一个查询中***计算所有订单*并*检查是否存在某个客户 ID*的最佳方法是什么？

 **我知道这个查询是错误的，但我强制写了，因为 Stackoverflow 不允许我发布简短的问题！

例如 ：

（表名 tbTest）

```
SELECT 
    COUNT(ORDERID), 
    EXIST(SELECT ID FROM tbTest WHERE customerid = {n}) 
FROM tbTest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:59:56.490

你的意思

```
SELECT CustomerID, COUNT(OrderID)
FROM dbo.tbTest
GROUP BY CustomerID; 
```

或者可能

```
DECLARE @CustomerID INT;

SET @CustomerID = 20;

SELECT COUNT(*)
FROM dbo.tbTest
WHERE CustomerID = @CustomerID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:00:58.110

请尝试以下操作

```
SELECT  COUNT(ORDERID),
        CASE
            WHEN EXISTS(SELECT ID FROM tbTest WHERE customerid = {n}) then 'Exist'  
            ELSE 'Not Exist'
        END
FROM tbTest 
```**

# c# - nhibernate不保存外键ID

> ID：10344111
> 
> 赞同：5
> 
> 时间：2012-04-27T02:44:34.203
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有一个简单的模型，我正在尝试使用 fluent-nhibernate 来坚持：

```
public class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<Address> Addresses { get; set; }
}

public class Address
{
    public int Id { get; set; }
    public int PersonId { get; set; }
    public string Street { get; set; }        
} 
```

一些样本数据：

```
var person = new Person() {Name = "Name1", Addresses = new[]
    {
        new Address { Street = "Street1"},
        new Address { Street = "Street2"}
    }}; 
```

当我调用`session.SaveOrUpdate(person)`两个对象时，两个对象都被持久化，但外键未保存在地址表中：

![在此处输入图像描述](../Images/d480841720c64168de6f538522e4613b.png)

我究竟做错了什么？我的映射覆盖如下：

```
public class PersonOverrides : IAutoMappingOverride<Person>
{
    public void Override(AutoMapping<Person> mapping)
    {
        mapping.Id(x => x.Id);
        mapping.HasMany(x => x.Addresses).KeyColumn("PersonId").Cascade.All();            
    }
}

public class AddressOverrides : IAutoMappingOverride<Address>
{
    public void Override(AutoMapping<Address> mapping)
    {
        mapping.Id(x => x.Id);               
    }
} 
```

**请注意**，我计划`List<Address>`在其他实体中使用，我不想添加`Address.Person`属性。

**更新 1**

我已经通过替换来“工作” `Address.PersonId`，`Address.Person`但我不希望`Address`拥有 Person 属性，因为我不想要那个循环引用。此外，当插入上述对象查看日志时，nHibernate 显示为 1) 插入人员 2) 插入带有 NULL PersonId 的地址 3) 使用 PersonId 更新地址（刷新时），当真正可以同时完成第 2 步和第 3 步时？如果在 Address.PersonId 上不允许使用 NULL，这会导致另一个问题

**更新 2** 删除属性`Address.PersonId`会导致在`PersonId`数据库中填充。nHibernate 不喜欢我提供我自己的 PersonId，它显然在内部用于插入/检索记录。所以我真的想`Address.PersonId`用“嘿，这不是一个独立的字段，它是你要在赛道上使用的字段，请特别对待它”标记我。此外，如上所述，nHibernate 似乎将 NULL 插入 PersonId 列（当`Save`ing 时），然后在之后更新它（当`Flush`ing 时）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T17:04:58.273

我模拟您的问题情况，插入时具有空父键的孩子，然后用正确的父键更新。

```
BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
select nextval ('person_person_id_seq')
select nextval ('person_person_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
INSERT INTO person (lastname, firstname, person_id) VALUES (((E'McCartney')::text), ((E'Paul')::text), ((109)::int4))
INSERT INTO person (lastname, firstname, person_id) VALUES (((E'Lennon')::text), ((E'John')::text), ((110)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'9')::text), ((NULL)::int4), ((306)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'8')::text), ((NULL)::int4), ((307)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'6')::text), ((NULL)::int4), ((308)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'1')::text), ((109)::int4), ((309)::int4))
UPDATE phone_number SET person_id = ((110)::int4) WHERE phone_number_id = ((306)::int4)
UPDATE phone_number SET person_id = ((110)::int4) WHERE phone_number_id = ((307)::int4)
UPDATE phone_number SET person_id = ((110)::int4) WHERE phone_number_id = ((308)::int4)
UPDATE phone_number SET person_id = ((110)::int4) WHERE phone_number_id = ((309)::int4)
COMMIT 
```

**在没有逆...**

```
public class PersonMap : ClassMap<Person>
{
    public PersonMap ()
    {           
        Id (x => x.PersonId).GeneratedBy.Sequence("person_person_id_seq");

        Map (x => x.Lastname).Not.Nullable();
        Map (x => x.Firstname).Not.Nullable();

        // No Inverse
        HasMany(x => x.PhoneNumbers).Cascade.All ();
    }
}

public class PhoneNumberMap : ClassMap<PhoneNumber>     
{
    public PhoneNumberMap ()
    {
        References(x => x.Person);          

        Id (x => x.PhoneNumberId).GeneratedBy.Sequence("phone_number_phone_number_id_seq");

        Map (x => x.ThePhoneNumber).Not.Nullable();                       
    }
} 
```

...拥有子实体是父母的责任。

这就是为什么即使您没有向孩子（集合）指示 Inverse 并且孩子没有任何预定义的父母，您的孩子*似乎*也能够正确地坚持自己......

```
public static void Main (string[] args)
{
    var sess = Mapper.GetSessionFactory().OpenSession();

    var tx = sess.BeginTransaction();

    var jl = new Person { Firstname = "John", Lastname = "Lennon", PhoneNumbers = new List<PhoneNumber>() };
    var pm = new Person { Firstname = "Paul", Lastname = "McCartney", PhoneNumbers = new List<PhoneNumber>() };

    // Notice that we didn't indicate Parent key(e.g. Person = jl) for ThePhoneNumber 9\.       
    // If we don't have Inverse, it's up to the parent entity to own the child entities
    jl.PhoneNumbers.Add(new PhoneNumber { ThePhoneNumber = "9" });
    jl.PhoneNumbers.Add(new PhoneNumber { ThePhoneNumber = "8" });
    jl.PhoneNumbers.Add(new PhoneNumber { ThePhoneNumber = "6" });

    jl.PhoneNumbers.Add(new PhoneNumber { Person = pm, ThePhoneNumber = "1" });

    sess.Save (pm);
    sess.Save (jl);                     

    tx.Commit();            
} 
```

...，因此我们可以说，在没有 Inverse 属性的情况下，我们的对象图的持久性只是侥幸；在具有良好设计的数据库上，我们的数据保持一致是至关重要的，也就是说，我们永远不应该在孩子的外键上指示可为空，尤其是当孩子与父母紧密耦合时。在上面的场景中，即使 ThePhoneNumber“1”表示 Paul McCartney 是其父级，John Lennon 稍后将拥有该 PhoneNumber，因为它包含在 John 的子实体中；这是不使用 Inverse 标记子实体的性质，即使子实体想要属于其他父实体，父实体也会积极拥有属于它的所有子实体。没有逆，孩子没有任何权利选择自己的父母:-)

*看看上面的 SQL 日志，看看这个 Main 的输出*

* * *

**逆**

然后在子实体上指示 Inverse 时，表示选择自己的父实体是子实体的责任；母公司永远不会干涉。

因此，给定上述 Main 方法的相同数据集，尽管子实体具有 Inverse 属性...

```
HasMany(x => x.PhoneNumbers).Inverse().Cascade.All (); 
```

...，约翰列侬不会有任何孩子，ThePhoneNumber "1" 选择它自己的父母（保罗麦卡特尼），即使电话号码在约翰列侬的孩子实体中，它仍然会以保罗麦卡特尼作为它的父母被持久化到数据库中. 其他没有选择父母的电话号码将保持无父母状态。使用 Inverse，孩子可以自由选择自己的父母，没有攻击性的父母可以拥有任何人的孩子。

后端方面，这就是对象图的持久化方式：

```
BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
select nextval ('person_person_id_seq')
select nextval ('person_person_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
INSERT INTO person (lastname, firstname, person_id) VALUES (((E'McCartney')::text), ((E'Paul')::text), ((111)::int4))
INSERT INTO person (lastname, firstname, person_id) VALUES (((E'Lennon')::text), ((E'John')::text), ((112)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'9')::text), ((NULL)::int4), ((310)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'8')::text), ((NULL)::int4), ((311)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'6')::text), ((NULL)::int4), ((312)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'1')::text), ((111)::int4), ((313)::int4))
COMMIT 
```

* * *

那么持久化根对象及其子实体的好做法是什么？

首先，我们可以说这是对 Hibernate/NHibernate 团队在使 Inverse 成为非默认行为方面的疏忽。我们大多数人都非常谨慎地考虑数据一致性，**永远不会**让外键为空。因此，我们应该始终明确地将**Inverse**指示为默认行为。

其次，每当我们将子实体添加到父实体时，都可以通过父实体的辅助方法来执行此操作。所以即使我们忘记指出孩子的父母，帮助方法也可以明确地拥有那个孩子实体。

```
public class Person
{
    public virtual int PersonId { get; set; }
    public virtual string Lastname { get; set; }
    public virtual string Firstname { get; set; }

    public virtual IList<PhoneNumber> PhoneNumbers { get; set; }

    public virtual void AddToPhoneNumbers(PhoneNumber pn)
    {
        pn.Person = this;
        PhoneNumbers.Add(pn);
    }
} 
```

这就是我们的对象持久化例程的样子：

```
public static void Main (string[] args)
{
    var sess = Mapper.GetSessionFactory().OpenSession();

    var tx = sess.BeginTransaction();

    var jl = new Person { Firstname = "John", Lastname = "Lennon", PhoneNumbers = new List<PhoneNumber>() };
    var pm = new Person { Firstname = "Paul", Lastname = "McCartney", PhoneNumbers = new List<PhoneNumber>() };

    jl.AddToPhoneNumbers(new PhoneNumber { ThePhoneNumber = "9" });
    jl.AddToPhoneNumbers(new PhoneNumber { ThePhoneNumber = "8" });
    jl.AddToPhoneNumbers(new PhoneNumber { ThePhoneNumber = "6" });

    pm.AddToPhoneNumbers(new PhoneNumber { ThePhoneNumber = "1" });

    sess.Save (pm);
    sess.Save (jl);                     

    tx.Commit();            
} 
```

这就是我们的对象被持久化的方式：

```
BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
select nextval ('person_person_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('person_person_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
select nextval ('phone_number_phone_number_id_seq')
INSERT INTO person (lastname, firstname, person_id) VALUES (((E'McCartney')::text), ((E'Paul')::text), ((113)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'1')::text), ((113)::int4), ((314)::int4))
INSERT INTO person (lastname, firstname, person_id) VALUES (((E'Lennon')::text), ((E'John')::text), ((114)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'9')::text), ((114)::int4), ((315)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'8')::text), ((114)::int4), ((316)::int4))
INSERT INTO phone_number (the_phone_number, person_id, phone_number_id) VALUES (((E'6')::text), ((114)::int4), ((317)::int4))
COMMIT 
```

* * *

Inverse 的另一个很好的类比：[https ://stackoverflow.com/a/1067854](https://stackoverflow.com/a/1067854)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:46:43.650

对您的原始代码稍作调整就可以实现这一点，为清楚起见，我将发布整个代码，

```
public class Person
    {
        public virtual int Id { get; set; }

        public virtual string Name { get; set; }

        public virtual IList<Address> Addresses { get; set; }

    }

public class Address
    {
        public virtual int Id { get; set; }

        public virtual int PersonId { get; set; }

        public virtual string Street { get; set; }  
    }

public class PersonOverrides : IAutoMappingOverride<Person>
    {
        public void Override(AutoMapping<Person> mapping)
        {
            mapping.Id(x => x.Id);
            mapping.HasMany(x => x.Addresses).KeyColumn("PersonId").Cascade.All();            
        }
    } 
```

这是更改后的代码，

```
public class AddressOverrides : IAutoMappingOverride<Address>
    {
        public void Override(AutoMapping<Address> mapping)
        {
            mapping.Id(x => x.Id);
            mapping.Map(x => x.PersonId).Column("PersonId");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:14:13.013

您的 PersonId 属性似乎是映射和常规属性，而不是对其他对象的引用。所以我建议你尝试两件事：

1.  尝试将您的 PersonId 属性更改为 Person 类型并将其命名为 Person
2.  验证您的代码是否在事务内部执行（它会影响 nhibernate 与关联的工作方式）
3.  将您生成的自动映射保存到 XML 文件中，并查看 nhiberante 实际如何与您的模型一起使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T04:43:06.790

您需要使用参考。我不熟悉 IAutoMappingOverride，但这是我在手动映射中的做法，请注意 AnswerMap 对问题的参考：

```
public class QuestionMap : ClassMap<Question>
{
    public QuestionMap()
    {
        Id(x => x.QuestionId).GeneratedBy.Sequence("question_seq");

        Map(x => x.TheQuestion).Not.Nullable();

        HasMany(x => x.Answers).Inverse().Not.LazyLoad().Cascade.AllDeleteOrphan();
    }
}

public class AnswerMap : ClassMap<Answer>
{
    public AnswerMap()
    {
        References(x => x.Question);

        Id(x => x.AnswerId).GeneratedBy.Sequence("answer_seq");

        Map(x => x.TheAnswer).Not.Nullable();
    }
} 
```

* * *

此处型号：

```
public class Question
{
    public virtual int QuestionId { get; set; }

    public virtual string TheQuestion { get; set; }        

    public virtual IList<Answer> Answers { get; set; }
}

public class Answer
{
    public virtual Question Question { get; set; }

    public virtual int AnswerId { get; set; }

    public virtual string TheAnswer { get; set; }                
} 
```

请注意，我们没有`public virtual int QuestionId { get; set; }`在 Answer 类上使用，我们应该使用`public virtual Question Question { get; set; }`。这种方式更加面向对象，基本上清楚您的域模型的外观，摆脱对象应该如何相互关联（不是通过 int，不是通过字符串等；而是通过对象引用）

为了减轻您的担忧，加载对象（通过`session.Load`）不会导致数据库往返。

```
var answer = new Answer {
   // session.Load does not make database request
   Question = session.Load<Question>(primaryKeyValueHere), 

   TheAnswer = "42"
}; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-05T11:26:57.483

似乎是设计问题

如果目的是避免在地址上下文使用的 a/c 上引用地址内的人

然后我会介绍一个“鉴别器”

IE

```
Address {AddressId, ...}
PersonAddress : Address {Person, ...}, 
CustomerAddress : Address {Customer, ...}, 
VendorAddress : Address {Vendor, ...} 
```

您也可以通过公式推断鉴别器，而不是指定硬鉴别器值

Ref :[基于联合财产的鉴别器](https://stackoverflow.com/questions/2740128/discriminator-based-on-joined-property)

如果允许/可能，或者修改数据库结构

```
Persons [PersonId, ...]
Addresses [AddressId]
AddressDetails [AddressDetailId, AddressId, ...] 
```

使用如下映射（不知道如何以流利的方式完成，但可以通过 xml） 1.）通过连接表的人员 + 地址 2.）通过参考的地址 + 地址详细信息

我肯定更喜欢第一个选项

欢呼...

# c# - 光线正在被相机改变

> ID：10344113
> 
> 赞同：1
> 
> 时间：2012-04-27T02:44:35.840
> 
> 标签：c#, opengl, lighting, opentk

很长一段时间以来，我一直推迟在 OpenTK 中进行的一个项目中修复照明。问题基本上是当我旋转相机时，我正在显示的地形上显示的照明也会旋转。

这是我的 onRenderFrame 代码片段：

```
protected override void OnRenderFrame(FrameEventArgs e)
    {
        base.OnRenderFrame(e);

        GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);

        float dist = (float)Math.Sin(Math.PI / 3) * camZoom;

        Matrix4 view = Matrix4.LookAt(new Vector3(-(float)Math.Cos(camRot) * dist, dist, -(float)Math.Sin(camRot) * dist) + camPos, camPos, new Vector3(0, 1, 0));
        //Note: camPos isn't actually the position of the camera, rather the target of it. The actual camera position is calculated above.

        GL.MatrixMode(MatrixMode.Modelview);

        GL.LoadMatrix(ref view);

        float tx = 50;
        float ty = 20;
        float tz = -15;

        GL.Light(LightName.Light0, LightParameter.Position, new float[] { tx, ty, tz});

        GL.Begin(BeginMode.Lines);
        DrawBox(tx - 2, tx + 2, ty - 2, ty + 2, tz - 2, tz + 2);
        GL.End(); 
```

...地形图在这里

我使用我的快速 DrawBox 函数在灯光的位置周围绘制了一个简单的框。它工作正常，我什至实现了一些运动，例如围绕地球的太阳。虽然相机没有移动，但效果很好。但是一旦我转动相机，灯光不再显示它应该有的东西，它似乎已经“移动”了灯光，但实际上并没有移动它（绘制的盒子没有移动，只有灯光的效果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:47:32.853

根据带有 GL_POSITION 参数的 glLight的[OpenGL 规范：](http://www.opengl.org/sdk/docs/man/xhtml/glLight.xml)

> GL_POSITION： **params 包含四个整数或浮点值**，用于指定光在齐次对象坐标中的位置。整数和浮点值都直接映射。整数和浮点值都没有被限制。
> 
> 当调用 glLight 时，位置由模型视图矩阵转换（就像它是一个点一样），并存储在眼睛坐标中。**如果位置的 w 分量为 0，则将光源视为定向光源。漫反射和镜面反射光照计算会考虑光的方向，但不会考虑其实际位置，并且会禁用衰减。**否则，漫反射和镜面光照计算基于眼睛坐标中光线的实际位置，并启用衰减。初始位置为 (0, 0, 1, 0)；因此，初始光源是定向的，平行于 -z 轴的方向。

你只传递三个花车。我不能确定 OpenTK 使用什么作为第四个 (w) 组件，但我猜它会将任何未指定的参数设为 0，从而使您的光线具有方向性并忽略您给出的位置。我会尝试将 1.0 添加到您传入的数组的末尾，看看是否可以解决问题。

# vim - 什么使字体在 gVim 中无效？

> ID：10344115
> 
> 赞同：8
> 
> 时间：2012-04-27T02:45:31.270
> 
> 标签：vim, fonts

我在 Windows 7 上使用 gVim，最近我在 C:\Windows\Fonts 中添加了一些字体。在 gVim 中，我可以`:set guifont=Font_Name`使用其中的一些，并且可以按预期设置，但对于其他几个，我得到`E596 Invalid font(s): Font_Name`.

显然，没有进行剪切的字体具有或缺少 gVim 对其加载的字体所需的某些属性。有谁知道这些是什么，如果有的话，人们可能会做些什么来修改现有字体以使其符合这些标准？

特别是，以下字体失败：

*   [克罗诺斯显示器](http://www.fontyukle.net/en/1,cronos)
*   [解放单声道](http://www.fontspace.com/red-hat-inc/liberation-mono)
*   [等宽](http://www.fontspace.com/george-williams/monospace)

得知这些字体不完整或缺少 Vim 所需的东西，我不会感到惊讶。我只是不知道要检查什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T06:04:22.457

你读了`:h guifont`吗？

我已经在另一个非常相似的问题中做出了疯狂的猜测，但我找不到它 ATM。简而言之，Windows 上的 GVim 对其字体非常挑剔：它想要等宽字体，但您尝试过的字体中的某些内容并不符合它的喜好。

在这种情况下，“Cronos Display”显然不是等宽的，所以它不可能工作。我不知道“Monospace”，但我很惊讶“Liberation Mono”不起作用。

您可以在字体编辑器中打开字体，看看它们是否真的是等宽字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-27T23:40:22.607

这是我在同一周提出的一个[类似问题](https://stackoverflow.com/questions/10290912/how-do-i-get-gnu-unifont-or-free-mono-working-on-gvim-windows/10308297#10308297)，很奇怪。

就我而言，它归结为两件事，我可以使用 FontForge 进行调整：

1.  拥有“等宽”而不是“均匀宽度”的正确 PANOSE 标签（无论是什么）
2.  所有字符必须具有相同的宽度。我可以通过执行以下操作来解决此问题：

    1.  选择所有元素
    2.  元素 -> 验证 -> 查找问题
    3.  选择随机 -> 位图/轮廓提前不匹配
    4.  选择 BB -> Check Advance: 600
    5.  选择确定

就我而言，它一一列出了所有宽度为 0 的元素的列表，并让我可以选择将它们修复为 600 宽度。

改变这些似乎对我有用，但我可能犯了某种字体。

# c# - 从不同的端点返回不同的 DataMember

> ID：10344117
> 
> 赞同：0
> 
> 时间：2012-04-27T02:45:39.430
> 
> 标签：c#, wcf

是否可以根据返回的端点返回一个类的不同 DataMembers？

从一个端点我只想返回一个类的一些基本数据成员，但从另一个端点我想返回同一个类的更详细的成员。

我的想法是我可以有一个基本类并派生另一个具有更详细信息的类并从不同的端点返回这些信息，但我也想知道是否有另一种方法可以实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:21:22.317

你的建议完全合理。这些类无论如何都是 DTO（大概），它们的全部意义在于将您的业务模型与消息模型分离。如果你有两个消息模型，一个派生（或包含）另一个就可以了。

考虑一下，替代模型会是什么样子？具有复杂注释的单一类型，表示这些数据成员属于哪个服务？这将很快变得笨拙，甚至没有考虑您的业务对象将如何映射到这个模型（即映射是否需要知道正在调用哪个端点？这非常难看）。

所以就：

```
public class EntityBase
{
    // basic details here
}

public class EntityDetails: EntityBase
{
    // more complex details initialised here
} 
```

然后您的端点可以针对这些进行强类型化，您可以共享映射逻辑，并实现您想要的。

# algorithm - 球体到点的线性最小二乘拟合

> ID：10344119
> 
> 赞同：9
> 
> 时间：2012-04-27T02:45:46.603
> 
> 标签：algorithm, 3d, least-squares

我正在寻找一种算法来找到点云和球体之间的最佳拟合。

也就是说，我想最小化

[![公式](../Images/b70b87a50d2b7ec68733d2d6770daf2e.png)](https://i.stack.imgur.com/DIRuf.gif)

其中*C*是球体的中心，*r*是球体的半径，每个*P*是我的*n*个点集中的一个点。变量显然是*Cx*、*Cy*、*Cz*和*r*。**在我的情况下，我可以事先获得一个已知的*r*，只留下*C*的组件作为变量。**

我真的不想使用任何类型的迭代最小化（例如牛顿法、Levenberg-Marquardt 等）——我更喜欢一组线性方程或明确使用 SVD 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:26:09.477

没有即将出现的矩阵方程。您选择的 E 表现不佳；它的偏导数甚至不是连续的，更不用说线性了。即使有不同的目标，这个优化问题似乎基本上是非凸的。具有一个点 P 和非零半径 r，最优解集是关于 P 的球体。

您可能应该重新询问更多优化知识的交流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-18T15:44:17.303

您可能会发现以下参考资料很有趣，但我会警告您，您需要熟悉几何代数 - 特别是保形几何代数才能理解数学。但是，该算法可以直接使用标准线性代数技术实现，并且不是迭代的。

需要注意的是，该算法至少符合中心和半径，您可以找到一种方法来约束拟合，从而限制半径。

使用 (n+ 2)-D 等距表示法对 nD 欧几里得空间中的 k 球体进行总最小二乘拟合。L Dorst，数学成像与视觉杂志，2014 p1-21

您可以从 [Leo Dorst 的 researchgate 页面获取一份副本](https://www.researchgate.net/publication/266149530_Total_Least_Squares_Fitting_of_k-Spheres_in_n-D_Euclidean_Space_Using_an_n2-D_Isometric_Representation)

最后一件事，我和作者没有任何关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:40:15.837

可以在[这里](http://www.cs.uccs.edu/~semwal/KIP_KNIGHT/newjkkthesis-4.pdf)找到制作矩阵方程的简短描述。

我已经看到 WildMagic 库使用[迭代方法](http://www.geometrictools.com/Documentation/LeastSquaresFitting.pdf)（至少在版本 4 中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-14T13:39:59.610

没有迭代很难做到这一点。

我将按如下方式进行：

1.  通过对所有点的 (X,Y,Z) 坐标求平均来找到整体中点

2.  有了这个结果，找到到中点的平均距离 Ravg，决定好还是继续..

3.  从您的集合中删除距离步骤 2 中发现的 Ravg 太远的点

4.  返回第 1 步（再次平均点，产生更好的中点）

当然，这将需要 (2) 和 (4) 的一些条件，这取决于您的点云的质量！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-07T02:36:25.123

Ian Coope 有一个有趣的算法，他使用变量的变化来线性化问题。拟合非常稳健，虽然它略微重新定义了最优性条件，但我发现它通常在视觉上更好，尤其是对于嘈杂的数据。

Coope 论文的预印本可在此处获得：[https](https://ir.canterbury.ac.nz/bitstream/handle/10092/11104/coope_report_no69_1992.pdf) ://ir.canterbury.ac.nz/bitstream/handle/10092/11104/coope_report_no69_1992.pdf 。

我发现该算法非常有用，因此我在[scikit-guess](https://scikit-guess.readthedocs.io/en/latest/index.html)中将其实现为[`skg.nsphere_fit`](https://scikit-guess.readthedocs.io/en/latest/generated/skg.nsphere_fit.html). 假设你有一个`(m, n)`数组`p`，由 M 个维度为 N 的点组成（这里 N=3）：

```
r, c = skg.nsphere_fit(p) 
```

半径 ,`r`是一个标量，`c`是一个`n`包含中心的向量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-14T12:08:39.877

您可能对最适合的 d 维球体感兴趣，即最小化到中心的平方距离的总体方差；它有一个简单的解析解（矩阵微积分）：参见 Cerisier 等人的开放获取论文的附录。在 J. 计算机。生物学。24(11), 1134-1137 (2017), [https://doi.org/10.1089/cmb.2017.0061](https://doi.org/10.1089/cmb.2017.0061) 它在数据点被加权时起作用（它甚至适用于连续分布；作为副产品，当 d= 1，检索一个众所周知的不等式：峰度总是大于平方偏度加 1)。

# c - scanf 获取之前执行的 getchar() 的输入

> ID：10344120
> 
> 赞同：1
> 
> 时间：2012-04-27T02:45:52.300
> 
> 标签：c, buffer, scanf, getchar

我使用 getchar() 来读取字符并将它们放在桌子上，以及使用 scanf 来获取整数。

scanf() 的问题在于它不等待用户输入，而是使用 getchar() 从缓冲区读取上一行给出的最后一个字符。

我试过 sscanf, fflush(stdin); 等等，但我的行为仍然相同。

```
#include <stdio.h>
#include <stdlib.h>

main()
{
    int i, choice, tmp_day, tmp_month;
    char name[5];

    printf("insert choice(1-3):\n");
    scanf("%d",&choice);

    printf("name: ");
    for (i=0;i<5;i++) name[i]=getchar();

    name[5] = '\0' ;

    printf("day (1-31): ");

    scanf("%d",&tmp_day);

    printf("month (1-12): ");

    scanf("%d",&tmp_month);

    printf("\n%d %d", tmp_day, tmp_month);

} 
```

任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:57:49.837

详细讨论`fflush(stdin)`哪个不一定便携。

```
http://c-faq.com/stdio/gets_flush2.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:47:11.230

在每个 scanf 之后使用这个语句：

```
fflush(stdin); 
```

# python - 在 Scapy 中的每个数据包上指定时间戳？

> ID：10344127
> 
> 赞同：6
> 
> 时间：2012-04-27T02:47:17.960
> 
> 标签：python, scapy

使用[Scapy](http://www.secdev.org/projects/scapy/)，当我创建一个数据包并将其写入`pcap`文件时，它会将数据包的时间戳设置为当前时间。

这是我目前的用法。`1335494712.991895`是我创建数据包的时间：

```
>>> a = Ether()/IP(src='1.1.1.1',dst='2.2.2.2')/TCP(sport=1337,dport=31337)
>>> wrpcap('single-tcp-packet.pcap', a)

# tcpdump -tt -r single-tcp-packet.pcap
reading from file single-tcp-packet.pcap, link-type EN10MB (Ethernet)
1335494712.991895 IP 1.1.1.1.menandmice-dns > arennes-651-1-107-2.w2-2.abo.wanadoo.fr.31337: Flags [S], seq 0, win 8192, length 0 
```

如何为每个数据包指定自己的时间戳？

我在文档中看到了用于设置时间戳的`TCP`时间戳，但它似乎对实际`pcap`时间戳没有影响。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T02:51:45.073

啊! 找到了。

简单地：

```
>>> a.time = 1234567890
>>> wrpcap('single-tcp-packet.pcap', a)

# tcpdump -tt -r single-tcp-packet.pcap
reading from file single-tcp-packet.pcap, link-type EN10MB (Ethernet)
1234567890.000000 IP 1.1.1.1.menandmice-dns > arennes-651-1-107-2.w2-2.abo.wanadoo.fr.31337: Flags [S], seq 0, win 8192, length 0 
```

# android - Android，如何将标题（自定义视图）添加到图库的每个图像项（来自图库适配器）？

> ID：10344128
> 
> 赞同：0
> 
> 时间：2012-04-27T02:47:36.620
> 
> 标签：android, view, gallery, adapter

我可以通过图库适配器在图库中显示我的图像。现在，我需要为底部的每个图像添加标题。我不知道如何添加它。这是我的适配器代码：

```
 public class LensaPhotoAdapter_KM extends BaseAdapter{

    private int mGalleryItemBackground;

    private Context context;

    private ImageLoader imageLoader;
//  private File cacheDir;
    private ImageLoaderConfiguration config;
    private DisplayImageOptions options;
    private ArrayList<String> imageURLs = new ArrayList<String>();
    private ArrayList<String> imageTitle = new ArrayList<String>();

    public LensaPhotoAdapter_KM(Context context){
        Log.i("LensaPhotoAdapter", "Try to build the screen...");

        this.context = context;

        TypedArray attr = context.obtainStyledAttributes(R.styleable.HelloGallery);
        mGalleryItemBackground = attr.getResourceId(R.styleable.HelloGallery_android_galleryItemBackground, 0);
        attr.recycle();

        // Get singleton instance of ImageLoader
        imageLoader = ImageLoader.getInstance();
    }

    public void setData(ImageFeedItemList imageFeedItemList){
        int numberOfItems = imageFeedItemList.getHeaderImage().size();

        imageTitle = imageFeedItemList.getTitle();

//      for(String str: imageFeedItemList.getHeaderImage())
//          Log.i("title is:", str);

        for(int i=0; i<numberOfItems; i++){
            String str = imageFeedItemList.getTitle().get(i);
            str = str.substring(0, str.indexOf(" "));
            if(str.equalsIgnoreCase("Konsert"))
                imageURLs.add(imageFeedItemList.getHeaderImage().get(i));

//          for(String str1: imageURLs)
//              Log.i("title is:", str1);
        }

//      cacheDir = new File(Environment.getExternalStorageDirectory(), "UniversalImageLoader/Cache");

        // Create configuration for ImageLoader
        config = new ImageLoaderConfiguration.Builder(context)
                    .maxImageWidthForMemoryCache(800)
                    .maxImageHeightForMemoryCache(800)
                    .httpConnectTimeout(5000)
                    .httpReadTimeout(30000)
                    .threadPoolSize(5)
                    .threadPriority(Thread.MIN_PRIORITY + 2)
                    .denyCacheImageMultipleSizesInMemory()
                    .memoryCache(new UsingFreqLimitedMemoryCache(2000000)) // You can pass your own memory cache implementation
//                  .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
                    .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
                    .build();

        // Creates display image options for custom display task
        options = new DisplayImageOptions.Builder()
                    .showStubImage(R.drawable.icon_loading)
                    .showImageForEmptyUrl(R.drawable.icon_remove)
                    .cacheInMemory()
                    .cacheOnDisc()
                    .decodingType(DecodingType.MEMORY_SAVING)
                    .build();

        // Initialize ImageLoader with created configuration. Do it once.
        imageLoader.init(config);
    }

    //---returns the number of images---
    public int getCount() {
        return imageURLs.size();
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return position;
    }

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent){      
        ImageView imageView = new ImageView(context);
        imageView.setLayoutParams(new Gallery.LayoutParams(250, 250));
        imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        imageView.setBackgroundResource(mGalleryItemBackground);

        // Load and display image
        String imageUrl = imageURLs.get(position);
        imageLoader.displayImage(imageUrl, imageView, options);

        return imageView;
    } 
} 
```

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:35:17.400

在您的中，您可以扩展同时具有 ImageView 和 TextView 的布局`getView()`，而不是动态创建，然后您可以适当地填写：`ImageView`

```
 View container = inflater.inflate(R.layout.the_layout, parent, false);
    ImageView image = ll.findViewById(R.id.image);
    String imageUrl = imageURLs.get(position);
    imageLoader.displayImage(imageUrl, imageView, options);
    TextView text = ll.findViewById(R.id.text);
    text.setText("whatever"); 
```

# java - 从服务器读取 byte[]

> ID：10344132
> 
> 赞同：0
> 
> 时间：2012-04-27T02:48:06.967
> 
> 标签：java, datainputstream

我正在尝试读取`byte[]`从客户端发送到服务器的内容。

这是我的客户代码...

```
 din = new DataInputStream(socket.getInputStream());
 dout = new DataOutputStream(socket.getOutputStream());

 Cipher cipher = Cipher.getInstance("RSA"); 
 // encrypt the aeskey using the public key 
 cipher.init(Cipher.ENCRYPT_MODE, pk);

 byte[] cipherText = cipher.doFinal(aesKey.getEncoded());
 dout.write(cipherText); 
```

这是我的服务器代码...

```
 DataInputStream dis = new DataInputStream(socket.getInputStream());          
 DataOutputStream dos = new DataOutputStream(socket.getOutputStream());

 String chiper = dis.readUTF();
 System.out.println(chiper); 
```

但是，该`dis.readUTF();`行失败并出现异常......

```
java.io.EOFException at java.io.DataInputStream.readFully(DataInputStream.java:197)
    at java.io.DataInputStream.readUTF(DataInputStream.java:609)
    at java.io.DataInputStream.readUTF(DataInputStream.java:564)
    at gameserver.ClientHandler.run(GameServer.java:65) 
```

有人可以帮我理解为什么这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T02:54:25.850

对于初学者，如果您在一端写入一系列（加密！）字节，并尝试在另一端读取 UTF 格式的字符串……您将度过一段糟糕的时光。

我建议在客户端你应该做类似的事情

```
dout.writeInt(cipherText.length);
dout.write(cipherText); 
```

然后在服务器端你应该做类似的事情

```
int byteLength = dis.readInt(); // now I know how many bytes to read
byte[] theBytes = new byte[byteLength];
dis.readFully(theBytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:45:03.923

`DataIputStream.readUTF()`适用于您使用 DataOutputStream.writeUTF()` 写入的数据。您还没有编写 UTF，因此您无法阅读它。

这是二进制数据，因此您根本不应该考虑 UTF 或字符串。用 写入数组的长度`writeInt()`，然后用 写入数组`write()`。在另一端，用 读取长度`readInt()`，分配一个那么大的 byte[] 缓冲区，然后用 将密文读入其中`readFully()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T01:28:36.833

你必须使用 read 方法获取消息并获取真实消息的字符数，然后将其转换为字符串

```
int bytesRead = 0;
byte[] messageByte = new byte[1000];

bytesRead = dis.read(messageByte);
String chiper = new String(messageByte, 0, bytesRead);
System.out.println(chiper); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T03:08:44.973

在客户端，您应该将 byte[] 数组转换为字符串并用于 `dout.writeUTF()`发送转换后的字符串。

# javascript - 触发器成功处理程序已完成执行，带有嵌套的 ajax 请求

> ID：10344136
> 
> 赞同：2
> 
> 时间：2012-04-27T02:48:31.037
> 
> 标签：javascript, jquery, ajax

我有很多嵌套的 ajax 请求，如下所示。我在下面的成功函数中有很多事情要做，我需要一些类似成功的东西，**当成功完成时会触发**。`complete(jqXHR, textStatus)`只是似乎开火了`success`，我认为行不通[`.ajaxComplete()`](http://api.jquery.com/ajaxComplete/)。

```
$.ajax({
    url: 'api/periods.json',
    dataType: 'json',
    success: function (d1) {
        //more nested ajax requests
    },
}); 
```

**解决方案**：

一个`$.ajax()`名为 (finished + ajax) 的替换插件`$.fajax()`已创建。请检查一下，让我知道你的想法。[https://github.com/reggi/fajax](https://github.com/reggi/fajax)（记录得很好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:10:25.923

您可以为 jQuery.ajax 创建一个包装函数，以使其更简洁：

```
var started = 0, done = 0;
var globalHandler = function(){
    //do stuff when all success handlers are done
}
function handleAjax(args){
    var _success = args.success || function(){};
    args.success = function(jqXHR, textStatus){
        _success(jqXHR, textStatus);
        done++;
        if(done >= started)
             globalHandler();
    }
    var ajax = $.ajax(args);
    started++;
    return ajax;
} 
```

用法

```
handleAjax({
    url: 'api/periods.json',
    dataType: 'json',
    success: function (d1) {
        //more nested ajax requests like this:
        handleAjax({...});
    }
}); 
```

这会创建一个闭包，所以不要在那里做任何疯狂的内存密集型的事情，你应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T02:53:29.680

我不太确定你在问什么，所以如果我不正常，请原谅我，但我认为你可能想要这样的东西：

```
$.ajax({
  url: 'api/periods.json',
  dataType: 'json',
  success: function(d1){
   //more nested ajax requests
  },
}).done(function(msg){
     alert("Every Ajax Call is Complete!");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:17:41.690

您可能需要 .queue() 或 .Defered

```
$("#el").queue("queue_name",function(){        
    $.ajax({
       url: 'api/periods.json',
       dataType: 'json',
       success: function(d1){
           //more nested ajax requests
           $("#el").dequeue("queue_name"); // tell queue success is complete
       },
    });
}).queue("queue_name",function(){
   //do something you want when success is complete       
})
$("#el").dequeue("queue_name"); // start to execute 
```

或 $.Deferred()

```
$.ajax({
   url: 'api/periods.json',
   dataType: 'json',
   success: function(d1){
   var start = function(){
       var dtd = $.Deferred();
       //more nested ajax requests---------------
       $.post("xxx",function(){
           dtd.resolve(); // when success is complete
       });

       //----------------------------------------
       return dtd.promise();
   }
   start.apply(this).pipe(function(){ 
       //do something you want when success is complete 
   });

   },
}); 
```

# wordpress - 带有位置的标题：固定不停留在图像前面

> ID：10344138
> 
> 赞同：1
> 
> 时间：2012-04-27T02:49:00.200
> 
> 标签：wordpress, header, css-position

我正在尝试自定义 WordPress 模板，并且我的东西​​接近我想要的方式。最后一个问题是我有一个标题，`position:fixed`所以它一直漂浮在顶部。它可以工作，但是当它飘过图像时，它会在图像后面。如何让它在滚动时始终保持在前台？这是一个链接：

[http://miller-media.com/glossandglamblog/](http://miller-media.com/glossandglamblog/)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T02:51:04.283

您需要给它一个`z-index`比图像更高的值（例如，`1`）。

# ios - 最新的 Flex SDK 是否支持 iOS 5.1？

> ID：10344141
> 
> 赞同：3
> 
> 时间：2012-04-27T02:49:37.260
> 
> 标签：ios, apache-flex, flex4.6, ios5.1

几个月前，我们使用 Flex SDK 4.6 开发了一个 iPhone 应用程序，它运行良好（虽然速度很慢）。

但是，今天用户升级到 iOS 5.1 后无法安装该应用程序。

最新/最新的 Flex SDK 是否支持 iOS 5.1？

有没有项目有类似的问题？

有办法处理吗？

# wordpress - 无法获取类别图像以显示在 WordPress 的主页上

> ID：10344146
> 
> 赞同：0
> 
> 时间：2012-04-27T02:50:14.380
> 
> 标签：wordpress, blogs, categories

我正在研究客户的 WP，但在类别标题方面遇到了一个奇怪的问题。基本上我们有六个类别（您可以在页面右侧看到它们）。

当您进入主页 (http://www.glossandglam.com/blog) 时，您会看到标题旁边没有类别的帖子，除非它属于新娘类别。如果您向下滚动到第二个帖子，您会看到标题旁边显示“新娘”图像。此外，当您单击任何类别时，类别图像会显示在所有帖子旁边。

我需要在主页 (http://www.glossandglam.com/blog) 的标题旁边显示类别图像。有没有人有任何想法？

我已经尝试安装插件“Category Images II”，但这并没有成功。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:20:16.757

我有同样的问题，我希望下面的这个插件将有助于完整的存档功能

[http://wordpress.org/extend/plugins/category-page-icons/](http://wordpress.org/extend/plugins/category-page-icons/)

甚至您可以添加图标，例如绿色、红色等。作为类别、页面中的图像。

# jquery - Rails：让 Ajax 请求的结果显示在视图中？

> ID：10344149
> 
> 赞同：1
> 
> 时间：2012-04-27T02:50:51.940
> 
> 标签：jquery, ruby-on-rails

在我的 index.html.erb 中，我有一个通过 Ajax（我认为）提交的表单`:remote => true`

```
<%= form_tag locations_path, :method => :get, :remote=>true  do %>
  <p>
    <%= text_field_tag :location, params[:location] %>
    <%= submit_tag "Search Near", :name => nil %>
  </p>
<% end %> 
```

在 index 操作中，它被安排为通过 json 返回 @locations

```
def index
     if params[:location].present?
      @locations = Location.near(params[:location], 5 , :order => :distance)

    else
      @locations = Location.all
    end
     respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @locations }
    end

  end 
```

现在它只是返回（我希望）@locations。如何在 index.html.erb 的这个 div 中获得 @locations 的结果？

```
<div class="places">  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:56:31.657

我会建议一种稍微不同的方式：使用 .js 响应。然后它应该看起来像这样：

```
#def index
#some code...
respond_to do |format|
  format.html 
  format.js
end

#index.js.erb
$('.places').html("<%= escape_javascript(render :partial => "places_list") %>");

#_places_list.html.erb
<%- @locations.each do |location| %>
  <p><%= location.name %> </p>
<%- end %> 
```

The tutorial on this topic: [http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/](http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:03:43.010

`ajax:success`您可以在 javascript中绑定到表单元素上的事件

请参阅这篇文章以获得详细的解释：[Rails 3 Remote Links and Forms](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/) by Steve Schwartz

您可能还想替换它：

```
respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @locations }
end 
```

有了这个

```
respond_with @locations 
```

并将其添加到控制器的顶部：

```
respond_to :json 
```

# iphone - 如何处理加速，因为它不应该与显示刷新率相关联？

> ID：10344151
> 
> 赞同：1
> 
> 时间：2012-04-27T02:51:09.083
> 
> 标签：iphone, ios, accelerometer

如果我们`CADisplayLink`用来设置一个计时器，无论是 60fps、30fps 还是 15fps，我们使用加速度计的

```
acceleration.x 
```

要处理加速度，那么 60fps 将创建两倍于 30fps 的加速度，因为现在对象的`x`位置更新频率是两倍。如何正确处理现实加速？（可能是为了模拟真实的重力拉力）。

* * *

**更新：** 我想我犯了一个错误：它不是 fps `CADisplayLink`，而是加速度计事件处理程序的频率。如果我将其设置为 1 / 60.0 或 1 / 30.0 或 1 / 15.0，则对象加速较慢...由于事件处理程序执行

```
objVelocity.x += acceleration.x; 
```

我认为频率应该自动调整以使速度增加更慢，但不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:38:18.737

这个概念是错误的。即使您可以将其设置为 100 fps，加速度也将完全相同。它不会改变，因为加速度是恒定的，直到运动管理器改变它，这取决于你在其中设置的更新频率。即使它改变了，你也不能只是“添加”它，因为加速不是这样工作的。该设备会在您阅读它的任何时刻为您提供加速度（包括重力，除非您使用设备运动）。

如果你想获得速度，你有时间因素来补偿 fps 的差异。如果您想要位置，那么事情会变得更加复杂，因为双重积分会产生噪音，并且您必须考虑到读数可能不会像您预期的那样快速变化。根据我的实验，您可以安全地将其设置为每秒 70 次左右，但它确实会随着您使用的设备（4s 或 4 左右）而改变

所以供参考：

加速度计为您提供加速度，这将始终是一个读数，取决于设备在任何给定时间的加速度。

如果你整合你得到速度的加速度，这就是你似乎想要得到的，等式如下：

v = u + a * t

现在在这里仔细看看如何让你的总速度加到初始速度（你以前的速度 u）上，新的速度是加速度乘以时间（加速度是加速度计的读数，时间是时间间隔读数之间）。

例如：

您的对象从没有运动开始，加速度应该读取 0（除非您使用的是裸加速度计而不是运动管理器，在这种情况下您会看到重力）。现在你让它快速向右移动，设备读取 5 个读数，每个读数有 0.2 秒的差异。

所以你可以说 1 2 1 -1 -2 ...那是因为一开始它会加速，但当它开始减速时它会减速，但仍然，只要考虑第一个读数，你当时的速度是 0 * 1* .2，现在时间 to 是 .2 + 2 * .2 等等。理想情况下，从开始移动到结束移动的所有速度都应该总和为 0，因为运动定律。

现在，如果你碰巧想要得到位移，那么要准确得到它是非常复杂的，因为你必须再次积分，而双重积分在错误方面是疯狂的。

有几种方法可以获得位移，事实上我记得堆栈溢出中的一些帖子讨论了如何使用设备加速度计获得它。

# html - Chrome 网上商店 CSS 布局

> ID：10344154
> 
> 赞同：2
> 
> 时间：2012-04-27T02:51:30.127
> 
> 标签：html, css, google-chrome, layout

我看到了 chrome 网上商店，想知道他们是如何创建这样的 css 布局的。我的意思是当您重新调整浏览器大小时，如何创建具有固定大小像素左侧面板和灵活流体布局的布局。网格 css 框架可以归档相同的结果吗？

[https://chrome.google.com/webstore/category/home?utm_source=chrome-ntp-icon](https://chrome.google.com/webstore/category/home?utm_source=chrome-ntp-icon)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T19:44:11.930

`width`您可能希望对左侧面板使用固定变量`width`，对右侧面板使用变量以及媒体查询。

当视口 = 定义的大小或其他变量时，媒体查询允许您将 .CSS 替换为另一个。

请务必查看有关如何使用媒体查询来满足您的特定需求的更多信息：http: [//www.htmlgoodies.com/beyond/css/introduction-to-css-media-queries.html](http://www.htmlgoodies.com/beyond/css/introduction-to-css-media-queries.html)

# deployment - Opa 生成的可执行文件到底是什么？

> ID：10344157
> 
> 赞同：5
> 
> 时间：2012-04-27T02:52:14.907
> 
> 标签：deployment, opa

是服务器吗？还是我需要在 apache 后面运行 Opa？基本上 - 如果我想部署一个 Opa 应用程序，它会像在 VPS 上启动可执行文件一样简单，还是我需要一些其他堆栈元素？

编辑：注意到一个类似的问题，但我对是否可以仅使用 exe 进行部署感兴趣 - 而不是在任何服务器后面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T06:48:46.963

Opa 编译器生成一个独立的可执行文件。您不需要任何其他堆栈元素，Web 服务器已完全集成到生成的可执行文件中。

您可以启动它的唯一元素是外部数据库。但是您可以将 Opa 数据库 (DB3) 用作不需要数据库服务器的本地数据库（如果未设置`./monapp.exe --db-local /path/to/db`选项，则使用默认路径）。`--db-local`

如果您需要 Mongo 数据库，则应使用`--database mongo`选项编译应用程序。生成的可执行文件将能够自动安装 MongoDb ( `./monapp.exe --db-local /path/to/mongodb`)

# c# - Windows Phone 中的 SQLite 客户端不一致错误

> ID：10344159
> 
> 赞同：0
> 
> 时间：2012-04-27T02:52:16.700
> 
> 标签：c#, database, sqlite, windows-phone-7, isolatedstorage

我试图将数据插入数据库，但是当我选择我插入的内容时，我得到不一致的数据。

比如，我插入 a="data1", b="data2", c="data3"

但是当我选择时，我得到 a="0", b="data2", c="data3"

为什么我使用相同的方法，但其中一些获得不同的价值..

我的工具参考：[SQLiteClient for WP](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx)（我测试了他的代码，它运行正确，我完全按照他的做法，但是我得到了不同的结果..）

插入功能：

```
String t_title = txtTitle.Text;
String t_img = "test";
String t_answer_a = txtAnswer1.Text;
String t_answer_b = txtAnswer2.Text;
String t_answer_c = txtAnswer3.Text;
String t_answer_d = txtAnswer4.Text;
String t_answer = txtAnswer1.Text;
int t_cat = 1;

int rec;
Random rnd = new Random();
string strInsert = " INSERT INTO tlg_question (q_title,q_img,q_ques_a,q_ques_b,q_ques_c,q_ques_d,q_ans,q_cat) VALUES (@q_title,@q_img,@q_ques_a,@q_ques_b,@q_ques_c,@q_ques_d,@q_ans,@q_cat)";

tlg_question tst = new tlg_question
{
    q_title = t_title,
    q_img = t_img,
    q_ques_a = t_answer_a,
    q_ques_b = t_answer_b,
    q_ques_c = t_answer_c,
    q_ques_d = t_answer_d,
    q_ans = t_answer,
    q_cat = t_cat
};
rec = (Application.Current as App).db.Insert<tlg_question>(tst, strInsert); 
```

选择功能：

```
ObservableCollection<tlg_question> _tlg_questionEntries = null;

string strSelect = "SELECT q_id,q_title,q_img,q_ques_a,q_ques_b,q_ques_c,q_ques_d,q_ans,q_cat FROM tlg_question ORDER BY q_id DESC LIMIT 0,1";
_tlg_questionEntries = (Application.Current as App).db.SelectObservableCollection<tlg_question>(strSelect);

foreach (tlg_question data in _tlg_questionEntries)
{
    qid = data.q_id;
    txtTitle.Text += data.q_title;
    img = data.q_img;
    txtAnswer1.Text += data.q_ques_a;
    txtAnswer2.Text += data.q_ques_b;
    txtAnswer3.Text += data.q_ques_c;
    txtAnswer4.Text += data.q_ques_d;
} 
```

还有我的更新功能：

```
String t_title = txtTitle.Text;
String t_answer_a = txtAnswer1.Text;
String t_answer_b = txtAnswer2.Text;
String t_answer_c = txtAnswer3.Text;
String t_answer_d = txtAnswer4.Text;

int rec;
Random rnd = new Random();
string strUpdate = " UPDATE tlg_question SET q_title=@q_title,q_ques_a=@q_ques_a,q_ques_b=@q_ques_b,q_ques_c=@q_ques_c,q_ques_d=@q_ques_d,q_ans=@q_ans WHERE q_id=@q_id";

tlg_question tst = new tlg_question
{
    q_id = qid,
    q_title = t_title,
    q_ques_a = t_answer_a,
    q_ques_b = t_answer_b,
    q_ques_c = t_answer_c,
    q_ques_d = t_answer_d,
    q_ans = t_answer_a
};
rec = (Application.Current as App).db.Update<tlg_question>(tst, strUpdate); 
```

感谢任何可以帮助我的人！！！

*或者，如果您认为我应该放弃 SQLite 并转而使用其他数据库，请告诉我，我首先选择 SQLite，因为它处理像 mysql 这样的简单查询，以及 FF SQLite Manager..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:55:06.453

好的，我已经测试过了，最后发现，我需要同时插入或更新所有列，然后才能正确完成工作，我不确定这是因为 DBHelper 限制或 SQLiteClient 的限制。

更多详细信息：

例如，如果我的预设数据库声明了 4 列，如下所示：

```
[q_id, q_title, q_ques, q_ans] (q_id as Auto Increment) 
```

然后当我执行 INSERT 或 UPDATE 时，即使我只需要插入 q_title（同时将 q_ques 和 q_ans 保留为 DEFAULT 值），我也需要在操作中包含所有列的参数：

```
INSERT INTO tlg_question (q_title,q_ques,q_ans) VALUES (@q_title,@q_ques,@q_ans)"; 
```

不像我通常在 PHP MYSQL 中所做的那样，我可以简单地插入/更新我喜欢的特定列而不会出现问题：

```
INSERT INTO tlg_question (q_title) VALUES (@q_title)"; 
```

p/s：我是 SQLite 和 C# 的新手，如果您知道实际发生的事情，请建议/纠正我..

谢谢！:)

# java - Hibernate 2 级数据缓存和集成/验收测试

> ID：10344160
> 
> 赞同：5
> 
> 时间：2012-04-27T02:52:32.423
> 
> 标签：java, hibernate, caching, jpa, selenium

我有一个 JPA/Hibernate/Spring/Tomcat Web 应用程序，出于性能原因启用了二级数据缓存。缓存做得很好！

我还有一个 Cucumber 测试套件，它直接将一些测试数据添加到应用程序的数据库中，然后执行一些 Selenium 步骤。当然它会失败，因为应用程序由于二级缓存而看不到更新。

我知道我可以为禁用缓存的测试进行特殊构建（通过传递一些用于 Maven 过滤或类似的布尔属性）但是有很多 @Cache 注释实体，因此禁用缓存会使应用程序失败，并出现异常“二级缓存不是启用”。

另一种方法可能是使用 ehcache 远程处理来清除缓存或将其配置为零对象生命周期或类似的。

我也可以仅使用应用程序 UI 创建我的测试数据，但这会给测试用例增加不必要的复杂性，因此我更喜欢在测试运行之前将它们写入数据库。

**有人可以分享他们启用二级数据缓存的集成测试应用程序的方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:28:57.577

如果您需要使用单元测试来测试二级缓存，您必须确保在每次调用 dao 方法时关闭会话并打开它。否则，您将使用仅存在于一个/当前休眠会话范围内的一级缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:29:14.603

虽然让验收测试独立于数据库是可取的，但它需要太多的重写，所以我目前决定只创建 org.hibernate.cache.Cache 和 org.hibernate.cache.CacheProvider 接口的非常简单的实现，它们什么都不做，并且总是空缓存。

测试构建用这个新的缓存替换了真正的缓存，这使得休眠注释和 BDD 步骤都很开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:15:47.923

我需要为国家、地区等少数 bean实现**只读缓存。**

为了检查它们是否真的被缓存了，我使用 spring编写了一个**集成测试。**测试不太合适，它只是对我想要得到的东西的验证。您可以将其用作提示并实现自己的提示。

您可以[在此处](http://www.jyops.blogspot.in/2011/11/when-to-replace-unit-tests-with.html)阅读有关如何使用 spring 编写集成测试的文章。

```
@Configurable(autowire = Autowire.BY_NAME)
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:applicationContext.xml" })
public class HibernateCachingTestIntg {

    @Autowired
    private ConfigurationDAO configurationDAO;

    @Autowired
    private CountryDAO countryDAO;

    @Test
    public void testGetCountries() {
        for (int i = 0; i < 5; i++) {
            StopWatch sw = new StopWatch("C");
            sw.start();
            countryDAO.listCountries();
            sw.stop();
            System.out.println(sw);
        }

    }

    @Test
    public void testGetRegionList() {

        for (int i = 0; i < 5; i++) {
            StopWatch sw = new StopWatch("R");
            sw.start();
            configurationDAO.getRegionList();
            sw.stop();
            System.out.println(sw);
        }

    }
} 
```

这是输出： -

```
StopWatch 'C': running time (millis) = 217; [] took 217 = 100%
StopWatch 'C': running time (millis) = 15; [] took 15 = 100%
StopWatch 'C': running time (millis) = 16; [] took 16 = 100%
StopWatch 'C': running time (millis) = 15; [] took 15 = 100%
StopWatch 'C': running time (millis) = 16; [] took 16 = 100%

StopWatch 'R': running time (millis) = 201; [] took 201 = 100%
StopWatch 'R': running time (millis) = 15; [] took 15 = 100%
StopWatch 'R': running time (millis) = 0; [] took 0 = 0%
StopWatch 'R': running time (millis) = 16; [] took 16 = 100%
StopWatch 'R': running time (millis) = 15; [] took 15 = 100% 
```

正如您在此处看到的，查询第一次执行需要更多时间，而后执行时间更少。如果您打开查询记录器，您可以看到**SQL**只是第一次被触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:18:10.363

由于您在谈论通过 Selenium 进行的功能测试，因此您应该将您的应用程序视为一个黑匣子，并在 Selenium 实际上是一个用户时对其进行测试。因此，您需要通过 Web 界面传递数据，然后测试应用程序如何处理它并在之后显示它。

替代此类应用程序范围的功能测试将是行为驱动开发，其中包含针对不同组件的测试。这里的组件是从你的控制器开始的一些流程，以 DAO 结尾（通常 DAO 在这样的测试中被模拟，这使得它们通过非常快，但不测试使用数据库）。在这种情况下，您有一组完整的环境测试和大量的 BDD 测试。

# c# - Visual Studio 11 似乎在某些情况下忽略了 [shift] 键？

> ID：10344161
> 
> 赞同：0
> 
> 时间：2012-04-27T02:52:56.390
> 
> 标签：c#, visual-studio-2012

在我创建对象实例的百分比中，我的 shift 键在下一次按键时被禁用。

我尝试输入：

```
ClassName thing = new ClassName() 
```

但它出来了：

```
ClassName thing = new ClassName9) 
```

我最好的猜测是 VS 试图在这里使用某种热键或宏，但我似乎无法弄清楚是哪个。我已经通过在其他应用程序中尝试相同的击键而没有异常行为来验证这是一个 VS 11 问题。另外，我不会打字太快。我在击键时非常谨慎。有谁知道发生了什么或如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:59:45.307

它仍然在安全模式下复制吗？如果不是，它是一个加载项造成的损害。如果它仍然是复制品，我很想重新安装 VS。

```
DevEnv /safemode 
```

[http://msdn.microsoft.com/en-US/library/ms241278(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/ms241278(v=vs.80).aspx)

VS 命令行开关文档

[http://msdn.microsoft.com/en-us/library/xee0c8y7(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/xee0c8y7(v=VS.80).aspx)

# ruby-on-rails - Rails - 从自定义/不同文件夹渲染模板

> ID：10344166
> 
> 赞同：2
> 
> 时间：2012-04-27T02:53:31.067
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.2

是否可以从 app/views/layouts 以外的位置调用布局？

我想使用位于 app/extensions/sites/layouts 上的布局。

我试过这段代码，但它不起作用。

```
render "#{Rails.root}/app/extensions/sites/views/pages/template01.html.erb", :template  => "#{Rails.root}/app/extensions/sites/views/layouts/layout01", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:11:54.693

您可以指定控制器内部的布局，例如

```
layout "template01" 
```

您还可以指定特定于操作的布局，只需点击下面的链接，

[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

# ios - 呈现/呈现视图控制器和父/子视图控制器之间的交互是否记录在任何地方？

> ID：10344169
> 
> 赞同：3
> 
> 时间：2012-04-27T02:54:07.020
> 
> 标签：ios, uikit, modalviewcontroller, parentviewcontroller, childviewcontroller

阅读有关 iOS 中 UIViewControllers 更改的文档，我试图弄清楚呈现模式视图控制器之间的交互如何在自定义容器视图控制器内部工作。最终，我希望能够可靠地遍历一系列呈现的视图控制器，即使其中一些控制器是由子视图控制器呈现的。

（我正在开发一个库，而不是应用程序，所以我没有创建我将与之交互的层次结构。我只是想确保我的库能够在不同类型的层次结构中正常工作。）

所以我的问题归结为，当有人试图从子视图控制器呈现视图控制器时会发生什么？

```
[childViewController presentViewController:viewController animated:YES completion:nil]; 
```

由于呈现的视图控制器旨在“接管”交互直到它被解除，所以对我来说，将呈现请求转发给它的父级（或者实际上，沿着 parentViewControllers 链向上直到它到达视图控制器是有意义的） no parentViewController)，然后从该视图控制器显示。否则，似乎开发人员可以做一些事情，比如从两个不同的孩子呈现模态视图控制器等，这在我看来是有问题的。（例如，哪个呈现的视图控制器会优先？）。

此外，如果上述情况属实，它似乎会产生一些影响。如果父视图控制器正在显示一个呈现的视图控制器，这会返回什么？

```
[childViewController presentedViewController]; 
```

会是`nil`因为父母正在显示它吗？或者是否可以将此请求转发给父级，以便它的`parentViewController`任何一个`childViewControllers`都具有相同的结果？

无论如何，我已经准备好一个示例项目来开始运行一些场景，但是我很好奇是否有我遗漏的任何文档？或者如果有人已经知道这种交互发生的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:21:04.677

不久前我在一个容器视图控制器上工作，发现默认实现检查是否`parentViewController`存在，如果存在，它会将消息传递给父级。

我找不到任何关于它的文档，所以你不能 100% 依赖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:33:06.550

Dr.Touch 在这方面有一篇很棒的帖子：

[http://www.cocoanetics.com/2012/04/ contains-viewcontrollers/](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

如果您喜欢 View Controller Containers，这是必读的

# java - 按照 java 编码标准处理异常

> ID：10344173
> 
> 赞同：3
> 
> 时间：2012-04-27T02:54:45.033
> 
> 标签：java

在异常处理的情况下，我有一个关于 java 标准的查询。

代码片段：

```
public String methodXXX(){
//This method may throw IllegalArgumentexception and arrayoutofboundaryException.
} 
```

在这种情况下，哪个是好的编码标准，请告诉我为什么 case1：

```
public String methodXXX() throw IllegalArgumentexception,ArrayoutofBoundaryException.{
//This method may throw IllegalArgumentexception and arrayoutofboundaryException.
} 
```

案例2：

```
public String methodXXX()throws Exception{
//This method may throw IllegalArgumentexception and arrayoutofboundaryException.
} 
```

为什么我在这里提到case2是：我们可能不会期望在运行时会发生其他异常。由于 Exception 是所有异常的父类，因此情况 2 更可取 ??? 如果是，在哪些情况下 case1 是可行的？你能解释一下你的表现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:56:39.083

声明方法抛出的特定异常总是更好。这不仅可以更清楚地说明可能发生的问题，而且可以在必要时更轻松地单独处理它们。

实际上并没有任何性能影响：为异常创建堆栈跟踪是如此昂贵的操作，以至于它使所有其他考虑相形见绌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:23:50.227

我认为您不应该抛出异常，而是将其放在 java doc 注释中。这样，您的 api 用户就知道可能发生什么样的异常，并且不会被迫捕获这些异常。

```
/**
 * @throws IllegalArgumentexception
 * @throws ArrayoutofBoundaryException
 */
public String methodXXX() {
  //This method may throw IllegalArgumentexception and arrayoutofboundaryException.
} 
```

我更喜欢运行时异常而不是检查异常，因为大多数情况下强制捕获异常不会有太大帮助。因此，将所有异常放在 java doc 中也可以清楚地说明，并且不会强制捕获它。这样代码更干净，并且默认情况下有可能将异常传播到顶层。否则，我看到许多开发人员只是捕获检查的异常而不做任何事情，使顶层不知道发生在较低层的任何异常。

规则的一般经验是“如果用户可以从异常中恢复，则抛出检查异常，否则记录运行时异常”即使这样，我也更喜欢后者，因为检查异常通常不是很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T02:57:24.803

这两个异常都是`RuntimeException`子类，您不必`throws`在方法声明的部分显式声明它们。

在 Java 中有两种异常：[checked 和 unchecked](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explaination)。正如链接中所解释的，每一个都在不同的情况下使用。作为其子类的所有异常`RuntimeException`都是未经检查的异常，通常您不应该声明方法抛出它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T02:59:02.837

通常，`RuntimeException`s 喜欢`IllegalArgumentException`并`ArrayIndexOutOfBoundsException`反映*程序员错误*，而不是最终程序应该知道如何在运行时处理的异常。

通常，不值得显式声明`RuntimeException`s，因为响应此类异常的正确方法通常是直接抛出，因此运行程序的程序员知道有需要修复的错误，并且可以获得堆栈跟踪。`try/catch`编写捕获 a 的a 通常不是一个好主意`RuntimeException`，因此没有意义。

对于其他类型的`Exception`s，您应该声明可能抛出的特定异常，以便您的方法的用户可以单独捕获它们，并对每种特定的异常类型编写不同的响应。只是声明你正在抛出`Exception`强制你的方法的用户编写不能做任何智能的异常处理程序，因为他们对抛出的特定异常一无所知。

# android - 在一个屏幕中显示 3 个活动

> ID：10344178
> 
> 赞同：0
> 
> 时间：2012-04-27T02:56:22.310
> 
> 标签：android, android-layout, android-activity, android-framelayout

我的程序中有 3 个 FrameLayout。

我的程序中有三个 FrameLayout。我想在每一个中，都会显示一个 Activity。有这样的可能吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:02:26.970

您不能一次在屏幕上显示多个活动（与用户交互）。看到[这篇](https://stackoverflow.com/questions/5476354/android-viewing-two-activities-in-one-screen)文章。但也许你可以使用[AndroidFragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)和[ActivityGroup](http://developer.android.com/reference/android/app/ActivityGroup.html)

# java - 这是使用 IllegalArgumentException 的正确方法吗？

> ID：10344187
> 
> 赞同：7
> 
> 时间：2012-04-27T02:57:35.807
> 
> 标签：java, exception, illegalargumentexception

我正在尝试处理 Java 作业。这就是它的要求：

> 编写一个名为`TestScores`. 类构造函数应该接受一个测试分数数组作为它的参数。该类应该有一个返回测试分数平均值的方法。如果数组中的测试分数为负数或大于 100，则该类应抛出`IllegalArgumentException`. 证明。我需要一个名为`TestScores`and的文件`TestScoresDemo`。

这就是我到目前为止所拥有的。我知道其中一些是错误的，我需要帮助来修复它：

```
class TestScores {
    public static void checkscore(int s) {
        if (s<0) throw new IllegalArgumentException("Error: score is negative.");
        else if (s>100) throw new IllegalArgumentException("Error Score is higher then 100");
        else if (s>89)throw new IllegalArgumentException("Your grade is an A");
        else if (s>79 && s<90)throw new IllegalArgumentException("Your grade is an B");
        else if (s>69 && s<80)throw new IllegalArgumentException("Your grade is an C");
        else if (s>59 && s<70)throw new IllegalArgumentException("Your grade is an D");
        else if (s<60)throw new IllegalArgumentException("Your grade is an F");

        {
            int sum = 0; //all elements together
            for (int i = 0; i < a.length; i++)
                sum += a[i];
        }
        return sum / a.length;
    }
}

class TestScoresDemo {
    public static void main(String[] args) {
        int score = 0;
        Scanner scanner = new Scanner(System.in);
        System.out.print(" Enter a Grade number: ");
        String input = scanner.nextLine();
        score = Integer.parseInt(input);
        TestScores.checkscore(score);
        System.out.print("Test score average is" + sum);
    }
} 
```

我知道作业需要一个`try`声明，因为在我的书中，这就是我在`IllegalArgumentException`. 谁能帮我？我使用 Eclipse 作为 IDE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T03:11:25.177

您的`TestScores`类应该有两个成员：一个接受分数数组的构造函数和一个返回分数平均值的方法。如果测试分数超出范围，则分配并不完全清楚其中哪些应该抛出`IllegalArgumentException`，但我会将其设为构造函数（因为这就是有论点的内容）。

```
public class TestScores {
    public TestScores(int[] scores) throws IllegalArgumentException {
        // test the scores for validity and throw an exception if appropriate
        // otherwise stash the scores in a field for later use
    }

    public float getAverageScore() {
        // compute the average score and return it
    }
} 
```

你的`TestScoresDemo`班级走在了正确的轨道上。它首先需要将一组分数收集到一个数组中。然后它应该构造一个`TestScores`对象。这是需要在`try`/`catch`块内的内容，因为它可以引发异常。然后你只需要打电话`getAverageScore()`并对结果做一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:23:35.883

异常是用来定义在应用程序的正常流程中不正确的东西。当调用 checkScore 方法并找到范围之外（0 到 100 之间）的任何参数时，您必须抛出 IllegalArgumentException。

你的班级应该有这样的结构：

```
public class TestScore {

    private int scores[]; //With setters and getters.

    public TestScore(int scores[]) {
        //Here, you set the scores array to the one on this class.
    }

    public int getAverage() {
        //You do the average here, and since you need to iterate over the 
        //array to sum each value, you can check the value and if it's not
        //ok you throw the IllegalArgumentException. No throws keyword
        //required since this kind of exception (like NullPointerException
        //and many others) are unchecked exceptions, meaning they can be 
        //thrown by a method and it does not need to specify them.
    }

} 
```

测试类应该创建一个带有 int 数组的 TestScore 对象作为其构造函数的参数。然后你创建一个 testAverageScore 方法，上面有 try-catch 语句，因为它需要调用 getAverage 方法。

希望有帮助。祝你好运！。

**编辑：** IllegalArgumentException 是未经检查的异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T03:12:13.630

```
public class TestScores {
private final int[] scores;

public TestScores(int[] scores) {
    this.scores = scores;
}

public int getAverage() {
    int sum = 0;

    if(scores.length == 0) {
        return 0;
    }

    for(int score: scores) {
        if(score < 0 || score > 100) {
            throw new IllegalArgumentException("Score is not valid!");
        }
        sum += score;
    }
    return sum/scores.length;
} 
```

}

# php - 如何将 Wordpress 插件挂钩添加到 index.php？

> ID：10344188
> 
> 赞同：0
> 
> 时间：2012-04-27T02:57:38.287
> 
> 标签：php, wordpress

我正在使用一个名为 Category Thumbnail list 的插件。我通常会将钩子`[categorythumbnaillist 100]`放在我的 Wordpress 页面上。如何将其添加到实际的 php 页面？

[http://wordpress.org/extend/plugins/categoy-thumbnail-list/](http://wordpress.org/extend/plugins/categoy-thumbnail-list/)

插件代码：

```
$categoryThumbnailList_Order = stripslashes( get_option( 'category-thumbnail-list_order' ) );
if ($categoryThumbnailList_Order == '') {
$categoryThumbnailList_Order = 'date';
 }
$categoryThumbnailList_OrderType = stripslashes( get_option( 'category-thumbnail-list_ordertype' ) );
if ($categoryThumbnailList_OrderType == '') {
$categoryThumbnailList_OrderType = 'DESC';
}

$categoryThumbnailList_Path = get_option('siteurl')."/wp-content/plugins/categoy-thumbnail-list/";

define("categoryThumbnailList_REGEXP", "/\[categorythumbnaillist ([[:print:]]+)\]/");

define("categoryThumbnailList_TARGET", "###CATTHMBLST###");

function categoryThumbnailList_callback($listCatId) {
global $post;

global $categoryThumbnailList_Order;

global $categoryThumbnailList_OrderType;

$tmp_post = $post; 

$myposts = get_posts('numberposts=-1&&category='.$listCatId[1].'&&orderby='.$categoryThumbnailList_OrderType.'&&order='.$categoryThumbnailList_Order);
$output = '<div class="categoryThumbnailList">';
foreach($myposts as $post) :
    setup_postdata($post);
    if ( has_post_thumbnail() ) {
    $link = get_permalink($post->ID);
    $thmb = get_the_post_thumbnail($post->ID,'thumbnail');

    $title = get_the_title();

    $output .= '<div class="categoryThumbnailList_item">';
        $output .= '<a href="' .$link . '" title="' .$title . '">' .$thmb . '</a><br/>';
        $output .= '<a href="' .$link . '" title="' .$title . '">' .$title . '</a>';
    $output .= '</div>';
    }
endforeach;
/*
$output .= '</div>';
$output .= '<div class="categoryThumbnailList_clearer"></div>';
return ($output);
$output = '';
$post = $tmp_post;
setup_postdata($post);
*/
$output .= '</div>';
$output .= '<div class="categoryThumbnailList_clearer"></div>';

$post = $tmp_post;

wp_reset_postdata();

return ($output);

$output = '';
}

function categoryThumbnailList($content) {
return (preg_replace_callback(categoryThumbnailList_REGEXP,        'categoryThumbnailList_callback', $content));

}

function categoryThumbnailList_css() {
global $categoryThumbnailList_Path;
echo "
<style type=\"text/css\">
@import url(\"".$categoryThumbnailList_Path."categoy-thumbnail-list.css\");
</style>
";
}
add_action('wp_head', 'categoryThumbnailList_css');
add_filter('the_content', 'categoryThumbnailList',1);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:48:45.333

我想你想[在模板文件中添加短代码](http://codex.wordpress.org/Function_Reference/do_shortcode)。将此行放在您的 index.php 中

```
<?php echo do_shortcode( '[categorythumbnaillist 100]' ); ?> 
```

# mysql - 使用 MySQL 聚合重叠事件

> ID：10344191
> 
> 赞同：1
> 
> 时间：2012-04-27T02:57:55.103
> 
> 标签：mysql, sql, events, aggregate, overlapping

所以假设我们有看起来像这样的数据：

```
drop table if exists views; 
create table views(id int primary key,start time,end time); 
insert into views values 
(1, '15:01', '15:04'), 
(2, '15:02', '15:09'), 
(3, '15:12', '15:15'), 
(4, '16:11', '16:23'), 
(5, '16:19', '16:25'), 
(6, '17:52', '17:59'), 
(7, '18:18', '18:22'), 
(8, '16:20', '16:22'), 
(9, '18:17', '18:23'); 
```

像这样轻松可视化

```
1     |-----| 
2        |-----| 
3                 |--| 
4                       |-----| 
5                          |-----| 
6                                  |---| 
7                                        |---|  
8                           |---| 
9                                       |-----| 
```

现在我想绘制该数据，使其看起来像这样

```
+---------------------------+
|              x            |
|    x        x xxx     xxx |
|   x xx  xx x     xx  x    |
+---------------------------+ 
```

本质上将它们分解为 X 长度的段，并总结每个 X 长度的段被触摸的次数。关于如何创建此视图的任何想法？

（如果您必须知道这一点，我可以为视频分析创建参与数据）

我不希望输出是 ASCII 我希望它最终作为 SQL 中的查询结果。就像是：

```
Time Start, Time End,  Num_Views
00:00, 00:05, 10
00:06, 00:10, 3
00:11, 00:15, 2
00:16, 00:20, 8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T07:27:59.750

使用辅助数字表，您可以执行以下操作：

```
select
  r.Time_Start,
  r.Time_End,
  sum(v.id is not null) as Num_Views
from (
  select
    cast(from_unixtime((m.minstart + n.n + 0) * 300) as time) as Time_Start,
    cast(from_unixtime((m.minstart + n.n + 1) * 300) as time) as Time_End
  from (
    select
      unix_timestamp(date_format(minstart, '1970-01-01 %T')) div 300 as minstart,
      unix_timestamp(date_format(maxend  , '1970-01-01 %T')) div 300 as maxend
    from (
      select
        min(start) as minstart,
        max(end  ) as maxend
      from views
    ) s
  ) m
    cross join numbers n
  where n.n between 0 and m.maxend - minstart
) r
  left join views v on v.start < r.Time_End and v.end > r.Time_Start
group by
  r.Time_Start,
  r.Time_End
; 
```

对于您的特定示例，此脚本产生以下输出：

```
Time_Start  Time_End  Num_Views
----------  --------  ---------
15:00:00    15:05:00  2
15:05:00    15:10:00  1
15:10:00    15:15:00  1
15:15:00    15:20:00  0
15:20:00    15:25:00  0
15:25:00    15:30:00  0
15:30:00    15:35:00  0
15:35:00    15:40:00  0
15:40:00    15:45:00  0
15:45:00    15:50:00  0
15:50:00    15:55:00  0
15:55:00    16:00:00  0
16:00:00    16:05:00  0
16:05:00    16:10:00  0
16:10:00    16:15:00  1
16:15:00    16:20:00  2
16:20:00    16:25:00  3
16:25:00    16:30:00  0
16:30:00    16:35:00  0
16:35:00    16:40:00  0
16:40:00    16:45:00  0
16:45:00    16:50:00  0
16:50:00    16:55:00  0
16:55:00    17:00:00  0
17:00:00    17:05:00  0
17:05:00    17:10:00  0
17:10:00    17:15:00  0
17:15:00    17:20:00  0
17:20:00    17:25:00  0
17:25:00    17:30:00  0
17:30:00    17:35:00  0
17:35:00    17:40:00  0
17:40:00    17:45:00  0
17:45:00    17:50:00  0
17:50:00    17:55:00  1
17:55:00    18:00:00  1
18:00:00    18:05:00  0
18:05:00    18:10:00  0
18:10:00    18:15:00  0
18:15:00    18:20:00  2
18:20:00    18:25:00  2 
```

数字表可以是临时表，但我建议您创建和初始化一个永久表，因为它可用于多种用途。这是初始化数字表的一种方法：

```
create table numbers (n int);
insert into numbers (n) select 0;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
insert into numbers (n) select cnt + n from numbers, (select count(*) as cnt from numbers) s;
/* repeat as necessary; every repeated line doubles the number of rows */ 
```

此脚本的“实时”版本可以[在 SQL Fiddle](http://sqlfiddle.com/#!2/51ede/38)上找到。

*更新（尝试描述所使用的方法）*

上述解决方案实现了以下步骤：

1.  找出表中最早的`start`时间和最晚的`end`时间`views`。

2.  将这两个值都转换为[unix 时间戳](http://en.wikipedia.org/wiki/Unix_time)。

3.  将两个时间戳除以 300，这基本上为我们提供了相应 5 分钟范围的索引（自纪元以来）。

4.  在数字表的帮助下，生成一系列 5 分钟范围，涵盖 和 之间的整体`start`范围`end`。

5.  将范围列表与表中的事件时间匹配`views`（使用外连接，因为我们希望（*如果*我们愿意）考虑所有范围）。

6.  按范围界限对结果进行分组并计算组中的事件数。（我刚刚注意到`sum(v.id is not null)`上述查询中的 可以替换为更简洁，在这种情况下更自然`count(v.id)`。）

# python - Django 的嵌套 Meta 类是如何工作的？

> ID：10344197
> 
> 赞同：242
> 
> 时间：2012-04-27T02:59:00.143
> 
> 标签：python, django

我正在使用 Django，它允许人们使用`class Meta`.

```
class FooModel(models.Model):
    ...
    class Meta:
        ... 
```

我在 Python 的文档中发现的唯一内容是：

```
class FooMetaClass(type):
    ...

class FooClass:
    __metaclass__ = FooMetaClass 
```

但是，我认为这不是一回事。

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-04-27T03:04:44.903

你在问一个关于两个不同事情的问题：

1.  **`Meta`Django 模型中的内部类**：

    这只是一个带有一些选项（元数据）附加到模型的类容器。它定义了诸如可用权限、关联的数据库表名称、模型是否是抽象的、名称的单复数版本等。

    简短的解释在这里：[Django docs: Models: Meta options](https://docs.djangoproject.com/en/dev/topics/db/models/#meta-options)

    可用元选项列表在这里：[Django docs: Model Meta options](https://docs.djangoproject.com/en/dev/ref/models/options/)

    对于最新版本的 Django：[Django 文档：模型元选项](https://docs.djangoproject.com/en/3.0/ref/models/options/)

2.  **Python中的元类**：

    最好的描述在这里：[什么是 Python 中的元类？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-08-08T04:23:23.027

扩展上面 Tadeck 的 Django 答案，在 Django 中使用 'class Meta:' 也只是普通的 Python。

内部类是类实例之间共享数据的方便命名空间（因此“元数据”的名称为 Meta，但您可以随意称呼它）。虽然在 Django 中它通常是只读配置的东西，但没有什么可以阻止你改变它：

```
In [1]: class Foo(object):
   ...:     class Meta:
   ...:         metaVal = 1
   ...:         
In [2]: f1 = Foo()
In [3]: f2 = Foo()
In [4]: f1.Meta.metaVal
Out[4]: 1
In [5]: f2.Meta.metaVal = 2
In [6]: f1.Meta.metaVal
Out[6]: 2
In [7]: Foo.Meta.metaVal
Out[7]: 2 
```

您也可以直接在 Django 中探索它，例如：

```
In [1]: from django.contrib.auth.models import User
In [2]: User.Meta
Out[2]: django.contrib.auth.models.Meta
In [3]: User.Meta.__dict__
Out[3]: 
{'__doc__': None,
 '__module__': 'django.contrib.auth.models',
 'abstract': False,
 'verbose_name': <django.utils.functional.__proxy__ at 0x26a6610>,
 'verbose_name_plural': <django.utils.functional.__proxy__ at 0x26a6650>} 
```

但是，在 Django 中，您更有可能想要探索`_meta`属性，它是在`Options`创建模型`metaclass`时由模型创建的对象。在那里您可以找到所有 Django 类的“元”信息。在 Django 中，`Meta`只是用于将信息传递到创建`_meta` `Options`对象的过程中。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-27T03:02:43.320

Django 的`Model`类专门处理具有名为的属性`Meta`，它是一个类。这不是一般的 Python 事物。

Python 元类完全不同。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-12-15T18:40:30.970

声称 Django 模型`Meta`和元类“完全不同”的答案是误导性的答案。

django模型**类对象**的构造，也就是说代表类定义本身的对象（是的，类也是对象），确实是由一个叫做的元类控制的`ModelBase`，你可以[在这里看到代码](https://github.com/django/django/blob/83fcfc9ec8610540948815e127101f1206562ead/django/db/models/base.py#L72)。

其中一件事`ModelBase`是在每个 Django 模型上创建`_meta`属性，其中包含验证机制、字段详细信息、保存逻辑等。在此操作期间，模型内部`Meta`类中指定的内容在该过程中被读取和使用。

所以，虽然是的，从某种意义上说`Meta`，元类是不同的“东西”，但在 Django 模型构建的机制中，它们是密切相关的；了解它们如何协同工作将同时加深您对两者的洞察力。

这可能是一个有用的信息来源，可以更好地理解 Django 模型如何使用元类。

[https://code.djangoproject.com/wiki/DevModelCreation](https://code.djangoproject.com/wiki/DevModelCreation)

如果您想更好地了解对象的一般工作方式，这也可能会有所帮助。

[https://docs.python.org/3/reference/datamodel.html](https://docs.python.org/3/reference/datamodel.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-11T10:53:41.607

内部元类文档：

这个`django` 模型元数据文档是“任何不是字段的东西”，例如排序选项`(ordering), database table name (db_table), or human-readable singular and plural names (verbose_name and verbose_name_plural)`。不需要，将 Meta 类添加到模型是完全可选的。 [https://docs.djangoproject.com/en/dev/topics/db/models/#meta-options](https://docs.djangoproject.com/en/dev/topics/db/models/#meta-options)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-21T16:55:13.340

在 Django 中，它充当配置类并将配置数据保存在一个地方！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-04T22:26:15.037

类**Meta**是代码逻辑中***model.fields*** 与**form.widgets*****相遇***的地方。因此，在 Class Meta() 下，您可以在模型字段和您希望在表单中拥有的不同小部件之间创建链接。

# php - 如何根据值获取单选按钮名称

> ID：10344199
> 
> 赞同：0
> 
> 时间：2012-04-27T02:59:03.387
> 
> 标签：php, jquery, ajax, radio-button

我正在建立一个调查系统。我有一个包含 10 个项目的页面，每个项目都有是/否选项可供选择。像这样的东西：

```
 Yes   No
1\.   o    o
2\.   o    o
...

<submit> 
```

当我点击提交按钮时，我想知道哪些项目已被选择为是和否。我怎样才能做到这一点？谢谢。

我知道如何按名称检索单选按钮值，我的问题是如何获取选定值为“是”和“否”的按钮。我有点知道如何在 javascript 中执行此操作，但我不确定如何将 javascript 值传递回 PHP 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:22:28.813

我将进行详细的解释。

```
<input type="radio" name="option1" value="Yes"> Yes
<input type="radio" name="option1" value="No"> No 
```

当您通过 PHP 进行处理时，将只有一个“option1”发布值。根据用户选择的输入，它将是是或否。

```
echo "The user selected: ".$_POST['option1']; 
```

如果是，以上将返回：

> 用户选择：是

编号也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:06:58.763

如果你有这样的事情

```
<input type="radio" value="1'"name="radbut">Yes
<input type="radio" value="2" name="radbut">No 
```

选择所选值的php是这样的

```
$selected=$_GET["radbut"]; 
```

# workflow-foundation-4 - 工作流运行时如何获取有关 wf 4.0 中活动的所有信息，以便我们可以更改执行顺序？

> ID：10344206
> 
> 赞同：0
> 
> 时间：2012-04-27T03:00:57.413
> 
> 标签：workflow-foundation-4, workflow-activity

工作流运行时如何知道其活动顺序和参数。我们可以在运行工作流中更改执行行为或活动执行顺序吗？

我的要求是如何控制活动执行，以便我们可以显式获取当前执行活动、停止、重新运行和更改参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:21:59.533

我们可以通过创建自定义控制流活动来更改执行顺序。这可以通过继承 NativeActivity 来完成。例如，创建自定义序列活动你可以通过这个例子。 [http://code.msdn.microsoft.com/VBWF4CustomSequenceActivity-cd65cb4c](http://code.msdn.microsoft.com/VBWF4CustomSequenceActivity-cd65cb4c)

# javascript - 检测滚动条何时到达div的顶部？

> ID：10344211
> 
> 赞同：12
> 
> 时间：2012-04-27T03:01:37.783
> 
> 标签：javascript, jquery, scroll, jquery-animate

我正在尝试在我的#container div 的滚动事件上为 boxShadow 设置动画。一切正常，除了我想不出一种检测滚动条到达顶部的好方法，以便 boxShadows 可以动画出来。到目前为止，这是我的代码

```
 $('#container').scroll(
        function()
        {
            $('#white').animate(
            {
                boxShadow: "0 8px 8px -7px #696868"
            },
            "fast"); 
            if ($('#container').scrollTop() == 0)
            {
                $('#white').animate(
                {
                    boxShadow: "0 0 0 0 #696868"
                },
                "fast");
            }
        }
    ); 
```

我添加了一个演示。滚动动画的初始效果很好，但是当栏返回顶部时，在第二个动画开始之前会有相当长的延迟。[http://jsfiddle.net/JYqC3/14/](http://jsfiddle.net/JYqC3/14/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T03:17:26.493

希望这可以帮助

使用**[.scrollTop](http://jqapi.com/#p=scrollTop)**

```
$('#my_div').scroll(function() {
    var pos = $('#my_div').scrollTop();
    if (pos == 0) {
        alert('top of the div');
    }
}); 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/JYqC3/)**

**编辑：**演示中添加了更好的动画

# php - PHP连接Hotmail发送邮件？

> ID：10344213
> 
> 赞同：2
> 
> 时间：2012-04-27T03:01:45.410
> 
> 标签：php, html, phpmailer

目前我正在尝试使用 PHPmailer 发送电子邮件。这是下面的代码

```
<?php     
require("phpmailer/class.phpmailer.php");   
$mail = new PHPMailer();   // ---------- adjust these lines ---------------------------    ------------   
$mail->Username = "(username@hotmail.com)"; // your hotmail user name    
  $mail->Password = "password";
  $mail->AddAddress"(username@hotmail.com)"; // recipients email     
  $mail->FromName = "test"; // readable name     
  $mail->Subject = "Subject title";     
  $mail->Body    = "Here is the message you want to send to your friend.";     
  //-----------------------------------------------------------------------     
  $mail->Host = "smtp.live.com"; // GMail     
  $mail->Port = 25;     $mail->IsSMTP(); // use SMTP  
  $mail->SMTPAuth = true; // turn on SMTP authentication 
  $mail->From = $mail->Username;  
  if(!$mail->Send())     
      echo "Mailer Error: " . $mail->ErrorInfo;     
  else       
      echo "Message has been sent";     

  ?> 
```

我已经使用 PHPMailer 尝试了 SSL，端口 587 用于 smtp.live.com，为什么它不起作用？

错误是“SMTP 错误：无法连接到 SMTP 主机。邮件程序错误：SMTP 错误：无法连接到 SMTP 主机。”

我无法远程登录 smtp.live.com 25,587。smtp.gmail.com 等等等等。我该怎么办？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T13:53:12.147

```
<?php

//error_reporting(E_ALL);
error_reporting(E_STRICT);

date_default_timezone_set('America/Toronto');

require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

$body             = file_get_contents('contents.html');
$body             = eregi_replace("[\]",'',$body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->SMTPDebug  = 2;                      // enables SMTP debug information (for testing)
                                            // 1 = errors and messages
                                            // 2 = messages only
$mail->SMTPAuth   = true;                   // enable SMTP authentication
$mail->SMTPSecure = "tls";                  // sets the prefix to the servier
$mail->Host       = "smtp.live.com";        // sets hotmil as the SMTP server
$mail->Port       = 587;                    // set the SMTP port for the hotmail server
$mail->Username   = "useyourownemail@hotmail.com";      // hotmail username
$mail->Password   = "useyourownpassword";           // hotmail password
$mail->SetFrom('yourname@yourdomain.com', 'First Last');
$mail->AddReplyTo("name@yourdomain.com","First Last");
$mail->Subject    = "PHPMailer Test Subject via smtp (hotmail), basic";
$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
$mail->MsgHTML($body);

$address = "anemail@domain.com";
$mail->AddAddress($address, "John Doe");

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
}

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T09:35:18.710

塔尔哈的答案对我有用。尝试评论 $mail->IsSMTP(); 我还评论了这部分 $mail->Port = 587;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T05:12:50.457

587 端口为我工作。

无需运行 IsSMTP()。注释掉它，因为它会抛出异常。

**如果它解决了您的问题，请不要忘记将其标记为答案:)**

# cocoa-touch - 在 UIScrollView 中加载图像时的活动指示器

> ID：10344215
> 
> 赞同：1
> 
> 时间：2012-04-27T03:02:14.460
> 
> 标签：cocoa-touch, uiscrollview, image-loading

我有 UIScrollView 包含来自服务器的图像。

我应该在图像当前加载时放置活动指示器。

UIScrollView 包含来自服务器的动态数量的图像。

我可以知道如何在加载图像时在每个页面上添加活动指示器，并在加载图像后删除。

这是我检索图像的代码：

```
NSDictionary *items = [NSDictionary dictionaryWithObject:dictInfo forKey:@"images"];
imageList = [items objectForKey:@"images"];
NSArray *img = [imageList objectForKey:@"list"];
NSInteger imgCount = [img count];
buttonArray = [[NSMutableArray alloc] init];

for (int i=0; i<imgCount; i++) {
    NSDictionary *imgDict = [img objectAtIndex:i];
    // REQUEST FOR IMAGES
    NSString *imgPath = [imgDict objectForKey:@"image_slot"];
    NSString *imgURL = imgPath;

    __block ASIHTTPRequest *requestImage = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:imgURL]];
    [requestImage setCompletionBlock:^{
        imgView = [UIImage imageWithData:[requestImage responseData]];

        if (imgURL.length) {
            [pendingRequests removeObjectForKey:imgURL];
        }

        scrollView.userInteractionEnabled = YES;
        scrollView.exclusiveTouch = YES;
        scrollView.canCancelContentTouches = YES;
        scrollView.delaysContentTouches = YES;
        scrollView.bounces = NO;

        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        SWTUIButton *imgBtn = [[SWTUIButton alloc] initWithFrame:frame];
        imgBtn.url = [requestImage.userInfo objectForKey:@"rURL"];
        [imgBtn setImage:imgView forState:UIControlStateNormal];
        imgBtn.backgroundColor = [UIColor clearColor];
        [imgBtn addTarget:self action:@selector(buttonpushed:) forControlEvents:UIControlEventTouchUpInside];
        [scrollView addSubview:imgBtn];

        [buttonArray addObject:imgBtn];

        [imgBtn release];

        self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * img.count, self.scrollView.frame.size.height);
    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:54:19.410

我强烈建议您使用[https://github.com/jverkoey/nimbus](https://github.com/jverkoey/nimbus)项目中的 NINetworkImageView。它非常轻巧且有用。它有一个委托方法，让您知道何时加载图像。您基本上需要做的是： 1\. 为每个页面创建一个 NINetworkImageView，就像您使用 UIImageView 一样，并调用 set

```
 NINetworkImageView* networkImageView = [[[NINetworkImageView alloc] initWithImage:initialImage]
                                      autorelease];
  networkImageView.delegate = self;
  networkImageView.contentMode = UIViewContentModeCenter;
[networkImageView setPathToNetworkImage:
     @"http://farm3.static.flickr.com/2484/3929945380_deef6f4962_z.jpg"
                             forDisplaySize: CGSizeMake(kImageDimensions, kImageDimensions)]; 
```

[https://github.com/jverkoey/nimbus/tree/master/examples/photos/NetworkPhotoAlbums](https://github.com/jverkoey/nimbus/tree/master/examples/photos/NetworkPhotoAlbums)

2.  将指标作为子视图添加到 networkImageView。
3.  实现委托如下：

    -(void)networkImageView:(NINetworkImageView *)imageView didLoadImage:(UIImage *)image { [imageView removeAllSubviews];

    }

最终结果将是一个更小的代码来做同样的事情。

# delphi - INDY 命令处理程序。带参数的成功响应

> ID：10344217
> 
> 赞同：1
> 
> 时间：2012-04-27T03:02:28.233
> 
> 标签：delphi, indy10

我按照演示进行了操作，一切正常。我的客户端只有一个函数可以向服务器发送命令并处理响应。

对于前几个命令来说这很好，我处理它

```
 var result : String;
  TCPclient.SendCmd(theMessage);
  TCPclient.GetResponse(Result);

  if Result <> 'OK' then .... 
```

服务器发送到哪里

```
ASender.Reply.SetReply(200, 'OK');  ... or ...
ASender.Reply.SetReply(400, 'NAK'); 
```

现在，我想添加一个新命令，结果将是 NAK 或 ACK 加上**值**0、1 或 2

我对似乎有两个参数的响应代码很模糊，一个数字和一个文本....

我*可以*拼凑并发送“Ok0”、“OK1”或“OK2”，但这非常难看（可能是坏事）

我想我想使用 200 表示成功并在文本参数中发送 0、1 或 2（或使用“OK”并发送 0、1 或 2 作为数字代码，或使用 200、201、202 作为数字代码）？

有人可以帮我理解我应该编码什么以及为什么吗？（或者只是指向我的 URL）谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T04:59:45.103

`SendCmd()`为您从服务器读取响应，因此除非服务器实际发送两个单独的响应`GetResponse()`，否则请勿调用。`SendCmd()`

响应通常采用以下形式：

```
<Response Code> <Optional Text> 
```

其中响应代码是数字或文本关键字。

如果服务器发送数字响应代码，请按以下方式处理：

服务器：

```
// sends:
//
//  200 1
//
ASender.Reply.SetReply(200, '1'); 
```

客户：

```
if TCPclient.SendCmd(theMessage) = 200 then
  Value := StrToInt(TCPclient.LastCmdResult.Text.Text); 
```

或者：

```
// raises an exception if a non-200 response is received
TCPclient.SendCmd(theMessage, 200);
Value := StrToInt(TCPclient.LastCmdResult.Text.Text); 
```

如果服务器发送文本响应代码，请按如下方式处理：

服务器：

```
// sends:
//
//  OK 1
//
ASender.Reply.SetReply('OK', '1'); 
```

客户：

```
if TCPclient.SendCmd(theMessage, '') = 'OK' then
  Value := StrToInt(TCPclient.LastCmdResult.Text.Text); 
```

或者：

```
// raises an exception if a non-OK response is received
TCPclient.SendCmd(theMessage, ['OK']);
Value := StrToInt(TCPclient.LastCmdResult.Text.Text); 
```

响应的可选文本（如果存在）可以在`TCPclient.LastCmdResult.Text`属性中访问，`TStrings`因为可以以以下形式发送多行响应：

```
<Response Code>-<Optional Text>
<Response Code>-<Optional Text>
...
<Response Code> <Optional Text> 
```

服务器：

```
// sends:
//
//  200-The value is
//  200 1
//
ASender.Reply.SetReply(200, 'The value is');
ASender.Reply.Text.Add('1'); 
```

客户：

```
TCPclient.SendCmd(theMessage, 200);
Value := StrToInt(TCPclient.LastCmdResult.Text[1]); 
```

您还可以在此表单的响应之后发送辅助多行文本：

```
<Response Code> <Optional Text>
<Secondary Text>
. 
```

服务器：

```
// sends:
//
//  200 Data follows
//  Hello world
//  How are you?
//  .
//
ASender.Reply.SetReply(200, 'Data follows');
ASender.Reply.Response.Add('Hello world');
ASender.Reply.Response.Add('How are you?'); 
```

客户：

```
TCPclient.SendCmd(theMessage, 200);
TCPclient.IOHandler.Capture(SomeTStringsObj); 
```

# java - 类型 Email 必须实现继承的抽象方法 Comparable.compareTo(Object)

> ID：10344220
> 
> 赞同：2
> 
> 时间：2012-04-27T03:02:56.363
> 
> 标签：java, comparator

它给出了这些错误 类型 Email 必须实现继承的抽象方法 Comparable.compareTo(Object) 类型 Email.DateComparator 必须实现继承的抽象方法 Comparator.compare(Object, Object) 类型 Email.SubjectComparator 必须实现继承的抽象方法 Comparator .比较（对象，对象）

虽然我有

```
public class Email implements Comparable, Serializable
{
...

    public static class DateComparator implements Comparator
    {
        public int compare(Email email1, Email email2)
        {
            return email1.getTimestamp().compareTo(email2.getTimestamp());
        }
    }

    public static class SubjectComparator implements Comparator
    {
        public int compare(Email email1, Email email2)
        {
            return email1.getSubject().compareTo(email2.getSubject());
        }
    }

} 
```

怎么修？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:05:12.197

实现*Comparator.compare(Object, Object)*方法。将参数转换为电子邮件。你实现*了 Comparator.compare(Email, Email)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:06:24.817

你已经`Email`实现了`Comparable`接口。要么*不*实现它——如果你提供各种比较器，这是一件非常合理的事情——或者`compareTo`直接在`Email`类中实现该方法，并带有一些合理的“自然顺序”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:07:17.930

将您的班级签名更改为：

```
public class Email implements Comparable<Email>, Serializable 
```

并实现可比较的方法：

```
public int compareTo(Email otherEmail) 
```

当然，这是假设您首先要使课程具有可比性。目前，无论出于何种原因，您都在类中定义了嵌套比较器。

# java - 在 MySQL 中存储特殊字符

> ID：10344226
> 
> 赞同：2
> 
> 时间：2012-04-27T03:03:52.087
> 
> 标签：java, mysql, database, jpa, jdbc

我正在使用 mysql 查询浏览器将以下名称存储在包含 personNumber 和 personName 字段的 Person 表中。我在 utf-8 有 personName 字符集，如果我通过查询浏览插入名称，则查询运行正常，但是当我通过 JDBC 或 JPA 尝试时，名称的特殊字符变为“？”。这里有什么问题？...

名字是 1.Năstase 2.Hrustanović 3.Ogris-Martič 和一些类似的名字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:32:54.790

Try this code

```
jdbc:mysql://localhost:3306/MY_DB?useUnicode=yes&amp;characterEncoding=UTF8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T03:06:46.477

您是否正确设置了连接字符串？

```
jdbc:mysql://localhost:3306/administer?characterEncoding=utf8 
```

# android - 无法将字符串解析为 int 导致我的程序崩溃以及其他错误？

> ID：10344227
> 
> 赞同：0
> 
> 时间：2012-04-27T03:03:53.367
> 
> 标签：android, xml

我在这里有主要的 java 文件：http: [//pastebin.com/S76bgi7a](http://pastebin.com/S76bgi7a)

这里的 XML 文件：http: [//pastebin.com/8CJj0S54](http://pastebin.com/8CJj0S54)

还有一个我的字符串的pastebin ID：2sk1emgB

简短版本：我运行我的程序，它崩溃了，我不知道为什么。我查看 logcat，它给了我

04-27 02:58:47.927: E/AndroidRuntime(394): java.lang.RuntimeException: 无法启动活动 ComponentInfo{walmart.namespace/walmart.namespace.WalmartActivity}: java.lang.NumberFormatException: 无法解析'请以整数形式输入部门名称。

除了 case/ifthen 语句之外，我不知道它在我的文本中试图将字符串转换为数字的位置。如果我的代码很笨，我很抱歉，我是新手。

编辑：同样的问题，只是现在我得到了

04-27 03:19:08.858: E/AndroidRuntime(448): java.lang.RuntimeException: 无法启动活动 ComponentInfo{walmart.namespace/walmart.namespace.WalmartActivity}: java.lang.NumberFormatException: 无法解析''作为整数。

我猜这来自我的 OnClickListener，它应该在单击时删除字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:18:56.643

这是因为您在中设置了文本：

```
<EditText
        android:id="@+id/etName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="text"
            android:text="@string/dptname"  /> 
```

如果您想提示用户执行“在此处输入 ab yxz”之类的操作，您可能需要`"android:hint"`改用。

其次，对于这些情况，请使用“try .... catch(NumberFormatException)”，相信我，它会在调试时为您节省大量精力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:14:18.080

错误似乎很明显：

> 无法将“请输入部门名称”解析为整数。

该字符串在您的资源中为`dptnum`. 您可以在 XML 中使用它，如下所示：

```
<EditText
    android:id="@+id/etNum"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="int"
    android:text="@string/dptnum" /> 
```

正如错误所说，它需要一个整数（你设置`inputType`as `int`）并且你给它一个字符串。也许你想要这个：

```
<EditText
    android:id="@+id/etNum"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="int"
    android:hint="@string/dptnum" /> 
```

# java - Safari 5 / iOS，WebSocket 握手有时有效

> ID：10344230
> 
> 赞同：1
> 
> 时间：2012-04-27T03:04:21.767
> 
> 标签：java, ios, sockets, safari, websocket

我在 java 中创建了一个类，它允许我用 WebSocket 协议包装现有的套接字。我的一切都适用于[RFC6445](https://www.rfc-editor.org/rfc/rfc6455)协议，一切都适用于 chrome 和 FF。然而 Safari 和 iOS 使用的是[hixie76](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76) / [HyBi00](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-00#page-7)协议（根据维基百科）。

我一切正常，Safari 和 iOS 正确握手并开始发送/接收消息……嗯，至少大部分时间是这样。

大约 20-30% 的时间，握手失败并且 Safari 关闭连接。（Java 在尝试读取第一帧时读取 -1 字节）。Safari 不会在控制台报告任何错误，而只是调用 onclose 事件处理程序。

为什么握手只在部分时间起作用？

这是我的握手代码：

注意：没有异常被抛出，并且“握手完成”被写入控制台。但是在尝试读取第一帧时，连接被关闭。（Java 在 inst.read() 上返回 -1）

```
// Headers are read in a previous method which wraps the socket using RFC6445
// protocol. If it detects 2 keys it will call this and pass in the headers.
public static MessagingWebSocket wrapOldProtocol(HashMap<String, String> headers, PushbackInputStream pin, Socket sock) throws IOException, NoSuchAlgorithmException {
    // SPEC
    // https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76#page-32

    // Read the "key3" value. This is 8 random bytes after the headers.
    byte[] key3 = new byte[8];
    for ( int i=0; i<key3.length; i++ ) {
        key3[i] = (byte)pin.read();
    }

    // Grab the two keys we need to use for the handshake
    String key1 = headers.get("Sec-WebSocket-Key1");
    String key2 = headers.get("Sec-WebSocket-Key2");

    // Count the spaces in both keys
    // Abort the connection is either key has 0 spaces
    int spaces1 = StringUtils.countMatches(key1, " ");
    int spaces2 = StringUtils.countMatches(key2, " ");
    if ( spaces1 == 0 || spaces2 == 0 ) {
        throw new IOException("Bad Handshake Request, Possible Cross-protocol attack");
    }

    // Strip all non-digit characters from each key
    // Use the remaining value as a base-10 integer.
    // Abort if either number is not a multiple of it's #spaces counterpart
    // Need to use long because the values are unsigned
    long num1 = Long.parseLong( key1.replaceAll("\\D", "") );
    long num2 = Long.parseLong( key2.replaceAll("\\D", "") );
    if ( !(num1 % spaces1 == 0) || !(num2 % spaces2 == 0) ) {
        throw new IOException("Bad Handshake Request. Possible non-conforming client");
    }

    // Part1/2 is key num divided by the # of spaces
    int part1 = (int)(num1 / spaces1);
    int part2 = (int)(num2 / spaces2);

    // Now calculate the challenge response
    // MD5( num1 + num2 + key3 )  ... concat, not add
    MessageDigest md = MessageDigest.getInstance("MD5");
    md.update(ByteBuffer.allocate(4).putInt(part1));
    md.update(ByteBuffer.allocate(4).putInt(part2));
    md.update(key3);
    byte[] response = md.digest();

    // Now build the server handshake response
    // Ignore Sec-WebSocket-Protocol (we don't use this)
    String origin = headers.get("Origin");
    String location = "ws://" + headers.get("Host") + "/";

    StringBuilder sb = new StringBuilder();
    sb.append("HTTP/1.1 101 WebSocket Protocol Handshake").append("\r\n");
    sb.append("Upgrade: websocket").append("\r\n");
    sb.append("Connection: Upgrade").append("\r\n");
    sb.append("Sec-WebSocket-Origin: ").append(origin).append("\r\n");
    sb.append("Sec-WebSocket-Location: ").append(location).append("\r\n");
    sb.append("\r\n");

    // Anything left in the buffer?
    if ( pin.available() > 0 ) {
        throw new IOException("Unexpected bytes after handshake!");
    }

    // Send the handshake & challenge response
    OutputStream out = sock.getOutputStream();
    out.write(sb.toString().getBytes());
    out.write(response);
    out.flush();

    System.out.println("[MessagingWebSocket] Handshake Complete.");

    // Return the wrapper socket class.
    MessagingWebSocket ws = new MessagingWebSocket(sock);
    ws.oldProtocol = true;
    return ws;
} 
```

谢谢！

注意：我不是在寻找 WebSockets 的第三方替代品，例如 jWebSocket、Jetty 和 Socket.IO。我已经知道其中的许多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-20T11:17:36.053

您的 MD5 摘要方法有一个错误：协议描述如下： [https ://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76#section-5.2](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76#section-5.2)

```
byte[] bytes = new byte[16];    
BytesUtil.fillBytesWithArray(bytes, 0, 3, BytesUtil.intTobyteArray(part1));
BytesUtil.fillBytesWithArray(bytes, 4, 7, BytesUtil.intTobyteArray(part2));
BytesUtil.fillBytesWithArray(bytes, 8, 15, key3); 
```

我认为您的问题是由 Little Endian 和 Big Endian 引起的。

# javascript - 使用 Javascript/Jquery 创建高效的 Tab 切换

> ID：10344234
> 
> 赞同：0
> 
> 时间：2012-04-27T03:05:31.513
> 
> 标签：javascript, jquery, algorithm

注意：使用 3rd 方标签系统不是一个选项，因此请不要推荐。

在我的页面上，我有几个`<div>`s 和几个选项卡。每个 div 可以属于多个选项卡。例如，所有 div 都属于“All”选项卡，然后一些 div 属于“Today”选项卡，一些属于“Tomorrow”，等等。

我想要做的是，当用户单击“今天”选项卡时，我只想显示属于该选项卡的 div。当他单击任何其他选项卡时，前一个选项卡的 div 应该被隐藏并且所选选项卡的 div 应该显示。到目前为止，非常标准的标签行为。

然而不同的是，一个 div 可以在多个选项卡之间共享。

I was thinking that, whenever a new tab is selected, I could simply loop through all the divs of the last selected tab, hide them, and then loop through the current tab's divs and show them.

但是我想知道是否会有更有效/更少 CPU 密集型的方法。此外，如果它们在最后一个选项卡和当前选项卡之间共享，此方法将导致一些 div 被隐藏，然后立即再次淋浴。（例如：div_111 可以在今天和明天之间共享。用户点击今天，div_111 被显示。然后他点击明天，div_111 最初是隐藏的，然后才再次显示）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:11:51.103

你要注意的是重绘。当您添加或删除一个元素时，浏览器必须弄清楚更改如何影响页面上的每个其他元素，并相应地重新定位/调整每个元素的大小。这个过程几乎总是 DOM 操作中最昂贵的部分——当然比找出哪些元素进入哪些选项卡更昂贵。

浏览器尝试优化重绘——它们尽可能少地重绘页面，有时将多个更改组合到同一个重绘中。但是，最好将事情掌握在自己手中。无论添加或删除多少个节点，您都可以确保重绘不超过两次，方法是首先从 DOM 中删除父节点，然后进行所有更改，然后重新附加它。这是一个简单的例子：

```
var container = document.getElementById('container'),
    buffer = document.createDocumentFragment(),
    newNodes = tabs[selection], // an array or object, generated at page load,
                                // containing all divs that show up in this tab
    i, div;
document.body.removeChild(container);
for (i = 0; div = newNodes[i]; i++) {
    buffer.appendChild(div); // if div is in container then it will be
                             // automatically removed
}
container.innerHTML = ''; // probably more efficient to remove nodes individually
container.appendChild(buffer);
document.body.appendChild(container); 
```

根据您的布局，删除`container`可能会导致其下方的内容瞬间跳跃。如果您想要一个优美的外观，您可以固定`container`' 父级的高度或在其位置插入一个占位符`container.parentNode.replaceNode()`.

如果您最小化重绘，那么您不应该有任何效率问题。但是，如果您仍然想调整，当然，优化您的内容插入逻辑。最简单的方法可能是将绑定到单个选项卡的内容与显示在多个选项卡中的内容分开，可能通过为每种内容类型使用不同的容器。请记住，最好的解决方案是不比它需要的更通用的解决方案。

# python - 共享对象上的 PyDoc

> ID：10344235
> 
> 赞同：0
> 
> 时间：2012-04-27T03:05:35.923
> 
> 标签：python, shared-objects, pydoc

简单的小问题，但我找不到答案！

是否可以在 python 中用作模块的共享对象上使用 PyDoc？假设我在 *.so 中声明了所有帮助，并且可以通过帮助（模块或类名）使用它们。但我想使用 PyDoc 从这些创建一个 HTML。这样一来，我就不必写两次文档了！

让我知道它是否可能，或者是否有一个小黑客:)

此外，在 C 文件中，我可以放置每个函数的描述！但是当我输入 help(my_class) 我没有类的描述，然后是函数列表。我究竟做错了什么 ？

所以，我想要的是当我在 C 文件中执行此操作时：

> > > 返回 PyObject_NEW(my_class, &my_class_type);

后来，在 Python 中，加载模块后，我可以执行以下操作：

> > > 帮助（我的班级）

并查看帮助，就像帮助（int）一样！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:29:45.580

所以，我部分解决了我的问题。

我仍然不能在 *.so 文件上使用 pydoc。但是现在，我可以添加模块，这很好。一切都在这里：[http ://docs.python.org/extending/newtypes.html](http://docs.python.org/extending/newtypes.html)

但我仍在寻找 pydoc 解决方案！

# android - Android - 有没有办法判断后退按钮会将您带到哪个 Intent？

> ID：10344238
> 
> 赞同：1
> 
> 时间：2012-04-27T03:06:06.750
> 
> 标签：android

我正在覆盖这个函数：

```
 @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) 
```

但是有没有办法判断后退按钮将把用户带到哪个 Intent 或屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:40:16.567

```
List<CharSequence> theActivityTrace = getActivityTrace(null); 
```

这个函数返回堆栈上的活动跟踪列表，您可以调用以下方法，如上 amd mAct 是您当前的上下文。

```
public LinkedList<CharSequence> getActivityTrace(LinkedList<CharSequence> aTrace) {
    if (aTrace==null)
        aTrace = new LinkedList<CharSequence>();
    aTrace.add(mAct.getLocalClassName()+" ("+mAct.getTitle()+")");
    if (mAct.getCallingActivity()!=null)
        aTrace.add(mAct.getCallingActivity().toString()+" ("+mAct.getIntent().toString()+")");
    else if (mAct.getCallingPackage()!=null)
        aTrace.add(mAct.getCallingPackage().toString()+" ("+mAct.getIntent().toString()+")");

    return aTrace;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T03:47:44.017

您最好将信息添加到启动当前活动的意图中。

活动一

```
 Intent lIntent = new Intent();
    lIntent.putExtra( EXTRAS_ACTIVITY_KEY, ACTIVITY_IDENTIFIER );
    startActivitiy... 
```

活动 B

```
 public boolean onKeyUp(int keyCode, KeyEvent event){
           Intent lIntent = getIntent();
           if(lIntent.hasExtra(EXTRAS_ACTIVITY_KEY) &&
                   ACTIVITY_IDENTIFIER.equals(lIntent.getStringExtra(EXTRAS_ACTIVITY_KEY)){
                   // Great we know that it was a Activity A...
                   ... your code here....
           } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T03:10:21.383

您可以使用 ActivityManager 从 Activity Stack 中检索它。

# xml - 使用 xsl 创建本地化内容第 2 部分

> ID：10344242
> 
> 赞同：1
> 
> 时间：2012-04-27T03:06:31.290
> 
> 标签：xml, xslt, localization

[对这个问题](https://stackoverflow.com/questions/10326974/using-xsl-to-create-localized-content)的要求略有不同

字典保持相同的格式但增长：

```
<resources>
    <text name="property.to.match">
        <en_US>The American translation</en_US>
        <en_GB>The British translation</en_GB>
        <en>The language localized, but non locale based generic translation</en>
    </text>
    <text name="other.property.to.match">
        <en>The other language localized, but non locale based generic translation</en>
    </text
    <text name="another.property.to.match">
        <en>Second generic property</en>
    </text>
    <text name="a.label.to.match">
        <en>Generic Checkbox label</en>
    </text>
    <text name="some.text.to.translate">
        <en>This text follows a static bit of text</en>
    </text>
</resources> 
```

但我想匹配的文档更复杂：

```
<html>
    <div>Lot's of html</div>
    <div>[property.to.match]</div>
    <div>
        <h1>[other.property.to.match]</h1>
        <p><img src="x.jpg" />[another.property.to.match]</p>
        <input type="checkbox"/>[a.label.to.match]
        <p>Some text that shouldn't be translated followed by [some.text.to.translate]
    </div>
</html> 
```

因此，匹配器需要能够在 */text() 中找到多个以 [] 开头和结尾的文本字符串，但可能位于其他节点和未翻译文本的位中。

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:36:30.273

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:param name="pLookupPath" select="'file:///c:/temp/delete/lookup2.xml'"/>
     <xsl:param name="pLang" select="'en_GB'"/>

     <xsl:key name="kLookup" match="text/*"
      use="concat(../@name, '+', name())"/>

     <xsl:variable name="vDict" select="document($pLookupPath)"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template name="replaceWithLookup" match=
      "text()[contains(., '[') and contains(., ']')]">
      <xsl:param name="pText" select="."/>

      <xsl:if test="string-length($pText)">
          <xsl:value-of select=
           "substring-before(concat($pText, '['), '[')"/>

          <xsl:variable name="vToken" select=
           "substring-before(substring-after($pText, '['), ']')"/>

        <xsl:variable name="vReplacement">
         <xsl:for-each select="$vDict">
          <xsl:value-of select=
          "(key('kLookup', concat($vToken, '+', $pLang))
         |
           key('kLookup', concat($vToken, '+', substring-before($pLang, '_')))
           )[1]"/>
         </xsl:for-each>
        </xsl:variable>

        <xsl:choose>
         <xsl:when test="$vReplacement">
          <xsl:value-of select="$vReplacement"/>
         </xsl:when>
         <xsl:when test="$vToken">
          <xsl:value-of select="concat('[', $vToken, ']')"/>
         </xsl:when>
         <xsl:otherwise>
           <xsl:value-of select=
            "substring-after
              ($pText,
               substring-before(concat($pText, '['), '[')
               )"/>
         </xsl:otherwise>
        </xsl:choose>

        <xsl:if test="$vToken">
         <xsl:call-template name="replaceWithLookup">
           <xsl:with-param name="pText" select=
            "substring-after($pText, concat('[', $vToken, ']'))"/>
         </xsl:call-template>
        </xsl:if>
      </xsl:if>
     </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（基于提供的文档，但变得更加困难和具有挑战性——最后一个文本节点包含两个替换目标）：

```
<html>
    <div>Lot's of html</div>
    <div>[property.to.match]</div>
    <div>
        <h1>[other.property.to.match]</h1>
        <p>
            <img src="x.jpg" />[another.property.to.match]
        </p>
        <input type="checkbox"/>[a.label.to.match]         
        <p>Some text that shouldn't be translated followed
        by [some.text.to.translate]
        XXX [other.property.to.match]
        </p>
    </div>
</html> 
```

**产生想要的正确结果：**

```
<html>
   <div>Lot's of html</div>
   <div>The British translation</div>
   <div>
      <h1>The other language localized, but non locale based generic translation</h1>
      <p><img src="x.jpg">Second generic property
      </p><input type="checkbox">Generic Checkbox label
      <p>Some text that shouldn't be translated followed
                by This text follows a static bit of text
                XXX The other language localized, but non locale based generic translation

      </p>
   </div>
</html> 
```

# c++ - 如何在 OpenCv 中将 cv::Mat 转换为灰度？

> ID：10344246
> 
> 赞同：49
> 
> 时间：2012-04-27T03:07:03.227
> 
> 标签：c++, variables, opencv, grayscale

如何将 cv::Mat 转换为灰度？

我正在尝试从 opencv 运行 drawKeyPoints func，但是我收到了 Assertion Filed 错误。我的猜测是它需要在参数中接收灰度图像而不是彩色图像。

```
void SurfDetector(cv::Mat img){
vector<cv::KeyPoint> keypoints;
cv::Mat featureImage;

cv::drawKeypoints(img, keypoints, featureImage, cv::Scalar(255,255,255) ,cv::DrawMatchesFlags::DRAW_RICH_KEYPOINTS);

cv::namedWindow("Picture");
cv::imshow("Picture", featureImage); 
```

}

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-04-27T06:47:02.920

使用 C++ API，函数名称略有变化，现在它写道：

```
#include <opencv2/imgproc/imgproc.hpp>

cv::Mat greyMat, colorMat;
cv::cvtColor(colorMat, greyMat, CV_BGR2GRAY); 
```

主要困难在于函数在**imgproc**模块中（不在核心中），默认情况下 cv::Mat 是蓝绿红 (BGR) 顺序，而不是更常见的 RGB。

**开放CV 3**

从 OpenCV 3.0 开始，还有另一个约定。转换代码嵌入在命名空间中`cv::`，并以 . 为前缀`COLOR`。因此，示例变为：

```
#include <opencv2/imgproc/imgproc.hpp>

cv::Mat greyMat, colorMat;
cv::cvtColor(colorMat, greyMat, cv::COLOR_BGR2GRAY); 
```

据我所见，包含的文件路径没有改变（这不是错字）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-22T14:07:49.673

可能对后来者有所帮助。

```
#include "stdafx.h"
#include "cv.h"
#include "highgui.h"

using namespace cv;
using namespace std;

int main(int argc, char *argv[])
{
  if (argc != 2) {
    cout << "Usage: display_Image ImageToLoadandDisplay" << endl;
    return -1;
}else{
    Mat image;
    Mat grayImage;

    image = imread(argv[1], IMREAD_COLOR);
    if (!image.data) {
        cout << "Could not open the image file" << endl;
        return -1;
    }
    else {
        int height = image.rows;
        int width = image.cols;

        cvtColor(image, grayImage, CV_BGR2GRAY);

        namedWindow("Display window", WINDOW_AUTOSIZE);
        imshow("Display window", image);

        namedWindow("Gray Image", WINDOW_AUTOSIZE);
        imshow("Gray Image", grayImage);
        cvWaitKey(0);
        image.release();
        grayImage.release();
        return 0;
    }

  }

} 
```

# windows - 在haskell中，Windows上的套接字侦听失败

> ID：10344247
> 
> 赞同：0
> 
> 时间：2012-04-27T03:07:03.473
> 
> 标签：windows, sockets, haskell

我用相同的代码问了一个关于 windows 上的信号的问题，这是另一个问题

```
import IO
import Control.Exception hiding (catch)
import Control.Concurrent
import Network

main = withSocketsDo $ do {main'}
main' = listenOn (PortNumber 9900) >>= acceptConnections

acceptConnections sock = do
        putStrLn $ "trying to accept" ++ (show sock)-- debug msg
        conn@(h,host,port) <- accept sock
        print conn -- debug msg
        forkIO $ catch (talk conn `finally` hClose h) (\e -> print e)
        acceptConnections sock

talk conn@(h,_,_) = hGetLine h >>= hPutStrLn h >> hFlush h >> talk conn 
```

我在win7上运行程序，看起来socket创建成功了，但是我不能telnet，而且netstat没有显示任何正在监听的socket，有什么问题吗？或者，haskell在windows上有bug？ （顺便说一句，使用此代码在 debian 上完美运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:55:23.830

当我在win7上使用netstat -a时，我发现端口9900的监听IP是[::]，既不是127.0.0.1也不是0.0.0.0，所以我猜问题是在函数“listenOn”中创建套接字时，然后我写了“listenOn2”替换。问题解决了。这是完整的代码：（唯一的区别是将 proto 从 [[getProtocolNumber "tcp"]] 更改为 [[defaultProtocol]]），也许这是一个错误。

```
import IO
import Control.Exception hiding (catch)
import Control.Concurrent
import Network
import Network.Socket
listenOn2 (PortNumber port) = do
        --proto <- getProtocolNumber "tcp"  ,here is the difference!!!!
        let proto = defaultProtocol
        bracketOnError
            (socket AF_INET Stream proto)
            (sClose)
            (\sock -> do
                setSocketOption sock ReuseAddr 1
                --addr <- inet_addr "127.0.0.1"
                bindSocket sock (SockAddrInet port iNADDR_ANY)
                listen sock maxListenQueue
                return sock
            )
main = withSocketsDo $ do {main'}
main' = listenOn2 (PortNumber 9900) >>= acceptConnections

acceptConnections sock = do
        putStrLn $ "trying to accept" ++ (show sock)-- debug msg
        conn@(h,host,port) <- Network.accept sock
        print conn -- debug msg
        forkIO $ catch (talk conn `finally` hClose h) (\e -> print e)
        acceptConnections sock

talk conn@(h,_,_) = hGetLine h >>= hPutStrLn h >> hFlush h >> talk conn 
```

# sql-server - 将离线数据库与外部数据库同步 Windows Phone 7

> ID：10344248
> 
> 赞同：0
> 
> 时间：2012-04-27T03:07:14.723
> 
> 标签：sql-server, database, windows-phone-7, sync

我有一个使用 linq 实现的本地数据库的 wp7 应用程序。我有一个外部 MS-SQL (2008 R2) 服务器。两个数据库具有相同的架构。

我想知道如何执行以下操作：

1.  将信息从 MS-SQL 下载到数据库到手机的本地数据库中。（我可以使用一些数据绑定技术吗 - 我没有找到这样做的链接）
2.  如果在手机上进行了更改（添加新记录，编辑现有记录），我如何将更改推送回服务器。
3.  如果对服务器进行了更改，然后推送到电话（我知道我可以在这里使用观察者模式）

我还应该注意，客户端应用程序并非始终在线访问互联网。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:44:34.300

这里没有魔法。

您将需要创建从服务器获取更新的功能（可能意味着您需要在每条记录上添加某种时间戳，说明上次更改的时间，以便您可以查询它）。

您将需要创建上传数据和更新服务器上的数据库的功能（并可能处理冲突）。

我要么使用 ODATA 与服务器通信，要么使用普通的旧 WCF/JSON 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:17:52.297

看看[同步框架工具包](http://code.msdn.microsoft.com/Sync-Framework-Toolkit-4dc10f0e)

# python - 我们如何使用 python 和 html 设置会话？

> ID：10344252
> 
> 赞同：0
> 
> 时间：2012-04-27T03:08:04.347
> 
> 标签：python, html, cookies, session-cookies, cherrypy

目前我正在开发一个使用python作为服务器端脚本的项目，我们使用cherrypy作为服务器，因为我刚刚自学了python，所以我遇到了一个问题，当我登录到一个框架时，它已经登录了；但是当我跳到其他帧时，它会从前一帧中注销。所以我需要为用户登录添加一个会话。我们如何在当前的 python 和 html 文件中添加会话和 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:18:20.753

遵循 CherryPy 文档：[http ://docs.cherrypy.org/stable/refman/lib/sessions.html](http://docs.cherrypy.org/stable/refman/lib/sessions.html)

# ruby - def myobject.mymeth 和 class << myobject; 之间的区别 定义mymeth

> ID：10344253
> 
> 赞同：2
> 
> 时间：2012-04-27T03:08:04.863
> 
> 标签：ruby, singleton, singleton-methods

我目前正在练习/学习 Ruby 中的单例方法和单例类，我遇到了一个疑问。鉴于：

```
myobject = Object.new 
```

这样做有什么区别：

```
def myobject.mymethod
end 
```

并这样做：

```
class << myobject
 def mymethod
 end
end 
```

如果有，我们什么时候会使用其中一个？有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:52:48.660

使用*ruby​​ --dump ins*研究结果，如下：

1.

```
# test.rb
myobject = Object.new

def myobject.mymethod
end 
```

执行*ruby​​ --dump ins test.rb*

输出是：

```
D:\>ruby --dump ins test.rb
== disasm: <RubyVM::InstructionSequence:<main>@test.rb>=================
local table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1] s1)
[ 2] myobject
0000 trace            1                                               (   1)
0002 getinlinecache   9, <ic:0>
0005 getconstant      :Object
0007 setinlinecache   <ic:0>
0009 send             :new, 0, nil, 0, <ic:1>
0015 setdynamic       myobject, 0
0018 trace            1                                               (   3)
0020 putspecialobject 1
0022 getdynamic       myobject, 0
0025 putobject        :mymethod
0027 putiseq          mymethod
0029 send             :"core#define_singleton_method", 3, nil, 0, <ic:2>
0035 leave
== disasm: <RubyVM::InstructionSequence:mymethod@test.rb>===============
0000 trace            8                                               (   3)
0002 putnil
0003 trace            16                                              (   4)
0005 leave 
```

2.

```
# test.rb
myobject = Object.new

class << myobject
 def mymethod
 end
end 
```

执行*ruby​​ --dump ins test.rb*

输出是：

```
D:\>ruby --dump ins test.rb
== disasm: <RubyVM::InstructionSequence:<main>@test.rb>=================
local table (size: 2, argc: 0 [opts: 0, rest: -1, post: 0, block: -1] s1)
[ 2] myobject
0000 trace            1                                               (   1)
0002 getinlinecache   9, <ic:0>
0005 getconstant      :Object
0007 setinlinecache   <ic:0>
0009 send             :new, 0, nil, 0, <ic:1>
0015 setdynamic       myobject, 0
0018 trace            1                                               (   3)
0020 getdynamic       myobject, 0
0023 putnil
0024 defineclass      :singletonclass, singletonclass, 1
0028 leave
== disasm: <RubyVM::InstructionSequence:singletonclass@test.rb>=========
0000 trace            2                                               (   3)
0002 trace            1                                               (   4)
0004 putspecialobject 1
0006 putspecialobject 2
0008 putobject        :mymethod
0010 putiseq          mymethod
0012 send             :"core#define_method", 3, nil, 0, <ic:0>
0018 trace            4                                               (   6)
0020 leave                                                            (   4)
== disasm: <RubyVM::InstructionSequence:mymethod@test.rb>===============
0000 trace            8                                               (   4)
0002 putnil
0003 trace            16                                              (   5)
0005 leave 
```

所以*def myobject.method* 的方式是先向 myobject 发送 core#define_singleton_method 消息，然后 core#define_singleton_method 消息的 implementation 获取 myobject 的单例类，并将方法定义添加到单例类中。

*class << myobject* 的方式是首先向 myobject 发送 singletonclass 消息，然后向 myobject 的 singletonclass 发送 core#define_method 消息。

在实践中，

如果要为 obj 定义一些单例方法，请使用*class << obj*。

如果您只为 obj 定义一个单例方法，请使用*def obj.method*。

# jquery - 防止嵌入式 Youtube 视频被暂停？

> ID：10344254
> 
> 赞同：0
> 
> 时间：2012-04-27T03:08:18.060
> 
> 标签：jquery, youtube

我在网站中嵌入了一个 youtube 视频，并希望阻止点击它的能力（这会暂停视频）。使用 jQuery 尝试过各种事情，例如 stopPropagation、preventDefault 等。

简而言之，我想添加一些内容，以便单击页面完全没有任何作用。任何想法谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:11:33.527

您可以使用 YouTube 无铬播放器并使用[JavaScript API](https://developers.google.com/youtube/js_api_reference)控制播放器。

# java - 在没有会话 bean 的情况下优雅地处理属性

> ID：10344256
> 
> 赞同：1
> 
> 时间：2012-04-27T03:08:48.357
> 
> 标签：java, jsf-2, richfaces

我正在开发一个使用 JSF 2.0 和 Richfaces 4 的应用程序，它由许多显示元素的表格组成，当然还有通常的查看/编辑/删除选项。经过一些 SO 浏览和谷歌搜索后，我决定发布一个问题，因为我找到的答案并没有解决我的问题。

现在，直截了当，我的应用程序在处理存储在请求 bean 中的某些属性时遇到问题，并且在某些点上，由于连续请求而丢失。

例如，当我想编辑一个对象时，该对象被发送 (f:propertyActionListener) 到在表单上显示数据的请求 bean，然后在该请求结束时将其丢弃。保存时，会创建一个新对象并将表单上的属性设置为它，并且该项目被保存而不是更新，因为它没有 id (JPA + Hibernate)。

我已经调查了很多选项，这就是我到目前为止所做的事情和结果：

**f:param + h:link 或 h:commandLink：**使用 @ManagedProperty 参数为空，我无法在 Context 上找到它以通过 JNDI 查找它。

**f:setPropertyActionListener + h:commandLink + Request Bean：**有效...但我丢失了一些数据。显示数据的表单有一些条件渲染的字段，我无法保存该信息，因此如果验证阶段发现无效数据，表单就会混乱。

**f:viewParam + h:commandLink + View Scoped Bean：**这里有一些奇怪的东西。这个不能直接工作，因为 bean 似乎在呈现表单之前被丢弃，因为表单是在没有任何信息的情况下呈现的，因为 bean 是干净的。

**使用会话 bean：**就像一个魅力，但我不想仅仅因为我仍在学习有关 JSF 生命周期的东西而为每个表单创建一个会话 bean，我想以正确的方式来做。

如果我想保留请求会话方法，有没有办法存储参数（对象或纯字符串）并稍后在请求 bean 上获取？

不知道这是否有帮助，但我通过 ui:insert 和 ui:define 使用母版页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:34:14.483

使用视图范围的 bean。它应该工作。您在那里描述的问题表明您将其绑定到 JSTL 标记`id`或`binding`属性。您不应该在视图范围的 bean 上这样做。另请参阅[`@ViewScoped`标签处理程序中的失败](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)。另一个可能的原因是您使用 CDI`@Named`来管理 bean 而不是 JSF 的`@ManagedBean`. 这也可以解释为什么`@ManagedProperty`在您的尝试之一中不起作用，因为它还要求 bean 由 JSF 的`@ManagedBean`.

对于主-详细信息页面方法，在表格页面中使用`<h:link>`with`<f:param>`在主页面中创建查看/编辑链接。

例如`user/list.xhtml`

```
<h:dataTable value="#{userList.users}" var="user">
    <h:column>#{user.id}</h:column>
    <h:column>#{user.name}</h:column>
    <h:column>
        <h:link value="Edit" outcome="edit">
            <f:param name="id" value="#{user.id}" />
        </h:link>
    </h:column>
</h:dataTable> 
```

bean 可以只是请求范围。

然后，在默认页面（在本例中为编辑页面）中，用于`<f:viewParam>`转换、验证和设置`id`为`User`.

例如`user/edit.xhtml`

```
<f:metadata>
    <f:viewParam name="id" value="#{userEdit.user}"
        converter="#{userConverter}" converterMessage="Bad request. Unknown user."
        required="true" requiredMessage="Bad request. Please use a link from within the system." />
</f:metadata>

<h:messages />
<h:link value="Back to all users" outcome="users" />

<h:form id="user" rendered="#{not empty userEdit.user}">
    <h:inputText value="#{userEdit.user.name}" required="true" />
    ...

    <h:commandButton value="Save" action="#{userEdit.save}">
        <f:ajax execute="@form" render="@form" />
    </h:commandButton>
</h:form> 
```

使用`@ViewScoped`bean 来保存数据、服务和操作方法：

```
@ManagedBean
@ViewScoped
public class UserEdit {

    private User user;

    @EJB
    private UserService service;

    public String save() {
        service.save(user);
        return "users";
    }

    // Getter+setter.
} 
```

# javascript - 如果条件为真，则将类添加到父元素

> ID：10344257
> 
> 赞同：3
> 
> 时间：2012-04-27T03:08:52.100
> 
> 标签：javascript, jquery, css, parent, addclass

如果条件为真但似乎无法使其正常工作，我正在尝试将一个类应用于子元素的父元素。简而言之，我想检查一个表格中是否有数字“0”的单元格并隐藏其父行。

我已经创建了我所做的基本 jsfiddle：http: [//jsfiddle.net/immbudden/YbZPE/3/](http://jsfiddle.net/immbudden/YbZPE/3/)

还有我放在一起的jquery片段：

```
if ($('#the_table>table>td:contains("0")').length === 1) {
    $(this).parent("tr").addClass("hidden");
} 
```

我仍在学习 jQuery 和 javascript，这可能是小事，但我似乎无法理解它！

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T03:21:23.397

```
$('td', '#the_table > table').each(function() {
    if ($(this).text() === '0') {
        $(this).parents("tr").addClass("hidden");
    }
}); 
```

[小提琴](http://jsfiddle.net/adeneo/YbZPE/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:14:27.160

使用浏览器的开发者工具！或[获取 Firebug](http://getfirebug.com/)。

加载该页面后，在 javscript 控制台中尝试以下操作：

```
$('#the_table>table>td:contains("0")') 
```

如果那给你

```
[ ] 
```

那么它没有找到任何元素。然后你可以尝试分解它，例如，看看这是否有效：

```
$('#the_table>table>td') 
```

并继续取出并添加该表达式的某些部分，直到它产生`true`或`false`根据您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T03:17:48.673

你可以这样做，

```
$('#the_table table td').filter( function (index) {
    return $(this).text() == '0';
}).parent("tr").addClass("hidden"); 
```

[http://jsfiddle.net/YbZPE/5/](http://jsfiddle.net/YbZPE/5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T03:21:31.417

首先，如果您想第一次使用 eq(0)，则必须先获取单元格：

```
$cell = jQuery('#the_table tr td:eq(0)'); 
```

那么你必须把类放在父行上：

```
$cell.parent("tr").addClass("hidden"); 
```

下面的代码将做到这一点。

```
jQuery('#the_table tr td:eq(0)').parent("tr").addClass("hidden"); 
```

# parsing - 斯坦福依赖解析器无法处理一些中文句子

> ID：10344258
> 
> 赞同：1
> 
> 时间：2012-04-27T03:08:58.187
> 
> 标签：parsing, dependencies, nlp, stanford-nlp

我正在解析一组中文句子。通常斯坦福解析器运行良好，但是

1.  在特殊情况下，如“燃烧室内机”可直接进行燃烧气的形成和“在日常运行中肯定不能保持燃烧量的多少，混合型乘客的肥胖程度，”的配重问题。它们格式正确，但是从 Demo.java 复制的“List tdl = gs .typedDependenciesCCprocessed();”行中的 NullPointerException。

2.  我连程序都能正常运行，但是依赖解析的输出却漏掉了一些东西，比如'[advmod(传统-3,这种传统-2),amod(范围-6,-3),nn(范围-6,油门) -4), nn(范围-6, 应用-5), dep(限制-8, 受到-7), root(ROOT-0, 限制-8), dep(合理性-11, 最广泛-10), conj _并(限制-8, 合理性-11), nn(形势-18, 汽车电子技术-16), nn(形势-18, 发展-17), num(电子油门-23, 一-21), dep (一-21, 种-22), dep(egas-25, （-24), dep(电子油门-23, egas-25), dep(egas-25, ）-26)]'，可见依赖解析结果中没有'-1'，'-9'，'-12'，'-13'，'-14'，'-15'，'19'。对应的原句是“但这种传统油门应用范围内受到限制，普遍合理性，在新月的汽车电子技术发展情况下，一种电子油门（例如运而生。”，如果你需要的话

如何修复它们。谢谢。

# c - gcc 不会在 Interix-Windows 7 x64 上编译简单的 C 程序

> ID：10344263
> 
> 赞同：2
> 
> 时间：2012-04-27T03:09:45.500
> 
> 标签：c, interix

我刚刚在实验室的新工作站上设置了 Interix。最初，我只是要设置 x64 工具（你知道，来自 Interop 的工具），但是当我这样做时，有些东西不起作用。然后我继续安装 x86 工具。我*假设*正在使用 32 位工具。

我继续并转移了我在 x86 机器上使用 Interix 处理的文件。基本的 C 程序，没什么花哨的。只是我们在课堂上正在做的事情。我可以使用 NEdit 和 Vim 等打开它，但无论我在哪个 shell 中发出 gcc 命令，它都不会编译。这是我得到的错误：

```
gcc: error trying to exec 'cc1': execvp: No such file or directory 
```

由于我对 POSIX 兼容的系统比较陌生，因此我不确定如何解决这个问题。你们中的一个好人能告诉我如何用外行的话来解决这个问题吗？

编辑：

如果您希望在 Windows 上进行 UNIX 工作……只需使用 Cygwin。我正在编辑此内容以告诉您这一点，因为您可能迷路并在 Google 上查找答案。无论如何，Windows 8 删除了 Interix。

# objective-c - UILabel UITextView

> ID：10344269
> 
> 赞同：0
> 
> 时间：2012-04-27T03:10:33.053
> 
> 标签：objective-c, uilabel, uitextview

我现在陷入了一个问题，我想让文本可以选择，但是文本已经放入了 UILabel，所以目前我无法选择，现在将 UILabel 更改为 UITextView 对我来说不是一个好的选择，因为我只是维护旧代码并且只能对其进行一些小改动，但是最新的命令需要我在 UILabel 上实现这个功能，所以任何人都有任何想法。或者只是给我一些小指令可能就足够了，谢谢很多

[在 UILabel/UITextView](https://stackoverflow.com/questions/8811909/getting-the-word-touched-in-a-uilabel-uitextview) 中触摸这个词没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:36:46.797

您需要切换到 a`UITextView`或`UITextField`。与尝试重新实现这些类已经实现的选择 UI 相比，这将是一个更小、更容易的更改。`editable`通过将视图的属性设置为 NO，您可以使文本视图（或字段）可选择但不可编辑。

# c++ - 用于访问 COM 对象属性的 C++ 包装函数（宏）

> ID：10344276
> 
> 赞同：3
> 
> 时间：2012-04-27T03:12:12.970
> 
> 标签：c++, properties, com, macros

我有一个 COM 对象，其接口包含许多按以下方式定义的属性：

```
[propget] HRESULT Width([out, retval] LONG *lValue); 
```

要从 C++ 访问此类属性，我需要添加如下代码：

```
LONG lValue;  
HRESULT hr = pInterface->get_Width(&lValue);  
if (FAILED(hr)) lValue = DEFAULT_VALUE; 
```

这个块不是太长，但是当使用许多属性时，代码变得不太好看。有没有办法将属性访问代码分成一些宏或模板函数，以便能够直接使用属性，如下所示：

```
printf("The width of the object is %d", GET_OBJECT_PROPERTY(pInterace, Width, DEFAULT_VALUE)); 
```

UPD：VC2008编译器用于构建项目

UPD：谢谢大家！这是我的解决方案：

```
template <class interface_type, class property_type>
property_type GetPropertyValue(interface_type* pInterface, HRESULT(STDMETHODCALLTYPE interface_type::*pFunc)(property_type*), property_type DefaultValue = 0)
{
  property_type lValue;

  HRESULT hr = (*pInterface.*pFunc)(&lValue);

  if (FAILED(hr)) 
    lValue = DefaultValue;
  return lValue;
} 
```

可以称为

```
LONG lVideoStreamCount = GetPropertyValue(pInfo, &IInterfaceName::get_VideoStreamCount); 
```

我仍在寻找一种方法来从通话中消除此“IInterfaceName::”部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:41:42.927

## [**#import "myInterface.tlb"**](http://msdn.microsoft.com/en-us/library/8etzzkb6.aspx)

（正如 Hans 已经在评论中提出的那样。真的。我发现 C++ 中的 COM 无法忍受）

这会生成 - 在默认设置中 - 一个高级包装器。像您的示例这样的属性通过[__decspec(property)](http://msdn.microsoft.com/en-us/library/yhfk0thd%28VS.80%29.aspx)公开，这是一个特定于编译器的扩展：

```
LONG lValue = pInterface->Width; 
```

* * *

[编辑] 更多信息：

为了编译 .idl，我禁用了 MIDL 的 C 标头生成（如果需要，代理/存根生成除外）。

使用默认的#import 设置：

*   你会得到高级包装器
    *   将 FAILED(hr) 变成`_com_error`异常
    *   变成`[out, retval]`真正的返回值，
    *   像属性一样暴露属性
    *   `raw_Method()`通过等方式访问“原始” COM 接口 `get_Property()`。
*   GUID 可通过 获得`__uuidof()`，例如，`__uuidof(IMyInterface)`而不是`IID_IMyInterface`。
*   所有定义都在基于 COM 库名称的命名空间中

但是，所有这些都可以通过#import 属性进行配置。

我将我的 .idl 放在一个单独的项目中，只生成 .tlb，我使用 #imported 标头来实现和使用接口。这意味着您必须对向导生成的代码进行一些调整，例如为 COM 方法实现添加前缀`raw_`

# jsf - NetBeans 中的项目文件夹名称干扰 JSF/GlassFish 部署

> ID：10344278
> 
> 赞同：1
> 
> 时间：2012-04-27T03:12:47.377
> 
> 标签：jsf, netbeans, glassfish

我不确定这是 JSF 问题还是 NetBeans 问题。我对两者都很陌生。我也不确定stackoverflow是否是最好的SE站点，所以如果我错了，请帮助我并迁移它。谢谢。

我在文件夹中有一个项目，比如说 C:\Folder1，当我尝试在 GlassFish 服务器上“部署”它时，我收到关于缺少类的奇怪错误……尽管该类甚至不是其中的一部分项目。我相信 C:\Folder1 可能是我过去用于不同项目的东西，但它早已不复存在。所以这个新项目，如果我将它移动到文件夹 C:\Folder1a 或 C:\Folder2 或除 C:\Folder1 之外的任何其他文件夹......那么它将正常部署。但是，如果我将它移回 Folder1（即该级别下完全相同的目录结构），我会从 GlassFish 服务器收到关于无法找到它甚至不需要的类的神秘错误消息。

我在其他地方得到了一个尝试“清理”并重新构建项目的建议，但这没有用。这是有关我遵循的步骤的更多详细信息。

在 Netbeans 中创建新项目，将其指向一个名为 Ex2605 的空文件夹。之后，我将几个源文件（.java 和 .xhtml）带入 Ex2605 目录结构。当我清理和构建时，它说好的。当我尝试部署时，我收到此错误：

> 部署期间发生错误：加载应用程序时出现异常：java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: java.lang.NoClassDefFoundError: LShoppingCart;。有关详细信息，请参阅 server.log。C:\\Ex2605\nbproject\build-impl.xml:721：模块尚未部署。有关详细信息，请参阅服务器日志。构建失败（总时间：16 秒）

“ShoppingCart”是来自另一个项目的一个类，我很久以前在同一个位置的一个名为 Ex2605 的目录中拥有它。但是该目录早已不复存在，它已从 Netbeans 项目列表中删除，并且当前 Ex2605 文件夹中的任何文件中的任何位置都没有对 ShoppingCart 类的引用。因此，Netbeans 显然正在寻找名为 LShoppingCart 的东西的事实告诉我，它在其他地方保留了我曾经在 Ex2605 文件夹中拥有的历史记录，显然我需要清除该历史记录，但不知道如何清除。

如果我在任何不名为 Ex2605 的目录中尝试上述所有方法，它都可以正常工作。

有任何想法吗？显然我可以解决它，但它仍然让我烦恼。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T06:16:25.707

Netbeans 有一个编译缓存，有时会[导致问题](https://stackoverflow.com/questions/5965798/netbeans-deployment-fails-after-class-rename)。您可以删除编译缓存，看看它是否有帮助。

以下是回答我的问题的步骤：

1.  停止服务器

2.  清理项目

3.  停止 NetBeans

4.  删除 %HOME%.netbeans\6.9\var\cache

5.  启动 NetBeans

# php - WAMP 和 flush()

> ID：10344279
> 
> 赞同：0
> 
> 时间：2012-04-27T03:12:48.560
> 
> 标签：php, while-loop, wamp

我试图通过让字符串迭代一定次数来在我的 WAMP 服务器上实现一个简单的 while 循环。但是，尽管在 WAMP PHP 设置中关闭了输出缓冲，但整个输出会立即发生。

版本 1

```
$i = 0;
while ($i < 5)
{
print ("This is an example of a while loop.<br/>");
flush();
sleep(1);
$i++;

} 
```

版本 2

```
$i = 0;
while ($i < 5)
{
print ("This is an example of a while loop.<br/>");
ob_start();
ob_flush();
flush();
sleep(1);
$i++;

} 
```

两个版本都没有按照我想要的方式输出字符串，即一次一个，间隔一秒。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T21:22:22.210

我遇到了这个问题，并且能够通过合并以下代码来解决它。

```
// Necessary Settings and stuff for output buffering to work right
apache_setenv('no-gzip', 1);
ini_set('zlib.output_compression', 0);
ini_set('implicit_flush', 1);
ini_set('output_buffering', "off");

// Start a new output buffer and send some blank data to trick browsers
ob_start();
echo str_repeat(" ", 4096);

for ($i=0; $i < 10; $i++) {
    echo "<div>Echo Something...</div>\n";

    // Call both ob_flush and flush functions
    ob_flush();
    flush();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T13:49:54.990

我一直对 WAMP 和冲洗有疑问，最终得出的结论是它在 WAMP 中被破坏了。似乎无论我有什么服务器设置，WAMP 的打包方式都有一些问题，那就是行不通。

让它工作的唯一方法是使用 XAMPP，或者安装和配置你自己的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T12:51:27.000

对于那些即使使用贾斯汀的解决方法也无法做到的人。在 wamp x64 上测试。

```
// Necessary Settings and stuff for output buffering to work right
apache_setenv('no-gzip', 1);
ini_set('zlib.output_compression', 0);
ini_set('implicit_flush', 1);
ini_set('output_buffering', "off");

// Start a new output buffer and send some blank data to trick browsers
ob_start();
echo str_repeat(" ", 4096);
ob_end_flush(); //addition
ob_flush();
flush();

for ($i=0; $i < 10; $i++) {
    ob_start(); //addition
    echo "<div>Echo Something...</div>\n";

    ob_end_flush(); //addition
    ob_flush();
    flush();
} 
```

# php - PHP 中的 include 和 include_once 问题

> ID：10344290
> 
> 赞同：1
> 
> 时间：2012-04-27T03:15:23.797
> 
> 标签：php, include

我目前正在做一个 PHP 项目。我将项目文件复制到我的本地盒子。它运行良好，除了一件事。

这是文件夹层次结构：

```
root/index.php
root/event/admin/list.php 
root/event/admin/functions.php 
```

在 index.php 中有一行：

```
<?php include ("event/admin/list.php"); ?> 
```

其中应该包括 list.php

但是在 list.php 中，有一行：

```
<?php include_once "event/admin/functions.php";?> 
```

由于 list.php 不在根目录中，`event/admin/functions.php`所以没有被调用，我的本地`index.php`无法加载这部分。但生产运行良好。

有谁知道发生了什么？这是一种设置 include/include_once 的方法，总是使用 ROOT 目录而不使用 $_SERVER["DOCUMENT_ROOT"] 之类的东西吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:18:31.123

在我看来，使用 $_SERVER['DOCUMENT_ROOT'] 是个好主意。你可以这样做：

```
include_once($_SERVER['DOCUMENT_ROOT'] . "/path/to/file.php"); 
```

但是，尝试用以下代码替换 list.php 中的代码：

```
<?php include_once "../../event/admin/functions.php";?> 
```

这是与相对路径相关的已知问题。因此， DOCUMENT_ROOT 更可取。或者，您可以编辑 include_path。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:17:51.990

将[包含路径](http://php.net/include_path)设置为对您的 probject 有用的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:17:07.080

这是与相对路径相关的常见问题。您可以从绝对路径包含您的文件，也可以[在 php.ini 中修改您的 include_path](http://www.php.net/manual/en/ini.core.php#ini.include-path)以使用您的文档根目录，并指定相对于那里的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T03:22:09.763

比较两台机器之间的[包含路径配置。](http://www.php.net/manual/en/ini.core.php#ini.include-path)

# jquery-ui - 使用 bootstrap.css 选择更小更好的选择

> ID：10344292
> 
> 赞同：8
> 
> 时间：2012-04-27T03:15:46.747
> 
> 标签：jquery-ui, twitter-bootstrap

当然，我知道 SELECT 表单元素很难设计和/或修改超出基础的元素。

只是出于好奇，有人知道一次性引导程序（来自推特的那个）解决方案，它可以让我影响 SELECT 的大小，甚至可能应用看起来更像引导按钮的渐变（而不是粗糙的表面）他们现在有）。

我不介意自己在 CSS 上胡思乱想，但我想在重新发明轮子之前先问问周围的情况。

任何指针、链接或建议将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-10T19:53:38.603

您可以使用 jQuery 插件 bootstrap-select：

[https://developer.snapappointments.com/bootstrap-select/](https://developer.snapappointments.com/bootstrap-select/)

它会将您的选择变成引导按钮下拉菜单

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T03:06:31.723

有点晚了，但也许这可以帮助[http://blog.iamjamoy.com/docs/select.html](http://blog.iamjamoy.com/docs/select.html)

或者这个[http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

第一个不适用于IE，如果您可以修复它，请提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T08:09:06.697

```
jQuery(function($){
        $('select').each(function(i, e){
            if (!($(e).data('convert') == 'no')) {
                //$(e).hide().wrap('<div class="btn-group" id="select-group-' + i + '" />');
                $(e).after('<div class="btn-group" id="select-group-' + i + '" />');
                var select = $('#select-group-' + i);
                var current = ($(e).val()) ? $(e).val(): '&nbsp;';
                select.html('<input type="hidden" value="' + $(e).val() + '" name="' + $(e).attr('name') + '" id="' + $(e).attr('id') + '" class="' + $(e).attr('class') + '" /><a class="btn" href="javascript:;">' + current + '</a><a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:;"><span class="caret"></span></a><ul class="dropdown-menu"></ul>');
                $(e).find('option').each(function(o,q) {
                    select.find('.dropdown-menu').append('<li><a href="javascript:;" data-value="' + $(q).attr('value') + '">' + $(q).text() + '</a></li>');
                    if ($(q).attr('selected')) select.find('.dropdown-menu li:eq(' + o + ')').click();
                });
                select.find('.dropdown-menu a').click(function() {
                    select.find('input[type=hidden]').val($(this).data('value')).change();
                    select.find('.btn:eq(0)').text($(this).text());
                });
                $(e).remove();
            }
        });
    }); 
```

# ruby - 如何在 ruby -debug 控制台中评估多行块

> ID：10344294
> 
> 赞同：1
> 
> 时间：2012-04-27T03:15:52.837
> 
> 标签：ruby, debugging, ruby-debug

我想评价

```
def foo
  puts "you done got fooed"
end 
```

在`ruby-debug`控制台中。它与`irb`. 但是在 ruby​​-debug 中，我无法让读者在换行后继续阅读输入。

我什至尝试用反斜杠结束这一行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T03:23:06.367

您可以从 rdebug 输入 irb：

```
(rdb:1) irb
irb(main):001:0> self
=> main
irb(main):002:0> def foo
irb(main):003:1> puts "foo!"
irb(main):004:1> end
=> nil
irb(main):005:0> exit
(rdb:1) p foo
foo!
nil
(rdb:1) 
```

# c - 在静态库中查找静态分配的数据块

> ID：10344296
> 
> 赞同：2
> 
> 时间：2012-04-27T03:16:14.427
> 
> 标签：c, linux, memory, assembly

我有一个小型静态库 ( `.a`)。在静态库中有一个指针，它指向一个大的、静态分配的一维数组。

当我将我的代码链接到这个库时，指针的地址被硬编码在不同的位置，通过反汇编很容易找到。问题是，我希望我的代码能够访问该数组（库出现故障，我想知道原因）。

自然地，通过反汇编、将该地址硬编码到我的代码中，然后重新编译来获得该指针是微不足道的。这不是问题，除非库可以与其他模块以不同的方式配置，并且数组的指针会根据链接的模块而变化。

获取该指针有哪些选择？因为数组的起始状态是可预测的，所以我可以遍历内存，用信号处理程序捕获段错误，直到找到看起来合理的东西。有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T03:53:58.640

由于您的库是一个`.a`档案库，因此我假设您使用的是某种 UNIX。

全局数组应该有一个与之关联的符号名称。您的工作会更容易或更难，具体取决于描述它的符号类型。

如果有描述这个数组的*全局*符号，那么你可以直接引用它，例如

```
extern char some_array[];
for (int i = 0; i < 100; i++) printf("%2d: 0x%2x\n", i, some_array[i]); 
```

如果符号是本地的，那么您可以先用 将其全球化`objcopy --globalize-symbol=some_array`，然后按上述方法进行操作。

那么如何确定描述该数组的符号是什么？Run `objdump -dr foo.o`，其中`foo.o`包含您知道引用该数组的指令。将出现在引用说明旁边的重定位将告诉您名称。

最后，运行`nm foo.o | grep some_array`。如果您看到`00000XX D some_array`，您就完成了——该数组是全局可见的（对于 也是如此`B`）。如果看到`000XX d some_array`，则需要先将其全球化（对于 也是如此`b`）。

更新：

> 到 objectdump 的 -dr 不起作用

对，因为这个符号原来是本地的，所以重定位可能是指`.bss + 0xNNN`.

> `00000000006b5ec0 b grid`
> `00000000006c8620 b grid`
> `00000000006da4a0 b grid`
> `00000000006ec320 b grid`
> `00000000006fe1a0 b grid`

您必须`nm`在最终链接的可执行文件上运行，而不是在`foo.o`存档中的单个对象上运行。在您的二进制文件中调用了五个*单独*的静态数组`grid`，只有第一个是您显然关心的。

> 声明“外部 int 网格 []；” 并使用它给出一个未定义的引用

这是本地符号的预期：库中的代码类似于：

```
// foo.c
static char grid[1000]; 
```

如果不先将符号全球化，就不`grid`能从外部引用它。`foo.o`

> 出于安全原因，我不允许在我们的服务器上运行已更改的库二进制文件

我希望你明白这个论点*完全是废话*：如果你可以将自己的代码链接到那个二进制文件中，那么你可以在服务器上做*任何事情*（受用户 ID 限制）；你已经被信任了。如果服务器管理员不信任您，修改第三方库应该是服务器管理员*最不担心的。*

# java - 将字节数组转换为文件而不将文件写入磁盘

> ID：10344298
> 
> 赞同：1
> 
> 时间：2012-04-27T03:16:42.187
> 
> 标签：java, swing, file

我已经在 mysql 数据库中以字节为单位保存了图标大小的图像，现在，我需要做的是从数据库中检索这些文件字节并在 swing 应用程序中显示这些图像，我有一个方法可以从数据库中获取字节并转换它回到一个文件，但我必须将该文件写入磁盘

这是我的方法，

```
public void downloadFile(int FamerId) throws Exception {
  String sql = "SELECT * FROM images WHERE famer_id=?";
  Connection con = JDBCConnectionPool.getInstance().checkOut();
  PreparedStatement ps = con.prepareStatement(sql);        
  ps.setInt(1, FamerId);
  ResultSet resultSet = ps.executeQuery();

  int count = 0;

  while (resultSet.next()) {
    ByteArrayInputStream bais;
    ObjectInputStream inputStream;

    bais = new ByteArrayInputStream(resultSet.getBytes("image"));
    inputStream = new ObjectInputStream(bais);
    SaveFile sf = (SaveFile) inputStream.readObject();
    FileOutputStream out = new FileOutputStream("fileLocation/" + resultSet.getString("image_name"));
    byte[] bytes = sf.getArray();

    int c = 0;
    while (c < bytes.length) {
      out.write(bytes[c]);
      c++;
    }

    out.close();
    inputStream.close();
    bais.close();            
    JDBCConnectionPool.getInstance().checkOut();
  }
} 
```

但是这种方法不能满足我的需要，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:28:53.503

[`ImageIO`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)您可以使用该类直接从字节流中读取图像。当然，假设您之前以兼容的格式写入了图像数据。鉴于在您的代码中读取字节数据时使用中间对象输入流这一事实，这很难说。这是一个如何直接从数据库创建图像而不使用中间文件的示例：

```
bais = new ByteArrayInputStream(resultSet.getBytes("image"));
final BufferedImage image = ImageIO.read(bais);
// pass the image to your Swing layer to be rendered. 
```

以及如何将数据写入数据库的示例，以便能够使用此代码：

```
final ByteArrayOutputStream baos = new ByteArrayOutputStream(64000);
ImageIO.write(image, "PNG", baos);
final byte[] data = baos.toByteArray();
// write data to database 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:32:16.130

您的问题的答案取决于其平台。从文档

> 文件输出流是用于将数据写入 File 或 FileDescriptor 的输出流。文件是否可用或是否可以创建取决于底层平台。特别是某些平台，一次只允许一个 FileOutputStream（或其他文件写入对象）打开一个文件进行写入。在这种情况下，如果所涉及的文件已经打开，则此类中的构造函数将失败。
> 
> FileOutputStream 用于写入原始字节流，例如图像数据。要写入字符流，请考虑使用 FileWriter。

因此，如果您想写入文件，则可能会或可能不会创建文件。

如果您不想创建文件并且您只对 byte[] （文件的内容）感兴趣，那么您可以使用@Perception 提供的解决方案，或者可以只传递您已经创建的 inputStream。

# ruby-on-rails - Rails 3 项目中未显示背景图像

> ID：10344310
> 
> 赞同：0
> 
> 时间：2012-04-27T03:18:17.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image

我正在尝试在 Rails 3 应用程序的其中一个页面上设置背景图像，但没有显示。

我究竟做错了什么？？以下是相关代码：

```
<div class="hero-unit" style="background: url('public/assets/fks.JPG') ;"> 
```

谢谢，

费萨尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T03:20:20.457

试试这个：

```
<div class="hero-unit" style="background: url('assets/fks.JPG') ;> 
```

更好的是：

```
<div class="hero-unit" style="background-image: url(<%= asset_path 'fks.JPG' %>) ;> 
```

# android - 在我的谷歌地图上放置一个精确的标记

> ID：10344312
> 
> 赞同：1
> 
> 时间：2012-04-27T03:18:22.360
> 
> 标签：android, google-maps, google-maps-markers

好的，我以前问过这个。得到了一个答案。我将更深入地了解我正在做的事情。我正在为拥有多家商店的企业创建一个应用程序。我有一个布局，显示每个商店的按钮。单击其中一个按钮，它会将您带到另一个带有两个按钮的视图。在这个视图中，有一个按钮，当你点击它时，它会为你调用商店，让它工作得很好。当您单击同一视图中的另一个按钮时，它会将您带到 Google 地图，并向您显示商店的位置。这一切都很好。但我想要的是一个标记也显示在地图上。我不需要它做任何事情，只需向客户展示这是商店所在的位置。这是我正在使用的代码--->

```
import com.google.android.maps.GeoPoint;

import com.google.android.maps.MapActivity;

import com.google.android.maps.MapController;

import com.google.android.maps.MapView;

import com.google.android.maps.MyLocationOverlay;

import android.os.Bundle;

public class Main extends MapActivity {

    MapController mControl;

    GeoPoint GeoP;

    MapView navView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        navView = (MapView) findViewById(R.id.navView);

        navView.displayZoomControls(true);

        navView.setBuiltInZoomControls(true);

            navView.setSatellite(true);

            navView.getOverlays().add(new MyLocationOverlay(this,navView));

        double lat = 40.325874;

        double longi = -76.002211;

        GeoP = new GeoPoint((int) ( lat *1E6), (int) (longi * 1E6));

        mControl = navView.getController();

        mControl.animateTo(GeoP);

        mControl.setZoom(20);

        }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:00:16.373

@Erik Graul

查看本教程，它将对您有所帮助

[http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T05:41:25.070

看看这个[http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.htm](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T04:44:14.630

```
GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());
Drawable srcdrawable = getApplicationContext().getResources().getDrawable(R.drawable.pin_blue);
CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable, getApplicationContext());
OverlayItem srcoverlayitem = new OverlayItem(p, "Hello!", "This is your Location.");
srcitemizedOverlay.addOverlay(srcoverlayitem);
mapView.getOverlays().clear();
mapView.getOverlays().add(srcitemizedOverlay);
mapController.animateTo(srcpoint);
mapController.setZoom(16); 
```

在 ontouch 方法中使用上面的代码也使用下面的 CustomItemizedOverlay.java 类

```
public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private final ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

    private Context context;

    public CustomItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlays.add(overlay);
        this.populate();
    }

} 
```

# java - 从向量中获取前 5 个元素

> ID：10344313
> 
> 赞同：-1
> 
> 时间：2012-04-27T03:18:23.437
> 
> 标签：java, multithreading, loops, collections

我的环境中有一个`Vector`，我`multithreaded`需要将它的前 5 个元素传递给`threadpool`

. 有没有最好的做法？（我的意思是使用 java util 类）

我可以在一个`synchronized`块内执行此操作并循环遍历向量，直到找到前 5 个元素。我想知道这是正确的方法。

请给我建议。

更新部分 ------

请找到我需要解决的实际问题。

1.  A类将有一个向量（根据优先级排序。这将以高频更新。我需要获取前5个元素）

2.  B 类将具有`myOwnThreadPool`扩展`java.util.ThreadPoolExecutor`并覆盖它的`afterExecute`方法。（池大小为 5 ）

3.  A 类将从向量中获取前 5 个元素并将其发送到 B 类池进行处理。

4.  一旦`afterExecute`方法通知返回一个线程，我将从`vector`（在 A 类 / 中具有最高优先级）中选择第一个最多的元素并将其发送到池中进行处理。

我想现在我的问题为大家提供了一个更好的主意。

谢谢大家的回答/指导，非常欢迎进一步的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T03:25:27.363

`Vector`提供了一种[`subList`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html#subList%28int,%20int%29)方法，您可以按如下方式使用：

```
List five = myVector.subList(0, 5); 
```

这不会复制元素，只会在向量中构建一个视图。您可以按如下方式添加复制：

```
List five = new List();
Collections.copy(five, myVector.subList(0, 5)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:47:16.083

请不要使用矢量。请考虑使用`Collections.synchronizedList()`创建同步列表。

[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)

```
List list = Collections.synchronizedList(new ArrayList());
      ...
  synchronized(list) {
      Iterator i = list.iterator(); // Must be in synchronized block
      while (i.hasNext())
          foo(i.next());
  } 
```

# cakephp - 使用 hasMany 模型查找条件

> ID：10344315
> 
> 赞同：6
> 
> 时间：2012-04-27T03:18:31.497
> 
> 标签：cakephp, model, find, conditional-statements

我有4个模型：

Item-----hasMany---->详情

项目-----hasMany---->收藏

项目-----hasMany---->类别

如何找到所有具有 Favourite.member_id = '8' 和 Category.item_category_id = '1' 的项目

这是我的项目模型关系：

```
public $hasMany = array(                
    'Detail' => array(
        'className' => 'Detail',
        'foreignKey' => 'item_id',
        'dependent' => true,
        'conditions' => '',
        'order' => 'created DESC',          
    ),      
    'Category' => array(
        'className' => 'Category',
        'foreignKey' => 'item_id',
        'dependent' => true,
        'conditions' => '',
        'order' => 'created DESC',          
    ),
    'Favorite' => array(
        'className' => 'Favorite',
        'foreignKey' => 'item_id',
        'dependent' => true,
        'conditions' => '',
        'order' => 'created DESC',          
    )

); 
```

我使用了这个查询（），没关系：

```
$this->set('test',$this->Item->query("SELECT items.*
                                        FROM items, categories, favourites
                                        WHERE items.id = items_item_categories.item_id
                                        AND items.id = favorites.item_id
                                        AND categories.item_category_id = 1 AND favourites.member_id = 8")); 
```

但是我不喜欢用query()，我把它改成find()，好像不太好：

```
$this->set('test',$this->Item->find('all', array(
                                                'contain'=>array(
                                                    'ItemDetail',
                                                    'Category'=>array('conditions'=>array('Category.item_category_id'=>1)),
                                                    'Favorite'=>array('conditions'=>array('Favorite.member_id'=>8))); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T14:37:53.850

您需要在模型上调用 containsableBehaivor

```
<?php
class Item extends AppModel {
    public $actsAs = array('Containable');
} 
```

在您的控制器中，您可以进行查询

```
$items = $this->Item->find('all', array(
           'contain'=>array(
                 'ItemDetail',                                                                
                 'Category'=>array(
                       'conditions'=>array('Category.item_category_id'=>1)
                  ),
                 'Favorite'=>array(
                       'conditions'=>array('Favorite.member_id'=>8)
                  )
              )
          );
$this->set('test', $items); 
```

尝试使用[联接](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

```
$items = $this->Item->find('all', array(
            'joins' => array( 
                        array( 
                            'table' => 'categories', 
                            'alias' => 'Category', 
                            'type' => 'inner',  
                            'conditions'=> array('Category.item_category_id' => 1) 
                        ), 
                        array( 
                            'table' => 'favorites', 
                            'alias' => 'Favorite', 
                            'type' => 'inner',  
                            'conditions'=> array('Favorite.member_id' => 8, 'Item.id = Favorite.item_id') 
                            )
                        ),
           'contain'=>array('ItemDetail','Category','Favorite')
          );
$this->set('test', $items); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T00:59:51.407

你也可以尝试这样的事情：

```
$this->Item->hasMany['Favorite']['conditions']['member_id'] = 8; 
```

这与使用条件重新绑定模型具有相同的效果。

只是一个可能的问题。上面将为请求的其余部分添加条件，如果要回滚到以前的行为，则需要取消设置条件：

```
unset($this->Item->hasMany['Favorite']['conditions']['member_id']); 
```

请记住将 $this->Item->recursive 属性设置为所需的值（[递归属性](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)）。默认值为 1，这是您工作所需的最小值。

# spring - 春季社交xml配置

> ID：10344316
> 
> 赞同：1
> 
> 时间：2012-04-27T03:18:32.830
> 
> 标签：spring, spring-social, xml-configuration

我已经阅读了 spring 社交文档，但是配置的部分是基于 Java 的，但是我的项目的配置是基于 xml 的。所以请告诉我如何在 spring xml 配置文件中配置 spring social。谢谢你，对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T07:27:45.210

您必须创建一个社交配置 xml 文件，并且必须导入您的 root-context.xml 文件。此外，您可能会考虑使用 spring security 配置您的应用程序。这取决于您的项目架构。

示例 spring social xml 配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:social="http://www.springframework.org/schema/social"
       xmlns:facebook="http://www.springframework.org/schema/social/facebook" xmlns:bean="http://java.sun.com/jsf/core"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
       http://www.springframework.org/schema/social http://www.springframework.org/schema/social/spring-social.xsd
       http://www.springframework.org/schema/social/facebook http://www.springframework.org/schema/social/spring-social-facebook.xsd">

<!-- Ensures that configuration properties are read from a property file -->
<context:property-placeholder location="file:${sampleapp.appdir}/conf/appparam.txt"/>

<!--
    Configures FB and Twitter support.
-->
<facebook:config app-id="${facebook.clientId}" app-secret="${facebook.clientSecret}" />

<!--
    Configures the connection repository. This application uses JDBC
    connection repository which saves connection details to database.
    This repository uses the data source bean for obtaining database
    connection.
-->
<social:jdbc-connection-repository data-source-ref="sampleappDS" connection-signup-ref="accountConnectionSignup"/>

<!--
   This bean is custom account connection signup bean for your registeration logic.
    -->
    <bean id="accountConnectionSignup" class="com.sampleapp.social.AccountConnectionSignup"></bean>

<!--
    This bean manages the connection flow between the account provider and
    the example application.
-->
<bean id="connectController" class="org.springframework.social.connect.web.ConnectController" autowire="constructor">
    <constructor-arg index="0" ref="connectionFactoryLocator"/>
    <constructor-arg index="1" ref="connectionRepository"/>
</bean> 
```

示例 root-context.xml ：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop" xmlns:cache="http://www.springframework.org/schema/cache"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
        http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">

<!-- Scan for Spring beans declared via annotations. -->
<context:component-scan base-package="com.sampleapp"/>

<context:annotation-config/>

<context:property-placeholder location="file:${sampleapp.appdir}/conf/appparam.txt"/>

<cache:annotation-driven/>

<!-- Root Context: defines shared resources visible to all other web components -->
<import resource="security-config.xml"/>
<import resource="classpath*:spring/bean-context.xml"/>
<import resource="classpath*:spring/persistence-config.xml"/>
<import resource="social-config.xml"/>

<aop:aspectj-autoproxy proxy-target-class="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:15:28.010

发布您的代码和问题将帮助我们为您提供最佳解决方案。参考下面的链接可能就是你要找的东西 [http://harmonicdevelopment.tumblr.com/post/13613051804/adding-spring-social-to-a-spring-mvc-and-spring](http://harmonicdevelopment.tumblr.com/post/13613051804/adding-spring-social-to-a-spring-mvc-and-spring)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:50:25.680

查看示例 xml 配置

[https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase-xml/src/main/webapp/WEB-INF/spring](https://github.com/SpringSource/spring-social-samples/tree/master/spring-social-showcase-xml/src/main/webapp/WEB-INF/spring)

# php - 如何获取 javascript 对象的值？

> ID：10344320
> 
> 赞同：0
> 
> 时间：2012-04-27T03:19:00.367
> 
> 标签：php, javascript

我有一个对象，该对象内部是其他对象。我想获得这些对象的价值。谢谢！

```
 foreach($query as $row){
        $vehicles[$row->deviceID] = Array(
            'description' => $row->description,
            'deviceID' => $row->deviceID
        ); 
      } 
```

然后我将它传递给视图并将其存储到全局 javascript 变量中。

```
 var vehicleList = <?php echo $vehicleList; ?>; 
```

如果我在 chrome 的控制台日志中键入 vehicleList，这是我的 console.log 的输出：

```
vehicleList

>Object
  >11292: Object
    description: "Bus 1"
  >11293: Object
    description: "Bus 2"
  >11294: Object
    description: "Bus 1" 
```

我想得到的价值是描述。是否也可以将另一个值存储到对象 11292 中？如果是，如何？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:20:50.483

```
console.log(vehicleList["11292"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:21:22.300

要访问对象的属性，请使用语法`object.property`. 示例包括`myArray.length`、`document.body`等`window.name`。

但是，在这种情况下，属性名称是数字（更具体地说，它们以数字开头 - 中间可以有数字），因此您需要改用`[]`符号。这就像`.`符号一样工作，除了属性名称作为字符串给出。例子：`object["property"]`, `myArray["length"]`, `document["body"]`, `window["name"]`.

# django - 使用python的django表单中的占位符

> ID：10344323
> 
> 赞同：2
> 
> 时间：2012-04-27T03:19:53.040
> 
> 标签：django, html, internet-explorer

我正在使用 django python，我在 forms.py 中为我的表单字段应用占位符，比如

```
self.fields['email'].widget.attrs['class']            = 'form-text'
self.fields['country'].widget.attrs['class']          = 'form-dropdownfield'
self.fields['email'].widget.attrs['placeholder']            = 'Email*'
in .css file
.form-text
{
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    height: 30px;
    width: 300px;
    border-radius:8px;
    border:none;
    box-shadow:-1px 1px 1px 0 rgba(0, 0, 0, 0.1) inset;
    border:1px solid #D2D2D2;
    padding-left:10px;
} 
```

问题1：占位符在所有浏览器中都可以正常工作，但在IE中不能正常工作，我该如何解决IE问题？问题2：国家字段是下拉列表，如何为这个申请占位符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:32:53.980

占位符适用于 INPUT 表单元素，但不适用于 SELECT（下拉）元素。 [这个问题](https://stackoverflow.com/questions/5805059/select-placeholder) 有许多答案，为下拉元素的默认值提供策略。

虽然我不确定，但许多版本的 IE 可能不支持 placeholder 属性（[这篇文章](http://www.suburban-glory.com/blog?page=142)表明它们不受支持）。
如果您想要支持的 IE 版本不支持占位符，您可以尝试使用 polyfill，例如[https://github.com/ginader/HTML5-placeholder-polyfill](https://github.com/ginader/HTML5-placeholder-polyfill)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-09T11:28:13.013

无需采用任何 javscript 或任何方法，您只需使用 html css 即可

HTML

```
<select id="myAwesomeSelect">
    <option selected="selected" class="s">Country Name</option>
    <option value="1">Option #1</option>
    <option value="2">Option #2</option>

</select> 
```

CSS

```
.s
{
    color:white;
        font-size:0px;
    display:none;
} 
```

# zend-framework - Zend 框架 --- 渲染视图前的动作代码

> ID：10344325
> 
> 赞同：0
> 
> 时间：2012-04-27T03:20:11.940
> 
> 标签：zend-framework, view, controller, rendering, action

当我使用zend框架时，如何在渲染视图之前在控制器中运行动作代码？

现在我使用 2 个动作函数，

第一个没有意见。第二个有预期的观点。

当第一个函数被调用时，在函数结束时它将被重定向到调用第二个函数。

虽然我发现这种方法有效，但用户无法通过浏览器后退按钮返回到最后一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:58:55.690

我不太了解您的问题，但是...控制器始终在渲染操作之前运行。它是一个在渲染之前运行的逻辑被调用。我从你的问题中不知道你真正需要什么=（请尝试更客观。如果你需要在控制器中对控制器中的所有操作进行操作之前运行任何代码，则使用**init**或**preDispatch**函数 。http: [//zfreak.wordpress.com /2011/04/14/usage-of-init-vs-predispatch-methods-in-zend-front-controller-zend-framework/](http://zfreak.wordpress.com/2011/04/14/usage-of-init-vs-predispatch-methods-in-zend-front-controller-zend-framework/) 如果您需要 2 个独立的逻辑，您可以在项目中创建自己的函数或类，并在需要的任何地方调用或创​​建实例。如果您的问题是任何作为 ACL 限制的渲染...我在控制器中使用自己的函数来检索 error_access_page 并在调用 $this->_helper->viewRenderer->setNoRender() 之后。如果我的用户无权访问，则会显示 error_page 并且没有渲染操作的 phtml 文件。

希望帮助=]

# opengl - 平移正方形之间的OpenGL像素间隙

> ID：10344328
> 
> 赞同：3
> 
> 时间：2012-04-27T03:20:39.603
> 
> 标签：opengl

我遇到了一个问题，即两个对象之间的连接处偶尔会出现一个像素孔，这些对象具有相同的一组顶点，但被转换为彼此相邻。我设法用一行简单的正方形重现了这一点。

正方形为 1 x 1 单位，中心为 0,0。我在一行中放置了一些这样的正方形，使用 glTranslatef 将每个正方形移动到位（在这种情况下，我提供的值始终是整数）。我发现当相机位于某些位置时，OpenGL 在这些正方形之间留下一个像素间隙，通过它我可以看到后面的任何内容（例如，我清除后台缓冲区的颜色）。将正方形顶点更改为角落中的 0,0 并不能解决问题。

示例代码：

```
glPushMatrix();
glTranslatef(0, 0, 0);
drawSquare();
glPopMatrix();

glPushMatrix();
glTranslatef(0, 0, 1);
drawSquare();
glPopMatrix();

glPushMatrix();
glTranslatef(0, 0, 2);
drawSquare();
glPopMatrix(); 
```

图像显示了这种情况。我在问题像素周围的屏幕截图中添加了一个红色圆圈。

![图片](../Images/ef140664d2d85501fea52a656460027c.png)

我不知道为什么会这样，在指定最终的“世界”坐标时，消除简单正方形的每平方平移是可能的（并解决了问题），在我第一次注意到问题的地方使用更复杂的几何图形不是很实用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:37:16.447

我不知道效果叫什么，但我知道它是如何发生的。

如果两个多边形“共享”一条边，但该边的端点是根据不同的值计算的，则在生成的平移顶点坐标中总是会有一些[错误。](http://en.wikipedia.org/wiki/Floating_point_error#Accuracy_problems)顶点坐标中的轻微错误会改变构成使用它的边缘的点，因此您会得到（1）重叠像素（通常不是那么大）和（2）丢失像素，如您的示例所示。

虽然您通常可以做出一些努力来最小化公共顶点的重复，但通常问题会变得困难。

例如，我的世界也有同样的问题。

一种可能的快速解决方法是使用非常小的放大系数（例如 1.00001）对受影响的对象应用比例变换。这将导致对象彼此轻微重叠，并应删除任何被忽略的像素。你的旅费可能会改变。

# networking - 何时将多人游戏添加到游戏中

> ID：10344332
> 
> 赞同：1
> 
> 时间：2012-04-27T03:21:16.800
> 
> 标签：networking, network-programming, multiplayer

我和一些朋友正在构建一个 FPS 波浪生存射击游戏。实际上很像杀戮地板。所以游戏将主要是一个多人游戏。我们目前有一个用于套接字通信设置的基本框架和一个可以在其中运行的带有物理的工作世界。

所以我的问题是，当一个人在构建这样的多人游戏时，应该在游戏开发的同时构建网络系统，还是应该在添加多人系统之前创建一个具有实体/关卡/AI等系统的工作游戏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:26:46.070

您的网络代码几乎肯定会成为您游戏引擎的一部分。同时写两者；你为其中一个做出的选择会影响另一个的相关选择。

# wolfram-mathematica - 计算匹配谓词的元素数量的惯用方法是什么？

> ID：10344339
> 
> 赞同：4
> 
> 时间：2012-04-27T03:21:52.230
> 
> 标签：wolfram-mathematica

有没有更好的方法来计算谓词函数为真的元素的数量，除了这个：

```
PredCount[lst_, pred_] := Length@Select[lst, pred]; 
```

我问是因为构造`lst`with的子集似乎效率低下`Select[]`，并且`Count[]`只适用于模式。在我的用例中，该函数`PredCount`被多次调用，带有一个大的`lst`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T04:47:05.120

您通常可以通过将谓词转换为带有条件的模式来做到这一点。例如：

```
Count[list, x_/;x>5] 
```

将计算列表中大于 5 的元素的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T21:01:25.190

我会用[`PatternTest`](http://reference.wolfram.com/mathematica/ref/PatternTest.html)

```
PredCount = Count[#, _?#2] &;

PredCount[Range@30, PrimeQ] 
```

> ```
> (*out*) 10 
> ```

这种模式很简单，您可以`Count`直接使用。

# android - 如何分享到 facebook、twitter 等的链接？

> ID：10344345
> 
> 赞同：0
> 
> 时间：2012-04-27T03:22:32.663
> 
> 标签：android, mime-types

首先，我的应用程序的功能是阅读文章。当用户阅读文章并想将文章分享给 facebook 或其他人时，我无法从类型中找到链接/超链接。

这是我的分享功能

```
private void shareIt() {
    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    String shareBody = "Here is the share content body";
    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
    startActivity(Intent.createChooser(sharingIntent, "Share via"));
} 
```

我想要的是使用计算机阅读文章并获得分享按钮时的分享功能。在共享媒体中，它将以文章内容的形式出现，而不是纯文本。

那么，如何编辑代码以便我可以共享链接？

请在 Manifest.xml 上指导我，我不确定 interfilter 也需要添加哪个类别。

其次，我看到了共享列表，内置列表对我来说不太好，因为我想要那些 facebook、sina、twitter 而不是 google、gmail、蓝牙、line 或消息传递。

那么，如何通过java实现共享列表呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:13:59.120

它可能是这样的

```
sharebtn = new Custom_ButtonField(share, shareactive, shareactive) {
            protected boolean navigationClick(int status, int time) {
                if (Config_GlobalFunction.isConnected()) {
                    String NEXT_URL = "http://www.facebook.com/connect/login_success.html";
                    String APPLICATION_ID = "153555168010272";
                    String APPLICATION_SECRET = "354f91a79c8fe5a8de9d65b55ef9aa1b";
                    String[] PERMISSIONS = Facebook.Permissions.USER_DATA_PERMISSIONS;
                    ApplicationSettings as = new ApplicationSettings(
                            NEXT_URL, APPLICATION_ID, APPLICATION_SECRET,
                            PERMISSIONS);
                    Facebook fb = Facebook.getInstance(as);
                    try {
                        User user = fb.getCurrentUser();
                        user.publishStatus(Config_GlobalFunction.sharelink
                                + newsid);
                    } catch (FacebookException e) {
                    }
                } else
                    Config_GlobalFunction.Message(
                            Config_GlobalFunction.nosharenews, 1);
                return true;
            }
        };
        add(sharebtn); 
```

前提条件：必须导入 BB facebook sdk。

# regex - 如何理解复杂的正则表达式

> ID：10344347
> 
> 赞同：1
> 
> 时间：2012-04-27T03:22:45.963
> 
> 标签：regex, perl

曾经看过一个正则表达式的例子

```
^\s*(+-)?(\d+|\d*\.\d+|\d+\.\d*)(e?(+-)?......$ 
```

但我只是不知道如何理解/分析这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T03:28:19.940

一次分析一下；如果你看到一个`?`, `*`, or `+`then 修改了之前的“组”（括号内的组，或“原子”单位，如`\s`或文字如`e`）：

```
^            The start of the string
\s*          Zero or more whitespace characters.
(+-)?        An optional + or -
(
   \d+       One or more digits
 |           or
   \d*\.     Zero or more digits, followed by a .
   \d+       One or more digits
 |           or
   \d+\.     At least one digit, followed by a .
   \d*       Zero or more digits
)
(
 e?          An optional e
 (+-)?       An optional + or - 
```

在这里，正则表达式逐渐消失，我不确定s 是正则表达式`.....`中的文字系列`.`还是只是一个普通的省略号。但希望这是一个明确的解释。（顺便说一句，`$`意思是“字符串的结尾”）。

# java - 在项目中包含 JNA 代码 - 编译错误

> ID：10344352
> 
> 赞同：2
> 
> 时间：2012-04-27T03:23:40.793
> 
> 标签：java, windows, jna

我正在使用来自另一个 StackOverflow 帖子的示例代码 - [Java - 如何快速截取屏幕截图](https://stackoverflow.com/questions/2912007/java-how-to-take-a-screenshot-fast)，但我遇到了一些问题。

我从其[Github 存储库](https://github.com/twall/jna)下载了 JNA 文件，然后将文件复制到 JAR 文件中，并将其放入我的程序所在的同一文件夹中。但是当我尝试编译我的程序时，它给了我很多错误，如下所示：

```
C:\Users\windows\Desktop\testPrintScreen>javac JNAScreenShot.java
JNAScreenShot.java:12: error: package com.sun.jna.platform.win32 does not exist
import com.sun.jna.platform.win32.W32API;
                             ^
JNAScreenShot.java:129: error: package com.sun.jna.platform.win32 does not exist
interface GDI32 extends com.sun.jna.platform.win32.GDI32 {

                                              ^
JNAScreenShot.java:58: error: cannot find symbol
bufferedImageFromBitmap(GDI32.HDC        blitDC,
                             ^
symbol:   class HDC
location: interface GDI32
JNAScreenShot.java:59: error: cannot find symbol
                        GDI32.HBITMAP    outputBitmap,
                             ^
symbol:   class HBITMAP
location: interface GDI32
JNAScreenShot.java:60: error: cannot find symbol
                        GDI32.BITMAPINFO bi) {
                             ^
 symbol:   class BITMAPINFO
 location: interface GDI32
JNAScreenShot.java:151: error: package com.sun.jna.platform.win32 does not exist
interface User32 extends com.sun.jna.platform.win32.User32 { 
```

有谁知道发生了什么？是导致问题的导入部分吗？这些是我的进口：

```
import com.sun.jna.Native;
import com.sun.jna.platform.win32.W32API;
import com.sun.jna.win32.W32APIOptions; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:46:28.363

我目前没有 Windows 机器，但下面的变体应该可以正常工作。在命令窗口中切换到一个方便的目录，然后：

```
git clone https://github.com/twall/jna.git
cd jna
ant
cd dist
pwd 
```

记下最后一条路径，编译 JNA 程序时需要将其包含在类路径中。您可能还需要在 dist 文件夹中包含一些其他 JAR。

* * *

*** 编辑 *** 根据您的附加评论，您的代码似乎使用的是较旧的 JNA API。有关如何解决该问题的更多信息，请参阅此 SO 帖子 - [JNA W32API - 他们在哪里？](https://stackoverflow.com/questions/6155080/jnas-w32api-where-are-they).

# visual-studio-2010 - 为单个解决方案范围的配置构建具有 2 个配置的项目

> ID：10344353
> 
> 赞同：1
> 
> 时间：2012-04-27T03:23:54.783
> 
> 标签：visual-studio-2010, build

所以我的解决方案中有 1 个项目，我需要编写类似的代码

```
#if VERSION1
Do something
#endif
#if VERSION2
Do something else
#endif 
```

该项目有 2 个配置，版本 1 和版本 2。一个用 VERSION1 作为条件编译符号，一个用另一个。这些配置仅适用于本项目。在将整个解决方案构建为 Debug 或 release 时，我可以让 Visual Studio 为该项目构建 Version1 和 2 Config 吗？在解决方案属性下，我似乎只能构建一个

我只是在谈论不使用 msbuild 的本地构建

# django - 在 Vim 中编辑 Django 设置文件的最有效方法

> ID：10344355
> 
> 赞同：1
> 
> 时间：2012-04-27T03:24:39.707
> 
> 标签：django, sqlite, vim

在 Vim 中编辑默认 Django 设置文件以使用 SQLite 的最有效方法（即最少的击键次数）是什么？

裸设置文件如下所示：

```
# Django settings for mysite project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}
... 
```

...我希望它看起来像这样：

```
# Django settings for mysite project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'local.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}
... 
```

我知道这是一个微不足道的问题，但我正在努力提高 Vim 的效率，所以我很好奇其他人是否有更快的方法来完成这项重复性任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:36:36.643

我确信这不会赢得[Vim Golf](http://vimgolf.com/)，但这就是我的做法。以正常模式启动：

```
:%s/backends./backends.sqlite3/ <Enter>
/NAME <Enter>
2f'
i local.db 
```

即：搜索后端。通过整个缓冲区，用 backends.sqlite3 替换第一个实例。然后，搜索 NAME 并将光标移动到找到的第一个实例。然后，在当前行向前搜索第二次出现的 '（单引号）。进入插入模式。输入 local.db

**更新**

为了最大限度地提高效率并使用评论中的建议，这里有一个稍微缩短的版本，仍然使用相同的方法：

```
:%s/ends./&sqlite3/ <Enter>
/NAM <Enter>
2f'
i local.db 
```

我打算使用`/NA`，直到我注意到 MANAGER 出现在 NAME 之前。这种方法的 Vim Golf 得分：38。

# java - 在 Java 中使用 selenium webdriver 上传文件失败

> ID：10344358
> 
> 赞同：0
> 
> 时间：2012-04-27T03:25:03.080
> 
> 标签：java, selenium, webdriver

我正在尝试使用 selenium webd river 上传文件，但无法让这个尖晶石代码工作

```
driver.findElement(By.id("uploadForm:j_id135")).sendKeys("path_to_file");
driver.findElement(By.name("uploadForm:j_id139")).click(); 
```

我也尝试了这个建议： [File Upload using Selenium WebDriver and Java](https://stackoverflow.com/questions/5610256/file-upload-using-selenium-webdriver-and-java) too bad didn't work for me

有什么想法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:27:21.093

当您手动单击上传文件时（手动工作时），您将给出实际输入框（提供路径的位置）的“id”。在自动化场景中，我们需要使用以下命令提供该输入框的正确 ID：

> driver.findElement(By.id("upload")).sendKeys("/path/to/the/file");

下一步当然是点击上传按钮。

如果您使用的是 WebDriverBackedSelenium，您可以使用：

> selenium.type("定位器", "/path/to/the/file");
> 
> selenium.click("upload_button");

# php - 如何将电子邮件发送到多个电子邮件地址？

> ID：10344359
> 
> 赞同：-3
> 
> 时间：2012-04-27T03:25:07.563
> 
> 标签：php, email

我有这个工作完美的表格，除了它不会向多个人发送电子邮件。它只发送给一个人。我该如何解决？我希望能够向每个人发送一封单独​​的电子邮件，他们的电子邮件地址位于收件人字段中，无论同一电子邮件是否发送给其他用户。

更新：我做了一个 print $email; 如果我只选择一封电子邮件，它会打印它，然后如果我超过 1 则它不会打印任何东西。这意味着它不会检测到超过 1 封电子邮件。

```
 $sql = "SELECT email from
    friend_email_ids WHERE my_id='$id'";
    $result = mysql_query($sql);

    $query = mysql_query($sql) or die ("Error: ".mysql_error());

    if ($result == "")
    {
    echo "";
    }
     echo "";

   $rows = mysql_num_rows($result);
   $emails = array();

   if($rows == 0)
   {
   print("");

    }
   elseif($rows > 0)
   {
    while($row = mysql_fetch_array($query))
   {

   array_push($emails, $row['email']);

  print("");
  }

  }

$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$headers .= "From: $usermail\r\n";
$subject = "$full_name added";
$message = "<html><body>";
$message .= "Hello, <br><br>$full_name posted someth<br><br>";
$message .= "<a href=www.domain.com/signup.php?t=&sign=>Click here.</a><br><br>";
$message .= "</body></html>";
 foreach ($emails as $email) {
mail($email, "Subject: $subject", $message, $headers);
   }

   echo ""; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:35:42.543

在 PHP 中，你通常有一些看起来像的代码

```
 mail($to, $subject, $msg, $mailheaders); 
```

你可以像这样设置多个电子邮件收件人

```
 $to  = 'one@example.com' . ', '; // note the comma
    $to .= 'two@example.com'; 
```

逗号和 .= 将允许多个电子邮件收件人。

对于两个以上，您将使用

```
 $to  = 'one@example.com' . ', ';
    $to .= 'two@example.com' . ', ';
    $to .= 'three@example.com'; 
```

要自动执行此操作，您可以为数组中的最后一个条目设置一个带有扭曲的 foreach

```
 foreach($email as $to) {
    $lastone = next($email)===FALSE;
    $to .= $email . ', ';       
    if(!$lastone){
    $to .= $email;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:51:49.307

您需要使用 MySQL`GROUP_CONCAT`将电子邮件连接在一起，用逗号分隔。通过在“收件人”字段中填充逗号分隔值，它将自动发送给多个收件人：

```
SELECT GROUP_CONCAT(DISINCT `email` SEPARATOR ',') from
    friend_email_ids WHERE my_id='$id'"
    GROUP BY `email; 
```

组连接 MySQL：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

PHP Doc 在`mail()`函数中解释多个电子邮件收件人：

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:42:55.477

问题是您的查询：

```
$sql = "SELECT email FROM friend_email_ids WHERE my_id='$id'"; 
```

您只收到一个电子邮件地址，因为您只*选择*一个电子邮件地址，来自 id 存储在 中的用户`$id`。要解决此问题，您必须选择所需的所有 ID。首先，您需要确保您有一个名为的变量，该变量`$ids`存储了一个逗号分隔的 id 列表。然后将您的查询更改为：

```
$sql = "SELECT email FROM friend_email_ids WHERE my_id IN ($ids)"; 
```

如果您的 id 是整数，则无需像在原始查询中那样引用它们。如果它们是字符串，请确保在逗号分隔的列表中引用它们。如果你不知道如何`$ids`像我描述的那样制作你的变量，那么你需要阅读一些 php 教程。这是基本的东西。

否则，您的脚本应该可以工作。但是正如有人在评论中指出的那样，您有很多带有空白字符串的多余代码，您可以删除其中的大部分。

# c# - 在这种情况下我将如何使用委托？

> ID：10344360
> 
> 赞同：3
> 
> 时间：2012-04-27T03:25:10.057
> 
> 标签：c#, delegates

我的一位开发人员朋友告诉我，使用委托的循环要快得多，我想对它进行基准测试，但我在连接它的工作原理时遇到了麻烦。

考虑以下余额计算器。这基本上需要一个账户列表，如果存在则将初始值（起始余额）添加到总贷方值（如果存在）并减去每个账户的总借方值：

```
 private static IDictionary<string, decimal> CalculateBalances(
        IDictionary<string, decimal> initialValue, 
        IDictionary<string, decimal> credits, 
        IDictionary<string, decimal> debits)
    {
        var r = new Dictionary<string, decimal>();

        foreach (var key in initialValue.Select(k => k.Key)
            .Concat(credits.Select(k => k.Key))
            .Concat(debits.Select(k => k.Key))
            .Distinct())
        {
            r.Add(key,
                (initialValue.ContainsKey(key) ? initialValue[key] : 0M)
                + (credits.ContainsKey(key) ? credits[key] : 0M)
                - (debits.ContainsKey(key) ? debits[key] : 0M)
                );
        }

        return r;
    } 
```

这在中小型帐户列表上*相当有效，但使用委托会更快吗？*坦率地说，委托逻辑似乎与我的思维过程成直角运行，因为我正在摸索如何写这个。

任何人都可以提供一种使用委托重写它的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T03:31:40.630

我假设您的朋友指的是类上的`ForEach`方法之`List<T>`类的东西。您的问题的简短回答是**否定**的。

等效的语法是：

```
initialValue.Select(k => k.Key)
            .Concat(credits.Select(k => k.Key))
            .Concat(debits.Select(k => k.Key))
            .Distinct()
            .ToList()
            .ForEach(var => r.Add(key,
                (initialValue.ContainsKey(key) ? initialValue[key] : 0M)
                + (credits.ContainsKey(key) ? credits[key] : 0M)
                - (debits.ContainsKey(key) ? debits[key] : 0M)
                )); 
```

这*绝不*比您上面的方式更好。它既慢又难阅读。委托调用比普通方法调用慢。您上面的语法既更快又更容易阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T03:45:48.187

> 任何人都可以提供一种使用委托重写它的方法吗？

但是您*已经在*使用代表了！这就是 lambda 被转换为的内容。当使用如此多的委托调用只是为了生成序列的每个项目时，出于性能原因是否对循环体使用委托的问题有点奇怪。

无论如何，Adam Robinson 已经介绍了如何`List.ForEach`对列表的每个项目执行副作用以及相关的可读性和性能影响，所以我不会深入讨论。

但是，如果 LINQ 和委托调用的边际开销不是决定因素，我将如何编写您的方法：

```
return initialValue
       .Concat(credits)
       .Concat(debits.Select(kvp => new KeyValuePair<string, decimal>(kvp.Key, -kvp.Value)))
       .GroupBy(kvp => kvp.Key, kvp => kvp.Value)
       .ToDictionary(group => group.Key, group => group.Sum()); 
```

现在这更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:51:44.137

如果`foreach`您想使用`Dictionary.Add`. 您始终可以从现有字典中选择来创建一个新字典，但这会比较慢。

但是，就可读性而言，这不是更容易吗？

```
private static decimal GetOrZero(this IDictionary<string,decimal> dict, string key)
{
    decimal value = 0;
    dict.TryGetValue(key, out value);
    return value;
}

private static IDictionary<string, decimal> CalculateBalances(
    IDictionary<string, decimal> initialValue, 
    IDictionary<string, decimal> credits, 
    IDictionary<string, decimal> debits)
{   
    var r = new Dictionary<string, decimal>();
    var accounts = initialValue.Keys.Union(debits.Keys).Union(credits.Keys);

    foreach (var accounts in accounts)
    {
        r.Add(initialValue.GetOrZero(key) + credits.GetOrZero(key) - debits.GetOrZero(key));
    }

    return r;
} 
```

# asp.net - Web 用户控件属性行为

> ID：10344363
> 
> 赞同：1
> 
> 时间：2012-04-27T03:25:34.840
> 
> 标签：asp.net, visual-studio

我有一个 Web 用户控件，上面有几个服务器端 div。我为其中一个 div 的可见性创建了一个属性。

问题是当我在设计器上更改该属性时，整个属性窗口都会变为空白，直到我单击页面上的其他一些控件，然后再单击该控件。

当我更改自定义属性时，我在代码中是否遗漏了一些东西以防止属性窗口变为空白，因为如果我是整个控件的标准可见性属性，属性窗口就可以了。

此外，如果我将自定义可见性属性更改为 DivDisplay = false，设计师是否有办法反映它？

最后，有没有更好的方法来做到这一点？

![在此处输入图像描述](../Images/79e29f4026b27fb483abd79929d98078.png)

# android - 使用 Canvas (surfaceview) 或使用带有翻译动画的视图

> ID：10344374
> 
> 赞同：2
> 
> 时间：2012-04-27T03:28:47.340
> 
> 标签：android, android-layout

我只是有一个关于您通常如何处理此问题的快速问题。我不确定您是否看过 Paper Toss 游戏或类似的游戏，您将手指放在现有图像上，将其拖动一点（比如说通过拉动图像视图）然后放开，这会使该图像在屏幕上移动。

要做这样的事情，处理此类图形的最佳方法是什么（主要关注图形运动和触摸事件）： - 有一个 imageview 和 OnTouchListener 将获取 x/y 并对每个 X/Y 执行 translateAnimation 和然后在解除触摸时在屏幕上对图像进行 translateAnimation

- 或有表面视图并在 Canvas 上绘制图像的位图，并让 OnDraw 方法获取触摸事件的 X/Y 坐标并相应地绘制位图

我总是很困惑该选择哪一个，为什么？（我的目标是 Android 2.3，所以拖放超出了这个范围）

PS：我假设 Canvas 和 surfaceview 总是在一起，如果我错了，请纠正我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:08:45.867

**PS：我假设 Canvas 和 surfaceview 总是在一起，如果我错了，请纠正我**

是的，你是对的，他们都走到了一起。

首先在动画（平移、旋转、缩放）中，我们只是在特定时间更改 ImageView 的位置、视图（同时显示动画效果）。然后它会回到原来的位置。

但是在画布中，我们根据它的坐标永久更改 ImageView（我们在这里绘制位图而不是图像视图）。假设您想在手指触摸的地方更改图像，然后使用您从中获得的新坐标简单地绘制它`OnTouchEvent()`

最后我会说，根据我们的要求，没有什么是最好的。表面和画布主要用于游戏环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:54:36.077

任何 gfx 密集型操作，即任何使用 sprite 的操作，都应该在 a `SurfaceView`or上完成`GLSurfaceView`以达到最佳性能。对于动画或非动画的非移动图像/位图，标准`View`/`ViewGroup`实现很好。

SDK 示例`LunarLander`是一个很好的起点。

# vb.net - 从列表框中选择值并将其保存到 SQL DB

> ID：10344382
> 
> 赞同：3
> 
> 时间：2012-04-27T03:30:49.680
> 
> 标签：vb.net, asp.net-mvc-3, sql-server-2008

场景：我们的 MVC 视图中有一个列表框，用户可以突出显示多个值。我希望能够将这些选定的值（如果可能的话？）作为逗号分隔的单元格值保存在我们的 '08 SQL 数据库中。

下图显示了我试图解释的内容。**请注意 LISTBOX 中的选择**提前致谢！

![列表框选择的视图](../Images/804d6b959b65d8b998c43995f0e1c81e.png) 这是我们保存从 Positionnumber DDL（带有多个突出显示的列表框）传入的值的地方。

```
> <HttpPost()>
>         Function Edit(wsmonitor As WSMonitor, ByVal vbpositionnumberDDL As Integer, ByVal PassedCounty As Integer, ByVal
> MonitorTypeDDL As String) As ActionResult
>             wsmonitor.PositionNumber = vbpositionnumberDDL
>             wsmonitor.MonitorType = MonitorTypeDDL
>             wsmonitor.county = PassedCounty
> 
>             If ModelState.IsValid Then
>                 db.Entry(wsmonitor).State = EntityState.Modified
>                 db.SaveChanges()
>                 Return RedirectToAction("Index")
>             End If
> 
>             Return View(wsmonitor)
>         End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:46:59.363

您需要确保列表框的名称字段与 Edit 方法中的参数匹配。然后，将参数 vbpositionnumberDDL 的 Type 更改为字符串数组。

然后，您将获得一个数组，其中包含列表框中的每个选定项。然后很容易将其转换为您的逗号字符串。

我的 VB.NET 不是很好，但我认为这会奏效

```
Function Edit(wsmonitor As WSMonitor, ByVal vbpositionnumberDDL As **String()**, ByVal PassedCounty As Integer, ByVal
> MonitorTypeDDL As String) As ActionResult 
```

你可以加入你的字符串使用

```
Dim foo = [String].Join(",", vbpositionnumberDDL ) 
```

# asp.net-mvc - 属性路由和本地化问题

> ID：10344384
> 
> 赞同：12
> 
> 时间：2012-04-27T03:31:02.560
> 
> 标签：asp.net-mvc, localization, asp.net-mvc-routing, attributerouting

我在 Nuget 上使用最新版本的 AttributeRouting 包来为我的 ASP.Net MVC 项目设置路由。我正在创建一个有两种语言的网站，英语（主要）和西班牙语（次要）。两种语言的网址不同。例如，英语的 about us 是这样的：www.root.com/en/about-us，而西班牙语版本可能是这样的：www.root.com/es/sobre-nosotros。

我有一个路由前缀设置如下： [RoutePrefix("en", TranslationKey = "Home")]

然后，我创建了一个程序，将 XML 文件中的值读取到 FluentTranslationProvider 中。注册我的路线的代码如下所示：

```
var translations = new FluentTranslationProvider();
        translations
            .AddTranslations()
            .FromFile();

routes.MapAttributeRoutes(
            config =>
                {
                    config.AddRoutesFromControllersOfType<BaseController>();
                    config.AddTranslationProvider(translations);
                    config.CurrentUICultureResolver =
                        (httpContext, routeData) =>
                        (string) routeData.DataTokens["cultureName"] ??
                        Thread.CurrentThread.CurrentUICulture.Name;
                }); 
```

它似乎正在工作，因为我可以访问我的 Routes.axd 页面并查看以下内容：http: [//imm.io/nm7Z](http://imm.io/nm7Z)

稍后在我的页面中，我的代码显示我的 CurrentCulture 设置为 es-AR，但是当我调用 URLHelper 类构建 url 时，它只构建默认的英文版本，不会给我西班牙版本。谁能告诉我为什么会这样？我不能为我的数字的生活解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T16:44:02.770

您是否尝试过更新 RouteValueDictionary 并将其作为参数传递给您的 url 助手？我为切换 ssl 做了类似的事情。

这里有一些示例代码需要考虑，作为辅助函数：

```
@functions {

  public static string LanguageUrl(WebViewPage page, string actionName, string controllerName, string desiredCulture)
  {
    // translate action name here, if needed.
    return page.Url.Action(actionName, controllerName, new { cultureName = desireCulture } );
  }
} 
```

# ipad - 如何在 ipad 应用程序中实现自定义日历，它看起来像 Outlook 日历并且当天有事件（可以是同一持续时间的多个事件）

> ID：10344385
> 
> 赞同：0
> 
> 时间：2012-04-27T03:31:08.753
> 
> 标签：ipad, calendar

我正在开发一个 iPad 应用程序，其中当天的日历事件数据来自网络服务，我必须在看起来像 Outlook 日历的日历 UI 中显示数据。当天的特定时间可以有多个事件。因此，事件端应该有多个列。请帮助我如何获得它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:03:01.867

这个示例可以帮助您创建 UI 和事件安排。

[https://github.com/muhku/calendar-ui](https://github.com/muhku/calendar-ui)

请根据您的要求更新图形和配色方案。

享受编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:56:09.620

我认为您可以通过在一个 nib 文件中包含多个 UITableviews 来使用和尝试。可能您可以根据您的要求在每天/时间使用两个表格视图

这是我找到的链接- [并排有两个 UITableViewControllers 的 iphone 应用程序](https://stackoverflow.com/questions/9888310/iphone-app-with-two-uitableviewcontrollers-side-by-side)

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/50502-creating-view-two-table-views.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/50502-creating-view-two-table-views.html)

希望这可以帮助...

# html - 如何在 HTML 页面上显示 youtube 视频？

> ID：10344387
> 
> 赞同：1
> 
> 时间：2012-04-27T03:31:41.033
> 
> 标签：html, youtube, embed

首先嵌入 src youtube 视频链接是

```
 <html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
<title></title>
</head>
 <body>
<div>
    <object width="218" height="137"><param name="movie" value="http://www.youtube.com/v/jpiU5Y8luOQ&hl=en_US&fs=1&"></param>
        <param name="allowFullScreen" value="true"></param>
        <param name="allowscriptaccess" value="always"></param>
        <embed src="http://www.youtube.com/v/jpiU5Y8luOQ&hl=en_US&fs=1&" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="218" height="137">
    </embed>
    </object>
</div>
</body>
</html> 
```

第二个嵌入的 src 视频链接是

```
 <html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
<title></title>
</head>
<body>
<div>
    <object width="218" height="137"><param name="movie" value="http://www.youtube.com/watch?v=LwkeMx_OJxg&feature=related">
        <param name="allowFullScreen" value="true"></param>
        <param name="allowscriptaccess" value="always"></param>
        <embed src="http://www.youtube.com/watch?v=LwkeMx_OJxg&feature=related" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="218" height="137">
        </embed>
    </object>
</div>
</body>
</html> 
```

第一个 html 代码在浏览器上显示视频文件，但第二个没有显示。由于视频文件类型不同，第二个不能显示吗？请指导我怎么做。

```
 Thanks in advance 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T03:38:21.550

在第二次嵌入中，您将对象直接链接到观看页面，这不是有效的视频。您为它提供的是文本/html 页面，而不是视频。

您可以将此 IFrame 用于第二个，并根据需要调整高度/宽度：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/LwkeMx_OJxg" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T03:38:06.397

Youtube 本身为您提供了一个示例代码。你不能看`embed`视频，你需要使用 iframe。

[读这个](http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:41:55.497

当您右键单击 Youtube 中的视频页面时，它会为您提供以下代码：

```
<object style="height: 137px; width: 218px">
<param name="movie" value="http://www.youtube.com/v/LwkeMx_OJxg?version=3&feature=player_detailpage">
<param name="allowFullScreen" value="true">
<param name="allowScriptAccess" value="always">
    <embed src="http://www.youtube.com/v/LwkeMx_OJxg?version=3&feature=player_detailpage" 
     type="application/x-shockwave-flash"
     allowfullscreen="true" allowScriptAccess="always" width="218" height="137">
</object> 
```

哪个有效（我根据您的示例更改了宽度/高度以检查它是否有效，并且确实有效

# javascript - Javascript - 命名空间与闭包之间的区别？

> ID：10344388
> 
> 赞同：8
> 
> 时间：2012-04-27T03:31:45.447
> 
> 标签：javascript, namespaces, closures, terminology, definition

在 Javascript 中，命名空间和闭包有什么区别？他们看起来和我很相似。

*编辑*

具体来说，[这篇文章](https://sparecycles.wordpress.com/2008/06/29/advanced-javascript/)讨论了命名空间和闭包，并且有类似的句子

> 现在，我们仍然会遇到需要声明不适合命名空间对象结构的变量的情况。但是我们不希望这些变量具有全局范围。这就是自调用函数的用武之地。

它继续给出看起来很像闭包的东西，作为“对象命名空间”。在我看来，命名空间是一个[闭包](http://www.jibbering.com/faq/notes/closures/)……但也许不是……？帮助？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-27T03:38:41.353

命名空间本质上是一个`Object`没有有趣的属性，您可以将内容塞入其中，因此您的范围内不会有一堆名称相似和/或冲突的变量。所以，例如，像

```
MyNS = {}
MyNS.x = 2
MyNS.func = function() { return 7; } 
```

闭包是指函数“保留”未在其中定义的变量的值，即使这些变量已经超出范围。采取以下措施：

```
function makeCounter() { 
   var x = 0;
   return function() { return x++; }
} 
```

如果我让`c = makeCounter()`然后再反复打电话`c()`，我会得到`0, 1, 2, 3, ...`。这是因为`makeCounter`定义 'closes' over的内部匿名函数的范围`x`，所以即使`x`超出范围，它也有对它的引用。

值得注意的是，如果我这样做`d = makeCounter()`，`d()`将从 0 开始计数。这是因为`c`并`d`获得不同的`x`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T03:38:12.930

命名空间通常是一种将所有全局变量作为属性放在一个主全局变量下的方法，因此只添加一个新的真正顶级全局变量。它可以防止对全局命名空间的污染，并减少与其他全局变量发生冲突的机会。

以及命名空间的示例：

```
var YUI = {};
YUI.one = function(sel) {...};
YUI.two = function(sel) {...};
YUI.three = function(sel) {...}; 
```

顶级全局命名空间中有一个新项目`YUI`，但是通过 YUI 命名空间对象有多个全局可访问的项目。

闭包是一个功能块，由于对函数内部部分的持续引用，它持续超过函数执行的正常完成。

```
function doSometing() {
    var x = 10;
    setTimer(function() {
        // this gets called after doSomething() has finished executing
        // but because of the function closure, the variables 
        // inside of the parent scope like x are still accessible
        x += 10;
    }, 1000);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T03:41:29.180

来自[http://jibbering.com/faq/notes/closures/](http://jibbering.com/faq/notes/closures/)：

> 闭包是通过从该函数调用返回在函数调用的执行上下文中创建的函数对象并将对该内部函数的引用分配给另一个对象的属性而形成的。或者通过直接将对此类函数对象的引用分配给例如全局变量、全局可访问对象的属性或通过引用作为参数传递给外部函数调用的对象。

命名空间只是一种约定，创建的对象是为了避免将全局范围与变量混淆。

# scala - 在 Scala 的条件中添加到集合

> ID：10344390
> 
> 赞同：0
> 
> 时间：2012-04-27T03:32:30.247
> 
> 标签：scala, set, conditional

我已经编写了一个访问者模式，并且正在匹配一个被覆盖的子类。我想将变量添加到对象的设置值中，然后返回修改后的对象。我怎样才能在语法上做到这一点？

```
trait PropositionOrderer extends Visitor[Proposition]{
  var OurSet = SortedSet[Name] _
    override def variable = {
      _ match {
        case name => Variable(name)//SortedSet+(name).andThen(Variable(_))
      }
    }
} 
```

是否有语法可以像添加到`SortedSet`然后等待的 void 函数一样链接？我不能使用`andThen`，因为我想做两件事，我想将它添加到`Set`然后我想返回变量。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:45:08.050

我想你的意思是这样的：

```
var ourSet = Set[String]()
def func(s: String) = 
  s match {
    case name =>        // a `case` can be followed by multiple statements 
      ourSet += name    // first we add `name` to the set
      name              // the last expression gets passed up to the assignment of x
  }
val x = func("test")
// ourSet is now Set("test")
// x is now "test" 
```

`match`表达式将计算为匹配的最后一个表达式`case`。在这里，`case`匹配的是`case name`。`case name`块下的最后一个表达式是`name`，所以这就是整个匹配的结果。所以函数`func`返回`name`，也就是`"test"`我们调用`func("test"). Thus,`x `is assigned to be`"test"` 的时候。

此外，您可以在`case`您想要的块内执行任何其他操作。在这里，我们正在修改`ourSet`.

# javascript - 动态加载外部 javascript 并将其绑定到特定的 DOM 元素或命名空间

> ID：10344398
> 
> 赞同：1
> 
> 时间：2012-04-27T03:34:44.527
> 
> 标签：javascript, jquery, dom, dynamic

我希望能够动态加载外部 javascript 文件，然后将脚本中的方法绑定到 DOM 中的特定元素。那可能吗？如何？有什么限制？

我想一个解决方案看起来像这样，但我愿意接受任何可行的方法：

```
<html><body>
  <div class="A">aaaaa</div>
  <div class="B">bbbbb</div>
  <div class="A">aaa</div>
</body></html>

<script type="text/javascript">
  //This is the internal script, part of the original page
  $.get("url/outside_script.js",
    function(script_obj){
      $(".A").bind('niftyMethod', script_obj.niftyMethod)
    }
  );
</script> 
```

这是外部脚本：outside_script.js

```
<script type="text/javascript">
  var script_obj = {
    niftyMethod : function(){
      //Do cool stuff in the context of a DOM object.
      $(this).fadeOut(500,function(){$(this).fadeIn(500)});
  }
</script> 
```

我在这方面做了很多谷歌搜索，但没有找到太多。也许我使用了错误的搜索词...？

注意：如果需要的话，我很乐意使用 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:41:09.973

一些更正：

脚本：

```
<script type="text/javascript">

    //add script to page
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = "url/outside_script.js";
    $('body').append(script);

    //on document ready, bind your function
    $(function(){
        $(".A").bind('click', script_obj.niftyMethod)
    });

</script> 
```

外部文件：

```
var script_obj = script_obj || {
    niftyMethod : function(){
      //Do cool stuff in the context of a DOM object.
      $(this).fadeOut(500,function(){$(this).fadeIn(500)});
  } 
```

# iphone - 将 NSString 转换为具有多个条件的 NSArray

> ID：10344400
> 
> 赞同：1
> 
> 时间：2012-04-27T03:35:07.380
> 
> 标签：iphone, ios, xcode, nsstring, nsarray

我有一个字符串，其中包含一些带有句点和逗号的文本。我想根据逗号和句点将其转换为 NSArray。我使用这种方法根据一种条件进行分离，但是如何使用两种情况进行分离？

```
componentsSeparatedByString: 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T03:39:17.187

您可以使用`componentsSeparatedByCharactersInSet:`.

例如：

```
NSString *str = @"1,2.3";

NSArray *arr = [str componentsSeparatedByCharactersInSet:
                [NSCharacterSet characterSetWithCharactersInString:@",."]]; 
```

请参阅[NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T03:38:16.777

您需要在`NSCharacterSet`其中创建一个逗号和一个点，并使用此方法：

```
- (NSArray *)componentsSeparatedByCharactersInSet:(NSCharacterSet *)separator 
```

这是一个例子：

```
NSArray *arr = [str componentsSeparatedByCharactersInSet:
      [NSCharacterSet characterSetWithCharactersInString:@",."]]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T03:42:18.470

```
 NSString *tempTextOut = [NSString stringWithFormat:@"jdnfj,adsfsajfhkj,hasdfjhdsjkfh,hdsufhajkdsfhk"];
NSMutableArray *array = [[tempTextOut componentsSeparatedByString: @","] mutableCopy];
NSLog(@"%@",array); 
```

**>>输出1**

```
jdnfj,
adsfsajfhkj,
hasdfjhdsjkfh,
hdsufhajkdsfhk 
```

和

```
NSString *tempTextOut = [NSString      stringWithFormat:@"jdnfj,adsfsajfhkj,,,hasdfjhdsjkfh,,,,hdsufhajkdsfhk"];
NSMutableArray *array = [[tempTextOut componentsSeparatedByString: @",,,"] mutableCopy];
NSLog(@"%@",array); 
```

**>>输出2**

```
 "jdnfj,adsfsajfhkj",
hasdfjhdsjkfh,
",hdsufhajkdsfhk" 
```

希望对你有帮助..

# ruby-on-rails - 不同 rvm gemsets 中的 rake 版本

> ID：10344408
> 
> 赞同：6
> 
> 时间：2012-04-27T03:36:54.883
> 
> 标签：ruby-on-rails, rake, osx-lion, rvm

我创建了一个`rvm 1.8.7`用于运行较旧的 Rails 项目。

当我运行时`rake`，有一个警告：

> 警告：'require 'rake/rdoctask'' 已弃用。请改用 'require 'rdoc/task' (in RDoc 2.4.2+)'。

这是由于`rake`安装了较新版本的：

```
rake (0.9.2.2, 0.8.7) 
```

通过`rvm`在`@global`宝石集中

```
$ gem list -d rake

*** LOCAL GEMS ***

rake (0.9.2.2, 0.8.7)
Author: Jim Weirich
Rubyforge: http://rubyforge.org/projects/rake
Homepage: http://rake.rubyforge.org
Installed at (0.9.2.2): /Users/horace/.rvm/gems/ruby-1.8.7-p358@global
             (0.8.7): /Users/horace/.rvm/gems/ruby-1.8.7-p358

Ruby based make-like utility. 
```

如果我尝试`rake 0.9.2.2`在`@global`gemset 中删除，则会出现警告：

```
You have requested to uninstall the gem:
rake-0.9.2.2
rvm-1.11.3.3 depends on [rake (>= 0)]
If you remove this gems, one or more dependencies will not be met.
Continue with Uninstall? [Yn] 
```

那么，如何`rake 0.8.7`在我的`rvm 1.8.7`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T03:47:10.133

二进制文件的 gem 包装器允许您指定要运行的特定程序的版本。所以你可以去

```
rake _0.8.7_ [stuff] 
```

或者，如果您愿意，可以修改包装器以默认使用该版本（但要小心需要较新 rake 的 gem 和 rvm）。换行

```
version = ">= 0" 
```

到

```
version = "= 0.8.7" 
```

# android - udp6 在编写 android udp 服务器时关闭

> ID：10344411
> 
> 赞同：1
> 
> 时间：2012-04-27T03:37:25.847
> 
> 标签：android, udp, virtualbox, ipv6

当程序启动时，我正在 Android 4.0 (api 15) 中编写 UDP 服务器程序，我无法连接到 android 中的UDP**服务器**

**环境**：

```
virtualbox, android x84 4.0, ping to/from virtualbox-android are ok, 
```

**UDP服务器代码**：

```
DatagramSocket ds = new DatagramSocket(9101);
<uses-permission android:name="android.permission.INTERNET" /> 
```

**android中的netstat显示**：

```
udp6    0    0    :::9101    :::*    CLOSE 
```

如何制作普通的 IPv4 UDP 监听套接字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T09:21:35.260

您无法在主线程中接收或执行网络流量。

您必须创建一个单独的可运行线程来执行此操作：

```
new Thread(new Runnable() {
    public void run() {
    try {
           if (clientsocket == null) {
        clientsocket = new DatagramSocket(null);
            clientsocket.bind(new InetSocketAddress("0.0.0.0", 1337));
        clientsocket.setBroadcast(true);
       }
           byte[] receivedata = new byte[1024];
       while (true) {
        DatagramPacket recv_packet = new DatagramPacket(
        receivedata, receivedata.length);
        clientsocket.receive(recv_packet);
            alertMessage = new String(recv_packet.getData());
        InetAddress ipaddress = recv_packet.getAddress();
        int port = recv_packet.getPort();
        String msg = "RECEIVED UDP MSG FROM " + ipaddress.toString() + ":" + Integer.toString(port) + " :" + alertMessage;  Log.d("UDP", msg);
        myHandler.post(alertMsg);
        }
    } catch (Exception e) {
        Log.e("UDP", "S: Error", e);
    }
      }
}).start(); 
```

然后在一个单独的类代码中，可能会干扰主 UI 的可运行任务。

```
final Runnable alertMsg = new Runnable() {
    public void run() {
        Toast.makeText(getApplicationContext(), alertMessage, Toast.LENGTH_LONG).show();
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:18:04.143

尝试

```
DatagramSocket ds = new DatagramSocket(9101, InetAddress.getByName("192.168.1.1")); 
```

看看是否可行。您也可以先创建套接字，然后再绑定它，例如：

```
DatagramSocket ds = new DatagramSocket(null);
ds.bind(new InetSocketAddress("192.168.1.1", 9101)); 
```

# php - simple_xml - 将变量分配给标签 - 只返回第一个

> ID：10344418
> 
> 赞同：0
> 
> 时间：2012-04-27T03:38:33.370
> 
> 标签：php, mysql, xml, simplexml, opencart

我正在尝试创建一个 XML 导入器来将产品从 POS 系统加载到在线商店。

我想通过从 POS 系统获取 XML 导出、处理它并将值直接放入数据库的多个表中来解决这个问题。

代码的开头看起来像这样，但是我已经遇到了绊脚石。

```
<?php
    $xml = simplexml_load_file('product.xml');

$ProductName            = $xml->Product->Name;
$ProductDescription     = $xml->Product->Description;
$IsNew = str_replace("false", "0", $xml->Product->IsNew) // Sets False to 0 instead of false

echo $ProductName . "<br />";
echo $ProductDescription . "<br />";
echo $IsNew;
?> 
```

到目前为止，我只是试图从 XML 标记中获取数据，将它们放入变量中，然后回显它们，以便我看到我得到了正确的结果。

这仅返回 XML 文件的第一个产品的详细信息（来自一千多个）。我期待它为每个产品获得名称+描述+IsNew。我假设它需要在一个 while 语句中，但我不知道如何使用 simple_xml 应用它

XML 结构如下所示。

```
<PRODUCTS>
      <PRODUCT>
              <UPDATETYPE>
              <STYLECODE>
              <NAME>
              <DESCRIPTION>
              ...etc...
              <ITEMS>
                    <ITEM>
                         <CODE>
                         <BARCODE>
                         <SIZE>
                         <PRICE>
                         ...etc...
                    </ITEM>
                    <ITEM>
                    ...etc...
                    </ITEM>
              </ITEMS>
     </PRODUCT>
     <PRODUCT>
     ...etc...
     </PRODUCT>
</PRODUCTS> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:43:50.387

您需要`Product`作为数组遍历：

```
foreach($xml->Product as $_product){
  echo $_product->Name . "<br/>";
  echo $_product->Description . "<br/>";
  echo $_product->IsNew ? "true" : "false";
} 
```

# patch - IDA Pro 命令行补丁程序

> ID：10344419
> 
> 赞同：0
> 
> 时间：2012-04-27T03:38:34.170
> 
> 标签：patch, ida

我刚刚开始使用 IDA Pro（试用版）。我正在尝试使用 IDA Pro 反编译二进制 ARM 文件；是否可以向二进制文件添加全新的函数，是否可以更改现有函数的名称？

我正在考虑将新添加的功能作为新的入口点并将旧入口点重命名为别的东西。我也想使用 CLI 而不是 GUI。

谢谢 SrcKode

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:56:08.970

IDA 是一个反汇编器，它不是一个可执行的编辑器。在反汇编中重命名函数不会影响输入文件。您将不得不使用其他一些方法来修改您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-19T17:06:51.457

Ida 可能不是最好的方法，但你可以试试。

1.  重命名函数 - ida 从二进制的符号/导入/导出表或调试符号中获取函数名称。要重命名函数，您必须解析二进制格式（可能使用 python`cle`或`angr`），然后更改它。
2.  添加一个函数 - 您可能需要先编译您的函数，将其提取为编译后的二进制文件（使用 ida 或 objdump），然后将其放在二进制文件中的某个位置。

3.  `entry_point`要替换入口点 - 没有这样的函数称为“入口”，这只是 ida在 PE/ELF 格式中赋予 addreaa 的名称。要替换入口点，您只需更改字段的地址（ PE`entry_point`位于 ..中 ，ELF 位于 .. 中。`optional header``Elf header`

4.  在windows上，你可以使用idat.exe / idat64.exe（位于ida安装目录），但不要这样做。我从未见过有人使用 ida cli。而且我很确定优秀的黑客只使用 GUI，它要好得多。

# php - 使用 Jquery FancyBox 包含 DOM

> ID：10344421
> 
> 赞同：0
> 
> 时间：2012-04-27T03:38:50.700
> 
> 标签：php, jquery, fancybox

我正在尝试使用 Fancy Box 2 插件 (fancyapps.com)。

一切都很好，只是我无法弄清楚如何正确包含 DOM 元素。

我在通过 ajaxform 和验证返回信息的表单提交之后调用它。文档说对 dom 使用以下内容。

```
//DOM element:

$.fancybox( $("#inline"), {
    title : 'Custom Title'
}); 
```

现在，如果我在 div 的页面上创建一个 id，它不会拉它。div也显示。

我尝试使用其他方法（自定义对象）

```
$.fancybox({
    href: 'example.jpg',
    title : 'Custom Title'
}); 
```

它似乎不适用于 php 文件。我正在尝试使用 php 文件中的信息填充灯箱，但加载内容时出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:57:46.913

你可能应该`ajax()`在这里使用。

当我查看 FancyBox 插件时，它确实支持 ajax。

```
$("#various3").fancybox({
    ajax: {
        type: "POST",
        data: 'mydata=test'
    }
});​ 
```

**HTML**

`<li><a id="various3" href="/data/login.php">Ajax - passing custom data</a></li>`

所有这些都基于其演示的源代码。[演示页面](http://fancybox.net/home)和[http://fancybox.net/js/](http://fancybox.net/js/web.js?m=20100203)。

**更新**：

我使用[fancyBox version 2](http://fancyapps.com/fancybox/)进行了快速测试，与您的问题有关。

我实现了拉ajax内容：

```
$(document).ready(function() {
    $('.fancybox').fancybox({
        title: 'Custom Title'
    });
});​ 
```

**HTML**

```
<a class="fancybox fancybox.ajax" href="ajax.txt">Show content</a>
<div id="content">
</div> 
```

我注意到这里的重要部分是将你的类命名为`class="fancybox fancybox.ajax"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:57:54.260

看来您缺少图片ID的选择器。

即：$("#inline")

```
$.fancybox( $("#inline"), {
  href: 'example.jpg',
  title : 'Custom Title'
}); 
```

或者

```
$("#inline").fancybox( {
  href: 'example.jpg',
  title : 'Custom Title'
}); 
```

你也可以使用一个类而不是一个 id 来匹配。

```
$(".inline").fancybox(
  href: 'example.jpg',
  title : 'Custom Title'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T05:12:47.923

如果您正在（通过 php）填充 a `div`，`id="inline"`那么这个脚本应该可以解决问题

```
$.fancybox({
 href  : "#inline",
 title : 'Custom Title'
}); 
```

我假设您将在填充`div`（可能在另一个脚本中）之后将此脚本作为回调调用，但您没有提供有关如何触发fancybox 的详细信息。

# linux - 在字符串 linux 中查找模式

> ID：10344424
> 
> 赞同：0
> 
> 时间：2012-04-27T03:40:00.770
> 
> 标签：linux, grep

我有一个包含不同文本行的文件，我想检查它们是否是相同模式的重复项。

在文件中：

```
Blah
Blah
Depends: ssloader, firmware (>= 3.0), firmware (<= 6.0), apta
blah 
```

我的目标是将 ">= 3.0" & "<= 6.0" 放入文件中。但请记住，有时只有 1 个“固件”依赖项。

到目前为止，我只获取了第一个固件信息：

```
if grep -Fq "firmware (" inputfile #checks if pattern exists
then
 compat=$(look 'Depends:' inputfile) #grab line where pattern is
 compat=${##*firmware (} #remove pattern and other stuff infront
 compat=${compat%%)*} #remove other stuff behind ")"
 echo $compat >> outputfile
fi 
```

我想知道如何检查同一行中是否有超过 1 个模式。或者如果有超过 1 行具有相同的模式，如何识别该行可以获得固件值。谢谢

编辑：

我最初的意图是检测是否有多个相同的模式。我对想法持开放态度。:)

像这样的东西：

```
if (more than one of same pattern)
 get both values #I am open to ideas to get this done <---
else
 get value of this pattern
fi 
```

编辑2：

我通过这样做来完成这项工作；

```
if grep -Fq "firmware (" ./control
then
    compat=$(look 'Depends:' control)
    compat=${compat#*firmware (}
    compat=${compat%%)*}
    echo -n $compat > ./compatibility.txt
    if [ $(grep -o "firmware (" ./control | wc -l) -eq 2 ]; then

    compat=$(look 'Depends:' control)
    compat=${compat##*firmware (}
    compat=${compat%%)*}
    echo " $compat" >> ./compatibility.txt
    fi
fi 
```

我知道这绝对是非常外行的，只有当模式在“取决于：”标签中时它才有效。

有什么想法/意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:03:56.757

如果可以使用`sed`：

```
sed -n '/firmware (/ { s/[^(]*(\(\([<>]=\|=\|[<>]\)\s\+[0-9]\+\(\.[0-9]\+\)*\))[^(]*/\1 /g; p }' file 
```

样本输入：

```
Blah
Blah
Depends: ssloader, firmware (>= 3.0), firmware (<= 6.0), firmware (= 5.0), apta
Depends: ssloader, firmware (>= 3.0), firmware (<= 6.0), apta
Depends: ssloader, firmware (<= 6.0), apta
blah 
```

样本输出：

```
>= 3.0 <= 6.0 = 5.0 
>= 3.0 <= 6.0 
<= 6.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:11:29.207

另一个`sed`版本，根据您的操作可能会更好：

```
sed -n 's/.* firmware (\([^)]*\)),.* firmware (\([^)]*\)),.*$/\1 \2/p' 
```

（顺便说一下，将其推广到多个包相对容易。）

# c# - MonoTouch 编译时出错：System.Boolean System.Type::op_Equality(System.Type,System.Type)

> ID：10344426
> 
> 赞同：1
> 
> 时间：2012-04-27T03:40:18.653
> 
> 标签：c#, ios, compilation, mono, xamarin.ios

我有一个 MonoTouch 应用程序，当我为设备编译它时，我收到以下错误：

```
Error MT2002: Can not resolve reference: System.Boolean System.Type::op_Equality(System.Type,System.Type) (MT2002) 
```

它在模拟器中运行良好，但偶尔我会得到一个`MissingMethodException`相同类型的。

我没有第 3 方库。所有的代码都是我自己的。有任何想法吗？

**编辑**这是我的 3 个项目及其所有参考资料。

**项目 1：Mobile.Libraries**

*   单点触控
*   系统
*   系统核心
*   系统文件

**项目 2：Mobile.Core**

*   移动图书馆
*   系统
*   系统核心
*   系统文件

**项目三：Mobile.IOS**

*   单点触控
*   移动核心
*   系统
*   系统核心
*   系统文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:46:39.600

就像@Jonathan.Peppers 所说，当您使用针对完整 .NET4 配置文件构建的已**编译**.dll 时，就会发生这种情况。

MonoTouch 基类库 (BCM) 提供了 Silverlight 配置文件 (2.1) 的超集，并添加了一些 4.0。因此，从另一个框架添加预编译的二进制文件可能需要一些 MonoTouch BCL 中**不**存在的类型/方法。

解决方案是针对 MonoTouch 随附的 BCL 程序集重建所有 .dll。这将确保编译器将只使用可用的符号。

**为什么它可以在 iOS 模拟器上运行？**

那是因为使用了 JIT。由于它是及时编译的，因此您*可能*永远无法找到丢失的符号，因此它*可以*工作，直到您遇到丢失的代码（并获得运行时错误）。

另一方面，当您使用设备（或链接器）时，所有符号都会被加载（并为 AOT 编译）。任何缺失的东西都会*提前被发现，*所以你会得到一个像上面那样的构建时错误。

# ios - 从http直播m3u8文件存储mp3？

> ID：10344429
> 
> 赞同：0
> 
> 时间：2012-04-27T03:40:33.610
> 
> 标签：ios, avplayer, http-live-streaming, avurlasset

我开始使用 HLS 协议开发一个 ios 播放器。

基本上我使用 AVURLAsset 的 loadValuesAsynchronouslyForKeys 方法来加载文件，然后创建一个 AVPlayerItem 给我的 AVPlayer。它工作正常。

我想知道如何通过将资产存储在文档中来提高搜索使用效率。

以前有人试过吗？有什么要遵循的准则吗？谢谢，

# thrift - apache thrift C++ 异步客户端

> ID：10344431
> 
> 赞同：4
> 
> 时间：2012-04-27T03:41:09.920
> 
> 标签：thrift

我正在寻找一个 C++ 异步客户端和非阻塞 C++ 服务器实现。我在 apache 中看到了一些邮件存档，但活动是在 2009 年末。想知道它是否在最新的 thrift 中支持。我对 C++ 代码使用 cob_style 选项，但生成的代码无法编译。将不胜感激任何帮助，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:35:32.277

对于服务器，您有 C++ 中的 TNonBlockingServer 实现：

```
using namespace ::apache::thrift;
using namespace ::apache::thrift::protocol;
using namespace ::apache::thrift::transport;
using namespace ::apache::thrift::server;
using namespace ::apache::thrift::concurrency;

shared_ptr<MyHandler> handler(new MyHandler());
shared_ptr<TProcessor> processor(new (handler));
shared_ptr<TProtocolFactory> protocolFactory(new TBinaryProtocolFactory());

// using thread pool with maximum 15 threads to handle incoming requests
shared_ptr<ThreadManager> threadManager = ThreadManager::newSimpleThreadManager(15);
shared_ptr<PosixThreadFactory> threadFactory = shared_ptr<PosixThreadFactory>(new PosixThreadFactory());
threadManager->threadFactory(threadFactory);
threadManager->start();

//create and start the server
shared_ptr<TNonblockingServer> server = new  TNonblockingServer(processor, protocolFactory, port, threadManager);
server->serve(); 
```

# c - 在 C 语言中，多线程、多个窗口调用一个窗口过程，每个调用会使用新的局部变量还是我需要一个互斥锁？

> ID：10344432
> 
> 赞同：1
> 
> 时间：2012-04-27T03:41:19.687
> 
> 标签：c, windows, multithreading, user-interface

我试图在标题中解释这一切：我有一个多线程 C 程序，它将有多个窗口调用一个窗口过程。

在窗口过程中进行了一些处理。我需要保护它，还是每次调用窗口过程都会在内存中分开？

我的直觉是我不需要互斥体，因为它们都是局部变量，这是错误的吗？

```
LRESULT APIENTRY EditSubclassProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) 
{   
    if (uMsg == WM_GETDLGCODE) 
        return DLGC_WANTALLKEYS;
    else if(uMsg == WM_CHAR)
    {
        if( (int) wParam == 13)
        {
            char* strCurrentCommand;

            unsigned long ulThisConversation = GetConversation(0, 0, hwnd, 0, 0);
            ... 
```

我关心局部变量 strCurrentCommand 和 ulThisConversation。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:57:32.100

函数的局部变量和参数放在堆栈上。每个线程都有自己的堆栈，函数的每次调用都会在它正在运行的线程的堆栈上获得一个空间，用于存放其参数和局部变量。所以你没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:51:51.377

您不需要使用互斥锁保护堆栈变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:08:27.923

无需保护局部变量，因为每次调用 window proc 函数都会在堆栈上分配新的副本。

但请记住，为了避免需要互斥锁或其他同步机制，您还需要确保从窗口 proc 函数内部调用的`GetConversation`任何函数（如该函数调用的任何函数）都是线程安全的。

# java - 需要长的原始 NaN 值

> ID：10344438
> 
> 赞同：4
> 
> 时间：2012-04-27T03:42:13.197
> 
> 标签：java, null, primitive

设想：

1）我有一个可以设置或不设置的长状态变量。

2) 这个长变量具有从 Long.MIN_VALUE 到 Long.MAX_VALUE 的有效值，包括零

3）这是性能敏感代码，所以我不想使用 Long 包装器类型

我该如何写这么长的“已设置”类型的检查？我真的需要添加第二个布尔值来测试 long 是否有效吗？这看起来很草率。我知道我可以在这里使用 Long 包装器，但是创建这么多对象并检查 null 似乎是一种性能浪费。

伪代码（这是我想要的）：

```
class foo {

long someLong = NaN; //NaN = hypothetical not a number like Double

public reset() {
  someLong = NaN;
}

public doSomethingElse() {
   if(someLong !=NaN) {
     //report
     reset();
   }
}

public doSomeStuff() {
  if(someLong == NaN) {
   someLong = //something
  }
}

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:46:03.277

您必须为 NaN 留出一个特殊值。如果您真的使用所有可能的值，则没有。

你确定 Long 对象是一个性能问题吗？

如果是这样，可能有一个额外的布尔值来表示该值是否已设置？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T06:59:00.687

使用 Long 而不是 long，并使用 null 作为 NaN 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T03:44:43.957

`NaN`很久没有了。如果您确定性能至关重要（我会测试使用 a 的速度损失`Long`），那么您将需要使用另一个标志值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T05:44:42.573

我用过 Long.MIN_VALUE 因为它有奇怪的属性，比如

```
Long.MIN_VALUE == -Long.MIN_VALUE 
```

它也不太可能自然发生。

使用它的问题是，它可以使代码更复杂。出于这个原因，我使用`double`小于 +/- 2^53 的整数值来表示可以没有错误。

# xcode - 合并和取消合并uiimages

> ID：10344439
> 
> 赞同：1
> 
> 时间：2012-04-27T03:42:16.190
> 
> 标签：xcode, uiimage, nsmutablearray, nsdata

我想知道将许多 UIImages 合并（因为没有更好的词）在一起的最佳方法，以便我可以通过电子邮件发送它们或将它们作为一个文件上传到 Dropbox，然后能够取消合并它们来自不同 iDevice 的较晚日期。

目前我将图像保存到 NSMutableDictionary 中，图像数据作为对象，文件名作为键。然后我使用 NSKeyedArchiver 从我的 NSMutableDictionary 创建一个 NSData 对象。我将此数据附加到电子邮件中，然后将其发送出去，以便在另一台设备上导入。在那里我可以 NSKeyedUnarchiver 我的 NSMutableDictionary 并且我有所有可能的图像及其各自的文件名随时可用。如果我只有 5 到 10 张图像，这很有效，但是当我进入 50 到 100 张图像时，随着 NSMutableDictionary 变大，显然会出现内存问题。下面是我现在正在使用的代码

```
NSData *imageToAddToEmail;
NSMutableDictionary *dictionaryToSend = [[NSMutableDictionary alloc] init];
NSArray *filePathBrokenUp;

for (int i = 0; i < [arrayForPhotoURLs count]; i++)
{
    imageToAddToEmail = UIImagePNGRepresentation([[UIImage alloc] initWithData:[NSData dataWithContentsOfFile:[arrayForPhotoURLs objectAtIndex:i]]]);
    filePathBrokenUp = [[arrayForPhotoURLs objectAtIndex:i] componentsSeparatedByString:@"/"];

    if (imageToAddToEmail != nil) [dictionaryToSend setObject:imageToAddToEmail forKey:[filePathBrokenUp lastObject]];
}

NSData *dataToSend = [NSKeyedArchiver archivedDataWithRootObject:dictionaryToSend]; 
```

有人可以指出我如何将 50-100 个 UIImage 合并在一起的正确方向，请记住它们以后需要取消合并？谢谢。

# perl - 使用 Perl 通过 Xpath 从 XML 中提取数据

> ID：10344446
> 
> 赞同：1
> 
> 时间：2012-04-27T03:44:30.193
> 
> 标签：perl, xpath

**情况：** 我目前正在使用 XML::LibXML 从 XML 中提取数据。我将它与 XML 元素的 Xpath 结合起来，我可以读取和替换 XML 中的大多数值。但是，我似乎无法访问 XML 的第一个标记中的特定数据。这是一个相当重要的领域，但我尝试了几种方法，但仍然无法操纵该领域。

**XML 文件：**

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
 <test **date_time="201111031006"** xsi:noNamespaceSchemaLocation="test.xsd">
    <msg_ver>0001</msg_ver>
    <sender_id>john</sender_id>
    <recipient_id>mike</recipient_id>
 </test> 
```

我正在尝试访问 date_time 字段（粗体），但我似乎无法这样做。我复制了 XPath 并尝试了，但它不会工作。我实际上可以更改字段等等，但我不能更改 date_time 字段。我什至无法从现场提取数据，更不用说更改它了。使用相同的功能，我可以读取、提取和保存对字段的更改，并且 .

**我的代码**

```
 sub CHANGE_DATE()
  {
    my $parser = XML::LibXML->new();
    my $doc    = $parser->parse_file($newfile);
    my $query  = "/tradenet/@date_time"; ## this is the actual XPATH
    my($node)   = $doc->findnodes($query);
        $node->setData("$date");

    $doc->toFile($newfile); 
```

提前感谢您花时间看这个..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T04:40:39.697

[`use warnings;`将和`use strict;`](https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings)添加到脚本的顶部，它会告诉您查询的问题。（线索 -`@date_time`看起来像一个变量名。）

接下来，您会注意到这`tradenet`不是您的测试文件中的顶级标签。

然后，修复这些问题后，您会发现`setData()`属性不正确，它是`setValue()`.

然后它将起作用。

如果您将脚本转换为一个小测试并在发布问题之前自己运行它，您就会发现所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:02:41.393

请尝试以下 xPath 查询 /test/@date_time 这应该可以工作。

```
my $query  = '/test/@date_time'; 
```

此外，W3School 有很好的 xPath 教程，libXML 也遵循同样的方法。

[http://www.w3schools.com/xpath/](http://www.w3schools.com/xpath/)

希望这会有所帮助。

# c# - 在 C# 中获取 HttpPostedFile 的字符串内容的最短方法是什么

> ID：10344449
> 
> 赞同：20
> 
> 时间：2012-04-27T03:44:51.680
> 
> 标签：c#, string, httppostedfile

我有一个 HttpPostedFile 对象，只需要提取发布文件的内容。

我找到[了这个链接](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.inputstream(v=vs.80).aspx)，但这是一个很长的过程来获取包含内容的字符串。

有没有更短的方法？（最好是单行指令。）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-27T03:49:05.570

```
var str = new StreamReader(postedFile.InputStream).ReadToEnd(); 
```

[StreamReader.ReadToEnd](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx)

# javascript - XDomainRequest 总是有错误

> ID：10344452
> 
> 赞同：1
> 
> 时间：2012-04-27T03:45:45.313
> 
> 标签：javascript, internet-explorer, xml-parsing, xdomainrequest

我想知道是否有人可以帮助我，我在网上看到了一些使用 XDomainRequest 的示例，但他们并没有真正很好地解释代码。我正在尝试加载一个 XML 文件，以便对其进行解析。我正在使用的代码如下。

```
 var xdr = new XDomainRequest();             
           xdr.onerror = 
           function () 
           {
                    alert('Error!');
           };               
           xdr.ontimeout = 
           function () 
           {
                    alert('Timeout!');
           };

           xdr.onprogress = 
           function () 
           {
                    alert('Loading...');
           };
           xdr.onload = 
           function() 
           {
                    alert('File:' + xdr.responseText);
           }

           xdr.timeout = 10000;
           xdr.open("GET","http://www.spectraltechnologies.co.uk/webbuilder2020/Instrument_Lamps_New.txt", false);
           xdr.send(); 
```

每次我尝试使用它时，它总是返回 xdr.onerror 和伴随的警报。它请求的文件最初是一个 XML 文件，内部是 XML 格式，但我制作了一个 .txt 副本，据我所知，这是 XDomainRequest 接受的唯一内容。

我已经能够为 Firefox 和 Chrome 浏览器制定解决方案，但是 Internet Explorer 给我带来了很多问题。我真的希望有人可以提供帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:16:18.297

我通过坚持 XDomainRequest 的冗长且非常具体的规范来解决这个问题。我的第一个问题是我正在访问的文件/站点的响应标头不正确。

该站点使用了“.htaccess”文件，因此我可以通过添加以下代码来解决此问题：

```
 <filesMatch "\Instrument_Lamps_New.txt$">
    <IfModule mod_headers.c>
    Header add Access-Control-Allow-Origin "*"
    </IfModule>
    </filesMatch> 
```

此代码检查正在访问的文件是否是我想要指定标题的文件，然后将其添加到标题中。

我的第二个问题是，使用 XDomainRequest，您只能访问与您打开请求的文件具有相同协议的文件。即http只打开http，https只打开https。由于调试站点，我是从自己的文件系统打开页面，所以由于“file://...”≠“http://...”而发生错误。

因此，在确保我的响应标头包含“Access-Control-Allow-Origin”标头后，我上传了它工作正常的页面。

此站点包含有关 XDomainRequest 的更多信息：http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

# python - Python“列表”对象不可调用？

> ID：10344461
> 
> 赞同：0
> 
> 时间：2012-04-27T03:47:36.950
> 
> 标签：python

我正在尝试在使用正则表达式和 dict() 的地方运行此代码。我需要将匹配的元素放入正确的列表中，但出现错误。TypeError: 'list' object is not callable。谁能告诉我我在这里做错了什么。

```
dir='newDSSP'
for tname in os.listdir(dir):
    file=dir+os.sep+tname
    ndfile=open(file)
    tname=dict()
    tname.setdefault('A',[[],[]])
    tname.setdefault('B',[[],[]])
    tname.setdefault('C',[[],[]])
    tname.setdefault('D',[[],[]])
    for ndline in ndfile:
        t=re.match(r'(\s+|\S+)+\t\w+\t(\w)\t(\w)\t(\w|\s)', ndline)
        k=t.group(2)
        if k =='A':

            tname['A'](0).append(t.group(3))<--- **#Error here**
            tname['A'](1).append(t.group(4))
        elif k =='B':

            tname['B'](0).append(t.group(3))
            tname['B'](1).append(t.group(4))
        elif k =='C':

            tname['C'](0).append(t.group(3))
            tname['C'](1).append(t.group(4))
        elif k =='D':

            tname['D'](0).append(t.group(3))
            tname['D'](1).append(t.group(4))
    ndfile.close() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T03:49:23.907

你有

```
tname['A'](0).append(t.group(3)) 
```

但不是`tname['A']`一个包含两个列表的列表吗？在这种情况下，你想要

```
tname['A'][0].append(t.group(3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:49:49.843

`x()`始终是一个函数调用，所以像`tname['C'](0)`试图`tname['C']`作为一个带有参数的函数调用`0`。也许您打算将方括号用于列表索引？

# ruby-on-rails-3 - 延迟作业使 Web 界面无法工作

> ID：10344464
> 
> 赞同：0
> 
> 时间：2012-04-27T03:47:59.167
> 
> 标签：ruby-on-rails-3, delayed-job

在我的本地版本中，有一个后台进程运行超过 9000 个延迟作业（字面意思，不是[Dragonball z 笑话](http://knowyourmeme.com/memes/its-over-9000)）。

据我了解，我们使用后台作业的原因是我们可以允许访问 Web 界面，而服务器分配一些资源在后台工作。但似乎并非如此，因为延迟的作业正在运行时，我无法访问该网站（浏览器不断显示动画加载栏。

可能是因为我使用了 mongrel 服务器吗？或者有没有办法解决这个问题？

谢谢

**附加信息**

好的，也许是因为我运行了 rake jobs:work 而不是 script/delayed_job start ？

但是当我运行时：

```
script/delayed_job start
RAILS_ENV=development script/delayed_job start
ruby RAILS_ENV=development script/delayed_job start
ruby script/delayed_job start 
```

我得到了这些：

```
-bash: script/delayed_job: No such file or directory
-bash: script/delayed_job: No such file or directory
ruby: No such file or directory -- RAILS_ENV=development (LoadError)
ruby: No such file or directory -- script/delayed_job (LoadError) 
```

我做错了什么？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:41:01.377

可能你还没有安装脚本命令。你必须运行这个：

```
> rails g delayed_job:active_record 
```

之后就可以正常使用了，因为会创建文件，如下：（输出）

```
 create  script/delayed_job
     chmod  script/delayed_job
     create  db/migrate/20120109185353_create_delayed_jobs.rb 
```

参考：[http ://railscasts.com/episodes/171-delayed-job-revised?view=asciicast](http://railscasts.com/episodes/171-delayed-job-revised?view=asciicast)

# perl - `entrycget` 是否因为重复条目而无法正确返回数据？

> ID：10344465
> 
> 赞同：0
> 
> 时间：2012-04-27T03:48:03.410
> 
> 标签：perl, treeview, tk

我[`entrycget`](http://search.cpan.org/search?query=entrycget)用来从小部件中获取相关的变量值。

```
my $selectedItem = $tree->entrycget(<label>, <data>); 
```

标签是表示树的层级的条目，例如根节点的节点1的第二个子节点将表示为

```
'Root/node1/node2' 
```

数据是我要检索的值，在本例中是文件路径。但是，作为示例，数据存在重复条目，`Root/node1`并且`Root/node1/node2`两者都可以具有相同的数据值（相同的路径）。

在检索所选树项的值时，我发现它没有正确返回某些标签的值，通常是当`data`字段有另一个重复条目时，如上面的场景。这是由重复`data`字段引起的吗？该方法如何`entrycget`工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:52:27.617

该`entrycget`方法适用于树的底层模型。*它将路径*参数（在您的问题中）映射`<label>`到该树中的特定节点，然后使用*选项*参数（`<data>`在您的问题中）从节点结构中选择一个字段，返回相关值。

就小部件而言，重复的*option*没有问题，因为它是唯一部分的*路径*（并且路径的前缀将设置值）。

# javascript - element.innerHTML 无法调用我的 javascript 函数

> ID：10344466
> 
> 赞同：0
> 
> 时间：2012-04-27T03:48:06.060
> 
> 标签：javascript, ajax, dom

我对网络开发很陌生，我遇到了这个问题。我尝试用谷歌搜索，但我看到的问题与我的无关。

我有一个仅包含以下代码的 jsp 文件：

```
<script>
displaymessage();
</script> 
```

在我的 js 文件中：我有这个。

```
$('ajax_content').innerHTML = resp.responseText; 
```

其中的 resp.responseText 相当于一个代表 jsp 文件的字符串。

jsp文件中的函数存在于编译后的HTML页面中，但没有调用该函数。

该函数的目的只是显示一条消息。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:49:37.013

通过插入脚本`innerHTML`不会运行该脚本。

相反，您应该删除这些`script`标签并通过`eval`.

# java - 如何从抽象类创建扩展类？

> ID：10344467
> 
> 赞同：1
> 
> 时间：2012-04-27T03:48:08.987
> 
> 标签：java, inheritance

这是一个继承问题，问题是 Ticket 类是抽象的，我正在尝试创建一个扩展 Ticket 类的 AdvanceTicket 类。AdvanceTicket 类应该充当在活动前购买的门票，并且在活动前 10 天购买的门票价格为 30 美元。在活动前至少 1 天但不到 10 天购买的门票价格为 40 美元。

```
public abstract class Ticket {

    private int serialNumber;

    public Ticket() {
        serialNumber = getNextSerialNumber(); { 
        }
        //returns the price for this ticket
        public abstract double getPrice();
    }
    public String toString() {
        return "Number: " + serialNumber + "/nPrice: " + getPrice();
    }
    //returns a new unique serial Number
    public static int getNextSerialNumber() {
    //implementation not shown  
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:26:48.523

```
class AdvanceTicket extends Ticket
{
     public double getPrice() //you must override abstract method ie. getPrice();
     {
           .......
     }
} 
```

如果您**不想覆盖** `getPrice()`，则在派生类中也将其声明为**抽象，并将派生类声明为抽象。**

```
abstract class AdvanceTicket extends Ticket
{
   public abstract getPrice();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:49:23.057

```
 class AdvanceTicket extends Ticket 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:51:29.993

`Ticket`您可以在创建类时简单地扩展。

```
class AdvanceTicket extends Ticket {
    // Implementation here
} 
```

关于代码的一般说明：如果您要使用`serialNumber`，则应声明`static`。另外，`/n`应该是`\n`。

# python - SQLAlchemy：如何过滤 PgArray 列类型？

> ID：10344468
> 
> 赞同：9
> 
> 时间：2012-04-27T03:48:20.087
> 
> 标签：python, sql, postgresql, sqlalchemy

在纯 postgres 中，我们可以这样写：

```
SELECT * FROM my_table WHERE 10000 = ANY (array_field); 
```

或者

```
SELECT * FROM my_table WHERE 10000 = ALL (array_field); 
```

如何在没有原始 sql 的 sqlalchemy 的帮助下做同样的事情？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T04:45:56.290

`a = ANY(b_array)`相当于¹。`a`**`IN`**`(elements_of_b_array)`

因此，您可以使用该[`in_()`方法](http://docs.sqlalchemy.org/en/latest/core/expression_api.html#sqlalchemy.sql.operators.ColumnOperators.in_)。

我不记得`a = ALL(b_array)`在我所有的岁月里都使用过 PostgreSQL。你？

* * *

如果您正在处理一个**数组列**并想测试它是否包含该列中的给定元素（或给定数组的所有元素），那么您可以使用[PostgreSQL 数组运算符](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-OPERATORS-TABLE) `@>`（`contains`）或更合适的逆兄弟**`<@`**（`is contained by`）。

数组运算符的优点是可以通过数组列上的**GIN 索引**`ANY`来支持它们（与构造不同）。

您的 SQL 语句：

```
SELECT * FROM my_table WHERE 10000 = ANY (array_field); 
```

是（几乎）¹相当于

```
SELECT * FROM my_table WHERE 10000 <@ array_field; 
```

我不是 SQLAlchemy 专家，但根据[SQLAlchemy 手册中的教程](http://docs.sqlalchemy.org/en/latest/core/tutorial.html)，您可以使用任何运算符：

> 如果你遇到一个确实不可用的运算符，你可以随时使用该**`op()`**方法；这会生成您需要的任何运算符：
> 
> ```
> >>> print users.c.name.op('tiddlywinks')('foo') users.name tiddlywinks :name_1 
> ```

大胆强调我的。您的语句在 SQLA 中可能如下所示：

```
s = select([my_table], array_field.op('@>')('ARRAY[10000]')) 
```

或者使用 PostgreSQL 数组值的替代输入语法：

```
s = select([my_table], array_field.op('@>') (cast('{10000}', int[]))) 
```

* * *

¹ NULL 处理有一个细微的差别：

```
SELECT '{NULL}'::int[] <@ ... -- that's an array with a single NULL element 
```

总是产生`FALSE`。

```
SELECT NULL IN (...)
SELECT NULL = ANY (...)
SELECT NULL::int[] <@ ... 
```

总是屈服`NULL`。

如果您不打算查询`NULL`值，则可以忽略它。

# c# - Asp.NET DropDownList SelectedItem.Value 不变

> ID：10344469
> 
> 赞同：17
> 
> 时间：2012-04-27T03:48:56.793
> 
> 标签：c#, asp.net, data-binding, drop-down-menu, selectedvalue

标记：

```
 <div style="float:left;margin-top:15px;width:80px">
                <asp:DropDownList ID="MyList" runat="server" Width="100px"></asp:DropDownList>
            </div> 
```

代码：

```
 // clear vehicles list
        MyList.Items.Clear();

        // add 'all' option
        MyList.Items.Add(new ListItem("ALL", "0"));

        // add assets
        foreach (CustomClass item in items)
            MyList.Items.Add(new ListItem(item.Name, item.ID.ToString())); 
```

没有触发 SelectedIndexChanged 的​​事件，因为它不是必需的。

当我单击回发按钮时，选定项的值仍然是 DropDownList 中第一项的值。我错过了什么？

**注意** 请停止回复和编辑帖子。我们可以保持原样，因为它已经被回答了。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-27T03:57:34.130

如果您在 中进行数据绑定`Page_Load`，则本质上您也在重置 SelectedItem。

您应该将存在于`Page_Load`块中的`if(!IsPostBack)`任何绑定代码包装起来。

```
if(!Page.IsPostBack)
{

    // Your binding code here ...

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T03:55:37.007

您的代码也可能在回发后执行，清除框，因此丢失选择和所有内容。

如果是这样，请尝试将代码包装在类似`if( !Page.IsPostBack ) { ... }`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T04:04:21.083

所以这个答案是最常见原因的“明显”解决方案。但是，还有一个更令人惊讶的问题可能导致此问题！我的列表值来自数据库，这些值有换行符和回车符：“\r\n”。这些值看起来像一个无辜的空间，但实际上它们不是！我的解决方案是删除这些隐藏的 Char 值。希望能帮助到你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T03:57:01.763

是的，您缺少添加下拉列表 Autopostback=true..

请尝试在您的 .aspx 页面中进行以下操作

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-27T06:52:05.297

嘿，要添加所有不需要添加的第一个索引。您需要插入特定的索引号

```
MyList.Items.Insert(0, "ALL"); 
```

# php - 手风琴在 Html 但不是 PHP

> ID：10344472
> 
> 赞同：-1
> 
> 时间：2012-04-27T03:49:21.880
> 
> 标签：php

我用 Accordion 设计了一个 html 页面，效果很好，但是当我将扩展名更改为 PHP 时，手风琴又不能正常工作了，下面是我的代码

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js">
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">
</script>
<script type="text/javascript">
  $(document).ready(function() {
    $("#accordion").accordion();
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:21:30.790

最好在 .php 上创建一个新文件并将所有代码复制到那里，然后关闭它。我有时对图像有类似的问题。

# windows - 如何为不可用的符号链接显示目标名称？

> ID：10344478
> 
> 赞同：1
> 
> 时间：2012-04-27T03:50:07.963
> 
> 标签：windows, winapi, symlink

我使用*CreateSymbolicLink*函数在我们的应用程序中添加了对 Windows 符号链接的支持。我们的应用程序将数据存储在一组实际文件夹中。我们的用户需要在一个主根文件夹之外存储一些文件夹。我们选择的解决方案是符号链接。这让他们可以做一些事情，比如将一部分数据保存在 DropBox 中或存储在网络驱动器上。到目前为止，一切都运行良好。

使用 Windows 资源管理器时，如果链接目标不存在，Windows 将显示以下消息。这可能是由于目标被重命名或远程网络驱动器不可用造成的。

> 位置不可用
> C:...\MyLink 指的是不可用的位置。它可能位于这台计算机的硬盘驱动器上，也可能位于网络上。检查以确保磁盘已正确插入，或者您已连接到 Internet 或您的网络，然后重试。如果仍然无法找到，则信息可能已移至其他位置。

我正在尝试复制此检查**并添加目标位置**，以便用户知道为什么没有数据存在。

正常的目录存在检查是不够的，因为系统上存在符号链接。我通过调用 CreateFile 打开文件夹来解决这个问题。这会导致打开目标位置而不是符号链接。根据我的检查需要，这确实失败了。现在我被困在试图获取链接指向的目标路径。

我发现这个已回答的 Stack Overflow 问题，用于从符号链接读取目标位置。
-[如何以编程方式访问 Windows 符号链接的目标路径？](https://stackoverflow.com/questions/221417/how-do-i-programmatically-access-the-target-path-of-a-windows-symbolic-link)

但是，该答案需要打开目录的有效句柄。就我而言，我想找到损坏链接的名称，以帮助解决问题并修复链接。

如何在没有有效句柄的情况下获取符号链接的目标位置？

# c# - 从 ImageBrush 创建 writeableBitmap

> ID：10344479
> 
> 赞同：1
> 
> 时间：2012-04-27T03:50:14.467
> 
> 标签：c#, windows-phone-7, xaml

我正在尝试在单击事件上拍摄视频画笔显示的“快照”，但由于某种原因，我无法正确显示此快照。

```
double height = Application.Current.Host.Content.ActualHeight;

//Capture the screen           
private void freeze_Click(object sender, EventArgs e)
{
        // Takes the preview buffer pixel array from camera and returns
        // an array of pixels representing the camera's preview buffer
        int[] previewBuffer = GetPreviewBuffer();

        //Process the preview image
        int[] imageData = PhotofunDataContext.SelectedEffect.Effect.ProcessImage(previewBuffer);

        //Copy to WriteableBitmap
        //previewWriteableBitmap = new WriteableBitmap((int)camera.PreviewResolution.Width, (int)camera.PreviewResolution.Height);
        WriteableBitmap freezeWriteableBitmap = new WriteableBitmap((int)camera.PreviewResolution.Width, (int)camera.PreviewResolution.Height);

        imageData.CopyTo(freezeWriteableBitmap.Pixels, 0);

        freezeWriteableBitmap.Invalidate();  

        //Display that on the screen
        FreezeImage.Source = freezeWriteableBitmap;

        //height of device
        FreezeImage.Width = height;
        //width to maintain 4:3 aspect ratio
        FreezeImage.Height = height * (.75);

        FreezeImage.Opacity = 1;

        }

}

//Get the preview buffer
private int[] GetPreviewBuffer()
{
        int[] pixelData = new int[(int)(camera.PreviewResolution.Width * camera.PreviewResolution.Height)];
        //int[] pixelData = new int[(int)width * (int)height];
        camera.GetPreviewBufferArgb32(pixelData);
        return pixelData;
} 
```

上面的代码用于拍摄视频画笔的快照并将其显示在当前活动的视频画笔上作为冻结帧。

```
<Rectangle x:Name="videoRectangle" Width="1" Height="1" HorizontalAlignment="Center">
            <Rectangle.Fill>
                <VideoBrush x:Name="viewfinderBrush" >
                    <VideoBrush.RelativeTransform>
                        <CompositeTransform x:Name="viewfinderTransform" Rotation="90"
                                            CenterX="0.5" CenterY="0.5"/>
                    </VideoBrush.RelativeTransform>
                </VideoBrush>                    
            </Rectangle.Fill>
        </Rectangle>

        <Image x:Name="FreezeImage" Opacity="0" HorizontalAlignment="Center" Stretch="Fill" Canvas.ZIndex="900">
            <Image.Projection>
                <PlaneProjection RotationZ="-90"/>
            </Image.Projection>
        </Image> 
```

FreezeImage 现在覆盖了活动的视频画笔，但图像尺寸与手机尺寸不匹配。我想在纵向模式下将 FreezeImage 不拉伸到整个手机屏幕。

当图像大小适合手机屏幕时，我尝试设置`FreezeImage.Width = height;`并`FreezeImage.Height = height * (.75);`保持相机的自然 4:3 纵横比，但这不会覆盖预览缓冲区和 FreezeWriteableBitmap 尺寸 (640x480)。

我还尝试对 previewbuffer 和 FreezeWriteableBitmap 的宽度（=1064）和高度（=800）尺寸进行硬编码，但是图像根本不显示（就像 writeableBitmap 一样，除了相机尺寸之外，它不接受任何其他值）。

在玩弄了相机初始化之后，我发现无论我将分辨率设置为什么，writeableBitmaps 始终默认为 640x480，这就是我认为问题所在，因为看起来这个纵横比是手机上实际显示的屏幕。如何修复此实现，以便生成的 freezeImage 高度与手机屏幕高度匹配并调整宽度以不执行拉伸？

`FreezeImage.Width = height;`注意：设置时的高度值`FreezeImage.Height = height * (.75);`是`double height = Application.Current.Host.Content.ActualHeight;`为考虑到未来WP7设备除了当前标准480x800之外的其他尺寸而设置的。

# python - 接受来自外部域的 POST 请求？（谷歌应用引擎）

> ID：10344481
> 
> 赞同：0
> 
> 时间：2012-04-27T03:50:41.273
> 
> 标签：python, google-app-engine, tornado, paypal-ipn, paypal-subscriptions

我似乎无法让我的应用程序接受来自不同域的 POST 请求。我正在尝试在我的应用程序中创建一个 PayPal IPN 处理程序。

当用户单击我页面上的“订阅”按钮时，PayPal 会向我的 IPN 处理程序发送一个 IPN（一个 POST）。

我可以在我的 AppEngine 日志中看到收到了一个 POST 请求，但它是空的（例如，没有参数，我的 logging.debug 消息没有出现在日志中等）

*因此，我通过在*我的应用程序中对其进行 POST 来测试我的处理程序，并且处理程序按预期工作。

我假设不接受来自外部来源的帖子是一项安全功能？如果是这样，我如何让我的应用接受来自 PayPal 的 POST？

这是我的处理程序目前的样子（仅用于测试）：

```
class BaseHandler(tornadotoad.mixin.RequestHandler, tornado.web.RequestHandler):
    # ...

class IPNHandler(BaseHandler):
    def post(self):
        if is_ajax(self.request):
            logging.info('AJAX')
        logging.info(self.request.arguments)
        self.write("This is the IPN Handler\n'")
        self.write(self.request.arguments)
        return 
```

提前致谢。

PS 我正在使用 PayPal 的[沙盒测试工具](https://developer.paypal.com/us/cgi-bin/devscr)发送 IPN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:48:44.163

我发现了我的错误。我将处理程序的 url 与其他 url 放在一起，其中包含`login: required`.`app.yaml`

我已经解决了这个问题，现在 PayPal 的 IPN 正在通过。

谢谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:58:20.367

这里有一些预感。

1.  也许“/ipn”没有被路由到 IPNHandler。也许另一个不推荐使用的处理程序？

2.  也许您在日志中查看的应用程序版本与您拥有的应用程序版本不同。也许您可以部署新版本的代码并针对新版本进行测试。

3.  也许 Paypal 向您发送的 POST 请求没有参数。

PS 有关您如何从 Paypal 端执行测试、显示代码的其他相关部分以及任何其他相关信息的更多信息可能会有所帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T06:23:24.810

只是一种预感，我可能在这里出类拔萃，但是对于龙卷风，我似乎无法在[文档](http://www.tornadoweb.org/documentation/web.html?highlight=request#tornado.web.RequestHandler)中找到该名称的方法或属性...

至少对于 webapp 我相信`arguments`是一个实例方法：

```
 logging.info(self.request.arguments()) 
```

[请参阅此处](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_arguments)的文档。

# .net - 字符串是否被垃圾收集？

> ID：10344483
> 
> 赞同：1
> 
> 时间：2012-04-27T03:51:02.627
> 
> 标签：.net, string, exception, garbage-collection

我分析了我的 C# 应用程序的内存问题，因为它将异常抛出内存。

我发现我有 >1gb 的字符串数据。主要由 htmlagilitypack 制作。没有收集字符串吗？我似乎有很多字符串数据。我会记下，当我在解析页面时抛出大量常规异常时会出现内存问题。

# openal - 当 alGetError()（在 OpenAL 中）返回 -1 而不是有效的错误代码时，这意味着什么？

> ID：10344484
> 
> 赞同：1
> 
> 时间：2012-04-27T03:51:05.137
> 
> 标签：openal, audio

我正在开发一个 iOS 游戏，我们在启动时创建一个 OpenAL 上下文，该上下文在应用程序的整个生命周期中都存在。我们分配了一个 OpenAL 资源池。每次加载地图时，声音效果 (.wav) 都会加载到 OpenAL 缓冲区中，然后我们在播放它们时寻找可用的源。唯一被加载/卸载的是缓冲区本身。

运行一段时间后，一些声音在调用 alPlaySource() 时停止工作。调用 alGetError() 返回 -1？在 alPlaySource() 调用之前，alGetError() 返回 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:48:52.617

这可能是由于 iOS 将并发播放源的数量限制为 32 个。

另请参阅：[iPhone 上 OpenAL 声音缓冲区的最大数量](https://stackoverflow.com/questions/3894044/maximum-number-of-openal-sound-buffers-on-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:01:20.637

我认为这是一个非常微妙的内存泄漏，导致了类似上面的一些奇怪的效果。该代码基于一些示例代码，即已知存在错误且不应使用的 SoundEngine。

我们最终切换到 FMOD。

# python - 如何为simpledb转换json格式的mysql表

> ID：10344492
> 
> 赞同：0
> 
> 时间：2012-04-27T03:52:26.797
> 
> 标签：python, json, amazon-simpledb

下面是我通常会插入 MySQL 的示例记录。然后我可以使用 SQL 执行常规类型的查询。请注意，我将以 5 分钟为间隔设置日期时间。

```
datetime          account_id country  zip   count 
2012-04-27 03:40   1234        69    91845   234
2012-04-27 03:45   3432        43    91813   212 
```

我将使用 simpledb 和 python boto api。

鉴于它是一个键值数据存储，其中值可以存储为字典/json 类型对象，那么存储数据以便我可以查询的正确结构是什么？例如，按国家/地区选择总和（计数）组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:42:49.763

SimpleDB 只真正支持 count(*) 聚合，不支持 sum。

您要么 1) 需要进行一些 hadoop 处理来聚合结果并返回结果，要么 2) 在单独的文档中存储和增加聚合（我通常将逻辑添加到我的存储库附近（如在更新方法中）或，对于需要更快更新/获取例程的文档，向 Amazon SQS 添加一条消息，然后在后台服务中重新计算这些聚合。

实话实说 - 我没有从 SimpleDB 报告太多，编写一个定期更新关系数据库中的数据的同步脚本要容易得多，然后我可以从中报告，而不必担心与前端应用程序的资源争用。

谢谢，

哈尔

# android - Android：如何在 EditText 中设置可接受的数字和字符？

> ID：10344493
> 
> 赞同：15
> 
> 时间：2012-04-27T03:52:55.480
> 
> 标签：android, validation, android-edittext, digits

我必须在 EditText 中设置可接受的字符“0123456789”和“分号”。下面是我正在使用的代码。

```
android:digits="0123456789;"
android:inputType="number|text 
```

该实现的问题是在 HTC 手机中，无法输入分号，但在三星和索尼爱立信中，可以输入分号。另一个问题是我在三星和索尼爱立信输入分号时，分号无法删除。上面的代码中是否缺少任何属性？提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-27T04:50:28.510

Android 通过修改布局 xml 并添加 android:inputType="text" 提供了一种编辑文本字段的简单方法。这使您可以轻松创建一些基本验证，例如数字、小数、电话或电子邮件。但是字母数字没有参数（即没有特殊字符）。为此，您需要使用如下所示的输入过滤器，并在代码中使用该过滤器设置要验证的字段。这个输入过滤器

```
 InputFilter alphaNumericFilter = new InputFilter() {   
     @Override  
     public CharSequence filter(CharSequence arg0, int arg1, int arg2, Spanned arg3, int arg4, int arg5)  
     {  
         for (int k = arg1; k < arg2; k++) {   
             if (!Character.isLetterOrDigit(arg0.charAt(k))) {   
             return ""; 
             }   //the first editor deleted this bracket when it is definitely necessary...
         }
         return null;
     }  
 };   
 mFirstName.setFilters(new InputFilter[]{ alphaNumericFilter}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:58:29.737

要限制用户在键入时可以输入的内容，请使用 TextWatcher，在这个问题[Android: How can I validate EditText input?中讨论过。](https://stackoverflow.com/questions/2763022/android-how-can-i-validate-edittext-input)

更好的是：[在 EditText 中只允许基于正则表达式的选定字符](https://stackoverflow.com/questions/4180770/allow-only-selected-charcters-based-on-regex-in-an-edittext)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T04:17:02.700

解决方案是修改这些字段： http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :inputMethod](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputMethod)

设置 EditText 的 InputMethod 以便您可以正确获取所需的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-15T11:25:46.317

这是正则表达式

```
Pattern mPattern = Pattern.compile("^([1-9][0-9]{0,2})?(\\.[0-9]?)?$");
Matcher matcher = mPattern.matcher(loginNameString.toString());               
if(!matcher.find())
{
    //TODO
} 
```

# search - 使用名字、中间名和姓氏搜索查询

> ID：10344494
> 
> 赞同：0
> 
> 时间：2012-04-27T03:53:03.093
> 
> 标签：search, grails, grails-orm

我有一个名为 Person 的 grails 域，因为我有属性：firstName、middleName、lastName 和其他。我在数据库中没有 fullName 字段，它是我域中的瞬态属性。现在我想创建一个使用所有这三个的搜索机制。有什么方法可以实现吗？

-> 更新

我从不同的角度考虑了这一点，然后它击中了我！所以我这样做了，我的查询

```
searchResult = Person.findAll("from Person p where p.firstName LIKE '%" + searchString + "%' or p.middleName LIKE '%" + searchString + "%' or p.lastName LIKE '%" + searchString + "%'") 
```

但是当我显示结果时，我限制了结果的数量，因此用户必须输入更具体的搜索字符串才能获得所需的结果。我还添加了一个“查看更多”按钮，因此如果用户可以看到所有获取的结果，但默认情况下，它只会显示有限数量的结果。（我无法回答我自己的问题，所以我在问题本身中写了这个：D）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:52:30.053

您需要传递参数以获取有限数量的数据。即.findAll（查询，参数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:30:16.073

只要有一个 getter 方法，我相信 Searchable 插件将适用于瞬态。

```
 public String getFullName()... 
```

# java - 制作简单的 2D 建筑游戏的最佳 Java API 是什么？

> ID：10344495
> 
> 赞同：3
> 
> 时间：2012-04-27T03:53:04.300
> 
> 标签：java, 2d, building

我正在尝试使用 Java，我想知道最简单的 Java API 是为只知道 Java 而没有很多其他依赖项的初学者制作 2D 构建游戏（即放置块、四处移动等） .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T03:55:57.180

[http://lwjgl.org/](http://lwjgl.org/) 这是一个易于使用的 java api:)

# mysql - MySQL HAVING 在 GROUP_CONCAT 中具有特定编号

> ID：10344496
> 
> 赞同：2
> 
> 时间：2012-04-27T03:53:14.473
> 
> 标签：mysql, having

我有一个像魅力一样工作的查询，但现在我需要按当前在已**`GROUP_CONCAT`**创建字段中的值对其进行过滤。我了解到我可以使用 HAVING 进行过滤，但我找不到要使用的语法，因为*`HAVING groupconcatname LIKE '%6%'`*会找到 6、16、26 等。我需要让语句搜索特定值，以便它可以在groupconcat 包含`1,5,8,18,30,58`但找不到**8 AND 18 AND 58**，因为我使用了 LIKE '%%'。

**我的查询**（现在可以工作..但基于部分匹配发现太多结果`%6%`）：

```
SELECT offers.*, s.short_name AS sponsorName, s.logo AS sponsorLogo, GROUP_CONCAT( mn.title) titles, 
   GROUP_CONCAT( mo.`name`) metas, GROUP_CONCAT( om.meta_option) AS meta_ids
FROM offers 
INNER JOIN offer_metas as om ON om.offer_id = local_ld_offers.id 
INNER JOIN meta_options as mo ON om.meta_option = mo.id 
INNER JOIN meta_names as mn ON mo.category = mn.category AND mo.cat_seq = mn.seq 
LEFT JOIN sponsors AS s ON s.id=offers.sponsor 
GROUP BY offers.id 
HAVING meta_ids LIKE '%6%'
ORDER BY end_date ASC 
```

我需要`HAVING meta_ids LIKE '%6%'`用更类似的东西替换，`WHERE '6' IN meta_ids`但是当我尝试替换 HAVING 语句时，似乎是对正常运行的**WHERE**`meta_ids`的合理尝试，它忽略了在我的子句中使用的有效变量/字段这一事实并出错.

有什么建议吗？

谢谢，

银虎

**更新 - 除非有更优雅的方式解决**

根据下面 Thomas 的建议，我更新了查询，显然我可以通过使用更新的方法为每个选项添加一行来搜索所需的单个值，如下所示：

```
WHERE EXISTS( SELECT * FROM offer_metas AS om1 WHERE om1.meta_option = mo.id AND om1.meta_option = '23')
OR EXISTS( SELECT * FROM offer_metas AS om1 WHERE om1.meta_option = mo.id AND om1.meta_option = '16') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:17:04.237

目前尚不清楚这里到底要问什么（一些带有预期输出的测试输入会有所帮助），但听起来您并不需要Having 子句。如果您想过滤 say`om.meta_option`为“like” 8 的值，则添加一个 Where 子句，如下所示：

```
Where Exists    (
                Select 1
                From meta_options As om1
                Where om1.meta_option = mo.id
                    And om1.meta_option = Like '%8%'
                ) 
```

当然，这会返回存在`8`、`80`和的`18`行`181`。如果您正在寻找一个等于 的特定值`8`，请使用：

```
Where Exists    (
                Select 1
                From meta_options As om1
                Where om1.meta_option = mo.id
                    And om1.meta_option = '8'
                ) 
```

如果您寻求的是一系列值，那么您可以执行以下操作：

```
Where Exists    (
                Select 1
                From meta_options As om1
                Where om1.meta_option = mo.id
                    And om1.meta_option In('8','23')
                ) 
```

请记住，Having 子句的目的是在分组*之后*应用过滤器，而 Where 子句在分组之前应用过滤器。在这种情况下，听起来过滤应该发生在分组之前，因此应该使用 Where 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:58:45.240

您可以更改`HAVING meta_ids LIKE '%6%'`为`HAVING meta_ids LIKE '%,6,%' OR '6,%' OR '%,6' OR '6'`which 应该得到您正在寻找的东西。

替代方案包括子查询之类的东西，例如 % 运算符在性能方面不是很好。

# javascript - 在不阻塞 UI 的情况下迭代数组的最佳方法

> ID：10344498
> 
> 赞同：76
> 
> 时间：2012-04-27T03:53:21.917
> 
> 标签：javascript, ajax, arrays, backbone.js, settimeout

我需要遍历一些大型数组并将它们存储在 API 调用的主干集合中。在不使循环导致界面无响应的情况下执行此操作的最佳方法是什么？

由于返回的数据太大，ajax 请求的返回也会阻塞。我认为我可以将其拆分并使用 setTimeout 使其以较小的块异步运行，但有更简单的方法可以做到这一点。

我认为网络工作者会很好，但它需要更改保存在 UI 线程上的一些数据结构。我已经尝试使用它来进行 ajax 调用，但是当它返回数据到 UI 线程时，界面仍然有一段时间没有响应。

提前致谢

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-04-27T04:03:11.247

您可以选择使用或不使用 webWorkers：

## 没有 WebWorkers

对于需要与 DOM 或应用程序中的许多其他状态交互的代码，您不能使用 webWorker，因此通常的解决方案是将您的工作分成多个块，在计时器上完成每个工作块。使用计时器在块之间中断允许浏览器引擎处理正在发生的其他事件，并且不仅允许处理用户输入，还允许绘制屏幕。

通常，您可以在每个计时器上处理多个，这比每个计时器只处理一个更有效和更快。此代码使 UI 线程有机会处理每个块之间的任何未决 UI 事件，这将使 UI 保持活动状态。

```
function processLargeArray(array) {
    // set this to whatever number of items you can process at once
    var chunk = 100;
    var index = 0;
    function doChunk() {
        var cnt = chunk;
        while (cnt-- && index < array.length) {
            // process array[index] here
            ++index;
        }
        if (index < array.length) {
            // set Timeout for async iteration
            setTimeout(doChunk, 1);
        }
    }    
    doChunk();    
}

processLargeArray(veryLargeArray); 
```

这是该概念的一个工作示例 - 不是相同的功能，而是一个不同的长期运行过程，它使用相同的`setTimeout()`想法来测试具有大量迭代的概率场景：http: [//jsfiddle.net/jfriend00/9hCVq/](http://jsfiddle.net/jfriend00/9hCVq/)

* * *

您可以将上述内容转换为更通用的版本，该版本调用回调函数`.forEach()`，如下所示：

```
// last two args are optional
function processLargeArrayAsync(array, fn, chunk, context) {
    context = context || window;
    chunk = chunk || 100;
    var index = 0;
    function doChunk() {
        var cnt = chunk;
        while (cnt-- && index < array.length) {
            // callback called with args (value, index, array)
            fn.call(context, array[index], index, array);
            ++index;
        }
        if (index < array.length) {
            // set Timeout for async iteration
            setTimeout(doChunk, 1);
        }
    }    
    doChunk();    
}

processLargeArrayAsync(veryLargeArray, myCallback, 100); 
```

* * *

与其猜测一次要分块多少，还可以让经过的时间成为每个块的指南，并让它在给定的时间间隔内处理尽可能多的块。这在某种程度上自动保证了浏览器的响应能力，无论迭代的 CPU 密集程度如何。因此，您可以传入毫秒值（或仅使用智能默认值），而不是传入块大小：

```
// last two args are optional
function processLargeArrayAsync(array, fn, maxTimePerChunk, context) {
    context = context || window;
    maxTimePerChunk = maxTimePerChunk || 200;
    var index = 0;

    function now() {
        return new Date().getTime();
    }

    function doChunk() {
        var startTime = now();
        while (index < array.length && (now() - startTime) <= maxTimePerChunk) {
            // callback called with args (value, index, array)
            fn.call(context, array[index], index, array);
            ++index;
        }
        if (index < array.length) {
            // set Timeout for async iteration
            setTimeout(doChunk, 1);
        }
    }    
    doChunk();    
}

processLargeArrayAsync(veryLargeArray, myCallback); 
```

## 使用 WebWorkers

如果循环中的代码不需要访问 DOM，那么可以将所有耗时的代码放入 webWorker。webWorker 将独立于主浏览器 Javascript 运行，然后当它完成后，它可以使用 postMessage 将任何结果传回。

webWorker 需要将在 webWorker 中运行的所有代码分离到一个单独的脚本文件中，但它可以运行完成，而无需担心阻塞浏览器中其他事件的处理，也无需担心“无响应脚本”提示在主线程上执行长时间运行的进程并且没有阻塞 UI 中的事件处理时可能会出现这种情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T04:06:15.037

[这是执行此“异步”循环的演示](http://jsfiddle.net/c45Dn/)。它“延迟”迭代 1 毫秒，在此延迟内，它让 UI 有机会做某事。

```
function asyncLoop(arr, callback) {
    (function loop(i) {

        //do stuff here

        if (i < arr.Length) {                      //the condition
            setTimeout(function() {loop(++i)}, 1); //rerun when condition is true
        } else { 
            callback();                            //callback when the loop ends
        }
    }(0));                                         //start with 0
}

asyncLoop(yourArray, function() {
    //do after loop  
})​;

//anything down here runs while the loop runs 
```

有一些替代方案，比如[web workers](http://caniuse.com/#search=webworkers)和[当前提议的 setImmediate](https://developer.mozilla.org/en/DOM/window.setImmediate)，afaik[位于 IE 上](http://ie.microsoft.com/testdrive/Performance/setImmediateSorting/Default.html)，带有前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T18:22:42.393

基于@jfriend00，这是一个原型版本：

```
if (Array.prototype.forEachAsync == null) {
    Array.prototype.forEachAsync = function forEachAsync(fn, thisArg, maxTimePerChunk, callback) {
        let that = this;
        let args = Array.from(arguments);

        let lastArg = args.pop();

        if (lastArg instanceof Function) {
            callback = lastArg;
            lastArg = args.pop();
        } else {
            callback = function() {};
        }
        if (Number(lastArg) === lastArg) {
            maxTimePerChunk = lastArg;
            lastArg = args.pop();
        } else {
            maxTimePerChunk = 200;
        }
        if (args.length === 1) {
            thisArg = lastArg;
        } else {
            thisArg = that
        }

        let index = 0;

        function now() {
            return new Date().getTime();
        }

        function doChunk() {
            let startTime = now();
            while (index < that.length && (now() - startTime) <= maxTimePerChunk) {
                // callback called with args (value, index, array)
                fn.call(thisArg, that[index], index, that);
                ++index;
            }
            if (index < that.length) {
                // set Timeout for async iteration
                setTimeout(doChunk, 1);
            } else {
                callback();
            }
        }

        doChunk();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-26T20:20:54.407

非常感谢。

我已经更新了代码以添加一些功能。

使用下面的代码，您可以使用数组函数（迭代数组）或映射函数（迭代映射）。

此外，现在有一个用于在块完成时调用的函数的参数（如果您需要更新加载消息会有所帮助），以及在处理循环结束时调用的函数的参数（执行下一步所必需的）异步操作完成后的步骤）

```
//Iterate Array Asynchronously
//fn = the function to call while iterating over the array (for loop function call)
//chunkEndFn (optional, use undefined if not using) = the function to call when the chunk ends, used to update a loading message
//endFn (optional, use undefined if not using) = called at the end of the async execution
//last two args are optional
function iterateArrayAsync(array, fn, chunkEndFn, endFn, maxTimePerChunk, context) {
    context = context || window;
    maxTimePerChunk = maxTimePerChunk || 200;
    var index = 0;

    function now() {
        return new Date().getTime();
    }

    function doChunk() {
        var startTime = now();
        while (index < array.length && (now() - startTime) <= maxTimePerChunk) {
            // callback called with args (value, index, array)
            fn.call(context,array[index], index, array);
            ++index;
        }
        if((now() - startTime) > maxTimePerChunk && chunkEndFn !== undefined){
            //callback called with args (index, length)
            chunkEndFn.call(context,index,array.length);
        }
        if (index < array.length) {
            // set Timeout for async iteration
            setTimeout(doChunk, 1);
        }
        else if(endFn !== undefined){
            endFn.call(context);
        }
    }    
    doChunk();    
}

//Usage
iterateArrayAsync(ourArray,function(value, index, array){
    //runs each iteration of the loop
},
function(index,length){
    //runs after every chunk completes, this is optional, use undefined if not using this
},
function(){
    //runs after completing the loop, this is optional, use undefined if not using this

});

//Iterate Map Asynchronously
//fn = the function to call while iterating over the map (for loop function call)
//chunkEndFn (optional, use undefined if not using) = the function to call when the chunk ends, used to update a loading message
//endFn (optional, use undefined if not using) = called at the end of the async execution
//last two args are optional
function iterateMapAsync(map, fn, chunkEndFn, endFn, maxTimePerChunk, context) {
    var array = Array.from(map.keys());
    context = context || window;
    maxTimePerChunk = maxTimePerChunk || 200;
    var index = 0;

    function now() {
        return new Date().getTime();
    }

    function doChunk() {
        var startTime = now();
        while (index < array.length && (now() - startTime) <= maxTimePerChunk) {
            // callback called with args (value, key, map)
            fn.call(context,map.get(array[index]), array[index], map);
            ++index;
        }
        if((now() - startTime) > maxTimePerChunk && chunkEndFn !== undefined){
            //callback called with args (index, length)
            chunkEndFn.call(context,index,array.length);
        }
        if (index < array.length) {
            // set Timeout for async iteration
            setTimeout(doChunk, 1);
        }
        else if(endFn !== undefined){
            endFn.call(context);
        }
    }    
    doChunk();
}

//Usage
iterateMapAsync(ourMap,function(value, key, map){
    //runs each iteration of the loop
},
function(index,length){
    //runs after every chunk completes, this is optional, use undefined if not using this
},
function(){
    //runs after completing the loop, this is optional, use undefined if not using this

}); 
```

# java - Array的内存初始化背后的概念是什么？

> ID：10344501
> 
> 赞同：0
> 
> 时间：2012-04-27T03:54:00.180
> 
> 标签：java, arrays

```
String a[]=null;
    if(a[0]!=null)
    {
        System.err.println("dd-1");
    }

    if(a!=null)
        {
        System.err.println("dd-2");
        }
    } 
```

在第一个 if 条件下它抛出空指针异常，但在第二个 if 条件下它不抛出空指针异常？谁能给我解释一下？这背后有什么关于堆内存分配的概念吗？

我也知道了这个问题，因为 Missing memory allocation,String a[]=new String.[10]; 请解释一下这个概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:01:12.907

在第一个 if 条件下，您尝试访问数组中的第一个元素，即使没有为它完成分配。

在第二种情况下，您只是在测试参考。

（把它想象成 C 指针， char *str = NULL 不分配任何东西，除了指向 NULL 的指针）

```
String a[]=null; 
```

没有为数组分配内存，只创建引用。

```
String a[] = new String[1] 
```

在堆上创建用于保存一个字符串对象的内存并`a`指向分配的字符串对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T03:58:49.590

```
 if(a[0]!=null) 
```

第一个条件是尝试访问数组的第一个元素（并检查它是否存在）。如果数组不存在（即为空），这将不起作用。

```
 if(a!=null) 
```

第二个条件只是检查数组本身是否为空。

创建数组时，数组的内存被分配（在堆上）。那时您还必须指定它的大小（这将确切地确定分配了多少内存）。内存也用 null 初始化，所以你不会得到新数组的垃圾数据。

访问数组元素不仅仅是 C 中的指针运算，Java 实际上检查数组是否存在以及索引是否在其范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:58:17.990

在 Java 中，数组不像 C，它们是存在于堆中的对象，它们确实有一种特殊的类型和语法来访问它们的元素，但它们是对象，如果你想访问任何子索引，你需要做类似的事情

```
String[] a = new String[10]; 
```

之后，每个元素将根据数组的类型初始化为 null、0 或 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T03:59:43.220

数组是对象。你必须为他们创造新的空间。如果你试图访问一个空引用，你`NullPointerException`每次都会得到一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T04:02:20.410

如果您使用`a[0]`，您将访问一个对象（数组的第一个对象）。但`a`还没有任何对象。因此第一个抛出异常。但是在第二个中，您正在检查参考。它不是一个对象。所以`a`等于NULL。

# php - php API 将文件上传和下载到 Amazon S3

> ID：10344504
> 
> 赞同：4
> 
> 时间：2012-04-27T03:54:07.273
> 
> 标签：php, amazon-s3

我有一个托管在亚马逊上的网站。我希望我的客户能够将已经在他们亚马逊 s3 空间中的文件上传到我的 s3 空间。是否有任何支持此功能的 php API？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T03:56:10.570

亚马逊实际上[提供了一个](http://aws.amazon.com/sdkforphp/). 网上有很多使用它的例子。谷歌是你的朋友。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T05:28:06.327

亚马逊有一个[PHPSDK](http://aws.amazon.com/sdk-for-php/)，查看示例代码

```
// The sample code below demonstrates how Resource APIs work

$aws = new Aws($config);

// Get references to resource objects

$bucket = $aws->s3->bucket('my-bucket');

$object = $bucket->object('image/bird.jpg');

// Access resource attributes

echo $object['LastModified'];

// Call resource methods to take action

$object->delete();

$bucket->delete(); 
```

或者使用旧的 s3.php 将文件上传到 s3 存储桶。它是一个名为 s3.php 的单个 php 文件，您只需下载它并从您的代码中下载。更多阅读[这个](http://www.walkswithme.net/amazon-s3-file-upload-using-php-api)。

```
<?php

if (!class_exists('S3'))require_once('S3.php');
//AWS access info
if (!defined('awsAccessKey')) define('awsAccessKey', 'YourAccess S3 Key');
if (!defined('awsSecretKey')) define('awsSecretKey', 'Yor Secret Key');
//instantiate the class
$s3 = new S3(awsAccessKey, awsSecretKey);
$s3->putBucket("bucket name", S3::ACL_PRIVATE);

//move the file
if ($s3->putObjectFile("your file name in the server with path", "which bucket ur using (bucket name)", "fine name in s3 server", S3::ACL_PRIVATE)) {

//s3 upload success

}
?> 
```

# shell - 意外标记“完成”附近的 Shell 语法错误

> ID：10344508
> 
> 赞同：2
> 
> 时间：2012-04-27T03:55:22.513
> 
> 标签：shell, token

这个 shell 脚本应该将用户添加到系统中。新用户的详细信息在一个文件中。Shell 拒绝此脚本并显示以下消息：

```
syntax error near unexpected token 'done'. 
```

怎么了？

```
#!/bin/bash
#Purpose: Automatically add new users in a linux system based upon the data found within a text file
#         Assign encryped passwords to each user
#         Add users to groups or create new groups for these users
#         Report errors and successful operations where necessary in log files
#         post help options (echo)

#Root validation
if [[ $(id -u) -eq 0 ]]; then
  #Argument validation
  if [[ -z "$1" ]]; then
    echo "No arguments found!"
    echo "Please include a user detail text file as first argument"
    echo "Please include a report text file as second argument"
    echo "Please include an error report text file as the third argument"
    echo "Use the -h argument (i.e. ./script -h) for help"
  exit 1
fi

#Help validation and Help file
if [[ "$1" = "-h" ]]; then
  echo "This is the help information file"
  echo "This script is designed to add users to a linux system by reading information from a user detail file (such as userlist.txt)"
  echo "The format of this user detail text file is "username password groupname fullname" seperated using TAB spacing"
  echo "This script will read the first argument as the user detail file, the second and third arguments will be read as a success report file and error report file respectively"
  exit
fi

#Reads first argument as user detail file for data
cat userlist.txt | while read uname password gname fullname
#Reads /etc/passwd for Username
egrep -w "^$uname" /etc/passwd
#If Username is found then error reports
if [ $? == 0 ]; then
  echo "User Already Exists : Error adding user with username $uname;$gname;$fullname" >> Successes1.log
  exit 1
else
  #Reads /etc/group for Groupname
  egrep -w "^$gname" /etc/group
  #If Groupname is found then nothing
  if [ $? == 0 ]; then
    echo ""
  else
    #If Groupname not found then creates new group and reports
    groupadd "$gname"
    echo "Group Not Found: New Group $gname was created" >> Successes1.log
  fi
  #Retrieves Date
  createddate=$(date)
  #Perl password script takes input from Userlist
  pass=$(perl -e 'print crypt($ARGV[0], "Password")' "$password")
  #Adds Users with variables from userlist
  useradd "$uname" -g "$gname"  -c "$fullname" -p "$pass"
  #Reports information to successlist and errorlist report files
  if [ $? == 0 ]; then
    groupid=$(id -g $uname)
    userid=$(id -u $uname)
    echo "User Successfully Added: $uname;$userid;$gname;$groupid;$createddate;$fullname" >> Successes1.log
  else
    groupid=$(id -g $uname)
    userid=$(id -u $uname)
    echo "Useradd Error Occurred: $uname;$userid;$gname;$groupid;$createddate;$fullname" >> Errors1.log
    echo "Error: Must be root user to execute script"
    exit
  fi
done 
```

* * *

### 第二次尝试

使用答案中的一些想法，我想出了第二次尝试：

```
#!/bin/bash
#Purpose: Automatically add new users in a linux system based upon the data found within a text file
#         Assign encryped passwords to each user
#         Add users to groups or create new groups for these users
#         Report errors and successful operations where necessary in log files
#         post help options (echo)

#Root validation
if [[ $(id -u) -eq 0 ]]; then
  #Argument validation
  if [[ -z "$1" ]]; then
    echo "Usage: $0 usernames report errors" 1>&2
    echo "Please include a user detail text file as first argument"
    echo "Please include a report text file as second argument"
    echo "Please include an error report text file as the third argument"
    echo "Use the -h argument (i.e. ./script -h) for help"
    exit 1
  fi
fi

#Help validation and Help file
if [[ "$1" = "-h" ]]; then
  echo "This is the help information file"
  echo "This script is designed to add users to a linux system by reading information from a user detail file (such as userlist.txt)"
  echo "The format of this user detail text file is "username password groupname fullname" seperated using TAB spacing"
  echo "This script will read the first argument as the user detail file, the second and third arguments will be read as a success report file and error report file respectively"
  exit
fi

#Reads first argument as user detail file for data
cat jan.txt | while read uname password gname fullname; do
#Reads /etc/passwd for Username
 egrep -w "^$uname:" /etc/passwd >/dev/null 2>&1
#If Username is found then error reports
if [ $? == 0 ] 
then
  echo "User Already Exists : Error adding user with username $uname;$gname;$fullname" >> Errors1.log

else
  #Reads /etc/group for Groupname
  egrep -w "^$gname" /etc/group
  #If Groupname is found then nothing
if [ $? == 0 ]; then
    echo ""
else
  #If Groupname not found then creates new group and reports
  groupadd "$gname"
    echo "Group Not Found: New Group $gname was created" >> Successes1.log
done < $1
#Retrieves Date
createddate=$(date)
#Perl password script takes input from Userlist
pass=$(perl -e 'print crypt($ARGV[0], "Password")' "$password")
#Adds Users with variables from userlist
useradd "$uname" -g "$gname"  -c "$fullname" -p "$pass"
#Reports information to successlist and errorlist report files
if [ $? == 0 ]
then
  groupid=$(id -g $uname)
  userid=$(id -u $uname)
  echo "User Successfully Added: $uname;$userid;$gname;$groupid;$createddate;$fullname" >> Successes1.log
else
  groupid=$(id -g $uname)
  userid=$(id -u $uname)
  echo "Useradd Error Occurred: $uname;$userid;$gname;$groupid;$createddate;$fullname" >> Errors1.log
  echo "Error: Must be root user to execute script"
  exit 1
fi
fi
done 
```

这似乎也不能正常工作。现在怎么了？似乎显示参数并运行，但是没有添加用户或组，因此没有创建日志

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T06:17:46.163

`if`起始于：

```
if [ $? == 0 ]; then
  echo "User Already Exists : Error adding user with username ...
  exit 1
else 
```

以 the 结尾，`done`而不是`fi`所需的 that。

循环从`while`前面几行开始：

```
cat userlist.txt | while read uname password gname fullname 
```

缺少它的`do`（另一个错误）；如果存在，那么最后也需要`done`。有人忘记了压痕。（每层使用 2 个字符优于 0 或 1，但如果每层使用 4 个空格，则更容易跟踪层。）请注意，shell 暂时没有抱怨缺少`do`语法循环是：

```
while cmd1
      cmd2
      cmd3 ...
do 
```

就外壳而言，它仍在处理 list 中的命令`cmd1, cmd2, cmd3, ...`。

* * *

这是脚本的半缩进版本。`fi`脚本顶部也有一个缺失。

```
#!/bin/bash
#Purpose: Automatically add new users in a linux system based upon the data found within a text file
#         Assign encryped passwords to each user
#         Add users to groups or create new groups for these users
#         Report errors and successful operations where necessary in log files
#         post help options (echo)

#Root validation
if [[ $(id -u) -eq 0 ]]
then
    #Argument validation
    if [[ -z "$1" ]]
    then
        echo "No arguments found!"
        echo "Please include a user detail text file as first argument"
        echo "Please include a report text file as second argument"
        echo "Please include an error report text file as the third argument"
        echo "Use the -h argument (i.e. ./script -h) for help"
        exit 1
    fi
fi

#Help validation and Help file
if [[ "$1" = "-h" ]]
then
    echo "This is the help information file"
    echo "This script is designed to add users to a linux system by reading information from a user detail file (such as userlist.txt)"
    echo "The format of this user detail text file is "username password groupname fullname" seperated using TAB spacing"
    echo "This script will read the first argument as the user detail file, the second and third arguments will be read as a success report file and error report file respectively"
    exit
fi

#Reads first argument as user detail file for data
cat userlist.txt | while read uname password gname fullname
do
    #Reads /etc/passwd for Username
    egrep -w "^$uname" /etc/passwd
    #If Username is found then error reports
    if [ $? == 0 ]
    then
        echo "User Already Exists : Error adding user with username $uname;$gname;$fullname" >> Successes1.log
        exit 1
    else
        #Reads /etc/group for Groupname
        egrep -w "^$gname" /etc/group
        #If Groupname is found then nothing
        if [ $? == 0 ]
        then
            echo ""
        else
            #If Groupname not found then creates new group and reports
            groupadd "$gname"
            echo "Group Not Found: New Group $gname was created" >> Successes1.log
        fi
        #Retrieves Date
        createddate=$(date)
        #Perl password script takes input from Userlist
        pass=$(perl -e 'print crypt($ARGV[0], "Password")' $pass)
        #Adds Users with variables from userlist
        useradd "$uname" -g "$gname"  -c "$fullname" -p "$pass"
        #Reports information to successlist and errorlist report files
        if [ $? == 0 ]
        then
            groupid=$(id -g $uname)
            userid=$(id -u $uname)
            echo "User Successfully Added: $uname;$userid;$gname;$groupid;$createddate;$fullname" >> Successes1.log
        else
            groupid=$(id -g $uname)
            userid=$(id -u $uname)
            echo "Useradd Error Occurred: $uname;$userid;$gname;$groupid;$createddate;$fullname" >> Errors1.log
            echo "Error: Must be root user to execute script"
            exit
        fi
    fi
done 
```

* * *

还有很大的改进空间。如果用户不是 root，则应该退出 root 验证块；相反，这种情况发生在循环内部一英里处。您可以更好地检查参数的数量：`$#`为您提供参数的数量。如果我尝试过`yourscript.sh '' arg2 arg3`，您会声称没有参数，而实际上问题是`$1`存在但是一个空字符串。报告如何使用命令的标准约定类似于：

```
echo "Usage: $0 usernames report errors" 1>&2 
```

这会报告命令的名称和预期的参数。将`1>&2`消息发送到标准错误而不是标准输出。即便如此，这里的逻辑也有点奇怪。您检查用户是否是 root，然后才检查是否有参数。如果用户不是 root，则不检查参数。不完全明智，我提交。

我们可以讨论 UUOC（无用的 Cat）。实际上有一个奖项。我不认为这符合条件。但是，可以这样写：

```
while read uname password gname fullname
do
    ...
done < $1 
```

嗯...脚本应该采用指定用户的文件名参数，但`cat`采用固定文件名，而不是文件名参数！

同样，论点 2 和 3 也被刻意忽略；日志文件是硬编码的。

```
egrep -w "^$uname" /etc/passwd
#If Username is found then error reports
if [ $? == 0 ] 
```

这个片段可以通过几种方式改进：

```
if egrep -w "^$uname:" /etc/passwd >/dev/null 2>&1
then
    #If Username is found then error report 
```

这`egrep`直接测试命令的退出状态；它还可以防止新用户`roo`因为 user 而被视为已存在`root`。它将输出和错误输出发送到，`/dev/null`以便在用户确实存在时您不会看到任何内容。

找到用户名后最好不要退出；您至少可以尝试处理下一个条目。同样奇怪的是，用户存在的报告（终止处理）记录在`Successes1.log`而不是在`Errors1.log`; 它被视为错误。

组检查结构类似，应该进行类似的升级。

您将密码读入`$password`该`read`行；但是，在创建密码时，您有：

```
pass=$(perl -e 'print crypt($ARGV[0], "Password")' $pass) 
```

在第一个周期，`$pass`是空的（很可能）；你应该在`$password`最后使用双引号：

```
pass=$(perl -e 'print crypt($ARGV[0], "Password")' "$password") 
```

与`egrep`命令一样，您也可以`useradd`直接检查命令的状态。说是 tyro 的标志有点笼统`if [ $? == 0 ]`，但也不是太离谱。

脚本中的最后`exit`应该是`exit 1`指示错误退出。正如已经指出的，这前面是关于“你必须是 root”的评论，即使在顶部检查了 root 权限。

**警告**：我没有尝试运行脚本；我很容易错过一些问题。但是，它确实通过`sh -v -n`了，因此不会留下任何严重的句法错误。

一旦一个 shell 脚本在语法上是正确的，那么你通常使用`sh -x script`（或者，如果它需要参数，那么`sh -x script arg1 arg2 arg3 ...`）来调试它。这是执行跟踪模式。shell 或多或少地告诉你它在做什么。信息写入标准错误。如果您愿意，您甚至可以捕获输出以供以后审查：

```
sh -x script arg1 arg2 arg3 2>script-x.log 
```

该`2>script-x.log`符号将标准错误发送到文件`script-x.log`（选择您自己的有意义的名称；我经常使用`x`or`xxx`用于我不想保留的文件，但我也删除了这些文件而不必查看它们，因为我知道它们是一次性文件） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:01:38.423

"done" 应该与之前的 "do" 配对它不会在你的脚本的结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T06:01:14.890

您`while`缺少一个`do`：

```
cat userlist.txt | while read uname password gname fullname
do 
```

或者

```
cat userlist.txt | while read uname password gname fullname; do 
```

# iphone - 无法在我的 iPad 应用程序中为 rtf 编辑器添加 Omnigroup 框架

> ID：10344522
> 
> 赞同：0
> 
> 时间：2012-04-27T03:57:42.030
> 
> 标签：iphone, ipad, ios5

我一直在尝试将用于编辑 rtf 文件的omnigroup 框架添加到我的本地iPad 应用程序中。但我总是收到诸如 OmniBase/OmniBase.h 之类的错误，找不到 OmniFoundation/OmniFoundation.h 文件。

我尝试在项目目标的构建设置中使用不同的设置组合。但没有奏效。我正在使用 Xcode 版本 4.2.1、Mac OS X：10.7 和 IOS 5 Lion OS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T21:44:24.957

There's actually a lot of Xcode configuration involved in using the Omni frameworks. I recently went through the learning process myself and wrote a [lengthy tutorial](http://sandmoose.com/post/53903897669/how-to-use-ouieditableframe-with-the-omnigroup). My tutorial is centered around using `OUIEditableFrame` but it should be a good starting point for whatever part of the framework you're looking to use.

In a nutshell:

1.  Make sure you're including Omni's `Configuration` directory in your project.

2.  Add the required frameworks by adding the appropriate `.xcodeproj` files from Omni to your project. Many frameworks are dependent on other so all dependencies will need to be added.

3.  Add required libraries to the **Link Binary with Libraries** section of the **Build Phases** tab.

4.  Add required libraries to the **Target Dependencies** section of the **Build Phases** tab.

5.  Edit your Schema. Select **Build** and add the required libraries.

# java - 使用 .toCharArray() 加扰字符串

> ID：10344526
> 
> 赞同：0
> 
> 时间：2012-04-27T03:58:01.423
> 
> 标签：java

我的问题是我试图通过使用 Random() 和 .toCharArray() 将（例如）字符串“asdf”更改为“sdfa”。

如何不得到重复的随机数？

我认为我应该创建一个新的 Char 数组，以便在不更改原始数组的情况下随机存储 char，因为如果这样做，那么新字符串将被弄乱，如果这有任何意义的话。

我没有在这段代码中这样做，但这可能是另一种选择？？？

编辑：我已经把它变成了一个主类，这应该会更容易。谢谢你。

```
import java.util.Random;

public class Scramble {

public static void main(String[] args) {

            String str = "asdf";

            Random randomGenerator = new Random();

            int lengthOfStr = str.length();

            char[] chars = str.toCharArray();

            // do for length of str
            for (int i=0; i < lengthOfStr; i++)
            {

            int n = randomGenerator.nextInt(lengthOfStr);

            chars[i] = chars[n];

            String newStr = new String(chars);
            str = newStr;
            }

            System.out.println(str);            
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:05:42.373

查找[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)以了解如何正确随机打乱数组。（顺便说一句，该算法非常适合 Java 的随机数生成器如何为您提供随机数，并且不需要使您的随机数唯一。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:22:48.657

至于您的第一个问题，您可以通过使随机数生成器成为您的类的成员，而不是方法中的局部变量来避免（在很大程度上）重复的随机数。下面的代码应该生成一个相当随机分布的加扰词。您可以将它的长度归咎于缺少`shuffle`可用于原始数组的方法。根据您的需要进行调整：

```
public class Flipper {
   Random randomGenerator = new Random();

   public static void main(String[] args) {
      final String sample = "Hello World";

      final Flipper flipper = new Flipper();
      for (int i = 0; i < 100; i++) {
         System.out.println(flipper.scramble(sample));
      }
   }

   public String scramble(String str) {
      if (str == null)
         return null;

      char[] arr = str.toCharArray();
      List<Character> charList = new ArrayList<Character>(arr.length);
      for (final char c : arr) {
         charList.add(c);
      }

      Collections.shuffle(charList, randomGenerator);
      char[] converted = new char[charList.size()];
      for (int i = 0; i < charList.size(); i++) {
         converted[i] = charList.get(i).charValue();
      }

      return new String(converted);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T04:45:40.143

这是一个简单的 O(n) 持续时间顺序。该循环只有 3 条指令：它将随机字符附加到一个新字符串中，并将其从原始字符串中删除，因此当获得下一个随机字符时，之前获得的字符不符合条件。写完这个函数后，我注意到它似乎是 Fisher-Yates shuffle 算法的一种形式。

```
public class Scramble {

    public static String scramble(String str) {   
        StringBuilder newStringBuilder = new StringBuilder();
        StringBuilder stringBuilder = new StringBuilder(str);

        while (stringBuilder.length() > 0) {
            int n = (int)(Math.random() * stringBuilder.length()));
            newStringBuilder.append(stringBuilder.charAt(n));
            stringBuilder.deleteCharAt(n);
        }

        return newStringBuilder.toString();
    }

    public static void main(String[] args) {
        System.out.println(scramble("hola"));
    }
} 
```

# python - 对于 Python / Linux，最大线程限制实际上是一个不相关的问题吗？

> ID：10344529
> 
> 赞同：18
> 
> 时间：2012-04-27T03:58:24.260
> 
> 标签：python, multithreading, thread-safety, threadpool, python-multithreading

我正在处理的当前 Python 应用程序需要使用 1000 多个线程（Pythons 线程模块）。并不是说任何单个线程都以最大 cpu 周期工作，这只是我正在创建的 Web 服务器负载测试应用程序。IE 模拟 200 个 Firefox 客户端，它们都渴望进入 Web 服务器并下载小型 Web 组件，基本上模拟了在几秒而不是微秒内操作的人类。

因此，我正在阅读各种主题，例如“python 在 Linux/windows 上支持多少线程等，我看到了很多不同的答案。一位用户说这都是关于内存的，而 Linux 内核默认情况下只是搁置一边8Meg 用于线程，如果超过了，那么线程开始被内核杀死。

一个人说这对 CPython 来说不是问题，因为无论如何一次只有 1 个线程在运行（因为 GIL）所以我们可以指定大量线程？？？这件事的真相是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T04:08:22.837

1.  “由于 GIL，一次运行一个线程。” 嗯，有点。GIL 意味着一次只能有一个线程执行*Python*代码。但是，任何数量的线程都可能在执行 IO、各种其他系统调用或其他不包含 GIL 的代码。

    听起来您的线程将主要执行网络 I/O，并且任意数量的线程可以同时执行 I/O。1000 个线程的 GIL 竞争可能相当激烈，但您始终可以创建多个 Python 进程并在它们之间划分 I/O 线程（即，`fork`在开始之前几次）。

2.  “默认情况下，Linux 内核只为线程预留 8Meg。” 我不确定你是从哪里听到的。也许您实际听到的是“在 Linux 上，默认堆栈大小通常为 8 MiB”，这是真的。每个线程将使用 8 MiB 的地址空间用于堆栈（在 64 位上没有问题）以及用于附加内存映射和线程进程本身的内核资源。您可以使用库函数更改堆栈大小`threading.stack_size`，如果您有很多不进行深度调用的线程，这会有所帮助。

    ```
    >>> import threading
    >>> threading.stack_size()
    0 # platform default, probably 8 MiB
    >>> threading.stack_size(64*1024) # 64 KiB stack size for future threads 
    ```

3.  该线程中的其他人建议使用异步/非阻塞框架。好吧，你可以这样做。然而，在现代 Linux 内核上，多线程模型可以与异步 ( `select`/ `poll`/ `epoll`) I/O 多路复用技术竞争。重写代码以使用异步模型是一项非常重要的工作，因此只有在无法从线程模型中获得所需性能时，我才会这样做。如果您的线程真的在尝试模拟人类延迟（例如，大部分时间都在睡觉），那么在很多情况下异步方法实际上*更慢*。我不确定这是否适用于 Python，仅减少 GIL 争用就可能值得切换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T04:08:30.007

这两个都是部分正确的：

*   每个线程都有一个栈，如果你创建了足够多的线程，你可以用完栈的地址空间。

*   Python 也有一个叫做 GIL 的东西，它一次只允许一个 Python 线程运行。但是，一旦 Python 代码调用 C 代码，该 C 代码就可以在另一个 Python 线程运行时运行。但是，Python 中的线程仍然是物理的，并且仍然存在堆栈空间限制。

如果您计划拥有多个连接，而不是使用多个线程，请考虑使用异步设计。[Twisted](https://www.twistedmatrix.com/)在这里可能会很好用。

# css - CSS 在 IE8 中与 Linux/Apache2.0/PHP4 一起工作，但不适用于 Windows/IIS7/PHP5

> ID：10344530
> 
> 赞同：1
> 
> 时间：2012-04-27T03:58:26.787
> 
> 标签：css, internet-explorer-8

我刚刚从 linux/apache2.0/php4 web 服务器更改为 windows/iis7/php5 web 服务器（我只发布 php 版本，因为这是一个重大变化）。

我的 css 在 linux 上运行良好（http://66.119.8.165/flcunderconstruction.php），但在 windows 上运行不正常（http://66.119.8.236/flcunderconstruction.php）。

现在，这个问题似乎只适用于 Internet Explorer 8（可能更旧，但我没有测试这些）。Firefox 和 Internet Explorer 9 运行良好。

我想我已经排除了 php 问题，因为我创建了一个非 php 版本（http://66.119.8.236/flcunderconstruction.html）并且问题仍然存在。

我假设问题出在 css 中（它很大并且会引发很多验证错误）。但由于它只发生在 Windows 服务器和 ie8 上，我很犹豫是否要开始修改代码。

有任何想法吗？

JJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:03:34.383

损坏的版本在遇到 /include/html5.js 时会停止加载。您只能在 IE8 上看到这一点，因为以后的版本在没有 polyfill 的情况下可以很好地处理 HTML5 内容。

*   缺少：http: [//66.119.8.236/include/html5.js](http://66.119.8.236/include/html5.js)
*   现在：http: [//66.119.8.165/include/html5.js](http://66.119.8.165/include/html5.js)

要对此进行测试，请按 F12 打开开发者工具。将浏览器模式切换到 IE8。跳转到您的网络选项卡，然后按“开始捕获”。执行硬刷新 (CTRL+F5)，并观察文件开始加载。当它到达 HTML5 polyfill 时，您会注意到 404。（下图）

使用[Fiddler2](http://fiddler2.com/fiddler2/)，我设置了 Auto Responder 以自动从我的本地计算机添加 HTML5 文件来代替您丢失的文件。刷新请求会导致整个站点按 IE8 中的预期加载。将你的 polyfill 放在另一台服务器上，你应该已经设置好了。

![在此处输入图像描述](../Images/7f689b9d5bb5a798338abf5e986ba7bf.png)

# asp.net - 两个模型还是一个视图？

> ID：10344537
> 
> 赞同：1
> 
> 时间：2012-04-27T03:59:24.557
> 
> 标签：asp.net, asp.net-mvc-3

我想在一个视图中使用两个模型。这是我的代码：

```
public class Users {
   public int id { get; set; }
   public string adSoyad { get; set; }
   public string email { get; set; }
   public int puan { get; set; }
}
public class admin {
   public int id { get; set; }
   public string name { get; set; }
}

public class mainmodel {
   public Users Users { get; set; }
   public admin admin { get; set; }
} 
```

我可以使用它来删除、编辑和创建视图。但我的索引视图中出现错误：

```
@model IEnumerable<donemProje.Models.mainmodel> 
```

我能做些什么？

编辑——我在索引视图中尝试这个

```
@model donemProje.Models.mainmodel

@foreach (var item in Model.Users)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem =>item.adSoyad)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.email) 
```

并得到这个错误

编译器错误消息：CS1579：foreach 语句无法对“donemProje.Models.Users”类型的变量进行操作，因为“donemProje.Models.Users”不包含“GetEnumerator”的公共定义

诠释这一行

第 34 行：`@foreach (var item in Model.Users)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:34:55.747

`@model IEnumrable` or you tried `@model IeEnumrable<mainmodel>` ? if you tried `@model IEnumrable<mainmodel>` than mainmodel have list of users and admin in it. but what i understand from your question i think the below words will help you.

You can try `@model mainmodel` and you can iterate through mainmodel using foreach loop.

```
foreach(var user in Model.Users)
{
  // you code goes here..
} 
```

and same thing for the admin if want to iterate through admin. else just use `@Model.Admin.id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:00:31.243

您在视图中的模型应该是 @model mainmodel

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T06:16:24.247

如果要在一个视图中使用两个模型，则应使用 ViewModels（由视图中使用的其他类组成的类）

# javascript - 创建桌面快捷方式

> ID：10344544
> 
> 赞同：1
> 
> 时间：2012-04-27T04:00:51.833
> 
> 标签：javascript, jquery

我有一个客户希望允许访问者将他的网站的快捷方式添加到他们的桌面。因此，您单击一个链接，它会创建快捷方式。我从来没有听说过这样的事情，也无法通过搜索真正找到任何东西。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T04:03:29.047

如果您可以使用 javascript 在您的用户机器上随意编写文件，那么这将是一个巨大的安全问题。简短的回答是它不能完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T04:04:33.323

他们可以将它从 url 栏拖到他们的桌面，然后它会创建一个链接……至少在 Mac 上是这样！

# android - 如何在android中使用大型数据库绘制地图？

> ID：10344547
> 
> 赞同：0
> 
> 时间：2012-04-27T04:01:18.483
> 
> 标签：android, database, animation, canvas, map

我正在尝试绘制地图（但不使用谷歌地图）并用它制作动画（如缩放、滚动旋转、过渡......）。它适用于小型数据库非常流畅，但是当我使用大型数据库（大约 15000 个点和线）进行测试时，开始一个小活动（如缩放）需要超过几分钟的时间......在代码中，我绘制了所有映射到画布类型，然后使用矩阵和线程制作动画。我想问是否有其他方法可以使它更快。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:08:39.450

当用户开始缩放时，将您的地图转换为位图并缩放一张图像而不是数千个对象。另外最好不要绘制不可见的（对于用户）对象

# c# - PredicateBuilder 可重用的 DateTime 谓词设置器

> ID：10344551
> 
> 赞同：3
> 
> 时间：2012-04-27T04:01:51.047
> 
> 标签：c#, predicatebuilder

我正在使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)生成动态搜索子句。在下面的示例代码中，有没有一种方法可以修改`SetDateTimePredicate`，以便将其用于任何`DateTime`属性`SomeType`？

```
Expression<Func<SomeType, bool>> somePredicate = null;
somePredicate = somePredicate.Or(
    SetDateTimePredicate(comparisonOperator, dateTime1, dateTime2));

private Expression<Func<SomeType, bool>> SetDateTimePredicate(
    Enums.ComparisonOperator comparison,
    DateTime dateTime1,
    DateTime dateTime2)
{
    switch (comparison)
    {
        case Enums.ComparisonOperator.IsLessThan:
            return p => p.SomeDateProperty < dateTime1;
        case Enums.ComparisonOperator.IsLessThanOrEqualTo:
            return p => p.SomeDateProperty <= dateTime1;
        case Enums.ComparisonOperator.IsGreaterThan:
            return p => p.SomeDateProperty  > dateTime1;
        case Enums.ComparisonOperator.IsGreaterThanOrEqualTo:
            return p => p.SomeDateProperty >= dateTime1;
        case Enums.ComparisonOperator.IsBetween:
            return p => p.SomeDateProperty >= dateTime1 
                     && p.SomeDateProperty <= dateTime2;
        default:
            return p => p.SomeDateProperty == dateTime1;
    }
} 
```

我尝试了一种扩展方法，但得到了这个错误：

```
System.NotSupportedException occurred
Message="Method 'Boolean Compare(System.DateTime, ComparisonOperator, System.DateTime, System.DateTime)' has no supported translation to SQL." 
```

扩展方法：

```
public static bool Compare(
    this DateTime dateToCompare,
    Enums.ComparisonOperator comparison,
    DateTime dateTime1,
    DateTime dateTime2)
{
    switch (comparison)
    {
        case Enums.ComparisonOperator.IsLessThan:
            return dateToCompare < dateTime1;
        case Enums.ComparisonOperator.IsLessThanOrEqualTo:
            return dateToCompare <= dateTime1;
        case Enums.ComparisonOperator.IsGreaterThan:
            return dateToCompare > dateTime1;
        case Enums.ComparisonOperator.IsGreaterThanOrEqualTo:
            return dateToCompare >= dateTime1;
        case Enums.ComparisonOperator.IsBetween:
            return dateToCompare >= dateTime1
                && dateToCompare <= dateTime2;
        default:
            return dateToCompare == dateTime1;
    }
} 
```

带有扩展方法的示例：

```
somePredicate = somePredicate.Or(
    p => p.SomeDateProperty.Compare(comparisonOperator, dateTime1, dateTime2)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:40:38.620

下面是一个通用解决方案，可用于定义了比较运算符的任何类型，而不仅仅是 DateTime。我在 Enum.ComparisionOperator 类型上创建了方法、扩展方法。它会像这样使用：

```
Expression<Func<SomeType, bool>> somePredicate = comparisonOperator.Compare(
    (SomeType p) => p.SomeDateProperty, dateTime1, dateTime2)); 
```

方法定义为：

```
public static Expression<Func<TSource, bool>> Compare<TSource, TValue>(
    this Enums.ComparisonOperator comparison,
    Expression<Func<TSource, TValue>> source,
    TValue value1, TValue value2)
{
    var value1Expr = Expression.Constant(value1);
    var value2Expr = Expression.Constant(value2);
    var newExpr = comparison.CompareExpr(source.Body, value1Expr, value2Expr);
    return Expression.Lambda<Func<TSource, bool>>(newExpr, source.Parameters);
}
public static Expression CompareExpr(
    this Enums.ComparisonOperator comparison,
    Expression exprLeft,
    Expression exprRight1, Expression exprRight2)
{
    switch (comparison)
    {
        case Enums.ComparisonOperator.IsLessThan:
            return Expression.LessThan(exprLeft, exprRight1);
        case Enums.ComparisonOperator.IsLessThanOrEqualTo:
            return Expression.LessThanOrEqual(exprLeft, exprRight1);
        case Enums.ComparisonOperator.IsGreaterThan:
            return Expression.GreaterThan(exprLeft, exprRight1);
        case Enums.ComparisonOperator.IsGreaterThanOrEqualTo:
            return Expression.GreaterThanOrEqual(exprLeft, exprRight1);
        case Enums.ComparisonOperator.IsBetween:
            return Expression.AndAlso(
                Expression.GreaterThanOrEqual(exprLeft, exprRight1),
                Expression.LessThanOrEqual(exprLeft, exprRight2));
        default:
            return Expression.Equal(exprLeft, exprRight1);
    }
} 
```

编辑：我将上面的方法更改为通用的。

# sql - 如何查询 SQL Server XML 列中的值

> ID：10344553
> 
> 赞同：140
> 
> 时间：2012-04-27T04:02:04.440
> 
> 标签：sql, sql-server, xml, xquery

我将以下 XML 存储在`Roles`SQL Server 数据库的 XML 列（称为 ）中。

```
<root>
   <role>Alpha</role>
   <role>Beta</role>
   <role>Gamma</role>
</root> 
```

我想列出所有在其中具有特定角色的行。这个角色通过参数传递。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2012-04-27T04:09:43.577

```
select
  Roles
from
  MyTable
where
  Roles.value('(/root/role)[1]', 'varchar(max)') like 'StringToSearchFor' 
```

如果您的列不是`XML`，则需要对其进行转换。您还可以使用其他语法来查询 XML 数据的某些属性。这是一个例子......

假设数据列有这个：

```
<Utilities.CodeSystems.CodeSystemCodes iid="107" CodeSystem="2" Code="0001F" CodeTags="-19-"..../> 
```

...而您只想要那些`CodeSystem = 2`您的查询将是：

```
select 
  [data] 
from
  [dbo].[CodeSystemCodes_data]

where
  CAST([data] as XML).value('(/Utilities.CodeSystems.CodeSystemCodes/@CodeSystem)[1]', 'varchar(max)') = '2' 
```

这些页面将向您展示有关如何在 T-SQL 中查询 XML 的更多信息：

[使用 t-sql 查询 XML 字段](http://www.brokenwire.net/bw/Programming/125/querying-xml-fields-using-t-sql)

[在 SQL Server 中展平 XML 数据](http://blogs.msdn.com/b/simonince/archive/2009/04/24/flattening-xml-data-in-sql-server.aspx)

**编辑**

在玩了一点之后，我最终得到了这个使用[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156.aspx)的惊人查询。这将搜索每一行（角色）以查找您在 like 表达式中输入的值...

鉴于此表结构：

```
create table MyTable (Roles XML)

insert into MyTable values
('<root>
   <role>Alpha</role>
   <role>Gamma</role>
   <role>Beta</role>
</root>') 
```

我们可以这样查询：

```
select * from 

(select 
       pref.value('(text())[1]', 'varchar(32)') as RoleName
from 
       MyTable CROSS APPLY

       Roles.nodes('/root/role') AS Roles(pref)
)  as Result

where RoleName like '%ga%' 
```

您可以在此处查看 SQL Fiddle：[http ://sqlfiddle.com/#!18/dc4d2/1/0](http://sqlfiddle.com/#!18/dc4d2/1/0)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-27T05:42:18.137

```
declare @T table(Roles xml)

insert into @T values
('<root>
   <role>Alpha</role>
   <role>Beta</role>
   <role>Gamma</role>
</root>')

declare @Role varchar(10)

set @Role = 'Beta'

select Roles
from @T
where Roles.exist('/root/role/text()[. = sql:variable("@Role")]') = 1 
```

如果您希望查询`where col like '%Beta%'`可以使用`contains`

```
declare @T table(Roles xml)

insert into @T values
('<root>
   <role>Alpha</role>
   <role>Beta</role>
   <role>Gamma</role>
</root>')

declare @Role varchar(10)

set @Role = 'et'

select Roles
from @T
where Roles.exist('/root/role/text()[contains(., sql:variable("@Role"))]') = 1 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-27T04:05:49.243

如果您的字段名称是 Roles 并且表名称是 table1 您可以使用以下搜索

```
DECLARE @Role varchar(50);
SELECT * FROM table1
WHERE Roles.exist ('/root/role = sql:variable("@Role")') = 1 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-10-04T19:12:58.227

我想出了一个简单的解决方法，它也很容易记住:-)

```
select * from  
(select cast (xmlCol as varchar(max)) texty
 from myTable (NOLOCK) 
) a 
where texty like '%MySearchText%' 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-08T23:06:54.053

您可以执行以下操作

```
declare @role varchar(100) = 'Alpha'
select * from xmltable where convert(varchar(max),xmlfield) like '%<role>'+@role+'</role>%' 
```

显然，这有点小技巧，我不建议将它用于任何正式的解决方案。但是，我发现在 SQL Server Management Studio for SQL Server 2012 中对 XML 列进行即席查询时，这种技术非常有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-18T15:29:08.753

有用的提示。查询 SQL Server XML 列中的值（带有命名空间的 XML）

例如

```
Table [dbo].[Log_XML] contains columns Parametrs (xml),TimeEdit (datetime) 
```

例如参数中的 XML：

```
<ns0:Record xmlns:ns0="http://Integration"> 
<MATERIAL>10</MATERIAL> 
<BATCH>A1</BATCH> 
</ns0:Record> 
```

例如查询：

```
select
 Parametrs,TimeEdit
from
 [dbo].[Log_XML]
where
 Parametrs.value('(//*:Record/BATCH)[1]', 'varchar(max)') like '%A1%'
 ORDER BY TimeEdit DESC 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-07T11:44:49.480

我使用下面的语句来检索 Sql 表中 XML 中的值

```
with xmlnamespaces(default 'http://test.com/2008/06/23/HL.OnlineContract.ValueObjects')
select * from (
select
            OnlineContractID,
            DistributorID,
            SponsorID,
    [RequestXML].value(N'/OnlineContractDS[1]/Properties[1]/Name[1]', 'nvarchar(30)') as [Name]
   ,[RequestXML].value(N'/OnlineContractDS[1]/Properties[1]/Value[1]', 'nvarchar(30)') as [Value]
     ,[RequestXML].value(N'/OnlineContractDS[1]/Locale[1]', 'nvarchar(30)') as [Locale]
from [OnlineContract]) as olc
where olc.Name like '%EMAIL%' and olc.Value like '%EMAIL%' and olc.Locale='UK EN' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-10T08:59:59.277

您可以查询整个标签，也可以只查询特定值。在这里，我对 xml 命名空间使用通配符。

```
declare @myDoc xml
set @myDoc = 
'<Root xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://stackoverflow.com">
    <Child>my value</Child>
 </Root>'

select @myDoc.query('/*:Root/*:Child') -- whole tag
select @myDoc.value('(/*:Root/*:Child)[1]', 'varchar(255)') -- only value 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-03T18:08:48.960

如果您想查找“Alpha”之外的其他节点，查询应该是这样的：

`select Roles from MyTable where Roles.exist('(/*:root/*:role[contains(.,"Beta")])') = 1`

# iphone - 从 NSMuableDictionary 提取数据到 NSString 并解决字符串问题

> ID：10344554
> 
> 赞同：0
> 
> 时间：2012-04-27T04:02:05.913
> 
> 标签：iphone, ios, variable-assignment, nsmutabledictionary

我从 NSMuableDictionary 中提取数据到 NSString 并尝试像这样对 String 进行比较：

```
 NSDictionary *error = [[NSDictionary alloc]init];
   NSString *errorCode = [[NSString alloc]init];
   error = [sing.globalCallsDitionary valueForKey:@"Error"];
   NSLog(@"error code %@",[error valueForKey:@"error_code"]);
   errorCode = [error valueForKey:@"error_code"];
   if ([errorCode isEqualToString:@"-1"]) { 
```

当执行 if 语句时，我得到这个关于数组的错误，错误如下所示：

```
2012-04-27 06:34:49.686 CallBiz[10319:707] error code (
    "-1"
)
2012-04-27 06:35:00.602 CallBiz[10319:707] -[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x16fc10
2012-04-27 06:35:00.608 CallBiz[10319:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x16fc10'
*** First throw call stack:
(0x3541f88f 0x36846259 0x35422a9b 0x35421915 0x3537c650 0xb2a3 0x353793fd 0x32458faf 0x32458f6b 0x32458f49 0x32458cb9 0x324595f1 0x32457ad3 0x324574c1 0x3243d83d 0x3243d0e3 0x3667222b 0x353f3523 0x353f34c5 0x353f2313 0x353754a5 0x3537536d 0x36671439 0x3246be7d 0x2e61 0x28fc)
terminate called throwing an exception 
```

就像 xCode 看着我`NSString *errorCode = [[NSString alloc]init];`的一样`NSArray`，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:09:00.683

发生错误是因为您的 errorCode 作为数组而不是字符串出现。如果您确定只有 1 个对象来到这里，那么您可以使用 -

```
if ([[errorCode objectAtIndex:0] isEqualToString:@"-1"]) 
```

它会工作，尽管它会通过一个警告，因为 errorCode 被定义为一个字符串对象。所以你需要确定你得到了什么样的数据作为响应，然后适当地定义数据结构。

# python - 在python中计时排序算法

> ID：10344556
> 
> 赞同：2
> 
> 时间：2012-04-27T04:02:09.197
> 
> 标签：python

我想做的是使用排序算法对特定数组进行计时。到目前为止，我所做的似乎只是两个数组增量之间的时间；但是我希望它继续增加时间：

```
Example
n    time
500  0.0002
1000 0.0004
1500 0.0006 
```

我所拥有的几乎相同的时间间隔：

```
n    time
500  0.00017
1000 0.00015
1500 0.00018 
```

我的编码部分是

```
if sortfunction==1:
        array=x[increment-1:n:increment]
        for my in array:
            ff=sort_timehelp(x,quick_sort)
            print "%d\t %f" %(my, ff) 
```

我认为 for 循环函数有问题。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:04:22.793

你可能想看看[`timeit`](http://docs.python.org/library/timeit.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:52:55.653

要累积时间，请将*ff*变量从零开始，并在循环的迭代中添加新的计时：

```
if sortfunction==1:
        ff = 0.0
        array=x[increment-1:n:increment]
        for my in array:
            ff += sort_timehelp(x,quick_sort)
            print "%d\t %f" %(my, ff) 
```

# mysql - sql: Char() 的反向函数

> ID：10344565
> 
> 赞同：4
> 
> 时间：2012-04-27T04:03:38.020
> 
> 标签：mysql, sql, function

在 SQL 中，char() 将整数转换为字符（例如，char(101) 返回 'e'）。char() 的反向函数是什么（例如，将 'e' 转换为 101）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T04:14:18.330

[`ORD()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_ord)或[`ASCII()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_ascii)，尽管它们并不是严格意义上的反转，因为它们只会处理传入的字符串的第一个字符，而[`CHAR()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_char)可以从数字列表中构建一个字符串。

根据[Michael Buen 的回答](https://stackoverflow.com/a/10344688/8331)，值得注意的`ORD()`是 MySql-only，而`ASCII()`得到更广泛的支持，但不处理多字节字符。

```
mysql> SELECT CHAR(104), ASCII('h'), ORD('h');
+-----------+------------+----------+
| CHAR(104) | ASCII('h') | ORD('h') |
+-----------+------------+----------+
| h         |        104 |      104 |
+-----------+------------+----------+ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T04:21:49.710

我正要支持 BluesRockAddict 的答案，但他删除了他的答案，但这是最好的答案，ASCII 适用于许多平台，例如 SQL Server、Oracle、Postgresql，当然还有 MySQL

```
SELECT ASCII('e') 
```

ORD 仅适用于 MySQL

[http://www.sqlfiddle.com/](http://www.sqlfiddle.com/)

# c# - 使用 DI 绑定循环连接字符串构造函数参数

> ID：10344568
> 
> 赞同：1
> 
> 时间：2012-04-27T04:04:19.107
> 
> 标签：c#, dependency-injection, ninject

我正在寻找有关如何最好地绑定在我的依赖项中重复出现的几个连接字符串的建议。

目前我有（使用ninject）：

```
Bind<IFoo>().To<SqlFoo>()
.WithConstructorArgument("db1ConnStr", db1ConnectionString)
.WithConstructorArgument("db2ConnStr", db2ConnectionString);

Bind<IBar>().To<SqlBar>()
.WithConstructorArgument("db1ConnStr", db1ConnectionString)
.WithConstructorArgument("db2ConnStr", db2ConnectionString); 
```

等等

这显然不是最优雅的代码。

有没有办法将 db1ConnectionString 的值绑定到每个名为“db1ConnStr”的字符串构造函数参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:55:20.790

我将创建一个包含连接字符串的类：

```
public class ConnectionStringProvider
{
    public string Db1ConnectionString { get; set; }
    public string Db2ConnectionString { get; set; }
} 
```

注意：如果需要，您也可以为其创建接口`IConnectionStringProvider`。

然后类`SqlFoo`可以`SqlBar`将其用作依赖项

```
public class SqlFoo
{
    public SqlFoo(ConnectionStringProvider connectionStringProvider)
    {
         //do something with connectionStringProvider.Db1ConnectionString 
    }
} 
```

注册看起来像这样：

```
Bind<ConnectionStringProvider>().ToConstant(
    new ConnectionStringProvider
    {
        Db1ConnectionString = db1ConnectionString,
        Db2ConnectionString = db2ConnectionString,
    });
Bind<IFoo>().To<SqlFoo>();
Bind<IBar>().To<SqlBar>(); 
```

# android - Android-如何为所有手机设备或大多数手机开发应用程序概念和技术

> ID：10344575
> 
> 赞同：1
> 
> 时间：2012-04-27T04:05:21.903
> 
> 标签：android

Android-如何为所有手机设备（不同屏幕尺寸）或大多数手机开发应用程序概念和技术

我已经根据我的手机屏幕尺寸（三星银河王牌）创建了应用程序，但我创建了所有适合它的背景图像尺寸..我不知道会发生什么它安装在任何其他手机中..确保它会变形..所以请帮助我修改我的应用程序以与大多数设计兼容。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:13:53.370

您可以在“res”下创建一个文件夹，并创建“layout-small”、“layout-medium”等文件夹以提供多种背景。 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# iphone - 与嵌入式表格视图相同的视图中的 XCode 标签将不会显示

> ID：10344576
> 
> 赞同：1
> 
> 时间：2012-04-27T04:05:42.510
> 
> 标签：iphone, xcode, label

我有一个包含嵌入式表和标签的视图。调用 Web 服务，标签应显示调用的值。该调用返回适当的字符串，但标签拒绝设置任何内容。即使是硬编码的字符串也不起作用。

这是我在标题中声明的内容：

```
@property (retain, nonatomic) IBOutlet UILabel *textLabel; 
```

这是我在 viewDidLoad 中的实现...（已经合成 textLabel）：

```
textLabel.text = @"For the love of God PLEASE display!!";
//also tried with self.textLabel.text.... but that shouldn't matter... right?
//also tried the following line to no avail:
//[self.textLabel setText:@"This didnt work either"]; 
```

我曾尝试将标签放在与桌子相同的容器中，但这也不起作用。标签显示的唯一情况是我在界面生成器中设置了值。

我觉得这可能是由于一些与在我的 UIview 中嵌入表格视图相关的 UI 绘画/刷新问题。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:32:52.737

Why dont you try this and check

```
 textLabel.text = [NSString stringWithFormat:@"%@", yourStringFromWebCall]; 
```

or

```
 textLabel.text = [NSString stringWithString:@"%@", yourStringFromWebCall]; 
```

Also check once whether you have connected the IBOutlet in the nib file to the label... May be that is the issue here

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:13:30.643

So I found a solution... I knew the table cells were getting filled in with the proper values just fine, so I set the

```
[textLabel setText:webServiceText] 
```

just before the return for the following method:

```
- (UITableViewCell *)tableView cellForRowAtIndexPath:(NSIndexPath *) indexPath 
```

And voila! It works now! I still find it incredibly strange that it wouldn't work before with all the other places I tried, so if anyone has explanations, I'd love to hear them!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:45:02.260

您的 IBOutlet 设置不正确。尝试从 xib 中删除您的标签并添加一个新标签。

再次连接您的 IBOutlet。

```
@property (retain, nonatomic) IBOutlet UILabel *textLabel; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T04:09:33.413

您是否在调用 Web 服务以更改标签后重新加载表？

# php - 使用 xampp localhost 发送电子邮件

> ID：10344580
> 
> 赞同：-1
> 
> 时间：2012-04-27T04:05:51.953
> 
> 标签：php, email, smtp, xampp

请帮助我使用 php 发送电子邮件，我通过谷歌搜索，发现我需要重新配置/编辑我的 php.ini 并更改 SMTP 值和 smtp_port，

我不知道我将在这些线路上放什么。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T04:08:55.180

[使用这样](http://deepakssn.blogspot.com/2006/06/gmail-php-send-email-using-php-with.html)的 phpmailer 脚本会容易得多，但您也可以通过设置： smtp_ssl = ssl 并配置 sendmail.ini 以便它与您的 @gmail.com 帐户凭据连接，否则它会无法连接。

# android - 在网络服务器上显示纬度和经度

> ID：10344583
> 
> 赞同：-1
> 
> 时间：2012-04-27T04:07:12.587
> 
> 标签：android, web-services, http, latitude-longitude

几天以来，我一直在尝试显示与 Web 服务器协调的 gps，但尚未得出任何结论。我想做的是获取一个人的纬度和经度，然后将它们显示在网络服务器上。我有一个 php 服务器和 mysql 数据库。**没有错误，但 url 上没有显示任何内容**

```
public class UseGps extends Activity 

{ 

/** Called when the activity is first created. */ 

@Override 

public void onCreate(Bundle savedInstanceState) 

{ 

super.onCreate(savedInstanceState); 

setContentView(R.layout.main); 

/* Use the LocationManager class to obtain GPS locations */ 

LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 

LocationListener mlocListener = new MyLocationListener(); 

mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 

} 

/* Class My Location Listener */ 

public class MyLocationListener implements LocationListener 

{ 
 Context context;
 public void onLocationChanged(Location loc) 

{ 

double latitude = loc.getLatitude(); 

double longitude = loc.getLongitude(); 
Toast.makeText(context, "Latitude:" +latitude + "Longitude:" +longitude, 5000).show();
TelephonyManager telephonyManager =    (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
String Devid = telephonyManager.getDeviceId();

//this is JSON part to put your information inside it
String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"Devid\":\""+Devid+"\",\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\"}}";

Uri uri = Uri.parse("http://location.site88.net/store.php"); 
Intent intent = new Intent(Intent.ACTION_VIEW, uri); 
startActivity(intent); 
String url="http://location.site88.net/storeg.php"; 

DefaultHttpClient httpClient = new DefaultHttpClient(); 
HttpPost httpPost = new HttpPost(url); 

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
nameValuePairs.add(new BasicNameValuePair("Devid", Devid));
nameValuePairs.add(new BasicNameValuePair("latitude", Double.toString(latitude) )); 
nameValuePairs.add(new BasicNameValuePair("longitude", Double.toString(longitude))); 

try {
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
} catch (UnsupportedEncodingException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
HttpResponse httpResponse = null;
String result = null;
try {
    httpResponse = httpClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();
    if (httpEntity != null) {
        InputStream instream = null;
        instream = httpEntity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(instream,"iso-8859-1"),8); 
        StringBuilder sb = new StringBuilder(); 
        String line = null; 
        while ((line = reader.readLine()) != null) { 
            sb.append(line + "\n"); 
            Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show(); 
        } 
         instream.close();
              result=sb.toString(); 
      }
} catch (ClientProtocolException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
}
public void onProviderDisabled(String provider) {
// TODO Auto-generated method stub

}
public void onProviderEnabled(String provider) {
// TODO Auto-generated method stub

}
public void onStatusChanged(String provider, int status, Bundle extras) {
// TODO Auto-generated method stub

  }}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:25:28.197

采用

```
nameValuePairs.add(new BasicNameValuePair("latitude", Double.toString(latitude) )); 
nameValuePairs.add(new BasicNameValuePair("longitude", Double.toString(longitude))); 
nameValuePairs.add(new BasicNameValuePair("devid", devid)); 
try {
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
} catch (UnsupportedEncodingException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
HttpResponse httpResponse = null;
try {
    httpResponse = httpClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();
    if (httpEntity != null) {
        InputStream instream = null;
        instream = httpEntity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(instream,"iso-8859-1"),8); 
        StringBuilder sb = new StringBuilder(); 
        String line = null; 
        while ((line = reader.readLine()) != null) { 
            sb.append(line + "\n"); 
            Toast.makeText(getApplicationContext(), "pass", Toast.LENGTH_SHORT).show(); 
        } 
         instream.close();
              result=sb.toString(); 
      }
} catch (ClientProtocolException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

代替

```
HttpResponse Response = httpClient.execute(httpPost); 
InputStream httpEntity = httpResponse.getEntity().getContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:16:14.810

使用这个在真实设备上工作。

```
public class GpslocationActivity extends Activity implements LocationListener{

private TextView latituteField;
private TextView longitudeField;
private LocationManager locationManager;
private String provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    latituteField = (TextView) findViewById(R.id.TextViewLatitudereply);
    longitudeField = (TextView) findViewById(R.id.TextViewLongitutereply);

    // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
    } else {
        latituteField.setText("Provider not available");
        longitudeField.setText("Provider not available");
    }
}

/* Request updates at startup */
@Override
protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
}

/* Remove the locationlistener updates when Activity is paused */
@Override
protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
}

@Override
public void onLocationChanged(Location location) {
    int lat = (int) (location.getLatitude());
    int lng = (int) (location.getLongitude());
    latituteField.setText(String.valueOf(lat));
    longitudeField.setText(String.valueOf(lng));
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    Toast.makeText(this, "Enabled new provider " + provider,Toast.LENGTH_SHORT).show();

}

@Override
public void onProviderDisabled(String provider) {
    Toast.makeText(this, "Disabled provider " + provider,Toast.LENGTH_SHORT).show();
}
} 
```

不要忘记给予许可

```
 <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

# asp.net - ASP.NET 自定义验证器和验证摘要未出现错误消息，但仍在网格视图中触发验证

> ID：10344586
> 
> 赞同：0
> 
> 时间：2012-04-27T04:07:54.163
> 
> 标签：asp.net, customvalidator, validationsummary

我遇到了一个问题，我在 gridview 的每一行上都有一个自定义验证器，并且在 gridview 所在的面板底部有一个摘要。

自定义验证器在应该时触发，我设置 args.IsValid=false 并分配适当的错误消息，但在我的屏幕上我看不到自定义验证器的文本或摘要中的 errorMessage。事实上，我根本看不到我的摘要。

我已经看过了，但我不明白为什么会发生这种情况，因为我在其他地方使用了几乎相同的设置并且效果很好。

标记：

```
<asp:GridView ID="gvConsolidatedPeriods" runat="server" OnRowDataBound="gvConsolidatedPeriods_OnRowDataBound" SkinID="alternativeRows"
                    AutoGenerateColumns="false" Width="99%" OnDataBound="gvConsolidatedPeriods_OnDataBound" OnRowEditing="gvConsolidatedPeriods_OnRowEditing"
                    OnRowCancelingEdit="gvConsolidatedPeriods_OnRowCancellingEdit" OnRowDeleting="gvConsolidatedPeriods_OnRowDeleting" ValidationGroup="ConsolidatedPeriodValidationGroup">
                   <Columns>
                        <asp:TemplateField HeaderText="Period">
                            <HeaderStyle Font-Bold="True" HorizontalAlign="Left" Width="250px" />
                            <ItemStyle HorizontalAlign="Left" Width="250px" />
                            <ItemTemplate>
                                <asp:Label ID="lblPeriod" runat="server" />
                            </ItemTemplate>
                            <EditItemTemplate>
                                <asp:HiddenField ID="hdPeriodId" runat="server" />
                                <asp:Label ID="lblPeriod" runat="server" Visible="false"/>
                                <asp:TextBox ID="txtFromDate" runat="server" CssClass="datepicker" Visible="false"/>
                                <br /> 
                                <asp:Label ID="lblTo" runat="server" Visible="false" Text=" to " CssClass="label" />
                                <br />
                                <asp:TextBox ID="txtEndDate" runat="server" CssClass="datepicker" Visible="false"></asp:TextBox>
                                &nbsp;&nbsp;&nbsp;&nbsp;abc
                                <asp:CustomValidator ID="cvConsolidatedPeriodDates" runat="server" ValidationGroup="ConsolidatedPeriodValidationGroup" Text="*"
                                    SetFocusOnError="True" ErrorMessage="" OnServerValidate="cvConsolidatedPeriodDates_OnServerValidate" ValidateEmptyText="true" Visible="true" Style=""/>s
                            </EditItemTemplate>
                        </asp:TemplateField> 
```

...

服务器验证代码：

```
 var rowToSave = gvConsolidatedPeriods.Rows[gvConsolidatedPeriods.EditIndex];
        if (rowToSave != null)
        {
            var txtfromDate = rowToSave.FindControl("txtFromDate") as TextBox;
            var txtendDate = rowToSave.FindControl("txtEndDate") as TextBox;
            var cvConsolidatedPeriodValidator =
                rowToSave.FindControl("cvConsolidatedPeriodDates") as CustomValidator;
            var test = source as CustomValidator;

            if (txtfromDate != null && txtendDate != null && txtfromDate.Visible)
            {
                if (String.IsNullOrEmpty(txtfromDate.Text))
                {
                    args.IsValid = false;
                    test.ErrorMessage = "Period Dates are required";
                    return;
                } 
```

...

# php - 用 RegEx 交换两个变量

> ID：10344588
> 
> 赞同：0
> 
> 时间：2012-04-27T04:08:01.153
> 
> 标签：php, regex

所以这是我的代码，然后我将解释我遇到的问题：

```
foreach($people as $person){
    // counter for each person
    $counter = 0;
    // get variables for each item
    list($fullName,$phoneNumber,$address,$birthday,$salary) = explode(':', $person);
    // get variables for first and last name
    list($firstName, $lastName) = explode(" ", $fullName);
    // get variables for phone numbers
    list($areaCode, $middleDigits, $lastDigits) = explode('-',$phoneNumber);
    //get variables for address
    list($street,$city,$statezip) = explode(", ", $address);
    // get variables for state and zip separately
    list($state,$zipCode) = explode(" ", $statezip);

    // print file with the first and last names reversed
    $tempFName = $firstName;
    $tempLName = $lastName;
    echo $newPerson = (preg_replace("/($tempLName)($tempFName)/", $firstName, $lastName, $person))."<br/>";

    $counter++;
} 
```

我想要做的是打印原始的 $person，但 $firstName 和 $lastName 是相反的。我可以替换这些值，然后打印出每个变量，但是除非我格式化每一行，否则它的格式与 $person 最初的格式不同。我想知道是否有一种方法可以在不将每个输出格式化为看起来与原始 $person 变量相同的情况下做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:28:25.903

看起来名字和姓氏似乎总是用空格分隔并在第一个冒号字符之前......如果这是正确的，上面可能是矫枉过正。试试这个：

```
echo $newPerson = (preg_replace("/(.*?)\s+(.*?)\:/", '$2,$1:', $person))."<br/>"; 
```

# algorithm - 有一个随机放置 1 到 100 个数字的数组。但是列表中缺少两个数字。那两个数字是多少？

> ID：10344589
> 
> 赞同：1
> 
> 时间：2012-04-27T04:08:12.923
> 
> 标签：algorithm

> **可能重复：**
> [简单的​​面试问题变得更难：给定数字 1..100，找到缺失的数字](https://stackoverflow.com/questions/3492302/easy-interview-question-got-harder-given-numbers-1-100-find-the-missing-numbe)

我知道有比取总和然后从所有 100 个数字的总和求差然后搜索所有可能性更好的解决方案。我在一次采访中被问到这个问题。他们还告诉我，我不能使用 hasing 或 sort

# php - 没有编号数组的 PHP 子模式

> ID：10344590
> 
> 赞同：4
> 
> 时间：2012-04-27T04:08:19.757
> 
> 标签：php, regex

使用`preg_match`with subpattern 总是返回具有相同数据的双键数组，一个带有子模式名称，另一个带有数字标记。因为我要匹配数十万行，每行只有几 KB，恐怕数字数组会占用额外的内存。是否有任何适当的方法来禁用数字标签数组返回？

例子：

```
<?php

header('Content-Type: text/plain');

$data = <<<START
I go to school.
He goes to funeral.
START;
preg_match_all('@^(?<who>.*?) go(es)* to (?<place>.*?)$@m', $data, $matches);
print_r($matches);

?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => I go to school.
            [1] => He goes to funeral.
        )

    [who] => Array
        (
            [0] => I
            [1] => He
        )

    [1] => Array
        (
            [0] => I
            [1] => He
        )

    [2] => Array
        (
            [0] => 
            [1] => es
        )

    [place] => Array
        (
            [0] => school.
            [1] => funeral.
        )

    [3] => Array
        (
            [0] => school.
            [1] => funeral.
        )

) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:52:07.633

来自[php.net- 子模式](http://de2.php.net/manual/en/regexp.reference.subpatterns.php)

> 可以使用语法命名子模式`(?P<name>pattern)`。然后，该子模式将在匹配数组中按其正常数字位置和名称进行索引。

我看不到仅按名称提供索引的选项。

所以，我认为，如果你不想要这个数据两次，唯一的可能性是：不要使用命名组。

*这真的是一个问题吗？IMO 仅在遇到问题时才对其进行优化，因为这会增加内存使用量！**提高的可读性应该值得记忆！***

**更新**

看起来`go(es)*`应该只匹配一个可选的“es”。在这里，您可以使用非捕获组来节省内存。

```
preg_match_all('@^(?<who>.*?) go(?:es)? to (?<place>.*?)$@m', $data, $matches); 
```

通过启动具有`?:`匹配内容的组不存储。我还替换了`*`表示 0 或更多的那个，并且还将“goeseses”与`?`表示 0 或 1 的那个匹配。

# meteor - Meteor.js 用户登录信息

> ID：10344598
> 
> 赞同：7
> 
> 时间：2012-04-27T04:09:12.510
> 
> 标签：meteor

我在哪里可以找到有关使用meteor.js 创建用户登录系统的信息？我可以使用现有的库吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T06:45:45.967

> 更新 4：Meteor 现在完全支持帐户、用户等
> 
> 见[http://docs.meteor.com/#accounts_api](http://docs.meteor.com/#accounts_api)

更新 3：从 v0.5.0 开始，Meteor 支持对集合进行身份验证和允许/拒绝规则。有关信息，请参见[http://docs.meteor.com/#allow](http://docs.meteor.com/#allow)。谢谢@Dan Dascalescu！

更新 2：正如 Greg 指出的那样，您实际上可以通过用空函数覆盖它们来锁定 CRUD 方法（更多信息： [https](https://stackoverflow.com/a/10116342/1180471) ://stackoverflow.com/a/10116342/1180471 ）。因此，虽然我认为身份验证功能会让事情变得更简单，但您已经可以以相对较低的努力推出自己的功能。

保留用于历史目的的原始答案： *AFAIK meteor 尚未提供执行此操作的方法，因为无法锁定（部分）数据库，因此目前以安全方式执行此操作的唯一方法是绕过流星，或者： - 下拉到节点并使用单独的数据库或身份验证 API - 使用 HTTP 身份验证我想这在他们的待办事项列表上相当高，虽然......*

更新 1：他们已经开始实施，您可以在 livedata-auth 分支中看到代码： [https ://github.com/meteor/meteor/compare/master...livedata-auth](https://github.com/meteor/meteor/compare/master...livedata-auth)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T00:11:15.830

与此同时，Meteor 已经实现了一个[完整的身份验证和用户管理系统](http://meteor.com/blog/2012/10/17/meteor-050-authentication-user-accounts-new-screencast)，并配有一个 UI，可以使用流行的 OAuth 服务（谷歌、Facebook、GitHub、Twitter、微博）轻松登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:41:41.037

在流星中做一些简单的身份验证实际上并不难。博客系统 britto 已经设置好了。本质上，您从客户端限制数据库，然后使用 api 密钥向服务器端方法发出请求。

**限制客户端数据库访问：** [如何保护客户端 MongoDB API？](https://stackoverflow.com/questions/10115042/how-do-you-secure-the-client-side-mongodb-api/)

**britto 服务器代码**：[https ://github.com/jonathanKingston/britto/blob/master/server/server-britto.js](https://github.com/jonathanKingston/britto/blob/master/server/server-britto.js)

在britto源中，看看方法`create user`和`login user`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T02:46:57.457

[您可以在https://github.com/matb33/meteor-userauth](https://github.com/matb33/meteor-userauth)找到我为 Meteor 创建的用户登录系统的工作示例。

您需要 Meteor > 0.3.5，因此在撰写本文时您需要运行流星的开发分支。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-07T20:53:26.713

您还可以非常轻松地使用 Meteor 构建自定义登录系统。见我的笔记： http: [//meteorhacks.com/extending-meteor-accounts.html](http://meteorhacks.com/extending-meteor-accounts.html)

# java - 在数百万个多边形中找到数千个点的快速算法？

> ID：10344599
> 
> 赞同：3
> 
> 时间：2012-04-27T04:09:21.573
> 
> 标签：java, algorithm, point

我试图通过网络服务找出百万多边形中的数千个点。起初我在java中实现了算法（多边形中的点），但需要很长时间。然后我在mysql中拆分表并尝试使用多个线程来解决它，但仍然效率低下。有没有更快的算法或实现来解决这个问题？

加上关于多边形的描述。2D，静态，复杂多边形（也有孔）。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:37:56.030

无论您的点在多边形函数中的效率如何，针对一百万个多边形测试一个点都将花费大量时间。

您需要缩小搜索列表的范围。首先为每个多边形制作一个边界框，并且仅当点在边界框内时才选择多边形。

如果多边形不变，您可以将每个多边形转换为一组三角形。测试一个点是否在三角形中应该比测试它是否在任意多边形中要快得多。尽管三角形的数量会比多边形的数量大得多，但总体上可能会更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T06:57:27.897

如果多边形的集合是静态的，那么首先将它们注册到空间数据结构中可能会有所帮助 - [R-tree](http://en.wikipedia.org/wiki/R-tree)可能是一个不错的选择，假设多边形不会相互重叠太多。

要针对多边形集合测试一个点，首先会找到树中的封闭叶子（`O(log(n))`样式操作），然后只需对与封闭叶子相关联的多边形执行完整的多边形点测试.

这种方法应该大大加快每个点测试，但需要一个额外的设置阶段来构建 R-tree。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:18:14.573

如果您处理数百万个多边形，则需要某种空间分区，否则会很慢，无论您​​的命中测试功能如何优化或有多少线程在解决您的查询。

什么样的空间分区？*这取决于*：

*   二维？3D？
*   你的多边形设置是静态的吗？如果不是，是否经常更换？
*   你对这个系列有什么要求？
*   它是什么样的多边形？三角形？凸？凹？复杂的？有孔吗？

我们需要更多信息来帮助您。

**编辑**

这是一个简单的空间分区方案。

假设您的 2D 空间上有一个笛卡尔网格，并且具有给定的步长。

添加多边形时：

*   计算它的边界框
*   查找与边界框相交的所有网格单元
*   对于每个单元格，在特殊表格中添加一行。

该表如下所示：`cell_x`, `cell_y`, `polygon_id`. 添加正确的索引（至少`cell_x`和`cell_y`）

当然，您要选择网格步长，使大多数多边形位于少于 10 个单元格中，否则您的单元格表将很快变得巨大。

现在很容易找到给定点的多边形：

*   计算您的点属于哪个单元格
*   获取与此单元格关联的所有多边形
*   对于每个多边形，使用你的命中测试函数

该解决方案远非最佳，但易于实施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T04:12:55.893

我认为这是分而治之的情况，您可以尝试制作子多边形或简化一些 poonts，也许尝试一种启发式方法，这是我的 5 美分。

# iphone - 是否可以在没有 wifi 且没有 4G 或 3G 的情况下将高清视频从 iPhone 无线传输到 iPhone？

> ID：10344604
> 
> 赞同：0
> 
> 时间：2012-04-27T04:10:00.437
> 
> 标签：iphone, video, ios5, bluetooth, video-streaming

我猜是蓝牙。

传输速度是多少？

它必须在未越狱的 iPhone 上运行，尽管我仍然很好奇它如何在越狱的 iPhone 上运行得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:31:28.473

GameKit`GKSession`类支持使用 Wi-Fi 和蓝牙连接到同一应用程序的附近实例。传输的选择是完全自动的，并且被 API 隐藏。因此，您可以使用它在附近的设备之间传输数据。我不知道传输速度如何。可能不是很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T04:27:47.990

我猜是通过[“Bump Technology”。](https://stackoverflow.com/a/3383485/790794)

# android - 从多个活动中调用共享首选项，并访问其中一个活动中的按钮

> ID：10344606
> 
> 赞同：1
> 
> 时间：2012-04-27T04:10:08.483
> 
> 标签：android, sharedpreferences, android-preferences

我正在尝试实现从两个不同的活动中调用的共享首选项。其中一个首选项是一个复选框，它隐藏或公开包含在其中一个活动的 xml 布局文件中的按钮。

此方案使用以下方法实现：

```
public class MyPreferencesActivity extends PreferenceActivity
    implements OnSharedPreferenceChangeListener { ... } 
```

同样在 MyPreferencesActivity 类中，我的首选项更改代码如下：

```
@Override
public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    Button btnClear = (Button) findViewById(R.id.clearbuttonid);
    if (prefs.getBoolean("Clear User Flag", true))
        btnClear.setVisibility(View.VISIBLE);
    else
        btnClear.setVisibility(View.INVISIBLE);
} 
```

首选项类还具有：

```
@Override     
protected void onResume() {
    super.onResume();
    getPreferenceScreen().getSharedPreferences().
        registerOnSharedPreferenceChangeListener(this);     
} 
```

...使用 onPause() 类似地取消注册侦听器。

正如所写的那样，我并不期望这段代码能够工作，因为 clearbuttonid 是在不同的 Activity 的 xml 布局文件中定义的。正如您所料，当我尝试访问 btnClear 时，我在共享首选项更改代码中遇到了一个空指针异常。但奇怪的是，它的其他一切都正常工作（？！）。也就是说，当我重新启动应用程序时，首选项复选框已更改，并且已执行相应的代码。

实际问题是：如何设置首选项代码以支持能够从两个不同活动调用首选项并更改其中一个变量的简单目标？非常感谢。

编辑>>根据 Raju 的要求，这里是 logcat：

```
04-27 00:26:57.989: I/onSharedPreferenceChange(537): Shared preference changed
04-27 00:26:57.989: D/AndroidRuntime(537): Shutting down VM
04-27 00:26:57.989: W/dalvikvm(537): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-27 00:26:58.029: E/AndroidRuntime(537): FATAL EXCEPTION: main
04-27 00:26:58.029: E/AndroidRuntime(537): java.lang.NullPointerException
04-27 00:26:58.029: E/AndroidRuntime(537):  at com.xyzzy.prototype.MyPreferencesActivity.onSharedPreferenceChanged(MyPreferencesActivity.java:49)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.app.SharedPreferencesImpl$EditorImpl.notifyListeners(SharedPreferencesImpl.java:455)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.app.SharedPreferencesImpl$EditorImpl.apply(SharedPreferencesImpl.java:365)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.preference.Preference.tryCommit(Preference.java:1339)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.preference.Preference.persistBoolean(Preference.java:1605)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.preference.TwoStatePreference.setChecked(TwoStatePreference.java:79)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.preference.TwoStatePreference.onClick(TwoStatePreference.java:68)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.preference.Preference.performClick(Preference.java:939)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:202)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.widget.AbsListView$1.run(AbsListView.java:3168)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.os.Handler.handleCallback(Handler.java:605)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.os.Looper.loop(Looper.java:137)
04-27 00:26:58.029: E/AndroidRuntime(537):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-27 00:26:58.029: E/AndroidRuntime(537):  at java.lang.reflect.Method.invokeNative(Native Method)
04-27 00:26:58.029: E/AndroidRuntime(537):  at java.lang.reflect.Method.invoke(Method.java:511)
04-27 00:26:58.029: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-27 00:26:58.029: E/AndroidRuntime(537):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-27 00:26:58.029: E/AndroidRuntime(537):  at dalvik.system.NativeStart.main(Native Method)
04-27 00:26:58.599: I/dalvikvm(537): threadid=3: reacting to signal 3
04-27 00:26:58.618: I/dalvikvm(537): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:56:31.433

> 实际问题是：如何设置首选项代码以支持能够从两个不同活动调用首选项并更改其中一个变量的简单目标？非常感谢。

如果我正确地解释了您的问题（并提供了代码片段），那么您似乎正在尝试将内部所做的更改“推送”`PreferenceActivity`到其他（可能正在运行？）活动。如果确实如此，那么您可能已经把事情倒退了。与其试图推动偏好变化，不如从活动中“提取”他们的价值观。

换句话说，不要像现在这样编写代码：

```
if (prefs.getBoolean("Clear User Flag", true))
    btnClear.setVisibility(View.VISIBLE);
else
    btnClear.setVisibility(View.INVISIBLE); 
```

正如您正确地陈述自己（并且根据经验建立的），您无法访问不属于当前布局的小部件`Activity`，无论是“常规”布局还是`PreferenceActivity`. 您应该将首选项视为持久存储数据和应用程序状态的中心媒介。美妙之处在于，只要您有`Context`参考，您就可以从任何地方访问偏好。

因此，与其像上面那样尝试推送更改，您需要做的`PreferenceActivity`就是确保存储更改。`btnClear`完成后，您可以通过从首选项中请求存储的值来简单地从它所属的`Activity`（或）中切换 的可见性：`Fragment`

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
boolean visible = prefs.getBoolean("Clear User Flag", true)
btnClear.setVisibility(visible ? View.VISIBLE : View.INVISIBLE); 
```

例如，您可以将其放在`onCreate(...)`您的 中`Activity`，但如果您需要重新评估`Activity`可能已经创建并在堆栈中的可见性，您可以简单地将其移动到 eg`onResume()`中。

# java - 将 CDATA 添加到 XmlObject

> ID：10344610
> 
> 赞同：0
> 
> 时间：2012-04-27T04:10:42.480
> 
> 标签：java, xmlbeans

我正在编写一些与需要以下元素的遗留系统对话的代码：

```
<BankRate><![CDATA[        ]]><BankRate> 
```

我一生都无法完成这项工作，到目前为止我的尝试是：

```
parent.setBankRate("    ");
XmlCursor cursor = cc.xgetBankRate().newCursor();
cursor.toFirstContentToken();
cursor.setBookmark(CDataBookmark.CDATA_BOOKMARK);
cursor.dispose(); 
```

这只会导致以下结果：

```
<BankRate><BankRate> 
```

父级的选项是： setSaveCDataEntityCountThreshold(0).setSaveCDataLengthThreshold(0);

如果我 setBankRate 如下：

```
cc.setBankRate("<![CDATA[        ]]>"); 
```

我得到了角色实体（这不是我想要的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:44:31.803

我尝试了以下测试：

```
import org.apache.xmlbeans.*;

public class main {
    public static void main ( String[] args ) throws XmlException {
        XmlObject x = XmlObject.Factory.parse( "<BankRate>        </BankRate>" );
        XmlCursor c = x.newCursor();
        c.toFirstContentToken();
        c.toNextToken();
        c.setBookmark(CDataBookmark.CDATA_BOOKMARK);
        XmlOptions options = new XmlOptions();
        options.setSaveCDataLengthThreshold( 1 );
        options.setUseCDataBookmarks();
        System.out.print( x.xmlText( options ) );
    }
} 
```

结果是：

```
<BankRate><![CDATA[        ]]></BankRate> 
```

如果您的目标是强制将 BankRate 的内容保存为 CDATA，那么您就是这样做的。

但是，如果这不起作用，并且您什么都没有（空元素）作为 BankRate 的值，那么可能发生的情况是 BankRate 类型不是文本，而是忽略空白的其他类型。如果您确实需要将空格作为 BankRate 的值，则必须将其注入 XmlCursor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:07:51.247

所以，我正在尝试重新创建您的场景。这是一个简单的模式，其中包含一个字符串类型的元素。

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Moo" type="xs:string">
  </xs:element>
</xs:schema> 
```

这是一个实例化类型的程序，将值设置为几个空格并保存它。

```
import org.apache.xmlbeans.*;
import noNamespace.*;

public class main {
    public static void main ( String[] args ) throws XmlException {
        MooDocument moo = MooDocument.Factory.newInstance();
        moo.setMoo( "     " );
        System.out.print( moo.xmlText() );
    }
} 
```

结果是：

```
<Moo>     </Moo> 
```

您可以通过在文本前注入 CDATA 书签来强制 CDATA。在您的问题中，空格似乎丢失了。这与您的问题有何不同？

# java - 无法在应用引擎中使用 java 访问 http url

> ID：10344611
> 
> 赞同：0
> 
> 时间：2012-04-27T04:11:08.127
> 
> 标签：java, security, url

我已经编写了简单的 java 代码来访问 url www.nseindia.com 在我的本地和 Google appengine 上，它抛出异常并带有以下消息访问被拒绝您无权访问“http://www.nseindia.com/”在这台服务器上。参考 #18.9420b07b.1335496818.23b178f 拒绝访问 您无权访问此服务器上的“http://www.nseindia.com/”。参考#18.9420b07b.1335496818.23b178f

我正在使用 App Engine SDK 1.5，JRE 1.6 请告知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:16:56.000

这是因为 GAE 不允许某些类，如文件 io 或网络，请查看本指南以实现您正在寻找的内容。

[网址提取](https://developers.google.com/appengine/docs/java/urlfetch/overview)

这是允许的类[类白名单列表](https://developers.google.com/appengine/docs/java/jrewhitelist)

# c# - C# 中的并发静态队列不保留我的数据

> ID：10344612
> 
> 赞同：0
> 
> 时间：2012-04-27T04:11:11.573
> 
> 标签：c#, asp.net, multithreading, concurrency, static

所以我有在一个线程中处理并放入队列的数据，然后另一个线程将信息出队并对其执行一些操作。

这是队列

```
public static class MyConcurrentQueue
{
    public static ConcurrentQueue<cRule> _Queue;

    public static void EnqueueRuleTrigger(cRule _Rule)
    {
        MyConcurrentQueue._Queue.Enqueue(_Rule);
    }
} 
```

在 application_start 我有

```
 MyConcurrentQueue._Queue = new ConcurrentQueue<cRule>(); 
```

如果我想将我使用的规则排入队列

```
MyConcurrentQueue.EnqueueRuleTrigger(_Rule); //We're done enqueue the rule 
```

出列我使用

```
 MyConcurrentQueue._Queue.TryDequeue(out _Rule) 
```

我注意到，如果将 2 个项目排入队列，1 个在另一个紧循环中，到第一个出队 [单独的异步线程] 时，日志文件中的数据不再与入队匹配

如果我在入队之间休眠，则日志读取正确的值，可能是因为一个项目被放入，出队，另一个项目被放入，出队。

我想这是因为队列是静态的，它存储的是对 _Rule 的引用，而不是它的副本。关于如何解决这个问题的任何想法？我需要多个线程可以访问队列，这就是为什么我首先将其设为静态的原因。

提前致谢。

*编辑*

这是我的入队和日志以及出队和日志逻辑

```
while (x<=y)
                    {

  MyConcurrentQueue.EnqueueRuleTrigger(_Rule); //We're done enqueue the string AllText = File.ReadAllText(@"C:\Default\New.txt");
File.WriteAllText(@"C:\Default\New.txt", AllText + "\r\nEnqueue Alert:" +
 _Rule.AlertID +":" + _Rule.TriggerStartTime + "-" + _Rule.TriggerEndTime);

} 
```

这是在一个单独的线程上

```
if ( MyConcurrentQueue._Queue.TryDequeue(out _Rule))
                {
... some logic
     File.WriteAllText(@"C:\Default\New.txt", AllText + "\r\nDequeue Alert:" + 
_Rule.AlertID + ":" + _Rule.TriggerStartTime + "-" + _Rule.TriggerEndTime);
    } 
```

这是我的日志文件

排队警报：64c88289-58a1-499b-ade9-3fa69a32cf47：4/27/2012 12:00:00 PM-4/27/2012 5:00:00 PM

排队警报：64c88289-58a1-499b-ade9-3fa69a32cf47：4/28/2012 2:00:00 PM-4/28/2012 9:00:00 PM

出队警报：64c88289-58a1-499b-ade9-3fa69a32cf47：4/28/2012 2:00:00 PM-4/28/2012 9:00:00 PM

出队警报：64c88289-58a1-499b-ade9-3fa69a32cf47：4/28/2012 2:00:00 PM-4/28/2012 9:00:00 PM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:36:33.060

编辑： 将对象加入队列似乎是一个问题，而不是更改同一个对象并将其第二次加入队列。结果在出队期间，看起来第二个对象覆盖了第一个对象并被插入了两次，实际上对同一对象的引用被插入了两次。

最可能的解决方案是在插入之前进行深度克隆。考虑使您的对象不可变以简化代码的同步和可读性。

原来的：

最可能的原因是您的日志记录代码未正确同步。由于看起来您希望 2 个动作以原子方式发生（Enqueue + Log 或 Dequeue+Log），因此您必须围绕这两个操作添加适当的锁定，否则对 Queue 和 Log 的调用顺序可能是半随机的。还要确保正确处理 TryDequeue 的结果（因为它可以返回 false）。

```
static object logAndQueueLock = new object();
public static void EnqueueRuleTrigger(Rule rule) 
{ 
    lock(logAndQueueLock)
    {
      MyConcurrentQueue._Queue.Enqueue(rule); 
      Log.Message("Enqueued:"+ rule.ToString());
    } 
} 

public static Rule DequeueRuleTrigger() 
{ 
    lock(logAndQueueLock)
    {
      Rule rule = null;
      if (MyConcurrentQueue._Queue.Enqueue(out rule)){ 
         Log.Message("Enqueued:"+ rule.ToString());
      }
      return rule; 
    } 
} 
```

# javascript - 谷歌地图地理编码多行

> ID：10344614
> 
> 赞同：0
> 
> 时间：2012-04-27T04:11:28.570
> 
> 标签：javascript, google-maps, geocoding, polyline

我正在尝试使用 Google Maps JavaScript API 从多个位置对绘制多条测地线折线。我在这里找到了 98% 的内容（http://stackoverflow.com/questions/2994424/google-maps-geocoding-address-to-glatlng），但我就是不知道如何添加额外的点和其他线路（例如还显示美国芝加哥和美国洛杉矶之间的线路）。感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:49:29.557

新的更新，这次将目的地点编码放入一个单独的函数中，并独立进行每个地理编码调用。应该比尝试嵌套回调过程更具可扩展性。

```
<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
  <title>Google Maps API Geocoding Demo</title> 
  <script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
</head> 
<body>
  <div id="map" style="width: 1280px; height: 1024px;"></div>

  <script type="text/javascript">
//add locations
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 2,
      center: new google.maps.LatLng(35.00, -25.00),
      mapTypeId: google.maps.MapTypeId.TERRAIN
    });

    var address1 = '60033';

    var gc = new google.maps.Geocoder();
    gc.geocode({'address': address1}, function (res1, status) {

        var hub = res1[0].geometry.location;
        new google.maps.Marker({
            position: res1[0].geometry.location,
            map: map
          });

        geocodeLine(hub, '44145');  
        geocodeLine(hub, '03103');
        geocodeLine(hub, '30236');
        geocodeLine(hub, '18106');
        geocodeLine(hub, '64147');
        geocodeLine(hub, '86401');
        geocodeLine(hub, '75110');
        geocodeLine(hub, '56001');
        geocodeLine(hub, '80239');
        geocodeLine(hub, '95776');
    });   

    function geocodeLine(hub, address)
    {
        var gc = new google.maps.Geocoder();

        gc.geocode({'address': address}, function (res, status) { 
            if (status == google.maps.GeocoderStatus.OK) {

              new google.maps.Marker({
                position: res[0].geometry.location,
                map: map
              }); 

              new google.maps.Polyline({
                path: [
                  hub,
                  res[0].geometry.location
                ],
                strokeColor: '#FF0000',
                geodesic: true,
                map: map
                });
            }
        });
    }
  </script>
</body>
</html> 
```

# objective-c - NSMenuItem 标题设置为字符串和 NSString？

> ID：10344616
> 
> 赞同：0
> 
> 时间：2012-04-27T04:11:41.730
> 
> 标签：objective-c, nsstring, nsmenuitem

所以基本上我有一个名为 localIP 的 IBoutlet NSMenuItem。我在我的 .m 中使用 setTitle 实例，我想将标题设置为等于字符串 (@"") 和 NSString。

看下面的片段。

```
[localIP setTitle:(@"Local IP: %@", ip)]; 
```

问题是我收到警告说表达式结果未使用。所以显示的是 NSString ip 的值。我希望最终输出如下： Local IP: 192.xxx.xx

我是objective-c的新手。我以前主要用java编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:19:25.343

尝试：

```
NSString * title = [NSString stringWithFormat:@"Local IP: %@",ip]; 
[localIP setTitle:title]; 
```

另外，您的程序中`ip`是否有实例，对吗？`NSString`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:23:22.090

您将需要使用以下内容：

```
[localIP setTitle:[NSString stringWithFormat:@"Local IP: %@", ip]]; 
```

据我所知，目前无法仅使用文字来做到这一点。

警告发生，作为括号中的第二个表达式，编译器丢弃了“ip”变量，因此“未使用的表达式”。

[这里](https://stackoverflow.com/questions/9623683/expression-result-unused-in-uidocumentinteractioncontroller)有一个类似的问题

# iphone - iPhone - 让键盘随视图滑出

> ID：10344624
> 
> 赞同：1
> 
> 时间：2012-04-27T04:12:59.763
> 
> 标签：iphone, objective-c, keyboard

我们打开了一个显示键盘的视图，但是当单击后退按钮时，视图从右侧滑出，而键盘只有在视图消失时才会滑动。如果我们在 viewwilldisappear 时调用 resignFirstResponder，view 会向右滑动，同时键盘向下滑动。是否可以让键盘随视图滑出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:45:53.893

没有标准的方法来做你想做的事，但是......
基本上，键盘只是一个视图，呈现在它自己的 UIWindow 中，位于所有其他窗口之上。
因此，理论上，您需要做的是找到键盘视图并将其移动到所需的方向。我认为你应该使用`transform`属性，不要搞砸`frame`.

```
Class keyboardClass = NSClassFromString(@"UIPeripheralHostView");
for ( UIWindow *window in [[UIApplication sharedApplication] windows] ) {
    for ( UIView *subview in window.subviews ) {
        if ( [subview isKindOfClass:keyboardClass] ) {
            // that's keyboard
        }
    }
} 
```

已编辑：
如果您在谈论 UINavigationController 并且它是推送/弹出期间的默认幻灯片动画，那么您只需要在文本视图中调用`resignFirstResponder`in`viewDidDisappear`和`becomeFirstResponder`in即可。`viewWillAppear`这样，您的键盘将随着您的视图滑动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:59:38.017

我已经对此进行了测试，它适用于 iOS 5.1，但是，我认为这不是推荐的行为。

```
 for (UIWindow *keyboardWindow in [[UIApplication sharedApplication] windows])
    if ([[keyboardWindow description] hasPrefix:@"<UITextEffectsWindow"]) {
        NSLog(@"%@", [keyboardWindow description]);
        [UIWindow beginAnimations:@"fadeKeyboard" context:nil];
        keyboardWindow.frame = CGRectMake(keyboardWindow.frame.origin.x + keyboardWindow.frame.size.width, keyboardWindow.frame.origin.y, keyboardWindow.frame.size.width, keyboardWindow.frame.size.height);
        [UIWindow commitAnimations];
    } 
```

您还可以使用通知 UIKeyboardWillHideNotification 来检测键盘何时要隐藏，或者手动使用上面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:19:17.583

尝试坚持`resignFirstresponder`使用该`viewDidDisappear`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T04:35:20.383

```
 **Set notificatins and use these methods.....Hope it solve problem:

           First of all set your whole view in scrollView**
          -(void)keyboardDidHide:(NSNotification *)notif
     {
          NSTimeInterval duration = 0.4;
             [UIView animateWithDuration:duration animations:
                ^{
              scrollView.contentSize=CGSizeMake(320,scrollOriginalFrame.size.height);
               }];
              keyboardVisible=NO;
     }
     -(void)keyboardDidShow:(NSNotification *)notif
     {

         scrollView.contentSize=CGSizeMake(self.view.frame.size.width, scrollOriginalFrame.size.height+235);
         NSTimeInterval duration = 0.4;

        [UIView animateWithDuration:duration animations:
          ^{
             [scrollView setContentOffset:CGPointMake(0,162) animated:YES];

        }];
           keyboardVisible=YES;
           }
               **In viewDidLoad() add this**

        //keyboard
        scrollOriginalFrame=self.view.frame;
          scrollOriginalFrame.size.height-=103;
         scrollView.contentSize=scrollOriginalFrame.size;
             [[NSNotificationCenter defaultCenter] addObserver:self                   selector:@selector(keyboardDidShow:) name:UIKeyboardWillShowNotification object:nil];
               [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardWillHideNotification object:nil];
keyboardVisible=NO; 
```

# jquery - jQuery过滤某些ul元素

> ID：10344629
> 
> 赞同：1
> 
> 时间：2012-04-27T04:13:45.010
> 
> 标签：jquery, jquery-selectors

我是 jQuery 的新手。我有 jQuery 代码来创建手风琴垂直菜单栏。菜单栏的默认行为是隐藏所有子元素。完成此操作的代码如下

```
var menu_ul = $('.menu > li > ul');
menu_ul.hide(); 
```

一旦用户单击顶级菜单并显示子选项，我想保存菜单的状态。我能够将特定类添加到顶级 ul 项目以将其与其他项目区分开来。

为了完成这项工作，我必须更改上面的 jQuery 代码以隐藏除特定类之外的所有 ul 项目。换句话说

隐藏所有 ul 元素，除了 class="show_item"

请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:19:19.460

如果您想隐藏所有无序列表，没有 class `show_item`，您可以使用[`:not`选择器](http://api.jquery.com/not-selector/)来完成此操作。

```
$("ul:not(.show_item)").hide(); 
```

为了提高可读性，jQuery 的文档建议您考虑[`.not()`过滤方法](http://api.jquery.com/not/)：

```
$("ul").not(".show_item").hide(); 
```

选择你的 poisin - 任何一种都可以。

# javascript - D3.js 在鼠标悬停时更改标题文本

> ID：10344631
> 
> 赞同：2
> 
> 时间：2012-04-27T04:14:00.950
> 
> 标签：javascript, d3.js

我正在使用 D3 显示多个条形图（30 多个图表），类似于此处的示例：http: [//phrogz.net/js/d3-playground/#MultiBars_HTML](http://phrogz.net/js/d3-playground/#MultiBars_HTML) 当用户将鼠标悬停在一个条形上时，我想更改标题仅包含用户正在与之交互的图表，其中包含有关用户悬停的值的信息。

因此，如果我添加如下内容：

```
bars.on('mouseover', mouseoverfunc);

function mouseoverfunc(d, i) {
// update the title just for this chart..not all charts
a.select("h2").text(function (d) { return "hello"; });
} 
```

因此，知道鼠标悬停在栏 [d3.select(this)] 上，如何选择父级以便仅更改一个图表的标题？这里有一个非常相似的例子：http: [//mbostock.github.com/protovis/ex/minnesota.html](http://mbostock.github.com/protovis/ex/minnesota.html)我试图在 D3 中复制

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:17:12.887

最简单的方法可能是为您的标题 div 分配一个属性，让您可以使用 select 语句找到它们，例如：

```
d3.select("[parentBarChartID="+d.id+"]") 
```

在你的`mouseoverfunc`.

或者，您可以使您的 DOM 元素分层，以便您可以使用 this.parentNode.childNodes 遍历所有子节点，直到找到标题节点（请参阅如何在[此处](https://developer.mozilla.org/en/DOM/element.childNodes)循环子节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T22:23:23.963

我相信以下两个示例应该向您展示如何单独选择任何条并触发选择任何特定项目的回调...

*   “[与 HTML 布局结构混合的多个 D3 水平条形图](http://bl.ocks.org/2141479)”
*   “[与 HTML 布局结构混合的多个 D3 垂直条形图](http://bl.ocks.org/2164562)”

您会在回调函数“synchronizedMouseOver”和“synchronizedMouseOut”中注意到它们触发了 SVG 画布上多个对象的更改……一个单独的栏、一个图例项目符号和一个图例文本字符串。您将使用相同的方法来更改图表标题。

我希望这有帮助。

坦率

# c++ - 带有 if 条件的编译器错误

> ID：10344632
> 
> 赞同：0
> 
> 时间：2012-04-27T04:14:08.043
> 
> 标签：c++

if 语句是否以这种方式工作？这是一个“猜数字”的游戏。第一个 if 表示更高/更低，第二个 if 表示您是否在 50、100 或 100+ 范围内。

两者都应该同时工作，但我得到一个错误。

> '| 之前的第 37 行意外的主要表达式 |' 令牌，第 38 行应为 ';' 在'cout'之前

```
#include <iostream>
#include <cstdlib>
#include <time.h>
#include <cstdio>
using namespace std;

int main()
{
    int x;
    cout << "Please enter a number\n";

    srand(time(0));
    int y = rand();

    while (x != y)
    {
        cin >> x;
        {

        if (!(cin.good()))            //1st if
        {
           cout << "No letters noob" << endl;
           cin.clear();
           cin.sync();
        }
        else if (x < y)
           cout << "Go higher" << endl;
        else if (x > y)
           cout << "Go lower" << endl;
        else
           cout << "You win!!" << endl;
        }

        {

        if (y - x - 50 <= 0) || (x - y - 50 <= 0)        //2nd if
           cout << "within 50 range" << endl;
        else if (y - x - 100 <= 0) || (x - y - 100 <= 0)
           cout << "within 100 range" << endl;
        else
           cout << "100+ value away" << endl;
        }
    }
cin.get();
getchar();
return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T04:18:26.887

你缺少括号。

例如，这一行：

```
if (y - x - 50 <= 0) || (x - y - 50 <= 0) 
```

应该读：

```
if ((y - x - 50 <= 0) || (x - y - 50 <= 0)) 
```

因为整个 if 条件必须用括号括起来。

看起来你可能还有其他一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:09:30.287

除了@jonathan-wood 的正确答案之外，以下内容可能更清楚地表达了您的意图：

```
#include <cstdlib>
...
const int off_by = abs(x - y);

if (off_by <= 50) {
    ...
} else if (off_by <= 100) {
    ...
} 
```

仅供参考：如果您认为它会提高代码的可读性，您也可以使用“or”和“and”而不是“||” 和 ”＆＆”。因此，以下内容是合法的：

```
if ((y - x - 50 <= 0) or (x - y - 50 <= 0)) {
    ...
} 
```

# c - MSP430 上的 SPI 轮询读/写？

> ID：10344635
> 
> 赞同：2
> 
> 时间：2012-04-27T04:14:37.233
> 
> 标签：c, embedded, spi, msp430

抱歉这么简单的问题，但是有没有人有一个 C 示例来初始化 MSP430 为 SPI 模式并执行轮询读写操作？对我来说非常新的东西，不知道从哪里开始。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:51:14.083

您可以查看[MSP430Ware](http://www.ti.com/tool/msp430ware?DCMP=msp430ware&HQS=msp430ware-bhp)，它是“所有 MSP430 器件的代码示例、数据表和其他设计资源的集合……”

# javascript - 用javascript写这个的最短方法？

> ID：10344636
> 
> 赞同：2
> 
> 时间：2012-04-27T04:14:46.633
> 
> 标签：javascript

我想实现这个：

```
//foo is a boolean
if(foo){
    count++;
} else {
    count--;
} 
```

我怎么能用一个衬里写这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T04:18:01.400

`foo ? count++ : count--;`

这称为三元运算符，请参阅[Javascript 三元运算符的运算符优先级](https://stackoverflow.com/questions/1788917/javascript-ternary-operator)

最简单的解释是： `if this ? then this : else this`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-27T04:16:39.517

试试这个：

```
count += foo ? 1 : -1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T04:52:07.503

使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)和 javascripts[动态类型](http://en.wikipedia.org/wiki/Type_system#Dynamic_typing)，这应该是最短的：

```
count += foo || -1; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T04:17:48.910

最简单的是保留您现在拥有的逻辑并转换为三元：

`count += foo ? 1 : -1;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T04:15:44.103

您可以将`foo`其视为一个数字，特别是`1`或`0`：

```
count += 2 * foo - 1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T04:16:24.617

```
 count = (foo) ? count+1 : count-1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T04:17:05.500

请试试这个：

```
foo ? count++ : count--; 
```

# iphone - 在 iPhone 应用程序中捕获 60fps

> ID：10344637
> 
> 赞同：16
> 
> 时间：2012-04-27T04:15:00.157
> 
> 标签：iphone, ios, recording, avcapturesession

我正在做一个项目，我们将使用 iPhone 作为相机来捕捉场景。录制时，我们需要录制@60fps 而不是 30fps（本机支持）。所以我正在开发一个应用程序来做到这一点，因为 iPhone 4S 硬件支持 720p@60fps（如果你越狱你的手机，你可以实现这一点）。

有人知道如何在 iOS 上的 Objective-C 中做到这一点吗？今天我看到一个可以在非越狱手机上录制 60fps 的应用程序（slopro）。非常感谢任何建议或提示。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T19:03:08.920

经过一番修补，这个答案分为两部分：

**如何以 60fps 捕获帧**

iPhone4s/5.1 上的 AVCaptureSessionPreset1280x720，帧持续时间设置为：

```
connection.videoMinFrameDuration = CMTimeMake(1, 60);*
connection.videoMaxFrameDuration = CMTimeMake(1, 60); 
```

为您提供稳定、超流畅的捕捉。

**如何将帧捕获到文件中@60fps**
捕获帧都很好，但想必你想保留它们。
正如布拉德在评论中指出的那样，将这些帧写入文件是另一回事。可悲的是，无论我尝试什么配置，通过 对帧进行编码`AVAssetWriter`都会导致捕获率下降到观察到的 ~37fps，并且任何摆弄`alwaysDiscardsLateVideoFrames`都无法改变它。但是，在这种方法中，每一帧都会从 AVFoundation 复制到您的应用程序，然后再复制回来，这对公共汽车来说毫无意义且非常磨损。幸运的是，`AVFoundation`有一门课程可以消除此往返行程：`AVCaptureMovieFileOutput`.

如果您让`AVFoundation`自己编写代码，那么 iPhone4S 可以毫不费力地以 60fps* 捕获帧 + 音频并将其编码为 .mov 文件（约 25% CPU）。

虽然 60fps 视频捕捉是一个很棒的功能，但我不禁感到有点失望，因为`AVCaptureMovieFileOutput`排除了很多有趣的东西（例如，使用 GL 着色器的实时效果、录制开始/停止时不会丢失帧）。

蛋糕/吃它

*59 如果您仍在运行 iOS 5.0.1

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T04:28:15.137

I haven't try this before, maybe these are related:

*   [Set maximum frame rate with AVFoundation in iOS 5](https://stackoverflow.com/questions/8101492/set-maximum-frame-rate-with-avfoundation-in-ios-5)
*   `videoMinFrameDuration` and `videoMaxFrameDuration` in [AVCaptureConnection Class Reference](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVCaptureConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009522)
*   [CMTime Reference](https://developer.apple.com/library/mac/#documentation/CoreMedia/Reference/CMTime/Reference/reference.html) (needed for setting `videoMaxFrameDuration`)

# c# - Parallel.ForEach 花费的时间比预期的要长

> ID：10344638
> 
> 赞同：3
> 
> 时间：2012-04-27T04:14:59.983
> 
> 标签：c#, .net, multithreading, parallel-processing, threadpool

这里是关于这个问题的代码：

```
while (true)
{
    Console.WriteLine("start " + DateTime.Now);
    ParallelOptions options = new ParallelOptions();
    options.MaxDegreeOfParallelism = -1;                
    Parallel.ForEach(hosts, item =>
    {
        using (Ping ping = new Ping())
        {
            PingReply pingReply = ping.Send(item.Value, 2000);  // timeout is 2 secs
            App.dict[item.Key].lastConnectTry = new KeyValuePair<bool, DateTime>((pingReply.Status == IPStatus.Success), DateTime.Now);
        }
    });        
    Console.WriteLine("end " + DateTime.Now);
    Thread.Sleep(15000);
} 
```

但是，然后我运行该应用程序，它给出的结果略有不同：

```
start 27.04.2012 10:12:32
end 27.04.2012 10:12:42
// it took 10 seconds
start 27.04.2012 10:12:57
end 27.04.2012 10:13:02
// this took 5 secs
start 27.04.2012 10:13:17
end 27.04.2012 10:13:22
//   5 secs
start 27.04.2012 10:13:37
end 27.04.2012 10:13:42
// 5 secs
start 27.04.2012 10:13:57
end 27.04.2012 10:14:01
start 27.04.2012 10:14:16
end 27.04.2012 10:14:19
start 27.04.2012 10:14:34
end 27.04.2012 10:14:36
start 27.04.2012 10:14:51
end 27.04.2012 10:14:54
start 27.04.2012 10:15:09
end 27.04.2012 10:15:11
start 27.04.2012 10:15:26
end 27.04.2012 10:15:29
start 27.04.2012 10:15:44
end 27.04.2012 10:15:46
start 27.04.2012 10:16:01
end 27.04.2012 10:16:06
start 27.04.2012 10:16:21
end 27.04.2012 10:16:24
start 27.04.2012 10:16:39
end 27.04.2012 10:16:41
start 27.04.2012 10:16:56
end 27.04.2012 10:16:59
start 27.04.2012 10:17:14
end 27.04.2012 10:17:16 
```

似乎需要一些时间来引导线程，创建它们，然后并行执行时间将正确安排。

所以问题是为什么处理所有处理需要超过 2 秒的时间，以及如何通过在处理之前引导线程来避免它？

**更新：**

这个循环被放置在单独的后台线程中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:28:15.577

是的，线程池需要根据负载增加线程数（与 Parallel.ForEach 无关）。

检查[Parallel.ForEach 没有启动新线程](https://stackoverflow.com/questions/1861548/parallel-foreach-not-spinning-up-new-threads)和[Parallel.Foreach 在某些背景下产生太多线程](https://stackoverflow.com/questions/2002864/parallel-foreach-spawning-way-too-many-threads)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:51:56.173

您实际上并没有通过并行选项，请参见此处：

```
ParallelOptions options = new ParallelOptions();
options.MaxDegreeOfParallelism = -1;                
Parallel.ForEach(hosts, options, item => // note options passed through here
      // etc 
```

如果这还不够创建，您可以增加线程池：

`System.Threading.ThreadPool.SetMinThreads` `System.Threading.ThreadPool.SetMaxThreads`

但请注意，除非你知道你会得到改进，否则我不会碰这个。由于您正在执行`Ping`任务代码，因此这可能会增加每次运行之间的可变性。

# asp.net-mvc - Load Different View Based on Browser

> ID：10344640
> 
> 赞同：1
> 
> 时间：2012-04-27T04:15:18.230
> 
> 标签：asp.net-mvc, browser

Can anyone suggest a reliable way to load a different view depending on the current browser?

We have some markup on a view that is broken in IE. We'd like to load an alternate view in this case.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:29:20.927

# Javascript

You can use an Internet Explorer conditional comment for this:

```
<![if !IE]>
 window.location.replace("http://www.newpage.foo/newpage.html");
<![endif]> 
```

More Information: [http://reference.sitepoint.com/css/conditionalcomments](http://reference.sitepoint.com/css/conditionalcomments)

# ASP.Net MVC

```
if (Request.Browser.Browser == "IE")
{
     } 
```

# android - 动画 Flex 组件和旋转的 AS3 组件之间的 HitTest

> ID：10344644
> 
> 赞同：0
> 
> 时间：2012-04-27T04:15:44.823
> 
> 标签：android, actionscript-3, apache-flex, mobile, air

我的应用程序使用 AIR for Android。我创建了一个轮盘，球在其上滚动。需要检测球与轮盘赌扇区的碰撞。同时，轮子绕其轴旋转。一切正常。我结合了 Flex 组件和 AS3 组件。要注册联系人，我使用 hitTest。

如果我通过模拟器在桌面上调试，那么一切都很好。但是当我在我的移动设备上测试我的应用程序时，hitTest 仅在特定时间发生。我看到轮盘旋转正常，球与扇区接触，但没有发生 hitTest。真正的轮子旋转着我观察到的其他规律。这只是在真实设备上。

告诉我，我该如何解决？

这是我的球：

```
<s:BitmapImage id="pend"  smooth="true" source="@Embed('images/pend.png')"/> 
```

这是放置扇区的轮容器，这些扇区被创建为 AS3 组件：

```
stageW = stage.stageWidth;
stageH = stage.stageHeight; 
<mx:UIComponent id="con" mouseChildren="false" width="{stageW}" height="{stageW}" x="{stageW*0.5}" y="{stageH*0.5}"/> 
```

在这里，我要求向扇区发出问题-[沿半径的圆中心周围的文本](https://stackoverflow.com/questions/10276336/the-text-around-the-center-of-the-circle-along-the-radius.)

旋转动画。

```
con.rotation = rot;
if (FlexGlobals.topLevelApplication.clockwise){
 rot++;
} else {
 rot--;
} 
```

碰撞检测：

```
for (var i:uint = 0; i <objArray.length; i++){
    var sector:Sector = objArray[i] as Sector;
    if (sector.hitTestPoint(pend.x + pend.width*0.5, pend.y + pend.height*0.5, true)){
        var obj:Object = new Object();
        obj.value = sector.value;
        tempArray.push(obj);
        trace (sector.value);
    }
} 
```

# ruby-on-rails - Rails 数据库调用 (.save/.destroy)

> ID：10344646
> 
> 赞同：0
> 
> 时间：2012-04-27T04:15:48.043
> 
> 标签：ruby-on-rails

在阅读使用 Rails 进行敏捷 Web 开发一书时，我有一个快速的问题，我在浏览网站时无法找到答案。我有两种方法：

此方法在我的控制器中：

```
def decrement
  @line_item = LineItem.find(params[:id])
  @line_item = @line_item.decrement_quantity(@line_item.id)

  respond_to do |format|
    if @line_item.save
      format.html { redirect_to store_url }
      format.json { render json: @line_item, status: :created, location: @line_item }
    else
      format.html { render action: "new" }
      format.json { render json: @line_item.errors, status: :unprocessable_entity }
    end
  end 
```

这是在相应的模型中：

```
def decrement_quantity(line_item_id)
  current_item = LineItem.find_by_id(line_item_id)

  if current_item.quantity > 1
    current_item.quantity -= 1
  else
    current_item.destroy
  end

  current_item
end 
```

我知道这不是最有效的代码，但我的问题是，如果 current_item 在模型方法中被破坏，那么该方法返回的是什么？（无？） current_item 作为变量是否仍然存在，只是数据库对象已被破坏？控制器中的递减方法如何保存已经销毁的对象？（我在控制器方法的 if 语句中放了一个 logger.debut 语句，无论模型方法是否评估 if 或 else 语句，代码似乎总是通过那里）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:29:07.600

该模型在调用期间仍然存在，但已从数据库中删除，如果您调用`current_item.destroyed?`，它将返回 true。

即使项目已被销毁，该`save`方法也会返回 true。

这是一些希望有帮助的终端输出。

```
1.9.2p290 :001 > current_item = Deck.first
  Deck Load (0.1ms)  SELECT "decks".* FROM "decks" LIMIT 1
 => #<Deck id: 2, name: "Test Deck 1", description: "This is a te> #snip
1.9.2p290 :002 > current_item.destroyed?
 => false 
1.9.2p290 :003 > current_item.destroy
   (0.2ms)  begin transaction
  SQL (23.1ms)  DELETE FROM "decks" WHERE "decks"."id" = ?  [["id", 2]]
   (5.0ms)  commit transaction
 => #<Deck id: 2, name: "Test Deck 1", description: "This is a te> #snip
1.9.2p290 :004 > current_item.destroyed?
 => true 
1.9.2p290 :005 > current_item.save
   (0.2ms)  begin transaction
   (0.1ms)  commit transaction
 => true 
```

# android - 如何创建自定义通知包含一些控件

> ID：10344649
> 
> 赞同：1
> 
> 时间：2012-04-27T04:16:12.350
> 
> 标签：android, notifications

我正在尝试为我的音乐应用创建自定义通知。我发现我们可以使用远程视图来自定义通知布局。但它不能用于实现某些事件`onClick`，例如按钮...

我发现我的 Android 中的默认音乐应用程序有一个很好的通知。（Android 2.3.6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:34:00.363

sure you can use clicks on RemoteViews but has a different flavour your

```
 onUpdate 
```

will have something this

```
//To goto class
Intent intent = new Intent(context, "Your class".class);
        intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
                0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
          remoteViews.setOnClickPendingIntent(R.id.update_class, pendingIntent);

          appWidgetManager.updateAppWidget(widgetId, remoteViews);
//To goto Service
          Intent it = new Intent();
          it.setClass(context, "Your Service".class);
          PendingIntent pendingIntent1 = PendingIntent.getService(context,
          0,
          it, PendingIntent.FLAG_NO_CREATE);
        remoteViews.setOnClickPendingIntent(R.id.service_controller,
                pendingIntent);
        appWidgetManager.updateAppWidget(widgetId, remoteViews); 
```

you will have to use **remoteView.setOnClickPendingIntent("id of button/textview","corresponding peinding intent")**

# jquery - 涉及事件和 if/else 语句和表单的 jQuery 逻辑

> ID：10344650
> 
> 赞同：0
> 
> 时间：2012-04-27T04:16:13.930
> 
> 标签：jquery, html, logic

这对于经验丰富的开发人员来说可能是显而易见的，但我正在尝试自学 jQuery，但我遇到了这个问题。假设我有一个 id 为“btn”的按钮，并且 Html 为“Msg 1”，我想在单击按钮时将 Html 更改为“Msg 2”。这是我尝试这样做的方式，并且有效。但是如果按钮是表单的一部分，这种方式将不起作用。当按钮是表单的一部分时，有没有办法做到这一点？

```
(function($) {
   var test = true;
   $('#btn').on('click',function() {
        if(test == true) {
            test = false;
            $(this).html('Msg 2');
        } else {
            test = true;
            $(this).html('Msg 1');
        }
   }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:22:52.623

这是一些 JSFiddle 代码，它可以满足您的要求：

[http://jsfiddle.net/RSVdw/1/](http://jsfiddle.net/RSVdw/1/)

将 .html() 更改为 .val() 并添加了 e.preventDefault() 以便表单在按下时不会刷新整个页面。

HTML 代码：

```
<html>
<head></head>
<body>
    <form>
        Press me &gt;&gt; <input type="submit" id="btn" value="Msg 1"/>
    </form>
</body>
</html>​ 
```

JS代码：

```
(function($) {
   var test = true;
   $('#btn').on('click',function(e) {
       e.preventDefault();
        if(test == true) {
            test = false;
            $(this).val('Msg 2');
        } else {
            test = true;
            $(this).val('Msg 1');
        }
   });
})(jQuery);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:24:09.717

我没有正确理解你的问题，但你可以试试这个。

```
$('#btn').live('click', function(event) 
    {

         $(this).val('Msg 2');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:48:06.923

上面的解决方案是正确的，但是除非按钮是动态创建的，否则不需要使用'on'或不推荐使用的'live'。

```
$('#btn').click(function(e) {
    e.preventDefault(); //.. prevent the button from submitting the form
    test = !test;
    $(this).text(test ? 'msg 1' : 'msg 2'); //.. no need to use .html if you're just switching text
}); 
```

**注意：**此解决方案假设您正在使用`<button>`，如果您正在使用`<input type='submit|button'>`，则需要使用`$(this).val()`而不是`$(this).text()`

# iphone - “PostMessage”从工作线程向主 GUI 线程发送消息

> ID：10344658
> 
> 赞同：1
> 
> 时间：2012-04-27T04:17:02.167
> 
> 标签：iphone, objective-c, message-queue

我创建了一个线程，现在我想从线程发送消息（执行特定事件）到主 GUI 线程，以便 GUI 线程可以执行我的消息。谁能告诉我如何在 iphone 中执行此操作（目标 C)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:19:41.557

```
 //This will call selected method on main thread and you can do what ever you want to do in your selected method.

[self performSelectorOnMainThread:@selector(yourmethod) withObject:yourobject waitUntilDone:NO]; 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:24:45.793

您可以使用 GCD 和块

```
dispatch_async(dispatch_get_main_queue(), ^{
    // UI code to run on main thread
}); 
```

# gtk - 在开罗重新聚焦或在 Windows 上使用 gtk 时 GDI 对象泄漏？

> ID：10344662
> 
> 赞同：0
> 
> 时间：2012-04-27T04:17:09.790
> 
> 标签：gtk, gdi, cairo, resource-leak

我有一个使用 cairo、poppler 和 gtk+ 的程序 (gummi)。每次我用 alt-tab 切换焦点时（但当我使用其他方式改变焦点时不会这么多），任务管理器告诉我它获得了 10-20 个 GDI 对象。GDIView 告诉我这些主要是位图和 DC，尽管这些仅占“GDI Total”的大部分；“All GDI”的数量是“GDI Total”的 3-4 倍。

我如何确定这是否是 gummi 中的错误（我认为这不太可能，因为我认为 gummi 在重新聚焦/重绘方面没有任何作用）、cairo、poppler 或 gtk？我如何去寻找错误在哪里，以便我可以提交错误报告？（或者，如果这是 gtk/cairo/poppler 的已知错误，有人可以指出错误报告吗？）

[正如在其他线程（ Win32Exception: Operation completed successfully](https://stackoverflow.com/questions/8465464/win32exception-operation-completed-succesfully) ）中提到的，windows 将进程限制为 10,000 个句柄，并且我有 gummi 段错误，大概是从达到这个限制。此类事件的 gdb 回溯复制如下。

```
(gummi.exe:14008): Gdk-WARNING **: gdkgc-win32.c:830: SaveDC failed: The operation completed successfully.

(gummi.exe:14008): Gdk-WARNING **: gdkgc-win32.c:970: RestoreDC failed: The operation completed successfully.
pnc=: T
Program received signal SIGSEGV, Segmentation fault.
0x68de05bd in cairo_image_surface_get_data ()
   from d:\opt\gtk\bin\libcairo-2.dll
(gdb) bt
#0  0x68de05bd in cairo_image_surface_get_data ()
   from d:\opt\gtk\bin\libcairo-2.dll
#1  0x6c38d268 in _gdk_pixmap_new ()
   from d:\opt\gtk\bin\libgdk-win32-2.0-0.dll
#2  0x62d453a5 in draw_extension ()
   from d:\opt\gtk\lib\gtk-2.0\2.10.0\engines\libwimp.dll
#3  0x0155fdb6 in gtk_notebook_draw_tab ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#4  0x015601d7 in gtk_notebook_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#5  0x0153b916 in _gtk_marshal_BOOLEAN__BOXED ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#6  0x63a451f9 in g_closure_invoke ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#7  0x63a54512 in signal_emit_unlocked_R ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#8  0x63a5b614 in g_signal_emit_valist ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#9  0x63a5b962 in g_signal_emit ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#10 0x0165b557 in gtk_widget_event_internal ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#11 0x014b6b0d in gtk_container_propagate_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#12 0x014b6b48 in gtk_container_expose_child ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#13 0x0147c026 in gtk_box_forall ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#14 0x014b5436 in gtk_container_forall ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#15 0x014b5611 in gtk_container_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#16 0x0153b916 in _gtk_marshal_BOOLEAN__BOXED ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#17 0x63a451f9 in g_closure_invoke ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#18 0x63a54512 in signal_emit_unlocked_R ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#19 0x63a5b614 in g_signal_emit_valist ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#20 0x63a5b962 in g_signal_emit ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#21 0x0165b557 in gtk_widget_event_internal ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#22 0x014b6b0d in gtk_container_propagate_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#23 0x014b6b48 in gtk_container_expose_child ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#24 0x0156a555 in gtk_paned_forall ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#25 0x014b5436 in gtk_container_forall ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#26 0x014b5611 in gtk_container_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#27 0x0156a894 in gtk_paned_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#28 0x0153b916 in _gtk_marshal_BOOLEAN__BOXED ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#29 0x63a451f9 in g_closure_invoke ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#30 0x63a54512 in signal_emit_unlocked_R ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#31 0x63a5b614 in g_signal_emit_valist ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#32 0x63a5b962 in g_signal_emit ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#33 0x0165b557 in gtk_widget_event_internal ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#34 0x014b6b0d in gtk_container_propagate_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#35 0x014b6b48 in gtk_container_expose_child ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#36 0x0147c026 in gtk_box_forall ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#37 0x014b5436 in gtk_container_forall ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#38 0x014b5611 in gtk_container_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#39 0x0153b916 in _gtk_marshal_BOOLEAN__BOXED ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#40 0x63a451f9 in g_closure_invoke ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#41 0x63a54512 in signal_emit_unlocked_R ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#42 0x63a5b614 in g_signal_emit_valist ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#43 0x63a5b962 in g_signal_emit ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#44 0x0165b557 in gtk_widget_event_internal ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#45 0x014b6b0d in gtk_container_propagate_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#46 0x014b6b48 in gtk_container_expose_child ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#47 0x014b5436 in gtk_container_forall ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#48 0x014b5611 in gtk_container_expose ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#49 0x0153b916 in _gtk_marshal_BOOLEAN__BOXED ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#50 0x63a452c2 in g_closure_invoke ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#51 0x63a54512 in signal_emit_unlocked_R ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#52 0x63a5b614 in g_signal_emit_valist ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#53 0x63a5b962 in g_signal_emit ()
   from d:\opt\gtk\bin\libgobject-2.0-0.dll
#54 0x0165b557 in gtk_widget_event_internal ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#55 0x0153a22f in gtk_main_do_event ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#56 0x6c3641dd in _gdk_window_process_updates_recurse ()
   from d:\opt\gtk\bin\libgdk-win32-2.0-0.dll
#57 0x6c35f6b6 in gdk_window_process_updates_internal ()
   from d:\opt\gtk\bin\libgdk-win32-2.0-0.dll
#58 0x6c361497 in gdk_window_process_all_updates ()
   from d:\opt\gtk\bin\libgdk-win32-2.0-0.dll
#59 0x6c361507 in gdk_window_update_idle ()
   from d:\opt\gtk\bin\libgdk-win32-2.0-0.dll
#60 0x6c34137c in gdk_threads_dispatch ()
   from d:\opt\gtk\bin\libgdk-win32-2.0-0.dll
#61 0x685eb167 in g_main_context_dispatch ()
   from d:\opt\gtk\bin\libglib-2.0-0.dll
#62 0x685eb90d in g_main_context_iterate.clone.5 ()
   from d:\opt\gtk\bin\libglib-2.0-0.dll
#63 0x685ebd9d in g_main_loop_run ()
   from d:\opt\gtk\bin\libglib-2.0-0.dll
#64 0x01539038 in gtk_main ()
   from d:\opt\gtk\bin\libgtk-win32-2.0-0.dll
#65 0x0040950e in gui_main (builder=0x33f5090) at gui/gui-main.c:281
#66 0x00428378 in main (argc=1, argv=0x3f56c8) at main.c:157
(gdb) 
```

我正在使用来自 gtk+-bundle_2.24.10-20120208_win32 的 cairo 和 gtk+，来自 http://www.gtk.org/download/win32.php 的 32 位下载，[http](http://www.gtk.org/download/win32.php) : [//ftp.gnome.org/pub/ gnome/binaries/win32/gtk+/2.24/gtk+-bundle_2.24.10-20120208_win32.zip](http://ftp.gnome.org/pub/gnome/binaries/win32/gtk+/2.24/gtk+-bundle_2.24.10-20120208_win32.zip)。该项目还使用了 gtksourceview-2.10.0、libpng-1.5.10、openjpeg-1.5.0、poppler-0.18.4 和其他一些库，它们都是从 MinGW 下的源代码构建的，我认为与这些库无关图形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:20:37.063

GTK 团队不会忽视这种问题，这很可能是一个 gummi 错误。检查该程序的暴露事件信号处理程序，并确保它不会在不释放它们的情况下分配东西。

GDI 泄漏确实很棘手（在 MFC 中存在问题，问题出在应用程序上）。

**更新：** 似乎我错了，这是[GTK bug 671538](https://bugzilla.gnome.org/show_bug.cgi?id=671538)。您还可以在[此线程](http://mail.gnome.org/archives/gtk-devel-list/2003-December/msg00008.html)上找到一些建议。

# html - 调整页面大小时标题元素不会重置（在 Safari 中）

> ID：10344676
> 
> 赞同：1
> 
> 时间：2012-04-27T04:19:27.910
> 
> 标签：html, css, media-queries

我有这个标题由一个导航元素和一个包含内联图像和文字的标题元素组成。我选择将单词放入 span 中，以便通过媒体查询单独定位它们。这是标题的链接。[http://noahenart.com/header/](http://noahenart.com/header/)

尝试调整浏览器的大小，一切都按计划进行，但将其调整回来，它不会回到原来的状态（除非你刷新页面）。当使用移动设备和改变方向时，这会成为一个问题。

我尝试了不同的方法，包括将图像放在单独的标题上，将很多内容包含在 hgroup 中，但这也没有成功。有什么想法可以解决这个问题吗？

```
<header class="top">
<div class="mast">  

    <h1 title="Hawaii Media Grant">
        <a href="#">
            <img id="logoi" src="img/logo_h.png" alt="Hawaii Media Grant logo">
            <span id="logos">HAWAII</span>
            <span id="logob">MEDIA</span>
            <span id="logom">GRANT</span>
        </a>
    </h1>

    <nav>
        <ul>
            <li><a href="#" title="About">About</a></li>
            <li><a href="#" title="Work">Work</a></li>
            <li><a href="#" title="Blog">Blog</a></li>
            <li><a href="#" title="Contact">Contact</a></li>
        </ul>
    </nav>

</div>
</header> 
```

.

```
header h1 { 
font-size: 1em; 
text-transform: uppercase; 
line-height: 1.1875em; 
font-weight: normal; 
font-style: normal;
float: left; 
margin: 0 0 0 1%; 
position: relative;}

header h1 img { 
float: left; 
position: relative; 
bottom:30px; right: 10px;} 

header h1 a { 
color: #000; 
font-family: "nevisBold","nevis", "Helvetica neue", Arial,sans-serif; 
font-size: 2.2em; 
padding: 0;}

header h1 a span#logos,
header h1 a span#logob,
header h1 a span#logom { 
display: inline;}

a {
background: transparent; 
color: #bababa;
font-size: 100%; 
margin: 0; padding: 0;
text-decoration: none;
vertical-align: baseline; 
-moz-outline: none;}

a:focus, 
a:hover, 
a:active {
outline: 0;}

ul, ol { 
margin-left: 0; 
padding: 0;  
list-style: none;}

header ul {
float: right;
margin: 0;
clear: none;}

header li {
display: inline;
margin: 0 0 0 1.5em;}

header a {
color: #333;
padding: 0 0 5px 0;}

header a:hover {
border-bottom: 6px solid #bababa;
color: #8cc4f5;}

header.top {
background: #fff; 
width: 100%;}

.mast {
margin: 0 auto;   
overflow: auto;
padding: 5em 0 1.25em 0;
width: 71.830985915492958%; max-width: 1020px;} 

@media screen and (max-width: 1195px){
.mast { padding:52px 0 20px 0;}
header h1 { float:none; text-align:center; margin-top:-30px; margin-bottom:; padding-top:; padding-bottom:;}
header h1 img { float:none; bottom:-30px; right: 10px}
header ul { float:none; margin:0.7em auto 1.15em; text-align:center;}}

@media screen and (max-width: 769px) {
header h1 { font-size: 0.8em;}
header h1 a img#logoi { bottom: 0; right: 0; margin: 0 0 0.5em 0; width: 8%;}
header h1 a span#logos { display: block !important; margin: 0 0 0.5em 0;}
header ul { margin: 0.7em auto 0;}
header li { margin: 0 0 0 .5em;}}

@media screen and (max-width: 480px){
header h1 a { padding-bottom: 0; font-size: 2em;}
header h1 a img#logoi {width: 15%;}
header li { margin: 0 0 0 .4em;}} 
```

# asp.net-mvc-3 - 将自定义属性分配给强定义的 MVC 类

> ID：10344679
> 
> 赞同：1
> 
> 时间：2012-04-27T04:19:47.957
> 
> 标签：asp.net-mvc-3

在 MVC3 中，我将如何为强定义的类创建自定义属性（关于术语的道歉，我正在学习这里），以便我可以像这样使用它：

`[CustomValue(AttributeMappingName = "first.name")`]

我希望能够在我的视图中显示“名字”，我意识到这对于每个 Patient_FirstName 都是静态的，但我希望访问自定义映射名称客户端。

语境：

```
public class FormStandard_Model
    {
        [Required()]
        [Key]
        public string My_ID { get; set; }

        [Required]
        [StringLength(32, MinimumLength = 2)]
        [Display(Name = "First Name")]
        [CustomValue(AttributeMappingName =  "first.name")]
        public string Patient_FirstName { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:13:32.170

听起来您需要创建一个自定义`ModelMetadataProvider`，以便自定义属性中的数据在您的视图中可用。请参阅此答案： [自定义数据注释 ASP.NET MVC C#](https://stackoverflow.com/questions/5548156/custom-data-annotations-asp-net-mvc-c-sharp)

# git - 如何将灯塔与 git 集成？

> ID：10344684
> 
> 赞同：0
> 
> 时间：2012-04-27T04:21:12.200
> 
> 标签：git, lighthouse

我正在尝试实现类似 github 对关闭票证 com 提交消息的支持，也就是说，如果您发出

```
git commit -m "fixes #4" 
```

github自动关闭票#4

在这种情况下，我将 lighthouse 与 git repo 一起使用，我想知道是否有可能实现该功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:25:37.863

您可以使用 API for lighthouse 关闭工单。你可以写一个 post receive 钩子来为你做这件事。

或者试试这个，我在网上的某个地方找到的。

```
git commit -m "Make some change that resolves ticket 66 [#66 state:resolved]" 
```

# jquery - Jquery 延迟或设置超时在此

> ID：10344686
> 
> 赞同：1
> 
> 时间：2012-04-27T04:21:23.470
> 
> 标签：jquery

单击一个元素时，我试图触发一些事情，但其中一些我想推迟到以后。我试过这个没有运气：

```
$('.push').click(function() {
    $('#item1, #item2').addClass('newclass');

    $('.item3, .item4').delay('2000', function () {
        $(this).addClass('hidden'); //Or .hide perhaps?
    });

}); 
```

.hiden 在 css 中是“显示：无；” 我试图延迟隐藏 item3 和 item4 几秒钟。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:27:01.720

`.delay()`仅影响动画队列中的项目；添加一个类不会将元素放入动画队列中。请参阅[http://api.jquery.com/delay/](http://api.jquery.com/delay/)。

`setTimeout`使用本机方法会更好。

```
window.setTimeout(  
    function() {
        $('.item3, .item4').addClass('hidden');
    },  
    2000  
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:32:19.230

我可以通过使用以下代码来做到这一点 - [http://jsfiddle.net/UzVLk/](http://jsfiddle.net/UzVLk/)

```
 $('.item3, .item4').delay(2000).hide('fast'); 
```

如果我没有传递任何参数来隐藏，它就不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:41:41.470

签名是`.delay( duration [, queueName] )`

所以你不能使用回调`function(){}`作为第二个参数。试试这个：

```
$('.push').click(function() {
    $('#item1, #item2').addClass('newclass');
    $('.item3, .item4').delay('2000').hide('slow');
}); 
```

# json - 这个 Json 结果应该返回 404 还是 200？

> ID：10344691
> 
> 赞同：5
> 
> 时间：2012-04-27T04:22:35.267
> 
> 标签：json, http, rest, http-status-code-404, http-status-code-200

我正在尝试根据 StackExchange 的 api 结果松散地制作一个 API。

所以这是我的 json 输出。

```
{
    "items" : [ ... objects in here .... ]
    "page" : 
    "page_size" :  
    "total_pages" : 
    "total_items_count" :  
    "maximum_quota" : 
    "remaining_quota" : 
} 
```

非常简单。

现在，我不确定如果该人试图请求一个.. um .. 产品或问题或其他什么，并且该项目不存在，该怎么办。

例如..

```
{
    "items": []
    ... snipped ....
} 
```

我在想我会返回一个 200 和上面的 Json，而 Items 属性是空的。

我的另一个想法是返回该 json 且 items 属性为空，但将响应 http 状态设置为 404。

想法/标准？

无论如何，我真的很想返回 json。为什么？配额的。即使是空的结果仍然是对 api 服务的合法打击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T05:09:52.823

在我看来，我会返回 400 和 204 状态：

[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

**400 错误请求**

*由于语法错误，无法满足请求。[2]*

如果您传递无效参数，则返回 400 状态，说明请求不正确。

在这种情况下，我不会返回任何 JSON 消息。无效，请自行解决。StatusMessage 可以说“无效参数”，但没有内容。

* * *

**204 无内容**

*服务器成功处理了请求，但没有返回任何内容。[2]*

如果你传递了有效的参数，但没有找到内容，你可以说它没有找到。

您可能*想要回传一些额外的信息，可能不会。

对于 Twitter，假设您想搜索“@JohnDoe”用户，但没有找到。您可以说 204，并说：“抱歉，我们找不到 @JohnDoe，但我们确实找到了这 3 个可能是您想要的类似人”，在这种情况下，您不会推送他们的详细信息，只推送 Twitter 名称。

但是，如果您正在搜索推文，但没有找到，则没有理由向客户发送任何其他信息。就说没找到，故事结束。

# binary-search-tree - 向二叉搜索树添加高度属性

> ID：10344693
> 
> 赞同：1
> 
> 时间：2012-04-27T04:22:40.450
> 
> 标签：binary-search-tree

我得到了一个用于实现 Set 的二叉搜索树类。它具有所有基本功能，插入、删除和检查特定值是否存在。还提供了用于树的 Node 类。该节点有一个未使用的类变量`height`。

```
class TreeNode{
    .......
    public int height;
    .......
} 
```

这是节点类的过度简化版本。现在我应该编写一个新类，通过使用它来扩展此类的功能，`height`以便跟踪每个节点的高度，其中高度为：

*   0，如果节点没有子树，
*   -1 为空
*   1+ 最大子树的高度。

这里的问题是我不能修改给我的代码，我也不能简单地复制大部分现有代码并修改它以满足我的需要，即我必须调用超类函数`add()`然后添加一些代码来更新高度，并且这段代码应该只向整个函数的运行时添加一个常量。我想出了一个我调用的解决方案，`super.add()`然后我沿着搜索路径搜索新添加的元素以更新高度。尽管这可行，但它是一个非常混乱的解决方案。

我目前的解决方案如下：

*   Call `super.add()`，它本身是一个递归函数（BST 的标准 add 函数）
*   现在元素已添加，调用一个私有辅助函数，该函数获取已添加的值，递归搜索它，然后沿该搜索路径更新高度信息。

我只是想在这里提示一下，因为我觉得我缺少一些东西，而且我觉得我遇到了精神障碍。避免发布源代码。实际上是迫使我思考的反问题的答案也值得赞赏。

# snmp - ICMP 和 SNMP ping 在流量方面的比较？

> ID：10344699
> 
> 赞同：0
> 
> 时间：2012-04-27T04:23:08.633
> 
> 标签：snmp, ping, icmp

我有 100 台设备，我想知道每 10 秒的状态。您能否告诉我在流量负载方面使用 ICMP 或 SNMP 是否更好，或者它们在阻塞网络方面都一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:32:29.847

在检查接口是否启动或关闭方面，ping 总是更小且更可靠。但是 SNMP 在判断应用层框架是否上下以及从中提取重要信息方面更可靠。

IE，您的问题并非 100% 简单，因为您还没有明确说明您想知道什么。如果您只想知道远程接口是否能够接收流量，请使用 ICMP。如果您想知道设备至少能够从内核（理想情况下是软件层）返回信息，那么请使用 SNMP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:12:41.167

您的问题标题明确表示您想 ping，但问题正文含糊地说您想知道一些状态。您对哪些状态信息感兴趣？

一个简单的 ICMP Echo 消息和相应的 Echo Reply 消息的大小为 8 个字节（除了较低级别的 IP 数据包大小）。您可以在消息中传递其他数据，但这是可选的。ICMP 的一个核心原则是，如果 IP 的资源，特别是带宽，它不应该消耗太多。如果您只想要一个简单的 ping 安排，您的协议可能会指定一个 Echo 消息和一个响应，每十秒发送一次。这将消耗如此少的带宽，以至于您可能认为它是免费的。

SNMP 通常有点复杂。消息比 8 字节大很多，并且存在组装消息及其包含的数据的处理成本。但是，如果您想要比简单的 ping 连接测试更复杂的状态信息，那么这可能是适合您的协议。

您可以尝试两者并衡量它们的成本。

# java-me - 处理 LWUIT 中的 RSSReader 错误

> ID：10344711
> 
> 赞同：0
> 
> 时间：2012-04-27T04:24:46.933
> 
> 标签：java-me, lwuit

我正在疯狂地尝试使用 RSSReader 组件处理 rss 请求错误。我像这样创建我的 RssReader：

```
 RSSReader r = new RSSReader();
    r.setTargetContainer(c.getParent());
    r.setUIID("RSSReader");
    r.setURL("some feed url");
    r.setProgressTitle("Fetching News Feed");
    r.setHint("RSS Data Will Show Here");
    r.setLimit(10);
    NetworkManager.getInstance().start();
    r.sendRequest();
    myL x = new myL();
    NetworkManager.getInstance().addErrorListener(x);
    findRssContainer(c.getComponentForm()).removeComponent(findBtnLoadRss(c.getComponentForm())); 
```

和`myL`类写如下：

```
class myL implements ActionListener
{
    public void actionPerformed(ActionEvent ae) {
        Container c = (Container)ae.getComponent(); //returns null pointer exception
        findRssContainer(c).addComponent(findBtnLoadRss(c));
    }
} 
```

问题是它`ae.getComponent`是空的，所以我在尝试调用时遇到错误`findContainer`。我已经尝试了 ActionEvent 的各种属性，但没有成功。有谁知道这个问题的解决方法？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:41:22.770

似乎问题比我想象的要简单，我终于通过以下方式解决了它：

```
class myL implements ActionListener
{
    public Form f;

    public myL(Form frm)
    {
        f = frm;
    }

    public void actionPerformed(ActionEvent ae) {
        if(findBtnLoadRss(f).getParent() != null)
        {
            findRssContainer(f).addComponent(findBtnLoadRss(f));
        }
    }
} 
```

并`myL`用`c.GetComponentForm()`as 参数构造。

# wcf - 当我没有从我的域服务返回派生类型时，为什么仍然需要“KnownTypeAttribute”？

> ID：10344713
> 
> 赞同：0
> 
> 时间：2012-04-27T04:24:59.087
> 
> 标签：wcf, wcf-ria-services

我的命名空间中有 a`BaseModel`和 a `ChildModel`。我在 DomainService 中有操作返回它们，并且得到一个异常，说“将 KnownTypeAttribute”应用于基类。我申请了，成功了。

但是，如果我没有在我的 DomainService 中公开任何返回 DerivedType 的操作，那么我也必须在 BaseModel 上应用此属性，否则我会得到异常。

谁能解释为什么会这样？

```
public class MyService: DomainServiceBase
{
    public BaseModel Get()
    {
        return new BaseModel();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:22:41.137

如果 WCF 收到使用派生类型的消息，就会发生这种情况。在这种情况下，由于您没有使用已知类型属性，WCF 将不知道在哪里可以找到此子域类型，并引发异常。

# javascript - 在listview windows 8中进行分页

> ID：10344716
> 
> 赞同：1
> 
> 时间：2012-04-27T04:25:51.743
> 
> 标签：javascript, paging, windows-8

我想做一个 WinJS.UI.ListView 分页，在我到达最后一个滚动索引时分页正在工作。当索引最后到达时，我正在使用 API 向服务器请求更多数据。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:29:22.750

您需要考虑创建自己的自定义数据源来处理此问题。请参阅 MSDN 文章如何创建自定义数据源：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh770849](http://msdn.microsoft.com/en-us/library/windows/apps/hh770849)

以及随附的示例代码：

[http://code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128](http://code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128)

简而言之，您将创建一个实现 IListDataAdapter 接口的类，并将它与您自己的 VirtualizedDataSource 类派生一起使用。ListView 将负责视觉显示，并在需要更多数据时调用您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:24:42.873

[http://msdn.microsoft.com/en-us/library/windows/apps/br211835.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211835.aspx)

ListView.loadingBehavior 属性

“增量” ListView 加载的项目页数与 pagesToLoad 属性指定的一样多。当 automaticLoadItems 为 true 时，当用户在列表的已加载部分末尾的阈值滚动量（由 pagesToLoadThreshold 指定）内时加载项目。当 automaticLoadItems 为 false 时，您可以通过调用 loadNextPages 方法手动加载页面。请注意，使用此模式时， ensureVisible 方法不适用于尚未加载的项目。

# java - Netbeans 平台布局

> ID：10344724
> 
> 赞同：9
> 
> 时间：2012-04-27T04:27:28.070
> 
> 标签：java, swing, netbeans, netbeans-platform

我已经使用 netbeans 平台设计了一个小应用程序，现在我想更改 netbeans 平台提供的基本布局的方向。我有一个显示如下所示的窗口 ![在此处输入图像描述](../Images/c46b68bc3f7cd1cf73429b234aa470b1.png)

我希望在启动时显示如下屏幕。我已经调整了大小以满足我的需要，但我希望它自己发生。

![在此处输入图像描述](../Images/739a8a0d4bd73ac23022b03b08171705.png)

经过激烈的谷歌搜索后，我发现我需要`layer.xml`在其中一个模块中创建一个并将以下代码添加到其中。

`<folder name="Windows2"> <file name="WindowManager.wswmgr" url="WindowManager.wswmgr"/> </folder>`

我的`WindowManager.wswmgr`文件看起来像这样

```
<windowmanager version="2.1">
<main-window> 
    <joined-properties centered-horizontally="true" centered-vertically="true"
                       width="630" height="400" />
    <separated-properties centered-horizontally="true" relative-y="0.1"
                       relative-width="0.6" relative-height="0.08" />
</main-window>
<editor-area state="joined">
    <constraints>
        <path orientation="horizontal" number="60" weight="0.5" />
        <path orientation="vertical" number="40" weight="0.7" /> 
        <path orientation="horizontal" number="40" weight="0.5" /> 
    </constraints>
    <relative-bounds x="33" y="24" width="42" height="44"/>
</editor-area>
<screen width="1024" height="800" />
<active-mode name="explorer" />
<maximized-mode name="" />
<toolbar configuration="Standard" preferred-icon-size="24" /> 
```

我现在该怎么办？我错过了一些明显的东西吗？

- 编辑 -

层.xml

```
<filesystem>
<folder name="Actions">
    <folder name="Window">
        <file name="org-choose-transaction-ChooseTransactionTopComponent.instance_hidden"/>
        <file name="org-choose-transaction-EnterAmountTopComponent.instance">
            <attr name="instanceCreate" methodvalue="org.openide.windows.TopComponent.openAction"/>
            <attr name="preferredID" stringvalue="ChooseTransactionTopComponent"/>
        </file>
        <file name="org-prowze-maketransaction-TransactionTopComponent.instance">
            <attr name="instanceCreate" methodvalue="org.openide.windows.TopComponent.openAction"/>
            <attr name="preferredID" stringvalue="transactionTopComponent"/>
        </file>
        <file name="org-prowze-maketransaction-transactionTopComponent.instance_hidden"/>
    </folder>
</folder>
<folder name="Toolbars_hidden"/>

<folder name="Windows2">
    <folder name="Modes">
        <file name="explorer.wsmode" url="explorer.wsmode"/>
        <folder name="explorer"/>
    </folder>   
    <file name="WindowManager.wswmgr" url="WindowManager.wswmgr"/>
</folder> 
```

explorer.wsmode

```
<mode version="2.4">
<module name="org.netbeans.core.ui/1" spec="1.2" />
<name unique="explorer"  />
<kind type="view" />
<state type="joined"  />
<constraints>
    <path orientation="horizontal" number="20" weight="0.3"/>
    <path orientation="vertical" number="20" weight="0.5"/>
</constraints>
<bounds x="192" y="228" width="614" height="520" />
<frame state="0"/>
<active-tc  id="CustomerViewerTopComponent" />
<empty-behavior permanent="true"/></mode> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:52:28.803

该`WindowManager.wswmgr`文件定义了主窗口的属性。您需要定义的另一部分是资源管理器模式（假设 CustomerViewer 窗口处于资源管理器模式）。

定义和注册模式类似于您定义和注册`WindowManager.wswmgr`文件的方式。确定 xml 应该是什么样子的实用方法¹是运行应用程序，将分隔线移动到所需位置，关闭应用程序，然后从文件资源管理器中打开以下文件`<Your_NB_Application>/build/testuserdir/config/Windows2Local/Modes/explorer.wsmode`。

将内容从 复制`explorer.wsmode`到一个名为的文件`explorer.wsmode`中，您可以在模块的根包 ( `com.example.mymodule`) 中创建该文件。现在你需要在你的层文件中注册这个文件：

```
<folder name="Windows2"> 
    <file name="WindowManager.wswmgr" url="WindowManager.wswmgr"/> 
    <folder name="Modes">
        <file name="explorer.wsmode" url="explorer.wsmode"/>
        <folder name="explorer"/>
    </folder>        
</folder> 
```

*在再次运行之前，请务必在您的应用程序上运行“Clean and Build All”。*

¹确定结构的正式方法是使用位于[http://www.netbeans.org/dtds/mode-properties2_4.dtd的 dtd](http://www.netbeans.org/dtds/mode-properties2_4.dtd)

# java - Java 控制台程序

> ID：10344726
> 
> 赞同：34
> 
> 时间：2012-04-27T04:27:50.143
> 
> 标签：java, eclipse, console

我想知道如何制作 Java 控制台程序。我使用 Eclipse 作为 IDE。寻找类似于 C# 版本的控制台程序的东西。

试过谷歌，但只发现导出到 JAR 并从命令行解决方案执行。我更喜欢在控制台窗口中编译和直接测试。

提前致谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-27T04:37:46.773

```
/*
 * put this in a file named CommandLineExample.java
 *
 */

class CommandLineExample
{
    public static void main ( String [] arguments )
    {
        System.out.println("Hello, world");
    }
} 
```

从命令行键入以下内容进行编译：

```
$ javac CommandLineExample.java 
```

然后你可以像这样从命令行运行它：

```
$ java CommandLineExample 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-30T02:39:57.013

在进行 jar 开发时，我建议使用 Eclipse Java IDE 的变体。

```
File > New > Java Project

Right Click "src" > New > Package > Name your package pack1.projectname.

Right Click "pack1.projectname" > New > Class > projectname as class name. 
```

为这个项目写下你心中想要的所有代码。Java 是一种非常有趣的语言。始终将包与您的类文件一起使用，尤其是当您确定将在其他文件中导入自己的代码时。所以你可以做 import pack1.projectname.handler.EventHandler;

```
File > Export > Java > JAR file, or Runnable JAR file > Next > export destination 
```

这将使用 META-INF 清单适当地打包您的 jar 文件，如果您正在开发应用程序或插件，例如 Minecraft。您将需要一个 plugin.yml 和 config.yml 文件。您在项目资源管理器中右键单击项目文件夹而不是“src”。执行新建 > 文件 > plugin.yml 和 config.yml。只是一个旁注。

我总是使用 pack1 作为我的顶级包标识符的原因当然是这样我可以在更新我的项目时知道我正在使用哪个包。我总是这样做是为了轻松比较我更新的文件，更新它们的原因等等。所以初始分发将是 pack1.projectname。下一个版本 pack2.projectname。此外，当不更新整个文件中的代码时，您可以只 import pack1.projectname.handler.EventHandler; 导入 pack2.projectname.builder.RandomFile；pack3.projectname.init.init；这些是使用 Eclipse 在 Java 中进行开发的一种非常有条理的方式。

希望这可以帮助您在 Java 中开始您的项目。我不会在 stackoverflow 上编写 Java 代码，除非询问的人展示了他自己项目的片段，并且无法突破他的编码障碍。熟能生巧。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-01T23:04:42.510

如何在 Eclipse 中制作控制台应用程序。

1.  文件 - 新建 - 项目
2.  选择“Java 项目”
3.  将其命名为“我的应用程序”
4.  右键单击 MyApp/src
5.  新 - 类
    *   包名，如“com.sample”
    *   类名“MainClass”
    *   复选框“public static void main()”
6.  将此行添加 `System.out.println("hello");`到 main()
7.  右键单击“MyApp”，运行方式 - Java 应用程序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-27T04:37:20.560

您可以在 Eclipse 中运行“控制台程序”。

给定一个简单的程序，例如

```
public static void main (String[] args) {
    System.out.println("hello world");
} 
```

打开 Eclipse 控制台（窗口 -> 显示视图 -> 控制台），然后运行该程序。您应该`hello world`在控制台中看到。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-31T12:03:26.313

您可以做的是创建一个底部带有文本框的 JFrame。这将是您键入的位置。然后，您可以在任何时候按 Enter 键添加一个 jlabel。此外，它会将所有其他现有的 jlabel 输出向上移动新 jlabel 的高度。这给出了一种终端类型的窗口。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T04:32:39.580

没有什么特别之处使它成为控制台，只使用标准输出和标准输入，没有摇摆或awt，就是这样。

一旦你有jar文件就发出

```
java -jar file.jar 
```

或者如果你没有罐子

```
java package.name.ClassName 
```

没有 trailing.class

# asp.net - Calculate Task age in asp.net

> ID：10344733
> 
> 赞同：1
> 
> 时间：2012-04-27T04:28:59.067
> 
> 标签：asp.net, calendar

How to calculate the task age in asp.net usinf c# means the difference between the Assigned date selected for task and the current date.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:35:03.267

Ultimtly you want difference between two dates , which you can get as below

```
System.DateTime dtStartDate = new System.DateTime(2012, 9, 13, 12, 0, 0);
System.DateTime dtEndDate = new System.DateTime(2012, 9, 13, 0, 0, 0);
System.TimeSpan diffResult = dtEndDate.Subtract(dtStartDate);
Console.WriteLine("StartDate - EndDate = " + diffResult.TotalDays); 
```

# c - characters and strings questions

> ID：10344736
> 
> 赞同：1
> 
> 时间：2012-04-27T04:29:22.437
> 
> 标签：c

i have the following question:

Computers are frequently used in check-writing systems, such as payroll and accounts payable applications. Many stories circulate regarding weekly pay- checks being printed (by mistake) for amounts in excess of $1 million. Weird amounts are printed by computerized check-writing systems because of human error and/or machine failure. Systems designers, of course, make every effort to build controls into their systems to prevent erroneous checks from being issued. Another serious problem is the intentional alteration of a check amount by some- one who intends to cash it fraudulently. To prevent a dollar amount from being altered, most computerized check-writing systems employ a technique called check protection.

Checks designed for imprinting by computer contain a fixed number of spaces in which the computer may print an amount. Suppose a paycheck contains nine blank spaces in which the com- puter is supposed to print the amount of a weekly paycheck. If the amount is large, then all nine of those spaces will be filled

for example:

```
11,230.60 (check amount)
---------
123456789 (position numbers) 
```

On the other hand, if the amount is less than $1000, then several of the spaces will ordinarily be left blank—for example,

```
99.87
---------
123456789 
```

contains four blank spaces. If a check is printed with blank spaces, it is easier for someone to alter the amount of the check. To prevent a check from being altered, many check-writing systems insert leading asterisks to protect the amount as follows:

```
****99.87
---------
123456789 
```

Write a program that inputs a dollar amount to be printed on a check and then prints the amount in check-protected format with leading asterisks if necessary. Assume that nine spaces are available for printing an amount.

im not asking anyone to write the code for me or anything, i just need a starting point, we have this huge list of all these different functions, can anyone recommend what function i could use from the string-handling library?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:38:14.770

我不会为你做功课，但我会鼓励你看看以下函数：

sprintf - 格式化输出。

提示：0 填充左侧的输出

strspn / strcspn - 计算字符集中/不在字符集中的跨度

提示：替换多余的零。

memset - 用字节值填充内存区域

我假设您知道如何在 C 中使用字符和“字符串”进行指针运算。如果不知道，请继续学习。我还假设 ASCII，而不是 unicode。如果它是 unicode，你可以教我如何用 C 来做 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T04:39:11.777

考虑要打印的位数与应在数字前面的星号数之间的关系。它们加起来应该是一个常数，在本例中为 9。因此，如果您获得要打印的数字字符串的长度，您可以确定首先打印多少个星号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:50:32.833

1.  使用**itoa**转换 amt并找到长度

2.  现在从 9（最大位数）中减去长度，您将得到要打印的星号数

3.  打印那个星号，然后是你的 Amt。

* * *

```
int amt,count;
char s[10];
printf("Enter Amt");
scanf("%d",&amt);

/* Store Amount as String */
itoa(amt,s,10);

/* Calculate Count  */
count=9-strlen(s);

/* Print asterisks */
for(int i=0;i<count;i++)
printf("*");

/* Print Amount */
printf("%d",amt); 
```

# cakephp - CakePHP 2.0 Miles J Uploader Plugin - $uploadDir override error

> ID：10344739
> 
> 赞同：1
> 
> 时间：2012-04-27T04:30:18.473
> 
> 标签：cakephp, plugins, cakephp-2.0, file-upload, uploader

I'm trying to set the $uploadDir dynamically in my AttachmentsController but whenever I try to use:

```
$this->Uploader = new Uploader( array('uploadDir'  =>  "/files/uploads/clients/".$id."/" ) ); 
```

the uploadDir variable defaults to the one in the Plugin/Uploader/Vendor/Uploader.php file.

I've tried removing the 'uploadDir' variable declaration from the $actAs arrays, and from the $_defaults in AttachmentBehavior.php but no luck.

I've only been using CakePHP for a couple weeks, and I can't seem to figure out how to make this work.

When I print_r($this->Uploader); the uploadDir variable is set properly, but when I check my upload directory, it saves to the default location that is set in the Uploader.php class.

Code Below:

**AttachmentsController.php**

```
App::import('Vendor', 'Uploader.Uploader');

class AttachmentsController extends AppController {        

public $helpers = array("Html", "Form", "Session");
public $uses = array("Attachment");

public function index()
{        
    $docs = $this->Attachment->findAllByClientIdAndUserId( $this->Session->read("Client.id"), AuthComponent::user('id') );
    $this->set("page",10);
    $this->set("docs",$docs);
}

public function upload()
{

    if( $this->request->is('post'))
    {
        $id = $this->Session->read("Client.id");
        unset($this->Uploader);
        $this->Uploader = new Uploader( array('uploadDir' => '/files/uploads/wizno/' ) );
        $this->Uploader->setup( array('uploadDir' => '/files/uploads/wizno/' ) );
        //print_r($this->Uploader);            
        //exit;

          if(!empty($this->data)){
               if($this->Attachment->save($this->data))
               {
                    $this->redirect("/attachments");
               }
          }
    }

} 
```

}

**Attachment.php**

```
class Attachment extends AppModel {
public $name = "Attachment";
public $belongsTo = array("Client","User");
public $useTable = "uploads";

public $virtualFields = array(
'created'   =>  'DATE_FORMAT(Attachment.created, "%m/%d/%Y")',
'modified'  =>  'DATE_FORMAT(Attachment.modified, "%m/%d/%Y")'
);

public $actsAs = array(     
    'Uploader.Attachment' => array(
        'file' => array(
            'name'      =>  '',
            'uploadDir' =>  "/files/uploads/clients/WTF/500",
            'dbColumn' => 'path',
            'maxNameLength' => 50,
            'overwrite' => true,
            'stopSave' => true,

            'metaColumns' => array(
                'size' => 'filesize',   // The size value will be saved to the filesize column
                'type' => 'type'        // And the same for the mimetype
            )
                    )
    )
); 
```

}

**Uploader.php Class** This variable always overrides my settings, and I don't know how to make it cooperate.

```
/**
 * Destination upload directory within $baseDir.
 *
 * @access public
 * @var string
 */
public $uploadDir = 'files/uploads/2012/'; 
```

**AttachmentBehavior.php**

```
protected $_defaults = array(
    'name' => '',
    'baseDir' => '',
    'uploadDir' => '/files/100/',       
    'dbColumn' => 'path',       
    'defaultPath' => '',
    'maxNameLength' => null,
    'overwrite' => false,           // Overwrite a file with the same name if it exists
    'stopSave' => true,             // Stop model save() on form upload error
    'allowEmpty' => true,           // Allow an empty file upload to continue
    'saveAsFilename' => true,       // If true, will only save the filename and not relative path               
    'metaColumns' => array(
        'ext' => '',
        'type' => '',
        'size' => '',
        'group' => '',
        'width' => '',
        'height' => '',
        'filesize' => ''
    )
); 
```

**Despite having 'uploadDir' set to different folders in the various files, it still defaults to the one in the Uploader.php Class. Had to change all these folders to find out which file was controlling things.**

I wish the plugin's documentation had more examples and a clearer explanation of how to do the initial setup.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:14:43.663

那为什么不

```
CakePlugin::load('Uploader');       
App::import('Vendor', 'Uploader.Uploader');

$this->Uploader = new Uploader(array('tempDir' => TMP,'uploadDir'=> DS . 'custom_dir' . DS));

//OR

$this->Uploader->uploadDir = DS . 'custom_dir' . DS; 
```

您可以随时将文档和错误提交到[Miles'github repos](https://github.com/milesj/cake-uploader)

# cassandra - 超级列族 Cassandra 中二级索引的任何替代方案

> ID：10344740
> 
> 赞同：1
> 
> 时间：2012-04-27T04:30:25.207
> 
> 标签：cassandra, filtering, super, hector

我的数据模型看起来像这样

```
 #keyspace_name{
             #columnfamily1
               {startDate_mobileNo:  // row key
                       { Call_TYpe:  // super column
                               { xyz: value
                                 endDate : value;
                                }
                        }
                } 
```

现在我想让搜索结果过滤 startDate_mobileNo、Call_TYPE 和 endDate。这可以通过将 endDate 作为二级索引来完成。但是超级列中的二级索引是不可能的。所以我无法弄清楚如何进行。是的，我可以通过使用简单的 java 编码过滤结果数据来完成二级索引过滤部分。但我想这不是正确的想法，因为如果大数据可能内存不足。所以请给我一些想法。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:15:57.467

我相信你可以使用复合键得到你想要的，它在 Cassandra 1.1 中具有新的一流 CQL 支持。有关更多信息，请参阅[有关使用复合材料建模的博客文章。](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)

超级柱绝对是错误的方式——它们总是有些问题，现在已被弃用，你可以使用复合材料从它们那里得到你想要的一切。

如果我正确解释了您的模型，您可能会执行以下操作：

```
CREATE TABLE columnfamily1 (
    startDate timestamp,
    mobileNo text,
    Call_TYpe int,
    endDate timestamp,
    xyz text,
    PRIMARY KEY (startDate, mobileNo, Call_TYpe)
); 
```

如果需要，您还可以在 endDate 上创建二级索引。我不清楚你是否愿意。

如果您想提供一个更具体的示例来说明您需要支持的排序查询，我可能会提供更多帮助。

# c# - 我应该如何验证数据

> ID：10344752
> 
> 赞同：0
> 
> 时间：2012-04-27T04:32:50.147
> 
> 标签：c#, asp.net, validation, mvp, solid-principles

我正在使用 asp.net 和 Model View Presenter 模式创建一个购物网站，并且架构是分层的。我知道我应该有验证器类来负责验证业务层中的用户输入，并且我还应该在 UI 层中有验证器以遵循 DEEP 和快速用户响应。那么我如何在 BL 中使用验证器类来验证 int、long 和 decimal 等数据类型，同时还要遵循 DRY 和 SOLID？我还需要抽象吗？这是我的模型：

```
public class Category
{
    public int Id {get;set;}
    public string Name {get;set;}
    public int? ParentCategory {get;set;}
}
public class Item
{
    public int Id {get;set;}
    public int Category {get;set;}
    public string Model {get;set;}
    public string Color {get;set;}
    public string Brand {get;set;}
    public decimal Price {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:39:58.883

您可以使用 Enterprise library Validation Block，它既简单又松散耦合。查看使用 ASP.NET MVC 的验证块的示例教程，但也可以轻松地与 MVP 一起使用。

[http://weblogs.asp.net/gunnarpeipman/archive/2009/11/13/asp-net-mvc-validating-objects-using-enterprise-library-validation-application-block.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2009/11/13/asp-net-mvc-validating-objects-using-enterprise-library-validation-application-block.aspx)

问候。

# scala - 在scala中访问对象上的集合

> ID：10344757
> 
> 赞同：0
> 
> 时间：2012-04-27T04:33:31.737
> 
> 标签：scala, types, set

我目前已经将以下代码放在一起确实可以识别元素并据称将它们添加到集合中，但是当我打印出集合时，集合中充满了函数

```
class PropositionOrderer extends Identity{
    var Names = SortedSet[Name] _
    override def variable = {
      _ match {
        case name => 
          Names+(name)
          Variable(name)
      }
    }
} 
```

然后我想在一个命题上调用它并获得命题中的排序名称列表

```
type Names = SortedSet[Name]
  val Names = SortedSet[Name] _
  def vars: Proposition => Names =
  {
    case p => 
      val prop = new PropositionOrderer
      prop.visit(p)
      println(prop.Names)
      //this just to fit the return definition
      Names("Dan","Web")
  } 
```

如果我返回 prop.Names，则表示我返回了错误类型的对象。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:41:46.370

这里有几个问题。我会列出一些。纠正这些应该会让你走上正轨。

首先，您`Names`以两种不同的方式定义，这是不好的。看起来你打算让它成为一种类型，所以坚持下去。

```
type Names = SortedSet[Name]   // this defines a new type called `Names`
val Names = ...                // this defines a variable called `Names` 
```

接下来，如果要定义一个新的 empty `SortedSet`，语法如下。（请注意，变量名称应始终为小写。大写为类型名称保留。）

```
val names = SortedSet[Name]()   // `names` is a new `SortedSet`
val Names = SortedSet[Name] _   // `Names` is a function that takes multiple `Name` arguments and constructs a `SortedSet` 
```

第三，如果你想在 中添加一些东西`Set`，你必须使用`+=`，否则现有的集合不会改变。

```
var names = SortedSet[String]()
names + "test"   // `names` is unchanged
names += "test"  // `names` is updated 
```

# javascript - 在运行时更改 Cluetip 背景图像

> ID：10344764
> 
> 赞同：0
> 
> 时间：2012-04-27T04:34:51.450
> 
> 标签：javascript, jquery, css, cluetip

我想在运行时通过 jQuery 有条件地更改我的 Cluetips 的背景图像。我使用'rounded'作为线索提示类。

我认为这可以解决问题：

```
$('.cluetip-rounded').css("background", "url(infobox_left.png)"); 
```

但是在 Chrome 开发者工具栏中，我可以看到 CSS 设置完全没有改变。

如何更改线索提示 CSS 设置？

最好的，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:43:09.340

用这个：

```
$('.cluetip-rounded').css("background-image", "url(infobox_left.png)"); 
```

并确保图像路径有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:11:30.217

它应该工作。确保您有正确的图像路径。看看这个：http: [//jsfiddle.net/DRN3P/](http://jsfiddle.net/DRN3P/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:58:51.227

线索提示“克隆”隐藏的 div，确保在更改类或更改“克隆”内容后再次调用线索提示。

# sed - 需要从多个文件中查找并删除一个字符串

> ID：10344768
> 
> 赞同：0
> 
> 时间：2012-04-27T04:35:07.863
> 
> 标签：sed, base64, findstr

我的一个网站遭到恶意软件攻击。我将整个服务器下载到我的计算机上，需要找到其中包含特定字符串的所有文件，删除该字符串，然后再次保存文件。此代码已成功找到包含该字符串的所有文件，但我无法进一步了解。

```
FINDSTR /s /i /m base64 *.* 
```

尽管我需要删除的完整字符串要长得多。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:42:09.423

您是否打算让您的网站再次遇到同样的问题？

否则，只需使用任何支持“在文件中查找和替换”的文本编辑器（我们的 Visual Studio 支持所有版本，包括 Express）并执行一次。使用正则表达式查找像“base64[^;]+”这样的整个字符串。

# jquery-mobile - apply ID to a jquery mobile page

> ID：10344769
> 
> 赞同：0
> 
> 时间：2012-04-27T04:35:15.833
> 
> 标签：jquery-mobile

when I apply an ID of "assets" to may jquery mobile page it has some strange behavior when I directly call it. for example [http://localhost/Index.html#assets](http://localhost/Index.html#assets)

any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:22:56.263

确保您的 id 正确放置在第二页中。

```
<div data-role="page" id="mainPage">
      <a href="#assets" data-role="button" > Go To Assets </a>
</div>

<div data-role="page" id="assets">
      Assets page.
</div> 
```

# java - 错误：java.io.InvalidClassException

> ID：10344772
> 
> 赞同：0
> 
> 时间：2012-04-27T04:35:39.827
> 
> 标签：java, exception, hash, iostream

我正在解决这个问题，遇到这个错误无法解决这个错误：

这是我的课：

```
package stdaccmdmngmt;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.util.Date;
import java.util.HashSet;
import java.util.Set;
import javax.swing.JOptionPane;

/**
 *
 * @author princess
 */
public class Student1 implements Serializable {

public static Set<Student1> listOfStudents = new HashSet<Student1>();    
public static File outFile = new File("StudentRegistry.dat"); 

// Data memebers 
private String studentID;
private String name;
private Date dateOfReg;

//Constructor 
Student1(String number,String name)
{
this.studentID = number;
this.name = name;
dateOfReg = new Date(); 
}

public String getName()
{
return name;
}

public String getStudentID()
{
return studentID;
}

public Date getDateOfReg()
{
return dateOfReg;
}

public void register() throws FileNotFoundException, IOException, ClassNotFoundException    
{ 
Set<Student1> sss = new HashSet<Student1>();    
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(outFile));
oos.writeObject(sss);
oos.close();      
}

public static HashSet<Student> getListOfStudents() throws FileNotFoundException, IOException, ClassNotFoundException
{
HashSet ss;
File inFile = new File("StudentRegistry.dat");
ObjectInputStream ois = new ObjectInputStream(new FileInputStream(inFile));
Set<Student> aNewSet = (HashSet<Student>) ois.readObject();
return  (HashSet<Student>) aNewSet;
}

public static Student getStudentbyID(String a) throws FileNotFoundException, IOException, ClassNotFoundException
{
Set<Student> aNewSet = new HashSet<Student>();
aNewSet = Student.getListOfStudents();
Student result = null;

for (Student x :aNewSet)
{
        if (x.getStudentID().equalsIgnoreCase(a))
        {
             result = x;
             break;
        }
    }  
    if (result == null)
    {
        JOptionPane.showMessageDialog(null, "Apartment not found");
    }
    return result;    

}

    @Override
public String toString()
{
// include the code to retrieve assigned apartment    
return "Name: " + name +" StudentID: "+ studentID + " Registered On: " + dateOfReg;
}

    @Override
public boolean equals(Object another)
{
Student1 stud = (Student1)another;
return this.name.equals(stud.name)&& this.studentID.equals(stud.studentID);
}

    @Override
public int hashCode()
{
int hash = name.hashCode();
return hash;

}    
} 
```

这是测试类：

```
package stdaccmdmngmt;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.HashSet;
import java.util.Set;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author princess
 */
public class Test {

public static void main (String[]args) throws FileNotFoundException, ClassNotFoundException, IOException
{        
Student1 s = new Student1("12345","Sasha");   
        try {
            s.register();
        } catch (FileNotFoundException ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        }

Set<Student> nnn;
 nnn = Student.getListOfStudents();
for (Student x : nnn)

    System.out.println(x.toString());      

}

}
 * @author princess
 */
public class Student1 implements Serializable {

public static Set<Student1> listOfStudents = new HashSet<Student1>();    
public static File outFile = new File("StudentRegistry.dat"); 

// Data memebers 
private String studentID;
private String name;
private Date dateOfReg;

//Constructor 
Student1(String number,String name)
{
this.studentID = number;
this.name = name;
dateOfReg = new Date(); 
}

public String getName()
{
return name;
}

public String getStudentID()
{
return studentID;
}

public Date getDateOfReg()
{
return dateOfReg;
}

public void register() throws FileNotFoundException, IOException, ClassNotFoundException    
{ 
Set<Student1> sss = new HashSet<Student1>();    
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(outFile));
oos.writeObject(sss);
oos.close();      
}

public static HashSet<Student> getListOfStudents() throws FileNotFoundException, IOException, ClassNotFoundException
{
HashSet ss;
File inFile = new File("StudentRegistry.dat");
ObjectInputStream ois = new ObjectInputStream(new FileInputStream(inFile));
Set<Student> aNewSet = (HashSet<Student>) ois.readObject();
return  (HashSet<Student>) aNewSet;
}

public static Student getStudentbyID(String a) throws FileNotFoundException, IOException, ClassNotFoundException
{
Set<Student> aNewSet = new HashSet<Student>();
aNewSet = Student.getListOfStudents();
Student result = null;

for (Student x :aNewSet)
{
        if (x.getStudentID().equalsIgnoreCase(a))
        {
             result = x;
             break;
        }
    }  
    if (result == null)
    {
        JOptionPane.showMessageDialog(null, "Apartment not found");
    }
    return result;    

}

    @Override
public String toString()
{
// include the code to retrieve assigned apartment    
return "Name: " + name +" StudentID: "+ studentID + " Registered On: " + dateOfReg;
}

    @Override
public boolean equals(Object another)
{
Student1 stud = (Student1)another;
return this.name.equals(stud.name)&& this.studentID.equals(stud.studentID);
}

    @Override
public int hashCode()
{
int hash = name.hashCode();
return hash;

}    
} 
```

…………………………………………………………………………………………………………………………

我收到了这个错误：

```
run:
Exception in thread "main" java.io.InvalidClassException: stdaccmdmngmt.Student; local class incompatible: stream classdesc serialVersionUID = -3040096452457271695, local class serialVersionUID = -4849175799723926283
    at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:562)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1732)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashSet.readObject(HashSet.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at stdaccmdmngmt.Student.getListOfStudents(Student.java:76)
    at stdaccmdmngmt.Test.main(Test.java:34)
Java Result: 1
BUILD SUCCESSFUL (total time: 3 seconds) 
```

有什么帮助吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:44:26.727

你遇到过使用 Java 序列化的一个陷阱是持久性框架（而不是用于通信的数据格式）。您保留了学生数据，然后更改了 Student 类。现在，当您尝试读取持久数据时，它会失败，因为基本上，该类的两个版本不匹配。如果您在学生类上手动指定了 a `serialVersionUID`，则序列化框架不会在读取数据文件时阻塞（无论如何都不会立即）。

但根本问题是序列化与持久性不同——如果你想保存学生数据，那么你需要选择一个框架来这样做，这样就不容易受到类文件不兼容的影响。我建议保存为 CSV 文件开始，如果项目复杂性需要，也可以查看数据库解决方案。

* * *

*** 编辑 ***

作为临时修复，您可以尝试将类重命名为序列化框架所期望的`Student`并将其设置为。`serialVersionUID`这不是一个可靠的修复，它取决于自创建文件以来类发生了多少变化：

```
public class Student implements Serializable {
    public static final long serialVersionUID = -3040096452457271695L;

    // ...
} 
```

由于您的项目需要使用对象输出流，因此我建议`Externalizable`在您的类上实现接口`Student`，并实现将其读/写到对象输出流的方法：

```
public class Student implements Serializable, Externalizable {
    public static final long serialVersionUID = -3040096452457271695L;
    // ...

   @Override
   public void writeExternal(ObjectOutput out) throws IOException {
      out.writeUTF(getStudentID());
      out.writeUTF(getName());
      // etc
   }

   @Override
   public void readExternal(ObjectInput in) throws IOException,
         ClassNotFoundException {
      setStudentID(in.readUTF());
      setName(in.readUTF());
      // etc
   }

   // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:38:27.757

取自 Javadoc：

[http://java.sun.com/j2se/1.4.2/docs/api/](http://java.sun.com/j2se/1.4.2/docs/api/)

公共类 InvalidClassException 扩展 ObjectStreamException

当序列化运行时检测到类的以下问题之一时引发。

*   类的串行版本与从流中读取的类描述符的版本不匹配
*   该类包含未知数据类型
*   该类没有可访问的无参数构造函数

# android - 带有 ViewPager 的 FragmentPagerAdapter

> ID：10344773
> 
> 赞同：0
> 
> 时间：2012-04-27T04:35:40.890
> 
> 标签：android, android-layout

我想在横向和纵向模式下运行我的应用程序。我已经使用`ViewPager`并将`FragmentPagerAdapter`在您滑动列表时分离每个片段，但将它们保留在内存中，以便在用户向后滑动时可以简单地重新连接它们。它在纵向模式下正常工作。但是当它进入横向模式时，当我交换屏幕时它只显示第一个片段视图。请给我解决方案。

**片段适配器：**

```
public class FragmentAdapter extends FragmentStatePagerAdapter
{
    private final int three = 3 ;

    public FragmentAdapter(FragmentManager fm)
    {       
        super(fm);
        Log.e("adapter", "const");
    }

    @Override
    public Fragment getItem(int position)
    {
        Log.e("adapter", "getitem");
        return ViewFragment.newInstance(position);  
    }

    @Override
    public int getCount()
    {
        Log.v("adpt", "getcount");
        return three;
    }
} 
```

**视图片段：**

```
public final class ViewFragment extends Fragment
{
    private int position;
    public static ViewFragment newInstance(int position)
    {
        ViewFragment viewFragment = new ViewFragment();
        viewFragment.position = position;
        Log.e("newinstance", "pos="+position);

        return viewFragment;
    }

     @Override  
     public void onCreate(Bundle savedInstanceState)
     {  
         super.onCreate(savedInstanceState);  
     } 

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) 
    {
        Log.d("oncreateview", ":)");

        View view = null ;

        if (position == 0)
        {
            Log.e("oncreateview", "0/"+position);
            View v = inflater.inflate(R.layout.first_view_fragment, null) ;
            view = v.findViewById(R.id.firstViewFragmentLayout);

        }
        else if (position == 1 )
        {
            Log.e("oncreateview", "1/"+position);
            View v = inflater.inflate(R.layout.second_view_fragment, null) ;
            view = v.findViewById(R.id.secondViewFragmentLayout);

        }
        else if (position == 2)
        {
            Log.e("oncreateviewr", "2/"+position);
            View v = inflater.inflate(R.layout.third_view_fragment, null) ;
            view = v.findViewById(R.id.thirdViewFragmentLayout);
        }

        return view;
    }
} 
```

# java - 在 portlets .jsp 页面中，我连接了一个小程序，然后它抛出异常

> ID：10344777
> 
> 赞同：0
> 
> 时间：2012-04-27T04:36:23.307
> 
> 标签：java, applet, liferay, portlet

在 portlet 的 .jsp 页面中，我连接了一个小程序，然后它抛出异常 Portlet system is Liferay

“‘Portlet 的名称’暂时不可用。” 显示在页面上。

小程序的 html/jsp 代码：

```
<APPLET name="SignApplet" mayscript code="SignApplet.class" 
archive="<%=renderResponse.encodeURL(renderRequest.getContextPath() + "/lib/SignApplet.jar")%>, 
<%=renderResponse.encodeURL(renderRequest.getContextPath() + "/lib/crypto.tsp.jar")%>, 
<%=renderResponse.encodeURL(renderRequest.getContextPath() + "/lib/crypto.gammaprov.jar")%>"
height=500 width=500 style="display:none;">
    <PARAM NAME="file" VALUE="<%
    byte[] array = (byte[])session.getAttribute("downloadedFile");
    out.print(new String(array));
           %>" />
</APPLET> 
```

jsp 的名称是 LoadXLS。这是日志：

```
ApplicationDispatcher[/ExecutePortlet] PWC1231: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at java.lang.String.<init>(String.java:602)
    at org.apache.jsp.WEB_002dINF.jsp.LoadXLS_jsp._jspService(LoadXLS_jsp.java:232)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
...

04:18:44,421 ERROR [PortletRequestDispatcherImpl:137] org.apache.jasper.JasperException: java.lang.NullPointerException
org.apache.jasper.JasperException: java.lang.NullPointerException
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
...

04:18:44,421 ERROR [PortletServlet:97] javax.portlet.PortletException: org.apache.jasper.JasperException: java.lang.NullPointerException
javax.portlet.PortletException: org.apache.jasper.JasperException: java.lang.NullPointerException
    at com.liferay.portlet.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:139)
    at com.test.ExecutePortlet.doView(ExecutePortlet.java:249)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:100)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
...

ApplicationDispatcher[/ExecutePortlet] PWC1231: Servlet.service() for servlet ExecutePortlet Servlet threw exception
javax.portlet.PortletException: org.apache.jasper.JasperException: java.lang.NullPointerException
    at com.liferay.portlet.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:139)
    at com.test.ExecutePortlet.doView(ExecutePortlet.java:249)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:100)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
...

04:18:44,437 ERROR [render_portlet_jsp:154] java.lang.NullPointerException
    at java.lang.String.<init>(String.java:602)
    at org.apache.jsp.WEB_002dINF.jsp.LoadXLS_jsp._jspService(LoadXLS_jsp.java:232)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:02:13.947

从堆栈跟踪来看，您似乎正在使用 tomcat - 在 Tomcat 中找到 NullpointerException 的实际位置的一个好方法是转到 JSP 编译器生成的中间代码，通常在 tomcat 的工作文件夹中 - 转到 tomcat/work/ Catalina/localhost/your-web-app-name/org/apache/jsp/... 并在其中找到从您的 JSP 生成的 Java 代码（从堆栈跟踪中，它被命名为 LoadXLS_jsp.java。（“Catalina/localhost”是默认文件夹 - 在您的设置中可能会有所不同）

stacktrace 说，NullpointerException 发生在第 232 行 ( `at org.apache.jsp.WEB_002dINF.jsp.LoadXLS_jsp._jspService(LoadXLS_jsp.java:232)` ) - 虽然整个文件是机器生成的并且可读性不好，但将其映射回原始 JSP 应该很简单。

我的赌注是 - 正如 dragon66 在对您的问题的评论中所说 - session.getAttribute("downloadedFile") 为空，因此您使用的构造函数`out.print(new String(array));`获取传递的空值。该行`at java.lang.String.<init>(String.java:602)`告诉您 String 构造函数是引起 NullpointerException 的地方，但下一行 - 例如调用方法 - 告诉您调用字符串构造函数的位置。

# android - 主键 select 从清单中选择

> ID：10344781
> 
> 赞同：0
> 
> 时间：2012-04-27T04:36:49.483
> 
> 标签：android, sqlite, primary-key

我正在开发应用程序，它有多个清单，用户可以从中选择项目，这些项目是从 SQLite 生成的。
我使用了以下内容，但它只是给了我所选字符串的字符串。

这是我的 Product.java

```
list = (ListView)findViewById(android.R.id.list);
        list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

          ArrayList<String> results = new ArrayList<String>();

            try {
                sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

                sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                        SAMPLE_TABLE_NAMES +
                        " (_id INTEGER PRIMARY KEY AUTOINCREMENT, pro_name text);");
                sampleDB.execSQL("INSERT INTO " +
                        SAMPLE_TABLE_NAMES +
                        " Values ('1','Milk');");
                sampleDB.execSQL("INSERT INTO " +
                        SAMPLE_TABLE_NAMES +
                        " Values ('2','Sugar');");
                sampleDB.execSQL("INSERT INTO " +
                        SAMPLE_TABLE_NAMES +
                        " Values ('3','Oil');");
            }
            finally{
                if (sampleDB != null) 
                    sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAMES);
                    sampleDB.close();
            }
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_checked, new ArrayList()));

        new AddStringTask().execute();
    }

    class AddStringTask extends AsyncTask<Void, String, Void> {
        @Override
        protected Void doInBackground(Void... unused) {
            for (String item : items) {
                publishProgress(item);
                SystemClock.sleep(100);
            }

            return (null);
        }

        @Override
        protected void onProgressUpdate(String... item) {
            ((ArrayAdapter) getListAdapter()).add(item[0]);
        }

        @Override
        protected void onPostExecute(Void unused) {
            setSelection(3);
            Toast.makeText(Product.this, "Done!", Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        CheckedTextView check = (CheckedTextView) v;
        check.setChecked(!check.isChecked());
         String selection = l.getItemAtPosition(position).toString();
         Toast.makeText(this, selection, Toast.LENGTH_SHORT).show();
        if(check.isChecked())
        {
            Toast.makeText(Product.this, "Item are Checked!", Toast.LENGTH_SHORT).show();
        }
        if(!check.isChecked()&&!check.isChecked())
        {
            Toast.makeText(Product.this, "Item are not checked!", Toast.LENGTH_SHORT).show();
        }
    }

    public View getView(final int position, View convertView, ViewGroup parent) 
    {
        cursor.moveToPosition(position);
        LayoutInflater inf=getLayoutInflater();
        vi=inf.inflate(R.layout.total, null);
        vi.setTag(cursor.getInt(0));
        return vi;
    } 
```

这是 Final.java

```
setContentView(R.layout.total);
        txtEmps=(TextView)findViewById(R.id.txtEmps);
        txtPro=(TextView)findViewById(R.id.txtPro);
        list = (ListView)findViewById(android.R.id.list);

        startPKCounter();
        }
    @Override
    protected void onStart() {
        // TODO Auto-generated method stub

        try{

            dbHelper=new DatabaseHelper(this);
                        txtEmps.setText(txtEmps.getText()+String.valueOf(dbHelper.getEmployeeCount()));
            }
        finally
            {
            }
        super.onStart();
    }
    private void startPKCounter() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Counted", Toast.LENGTH_SHORT).show();
    }

    protected void onListItemClick(ListView l, View v, int position, long id) 
    {
        int primaryValue= (int)v.getTag(cursor);
        Toast.makeText(Final.this, primaryValue+"", Toast.LENGTH_SHORT).show(); 
    } 
```

它在 v.getTag () 上给了我错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:55:42.767

```
protected void onListItemClick(ListView l, View v, int position, long id) 
```

看到那里的`long id`部分了吗？那 ( `id`) 是您单击的列表项的主键。

# c# - 如何一次插入一个学生的所有科目分数？? 想要动态地 bcz 主题可能会改变

> ID：10344783
> 
> 赞同：0
> 
> 时间：2012-04-27T04:37:03.980
> 
> 标签：c#, asp.net, sql, sql-server-2005

我有这样的 Exam_Result 表和 Subject_Info 表....

```
1] Exam_Result table....

Resultid         numeric(18, 0)   Unchecked
Enroll_Number    varchar(50)      Checked
Student_Name     varchar(100)     Checked
Course_Id        varchar(50)      Checked
Semester         varchar(50)      Checked
Subject_Id       varchar(50)      Checked
MarksObtained    numeric(18, 0)   Checked
Exam_Type        varchar(50)      Checked

2] Subject_Info table....

Subject_Id       varchar(20)    Unchecked
Subject_Name     varchar(50)    Checked
Semester         varchar(10)    Checked
Course_Id        varchar(20)    Checked
Course_Type      varchar(20)    Checked 
```

我想一次插入每个子标记....例如，想要输入具有 11111、Course_Id = CIV 和 Sem = 1 的唯一学生 Enroll_No 的每个子标记....

```
Enroll_Number 11111
Course_Id     CIV
Semester      1 
```

这是主题...我想输入这样的标记...

```
Subject_Id   MarksObtained
EM           23
SM           25
CL           30 
```

并且这个结果必须存储到 Exam_Result 表中......

**注意：每个学期的科目都不是固定的，它可能会根据学校而改变......所以我希望它有动态的解决方案......**

你能帮我解决这个问题吗..??? 或任何其他解决方案给我.... thnks提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:44:43.563

我认为你可以用循环来做到这一点，这是一个例子

> 将@ID 声明为 VARCHAR(25)
> 
> SET @ID = '1,2,3,4,'
> 
> 选择 @ID 作为 TOTAL_ID
> 
> 声明@DELIMITER CHAR(1)
> 设置@DELIMITER = ','
> 
> 将 @CURRENTID 声明为 INT
> 
> WHILE(CHARINDEX(@DELIMITER,@ID,0) <> 0)
> 
> 开始选择@CURRENTID
> = RTRIM(LTRIM(SUBSTRING(@ID,1,CHARINDEX(@DELIMITER,@ID,0 )-1 ))),
> 
> ```
>  @ID = RTRIM(LTRIM(SUBSTRING(@ID,CHARINDEX(@DELIMITER,@ID,0)+1,LEN(@ID)))) 
> ```
> 
> 选择 @CURRENTID 作为 CURRENTID
> 
> 选择 @ID 作为 REMAINING_ID
> 
> 结尾

根据您的要求，我已经为您完成了循环

> 将@IDSCORE 声明为 VARCHAR(MAX)
> 
> SET @IDSCORE = 'EM,23,;SM,25,;CL,30,;'
> 
> 声明 @MAINDELIMITER CHAR(1)
> 
> 设置@MAINDELIMITER = ';'
> 
> 声明@DELIMITER CHAR(1)
> 
> SET @DELIMITER = ','
> 
> 声明 @CURRENTIDSCORE VARCHAR(MAX)
> 
> 将@SUBJECTID 声明为 VARCHAR(10)
> 
> 将@SCORE 声明为 VARCHAR(10)
> 
> 如果（@IDSCORE 不为空）
> 
> 开始
> 
> WHILE(CHARINDEX(@MAINDELIMITER,@IDSCORE,0) <> 0)
> 
> 开始
> 
> ```
>  PRINT @IDSCORE
> 
>   SELECT @CURRENTIDSCORE = RTRIM(LTRIM(SUBSTRING(@IDSCORE,1,CHARINDEX(@MAINDELIMITER,@IDSCORE,0 )-1 ))),
>       @IDSCORE = RTRIM(LTRIM(SUBSTRING(@IDSCORE,CHARINDEX(@MAINDELIMITER,@IDSCORE,0)+1,LEN(@IDSCORE))))   
>   SELECT @SUBJECTID = RTRIM(LTRIM(SUBSTRING(@CURRENTIDSCORE,1,CHARINDEX(@DELIMITER,@CURRENTIDSCORE,0 )-1 ))),
>       @CURRENTIDSCORE = RTRIM(LTRIM(SUBSTRING(@CURRENTIDSCORE,CHARINDEX(@DELIMITER,@CURRENTIDSCORE,0)+1,LEN(@CURRENTIDSCORE))))
>   SELECT @SCORE = RTRIM(LTRIM(SUBSTRING(@CURRENTIDSCORE,1,CHARINDEX(@DELIMITER,@CURRENTIDSCORE,0 )-1 ))),
>       @CURRENTIDSCORE = RTRIM(LTRIM(SUBSTRING(@CURRENTIDSCORE,CHARINDEX(@DELIMITER,@CURRENTIDSCORE,0)+1,LEN(@CURRENTIDSCORE))))
> 
>   PRINT @CURRENTIDSCORE   
> 
>   PRINT @SUBJECTID
> 
>   PRINT @SCORE 
> ```
> 
> 结尾
> 
> 结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:48:01.257

使用 SQL Server 2005，您可以使用 INSERT... UNION ALL hack 在单个语句中插入多行：

```
INSERT INTO MyTable (FirstCol, SecondCol)
SELECT 'First' ,1
UNION ALL
SELECT 'Second' ,2
UNION ALL
SELECT 'Third' ,3
UNION ALL
SELECT 'Fourth' ,4
UNION ALL
SELECT 'Fifth' ,5 
```

如此处更详细地描述：

[http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/](http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/)

顺便说一句，在 SQL Server 2008 中，TSQL 原生支持插入多行：

```
INSERT INTO Customers (Name, City, Phone)
VALUES
    ('Customer #1', 'Jerusalem', '2343245'),
    ('Customer #2', 'Tel Aviv', '0987345'),
    ('Customer #3', 'Haifa', '275466') 
```

[http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/12/05/sql-server-2008-t-sql-insert-multiple-rows.aspx](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/12/05/sql-server-2008-t-sql-insert-multiple-rows.aspx)

**编辑：**

根据要求，要在 C# 中构建这样的字符串，您可以执行以下操作：

```
// create some dummy data
var data = new List<Tuple<string, int>>
{
    new Tuple<string, int>("First", 1),
    new Tuple<string, int>("Second", 2),
    new Tuple<string, int>("Third", 3)
};

// create the [UNION ALL]...SELECT clauses
var selectClauses = String.Join(
    " UNION ALL ", 
    data.Select(t => String.Format("SELECT '{0}', {1}", t.Item1, t.Item2)));

// build our entire SQL string
// this results in the string:
// "INSERT INTO MyTable (FirstCol, SecondCol) SELECT 'First', 1 UNION ALL SELECT 'Second', 2 UNION ALL SELECT 'Third', 3"
var sql = "INSERT INTO MyTable (FirstCol, SecondCol) " + selectClauses;

// now execute this string against your database 
```

如果使用这种方法，您应该注意转义引号、SQL 注入等。这只是为了让你开始。

# opengl - 找不到 glXCreateContextAttribsARB

> ID：10344784
> 
> 赞同：2
> 
> 时间：2012-04-27T04:37:08.017
> 
> 标签：opengl, freeglut, mesa

我正在[*学习现代 3D 图形编程*](http://arcsynthesis.org/gltut/)，我正在尝试运行“你好，世界！” 三角程序。但是，我收到此错误：

```
jason@ubuntu:~/Desktop/Tutorial 0.3.8/Tut 01 Hello Triangle$ ./Tut\ 01\ Main
freeglut (./Tut 01 Main): glXCreateContextAttribsARB not found 
```

运行“glxinfo”给了我这个：

```
jason@ubuntu:~/Desktop/Tutorial 0.3.8/Tut 01 Hello Triangle$ glxinfo | grep OpenGL
OpenGL vendor string: Tungsten Graphics, Inc
OpenGL renderer string: Mesa DRI Intel(R) Ironlake Mobile 
OpenGL version string: 2.1 Mesa 7.11
OpenGL shading language version string: 1.20
OpenGL extensions: 
```

'lspci' 命令给了我这个：

```
jason@ubuntu:~/Desktop/Tutorial 0.3.8/Tut 01 Hello Triangle$ lspci | grep "VGA"
00:02.0 VGA compatible controller: Intel Corporation Core Processor Integrated Graphics Controller (rev 02) 
```

通过一些谷歌搜索，我猜我正在使用 OpenGL 2.1，而我应该将 OpenGL 3.3 用于“glXCreateContextAttribsARB”，尽管我真的不知道。有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T07:02:29.003

API 需要 GLX 1.4 ，`glXCreateContextAttribsARB`至少需要 OpenGL 3.0（但实际上是 3.2）。

*   [https://www.khronos.org/registry/OpenGL/extensions/ARB/GLX_ARB_create_context.txt](https://www.khronos.org/registry/OpenGL/extensions/ARB/GLX_ARB_create_context.txt)

您的 GPU 驱动程序报告它仅支持 OpenGL 2.1，这与使用 Mesa 7.x 一致。最新的 Mesa 8.x 确实支持 OpenGL 3，但您需要检查它是否适用于您的发行版，并且还支持您的特定 GPU 型号。

底线 - 您可能会受到硬件和驱动程序的限制，只能使用旧的 2.1 驱动程序模型，这意味着您无法利用“现代”方法。对不起！

在此处检查 DRI 驱动程序状态：

*   [http://dri.freedesktop.org/wiki/Intel?highlight=%28CategoryHardwareVendor%29](http://dri.freedesktop.org/wiki/Intel?highlight=%28CategoryHardwareVendor%29)

# iphone - Sqlite 查询，比较 datetime 字段与当前日期时间

> ID：10344786
> 
> 赞同：2
> 
> 时间：2012-04-27T04:37:14.870
> 
> 标签：iphone, objective-c, ios, sqlite, datetime

在我的 iPhone 应用程序中，我想查询过去的记录。有一个名为 "task_dateTime" 的日期时间字段。如果使用，从任务中选择task_dateTime；结果将如下所示，2012 年 4 月 26 日 16:32 2012 年 4 月 27 日 16:38 2012 年 4 月 29 日 05:32

我如何查询过去的记录。这意味着我想将“task_dateTime”字段与当前时间进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T05:21:26.547

试试`select task_dateTime from tasks where task_dataTime < CURRENT_TIME`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:56:49.147

对于当前日期： NSDateFormatter *formatter = [[NSDateFormatter alloc] init]; [格式化程序 setDateFormat:@"MM-dd-yyyy"]; NSString *dateString=[格式化字符串FromDate:[NSDate date]];

[current_date setText:dateString]; //current_date 将是您的文本框的名称...

然后比较两个字符串...

by isequal to string

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T06:18:43.140

我假设您正在寻找 SQLite 日期逻辑，您可以将日期逻辑放在一个`where`子句中。如果是这种情况，值得注意的是 SQLite 甚至没有正确的日期/时间数据类型，如此[处](http://www.sqlite.org/datatype3.html#datetime)所述。显然，一旦您将字符串恢复为 Objective C，您就可以使用 NSDateFormatter 对字符串进行一些转换，但是如果您想要在 SQL`where`子句中使用日期逻辑，那么您真的必须遵守 SQLite 对 SQLite 中概述的时间字符串格式的[指导日期时间函数](http://www.sqlite.org/lang_datefunc.html)。

如果你想要一个人类可读格式的日期，你可以使用类似“YYYY-MM-DD HH:MM:SS”的格式。请参阅下面的一些示例。您可以使用 NSDateFormatter 来获取它并将其转换为 NSDate，然后您可以从中创建您想要用于 UI 的任何格式的日期字符串。

**更新：**

这是一些示例 SQL：

```
create table datetest (dt datetime);

insert into datetest values (datetime('now','-1 day'));
insert into datetest values (datetime('now'));
insert into datetest values (datetime('now','+1 day'));

select * from datetest;

select * from datetest where dt < datetime('now'); 
```

第一个 select 语句将检索所有三行。第二个只返回其中两个。

# mailchimp - “没有这样的文件 sbjson.h” chimpkit

> ID：10344787
> 
> 赞同：1
> 
> 时间：2012-04-27T04:37:17.853
> 
> 标签：mailchimp

我正在尝试订阅邮件列表。我需要为此使用 mailchimp API。我知道 chimpkit2 是objective-c 的包装器。我使用此链接下载了一个示例项目：[https](https://github.com/mailchimp/chimpkit2) ://github.com/mailchimp/chimpkit2并尝试运行它，但它不起作用。我给了我“没有这样的文件 sbjson.h”错误。我试图将 sbjson 框架包含到我的项目中，但这次它给出了其他错误。

我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:58:12.240

您可能忘记导入 json-framework 依赖项。来自 Chimpkit 文档：

> cd Lib/ChimpKit
> 
> git子模块初始化
> 
> git子模块更新

# c# - AtlUnadvise 调用后 RefCount 保持不变

> ID：10344789
> 
> 赞同：2
> 
> 时间：2012-04-27T04:37:32.253
> 
> 标签：c#, c++, events, com

我们发现内存泄漏问题是由于在 AtlUnadvise() 之后 RefCount 没有减少。

这是测试代码：

```
void CCppTesterDlg::OnBnClickedTextbtn()
{
    CComObject<CManagedGuiEventSinkImpl> *pEventSink;
    TestForm::ITestFormPtr pTestFormPtr( __uuidof(TestForm::TestForm) );

    //Attach our COM event sink to the managed dialog to listen for keyboard and mouse events
    if( CComObject<CManagedGuiEventSinkImpl>::CreateInstance(&pEventSink) == S_OK )
    {
        HRESULT hr = S_FALSE;
        DWORD   dwCookie = 0;
        CComPtr<ManagedGuiEventInterface::IManagedGuiEventSink> pSink( pEventSink );  // ref count == 1

        hr = AtlAdvise( pTestFormPtr, pSink, __uuidof(ManagedGuiEventInterface::IManagedGuiEventSink), &dwCookie );
        // ref count == 2

        //pTestFormPtr->OpenDialog();

        //Detach the event sink after the modal dialog has been closed
        hr = AtlUnadvise( pTestFormPtr, __uuidof(ManagedGuiEventInterface::IManagedGuiEventSink), dwCookie );
        // ref count == 2
    }
} 
```

CManagedGuiEventSinkImpl 类用于从 C# 模块获取事件，到目前为止它可以工作，但是我们发现上面的 pEventSink 对象没有正确释放。

我在这些课程中错过了什么吗？

任何参考将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:14:33.217

> > 您如何准确地看到托管接口的 CCW 上的引用计数？pEventSink 是一个 CComObject 对象，因此您可以在监视窗口中检查引用计数，它不是托管对象。

我的朋友刚刚向我展示了 FinalRelease() 将在 GC.Collect() 被调用后被击中，所以它被 .net GC 持有。

谢谢大家。

# python - Django South 没有为 user_profiles 创建表

> ID：10344792
> 
> 赞同：3
> 
> 时间：2012-04-27T04:38:00.770
> 
> 标签：python, django, django-south

我想重置我的 Django 项目的数据库，所以我做了以下步骤：

1.  删除了我的 SQLite 数据库
2.  做过`python manage.py syncdb`
3.  做过`python manage.py migrate users --fake`

创建新帐户并登录后，我收到以下错误消息：

```
no such table: users_userprofile 
```

这是我的用户 model.py 的样子：

```
class UserProfile(models.Model):
  user = models.OneToOneField(User)
  joined_goals = models.ManyToManyField(Goal, related_name="joined_goals")
  followingGoals = models.ManyToManyField(Goal, related_name="following_goals")

  def __unicode__(self):
    return self.user.username

  def get_goals(self):
    try:
      goals = Goal.objects.filter(user=self.user)
      return goals
    except Goal.DoesNotExist:
      return []

def create_user_profile(sender, instance, created, **kwargs):
    if created:
      userProfile = UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

所以，有一个 UserProfile 类，但 South 似乎没有制作表格来保存用户配置文件。当我这样做时`python manage.py schemamigration users --auto`，它说似乎没有任何改变。如何获得它来创建 userprofiles 表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T21:18:18.687

我有这个完全相同的问题。事实证明，使用 South 时存在某种循环依赖。要解决此问题，请不要在运行 syncdb 时创建超级用户，而是运行：

```
python manage.py createsuperuser 
```

使用 syncdb 创建数据库后。此时，您的配置文件表将已创建，并且 post_save 信号将成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:48:05.703

尝试在没有 --fake 选项的情况下迁移表。如果您在数据库中应用了更改但在 south_migrationhistory 表中没有应用，则 Fake 很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T15:01:53.333

以下应该适用于某些人：

```
python manage.py schemamigration myapp --initial
python manage.py migrate myapp 
```

# php - 用于搜索集成在 javascript 片段中的论坛的 PHP 代码

> ID：10344794
> 
> 赞同：0
> 
> 时间：2012-04-27T04:38:18.860
> 
> 标签：php, javascript

我做了一个 chrome 扩展来搜索网站 dev.bukkit.org，它适用于以下代码：

```
 <script>
    function onLoad() {
      document.getElementById("mytextfield").focus();
    }

    function onKeyPress(e) {
      if (e.keyCode == 13) {
        openResults();
      }
    }

    function openHomePage() {
      window.open("http://dev.bukkit.org/");
    }

    function openResults() {
      window.open("http://dev.bukkit.org/search/?search=" + encodeURIComponent(document.getElementById("mytextfield").value));
    }
  </script>
</head>
<body onload="onLoad();">
  <img src="png-3.png" onclick="openHomePage();" style="border-width: 0px; cursor: pointer" /><br>
  <div name="myFormDiv" style="center: 6px;">
  <br>
    <center><input type="search" id="mytextfield" name="mytextfield" placeholder="Search..." onkeypress="onKeyPress(event);" /></center>
  </div> 
```

我现在想选择搜索 forum.bukkit.org。不幸的是，它需要一个令牌来搜索论坛。一位朋友给了我一个 php 片段，可以让您搜索论坛，但我无法将其集成到原始代码中以搜索 dev.bukkit.org。帮助将不胜感激，我迷路了！PHP论坛搜索代码：

```
<?php

$q=$_GET['q'];
echo do_post_request("http://forums.bukkit.org/search/search",'keywords='.$q.'&_xfToken=10000%2C1333276150%2C1b8a644c97b33e9cfda0e15170ca5185cf15bc3a');

function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
}
?> 
```

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:01:34.220

基于[使用 JavaScript 添加自定义 HTTP 标头](https://stackoverflow.com/questions/581383/adding-custom-http-headers-using-javascript)，您应该使用`XmlHttpRequest`. 我个人的建议是使用 ajax 调用 php 脚本并检索数据。您可以使用 jQuery 的[.post()](http://api.jquery.com/jQuery.post/)轻松实现它。

# java - 在 java 中遍历空容器时出现 NullPointerException

> ID：10344800
> 
> 赞同：0
> 
> 时间：2012-04-27T04:39:27.017
> 
> 标签：java, nullpointerexception

```
public void clearTrash()
{
    for (Email i1 : trash.getEmails()) trash.removeEmail(trash.getEmails().indexOf(i1));
} 
```

我认为如果trash.getEmails() 为空，这将简单地返回，因为没有什么可以迭代，但是在使用空文件夹进行调试时，它会抛出NullPointerException。为什么那行不通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:56:36.780

我不确定这个`foreach`循环背后的逻辑是什么，但我建议您`Iterator`在迭代时使用删除项目，即：

```
Iterator<Email> it = trash.iterator();
while (it.hasNext()) {
    // some logic ....
    it.remove();
} 
```

至于您的 NPE，可能`trash`或可能`trash.getEmails()`为空。检查空值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:44:25.480

您的`trash`var 是`null`或列表`trash.getEmails()`为空

所以当你使用它时，它就像

```
for(Email i1 : null) 
```

尝试习惯在使用之前评估您的列表：

```
if (trash != null) {
    //some logic here...
    if (trash.getEmails() != null) {
        for(Email i1 : null) {
            //your code...
        }
    }
} 
```

另外，作为旁注，创建一个新列表而不是删除他的所有元素在性能上会更好。

```
//deleting the items in the List<Email>
//maybe the collection is not List, just a supposition, still the idea is the same
trash.setEmails(new List<Email>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T14:24:46.863

使用[org.apache.commons.collections.CollectionUtils](http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/CollectionUtils.html)

```
 if(CollectionUtils.isNotEmpty(trash.getEmails()){

    //Your logic.
 } 
```

isNotEmpty() 将检查空列表和空列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T04:57:07.447

始终将[防御性编程](http://en.wikipedia.org/wiki/Defensive_programming)合并到您的代码中。

无论你在哪里看到一个对象，想一想如果它为空该怎么办，如果它不为空怎么办。

如下所示，您可以实施。

```
 if(object==null){
    //doSomething()
    }else{
//doSomethingElse()
    } 
```

检查垃圾是否为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-28T05:34:12.963

请参考以下线程以获得更好的理解：[for each 循环如何防止空列表？](https://stackoverflow.com/questions/24845281/how-does-a-for-each-loop-guard-against-an-empty-list)

在您的情况下，收集垃圾为**null**。因此，当您取消引用垃圾时，您会得到一个空指针异常。因此，给您空指针异常的不是空容器，而是导致空指针异常的垃圾（空对象）的取消引用。

# asp-classic - 创建一个函数，asp？

> ID：10344801
> 
> 赞同：-1
> 
> 时间：2012-04-27T04:39:44.630
> 
> 标签：asp-classic, vbscript

我正在尝试创建一个函数来检查有效学期，例如秋季 #### 或春季 ####，但我一直收到此错误

> Microsoft VBScript 编译错误“800a03f6”应为
> “结束”
> 否则
> ^

这是我的代码...

```
Function IsSemester(UserInput)
' Validation: Spring, Fall

Temp=UserInput

If Len(Temp)=9 Then IsSemester=True

For P=1 to 4

If Left(Temp,P,1)<>"Fall" Then IsSemester=False

Next

If Mid(Temp,5,1)<>" " Then IsSemester=False

For P=6 to 9

If Not IsInteger(Mid(Temp,P,9)) Then IsSemester=False

Next

Else

IsSemester=True 

End If

If Len(Temp)=11 Then IsSemester=True

 For C=1 to 6

If Left(Temp,C,6)<>"Spring" Then IsSemester=False

 Next

If Mid(Temp,7,1)<>" " Then IsSemester=False 

For C=8 to 11

If Not IsInteger(Mid(Temp,8,11)) Then IsSemester=False

Next

Else 

IsSemester=True
End If
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T04:55:51.783

太简单了，缩进你的代码，你会发现问题。

```
Function IsSemester(UserInput)
' Validation: Spring, Fall

    Temp=UserInput

    If Len(Temp)=9 Then IsSemester=True

    For P=1 to 4

        If Left(Temp,P,1)<>"Fall" Then IsSemester=False

    Next

    If Mid(Temp,5,1)<>" " Then IsSemester=False

    For P=6 to 9

        If Not IsInteger(Mid(Temp,P,9)) Then IsSemester=False

    Next

    Else

        IsSemester=True 

    End If

    If Len(Temp)=11 Then IsSemester=True

    For C=1 to 6

        If Left(Temp,C,6)<>"Spring" Then IsSemester=False

    Next

    If Mid(Temp,7,1)<>" " Then IsSemester=False 

    For C=8 to 11

        If Not IsInteger(Mid(Temp,8,11)) Then IsSemester=False

    Next

    Else 

        IsSemester=True
    End If
End Function 
```

如果你使用

```
IF Len(temp)=9 Then IsSemester=True 
```

表示它是一个独立的 If 语句，只有同一行的 THEN 之后的语句才会受该条件控制，因此下一行的 For 循环是一个单独的语句，与该 IF 无关。您应该将代码更改为

```
If Len(Temp)=9 Then
    IsSemester = True

    '<whatever your code here>
End If 
```

# rest - 如何模拟 REST API

> ID：10344806
> 
> 赞同：7
> 
> 时间：2012-04-27T04:40:34.453
> 
> 标签：rest, mocking, moq

我有一个 MVC 应用程序需要调用第三方供应商的 REST API。

REST API 应该返回一个 JSON 结果，但在我们开始开发和测试我们的 MVC 应用程序之前它还没有准备好，所以我想模拟 REST API（供应商将提供）。

我研究了最小起订量，但它似乎不支持模拟 REST API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:05:40.033

最好的方法可能取决于什么需要最少的学习曲线和设置，以及适合您的环境。

我已经使用 node.js 和 express 完成了这种事情。这是一个非常快速的启动，并且很容易做到。作为一个最小的案例，我只是将我需要的 json 放在文件中并为它们提供服务以响应 REST 请求。更改周围的路线以匹配 api 非常容易。有时我对 json 文件很懒，所以我用 SQL 编写查询来生成它们，或者如果我需要大量数据，我会编写 js 代码来生成它们。

如果您使用的是 ASP.NET MVC（不确定您指的是 MVC），那么定义路由以制作 REST API 非常好。您可能不需要额外的工具。

比起罐装工具，我更喜欢真正的服务器和真正的语言。如果您是熟悉 Selenium 和 Javascript 的测试人员，那么 Node.js 方法可能是您的最佳选择。您了解该语言，无需投入太多资金即可让服务器正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-22T03:10:00.853

这可以通过 Soap UI 完成，如果您已经使用过 Soap UI，这应该很容易。以下是简单的步骤：

*   在 Soap UI 中创建一个 Rest 项目
*   向项目添加一个新的 Rest mock
*   添加模拟动作
*   向模拟操作添加模拟响应并运行模拟。

[我在这里](https://javacodehouse.com/mock-rest-apis-soapui)提供了带有可下载示例的分步说明

# iphone - 当 iPhone/iPad 的设备方向发生变化时如何处理 UI 组件？

> ID：10344808
> 
> 赞同：1
> 
> 时间：2012-04-27T04:41:10.137
> 
> 标签：iphone, objective-c, ios, uideviceorientation

我的 UIView 上有几个组件，例如文本字段、标签、表格、按钮。我想处理设备方向的变化。如何使这些组件自动排列在正确的位置？还是我需要重新构建它们？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T04:49:33.443

```
- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
[self adjustViewsForOrientation:toInterfaceOrientation];
}

- (void) adjustViewsForOrientation:(UIInterfaceOrientation)orientation {
if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) {

    // set you subviews,Label button frame here for landscape mode,,
}
else if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) {
    // set you subviews,Label button frame here for portrait-mode,
}
} 
```

//不要忘记添加这个`Delegate`方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    // Return YES for supported orientations
    return YES;
} 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T04:50:27.457

![在此处输入图像描述](../Images/eb4640f2463e5a7911907770a23ab412.png)您可以使用 Autosizing 选项进行方向更改。甚至不需要编写一行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T05:38:53.253

试试这个

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

    if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
       // portrait Arrangement
    }       
    else 
    { 
        // Landscape Arrangement
    }
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || 
            interfaceOrientation == UIInterfaceOrientationPortrait || 
            interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
            interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

# php - 从本地 PC 读取来自 Outlook php 的电子邮件

> ID：10344809
> 
> 赞同：3
> 
> 时间：2012-04-27T04:41:21.460
> 
> 标签：php, email, outlook

我有一个奇怪的要求。

我需要使用 php 从本地 pc 阅读 Outlook 电子邮件。

我将获得用户凭据。

那么有什么办法可以做到这一点？

它需要在所有主流浏览器中都能正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T05:07:06.683

不知道你为什么要尝试从“单”电脑上的本地邮件文件中获取它，我宁愿从`POP3/IMAP`路由中攻击它，它会是一个基于 PHP 的邮件客户端，或者你需要它的任何东西（获取邮件、过滤、检查、触发事件等；）。

但是你所描述的对任何事情都是不可行的，我看不到客户付费让简单的客户邮件通过 PHP 访问。

**以下是一些 PHP/Email 阅读参考：**

*   [http://garrettstjohn.com/entry/reading-emails-with-php/](http://garrettstjohn.com/entry/reading-emails-with-php/)
*   [http://davidwalsh.name/gmail-php-imap](http://davidwalsh.name/gmail-php-imap)
*   [http://www.tuxradar.com/practicalphp/15/6/3](http://www.tuxradar.com/practicalphp/15/6/3)

# iphone - iOS 获取已安装的配置文件

> ID：10344814
> 
> 赞同：15
> 
> 时间：2012-04-27T04:41:47.243
> 
> 标签：iphone, certificate, keychain, ios5, ios5.1

我目前正在开发的应用程序需要使用配置文件才能连接到服务器以下载 XML。证书以 .p12 文件的形式分发，它们可以安装在 iPhone 的设置应用程序中，如左下图所示。

问题是整个互联网上的人都在说这是不可能的。

然而，[Junos Pulse](http://www.juniper.net/uk/en/products-services/software/junos-platform/junos-pulse/)可以做到这一点（右下图）。

它只是阅读我所需要的配置文件。

![简介](../Images/d5f6adfe0568be2a8884339cc4da1852.png)![朱诺斯脉冲](../Images/90d6a29cec8afa31a68b8967c87baa38.png)

我不必将它们安装到 Junos Pulse 应用程序中。将它们添加到系统并启动应用程序就足以让我的个人资料被识别。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T16:42:25.840

Junos 应用程序能够做到这一点的原因已在 Apple 开发者论坛中的一篇文章中进行了解释。

原始问题：[https ://devforums.apple.com/message/660579#660579](https://devforums.apple.com/message/660579#660579)

关于 Junos 应用的说明：[https ://devforums.apple.com/message/351326#351326](https://devforums.apple.com/message/351326#351326)

总而言之，SDK 中没有提供对此的访问权限，并且只能通过 Apple 的邀请来访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T00:53:48.327

你不会的。您的应用程序是沙盒的，请阅读[iOS App Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html)。开发人员资料不是供应用程序访问的公共信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T22:59:41.600

我不确定您要完成什么，但 iOS[钥匙串](http://developer.apple.com/library/ios/#DOCUMENTATION/Security/Reference/keychainservices/Reference/reference.html)服务允许您以（假设）安全的方式存储和检索证书和密钥。除了存储密码，我没有将 API 用于存储密码，所以我不能说它如何与证书一起使用，但根据文档，它可能对你有用。

特别是看看`SecItemCopyMatching`函数。

# html - HTML 垂直对齐

> ID：10344820
> 
> 赞同：1
> 
> 时间：2012-04-27T04:42:13.423
> 
> 标签：html, css, cross-browser, vertical-alignment

让 div 垂直居中的最快方法是什么 - 跨浏览器？

**HTML：**

```
<body>
    <div id="mainContainer">
        <header>
            blah
            </header><!-- End header -->
        </div><!-- End mainContainer -->

</body> 
```

**CSS：**

```
#mainContainer{
    width:960px;
    margin:60px auto;
    background:#FFF;
    border:1px solid black;
}
header{
    padding:30px 0 30px 0;
    background:red;
    margin:0 auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:47:41.907

如果你可以指定一个高度，那么你可以使用

```
position:absolute
top:50%;
left:50%;
width:200px;
height:200px;
margin-left:-100px;
margin-top:-100px; 
```

其中负边距分别是宽度和高度的一半

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:14:56.413

嘿，请使用简单的方法

[https://stackoverflow.com/a/10010055/1312610](https://stackoverflow.com/a/10010055/1312610)

[http://jsfiddle.net/ERuX4/1/](http://jsfiddle.net/ERuX4/1/)

# ruby - gem install pg 在 OSX Lion 上不起作用

> ID：10344821
> 
> 赞同：31
> 
> 时间：2012-04-27T04:42:14.970
> 
> 标签：ruby, postgresql, rubygems, osx-lion, pg

这个问题有很多变体，但似乎没有一个可以解决我的问题。

我正在运行 OSX Lion (10.7.3)。安装了最新的 XCode。

我已经使用 postgresapp.com 的 Postgres.app 包安装了 Postgres。

但是当我尝试安装 pg gem 时，我遇到了失败：

```
$ gem install pg -- --with-pg-config=/Applications/Postgres.app/Contents/MacOS/bin/pg_config
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb --with-pg-config=/Applications/Postgres.app/Contents/MacOS/bin/pg_config
Using config values from /Applications/Postgres.app/Contents/MacOS/bin/pg_config
checking for libpq-fe.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:970:in `block in find_header'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:969:in `find_header'
    from extconf.rb:40:in `<main>'

Gem files will remain installed in /Users/disaacs/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.13.2 for inspection.
Results logged to /Users/disaacs/.rvm/gems/ruby-1.9.3-p125/gems/pg-0.13.2/ext/gem_make.out 
```

该`/Applications/Postgres.app/Contents/MacOS/bin/pg_config`命令的输出是：

```
$ /Applications/Postgres.app/Contents/MacOS/bin/pg_config
BINDIR = /Applications/Postgres.app/Contents/MacOS/bin
DOCDIR = /Applications/Postgres.app/Contents/MacOS/share/doc
HTMLDIR = /Applications/Postgres.app/Contents/MacOS/share/doc
INCLUDEDIR = /Applications/Postgres.app/Contents/MacOS/include
PKGINCLUDEDIR = /Applications/Postgres.app/Contents/MacOS/include
INCLUDEDIR-SERVER = /Applications/Postgres.app/Contents/MacOS/include/server
LIBDIR = /Applications/Postgres.app/Contents/MacOS/lib
PKGLIBDIR = /Applications/Postgres.app/Contents/MacOS/lib
LOCALEDIR = /Applications/Postgres.app/Contents/MacOS/share/locale
MANDIR = /Applications/Postgres.app/Contents/MacOS/share/man
SHAREDIR = /Applications/Postgres.app/Contents/MacOS/share
SYSCONFDIR = /Applications/Postgres.app/Contents/MacOS/etc
PGXS = /Applications/Postgres.app/Contents/MacOS/lib/pgxs/src/makefiles/pgxs.mk
CONFIGURE = '--prefix=/Users/mattt/Code/heroku/Postgres/Postgres/Vendor/postgres' '--enable-thread-safety' '--with-openssl' '--with-gssapi' '--with-bonjour' '--with-krb5' '--with-libxml' '--with-libxslt' '--with-ossp-uuid' '--with-perl' '--with-python'
CC = gcc
CPPFLAGS = -I/usr/include/libxml2
CFLAGS = -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -Wformat-security -fno-strict-aliasing -fwrapv
CFLAGS_SL = 
LDFLAGS = -Wl,-dead_strip_dylibs
LDFLAGS_EX = 
LDFLAGS_SL = 
LIBS = -lpgport -lxslt -lxml2 -lssl -lcrypto -lgssapi_krb5 -lz -lreadline -lm 
VERSION = PostgreSQL 9.1.3 
```

所有这些设置似乎都是正确的，除了 CONFIGURE 变量（它似乎是指其他一些计算机——我没有名为 mattt 的用户）。

mkmf.log 文件的内容是

```
"/usr/bin/gcc-4.2 -o conftest -I/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-darwin10.8.0 -I/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/backward -I/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1 -I. -I/Users/disaacs/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/Applications/Postgres.app/Contents/MacOS/include  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration  -fno-common -pipe conftest.c  -L. -L/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib -L/Users/disaacs/.rvm/usr/lib -L. -L/usr/local/lib -L/Applications/Postgres.app/Contents/MacOS/lib     -lruby.1.9.1  -lpthread -ldl -lobjc "
checked program was:
/* begin */
1: #include "ruby.h"
2:
3: int main() {return 0;}
/* end */ 
```

任何建议，将不胜感激。

我查看了 extconf.rb 文件，经过一些调试，我发现它是一个调用

```
find_header ('libpq-fe.h') 
```

那是失败的。不是因为 libpq-fe.h 不存在，而是因为`find_header`方法本身失败了。我尝试使用 irb 运行 find_header，得到了同样的错误：

```
$ irb
1.9.3-p125 :001 > require 'mkmf'
 => true 
1.9.3-p125 :002 > find_header 'libpq-fe.h'
checking for libpq-fe.h... RuntimeError: The compiler failed to generate an executable file.
You have to install development tools first. 
```

**编辑：**

发现我的电脑一定比我想象的还要糟糕。我正在为另一个项目进行捆绑安装，安装 sqlite3 gem 时遇到了非常相似的失败。

```
checking for sqlite3.h... *** extconf.rb failed *** 
```

过去我从来没有遇到过 sqlite3 gem 的问题。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-05T03:34:15.810

我终于找到了问题的原因！虽然我仍然不确定这个问题是如何产生的。

查看我的安装命令失败时创建的 mkmf.log 文件的内容（请参阅我的原始帖子）。它记录尝试运行以下命令

```
/usr/bin/gcc-4.2 ...and so on... 
```

我的系统上没有`/usr/bin/gcc-4.2`。有一个`gcc`，它象征性地链接到 `llvm-gcc-4.2`。我的解决方案是创建另一个符号链接

```
sudo ln -s llvm-gcc-4.2 gcc-4.2 
```

建立此链接后，我的`gem install pg`命令没有任何问题。

[我在 Frozen Canuck 博客上的Error Installation Ruby Gem with C Extension](http://frozencanuck.wordpress.com/tag/extconf-rb/)中找到了解决这个问题的方法。他推测问题可能是由 XCode 的版本冲突引起的。不管是什么原因，我永远的感谢！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-24T05:00:53.297

在 OS X 小牛

```
sudo ln -s /usr/bin/llvm-gcc /usr/bin/gcc-4.2 
```

作品。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-03T11:18:44.733

我有一个类似的问题。根据 bobfet1 对[类似问题](https://stackoverflow.com/questions/6209797/cant-find-the-postgresql-client-library-libpq)的回答，我能够通过以下方式安装 gem：

```
sudo env ARCHFLAGS="-arch x86_64" gem install pg -- --with-pg-config=/Applications/Postgres.app/Contents/MacOS/bin/pg_config 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-11-04T19:59:44.100

感谢这个人： http: [//www.computersnyou.com/2025/](http://www.computersnyou.com/2025/)

在 Mavericks 上使用：（`xcode-select --install`假设您已经从应用商店安装了 Xcode）有效。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-03T16:00:46.767

从应用商店安装 xcode 是不够的。您还需要 xcode 的命令行工具。 [https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html)

从应用商店安装 xcode 后，打开 xcode。转到 Xcode->Open Developer Tool->More Developer Tools 下载并安装最新的命令行工具。

打开终端窗口并运行： sudo gem install pg

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-11-03T19:19:56.943

Mavericks 10.9 上的类似问题——但它是由于未同意 Xcode 许可协议引起的。布莱赫。

运行`sudo xcodebuild`并同意垃圾。一切都按预期工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-03T11:48:44.970

我也遇到了这个问题，对我来说，答案是更新所有东西的 RVM。

```
rvm get head
rvm install 1.9.2 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-05T15:10:33.927

我也在山狮上，除了@grilix 建议的“sudo ln -s /usr/bin/{llvm-,}gcc-4.2”，我还需要做：

```
sudo ln -s /usr/bin/{llvm-,}g++-4.2 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-06-12T00:15:27.617

小牛升级后...

重新安装你的 ruby​​ 版本。

```
rvm uninstall 1.9.2-p320 
```

然后

```
rvm install 1.9.2-p320 
```

或您拥有的任何版本的红宝石。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-27T16:58:51.473

我在 Mountain Lion 上，Dave Isaacs 接受的答案对我有用。我也不得不做

```
sudo ln -s llvm-g++-4.2 g++-4.2 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-10-02T00:20:38.303

在尝试上述所有其他步骤但均未成功后，重新安装 Ruby 2.0.0-p247 并没有像上面那样更新 RVM 本身 ( [https://stackoverflow.com/a/10430742/2807795 )。](https://stackoverflow.com/a/10430742/2807795)

```
rvm get head
rvm install 2.0.0 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-03-18T16:45:13.917

```
$ gem install pg 
```

如果失败：

```
$ sudo gem install pg 
```

然后，如果失败：

```
$ sudo find / -name “pg_config” 
```

找到`pg_config`' 位置后，运行此命令以最终安装它：

```
$ sudo gem install pg --with-pg-config=/usr/local/Cellar/postgresql/9.5.1/bin/pg_config 
```

当然，您需要将路径更改为您找到的任何位置`pg_config`。

然后，使用 来检查您安装的 gem `gem list`，它应该显示如下内容：

![<code>gem list</code> 显示正确的东西](../Images/0662db324f97e4e35f28af97e206bdb4.png)

更多信息可以在[我的指南](https://medium.com/@naveeninja/cannot-install-pg-gem-in-mac-osx-ddd9e3df1748#.p85b4d87b)中找到。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-28T00:00:47.423

如果输出包括：

```
/Users/disaacs/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': \
    The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first. 
```

那么您的编译环境确实有问题。特别是当失败是第一个`extconf.rb`运行的测试时。

如果您安装了 XCode，那么也许您没有安装 XCode 的命令行工具组件？它们[最近从 XCode 中分离出来](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html)，因此您需要单独安装它们。

# ruby - 如何在 ruby 中创建接口？

> ID：10344822
> 
> 赞同：2
> 
> 时间：2012-04-27T04:42:22.137
> 
> 标签：ruby

我来自 Java，想知道 ruby​​ 中是否存在接口？如何模仿 Java 接口提供的契约行为？

例如：

```
interface ContactService {
    public boolean successful(Contract contract);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:07:45.243

Ruby 中没有真正的接口概念。相反，人们倾向于只编写不关心他们正在操作的对象类型的通用方法，而只使用对象需要实现的一些特定方法集。

例如：

```
def add(a,b)
  a+b
end 
```

该`add`方法不关心它的参数是整数、字符串还是数组。它们只需要是一些实现`+`操作符的对象。

```
def calltwice(obj)
  obj.call
  obj.call
end 
```

该`calltwice`方法不关心`obj`是 lambda、proc 还是某个自定义类。它只关心对象是否有`call`方法。

你可以在注释中非正式地定义一个接口，告诉你的代码的用户哪些方法将被调用以及它们应该如何表现。

# java - 如何在 android 2.3 及更高版本中获取当前启动器的包名？

> ID：10344824
> 
> 赞同：31
> 
> 时间：2012-04-27T04:42:33.600
> 
> 标签：java, android, launcher

如何在 Java 中以编程方式获取 android 2.3 及更高版本中当前启动器的包名称？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-27T05:02:20.647

我认为您应该能够使用[PackageManager.resolveActivity()](http://developer.android.com/reference/android/content/pm/PackageManager.html#resolveActivity%28android.content.Intent,%20int%29)，以家庭意图。

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
ResolveInfo resolveInfo = getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);
String currentHomePackage = resolveInfo.activityInfo.packageName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-01T18:57:14.783

With the [package visibility changes](https://developer.android.com/about/versions/11/privacy/package-visibility) introduced in Android 11, it is now necessary to add a [queries](https://developer.android.com/guide/topics/manifest/queries-element) element in your application's manifest file as below before you can query the [PackageManager.resolveActivity(intent:flags:)](https://developer.android.com/reference/android/content/pm/PackageManager#resolveActivity(android.content.Intent,%20int)) method for the default home (a.k.a. launcher) activity that is installed on the device as described in the [accepted answer](https://stackoverflow.com/a/10344985/1071320) in this thread:

```
<queries>
    <intent>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
    </intent>
</queries> 
```

If this [queries](https://developer.android.com/guide/topics/manifest/queries-element) element is omitted from your application's manifest, then the device will report the `com.android.settings.FallbackHome` activity as its default home activity and that is most likely not what you want.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-03-26T04:16:00.933

一般来说，[我同意@JesusFreke](https://stackoverflow.com/a/10344985/529977)使用 PM resolveActivity

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
ResolveInfo resolveInfo = getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY); 
```

但要获得正确的包名称，您应该使用

```
resolveInfo.loadLabel(packageManager).toString() 
```

或者

```
resolveInfo.activityInfo.applicationInfo.loadLabel(packageManager).toString() 
```

* * *

提示：如果没有默认设置，这可能会变成“Android System”或“open”，就像一般的 System Intent Receiver

提示：如果您正在寻找网络浏览器，您可以使用`net.openid.appauth.browser.BrowserSelector#select()`( [0.7.1+](https://github.com/openid/AppAuth-Android/blob/0.7.1/library/java/net/openid/appauth/browser/BrowserSelector.java#L151) ) 来隐式获取默认浏览器，即使没有明确设置。

# php - 如何使用 PHP 查找字符串是否包含特定 URL？

> ID：10344826
> 
> 赞同：0
> 
> 时间：2012-04-27T04:42:39.197
> 
> 标签：php, preg-match

我想对某些域名进行模式匹配（使用 PHP）。例如，如果给我一个网站 URL，那么我想确定该 URL 是否来自 YouTube。下面的代码是我尝试过的，但它不起作用（if 语句总是错误的）。有什么建议么？提前谢谢！

```
$website = trim( htmlentities( filter_var($_POST['website'], FILTER_SANITIZE_URL) ) );

if( preg_match("/youtube\.com/i", $website) )
{
    // do stuff
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T05:53:36.317

您可以使用 PHP 的[parse_url](http://php.net/manual/en/function.parse-url.php)函数。例如。

```
parse_url($POST['website'], PHP_URL_HOST); 
```

这将为您提供主机名。然后，您可以将其用于支票

```
if(parse_url($POST['website'], PHP_URL_HOST) == 'youtube.com') // do something 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:45:19.420

你的代码对我来说看起来不错......

```
<?php

$website = 'http://youtube.com/video?w=123455';

if( preg_match("#youtube\.com#i", $website, $matches) )
{
      print_r($matches);
} 
```

**编辑**

看起来它仍然应该工作：

```
<?php

$_POST = array();
$_POST['website'] = 'http://youtube.com/video?w=123455';
$website = trim( htmlentities( filter_var($_POST['website'], FILTER_SANITIZE_URL)));

if( preg_match("#youtube\.com#i", $website, $matches) )
{
      print_r($matches);
} 
```

输出

```
Array
(
    [0] => youtube.com
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T04:57:57.387

```
 if(strpos("youtube.com", $website) )
 {

   // do stuff
 } 
```

# android - android 中的 API 用于 Find me profile 中的蓝牙即时警报服务

> ID：10344828
> 
> 赞同：5
> 
> 时间：2012-04-27T04:43:05.440
> 
> 标签：android, api, bluetooth, bluetooth-lowenergy

我正在为“蓝牙找到我的个人资料”开发一个 android 应用程序。我需要在“蓝牙找到我的个人资料”中获取与即时警报服务相关的所有 android API。在“蓝牙找到我的配置文件”的情况下，服务器会提醒客户端。因此，为了开发配置文件，我需要获取与提醒客户端相关的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:47:23.853

蓝牙查找我的配置文件和即时警报服务是蓝牙智能 porfiles/服务。普通的 Android API 不支持蓝牙智能。

在向 Android 添加 API 以使其与蓝牙智能配置文件一起工作方面有一些努力：http: [//developer.motorola.com/docs/bluetooth-low-energy-api/](http://developer.motorola.com/docs/bluetooth-low-energy-api/) [http://code.google.com/p/博通/](http://code.google.com/p/broadcom-ble/)

# javascript - 用于基于节点的对象和对象关系的 Javascript 库？

> ID：10344832
> 
> 赞同：5
> 
> 时间：2012-04-27T04:43:48.590
> 
> 标签：javascript, jquery, user-interface

我正在寻找一个用于显示基于节点的对象和对象关系的 Javascript（最好是开源）库。非常基本的东西：显示一个节点（可以是一个简单的框）及其属性。属性可以有值。有时，该值可以是与另一个节点的关系（在两个节点之间创建一条线）。

像这样的东西：

[http://www.datamation.com/img/2007/02/yahoo-pipes1.jpg](http://www.datamation.com/img/2007/02/yahoo-pipes1.jpg)

[http://g.loquin.free.fr/udk/UnrealKismet%20Main_Sequence.Controls.jpg](http://g.loquin.free.fr/udk/UnrealKismet%20Main_Sequence.Controls.jpg)

[http://www.brandspankingnew.net/img/headers/yahoo_pipes.jpg](http://www.brandspankingnew.net/img/headers/yahoo_pipes.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:10:32.090

d3.js 适用于这样的事情。[您可以在http://mbostock.github.com/d3/](http://mbostock.github.com/d3/)查看示例并了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:08:32.187

试试这个库[Thejit](http://thejit.org/demos/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:15:56.143

我知道的唯一接线库是[WireIt](http://neyric.github.com/wireit/docs)

# time - 解析矩阵的嵌套 for 循环的时间复杂度

> ID：10344834
> 
> 赞同：3
> 
> 时间：2012-04-27T04:44:24.770
> 
> 标签：time, for-loop, matrix, nested, complexity-theory

假设我有一个包含 X 行和 Y 列的矩阵。元素的总数是 X*Y，对吗？那么这是否使n = X * Y？

```
for (i=0; i<X; i++)
{
   for (j=0; j<Y; j++)
   {
      print(matrix[i][j]);
   }
} 
```

那么这不是意味着这个嵌套的for循环是O（n）吗？还是我误解了时间复杂性的工作原理？

一般来说，我认为所有嵌套的for循环都是O（n ^ 2），但是如果它通过X * Y调用print（），这并不意味着时间复杂度是O（X * Y）和X * Y等于n？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:48:36.270

如果你有一个大小为rows*columns的矩阵，那么内部循环（假设）是O（columns），嵌套循环在一起是O（rows *columns）。

您将 N 的问题大小与 N ^ 2 的问题大小混淆了。您可以说您的矩阵大小为 N 或矩阵大小为 N^2，但除非您的矩阵是正方形，否则您应该说您有一个大小为 Rows*Columns 的矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:49:09.190

`n = X x Y`当你说嵌套循环应该是时你是对的，但当你说嵌套循环是错误的`O(n)`。如果您干运行代码，就可以理解嵌套循环的含义。您会注意到，对于外循环的每次迭代，内循环都会运行`n`（或大小条件）次。因此，通过简单的数学，您可以推断出它的`O(n^2)`. 但是，如果您在迭代时只有一个循环`(X x Y)`（例如：`for(i = 0; i<(X*Y); i++)`元素，那么这将`O(n)`导致您在任何时候都没有重新开始迭代。希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:54:11.463

> 一般来说，我认为所有嵌套的 for 循环都是 O(n^2)，

你错了。我猜让您感到困惑的是，人们经常使用方形（X==Y）矩阵作为示例，因此复杂度为 n*n（X==n，Y==n）。

如果你想练习你的 O(*) 技能，试着弄清楚为什么矩阵乘法是 O(n^3)。如果您不知道矩阵乘法的算法，很容易在网上找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T04:56:44.083

**这个答案写得很仓促，收到了一些反对意见，所以我决定澄清并重写它**

算法的时间复杂度是根据算法要解决的问题的大小来表示算法的操作数。

这里涉及两种尺寸。

1.  第一个大小是矩阵 X × Y 的元素数量，这对应于复杂性理论中称为*input 的大小*。令 k = X × Y 表示矩阵中元素的数量。由于双循环中的操作数为 X × Y，因此在 O(k) 中。

2.  第二个大小是矩阵的列数和行数。设 m = max(X,Y)。双循环中的操作数为 O(m^2)。通常在线性代数中，这种大小用于表征 m × m 矩阵上的矩阵运算的复杂性。

当您谈论复杂性时，您必须准确指定如何对实例问题进行编码以及使用什么参数来指定其大小。在*复杂性理论*中，我们通常假设算法的输入是来自某个有限字母表的字符串，并根据给定问题实例的操作数上限来衡量算法的复杂性一个长度为 n 的字符串。也就是说，在复杂性理论中，n 通常*是 input 的大小*。

在算法的实际*复杂性分析*中，我们经常使用在特定上下文中更有意义的实例大小的其他度量。例如，如果`A`是图的连接矩阵，我们可以使用顶点数`V`作为问题实例复杂度的度量，或者如果`A`是作用于向量空间的线性算子的矩阵，我们可以使用维度向量空间作为这样的度量。对于*正方形*矩阵的约定是根据矩阵的维数来指定复杂度，即用 n 来衡量作用于 n × n 矩阵的算法的复杂度。它通常具有实际意义，并且也符合特定应用领域的惯例，即使它可能与复杂性理论的惯例相矛盾。

让我们为我们的双循环命名*矩阵扫描。*您可以合理地说，如果*Matrix Scan*实例的大小是矩阵的字符串编码的长度。假设条目的大小有界，它是矩阵中元素的数量 k。*那么我们可以说矩阵扫描*的复杂度在 O(k) 中。另一方面，如果我们将 m = max(X,Y) 作为表征实例复杂度的参数，这在许多应用程序中是惯用的，那么 X×Y 矩阵的复杂度*矩阵扫描*也将在 O(米^2)。对于方阵 X = Y = m 和 O(k) = O(m^2)。

**注意：**评论中有人问我们是否总能找到问题的编码来将*任何*多项式问题简化为线性问题。这不是真的。对于某些算法，操作数量的增长速度快于其输入的字符串编码长度。例如，没有算法可以将两个 m×m 矩阵与 θ(m^2) 次运算相乘。这里输入的大小增长为 m^2，但是[Ran Raz](https://dx.doi.org/10.1145%2F509907.509932)证明操作的数量增长至少与 m^2 log m 一样快。如果 n 在 O(m^2) 中，则 m^2 log m 在 O(n log n) 中，并且最著名的算法复杂度随着 O(m^(2+c)) = O(n^(1+ c/2))，其中对于 Coppersmith-Winograd 算法的版本，c 至少为 0.372，对于常见的迭代算法，c = 1。

# mysql - 将 PostgreSQL 数据库转换为 MySQL 的推荐工具

> ID：10344837
> 
> 赞同：0
> 
> 时间：2012-04-27T04:44:28.327
> 
> 标签：mysql, postgresql

我有一个 postgresql 转储文件，想将其转换为 MySQL。我谷歌它并找到它成功转换的pg2mysql。但是，将其导入 mysql 时出现错误。看起来格式不兼容或错误。

有没有人可以推荐？

谢谢。詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:27:36.483

迁移的最佳解决方案是转换工具，如 ESF 数据迁移工具包或开源的 openDBcopy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:42:18.143

根据您的[pastebin](http://pastebin.ca/2141111)，问题在于`bigserial`，因为这不是 MySQL 数据类型。一些谷歌搜索发现了这个[网站](http://www.ispirer.com/wiki/sqlways/postgresql/data-types/bigserial)，它描述了 Postgres 上下文中的 bigserial 和其他 RDBMS 数据类型等价物。

看起来有 3rd 方库可以将 Postgres 中的数据转换为您选择的任何 RDMBS，例如[easyfrom.net](http://www.easyfrom.net/)，如果这不符合您的需求，只需 google，因为您不是第一个需要这个的人功能。

# ftp - 建立 FTP 数据连接时是否需要问候或握手？

> ID：10344848
> 
> 赞同：0
> 
> 时间：2012-04-27T04:45:33.383
> 
> 标签：ftp, ftpwebrequest, filezilla

我正在实现一个简单的 FTP 服务器。调试时，我尝试使用 FileZilla 客户端连接我的服务器。下面列出了命令面板中的请求和响应模式：

```
GREETING: 220 (FTP v1.0)
REQUEST:  USER ***
RESPONS:  331 Password?
REQUEST:  PASS ********
RESPONS:  230 login successfully.
REQUEST:  PWD
RESPONS:  257 "/a/" is current directory.
REQUEST:  TYPE I
RESPONS:  200 Type set to I.
REQUEST:  PASV
RESPONS:  200 127,255,0,0,175,200(I specify local port 45000)
REQUEST:  LIST
RESPONS:  150 here is the listing
RESPONS:  226 Transfer done. 
```

但是，出现了一个错误，`Fail to read directroy.`我认为被动连接确实建立了，因为我可以在套接字上获取流（我在 C# 中实现服务器）。但我不知道为什么会出错。是不是因为我应该发送一些握手/问候信息，比如控制连接中的那些信息，而不是直接将数据发送到同步服务器和客户端？如果是，该信息的状态码是什么？

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:14:18.870

数据连接没有握手。

也许“读取目录失败”错误是由于服务器返回的文件夹列表格式不正确造成的？

# objective-c - 我需要根据观察到的属性设置 uitableviewCell backgroundColor。如何动态设置特定行？

> ID：10344849
> 
> 赞同：0
> 
> 时间：2012-04-27T04:45:35.187
> 
> 标签：objective-c, ios5, uitableview

我需要根据观察到的属性设置 uitableviewCell backgroundColor。如何在观察方法中将行动态设置为灰色或白色，除非有更好的方法可以实现。

我正在观察对象是否有效，此时我使单元格处于活动状态（白色）或不活动（灰色）。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:51:57.420

您可以使用获取特定行的单元格

```
 UITableViewCell *cell = [YourTableVIew cellForRowAtIndexPath:[NSIndexPath indexPathForRow:YourROW inSection:YourSection]; 
```

# python - 将 C# 正则表达式转换为 python

> ID：10344854
> 
> 赞同：1
> 
> 时间：2012-04-27T04:46:07.590
> 
> 标签：python, regex

我不确定为什么这个正则表达式不会在 python 2.7（re.compile）中编译。re.debug 标志甚至不会告诉我原因。

```
\b(?<case>(review|case|bug[zs]?(\s| )*(id)?:?)s?(\s| )*([#:; ]| )+)((([ ,:;#]|and)*)(?<bugid>\d+))+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T04:48:10.003

因为在 Python 中，命名捕获是用 完成的`(?P<name>)`，而不是`(?<name>)`. 尝试：

```
\b(?P<case>(review|case|bug[zs]?(\s| )*(id)?:?)s?(\s| )*([#:; ]| )+)((([ ,:;#]|and)*)(?P<bugid>\d+))+ 
```

确保还使用原始字符串，例如`r'regex'`（与 C# 的`@"regex"`语法比较）。

请注意，这是多余的，如果捕获不重要`(\s| )`，可以替换为`(\s)`或简单地替换。`\s`同样，`([#:; ]| )`可以安全地替换为`([#:; ])`.

# qt - 将文件上传到 QT 中的 Web 服务器

> ID：10344870
> 
> 赞同：2
> 
> 时间：2012-04-27T04:48:18.370
> 
> 标签：qt, http, file-upload, ftp, webserver

我需要使用 ftp 或 http 上传文件。我检查了从 ftp.qt.nokia.com 等服务器下载的内容。下载成功的位置[即使下载的文件已损坏，但大小与 Web 服务器上的几乎相同]。我尝试将文件上传到 qt.nokia.com、ftp.trolltech.com 等服务器。这样做当我使用 http 时，我得到一个 html 文档作为错误计数为 0 的响应，但错误字符串为未知错误。当我使用 ftp 时，建立了连接，登录但没有关闭连接，并再次出现错误字符串未知错误。我的意思是我怎么知道我的文件是否成功上传到服务器？我可以通过设置服务器在我自己的系统上检查它吗（例如：Apache Tomcat 服务器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:31:47.180

设置本地 FTP 或 HTTP 服务器，您不应依赖任何您无法完全控制的服务器。虚拟机可能是最轻松的解决方案。

# android - 如何在 ADT 中设置 2 个深度的 android 项目依赖项？

> ID：10344874
> 
> 赞同：0
> 
> 时间：2012-04-27T04:49:07.500
> 
> 标签：android, adt, actionbarsherlock

我喜欢在我的项目中使用 ActionBarSherlock。在这些日子里，我想让我的可重复代码库。

目前，我已经设置并使用了我的项目与这个文档'使用 ADT 从 Eclipse 管理项目' * [http://developer.android.com/guide/developing/projects/projects-eclipse.html](http://developer.android.com/guide/developing/projects/projects-eclipse.html)

在这个时候，我的项目有这些依赖。

*   动作条夏洛克
    *   我的项目1
    *   我的项目2
    *   我的项目3

我想改变如下

*   ActionBarSherlock（是图书馆）
    *   MyCommonComponent（是库）
        *   我的项目1
        *   我的项目2
        *   我的项目3

因为 MyProjectX 系列有几乎相同的代码依赖于 ActionBarSherlock。

所以我设置了。但是 ADT 显示一些错误。

如果我打开 MyCommonComponent 的库选项，ADT 会在 MyProject1 编译期间显示此错误。

```
java.lang.IllegalArgumentException: already added: Lcom/actionbarsherlock/R 
```

由于ActionBarSherlock 资源通过依赖设置嵌入，ADT 显示重复类导入错误。

你对这种情况有什么解决办法吗？

我的意思是“一个图书馆项目可以依赖另一个图书馆项目吗？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:19:20.827

我认为您的问题是您对库的引用不正确。如果我让你正确，你当前的项目设置是这样的：

```
ActionBarSherlock (is Library)
 |    MyCommonComponent (is Library)
 |---|----MyProject1
 |---|----MyProject2
 |---|----MyProject3 
```

这意味着您尝试让每个项目都引用这两个库，而不仅仅是顶层的那个。但是我认为正确的设置是这样的：

```
ActionBarSherlock (is Library)
 |----MyCommonComponent (is Library)
      |---MyProject1
      |---MyProject2
      |---MyProject3 
```

即仅`MyCommonComponent`引用`ActionBarSherlock`，所有其他引用只是`MyCommonComponent`。

# progress-4gl - ØMQ C函数（共享库/.dll）绑定导致zmq_init硬崩溃

> ID：10344876
> 
> 赞同：1
> 
> 时间：2012-04-27T04:49:09.030
> 
> 标签：progress-4gl

我正在尝试为[ØMQ C library](http://api.zeromq.org/2-2%3a_start)编写 ABL 绑定，但是我的[zmq_init](http://api.zeromq.org/2-2%3azmq-init)函数绑定的过程编辑器崩溃了。我[为 zmq_version 编写了一个绑定](https://github.com/abevoelker/abl-zmq/blob/master/lib/zmq/zmq_version.p)没有问题，所以我认为这不是 .dll 文件问题。无论如何，C 函数原型如下所示：

```
void *zmq_init (int io_threads); 
```

我写的ABL代码如下：

```
PROCEDURE zmq_init EXTERNAL "libzmq.dll" CDECL:
  DEFINE INPUT  PARAMETER num_threads AS LONG.
  DEFINE RETURN PARAMETER context_ptr AS MEMPTR.
END PROCEDURE.

DEF VAR mContext AS MEMPTR NO-UNDO.
RUN zmq_init(INPUT 0, OUTPUT mContext). 
```

这个特定的函数初始化一个“0mq 上下文”（潜在问题：它是一个线程池）并返回一个指向它的指针。即使我正在调用外部库并请求在池中分配 0 个线程，该错误是否与 OpenEdge 的非线程性质有关？

在过程编辑器中运行代码会使其崩溃，并出现 Windows“Progress Client 已停止工作”错误`Exception code: C0000005 ACCESS_VIOLATION`（此处为[完整堆栈跟踪](https://gist.github.com/2515526)，尽管我并不总是得到包含信息的堆栈跟踪）。

我从来没有做过 Windows C 编程，但如果我在 Unix 上使用 gcc（访问受保护的内存），它看起来就像我所说的分段错误。说到这一点，我实际上宁愿在 Unix 机器上运行这段代码，但显然 Progress 只为 Windows 提供评估开发人员 OE 环境:(。

我已经禁用了 DEP，但没有成功。当指针从库返回时，ABL 是否试图取消引用它？当然，必须有一种方法来处理返回值为 void* 的签名，这些签名在库调用中得到 malloc'ed。

我翻阅了[OpenEdge Development: Programming Interfaces](http://documentation.progress.com/output/OpenEdge102b/pdfs/dvpin/dvpin.pdf)、Tom Bascom 的[UNIX Shared Libraries](http://dbappraise.com/ppt/shlib.pptx) PowerPoint 以及[LDAP World 中的其他一些称为 OpenEdge 的](http://www.psdn.com/ak_download/media/exch_audio/2007/DEV/DEV-4_Jacobs.ppt)PowerPoint，其中包含一些代码示例，但看不到任何明显我遗漏的内容。

我使用的是 OpenEdge 10.2B，Windows 7 64 位，但是使用 32 位版本的 OpenEdge 作为评估软件的唯一选择。任何人都有我可以借来在 CentOS 上编译/运行此代码的许可证吗？:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:43:05.040

声明过程时缺少**PERSISTENT关键字。**

请尝试以下代码：

**zmq.p**

```
&SCOPED DLLNAME 'libzmq.so'
PROCEDURE zmq_init EXTERNAL {&DLLNAME} CDECL PERSISTENT:
    DEF INPUT  PARAMETER NumThreads AS LONG.
    DEF RETURN PARAMETER Context AS MEMPTR.
END PROCEDURE.

PROCEDURE zmq_term EXTERNAL {&DLLNAME} CDECL PERSISTENT:
    DEF INPUT  PARAMETER Context  AS MEMPTR.
    DEF RETURN PARAMETER ResultStatus AS LONG.
END PROCEDURE.

PROCEDURE zmq_version EXTERNAL {&DLLNAME} CDECL PERSISTENT:
    DEF OUTPUT PARAMETER major AS LONG.
    DEF OUTPUT PARAMETER minor AS LONG.
    DEF OUTPUT PARAMETER patch AS LONG.
END PROCEDURE. 
```

* * *

**check_zmq.p**

```
DEF VAR Zmq AS HANDLE NO-UNDO.
DEF VAR MajorVersion AS INT NO-UNDO.
DEF VAR MinorVersion AS INT NO-UNDO.
DEF VAR PatchVersion AS INT NO-UNDO.

DEF VAR CallStatus AS INT NO-UNDO.

DEF VAR ZmqContext AS MEMPTR NO-UNDO.

RUN zmq.p PERSISTENT SET Zmq.

RUN zmq_version IN Zmq ( OUTPUT MajorVersion, OUTPUT MinorVersion, OUTPUT PatchVersion ).
MESSAGE MajorVersion MinorVersion PatchVersion.

RUN zmq_init IN Zmq ( 1, OUTPUT ZmqContext ).
RUN zmq_term IN Zmq ( ZmqContext, OUTPUT CallStatus ).
MESSAGE CallStatus.

FINALLY:
    IF VALID-HANDLE(Zmq) THEN
         DELETE PROCEDURE Zmq.
END FINALLY. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T18:40:31.437

> 该错误是否与 OpenEdge 的非线程性质有关，即使我正在调用 >external 库并请求在池中分配 0 个线程？

在我使用线程的一些 c# 方法（通过 clr 桥调用）时，我多次遇到相同的问题（Progress Client 已停止工作）。通过使用一些 c# 库类（AsyncOperation，AsyncCallback）隐藏线程的进度解决了这个问题，但大多数尝试导致进度运行时停止。

与 .net 相关的进度帮助指出“您不能使用 System.Threading.Thread 或任何派生类 — ABL 是单线程的。”

我知道通过 clr bridge 调用 c# 方法与调用 c 库完全不同，但也许我们的问题是由 OpenEdge 的单线程性质引起的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T18:23:50.200

我从 github 获取了您的代码并将 MEMPTR 变量更改为 INT64。这允许它在不崩溃的情况下运行（64 位 Windows 7 上的 10.2b05 32 位）。由于内存是由 zeromq 处理的，我认为这是处理问题的安全方法。

# python - Python反向自省

> ID：10344884
> 
> 赞同：0
> 
> 时间：2012-04-27T04:50:09.290
> 
> 标签：python, class, introspection, siblings

让我们假设这个例子：两个兄弟类，其中一个加载另一个类作为新属性，然后我希望在兄弟内部的主类中使用这个属性。

```
a = 2
class AN(object):
   def __init__(self,a):
       self.aplus = a + 2
       self.BECls = BE(a)

class BE(object):
   def __init__(self,a):
       print a

   def get_aplus(self):
       ????

c = AN(a) 
```

我想做：

```
c.BECls.get_aplus() 
```

这将返回类似 self.self.aplus 的东西（隐喻），即 4

恢复：从 BE 类中的 AN 获取 aplus 属性，不声明为参数，但如果可能的话，考虑“a”变量必须已经通过 AN 加载，但会进行“反向自省”。

对不起，如果我没有说清楚，但我试图简化我的真实代码发生的事情。

我想问题可能是我在课堂上使用的技术。但不确定是什么或如何使它变得更好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T04:59:11.503

OP的问题：

> 从 BE 类中的 AN 获取 aplus 属性，而不声明为参数，但如果可能的话，考虑到“a”变量必须已经通过 AN 加载，请执行“反向自省”。

我们必须“反向自省”最接近的事情是通过[gc.getreferrers()](http://docs.python.org/library/gc.html#gc.get_referrers)进行搜索。

也就是说，最好简单地明确关系

```
class AN(object):
   def __init__(self,a):
       self.aplus = a + 2
       self.BECls = BE(self, a)

class BE(object):
   def __init__(self, an_obj, a):
       self.an_obj = an_obj
       print a

   def get_aplus(self):
       return self.an_obj.aplus

if __name__ == '__main__':
    a = 2
    c = AN(a)
    print c.BECls.get_aplus()     # this returns 4 
```

# javascript - JavaScript 拖放与 元素？

> ID：10344892
> 
> 赞同：1
> 
> 时间：2012-04-27T04:51:22.863
> 
> 标签：javascript, jquery, html, css

我有两个独立的`<p>`元素，我想做的是拥有它，以便可以单击、拖放它们并将其放置在新位置。当它们被删除时，我希望它们将它们的 css`left:`和`top:`值发送到控制台。

他们从`top: 0`,开始`left: 0`。我希望他们最终报告的顶部和左侧值相对于它们的初始位置。*因此，如果我将一个 5 像素从原始*位置拖放到右侧并向下 15 像素，我希望它返回`top: 15, left: 5`。

如果这会使这更容易实现，我也在使用 jQuery。那么我该怎么做呢？

此外，理想情况下，我希望它们在拖放时不会被文本光标意外选中。有没有办法让它们表现得像 div，或者用一个适合它们的形状并且在它们上方但不可见的 div 覆盖它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T04:54:06.357

看看jquery ui droppable：http: [//jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

# c# - 如何在拖放事件中获取控件的引用？

> ID：10344893
> 
> 赞同：0
> 
> 时间：2012-04-27T04:51:23.753
> 
> 标签：c#, .net

我有 1 个图片框列表（源图片框 A），它们是在代码中动态生成的。我有另一个图片框列表（目标图片框 B，也是动态生成的）。现在，我可以将图像从任意 A 拖放到任意 B，反之亦然。

现在，我想添加这个功能：当将图像从 B 拖放到任何 A 时，重置 B 中该图片框中的图像（但保留 B 中其他图片框中的其他图像）。在A的拖放事件中，我在做

```
private void picA_DragDrop(object sender, DragEventArgs e)
    {
        if ((e.Data.GetDataPresent(DataFormats.Bitmap)))
        {
            PictureBox pb = (PictureBox)sender;
            pb.Image = (Bitmap)(e.Data.GetData(DataFormats.Bitmap));                
        }
    } 
```

它用于将图像从 B 设置为 A。现在，如何重置 B 中的图像？

谢谢

读者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:59:59.040

例如，您可以`DragLeave`在 上处理事件`B`，例如将其引用存储在某个`dragSource`类变量中。然后置入`dragSource.Image`。`picA_DragDrop`

# python - Python 脚本和类在同一个文件中

> ID：10344895
> 
> 赞同：0
> 
> 时间：2012-04-27T04:51:29.360
> 
> 标签：python, linux, permissions

我有一个 Python 类，它假设通过将自身提交到集群环境来在后台执行一些任务。例如

```
class AwesomeTaskController(object):
    def run(bunch_of_tasks):
        for task in bunch_of_tasks:
            cmd = "%s %s" % (os.path.abspath(__file__), build_cli_paramters(task))
            # call the API to submit the cmd

if __name__ == "__main__":
    #blah blah do stuff with given parameters 
```

一切都很好，这是第一次运行这个类。第一次运行时，会创建一个 pyc 文件。此 pyc 文件不可执行（许可方面）。

所以我第二次使用这个类时，该命令将直接使用 pyc 并抱怨权限被拒绝。也许我从错误的角度接近这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:13:31.527

.pyc 文件本身不可执行；你总是必须执行 .py 文件。.pyc 文件只是 Python 动态生成的 .py 文件的编译版本，以便在下次运行 .py 文件时节省自己的时间。

在您的情况下，您需要做的就是检查是否`__file__`以“.pyc”结尾并删除尾随的“c”。例如，您可以通过`__file__`在脚本中替换为：

```
(__file__[:-1] if __file__.endswith(".pyc") else __file__) 
```

那应该可以解决您的问题。

# iphone - 无法连接 iPad 插座？

> ID：10344897
> 
> 赞同：0
> 
> 时间：2012-04-27T04:51:33.613
> 
> 标签：iphone, ios, xcode, ipad

我正在创建一个 iPad 版本的 iPhone 应用程序（不是通用的）。我创建了所有 .m .h 和 XIB 文件的副本，并将“iPad”附加到每个文件的末尾，以及我所有的课程。这当然很乏味且过于复杂，但我不知道更好的方法。

我的问题：当我将 iPad File's Owner 和 First Responder 连接到我的 iPad XIB（见图）时，Xcode 将下面显示的 XIB 连接到**iPhone ViewController 代码**而*不是*iPad ViewController 代码。

![iPad XIB。 当我将 iPad XIB 连接到文件的所有者和第一响应者时，显示 Xcode 将 XIB 连接到我的 iPhone ViewController 类，而不是 iPad ViewController](../Images/3a57264e60af83e04b138719b4ca1b1f.png)

然后我转到代码（见下文），看看是否可以直接从代码连接（在 Outlet 代码行左侧有那些小圆圈），但无济于事。当我单击并拖动该线并放开 XIB 时，它不起作用。它什么也没做。 ![iPad ViewController 代码。 未连接到右侧显示的 iPad XIB。](../Images/d1c290dbeb358a32179334be29633d33.png)

我如何将我的 iPad XIB 与我的 iPad 代码关联（因为没有更好的词）？iPad XIB 已经是目标构建 FWIW 的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T04:55:14.240

*   点击 iPad xib 文件中的 FileOwner..
*   转到身份检查员..在实用程序部分。
*   你会在那里看到类名。确保它指向 iPad 代码类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:55:12.180

确保在**File Inspector**的 XIB 中包含正确的**文件名**。这应该与您尝试连接对象的类相匹配。

 **![在此处输入图像描述](../Images/d8d9e247a223b280bb885006882d58f2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:57:30.587

检查您为每个 xib 提供的课程是否正确。即在身份检查器中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T05:02:41.597

试试这个

File->Reload All Class Files File->Read Class Files (select MyClass.h) Reconnect File's Owner by a. 将类设置为“MyClass” b。将视图重新连接到文件所有者的视图 现在一切都恢复正常了。奇怪的。

希望这有助于而不是令人困惑;-)**

# linux - 对 linux 2.6.39 内核进行简单的系统调用

> ID：10344904
> 
> 赞同：0
> 
> 时间：2012-04-27T04:52:17.690
> 
> 标签：linux, linux-kernel, system-calls

我正在学习从[这个](http://vikasjadhav-lkp.blogspot.in/2012/03/adding-system-call.html)网站进行简单的系统调用。

当我转到“/usr/src”目录时，我看到 2 个文件夹

1）Linux

2) Linux-Source-2.6.39.4

为了进行系统调用，我应该对哪个进行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:00:09.270

两者都不。下载[内核源代码的新副本，将其解](https://www.kernel.org/)压缩到您的主目录中，然后使用您的普通用户帐户在那里进行开发工作。编译后只需要root即可*安装内核。*

中的 root 拥有的文件`/usr/src`可能与系统附带的股票内核相关联，不应用于开发。特别是因为您必须以 root 身份进行开发*，*才能获得写入权限。

# javascript - 如何将 HTML5 数据值分配给元素？

> ID：10344905
> 
> 赞同：0
> 
> 时间：2012-04-27T04:52:34.147
> 
> 标签：javascript, jquery

我有以下代码：

```
 $.modal({
                    title: title,
                    closeButton: true,
                    content: content,
                    complete: function () {
                        applyTemplateSetup();
                        $('#main-form').updateTabs();
                        $('#main-form').data('action',action);
                        // updated to line below but still does not work
                        $('#main-form').data('action','Edit');
                    },
                    width: 900,
                    resizeOnLoad: true,
                    buttons: {
                        'Submit': function (win) {
                            formSubmitHandler($('#main-form')); 
                        },
                    } 
```

加载数据后，我将尝试设置数据属性操作。然后我有更多的代码在提交处理程序中读取它：

```
var formSubmitHandler = function (form) {

    //e.preventDefault();
    var $form = form;
    var val = $form.valid();
    if (!$form.valid || $form.valid()) {

        var submitBt = $(this).find('button[type=submit]');
        submitBt.disableBt();
        var sendTimer = new Date().getTime();

        $.ajax({
            url: $form.attr('action'),
            dataType: 'json',
            type: 'POST',
            data: $form.serializeArray(),
            success: function (json, textStatus, XMLHttpRequest) {
                json = json || {};
                if (json.success) {
                    if ($form.data('action') == "Edit") {
                        $('#modal').removeBlockMessages()
                        submitBt.enableBt();
                    } else { 
```

但是，似乎值设置不正确，因为当我单步执行代码时，这并没有得到真正的值：`$form.data('action') == "Edit".`我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:03:15.060

这可能是问题所在。

首先你做 -`$('#main-form').data('action',action);`
我不完全确定`action`变量包含什么，但是从你的代码行 -`url: $form.attr('action')`我将假设你正在给表单`action`值。你为什么这样做是你关心的，但我相信它不会`== "Edit"`。

你得到什么价值`$form.data('action')`？

# mongodb - NoSQL（Mongo）的面向文档的数据抽象层？

> ID：10344908
> 
> 赞同：3
> 
> 时间：2012-04-27T04:52:54.473
> 
> 标签：mongodb, design-patterns, architecture, data-access-layer, nosql

我正在构建一个服务器应用程序，该应用程序通过 RESTful Web 服务连接世界并使用 MongoDB 存储。碰巧的是，Web 服务的 JSON 资源非常接近存储在 Mongo 中的 BSON 文档的结构。

虽然我通常使用面向对象的 DAO 抽象来隐藏持久性实现的细节，但在这种情况下它似乎并不是最合适的，因为我真正想做的是根据查询从数据库中**获取文档**并**执行转换**。构建一个对象图作为中介似乎有些过分。

有没有人对符合该法案的抽象模式有任何建议？

**编辑：**删除了关于不使用任何抽象而直接使用 Mongo 驱动程序的 1AM 递减。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:19:54.347

抽象级别取决于您、您的需求和您的要求。在原生 MongoDB 驱动程序之上有各种特定于语言的层。由您决定您需要什么，而不是我们。如果没有更准确和详细的背景，我们无法给出推荐。如果您问一个通用问题，那么您将收到一个通用问题。

谁给了这个+1？为了什么？

# php - 获取 X 个特定行。mysql查询

> ID：10344910
> 
> 赞同：-1
> 
> 时间：2012-04-27T04:53:21.993
> 
> 标签：php, mysql, sql

假设我有一个包含两个表的数据库：“food”和“whatToEat”。

我查询“whatToEat”并找到 3 行：

```
id    Food     username
 1    Apple      John
 2    Banana     John
 3    Milk       Linda 
```

如果我想从“食物”表中获取这些，我猜我可以做这样的事情：

```
SELECT * 
  FROM food 
 WHERE username='John' AND typeOfFood = 'apple' 
    OR typeOfFood = 'Banana' OR typeOfFood = 'Milk' 
```

...但是是否可以动态编写它，因为“whatToEat”表会一直变化，或者我是否需要一个循环并为“whatToEat”中的每个对象一个一个地查询“food”表？

编辑

以上只是一个例子，真实场景是网络游戏。当玩家上场比赛时，他会被放到“matches_updated”表中。该表仅包含他的姓名和比赛的 id（或比赛，因为他可以同时在多个比赛中）。当玩家收到更新时，我想检查他是否有任何匹配需要更新（查询“matches_updated”表），然后从“matches”表中提取数据并返回给他，其中所有信息存储有关比赛的信息。

例子：

玩家 Tim 查询“mathces_updated”表，发现他有 2 个新的匹配项需要更新：

```
 match_id   username
    1          Tim
    2          Tim
    2          Lisa
    1           John
    3           John 
```

... 他现在想要获取有关这些匹配项的信息，这些信息存储在“matches”表中：

```
match_id   match_status player1Name Player1Score Player2Name Player2Score
   1           1           John         123         Tim          12
   2           1           Lisa          4          Tim          15
   3           1           John          0          Lisa         0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:57:44.777

我不确定我是否正确理解了这个问题。

实际上这取决于查询的表有什么共同点。

所以如果假设食物是一个公共列，那么查询这样的东西......

```
select * from food where food in (select food from whattoeat where username = ?) 
```

试试看，如果能解决你的问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:57:10.633

```
SELECT * FROM matches_updated JOIN matches
         ON matches_updated.match_id == matches.match_id
         WHERE matches_updated.user == "Tim" 
```

--

也许您想要一个[JOIN 语句](https://en.wikipedia.org/wiki/Join_%28SQL%29)？

```
SELECT * FROM food JOIN whattoeat
         ON food.username == whattoeat.username
         WHERE food.username == "John" 
```

我很难理解您想要的结果是什么 - 发布有问题的*两个*表的示例以及您的查询的预期结果可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T05:11:16.633

```
SELECT * FROM food WHERE username='John' 
```

# c++ - 重新分发 rasapi32.dll？

> ID：10344914
> 
> 赞同：-1
> 
> 时间：2012-04-27T04:53:35.233
> 
> 标签：c++, windows, winforms, winapi, visual-c++

我正在使用 Rasdial 创建拨号连接。为此，必须链接 rasapi32.dll。

我的问题是我可以用我的包重新分发这个 rasapi32.dll 和 rasapi32.lib 吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T05:17:17.777

您当然不需要分发`rasapi32.lib`，因为您正在链接到 DLL，并且由于`rasapi32.dll`是标准的 Windows DLL，您的用户应该已经在他们的机器上安装了它。

所以我的回答是“不要”。

# c# - 将 IQueryable 转换为自定义类

> ID：10344915
> 
> 赞同：4
> 
> 时间：2012-04-27T04:53:48.290
> 
> 标签：c#, silverlight, linq, mvvm

我有一个如下的 LINQ 查询，

```
public AddXferData DisplayXferDataToBeModified(int ID)
    {
        try
        {
            var resultSet = (from items in DataContext.Transfers
                             where items.Transfer_ID.Equals(ID)
                             select new AddXferData
                             {
                                 XferID = items.Transfer_ID,
                                 LogicalName = items.Logical_Name,
                                 RoutCode = items.Route_Code,
                                 Label = items.Label,
                                 OnNetDNA = items.On_Net_DNA,
                                 OnNetDNB = items.On_Net_DNB,
                                 FailMessage = items.Failure_Message,
                             });
            return resultSet;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

但我的结果集要求演员，我得到的消息是

> “无法将类型'System.Linq.IQueryable'隐式转换为'ICMAdministration.Data.AddXferData'。存在显式转换（您是否缺少演员表？）

我需要将结果集转换为类型 AddXferData。你能告诉我这是如何实现的吗？非常感谢您在这方面的帮助。

问候， 拉古

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T04:57:54.217

如果它是一个单一的`AddXferData`，然后尝试：

```
return resultSet.First(); 
```

或者

```
return resultSet.FirstOrDefault(); 
```

如果它可以返回`null`（如未`ID`找到或其他）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T04:58:04.490

```
return resultSet.SingleOrDefault(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T05:33:50.963

您的查询将返回 AddXferData 对象的集合。如果您不期望单个结果，请更改函数签名。

```
 public list<AddXferData> DisplayXferDataToBeModified(int ID) 
```

并返回列表 resultSet.ToList();

# extjs4 - 如何使用 Extjs 委托模式在 Extjs 工具栏上添加工具提示

> ID：10344917
> 
> 赞同：0
> 
> 时间：2012-04-27T04:53:51.387
> 
> 标签：extjs4

我使用了带有许多按钮的 Extjs 工具栏。我知道如何为具有委托模式的按钮应用工具提示吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:10:16.490

代码应该是这样的：

```
var store = Ext.create('Ext.data.ArrayStore', {
    fields: ['company', 'price', 'change'],
    data: [
        ['3m Co',                               71.72, 0.02],
        ['Alcoa Inc',                           29.01, 0.42],
        ['Altria Group Inc',                    83.81, 0.28],
        ['American Express Company',            52.55, 0.01],
        ['American International Group, Inc.',  64.13, 0.31],
        ['AT&T Inc.',                           31.61, -0.48]
    ]
});

var grid = Ext.create('Ext.grid.Panel', {
    title: 'Array Grid',
    store: store,
    columns: [
        {text: 'Company', flex: 1, dataIndex: 'company'},
        {text: 'Price', width: 75, dataIndex: 'price'},
        {text: 'Change', width: 75, dataIndex: 'change'}
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
});

grid.getView().on('render', function(view) {
    view.tip = Ext.create('Ext.tip.ToolTip', {
        // The overall target element.
        target: view.el,
        // Each grid row causes its own seperate show and hide.
        delegate: view.itemSelector,
        // Moving within the row should not hide the tip.
        trackMouse: true,
        // Render immediately so that tip.body can be referenced prior to the first show.
        renderTo: Ext.getBody(),
        listeners: {
            // Change content dynamically depending on which element triggered the show.
            beforeshow: function updateTipBody(tip) {
                tip.update('Over company "' + view.getRecord(tip.triggerElement).get('company') + '"');
            }
        }
    });
}); 
```

如果您想了解更多示例或详细信息，可以参考[本网站](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.tip.ToolTip)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:42:48.690

这是我的工具栏按钮

```
xtype: 'toolbar',
dock: 'top',
id: 'toolbar-id',
items: [
    {
    xtype: 'button1',
    id: 'button-id1',
    cls: 'tb-btn',
    qtipText: 'tool tip description',
    qtipTitle: 'tool tip title'
    },
    {
    xtype: 'button2',
    id: 'button-id2',
    cls: 'tb-btn',
    qtipText: 'tool tip description',
    qtipTitle: 'tool tip title'
    }
    ] 
```

使用委托模式应用工具提示

```
render: function(Component, eOpts) {

    Component.tip = Ext.create('Ext.tip.ToolTip', {
        target: Component.el,
        delegate: '.tb-btn',
        renderTo: Ext.getBody(),
        listeners: {
            beforeshow: function updateTipBody(tip) {
                var btnData = Component.getComponent(tip.triggerElement.id);
                tip.update("<div class='tol-box'><h4 class='tool-tip-title'>" + btnData.qtipTitle + '</h4><p>' + btnData.qtipText + "</p></div>");
            }
        }
    });
} 
```

# c# - 按下默认键时显示按钮按下效果

> ID：10344920
> 
> 赞同：0
> 
> 时间：2012-04-27T04:54:07.793
> 
> 标签：c#, wpf, visual-studio-2010, xaml

当我按下默认键（回车）时，我希望我的按钮具有按下和释放的效果（模拟鼠标按下）。

我试过这样做

```
 private void OnKeyDownHandler(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.Enter)
            {
                VisualStateManager.GoToState(btnLogin, "Pressed", true);
                System.Threading.Thread.Sleep(300);
                VisualStateManager.GoToState(btnLogin, "Normal", true);
                btnLogin_Click(sender, e);

            }
        } 
```

不能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:02:56.657

你有没有让你的按钮属性 IsDefault=True

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:05:23.393

试试下面的'

```
private void OnKeyDownHandler(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            VisualStateManager.GoToState(btnLogin, "Pressed", true);
            this.Refresh();
            System.Threading.Thread.Sleep(300);
            VisualStateManager.GoToState(btnLogin, "Normal", true);
            this.Refresh();
            btnLogin_Click(sender, e);
        }
    } 
```

'

# mysql - mysql左连接返回意外的行数

> ID：10344923
> 
> 赞同：1
> 
> 时间：2012-04-27T04:54:19.930
> 
> 标签：mysql, sql, join, left-join, mysql-num-rows

我有 2 张桌子

```
tableA has 41 rows 
```

和

```
tableB has 3 rows 
```

我正在尝试通过使用左连接的查询来获取这两个表的总行数，但我得到的行数（123）比预期的多（44）

询问：

```
SELECT COUNT(*)
    FROM tableA as u
LEFT JOIN tableB as d
    ON u.uid=d.uid
WHERE
    u.uid=912391178669
    AND
    u.deleted = 0
    AND
    d.deleted=0 
```

表架构：

**表A**

编号 | uid | 已删除

**表B**

编号 | uid | 已删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:43:44.400

我已经运行了以下查询它工作正常..你可以检查出来。

```
SELECT 
  ( SELECT count(*) from table1 where.... )
+ ( SELECT count(*) from table2 where.... )
as total from dual 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:00:03.500

我猜您在 tableA 中有三行，其中 uid 在查询中给出。这意味着 tableA 中的每一行将与 tableB 中的每一行连接一次，这意味着您将返回 41 x 3 行或 123。

从您期望返回的行数来看，我想知道您是否需要联合而不是联接。

```
Select * from tableA where uid = 912391178669 and deleted = 0

union all

Select * from tableB where uid = 912391178669 and deleted = 0 
```

联合将结合两个查询的结果。连接将在单个查询中组合表表的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T05:54:41.257

```
SELECT SUM(
  (SELECT count(*) from tableA WHERE uid=912391178669)
+ (SELECT count(*) from tableA WHERE uid=912391178669)
 ) as totalRows 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T05:00:34.460

```
41*3=123 
```

TableA 的每一行都有 uid=912391178669 并且 tableB 的每一行也有 uid 这就是为什么你总共得到 123 行。使用一些过滤条件来获得所需的结果（如某些`AND`条件）

如果您可以向我们展示您的表格列，那么它可能会为您提供帮助。

左连接不合并两个表的行。
TableA 左连接 TableB 将为您提供满足连接条件的表 A 的所有行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T05:37:30.430

```
SELECT COUNT(*)
FROM tableA as u
LEFT JOIN tableB as d
ON u.uid=d.uid
AND
u.deleted = d.deleted
WHERE
u.uid=912391178669
AND u.deleted = 0 
```

# java - 如何为 VerticalFieldManager 和/或 Horizo ntalFieldManager 设置背景透明度和颜色？

> ID：10344926
> 
> 赞同：0
> 
> 时间：2012-04-27T04:54:55.950
> 
> 标签：java, blackberry-eclipse-plugin

以下代码不起作用，我将不胜感激。

```
HorizontalFieldManager hfm = new HorizontalFieldManager();
hfm.setBackground(BackgroundFactory.createSolidTransparentBackground(Color.BLACK, 0)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:43:43.680

您使用**0**作为 alpha 值`createSolidTransparentBackground(int color, int alpha)`。

它将创建一个完全透明的背景（不可见）。检查文档中 alpha 值的范围。

[它说](http://www.blackberry.com/developers/docs/4.6.0api/net/rim/device/api/ui/decor/BackgroundFactory.html#createSolidTransparentBackground%28int,%20int%29)，**alpha - 0（透明）到 255（不透明）**。尝试 alpha 的其他值，例如**127**。

# c++ - 线程数不同，答案不同

> ID：10344930
> 
> 赞同：1
> 
> 时间：2012-04-27T04:55:16.790
> 
> 标签：c++, c, windows, cuda, neural-network

所以我有一些神经网络模拟器代码可以在 CPU 上正常工作，并行版本与串行版本一致，至少小数点后 6 位，在 Win7 PC 下我的两台 CUDA 上都有一个 32 线程单块，但有 1 个块和 64 个线程的 Wt 值略有不同。Wt 值通常不超过 3 个小数位，当我尝试通过在循环中嵌入 __syncthreads() 来消除竞争条件时，Wt 值在复制回 CPU 时显示为 Not A Number。

有人可以给我一个提示我可能做错了什么吗？我在下面包含了并行化的代码，并且正在使用 lSampleQtyReq=10000、o=1 和 Option='R' 调用 knlBackProp：

```
// device-global variables to facilitate data transfer
__device__ __constant__ __align__(8) struct rohanContext devSes;
__device__ __constant__ struct rohanLearningSet devLearn;
__device__ __align__(16) struct rohanNetwork devNet;

__device__ double devdReturn[1024*1024];
__device__ double devdRMSE=0;
__device__ int devlReturn[1024*1024];
__device__ int devlTrainable=0;

extern"C"
int knlBackProp(struct rohanContext& rSes, long lSampleQtyReq, long o, char Option)
{mIDfunc /*! divides error in yielded values and back-propagates corrections among weights */
// Option S - single sample correction only
// Option E - keep existing weights, count trainable samples only
// Option R - perform corrections for all trainable samples
    int lTotal=0;

    cudaMemcpyToSymbol( "devlTrainable", &lTotal, sizeof(int) ); // init return value on both sides
        mCheckCudaWorked
    cudaEvent_t start, stop;
    cudaEventCreate( &start);
    cudaEventCreate( &stop);

            cudaEventRecord( start, 0);
        mtkBackPropMT<<< rSes.iBpropBlocks , rSes.iBpropThreads >>>( lSampleQtyReq, o, Option);
            cudaEventRecord( stop, 0);
            mCheckCudaWorked

    cudaMemcpyFromSymbol( &lTotal, "devlTrainable", sizeof(long) ); // retrieve return value
        mCheckCudaWorked
    cudaEventSynchronize( stop);
        float elapsedTime;
        cudaEventElapsedTime( &elapsedTime, start, stop);
    conPrintf("DEVICE: Time to complete BackProp kernel: %3.1f ms\n", elapsedTime);
        cudaEventDestroy( start);
        cudaEventDestroy( stop);

    return lTotal;
}

__global__ __device__ void mtkBackPropMT( long lSampleQtyReq, long o, char Option)
{/*! divides error in yielded values and back-propagates corrections among weights */
// Option S - single sample correction only
// Option E - keep existing weights, count trainable samples only
// Option R - perform corrections for all trainable samples

    if(Option=='E' || Option=='e'){ //
        devlTrainable=0; // reset global mem trainable counter
        subkBackPropEoptMT(lSampleQtyReq, o);
    }

    if(Option=='S' || Option=='s'){
        devlTrainable=0; // reset global mem trainable counter
        subkBackPropSoptMT(lSampleQtyReq, false,  devNet, devNet.Signals, devNet.Zs, devNet.Wt, devNet.Deltas, devLearn.gpuXInputs, devLearn.gpuYEval, devLearn.gpudYEval);
    }

    if(Option=='R' || Option=='r'){ //
        devlTrainable=0; // reset global mem trainable counter
        subkBackPropRoptMT(lSampleQtyReq, o);
    }
}

__device__ void subkBackPropRoptMT(long lSampleQtyReq, long o)
{/*! flags and counts samples meeting  */
    long OUTROWLEN=devLearn.iOutputQty+1; // prepare array index and width
    //long tIx = threadIdx.x + devSes.iEvalThreads * blockIdx.x; // tIx is thread index over the kernel
    long tIx = threadIdx.x + blockDim.x * blockIdx.x; // tIx is thread index over the kernel
    //long lTotalThreads = devSes.iBpropThreads * devSes.iBpropBlocks; // total number of threads
    double maxSquared = devSes.dMAX * devSes.dMAX ; //needed to compart to stored delta squared values

    devlTrainable=0; // clear global mem accumulator; out of bound samples will remain at this value
    for (long s=0; s<lSampleQtyReq; ++s){ // iterate over samples
        if( devLearn.gpudSE1024[IDX2C( o, s, OUTROWLEN )] > maxSquared ){ // if the MAX criterion is exceeded   
            if(tIx==0)++devlTrainable; // increment the counter
            subkBackPropSoptMT( s, true, devNet, devNet.Signals, devNet.Zs, devNet.Wt, devNet.Deltas, devLearn.gpuXInputs, devLearn.gpuYEval, devLearn.gpudYEval);
        }
    }
} 

__device__ void subkBackPropSoptMT(long s, int o, rohanNetwork& Net, cuDoubleComplex * Signals, cuDoubleComplex * Zs, cuDoubleComplex * Wt, cuDoubleComplex * Deltas, cuDoubleComplex * XInputs, cuDoubleComplex * YEval, double * dYEval )
{/*! propagates adjustment of weights backwards preceeding layers from the chosen network output. */
    // s is sample's index
    // o is an optional method selection parameter; print/don't print as of 2/29/12
    long index, kindex; // for warpwise loops
    long tIx = threadIdx.x + blockDim.x * blockIdx.x; // tIx is thread index over the kernel
    long lTotalThreads = gridDim.x * blockDim.x; // total number of threads
    const cuDoubleComplex cdcZero = { 0, 0 };

    /* clear all temp values BP0 */
    for (long offset=0; (index =offset+tIx)< MAXNEURONS ; offset+=lTotalThreads){ // index stands for i
        Deltas[index]=cdcZero;
        Signals[index]=cdcZero;
        Zs[index]=cdcZero;
    }
    /* re-evaluate sample to load temp values. BPI */
    subkEvalSampleBetaMT( devSes, s, Net, (s==0), Signals, Zs, Wt, XInputs, YEval, dYEval);
    /* begin error calculation. BPII */
    cuDoubleComplex Deltastar /* measured error at the chosen network output. */ ;
    /* calc top layer deltas. */
    long TOP=Net.iLayerQty-1;
    int ROWLEN=Net.iNeuronQTY[TOP];
    //for(int i=0; i<Net.iNeuronQTY[TOP]; ++i){
    for (long offset=0; (index =offset+tIx)< Net.iNeuronQTY[TOP] ; offset+=lTotalThreads){ // index stands for i
         // delta-star = D - Y = Desired output minus actual output from evaluation
         // D is the cplx coords of the sector of the desired answer        Y is the complex result of evaluation of the given sample, unactivated. */
        Deltastar = CxSubtractCxUT( 
                        devLearn.gpuDOutputs[ IDX2C( index, s, ROWLEN ) ], 
                        Signals[Net.iNeuronOfst[TOP]+index] );
         /* divide the correction; delta = alpha * delta-star / n+1 (but alpha is always 1 for now). */
        //Deltas[Net.iNeuronOfst[TOP]+index] = CxDivideRlUT( Deltastar, Net.iDendrtQTY[TOP] );
        Deltas[Net.iNeuronOfst[TOP]+index] = CxMultiplyRlUT( Deltastar, Net.dINV_S[TOP] );
    }
    __syncthreads();
    /* Now distribute the correction to lower layers if any. BPII.1 */
    if (Net.iLayerQty>2){  /* remember layer 0 = inputs, layer 1 = bottom row, layer {2..iLayerQty-2} = middle row, layer iLayerQty-1 = top row. */
        for (int L=Net.iLayerQty-1; L>1; --L){
            long LAY = L; /* setup access to layers. */
            long TRIB = L-1; /* trib for tributary.*/
            int iTributQTY=Net.iNeuronQTY[TRIB];
            //int Sj=Net.iDendrtQTY[TRIB]; if (TRIB==1) Sj=1; // Sj=1 for firest hidden layer
            for (int i=1; i<Net.iNeuronQTY[LAY]; ++i) { // skip 0th neuron as its weights are either 1 (div identity) or 0 (div forbidden) and don't change anyway
                // k index must begin at 1, neuron zero not valid for correction
                //for (int k=1; k<iTributQTY; ++k) { /* the contribution to ith neuron's kth tributary's delta = i's delta/i's weight k. */
                for (long offset=1; ( kindex =offset+tIx)< iTributQTY ; offset+=lTotalThreads){ // kindex stands for k
                                  Deltas[Net.iNeuronOfst[TRIB]+kindex] 
                    = CxAddCxUT ( Deltas[Net.iNeuronOfst[TRIB]+kindex] , 
                        CxDivideCxUT( 
                            Deltas[Net.iNeuronOfst[LAY]+i] , 
                            Wt[IDX2C( Net.iWeightOfst[LAY]+kindex, i, iTributQTY )] ));
                }
            }
            for (long offset=1; ( kindex =offset+tIx)< iTributQTY ; offset+=lTotalThreads){ // kindex stands for k
                //cuDoubleComplex preDiv=Deltas[Net.iNeuronOfst[TRIB]+kindex]; // diagnostic purpose only, remove if removing other diags
                //Deltas[Net.iNeuronOfst[TRIB]+kindex] 
                //  = CxDivideRlUT( 
                //      Deltas[Net.iNeuronOfst[TRIB]+kindex] , 
                //      Sj );
                Deltas[Net.iNeuronOfst[TRIB]+kindex] 
                    = CxMultiplyRlUT( 
                        Deltas[Net.iNeuronOfst[TRIB]+kindex] , 
                        Net.dINV_S[TRIB] );
            }
        }
    }
    __syncthreads();
    /* error distribution completed */
    /* and now update the weights BP III */
    /* adj weights on first hidden layer. */
        int FHID = 1;
        int SIG = 0;
        int iSignalQTY=Net.iNeuronQTY[SIG]; //rSes.rLearn->iInputQty+1;
        int iHidWidth=Net.iNeuronQTY[FHID];
    for (int k=1; k<iHidWidth; ++k){
        //for (int i=0; i<iSignalQTY; ++i){  
        for (long offset=0; ( index =offset+tIx)< iSignalQTY ; offset+=lTotalThreads){ // index stands for i
            /* dW=d*xbar/s1/|z|= neuron's delta * input's conjugate / ( dendrites+1 * abs of input i ). */
                        Wt[IDX2C( Net.iWeightOfst[FHID]+index, k, iSignalQTY )]
            =CxAddCxUT( Wt[IDX2C( Net.iWeightOfst[FHID]+index, k, iSignalQTY )] , 
                CxDivideRlUT( 
                    CxMultiplyCxUT( 
                        Deltas[Net.iNeuronOfst[FHID]+k] , 
                        CxConjugateUT( Signals[Net.iNeuronOfst[SIG]+index] ) 
                    ) , 
                    CxAbsUT( Zs[Net.iNeuronOfst[FHID]+k] ) // N+1 denominator factor is considered redundant - JAW & IA 2/27/12
                )
            );
        }
    }
    __syncthreads();
    /* re-evaluate sample to update temp values. */
    subkEvalSampleBetaMT( devSes, s, Net, false, Signals, Zs, Wt, XInputs, YEval, dYEval);
    if (Net.iLayerQty>2){
         /* now use those outputs' conjugates and the deltas to adjust middle layers. BP III.1 */
        for (int L=2; L<Net.iLayerQty-1; ++L){
             /* setup access to layers. */
            long LAY = L;
            long TRIB = L-1;
            //int iLayWidth=Net.iNeuronQTY[LAY];
            int iTribWidth=Net.iNeuronQTY[TRIB];
            for (int k=1; k<Net.iNeuronQTY[LAY]; ++k){
                //for (int i=0; i<Net.iNeuronQTY[TRIB]; ++i){  
                for (long offset=0; ( index =offset+tIx)< Net.iNeuronQTY[TRIB] ; offset+=lTotalThreads){ // index stands for i
                    /* the adjustment added to kth neuron's ith trib's weight = k's delta * complex conjugate of i's signal / (abs of k's previous-wt product-sum * dendrites+1)  . */
                                Wt[IDX2C( Net.iWeightOfst[LAY]+index, k, iTribWidth )]
                    =CxAddCxUT( Wt[IDX2C( Net.iWeightOfst[LAY]+index, k, iTribWidth )] , 
                        CxDivideRlUT( 
                            CxMultiplyCxUT( 
                                Deltas[Net.iNeuronOfst[LAY]+k] , 
                                CxConjugateUT( Signals[Net.iNeuronOfst[TRIB]+index] ) 
                            ) ,
                            ( 
                                CxAbsUT( Zs[Net.iNeuronOfst[LAY]+k] ) // N+1 denominator factor is considered redundant - JAW & IA 2/27/12
                            )
                        )
                    );
                }
            }
            /* layer is complete. */
            subkEvalSampleBetaMT( devSes, s, Net, true, Signals, Zs, Wt, XInputs, YEval, dYEval);
        }
    }
    __syncthreads();

    /* correct output layer BP III.3 */
    long SUB = TOP-1; 
    //int iTopWidth=Net.iNeuronQTY[TOP];
    int iSubWidth=Net.iNeuronQTY[SUB];

    for (int k=1; k<Net.iNeuronQTY[TOP]; ++k){
        //for (int i=0; i<Net.iNeuronQTY[SUB]; ++i){  
        for (long offset=0; ( index =offset+tIx)< Net.iNeuronQTY[SUB] ; offset+=lTotalThreads){ // index stands for i
            /* For last layer only, adjustment to kth neuron's ith weight = k's delta * complex conjugate of i's signal / ( dendrites+1)  . */
                        Wt[IDX2C( Net.iWeightOfst[TOP]+index, k, iSubWidth )]
            =CxAddCxUT( Wt[IDX2C( Net.iWeightOfst[TOP]+index, k, iSubWidth )] , 
                CxMultiplyCxUT( 
                    Deltas[Net.iNeuronOfst[TOP]+k] , 
                    CxConjugateUT( Signals[Net.iNeuronOfst[SUB]+index] ) 
                )
            );  // N+1 denominator factor is considered redundant - JAW & IA 2/27/12
        }
    }
    /* backprop is complete. */
}

__device__ void subkEvalSampleBetaMT(rohanContext& Ses, long s, rohanNetwork& Net, int o, cuDoubleComplex * Signals, cuDoubleComplex * Zs, cuDoubleComplex * Wt, cuDoubleComplex * XInputs, cuDoubleComplex * YEval, double * dYEval )
{// Beta uses fixed length fields instead of nested pointer layers
    // delta squared is not updated, since they'll be updated when RMSE is checked at the end of a pass through the learning set
    long index, kindex; // for warpwise loops
    long tIx = threadIdx.x + blockDim.x * blockIdx.x; // tIx is thread index over the kernel
    long lTotalThreads = gridDim.x * blockDim.x; // total number of threads
    const cuDoubleComplex cdcZero = { 0, 0 };
     /*! layer zero (inputs) is special. */
    long INROWLEN=Net.iNeuronQTY[0];//rSes.rLearn->iInputQty+1;
    //for (int i=0; i<INROWLEN; ++i){
    for (long offset=0; (index =offset+tIx)< INROWLEN ; offset+=lTotalThreads){ // index stands for i
        Signals[Net.iNeuronOfst[0]+index]= XInputs[IDX2C( index, s, INROWLEN )];
    }
     /*! middle and top layers. */
    for (int L=1; L<Net.iLayerQty; ++L){
        //struct rohanLayer& lay = Net.rLayer[L];
        long LAY=L;
        int TRIB=L-1; // index of previous layer
        int iNeuronQTY=Net.iNeuronQTY[LAY];
        int iSignalQTY=Net.iDendrtQTY[LAY]; // signal qty depends on size of previous layer
        //for (int k=0; k<iNeuronQTY; ++k){ //Neuron zero is not skipped, its output should be 1+0i as a check
        for (long offset=0; (kindex =offset+tIx)< iNeuronQTY ; offset+=lTotalThreads){ // kindex stands for k
            Zs[Net.iNeuronOfst[LAY]+kindex]=cdcZero;
            for (int i=0; i<iSignalQTY; ++i){ //walk weights on inputs from previous layer
                           Zs[Net.iNeuronOfst[LAY]+kindex] = 
                CxAddCxUT( Zs[Net.iNeuronOfst[LAY]+kindex] , 
                    CxMultiplyCxUT(
                        Wt[IDX2C( Net.iWeightOfst[LAY] + i, kindex, iSignalQTY )],
                        Signals[Net.iNeuronOfst[TRIB]+i] ) ) ;
            }
            // ACTIVATE //
            Signals[Net.iNeuronOfst[LAY]+kindex] = CxActivateUT( Zs[Net.iNeuronOfst[LAY]+kindex]);
        }
    }
    /*! last layer values are converted and stored here */
    long TOP = Net.iLayerQty-1;
    long OUTROWLEN=Net.iNeuronQTY[TOP];
    //for (int i=0; i<Net.iNeuronQTY[TOP]; ++i){ // continuous conversion begins here 
    for (long offset=0; (index =offset+tIx)< OUTROWLEN ; offset+=lTotalThreads){ // index stands for i
        YEval[IDX2C( index, s, OUTROWLEN )]= Signals[Net.iNeuronOfst[TOP]+index] ; // store final complex output(s)
        dYEval[IDX2C( index, s, OUTROWLEN )]=FUnitCxUT( YEval[IDX2C( index, s, OUTROWLEN )] ) * Net.iSectorQty; // convert final complex outputs to sectors and store that
        if(devLearn.iContOutputs==false) // round off decimal if disc activation is set
            dYEval[IDX2C( index, s, OUTROWLEN )]=int(dYEval[IDX2C( index, s, OUTROWLEN )]);
    }
     /*! end of sample evaluation. */
}

__device__ cuDoubleComplex CxActivateUT(const cuDoubleComplex Z)
{/// applies ContActivation or discrete activation function to cx neuron output and returns Phi(Z)
    /// This fn should be phased out in favor of a GPU device vector based fn
    cuDoubleComplex phi;
    if (devNet.bContActivation) { // apply ContActivation activation function to weighted sum : phi(z)=z/|z|
        phi = CxDivideRlUT( Z, CxAbsUT( Z ) );
    }
    else {  // apply Discrete activation function to weighted sum : s=int(arctan(z)*k/2pi), phi(z)=(X(s),Y(s))
        double theta = atan2(Z.y, Z.x); // theta = arctan y/x
        int iSector = (int)((theta * devNet.dK_DIV_TWO_PI) + devNet.iSectorQty) % devNet.iSectorQty;
        phi = devNet.gpuSectorBdry[iSector];
        //printf(" %f+%fi %d Activate\n", phi.x, phi.y, threadIdx.x);
    }
    return phi;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:01:17.743

所以，我不会阅读所有代码，但我可以给你一个强有力的提示。warp 大小为 32 个线程，因此 64 线程的情况将运行两个 warp/块——在前一种情况下，您不能有任何基于指令指针的竞争条件，但是，在第二种情况下，您将有效地拥有两个组在不同时间安排的具有不同 IP 的线程数。您可能已经知道很多（因此是同步线程），但上面确实几乎可以肯定您只是还有一个尚未考虑的竞争条件。

放入同步线程是尝试隔离它的良好开端。你确定在你的循环中，一个warp的源数据不会被另一个warp覆盖吗？如果不尝试将同步线程放入您的内部循环中，仅用于调试目的，以查看可能导致竞争条件的原因。

# javascript - ToString 应用于数字类型

> ID：10344935
> 
> 赞同：0
> 
> 时间：2012-04-27T04:55:41.133
> 
> 标签：javascript, type-conversion

我阅读了 ecmascript 9.8.1 部分 ToString 应用于数字类型，但我不知道它是什么意思。

> 运算符 ToString 将数字 m 转换为字符串格式，如下所示：
> 
> 1.  如果 m 为 NaN，则返回字符串“NaN”。
>     
>     
> 2.  如果 m 为 +0 或 -0，则返回字符串“0”。
>     
>     
> 3.  如果 m 小于零，则返回字符串“-”和 ToString(-m) 的字符串连接。
>     
>     
> 4.  如果 m 为无穷大，则返回字符串“Infinity”。
>     
>     
> 5.  否则，令n、k、s为整数，使得k >= 1, 10k-1<= s <10k，s * 10n-k的数值为m，k尽可能小。请注意，k 是 s 的十进制表示中的位数，即 s 不能被 10 整除，并且 s 的最低有效位不一定由这些标准唯一确定。
>     
>     
> 6.  如果 k <= n <= 21，则返回由 s 的十进制表示的 k 位数字组成的字符串（按顺序，不带前导零），后跟出现 nk 个字符“0”。
>     
>     
> 7.  如果 0 < n <= 21，则返回由 s 的十进制表示的最高 n 位数字组成的字符串，后跟一个小数点 '。'，后跟 s 的十进制表示的剩余 kn 位。
>     
>     
> 8.  如果 -6 < n <= 0，则返回由字符 '0' 后跟小数点 ' 组成的字符串。'，后跟 -n 次出现的字符 '0'，然后是 s 的十进制表示的 k 位。
>     
>     
> 9.  否则，如果k = 1，则根据n-1是正数还是负数，返回由s的一位数，后跟小写字符'e'，后跟加号'+'或减号'-'组成的字符串，后跟整数 abs(n-1) 的十进制表示（没有前导零）。
>     
>     
> 10.  返回由 s 的十进制表示的最高有效位组成的字符串，后跟一个小数点 '。'，后接s的十进制表示的剩余k-1位，后接小写字符'e'，后接加号'+'或减号'-'根据n-1是正还是负，后跟整数 abs(n-1) 的十进制表示（没有前导零）。

有人可以向我解释该算法或给我一个关于应用于数字类型的 ToString 的博客吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:34:54.787

该规范是为 JavaScript*引擎*的开发人员制定的。它描述了引擎内部的细节，这可能与 JS 开发人员无关。

特别是`ToString`不能直接从JS调用该操作。您可以通过此功能获得*几乎相同的效果：*

```
 function ToString(input) {
      return '' + input;
  } 
```

现在[第 9.8.1 节](http://es5.github.com/#x9.8.1)简单地描述了当一个数字被传递给这个函数时应该发生什么。

点 5\. 到 10\. 确保非常大的数字或具有许多小数位的数字被字符串化为科学记数法，如下所示：

```
ToString(100000000000000000000) // "100000000000000000000"
ToString(10000000000000000000000) // "1e+22"
ToString(.000003001) // ".000003001"
ToString(.0000003001) // "3.001e-7"
ToString(100000000.00000003001) // "100000000.00000003"
ToString(1000000000.00000003001) // "1000000000" 
```

* * *

至于5.：可以推导出

如果`m`是整数，`n`是 的位数`m`。`s`是去除所有尾随零后得到的整数，并且`k`是 中的位数`s`。

所以例如

*   `m = 100000000000000000000`将产生`s = 1`, `k = 1`, `n = 21`, 因此第 6 点。返回`"100000000000000000000"`
*   `m = 10000000000000000000000`表示`s = 1`, `k = 1`, `n = 23`, 因此第 9 点。返回`"1e+22"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:09:48.390

[你可以在MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/toString)获得关于 toString 的最佳教程

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T05:11:11.143

如果您只是想将数字转换为字符串，只需使用连接：

```
var number = 1;
var numberAsString = '' + number; 
```

# android - 提高 Android 模拟器的速度

> ID：10344936
> 
> 赞同：1
> 
> 时间：2012-04-27T04:55:41.537
> 
> 标签：android, performance, emulation, ram

您好，我正在运行 W510 联想笔记本电脑，它在大多数计算环境中通常速度很快，但在运行 Eclipse 并尝试运行 AVD 模拟器时，它就像糖蜜一样。我知道有一些替代的模拟器，我可以改进模拟器上的 RAM，但是我可以通过哪些其他方式来加速它。

我正在考虑从联想的 4GB RAM 升级到 12GB，这会有很大的不同吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T00:30:32.383

如果您有专用 GPU，请尝试打开 GPU 加速以显着提高图形性能。默认情况下它是关闭的。要打开它，请编辑您使用的 AVD，然后在硬件部分单击“新建”。找到“GPU仿真”，添加它，并将值设置为yes。

假设您只运行 eclipse、模拟器和一堆 Chrome 选项卡（没有其他需要 RAM 的进程），4GB 应该足够了。我的设置也有 4GB RAM，没有交换空间，如果你检查系统监视器，很可能你还有空闲的 RAM。当所有这些东西都打开时，我个人仍然有 800 MB 的可用 RAM（设备 RAM 大小设置为 512 MB）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:40:47.050

希望这对其他人有用：我的高配置电脑也遇到过同样的问题`3i 4GB`，但是模拟器工作太慢了，我发现了一些对我有用的东西，希望它对其他人有用，我很乐意在这里分享

我刚刚添加`Device ram size`到我现有的`AVD`并设置`size to 1000MB`（因为我有足够的空间来分配我的是 6GB）不，我的速度`AVD`是最终希望它可以帮助你。

**编辑1：**

您还可以设置一些属性以获得更好的性能，例如 set GPU Emulation = yes

![GPU 仿真设置](../Images/c951d057a3281bd354ed3cd0fdec30be.png)

# c - 冒泡排序问题

> ID：10344940
> 
> 赞同：2
> 
> 时间：2012-04-27T04:56:00.543
> 
> 标签：c, debugging, sorting, pointers, bubble-sort

gcc 编译以下代码没有错误。我正在创建一个可以与任何数据类型的数组一起使用的冒泡排序函数（因此是函数指针）。

它可以毫无问题地对字符串数组（arr2）进行排序，但是，我无法弄清楚为什么它不能正确地对整数数组（arr）进行排序。我在 compare_long 函数中添加了一条 printf 语句，以查看发生了什么。看起来整数没有正确传递给它。任何帮助将不胜感激。

* * *

```
 #include <stdio.h>
    #include <string.h>

    #define MAX_BUF 256

    long arr[10] = { 3,6,1,2,3,8,4,1,7,2};
    char arr2[5][20] = { "Mickey Mouse",
                         "Donald Duck",
                         "Minnie Mouse",
                         "Goofy",
                         "Pluto" };

    void bubble(void *p, int width, int N, int(*fptr)(const void *, const void *));
    int compare_string(const void *m, const void *n);
    int compare_long(const void *m, const void *n);

    int main(void) {
            int i;
            puts("\nBefore Sorting:\n");

            for(i = 0; i < 10; i++) {              /* show the long ints */
                    printf("%ld ",arr[i]);
            }
            puts("\n");

            for(i = 0; i < 5; i++) {               /* show the strings */
                    printf("%s\n", arr2[i]);
            }

            bubble(arr, 4, 10, compare_long);      /* sort the longs */
            bubble(arr2, 20, 5, compare_string);   /* sort the strings */
            puts("\n\nAfter Sorting:\n");

            for(i = 0; i < 10; i++) {              /* show the sorted longs */
                    printf("%d ",arr[i]);
            }
            puts("\n");

            for(i = 0; i < 5; i++) {               /* show the sorted strings */
                    printf("%s\n", arr2[i]);
            }
            return 0;
    }

    void bubble(void *p, int width, int N, int(*fptr)(const void *, const void *)) {

            int i, j, k;
            unsigned char buf[MAX_BUF];
            unsigned char *bp = p;

            for(i = N - 1; i >= 0; i--) {

                    for(j = 1; j <= i; j++) {     

                            k = fptr((void *)(bp + width*(j-1)), (void *)(bp + j*width));

                            if(k > 0) {
                                    memcpy(buf, bp + width*(j-1), width);
                                    memcpy(bp + width*(j-1), bp + j*width , width);
                                    memcpy(bp + j*width, buf, width);
                            }
                    }
            }
    }

    int compare_string(const void *m, const void *n) {
            char *m1 = (char *)m;
            char *n1 = (char *)n;
            return (strcmp(m1,n1));
    }

    int compare_long(const void *m, const void *n) {
            long *m1, *n1;
            m1 = (long *)m;
            n1 = (long *)n;

            printf("m1 = %l and n1 = %l\n", *m1, *n1);

            return (*m1 > *n1);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:07:55.780

ANSI C 规范将 long 定义为 4 个字节（32 位）的最小值，但 GCC 在您的情况下将 long 定义为 8 个字节。它是特定于体系结构的，因此如果需要特定大小，则需要使用 sizeof(long) 或 C99 类型之一，如 uint32_t 或 int32_t。

# java - 使用两个不同的 servlet 但使用一个提交按钮处理两个不同的作业

> ID：10344941
> 
> 赞同：0
> 
> 时间：2012-04-27T04:56:08.477
> 
> 标签：java, html, database, forms, servlets

以下 HTML 片段将*文件*提交给作为 servlet 的*UploadHandler*。然后还有一个标题框也需要处理。*我可以在UploadHandler*中处理标题框，然后打开与数据库的连接并在那里提交。但我不想这样做。让上传处理程序处理文件的上传。那么有什么选择呢？我如何将标题提交到表格中？我想在处理这两个工作时创造一种并行感。

```
<form method="post" action="UploadHandler" enctype="multipart/form-data">
        <table>

            <tr>
                <td> <strong> Browse photo to submit </strong> </td>
                <td> <input type="file" name="ImageToUpload" value="Upload Photo"/> </td>
            </tr>

            <tr>
                <td> <strong> Give a Caption to this photo </strong>  </td>
                <td> <input type="text" name="caption box" size="40" /></td>
            </tr>

            <tr colspan="2">
                <td> <input type="submit" value="submit photo"/> </td>
            </tr>

        </table>
    </form> 
```

当我点击提交 2 个不同的作业时，有什么方法可以让它们由 2 个不同的 servlet 处理？*从UploadaHandler*创建一个新线程似乎不是一个好主意。

在@Luiggi Mendoza 发表评论后：

处理文件上传的 Servlet：

```
package projectcodes;

import javax.servlet.*;
import javax.servlet.http.*;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.File;
import java.util.List;
import java.util.Iterator;
import org.apache.commons.fileupload.*;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.io.FilenameUtils;

public class UploadHandler extends HttpServlet {
@Override
public void doPost(HttpServletRequest request,HttpServletResponse response) throws IOException,ServletException {
    response.setContentType("text/plain");
    String path = request.getParameter("ImageToUpload");
    PrintWriter writer = response.getWriter();
    try {
        Boolean isMultipart = ServletFileUpload.isMultipartContent(request);
        if(!isMultipart) {
            Boolean AttemptToUploadFile = true;
            RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
            request.setAttribute("UploadAttempt", AttemptToUploadFile);
            rd.forward(request, response);
        } else {
            DiskFileItemFactory diskFileItem = new DiskFileItemFactory();
            ServletFileUpload fileUpload = new ServletFileUpload(diskFileItem);
            List list = null;

            try {
                list = fileUpload.parseRequest(request);
            }catch(Exception exc) {
                Boolean AttemptToUploadFile = true;
                RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
                request.setAttribute("UploadAttempt", AttemptToUploadFile);
                rd.forward(request, response);
            }

            Iterator iterator = list.iterator();
            while(iterator.hasNext()) {
                String emailOfTheUser = null;
                FileItem fileItem = (FileItem)iterator.next();
                if(!fileItem.isFormField()) {
                    String fieldName = fileItem.getFieldName();
                    String fileName = FilenameUtils.getName(fileItem.getName());
                    HttpSession session = request.getSession();
                    if(!session.isNew()) {
                        emailOfTheUser = (String)session.getAttribute("Email");
                    }
                    File file = new File("/home/non-admin/project uploads/project users/" + emailOfTheUser ,fileName);
                    fileItem.write(file);
                    RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
                    String message = "File Uploaded successfully !";
                    request.setAttribute("SuccessMessage", message);
                    rd.forward(request, response);
                }
            }
        }
    }catch(Exception exc) {
        Boolean AttemptToUploadFile = true;
        RequestDispatcher rd = request.getRequestDispatcher("portfolio_one.jsp");
        request.setAttribute("UploadAttempt", AttemptToUploadFile);
        rd.forward(request, response);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:18:11.800

我想如果你从第一个 servlet 转发到第二个 servlet，你可以使用：

```
getServletContext().getRequestDispatcher("/2ndServlet").forward(req, res); 
```

但这不是一个好主意，因为它可能会触发过滤器，响应可能已经提交等。

您应该做的是在帮助类中提取第二个 servlet 的功能，然后从第一个 servlet 中调用它，作为一个简单的 java 方法调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:10:01.333

在 UploadHandler 中尝试类似的东西。它可能会有所帮助

```
RequestDispatcher rd = getServletContext().getRequestDispatcher("pathToSecondServlet");
rd.forward(req, res); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T05:29:08.437

在您的 html 中：

```
<input type="text" name="captionBox" size="40" /> 
```

然后在您的 servlet 代码中

```
String captionBox = request.getParameter("captionBox");
String anotherField = request.getParameter("anotherField");
//all your code 
```

正如@Bozho 建议的那样，文件上传代码应该封装在另一个类方法中并调用它，也许您需要在另一个servlet 上上传文件。请记住[保持您的代码干燥](http://c2.com/cgi/wiki?DontRepeatYourself)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T05:29:11.667

我同意博卓的观点。但是正如他建议的那样，您可以实现辅助类并在第一个 servlet 中实现所有操作（业务逻辑）。它比 RequestDispatcher 好得多。如果您的应用程序使用其他按钮（除了提交）操作，那么它是可能的。

```
Take your application with a simple diversion. 
```

# wordpress - WordPress | 写一个简单的表单插件

> ID：10344949
> 
> 赞同：2
> 
> 时间：2012-04-27T04:57:09.807
> 
> 标签：wordpress

我想写一个插件，它实际上是一个具有多个字段的表单。我只想要该表单上的 CRUD 操作。我不能使用其他插件来使用 wordpress 钩子创建表单。我必须编写自己的表单插件，这是我第一次使用 wordpress。我该如何编写这个插件？

# google-maps - 在 google 或 openstreet 地图上路由播放器

> ID：10344952
> 
> 赞同：0
> 
> 时间：2012-04-27T04:57:22.257
> 
> 标签：google-maps, openstreetmap

我在数据库中有一组 GPS 跟踪器的数据。我希望在地图上为不同的车辆创建不同颜色的轨迹。任何人都可以帮助我如何在谷歌地图或开放街道地图上为静态和/或动态地图创建路线播放器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:25:50.637

为了绘制路线，您可以使用类似于此的一些函数，将 routeVar 发送到包含特定车辆路线坐标的函数，您可以在 Polyline var 处选择颜色：

```
var route = null;
function drawRoute(mapa, routeVar, varBool){
    if(!route){
        var coordRoute = routeVar;
        route= new google.maps.Polyline({
            map: mapa,
            path: coordRoute,
            geodesic: true,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 3
        });
    }if(varBool){
        route.setMap(mapa);
    }else{
        route.setMap(null);
    }
} 
```

我希望这有帮助

# graphics - 在 Mathematica 的 ListLinePlot3D 中为轴提供标签

> ID：10344955
> 
> 赞同：0
> 
> 时间：2012-04-27T04:57:35.917
> 
> 标签：graphics, wolfram-mathematica

当我们使用 ListPointPlot3D 绘制数据时，有没有办法为所有轴提供标签？

谢谢阿布舍克 S

# sql - 具有多个值的 SQL 复杂搜索查询

> ID：10344959
> 
> 赞同：1
> 
> 时间：2012-04-27T04:58:10.180
> 
> 标签：sql, sql-server, sql-server-2008, asp-classic

我正在尝试实现一些我不知道该怎么做的事情。我正在开发一个基于 ASP Classic 和 SQL 2008、IIS7 的网站。在搜索页面中，我可以选择为每个查询设置几个值，例如`default.asp?q=one|two|three&q2=four|five|six`.
我想要做的是使用通配符，以防我的查询没有价值，并且能够同时在一个列中搜索几个单词，以防我的查询有几个价值。这是我想做的事情：

1.  如果查询有价值，那么在数据库中就可以了（这很简单）
2.  如果查询有一对用“|”分隔的值 签名然后拆分它们并搜索所有这些。
3.  如果查询根本没有价值，则使用通配符并且不要搜索任何内容。

所以为了实现这一点，我尝试了几件事，但没有取得任何成功。这是我的代码示例。

一 - - - - - -

```
@style nVarchar(150) = ''
Select * FROM mytable WHERE CONTAINS(style, @style) AND ... 
```

我可以设法将查询拆分为类似`'"* value1 *" OR "* value2 *"'`从 CONTAINS 中获得最佳结果的查询，但是如果“样式”具有价值，则此查询有效。如果样式没有值，则没有通配符，因此我可以检索所有数据而无需过滤数据库。

二 - - - - - - - -

```
@style nVarchar(150) = ''
Select * FROM mytable WHERE style LIKE '%' + @style + '%' AND ... 
```

使用 LIKE 子句，我可以使用通配符`'%'`，以防样式没有任何值，但我无法在同一列中搜索几个值。
所以，请记住我正在使用“存储过程”，因为这有点复杂，我需要在几个地方使用它。我将对此搜索进行 10-12 个查询。
任何想法都会帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:19:35.623

我了解您的问题是用“|”分隔的值。在 SQL 2008 中，您可以使用 Xml 函数将字符串转换为表并针对您的基表进行查询：

```
DECLARE @style VARCHAR(MAX) = 'value1|value2|value3'
DECLARE @v XML 
SET @v = '<r><n>' + REPLACE(@style, '|', '</n><n>') + '</n></r>'

SELECT * FROM mytable
OUTER APPLY 
(
    SELECT c.value('text()[1]', 'varchar(50)') AS v FROM @v.nodes('//n') AS t(c)
) t
WHERE style LIKE '%' + t.v + '%' 
```

它有帮助吗？

# c# - dbset.local 更新数据库：无法将重复值插入唯一索引

> ID：10344966
> 
> 赞同：0
> 
> 时间：2012-04-27T04:59:18.180
> 
> 标签：c#, wpf, entity-framework, mvvm, local

在我的 EF 4.3.1 上调用 entity.savechanges() 时出现错误。我的数据库是一个 sql ce v4 存储，我正在使用 mvvm 模式进行编码。我有一个本地版本的上下文，我将它发送到一个可观察的集合并修改等。这工作正常，当我在数据库中不存在任何行时调用 savechanges() 时，对象仍然很好。当我重新加载应用程序时，对象会按原样填充到我的列表框中，但是如果我添加另一个对象并调用 savechanges() 我会收到错误消息，指出无法将重复值插入到唯一索引中。

据我了解，这意味着上下文正在尝试将我的实体保存到数据存储中，但它似乎正在添加我未触及的原始对象以及新对象。我认为这会让他们独自一人，因为他们的状态没有改变。

```
private void Load()
    {
        entities.Properties.Include("Images").Load();
        PropertyList = new ObservableCollection<Property>();
        PropertyList = entities.Properties.Local;        

        //Sort the list (based on previous session stored in database)
        var sortList = PropertyList.OrderBy(x => x.Sort).ToList();
        PropertyList.Clear();
        sortList.ForEach(PropertyList.Add);

        propertyView = CollectionViewSource.GetDefaultView(PropertyList);
        if (propertyView != null) propertyView.CurrentChanged += new System.EventHandler(propertyView_CurrentChanged);     

        private void NewProperty()
    {
        try
        {
            if (PropertyList != null)
            {                                             
                Property p = new Property()
                    {
                        ID = Guid.NewGuid(),
                        AgentName = "Firstname Lastname",
                        Address = "00 Blank Street",
                        AuctioneerName = "Firstname Lastname",
                        SaleTitle = "Insert a sales title",
                        Price = 0,
                        NextBid = 0,
                        CurrentImage = null,
                        Status = "Auction Pending",
                        QuadVis = false,
                        StatVis = false, //Pause button visibility
                        Sort = PropertyList.Count + 1,                            
                    };

                PropertyList.Add(p);
                SaveProperties();
            }

        private void SaveProperties()
    {
        try
        {               
            foreach (var image in entities.Images.Local.ToList())
            {
                if (image.Property == null)
                    entities.Images.Remove(image);
            }                
        }

        catch (Exception ex)
        {
            System.Windows.MessageBox.Show(ex.Message);
        }

        entities.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:06:58.300

听起来您正在将现有实体添加到上下文中（将它们标记为插入）而不是附加它们（将它们标记为现有的、未修改的）。

我也不确定 new Guid() 是否返回相同的 guid ...我总是使用 Guid.NewGuid() [http://msdn.microsoft.com/en-us/library/system.guid.newguid .aspx](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T13:51:41.957

在不评论所有代码的情况下，这是导致您提出的特定问题的一点：

```
//Sort the list (based on previous session stored in database) 
var sortList = PropertyList.OrderBy(x => x.Sort).ToList(); 
PropertyList.Clear(); 
sortList.ForEach(PropertyList.Add); 
```

这段代码：

*   从已被查询并被上下文跟踪为未更改实体的实体开始。也就是说，已知的实体已经存在于数据库中。
*   创建这些实体的新排序列表。
*   对本地集合调用 Clear 会导致每个跟踪的实体被标记为已删除并从集合中移除。
*   将每个实体添加回上下文，使其现在处于已添加状态，这意味着它是新的并且将在调用 SaveChanges 时保存到数据库中，

如此有效地告诉 EF，数据库中存在的所有实体实际上都不存在，需要保存。所以它试图这样做，它会导致你看到的异常。

要解决此问题，请不要清除 DbContext 本地集合并重新添加实体。相反，您应该使用本地集合在视图中排序以支持视图。

# c# - 如何访问另一个类中的事件处理程序

> ID：10344968
> 
> 赞同：2
> 
> 时间：2012-04-27T04:59:46.753
> 
> 标签：c#, winforms, visual-studio-2010

我在 A 类中有一个带有一些逻辑的单击事件处理程序。现在我想从 B 类访问 A 类事件处理程序并执行一些逻辑，以便 B 类事件处理程序逻辑首先触发，然后是 A 类事件处理程序。

例子：

```
Class A
private void calculate_Click(object sender, System.EventArgs e)
{  this.MyMethod(); }

Class B
private void calculate_Click(object sender, System.EventArgs e)
{  // My new code.. (This should trigger first)  this.MyMethod(); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T05:10:50.667

您可以使用 A 类公开并由 B 类使用的事件，就像我们使用 Button 类一样。Button 公开点击事件，在我们的表单类中，我们订阅了 Button 类公开的点击事件。

[我在这里](http://www.codeproject.com/Articles/11541/The-Simplest-C-Events-Example-Imaginable)找到了这个简单的例子来理解

```
using System;
namespace wildert
{
    public class Metronome
    {
        public event TickHandler Tick;
        public EventArgs e = null;
        public delegate void TickHandler(Metronome m, EventArgs e);
        public void Start()
        {
           // while (true) //uncomment this line if you want event to fire repeatedly
            {
                System.Threading.Thread.Sleep(3000);
                if (Tick != null)
                {
                    Tick(this, e);
                }
            }
        }
    }
        public class Listener
        {
            public void Subscribe(Metronome m)
            {
                m.Tick += new Metronome.TickHandler(HeardIt);
            }
            private void HeardIt(Metronome m, EventArgs e)
            {
                System.Console.WriteLine("HEARD IT");
            }

        }
    class Test
    {
        static void Main()
        {
            Metronome m = new Metronome();
            Listener l = new Listener();
            l.Subscribe(m);
            m.Start();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:04:41.737

假设 B 类的实例成员`A instanceOfClassA`使用 A 的实例正确初始化：

```
private void calculate_Click(object sender, System.EventArgs e) 
{
  // My new code.. (This should trigger first)  
  instanceOfClassA.MyMethod();
  // other code
} 
```

您也可以考虑从 A 继承 B 类：

```
class B:A
{
   private void calculate_Click(object sender, System.EventArgs e) 
    {
      // My new code.. (This should trigger first)  
      this.MyMethod(); // will come from base class A implementation.
      // other code
    }
} 
```

# regex - VIM 搜索和替换正则表达式

> ID：10344972
> 
> 赞同：3
> 
> 时间：2012-04-27T05:00:05.997
> 
> 标签：regex, vim, pcre

VIM 中使用搜索和替换在每行第一个逗号后添加数字 1 的最佳方法是什么？每行有多个逗号（这是一个 csv），我想在每行的第一个逗号之后插入值 1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T05:12:18.037

我相信`:s/,/,1/`应该这样做。如果您不使用该`g`选项，它只会替换每行找到的第一个实例。

如果您`:%s/,/,1/`希望它应用于整个文件，则第一个选项仅适用于单行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:05:22.650

将此正则表达式`/(^.*?,)/gm`与此替换一起使用`$11`。对于每一行，它从行的开头捕获所有内容，直到第一个逗号。这在由 表示的组 1 中捕获`$1`。将其替换`$11`为 group 1 后跟一个 number `1`。

在这里查看：[http ://regexr.com?30pjf](http://regexr.com?30pjf)

# ember.js - emberjs StateMachine 和 ViewState 的问题

> ID：10344974
> 
> 赞同：0
> 
> 时间：2012-04-27T05:00:09.800
> 
> 标签：ember.js

我在让状态经理切换我的视图时遇到了一些麻烦。我有一个状态机，它最初将显示登录屏幕，一旦用户通过身份验证，状态机将转换到授权状态​​并显示工作区或仪表板。问题是，当我加载页面时，我看不到登录屏幕，所以我怀疑我遗漏了一些东西。我正在使用 emberjs 0.9.7.1

这是我想要添加屏幕的 div

```
<body>
    <div id="main-container" class="container">
    </div>
</body> 
```

这是 login_view.handlerbars 文件的核心 html 片段（还有更多，但为简洁起见，我省略了它）。我可以看到这个编译并存储在 Ember.TEMPLATES['login_view'] 中。

```
<form class="form-inline">
  <fieldset>
    <input type="text" name="email">
    <input type="password" name="password">
    <button id="sign-in-button" class="btn btn-primary">Sign In</button>
   </fieldset>
</form> 
```

这是关联的视图 javascript 文件

```
App.LoginView = Ember.View.extend({
    templateName: 'login_view'
}); 
```

最后，这是我的状态机。我在控制台中看到消息“进入未经授权的状态”，但我没有看到嵌入在指定 div 中的登录 html。

```
App.sessionStates = Ember.StateManager.create({
    rootElement: '#main-container',
    initialState: 'unauthorized',

    unauthorized: Ember.ViewState.create({
        viewClass: App.LoginView,

        enter: function(stateManager, transition) {
            console.log("Entering unauthorized state");
        },

        exit: function(stateManager, transition) {
            console.log("Exiting unauthorized state");
        }
    }),

    authorized: Ember.ViewState.create({
        view: App.WorkspaceView
    })
}) 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:00:40.150

实际上文档是错误的并且有点混乱。

他们告诉您，`this._super()`如果您覆盖这些方法，您必须调用，但他们忘记指定您也必须传递参数。

我使用以下代码运行它：

```
enter: function(manager, transition) {
  this._super(manager, transition);
} 
```

或者如果你不关心这些论点：

```
enter: function() {
  this._super.apply(this, arguments);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:25:22.823

我认为应该是“view”而不是“viewClass”

```
unauthorized: Ember.ViewState.create({
        viewClass: App.LoginView, // the key should be 'view' 
```

**更新：**

这是一个快速示例小提琴，展示了如何使用 StateManager。[http://jsfiddle.net/lifeinafolder/GNr4M/](http://jsfiddle.net/lifeinafolder/GNr4M/)

如果您想使用“进入”和“退出”状态，请务必调用 super()。参考：[http ://ember-docs.herokuapp.com/#doc=Ember.StateManager&src=false](http://ember-docs.herokuapp.com/#doc=Ember.StateManager&src=false)

# jsf - 如何使用 Datatable LazyLoading 为目标元素设置值

> ID：10344978
> 
> 赞同：1
> 
> 时间：2012-04-27T05:01:12.810
> 
> 标签：jsf, primefaces

我想在 LazyLoading Datatable 中设置类似的东西，我无法使用下面的代码。

```
<p:dataTable var="studyPlanList" value="#{editBean.lazyModel}"
                paginator="true" rows="10"
                paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                rowsPerPageTemplate="5,10,15" selectionMode="single"
                selection="#{editBean.selectedStudyPlan}"
                id="studyPlanTable">
            <p:ajax event="rowSelect" listener="#{editBean.onRowSelect}" update=":studyPlanEditForm:display"  >
            </p:ajax> 
            <p:column headerText="StudyPlan" sortBy="#{studyPlanList.name}" filterBy="#{studyPlanList.name}">
            <h:outputText value="#{studyPlanList.name}"/>
            </p:column>
        </p:dataTable> 
```

而不是 p:column ，如果它是 h:link 它正在工作，我想达到类似的结果；请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:03:00.680

这是来自 facelet 标签文档`f:setPropertyActionListener`：

> 在与最近的父 UIComponent 自定义操作关联的 UIComponent 上注册一个 ActionListener 实例

所以你需要一个触发动作来让它工作。这可能是一个`h:commandButton`或`h:commandLink`。这是一个简单的例子：

```
<h:commandButton action="#{editBean.submitAction}" value="Select">
    <f:setPropertyActionListener target="#{editBean.name}" 
                                 value="#{studyPlanList.name}" />
</h:commandButton> 
```

由于您使用的是 Primefaces，您可以查看`p:dataTable`. 这是[来自陈列柜的一个例子](http://www.primefaces.org/showcase/ui/datatableRowSelectionSingle.jsf)。

**更新：**

选择的类型应与行元素的类型相同。我从你的代码中看到，`selection="#{editBean.selectedStudyPlan.name}"`但它应该是

```
selection="#{editBean.selectedStudyPlan}" 
```

# iphone - 如何赋予 UIButton UIBarButtonItem 的外观

> ID：10344979
> 
> 赞同：2
> 
> 时间：2012-04-27T05:01:26.817
> 
> 标签：iphone, ios, image, uibutton, uibarbuttonitem

我很难为 UIButton 赋予 UIBarButtonItem（保存按钮）的外观。谷歌搜索，我发现这只能通过使用图像来有效地完成。我在网上搜索了图片，但找不到任何好的图片。如果有人有此链接，那将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:03:37.133

看看 Teehan + Lax iPhone 模板；它们非常好，你会在那里找到一个很好的 UIBarButtonItem：

[http://www.teehanlax.com/blog/iphone-gui-psd-v4/](http://www.teehanlax.com/blog/iphone-gui-psd-v4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:06:23.983

[UIKit 艺术品提取器](https://github.com/0xced/UIKit-Artwork-Extractor)呢？似乎它会返回最简单和最准确的按钮图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:14:02.557

![在此处输入图像描述](../Images/b81f592a02329a69aa7e0fda43957f19.png)

摘自[http://www.teehanlax.com/blog/iphone-gui-psd-v4/](http://www.teehanlax.com/blog/iphone-gui-psd-v4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T09:51:47.417

我将我的解决方案发布在[如何创建 UIButton 以显示与 UIBarButtonItem 相同的效果？](https://stackoverflow.com/questions/7709136/how-to-create-a-uibutton-to-appear-same-effect-as-uibarbuttonitem/16810661#16810661)

我只是使用 QuartzCore 框架并提供了一个示例！

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T05:03:25.763

![在您的按钮中设置此图像并查看效果](../Images/9b032355394384888b1f43768c09e0d8.png)

在您的按钮中设置此图像并查看效果

希望，这会让你...

# asp.net-mvc-3 - MVC3 路由基础

> ID：10344986
> 
> 赞同：2
> 
> 时间：2012-04-27T05:02:21.940
> 
> 标签：asp.net-mvc-3, routing, format

我正在学习 MVC 路由。希望我的问题看起来不傻，请帮忙:)

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

Msdn 参考说它需要一个字符串、字符串、对象，所以我尝试做一个小改动（在所有内容前面添加一个“我的”只是为了修改名称并查看它是否有效）：

```
 public static void RegisterRoutes(RouteCollection routes) {
        routes.IgnoreRoute("{myresource}.axd/{*mypathInfo}");

        routes.MapRoute(
            "myDefault", // Route name
            "{mycontroller}/{myaction}/{myid}", // URL with parameters
            new { mycontroller = "Home", myaction = "Index", myid = UrlParameter.Optional } // Parameter defaults
        ); 
```

它不再起作用了。“{}”大括号中的这些字符串的格式是什么，以及匿名对象值格式。

{controller}/{action}/{id} /Products/show/beverages

{table}/Details.aspx /Products/Details.aspx

博客/{action}/{entry} /blog/show/123

{reporttype}/{year}/{month}/{day} /sales/2008/1/5

{locale}/{action} /US/show

{language}-{country}/{action} /zh-CN/show

{controller}/{action}/{id} [http://server/application/Products/show/beverages](http://server/application/Products/show/beverages)

{resource}.axd/{*pathInfo} [http://server/application/WebResource.axd?d=](http://server/application/WebResource.axd?d=) ...

我用谷歌搜索了一下，但所有帖子似乎都假设我知道格式，并且找不到任何详细的解释。它们是否必须是固定名称，如 {controller} {action} {id} 等，否则他们不会不行吗？默认匿名对象值名称是否也需要匹配它们？此外，{*pathInfo} 中的“*”是什么意思，我也找不到解释。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T05:26:39.273

首先，我们需要一些定义。

让我们分解默认路由。

```
routes.MapRoute( 
    "Default", // Route name 
    "{controller}/{action}/{id}", // URL with parameters 
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults 
); 
```

在这种情况下，第 2 行的 Default 只是用于标识路由的文本名称。

第 3 行是 url 模式。这定义了路由的匹配方式。大括号中的东西是占位符。它们映射到参数名称。所以 {controller} 映射到控制器名称。{action} 映射到动作名称，{id}​​ 映射到名为 id 的参数。

第 4 行是默认对象。当无法从 url 推断出默认值时，此对象提供默认值。

所以，如果我们把所有这些放在一起，我们可以得出一些结论：

默认对象仅在无法从 url 字符串中推断出值时才提供值。因此，当传入的请求是 just 时`/`，第 4 行的 dfault 值用于控制器和操作。如果传入请求是`/Blah`，则忽略第 4 行提供的默认控制器，而 MVC 会寻找`BlahController`. 但是，由于未指定任何操作，因此使用第 4 行的默认操作`Index`。

这里要记住的关键是第 4 行的值仅在没有与第 3 行中的 url 匹配的情况下使用。

所以，当你改变一切时，你把所有东西都扔了一个循环。这是一条毫无意义的路线，因为没有定义要使用哪个控制器或操作，并且这两个值是完成路线所必需的。因此，MVC 无法确定您想要什么控制器。或与此相关的操作方法。

另一个例子：

```
routes.MapRoute(
    "Example",
    "Home/{action}/{myid}",
    new { controller = "NotHome", action = "Index", myid = UrlParameter.Optional }
); 
```

因为 url 中没有`{controller}`占位符，所以使用默认的“NotHome”，这使得 MVC 查找`NotHomeController`. 所以 url`/Home/About/3`意味着控制器 =“NotHome”，动作 =“关于”，myid = 3。

总而言之，在传入路由中，*必须*至少填写控制器和操作的值。id 是可选的，并且可以重命名为您喜欢的任何名称。但是，必须设置控制器和动作参数，否则 MVC 不知道如何路由。

另外，请记住，默认路由（或有效的默认路由）必须排在列表的最后，否则不会匹配其他路由。

该`{*pathInfo}`钻头称为蛞蝓。它基本上是一个通配符，表示“此点之后的所有内容都填充到一个名为 pathInfo 的参数中”。因此，如果您有`"{resource}.axd/{*pathInfo}"`一个这样的 url：`http://blah/foo.axd/foo/bar/baz/bing`然后创建两个参数，一个称为`resource`，它将包含`foo`，一个称为`pathInfo`包含`foo/bar/baz/bing`。

# sql - 从十进制数中删除尾随零

> ID：10344988
> 
> 赞同：4
> 
> 时间：2012-04-27T05:02:35.497
> 
> 标签：sql

我有一个名为 Amount 的数据库表字段，其类型为小数（18,6）。所以它存储在数据库中最多 6 个小数点，如 9.786534 但是在使用选择查询检索该字段时，我必须注意如下

1.  删除试验零例如如果数字是 9.230000 那么结果只有 9.23
2.  如果小数点全为零，则仅删除四个试验零，例如如果数字为 9.000000，则结果为 9.00

3.  如果有试零，结果最多保留 2 个小数点。

如果我们编写简单的查询，例如

从 EmployeeMaster 中选择 TOP 1 金额

然后它给出 9.230000

但我的意图是删除尾随零..

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:53:09.013

来自十进制（18,6）你可以做......

```
select cast(Amount as decimal(18,2)) 
```

大多数支持 CAST 函数的数据库在转换时都会对数字进行四舍五入。在 SQLServer 上，如果我想要四舍五入，我会这样做。

如果你真正想要的是一个小数点后只有两位数字的字符串，那么你可以

```
select cast((Amount as decimal(18,2)) as nvarchar) 
```

nvarchar 是 SQLServer 的可变长度 unicode 类型。数据库在字符串类型上并不一致。您的数据库可能有不同的数据库。该sql的其余部分是ANSI标准。并非所有 dbs 都支持，但很多都支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:36:40.077

它适用于删除尾随零，但我仍然无法转换`9`为`9.00`这种方法。

```
Declare @myvalue varchar(50), 
        @Price Varchar(50) 

Set @Price = '9.230000' 

set @Myvalue = reverse(substring(@Price,patindex('%.%',@Price)+1,len(@Price))) 

SELECT 
case  
When  patindex('%.%[1-9]%',@price) = 0 Then  
    substring(@price,1,patindex('%.%',@price)-1) 
else 
    substring(@price,1,patindex('%.%',@price)-1) + '.' +  Reverse(substring(@Myvalue,patindex('%[1-9]%',@Myvalue),len(@Myvalue))) 
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T11:29:12.567

这应该工作

```
SELECT CAST(REPLACE(RTRIM(REPLACE(CAST(CAST(33.9082976 AS DECIMAL(38,8)) AS NVARCHAR(256)),'0',' ')),' ','0') AS FLOAT) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T05:08:45.247

这行得通吗？

```
select TOP 1 ROUND(Amount, 2) From EmployeeMaster 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T08:12:40.447

另一种方法：

1）将小数转换为字符串；

2) 将字符串拆分为 2 部分，将最后 4 个字符与字符串的其余部分分开；

3) 删除最后 4 个字符的尾随零；

4）将两个部分连接回来。

```
WITH data (V)     AS (SELECT CAST(9.786534 AS decimal(18,6))
                      UNION ALL
                      SELECT CAST(9.78653  AS decimal(18,6))
                      UNION ALL
                      SELECT CAST(9.7800   AS decimal(18,6))
                      UNION ALL
                      SELECT CAST(9.7      AS decimal(18,6))
                      UNION ALL
                      SELECT CAST(9.00000  AS decimal(18,6))
                     )

,    AsString (V) AS (SELECT CAST(V AS varchar) FROM data)

,    Split (L, R) AS (SELECT LEFT(V, LEN(V) - 4), RIGHT(V, 4) FROM AsString)

,    Adjusted     AS (SELECT L,
                             REPLACE(RTRIM(REPLACE(R, '0', ' ')), ' ', '0') AS R
                      FROM Split)

SELECT Result = L + R FROM Adjusted 
```

上述脚本的输出是：

```
Result
--------
9.786534
9.78653
9.78
9.70
9.00 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T14:31:16.480

我想在你的情况下使用 patindex ：

```
CASE WHEN FLOOR(Amount) <> CEILING(Amount) THEN 
     LTRIM(SUBSTRING(STR(Amount, 18, 6), 1, LEN(STR(Amount, 18, 6)) - PATINDEX('%[^0]%', REVERSE(str(Amount, 18, 6))) + 1))
     ELSE STR(Amount,18,2)
END 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T05:14:03.093

试试下面提到的代码。

```
SELECT TOP 1 CONVERT(DECIMAL(10,2),Amount) From EmployeeMaster 
```

希望它能按预期工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-03T14:07:18.967

对于一个`decimal(18,6)`领域，这应该工作：

```
select trim(to_char(Amount, '999999999999999999.99')) from EmployeeMaster 
```

（至少对于 Oracle，不确定其他类型）

# extjs - 如何在 sencha touch 2.0.0 应用程序中集成类似 FB 的按钮

> ID：10344989
> 
> 赞同：2
> 
> 时间：2012-04-27T05:02:38.460
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我是 sencha touch 应用程序开发的新手。目前我正在关注 sencha touch 2.0.0 。我只需要知道如何一步一步地将 FACEBOOK-LIKE 按钮集成到我的 sencha touch 2.0.0 应用程序中。

任何类型的答案、代码示例、教程都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:53:50.387

我认为 Sencha Touch 论坛上的以下一些帖子可能会对您有所帮助。

*   [添加自己的facebook喜欢按钮](http://www.sencha.com/forum/showthread.php?197727-Add-own-facebook-like-button)
*   [Sencha Touch 工具栏上的 FB 按钮](http://www.sencha.com/forum/showthread.php?123386-FB-Like-button-on-Sencha-Touch-Toolbar)

# iphone - 我可以比较按钮的文本颜色吗？

> ID：10344994
> 
> 赞同：0
> 
> 时间：2012-04-27T05:03:06.410
> 
> 标签：iphone, uibutton

我正在使用下面的代码行，但它似乎没有做我期望的事情，即确定按钮标题的标题文本颜色是否为绿色。但是，我没有收到编译错误，所以它必须做一些事情：

```
if ([sfield1 currentTitleColor] != [UIColor greenColor]) 
```

有人知道是否有办法进行这种比较？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:06:24.530

您可以尝试使用 -

```
isEqual: 
```

但是在使用时需要小心，如果颜色模型有差异，那么它可能会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T05:58:54.897

试试这个它可能会工作。,.,.

```
 but=[[UIButton alloc]init];  
 [but setTitle:@"nice" forState:UIControlStateNormal];
 [but setTitleColor:[UIColor blueColor] forState:UIControlStateNormal];
 [but setFrame:CGRectMake(100, 450, 40, 20)];
 [self.view addSubview:but];

 if (but.titleLabel.textColor==[UIColor blueColor]) 
  {
  NSLog(@"nothing., it is very easy.,.");
  } 
```

我在学习，。，。，，。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T06:12:29.213

让这两种颜色穿过它们：

```
 UIColor *color = value;
    const CGFloat *components = CGColorGetComponents(color.CGColor);
    NSString *colorAsString = [NSString stringWithFormat:@"%f,%f,%f,%f", components[0], components[1], components[2], components[3]]; 
```

然后比较两个字符串？也许有点矫枉过正，但如果以上所有方法都不起作用，这可能是最后的手段。（我强烈建议尝试找出 isEqual 不起作用的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T05:07:20.093

使用 isEqual 方法：

```
if ([[sfield1 currentTitleColor] isEqual: [UIColor greenColor]]) 
```

现在你只是在相等内存地址，它们显然不相等，因为它们不是完全相同的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T05:08:34.727

试试这个`[[sfield1 currentTitleColor] isEqual: [UIColor greenColor]];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T05:31:34.543

```
[[yourfeild currentTitleColor] isEqual:[UIColor yourcurrentcolor]]; 
```

您只是在等于内存地址，这些地址显然不相等，因为它们不是完全相同的对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T05:46:16.433

在 iOS 5 及更高版本中，`UIColor`为 HSL 和 RGB 颜色系统提供了 getter，因此您可以编写一个实用函数来比较两种给定颜色的颜色……</p>

或者，您是否尝试过比较两种颜色的 CIColor 属性？

# .net - 如何从 C++/CLI 调用 VB6 COM

> ID：10344996
> 
> 赞同：0
> 
> 时间：2012-04-27T05:03:19.273
> 
> 标签：.net, interop, c++-cli, unmanaged, managed

我有一种情况，我必须从 C++/CLI 调用 VB6 COM。这可以通过在项目中添加VB6 dll的引用使用C#来实现，因为Interop dll是在那里自动生成的。

但是，我的情况有点不同，因为我正在使用 c++/CLI 并且需要一种从 C++/CLI 代码调用 VB6 COM 的方法。

其次，是否可以生成 VB6 COM 的 .tlh。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:20:57.287

您可以在您的 c++/CLI 项目中添加 VB6 Dll 的引用，方法是转到 Project->Properties->Common Properties->Framework and References->Add New Reference。

现在选择您的 VB6.dll，它将生成所需的互操作，然后您就可以从 c++/CLI 调用 VB6。

# javascript - 使用 underscore.js 对数组进行分类的最快方法是什么？

> ID：10344998
> 
> 赞同：0
> 
> 时间：2012-04-27T05:03:25.163
> 
> 标签：javascript, arrays, mapreduce, underscore.js

对于这样的 json 对象，

```
list=[
 {name:"hello",
  category:"verb"},
 {name:"world",
  category:"noun"}
]; 
```

使用下划线对数组进行分类的最快方法是什么：

```
category=[
{id:"verb",
 list:[
  {name:"hello",
  category:"verb"}
 ]},
{id:"noun",
 list:[
  {name:"world",
  category:"noun"}
 ]}
]; 
```

它应该是某种链式 map-reduce ......当然我可以使用`_.filter`（但这会很慢）或使用`for`循环轻松地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:19:25.550

好的，我找到了：

**groupBy** _.groupBy(list, iterator)
将集合拆分为集合，按通过**迭代器**运行每个值的结果进行分组。如果**迭代器**是字符串而不是函数，则按迭代器命名的属性对每个值进行分组。

```
_.groupBy([1.3, 2.1, 2.4], function(num){ return Math.floor(num); });
=> {1: [1.3], 2: [2.1, 2.4]}

_.groupBy(['one', 'two', 'three'], 'length');
=> {3: ["one", "two"], 5: ["three"]} 
```

所以我用这个做了（我已经有一个列表）：

```
var listofwords=_.groupBy(doc.words, function(word){
        return word.category;
    });
    _.each(doc.lists,function(list){
        list.words=listofwords[list.name];
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:36:57.787

我认为，这应该更快

```
list = [
  {name:"hello", category:"verb"},
  {name:"world", category:"noun"}
];

var addresses = {};

var catList = _.reduce(list, function(cat, item) {
  var address = addresses[item.category];
  if(typeof address == 'undefined') {
    addresses[item.category] = address = cat.length;
    cat.push({id: item.category, list: []});
  }
  cat[address].list.push(item);
  return cat;
}, []); 
```