# StackOverflow 问答 10797000-10797999

# c++ - C++ 中的实函数实现和运算符+重载

> ID：10797001
> 
> 赞同：1
> 
> 时间：2012-05-29T10:06:42.397
> 
> 标签：c++, operator-overloading, constants, abstract-class

我想用 C++ 实现真正的功能。特别是我想评估、区分、添加、乘以这些对象。这是我的实现

```
class RealFunc {
public:
    virtual int Eval(const double& x, double& result) = 0;
    virtual int Diff(const double& x, double& result) = 0;
};

class Sqrt : public RealFunc {
public:
    int Eval(const double& x, double& result);
    int Diff(const double& x, double& result); 
};

int Sqrt::Eval(const double& x, double& result) {
    if(x<0) return 0;
    else {
        result = sqrt(x);
        return 1;
    }
};

int Sqrt::Diff(const double& x, double& result) {
    if(x<=0) return 0;
    else {
        result = 0.5/sqrt(x);
        return 1;
    }
}; 
```

当我尝试添加`RealFunc`对象时会变得很棘手。我必须创建一个继承自的 sum 类`RealFunc`

```
RealFunc operator+(const RealFunc& f, const RealFunc& g) {
    Sum_RealFunc h(f,g);
    return h;
};

class Sum_RealFunc : public RealFunc {
public:
    Sum_RealFunc(const RealFunc& f_, const RealFunc& g_) : f(f_), g(g_) {};
    int Eval(const double& x, double& result);
    int Diff(const double& x, double& result);
private:
    RealFunc f;
    RealFunc g;
};

int Sum_RealFunc::Eval(const double& x, double& result) {
    double temp_f,temp_g;
    int success_f,success_g;
    success_f = f.Eval(x,temp_f);
    success_g = g.Eval(x,temp_g);
    result = temp_f+temp_g;
    return success_f*success_g;
};

// Same for Sum_RealFunc::Diff 
```

我的问题是我不能使用`f`，因为`g`成员是抽象的......我应该如何继续获得一个干净的实现？`Sum_RealFunc``RealFunc`

PS：我放的代码是我正在处理的代码的简单版本（来自 RxR->R 的函数，具有所有微分方向，如果 stepsize 成员不为零，则为有限差分以及其他辅助函数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:15:53.030

您面临的问题是，您既需要一个与值对象（运算符重载）一起工作的特性，又需要一个只与指针一起工作的特性（继承/多态）。

作为一种解决方案，您需要一个带有重载运算符的值对象作为通过指针管理的多态对象的包装器：

```
class RealFuncImpl {
public:
    virtual ~RealFuncImpl(); // don't forget this for polymorphic objects

    virtual int Eval(const double& x, double& result) = 0;
    virtual int Diff(const double& x, double& result) = 0;
};

class RealFunc {
    std::shared_ptr<RealFuncImpl> impl;
public:

    int Eval(const double& x, double& result);
    int Diff(const double& x, double& result);
}; 
```

您`Sum_RealFuncImpl`将从中派生`RealFuncImpl`并实现您的运算符`RealFunc`。您可能应该将您的类隐藏`Impl`在某个“详细”名称空间中，因为您的代码的最终用户不应该看到它们。

编辑：

您`Sum_RealFuncImpl`将包含两个`std::shared_ptr<RealFuncImpl>`成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:14:20.617

由于您在构造函数初始化程序列表中初始化它们，您可以使成员变量引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:32:13.553

你有两种可能：

*   按照 wolfgang 的建议做：仅使用共享指针的包装器。这样您就可以创建副本，而无需真正复制派生函数对象。
*   `clone`通过实现成员，使派生类本身可通过基类指针复制。最方便的是从 CRTP 类派生而不是直接从基类派生。我会将其设为本地课程，以免混淆：

    ```
    struct RealFunc {
      virtual std::pair<double,bool> operator()       //IMO better than this
                              (double x)const =0;    // reference-argument hackery
      virtual std::pair<double,bool> Diff
                                 (double x)const =0;

      virtual RealFunc* clone()const =0;
      template<class Derived>
      struct implementation : RealFunc {
        RealFunc* clone() {
          return new Derived(*static_cast<const Derived*>(this));
        }
      };

      virtual ~RealFunc(){}
    }; 
    ```

    现在您只需从 中派生您的函数对象`implementation`，以使它们可克隆：

    ```
    struct Sqrt : RealFunc::implementation<Sqrt> {
      std::pair<double,bool> operator()(double x) {
        return x>=0
                ? std::make_pair(sqrt(x), true)
                : std::make_pair(0., false);
      }
      ...
    } 
    ```

    您的 sum 函数现在可以很好地完成`std::unique_ptr`：

    ```
    class Sum_RealFunc : public RealFunc::implementation<Sum_RealFunc> {
      std::vector<std::unique_ptr<RealFunc>> summands;
     public:
      std::pair<double,bool> operator()(double x) {
        double result=0;
        for(auto& f: summands) {
          auto r = (*f)(x);
          if(r.second) result += r.first;
           else return std::make_pair(0., false);
        }
        return std::make_pair(result, true);
      }

      Sum_RealFunc(const Sum_RealFunc& cpy) {
        for(auto& f: cpy.summands)
          summands.push_back(f->clone());
      }

      //friend operator+=(RealFunc& acc, const RealFunc& add); //doesn't work
    }; 
    ```

    不幸的是，这*不足以*允许编写简单的求和表达式。我在最近的一个项目中做了一些事情，几乎解决了所有这些问题，但有点复杂：我为*每个*实例提供了用任何其他实例覆盖其行为的选项。像

    ```
    class RealFunc {
      std::unique_ptr<RealFunc> override;
     public:
      virtual std::pair<double,bool> operator()(double x)const {
        return (*override)(x);
      }
      virtual std::pair<double,bool> Diff(double x)const {
        return override->Diff(x);
      }

      auto implemented() -> RealFunc*                              {
        return implement_override? override->implemented() : this; }
      auto implemented()const -> const RealFunc*                   {
        return implement_override? override->implemented() : this; }

      virtual RealFunc* clone()const =0;
      template<class Derived>
      struct implementation : RealFunc {
        virtual std::pair<double,bool> operator()(double x)const =0;
        virtual std::pair<double,bool> Diff(double x)const =0;
        RealFunc* clone() {
          return new Derived(*static_cast<const Derived*>(this));
        }
      };

      virtual ~RealFunc(){}
    }; 
    ```

    这还不是全部，您需要`override`使用这种方法对所有地方进行大量检查。但最终，它可以让你非常流畅地组合功能，比如

    ```
    RealFunc f = const_realfunc(7.);
    for(auto& omega: omegas)
      f += sine_angfreq(omega);
    RealFunc g = f + noise_func(.3);
    ... 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T10:52:40.357

尝试

```
class Sum_RealFunc : public RealFunc {
    public:
        Sum_RealFunc(RealFunc& f_, RealFunc& g_) : f(f_), g(g_) {};
        int Eval(const double& x, double& result);
        int Diff(const double& x, double& result);
    private:
        RealFunc& f;
        RealFunc& g;
}; 
```

现在 f 和 g 是参考，这很好。

# c++ - 使用 engine.h 时，让 Matlab 在命令行窗口中显示错误和输出

> ID：10797005
> 
> 赞同：1
> 
> 时间：2012-05-29T10:06:49.963
> 
> 标签：c++, matlab, matlab-engine

我正在使用 matlab 引擎从 c++ 程序中调用一些函数，效果很好。数据被传递，函数被调用，结果以数字形式显示。

但是，如果在调用的 matlab 函数中有一行导致它出错，则不会出现任何内容，因此人们不知道是否存在问题（例如，路径不正确）。

此外，如果通过 c++ 调用，对被调用函数中包含的诸如 disp 和 fprintf 之类的调用不会显示在 Matlab 命令窗口中……但是，如果直接从它们相同的 Matlab 命令窗口调用完全相同的函数。最后，对 save('fileName',var) 的调用不会导致变量被保存，如果直接调用该函数，它也会如此。

当从我的 c++ 程序调用各种 matlab 函数时，我需要设置什么才能使此输出显示在命令窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:28:02.713

要检查错误，请使用

`lasterror('reset')` 在 Matlab 中计算之前，并在计算之后使用检查错误 `lasterror` 。

我不知道 disp 和 fprintf 函数

# ruby-on-rails-3 - 在电子邮件主题中添加 TM 符号

> ID：10797010
> 
> 赞同：4
> 
> 时间：2012-05-29T10:07:11.837
> 
> 标签：ruby-on-rails-3, email, html-email

我需要在电子邮件主题中显示 TM 符号。我将它添加到邮件正文中，`&#8482;`因为我们可以将电子邮件作为文本/html 编码发送。但是，我还需要在主题行中添加它。

我想这是不可能的，因为我们不能在电子邮件的主题行中使用 HTML。但我想确保这一点，或者可能以其他方式做到这一点。我正在使用 Rails 3。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T16:39:50.323

我不知道红宝石，但一般来说，你会像这样对主题进行编码：

```
=?utf-8?q?hello_world=E2=84=A2?= 
```

=> 这会产生“hello world™”

**=E2=84=A2**是 utf-8 中商标符号的引用可打印表示

见：[http ://en.wikipedia.org/wiki/MIME#Encoded-Word](http://en.wikipedia.org/wiki/MIME#Encoded-Word)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-11T05:37:15.123

在地址中添加此 Unicode 字符商标符号**\u2122**，例如：“ **MakeMyShop\u2122 优惠”** 和电子邮件主题，如**“欢迎来到 MakeMyShop.IN\u2122！”**

[![在此处输入图像描述](../Images/90f1f52f7914e795fac03347db5df472.png)](https://i.stack.imgur.com/VlbYn.png)

# c# - SQL Lite 数据类型 - C#

> ID：10797011
> 
> 赞同：0
> 
> 时间：2012-05-29T10:07:18.170
> 
> 标签：c#, database, sqlite

我正在通过 C# 应用程序做一些基本的 SQL Lite 数据库工作。我已按照[此处](http://www.dreamincode.net/forums/topic/157830-using-sqlite-with-c#/)的教程进行操作，并且基础知识没有任何问题。但是，我正在使用的数据库中有一些 UNIX 时间戳。我希望将这些转换为标准时间。通过简单地将秒数添加到 UNIX 开始时间（1970 年 1 月 1 日），我又一次完成了。

但是，当我希望将此数据转换回 dataGridView 时，我的问题就出现了。由于数据已经被插入到网格视图中，它已经清楚地将时间列格式化为 Int64（来自 UNIX 秒值），但我试图将 DateTime 值转换回它，从而导致错误。

即使我在将数据转换为 dataGridView 之前对其进行了修改，我仍然会收到此错误，这表明幕后还有进一步的事情发生。我假设我查询数据库的方式也带回了这种格式。

提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:15:18.693

您可以使用[SQLite DateTime 函数](http://www.sqlite.org/lang_datefunc.html)，然后将其绑定到 datagridview ，而不是在 C# 中转换 unix 时间戳

```
SELECT datetime(1092941466, 'unixepoch'); 
```

# .net - 在目标机器上安装 Office/PowerPoint 2010 (VSTO) 插件的过程

> ID：10797014
> 
> 赞同：1
> 
> 时间：2012-05-29T10:07:18.460
> 
> 标签：.net, visual-studio-2010, vsto, ms-office, powerpoint

我使用 VSTO 和 Visual Studio 为 PowerPoint 创建了一个应用程序级加载项。有关配置/版本的一些信息：

*   我正在使用 Visual Studio 2010
*   一开始，我选择了预定义的“PowerPoint 2010 Add-In”项目类型/模板
*   在项目属性中，目标框架设置为“.NET Framework 4.0”

到目前为止，一切都很好。

我的目标是将此加载项分发给尚未安装 Visual Studio（因此缺少 VSTO 库等）的人。它并不需要是一个非常舒适和万无一失的东西，只是一种在目标机器上安装插件和依赖项的快速方法。

我发现的是[这个链接（MSDN）](http://msdn.microsoft.com/en-us/library/ff937654.aspx "这个链接")。对于我的意图，这仍然是最新的还是有更快的方法？我的意思是那篇文章很长，如果你遗漏了什么，可能会出错。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:25:12.440

查看[Clickonce](http://msdn.microsoft.com/en-us/library/bb821233%28v=office.12%29.aspx)进行简单部署。VS2010 也是如此。

# debugging - 如何调试 Rexx 代码？

> ID：10797018
> 
> 赞同：3
> 
> 时间：2012-05-29T10:07:27.563
> 
> 标签：debugging, rexx

我正在研究基于 Rexx 构建的代码解析器。它是一个包含大约 5000 行或更多代码的单文件脚本。我以前从未在 Rexx 上工作过。除此之外，可读性问题让我的生活更加艰难。所以，

是否有任何工具可以调试和理解 Rexx 代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T10:16:08.537

使用[跟踪](http://nokix.pasjagsm.pl/help/learn_rexx/trace.htm)语句？最简单的追踪模式是“A”。这会导致每条指令在执行之前显示出来。您的指令以行号和前面的三个字符*-*显示，以便您可以将其识别为脚本中的一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:57:55.970

Wikipedia 上有[一篇关于 Rexx 的很好的文章](http://en.wikipedia.org/wiki/REXX)，它应该可以帮助您理解 Rexx 语法和程序结构。几乎所有 Rexx 书籍都适用于您的环境，因为 Rexx 是非常跨系统的（类似于较年轻的 Perl 和 Python 语言）。网上书不多，因为几乎所有关于 Rexx 的文章都是在网络出现之前写的，但是[Regina 实现的](http://regina-rexx.sourceforge.net/)[参考手册](http://sourceforge.net/projects/regina-rexx/files/regina-documentation/3.6/regina.pdf/download)是，而且是一本特别好的参考书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T16:14:08.523

这个问题的日期很旧，但我会分享我发现对下一个提出这个问题的人有帮助的内容。已经提到的是 TRACE 选项。我发现这在一小部分代码中可能会让人不知所措，更不用说 5,000 行或更多行了。
以下是我发现有用的一些选项：

1.  仅在某些情况下使用“if”来打开跟踪。
    `if counter < 25 then trace "A"`
    请务必使用以下命令关闭跟踪：
    `else trace "OFF"`
2.  使用`say`后跟`pull`. 所说的内容将保留在屏幕上，直到您按 Enter 键。
3.  添加一个子例程：
    `AskIt:`
    `parse pull comment`
    `say comment`
    `say 'enter "X" to exit program'`
    `pull continue`
    `if Continue \= "X" then return`
    `exit`
    这被调用`call AskIt "In routine that loops, counter=" counter`
    并会显示：
    `In routine that loops counter='##`
    `enter "X" to exit program`
    测试人员选择返回代码，方法是用 X 敲击进入或退出程序来编辑源代码。在例程标签后面的行中
    临时插入将允许您不间断地运行代码，而无需删除所有调用。 我为 z/OS 编写了一个编辑宏，它在每个例程标签之后插入一个。它插入包含易于识别的短语的代码以简化清理。这样做的受众会很少，所以我不会在此处包含代码。 希望这可以帮助某人。`return`

    `say *routine name*``/* comment */`

# ruby-on-rails-3 - Ruby 测试数据生成

> ID：10797020
> 
> 赞同：0
> 
> 时间：2012-05-29T10:07:28.610
> 
> 标签：ruby-on-rails-3, rubygems

我想填充一些数据以在我的 Rails 应用程序中使用。但是我无法决定哪个数据生成器最适合我。

我想快速清洁发电机。它还应该创建大量数据。

我有 3 个，random_data、forger 和 faker。

哪一个是最好的？你能分享你的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:27:38.300

我的选择是[ffaker](https://github.com/EmmanuelOga/ffaker#readme)。它非常快并且由 Emmanuel 维护。

# android - Android SQLite 最佳实践建议

> ID：10797021
> 
> 赞同：5
> 
> 时间：2012-05-29T10:07:38.480
> 
> 标签：android, database, sqlite

这可能有点厚颜无耻，但我想要一些建议。我是 Android 新手，已经开始创建我的第一个应用程序。我来到需要创建一个包含多个表的 SQLite DB 的部分，并且一直在寻找最佳实践，但一直找不到我的答案，这有一点帮助，但不是很多[SQLite 的最佳实践是什么？安卓？](https://stackoverflow.com/questions/2493331/what-is-best-practice-with-sqlite-and-android). 我总共需要大约 6 张桌子。

1.  我应该使用一个“常量”类来保存我所有的表名、字段名和数据库名吗？

2.  我应该创建一个“DBHelper”类来运行我的所有 SQL SELECT、UPDATE、DELETE 还是为每个表创建一个？

3.  关于维护数据或我需要的任何其他类的最佳实践的任何其他建议？

4.  奖金问题 :) 如果有人有任何好的例子，他们可以指出我，因为 Android 文档示例不够深入。

非常感谢，我正在考虑创建一个博客，其中包含一些简单的示例供新手使用，因为我读过的一些内容对于像我这样的小脑袋来说有点复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:51:37.517

我发现这个回答了我正在寻找的东西。不知道我是怎么在所有搜索中都没有找到这个的！感谢您的所有帮助男孩/女孩！

[Android中的多个表SQLite DB适配器？](https://stackoverflow.com/questions/4063510/multiple-table-sqlite-db-adapters-in-android)

# silverlight - Frame.Navigate 在引擎盖下？

> ID：10797022
> 
> 赞同：0
> 
> 时间：2012-05-29T10:07:38.670
> 
> 标签：silverlight, windows-phone-7, windows-8, windows-runtime, winrt-xaml

当我使用 Frame.Navigate(...) 时，我导航到和从中导航的页面似乎只初始化了一次。（构造函数仅在我第一次导航到特定页面时被点击）。下次我点击我已经打开过的页面时，该页面已经“在内存中”......

这是为什么 ？

# mysql - 在数据库中仅存储 10 行

> ID：10797024
> 
> 赞同：1
> 
> 时间：2012-05-29T10:07:48.277
> 
> 标签：mysql

> **可能重复：**
> [如何设置 MySQL 表中的最大行数？](https://stackoverflow.com/questions/8048001/how-can-i-set-a-maximum-number-of-rows-in-mysql-table)

如果添加第 11 行，如何在数据库中只存储 10 行，那么应该删除旧的.....

简要说明：正在创建一个应用程序pf密码管理，如果用户更改密码，当前密码将被更新，旧密码将与更改时间的时间戳一起存储在其他表中......当他更改密码时，它会检查旧密码表列表，如果它存在，它会给出一条消息，比如你之前使用过这个密码，所以给其他名字.....现在我想要的是只有最近的 10 个密码应该存储在 passwordList 表中 如何实现这一点.... 提前致谢...

# python - python分段错误

> ID：10797026
> 
> 赞同：0
> 
> 时间：2012-05-29T10:07:53.867
> 
> 标签：python, pyqt, pyqt4

我想在 python 的弹出窗口中显示一条消息......所以我写了这段代码......请检查

```
import sys
from PyQt4.Qt import *

class MyPopup(QWidget):
    def __init__(self):
        print "6"
        QWidget.__init__(self)

class MainWindow(QMainWindow):
    def __init__(self, *args):
        print "4"
        QMainWindow.__init__(self, *args)
        self.cw = QWidget(self)
        self.setCentralWidget(self.cw)
        self.btn1 = QPushButton("Start Chat", self.cw)
        self.btn1.setGeometry(QRect(50, 30, 100, 30))
        self.connect(self.btn1, SIGNAL("clicked()"), self.doit)
        self.w = None

    def doit(self):
        print "5"
        print "Opening a new popup window..."
        self.w = MyPopup()
        self.w.setGeometry(QRect(0, 0, 400, 200))
        self.w.show()

class App(QApplication):
    def __init__(self, *args):
        print "3"
        QApplication.__init__(self, *args)
        self.main = MainWindow()
        #self.connect(self, SIGNAL("lastWindowClosed()"), self.byebye )
        self.main.show()

    #def byebye( self ):
        #self.exit(0)

for i in range(1, 5):
    if __name__ == "__main__":
        print "1"
        global app
        app = App(sys.argv)
        app.exec_()
    #main(sys.argv)
else:
    print "over" 
```

这里首先循环它的工作，但从第二个循环我得到分段错误......伙计们请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:28:57.223

应用程序中应该只有一个 QApplication 对象。我猜你的问题是你试图在一个循环中创建几个。

如果您希望您的用户在主窗口实际关闭之前关闭它四次，您可以添加一个事件处理程序：

```
class MainWindow(QMainWindow):
    def __init__(self, *args):
        ...
        self.counter = 1

    def closeEvent(self, event):
        print "closeEvent", self.counter
        self.counter += 1
        if self.counter < 5:
            event.ignore()
        else:
            event.accept() 
```

# c# - 在生成 C# 代码时在 xsd2code 的 xsd 定义中使用非默认类型

> ID：10797027
> 
> 赞同：0
> 
> 时间：2012-05-29T10:07:56.347
> 
> 标签：c#, xsd, xsd2code

在我们的项目中，我们使用 Xsd2Code 来生成 c# 代码。

我尝试调整的 XSD 如下所示：

```
<?xml version="1.0"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="File">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Version" type="xs:string" />
        <xs:element name="Language" type="xs:string" />
        <xs:element name="Component" type="xs:anyType" minOccurs="1" maxOccurs="unbounded" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

在我们的项目中，我们现在定义了一个抽象类 Version。是否可以使用我们自己的类版本而不是字符串作为 Xsd 中元素版本的类型？

我们希望使用 Xsd2Code 生成尽可能多的类。这就是为什么我想避免也必须手动创建 File 类。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:35:15.647

您可以在 xsd 方案中创建一个新的抽象类 Version，然后将您定义的 Version 类设为部分并将其放在与生成的类相同的命名空间中。默认情况下，您生成的所有类都必须是部分的。

# iphone - 如何从这个字符串日期获取 NSDate

> ID：10797029
> 
> 赞同：1
> 
> 时间：2012-05-29T10:08:26.233
> 
> 标签：iphone, timezone, nsdate, nsdateformatter

我尝试了多种日期格式，但我仍然得到 nil ：

> 2012 年 5 月 24 日星期四 15:51:48 EEST

```
[formatter setDateFormat:@"E MMM d H:mm:ss z yyyy"]; 
```

太疯狂了，在我的 iPhone 3G 上它可以工作，而在 4S 上它返回 null。它们都设置为相同的时区。

也许格式错误，我不明白我做错了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:15:34.430

首先确保您设置了本地`NSDateFormatter`，否则解析将无法在操作系统语言未设置为英语的系统上工作。

它可能无法解析的原因是因为时间是 24 (HH)：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
//Thu May 24 15:51:48 EEST 2012
[dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"EN"] autorelease]];
[dateFormatter setDateFormat:@"E MMM d HH:mm:ss V yyyy"]; 
```

# entity-framework - 实体框架代码优先 - 奇怪的实体加载行为

> ID：10797033
> 
> 赞同：0
> 
> 时间：2012-05-29T10:08:40.930
> 
> 标签：entity-framework, ef-code-first

我正在开发的网站采用标准社交网络范式：Friends 和 FriendRequests。

我的用户和好友请求类如下：

```
public class User
{
    public int Id { get; set; }

    public ICollection<FriendRequest> FriendRequests { get; set; }
}

public class FriendRequest
{
    public int UserId { get; set; }
    public int FriendId { get; set; }

    public DateTime RequestDate { get; set; }

    public User User { get; set; }
    public User Friend { get; set; }
} 
```

我的流利映射是：

```
modelBuilder.Entity<User>()
    .HasMany(u => u.FriendRequests)
    .WithRequired(f => f.User)
    .HasForeignKey(f => f.UserId);

modelBuilder.Entity<FriendRequest>()
    .HasKey(f => new { f.UserId, f.FriendId });

modelBuilder.Entity<FriendRequest>()
    .HasRequired(f => f.Friend)
    .WithMany()
    .HasForeignKey(f => f.FriendId); 
```

我正在与我的 2 个测试用户一起工作 - 用户 22 和用户 18

用户 22 在数据库中有来自用户 18 的好友请求

```
UserId  FriendId    DateRequested         RequestStatus  DateResponded
22      18          2012-05-28 16:48:00   -1             NULL 
```

现在奇怪的一点：

参加这个测试：

```
 public void FriendRequestTests()
    {
        var user22 = userRepository.FindById(22);
        Console.WriteLine(user22.FriendRequests.Count); // Count: 1

        var request = user22.FriendRequests[0];
        var friend = request.Friend; // Null
    } 
```

问题是 request.Friend 为空（尽管所有其他值都已填充）

现在再次运行相同的测试，但首先获取 user18（但什么也不做）

```
 public void FriendRequestTests()
    {
                    var user18 = userRepository.FindById(18); // do nothing with this
        var user22 = userRepository.FindById(22);
        Console.WriteLine(user22.FriendRequests.Count); // Count: 1

        var request = user22.FriendRequests[0];
        var friend = request.Friend; // correct user (user18)
    } 
```

我看到这种行为与朋友请求一致。如果之前在会话中访问过作为朋友的用户，则 request.Friend 不为空。如果在会话中从未访问过好友，则 request.Friend 始终为空。

是什么导致了这种奇怪，我该如何解决？
此外，有没有办法在映射中定义外键关系应该始终由左外连接获取？我知道 NHibernate 可以让你这样做，但 EF 对我来说是新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:28:55.157

尝试将您的导航属性设置为`virtual`

就像是

```
public class User
{
    public int Id { get; set; }

    public virtual ICollection<FriendRequest> FriendRequests { get; set; }
}

public class FriendRequest
{
    public int UserId { get; set; }
    public int FriendId { get; set; }

    public DateTime RequestDate { get; set; }

    public virtual User User { get; set; }
    public virtual User Friend { get; set; }
} 
```

如果您延迟加载 ObjectContext，这可能会导致您的问题。

# java - 向 Arraylist 添加值

> ID：10797034
> 
> 赞同：13
> 
> 时间：2012-05-29T10:08:44.937
> 
> 标签：java

代码 1：

```
ArrayList arr = new ArrayList();
arr.add(3);
arr.add("ss"); 
```

代码 2：

```
ArrayList<Object> arr = new ArrayList<Object>();
arr.add(3);
arr.add("ss"); 
```

代码 3：

```
ArrayList<Object> arr = new ArrayList<Object>();
arr.add(new Integer(3));
arr.add(new String("ss")); 
```

以上三个代码都工作正常..有人可以告诉我哪个是首选的以及为什么..以及为什么当 Arraylist 没有提到参数类型时 eclipse 编译器总是给出警告..提前谢谢..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T10:13:30.867

第一个简单的规则：永远不要使用`String(String)`构造函数，它绝对没用^((*))。

所以`arr.add("ss")`就好了。

与`3`它略有不同：`3`是`int`文字，而不是对象。只能将对象放入`List`. 所以`int`需要将遗嘱转换为`Integer`对象。在大多数情况下，这将为您自动完成（该过程称为自动装箱）。在某些情况下，它可以（*并且将）**有效地*避免创建新实例。`Integer.valueOf(3)`*`Integer`*

 *所以实际上写`arr.add(3)`通常*比*使用更好`arr.add(new Integer(3))`，因为它*可以避免*创建一个新`Integer`对象，而是重用现有的对象。

*免责声明*：我在这里关注第二个和第三个代码块之间的区别，几乎忽略了泛型部分。有关泛型的更多信息，请查看其他答案。

^((*) 在一些晦涩的极端情况下它*很有*用，但是一旦你接近那些你就会知道永远不要把绝对陈述当作绝对的;-))

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T10:11:22.987

第二个是首选：

*   它避免了不必要/低效的构造函数调用
*   它使您可以指定列表的元素类型（如果缺少，则会收到警告）

但是，在同一个列表中包含两种不同类型的对象会有一点不好的设计气味。我们需要更多的背景来谈论这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T10:11:31.797

第二种形式是首选：

```
ArrayList<Object> arr = new ArrayList<Object>();
arr.add(3);
arr.add("ss"); 
```

使用泛型类型（例如`ArrayList<T>`）时始终指定泛型参数。这排除了第一种形式。

至于最后一种形式，它更冗长，并且无益地做额外的工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T10:11:19.700

好吧，通过执行上述操作，您将自己打开运行时错误，除非您乐于接受您的数组列表可以包含字符串和整数以及大象。

Eclipse 返回一个错误，因为它不希望您不知道这样一个事实，即不为泛型参数指定任何类型会使您自己面临运行时错误。至少对于其他两个示例，您知道您可以在 Arraylist 中包含对象，并且由于 Inetegers 和 Strings 都是对象，Eclipse 不会警告您。

代码 2 或 3 都可以。但是如果你知道你的数组列表中只有整数或只有字符串，那么我会做

```
ArrayList<Integer> arr = new ArrayList<Integer>(); 
```

或者

```
ArrayList<String> arr = new ArrayList<String>(); 
```

分别。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T10:13:59.883

实际上，第三个是首选：

```
ArrayList<Object> array = new ArrayList<Object>();
array.add(Integer.valueOf(3));
array.add("ss"); 
```

这避免了自动装箱（`Integer.valueOf(3)`vs `3`）并且不会创建不必要的 String 对象。

当您不使用具有泛型类型（如 ArrayList）的类型参数时，Eclipse 会抱怨，因为您使用的是一种称为原始类型的东西，这是不鼓励的。如果一个类是泛型的（也就是说，它具有类型参数），那么您应该始终使用该类的类型参数。

另一方面，自动装箱是个人喜好。有些人可以接受，有些人则不行。我不喜欢它，我打开了自动装箱/自动拆箱的警告。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-29T10:16:31.750

您收到警告是因为`ArrayList`它是 java 泛型的一部分。本质上，这是一种在编译时捕获类型错误的方法。例如，如果您使用类型 Integer ( `ArrrayList<Integer>`) 声明数组列表，然后尝试向其中添加字符串，您将在编译时收到错误 - 避免在运行时出现严重的崩溃。

第一种语法是为了向后兼容，应尽可能避免使用（请注意，旧版本的 java 中没有泛型）。

第二个和第三个例子几乎是等价的。由于您需要将对象而不是原始类型传递给`add`方法，因此您`3`在内部转换为`Integer(3)`. 通过用双引号写一个字符串，您实际上是在创建一个`String`对象。调用时`String("ss")`，您正在创建一个`String`值与参数（“ss”）相同的新对象。

除非您确实需要在列表中存储不同的类型，否则我建议您实际使用正确的类型声明，例如`ArrayList<Integer> = new ArrayList<Integer>()`- 从长远来看，它会为您省去很多麻烦。

如果您确实需要列表中的多种数据类型，那么第二个示例会更好。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-29T10:16:46.757

最后两个变体是相同的，`int`会自动包装到`Integer`您需要`Object`. 如果您没有在 <> 中编写任何类，则`Object`默认情况下。所以没有区别，但是如果你写的话会更好理解`Object`。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-10T09:08:57.670

在 Java 9 中有一种更快、更简单的方法，不需要太多代码：使用`Collection Factory`方法：

```
List<String> list = List.of("first", "second", "third"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-29T10:13:53.500

首先，您没有定义将在您的 arraylist 构造中保存和链接的类型

这是这样做的首选方法，您定义列表的类型，ide 将处理其余的

在第三个中，您最好只为更短的代码定义 List*

# objective-c - 使用 iOS 静态库而不添加 .a 文件

> ID：10797036
> 
> 赞同：2
> 
> 时间：2012-05-29T10:08:54.543
> 
> 标签：objective-c, ios, static-libraries

我们可以使用[iOS 静态库，而无需在项目中添加头文件](http://muthukumarela.wordpress.com/2012/05/24/ios-static-libraries-without-adding-header-files/)。但我想使用静态库而不将 .a 文件添加到项目中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:08:28.207

最后，我发现解决方案
应该在 ->target->build settings-> Other Linker Flags 中添加静态库的路径，例如。）

/Source/iPhoneApp/libs/Connection/build/Debug-iphonesimulator/libConnection.a /Source/iPhoneApp/libs/SocialNetwork/build/Debug-iphonesimulator/libSocialNetwork.a

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:42:37.137

如果您构建了库，则可以使用依赖项将库项目添加到您的应用程序项目中，而无需进行配置。

为此，只需将 .xcodeproj 文件从库中拖到应用程序项目中，转到应用程序目标属性，然后添加对该库的依赖项，就像添加公共框架（如 MapKit）一样。

# ios - 更流畅的手绘体验（iOS）

> ID：10797037
> 
> 赞同：2
> 
> 时间：2012-05-29T10:08:55.517
> 
> 标签：ios, drawing, touch

我正在做一项与数学相关的活动，用户可以在其中尝试解决数学问题时用手指绘制草图。但是，我注意到当我快速移动手指时，线条明显滞后于我的手指。我想知道是否有一些地方我忽略了性能，或者`touchesMoved`只是不够好（如果你不快速移动，它会非常平滑和美妙）。我正在使用`UIBezierPath`. 首先，我在我的 init 方法中创建它，如下所示：

```
myPath=[[UIBezierPath alloc]init];
myPath.lineCapStyle=kCGLineCapSquare;
myPath.lineJoinStyle = kCGLineJoinBevel;
myPath.lineWidth=5;
myPath.flatness = 0.4; 
```

然后在drawRect中：

```
- (void)drawRect:(CGRect)rect
{
    [brushPattern setStroke];
    if(baseImageView.image)
    {
        CGContextRef c = UIGraphicsGetCurrentContext();
        [baseImageView.layer renderInContext:c];
    }

    CGBlendMode blendMode = self.erase ? kCGBlendModeClear : kCGBlendModeNormal;
    [myPath strokeWithBlendMode:blendMode alpha:1.0];
} 
```

baseImageView 是我用来保存结果的，这样我就不必绘制很多路径（一段时间后变得非常慢）。这是我的触摸逻辑：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath moveToPoint:[mytouch locationInView:self]];

}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{    
    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath addLineToPoint:[mytouch locationInView:self]];
    [self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{    
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0f);
    CGContextRef c = UIGraphicsGetCurrentContext();
    [self.layer renderInContext:c];

    baseImageView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [myPath removeAllPoints];
    [self setNeedsDisplay];
} 
```

该项目将作为企业应用程序发布，因此只能安装在 iPad 2 上。目标 iOS 是 5.0。任何关于我如何能加快速度的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:07:33.103

当然，您应该首先在 Instruments 下运行它并寻找您的热点。然后您需要进行更改并重新评估以查看其影响。否则你只是在猜测。也就是说，一些经验说明：

*   向路径添加大量元素会变得非常昂贵。`addLineToPoint:`如果你原来是一个热点，我不会感到惊讶。它一直是给我的。
*   与其用 UIImageView 来支持你的系统，我可能会渲染成 CGLayer。CGLayer 针对渲染到特定上下文进行了优化。
*   为什么要累积路径而不是在每一步都将其渲染到图层中？这样，您的路径将永远不会超过两个元素（move、addLine）。通常使用两阶段方法，因此您可以处理撤消等。
*   确保您关闭了您不需要的任何 UIBezierPath 功能。特别是，请查看文档中的“访问绘图属性”部分。您可以考虑切换到 CGMutablePath 而不是 UIBezierPath。当配置相同时，它实际上并没有更快，但它的默认设置会关闭更多的东西，所以默认情况下它会更快。（您已经设置了其中的大部分；您需要在 Instruments 中进行一些实验，看看它们会产生什么影响。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:00:56.603

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_freehand-drawing/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_freehand-drawing/)

这个链接准确地展示了如何使曲线更平滑。本教程一步一步地展示它。并简单地告诉我们如何向曲线添加一些中间点（在 touchesMoved 方法中）以使它们更平滑。

# java - 如何将 JDBC 语句与 EntityManager 结合起来？

> ID：10797040
> 
> 赞同：2
> 
> 时间：2012-05-29T10:09:02.317
> 
> 标签：java, mysql, jdbc, entitymanager

我用 NetBeans 创建了我的数据库的实体类。我相信我知道如何使用 EntityManager

```
(Class) db.createNamedQuery(String name); 
```

但我不知道将语句放在哪里（数据库链接、登录名、密码），所以我学会了如何查询

```
(JDBC4ResultSet) statement.executeQuery(String query); 
```

但它返回我不知道如何转换为实体类的集合......类似

```
(Class) statement.execureQuery(String query).toEntity(Class); 
```

会好的。;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:19:24.187

好的，首先您需要`EntityManager`从实体管理器工厂获取一个带有您的`persistance unit`名称（将在persistance.xml 中配置）。然后你创建一个`EntityManager`.

```
 EntityManagerFactory emf=Persistence.createEntityManagerFactory("persistance_unit_name");
    EntityManager em=emf.createEntityManager();
    Query query = em.createNamedQuery("namedQueryName"); //this returns a query
    List<ENTITIY> result = query.getResultList(); 
```

这只是一个提示，您可以谷歌“jpa 示例”以找到更多工作示例。

# c# - 如何处理 WebFaultException 以返回 CustomException？

> ID：10797041
> 
> 赞同：8
> 
> 时间：2012-05-29T10:09:02.363
> 
> 标签：c#, asp.net-mvc, rest

我做了我的自定义异常，每次发生错误时都会在 try-catch 中抛出：

```
[Serializable]
public class CustomException : Exception
{
    public CustomException() { }

    public CustomException(string message)
        : base(message) { }

    public CustomException(string message, Exception innerException)
        : base(message, innerException) { }
} 
```

我有两个服务，REST 和 SOAP。对于 SOAP 服务，我在抛出自定义异常时没有任何问题。但是在 REST 中，我遇到了很多困难。

下面是抛出 WebFaultException 的方法：

```
 public static WebFaultException RestGetFault(ServiceFaultTypes fault)
    {
        ServiceFault serviceFault = new ServiceFault();
        serviceFault.Code = (int)fault;
        serviceFault.Description = ConfigAndResourceComponent.GetResourceString(fault.ToString());
        FaultCode faultCode = new FaultCode(fault.ToString());
        FaultReasonText faultReasonText = new FaultReasonText(serviceFault.Description);
        FaultReason faultReason = new FaultReason(faultReasonText);
        WebFaultException<ServiceFault> webfaultException = new WebFaultException<ServiceFault>(serviceFault, HttpStatusCode.InternalServerError);

        throw webfaultException;
    } 
```

ServiceFault 是一个类，它具有一些我用来放置我需要的所有信息的属性。

我使用此方法在 REST 服务中引发异常：

```
 public static CustomException GetFault(ServiceFaultTypes fault)
    {
        string message = fault.ToString();
        CustomException cusExcp = new CustomException(message, new Exception(message));
        throw cusExcp;
    } 
```

一个示例 REST 服务（登录方法）：

```
 [WebInvoke(UriTemplate = "Login", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    public Session Login(ClientCredentials client, LogCredentials loginfo)
    {
        try
        {
            // Login process
            return copied;
        }
        catch (LogicClass.CustomException ex)
        {
            LogicClass.RestGetFault(LogicClass.EnumComponent.GetServiceFaultTypes(ex.Message));
            throw ex;
        }
    } 
```

MVC部分：

控制器：

```
 [HttpPost]
    public ActionResult Login(LoginCredentials loginfo)
    {
        try
        {
            string param = "{\"client\":" + JSonHelper.Serialize<ClientAuthentication>(new ClientAuthentication() { SessionID = Singleton.ClientSessionID })
                           + ", \"loginfo\":" + JSonHelper.Serialize<LoginCredentials>(loginfo) + "}";

            string jsonresult = ServiceCaller.Invoke(Utility.ConstructRestURL("Authenticate/Login"), param, "POST", "application/json");
            UserSessionDTO response = JSonHelper.Deserialize<UserSessionDTO>(jsonresult);

        }
        catch (Exception ex)
        {
            return Json(new
            {
                status = ex.Message,
                url = string.Empty
            });
        }

        return Json(new
        {
            status = "AUTHENTICATED",
            url = string.IsNullOrWhiteSpace(loginfo.r) ? Url.Action("Index", "Home") : loginfo.r
        });
    } 
```

我使用 ServiceCaller.Invoke 调用 REST API 并检索响应：ServiceCaller.cs

```
public class ServiceCaller
{
    public static string Invoke(string url, string parameters, string method, string contentType)
    {
        string results = string.Empty;
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(url));
        request.Method = method;
        request.ContentType = contentType;

        if (!string.IsNullOrEmpty(parameters))
        {
            byte[] byteArray = Encoding.UTF8.GetBytes(parameters);
            request.ContentLength = byteArray.Length;
            Stream dataStream = request.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();
        }

        try
        {
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (HttpStatusCode.OK == response.StatusCode)
            {
                Stream responseStream = response.GetResponseStream();
                int length = (int)response.ContentLength;

                const int bufSizeMax = 65536;
                const int bufSizeMin = 8192;
                int bufSize = bufSizeMin;

                if (length > bufSize) bufSize = length > bufSizeMax ? bufSizeMax : length;

                byte[] buf = new byte[bufSize];
                StringBuilder sb = new StringBuilder(bufSize);

                while ((length = responseStream.Read(buf, 0, buf.Length)) != 0)
                    sb.Append(Encoding.UTF8.GetString(buf, 0, length));

                results = sb.ToString();
            }
            else
            {
                results = "Failed Response : " + response.StatusCode;
            }
        }
        catch (Exception exception)
        {
            throw exception;
        }

        return results;
    }
} 
```

我期待 REST 服务在客户端返回这个：

![在此处输入图像描述](../Images/97f3b5f6186630883f039e5c3847009f.png)

但最后，它总是返回：

![在此处输入图像描述](../Images/46b98ee67cc99503bb5cd420fa91f072.png)

我应该怎么办？请帮忙。

**编辑**

这是调用soap服务时的示例响应：

```
[FaultException: InvalidLogin]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +9441823 
```

您看到“无效登录”了吗？这就是我想从 REST 服务的响应中看到的。
来自 REST 的示例响应：

```
[WebException: The remote server returned an error: (500) Internal Server Error.]
   System.Net.HttpWebRequest.GetResponse() +6115971 
```

我扔了一个`WebFaultException`，但我收到了一个`WebException`。
如果我无法在 REST 上获取确切的错误消息，我会选择 SOAP。
感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:17:26.730

使用`HttpWebRequest`（或 Javascript 客户端）时，您的自定义异常对它们没有任何意义。只是 Http 错误代码（如*500 Internal server error*）和响应内容中的数据。

所以你必须自己处理异常。例如，如果您捕获`WebException`了内容（错误消息），则可以根据您的服务器配置以 Xml 或 Json 格式读取内容（错误消息）。

```
catch (WebException ex)
{
    var error = new StreamReader(ex.Response.GetResponseStream()).ReadToEnd();
    //Parse your error string & do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:28:51.560

几分钟前我刚刚遇到了类似的问题。也许它有帮助。我试图为我的所有服务调用使用扩展程序，如下所示：

这是**一段不好**的代码：

```
public static void ExecuteServiceMethod(this IMyRESTService svc, Action svcMethod)
{ 
    try
    {
       // try to get first last error here
       string lastError = svc.CommHandler.CH_TryGetLastError();
       if (!String.IsNullOrEmpty(lastError))
          throw new WebFaultException<string>(lastError, System.Net.HttpStatusCode.InternalServerError);

       // execute service method
       svcMethod();
    }
    catch (CommHandlerException ex)
    {
       // we use for now only 'InternalServerError'
       if (ex.InnerException != null)
           throw new WebFaultException<string>(ex.InnerException.Message, System.Net.HttpStatusCode.InternalServerError);
       else
           throw new WebFaultException<string>(ex.Message, System.Net.HttpStatusCode.InternalServerError);
     }
     catch (Exception ex)
     {
        throw new WebFaultException<string>(ex.Message, System.Net.HttpStatusCode.InternalServerError);
     }
} 
```

这是**固定**的代码：

```
public static void ExecuteServiceMethod(this IMyRESTService svc, Action svcMethod)
{
    // try to get first last error here
    string lastError = svc.CommHandler.CH_TryGetLastError();
    if (!String.IsNullOrEmpty(lastError))
       throw new WebFaultException<string>(lastError, System.Net.HttpStatusCode.InternalServerError);

    try
    {
       // execute service method
       svcMethod();
    }
    catch (CommHandlerException ex)
    {
       // we use for now only 'InternalServerError'
       if (ex.InnerException != null)
           throw new WebFaultException<string>(ex.InnerException.Message, System.Net.HttpStatusCode.InternalServerError);
       else
           throw new WebFaultException<string>(ex.Message, System.Net.HttpStatusCode.InternalServerError);
     }
     catch (Exception ex)
     {
        throw new WebFaultException<string>(ex.Message, System.Net.HttpStatusCode.InternalServerError);
     }
} 
```

所以...可能您注意到第一个`throw`, 被处理到`catch (Exception ex)`再次抛出的块中，使其始终显示：**'Internal Server Error** ' 。也许它有帮助，因为我看到你也有一个全球性的

> 捕获（异常异常）{ 抛出异常；}

这可能是它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-30T10:06:59.137

1）将故障合同添加到方法/操作

2) 抛出 WebFaultException 或 WebFaultException

3) 在客户端捕获到 webexception 然后读取异常响应

```
catch (WebException exception)
{
var resp = new StreamReader(exception.Response.GetResponseStream()).ReadToEnd();
} 
```

与问题陈述中提到的相同的问题，并且能够通过 LB 提到的答案解决，并遵循其他一些帖子。所以总结了以下步骤

# javascript - 如果单击第二个元素，jQuery each() 不会继续执行第一个元素的代码？

> ID：10797056
> 
> 赞同：1
> 
> 时间：2012-05-29T10:09:46.367
> 
> 标签：javascript, jquery

抱歉，如果标题不够清楚，`<a>`当用户单击每个元素时，我的元素具有相同的类，jquery 代码应该单独为每个元素运行，问题是单击第一个元素时，如果我在它完成运行整个代码之前单击第二个元素，它使第一个元素不完整并在第二个元素上运行代码，它应该同时工作（顺便说一句，它应该将数据发送到 php 文件，即使我单击类的许多元素也可以正常工作不是在职的）

这是代码：

```
 jQuery(function($) {
        $('.anchor-tag-class').each(function() {
            $(this).click(function() {
                $this = $(this);
                var id = $this.attr('data-id');
                if ( $this.hasClass('on') ) {
                    $this.removeClass('on');
                    $this.addClass('loading');
                    $.post("process.php", { element_id: id, status: 'off' }, function(data) { $this.addClass('off').removeClass('loading'); } );
                } else {
                    $this.removeClass('off');
                    $this.addClass('loading');
                    $.post("process.php", { element_id: id, status: 'on' }, function(data) { $this.addClass('on').removeClass('loading'); } );
                }
            });
        });
    }); 
```

那我做错了什么？

并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:12:20.790

在这种情况下您不需要`each()`，因为代码只会针对引发事件的特定元素运行。您还可以链接您的函数挂在`$this`变量上。

试试这个：

```
$('.anchor-tag-class').click(function() {
    var $this = $(this);
    var id = $this.attr('data-id');
    if ( $this.hasClass('on') ) {
        $this.removeClass('on').addClass('loading');
        $.post("process.php", { element_id: id, status: 'off' }, function(data) { $this.addClass('off').removeClass('loading'); } );
    } 
    else {
        $this.removeClass('off').addClass('loading');
        $.post("process.php", { element_id: id, status: 'on' }, function(data) { $this.addClass('on').removeClass('loading'); } );
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:13:46.800

你有一个 $this 变量，设置为 $(this)... $this 定义在哪里？如果它超出了函数的范围，那就是你的问题！

# php - 如何使用另一个表中的数据更新表

> ID：10797057
> 
> 赞同：0
> 
> 时间：2012-05-29T10:09:50.477
> 
> 标签：php, oracle-xe

我使用 php 作为我的语言，使用 oracle xe 作为我的数据库。

我有存储 item_id、数量的表 Order_details。该表当前仅保存 item_id 的数据，而数量具有空值。假设项目 id 为 038

我创建了另一个表 order_details2 作为临时表，它具有相同的行，即 item_id，数量。此表包含 item_id 和数量 038 和 3 的数据

问题是，我不知道如何使用 order_details2.quantity 中的数据，即 3 使用相同的引用 item_id 将其插入 order_details.quantity

任何人都可以告诉我，我是怎么做到的？我对编程很陌生..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:24:15.913

如果我正确理解你所追求的，那么这样的事情应该可以工作：

```
UPDATE
    (SELECT o1.item_id as id1, o1.quantity as qty1, o2.item_id as id2, o2.quantity as qty2
       FROM order_details o1
       JOIN order_details2 o2 on o1.item_id = o2.item_id) t
SET t.qty1 = t.qty2 
```

但是，您必须小心`item_id`任何表中的重复值。

# android - 从 SDCard 在 Listview 的图库视图中异步加载图像

> ID：10797063
> 
> 赞同：1
> 
> 时间：2012-05-29T10:10:16.830
> 
> 标签：android, android-listview, android-gallery, android-lazyloading

我正在尝试在 ListView 中的 galleryViews 中显示图像。我正在将图像从服务器下载到 SDCard 然后显示它，首先我检查缓存中的图像，如果图像不存在，然后我从 sdcard 加载它。

当用户第一次启动应用程序时，我正在从服务器下载图像并将它们保存到 SD 卡，同时我只显示带有文本的活动

我想如果图像不在 sdcard 中，下载图像后它应该在图像下载后立即显示图像，这就是我正在做的事情。

```
public class AsyncImageLoader {
   private boolean isImageView;
   private final LinkedHashMap<String, Bitmap> cache = 
      new LinkedHashMap<String, Bitmap>(60, (float) 1.0, true);

Handler handler = new Handler() {

@Override
public void handleMessage(Message msg) {
  super.handleMessage(msg);

  LoadImageFromSdCard loadImage = (LoadImageFromSdCard) msg.obj;
  if (isImageView) {
    loadImage.imageView.setImage(loadImage.bmp);
  } else {
     Thread thread = new Thread(new LoadImageFromSdCard(loadImage.uri,  loadImage.imageView));
     try {
         Log.i("AsyncImageLoader", "SECOND THREAD STARTED");
        Thread.sleep(10000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
     thread.start();
   }
  }
};

public Bitmap loadImage(String uri,
  ImageTextComboControl imageView) {
if (cache.containsKey(uri)) {
  return cache.get(uri);
} else {
  handler.post(new LoadImageFromSdCard(uri, imageView));
}

return null;
}

private class LoadImageFromSdCard implements Runnable {

 String uri;    
 ImageTextComboControl imageView;
 ImageView image;
 Bitmap bmp = null;

 public LoadImageFromSdCard(String uri, ImageTextComboControl imageView) {
  this.uri = uri;
  this.imageView = imageView;
 }

public void run() {
  FileInputStream fis;
  try {
    fis = new FileInputStream(new File(uri));
  } catch (FileNotFoundException e) {
    e.printStackTrace();
    return;
  }
  bmp = BitmapFactory.decodeStream(fis);
  if (imageView != null) {
    isImageView = true;
    cache.put(uri, bmp);
    Message message = new Message();
    message.obj = this;
    handler.sendMessage(message);
  } 

  }
 }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:24:27.363

更好地使用 Async Task 类[http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)（使用 AsyncTask 部分），**重要的是**，注意大位图

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T09:32:25.087

我使用适配器中的 onContentChanged() 方法解决了我的问题。我将图像保存到 sdCard 并获取 sdCard 路径将其保存到 sqlite 数据库中，因此当 sqlite 数据库中的数据发生更改时，会调用 onContentChanged 方法，因为我使用的是光标适配器。

# java - 匹配并记住 JMeter 中 HTTP 标头的值

> ID：10797064
> 
> 赞同：0
> 
> 时间：2012-05-29T10:10:23.850
> 
> 标签：java, http-headers, jmeter

有 HTTP Header Manager 组件，允许在使用 HTTP Sampler 时设置一些 HTTP 标头。

我需要拦截具有特定名称的响应标头，在某个变量中记住它并在所有请求中使用保存的值（覆盖现有值，例如我使用 HTTP 代理记录了 100500 个请求并且不想通过提供变量来更改所有请求表达）。

所以流程如下所示：

*   向服务器发送 N 个请求
*   在某些响应中有标题 X
*   发送 M 个请求
*   发送带有保存的标头 X 值的请求
*   在 header X 的某些响应值发生变化时，带有 header X 的后续请求将使用新保存的值

我应该为这种行为创建一些控制器还是有一些可以使用的东西？还没有发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:52:37.513

正则[表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)是您的朋友。您可以告诉它解析标题和正文。

# php - HTML5 标记多个文件：仅接受图像

> ID：10797066
> 
> 赞同：0
> 
> 时间：2012-05-29T10:10:30.693
> 
> 标签：php, html

正如我的问题所说，我使用`<input type="file" multiple="multiple" name="files[]" accept="image" />`但不工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:21:58.147

是的，我必须替换`images`为`images/*`

# visual-studio-2010 - 在 Visual Studio 中创建源文件的物理副本

> ID：10797069
> 
> 赞同：4
> 
> 时间：2012-05-29T10:10:32.003
> 
> 标签：visual-studio-2010, visual-studio

在 Visual Studio 中，如果我尝试将文件从一个项目复制到另一个项目（通过使用复制和粘贴或按住 Ctrl 键的同时将文件拖动到新项目），它会在原始位置创建对源文件的引用。有没有办法创建源文件的物理副本并将其放置在目标项目源方向，而无需使用 Windows 资源管理器手动复制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:27:59.363

它不漂亮，但是当我想做你建议的事情时，我双击 Visual Studio 中的文件，它会打开它。然后我做一个`File->Save As`，选择正确的目录并保存它。全部来自 Visual Studio。这通常随后将新文件添加到另一个项目。

只是这样做，并意识到我应该提到一个副作用。根据您的源代码控制（在我的情况下为 TFS 2010），在 Visual Studio 中执行此操作可能会修改项目中文件的位置。对我来说，这意味着确保文件及其项目都没有任何未决更改，执行另存为，然后撤消在 TFS 2010 中导致的更改（项目更改、文件添加和删除）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:48:16.463

来自[http://msdn.microsoft.com/en-us/library/0fb6xxhb.aspx](http://msdn.microsoft.com/en-us/library/0fb6xxhb.aspx)：

> 如果您正在使用解决方案项、Visual C++ 项目或其他类似项目，则始终使用解决方案资源管理器中的链接。如果您正在使用 Visual Basic 项目、Visual C# 项目和其他项目，您可能正在使用链接或文件。

从本质上讲，我的问题的答案是“不”。在大多数情况下，我必须使用 Windows Explorer。

# ios - 将 xcode4 中的导航和标签栏控制器与情节提要相结合

> ID：10797074
> 
> 赞同：1
> 
> 时间：2012-05-29T10:10:48.483
> 
> 标签：ios, xcode4, navigationcontroller, tabbarcontroller

在我的标签栏控制器中，有一个包含行数的表格。如果我们在表格单元格内部进行修改，它会导致另一个视图，其中包含表格单元格的详细信息。但是标签栏消失了。但我希望标签栏也出现在导航视图中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:32:28.600

我认为这对你很有用。我不确定，但你可以试试这个。点击[这里](http://www.crispinworks.com/ProgrammingFiles/CombiningTabBarNavControllers.pdf)去.. 祝你好运

# live - jQuery .live() - 其他 jQuery 方法的功能，例如 .text()

> ID：10797090
> 
> 赞同：1
> 
> 时间：2012-05-29T10:11:47.010
> 
> 标签：live, jquery

我的问题是，在包含由我的 jQuery 代码操作的元素的 div 被 ajax 重新加载后，我的 jQuery 内容无法正常工作。jQuery .live 函数帮助我发现至少我的所有事件都被触发了。但是 .text() 之类的功能仍然无法正常工作。例如

```
$('#idOfElementBeingInDivWhichIsReloadedByAjax').text('New text'); 
```

有没有人建议如何处理这个问题？

编辑：问题是我正在处理的网站在单击导航项时使用 ajax 加载其页面内容。第一次访问网站时，所有 jQuery 功能都可以使用。然而，在第二次重新加载 DOM 时，jQuery 仍然使用原始 DOM，因此 .text() 之类的方法不再显示更改。如上所述，.live() 方法帮助我至少在第二次调用特定页面后仍会触发事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:18:39.223

这样做的唯一方法是确保您的代码在 ajax 重新加载后执行。一种常见的方法是创建一个 init() 函数，该函数从 ajax 回调函数中调用。

```
$(function(){
  $('#myParentAjaxDiv').load('somepage.html', function(){
    initStuff();
  });
});

function initStuff(){
  $('#idOfElementBeingInDivWhichIsReloadedByAjax').text('New text');
} 
```

# android - 适用于 Android 的带有 Dropbox API 的 Flex 原生扩展

> ID：10797091
> 
> 赞同：0
> 
> 时间：2012-05-29T10:11:50.323
> 
> 标签：android, apache-flex, api, dropbox, air-native-extension

我正在尝试为 Flex 开发本机扩展，以便使用适用于 Android 的 Dropbox API。我已经为 FLEX 尝试过这个 dropbox-r33 模块，但它已被 Android 4 弃用，所以这对我来说不是一个解决方案。

我已经有一个带有振动和 Dropbox 连接的 ANE。振动效果很好（来自网络的示例），我尝试包含使用适用于 Android 的 Dropbox API 的功能（我已经在一个 Android 项目中对其进行了测试并且它可以工作）。

问题是我被迫从 Dropbox API 中所需的 .jar 中解压缩类，以便我的 ANE 识别它们，但我收到此错误：

**05-29 12:02:21.489: I/ConnectionError(5798): android.content.ActivityNotFoundException: 找不到明确的活动类 {air.TestVibrationExtension.debug/com.dropbox.client2.android.AuthActivity}; 您是否在 AndroidManifest.xml 中声明了此活动？**

其中 TestVibrationExtension 是我的 ANE 的项目名称。我的包名是 air.extensions，在那个文件夹中，我包含了解压后的 dropbox api 类（在 air.extension.com 和 air.extensions.org 下）。

使用过 Dropbox API 的人都知道，在 AndroidManifest 中必须包含以下活动声明：

```
 <activity
        android:name="com.dropbox.client2.android.AuthActivity"
        android:configChanges="orientation|keyboard"
        android:launchMode="singleTask" >
        <intent-filter>

            <!-- Change this to be db- followed by your app key -->
            <data android:scheme="db-myAppKey" />

            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

我认为该错误与该活动声明有关，但我不知道该怎么做才能让我的 ANE 识别它。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:44:07.067

Dropbox-r33.swc 模块可以工作，但需要将 AIR 库上传到最新版本。这样做可以完美地在每个 Android 平台上运行。

# django - 图片上传和基于 CreateView 的视图

> ID：10797093
> 
> 赞同：6
> 
> 时间：2012-05-29T10:12:01.050
> 
> 标签：django, image-upload, django-class-based-views

我希望能够使用 CreateView 和 ModelForm 上传图像文件，但我无法让它工作 - 在选择文件后，表单似乎没有绑定任何文件数据。这是视图的当前内容：

```
class AddContentForm(forms.ModelForm):
    class Meta:
        model = Media

class AddContentView(CreateView):
    template_name = 'simple_admin/add_content.html'
    form_class = AddContentForm

    def get_success_url(self):
        return u'/opettajat/subcategory/{0}/{1}/'.format(self.kwargs['subcat_name'].decode('utf-8'), self.kwargs['subcat_id'].decode('utf-8'))

    def form_valid(self, form):
        isvalid = super(AddContentView, self).form_valid(form)
        s = Subcategory.objects.get(pk=self.kwargs['subcat_id'].encode('utf-8'))
        if self.request.POST.get('image'):
            image = form.cleaned_data['image']
            title = form.cleaned_data['art_title'].encode('utf-8')
            year_of_creation = form.cleaned_data['year_of_creation']
            m = Media.objects.get_or_create(image=image, art_title=title, year_of_creation=year_of_creation)[0]
            s.media.add(m)
            s.save()
       return isvalid

    def get_context_data(self, **kwargs):
        context = super(AddContentView, self).get_context_data(**kwargs)
        context['subcategory_name'] = self.kwargs['subcat_name'].encode('utf-8')
        context['subcategory_id'] = self.kwargs['subcat_id'].encode('utf-8')
        return context

     @method_decorator(login_required)
     def dispatch(self, request, *args, **kwargs):
        return super(AddContentView, self).dispatch(request, *args, **kwargs) 
```

任何人都可以帮忙吗？一个基于类的图像上传视图的简单示例将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T10:50:43.463

上传的文件存储在 中`request.FILES`，而不是`request.POST`. 并且不要忘记添加`enctype="multipart/form-data"`到您的`<form>`标签中。

而且我认为`form_valid`方法是用于验证，而不是用于保存数据，不是吗？

# python - python - unitest setUp tearDown 在不同的上下文中

> ID：10797099
> 
> 赞同：0
> 
> 时间：2012-05-29T10:12:25.653
> 
> 标签：python, unit-testing

Deo python 支持 setUp() 和 tearDown() 的行为取决于上下文？无论如何，我在问我是否可以做这样的事情：

```
setUp() {
    if(context1){
         do A;
    }
    else{
         do B;
    }
}

tearDown() {
    if(context1){
         do A;
    }
    else{
         do B;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:19:12.390

您应该考虑为您需要的每个测试上下文进行 2 个不同的测试类（可能有一些共同的祖先），这样会更容易。

像这样的东西：

```
class BaseTest():
    def test_01a(self):
        pass

class Context1TestCase(BaseTest, unittest.TestCase):
    def setUp(self):
        # do what you need for context1

    def tearDown(self):
        # do what you need for context1

class Context2TestCase(BaseTest, unittest.TestCase):
    def setUp(self):
        # do what you need for context2

    def tearDown(self):
        # do what you need for context2 
```

这样，`test_01a`将在 context1 中执行一次，在 context2 中执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:20:23.500

是的，就像您展示的那样：使用 if 块，并且仅在条件为真时才执行设置的特定部分。

我认为你得到的是有不同的版本`setUp`和`tearDown`不同的测试。我实际上建议您：

*   `setUp`使用正确的/`tearDown`方法将测试拆分为不同的 TestCase 子类
*   `setUp`或者根本不使用`tearDown`- 做这样的事情

    ```
    class MyTestCase:
        def _setup_for_foo_tests():
            # blah blah blah
        def _setup_for_bar_tests():
            # blah blah blah
        def test_foo_1():
            self._setup_for_foo_tests()
            # test code
        def test_foo_2():
            self._setup_for_foo_tests()
            # test code
        def test_bar_1():
            self._setup_for_bar_tests()
            # test code
        # etc etc etc 
    ```

# php - 如何使用 PHP 按标签拆分文本？

> ID：10797100
> 
> 赞同：4
> 
> 时间：2012-05-29T10:12:25.797
> 
> 标签：php, html, text, tags, split

`<li></li>`我喜欢在指定数量的字符之后按标签分割大量文本。

对于前。

```
"biger text1 123 text biger 678 biger text" 
```

成为

```
"<li>biger text1 123 text</li><li>biger 678 biger</li><li> text</li>". 
```

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:28:42.043

单线，因为每个人都喜欢单线:)

```
$s = "biger text1 123 text biger 678 biger text";
$max_line_length = 10;

echo join("\n", array_map(function($item) {
  return '<li>' . $item . '</li>';
}, explode("\0", wordwrap($s, $max_line_length, "\0")))); 
```

回报：

```
<li>biger</li>
<li>text1 123</li>
<li>text biger</li>
<li>678 biger</li>
<li>text</li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:16:13.900

尝试这个

```
<?php
$text = "biger text1 123 text biger 678 biger text";
$newtext = wordwrap($text, 10, "<li>");

echo $newtext;
?> 
```

# mysql - Mysql排序日期格式

> ID：10797102
> 
> 赞同：0
> 
> 时间：2012-05-29T10:12:37.167
> 
> 标签：mysql, sql, sorting, datetime

我有一个不可避免的情况，日期以英国日期格式存储，例如：

```
31/12/2001  00:00:00 
```

我需要它按降序排列，我试过了，但它出错了

```
select *, DATE_FORMAT(completiondate,'\%e/%c/%Y\') as cdate 
from projects 
where countries = 1 
order by cdate desc 
```

错误：

> 检查与您的 MySQL 服务器版本相对应的手册，以获取在 '' order by cdate desc' 附近使用的正确语法

我正在使用 MySQL 4.1.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:45:20.883

这是最终的解决方案

```
select *,completiondate from projects order by str_to_date(completiondate,'%d/%m/%Y %H:%i') desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:17:49.407

`%`您正在不必要地逃避角色。但实际的问题是您的查询中有一个未终止的字符串文字：

```
-- this does not terminate the string ----------v
select *, DATE_FORMAT(completiondate,'\%e/%c/%Y\') as cdate
from projects
where countries = 1
order by cdate desc 
```

改成：

```
SELECT *, DATE_FORMAT(completiondate,'%e/%c/%Y') AS cdate
FROM projects
WHERE countries = 1
ORDER BY cdate DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:22:03.720

吉姆，你的最终解决方案对我帮助很大。我的日期是 02/28/2013 格式。我使用了代码：

```
SELECT *,str_to_date(SaleDate,'%m/%d/%Y') AS cdate FROM mytable ORDER BY cdate DESC 
```

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:14:24.697

```
SELECT * FROM projects WHERE countries = 1 order by cdate desc 
```

我猜你的数据库中已经有 cdate 了？如果是这样，您不需要设置“date_format”，因为它已经存在。但我可能错了，因为我从未使用过 4.1.9

# javascript - 通过函数调用启用 droppable

> ID：10797107
> 
> 赞同：1
> 
> 时间：2012-05-29T10:13:15.573
> 
> 标签：javascript, jquery

在这个小提琴中 - [http://jsfiddle.net/zyUkd/26/](http://jsfiddle.net/zyUkd/26/)

当我单击按钮 "Add Droppable" 时，我正在尝试启用 div "Hello 01" 以接受 droppable。我在单击按钮时添加了可放置类“todrop”，但是当我在“Hello 01”上放置一个项目时，未注册可放置事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:19:15.733

您需要调用函数`.droppable()`中的元素`addDroppable()`：

```
var addDrop = $("#adddrophere").droppable({
    drop: function(event, ui) {
        alert('dropped here');
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/zyUkd/27/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:17:37.243

单击按钮时调用 droppable

```
$( ".selector" ).droppable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:32:57.403

您希望通过引用来更改课程。你必须引用元素。工作代码：

```
function addDroppable() {
       var addDrop = $("div#adddrophere");
    addDrop.addClass("todrop");
    addDrop.removeClass("myDivs");

    //alert(addDrop.text());

} 
```

# java - JavaEE 初学者的开源项目

> ID：10797112
> 
> 赞同：0
> 
> 时间：2012-05-29T10:13:31.327
> 
> 标签：java, open-source

我是一名初级 java ee 开发人员，我想为开源项目做出贡献。我查看了 OpenEJB 和 Hibernate 任务，发现它们对我来说太难了。例如，在 OpenEJB 中，许多任务与修改字节码有关，而在休眠中，许多问题与使用 dbms 特定功能或集成问题有关。我做错了什么？只有经验丰富的程序员才能为此类项目做出贡献，还是初学者有机会？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T10:19:49.500

从小处着手——不要试图与有多年经验的人竞争。有多种贡献方式，包括更新文档、测试安装和查看现有文档以确保其仍然是最新的和相关的。

当您按照自己的方式阅读文档时，您将了解有关该项目的更多信息，并最终会发现自己可以先进行小的更改，然后再进行更大的更改。只是不要放弃 - 你最终会到达那里。

# java - NullPointerException 读取文本时出错

> ID：10797113
> 
> 赞同：-1
> 
> 时间：2012-05-29T10:13:35.887
> 
> 标签：java, processing

我收到一个错误：

```
line = node_reader.readLine(); 
```

当文本文件为空时，我得到一个`NullPointerException`错误。如果文本上有数据，我不会收到错误消息。我究竟做错了什么？

```
void file_open () {

    String line = "test";
    BufferedReader node_reader;
    node_reader = createReader("nodedata.txt");

    while (line !=null ) {   

        try {

            line = node_reader.readLine();

            if ( line != null ) {
                String[] pieces = split(line, TAB);
                int a = int(pieces[0]);
                int b = int(pieces[1]);
                int c = int(pieces[2]);
                int d = int(pieces[3]);
                int e = int(pieces[4]);

                listofNodes.add(new Node(a, b, e));  //
            }

        } catch (IOException e) {
            e.printStackTrace();
            line = null;
        }
    }
} 
```

这是文本文件：

```
138 102 100 36  0
95  293 100 36  1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:33:54.637

问题在于

```
node_reader = createReader("nodedata.txt"); 
```

在此方法中，文件可能未正确打开。转到此方法并验证该方法是否正确创建了 BufferedReader。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:22:23.943

你如何创建 BufferReader？尝试：

```
BufferedReader node_reader
   = new BufferedReader(new FileReader("nodedata.txt")); 
```

# javascript - 需要获取文本字段的值，使用连接字符串作为 id

> ID：10797114
> 
> 赞同：1
> 
> 时间：2012-05-29T10:13:39.520
> 
> 标签：javascript, jquery, html, textfield

嗨，我不太擅长用正确的术语解释这一点，但我正在尝试检索文本框的值。文本框在一个表中，每一行都有一个，每个的 id 由一个唯一的 id 和一个名称组成...... html

```
<label id="labelref<?php echo $row_list['pp_order_details_id']; ?>" name="labelref<?php echo $row_list['pp_order_details_id']; ?>"></label>
<input type="text" id="save<?php echo $row_list['pp_order_details_id']; ?>" name="saveref<?php echo $row_list['pp_order_details_id']; ?>" style="margin-right:5px;" />
<a href="javascript:saveref('<?php echo $row_list['pp_order_details_id']; ?>');" id="aref<?php echo $row_list['pp_order_details_id']; ?>" style="margin-right:5px;">Save</a>
<label id="errorref<?php echo $row_list['pp_order_details_id']; ?>" style="color:red; margin-right:5px;"></label> 
```

javascript/jquery

```
function save(order_id) {
    var newSaveRef = "saveref"+order_id;    
    var saveref = $('#newSaveRef').val();
    alert(saveref); 
} 
```

我想要保存参考的值。如果这个值 ($row_list['pp_order_details_id'];) 是 SS16363，那么这个值 (newSaveRef) 应该是 saverefSS16363。

但是如何从具有该 ID 的文本框中获取值？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:16:42.833

`newSaveRef`是一个变量，因此将其与哈希连接`#`以使用该变量来查找具有该 id 的元素。

```
var saveref = $('#' + newSaveRef).val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:17:11.480

```
function save(order_id) {
    var newSaveRef = "#saveref"+order_id;    
    var saveref = $(newSaveRef).val();
    alert(saveref); 
} 
```

您使用的是字符串文字而不是变量本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:17:59.977

```
function save(order_id) {
    var newSaveRef = "saveref"+order_id;    
    var saveref = $('#'+newSaveRef).val();
    alert(saveref); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T10:18:12.687

```
$("#newSaveRef").val();
```

必须：

```
$('#' + newSaveRef).val();
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T10:23:41.950

试试这个

```
var saveref  =  $('#saveref' + order_id + '' ).val(); 
```

# java - Tomcat 中 JSR223 脚本的类路径问题

> ID：10797115
> 
> 赞同：5
> 
> 时间：2012-05-29T10:13:45.353
> 
> 标签：java, tomcat, jsr223

我试图了解在 Tomcat 中运行时遇到的 JSR223 脚本问题。我正在使用 Java 脚本引擎，但我相信这个问题更普遍（我也看到了与参考 JS 引擎类似的问题）。我传递给评估的脚本的第一行是：

```
import javax.servlet.http.*; 
```

这失败并显示以下消息：

```
package javax.servlet.http does not exist 
```

因此，深入研究 Java 脚本引擎的源代码，我知道为什么会发生这种情况 - 它将我的脚本文本传递给 JavaCompiler，指定它从中检索到的类路径`java.class.path`，但是因为 Tomcat 在类加载器和类路径方面做了自己的事情关心的是，唯一包含的是`$CATALINA_HOME/bin/bootstrap.jar`.

可以覆盖脚本引擎将使用的类路径，但这只会给我带来下一个问题 - 我如何在运行时发现 Tomcat 正在使用什么 claspath？

似乎我必须在这里遗漏一些明显的东西，因为据我所知，这将发生在任何试图在 Web 应用程序中执行任何类型的严肃脚本的人身上，但我已经搜索了几个小时来进行讨论在这方面，甚至找不到任何人问这个问题......

# javascript - Ext JS 网格面板间隔移除

> ID：10797121
> 
> 赞同：0
> 
> 时间：2012-05-29T10:13:56.010
> 
> 标签：javascript, extjs, extjs4

我对 Ext JS 4 很陌生，我创建了一个带有固定列的面板。似乎存在某种错误（如在某个论坛上阅读的那样），如果我修复了一个列，则会在其顶部自动插入一个*分隔符*（xtype：tbspacer），从而破坏表格的对齐方式（如果这只是一个不好的问题配置，请告诉我）。我想做的是移除那个垫片。

为了做到这一点，我必须选择它，但它没有“静态”id，这意味着如果我对视图进行任何修改，spacer 会获得另一个 id，所以我需要一个方法来选择它而不使用 id。我试过做这样的事情：

```
list.query('.tbspacer')[0].setHeight(0); 
```

`list`面板在哪里。但这似乎不起作用。该`list.query()`方法返回一个空数组。尝试选择*textfield*时遇到同样的问题。

我错过了什么，还是只是另一个错误？

这就是我创建锁定列的方式（没什么特别的）：

```
{
  header: headerName, 
  dataIndex: i, 
  locked: true
} 
```

**编辑**这里也是一个截图：

![在此处输入图像描述](../Images/47e1fc4cc415b2fd10889a9d80769d87.png)

**编辑**那个垫片本来就不应该存在，它是（也许仍然是？）在那个版本的框架中。[在这里](https://stackoverflow.com/questions/11223169/extjs-4-1-gridpanel-missplaced-column)查看我的另一个问题。我会将此处唯一的答案标记为已接受，因为它似乎可以解决此问题中提到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:29:07.463

首先，您正在执行错误的查询。它应该是 just `tbspacer`，没有点。其次，而不是`setHeight(0)`，为什么不只是`destroy`它？

```
list.query('tbspacer')[0].destroy(); 
```

# php - Kohana 2 形式警告

> ID：10797125
> 
> 赞同：0
> 
> 时间：2012-05-29T10:14:06.237
> 
> 标签：php, database, kohana

使用 Kohana 2 版本，一切正常。但是今天点击 Koahana 网站并得到这个错误：

```
An error was detected which prevented the loading of this page. If this problem persists, please contact the website administrator.
panel/modules/formo/libraries/Formo.php [103]:
Call-time pass-by-reference has been deprecated 
```

这 103\. 行：

```
call_user_func('Formo_'.$name.'::load', & $this); 
```

我从未更改过任何文件、目录与为什么会收到此警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:43:42.473

call_user_func 中的 & 表示通过引用传递变量，但是在调用函数时这样做（即调用时通过引用传递）在 php 5.3 中已弃用。

删除与号应该对问题进行排序，但是可以通过 call_user_func 声明中的 ref 使其通过。

有关详细信息，请参阅[http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)。

# java - java：如何存储动态生成的文本字段的值

> ID：10797126
> 
> 赞同：2
> 
> 时间：2012-05-29T10:14:08.807
> 
> 标签：java, mysql, swing, netbeans-7

我已经动态生成了文本字段。生成多少个文本字段，用户给出的数字。生成文本字段后，用户将姓名和联系电话插入文本字段。所以我的问题是如何将这些值存储到数据库中。我正在使用Mysql。我知道 getText() 方法，但是如何使用它呢？这是动态生成的文本字段的代码。

```
private void Extra()
{   
if(no_of_people.getText().equals(" "))
{
    String st="The entry 'Number of People' should not be blank.";
    JOptionPane.showMessageDialog(null,st);
}    
try
{
String nop=(no_of_people.getText().toString());
int nop1 = Integer.parseInt(nop.trim());
int j=nop1;

Extra_people extrpeo=new Extra_people();
JPanel panel = new JPanel();
extrpeo.setSize(450,500);
extrpeo.setVisible(true);
extrpeo.setLayout(new java.awt.BorderLayout());
extrpeo.add(panel);
extrpeo.validate();
Vector textFieldVector = new Vector();
JLabel lb1,lb2;
JTextField tf,tf1;
int i=1;
while (i <= nop1) 
{
    lb1=new JLabel("Name "+i);
    panel.add(lb1);
    tf = new JTextField(10);
    textFieldVector.add(tf);
    panel.add(tf);
    //String value = tf.getText();
    lb2=new JLabel("Contact Number "+i);
    panel.add(lb2);
    tf1 = new JTextField(10);
    textFieldVector.add(tf1);
    panel.add(tf1);
    i++;
    }
    panel.validate();
    panel.repaint();
    }    
    catch(Exception e)
    {
        System.out.println(" "+e);
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:18:53.477

`JTextField`您可以将所有s的引用存储到一个 s`List<JTextField>`中，然后从那里您将能够通过遍历列表来访问它们。

您将需要两个像这样的变量 -

```
List<JTextField> yourArrayListForName = new ArrayList<JTextField>();
List<JTextField> yourArrayListForContact = new ArrayList<JTextField>(); 
```

然后，修改你的`while`循环 -

```
while (i <= nop1) 
{
    lb1=new JLabel("Name "+i);
    panel.add(lb1);

    tf = new JTextField(10);
    textFieldVector.add(tf);
    panel.add(tf);
    yourArrayListForName.add(tf);        // add this line

    //String value = tf.getText();
    lb2=new JLabel("Contact Number "+i);
    panel.add(lb2);

    tf1 = new JTextField(10);
    textFieldVector.add(tf1);
    panel.add(tf1);
    yourArrayListForContact.add(tf1);        // add this line

    i++;
} 
```

然后，当您需要访问这些值时，请使用以下内容 -

```
for(JTextField field : yourArrayListForName)
{
    field.getText();     // input will be obtained here
}

for(JTextField field : yourArrayListForContact)
{
    field.getText();     // input will be obtained here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:20:52.160

在需要时通过调用 yourTextField.getText() 方法来获取文本字段中的字符串。

```
String x = yourInputField.getText(); 
```

将动作侦听器附加到文本字段。每当用户在该字段中输入 Enter 时都会调用它。然后侦听器可以将信息写入数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:31:31.280

用数组处理 textFields，然后你必须能够： 从 textField 中获取字符串，如下所示：

```
str[i] = textField[i].getText(); 
```

但您必须先定义字符串数组：

```
String[] str[] = new String[nop1](); 
```

然后将它们存储到数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:24:40.780

在您的事件侦听器方法中，您可以遍历其中的`JPanel`for all `TextField`。

```
for (Component c : panel1.getComponents()) {
    if (c instanceof JTextField) { 
       JTextField textField = ((JTextField)c);
       String name;
       String contact;
       if(textField.getName().startsWith("Name") {
           // Name field
           name = textField.getText();
       } else {
           // Contact field
           contact = textField.getText();

       }
       // Validate and persist.
    }
} 
```

# ruby-on-rails - Rails 的可安装插件

> ID：10797129
> 
> 赞同：1
> 
> 时间：2012-05-29T10:14:51.410
> 
> 标签：ruby-on-rails, ruby

我想创建一个 Rails 应用程序。一种“核心”应用程序，用户可以在其中安装其他插件。这些插件应该集成到应用程序中，用户不必更改应用程序代码即可使其正常工作。

我应该在哪里寻找创建这样的插件的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:20:56.743

嗯，这是一个非常笼统的问题。您可能想看看[Radiant CMS](http://radiantcms.org/)。这是一个基于 Rails 的 CMS，带有“扩展”的概念。

# javascript - tinymce 不能正确地在初始化时自动调整大小

> ID：10797135
> 
> 赞同：8
> 
> 时间：2012-05-29T10:15:22.917
> 
> 标签：javascript, plugins, editor, tinymce, autoresize

我正在使用带有 autoresize 插件的 Tinymce 编辑器。我的问题是，当 tinymce 实例初始化时，它没有正确调整大小以将内容的高度包裹起来。

如果我在编辑器中有一个长文本（例如 15 行），当显示 tinymce 时，自动调整大小调整编辑器区域的大小仅为 5 行，其他 10 行不显示。只有当我在编辑器区域中输入内容时，所有 15 行的自动调整大小才会增长。

这是一个 javascript 自动调整大小插件：

```
/**
 * editor_plugin_src.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://tinymce.moxiecode.com/license
 * Contributing: http://tinymce.moxiecode.com/contributing
 */

(function() {
    /**
     * Auto Resize
     *
     * This plugin automatically resizes the content area to fit its content height.
     * It will retain a minimum height, which is the height of the content area when
     * it's initialized.
     */
    tinymce.create('tinymce.plugins.AutoResizePlugin', {
        /**
         * Initializes the plugin, this will be executed after the plugin has been created.
         * This call is done before the editor instance has finished it's initialization so use the onInit event
         * of the editor instance to intercept that event.
         *
         * @param {tinymce.Editor} ed Editor instance that the plugin is initialized in.
         * @param {string} url Absolute URL to where the plugin is located.
         */
        init : function(ed, url) {
            var t = this, oldSize = 0;

            if (ed.getParam('fullscreen_is_enabled'))
                return;

            /**
             * This method gets executed each time the editor needs to resize.
             */
            function resize() {
                var deltaSize, d = ed.getDoc(), body = d.body, de = d.documentElement, DOM = tinymce.DOM, resizeHeight = t.autoresize_min_height, myHeight;

                // Get height differently depending on the browser used
                myHeight = tinymce.isIE ? body.scrollHeight : (tinymce.isWebKit && body.clientHeight == 0 ? 0 : body.offsetHeight);

                // Don't make it smaller than the minimum height
                if (myHeight > t.autoresize_min_height)
                    resizeHeight = myHeight;

                // If a maximum height has been defined don't exceed this height
                if (t.autoresize_max_height && myHeight > t.autoresize_max_height) {
                    resizeHeight = t.autoresize_max_height;
                    body.style.overflowY = "auto";
                    de.style.overflowY = "auto"; // Old IE
                } else {
                    body.style.overflowY = "hidden";
                    de.style.overflowY = "hidden"; // Old IE
                    body.scrollTop = 0;
                }

                // Resize content element
                if (resizeHeight !== oldSize) {
                    deltaSize = resizeHeight - oldSize;
                    DOM.setStyle(DOM.get(ed.id + '_ifr'), 'height', resizeHeight + 'px');
                    oldSize = resizeHeight;

                    // WebKit doesn't decrease the size of the body element until the iframe gets resized
                    // So we need to continue to resize the iframe down until the size gets fixed
                    if (tinymce.isWebKit && deltaSize < 0)
                        resize();
                }
            };

            t.editor = ed;

            // Define minimum height
            t.autoresize_min_height = parseInt(ed.getParam('autoresize_min_height', ed.getElement().offsetHeight));

            // Define maximum height
            t.autoresize_max_height = parseInt(ed.getParam('autoresize_max_height', 0));

            // Add padding at the bottom for better UX
            ed.onInit.add(function(ed){
                ed.dom.setStyle(ed.getBody(), 'paddingBottom', ed.getParam('autoresize_bottom_margin', 50) + 'px');
            });

            // Add appropriate listeners for resizing content area
            ed.onChange.add(resize);
            ed.onSetContent.add(resize);
            ed.onPaste.add(resize);
            ed.onKeyUp.add(resize);
            ed.onPostRender.add(resize);

            if (ed.getParam('autoresize_on_init', true)) {
                ed.onLoad.add(resize);
                //ed.onLoadContent.add(resize);
                ed.onLoadContent.add(function(ed, l) {
                    resize();

                         // Because the content area resizes when its content CSS loads,
                         // and we can't easily add a listener to its onload event,
                         // we'll just trigger a resize after a short loading period
                         setTimeout(function() {
                            resize();
                         }, 400);

                });
            }

            // Register the command so that it can be invoked by using tinyMCE.activeEditor.execCommand('mceExample');
            ed.addCommand('mceAutoResize', resize);
        },

        /**
         * Returns information about the plugin as a name/value array.
         * The current keys are longname, author, authorurl, infourl and version.
         *
         * @return {Object} Name/value array containing information about the plugin.
         */
        getInfo : function() {
            return {
                longname : 'Auto Resize',
                author : 'Moxiecode Systems AB',
                authorurl : 'http://tinymce.moxiecode.com',
                infourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize',
                version : tinymce.majorVersion + "." + tinymce.minorVersion
            };
        }
    });

    // Register plugin
    tinymce.PluginManager.add('autoresize', tinymce.plugins.AutoResizePlugin);
})(); 
```

它提供了一种解决方法：

```
 // Because the content area resizes when its content CSS loads,
                     // and we can't easily add a listener to its onload event,
                     // we'll just trigger a resize after a short loading period
                     setTimeout(function() {
                        resize();
                     }, 400); 
```

但是计时器解决方案并不漂亮，因为它开始时高度很小，所以在 400 毫秒之后 tinymce 内容区域自动调整大小正确。是否存在替代解决方案或我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T18:16:13.740

您可以稍微改进计时器解决方案。如果您使用的是一台速度较慢的计算机，并且它实际上并没有在 400 毫秒内加载怎么办？还是一台 400 毫秒是 eons 的快速计算机？我在插件之外的自己的代码中使用它。它应该最大限度地减少显示较小框的延迟。

```
// assuming mytextarea is a jquery element instance containing your tinymce.

f = function(){
  if(mytextarea.tinymce()){
    mytextarea.tinymce().execCommand('mceAutoResize')
  }else{
    setTimeout(f, 10)
  }
}
f() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T18:53:42.600

```
init_instance_callback: function (ed)
{
        setTimeout(function() 
        {
            ed.execCommand('mceAutoResize', false, undefined, {skip_focus: true, skip_undo: true});
        }, 1);
}, 
```

# python - re.sub 的 Jython 正则表达式子组名称

> ID：10797143
> 
> 赞同：0
> 
> 时间：2012-05-29T10:15:40.810
> 
> 标签：python, regex, jython

嗨，我有以下工作正常：

```
re.sub("(?P<colon>(, )\s*|^)(?P<field>[A-Za-z]*)", "\\g<colon>`\\g<field>`", fields 
```

但是我想这样做（捕获内部组）：

```
re.sub("((?P<colon>, )\s*|^)(?P<field>[A-Za-z]*)", "\\g<colon>`\\g<field>`", fields 
```

但是，如果我尝试引用组中的组（例如，组中仅包含 g 的组：）`r(e(g)e)x`我会收到`unmatched group`错误/异常。

那么我如何引用嵌套的捕获组或者使用 jython 是不可能的（大约 python 2.5.1）

**编辑**：根据 Qtax (Az => A-Za-z) 的回答修复，但是我的真正问题还没有解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:38:17.167

所有这些组捕获，其中一些只是没有命名。您应该能够引用任何捕获组，尽管我不知道 python/jython 正则表达式规范。尝试如下表达式：

```
re.sub("(?:(, )\s*|^)([A-Za-z]*)", r"\1`\2`", ...) 
```

`[A-z]`如果您的意思是`A-Z`and ，则不能使用，它可以与某些不区分大小写的标志`a-z`一起编写或使用，例如.`[A-Za-z]``(?i)[a-z]`

# objective-c - iOS - 在没有 xib 的项目中创建 xib

> ID：10797144
> 
> 赞同：1
> 
> 时间：2012-05-29T10:15:47.933
> 
> 标签：objective-c, ios, xcode, delegates, xib

我对[这个](http://www.cocos2d-iphone.org/forum/topic/28431)项目有疑问，它没有 xib 文件或情节提要。该项目使用以下代码立即将 appdelegate 文件调用到 main 中：

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

在应用程序委托文件中，我们有视图控制器的声明，而不是在我的项目中，我有一个带有视图的 xib。如果我想在现有项目中连接它，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:34:10.390

1)制作自己的xib/nib，例如MainWindow.xib。MainWindow.xib 中应该有三个对象，即您的“AppDelegate”、UIWindow 和 UINavigationViewController。将根视图控制器插入 UINavigationController。

2）将MainWindow添加到Info.plist，也就是说将“Main nib file base name”设置为“Main Window”

3) 将 IBOutlets 连接到您的 appdelegate。例子：

```
@interface AppDelegate : NSObject <UIApplicationDelegate>
{
    UIWindow *window;
    UINavigationController *navigationController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;

@end 
```

Ps 如果你使用 StoryBoards，有简单而紧凑的官方指南：[Converting to Storyboards Release Notes](http://developer.apple.com/library/ios/#releasenotes/Miscellaneous/RN-AdoptingStoryboards/_index.html#//apple_ref/doc/uid/TP40011297)

# oracle - 在oracle数据库中创建一个序列

> ID：10797147
> 
> 赞同：0
> 
> 时间：2012-05-29T10:16:04.913
> 
> 标签：oracle, sequence

如何创建一个序列，它有两个部分，一个是固定字符部分，另一个是可变整数部分，如“ **LTR00001** ”，序列中的下一个值应该是“ **LTR00002** ”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:20:08.613

你不能。序列只是整数。

但是您可以从序列中选择一个格式化的字符串

```
SELECT 'LTR' || to_char('09999', the_sequence.nextval) FROM DUAL; 
```

# linux - 如何在linux中用户登录身份验证后运行脚本

> ID：10797150
> 
> 赞同：7
> 
> 时间：2012-05-29T10:16:12.110
> 
> 标签：linux, login

我有一个脚本，我想在用户登录身份验证后运行它。为此，我在`/etc/rc5.d/S##rc.local`文件中添加了脚本名称。但后来我知道，在 rc.local 文件中添加的任何内容都会在系统启动时执行，而不是在登录身份验证之后。谁能告诉我如何在用户登录身份验证后运行脚本？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-12T19:58:36.393

**For bash:**

You can add your script to `/etc/profile.d` folder.

More reading about this [here](http://bash.cyberciti.biz/guide//etc/profile.d) and [here](http://www.linuxfromscratch.org/blfs/view/cvs/postlfs/profile.html).

Basically, you should give your script the extension **.sh** as all these files are executed in a loop after user logs on.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T10:28:28.683

尝试将此添加到您的`/etc/pam.d/login`：

```
session optional pam_exec.so /bin/bash /path/to/your/script.sh 
```

如果当前用户实际上是管理员（根据您作为管理员的标准），您将需要签入您的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T22:44:36.003

对于具有桌面环境的 Linux Mint 和[Ubuntu](https://itsfoss.com/manage-startup-applications-ubuntu/)，主菜单中有一个名为“启动应用程序”的选项，只需转到那里并添加脚本文件的路径即可。此脚本将在登录窗口管理器后运行。

# qt - 无法在 QtCreator 中编辑/拖放小部件

> ID：10797159
> 
> 赞同：3
> 
> 时间：2012-05-29T10:16:28.460
> 
> 标签：qt, ubuntu, qt4, qt-creator

我遇到了一个有点奇怪的问题，不确定发生了什么，所以也许其他人已经看到了，可以对这个问题有所了解。

我在 Ubuntu 12.04 LTS x64 中安装了 Qt 4.6.1，它在 Windows 7 x32 中作为虚拟来宾 (VirtualBox) 运行。

无论如何......我已经创建了一个新的小部件，它不会让我编辑它或将小部件拖到它上面。它几乎就像它是只读的。我拖动时的图标是一个带有一条线的圆圈。我看到有人提到 Windows 7 的拖放问题，但我已经尝试过该修复，但它并没有改变任何东西。

一切都构建并运行，根本无法使用设计器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:03:20.777

希望这会帮助其他可能遇到问题的人，因为我找到了解决方案，尽管不是一个理想的解决方案。

基本上，新的 Unity shell 和 Qt 似乎存在问题。我需要将 shell 更改为 gnome，它现在可以工作了。

在终端：

```
sudo apt-get install gnome-shell 
```

然后注销并切换到 Gnome shell，现在可以进行拖放操作。我不知道问题出在 Virtualbox、Ubuntu 12.04 还是 Qt

# java - 如何知道 java 的项目中存在一些 Web 服务

> ID：10797162
> 
> 赞同：0
> 
> 时间：2012-05-29T10:16:33.030
> 
> 标签：java, web-services

我对 Java 中的 J2EE/Web 项目了解不多。

实际上事情就像我有一些相互关联的项目（10-12）（包含很多包、类等）。并且它需要 JBOSS 服务器来运行完整的项目。

看到它的一些代码后，我感到很困惑。当我尝试使用 JBOSS 服务器运行它时，它会在浏览器中打开一个链接。

我想知道 Web 服务在项目中的实际位置，以便我可以一点一点地了解事情。

抱歉问白痴问题。请指教。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:24:20.900

查看项目的 web.xml 文件。它会给你一个良好的开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:40:26.933

Bhavesh.. 首先你应该知道你的项目中开发了哪种类型的 web 服务。REST 或 SOAP 服务。

第二件事您应该知道您的 Web 服务建立在哪些库或技术之上。

例如，可以使用 Jersey 或 Spring MVC 开发基于 REST 的服务（在这种情况下，您可以找到一些注释，如 @RequestMappling 或 @GET）。

基于 SOAP 的 Web 服务通常包含 WSDL 文件和一些 .XSD（在合同优先 Web 服务的情况下）文件。

如果没有具体信息，很难判断您的 Web 服务部分在项目中的哪个位置。

# php - 回显值并存储为变量

> ID：10797163
> 
> 赞同：0
> 
> 时间：2012-05-29T10:16:34.433
> 
> 标签：php, curl, echo

```
$ch = curl_init();                   //this part we set up curl 
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$xml_response = curl_exec($ch);
curl_close($ch);
header('Content-type: application/xml');  //specify as xml to not display as one long string
echo $xml_response; 
//header('Content-type: text/plain');  //specify as xml to not display as one long string
$xml = new SimpleXMLElement($xml_response);  //time to echo back the correct piece of data

$editorialReview = $xml->Items->Item->EditorialReviews->EditorialReview->Content;
ob_start();
echo '<p>Editorial review: '.html_entity_decode($editorialReview).'</p>'."\n"; 
$MineNow = ob_get_contents();
ob_end_clean();
var_dump($MineNow); 
```

我想要做的是在回声之后我需要将它存储到一个变量中，这样我就可以将数据发布到 mysql 中；我尝试使用 ob_start 会话来捕获它，但 var_dump 没有返回任何值！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:18:34.293

为什么你不能只使用：

```
$variable = '<p>Editorial review: '.html_entity_decode($editorialReview).'</p>'."\n";
echo $variable; 
```

# ruby-on-rails - 如何使用图形 API 获取 Facebook 视频隐私设置

> ID：10797164
> 
> 赞同：0
> 
> 时间：2012-05-29T10:16:40.127
> 
> 标签：ruby-on-rails, facebook-graph-api, video, koala

如何使用 GRAPH API 获取 Facebook 视频对象隐私设置？（我正在使用红宝石考拉）。只能找到 FQL 解决方案（[此处](http://facebook.stackoverflow.com/questions/8226699/check-photo-privacy-for-a-user)）

谢谢，穆兹利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:57:35.653

恐怕 FQL 解决方案是解决这个问题的唯一方法。您无法使用 Graph API 调用获取对象的隐私信息。

# c - 空字符串结束 for 循环

> ID：10797168
> 
> 赞同：0
> 
> 时间：2012-05-29T10:16:44.443
> 
> 标签：c

下面的程序有什么问题（这里发生了什么）？它应该在用户插入空字符串（仅按 ENTER）后打破 for 循环，但在我的情况下，它以无限 for 循环结束。我尝试了评论中的内容，但没有成功。

```
#include <stdio.h>
#include <string.h>                                      

struct S {
  char str [10];
};

int main(void)
{
  int n;
  struct S strings [10];
  for (n = 0; n < 10; n++) {
    # fflush(stdout);
    scanf("%s", strings[n].str);
    if (strlen(strings[n].str) == 0)
      break;
    # getchar();
  }
  printf("done");
  return 0;
} 
```

当我`scanf`用`gets(strings[n].str);` *done*替换时，永远不会打印。你会如何解决它？

[此](http://pastebin.com/QB6JC0ZU)示例解决方案有效。与我的代码相比有什么不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T10:20:01.357

回车键不是空字符串，它是一个 ascii 字符，或者更确切地说是 CR 和 LF 两个字符（在 Windows 上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:34:30.967

您不应该使用 strlen 来确定输入是否为空。正如其他人所说，当您按 ENTER 时，您会收到一两个字符。

您可以改为检查字符串中的第一个字符，看看它是否是`'\n'`或`'\r'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:20:49.063

`scanf`准确返回您输入的内容...即我想象的一对 crlf！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T10:26:27.930

using 的问题`scanf`是它需要一些东西，而不是空字符串。您可以通过使用 eg`fgets`而不是来解决这个问题`scanf`：

```
if (fgets(strings[n].str, sizeof(strings[n].str), stdin))
{
    /* You got a string, it will contain the newline! */
} 
```

# jquery - 在jquery中添加一次事件

> ID：10797172
> 
> 赞同：0
> 
> 时间：2012-05-29T10:17:11.320
> 
> 标签：jquery

我怎么能有这样的东西：

```
<input class="myClass" id="a" type="checkbox" other="x"/>
<input class="myClass" id="b" type="checkbox" other="x"/>
<input class="myClass" id="c" type="checkbox" other="x"/>
<input class="myClass" id="d" type="checkbox" other="y"/>
<input class="myClass" id="e" type="checkbox" other="z"/> 
```

我可以检索元素 a 到 e，添加一个单击事件，并且我想在属性`other`（x、y 和 z）中定义的元素上添加一个事件。
我该怎么做？
我尝试：

```
$(".myClass").each( function() {
    $("#" + $(this).attr("other")).click( function() {
        ...
    });
}); 
```

但是三个元素有`other="x"`，所以事件是在 x 上添加三个时间，我只想要一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:19:50.180

试试这个，我在绑定新事件之前取消绑定事件。[JsFiddle 上的演示](http://jsfiddle.net/j6ccN/3/)

```
$(".myClass").each( function() {
    $("#" + $(this).attr("other")).unbind('click').click(    function() {
       alert(this.id);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:20:34.740

可能有更好的方法，但您可以使用[命名空间*^([docs])*](http://docs.jquery.com/Namespaced_Events)取消绑定任何以前的这种类型的事件处理程序：

```
$(".myClass").each( function() {
    $("#" + $(this).attr("other")).off('click.someNS').on('click.someNS', function() {
        ...
    });
}); 
```

另一种方法是过滤元素，以便每个元素只有一个具有特定`other`属性：

```
var seen = {};

$(".myClass").filter(function() {
    var other = $(this).attr('other');
    return !seen[other] && (seen[other] = true);
}).each(...); 
```

# android - OSMDroid 中的航空照片地图 - 必应？要不然是啥？

> ID：10797174
> 
> 赞同：2
> 
> 时间：2012-05-29T10:17:15.630
> 
> 标签：android, bing-maps, openstreetmap

我需要构建一个 Android 地图应用程序，我将在该应用程序上绘制考古 POI（兴趣点）。要求是拥有类似于谷歌地图卫星视图的航拍照片。但是，另一个要求是数据连接不可用时的离线地图功能，因此排除了使用谷歌地图的可能性。

所以我有两个问题。

1.  OSMDroid 是否可以在不使用 Bing 的情况下免费访问支持 Arial 摄影或卫星的图块资源？

2.  我知道 OSM 可以支持具有 Ariel 摄影地图的 Bing，但我无法让它工作。是否有任何您可以指向我的 bing 特定教程，或者是一个简单的示例，说明如何在 OSMDroid 中显示一个 bing 地图，因为我一直在寻找几个小时并拉出我的头发。

在 eclise 中，我已经能够构建一个简单的应用程序来显示 OSMDroid (Mapink) 的默认地图。为了尝试使用 Bing，我在项目源代码中添加了三个类。BingMapTileSource.Java、ImageryMetaData.Java 和 ImageryMetaDataResouce.Java。我从 OSMDroid SVN 上的 TileProvider 目录的 Bing 子文件夹中得到这些（[链接在这里](http://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-third-party/src/org/osmdroid/tileprovider/tilesource/?r=948#tilesource/bing)）

但是，当我如下在 onCreate 中使用它时，我在 BingMapTileSource.java 类中出现空指针错误。

```
MapView mapView = new MapView(this, 256);
mapView.setClickable(true);
mapView.setBuiltInZoomControls(true);
String  m_locale=Locale.getDefault().getISO3Language()+"-"+Locale.getDefault().getISO3Language();
mapView.setTileSource(new BingMapTileSource("Bing",m_locale));

mapView.getController().setZoom(10);
mapView.getController().setCenter(new GeoPoint(39.461078, 2.856445));

setContentView(mapView); 
```

我相信这个问题的原因是以下类变量在首次使用之前从未初始化过。

```
s_roadMetaData = null;
s_aerialMetaData = null;
s_aerialwithLabelsMetaData = null; 
```

我唯一能看到它们被初始化的地方是一个名为 InitMetaData 的静态方法，它永远不会被调用。

```
public static synchronized void initMetaData(final Context aContext) 
```

尽管在其说明的 Javadoc 中提供了一些关于其目的的线索。

```
 /**
     * Initialize BingMap tile source.<br>
     * This method should be invoked before class instantiation.<br>
     * It get dynamically the REST service url to be used to get tile in each supported map view mode.
     * @param a_BingMapKey  The user's BingMap key.
     * @throws Exception
     */ 
```

但是，我不知道如何使用它。任何关于教程、示例或一些代码的建议或指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-09T14:39:51.073

**2015 年 7 月 22 日更新**

**如何将 Bing 地图添加到 osmdroid**

以下是分步说明。也许有人会节省很多时间。

1.添加对gradle的依赖

```
compile 'org.slf4j:slf4j-android:1.6.1-RC1'
compile 'org.osmdroid:osmdroid-android:4.3' 
```

[2.从这里](http://mvnrepository.com/artifact/org.osmdroid/osmdroid-third-party)添加库**osmdroid-third-party**

**或者**

在我们的项目中添加三个类（**BingMapTileSource.java、ImageryMetaData.java、ImageryMetaDataResource.java**）。[从这里](https://github.com/osmdroid/osmdroid/tree/master/osmdroid-third-party/src/main/java/org/osmdroid/tileprovider/tilesource/bing)

3.获取必应地图密钥。[这里的说明](https://msdn.microsoft.com/en-us/library/ff428642.aspx)

4\. 将 Bing 地图密钥添加到清单中。

```
<meta-data android:name="BING_KEY" android:value="ApEqyap8rTa4WTNCNv-3pAGQc7XUsHS6595tuDI3MHR59QlahJ5bqYGYhMYJq6Ae" /> 
```

5.最后一步。添加地图代码

```
 ResourceProxyImpl mResourceProxy = new ResourceProxyImpl(getContext().getApplicationContext());
        MapView mMapView = new MapView(getContext(), 256, mResourceProxy);
        mMapView.setBuiltInZoomControls(true);
        mMapView.setMultiTouchControls(true);

        try{
            BingMapTileSource.retrieveBingKey(getContext());
            String m_locale =   Locale.getDefault().getDisplayName();
            BingMapTileSource bing = new BingMapTileSource(m_locale);
            bing.setStyle(BingMapTileSource.IMAGERYSET_AERIAL);
            mMapView.setTileSource(bing);
        }
        catch(Exception e){
            e.printStackTrace();
        }
        mapContent.addView(mMapView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:48:31.397

离线卫星图像的要求意味着您必须单独许可图像。我认为任何供应商都不允许在没有具体协议的情况下进行此类使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:37:28.460

有许多商业天线供应商：Digitalglobe、Geoeye 等。从谷歌地球查看，他们在地图底部提到了他们的供应商。

还有一些分辨率较低的免费图像，如 OpenAerialMap，它本身不再工作。但值得检查它们的原始来源（http://openaerialmap.org/Data_Sources）。MapQuest Open Tiles API 中至少还有一些剩余的存档可用。也许他们甚至允许离线下载，检查他们的条款。

通过两个警告 - 来自商业提供商的航拍图像可能非常昂贵，尤其是对于离线案例。任何来源的天线都会占用大量空间，比光栅图块多几倍。因此，仅将它们下载到设备上可能是一个挑战。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:16:16.970

好吧，我发现了让 Bing 地图工作的问题。需要在 BingMapTileSouce 的实例化之前使用以下静态方法来实例化前面讨论的三个元数据对象。

```
try 
{
 BingMapTileSource.initMetaData(this);
}
 catch (Exception e)
{       
 e.printStackTrace();
} 
```

# typo3 - 在typo3中将元标记放在标题部分的顶部

> ID：10797187
> 
> 赞同：10
> 
> 时间：2012-05-29T10:18:07.273
> 
> 标签：typo3, meta-tags, quirks-mode, typoscript

为了防止 IE9 中的 quirks 模式，我需要在每个 HTML 页面的最顶部添加以下行：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

不幸的是，typo3 将该`<meta http-equiv ...`行移动到标题部分的末尾，使其无用。

如何告诉 tyop3 将元标记条目立即放在标题标记之后？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T10:42:03.123

您可以自己编写整个标题，通过添加`disableAllHeaderCode = 1`到您的打字稿，或者您可以通过将元标记直接添加到 head 标记来破解它：`page.headTag = <head><meta http-equiv="X-UA-Compatible" content="IE=edge" />`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-16T12:09:12.397

把它放在你的打字稿上

```
meta.X-UA-Compatible = IE=edge,chrome=1 
```

# python - Python 多个交集

> ID：10797189
> 
> 赞同：1
> 
> 时间：2012-05-29T10:18:19.507
> 
> 标签：python, set, intersection

我在 python 中重新实现了该集合，但我在多个交集方面遇到了一些问题....我遵循了《学习 Python》这本书，但我的代码有问题

```
class Set:
    def __init__(self,value=[]):
        self.data = []
        self.remDupli(value)

    def remDupli(self,val):
        for i in val:
            if i not in self.data:
                self.data.append(i)

    def intersect(self,other):
        val=[]
        for i in self.data:
            for k in other:
                if i == k:
                    val.append(i)
        return Set(val)

    def union(self,other):
        val=self.data
        for i in other:
            if i not in self.data:
                val.append(i)
        return Set(val)

    def __or__(self,a):       return self.union(a)
    def __and__(self,a):      return self.intersect(a)
    def __len__(self):        return len(self.data)
    def __getitem__(self,key):  return self.data[key]
    def __repr__(self):       return 'Set: ' +repr(self.data)

class Extend(Set):
    def intersect(self, *others):
        val = []
        for i in self:
            for x in others:
                if i in x:
                    val.append(i)
        return Set(val) 
```

但是当我运行这个时：

```
x = Extend([1,2,3,4])
y = Extend([3,4,5])
z = Extend([0,1,2])
print(x & y & z)
print(x.intersect(y, z)) 
```

我有两种不同的行为

```
Set: []
Set: [1, 2, 3, 4] 
```

我不明白，因为第二个是不同的，在我看来他们应该有相同的行为，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T10:33:23.420

`Extend.intersect`不计算许多集合之间的交集。它计算 之间的交集和`self`并*集*`others`。

结果是不同的，因为`x & y & z`调用`Extend.intersect(Extend.intersect(x,y), z)`，而`x.intersect(y,z)`调用`Extend.intersect(x, *[y,z])`并给出`Extend.intersect` *实际*操作，这些恰好是不同的操作。

# php - SimpleXMLElement - 获取节点的属性

> ID：10797192
> 
> 赞同：0
> 
> 时间：2012-05-29T10:18:38.800
> 
> 标签：php, xml, simplexml

我有一个 SimpleXMLObject `$node`，其中包含一个我必须检索的数组“数据”，但我不知道如何检索。我有，`$node['data']`但它不起作用。有什么帮助吗？

也许这很简单，但我不知道如何快速完成..

**编辑：**示例代码

```
foreach ($xmlObject->children() as $node) {
    if($node->getName() == 'URL_web_images'){

        // here i have a $node that contains an array named 'URL_web_image', how to access to it?

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:20:33.493

SimpleXML 是一个类，并且`$node`似乎是它的实例。您无法访问 php.ini 中的数组等属性。你必须使用`$obj->property`.

所以试试这个：

```
echo $node->data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:21:32.120

尝试这个

```
print_r(json_decode($node));
$node_json = json_decode($node);
echo $node_json['data']; 
```

# c# - 访问数据库，检查是否有人在使用... (OLEDB/C#)

> ID：10797206
> 
> 赞同：0
> 
> 时间：2012-05-29T10:19:17.673
> 
> 标签：c#, database, connection, oledb

我有一个线程客户端/服务器应用程序的问题，我有一个具有 Access DB 的 serverid，并且每个客户端都有一个线程，但是如果两个客户端线程都要求同时打开数据库，我会遇到问题。有什么方法可以检查数据库是否正在使用（我知道我可以有一个变量并继续控制/设置它，但想避免这种情况。这是一个示例连接

> String connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" + dbPath + "'"; OleDbConnection 连接 = 新 OleDbConnection(connectionString);
> OleDbCommand 命令；

```
connection.Open();
command = new OleDbCommand("UPDATE Client SET Online = " + online)
command.ExecuteNonQuery();
connection.Close(); 
```

真的很想得到一些帮助！

/缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:27:05.597

根据此[http://www.connectionstrings.com/access-2007](http://www.connectionstrings.com/access-2007)，您可以`Exclusive=1`在连接字符串中设置以允许只有一个连接可以使用此数据库。所有其他尝试都将失败。

# android - 如何通过网络从我的 sqlite 数据库发送记录？

> ID：10797207
> 
> 赞同：0
> 
> 时间：2012-05-29T10:19:18.657
> 
> 标签：android, multithreading, sqlite

我正在数据库中写一堆记录`sqlite`。每次存储的记录数达到 10 的倍数时，我想将这 10 条记录存储到对象中并发送到远程服务器。

如何在单独的线程中完成任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:26:56.937

如果你想使用 http，你可以使用这个示例代码。

```
Thread background = new Thread(new Runnable(){
  @Override
public void run() {
                    HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost("http://your-url.com");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("paramName", paramValue));
            nameValuePairs.add(new BasicNameValuePair("paramName2", paramValue2));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    // Execute HTTP Post Request
    httpclient.execute(httppost);

} catch (Exception e) {
    Log.w("error", e.toString());
} 
});
background.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:17:09.487

如果您的所有插入都来自一个方法，那么您可以保留发送到服务器的项目 ID 的内部缓存，当集合达到 10 时，然后获取这 10 条记录并在后台线程中执行发送到服务器。

这个的伪代码可能是这样的......

```
Set<Long> ids = new TreeSet<Long>;

public void insert(Data data) {
   long id = sqlite.insert(data);
   ids.add(id);
   if (ids.size()>=10) {
       postToServer();
   }
}

public void postToServer() {
   // build select statement using the 10 ids in the set.
   // clear the set
   ids.clear();
   // create a new thread and then post your results to the server
   // optionally update those 10 ids in the database to indicate that they have been sent to the server
} 
```

上面的代码只在内存中缓存了 10 个长值，因此在内存中跟踪它并不是什么大问题。并且由于您拥有插入的记录的插入 ID，因此使用类似的东西创建单个选择语句

```
select * from TABLE where _ID in (YOUR ID LIST) 
```

也应该相当有效。

如果你只想要一个线程来发布服务器，那么你可以修改上面的逻辑，这样你就有一个后台线程来监控 ids Set 的大小，当它达到 10 时，它会发布到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:33:46.267

了解表中的行数

final String SQL_STATEMENT = "SELECT COUNT(*) FROM sample;

你可以在它是 10 的倍数时检查计数，然后你可以

如果您的日期与表中的任何列类似，则可以使用此方法。

最终字符串 orderBy = Constants.TABLE_CONVERSATION_FIELD_DATE + " DESC LIMIT 10"

return db.query(table, columns, selection, null, null, null, orderBy);

现在您需要从数据库中获取值并将该值传递给服务器。

# iphone - 使用运行循环联网

> ID：10797208
> 
> 赞同：2
> 
> 时间：2012-05-29T10:19:23.493
> 
> 标签：iphone, ios, multithreading

我有一个使用一些外部库进行分析的应用程序。问题是我怀疑它会同步执行某些操作，这会阻塞我的线程并使看门狗在 10 秒后杀死我的应用程序（0x8badf00d 代码）。真的很难复制（我不能），但是“在野外”很少有案例。

我已经阅读了一些文档，其中建议我应该使用运行循环来代替创建另一个线程。不幸的是，我对他们的了解越多，我就越困惑。我想做的最后一件事是发布一个修复程序，它会破坏更多的东西：/

我想要实现的是：

从主线程向运行循环添加一个任务，它只调用一个函数：initMyAnalytics()。我的线程继续运行，即使 initMyAnalytics() 被锁定等待网络数据。在 initMyAnalytics() 完成后，它会安静地退出并且不再被调用（所以它不会循环或任何东西）。

任何想法如何实现它？欢迎使用代码示例；）问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:10:58.327

在这种情况下，您不需要使用运行循环。运行循环的目的是在特定线程中按顺序处理来自各种来源的事件，并在它们无事可做时保持空闲状态。当然，您可以分离线程、创建运行循环、为函数添加源并运行运行循环直到函数结束。就像您可以使用半挂车将杂货运回家一样。

在这里，您需要的是调度队列。调度队列是异步运行任务的先进先出数据结构。与运行循环相反，调度队列不依赖于特定线程：工作线程会在需要时自动创建和终止。

由于您只有一个任务要执行，因此您不需要创建调度队列。相反，您将使用现有的全局并发队列。并发队列同时执行一个或多个任务，这在我们的例子中非常好。但是如果我们有很多任务要执行，并且希望每个任务都等待其前任结束，我们就需要创建一个串行队列。

所以你所要做的就是：

*   通过将其封闭到[块中来为您的函数创建一个任务](http://en.wikipedia.org/wiki/Blocks_%28C_language_extension%29)
*   使用获取全局队列`dispatch_get_global_queue`
*   使用 将任务添加到队列中`dispatch_async`。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    initMyAnalytics();
});
```

`DISPATCH_QUEUE_PRIORITY_DEFAULT`是一个计算结果为 的宏`0`。您可以获得具有不同优先级的不同全局队列。第二个参数保留供将来使用，应始终为`0`.

# javascript - 我怎样才能循环我的计时器？

> ID：10797212
> 
> 赞同：0
> 
> 时间：2012-05-29T10:19:28.050
> 
> 标签：javascript, loops, timer, countdown

我已经尝试了半天来循环这个倒计时功能。我不想创建不同的倒计时。我该如何循环它？请注意，这是一个间隔为 1 秒的倒数计时器。我的网站在这里[http://jian.comoj.com/](http://jian.comoj.com/)

```
<script type="text/javascript">

    setInterval('countdown()',1000);

    function countdown(){

        var now = new Date();

        var unix_now= now.getTime()/1000;

        unix_now= Math.floor(unix_now);

        var sec = <?php echo $end_time[0]; ?> - unix_now;

        if(sec<=0){
            clearInterval(stop);

        }

        var min = Math.floor(sec / 60);
        var hour = Math.floor(min / 60);

        hour %= 24;
        min %= 60;
        sec %= 60;

        document.getElementById(0).innerHTML= hour+":"+min+":"+sec;

    }

    setInterval('countdown1()',1000);

    function countdown1(){

        var now = new Date();

        var unix_now= now.getTime()/1000;

        unix_now= Math.floor(unix_now);

        var sec = <?php echo $end_time[1]; ?> - unix_now;

        if(sec<=0){
            clearInterval(stop);

        }

        var min = Math.floor(sec / 60);
        var hour = Math.floor(min / 60);

        hour %= 24;
        min %= 60;
        sec %= 60;

        document.getElementById(1).innerHTML= hour+":"+min+":"+sec;

    }

    setInterval('countdown2()',1000);

    function countdown2(){

        var now = new Date();

        var unix_now= now.getTime()/1000;

        unix_now= Math.floor(unix_now);

        var sec = <?php echo $end_time[2]; ?> - unix_now;

        if(sec<=0){
            clearInterval(stop);

        }

        var min = Math.floor(sec / 60);
        var hour = Math.floor(min / 60);

        hour %= 24;
        min %= 60;
        sec %= 60;

        document.getElementById(2).innerHTML= hour+":"+min+":"+sec;

    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:27:36.960

您还需要放入`setInterval`倒计时功能。类似于递归调用的东西。

# perl - 从 Net::LDAP 到“过滤”列表的列表哈希的 Perl 哈希

> ID：10797213
> 
> 赞同：0
> 
> 时间：2012-05-29T10:19:38.893
> 
> 标签：perl, ldap

Perl的[`Net::LDAP`](https://metacpan.org/module/Net%3a%3aLDAP)模块提供了一个 Net::LDAP::Search 对象。它的`as_struct`方法返回下面的结构。

多个条目为

```
$entry{dn=...} = 
ref {cn} = ref {name}
ref {l} = ref {city}
ref{mail} = ref {xxxxxx} 
```

一个例子：

```
uid=pieterb,ou=People,dc=example,dc=org {key of first hash = dn in ldap}
uid=pieterb {key=uid}
cn=Pieter B. {key=cn}
uidNumber=1000 {key=uidNumber}
gidNumber=4000 {key=gidNumber}

uid=markc,ou=People,dc=example,dc=org {key of first hash = dn in ldap }
uid=markc {key=uid}
cn=Mark Cole {key=cn}
uidNumber=1001 {key=uidNumber}
gidNumber=4000 {key=gidNumber} 
```

但是，接口使用[`UI::Dialog`](https://metacpan.org/module/UI%3a%3aDialog)需要以下格式的列表（radiolist/checklist），数据来自 LDAP 服务器中的属性值

```
list => [ 
'Pieter B.', ['uid=pieterb,ou=People,dc=example,dc=org',0],
'Mark Cole', ['uid=markc,ou=People,dc=example,dc=org',0],
'cn_value(openldap)',['dn_value',0],
'givenname_value(activedirectory)',['dn_value',0]
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:46:39.183

很难猜出您想要什么，但我认为这是 LDAP 属性名称与其值的列表。

你应该看看[`Data::Dumper`](https://metacpan.org/module/Data%3a%3aDumper)并展示您正在处理的数据结构。

*如果您从搜索中获得的数据包含多个专有名称*，您不会提及该怎么做*，但是此代码仅采用第一个 DN 和属性值列表中的第一个值来生成一个列表列表。*

 *我毫不怀疑这不是您所需要的，如果您更好地指定您的要求，我们将能够提供进一步的帮助。

```
my $data = $msg->as_struct;
my $entry = (values %$data)[0];

my @attributes = map {
  $_, [$entry->{$_}[0], 0]
} keys %$entry;

$dialog->checklist(list => \@attributes); 
```*

# switch-statement - 嵌入式系统的状态机

> ID：10797216
> 
> 赞同：4
> 
> 时间：2012-05-29T10:19:49.920
> 
> 标签：switch-statement, state-machine

我已经使用 C 的 switch 语句为嵌入式系统实现了一个简单的状态机。我知道如果我使用带有查找表的函数指针会更好，但我将其保存为下一步。

我的状态机有以下状态：

1.  启动（初始状态）
2.  启动错误。
3.  空闲（系统仅在此状态下检查输入。它不会更新显示或其他任何内容。它只是“空闲”）。
4.  检查（这是实际应用）
5.  程序
6.  复制到内存

当系统启动时，它进入配置端口的启动状态，初始化显示并与连接在 SPI 总线上的 IC 握手，以确保一切正常。如果是，则系统进入空闲状态。如果不是，它进入启动错误状态，在 LCD 上显示一个错误，标记一个变量，然后进入空闲状态。

在空闲状态下，程序轮询微控制器上的 3 个引脚以检查 3 个按钮（检查、程序、复制到内存）中的一个是否被按下。根据按下的按钮，它会进入适当的状态，执行一些代码，更新 LCD，然后返回空闲状态。注意：如果系统中存在硬件故障，系统不关心是否按下按钮。启动错误状态标记一个名为 hardware_fault 的变量，如果设置该变量，则确保空闲状态不会打扰轮询任何输入按钮。

这是我第一次实现状态机，我只是不确定这是否是一个好的设计。我还没有真正看到 FSM 在空闲状态下轮询输入的任何示例。相反，似乎大多数示例本质上是相当连续的（例如计数器）。所以，我的问题是，我的设计合理吗？它确实有效，但正如这里的每个人都知道的那样，有糟糕的设计，然后有好的设计。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T19:46:16.370

您应该将代码从 switch 语句中重构出来，并使用您提到的转换表。围绕开关的代码无法扩展、混乱并且很快变得难以阅读和更新。

为了回答你的问题，我想说大多数状态机实际上和你的一样：它们对事件做出反应（在你的情况下是民意调查）。如果它们是纯顺序的，根本没有事件，它们是用于特殊用途的，比如实现一个正则表达式......

需要注意的是，`Idle`状态相当于状态机库的运行时核心：它拦截事件并将它们发布到状态机。使用状态机库，它将对客户端代码“隐藏”，而像您这样的基本实现必须明确地进行事件轮询。

现在是一个设计批评：一般来说应该避免全局变量，尤其是在状态机中。State`Idle`不应该知道`hardware_fault`全局变量。对于状态机，人们应该努力通过添加状态（当它有意义时！）将全局变量“嵌入”到状态机本身中。对（分层）状态机的一个很好的介绍和基本原理的解释在[这里](http://eetimes.com/design/embedded/4008247/A-crash-course-in-UML-state-machines-Part-1)。

使用 UML 表示法（参见[此处](http://www.objectmentor.com/resources/articles/umlfsm.pdf)的教程），您的状态机是： ![状态机 v1](../Images/d590328c883c30c1d076d59ac4f9019e.png)

一个简单的重构来完全删除`hardware_fault`依赖项是： ![状态机 v2](../Images/731631cf4c41bd9abbda0c9b44b3c548.png)

也就是说，我们只是永远停留在`StartupError`状态中，而不转换到`Idle`.

ε (epsilon) 表示一个空转换，即一旦与源节点关联的活动结束就进行转换，没有任何事件。这就是您所说的“顺序”状态机。

我还包括了第一个图表的来源（第二个非常相似），它是用非常简单和强大的[PlantUML](http://plantuml.sourceforge.net/)生成的。

```
@startuml

skinparam shadowing false
title Embedded v1

state Startup
state StartupError
state Idle
state Program
state Check
state Copy

Startup : entry/ init HW
StartupError: entry/\n  display error\n  hw_fault = true
Idle : do/ if not hw_fault: poll
Program : do/ program
Check : do/ check
Copy : do/ copy

[*] -> Startup

Startup -> StartupError : ε [error]
Startup --> Idle : ε [not error]

StartupError --> Idle : ε

Idle --> Program : program_btn
Idle --> Check : check_btn
Idle --> Copy : copy_btn

Program --> Idle : ε

Check --> Idle : ε

Copy --> Idle : ε

@enduml 
```

# android - 覆盖 onBackPressed() 没有响应

> ID：10797236
> 
> 赞同：0
> 
> 时间：2012-05-29T10:21:02.543
> 
> 标签：android

我正在开发一个类似于 'Diaro' 应用程序和 Android 上的 'MyDiary' 应用程序的应用程序。

我的应用程序中的主要活动是控制所有其他活动的 DiaryActivity。按下添加按钮时，会打开一个新活动，用户在编辑文本字段中输入数据，按下后退按钮时，项目将保存在数据库中并显示在列表中，（列表是主要活动）。

现在主要活动的问题是，在按下后退按钮时，应用程序不是关闭，而是将控制权带回主要活动，只是这一次，最后一个条目不存在，也只是现在后退按钮再次出现，应用程序关闭。

我认为可能的解决方案可能是覆盖 onBackPressed() 函数并在其中编写 finish() 函数，但这不起作用。

活动的代码在这里。

[http://pastebin.com/ugMdVsbW](http://pastebin.com/ugMdVsbW)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:23:06.503

```
@Override
public void onBackPressed() {
        super.onBackPressed();
        finish();
} 
```

不用写`finish()`，

`super.onBackPressed()`将完成这项工作。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:52:41.850

我使用此代码并且工作正常，

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
   if ((keyCode == KeyEvent.KEYCODE_BACK))
   {       
      back();
   }

   return super.onKeyDown(keyCode, event);
}

public void back()
{
   startActivity(new Intent(this, Home.class));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:30:19.607

我正在使用以下代码。尝试使用此代码

```
@Override 
    public boolean onKeyDown(int keyCode, KeyEvent event){ 

        if ((keyCode == KeyEvent.KEYCODE_BACK)) { //stop your music here
             // To exit application
                 finish();
        } 
        return super.onKeyDown(keyCode, event); 
    } 
```

# ember.js - 使用 Ember.js 创建 Web 应用程序

> ID：10797238
> 
> 赞同：8
> 
> 时间：2012-05-29T10:21:10.927
> 
> 标签：ember.js

我刚刚发现了 Ember.js，它看起来很有趣。我想创建一个小笔记应用程序来学习如何使用它。

我想到的基本布局是有分类，每个分类都可以有注释。对于 UI，将有一个带有可单击类别的侧边栏，并且类别的注释将显示在另一侧。

但我无法弄清楚整个模板/布局系统。模板系统本身看起来很简单（与 Rails 视图很相似）。但是你为布局做了什么？以 Rails 为例，您可以很容易地定义布局，然后将各个视图添加到其中。Ember.js 对我来说似乎不清楚。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T18:22:51.593

除了**@rharper**提到的方法之外，您还可以使用`outlet`帮助程序，它已在提交[5a4917b](https://github.com/emberjs/ember.js/commit/5a4917b9aaee4f53c8196f9b3349ff775774dae2)中引入。

[你可以在这里](http://jsfiddle.net/pangratz666/Kqvx2/)找到一个例子：

**车把**：

```
<script type="text/x-handlebars" data-template-name="main" >
    Main View
    {{outlet contentView}}
    {{outlet footerView}}
</script> 
```

**JavaScript**：

```
App.viewController = Ember.Object.create({
    footerView: Ember.View.create({
        templateName: 'footer'
    }),
    contentView: Ember.View.create({
        templateName: 'content'
    })
});

Ember.View.create({
    controllerBinding: 'App.viewController',
    templateName: 'main'
}).append();

Ember.run.later(function(){
    App.viewController.set('contentView', Ember.View.create({
        templateName: 'new-content'
    }));
}, 1000); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:37:01.007

对于简单的包装样式布局，您可以使用 Ember 的内置[布局支持](http://docs.emberjs.com/symbols/Ember.View.html#layouts)。它只支持一个`{{yield}}`，因此对于您的应用程序来说可能太有限了。

如需更强大的功能，请查看 ghempton 的**[Ember 布局](https://github.com/ghempton/ember-layout)**。我想你会发现它与 Rails 布局非常相似。他在[这里有一个活生生的例子](http://ghempton.github.com/ember-layout-example/#)。

最后，在 Ember 中创建视图层次结构相当容易（代替或除了使用布局之外）。[Tom Dale在这里](http://tomdale.net/2012/02/ember-js-resources/)收集了大量的 Ember 资源和示例。

# facebook - Facebook 页面表单

> ID：10797239
> 
> 赞同：0
> 
> 时间：2012-05-29T10:21:18.097
> 
> 标签：facebook, api, dialog

我正在尝试创建一个表单，如果该页面的所有者安装了特定的应用程序，当用户单击该页面时，该表单将在该页面（而不是个人资料）的顶部弹出。

弹出窗口将要求用户在与页面交互之前关闭弹出窗口/完成表单。

显然这曾经是可能的，现在有人知道该怎么做吗？

我怀疑我所追求的是一个可以在页面加载时触发的自定义对话框。在 facebook 上这样的事情是可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:43:53.640

这是不可能的。Facebook 页面不再有所谓的“默认登陆标签”，它将非粉丝用户引导到特定的标签应用程序。即便如此，这种弹出行为可能对用户来说是不受欢迎的，可能被平台政策禁止，并且可能被大多数用户浏览器阻止。

您仍然可以创建一个页面选项卡应用程序，该应用程序可以在您希望的任何类型的限制之后进行门控，但是任何用户仍然可以看到常规页面内容。

# ruby-on-rails - 如何根据登录用户在 ROR 中的角色限制控制器访问

> ID：10797243
> 
> 赞同：1
> 
> 时间：2012-05-29T10:21:49.957
> 
> 标签：ruby-on-rails, controller, authorization, role-base-authorization

伙计们，我的数据库中有**4 个表**，如下所示

*   **函数**{id, 名称
*   **Admin_Users** {Id，电子邮件，密码，role_id}
*   **角色**{id, name}
*   **Role_Functions** {id, role_id, function_id}

我正在使用**RoR**作为 Web 开发环境。

这里，

我想根据登录用户的角色（role-base-authorization）限制控制器访问，我该怎么做？它需要一张新桌子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:27:21.310

您可以使用[康康](https://github.com/ryanb/cancan)宝石。这是一个很酷的宝石。

# apache-flex - 将图表数据导出到 excelsheet

> ID：10797247
> 
> 赞同：0
> 
> 时间：2012-05-29T10:22:10.877
> 
> 标签：apache-flex, charts, blazeds, advanceddatagrid

我想将图表数据（来自 java 服务）导出到 excel。我需要为此创建数据网格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:26:58.310

My preference, when needing to provide excel output, is to send the data to the server and generate the excel sheet there.

There is one library, named [as3xls](http://code.google.com/p/as3xls/) which claims to read and write excel files from AS3; so I would recommend you look into that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T03:08:10.417

一种选择是在客户端使用 as3xls ，我在这里的食谱中为此创建了一个示例：[Import/Export](http://cookbooks.adobe.com/post_Import_Export_data_in_out_of_a_Datagrid_in_Flex-17223.html)。您还可以在 Java 层上使用 Apache POI，因为它为文档生成提供了更多支持。

您无需为图表创建 Datagrid。您的图表必须使用一些系列（可能是一个数组）来显示该数据。如果您只是想将该数据导出到 excel 中，则可以从中创建一个 ArrayCollection 并使用 as3xls。如果您的数据包含原生字母/字符，那么 as3xls 可能会有一些问题。在这种情况下，最好在服务器端进行。

# iphone - 我可以将用户输入的电话号码发送到 iPhone 上的服务器吗？

> ID：10797248
> 
> 赞同：0
> 
> 时间：2012-05-29T10:22:18.193
> 
> 标签：iphone

我知道 Apple 不允许开发人员读取设备的电话号码并将其发送到服务器。

**但是，如果用户将其输入到应用程序**中，我找不到任何关于是否可以发送当前设备的电话号码的信息。

我想让人们只使用他们的电话号码作为标识符（即不需要电子邮件地址）注册我的服务，并向他们发送带有密码的 SMS 以验证他们的身份。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:30:16.330

你绝对可以做到。您无法读取电话号码的原因是它需要私有 API 调用。

一种更加用户友好的方法可能是允许用户从通讯录中选择他们的电话号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:30:15.523

这就是维伯所做的。您可以将任何用户数据发送到您的服务器 - 只要用户确切知道那是什么数据并允许您这样做。

# jboss - 如何在 jboss 7 中实现会话复制

> ID：10797253
> 
> 赞同：1
> 
> 时间：2012-05-29T10:22:45.957
> 
> 标签：jboss, jboss7.x

我已经制作了两个独立`jboss 7`实例，并且可以使用`mod_jk`.

现在，我想在我的应用程序中实现会话复制。我搜索了互联网，发现添加`<distributable/>`标签`web.xml`可以启用会话复制。不幸的是，它对我不起作用。

**例如：**如果我启动两个 jboss 实例，运行我的应用程序并关闭创建会话的实例，第二个节点（实例）会创建一个新会话。结果，会话数据丢失，我必须再次登录我的应用程序。

任何人都可以向我解释`jboss 7`会话复制工作所需的配置吗？

# facebook - 开发应用程序，不会在 iOS 原生 FB 应用程序中运行

> ID：10797256
> 
> 赞同：0
> 
> 时间：2012-05-29T10:23:17.483
> 
> 标签：facebook, ssl, canvas, https, proxy

我正在开发一个 FB 应用程序，该应用程序需要能够在通常的桌面 FB 站点（带有周围的 FB 制服）上运行，在移动设备浏览器上（我使用 HTML5 和 Bootstrap 来调整布局根据设备），以及在 iOS 和 Android 上的原生移动 Facebook 应用程序中。

特别是最后一种情况 - 我正在尝试在我的 MBP 上进行开发，并且我正在使用指向我旁边的 Web 服务器框的本地域名（在主机中设置）。为了在 iOS 设备上进行这项工作，我让 Charles 在我的 MBP 上作为代理运行，并更新了 iPhone wifi 代理设置，以便所有 iPhone http 请求都通过 Charles 传输，因此 iPhone 也可以使用本地化域姓名。

通过移动 FB 网站进行测试时，如果我导航到我创建的测试应用程序，FB 移动网站会在新的 safari 选项卡中启动画布，并且工作正常。但是，在 iOS 原生 FB 应用程序中，当我导航到该应用程序时，我会收到一个

> “抱歉，出了一些问题”

message 代替画布内容的位置（参见下面链接的图片）。

[iPhone 屏幕截图](http://dl.dropbox.com/u/7810832/Photo%2029-05-2012%2011%2016%2048.png)

由于 FB 现在强制使用 https 画布 URL，因此我正在使用我的 Web 服务器的内置自我认证证书，以便可以提供 https。在 safari 浏览器中，我最初收到一个不受信任的证书警告，我接受了它，然后使用我的 html 就没有问题了。

有没有其他人看到这个问题并知道如何解决它？我假设 FB 应用程序在不受信任的证书方面存在问题，但由于本机应用程序正在调用本地服务（通过代理）URL，我不明白为什么会有问题（可以将 FB 应用程序设置为不接受不受信任的证书？）。

我真的需要在 iOS 应用程序中测试我的代码，否则我将无法向客户证明 FB 可以使用我的代码。

干杯

李

（ps 我尝试使用 3G 而不是本地 wifi 代理，以防出现问题，但它仍然无法在本机 iOS FB 应用程序中工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:10:41.787

原来问题是由于我在应用设置中指定的移动 URL 设置为使用**https**。大概这是因为本机应用程序不会接受不受信任的 SSL 证书（这也可能是它在浏览器中很好的原因，因为可以接受不受信任的证书）。

将协议更改为 http 解决了该问题。奇怪的是，Facebook 并不坚持使用 https 作为移动应用程序的 URL，所以使用 http 不是问题。

# charts - Google 图表 API 样式工具提示

> ID：10797260
> 
> 赞同：7
> 
> 时间：2012-05-29T10:23:37.360
> 
> 标签：charts, tooltip, google-visualization

有没有办法在 Google 图表 API 中设置工具提示的样式？我设法只使用[`tooltip.textStyle`](https://developers.google.com/chart/interactive/docs/gallery/scatterchart#Configuration_Options). 那么是否有任何解决方案可以将**白色背景**更改为**其他颜色**（如图所示）：

![在此处输入图像描述](../Images/f87ad5ea2b7e6c33304c4ce4d6babfe7.png)

测试游乐场[http://jsfiddle.net/nyNAg/](http://jsfiddle.net/nyNAg/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T10:03:56.870

我通过偶然发现了一个解决方案：

```
<style>
path {
  fill: yellow;
}
</style> 
```

无论如何，我在谷歌图表 API 中没有找到任何背景配置选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-17T06:39:17.310

通过在您的谷歌图表代码选项中编写此代码来启用由 HTML 处理的工具提示：`tooltip: { isHtml: true }`(,) 如果需要，请添加逗号。:)

现在您可以使用 HTML 和 css 设置工具提示样式。:)

/ *CSS 样式*/

要设置工具提示框的样式：

```
div.google-visualization-tooltip {} 
```

设置字体大小、颜色等内容的样式

```
div.google-visualization-tooltip > ul > li > span {} 
```

`!important`需要时使用；）

[http://jsfiddle.net/nyNAg/66/](http://jsfiddle.net/nyNAg/66/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T10:26:52.827

可以用自定义 HTML 完全替换标签。它可能有点复杂，但可以让您完全控制内容和风格。请参阅[https://developers.google.com/chart/interactive/docs/customizing_tooltip_content#custom_html_content](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content#custom_html_content)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:47:02.700

由于 Google Chart Tools API 通过托管在其服务器上的 iframe 实现其 SVG 图表，因此根据[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您不得访问或修改另一个域的内容，除非在向客户端发送响应之前通过服务器端操作。

鉴于此，我不确定您是如何设法更改文本颜色的——也许是浏览器错误？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T08:58:59.577

另一种选择可能是覆盖内联样式规则，例如

li.google-visualization-tooltip-item span[style] { font-weight: normal !important; }

[http://css-tricks.com/override-inline-styles-with-css/](http://css-tricks.com/override-inline-styles-with-css/)

# javascript - 缓慢/无响应/卡住的 typekit 脚本

> ID：10797262
> 
> 赞同：3
> 
> 时间：2012-05-29T10:23:46.720
> 
> 标签：javascript, font-face, typekit

我在我的网站上安装了 typekit，通常的两行 js 就在开头的 head 标签之后，但它非常慢/对字体加载没有响应，这可以通过刷新页面完全解决，之后 typekit 字体加载完美而真实迅速地。但从用户的角度来看，他们永远不会知道这样做，因此他们将使用默认字体。

我将 typekit js 作为在元标记之前和加载 jquery、jquery-ui 和其他脚本之前的开头标记下的第一件事。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:26:30.860

似乎对我有用的是以异步模式加载脚本 - 正如 typekit 博客上所指定的那样，我在下面复制了它

标准异步模式

第一种模式是最基本的。它基于 Steve Souders 等网络性能专家编写的模式，并用于其他 JavaScript 嵌入代码，如 Google Analytics。

```
<script type="text/javascript">
  TypekitConfig = {
    kitId: 'abc1def'
  };
  (function() {
    var tk = document.createElement('script');
    tk.src = '//use.typekit.com/' + TypekitConfig.kitId + '.js';
    tk.type = 'text/javascript';
    tk.async = 'true';
    tk.onload = tk.onreadystatechange = function() {
      var rs = this.readyState;
      if (rs && rs != 'complete' && rs != 'loaded') return;
      try { Typekit.load(TypekitConfig); } catch (e) {}
    };
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(tk, s);
  })();
</script> 
```

此模式使用单个内联标记向页面动态添加新的脚本元素，从而加载工具包而不会阻止进一步呈现。附加了一个事件侦听器，该侦听器在脚本完成加载后调用 Typekit.load()。如何使用它：

将此代码段放在顶部，以便尽快开始下载。编辑突出显示的 TypekitConfig 对象并将默认值替换为您自己的套件 ID。您可以将 JavaScript 字体事件回调添加到 TypekitConfig 对象。

优点：

异步加载工具包（加载时不会阻止进一步的页面呈现）。

缺点：

向您的 html 页面添加比标准 Typekit 嵌入代码更多的字节。在无法使用字体事件控制或隐藏的所有浏览器中导致初始 FOUT。

# javascript - 图像预加载和内存问题

> ID：10797263
> 
> 赞同：0
> 
> 时间：2012-05-29T10:23:54.057
> 
> 标签：javascript, asp.net, jquery, image-preloader

我有一个图片库。当我单击特定画廊的缩略图图像时，它将加载实际大小的图像（大小〜 800KB）。用户还可以选择在按下键盘左右箭头键时查看上一个和下一个图像。为了获得更好的性能，我在这样的 java 脚本中创建了一个预加载方法

```
function preload(src)
{
 var image = new Image();
image.src = src; 
} 
```

当用户按下左/右键时，我将调用此 preload() 方法来预加载下一张和上一张图像。我面临的问题是

每个预加载方法调用都会增加内存利用率。当我查看超过 20 张图像时，Firefox 正在关闭。如何解决这个内存问题。我怎样才能在这里实现更好的图像预加载机制。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:31:07.463

也许您可以将图像保存在数组中，一段时间后用新图像替换它们。像这样;

1.  填写您的缩略图数组
2.  当您的用户滚动时，替换数组中不相关的缩略图
3.  利润！！

# sqlite - 如何在 sqlite 中选择 5.0.0.13 而不是 5.0.0.2（我想要 5.0.0.13 > 5.0.0.2）

> ID：10797264
> 
> 赞同：1
> 
> 时间：2012-05-29T10:23:56.057
> 
> 标签：sqlite

Sqlite DB中有两条数据

```
5.0.0.13
5.0.0.2 
```

我想要的是 5.0.0.13

我的数据规则比 0.2 大 0.13，就像 13 > 2

但如果我选择 max(version)，它会返回 5.0.0.2

我怎么能选择 5.0.0.13 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:44:54.847

您可以使用 C API定义自己的[排序规则。](http://www.hwaci.com/sw/sqlite/c3ref/create_collation.html)

# javascript - window.open 之后的 Javascript 调用函数

> ID：10797266
> 
> 赞同：13
> 
> 时间：2012-05-29T10:24:01.793
> 
> 标签：javascript, load, window

我试图在我的 window.open 函数完全加载后调用一个函数。

但是，使用 onload 函数被调用得太早了。被点击的 URL 会打开一个 Excel 电子表格，下载可能需要 2 秒到 1 分钟。

一旦调用了 window.open 函数，就会调用 onload 函数。但是，我需要知道 Excel 文档何时打开——而不是 URL 何时被打开。

我试过设置一个间隔，但没有被调用：

```
w = window.open(url,'_parent',false);   

w.onload = function(){
    console.log('here');
    setInterval(function(){
        alert('Hi');
    },10); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:18:21.530

First note that in order to do this without being blocked because of cross-domain restrictions (or without having to parameterize CORS headers on your server), you must :

*   serve both your main page and the popup content (your excel file) from the same domain, and the same port
*   open your main page in `http://` and not in `file://`

If those conditions are respected, the best solution is to use jquery as its [load](http://api.jquery.com/ready/) function waits "until all assets such as images have been completely received" :

```
<html>
    <head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
<body>
<script>
var popup = window.open('popup.html');
$(popup.document).load(function() {
    alert('loaded');
    // do other things
});
</script>
</body>
</html> 
```

Be careful with your global scheme : each browser/configuration may do something different when you think they "open" the file. There's no way to detect with a simple `open` if they decided to dismiss it, hadn't the proper plugin, simply downloaded it.

# javascript - 从 fancybox iframe 中查找现场元素

> ID：10797270
> 
> 赞同：3
> 
> 时间：2012-05-29T10:24:17.017
> 
> 标签：javascript, jquery, asp.net-mvc-2, fancybox

我正在尝试从fancybox 更新我网站上的元素。在fancybox中，我做了一个`$.post()`并取回`html`我想要填充到我页面上的div中的数据。我打开一个`iframe`窗口，`html`下面的脚本就在里面`iframe`。它无法从fancybox 中找到它，所以任何人都知道如何找到不在fancybox 内的元素的想法或解决方案`iframe`？

```
$('.add-to-cart').click(function () {
    var $this = $(this).closest('form');

    $.post($this.attr('action'), { quantity: $this.find('#quantity_id').val() }, function (data) {
        parent.$.fancybox.close();
        $('#container').html(data);
    }, 'html');

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:28:30.470

试试这个：

```
$('#container', $(parent.document)).html(data); 
```

# php - PHP，使用 file_put_contents 上传图像制作 0 字节文件

> ID：10797274
> 
> 赞同：0
> 
> 时间：2012-05-29T10:24:39.190
> 
> 标签：php

使用 file_put_contents 上传图像会生成 0 字节文件。

这是我使用的代码。我提取 facebook 图片 url 并将其放入 web 服务器。

```
$fb_image_url = 'https://example.com/229282.jpg'

$filename = substr($fb_image_url, strrpos($fb_image_url, '/') + 1);

file_put_contents('upload/user_pic/original/'.$filename, file_get_contents($fb_image_url)); 
```

在我这样做之后，服务器成功接收文件名，但它是 0 字节。

我检查了 php.ini，并且 allow_url_fopen 为 ON。

上传文件夹权限也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:31:32.477

我只是将该 URL 放入浏览器：

```
https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/274661_1171545457_6475606_n.jpg 
```

并收到**404 Not Found**作为响应。这可以解释为什么你在本地得到空文件。我强烈建议您首先加载数据，验证您收到的内容，然后，如果验证通过，则将其保存在本地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:41:11.167

要从 facebook 复制图像，脚本/php 程序需要相同的权限。如果程序/ FB API 未通过验证/权限检查，则 FB 不允许下载任何图像。
看起来您的应用程序无权从 Facebook 下载/复制此图像，这就是您获得 0 字节的原因。尝试让 PUBLIC 访问图像并在处理图像时保持 FB 帐户登录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:50:37.017

这是解决方案。我的 Facebook 个人资料地址有问题。

```
$fb_image_url = 'https://graph.facebook.com/'.$facebook_id.'/picture?type=large';

$filename = $fb_id.'_'.time().'.jpg';

$result = file_get_contents($fb_image_url);

file_put_contents('upload/user_pic/original/'.$filename, $result); 
```

有了这个_它工作得很好。是的！谢谢大家！

# linux - 运行 makefile 时位置被替换

> ID：10797275
> 
> 赞同：1
> 
> 时间：2012-05-29T10:24:39.310
> 
> 标签：linux, makefile

makefile的代码片段：

```
ERROR_PARSER_YACC = $(SRCDIR)/ermparseyac.y
ERROR_PARSER_LEX  = $(SRCDIR)/ermparselex.l

ERM_OBJS = \
    $(OBJDIR)/ermparseyac.o \
    $(OBJDIR)/ermparselex.o \
    $(OBJDIR)/ermclient.o \
    $(OBJDIR)/ermcommit.o \
    $(OBJDIR)/erminit.o \
    $(OBJDIR)/ermlog.o \
    $(OBJDIR)/ermmcp.o \
    $(OBJDIR)/ermsyslog.o \
    $(OBJDIR)/ermparse.o \
    $(OBJDIR)/ermreport.o

$(ERM_OBJS):    $(SRCDIR)/$(@F:.o=.c)
                @echo .... Compiling $(@:.o=.c)
                $(IDA_CC) $(SRCDIR)/$(@F:.o=.c) -o $@ 
```

SRCDIR 的值为`"/home/wholesale/children/dev5/comps/erm/src".`

当我运行 makefile 时，我收到以下错误：

```
.... Compiling /home/wholesale/children/dev5/comps/erm/obj/ermparselex.c
cc  -g                         -DANSI -DORA817 -DTRACE_ON -DIDA_VERSION='"ISP-RG-V5.10.7GEN2A"' -DNO_MCP -DBUILDING_ERP  -I/home/wholesale/children/dev5/comps/erm/include -I/home/wholesale/children/dev5/comps/erm/src -I/home/wholesale/children/dev5/comps/erm/module_test  -I/home/wholesale/children/dev5/comps/erm/include  -I/home/wholesale/children/dev5/comps/cfm/include    -c /home/wholesale/children/dev5/comps/erm/src/ermparselex.c -o /home/wholesale/children/dev5/comps/erm/obj/ermparselex.o

/pf24/wholesale/dvp/comps/erm/src/ermparselex.l:282: error: static declaration of âget_comment_lineâ follows non-static declaration
/pf24/wholesale/dvp/comps/erm/src/ermparselex.l:168: error: previous implicit declaration of âget_comment_lineâ was here 
```

我不明白makefile如何将位置“/home/wholesale/children/dev5/comps/erm/src”替换为不存在的不同位置“/pf24/wholesale/dvp/comps/erm/src/”在服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:35:32.850

您似乎将 make 输出与编译器输出混淆了。您显示的错误消息不是由 make 产生的，而是由您使用的任何编译器（可能是 gcc）产生的。

请注意，`ERROR_PARSER_LEX`assignemt to 是一个延迟分配。的值在`SRCDIR`每次使用时都会被扩展`ERROR_PARSER_LEX`。这或许可以解释为什么 的值`SRCDIR`看起来不像你认为的那样。

**编辑**

该问题似乎与您的 makefile 无关。Make 清楚地表明它 `/home/wholesale/children/dev5/comps/erm/src/ermparselex.c`作为源文件传递给编译器。

指向不同文件的错误消息可能意味着某些源文件包含 /pf24 中的某些内容。

gcc 选项在`-E`诊断此类问题时非常有用。用它替换`-o ...`选项，它将预处理的源代码输出到标准输出。这应该会显示哪个文件包含 /pf24 中的文件。

# perl - HTML 模板 - 哈希数组

> ID：10797279
> 
> 赞同：0
> 
> 时间：2012-05-29T10:25:00.797
> 
> 标签：perl, loops, perl-html-template

我有两个哈希数组：第一个包含当前时间间隔的值，第二个包含前一个时间间隔的值。

```
 @AoHcurrent=
( { node => "ABC", 
    link => "DEF", 
    time => "10:00", 
    value => "100", 
  }, 
  { 
    node => "FGH", 
    link => "IJK", 
    time => "10:00", 
    value => "200", 
   }, 
); 

@AoHprevious= 
( { node => "ABC", 
    link => "DEF", 
    time => "09:45",  
    value => "10", 
   }, 
   { node => "FGH", 
      link => "IJK", 
      time => "09:45", 
      value => "50", 
   }, 
); 
```

我现在想使用 HTML-Template 来呈现这些数据。就像是 ：

```
NODE LINK VALUE 
--------------------- 
ABC DEF 100(10) 
FGH IJK 200 (50) 
```

括号中的值代表之前的值。

```
my %html_template_parameters = 
 ( AOHCURRENT => \@AoHcurrent, 
   AOHPREVIOUS => \@AoHprevious, ); 

my $html_template=qq{Report.tmpl}; 
my $html_output=qq{Report.html}; 

htmlReport($html_template,$html_output,\%html_template_parameters); 
```

其中 htmlReport 是生成报告的函数

我需要有关定义 Report.tmpl 文件的指导。

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:03:28.727

另见[http://www.perlmonks.org/?node_id=972954](http://www.perlmonks.org/?node_id=972954)

我在那里举了一个例子，如何用 HTML::Template::Compiled 解决这个问题。

基本上你会像这样浏览参数存储：

```
[%= expr=".AOHPREVIOUS[__index__]{'value'}" %] 
```

或使用经典语法：

```
<TMPL_VAR expr=".AOHPREVIOUS[__index__]{'value'}" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:42:18.377

您不能仅使用 HTML::Template 使用 2 个单独的列表来做到这一点。尝试使用 HTML::Template::Expr 来维护将是一场噩梦。尝试将它们折叠成一个列表，在其中合并散列数据。

# c++ - 如何将 O(1) 中的数组归零？

> ID：10797284
> 
> 赞同：8
> 
> 时间：2012-05-29T10:25:22.807
> 
> 标签：c++, time-complexity

有没有办法将时间复杂度为 O(1) 的数组归零？很明显，这可以通过for-loop，memset来完成。但它们的时间复杂度不是 O(1)。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-29T11:02:29.183

**是的**

但是不是任何数组。它需要一个专门为此工作的数组。

```
template <typename T, size_t N>
class Array {
public:
    Array(): generation(0) {}

    void clear() {
        // FIXME: deal with overflow
        ++generation;
    }

    T get(std::size_t i) const {
        if (i >= N) { throw std::runtime_error("out of range"); }

        TimedT const& t = data[i];
        return t.second == generation ? t.first : T{};
    }

    void set(std::size_t i, T t) {
        if (i >= N) { throw std::runtime_error("out of range"); }

        data[i] = std::make_pair(t, generation);
    }

private:
    typedef std::pair<T, unsigned> TimedT;

    TimedT data[N];
    unsigned generation;
}; 
```

原理很简单：

*   `generation`我们使用属性定义一个纪元
*   当一个项目被设置时，它被设置的时代被记录下来
*   只能看到当前纪元的项目
*   因此清除等同于增加纪元计数器

该方法有两个问题：

*   存储增加：对于每个项目，我们存储一个 epoch
*   代计数器溢出：存在最大时期数

后者可以使用真正的大整数来阻止（`uint64_t`以更多存储为代价）。

前者是一个自然结果，一种可能的解决方案是使用存储桶来淡化问题，例如将多达 64 个项目关联到单个计数器和一个位掩码，以标识在该计数器内有效的项目。

* * *

**编辑**：只是想回到桶的想法。

原始解决方案**每个元素的开销为 8 字节（64 位）**（如果已经 8 字节对齐）。根据存储的元素，它可能是也可能不是什么大问题。

如果是大问题，想法是使用存储桶；当然，就像所有权衡一样，它会进一步减慢访问速度。

```
template <typename T>
class BucketArray {
public:
     BucketArray(): generation(0), mask(0) {}

     T get(std::size_t index, std::size_t gen) const {
         assert(index < 64);

         return gen == generation and (mask & (1 << index)) ?
                data[index] : T{};
     }

     void set(std::size_t index, T t, std::size_t gen) {
         assert(index < 64);

         if (generation < gen) { mask = 0; generation = gen; }

         mask |= (1 << index);
         data[index] = t;
     }

private:
     std::uint64_t generation;
     std::uint64_t mask;
     T data[64];
}; 
```

请注意，这个包含固定数量元素的小数组（我们实际上可以对其进行模板化并静态检查它是否低于或等于 64）只有 16 个字节的开销。这意味着我们**每个元素有 2 位的开销**。

```
template <typename T, size_t N>
class Array {
    typedef BucketArray<T> Bucket;
public:
    Array(): generation(0) {}

    void clear() { ++generation; }

    T get(std::size_t i) const {
        if (i >= N) { throw ... }

        Bucket const& bucket = data[i / 64];
        return bucket.get(i % 64, generation);
    }

    void set(std::size_t i, T t) {
        if (i >= N) { throw ... }

        Bucket& bucket = data[i / 64];
        bucket.set(i % 64, t, generation);
    }

private:
    std::uint64_t generation;
    Bucket data[N / 64 + 1];
}; 
```

我们将空间开销降低了... 32 倍。现在该数组甚至可以用于存储`char`例如，而在此之前它会被禁止。代价是访问变慢了，因为我们得到了一个除法*和*模数（什么时候我们将得到一个标准化的操作，一次返回两个结果？）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-29T10:51:11.843

您不能修改`n`内存中的位置小于`O(n)`（即使您的硬件足够小`n`，可能允许恒定时间操作将某些对齐良好的内存块归零，例如闪存）。

但是，如果练习的对象有点横向思维，那么您可以编写一个表示“稀疏”数组的类。稀疏数组的一般思想是您保留一个集合（可能是 a `map`，尽管取决于使用情况，它可能不是全部），并且当您查找索引时，如果它不在基础集合中，则返回`0`.

如果您可以在 O(1) 中清除基础集合，那么您可以在 O(1) 中将稀疏数组归零。清除 a`std::map`通常不是地图大小的恒定时间，因为所有这些节点都需要被释放。但是您可以设计一个可以`O(1)`通过将整个树从“我的地图内容”移动到“我为将来使用而保留的节点树”来清除的集合。缺点只是这个“保留”空间仍然被分配，有点像 a`vector`变小时发生的情况。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-29T10:40:56.920

只要您接受一个非常大的常数因子，当然可以在 O(1) 中将数组归零：

```
void zero_out_array_in_constant_time(void* a, size_t n)
{
    char* p = (char*) a;
    for (size_t i = 0; i < std::numeric_limits<size_t>::max(); ++i)
    {
        p[i % n] = 0;
    }
} 
```

无论数组的大小如何，这将始终采取相同数量的步骤，因此它是 O(1)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-29T10:33:25.870

不。

您不能在少于 O(N) 的时间内访问 N 元素集合的每个成员。

正如 Mike Kwan 所观察到的，您可能会将成本从运行时转移到编译时，但这不会改变操作的计算复杂性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T11:02:25.680

显然不可能在固定的时间长度内初始化任意大小的数组。但是，完全有可能创建一个类似数组的 ADT，它可以在整个使用过程中分摊初始化数组的成本。然而，通常的结构需要 3 倍以上的存储空间。到白衣：

```
template <typename T, size_t arr_size>
class NoInitArray
{
    std::vector<T> storage;

    // Note that 'lookup' and 'check' are not initialized, and may contain
    // arbitrary garbage.
    size_t lookup[arr_size];
    size_t check[arr_size];
public:
    T& operator[](size_t pos)
    {
        // find out where we actually stored the entry for (*this)[pos].
        // This could be garbage.
        size_t storage_loc=lookup[pos];

        // Check to see that the storage_loc we found is valid
        if (storage_loc < storage.size() && check[storage_loc] == pos)
        {
            // everything checks, return the reference.
            return storage[storage_loc];
        }
        else
        {
            // storage hasn't yet been allocated/initialized for (*this)[pos].
            // allocate storage:
            storage_loc=storage.size();
            storage.push_back(T());

            // put entries in lookup and check so we can find 
            // the proper spot later:
            lookup[pos]=storage_loc;
            check[storage_loc]=pos;

            // everything's set up, return appropriate reference:
            return storage.back();
        }
    }
}; 
```

如果是某种不需要销毁的类型，至少在概念上，可以很容易地添加一个`clear()`成员来清空这样一个数组的内容。`T`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T10:28:15.760

在运行时不可能将`O(1)`. 这是直观的，因为没有允许在固定时间内对任意大小的内存块进行值设置的语言机制。您可以做的最接近的是：

```
int blah[100] = {0}; 
```

这将允许在编译时进行初始化。在运行时，`memset`通常是最快的，但会是`O(N)`. 但是，在特定数组类型上使用存在相关[问题。](https://stackoverflow.com/questions/8717640/what-is-the-fastest-way-to-zero-an-existing-array)`memset`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-18T11:25:56.580

我喜欢 Eli Bendersky 的网页[http://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time](http://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time)，他将解决方案归功于著名的《计算机算法的*设计与分析》*一书啊，霍普克罗夫特和厄尔曼。这确实是初始化的 O(1) 时间复杂度，而不是 O(N)。空间需求是 O(N) 额外的存储空间，但分配这个空间也是 O(1)，因为空间充满了垃圾。出于理论上的原因，我喜欢这个，但我认为如果您需要重复初始化一个非常大的数组，并且每次只访问数组中相对较少数量的位置，它对于实现一些算法也可能具有实用价值。Bendersky 提供了该算法的 C++ 实现。

一个非常纯粹的理论家可能会开始担心 N 需要 O(log(N)) 个数字，但我忽略了这个细节，这可能需要仔细查看计算机的数学模型。*The Art of Computer Programming*第 1 卷可能给出了 Knuth 对这个问题的看法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-29T10:51:27.633

虽然仍然是 O(N)，但映射到硬件辅助操作（如清除整个缓存行或内存页面）的实现可以以每个字 <1 个周期运行。

实际上，重复史蒂夫·杰索普的想法……

如果您有硬件支持以同时清除任意大量内存，则可以这样做。如果您设置一个任意大的数组，那么您还可以设置一个具有硬件并行性的任意大内存，以便单个复位引脚同时同时清除每个寄存器。这条线必须由任意大的逻辑门驱动（消耗任意大的功率），电路走线必须任意短（以克服 R/C 延迟）（或超导），但这些事情很常见在异次元空间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-08T14:07:49.443

## 可以使用 O(1) 时间，甚至 O(1) 额外空间来完成。

[我解释了大卫在另一个答案](https://stackoverflow.com/a/65200047/5748666)中提到的 O(1) 时间解决方案，但它使用了 2n 个额外的内存。

存在更好的算法，它只需要 1 位额外的内存。
请参阅我刚刚写的关于该主题的[文章。](https://medium.com/p/2ab4c0335e8b)
它还解释了大卫提到的算法，还有一些，以及当今最先进的算法。它还具有后者的[实现](https://github.com/tomhea/farray)。

在一个简短的解释中（因为我只是重复这篇文章），它巧妙地采用了大卫回答中提出的算法，并在原地完成所有工作，同时只使用（非常）很少的额外内存。

# javascript - 如何确保在不使用 WebFont Loader 的情况下加载 @font-face

> ID：10797288
> 
> 赞同：2
> 
> 时间：2012-05-29T10:25:28.033
> 
> 标签：javascript, font-face

所以我在 <canvas> 元素中得到了我想要的字体。Chrome 似乎在首次使用时加载字体，window.onload(); 在加载字体之前调用。

如何确保加载 @font-face 字体？或者挂钩到一个叫做 if 的事件？

Google/Typekit WebFont Loader 似乎有一个工具。伟大的。那么他们是怎么做到的呢？我想用我自己的代码来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:06:57.550

如果你仍然对此感兴趣（或者其他人偶然发现了这个问题），WebFont Loader API 的源代码目前在 GitHub 上：

[https://github.com/typekit/webfontloader](https://github.com/typekit/webfontloader)

看起来大多数关于检查字体是否处于活动状态的有趣内容都发生在`src/core/fontwatcher.js`和`src/core/fontwatchrunner.js`. 看到它支持多个提供者，您可能还想查看特定提供者的实现以了解对象的使用方式（例如`src/google/*.js`）。

# facebook - 使用 OAuth 客户端访问 Netflix 和 Facebook API

> ID：10797289
> 
> 赞同：0
> 
> 时间：2012-05-29T10:25:28.533
> 
> 标签：facebook, facebook-graph-api, oauth, netflix

我编写了一个小型 Java 程序来处理从服务器到服务器的 Facebook API，它非常简单，尤其是在从 Facebook 获取代码参数时（在回调 URL 上）。我只需要使用 HttpClient（我使用了 apache commons）。

现在我正在尝试开发一个使用 Netflix API 的客户端，但由于某种原因，我需要使用一些 OAuth 客户端（而不仅仅是 HttpClient 并重载 AppID 和秘密等参数）。

我不得不说我有点困惑，我不确定为什么会有这样的差异。

我必须说我对 OAuth 不是很熟悉，也许这是不同协议版本（1.0a 和 2.0）的结果，但如果有人能帮我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:18:14.123

我最终使用这些 gem 手动创建了签名和 oauth 调用：

```
require 'cgi'
require "base64"
require "hmac-sha1"
require 'net/http' 
```

有关构建呼叫的详细信息，请在此处查看我的答案： [为 Netflix 生成 oauth_signature](https://stackoverflow.com/questions/5979451/generating-oauth-signature-for-netflix/11571142#11571142)

# iphone - IOS 5 在单独的线程中加载提要时显示 SVProgressHUD 不起作用

> ID：10797293
> 
> 赞同：1
> 
> 时间：2012-05-29T10:25:38.840
> 
> 标签：iphone, ios5

我正在开发一个 IOS 5 应用程序，它从 url 获取提要并在 tableview 中显示帖子。我有一个视图控制器，可以加载带有提要中帖子的表格单元格。这一切都完美无缺。

但是，我想`SVProgressHUD`在将提要加载到单独的线程中时使用 来显示。

所以在我的`-(void)viewDidLoad`方法中，我有以下内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [SVProgressHUD showInView:self.view status:@"loading.." networkIndicator:YES];
    dispatch_async(kBgQueue, ^{NSData* data = [NSData dataWithContentsOfURL: latestFeedURL];
    [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];});

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(foregroundRefresh:) name:UIApplicationWillEnterForegroundNotification object:nil];

    self.pull = [[PullToRefreshView alloc] initWithScrollView:(UIScrollView *) self.feedTableView];
    [self.pull setDelegate:self];
    [self.feedTableView addSubview:self.pull];

    self.title = @"Latest";
}

- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSMutableArray* latestFeed = [json objectForKey:@"posts"]; //2

    self.feedUpLoads = latestFeed; 
    NSLog(@"objects: %@", latestFeed); //3
    [self.feedTableView reloadData];
    [SVProgressHUD dismiss];
} 
```

这一切都很好，我正在获取加载到后台线程中的数据，我的表格正在显示包含所有所需细节的帖子。我遇到的问题`SVProgressHUD`是根本没有显示。即使我将该`[SVProgressHUD showInView`行放在 fetchData 方法中，它仍然没有显示。（顺便说一句，我知道`SVProgressHUD`代码有效，因为我实际上可以让它在`viewWillAppear`方法中显示。

我猜它不起作用，因为在我调用它的时候，视图还没有完全存在？但如果是这种情况，我应该在哪里调用它，以便在调用提要时显示它，我应该在哪里删除它？

任何帮助表示赞赏！提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:54:23.833

对于遇到类似问题的任何其他人，这也可能发生，因为您有一个长循环或一段需要很长时间才能执行的代码。如果发生这种情况，您的进度条将在循环之后才会显示，这有悖于目的。

要解决此问题，您需要这样做：

*   (void)performSelectorInBackground:(SEL)aSelector withObject:(id)arg

基本上你的代码看起来像这样：

```
- (IBAction)submitPost:(id)sender {
    //now we show the loading bar and submit the comment
    [SVProgressHUD showWithStatus:@"Submitting post" maskType:SVProgressHUDMaskTypeGradient];
    SEL aSelector = @selector(submitDataOfPost);
    [self performSelectorInBackground:aSelector withObject:sender];
} 
```

这基本上会加载进度条，并在后台线程中调用您要执行的方法。这可确保在执行代码的同时更新 UI（显示进度界面）。

# sql-server - 如何使用 select 语句和一些附加列在 sql 表中插入数据

> ID：10797294
> 
> 赞同：1
> 
> 时间：2012-05-29T10:25:44.697
> 
> 标签：sql-server

```
insert into
   [Client].[generalcontact_info]([userid], [first_name], [last_name],
                                  [email], [mobile],
                                  [country], [state], [city], [address],
                                  [Case_id], [contact_type], [query]) 
   select 
       [userid], [first_name], [last_name],
       [email], [mobile],
       [country], [state], [city], [address] 
   from 
       [Admin].[basicinfo] 
   where 
       [userid] = 100003

,'4521r521','Inside','what is my password' 
```

我从选择语句中获取一些价值，并从我自己的代码中获取休息 id

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:32:16.467

是的，当然这是可能的 -`SELECT`用于插入的值可以在其值列表中同时包含列和“常量”：

```
insert into
   [Client].[generalcontact_info]([userid], [first_name], [last_name],
                                  [email], [mobile],
                                  [country], [state], [city], [address],
                                  [Case_id], [contact_type], [query]) 
   select 
       [userid], [first_name], [last_name],
       [email], [mobile],
       [country], [state], [city], [address],
       '4521r521', 'Inside', 'what is my password'
   from 
       [Admin].[basicinfo] 
   where 
       [userid] = 100003 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:29:15.900

你可以这样做

```
insert into table (col1, col2, col3)
select col1, 'static_value', col2
from table2 
```

不要把你的值不是来自选择之后的选择。将其与选择混合。

# linux - linux身份验证窗口脚本

> ID：10797295
> 
> 赞同：-1
> 
> 时间：2012-05-29T10:25:49.250
> 
> 标签：linux

我想在 linux 启动时运行一些图形应用程序，它也应该在身份验证确认后启动。如果任何人有任何想法，请尽快回复！

平台 linux-6 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:33:41.483

如果您的意思是 centos 6，请将您的脚本写入 /etc/rc.local。rc.local 将在所有初始化脚本之后执行。

# javascript - 对话框关闭时从模态对话框返回时间

> ID：10797298
> 
> 赞同：0
> 
> 时间：2012-05-29T10:26:10.997
> 
> 标签：javascript, asp.net, javascript-events

我正在从我的父网页打开一个子模态对话框窗口。打开对话框的 javascript 代码如下：-

```
function openmodalWin() {
        window.showModalDialog("ClockPopUP.aspx", "Clock", "dialogWidth:550px;dialogHeight:350px,");
        } 
```

**Asp代码如下：-**

```
<asp:Button ID="Button1" runat="server" Text="Lunch" CausesValidation="false" CssClass="bigbuttons" style="background:url(../App_Themes/Images/green-box.gif)" Font-Bold="True"  ForeColor="White" Font-Size="Large" OnClientClick="openmodalWin(); return false;" 
```

在我的“ClockPopUp.aspx”中，我只使用了一个 jquery 秒表插件，该插件仅用于显示目的，除此之外没有其他用途。我的要求是我希望用户关闭 ModalDialog，在父页面上我们可以捕获弹出窗口关闭的时间。或者 ShowmodalDialog 将在 window.close() 处返回日期时间。

请尝试解决这个问题，因为它非常紧急，而且我在 javascript 中不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:33:51.563

jQuery UI 具有此功能，无需访问另一个 aspx 页面。

但是，window.showModalDialog 返回一个值，因此您需要更改您的 aspx 以返回有意义的内容，即

window.returnValue = "随便"; 窗口.close();

然后你可以使用它来调用它

```
var returnValue = window.showModalDialog(...) 
```

# ajax - Ajax 更新部分 panelGrid

> ID：10797299
> 
> 赞同：2
> 
> 时间：2012-05-29T10:26:20.273
> 
> 标签：ajax, jsf

我有一个包含 2 列的面板网格，第一列包含标签，第二列包含组件。侦听器 backingBean.onFunktionChange 将 backingBean.functionGraduand 的值设置为 true。因此，在这种情况下，会呈现度数的标签和菜单。

问题是，如果我首先在城市菜单中选择一个城市，然后更改菜单“功能”中的值，则整个面板都会更新，因此城市菜单会被重置。但是，如果功能发生变化，我想保留预选的城市。

如果我用 id=panelFunction 将功能和度数的标签和组件包装在 panelGroup 中，可以说只更新此面板，会破坏两列布局。

是否有可能只更新 panelGrid 的一部分而不影响 panelGrid 的布局？

```
 <h:panelGrid columns="2" id="panel">

   <label>#{function}</label>
        <p:selectOneMenu id="menuFunction" value="#{...}" >
            <p:ajax event="change" process="menuFunction"
                update="panel"
                listener="#{backingBean.onFunctionChange}" />
            <f:selectItems .../>
        </p:selectOneMenu>

        <h:outputLabel id="labelDegree" for="menuDegree"
            value="#{msgs.degree}"
            rendered="#{backingBean.functionGraduand}" />
        <p:selectOneMenu id="menuDegree" value="#{...}" rendered="#{backingBean.functionGraduand}">
            <f:selectItems .../>
        </p:selectOneMenu>

        <label class="required">#{msgs.city}</label>
        <p:selectOneMenu value="#{...}" id ="city">
            <f:selectItems .../>
        </p:selectOneMenu>

    </h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:52:37.673

我通过处理 ajax 请求中的整个面板解决了这个问题：

...

```
<p:ajax event="change" process="panel"
                update="panel"
                listener="#{backingBean.onFunctionChange}" /> 
```

...

# ruby-on-rails - 上传图片而不显示 file_field 和“应用”按钮。正确的方法是什么？

> ID：10797301
> 
> 赞同：3
> 
> 时间：2012-05-29T10:26:26.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 rails 3.2 应用程序，其中用户拥有头像图片。

用户可以通过以下方式选择他的头像：1）在编辑用户视图中单击“浏览...”按钮选择文件（使用 file_field）2）选择文件并单击确定 3）然后单击“应用照片" 按钮（在包含文件名的字段的右侧）将图像加载到服务器并更新视图

我想改善用户体验，删除视图中的字段和按钮。应该是这样的：

1）点击链接“更新头像”（或直接点击图片） 2）选择文件并点击确定

没有（可见）字段，也没有应用按钮

最好的方法是什么？我应该继续在视图中使用 file_field 但隐藏它并使用一些 javascript 代码触发 user#update 操作吗？还是有其他更好的方法来做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:35:34.133

您可以使用其中一个 js 插件来上传文件。即如果你使用jQuery，你可以尝试使用[plupload](http://www.plupload.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-22T14:52:27.010

I have encountered this issue with hiding the input element and putting a label instead.

For eliminating submit button, I have added `onchange` method.

```
<%= file_field_tag :file, class: "d-none", onchange: "this.form.submit()" %>
<%= label_tag :file, role: "button" do %>
  <%= image_pack_tag('logo.svg') %>
<% end %> 
```

PS: I'm using bootstrap class here, styles can be used instead for hiding the element.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:49:55.013

上传字段附近的按钮由浏览器生成，是浏览器的标准小部件。您可以为此使用 js 插件或实现 iframe 上传方法（即使在 IE 上也允许您异步文件上传）。iframe 的简单教程 - iframe 方法允许您根据需要自定义上传链接/字段 = [)](http://hungred.com/how-to/tutorial-easiest-asynchronous-upload-file-ajax-upload/)

# php - 我们如何在 WordPress / Joomla 中创建 RSS Feed？

> ID：10797303
> 
> 赞同：0
> 
> 时间：2012-05-29T10:26:32.637
> 
> 标签：php, wordpress, joomla, rss, feed

我有客户要求为帖子和文章生成 RSS 提要。

请提供一些好的插件和组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:21:27.517

搜索**FeedGator**组件。免费且非常直观！

# c# - C# 中不区分大小写的比较

> ID：10797309
> 
> 赞同：17
> 
> 时间：2012-05-29T10:27:18.933
> 
> 标签：c#, string, comparison

我正在使用以下代码比较两个字符串

字符串1.包含（字符串2）

但我没有得到不区分大小写的搜索结果。此外，我不能使用 String.Compare 因为我不想匹配整个名字，因为名字很大。我需要进行不区分大小写的搜索，并且搜索文本可以是 String1 包含的任何长度。

例如 Term* ***** ** *** ** *** ** *** ** *****是名称。我在文本框中输入“erm”我得到了结果。但是当我输入“术语”时，我没有得到任何结果。谁能帮我 ：）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T10:31:56.693

尝试这个：

```
string.Equals("this will return true", "ThIs WiLL ReTurN TRue", StringComparison.CurrentCultureIgnoreCase) 
```

或者，对于包含：

```
if (string1.IndexOf(string2, StringComparison.CurrentCultureIgnoreCase) >= 0) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-29T10:36:39.757

我更喜欢这样的扩展方法。

```
public static class StringExtensions
{
    public static bool Contains(this string source, string value, StringComparison compareMode)
    {
        if (string.IsNullOrEmpty(source))
            return false;

        return source.IndexOf(value, compareMode) >= 0;
    }
} 
```

请注意，通过这种方式，您可以避免代价高昂的大写或小写转换。

您可以使用此语法调用扩展

```
 bool result = "This is a try".Contains("TRY", StringComparison.InvariantCultureIgnoreCase);
 Console.WriteLine(result); 
```

请注意：上述扩展（对于每个扩展方法都是如此）应在非嵌套、非泛型静态类中定义，[请参阅 MSDN 参考](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-29T10:29:34.210

将两个字符串转换为**相同的大小写**，[大写](http://msdn.microsoft.com/en-us/library/ewdd6aed.aspx)或[小写](http://msdn.microsoft.com/en-us/library/e78f86at.aspx)。

```
string1.ToUpper().Contains(string2.ToUpper()); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-29T10:34:38.767

为什么不这样：

```
if (string1.IndexOf(string2, StringComparison.OrdinalIgnoreCase) >= 0)
{  
}

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T10:31:07.117

您可以将两个字符串都转换为大写，或者使用正则表达式：

```
using System.Text.RegularExpressions;

class Program {
    static void Main(string[] args) {
        string string1 = "TermSomething";
        string string2 = "term";
        bool test1 = string1.ToUpperInvariant().Contains(string2.ToUpperInvariant());
        bool test2 = Regex.IsMatch(string1, Regex.Escape(string2), RegexOptions.IgnoreCase);
    }
} 
```

请注意，如果您使用正则表达式，您应该转义搜索字符串，以便按字面解释特殊的正则表达式字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T10:30:03.203

```
string1.ToUpperInvariant().Contains(string2.ToUpperInvariant()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T10:42:29.933

```
Regex.IsMatch(string1,string2,RegexOptions.IgnoreCase); 
```

这将返回布尔值.....

# android - 如何从本机 Facebook 应用程序获取 Facebook 访问令牌

> ID：10797311
> 
> 赞同：0
> 
> 时间：2012-05-29T10:27:21.937
> 
> 标签：android, facebook

我可以使用以下代码从我的应用程序启动本机 Facebook 应用程序。但成功登录后如何重定向到我的应用程序以及如何获取访问令牌？

```
Intent intent = new Intent("android.intent.category.LAUNCHER");
intent.setClassName("com.facebook.katana",  "com.facebook.katana.LoginActivity");
startActivity(intent); 
```

# sql-server - 将多条记录插入视图时，tsql 返回标识值

> ID：10797313
> 
> 赞同：1
> 
> 时间：2012-05-29T10:27:30.383
> 
> 标签：sql-server, tsql, triggers, identity

我有一种情况，我需要将多个记录/批量插入插入到具有而不是触发器的视图中。如何检索插入的标识值？我尝试使用 OUTPUT 子句从 Inserted 表中检索 Id，但它始终返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:33:02.743

使用此设置。

```
create table InsteadOf
(
  ID int identity primary key,
  Name varchar(10) not null
)

go

create view v_InsteadOf
as
select ID, Name
from InsteadOf

go

create trigger tr_InsteadOf on InsteadOf instead of insert
as
begin
  insert into InsteadOf(Name)
  select Name
  from inserted
end 
```

该声明

```
insert into v_InsteadOf(Name)
output inserted.*
select 'Name1' union all 
select 'Name2' 
```

会给你一个错误。

> 消息 334，级别 16，状态 1，第 4 行如果语句包含没有 INTO 子句的 OUTPUT 子句，则 DML 语句的目标表“InsteadOf”不能有任何启用的触发器。

而是使用带有插入的 INTO 子句。

```
declare @IDs table(ID int, Name varchar(10))

insert into v_InsteadOf(Name)
output inserted.* into @IDs
select 'Name1' union all 
select 'Name2'

select *
from @IDs 
```

给你`0`的价值不`null`。

```
ID          Name
----------- ----------
0           Name1
0           Name2 
```

您可以将输出子句放在触发器中。

```
create trigger tr_InsteadOf on InsteadOf instead of insert
as
begin
  insert into InsteadOf(Name)
  output inserted.*
  select Name
  from inserted
end 
```

当您进行插入时，将为您生成输出。

```
insert into v_InsteadOf(Name)
select 'Name1' union all 
select 'Name2' 
```

结果：

```
ID          Name
----------- ----------
1           Name1
2           Name2 
```

**更新：**
要捕获插入语句的输出，您可以使用`insert into ... exec (...)`

```
declare @T table
(
  ID int,
  Name varchar(10)
)

insert into @T
exec
  (
    'insert into v_InsteadOf(Name)
     values (''Name1''),(''Name2'')'
  ) 
```

# macos - NASM jmp 摇晃

> ID：10797319
> 
> 赞同：1
> 
> 时间：2012-05-29T10:27:39.970
> 
> 标签：macos, nasm, i386

我正在编写一个 Forth 内部解释器，并陷入了应该是最简单的部分。在 Mac 上使用 NASM (macho)

```
msg  db "k thx bye",0xA     ; string with carriage return
len  equ $ - msg            ; string length in bytes

xt_test:
    dw xt_bye     ; <- SI Starts Here

    dw 0
    db 3,'bye'
xt_bye dw $+2       ; <- Should point to...
    push dword len  ; <-- code here
    push dword msg  ; <--- but it never gets here
    push dword 1
    mov  eax, 0x4   ; print the msg
    int 80h
    add  esp, 12
    push dword 0
    mov eax, 0x1    ; exit(0)
    int 80h

_main:
    mov si,xt_test ; si points to the first xt
    lodsw          ; ax now points to the CFA of the first word, si to the next word
    mov di,ax
    jmp [di]       ; jmp to address in CFA (Here's the segfault) 
```

我得到 Segmentation Fault: 11 运行时。作为测试，我可以将 _main 更改为

```
_main:
    mov di,xt_bye+2
    jmp di 
```

它有效

编辑 - 这是我正在尝试做的最简单的形式，因为我认为那里有一些红鲱鱼:)

```
a dw b
b dw c
c jmp _my_actual_code

_main:
    mov si,a
    lodsw
    mov di,ax
    jmp [di] 
```

编辑 - 在对二进制文件进行 hexdump 之后，我可以看到上面 b 中的值实际上比编译标签 c 的地址高 0x1000。c 位于 0x00000f43，但 b 包含 0x1f40

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:37:38.287

首先，在至少 32 位的现代 x86 机器上使用 'si' 和 'di' 16 位寄存器看起来非常危险。

尝试使用“esi”和“edi”。当 'xt_bye' 不大于 2^16 时，您可能会很幸运地避免了一些崩溃。

另一件事：在 xt_bye 的末尾没有“RET”。

还有一个：看到这个链接的问题[Help with Assembly。在 Mac OS X 上编译样本时出现分段错误](https://stackoverflow.com/questions/1914316/help-with-assembly-segmentation-fault-when-compiling-samples-on-mac-os-x)

看起来您正在将 ESP 寄存器更改很多，并且它变得未对齐 16 个字节。从而崩溃。

还有一个：

```
jmp [di] 
```

可能无法加载正确的地址，因为未使用 DS/ES reg，因此 0x1000 偏移量。

# google-app-engine - 连接时出现 Google Cloud Sql 错误

> ID：10797321
> 
> 赞同：1
> 
> 时间：2012-05-29T10:27:51.423
> 
> 标签：google-app-engine, google-cloud-sql

我正在使用谷歌应用程序构建云应用程序。在与云数据库实例建立连接时，我遇到错误。我还在Tomcat7.0服务器库中下载并配置了appengine-api-1.0-sdk-1.6.5，我也安装了rdbms包，但仍然错误。代码如下

```
<%@ page import="com.google.appengine.api.rdbms.*, java.io.*,java.sql.*"%>
<%
Connection c = null;
DriverManager.registerDriver(new AppEngineDriver());
 c = DriverManager.getConnection("jdbc:google:rdbms://ctsteaching:ctsdatabase/ctsdb");
 String fname = request.getParameter("fname");
  String content = request.getParameter("content");
  if (fname == "" || content == "") {
    out.println("<html><head></head><body>You are missing either a message or a name!       Try again! Redirecting in 3 seconds...</body></html>");
  } else {
  String statement ="INSERT INTO entries (guestName, content) VALUES(?,?)";
  PreparedStatement stmt = c.prepareStatement(statement);
  stmt.setString(1,fname);
  stmt.setString(2,content);
  int success = 2;
  success = stmt.executeUpdate();
  if(success == 1) {
    out.println("<html><head></head><body>Success! Redirecting in 3 seconds...</body>    </html>");
  } else if (success == 0) 
  {
    out.println("<html><head></head><body>Failure! Please try again! Redirecting in 3 seconds...</body></html>");
  }
 }
 %> 
```

错误如下所示

```
com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'rdbms' or call 'OpenConnection()' was not found.
com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:98)
com.google.appengine.api.rdbms.RdbmsApiProxyClient$ApiProxyBlockingInterface.makeSyncCall(RdbmsApiProxyClient.java:95)
com.google.appengine.api.rdbms.RdbmsApiProxyClient$ApiProxyBlockingInterface.openConnection(RdbmsApiProxyClient.java:73)
com.google.cloud.sql.jdbc.internal.SqlProtoClient.openConnection(SqlProtoClient.java:58)
com.google.cloud.sql.jdbc.Driver.connect(Driver.java:66)
com.google.cloud.sql.jdbc.Driver.connect(Driver.java:26)
java.sql.DriverManager.getConnection(Unknown Source)
java.sql.DriverManager.getConnection(Unknown Source)
org.apache.jsp.abcd.test_jsp._jspService(test_jsp.java:70)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:31:43.423

看起来您使用了错误的 jar 文件。本地开发时需要设置一些额外的jvm_flags。 [https://developers.google.com/cloud-sql/docs/developers_guide_java#with_eclipse](https://developers.google.com/cloud-sql/docs/developers_guide_java#with_eclipse)

# hash - 哈希表实现的哈希算法

> ID：10797323
> 
> 赞同：11
> 
> 时间：2012-05-29T10:28:00.030
> 
> 标签：hash, hashmap, hashtable

我正在寻找一种具有良好（即接近均匀）分布的高速散列函数，用于散列表实现。

哈希表将专门用于存储具有整数键的值。

我可以只使用整数的低几位作为哈希吗？

例如 int key = n & 15; 并创建一个包含 16 个插槽的数组来存储它们。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:35:18.477

你可以在这里看到[xxhash](http://code.google.com/p/xxhash/)

您提到的哈希函数非常快，但也非常糟糕。如果你想要一个“愚蠢”的散列函数，也许你可以考虑模数。

例子：

```
int key = item % size_of_hash_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:47:05.180

好吧，昨晚我做了一个通用的哈希测试（用 C 语言），它涵盖了几个顶级哈希器和 38 个不同的键。

欢迎大家对其进行基准测试： [http ://www.overclock.net/t/1319572/benchmarking-the-fastest-hash-function/0_20#post_18495990](http://www.overclock.net/t/1319572/benchmarking-the-fastest-hash-function/0_20#post_18495990)

我很高兴在您的帮助下揭示**Intel**与**AMD**以及**Intel 12.1**编译器与**Microsoft 16** (VS2010) 编译器组合的行为方式。

# android - 在 android 中调用 httpget 时出错（检索 google 方向）

> ID：10797327
> 
> 赞同：0
> 
> 时间：2012-05-29T10:28:05.547
> 
> 标签：android, web-services, http-get, directions

我正在尝试使用 android httpget 调用此 URL 以获得 json 方向数组：[http://maps.googleapis.com/maps/api/directions/json?origin=Adelaide,SA&destination=Adelaide,SA&waypoints=optimize： true%7cBarossa+Valley,SA%7cClare,SA%7cConnawarra,SA%7cMcLaren+Vale,SA&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Adelaide,SA&destination=Adelaide,SA&waypoints=optimize:true%7cBarossa+Valley,SA%7cClare,SA%7cConnawarra,SA%7cMcLaren+Vale,SA&sensor=false) "

基本上这是我到目前为止所做的：

1）我首先创建了一个异步任务，以便调用谷歌方向并记录检索到的结果：

```
public class MyTask extends AsyncTask<String, Integer, String> {

@Override
protected String doInBackground(String... params) {

InputStream is = null;

    String result = null;

try{

        HttpClient httpclient = new DefaultHttpClient();
         HttpGet httpget = new HttpGet(params[0]);
         HttpResponse response = httpclient.execute(httpget);
         HttpEntity entity = response.getEntity();
         int lenght = (int) entity.getContentLength();

         StringBuffer buffer = new StringBuffer(lenght);

         is = entity.getContent();
         }catch(Exception e){
             Log.e("log_tag", "Error in http connection"+e.toString());
        }

    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);

         StringBuilder sb = new StringBuilder();
         sb.append(reader.readLine() + "\n");

         String line="0";
         while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
          }
          is.close();
        result = sb.toString();
          }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
          }

    Log.i("Result", result);

    return result;

  }

} 
```

2）在主活动中，我将执行传递给它的异步任务 url ：

```
 MyTask t = new MyTask();
    t.execute(urlString.toString()); 
```

其中 urlString 是一个 StringBuilder。我尝试以多种方式构建该地址，即使尝试使用 URLEncoder.encode(myUrl) 对其进行编码，但我总是得到一个异常，即***http connectionjava.lang.NegativeArraySizeException 中的错误***，我无法检索来自谷歌的 json 数据。如何正确格式化该网址？我的目标是达到与这个人相同的结果（在 json 部分）：http: [//blog.synyx.de/2010/06/routing-driving-directions-on-android-part-1-get-the -路线/](http://blog.synyx.de/2010/06/routing-driving-directions-on-android-part-1-get-the-route/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:35:37.493

我终于明白了！我改变了调用谷歌网络服务的方式。基本上这部分：

```
 HttpClient httpclient = new DefaultHttpClient();
     HttpGet httpget = new HttpGet(params[0]);
     HttpResponse response = httpclient.execute(httpget);
     HttpEntity entity = response.getEntity(); 
```

用这种其他方式调用谷歌网络服务：

```
 HttpURLConnection urlConnection = null;
        url = new URL("http://maps.googleapis.com/maps/api/directions/json?origin=Adelaide,SA&destination=Adelaide,SA&waypoints=optimize:true%7cBarossa+Valley,SA%7cClare,SA%7cConnawarra,SA%7cMcLaren+Vale,SA&sensor=false");
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.setDoInput(true);
        is = urlConnection.getInputStream();
        urlConnection.connect(); 
```

然后我“链接”了 InputStreamReader 内的 Input Stream，Buffered Reader 内的 InputStreamReader，一切正常：

```
 InputStreamReader inputStream = new InputStreamReader(is);
        BufferedReader r = new BufferedReader(inputStream);
        String line = null;
        line = r.readLine();
        while (line!=null){

            Log.i("RESULT", line);

            line = r.readLine();

        } 
```

通过这种方式，我能够记录所需的结果。我想了解的一件事是为什么 httpclient 不起作用，但 httpURLConnection 却起作用。谁能帮我？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:52:39.220

只需删除有问题的代码，因为它没有在任何地方使用？

```
//int lenght = (int) entity.getContentLength();

//StringBuffer buffer = new StringBuffer(lenght); 
```

# oracle - 如何在 plsql 中指定数组变量

> ID：10797333
> 
> 赞同：1
> 
> 时间：2012-05-29T10:28:27.570
> 
> 标签：oracle, plsql

任何人都可以帮助我，如何将选择查询的结果分配给数组变量，因为结果可以是一个值数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:59:33.357

您可以采用几种不同的方法将数据放入阵列中。第一个是一个简单的循环，如下所示：

```
DECLARE
  TYPE NUMBER_ARRAY IS VARRAY(100) OF NUMBER;

  arrNums  NUMBER_ARRAY;
  i NUMBER := 1;
BEGIN
  arrNums := NUMBER_ARRAY();

  FOR aRow IN (SELECT NUMBER_FIELD
                 FROM A_TABLE
                 WHERE ROWNUM <= 100)
  LOOP
    arrNums.EXTEND;
    arrNums(i) := aRow.SEQUENCE_NO;
    i := i + 1;
  END LOOP;
end; 
```

正如@Rene 所建议的那样，另一个方法是使用 BULK COLLECT，如下所示：

```
DECLARE
  TYPE NUMBER_ARRAY IS VARRAY(100) OF NUMBER;

  arrNums  NUMBER_ARRAY;
BEGIN
  arrNums := NUMBER_ARRAY();
  arrNums.EXTEND(100);

  SELECT NUMBER_FIELD
    BULK COLLECT INTO arrNums
    FROM A_TABLE
    WHERE ROWNUM <= 100;
end; 
```

分享和享受。

# linux - 坐在终端提示符上的 EOT 角色是一个问题吗？

> ID：10797336
> 
> 赞同：0
> 
> 时间：2012-05-29T10:28:30.857
> 
> 标签：linux, sqlite, terminal

警告：你知道他们怎么说“没有愚蠢的问题”吗？好吧，这个是，或者，我怀疑它真的很小，但是，为什么不问。搜索引擎并没有给我带来任何远程有用的东西，尽管那可能是糟糕的 searchterm-fu。

我最近将 sqlite3 下载到 Ubuntu 10 开始学习 SQL 命令。我解压了 3.7.12.01 并安装了。在创建了一个 test.db 之后，`create table test (id)`我决定看看我会得到`cat`什么。只是因为。结果是一个 EOT 字符 (u+0004) *，它位于我的 prompt 正上方*。图示截图：http: [//imgur.com/omfMa](http://imgur.com/omfMa)

我意识到这不是您要使用的文件类型`cat`。我只想知道，在我走得更远之前，

**在实际使用 SQL 时，这个字符的奇怪位置是否预示着任何未来的问题，或者换行符或字体（这是 monofur 设置为高字体大小）或类似的问题？**

我以前从未见过直接放在我的提示符上的结果字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:34:16.450

该字符被放置在您的提示符之上，因为它是一个双角字符，并且终端通常不擅长处理双角字符。这并不意味着什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:45:26.157

有[一些控制代码](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)可以用你的终端做一些非常有趣的事情，比如改变颜色、字体等。

但它们都没有真正有害 - 你应该能够让`reset`你的终端进入健康状态，或者关闭它并打开一个新的。

# php - 报表制作者 php mysql

> ID：10797339
> 
> 赞同：1
> 
> 时间：2012-05-29T10:28:42.083
> 
> 标签：php, mysql, report

我被要求找出是否可以将 Cyrstal Reports 连接到 php 网站内的 MYSQL 数据库。

这可能吗？他们有任何选择吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:31:42.927

[你可以在这里](http://www.eakes.org/80/connecting-to-mysql-with-crystal-reports-xi/)和[这里](http://forums.mysql.com/read.php?33,28577,28577)找到你的答案

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T10:37:28.533

iReport 是生成 PDF、Excel HTML 格式的 mysql 报告的最佳工具。 [http://jasperforge.org/projects/ireport](http://jasperforge.org/projects/ireport)

# css - Css 父选择器取决于存在的另一个类

> ID：10797347
> 
> 赞同：2
> 
> 时间：2012-05-29T10:29:20.897
> 
> 标签：css, css-selectors, sass, angularjs

我的标记是这样的：

```
<li class="cont">
    <a> Click Here</a>
    <form>   </form>
</li> 
```

如果表单应用了一个类例如：ng-dirty，我想更改锚标记的背景颜色。该表单由 angularJs 框架应用这个类，当发生这种情况时，我想通过更改其背景颜色来突出显示“a”标签。

如何使用纯 Css（或 sass）来做到这一点？

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:29:29.827

对此没有特定的 CSS 选择器，但您可以通过组合`HTML`change &来实现所需的效果`box-direction:reverse;`。像这样写：

**HTML**

```
<div class="cont">
 <form class="ng-dirty">   
     <input type="text" value="Hi"/>
 </form>
 <a> Click Here</a>
</div> 
```

**CSS**

```
.cont{
    display:-moz-box;
    display:box;
    display:-webkit-box;
    box-direction: reverse;
    -moz-box-direction:reverse;
    -webkit-box-direction:reverse;  
    -moz-box-orient:vertical;
    -webkit-box-orient:vertical;
    box-orient:vertical;
}
.cont > *{
    display:block;
}
.ng-dirty + a{
    background:yellow;
} 
```

检查这个[http://jsfiddle.net/8YnTw/](http://jsfiddle.net/8YnTw/)它是纯 CSS 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:23:29.023

你可以用 Angular 简单地做到这一点：

```
<a ng-class="{'dirty-class': myForm.$dirty}"> Click Here</a>
<form name="myForm">
</form> 
```

[http://jsfiddle.net/XYTcL/](http://jsfiddle.net/XYTcL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:27:48.963

使用下一个 css 应该可以工作：

```
.ng-dirty a {
    background-color: red;
} 
```

# iphone - 从 char * 获取 NSString（转换 C 的字符指针）

> ID：10797350
> 
> 赞同：39
> 
> 时间：2012-05-29T10:29:41.443
> 
> 标签：iphone, objective-c, ios

我想`char *`在`UITextField`

我尝试了什么：

```
char *data;
char *name=data+6;
txtName.text=[[NSString alloc] initWithCString:name encoding:NSUTF8StringEncoding]; 
```

但我没有得到正确的价值。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-29T10:31:33.303

要从 a 创建一个`NSString`，`const char *`只需使用以下方法：

## 返回一个`autorelease`d 对象：

```
/**
 * Should be wrapped in `@autoreleasepool {...}`,
 * somewhere not far in call-stack
 * (as closer it's, the lower our memory usage).
 */
NSString *stringFromChar(const char *input) {
    return [NSString stringWithUTF8String: input];
} 
```

> 每当我们`return`一个对象（可能是`Swift`）时，我们需要注册到最近的`@autoreleasepool`块中（通过调用`autorelease`方法来防止内存泄漏，根据[所有权规则](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)），但是`ARC`会自动为我们注册。

但即使`ARC`禁用，我们也不会被迫`autorelease`手动调用，例如：

```
return [[NSString stringWithUTF8String: name] autorelease]; 
```

> *通常*，便利工厂方法（如`stringWithUTF8String:`）已经调用该`autorelease`方法（或者如果`ARC`禁用则应该调用该方法），因为该类根本不打算拥有该实例。

## 创建一个`retain`ed 对象：

```
NSString *result = [[NSString alloc] initWithUTF8String: name];

// ... Do something with resulted object.

// NOTE: calling below is not required
// (If ARC enabled, and should cause compile error).
[result release]; 
```

> 2021 年[关于差异的](https://stackoverflow.com/a/7960952/8740349)更新；启用后，这`ARC`两种方法是等效的（即`ARC`会自动调用`autorelease`方法；​​总是注册到最近的`@autoreleasepool`）。

[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/#//apple_ref/occ/instm/NSString/initWithUTF8String:)。

如果你没有得到正确的值，那么数据有问题。添加一些`NSLog`调用以查看字符串包含的内容。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-09-02T08:29:47.520

你能指望什么？您有一个未初始化的 char*。然后将 6 添加到指针，这已经是未定义的行为。然后你尝试将一个指向任何旧垃圾的指针（你不知道它指向哪里）指向一个 NSString*。没有什么好事可以由此而来。

使用 ASCII 或 UTF-8 编码定义一个指向实际的、真实的 C 字符串的 char*。然后像这样创建一个 NSString：

```
char* cstring = "Try harder";
NSString* objcstring = @(cstring); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-29T10:32:32.270

您可以使用`[NSString stringWithUTF8String: data]`.

# facebook - 如何使用我网站上的 FB 发送按钮获取用户已向其发送私人消息的朋友列表？

> ID：10797360
> 
> 赞同：0
> 
> 时间：2012-05-29T10:30:16.223
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fbjs

我在我的网站的一个页面上集成了一个发送按钮，我允许用户使用这个发送按钮与他们的 Facebook 朋友分享指向一些私人信息的链接。

只有这些收到消息的朋友才能访问此链接。为了验证这一点，我想捕获朋友列表，可能还有他们的 FB id，我的网站用户使用我网站上的发送按钮向其发送私人 FB 消息。

有没有办法捕获这个列表，即用户选择的私人消息收件人列表？

或者，有没有一种方法可以让我提供一个多朋友选择器，我的网站用户可以从中选择他们想要向其发送 fb 消息的 fb 朋友，然后使用 FB 发送消息 api，我发送此消息 - 从而实现上述目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:51:17.073

该`Send`按钮不允许您查看消息发送给了哪些 Facebook 用户。

您应该改用直接请求对话框：http: [//developers.facebook.com/docs/reference/dialogs/requests/#direct_request](http://developers.facebook.com/docs/reference/dialogs/requests/#direct_request)

您可以创建自己的多朋友选择器，然后使用上面的对话框将请求发送给朋友。`Accept`当朋友点击按钮时，您可以验证请求。该函数返回`request`和`to`，其中分别包含`request_id`和 的数组`user_ids`。

# mysql - mysql时间戳的时间戳差异

> ID：10797363
> 
> 赞同：3
> 
> 时间：2012-05-29T10:30:21.943
> 
> 标签：mysql, timestamp

我想得到时间戳之间的区别，时间戳格式，只使用 MySQL 而不是使用编程语言。也不是秒、小时、日期、月或年。举个例子。

```
timestamp1->2012-05-21 15:31:11
timestamp2->2012-05-21 15:32:11 
```

我想得到时间戳格式的结果。

所以结果应该是

```
result->0000-00-00 00:01:00 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T10:31:20.310

使用 MySQL 的[`TIMEDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timediff)功能：

> [`TIMEDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timediff)返回***`expr1`***——***`expr2`***以时间值表示。***`expr1`***and***`expr2`***是时间或日期和时间表达式，但两者必须是同一类型。
> 
> 返回的结果`TIMEDIFF()`被限制在值允许的范围内[`TIME`](http://dev.mysql.com/doc/en/time.html)。或者，您可以使用任何一个函数[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timestampdiff)和[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_unix-timestamp)，它们都返回整数。
> 
> ```
> mysql> SELECT TIMEDIFF('2000:01:01 00:00:00', 
>     ->                  '2000:01:01 00:00:00.000001');
>         -> '-00:00:00.000001'
> mysql> SELECT TIMEDIFF('2008-12-31 23:59:59.000001', 
>     ->                  '2008-12-30 01:01:01.000002'); 
>         -> '46:58:57.999999'
> ```

# ruby - ruby 中的运算符和方法链接

> ID：10797364
> 
> 赞同：1
> 
> 时间：2012-05-29T10:30:22.543
> 
> 标签：ruby

我在编写的程序中遇到了一些让我感到困惑的结果。我的理解是通常不需要括号（即`obj.method1.method2`与 一样好`(obj.method1).method2`）。此外，所有运算符都是真正的方法调用，所以我希望它们的行为相似。

所以想象一下我的惊喜`"S"+"R".downcase`导致了`Sr`但`"S".+"R".downcase`最终`"S".send(:+, "R").downcase`给了我预期的输出`sr`

这是因为操作员快捷方式的处理方式不同，还是我在这里缺少其他一些机械师？

* * *

编辑：问题不在于导致答案的操作顺序，这很明显。问题是为什么这个表达式是按这个顺序解决的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:48:41.503

`.`优先级高于`+`并且首先被评估。`("S"+"R").downcase`也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:00:23.117

如果你的 Ruby >= 1.9，你可以检查它是如何用 Ripper 解析的：

```
require 'ripper'
require 'pp'

src = '"A"+"B".downcase'
pp Ripper::SexpBuilder.new(src).parse 
```

您将看到方法调用（来自“。”）比二进制加号具有更高的优先级：

```
[:program,
 [:stmts_add,
  [:stmts_new],
  [:binary,
   [:string_literal,
    [:string_add, [:string_content], [:@tstring_content, "A", [1, 1]]]],
   :+,
   [:call,
    [:string_literal,
     [:string_add, [:string_content], [:@tstring_content, "B", [1, 5]]]],
    :".",
    [:@ident, "downcase", [1, 8]]]]]] 
```

如果您熟悉 bison/yacc，也可以直接从 Ruby 的[parse.y导出运算符的优先级。](https://github.com/ruby/ruby/blob/trunk/parse.y)

# json - 在将动态 JSON 绑定到 Highcharts 方面需要帮助

> ID：10797366
> 
> 赞同：1
> 
> 时间：2012-05-29T10:30:37.300
> 
> 标签：json, binding, highcharts

我从服务器收到的 JSON 数据为：

```
[{"Text":"TRUCKLOAD","Spend":32323348.4},
{"Text":"NON-SYNDICATED:QUALITATIVE &  QUANTITATIVE","Spend":23270306.54},
{"Text":"SAMPLING & EVENTERVICES","Spend":18924795.75},
{"Text":"OTHER LOGISTICS","Spend":18353919.01},
{"Text":"CONSTRUCTION AND INSTALLATION","Spend":13248733.26},
{"Text":"SECURITY SERVICES","Spend":9210534.97},
{"Text":"TAXES","Spend":8661964.99}] 
```

有人可以帮我将这些数据动态绑定到饼图吗？

另一个问题是，highchart 要求我将标签更改为JSON`Name`的`y`标签，而不是我的 JSON 中的`Text`和`Spend`标签。我如何为此更改我的 JSON？我已经在网上搜索了相同的内容，但所有示例似乎只显示了来自外部文件的 JSON 绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:37:31.663

[您可以在此处](http://www.highcharts.com/demo/pie-basic)查看演示的源代码，然后单击查看选项按钮。
最好的方法是在收到之前在后端格式化 json。
但是如果你想这样做，你可以使用下面的代码：

```
var json = [{
    "name":"TRUCKLOAD",
    "y":32323348.4
}, {
    "name":"NON-SYNDICATED:QUALITATIVE & QUANTITATIVE",
    "y":23270306.54
}, {
    "name":"SAMPLING & EVENTERVICES",
    "y":18924795.75
}];

var data = [];
for(var i in json) {
    var serie = new Array(json[i].name, json[i].y);
    data.push(serie);
} 
```

[**演示**](http://jsfiddle.net/5qxbw/4/)

# php - Selenium：确定 SessionCapabilities 的异常（从 php-webdriver-bindings 调用时）

> ID：10797367
> 
> 赞同：2
> 
> 时间：2012-05-29T10:30:53.853
> 
> 标签：php, exception, selenium, automated-tests

我正在使用 php-webdriver-bindings 在 PHP 下设置 Selenium 测试。[有人在项目主页](http://code.google.com/p/php-webdriver-bindings/)中遇到以下示例吗？

执行示例测试时，*服务器*会抛出 ExecutionException。从 Java 执行相同的步骤没有问题。（无论如何，这些步骤可能并不那么重要，因为已经在确定会话能力时发生了异常）

PHP代码：

```
<?php
require_once "phpwebdriver/WebDriver.php";
/*require("phpwebdriver/LocatorStrategy.php");*/ /*already included*/

$webdriver = new WebDriver("localhost", "4444");
$webdriver->connect("firefox");                            
$webdriver->get("http://google.com");
$element = $webdriver->findElementBy(LocatorStrategy::name, "q");
$element->sendKeys(array("selenium google code" ) );
$element->submit();

$webdriver->close();
?> 
```

Java 代码：

```
package asdfjkl.selenium.test;

import java.net.URL;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;

public class Sel2Test2  {
    public static void main(String[] args) {
        URL url = null;

        try {
            url = new URL("http://localhost:4444/wd/hub");
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }

        WebDriver driver = new RemoteWebDriver(
                url, DesiredCapabilities.firefox());

        driver.get("http://www.google.com");
        WebElement element = driver.findElement(By.name("q"));

        element.sendKeys("selenium google code");
        element.submit();

        driver.quit();
    }
} 
```

执行 PHP 测试时的服务器输出（抛出异常）：

```
May 29, 2012 11:57:55 AM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
11:57:56.537 INFO - Java: Sun Microsystems Inc. 20.0-b11
11:57:56.539 INFO - OS: Linux 2.6.18-308.1.1.el5 i386
11:57:56.554 INFO - v2.21.0, with Core v2.21.0\. Built from revision 16552
11:57:57.774 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
11:57:57.775 INFO - Version Jetty/5.1.x
11:57:57.776 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
11:57:57.777 INFO - Started HttpContext[/selenium-server,/selenium-server]
11:57:57.777 INFO - Started HttpContext[/,/]
11:58:01.141 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@90cb03
11:58:01.141 INFO - Started HttpContext[/wd,/wd]
11:58:01.145 INFO - Started SocketListener on 0.0.0.0:4444
11:58:01.145 INFO - Started org.openqa.jetty.jetty.Server@af8358
11:59:57.941 INFO - Executing: [new session: {javascriptEnabled=true, browserName=firefox, nativeEvents=false, version=}] at URL: /session)
12:00:11.527 INFO - Done: /session
12:00:11.531 INFO - Executing: org.openqa.selenium.remote.server.handler.GetSessionCapabilities@134263a at URL: /session/1338285476985)
12:00:11.531 INFO - Done: /session/1338285476985
12:00:11.532 INFO - WebDriver remote server: Fatal, unhandled exception: /session/1338285476985: java.util.concurrent.ExecutionException: java.lang.NullPointerException
12:00:11.532 WARN - EXCEPTION
javax.servlet.ServletException: java.util.concurrent.ExecutionException: java.lang.NullPointerException
        at org.openqa.selenium.remote.server.DriverServlet.handleRequest(DriverServlet.java:603)
        at org.openqa.selenium.remote.server.DriverServlet.doGet(DriverServlet.java:539)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
        at org.openqa.selenium.remote.server.DriverServlet.service(DriverServlet.java:520)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.openqa.jetty.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)
        at org.openqa.jetty.jetty.servlet.ServletHandler.dispatch(ServletHandler.java:677)
        at org.openqa.jetty.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)
        at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1530)
        at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1482)
        at org.openqa.jetty.http.HttpServer.service(HttpServer.java:909)
        at org.openqa.jetty.http.HttpConnection.service(HttpConnection.java:820)
        at org.openqa.jetty.http.HttpConnection.handleNext(HttpConnection.java:986)
        at org.openqa.jetty.http.HttpConnection.handle(HttpConnection.java:837)
        at org.openqa.jetty.http.SocketListener.handleConnection(SocketListener.java:243)
        at org.openqa.jetty.util.ThreadedServer.handle(ThreadedServer.java:357)
        at org.openqa.jetty.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
Caused by: java.util.concurrent.ExecutionException: java.lang.NullPointerException
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
        at java.util.concurrent.FutureTask.get(FutureTask.java:83)
        at org.openqa.selenium.remote.server.DefaultSession.execute(DefaultSession.java:158)
        at org.openqa.selenium.remote.server.handler.WebDriverHandler.execute(WebDriverHandler.java:90)
        at org.openqa.selenium.remote.server.rest.ResultConfig.handle(ResultConfig.java:240)
        at org.openqa.selenium.remote.server.DriverServlet.handleRequest(DriverServlet.java:597)
        ... 16 more
Caused by: java.lang.NullPointerException
        at org.openqa.selenium.remote.server.renderer.ForwardResult.render(ForwardResult.java:39)
        at org.openqa.selenium.remote.server.rest.ResultConfig$1.call(ResultConfig.java:233)
        at org.openqa.selenium.remote.server.rest.ResultConfig$1.call(ResultConfig.java:1)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession.java:151)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
12:00:11.533 WARN - /wd/hub/session/1338285476985:
java.util.concurrent.ExecutionException: java.lang.NullPointerException
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
        at java.util.concurrent.FutureTask.get(FutureTask.java:83)
        at org.openqa.selenium.remote.server.DefaultSession.execute(DefaultSession.java:158)
        at org.openqa.selenium.remote.server.handler.WebDriverHandler.execute(WebDriverHandler.java:90)
        at org.openqa.selenium.remote.server.rest.ResultConfig.handle(ResultConfig.java:240)
        at org.openqa.selenium.remote.server.DriverServlet.handleRequest(DriverServlet.java:597)
        at org.openqa.selenium.remote.server.DriverServlet.doGet(DriverServlet.java:539)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
        at org.openqa.selenium.remote.server.DriverServlet.service(DriverServlet.java:520)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.openqa.jetty.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)
        at org.openqa.jetty.jetty.servlet.ServletHandler.dispatch(ServletHandler.java:677)
        at org.openqa.jetty.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)
        at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1530)
        at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1482)
        at org.openqa.jetty.http.HttpServer.service(HttpServer.java:909)
        at org.openqa.jetty.http.HttpConnection.service(HttpConnection.java:820)
        at org.openqa.jetty.http.HttpConnection.handleNext(HttpConnection.java:986)
        at org.openqa.jetty.http.HttpConnection.handle(HttpConnection.java:837)
        at org.openqa.jetty.http.SocketListener.handleConnection(SocketListener.java:243)
        at org.openqa.jetty.util.ThreadedServer.handle(ThreadedServer.java:357)
        at org.openqa.jetty.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
Caused by: java.lang.NullPointerException
        at org.openqa.selenium.remote.server.renderer.ForwardResult.render(ForwardResult.java:39)
        at org.openqa.selenium.remote.server.rest.ResultConfig$1.call(ResultConfig.java:233)
        at org.openqa.selenium.remote.server.rest.ResultConfig$1.call(ResultConfig.java:1)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession.java:151)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
12:00:11.540 INFO - Executing: [get: http://google.com] at URL: /session/1338285476985/url)
12:00:12.664 INFO - Done: /session/1338285476985/url
12:00:12.666 INFO - Executing: [find element: By.name: q] at URL: /session/1338285476985/element)
12:00:12.956 INFO - Done: /session/1338285476985/element
12:00:12.961 INFO - Executing: [send keys: 0 org.openqa.selenium.support.events.EventFiringWebDriver$EventFiringWebElement@13472277, [selenium google code]] at URL: /session/1338285476985/element/0/value)
12:00:13.096 INFO - Done: /session/1338285476985/element/0/value
12:00:13.097 INFO - Executing: [submit: 0 org.openqa.selenium.support.events.EventFiringWebDriver$EventFiringWebElement@13472277] at URL: /session/1338285476985/element/0/submit)
12:00:13.227 INFO - Done: /session/1338285476985/element/0/submit
12:00:13.228 INFO - Executing: [delete session: 1338285476985] at URL: /session/1338285476985)
12:00:13.304 INFO - Done: /session/1338285476985 
```

执行 Java 测试时的服务器输出（未抛出异常）：

```
May 29, 2012 12:02:26 PM org.openqa.grid.selenium.GridLauncher main
INFO: Launching a standalone server
12:02:26.682 INFO - Java: Sun Microsystems Inc. 20.0-b11
12:02:26.684 INFO - OS: Linux 2.6.18-308.1.1.el5 i386
12:02:26.695 INFO - v2.21.0, with Core v2.21.0\. Built from revision 16552
12:02:26.816 INFO - RemoteWebDriver instances should connect to: http://127.0.0\.   1:4444/wd/hub
12:02:26.818 INFO - Version Jetty/5.1.x
12:02:26.818 INFO - Started HttpContext[/selenium-server/driver,/selenium-server   /driver]
12:02:26.819 INFO - Started HttpContext[/selenium-server,/selenium-server]
12:02:26.819 INFO - Started HttpContext[/,/]
12:02:26.842 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@288051
12:02:26.842 INFO - Started HttpContext[/wd,/wd]
12:02:26.846 INFO - Started SocketListener on 0.0.0.0:4444
12:02:26.846 INFO - Started org.openqa.jetty.jetty.Server@af8358
12:04:02.749 INFO - Executing: [new session: {platform=ANY, browserName=firefox     version=}] at URL: /session)
12:04:04.910 INFO - Done: /session
12:04:04.949 INFO - Executing: org.openqa.selenium.remote.server.handler.GetSes    ionCapabilities@134263a at URL: /session/1338285746744)
12:04:04.950 INFO - Done: /session/1338285746744
12:04:04.991 INFO - Executing: [get: http://www.google.com] at URL: /session/13    8285746744/url)
12:04:05.624 INFO - Done: /session/1338285746744/url
12:04:05.658 INFO - Executing: [find element: By.name: q] at URL: /session/1338    85746744/element)
12:04:05.919 INFO - Done: /session/1338285746744/element
12:04:05.988 INFO - Executing: [send keys: 0 org.openqa.selenium.support.events    EventFiringWebDriver$EventFiringWebElement@4175a8c3, [selenium google code]] at    URL: /session/1338285746744/element/0/value)
12:04:06.095 INFO - Done: /session/1338285746744/element/0/value
12:04:06.124 INFO - Executing: [submit: 0 org.openqa.selenium.support.events.Ev    ntFiringWebDriver$EventFiringWebElement@4175a8c3] at URL: /session/133828574674    /element/0/submit)
12:04:06.247 INFO - Done: /session/1338285746744/element/0/submit
12:04:06.274 INFO - Executing: [delete session: 1338285746744] at URL: /session    1338285746744)
12:04:06.346 INFO - Done: /session/1338285746744 
```

有人遇到过这个吗？我知道 Selenium 不正式支持 PHP。但我认为它不应该让任何连接像这样使服务器失败。我还想知道，尽管示例代码显着地显示在 php-webdriver-bindings 的主页上，但显然没有人注意到。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:49:23.660

这是由于您使用的 PHP WebDriver 绑定库发送的“Accept:”标头不正确。

在会话初始化时，您需要指定标头：“Accept: application/json”

为此，您需要稍微修补您的库或升级到已经可以进行此修复的最新版本。

要手动应用补丁 - 找到将初始请求发送到 WebDriver 服务器的行：

```
curl_setopt( $this->_curl, CURLOPT_HTTPHEADER, array("application/json;charset=UTF-8")); 
```

并将其更改为：

```
curl_setopt( $this->_curl, CURLOPT_HTTPHEADER, array("application/json;charset=UTF-8", "Accept: application/json")); 
```

错误将不再发生。在此处查看更多信息：

[http://code.google.com/p/selenium/issues/detail?id=2091](http://code.google.com/p/selenium/issues/detail?id=2091)

[https://github.com/facebook/php-webdriver/issues/9#issuecomment-3381300](https://github.com/facebook/php-webdriver/issues/9#issuecomment-3381300)

# unit-testing - 单元测试 SignalR 集线器

> ID：10797368
> 
> 赞同：19
> 
> 时间：2012-05-29T10:30:54.900
> 
> 标签：unit-testing, testing, nunit, signalr

我想在 SignalR 中测试我的集线器，最好的方法是什么？

到目前为止我想到的可能的解决方案：

*   创建一个可测试的 Hub
*   分离类的抽象逻辑
*   Selenium（想测试更小的单元）
*   还是忽略了一些 SignalR 测试功能

目前使用 SignalR 0.4 和 NUnit 作为测试框架。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T01:52:40.850

此[链接](http://3amcode.blogspot.com/2012/07/unit-testing-signalr-hubs.html)显示如何使用 Moq 对 SignalR 集线器方法进行单元测试。您模拟存储库、客户端、上下文和调用者。这是来自该站点的代码，我做了一些小改动以使其与最新的 SignalR 一起使用：

```
public class TestableChatHub : ChatHub  
{  
 public Mock<IChatRepository> MockChatRepository { get; private set; }

 public TestableChatHub(Mock<IChatRepository> mockChatRepository)  
   : base(mockChatRepository.Object)  
 {
   const string connectionId = "1234";  
   const string hubName = "Chat";  
   var mockConnection = new Mock<IConnection>();  
   var mockUser = new Mock<IPrincipal>();  
   var mockCookies = new Mock<IRequestCookieCollection>();

   var mockRequest = new Mock<IRequest>();  
   mockRequest.Setup(r => r.User).Returns(mockUser.Object);  
   mockRequest.Setup(r => r.Cookies).Returns(mockCookies.Object);

   Clients = new ClientProxy(mockConnection.Object, hubName);  
   Context = new HubCallerContext(mockRequest.Object, connectionId);

   var trackingDictionary = new TrackingDictionary();  
   Caller = new StatefulSignalProxy(
        mockConnection.Object, connectionId, hubName, trackingDictionary);  
 }  
} 
```

然后该站点显示您可以使用这个可测试的集线器来编写单元测试：

```
 [TestClass]  
   public class ChatHubTests  
   {  
     private TestableChatHub _hub;

     public void SetUpTests()  
     {  
       _hub = GetTestableChatHub();  
     }

     [Test]  
     public void ExampleTest()  
     {  
       SetUpTests();
       const string message = "test";  
       const string connectionId = "1234";

       var result = _hub.Send(message);

       _hub.MockChatRepository.Verify(r => r.SaveMessage(message, connectionId));
       Assert.IsTrue(result);  
     }

     private TestableChatHub GetTestableChatHub()  
     {  
       var mockRepository = new Mock<IChatRepository>();  
       mockRepository.Setup(m => m.SaveMessage(
            It.IsAny<string>(), It.IsAny<string())).Returns(true);  
       return new TestableChatHub(mockRepository);  
     }  
   } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-25T10:48:29.757

使用几个巧妙的技巧来创建单元测试 SignalR 集线器非常简单。需要注意的一件事是 SignalR 使用`dynamic`了您的模拟框架可能不支持的类（我使用[NSubstitute](http://nsubstitute.github.io/)）。

```
public class ProjectsHub: Hub
{
   public void AddProject(string id)
   {
      Clients.All.AddProject(id);
   }
}

[TestFixture]
public class ProjectsHubTests
{
    // Operations that clients might receive
    // This interface is in place in order to mock the
    // dynamic object used in SignalR
    public interface ISignals
    {
        void AddProject(string id);
    }

    [Test]
    public void AddProject_Broadcasts()
    {
        // Arrange
        ProjectsHub hub = new ProjectsHub();
        IHubCallerConnectionContext clients = 
                Substitute.For<IHubCallerConnectionContext>();
        ISignals signals = Substitute.For<ISignals>();
        SubstituteExtensions.Returns(clients.All, signals);
        hub.Clients = clients;

        // Act
        hub.AddProject("id");

        // Assert
        signals.Received(1).AddProject("id");
    }
} 
```

重写它以使用例如 Moq 应该非常简单。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T09:25:37.273

这个问题是很久以前的问题了，但我还是会尽力回答。

如果您的实际集线器类中有很多逻辑，那么将逻辑抽象到一个单独的类肯定是​​有意义的。我为我的 SignalR 驱动的多人演示做了同样的事情。集线器类本身的唯一行为是与消息传递相关的行为。所有进一步的行动都应授权。

注意：这与 ASP .NET MVC 中的控制器设计指南非常相似：保持控制器小型化并委派实际工作。

如果您希望与 SignalR 的集成测试实际做一些工作，selenium webdriver 将是一个不错的选择。但是您可能需要进行一些调整才能使 SignalR 消息传递在测试环境中完美运行。在谷歌上搜索“signalr selenium”（不带引号）以开始正确的轨道。

一些关于 SignalR 自动化测试的博文 =>[这里](http://www.bradygaster.com/post/doing-bdd-with-signalr-and-jasmine)和[这里](http://www.bradygaster.com/post/testing-signalr-connections-with-nunit)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-30T23:33:54.003

使用 SignalR 2.0，您可以这样做：

```
// Arrange
var hub = new CodeInteractivePreviewHub();
var mockClients = new Mock<IHubCallerConnectionContext<dynamic>>();
hub.Clients = mockClients.Object;
dynamic all = new ExpandoObject();
mockClients.Setup(m => m.All).Returns((ExpandoObject)all);

// Act
var allSourceCodes = hub.InitiateCommunication(); //Change this line to your Hub's method 

// Assert
Assert.IsNotNull(allSourceCodes); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-28T12:52:21.037

这是 Iarsm 答案的修改版本，可与 XUnit 和 MOQ 一起使用。

```
using Microsoft.AspNet.SignalR;
using Microsoft.AspNet.SignalR.Hubs;
using Moq;
using Xunit;

namespace TestLibrary {
public class ProjectsHub : Hub {
    public void AddProject(string id) {
        Clients.All.AddProject(id);
    }
}

public class ProjectsHubTests {
    // Operations that clients might receive
    // This interface is in place in order to mock the
    // dynamic object used in SignalR
    public interface ISignals {
        void AddProject(string id);
    }

    [Fact]
    public void AddProject_Broadcasts() {
        // Arrange
        ProjectsHub hub = new ProjectsHub();
        var clients = new Mock<IHubCallerConnectionContext<dynamic>>();
        var signals = new Mock<ISignals>();
        hub.Clients = clients.Object;

        signals.Setup(m => m.AddProject(It.Is<string>(s => s == "id"))).Verifiable();
        clients.Setup(m => m.All).Returns(signals.Object);

        // Act
        hub.AddProject("id");

        // Assert
        signals.VerifyAll();
    }
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-09T16:51:16.320

我的界面不在测试项目中，但这是我使用 NUnit 和 Moq 的方式。

```
using Microsoft.AspNetCore.SignalR;
using Moq;
using NUnit.Framework;

namespace TestLibrary
{
    // Operations that clients might receive
    // This interface is in place in order to mock the
    // dynamic object used in SignalR
    public interface ISignals
    {
        void AddProject(string id);
    }

    public class ProjectsHub : Hub<ISignals>
    {
        public void AddProject(string id)
        {
            Clients.All.AddProject(id);
        }
    }

    public class ProjectsHubTests
    {

        [Test]
        public void AddProject_Broadcasts()
        {
            // Arrange
            ProjectsHub hub = new ProjectsHub();
            var clients = new Mock<IHubCallerClients<ISignals>>();
            var signals = new Mock<ISignals>();
            hub.Clients = clients.Object;

            signals.Setup(m => m.AddProject(It.Is<string>(s => s == "id"))).Verifiable();
            clients.Setup(m => m.All).Returns(signals.Object);

            // Act
            hub.AddProject("id");

            // Assert
            signals.VerifyAll();
        }
    }
} 
```

# java - Android：设置 TableRow 内容的边距（意思是：列之间的边距）

> ID：10797373
> 
> 赞同：1
> 
> 时间：2012-05-29T10:31:14.377
> 
> 标签：java, android, mobile

我通过代码动态创建一个 TableLayout 并希望在列之间设置一个边距。我的 TableRows 包含的唯一内容类型是 TextView。

我的意图是`android:layout_marginRight`在每个 TextView 上放一个简单的。但我想通过 xml 而不是代码来定义它。

我尝试了什么：

编码：

```
txtView.setTextAppearance(context, R.style.TableTextView);
txtView.setText(content);
tableRow.addView(txtView); 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="TableTextView">
      <item name="android:textAppearance">?android:attr/textAppearanceLarge</item>
      <item name="android:textStyle">bold</item>
      <item name="android:layout_marginRight">5dip</item>
  </style>
</resources> 
```

发生什么了：

XML 中的`layout_marginRight`集合不起作用，但 XML 中的`textAppearance`and`textStyle`集合起作用。我假设 setTextAppearance 方法是为 TextView 分配边距的错误方法？如果我可以通过 XML（就像我在上面尝试过的那样）而不是 Java 代码来做到这一点，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:40:29.780

发生这种情况是因为您将样式设置为文本本身而不是 TextView 元素。您应该在 XML 中设置元素样式。也可以从代码中实现这一点，但我认为最好在 XML 布局文件中做到这一点。

就像是 ：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    style="@style/mTableTextView" /> 
```

关于从代码中设置它，我不是专家，但我知道你可以以某种方式夸大它。看看[这个](https://stackoverflow.com/questions/3142067/android-set-style-in-code)和[这个](https://stackoverflow.com/questions/7799472/setting-style-for-textview-in-code-android)问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:40:50.850

您想在列之间留出边距

```
android.widget.TableRow.LayoutParams param = new android.widget.TableRow.LayoutParams();
param.rightMargin = Converter.dpToPixel(10, getContext()); // right-margin = 10dp
button.setLayoutParams(param);

// Converter:
private static Float scale;
public static int dpToPixel(int dp, Context context) {
    if (scale == null)
        scale = context.getResources().getDisplayMetrics().density;
    return (int) ((float) dp * scale);
} 
```

您可以设置不同的值表参数。

# objective-c - 在 Objective-C 中，什么实用程序在评论中使用 @brief 标签？

> ID：10797377
> 
> 赞同：7
> 
> 时间：2012-05-29T10:31:26.317
> 
> 标签：objective-c, doxygen

我刚开始用 Objective-C 编程，发现了一些示例注释，如下所示：

```
/*!
@brief The UIImageView we use to display the image generated from the imageBuffer
*/ 
```

目的是`@brief`什么？这与像 Doxygen 这样的文档系统有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T10:46:10.117

是的。这是 doxygen 中函数描述的**标准格式**，使用命令`@brief`进行简要说明。

也许你更熟悉这个表达式`\brief`，但`@brief`也是允许的。您已在手册的[本节](http://www.doxygen.nl/manual/docblocks.html)中解释了所有变体。

当您生成 doxygen 文档时，输入该命令`@brief`将生成函数的简短描述。如果您愿意，可以扩展该简短描述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-05T11:01:48.513

此标签还使您能够在 Xcode 的快速帮助中显示您的评论。

![在此处输入图像描述](../Images/c888be05fd0e61e5a87e487f136fab6d.png)

几乎完整的模式是：

```
/**
 @brief Example usage:
 @code
 @endcode
 @param param
 */ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T10:35:30.733

是的，这确实是一个 doxygen 标签。

# android - 签名号码的模式

> ID：10797385
> 
> 赞同：0
> 
> 时间：2012-05-29T10:31:55.320
> 
> 标签：android

这是我创建的模式，用于接受具有 5 个整数和 2 个十进制数的十进制数。

```
String pattern = "[0-9]{0,5}+([" + ds + "]{1}||[" + ds + "]{1}[0-9]{1,2})?"; 
```

`ds`是十进制格式符号。

如何修改它以接受负数？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:09:28.273

```
String pattern = "[-+]?[0-9]{0,5}([.]{1}[0-9]{1,2})?" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:34:27.067

加`[-+]?`在前面，把你有的放在中间`()`。

如果我写正则表达式，我会这样写：`[-+]?(\\d{0,5}\\.\\d{1,2}|\\d{1,5}\\.\\d{0,2})`

它将匹配这些边界情况：

```
.5
6.
.43
0.
05.50 
```

但它会拒绝`.`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:33:54.287

假设负数以“-”号开头，您只需将其放在开头：

```
String pattern = "-?([0-9]{0,5}+([" + ds + "]{1}||[" + ds + "]{1}[0-9]{1,2})?)"; 
```

请注意，我没有检查模式其余部分的有效性，只是展示了如何在其他所有内容之前添加减号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:36:53.907

尝试这个。

```
String pattern = "^[-+]?\d{1,5}(\.\d{1,2})?$"; 
```

# jquery - 带有标题的jQuery滑动框，标题在页面加载时从顶部开始

> ID：10797388
> 
> 赞同：2
> 
> 时间：2012-05-29T10:32:01.813
> 
> 标签：jquery

jQuery 对此非常陌生。我正在使用一个插件来为带有标题的 jQuery 滑动框设置动画。

```
<script type="text/javascript">
            $(document).ready(function(){

                $('.boxgrid.caption').hover(function(){
                    $(".cover", this).stop().animate({top:'130px'},{queue:false,duration:160});
                }, function() {
                    $(".cover", this).stop().animate({top:'190px'},{queue:false,duration:160});
                });
            });
        </script> 
```

问题在于，当页面加载每个 div 容器顶部的标题位置时。但我希望底部的标题只显示“页面加载”上的名称。 [http://www.missbee.se/myPerformance3/](http://www.missbee.se/myPerformance3/)

这是插件页面， [http://webdesignandsuch.com/posts/sliding-doors/](http://webdesignandsuch.com/posts/sliding-doors/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:39:10.743

在第 72 行的 style.css

改变

```
.caption .boxcaption {
    left: 0;
    top: 190;
} 
```

至

```
.caption .boxcaption {
    left: 0;
    top: 190px;
} 
```

只是`'px'`失踪了

# iphone - 将 NSString 传递给另一个视图控制器会使应用程序崩溃

> ID：10797390
> 
> 赞同：0
> 
> 时间：2012-05-29T10:32:15.707
> 
> 标签：iphone, objective-c, ios, extern

我有以下代码，我将 buttonString (an `NSString`) 的值传递给另一个视图控制器。应用程序在设置时崩溃`buttonString = imageName;`，然后在另一个视图控制器上调用。

在@interface之前的FirstViewController的.h文件中：

```
extern NSString* buttonString; 
```

在实现前FirstViewController的.m文件中：

```
NSString* buttonString = nil; 
```

这是代码：

```
NSString *imageName = [NSString stringWithFormat:@"myImage_%d.png", selectNum + 1 ];
NSLog(@"imageName is %@", imageName);

[buttonImage setImage:[ImgUtil image:imageName]];

buttonString = imageName;

NSLog(@"buttonString %@", buttonString); 
```

问题出现在`SecondViewController`调用时：

```
NSLog(@"button Message is %@", buttonString); 
```

`buttonString = imageName;`如果我从中删除， `FirstViewController`则应用程序不会崩溃。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:48:32.330

发生这种情况是因为`buttonString`指向一个已释放的对象。

从您的代码段中，imageName 是一个自动发布的 NSString。当您说它`buttonString = imageName;`只是指向`buttonString`与`imageName`. 此方法结束后，被释放，指向`imageName`的内存也被释放。`buttonString`

这就是当您`buttonString`在 NSLog 中引用时应用程序崩溃的原因。

理想情况下，您不应该在 Objective C 中使用像这样的全局变量来共享数据。但是如果您只想完成这项工作，您需要在`buttonString`首次使用时分配内存。确保在以后没用时释放它。 **注意：这仍然是一种糟糕的做事方式。**

# c - crontab 执行程序的问题

> ID：10797394
> 
> 赞同：1
> 
> 时间：2012-05-29T10:32:25.647
> 
> 标签：c, linux, memory, arm, embedded-linux

我已经为运行 Angstrom Linux 的嵌入式系统（Devkit8000，它是众所周知的 BeagleBoard 的克隆）编写了一个 c 程序。

该程序创建了几个线程，其中一个负责用连接到电路板上的相机拍照，现在第二个线程只将该图像移动到另一个路径。该程序应该全天运行，停止它的唯一方法是发送信号。

我编辑了 crontab 以在特定时间启动程序并在它必须停止时发送信号，问题是以这种方式启动程序会导致进程在运行一段时间后被终止，但是，如果我启动手动编程（通过命令行），它可以完美运行并且不会停止。

我不知道 crontab 和命令行之间这种不同行为的原因。我检查了系统日志，但没有发现任何有用的东西。我也读了一点，发现操作系统可以杀死一个进程，如果它使用这么多资源，但是这仅在一种情况下发生（crontab 与手动）没有意义......

关于发生了什么的任何线索？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:31:41.127

The main difference is that running a job through cron invokes a non-interactive non-login shell. The effect of that depends on the default shell for your user. For example, if you are using Korn shell or Bash then your .profile will not be executed, as it would on an interactive login shell. Korn shell 88 will execute .kshrc (the $ENV file) but ksh93 will not. So, a good start might be to call your program from a script, after first "sourcing" your .profile file:

```
. $HOME/.profile 
```

Failing that... When you say that the process is "killed", do you get such a message? If so, then that sounds like someone sending SIGKILL, i.e. `kill -9`. If not, then maybe you could run strace or ltrace to find out at what point it dies.

# jquery - jQuery .load() 帮助已更新

> ID：10797397
> 
> 赞同：2
> 
> 时间：2012-05-29T10:32:41.190
> 
> 标签：jquery, html

我仍在学习 jQuery，所以我不知道这里发生了什么，但我正在使用我在 css-tricks 上找到的过滤脚本并尝试在点击时将内容加载到 div 中，但我正在进入`undefined`url。

我在不受过滤脚本影响的页面的一部分上执行了此操作，并且它有效，所以我只需要弄清楚有什么冲突。

任何人都可以请帮助！

所以这是我的 jQuery 加载内容`div`：

```
$(document).ready(function(){
    $('#target').click(function() {
        event.preventDefault();
        $('#target').empty();
        $('#target').load('project1.html');
    });
}); 
```

这是html：

```
<div id="target">
    <div class="sixteen columns clearfix thumbnail photoeditor">
        <div class="two-thirds columns alpha">
            <img src="images/d1.png" class="scale-with-grid" alt="fieldlazer" />
        </div>
        <div class="one-third columns omega">
            <span class="title">Title goes here</span>
            <span class="details">Description goes here</span>
        </div>
    </div>
</div> 
```

这是过滤器 jquery 脚本：

```
(function($){
    // Shuffle function from: http://james.padolsey.com/javascript/shuffling-the-dom/

    $.fn.shuffle = function() {
        var allElems = this.get(),
            getRandom = function(max) {
                return Math.floor(Math.random() * max);
            },
            shuffled = $.map(allElems, function() {
                var random = getRandom(allElems.length),
                    randEl = $(allElems[random]).clone(true)[0];
                allElems.splice(random, 1);
                return randEl;
            });

        this.each(function(i){
            $(this).replaceWith($(shuffled[i]));
        });

        return $(shuffled);
    };
})(jQuery);

$(function(){
    $(".thumbnail")
        .css("opacity","0.7")
        .hover(
            function() { $(this).css("opacity","1"); }, 
            function() { $(this).css("opacity","0.7"); }
        )

        $("#allcat").click(function(){
            $(".thumbnail").slideDown();
            $("#catpicker a").removeClass("current");
            $(this).addClass("current");
            return false;
        });

        $(".filter").click(function(){
            var thisFilter = $(this).attr("id");
            $(".thumbnail").slideUp();
            $("."+ thisFilter).slideDown();
            $("#catpicker a").removeClass("current");
            $(this).addClass("current");
            return false;
        });

        $(".thumbnail").shuffle();
}); 
```

任何帮助都会非常棒。谢谢！

编辑：或者我试过：

```
$(document).ready(function(){

$('#target').click(function(){

var link = $(this).attr('rel');
event.preventDefault();
$('#target').empty();
$('#target').load(link);

});
}); 
```

使用 html：

```
<div id="target" class="sixteen columns clearfix thumbnail photoeditor" rel="404.html">
<div class="two-thirds columns alpha">
<img src="images/d1.png" class="scale-with-grid" alt="fieldlazer" /></div>
<div class="one-third columns omega">
<span class="title">Title goes here</span>
<span class="details">Description goes here</span>
</div>
</div> 
```

仍然无济于事。

编辑：另一个更新

所以我有点让它工作，但它只适用于第一个 div (Project1)，当我清空外部 html 的 DIV 并放回 #main-content 的内容时，它显示得很奇怪，并且没有任何功能工作。有什么建议么？

这是新的 Jquery：

```
$(document).ready(function(){

$('#portfolio div').click(function(event){

var link = $(this).attr('rel');
event.preventDefault();
$('#main-content').load(link);

$("#back").live("click", function(event){
$('#main-content').empty();
$('#main-content').load('index.html #main-content *');
}); 
});
}); 
```

和 HTML：

```
<div id="main-content">
<ul class="tabs-content">
<li class="active" id="portfolio">

<ul id="catpicker">
<li class="active"><a href="#" id="allcat" class="current">View All</a></li>
<li><a href="#" id="photoeditor" class="filter">Photo Editor</a></li> 
<li><a href="#" id="producer" class="filter">Producer</a></li></ul>

<div class="sixteen columns thumbnail photoeditor" rel="project1.html">
<div class="two-thirds columns alpha">
<img src="images/d1.png" class="scale-with-grid" alt="fieldlazer" /></div>
<div class="one-third columns omega">
<span class="title">Project 1</span>
<span class="details">Details go here</span>
</div>
</div>

<div class="sixteen columns thumbnail photoeditor" rel="project2.html">
<div class="two-thirds columns alpha">
<img src="images/d1.png" class="scale-with-grid" alt="fieldlazer" /></div>
<div class="one-third columns omega">
<span class="title">Project 2</span>
<span class="details">Details go here</span>
</div>
</div>

<div class="sixteen columns thumbnail photoeditor" rel="project3.html">
<div class="two-thirds columns alpha">
<img src="images/d1.png" class="scale-with-grid" alt="fieldlazer" /></div>
<div class="one-third columns omega">
<span class="title">Project 3</span>
<span class="details">Details go here</span>
</div>
</div>

</li>
<li id="words">
</li>
</ul>
</div><!-- main content --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:07:23.813

我在 prevent default 行上出现错误，那是因为您忘记传递事件。像这样将事件传递给 .click 函数。

```
$('#target').click(function(event) 
```

之后它对我有用。

# c - 哪个更快：空函数调用或 If 语句？

> ID：10797398
> 
> 赞同：8
> 
> 时间：2012-05-29T10:32:42.633
> 
> 标签：c, performance

我正在实现一个循环缓冲区来存储固定大小的数据结构，如队列。这个循环缓冲区用三个参数初始化：-

```
/*
 * Initialize the ring buffer.
 * @capacity Max capacity of ring buffer.
 * @item_size Fixed size of item that will be put in this circular buffer.
 * @item_cleaner Clean callback, NULL if cleanup not required.
 */
ringbuf*
ringbuf_create(size_t capacity, size_t item_size, clean_up_cb item_cleaner) 
```

我的循环缓冲区始终处于`wrapping`模式，这意味着当新项目放入完整的循环缓冲区时，最后一项总是被替换。由于动态分配的对象也可以放入这个缓冲区，因此循环缓冲区会保持引用一个清理回调函数，以便在替换或删除项目时释放它们。但同时这个回调函数也可以`NULL`（不需要清理的时候）。在我的代码的任何地方，我都有这样的陈述：-

```
if(buffer->callback != NULL)
   buffer->callback(item); 
```

现在，为了防止这些`if`声明，当用户不提供任何回调函数时，我放置了空存根函数。这阻止我每次检查回调函数是否`NULL`存在。

使用这种方法，我的代码看起来很整洁。但我不确定，其中哪一个更快？在装配层面上，`empty function call`在`if statement`速度方面有什么关系？它们是等价的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T10:53:00.040

不用担心速度，我可能只是编写代码：

```
 if (buffer->callback) buffer->callback(item); 
```

仅仅因为它是清晰和惯用的。它肯定不会比空函数调用慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T11:02:40.717

一个空的存根函数实际上是两个 JMP 操作和 CPU 上分配的 PUSH/POP 操作。IF 通常是单个 COMP 操作，它比任何 JMP+PUSHS+POPS 都便宜得多。

如果您的 'IF' 通常返回 false/true，那么我不会担心它，因为 CPU 通过预测结果以非常好的方式优化 IF，只要 IF 是“可预测的”（通常返回 true 或 false 或具有某种模式）真/假）

我会选择IF。

# ruby - RoR 非 ActiveRecord 模型 to_json ：除了不工作

> ID：10797399
> 
> 赞同：2
> 
> 时间：2012-05-29T10:32:43.067
> 
> 标签：ruby, ruby-on-rails-3

我有一个自定义模型“结果”，如下所示，其中在其属性组和类别中是具有 id、created_at、updated_at 的活动记录模型。

```
class Result
  attr_accessor :groups, :categories
end 
```

当对 Result 对象使用 :except[:id, :created_at, :updated_at] 方法在组和类别上调用 to_json 时，没有效果，构造的 JSON 输出包含 id、created_at 和 updated_at。

请帮助我构建适当的条件 to_json 以在组和类别上获取没有 id、created_at、updated_at 的 JSON 输出。

例子：

```
result = Result.new
result.groups = groups
result.categories = categories

result.to_json(:include => {
  :groups => {:except => [:id, :created_at, :updated_at]},
  :categories => {:except => [:id, :created_at, :updated_at]}
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:21:41.257

您在序列化时所拥有的这些陈述都没有`to_json`被考虑在内。

根据[此](http://api.rubyonrails.org/classes/ActiveModel/Serialization.html)页面，为了使这些`:exclude, :include, :only`语句起作用，您必须执行以下操作（因为您没有扩展`ActiveRecord::Base`）：

```
class Result
  include ActiveModel::Serializers::JSON

  attr_accessor :groups, :categories

  def attributes
    {'groups' => groups, 'categories' => categories}
  end
end 
```

和 中的类`groups`也是如此`categories`。

# c++ - 如何在c ++中将光标移动到最后打开的窗口（可能是弹出窗口）

> ID：10797400
> 
> 赞同：2
> 
> 时间：2012-05-29T10:32:48.393
> 
> 标签：c++, winapi, mouse

我需要将鼠标移动到最后打开的窗口。最后一个窗口将是由任何网站创建的弹出窗口。我想我需要的只是获取最后打开的窗口的位置并使用 SetMousePos，对吧？我对 Windows API 不是很熟悉，欢迎提供任何帮助 - 谢谢！

编辑：为了回答这些问题，我们正在编写一个获取恶意软件数据的程序。不幸的是，一些恶意软件只有在鼠标移动到他们打开的弹出窗口后才开始工作。它是基于研究的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:14:47.977

跟踪最近打开的窗口的一种方法是使用[SetWinEventHook](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373640(v=vs.85).aspx)来监听 EVENT_OBJECT_CREATE 和 EVENT_OBJECT_SHOW 事件。在回调中，过滤：

*   仅具有非空 HWND 的事件，其中 idObject==OBJID_WINDOW 仅获取窗口创建事件（相对于其他创建事件，例如列表框中的项目）
*   对于仅顶级窗口，还通过检查[GetAncestor(hwnd, GA_PARENT)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633502(v=vs.85).aspx) is GetDesktopWindow()进行过滤
*   并检查窗口当前是否确实可见（在 GetWindowLong(GWL_STYLE) 中设置了 WS_VISIBLE 样式）。

如果您只关心来自特定应用程序的 HWND，还可以通过 GetWindowThreadProcessId() 和传递给 SetWinEventHook 的线程/进程进行过滤。

检查这两个事件的原因是某些窗口被创建为隐藏然后显示，其他窗口被创建为完全可见，而其他窗口被创建一次，然后在其生命周期内多次显示/隐藏。

然后，您可以在全局中缓存这个“最后已知创建的 hwnd”，并根据需要检查它，使用 GetWindowRect() 获取其位置，并使用 SetCursorPos() 将鼠标移动到该位置。

--

如果最近的弹出窗口是一个获得焦点的活动窗口 - 就像对话框的情况，但通常不是“弹出”窗口的情况 - 你可以使用[GetGUIThreadInfo(NULL, ...)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633506(v=vs.85).aspx)来确定当前活动的 HWND ，这可能是您正在寻找的那个，在您传递给它的结构的 GUITHREADINFO.hwndActive 成员中返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:40:16.723

我没有对此进行测试，但我相信您可以尝试以下方法：

1.  枚举正在运行的进程并按 PID 排序。
2.  最高编号的 PID 应该是“最新”的进程。
3.  对于最新进程枚举其窗口（使用 GetWindowThreadProcessId）
4.  在这一点上，我想您必须选择您认为是“主”窗口的窗口，例如，如果恶意软件打开两个窗口，我不知道您将如何选择要关注的窗口？
5.  在您选择的 HWND 中，获得其在桌面上的位置。
6.  使用 SetMousePos 将鼠标移动到窗口的位置。

我没有包含这些任务所需的所有 API，因为它通常很容易在这里找到 :)

# delphi - Delphi 5 Form Caption 字体大小

> ID：10797403
> 
> 赞同：3
> 
> 时间：2012-05-29T10:33:01.780
> 
> 标签：delphi, font-size, delphi-5

我目前正在将我的 Delphi5 应用程序的大小从 800x600 调整为可扩展到 1440x1080。

唯一看起来仍然太小的是表单标题和 ShowMessage/MessageDlg 文本。

我认为 ShowMessage 文本与 Windows 默认大小有关吗？

有什么办法可以增加表单标题的字体大小吗？它似乎与表单字体大小无关。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T05:32:42.447

标题栏的字体大小由 windows 处理并且是系统范围的。如果要修改字体或其他属性，则必须手动绘制表单的非客户区（Windows）。

在 Windows XP 之前，您可以直接在标题（标题）栏中绘制修改处理[`WM_NCPAINT`](http://msdn.microsoft.com/en-us/library/dd145212%28v=vs.85%29.aspx)消息的字体、颜色和文本，从 windows vista 和[DWM](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969540%28v=vs.85%29.aspx)介绍开始，您必须使用带有值的[DwmSetWindowAttribute](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969524%28v=vs.85%29.aspx)函数[`DWMWA_ALLOW_NCPAINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969530%28v=vs.85%29.aspx)才能使用此技术。

# jpa - 在 JPA 中更新查询结果

> ID：10797404
> 
> 赞同：2
> 
> 时间：2012-05-29T10:33:03.187
> 
> 标签：jpa, persistence

我有下面的代码，它将查询一个实体并设置一个随机数：

```
 EntityManager em = EMF.get().createEntityManager();
    Profile user = null;
    Query q = null;
    try{
        q = em.createNamedQuery("Profile.getRandomProfile");
        q.setParameter("random", Math.random());
        q.setMaxResults(1);
        user = (Profile) q.getSingleResult();

        user.setRandom( Math.random() );

    } catch(NoResultException ex){
            ex.printStackTrace();
    } 
```

我认为这样做会更新配置文件的随机属性。为什么不更新？如何更新随机属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:27:31.123

您需要围绕您的更改开始并提交事务。

看，

[http://en.wikibooks.org/wiki/Java_Persistence/Transactions](http://en.wikibooks.org/wiki/Java_Persistence/Transactions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:35:51.670

您没有将其保存回数据库。您应该使用 merge() 方法一 EntityManager 在事务中更新

# c - 如何将测试用例添加到 ltp

> ID：10797406
> 
> 赞同：1
> 
> 时间：2012-05-29T10:33:09.783
> 
> 标签：c, linux, shell, kernel

我需要添加一个由[ltp](http://ltp.sourceforge.net/)`shell`编写的简单测试用例。[我在这个页面](http://ltp.sourceforge.net/documentation/how-to/ltp.php#_6)之后添加了一个生成文件。它说我应该像这样创建一个makefile：

```
all:
install:
    @ln -f mail_tests.sh ../../bin/mail_tests.sh

clean: 
```

但我不知道`../../bin/mail_tests.sh`在哪里。我的意思是我在 ltp 的源目录中找不到 bin 目录。
那么，我该如何添加我的测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T13:26:42.213

LTP sf.net 页面已过时。

LTP GitHub wiki 中有一些开发人员文档，希望对于想要在没有任何先验知识的情况下编写 LTP 测试用例的人来说足够详细，请参阅：

[https://github.com/linux-test-project/ltp/wiki/Test-Writing-Guidelines](https://github.com/linux-test-project/ltp/wiki/Test-Writing-Guidelines)

[https://github.com/linux-test-project/ltp/wiki/BuildSystem](https://github.com/linux-test-project/ltp/wiki/BuildSystem)

如果有任何不清楚的地方，请随时在 ltp-list@lists.sourceforge.net 的项目邮件列表中提问。

# ruby-on-rails - 使用 Thinking Sphinx 按计数排序

> ID：10797408
> 
> 赞同：3
> 
> 时间：2012-05-29T10:33:10.520
> 
> 标签：ruby-on-rails, sphinx

我希望我的搜索引擎能够根据某种案件类型的案件数量来订购律师。律师完成某一类型案件的次数越多，他的排名就越高。

`lawyer.rb`

```
has_many :cases    
has_many :case_types, :through => :cases

define_index do
        indexes case_types.name, :as => :case_types
        has case_types(:id), :as => :case_types_id
        has "SUM(case_types)", :as => :case_type_count #this line gives an error,  as my lawyer table does't have a case_type column, also, I need to count DISTINCT case_types
      end 
```

在我的`search_controller.rb`，我想做类似的事情，建议是案例类型的名称

```
@lawyers = Lawyer.search params[:suggestion], :order => "@case_type_count DESC" 
```

我走错路了吗？我应该考虑一种较少面向狮身人面像的方法吗？问题是我需要在@lawyers 上做一个 each_with_geodist，所以我需要让我的律师通过 Sphinx 搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:51:21.380

将以下内容添加到您的 define_index 中：

```
has "COUNT(case_types.id)", :as => :case_type_count, :type => :integer

join case_types 
```

然后按 case_count 检索：

```
Lawyer.search("", :order => "case_type_count desc") 
```

`development.sphinx.conf`我发现阅读允许我查看正在生成的列名的 sql 代码很有用。

# python - 带宽配额管理 Python

> ID：10797409
> 
> 赞同：1
> 
> 时间：2012-05-29T10:33:14.747
> 
> 标签：python, windows, proxy, bandwidth, squid

我最近一直在家里玩一些代理选项，我遇到了一个问题 - 我需要限制带宽配额 - 所以每台计算机每天允许下载/上传 200MB。这可能吗？如果是这样，如何。如果使用 python 无法做到这一点（我对此表示怀疑），是否有任何免费软件可以为我做到这一点？（最好使用 API）。

操作系统：Windows XP SP2/SP3
代理软件：Squid

我确实看过[另一个相关的问题](https://stackoverflow.com/questions/9958891/bandwidth-quota-in-squid)，但这对我没有任何用处（我无法确定它的头或尾......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:37:44.803

也许给[Squid Quota](http://sourceforge.net/apps/trac/squidquota/)一个机会。

# java - 启用调试日志记录时 Kerberos 身份验证失败

> ID：10797413
> 
> 赞同：3
> 
> 时间：2012-05-29T10:33:35.833
> 
> 标签：java, kerberos, ipa, rhel

我目前正在运行带有 IPA 和用户 test_user 定义的 RHEL 6 服务器，尝试使用“Krb5LoginModule”登录模块进行身份验证我在这个问题的底部遇到了异常。

但是 - 如果我添加系统属性`-Dsun.security.krb5.debug=true`，则身份验证完成且没有错误 - 该系统属性是失败场景和成功场景之间的唯一变化。

相同的用户名和密码也可以在运行 Java 客户端的同一台机器的 kinit 中完美运行。

这是使用 Oracle jdk1.6.0_32。

所以问题是，当启用调试日志记录会改变登录过程的行为时，还有什么不同？目前启用调试日志以了解故障并不起作用，因为它本身导致它起作用。

```
Exception in thread "main" javax.security.auth.login.LoginException: Integrity check on decrypted field failed (31) - PREAUTH_FAILED
    at com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:696)
    at com.sun.security.auth.module.Krb5LoginModule.login(Krb5LoginModule.java:542)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:769)
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186)
    at javax.security.auth.login.LoginContext$5.run(LoginContext.java:706)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokeCreatorPriv(LoginContext.java:703)
    at javax.security.auth.login.LoginContext.login(LoginContext.java:575)
    at com.darranl.as.sasl.gssapi.KerberosLoginUtil.login(KerberosLoginUtil.java:50)
    at com.darranl.as.sasl.gssapi.KerberosLoginUtil.main(KerberosLoginUtil.java:131)
Caused by: KrbException: Integrity check on decrypted field failed (31) - PREAUTH_FAILED
    at sun.security.krb5.KrbAsRep.<init>(KrbAsRep.java:72)
    at sun.security.krb5.KrbAsReq.getReply(KrbAsReq.java:446)
    at sun.security.krb5.Credentials.sendASRequest(Credentials.java:401)
    at sun.security.krb5.Credentials.acquireTGT(Credentials.java:373)
    at com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Krb5LoginModule.java:662)
    ... 13 more
Caused by: KrbException: Identifier doesn't match expected value (906)
    at sun.security.krb5.internal.KDCRep.init(KDCRep.java:133)
    at sun.security.krb5.internal.ASRep.init(ASRep.java:58)
    at sun.security.krb5.internal.ASRep.<init>(ASRep.java:53)
    at sun.security.krb5.KrbAsRep.<init>(KrbAsRep.java:50)
    ... 17 more 
```

# axis2 - 尝试执行axis2服务客户端时出现异常

> ID：10797416
> 
> 赞同：3
> 
> 时间：2012-05-29T10:33:43.577
> 
> 标签：axis2

我正在尝试创建一个示例axis2 ServiceClient。它抛出错误

```
org.apache.axiom.om.OMException: No meta factory found for feature 'default'; this usually means that axiom-impl.jar is not in the classpath
    at org.apache.axiom.om.OMAbstractFactory.getMetaFactory(OMAbstractFactory.java:170)
    at org.apache.axiom.om.OMAbstractFactory.getMetaFactory(OMAbstractFactory.java:135)
    at org.apache.axiom.om.OMAbstractFactory.getOMFactory(OMAbstractFactory.java:184)
    at org.apache.axis2.description.AxisDescription.<init>(AxisDescription.java:68)
    at org.apache.axis2.engine.AxisConfiguration.<init>(AxisConfiguration.java:148)
    at org.apache.axis2.deployment.DeploymentEngine.populateAxisConfiguration(DeploymentEngine.java:639)
    at org.apache.axis2.deployment.FileSystemConfigurator.getAxisConfiguration(FileSystemConfigurator.java:116)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:68)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContextFromFileSystem(ConfigurationContextFactory.java:184)
    at org.apache.axis2.client.ServiceClient.configureServiceClient(ServiceClient.java:150)
    at org.apache.axis2.client.ServiceClient.<init>(ServiceClient.java:143)
    at org.apache.axis2.client.ServiceClient.<init>(ServiceClient.java:244)
    at org.apache.axis2.samples.tu.client.TUrlSOAPClient.addUrl(TUrlSOAPClient.java:46)
    at org.apache.axis2.samples.tu.client.TUrlClient.actionPerformed(TUrlClient.java:69)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

`axiom-impl.jar`存在于类路径中。下面是代码片段。在控制台中，我可以看到显示 sysout 语句“Entered”，然后在创建 ServiceClient 对象时抛出错误。尝试使用不同版本的`axiom-impl.jar`(1.2.12, 1.2.13, 1.2.7, 1.2.5) 但仍然遇到相同的错误。

```
 public static String testFunction(String testData) throws Exception {
     System.out.println("Entered");
    //Create a service client
    ServiceClient client = new ServiceClient();
    System.out.println("Before calling set end point");
    //Set the endpoint address
    client.getOptions().setTo(new EndpointReference(EPR));
    System.out.println("After calling set end point");
    System.out.println("getPayload(url)="+getPayload(testData));
    //Make the reqest and get the response
    OMElement resp = client.sendReceive(getPayload(testData));
    //Extract the URL and return
    return extractUrl(resp);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-02T07:07:18.970

我遇到了同样的错误，但经过长时间的努力，终于通过使用 axiom-api 1.2.12 和 axiom-impl 1.2.12 解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T09:38:49.710

通过仅用 axiom.jar 替换所有三个单独的公理 jar（axiom-impl-1.2.13.jar、axiom-dom-1.2.13.jar 和 axiom-api-1.2.13.jar）解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T08:19:31.987

当我使用上面的 jar 时，我遇到了另一个错误。java.lang.ClassCastException：java.lang.ClassCastException：org.apache.axiom.om.impl.llom.factory.OMLinkedListImplFactory

我不得不将每个 jar 的版本增加到 1.2.14

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T10:08:20.067

我有同样的错误。我确实用 axiom.jar 替换了单个公理 jar（axiom-impl-1.2.13.jar、axiom-dom-1.2.13.jar 和 axiom-api-1.2.13.jar），但错误仍然发生。

错误的根本原因是 META-INF/axiom.xml 文件的位置。在我的例子中，当 J2EE 服务器容器的 XMLParser 在 jar 文件中本地化时，它无法打开 axion.xml 文件。

我不得不将 META-INF/axiom.xml 复制到 WEB-INF/classes/META-INF/axiom.xml 中。

# database - 如何设计一个业务模型到多个表？

> ID：10797417
> 
> 赞同：0
> 
> 时间：2012-05-29T10:33:44.150
> 
> 标签：database, database-design, normalization, one-to-one

使用一对一关系将一个业务模型设计到多个表中的最佳实践是什么？假设我有下图； ![演示图](../Images/2a7506f0b61b671cb5de29699a633eac.png)

两个表都代表一个业务对象/实体，即 Person。对于表`PersonNationalId`，最佳做法是

1.  添加添加列`PersonNationalId`作为主键
2.  删除唯一键并将其标记`PersonId`为主键？（我推荐这个解决方案）
3.  使用唯一键就很好了，我们不必添加任何主键？

我不考虑将业务拆分为两个/多个表，因为我从系统中的不同屏幕更新每个表，并且我想跟踪更改（通过每个表中`CreatedBy`的`CreatedDate`列）

以前的选择/解决方案的最佳实践是什么？如果您有任何其他解决方案，我将很高兴知道。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:12:24.660

文件过期，当它们过期时，新的文件会发出一个新的号码。他们也会迷路，被盗......所以，从......开始

![在此处输入图像描述](../Images/38d23307b47c77eca7b12ee989dd5ed3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:22:36.410

如果您真的需要 1:1，那么两个 PK 将是相同的，并且您在它们之间会有一个圆形 FK。您的 DBMS 是否支持**延迟**约束，这是“打破”循环并允许插入新数据所必需的？

* * *

话虽如此，在我看来，这种情况并不像 1:1。[正如达米尔建议](https://stackoverflow.com/a/10798912/533120)的那样，它看起来像 1:N 。

# google-chrome-extension - 是否可以在 chrome 扩展中控制页面操作的位置？

> ID：10797424
> 
> 赞同：0
> 
> 时间：2012-05-29T10:33:54.793
> 
> 标签：google-chrome-extension

我想在地址栏中添加一个图标。它工作正常，但还有其他扩展也添加了这样的图标。我看不到这些图标排序背后的逻辑。

在家里，我的图标在最左边的位置，而在工作中，它在中间的某个地方。我不能通过拖动来改变它（比如地址栏旁边的按钮）。

你知道这是否可能吗？如果是，如何？或者哪个因素负责排序？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:29:51.157

看来，扩展程序的安装顺序负责图标的排序。

最新安装的扩展出现在最左边。

# java - 从 Java 调用存储过程 - Spring JDBC 的现代替代方案？

> ID：10797425
> 
> 赞同：4
> 
> 时间：2012-05-29T10:34:03.120
> 
> 标签：java, stored-procedures, jdbc

我一直在使用 Spring JDBC 的 SimpleJdbcCall。我觉得很有帮助，但对我来说仍然不够简单和流畅。理想情况下，我认为 JDBC 调用与普通的 Java 方法调用没有区别。

看到最近Java出现了很多轻量级的ORM框架（比如Ebean），想问一下存储过程方向有没有类似的发展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T10:43:13.137

### Using JPA 2.1

Calling stored procedures from Java through JDBC or JPA can be very tedious and verbose. If you look a the [examples provided by EclipseLink](http://wiki.eclipse.org/EclipseLink/Release/2.5/JPA21), things haven't gotten that much simpler with JPA 2.1:

```
@NamedStoredProcedureQuery(
    name="ReadUsingMultipleResultSetMappings",
    procedureName="Read_Multiple_Result_Sets",
    resultSetMappings = {
        "EmployeeResultSetMapping", 
        "AddressResultSetMapping",  
        "ProjectResultSetMapping", 
        "EmployeeConstructorResultSetMapping" 
    }
)

@SqlResultSetMappings({
    @SqlResultSetMapping(
        name = "EmployeeResultSetMapping",
        entities = {
            @EntityResult(entityClass = Employee.class)
        }
    ),
    @SqlResultSetMapping(
        name = "EmployeeConstructorResultSetMapping",
        classes = { 
            @ConstructorResult(
                targetClass = EmployeeDetails.class,
                columns = {
                    @ColumnResult(name="EMP_ID", type=Integer.class),
                    @ColumnResult(name="F_NAME", type=String.class),
                    @ColumnResult(name="L_NAME", type=String.class),
                    @ColumnResult(name="R_COUNT", type=Integer.class)
                }
            )
        }
    )
}) 
```

### Using jOOQ

A good option is to leverage a code generator, such as the one by [jOOQ](http://www.jooq.org) (I work for the jOOQ vendor, so this answer is biased). Assume this procedure:

```
-- Check whether there is an author in AUTHOR by that name and get his ID
CREATE OR REPLACE PROCEDURE author_exists (
    author_name VARCHAR2, 
    result OUT NUMBER, 
    id OUT NUMBER
); 
```

Using generated code, you can simply call it as such:

```
AuthorExists result = Routines.authorExists(configuration, "Paulo");
assertEquals(new BigDecimal("1"), result.getResult());
assertEquals(new BigDecimal("2"), result.getId(); 
```

See also the jOOQ manual for details:

*   [http://www.jooq.org/doc/latest/manual/sql-execution/stored-procedures/](http://www.jooq.org/doc/latest/manual/sql-execution/stored-procedures/)
*   [http://www.jooq.org/doc/latest/manual/sql-execution/stored-procedures/oracle-member-procedures/](http://www.jooq.org/doc/latest/manual/sql-execution/stored-procedures/oracle-member-procedures/)

### Using other code generators

Other code generators exist and can be leveraged to generate the tedious JDBC or JPA code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:37:19.180

可以使用 @NamedStoredProcedureQuery 和其他方法从 JPA 调用存储过程。例如，您可以使用 eclipselink。[http://wiki.eclipse.org/EclipseLink/Examples/JPA/StoredProcedures](http://wiki.eclipse.org/EclipseLink/Examples/JPA/StoredProcedures)

希望能帮助到你。

# c# - 使用 SerialPort 对象发送大于 0x7F 的字节

> ID：10797429
> 
> 赞同：1
> 
> 时间：2012-05-29T10:34:18.357
> 
> 标签：c#, serial-port

我需要通过串行端口发送字节，并希望使用 C# 类 SerialPort 的便利性来做到这一点。然而，使用此类通过串行端口发送原始字节存在严格限制，引用[ASCIIEncoding](http://msdn.microsoft.com/en-us/library/system.text.asciiencoding.aspx)类文档：

> ASCIIEncoding 对应于 Windows 代码页 20127。因为 ASCII 是 7 位编码，所以 ASCII 字符被限制为最低 128 个 Unicode 字符，从 U+0000 到 U+007F。如果您使用 Encoding.ASCII 属性或 ASCIIEncoding 构造函数返回的默认编码器，则在执行编码操作之前，该范围之外的字符将替换为问号 (?)。

这不是我想要的。如果我有一个大于 0x7F 的字节值，我希望它作为该值发送，而不是编码为问号。我不能使用 UTF-8 编码，因为这会为我的接收设备不期望的字符引入更多字节。SerialPort.Write[方法（Char[]，Int32，Int32）](http://msdn.microsoft.com/en-us/library/1050fs1h.aspx)和（在我看来很愚蠢）[SerialPort.Write 方法（Byte[]，Int32，Int32）](http://msdn.microsoft.com/en-us/library/ms143551.aspx)在传输之前对数据进行编码。

看来我可以创建自己的[EncoderFallback](http://msdn.microsoft.com/en-us/library/system.text.encoderfallback.aspx)类，但据我了解，这只允许我指定要使用的另一个字符而不是“？” 还是我假设这一点不正确？

那么是否有可能通过 SerialPort 类发送未被干扰的字节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:39:24.997

[`byte[]`超载页面](http://msdn.microsoft.com/en-us/library/ms143551)上有一条评论：

> 关于 ASCIIEncoding 和其他类型编码的注释不适用于此重载。此重载使用字节数组，绕过编码。
> 
> （看起来这些编码注释是从 Write 的其他重载中复制/粘贴的。这些重载 - 使用字符数组和字符串 - 确实使用了编码）。
> 
> — Micah Copple（可能是用户[mjcopple](https://stackoverflow.com/users/279999/mjcopple) - 应该能够“转发”声誉！）

# c# - 使用字母和数字生成序列号

> ID：10797433
> 
> 赞同：0
> 
> 时间：2012-05-29T10:34:31.613
> 
> 标签：c#, uniqueidentifier, autonumber

我正在开发一个在 C# 和 DevExpress 中接受订单的应用程序，我需要一个生成唯一订单号的函数。订单号必须包含字母和数字，长度为 20 .. 我见过 Guid.NewGuid() 之类的东西，但我不希望它完全随机，也不希望它只是一个自动递增的数字..

任何人都可以帮忙吗？即使它是不同语言的脚本，我也迫切需要想法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:50:48.867

您可以创建自己的类型。假设 yyyyMMddWWW-YYY-XXXXXXX 其中 WWW 是商店编号，YYY 收银员 id XXXXXXX 是十六进制数字（-> 可能是您将其转换为十六进制的实际自动增量数字）。这只是一个想法。恐怕您必须根据系统的元素来决定它会如何。

编辑：如果您可以对其应用校验位算法也将有助于避免错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:37:18.120

1.  获取主板ID
2.  获取硬盘ID
3.  以任何方式合并它
4.  添加您的密码
5.  应用 MD5
6.  应用 Base54

结果：链接到当前客户端 PC 的序列号 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:49:26.150

就像 Oded 建议的那样，Guid 不是随机的（好吧，如果你有网卡，则不是）。它基于时间和位置坐标。有关详细说明，请参阅[Raymond Chen 的博客文章](http://blogs.msdn.com/b/oldnewthing/archive/2008/06/27/8659071.aspx)。
最好对订单 ID 使用自动递增的 int。我不明白你为什么不想使用它或没有Guid？

除了自动 ID 之外，我想不出任何其他方法来保持唯一性并代表系统中不同订单的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:38:44.350

两种不同的方法：

*   创建当前时间的 MD5 或 SHA1 哈希
*   增量编号的哈希

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T10:51:33.030

一个想法浮现在脑海。
将 DateTime.Now.Ticks 转换为十六进制字符串。
瞧，`String.Format("{0:X}", value);`
如果不够长，你说你需要 20 位数字，你总是可以用零填充。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T12:59:03.827

我的两分钱。

如果您需要想法，请查看[Luhn](http://en.wikipedia.org/wiki/Luhn_algorithm)和[Luhn mod N](http://en.wikipedia.org/wiki/Luhn_mod_N_algorithm)算法。

虽然这些算法不是唯一的代码生成器，但它们可能会为您提供一些关于如何生成可以验证的代码的想法（这样您就可以在将代码发送到数据库之前验证代码的正确性）。

# javascript - 从数组java脚本中过滤数据？

> ID：10797435
> 
> 赞同：-1
> 
> 时间：2012-05-29T10:34:42.690
> 
> 标签：javascript, autocomplete

在我的应用程序中，我想过滤一些数组中的数据库数据。我有 html 文本字段，当用户开始输入时，我希望 JavaScript 函数通过我的数组并提供用户命中词。例如，如果用户开始键入“c”，函数将向他显示以“c”开头的所有内容（可口可乐，c....）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:36:50.670

使用 jquery 的[自动完成库](http://jqueryui.com/demos/autocomplete/)。

# numpy - scipy.test() 因许多断言错误而失败

> ID：10797437
> 
> 赞同：2
> 
> 时间：2012-05-29T10:34:58.810
> 
> 标签：numpy, python-3.x, scipy, macports

Scipy 新手。

我已经安装了 scipy 和 numpy，但是当我运行 scipy.test() 时，我得到了很多测试失败。我试图找到一些常见的原因，我发现了几个：

```
>>> import scipy
>>> scipy.test()
Running unit tests for scipy
NumPy version 1.6.2
NumPy is installed in /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy
SciPy version 0.10.1
SciPy is installed in /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy
Python version 2.7.3 (default, Apr 19 2012, 00:55:09) [GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)]
nose version 1.1.2
...

AssertionError:
Arrays are not almost equal to 7 decimals
...
AssertionError:
Not equal to tolerance rtol=1e-10, atol=1e-305
...
AssertionError: 
Arrays are not almost equal to 4 decimals
...
AssertionError: 
Max |adiff|: 92783.6
Max |rdiff|: 0.353942 
```

对我来说听起来像是 MPI 问题之类的，但我真的不知道。

任何帮助将不胜感激。

最好的，乔纳森。

-------- 编辑 --------- 用 scipy.test(verbose=10) 尝试过。大多数测试似乎工作正常。失败以错误开始。这就是我得到的：

```
 ERROR: Failure: DeprecationWarning (
The scipy.maxentropy module is deprecated in scipy 0.10, and scheduled to be
removed in 0.11.

If you are using some of the functionality in this module and are of the
opinion that it should be kept or moved somewhere - or you are even interested
to maintain/improve this whole module - please ask on the scipy-dev mailing
list.

The logsumexp function has already been moved to scipy.misc.)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/maxentropy/__init__.py", line 19, in <module>
    DeprecationWarning)
DeprecationWarning: 
The scipy.maxentropy module is deprecated in scipy 0.10, and scheduled to be
removed in 0.11.

If you are using some of the functionality in this module and are of the
opinion that it should be kept or moved somewhere - or you are even interested
to maintain/improve this whole module - please ask on the scipy-dev mailing
list.

The logsumexp function has already been moved to scipy.misc.

======================================================================
FAIL: test_asum (test_blas.TestFBLAS1Simple)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/lib/blas/tests/test_blas.py", line 58, in test_asum
    assert_almost_equal(f([3,-4,5]),12)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 467, in assert_almost_equal
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals
 ACTUAL: 0.0
 DESIRED: 12

======================================================================
FAIL: test_dot (test_blas.TestFBLAS1Simple)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/lib/blas/tests/test_blas.py", line 67, in test_dot
    assert_almost_equal(f([3,-4,5],[2,5,1]),-9)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 467, in assert_almost_equal
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals
 ACTUAL: 0.0
 DESIRED: -9

======================================================================
FAIL: test_nrm2 (test_blas.TestFBLAS1Simple)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/lib/blas/tests/test_blas.py", line 78, in test_nrm2
    assert_almost_equal(f([3,-4,5]),math.sqrt(50))
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 467, in assert_almost_equal
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals
 ACTUAL: 0.0
 DESIRED: 7.0710678118654755

======================================================================
FAIL: test_basic.TestNorm.test_overflow
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/linalg/tests/test_basic.py", line 581, in test_overflow
    assert_almost_equal(norm(a), a)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 451, in assert_almost_equal
    return assert_array_almost_equal(actual, desired, decimal, err_msg)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 846, in assert_array_almost_equal
    header=('Arrays are not almost equal to %d decimals' % decimal))
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 677, in assert_array_compare
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals

(mismatch 100.0%)
 x: array(-0.0)
 y: array([  1.00000002e+20], dtype=float32)

======================================================================
FAIL: test_basic.TestNorm.test_stable
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/linalg/tests/test_basic.py", line 586, in test_stable
    assert_almost_equal(norm(a) - 1e4, 0.5)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 467, in assert_almost_equal
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals
 ACTUAL: -10000.0
 DESIRED: 0.5

======================================================================
FAIL: test_basic.TestNorm.test_types
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/linalg/tests/test_basic.py", line 568, in test_types
    assert_allclose(norm(x), np.sqrt(14), rtol=tol)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 1213, in assert_allclose
    verbose=verbose, header=header)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 677, in assert_array_compare
    raise AssertionError(msg)
AssertionError: 
Not equal to tolerance rtol=2.38419e-06, atol=0

(mismatch 100.0%)
 x: array(1.0842021724855044e-19)
 y: array(3.7416573867739413)

======================================================================
FAIL: test_asum (test_blas.TestFBLAS1Simple)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/linalg/tests/test_blas.py", line 99, in test_asum
    assert_almost_equal(f([3,-4,5]),12)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 467, in assert_almost_equal
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals
 ACTUAL: 0.0
 DESIRED: 12

======================================================================
FAIL: test_dot (test_blas.TestFBLAS1Simple)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/linalg/tests/test_blas.py", line 109, in test_dot
    assert_almost_equal(f([3,-4,5],[2,5,1]),-9)
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 467, in assert_almost_equal
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals
 ACTUAL: 0.0
 DESIRED: -9

======================================================================
FAIL: test_nrm2 (test_blas.TestFBLAS1Simple)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/scipy/linalg/tests/test_blas.py", line 127, in test_nrm2
    assert_almost_equal(f([3,-4,5]),math.sqrt(50))
  File "/Library/Python/2.7/site-packages/numpy/testing/utils.py", line 467, in assert_almost_equal
    raise AssertionError(msg)
AssertionError: 
Arrays are not almost equal to 7 decimals
 ACTUAL: 0.0
 DESIRED: 7.0710678118654755

----------------------------------------------------------------------
Ran 5101 tests in 56.140s

FAILED (KNOWNFAIL=12, SKIP=42, errors=1, failures=9)
<nose.result.TextTestResult run=5101 errors=1 failures=9> 
```

我很抱歉地说我不知道​​这些错误是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:44:27.500

Scipy 失败似乎是在 OSX 上使用错误（= ABI 与 Veclib 不兼容）Fortran 编译器所导致的典型情况。Numpy 的失败很可能与这些无关——如果没有看到它们就很难说。

不幸的是，OSX 上二进制接口不兼容和 Fortran 编译器的混乱适用于所有 Fortran 代码，但 Scipy 开发人员不太容易修复 --- 除非检测到错误的 Fortran 编译器，否则构建应该失败并出现信息性错误消息...

您可能会发现这些有用：[http :](http://projects.scipy.org/scipy/ticket/1496) [//projects.scipy.org/scipy/ticket/1476 http://projects.scipy.org/scipy/ticket/1496](http://projects.scipy.org/scipy/ticket/1476)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:27:05.693

请问你能跑`scipy.test(verbose=10)`吗？这将打印更多输出并帮助找出问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:34:57.960

看起来您正遇到[此邮件列表中](http://mail.scipy.org/pipermail/scipy-user/2012-March/031683.html)描述的情况。

在讨论中提到这可能与 SciPy 中的错误有关。有一个[错误报告](http://projects.scipy.org/scipy/ticket/1618)描述了您的情况。您可能需要关注此报告。

# oracle - NLS_SORT NLS_COMP 读取错误

> ID：10797438
> 
> 赞同：0
> 
> 时间：2012-05-29T10:35:05.030
> 
> 标签：oracle, environment-variables, nls

我在休眠状态下设置了 NLS_SORT 和 NLS_COMP：

```
Hibernate: ALTER SESSION SET NLS_COMP=BINARY
Hibernate: ALTER SESSION SET NLS_SORT=BINARY 
```

之后，我尝试使用以下方法读回它：

```
select * from nls_session_parameters where parameter in('NLS_SORT','NLS_COMP');
SELECT SYS_CONTEXT ('USERENV', 'NLS_SORT') FROM DUAL; 
```

此查询返回不正确的值：

```
PARAMETER                      VALUE                                   
------------------------------ ----------------------------------------
NLS_SORT                       RUSSIAN                                 
NLS_COMP                       BINARY                                  

2 rows selected.

SYS_CONTEXT('USERENV','NLS_SORT')                                               
--------------------------------------------------------------------------------
RUSSIAN                                                                         
1 row selected. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:33:54.383

我认为函数`NLS_COMP`中没有参数 for`SYS_CONTEXT`

已验证

**NLS_CALENDAR**当前会话的当前日历。

```
SELECT sys_context('USERENV', 'NLS_CALENDAR') FROM DUAL; 
```

**NLS_CURRENCY**当前会话的货币。

```
SELECT sys_context('USERENV', 'NLS_CURRENCY') FROM DUAL; 
```

**NLS_DATE_FORMAT**会话的日期格式。

```
SELECT sys_context('USERENV', 'NLS_DATE_FORMAT') FROM DUAL; 
```

**NLS_DATE_LANGUAGE**用于表示日期的语言。

```
SELECT sys_context('USERENV', 'NLS_DATE_LANGUAGE') FROM DUAL; 
```

**NLS_SORT** BINARY 或语言排序基础。

```
SELECT sys_context('USERENV', 'NLS_SORT') FROM DUAL; 
```

**NLS_TERRITORY**当前会话的领土。

```
SELECT sys_context('USERENV', 'NLS_TERRITORY') FROM DUAL; 
```

# c# - 提交包含模型集合的表单

> ID：10797441
> 
> 赞同：4
> 
> 时间：2012-05-29T10:35:27.790
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我有一个 ViewModel，其中包含我的模型类型的集合，如下所示：

```
public class OrderConfirm
{
    public ICollection<QuoteLine> SalesLines { get; set; }
    public string Currency { get; set; }
    public int EnquiryID { get; set; }
} 
```

我的 QuoteLine 模型如下所示：

```
public class QuoteLine
{
    public int QuoteLineId { get; set; }
    public int LostReasonId { get; set; }
    public virtual LostReason LostReason { get; set; }
    public string ItemName { get; set; }
} 
```

在我看来，然后我在一个表单中遍历这些 QuoteLines 中的每一个，如下所示：

```
@using (Ajax.BeginForm("ConfirmLostOrder", new AjaxOptions()
{
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "LostOrders",
    OnBegin = "LostOrderConfirm"
}))
    {
        <table class="completed-enq-table">
            <tr>
                <th>
                    Item Number
                </th>
                <th>
                    Reason
                </th>
            </tr>
            @foreach (var sales in Model.SalesLines)
            {
                <tr>
                    <td>@sales.ItemName
                        @Html.HiddenFor(model => sales.QuoteLineID)
                    </td>
                    <td>@Html.DropDownListFor(model => sales.LostReasonId, ((IEnumerable<myApp.Models.LostReason>)ViewBag.LostReasons).Select(option => new SelectListItem
       {
           Text = (option == null ? "None" : option.LostReason),
           Value = option.LostReasonId.ToString(),
           Selected = (Model != null) && (option.LostReasonId == sales.LostStatusId)
       }))
                    </td>
                </tr>
            }
        </table>
        <input type="submit" style="float: right;" value="Submit Lost Order" />
    } 
```

然后我的`HttpPost`动作看起来像这样：

```
[HttpPost]
public ActionResult ConfirmLostOrder(List<QuoteLine> models)
{   
    // process order
    return PartialView("Sales/_ConfirmLostOrder");
} 
```

问题是，`models`为空。如果我使用 a`FormCollection`我可以看到每个提交的值，但我想使用我的模型而不是 FormCollection 因为我想处理和编辑单独提交的每一行，因为它们可能有不同的原因

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:13:42.667

You can't use a `foreach` in this instance, it needs to be a `for` loop so that the `name` attributes of the fields contain the correct index so that default model binding knows it's binding to a list.

**Firstly, I'm going to move your dropdown values out of the `ViewBag` (they should really be in there). That'll also take out some of that *nasty* logic in your view :)**

So your model is now:

```
public class OrderConfirm
{
    public List<QuoteLine> SalesLines { get; set; }
    public string Currency { get; set; }
    public int EnquiryID { get; set; }
    public SelectList LostReasons { get; set; }
} 
```

Try this instead of your `foreach`:

```
@for (var i = 0; i < Model.SalesLines.Count; i++)
{
    <tr>
        <td>
            @Model.SalesLines[i].ItemName
            @Html.HiddenFor(m => m.SalesLines[i].QuoteLineId)
            @Html.HiddenFor(m => m.SalesLines[i].ItemName) //assuming you want this
        </td>
        <td>
            @Html.DropDownListFor(m => m.SalesLines[i].LostReasonId, Model.LostReasons)
       </td>
   </tr>
} 
```

Then change your post method to take your `OrderConfirm` model type:

```
[HttpPost]
public ActionResult ConfirmLostOrder(OrderConfirm model) 
```

# blackberry - 黑莓中的 Xstream

> ID：10797449
> 
> 赞同：1
> 
> 时间：2012-05-29T10:36:06.847
> 
> 标签：blackberry, blackberry-jde, xstream

谁能告诉我如何在 Blackberry 中使用 Xstream。在 java 中有可用的教程，但不适用于黑莓。任何人都在项目中使用过。如果可能的话，我想要一个例子，请提供代码。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:51:56.470

[Xstream](http://x-stream.github.io/)（如果这就是您所说的）是一个独立于 BlackBerry Java API（基于 Java ME 而不是 Java SE）的包。它在操作系统中不可用，因此您要么必须自己移植它，要么找到已经这样做的人。

# ruby-on-rails - 使用带有rails联系表的googlemail不发送邮件

> ID：10797450
> 
> 赞同：0
> 
> 时间：2012-05-29T10:36:16.993
> 
> 标签：ruby-on-rails, gmail

我用这篇文章创建了我的邮件联系公式：[链接](http://molblog.heroku.com/2011/04/17/18-contact-me-form-rails-mailer-setup-)

在关于gmail的帖子中。我来自德国，我只能使用 googlemail.com。所以我把所有东西都从 gmail 改成了 googlemail。我没有收到任何错误消息，但 googlemail 帐户中没有收到任何邮件。

这是我的邮件配置：

```
# Mail config
config.action_mailer.raise_delivery_errors = true
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address              => "smtp.googlemail.com",
  :port                 => 587,
  :user_name            => 'khsuite@googlemail.com',
  :password             => 'mypassword',
  :authentication       => 'plain',
  :enable_starttls_auto => true } 
```

googlemail 还需要其他设置吗？

# iphone - iOS 5 - 应用程序运行良好，iOS 4 - 挂在 [UIWebView alloc]

> ID：10797453
> 
> 赞同：3
> 
> 时间：2012-05-29T10:36:32.783
> 
> 标签：iphone, objective-c, ios, xcode, ipad

在将应用程序提交到应用程序商店之前，我正在测试应用程序的向后兼容性。

iOS 5 设备可以很好地运行该应用程序，但现在我正在使用 iOS 4.2.1 的旧 iPod touch 上进行测试。

**出了什么问题：**

在某一时刻（总是同一点），应用程序只是挂起 - 它不会崩溃，只是冻结，所以我认为这不是内存不足造成的。

不会显示任何错误，但是通过设置断点来执行代码会导致此行：

```
myWebView = [[UIWebView alloc] initWithFrame:webFrame]; 
```

运行但从未完成。

**所以：**

可能出了什么问题，我可以做些什么来进一步获取有关可能发生的事情的更多信息/日志？任何想法都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:13:38.910

确保您没有重复的条目，例如“_myWebView”和“myWebView”的实例变量和属性。尝试使用 _myWebView。

尝试删除赋值语句，看看它是否有效，那么问题是复制 ivar 和属性。

# java - 动态 JPA 查询不起作用

> ID：10797457
> 
> 赞同：0
> 
> 时间：2012-05-29T10:36:57.337
> 
> 标签：java, jpa

我在 JPA 中通过 createQuery 使用连接查询。我有 2 张表**MasterScrip**和**OrderMaster**。实体代码如下。动态查询正在返回集合对象。我调试了一下，发现查询执行正确，返回集合对象；但是，对象返回错误后，如下所示：

```
 [javax.xml.bind.JAXBException: class [Ljava.lang.Object; nor any of its super class is known to this context.]
    javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException...

    SEVERE: Error Rendering View[/ClientTemplate/orderReport.xhtml]
    javax.el.ELException: /ClientTemplate/orderReport.xhtml @14,142 value="#{stockOrderBean.scripLst}": com.sun.xml.ws.streaming.XMLStreamReaderException: unexpected XML tag. expected: {http://service/}getOrderScripByUserNameResponse but found: {http://schemas.xmlsoap.org/soap/envelope/}Envelope
        at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114) 
```

无状态bean方法：

```
 public Collection<MasterScrip> getOrderScripByUserName(String userName)
{        
    try
    {
        String squery = "select DISTINCT(s.scripSymbol),s.scripID from MasterScrip s,OrderStock o where o.scripID.scripID = s.scripID and o.userName.userName = '" + userName + "'";
        Collection<MasterScrip> c = em.createQuery(squery).getResultList();
        //UserMaster um = em.find(UserMaster.class,userName);
        return c;
    } catch(Exception e) {
        System.out.println(e);
        return null;
    }
} 
```

这个错误的原因是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:14:10.403

首先，如评论中所述，您应该始终使用参数而不是连接参数值：

```
select DISTINCT(s.scripSymbol), s.scripID from MasterScrip s, OrderStock o 
where o.scripID.scripID = s.scripID and o.userName.userName = :userName 
```

这将防止 SQL 注入攻击，或者在用户名的情况下简单地错误查询，`O'Reilly`例如。

您的查询返回两个不同的列。这样的查询无法神奇地返回`MasterScrip`. 它返回 a `List<Object[]>`，其中每个`Object[]`包含两个值： the`scripSymbol`和 the `scripID`。

如果是，查询将返回 MasterScrip 的实例

```
select distinct s from MasterScrip s, OrderStock o 
where o.scripID.scripID = s.scripID and o.userName.userName = :userName 
```

# php - 我怎样才能获得谷歌分析数据？

> ID：10797458
> 
> 赞同：1
> 
> 时间：2012-05-29T10:37:01.560
> 
> 标签：php

我的目标是在我的网站标题上显示谷歌分析数据。这就是我到目前为止所拥有的（来自googleApiPhPClient/examples/analytics：

```
require_once 'library/GoogleApiPhpClient/apiClient.php';
$client = new apiClient();
$client->setApplicationName("Google Analytics PHP Starter Application");

// Visit https://code.google.com/apis/console?api=analytics to generate your
// client id, client secret, and to register your redirect uri.
 $client->setClientId('aaa');
 $client->setClientSecret('bbb_gK');
 $client->setRedirectUri('ccc');
 $client->setDeveloperKey('dd');

require_once ('contrib/apiAnalyticsService.php');
$service = new apiAnalyticsService($client);

if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {
  $props = $service->management_webproperties->listManagementWebproperties("~all");
  print "<h1>Web Properties</h1><pre>" . print_r($props, true) . "</pre>";

  $accounts = $service->management_accounts->listManagementAccounts();
  print "<h1>Accounts</h1><pre>" . print_r($accounts, true) . "</pre>";

  $segments = $service->management_segments->listManagementSegments();
  print "<h1>Segments</h1><pre>" . print_r($segments, true) . "</pre>";

  $goals = $service->management_goals->listManagementGoals("~all", "~all", "~all");
  print "<h1>Segments</h1><pre>" . print_r($goals, true) . "</pre>";

  $_SESSION['token'] = $client->getAccessToken();
} else {
  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'>Connect Me!</a>";
} 
```

但这只会删除“连接我”链接。无论如何，获取分析数据的方式是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:58:08.987

我一直在使用这个 code.google.com/p/gapi-google-analytics-php-interface，它只需要谷歌帐户的用户名和密码，效果很好

```
a sample code of mine where im checking visits $ga->requestReportData($ga_profile_id,array('browser','browserVersion','country'‌​),array('pageviews','visits'),null,"country==USA",$yesterday,$todate); 
```

当您登录到您的帐户时，选择您已经为您的网站创建的配置文件。当您单击它时，网址将类似于 google.com/analytics/web/#report/visitors-overview/... 所以 ga_profile_id 将是 URL 中“p”之后写的那个。我看到这种方式只是为了获取此个人资料 ID

# android - 在对话框中显示图像

> ID：10797460
> 
> 赞同：-1
> 
> 时间：2012-05-29T10:37:07.170
> 
> 标签：android

我有一张图片，我目前正在将它设置在 imageview 上。

我希望当单击 Imageview 时，应该出现一个像对话框一样的弹出窗口，显示图像..任何方法我怎么能做到这一点。

```
 Context mContext = getApplicationContext();
                Dialog dialog = new Dialog(mContext);

                dialog.setContentView(R.layout.customdialog);
                dialog.setTitle("wateva");

                ImageView ivDialog = (ImageView) dialog.findViewById(R.id.ivDialog);
                String filepath = Environment.getExternalStorageDirectory().getPath();
                folder = new File(filepath,"checking");

                File fa = new File(folder,"bmp1.png");
                Bitmap bmpa = BitmapFactory.decodeFile(fa.getAbsolutePath());
                Log.d("error " , "here");
                ivDialog.setImageBitmap(bmpa);
                dialog.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:39:25.917

为此使用**CustomDialog**。创建具有Imageview和其他组件的布局并将其设置为Dialog。

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.dialoglayout);
ImageView imgView=(ImageView)dialog.findViewById(R.id.imagview);
//set image to imgView
dialog.show(); 
```

# javascript - 为图像创建浏览器池直到可用

> ID：10797475
> 
> 赞同：5
> 
> 时间：2012-05-29T10:38:07.337
> 
> 标签：javascript, html, http, http-headers, image-generation

我有一个小型 http 服务器，可以即时生成一些图像，生成过程可能需要一些时间。生成后，图像被无限缓存。

当前，如果用户请求未缓存的图像，则服务器返回`202 Accepted`带有`Refresh`标头的 a。如果图像被缓存，`301 Permanently Moved`则发送 a 并将用户重定向到唯一的 url（不同的图像可能共享相同的唯一 url）。

如果在`<img>`标签中引用图像（至少在 Firefox 上），整个系统都会中断。这可以在没有 Javascript 的情况下解决吗？如果没有，脚本会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:26:14.113

我不确定你是否可以在没有 Javascript 的情况下做到这一点，但你可以用 ajax 做到这一点？我的意思是，指向服务器，然后检查它是否在那里......然后如果它显示它，否则 30 秒后再试一次，它可能是这样的：

```
function getImage(img) {
 $.ajax({
            cache: true,
            url: <<ADDRESS>>,
            data: "",
            timeout: 60,
            error: function (jqXHR, error, errorThrown) {
                setTimeout(function() {
                    getImage(img);
                }, 30000);
            },
            success: function (data) {
                //set the image
            }
        });
} 
```

好吧，你希望图像会在某个时候下降。

唯一的其他选择是在请求之前生成图像？例如，如果它只是为照片库创建缩略图，为什么要等到它被请求生成它？只要你有它就生成它？

希望有帮助/有意义。

# silverlight - 访问一个在局域网中运行良好的全球网站

> ID：10797478
> 
> 赞同：0
> 
> 时间：2012-05-29T10:38:14.847
> 
> 标签：silverlight, iis, lan

我开发了一个在 LAN 中运行良好的应用程序（网站）。

我的应用程序是使用 Silverlight 构建的，并且我已经在 IIS 中发布了该网站，我可以通过以下 LINK 在 LAN 中很好地访问该应用程序。

`http://192.168.137.24/SilverLightBusinessApplicationWeb/SilverLightBusinessApplicationTestPage.html#/Home`

现在我需要通过 INTERNET 从任何 PC 全局访问该应用程序，为此，我必须使用什么配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:39:57.063

您可能希望通过路由器/调制解调器设置将端口 80 重定向到 LAN IP。

# jquery - JSON 到 JSONP 用于跨域 PHP 访问 [敏捷轮播]

> ID：10797479
> 
> 赞同：0
> 
> 时间：2012-05-29T10:38:24.973
> 
> 标签：jquery

目前使用敏捷轮播是为了让一些图像轮播，但试图将其用作通过 DART 提供的横幅广告。

问题在于在不同的服务器上提供 PHP 文件，我知道 JSONP 是答案，但不确定如何调整我的代码和 PHP 文件来表示这一点，任何帮助都会很棒。

```
$.getJSON("[PHP FILE SERVED ELSEWHERE]", function (data) {
$(document).ready(function () {
$("#basic_slideshow").agile_carousel ({
carousel_data: data,
carousel_outer_height: 70,
carousel_height: 70,
slide_height: 70,
carousel_outer_width: 422,
slide_width: 422,
transition_type: "slide",
timer: 4000 
```

getJSON 调用的 PHP 文件如下所示：

```
[{
"content": "<div class='slide_inner'><a class='photo_link' href='[URL1]'
target='_blank'><img class='photo' src='[IMAGE1]' alt=''></a><a class='caption'
ref='#'></a></div>"
}, {
"content": "<div class='slide_inner'><a class='photo_link' href='[URL2]'
target='_blank'>
img class='photo' src='[IMAGE2]' alt=''></a><a class='caption' href='#'></a></div>"
}, {
"content": "<div class='slide_inner'><a class='photo_link' href='[URL3]'
target='_blank'><img class='photo' src='[IMAGE3]' alt=''></a><a class='caption'
href='#'></a></div>"
}
] 
```

我确信那里有类似的问题，但我只是想不出最好的方法来调整 javascript 和 PHP 文件以满足 JSONP 请求。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:39:13.737

实际上，我没有编辑 JSON，而是发现由于跨服务器域链接的权限问题（基本上是从实际服务器上不包含的域中获取 PHP 文件），您可以在 PHP 的标头中进行权限更改文件。

我确信使用 JSONP 有明显的好处，而且安全性可能更安全，但是对于具有极其基本编码技能的人来说，这个解决方案很有效而且很简单！

我将此添加到 PHP 文件中以允许跨域权限：

```
<?php
header("Access-Control-Allow-Origin: *");
?> 
```

允许来源也可以限制在一个域中，* 显然允许所有。

# python - 如何检索通过 multiprocessing.Process 调用的函数返回的多个值

> ID：10797484
> 
> 赞同：17
> 
> 时间：2012-05-29T10:38:54.000
> 
> 标签：python, multiprocessing

我有这样的场景：

```
for each in content :
     pdf_output,job_id=createpdf(each)
     if pdf_output : 
        pdf_output = pdf_output + pdf_output 
```

我正在尝试并行化整个过程。像这样的东西

```
 jobs=[]
    for each in content : 
       jobs.append(multiprocessing.Process(target=self.createpdf, args=(content)))

    for each in jobs :
         jobs.start()
    for each in jobs :
         jobs.join() 
```

我如何明智地完成任务

```
if pdf_output : 
            pdf_output = pdf_output + pdf_output 
```

对于每项工作？如何检索 createpdf 发送的 2 个 retun 值并对其进行处理？我认为 multiprocessing.Queue 是一个线索，但我该如何实现呢？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-29T12:55:41.650

对于这样一个简单的任务，您不需要队列。我建议使用游泳池。该`Pool.map`方法可以将一个函数并行应用于一系列值：

```
import multiprocessing
def createpdf(data):
    return ("This is my pdf data: %s\n" % data, 0)

data = [ "My data", "includes", "strings and", "numbers like", 42, "and", 3.14]
number_of_processes = 5
results = multiprocessing.Pool(number_of_processes).map(createpdf, data)
outputs = [result[0] for result in results]
pdfoutput = "".join(outputs) 
```

# c# - javascript中的PageMethods作为函数的返回

> ID：10797488
> 
> 赞同：0
> 
> 时间：2012-05-29T10:39:16.847
> 
> 标签：c#, javascript, asp.net, pagemethods

javascript:

```
 var Enabled = false;
            function GateWay_Enabled(GateWay_Name) {
                PageMethods.GateWay_Enabled(GateWay_Name, onRequestComplete, onError);
                return Enabled;
            }

            function onRequestComplete(result) {
                Enabled = result;
            }
            function onError(result) {
                alert('Error');

            }
            var MyVariable = GateWay_Enabled('GateWay_Name'); 
```

服务器端代码（C#）：

```
[WebMethod]
[ScriptMethod]
public static bool GateWay_Enabled(string GateWay_Name)
{
    bool Enabled = true;
    return Enabled;
} 
```

为什么 MyVariable 总是假的？
有没有另一种写法`PageMethods.GateWay_Enabled(GateWay_Name, onRequestComplete, onError);`作为`GateWay_Enabled`函数的返回？我正在寻找这样的东西：

```
var MyBoolVariable =
bool.parse(PageMethods.GateWay_Enabled(GateWay_Name,
onRequestComplete, onError)); 
```

**编辑 1：**
一切正常，PageMethods 没有错误。
脚本管理器中的 EnablePageMethods 为 true。

**编辑 2：**
我不能将 MyVariable 放在 onRequestComplete() 函数中。
我制作了 MyVariable 以使我的代码更容易。
MyVariable 的真实代码是：

```
 GateWays = [
                        { "Cod": 1, "Enabled": GateWay_Enabled('1') },
                        { "Cod": 2, "Enabled": GateWay_Enabled('2') },
                        { "Cod": 3, "Enabled": GateWay_Enabled('3') },
                        { "Cod": 4, "Enabled": GateWay_Enabled('4') },
                        { "Cod": 5, "Enabled": GateWay_Enabled('5') },
                        { "Cod": 6, "Enabled": GateWay_Enabled('6') },
                        { "Cod": 7, "Enabled": GateWay_Enabled('7') }
                ]; 
```

我想在另一个地方使用这个数组。
我不能把它放在 onRequestComplete() 函数中。
我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:00:34.330

您需要重新考虑您的代码。现在你正在做一些`GateWay_Enabled`有结果的方法。将这些东西放在单独的方法中并从 `onRequestComplete`方法中调用它；

```
var Enabled = false;
function GateWay_Enabled(GateWay_Name) {
    PageMethods.GateWay_Enabled(GateWay_Name, onRequestComplete, onError);
}

function onRequestComplete(result) {
    alert(result); // you will get results here; 
    Enabled = result;
    //do something with value 
}
function onError(result) {
    alert('Error');
}

GateWay_Enabled('GateWay_Name');  // you can't get direct output from this method,  
// have to get results from success callback method or onError callback method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:49:07.987

调用 PageMethods 是异步的：在调用`return Enabled`函数之前执行该行`onRequestComplete`。

尝试将读取`MyVariable`的任何代码放入`onRequestComplete`函数中，`result`改为使用。

在您的 Edit2 和评论之后，我建议您：

1.  `GateWays`重构您的 PageMethod 以返回给定输入 ID 数组的整个数组，以避免进行 7 次 AJAX 调用。
2.  让所有这个AJAX在用户点击链接的时候被调用，然后把后续的代码放到`onRequestComplete`方法里面。

或者，如果此数据在用户点击之间没有变化，我建议您在服务器端获取它。

没有*简单*的方法可以确保用户单击代码等到所有七个调用都完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:47:29.460

您是否在 ScriptManager 中添加了 EnablePageMethods="true"？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:49:09.553

您正在检查`MyVariable`之前`onRequestComplete`执行的值

# xml - 如何使用 XStream 序列化/反序列化对象，其中包含 xml 属性？

> ID：10797492
> 
> 赞同：1
> 
> 时间：2012-05-29T10:39:22.143
> 
> 标签：xml, serialization, xstream

我正在使用 XStream 序列化/反序列化 Java 对象。它是简单的 pojo 类，但它的属性也是 xml。我如何序列化工作正常，但我无法反序列化它。

例子：

```
public class Foo implements Serializable {

   .....
   String xmlProperty;
   ....
} 
```

因为这个 xmlProperty 也是 xml XStream 无法反序列化它。我收到的错误是：

```
Caused by: org.xml.sax.SAXParseException; lineNumber: 32; columnNumber: 25; The processing instruction target matching "[xX][mM][lL]" is not allowed. 
```

# php - 如何查找总记录？

> ID：10797493
> 
> 赞同：0
> 
> 时间：2012-05-29T10:39:23.453
> 
> 标签：php, mysql

在这种情况下如何找到总记录：

我有一个表“用户”、一个表“消息”和一个表“组”。用户可以发送一条消息，该消息将存储在“消息”表中。每个用户都可以是一个组的成员。现在我想在组详细信息页面上显示组中所有用户发送的消息总数。如何获取组中的所有用户并统计他们的消息？最好和最快的方法是什么？

我不能使用 Joins，所以这不起作用。我不知道如何解决它。

> SELECT COUNT(Message_id) AS total_messages, d.Userid FROM messages AS d LEFT JOIN users AS s ON (s.Groupid=$groupid) WHERE s.Groupid=$groupid

谢谢！

如果需要表结构：

```
** users **
Userid
Groupid

** groups **
Groupid
Some_details

** messages **
Messageid
Userid
Subject
Content 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:48:00.757

如果您正在查找总消息而不需要知道每个用户，请尝试

```
SELECT COUNT(messages.Messageid) as total_messages
FROM messages
    INNER JOIN users ON messages.Userid = users.Userid
WHERE users.Groupid = $groupid 
```

`messages.Userid`如果您将基于它进行大量查询，请确保您也在索引该字段。

需要每个用户尝试计数

```
SELECT 
    COUNT(messages.Messageid) as num_messages,
    messages.Userid
FROM messages
    INNER JOIN users ON messages.Userid = users.Userid
WHERE users.Groupid = $groupid
GROUP BY users.Userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:06:48.213

```
Select  Groupid,Some_details,count(Messageid) as count_message from groups Left join users On 
users.Groupid = groups.Groupid left join messages on messages.Userid = users.users.Userid GROUP BY Groupid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:54:30.593

如果您希望特定组中的所有用户都拥有他们的总消息，那么试试这个

```
SELECT messages.Userid, COUNT(messages.Messageid) as total_messages
FROM messages
    INNER JOIN users ON messages.Userid = users.Userid
WHERE users.Groupid = $groupid GROUPBY messages.Userid 
```

# c# - 反规范化表或在实体框架中使用联接

> ID：10797499
> 
> 赞同：1
> 
> 时间：2012-05-29T10:39:38.350
> 
> 标签：c#, sql-server, entity-framework, database-design, database-normalization

我需要知道使用非规范化表与使用两个单独的表并使用连接访问数据的权衡是什么。我正在使用实体框架 4。

就我而言，我有两张桌子`Order`和`OrderCategoryDetails`. 我在想将这两个表合并到一个表中是否更好？

*   如果非规范化，添加的列 (`OrderCategory`和`OrderSubcategory`将是稀疏的（可能 100% 为空。将始终至少 50% 为空）
*   另一方面，如果我保持原样，我担心会频繁执行连接操作（即，每当我查询特定的 时`Order`，我也需要从中获取信息`OrderCategoryDetails`。

目前，我已经规范化表格并使用导航属性：

*   *从 OrderItem 实例访问订单类别信息*

    ```
    OrderItem orderItem = _context.OrderItems.Where(...).FirstOrDefault();
    if(2 == orderItem.SalesOrder.Category.OrderCategory){ ...} 
    ```

*   *从 Order 实例访问 Order Category 信息*

    ```
    Order order = _context.Orders.Where(...).FirstOrDefault();
    if(2 == order.Category.OrderCategory){ ...} 
    ```

**这是我的架构：**

**表：订单**

*   `ID`（首要的关键）
*   日期
*   数量
*   项目计数
*   `OrderCategoryInfo`（FK - 加入`OrderCategoryDetails`on `OrderCategoryDetails.ID`）

**表：OrderCategoryDe​​tails**

*   `ID`（首要的关键）
*   订单类别
*   订单子类别

**表：订单项**

*   `OrderItem ID`（首要的关键）
*   订单 ID（FK - 加入`Order`）

使用的数据库：SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:52:28.263

我的一般建议是问自己以下问题；第一个表中的每一行都需要第二个表中的一行吗？如果答案是**肯定**的，那么您*最好*对数据进行反规范化。如果答案是**否定**的，那么您最好将其保留为单独的表格。

只要您在两个表之间设置了外键关联，您就不必担心执行连接的性能影响。它只会在病理情况下成为问题。

根据您在评论线程中的回答，我建议您应该将表分开并在两者之间建立外键关系。

如果您确实遇到任何性能问题，请在有问题的 SQL 上运行分析器并添加分析器推荐的任何索引，但仅对经常使用的查询执行此操作。索引非常适合加快查询速度，但会以插入性能为代价，因此请注意它们。

# javascript - Javascript：终止不是来自特定路径的请求或直接的请求

> ID：10797500
> 
> 赞同：1
> 
> 时间：2012-05-29T10:39:40.133
> 
> 标签：javascript, jquery, html

我想强制用户首先点击一些链接，然后去一个特定的地址。如何终止直接在第二页中的流量来源？或者有什么办法只接受来自特定网址的请求？

注意：如果有问题，我希望页面不可见。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:46:12.830

您可以做的是使用该`document.referrer`属性，并检查天气是否与第一页匹配。像这样的东西，也许：

```
if (document.referrer !== 'http://www.google.com')
{
    window.location.href = 'http://www.google.com';//redirect to first url
} 
```

* * *

正如Bergi 在他的回答中指出的那样：这种功能真的最好留给服务器端。尽管就我而言，建议使用 cookie 并不是理想的方法，因为 cookie 可以关闭客户端或 WCS，并对其进行调整。

根据您使用的服务器端技术，阅读您可以使用的所有工具来处理用户发送到您的应用程序的请求并采取相应的适当措施可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:55:05.670

您应该在允许用户查看第二个页面的第一页中设置一个 cookie。

然后，您的服务器端应用程序将在传递第二个页面之前检查 cookie，否则会重定向或显示错误消息。

你不应该通过 JavaScript（包括 jQuery 库）来做这样的事情，否则禁用 JS 的每个人都可以查看页面。

# java - 语法“变量 = 变量 = 变量；” 发生了什么？

> ID：10797502
> 
> 赞同：2
> 
> 时间：2012-05-29T10:39:46.937
> 
> 标签：java, variables, red-black-tree

好的，我正在阅读一些关于 RedBlackTrees 的代码。我注意到这一行“v1 = v2 = v3 = v4;” 我理解类似“v1 += v2”（将 v2 添加到 v1 的当前值）和“v1 = v2”（创建从 v2 到 v1 的引用）等内容。

```
public void insert( AnyType item )
{
    current = parent = grand = header; 
```

但我很好奇内存/引用中发生了什么 current = parent = grand = header;

[http://faculty.washington.edu/moishe/javademos/REDBlack/RedBTree.java](http://faculty.washington.edu/moishe/javademos/REDBlack/RedBTree.java)

编辑：晚上 10:46

我仍然需要等待 10 分钟才能批准问题，对不起等待的女士们和先生们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:41:08.247

的参考值`header`被分配给`current`,`parent`和中的每一个`grand`。基本上所有的变量都指向同一个东西。

顺便说一句，这种做法在现实生活中的编程中经常不受欢迎。

考虑一下如果你有这样的代码会发生什么：

```
boolean flag = false;

if(flag = true) {
    System.out.println("true");
} else {
    System.out.println("false");
} 
```

输出将在`true`这里，因为这里真正发生的是*assignment*而不是*comparison*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:41:12.750

现在所有 4 个引用都具有相同的 header 值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T10:41:31.447

发生的事情是将 的值`header`分配给 的值`grand`分配给 的值`parent`依次分配给`current`。最后，4 个变量保持相同的值；这个习惯用法用于快速将多个变量初始化为相同的值，它等价于：

```
grand = header;
parent = grand;
current = parent; 
```

赋值从右到左进行，实际上问题中的表达式是这样计算的：

```
current = (parent = (grand = header)); 
```

这是有效的，因为赋值运算符的结果实际上*计算*为分配的值，例如这有效：

```
return x = 42; 
```

在最后一个片段中，`42`被分配给`x`然后`x`返回的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T10:51:29.930

`=`运算符返回它刚刚分配的值并且是右关联的，所以

```
a = b = c = d; 
```

相当于

```
a = (b = (c = d)); 
```

或者

```
c = d;
b = c;
a = b; 
```

请注意，`=`将右侧的值复制到左侧指定的位置。另请注意，“值”表示在`Object`衍生类型的情况下对实例的引用，而不是实例本身。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T10:45:36.577

该语句`current = parent = grand = header`等效于：

```
grand = header;
parent = grand;
current = parent; 
```

除非这些是原语类型，否则它们都将指向和共享相同的对象内存位置`header`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T10:46:08.883

从右到左分配的参考值，在原始类型中分配值。小例子：

```
boolean first = true;
boolean second = false;

if (second = first) {
    ...
} 
```

您将进入阻塞`if`，因为值`first`已分配给`second`，然后 JVM 将检查是否`second == true`。

如果你写

```
if (second == first) {
    ...
} 
```

您不会进入`if`阻止，因为`second != first`. 那是不同的表达方式

# javascript - 如何检查可以在 Javascript/Jquery 中未定义或具有值的属性？

> ID：10797504
> 
> 赞同：2
> 
> 时间：2012-05-29T10:39:53.613
> 
> 标签：javascript, jquery

我需要检查 Jquery Mobile 转换数据对象中的属性。该属性可以是*未定义的，也可以是**对话框*值或其他值。

最初我只是这样检查：

```
$(document).on( "pagebeforechange", function( e, data ) {
    if(  A && B && data.options.role != "dialog" ){
        // do something
        }
     }); 
```

但是，当*data.options.role*未定义时，我永远不会输入 if 子句。我目前正在尝试这样，但并没有真正到达任何地方：

```
$(document).on( "pagebeforechange", function( e, data ) {
    if(  A && B && data.options.role != "undefined" && data.options.role != "dialog" ){
        // do something
        }
     }); 
```

**问题**
如果值未定义或具有值（不是对话框），我如何确保该值是查询并传递到 IF 子句？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:42:15.607

如果您的意思`undefined`是 javascript 的类型，那么您需要`typeof`像这样使用：

```
if(  A && B && typeof data.options.role != "undefined" &&
      data.options.role != "dialog" ) 
```

您还需要确保这一点，`A`并且`B`也将变得真实。

# java - java中的井字游戏有问题吗？将 getText().equals() 与 jButton 一起使用

> ID：10797506
> 
> 赞同：0
> 
> 时间：2012-05-29T10:39:58.220
> 
> 标签：java, class, methods

不确定为什么这段代码没有按预期工作，希望你能帮我弄清楚。我正在从一系列使用 jbuttons 的教程中开发一个 tictactoe 游戏。我的主类中有一个方法，每次单击按钮时都会“checksforwin”。使用打印语句，我发现每次单击按钮时我的方法都会运行，但是 getText().equals("_") 条件无法正常运行。

这段代码是我的 tictactoe.java 的一部分，并且一切正常。此事件为每个按钮复制 9 次。

```
public void button1ActionPerformed(ActionEvent e) {
    if(button1.getText().equals("")){
        if(Main.playerTurn==true){
            button1.setText("X");
            Main.checkforwin();
            Main.playerTurn = false;
        }else{
            button1.setText("O");
            Main.checkforwin();
            Main.playerTurn = true;
        }
    }
} 
```

这段代码是我的 main.java 的一部分，其中包含 checkforwin 方法。对于玩家 1 和计算机（玩家 2）在 tictactoe 中每次可能的胜利，都会重复多次检查获胜代码块。

```
public class Main {

public static boolean playerTurn = true;
public static boolean playerWon = false;    
public static boolean computerWon = false;

public static tictactoe board = new tictactoe();

public static void checkforwin(){
System.out.println("testing1");
    //horizontal row 1
    if(board.button1.getText().equals("X")){
        System.out.println("testing2");
        if(board.button2.getText().equals("X")){
            if(board.button3.getText().equals("X")){
                playerWon = true;
                computerWon = false;
                System.out.println("Player 1 won");
            }
        }
    } 
```

}

每次单击按钮时，该方法都会输出 testing1，但它永远不会在条件内打印。

任何帮助或建议将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:00:08.610

我的猜测是它没有拾取按钮文本更改-在按钮文本更改（`button1.setText("X");`）等之后-您需要再次将其添加到面板中，因此`panel.add(button1);`或它们存储的任何内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:55:56.657

我正在快速查看您的编码，但并不完全确定，但是“也许”您应该尝试在条件 IF 语句中使用 AND 运算符？例如：

```
if(board.button1.getText().equals("X") && board.button2.getText().equals("X") && board.button3.getText().equals("X")){
            playerWon = true;
            computerWon = false;
            System.out.println("Player 1 won");
        } 
```

您可以使用这些类型的条件语句来表示玩家/计算机赢了，提供等于 X 或 O 的水平或垂直按钮。

虽然可能有一种更有效的方法可以做到这一点，但这是我想到的第一个想法，所以你可以尝试一下！

我希望它有帮助！

# javascript - 如果单击按钮，我想返回 true 并使用 JavaScript 关闭窗口 onclick

> ID：10797511
> 
> 赞同：0
> 
> 时间：2012-05-29T10:40:11.557
> 
> 标签：javascript, html, asp-classic, vbscript

如果单击按钮，我想返回 true 并使用 JAVASCRIPT 关闭窗口 onclick 我正在使用此代码返回 true 并立即关闭窗口

JavaScript

```
function out()
{
    return true;
    window.close();

} 
```

HTML

```
form name="remove" action="" method="post">
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="text-align:center">
    <tr height="30px" id="rem">
        <td><input type="submit" name="ok" value="Remove Access" onClick="out();" /></td>

    </tr>
</table>
</form> 
```

但窗户没有关闭。但它返回真。我在这里想念什么。

如果它返回true，即如果它被单击，我将在按钮单击时更新数据库值。

```
<%
    if request.form("ok") <> "" then
        sql1 = "select * from folder_access where srno = '"&request.QueryString("srno")&"'"
        rs1.open sql1, con, 1, 2
            rs1("folder_removed") = "Remove Access"
            session("ok") = "Remove Access"
        rs1.update

        rs1.close
    end if

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:31:47.213

如果您打开了一个弹出窗口，最好在父页面中添加一个隐藏字段并在 out() 上更新它的值

函数输出（）

{

```
parent.document.getElementById('hidField').value = "true";
window.close(); 
```

}

现在在父页面中，您可以获得隐藏字段的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:42:15.980

像那样？

```
function out()
{
    window.close();
    return true;
} 
```

“return”之后的指令不被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:42:29.543

当您返回时，函数的其余部分被取消：

```
function out()
{
    window.close();
    return true;
} 
```

但`window.close()`会尝试关闭您当前的窗口。并且永远不会使用回报。因为窗户是关着的。

* * *

看这个例子：

```
function test() {
    alert(1);
    return true;
    alert(2);
} 
```

未`alert(2)`执行，因为您已经返回：

```
function test() {
    alert(1);
    alert(2);
    return true;
} 
```

现在显示两个警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:42:58.727

试试这个：

```
function out()
{    
    window.close();
    return true;
} 
```

return 语句使函数退出，因此 return 之后的任何其他代码都不会执行..

# html - 如何为移动设备设计可扩展的 HTML5 网站？

> ID：10797512
> 
> 赞同：0
> 
> 时间：2012-05-29T10:40:14.147
> 
> 标签：html, css

我需要一个可扩展的 HTML5 网站设计。我的想法是在 body 元素中定义一个 1px 的“基本”字体大小，并在“em”中定义相对于这个值的所有子元素。

更准确地说：子元素（图像、div 等）的所有大小（宽度、高度、边距、填充和字体大小）都以“em”为单位定义，因此只需更改“基本”字体大小（在正文中）。

我需要这样做，因为不同的移动设备具有不同的屏幕尺寸和不同的 devicePixelRatio 值。

因此，如果我通过 JavaScript 检测到更大的屏幕尺寸（例如大 1.2 倍），我可以`font-size: 1.2px`只为 body 元素设置，整个网站应该大 1.2 倍。

**例子：**

```
<!doctype html>
<html>

    <head>
        <title>foo</title>

        <style>
            body{
                font-size: 1px;
                /* If a sceen is 1.2x bigger than this "default" size, then change font-size to 1.2px */
            }

            #myimg{
                /* 200em = 200px in this case because body font-size=1px */
                width: 200em;
                height: 200em;
            }

            #somediv{
                width: 100em;
                height: 100em;
                font-size: 20em;
            }
        </style>
    </head>

    <body>
        <div id="wrapper">
            <img id="myimg" src="foo.jpg">
            <div id="somediv">
                foo
            </div>
        </div>
    </body>

</html> 
```

唯一的问题是定义了字体大小（例如 22em）的容器也为其子元素定义了一个新的“基本”字体大小，因此必须避免这种情况。

**示例**样式（绝对不能发生！）

```
#wrapper{
  font-size: 3px;
} 
```

如果添加了上面的这种样式，所有子容器（及其子容器）都会变大 3 倍（=不是我想要的）。

这整个想法是一个可行的解决方案，还是有更好的方法来创建一个完全可扩展的设计？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-04T08:31:06.367

我尝试了我描述的解决方案，效果很好。我还注意到这似乎是一种非常普遍的做法。

我唯一建议更改的是使用 10 像素（而不是 1 像素）的基本字体大小并将所有子元素除以 10。

# axapta - Dynamics AX 2009 X++ 选择日期范围

> ID：10797517
> 
> 赞同：1
> 
> 时间：2012-05-29T10:40:21.237
> 
> 标签：axapta, x++, microsoft-dynamics, ax

我正在创建一个 X++ 报告，要求是用户可以在表单上进行多选，当他们单击报告菜单按钮时，会根据选择拉入值。

到目前为止，这很容易，我可以拉入 Str 范围，即订单号、项目 ID 等，但我希望能够根据选择拉入日期范围。

我使用了几个 MorphX 报告使用的方法，在 X++ 报告中使用了 3 个关键方法；

setQuerySortOrder setQueryEnableDS

和主要的关键之一是；

设置查询范围

setQuery Range 的代码如下；

```
private void setQueryRange(Common _common)
{
    FormDataSource              fds;

    LogisticsControlTable       logisticsTable;
    QueryBuildDataSource        qbdsLogisticsTable;

    QueryBuildRange             qbrVanRun;
    str                         rangeVanRun;

    QueryBuildRange             qbrLogId;
    str                         rangeLogId;

    QueryBuildRange             qbrExpStartDate;
    str                         rangeExpStartDate;

    set                         vanRunSet       = new Set(Types::String);
    set                         logIdSet        = new Set(Types::String);
    set                         expStartDate    = new Set(Types::Date);

    str addRange(str _range, str _value, QueryBuildDataSource _qbds, int _fieldNum, Set _set = null)
    {
    str             ret = _range;
    QueryBuildRange qbr;
    ;

    if(_set && _set.in(_Value))
    {
        return ret;
    }

    if(strLen(ret) + strLen(_value) + 1 > 255)
    {
        qbr = _qbds.addRange(_fieldNum);
        qbr.value(ret);
        ret = '';
    }

    if(ret)
    {
        ret += ',';
    }

    if(_set)
    {
        _set.add(_value);
    }

    ret += _value;
    return ret;
}

switch(_common.TableId)
{
    case tableNum(LogisticsControlTable):

    qbdsLogisticsTable  = element.query().dataSourceTable(tableNum(LogisticsControlTable));
    qbrVanRun           = qbdsLogisticsTable.addRange(fieldNum(LogisticsControlTable, APMServiceCenterID));

    qbdsLogisticsTable  = element.query().dataSourceTable(tableNum(LogisticsControlTable));
    qbrLogId            = qbdsLogisticsTable.addRange(fieldNum(LogisticsControlTable, LogisticsId));

//       qbdsLogisticsTable  = element.query().dataSourceTable(tableNum(LogisticsControlTable));
//        qbrExpStartDate     = qbdsLogisticsTable.addRange(fieldNum(LogisticsControlTable, APMExpDateJobStart));

    fds = _common.dataSource();

    for(logisticsTable = fds.getFirst(true) ? fds.getFirst(true) : _common;
        logisticsTable;
        logisticsTable = fds.getNext())
    {
        rangeVanRun         = addrange(rangeVanRun, logisticsTable.APMServiceCenterID, qbdsLogisticsTable, fieldNum(LogisticsControlTable, APMServiceCenterID), vanRunSet);
        rangeLogID          = addrange(rangeLogID, logisticsTable.LogisticsId, qbdsLogisticsTable, fieldNum(LogisticsControlTable, LogisticsId), logIdSet);
//           rangeExpStartDate   = addrange(rangeExpStartdate,       logisticsTable.APMExpDateJobStart, qbdsLogisticsTable, fieldNum(LogisticsControlTable, APMExpDateJobStart), expStartDate);
    }

qbrLogId.value(rangeLogID);
    qbrVanRun.value(rangeVanRun);
    break;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:04:03.183

用于`queryValue`为查询正确设置日期格式：

```
set expStartDate = new Set(Types::String);

rangeExpStartDate = addrange(rangeExpStartdate, queryValue(logisticsTable.APMExpDateJobStart), qbdsLogisticsTable, fieldNum(LogisticsControlTable, APMExpDateJobStart), expStartDate); 
```

# perl - cpan2rpm 无法统计 /tmp 文件夹

> ID：10797521
> 
> 赞同：0
> 
> 时间：2012-05-29T10:40:40.183
> 
> 标签：perl, cpan

我正在尝试为 RHEL6 构建**perl-Heap-Priority**。奇怪的是当我运行 `cpan2rpm Heap::Priority`它时显示如下

```
...
Tarball extraction: [/root/rpm/SOURCES/Heap-Priority-0.01.tar.gz]
Can't stat /tmp/CldQkErG6r/18:51: No such file or directory
 at /usr/bin/cpan2rpm line 392
get_meta(): No such file or directory at /usr/bin/cpan2rpm line 396.
... 
```

实际上，不会创建此临时文件夹。买为什么？我的 tmp 文件夹权限是 777

```
drwxrwxrwt.   3 root root  4096 May 29 16:35 tmp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:25:16.727

已知问题，请参阅[https://rt.cpan.org/Ticket/Display.html?id=72421](https://rt.cpan.org/Ticket/Display.html?id=72421)。问题是输出的*用户*列中的空间。

```
$ tar -tzvf $HOME/rpmbuild/SOURCES/Heap-Priority-0.01.tar.gz |head -1
drwxr-xr-x James Freeman/544 0 2002-05-07 14:51 Heap-Priority-0.01/ 
```

应用以下补丁来解决此模块的问题。要获取名称，我们访问的是最后一列，而不是访问第五列。我不知道这个补丁可能会破坏什么，但它应该比原始代码平均错误更少。

```
 diff --git a/cpan2rpm b/cpan2rpm
 index 28e8b01..6a36b68 100755
 --- a/cpan2rpm
 +++ b/cpan2rpm
 @@ -1259,7 +1259,7 @@ sub untar($) {
          ;

      chomp($_ = qx/$cmd/);
 -    $_ = (split)[5] unless $zip;
 +    $_ = (split)[-1] unless $zip;
      $dst .= "/$1" if m|^(\S+)/?|;
      $dst =~ s|/*$||;    # path shouldn't end in / or tardir gets wiped
      $dst =~ s|\./||;    # paths in tarballs shouldn't be relative 
```

[您可以通过使用调试器](http://p3rl.org/debtut)自己发现所有这些。学会使用这个工具，它是无价的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-23T19:34:02.550

我认为这可能是一种更清洁的方法：

```
--- /usr/bin/cpan2rpm.orig  2017-10-20 14:45:57.000000000 -0700
+++ /usr/bin/cpan2rpm   2017-10-23 12:29:07.006118950 -0700
@@ -1258,7 +1258,7 @@

     my $cmd = $zip
         ? "unzip -l $_ | grep -P -o '\\S+/\$' |tail -1"
-        : "tar -t${z}vf $_ |head -1"
+        : "tar --numeric-owner -t${z}vf $_ |head -1"
         ;

     chomp($_ = qx/$cmd/); 
```

# python - 使用pickle python反序列化时出错

> ID：10797525
> 
> 赞同：-1
> 
> 时间：2012-05-29T10:40:51.400
> 
> 标签：python, pickle

我是 python 新手。我有一个文件`data.pkl`。我想做的是从文件中获取数据。我查看了[http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)， 11.1.7 示例并尝试了。我的代码如下所示：

```
import pprint, pickle

pkl_file = open('data.pkl', 'rb')

data1 = pickle.load(pkl_file)
pprint.pprint(data1)

pkl_file.close() 
```

但它给了我错误：

```
Traceback (most recent call last):
  File "/home/sadiksha/workspace/python/test.py", line 5, in <module>
    data1 = pickle.load(pkl_file)
  File "/usr/lib/python2.7/pickle.py", line 1378, in load
    return Unpickler(file).load()
  File "/usr/lib/python2.7/pickle.py", line 858, in load
    dispatch[key](self)
  File "/usr/lib/python2.7/pickle.py", line 966, in load_string
    raise ValueError, "insecure string pickle" 
```

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:48:10.617

似乎您的泡菜文件没有正确写入（指定'wb'）或文件以某种方式损坏。尝试创建自己的泡菜文件并将其读回。这应该可以解决问题。

至于指定的pickle文件，它肯定已损坏。

# wcf - MSMQ + WCF：WindowsDomain MsmqAuthenticationMode 需要发送者的 SID

> ID：10797533
> 
> 赞同：1
> 
> 时间：2012-05-29T10:41:25.247
> 
> 标签：wcf, msmq, sid

尝试使用 WCF 发送/接收到 MSMQ 队列时收到以下错误：

> “创建消息安全上下文失败，因为在消息中找不到发件人的 SID。无法接收消息。WindowsDomain MsmqAuthenticationMode 需要发件人的 SID。”

这会导致所有消息都失败并因此移动到另一个有害队列。该错误似乎在接收服务上触发。

**客户端**配置如下：

```
<netMsmqBinding>
    <binding name="OrderServiceMsmqBinding"
              durable="true"
              exactlyOnce="true"
              maxReceivedMessageSize="2147483647"
              maxRetryCycles="1"
              receiveErrorHandling="Move"
              receiveRetryCount="1"
              retryCycleDelay="00:0:05"
              deadLetterQueue="Custom"
              customDeadLetterQueue="net.msmq://localhost/private/Services.DeadOrderListenerService/DeadOrderListenerService.svc"                  
              useMsmqTracing="true">
      <security mode="None" />
      <readerQuotas maxStringContentLength="2147483647" />
    </binding>
  </netMsmqBinding> 
```

也：

```
<client>
      <endpoint address="net.msmq://localhost/private/Services.OrderPlacementProviderService/OrderPlacementProviderService.svc" binding="netMsmqBinding" bindingConfiguration="OrderServiceMsmqBinding" contract="Providers.IOrderPlacementService" name="orderingMsmqEndpoint" />
</client> 
```

接收服务的配置大致相同：

```
<netMsmqBinding>       
        <binding name="OrderServiceMsmqBinding"
                 durable="true"
                 exactlyOnce="true"                 
                 maxReceivedMessageSize="2147483647"                      
                 maxRetryCycles="1"
                 receiveErrorHandling="Move"
                 receiveRetryCount="1"
                 retryCycleDelay="00:0:05"
                 deadLetterQueue="Custom"                 customDeadLetterQueue="net.msmq://localhost/private/Services.DeadOrderListenerService/DeadOrderListenerService.svc"
                 timeToLive="00:01:00"
                 useActiveDirectory="false"
                 useMsmqTracing="true">
          <readerQuotas maxStringContentLength="2147483647" />
        </binding>
      </netMsmqBinding> 
```

和：

```
<service name="Services.OrderPlacementProviderService" behaviorConfiguration="OrderServiceBehavior">
        <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration="" name="MexOrderService" contract="IMetadataExchange" />
        <endpoint address="net.msmq://localhost/private/Services.OrderPlacementProviderService/OrderPlacementProviderService.svc" binding="netMsmqBinding" bindingConfiguration="OrderServiceMsmqBinding" contract="Providers.IOrderPlacementService" name="msmqEndpoint" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/Services.OrderPlacementProviderService" />
          </baseAddresses>
        </host>
      </service> 
```

队列未经身份验证，暂时允许所有人访问。此 SID 问题才刚刚开始发生。它始终发生在不同的环境中，所以我认为我配置错误？

更多信息：客户下订单（在队列上），如下所示：

```
 using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required))
 {
      _orderPlacementClient.PlaceOrder(basket, transactionRef, user);       
      scope.Complete();
 } 
```

监听服务看起来像：

```
[OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
    public void PlaceOrder(BasketDTO basket, string transactionReference, UserDTO user)
    {
        _log.Info("Order placed: " + transactionReference + " for user " + user.Id);
        try 
        {
            _prov.PlaceOrder(basket, transactionReference, user);                
        }
        catch (Exception ex)
        {
            _log.Error("Error placing order", ex);
        }           
    } 
```

# magento - 使用 SKU 和产品名称作为元标题

> ID：10797535
> 
> 赞同：0
> 
> 时间：2012-05-29T10:41:32.100
> 
> 标签：magento

我需要更新我的 Magento 产品详细信息（其中超过 25000 个），因此它们都具有以下方式设置的 Meta Title 详细信息：

产品 SKU : 产品名称

有人可以帮我解决如何以编程方式更新数据库，以便在每个产品上都这样做吗？

目前在 Magento 1.4.0.1 上，但即将推出我们升级的 1.6 网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:34:28.507

Jürgen Thelen 说：

```
Mage::getModel('catalog/product')->getCollection()->addAttributeToSelect('sku')->addAttributeToSelect('name');
foreach ($products as $product) {
  $product->setMetaTitle(sprintf("%s : %s", $product->getSku(), $product->getName()));
  $product->save();
} 
```

# javascript - 在 jquery 中使用 .show() 命令设置元素的位置

> ID：10797537
> 
> 赞同：0
> 
> 时间：2012-05-29T10:41:46.003
> 
> 标签：javascript, jquery

是否可以在 jQuery (http://api.jquery.com/show/) 中修改 .show() 命令，以便 div 不会显示在其原始位置，而是显示在 div 列表的底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:49:19.150

是的 - 检查演示[http://jsfiddle.net/PqLXF/](http://jsfiddle.net/PqLXF/)

这是代码 -

**HTML**

```
<div class="mainDiv">

<div>One</div>
<div class="showthisdiv">Two</div>
<div>Three</div>
<div>Four</div>

</div> 
```

**CSS**

```
.showthisdiv{
    display: none;
} 
```

**jQuery**

```
$('.showthisdiv').show().insertAfter('.mainDiv div:last'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:51:22.983

你甚至可以做更多：

```
$('#your_element').show('slow', function() {
    $('#your_element').css(USE CSS TO POSITION YOUR DIV ELEMENT);
  }); 
```

或者，就像@Dipak Suryavanshi 建议的那样

```
$('#your_element').show('slow', function() {
    $('#your_element').insertAfter('.mainDiv div:last');​
  }); 
```

该解决方案的强大之处在于您可以对元素执行任何操作（只需在函数中添加代码）。

# jquery - 滑块单个弹簧

> ID：10797539
> 
> 赞同：1
> 
> 时间：2012-05-29T10:42:11.087
> 
> 标签：jquery

我的页面有一个像这个主页 studio8169.com/?page_id=11 这样的滑块

例如，我如何从盒子 2 跳到 5？我想在框下为用户制作链接。用户可以在不同的盒子之间跳来跳去。

这是我的滑块

```
<div id="mid"> (Position: absolute, width:100%, height:400px; overflow:hidden;)

<div id="gallery"> (position:relative;width:960px;margin:0 auto;)
   <div id="slider"> (position absolute;left:0px;width:100000px;height:400px;)
      <div class="box"></div> (position:relative; float:left;)     width:960px;height:400px;
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
   <div class="btn btn_left"></div> (position:absolute;top:150px;left:0px;)
   <div class="btn btn_right"></div> (position:absolute;top:150px;right:0px;)
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:48:33.850

我已经很久没有做 JavaScript 和 jQuery 了，所以你必须忍受我。我玩了一点游戏，这是我的第一次尝试：http: [//jsfiddle.net/TyCsK/7/](http://jsfiddle.net/TyCsK/7/)。基本上，三个 div（代表您的图片）固定在另一个 div 上，该 div 在容器内滑动。

有几个问题需要解决（当你到达终点时禁用左右按钮等），但这可能是一个不错的起点。享受。

# javascript - 仅当这些消息存在时，如何在 primefaces 中显示带有 requiredMessages 的弹出窗口？

> ID：10797541
> 
> 赞同：2
> 
> 时间：2012-05-29T10:42:14.250
> 
> 标签：javascript, jsf, popup, primefaces

当我单击提交按钮时，我想显示一个带有一些 inputText 字段的 requiredMessages 的弹出窗口。但仅在有这些消息的情况下。我已经尝试在 oncomplete 标记上使用 bean 变量和 javascript，但我无法使其正常工作。如果我在 p:dialog 中放入 visible="true"，则始终显示弹出窗口，尽管我尝试从 commandButton 控制它。现在，我有了这个，但从未显示弹出窗口：

```
<h:inputText id="Scheme" 
            required="true"
            requiredMessage="Required.">
</h:inputText>

<h:commandButton id="submitModify" value="#{msg['systemdetail.modify']}"
             action="#{sistem.modify}"
             oncomplete="if (#{facesContext.maximumSeverity != null}) {dlg1.show();}">
</h:commandButton>

<p:dialog id="popup"
          style="text-align:center"
          widgetVar="dlg1"
          modal="true">  
    <h:messages layout="table"/>
</p:dialog> 
```

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T14:33:13.240

标准 JSF 和 PrimeFaces 不支持`on*`属性中基于请求的 EL 评估。RichFaces 是唯一支持这一点的人。此外，标准的 JSF`<h:commandButton>`根本没有`oncomplete`属性。您可能对 PrimeFaces 感到困惑`<p:commandButton>`

有几种方法可以实现这一点：

*   检查相反的`visible`属性中的条件`<p:dialog>`。

    ```
    <p:dialog visible="#{not empty facesContext.messageList}"> 
    ```

    或者如果您只想显示验证消息而不是所有消息

    ```
    <p:dialog visible="#{facesContext.validationFailed}"> 
    ```

    * * *

*   改用 PrimeFaces `<p:commandButton>`，PrimeFaces JS API也通过对象支持`#{facesContext.validationFailed}`条件：`args`

    ```
    <p:commandButton ... oncomplete="if (args.validationFailed) dlg1.show()" /> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:14:55.617

If you need to check for what kind of messages, here is a way that I made work with primefaces. Since primefaces oncomplete is called after update, by updating the component holding the javascript function, the javascript function can be rebuilt using the latest #facesContext.maximumSeverity} values before executed.

```
<p:commandButton
    oncomplete="executeAfterUpdate()"
    update="updatedBeforeOnComplete"/>

<h:panelGroup id="updatedBeforeOnComplete">
    <script language="JavaScript" type="text/javascript">
        //
        function executeAfterUpdate(){
            if (#{facesContext.maximumSeverity==null
               or facesContext.maximumSeverity.ordinal=='1'})
            {
                // your code to execute here
                someDialog.show();
            }
        }
        //
    </script>
</h:panelGroup> 
```

# jquery - jQuery 验证和数组，如命名输入

> ID：10797544
> 
> 赞同：3
> 
> 时间：2012-05-29T10:42:27.900
> 
> 标签：jquery, validation

在定义验证规则时，如何引用[此](http://jsfiddle.net/strategycon/Pa9xn/5/)jsfiddle 中的第二个输入？我正在考虑诸如“postArray.inputOne”之类的东西，而不是 inputOne，就像我对第一个一样。当然，它不起作用。有什么办法可以做到吗？

我的 HTML 如下所示：

```
<form id="formId" method="post" action="">
    <input type="text" name="inputOne" />
    <input type="text" name="postArray[inputOne]" />
</form>​ 
```

验证规则如下所示：

```
$("#formId").validate({
    rules: {
      inputOne: {
        required: true
      }
    },
    messages: {
      inputOne: {
        required: "Required!"
      }
    }
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:49:40.197

您可以按名称验证任何文本字段

```
 $(document).ready(function () {

    $("#formId").validate({
        rules:{
            "inputOne":{
                required:true
            },

            "postArray[inputOne]":{
                required:true
            },

            messages:{
                "inputOne":"This field is required",
                "postArray[inputOne]":"This field is required"
            }
        }
    });
}); 
```

希望它会有所帮助......

# android - Android中计算器的退格按钮

> ID：10797547
> 
> 赞同：1
> 
> 时间：2012-05-29T10:42:37.463
> 
> 标签：android, calculator

我正在开发一个计算器，我想在其中添加一个退格按钮。单击退格按钮时，元素`EditText`将被一一删除。但我不知道如何为此编写代码。请提出解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:45:49.897

像这样的东西应该工作：

```
EditText edit;

...

String txt = edit.getText();
txt = txt.length() > 1 ? txt.substring(0, txt.length() - 2) : "0";
edit.setText(txt); 
```

# jquery - 滚动div时jQuery防止点击事件触发

> ID：10797549
> 
> 赞同：11
> 
> 时间：2012-05-29T10:42:41.807
> 
> 标签：jquery, events, click

听起来很容易对吧？但我使用的是自定义滚动控件（[http://github.com/inuyaksa/jquery.nicescroll](http://github.com/inuyaksa/jquery.nicescroll)），并且我已经尝试了大多数我在使用 draggable() 时看到的防止这种情况的技巧。但他们没有为此工作......我在这里上传了页面和代码：

演示：[http](http://www.beforethecode.net/blazin) ://www.beforethecode.net/blazin 来源：[http ://www.beforethecode.net/blazin/blazin.zip](http://www.beforethecode.net/blazin/blazin.zip)

这是一个触摸屏项目。到目前为止，我唯一的解决方案是将 $thumbs 绑定到“dblclick”，这样它就会在拖动鼠标/手指后停止触发……但我真的很想在滚动停止后单击一下就能让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T09:57:37.503

您最好的选择将是一个类似于有多少自动完成工作取消本机事件的解决方案，而是使用超时和标志仅在所需的情况下采取行动：

1.  `event.preventDefault()`相关控件、标签等上的“点击”事件`<a />`（即不要让任何与触发点击相关的本机浏览器行为发生）。
2.  在阻止默认后的“点击”事件上，将点击动作放在一个小`setTimeout`并保存超时句柄。
3.  在“stopdrag”事件中，清除超时句柄；理论上，这将在“点击”事件超时期间发生，并防止在逻辑停止拖动后发生点击，而在真正的点击中将没有停止拖动来取消超时（因此该操作将按需要进行）。

代码：

```
var clickActionTimeout = null;

function clearClickActionTimeout() {
  if(clickActionTimeout) {
    clearTimeout(clickActionTimeout);
    clickActionTimeout = null;
  }
}

$elem.click(function(e) {
  e.preventDefault();
  clearClickActionTimeout();
  clickActionTimeout = setTimeout(function() {
    // This was a real click if we got here...
    openPicture();
  }, 200);
});

$elem.bind('stopdrag', function() {
  clearClickActionTimeout();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T07:10:33.523

你有没有尝试过：

```
event.stopPropagation() 
```

这是[此功能的参考](http://api.jquery.com/event.stopPropagation/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-04T22:09:14.800

我不使用这个库，但也许这对你有帮助。顺便说一句，它不是用于移动设备，而是用于触摸屏。在我的手机上一切正常，滚动没问题。

您有一些配置属性，其中一些看起来只是为了满足您的需要。这里有一些：

. touchbehavior - 在桌面计算机中启用光标拖动滚动，如触摸设备，默认为 false

. cursordragontouch，也可以在触摸/触摸行为模式下拖动光标（默认值：false）

[https://github.com/inuyaksa/jquery.nicescroll/blob/master/README](https://github.com/inuyaksa/jquery.nicescroll/blob/master/README)

我没有看到您的代码，您的链接已损坏，也许您已经知道此属性。但如果没有，希望这会对你有所帮助。这只是找个马窝。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-05T05:10:57.697

我不知道如何管理触摸事件。然而，这就是我对点击事件的处理方式，我想它与那些[http://jsfiddle.net/USvay/没有太大区别](http://jsfiddle.net/USvay/)

这个想法是为了防止点击事件，相反，如果某个时间已经过去或没有过去，您的愿望功能将在 mouseup 上触发。

```
var clicked = true,
    tOut;

$('a').on('click', function (e) {
    e.preventDefault();
}).on('mousedown', function () {

    tOut = setTimeout(function () {
        clicked = false;
    }, 200);

}).on('mouseup', function () {

    if (clicked == true) {
        clearTimeout(tOut);
        my_function();

    } else {
        clicked = true;
        $('<p>Dragged</p>').appendTo('#result');
    }

});

function my_function() {
    $('<p>Clicked</p>').appendTo('#result');
} 
```

# java - IncompatibleClassChangeError：接口未实现

> ID：10797551
> 
> 赞同：5
> 
> 时间：2012-05-29T10:42:54.183
> 
> 标签：java, android

从安卓市场，我得到了以下崩溃报告。我在测试我的应用程序时没有找到。车祸发生在`PasswordActivity`课堂上。我正在发送堆栈跟踪和代码。任何人都可以向我建议崩溃发生的位置以及为什么会发生这种情况？

**堆栈跟踪**

```
java.lang.IncompatibleClassChangeError: interface not implemented
at in.plackal.lovecyclesfree.PasswordActivity.onCreate(PasswordActivity.java)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
at dalvik.system.NativeStart.main(Native Method) 
```

**我的代码**

public class PasswordActivity extends Activity implements Utilities { //私有变量 private EditText m_passwrdEditText;

```
private TextView m_passwrdErrorText;

private Resources m_res;

@Override
public void onCreate(Bundle savedInstanceState) {
    //Setup the activity
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);

    if (dm.widthPixels == 320 && dm.heightPixels == 480) {
        setContentView(R.layout.password_activity_hvga);
    } else {
        setContentView(R.layout.password_activity);
    }

    GoogleAnalyticsTracker tracker = GoogleAnalyticsTracker.getInstance();;
    tracker.startNewSession("UA-xxxxxxx-1", this);
    tracker.trackPageView("Password");
    tracker.dispatch();

    m_res = getResources();

    final Typeface face = Typeface.createFromAsset(getAssets(), "fonts/Cicle Semi.otf");

    m_passwrdErrorText = (TextView) findViewById(R.id.txt_error_message);
    m_passwrdErrorText.setTypeface(face);

    m_passwrdEditText = (EditText) findViewById(R.id.txt_edit_passwrd);
    m_passwrdEditText.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            m_passwrdEditText.setHint("");
            m_passwrdEditText.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);
            m_passwrdEditText.setTypeface(face);
        }
    });

    m_passwrdEditText.setTypeface(face);

    m_passwrdEditText.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                String strPassEntered = m_passwrdEditText.getText().toString();
                String strPassSaved = CycleManager.getSingletonObject().getPassWord();
                m_passwrdEditText.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);
                if (strPassSaved.equals(strPassEntered) || strPassEntered.equals(DEFAULT_PASSWORD)) {
                    Intent intent = new Intent(PasswordActivity.this, ActivityManager.class);
                    startActivity(intent);
                    PasswordActivity.this.finish();
                } else {
                    m_passwrdErrorText.setText(m_res.getString(R.string.passwrd_error_text));
                    m_passwrdEditText.setFocusable(true);
                }
            } else if (keyCode == KeyEvent.KEYCODE_DEL) {
                m_passwrdEditText.setHint(m_res.getString(R.string.passwrd_hint_text));
                m_passwrdErrorText.setText("");
            }

            m_passwrdEditText.setTypeface(face);
            return false;
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-26T07:56:31.020

我看到 2 份关于 Play 商店的报告，`IncompatibleClassChangeError: interface not implemented`但在`Service`类中出现异常，日志消息包含`onStartCommand(Unknown Source)`. 我正在使用 Eclipse 构建发布的应用程序。

幸运的是，我室友的手机也遇到了同样的异常。阅读以下链接后：[什么原因导致 java.lang.IncompatibleClassChangeError？](https://stackoverflow.com/questions/1980452/what-causes-java-lang-incompatibleclasschangeerror)，我修复它的方式（至少在我室友的手机上）是将 android-support-v4.jar 添加到项目的“libs”文件夹并添加到构建路径。然后在“Order and Export”下的项目“Java Build Path”部分，导出新添加的jar文件并删除导出“Android Private Libraries”的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:50:34.683

调查您的界面，实用程序

```
public class PasswordActivity extends Activity implements Utilities 
```

使用这个接口需要实现哪些功能？

Eclipse 通常对这些问题有快速修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T09:54:55.540

一定是某种安装故障，重新安装可能会有所帮助，但恐怕你无法告诉用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T09:34:49.480

就我而言，它是：

```
class MyThread<T extends Closeable> extends Thread {
} 
```

用作`MyThread<DatagramSocket>`：在 19 之前的 Android API 级别`DatagramSocket`上不是一个`Closeable`. [阅读更多。](https://stackoverflow.com/questions/29825330/why-a-socket-is-not-instanceof-closeable-at-runtime)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-25T23:17:19.520

*该方法很长，并且堆栈跟踪没有行号（您是否删除了它？）*

其中一个方法调用`onCreate`是通过一个接口，该接口未在您收到错误报告的设备上实现。起初这听起来很奇怪。

问题是，当您编译代码时，它使用的是另一个版本（可能是更新的），并且该版本有一个实现接口的类。然而，该`implements`子句是在您的目标版本（您编译的版本）和运行报告来自的设备的版本（旧版本）之间添加的。设备上的那个 .class 文件没有`implements`那个接口，但是你的代码正在尝试调用它。这是一个例子：

```
// data is declared as T, and the class is generic with <T extends Closeable>
// ParcelFileDescriptor implements Closeable, but only above 4.1.1_r1
data.close();
this     //    3    7:aload_0         
.data    //    4    8:getfield        #18  <Field Closeable data>
.close() //    5   11:invokeinterface #19  <Method void Closeable.close()>
// so if you compiled the above on 4.4 and use it on 3.0 it should throw the same error
// when the data variable contains a ParcelFileDescriptor instance 
```

**您可以尝试消除可能的行：**

忽略内部类，因为它们的堆栈会有所不同，并忽略构造函数和原始操作：

```
super.onCreate(savedInstanceState);
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);     
getWindowManager().getDefaultDisplay().getMetrics(dm);
setContentView(R.layout.password_activity_hvga);
setContentView(R.layout.password_activity);

GoogleAnalyticsTracker tracker = GoogleAnalyticsTracker.getInstance();;
tracker.startNewSession("UA-xxxxxxx-1", this);
tracker.trackPageView("Password");
tracker.dispatch();

m_res = getResources();

final Typeface face = Typeface.createFromAsset(getAssets(), "fonts/Cicle Semi.otf");     

m_passwrdErrorText  = (TextView) findViewById(R.id.txt_error_message);
m_passwrdErrorText.setTypeface(face);
m_passwrdEditText  = (EditText) findViewById(R.id.txt_edit_passwrd);
m_passwrdEditText.setOnClickListener(...);
m_passwrdEditText.setTypeface(face);
m_passwrdEditText.setOnKeyListener(...); 
```

从剩下的你可以消除`this`调用和类型化（`TextView`/`EditText`非接口）调用，留下：

```
getWindowManager().getDefaultDisplay().getMetrics(dm);

GoogleAnalyticsTracker tracker = GoogleAnalyticsTracker.getInstance();;
tracker.startNewSession("UA-xxxxxxx-1", this);
tracker.trackPageView("Password");
tracker.dispatch();

final Typeface face = Typeface.createFromAsset(getAssets(), "fonts/Cicle Semi.otf"); 
```

**但**它也可能是被淘汰的人之一。最好的方法是在与报告的设备具有相同版本的模拟器或真实设备上重现并查看哪一行，但如果这不可能，您可以尝试反编译 .class 文件并`invokeinterface`在此方法中查找说明，这将缩小范围真的很好。

# jquery - jQuery UI datepicker：如何调用“$.datepicker._gotoToday;” 从自己的按钮？

> ID：10797557
> 
> 赞同：1
> 
> 时间：2012-05-29T10:43:35.150
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我需要用`$.datepicker._gotoToday;`我自己的按钮打电话。

我以这种方式添加自定义按钮：

```
beforeShow: function (input) {
        setTimeout(function () {
            var bodyPane = $(input).datepicker("widget");

            $("<button>", {
                click: function () {
              // call $.datepicker._gotoToday;
                }
            }).attr("class", "btnToday").text("test").appendTo(bodyPane);
        }, 1);
    } 
```

有没有办法调用函数或“克隆”它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:51:59.773

您应该可以在 click 函数中设置选择器的日期：

```
$(input).datepicker("setDate", new Date()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T19:47:12.900

试试这个：

```
$(function(){
  $("#id_input").datepicker({
     showButtonPanel: true,
     changeMonth: true,
     changeYear: true
   });
});
$('#id_input').click(function(){
  $('.ui-datepicker-current').trigger('click');
  $('.ui-datepicker-buttonpane').hide();
}); 
```

对我来说还好 ;）

# wpf - WPF - 使用来自另一个程序集的样式/资源

> ID：10797558
> 
> 赞同：4
> 
> 时间：2012-05-29T10:43:37.630
> 
> 标签：wpf

我是 WPF 的新手，并且努力使用单独程序集中的样式。这就是我正在做的事情：-

我有一个带有 \Themes 文件夹的类库项目，其中包含一个“generic.xaml”，它合并了 \Themes 中子文件夹中的许多 xaml 文件：-

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Metro\CoreStyles.xaml" />
        ... etc ...
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

我的解决方案还有一个 WPF 应用程序项目，在这里 App.xaml 合并了我的库项目中的资源，如下所示：-

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/MyThemeLibrary;component/Themes/generic.xaml"/>    
        ... etc... 
```

到目前为止的标准东西。

最后，我还有第三个项目——一个 WPF 用户控件库。这些控件使用这些常用样式，通常带有`"Style={StaticResource SomeStyle}"`. 我可以运行应用程序，一切看起来都很好，但问题是我在编写用户控件时没有获得设计时支持 - 设计表面基本上是空的。

另一篇 SO 文章建议将 App.xaml 添加到用户控件库项目中，并如上所述合并资源。这可行，我得到了设计时支持，但是在尝试构建解决方案时出现错误：

```
Library project file cannot specify ApplicationDefinition element. 
```

我已尝试将 App.xaml 构建操作从“ApplicationDefinition”更改为“Page”，正如其他地方所建议的那样。这使构建工作，但我失去了设计时支持，因为用户控件不再能看到样式。

有没有办法解决这个问题，或者失败了，使用另一个程序集的样式的替代方法？

提前致谢

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:52:59.770

错误消息说。您不能在库项目中使用“pack://application...”语法。您应该在您的 wpf 项目中执行此操作。

# jquery - Valum 的 Ajax JQuery 文件上传器进度减慢浏览器

> ID：10797560
> 
> 赞同：0
> 
> 时间：2012-05-29T10:43:43.780
> 
> 标签：jquery, ajax, file-upload

我正在尝试实现[此处](https://github.com/valums/file-uploader)找到的 Ajax JQuery 文件上传实用程序。除了一个小问题外，一切都很好。当我选择多个文件进行上传时，整个过程会减慢浏览器的行为，包括其他浏览器选项卡。

我怀疑这可能是由于触发了进度事件的数量。有什么解决方案。我能想到的一种方法是限制并行上传，以便文件一个一个地上传。

任何人都可以建议一个好的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:44:24.003

```
var fileUploader = new qq.FileUploader({
    multiple: false
}); 
```

# python - 何时在 python 中释放函数堆栈数据？

> ID：10797562
> 
> 赞同：5
> 
> 时间：2012-05-29T10:43:55.830
> 
> 标签：python, stack-frame

在测试以下代码时，我对此有疑问：

1、

```
def file_close_test():
    f = open('/tmp/test', 'w+')

if __name__ == '__main__':
    file_close_test()
    # wait to see whether file closed.
    import time
    time.sleep(30) 
```

2、

```
def file_close_on_exc_test():
    f = open('/tmp/test', 'w+')
    raise Exception()

def exception_wrapper():
    try:
        file_close_on_exc_test()
    except:
        pass
    # wait to see whether file closed.
    import time
    time.sleep(10)

if __name__ == '__main__':
    exception_wrapper()
    import time
    time.sleep(30) 
```

1.  文件对象在**file_close_test**退出时关闭，因为没有引用它。
2.  引发异常后，文件对象没有关闭。所以我认为相关的堆栈数据没有释放。
3.  **exception_wrapper**退出后，文件自动关闭。

你能为我解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:12:27.600

异常包括一个回溯对象，该对象可用于访问抛出异常时活动的任何堆栈帧中的所有局部变量。这意味着您仍然可以访问该文件，直到清除异常上下文。

即使在`sleep()`结束之后，`exception_wrapper`您也可以使用`sys.exc_info`以下方式获取打开的文件：

```
tb = sys.exc_info()[2]
print tb.tb_next.tb_frame.f_locals['f'] 
```

当然，所有这些都特定于您正在使用的特定 Python 实现。其他实现可能根本不会隐式关闭文件，直到它们被垃圾收集。

底线是你永远不应该依赖 Python 的引用计数或垃圾收集来清理打开的文件等资源，总是明确地这样做。

# c++ - 尝试破解 C++ 中的常量时的奇怪行为

> ID：10797564
> 
> 赞同：1
> 
> 时间：2012-05-29T10:44:02.000
> 
> 标签：c++, memory, pointers

> **可能重复：**
> [通过非常量指针修改 const](https://stackoverflow.com/questions/2508605/modifying-a-const-through-a-non-const-pointer)

我正在学习 C++，并且对指针非常感兴趣。我试图改变一个常数值的值（我的老师称之为`backdoor`，如果我错了，请澄清），如下所示：

```
const int i = 0;

const int* pi = &i;

int hackingAddress = (int)pi;
int *hackingPointer = (int*)pi;

*hackingPointer = 1;

cout << "Address:\t" << &i << "\t" << hackingPointer << endl;
cout << "Value:  \t" << i << "\t\t" << *hackingPointer << endl;

system("PAUSE");

return 0; 
```

然而，结果很奇怪。虽然这两个地址相同，但值不同。

![](../Images/bf1ea5a55122438491ad27caa2c53d49.png)

我的代码是如何执行的？而价值究竟存储`0`在哪里？`1`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T10:47:53.183

您发现了一个 C++ 开发人员称之为*未定义行为*的小东西。您告诉编译器“`i`是一个值为 0 的常量”。因此，当您向编译器询问 的值时`i`，它会告诉您它是 0。

试图更改常量的值违反了编译器所做的假设（常量将是*常量*），因此编译器将生成无效或不一致的代码。

在 C++ 中有很多情况，可以在编译器不将其捕获为错误的情况下执行某些操作，但结果是*undefined*。如果你这样做，那么你会得到你所看到的结果。编译器做了一些奇怪和意想不到的事情。

哦，如果你的老师试图通过这样的例子教你**任何东西**，他就错了，你应该非常害怕。

您从这样的代码中获得的**唯一保证是：**

> 编译器可以做任何它喜欢的事情

当您编写代码时，您与编译器有一个隐式契约：

“如果我编写了定义明确的 C++ 代码，那么您将其转换为具有与 C++ 标准描述的相同效果的可执行文件”。

当你做这样的事情时，你就违反了合同。然后编译器也没有义务遵循它。如果您提供的编译器代码没有根据 C++ 标准明确定义，那么它就不能也不会创建一个按照 C++ 标准指定的可执行文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:53:46.087

看来，编译器已经优化（内联 int const 值）

```
cout << "Value:  \t" << i << "\t\t" << *hackingPointer << endl; 
```

至

```
cout << "Value:  \t" << 0 << "\t\t" << *(0x0044ff28) << endl; 
```

无论如何，您仍然成功地更改了存储位置的内存值`i`。但是不要在家里尝试这个:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:49:18.853

不允许更改常量的值，实际上这是未定义的行为，因此您的程序可以做*任何事情*。

在这种情况下，您的编译器似乎在编译时优化了读取，因为它知道值是固定的。当您尝试更改它时，许多实现可能会崩溃，但您*不能也不*应该*赌注*或依赖任何未定义行为的结果。

# junit - 没有定义类型 [org.springframework.ws.client.core.WebServiceTemplate] 的唯一 bean

> ID：10797566
> 
> 赞同：2
> 
> 时间：2012-05-29T10:44:07.647
> 
> 标签：junit

我正在尝试使用 class 制作两个测试用例`org.springframework.ws.client.core.WebServiceTemplate`。两个测试用例都在不同的类中，所以我为它们制作了两个不同的 bean。

在运行 junit 测试时，我遇到了这样的错误

> 创建名为“testcases.TestAdminMethodsWebService”的 bean 时出错：通过 bean 属性“admin”表达的不满足依赖关系：：没有定义类型 [org.springframework.ws.client.core.WebServiceTemplate] 的唯一 bean：预期单个匹配 bean，但找到了 7 ：[管理员，规则]；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义类型 [org.springframework.ws.client.core.WebServiceTemplate] 的唯一 bean：预期的单个匹配 bean 但找到了 2：[管理员，规则]

我的豆子是这样的：

```
<oxm:jaxb2-marshaller id="marshaller_admin" contextPath="a.com.b" />
<bean id="admin" class="org.springframework.ws.client.core.WebServiceTemplate">
    <property name="marshaller" ref="marshaller_admin" />
    <property name="unmarshaller" ref="marshaller_admin" />
    <property name="defaultUri"
        value="http://dev05:8080/.." />
</bean>
<oxm:jaxb2-marshaller id="marshaller_rules" contextPath="r.com.b" />
<bean id="rules" class="org.springframework.ws.client.core.WebServiceTemplate">
    <property name="marshaller" ref="marshaller_rules" />
    <property name="unmarshaller" ref="marshaller_rules" />
    <property name="defaultUri"
        value="http://dev05:8080/.." />
</bean> 
```

请告诉我如何解决此问题或为什么会发生此错误，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:48:03.330

使用`@Qualifier`注解来帮助 Spring 确定应该注入哪个 bean。

```
public class TestClass {

    @Autowired
    @Qualifier("admin")
    WebServiceTemplate admin;

    @Autowired
    @Qualifier("rules")
    WebServiceTemplate rules;

    // ... Rest of your class

} 
```

在使用限定符微调基于注释的自动装配部分下阅读[此处的文档。](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html)

**更新：**

您还需要像这样更改您的 xml bean 定义：

```
<oxm:jaxb2-marshaller id="marshaller_admin" contextPath="a.com.b" />
<bean class="org.springframework.ws.client.core.WebServiceTemplate">
    <qualifier value="admin"/>
    <property name="marshaller" ref="marshaller_admin" />
    <property name="unmarshaller" ref="marshaller_admin" />
    <property name="defaultUri"
        value="http://dev05:8080/.." />
</bean>
<oxm:jaxb2-marshaller id="marshaller_rules" contextPath="r.com.b" />
<bean class="org.springframework.ws.client.core.WebServiceTemplate">
    <qualifier value="rules"/>
    <property name="marshaller" ref="marshaller_rules" />
    <property name="unmarshaller" ref="marshaller_rules" />
    <property name="defaultUri"
        value="http://dev05:8080/.." />
</bean> 
```

请注意每个 bean 定义下包含的`<qualifier>`标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:17:36.100

你好这是正确答案

```
 public class TestClass {  

protected WebServiceOperations admin;
admin = (WebServiceOperations) getApplicationContext().getBean("admin");
protected WebServiceOperations rules;
rules = (WebServiceOperations) getApplicationContext().getBean("rules");

// ... Rest of the class 
```

}

# java - 什么决定了 Java ForkJoinPool 创建的线程数？

> ID：10797568
> 
> 赞同：50
> 
> 时间：2012-05-29T10:44:22.263
> 
> 标签：java, parallel-processing, threadpool, fork-join

据我了解`ForkJoinPool`，该池创建固定数量的线程（默认值：核心数）并且永远不会创建更多线程（除非应用程序通过 using 指示需要这些线程`managedBlock`）。

然而，使用`ForkJoinPool.getPoolSize()`我发现在一个创建 30,000 个任务 ( `RecursiveAction`) 的程序中，`ForkJoinPool`执行这些任务平均使用 700 个线程（每次创建任务时都会计算线程数）。这些任务不做 I/O，而是纯粹的计算；唯一的任务间同步是调用`ForkJoinTask.join()`和访问`AtomicBoolean`s，即没有线程阻塞操作。

由于`join()`按照我的理解不会阻塞调用线程，因此池中的任何线程都没有理由阻塞，因此（我假设）没有理由创建任何进一步的线程（这显然仍在发生） .

那么，为什么要`ForkJoinPool`创建这么多线程呢？哪些因素决定了创建的线程数？

我曾希望可以在不发布代码的情况下回答这个问题，但这里是应要求提供的。这段代码是从一个四倍大小的程序中摘录出来的，精简到了基本部分；它不会按原样编译。如果需要，我当然也可以发布完整的程序。

该程序使用深度优先搜索在迷宫中搜索从给定起点到给定终点的路径。保证存在解决方案。主要逻辑在: A的`compute()`方法中，它从某个给定点开始，并继续从当前点可到达的所有相邻点。而不是创造一个新的`SolverTask``RecursiveAction``SolverTask`在每个分支点（这将创建太多任务），它将除一个之外的所有邻居推送到回溯堆栈以供稍后处理，并且仅继续仅一个未推送到堆栈的邻居。一旦它以这种方式到达死胡同，最近推送到回溯堆栈的点就会被弹出，并且从那里继续搜索（相应地削减从 taks 的起点构建的路径）。一旦任务发现其回溯堆栈大于某个阈值，就会创建一个新任务；从那时起，该任务在继续从其回溯堆栈中弹出直到用完为止，但在到达分支点时不会将任何其他点推入其堆栈，而是为每个这样的点创建一个新任务。因此，可以使用堆栈限制阈值来调整任务的大小。

我上面引用的数字（“30,000 个任务，平均 700 个线程”）来自于搜索 5000x5000 个单元的迷宫。所以，这里是基本代码：

```
class SolverTask extends RecursiveTask<ArrayDeque<Point>> {
// Once the backtrack stack has reached this size, the current task
// will never add another cell to it, but create a new task for each
// newly discovered branch:
private static final int MAX_BACKTRACK_CELLS = 100*1000;

/**
 * @return Tries to compute a path through the maze from local start to end
 * and returns that (or null if no such path found)
 */
@Override
public ArrayDeque<Point>  compute() {
    // Is this task still accepting new branches for processing on its own,
    // or will it create new tasks to handle those?
    boolean stillAcceptingNewBranches = true;
    Point current = localStart;
    ArrayDeque<Point> pathFromLocalStart = new ArrayDeque<Point>();  // Path from localStart to (including) current
    ArrayDeque<PointAndDirection> backtrackStack = new ArrayDeque<PointAndDirection>();
    // Used as a stack: Branches not yet taken; solver will backtrack to these branching points later

    Direction[] allDirections = Direction.values();

    while (!current.equals(end)) {
        pathFromLocalStart.addLast(current);
        // Collect current's unvisited neighbors in random order: 
        ArrayDeque<PointAndDirection> neighborsToVisit = new ArrayDeque<PointAndDirection>(allDirections.length);  
        for (Direction directionToNeighbor: allDirections) {
            Point neighbor = current.getNeighbor(directionToNeighbor);

            // contains() and hasPassage() are read-only methods and thus need no synchronization
            if (maze.contains(neighbor) && maze.hasPassage(current, neighbor) && maze.visit(neighbor))
                neighborsToVisit.add(new PointAndDirection(neighbor, directionToNeighbor.opposite));
        }
        // Process unvisited neighbors
        if (neighborsToVisit.size() == 1) {
            // Current node is no branch: Continue with that neighbor
            current = neighborsToVisit.getFirst().getPoint();
            continue;
        }
        if (neighborsToVisit.size() >= 2) {
            // Current node is a branch
            if (stillAcceptingNewBranches) {
                current = neighborsToVisit.removeLast().getPoint();
                // Push all neighbors except one on the backtrack stack for later processing
                for(PointAndDirection neighborAndDirection: neighborsToVisit) 
                    backtrackStack.push(neighborAndDirection);
                if (backtrackStack.size() > MAX_BACKTRACK_CELLS)
                    stillAcceptingNewBranches = false;
                // Continue with the one neighbor that was not pushed onto the backtrack stack
                continue;
            } else {
                // Current node is a branch point, but this task does not accept new branches any more: 
                // Create new task for each neighbor to visit and wait for the end of those tasks
                SolverTask[] subTasks = new SolverTask[neighborsToVisit.size()];
                int t = 0;
                for(PointAndDirection neighborAndDirection: neighborsToVisit)  {
                    SolverTask task = new SolverTask(neighborAndDirection.getPoint(), end, maze);
                    task.fork();
                    subTasks[t++] = task;
                }
                for (SolverTask task: subTasks) {
                    ArrayDeque<Point> subTaskResult = null;
                    try {
                        subTaskResult = task.join();
                    } catch (CancellationException e) {
                        // Nothing to do here: Another task has found the solution and cancelled all other tasks
                    }
                    catch (Exception e) {
                        e.printStackTrace();
                    }
                    if (subTaskResult != null) { // subtask found solution
                        pathFromLocalStart.addAll(subTaskResult);
                        // No need to wait for the other subtasks once a solution has been found
                        return pathFromLocalStart;
                    }
                } // for subTasks
            } // else (not accepting any more branches) 
        } // if (current node is a branch)
        // Current node is dead end or all its neighbors lead to dead ends:
        // Continue with a node from the backtracking stack, if any is left:
        if (backtrackStack.isEmpty()) {
            return null; // No more backtracking avaible: No solution exists => end of this task
        }
        // Backtrack: Continue with cell saved at latest branching point:
        PointAndDirection pd = backtrackStack.pop();
        current = pd.getPoint();
        Point branchingPoint = current.getNeighbor(pd.getDirectionToBranchingPoint());
        // DEBUG System.out.println("Backtracking to " +  branchingPoint);
        // Remove the dead end from the top of pathSoFar, i.e. all cells after branchingPoint:
        while (!pathFromLocalStart.peekLast().equals(branchingPoint)) {
            // DEBUG System.out.println("    Going back before " + pathSoFar.peekLast());
            pathFromLocalStart.removeLast();
        }
        // continue while loop with newly popped current
    } // while (current ...
    if (!current.equals(end)) {         
        // this task was interrupted by another one that already found the solution 
        // and should end now therefore:
        return null;
    } else {
        // Found the solution path:
        pathFromLocalStart.addLast(current);
        return pathFromLocalStart;
    }
} // compute()
} // class SolverTask

@SuppressWarnings("serial")
public class ParallelMaze  {

// for each cell in the maze: Has the solver visited it yet?
private final AtomicBoolean[][] visited;

/**
 * Atomically marks this point as visited unless visited before
 * @return whether the point was visited for the first time, i.e. whether it could be marked
 */
boolean visit(Point p) {
    return  visited[p.getX()][p.getY()].compareAndSet(false, true);
}

public static void main(String[] args) {
    ForkJoinPool pool = new ForkJoinPool();
    ParallelMaze maze = new ParallelMaze(width, height, new Point(width-1, 0), new Point(0, height-1));
    // Start initial task
    long startTime = System.currentTimeMillis();
     // since SolverTask.compute() expects its starting point already visited, 
    // must do that explicitly for the global starting point:
    maze.visit(maze.start);
    maze.solution = pool.invoke(new SolverTask(maze.start, maze.end, maze));
    // One solution is enough: Stop all tasks that are still running
    pool.shutdownNow();
    pool.awaitTermination(Integer.MAX_VALUE, TimeUnit.DAYS);
    long endTime = System.currentTimeMillis();
    System.out.println("Computed solution of length " + maze.solution.size() + " to maze of size " + 
            width + "x" + height + " in " + ((float)(endTime - startTime))/1000 + "s.");
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-21T17:54:30.700

关于stackoverflow的相关问题：

[在 invokeAll/join 期间 ForkJoinPool 停止](https://stackoverflow.com/questions/16894929/forkjoinpool-stalls-during-invokeall-join)

[ForkJoinPool 似乎浪费了一个线程](https://stackoverflow.com/questions/9677506/forkjoinpool-seems-to-waste-a-thread)

我制作了一个可运行的精简版本（我使用的 jvm 参数：-Xms256m -Xmx1024m -Xss8m）：

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ForkJoinPool;
import java.util.concurrent.RecursiveAction;
import java.util.concurrent.RecursiveTask;
import java.util.concurrent.TimeUnit;

public class Test1 {

    private static ForkJoinPool pool = new ForkJoinPool(2);

    private static class SomeAction extends RecursiveAction {

        private int counter;         //recursive counter
        private int childrenCount=80;//amount of children to spawn
        private int idx;             // just for displaying

        private SomeAction(int counter, int idx) {
            this.counter = counter;
            this.idx = idx;
        }

        @Override
        protected void compute() {

            System.out.println(
                "counter=" + counter + "." + idx +
                " activeThreads=" + pool.getActiveThreadCount() +
                " runningThreads=" + pool.getRunningThreadCount() +
                " poolSize=" + pool.getPoolSize() +
                " queuedTasks=" + pool.getQueuedTaskCount() +
                " queuedSubmissions=" + pool.getQueuedSubmissionCount() +
                " parallelism=" + pool.getParallelism() +
                " stealCount=" + pool.getStealCount());
            if (counter <= 0) return;

            List<SomeAction> list = new ArrayList<>(childrenCount);
            for (int i=0;i<childrenCount;i++){
                SomeAction next = new SomeAction(counter-1,i);
                list.add(next);
                next.fork();
            }

            for (SomeAction action:list){
                action.join();
            }
        }
    }

    public static void main(String[] args) throws Exception{
        pool.invoke(new SomeAction(2,0));
    }
} 
```

显然，当您执行连接时，当前线程会看到所需的任务尚未完成，并为自己执行另一个任务。

它发生在`java.util.concurrent.ForkJoinWorkerThread#joinTask`.

然而，这个新任务产生了更多相同的任务，但它们在池中找不到线程，因为线程被锁定在连接中。而且由于它无法知道释放它们需要多少时间（线程可能处于无限循环或永远死锁），因此产生了新线程（补偿加入的线程，正如*Louis Wasserman*提到的):`java.util.concurrent.ForkJoinPool#signalWork`

因此，为了防止这种情况，您需要避免递归生成任务。

例如，如果在上面的代码中将初始参数设置为 1，则活动线程数将为 2，即使将 childrenCount 增加十倍。

另请注意，虽然活动线程的数量增加，但运行线程的数量小于或等于*并行度*。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-29T10:59:31.737

从源评论：

> 补偿：除非已经有足够的活动线程，否则 tryPreBlock() 方法可能会创建或重新激活备用线程以补偿阻塞的加入者，直到它们解除阻塞。

我认为正在发生的事情是您没有很快完成任何任务，并且由于在您提交新任务时没有可用的工作线程，因此会创建一个新线程。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-01T14:09:47.150

严格、完全严格和终端严格与处理有向无环图（DAG）有关。您可以搜索这些术语以全面了解它们。这就是框架旨在处理的处理类型。查看递归 API 中的代码...，该框架依赖于您的 compute() 代码来执行其他 compute() 链接，然后执行 join()。每个 Task 都执行一个 join() ，就像处理 DAG 一样。

您没有进行 DAG 处理。您正在分叉许多新任务并在每个任务上等待 (join())。阅读源代码。它非常复杂，但您可能能够弄清楚。该框架没有进行适当的任务管理。当它执行 join() 时，它将把等待的任务放在哪里？没有挂起的队列，这将需要一个监视器线程不断查看队列以查看已完成的内容。这就是框架使用“延续线程”的原因。当一个任务执行 join() 时，框架假设它正在等待一个较低的任务完成。当存在许多 join() 方法时，线程无法继续，因此需要存在帮助程序或继续线程。

如上所述，您需要一个分散-聚集类型的 fork-join 过程。在那里你可以分叉尽可能多的任务

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-12T21:14:56.127

[Holger Peine](https://stackoverflow.com/users/1208965/holger-peine)和[elusive-code](https://stackoverflow.com/users/3016088/elusive-code)发布的两个代码片段实际上并未遵循[javadoc 1.8 版本](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinTask.html)中出现的推荐做法：

> 在最典型的用法中，fork-join 对的行为类似于并行递归函数的调用（fork）和返回（join）。与其他形式的递归调用一样，返回（连接）应该在最内层优先执行。例如， *a.fork(); b.fork(); b.加入（）；a.join();* 可能比在代码*b*之前加入代码*a*更有效。

 *在这两种情况下，FJPool 都是通过默认构造函数实例化的。这导致使用*asyncMode=false*构建池，这是默认设置：

> @param asyncMode 如果为真，则为
> 从未加入的分叉任务建立本地先进先出调度模式。在工作线程仅处理事件样式异步任务的应用程序中，此模式可能比默认的基于本地堆栈的模式更合适。对于默认值，请使用 false。

这样工作队列实际上是 lifo:
head -> | t4 | t3 | t2 | t1 | ... | <- 尾巴

因此，在片段中，他们*fork()*所有任务将它们推入堆栈，然后 以相同的顺序*join()*，即从最深的任务 (t1) 到最顶层的 (t4) 有效阻塞，直到其他线程将窃取 (t1)，然后是 (t2 ） 等等。由于有 enouth 任务阻塞所有池线程（task_count >> pool.getParallelism()），因此正如[Louis Wasserman](https://stackoverflow.com/users/869736/louis-wasserman)所描述的那样，补偿开始了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-06T11:59:31.227

值得注意的是，[elusive-code](https://stackoverflow.com/users/3016088/elusive-code)贴出的代码输出取决于java的版本。在 java 8 中运行代码我看到了输出：

```
...
counter=0.73 activeThreads=45 runningThreads=5 poolSize=49 queuedTasks=105 queuedSubmissions=0 parallelism=2 stealCount=3056
counter=0.75 activeThreads=46 runningThreads=1 poolSize=51 queuedTasks=0 queuedSubmissions=0 parallelism=2 stealCount=3158
counter=0.77 activeThreads=47 runningThreads=3 poolSize=51 queuedTasks=0 queuedSubmissions=0 parallelism=2 stealCount=3157
counter=0.74 activeThreads=45 runningThreads=3 poolSize=51 queuedTasks=5 queuedSubmissions=0 parallelism=2 stealCount=3153 
```

但是在 java 11 中运行相同的代码，输出是不同的：

```
...
counter=0.75 activeThreads=1 runningThreads=1 poolSize=2 queuedTasks=4 queuedSubmissions=0 parallelism=2 stealCount=0
counter=0.76 activeThreads=1 runningThreads=1 poolSize=2 queuedTasks=3 queuedSubmissions=0 parallelism=2 stealCount=0
counter=0.77 activeThreads=1 runningThreads=1 poolSize=2 queuedTasks=2 queuedSubmissions=0 parallelism=2 stealCount=0
counter=0.78 activeThreads=1 runningThreads=1 poolSize=2 queuedTasks=1 queuedSubmissions=0 parallelism=2 stealCount=0
counter=0.79 activeThreads=1 runningThreads=1 poolSize=2 queuedTasks=0 queuedSubmissions=0 parallelism=2 stealCount=0 
```*

# objective-c - 关于 Objective-C 中没有主体的“for”循环的奇怪编译器优化/行为

> ID：10797571
> 
> 赞同：2
> 
> 时间：2012-05-29T10:44:34.743
> 
> 标签：objective-c, c, arrays, compiler-construction, for-loop

我有以下 C 数组`NSString *`：

```
static NSString *const OrderByValueNames[] = {@"None",@"Added",@"Views",@"Rating",@"ABC",@"Meta"}; 
```

现在，我想在运行时检查这个数组的长度，所以我写了以下方法：

```
NSInteger LengthOfArray(NSString *const array[])
{
    NSInteger length = 0;
    // For Loop Without a body!
    for (length = 0; array[length] != nil; length++);
    return length;
} 
```

现在，当我在配置中运行此代码时`debug`，一切都很好，并且该函数返回了正确的结果。

**但是**，一旦我切换到`release`配置并再次运行它，程序就会在 for 循环中冻结。循环执行 10 秒后，iOS 会因应用程序没有响应而终止该应用程序。诡异的。

现在，如果我将 body 添加到循环中，就像这样：

```
for (length = 0; array[length] != nil; length++)
{
    NSLog(@"%d",length);
} 
```

**然后即使在发布模式下**它也能正常工作。

给循环一个**空的 body**，就像这样：

```
for (length = 0; array[length] != nil; length++){} 
```

仍然在释放模式下冻结。

我的猜测是在发布模式下运行时有编译器优化，但究竟是什么？！

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T10:51:29.597

默认情况下，C 风格的数组不是以 nil 结尾的。如果要这样检查长度，需要自己添加终结符。

```
static NSString *const OrderByValueNames[] =
   {@"None",@"Added",@"Views",@"Rating",@"ABC",@"Meta",nil}; 
```

找到长度的更好方法就是：

```
length = sizeof(OrderByValueNames) / sizeof(OrderByValueNames[0]); 
```

（请注意，如果将数组传递给函数，则此技巧不起作用，因为它会退化为指针。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T10:52:18.707

您的`OrderByValueNames`数组不包含`nil`元素。难怪你找不到！像这样离开数组的末尾会导致未定义的行为。如果你想用 标记数组的结尾`nil`，你必须手动添加它。

顺便说一句，如果你想知道一个固定大小的 C 数组的长度，你可以这样做：

```
length = sizeof(OrderByValueNames)/sizeof(OrderByValueNames[0]); 
```

但是，这不适用于函数参数，因为它们只是指针！

# asp.net - 如何增加url的最大长度？

> ID：10797573
> 
> 赞同：6
> 
> 时间：2012-05-29T10:44:36.360
> 
> 标签：asp.net, iis-7

我可以遵循哪些最佳实践来增加 IIS7/ASP.NET 中 URL 的最大长度？

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:55:42.930

从这个网站：[http ://technet.microsoft.com/en-us/library/cc754791(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754791(v=ws.10).aspx)

> 使用命令行：appcmd set config /section:requestfiltering/requestlimits.maxurl: *unit*

这里解释了如何使用 appcmd： http: [//www.windowsnetworking.com/articles_tutorials/Configuring-IIS-7-command-line-Appcmdexe-Part1.html](http://www.windowsnetworking.com/articles_tutorials/Configuring-IIS-7-command-line-Appcmdexe-Part1.html)

> 您需要知道 AppCmd.exe 命令的位置，因为它不在默认 PATH 中。为了运行 AppCmd.exe，您需要将目录更改为 %windir%\system32\inetsrv\ 或将该目录添加到 PATH 变量中。在默认安装的 Windows 2008 服务器上，AppCmd.exe 位于 C:\Windows\System32\inetsrv。

但小心点。如果您的请求 url 变得非常大，请使用 post message 传递参数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:49:17.163

虽然 HTTP 协议的规范没有指定任何最大长度，但实际限制是 2,083 个字符，URL 的路径部分不超过 2,048 个字符。这些是 Microsoft Interet Explorer 当前实施的限制，大部分用户仍在使用这些限制。主要的网络浏览器一直对 URL 的长度设置一个合理的上限。当您希望提交包含许多字段的表单时，否则会产生很长的 URL，标准的解决方案是使用 POST 方法而不是 GET 方法：

```
<form action="myscript.php" method="POST">
...
</form> 
```

然后表单字段作为 HTTP 事务标头的一部分而不是 URL 的一部分传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T08:55:29.377

您可能会受到 web.config 中以下设置的限制：

```
<configuration>
   <system.webServer>
      <security>
         <requestFiltering>
            <requestLimits>
            </requestLimits>
         </requestFiltering>
      </security>
   </system.webServer>
</configuration> 
```

参考： [http ://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits#005](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits#005)

# ruby-on-rails-3 - Rails API 的基本身份验证

> ID：10797583
> 
> 赞同：6
> 
> 时间：2012-05-29T10:45:53.643
> 
> 标签：ruby-on-rails-3, api, authentication

我正在开发一个简单的 api，它将被 iphone 使用。Rails 中是否有一个简单的身份验证 gem（带有令牌身份验证或 api 密钥），我可以通过 http（无 https）使用它。像启用了 token_authentication 的设计之类的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T10:59:32.973

您可以通过将以下内容添加到应用程序控制器来简单地添加 http 基本身份验证支持

```
before_filter :http_basic_authenticate

def http_basic_authenticate
  authenticate_or_request_with_http_basic do |username, password|
    username == "1username" && password == "password1"
  end
end 
```

然后尝试

```
curl http://yourdomain.com
=> HTTP Basic: Access denied.

curl --user 1username:password1 http://yourdomain.com
=> result ..... 
```

# xslt - 在 xslt 中创建可重用的模板来处理一些多次出现的元素

> ID：10797588
> 
> 赞同：0
> 
> 时间：2012-05-29T10:46:18.697
> 
> 标签：xslt, xslt-1.0

我想编写一个模板来处理某些部分并重用它。

在下面的 XML 中，我们看到 Message 在每个 ,, 中重复。我想编写一个模板来处理并在需要时调用它。

```
 <Data>

           <A>
              <text>this is text</text>
              <Message>
                <local>Local  link</local>
                <STD>External link</STD>
                </Message>
            </A>
            <B>
               <info>Information</info>
               <Message>
                <local>Local uri link</local>
                <STD>External link uri</STD>

                </Message>
            </B>
            <C>
               <longtext>Long Text</longtext>
               <Message>
                <local>Local uri link</local>
                <STD>External link uri</STD>

                </Message>
                </C>
        <Data> 
```

需要的输出：

```
 <Information>     
          <AA>
                this is text
                <MSG local value="Local uri link" STD value="External link"/>
            </AA>

            <BB>
                Information
                <MSG local value  ="Local uri link"  STD value="External link"/>

            </BB>
            <CC>
                Long Text
                <MSG local value="Local uri link" STD value="External link"/>
            </CC>

    <Information> 
```

在处理每个节点中的标签时，我正在为 A、B、C 中的每个标签编写代码。

编写的示例代码

```
 <Information>

        <xsl:template match="A">
        <AA>
            <xsl:value-of select="text"/>
            <xsl:element name="MSG">
                <xsl:attribute name="local value">
                    <xsl:value-of select="Message/local"/>
                </xsl:attribute>
                <xsl:attribute name="STD value">
                    <xsl:value-of select="Message/STD"/>
                </xsl:attribute>
        </AA>
    </Information> 
```

同样，对于每个模板，我都明确地为块 MSG 编写代码。

现在我想写一个单独的模板来处理。我想从每个模板中调用这个模板。

基本上我想重用编写的代码来处理

任何人都可以帮助我如何做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:21:36.967

这是一个示例：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="Data">
  <Information>
    <xsl:apply-templates/>
  </Information>
</xsl:template>

<xsl:template match="Data/*">
  <xsl:element name="{local-name()}{local-name()}">
    <xsl:apply-templates/>
  </xsl:element>
</xsl:template>

<xsl:template match="Data/A/text | Data/B/info | Data/C/longtext">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="Message">
  <MSG local-value="{local}" STD-value="{STD}"/>
</xsl:template>

</xsl:stylesheet> 
```

当应用于输入时

```
<Data>

   <A>
      <text>this is text</text>
      <Message>
        <local>Local  link</local>
        <STD>External link</STD>
        </Message>
    </A>
    <B>
       <info>Information</info>
       <Message>
        <local>Local uri link</local>
        <STD>External link uri</STD>

        </Message>
    </B>
    <C>
       <longtext>Long Text</longtext>
       <Message>
        <local>Local uri link</local>
        <STD>External link uri</STD>

        </Message>
        </C>
</Data> 
```

撒克逊 6.5.5 输出

```
<?xml version="1.0" encoding="utf-8"?><Information>

           <AA>
              this is text
              <MSG local-value="Local  link" STD-value="External link"/>
            </AA>
            <BB>
               Information
               <MSG local-value="Local uri link" STD-value="External link uri"/>
            </BB>
            <CC>
               Long Text
               <MSG local-value="Local uri link" STD-value="External link uri"/>
                </CC>
        </Information> 
```

您发布的输入示例和想要的输出示例都不是格式正确的 XML，因此我必须对元素或属性名称进行一些更改才能处理和输出 XML。

# c++ - 使用 SURF 如何通过说这是匹配图像来给出结果？

> ID：10797594
> 
> 赞同：4
> 
> 时间：2012-05-29T10:46:43.417
> 
> 标签：c++, opencv, surf

我正在做一个项目来识别纸币的价值，我应该返回价值。我使用**SURF 算法**来检测价值。有几个货币价值模板，我将这些模板与从移动相机捕获的货币图像匹配。 .

通过使用 SURF，我可以匹配值，如果值匹配，则在 vale 周围绘制一个矩形。如果值不匹配，则不绘制矩形....

***问题是我如何返回匹配的值。在命令提示符下显示值就足够了。***请帮我。非常感谢您..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:47:48.413

调用[matchTemplate](http://opencv.itseez.com/modules/imgproc/doc/object_detection.html?highlight=matchtemplate#matchtemplate)后，您将得到一个矩阵结果

```
void matchTemplate(InputArray image, InputArray temp, OutputArray result, int method) 
```

结果是映射比较结果的矩阵。方法可以是 CV_TM_CCORR_NORMED。

您可以使用函数[minMaxLoc](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html#minmaxloc) () 找到投注匹配项。

您可以将匹配值视为您找到特定“货币价值”的概率。您还可以为匹配值设置阈值，这样如果您没有检测到任何已知的模式，您应该得到低于该阈值的匹配输出。

# asp.net-mvc - ASP.NET MVCScaffolding 很慢

> ID：10797597
> 
> 赞同：32
> 
> 时间：2012-05-29T10:46:55.920
> 
> 标签：asp.net-mvc, scaffolding, asp.net-mvc-scaffolding, t4scaffolding

我们尝试使用 ASP.NET MVC Scaffolding ( [http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package) , [http:// mvcscaffolding.codeplex.com/](http://mvcscaffolding.codeplex.com/)）。很棒的工具，但是请任何建议，为什么它这么慢？空项目中简单模型的脚手架（如本教程中所述）大约需要 15 秒，这仍然可以接受，但是在我们根据自定义元数据属性添加了一些脚手架逻辑之后，具有一些的模型的脚手架 -多对多关系需要 5 分钟或更长时间，这使得它无法使用。无论如何要提高性能？

# php - 更新表中的数据 PHP mysql 错误

> ID：10797599
> 
> 赞同：0
> 
> 时间：2012-05-29T10:46:58.380
> 
> 标签：php, mysql, html-table, undefined-index

我正在尝试更新具有 5 个字段的表中的数据。字段如下：proj_name、cust_name、地址、成本和详细信息。

这是我的更新代码（update_orde.php）：

```
 <?php
 include("connect.php");
 // get value of id that sent from address bar
 $id=$_GET['id'];
 // Retrieve data from database
 $sql="SELECT * FROM project WHERE id='$id'";
 $result=mysql_query($sql);

 $rows=mysql_fetch_array($result);
 ?>
 <table width="400" border="0" cellspacing="1" cellpadding="0">
 <tr>
 <form name="form1" method="post" action="update_orde_suc.php">
 <td>
 <table width="100%" border="0" cellspacing="1" cellpadding="0">
 <tr>

 <td colspan="5"><strong>Update Data</strong> </td>
 </tr>
 <tr>
 <td align="center"><strong>Project Name</strong></td>
 <td align="center"><strong>Customer</strong></td>
 <td align="center"><strong>Address</strong></td>
 <td align="center"><strong>Cost</strong></td>
 <td align="center"><strong>Details</strong></td>
 </tr>
 <tr>
 <td><input name="pn" type="text" id="pn" value="<? echo $rows['proj_name']; ?>"></td>
 <td align="center"><input name="cn" type="text" id="cn" value="<? echo $rows['cust_name']; ?>" size="15"></td>
 <td align="center"><input name="add" type="text" id="add" value="<? echo $rows['address']; ?>" size="15"></td>
 <td><input name="cost" type="text" id="cost" value="<? echo $rows['cost']; ?>" size="15"></td>
 <td><input name="details" type="text" id="details" value="<? echo $rows['details']; ?>" size="15"></td>
 </tr>
 <tr>
 <td align="center" colspan="5"><input name="id" type="hidden" id="id" value="<? echo $rows['id']; ?>">  <input type="submit" name="Submit" value="Submit"></td>
 </tr>
 </table>
 </td>
 </form>
 </tr>
 </table>

 <?

 // close connection
 mysql_close();

 ?> 
```

这是成功插入数据库（update_orde_suc.php）：

```
<?php
include("connect.php");
$id=$_POST['id'];
$pn = $_POST['proj_name'];
$cn = $_POST['cust_name'];
$add = $_POST['address'];
$cost = $_POST['cost'];
$det = $_POST['details'];

// update data in mysql database
$sql="UPDATE project SET proj_name='$pn', cust_name='$cn',address='$add', cost='$cost', details='$det' WHERE id='$id'";
$result=mysql_query($sql);

// if successfully updated.
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='orders_edit.php'>View result</a>";
}

else {
echo "ERROR";
}

?> 
```

问题是，当我尝试更改数据时，会出现一个错误，提示 update_orde_suc.php 的 3 个第一个索引未定义（成本和细节都可以）。

最奇怪的是，我对另一个表更新使用了完全相同的代码，它工作得很好，我现在唯一要做的就是更改变量的名称以对应于新表的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:51:07.833

您严重混淆了变量。例如，您将`proj_name`来自输入的内容保存为`$pn`和稍后将其插入您使用的数据库中时`$proj_name`。您必须在整个代码中坚持使用变量名称才能工作。

# asp.net-mvc - ASP.NET MVC - 如何实现分页？

> ID：10797600
> 
> 赞同：2
> 
> 时间：2012-05-29T10:46:58.510
> 
> 标签：asp.net-mvc, linq, entity-framework, razor, pagination

我对 MVC 比较陌生，希望输出一些数据并通过它进行分页。我不想要一些花哨的 JQuery 分页或类似的东西，它必须在服务器端运行。我以前使用 Gridviews 等做过这种事情，但不确定如何使用 ASP.NET MVC 来实现这一点。有谁知道如何做到这一点？

我正在使用以下内容：

Razor、C# 实体框架、LINQ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:50:21.223

这是一个著名的教程[http://nerddinnerbook.s3.amazonaws.com/Part8.htm](http://nerddinnerbook.s3.amazonaws.com/Part8.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:49:28.293

我想你会发现这应该可以帮助你[http://msdn.microsoft.com/en-us/magazine/gg650669.aspx](http://msdn.microsoft.com/en-us/magazine/gg650669.aspx)

# html - 如何在 JSP 中同时显示预生成的 html 和图像？

> ID：10797602
> 
> 赞同：1
> 
> 时间：2012-05-29T10:47:25.543
> 
> 标签：html, image, jsp, dynamic, text

好的，这是我遇到的问题。我有一个 servlet，它可以动态创建一个我不想保存在 HDD 上的图像（不是基于参数）。

我还有一个 HTML 模板 (JSP)，我想在其中显示该图片。

我创建我的图像如下：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    PieDataset dataset = createDataset();
    JFreeChart chart = createChart(dataset, "OS Usage");

    resp.setContentType("image/png");
    ChartUtilities.writeChartAsPNG(resp.getOutputStream(), chart, 500, 400);

    req.getRequestDispatcher("report.jsp").forward(req, resp);
} 
```

我的 JSP 看起来像这样：

```
<body>
    <h1>OS usage</h1>
    <p>Here are the results of OS usage in survey that we completed.<br>
    <p><img alt="OS usage" src="/reportImage">
</body> 
```

当执行该代码时，我得到了我所期望的，从我编写代码的方式，只有一个图像，没有任何 html。

我的问题是如何做到这一点，以便 HTML 也呈现出来。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:03:43.350

您应该有两个 servlet：

*   一种是生成 HTML 页面（通过转发到 JSP）。此生成的页面包含`<img src="/reportImage" .../>`. 当浏览器看到这个标签时，它会向 URL 发送第二个请求`/reportImage`。
*   一是生成图像，映射到`/reportImage`URL。这个 servlet 应该只将图像的字节发送到响应输出流。它不能转发到 JSP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:21:39.880

在您的servlet中声明count = 0 ..如果你得到图像然后增加计数值..现在值是1 ..在你的jsp代码中放置一个条件如果count == 1显示img否则隐藏

标签

# android - 如何在android中停止“搜索GPS”

> ID：10797610
> 
> 赞同：0
> 
> 时间：2012-05-29T10:47:44.547
> 
> 标签：android, gps

我试图在我的应用程序中停止“搜索 GPS”。当我使用这行代码时：

```
this.locationManager.removeUpdates(this); 
```

我仍然可以在通知栏中看到 GPS 的图标，而且它根本没有停止。我还可以做些什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:54:11.873

而不是传递这个，你应该像这样将位置监听器实例传递给 removeUpdate 方法。

```
locationManager.removeUpdates(gpsLocationListener); 
```

在哪里

```
GPSLocationListener gpsLocationListener = new GPSLocationListener();

class GPSOnChangeLocationListener implements LocationListener {
           public void onLocationChanged(Location location) {}
           public void onProviderDisabled(String arg0) {}
           public void onProviderEnabled(String arg0) {}
           public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:48:00.477

我想到了。这就是我所做的并且有效：

```
private void registerLocationUpdates() {
    Intent intent = new Intent(ParkOGuardActivity.class.getName()
            + ".LOCATION_READY");
    pendingIntent = PendingIntent.getBroadcast(
            getApplicationContext(), 0, intent, 0);
    // minimum every 30 minutes, 300 kilometers 
    this.locationManager.requestLocationUpdates(this.provider, 30000,
            300000, pendingIntent);
}

private void cancelLocationUpdates() {
    this.locationManager.removeUpdates(pendingIntent);
} 
```

感谢所有试图帮助我的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:54:38.543

尝试`locationManager.removeUpdates(gpsl);`

# android - 如何在robotium中测试相对布局的点击事件

> ID：10797612
> 
> 赞同：1
> 
> 时间：2012-05-29T10:47:47.793
> 
> 标签：android, click, android-relativelayout, robotium

我正在使用**robotium**创建我的项目的测试项目。我的项目中有一个**相对布局**。我已经为这个相对布局提供了一个**点击**事件。我需要测试这个。但我不知道如何测试一个点击事件相对 layout.layout 内容只是一个图像。所以我无法调用

```
 solo.clickOnButton(string); 
```

任何人都可以帮我做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:47:25.053

我找到了解决方案。它真的很简单。我只是给

```
solo.clickOnView(myrelativelayout); 
```

它工作正常

# c++ - WinAPI SendInput 代码问题

> ID：10797615
> 
> 赞同：3
> 
> 时间：2012-05-29T10:47:56.390
> 
> 标签：c++, winapi

我正在编写一个程序，到目前为止进展顺利，但是我对以下代码有疑问：

```
void Send(string content) {
    unsigned int size = content.size();
    INPUT *inputs = new INPUT[size];

    for (unsigned int i = 0; i < size; i++) {
        inputs[i].type = 1;
        inputs[i].ki.wVk          = 0;//LOWORD(VkKeyScan(content.at(i)));
        inputs[i].ki.wScan        = content.at(i);
        inputs[i].ki.dwFlags      = KEYEVENTF_UNICODE | KEYEVENTF_SCANCODE;
        inputs[i].ki.time         = 0;
        inputs[i].ki.dwExtraInfo  = ::GetMessageExtraInfo();
    }

    SendInput(size, inputs, sizeof(*inputs)*size);

    for (unsigned int i = 0; i < size; i++) {
        inputs[i].ki.dwFlags &= KEYEVENTF_KEYUP;
    }

    SendInput(size, inputs, sizeof(*inputs)*size);
} 
```

我想要实现的是能够发送这样的输入：

```
Send(string("Hello World!")); 
```

但是，它会做它不应该做的所有事情，例如即使类型设置为键盘也移动光标。最多输出一个字符。正如你在第 2 行看到的，我有一个 INPUT 数组。但是，当我在调试器中查看它时，它仅显示为单个 INPUT 结构，而不是结构数组。

我正在使用带有 gdb 调试器 + Code::Blocks IDE 的 g++。

多谢你们。

**编辑**

新代码：

```
void Send(string content) {
    unsigned int size = content.size();
    INPUT *inputs = new INPUT[size];
    INPUT curr[1];

    ZeroMemory(inputs, sizeof(*inputs)*size);

    for (unsigned int i = 0; i < size; i++) {
        inputs[i].type = 1;
        inputs[i].ki.wVk          = 0;//LOWORD(VkKeyScan(content.at(i)));
        inputs[i].ki.wScan        = content.at(i);
        inputs[i].ki.dwFlags      = KEYEVENTF_UNICODE | KEYEVENTF_SCANCODE;
        inputs[i].ki.time         = 0;
        inputs[i].ki.dwExtraInfo  = ::GetMessageExtraInfo();
    }

    for (unsigned int i = 0; i < size; i++) {
        curr[0] = inputs[i];            // Current input
        int a = ::SendInput(1, (INPUT*)&curr, sizeof(curr));

        inputs[i].ki.dwFlags &= KEYEVENTF_KEYUP;

        curr[0] = inputs[i];
        int b = ::SendInput(1, (INPUT*)&curr, sizeof(curr));

        TCHAR *buff = new TCHAR[3];

        wsprintf(buff, "%i %i", a, b);

        MessageBox(NULL, buff, "SendInput return vals", 0);
    }
} 
```

这仍然没有发送任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:15:38.393

```
sizeof(*inputs)*size 
```

这是错误的，`cbSize`参数是*一个* `INPUT`结构的大小，而不是数组的总大小。

如果您没有丢弃`SendInput`返回值，您会发现这一点。检查返回值是出现问题时可能进行的最基本的故障排除。

你也有内存泄漏。你应该`ZeroMemory`在填充之前在数组上使用它。

最后，您在释放任何一个键之前按下所有键。如果要键入文本，则应按顺序按下并释放每个键，以便一次按下的键不超过一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:57:17.680

我想这是因为您只发送 KEYDOWN 消息。您可能想尝试先发送 KEYDOWN，然后再发送 KEYEVENTF_KEYUP 以获得相同的字符。

[编辑新代码]

一些提示：

1.  删除 KEYEVENTF_SCANCODE
2.  string 用于 char 字符串，对于 UNICODE 使用 wstring
3.  在测试您的功能之前，请确保某些带有编辑框的应用程序位于前台，例如记事本

# c# - 使用“系统”用户运行 WinForm 时 C# SaveFileDialog 出现警告

> ID：10797622
> 
> 赞同：-1
> 
> 时间：2012-05-29T10:48:15.110
> 
> 标签：c#, .net, windows, winforms

当使用 winfrom 单击按钮时。并调用 save filDialog 将出现“C:\Windows\system32\config\systemprofile\Desktop”。

[http://i.stack.imgur.com/wH7J9.jpg](http://i.stack.imgur.com/wH7J9.jpg)

挑战是该软件必须在“系统”用户中运行。但我使用 SaveFileDialog 来保存文件。会出现类似“C:\Windows\system32\config\systemprofile\Desktop”的消息。

我想问题是当我使用“系统”用户时，默认用户配置文件不存在，并且找不到“Destop”floder 路径。因为它不会有“用户配置文件”@“系统”用户。

此错误出现在我单击按钮时，此应用程序尝试初始化 SaveFileDialog 并尝试在左侧生成图标快捷方式，从而导致错误。下拉框也有保存问题。

[http://i.stack.imgur.com/5Hy3S.jpg](http://i.stack.imgur.com/5Hy3S.jpg)

任何人都知道如何删除左侧的图标短切和下拉框图标也有同样的问题。

```
 using (var dialog = new SaveFileDialog())
        {

            dialog.DefaultExt = "txt";
            dialog.Filter = "Text files (*.txt)|*.txt|All files (*.*)|*.*";
            dialog.Title = "test";                
            dialog.AutoUpgradeEnabled = false;
            dialog.InitialDirectory = Application.StartupPath;
            try
            {                   
                DialogResult result = dialog.ShowDialog(this);
                if (result == DialogResult.OK)                                       
                {
                    //do something
                }
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine(ex.StackTrace);

            }
        } 
```

我只是使用非常非常简单的代码。

附言。我正在使用 C#.net 4.0 ， vs2010 在 win2008r2 和 win 7 上运行

谢谢大家！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:49:54.547

尝试设置 SaveFileDialog 的 InitialDirectory 属性

```
 SaveFileDialog sfd = new SaveFileDialog();
        sfd.InitialDirectory = "c:\\yourDirectory"; 
```

您也可以使用此方法检查我的文档目录是否存在于磁盘上。

```
Directory.Exists(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)); 
```

# facebook - FB.api links.get 不能与短名称帐户一起使用

> ID：10797625
> 
> 赞同：1
> 
> 时间：2012-05-29T10:48:31.173
> 
> 标签：facebook, hyperlink

我使用这段代码：

```
FB.api({ 
    method: 'links.get',
    uid: user_uid,
    limit: 100
},function(response){
    var response = response[0];
    if(response){
        console.log(response);
    }
}); 
```

如果提到的人使用短名称（而不是 ?id=100000000），我无法从该函数的回调中得到响应。

我正在使用此代码获取用户 ID。

但它仅在用户没有短名称时才有效：

`FB.Event.subscribe('auth.login',function(response){ user_id = response.authResponse.userID; });`

但它仅在用户没有短名称时才有效。

我如何收听短名字的人的事件？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:29:38.407

名字与它无关。`response.authResponse.userID`将始终返回`user_id`not `user_name`。你一定做错了什么。

# java - Java BufferedOutputStream：要写入多少字节

> ID：10797628
> 
> 赞同：2
> 
> 时间：2012-05-29T10:48:34.547
> 
> 标签：java, download, bufferedinputstream, bufferedoutputstream

这更像是良心问题而不是技术问题：p 我正在编写一些 java 代码来从服务器下载文件...为此，我使用的是 BufferedOutputStream 方法 write() 和 BufferedInputStream 方法 read() .

所以我的问题是，如果我使用缓冲区来保存字节，那么要读取的字节数应该是多少？当然，我可以使用 int byte = read() 然后 write(byte) 逐字节读取，或者我可以使用缓冲区。如果我采用第二种方法，在定义每次读取\写入的字节数时，是否有哪些方面我必须注意？这个数字对我的程序有什么影响？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:55:19.653

除非你有一个非常快的网络连接，否则缓冲区的大小几乎没有什么区别。我会说 4k 缓冲区会很好，尽管使用更大一点的缓冲区没有害处。

`read()`假设`read(byte[])`您使用的是`BufferedInputStream`.

除非您拥有非常快/低延迟的网络连接，否则瓶颈将是网络和计算机网络接口可以维持的数据速率。对于典型的 Internet 连接，应用程序移动数据的速度可以比网络快两个或更多数量级。因此，除非您做一些愚蠢的事情（例如在无缓冲流上读取 1 个字节），否则您的 Java 代码不会成为瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:21:12.943

BufferedInputStream 和 BufferedOutputStream 通常依赖 System.arraycopy 来实现。System.arraycopy 有一个本地实现，它可能依赖于 memmove 或 bcopy。复制的内存量将取决于缓冲区中的可用空间，但无论如何，到本机代码的实现非常有效，无论您正在读取/写入多少字节，都不太可能影响应用程序的性能。

但是，对于 BufferedInputStream，如果您设置了一个上限标记，则可能需要创建一个新的内部缓冲区。如果您确实使用了标记，则读取的字节数超过旧缓冲区中可用的字节数可能会导致暂时的性能下降，尽管摊销后的性能仍然是线性的。

正如 Stephen C 所提到的，由于网络，您更有可能看到性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:54:04.167

您的网络连接中的 MTU（最大流量单位）是多少？例如，如果您使用 UDP，则可以检查此值并使用较小的字节数组。如果这是没有办法的，你需要检查内存是如何吃掉你的程序的。我认为`1024 - 4096`保存这些数据并继续接收将是一个很好的变体

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-09T00:05:19.557

如果您泵送数据，您通常不需要使用任何缓冲流。只需确保您使用传递给 read 方法的适当大小（8-64k）的临时 byte[] 缓冲区（或使用执行此操作的泵方法）。对于大多数用途而言，默认缓冲区大小太小（如果您使用更大的临时数组，它将被忽略）

# javascript - 模拟 background-size:cover on 或者

> ID：10797632
> 
> 赞同：185
> 
> 时间：2012-05-29T10:48:57.103
> 
> 标签：javascript, jquery, css

如何模拟`background-size:cover`html 元素（如`<video>`or ）上的功能`<img>`？

我希望它像

```
background-size: cover;
background-position: center center; 
```

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2015-05-02T02:34:05.060

这是我一段时间以来的头发，但我遇到了一个很好的解决方案，它不使用任何脚本，并且可以使用 5 行 CSS 实现完美的视频封面模拟（如果算上选择器和括号，则为 9 ）。**这有 0 个不能完美工作的边缘情况，缺少 CSS3-compatibility**。

**[你可以在这里](https://web.archive.org/web/20150602215021/http://www.lifesworkfilms.com/)**看到一个例子（存档）

[Timothy 解决方案](https://stackoverflow.com/a/15515336/2578509)的问题在于它不能正确处理缩放。如果周围元素小于视频文件，则不会按比例缩小。即使你给视频标签一个很小的初始大小，比如 16 像素 x 9 像素，`auto`最终也会强制它最小化其原始文件大小。使用此页面上当前投票率最高的解决方案，我不可能将视频文件按比例缩小，从而产生剧烈的缩放效果。

但是，如果您的视频的宽高比已知，例如 16:9，您可以执行以下操作：

```
.parent-element-to-video {
    overflow: hidden;
}
video {
    height: 100%;
    width: 177.77777778vh; /* 100 * 16 / 9 */
    min-width: 100%;
    min-height: 56.25vw; /* 100 * 9 / 16 */
} 
```

如果视频的父元素设置为覆盖整个页面（例如`position: fixed; width: 100%; height: 100vh;`），那么视频也会。

如果您也希望视频居中，您可以使用 surefire 居中方法：

```
/* merge with above css */
.parent-element-to-video {
    position: relative; /* or absolute or fixed */
}
video {
    position: absolute;
    left: 50%; /* % of surrounding element */
    top: 50%;
    transform: translate(-50%, -50%); /* % of current element */
} 
```

当然，`vw`，`vh`， 和`transform`是 CSS3，所以如果你需要[与更老的浏览器兼容](http://caniuse.com/#search=viewport%20units)，你需要使用脚本。

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2014-08-01T11:00:26.163

对于某些浏览器，您可以使用

```
object-fit: cover; 
```

[http://caniuse.com/object-fit](http://caniuse.com/object-fit)

* * *

## 回答 #3

> 赞同：137
> 
> 时间：2013-03-20T04:28:22.237

## [jsFiddle](https://jsfiddle.net/mirohristov/cxb5oe0y/)

使用背景封面对图像来说很好，宽度 100% 也是如此。这些都不是最佳的`<video>`，而且这些答案过于复杂。您不需要 jQuery 或 JavaScript 来完成全宽视频背景。

请记住，我的代码不会像封面那样用视频完全覆盖背景，而是会使视频尽可能大，以保持纵横比并仍然覆盖整个背景。任何多余的视频都会从页面边缘流出，这取决于您将视频锚定在哪里。

答案很简单。

只需使用此 HTML5 视频代码，或类似以下内容：（在整页中测试）

```
html, body {
  width: 100%; 
  height:100%; 
  overflow:hidden;
}

#vid{
  position: absolute;
  top: 50%; 
  left: 50%;
  -webkit-transform: translateX(-50%) translateY(-50%);
  transform: translateX(-50%) translateY(-50%);
  min-width: 100%; 
  min-height: 100%; 
  width: auto; 
  height: auto;
  z-index: -1000; 
  overflow: hidden;
}
```

```
<video id="vid" video autobuffer autoplay>
  <source id="mp4" src="http://grochtdreis.de/fuer-jsfiddle/video/sintel_trailer-480.mp4" type="video/mp4">
</video>
```

min-height 和 min-width 将允许视频保持视频的纵横比，这通常是任何普通浏览器在正常分辨率下的纵横比。任何多余的视频都会从页面一侧流出。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2012-07-19T11:14:00.820

我是这样做的。一个工作示例在[这个 jsFiddle](http://jsfiddle.net/GCtMm/)中。

```
var min_w = 300; // minimum video width allowed
var vid_w_orig;  // original video dimensions
var vid_h_orig;

jQuery(function() { // runs after DOM has loaded

  vid_w_orig = parseInt(jQuery('video').attr('width'));
  vid_h_orig = parseInt(jQuery('video').attr('height'));
  $('#debug').append("<p>DOM loaded</p>");

  jQuery(window).resize(function () { resizeToCover(); });
  jQuery(window).trigger('resize');
});

function resizeToCover() {
  // set the video viewport to the window size
  jQuery('#video-viewport').width(jQuery(window).width());
  jQuery('#video-viewport').height(jQuery(window).height());

  // use largest scale factor of horizontal/vertical
  var scale_h = jQuery(window).width() / vid_w_orig;
  var scale_v = jQuery(window).height() / vid_h_orig;
  var scale = scale_h > scale_v ? scale_h : scale_v;

  // don't allow scaled width < minimum video width
  if (scale * vid_w_orig < min_w) {scale = min_w / vid_w_orig;};

  // now scale the video
  jQuery('video').width(scale * vid_w_orig);
  jQuery('video').height(scale * vid_h_orig);
  // and center it by scrolling the video viewport
  jQuery('#video-viewport').scrollLeft((jQuery('video').width() - jQuery(window).width()) / 2);
  jQuery('#video-viewport').scrollTop((jQuery('video').height() - jQuery(window).height()) / 2);

  // debug output
  jQuery('#debug').html("<p>win_w: " + jQuery(window).width() + "</p>");
  jQuery('#debug').append("<p>win_h: " + jQuery(window).height() + "</p>");
  jQuery('#debug').append("<p>viewport_w: " + jQuery('#video-viewport').width() + "</p>");
  jQuery('#debug').append("<p>viewport_h: " + jQuery('#video-viewport').height() + "</p>");
  jQuery('#debug').append("<p>video_w: " + jQuery('video').width() + "</p>");
  jQuery('#debug').append("<p>video_h: " + jQuery('video').height() + "</p>");
  jQuery('#debug').append("<p>vid_w_orig: " + vid_w_orig + "</p>");
  jQuery('#debug').append("<p>vid_h_orig: " + vid_h_orig + "</p>");
  jQuery('#debug').append("<p>scale: " + scale + "</p>");
};
```

```
#video-viewport {
  position: absolute;
  top: 0;
  overflow: hidden;
  z-index: -1; /* for accessing the video by click */
}

#debug {
  position: absolute;
  top: 0;
  z-index: 100;
  color: #fff;
  font-size: 12pt;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="video-viewport">
  <video autoplay controls preload width="640" height="360">
    <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.mp4"type="video/mp4" />
    <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.webm"type="video/webm" />
    <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.ogv"type="video/webm" />
  </video>
</div>

<div id="debug"></div>
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2016-11-19T10:59:38.407

根据[Daniel de Wit 的回答](https://stackoverflow.com/a/25078803/1248177)和评论，我进行了更多搜索。感谢他的解决方案。

解决方案是使用`object-fit: cover;`具有强大[支持](http://caniuse.com/#feat=object-fit)的（每个现代浏览器都支持它）。如果你真的想支持 IE，你可以使用像[object-fit-images](https://github.com/bfred-it/object-fit-images/)或[object-fit](https://github.com/anselmh/object-fit)这样的 polyfill 。

演示：

```
img {
  float: left;
  width: 100px;
  height: 80px;
  border: 1px solid black;
  margin-right: 1em;
}
.fill {
  object-fit: fill;
}
.contain {
  object-fit: contain;
}
.cover {
  object-fit: cover;
}
.none {
  object-fit: none;
}
.scale-down {
  object-fit: scale-down;
}
```

```
<img class="fill" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
<img class="contain" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
<img class="cover" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
<img class="none" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
<img class="scale-down" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
```

和父母一起：

```
div {
  float: left;
  width: 100px;
  height: 80px;
  border: 1px solid black;
  margin-right: 1em;
}
img {
  width: 100%;
  height: 100%;
}
.fill {
  object-fit: fill;
}
.contain {
  object-fit: contain;
}
.cover {
  object-fit: cover;
}
.none {
  object-fit: none;
}
.scale-down {
  object-fit: scale-down;
}
```

```
<div>
<img class="fill" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
</div><div>
<img class="contain" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
</div><div>
<img class="cover" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
</div><div>
<img class="none" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
</div><div>
<img class="scale-down" src="http://www.peppercarrot.com/data/wiki/medias/img/chara_carrot.jpg"/>
</div>
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-08-26T08:53:45.177

其他答案很好，但它们涉及 javascript，或者它们不会水平和垂直居中视频。

您可以使用这个完整的 CSS 解决方案来制作模拟 background-size: cover 属性的视频：

```
 video {
    position: fixed;           // Make it full screen (fixed)
    right: 0;
    bottom: 0;
    z-index: -1;               // Put on background

    min-width: 100%;           // Expand video
    min-height: 100%;
    width: auto;               // Keep aspect ratio
    height: auto;

    top: 50%;                  // Vertical center offset
    left: 50%;                 // Horizontal center offset

    -webkit-transform: translate(-50%,-50%);
    -moz-transform: translate(-50%,-50%);
    -ms-transform: translate(-50%,-50%);
    transform: translate(-50%,-50%);         // Cover effect: compensate the offset

    background: url(bkg.jpg) no-repeat;      // Background placeholder, not always needed
    background-size: cover;
  } 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2015-11-12T16:47:27.347

[M-Pixel 的解决方案](https://stackoverflow.com/a/29997746/3735325)很棒，因为它解决了[Timothy 答案](https://stackoverflow.com/a/15515336/2578509)的缩放问题（视频会放大但不会缩小，所以如果你的视频真的很大，你很可能只会看到其中的一小部分放大）。但是，该解决方案基于与视频容器大小相关的错误假设，即它必须是视口宽度和高度的 100%。我发现了一些对我不起作用的情况，所以我决定自己解决这个问题，我相信我想出了**最终的解决方案**。

**HTML**

```
<div class="parent-container">
    <div class="video-container">
        <video width="1920" height="1080" preload="auto" autoplay loop>
            <source src="video.mp4" type="video/mp4">
        </video>
    </div>
</div> 
```

**CSS**

```
.parent-container {
  /* any width or height */
  position: relative;
  overflow: hidden;
}
.video-container {
  width: 100%;
  min-height: 100%;
  position: absolute;
  left: 0px;
  /* center vertically */
  top: 50%;
  -moz-transform: translate(0%, -50%);
  -ms-transform: translate(0%, -50%);
  -webkit-transform: translate(0%, -50%);
  transform: translate(0%, -50%);
}
.video-container::before {
  content: "";
  display: block;
  height: 0px;
  padding-bottom: 56.25%; /* 100% * 9 / 16 */
}
.video-container video {
  width: auto;
  height: 100%;
  position: absolute;
  top: 0px;
  /* center horizontally */
  left: 50%;
  -moz-transform: translate(-50%, 0%);
  -ms-transform: translate(-50%, 0%);
  -webkit-transform: translate(-50%, 0%);
  transform: translate(-50%, 0%);
} 
```

它还基于视频的比例，因此如果您的视频的比例不是 16 / 9，您将需要更改 padding-bottom %。除此之外，它开箱即用。在 IE9+、Safari 9.0.1、Chrome 46 和 Firefox 41 中测试。

## 编辑（2016 年 3 月 17 日）

自从我发布这个答案以来，我编写了一个小的 CSS 模块来模拟元素`background-size: cover`：http: [//codepen.io/benface/pen/NNdBMj](http://codepen.io/benface/pen/NNdBMj)`background-size: contain``<video>`

它支持视频的不同对齐方式（类似于`background-position`）。另请注意，`contain`实施并不完美。与 不同`background-size: contain`的是，如果容器的宽度和高度更大，它不会将视频缩放到超过其实际大小，但我认为它在某些情况下仍然有用。我还添加了特殊`fill-width`和`fill-height`类，您可以将它们一起使用`contain`以获得特殊的组合...尝试一下，`contain`并`cover`随时改进它！

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-06-04T18:51:53.207

`object-fit: cover`是这个 IE，Safari polyfill 的最佳答案。

[https://github.com/constancecchen/object-fit-polyfill](https://github.com/constancecchen/object-fit-polyfill)

它是支持`img`,`video`和`picture`元素。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-08-11T07:29:15.723

CSS 和 little js 可以使视频覆盖背景并水平居中。

CSS：

```
video#bgvid {
    position: absolute;
    bottom: 0px; 
    left: 50%; 
    min-width: 100%; 
    min-height: 100%; 
    width: auto; 
    height: auto; 
    z-index: -1; 
    overflow: hidden;
} 
```

JS：（将此与窗口调整大小绑定并单独调用一次）

```
$('#bgvid').css({
    marginLeft : '-' + ($('#bgvid').width()/2) + 'px'
}) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-05-29T13:22:17.683

在我们的长评论部分之后，我认为这就是您要寻找的，它是基于 jQuery 的：

**HTML：**

```
<img width="100%" id="img" src="http://uploads8.wikipaintings.org/images/william-adolphe-bouguereau/self-portrait-presented-to-m-sage-1886.jpg"> 
```

**JS：**

```
<script type="text/javascript">
window.onload = function(){
       var img = document.getElementById('img')
       if(img.clientHeight<$(window).height()){
            img.style.height=$(window).height()+"px";
       }
       if(img.clientWidth<$(window).width()){
            img.style.width=$(window).width()+"px";
       } 
}
​&lt;/script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：**

```
body{
    overflow: hidden;
} 
```

上面的代码使用浏览器的宽度和高度，如果你在 div 中执行此操作，则必须将其更改为如下内容：

**对于分区：**

**HTML：**

```
<div style="width:100px; max-height: 100px;" id="div">
     <img width="100%" id="img" src="http://uploads8.wikipaintings.org/images/william-adolphe-bouguereau/self-portrait-presented-to-m-sage-1886.jpg">
</div> 
```

**JS：**

```
<script type="text/javascript">
window.onload = function(){
       var img = document.getElementById('img')
       if(img.clientHeight<$('#div').height()){
            img.style.height=$('#div').height()+"px";
       }
       if(img.clientWidth<$('#div').width()){
            img.style.width=$('#div').width()+"px";
       } 
}
​&lt;/script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：**

```
div{
   overflow: hidden;
} 
```

我还应该声明我只测试过这是谷歌浏览器......这是一个 jsfiddle：http: [//jsfiddle.net/ADCKk/](http://jsfiddle.net/ADCKk/)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-05-03T17:48:30.020

当您的浏览器宽度小于视频宽度时，最佳答案不会缩小视频。尝试使用这个 CSS（#bgvid 是您的视频 ID）：

```
#bgvid {
     position: fixed;
     top: 50%;
     left: 50%;
     min-width: 100%;
     min-height: 100%;
     width: auto;
     height: auto;
     transform: translateX(-50%) translateY(-50%);
     -webkit-transform: translateX(-50%) translateY(-50%);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-19T04:47:40.677

我也想发布这个解决方案，因为我遇到了这个问题，但其他解决方案不适用于我的情况......

我认为要正确模拟`background-size:cover;`元素上的 css 属性而不是元素 background-image 属性，您必须将图像的纵横比与当前的 Windows 纵横比进行比较，所以无论大小如何（如果图像是高而不是宽）窗口是元素正在填充窗口（并且也将其居中，尽管我不知道这是否是一个要求）....

为了简单起见，使用图像，我相信视频元素也可以正常工作。

首先获取元素的纵横比（一旦加载），然后附加窗口调整大小处理程序，触发一次以进行初始大小调整：

```
var img = document.getElementById( "background-picture" ),
    imgAspectRatio;

img.onload = function() {
    // get images aspect ratio
    imgAspectRatio = this.height / this.width;
    // attach resize event and fire it once
    window.onresize = resizeBackground;
    window.onresize();
} 
```

然后在您的调整大小处理程序中，您应该首先通过将窗口的当前纵横比与图像的原始纵横比进行比较来确定是填充宽度还是填充高度。

```
function resizeBackground( evt ) {

// get window size and aspect ratio
var windowWidth = window.innerWidth,
    windowHeight = window.innerHeight;
    windowAspectRatio = windowHeight / windowWidth;

//compare window ratio to image ratio so you know which way the image should fill
if ( windowAspectRatio < imgAspectRatio ) {
    // we are fill width
    img.style.width = windowWidth + "px";
    // and applying the correct aspect to the height now
    img.style.height = (windowWidth * imgAspectRatio) + "px";
    // this can be margin if your element is not positioned relatively, absolutely or fixed
    // make sure image is always centered
    img.style.left = "0px";
    img.style.top = (windowHeight - (windowWidth * imgAspectRatio)) / 2 + "px";
} else { // same thing as above but filling height instead
    img.style.height = windowHeight + "px";
    img.style.width = (windowHeight / imgAspectRatio) + "px";
    img.style.left = (windowWidth - (windowHeight / imgAspectRatio)) / 2 + "px";
    img.style.top = "0px";
} 
```

}

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-06-29T01:55:25.813

这种方法只使用 css 和 html。您实际上可以轻松地在视频下方堆叠一个 div。调整大小时，它是封面但不居中。

**HTML：**

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css"> 
</script>
</head>
<body>
<div id = "contain">
<div id="vid">
    <video autoplay>
        <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.mp4" type="video/mp4" />
    </video>
</div>
</div>
</body>
</html> 
```

**CCS：**

```
/*
filename:style.css
*/
body {
    margin:0;
}

#vid video{
position: absolute; 
right: 0; 
top: 0;
min-width: 100%; 
min-height: 100%;
width: auto; 
height: auto; 
}

#contain {
width:100%;
height:100%;
zoom:1%;/*Without this the video will be stretched and skewed*/ 
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-11T09:14:36.987

[@隐藏的霍布斯](https://stackoverflow.com/users/3400962/hidden-hobbes)

> 这个问题在 6 天后结束，有来自 Hidden Hobbes 的价值 +100 声望的开放式悬赏。创造性地使用视口单元来获得灵活的纯 CSS 解决方案。

您在这个问题上为仅 CSS 的解决方案打开了赏金，所以我会试一试。我对此类问题的解决方案是使用固定比例来决定视频的高度和宽度。我通常使用 Bootstrap，但我从那里提取了必要的 CSS 以使其在没有的情况下工作。这是我之前使用的代码，其中包括以正确比例居中嵌入视频。它也应该适用于`<video>`和`<img>`元素。这是最重要的一个，但我也给了你另外两个，因为我已经把它们放在周围了。祝你好运！:)

[jsfiddle全屏示例](https://jsfiddle.net/turbopipp/ak2q71dd/embedded/result/)

```
.embeddedContent.centeredContent {
    margin: 0px auto;
}
.embeddedContent.rightAlignedContent {
    margin: auto 0px auto auto;
}
.embeddedContent > .embeddedInnerWrapper {
    position:relative;
    display: block;
    padding: 0;
    padding-top: 42.8571%; /* 21:9 ratio */
}
.embeddedContent > .embeddedInnerWrapper > iframe {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    height: 100%;
    width: 100%;
    border: 0;
}
.embeddedContent {
    max-width: 300px;
}
.box1text {
    background-color: red;
}
/* snippet from Bootstrap */
.container {
    margin-right: auto;
    margin-left: auto;
}
.col-md-12 {
    width: 100%;
}
```

```
<div class="container">
    <div class="row">
        <div class="col-md-12">
            Testing ratio AND left/right/center align:<br />
            <div class="box1text">
                <div class="embeddedContent centeredContent">
                    <div class="embeddedInnerWrapper">
                        <iframe allowfullscreen="true" allowscriptaccess="always" frameborder="0" height="349" scrolling="no" src="//www.youtube.com/embed/u6XAPnuFjJc?wmode=transparent&amp;jqoemcache=eE9xf" width="425"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            Testing ratio AND left/right/center align:<br />
            <div class="box1text">
                <div class="embeddedContent rightAlignedContent">
                    <div class="embeddedInnerWrapper">
                        <iframe allowfullscreen="true" allowscriptaccess="always" frameborder="0" height="349" scrolling="no" src="//www.youtube.com/embed/u6XAPnuFjJc?wmode=transparent&amp;jqoemcache=eE9xf" width="425"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            Testing ratio AND left/right/center align:<br />
            <div class="box1text">
                <div class="embeddedContent">
                    <div class="embeddedInnerWrapper">
                        <iframe allowfullscreen="true" allowscriptaccess="always" frameborder="0" height="349" scrolling="no" src="//www.youtube.com/embed/u6XAPnuFjJc?wmode=transparent&amp;jqoemcache=eE9xf" width="425"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-26T03:24:27.707

为了回答[weotch](https://stackoverflow.com/users/59160/weotch)关于[Timothy Ryan Carpenter](https://stackoverflow.com/users/2189256/timothy-ryan-carpenter)的回答没有考虑`cover`到背景居中的评论，我提供了这个快速的 CSS 修复：

CSS：

```
margin-left: 50%;
transform: translateX(-50%); 
```

添加这两行将使任何元素居中。更好的是，所有可以处理 HTML5 视频的浏览器也支持 CSS3 转换，所以这将始终有效。

完整的 CSS 如下所示。

```
#video-background { 
    position: absolute;
    bottom: 0px; 
    right: 0px; 
    min-width: 100%; 
    min-height: 100%; 
    width: auto; 
    height: auto; 
    z-index: -1000; 
    overflow: hidden;
    margin-left: 50%;
    transform: translateX(-50%);
} 
```

我会直接评论蒂莫西的回答，但我没有足够的声誉这样做。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-07-16T20:08:17.300

伙计们，我有一个更好的解决方案，它很简短，对我来说很完美。我用它来视频。它完美地模拟了 css 中的封面选项。

**Javascript**

```
 $(window).resize(function(){
            //use the aspect ration of your video or image instead 16/9
            if($(window).width()/$(window).height()>16/9){
                $("video").css("width","100%");
                $("video").css("height","auto");
            }
            else{
                $("video").css("width","auto");
                $("video").css("height","100%");
            }
    }); 
```

如果你翻转 if，否则你会得到遏制。

这是CSS。（不想居中定位就不用了，父div必须是“ *position:relative* ”）

**CSS**

```
video {
position: absolute;
-webkit-transform: translateX(-50%) translateY(-50%);
transform: translateX(-50%) translateY(-50%);
top: 50%;
left: 50%;} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-07-02T17:54:25.360

我刚刚解决了这个问题并想分享。这适用于 Bootstrap 4。它适用于`img`但我没有用`video`. 这是 HAML 和 SCSS

`HAML`

```
.container
  .detail-img.d-flex.align-items-center
    %img{src: 'http://placehold.it/1000x700'} 
```

`SCSS`

```
.detail-img { // simulate background: center/cover
  max-height: 400px;
  overflow: hidden;

  img {
    width: 100%;
  }
} 
```

```
/* simulate background: center/cover */
.center-cover { 
  max-height: 400px;
  overflow: hidden;

}

.center-cover img {
    width: 100%;
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet"/>
<div class="container">
  <div class="center-cover d-flex align-items-center">
    <img src="http://placehold.it/1000x700">
  </div>
</div>
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-08-08T18:22:35.220

老问题，但如果有人看到这个，我认为最好的答案是将视频转换为动画 GIF。这为您提供了更多控制权，您可以将其视为图像。这也是它在移动设备上工作的唯一方式，因为您无法自动播放视频。我知道问题是要求在`<img>`标签中执行此操作，但我并没有真正看到使用 a`<div>`和做的缺点`background-size: cover`

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-06-08T05:20:21.937

我也有这个问题，我用下面的 css 解决了这个问题：

```
#video-container {
    overflow: hidden;
}

#video{
    width: 100%;
    position:absolute; 
    top: 0; 
    right: 0; 
    z-index: -1; 
} 
```

# gson - 如何使用 Gson 解析包含混合类型的简单数组？

> ID：10797633
> 
> 赞同：2
> 
> 时间：2012-05-29T10:48:58.010
> 
> 标签：gson

```
*{
    "data":["v",
        {
            "value1":6,
            "value2":0,
            "value3":1
        }
    ]
}* 
```

如何使用 Gson 解析包含混合类型的简单数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:02:40.650

最简单的方法是解析成一个 JsonElement：

```
JsonElement parsed = new JsonParser().parse(json); 
```

您可以根据需要使用[JsonElement 的 API](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonElement.html)来询问已解析的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T14:24:48.307

```
Gson gson = new Gson();
JsonElement element = gson.fromJson(jsonInputStr, JsonElement.class);
JsonArray array = element.getAsJsonArray(); 
```

# php - 在我的网站/域上接收来自所有其他域的电子邮件

> ID：10797651
> 
> 赞同：-5
> 
> 时间：2012-05-29T10:50:00.783
> 
> 标签：php, email, dns

根据我客户的要求，我需要在我的网站上接收来自所有其他域（如 gmail、hotmail、yahoo 等）的电子邮件。就像在“myname@mywebsite.com”上接收来自任何域的电子邮件一样。

有没有办法在 PHP 中这样做？你的任何一句话都会有很大的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:56:46.287

虽然您可以单独使用 PHP 来做到这一点，但这不是一个好主意。如果您需要接收到您的域的电子邮件，有两种方法：

1.  本地`sendmail`：您需要一个开放 25 端口的服务器；您需要在 DNS 中配置 MX 记录并正确配置您的 sendmail 以避免各种安全问题。当然，你可以用 PHP 编写一个 SMTP 服务器，但我不推荐它。

2.  SAAS 方法（例如，谷歌应用程序就是一个例子）。如果您只需要少数几个用户，那么谷歌应用程序可以免费使用并且非常容易设置。谷歌不再告诉你他们有免费版本——他们想要你的钱，即每位用户每年 50 美元，但如果你直接访问这个页面：https: [//www.google.com/a/ cpanel/standard/new3](https://www.google.com/a/cpanel/standard/new3) - 它显然仍然允许您登录。还有其他托管电子邮件提供商 - 尝试在网络上搜索它。

# asp.net - Asp.Net 页面渲染和 UI 控件模块化

> ID：10797652
> 
> 赞同：0
> 
> 时间：2012-05-29T10:50:03.127
> 
> 标签：asp.net, user-interface

我目前正在开发的网站可以显示动态构建的表单。

A`form`由 组成`fields`，由用户直接创建，可以显示为我们支持的多种类型之一（文本框、列表框、复选框、单选按钮列表等）。呈现逻辑使用 a`repeater`迭代用户定义的所有字段的集合。

在转发器内部（直接在 aspx 页面中），定义了我们支持的每种类型的一个实例。

```
<asp:Repeater ID="fieldRepeater" runat="server">
    <ItemTemplate>
        <asp:TextBox ID="textBox" runat="server" />
        <asp:DropDownList ID="dropDownList" runat="server" />
        <asp:CheckBox ID="checkBox" runat="server" />
        <asp:RadioButtonList ID="radioButtonList" runat="server" />
        [...]
    </ItemTemplate>
</asp:Repeater> 
```

在加载过程中，我们找出需要哪个控件并主动隐藏所有其他控件。

作为基于 Web 的开发世界的新手，这种方法对我来说似乎很奇怪。我的直觉更愿意保持 UI 干净并准确地实例化 CodeBehind 中所需的控件，而不是开始“玩”可见性......但当前的方法也有一些明显的好处。

真的是如何在网络应用程序中做到这一点吗？这里有一些最佳实践吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:52:19.343

我不知道这里的最佳实践是什么，但我之前在之前的项目中做过类似的事情，并尝试了这两种方法。两者都会起作用。

在代码隐藏中创建控件可能很繁琐，尤其是在您必须处理回发时。控件必须在 OnInit 中创建，否则它们将无法获取已发布的表单值和填充的视图状态。如果任何控件的创建都是基于其他控件的值，这将导致复杂化，因为如果不手动深入研究已发布的表单值，您将无法知道这些值。

我能想到的当前方法的唯一实际缺点是所有四个控件（TextBox、DropDownList 等）都必须由 ASP.Net 在服务器端进行实例化和处理，这有点浪费资源。但这可能不太重要。也许做一些分析看看。我确实同意这似乎有点奇怪，但感觉不是很“干净”。

正如您所说，您是 Web 开发的新手，那么我建议您继续使用当前的方法，包括所有控件并隐藏不相关的控件。当我这样做时，我发现它更简单，即使它看起来可能不那么好。

祝你好运！

# android - 你管视频没有播放

> ID：10797654
> 
> 赞同：2
> 
> 时间：2012-05-29T10:50:09.553
> 
> 标签：android, youtube-api

我正在使用 OpenYoutubeActivity.jar 播放这样的 youtube 视频

```
Intent videoIntent = new Intent(null, Uri.parse("ytv://NG3WygJmiVs"), this,OpenYouTubePlayerActivity.class);
    startActivity(videoIntent); 
```

OpenYouTubePlayerActivity.java 在这里

```
public class OpenYouTubePlayerActivity extends Activity {

public static final String SCHEME_YOUTUBE_VIDEO = "ytv";
public static final String SCHEME_YOUTUBE_PLAYLIST = "ytpl";

static final String YOUTUBE_VIDEO_INFORMATION_URL = "http://www.youtube.com/get_video_info?&video_id=";
static final String YOUTUBE_PLAYLIST_ATOM_FEED_URL = "http://gdata.youtube.com/feeds/api/playlists/";

protected ProgressBar mProgressBar;
protected TextView    mProgressMessage;
protected VideoView   mVideoView;

public final static String MSG_INIT = "com.keyes.video.msg.init";
protected String      mMsgInit       = "Initializing";

public final static String MSG_DETECT = "com.keyes.video.msg.detect";
protected String      mMsgDetect     = "Detecting Bandwidth";

public final static String MSG_PLAYLIST = "com.keyes.video.msg.playlist";
protected String      mMsgPlaylist   = "Determining Latest Video in YouTube Playlist";

public final static String MSG_TOKEN = "com.keyes.video.msg.token";
protected String      mMsgToken      = "Retrieving YouTube Video Token";

public final static String MSG_LO_BAND = "com.keyes.video.msg.loband";
protected String      mMsgLowBand    = "Buffering Low-bandwidth Video";

public final static String MSG_HI_BAND = "com.keyes.video.msg.hiband";
protected String      mMsgHiBand     = "Buffering High-bandwidth Video";

public final static String MSG_ERROR_TITLE = "com.keyes.video.msg.error.title";
protected String      mMsgErrorTitle = "Communications Error";

public final static String MSG_ERROR_MSG = "com.keyes.video.msg.error.msg";
protected String      mMsgError      = "An error occurred during the retrieval of the video.  This could be due to network issues or YouTube protocols.  Please try again later.";

/** Background task on which all of the interaction with YouTube is done */
protected QueryYouTubeTask mQueryYouTubeTask;

protected String mVideoId = null;

@Override
protected void onCreate(Bundle pSavedInstanceState) {
    super.onCreate(pSavedInstanceState);

    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    // create the layout of the view
    setupView();

    // determine the messages to be displayed as the view loads the video
    extractMessages();

    // set the flag to keep the screen ON so that the video can play without the screen being turned off
    getWindow().setFlags(android.view.WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON, android.view.WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    mProgressBar.bringToFront();
    mProgressBar.setVisibility(View.VISIBLE);
    mProgressMessage.setText(mMsgInit);

    // extract the playlist or video id from the intent that started this video

    Uri lVideoIdUri = this.getIntent().getData();

    if(lVideoIdUri == null){
        Log.i(this.getClass().getSimpleName(), "No video ID was specified in the intent.  Closing video activity.");
        finish();
    }
    String lVideoSchemeStr = lVideoIdUri.getScheme();
    String lVideoIdStr     = lVideoIdUri.getEncodedSchemeSpecificPart();
    if(lVideoIdStr == null){
        Log.i(this.getClass().getSimpleName(), "No video ID was specified in the intent.  Closing video activity.");
        finish();
    }
    if(lVideoIdStr.startsWith("//")){
        if(lVideoIdStr.length() > 2){
            lVideoIdStr = lVideoIdStr.substring(2);
        } else {
            Log.i(this.getClass().getSimpleName(), "No video ID was specified in the intent.  Closing video activity.");
            finish();
        }
    }

    ///////////////////
    // extract either a video id or a playlist id, depending on the uri scheme
    YouTubeId lYouTubeId = null;
    if(lVideoSchemeStr != null && lVideoSchemeStr.equalsIgnoreCase(SCHEME_YOUTUBE_PLAYLIST)){
        lYouTubeId = new PlaylistId(lVideoIdStr);
    }

    else if(lVideoSchemeStr != null && lVideoSchemeStr.equalsIgnoreCase(SCHEME_YOUTUBE_VIDEO)){
        lYouTubeId = new VideoId(lVideoIdStr);
    }

    if(lYouTubeId == null){
        Log.i(this.getClass().getSimpleName(), "Unable to extract video ID from the intent.  Closing video activity.");
        finish();
    }

    mQueryYouTubeTask = (QueryYouTubeTask) new QueryYouTubeTask().execute(lYouTubeId);
}

/**
 * Determine the messages to display during video load and initialization. 
 */
private void extractMessages() {
    Intent lInvokingIntent = getIntent();
    String lMsgInit = lInvokingIntent.getStringExtra(MSG_INIT);
    if(lMsgInit != null){
        mMsgInit = lMsgInit;
    }
    String lMsgDetect = lInvokingIntent.getStringExtra(MSG_DETECT);
    if(lMsgDetect != null){
        mMsgDetect = lMsgDetect;
    }
    String lMsgPlaylist = lInvokingIntent.getStringExtra(MSG_PLAYLIST);
    if(lMsgPlaylist != null){
        mMsgPlaylist = lMsgPlaylist;
    }
    String lMsgToken = lInvokingIntent.getStringExtra(MSG_TOKEN);
    if(lMsgToken != null){
        mMsgToken = lMsgToken;
    }
    String lMsgLoBand = lInvokingIntent.getStringExtra(MSG_LO_BAND);
    if(lMsgLoBand != null){
        mMsgLowBand = lMsgLoBand;
    }
    String lMsgHiBand = lInvokingIntent.getStringExtra(MSG_HI_BAND);
    if(lMsgHiBand != null){
        mMsgHiBand = lMsgHiBand;
    }
    String lMsgErrTitle = lInvokingIntent.getStringExtra(MSG_ERROR_TITLE);
    if(lMsgErrTitle != null){
        mMsgErrorTitle = lMsgErrTitle;
    }
    String lMsgErrMsg = lInvokingIntent.getStringExtra(MSG_ERROR_MSG);
    if(lMsgErrMsg != null){
        mMsgError = lMsgErrMsg;
    }
}

/**
 * Create the view in which the video will be rendered.
 */
private void setupView() {
    LinearLayout lLinLayout = new LinearLayout(this);
    lLinLayout.setId(1);
    lLinLayout.setOrientation(LinearLayout.VERTICAL);
    lLinLayout.setGravity(Gravity.CENTER);
    lLinLayout.setBackgroundColor(Color.BLACK);

    LayoutParams lLinLayoutParms = new LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT);
    lLinLayout.setLayoutParams(lLinLayoutParms);

    this.setContentView(lLinLayout);

    RelativeLayout lRelLayout = new RelativeLayout(this);
    lRelLayout.setId(2);
    lRelLayout.setGravity(Gravity.CENTER);
    lRelLayout.setBackgroundColor(Color.BLACK);
    android.widget.RelativeLayout.LayoutParams lRelLayoutParms = new android.widget.RelativeLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT);
    lRelLayout.setLayoutParams(lRelLayoutParms);
    lLinLayout.addView(lRelLayout);

    mVideoView = new VideoView(this);
    mVideoView.setId(3);
    android.widget.RelativeLayout.LayoutParams lVidViewLayoutParams = new android.widget.RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    lVidViewLayoutParams.addRule(RelativeLayout.CENTER_IN_PARENT);
    mVideoView.setLayoutParams(lVidViewLayoutParams);
    lRelLayout.addView(mVideoView);

    mProgressBar = new ProgressBar(this);
    mProgressBar.setIndeterminate(true);
    mProgressBar.setVisibility(View.VISIBLE);
    mProgressBar.setEnabled(true);
    mProgressBar.setId(4);
    android.widget.RelativeLayout.LayoutParams lProgressBarLayoutParms = new android.widget.RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    lProgressBarLayoutParms.addRule(RelativeLayout.CENTER_IN_PARENT);
    mProgressBar.setLayoutParams(lProgressBarLayoutParms);
    lRelLayout.addView(mProgressBar);

    mProgressMessage = new TextView(this);
    mProgressMessage.setId(5);
    android.widget.RelativeLayout.LayoutParams lProgressMsgLayoutParms = new android.widget.RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    lProgressMsgLayoutParms.addRule(RelativeLayout.CENTER_HORIZONTAL);
    lProgressMsgLayoutParms.addRule(RelativeLayout.BELOW, 4);
    mProgressMessage.setLayoutParams(lProgressMsgLayoutParms);
    mProgressMessage.setTextColor(Color.LTGRAY);
    mProgressMessage.setTextSize(TypedValue.COMPLEX_UNIT_SP, 12);
    mProgressMessage.setText("...");
    lRelLayout.addView(mProgressMessage);
}

@Override
protected void onDestroy() {
    super.onDestroy();

    YouTubeUtility.markVideoAsViewed(this, mVideoId);

    if(mQueryYouTubeTask != null){
        mQueryYouTubeTask.cancel(true);
    }

    if(mVideoView != null){
        mVideoView.stopPlayback();
    }

    // clear the flag that keeps the screen ON 
    getWindow().clearFlags(android.view.WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    this.mQueryYouTubeTask = null;
    this.mVideoView = null;

}

public void updateProgress(String pProgressMsg){
    try {
        mProgressMessage.setText(pProgressMsg);
    } catch(Exception e) {
        Log.e(this.getClass().getSimpleName(), "Error updating video status!", e);
    }
}

private class ProgressUpdateInfo {

    public String mMsg;

    public ProgressUpdateInfo(String pMsg){
        mMsg = pMsg;
    }
}

/**
 * Task to figure out details by calling out to YouTube GData API.  We only use public methods that
 * don't require authentication.
 * 
 */
private class QueryYouTubeTask extends AsyncTask<YouTubeId, ProgressUpdateInfo, Uri> {

    private boolean mShowedError = false;

    @Override
    protected Uri doInBackground(YouTubeId... pParams) {
        String lUriStr = null;
        // modified by Naushad Kasu - changed to 18 instead of 17
        String lYouTubeFmtQuality = "18";   // 3gpp medium quality, which should be fast enough to view over EDGE connection
        String lYouTubeVideoId = null;

        if(isCancelled())
            return null;

        try {

            // if the intent is to show a playlist, get the latest video id from the playlist, otherwise the video
            // id was explicitly declared.
            if(pParams[0] instanceof PlaylistId){
                publishProgress(new ProgressUpdateInfo(mMsgPlaylist));
                lYouTubeVideoId = YouTubeUtility.queryLatestPlaylistVideo((PlaylistId) pParams[0]);
            }

            else if(pParams[0] instanceof VideoId){
                lYouTubeVideoId = pParams[0].getId();
            }

            mVideoId = lYouTubeVideoId;

            publishProgress(new ProgressUpdateInfo(mMsgToken));

            if(isCancelled())
                return null;

            ////////////////////////////////////
            // calculate the actual URL of the video, encoded with proper YouTube token
            lUriStr = YouTubeUtility.calculateYouTubeUrl(lYouTubeFmtQuality, true, lYouTubeVideoId);

            if(isCancelled())
                return null;

            if(lYouTubeFmtQuality.equals("17")){
                publishProgress(new ProgressUpdateInfo(mMsgLowBand));
            } else {
                publishProgress(new ProgressUpdateInfo(mMsgHiBand));
            }

        } catch(Exception e) {
            Log.e(this.getClass().getSimpleName(), "Error occurred while retrieving information from YouTube.", e);
        }

        if(lUriStr != null){
            return Uri.parse(lUriStr);
        } else {
            return null;
        }
    }

    @Override
    protected void onPostExecute(Uri pResult) {
        super.onPostExecute(pResult);

        try {
            if(isCancelled())
                return;

            if(pResult == null){
                throw new RuntimeException("Invalid NULL Url.");
            }

            mVideoView.setVideoURI(pResult);

            if(isCancelled())
                return;

            // TODO:  add listeners for finish of video
            mVideoView.setOnCompletionListener(new OnCompletionListener(){

                @Override
                public void onCompletion(MediaPlayer pMp) {
                    if(isCancelled())
                        return;
                    OpenYouTubePlayerActivity.this.finish();
                }

            });

            if(isCancelled())
                return;

            final MediaController lMediaController = new MediaController(OpenYouTubePlayerActivity.this);
            mVideoView.setMediaController(lMediaController);
            lMediaController.show(0);
            //mVideoView.setKeepScreenOn(true);
            mVideoView.setOnPreparedListener( new MediaPlayer.OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer pMp) {
                    if(isCancelled())
                        return;
                    OpenYouTubePlayerActivity.this.mProgressBar.setVisibility(View.GONE);
                    OpenYouTubePlayerActivity.this.mProgressMessage.setVisibility(View.GONE);
                }

            });

            if(isCancelled())
                return;

            mVideoView.requestFocus();
            mVideoView.start();
        } catch(Exception e){
            Log.e(this.getClass().getSimpleName(), "Error playing video!", e);

            if(!mShowedError){
                showErrorAlert();
            }
        }
    }

    private void showErrorAlert() {

        try {
            Builder lBuilder = new AlertDialog.Builder(OpenYouTubePlayerActivity.this);
            lBuilder.setTitle(mMsgErrorTitle);
            lBuilder.setCancelable(false);
            lBuilder.setMessage(mMsgError);

            lBuilder.setPositiveButton("OK", new DialogInterface.OnClickListener(){

                @Override
                public void onClick(DialogInterface pDialog, int pWhich) {
                    OpenYouTubePlayerActivity.this.finish();
                }

            });

            AlertDialog lDialog = lBuilder.create();
            lDialog.show();
        } catch(Exception e){
            Log.e(this.getClass().getSimpleName(), "Problem showing error dialog.", e);
        }
    }

    @Override
    protected void onProgressUpdate(ProgressUpdateInfo... pValues) {
        super.onProgressUpdate(pValues);

        OpenYouTubePlayerActivity.this.updateProgress(pValues[0].mMsg);
    }
}

@Override
protected void onStart() {
    super.onStart();
}

@Override
protected void onStop() {
    super.onStop();
}
} 
```

使用相同的代码，有些视频正在播放，有些则没有。它给出了这样的错误

```
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287): Error occurred while retrieving information from YouTube.
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287): java.lang.NullPointerException
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at java.net.URLDecoder.decode(URLDecoder.java:130)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at java.net.URLDecoder.decode(URLDecoder.java:68)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at com.controlledsenility.android.youtube.YouTubeUtility.calculateYouTubeUrl(YouTubeUtility.java:152)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at com.ydemo.OpenYouTubePlayerActivity$QueryYouTubeTask.doInBackground(OpenYouTubePlayerActivity.java:392)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at com.ydemo.OpenYouTubePlayerActivity$QueryYouTubeTask.doInBackground(OpenYouTubePlayerActivity.java:1)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
05-29 18:16:42.429: ERROR/QueryYouTubeTask(287):     at java.lang.Thread.run(Thread.java:1096)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287): Error playing video!
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287): java.lang.RuntimeException: Invalid NULL Url.
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at com.ydemo.OpenYouTubePlayerActivity$QueryYouTubeTask.onPostExecute(OpenYouTubePlayerActivity.java:425)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at com.ydemo.OpenYouTubePlayerActivity$QueryYouTubeTask.onPostExecute(OpenYouTubePlayerActivity.java:1)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at android.os.AsyncTask.finish(AsyncTask.java:417)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at android.os.Looper.loop(Looper.java:123)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at java.lang.reflect.Method.invokeNative(Native Method)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at java.lang.reflect.Method.invoke(Method.java:521)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-29 18:16:42.449: ERROR/QueryYouTubeTask(287):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T14:20:31.250

用这个

```
Intent videoIntent = new Intent(null, Uri.parse("ytv:NG3WygJmiVs"),   this,OpenYouTubePlayerActivity.class);
startActivity(videoIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:57:10.517

使用此代码

```
startActivity(newIntent(Intent.ACTION_VIEW, Uri.parse("ytv://NG3WygJmiVs"))); 
```

# r - 在某些条件适用时允许最大数量的条目

> ID：10797655
> 
> 赞同：2
> 
> 时间：2012-05-29T10:50:16.310
> 
> 标签：r, plyr, data.table

我有一个包含很多条目的数据集。这些条目中的每一个都属于某个ID（belongID），条目是唯一的（具有uniqID），但多个条目可以来自同一个源（sourceID）。来自同一来源的多个条目也可能具有相同的belongID。出于研究的目的，我需要对数据集进行研究，我必须删除单个 sourceID 的条目，这些条目对于 1 个belongID 出现超过 5 次。最多需要保留 5 个条目是具有最高“时间”值的条目。

为了说明这一点，我有以下示例数据集：

```
 belongID   sourceID uniqID   Time     
   1           1001     101       5            
   1           1002     102       5        
   1           1001     103       4        
   1           1001     104       3       
   1           1001     105       3     
   1           1005     106       2        
   1           1001     107       2       
   1           1001     108       2       
   2           1005     109       5                
   2           1006     110       5        
   2           1005     111       5        
   2           1006     112       5        
   2           1005     113       5      
   2           1006     114       4        
   2           1005     115       4        
   2           1006     116       3       
   2           1005     117       3                
   2           1006     118       3       
   2           1005     119       2        
   2           1006     120       2        
   2           1005     121       1      
   2           1007     122       1        
   3           1010     123       5        
   3           1480     124       2 
```

最后的示例应如下所示：

```
 belongID   sourceID uniqID   Time     
   1           1001     101       5            
   1           1002     102       5        
   1           1001     103       4        
   1           1001     104       3       
   1           1001     105       3     
   1           1005     106       2        
   1           1001     107       2           
   2           1005     109       5                
   2           1006     110       5        
   2           1005     111       5        
   2           1006     112       5        
   2           1005     113       5      
   2           1006     114       4        
   2           1005     115       4        
   2           1006     116       3       
   2           1005     117       3                
   2           1006     118       3           
   2           1007     122       1        
   3           1010     123       5        
   3           1480     124       2 
```

文件中有更多包含数据条目的列，但选择必须完全基于时间。如示例中所示，具有相同belowID 的sourceID 的第5 个和第6 个条目也可能具有相同的时间。在这种情况下，只需要选择 1，因为 max=5。

出于说明目的，此处的数据集按belongID 和时间很好地排序，但在实际数据集中并非如此。知道如何解决这个问题吗？我还没有遇到类似的东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:37:49.747

假设您的数据在`df`. 在此之后获得有序（按 uniqID）输出：

```
tab <- tapply(df$Time, list(df$belongID, df$sourceID), length)
bIDs <- rownames(tab)
sIDs <- colnames(tab)
for(i in bIDs)
{
    if(all(is.na(tab[bIDs == i, ])))next
    ids <- na.omit(sIDs[tab[i, sIDs] > 5])
    for(j in ids)
    {
        cond <- df$belongID == i & df$sourceID == j
        old <- df[cond,]
        id5 <- order(old$Time, decreasing = TRUE)[1:5]
        new <- old[id5,]
        df <- df[!cond,]
        df <- rbind(df, new)
    }
}
df[order(df$uniqID), ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:02:17.613

使用`plyr`包的两行解决方案：

```
library(plyr)
x <- ddply(dat, .(belongID, sourceID), function(x)tail(x[order(x$Time), ], 5))
xx <- x[order(x$belongID, x$uniqID), ] 
```

结果：

```
 belongID sourceID uniqID Time
5         1     1001    101    5
6         1     1002    102    5
4         1     1001    103    4
2         1     1001    104    3
3         1     1001    105    3
7         1     1005    106    2
1         1     1001    108    2
10        2     1005    109    5
16        2     1006    110    5
11        2     1005    111    5
17        2     1006    112    5
12        2     1005    113    5
15        2     1006    114    4
9         2     1005    115    4
13        2     1006    116    3
8         2     1005    117    3
14        2     1006    118    3
18        2     1007    122    1
19        3     1010    123    5
20        3     1480    124    2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:04:40.683

如果`dat`是您的数据框：

```
do.call(rbind, 
        by(dat, INDICES=list(dat$belongID, dat$sourceID), 
           FUN=function(x) head(x[order(x$Time, decreasing=TRUE), ], 5))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T22:08:13.067

将要使用此方法的数据集有 170.000 多个条目和近 30 列

使用我的数据集对 danas.zuokas、mplourde 和 Andrie 提供的三个解决方案中的每一个进行基准测试，结果如下：

danas.zuokas 的解决方案：

```
 User     System  Elapsed 
   2829.569   0     2827.86 
```

mplourde 的解决方案：

```
 User     System  Elapsed 
   765.628  0.000   763.908 
```

Aurdie 的解决方案：

```
 User     System  Elapsed 
   984.989  0.000   984.010 
```

因此，我将使用 mplourde 的解决方案。谢谢你们！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T09:49:11.153

这应该更快，使用[`data.table`](http://datatable.r-forge.r-project.org/)：

```
DT = as.data.table(dat)

DT[, .SD[tail(order(Time),5)], by=list(belongID, sourceID)] 
```

旁白：建议计算在此问题的各种答案中重复相同变量名称的次数。您是否有很多长或相似的对象名称？

# c# - 动态改变无点参数

> ID：10797661
> 
> 赞同：5
> 
> 时间：2012-05-29T10:50:51.427
> 
> 标签：c#, .net, less, dotless

我想将 .less 参数存储在数据库中，一个示例用例可能是每个用户根据他或她的喜好改变颜色。

我认为最好的方法是解析所有 .less 文件以获取参数，然后用户可以针对用户设置将保存在数据库中的参数。当请求较少的文件时，处理程序重载可以查询数据库的参数。然后处理程序可以输出带有参数集的 css。

问题： - 如何获取 .less 文件并获取参数列表？- 如何获取 .less 文件的参数数组（键值对）并输出 css？

全部使用无点框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:59:13.553

可能是迟到的回复，但我们做了与您的要求类似的事情，我们根据存储在数据库中的用户自定义颜色。

我们的解决方案是将自定义代码添加到 dotless 的源代码中，我相信这里有[https://github.com/dotless/dotless](https://github.com/dotless/dotless)

所以在解析过程中，它只是字符串替换了我们想要替换的部分。这种方法的唯一缺点是获取新的无点 dll 的更新版本，我们每次都需要重新合并我们的源。

**编辑** 这是一个示例代码片段：

```
dotless.Core.Utils.HslColor hslcolor = dotless.Core.Utils.HslColor.FromRgbColor( new dotless.Core.Parser.Tree.Color( "187AAB" );
                hslcolor.Lightness = 0.93;
                var hexString = '#' + ( hslcolor.ToRgbColor().RGB.Select( i => ( ( int )i ).ToString( "X2" ) ).Aggregate( ( a, b ) => a + b ) ).ToLowerInvariant();
                var resultColor = hexString; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:11:02.267

如果您在 .Net 中执行此操作，则 dotless 允许您指定一个插件，该插件可以作为访问者在评估之前运行。这会访问不太抽象的语法树中的所有节点，因此可以轻松确定所有变量。Dotless 还允许指定允许您生成变量文件的模式。

但那是 ott.. 您可能需要考虑将数据库中的所有变量存储为您的“主副本”，并避免解析较少的变量。

# java - 从列表中删除范围（尾部）

> ID：10797663
> 
> 赞同：42
> 
> 时间：2012-05-29T10:50:56.123
> 
> 标签：java, list, collections, stack

是否有一种有效的方法可以从 a 中删除 X 元素的范围（例如尾部）`List`，例如`LinkedList`在 Java 中？

显然可以一个一个地删除最后一个元素，这应该会导致 O(X) 级别的性能。至少在`LinkedList`某些情况下，应该有可能获得 O(1) 性能（通过设置要删除的第一个元素周围的引用并设置头/尾引用）。不幸的是，我没有看到任何方法，也没有`List`一次`LinkedList`删除最后一个元素。

目前我正在考虑使用*替换*列表，[`List.subList()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)但我不确定这是否具有相同的性能。至少在代码中会更清楚，另一方面我会失去`LinkedList`提供的附加功能。

我主要将 List 用作堆栈，这`LinkedList`似乎是最好的选择，至少在语义方面。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-29T11:22:28.760

`subList(list.size() - N, list.size()).clear()`是删除最后一个`N`元素的推荐方法。事实上，[Javadoc for`subList`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29) *特别*推荐这个成语：

> 这种方法消除了显式范围操作的需要（通常存在于数组中的那种）。通过传递 subList 视图而不是整个列表，任何需要列表的操作都可以用作范围操作。例如，以下习惯用法从列表中删除一系列元素：
> 
> ```
>  list.subList(from, to).clear(); 
> ```

确实，我怀疑这个习语可能比调用时间*更*有效（尽管是一个常数因子）`removeLast()` `N`，因为一旦它找到`N`倒数第二个节点，它只需要更新链表中的常数个指针，而不是一次更新每个最后一个`N`节点的指针。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-29T11:14:23.743

请注意，它`subList()`返回原始列表的*视图，这意味着：*

1.  对视图所做的任何修改都将反映在原始列表中
2.  返回的列表*不是*- 它是不可序列化`LinkedList`的内部实现`List`

无论如何，使用`removeFirst()`or`removeLast()`应该足够有效，因为在 Java 中弹出链表的第一个或最后一个元素是一项`O(1)`操作 - 在内部，`LinkedList`保存指向列表两端的指针，删除任何一个就像将指针移动一个位置一样简单.

对于一次删除`m`元素，您会`O(m)`遇到 a 的性能`LinkedList`问题，尽管奇怪的是 an`ArrayList`可能是更好的选择，因为删除 an 末尾的元素`ArrayList`就像移动索引指针（表示数组的末尾）一样简单位置在其左侧，并且没有垃圾节点像`LinkedList`. 最佳选择？尝试这两种方法，分析它们并让数字说明一切。

# php - PHP 包含路径 CMS

> ID：10797665
> 
> 赞同：0
> 
> 时间：2012-05-29T10:50:59.280
> 
> 标签：php, content-management-system, include-path

我的包含路径有问题。我正在尝试构建一个 cms，但我想构建它，以便并非所有文件都需要位于根目录中。

[链接到文件结构](https://picasaweb.google.com/lh/photo/q3ILZGlwgU09uC0EdNa26F2I6eDUnNfyarR9qOpJtmU?feat=directlink)

我试图从任何地方包含到另一个文件。但问题是我在其他文件中包含文件。

喜欢：我在 T_ErrorLog 中包含 ErrorHandling 但我在 ErrorHandling 的 Textfiles 中使用了 A 文本文件，因此路径不正确。

错误：

```
Notice: Undefined variable: error in C:\Users\Kevin\Desktop\Dropbox\Programming\Webdesign\Workspace\KLJ Peer\GhostCMS\TestFiles\T_ErrorLog.php on line 7
Test

Warning: fopen(/GhostCMS/Textfiles/ErrorLog.txt) [function.fopen]: failed to open stream: No such file or directory in C:\Users\Kevin\Desktop\Dropbox\Programming\Webdesign\Workspace\KLJ Peer\GhostCMS\Core\ErrorHandling.php on line 15
can't open file 
```

T_ErrorLog.php

```
<?php

include_once ('../Core/ErrorHandling.php');

use Core\ErrorHandling;

ErrorHandling::HandleError("Test", $error); 
```

错误处理.php

```
namespace Core;

class ErrorHandling {
    public static function HandleError($errorMessage, $error){
        echo $errorMessage . "<br />";
        echo "Indien dit zicht blijft voor doen.<br />";
        echo "Zal de webmaster dit ontvangen en even kijken naar het probleem!<br />";

        ErrorHandling::WriteToErrorFile($errorMessage, $error);
    }
    public static function WriteToErrorFile($errorMessage, $error){
        $myFile = "/GhostCMS/Textfiles/ErrorLog.txt";
        $fh = fopen($myFile, 'a') or die("can't open file");

        $today = date('j/n/Y - H:i:s');
        fwrite($fh, "Error: \n");
        fwrite($fh, "Date: " . $today . "\n");
        fwrite($fh, "User error message: " . $errorMessage . "\n");
        fwrite($fh, "System error message: " . $error . "\n");
        fwrite($fh, "--------------------------------------------------\n");
        fclose($fh);
    }
} 
```

有什么方法可以使所有目录的包含路径相对于所有目录？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:03:37.500

那么你知道你的文件结构，它不会真正改变。一般来说，您有几个选项：记录根目录或从中派生其他文件的起点，以包含**DIR**或**FILE** [PHP 魔术常量等选项](http://php.net/manual/en/language.constants.predefined.php)

例如，您可以在安装时或在引导文件中保存**FILE**，然后调整目录以从该路径派生。

```
$myPreviouslySavedPath = __DIR__   // e.g. /home/user/meme/www/
fopen($myPreviouslySavedPath . '/GhostCMS/Textfiles/ErrorLog.txt') // would then be /home/user/meme/www/GhostCMS/Textfiles/ErrorLog.txt 
```

或者对于 php 包括 php 有一个[autoloader](http://php.net/manual/en/language.oop5.autoload.php)，这只是您自己提供的一个函数，您让该函数决定从哪里加载特定文件。这是您在 CMS 的入口点中设置的内容，并且可能会与您收集的基本目录结合使用。

例如

```
spl_autoload_register('myClassLoader');

function myClassLoader($class){
     // << here you'd place logic to decide the best path for your file >>
     include(__DIR__ . "/classes/$class");
} 
```

要记住和使用的主要内容是您的应用程序有一个固定的入口点，并且您知道该文件的位置。从中您可以推断出所有其他文件的逻辑路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:09:03.653

我建议重写代码，以便不使用包含或要求，并且可以通过正确设置您的包含路径来实现此方法 - 请参阅[http://php.net/set_include_path](http://php.net/set_include_path)和[http://php.net/get_include_path](http://php.net/get_include_path)并使用一个自动加载器类/函数。

然后，当“使用”基于命名空间的类时，您的自动加载器将搜索包含路径并尝试包含该文件...

通过这种方式，您可以在与您的 CMS 不同的地方拥有外部库、类，但仍然可以通过自动加载器和命名空间轻松地包含它们......

# android - Android：在 onConfigurationChanged 中获取 WebView 宽度

> ID：10797666
> 
> 赞同：1
> 
> 时间：2012-05-29T10:51:02.047
> 
> 标签：android

iOS 有很好的旋转方法，比如 willRotateToInerfaceOrientation 和 didRotateFromInterfaceOrientation。在第一个视图中，在旋转之前具有旧的宽度和高度。在 didRotateFromInterfaceOrientation 中，我可以获得新的宽度和高度。如何在 Android 中做到这一点？我需要在 onConfigurationChanged 方法中获取 WebView 的新宽度和高度，这可能吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:21:33.737

您可以使用 webview.getWidth() 获取视图宽度

# .net - Actionfilter 的 ViewData 在 Base Controller 属性中不可用

> ID：10797667
> 
> 赞同：1
> 
> 时间：2012-05-29T10:51:05.953
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, actionfilterattribute

我有一个像这样的基本控制器

```
 [Action]
  public abstract class ApplicationController : Controller
  {
     public bool HasRight { get { return ((bool)ViewData["Actions2"]); } }        
  .........
  } 
```

动作属性

```
public class ActionAttribute : ActionFilterAttribute
{
   public override void OnActionExecuted(ActionExecutedContext filterContext)
   {
      filterContext.Controller.ViewData["Actions2"]=true;
      .........
   }

} 
```

当我从某个控制器调用某些视图时，我得到空异常

```
public bool HasRight { get { return ((bool)ViewData["Actions2"]); } } as ViewData is null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:11:49.860

我认为您正在寻找[`OnActionExecuting`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuting.aspx)在您的 Controller 操作之前执行的，而不是[`OnActionExecuted`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuted.aspx).

这应该有效：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext) {
    filterContext.Controller.ViewData["Actions2"]) = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:14:01.240

You need to get `ViewData` from the `FilterContext` Like this:

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.Controller.ViewData["Actions2"] = true;
        base.OnActionExecuting(filterContext);
    } 
```

***Update :***

**After your update** i realized that you're trying to get access to `ViewData["Actions2"]` before setting the value to it.

So you should use `OnActionExecuting` instead of `OnActionExecuted` to ensure that the value has been set to the `ViewData`

# qt - Wt 与 Qt，.pro 设置

> ID：10797668
> 
> 赞同：1
> 
> 时间：2012-05-29T10:51:07.760
> 
> 标签：qt, wt

我试图让 Wt 与 Qt 一起工作。我已经安装了 1.47 boost 库，在 Windows 下使用 cmake 2.8.8 编译了 Wt (3.2.1)。厌倦了简单的 hello world 但无法编译，出现未定义的引用错误，例如：未定义引用 `Wt::WApplication::WApplication(Wt::WEnvironment const&, Wt::WtLibVersion)'

```
Here is my .pro file:    
QT       -= core

QT       -= gui

INCLUDEPATH += ../../../lib/Wt/include \
          ../../../lib/boost_1_47 \
          ../../../lib/Wt/src

LIBS += -L../../../lib/Wt/lib \
    -L../../../lib/boost_1_47/lib

win32:LIBS += -lwthttpd -lwtd -lboost_regex-vc100-mt-1_47

TARGET = HttpServerWt
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp 
```

这是我要编译的程序： [http ://www.webtoolkit.eu/wt/src/hello](http://www.webtoolkit.eu/wt/src/hello)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:07:10.730

`/usr/loca/lib`可能默认情况下会添加您的 WT 库。所以相应地指定链接库[在检查它是否存在之后，否则签入`/usr/lib`并相应地包含]。

`LIBS`如下设置变量

```
LIBS += -L/usr/local/lib -lwtd -lwthttpd -lboost_regex-vc100-mt-1_47 
```

`INCLUDEPATH`在您的帖子中设置变量时，我没有看到任何问题。

并且还要确保你`Wt::WApplication::WApplication(Wt::WEnvironment const&, Wt::WtLibVersion)`在`LIBS`变量中添加了对应的模块。

更多[看这里](http://redmine.emweb.be/wiki/wt/Frequently_Asked_Questions#Q-How-do-I-build-my-newly-written-Hello-World-application)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:38:07.573

我认为您需要更多库，因为在 Ubuntu 中您需要添加两个以上的库才能使用 qt creator 编译 wt 代码。

这是我的 *.pro 文件

```
QT       += core
QT       -= gui
TARGET = prueba3
LIBS += -L/usr/lib -lwt -lwthttp -I/usr/local/include
LIBS += -L/usr/local/lib -lwthttp -lwt -lboost_regex -lboost_signals
LIBS += -lboost_system -lboost_thread -lboost_filesystem -lboost_date_time
#QMAKE_CXXFLAGS += -DNDEBUG

CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp 
```

它编译/构建很好，最后你必须添加这一行来运行设置（ctrl+5）

```
--docroot . --http-address 0.0.0.0 --http-port 9090 
```

# c# - 如何在 ubuntu 中使用 RSACryptoServiceProvider() 解密 c# 中的加密数据？

> ID：10797671
> 
> 赞同：0
> 
> 时间：2012-05-29T10:51:15.810
> 
> 标签：c#, encryption, mono, cryptography, rsa

我正在使用`RSACryptoServiceProvider()`c# 中的类来加密我的数据。我想解密在 c# 中加密的 ubuntu 中的数据。您能否建议我需要遵循哪种机制才能解密。以下函数用于加密：

```
public static void Encrypt(String PublicKey, String plainText, out String cipherText)
{
    try
    {             
        int dwKeySize = 1024;
        // TODO: Add Proper Exception Handlers
        RSACryptoServiceProvider rsaCryptoServiceProvider = new RSACryptoServiceProvider(dwKeySize);
        rsaCryptoServiceProvider.FromXmlString(PublicKey);
        int keySize = dwKeySize / 8;
        byte[] bytes = Encoding.UTF32.GetBytes(plainText);
        // The hash function in use by the .NET RSACryptoServiceProvider here is SHA1
        // int maxLength = ( keySize ) - 2 - ( 2 * SHA1.Create().ComputeHash( rawBytes ).Length );
        int maxLength = keySize - 42;
        int dataLength = bytes.Length;
        int iterations = dataLength / maxLength;
        StringBuilder stringBuilder = new StringBuilder();
        for (int i = 0; i <= iterations; i++)
        {
            byte[] tempBytes = new byte[(dataLength - maxLength * i > maxLength) ? maxLength : dataLength - maxLength * i];
            Buffer.BlockCopy(bytes, maxLength * i, tempBytes, 0, tempBytes.Length);
            byte[] encryptedBytes = rsaCryptoServiceProvider.Encrypt(tempBytes, true);
            // Be aware the RSACryptoServiceProvider reverses the order 
            // of encrypted bytes after encryption and before decryption.
            // If you do not require compatibility with Microsoft Cryptographic API
            // (CAPI) and/or other vendors.
            // Comment out the next line and the corresponding one in the 
            // DecryptString function.
            Array.Reverse(encryptedBytes);
            // Why convert to base 64?
            // Because it is the largest power-of-two base printable using only ASCII characters
            stringBuilder.Append(Convert.ToBase64String(encryptedBytes));
        }
        cipherText = stringBuilder.ToString();
    }
    catch (Exception e)
    {
        cipherText = "ERROR_STRING";
        Console.WriteLine("Exception in RSA Encrypt: " + e.Message);
        //throw new Exception("Exception occured while RSA Encryption" + e.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:41:50.330

不要那样使用 RSA。它不适合那样使用，而且太慢了。

*正确*的方法是使用对称算法，例如 AES，并使用 RSA 加密您使用的密钥。请参阅我的[旧博客条目](http://pages.infinit.net/ctech/20031101-0151.html)，了解这样做的 C# 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:10:28.823

您需要相同的机制，但相反。先试后问。

# logging - 任何与 log4j 集成的 Lua 日志库？

> ID：10797678
> 
> 赞同：4
> 
> 时间：2012-05-29T10:51:27.597
> 
> 标签：logging, lua, log4j

任务是从不同语言（Java、C++ 和 Lua）登录到同一个文件，以按时间顺序保存日志记录。我正在考虑网络或系统日志附加程序，以便我可以轻松地从不同语言登录。Log4j 是最流行的格式，使用 log4cxx 我可以支持 Java 和 C++。我找到了 Log4Lua，但似乎它已经死了。

您可以推荐什么解决方案？

编辑：

我在 Linux 和 Windows 上都需要这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:21:12.090

可能你最好的选择是编写一个小的 C++ dll 来公开你想要的功能，将它加载到你的 lua 脚本中，然后调用 C++ 函数，以这种方式从 lua 进行日志调用。

# javascript - 如何测试我的 Backbone 集合在 Jasmine 中扩展的类

> ID：10797683
> 
> 赞同：3
> 
> 时间：2012-05-29T10:51:49.907
> 
> 标签：javascript, backbone.js, coffeescript, jasmine

我在 Coffeescript 中有一个自定义的 Backbone.Collection 类。

我给它命名（它负责分页）：

```
class SI.PaginatedCollection extends Backbone.Collection 
```

我想编写 Jasmine 规范来测试我是否扩展了那个特定的类。

对不起我的英语，我现在可能很糟糕。;)

**PS**我可以解析 Javascript，但 Coffeescript 是理想的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T11:25:35.137

测试这个对我来说似乎有点矫枉过正，但你可以这样做：

```
describe "SI.PaginatedCollection", ->

  beforeEach ->
    @collection = new SI.PaginatedCollection()

  it "is a subclass of Backbone.Collection", ->
    expect(@collection instanceof Backbone.Collection).toBeTruthy() 
```

如果您要进行`instanceof`大量检查和/或关心描述性 Jasmine 输出，则值得制作一个自定义匹配器，以便您可以编写以下代码：

```
expect(@collection).toBeInstanceOf(Backbone.Collection) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T11:49:23.507

在 Jasmine 2.0 中，您可以使用`jasmine.any()`匹配器。例如：

```
collection = new SI.PaginatedCollection();

expect(collection).toEqual(jasmine.any(Backbone.Collection)); 
```

正如[这篇博文中提到的](http://filimanjaro.com/2014/jasmine-test-objects-type/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:31:45.870

没有正确的方法来获取`super`引用，在 JavaScript 中也没有在 Backbone 中，即使[文档](http://documentcloud.github.com/backbone/#Model-extend)不建议[使用`__super__`Backbone 方法](https://stackoverflow.com/a/8971058/316700)。

我认为最干净的方法是使用*伪静态*属性手动*标记*您的子类，例如：

 *```
var SI.PaginatedCollection = Backbone.Collection.extend({
  parent: "Backbone.Collection"
}); 
```

任何时候您需要检查实例是否来自特定父级，只需检查`myInstance.parent`.*

# html - 将摄氏度符号编码到网页中的最佳方法？

> ID：10797686
> 
> 赞同：89
> 
> 时间：2012-05-29T10:52:01.407
> 
> 标签：html, symbols

我应该如何将特殊字符编码到网页中？例如我需要这个符号℃，我只是通过复制和粘贴我现在看到的字符来使用它。这适用于我检查过的桌面浏览器以及 iPad 和 iPhone，但我用于测试的黑莓上没有显示任何内容。有没有标准的最佳实践？

[http://www.fileformat.info/info/unicode/char/2103/browsertest.htm](http://www.fileformat.info/info/unicode/char/2103/browsertest.htm)

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-05-29T11:02:45.940

正如 Martin 建议的那样，尝试将其替换为`&deg;`, 并将字符集设置为 utf-8。

`&deg;C`会给你这样的东西：

![摄氏度](../Images/62bd6115cdf29931940d356970a5c31a.png)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-29T13:07:56.083

如果你真的想使用摄氏度字符“℃”，那么复制和粘贴是可以的，只要你的文档是 UTF-8 编码并在 HTTP 标头中声明为这样。使用字符引用`&#x2103;`同样可以很好地工作，并且可以独立于字符编码工作，但是源代码的可读性要差得多。

黑莓的问题很可能是字体问题。我不知道 Blackberry 上的字体，但字体库可能是有限的。在 HTML 中您无能为力，但您可以使用 CSS，可能与`@font face`.

但是很少有任何理由使用摄氏温度。它是一个兼容字符，由于它在东亚文字中的使用而包含在 Unicode 中。[Unicode 标准在第 15 章](http://www.unicode.org/versions/Unicode6.1.0/ch15.pdf)（第 15.2 节，第 497 页）中明确指出：

“在正常使用中，最好用 U+00B0 度符号 + U+0043 拉丁大写字母 c 的序列来表示摄氏度‘°C’，而不是 U+2103 摄氏度。”</p>

度数符号“°”可以通过多种方式输入，包括实体引用`°，但通常最好将其作为字符插入，通过复制和粘贴或其他方式。在 Windows 上，您可以使用 Alt 0176。

警告：一些浏览器可能会将度数符号视为允许在它之后换行，即使没有空格介入，将“°”和后面的“C”放在不同的行上。有[不同的方法可以防止这种情况](http://www.cs.tut.fi/~jkorpela/html/nobr.html)。一个简单有效的方法是这样的：`<nobr>42 °C</nobr>`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-10-12T09:18:34.153

在字母“o”和大写字母“C”上使用[sup](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/sup)

```
<sup>o</sup>C
```

应该适用于所有浏览器和 IE6+

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-11-25T04:26:36.510

我不知道为什么这还没有出现，但你为什么不分别使用`&#8451;`(℃) 或`&#8457;`(℉) 表示摄氏和华氏！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-29T10:54:25.460

将元标记添加到您的标题

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

这扩大了您可以使用的字符数量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-18T09:56:03.067

1.  度数符号属于*数字*，而不是“C”。您可以将度数符号视为数字符号，就像减号一样。
2.  数字与度数符号之间不得*有空格。*
3.  度数符号和“C”之间*应有*一个不间断的空格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-05T18:37:12.137

如果使用 Java-JSP，对我有用的是在 JSP 页面下面粘贴

```
<%@ page contentType="text/html; charset=UTF-8" %> 
```

# bash - 如何从 jsp 页面运行 bash 脚本？（所有都在我的网络应用程序的 .war 文件中）

> ID：10797687
> 
> 赞同：0
> 
> 时间：2012-05-29T10:52:01.503
> 
> 标签：bash, jakarta-ee, executable, war

我的 .war 文件中有一个 bash 脚本，我想调用它从我的网页（可能是 jsp）运行。我该怎么做？bash 脚本使用 root 权限。我将使用 gksudo 调用它。可以这样做吗？.war 文件可写吗？我使用 Tomcat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:13:24.967

我认为[.war 文件](http://www.beanshell.org/bshservlet.html)是 Beanshell 项目的一部分，并且 .war 能够在 Java 代码中运行 Beanshell 脚本，这意味着您几乎可以做任何事情。

可能有更好的方法可以做到这一点，但这是我现在所知道的。

# ios - 如何在 mapKit 框架中使用自定义图标？

> ID：10797689
> 
> 赞同：9
> 
> 时间：2012-05-29T10:52:16.540
> 
> 标签：ios, mapkit

我正在使用 MapKit 框架在我的应用程序上加载谷歌地图，并将地图放置在 4 个“模拟”位置，如下所示：

```
- (void)viewDidLoad {

[super viewDidLoad];

mapView.delegate = self;

mapView.showsUserLocation = YES;

MKUserLocation *userLocation = mapView.userLocation;

MKCoordinateRegion region =
MKCoordinateRegionMakeWithDistance (userLocation.location.coordinate,500,500);
[mapView setRegion:region animated:NO];

//Simulated annotations on the map
CLLocationCoordinate2D poi1Coord , poi2Coord , poi3Coord , poi4Coord;
//poi1 coordinates
poi1Coord.latitude = 37.78754;
poi1Coord.longitude = -122.40718;
//poi2 coordinates
poi2Coord.latitude = 37.78615;
poi2Coord.longitude = -122.41040;
//poi3 coordinates
poi3Coord.latitude = 37.78472;
poi3Coord.longitude = -122.40516;
//poi4 coordinates
poi4Coord.latitude = 37.78866;
poi4Coord.longitude = -122.40623;

MKPointAnnotation *poi1 = [[MKPointAnnotation alloc] init];
MKPointAnnotation *poi2 = [[MKPointAnnotation alloc] init];
MKPointAnnotation *poi3 = [[MKPointAnnotation alloc] init]; 
MKPointAnnotation *poi4 = [[MKPointAnnotation alloc] init];

poi1.coordinate = poi1Coord;
poi2.coordinate = poi2Coord;
poi3.coordinate = poi3Coord;
poi4.coordinate = poi4Coord;

poi1.title = @"McDonald's";
poi1.subtitle = @"Best burgers in town";
poi2.title = @"Apple store";
poi2.subtitle = @"Iphone on sales..";
poi3.title = @"Microsoft";
poi3.subtitle = @"Microsoft's headquarters";
poi4.title = @"Post office";
poi4.subtitle = @"You got mail!";

[mapView addAnnotation:poi1];
[mapView addAnnotation:poi2];
[mapView addAnnotation:poi3];
[mapView addAnnotation:poi4]; 
```

}

代码相当简单。我想做的不是在我的谷歌地图上使用典型的红色别针，而是使用我自己的图像来显示不同的地方。有没有一种简单/直接的方法可以做到这一点，因为我对我已经找到的样本感到很困惑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T13:02:14.897

您可以使用以下代码更改注释图像，

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{
    if ([[annotation title] isEqualToString:@"Current Location"]) {    
        return nil;
    }

    MKAnnotationView *annView = [[MKAnnotationView alloc ] initWithAnnotation:annotation reuseIdentifier:@"currentloc"];
    if ([[annotation title] isEqualToString:@"McDonald's"])
         annView.image = [ UIImage imageNamed:@"mcdonalds.png" ];
    else if ([[annotation title] isEqualToString:@"Apple store"])
         annView.image = [ UIImage imageNamed:@"applestore.png" ];
    else
         annView.image = [ UIImage imageNamed:@"marker.png" ];
    UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];   
    [infoButton addTarget:self action:@selector(showDetailsView) 
             forControlEvents:UIControlEventTouchUpInside];
    annView.rightCalloutAccessoryView = infoButton;
    annView.canShowCallout = YES;
    return annView;
} 
```

其中“marker.png”是您的图像文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-21T09:02:28.960

斯威夫特 4 和 5：

```
 func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -> MKAnnotationView? {
        // Check for type here, not for the Title!!!
        guard !(annotation is MKUserLocation) else {
            // we do not want to return a custom View for the User Location
            return nil
        }
        let identifier = "Identifier for this annotation"
        let annotationView = MKAnnotationView(annotation: annotation, reuseIdentifier: identifier)
        annotationView.image = UIImage(named: "MyMapIcon")
        annotationView.frame = CGRect(x: 0, y: 0, width: 25, height: 25)

        annotationView.canShowCallout = false
        return annotationView
    } 
```

# visual-studio-2010 - 数据读取器与指定的不兼容...类型的成员“已完成”在数据读取器中没有对应的列

> ID：10797693
> 
> 赞同：2
> 
> 时间：2012-05-29T10:52:36.850
> 
> 标签：visual-studio-2010, sql-server-2008, entity-framework, model, entity

我在我的 Sql Server Db 中添加了一个列，然后在 VS 中我从数据库更新了模型，有一个模板自动生成了一些代码。

代码编译得很好，但是当我尝试访问数据库时，会出现以下错误：

> 数据读取器与指定的“CompassModel.tbSalesContract”不兼容。类型的成员“Finalized”在数据读取器中没有同名的对应列。

Finalized 是我添加到我的数据库中的新列。

有谁知道如何追踪这一点，如果是这样，将来是否有解决方法或方法可以避免？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T12:09:41.197

如果您使用的是 SP 然后更新新添加的列，或者如果您使用的是内联查询，则输入新添加列的确切名称。您所说的模板不包含新添加的列名..尝试编辑模板..问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T10:29:07.293

如果您使用的是 SP，请确保使用的别名.. 即。例如：它应该写成

字段名作为“别名”

谢谢，克里斯托马斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T01:28:50.733

希望这对某人有所帮助，但是当我收到此错误时，我试图从存储过程中返回实体类型。

为了解决这个问题，我必须添加正确的函数导入映射。在您的 edmx 中，转到模型浏览器视图并导航到函数导入。右键单击您的存储过程名称并选择函数导入映射。在那里，您可以将存储过程返回结果映射到适当的实体属性。

# groovy - groovy 初学者 - 如何在 groovy shell 中从内存中删除变量

> ID：10797700
> 
> 赞同：6
> 
> 时间：2012-05-29T10:53:09.097
> 
> 标签：groovy, groovyshell

我在 Groovy shell 中看不到任何从内存中删除变量的方法……这可能吗？我该怎么做呢？我可以在 Beanshell 和 Javascript(Rhino) 中看到执行此操作的方法，但在 Groovy 中看不到。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T11:04:25.410

我相信你可以做到：

```
binding.variables.remove 'varname' 
```

或者，如果要删除所有变量，则

```
purge variables 
```

应该也可以

# php - 使用 php 和 mysql 迭代 PDO 查询

> ID：10797703
> 
> 赞同：0
> 
> 时间：2012-05-29T10:53:15.713
> 
> 标签：php, mysql, database, pdo

我有这个我无法弄清楚的问题，我以这种方式查询数据库：

```
$stmt = $this->pdo->prepare('SELECT customer_name FROM active_users WHERE a_id= ?');
$stmt->execute(array($a_id));
$c_name = $stmt->fetch(PDO::FETCH_OBJ);
API::writeToLog('CMD=leave , Customer_Name = ' . $c_name->customer_name, $customer_name); 
```

这： $c_name->customer_name 给出以下错误：

```
Notice: Trying to get property of non-object 
```

如何迭代我的数据库， fetch 和 fetchAll 有什么区别？我应该使用哪个？

这是数据库架构：

```
+---------------+--------------+------+-----+---------+-------+
| Field         | Type         | Null | Key | Default | Extra |
+---------------+--------------+------+-----+---------+-------+
| a_id          | varchar(40)  | NO   | PRI | NULL    |       |
| token         | varchar(64)  | NO   |     | NULL    |       |
| nick          | varchar(255) | NO   |     | NULL    |       |
| ip            | varchar(32)  | NO   |     | NULL    |       |
| customer_name | varchar(255) | YES  |     | NULL    |       |
+---------------+--------------+------+-----+---------+-------+ 
```

谢谢！

编辑：修正了一个错字..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:58:24.083

您应该添加一个 if 条件来检查记录是否存在。

```
$stmt = $this->pdo->prepare('SELECT customer_name FROM active_users WHERE udid = ?');
$stmt->execute(array($udid));
if ($c_name = $stmt->fetch(PDO::FETCH_OBJ)) {
  API::writeToLog('CMD=leave , Customer_Name = ' . $c_name->customer_name, $customer_name);
} 
```

对于[fetchAll](http://www.php.net/manual/en/pdostatement.fetchall.php)，它一次返回所有记录。

正如@Darragh 指出的那样，您的`$c_name`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:00:12.027

错字？不应该`$cname->customer_name`代替`$c_name->customer_name`吗？

**编辑**

具体来说，您将返回对象分配给`$cname`：

```
$cname = $stmt->fetch(PDO::FETCH_OBJ); 
```

但你指`$c_name`的是下一行：

```
API::writeToLog('CMD=leave , Customer_Name = ' . $c_name->customer_name, $customer_name); 
```

# php - REST PHP API：Restler 或 APIFY

> ID：10797704
> 
> 赞同：0
> 
> 时间：2012-05-29T10:53:15.867
> 
> 标签：php, rest, restler

REST API、Restler 或 Apify 之间的最佳选择应该是什么？哪个更安全、更可扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T00:49:53.567

我已经基于 Restler 构建了一个相当大的 API。

开发人员反应迅速，即使社区可能更小，而且 imo 它“上手更简单”......我实际上查看了 apify 并且因为它“太灵活”而被关闭了感觉（对我个人而言）就像它试图勾选太多的框，这使得它对我的口味来说太复杂了......据我所知，你甚至可以使用 apify 为整个 Web 应用程序提供服务，具有完整的 MVC 结构等......这不是我要找的东西......所以我去了restler......

在 restler 中，您可以快速转换代码或开始编码，并且非常容易地将其公开为 API。据说某个新版本正在制作中，并且在很多方面都会有很大的改进，尽管如此，我今天感觉restler的方式还是很“裸露”的......

我不想在做事的方式上受到限制，例如与数据库交谈或分页等。在我的情况下，这些事情与我现有的数据库库以及分页和缓存机制相关联继承自我的旧版非 api 应用程序。

总之，我认为 apify 在某些方面可能“更完整”，但它不是我想要的，恰恰相反。我也觉得我今天可以很容易地将我的所有或几乎所有代码移植到 apify，因为我的代码本身都包含在类和函数中。刚才又看了一遍apify，还是觉得“臃肿”？（也许不是性能明智，但对我作为开发人员来说感觉有点臃肿，有点像厨房水槽 - 什么都可以......）

AFAIK restler 也是开源的，所以两者都在同一个地方。IIRC restler 基于另一个较小的框架。我喜欢restler非常小而且简单并且“完成工作”......我不想要一个PHP框架a la codeigniter / Symphony等，我只是想要一些东西来帮助以安全的形式将功能公开为API，与不同的权限、身份验证、电子访问级别等。

我总是对其他建议持开放态度！

编辑：这个网站在查看其他选项时可能很有用...... [http://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for-php/](http://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for-php/) FRAPI 是一个接近的第二选择，但我认为以我想要的方式获得我想要的一切有点太复杂了......我建议你尝试几个小时，然后看看你在哪里更有宾至如归的感觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:57:43.443

我赞成 apify 的更大的开发者和贡献者基础。开源通常是安全的，您的应用程序的实际安全性将取决于您的实现。这同样适用于可扩展性。如果服务器端的实现是正确的，我认为所有提到的解决方案都可以平等地扩展。

# javascript - 如何整合和 ？这是 jsFiddle 是否有可能让表格像选择一样做出反应？我需要制作产品列表，用户选择一个元素，然后从该表中发送值？将 放在 <select>中并不是我想要的，因为我无法像我希望的那样显示多个列！我不想使用任何 jquery 或类似的东西，因为我需要让它尽可能简单！假设我明白了，你需要做的是将每一行包装在锚标签中，并将 onclick 方法设置为你需要的东西 ID：10797705 赞同：0 时间：2012-05-29T10:53:22.043 标签：javascript, php, css, html-table 回答 #1 赞同：0 时间：2012-05-29T10:57:42.197 假设我明白了，你需要做的是将每一行包装在锚标签中，并将 onclick 方法设置为你需要的东西</select>

# cmd - 批处理文件中的字符串操作

> ID：10797707
> 
> 赞同：0
> 
> 时间：2012-05-29T10:53:38.013
> 
> 标签：cmd, batch-file

我有一个批处理文件问题

```
Set "filename=C:\Documents\Example.doc" 
```

我有一个字符串 %FILENAME%，我想用 C::\ 替换 C:\，而不只是重新定义它，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:48:44.673

我不确定您想在这里实现什么，并且将所有 set 命令放在引号中的变体很尴尬，尽管有效，但无论如何：

```
SET filename=%filename:C:\=C::\% 
```

或者，您只需`%filename:C:\=C::\%`在需要其他值的地方使用表达式，而不实际更改`Filename`变量的内容。

有关更多详细信息，请参阅（的输出）`SET /?`。

# r - 如何在r中制作多个图？

> ID：10797708
> 
> 赞同：0
> 
> 时间：2012-05-29T10:53:40.870
> 
> 标签：r, graph, scatter-plot

我有一个大矩阵`mdat`（1000 行和 16 列）包含第一列作为`x`变量，其他列作为`y`变量。我想要做的是在 R 中制作散点图，在同一个窗口上有 15 个数字。例如：

```
mdat <- matrix(c(1:50), nrow = 10, ncol=5) 
```

在上面的矩阵中，我有 10 行和 5 列。是否可以将第一列用作 x 轴上的变量，将其他列用作 y 轴上的变量，以便在同一个窗口上有四个不同的散点图？请记住，我***不会***喜欢`par(mfrow=`，因为在这种情况下，我必须运行每个图形，然后在同一个窗口上生成它们。我需要的是一个包，这样我就可以只给它数据和变量`x`，`y`并在同一个窗口上显示图表。是否有一些可用的软件包可以做到这一点？我找不到一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:13:03.880

也许最简单的基本 R 方式是`mfrow`（或`mfcol`）

```
par(mfrow = c(2, 2)) ## the window will have 2 rows and 2 columns of plots
for (i in 2:ncol(mdat)) plot(mdat[, 1], mdat[, i]) 
```

查看`?par`您可能想了解的有关进一步调整的所有信息。

base R 中的另一个不错的选择是`layout`（帮助有一些很好的例子）。为了美观和美观，您可以使用该`ggplot2`包，但您需要将数据重新整形为长格式。

```
require(ggplot2)
require(reshape2)
molten <- melt(as.data.frame(mdat), id = "V1")

ggplot(molten, aes(x = V1, y = value)) +
    facet_wrap(~ variable, nrow = 2) +
    geom_point() 
```

或者使用颜色而不是刻面：

```
ggplot(molten, aes(x = V1, y = value, color = variable)) +
    geom_point() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:28:42.927

@user4299 您可以以这种形式重新编写 shujaa 的`ggplot`命令，使用`qplot`这意味着“快速绘图”，这在开始时更容易。然后代替刻面，用于`variable`驱动颜色。因此，第一个命令产生与 shujaa 的答案相同的输出，然后第二个命令为您提供一个绘图上的所有线条，具有不同的颜色和一个图例。

```
qplot(data = molten, x = V1, y = value, facets = . ~ variable, geom = "point")
qplot(data = molten, x = V1, y = value, color = variable, geom = "point") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T15:21:02.477

也许

```
library(lattice)
x = mdat[,1]; y = mdat[,-1]
df = data.frame(X = x, Y = as.vector(y),
                Grp = factor(rep(seq_len(ncol(y)), each=length(x))))
xyplot(Y ~ X | Grp, df) 
```

# c# - 来自 C# 应用程序的 git

> ID：10797711
> 
> 赞同：3
> 
> 时间：2012-05-29T10:53:45.600
> 
> 标签：c#, git, open-source

目前正在编写一个 C# 应用程序，它应该在后台使用 GIT 进行备份。我正在寻找不显示任何 GUI 或 bash shell 的项目或示例。

当通过 GitSharp 搜索交叉时 - [https://github.com/henon/GitSharp](https://github.com/henon/GitSharp)。它似乎接近我所寻找的但它没有激活..（请参阅 pull req'）

希望获得有关开源项目或源代码的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:03:15.470

[libgit2sharp](https://github.com/libgit2/libgit2sharp)`libgit2`是用于 Windows 客户端的官方 GitHub 的C# 绑定。他们应该是体面的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:36:51.907

试试[ngit](https://github.com/mono/ngit)，它有更好的代码库，但没有像样的文档

# facebook - 在 dotnetopenauth 4 中指定请求参数

> ID：10797714
> 
> 赞同：1
> 
> 时间：2012-05-29T10:54:03.593
> 
> 标签：facebook, oauth, dotnetopenauth

在执行 OAuth 时，我需要让 Facebook 显示“登录到 Facebook”提示，而不是“转到应用程序”操作。为此，我需要在请求中指定“display=popup”。

使用他们的 WebServerClient 对象使用 DotNetOpenAuth 4 执行 OAuth 时，我该怎么做？

在以前的版本中，PrepareRequestUserAuthorization 中似乎有一个 requestParameters 参数，但现在它只需要一个 IEnumerable 列表范围。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T23:00:53.853

将`display=popup`查询参数添加到您设置的 URL `AuthorizationServerDescription.AuthorizationEndpoint`。

# c++ - 'char* strncpy(char*, const char*, size_t)' 函数的参数太少是什么意思？

> ID：10797717
> 
> 赞同：-3
> 
> 时间：2012-05-29T10:54:06.180
> 
> 标签：c++, compiler-errors

我正在用 c++ 编码，非常简单的东西。

```
using namespace std;

int main(){
    char cName[30], cFirst[15], cSur[30];

    cout << "Enter your name: " << endl;
    cin.getline(cName, 29);

    for( int i = 0; i < 29; i++)
      if(cName[i] == ' ')
       break;

    strncpy(cFirst, cName, i);

    cFirst[i] = '\0';
    strncpy(cSur,cName + i + 1);
    cSur[i] = '\0';
    cout << cSur << endl;
    return 0;
} 
```

但是，程序停止编译`strncpy(cFirst, cName, i);`并且我收到此错误消息 'too few arguments to function 'char* strncpy(char*, const char*, size_t)' 。有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T10:56:13.623

`strncpy()`接受三个参数，在第二个调用中只提供两个：

```
strncpy(cSur,cName + i + 1); 
```

由于这是 C++，请考虑使用`std::string`代替`char[]`（或`char*`）。有一个版本[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)将 a`std::string`作为参数并填充它，从而不再需要固定长度的数组。然后，您可以使用[`std::string::find()`](http://en.cppreference.com/w/cpp/string/basic_string/find)and[`std::string::substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)将该行拆分为名字和姓氏：

```
std::string full_name("john prog rammer");

const size_t first_space_idx =  full_name.find(' ');
if (std::string::npos != first_space_idx)
{
    const std::string first_name(full_name.substr(0, first_space_idx));
    const std::string surname(full_name.substr(first_space_idx + 1));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T10:56:18.077

如果你问我，这很清楚地意味着你只提供了 2 个参数而不是 3 个：

```
strncpy(cSur,cName + i + 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T10:57:27.597

它抱怨它接受了 3 个参数，但你没有提供 3 个参数。

会是这条线：

```
strncpy(cSur,cName + i + 1); 
```

在这里，您只提供 2，因为您将 i 和 1 添加到 cName

# postgresql - PostgreSQL - 如何在不同时区呈现日期？

> ID：10797720
> 
> 赞同：30
> 
> 时间：2012-05-29T10:54:15.423
> 
> 标签：postgresql, datetime, timezone

我的服务器在中部时间。我想使用东部时间呈现时间戳。

例如，我想渲染`2012-05-29 15:00:00`为`2012-05-29 16:00:00 EDT`.

我怎样才能实现它？

`to_char('2012-05-29 15:00:00'::timestamptz at time zone 'EST5EDT', 'YYYY-MM-DD HH24:MI:SS TZ')`给出`2012-05-29 16:00:00`（无区域）。

`to_char('2012-05-29 15:00:00'::timestamp at time zone 'EST5EDT', 'YYYY-MM-DD HH24:MI:SS TZ')`给出`2012-05-29 14:00:00 CDT`（错误的）。

这个可行，但它非常复杂，必须有一种更简单的方法：`replace(replace(to_char(('2012-05-29 15:00:00'::timestamptz at time zone 'EST5EDT')::timestamptz, 'YYYY-MM-DD HH24:MI:SS TZ'), 'CST', 'EST'), 'CDT', 'EDT')`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-29T15:21:31.517

关键是在事务期间将本地时区切换到所需的显示时区：

```
begin;
set local timezone to 'EST5EDT';
select to_char('2012-05-29 15:00:00'::timestamp at time zone 'CDT',
  'YYYY-MM-DD HH24:MI:SS TZ');
end; 
```

结果是：

> 2012-05-29 16:00:00 美国东部时间

请注意，`set [local] timezone`需要使用完整的时区名称而不是缩写（例如，CST 不起作用）。在`pg_timezone_names`视图中查找有效选择。

要在类似于 to_char() 调用的上下文中使用该方法，我相信这个函数可以完成这项工作：

```
CREATE FUNCTION display_in_other_tz(
      in_t timestamptz,
      in_tzname text,
      in_fmt text) RETURNS text
AS $$
DECLARE
 v text;
 save_tz text;
BEGIN
  SHOW timezone into save_tz;
  EXECUTE 'SET local timezone to ' || quote_literal(in_tzname);
  SELECT to_char(in_t, in_fmt) INTO v;
  EXECUTE 'SET local timezone to ' || quote_literal(save_tz);
  RETURN v;
END;
$$ language plpgsql; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T11:21:13.427

> 事实上，PG 知道这一切 - to_char(x, 'TZ') 正确区分 CST 和 CDT，并且在时区 EST5EDT 也尊重 DST。

在处理时间戳时，Postgres 知道：

*   GUC 的设置[`timezone`](http://www.postgresql.org/docs/current/interactive/runtime-config-client.html#GUC-TIMEZONE)。
*   数据[类型](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)。
*   *值*，与 和的'1970-1-1 0:0 UTC' 以来的秒数`timestamp`相同`timestamptz`。（或者，准确地说：UT1。）
*   [日期/时间配置文件](http://www.postgresql.org/docs/current/interactive/datetime-config-files.html)中有关其他时区的详细信息

在解释输入时，Postgres 使用有关提供的时区的信息。渲染时间戳值时，Postgres 使用*当前* `timezone`设置，但时区*偏移量*、*缩写*或*名称*仅用于计算输入的正确*值*。他们**没有得救**。**以后不可能**提取该信息。[此相关答案](https://stackoverflow.com/a/9576170/939860)中的更多详细信息：

您的“正确”示例***几乎***是正确的。`TZ`的`to_char()`返回“CDT”的时间戳落在中央时间的夏令时和“CST”其他时间。东部时间（`EST`/ ）在同一**本地**`EDT`时间切换夏令时 - 我引用维基百科：

 **> 时间调整为当地时间凌晨 2:00。

这两个时区每年有两个小时**不同步。**当然，这永远不会影响`15:00`或的时间戳`16:00`，只会影响`02:00`。

一个完全正确的解决方案 - 就像@Daniel 已经发布的一样，稍微简化：

```
BEGIN;
SET LOCAL timezone to 'EST5EDT';
SELECT to_char('2012-05-29 15:00 CST6CDT'::timestamptz
             , 'YYYY-MM-DD HH24:MI:SS TZ')
RESET timezone;  -- only if more commands follow in this transactions
END; 
```

> SET LOCAL 的效果只持续到当前事务结束。

[关于`SET LOCAL`.](http://www.postgresql.org/docs/current/interactive/sql-set.html)**

# asp.net-mvc-3 - MVC 3 将模型属性绑定到 2 个字段（例如其他标题）

> ID：10797721
> 
> 赞同：1
> 
> 时间：2012-05-29T10:54:17.537
> 
> 标签：asp.net-mvc-3, model-view-controller, model-binding

I'm trying to achieve a very common scenario whereas given a list of options to choose from, the last one says "Other" and when selected the user is presented with the input field to specify what "other" is.

在我的例子中，它是一个人的头衔列表：

```
public List<string> TitleList
{
    get
    {
        return new List<string> { "Mr", "Mrs", "Miss", "Dr", "Other" };
    }
} 
```

我想要做的是：

`@Html.DropDownListFor(m => m.Title, new SelectList(Model.TitleList), "Please select...") @Html.TextBoxFor(m => m.Title)`

我希望模型在 DropDownLis 中选择“Other”时绑定 TextBox 值，并在所有其他情况下绑定到 DropDownList 中的选定项目。

这是否可以在不在模型上添加额外属性的情况下实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:34:17.573

更好的解决方案**不是**绑定到两个字段，而是使用一些巧妙的 javascript 将下拉列表中的选定项目复制到绑定文本框中：

```
@Html.DropDownList("ddlTitle", new SelectList(Model.TitleList), "Please select")
@Html.TextBoxFor(m => m.Title, new { maxLength = 10 }) 
```

Javascript：

```
ToggleTitleFields = function () {
    var title, txtTitle;
    title = $('select#ddlTitle').val();
    txtTitle = $('input#Title');
    if (title === "Other") {
        txtTitle.val("");
        txtTitle.show();
        return txtTitle.focus();
    } else {
        txtTitle.hide();
        txtTitle.val(title);
        return $('span[data-valmsg-for="Title"]').empty();
    }
};

$(document).on("change", "select#ddlTitle", function(e) {
    return ToggleTitleFields();
}); 
```

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:01:50.247

找到了客户端解决方案：从 DropDownList 添加/删除“名称”属性。这是我的咖啡脚本：

```
ToggleTitleFields = () ->
    if $('select#Title').val() == "Other"
        $('select#Title').removeAttr('name')
    else
        $('select#Title').attr('name','Title') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:02:03.680

沙皇，

老实说，这不是我以前必须处理的情况，但仍然是一个很好的情况。如果我面临这种困境并被允许使用 javascript 解决方案，我会在选择其他时显示一个以前“隐藏”的文本框。然后，用户必须在这个 texbox 中输入新值，失去焦点时它将填充选择列表并被选中。然后，当提交表单时，您将拥有这个新值仍然作为现有模型的一部分。

当然，您也可以在选择其他时执行类似的逻辑来显示文本框，但这次，在 httpost 控制器操作上执行一些逻辑以确定是否选择了“其他”项目，然后从“文本框”填充模型价值。

当然，这两种情况都需要大量验证，但原则上，任何一种方法都“有效”

# javascript - 为什么这里需要 $root ？

> ID：10797728
> 
> 赞同：12
> 
> 时间：2012-05-29T10:54:28.300
> 
> 标签：javascript, knockout.js

我只是指来自 knockout.js 的教程：

[http://learn.knockoutjs.com/#/?tutorial=webmail](http://learn.knockoutjs.com/#/?tutorial=webmail)

在 UI 中，标记为：

```
<!-- Folders -->
<ul class="folders" data-bind="foreach: folders">
    <li data-bind="text: $data,
                   css: { selected: $data == $root.chosenFolderId() },
                   click: $root.goToFolder"></li>
</ul> 
```

它的 ViewModel 是：

```
function WebmailViewModel() {
    // Data
    var self = this;
    self.folders = ['Inbox', 'Archive', 'Sent', 'Spam'];
    self.chosenFolderId = ko.observable();

    // Behaviours    
    self.goToFolder = function(folder) { self.chosenFolderId(folder); };    
};

ko.applyBindings(new WebmailViewModel()); 
```

谁能告诉我什么是 $root 以及为什么需要它？如果我删除它，它就不起作用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-29T10:59:44.410

`$root`指 KnockoutJS 层次结构中的顶级模型（您在 中使用的模型`.applyBindings`）。在您的情况下`WebmailViewModel`，对象是`$root`.

这是必需的，因为当您`foreach`在循环内使用 then 时，上下文会发生变化。您要在此处触发的所有内容都与循环中的元素相关联。因此，您需要`$root`使用在该上下文之外定义的函数/字段（在您的情况下`chosenFolderId`是`WebmailViewModel`对象的方法）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T11:01:23.817

您需要查看[绑定上下文](http://knockoutjs.com/documentation/binding-context.html)页面。

> **$根**
> 
> 这是根上下文中的主视图模型对象，即最顶层的父上下文。它相当于**$parents[$parents.length - 1]。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T11:22:15.137

无论循环或范围内的`$root`其他变化如何，上下文始终引用顶级 ViewModel。这允许我们访问用于操作 ViewModel 的顶级方法。

在您的示例`$data`中，表示文件夹数组值，例如“收件箱”、“存档”、“已发送”和“垃圾邮件”。但`$root`代表 ViewModel 的根函数，如`chosenFolderId`和`goToFolder`。

请参阅[http://www.dotnet-tricks.com/Tutorial/knockout/bSKG240313-Understanding-Knockout-Binding-Context-Variable.html](http://www.dotnet-tricks.com/Tutorial/knockout/bSKG240313-Understanding-Knockout-Binding-Context-Variable.html)

我认为此链接示例将对您有所帮助。

# c++ - getopt_long 没有正确处理我的论点

> ID：10797731
> 
> 赞同：0
> 
> 时间：2012-05-29T10:54:35.493
> 
> 标签：c++, getopt-long

```
int next_option;
int keep_content =0;
int option_index = 0;
const string short_options = "c::";

 const struct option long_options[] = 
{ 

    {"config", optional_argument, NULL, 'c'},
    {"keep", no_argument, &keep_content, 1},
    { NULL,0, NULL, 0}
};

while((next_option = getopt_long(argc,argv,short_options.c_str(),long_options,&option_index))!= -1)
{
    cout << "name: " << long_options[option_index].name  << " " << "value: " << optarg << endl;
    cout << "keep_content: " << keep_content << endl;
} 
```

我有上面的代码，我正在尝试测试参数和切换解析。进行了以下测试：

```
a.out -chey  --> name: config value: hey  //which is correct 
a.out -c hey  --> name:  value:           //what's wrong?
a.out --confighey  --> name:  value:      //what's wrong?
a.out --config hey  --> name:  value:     //what's wrong?
a.out -chey --keep  --> name: config value: hey  keep_content: 0 // what's wrong? keep_content should be 1 
```

你能帮我理解正确的用法吗？我究竟做错了什么？

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:43:41.553

您期待一个可选参数并根据`man 3 getopt`：

> optstring 是一个包含合法选项字符的字符串。如果这样的字符后跟一个冒号，则该选项需要一个参数，因此 getopt() 将指向同一 argv 元素中的以下文本的指针，或 optarg 中的以下 argv 元素的文本。 **两个冒号表示一个选项带有一个可选参数；如果当前 argv 元素中有文本（即，与选项名称本身在同一个词中，例如“-oarg”），则在 optarg 中返回，否则 optarg 设置为零。** 这是一个 GNU 扩展。如果 optstring 包含 W 后跟分号，则 -W foo 被视为长选项 --foo。（POSIX.2 为实现扩展保留了 -W 选项。）

# python - 如何使用来自另一个数据帧的输入以最佳方式将函数应用于数据帧的所有项目？

> ID：10797734
> 
> 赞同：3
> 
> 时间：2012-05-29T10:54:38.983
> 
> 标签：python, numpy, pandas

我是 python 新手，我目前正在努力用熊猫做简单的事情。我想将相同的函数应用于给定数据集的每个项目，但使用与时间相关的参数。

我正在使用`DataFrame`以时间戳作为索引的熊猫。

比方说：

> a(i,j) 是数据帧 A 中第 j 列中的第 i 个元素（时间戳/索引 = i 和列 = j）
> 
> b(i) 是数据框 B 中的第 i 个元素（单列）

我想计算：

> c(i, j) = fct(a(i, j), b(i))

其中 fct 是一个有两个参数的函数 z = fct(x, y)

我编写了一个可以正确执行的代码，但它可能不是最佳的（非常慢）。对于示例，我只使用了一个简单的函数 fct（但实际上它更复杂）

输入：

*   df_data：`pandas.DataFrame`索引=时间戳和几列
*   df_parameter：`pandas.DataFrame`1 列包含时间相关参数

这是代码：

```
# p.concat is required as timestamps are not identical in df_data & df_parameters
import numpy as np
import pandas as p

temp = p.concat([df_data, df_parameter], join='inner', axis=1)
index = temp.index
np_data = temp[nacelleWindSpeeds.columns].values
np_parameter = temp[airDensity.columns].values

import math 

def fct(x, y):
    return math.pow(x, y)

def test(np_data, np_parameter):
    np_result = np.empty(np_data.shape, dtype=float)
    it = np.nditer(np_data, flags=['multi_index'])

    while not it.finished:
        np_result[it.multi_index] = fct(it[0].item(),
                                        np_parameter[it.multi_index[0]][0])
        it.iternext()

    df_final=p.DataFrame(data=np_result, index=index)
    return df_final

final=test(np_data, np_parameter)   

final.to_csv(r'C:\temp\test.csv', sep=';') 
```

以下是一些示例数据：

df_data

```
01/03/2010 00:00  ;  9  ;  5  ;  7  
01/03/2010 00:10  ;  9  ;  1  ;  4  
01/03/2010 00:20  ;  5  ;  3  ;  8  
01/03/2010 00:30  ;  7  ;  7  ;  1  
01/03/2010 00:40  ;  8  ;  2  ;  3  
01/03/2010 00:50  ;  0  ;  3  ;  4     
01/03/2010 01:00  ;  4  ;  3  ;  2  
01/03/2010 01:10  ;  6  ;  2  ;  2  
01/03/2010 01:20  ;  6  ;  8  ;  5  
01/03/2010 01:30  ;  7  ;  7  ;  0 
```

df_parameter

```
01/03/2010 00:00  ;  2  
01/03/2010 00:10  ;  5  
01/03/2010 00:20  ;  2  
01/03/2010 00:30  ;  3  
01/03/2010 00:40  ;  0  
01/03/2010 00:50  ;  2  
01/03/2010 01:00  ;  4  
01/03/2010 01:10  ;  3  
01/03/2010 01:20  ;  3  
01/03/2010 01:30  ;  1 
```

最后

```
01/03/2010 00:00  ;  81  ;  25  ;  49  
01/03/2010 00:10  ;  59049  ;  1  ;  1024  
01/03/2010 00:20  ;  25  ;  9  ;  64  
01/03/2010 00:30  ;  343  ;  343  ;  1  
01/03/2010 00:40  ;  1  ;  1  ;  1  
01/03/2010 00:50  ;  0  ;  9  ;  16  
01/03/2010 01:00  ;  256  ;  81  ;  16  
01/03/2010 01:10  ;  216  ;  8  ;  8  
01/03/2010 01:20  ;  216  ;  512  ;  125  
01/03/2010 01:30  ;  7  ;  7  ;  0 
```

非常感谢您的帮助，

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:19:09.620

不知道这是否是最佳方式，但这更简单并且应该更有效，因为它使用矢量化函数进行计算：

```
def func(x, y):
    return x ** y

data = pd.read_csv('data.dat', sep=';', index_col=0, parse_dates=True,
                    header=None, names='abc')
para = pd.read_csv('parameter.dat', sep=';', index_col=0, parse_dates=True,
                    header=None, names=['para'])

for col in data:
    data['%s_result' % col] = func(data[col], para.para)

print data 
```

结果是

```
 a  b  c  a_result  b_result  c_result
2010-01-03 00:00:00  9  5  7        81        25        49
2010-01-03 00:10:00  9  1  4     59049         1      1024
2010-01-03 00:20:00  5  3  8        25         9        64
2010-01-03 00:30:00  7  7  1       343       343         1
2010-01-03 00:40:00  8  2  3         1         1         1
2010-01-03 00:50:00  0  3  4         0         9        16
2010-01-03 01:00:00  4  3  2       256        81        16
2010-01-03 01:10:00  6  2  2       216         8         8
2010-01-03 01:20:00  6  8  5       216       512       125
2010-01-03 01:30:00  7  7  0         7         7         0 
```

如果您的实际功能更复杂，您甚至应该尝试对其进行矢量化或使用[numpy.vectorize()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html)作为下一个最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T13:47:42.163

一种方法是使用该`map`功能，或`numpy.vectorize`; 也可以使用 lambda 函数来实现。例如：

```
import numpy as np
def fct(x, y):
    return x**y

A = np.array([[9, 5, 7],
       [9, 1, 4],
       [5, 3, 8],
       [7, 7, 1],
       [8, 2, 3],
       [0, 3, 4],
       [4, 3, 2],
       [6, 2, 2],
       [6, 8, 5],
       [7, 7, 0]])
B = np.array([2, 5, 2, 3, 0, 2, 4, 3, 3, 1])
C1 = np.asarray(map(fct, A, B))
C2 = np.asarray(map(lambda x,y: x**y, A, B))

vfunc = np.vectorize(fct)
C3 = vfunc(A, np.row_stack(B)) 
```

或通过熊猫：

```
import pandas as pd
pdA = pd.DataFrame(A)
pdB = pd.DataFrame(B)
C4 = np.asarray(map(lambda x,y: x**y, pdA.values, pdB.values))
pdC = pd.DataFrame(C4) 
```

请注意，C1、C2、C3 和 C4 都相等：

```
>>> print np.array_equal(C1,C2), np.array_equal(C2,C3), np.array_equal(C3,C4)
True True True 
```

# mysql - mysql自动增量如何知道删除行后从哪个id继续？

> ID：10797735
> 
> 赞同：2
> 
> 时间：2012-05-29T10:54:45.307
> 
> 标签：mysql, sql, auto-increment

如果我插入行并删除它们，A_I 将知道从什么键继续[我知道的唯一的东西]，但我有兴趣了解进程以及 mysql 将值存储在哪里。只是为了我的私人知识

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:59:30.317

MySQL 在内部维护当前值。

一旦使用了一个值，就永远不会再次使用它。这甚至包括回滚事务中使用的值、失败的插入、删除的记录等。

实际上，如果 MySQL 曾经*尝试*使用 id，计数器会增加，并且 MySQL 将永远不会再次使用这些旧值。这种*天真*使分配唯一值的系统更简单，因此更快，更可靠。

嗯，差不多。您*可以*覆盖它并强制 MySQL 从您选择的任意数量重新开始它的自动递增值。但这*通常*既不必要也不推荐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:57:50.900

如果一个表设置为使用自动增量，它将当前索引存储在一个单独的变量中，每次插入某些东西时该变量都会递增。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:02:08.280

[您可以使用LAST_INSERT_ID](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)函数检索存储的变量。

# python - 获取标签列表并获取 BeautifulSoup 中的属性值

> ID：10797741
> 
> 赞同：1
> 
> 时间：2012-05-29T10:55:15.633
> 
> 标签：python, beautifulsoup

我正在尝试使用 BeautifulSoup 来获取 HTML`<div>`标签列表，然后检查它们是否具有 name 属性，然后返回该属性值。请看我的代码：

```
soup = BeautifulSoup(html) #assume html contains <div> tags with a name attribute
nameTags = soup.findAll('name') 
for n in nameTags:
    if n.has_key('name'):
       #get the value of the name attribute 
```

我的问题是如何获取 name 属性的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T11:03:58.110

使用以下代码，它应该可以工作

```
nameTags = soup.findAll('div',{"name":True})
for n in nameTags:
    # Do your processing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:10:42.037

谢谢大家想通了

```
n['name'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T12:53:35.840

为了将来参考，这里是用作单一答案的代码：

```
soup = BeautifulSoup(html)
nameTags = soup.findAll('div',{"name":True})
for n in nameTags:
    name = n['name']
    # Do your processing 
```

传递第二个参数`{"name":True}`将结果限制为`div`具有`name`属性的标签。如果您正在寻找具有特定标签值的`name`标签，您可以通过`{"name":"specificNameValue"}`

# c++ - 并行化动态数组

> ID：10797745
> 
> 赞同：0
> 
> 时间：2012-05-29T10:55:29.013
> 
> 标签：c++, parallel-processing, neural-network, dynamic-arrays, backpropagation

这是神经网络上反向传播算法代码的一部分。

在我们的例子中，我们想要并行化 for( pt=0; pt< N_PT_pair; pt++) 循环，for(epoch=0; epoch< MaxEpoch; epoch++) 不能并行化。

```
initialize W1[ ] [ ] and W2[ ][ ] with random values
for(epoch=0; epoch<MaxEpoch; epoch++)
     dW1[ ][ ]=0.0; dW2[ ][ ]=0.0; //sum of weight corrections
     sse = 0; // Sum of square of errors
     for( pt=0; pt<N_PT_pair; pt++)
          input = pattern[pt];
          compute output  // procedure as above
          compare target[pt] and output and
          compute dW2[ ][ ] += ... // procedure to be described
          compute dW1[ ][ ] += ... // procedure to be described
          for(k=1; k<=Noutput; k++) 
              sse+=pow((target[pt][k]-output[k]),2);
     end pt for loop   
     cout << "mean square error" << sse/N_PT_pair;
     W1[ ][ ] += rate*dW1[ ][ ]
     W2[ ][ ] += rate*dW2[ ][ ]
end epoch for loop 
```

这些是分配和释放数组的代码

```
double** allocate_matrix(int rows,int cols) 
{    
    double **a;

    a = new double*[rows];    
    if(a==NULL){cout<<"matrix allocation failed"<<endl;exit(-1);}

    for (int j=0;j<rows;j++){   
       a[j] =  new double[cols];
       if(a[j]==NULL) {cout<<"matrix allocation failed"<<endl;exit(-1);}    
    }

    return a;
}

int deallocate_matrix(double**a,int rows)    
{
    for(int i=0;i<rows;i++)
       delete [] a[i];
    delete [ ] a;    
    return 0;
} 
```

你能帮我们并行化代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:28:31.557

如果内部循环中的迭代相互独立，那么您可以简单地从一个 OpenMP 构造开始：

```
#pragma omp parallel for private(input,k) reduction(+:sse)
for( pt=0; pt<N_PT_pair; pt++)
     input = pattern[pt];
     compute output  // procedure as above
     compare target[pt] and output and
     compute dW2[ ][ ] += ... // procedure to be described
     compute dW1[ ][ ] += ... // procedure to be described
     for(k=1; k<=Noutput; k++) 
         sse+=pow((target[pt][k]-output[k]),2);
end pt for loop 
```

`dW1`如果在一次以上的迭代中没有更新或更新任何元素，这将非常`dW2`有用，否则将需要原子访问，这会降低性能（OpenMP 仍然不支持在 C/C++ 中减少数组）。

如果您有大量的网络权重，您也可以以相同的方式并行化乘法。

并行区域可以进一步移到外循环之外，以减少 OpenMP 开销，`single`或者`master`可以使用 OpenMP 指令来隔离只应在单个线程中运行的代码。

为了让编译器理解`#pragma omp`指令，您必须启用 OpenMP 支持。具体如何完成取决于编译器：

*   `-fopenmp`海合会
*   `-openmp`用于英特尔 C/C++ 编译器
*   `-xopenmp`对于 Oracle Solaris Studio
*   *MS Visual Studio 的*项目属性 -> 等**

# session - 会话处理后流利的 Nhibernate 与实体一起工作

> ID：10797749
> 
> 赞同：1
> 
> 时间：2012-05-29T10:55:48.367
> 
> 标签：session, memory-leaks, fluent-nhibernate, dispose

我有一个关于使用从 db 收到的实体的问题。目前我有很多操作，我需要从数据库中获取实体，并将它们传递给另一个服务。此类代码的简化版本如下所示：

```
List<Entity> list;
using(var session = SessionFactory.OpenSession())
{
    list = Session.QueryOver<Entity>.Future().ToList();
} 
```

所以现在我不知道，如果长时间不释放对象列表，是否会导致内存与存储的会话一致。在会话期间接收到的对象存在时是否存在休眠会话？

**更新**：

找到了一些会话设置 Session.ActiveEntityMode - POCO，它解决了我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:28:37.960

一旦使用结束，会话就会被处理。加载的所有实体仍然有效，除非未初始化延迟加载的集合/引用/属性。

`Session.QueryOver<Entity>.Future().ToList();`此外，当没有其他操作对它们具有 Future/futurevalue 时，Future in也是一个 noop。

# jsf-2 - 从支持 bean 替换托管 bean 实例

> ID：10797752
> 
> 赞同：0
> 
> 时间：2012-05-29T10:56:04.397
> 
> 标签：jsf-2, cdi

做一个 CRUD，我有一个 RequestScoped Ticket bean。

我有一个 XHTML 页面，直到现在我一直在使用它来创建新票证；工单字段直接填充（`#{ticket.description}`依此类推）

现在我有一个列出票的搜索表单，每张票都有一个以票号作为参数的链接。我希望支持 bean 从 EJB/JPA 中检索票证 bean（已经完成）并将其放入请求中。我看到了 3 种方法：

*   将从 JPA 检索到的 bean 中的数据复制到注入提供的 bean 中。丑陋/容易遗漏。
*   使用[ExternalContex#getRequestMap](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestMap())并自己将 bean 放在那里。看起来不太妥当。我对吗？
*   将我的票 bean 包含到另一个 bean 类中，这样我就可以做到`myNewBean.setTicket(ticketFromJpa);`。似乎是最好的选择，但我不喜欢为此在页面中添加所有 EL 前缀。

有没有更清洁、更正确的方法来做我想做的事？

提前致谢。

更新：改写我想要的内容，提供更多信息。我在 page 中有一个 commandLink ，它在 backing bean`P1`中调用 action 。执行其逻辑并重定向到 page 。我想在 action中设置一个（请求范围的）bean ，并且可以用来绘制。`A``B1``B1``P2``B2``A``B2``P2`

从实验中，我发现在离开操作后`A`，框架会创建一个新的`B2`请求范围 bean，所以看起来请求范围比我预期的要短。

Damian 提出的 flash 范围看起来更像我想要的，但迫使我重新设计 #{flash} 周围的页面，并且（当我想使用它来创建新 bean 时）我还必须将 bean 添加到在一个动作方法中闪现（目前它只是转到页面并且托管 bean 可用）

我希望从那时起维护一个请求范围的 bean

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:05:37.120

要在另一个页面中查看票证，您可以执行以下操作之一：
1) 使用 h:link 和包含票证 ID 的 af:param

```
<h:link value="#{ticket.description}" outcome="/viewTicket" >
    <f:param name="id" value="#{ticket.id}" /
</h:link> 
```

然后在 viewTicket.xhtml（或任何您称之为页面的内容）中读取 ID 参数，并从 JPA 获取票证。

这就是托管的基本外观：

```
@ManagedBean
@ViewScoped
public class ViewTicketMBean implements Serializable {

    private String ticketId;
    private Ticket ticket;

    @PostConstruct
    public void init() {
        ticketId = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id");
        // read ticket from JPA by ID
    }

} 
```

2) 如果您不想公开票证 ID，则可以使用 commandLink 代替 h:link，在导航到 viewTicket.xhtml 之前，它会从 JPA 获取票证并将其放入 flash 范围内。然后，在 viewTicket 中，您可以从 flash 范围中获取票证。这就是 commandLink 的 action 方法的样子

```
Ticket ticket = null;
// get ticket from JPA    
FacesContext.getCurrentInstance().getExternalContext().getFlash().put("ticket", ticket);
return "/viewTicket"; 
```

# gwt - 是否可以使用 uibinder 在 GWT 中设置网格的列宽？

> ID：10797753
> 
> 赞同：3
> 
> 时间：2012-05-29T10:56:05.250
> 
> 标签：gwt, uibinder

我正在尝试在 uibinder 中使用 GWT 网格组件。它工作正常，直到我想设置列的宽度。以下是我尝试做的，但它似乎不起作用。

```
 <g:Grid width="100%">
        <g:row>
            <g:customCell width="20%">
                <g:FlowPanel width="">
                </g:FlowPanel>
            </g:customCell>
            <g:customCell width="80%">
                <g:FlowPanel width="">
                </g:FlowPanel>
            </g:customCell>
        </g:row>
    </g:Grid> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T16:13:23.977

为此，您可以编写一些 java 代码，例如：

```
 grid.getColumnFormatter().setWidth(0, "10%");
    grid.getColumnFormatter().setWidth(1, "10%"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T11:07:56.303

仅`styleName`考虑`g:row`,`g:cell`和`g:customCell`元素。

如果可以（即，如果您的网格内容大部分是静态的），请避免使用`Grid`并更喜欢`HTMLPanel`包含 HTML 的内容`<table>`，这将为您提供更大的灵活性。

[http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/user/src/com/google/gwt/uibinder/elementparsers/GridParser.java](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/user/src/com/google/gwt/uibinder/elementparsers/GridParser.java)

# java - 序列化内部类实例

> ID：10797754
> 
> 赞同：0
> 
> 时间：2012-05-29T10:56:12.507
> 
> 标签：java, serialization, inner-classes

是否可以序列化非静态内部类？

如果是，你能提供一个很好的例子。

我通过一些博客和网站搜索，没有答案说服了我。

**编辑：** 内部类有最终静态变量怎么样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T10:59:50.080

> 内部类包含对外部类的隐式引用，因此要使内部类可序列化，其外部类也必须是可序列化的。

**完全来自文档：**

> 出于几个原因，强烈建议不要对内部类（即不是静态成员类的嵌套类）（包括本地和匿名类）进行序列化。因为在非静态上下文中声明的内部类包含对封闭类实例的隐式非瞬态引用，所以序列化这样的内部类实例也会导致其关联的外部类实例的序列化。由 javac（或其他 JavaTM 编译器）生成的用于实现内部类的合成字段是依赖于实现的，并且可能因编译器而异；此类字段的差异可能会破坏兼容性并导致默认 serialVersionUID 值冲突。分配给本地和匿名内部类的名称也取决于实现，并且可能因编译器而异。由于内部类不能声明编译时常量字段以外的静态成员，因此它们不能使用 serialPersistentFields 机制来指定可序列化字段。最后，因为与外部实例关联的内部类没有零参数构造函数（此类内部类的构造函数隐式接受封闭实例作为前置参数），它们无法实现 Externalizable。然而，上面列出的所有问题都不适用于静态成员类。因为与外部实例关联的内部类没有零参数构造函数（此类内部类的构造函数隐式接受封闭实例作为前置参数），它们无法实现 Externalizable。然而，上面列出的所有问题都不适用于静态成员类。因为与外部实例关联的内部类没有零参数构造函数（此类内部类的构造函数隐式接受封闭实例作为前置参数），它们无法实现 Externalizable。然而，上面列出的所有问题都不适用于静态成员类。

所以

> 因为在非静态上下文中声明的内部类包含对封闭类实例的隐式非瞬态引用，所以序列化这样的内部类实例也会导致其关联的外部类实例的序列化。

[资源](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/serialTOC.html)

# java - 来自uart的数据处理

> ID：10797758
> 
> 赞同：0
> 
> 时间：2012-05-29T10:56:26.463
> 
> 标签：java, uart

我被困在为 Java 应用程序编写代码的问题上，该应用程序与外部设备 Uc 连接，该设备从 ADC 的多个通道获取样本并将它们发送回应用程序进行处理和绘图。我的问题是，我不知道如何排序和存储与每个采样通道相对应的样本数据以供以后处理，因为我无法绘制所有数据，比如一次来自 3 个不同的通道。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:41:04.387

1）创建一个全局 int 变量（比如 int eventTimer）并创建一个计时器，该计时器将拥有自己的线程，该线程在每个计时器滴答时增加此 eventTimer。根据采样率设置定时器的周期。

2）为每个通道创建一个映射来存储“读取时间和读取值”，例如：

```
Map<int, float> readingsFromChannel1 = new HashMap<int, float>(); 
```

并且每当您从该频道收到新读数时，将其附加到其地图中，例如：

```
float value; // the value that you just get from channel 1
readingsFromChannel1.put(eventTimer, value); 
```

3）在图形的绘图功能中：

```
// drawing of channel1 data:
iterator it = readingsFromChannel1.iterator();
while(it.next())
{
  Map.Entry m =(Map.Entry)it.next();
  int key=(Integer)m.getKey();
  float value=(float)m.getValue();
  // I assume that you have a putpixel(x,y) method for drawing:
  putPixel(key - eventTimer, value);
} 
```

# android - 如何将 android 4.0 中的渲染脚本作为单独的库在 android 2.x 上运行？

> ID：10797764
> 
> 赞同：1
> 
> 时间：2012-05-29T10:56:59.497
> 
> 标签：android, live-wallpaper, renderscript

Android 4.0 现在提供新的渲染脚本 API。如何将 android 4.0 中的 renderscript 作为单独的库在 android 2.x 上运行？

相关来源：1）相关renderscript java源码可以从[https://github.com/android/platform_frameworks_base/tree/master/graphics/java/android/renderscript](https://github.com/android/platform_frameworks_base/tree/master/graphics/java/android/renderscript) 2）libRS.so和librs_jni.so可以从实现system/lib 文件夹中的任何 android 4.0 rom

希望有人可以提供解决方案，将 android 4.0 渲染脚本作为单独的库用于 android 2.x 系统。

llvm 会将我们的源代码构建为位码。这一步可以，因为我们通过 android sdk 15 构建我们的项目。然后 libbcc 会将位码制作为机器码。这也是我们需要你们帮助的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:25:50.900

正如您所指出的，您可以通过针对 SDK 15 构建来创建字节码。按照 RenderScript 的设计方式，该字节码应该是通用的（理论上），然后由本机编译器程序为每个设备编译。该编译器针对设备的特定细微差别进行定制，最终甚至可能支持 DSP 和 x86 架构等目标，而不仅仅是我们在大多数移动设备中看到的 ARM 设备。我无法确认这是否可行，但如果您可以使用相同的处理器从支持 RenderScript 的设备中提取编译器，您也许可以实现它，尽管我不知道 Android 端需要什么让这一切发生。

# cucumber - Cucumber 中的 html 报告

> ID：10797765
> 
> 赞同：0
> 
> 时间：2012-05-29T10:57:02.030
> 
> 标签：cucumber, watir-webdriver

我根据某些条件指定测试用例通过或失败。exp:if $browser.text.include? 'Branch: swfeature_int [ Shortlist ]' puts "Test Case Passed: Login is successfull" else puts "Test case Failed: Login is not successfull" end 我得到测试用例失败：登录不成功，但它显示为绿色在 html 报告中。但我希望它以红色显示，即它应该是一个失败的场景。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:39:23.927

您需要在代码中添加一行来验证预期的行为。

如果您使用的是 cucumber，并且还安装了正确的 rspec gem（它通常会为您执行此操作），那么您将在步骤文件中使用类似这样的代码来匹配与`Then I should see the shortlist`功能文件中类似的内容的步骤

```
browser.text.should include 'Branch: swfeature_int [ Shortlist ]' 
```

puts 可以很好地进行调试，但是在使用验收或单元测试工具时，您需要调用框架识别为验证预期行为的方法（例如`assert`或）。`.should`当指定的条件为真时，步骤通过，当它为假时，步骤失败。

我强烈建议您立即购买并阅读实用程序员[的“黄瓜书”](http://pragprog.com/book/hwcuc/the-cucumber-book)。它会让你开始以正确的方式使用黄瓜。您可以购买 E 版并在几分钟后阅读。

# android - 如何在 Android 项目中使用 libffmpeg.so？

> ID：10797773
> 
> 赞同：7
> 
> 时间：2012-05-29T10:57:40.680
> 
> 标签：android, android-ndk, ffmpeg

我正在尝试在 Android 中创建屏幕录制应用程序。为此，我正在使用 FFmpeg。我已经创建了 libffmpeg.so 文件。现在我想在 Android 项目中使用它来调用它的原生函数。我怎样才能做到这一点..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T11:43:22.737

本教程提供有关此主题的详细说明。[一个例子如何基于FFmpeg构建Android应用](http://www.roman10.net/how-to-build-android-applications-based-on-ffmpeg-by-an-example/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T04:45:37.187

您可以找到示例[如何在您的 android 项目中加载另一个 .so 文件？](https://stackoverflow.com/questions/20063397/how-to-load-another-so-file-in-your-android-project/20063480#20063480)

这是向您展示如何加载 *.so 文件的好方法。

> 1 - 添加文件夹 jni/libs/*.so
> 
> 2 - 使用“鼠标右键” -> Android 工具 -> 添加原生支持 -> 设置文件名 *.cpp
> 
> 3 - 两个文件：*.cpp 和 Android.mk 出现。
> 
> 4 - 使用 Cygwin 构建和编译 *.so 到项目中。

谢谢，

# c# - 带有输入字段的消息框

> ID：10797774
> 
> 赞同：75
> 
> 时间：2012-05-29T10:57:40.637
> 
> 标签：c#, .net

是否可以显示（弹出）一个带有输入字段的消息框，可能是一个文本框？在语言或框架中的某个地方？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-05-29T10:58:35.690

你可以参考`Microsoft.VisualBasic.dll`。

然后使用下面的代码。

```
Microsoft.VisualBasic.Interaction.InputBox("Question?","Title","Default Text"); 
```

或者，通过在代码中添加`using`允许更短语法的指令（我个人更喜欢）。

```
using Microsoft.VisualBasic;
...
Interaction.InputBox("Question?","Title","Default Text"); 
```

或者你可以按照 Pranay Rana 的建议去做，这也是我会做的......

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-05-29T10:59:17.660

您可以通过制作表单并使用 ShowDialogBox 显示它来做到这一点......

[**`Form.ShowDialog Method`**](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)- 将表单显示为模式对话框。

例子：

```
public void ShowMyDialogBox()
{
   Form2 testDialog = new Form2();

   // Show testDialog as a modal dialog and determine if DialogResult = OK.
   if (testDialog.ShowDialog(this) == DialogResult.OK)
   {
      // Read the contents of testDialog's TextBox.
      this.txtResult.Text = testDialog.TextBox1.Text;
   }
   else
   {
      this.txtResult.Text = "Cancelled";
   }
   testDialog.Dispose();
} 
```

# javascript - 来自图像 Javascript 的数据 URI

> ID：10797779
> 
> 赞同：0
> 
> 时间：2012-05-29T10:57:54.397
> 
> 标签：javascript, dom, canvas, data-uri

我想完全使用 javascript 从本地图像创建数据 URI

有人 javascript 可以建议一个转换本地图像的函数吗？

我使用画布加载图像并转换为数据 uri

```
 function load() {
   var can = document.getElementById('canvas'); 
   var ctx = can.getContext('2d'); 
   var img = new Image(); 
   img.onload = function () {
     can.width = img.width; 
  can.height = img.height; 
  ctx.drawImage(img, 0, 0, img.width, img.height); 
  var canvasData = can.toDataURL("image/png"); 
  alert( canvasData); 
  }
   img.src = 'http://www.smallbiztechnologies.net/smbiztech/wp-    content/uploads/2011/11/Click-To-Call-Icon.png'; 
   } 
```

但它抛出以下错误

```
SECURITY_ERR: DOM Exception 18 
```

请建议如何在不使用服务器端脚本的情况下执行 whis

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:11:48.153

您要绘制的图像来自与您不同的域，因此会引发安全错误。

请参阅以下主题以获取更多说明[为什么 canvas.toDataURL() 会引发安全异常？](https://stackoverflow.com/questions/2390232/why-does-canvas-todataurl-throw-a-security-exception)

# c# - 使用 Microsoft Visual Studio 2010 进行调试。ASP.NET

> ID：10797786
> 
> 赞同：0
> 
> 时间：2012-05-29T10:58:19.183
> 
> 标签：c#, asp.net, .net, visual-studio-2010, debugging

我正在尝试调试以测试我正在创建的网站是否工作正常，但我遇到了问题。它指向以下网站，而不是运行我的网站。直到今天它以前都可以正常工作。

![指向这个](../Images/6ea6c8a135639a959241ae27fd9fcc6d.png)

下面是我的 MS Visual Studio 的样子

![微软视觉工作室](../Images/68ac187f68864b46bbb2d5be0eb92763.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:50:15.880

我能看到的第一件事是，你没有处于调试模式，检查运行按钮是否仍然存在，
*我可以看到在你的 Visual Studio 图像中*
运行它正确，如果它显示没有尝试去 localhost 或 127.0.0.1加载或类似的东西，你的 ASP 服务器还没有启动，尝试重新启动，..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:21:55.260

右键单击解决方案资源管理器中的 .aspx 文件并单击“在浏览器中查看”。如果网页显示正常，则问题出在您的浏览器上。

要检查问题是否与您的浏览器有关，请更改您的默认浏览器并开始调试。

或者只是 IE 已将您的起始页面设置为一次又一次加载的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:45:05.497

这确实很奇怪。尝试这些步骤，看看是否有帮助。1）清理您的解决方案 2）单击工具栏上的通知托盘（右下角）并确保没有 Web 服务器实例正在运行。如果是杀了它。3）右键单击您的网页，然后单击“浏览方式”。将浏览器更改为 Firefox 或 Chrome，然后单击“设置为默认值”。单击确定。4) 再次构建并运行您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:26:28.067

您今天安装了一些不可靠的工具栏吗？也许是网络助手？您的解决方案是摆脱这些东西，然后在您尝试调试时不会尝试搜索。

否则，如果您是所有这些附加组件的真正忠实拥护者并希望保留它们，那么在调试时您必须运行，然后更改地址栏中的 URL 以包含`http`协议，因此它不会t 搜索，类似于：

```
http://localhost:57562/assignemcheck.aspx 
```

# c# - 如何从blob下载文件？

> ID：10797787
> 
> 赞同：0
> 
> 时间：2012-05-29T10:58:20.547
> 
> 标签：c#, asp.net, .net

我需要 page.aspx 上的解决方案来下载文件。在数据库中，我有一个包含两个字段的表“消息”：`fileMessageName`（`System.String`），`fileMessageBytes`（`System.Byte[]`）。我需要从字节中获取页面上的实际文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:02:57.247

不确定如何在 ASPX 中执行此操作，但您应该添加一个新页面以供下载

1.  获取文件字节
2.  添加标题条目`Content-Type: application/octet-stream`
3.  将数据写入文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:51:13.437

除了 Martin Risell-Lilja

下载控制器在

```
Function File(id As String) As FileContentResult
    Dim Icat = New WebClient().DownloadData("https://file.blob.core.windows.net/app/" + id)
    Return New FileContentResult(Icat, "application/octet-stream") With {.FileDownloadName = "Höbölö"}
End Function 
```

对于内存流

```
 Function File(id As String) As FileStreamResult
        Dim Icat = New WebClient().DownloadData("https://file.blob.core.windows.net/app/" + id)
        Dim ms As New MemoryStream(Icat)
        Return File(ms, "application/octet-stream","Höbölö")
    End Function 
```

获取：www.mysite.com/Download/File/bidi.exe

如果您希望授权用户元标记或可以减慢下载自定义选项。

# php - Magento 中多次调用 $model->save() 覆盖数据

> ID：10797791
> 
> 赞同：9
> 
> 时间：2012-05-29T10:58:40.140
> 
> 标签：php, magento

我正在开发一个自定义 Magento 模块，该模块需要将电子邮件地址列表保存到自定义表中。相关代码如下所示：

```
foreach($this->getNewSubscriptionsForAPI() as $email){
            $requestModel->setEmail($email);
            $requestModel->setAction('subscribe');
            $requestModel->setPosted(date('Y-m-d H:i:s'));
            $requestModel->save();
        } 
```

该`getNewSubscriptionsForAPI()`方法返回有效数据，并且`$requestModel`是有效的 Magento 模型。

然而，当这个循环运行时，数据库适配器简单地将每条记录覆盖到前一条记录之上。即，如果我在 phpMyAdmin 中反复点击“浏览”，我可以看到不同的电子邮件地址被写入数据库，但总是在同一行中，从而覆盖先前的条目。id 字段设置正确：作为主键，设置为 AUTO_INCREMENT，并在资源模型中标记为 id 字段。

有趣的是，我可以使用上面的循环在核心`newsletter/subscriber`表中写入连续的记录，没有问题。

当然，我可以简单地`unset()`建立模型并将其从`Mage::getModel()`循环的每个循环中取出，但这（a）似乎非常浪费，并且（b）破坏了我的依赖注入设置以进行测试（我不希望代码实例化自己的模型，但使用我传递给它的模型）。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-29T15:29:35.467

当 Magento 保存一个新对象时，它会自动为该对象生成一个 id。保存对象后，将生成一个 id。要让 magento 再次将您的数据识别为新模型，您只需取消设置模型即可`id`。然而，我认为`unsetData`更优雅，因为它还会删除可能为前一个对象创建的任何数据:-)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-29T11:05:22.710

啊，看来我可能已经回答了我自己的问题。通过在对循环`$requestModel->unsetData();`的调用之后包含对的调用，可以按预期工作。`$requestModel->save()`

`unsetData`是 Varien_Object 提供的一种方法，Mage_Core_Model_Abstract 继承自该方法。

我很高兴有人提供更优雅的解决方案，我很高兴听到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-12T11:57:20.860

我不知道这是否更优雅，但设法用这段代码解决了你的问题。在每个循环中，都会添加一个带有新信息的新行。

```
foreach($this->getNewSubscriptionsForAPI() as $email){
            $data = array('email' => $email, 'action' => 'subscribe', 
                   'posted' => date('Y-m-d H:i:s');
            $requestModel->setData($data)->save();
        } 
```

考虑到“电子邮件”、“操作”和“已发布”是您的数据库表的字段名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-03T15:52:39.053

这是一个旧线程，但对于遇到此问题的任何人来说，虽然 unsetData() 建议是正确的，但此方法在循环内调用 save() 函数的事实是不好的做法，并且肯定会减慢您的网站速度。

您可以在模型结构的 ResourceModel 中编写一个函数，以允许在事务中添加多个项目，这将更加安全并成倍提高性能。

[有关一些更好的想法，请参见此处](https://www.magestore.com/magento-2-tutorial/how-to-insertupdate-multiple-records-to-database-in-magento-2/)和[此处](https://inchoo.net/dev-talk/thou-shalt-not-do-inserts-in-a-foreach-unless-you-know-the-trick/)。

# asp.net - 带有 XMPP 标准的 asp.net 网络应用程序中的网络聊天

> ID：10797792
> 
> 赞同：1
> 
> 时间：2012-05-29T10:58:41.497
> 
> 标签：asp.net, xmpp, chat, ejabberd

我使用 ASP.net 开发了一个 Web 应用程序，并将该网站部署在 Windows 网络托管服务提供商上。

现在我希望使用 XMPP 标准为其添加聊天工具。我搜索，发现了很多东西，最终完全糊涂了。

我遇到了 ejabberd 服务器，这是业内最好的。但我不清楚如何在这种情况下使用它。

甚至开始了解 Matrix 之类的库，但对如何使用它感到困惑。

请向我解释这些概念，让我理解这种情况下的解决方案。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:56:23.240

XMPP 始终需要客户端连接到服务器。ejabberd 就是这样一个服务器。您可以在这里找到许多其他服务器：http: [//xmpp.org/xmpp-software/servers/](http://xmpp.org/xmpp-software/servers/)

MatriX 是一个用于 .NET 的 XMPP 库。您可以在此处找到许多其他 XMPP 库：http: [//xmpp.org/xmpp-software/clients/](http://xmpp.org/xmpp-software/clients/)

如果涉及到 XMPP 开发，asp.net 不会给您任何优势，因为它是一种服务器端语言。但是您最好将负载保持在客户端上。最好的解决方案是使用 BOSH 的客户端 Java Script 库，例如 Strophe。我建议阅读以下书籍： http: [//professionalxmpp.com/](http://professionalxmpp.com/)

如果您想继续使用 .Net，那么 Silverlight 是一个选择。

# prolog - 如何访问有向图中的每个点

> ID：10797793
> 
> 赞同：2
> 
> 时间：2012-05-29T10:58:41.887
> 
> 标签：prolog, graph-theory

在 Prolog 中，如何实现图算法以找到所有路径以在有向图中实现旅行商问题？

例子 ：

```
 graph
                    expected input     expected output                 X -----> Y
    start X             X  Y               X Z                         Y -----> T
    end   Z             Y  T               X Y Z                       T -----> Z
                        T  Z               X Y T Z                     Y -----> Z
                        Y  Z                                           X -----> Z
                        X  Z 
```

如您所知，在有向图中，可能存在一个循环。但是，不需要两次通过同一点。

```
 graph             expected output             
           X ----> Y            
           Y ----> X               X Y Z
           Y ----> Z 
```

为什么我要消除这种情况是因为；

```
 output :

      X Y X Y ...   Z
              ^^^
              god knows this length ( when program terminates )
              termination is np problem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:06:54.010

保留您已经访问过的节点列表。在每一步中，检查边缘的端点是否存在于列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:52:39.887

我发表了一些评论来解释代码的作用......

```
% your directed graph
edge(x, y).
edge(y, t).
edge(t, z).
edge(y, z).
edge(x, z).

% get a path from start to end
path(Start, End, Path) :-
    path(Start, End, [Start], Path).

% when target reached, reverse the visited list
path(End, End, RPath, Path) :-
    reverse(RPath, Path).

% take non deterministically an edge, check if already visited before use
path(Start, End, Visited, Path) :-
    edge(Start, Next),
    \+ memberchk(Next, Visited),
    path(Next, End, [Next|Visited], Path). 
```

测试：

```
?- path(x,z,P).
P = [x, y, t, z] ;
P = [x, y, z] ;
P = [x, z] ;
false. 
```

# java - 在java中在单个语句中执行多个查询

> ID：10797794
> 
> 赞同：110
> 
> 时间：2012-05-29T10:58:45.597
> 
> 标签：java, mysql, sql, jdbc

嗨，我想知道是否可以使用 JDBC 执行类似的操作，因为它目前提供了一个异常，即使它可以在 MySQL 查询浏览器中执行。

```
"SELECT FROM * TABLE;INSERT INTO TABLE;" 
```

虽然我确实意识到拆分 SQL 查询字符串并执行两次语句是可能的，但我想知道是否有一次性的方法。

```
 String url = "jdbc:mysql://localhost:3306/";
    String dbName = "databaseinjection";
    String driver = "com.mysql.jdbc.Driver";
    String sqlUsername = "root"; 
    String sqlPassword = "abc";

    Class.forName(driver).newInstance();

    connection = DriverManager.getConnection(url+dbName, sqlUsername, sqlPassword); 
```

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-05-29T18:33:49.593

*我想知道是否可以使用 JDBC 执行类似的操作。*

```
"SELECT FROM * TABLE;INSERT INTO TABLE;" 
```

对的，这是可能的。据我所知，有两种方法。他们是

1.  通过设置数据库连接属性来允许多个查询，默认用分号隔开。
2.  通过调用隐式返回游标的存储过程。

以下示例演示了上述两种可能性。

**示例 1**：（允许多个查询）：

发送连接请求时，您需要将连接属性附加`allowMultiQueries=true`到数据库 url。这是对那些已经存在的连接属性的附加属性，例如`autoReConnect=true`等。`allowMultiQueries`属性的可接受值为`true`、`false`、`yes`和`no`。任何其他值在运行时都会被拒绝，并带有`SQLException`.

```
String dbUrl = "jdbc:mysql:///test?allowMultiQueries=true"; 
```

除非通过了这样的指令，否则`SQLException`抛出 an。

您必须使用[`execute( String sql )`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#execute%28java.lang.String%29)或其其他变体来获取查询执行的结果。

```
boolean hasMoreResultSets = stmt.execute( multiQuerySqlString ); 
```

要遍历和处理结果，您需要以下步骤：

```
READING_QUERY_RESULTS: // label  
    while ( hasMoreResultSets || stmt.getUpdateCount() != -1 ) {  
        if ( hasMoreResultSets ) {  
            Resultset rs = stmt.getResultSet();
            // handle your rs here
        } // if has rs
        else { // if ddl/dml/...
            int queryResult = stmt.getUpdateCount();  
            if ( queryResult == -1 ) { // no more queries processed  
                break READING_QUERY_RESULTS;  
            } // no more queries processed  
            // handle success, failure, generated keys, etc here
        } // if ddl/dml/...

        // check to continue in the loop  
        hasMoreResultSets = stmt.getMoreResults();  
    } // while results 
```

**示例 2**：要遵循的步骤：

1.  创建一个包含一个或多个`select`, 和`DML`查询的过程。
2.  使用 java 从 java 调用它`CallableStatement`。
3.  您可以捕获`ResultSet`在过程中执行的多个 s。
    无法捕获 DML 结果，但可以发出另一个结果`select`
    来查找表中的行是如何受到影响的。

*样品表和程序*：

```
mysql> create table tbl_mq( i int not null auto_increment, name varchar(10), primary key (i) );
Query OK, 0 rows affected (0.16 sec)

mysql> delimiter //
mysql> create procedure multi_query()
    -> begin
    ->  select count(*) as name_count from tbl_mq;
    ->  insert into tbl_mq( names ) values ( 'ravi' );
    ->  select last_insert_id();
    ->  select * from tbl_mq;
    -> end;
    -> //
Query OK, 0 rows affected (0.02 sec)
mysql> delimiter ;
mysql> call multi_query();
+------------+
| name_count |
+------------+
|          0 |
+------------+
1 row in set (0.00 sec)

+------------------+
| last_insert_id() |
+------------------+
|                3 |
+------------------+
1 row in set (0.00 sec)

+---+------+
| i | name |
+---+------+
| 1 | ravi |
+---+------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.00 sec) 
```

*从 Java 调用过程*：

```
CallableStatement cstmt = con.prepareCall( "call multi_query()" );  
boolean hasMoreResultSets = cstmt.execute();  
READING_QUERY_RESULTS:  
    while ( hasMoreResultSets ) {  
        Resultset rs = stmt.getResultSet();
        // handle your rs here
    } // while has more rs 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-29T11:46:15.667

您可以使用批量更新，但查询必须是操作（即插入、更新和删除）查询

```
Statement s = c.createStatement();
String s1 = "update emp set name='abc' where salary=984";
String s2 = "insert into emp values ('Osama',1420)";  
s.addBatch(s1);
s.addBatch(s2);     
s.executeBatch(); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-01-25T23:30:45.063

提示：如果您有多个连接属性，请将它们分开：

```
&amp; 
```

给你类似的东西：

```
url="jdbc:mysql://localhost/glyndwr?autoReconnect=true&amp;allowMultiQueries=true" 
```

我希望这可以帮助别人。

问候，

格林

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-08T07:18:15.367

根据我的测试，正确的标志是“allowMultiQueries=true”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-29T11:04:49.477

你为什么不试着`Stored Procedure`为此写一个？

你可以`Result Set`出去，同样`Stored Procedure`你可以得到`Insert`你想要的。

唯一的问题是，`Result Set`如果`Insert`在`Select`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-28T10:28:55.537

我认为这是多选择/更新/插入/删除的最简单方法。您可以在 select 之后使用 executeUpdate(str) 运行任意数量的更新/插入/删除（您必须先进行选择（如果需要，则为虚拟对象））（只需使用 new int(count1,count2,...)）如果您需要新的选择，请关闭“语句”和“连接”并为下一次选择创建新的。像例子：

```
String str1 = "select * from users";
String str9 = "INSERT INTO `port`(device_id, potition, port_type, di_p_pt) VALUE ('"+value1+"', '"+value2+"', '"+value3+"', '"+value4+"')";
String str2 = "Select port_id from port where device_id = '"+value1+"' and potition = '"+value2+"' and port_type = '"+value3+"' ";
try{  
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    theConnection=(Connection) DriverManager.getConnection(dbURL,dbuser,dbpassword);  
    theStatement = theConnection.prepareStatement(str1);
    ResultSet theResult = theStatement.executeQuery();
    int count8 = theStatement.executeUpdate(str9);
    theStatement.close();
    theConnection.close();
    theConnection=DriverManager.getConnection(dbURL,dbuser,dbpassword);
    theStatement = theConnection.prepareStatement(str2);
    theResult = theStatement.executeQuery();

    ArrayList<Port> portList = new ArrayList<Port>();
    while (theResult.next()) {
        Port port = new Port();
        port.setPort_id(theResult.getInt("port_id"));

        portList.add(port);
    } 
```

我希望它有帮助

# asp.net-mvc-3 - ASP.Net MVC 3 Razor 连接字符串

> ID：10797795
> 
> 赞同：14
> 
> 时间：2012-05-29T10:58:50.603
> 
> 标签：asp.net-mvc-3, razor, concatenation, string-concatenation

我的 ASP.Net MVC 3 Razor 视图中有以下内容

```
@foreach (var item in Model.FormNotes) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.User.firstName)
    </td>
</tr>
} 
```

哪个工作正常，但是，我想连接字符串以显示名字和姓氏，但是当我尝试这样做时

```
<td>
  @Html.DisplayFor(modelItem => item.User.firstName + @item.User.lastName)
</td> 
```

我收到以下错误

**模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用**

有谁知道如何在 Razor 视图中连接字符串？

谢谢大家。

**编辑**

我的 Razor View 接受一个看起来像这样的 ViewModel

```
public class ViewModelFormNoteList
{
    public IList<Note> FormNotes { get; set; }
} 
```

我想按照 Roy 的建议将 FullName 属性放在这里，但是，我不知道如何让它工作？？？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T11:01:58.933

`DisplayFor`需要一个属性来映射，所以串联是不可能的。您可能会在模型上公开一个只读属性 FullName，然后返回串联：

```
public string FullName
{
   get
   {
      return User.FirstName + " " + User.LastName;
   }
} 
```

然后在你的`DisplayFor`.

```
@Html.DisplayFor(modelItem => modelItem.FullName); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T07:16:34.700

```
 @Html.DisplayFor(modelItem => item.FirstName) @Html.DisplayFor(modelItem => item.LastName) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T11:03:18.270

你可以这样做：

```
@foreach (var item in Model.FormNotes) { 
var conc = item.User.FirstName + item.User.LastName;
<tr> 
   <td> 
        @Html.Display(conc) 
    </td> 
</tr> 
} 
```

或者在模型中拥有属性 FullName 会是更好的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-27T07:30:26.357

这是在**.CSHTML中连接不同字符串的语法**

**@($"{User.FirstName} {User.MiddleName} {User.LastName}")**

# java - 如何使用记录器/播放器对象

> ID：10797800
> 
> 赞同：-1
> 
> 时间：2012-05-29T10:59:26.363
> 
> 标签：java

我正在尝试将对象放入文档中。dat 然后它们可以被读取 有谁知道哪里出错了？我遇到的问题是它能够读取您保留的文件，我不确定您是否保存它，但是如果我在文件夹中找到该文件...

我正在使用以下对象：

```
public class Person {
    public int Id;
    public String Name;
    public boolean Show;

    public Persona(
            int identificator,
            String newName,
            boolean ShoworNot
            ){
        this.Id = identificator;
        this.Name = newName;
        this.Show = ShoworNot;
    }

Thanks
my code:

public void WriteFile
try {
            FileOutputStream file = new FileOutputStream("try.dat");
            ObjectOutputStream exit = new ObjectOutputStream(file);
            Iterator ite2 = people.iterator();
            while(ite2.hasNext()){
            Person person2 = (Person)ite2.next();
            exit.writeObject(person2);
            exit.close();
        }
            System.out.println("It's works");

        }
        catch (IOException e){
        System.out.println("Problems with the file.");
        }
}
  }
  }
  }
  public void ReadFile(){
      try {
FileInputStream file2 = new FileInputStream("try.dat");
ObjectInputStream entry = new ObjectInputStream(file2);
entry.readObject();
String data = (String)entry.readObject();
        entry.close();
System.out.println(data);
}

catch (FileNotFoundException e) {
System.out.println("It can't open the file document");
}
catch (IOException e) {
System.out.println("Problems with the file");
}
catch (Exception e) {
System.out.println("Error reading the file");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:03:02.007

`Serializable`如果你想使用你的对象必须实现接口`ObjectOutputStream`。只需更改`public class Person {`为`public class Person implements Serializable {`

还要看看是什么问题，在每个block`catch{}`里面写`e.printStackTrace()`

你有一个错误：

```
entry.readObject();
String data = (String)entry.readObject(); 
```

您正在读取 1 个对象，忽略它并尝试读取第二个对象，但您已经读取了它，所以您在文件末尾并且您得到 EndOfFileException(EOF)。删除第一行。第二个问题是对象的类型无效。你写一个对象`Person`，所以你必须阅读`Person`，而不是`String`：

```
Person data = (Person) entry.readObject(); 
```

同样，在您发送文件中的所有数据之后，在关闭流之前，您必须调用`.flush()`

```
exit.writeObject(person2);
exit.flush();
exit.close(); 
```

# java - 如何使用 jsr310 DateTimeFormatter 解析不区分大小写的字符串？

> ID：10797808
> 
> 赞同：19
> 
> 时间：2012-05-29T10:59:41.070
> 
> 标签：java, jsr310

jsr-310 有一个方便的类`DateTimeFormatters`，它允许你构造一个`DateTimeFormatter`. 我特别喜欢这种`pattern(String)`方法 - 请参阅[javadoc](http://threeten.sourceforge.net/apidocs/javax/time/calendar/format/DateTimeFormatters.html#pattern%28java.lang.String%29)

但是，我遇到了一个区分大小写的问题——例如

```
DateTimeFormatters.pattern("dd-MMM-yyyy"); 
```

与“01-JAN-2012”匹配，但不与“01-JAN-2012”或“01-jan-2012”匹配。

一种方法是分解字符串并解析组件，或者另一种方法是使用正则表达式将不区分大小写的字符串替换为区分大小写的字符串。

但感觉应该有一个更简单的方法......

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-29T10:59:41.213

还有...根据[用户指南](http://sourceforge.net/apps/mediawiki/threeten/index.php?title=User_Guide#Formatting)（离线，请参阅[JavaDoc](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatterBuilder.html#parseCaseInsensitive--)），您应该使用它`DateTimeFormatterBuilder`来构建一个复杂的`DateTimeFormatter`

例如

```
DateTimeFormatterBuilder builder = new DateTimeFormatterBuilder();
builder.parseCaseInsensitive();
builder.appendPattern("dd-MMM-yyyy");
DateTimeFormatter dateFormat = builder.toFormatter(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-03T14:58:07.523

这种替代方法对于初始化静态变量很有用：

```
DateTimeFormatter myFormatter = new DateTimeFormatterBuilder()
                               .parseCaseInsensitive()
                               .appendPattern("dd-MMM-yyyy")
                               .toFormatter(Locale.ENGLISH); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-25T11:58:59.277

只是一个额外的说明，顺序很重要。

这是不区分大小写的：

```
 DateTimeFormatter format = new DateTimeFormatterBuilder()
                .parseCaseInsensitive()
                .parseLenient()
                .appendPattern("HH:mm EEEE")
                .toFormatter(); 
```

这不是：

```
 DateTimeFormatter format = new DateTimeFormatterBuilder()
                .appendPattern("HH:mm EEEE")
                .parseCaseInsensitive()
                .parseLenient()
                .toFormatter(); 
```

# c# - 如何更改 TabControl.Header 的背景颜色

> ID：10797816
> 
> 赞同：23
> 
> 时间：2012-05-29T11:00:04.410
> 
> 标签：c#, wpf, background, styles, tabcontrol

我需要更改 TabControl 标题的背景颜色，但 TabControl 没有它的属性，我该怎么做。请帮帮我。这是我的代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="502" Width="628">
    <TabControl Background="#123" TabStripPlacement="Left" HorizontalAlignment="Stretch" BorderBrush="#41020202">
        <TabControl.BitmapEffect>
            <DropShadowBitmapEffect Color="Black" Direction="270"/>
        </TabControl.BitmapEffect>
        <TabControl.Resources>
            <Style TargetType="{x:Type TabItem}">
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Padding" Value="0" />
                <Setter Property="HeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <Border x:Name="grid" Background="Red">
                                <ContentPresenter>
                                    <ContentPresenter.Content>
                                        <TextBlock Margin="4" FontSize="15" Text="{TemplateBinding Content}"/>
                                    </ContentPresenter.Content>
                                    <ContentPresenter.LayoutTransform>
                                        <RotateTransform Angle="270" />
                                    </ContentPresenter.LayoutTransform>
                                </ContentPresenter>
                            </Border>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type TabItem}},Path=IsSelected}" Value="True">
                                    <Setter TargetName="grid" Property="Background" Value="Green"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </TabControl.Resources>
        <TabItem Header="Tab Item 1" />
        <TabItem Header="Tab Item 2" />
        <TabItem Header="Tab Item 3" />
        <TabItem Header="Tab Item 4" />
    </TabControl>
</Window> 
```

这是我的结果： ![我的结果](../Images/5263d823e3d509f407d38f83ed0f55ff.png)

这是我需要的结果： ![这是我需要的结果](../Images/3276ad586ac8cd963bb92417e282327d.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-29T11:27:00.817

在 TabControl.Resources 部分中添加以下样式应该可以满足您的需求。

```
<Style TargetType="{x:Type TabPanel}">
    <Setter Property="Background" Value="Black"></Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-01-25T10:22:35.590

如果 ShadeOfGrey 答案不起作用，您应该使用`Grid`而不是`TabPanel`：

```
<TabControl.Resources>
    <Style TargetType="{x:Type Grid}">
        <Setter Property="Background" Value="WhiteSmoke"/>
    </Style>
</TabControl.Resources> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T11:29:07.640

您应该为 TabPanel 设置样式...基本上我们在 TabControl 中安排 TabPanel 中的 Tabs。

下面的代码会帮助你..

```
<TabControl Background="#123" TabStripPlacement="Left" HorizontalAlignment="Stretch" BorderBrush="#41020202">
            <TabControl.BitmapEffect>
                <DropShadowBitmapEffect Color="Black" Direction="270"/>
            </TabControl.BitmapEffect>
            <TabControl.Resources>
                <Style TargetType="{x:Type TabPanel}">
                    <Setter Property="Background" Value="Yellow"/>
                </Style>
                <Style TargetType="{x:Type TabItem}">
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Padding" Value="0" />
                    <Setter Property="HeaderTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <Border x:Name="grid" Background="Red">
                                    <ContentPresenter>
                                        <ContentPresenter.Content>
                                            <TextBlock Margin="4" FontSize="15" Text="{TemplateBinding Content}"/>
                                        </ContentPresenter.Content>
                                        <ContentPresenter.LayoutTransform>
                                            <RotateTransform Angle="270" />
                                        </ContentPresenter.LayoutTransform>
                                    </ContentPresenter>
                                </Border>
                                <DataTemplate.Triggers>
                                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type TabItem}},Path=IsSelected}" Value="True">
                                        <Setter TargetName="grid" Property="Background" Value="Green"/>
                                    </DataTrigger>
                                </DataTemplate.Triggers>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.Resources>
            <TabItem Header="Tab Item 1" />
            <TabItem Header="Tab Item 2" />
            <TabItem Header="Tab Item 3" />
            <TabItem Header="Tab Item 4" />
        </TabControl> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-01T06:53:11.497

上述解决方案对我不起作用，但我的选项卡控件位于用户控件而不是窗口中。设置用户控制背景颜色改为解决问题；如果投票赞成的解决方案不起作用，这可能会对其他有同样问题的人有所帮助。

# python - 查找列表的模式

> ID：10797819
> 
> 赞同：144
> 
> 时间：2012-05-29T11:00:14.273
> 
> 标签：python, mode

给定一个项目列表，回想一下列表的*模式*是最常出现的项目。

我想知道如何创建一个可以找到列表模式的函数，但如果列表没有模式（例如，列表中的所有项目只出现一次），则会显示一条消息。我想在不导入任何功能的情况下制作此功能。我正在尝试从头开始制作自己的功能。

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2015-01-24T20:08:44.247

您可以使用该`max`功能和一个键。看看[python max function using 'key' 和 lambda expression](https://stackoverflow.com/questions/18296755/python-max-function-using-key-and-lambda-expression)。

```
max(set(lst), key=lst.count) 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-05-29T11:07:16.980

您可以使用具有-esque 功能[`Counter`](http://docs.python.org/library/collections.html#collections.Counter)的包中提供的[`collections`](http://docs.python.org/library/collections.html)`mode`

```
from collections import Counter
data = Counter(your_list_in_here)
data.most_common()   # Returns all unique items and their counts
data.most_common(1)  # Returns the highest occurring item 
```

注意：计数器是 python 2.7 中的新功能，在早期版本中不可用。

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2014-03-17T15:19:11.847

Python 3.4 包含方法[`statistics.mode`](http://docs.python.org/3.4/library/statistics.html#statistics.mode)，所以很简单：

```
>>> from statistics import mode
>>> mode([1, 1, 2, 3, 3, 3, 3, 4])
 3 
```

您可以在列表中包含任何类型的元素，而不仅仅是数字：

```
>>> mode(["red", "blue", "blue", "red", "green", "red", "red"])
 'red' 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2012-05-29T11:12:01.900

借鉴一些统计软件，即[SciPy](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mode.html)和[MATLAB](http://www.mathworks.co.uk/help/techdoc/ref/mode.html)，它们只返回最小的最常见值，因此如果两个值同样频繁地出现，则返回其中最小的一个。希望一个例子会有所帮助：

```
>>> from scipy.stats import mode

>>> mode([1, 2, 3, 4, 5])
(array([ 1.]), array([ 1.]))

>>> mode([1, 2, 2, 3, 3, 4, 5])
(array([ 2.]), array([ 2.]))

>>> mode([1, 2, 2, -3, -3, 4, 5])
(array([-3.]), array([ 2.])) 
```

你有什么理由不能遵守这个约定吗？

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2015-08-10T03:26:02.867

有许多简单的方法可以在 Python 中找到列表的模式，例如：

```
import statistics
statistics.mode([1,2,3,3])
>>> 3 
```

或者，您可以通过计数找到最大值

```
max(array, key = array.count) 
```

这两种方法的问题在于它们不适用于多种模式。第一个返回错误，而第二个返回第一个模式。

为了找到一个集合的模式，你可以使用这个函数：

```
def mode(array):
    most = max(list(map(array.count, array)))
    return list(set(filter(lambda x: array.count(x) == most, array))) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-12-31T09:42:27.220

扩展列表为空时不起作用的社区答案，这里是模式的工作代码：

```
def mode(arr):
        if arr==[]:
            return None
        else:
            return max(set(arr), key=arr.count) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-02-18T20:26:09.663

如果您对最小、最大或所有模式感兴趣：

```
def get_small_mode(numbers, out_mode):
    counts = {k:numbers.count(k) for k in set(numbers)}
    modes = sorted(dict(filter(lambda x: x[1] == max(counts.values()), counts.items())).keys())
    if out_mode=='smallest':
        return modes[0]
    elif out_mode=='largest':
        return modes[-1]
    else:
        return modes 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-12-26T21:22:00.963

我写了这个方便的函数来找到模式。

```
def mode(nums):
    corresponding={}
    occurances=[]
    for i in nums:
            count = nums.count(i)
            corresponding.update({i:count})

    for i in corresponding:
            freq=corresponding[i]
            occurances.append(freq)

    maxFreq=max(occurances)

    keys=corresponding.keys()
    values=corresponding.values()

    index_v = values.index(maxFreq)
    global mode
    mode = keys[index_v]
    return mode 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-18T14:03:07.193

简短，但有点丑陋：

```
def mode(arr) :
    m = max([arr.count(a) for a in arr])
    return [x for x in arr if arr.count(x) == m][0] if m>1 else None 
```

使用字典，稍微不那么难看：

```
def mode(arr) :
    f = {}
    for a in arr : f[a] = f.get(a,0)+1
    m = max(f.values())
    t = [(x,f[x]) for x in f if f[x]==m]
    return m > 1 t[0][0] else None 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-02-09T21:56:40.837

稍长一点，但可以有多种模式，并且可以获得具有最多计数或混合数据类型的字符串。

```
def getmode(inplist):
    '''with list of items as input, returns mode
    '''
    dictofcounts = {}
    listofcounts = []
    for i in inplist:
        countofi = inplist.count(i) # count items for each item in list
        listofcounts.append(countofi) # add counts to list
        dictofcounts[i]=countofi # add counts and item in dict to get later
    maxcount = max(listofcounts) # get max count of items
    if maxcount ==1:
        print "There is no mode for this dataset, values occur only once"
    else:
        modelist = [] # if more than one mode, add to list to print out
        for key, item in dictofcounts.iteritems():
            if item ==maxcount: # get item from original list with most counts
                modelist.append(str(key))
        print "The mode(s) are:",' and '.join(modelist)
        return modelist 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-04-20T14:20:28.027

无需任何导入即可找到列表模式的简单代码：

```
nums = #your_list_goes_here
nums.sort()
counts = dict()
for i in nums:
    counts[i] = counts.get(i, 0) + 1
mode = max(counts, key=counts.get) 
```

在多种模式的情况下，它应该返回最小节点。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-12-08T18:40:08.423

对于要成为 a 的数字`mode`，它必须比列表*中至少一个其他数字*出现的次数更多，并且它*不能*是列表中的唯一数字。因此，我重构了@mathwizurd 的答案（使用该[`difference`](https://docs.python.org/3.6/library/stdtypes.html?highlight=set#frozenset.difference)方法）如下：

```
def mode(array):
    '''
    returns a set containing valid modes
    returns a message if no valid mode exists
      - when all numbers occur the same number of times
      - when only one number occurs in the list 
      - when no number occurs in the list 
    '''
    most = max(map(array.count, array)) if array else None
    mset = set(filter(lambda x: array.count(x) == most, array))
    return mset if set(array) - mset else "list does not have a mode!" 
```

这些测试成功通过：

```
mode([]) == None 
mode([1]) == None
mode([1, 1]) == None 
mode([1, 1, 2, 2]) == None 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-05-29T23:32:06.863

为什么不只是

```
def print_mode (thelist):
  counts = {}
  for item in thelist:
    counts [item] = counts.get (item, 0) + 1
  maxcount = 0
  maxitem = None
  for k, v in counts.items ():
    if v > maxcount:
      maxitem = k
      maxcount = v
  if maxcount == 1:
    print "All values only appear once"
  elif counts.values().count (maxcount) > 1:
    print "List has multiple modes"
  else:
    print "Mode of list:", maxitem 
```

它没有一些它应该有的错误检查，但它会在不导入任何函数的情况下找到模式，并且如果所有值只出现一次，它将打印一条消息。它还将检测共享相同最大计数的多个项目，尽管尚不清楚您是否想要这样做。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-12-30T23:39:44.593

此函数返回一个或多个函数的模式（无论有多少），以及数据集中的一个或多个模式的频率。如果没有模式（即所有项目只出现一次），该函数将返回一个错误字符串。这类似于上面的 A_nagpal 的函数，但在我看来，它更完整，而且我认为对于阅读此问题的任何 Python 新手（例如你的真正的）来说更容易理解。

```
 def l_mode(list_in):
    count_dict = {}
    for e in (list_in):   
        count = list_in.count(e)
        if e not in count_dict.keys():
            count_dict[e] = count
    max_count = 0 
    for key in count_dict: 
        if count_dict[key] >= max_count:
            max_count = count_dict[key]
    corr_keys = [] 
    for corr_key, count_value in count_dict.items():
        if count_dict[corr_key] == max_count:
            corr_keys.append(corr_key)
    if max_count == 1 and len(count_dict) != 1: 
        return 'There is no mode for this data set. All values occur only once.'
    else: 
        corr_keys = sorted(corr_keys)
        return corr_keys, max_count 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-01-10T20:06:46.920

数据集的模式是/是该集中出现频率最高的成员。如果有两个成员出现次数最多且次数相同，则数据有两种模式。这称为双峰。

如果有超过 2 种模式，则数据将被称为多模式。如果数据集中所有成员出现的次数相同，则数据集根本没有众数。

以下函数模式（）可以在给定的数据列表中查找模式：

```
import numpy as np; import pandas as pd

def modes(arr):
    df = pd.DataFrame(arr, columns=['Values'])
    dat = pd.crosstab(df['Values'], columns=['Freq'])
    if len(np.unique((dat['Freq']))) > 1:
        mode = list(dat.index[np.array(dat['Freq'] == max(dat['Freq']))])
        return mode
    else:
        print("There is NO mode in the data set") 
```

输出：

```
# For a list of numbers in x as
In [1]: x = [2, 3, 4, 5, 7, 9, 8, 12, 2, 1, 1, 1, 3, 3, 2, 6, 12, 3, 7, 8, 9, 7, 12, 10, 10, 11, 12, 2]
In [2]: modes(x)
Out[2]: [2, 3, 12]
# For a list of repeated numbers in y as
In [3]: y = [2, 2, 3, 3, 4, 4, 10, 10]
In [4]: modes(y)
Out[4]: There is NO mode in the data set
# For a list of strings/characters in z as
In [5]: z = ['a', 'b', 'b', 'b', 'e', 'e', 'e', 'd', 'g', 'g', 'c', 'g', 'g', 'a', 'a', 'c', 'a']
In [6]: modes(z)
Out[6]: ['a', 'g'] 
```

如果我们不想从这些包中导入`numpy`或`pandas`调用任何函数，那么要获得相同的输出，`modes()`函数可以写成：

```
def modes(arr):
    cnt = []
    for i in arr:
        cnt.append(arr.count(i))
    uniq_cnt = []
    for i in cnt:
        if i not in uniq_cnt:
            uniq_cnt.append(i)
    if len(uniq_cnt) > 1:
        m = []
        for i in list(range(len(cnt))):
            if cnt[i] == max(uniq_cnt):
                m.append(arr[i])
        mode = []
        for i in m:
            if i not in mode:
                mode.append(i)
        return mode
    else:
        print("There is NO mode in the data set") 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-07-24T10:00:06.933

**好吧！**所以社区已经有很多答案，其中一些使用了另一个功能，而你不想要。
让我们创建我们**非常简单易懂**的函数。

```
import numpy as np

#Declare Function Name
def calculate_mode(lst): 
```

> 下一步是在列表中找到**唯一元素**及其各自的**频率**。

```
unique_elements,freq = np.unique(lst, return_counts=True) 
```

> 获取**模式**

```
max_freq = np.max(freq)   #maximum frequency
mode_index = np.where(freq==max_freq)  #max freq index
mode = unique_elements[mode_index]   #get mode by index
return mode 
```

> 例子

```
lst =np.array([1,1,2,3,4,4,4,5,6])
print(calculate_mode(lst))
>>> Output [4] 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-04-13T19:34:58.833

以下是如何找到列表的均值、中位数和众数：

```
import numpy as np
from scipy import stats

#to take input
size = int(input())
numbers = list(map(int, input().split()))

print(np.mean(numbers))
print(np.median(numbers))
print(int(stats.mode(numbers)[0])) 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-04-03T14:03:15.887

这将返回所有模式：

```
def mode(numbers)
    largestCount = 0
    modes = []
    for x in numbers:
        if x in modes:
            continue
        count = numbers.count(x)
        if count > largestCount:
            del modes[:]
            modes.append(x)
            largestCount = count
        elif count == largestCount:
            modes.append(x)
    return modes 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-12-09T16:10:00.707

对于那些寻找最小模式的人，例如：双模式分布的情况，使用 numpy。

```
import numpy as np
mode = np.argmax(np.bincount(your_list)) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-12-13T12:46:49.747

```
def mode(inp_list):
    sort_list = sorted(inp_list)
    dict1 = {}
    for i in sort_list:        
            count = sort_list.count(i)
            if i not in dict1.keys():
                dict1[i] = count

    maximum = 0 #no. of occurences
    max_key = -1 #element having the most occurences

    for key in dict1:
        if(dict1[key]>maximum):
            maximum = dict1[key]
            max_key = key 
        elif(dict1[key]==maximum):
            if(key<max_key):
                maximum = dict1[key]
                max_key = key

    return max_key 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-04-09T07:16:58.773

```
def mode(data):
    lst =[]
    hgh=0
    for i in range(len(data)):
        lst.append(data.count(data[i]))
    m= max(lst)
    ml = [x for x in data if data.count(x)==m ] #to find most frequent values
    mode = []
    for x in ml: #to remove duplicates of mode
        if x not in mode:
        mode.append(x)
    return mode
print mode([1,2,2,2,2,7,7,5,5,5,5]) 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-08-26T07:43:21.773

```
import numpy as np
def get_mode(xs):
    values, counts = np.unique(xs, return_counts=True)
    max_count_index = np.argmax(counts) #return the index with max value counts
    return values[max_count_index]
print(get_mode([1,7,2,5,3,3,8,3,2])) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-02-20T17:22:51.390

也许尝试以下。它是 O(n) 并返回浮点数（或整数）列表。它经过彻底的自动测试。它使用 collections.defaultdict，但我想您并不反对使用它。它也可以在[https://stromberg.dnsalias.org/~strombrg/stddev.html找到](https://stromberg.dnsalias.org/%7Estrombrg/stddev.html)

```
def compute_mode(list_: typing.List[float]) -> typing.List[float]:
    """                       
    Compute the mode of list_.

    Note that the return value is a list, because sometimes there is a tie for "most common value".

    See https://stackoverflow.com/questions/10797819/finding-the-mode-of-a-list
    """                                                                                                        
    if not list_:
        raise ValueError('Empty list')
    if len(list_) == 1:           
        raise ValueError('Single-element list')
    value_to_count_dict: typing.DefaultDict[float, int] = collections.defaultdict(int)
    for element in list_:
        value_to_count_dict[element] += 1
    count_to_values_dict = collections.defaultdict(list)
    for value, count in value_to_count_dict.items():   
        count_to_values_dict[count].append(value)                           
    counts = list(count_to_values_dict)
    if len(counts) == 1:                                                                            
        raise ValueError('All elements in list are the same')          
    maximum_occurrence_count = max(counts)
    if maximum_occurrence_count == 1:
        raise ValueError('No element occurs more than once')
    minimum_occurrence_count = min(counts)
    if maximum_occurrence_count <= minimum_occurrence_count:
        raise ValueError('Maximum count not greater than minimum count')
    return count_to_values_dict[maximum_occurrence_count] 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-03-29T15:06:10.287

```
#function to find mode
def mode(data):  
    modecnt=0
#for count of number appearing
    for i in range(len(data)):
        icount=data.count(data[i])
#for storing count of each number in list will be stored
        if icount>modecnt:
#the loop activates if current count if greater than the previous count 
            mode=data[i]
#here the mode of number is stored 
            modecnt=icount
#count of the appearance of number is stored
    return mode
print mode(data1) 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-06-26T18:32:57.147

如果您想要一种清晰的方法，对课堂有用并且仅通过理解使用列表和字典，您可以执行以下操作：

```
def mode(my_list):
    # Form a new list with the unique elements
    unique_list = sorted(list(set(my_list)))
    # Create a comprehensive dictionary with the uniques and their count
    appearance = {a:my_list.count(a) for a in unique_list} 
    # Calculate max number of appearances
    max_app = max(appearance.values())
    # Return the elements of the dictionary that appear that # of times
    return {k: v for k, v in appearance.items() if v == max_app} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-02-14T01:42:17.040

这是一个简单的函数，它获取列表中出现的第一个模式。它以列表元素作为键和出现次数创建一个字典，然后读取字典值以获取模式。

```
def findMode(readList):
    numCount={}
    highestNum=0
    for i in readList:
        if i in numCount.keys(): numCount[i] += 1
        else: numCount[i] = 1
    for i in numCount.keys():
        if numCount[i] > highestNum:
            highestNum=numCount[i]
            mode=i
    if highestNum != 1: print(mode)
    elif highestNum == 1: print("All elements of list appear once.") 
```

# facebook - 不准确的setTimeout，它只适用于mousedown

> ID：10797820
> 
> 赞同：0
> 
> 时间：2012-05-29T11:00:16.223
> 
> 标签：facebook, settimeout, mousedown

我有 setTimeout 的问题。

在所有主要浏览器中它都可以正常工作，但在 IE 中却不行……我正在创建一个 facebook 应用程序拼图。当玩家按下开始按钮时，计时器开始计算他玩一局游戏的时间。一开始我使用 setInterval 来增加计时器，但在 facebook 脚本的配合下，它在游戏结束时延迟了大约 2 秒。然后我在 stackoverflow 上发现了提高计时器准确性的技巧：[setInterval 计时慢慢偏离保持准确](https://stackoverflow.com/questions/8173580/setinterval-timing-slowly-drifts-away-from-staying-accurate) 再次 - 没有 facebook 它工作正常，没有显示延迟。使用 facebook，它仍然有延迟。现在浓缩您可能感兴趣的信息：当用户单击开始时，我创建新的日期作为开始时间。当用户结束游戏脚本创建 finalTime 新日期，然后减去 finalTime - startTime。

在代码中有setTimeout：

```
(...)    

f : function() {
        var sec_time = Math.floor((puzzle.nextAt - puzzle.startTime)/1000);
        $('.timer').html(sec_time);
        if (!puzzle.startTime) {
            puzzle.startTime = new Date().getTime();
            puzzle.nextAt = puzzle.startTime;
            $('.timer').html('0');
        }
        puzzle.nextAt += 100;
        puzzle.to = setTimeout(puzzle.f, puzzle.nextAt - new Date().getTime());
    }

(...) 
```

当用户将最后一块拼图放在正确的位置时，我调用 clearTimeout(puzzle.to);

我现在有2个问题：

1.  时间不准确，在IE中甚至可以相差7秒！

2.  在游戏期间的 IE 中，它仅在用户按下鼠标时才有效...：/

要拖动拼图，我使用 jQuery 拖放插件。至少非常有用的信息将是如何实现准确的计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:25:28.533

您应该将脚本放在 jQuery 的 ready 函数中，而不是放在页面底部，因为 Facebook SDK 是异步加载的，如果在页面底部启动它们可能会影响定时执行。

至于时间，您会在 IE7 中看到 15 毫秒到 45 毫秒之间的不准确，具体取决于页面上的其他 JS 执行。因此，您的 100 毫秒超时会严重漂移。最好记录一个开始时间并建立一个比需要的轮询频率更高的计时器，并在每个周期中比较开始时间和“现在”以确定下一步该做什么。

# java - 使用 jTransforms 的 png 的 DCT2

> ID：10797824
> 
> 赞同：2
> 
> 时间：2012-05-29T11:00:34.050
> 
> 标签：java, transform, dct

我要做的是计算图像的 2D DCT，`Java`然后将结果保存回文件。

读取文件：

```
coverImage = readImg(coverPath);
private BufferedImage readImg(String path) {

        BufferedImage destination = null;

        try {

            destination = ImageIO.read(new File(path));

        } catch (IOException e) {

            e.printStackTrace();

        }

        return destination;

    } 
```

转换为浮点数组：

```
cover = convertToFloatArray(coverImage);
private float[] convertToFloatArray(BufferedImage source) {

        securedImage = (WritableRaster) source.getData();

        float[] floatArray = new float[source.getHeight() * source.getWidth()];
        floatArray = securedImage.getPixels(0, 0, source.getWidth(), source.getHeight(), floatArray);

        return floatArray;

    } 
```

运行 DCT：

```
runDCT(cover, coverImage.getHeight(), coverImage.getWidth());
private void runDCT(float[] floatArray, int rows, int cols) {

        dct = new FloatDCT_2D(rows, cols);

        dct.forward(floatArray, false);

        securedImage.setPixels(0, 0, cols, rows, floatArray); 

    } 
```

然后将其保存为图像：

```
convertDctToImage(securedImage, coverImage.getHeight(), coverImage.getWidth());
private void convertDctToImage(WritableRaster secured, int rows, int cols) {

        coverImage.setData(secured);

        File file = new File(securedPath);
        try {
            ImageIO.write(coverImage, "png", file);
        } catch (IOException ex) {
            Logger.getLogger(DCT2D.class.getName()).log(Level.SEVERE, null, ex);
        }

    } 
```

但我得到的是：http: [//kyle.pl/up/2012/05/29/dct_stack.png](http://kyle.pl/up/2012/05/29/dct_stack.png)

谁能告诉我我做错了什么？或者，也许我在这里不明白什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T21:51:22.180

这是一段代码，对我有用：

```
//reading image
BufferedImage image = javax.imageio.ImageIO.read(new File(filename));

//width * 2, because DoubleFFT_2D needs 2x more space - for Real and Imaginary parts of complex numbers
double[][] brightness = new double[img.getHeight()][img.getWidth() * 2];

//convert colored image to grayscale (brightness of each pixel)
for ( int y = 0; y < image.getHeight(); y++ ) {
    raster.getDataElements( 0, y, image.getWidth(), 1, dataElements );
    for ( int x = 0; x < image.getWidth(); x++ ) {
        //notice x and y swapped - it's JTransforms format of arrays
        brightness[y][x] = brightnessRGB(dataElements[x]);
    }
}

//do FT (not FFT, because FFT is only* for images with width and height being 2**N)
//DoubleFFT_2D writes data to the same array - to brightness
new DoubleFFT_2D(img.getHeight(), img.getWidth()).realForwardFull(brightness);

//visualising frequency domain
BufferedImage fd = new BufferedImage(img.getWidth(), img.getHeight(), BufferedImage.TYPE_INT_RGB);
outRaster = fd.getRaster();
for ( int y = 0; y < img.getHeight(); y++ ) {
    for ( int x = 0; x < img.getWidth(); x++ ) {
        //we calculate complex number vector length (sqrt(Re**2 + Im**2)). But these lengths are to big to
        //fit in 0 - 255 scale of colors. So I divide it on 223\. Instead of "223", you may want to choose
        //another factor, wich would make you frequency domain look best
        int power = (int) (Math.sqrt(Math.pow(brightness[y][2 * x], 2) + Math.pow(brightness[y][2 * x + 1], 2)) / 223);
        power = power > 255 ? 255 : power;
        //draw a grayscale color on image "fd"
        fd.setRGB(x, y, new Color(c, c, c).getRGB());
    }
}

draw(fd); 
```

生成的图像应该看起来像中间的大黑色空间和所有四个角的白点。通常人们将 FD 想象成这样，零频率出现在图像的中心。所以，如果你需要经典的 FD（一个，看起来像现实生活图像的明星），你需要升级“fd.setRGB(x, y...”一点：

```
int w2 = img.getWidth() / 2;
int h2 = img.getHeight() / 2;
int newX = x + w2 >= img.getWidth() ? x - w2  : x + w2;
int newY = y + h2 >= img.getHeight() ? y - h2  : y + h2;

fd.setRGB(newX, newY, new Color(power, power, power).getRGB()); 
```

懒惰的brightnessRGB和draw方法：

```
public static int brightnessRGB(int rgb) {
    int r = (rgb >> 16) & 0xff;
    int g = (rgb >> 8) & 0xff;
    int b = rgb & 0xff;
    return (r+g+b)/3;
}
private static void draw(BufferedImage img) {
    JLabel picLabel = new JLabel(new ImageIcon(img));
    JPanel jPanelMain = new JPanel();
    jPanelMain.add(picLabel);
    JFrame jFrame = new JFrame();
    jFrame.add(jPanelMain);
    jFrame.pack();
    jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jFrame.setVisible(true);
} 
```

我知道，我有点晚了，但我只是为我的程序做了所有这些。所以，让它在这里为那些从谷歌搜索到这里的人。

# unix - ssh登录没有任何提示

> ID：10797828
> 
> 赞同：-1
> 
> 时间：2012-05-29T11:00:40.027
> 
> 标签：unix, ssh

我必须登录超过 150 个服务器并执行一些 unix 命令。问题是，如果我创建一个脚本，它将从一台服务器运行并 ssh 登录到 150 服务器并执行 cmds 并退出。我如何使用任何密码提示登录。由于某种原因，我不应该使用 ssh-keygen 公钥和私钥方法，或者使用一些带有 bash 行的额外工具，如“expect”。

是否有任何正常的方法可以通过 ssh 在包含用户名/密码@服务器名的单个命令中进行登录，就像我们在 sqlplus 和 ftp 中的选项一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:07:40.287

有一个名为 sshpass 的实用程序允许您在命令行中指定密码。

在 Ubuntu/Debian 下使用安装`sudo apt-get install sshpass`

`sshpass -p 'abcedf' ssh joe@myserver.domain.com "df > ~/test; cat ~/test; rm ~/test;"`

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:53:30.050

您可以尝试在每个远程主机上设置`~/.shosts`或设置。`/etc/ssh/shosts.equiv`有关详细信息，请参阅`man ssh`“身份验证”部分。

# java - 使用 maven 构建时 jar 文件损坏

> ID：10797831
> 
> 赞同：30
> 
> 时间：2012-05-29T11:00:49.677
> 
> 标签：java, maven-plugin, maven-3

在构建战争文件时，我正在将一组 jar 从一个位置复制到战争中的一个文件夹。虽然文件确实被复制了，但是我认为它们被损坏了，因为在战争之外获取的 jar 的相同类文件使用调试器打开，而从战争文件中获取后它没有打开。

这是我的战争 pom.xml 的一部分，我在其中复制罐子

```
<execution> 
    <id>copy-jars</id> 
    <phase>process-resources</phase> 
    <goals> 
        <goal>copy-resources</goal> 
    </goals> 
    <configuration> 
        <outputDirectory>${basedir}/target/${project.artifactId}-${buildNumber}/somefolder</outputDirectory> 
         <resources> 
            <resource> 
                <directory>SomeSourceDirectory</directory> 
                <filtering>true</filtering> 
                <includes> 
                    <include>**/**</include> 
                </includes>
            </resource>
        </resources> 
    </configuration> 
</execution> 
```

*SomeSourceDirectory*有一些 jars 和一些其他文件 结果是：myWar/somefolder/a.jar 但是当我在调试器中打开这个 jar 中的类时..我在 WinZip 中得到错误

```
Invalid compressed data to extract.
Severe Error:  Compressed data is invalid 
```

但是，当我在原始文件夹（即战争之外）中查看相同的类文件时，可以查看它。那么在复制罐子时是否有错误？谢谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-29T12:25:33.577

删除`<filtering>true</filtering>`，它会损坏 jar 文件。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-18T16:50:30.120

此外，您可以继续受益于使用 maven 过滤而不会损坏内部的 jar。

我们选择从过滤的扩展中排除 jar。

在父 pom 的 pluginManagement 部分中，我们放置了这个配置

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.5</version>
    <configuration>
      <encoding>${project.build.sourceEncoding}</encoding>
      <nonFilteredFileExtensions>
        <nonFilteredFileExtension>jar</nonFilteredFileExtension>
        <nonFilteredFileExtension>pdf</nonFilteredFileExtension>
        <nonFilteredFileExtension>swf</nonFilteredFileExtension>
        <nonFilteredFileExtension>zip</nonFilteredFileExtension>
        <nonFilteredFileExtension>bz2</nonFilteredFileExtension>
        <nonFilteredFileExtension>gz</nonFilteredFileExtension>
        <nonFilteredFileExtension>acp</nonFilteredFileExtension>
        <nonFilteredFileExtension>bin</nonFilteredFileExtension>
        <nonFilteredFileExtension>odt</nonFilteredFileExtension>
        <nonFilteredFileExtension>doc</nonFilteredFileExtension>
        <nonFilteredFileExtension>xls</nonFilteredFileExtension>
      </nonFilteredFileExtensions>
    </configuration>
  </plugin> 
```

请注意，我们添加了 jar 扩展名以及默认的 maven 排除文件类型（毕竟它是一个 zip）。

除了避免存档损坏之外，它还加快了进程，因为它不必过滤大文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:36:24.973

试试[Maven 程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/)。将自定义资源添加到 *.war 文件是我最喜欢的插件。另请参阅[预定义描述符文件](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-05T08:17:18.097

添加后我遇到了类似的错误

```
<copy ...>
<fileset ... />
<filterchain>
    <tokenfilter>
         <replacestring from="..." to="..." />
    </tokenfilter>
</filterchain>
</copy> 
```

到我在 ANT 中的复制任务。它在复制 jar 文件时损坏了它们。我已经通过仅对目标文本文件而不是 jar 文件应用过滤器来解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-20T13:20:53.620

与其他答案一样，另一个选项是仅对需要过滤的资源启用过滤：

```
<build>
...
        <resources>
            <resource>
                <filtering>true</filtering>
                <directory>src/main/resources</directory>
                <includes>
                    <include>core.properties</include>
                </includes>
            </resource>
            <resource>
                <filtering>false</filtering>
                <directory>src/main/resources</directory>
                <includes>
                    <include>pdf/color_profile/sRGB.icc</include>
                </includes>
            </resource>
        </resources>
</build> 
```

# bash - "while :" 与 "while true"

> ID：10797835
> 
> 赞同：151
> 
> 时间：2012-05-29T11:01:27.063
> 
> 标签：bash

当您查看应该如何实现无限循环时，您大多会看到这种方法：

```
while :
do
  # loop infinitely
done 
```

但我就是不明白`:`这里的用途。使用会不会更好：

```
while true
do
  # loop infinitely
done 
```

?

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-29T11:03:55.960

从手册：

> : [参数] 没有效果；该命令除了扩展参数和执行任何指定的重定向之外什么都不做。返回零退出代码。

由于这总是返回零，因此类似于用作`true`

看看这个答案：[':'（冒号）GNU Bash Builtin 的目的是什么？](https://stackoverflow.com/a/3224910/702361)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-29T11:05:25.020

冒号是一个[内置命令](http://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html)，它什么都不做，但返回 0（成功）。因此，它比调用实际命令来做同样的事情更短（更快）。

# android - 两个从属微调器

> ID：10797847
> 
> 赞同：0
> 
> 时间：2012-05-29T11:02:07.627
> 
> 标签：android, spinner

第一个项目在 xml ( `<string-array>`) 中定义，但第二个项目应根据第一个项目上选择的内容呈现不同的项目字符串数组...

秒的可能字符串数组是使用`AsyncTask`（这部分正在工作）从 Web 服务中获取的。在我的`onPostExecute(Void result)`我有这个：

```
private class GetInfoTask extends AsyncTask<Void, Void, Void> {

    private ProgressDialog dialog = new ProgressDialog(StateTabActivity.this);

    //...
    @Override
    protected void onPostExecute(Void result) {
        Log.d("StateTabActivity","onPostExecute");
        sectorsArray = getSectorsName(); // sectorsArray is an array of strings
        roomsArray = getRoomsName(); // roomsArray is an array of strings
        subcategorySpinnerAdapter = new ArrayAdapter<String>(StateTabActivity.this, R.layout.my_spinner,sectorsArray);
        subcategorySpinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        subCategorySpinner.setAdapter(subcategorySpinnerAdapter);
        dialog.dismiss();
    }
} 
```

在`onCreate()`我的活动中，我有：

```
Spinner categorySpinner = (Spinner) findViewById(R.id.statetab_category_spinner);
    ArrayAdapter<String> categorySpinnerAdapter = new ArrayAdapter<String>(this, R.layout.my_spinner,getResources().getStringArray(R.array.array_category));
    categorySpinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    categorySpinner.setAdapter(categorySpinnerAdapter);

    subCategorySpinner = (Spinner) findViewById(R.id.statetab_subcategory_spinner);

    categorySpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            Log.d("StateTabActivity","in onitemselected");
            switch (arg2) {
            case 0:
                    //I want to set here the items of sectorsArray to be displayed on the second spinner (subCategorySpinner)
                break;
            case 1:
                    //I want to set here the items of roomsArray to be displayed on the second spinner (subCategorySpinner)
                break;

            default:
                break;
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    }); 
```

所以我的问题是：我应该怎么做才能将正确的数组绑定到第二个微调器，根据第一个微调器上的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:10:59.370

这是我根据所选州获取地区列表的代码。

```
 final Spinner state = (Spinner)_activity.findViewById(R.id.state);
    final Spinner district= (Spinner) _activity.findViewById(R.id.district);
   _activity.findViewById(R.id.name_of_city);
    state.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){

       @Override
       public void onItemSelected(AdapterView<?> adapter, View v, int i, long lng) {

            if(i == 0){
                districtAdapter =new ArrayAdapter<CharSequence>( _activity ,              android.R.layout.simple_spinner_item, **DistrictList**.AndraPradesh); 
  //DistricList is another class.its code given below
                                          districtAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                            district.setAdapter(districtAdapter);
                            if(_viewState == SAVED_VIEW){
                                                                                          district.setSelection(getArraySpinner(DistrictList.AndraPradesh,_initialValues.getAsString("District")),true);
            }
        } 
```

在 DistricList 类中，

```
public class DistrictList {
    public static final String[] AndraPradesh = new String[] {"Adilabad",
        "Anantapur",
        "Chittoor",
        "East Godavari",
        "Guntur",
        "Hyderabad",
        "Karimnagar",
        "Khammam"};
}

} 
```

# reflection - 使用 Scala 2.10-M3 反射时出现 AssertionError

> ID：10797850
> 
> 赞同：1
> 
> 时间：2012-05-29T11:02:25.150
> 
> 标签：reflection, scala-2.10

我正在尝试在以下（最简单的）代码中调用方法*typeOfInstance() ：*

```
import scala.reflect.mirror._

class Bar

object Main extends App {
  val bar = new Bar()
  typeOfInstance(bar)
} 
```

但我在执行时收到一个*AssertionError*：

```
java.lang.AssertionError: assertion failed: no symbol could be loaded from package annotation (scala equivalent is class com.hablapps.annotation.Bar) by name Bar 
```

上面的代码在 REPL 中运行良好（使用*:power*模式）。从 SBT（使用 Scala 2.10-M3 设置）运行时会出现问题。有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:23:17.180

这是 M3 的一个已知问题。

在 Scala 的预览版中，反射仅适用于简单的类加载方案（例如，当您使用 good old 运行应用程序时`java -cp <classpath> <name of the main class>`）。SBT 的参与度更高，而且事情变得很糟糕。

我们已经在 2.10.0-M4 中修复了这个问题。

# sencha-touch - Ext.ux.Image：无法读取未定义的属性“dom”

> ID：10797855
> 
> 赞同：2
> 
> 时间：2012-05-29T11:02:42.957
> 
> 标签：sencha-touch, sencha-touch-2

在我看来 Sencha 中我需要一个真正的`<img>`HTML 标签。

我从官方文档中检索到了这段代码：

```
Ext.define('Ext.ux.Image', {
    extend: 'Ext.Component', // subclass Ext.Component
    alias: 'widget.managedimage', // this component will have an xtype of 'managedimage'
    autoEl: {
        tag: 'img',
        src: Ext.BLANK_IMAGE_URL,
        cls: 'my-managed-image'
    },

    // Add custom processing to the onRender phase.
    // Add a ‘load’ listener to the element.
    onRender: function() {
        this.autoEl = Ext.apply({}, this.initialConfig, this.autoEl);
        this.callParent(arguments);
        this.el.on('load', this.onLoad, this);
    },

    onLoad: function() {
        this.fireEvent('load', this);
    },

    setSrc: function(src) {
        if (this.rendered) {
            this.el.dom.src = src;
        } else {
            this.src = src;
        }
    },

    getSrc: function(src) {
        return this.el.dom.src || this.src;
    }
}); 
```

当我尝试执行*setSrc*时，出现此错误：**无法读取未定义的属性“dom”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:53:42.117

您的代码来自 Ext.Js 4.x 文档。您应该使用 sencha touch 2 文档。请比较： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component)

和

[http://docs.sencha.com/touch/2-0/#!/api/Ext.Component](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component)

它们是不同的。

据我了解，您的视图中需要真正的 < img > 标签。如果您使用 Ext.Img，它将创建一个带有背景图像的 div 容器。我知道两种方法：

1.  设置 tpl 和 data 属性。

```
Ext.create('Ext.Component', {
  配置：{
    tpl：''，
    数据： {
      网址：'http://example.com/pics/1.png',
      imgClass: '我的班级'
    }
  }
});

```

1.  设置html配置。

```
Ext.create('Ext.Component', {
    配置：{
    html: '<img class="my-class" src="http://example.com/pics/1.png">'
    }
});
```

# magento - Internet Explorer 使图像比正常大

> ID：10797857
> 
> 赞同：0
> 
> 时间：2012-05-29T11:02:46.937
> 
> 标签：magento

我目前在我的网站上使用的自定义模板有问题：http: [//irishgourmet.ie](http://irishgourmet.ie)

在最新版本的 Firefox、Chrome 和 Safari 中，图像占位符（右上角）中的图像都可以正常加载且尺寸正确。但是在最新版本的 IE 中，第一个图像加载良好，然后后续图像很大。这种趋势适用于每个类别页面。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:29:20.683

首先，一定要掌握适用于 IE 的[Firebug Lite](http://getfirebug.com/firebuglite)。我使用书签。加载某些版本需要一段时间，但肯定不止一次救了我的屁股。

其次，我遇到了完全相反的问题。我认为右上角的图像没有问题，但是如果您指的是右侧的图像轮播，则第一个轮播图像很好，但其他图像被设置为

```
width: 178px;
height: 30px; 
```

并且加载非常小。他们看起来像[这样](http://i.imgur.com/LvXRZ.png)

希望这在某种程度上有所帮助。

# c# - 为什么 .NET Web 控件事件处理程序不是通用的？

> ID：10797861
> 
> 赞同：4
> 
> 时间：2012-05-29T11:03:07.280
> 
> 标签：c#, .net, generics

我一直在想这个问题；但尤其如此，因为过去几周我更专注于前端开发。这听起来像是一个宽泛的问题，但希望有一个答案，或者一个原因：

**为什么 .NET Web 控件事件处理程序不是通用的？**

## 推理

我问的原因是由于强类型事件处理程序的精巧和优雅。在我的整个项目中，无论何时需要，我都倾向于使用`EventHandler<T>`自 .NET 2.0 以来一直存在的 .NET 通用委托；正如[这里所讨论的](https://stackoverflow.com/a/129613/259656)。

```
public delegate void EventHandler<TArgs>(object sender, TArgs args) where TArgs : EventArgs 
```

对此进行扩展并为 the 定义一个类型会相对简单`sender`，就像这样。

```
public delegate void EventHandler<TSender, TArgs>(TSender sender, TArgs args) where TArgs : EventArgs 
```

每当使用 .NET 控件时，有时我会发现自己在代码隐藏而不是 ASPX 文件中绑定事件处理程序，然后`object`如果我需要进行任何额外的检查或更改，则必须将其转换为所需的类型。

# 现存的

**定义**

```
public class Button : WebControl, IButtonControl, IPostBackEventHandler
{
    public event EventHandler Click;
} 
```

**执行**

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    this.MyButton.Click += new EventHandler(MyButton_Click);
}

protected void MyButton_Click(object sender, EventArgs e)
{
    // type cast and do whatever we need to do...
    Button myButton = sender as Button;
} 
```

# 通用的

**定义**

```
public class Button : WebControl, IButtonControl, IPostBackEventHandler
{
    public event EventHandler<Button, EventArgs> Click;
} 
```

**执行**

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    this.MyButton.Click += new EventHandler(MyButton_Click);
}

protected void MyButton_Click(Button sender, EventArgs e)
{
    // no need to type cast, yay!
} 
```

我知道这是一个相对较小的变化，但它肯定更优雅吗？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:04:49.057

因为老了。

Web 控件是为 .NET 1.0 开发的，而泛型直到 .NET 2.0 才出现。

当然，控件可能已经更改，但这意味着所有旧代码都需要更改才能编译（并且它们需要重新编译，因为旧二进制文件不再工作），以及所有旧示例（数百万网页）将过时。

# javascript - 可拖动开关？

> ID：10797862
> 
> 赞同：1
> 
> 时间：2012-05-29T11:03:12.600
> 
> 标签：javascript, jquery, css

它可能看起来有点乏味和基本，但实际上我很难找到一个好的解决方案来解决我的问题。

我正在使用 jQuery 制作漂亮的可拖动元素。我想做的是将可拖动元素锚定在我想要的任何地方，上面有一个按钮/链接。

您可以在单击按钮时考虑禁用/启用可拖动对象：它具有我想要的效果，但它对可拖动对象设置了奇怪的效果，将其呈现为半白色（这是您期望禁用的效果，我不争论）。

底线是：我如何应用 - 更重要的是 - 删除元素上的可拖动属性？有没有一种：

`$( "#draggable" ).draggable(false);`

这只会让我的元素再次正常，或者只是阻止它移动而不改变它的外观？

提前致谢！

编辑：我已经使用了该`.draggable("disable")`功能，它改变了元素的外观，因此我正在寻找另一种解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:06:31.583

是的，您可以禁用元素可拖动：

```
$('#draggable').draggable( "disable" ); 
```

[在此处查看文档](http://jqueryui.com/demos/draggable/#method-disable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:09:47.080

提问前先google一下，谢谢=）

这将禁用可拖动

```
myObject.draggable( 'disable' ) 
```

这使得它

```
myObject.draggable( 'enable' ) 
```

这里已经有问题回答您的问题：[如何禁用 jquery-ui 可拖动？](https://stackoverflow.com/questions/1324044/how-to-disable-jquery-ui-draggable)

# java - 使用 Apache common-cli 解析参数

> ID：10797866
> 
> 赞同：1
> 
> 时间：2012-05-29T11:03:33.240
> 
> 标签：java, command-line-interface, apache-commons, apache-commons-cli

Apache common-cli 在其网站上有一个`ls`命令示例：

```
options.addOption( "a", "all", false, "do not hide entries starting with ." );
options.addOption( "A", "almost-all", false, "do not list implied . and .." );
options.addOption( "b", "escape", false, "print octal escapes for nongraphic " + "characters" );
options.addOption( OptionBuilder.withLongOpt( "block-size" )
                                .withDescription( "use SIZE-byte blocks" )
                                .hasArg()
                                .withArgName("SIZE")
                                .create() ); 
```

这显示了这样的帮助：

```
-a, --all                  do not hide entries starting with .
-A, --almost-all           do not list implied . and ..
-b, --escape               print octal escapes for nongraphic characters
    --block-size=SIZE      use SIZE-byte blocks 
```

1.  当我编写此代码时，它显示`--block-size <SIZE>`. 我想展示这样的东西：（`-z,--block-size=SIZE`不仅仅是长选项）。
2.  `PosixParser`和有什么区别`GnuParser`？我在代码中更改了它们，我没有观察到任何差异。
3.  例如，当我提供错误选项时，`h`它没有`throw`任何`ParseException`. 程序正常启动和结束。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:14:48.280

1.  示例中的块大小选项只有一个长格式，这就是为什么没有显示短选项的原因。如果你添加一个短别名，你会得到你期望的结果

2.  `PosixParser`并且`GnuParser`在最新版本的 Commons CLI 中已弃用。新的统一解析器可用作`DefaultParser`. posix 解析器能够解析连接的短选项，例如`tar -zxvf foo.tar.gz`.

3.  额外选项要么作为应用程序的参数处理，要么触发异常，具体取决于`stopAtNonOption`解析器参数的值。

# android - 声音在 ICS 中不起作用

> ID：10797870
> 
> 赞同：0
> 
> 时间：2012-05-29T11:03:41.430
> 
> 标签：android, android-layout, android-widget

我正在使用媒体播放器播放声音文件。它在 2.2 和 2.3 上运行良好，但在 ICS 4.0.3 上运行良好，我检查过移动设备未处于静音模式。我的代码是：

```
private MediaPlayer mediaPlayer;
private void playSound(int soundType) {
    try {
        mediaPlayer = MediaPlayer.create(this, R.raw.beep);
        if (!mediaPlayer.isPlaying()) {
            mediaPlayer.start();
        }
        mediaPlayer.setOnCompletionListener(new OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mediaPlayer) {
                mediaPlayer.release();
            }
        });
    } catch (IllegalStateException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:19:28.670

ICS中的声音是这样播放的：（我从以前的帖子中复制了它，所以如果那里有任何奇怪的东西我道歉）

```
AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
int mSoundID = mSoundPool.load(this, R.raw.sound1, 1);
float lActualVolume = (float) audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
float lMaxVolume = (float) audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
float lVolume = lActualVolume / lMaxVolume;
// Is the sound loaded already?
if (mSoundIsLoaded) {
     mSoundPool.play(mSoundID, lVolume, lVolume, 1, 0, 1f);
} 
```

您必须将声音文件放在 assets/raw 目录中。

编辑：我忘了提到 mSoundIsLoaded 参数的来源。我在加载声音时设置它。我在我的 onCreate 方法中执行此操作。加载声音时，我设置了名为 mSoundIsLoaded 的布尔字段。我这样做是为了在播放声音时防止 NullPointerExceptions 声音的加载看起来像这样：

```
mSoundPool = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
    @Override
    public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
         mSoundIsLoaded = true;
    }
});
mSoundID = mSoundPool.load(this, R.raw.sound1, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:51:25.070

这是我在我的应用程序中使用的代码。它在 ICS 中运行良好

公共无效playWelcomeAudio（）{

```
 Thread t = new Thread()
    {
        @Override
        public void run() {

                AssetFileDescriptor afd = getApplicationContext().getResources().openRawResourceFd(R.raw.welcome); 

                try {
                    if(afd!=null)
                    {
                        UtilLog.d(TAG, "INIT MEDIA PLAYER");
                        welcomeAudio = new MediaPlayer();
                        welcomeAudio.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getDeclaredLength());
                        welcomeAudio.prepare();
                        welcomeAudio.start();
                    }
                } catch (Exception e) {
                    UtilLog.e(TAG, "Audio error", e);
                }

        }
    };
    t.start();
} 
```

您可以删除线程。这不是必需的。

# jquery - 使用 jQuery 在当前行之后添加新表行

> ID：10797876
> 
> 赞同：6
> 
> 时间：2012-05-29T11:04:02.260
> 
> 标签：jquery, event-handling, clone

我正在尝试添加新行，它是当前行的克隆。我尝试了以下代码。它不会弹出错误，但也不会添加行。我的代码有什么错误？有没有其他简单的想法？

```
 $('input[name="cmdAddRow"]').live('click', function(){
            $curRow = $(this).parent('tr');
            $newRow = $curRow.clone(true);
            console.log($newRow);
            $curRow.after($newRow);
            console.log('added');
        }); 
```

HTML 布局：

```
<table>
    <tr>
        <td><input type="hidden" name="uin" value="xxx"></td>
        <td><input type="text" name="uname" value=""></td>
        <td><input type="text" name="uadd" value=""></td>
        <td><input type="text" name="utel" value=""></td>
        <td><input type="button" name="cmdAddRow" value="Add"></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-29T11:15:22.643

`$(this).parent('tr')`不会找到任何东西。您的`input`元素将位于 a`td`或 a内`th`。`parent`只找到元素的直接父元素，然后将其与您提供的选择器进行比较。因此它将一无所获。然后你什么都不克隆，然后在旧的空之后插入新的空。也许不出所料，这实际上并没有做任何事情。

您需要使用`closest`，它找到最近的元素以匹配选择器

```
var $curRow = $(this).closest('tr'); 
```

另请注意，您正在使用全局变量，因为您没有使用`var`（我在上面的行中更正了这一点），您可能不想这样做。此外，`live`不是一个好用的功能；改用`on`，它更优雅地做同样的事情：

```
$('#yourTable').on('click', 'input[name="cmdAddRow"]', function() {
    var $curRow = $(this).closest('tr'),
        $newRow = $curRow.clone(true);
    console.log($newRow);
    $curRow.after($newRow);
    console.log('added');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:16:39.070

您必须使用[$.closest](http://api.jquery.com/closest/)或[$.parents](http://api.jquery.com/parents/)而不是`$.parent`这样

```
 $('input[name="cmdAddRow"]').live('click', function(){
        $curRow = $(this).closest('tr');
        $newRow = $curRow.clone(true);
        console.log($newRow);
        $curRow.after($newRow);
        console.log('added');
    });​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/5U5dw/1/)

你应该考虑使用[$.on](http://api.jquery.com/on)因为 $.live 现在已经贬值了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:15:19.477

不推荐使用 use`on`而不是`live`,`live`因为最新版本的 jQuery，您的`parent()`选择`td`元素，使用 2`parent()`方法或`closest('tr')`：

```
 $('input[name="cmdAddRow"]').on('click', function(){
            $curRow = $(this).parent().parent();
            $newRow = $curRow.clone(true);
            console.log($newRow);
            $curRow.after($newRow);
            console.log('added');
 }); 
```

[http://jsfiddle.net/qVm75/3/](http://jsfiddle.net/qVm75/3/)

# mysql - MySQL：插入当前日期加上特定时间

> ID：10797877
> 
> 赞同：5
> 
> 时间：2012-05-29T11:04:05.413
> 
> 标签：mysql, insert

如何插入具有当前日期*和*特定时间的字段？
我的目标是在 17:30:00 的特定时间插入 CURDATE()。

我试过了，
`INSERT INTO table VALUES('', CURDATE(+ ' 17:30:00'))`
但它不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T11:11:27.977

尝试这个 -

```
 CONCAT(CURDATE(), ' 17:30:00') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:11:54.683

```
INSERT INTO table VALUES('', DATE_ADD(CURDATE(), INTERVAL '17:30:00' HOUR_SECOND)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:10:17.610

尝试使用间隔：

```
select interval 17 hour + curdate(); 
```

或者：

```
select interval '17:30' hour_minute + curdate(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:11:08.787

您可以`INSERT`像这样格式化您的 -statement 以将日期与您想要的时间值连接起来：

```
INSERT INTO yourtable (yourdatefield)
VALUES (
    CONCAT(CURDATE(), 
    " 01:23:45")
); 
```

该语句当然要根据您的表和字段名称和配置进行调整。

# java - 在 Lingpipe 语言模型中如何理解这个公式？

> ID：10797878
> 
> 赞同：1
> 
> 时间：2012-05-29T11:04:22.100
> 
> 标签：java, nlp

[这是来自 Lingpipe doc](http://alias-i.com/lingpipe/docs/api/com/aliasi/lm/NGramProcessLM.html)在构建语言模型中的手册。但我只是部分理解其背后的理论。

我尤其不知道基本概率。

![在此处输入图像描述](../Images/9845ff71f081a3aa28c7417f81051641.png)

![在此处输入图像描述](../Images/b435e595db1c9107270bfa7745f0807d.png)

在这里，如何获得基数 p(d)。如果下面是 unigram 文件中令牌的一部分及其频率。

```
ab  20
aba 3
abd 2
abef 2
abkk 3 
```

在这种情况下，什么是 lamda()、1-lamda()、extcount、numExtentions 和 Base P(ab)？这是一个问题，但它们被束缚了。

非常感谢。

# vb.net - 根据数据库中的值在行上显示超链接字段

> ID：10797882
> 
> 赞同：0
> 
> 时间：2012-05-29T11:04:33.900
> 
> 标签：vb.net, gridview, hyperlink, rowdatabound

如何根据从数据库生成的行上的值动态显示超链接字段上的“编辑”。

N/B.：gridview 自动生成行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:09:22.727

你的意思是你想`DataGridViewLinkColumn`在网格中显示**编辑**（如果合适）？像这样：

![在此处输入图像描述](../Images/607717835b502395fce5eb15a216f032.png)

在这种情况下，将整个列设为 LinkColumn 并且它是否可点击将由网格在内部进行处理。不显示**编辑**的列将不可点击。

如果您不是这个意思，请提供更多详细信息。

# c# - 在平铺地图 XNA 上显示精灵

> ID：10797888
> 
> 赞同：3
> 
> 时间：2012-05-29T11:05:15.253
> 
> 标签：c#, xna

我正在学习 XNA，但在将精灵放置到瓷砖地图上时遇到了一些困难。

这是我尝试过的：

```
public void Draw(SpriteBatch spriteBatch,int tileWidth,int tileHeight)
    {
        spriteBatch.Draw( texture , position , Color.White );
    }// This code draws the sprite but the sprite is not on the tile map but outside it.

public void Draw(SpriteBatch spriteBatch,int tileWidth,int tileHeight)
    {
        spriteBatch.Draw( texture , new Rectangle( ( int )position.X * tileWidth , ( int )position.Y * tileHeight , tileWidth , tileHeight ) , Color.White );
    }// And this code does nothing, doesnt even draw the sprite 
```

这是二维数组：

```
int[ , ] map = {
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
                        {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
                        {0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
                        {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
                        {0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
                        {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, },
                   }; 
```

其中 0 = 墙壁 & 1 = 路径

请告诉我或建议我如何仅在地图上绘制精灵？

谢谢

编辑：我遇到的问题是精灵（右下角的黑色方块）如果向左移动，会在棕色（这是瓷砖地图的prt）后面。我怎样才能使它在瓦片地图的顶部而不是在下面移动

![游戏画面中](../Images/74558fad529eb9840d322a11a01c3e6f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:34:45.263

为了防止你的精灵落后于棕色瓷砖，你需要在调用`SpriteSortMode`之前设置属性`SpriteBatch.Begin()`

进一步阅读：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx)

# c# - WPF 中的链引用程序集

> ID：10797891
> 
> 赞同：3
> 
> 时间：2012-05-29T11:05:26.850
> 
> 标签：c#, wpf, c#-4.0, assemblies, external-assemblies

今天我想知道你如何在 C# WPF 中配置你的项目，它引用了链中的其他程序集。通过“链中”，我的意思是这样的：

*   我们有引用程序集插件的应用程序
*   插件程序集是指插件使用的资源所在的资源，例如。图片
*   主应用程序不以任何方式引用资源。

下图说明了我刚才所说的：
![链参考装配体](../Images/21b7028f8638da3b0132adef68502e77.png)

问题是资源没有复制到应用程序的bin文件夹，导致插件（图像上的Ctrl）资源查找失败。

**解决方法**

有一些解决方法，只需将资源包含到主应用程序的引用或使用构建后步骤并在该步骤中手动复制所需的文件。

**结论**

最后，我想问一下你是如何处理这个问题的。*除了我在解决方法*部分提到的解决方案之外，还有其他解决方案吗？我在项目的配置中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:42:31.920

确保插件项目属性中的输出目录与应用程序的输出目录相同。否则，您必须自己复制文件。

第二种选择是使用嵌入式资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:54:44.440

如果您从与 EXE 不同的文件夹动态加载插件，您还可以将其依赖项复制到与插件相同的文件夹并动态加载这些程序集。然后，您需要处理 AssemblyResolve 以便解析已加载的程序集，而不是尝试查找新程序集：

```
AppDomain.CurrentDomain.AssemblyResolve += CurrentDomain_AssemblyResolve;
    private Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
    {
        var domain = (AppDomain)sender;
        var assemblies = domain.GetAssemblies();
        return assemblies.FirstOrDefault(assembly => assembly.GetName().Name == args.Name.Split(',')[0]);
    } 
```

上面的代码做了版本和强命名不敏感匹配；如果你想要更严格的东西，你可以在这里实施你自己的政策。

# javascript - 谷歌地图 - 将灰度自定义样式应用于地形视图

> ID：10797892
> 
> 赞同：0
> 
> 时间：2012-05-29T11:05:40.980
> 
> 标签：javascript, google-maps-api-3

我做了这样的事情：

[http://static.cmslog.com/testapp/google/terrain](http://static.cmslog.com/testapp/google/terrain)

我现在想要实现的是具有灰度样式的地形图，如下所示：

[http://static.cmslog.com/testapp/google/maps](http://static.cmslog.com/testapp/google/maps)

现在我应用了相同的规则（饱和度：全部 -100），但它不起作用。我在这里也不能达到这个效果：

[http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

有谁知道，如何制作灰度地形图，如下图所示：

![灰度地形图](../Images/0a8a7a71845a73f47d90b7f92f1cdcc8.png)

我没有提供任何代码，因为我所拥有的只是上面粘贴的链接。

此[方法](https://stackoverflow.com/questions/9076820/google-maps-using-custom-json-styling-and-terrain-view)也不起作用：/

*   抱歉，如果上面的链接将在一段时间后停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:32:53.220

谷歌似乎不允许 [没有能力] 地形图瓦片以样式显示土地。除了土地本身，你可以设计任何东西。

所以：做不到。服务条款只允许你做 API 能够做的事情，它不能在地形图中设置土地样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:38:55.060

根据@Andrew Leach 所写的，唯一的方法是将地形图图像转换为灰度（即在PHP 中）并将它们缓存在您自己的服务器中。然后你可以用 HTML 替换它们，就像我在这里所做的那样：

[http://static.cmslog.com/testapp/google/terrain-tweak](http://static.cmslog.com/testapp/google/terrain-tweak)

编辑：但正如下面的评论中所述，它违反了 ToS，因此不能以这种方式完成，并且链接现在已关闭。

# facebook - 无法注销，它使用 google/facebook oauth 2.0 和 spring security

> ID：10797896
> 
> 赞同：0
> 
> 时间：2012-05-29T11:06:18.207
> 
> 标签：facebook, spring-security, google-api, oauth-2.0, logout

我可以从我的网站注销，而无需实际删除 google/facebook cookie。我正在使用弹簧安全，

```
<a href='<c:url value='/j_spring_security_logout'/>'>Sign out</a> 
```

这只是帮助我从我的网站注销，完全注销的程序是什么，即我想删除 google/facebook 用户 cookie，以便我可以完全注销

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:22:52.987

使用 SDK 中的 getLogoutURL() 函数从 Facebook 注销用户，然后将他们重定向到安全注销 URL。

`https://www.facebook.com/logout.php?next={site_logout_page}&access_token={access_token}`

# c# - 获取更新面板导致在 pageLoad 事件中回发

> ID：10797898
> 
> 赞同：0
> 
> 时间：2012-05-29T11:06:28.450
> 
> 标签：c#, javascript, asp.net, asp.net-ajax, updatepanel

我如何确定哪个更新面板导致`function pageLoad()`事件回发？

我的`pageLoad`eventet 触发了两次，我认为这是因为我的 2 个更新面板而发生的

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:16:27.950

您可以改为处理[`BeginRequest`-Event](http://msdn.microsoft.com/en-us/library/bb397432.aspx)并使用该[`get_updatePanelsToUpdate()`](http://msdn.microsoft.com/en-us/library/ee216366.aspx)方法获取`UpdatePanel`应重新呈现其内容的 (s) 的 ID：

```
<script type="text/javascript">
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_beginRequest(onBeginRequest);

    function onBeginRequest(sender, args) {
        var updatePanelID = args.get_updatePanelsToUpdate();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:43:04.553

您应该能够从 __EVENTTARGET 表单字段中看出这一点。

# android - 如何在android中使用JXL打开Excel文件

> ID：10797899
> 
> 赞同：1
> 
> 时间：2012-05-29T11:06:30.647
> 
> 标签：android, excel

我想在 Android 手机上从 SDCARD 打开 Excel 文件。我应该使用哪个 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:22:30.987

我认为您必须使用诸如[JExcelApi之类的 API](http://jexcelapi.sourceforge.net/)

我没有使用此 API 的经验，但显然您可以[将它与 Android 一起使用](http://www.kylebeal.com/2011/10/using-jexcelapi-in-an-android-app/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:10:40.417

我认为您仍然希望使用[JExcelApi](http://jexcelapi.sourceforge.net/)来读取文件的内容。至于在 Android 设备上显示数据，您可能需要查看[TableLayout](http://developer.android.com/resources/tutorials/views/hello-tablelayout.html)。[这](https://stackoverflow.com/questions/1355860/how-to-create-a-spreadsheet-kind-of-display-in-android)是一个概述 TableLayout 以创建电子表格类型显示的答案。这也可以通过将 Excel 文件内容读入 HTML 并在[WebView中显示 HTML 来完成](http://developer.android.com/reference/android/webkit/WebView.html)

# android - 我应该使用 Parcel 还是 Sqllite 进行 2 级缓存？

> ID：10797901
> 
> 赞同：2
> 
> 时间：2012-05-29T11:06:31.727
> 
> 标签：android

如何选择使用 sqlite 或文件存储？出于缓存原因，我需要存储一些 pojo。我应该怎么做sqlite或文件系统？

# xcode - 在 Xcode 中，项目导航器中过滤框的任何热键？

> ID：10797904
> 
> 赞同：10
> 
> 时间：2012-05-29T11:06:39.810
> 
> 标签：xcode, macos

Xcode中是否有任何热键可以直接进入项目导航器中的过滤框？

![在此处输入图像描述](../Images/4183d70561af0cddec6783fb363b18e5.png)

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T11:08:22.650

它是`⌘</kbd>+`⌥</kbd>+`j```

如果要在查找组件时过滤右侧，请使用`⌘</kbd>+`⌥</kbd>+`l` (small caps L).``

# c++ - 默认构造函数不会抛出 C++ 异常？

> ID：10797909
> 
> 赞同：1
> 
> 时间：2012-05-29T11:07:02.103
> 
> 标签：c++, exception

> **可能重复：**
> [为什么使用空括号调用不带参数的构造函数是错误的？](https://stackoverflow.com/questions/180172/why-is-it-an-error-to-use-an-empty-set-of-brackets-to-call-a-constructor-with-no)

我有一个非常简单的 C++ 类“A”，它的空构造函数在 main 中调用。唯一一个空的 c'tor 只是抛出一个异常**SomeException**。

```
#include <iostream>
using namespace std;

class SomeException : public exception { };

class A {

public:
    A() {
        throw SomeException();
    }

};

int main() {
    try {
        //A a();
        A a;
        cout << "No exception." << endl;
    }
    catch (SomeException& se) {
        cout << "Caught se." << endl;
    }
} 
```

当我调用 A 的构造函数时没有像下面这样的括号，它正确地抛出了预期的异常。

```
A a; 
```

这种情况下的输出是：

```
$ ./a.exe
Caught se. 
```

但是如果我用下面的语法调用 c'tor，它不会抛出异常，并继续下一行，就好像什么都没发生一样！

```
A a(); 
```

在这种情况下，输出是......

```
$ ./a.exe
No exception. 
```

我在 Ubuntu 11.10 和 windows usign minGW 上尝试了上述程序，都给出了相同的结果。我为 minGW 使用 GCC 版本 4.5.2，为 Ubuntu 使用 4.6.1。

关于这种奇怪行为的任何线索？这是 gcc 中的错误，还是我的方式不正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T11:08:01.567

```
A a(); 
```

是函数声明，而不是对象实例化。不构造对象，不调用构造函数，不抛出异常。

它被称为**最令人头疼的 parse**。

这不是错误，完全没问题。

这两个：

```
A a();
A b; 
```

不等价。第二个创建一个`A`名为的类型的对象`b`。第一个声明了一个`a`不带参数并返回的方法`A`。

# javascript - 如何定位 Bootstrap 弹出框？

> ID：10797912
> 
> 赞同：56
> 
> 时间：2012-05-29T11:07:16.830
> 
> 标签：javascript, css, twitter-bootstrap, css-position, popover

我正在尝试为位于 960px 宽网页右上角的触发器放置一个 Bootstrap 弹出框。

理想情况下，我会将它放在底部并使用 CSS 移动箭头（因此箭头位于弹出框的右上角）。不幸的是，'placement':'bottom' 定位是不够的，因为它会将它置于触发器下方。

我正在寻找将弹出框静态放置在触发器的下方和左侧的解决方案。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-18T23:03:52.373

这行得通。经测试。

```
.popover {
    top: 71px !important;
    left: 379px !important;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-09-15T01:22:51.877

只需向您的弹出框添加一个属性！如果您赶时间，请参阅[我的 JSFiddle 。](https://jsfiddle.net/Sydney_o9/66uqd12s/7/)

我们想为特定的弹出框添加一个 ID 或一个类，以便我们可以通过 CSS 以我们想要的方式自定义它。

*请注意，我们不想自定义所有弹出框！这是一个可怕的想法。*

这是一个简单的示例 - 像这样显示弹出框：

[![在此处输入图像描述](../Images/3ed7d1d184869f6eb090119b0f976b9b.png)](https://i.stack.imgur.com/SPKT0.png)

```
// We add the id 'my-popover'
$("#my-button").popover({
    html : true,
    placement: 'bottom'
}).data('bs.popover').tip().attr('id', 'my-popover');
```

```
#my-popover {
    left: -169px!important;
}
#my-popover .arrow {
    left: 90%
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<button id="my-button" data-toggle="popover">My Button</button>
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-13T21:34:20.567

我创建了一个提供 4 个附加位置的 jQuery 插件：topLeft、topRight、bottomLeft、bottomRight

您只需包含缩小的 js 或未缩小的 js，并将匹配的 css（缩小与未缩小）放在同一文件夹中。

[https://github.com/dkleehammer/bootstrap-popover-extra-placements](https://github.com/dkleehammer/bootstrap-popover-extra-placements)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-12-08T15:49:35.120

# **Popover 的视口 (Bootstrap v3)**

在所有情况下都适合您的最佳解决方案是使用Bootstrap Popover的**视口**选项，尤其是在您的网站具有流动宽度的情况下。

这将使弹出框在您分配的选择器内占据宽度。因此，如果触发按钮位于该容器的右侧，则当弹出框位于该区域内时，引导箭头也会出现在右侧。见[jsfiddle.net](https://jsfiddle.net/qor5scka/13/)

如果您想从容器边缘留出一些空间，您也可以使用**填充。**如果你不想填充，只需使用**viewport: '.container'**

```
$('#popoverButton').popover({
   container: 'body',
   placement: "bottom",
   html: true,   
   viewport: { selector: '.container', padding: 5 },
   content: '<strong>Hello Wooooooooooooooooooooooorld</strong>'
 }); 
```

在以下 html 示例中：

```
<div class="container">
   <button type="button" id="popoverButton">Click Me!</button>
</div> 
```

并使用 CSS：

```
.container {
  text-align:right;
  width: 100px;
  padding: 20px;
  background: blue;
} 
```

# **Popover 的边界 (Bootstrap v4)**

与视口类似，在 Bootstrap 版本 4 中，popover 引入了新的选项**边界**

[https://getbootstrap.com/docs/4.1/components/popovers/#options](https://getbootstrap.com/docs/4.1/components/popovers/#options)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-18T10:15:51.887

我通过向引导 css 库添加一些代码行来解决这个问题（部分）。您将不得不修改 tooltip.js、tooltip.less、popover.js 和 popover.less

在 tooltip.js 中，在 switch 语句中添加这种情况

```
case 'bottom-right':
          tp = {top: pos.top + pos.height, left: pos.left + pos.width}
          break 
```

在 tooltip.less 中，将这两行添加到 .tooltip{}

```
&.bottom-right { margin-top:   -2px; }
&.bottom-right .tooltip-arrow { #popoverArrow > .bottom(); } 
```

在 popover.js 和 popover.less 中做同样的事情。基本上，无论您在哪里找到提到其他位置的代码，都相应地添加您想要的位置。

正如我之前提到的，这部分解决了问题。我现在的问题是弹出框的小箭头没有出现。

**注意：**如果你想让弹出框在左上角，使用'.top'的top属性和'.left'的left属性

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-26T09:30:09.697

引导 3.0.0：

```
.popover{ right:0!important; } 
```

也修改

```
.popover { max-width:WWWpx!important; } 
```

其中 WWW 是显示弹出框内容的正确最大宽度。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-22T21:11:05.140

我必须对弹出框进行以下更改，使其位于下方并有一些重叠并正确显示箭头。

*js*

```
case 'bottom-right':  
    tp = {top: pos.top + pos.height + 10, left: pos.left + pos.width - 40}  
    break 
```

*css*

```
 .popover.bottom-right .arrow {  
      left: 20px; /* MODIFIED */  
      margin-left: -11px;  
      border-top-width: 0;  
      border-bottom-color: #999;  
      border-bottom-color: rgba(0, 0, 0, 0.25);  
      top: -11px;  
    }  
    .popover.bottom-right .arrow:after {  
      top: 1px;  
      margin-left: -10px;  
      border-top-width: 0;  
      border-bottom-color: #ffffff;  
    } 
```

这可以扩展到其他地方的箭头位置..享受！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-06T07:09:51.843

如果您查看[引导程序源代码](https://github.com/twbs/bootstrap/blob/master/js/tooltip.js#L262)，您会注意到可以使用边距修改位置。

因此，首先您应该更改弹出框模板以添加自己的 css 类，以免与其他弹出框冲突：

```
$(".trigger").popover({
  html: true,
  placement: 'bottom',
  trigger: 'click',
  template: '<div class="popover popover--topright" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
}); 
```

然后使用 css 你可以很容易地改变 popover 的位置：

```
.popover.popover--topright {
  /* margin-top: 0px; // Use to change vertical position */
  margin-right: 40px; /* Use to change horizontal position */
}
.popover.popover--topright .arrow {
  left: 88% !important; /* fix arrow position */
} 
```

此解决方案不会影响您拥有的其他弹出框。同样的解决方案也可以用于工具提示，因为 popover 类继承自工具提示类。

[这是一个简单的jsFiddle](https://jsfiddle.net/buksy/zabyhf43/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-20T03:40:22.677

你当然可以。幸运的是，有一种干净的方法可以做到这一点，它也在 Bootstrap 弹出框/工具提示文档中。

```
let mySpecialTooltip = $('#mySpecialTooltip); 
mySpecialTooltip.tooltip({
 container: 'body',
 placement: 'bottom',
 html: true,
 template: '<div class="tooltip your-custom-class" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'
}); 
```

在你的css文件中： -

```
.your-custom-class {
 bottom: your value;
} 
```

确保在 bootstrap 的工具提示文档中添加模板，并添加您的自定义类名称并使用 css 对其进行样式设置

而且，就是这样。[您可以在https://getbootstrap.com/docs/4.0/components/tooltips/](https://getbootstrap.com/docs/4.0/components/tooltips/)上找到更多相关信息

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-18T22:37:32.520

也许您不需要这种逻辑来进行响应行为。

例如

```
placement: 'auto left' 
```

Bootstrap 3 具有**放置的****自动**值。[引导文档](http://getbootstrap.com/javascript/)：

 **> 当指定“自动”时，它将动态地重新定位工具提示。例如，如果放置为“自动向左”，则工具提示将尽可能显示在左侧，否则将显示在右侧。**

# maven - 如何在 Build.scala 中包含与分类器的依赖关系

> ID：10797915
> 
> 赞同：2
> 
> 时间：2012-05-29T11:07:23.163
> 
> 标签：maven, playframework, dependencies

我正在将 Play Framework 用于一个小项目。它依赖于具有如下分类器的 maven 包：

```
<dependency>
      <groupId>org.example.something</groupId>
      <artifactId>something-ejb</artifactId>
      <version>1.0</version>
      <classifier>client</classifier>
</dependency> 
```

我想包含这个客户端包......但我还没有找到一种方法告诉 sbt 我想要那个分类器......

通常我会添加以下内容：

```
val appDependencies = Seq(
      "org.example.something" % "something-ejb" % "1.0"
) 
```

但那又如何呢？我在哪里包含分类器客户端？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:19:57.293

我会深入研究看起来像这样[的文档：](http://code.google.com/p/simple-build-tool/wiki/LibraryManagement#Classifiers)

```
val testng = "org.testng" % "testng" % "5.7" classifier "jdk15" 
```

# android - 在 android JNI 中释放本地引用

> ID：10797917
> 
> 赞同：3
> 
> 时间：2012-05-29T11:07:37.440
> 
> 标签：android, android-ndk

在我编写的 android 代码的 jni 层中，我将一个数组从 jni 层返回到 java 层。我正在使用 DeleteLocalRef() 在传递结果之前释放本地引用。我只是想确保我编写的代码是正确的。请在下面找到代码。感谢任何帮助。

```
extern "C"
{
JNIEXPORT jbyteArray JNICALL Java_com_jni_btRead(JNIEnv* env, jobject)
{

    unsigned char* reply = btRead();

    jbyteArray jba;
    if(reply)
    {       
        jba = env->NewByteArray(2048);
        env->SetByteArrayRegion(jba, 0, 2048, reinterpret_cast<jbyte*>(reply));
    }
    else
    {       
        jba = env->NewByteArray(0);
    }

    env->DeleteLocalRef(jba);
    return jba;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:11:51.060

来自[这里](http://java.sun.com/docs/books/jni/html/refs.html)的报价：

> 本地引用仅在创建它的本机方法的动态上下文中有效，并且仅在本机方法的一次调用中有效。在本地方法执行期间创建的所有本地引用将在本地方法返回后被释放。

因此，您可能无法释放本地参考，因为它会自动释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:55:42.183

局部变量总是在堆栈段中创建，因此在从函数返回后被销毁。这张图可能会有所帮助。

![局部变量赋值](../Images/f02f1986b9ef48bf616c8c3d56d9ebbc.png)

# java - Proguard 和 3rd 方库

> ID：10797921
> 
> 赞同：2
> 
> 时间：2012-05-29T11:07:53.600
> 
> 标签：java, obfuscation, proguard

我有一个可运行的罐子，里面有几个 3rd 方罐子。我是否必须使用 Proguard 的 -libraryjar 选项指定这些库，即使它们已经打包在主 jar 文件中？

目前我有这些错误：

```
Warning: there were 171 unresolved references to classes or interfaces.
Warning: there were 394 instances of library classes depending on program classes.
Warning: there were 1 unresolved references to program class members. 
```

如果我使用 -libraryjar 选项指定 jar，Proguard 会发出很多关于重复类的警告。

我的蚂蚁构建：

```
<target name="jar" depends="compile">
    <delete file="${destfile}" />
    <jar destfile="${destfile}" filesetmanifest="mergewithoutmain" duplicate="preserve">
        <manifest>
            <attribute name="Main-Class" value="main.Main"/>
            <attribute name="Class-Path" value="${classpath}"/>
        </manifest>
    <fileset dir="${target}" includes="**/*.class" />
        <zipfileset excludes="META-INF/*.SF" src="lib1.jar" />
        <zipfileset excludes="META-INF/*.SF" src="lib2.jar" />
        <zipfileset excludes="META-INF/*.SF" src="lib3.jar" />
    </jar>
</target>

<target name="dist" depends="jar">
    <taskdef resource="proguard/ant/task.properties" classpath="${proguard}" />
    <proguard>
        -injars      ${destfile}
        -outjars     ${destfileobfuscated}
        -libraryjars C:/Java/jdk1.6.0_25/jre/lib/rt.jar;
                     C:/Java/jdk1.6.0_25/jre/lib/jsse.jar;
                     C:/Java/jdk1.6.0_25/jre/lib/jce.jar;
                     lib1.jar;
                     lib2.jar;
                     lib3.jar

        -optimizationpasses 5
        -overloadaggressively
        -repackageclasses ''
        -allowaccessmodification
        -dontskipnonpubliclibraryclassmembers

        -keepclasseswithmembers public class * {
            public static void main(java.lang.String[]);
        }
    </proguard>
    <move file="${destfileobfuscated}" tofile="${destfile}" />
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:17:01.457

您`proguard`必须使用以下命令分配您的 3rd 方库 jar：

```
-libraryjars  jar1.jar, jar2.jar, jar3.jar... 
```

如果您不包含上述这些 jar，则与它们相关的代码将不会被混淆/优化/收缩，因为它们将无法解决`proguard`.

发出警告就可以了，因为它会找到很多同名的类，这很正常，但这不会对结果产生任何负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:29:43.977

我没有用过proguard，但我用过yguard，概念是一样的。

如果 .class 文件已经在正在处理的 jar 中，则无需再次添加它们。关于未解析的类的错误可能是由于您不使用某些代码，具体取决于不可用的类。如果代码从未被调用，这不是问题。最好的办法是尝试运行应用程序并查看哪些类不可用，然后添加它们。我不会依赖 proguard 的输出来确定是否所有必需的代码都可用。

jar 文件中没有 jar 文件，对吗？那是行不通的。

# c++ - 尝试在 Visual Studio 中重命名托管 c++ 项目，现在出现资源错误

> ID：10797926
> 
> 赞同：0
> 
> 时间：2012-05-29T11:08:07.233
> 
> 标签：c++, visual-studio-2010

我尝试在 Visual Studio 中重命名一个 c++ 项目，但现在出现以下错误：

> mscorlib.dll 中出现“System.Resources.MissingManifestResourceException”类型的未处理异常
> 
> 附加信息：找不到适合指定文化或中性文化的任何资源。确保“OuiDesktop.PreForm.resources”在编译时被正确嵌入或链接到程序集“OuiProject”中，或者所有所需的附属程序集都是可加载的并且完全签名。

对于每个使用资源的表单，我都会得到这个。如果我将引发此错误的这些代码行注释掉，程序启动正常，但我需要资源。

我做错了什么？似乎在 Visual Studio 中重命名项目是一场噩梦！

这些 .resources 文件在构建目录中创建得很好，只是没有包含在程序集中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:30:48.053

我在这台机器上使用 Visual Studio Express 2010。在 Express 中创建一个新项目并将源文件重新添加到该项目中不起作用。

我在另一台装有完整 Visual Studio 2010 Professional 的机器上尝试了同样的修复，它运行良好。

# android - java.lang.illegalstateexception 数据库未打开android

> ID：10797927
> 
> 赞同：8
> 
> 时间：2012-05-29T11:08:13.813
> 
> 标签：android, sqlite

当我尝试插入数据库日志时，cat 显示如下错误`java.lang.illegalstateexception database not open android.`

但我已经使用

```
 db = SQLiteDatabase.openDatabase(DATABASE_PATH, null,
                SQLiteDatabase.OPEN_READWRITE); 
```

该错误不经常发生。有人知道这是什么原因吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T11:15:14.740

试试这样：

```
 if (!db.isOpen()) {
       db = getApplicationContext().openOrCreateDatabase(DATABASE_PATH, SQLiteDatabase.OPEN_READWRITE, null);
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:11:50.420

尝试

```
DatabaseHelper dataHelper;
SQLiteDatabase mDb;
    public DbManager openDB() throws SQLException {

    mDb = dataHelper.getWritableDatabase();
    return this;
} 
```

并在您重新编写当前代码的地方调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T11:26:14.777

试试这个代码

```
 public class DataBaseHelper extends SQLiteOpenHelper{
    public SQLiteDatabase openDataBase() throws SQLException{

            //Open the database

            File dbFile = _myContext.getDatabasePath( DB_PATH + DB_NAME ); 
            _myDataBase = SQLiteDatabase.openDatabase(dbFile.toString(), null, SQLiteDatabase.OPEN_READWRITE);

            return _myDataBase;
        }//end of openDataBase() method
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-29T11:11:12.647

也许您正在打开一个打开的数据库。每次工作完成时关闭数据库。

# python - Python - 如何删除窗口边框？我已将 UI 从 Qt 导入 Python 并应用了 setWindowFlags

> ID：10797930
> 
> 赞同：6
> 
> 时间：2012-05-29T11:08:36.043
> 
> 标签：python, linux, pyqt, pyqt4, fedora

如何使此窗口无边框（删除最小化/最大化/关闭）？

![在此处输入图像描述](../Images/b1afbd5a48f756aa34ab7b8c7e0f71de.png)

```
 1 import sys
  2 from PyQt4 import QtCore, QtGui
  3 from qt import Ui_MainWindow
  4 
  5 class StartQT4(QtGui.QMainWindow):
  6     def __init__(self, parent=None):
  7         QtGui.QWidget.__init__(self, parent)
  8         self.ui = Ui_MainWindow()
  9         self.ui.setupUi(self))
 10         
 11 if __name__ == "__main__":
 12     app = QtGui.QApplication(sys.argv)
 13     myapp = StartQT4()
 14     myapp.show()
 15     app.setWindowFlags(app.FramelessWindowHint) <<< does not working
 16     sys.exit(app.exec_())
 17 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T11:16:51.140

`show`您需要在调用主窗口之前设置窗口标志。

一个最小的工作示例如下所示：

```
import sys
from PyQt4 import QtCore, QtGui

class StartQT4(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(StartQT4, self).__init__(parent)
        self.setWindowFlags(QtCore.Qt.FramelessWindowHint)
        self.b = QtGui.QPushButton("exit", self, clicked=self.close)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = StartQT4()
    myapp.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T11:11:30.030

一些窗口标志需要在构造函数中设置为`QMainWindow`，我怀疑这是一个。有关详细信息，请参阅[QMainWindow 的文档](http://qt-project.org/doc/qt-4.8/qmainwindow.html#QMainWindow)。

请注意，您`STartQT4.__init__`调用了错误的构造函数。你应该打电话`QMainWindow.__init__`，而不是`QWidget.__init__`。

`super(StartQT4,self).__init__(parent, <windowflags>)`改为使用

# java - 使用集合加载 HIbernate 缓慢的数据

> ID：10797931
> 
> 赞同：0
> 
> 时间：2012-05-29T11:08:41.067
> 
> 标签：java, hibernate, spring-webflow

我在页面加载数据时遇到问题。rich:datatable 用于显示公告列表。

公告类包括一组 AnnouncedLot 类，在映射中它被指定为

```
<set cascade="all,delete-orphan" lazy="false" name="lots" table="ad_lot">
<key column="lotId"/>
<many-to-many class="AnnouncedLot" column="anlotId"/>
</set> 
```

AnnouncedLot 类映射是

```
<class name="AnnouncedLot" table="announcedLot">
  <id name="id" type="java.lang.Long" unsaved-value="-1">
     <generator class="native"/>
  </id>
  <property name="idValue" not-null="false" unique="true"/>
  <property name="databaseId" not-null="false" unique="true"/>
  <property length="4047" name="title"/>
  <property length="4047" name="description"/>
  <property length="4047" name="source"/>
  <property length="65534" name="adText"/>
  <property name="sum"/>
</class> 
```

目前，数据库中大约有 150 万条公告和 350 万手。一份公告可以有 1 手甚至 100 手。

页面仅加载公告查询的 30 个第一个结果。当数据库中没有批次时，它会快速加载，但有批次可能需要大约 1.5 分钟。

我试图将lazy 更改为true 并用谷歌搜索这个问题，但没有找到太多。有人能帮忙吗？

**更新：**

在检查了哪些查询需要花费大量时间后，我发现行计数查询是原因。由于默认过滤器参数，查询包含lots.sum 条件。我已经更改了过滤器，因此它不必使用该组并且性能有所提高。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T15:35:23.317

尝试在多对多关联上使用批量大小属性。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching-batch](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-fetching-batch)

# android - 如何通过 android/iphone/windows 手机接收 ussd 消息作为服务器？

> ID：10797934
> 
> 赞同：1
> 
> 时间：2012-05-29T11:08:57.737
> 
> 标签：android, iphone, ussd

我正计划开发一个等待 ussd 请求并响应它的服务器应用程序。

通常ussd接收者就像*100#但我只是想知道是否可以向普通手机发送请求？

例如，我的号码是 +63-927-111-2222，我怎样才能向这个手机发送 ussd 请求？是 *639271112222# 还是 *9271112222# ？

你有没有看到使之成为可能的 android/iphone/windows 手机的应用程序或代码？

# mysql - 如何在 MySQL 中测试没有结果的查询速度

> ID：10797938
> 
> 赞同：15
> 
> 时间：2012-05-29T11:09:06.673
> 
> 标签：mysql, performance, load-time

我有返回数千个结果的查询，是否可以在 MySQL 控制台或命令行中仅显示查询时间而没有实际结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T11:15:30.710

`SET profiling = 1;`在命令提示符下使用。

[更多详情请参阅](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html)

在没有得到结果或没有执行 sql 的情况下，不可能得到执行时间。

[看看为什么我们不能在没有实际查询执行的情况下获得执行时间](https://stackoverflow.com/questions/10702447/calculating-the-execution-time-of-a-mysql-query-based-on-the-number-of-records)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-27T09:21:00.787

如果您使用的是 Linux。

1.  创建文件*query.sql*
2.  输入要测试的查询。例如`select * from table1`
3.  运行此命令：

`time mysql your_db_name -u'db_user_name' -p'your_password' < query.sql > /dev/null`

输出将如下所示：

```
real    0m4.383s    
user    0m0.022s    
sys     0m0.004s 
```

“真正的”线是你正在看的。在上面的示例中，查询耗时 4.38 秒。

显然，在命令行上输入您的数据库密码并不是一个好主意，但可以作为一种快速而肮脏的解决方法。

# java - Java 中的 Oracle 表更改通知

> ID：10797940
> 
> 赞同：5
> 
> 时间：2012-05-29T11:09:28.263
> 
> 标签：java, oracle

每次更新 Oracle DB 的特定表（任何类型的更新，包括记录添加、删除和修改）时，我都需要在 Java 中运行一个方法。

**从 Java 中“轮询”表以获取具有良好性能且不会对数据库造成太大压力的更改的最有效方法是什么？**

不幸的是，我有很多限制：

*   我无法创建额外的表、触发器、存储过程等，因为我无法控制数据库管理/设计。
*   我宁愿避免[Oracle Change Notification](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_dcn.htm)，正如该[帖子](https://stackoverflow.com/questions/337335/oracle-table-change-monitor)中所建议的那样，因为它似乎涉及 C/JNI。
*   仅仅计算记录是不够的，因为我可能会错过修改和同时添加/删除。
*   在实际更改和通知之间最多延迟 30/60 秒是可以接受的。
*   我要监控的表通常有 100k+ 条记录（大约 1m+），所以我不认为拉整个表是一种选择（从数据库负载/性能的角度来看）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:09:32.403

从 oracle 11g 开始，您可以使用带有普通 JDBC 驱动程序[链接的 Oracle 更改通知](http://docs.oracle.com/cd/E18283_01/java.112/e16548/dbchgnf.htm)

# jquery-ui - 多行的 JQuery 对话框

> ID：10797942
> 
> 赞同：0
> 
> 时间：2012-05-29T11:09:40.223
> 
> 标签：jquery-ui

我有一个对象列表。每个对象都有自己的值。在网页上，它们显示为行。我想要做的是添加当单击特定行上的链接时弹出的 JQuery 对话框。最好的方法是什么？在每一行中定义一个对话框还是只使用一个更好？问题是我无法到达对话框内的元素以用行数据填充它们。有没有这方面的好例子？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:03:46.517

只需使用一个对话框，它最初应该是隐藏的：

```
<div id="rowDialog" style="display:none">
  <div id="rowDialogDiv">in here we are
  </div>
  <button id="rowDialogButton>Custom button</div>
</div> 
```

初始化对话框，一开始不显示：

```
$('#rowDialog').dialog({ autoOpen: false }); 
```

为该行放入一个事件处理程序：

```
$("tr").click(function(){
  var rowClicked = $(this);
  $('#rowDialogDiv).text('In the dialog, show we clicked row:' + rowClicked.index());
  $('#rowDialog").dialog("open");
}); 
```

强烈建议您提供表格和 ID，然后从中访问表格行以提高速度，以防万一您有多个表格等。

您还可以为对话框元素设置事件处理程序：

```
$('#rowDialogButton').click(function(){
//do button stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:34:16.790

像这样的东西？

```
<div id="myDialog">
<input id="myElementThatICanAccess" />
</div> 
```

jQuery代码：

```
$("#myDialog").dialog({
options:....
});    

$("tr").click(function(){
$("#myElementThatICanAccess","#myDialog").val($(this).val()); // or whatever value you want
$("#myDialog").dialog('open');
}); 
```

# wcf - WCF basicHttpBinding 和带有 Windows 身份验证的代理

> ID：10797945
> 
> 赞同：2
> 
> 时间：2012-05-29T11:09:55.580
> 
> 标签：wcf, proxy, windows-authentication, credentials

我有一个连接到外部 Web 服务的应用程序。

该应用程序运行良好，但对于一个客户，我无法通过他们的代理。

由于代理是在我开始使用的计算机上配置的

```
<binding useDefaultWebProxy="true" ... > 
```

有了这个我收到错误消息：

`The remote server returned an error: (407) Proxy Authentication Required.`

然后我尝试添加：

```
 <security mode="Transport">
        <transport proxyCredentialType="Windows"
                   realm="" />
    </security> 
```

但错误信息没有改变

通过一些谷歌搜索，我发现默认设置是不向代理发送凭据。以下设置应该启用发送凭据：

```
<system.net>
    <defaultProxy useDefaultCredentials="true" />
</system.net> 
```

但是，我现在收到另一条错误消息：

`Insufficient permissions for setting the configuration section 'defaultProxy'. Request for the permission of type 'System.Net.WebPermission, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.`

我不明白这个消息。该应用程序正在本地计算机上运行，​​因此它应该具有完全信任。检查`caspol -m -l`并显示

```
1\.  All code: Nothing
  1.1\.  Zone - MyComputer: FullTrust 
```

现在我没有想法了。

我不知道如何将 WebPermission 添加到在本地计算机上运行的组件中，我不知道这是否解决了代理身份验证的原始问题。

其他一些我不知道是否重要的​​细节。

*   Windows 7 64 位
*   webservice 使用 https（我可以通过 Internet Explorer 访问该服务）
*   用户是本地管理员

# jquery - 提交动态创建的表

> ID：10797946
> 
> 赞同：0
> 
> 时间：2012-05-29T11:10:08.667
> 
> 标签：jquery, forms, dynamically-generated

我试图提交一个动态创建的表，但到目前为止没有任何运气.. 我可以这样做吗？这是我的[代码](http://jsfiddle.net/Tzj9T/1/)。出于测试目的，我发送了一封电子邮件以发布表单，稍后我会将其发布到 php 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:26:55.520

为了提交输入或选择字段，您必须提供名称属性。这是一个工作示例：http: [//jsfiddle.net/Tzj9T/2/](http://jsfiddle.net/Tzj9T/2/)

祝你好运！

# twitter - Twitter：如何在推特上获得“查看照片”

> ID：10797949
> 
> 赞同：2
> 
> 时间：2012-05-29T11:10:20.353
> 
> 标签：twitter, facebook-opengraph

我们只是为推文功能添加了一个纯 HTML 链接，而不是推特按钮。现在我们想让用户在推特上发布一张图片。

当你从 instagram 或 flickrm 手动推文时，推特会自动在推文下方添加“查看照片”功能？我是怎么在我的页面上看到的？

我已经发现，instagram 和 flickr 都使用 og 属性。我的猜测是，我必须将这些属性添加到我的页面中。但即使添加这些属性也不会触发 twitter 上的“查看照片”链接。

是否有一些关于如何使其工作的文档？我没有在 API 文档中找到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:16:15.720

Twitter 上的`View Photo`链接与 OpenGraph 无关。提供的照片已获得 Twitter 的批准，因此它会自动将`View Photo`链接添加到包含其中一项服务的推文。如果您想在推文中使用查看照片链接，请考虑使用 TwitPic API 或类似方法上传照片。

# c# - C# 中的可写字节流样式功能

> ID：10797954
> 
> 赞同：2
> 
> 时间：2012-05-29T11:10:39.230
> 
> 标签：c#, binary, floating-point, compression, bytearray

`int`我需要通过向其中写入和`float`/`double`数据来构建字节流。如何在 C# 中轻松完成此任务？我知道获取浮点变量的原始字节的方法，但是 C# 是否已经有一个我可以轻松利用的字节流写入系统？

从字节数组中读取浮点值：

```
uint floatBytes = .. // read 4 float bytes from byte[] array
float floatVal = *((float*)&floatBytes); 
```

将浮点值写入字节数组：

```
float floatVal = ... // read a float from the float[] array
uint floatBytes = *((uint*)&floatVal); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:18:26.273

> does C# already have a byte-stream writing system that I could easily leverage?

The .NET library has a pair of stream-decorators for this, BinaryWriter and BinaryReader.

```
var reader = new BinaryReader(someStream);
float f1 = reader.ReadSingle();   // Single == float
double d1 = reader.ReadDouble();
string s1 = reader.ReadString();  // the Writer issues a length-prefix. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:18:37.073

Use [BinaryReader](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx) and [BinaryWriter](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)

# asp.net - GridView + 访问数据库

> ID：10797964
> 
> 赞同：0
> 
> 时间：2012-05-29T11:11:20.893
> 
> 标签：asp.net, vb.net, gridview

我正在尝试将 Access 数据库与 GridView 控件链接。

问题是：链接数据库查询的一个成功过程。

```
Protected sub  Query(ByVal y as string)
    Dim da As New OleDbDataAdapter(y, cn)
    Dim dt As New DataTable()
    da.Fill(dt)
    da.Dispose()
    cn.Dispose()
    Me.GridView1.DataSource = dt
    Me.GridView1.DataBind()
    ListBox1.Visible = True
End sub 
```

如果第一次运行在另一个过程中没有返回值/结果，我想要重新运行查询。

```
Protected Sub btnFind_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnFind.Click    

x = "SELECT * From Class Where Gender ='Male' And First_name ='James' "
        Query(x)    
If gridview.rows.count =0 then
x= "SELECT * From Class Where Gender ='Male'"
       query(x)
    End If 
```

然后将结果放入列表框中。

但是，`"The ConnectionString property has not been initialized." on da.Fill(dt)`第二次运行时出现错误。第一次成功了。

好的，我终于纠正了错误。我必须 Dim cn As New OleDbConnection("Provider = Microsoft.JET.OLEDB.4.0;" & "Data Source = C:\Class.mdb") 再次对所有查询使用查询而不是一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:16:26.557

以相同的方法创建和处置连接

```
Protected Sub Query(ByVal y as string)     
  Dim dt As New DataTable()
  Using cn as New OleDbConnection("your_connection_string"), _
        da As New OleDbDataAdapter(y, cn)       
      da.Fill(dt)     
  End Using
  Me.GridView1.DataSource = dt     
  Me.GridView1.DataBind()     
End Sub 
```

# java - 从Java目录读取文件的奇怪错误

> ID：10797975
> 
> 赞同：0
> 
> 时间：2012-05-29T11:11:48.523
> 
> 标签：java, filesystems

**编辑：** children 是一个目录数组。此代码循环通过此数组，以便进入每个目录并将列出的所有文件加载到*数组中。*然后，对于每个文件，readFile 函数应该读取该文件。

我的代码是：

```
for (File cat: children) {
    File[] webs = cat.listFiles();
    System.out.println("  Indexing category: " + cat.getName());
    for (File f: webs) {                    
        Web w = readFile(f);                
       // Do things with w  
    }   
} 
```

我收到此错误：

```
org.htmlparser.util.ParserException: Error in opening a connection to 209800.webtrec
209801.webtrec
     ...     
422064.webtrec
422071.webtrec
422087.webtrec
422089.webtrec
422112.webtrec
422125.webtrec
422127.webtrec
;
java.io.IOException: File Name Too Long
    at java.io.UnixFileSystem.canonicalize0(Native Method)
at java.io.UnixFileSystem.canonicalize(UnixFileSystem.java:172)
at java.io.File.getCanonicalPath(File.java:576)
at org.htmlparser.http.ConnectionManager.openConnection(ConnectionManager.java:848)
at org.htmlparser.Parser.setResource(Parser.java:398)
at org.htmlparser.Parser.<init>(Parser.java:317)
at org.htmlparser.Parser.<init>(Parser.java:331)
at IndexGenerator.IndexGenerator.readFile(IndexGenerator.java:156)
at IndexGenerator.IndexGenerator.main(IndexGenerator.java:101) 
```

这很奇怪，因为我在该目录中看不到任何这些文件。

谢谢！

**EDIT2：**这是 readFile 函数。它将文件的内容加载到一个字符串中并解析它。实际上，文件是 html 文件。

```
private static Web readFile(File file) {
    try {           
        FileInputStream fin = new FileInputStream(file);
        FileChannel fch = fin.getChannel();

        // map the contents of the file into ByteBuffer
        ByteBuffer byteBuff = fch.map(FileChannel.MapMode.READ_ONLY, 
                0, fch.size());

        // convert ByteBuffer to CharBuffer
        // CharBuffer chBuff = Charset.defaultCharset().decode(byteBuff);
        CharBuffer chBuff = Charset.forName("UTF-8").decode(byteBuff);
        String f = chBuff.toString();

        // Close imputstream. By doing this you close the channel associated to it
        fin.close();            

        Parser parser = new Parser(f);          
        Visitor visit = new Visitor();
        parser.visitAllNodesWith((NodeVisitor)visit);           
        return new Web(visit.getCat(), visit.getBody(), visit.getTitle());

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:39:08.823

好的，我终于找到了解决方案。

这是一个非常愚蠢的错误。我在该目录中有一个文件，其中包含我在上一个任务中删除的所有空 html 文件的名称。所以，我试图解析它，然后解析器会将它解释为 URL 而不是 htmlfile（因为没有标签和很多点......）。我无法轻松找到该文件，因为该文件夹中有数百万个文件。

# c# - C# 全局别名

> ID：10797980
> 
> 赞同：0
> 
> 时间：2012-05-29T11:11:55.627
> 
> 标签：c#, .net, mono

问题是：我有 2 个单独的源文件。第一个源文件：

```
#if UNITY_IPHONE

using iTouch = UnityEngine.Touch;

public class iTouchInput : MonoBehaviour  {

    public static iTouch[] getTouches() {
        return Input.touches;
    }

}

#else

public struct iTouch {
    public int fingerId;
    public Vector2 position;
    public Vector2 deltaPosition;
    public float deltaTime;
    public int tapCount;
    public iTouchPhase phase;
}

public class iTouchInput : MonoBehaviour  {

     private static iTouch[] touches;

     public static iTouch[] getTouches() {
         return touches;
     }

}

#endif 
```

因此，目的是在脚本在 iOS 平台上运行时使用预定义类的别名，否则使用我自己的实现。问题是，如果我想在另一个文件中使用这样的结构，我需要复制代码并到处写

```
#if UNITY_IPHONE
using iTouch = UnityEngine.Touch;
#endif 
```

有什么办法可以避免这种情况吗？

# algorithm - 部分可观察、无传感器环境的示例

> ID：10797982
> 
> 赞同：0
> 
> 时间：2012-05-29T11:11:58.430
> 
> 标签：algorithm, artificial-intelligence, observable

我目前正在研究部分可观察的环境和传感器较少的问题，如人工智能：现代方法/Stuart Russell、Peter Norvig 中所述。第 4 章。

我可以在互联网上找到的部分可观察和无传感器问题的唯一示例是书中也显示的真空吸尘器问题。

还有另一个例子，也可以执行上述算法吗？

谢谢，

侧滑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:48:28.803

您所指的这类问题在文献中被称为“符合”计划（部分可观察，无反馈）问题。这不是一类非常“有趣”的规划问题，因为与更具表现力的模型（例如或有 - 部分可观察、部分反馈 - 规划）相比，对它们所做的工作很少。

近年来已经完成了一些工作，您可以在这里查看 Joerg Hoffmann 的基准测试：[http ://www.loria.fr/~hoffmanj/ff/cff-tests.tgz](http://www.loria.fr/~hoffmanj/ff/cff-tests.tgz)

一致性规划的一种更有趣的“应用”是将设计有限状态控制器的问题映射到解决一致性规划问题的问题。您可能想查看这篇论文：

[http://www.dtic.upf.edu/~hgeffner/fsc-nectar-aaai-2010.pdf](http://www.dtic.upf.edu/~hgeffner/fsc-nectar-aaai-2010.pdf)

我认为有一些后续行动。

请注意，上述问题在 STRIPS 中进行了扩展，以便表示初始状态的不确定性。

# touch - 如何从 Sencha Touch 2 中的字段集中获取数据？

> ID：10797983
> 
> 赞同：3
> 
> 时间：2012-05-29T11:11:58.843
> 
> 标签：touch, extjs

我在 Sencha Touch 2 中有一个字段集，如下所示：

```
{
                    id:'contactForm',
                    xtype: 'fieldset',
                    title: 'Information',
                    items: [
                        {
                            xtype: 'textfield',
                            label: 'First Name',
                            placeHolder: 'Your First Name',
                            name:'firstName',
                            id:'firstName',
                        },
                        {
                            xtype: 'textfield',
                            label: 'Last Name',
                            placeHolder: 'Your Last Name',
                            name:'lastName'
                        },
                        {
                            xtype: 'emailfield',
                            label: 'Email',
                            placeHolder: 'email@example.com'
                        },
                        {
                            xtype: 'button',
                            height: 37,
                            style: 'margin-left:35%',
                            width: 100,
                            iconAlign: 'center',
                            text: 'Submit',
                            action:'ContactSubmit'                        
                        },
                        {
                            xtype: 'hiddenfield',
                            id: 'HNumberOfBedRoom',
                            value:'2'
                        },
                        {
                            xtype: 'hiddenfield',
                            id: 'HPetFriendlyId',
                            value:'2'
                        }                
                ]
} 
```

在我的控制器中，我有以下内容：

`refs: { contactForm: '#contactForm' }`

我可以通过使用检索值

`var frmItems=this.getContactForm().getItems();
console.log(frmItems.items[1]._value);`

这工作正常，但我想检索类似的值

`frm.get('name/id of component')`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T19:41:06.120

使用 Ext.form.Panel 作为您的主要容器。

示例片段

```
Ext.define('App.view.ContactForm',
{
  extend : 'Ext.form.Panel',
  xtype : 'contactform',
  id : 'contactForm',
  config : {
    items : [
      { 
        xtype : 'fieldset',
        items : [
           {
             {
                xtype: 'textfield',
                label: 'First Name',
                placeHolder: 'Your First Name',
                name:'firstName',
             },
         ]
       }
}); 
```

在你的控制器中

参考：{contactForm：'#contactForm'}

然后在你的函数中你可以做

```
this.getContactForm().getValues().firstName 
```

（使用字段的名称值）

或者

```
var vals = this.getContactForm().getValues();
vals.firstName; 
```

如果您绝对可以提供帮助，请避免在顶层使用 Ext.getCmp() 或平面 Ext.get()。如果您正在构建自定义控件，则可能必须使用这些控件，否则您将自己弄得太难了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T12:05:43.443

您应该能够为`id`您的字段分配一个，然后`Ext.getCmp('-yourId-');`或`Ext.get('-yourId-');`

（[http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-id](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-id)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:16:13.483

不要太挣扎

首先将 id 分配给该字段并使用 id 获取值就是这样..

```
 {
          xtype: 'textfield',
          id: 'username',      // id
          name: 'username',
          placeHolder: '------UserName------',                 
        },

         Ext.getCmp('username').getValue();     // now get value using that id.. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T04:03:49.820

```
refs:[
        {
            ref:'contentForm',
            // selector:'#contentForm'
            contentForm:'#contentForm'
        }
    ], 
```

-

```
var form = Ext.getCmp('contentForm');

console.log(form.getValues()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-09T11:35:07.080

分配`itemId: firstName`给`textfield`

在 中`Controller`，您想要获取值的地方，使用这个：

```
Ext.ComponentQuery.query('textfield[itemId=firstName]')[0].getData(); 
```

# django - django 中的 formset_factory 验证

> ID：10797985
> 
> 赞同：0
> 
> 时间：2012-05-29T11:12:08.270
> 
> 标签：django, django-forms

当没有给出输入并且我单击保存按钮时，如何在 NicheSkills 表单的第一个字段中设置验证。我希望在第一行中没有输入时将错误显示为“此字段是必需的”。请帮助我。

模型.py：

```
class NicheSkills(Audit):
    user                    = models.ForeignKey(User, null = True, blank = True)      
    title                   = models.CharField(max_length = 15)    
    special_skill           = models.CharField(max_length = 15) 
```

表格.py：

```
class NicheSkillsForm(forms.Form):
    title                   = fields.CharField(max_length=150)
    special_skill           = fields.CharField(max_length=150)

NicheFormset = formsets.formset_factory(NicheSkillsForm, extra = 1) 
```

模板：

```
<table cellpadding="3" cellspacing="3" border="0" style="margin-left:65px;">
                        <tbody>
                            <tr><td>{{ form5.current_role }}</td></tr>
                            <tr><td><span class = "forget-errors">{{ form5.current_role.errors }}</span></td></tr>
                            <tr><td align="center"><input type="button"   id="form5" name="save" value="Save" onclick = "save_form(this.id)" /></td></tr>
                        </tbody>
</table> 
```

视图.Py

```
NicheFormset = formsets.formset_factory(NicheSkillsForm, extra = 0)
if request.method == "POST":
    formset6 = NicheFormset(request.POST, prefix='fs6')
    if formset6.is_valid():
        for values in formset6.cleaned_data:
            niche_details = NicheSkills(
                                    title          = values['title'],
                                    special_skill     = values['special_skill'])

            niche_details.save()  
else:
    NicheFormset = formsets.formset_factory(NicheSkillsForm, extra = 1)
    formset6 = NicheFormset(prefix='fs6')        
return render_to_response('test.html', locals(), RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:49:41.020

使用[Django Forms 验证](https://docs.djangoproject.com/en/dev/ref/forms/validation)，为您的表单类定义`clean()`方法并验证其中的字段。

如果您想显示整个表单的错误 - 只需`ValidationError`使用正确的错误描述引发 a 。

如果要显示与字段相关的错误（例如连接到第一个空白字段），则必须修改`self._errors[field]`.

这一切都在文档的链接部分中进行了描述。使用示例`self._errors`在最后，在最后一个代码片段中。

# image - 从数千张图像中修剪白色

> ID：10797987
> 
> 赞同：1
> 
> 时间：2012-05-29T11:12:19.610
> 
> 标签：image

我有来自不同供应商的大约 60,000 张产品图片。有些图像非常出色，因为产品图像一直延伸到图像的边缘，而有些图像具有大量的白色，几乎就像产品上方、下方或两侧的巨大白色边框。每张图像的白色量不同，因此我不能使用 FastStone 裁剪图像，因为这只允许我使用预定义的值进行裁剪。

我需要某种自动化程序来确定产品图像的开始位置并相应地修剪或裁剪图像。

例如，如果每张图像的顶部、左侧、右侧和底部都有 2 个白色像素，我会很高兴。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:38:40.207

您可以使用[ImageMagick convert](http://www.imagemagick.org/script/convert.php)来修剪图像中的任意数量的白色

```
convert input_image_name -trim output_image_name 
```

如果您使用类似 unix 的操作系统，您可以轻松地为所有图像编写脚本

```
for i in *
do
   convert  ${i} -trim trimmed_${i}
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:56:50.670

我转而研究通过 Javascript 执行此操作，事实证明，如果图像在您自己的网站上，这是可能的，但最后我采用了这个解决方案：

[在 PHP 中从图像中裁剪空白](https://stackoverflow.com/questions/1669683/crop-whitespace-from-image-in-php)

# asp.net - 如何在 Fileupload 控件 asp.net 中获取选定的文件路径

> ID：10797989
> 
> 赞同：1
> 
> 时间：2012-05-29T11:12:21.583
> 
> 标签：asp.net, file-upload, filepath

我正在使用 Fileupload 控件上传文件。我正在显示带有文件名的选定文件图标（带有 achor 标签）。如果单击我想在新窗口中打开所选文件的图标。

如何从文件上传控件中获取选定的文件路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:39:55.670

纳提亚，

您想在文件上传到服务器之前打开文件吗？

如果文件已经上传到服务器，那么您知道文件的路径，因为您将它传递给 FileUpload1.SaveAs() 方法。

如果您以前想要它（例如，有人单击了浏览按钮并选择了一个文件但没有将其上传到服务器） - 那么这是不可能的，因为该文件仍在用户的本地计算机上（您不能显示文件是在用户的计算机上，只有在您的服务器上的文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:34:24.173

`FileUpload1.FileName`将为您提供客户端上文件的名称。

**编辑**：根据评论。您应该首先将文件上传到您的服务器。然后使用路径（文件的 url）设置为 achor 标记的 href 值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T11:23:05.547

我从搜索中了解到这是不可能的

因为它会导致隐私泄露和安全漏洞

请检查此[获取完整文件路径](https://stackoverflow.com/questions/3576791/c-sharp-get-full-file-path)

# cakephp - 反向路由/:controller/:id

> ID：10797990
> 
> 赞同：2
> 
> 时间：2012-05-29T11:12:24.117
> 
> 标签：cakephp, routing, cakephp-2.0

保持简短和甜蜜：我可以很容易地在 routes.php 中指定类似以下内容并使所需表单的 url 工作：

```
Router::connect('/:controller/:id',
    array('action'=>'item'),
    array('id'=>'[0-9]+')
); 
```

但是，Cake 仍将路由生成为“/:controller/item/:id”。有没有一种简单的方法可以让 Cake 的反向路由在不包含操作的情况下生成 url？还是我只需要通过我的应用程序并用“/:controller/$id”手动替换相关数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:23:00.413

这是我的问题的可能解决方案 - 如果我指定这样的路线：

```
Router::connect('/videos/*',
    array('controller'=>'videos', 'action'=>'item'),
    array('pass'=>array('id'))
); 
```

它似乎确实将其反向路由回/videos/$id。

我仍然不知道这和我原来的尝试有什么区别，以及为什么原来的（或在某些情况下）更难路由！因此，任何人都可以发送给我的任何 Cake 路由专业知识仍然会受到欢迎。

# filestream - 在 asp.net 中将 Filestream 视频数据流式传输到 JW Player

> ID：10797991
> 
> 赞同：1
> 
> 时间：2012-05-29T11:12:26.700
> 
> 标签：filestream, jwplayer

我正在使用 sql server 2008 中的 Filestream 来存储来自 asp.net Web 应用程序的图像和视频文件。到目前为止，我能够上传一些图像和视频文件并将它们存储在启用 Filestream 的 sql server 数据库中。

但是当我想将图像和视频文件都显示回我的应用程序时。我能够获取图像文件并将它们显示在应用程序中。但我无法从我的应用程序中检索视频文件并在 JW Player 中播放它们。

到目前为止，我已经完成了以下工作： 我有一个带有 gridview 控件的 .aspx Web 表单。在此 Web 表单的代码隐藏中，我为 gridview 控件绑定了数据，如下所示：

```
SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["tmmaConnectionString"].ConnectionString);
        SqlCommand command = new SqlCommand("SELECT ID, ProgramTitle,ProgramVideoName, ProgramId from [tblProgramContent] where programId="+progId, connection);
        SqlDataAdapter ada = new SqlDataAdapter(command);
        ada.Fill(dt);
        GVVideos.DataSource = dt;
        GVVideos.DataBind(); 
```

我的 gridview 控件如下所示

```
 <asp:GridView ID="GVVideos" runat="server" AutoGenerateColumns="false">
            <Columns>
                 <asp:BoundField HeaderText = "Program File Name" DataField="ProgramVideoName" />
                <asp:BoundField HeaderText = "Program Title" DataField="ProgramTitle" />
                <asp:TemplateField HeaderText="Program Video">
                <ItemTemplate>
                     <!--<asp:Image ID="Image1" runat="server" ImageUrl='<%= "GetProgram.ashx?prog-Id="+ Eval("ProgramId") %>'/>
                      <asp:LinkButton ID="lbGetFile" runat="server" CommandName="GetFile" CommandArgument='<%#Eval("ProgramId") %>' ><img src='<%#Eval("ProgramId") %>.jpg' /></asp:LinkButton>-->
                   <div id="play-video" >
                      <a href="" id="play-prog">  <%#Eval("ProgramVideoName") %> </a>
                      <embed
                            flashvars="file=<%# "GetProgram.ashx?prog-Id="+ Eval("ProgramId") %> "
                            allowfullscreen="true"
                            allowscripaccess="always"
                            id="player1"
                            name="player1"
                            src="Scripts/jwplayer/player.swf"
                            width="200"
                            height="180"
                        /> 
                        </div>
                </ItemTemplate>
             </asp:TemplateField>
</Columns>
        </asp:GridView> 
```

我已经传递了`<%# "GetProgram.ashx?prog-Id="+ Eval("ProgramId") %>`接受程序 ID 的 HTTP 处理程序，然后将相应的视频文件返回给客户端。但这不会返回视频文件并将其嵌入到 JW 播放器中。有没有更好的方法来做到这一点，或者我应该对上述示例程序进行哪些修改？

# c# - 通过 ASP.net 发送 HTTP Post 请求

> ID：10797995
> 
> 赞同：1
> 
> 时间：2012-05-29T11:12:42.770
> 
> 标签：c#, asp.net, forms, http-post

由于我的项目中的这个问题，我遇到了障碍，任何形式的帮助都将受到高度赞赏。

我的问题是我希望用户在我的网站上输入（他们的）目的地和电子邮件。然后我将获取这些值并填写以下网站上的文本字段，然后单击**“请求测量按钮”**。简而言之，一个简单的 HTTP Post 请求。

[http://revtr.cs.washington.edu/](http://revtr.cs.washington.edu/)

我的 C# 代码如下：

```
 // variables to store parameter values
    string url = "http://revtr.cs.washington.edu/";

    // creates the post data for the POST request
    string postData = ("destination=www.thechive.com&node=161&email=abc%40xyz.edu.pk&prediction=If+you+believe+you+know+the+traceroute+%28for+instance%2C+if+you+are+trying+out+our+system+using+a+destination+that+you+actually+control%29%2C+please+cut-and-paste+the+traceroute+into+this+box+to+aid+us+in+improving+our+system.");

    // create the POST request
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
    webRequest.Method = "POST";
    webRequest.ContentType = "application/x-www-form-urlencoded";
    webRequest.ContentLength = postData.Length;

    // POST the data
    using (StreamWriter requestWriter2 = new StreamWriter(webRequest.GetRequestStream()))
    {
        requestWriter2.Write(postData);
    }

    //  This actually does the request and gets the response back
    HttpWebResponse resp = (HttpWebResponse)webRequest.GetResponse();

    string responseData = string.Empty;

    using (StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream()))
    {
        // dumps the HTML from the response into a string variable
        responseData = responseReader.ReadToEnd();
    }

    //  Now, find the index of some word on the page that would be 
    //     displayed if the login was successful
    int index = responseData.IndexOf("Measuring");

    if (index > -1)
        ListBox1.Items.Add("SUCCESS"); 
```

但是**responseData**显示程序运行时没有点击BUTTON（我从VS2010的调试器中得到了这个信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:16:46.737

看来网址必须是

```
string url = "http://revtr.cs.washington.edu/measure.php"; 
```

因为是表单的动作。

# mysql - MySQL 使用 OrderBy 非常慢

> ID：10797996
> 
> 赞同：0
> 
> 时间：2012-05-29T11:12:46.603
> 
> 标签：mysql, sql-order-by

应用 OrderBy 时，我的一个查询运行速度非常慢，我一直遇到问题。

我已经环顾四周，并用 SELECT * FROM (sql stuff) OrderBy 字段包围了我的查询。这将时间从 22 秒减少到 10 秒，但我真的需要更快。SQL_NO_CACHE 仅用于测试。

这将在 10 秒内返回 5866 条记录。删除 orderby 会在 2 秒内返回。

```
SELECT 
     SQL_NO_CACHE * 
FROM
     (SELECT 
          SUM(
               MATCH(product_name) 
               AGAINST ('"Jeans"' IN BOOLEAN MODE) + 
               MATCH(store_name) 
               AGAINST ('"Jeans"' IN BOOLEAN MODE)
          ) AS searchScore,
          product_name,
          section_url,
          product_link_url,
          affiliate_store_product_id,
          store_url,
          product_date_added,
          product_image,
          product_image_path,
          product_sale_price,
          product_price,
          product_price_currency,
          product_url,
          product_id,
          product_channel_id,
          store_name,
          product_brand,
          colour_id,
          colour_name 
     FROM
          products 
          INNER JOIN stores 
               ON store_id = product_store_id 
          LEFT OUTER JOIN product_colours 
               ON product_colour_product_id = product_id 
          LEFT OUTER JOIN colours 
               ON colour_id = product_colour_colour_id 
          LEFT OUTER JOIN sections 
               ON product_channel_id = section_id 
          INNER JOIN storeShipping 
               ON storeShipping_store_id = store_id 
          INNER JOIN shipping_locations 
               ON shipping_location_id = storeShipping_shipping_location_id 
          JOIN product_categories 
               ON product_category_product_id = product_id 
          JOIN categories 
               ON category_id = product_category_category_id 
     WHERE (
               MATCH(product_name) AGAINST ('"Jeans"' IN BOOLEAN MODE) 
               OR MATCH(store_name) AGAINST ('"Jeans"' IN BOOLEAN MODE)
          ) 
          AND product_status = 1 
          AND category_status = 1 
          AND product_excluded = 0 
          AND product_feed_status = 1 
          AND store_status = 1 
          AND shipping_location_currency_code = 'AUD' 
          AND product_image_path IS NOT NULL 
          AND (
               product_channel_id = 1 
               OR product_channel_id = 2 
               OR product_channel_id = 3 
               OR product_channel_id = 4
          ) 
     GROUP BY product_url) AS T 
ORDER BY searchScore DESC ; 
```

这是orderby的解释

```
+----+--------------+--------+--------+ -------------------------------------------------- -------------------------------------------------- ------------------------------------+-------------+- --------+----------------------------------------- ---------+--------+------------------------------- ---------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+--------------+--------+--------+ -------------------------------------------------- -------------------------------------------------- ------------------------------------+-------------+- --------+----------------------------------------- ---------+--------+------------------------------- ---------------+
| 1 | 初级 | <派生2> | 全部 | \N | \N | \N | \N | 5866 | 使用文件排序 |
| 2 | 派生 | 产品 | 参考 | PRIMARY,idx_product,idx_channel,idx_path,idx_store,idx_excluded,idx_status,idx_product_feed_status,idx_product_image_path | idx_status | 2 | | 306688 | 使用哪里；使用临时的；使用文件排序 |
| 2 | 派生 | 商店 | eq_ref | PRIMARY,idx_storestatus | 初级 | 4 | products.product_store_id | 1 | 使用位置 |
| 2 | 派生 | 产品类别 | 参考 | PRIMARY,idx_category,idx_categoryproduct | idx_categoryproduct | 4 | products.product_id | 1 | |
| 2 | 派生 | 类别 | eq_ref | 初级，新索引1 | 初级 | 4 | product_categories.product_category_category_id | 1 | 使用位置 |
| 2 | 派生 | 产品颜色 | 参考 | idx_colourproduct | idx_colourproduct | 5 | products.product_id | 2 | |
| 2 | 派生 | 颜色 | eq_ref | 初级 | 初级 | 4 | product_colours.product_colour_colour_id | 1 | |
| 2 | 派生 | 店铺配送 | 参考 | idx_storeshippingstore,idx_storeshippinglocation | idx_storeshippingstore | 5 | 商店.store_id | 4 | 使用位置 |
| 2 | 派生 | 运输地点 | eq_ref | PRIMARY,idx_shippinglocation | 初级 | 4 | storeShipping.storeShipping_shipping_location_id | 1 | 使用位置 |
| 2 | 派生 | 部分 | eq_ref | 初级 | 初级 | 4 | products.product_channel_id | 1 | |
+----+--------------+--------+--------+ -------------------------------------------------- -------------------------------------------------- ------------------------------------+-------------+- --------+----------------------------------------- ---------+--------+------------------------------- ---------------+
```

没有orderby

```
+--------+-------------+--------+-- ---+---------------------------------------------------------- -------------------------------------------------- ---------------------------------------+------------------------ --+---------+-------------------------- -------------+--------+--------------- ------------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+--------+-------------+--------+-- ---+---------------------------------------------------------- -------------------------------------------------- ---------------------------------------+------------------------ --+---------+-------------------------- -------------+--------+--------------- ------------------+
| 1 | 简单 | 产品 | 参考 | PRIMARY,idx_product,idx_channel,idx_path,idx_store,idx_excluded,idx_status,idx_product_feed_status,idx_product_image_path | idx_status | 2 | 常量 | 306688 | 使用哪里；使用临时的；使用文件排序 |
| 1 | 简单 | 商店 | eq_ref | PRIMARY,idx_storestatus | 初级 | 4 | products.product_store_id | 1 | 使用位置 |
| 1 | 简单 | 产品类别 | 参考 | PRIMARY,idx_category,idx_categoryproduct | idx_categoryproduct | 4 | products.product_id | 1 | |
| 1 | 简单 | 类别 | eq_ref | 初级，新索引1 | 初级 | 4 | product_categories.product_category_category_id | 1 | 使用位置 |
| 1 | 简单 | 产品颜色 | 参考 | idx_colourproduct | idx_colourproduct | 5 | products.product_id | 2 | |
| 1 | 简单 | 颜色 | eq_ref | 初级 | 初级 | 4 | product_colours.product_colour_colour_id | 1 | |
| 1 | 简单 | 店铺配送 | 参考 | idx_storeshippingstore,idx_storeshippinglocation | idx_storeshippingstore | 5 | 商店.store_id | 4 | 使用位置 |
| 1 | 简单 | 运输地点 | eq_ref | PRIMARY,idx_shippinglocation | 初级 | 4 | storeShipping.storeShipping_shipping_location_id | 1 | 使用位置 |
| 1 | 简单 | 部分 | eq_ref | 初级 | 初级 | 4 | products.product_channel_id | 1 | |
+--------+-------------+--------+-- ---+---------------------------------------------------------- -------------------------------------------------- ---------------------------------------+------------------------ --+---------+-------------------------- -------------+--------+--------------- ------------------+
```

你们能做的任何事情都可以给我一个鼓励，那就太好了！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:31:38.467

I have modified your query a little. Can you try it? Also please `INDEX` the column `product_url` this will improve the execution a lot. Also if possible `INDEX` the columns `product_name` and `store_name`.

```
SELECT SUM(CASE WHEN product_name LIKE '%Jeans%' OR store_name LIKE '%Jeans%' 
                THEN 1 
           ELSE 0 END) AS searchScore,
       product_name, 
       section_url, 
       product_link_url, 
       affiliate_store_product_id, 
       store_url, 
       product_date_added, 
       product_image, 
       product_image_path, 
       product_sale_price, 
       product_price, 
       product_price_currency, 
       product_url, 
       product_id, 
       product_channel_id, 
       store_name, 
       product_brand, 
       colour_id, 
       colour_name 
FROM products 
             INNER JOIN stores ON store_id = product_store_id 
             LEFT OUTER JOIN product_colours ON product_colour_product_id = product_id 
             LEFT OUTER JOIN colours ON colour_id = product_colour_colour_id 
             LEFT OUTER JOIN sections ON product_channel_id = section_id 
             INNER JOIN storeShipping ON storeShipping_store_id = store_id 
             INNER JOIN shipping_locations ON shipping_location_id = storeShipping_shipping_location_id 
             JOIN product_categories ON product_category_product_id = product_id 
             JOIN categories ON category_id = product_category_category_id 
WHERE (product_name LIKE '%Jeans%' OR store_name LIKE '%Jeans%')
AND product_status = 1 
AND category_status = 1 
AND product_excluded = 0 
AND product_feed_status = 1 
AND store_status = 1 
AND shipping_location_currency_code = 'AUD' 
AND product_image_path IS NOT NULL 
AND product_channel_id IN (1, 2, 3, 4) 
GROUP BY product_url
ORDER BY searchScore 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:36:29.933

您按 排序`searchScore`，这不是表字段，而是一些动态聚合值。因此 MySQL 不能使用索引进行排序，而是使用 FileSort。这当然很慢。

现在，关于优化提示：

1.  如果您的`product_url`, `product_name`,`store_name`不大于 255 个字符 - 然后为它们使用 VARCHAR(255) 甚至 CHAR(255) 。并确保`product_url`是索引字段（不是全文索引，而是普通索引）。实际上，所有 3 个字段都必须被索引。

2.  你确定你需要使用`MATCH AGAINST`建筑吗？如果你在`REGEXP`那里使用它会更快，但我不知道确切的要求。

3.  它再次与 p.1 相关 - 您的字段为 (VAR)CHAR(255) - 然后在`WHERE`+中添加所有字段的复合索引`GROUP BY`，我的意思是：product_name, store_name, product_status, category_status, product_excluded, product_feed_status, store_status, shipping_location_currency_mode, product_image_path、product_channel_id、product_url。另外，你必须有`product_url`一个单独的索引。

希望它会有所帮助。在我提出修改后，您应该在不到一秒的时间内执行此查询。

# c# - 如何在字典列表上动态构建分组依据

> ID：10797997
> 
> 赞同：2
> 
> 时间：2012-05-29T11:12:49.767
> 
> 标签：c#, linq, dynamic, datatable, group-by

我正在尝试在 IEnumerable 上执行 groupby。问题是我在编译时不知道我想对哪些字段进行分组。我在堆栈上找到[了另一篇文章](https://stackoverflow.com/questions/7830344/linq-dynamic-groupby-with-ienumerablet)，解释了当类已知并具有属性时如何执行此操作，但在我的情况下，我正在处理字典并且键也仅在运行时才知道。

我的代码将类似于这样（我知道这不会编译......）：

```
private object GetValuesGroupedBy(List<string> groupbyNames, List<string> summableNames)
{
     // get the list of items in the grid
     var listOfDicos = grid.AllItems;

     return listOfDicos
                .GroupBy(x => new { x[groupbyNames[0]], 
                                    x[groupbyNames[1]], 
                                    x[groupbyNames[2]] })
                .Select(group => new { group.Key, 
                                       group.Sum(x => x[summableNames[0]]), 
                                       group.Sum(x => x[summableNames[1]]) });
} 
```

有任何想法吗？我已经开始研究动态 LINQ，但被卡住了（因为我没有使用属性，而是使用键/值集合）......

谢谢大家！！

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:53:48.273

所以我能够让 groupby 工作......（选择语句是另一个问题）。感谢 c0d1ng 让我走上了正确的道路。语法不是那么简单，因为我使用的是索引器而不是属性......

下面是我的代码：

```
 private void GetValuesGroupedBy(List<Dictionary<string, object>> list, List<string> groupbyNames, List<string> summableNames)
    {
        // build the groupby string
        StringBuilder groupBySB = new StringBuilder();
        groupBySB.Append("new ( ");
        bool useComma = false;
        foreach (var name in groupbyNames)
        {
            if (useComma)
                groupBySB.Append(", ");
            else
                useComma = true;

            groupBySB.Append("it[\"");
            groupBySB.Append(name);
            groupBySB.Append("\"]");
            groupBySB.Append(" as ");
            groupBySB.Append(name);
        }
        groupBySB.Append(" )");

        var groupby = list.GroupBy(groupBySB.ToString(), "it");
    } 
```

# python - 是否可以对在 Python 中返回某些内容的函数进行多处理？

> ID：10797998
> 
> 赞同：28
> 
> 时间：2012-05-29T11:12:59.457
> 
> 标签：python, multiprocessing

在 Python 中，我看到了许多调用多处理但目标只是打印一些东西的例子。我有一个场景，其中目标返回 2 个变量，我需要稍后使用。例如：

```
def foo(some args):
   a = someObject
   b = someObject
   return a,b

p1=multiprocess(target=foo,args(some args))
p2=multiprocess(target=foo,args(some args))
p3=multiprocess(target=foo,args(some args)) 
```

怎么办？我可以执行 .start 和 .join，但如何检索单个结果？我需要为我执行的所有作业捕获返回 a,b 然后处理它。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-14T15:22:32.037

您正在寻找使用多个进程进行一些令人尴尬的并行工作，那么为什么不使用`Pool`? A`Pool`将负责启动流程、检索结果并将结果返回给您。

我使用`pathos`，它有一个 fork `multiprocessing`，因为它比标准库提供的版本具有更好的序列化。

**(.py) 文件**

```
from pathos.multiprocessing import ProcessingPool as Pool

def foo(obj1, obj2):
    a = obj1.x**2
    b = obj2.x**2
    return a,b

class Bar(object):
    def __init__(self, x):
        self.x = x

Pool().map(foo, [Bar(1),Bar(2),Bar(3)], [Bar(4),Bar(5),Bar(6)]) 
```

**结果**

```
[(1, 16), (4, 25), (9, 36)] 
```

您会看到它`foo`接受两个参数，并返回两个对象的元组。的`map`方法`Pool`提交`foo`给底层进程并返回结果为`res`.

你可以在`pathos`这里：[https ://github.com/uqfoundation](https://github.com/uqfoundation)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-29T11:15:28.333

是的，当然 - 您可以使用多种方法。最简单的方法之一是共享`Queue`. 在此处查看示例：http: [//eli.thegreenplace.net/2012/01/16/python-parallelizing-cpu-bound-tasks-with-multiprocessing/](http://eli.thegreenplace.net/2012/01/16/python-parallelizing-cpu-bound-tasks-with-multiprocessing/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-29T11:19:41.863

我直接从文档中复制了这个例子，因为我不能给你一个直接的链接。请注意，它会从 done_queue 中打印出结果，但您可以用它做任何您喜欢的事情。

```
#
# Simple example which uses a pool of workers to carry out some tasks.
#
# Notice that the results will probably not come out of the output
# queue in the same in the same order as the corresponding tasks were
# put on the input queue.  If it is important to get the results back
# in the original order then consider using `Pool.map()` or
# `Pool.imap()` (which will save on the amount of code needed anyway).
#
# Copyright (c) 2006-2008, R Oudkerk
# All rights reserved.
#

import time
import random

from multiprocessing import Process, Queue, current_process, freeze_support

#
# Function run by worker processes
#

def worker(input, output):
    for func, args in iter(input.get, 'STOP'):
        result = calculate(func, args)
        output.put(result)

#
# Function used to calculate result
#

def calculate(func, args):
    result = func(*args)
    return '%s says that %s%s = %s' % \
        (current_process().name, func.__name__, args, result)

#
# Functions referenced by tasks
#

def mul(a, b):
    time.sleep(0.5*random.random())
    return a * b

def plus(a, b):
    time.sleep(0.5*random.random())
    return a + b

#
#
#

def test():
    NUMBER_OF_PROCESSES = 4
    TASKS1 = [(mul, (i, 7)) for i in range(20)]
    TASKS2 = [(plus, (i, 8)) for i in range(10)]

    # Create queues
    task_queue = Queue()
    done_queue = Queue()

    # Submit tasks
    for task in TASKS1:
        task_queue.put(task)

    # Start worker processes
    for i in range(NUMBER_OF_PROCESSES):
        Process(target=worker, args=(task_queue, done_queue)).start()

    # Get and print results
    print 'Unordered results:'
    for i in range(len(TASKS1)):
        print '\t', done_queue.get()

    # Add more tasks using `put()`
    for task in TASKS2:
        task_queue.put(task)

    # Get and print some more results
    for i in range(len(TASKS2)):
        print '\t', done_queue.get()

    # Tell child processes to stop
    for i in range(NUMBER_OF_PROCESSES):
        task_queue.put('STOP')

if __name__ == '__main__':
    freeze_support()
    test() 
```

它最初来自[多处理模块 docs](http://docs.python.org/library/multiprocessing.html#examples)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-21T13:31:10.810

为什么没有人使用multiprocessing.Pool 的**回调？**

例子：

```
from multiprocessing import Pool
from contextlib import contextmanager

from pprint import pprint
from requests import get as get_page

@contextmanager
def _terminating(thing):
    try:
        yield thing
    finally:
        thing.terminate()

def _callback(*args, **kwargs):
    print("CALBACK")
    pprint(args)
    pprint(kwargs)

print("Processing...")
with _terminating(Pool(processes=WORKERS)) as pool:
    results = pool.map_async(get_page, URLS, callback=_callback)

    start_time = time.time()
    results.wait()
    end_time = time.time()
    print("Time for Processing: %ssecs" % (end_time - start_time)) 
```

在这里，我打印了 args 和 kwargs。但是您可以通过以下方式替换**回调**：

```
def _callback2(responses):
    for r in responses:
        print(r.status_code) # or do whatever with response... 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-29T11:40:37.343

它不适用于 Windows，但这是我的函数多处理装饰器，它返回一个队列，您可以轮询并从中收集返回的数据

```
import os
from Queue import Queue
from multiprocessing import Process

def returning_wrapper(func, *args, **kwargs):
    queue = kwargs.get("multiprocess_returnable")
    del kwargs["multiprocess_returnable"]
    queue.put(func(*args, **kwargs))

class Multiprocess(object):
    """Cute decorator to run a function in multiple processes."""
    def __init__(self, func):
        self.func = func
        self.processes = []

    def __call__(self, *args, **kwargs):
        num_processes = kwargs.get("multiprocess_num_processes", 2) # default to two processes.
        return_obj = kwargs.get("multiprocess_returnable", Queue()) # default to stdlib Queue
        kwargs["multiprocess_returnable"] = return_obj
        for i in xrange(num_processes):
            pro = Process(target=returning_wrapper, args=tuple([self.func] + list(args)), kwargs=kwargs)
            self.processes.append(pro)
            pro.start()
        return return_obj

@Multiprocess
def info():
    print 'module name:', __name__
    print 'parent process:', os.getppid()
    print 'process id:', os.getpid()
    return 4 * 22

data = info()
print data.get(False) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-31T13:33:38.840

这是一个[多进程搜索大文件](https://gist.github.com/ourway/8196934)的例子。