# StackOverflow 问答 10435000-10435999

# apache-poi - 保护工作表会导致工作簿损坏

> ID：10435003
> 
> 赞同：1
> 
> 时间：2012-05-03T15:55:13.497
> 
> 标签：apache-poi

我想用 apache poi 复制一个 Excel 工作簿。副本必须受到保护，但用户应该能够调整列的大小。我准备了一个模板，并在模板的第一张纸上选择了“列格式”。当我使用以下代码段时

```
 InputStream is = new FileInputStream(
                new File(DIR, "template.xlsx"));
            XSSFWorkbook wb = (XSSFWorkbook) WorkbookFactory.create(is);
            XSSFSheet s = wb.getSheetAt(0);
            s.protectSheet("");
            FileOutputStream os = new FileOutputStream(new File(DIR, "test.xlsx"));
            wb.write(os);
            os.close(); 
```

我得到一个损坏的 Excelsheet。我使用 apache poi 3.8 和 Excel 2007。

是否有保护工作表但允许调整列大小的解决方法？

任何帮助将不胜感激

斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:04:28.463

我知道这是一个旧帖子，但我刚刚解决了这个问题。您可以使用以下代码：

 ``//just initialize these XSSFWorkbook xwb; XSSFSheet xsheet;` 

`xsheet.protectSheet("1234"); xsheet.getCTWorksheet().getSheetProtection().setFormatColumns(false); xsheet.enableLocking(); xwb.lockStructure();`

希望这对将来的人有所帮助！:D`

# ruby-on-rails - Rails - 保存子记录集合时捕获事务ID

> ID：10435004
> 
> 赞同：4
> 
> 时间：2012-05-03T15:55:14.847
> 
> 标签：ruby-on-rails

当我保存/更新项目及其任务时，我希望能够知道哪些任务保存在事务中。例如，我最初可能会创建包含一些任务的项目，几个小时后我可能会添加更多任务。我想知道在每个事务中创建/更新了哪些任务。我可以通过比较 created_at 字段来确定这一点，但这似乎有点小技巧。

有任何想法吗？我可以访问事务中的事务对象并从中获取唯一 ID 吗？那将是理想的。

# c# - 为什么这个通用的 C# WeakEvent 监听器不起作用？

> ID：10435006
> 
> 赞同：2
> 
> 时间：2012-05-03T15:55:27.220
> 
> 标签：c#, generics, design-patterns, weak-references

我试图通过开发一个通用的弱事件侦听器来节省时间，我可以只传递一个 Action 来采取。在未注册之前，一切似乎都很好。这似乎将它们全部注销。我感到困惑的是为什么，这与将其传递***给***IWeakEventListener 参数有何不同？

```
 public class GenericWeakEventListener : IWeakEventListener
  {
    #region EventAction

    /// <summary>
    /// Action to take for the event
    /// </summary>
    private Action<Type, object, EventArgs> _eventAction;

    /// <summary>
    /// Gets or sets the action to take for the event
    /// </summary>
    //[DataMember]
    public Action<Type, object, EventArgs> EventAction
    {
      get
      {
        return _eventAction;
      }

      private set
      {
        if (EventAction != value)
        {
          _eventAction = value;
        }
      }
    }

    #endregion EventAction

    #region Constructors

    public GenericWeakEventListener(Action<Type, object, EventArgs> action)
    {
      EventAction = action;
    }

    #endregion Constructors

    #region Public Methods

    public bool ReceiveWeakEvent(Type managerType, object sender, EventArgs e)
    {
      if (EventAction != null)
      {
        EventAction(managerType, sender, e);
      }

      return true;
    }

    #endregion Public Methods
  } 
```

**编辑：**

这是监听器代码：

```
 public class SomeClient
  {
    public int ID { get; set; }

    private Timer timer = null;
    private Timer timer2 = null;

    public SomeClient(int id, SomeService service)
    {
      ID = id;
      //EventHandler<GenericEventArgs<string>> d = (o, s) => Console.WriteLine("Client {0}: {1}", ID, s.Item);
      if (service != null) SomeEventChangedEventManager.AddListener(service, new GenericWeakEventListener((t, s, e) => { Console.WriteLine("SomeEvent: " + ID); }));

      timer = new Timer { AutoReset = true, Interval = 1000 };
      SomeTimerElapsedEventManager.AddListener(timer, new GenericWeakEventListener((t, s, e) => { Console.WriteLine("SomeTimer: " + ID); }));
      timer.Start();
    }
  } 
```

这是发布者的代码：

```
 public class SomeService
  {
    public event EventHandler<GenericEventArgs<string>> SomeEvent;

    public SomeService()
    {
      System.Timers.Timer timer = new Timer { AutoReset = true, Interval = 1000 };
      timer.Elapsed += (sender, args) => { if (SomeEvent != null) SomeEvent(this, new GenericEventArgs<string>(Guid.NewGuid().ToString())); };
      timer.Start();
    }
  } 
```

这是来自 main 方法的代码：

```
public static void Main(string[] args)
{
  SomeService service = new SomeService();
  List<SomeClient> clients = new List<SomeClient>();

  // Build clients
  for (int x = 0; x < 5; x++)
  {
    clients.Add(new SomeClient(x + 1, service));
  }

  System.Timers.Timer timer = new Timer { AutoReset = true, Interval = 5000 };
  timer.Elapsed += (s, a) =>
    {
      if (clients.Count == 0)
      {
        return;
      }

      Console.WriteLine("Removing\r\n");
      clients.RemoveAt(0);
      GC.Collect();
    };
  timer.Start();

  Console.ReadLine();
} 
```

这是输出： SomeEvent: 1 SomeEvent: 2 SomeEvent: 3 SomeEvent: 4 SomeEvent: 5 SomeTimer: 2 SomeTimer: 3 SomeTimer: 4 SomeTimer: 1 SomeTimer: 5 SomeEvent: 1 SomeEvent: 2 SomeEvent: 3 SomeEvent: 4 SomeEvent: 5 SomeTimer: 1 SomeTimer: 2 SomeTimer: 3 SomeTimer: 4 SomeTimer: 5 SomeEvent: 1 SomeEvent: 2 SomeEvent: 3 SomeEvent: 4 SomeEvent: 5 SomeTimer: 2 SomeTimer: 3 SomeTimer: 4 SomeTimer: 5 SomeTimer: 1 SomeEvent: 1 SomeEvent: 2 SomeEvent: 3 SomeEvent: 4 SomeEvent: 5 SomeTimer: 1 SomeTimer: 2 SomeTimer: 3 SomeTimer: 5 SomeTimer: 4 SomeEvent: 1 SomeEvent: 2 SomeEvent: 3 SomeEvent: 4 SomeEvent: 5 移除

如果没有通用的弱事件侦听器，那么输出会在没有 1 的情况下继续输出，然后在没有 2 的情况下继续输出，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:07:45.883

**从 OP 编辑​​编辑：**知道了。这是我认为正在发生的事情：

您正在声明 SomeClient 拥有的 lambda 并包含实例变量 ID 的外部闭包。这使得通过 SomeEventChangedEventManager 作为委托传递给 SomeService 上的事件的 lambda 依赖于该 ID 实例的持续存在。

当您删除该 SomeClient 实例时，该 lambda 所需的 ID 变量将超出范围并被 GCed。但是，我没有看到这段代码的任何部分从 SomeService 的 SomeEvent 的处理程序中删除了这个 lambda。因此，lambda 保留在内存中作为对匿名委托的引用，但它所依赖的其他数据现在已经消失了。这会导致运行时抛出异常，该异常会以某种方式被吞没并且不会导致整个程序崩溃。

但是，该事件基本上按照附加的顺序执行处理程序委托（这是他们通常告诉您忽略的实现细节），因为其中一个处理程序已被抛出，所以该事件已停止执行。这使得删除第一个客户端似乎已经删除了所有这些客户端，而实际上这些客户端的处理程序只是因为第一个处理程序出错而没有执行。

修复是双重的：

*   定义 lambda 并将其存储为 SomeClient 的实例变量。这允许您保留对它的引用，这很重要，因为在确定相等性时不会对委托进行语义比较，因此以下代码不起作用：

    ```
    SomeEvent += (a,b,c) => Foo(a,b,c);
    //the following line will not remove the handler added in the previous line,
    //because the two lambdas are compiled into differently-named methods
    //and so this is a different reference to a different method.
    SomeEvent -= (a,b,c) => Foo(a,b,c); 
    ```

*   在 SomeClient 上实现 IDisposable 和/或终结器。当从列表中删除客户端时，由 GC 调用的处理程序/终结器应该从 SomeEvent 侦听器中删除此实例的 lambda（可能通过 Manager 上的 RemoveListener() 方法）。因为您保留了对指向确切添加内容的委托的引用，所以处理程序将被删除，因此不会被执行并且不会出错。

# php - 从递归函数返回一个值

> ID：10435008
> 
> 赞同：1
> 
> 时间：2012-05-03T15:55:33.543
> 
> 标签：php, recursion

我有一个函数，我可以通过回显获得所有正确的值，但是当我无法弄清楚如何返回整个数组时。有人可以帮我弄清楚获得所有儿童用户吗？

```
 $useridarray[] = $userid;
    getchildren($useridarray, $useridarray);

    function getchildren($array, $totalarray)
    {
        foreach($array as $arr)
        {
            $db_name = "dbname";
            $connection = @mysql_connect("localhost", "username", "password") or die(mysql_error());
            $db = @mysql_select_db($db_name, $connection) or die(mysql_error());
            $sql = "
                    select *
                    from users
                    where creator = '$arr'
                    ";
            $result = @mysql_query($sql, $connection) or die(mysql_error());
            while($row = mysql_fetch_array($result)) 
            {
                $newchildren[] = $row['id'];
                $totalarray[] = $row['id'];
                //echo $row['id'] . ' ';
            }
            mysql_close();
            getchildren($newchildren, $totalarray);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:57:27.417

您需要[通过参考^(*Docs 传递*)](http://php.net/manual/en/language.references.pass.php)：

```
function getchildren($array, &$totalarray)
                             ^ 
```

用法：

```
$useridarray[] = $userid;
getchildren($useridarray, $useridarray);
var_dump($useridarray); # your result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:57:31.023

您需要先添加退货

```
 mysql_close();
return getchildren($newchildren, $totalarray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:04:21.897

我不熟悉 PHP 语法，但您可能希望实现“停止条件”来返回结果。因此，在您的实例中，您似乎想要 getChildren 返回 localResults + recursive getChildren 结果的东西，这些结果在您通过 foreach 循环时逐渐总计。

# mysql - 无法在 heroku 上使用 ClearDB 运行 Play Framework 1.2.4 应用程序

> ID：10435010
> 
> 赞同：2
> 
> 时间：2012-05-03T15:55:39.350
> 
> 标签：mysql, heroku, playframework, playframework-1.x

这是heroku给出的ClearDB url，我把它放在了我的application.conf中：

```
mysql://ce321a40b79906:ad8a252e@us-cdbr-east.cleardb.com/heroku_171088b609e621d?reconnect=true 
```

这不行！日志显示以下异常：

```
 ←[36m2012-05-03T15:45:52+00:00 app[web.1]:←[0m Caused by: com.mysql.jdbc.excepti
    ons.jdbc4.MySQLSyntaxErrorException: Table 'heroku_171088b609e621d.user' doesn't exist 
```

当我使用以下配置使用 Postgres 时，它工作得非常好：

```
db=postgres://xfqolvejdz:nRofWB6Lg1V9JDadmjfW@ec2-50-19-226-184.compute-1.amazonaws.com/xfqolvejdz
jpa.dialect=org.hibernate.dialect.PostgreSQLDialect
jpa.ddl=update 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:34:12.903

最好的方法是使用环境变量而不是复制和粘贴 URL。对于 Postgres，其中的行`conf/application.conf`是：

```
%prod.db=${DATABASE_URL}
%prod.jpa.dialect=org.hibernate.dialect.PostgreSQLDialect
%prod.jpa.ddl=update 
```

对于 ClearDB，以下内容应该有效：

```
%prod.db=${CLEARDB_DATABASE_URL}
%prod.jpa.dialect=org.hibernate.dialect.MySQLDialect
%prod.jpa.ddl=update 
```

# javascript - 带有 javascript 的 python 装饰器

> ID：10435021
> 
> 赞同：8
> 
> 时间：2012-05-03T15:56:37.557
> 
> 标签：javascript, decorator

我想要做的是以下内容：

我有一个提醒某事的功能：

```
myfunction = function(foobar) { 
                 alert(foobar); 
             }; 
```

现在我想装饰它，这样：

```
decorate = function(callback) { 
              return function(foobar) { 
                  callback(foobar); 
                  console.log(foobar); 
           }; 
}; 
```

那么我可以写：

```
myfunction = decorate(myfunction); 
```

然后 myfunction 将在控制台中进行正常的 + 登录。

我怎样才能使它与 Javascript 一起工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T15:58:00.443

是的你可以。事实上，你有，你的实现完美地工作：[现场示例](http://jsbin.com/ojaram)| [来源](http://jsbin.com/ojaram/edit)

```
var myfunction = function(foobar) { alert(foobar); };

var decorate = function(callback) { return function(foobar) { callback(foobar); console.log(foobar); }; };

var result = decorate(myfunction);

result("Hi there"); 
```

不过，我建议使用函数*声明*而不是函数*表达式*：

```
function myfunction(foobar) {
    alert(foobar);
}

function decorate(callback) {
    return function(foobar) {
        callback(foobar);
        console.log(foobar);
    };
}

var result = decorate(myfunction);

result("Hi there"); 
```

如果您想创建更通用的版本，请查看使用`apply`( [MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply) | [spec](http://es5.github.com/#x15.3.4.3) ) 和`arguments`伪数组 ( [MDN](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments) | [spec](http://es5.github.com/#x10.6) )：[Live example](http://jsbin.com/ojaram/2) | [来源](http://jsbin.com/ojaram/2)

```
function decorate(original, wrapper, context) {
    return function() {
        try {
            original.apply(this, arguments);
        }
        catch (e) {
        }
        try {
            wrapper.apply(context || this, arguments);
        }
        catch (e) {
        }
    };
}

function myFunction(arg1, arg2) {
    alert("arg1 = " + arg1 + ", arg2 = " + arg2);
}

var newFunction = decorate(myFunction, function(arg1, arg2) {
    console.log("arg1 = " + arg1 + ", arg2 = " + arg2);
});

newFunction(1, 2); 
```

该版本做了几件事：

1.  允许您将回调作为参数提供给一个中心`decorate`函数。

2.  `this`让您有选择地提供调用回调时使用的“上下文”（值）。

3.  保留`this`调用原始回调和（如果您不提供`context`）回调时的值。

...在装饰对象函数（有时称为方法）时很方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:10:57.577

使用 arguments 和 apply 更通用：

```
function myfunction(foobar) { 
    alert(foobar); 
}

function decorate(callback) { 
    return function() { 
        callback.apply(null, arguments); 
        console.log(arguments); 
    }; 
}

var result = decorate(myfunction);

result("Hi there"); 
```

# python - Python：a中的for循环没有按预期运行

> ID：10435024
> 
> 赞同：0
> 
> 时间：2012-05-03T15:56:42.560
> 
> 标签：python

我正在使用以下代码来组合两个文本文件：

```
def combine_acpd_ccs(self, ccs_file, acps_file, out_file):

    with open(ccs_file, 'r') as in_file1:
        with open(acps_file, 'r') as in_file2:
            with open(out_file, 'w') as out1:
                out1.write('PDB\tPA\tEHSS\tACPS\n')
                for line in in_file1:
                    segs = line.split()
                    for i in in_file2:
                        sse_score = i.split()
                        #print line
                        #print segs
                        if segs[0][:-4] == sse_score[0]:
                            out1.write(segs[0][:-4]+'\t'+segs[1]+'\t'+segs[2]+'\t'+sse_score[1]+'\n') 
```

示例数据如下所示：

ccs_file:

```
1b0o.pdb    1399.0  1772.0
1b8e.pdb    1397.0  1764.0 
```

acps_文件：

```
1b0o    0.000756946316066
1b8e    8.40662008775
1b0o    6.25931529116 
```

我希望我的输出是这样的：

```
PDB PA  EHSS    ACPS
1b0o    1399.0  1772.0  0.000756946316066
1b0o    1399.0  1772.0  6.25931529116
1b8e    1397.0  1764.0 8.40662008775 
```

但是我的代码只生成了我预期输出的前两行。`segs`如果我在第二个循环中打印，则`for`仅将第一行`ccs_file`传递给循环。有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T15:58:45.863

问题是您不会`in_file2`在每次外循环迭代后重新打开/倒带。

已执行

```
for i in in_file2: 
```

所有后续的迭代尝试都`in_file2`不会做任何事情，因为文件指针已经位于文件的末尾。

如果文件相对较小，您可能希望加载`ccs_file`到内存中，然后进行字典查找。

# iphone - 使用 Reachability.h 时的警告

> ID：10435026
> 
> 赞同：8
> 
> 时间：2012-05-03T15:56:55.577
> 
> 标签：iphone, objective-c

使用时`Reachability.h`——苹果在 iOS 上处理连接的代码：

```
+ (Reachability*) reachabilityWithAddress: (const struct sockaddr_in*) hostAddress; 
```

我收到以下警告：

```
Declaration of 'struct sockaddr_in' will not be visible outside of this function 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T16:02:14.753

添加`#import <netinet/in.h>`Reachability.h 文件，此警告将消失.. :D

# php - 从正则表达式中得到错误“重复运算符操作数无效”

> ID：10435029
> 
> 赞同：0
> 
> 时间：2012-05-03T15:56:59.537
> 
> 标签：php, mysql

我有一个 PHP/mySQL 搜索脚本，由于某种原因，在开发人员进行最新更新后，在使用通配符 (*) 进行搜索时它已停止工作。更糟糕的是，它不仅停止工作，而且返回以下令人讨厌的（对于访问者）mySQL 错误，该错误基于*甜甜圈*通配符搜索：

```
SELECT a.product_id, a.category_id FROM products a
LEFT JOIN users u ON u.userid=a.ownerid
WHERE a.active=1 AND a.approved=1 AND a.deleted=0 AND a.creation_in_progress=0
AND a.name LIKE '%%' 
AND ((a.name REGEXP '( )*(*donut*)( )*') OR (a.description REGEXP '( )*(*donut*)( )*')) 
```

错误：

```
Mysql Error: Got error 'repetition-operator operand invalid' from regexp 
```

不幸的是，开发人员不能（或不会）修复它，如果有人进行通配符搜索，它会使我的网站变得无用。

任何想法可能是什么问题？还是一个简单的修复？我已经尝试在 $keywords_search 之前加一个反斜杠，但这没有用。我还尝试直接在 PhpMyAdmin 中运行上面的 mySQL 查询，它产生了同样的错误。

我还尝试完全摆脱 REGEXP 部分，但它根本不会返回任何结果。

这部分的PHP搜索代码如下：

```
$query[] = "((a.name REGEXP '( )*(" . str_replace(' ', ')*( )*(', $keywords_search) . ")( )*') 
OR (a.description REGEXP '( )*(" . str_replace(' ', ')*( )*(', $keywords_search) . ")( )*'))"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:00:38.247

`*`如果您希望它与文字星相匹配，您想转义您的星 ( )。如果您希望它翻译“任何字符串”，则需要将其更改为`.*`. 就是这么简单。只需在查询数据库之前获取用户的输入并对其应用替换。

# spim - 在 spim 中将两个浮点寄存器相乘

> ID：10435030
> 
> 赞同：0
> 
> 时间：2012-05-03T15:57:01.427
> 
> 标签：spim

我想在 spim 中编写一个小程序，计算圆的周长并从用户那里读取半径值......这是代码

```
 sw $s0, p2
l.s $f6 ,p2
li.s $f2 ,3.4

mul.s $f8, $f2, $f6 
```

s0 是在 .data 部分中从用户 p 浮点变量中输入的半径值

执行程序后，我在寄存器 f2、f6、f8 中有这些值（当 s0=3 时）：

```
FP2 = 4059999a
FP6 = 00000003
FP8 = 0000000a 
```

这个结果是真的吗？如果是真的，为什么 f8 10 中的值不是 10.2 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:58:49.687

0000000a 是浮点数的十六进制表示。不是“10”的意思，而是1.4e-44的意思。

问题是您没有正确地将 $s0 中的整数转换为浮点数。考虑 $s0 = 3 的情况。您对“sw $s0, p2”的调用只是将位 0x00000003 放入内存位置 p2。您对 ls "$f6, p2" 的调用将这些相同的位放入 $f6 中。但是 0x00000003 并不意味着“3”作为浮点数，而是 4.2x10-45。

# iphone - 将 NSMutable 数据对象保存在 plist 文件中

> ID：10435031
> 
> 赞同：0
> 
> 时间：2012-05-03T15:57:06.660
> 
> 标签：iphone, objective-c, plist, nsdata, writetofile

我，

我目前正在尝试使用以下方法将 NSMutable 数据保存在 plist 文件中：

`[receivedData writeToFile:pathText atomically:YES]`

请注意，接收到的数据来自 URLrequest 对象。这是我的代码：

```
NSURLConnection *connection01 = [[NSURLConnection alloc] initWithRequest:request01 delegate:self];
        if(connection01)
        {

        //3.Create NSMutableData to receive data
        //receiveddata is an instance declared elsewhere

        receivedData = [NSMutableData data];
        } 
```

之后

```
//6.Mettre les informations téléchargées dans un plist.

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSLog(@"DOCUMENT DIRECTORY:  %@", documentsDirectory);
        NSString *pathNom = [documentsDirectory stringByAppendingPathComponent:@"InformationsUser.plist"];
        NSString *pathText = @"/Users/victorbielak/Desktop/InformationUser.text";

        [receivedData writeToFile:pathText atomically:YES];

        if (!documentsDirectory) {
            NSLog(@"Documents directory not found!");
        }
        if(![[NSFileManager defaultManager] fileExistsAtPath:pathNom])
        {
            NSLog(@"file not found");

        } 
```

尽管我检查了 URL 下的信息是否已正确下载，但仍会出现错误消息“找不到文件”。有人知道该代码中缺少什么吗？我虽然 plist 是由 write to file 方法自动生成的。

谢谢您的答复。

胜利者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:08:31.920

你应该使用`pathNom`而不是`pathText`.. :)

# c# - 设置列系列的宽度：使用 dotNetCharting

> ID：10435032
> 
> 赞同：3
> 
> 时间：2012-05-03T15:57:08.477
> 
> 标签：c#, .net, css, templates, charts

我需要使用 dotNetCharting 设置条形图系列的静态宽度。My Graph 具有线型、样条线型和列型三个系列的集合。我只想为所有系列的列类型设置一个静态宽度。

我试过使用：

```
myChart.DefaultAxis.StaticColumnWidth = 10; 
```

**但是 .DefaultAxis 属性在智能感知中对于整个图表和**Column 系列集合都无效。在设置之前，必须先添加数据系列吗？

另外，我尝试在系列对象中添加属性，但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:48:09.640

```
series["PixelPointWidth"] = "your value for width"; 
```

*   图表系列集合的一部分：**自定义属性**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-03T09:03:29.073

chart1.Series["Series1"]["PixelPointWidth"] = "1";

# c# - 在c#中将填充的字符串转换为数字

> ID：10435033
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:57:16.917
> 
> 标签：c#

我正在使用以下代码：

```
string new = old.Substring(0,2).TrimStart('0') + "." + old.Substring(2,2).TrimStart('0'); 
```

转换如下：

```
0101 >> 1.1
99.10 >> 99.1
99.01 >> 99.01 
```

问题是以下转换无法正常工作：

```
0100 >> 1.0 
```

有没有一种简单的方法可以解决这个问题。我不明白为什么它不能正确转换。对我来说，在后面加上“.0”很重要。当我运行上述所有内容时，我看到的是“1”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:04:59.820

你可以调用 Int32.TryParse() 然后除以 100 吗？

```
string s = "0101";
int n;
if(int.TryParse(s, out n))
{
  decimal d = n / 100M;
  string x = d.Format("f2");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:00:26.943

TrimStart 将始终删除字符串开头的所有 0。所以你的第二部分最终是：

```
"00".TrimStart('0') 
```

这将始终产生空字符串。

试试这个，以确保你总是得到那个 0：

```
string new = old.Substring(0,2).TrimStart('0') + "." + 
             old.Substring(2,2).TrimStart('0').PadLeft(1, '0'); 
```

# android - 如何关闭关闭后仍在后台运行的应用程序

> ID：10435036
> 
> 赞同：1
> 
> 时间：2012-05-03T15:57:25.153
> 
> 标签：android, android-activity, activity-lifecycle

我的应用程序运行正常，当我进行一些新活动时，我将代码用作

```
Intent start=new Intent(current activity.this,new activity.class);
                startActivityForResult(start, 0);
                finish(); 
```

然后当我必须回到之前的活动时，我使用了以下代码

```
Intent start = new Intent(current activity.this,earlier activity.class);
                    startActivity(start);
                    finishActivity(0); 
```

我认为通过这种方式，活动的堆栈可能会很清晰。在单击按钮或电话后退按钮时，我使用了以下代码

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
                startMain.addCategory(Intent.CATEGORY_HOME);
                startMain.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(startMain); 
```

但我的应用程序仍在后台运行。我还使用了该`android:noHistory="true"`应用程序从后台被杀死，但消息显示该应用程序强制关闭。简单`finish();`移动到最后一个活动。我还看到了[Quitting an application 的链接 - 这是不受欢迎的吗？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238#2034238)但我是新人，所以没有得到太多。请建议我如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:00:18.210

> 我认为通过这种方式，活动的堆栈可能会很清晰

欢迎您发表意见。`startActivityForResult()`不是为您如何使用它而设计的。

> 在单击按钮或电话后退按钮时，我使用了以下代码

我会解雇任何为我工作的人。

请遵循[Android 设计指南以正确处理 BACK 按钮](http://developer.android.com/design/patterns/navigation.html)- 虽然我不同意其中的所有内容，但它比您所做的要好得多。在用户眼中，[BACK 意味着返回](http://commonsware.com/blog/2011/07/21/back-means-back.html)。

> 但我的应用程序仍在后台运行

只要您没有泄漏任何线程或服务，您的进程就会运行，但不会消耗大量 CPU 时间。Android 将在需要 RAM 时终止进程。这样，如果用户选择返回到您的应用程序，或者您的应用程序中的其他内容需要运行（例如，`AlarmManager`事件、广播`Intent`），Android 就不必浪费 CPU 时间和电池寿命来分叉另一个进程。

> 请建议我如何处理这个问题。

只要不理会这个过程，没有人会受到伤害。

# java - 需要 Eclipse 之类的 Maven 目标生命周期和 Intelli Idea

> ID：10435038
> 
> 赞同：1
> 
> 时间：2012-05-03T15:57:29.190
> 
> 标签：java, eclipse, maven, intellij-idea

实际问题在这里提出：http: [//devnet.jetbrains.net/message/5458663#5458663](http://devnet.jetbrains.net/message/5458663#5458663)

在 Idea 中右键单击项目时，任何人都可以回答如何获得 Maven 生命周期目标吗？

谢谢苏雷什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:03:32.780

IntelliJ 有一个名为“Maven 项目”的视图。打开它，您将看到（并且可以执行）标准生命周期阶段（清理、编译、打包等）。通过右键单击某个阶段，您可以使用“创建...”菜单条目创建启动配置。

在视图的首选项菜单中，您可以取消选中“仅显示基本阶段”以访问更多奇特的阶段，例如“预集成测试”

# c# - 将一个非常 Pythonesque 的库移植到 .NET

> ID：10435039
> 
> 赞同：5
> 
> 时间：2012-05-03T15:57:29.490
> 
> 标签：c#, python, beautifulsoup

我正在研究将 Python 库[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)移植到 .NET 的可能性。主要是因为我真的很喜欢解析器，而且 .NET 框架上根本没有好的 HTML 解析器（Html Agility Pack 已经过时、有问题、没有文档，除非知道确切的架构，否则不能很好地工作。）

我的主要目标之一是让基本的 DOM 选择功能真正平行于 BeautifulSoup 的美观和简单，使开发人员能够轻松地制作表达式以找到他们正在寻找的元素。

BeautifulSoup 利用松散绑定和命名参数来实现这一点。例如，要查找所有`a`带有`id`of`test`和 a 且`title`包含单词*foo*的标签，我可以这样做：

```
soup.find_all('a', id='test', title=re.compile('foo')) 
```

但是，C# 没有任意数量的命名元素的概念。.NET4 运行时具有命名参数，但它们必须与现有方法原型相匹配。

**我的问题：**与这个 Pythonic 构造最相似的 C# 设计模式是什么？

**一些想法：**

我想根据我作为开发人员的编码方式来追求这个。实现这一点超出了本文的范围。我的一个想法是使用匿名类型。就像是：

```
soup.FindAll("a", new { Id = "Test", Title = new Regex("foo") }); 
```

尽管这种语法与 Python 实现松散地匹配，但它仍然有一些缺点。

1.  实现必须使用`FindAll`反射来解析匿名类型，并以合理的方式处理任意元数据。
2.  `FindAll`原型需要使用，`Object`这使得如何使用该方法非常不清楚，除非您非常熟悉记录在案的行为。我不相信有一种方法可以声明*必须*采用匿名类型的方法。

我的另一个想法可能是一种更 .NET 的方式来处理这个问题，但离库的 Python 根源更远。那将是使用流利的模式。就像是：

```
soup.FindAll("a")
    .Attr("id", "Test")
    .Attr("title", new Regex("foo")); 
```

这将需要构建一个表达式树并在 DOM 中定位适当的节点。

我的第三个也是最后一个想法是使用 LINQ。就像是：

```
var nodes = (from n in soup
             where n.Tag == "a" &&
             n["id"] == "Test" &&
             Regex.Match(n["title"], "foo").Success
             select n); 
```

我很感激任何有将 Python 代码移植到 C# 经验的人的任何见解，或者只是关于处理这种情况的最佳方法的总体建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:05:00.990

您是否尝试在 IronPython 引擎中运行您的代码。据我所知，性能非常好，您不必触摸您的 python 代码。

# gwt - 具有延迟绑定的 GWT 反射 GAE 在 Firefox 中工作，而不是 chrome、IE

> ID：10435043
> 
> 赞同：-1
> 
> 时间：2012-05-03T15:57:46.983
> 
> 标签：gwt, deferred

我有延迟绑定的问题。

我在这个博客中创建了它：http: [//programmatica.blogspot.com/2007/10/classfornamefullyqualifiedclassnamenewi.html](http://programmatica.blogspot.com/2007/10/classfornamefullyqualifiedclassnamenewi.html)

我的代码在“GWT.create”处崩溃。但只有当我在 Google App Engine 上运行它时，并且只在 IE 和 Chrome 中运行。代码在每个浏览器中都可以在本地正常工作，在 Firefox 的 GAE 上可以在线工作。

```
Logger logger = Logger.getLogger("AMsController");
               logger.log(Level.INFO, "start reflect");
final IPresenterFactory factory = (IPresenterFactory)     
GWT.create(IReflectiveFactory.class);
logger.log(Level.INFO, "1");
IDynamicPresenter p =  factory.newInstance("ch.zhaw.ams.module.football.sfv.news.client.presenter.NewsPresenter"); 
```

我没有任何错误消息，但如果我为 IE 和 Firefox 分析 cache.html，它们是不同的。

它在 IE 中抛出 ClassCast 异常，但在 Firefox 中没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:05:44.400

我在没有运行时类转换的情况下编译了它——它可以工作！

问题是 IE-cache.html 文件中的 ClassCasting

-XdisableCastChecking 作为编译器标志

我在这里描述了它 [http://samuelschmid.blogspot.com/2012/05/using-generator-for-generic-class.html](http://samuelschmid.blogspot.com/2012/05/using-generator-for-generic-class.html)

# android - Android中带有异步任务的标签栏

> ID：10435049
> 
> 赞同：1
> 
> 时间：2012-05-03T15:58:03.840
> 
> 标签：android, tabs, android-asynctask, android-tabhost

我已经构建了一个应用程序，一旦应用程序第一次运行，它就会开始将图像和一些数据从应用程序复制到内部存储器。然后稍后在另一个活动的其他地方使用这些数据。

复制过程需要 30 多秒。所以我想在异步任务中做到这一点。但我无法让它工作。异步任务运行良好，但我需要创建选项卡规范并将意图分配给 onPostExecute 方法上的每个规范。但我看到的只是没有规格的标签栏，没有任何效果。

那么知道如何以这种方式构建它吗？

任何帮助将不胜感激。我的活动在这里，

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabbar_main);

    myJSON = new DataBaseJSONFunctions(this);

    TabHost tabHost = getTabHost();

    TabWidget tabWidget = tabHost.getTabWidget();

    Resources res = getResources();
    //TabHost tabHost = getTabHost();

    TabHost.TabSpec spec;
    Intent intent;

    // Starting Initialization process.
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);

    if(!prefs.getBoolean("firstRun", false)) {

        initializeAll();
        // Set "firstRun" true to make it runs once application is installed.
        prefs.edit().putBoolean("firstRun", true).commit();
    } 
```

我想把这个块放在一个异步任务中，

```
 intent = new Intent().setClass(this,Activities.class);
    spec = tabHost.newTabSpec("activities").setIndicator("act",res.getDrawable(R.drawable.tab_activities_selector)).setContent(intent);
    tabHost.addTab(spec);

    // doing the same things.
    intent = new Intent().setClass(this, Promotions.class);
    spec = tabHost.newTabSpec("promotion").setIndicator("Promotion",res.getDrawable(R.drawable.tab_promotions_selector)).setContent(intent);
    tabHost.addTab(spec);

    // doing the same things for Albums Activity.
    intent = new Intent().setClass(this,Menu.class);
    spec = tabHost.newTabSpec("menu").setIndicator("Menü",res.getDrawable(R.drawable.tab_menu_selector)).setContent(intent);
    tabHost.addTab(spec);

    for(int i = 0; i < tabWidget.getChildCount(); i++){
        tabWidget.getChildAt(i).setBackgroundResource(R.drawable.tab_bar);
    }

    tabHost.setCurrentTab(0); 
```

顺便说一句，我正在将我的活动上下文传递给异步任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:16:22.277

试图从中填充`TabHost`有点`AsyncTask`不合常规。我建议在`TabHost`您的应用程序启动后立即填充选项卡，然后运行`AsyncTask`，它可能会显示也可能不会显示`ProgressDialog`以让用户知道正在发生的事情，`AsyncTask`完成后，您可以使用新的 UI 填充数据。

# browser - 仅限单个用户登录网站 - 共享浏览器以便多个用户可以登录

> ID：10435051
> 
> 赞同：-4
> 
> 时间：2012-05-03T15:58:17.983
> 
> 标签：browser, sharing

我和一个朋友只有一个用户 ID 可以登录网站。我可以登录该站点，但他必须等到我注销才能使用相同的登录 ID 使用该站点。我看过很多屏幕共享应用程序，看过很多想法，但从技术上讲，我确信它可以完成。

我想在我的电脑上登录，他想从另一台电脑访问该网站。

最简单的方法是什么？我正在考虑使用 opencoweb 和 iframe 来简单地共享会话浏览器状态和信息。是否可以？

我应该能够通过在应用服务器上部署 iframed 页面来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:03:30.867

购买该服务的另一个订阅 - 或在您的计算机上放置一个代理并告诉您的朋友通过您的代理连接到该站点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:05:15.620

首先，你们都应该从一个代理服务器连接到该站点，因此您的 ip 将是相同的。在你们中的一个人登录他的帐户后，另一个人应该将此站点的 cookie 复制到他的计算机上。该网站会检查cookie和ip，它无法区分你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:49:04.250

不需要代理。只需复制 cookie 文件，通过其他浏览器导入即可。

# .net - F#将none传递给函数，将null作为参数值

> ID：10435052
> 
> 赞同：5
> 
> 时间：2012-05-03T15:58:19.193
> 
> 标签：.net, f#

这真的很奇怪，我担心我刚刚做了一些愚蠢的事情，但我无法弄清楚。

我将作为第一个参数传递`None`给函数`some`，但是当函数执行时，值为`parentNode`null （我不关心它打印 null for `None`，函数参数值 IS null not `None`）。我最终在打印功能行上得到一个空引用错误，因为 parentNode 为空。我试图对 args 进行元组并更改顺序，但这没有帮助。我偷偷怀疑这与咖喱有关，但我不知所措......

对于公司问题，我必须用空字符串替换真实的 url 值，但如果有帮助，它是 xsd 的 url

这是代码：

```
#light
open System
open System.Xml
open System.Net
open System.Collections.Generic

type StartResult =
    | Parameters of XsdParserParameters
    | Xsd of Xsd

and Xsd(text) =
    let rows = new List<string>()

    member this.Text
        with get() = text

    member this.Rows
        with get() = rows

and XsdParserParameters() =
    let mutable url = ""

    member this.Url
        with get() = url
        and set(value) = url <- value

    member this.Start() =
        try
            use client = new WebClient()
            let xsd = client.DownloadString(this.Url)
            StartResult.Xsd(Xsd(xsd))
        with e ->
            StartResult.Parameters(this)

let processor () =
    let parameters = XsdParserParameters()
    parameters.Url <- ""
    match parameters.Start() with
    | StartResult.Parameters(xpparams) ->
        //some error
        ()
    | StartResult.Xsd(xsd) ->

        let rec some (parentNode : XmlNode option) (node : XmlNode) =
            let a = ()

            for subNode in node.ChildNodes do
                match subNode.LocalName with
                | "complexType" ->
                    xsd.Rows.Add(
                        sprintf
                            "%O~%s~%d~%d~%s~%s~%O" 
                            parentNode 
                            subNode.Value 
                            1 
                            1 
                            (subNode.Attributes.GetNamedItem("name").Value)
                            "" 
                            false)
                    some (Some(subNode)) subNode 
                | "sequence" ->
                    some parentNode subNode 
                | "element" ->
                    xsd.Rows.Add(
                        sprintf 
                            "%O~%s~%d~%d~%s~%s~%O" 
                            parentNode 
                            subNode.Value 
                            1 
                            1 
                            (subNode.Attributes.GetNamedItem("name").Value) 
                            "" 
                            false)
                    some (Some(subNode)) subNode 
                | _ ->
                    ()

        let xdoc = new XmlDocument();
        xdoc.LoadXml(xsd.Text)

        some (None) (xdoc.DocumentElement)

processor()

printfn "Done..."
Console.ReadLine() |> ignore 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:12:47.450

`Option<'T>`（[Github 上的源代码](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/prim-types.fs#L3093)）使用[`[<CompilationRepresentation([CompilationRepresentationFlags.UseNullAsTrueValue)>]`](http://msdn.microsoft.com/en-us/library/ee370528.aspx)导致空值大小写（`None`在本例中）`null`在运行时由 表示的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T16:04:42.477

不幸的是，这是 F# 打印出来的方式`None`：

```
> sprintf "%O" None;;
val it : string = "<null>" 
```

您可以轻松地为类型编写自定义`sprintf`函数`option`，例如：

```
let sprintOption v = 
    if Option.isNone v then "None" else sprintf "%A" v 
```

# sass - SASS，调用mixin的正确方法是什么？

> ID：10435056
> 
> 赞同：6
> 
> 时间：2012-05-03T15:58:28.943
> 
> 标签：sass

我刚开始使用 SASS，我正试图弄清楚如何创建一个盒子阴影混合...

**我从另一个堆栈溢出帖子中复制了这个mixin..**

```
@mixin box-shadow($top, $left, $blur, $color, $inset:"") {

      -webkit-box-shadow:$top $left $blur $color #{$inset};
      -moz-box-shadow:$top $left $blur $color #{$inset};
      box-shadow:$top $left $blur $color #{$inset};
    } 
```

但是我不确定如何格式化我的`@include`

**这就是我到目前为止的@include**

```
@include box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); 
```

**这是我的输出错误......**

```
error(Line 1003: Invalid CSS after "...lude box-shadow": expected "}", was ": inset 0 1px 1...") 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T16:14:48.390

语法错误。

利用`@include box-shadow(0, 1px, 1px, rgba(0, 0, 0, 0.075), inset);`

（2014 年编辑，包括过去几年对 Sass 语法所做的更改）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-28T04:48:36.970

我是 Sass 的新手，接受的答案对我不起作用；值的顺序看起来不正确，并且每个值之后还需要逗号。我使用了以下内容：

```
@include box-shadow(0, 1px, 1px, rgba(0, 0, 0, 0.075), inset); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-29T11:45:32.363

我认为你应该包括一些默认值：

```
@mixin box-shadow($left:0, $top:2px, $blur:2px, $color:#000, $inset:"") {
      -webkit-box-shadow:$left $top $blur $color #{$inset};
      -moz-box-shadow:$left $top $blur $color #{$inset};
      box-shadow:$left $top $blur $color #{$inset};
} 
```

这样，如果您想使用相同的代码，则无需每次都设置选项：

```
.your-selector {
    @include box-shadow();
} 
```

我还更正了选项的顺序：水平通常出现在垂直之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T20:59:01.537

2016 年，看起来事情与接受的答案再次发生了变化。在此处参考 Compass 文档和[示例](http://compass-style.org/examples/compass/css3/box_shadow/)，以下内容将在 SCSS 文件中工作：

`@include box-shadow(rgba(0, 0, 0, 0.075)0 0 3px 1px inset);`

那个影子很微弱，所以我实际使用了：

`@include box-shadow(rgba(0, 0, 0, 0.75)0 0 3px 1px inset);`

**对于多个阴影：** 用逗号分隔每个阴影。

`@include box-shadow(rgba(0, 0, 0, 0.75)0 0 3px 1px inset, rgba(blue, 0.4) 0 0 5px 5px);`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-08T20:28:02.200

对于“银背”，一个例子是：

```
@include box-shadow(inset 0, 1px, 1px, rgba(0, 0, 0, 0.075)); 
```

它包括“pixel 67”评论的被遗忘的逗号。

# android - 在 MediaPlayer 中播放音频文件时有白噪声

> ID：10435058
> 
> 赞同：0
> 
> 时间：2012-05-03T15:58:35.773
> 
> 标签：android

当用户与我的应用程序主屏幕中的按钮交互时，我正在尝试实现“点击”声音。我没有在 Android 中使用音频的经验，但是有几个消息来源表明，要简单地播放剪辑，我只需要执行以下操作 -

*   将音频文件放在 /res/raw

我这样做了，我必须在 /res/ 中创建一个 /raw 文件夹 - 该文件名为 menuclick.wav（因此似乎符合 a-z0-0_ 文件名的准则）

*   创建一个媒体播放器对象

    媒体播放器媒体播放器；mediaplayer.create(getApplicationContext(), R.raw.menuclick);

*   准备播放器进行播放（*在 try - catch 块内）

    媒体播放器.prepare();

*   播放文件

    媒体播放器.start();

*播放声音，但它不是我指定的声音文件，它是令人不快的嘶嘶声/静态声音。*

*我再次测试了应用程序，只更改了声音文件。它播放了一些声音，但仍然有很多白噪声。在其他应用程序中正常打开声音文件时不会发生这种情况。*

我似乎遵循与几本教科书/示例相同的步骤。知道问题可能出在哪里吗？

# php - 对自制肥皂服务器的第二次肥皂调用使 apache 产生段错误

> ID：10435067
> 
> 赞同：0
> 
> 时间：2012-05-03T15:59:26.047
> 
> 标签：php, apache, soap, wsdl, segmentation-fault

大家好，我已经为此苦恼了两个星期。

问题是我做了一个肥皂服务，似乎工作正常。当我要求它显示它的函数时，它会全部返回它们等等。但是当我尝试向服务器调用两个函数时，我得到一个段错误：

'[notice] child pid 13950 exit signal Segmentation fault (11)'

但是当我分别调用这两个函数时，它们会起作用。我为此搜索了一周并尝试了不同的 wsdl 格式，但唯一出现的可能是 php 错误或 wsdl 中的一些错误（这似乎不太可能，因为我的验证器找不到错误）。

浏览器给了我这个作为回应：

错误 324 (net::ERR_EMPTY_RESPONSE)

我目前正在运行 php 版本 5.3.6 并且还尝试了 5.2.17 以尝试消除可能的 php 错误。但他们都给出了同样的错误。

办公室里没有人知道如何解决这个问题，因为“一切都会好起来的”。
谁能让我朝着正确的方向前进？

客户端：（此代码使 apache 崩溃）

```
ini_set('soap.wsdl_cache_enabled', 0); 
ini_set('soap.wsdl_cache_ttl', 0);
try{
    $soap = new SoapClient("http://localhost/virtueleincasso.wsdl", array("exceptions" => 1));
    $password = $soap->virtuele_incasso_login('user', 'pass');       
    $status = $soap->get_status($password , 1060);
}catch (SoapFault $exception){
    echo $exception->faultstring;
} 
```

服务器：

```
ini_set('soap.wsdl_cache_enabled', 0); 
ini_set('soap.wsdl_cache_ttl', 0);
$server = new SoapServer(DIR_ROOT."/virtueleincasso.wsdl");
$server->setClass('PP_Api');
$server->handle();
die(); 
```

**解决方案：**我使用 die 函数来停止服务器函数返回一个空字符串。我通过将其更改为退出函数来修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-09T21:01:33.390

我在使用soap扩展的多个PHP进程中遇到了类似的问题。这似乎是处理 WSDL 缓存的方式中的一个错误。我还尝试通过`ini_set()`调用禁用它，但没有成功。我最终在我的案例中找到了解决方法。我需要将`cache_wsdl`选项设置为`WSDL_CACHE_NONE`.

```
return new SoapClient("http://localhost/virtueleincasso.wsdl", array(
    "exceptions" => 1,
    "cache_wsdl" => WSDL_CACHE_NONE
)); 
```

# nhibernate - IList 的 NHibernate Search 和 Lucene 初始索引

> ID：10435074
> 
> 赞同：0
> 
> 时间：2012-05-03T16:00:06.490
> 
> 标签：nhibernate, search, lucene.net

我有一些使用 Lucene 索引 IList 的无聊问题，我无法解决。

我的实体包含 IList，我应用 IndexedEmbedded 属性，如下所示：

```
[ScriptIgnore] //will not serialize
[IndexedEmbedded(Depth = 1, Prefix = "BookAdditionalInfos_"]
public virtual IList<BookAdditionalInfo> BookAdditionalInfos { get; set; } 
```

此外，其他一些属性使用 Field 属性进行索引：

```
[Field(Index.Tokenized, Store = Store.Yes)] 
```

在为索引标记实体后，我必须对 1200 万行进行初始索引（使用批处理）。在我开始索引名为 BookAdditionalInfos 的 IList 之前，一切都很完美。如果没有这个 IndexedEmbedded 属性（或没有索引这个 IList），一切正常，并且每个具有 Field 属性的属性标记都将被索引。

我正在使用流畅的 NHibernate。

有什么问题？

谢谢

**编辑**：我也看了[http://ayende.com/blog/3992/nhibernate-search](http://ayende.com/blog/3992/nhibernate-search)，但没有任何结果

问题是：当我尝试索引 IList 时，索引会永远占用并且不会索引任何内容。没有索引这个 IList（或没有指定 IndexedEmbedded 到 IList）索引是可以的，我得到了索引结果。

**编辑（初始索引功能）：**

```
public void BuildInitialBookSearchIndex()
        {
            FSDirectory directory = null;
            IndexWriter writer = null;

            var type = typeof(Book);

            var info = new DirectoryInfo(GetIndexDirectory());

            //if (info.Exists)
            //{
            //    info.Delete(true);
            //}

            try
            {
                directory = FSDirectory.GetDirectory(Path.Combine(info.FullName, type.Name), true);
                writer = new IndexWriter(directory, new StandardAnalyzer(), true);
            }
            finally
            {
                if (directory != null)
                {
                    directory.Close();
                }

                if (writer != null)
                {
                    writer.Close();
                }
            }

            var fullTextSession = Search.CreateFullTextSession(Session);

            var currentIndex = 0;
            const int batchSize = 5000;

            while (true)
            {
                var entities = Session
                    .CreateCriteria<Book>()
                    .SetFirstResult(currentIndex)
                    .SetMaxResults(batchSize)
                    .List();

                using (var tx = Session.BeginTransaction())
                {
                    foreach (var entity in entities)
                    {
                        fullTextSession.Index(entity);
                    }

                    currentIndex += batchSize;

                    Session.Flush();
                    tx.Commit();
                    Session.Clear();
                }

                if (entities.Count < batchSize)
                    break;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T09:41:52.413

在我看来，您在那里遇到了一个经典的 N+1 选择问题 - 基本上，当您选择书籍时，您并没有同时选择 BookAdditionalInfos，因此 NHibernate 必须为每本书发布一个新选择在索引时检索该书的 BookAdditionalInfo。一个快速的解决方法是将您的选择更改为：

```
 var entities = Session
                .CreateCriteria<Book>()
                .SetFetchMode("BookAdditionalInfos", FetchMode.Eager)
                .SetResultTransformer(Transformers.DistinctRootEntity)
                .SetFirstResult(currentIndex)
                .SetMaxResults(batchSize)
                .List(); 
```

但是，您现在可能会在分页时遇到其他问题，因为它将对 BookAdditionalInfo 表进行连接，从而为您的结果集中的同一实体提供多行，因此您可能希望考虑执行以下操作：

```
 var pagedEntities = DetachedCriteria.For<Book>()
                .SetFirstResult(currentIndex)
                .SetMaxResults(batchSize)
                .SetProjection(Projections.Id());

   var entities = Session
                .CreateCriteria<Book>()
                .Add(Property.ForName("id").In(pagedEntities))
                .SetFetchMode("BookAdditionalInfos", FetchMode.Eager)
                .SetResultTransformer(Transformers.DistinctRootEntity)
                .List(); 
```

# javascript - 在手风琴中设置活动部分

> ID：10435076
> 
> 赞同：1
> 
> 时间：2012-05-03T16:00:11.063
> 
> 标签：javascript, html-lists

我正在尝试在手风琴中设置一个活动部分。我很难弄清楚如何做到这一点。我不知疲倦地搜索，并没有找到针对我的具体案例的解决方案。这似乎很简单，但我无法弄清楚。请帮忙！

（我的意图是将此列表放在母版页上，并让每个内容页面在导航到时设置活动部分。）

我已将手风琴列表保存到 jsFiddle：http: [//jsfiddle.net/pWbxm/14/](http://jsfiddle.net/pWbxm/14/)

** jsFiddle 上的备用手风琴列表，使用 div/header 格式：http: [//jsfiddle.net/hemiar/44UTR/](http://jsfiddle.net/hemiar/44UTR/)

html:

```
<ul class="leftNavMenu">
    <li><a href="#" title="#">Home</a></li>
        <li><a href="#" title="#">HR + Benefits</a>
            <ul>
                <li><a href="#">HR Main</a></li>
                <li><a href="#">Policies</a></li>
                <li><a href="#">Benefits</a></li>
                <li><a href="#">Forms</a></li>
                <li><a href="#">Employee Handbook</a></li>
                <li><a href="#">Managers</a></li>    
            </ul>
        </li>    
        <li><a href="#" title="#">Departments</a> 
            <ul>
                <li><a href="#">Accounting</a>  
                <ul>
                <li><a href="#">Accounting Main</a></li>
                <li><a href="#">Draft Dates</a></li>
                <li><a href="#">Forms</a></li>
                <li><a href="#">InfoSend</a></li>
            </ul>
        </li>  
        <li><a href="#">Acquisitions</a> 
            <ul>
                <li><a href="#">Acquisitions Main</a></li>
                <li><a href="#">Bulk Acquisitions</a></li>
                <li><a href="#">Dealer Program Acquisitions</a></li>
                <li><a href="#">Training Manual</a></li>
            </ul>
        </li>   
        </ul>
    </li>
    <li><a href="#" title="#">Contacts</a> 
        <ul>
            <li><a href="#">Contacts Home</a></li>
            <li><a href="#">SAFE Phone List</a></li>
            <li><a href="#">CSAI Phone List</a></li>
            <li><a href="#">DND Codes</a></li>
            <li><a href="#">Phone User Guides</a></li>    
        </ul>
    </li>
</ul> 
```

CSS：

```
.leftNavMenu{width: 195px;}

ul.leftNavMenu{line-height: 0.5em;}

ul.leftNavMenu ul{
    margin: 0;
    padding: 0;
    display: none;}

ul.leftNavMenu li{
    list-style: none;
    font-size:10px;font-weight:bold;
    color:#1D65B3;
    border-bottom:inset;
    border-width:1px;
    border-bottom-color:#BDD1E6;}

ul.leftNavMenu li a{
    line-height: 10px;
    padding: 10px 5px 5px 10px;
    display: block;}

ul.leftNavMenu li a:hover{
    background-color:#ffffff;
    color:#1D65B3;}

ul.leftNavMenu ul li{
    margin: 0;
    padding: 0;
    clear: both;
    font-family:Verdana, "Segoe UI";
    font-size:9px;font-weight:bold;
    background-color:#D5E6F8;
    color:#ffffff;}

ul.leftNavMenu ul li a{
    padding-left: 15px;
    outline:0;}

ul.leftNavMenu ul li a:hover{
    background-color:#ffffff;
    color:#1D65B3;}

ul.leftNavMenu ul ul li{    
    background-color:#ffffff;
    color:#1D65B3;
    border-bottom-style:dotted;}

ul.leftNavMenu ul ul li a{
    font-size:9px;font-weight:normal;
    padding-left: 30px;}

ul.leftNavMenu ul ul li a:hover{
    background-color:#E8EFF7;
    color:#1D65B3;}

ul.leftNavMenu span{
    float:right;} 
```

脚本

```
 $(document).ready(function() {
        $('li').click(function(ev) {
            $(this).find('>ul').slideToggle('slow')
                .end().siblings().find('ul').slideUp('slow');
            ev.stopPropagation();
        });
    });
    var accordion = $('ul.leftNavMenu');
    accordion.accordion('activate', 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:44:55.387

jQuery UI Accordion 旨在与文档中显示的 HTML 一起使用。我认为它不适用于`<ul><li>`标签。

您也许应该考虑重写您的 html 以使用他们的标记。例如

```
<div id="accordion">
    <h3><a href="#section1">Section 1</a></h3>
    <div>
        <p>Mauris mauris ante, blandit et, ultrices a, susceros. Nam mi. Proin viverra leo ut odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.</p>
    </div>
    <h3><a href="#section2">Section 2</a></h3>
    <div>
        More Content Here
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T04:46:47.947

似乎这个问题已经开放了几年。我能够使用 div 和 header 标签使其在第三级导航菜单中工作，但不能使用 ul 标签。似乎它只会识别 ul 列表中的第一级和第二级。

# css - 位置使用不当：CSS中的相对，需要建议

> ID：10435077
> 
> 赞同：1
> 
> 时间：2012-05-03T16:00:16.333
> 
> 标签：css, position, containers, styling, css-position

![http://imgur.com/ZzkxK](../Images/921490562f7731b0bd47144b327848a1.png)...我的憎恶的屏幕截图

jsfiddle：http: [//jsfiddle.net/ELZD8/](http://jsfiddle.net/ELZD8/)

它看起来很好，直到我需要更改字段集大小：并且由于我对页面上的每个元素都使用 position:relative，因此更改字段集搞砸了一切，糟糕。请原谅我，但我对 CSS 还很陌生，而且我知道我使用的代码太多了。

所以，正如你在 imgur 中看到的那样，它现在看起来就像地狱一样。解决此问题的最快方法是什么？我知道这可能与 floats 和 margin:left 和 margin:right 有关，但是在我去香蕉之前有人可以提供一些见解吗？

任何输入表示赞赏，干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:31:34.263

轻松修复：

你需要使用适当的div切片，即把每个section做成一个div，然后在每个div里面放置元素，否则就变成clusterfuck了。您还需要按在 html 中出现的顺序列出您的 css 文件中的元素，否则查找内容很痛苦......

不要使用大量的`<br>`，而是使用填充和边距 css 规则

是的，你可以使用 position:relative，但既然你征求意见，我强烈反对它，它需要更长的构建时间、更长的更新时间、更长的修复时间等等。使用部分、浮动并保持简单，简单是你的朋友。

我还强烈建议不要使用`fieldset`，`<form>`而是使用它，它是 imo 的主要 html/css 断路器。

在对代码进行了相当大的清理/调整后，这是一个切碎的示例。还有一千种方法可以清理和改进它，但至少现在它看起来更像我想你想要的：

[http://sotkra.com/stackoverflow/positionrelative/index.html](http://sotkra.com/stackoverflow/positionrelative/index.html)

# jquery - 无法在 Jquery Cycle 幻灯片中将我的图像居中

> ID：10435089
> 
> 赞同：4
> 
> 时间：2012-05-03T16:01:11.023
> 
> 标签：jquery, jquery-cycle

我有这个问题，我在任何地方都找不到解决方案....

我在 1 个 div 中有 3 个 div，这 3 个 div 每个都有 3 个图像，它们都并排放置。我使用 jQuery 循环制作了 3 个幻灯片。这完美无缺。如您在此处看到的，某些图像需要居中

```
http://jsfiddle.net/rBaWG/19/ 
```

或者

```
http://www.willruppelglass.com/index.php 
```

我已经尝试了一切，但似乎 jQuery 循环正在调整我的 css 代码以使这些图像居中，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:04:46.830

试一试：

```
.pics {  
    padding: 0;  
    margin: 0 auto; /* CHANGE HERE */
    width: 225px;
    height: 200px;
} 

.pics img {    
    background-color: #eee;
    /* Removed top and left */
}

.contentImages {
    text-align: center; /* Add */
    border: 1px solid #CCC; 
    padding: 10px; 
    margin: 20px auto 0; 
    position: relative;
    width: 675px;
    overflow: hidden;
} 
```

至少在 Chrome 中为水平居中的图像工作[jsFiddle 。](http://jsfiddle.net/sTGbp/)问题：您希望这三幅图像并排还是叠放在一起？

如果您希望它们并排，则必须`width`从`.pics`上述 CSS 中的类中删除 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:08:39.567

我已经尝试并测试了它，它可以按要求工作：

HTML：

```
<div class="contentImages">
    <div class="pics">
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home1.jpg" height="200"/></div>
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home2.jpg" height="200"/></div>
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home3.jpg" height="200"/></div>
    </div>
    <div class="pics2">
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home5.jpg" width="225"/></div>
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home4.jpg" height="200"/></div>
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home6.jpg" height="200"/></div>
    </div>
    <div class="pics3">
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home7.jpg" height="200"/></div>
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home8.jpg" height="200"/></div>
        <div class="cc"><img src="http://www.willruppelglass.com/upload/home9.jpg" height="200"/></div>
    </div>
</div> 
```

CSS加法：

```
.cc img{
    margin: auto;
}
.cc{
    text-align:center;
    width:225px !important;
    overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T14:57:35.697

这是我的做法，使用一些 jQuery 魔法为图像添加边距，并使用`containerResize`Cycle 中的选项确保容器始终与最大图像大小相同，如下所示：

```
$('img').each(function() {
    var left = ($(this).parent().width() / 2) - ($(this).width() / 2);
    var top = ($(this).parent().height() / 2) - ($(this).height() / 2);
    $(this).css({marginLeft: left, marginTop: top});
});

$('.pics').cycle({
    fx: 'fade',
    timeout:5000,
    containerResize: 1,
    nowrap: 0,
    random: 1,
});

$('.pics2').cycle({
    fx: 'fade',
    timeout: 8000,
    containerResize: 1,
    nowrap: 0,
    random: 1
});

$('.pics3').cycle({
    fx: 'fade',
    timeout: 6000,
    containerResize: 1,
    nowrap: 0,
    random: 1
}); 
```

这是一个[**演示**](http://jsfiddle.net/adeneo/rBaWG/21/)！

或[**垂直演示**](http://jsfiddle.net/adeneo/rBaWG/22/)！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T07:34:00.787

后面的代码使图像 div 上的图像居中：

```
$('.pics').cycle({
    fx: 'fade',
    timeout:5000,
    random: 1,
    height: 200,
    width: 225,
    center: true
});

$('.pics2').cycle({
    fx: 'fade',
    timeout: 8000,
    random: 1,
    height: 200,
    width: 225,
    center: true
});

$('.pics3').cycle({
    fx: 'fade',
    timeout: 6000,
    random: 1,
    height: 200,
    width: 225,
    center: true
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T03:30:33.457

循环一些 div 并在 div 中居中图像可能会更好。

[http://jsfiddle.net/lucuma/wHLJD/](http://jsfiddle.net/lucuma/wHLJD/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T20:41:03.893

我使用了我的一个小[插件](http://roxon.in/scripts/fademe_jquery_plugin/)：

## *[jsFiddle 演示](http://jsfiddle.net/zr28Z/2/)*

我改变了一点你的 CSS，将每个图像（通过 jQuery）包装成`<span>`元素。
这样做我可以使用 line-height 和一些你可以在我的 CSS 中找到的技巧来垂直和水平地居中你的图像：

```
.contentImages{
    border:1px solid #CCC;
    padding:10px;
    margin:20px auto 0;
    position:relative;
    width: 675px;
    height:200px; /* added */
    overflow:hidden;
    background:#fff;
}
.pics{  
    position:relative; /* added */
    display:block; /* added */
    float:left; /* added */
    width:225px;
    height:180px;
}
.pics img {
    position:relative;
    vertical-align:middle;
    background-color: #eee;
    max-width:100%;
}
.pics span{    /* created by jQuery */
    cursor:pointer;  /* yes, I made your images swappable */
    position:absolute;
    margin-left:0px;
    height:200px;
    width:225px;
    text-align:center;
    background:#444;
    line-height:196px;
} 
```

HTML：你所有的父元素现在都有一个通用类`pics`来简化 CSS

```
<div class="pics pics1"> 
```

这是我的 jQuery 插件（fadeMe！）：

```
/*FadeMe 'FPS'//jQuery_plugin//Author:Roko C.Buljan (2012)// www.roxon.in*/(function($){$.fn.fademe = function(F,P,S){F=F||700;S=S-1||0;P=P||3000;var E=this.children(),T;function a(){E.siblings(E).stop().fadeTo(F,0).eq(S=++S%E.length).stop().fadeTo(F,1);}E.on('mouseenter mouseleave click',function(e){var m=e.type==='mouseenter'?clearTimeout(T):(e.type==='click'?a():aa());}).hide().eq(S).show();function aa(){T=setTimeout(function(){a();aa();},F+P);}aa();};})(jQuery);

$('.pics img').each(function(){ // just added to wrap your images into spans.
  $(this).wrap('<span />');
});

$('.pics1').fademe(1360,3500,2); //fadeTime,pause,StartSlideN
$('.pics2').fademe(1300);        //fadeTime
$('.pics3').fademe(1240,3920);   //fadeTime,pause 
```

就这样。这个插件允许你：

*   在 HOVER 上停止悬停的幻灯片
*   点击前进
*   自定义淡入淡出时间、暂停和开始幻灯片*N*

**默认设置为：
1.Fade time = 700，Pause = 3000，Start slide = 1；**

您可以在我的页面上找到更多信息[**这里**](http://roxon.in/scripts/fademe_jquery_plugin/)

# python - 正确的多处理以在 Python 中处理 UDP

> ID：10435090
> 
> 赞同：3
> 
> 时间：2012-05-03T16:01:12.200
> 
> 标签：python, udp, multiprocessing

我正在尝试实现一个简单的 UDP 客户端和服务器。服务器应该收到一条消息并返回一个转换后的消息。

我对服务器的主要技术是在循环中侦听 UDP 消息，然后`multiprocessing.Process`为每个传入消息生成并在每个`Process`实例中发送回复：

```
class InputProcessor(Process):
    ...

    def run(self):
        output = self.process_input()
        self.sock.sendto(output, self.addr) # send a reply

if __name__ == "__main__":
    print "serving at %s:%s" % (UDP_IP, UDP_PORT)

    sock = socket.socket(socket.AF_INET,    # Internet
                         socket.SOCK_DGRAM) # UDP
    sock.bind((UDP_IP,UDP_PORT))

    while True:
        data, addr = sock.recvfrom(1024) # buffer size is 1024 bytes
        print "received message: %s from %s:%s" % (data, addr[0], addr[1])
        p = InputProcessor(sock, data, addr)
        p.start() 
```

在测试客户端，我做这样的事情：

```
def send_message(ip, port, data):
    sock = socket.socket(socket.AF_INET,    # Internet
                         socket.SOCK_DGRAM) # UDP
    print "sending: %s" % data
    sock.sendto(data, (ip, port))
    sock.close()

for i in xrange(SECONDS*REQUESTS_PER_SECOND):
    data = generate_data()
    p = multiprocessing.Process(target=send_message, args=(UDP_IP,
                                                           UDP_PORT,
                                                           data))
    p.start()
    time.sleep(1/REQUESTS_PER_SECOND) 
```

我在上面的代码中遇到的问题是，当`REQUESTS_PER_SECOND`高于某个值（~50）时，似乎某些客户端进程会收到发往不同进程的响应，即进程#1 收到进程#2 的响应，反之亦然。

请尽可能批评我的代码，因为我是网络编程的新手，可能会遗漏一些明显的东西。也许出于某种原因，使用 Twisted 甚至更有价值和更好，但是，我对了解内部结构非常感兴趣。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:43:01.710

根据之前的回答，我认为主要原因是客户端的 UDP 端口存在竞争条件。我没有看到在客户端代码中接收，但大概它类似于服务器部分中的代码。我认为具体而言，对于低于 50 个请求/秒的值，请求 - 响应往返完成并且客户端退出。当更多请求到达时，可能有多个进程阻塞读取 UDP 套接字，然后可能不确定哪个客户端进程接收到传入消息。如果在实际设置中网络延迟会更大，那么这个限制会更快达到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:43:24.640

非常感谢你们！看来我已经找到了我的代码之前失败的原因。我`multiprocessing.Manager().dict()` 在客户端内使用来检查服务器的结果是否正确。但是，我没有使用任何锁来包装一组写操作`dict()`，因此尽管服务器的输出是正确的，但还是出现了很多错误。

不久，在客户端，我对正确的服务器响应进行了不正确的检查。

# c# - 如何启用特殊键（ctrl-c、ctrl-v、tab、delete） Windows.Form.WebBrowser 控件

> ID：10435092
> 
> 赞同：3
> 
> 时间：2012-05-03T16:01:15.833
> 
> 标签：c#, .net, webbrowser-control

我有一个 Window.Form 上面有一个 WebBrowser 控件。如何使控件能够处理特殊键，例如用于在控件之间导航的 Tab 键？

我在 activeX 和 mfc 控件中看到了这样做的答案，但在 .NET 控件中没有看到。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:04:56.580

Windows.Forms WebBrowser 控件是 activex 控件的包装。但是，您具有默认情况下应具有的属性`WebBrowserShortcutsEnabled`( [MSDN Link )。](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.webbrowsershortcutsenabled.aspx)`true`

# ruby - 右键单击并在 Windows 中使用 Ruby 选择上下文菜单选项

> ID：10435094
> 
> 赞同：2
> 
> 时间：2012-05-03T16:01:28.430
> 
> 标签：ruby, windows, contextmenu

如何让 Ruby 右键单击​​ Windows 文件夹中的文件并从简单脚本的上下文菜单中选择一个选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:38:58.580

使用*win32utils*可以避免使用 API 调用将链接发送到桌面：

```
require 'win32/shortcut'
require 'win32/dir'
include Win32

Shortcut.new(Dir::DESKTOP + '\shortcut.lnk') do |s|
  s.path = "c:\\path\\to\\something.exe"
  s.window_style = Shortcut::SHOWNORMAL
  s.description = "My shortcut to something"
end 
```

你需要`win32-shortcut`和`win32-dir`宝石；您还需要确定要提供给`Shortcut#path`. 这通常可以使用 轻松完成`Dir#each`，将您感兴趣的目录传递给它，并对您迭代的目录元素进行某种控制。

# c++ - C++ 跳过函数

> ID：10435097
> 
> 赞同：0
> 
> 时间：2012-05-03T16:01:44.093
> 
> 标签：c++, function

我正在制作一个刽子手程序来练习我的功能。这是我开始测试一个功能。出于某种原因，他跳过了函数 char guessing(char guess); 他在屏幕上放的唯一的东西是“欢迎来到刽子手2.0”这句话和“这就是你输入的”这句话。如果你知道什么是错的，你能告诉我为什么它是错的。因为我 15 岁，我喜欢学习东西。

这是我的代码：

```
#include <iostream>
#include <string>
#include <ctime>
#include <cctype>
#include <vector>
#include <algorithm>

using namespace std;

char guess;

char guessing(char guess);
void check();

int main()
{
    cout <<"Welcome to Hangman 2.0\. Enjoy, have fun and good luck!!\n\n";

    check();

    return 0;
}

char guessing(char guess)
{
    cout <<"Enter a guess: ";
    cin >> guess;

    return guess;
}

void check()
{
    char guessing(char guess);
    cout <<"This is what you entered: ";
    cout << guess;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:06:03.593

您没有正确调用您的函数，请尝试：

```
void check()
{
    char ch = guessing();
    cout <<"This is what you entered: ";
    cout << ch;
} 
```

并像这样修改您的猜测功能：

```
char guessing()
{
    char guess;
    cout <<"Enter a guess: ";
    cin >> guess;

    return guess;
} 
```

这样您就不需要`guess`成员变量，也不需要将参数传递给您的函数。

除此之外，在 C++ 中调用函数 say`char guessing(char guess);`将类似于：

```
char res = guessing('a'); 
```

调用函数时不指定返回类型或参数类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:06:32.400

你的`check()`函数不正确，你在这里定义了一个函数而不是调用一个函数。你要：

```
void check()
{
    char c = guessing();
    cout << "This is what you entered: " << c;
} 
```

然后`guessing()`不应该接受参数，它应该只返回一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:15:42.763

试试这个，用这个:::替换你的检查功能

```
void check()
{
    char guess;
    guess = guessing(guess);
    cout <<"This is what you entered: ";
    cout << guess;
} 
```

但是你的函数猜测的参数是没用的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:05:48.260

你需要打电话

```
 guessing(guess); 
```

不是

```
char guessing(char guess); 
```

# c - 函数和浮点比较

> ID：10435099
> 
> 赞同：1
> 
> 时间：2012-05-03T16:01:46.240
> 
> 标签：c, function, floating-point, numerical-methods, newtons-method

```
#include<stdio.h>
#include<stdlib.h>
#define abs(a) ((a)>0 ? a: -a)
#define eps_sqrt 0.00000000000001
#define it 100

float sqrt(float x)
/*The Square Root Function using the Newton's Method*/
{
    int it_sqrt=0;
    float a_sqrt = x/2;
    while ((abs((a_sqrt*a_sqrt)-(x))>=eps_sqrt) && (2.0*a_sqrt != 0) && (it_sqrt<=it))
    {
        a_sqrt = a_sqrt - ((a_sqrt*a_sqrt)-(x)/(2.0*a_sqrt));
        it_sqrt++;
    }
    return a_sqrt;
}

int main()
{
    printf("%.5f\n", sqrt(5));
    system ("pause");
} 
```

我尝试使用牛顿迭代法在 Python 上找到平方根，它工作得非常好。我是 C 新手，我不明白为什么这个功能对我不起作用。每当我运行它时，它都会返回“-1.#INF0A”任何帮助将不胜感激。

* * *

**编辑：**我尝试将 eps 更改为`0.000001`，但也没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:09:02.003

更改此行：

```
 a_sqrt = a_sqrt - ((a_sqrt*a_sqrt)-(x)/(2.0*a_sqrt)); 
```

至

```
 a_sqrt = a_sqrt - ((a_sqrt*a_sqrt - x)/(2.0*a_sqrt)); 
```

为我工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:04:29.100

尝试使用更大的 epsilon，也许 python 使用双精度数而不是浮点数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T16:50:10.640

```
double mysqrt(double x){
    double eps=pow(10,-10);
    double x0 = 0.0;
    double x1 = x/2.0;
    while(fabs(x1 - x0)>eps){
        x0 = x1;
        x1 = x0 + (x - x0*x0)/x0/ 2.0;
    }
    return x1;
} 
```

宏扩展
`abs((a_sqrt*a_sqrt)-(x))`
扩展`(((a_sqrt*a_sqrt)-(x))>0 ? (a_sqrt*a_sqrt)-(x): -(a_sqrt*a_sqrt)-(x))`
NG：`-(a_sqrt*a_sqrt)-(x)`

`abs((a_sqrt*a_sqrt- x))`
扩张`(((a_sqrt*a_sqrt- x))>0 ? (a_sqrt*a_sqrt- x): -(a_sqrt*a_sqrt- x))`

改写
`#define abs(a) ((a)>0 ? a: -a)`
为
`#define abs(a) ((a)>0 ? a: -(a))`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T16:37:10.637

`double`这是使用实际上有意义的罕见情况之一。请注意，float 的精度明显低于 eps_sqrt：

```
[mic@mic-nb tmp]$ cat tmp2.c
#include <stdio.h>
#include <math.h>

int main() {
    double a = sqrtl(2.0);
    printf("%1.20f\n", a - (float) a);
}
[mic@mic-nb tmp]$ gcc tmp2.c; ./a.out
0.00000002420323430563
vs. your value of:
0.00000000000001 
```

因此，在大多数情况下，您的程序永远不会终止。

# java - “类型 B 不能是 C 的超接口；超接口必须是接口”错误

> ID：10435103
> 
> 赞同：5
> 
> 时间：2012-05-03T16:01:54.217
> 
> 标签：java

假设我得到了这个接口A：

```
interface A
{
    void doThis();
    String doThat();
} 
```

所以，我想要一些抽象类来实现方法 doThis() 而不是 doThat() 方法：

```
abstract class B implements A
{
    public void doThis()
    {
        System.out.println("do this and then "+ doThat());
    }

}

abstract class B2 implements A
{
    public void doThis()
    {
        System.out.println(doThat() + "and then do this");
    }
} 
```

当您最终决定在常规类中实现 de doThat 方法时会出现错误：

```
public class C implements B
{
    public String doThat()
    {
        return "do that";
    }
} 
```

此类导致我出现上述错误：

> “类型 B 不能是 C 的超接口；超接口必须是接口”

如果这个类层次结构是有效的，现在任何人都可以，或者我应该采取其他方式吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T16:03:42.777

你必须使用`extends`

```
public class C extends B 
```

了解`implements`和`extends`关键字之间的区别很重要。所以，我建议你从这个问题开始阅读：[Implements vs extends: When to use? 有什么不同？](https://stackoverflow.com/questions/10839131/implement-vs-extends-when-to-use-whats-the-difference)以及那里的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T16:04:11.553

由于`B`是一个类，正确的语法是使用`extends`：

```
public class C extends B { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T16:05:04.430

B 是一个抽象类，不能与“implements”关键字一起使用。您必须改用“扩展”。

# php - SQL查询转义+codeigniter

> ID：10435109
> 
> 赞同：5
> 
> 时间：2012-05-03T16:02:26.310
> 
> 标签：php, mysql, sql, codeigniter, codeigniter-2

我正在使用 codeigniter 并且大多数时候对我的查询使用活动记录（它会自动转义它们），但是由于变量，这个查询似乎并不完全适合它。所以我需要弄清楚如何手动转义查询。

Codeigniter 文档建议以这种方式转义查询：

```
$sql = "INSERT INTO table (title) VALUES(".$this->db->escape($title).")"; 
```

**我的原始查询**

```
$sql = "SELECT * FROM (`user_language`) WHERE `user_id` = '{$id}'"; 
```

**我的转义查询**

```
$sql = "SELECT * FROM (`user_language`) WHERE `user_id` = '{$id}' VALUES(".$this->db->escape($user_language).")"; 
```

但是我无法正确使用语法。错误消息是：

*   PHP 错误信息：未定义变量：user_language
*   SQL 错误：语法错误...在第 1 行的 'VALUES(NULL)' 附近

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T16:19:22.287

```
$sql = "SELECT * FROM `user_language` WHERE `user_id` = " . $this->db->escape($id); 
```

如果您想选择 $id 给出的用户语言，它应该以这种方式工作。

处理数字的另一种选择是：

```
$sql = "SELECT * FROM `user_language` WHERE `user_id` = " . (int)$id; 
```

codeigniter 也支持准备好的语句作为“查询绑定”：

> 使用绑定的第二个好处是值会自动转义，从而产生更安全的查询。您不必记住手动转义数据；引擎会自动为您完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T17:01:19.497

我很困惑为什么你说你不能在 CI 中使用**Active Record 类**，这是一个简单的 SQL 调用（下面的示例使用[方法链接](http://codeigniter.com/user_guide/database/active_record.html#chaining)）：

```
$this->db->select('*')->from('user_language')->where('user_id', $id);
$query = $this->db->get(); 
```

然后您`$id`会正确逃脱，并减轻任何注入。就我个人而言，我尽可能使用**AR**，它允许我编写快速高效的代码，而不必担心 SQL 调用（自定义查询）带来的坏事。

# objective-c - 如何使用一个 ViewController 文件加载横向 xib？

> ID：10435112
> 
> 赞同：1
> 
> 时间：2012-05-03T16:02:47.003
> 
> 标签：objective-c, ios, ipad, xib, ios-universal-app

我有一个通用应用程序。我为纵向和横向视图使用单独的 xib。`BOOL`当我处于横向时，我有应用程序检测方向并将 a 的值更改为 true。我想知道当这`BOOL`是真的时如何加载我的景观 xib。我尝试了几种不同的方法来实现这一点，但没有任何效果。对此问题的任何意见将不胜感激。我可以更新这篇文章以包含任何必要的代码片段。提前致谢。

编辑：我想在一个 ViewController 类中完成所有这些，并且只针对 iPad……而不是 iPhone。我已经解决了所有问题。我只需要加载景观xib。

编辑：在我`viewDidLoad`做这个：

```
if (userDevice.orientation == UIDeviceOrientationLandscapeLeft || userDevice.orientation == UIDeviceOrientationLandscapeRight) {
    landscape = YES;
} 
```

这是我的主视图控制器.m：

```
@implementation PassportAmericaViewController

@synthesize browseViewButton, webView, mainView, lblMemberName, menuOpen, internetActive, hostActive, isUsingiPad, portrait, landscape;

- (void)viewDidLoad {
menuOpen = NO;

UIDevice* userDevice = [UIDevice currentDevice];
if (userDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad) {
    isUsingiPad = YES;
}
if (isUsingiPad)
    if (userDevice.orientation == UIDeviceOrientationLandscapeLeft || userDevice.orientation == UIDeviceOrientationLandscapeRight) {
        landscape = YES;

    }
[self checkForKey];
[super viewDidLoad];
[self.navigationController setNavigationBarHidden:YES];
}

-(void)viewWillAppear:(BOOL)animated{

[self.navigationController setNavigationBarHidden:YES];
}

-(void) checkForKey{

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
int regCheck = [defaults integerForKey:@"registration"];
if (isUsingiPad) {
    if (regCheck == 0) {

        RegistrationViewController *regView = [[RegistrationViewController alloc]
                                               initWithNibName:@"RegistrationView-iPad" bundle:[NSBundle mainBundle]];
        regView.isUsingiPad = YES;
        [self.navigationController pushViewController:regView animated:YES];

    }else if (regCheck == 1) {
        @try {
            NSString *mbrFirstName = [defaults objectForKey:@"firstName"];
            NSString *mbrLastName = [defaults objectForKey:@"lastName"];

            NSMutableString *name = [[NSMutableString alloc] initWithString:mbrFirstName];
            [name appendString:@" "];
            [name appendString:mbrLastName];

            lblMemberName.text = name;
        }
        @catch (NSException *exception) {

        }        
    }
}else{
    if (regCheck == 0) {

        RegistrationViewController *regView = [[RegistrationViewController alloc]
                                               initWithNibName:@"RegistrationView" bundle:[NSBundle mainBundle]];
        [self.navigationController pushViewController:regView animated:YES];

    }else if (regCheck == 1) {
        @try {
            NSString *mbrFirstName = [defaults objectForKey:@"firstName"];
            NSString *mbrLastName = [defaults objectForKey:@"lastName"];

            NSMutableString *name = [[NSMutableString alloc] initWithString:mbrFirstName];
            [name appendString:@" "];
            [name appendString:mbrLastName];

            lblMemberName.text = name;
        }
        @catch (NSException *exception) {

        }        
    }
}
}

-(IBAction) openBrowseView{

if (isUsingiPad && landscape) {
        BrowseViewController *browseView = [[BrowseViewController alloc]
                                            initWithNibName:@"BrowseView-iPadLandscape" bundle:[NSBundle mainBundle]];
        browseView.isUsingiPad = YES;
        [self.navigationController pushViewController:browseView animated:YES];
    }else if (isUsingiPad){
    BrowseViewController *browseView = [[BrowseViewController alloc]
                                        initWithNibName:@"BrowseView-iPad" bundle:[NSBundle mainBundle]];
    browseView.isUsingiPad = YES;
    [self.navigationController pushViewController:browseView animated:YES];
    }else{
    BrowseViewController *browseView = [[BrowseViewController alloc]
                                        initWithNibName:@"BrowseView" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:browseView animated:YES];

}
}     

-(IBAction) openViewMore{

if (isUsingiPad) {
    ViewMoreViewController *viewMoreView = [[ViewMoreViewController alloc]
                                            initWithNibName:@"ViewMoreView-iPad" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:viewMoreView animated:YES];
    viewMoreView.isUsingiPad = YES;
}else{
    ViewMoreViewController *viewMoreView = [[ViewMoreViewController alloc]
                                            initWithNibName:@"ViewMoreView" bundle:[NSBundle mainBundle]];
    [self.navigationController pushViewController:viewMoreView animated:YES];
}       
}

-(IBAction) callTollFree:(id)sender {

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:8002837183"]];

}

-(IBAction)clickToJoin:(id)sender {

if (isUsingiPad) {
    webView = [[WebViewController alloc]
               initWithNibName:@"WebView-iPad" bundle:[NSBundle mainBundle]];
    webView.url=@"http://www.passport-america.com/Members/JoinRenew.aspx";
    [self.navigationController pushViewController:webView animated:YES];
    webView.isUsingiPad = YES;
}else {
    webView = [[WebViewController alloc]
               initWithNibName:@"WebView" bundle:[NSBundle mainBundle]];
    webView.url=@"http://www.passport-america.com/Members/JoinRenew.aspx";
    [self.navigationController pushViewController:webView animated:YES];
}
}

-(IBAction) iPadContactUs:(id)sender {

[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"mailto:info@passport-america.com"]];

}

-(void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
if ([animationID isEqualToString:@"slideMenu"]){
    UIView *sq = (__bridge UIView *) context;
    [sq removeFromSuperview];

}
}

-(void) positionViews {

if (isUsingiPad) {
    UIInterfaceOrientation destOrientation = self.interfaceOrientation;
    if (destOrientation == UIInterfaceOrientationPortrait || destOrientation == UIInterfaceOrientationPortraitUpsideDown) {
        PassportAmericaViewController *homeView2 = [[PassportAmericaViewController alloc]
                                             initWithNibName:@"PassportAmericaViewController-iPad" bundle:[NSBundle mainBundle]];
        [self.navigationController pushViewController:homeView2 animated:YES];
        homeView2.isUsingiPad = YES;
        homeView2.portrait = YES;
        homeView2.landscape = NO;
    }else{
        PassportAmericaViewController *homeView2 = [[PassportAmericaViewController alloc]
                                             initWithNibName:@"PassportAmericaViewController-iPadLandscape" bundle:[NSBundle mainBundle]];
        [self.navigationController pushViewController:homeView2 animated:YES];
        homeView2.isUsingiPad = YES;
        homeView2.portrait = NO;
        homeView2.landscape = YES;

    }
}
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if (isUsingiPad) {
    return YES;
}else{
    // Return YES for supported orientations
    return NO;
}
}

-(void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration: (NSTimeInterval)duration {
if (isUsingiPad) {
    [self positionViews];
}else{

}
}

- (void)didReceiveMemoryWarning {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:10:05.380

## 编辑

看起来你需要在这里做你的工作

```
BOOL isLandscape = UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation);
NSString *nibName = isLandscape ? @"landscapeNibName" : @"portraitNibName";

RegistrationViewController *regView = [[RegistrationViewController alloc] initWithNibName:nibName bundle:[NSBundle mainBundle]]; 
```

* * *

我不确定你在哪里卡住了......

```
- (id)init;
{
    BOOL isLandscape = UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation);
    NSString *nibName = isLandscape ? @"landscapeNibName" : @"portraitNibName";

    self = [super initWithNibName:nibName bundle:nil];
    if (self) {
        // any other init stuff
    }
    return self;
} 
```

或者如果您更喜欢在实例化时命名 nib

```
BOOL isLandscape = UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation);
NSString *nibName = isLandscape ? @"landscapeNibName" : @"portraitNibName";

MyViewController *viewController = [[MyViewController alloc] initWithNibName:nibName bundle:nil]; 
```

# php - 一些 SEO 工具告诉我该网站正在重定向到一个奇怪的 url

> ID：10435116
> 
> 赞同：0
> 
> 时间：2012-05-03T16:02:54.993
> 
> 标签：php, .htaccess, redirect, seo

我有一个非常奇怪的“问题”。我尝试使用一些在线重定向工具从网站 (http://www.zen-slim.com/) 检查我的主页，但我从他们那里得到了一个奇怪的“反应”。

*   [http://imageshack.us/photo/my-images/690/55667353.jpg/](http://imageshack.us/photo/my-images/690/55667353.jpg/)
*   [http://imageshack.us/photo/my-images/593/52062478.jpg/](http://imageshack.us/photo/my-images/593/52062478.jpg/)
*   [http://imageshack.us/photo/my-images/443/79452246.jpg/](http://imageshack.us/photo/my-images/443/79452246.jpg/)

正如您在图片中看到的那样，在这个特定的工具上，我收到了两个 302 重定向，然后是一个 200（我认为这应该是正常的，因为该站点正在运行和运行）。我尝试使用 curl 和 fsocketopen 检查标头响应，我得到了来自它们的 200 个响应。但是在线工具说的有些不同。我的 .htaccess 文件是[http://pastebin.com/Wgjxrq83](http://pastebin.com/Wgjxrq83)。

你能帮忙吗，因为我真的不知道它有什么问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:10:56.050

无论您使用哪种软件，您的网站都会在第一次请求时运行检查，并在第一次请求时通过驱动重定向来证明和注入一些东西。

```
$ curl -Iv http://www.zen-slim.com/
* About to connect() to www.zen-slim.com port 80 (#0)
*   Trying 46.252.196.1... connected
* Connected to www.zen-slim.com (46.252.196.1) port 80 (#0)
> HEAD / HTTP/1.1
> User-Agent: curl/7.21.6 (i386-pc-win32) libcurl/7.21.6 OpenSSL/0.9.8r zlib/1.2.5
> Host: www.zen-slim.com
> Accept: */*
>
< HTTP/1.1 302 Moved Temporarily
HTTP/1.1 302 Moved Temporarily
< Content-Length: 0
Content-Length: 0
< Location: /?9cc38870
Location: /?9cc38870

<
* Connection #0 to host www.zen-slim.com left intact
* Closing connection #0 
```

或通过[http://blooming-mountain-4729.herokuapp.com/web/shorturl.php?http://www.zen-slim.com/](http://blooming-mountain-4729.herokuapp.com/web/shorturl.php?http://www.zen-slim.com/)

```
Original URL: http://www.zen-slim.com/
Resulting URL: /
Status code (after all redirects): 403
Number of responses: 3
Number of redirects: 2
 * http://www.zen-slim.com/ -- 302 --> /?07731fc0
 * /?07731fc0 -- 302 --> / 
```

之后，如果浏览器不遵循套件，它甚至会给你一个 403（禁止）：

```
Original URL: http://www.zen-slim.com/
Resulting URL: http://www.zen-slim.com/
Status code (after all redirects): 403
Number of responses: 1
Number of redirects: 0 
```

我猜这不是一个编程，而是一个与网站管理员相关的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T04:39:33.973

我终于能够弄清楚这一点。显然，来自 .htaccess 文件的以下代码是问题所在：

```
RewriteCond %{HTTP_HOST}  !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1  [R=301,L] 
```

并将其更改为：

```
RewriteCond %{HTTP_HOST}  zen-slim\.com [NC]
RewriteRule ^(.*)$ http://www.zen-slim.com/$1  [R=301,L] 
```

这绝对是一种奇怪的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:16:48.600

我通过网站审核员检查了您的网站。它说你所有的页面都是 200，但是对于 [http://www.zen-slim.com/questionnaire](http://www.zen-slim.com/questionnaire)，它是 302。

# git - PS1 env 变量在 mac 上不起作用

> ID：10435117
> 
> 赞同：10
> 
> 时间：2012-05-03T16:02:58.563
> 
> 标签：git, macros, ps1

我有一个脚本（不是我自己编写的），它在我的命令提示符中显示了 git 分支/svn 分支。有谁知道为什么这在mac上不起作用？它在linux中完美运行。

来自[https://github.com/xumingming/dotfiles/blob/master/.ps1](https://github.com/xumingming/dotfiles/blob/master/.ps1)：

```
# Display ps1 with colorful pwd and git status
# Acording to Jimmyxu .bashrc
# Modified by Ranmocy
# --

if type -P tput &>/dev/null && tput setaf 1 &>/dev/null; then
    color_prompt=yes
else
    color_prompt=
fi

__repo () {
    branch=$(type __git_ps1 &>/dev/null && __git_ps1 | sed -e "s/^ (//" -e "s/)$//")
    if [ "$branch" != "" ]; then
        vcs=git
    else
        branch=$(type -P hg &>/dev/null && hg branch 2>/dev/null)
        if [ "$branch" != "" ]; then
            vcs=hg
        elif [ -e .bzr ]; then
            vcs=bzr
        elif [ -e .svn ]; then
            vcs=svn
        else
            vcs=
        fi
    fi
    if [ "$vcs" != "" ]; then
        if [ "$branch" != "" ]; then
            repo=$vcs:$branch
        else
            repo=$vcs
        fi
        echo -n "($repo)"
    fi
    return 0
}

if [ "$color_prompt" = yes ]; then
# PS1='\[\e[01;32m\]\u@\h\[\e[00m\]:\[\e[01;34m\]\w\[\e[33;40m\]$(__repo)\[\e[00m\]\$ '
    PS1='\[\e[01;32m\]\u\[\e[00m\]:\[\e[01;34m\]\W\[\e[33m\]$(__repo)\[\e[00m\]\$ '
else
    PS1='\u@\h:\w$(__repo)\$ '
fi
unset color_prompt

case "$TERM" in
xterm*|rxvt*)
  PS1="\[\e]0;\W\a\]$PS1"
  ;;
*)
  ;;
esac 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T16:10:30.737

Git 的 Mac OS X 安装不`__git_ps1`包括在内。

采用：

```
alias __git_ps1="git branch 2>/dev/null | grep '*' | sed 's/* \(.*\)/(\1)/'" 
```

作为替代。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-10T02:09:10.060

如果命令失败，您提供的脚本将无法检测 git repos `__git_ps1`。将此添加到`~/.bash_profile`：

```
source /usr/local/git/contrib/completion/git-completion.bash
source /usr/local/git/contrib/completion/git-prompt.sh 
```

假设您将脚本文件存储为`~/.ps1`，还添加：

```
source ~/.ps1 
```

* * *

*   此解决方案还为 git 启用了选项卡完成。
*   [Mac OS X 安装的 git](http://git-scm.com/download/mac) *确实*包含 __git_ps1，感谢 sschuberth 和 Cheapener 提到 git-completion.bash。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-01T11:47:20.270

在使用内置 git 的新 Yosemite mac 上，我使用了这个：

```
source /Library/Developer/CommandLineTools/usr/share/git-core/git-completion.bash
source /Library/Developer/CommandLineTools/usr/share/git-core/git-prompt.sh
export PS1='\[\e]0;\u@\h: \w\a\]\[\e[32;1m\]\u@\h:\w \[\e[33;1m\]$(__git_ps1 "[%s] ")\[\e[32;1m\]\$ \[\e[0m\]' 
```

注意：在 El Capitan 上，我不得不将 git 脚本的路径更改为`/Applications/Xcode.app/Contents/Developer/usr/share/git-core`，我猜你必须安装 XCode 才能工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:27:26.053

如果您通过 macports (git-core) 安装了 git，则应将以下内容添加到`~/.bash_profile`：

```
source /opt/local/etc/profile.d/bash_completion.sh
source /opt/local/share/git-core/git-prompt.sh 
```

git-prompt.sh 的位置似乎已经改变了几次。

# c# - 如何将自定义对象序列化和反序列化为 xml？

> ID：10435120
> 
> 赞同：-1
> 
> 时间：2012-05-03T16:03:12.247
> 
> 标签：c#, xml, serialization

我想将此对象 Dictionary>> 序列化为 xml 并稍后在我的 asp.net 应用程序中再次反序列化。有人知道如何做到这一点吗？

提前致谢

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:08:06.043

[这](https://stackoverflow.com/questions/67959/net-xml-serialization-gotchas)是字典类的实现，可以序列化为xml并返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:07:02.457

可能本教程对您有所帮助。 [http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)

# ruby-on-rails - Resque 错误 - /sinatra_adapter.rb:50:in `included': undefined method `before' for Sinatra::Request:Class (NoMethodError)，当我启动 rails 应用程序时

> ID：10435121
> 
> 赞同：1
> 
> 时间：2012-05-03T16:03:24.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sinatra, resque

启动 rails 应用程序时出现错误。只是为了提供更多信息我做了什么

routes.rb 有

```
mount Resque::Server, :at => "/resque"
Gemfile has 
gem 'rails', "~> 3.2.0"
gem 'resque', :require => 'resque/server' 
```

当我启动 Rails 应用程序时出现此错误

```
/usr/local/lib/ruby/gems/1.9.1/gems/authlogic-3.1.0/lib/authlogic/
controller_adapters/sinatra_adapter.rb:50:in `included': undefined 
method `before' for Sinatra::Request:Class (NoMethodError) 
```

# asp.net - SWF 适用于 Web 而不是 Intranet

> ID：10435124
> 
> 赞同：0
> 
> 时间：2012-05-03T16:03:30.017
> 
> 标签：asp.net, iis, flash

我有一个 SWF，可以在 Web 上运行，但不能在 Intranet 上运行。SWF 通过绑定到 asmx HTTP 处理程序来加载其初始 XML 内容。相同的代码 - 不同的服务器。在 Intranet 上 - 右键单击​​会显示 SWF 上下文菜单 - 但没有呈现内容。IIS 提供了正确的 MIME 类型 (swf/flv)，所以我认为这可能是客户端问题。问题出现在 IE/Chrome/FF 上。已调整浏览器内联网安全设置并查看高级设置 - 还没有乐趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:48:58.027

问题解决了。SWF 仅被许可在特定的 www 域上工作。

# c# - 任何 CPU 或 x64 的平台目标锁定文件

> ID：10435129
> 
> 赞同：0
> 
> 时间：2012-05-03T16:03:37.767
> 
> 标签：c#, wpf, file, locking

我注意到，当您在 Visual Studio 中将 Platform target 设置为 Any CPU / x64 时，某些文件会被锁定（例如，aticfx64.dll，它是 AMD 显示器的设备驱动程序文件）。但是，对于 x86 上的 Platform 目标，没有文件被锁定。

我们需要 Any CPU 上的 Platform 目标，但我们不希望这些文件被锁定。我已经上网了，但找不到有关此问题的任何信息。有没有人有关于如何解决这个问题或遇到类似问题的建议？谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:11:41.247

`AppInit_DLLs`32 位和 64 位应用程序的注册表中有不同的列表。通常，DLL 注入因进程位数而异。

您可能需要仔细检查预加载 DLL 的注册表列表并删除任何您不想要的。

# .net - 错误：在 msi 数据库中将记录输入到 MsiAssembly 和 MsiAssemblyName 表时出现 1615

> ID：10435130
> 
> 赞同：0
> 
> 时间：2012-05-03T16:03:38.663
> 
> 标签：.net, windows-installer, gac

我遇到了问题：在使用 MsiOpenDatabaseView() 方法向 msi 数据库的 MsiAssembly 和 MsiAssemblyName 表添加条目时，它只是失败并出现错误代码 - 1615。只有这两个表就是这种情况。起初我认为这将是由于我将应用程序类型更改为 .NET 的原因。但是在改变之后它也不起作用。然后我尝试为 MsiAssembly 和 MsiAssemblyName 表的条目更新 _Validation 表。它也很有效。可能我错过了一些阻碍在 MsiAssembly 和 MsiAssembly 表中输入记录的依赖项。你能给我一些关于这个问题的线索或提示吗？？？？？？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:49:29.243

错误 1615 是“SQL 查询语法无效或不受支持”。在没有看到您的查询的情况下，我的第一个猜测是该表不存在于您尝试编辑的 .msi 文件中，或者您正在尝试执行 Windows Installer SQL 语法不正确支持的操作。（对于复杂的查询，我更喜欢`MsiVewModify()`尽可能使用基于记录的更新。）

对于错误消息中的插入，您可以通过验证来验证表是否存在

```
MsiDatabaseIsTablePersistent(hDatabase, TEXT("MsiAssembly")) == MSICONDITION_TRUE 
```

如果没有，您可以通过调用[MsiDatabaseImport](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370079.aspx)（向其传递从 MsiDatabaseExport 创建的文件）或通过正确的`CREATE TABLE ...`SQL 查询来添加它。

然后我更喜欢按照以下行插入代码（为清楚起见，省略了错误检查）。它可以在沿途的几个步骤中提供错误信息，而不是将所有信息集中到原始 SQL 方法的 MsiViewExecute 调用中。

```
PMSIHANDLE hView, hRec;
MsiDatabaseOpenView(hDatabase, TEXT("SELECT * FROM `MsiAssembly`"), &hView);
MsiViewExecute(hView, NULL);
hRec = MsiCreateRecord(5);
MsiRecordSetString(hRec, 1, TEXT("Abc.dll"));
MsiRecordSetString(hRec, 2, TEXT("MainApp"));
MsiRecordSetString(hRec, 3, TEXT("Abc"));
MsiRecordSetString(hRec, 4, TEXT(""));
MsiRecordSetInteger(hRec, 5, 0);
// note: if modifying during installation, use MSIMODIFY_INSERT_TEMPORARY instead
MsiViewModify(hView, MSIMODIFY_INSERT, hRec); 
```

# java - 编辑节点后如何不折叠JTree中的节点

> ID：10435133
> 
> 赞同：0
> 
> 时间：2012-05-03T16:03:58.703
> 
> 标签：java, swing, jtree

我想知道如何实现这个功能：

我有可编辑的 JTree，我可以在其中编辑节点的名称。如果我有一些节点是分支节点（其中有一些叶节点）并且在编辑时扩展了这个分支节点，编辑后这个节点将被折叠。

编辑完成后，如果该分支节点处于打开状态，我想保持该分支节点处于打开状态；如果它处于折叠状态，则该分支节点处于折叠状态。

我试图查看[TreeWillExpandListener](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/event/TreeWillExpandListener.html)但它似乎不能解决我的问题，因为我需要在调用这些方法之前识别实际节点是否处于编辑模式......

如何做到这一点？很明显这是必要的，但我根本找不到答案：/

好的，这就是代码，我将尝试解释它。首先，我有实现 TreeModel 的类 ContactTreeModel。构造函数只是从主应用程序框架加载地址簿和组管理器，我创建新的根并在第二种方法中从数据库加载数据。

```
public ContactTreeModel() {
    addressBookManager = ContactManagerFrame.getAddressBookManager();
    groupManager = ContactManagerFrame.getGroupManager();
    root = new DefaultMutableTreeNode();
    processTreeHierarchy();
}

private void processTreeHierarchy() {
    DefaultMutableTreeNode group, contact;
    for (Group g : addressBookManager.getGroups()) {
        group = new DefaultMutableTreeNode(g);
        root.add(group);
        for (Contact c : addressBookManager.getContactsFromGroup(g)) {
            contact = new DefaultMutableTreeNode(c);
            group.add(contact);
        }
    }
} 
```

我读到TreeModel 中的[valueForPathChanged方法在以下情况下被启动](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeModel.html#valueForPathChanged%28javax.swing.tree.TreePath,%20java.lang.Object%29)

> 当用户将路径标识的项目的值更改为 newValue 时发送消息。如果 newValue 表示一个真正的新值，模型应该发布一个 treeNodesChanged 事件。

所以我写了这样的方法：

```
@Override
public void valueForPathChanged(TreePath path, Object newValue) {
    // backup of the original group
    Group oldGroup = (Group) path.getLastPathComponent();
    try {
        Group testGroup = (Group) path.getLastPathComponent();
        testGroup.setName((String) newValue);
        // validation of the group to be updated
        groupManager.validateGroup(testGroup, true);
        oldGroup.setName((String) newValue);
        // updating of the group in db
        groupManager.updateGroup(oldGroup);
    } catch (ServiceFailureException | ValidationException ex) {
        // if database error occured or validation exception is raised, 
        // update label in gui 
        ContactManagerFrame.getStatusPanelLabel().setText(ex.getMessage());
    } finally {
        fireTreeStructureChanged();
    }
} 
```

注意 finally 块中的方法，该方法总是被启动。看起来像

```
protected void fireTreeStructureChanged() {
    Object[] o = {root};
    TreeModelEvent e = new TreeModelEvent(this, o);
    for (TreeModelListener l : treeModelListeners) {
        l.treeNodesChanged(e);
    }
} 
```

这有点棘手，也是它不起作用的原因（我猜）。我只是遍历所有 treeModelListeners 并启动 treeNodesChanged 方法。

我将树模型侦听器指定的数组作为 ContactTreeModel 和相关方法中的私有属性：

```
private Vector<TreeModelListener> treeModelListeners = new Vector<>();

@Override
public void addTreeModelListener(TreeModelListener l) {
    treeModelListeners.addElement(l);
}

@Override
public void removeTreeModelListener(TreeModelListener l) {
    treeModelListeners.removeElement(l);
} 
```

最后一件事，我添加到模型中的模型监听器长什么样？它来了：

```
public class ContactTreeModelListener implements TreeModelListener {
    @Override
    public void treeNodesChanged(TreeModelEvent e) {
        System.out.println("nodes changed");
    }

    @Override
        public void treeNodesInserted(TreeModelEvent e) {
        System.out.println("nodes inserted");
    }

    @Override
    public void treeNodesRemoved(TreeModelEvent e) {
        System.out.println("nodes removed");
    }

    @Override
    public void treeStructureChanged(TreeModelEvent e) {
        System.out.println("structure changed");
    }
} 
```

所以它基本上什么都不做。我在其他地方注册了监听器，现在没关系。

所以，当我执行它时，在这种状态下，树不会崩溃，并且行为是想要的。但即使它真的重写了该节点的名称（标签），如果原始字符串大约是 5 个字符，而我将其更改为 4 个字符，那么标签中将只有 4 个字符，但还有第五个字符的空白空间。因此，在我完成编辑该标签后，原始标签的大小并没有改变。同样，当我扩展组的名称时，例如，我将其从 4 个字符重命名为 5 个字符，该节点的标签将包含点，表示整个文本太大而无法显示。这很奇怪......我如何制作该标签的更新日期？

最后一件事......因为我在 JTree 中有自定义图标 + 我在空组和非空组之间进行识别，所以每次我在树中执行一些操作时，我都需要检查 db 中的实际图标（我检查了它即使我只是打开和关闭节点也会执行）。这是非常低效的，所以我扩展了 DefaultTreeCellRenderer，我在其中进行实际缓存：

```
@Override
public Component getTreeCellRendererComponent(
        JTree tree,
        Object value,
        boolean sel,
        boolean expanded,
        boolean leaf,
        int row,
        boolean hasFocus) {

    if (iconCache == null) {
        throw new NullPointerException("iconCache in " 
             + this.getClass().getName() + " is null");
    }

    super.getTreeCellRendererComponent(
            tree, value, sel,
            expanded, leaf, row,
            hasFocus);

    if (value instanceof Group) {
        Group g = (Group) value;
        Icon groupIcon = iconCache.get(g);
        if (groupIcon == null) {
            if (groupHasContacts(g)) {
                groupIcon = groupNonEmpty;
            } else {
                groupIcon = groupEmptyIcon;
            }
            iconCache.put(g, groupIcon);
        }
        JLabel result = (JLabel) super.getTreeCellRendererComponent(tree,
                g.getName(), sel, expanded, leaf, row, hasFocus);

        result.setIcon(groupIcon);
        return result;
    }
    else if (value instanceof Contact) {
        Contact c = (Contact) value;
        Icon icon = iconCache.get(c);
        if (icon == null) {
            icon = this.contactIcon;
            iconCache.put(c, icon);
        }
        JLabel result = (JLabel) super.getTreeCellRendererComponent(
                tree, c.getName() + c.getSurname(), 
                sel, expanded, leaf, row, hasFocus);
        result.setIcon(icon);
        return result;
    }

    JLabel defaultNode = (JLabel) super.getTreeCellRendererComponent(
            tree, "?", sel, expanded, leaf, row, hasFocus);

    defaultNode.setIcon(unknownNode);
    return defaultNode;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:16:54.573

未正确重绘标签的更新问题可能与您仅在标识路径的数组中触发`treeNodesChanged`事件有关。`root`

尝试从以下位置调用`valueForPathChanged`：

```
public void fireTreeNodesChanged(TreePath path) {
    TreeModelEvent e = new TreeModelEvent(this, path.getPath());
    for (TreeModelListener l : treeModelListeners) {
        l.treeNodesChanged(e);
    }
} 
```

顺便说一句，你的名字`fireTreeStructureChanged`实际上`treeNodesChanged`很容易引起误解。

# android - 如何在音乐播放服务和 UI 线程之间进行通信

> ID：10435137
> 
> 赞同：3
> 
> 时间：2012-05-03T16:04:11.427
> 
> 标签：android, android-service

我在 ListView 中有一个音乐标题列表。

我可以单击每个项目以通过服务中的 MediaPlayer 播放音乐。

现在我想实现 2 个功能：

*   音乐进度条，显示歌曲中的当前位置
*   当歌曲结束时服务将继续播放列表中的下一首歌曲

那么如何从后台服务更新 UI？（我知道 Stackoverflow 上有一些解决方案，但在我看来，从服务中每秒发送一个广播有点过分，即）我必须使用绑定吗？绑定有什么好处？现在我只是使用包含歌曲路径的 Intent (startService(intent)) 启动服务。

第二个问题呢？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:15:32.943

我猜你自己建立了服务。因此，您知道它是如何构建的以及如何访问 mediaPlayer 引用。您需要做的是将您的服务转换为[绑定服务。](http://developer.android.com/guide/topics/fundamentals/bound-services.html)也许您希望您的服务通过以下方式启动`startService`（否则绑定的服务将无法在您的活动中存活），但之后，您必须从活动内部绑定到它。

绑定后，您将获得一个[IBinder](http://developer.android.com/guide/topics/fundamentals/bound-services.html#Binder)（您将定义它），并且能够通过此 IBinder 将 mediaPlayer 引用导出到绑定的活动。之后，一切都很简单，在媒体播放器上插入一个监听器并更新你的 UI（在 UI 线程中！）。

此外，您将需要[提出您的服务](http://developer.android.com/guide/topics/fundamentals/services.html#Foreground)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:37:04.537

我正在解决非常相似的问题，但是，我自己做了混音/演奏部分。android player-service 部分的代码位于[-github-](https://github.com/josef-jelinek/tiny-mod-player/tree/master/app.gamod-player/src/gamod/client)

对于应用程序和服务之间的通信（它应该是一个在状态栏中带有通知的前台服务，否则它可能会经常被静默杀死/暂停）我尝试了不同的方法并最终得到

*   活动 -> 服务 - 使用 Messenger
*   服务 -> 活动 / 任何东西 - 使用 BroadcastReceiver

github 上的代码并不算大（包括导入在内总共不到 500 行）给你一个启发......

顺便提一句。它还显示了一个服务绑定，它不会在活动退出时终止服务。

# google-chrome-extension - 可以通过 Google Chrome 扩展获取 HTTP auth 登录用户的用户名吗？

> ID：10435140
> 
> 赞同：1
> 
> 时间：2012-05-03T16:04:12.960
> 
> 标签：google-chrome-extension

请问，是否可以通过 Google Chrome 扩展程序获取 HTTP auth 登录用户的用户名？权限没问题，我都可以设置。

谢谢！

[http://code.google.com/chrome/extensions/devguide.html](http://code.google.com/chrome/extensions/devguide.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:34:15.603

您可以使用[webRequest API](https://code.google.com/chrome/extensions/webRequest.html)为您查看标头。`Authorization`下面是一些示例代码，它从所有 HTTP 请求的标头中解析出 base64 编码的用户名和密码：

```
chrome.webRequest.onSendHeaders.addListener(function(details) {
    console.log(details.url, details.requestHeaders);
    for(var i = 0; i < details.requestHeaders.length; ++i) {
        var header = details.requestHeaders[i];
        if(header.name == "Authorization") {
            // this is my quick effort for parsing the auth value
            // formatted like "Basic [base64 of 'user:pass']"
            var b64val = header.value.split(" ")[1];
            var credArray = atob(b64val).split(":");
            var user = credArray[0];
            var pass = credArray[1];

            // now do something with user/pass
        }
    }
},
{"urls":["*://*/*"]},
["requestHeaders"]); 
```

# mysql - 有效的 MySQL 子查询语法和位置

> ID：10435142
> 
> 赞同：0
> 
> 时间：2012-05-03T16:04:15.670
> 
> 标签：mysql, sql, syntax, subquery

我从来没有弄清楚关于 SQL 子查询的几个语法问题。主要我感兴趣的是在父查询中放置子查询是否有效。

这是一个引发错误的示例：

```
SELECT 
  sum(votes.vote) AS sum, 
  votes.vote IS NOT NULL AS did_i_vote, 
  purchase_id, subject, full_name 
FROM (
  SELECT vote FROM votes 
  where votes.acct_id=3 AND 
    votes.column_name='purchase_id'
) votes  
RIGHT JOIN items_purchased 
  ON votes.parent_id=items_purchased.purchase_id  
JOIN accounts 
  ON items_purchased.purchaser_account_id=accounts.acct_id   
JOIN items 
  ON items_purchased.item_id=items.folder_id   
WHERE purchase_id='2' 
GROUP BY items_purchased.purchase_id 
```

如何使这个查询工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:07:58.300

零件有一处错误`GROUP BY`！

在 中`SELECT`，您只能在`GROUP BY`不存在的列的和聚合函数中显示列。

* * *

检查[此](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)信息！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:06:54.117

您`subquery`必须选择`column`之后要引用的每一个。

```
SELECT 
  sum(votes.vote) AS sum, 
  votes.vote IS NOT NULL AS did_i_vote, 
  purchase_id, subject, full_name 
FROM (
  SELECT vote, parent_id FROM votes 
  where votes.acct_id=3 AND 
    votes.column_name='purchase_id'
) votes  
RIGHT JOIN items_purchased 
  ON votes.parent_id=items_purchased.purchase_id  
JOIN accounts 
  ON items_purchased.purchaser_account_id=accounts.acct_id   
JOIN items 
  ON items_purchased.item_id=items.folder_id   
WHERE purchase_id='2' 
GROUP BY items_purchased.purchase_id 
```

是我假设的（注意我在子查询中选择`vote`和）`parent_id`

# c++ - “tip”在 Arrow-Unicode 字符中的位置

> ID：10435143
> 
> 赞同：7
> 
> 时间：2012-05-03T16:04:21.510
> 
> 标签：c++, qt, unicode, fonts

有没有一种方法可以在 unicode 中找到箭头字符“尖端”的位置？

例如，我有 ↱ 并想找到 ">" 的位置，这样我就可以在我的小部件中适当的 y 位置绘制角色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T16:15:57.823

这取决于字体。

您可以尝试使用 FreeType 之类的库（不确定 Qt 是否具有字形 blitters）将字形 blitting 到图像缓冲区，然后找到应该是提示的最右边的像素。

# javascript - Sencha Architect 从其他函数调用函数

> ID：10435144
> 
> 赞同：0
> 
> 时间：2012-05-03T16:04:21.863
> 
> 标签：javascript, extjs, sencha-architect

我有一个定义了多个函数的 FormPanel（见下文）。我需要从另一个函数调用一个函数，但我得到错误，我正在调用的函数未定义。如果我从 OnMyButtonTap 函数调用 ShowInspections 它可以工作如果我从 LoginOk 函数调用 ShowInspections 它不起作用我很茫然我相信这是一个范围问题，但是它是如此新 Sencha 我真的需要一些帮助。

```
Ext.define('MyApp.view.LoginPanel', {
extend: 'Ext.form.Panel',
alias: 'widget.Login',

config: {
    items: [
        {
            xtype: 'fieldset',
            height: 226,
            width: 440,
            title: 'Enter Login Information',
            items: [
                {
                    xtype: 'textfield',
                    id: 'userid',
                    label: 'User ID',
                    labelWidth: '40%',
                    required: true
                },
                {
                    xtype: 'textfield',
                    id: 'pswd',
                    label: 'Password',
                    labelWidth: '40%',
                    required: true
                }
            ]
        },
        {
            xtype: 'button',
            height: 86,
            itemId: 'mybutton',
            text: 'Login'
        }
    ],
    listeners: [
        {
            fn: 'onMybuttonTap',
            event: 'tap',
            delegate: '#mybutton'
        }
    ]
},

onMybuttonTap: function(button, e, options) {
    doLogin(Ext.getCmp('userid').getValue(),Ext.getCmp('pswd').getValue(),this.LoginOk,this.LoginFail,this.LoginError);

},

LoginOk: function() {
    //
    // this function is called from doLogin and it works
    //
    //GetInspections('01/01/2011','12/31/2012','','',this.ShowInspections,this.LoadDataFail,this.LoadDataError);
    // the function GetInspections does work, but does not call the "ShowInspections" function
    this.ShowInspection);  // directly calling this function does NOT work either
},

LoginFail: function() {
    Ext.Msg.alert('Invalid User ID and/or Password.');

},

LoginError: function() {
    Ext.Msg.alert('Login Error!');
},

LoadDataFail: function() {
    Ext.Msg.alert('No Inspections found.');
},

LoadDataError: function() {
    Ext.Msg.alert('Error Loading Inspections.');
},

ShowInspections: function() {
    Ext.Msg.alert('got inspections');
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:48:15.287

There is some typo in the current code.

```
this.ShowInspection); 
```

should read as

```
this.ShowInspections(); 
```

Isn't that your problem?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:55:43.460

你在任何地方都错过了 () 你只需要改变 this.LoginOk(), this.LoginFail() 等和 this.ShowInspections()

# jpa - 可以使用 JPA 仅返回一列

> ID：10435151
> 
> 赞同：2
> 
> 时间：2012-05-03T16:04:40.107
> 
> 标签：jpa, many-to-many, entity-bean

我有一个 Open JPA 实体，它成功地连接了多对多关系。现在我成功地得到了整个表，但我真的只想要那些表中的 ID。我计划稍后调用数据库来重建我需要的实体（根据我的程序流程）。我只需要 ID（或该表中的一列）。
1) 我是否应该尝试在我的实体 bean 或我将用来调用实体 bean 的无状态会话 bean 中限制它 2) 如果我尝试使用 JPA 执行此操作，我如何指定我只取回ID 来自表，而不是整个表？到目前为止在网上看，我看不到你可以做到这一点的方法。所以我猜没有办法做到这一点。3）如果我只是简单地操作返回值，我是否应该创建一个单独的类，我将返回给用户，只返回所需的 id 列表给用户？

我在这里可能完全错了，但从外观上看，我认为没有一种简单的方法可以使用 JPA 来做到这一点，我将不得不向用户返回一个自定义对象而不是实体 bean（这个自定义对象只会保存 id，而不是像现在这样保存整个表）

任何想法......我认为这并不重要，但人们总是要求代码，所以你去......

```
@ManyToMany(fetch=FetchType.EAGER)
@JoinTable(name="QUICK_LAUNCH_DISTLIST",
        joinColumns=@JoinColumn(name="QUICK_LAUNCH_ID"),
        inverseJoinColumns=@JoinColumn(name="LIST_ID"))
private List<DistributionList> distributionlistList; 
```

目前我如何获得整个记录集合。记住我只想要身份证...

```
 try
    {
        //int daSize = 0;
        //System.out.println("Testing 1.2..3...! ");
        qlList = emf.createNamedQuery("getQuickLaunch").getResultList();            
    } 
```

这就是我调用实体 bean 的方式。我在想这是我必须以编程方式创建一个类似于实体 bean 的自定义对象的地方（但它只有 ID 而不是整个表，并尝试将 id 放在某个地方。

你怎么认为？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:53:08.907

我相信我刚刚找到了解决这个问题的最佳方法。
这个链接就是答案： [我的另一个堆栈溢出答案帖子](https://stackoverflow.com/a/10452950/729820)

但是为了那些懒得点击链接的人，我基本上使用了@ElementCollection 属性......

```
@ElementCollection(fetch=FetchType.EAGER)
        @CollectionTable(name="QUICK_LAUNCH_DISTLIST",joinColumns=@JoinColumn(name="QUICK_LAUNCH_ID"))
        @Column(name="LIST_ID")
private List<Long> distListIDs; 
```

做到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:58:58.460

听起来你想要在你的 quickLaunch 类中这样的东西：

```
@Transient
public List<Integer> getDistributionListIds () {
    List<Integer> distributionListIds = new LinkedList<Integer>();
    List<DistributionList> distributionlistList = getDistributionlistList();
    if (distributionlistList != null) {
        for (DistributionList distributionList : distributionlistList)
            distributionListIds.add(distributionList.getId());
    }
    return distributionListIds;
} 
```

我不得不猜测一下你的 getter/setter 的名称和 DistributionList 的 ID 类型。但基本上，JPA 已经为您很好地处理了所有关系，因此只需从相关对象中获取您想要的值。

# r - 外循环的并行化在 REvolution 中有效，但在普通 R 中无效

> ID：10435153
> 
> 赞同：4
> 
> 时间：2012-05-03T16:04:42.720
> 
> 标签：r, loops, foreach, nested

我正在尝试并行化一个外循环，同时按顺序运行内循环。以下代码在使用包时在 Revolution 中工作，但在使用和包`doSMP`时它在基础 R 中不起作用（Windows 机器上的两个 R 版本）。错误信息是：。任何想法如何解决这个问题？`foreach``doParallel``could not find function "%do%"`

```
foreach(j = X, .combine = c) %dopar% { 
    Z=1
    foreach(i = Y, .combine = c) %do% { 
        paste(j, i, Z, sep = "") 
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-07T22:21:44.850

通常，如果您需要在`foreach`循环中使用包，您应该使用“.packages”选项指定它。对于`foreach`包本身来说也是如此：

```
library(doParallel)
cl <- makePSOCKcluster(3)
registerDoParallel(cl)
foreach(j = X, .combine = c, .packages='foreach') %dopar% { 
    Z=1
    foreach(i = Y, .combine = c) %do% { 
        paste(j, i, Z, sep = "") 
    } 
} 
```

当您意识到 PSOCK 集群甚至不知道它正在被`foreach`. 它只是一个普通的 PSOCK 集群。

请注意，可能没有必要指定所有必需的包和一些并行后端。例如，使用 doMC，worker 继承所有当前加载的包。但是，最好指定它们以使代码更具可移植性。

# c# - 在 LINQ to SQL 中将连接表和项目的内容连接到视图模型中

> ID：10435159
> 
> 赞同：0
> 
> 时间：2012-05-03T16:04:58.033
> 
> 标签：c#, asp.net-mvc, linq, linq-to-sql

我希望使用 LINQ to SQL 和 C# 将连接表和项目的内容连接到视图模型中。

我的伪代码如下：

```
 return (from t1 in db.Opportunities
                    from t2 in db.Leads.Where(x => x.Lead_ID == t1.Lead_ID)
                    from t3 in db.LeadAddresses.Where(x => x.Lead_ID == t2.Lead_ID).DefaultIfEmpty()
                    from t4 in db.Addresses.Where(x => x.Address_ID == t3.Address_ID).DefaultIfEmpty()
                    orderby (t1.Created) descending
                    select new FieldSalesPipelineViewModel
                    {
                        Id = t1.Opportunity_ID,
                        CompanyName = t2.Company_Name,
                        OpportunityTitle = t1.Opportunity_Title,
                        CompanyCity = ??????????
                    }).Take(howMany); 
```

> 一个潜在客户可能有多个地址，但我只想在输出中返回一个城市结果，即来自 Addresses (t4.City)的*唯一城市的逗号分隔列表*

任何有关如何解决此问题的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:11:48.857

您是否希望将 t4 中的多个城市连接到一个字符串中，并将其放入 CompanyCity 中？如果是这样，这应该可以解决问题：

```
CompanyCity = string.Join(",", t4.Cities) 
```

# javascript - 在javascript中将对象作为函数调用

> ID：10435166
> 
> 赞同：2
> 
> 时间：2012-05-03T16:05:19.717
> 
> 标签：javascript, javascript-events, onclick

我正在尝试执行在使用 javascript 代码在网页上执行事件（例如 onClick 事件）时调用的 javascript 函数。我从这样的事件中获取函数：

```
var attributval = document.getElementsByTagName("a").getAttribute('onClick'); 
```

我正在尝试将这个对象（实际上是一个javascript函数）作为一个函数执行（假设我们在这个例子中有，我试过：

```
var attributval = document.getElementsByTagName("a").getAttribute('onClick');
attributval() = function(){attributval};
attributval(); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:10:00.660

DOM 属性与 JavaScript 属性不同（即使它们可以具有相同的名称`onclick`）。你应该使用

```
var attributval = document.getElementsByTagName("a")[0].onclick; 
```

`null`从 JS 对象中检索一个函数（或）（而不是`getAttribute()`，它很可能会`toString()`为属性返回 a ）。

现在，`attributval() =`是非法语法，因为`attributval()`它不是左值（你不能分配**给**它）。

`attributval();`将起作用，但没有第二行（这是非法的 JavaScript），它将调用原始的 A 元素`onclick`处理程序（如果已定义）或抛出异常（如果`onclick`处理程序是`null`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:10:05.997

跳过尝试围绕函数创建函数。只需调用它：

```
var attributval = document.getElementsByTagName("a")[0].onclick;
attributval(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:10:06.503

尝试

```
var attributval = document.getElementsByTagName("a")[0].getAttribute('onClick'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:11:37.223

通过使用 get 属性，您将返回一个字符串，因此您唯一的方法是使用`eval(onclickString)`或`var fn = new Function(onClickString); fn();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T16:12:14.937

`attributval`只是一个字符串，对吗？如果您信任此代码，请使用 -- 但是任何对它的`eval(attributval)`引用`this`都不起作用。

您可能想要的是[手动触发事件](http://darktalker.com/2010/manually-trigger-dom-event/)。[jQuery 让这一切变得简单。](http://api.jquery.com/trigger/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T16:29:20.620

如果您想做的不仅仅是点击，那么 Chris McDonald 在[Is it possible to trigger a link's (or any element's) click event through JavaScript?](https://stackoverflow.com/questions/143747/is-it-possible-to-trigger-a-links-or-any-elements-click-event-through-javasc) 似乎符合要求，尽管您可能需要注意第三条评论。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T16:36:53.580

我想我会添加一个关于如何使用 jQuery 处理事件的简短答案，因为它看起来很相关。

```
// Select the link using it's ID field (assuming it has one)
var myLink = $('a#myLink')

// Add a click event to the link
myLink.on('click', function(e) {
    console.log("I've been clicked!");
});

// Trigger the click event manually. This would result in the above
// function being run. Interestingly, this will not cause the browser
// to follow the link like a real click would
myLink.trigger('click');

// Remove the click event (this removes ALL click events)
myLink.off('click');

// Add a click event to the link that only runs once, then removes itself
myLink.one('click', function() {
    alert("I'll only bother you once!");
});

// Add a click event that you can identify from other click events.
// This means that you can trigger it or remove it without bothering other
// click events
myLink.on('click.myClick', function() {
    alert("This click event has been identified as 'myClick'");
});

// Now you can trigger it without triggering other click events
myLink.trigger('click.myClick');

// And remove it, also with no harm coming to other click events
myLink.off('click.myClick'); 
```

希望这可以帮助

# javascript - 消息总是出现在第一行？

> ID：10435168
> 
> 赞同：0
> 
> 时间：2012-05-03T16:05:25.033
> 
> 标签：javascript, jquery

我在一个函数中有一个删除函数，如果用户单击“删除”按钮，它会显示一条消息，说明文件已被删除。执行此操作的代码如下：

```
$("#imagemsg").html(data); 
```

但问题是，假设我有 4 个表格行，我在第 3 行删除了一个文件，消息应该只显示在第 3 行，而是显示在第 1 行。另一个例子是，假设我有 8 个表行，我在第 6 行删除了一个文件，消息应该只显示在第 6 行，而是显示在第一行。

为什么删除文件后假定出现的消息总是显示在第一行而不是文件已删除的行中？

以下是完整代码：

```
 var counter = 0;
      counter++;

function stopImageUpload(success, imagefilename){

      var result = '';

      if (success == 1){
         result = '<span id="imagemsg'+counter+'">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else {
         result = '<span id="imageemsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

         var image_file_name = $(this).attr('image_file_name');

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
      .done(function(data) {
        $("#imagemsg" + counter).html(data);
       });

       $(this).parent().remove();

    });

      return true;   
} 
```

以下是从中检索删除消息的 deleteimage.php 脚本：

```
<?php
  $image_file_name = $_GET["imagefilename"];

    echo "$image_file_name was Deleted";
    unlink("ImagesFilesFolder/$image_file_name");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:40:36.370

问题似乎是这样的：

```
.done(function(data) {
    $("#imagemsg" + counter).html(data); 
```

你`counter`这样设置

```
var counter = 0;
counter++; 
```

但是您似乎再也不会引用该变量。在任何情况下，这个变量都是全局的——上面的命令将始终以当前计数器编号为目标，因此它不会`tr`以与单击的按钮相对应的为目标。

既然你用

```
$(this).parent().remove(); 
```

我假设父母是`tr`有关的？在这种情况下，您可以使用类而不是 ID 'imagemsg'，然后执行

```
$(this).parent().find(".imagemsg").html(data); 
```

这将针对按钮同一行内的消息。

# java - jvm缓存方法调用？

> ID：10435170
> 
> 赞同：1
> 
> 时间：2012-05-03T16:05:35.333
> 
> 标签：java, jakarta-ee

我正在做一些HTML剥离器（用java编写）的性能测试，也就是说，我将一个字符串（实际上是html内容）传递给HTML剥离器的一个方法，后者返回纯文本（没有HTML标签和元信息）。

下面是一个具体实现的例子

```
public void performanceTest() throws IOException {
    long totalTime;
    File file = new File("/directory/to/ten/different/htmlFiles");
    for (int i = 0; i < 200; ++i) {
        for (File fileEntry : file.listFiles()) {

            HtmlStripper stripper = new HtmlStripper();
            URL url = fileEntry.toURI().toURL();
            InputStream inputStream = url.openStream();
            String html = IOUtils.toString(inputStream, "UTF-8");
            long start = System.currentTimeMillis();
            String text = stripper.getText(html);
            long end = System.currentTimeMillis();
            totalTime = totalTime + (end - start);

      //The duration for the stripping of each file is computed here
     // (200 times for each time). That duration value decreases and then becomes constant
     //IMHO if the duration for the same file should always remain the same.
     //Or is a cache technique used by the JVM?         

        System.out.println("time needed for stripping current file: "+ (end -start));
        }
    }
    System.out.println("Average time for one document: "
            + (totalTime / 2000));

} 
```

但是每个文件的剥离持续时间每次计算200次，并且具有不同的递减值。恕我直言，如果同一个文件 X 的持续时间应该始终保持不变！？或者是JVM使用的缓存技术？

任何帮助，将不胜感激。提前致谢

贺拉斯

注意： - 我正在我的机器上进行本地测试（没有远程，没有 http）。- 我在 Ubuntu 10.04 上使用 java 6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:06:50.223

这是完全正常的。JIT 将方法编译为本机代码，并随着它们的使用越来越多，对其进行更多的优化。（您的基准最终收敛到的“常数”是 JIT 优化能力的峰值。）

*在*开始计时之前，如果不多次运行该方法，*就无法在 Java 中获得良好的基准。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:08:03.050

> 恕我直言，如果同一个文件 X 的持续时间应始终保持不变

不存在优化的即时编译器。除其他外，它会跟踪使用特定方法/分支的次数，并有选择地将 Java 字节码编译为本机代码。*

# c# - 如何消除某些祖先的元素？

> ID：10435172
> 
> 赞同：2
> 
> 时间：2012-05-03T16:05:40.910
> 
> 标签：c#, xml, linq-to-xml

我正在尝试将所有“CSS”元素“value”的值设置为“”，这是代码：

```
XDocument doc = XDocument.Load(fi.FullName);
XNamespace rep = "http://developer.cognos.com/schemas/report/8.0/";

List<XElement> cssElements =
    (from e in doc.Root.DescendantsAndSelf(rep + "CSS")
     where
     (
         (e.Attribute("value") != null)
     )
     select e).ToList();

//modify Attribute in elements
foreach (XElement xe in cssElements)
{
    xe.Attribute("value").Value = "";
} 
```

但是，我不想修改这个 CSS，它的祖先是“crosstab”和“style”（下面的 xml）：

```
<crosstab name="Crosstab1" refQuery="Query1">
<crosstabSuppress type="rows"/>
<style>
    <CSS value="border-collapse:collapse;font-family:'Times New Roman'"/> 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:19:04.093

如果我理解正确，可能是这样的：

```
...

List<XElement> cssElements =
    (from e in doc.Root.DescendantsAndSelf(rep + "CSS")
        where
        (
            (e.Attribute("value") != null) && !(e.Ancestors(rep + "style").Any() && e.Ancestors(rep + "crosstab").Any())
        )
        select e).ToList();

... 
```

我只将此添加到您的`where`-clause 中：

```
&& !(e.Ancestors(rep + "style").Any() && e.Ancestors(rep + "crosstab").Any()) 
```

# linux - 在 makefile 中，VPATH 是如何工作的？

> ID：10435173
> 
> 赞同：7
> 
> 时间：2012-05-03T16:05:42.433
> 
> 标签：linux, makefile

在以下网站 [http://make.paulandlesley.org/vpath.html](http://make.paulandlesley.org/vpath.html)

作者说：

> VPATH 旨在查找源，而不是目标。

但在 GNU make 的手册中，它说：

> make 变量 VPATH 的值指定了 make 应该搜索的目录列表。大多数情况下，目录应该包含不在当前目录中的必备文件；但是，**make 使用 VPATH 作为 rules 的先决条件和目标的搜索列表**。

这是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T16:14:49.193

它的意思正是它所说的。`make`将寻找构建某些东西所需的东西和已经构建的东西，看看它是否需要重建。

一个典型的场景是，如果您在链接或创建存档之前使用放置目标文件的临时构建目录。然后你也想`make`看看那里，看看需要重建什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T17:51:28.213

GNU Make 手册说您*可以*使用 VPATH 来查找目标。Paul Smith 是说您通常*不应该这样*做。（VPATH 最初是否为该目的而设计尚无定论。）

以这种方式使用 VPATH 可能会导致问题有几个原因（没有一个是该死的），但[paulandlesley](http://make.paulandlesley.org/vpath.html)的页面专门讨论了天真地使用 VPATH 在远程位置构建目标（这只是行不通），在上下文中多架构构建。

# linux - Upstart：在启动序列期间在启动后脚本节中使用命令替换时出错

> ID：10435179
> 
> 赞同：1
> 
> 时间：2012-05-03T16:06:04.843
> 
> 标签：linux, ubuntu, sh, upstart

我在 upstart 中看到一个问题，在启动后脚本节中使用命令替换会导致错误（系统日志报告“以状态 1 终止”），但仅在初始系统启动期间。

我已经尝试过在阳光下使用几乎所有启动事件挂钩。local-filesystems 和 net-device-up 大约 1/100 次尝试没有错误，所以它看起来像一个竞争条件。它在手动启动/停止时工作得很好。我见过的触发错误的命令替换是一个简单的 cat 或 date，我尝试使用 $() 方式和反引号方式。我也尝试过在启动前使用睡眠来击败比赛条件，但这没有任何作用。

我在带有 Win7 主机的 VMWare 上运行 Ubuntu 11.10。已经花了太多时间来解决这个问题......有人有任何想法吗？

这是我的 .conf 文件供参考：

```
start on runlevel [2345]
stop on runlevel [016]

env NODE_ENV=production
env MYAPP_PIDFILE=/var/run/myapp.pid

respawn

exec start-stop-daemon --start --make-pidfile --pidfile $MYAPP_PIDFILE --chuid node-svc --exec /usr/local/n/versions/0.6.14/bin/node /opt/myapp/live/app.js >> /var/log/myapp/audit.node.log 2>&1

post-start script
    MYAPP_PID=`cat $MYAPP_PIDFILE`
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] + Started $UPSTART_JOB [$MYAPP_PID]: PROCESS=$PROCESS UPSTART_EVENTS=$UPSTART_EVENTS" >> /var/log/myapp/audit.upstart.log
end script

post-stop script
    MYAPP_PID=`cat $MYAPP_PIDFILE`
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] - Stopped $UPSTART_JOB [$MYAPP_PID]: PROCESS=$PROCESS UPSTART_STOP_EVENTS=$UPSTART_STOP_EVENTS EXIT_SIGNAL=$EXIT_SIGNAL EXIT_STATUS=$EXIT_STATUS" >> /var/log/myapp/audit.upstart.log
end script 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:04:25.880

我能想到的最有可能的情况是`$MYAPP_PIDFILE`尚未创建。

因为您没有指定“期望”节，所以在主进程分叉并执行后立即运行后启动。`start-stop-daemon`因此，正如您所怀疑的那样，运行 node 和编写该 pidfile 并`/bin/sh`再次分叉、执行和分叉到 exec之间可能存在竞争`cat $MYAPP_PIDFILE`。

正确的方法是这样重写你的启动后：

```
post-start script
  for i in 1 2 3 4 5 ; do
    if [ -f $MYAPP_PIDFILE ] ; then
      echo ...
      exit 0
    fi
    sleep 1
  done
  echo "timed out waiting for pidfile"
  exit 1
end script 
```

值得注意的是，在 Upstart 1.4（首先包含在 Ubuntu 12.04 中）中，upstart 添加了日志记录功能，因此无需将输出重定向到特殊的日志文件中。所有控制台输出默认为`/var/log/upstart/$UPSTART_JOB.log`（由 logrotate 旋转）。所以那些回声可能只是裸露的回声。

# php - 在 Heroku Scheduler 中运行基于 php 的 facebook 应用程序

> ID：10435181
> 
> 赞同：0
> 
> 时间：2012-05-03T16:06:13.377
> 
> 标签：php, heroku, scheduled-tasks

我有一个用 php 编写的 facebook 应用程序，托管在 Heroku 服务器中。我想安排这个应用程序每天自动运行。我在这个应用程序中添加了一个名为 Heroku Scheduler 的插件。我尝试在 Heroku Scheduler 中设置任务，但在目录中找不到 facebook 应用程序。当我在 shell 提示符中使用[http://apps.facebook.com/namespace/](http://apps.facebook.com/namespace/)时，它说的是未知路径。我花了很多时间试图弄清楚这一点，但徒劳无功。我用谷歌搜索，但找不到任何文档。我要做的就是安排一个任务来自动运行我的基于 php 的 FB 应用程序。任何帮助将非常感激。

谢谢 Ganesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:55:41.410

抱歉，您应该先阅读 facebook 文档。Facebook 应用程序只是显示在 html 框架（或 div）中的休闲网站。您必须创建一个 fb acc、一个 fb 应用帐户，然后简单地链接它。完毕。

# sql - 选择同时包含英文和非英文字符的行

> ID：10435182
> 
> 赞同：2
> 
> 时间：2012-05-03T16:06:18.690
> 
> 标签：sql, sql-server, database, sql-server-2008

好的，所以我在 SQL Server 的表中有一个列。每条记录都有一个字符串（即名称），其中一些字符串有英文和非英文字符。

我必须只选择有英文和非英文字符的记录。

我该怎么做呢？

我的尝试...

```
Select * from Table
Where Nameofthecolumn NOT LIKE '%[A-Z]%'
Go 
```

这会给我 EMPTY 表。

我确定至少有两条记录有英文和非英文字符。

我需要这两条记录作为输出。

我试图做

```
Select * from Table
Where Nameofthecolumn NOT LIKE '%[A-Z,a-z]%' AND Like '%[A-Z,a-z]%'
Go 
```

但事实证明，您可以将布尔值与 Like/Not Like 一起使用。

请指导我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:10:21.740

如何反转您的搜索，例如查找与 AZ 不匹配的任何内容：

```
... WHERE col LIKE '%[^A-Z]%' AND col LIKE '%[A-Z]%'; 
```

如果排序规则不区分大小写，则不需要 az，如果区分大小写，则可以添加[COLLATE](http://msdn.microsoft.com/en-us/library/ms184391%28v=sql.100%29.aspx)子句。但是您可能想要过滤掉预期的空格、数字和其他非字母数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:16:36.307

你的意思是这样的吗？

```
select 1 as field1,'1' as field2 into #data
union all select 1,'abc'
union all select 2,'abc'
union all select 3,'999'

SELECT * FROM 
(
select field1,field2
,MAX(CASE WHEN field2 NOT LIKE '%[A-Z,a-z]%' THEN 1 ELSE 0 END) OVER (PARTITION BY field1) 
 + MAX(CASE WHEN field2 LIKE '%[A-Z,a-z]%' THEN 1 ELSE 0 END) OVER (PARTITION BY field1) as chars 
FROM #data
) alias
WHERE chars =2 
```

# ruby-on-rails-3 - Rails，我应该优化我的视图还是我的查询？

> ID：10435187
> 
> 赞同：0
> 
> 时间：2012-05-03T16:06:47.810
> 
> 标签：ruby-on-rails-3, optimization, activerecord, view

如果我的 Rails 开发控制台显示“查看完成时间”的时间远大于“活动记录完成时间”的时间范围，我应该优化我的视图还是查询？

`Completed 200 OK in 8441ms (Views: 7277.3ms | ActiveRecord: 316.9ms)`

当然，两者都很可怕，但是视图需要更长的时间才能呈现......有没有一种方法我应该考虑重写视图而不是改变查询的执行方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:15:13.957

在我看来，你需要优化你的观点。即使您将数据库查询的时间缩短了一半，页面仍然需要超过 7 秒的时间来呈现！

以最大的回报解决问题。在这种情况下，将您的查看时间减半会使您的页面从 7 秒缩短到 3 秒。这是一个相当大的胜利。

正如 MBHNYC 所提到的，您还应该确定时间是花在视图上还是花在控制器为视图设置信息上。

# ruby-on-rails - 使用 Rack::Cache 对 Rails.app 进行专门的服务器端缓存

> ID：10435189
> 
> 赞同：1
> 
> 时间：2012-05-03T16:06:50.430
> 
> 标签：ruby-on-rails, caching, rack, browser-cache

我有以下问题：我想在 Redis 中缓存一个动作的结果。出于这个原因，我使用[https://github.com/jodosha/redis-rack-cache](https://github.com/jodosha/redis-rack-cache)。一个动作应该被 Rack::Cache 缓存的事实是通过在 Rails 中设置适当的 HTTP 标头信息来确定的，例如：

```
response.headers['Cache-Control'] = 'max-age=3600, public, must-revalidate' 
```

现在，Rack::Cache 将在 Redis 中正确缓存响应。但是，此标头也确实告诉*浏览器*缓存响应，这是我*不*想要的！请求应专门缓存在服务器端。

作为一种解决方法，我正在替换 nginx 中的标头，我将其用作反向代理，但必须有更优雅的方式。有人知道怎么做吗？

最好的问候，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:02:16.333

一种选择是编写您自己的位于 Rack::Cache 之上的中间件，然后从响应*中删除*这些 Cache-Control 标头。

像这样简单的东西：

```
 def call(env)
    status, headers, body = @app.call(env)
    headers.delete("Cache-Control")
    [status, headers, body]
  end 
```

将作为中间件工作。

# php - 如何使用正则表达式解析此字符串的自定义标签

> ID：10435193
> 
> 赞同：0
> 
> 时间：2012-05-03T16:07:03.293
> 
> 标签：php, regex

我需要解析一个包含自定义标签的字符串，`[link][description][link-url][/link]`我想将其转换为`<a href="link-url">description</a>`. 对此的任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:12:07.067

这是您可以使用的正则表达式：

```
\[link\]\[(.*)\]\[(.*)\]\[\/link\] 
```

然后你可以使用正则表达式替换：

```
<a href="$2">$1</a> 
```

# java - 从 JavaFX2 WebView 提取内容

> ID：10435195
> 
> 赞同：0
> 
> 时间：2012-05-03T16:07:22.253
> 
> 标签：java, database, webview, javafx-2

JavaFX 2 WebView 组件可能为我提供了一种方便的方式来将我的软件连接到现有的学校数据管理 Web 应用程序，而无需直接连接到数据库。现在，秘书将从数据管理程序中运行导出，将数据保存为 CSV，然后将数据导入我的程序。这个过程可能需要重复 30 次，所以我正在研究提取软件所需数据的其他方法。

我想知道以下解决方案是否可行：将 Java FX 2 WebView 组件嵌入到我的程序中。然后，用户将登录到数据管理 Web 应用程序并提取希望导入的数据。这些学校管理程序中的大多数都支持 CSV 和 XML 作为文件格式。

如果我可以提取 WebView 当前正在查看的内容，我应该能够解析 XML 并导入数据。对于用户而言，这将减少步骤，并带来额外的好处，即我可以比从 CSV 文件更容易地从 XML 导出中推断有关数据库结构的信息。

我没有在[Java FX 2 JavaDocs for WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)中看到任何我想要的方法。有没有办法从页面获取内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:24:25.703

WebView 是显示[WebEngine](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)内容的节点。您想要的方法在 WebEngine 中。

例如：您可以使用`webView.getEngine().getDocument()`

# java - 如何从 Java 启动 msconfig.exe？

> ID：10435199
> 
> 赞同：0
> 
> 时间：2012-05-03T16:07:42.723
> 
> 标签：java, command-line, command, execute

好的，所以我已经环顾了一段时间，但我无法弄清楚我的程序出了什么问题。我正在尝试制作一个类似 cmd.exe 的程序。一个命令应该启动位于 C:/Windows/System32 中的 msconfig.exe。但它给了我一个 java.io.IOException：

```
java.io.IOException: Cannot run program "C:/Windows/System32/msconfig.exe": CreateProcess error=2, The system cannot find the file specified 
```

这是我的代码：

```
 public static void msconfig() {
    try {
        Runtime rt = Runtime.getRuntime();
        Process process = rt.exec("C:/Windows/System32/msconfig.exe");
        InputStream in = process.getInputStream();
        OutputStream out = process.getOutputStream();
        InputStream err = process.getErrorStream();
    } catch (IOException e) {
        Console.printToConsole("Could not launch msconfig.exe");
        e.printStackTrace();
    } finally {
        Console.printToConsole("Successfuly launched msconfig.exe");
    }
} 
```

**编辑：** 所以我用 Eclipse 导出了应用程序，现在它工作正常！谢谢所有试图帮助我的人:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:11:21.787

Windows 计算机上的路径使用反斜杠作为分隔符。采用：

```
Process process = rt.exec("C:\\Windows\\System32\\msconfig.exe"); 
```

只是为了完整起见，反斜杠需要加倍，因为它们是转义字符，需要自己转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:10:54.100

您正在使用“错误”的反斜杠。windows路径与\一起使用

尝试路径 c:\windows\system32\msconfig.exe

# java - jsf转换器：如何找出实际传递的值String的类类型？

> ID：10435203
> 
> 赞同：1
> 
> 时间：2012-05-03T16:07:52.057
> 
> 标签：java, jsf, generics

我正在尝试将自定义类对象与 MyFaces UI 组件（如复选框/组合等）绑定在一起，但没有通过在支持中创建 getter/setter 来提供像 int/float/boolean/String/List<String> 这样的显式类型豆。

所以在我的情况下，它通常看起来像这样：

```
<h:selectOneListbox id="mylist" value="#{bean.myListValueHolder.data}"
    converter="myValueConverter">
    ...
</h:selectOneListbox> 
```

在哪里：

*   bean 是支持 bean
*   myListValueHolder 的类型为 MyValueHolder<T>
*   数据类型为 <T>

我正在尝试为其使用自定义转换器和此类签名：

```
public class MyValueHolder<T extends Comparable<T>> extends Node<T> {
.... 
```

MyValueHolder 有这个方法：

```
public T getData() {
...
public void setData(Object data) {
...
public void setData(T data) {
... 
```

我的转换器：

```
public Object getAsObject(FacesContext fc, UIComponent c, String value) {
... 
```

**问题**：如何找出在运行时作为**值**传递的类型**<T>**？在我的例子中，它可以是布尔值、int、float、double、String 或 List<String>。

 **但我有点不喜欢写

1.  很多“尝试转换为一个类型，如果它成功，它就是你的类型”，但不确定它是 int 还是 float/double。
2.  在我定义我的 h:selectOneListbox 时将类型作为参数或作为第二个参数
3.  ？？？

我怎样才能做到这一点？

**编辑：**好的，列表不起作用。但问题是，在我看来，将 JSF UIComponents 中的值绑定到某种值包装器以避免在我的支持 bean 中写入许多简单的“虚拟”getter/setter 是否有好处？

所以我可以使用“一个”bean，它可以通过键（属性名称是一个字符串）访问 MyValueHolder，如“bean.get（'property_name'）”或“#{bean.myListValueHolder.data}”或类似的语法?

**EDIT2：**回答 BalusC 问题并解释原因。

至于现在，我不确定这种方法是否好。

我的数据以 XML 形式出现，我对其进行解析以将其另存为`key`,`value`对。我的 UI 元素也有一个特定`state`的（s）（来自`State`-Enum {hidden, visible, disabled, enabled, hover, focus, active, ...} 的 EnumSet，它依赖于存储在中的特定值`ValueHolders`。所需的依赖项`State`（ s）在一个类中描述，该类`Rule`具有一个`EnumSet`of`State`和一个`matches`方法，`true`如果定义`State`应被应用，则返回，因为`Rule`匹配。与该匹配相关的。`ValueChangedListeners``State``Value``Rules``Value`

至少我是这么想的，我可以做到。所以我可以从我的视图中查询值和 ui-state，如果一些具体的值发生变化，这反过来可能会改变`State`我`UIComponent`可以调用回调并取决于新的`State`添加/删除一个新的 css 类到该特定组件通过查询。

好吧，听起来有点复杂或有点矫枉过正，但我​​想`States`用 Java 定义我的 UI 组件，所以我也可以`State`从 Java 更改它，而不是在视图中定义状态规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T03:33:30.543

JSF`Converter`不适合这种情况。你需要一个定制[`ELResolver`](http://docs.oracle.com/javaee/6/api/javax/el/ELResolver.html)。扩展[`BeanELResolver`](http://docs.oracle.com/javaee/6/api/javax/el/BeanELResolver.html)和覆盖`getType()`，`getValue()`并且`setValue()`您应该在其中获取具体`ValueHolder`实现。这样你最终可以得到像`value="#{bean.myStringValueHolder}"`没有`.data`. 这样，数据强制/转换将由 JSF/EL 自动完成。

您可以通过以下方式在应用程序启动时注册自定义 EL 解析器`Application#addELResolver()`：

```
FacesContext.getCurrentInstance().getApplication().addELResolver(new ValueHolderELResolver()); 
```

至于计算泛型类型，假设它`ValueHolder`是 an`abstract class`并且您有诸如此类的具体实现`StringValueHolder extends ValueHolder<String>`，那么您将能够在 的构造函数中提取泛型类型`ValueHolder`。

```
public abstract class ValueHolder<T extends Comparable<T>> extends Node<T> {

    private Class<T> type;
    private T data;

    @SuppressWarnings("unchecked")
    public ValueHolder() {
        this.type = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
    }

    public Class<T> getType() {
        return type;
    }

    public T getData() {
        return data;
    }

    public void setData(T data) {
        this.data = data;
    }

    public void setData(Object data) {
        this.data = type.cast(data);
    }

} 
```

我只是想知道整个方法如何有用。有一些看似不必要的开销。功能需求究竟是什么？它只是在消除 getter/setter 样板？为什么不只使用模型对象（javabeans/entities/etc），这样您最终在支持 bean 中只有一个模型属性？是否厌倦了每次都输入它们？有点像样的 IDE 可以自动生成它们。更重要的是，可以根据属性名称列表和单击几下自动生成完整的 javabean 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T00:25:53.527

您可以将转换器的实例添加到您的 bean 并将其绑定到您的输入元素，然后您就知道类型了。这样，您还可以通过构造函数将要转换的对象传递给转换器并执行简单的查找。不是那么帅，但它会工作。**

# asp.net - 使用父数据作为嵌套转发器的 zerotext

> ID：10435211
> 
> 赞同：0
> 
> 时间：2012-05-03T16:08:37.957
> 
> 标签：asp.net, repeater, kentico, nested-repeater

如果我的嵌套转发器没有返回任何结果，我希望 zerotext 结果来自父项。我想不通；我已经阅读了这个问题，但似乎没有什么具体涵盖这一点。我正在使用 Kentico EMS v6。

甚至可能吗？谢谢，奥利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:06:41.820

除非您修改 Web 部件的代码，否则这是不可能的。原因：您只能在“未找到记录文本”字段中使用纯文本或宏，并且无法将宏评估为父级的“未找到记录文本”之类的内容。

# objective-c - 构建失败：ld：重复符号 _OBJC_CLASS_$_Algebra5FirstViewController

> ID：10435213
> 
> 赞同：73
> 
> 时间：2012-05-03T16:08:53.513
> 
> 标签：objective-c, ios, xcode, ios5.1

通过 iPhone 模拟器运行我的应用程序时，我突然收到此错误：

> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）：
> 
> ld：重复符号 _OBJC_CLASS_$_Algebra5FirstViewController 在 .../Algebra5-anwcuftojtxtgkfootneeeqhwztj/Build/Intermediates/Algebra5.build/Debug-iphonesimulator/Algebra5.build/Objects-normal/i386/ExercisesViewController.o 和 .../Algebra5-anwcuftojtxtgkfootneeeqhwztj/ Build/Intermediates/Algebra5.build/Debug-iphonesimulator/PSLE Algebra5.build/Objects-normal/i386/PSLE_Algebra5FirstViewController.o 架构 i386

这是什么一回事呢？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-03T16:13:49.463

看起来 Algebra5FirstViewController 类是多次编译的。

你能确保 .m 和 .mm 在 Xcode 的项目源中只包含一次吗？您还可以通过检查编译日志（右侧最后一个图标，断点图标旁边）来确认这一点，并确认它只编译一次。

此外，如果此类是您链接的库的一部分，并且您有一个同名的类，您可能会遇到相同的错误。

最后，您可以尝试清理并重建，以防旧目标文件仍然存在并且编译文件中有一些垃圾。以防万一...

编辑

我还注意到第二个引用是在针对 ExperimentsViewController 的文件中进行的。也许这个文件中有一些东西。要么您#imported Algebra5FirstViewController 文件而不是 .h，要么ExercisesViewController 具有@implementation (Algebra5FirstViewController) 而不是@implementation (ExercisesViewController)，或者此文件中有一些垃圾将通过 Clean an Rebuild 进行清理。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-03T16:14:01.277

如果在“构建阶段”中目标的“编译源”部分多次引用同一个 .m 文件，就会发生这种情况。删除重复的条目，你应该没问题。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-07-11T19:37:48.533

`const * NSString`通过在头文件（错误）而不是实现文件（正确）中声明 a 也有这个问题

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-07-01T19:46:24.863

我遇到了这个问题，因为我不小心导入了 .m 而不是 .h。希望阅读这篇文章可以节省一些时间遇到同样问题的人。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-02-05T14:21:33.867

我有同样的问题。解决了！

如果您已将任何文件导入项目，请检查 .m（主）文件是否存在于目标（项目名称）-> 构建阶段-> 编译源中。

如果文件不存在，则使用显示的 (+) 添加按钮将其包含在内。此外，如果存在重复文件（如果有），则将其删除。

现在按 cmd+shift+k 清理项目。新构建不应显示此错误。

![在此处输入图像描述](../Images/6820140d479702fd8e0c7efd70998da1.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-10-16T06:34:26.073

从另一个项目添加文件时，我遇到了类似的错误，就像@paiego 解释的那样。我的错误是我没有检查“*添加到目标*”。如上所述，我删除了引用并再次添加了文件，但这次检查了“*添加到目标*”。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-12-14T11:56:44.427

我遇到了类似的错误，我以[这种方式](https://stackoverflow.com/a/28410910/4221299)解决了它。

> 尝试将“Pods”项目和应用程序目标的“仅构建活动架构”设置为“否”

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-25T23:06:40.747

在一种情况下，我在将新类的 .h 和 .m 拖入项目时看到了这个错误。我找到的唯一解决方案是删除对这些文件的引用，然后通过项目菜单将它们添加回来。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-10-13T11:05:49.373

我在 TableViewController 中导入 ViewController.m 时遇到了它。如果'#import "ViewController.m"' 退出，请尝试删除它。希望这有帮助！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-28T09:10:14.897

'链接器命令失败，退出代码 1（使用 -v 查看调用）'- 在 iPhone 上运行 phonegap 应用程序时出现此错误。我将“仅构建活动架构”更改为“是”，它运行良好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-01-13T22:52:43.583

似乎对于m，我将文件拖到项目中，然后不起作用，单击文件“将文件添加到项目”。两者都是错误的方法。只需将其拖入包含其他 .h 和 .m 文件的项目文件夹（在 finder 中）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-04-16T05:53:01.320

一旦我得到

```
18 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 
```

对我来说，这是因为我在我的 switch 案例中使用了“const NSInteger”。

我所做的是将 const NSInteger 更改为枚举，并将引用替换为枚举值。

这为我解决了错误。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-06-18T06:32:24.553

出现这种情况，“编译源”部分中缺少某些文件，或者为某些文件找到重复条目。就我而言，我有两个文件的重复条目，我为每个文件删除了一个条目，这解决了我的问题。希望这可以帮助。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-09-20T13:52:03.940

我发现这篇[文章](https://teamtreehouse.com/community/linker-error)为我提供了解决方案。它适用于 Xcode 7，在以前的版本中，No Common Blocks 的默认值为 Yes 而不是 No。

这是文章中的一段话：

> 问题似乎是在最新版本的 Xcode 中，“构建设置”窗格中“Apple LLVM 6.1 - 代码生成”部分中的“无公共块”设置为“是”。

这导致了我将描述为循环引用的情况，其中包含在我的编译源中的类是通过另一个源文件 (appDelegate.m) 中的#import 引用的。这导致在原始基类中声明的变量出现重复块。

将值更改为 No 立即使我的应用程序能够编译并解决我的问题。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-10-14T00:19:19.137

我正在发布一个新的答案，因为我遇到了这个错误并且不得不使用我认为特定于 iOS 9 的不同解决方案。

我必须在 Build Settings 中明确禁用 Enable Bitcode，它会在更新中自动打开。

参考答案：[iOS 9 中的新警告](https://stackoverflow.com/questions/30848208/new-warnings-in-ios9)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-11-27T14:10:17.443

**[XCODE 7.1 更新]**

**第一个有效的选项：**

我将`Deployment Target`7.1 更改为 8.1，错误消失了。

希望对某人有所帮助。

**更新（第 2 天）**：我在 2 天内第二次回到这里。

在第 2 天，除了这个烦人的错误之外，我还开始遇到更多错误。问题是 Xcode 无法识别的冲突文件。我使用以下链接作为帮助：

1.  [“_OBJC_CLASS_$_viewsampleViewController”，引用自：](https://stackoverflow.com/questions/4506408/objc-class-viewsampleviewcontroller-referenced-from)

2.  ['ld：警告：找不到选项的目录'</a>](https://stackoverflow.com/questions/9458739/ld-warning-directory-not-found-for-option)

[](https://stackoverflow.com/questions/9458739/ld-warning-directory-not-found-for-option)

 [最终：](https://stackoverflow.com/questions/9458739/ld-warning-directory-not-found-for-option) 

[](https://stackoverflow.com/questions/9458739/ld-warning-directory-not-found-for-option)
4.  [“_OBJC_CLASS_$_viewsampleViewController”，引用自：](https://stackoverflow.com/questions/4506408/objc-class-viewsampleviewcontroller-referenced-from)

我从`FrameWork Search Paths`++ `Compile Resources`pod中删除了所有内容`Run Script Phases`，然后再次重新安装它们以最终获得成功。

我的大小问题（在第 2 天）更多的是与冲突文件或 Xcode 无法识别的文件有关的问题。

但最终，删除所有内容（上面和链接中提到的），清理很多次并重新安装 pods/frameworks/run 脚本阶段有所帮助。

真的希望这可以帮助某人。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-01-17T19:12:18.820

在 OSX 10.7.5 上运行 Xcode 4.6.3 能够通过将架构从 $(NATIVE_ARCH_ACTUAL) 更改为构建机器的本机架构来修复此错误。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-04-28T20:55:14.483

我通过（意外）将 .h 和 .m 文件都导入到同一个类中收到了一次。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-08-01T00:49:37.897

我在实现一个没有添加必要框架的子类时遇到了这个错误（在这个例子中是没有 MediaPlayer 框架的 MPMoviePlayerController）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-10-22T10:40:27.477

我在使用 Bolts.framework 时遇到了同样的问题。事实证明，当 Bolts 损坏时，再多的重新导入也无法解决问题。我不得不返回原始下载文件并从头开始完全重新导入。这立即修复了它。这是一个如此奇怪的问题，我花了很长时间才弄清楚......希望这个技巧能让你们中的一些人免于同样的挫败感:)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-07-21T02:03:53.590

当我将一个 UILabel 引用和一个 int 命名为相同的东西时，这发生在我身上，我只有在尝试运行它时才输入它时没有收到错误，所以我没有意识到这是问题所在，但是如果你有一个标签之类的东西，它是“分数”，你称之为分数，并命名一个 int，它是分数也是分数，然后就会出现这个问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-05-04T01:01:06.513

如果您缺少库或文件，则可能会出现此问题的变化。检查您的项目资源管理器中是否有任何丢失的文件：如果 Xcode 找不到它们，它们将被写成红色。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-05-08T06:43:39.147

“Link Binary With Libraries”有旧的项目名称 pod library。拆除后固定。

1.  项目清单
2.  项目
3.  构建阶段
4.  将二进制文件与库链接
5.  删除不推荐使用的库。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-05-28T09:05:10.997

我在图书馆遇到了同样的问题，我尝试了这里列出的所有答案，但没有任何帮助。

我最终只是从 Link Binary With Libraries**中删除了该库**，然后**重新添加它**，它工作正常。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-06-22T11:33:13.760

解决此问题的唯一（且始终如一）方法是从命令行构建测试：

```
xcodebuild -workspace MyProject.xcworkspace/ -scheme MyScheme -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 7,OS=10.3.1' test 
```

因此，此时，您的编译肯定会失败，但您会看到所有链接问题。就我而言，我遇到了几个问题，例如：

*   *ld: framework 'Foo' not found*
    要解决此问题，您需要在目标上 BuildSettings->Linking->OtherLinkerFlags 并删除 'Foo' framework 。
*   *使用未解析的标识符 'ClassName'*。
    为了解决这个问题，我还需要将文件的目标成员资格添加/检查到 UITest 目标。

xcodebuild 将引发其他可能的问题，您可以轻松修复它。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-08-01T19:13:19.100

简单地清洁`CMD`++ ，然后构建`SHIFT`+为我工作。`K``CMD``B`

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2016-10-15T15:43:23.977

就我而言，我在 Other Linker Flags 中引用了一个库。删除它摆脱了错误。

[![在此处输入图像描述](../Images/a9f45d876f5e8a7ce8fa5d1b492ef207.png)](https://i.stack.imgur.com/yqn01.png)

[![在此处输入图像描述](../Images/94f9c2e838d6bd0c69c98ea5a615b3dc.png)](https://i.stack.imgur.com/wvDJO.png)

* * *

## 回答 #28

> 赞同：-5
> 
> 时间：2013-01-23T11:32:36.763

我有同样的错误。我已经导入了一个不再使用的音频框架。我删除了它（不要删除它！）并成功构建。

# java - Android：WebView 在中心加载图像/内容

> ID：10435219
> 
> 赞同：10
> 
> 时间：2012-05-03T16:09:08.263
> 
> 标签：java, android, webview

我已经加载了一个图像，`WebView`但是当它被最大程度地缩小时，图像本身就位于我设备的左上角。无论如何要加载图像，使其显示在中心？

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-17T00:47:28.317

我结合了xml和代码来做到这一点。我的 gif 文件存储在 assets 文件夹中。

以下是xml布局代码：

```
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<WebView
    android:id="@+id/webView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true" />

</RelativeLayout> 
```

以下是java代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_webview);
    WebView webView = (WebView) findViewById(R.id.webView);
    webView.setWebViewClient(new WebViewController());
    webView.loadDataWithBaseURL("file:///android_asset/","<html><center><img src=\"animation.gif\"></html>","text/html","utf-8","");
}

private class WebViewController extends WebViewClient {
     @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T10:37:25.647

您可以使用此代码将图像居中在 WebView 的屏幕中心：

```
 //first you will need to find the dimensions of the screen 
  float width;
  float height;
  float currentHeight;
  WebView mWebView;

  //this function will set the current height according to screen orientation
  @Override
  public void onConfigurationChanged(Configuration newConfig){
          if(newConfig.equals(Configuration.ORIENTATION_LANDSCAPE)){

                currentHeight=width; 
                loadImage();                 

         }if(newConfig.equals(Configuration.ORIENTATION_PORTRAIT)){

                currentHeight=height;
                loadImage();

        }
    } 

  //call this function and it will place the image at the center
  public void load and center the image on screen(){

    mWebView=(WebView)findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setBuiltInZoomControls(true);       
    mWebView.setBackgroundColor(0);

    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    height = displaymetrics.heightPixels;
    width = displaymetrics.widthPixels;
    currentHeight=height             //assuming that the phone
                                     //is held in portrait mode initially

         loadImage();        
  }
  public void loadImage(){
       Bitmap BitmapOfMyImage=BitmapFactory.decodeResource(Environment.getExternalStorgeDirectory().getAbsolutePath()+"yourFolder/myImageName.jpg");  

       mWebView.loadDataWithBaseURL("file:///"+Environment.getExternalStorgeDirectory().getAbsolutePath()
                                    +"yourFolder/","<html><center>
                                    <img src=\"myImageName.jpg\" vspace="
                                    +(currentHeight/2-(BitmapOfMyImage.getHeight()/2))+">
                                     </html>","text/html","utf-8","");
     //This loads the image at the center of thee screen                    

   } 
```

我使用 center 标签将图像垂直居中，然后使用 vspace 标签给图像 top margin 。现在边距由以下公式计算：screenVierticalHeight/2-ImageVerticalHeight/2

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:05:33.977

```
 mWebView.loadDataWithBaseURL("file:///"+Environment.getExternalStorgeDirectory().getAbsolutePath()+"yourFolder/","<html><center><img src=\"myImage.jpg\"></html>","text/html","utf-8",""); 
```

这会将来自 SDCard 的图像放在 webView 的中心。我希望这有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-22T06:40:11.027

```
String html = "<html><head><style type='text/css'>html,body {margin: 0;padding: 0;width: 100%;height: 100%;}html {display: table;}body {display: table-cell;vertical-align: middle;text-align: center;}</style></head><body><p style=\"color:white\">+"you message"+</p></body></html>"; 
```

webView.loadData(html, "text/html; charset=UTF-8", null);

因此，这将加载您的 webview，并将文本居中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T00:51:08.333

我有同样的问题 - 在 webview 中垂直居中。这个解决方案大部分时间都有效......也许它可以帮助你一点

```
 int pheight = picture.getHeight();
                int vheight = view.getHeight();

                float ratio = (float) vheight / (float) pheight;

                System.out.println("pheight: " + pheight + "px");
                System.out.println("vheight: " + vheight + "px");
                System.out.println("ratio: " + ratio + "px");

                if (ratio > 0.5)
                {
                    return;
                }

                int diff = pheight - vheight;
                int diff2 = (int) ((diff * ratio) / 4);

                if (pheight > vheight)
                {
                    // scroll to middle of webview

                    currentPhotoWebview.scrollTo(0, diff2);
                    System.out.println("scrolling webview by " + diff2 + "px");

                } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-27T09:15:26.553

我知道这个答案有点晚了，但这里有一个没有 javascript 的选项：

您可以扩展 WebView 并使用受保护的方法`computeHorizontalScrollRange()`并`computeVerticalScrollRange()`了解最大滚动范围，并基于该计算您想要在垂直方向`scrollTo`上 `computeHorizontalScrollRange()/2 - getWidth()/2 and`类似的位置：`computeVerticalScrollRange()/2 - getHeight()/2`

我唯一的建议是在这样做之前确保加载完成，我没有测试这在加载时是否有效，但我不认为它会因为 webview 还没有正确设置它的滚动范围（因为内容仍在加载中）

请参阅：[Android webview：检测](https://stackoverflow.com/questions/4644634/android-webview-detect-scroll)我从中获取大量信息的滚动条。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T17:47:05.993

尝试加载嵌入图像的 HTML 文件。然后所有的布局都可以使用标准的 css 样式完成。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-25T17:47:23.753

对我来说这是工作：

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "PICTURE FILE NAME";
File file = new File(path);
String html = "<style>img{height: 100%;max-width: 100%;}</style> <html><head></head><body><center><img src=\"" + imagePath + "\"></center></body></html>";
webView.getSettings().setDefaultZoom(ZoomDensity.FAR);
webView.getSettings().setBuiltInZoomControls(true);
webView.getSettings().setUseWideViewPort(true); 
webView.getSettings().setLoadWithOverviewMode(true);
webView.loadDataWithBaseURL( "" ,  html, "text/html", "UTF-8", ""); 
```

# objective-c - 使用 GDB 调试器按对象 id 打印对象（即 0xee63d60）

> ID：10435226
> 
> 赞同：1
> 
> 时间：2012-05-03T16:10:00.113
> 
> 标签：objective-c, ios, gdb, xcode4.3

有没有办法通过对象的 id/内存位置执行“po”或打印对象？例如，如果我有一个 id: 0xee63d60 的对象，我可以显示该对象中的内容吗？我知道我可以使用：

(gdb) 信息 malloc 历史 0xee63d60

获取 StackTrace，这非常有帮助，但我很想看看该对象中有什么，甚至它的名称是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:39:24.680

`(lldb) po 0xee63d60`为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:26:55.293

我相信如果您在“断点”处暂停，您可以右键单击一个对象并选择打印对象。这应该打印出对象的“描述”。参见 +(NSString *) 对 NSObject 类的描述。如果您需要更具体的内容，您可以覆盖此方法。

希望这可以帮助

# php - PHP 文件的自定义 MIME 类型

> ID：10435237
> 
> 赞同：1
> 
> 时间：2012-05-03T16:10:24.277
> 
> 标签：php, apache, .htaccess, mime

好的，今天我为大家准备了一个奇怪的东西。我正在研究为 .php 文件创建自定义 MIME 类型。我已经阅读了一些关于此的赞成/反对意见，除了一些实验来看看真正可以做什么之外，不会有太多的东西。我公司的首字母是 TTP，因此我们决定将我们所有的 .php 页面重写为自定义的 .ttp 扩展名会很有趣。我已经尝试将其添加到我的正常 cPanel X 路由中，并且我还尝试将更改添加到 .htaccess 文件中。在我将应用程序类型更改为任何 php.ini 之前，它工作得非常好。

```
AddType text/html ttp  // works
AddType text/x-php ttp // doesn't work
AddType application/x-php ttp // doesn't work
AddType application/x-http-php ttp // doesn't work 
```

出现的一些问题是这样做会呈现 .php 文件，因此浏览器很难决定如何处理它。还有其他想法吗？我很确定最终这不是公司会做的事情，但他们想看看我可以进行的任何实验是否会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:12:54.937

浏览器不处理 PHP。Content-Type 在这里无关紧要。

查看您的 CGI 或模块配置，将 PHP 配置为处理超过 .php 的文件。对于 PHP 作为一个模块：

```
<FilesMatch \.ttp$>
    SetHandler application/x-httpd-php
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:13:48.780

处理程序用 指定`AddHandler`。mod_php 处理程序是`php5-script`.

并且浏览器从不处理 PHP。

# mongodb - 通过 mongodb/doctrine2 odm 中的嵌套引用值查询

> ID：10435241
> 
> 赞同：2
> 
> 时间：2012-05-03T16:10:40.580
> 
> 标签：mongodb, symfony, doctrine-orm, mongodb-php, mongodb-query

您好，我得到以下代码：

```
 $primer = function($dm, $className, $fieldName, $ids, $hints) {
        $repository = $dm->getRepository($className);
        $qb = $repository->createQueryBuilder()
            ->field('id')->in($ids)
            ->field('images')->prime(true);
        $query = $qb->getQuery();
        $query->execute()->toArray();
    };

    $qb = $followRepo
        ->createQueryBuilder()
        ->field('isActive')->equals(true)
        ->field('target')->prime($primer)
        ->field('follower')->references($return['user'])
        ->field('target.$ref')->equals('boards')
        ->field('target.createdBy.type')->equals('user') // here i dont know how to handle this
        ->sort('created', 'desc') 
```

在 mongo 中甚至可以通过 target.createdBy.type 进行查询吗？target.createdBy 也是参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T23:03:30.030

是的，可以根据 [官方文档](http://docs.mongodb.org/manual/tutorial/query-documents/#read-operations-subdocuments)使用点符号查询子文档属性。我很确定它不会在 1 步中进行引用。

# grails - Grails、Spring Security 和 Siteminder - 资源或用户详情问题

> ID：10435242
> 
> 赞同：8
> 
> 时间：2012-05-03T16:10:43.900
> 
> 标签：grails, resources, filter, spring-security, siteminder

我正在尝试使用基于 Siteminder 的 preAuth 的 spring security 来保护我的 grails 应用程序。这基本上就是我所需要的。该应用程序仅用于检查一些东西，因此不需要数据库。

我陷入了一些我无法接受的过滤器问题。

起初我只使用了 RequestHeaderAuthenticationFilter 和自定义的 UserDetails 和 UserDetailsS​​ervice。

我的春豆：

```
beans = {
    userDetailsService(MyUserDetailsService)

    userDetailsServiceWrapper(UserDetailsByNameServiceWrapper) {
            userDetailsService = ref('userDetailsService')
    }

    preauthAuthProvider(PreAuthenticatedAuthenticationProvider) {
            preAuthenticatedUserDetailsService = ref('userDetailsServiceWrapper')
    }

    requestHeaderAuthenticationFilter(RequestHeaderAuthenticationFilter){
        principalRequestHeader='SM_USER'
        authenticationManager = ref('authenticationManager')
    }
} 
```

我有我的 MyUserDetailsProvider：

```
class MyUserDetailsService  implements GrailsUserDetailsService {

    MyUserDetails  loadUserByUsername(String username) throws UsernameNotFoundException{

        //some super secret code here ;)
        return new MyUserDetails(some needed params)
    }
} 
```

我还像在每个明智的教程中一样配置了安全 URL：

```
grails.plugins.springsecurity.interceptUrlMap = [
    '/user/**':['ROLE_MINE'],
    '/activation/**':['ROLE_SOMEOTHER, ROLE_MINE'],
    '/js/**':        ['IS_AUTHENTICATED_ANONYMOUSLY'],
    '/css/**':       ['IS_AUTHENTICATED_ANONYMOUSLY'],
    '/images/**':    ['IS_AUTHENTICATED_ANONYMOUSLY'],
    '/*':            ['IS_AUTHENTICATED_ANONYMOUSLY']
] 
```

和一些提供者（在一些教程中建议匿名）：

```
grails.plugins.springsecurity.providerNames = ['preauthAuthProvider','anonymousAuthenticationProvider'] 
```

它非常适合数据访问，但不允许加载资源，尤其是图像。该错误表示在请求中未找到 SM_USER 标头。

所以我认为我可以使用一些解决方案，比如“过滤器：无”或“安全：无”，这样 spring 就可以知道哪些 url 请求允许，而无需检查 SM_USER。

我尝试向过滤器和过滤器链添加东西：

```
grails.plugins.springsecurity.filterNames = ['requestHeaderAuthenticationFilter']

grails.plugins.springsecurity.filterChain.chainMap = [
    '/user/**': 'requestHeaderAuthenticationFilter',
    '/activation/**': 'requestHeaderAuthenticationFilter',
    '/*': 'requestHeaderAuthenticationFilter'
] 
```

但这没有帮助。

然后我尝试在没有 SM_USER 标头的资源上使用其他一些过滤器。从参考资料中我了解到匿名过滤器可能就足够了。

所以我做了一些改变：

```
grails.plugins.springsecurity.providerNames = ['preauthAuthProvider','anonymousAuthenticationProvider']

grails.plugins.springsecurity.filterNames = ['anonymousAuthenticationFilter','requestHeaderAuthenticationFilter']

grails.plugins.springsecurity.filterChain.filterNames = ['anonymousAuthenticationFilter','requestHeaderAuthenticationFilter' 
```

]

```
grails.plugins.springsecurity.filterChain.chainMap = [
    '/user/**': 'requestHeaderAuthenticationFilter',
    '/versionone/**': 'requestHeaderAuthenticationFilter',
    '/activation/**': 'requestHeaderAuthenticationFilter',
    '/js/**': 'anonymousAuthenticationFilter',
    '/css/**': 'anonymousAuthenticationFilter',
    '/images/**': 'anonymousAuthenticationFilter',
    '/*': 'requestHeaderAuthenticationFilter'
] 
```

是的，这有助于图像。但另一个问题开始出现。

而不是当身份验证正确时应该返回的 myUserDetails 对象，我非常频繁地获取一些 String 对象。而且我的应用程序因无法在此 String 对象中找到一个属性而失败（这很明显，因为它不存在；））

有谁知道如何处理这个问题？退出显示图像不是一种选择；）

有没有办法在spring security grails配置中从filterchain中排除图像/其他资源......？就像它是用普通的 Java .xml 方式完成的一样......？

我将感谢所有如何解决此问题的帮助和建议。

谢谢 ！！！

**//编辑：**如果有任何人使用此作为参考来设置站点管理员 sso 的安全性，请注意添加：

```
checkForPrincipalChanges = 'true'
invalidateSessionOnPrincipalChange = 'true' 
```

您的 requestHeaderAuthenticationFilter 的属性。否则，在调用 springSecurityService.getPrincipal() 时，您将在 http 会话中处理未更新的权限，因此用户可能“以其他人身份登录”。:) 还要考虑将 bean 的范围更改为“原型”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:57:29.110

如果有人感兴趣 - 我找到了一些解决这个问题的方法：

**1.**要求 SiteMinder 管理员将 SM_USER 标头添加到所有图像或某些限制为 url 位置的图像集。由于一般性能，默认情况下禁用此功能。然后松开所有额外的过滤器，然后使用 preAuth 之一过上幸福的生活。

**2.**使用静态内容而不是在 .war 和重定向中包含图像：]

如何：

将所有需要的图像放入 var/www/yourfolder/images 为您的 httpd 配置添加一些别名：

```
Alias /yourapp/imgs var/www/yourfolder/images
ProxyPass /yourapp/imgs ! 
```

重新启动您的服务使用图像快乐：D

我知道这不是解决方案，而只是解决方法。然而它确实有效。我仍然很高兴听到一些更好的想法:)

干杯。

# symfony - Symfony2 在 dev 和 prod 环境中呈现不同的视图

> ID：10435246
> 
> 赞同：0
> 
> 时间：2012-05-03T16:10:54.627
> 
> 标签：symfony

我使用 Symfony2 设计了一个网站编程。我完成了一些部分并在开发和生产环境中检查了客户端。第一次一切都很好，我在两种环境中都看到了相同的结果，但是在视图中的 sum 更改（我正在使用具有[三级继承的](http://symfony.com/doc/current/book/templating.html#three-level-inheritance)Twig ）例如在“样式表”块中添加 sum 其他样式表之后，开发环境工作正常但是在 prod 环境中没有添加样式表并且它使用旧数据。我从路径“app/cache/dev”和“app/cache/prod”手动清除缓存和日志......但没有任何改变。我删除了块中的所有样式表并再次清除了 chache 旧数据仍然存在！

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:28:31.790

除了清除缓存之外，请确保您发布您的资产：

```
app/console assets:install --symlink web
app/console assetic:dump 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:33:30.337

问题是关于删除缓存文件。我一直在通过 cPanel 文件管理器删除缓存文件。它给出了“所有文件都已成功删除”，但他们没有。所以我找到了另一种清除缓存的方法。我使用了 shell_exec：

```
shell_exec('rm -r app/cache/prod'); 
```

# sql - 努力编写我的第一个连接查询

> ID：10435248
> 
> 赞同：0
> 
> 时间：2012-05-03T16:10:56.390
> 
> 标签：sql

我有 3 张桌子，我试图在下面布置。我已经卡住了。我没有做很多查询，以前从未做过联接，我真的很困惑如何做到这一点。我会用简单的英语进行示例查询，

> 从 web_design="1" 的 Skill_area 中获取所有的投资组合项目 ID，然后从投资组合项目中获取所有具有投资组合项目 ID 值的行，然后对于每一行，从投资组合项目 ID 等于投资组合项目 ID 和插画家之一的值的标签中获取行， photoshop 或 css 是 1。

QUERY我设法想出

* * *

**选择**投资组合_项目_id

**FROM**技能区域

**哪里**web_design=1

* * *

**选择***

**FROM**投资组合项目 p

**WHERE** p.id= s.portfolio_item_id

* * *

**选择***

**FROM**标记 t

**WHERE** s.portfolio_item_id=t.portfolio_item_id

* * *

所以我认为这是正确的，我现在必须加入它

* * *

**投资组合项目**

ID

项目名称

描述

**技能领域**

投资组合项目 ID

网页设计

品牌推广

打印

**标签**

投资组合项目 ID

插画家

Photoshop

css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:24:00.600

像你在“简单的英语”声明中那样，分步分解它：

1.  获取 web_design Skill_area 的

    ```
    select * from skill_area where web_design = '1' 
    ```

2.  加入portfolio_items

    ```
    select * 
     from skill_area s, portfolio_items p 
     where web_design = '1' 
       and p.id = s.portfolio_item_id 
    ```

3.  加入标签，选择 value=1 的行并仅返回标签表中的列）

    ```
    select t.* 
     from skill_area s, portfolio_items p, tags t 
     where web_design = '1' 
       and p.id = s.portfolio_item_id
       and p.id = t.portfolio_item_id
       and t.value = '1' 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:15:04.290

试试这个：

```
SELECT sa.portfolio_item_id, pi.*, subtags.*
FROM skill_area sa
INNER JOIN portfolio_items pi ON sa.portfolio_item_id = pi.id
INNER JOIN (SELECT CASE WHEN illustrator = '1' THEN 'illustrator' 
                        WHEN photoshop = '1' THEN 'photoshop' 
                        ELSE 'css' END as tag, portfolio_item_id 
            FROM tags) subtags ON sa.portfolio_item_id = subtags.portfolio_item_id
WHERE sa.web_design = '1' 
```

您评论说您希望有一个替代方案，您只需从标签中获取所有列。

```
SELECT sa.portfolio_item_id, pi.*, tags.*
FROM skill_area sa
INNER JOIN portfolio_items pi ON sa.portfolio_item_id = pi.id
INNER JOIN tags ON sa.portfolio_item_id = tags.portfolio_item_id
WHERE sa.web_design = '1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:15:07.690

```
SELECT      P.*
FROM        SkillArea S
INNER JOIN  Portfolio P ON S.portfolio_item_id = P.id
INNER JOIN  Tags T ON T.portfolio_item_id = P.id
WHERE       S.web_design = 1
AND         P.id = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:22:56.217

这是这样一个查询的样子。我试图逐字翻译您的英文变体以帮助您理解，并包含注释来描述 stpes。

```
select s.portfolio_item_id, p.*, t.*
from Skill_Area s                                 -- get all portfolio_item_ids from skill_area
inner join Portfolio_Items p on                   -- then get all the rows from portfolio_items
    p.portfolio_item_ids = s.portfolio_item_ids   -- with the id values of portfolio_item_ids
inner join Tags t on                              -- then for each row, get the row from tags
    t.portfolio_item_id = p.portfolio_item_id     -- where portfolio_item_id is equal to portfolio_item_id
    and t.portfolio_item_id = 1                   -- and the value of it is 1
where s.web_design = "1"                          -- where web_design = "1" 
```

# glsl - glsl 无穷大常数

> ID：10435253
> 
> 赞同：17
> 
> 时间：2012-05-03T16:11:13.773
> 
> 标签：glsl, infinity

GLSL 是否有任何用于 +/-infinity 或 NaN 的预定义常量？我这样做是一种解决方法，但我想知道是否有更清洁的方法：

```
// GLSL FRAGMENT SHADER
#version 410

<snip>

const float infinity = 1\. / 0.;

void main ()
{
    <snip>
} 
```

我知道这个`isinf`函数，但我需要将无穷大分配给一个变量，这样对我没有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-11-27T16:36:07.833

就像[Nicol](https://stackoverflow.com/a/10436239/369009)提到的那样，没有预定义的常量。

但是，从 OpenGL 4.1 开始，您的解决方案至少可以保证工作并正确生成无限值。

参见[glsl 4.4](https://www.opengl.org/registry/doc/GLSLangSpec.4.40.pdf)中的示例：

> **4.7.1 范围和精度**
> 
> ...
> 
> 但是，**将非零除以 0 会产生适当符号的 IEEE Inf**：如果实现了正零和负零，则将生成正确符号的 Inf，否则将生成正 Inf。

但是，当您使用旧版本的 OpenGL 时要小心：

例如在[glsl 4.0](https://www.opengl.org/registry/doc/GLSLangSpec.4.00.9.clean.pdf)中它说：

> **4.1.4 浮点数**
> 
> ...
> 
> 类似地，对**除以 0 等条件的处理可能会导致未指定的结果**，但在任何情况下都不应导致处理的中断或终止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T17:14:10.113

它没有预定义的常量，但是有一个`isinf`函数可以测试某事物是否为无穷大。

> 当我在这里时，是否有其他东西的常量，如 FLT_MAX FLT_EPSILON 等，就像 C 中的方式一样？

不是，没有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-17T01:14:21.347

这可能有用吗？

```
const float pos_infinity = uintBitsToFloat(0x7F800000);
const float neg_infinity = uintBitsToFloat(0xFF800000); 
```

“如果在参数x中传递浮点无穷大的编码，则得到的浮点值是对应的（正或负）浮点无穷大”

# c++ - CUDA 驱动程序 API 和函数处理

> ID：10435258
> 
> 赞同：9
> 
> 时间：2012-05-03T16:11:31.283
> 
> 标签：c++, cuda, c++11, static-linking, name-mangling

我有一个需要 C++11 的项目，因此我将文件分为两类：使用 C++11 的文件，以及使用 C++03 并因此与 nvcc 编译器兼容的文件。当我有一个不是模板函数的内核时，很容易加载模块并使用`cuModuleGetDataEx`. 但是，当内核是模板时，函数名称在显式特化后会被破坏。这使得在使用 CUDA 驱动程序 API 加载模块后很难获得函数的句柄。例如，考虑这个函数。

```
template <class T, class SizeType>
**global** void
vector_add(const T* a, const T* b, T* c, const SizeType dim)
{
    const SizeType i = blockIdx.x * blockDim.x + threadIdx.x;
    if (i < dim) { c[i] = a[i] + b[i]; }
} 
```

在我将它编译成 PTX 代码后，损坏的名称是`_Z10vector_addIfjEvPKT_S2_PS0_T0_`. 如何从我的主机代码中轻松查找和加载模板内核函数，而无需在文件中手动找到它们并复制它们的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:47:06.143

> Blockquote 我有一个需要 C++11 的项目。

这一定是个笑话，你的程序确实需要原型编译器......你没有提到你正在使用的编译器，但它看起来像 gcc。

[了解你的编译器](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)

我很确定您的 CUDA 部分不需要 C++11，将所有内容放在 C++03 文件旁边并照常进行，如果需要，请使用库与 C++11 proto-compiler-generated-executable 链接，这是最先进的。

# java - 如何在 IFileStore 而不是在 IFile 上设置 IMarker

> ID：10435264
> 
> 赞同：0
> 
> 时间：2012-05-03T16:11:50.217
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

有谁知道如何在 IFileStore 而不是在 IFile 上设置 IMarker。我发现这个关于这个问题的开放错误：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=22284](https://bugs.eclipse.org/bugs/show_bug.cgi?id=22284)

有没有办法克服这个？

亲切的问候，基里亚科斯

# jquery-ui - 让 JQuery UI 的 datepicker 小部件作为 EmberJS Mixin 工作

> ID：10435266
> 
> 赞同：1
> 
> 时间：2012-05-03T16:11:53.960
> 
> 标签：jquery-ui, ember.js

在这个 JsFiddle 中：http: [//jsfiddle.net/maxl/mCXND/](http://jsfiddle.net/maxl/mCXND/)

[（从http://jsfiddle.net/ud3323/XMgwV/](http://jsfiddle.net/ud3323/XMgwV/)复制和修改）

我尝试创建一个基于 JQuery 的 Ember DatePicker。

我遇到的第一个问题是这一行：

```
var ui = jQuery.ui[this.get('uiType')](options, this.get('element')); 
```

jQuery.ui[this.get('uiType')] 不返回函数，所以我想我开始使用的解决方案适用于一些 jQueryUI 小部件，但不是全部。我想要一个适用于所有 JQuery-UI 小部件的解决方案，尤其是 JQueryUI 的 Datepicker。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:58:52.050

如果您查看 jqueryui 代码，您会看到其中一些作为函数调用，而另一些则没有。您可以使用以下方法解决它：

```
var ui;
if (typeof jQuery.ui[this.get('uiType')] === 'function') {
   ui = jQuery.ui[this.get('uiType')](options, this.get('element'));
} else {
   ui = this.$()[this.get('uiType')](options);
} 
```

工作示例：http: [//jsfiddle.net/PzsrT/7/](http://jsfiddle.net/PzsrT/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T17:49:18.230

关于 jQuery UI 的 datepicker 小部件作为 EmberJS Mixin 的另一件事。如果你想提供一个回调函数来处理 beforeShowDay 事件，你会引发这个错误：

```
Uncaught TypeError: Cannot read property '0' of undefined 
```

即使您的回调函数（在您的 ember 视图中）返回一个数组，就像它在 jqueryui 文档中指定的那样

```
 beforeShowDay: function(date){
    some code...
    return [true, ''];
  }; 
```

发生这种情况是因为在 _gatherEvents 函数中的 callback.call 之后没有返回任何内容

```
 _gatherEvents: function(options) {
    var uiEvents = this.get('uiEvents') || [], self = this;

    uiEvents.forEach(function(event) {
      var callback = self[event];

      if (callback) {
        // You can register a handler for a jQuery UI event by passing
        // it in along with the creation options. Update the options hash
        // to include any event callbacks.
        options[event] = function(event, ui) { callback.call(self, event, ui); };
      }
    });
  } 
```

我通过在 callback.call 之前添加一个 return 语句来解决这个问题。

```
_gatherEvents: function(options) {
    var uiEvents = this.get('uiEvents') || [], self = this;

    uiEvents.forEach(function(event) {
      var callback = self[event];

      if (callback) {
        // You can register a handler for a jQuery UI event by passing
        // it in along with the creation options. Update the options hash
        // to include any event callbacks.
        options[event] = function(event, ui) { return callback.call(self, event, ui); };
      }
    });
  } 
```

工作示例[http://jsfiddle.net/thibault/qf3Yu/](http://jsfiddle.net/thibault/qf3Yu/)

# javascript - Android/Phonegap - onClick() 不工作

> ID：10435267
> 
> 赞同：15
> 
> 时间：2012-05-03T16:11:55.290
> 
> 标签：javascript, android, html, cordova

我正在使用phonegap并试图检测onClick，但是Android似乎完全忽略了它，下面是我正在尝试的：

```
<select name="func" onclick="StartButtons();" data-native-menu="true"> 
```

我已经尝试了 onClick 的几种变体，包括 javascript、jQuery 等，但是这些似乎都不起作用。

我注意到 onChange 有效，但这对我没有多大用处，因为我需要使用提示要求用户确认更改，如果不是，则什么也不做。但是，使用 onchange 仍然会更改下拉列表中的项目。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-27T16:57:46.063

我对 jQuery 也有同样的问题，Android 似乎忽略了 javascript 中的点击事件。最初，我的 jQuery 代码如下所示：

```
$("#element").click(function () { alert("message"); }); 
```

我不得不将其更改为：

```
$("#element").on("touchend", function () { alert("message"); }); 
```

不确定您是否使用 jQuery，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T10:38:41.067

使用 javascript 将单击事件侦听器添加到您的对象。首先给对象添加一个id：

```
 <select id="obj_id" name="func" data-native-menu="true"> 
```

然后调用 addEventListener() ：

```
 document.getElementById("obj_id").addEventListener("click", StartButtons, false); 
```

Phonegap 文档建议在“deviceready”事件中运行所有 javascript 代码。所以你的代码应该是这样的：

主.js：

```
 function StartButtons() { ... }

    function onDeviceReady() {
        ...
        document.getElementById("obj_id")
            .addEventListener("click", StartButtons, false);
        ...
    }

    function init() {
        document.addEventListener("deviceready", onDeviceReady, false);
    } 
```

索引.html：

```
 ...
        <script type="text/javascript" charset="utf-8" src="main.js"></script>
    </head>
    <body onload="init();">
        ...
        <select id="obj_id" name="func" data-native-menu="true">
        ...
    </body> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-30T11:30:42.010

https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; 媒体源 *">

从 index.html 中删除此代码

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-14T15:16:22.557

user1183085 的答案是正确的。Android 不会像 Web 应用程序那样识别点击事件，这是有道理的，因为移动应用程序在原生时不是 Web 的，所以这就是为什么要制作 phonegap 但因为它可以与 jquery 一起使用，而不是直接与原生 java android 库一起使用。我这样写我的代码：

web 按钮或元素 onclick 处理所有 web 界面，特殊按钮或元素 ontouchend 处理移动界面。这是我的代码的一部分：

```
//this handles the login button events for the mobile touch of the user
$("button.login-button").on("touchend", function () {alert('hello touch ! =o' )});

//this handles the login button events for web clicks
$("button.login-button").on("click", function () {alert('hello click ! =o' )}); 
```

感谢用户user1183085，它永远解决了我的生活=（）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-23T16:01:40.180

当心，在 Cordova 3.4 中的输入上绑定 onclick 不起作用。但它适用于 div 元素。考虑到，输入元素是表单元素的一部分，就像选择元素一样，这可能是你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T16:23:42.463

您是否尝试过将方法设置为“method”而不是“method();”？所以也许你可以试试你的线路：

```
<select name="func" onclick="StartButtons" data-native-menu="true"> 
```

然后希望你的方法会被调用。

# javascript - SOAP/XML 到 JavaScript 数组

> ID：10435285
> 
> 赞同：0
> 
> 时间：2012-05-03T16:12:49.990
> 
> 标签：javascript, soap, xml-parsing

我希望从下面的 SOAP/XML 字符串中提取 ItemName 和 Value 对。我已经通过网络尝试了各种正确的方法来做到这一点。我已经放弃了，只想将数据解析为字符串。我已经查看了 XSLT，但我需要将 SOAP 数据与一些人类可读的数据相关联，因此将它们全部放在 JavaScript 数组中对我来说会更好。

[删除了我可怕的原始 JavaScript 代码块并用好的代码替换。]

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soap:Body>
<ReadResponse xmlns="http://opcfoundation.org/webservices/XMLDA/1.0/">
<ReadResult RcvTime="2012-05-02T13:25:39.484+01:00" ReplyTime="2012-05-02T13:25:39.484+01:00" RevisedLocaleID="en" ServerState="running">    </ReadResult>
<RItemList>
<Items ItemName="_System._DateTime">
    <Value xsi:type="xsd:dateTime">2012-05-02T12:25:38.000+01:00</Value>
    <Quality></Quality>
</Items>
<Items ItemName="_System._ProjectTitle">
    <Value xsi:type="xsd:string">Job2663</Value>
    <Quality></Quality>
</Items>
</RItemList>
</ReadResponse>
</soap:Body>
</soap:Envelope>

//Edited below to include correct code based on Rocket's solution below.
$(soap).find('Items').each(function(){
  console.log($(this).attr('ItemName'), ':', $('Value', this).html());
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:01:34.053

可以使用 jQuery 吗？jQuery 可以为您解析 XML，您可以使用 jQuery 方法遍历它。

```
$(soap).find('Items').each(function(){
    console.log($(this).attr('ItemName'), $('Value', this).attr('xsi:type'));
}); 
```

演示：http: [//jsfiddle.net/JMTHs/](http://jsfiddle.net/JMTHs/)

# forms - 我不希望浏览器能够保存登录详细信息

> ID：10435286
> 
> 赞同：-1
> 
> 时间：2012-05-03T16:12:51.683
> 
> 标签：forms, browser, login, passwords, prompt

我正在制作登录表单，但我不希望浏览器能够保存用户名和密码组合。

就像 PayPal 或银行一样。

我听说我可以通过使用 AJAX 和 Javascript 来做到这一点，但我对它们很陌生，所以我需要向你寻求帮助！

```
<form id="loginform">
<label for="username">Username</label>
<input name="username" type="text" value="" required="required" />
<label for="password">Password</label>
<input name="password" type="password" value="" required="required" />
<input type="button" name="doLogin" value="Login" onclick="login(this.form.username.value,this.form.password.value);" />` 
```

使用该登录表单，浏览器不会要求保存登录组合......但现在我只需要知道如何将登录信息发送到 PHP：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:17:16.137

我假设您需要防止诸如*autoformer*（用于 Firefox）之类的东西。每次用户加载表单时，只需将各种输入值的名称更改为不同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:22:42.930

正如 Sunny 的链接所建议的，您可以使用 autocomplete 属性来防止浏览器建议输入字段。所以对于你的例子：

```
<form id="loginform">
   <label for="username">Username</label>
   <input name="username" type="text" value="" required="required" autocomplete="off"/>
   <label for="password">Password</label>
   <input name="password" type="password" value="" required="required" autocomplete="off" />
   <input type="button" name="doLogin" value="Login" onclick="login(this.form.username.value,this.form.password.value);" /> 
```

# jsf - JSF 片段在数据表 Primefaces 中居中图像

> ID：10435289
> 
> 赞同：1
> 
> 时间：2012-05-03T16:12:59.493
> 
> 标签：jsf, primefaces

如何对齐一个图形图像，它将作为一个元素作为中间的一列出现。现在它是左对齐的。我尝试了很多，但它不会工作。

```
<p:column>
    <f:facet name="header">
        <h:outputText value="Status" />
    </f:facet>
    <h:graphicImage value="../resources/images/Yellow_button.png"
    style="float:center;height: 18px; width: 20px"
        rendered="#{categorey.status == 1}" title="READY TO ZIP"/>
<p:column> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:15:17.760

您可以对齐整列的表格单元格内容：

```
<p:column style="text-align: center">
   <f:facet name="header">
     <h:outputText value="Status" />
   </f:facet>
   <h:graphicImage value="../resources/images/Yellow_button.png" />
</p:column> 
```

为了分离布局，您也可以使用`styleClass`从 css 资源中引用类的属性。

# ruby - 测试 Ruby TCPSocket 服务器

> ID：10435292
> 
> 赞同：3
> 
> 时间：2012-05-03T16:13:06.727
> 
> 标签：ruby, sockets, testing, tcpsocket

我有一个小应用程序，提供连接（如聊天）。它捕获连接，从中获取登录信息，然后侦听数据并将其广播到每个连接，发送者除外。

问题是我不是一个非常高级的测试人员，也不知道如何测试。

```
# Handle each connection
def serve(io)
  io.puts("LOGIN\n")
  # Listen for identifier
  user = io.gets.chomp

  ...

  # Add connection to the list
  @mutex.synchronize { @chatters[user] = io }

  # Get and broadcast input until connection returns nil
  loop do

    incoming = io.gets
    broadcast(incoming, io)

  end
end

#Send message out to everyone, but sender
def broadcast(message="", sender)

  # Mutex for safety - GServer uses threads
  @mutex.synchronize do

    @chatters.each do |chatter|

      socket = chatter[1]
      # Do not send to sender
      if sock != sender

        sock.print(message)

      end

    end

  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:14:03.307

如果您只想进行单元测试，您可以使用[RSpec 模拟](https://www.relishapp.com/rspec/rspec-mocks/docs)（或其他一些模拟框架）来存根您的方法并确保逻辑按您期望的方式工作。如果您真的想进行集成测试，那需要做更多的工作，并且需要您为套接字创建单独的读取器和写入器，以便您可以实际独立地测试对话的每个部分以获得预期的行为。

其他人显然已经在博客上讨论了与您[类似的问题](http://strugglingwithruby.blogspot.com/2010/03/ruby-sockets.html)。也许这个例子会对你有所帮助。

如果您的问题更多是关于您应该编写的测试用例，而不是关于如何测试套接字，那么您可能需要重写您的问题，以便答案更加准确。

# asp.net-mvc-3 - 避免对 int 字段 MVC3 进行验证

> ID：10435294
> 
> 赞同：0
> 
> 时间：2012-05-03T16:13:17.723
> 
> 标签：asp.net-mvc-3, validation, data-annotations

我有以下 ViewModel（仅显示几个属性以便于阅读）

```
public class Contract{

public string Name {get; set;}

public ContractTerm PrpTerm { get; set; }

} 
```

PRP 术语模型是这样的

```
public class PrpTerm{

public int Id {get; set;}
public string Name {get; set;}

} 
```

对于我的模型验证，我使用 XML 文件来注入注释。我已经`Name`根据需要设置了属性，并且`ContractTerm`没有指定任何验证（它是列表中的可选字段）。我的观点是有一个名称的文本框和一个合同条款的选择列表。

当我尝试保存时，我将`ModelState.IsValid`属性设为 false，表示该`PRPTerm.Id`值是必需的。我知道这是因为我们无法将空值分配给 int。

有人知道避免这种情况被验证的方法吗？

我尝试使用 Bind(Exclude 注释，但这会从数据提交中删除该字段，这不允许我获取用户选择的值（如果发生这种情况）。我无法在 PrpClass 上将 id 设置为可为空. 另一个选项是在 ViewModel 上设置 PrpTerm Id，但我需要以正当理由证明该更改是合理的。

任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T04:09:12.127

一个隐式`[Required]`属性被应用，`Id`因为它是`int`根据定义，不可为空的（而不是可以`int?`为空的）。

此行为可在 MVC 中使用

`DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes`

默认为真。

您可以通过在 Global.asax.cs 中将其设置为 false 来禁用此行为

然而，正如 Afinkelstein 指出的那样，听起来真正的问题在于您的 ViewModel。我建议您重新考虑这一点，而不是关闭这个方便的 MVC 默认设置。

我会建议

```
public class Contract
{
    public string Name { get; set; }
    public int? PrpTermId { get; set; }
} 
```

可能是你真正想要的。就这样做的“正当理由”而言 - 人们普遍认为您的 ViewModel 通常与您的 Model 不同，因为给定 ViewModel 的目的可能与它所组成的 Model 的目的略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:26:36.473

听起来 PrpTerm 类不适合您的视图模型，因为您没有使用它的属性。您真正想要的只是从下拉列表中设置的 PrpTermName。我会有一个像这样的类结构

```
public class Contract
{
    public string Name { get; set; }
    public string PrpTermName { get; set; }
    public SelectList ContractTermList { get; set; }
} 
```

现在您无需担心 ID 的验证，因为它不是您的视图模型的一部分。

# java - 使用 osm 文件或 osm 预下载图块的开源 Java 地图查看器

> ID：10435295
> 
> 赞同：2
> 
> 时间：2012-05-03T16:13:21.257
> 
> 标签：java, mapping, openstreetmap

我正在开发一个桌面应用程序，它需要显示带有一些叠加层的地图。我有该区域的 .osm 文件和从 OSM 预下载的图块。有人知道这方面的开源工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:13:08.960

[http://code.google.com/p/mapsforge/](http://code.google.com/p/mapsforge/)

我使用过的很棒的图书馆，取得了巨大的成功。特别适合离线模式。开发人员正在远离磁贴下载器类，但您仍然可以在旧 jar 中找到它们。

# css - 打印 CSS 背景图像

> ID：10435296
> 
> 赞同：1
> 
> 时间：2012-05-03T16:13:25.790
> 
> 标签：css, internet-explorer, printing, background-image

> **可能重复：**
> [在 IE 中打印背景图像而不启用“打印背景颜色和图像”](https://stackoverflow.com/questions/3197278/print-background-image-in-ie-without-enable-print-background-colors-and-images)

是否有一种技巧可以打印 CSS 背景图像而不要求用户检查 IE 打印背景图像是否被选中？

我研究了一上午，发现唯一的选择是拥有一个 print.css 文件。是否可以在原始样式表中做而无需在头部添加额外的样式表？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:39:48.593

我不确定你有什么样的背景，但如果它是非重复的，一个简单的选择是在你的其他元素下放置一个绝对定位的图像，而不是为页面指定背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:18:41.190

您可以`@media print { print styles in here }`在样式表的底部添加，这应该可以为您完成工作。

# java - 在Java中查找注释的PMD规则

> ID：10435297
> 
> 赞同：4
> 
> 时间：2012-05-03T16:13:31.260
> 
> 标签：java, annotations, pmd

有谁知道 PMD 是否具有查找注释的功能？例如，如果我的`@BeforeClass`JUnit 测试类中有注释，xpath 会将注释视为只是另一个节点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:16:20.540

[好吧，您可以在此处](http://pmd.sourceforge.net/rules/java/migrating.html#JUnit4TestShouldUseBeforeAnnotation)查看干扰注释的规则示例。还要看看接下来的几个。它们都处理注释检查。

# oracle - Oracle SQR datediff，四舍五入秒，然后键入

> ID：10435299
> 
> 赞同：1
> 
> 时间：2012-05-03T16:13:42.423
> 
> 标签：oracle, rounding, datediff, sqr

在 Oracle SQR 中（请，我知道在 SQL 中如何，我在询问 SQR 语法），我如何： - 确定变量的“类型”？我找不到任何“类型”函数 - datediff() 返回的数据类型是什么？- 最后，我如何将返回的金额四舍五入到整秒 `datediff($date1, $date2,'MINUTE')`？

提前致谢。搜索这个一直是个问题，因为我得到了大量的 SQL 语句和平方根函数的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:15:36.090

datediff 返回一个数字。数字由“#”前缀表示（日期和字符串具有“$”前缀）。

SQR 有一个舍入函数，它以 (x, y) 作为参数并返回 x 舍入到 y 小数位。

# javascript - 我是否正确捕获了这个 JSON 值？

> ID：10435303
> 
> 赞同：2
> 
> 时间：2012-05-03T16:13:53.710
> 
> 标签：javascript, jquery, json

我将如何解析这个 JSON 字符串？

```
{"nodes":["content"],"pager":"content"} 
```

这是我用来绘制 json 的函数。

```
 $.getJSON(dataNodes, {

 }, function (data) {

      for(var i = 0; i < data.length; i++) {
           $('#content').append(?????data.nodes?????);
      }

 }); 
```

我正在使用 data.nodes 来尝试捕获该节点值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:16:01.570

`data.nodes`是一个具有一个值（“内容”）的数组，因此如果您尝试附加该字符串，那么您应该使用：

```
data.nodes[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:16:33.903

您不需要“解析”它，因为 jQuery 会为您处理它。

要进行追加，您需要将字符串从数组中取出。

```
 for(var i = 0; i < data.length; i++) {
       $('#content').append(data[i].nodes[0]);
  } 
```

但我更喜欢这样做。

```
var $content = $('#content');
$.each(data, function(i, value) {
    content.append(value.nodes[0]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:18:01.893

你迭代了错误的东西，你需要迭代 data.nodes 你的内容数组，for循环记得使用 $.each() 它更干净:)

[http://jsfiddle.net/n65D4/](http://jsfiddle.net/n65D4/)

```
$(function() {
    var data = {
        "nodes": ["content"],
        "pager": "content"
    };
    $.each(data.nodes, function(i, val) {
        $('#foo').append(val);
    });
});​ 
```

# wpf - 子类化 WPF UserControl 不能跨项目工作

> ID：10435306
> 
> 赞同：2
> 
> 时间：2012-05-03T16:14:07.813
> 
> 标签：wpf, user-controls, wpf-controls

嗨，我根据此处找到的信息创建了一些子类用户控件；[http://csharpsimplified.wordpress.com/2011/09/21/subclassing-wpf-user-control/](http://csharpsimplified.wordpress.com/2011/09/21/subclassing-wpf-user-control/)但我遇到了问题。

这是我在 TestUserControl 项目中的基类。

```
namespace TestUserControl
{
    public class BaseDataGridControl : UserControl
    {
        protected BaseDataGridControl()
        {
        }
    }
} 
```

这是我的具体课程；

```
<view:BaseDataGridControl x:Class="TestUserControl.Concrete"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:view="clr-namespace:TestUserControl"      
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Button Height="20" Width="60" Margin="12,12,228,268" />
    </Grid>
</view:BaseDataGridControl> 
```

这个控制代码后面看起来像这样；

```
public partial class Concrete : BaseDataGridControl
{
    public Concrete()
    {
        InitializeComponent();
    }
} 
```

我可以将我的具体类放到同一个 TestUserControl 项目中的窗口上，而不会出现任何问题；

```
<Window x:Class="TestUserControl.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" xmlns:my="clr-namespace:TestUserControl">
    <Grid>
        <my:Concrete HorizontalAlignment="Left" Margin="88,39,0,0" x:Name="concrete1" VerticalAlignment="Top" />
    </Grid>
</Window> 
```

这一切都很好。

问题是当我尝试在另一个项目中使用具体类时。

如果我创建另一个项目（WPFApplication1）并基于具体类创建一个类，例如

```
namespace WpfApplication1
{
    public class SubClass : Concrete
    {
    }
} 
```

当我尝试将其放到 WPFApplication1 项目中的窗口上时，我得到一个；

“枚举数无效，因为集合已更改”

如果我尝试通过 XAML 添加它，我会得到一个

'组件'WpfApplication1.SubClass'没有由URI'/TestUserControl;component/concrete.xaml'标识的资源。

错误信息。

WPFApplication1 项目具有对 TestUserControl 项目的引用。

有没有人知道为什么这在定义用户控件的项目中有效，但是一旦您尝试在单独的项目中对其进行子类化，它就会失败？

我已经在 VS2010 和 VS11 beta 中尝试过这个，结果同样糟糕。

我没有使用反射或访问类的构造函数中的任何集合，代码就是您在此处看到的。

我有一个演示这个问题的测试项目，如果它有帮助吗？

谢谢 ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T06:07:13.787

遇到了类似的问题。我有一个项目，其中包含我的基本 UI，其中一些项目是用户控件。（我们称这个项目为“BaseUI”）。在我的第二个项目（我们将其称为“SubProj”）中，我可以为其添加引用并将其添加到 Visual Studio 中的 xaml 中，但我无法使用 Blend 来查看更改。现在我不能用它来做一些更复杂的编辑。

它产生错误“[组件名称在此处]在名称空间[您引用的名称空间]中不存在”

我发现的修复可能会允许您在子项目中继承它。

您可以使用链接将代码添加到当前程序集中，而不是尝试直接从引用的程序集中使用该类。该链接使控件的行为就像它在现有项目中一样，但是代码来自基础项目。对其进行的任何更改都会影响所有链接。您应该能够从本地继承，而不会出现跨项目的问题。

这是你如何做到的：

1.  在“BaseUI”项目中创建基本控件
2.  右键单击您的“子项目”并添加现有项目
3.  从“BaseUI”项目中寻找所需的用户控件的 .xaml 文件。
4.  单击“添加”按钮旁边的箭头，然后选择“添加为链接”

# unix - UNIX 中的 /dev/tty 是什么？

> ID：10435308
> 
> 赞同：27
> 
> 时间：2012-05-03T16:14:09.930
> 
> 标签：unix

标准输入和标准输出文件描述符都指向它。它是如何工作的？有人可以指出一个很好的资源来理解 UNIX 终端和与之交互的系统调用。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-03T16:23:38.170

`dev/tty`是代表当前控制台的文件系统对象。从命令行将文件复制到此“目录”中会将这些文件的内容打印到控制台：

```
cp myfile.txt /dev/tty 
```

相当于

```
cat myfile.txt 
```

这些对象可以让您使用熟悉的文件 API 与控制台进行交互。将控制台 API 与文件 API 统一起来是一种巧妙的方法。您可以使用`fopen`,`fprintf`等与控制台进行交互，就像与常规文件交互一样。

此示例写入`"Hello, world\n"`终端：

```
#include <stdio.h>

int main (int argc, const char * argv[]) {
    FILE *f = fopen("/dev/tty", "w");
    fprintf(f, "Hello, world!\n");
    return 0;
} 
```

# iphone - UISlider 突出显示状态，拇指宽度与正常不同

> ID：10435309
> 
> 赞同：16
> 
> 时间：2012-05-03T16:14:12.277
> 
> 标签：iphone, ios, uikit, uislider

我正在尝试实现一个自定义 UISlider（UISlider 的子类），其行为方式类似于在突出显示时在拇指周围发光的本机滑块。不过，我遇到了麻烦。

高亮拇指的（有效）宽度明显大于正常拇指（由于发光）。如果我向正常状态图像添加透明像素填充，以便两个图像具有相同的宽度，问题是正常状态拇指看起来永远不会到达轨道的末端（它确实到达了末端，但填充使它以其他方式出现）。

如果我使用 thumbRectForBounds: 偏移拇指以与轨道的开头正确对齐，它只会使另一端的问题变得更糟。

如果我只保留两个图像所需的宽度（即，在正常状态下没有填充，并且两者的宽度不同），我已经更接近了。我可以在 thumbRectForBounds: 中独立设置偏移量：基于 UIControl.state，但似乎在幕后发生了一些数学魔术。UISlider 认为两个状态的图像完美对齐的唯一位置是精确的中心。

似乎我可能需要实现一些数学运算，根据沿轨道的相对位置确定突出显示状态的偏移量。它需要在中心的 y 偏移为零（UISlider 将使两个图像居中，这意味着它们对齐）。在极端情况下，它需要一个完全弥补发光的 y 偏移。在两者之间，它需要插入 y 偏移量。

不过，要重新创建本机滑块所做的事情似乎需要做很多工作，所以也许我遗漏了一些明显的东西。

**更新** 当前解决方案：

它不是完全可移植的，因为它对所添加的辉光的大小做出了一些假设。我正在使用图像添加发光，而不是直接将其绘制到 CALayer。我还没有测试过它的性能如何。

本质上，我创建了一个正方形的图层，其尺寸是默认状态拇指图像的高度，将其居中于拇指上，然后绘制发光（只有发光，而不是带有发光的拇指的单独图像，就像使用高亮状态图像完成）到图层中。

```
- (CGRect)thumbRectForBounds:(CGRect)bounds trackRect:(CGRect)rect value:(float)value {
  CGRect r = [super thumbRectForBounds:bounds trackRect:rect value:value];

  [thumbHighlightOverlayLayer removeFromSuperlayer];
  thumbHighlightOverlayLayer = [CALayer layer]; 

  int x = r.origin.x + (r.size.width / 2) - (r.size.height / 2);
  thumbHighlightOverlayLayer.frame = CGRectMake(x, r.origin.y, r.size.height, r.size.height);

  UIImage* thumbHighlightOverlayImage = [UIImage imageNamed:@"thumb-highlight"];
  thumbHighlightOverlayLayer.contents = (id)thumbHighlightOverlayImage.CGImage;

  switch (self.state) {
    case UIControlStateHighlighted:
      [[self layer] addSublayer:thumbHighlightOverlayLayer];
      break;
    default:
      break;
  }

  return r;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:01:00.967

与其在图像中添加发光效果，不如动态添加它。您可以使用 CALayer 添加发光效果。

[图层](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/doc/c_ref/CALayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:50:40.170

您可以滚动自己的滑块，这并不像听起来那么复杂，但仍需要几个小时的编码。

但是，最简单的解决方案是也设置自定义轨道图像：

1.  在左侧/右侧使用填充（透明像素）创建自定义“最小”/“最大”轨道图像。填充应该与发光半径减去拇指半径 (11pt) 一样大。
2.  `setMinimumTrackImage:forState:`使用和 将图像应用到您的 UISlider`setMaximumTrackImage:forState:`
3.  根据添加的填充大小增加滑块宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:39:40.103

我的一个应用程序的自定义滑块遇到了类似的问题。与普通滑块不同，轨道是静态数字线，因此我不需要单独的最小和最大轨道图像。然而，我需要一个超大的拇指热点。所以我用透明像素的额外填充制作了我的拇指图像，并将透明图像分配给轨道。可见轨道只是滑块后面的一个 UIImageView（实际上是一组滑块后面的一个 UIImageView）。滑块的边缘远远超出轨道图像的边缘。

我的建议是通过组合多个视图而不是打破自定义 UISlider 的限制来构建您想要的滑块的视觉结构。如果你可以不改变轨道，你可以复制我的技术。或者，您可以操纵一个或两个 UIView 的框架，以便在滑块更改值时调整自定义轨道。如果您需要在应用程序中多次使用相同的滑块，您可以将视图组打包到 UIView 子类中。根据您的滑块操作的复杂程度，可能会出现一个更谨慎的选择，即制作自定义控件。

# clojure - 对位板的射线攻击

> ID：10435310
> 
> 赞同：3
> 
> 时间：2012-05-03T16:14:17.170
> 
> 标签：clojure, chess, bitboard

鉴于 64 位长位板表示的索引，我正在尝试计算射线攻击：

```
(defn se [board index]
  "Produces a ray attack from the indexed bit in the south-east direction"
  (reduce bit-or
    (for [bit (rest (range index 0 -7))]
      (bit-flip board bit)))) 
```

车攻击（直接沿着文件或等级）很容易。但是，上面代码的问题是我最终得到了对角 Bishop 攻击的以下可能性：

```
00000000
00100000
01000000
10000001
00000010
00000100
00001000
00010000 
```

当棋子从棋盘边缘脱落时，我应该如何解释？我正在使用大端映射（A8 = 0，H1 = 63）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:32:53.870

我可能会使用板上的 x,y 坐标来执行此操作：这使得在板边缘上进行边界条件检查变得更容易，例如

```
(defn se [x y]
  "Produces a ray attack from the indexed bit in the south-east direction"
  (let [initial (bit-shift-left (bit-shift-left (long 1) x) (* y 8))
        dx 1 ;; x direction
        dy 1 ;; y direction
        distance (min 
                   (- 7 x) 
                   (- 7 y))
        shift (+ dx (* 8 dy))]
    (loop [value 0
           distance distance]
      (if (<= distance 0)
        value
        (recur (bit-or value (bit-shift-left initial (* distance shift))) (dec distance))))))

(defn bits [^long bitboard]
  (map 
    #(if (> (bit-and 1 (bit-shift-right bitboard %)) 0) 1 0)
    (range 64)))

(defn display [bitboard]
  (let [bits (partition 8 (bits bitboard))]
    (doseq [ss bits]
      (println (apply str ss)))))

(display (se 1 3))

00000000
00000000
00000000
00000000
00100000
00010000
00001000
00000100 
```

通过一些额外的工作，您可以将其概括为在任何 (dx, dy) 方向上投射光线，例如 (1,0) 表示向东移动的车。如果您设置距离限制，您甚至可以将 (2,1) 用于骑士.....

我认为这比为每个方向定义单独的功能更实用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:09:57.863

```
(defn se [board index]
  "Produces a ray attack from the indexed bit in the south-east direction"
  (reduce bit-or 0
    (for [bit (take (- 7 (rem index 8)) (rest (range index 0 -7)))]
      (bit-flip board bit)))) 
```

# ios5 - UITableView中UILabel的意外Y坐标

> ID：10435311
> 
> 赞同：1
> 
> 时间：2012-05-03T16:14:21.870
> 
> 标签：ios5, xcode4, uitableview, uilabel, custom-cell

我有一个由海关单元组成的表格视图。每个单元共有三个标签。

主要问题是细胞三个标签的中间标签的形成。

我正在创建一个具有相同 CGRect 的自定义标签

```
UILabel *msglabeltemp = [[[UILabel alloc]  initWithFrame:  CGRectMake(80,20.0,230.0,80.0)] autorelease];
[cell.contentView addSubview:msglabeltemp];
msglabeltemp.backgroundColor = [UIColor clearColor];
msglabeltemp.textColor = [UIColor grayColor];
msglabeltemp.numberOfLines=6;
[msglabeltemp setFont:[UIFont fontWithName:@"Helvetica Neue" size:12.0f]];
msglabeltemp.tag=1;
msglabeltemp.font=[UIFont systemFontOfSize:12.0f];
msglabeltemp.textAlignment=UITextAlignmentLeft ;
//Adding Label To Cell
UILabel *msglabel = (UILabel *)[cell.contentView viewWithTag:1];

msglabel.text = [data1 objectForKey:@"msg"]; 
```

...将为单元格中的每个标签调用此标签，但它会泄露第一个标签和中间标签之间的意外距离。

查看图像中红色突出显示的区域

![在此处输入图像描述](../Images/299cb41370bb95a6d94a709551bf1620.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:51:47.260

这也很有用

```
CGSize maximumSize = CGSizeMake(300, 9999);
    NSString *dateString = @"The date today is January 1st, 1999";
    UIFont *dateFont = [UIFont fontWithName:@"Helvetica" size:14];
    CGSize dateStringSize = [dateString sizeWithFont:dateFont 
            constrainedToSize:maximumSize 
            lineBreakMode:self.dateLabel.lineBreakMode];

    CGRect dateFrame = CGRectMake(10, 10, 300, dateStringSize.height);

    self.dateLabel.frame = dateFrame; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:48:27.973

A`UILabel`的内容不是顶部对齐的（而是在中间居中），这就是您看到此内容的原因。

请参阅[在 UILabel 中将文本垂直对齐到顶部以](https://stackoverflow.com/questions/1054558/how-do-i-vertically-align-text-within-a-uilabel)获取有关如何更改此设置的灵感。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:14:18.023

```
CGRect lblFrame = CGRectMake(20, 20, 280, 150);
    UILabel *lbl = [[UILabel alloc] initWithFrame:lblFrame];
    [lbl setBackgroundColor:[UIColor orangeColor]];

    NSString *labelText = @"I am the very model of a modern Major-General, I've information vegetable, animal, and mineral";
    [lbl setText:labelText];

    // Tell the label to use an unlimited number of lines
    [lbl setNumberOfLines:0];
    [lbl sizeToFit]; 
```

# php - 通过正则表达式提取数据

> ID：10435314
> 
> 赞同：0
> 
> 时间：2012-05-03T16:14:30.713
> 
> 标签：php, preg-match

我想提取以下形式的数据：

```
<div class="image"><a href="[Any Chacter]"> 
```

我得到了数据，`<div class="image">`但在那之后没有结果。这是我的代码：

```
$tag_regex='/<div class="image">/';
preg_match_all($tag_regex,$xml,$matches);

return $matches[0]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:32:37.607

正如 Truth 在他的评论中所说，从 html 中提取数据的正确方法是使用 html 解析器。

但是，您的情况很简单，可以使用正则表达式轻松快速地解决：

```
$tag_regex= '<div class="image"><a href=".*">';
preg_match_all($tag_regex,$xml,$matches);

return $matches[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:48:51.647

我很高兴你愿意学习，我真的希望你能学会使用 HTML 解析器（就像任何理智的人一样）。

对于您的问题的实际解决方案：

```
$tag_regex= '|<div class="image"><a href="(.*)">|i';
preg_match_all($tag_regex,$xml,$matches);

return $matches[1]; //Will match what's in the first set of brackets, I.e the href. 
```

请注意，此模式并不稳健。它不考虑空格、不同种类的引号、换行符和许多其他东西。HTML 解析器将解决所有这些问题。

# xml - eclipselink moxy xpath - 无法在名称中带有破折号的元素上使用 xml-path 表达式

> ID：10435322
> 
> 赞同：1
> 
> 时间：2012-05-03T16:15:03.493
> 
> 标签：xml, xpath, mapping, eclipselink, moxy

我目前在一个项目中使用 moxy，但我遇到了一个找不到解决方案的问题。

我只使用 xml 映射文件将从客户端接收到的 xml 映射到我的 java 类。

我的问题是元素名称是“电子邮件”，就像这样：

example@gmail.com

在收到的 xml 中它是一个列表，所以我首先尝试像这样映射：

xml-element java-attribute="eMail" type="java.lang.String" xml-path="E-Mail/text()" container-type="java.util.List"

此表达式适用于相同类型的对象，但元素名称中没有破折号。

但在这种情况下它不起作用。（xml-path 表达式不起作用）。

我尝试了很多不同的表达方式，但我没有找到任何解决方案......

请问你能帮我吗？有人已经处理过这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:42:37.507

我不确定我是否完全理解您的问题，但我相信您在元素名称中有破折号时遇到了问题。下面是一个可能有帮助的例子。

**绑定.xml**

下面是 EclipseLink JAXB (MOXy) 的 XML 绑定文件的示例。`xml-path`到属性的映射包含`email`一个破折号`E-Mail/text()`。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum10435322">
    <java-types>
        <java-type name="Root">
            <xml-root-element/>
            <java-attributes>
                <xml-element java-attribute="email" xml-path="E-Mail/text()"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**根**

下面是我将用于此示例的域对象。它不包含任何注释。

```
package forum10435322;

import java.util.List;

public class Root {

    private List<String> email;

    public List<String> getEmail() {
        return email;
    }

    public void setEmail(List<String> email) {
        this.email = email;
    }

} 
```

**jaxb.properties**

为了将 MOXy 指定为 JAXB 提供程序，您需要添加一个`jaxb.properties`在与域类相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory = org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面是一些演示代码，演示如何`JAXBContext`使用 MOXy 的外部元数据引导 a。

```
package forum10435322;

import java.io.File;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "forum10435322/bindings.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Root.class}, properties);

        File xml = new File("src/forum10435322/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller(); 
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输入.xml/输出**

以下是此示例的输入和输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <E-Mail>jane.doe@example.com</E-Mail>
   <E-Mail>jdoe@example.org</E-Mail>
</root> 
```

# ruby-on-rails - 捆绑器如何工作？

> ID：10435329
> 
> 赞同：6
> 
> 时间：2012-05-03T16:15:16.010
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, bundler

这个问题是关于捆绑器、rubygems 以及它如何确定我正在调用的方法。它很长，所以请多多包涵。

据我了解，Bundler 是一个用于管理 ruby​​ 的 gem 的依赖管理工具。它安装所有 gem 及其在`Gemfile`.

我想问的问题最好用一个例子来说明。所以在这里--> 在我的 Rails 应用程序中，我在控制器中执行此操作：-

```
module SurveyorControllerCustomMethods
  def create
    super
  end
end
class SurveyorController < ApplicationController
   include Surveyor::SurveyorControllerMethods
end 
```

在这里，我正在做两件事：

1.  包括`SurveyorControllerMethods`来自测量师宝石。
2.  因为我在这里使用了*super*，所以它会调用可以正常工作`create`的方法， `SurveyorControllerMethods`但我不明白。

并且 gem 安装在

```
$ bundle show surveyor
/home/gaurish/.rvm/gems/ruby-1.9.3-p194/gems/surveyor-0.22.0 
```

令人惊讶的是，红宝石中不存在[`$LOAD_PATH`](https://gist.github.com/2586848)。所以问题是：

1.  它是如何工作的？
2.  使用 bundler 安装 gem，安装过程中幕后发生了什么？
3.  有一些 gem `jquery-rails`，我们甚至不需要在我们的代码中包含/调用它们，然而，jQuery JavaScript 文件会自动包含在内。我知道它不是魔法，那么它是如何工作的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:30:38.777

它们的关键实际上在于如何开箱即用地设置 Rails。这也是 Rails 在大型项目上起步如此缓慢的原因之一。 [1]

在 boot.rb 你会发现：

```
require 'bunder/setup' 
```

在 application.rb 的顶部，您会发现：

```
Bundler.require(:default, :development) 
```

最后一个方法调用会回顾您的 Gemfile，然后迭代给定组中的*所有*`:default`gem（以及`:development`上面的）。然后，它会尝试确定应该加载的默认文件是什么，通常是 gem 名称，但也可以通过`:require`选项指定。Bundler 也有一些内置的命名约定例外，例如处理“-”而不是“_”。

然后，Bundler 只加载 gem 的主文件，然后（通常）加载 gem 中的文件。

该`'bundler/setup'`文件执行`Bundler.setup`，它负责加载路径。它`$LOAD_PATH`为每个宝石添加（取消移位）。有关这些加载路径应该是什么的实际信息来自 ruby​​gems。

看看源代码：

[https://github.com/carlhuda/bundler/blob/master/lib/bundler/setup.rb](https://github.com/carlhuda/bundler/blob/master/lib/bundler/setup.rb) https://github.com/carlhuda/bundler/blob/master/lib/bundler/runtime.rb

[1]：当你开始一个新的 Rails 项目时，你可能会发现如果你删除 Bundler.require 行并且只在需要的时候需要 gems，它不会随着时间的推移变得如此缓慢。

# amazon-s3 - 自动为整个 S3 存储桶设置缓存控制（使用存储桶策略？）

> ID：10435334
> 
> 赞同：158
> 
> 时间：2012-05-03T16:15:38.393
> 
> 标签：amazon-s3, s3fs

我需要为整个 s3 存储桶设置缓存控制标头，包括现有文件和未来文件，并希望在存储桶策略中执行此操作。我知道我可以编辑现有的，如果我自己上传它们，我知道如何在放置时指定它们，但不幸的是，上传它们的应用程序无法设置标题，因为它使用 s3fs 将文件复制到那里。

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2015-03-26T14:13:52.110

现在有 3 种方法可以完成此操作：**通过 AWS 控制台**、**通过命令行**或**通过 s3cmd 命令行工具**。

* * *

## AWS 控制台说明

这是现在推荐的解决方案。这是直截了当的，但可能需要一些时间。

*   登录 AWS 管理控制台
*   进入 S3 存储桶
*   按路径选择所有文件
*   从菜单中选择“更多”
*   选择“更改元数据”
*   在“Key”字段中，从下拉菜单中选择“Cache-Control” max-age=604800 输入（7 天）作为值
*   按“保存”按钮

（[感谢@biplob - 请在下面给他一些爱](https://stackoverflow.com/questions/10435334/set-cache-control-for-entire-s3-bucket-automatically-using-bucket-policies/47072736#47072736)）

* * *

## AWS 命令​​行解决方案

最初，当我创建这个存储桶策略时是不行的，所以我想出了如何使用 aws-cli 来完成它，而且它非常巧妙。在研究时，我在野外找不到任何例子，所以我想我会发布一些我的解决方案来帮助有需要的人。

**注意：默认情况下，aws-cli 仅复制文件的当前元数据，即使您指定了新元数据。**

要使用命令行上指定的元数据，您需要添加“--metadata-directive REPLACE”标志。这里有一些例子。

*对于单个文件*

```
aws s3 cp s3://mybucket/file.txt s3://mybucket/file.txt --metadata-directive REPLACE \
--expires 2034-01-01T00:00:00Z --acl public-read --cache-control max-age=2592000,public 
```

*对于整个存储桶（注意 --recursive 标志）：*

```
aws s3 cp s3://mybucket/ s3://mybucket/ --recursive --metadata-directive REPLACE \
--expires 2034-01-01T00:00:00Z --acl public-read --cache-control max-age=2592000,public 
```

我发现了一个小问题，如果你只想将它应用于特定的文件类型，你需要排除所有文件，然后包含你想要的文件。

*只有jpg和png：*

```
aws s3 cp s3://mybucket/ s3://mybucket/ --exclude "*" --include "*.jpg" --include "*.png" \
--recursive --metadata-directive REPLACE --expires 2034-01-01T00:00:00Z --acl public-read \
--cache-control max-age=2592000,public 
```

如果您需要更多信息，以下是手册的一些链接：

*   [http://docs.aws.amazon.com/cli/latest/userguide/using-s3-commands.html](http://docs.aws.amazon.com/cli/latest/userguide/using-s3-commands.html)
*   [http://docs.aws.amazon.com/cli/latest/reference/s3/cp.html#options](http://docs.aws.amazon.com/cli/latest/reference/s3/cp.html#options)

**已知的问题：**

```
"Unknown options: --metadata-directive, REPLACE" 
```

这可能是由过时的 awscli 引起的 - 请参阅[下面的@eliotRosewater 的回答](https://stackoverflow.com/a/40075537/1991663)

* * *

## S3cmd 工具

S3cmd 是“用于管理 Amazon S3 和 CloudFront 服务的命令行工具”。虽然这个解决方案需要一个 git pull 它可能是一个更简单和更全面的解决方案。

有关完整说明，[请参阅下面的 @ashishyadaveee11 的帖子](https://stackoverflow.com/a/35202296/1991663)

* * *

希望能帮助到你！

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2017-11-02T10:17:29.907

现在，可以从 AWS 控制台轻松更改它。

*   登录 AWS 管理控制台
*   进入 S3 存储桶
*   按路径选择所有文件
*   从菜单中选择“更多”
*   选择“更改元数据”
*   在“Key”字段中，从下拉菜单中选择“Cache-Control”
*   max-age=604800 输入（7 天）作为值
*   按“保存”按钮

执行所需时间取决于您的存储桶文件。如果您不小心关闭了浏览器，请从头开始重做。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-02-04T13:27:49.537

**脚步**

1.  `git clone https://github.com/s3tools/s3cmd`
2.  运行`s3cmd --configure` （您将被要求输入两个密钥 - 从您的确认电子邮件或您的亚马逊帐户页面复制并粘贴它们。复制它们时要小心！它们区分大小写，必须准确输入，否则您将不断收到有关无效的错误签名或类似的。请记住为`s3:ListAllMyBuckets`密钥添加权限，否则在测试访问时会`AccessDenied`出错。）
3.  `./s3cmd --recursive modify --add-header="Cache-Control:public ,max-age= 31536000" s3://your_bucket_name/`

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-02-01T21:53:06.393

如果我的声誉得分 > 50，我会发表评论。但这还不是（还）所以这是另一个完整的答案。

* * *

一段时间以来，我一直在努力解决这个问题。直到我找到并阅读了文档。在这里分享，以防它帮助其他人：

*   Amazon CloudFront 文档：[指定对象在 CloudFront 边缘缓存中的保留时间（过期）](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html#expiration-individual-objects)

最终可靠地为我工作的是这个命令。我选择了 1 秒的过期时间进行测试，以验证预期结果：

```
aws s3 cp \
  --metadata-directive REPLACE \
  --cache-control max-age=1,s-maxage=1 \
  s3://bucket/path/file \
  s3://bucket/path/file 
```

*   `--metadata-directive REPLACE``cp`在 S3 中修改现有文件的元数据时需要“ ”
*   `max-age`设置浏览器缓存年龄，以秒为单位
*   `s-maxage`设置 CloudFront 缓存，以秒为单位

* * *

同样，如果在上传到 S3 时在文件上设置这些 Cache-Control 标头值，则命令如下所示：

```
aws s3 cp \
  --cache-control max-age=1,s-maxage=1 \
  /local/path/file \
  s3://bucket/path/file 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-04T08:28:25.930

我认为您不能在存储桶级别指定此内容，但有一些解决方法可供您使用。

1.  **在 S3 上将**对象复制到自身**`cache-control`，为复制操作设置适当的标头。**

***   **在文件的 url 中指定响应标头**。您需要使用预签名的 url 才能工作，但您可以在查询字符串中指定某些响应标头，包括`cache-control`和`expires`。有关可用选项的完整列表，请参阅：[http ://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectGET.html?r=5225](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectGET.html?r=5225)** 

 *** * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-06-03T21:35:46.027

您始终可以在 S3 上的 PUTOBJECT 上使用触发器配置 lambda，该 lambda 将简单地更改刚刚放置的此特定对象的标头。

然后你可以最后一次运行上面提到的复制命令，所有的新对象都将被 lambda 修复。

## 更新：

这是一个很好的起点：[https ://www.aaronfagan.ca/blog/2017/how-to-configure-aws-lambda-to-automatically-set-cache-control-headers-on-s3-objects /](https://www.aaronfagan.ca/blog/2017/how-to-configure-aws-lambda-to-automatically-set-cache-control-headers-on-s3-objects/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-31T17:38:29.473

存储桶策略是授予存储桶和存储在其中的对象的权限，因此这条路不会产生您正在寻找的结果。其他答案使用自动方式修改对象元数据，但如果您愿意将存储桶移到 CloudFront 后面，也可以使用 Lambda@Edge。

使用 Lambda@Edge，您可以为每个客户端请求运行任意代码，它可以更改从源（本例中为 S3 存储桶）返回的标头。它需要更多的配置并且需要一些钱，但这里是解决方案的蓝图：

*   创建 CloudFront 分配
*   添加 S3 存储桶作为源
*   创建一个修改响应头的 lambda 函数
*   使用 CloudFront 分配的 URL 访问文件

AWS 文档有[一个](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-examples.html#lambda-examples-overriding-response-header)如何修改响应标头的示例。如果您碰巧使用 Terraform 来管理基础设施，我已经写[了一篇文章](https://advancedweb.hu/how-to-use-lambda-edge-with-terraform/)如何做到这一点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-16T21:11:45.393

对于那些试图使用丹的答案并得到错误的人：

> “未知选项：--元数据指令，替换”

我遇到了这个问题，问题是我安装了 awscli 使用

> sudo apt-get 安装 awscli

这安装了缺少 --metadata-directive 命令的旧版本的 awscli。所以我用 sudo apt-get remove awscli 来删除它。

然后按照亚马逊的程序重新安装：http: [//docs.aws.amazon.com/streams/latest/dev/kinesis-tutorial-cli-installation.html](http://docs.aws.amazon.com/streams/latest/dev/kinesis-tutorial-cli-installation.html)

唯一的区别是我不得不使用 sudo -H 因为其他人也可能遇到的权限问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-11-04T16:26:15.437

想我会分享我的用法，因为以前的答案误导了我。AWS CLI 只有两个命令：

```
aws s3 cp s3://bucketname/ s3://bucketname/ --cache-control max-age=12345 --recursive 
```

这就是已经存在的东西，使用[cp](https://docs.aws.amazon.com/cli/latest/reference/s3/cp.html)。这样的设置`--cache-control`是一个有效的选项。

如果您正在上传，您不妨[sync](https://docs.aws.amazon.com/cli/latest/reference/s3/sync.html)，其命令是：

```
aws s3 sync z:\source\folder s3://bucketname/folder --delete --cache-control max-age=12345 --acl public-read 
```

请注意，我根本不使用`--metadata-directive`它，因为使用它你会丢失你猜测的内容类型，这将使​​诸如图像之类的东西不会被浏览器显示，而是会立即下载。我的解决方案保留了猜测的值，并允许使用同步进行猜测。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-07T19:54:41.767

以前的答案要么与问题不真正对应，要么产生成本（Lambda）。

您应该做的是在上传文件（PutObject 或 MultiPartUpload）时设置“缓存控制”标头。

根据您的语言，它可能会有所不同。文档不是很清楚（大概是 AWS 希望您用其他解决方案向他们付款）。

PHP的一个例子：

```
$uploader = new MultipartUploader ($s3,$filename,[
    ...,
    'before_initiate' => function(\Aws\Command $command){
        $command['CacheControl'] = 'max-age=31536000,public';
    },
...
]); 
```

Go 的另一个例子：

```
cc := "max-age=31536000,public"
input := &s3.PutObjectInput{
    ...,
    CacheControl: &cc,
} 
```**

# jquery - jquery正则表达式否定字母

> ID：10435335
> 
> 赞同：1
> 
> 时间：2012-05-03T16:15:40.473
> 
> 标签：jquery, regex

我正在尝试验证联系号码字段，我不允许任何字母。

## **JS文件**

```
$(document).ready(function() {
    //var regex = /[^\d]/;
    var regex = /[^a-zA-Z]/;
    $('#contact_num').blur(function() {
        if(regex.test($(this).val()) == true) {
            alert('valid');
        } else {
            alert('invalid');
        }
    });
});​ 
```

## 文件

```
Contact Num: <input type="text" id="contact_num" />​ 
```

如果字母带有数字，我的正则表达式似乎返回有效，这必须是错误的。

[**演示**](http://jsfiddle.net/PYwLJ/1/)

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:19:05.220

尽管您非常接近，但您只检查一个字符。您需要侧面的锚字符。

```
var regex = /^[^a-zA-Z]+$/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:22:49.013

如果您不仅允许字母但允许任何其他字符，那么您应该反转您的正则表达式和您的条件：

```
var regex = /[a-zA-Z]/;
...
if( !regex.test($(this).val()) ) { 
```

[http://jsfiddle.net/PYwLJ/3/](http://jsfiddle.net/PYwLJ/3/)

# oracle - Pragma inline 没有显示出显着的改进？

> ID：10435341
> 
> 赞同：4
> 
> 时间：2012-05-03T16:15:59.807
> 
> 标签：oracle, plsql, oracle11gr2

我已经了解了`PRAGMA INLINE`11g 功能，但我无法区分它实际上是如何优化我的代码的。

我写了一段代码。

```
create or replace package test12
is 

procedure getdata (p_job    IN emp.job%TYPE
                  ,p_total OUT number);

end test12;
/

create or replace package body  test12
is 

PROCEDURE total(p_empno IN EMP.EMPNO%TYPE
               ,p_total OUT integer)

IS

BEGIN

 select sal into p_total from emp where empno=p_empno;

END total;

procedure getdata (p_job    IN emp.job%TYPE
                  ,p_total OUT number)
IS 

type cur is ref cursor;
v_cur cur;
v_emp emp.empno%TYPE;
v_total integer:=0;
BEGIN

for i in 1..100000 
loop
 open v_cur for select empno from emp where job=p_job;
  loop
  fetch v_cur into v_emp;
  exit when v_cur%notfound;
  --PRAGMA INLINE(total,'YES');
  total(v_emp,v_total);
  p_total:=p_total+v_total;
  end loop;
 close v_cur;
 end loop;
END getdata;                 

end test12;
/

declare
v_total integer;
v_start integer;
v_end integer;
begin
v_start:=DBMS_UTILITY.GET_TIME;
test12.getdata('CLERK',v_total);
v_end :=DBMS_UTILITY.GET_TIME;
v_total:=v_end-v_start;
dbms_output.put_line('time is '||v_total);
end;
/ 
```

现在，如果我在没有`pragma inline`它的情况下跑步会给我以下时间

```
First Run : time is 3573
Second Run: time is 3571
Third Run : time is 3554 
```

现在，如果我运行`pragma inline`它会给我以下时间

```
First Run : time is 3471
Second Run: time is 3489
Third Run : time is 3482 
```

但是在这里我没有看到两者之间有任何显着差异。这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:27:59.203

仅调用该过程所花费的时间几乎为 0。这里几乎没有什么可优化的。我很惊讶你看到任何改进。99.9% 的执行时间可能花在 SQL 上，而不是 PL/SQL。

```
--Procedure that does almost nothing
create or replace procedure total(p_empno IN number, p_total OUT integer) is
begin
    p_total := p_empno + 1;
end;
/

--Disable optimiziations
alter session set PLSQL_OPTIMIZE_LEVEL = 0;

--Only time the procedure calls
declare
    v_test_out number;
    v_start number;
    v_end number;
begin
    v_start:=DBMS_UTILITY.GET_TIME;

    for i in 1 .. 100000 loop
        total(i, v_test_out);
    end loop;

    v_end :=DBMS_UTILITY.GET_TIME;
    dbms_output.put_line('time is '||to_char(v_end-v_start));
end;
/

time is 5 
```

# javascript - 为什么 Jquery 输入函数不返回完整的 url？

> ID：10435343
> 
> 赞同：0
> 
> 时间：2012-05-03T16:16:01.703
> 
> 标签：javascript, jquery

我正在尝试对我上传的图像进行预览。我写了一个函数，它工作正常，但它不返回本地选择的文件的完整 url。

```
function imagePreview(pid, input){

$("#"+pid).attr("src", input.value);
$("#"+pid).fadeIn('slow');
} 
```

html是

```
<input type="file" class="round sinput" onchange="imagePreview('img1', this);" name="f_pic" id="f_pic" /> 
```

此函数加载 image.jpg 而不是 c:\website\image.jpg （显示图像所需的完整路径）

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:19:09.367

您无法知道用户选择的本地文件的绝对路径。出于安全原因，这是禁止的。

# c# - WinRT 中的文件加密

> ID：10435347
> 
> 赞同：2
> 
> 时间：2012-05-03T16:16:34.257
> 
> 标签：c#, windows-8, windows-runtime

我目前正在开发需要文件加密的 Metro 应用程序 (C#/XAML)。在 Winforms 和 WPF 中，我只需要写

```
System.IO.File.Encrypt("file.txt"); 
```

如何在 WinRT 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:48:42.607

首先，我永远不会使用 System.IO.File.Encrypt 来加密文件。
其次，我将查看以下文档：[Windows Runtime API第三，我将使用](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)[此处](http://dotnetspeak.com/index.php/2011/11/encrypting-and-decrypting-data-in-winrt-2/)和[此处](http://lukhezo.com/2011/11/06/encrypting-files-in-net-using-the-advanced-encryption-standard-aes/)
描述的类似方法加密文件

```
public MainWindow()
{
   InitializeComponent();

   byte[] encryptedPassword;

   // Create a new instance of the RijndaelManaged
   // class.  This generates a new key and initialization 
   // vector (IV).
   using (var algorithm = new RijndaelManaged())
   {
      algorithm.KeySize = 256;
      algorithm.BlockSize = 128;

      // Encrypt the string to an array of bytes.
      encryptedPassword = Cryptology.EncryptStringToBytes("Password", 
                                                    algorithm.Key, algorithm.IV);
   }

   string chars = encryptedPassword.Aggregate(string.Empty, 
                                         (current, b) => current + b.ToString());

Cryptology.EncryptFile(@"C:\Users\Ira\Downloads\test.txt", @"C:\Users\Ira\Downloads\encrypted_test.txt", chars);

Cryptology.DecryptFile(@"C:\Users\Ira\Downloads\encrypted_test.txt", @"C:\Users\Ira\Downloads\unencyrpted_test.txt", chars);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:37:08.720

据我了解，WinRT 专为在沙箱中运行且无法直接访问文件系统的应用程序而设计。

您可能需要一个非 WinRT（例如 Win32 / .NET 桌面 API）服务来直接访问文件系统，并让 WinRT 应用程序与该服务通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:35:11.207

不幸的是，这需要在 WinRT 中做更多的工作。由于大多数函数都是异步的，因此您将需要更多样板代码，并且您将在流和`IBuffer`s 上而不是直接在文件上进行操作。加密类位于[`Windows.Security.Cryptography`](http://msdn.microsoft.com/en-us/library/windows/apps/br241404.aspx)命名空间中。

`IBuffer`可以在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/br241562.aspx)找到带有 an 的示例。

# android - Android TableView 或 ListView

> ID：10435348
> 
> 赞同：0
> 
> 时间：2012-05-03T16:16:34.907
> 
> 标签：android, list, view

嗨，
我想在 Android 中重新创建带有分段标题的 iOS TableView。我在 ListView 中使用部分适配器尝试了很多东西，但我似乎无法让它工作。
我可以在可滚动的 TableView 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:31:41.093

我认为您应该使用列表视图。

看看这个链接是否对你有帮助：

[带有部分/分隔符的 ListView](http://bartinger.at/listview-with-sectionsseparators/)

[ListView 提示和技巧 #2：划分您的 ListView](http://android.cyrilmottier.com/?p=440)

# sql-server-2008 - SQL Server 查询性能之谜

> ID：10435351
> 
> 赞同：1
> 
> 时间：2012-05-03T16:16:49.763
> 
> 标签：sql-server-2008, database-performance

我今天开的会议太多了，但我想我的脑部软件还在。在我努力提高某些查询的性能时，我遇到了以下谜团（表名和字段释义）：

```
SELECT X.ADId FROM
(
    SELECT DISTINCT A.ADId
    FROM P WITH (NOLOCK)
    INNER JOIN A WITH (NOLOCK) ON (P.ID = A.PId)
    INNER JOIN dbo.fn_A(16) AS VD ON (VD.DId = A.ADId)
    LEFT JOIN DPR ON (LDID = A.ADId)
    WHERE ((A.ADId = 1) OR ((HDId IS NOT NULL) AND (HDId = 1))) AND
           (P.PS NOT IN(5,7)) AND (A.ASP IN (2, 3))
) X
WHERE (dbo.fn_B(X.ADId, 16) = 1) 
```

正如您将看到的，内部查询的内容大多是不相关的。最初的重点是我想避免在每条记录上调用 fn_B()，因为它们包含 ADId 的重复值，所以我在内部做了一个 SELECT DISTINCT 然后过滤不同的记录。听起来很合理吧？

谜团从这里开始……

内部查询返回 NO RECORDS（对于指定的参数）。如果我注释掉“WHERE fn_B() = 1”，那么查询会在零时间内运行（并且不返回任何结果）。如果我把它放回去，那么查询需要 6-10 秒，再次没有返回任何结果。

这似乎超出了常识，或者至少超出了我的 SQL 常识:-) 如果内部查询没有返回数据，那么外部条件永远不应该被评估，对吧？

当然，我花时间检查了实际的执行计划，保存并非常仔细地比较了它们。它们是 99% 相同的，没有什么不寻常的地方，或者我认为是这样。

我玩弄了一些 CTE 以在第一个 CTE 中获取查询结果，然后将其传递给第二个 CTE，该 CTE 有一些条件保证不过滤任何记录，然后在所有 CTE 之外评估 fn_B() 调用，但行为正是相同。

此外，其他变体，例如使用旧查询（可能使用相同的值多次调用 fn_B()）具有相同的行为。如果我删除条件，那么我在零时间内没有任何记录。如果我把它放回去，那么 10 秒内没有记录。

有什么想法吗？

谢谢你的时间 ：-）

PS1：我尝试使用简单的查询重现 tempdb 上的情况，但我无法实现。它只发生在我的实际桌子上。PS2：这个查询是在另一个函数中调用的，所以将结果放在一个临时表中，然后进一步过滤它们也是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:52:22.710

我们将问题提交给了 Microsoft 对 SQL Server R2 的支持（我必须评论他们惊人的响应时间和整体服务程序）。我们给了他们一个重现问题的数据库副本，以及我们的解决方法，他们自己重现了它，几天后我们得到了答案：

> 我已经分析了这两个执行计划，请问这种解决方法是否可以在生产中使用？其背后的主要原因是函数不像索引那样具有统计信息。而这种数据的缺乏使得优化器有时会选择一个不太好的执行计划。如果您已经找到解决方法，最好实施此方法。我们尝试的索引更改并没有改善执行。

这是一种非常外交的方式来表达“是的，优化器将您的查询弄乱了，所以请使用解决方法”。如果你想称它为 bug，就称它为 bug，没关系。

只是为了记录，解决方法是将调用 fn_B() 放在查询的 SELECT 列表中，比 SELECT DISTINCT 高一级，然后根据 WHERE 条件过滤其结果。有点奇怪，但它的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:24:06.837

请注意，优化器不会以与您相同的方式读取查询。即使您认为应该执行某个顺序，或者短路可能是最有意义的，优化器仍然可能以您可能不期望的顺序评估 CTE / 子查询。您可以尝试的解决方法是将第一个查询选择到 #temp 表中，然后在 #temp 表上运行函数过滤器。这应该强制评估顺序，即使它完全不直观且不那么优雅。

**编辑**

此外，虽然它可能执行得较慢，但我很好奇如果您在没有 NOLOCK 或 RCSI 的情况下运行查询会发生什么。不同的锁定语义可能会绊倒优化器。

# ruby-on-rails - 使用乘客部署 Rails 应用程序

> ID：10435354
> 
> 赞同：0
> 
> 时间：2012-05-03T16:16:56.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, apache, passenger

我尝试使用乘客和 apache 部署我的 rails 应用程序，但收到以下错误消息。

```
/root/finalProject/app/controllers/static_pages_controller.rb:6: syntax error, unexpected ':', expecting ')' @feed_items = current_user.feed.paginate(page: params[:page]) ^ /root/finalProject/app/controllers/static_pages_controller.rb:6: syntax error, unexpected ')', expecting kEND @feed_items = current_user.feed.paginate(page: params[:page]) ^ 
```

static_pages_controller.rb 的代码如下

```
class StaticPagesController < ApplicationController

  def home
    if signed_in?
      @micropost  = current_user.microposts.build
      @feed_items = current_user.feed.paginate(page: params[:page])
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:32:29.543

尝试`ruby -v`在命令行输入。我敢打赌您使用的是 1.8，它不允许您在此处尝试使用的哈希语法。试试这个：

```
@feed_items = current_user.feed.paginate(:page => params[:page]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:32:44.413

您在生产和开发中是否有相同的 ruby​​ 版本？

尝试改变

```
@feed_items = current_user.feed.paginate(page: params[:page]) 
```

至

```
@feed_items = current_user.feed.paginate(:page=>params[:page]) 
```

# excel - 将单元格值格式化为电话号码格式

> ID：10435355
> 
> 赞同：3
> 
> 时间：2012-05-03T16:16:57.207
> 
> 标签：excel, vba

我在 Sheet1 的 A 列中列出了电话号码。目前它们没有任何格式，存储为：1112223333

我想将它们转换为：111.222.3333

我试过了：

```
Format(Worksheets("Sheet1").Range("A1").Value, "###.###.####") 
```

这给了我“1112223333 ..”

编辑：当我尝试将其格式化为：

```
Format(Worksheets("Sheet1").Range("A1").Value, "(###) ###-####") 
```

它工作得很好：（111）222-3333

它只是我遇到问题的“111.222.3333”格式。我在这里错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T16:43:58.753

句点需要转换为文本，否则将被读取为小数点：

```
Worksheets("Sheet1").Range("A1").NumberFormat = "###"".""###"".""####" 
```

# sql - 字段级别的访问唯一性

> ID：10435357
> 
> 赞同：2
> 
> 时间：2012-05-03T16:17:11.857
> 
> 标签：sql, ms-access

我有两张桌子：第一张是 TEAMS

```
-----------------------------------
|id | teamID | teamName | ....... | 
----------------------------------- 
```

第二个是游戏

```
-----------------------------------------
| id | team1ID(FK) | team2ID(FK) | Date |
----------------------------------------- 
```

我需要防止在字段中插入相同的 ID`team1ID, team2ID`

我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:36:57.020

在 Microsoft Access 2007+ 中，您可以设置表级检查约束。

在设计视图中打开表格，然后单击设计功能区选项卡中的“属性表”。

然后在属性表中添加验证规则。在您的情况下，它将是 [team1ID] <> [team2ID]

# c# - 如何防止错误：System.FormatException：输入字符串格式不正确

> ID：10435359
> 
> 赞同：0
> 
> 时间：2012-05-03T16:17:14.197
> 
> 标签：c#, asp.net

只要数据库返回结果集，我的代码就可以正常工作。当它什么都不返回时，它会中断并给我以下错误：

```
System.FormatException: Input string was not in a correct format. 
```

这是我的代码：

```
DataTable data = GeneralFunctions.GetData( query );
object sumObject;
sumObject = data.Compute( "Sum(Minutes_Spent)", "" );
if ( reportType == 1 )
{
    RepeaterPCBillable.DataSource = data;
    RepeaterPCBillable.DataBind();
    LabelPCBillable.Text = ParseTime( int.Parse( sumObject.ToString() ) ) == null
        ? ParseTime( int.Parse( sumObject.ToString() ) )
        : ""; // ERROR HERE
}
else
{
    RepeaterDTSTBillable.DataSource = data;
    RepeaterDTSTBillable.DataBind();
    LabelDTSTBillable.Text = ParseTime( int.Parse( sumObject.ToString() ) ) == null
        ? ParseTime( int.Parse( sumObject.ToString() ) )
        : "";
} 
```

解析时间：

```
protected string ParseTime ( int TotalMinutes )
{
    int hours = TotalMinutes / 60;
    int minutes = TotalMinutes % 60;

    if ( hours == 0 )
    {
        return String.Format( "{0} minutes", minutes );
    }
    else if ( hours == 1 )
    {
        return String.Format( "{0} hour and {1} minutes", hours, minutes );
    }
    else if ( hours > 1 )
    {
        return String.Format( "{0} hours and {1} minutes", hours, minutes );
    }
    else
    {
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:20:04.797

为什么不添加以下检查：

```
if (data.Rows.Count > 0)
{
   // do your stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:22:02.253

```
using (DataTable data = GeneralFunctions.GetData(query))
{
    if (data != null && data.Rows.Count > 0)
    {
        object sumObject;
        sumObject = data.Compute("Sum(Minutes_Spent)", "");
        if (reportType == 1)
        {
            RepeaterPCBillable.DataSource = data;
            RepeaterPCBillable.DataBind();
            LabelPCBillable.Text = ParseTime(int.Parse(sumObject.ToString())) == null
                ? ParseTime(int.Parse(sumObject.ToString()))
                : "";
        }
        else
        {
            RepeaterDTSTBillable.DataSource = data;
            RepeaterDTSTBillable.DataBind();
            LabelDTSTBillable.Text = ParseTime(int.Parse(sumObject.ToString())) == null
                ? ParseTime(int.Parse(sumObject.ToString()))
                : "";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:22:16.017

异常究竟发生在哪里？在这段代码的哪一行？

我的疯狂猜测是，在没有结果的情况下，Compute() 函数为其第一个 Minutes_Spent 值获取一个空字符串的输入，它无法解析为整数。

解决方案可能是在运行 Compute() 之前对包含至少一行的结果集进行检查。如果有零行，请提供一些默认值，例如零或“（无结果）”以显示。

# python - Python BeautifulSoup - 从页面获取内部链接

> ID：10435363
> 
> 赞同：0
> 
> 时间：2012-05-03T16:17:21.613
> 
> 标签：python, web-crawler, beautifulsoup

我有一个基本循环来查找我用 urllib2.urlopen 检索到的页面上的链接，但是我试图只关注页面上的内部链接..

有什么想法可以使我的以下循环仅获取同一域上的链接吗？

```
for tag in soupan.findAll('a', attrs={'href': re.compile("^http://")}): 
                webpage = urllib2.urlopen(tag['href']).read()
                print 'Deep crawl ----> ' +str(tag['href'])
                try:
                    code-to-look-for-some-data...

                except Exception, e:
                    print e 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:27:48.040

```
>>> import urllib
>>> print urllib.splithost.__doc__
splithost('//host[:port]/path') --> 'host[:port]', '/path'. 
```

如果主机相同或主机为空（用于相对路径），则 url 属于同一主机。

```
for tag in soupan.findAll('a', attrs={'href': re.compile("^http://")}):

            href = tag['href']
            protocol, url = urllib.splittype(href) # 'http://www.xxx.de/3/4/5' => ('http', '//www.xxx.de/3/4/5')
            host, path =  urllib.splithost(url)    # '//www.xxx.de/3/4/5' => ('www.xxx.de', '/3/4/5')
            if host.lower() != theHostToCrawl and host != '':
                continue

            webpage = urllib2.urlopen(href).read()

            print 'Deep crawl ----> ' +str(tag['href'])
            try:
                code-to-look-for-some-data...

            except:
                import traceback
                traceback.print_exc() 
```

因为你这样做

```
'href': re.compile("^http://") 
```

不会使用相对路径。就像

```
<a href="/folder/file.htm"></a> 
```

也许根本不使用 re ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:41:35.020

Some advice for your crawler: Use mechanize in combination with BeautifulSoup, that will simplify a lot your task.

# powershell - 加入现有 NLB 集群

> ID：10435376
> 
> 赞同：4
> 
> 时间：2012-05-03T16:18:11.537
> 
> 标签：powershell, nlb

我一直在尝试编写一个 powershell 程序来检查集群是否存在。如果没有，那么它会创建它并将自己添加到其中。如果另一台计算机唤醒，它会检查集群是否存在，如果存在，则将自己添加到集群中。

我在尝试从集群 IP 地址获取对集群对象的引用时遇到问题。每个节点都知道它的地址和集群地址。我想避免每个节点都有其集群中所有其他节点的列表。

我发现我需要查看非集群 IP 地址才能让-nlbcluster 工作。指定集群 ip 地址只是错误。

有什么办法可以做到这一点，而不必在每次从集群中添加或删除节点时更新每个节点上的这个列表。我想我还想避免节点唤醒并且必须轮询“主”列表中的每台机器以查找已启动的机器以将其自身添加到集群的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:39:16.043

这有帮助吗？我前一阵子做了，但从来没有机会完全测试它：

```
#Add a new node to NLB cluster
#Tested with Windows Server 2008 R2 only
#Requires WSManCredSSP Server Role Enabled on cluster Host
Function join-NlbCluster {
    Param(
        [Parameter(Mandatory=$true)]
        $clusterHostname,
        [Parameter(Mandatory=$true)]
        $newNodename,
        [Parameter(Mandatory=$true)]
        $newNodeinterfaceName,
        [Parameter(Mandatory=$true)]
        $userName,
        [Parameter(Mandatory=$true)]
        $password
        )
    Write-Verbose "Verifiying if the remote node has NLB installed"
    If (!((Get-OSFeature -computerName $newNodename -featureName NLB).Installed)) {
        Write-Error "NLB feature is not installed on $newNodename. Cannot continue."
        return $false
    }
    $cmdBlock = "Import-Module networkLoadBalancingClusters
    `$nlbCluster = Get-nlbCluster -HostName $clusterHostName
    if (`$nlbCluster) {
        `$newNode = Add-NlbClusterNode -InputObject `$nlbCluster -NewNodeName $newNodename -NewNodeInterface `"$newNodeinterfaceName`"
        if (`$newNode) {
            Write-Host `"New node is added to cluster`"
            return `$newNode
        } else {
            Write-Host `"Error Creating the NLB Cluster`"
            return `$false
        }
    } else {
        Write-Host `"No NLB cluster found on $clusterHostname`"
        return `$false
    }"

    Write-Verbose $cmdBlock
    $scriptBlock = $ExecutionContext.InvokeCommand.NewScriptBlock($cmdBlock)
    try {
        Write-Verbose "Creating new NLB Cluster"
        Invoke-Command -ComputerName $clusterHostName -ScriptBlock $scriptBlock -HideComputerName -Authentication Credssp -Credential (Get-PSCredential -userName $userName -Password $password)
    }
    catch {
        Write-Verbose $_
        return $false
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:37:26.400

以下脚本可以在集群中的所有节点上运行，如果集群不存在则创建它，否则只需将当前计算机添加到现有集群。您需要做的就是确保集群中的所有计算机都具有同名的专用卡。在下面的示例中，网卡被命名为“NLB”。

```
Import-Module ServerManager

# Interface cards should be named the same and have a fixed IP
$interfaceName = "NLB"
$clusterName = "NLB-Cluster"
$clusterIpAddress = "1.2.3.0"
$clusterSubnet = "255.0.0.0"

# Install Network Load Balancing and Tools
Write-Host "Install Network Load Balancing and Tools"
Add-WindowsFeature NLB, RSAT-NLB
Import-Module NetworkLoadBalancingClusters

# If the cluster hasn't been created yet then create it
if (!(Get-NlbCluster -HostName $clusterIpAddress -ErrorAction SilentlyContinue))
{
    Write-Host "Creating NLB Cluster: $clusterName" -ForegroundColor yellow 

    # Create Cluster (default unicast)
    New-NlbCluster -InterfaceName $interfaceName -ClusterName $clusterName -ClusterPrimaryIP $clusterIpAddress -SubnetMask $clusterSubnet 

    # Remove defaults
    Write-Host "Removing default port rules" -ForegroundColor yellow 
    Get-NlbClusterPortRule | Remove-NlbClusterPortRule -Force

    # Create port rules
    Get-NlbCluster | Add-NlbClusterPortRule -StartPort 80 -EndPort 80 -Protocol TCP -Affinity None | Out-Null
    Get-NlbCluster | Add-NlbClusterPortRule -StartPort 443 -EndPort 443 -Protocol TCP -Affinity None | Out-Null 
}
else
{
    Get-NlbCluster 
}

# if this node isn't already a member of a cluster then add it
if(!(Get-NlbClusterNode -HostName $env:COMPUTERNAME))
{
    # Add node to cluster
    Write-Host "Adding node to cluster: $clusterName" -ForegroundColor yellow 
    Get-NlbCluster -HostName $clusterIpAddress | Add-NlbClusterNode -NewNodeName $env:COMPUTERNAME -NewNodeInterface $interfaceName
}
else
{
    Get-NlbClusterNode
} 
```

# git - JGit：遍历 repos 时如何获取分支

> ID：10435377
> 
> 赞同：8
> 
> 时间：2012-05-03T16:18:16.310
> 
> 标签：git, branch, commit, traversal, jgit

缺少的 JGit 文档似乎没有说明如何在使用 RevWalk 时使用/检测分支。

[这个问题](https://stackoverflow.com/questions/9039558/jgit-retrieve-branch-on-which-a-commitid-was-made)说的差不多。

所以我的问题是：如何从 RevCommit 中获取分支名称/ID？或者我如何事先指定要遍历的分支？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T00:24:39.830

通过循环分支找到了更好的方法。

我通过调用循环遍历分支

```
for (Ref branch : git.branchList().call()){
    git.checkout().setName(branch.getName()).call();
    // Then just revwalk as normal.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T19:35:24.963

查看 JGit 的当前实现（参见[它的 git repo](http://git.eclipse.org/c/jgit/jgit.git/)和它的[RevCommit](http://git.eclipse.org/c/jgit/jgit.git/tree/org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommit.java)类），我没有找到与“ [Git：查找提交来自哪个分支](https://stackoverflow.com/questions/2706797/git-finding-what-branch-a-commit-came-from)”中列出的等效内容。
IE：

```
git branch --contains <commit> 
```

仅实现了一些选项`git branch`（如 中[`ListBranchCommand.java`](http://git.eclipse.org/c/jgit/jgit.git/tree/org.eclipse.jgit/src/org/eclipse/jgit/api/ListBranchCommand.java)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:20:49.537

可以使用以下代码通过提交获取“来自”分支：

```
/**
     * find out which branch that specified commit come from.
     * 
     * @param commit
     * @return branch name.
     * @throws GitException 
     */
    public String getFromBranch(RevCommit commit) throws GitException{
        try {
            Collection<ReflogEntry> entries = git.reflog().call();
            for (ReflogEntry entry:entries){
                if (!entry.getOldId().getName().equals(commit.getName())){
                    continue;
                }

                CheckoutEntry checkOutEntry = entry.parseCheckout();
                if (checkOutEntry != null){
                    return checkOutEntry.getFromBranch();
                }
            }

            return null;
        } catch (Exception e) {
            throw new GitException("fail to get ref log.", e);
        }
    } 
```

# html - 我必须设置容器的高度吗？

> ID：10435378
> 
> 赞同：1
> 
> 时间：2012-05-03T16:18:19.727
> 
> 标签：html, css

我有这个代码：

```
#container {
    position:relative;
    width:760px;    

    margin-left: auto;
    margin-right: auto;
    margin-top: 10px;

    border: 1px solid #cdcdcd;  
}

#sidebar {
    float:left;
    width: 200px;
    background:red;
}

#wrapper {
    float:left;
    width:460px;
background:blue; 
```

}

和这个 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>Example.com</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
    </head>
    <body>
        <div id="container">
            <div id="sidebar">
                        LEFT
            </div>

            <div id="wrapper">
                RIGHT
            </div>          
        </div>  
    </body>
</html> 
```

我看到容器没有高度......我必须设置它吗？我想根据内部 DIV 的高度来解释高度，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:21:56.940

您不必设置高度，只需添加：

```
<div style="clear: both;"></div> 
```

直接在您浮动的任何 div 下方。

* * *

在你的情况下，你可以这样做：

只需将其添加到您的 CSS 文件中。

```
.clear {
  clear: both;
} 
```

并更新您的 HTML 文件以匹配

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>Example.com</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
    </head>
    <body>
        <div id="container">
            <div id="sidebar">
                        LEFT
            </div>

            <div id="wrapper">
                RIGHT
            </div>    
            <div class="clear"></div>      
        </div>  
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:23:26.843

发生这种情况是因为您使用了`float:left`. 一种解决方案是添加一个`clear:both`div，如下所示：

CSS：

```
.clear {
    clear: both;
} 
```

HTML：

```
<div id="container">
    <div id="sidebar">LEFT</div>
    <div id="wrapper">RIGHT</div>
    <div class="clear"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:37:22.047

给容器额外的 CSS

```
overflow: hidden; 
```

这将在没有额外标记的情况下破坏浮动
（不适用于内部的 box-shadow）

# iphone - 如何删除特定的子视图？

> ID：10435379
> 
> 赞同：20
> 
> 时间：2012-05-03T16:18:33.123
> 
> 标签：iphone, objective-c, subview

我已将子视图（ViewController）添加到我的 ViewController：

```
Location *location = [[Location alloc] initWithNibName:@"Location" bundle:[NSBundle mainBundle]];
[self.subView addSubview:location.view]; 
```

我以后如何删除这个子视图？

我知道删除所有子视图是：

```
for (UIView *subview in [self.view subviews]) {

  [subview removeFromSuperview];

} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-03T16:30:58.543

**快速而肮脏：**给您的视图一个标签，以便您以后识别它：

```
Location *location = [[Location alloc] initWithNibName:@"Location" bundle:[NSBundle mainBundle]];
UIView *viewToAdd = location.view;
viewToAdd.tag = 17; //you can use any number you like
[self.view addSubview:viewToAdd]; 
```

然后，要删除：

```
UIView *viewToRemove = [self.view viewWithTag:17];
[viewToRemove removeFromSuperview]; 
```

* * *

一种**更简洁、更快、更易于阅读和维护**的替代方法是创建一个变量或属性来访问视图：

在界面中：

```
@property (nonatomic, weak) UIView *locationView; 
```

在实施中：

```
Location *location = [[Location alloc] initWithNibName:@"Location" bundle:[NSBundle mainBundle]];
UIView *viewToAdd = location.view;
self.locationView = viewToAdd;
[self.view addSubview:viewToAdd]; 
```

然后，要删除：

```
[self.locationView removeFromSuperview]; 
```

* * *

也就是说，请注意评论者关于使用其他 ViewController 的 View 的警告。如果您想这样做，请阅读*ViewController 包含。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T16:27:46.270

创建一个 ivar，它可以为您提供对新 viewController 或仅视图的引用。我会在这里寻找viewController

添加一个属性并合成它

```
// .h
@property (nonatomic, strong) Location *location;

// .m
@synthesize location = _location; 
```

现在，当您创建位置时，请设置 ivar

```
Location *location = [[Location alloc] initWithNibName:@"Location" bundle:[NSBundle mainBundle]];
self.location = location;

[self.subView addSubview:location.view]; 
```

现在稍后将其删除

```
[self.location.view removeFromSuperview]; 
```

* * *

## 边注

通常，像这样将视图控制器的视图添加到另一个视图中是一条痛苦的道路。有关这方面的一些简单阅读，请参阅[滥用 UIViewControllers](http://blog.carbonfive.com/2011/03/09/abusing-uiviewcontrollers/)

您的命名可能不太好，将其称为类似或类似的名称`Location`可能更合适。`LocationViewController`以这种方式一致的命名允许其他任何人（或未来的你）能够轻松地阅读和掌握这是一个 viewController 而无需打开标题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T16:32:47.217

您可以简单地为您的视图设置一个唯一标签来标识它。然后当你想删除它。使用该`viewWithTag:(NSInteger)tag`方法将其取回并仅删除此一个。

```
Location *location = [[Location alloc] initWithNibName:@"Location" bundle:[NSBundle mainBundle]];
location.tag = 8001; // 8001 is an exemple
[self.subView addSubview:location.view]; 
```

接着

```
UIView * v = [self.subView viewWithTag:8001];
if (nil != v) {
    [v removeFromSuperview];
} 
```

# typo3 - 删除 TYPO3 中的内容时出现空白页

> ID：10435380
> 
> 赞同：1
> 
> 时间：2012-05-03T16:18:34.580
> 
> 标签：typo3, backend

我最近将我的 TYPO3 安装从 Linux 迁移到 Windows 服务器。一切似乎都工作正常，除非我在后端编辑页面并从页面中删除内容，而不是在更改后刷新页面，它只显示一个空白页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:06:53.167

有几件事可能导致此错误。为了解决它

*   删除临时文件 ( `typo3conf/temp_*`)
*   检查您的 PHP/Apache 错误日志以获取任何提示
*   确保所有扩展都是最新的（在你的情况下它可能是 TemplaVoila）
*   清除后端所有缓存

# scala - Scala LMS 编写线性代数库

> ID：10435385
> 
> 赞同：6
> 
> 时间：2012-05-03T16:18:45.560
> 
> 标签：scala, linear-algebra

C++ 库 Eigen 给我留下了深刻的印象，它使用表达式模板在矩阵/向量计算中获得了巨大的加速。

我想在 scala 中克隆这个库。据我所知，scalas 类型系统还不够强大，无法做这样的事情，但它应该是可能的轻量级模块化登台 LMS。那里似乎有几个项目（Delight、虚拟化-lms 等）。就可靠性和性能而言，哪种类型的项目适合使用？

谢谢

编辑：我刚刚在 scala 2.10 中遇到了宏。也许这就是我想在这里使用的。

@om-nom-nom

重要部分在[http://eigen.tuxfamily.org/dox/TopicInsideEigenExample.html中有解释](http://eigen.tuxfamily.org/dox/TopicInsideEigenExample.html)

该示例解释了向量加法

```
u = v + w 
```

在（本机）C++ 中确实具有良好的性能，因为为添加创建了一个临时变量，并且这个变量被分配给 u 作为

```
for(int i = 0; i < size; i++) tmp[i] = v[i] + w[i];
for(int i = 0; i < size; i++) u[i] = tmp[i]; 
```

Eigen 使用模板元编程（在上面的链接中逐步解释）在编译时将其减少到

```
for(int i = 0; i < size; i++) u[i] = v[i] + w[i]; 
```

这显然更快，并且不需要额外的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:37:58.017

要正确回答这个问题，您需要问自己一些额外的问题：

1.  您真的确定带有模板的 C++ 代码比 Scala 代码执行得更好吗？Moderns 基准测试表明 Java 在矩阵求逆方面比 C++ 更快。这主要是由于虚拟机和硬件的改进。

2.  与处理非托管内存、悬空指针以及由于 C++ 编码导致的错误和错误增加的成本增加相比，拥有更快的矩阵工具可以获得多大的业务收益？

3.  如果问题可以在小规模的 Scala 中以令人满意的性能解决，并且差异只有在大规模时才变得显着，那么将问题（矩阵/向量乘法）划分为可以执行的不同任务是不合理的平行？

> 个人说明：我与 Joshua Bloch 的电子邮件讨论很少，他是有史以来最有影响力的 Java 开发人员之一，也是 Effective Java 的作者，他向我介绍了 Brian Goletz（Java Concurrency in Practice 的作者，在Java 世界）：[不是你父亲的冯诺依曼机器：现代硬件速成课程](http://www.azulsystems.com/events/javaone_2009/session/2009_J1_HardwareCrashCourse.pdf)

* * *

如果您得出结论认为好处是存在的并且这是显着的，并且将来您的问题规模不会增长，因此您不需要从多核执行中受益，那么您可能需要留在 C++ 中。在另一种情况下，请查看自 2.10-M3 起可用的 Scala 宏。

*额外：在使用在 VM 之上运行的语言（如 Java 或 C#）时，避免使用中间变量实际上没有意义。实际上，正如您正确指出的文章所描述的那样，JVM 如何使用 JIT 将 java 字节码转换为汇编程序存在一定的风险。您可以手动运行的许多优化已经被 JVM 应用了，如果您采取预防措施来声明方法和变量 FINAL，那么大多数这种推理都是无用的。*

# android - 更新活动的意图

> ID：10435396
> 
> 赞同：1
> 
> 时间：2012-05-03T16:19:32.520
> 
> 标签：android, android-intent, android-manifest

我在从我的活动的意图中获取 URI 时遇到问题。

这是清单中的代码：

```
<activity android:name=".ui.Library"
          android:label="@string/app_name"
          android:launchMode="singleTask" >
    <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data
                android:host="*"
                android:pathPattern=".*\\.xyzandroid"
                android:scheme="http" />
            <data
                android:host="*"
                android:pathPattern=".*\\.xyzandroid"
                android:scheme="https" />
            <data
                android:host="*"
                android:pathPattern=".*\\.xyzandroid"
                android:scheme="content" />
            <data
                android:host="*"
                android:pathPattern=".*\\.xyzandroid"
                android:scheme="file" />
        </intent-filter>
    </activity> 
```

问题是我在我的主要活动中只有当我的活动第一次开始时的意图：这意味着，例如，如果点击一个结尾为 .xyzandroid 的链接，我的活动开始，我得到了 URI。但是我的活动是从启动器开始的，如果有人在浏览器中单击链接后，我无法获取 URI。

我该如何解决这个问题？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:25:20.543

[塞尔文](https://stackoverflow.com/questions/10435396/renew-intent-of-an-activity/10447014#comment13469934_10435396)是对的，你只需要覆盖。

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    // getIntent() should always return the most recent
    setIntent(intent);
} 
```

# php - 尝试确定流是否处于活动状态php

> ID：10435402
> 
> 赞同：1
> 
> 时间：2012-05-03T16:20:19.947
> 
> 标签：php

我有 2 个音频流的链接

[http://82.35.172.112:88/broadwave.m3u?src=1&rate=1](http://82.35.172.112:88/broadwave.m3u?src=1&rate=1) 和 [http://86.28.144.85:88/broadwave.m3u?src=1&rate=1](http://86.28.144.85:88/broadwave.m3u?src=1&rate=1)

我需要找出正在播放的是哪一个，然后在页面上交换文本等

我尝试了各种不同的方法，使用 fopen、fsockopen、curl 进行检查，但没有任何效果

下面是我最近的尝试

```
$fp = fsockopen("82.35.172.112:88/broadwave.m3u?src=1&;rate=1", 88, $errno, $errstr, 30);
if (!$fp) {
echo "$errstr ($errno)<br />\n";;
}else{
echo "stream is there";

}
fclose($fp); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:54:01.330

这有效：

```
<?php

    ini_set('default_socket_timeout', 1);

    if(!$fp = @fopen("http://86.28.144.85:88/broadwave.m3u?src=1&rate=1", "r")) {
        echo "no stream";
    } else {
        echo "streaming";
        fclose($fp);
    }

?> 
```

# c# - 如何将方法参数插入自定义属性

> ID：10435403
> 
> 赞同：15
> 
> 时间：2012-05-03T16:20:26.793
> 
> 标签：c#, custom-attributes

我有一个名为 AuthoriseAttribute 的自定义属性，其构造函数如下所示：

```
public AuthoriseAttribute(int userId)
{
  .. blah
} 
```

`GetUserDetails()`这与调用如下的方法一起使用：

```
[Authorise(????????)]
public UserDetailsDto GetUserDetails(int userId)
{
  .. blah
} 
```

在运行时，Authorize 属性的存在会导致执行一些需要用户 ID 的授权代码。显然，这可以从`GetUserDetails()`方法的参数中提取出来，但这意味着授权码取决于方法的参数被赋予特定的名称。

我希望能够将`userId`参数的实际值传递给属性，以便授权代码与传递给属性的值（即不是方法参数）一起工作，其名称是已知的。

像这样的东西（不起作用）：

```
[Authorise(userId)]
public UserDetailsDto GetUserDetails(int userId)
{
  .. blah
} 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-12-05T22:26:23.240

There *is* a way to do this ***_in ASP.NET MVC_*** with action-methods (not with attributes in general)

```
public class CustomAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        int userId = (int)filterContext.ActionParameters["userId"];
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-03T16:31:00.243

让 vcsjones 的评论成为答案，这是不可能的。

属性是元数据；它们在编译时编译到程序集中，并且在运行时不会更改。因此，您传递给属性的任何参数都必须是常量；文字、常量变量、编译器定义等。

The one way this would work is to make the attribute an AOP element, using a framework like PostSharp or rolling your own with the Unity Framework etc. This would allow you to attach an "interceptor" to the method by decorating it with an attribute, which will then run code in the attribute and will also have knowledge about exactly how the method was called including parameter values. Check out this blog: [http://www.progware.org/Blog/post/Interception-and-Interceptors-in-C-(Aspect-oriented-programming).aspx](http://www.progware.org/Blog/post/Interception-and-Interceptors-in-C-(Aspect-oriented-programming).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T13:54:43.537

I was able to get around this by using the following:

```
public class AuthorizeAttribute
{
    protected bool RequireIdClaim { get; private set; }

    public AuthorizeAttribute(bool requireIdClaim = false)
    {
        RequireIdClaim = requireIdClaim;
    }

    public Authorize() 
    {
        //regular auth stuff here

        if (RequireIdClaim)
        {
            var routeData = context.ActionContext.Request.GetRouteData();
            var requiredIdClaim = Convert.ToInt32(routeData.Values["id"]); 

            //Check here if their user profile has a claim to that Id
        }
    }
} 
```

And then on the specific methods you want to check Ids on,

```
[HttpGet]
[Route("{id}")]
[Authorize(requireIdClaim: true)]
public UserDetailsDto GetUserDetails(int userId)
{
    .. blah
} 
```

And if you don't care to check their Id, but just that they're authenticated

```
[HttpGet]
[Route("")]
[Authorize]
public bool isLoggedIn()
{
    .. blah
} 
```

Of course you can organize your authorize procedure however you like but this idea allows you to get their ID in your auth procedure there since it is passed in as route data. More here: [https://stackoverflow.com/a/16054886](https://stackoverflow.com/a/16054886)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T11:27:08.923

Probably because this is an old post but this is now possible

```
[MyAttribute(MyAttributeVar= "myMethodVar")]
public void MyMethod(int myMethodVar) 
```

# regex - 高阶正则表达式

> ID：10435405
> 
> 赞同：0
> 
> 时间：2012-05-03T16:20:30.413
> 
> 标签：regex, higher-order-functions

在阅读函数式编程时，我偶然发现了高阶函数的概念，据我所知，高阶函数是将函数作为参数和/或返回函数作为结果的函数。

在正则表达式的世界中是否有与此等价的东西？在正则表达式上运行以返回不同正则表达式的正则表达式？

一个简单（但无用）的例子是：

```
(\w)+(?=\(er\|re\)) 
```

比赛对阵

```
cent(er|re) 
```

将比赛替换为

```
calib 
```

导致正则表达式

```
calib(er|re) 
```

有没有人看到这个在任何地方使用？谁能想到这会有用的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:25:19.340

我个人没有，也真的想不出一个很棒的应用程序。我认为使用正则表达式要记住的重要一点是图灵完备的想法。函数式编程语言都是图灵完备的，因此函数式编程只是逻辑排序代码的另一种方式。当然，关于函数编程的优点、好处和可扩展性有很多争论。

鉴于正则表达式实际上只不过是一种文本匹配语法，因此无法从函数式样式中获得真正的好处。这就是为什么使用图灵完整的语言解析器而不是正则表达式来解析 HTML 的原因，这可以说是更容易编写（如果可能的话）。

# c++ - 在 QTextEdit 中启用/禁用语法高亮

> ID：10435406
> 
> 赞同：2
> 
> 时间：2012-05-03T16:20:31.367
> 
> 标签：c++, qt

所以，我正在用 C++ 和 Qt 编写一个简单的代码编辑器。我已经设法通过使用 QSyntaxHighlighter 类创建了一些语法高亮 (SH) 规则。现在，我想启用和禁用此功能。要在 QTextEdit 上启用 SH，我有一个指针：

```
SyntaxHighlight *highlighter;
highlighter = new SyntaxHighlight(editor->document()); 
```

我所要做的就是以某种方式使该指针指向任何内容。但我试图让它指向 NULL 和 0 却没有任何结果。Have 还创建了一个解构器，并使用了`delete highlighter`. 似乎没有任何效果。有任何想法吗？

如果我应该提供更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:20:04.817

与其尝试删除荧光笔，不如使用：

```
highlighter->setDocument(0); 
```

**编辑：**删除荧光笔也有效，因此您可能无意中`QSyntaxHighlighter`在文档上设置了另一个，或者您没有禁用或删除正确的荧光笔。

因为语法高亮器将自己安装为文档的子项，所以您可以使用`findChild`/检索它/它们`findChildren`：

```
foreach(QSyntaxHighlighter* highlighter,
        ui->textEdit->findChildren<QSyntaxHighlighter*>()) {
    delete highlighter;
} 
```

# node.js - express.js 代理

> ID：10435407
> 
> 赞同：196
> 
> 时间：2012-05-03T16:20:44.890
> 
> 标签：node.js, proxy, express, reverse-proxy

为了避免同域 AJAX 问题，我希望我的 node.js Web 服务器将所有请求从 URL 转发`/api/BLABLA`到另一台服务器，例如`other_domain.com:3000/BLABLA`，并以透明方式向用户返回此远程服务器返回的相同内容。

所有其他 URL（旁边`/api/*`）将直接提供，无需代理。

如何使用 node.js + express.js 实现这一点？你能举一个简单的代码例子吗？

（Web 服务器和远程`3000`服务器都在我的控制之下，都运行 node.js 和 express.js）

* * *

到目前为止，我发现了这个[https://github.com/http-party/node-http-proxy](https://github.com/http-party/node-http-proxy)，但是阅读那里的文档并没有让我更聪明。我结束了

```
var proxy = new httpProxy.RoutingProxy();
app.all("/api/*", function(req, res) {
    console.log("old request url " + req.url)
    req.url = '/' + req.url.split('/').slice(2).join('/'); // remove the '/api' part
    console.log("new request url " + req.url)
    proxy.proxyRequest(req, res, {
        host: "other_domain.com",
        port: 3000
    });
}); 
```

但是没有任何东西返回到原始 Web 服务器（或最终用户），所以没有运气。

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2013-06-04T17:56:10.470

> [request](https://github.com/request/request/)自 2020 年 2 月起已被弃用，由于历史原因，我将在下面留下答案，但请考虑移至[本期](https://github.com/request/request/issues/3143)中列出的替代方案。

### 档案

我做了类似的事情，但我使用了[request](https://github.com/mikeal/request)代替：

```
var request = require('request');
app.get('/', function(req,res) {
  //modify the url in any way you want
  var newurl = 'http://google.com/';
  request(newurl).pipe(res);
}); 
```

我希望这会有所帮助，我花了一段时间才意识到我可以做到这一点:)

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2015-09-24T08:40:35.093

我找到了一个更短且非常简单的解决方案，它可以无缝工作，并且还可以使用身份验证，使用`express-http-proxy`：

```
const url = require('url');
const proxy = require('express-http-proxy');

// New hostname+path as specified by question:
const apiProxy = proxy('other_domain.com:3000/BLABLA', {
    proxyReqPathResolver: req => url.parse(req.baseUrl).path
}); 
```

然后简单地说：

```
app.use('/api/*', apiProxy); 
```

注意：正如@MaxPRafferty 所述，使用`req.originalUrl`代替`baseUrl`来保留查询字符串：

```
 forwardPath: req => url.parse(req.baseUrl).path 
```

更新：正如安德鲁所提到的（谢谢！），有一个使用相同原理的现成解决方案：

```
npm i --save http-proxy-middleware 
```

接着：

```
const proxy = require('http-proxy-middleware')
var apiProxy = proxy('/api', {target: 'http://www.example.org/api'});
app.use(apiProxy) 
```

文档：[Github 上的 http-proxy-middleware](https://github.com/chimurai/http-proxy-middleware)

我知道我加入这个聚会迟到了，但我希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-05-03T16:47:48.633

您想使用[`http.request`](http://nodejs.org/api/http.html#http_http_request_options_callback)创建一个对远程 API 的类似请求并返回其响应。

像这样的东西：

```
const http = require('http');
// or use import http from 'http';

/* your app config here */

app.post('/api/BLABLA', (oreq, ores) => {
  const options = {
    // host to forward to
    host: 'www.google.com',
    // port to forward to
    port: 80,
    // path to forward to
    path: '/api/BLABLA',
    // request method
    method: 'POST',
    // headers to send
    headers: oreq.headers,
  };

  const creq = http
    .request(options, pres => {
      // set encoding
      pres.setEncoding('utf8');

      // set http status code based on proxied response
      ores.writeHead(pres.statusCode);

      // wait for data
      pres.on('data', chunk => {
        ores.write(chunk);
      });

      pres.on('close', () => {
        // closed, let's end client request as well
        ores.end();
      });

      pres.on('end', () => {
        // finished, let's finish client request as well
        ores.end();
      });
    })
    .on('error', e => {
      // we got an error
      console.log(e.message);
      try {
        // attempt to set error message and http status
        ores.writeHead(500);
        ores.write(e.message);
      } catch (e) {
        // ignore
      }
      ores.end();
    });

  creq.end();
}); 
```

*注意：我还没有真正尝试过上面的方法，所以它可能包含解析错误，希望这会给你一个关于如何让它工作的提示。*

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2014-03-11T13:01:00.050

扩展[trigoman](https://stackoverflow.com/users/358059/trigoman)的答案（他的全部学分）以使用 POST（也可以使用 PUT 等）：

```
app.use('/api', function(req, res) {
  var url = 'YOUR_API_BASE_URL'+ req.url;
  var r = null;
  if(req.method === 'POST') {
     r = request.post({uri: url, json: req.body});
  } else {
     r = request(url);
  }

  req.pipe(r).pipe(res);
}); 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-05-07T08:14:06.680

我使用以下设置将所有内容定向`/rest`到后端服务器（端口 8080），并将所有其他请求定向到前端服务器（端口 3001 上的 webpack 服务器）。它支持所有 HTTP 方法，不会丢失任何请求元信息并支持 websockets（我需要热重载）

```
var express  = require('express');
var app      = express();
var httpProxy = require('http-proxy');
var apiProxy = httpProxy.createProxyServer();
var backend = 'http://localhost:8080',
    frontend = 'http://localhost:3001';

app.all("/rest/*", function(req, res) {
  apiProxy.web(req, res, {target: backend});
});

app.all("/*", function(req, res) {
    apiProxy.web(req, res, {target: frontend});
});

var server = require('http').createServer(app);
server.on('upgrade', function (req, socket, head) {
  apiProxy.ws(req, socket, head, {target: frontend});
});
server.listen(3000); 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2017-01-17T16:52:33.683

首先安装 express 和 http-proxy-middleware

```
npm install express http-proxy-middleware --save 
```

然后在你的 server.js

```
const express = require('express');
const proxy = require('http-proxy-middleware');

const app = express();
app.use(express.static('client'));

// Add middleware for http proxying 
const apiProxy = proxy('/api', { target: 'http://localhost:8080' });
app.use('/api', apiProxy);

// Render your site
const renderIndex = (req, res) => {
  res.sendFile(path.resolve(__dirname, 'client/index.html'));
}
app.get('/*', renderIndex);

app.listen(3000, () => {
  console.log('Listening on: http://localhost:3000');
}); 
```

在此示例中，我们在端口 3000 上为站点提供服务，但是当请求以 /api 结尾时，我们将其重定向到 localhost:8080。

[http://localhost:3000/api/login](http://localhost:3000/api/login)重定向到[http://localhost:8080/api/login](http://localhost:8080/api/login)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-04-20T15:50:51.997

好的，这是使用 require('request') npm 模块和环境变量 * 而不是硬编码代理的准备复制粘贴答案）：

咖啡脚本

```
app.use (req, res, next) ->                                                 
  r = false
  method = req.method.toLowerCase().replace(/delete/, 'del')
  switch method
    when 'get', 'post', 'del', 'put'
      r = request[method](
        uri: process.env.PROXY_URL + req.url
        json: req.body)
    else
      return res.send('invalid method')
  req.pipe(r).pipe res 
```

javascript:

```
app.use(function(req, res, next) {
  var method, r;
  method = req.method.toLowerCase().replace(/delete/,"del");
  switch (method) {
    case "get":
    case "post":
    case "del":
    case "put":
      r = request[method]({
        uri: process.env.PROXY_URL + req.url,
        json: req.body
      });
      break;
    default:
      return res.send("invalid method");
  }
  return req.pipe(r).pipe(res);
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-10-18T20:39:25.293

我找到了一个更短的解决方案，它完全符合我的要求[https://github.com/http-party/node-http-proxy](https://github.com/http-party/node-http-proxy)

安装后`http-proxy`

```
npm install http-proxy --save 
```

在你的 server/index/app.js 中像下面这样使用它

```
var proxyServer = require('http-route-proxy');
app.use('/api/BLABLA/', proxyServer.connect({
  to: 'other_domain.com:3000/BLABLA',
  https: true,
  route: ['/']
})); 
```

为了避免这个问题，我真的花了好几天的时间到处寻找，尝试了很多解决方案，但除了这个之外，它们都没有奏效。

希望它也能帮助别人:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-06T02:01:07.820

我认为你应该使用`cors npm`

```
const app = express();
const cors = require('cors');
var corsOptions = {
    origin: 'http://localhost:3000',
    optionsSuccessStatus: 200 // some legacy browsers (IE11, various SmartTVs) choke on 204
}
app.use(cors(corsOptions)); 
```

[https://www.npmjs.com/package/cors](https://www.npmjs.com/package/cors)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-24T05:44:18.057

我没有快递样品，但有一个普通`http-proxy`包装的。我用于博客的代理的一个非常精简的版本。

简而言之，所有 nodejs http 代理包都工作在 http 协议级别，而不是 tcp(socket) 级别。对于 express 和所有 express 中间件也是如此。它们都不能做透明代理，也不能做 NAT，这意味着将传入流量源 IP 保留在发送到后端 Web 服务器的数据包中。

但是，Web 服务器可以从 http x-forwarded 标头中获取原始 IP 并将其添加到日志中。

的`xfwd: true`in`proxyOption`启用 x-forward 标头功能`http-proxy`。

```
const url = require('url');
const proxy = require('http-proxy');

proxyConfig = {
    httpPort: 8888,
    proxyOptions: {
        target: {
            host: 'example.com',
            port: 80
        },
        xfwd: true // <--- This is what you are looking for.
    }
};

function startProxy() {

    proxy
        .createServer(proxyConfig.proxyOptions)
        .listen(proxyConfig.httpPort, '0.0.0.0');

}

startProxy(); 
```

X-Forwarded Header 参考：[https ://en.wikipedia.org/wiki/X-Forwarded-For](https://en.wikipedia.org/wiki/X-Forwarded-For)

我的代理的完整版：[https ://github.com/J-Siu/ghost-https-nodejs-proxy](https://github.com/J-Siu/ghost-https-nodejs-proxy)

# jquery - 在父级的父级中选择元素

> ID：10435408
> 
> 赞同：0
> 
> 时间：2012-05-03T16:20:48.480
> 
> 标签：jquery, jquery-mobile

我有一个 jQuery Mobile 手风琴菜单设置如下：

```
<div class="subCat" data-role="collapsible">
    <h3>Subcategory Name</h3>
    <div class="itemImg">
        <img alt="Item 1" src="[image location]" /><span>Item 1</span>
    </div>
    <div class="itemImg">
        <img alt="Item 1" src="[image location]" /><span>Item 1</span>
    </div>
</div><!--End of subCat--> 
```

这适用于几个子类别。单击图像时，我有一些代码可以获取“子类别名称”：

```
var currCat=$(this).closest('.subCat').children('h3').innerHTML; 
```

“this”是点击的图像，我需要将“子类别名称”放入 currCat。但是，目前当我选择 children('h3') 时，我只是得到了 innerHTML 和“[object OBJECT]”的“未定义”。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:22:42.117

使用 .text()：

```
var currCat=$(this).closest('.subCat').children('h3').text(); 
```

您也可以使用 .html() ，两者都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:25:22.843

尝试

```
$('img').click(function(e) {
    var currCat = $(this).closest('.subCat').children('h3').text();
    e.preventDefault();
}); 
```

jsFiddle：http: [//jsfiddle.net/zvyjH/](http://jsfiddle.net/zvyjH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:35:07.283

使用 jQuery Mobile 时要记住的一件事是，在将 HTML 交付给浏览器之后，它们会对其进行大量的重构。例如，手风琴`span`在`h3`. 我会安装 FireBug 并在 jQuery Mobile 重建它之后使用它来查看 HTML。此外，正如其他帖子所提到的，innerHTML 实际上是原生 JavaScript 的属性，而 jQuery 使用`.html()`and `.text()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:22:10.463

```
var currCat=$(this).closest('.subCat').children('h3').html(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T16:23:05.707

你试过了吗`var currCat=$(this).closest('.subCat').children('h3').html();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T16:23:28.107

你可以试试：

```
$('.subCat > h3').text(); 
```

或者

```
var currCat=$(this).closest('.subCat > h3').text(); 
```

# android - 在android中取出电池或sim卡

> ID：10435409
> 
> 赞同：-2
> 
> 时间：2012-05-03T16:21:05.127
> 
> 标签：android, gps

嗨，我有两个关于 android api 的问题：
我想使用 android api，当用户移除 sim 卡或移除电池应用程序时，可以将用户操作保存在数据库中。我可以在 android os 中解决这些问题吗？
这个应用程序是车队管理 gps 跟踪应用程序。但我不知道如何在 android 系统中解决这些问题。
我可以在 android 设备中解决这些问题吗？
或者我需要其他用于车队管理系统的硬件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:39:13.383

> 我想使用 android api，当用户移除 sim 卡或移除电池应用程序时，可以将用户操作保存在数据库上。我可以在 android os 中解决这些问题吗？

并不真地。

对于 SIM 卡，如果 MCC 或 MNC 发生变化，*更换*SIM 卡*可能会*导致配置发生变化。简单地移除 SIM 卡不会引发 SDK、AFAICT 中可用的事件。

关于电池，当电池被有意或无意地取出时，设备很可能会断电。很少有 Android 设备支持在设备开机时取出电池。

> 此应用程序是车队管理 gps 跟踪应用程序

这与取出 SIM 卡或电池没有任何明显关系。

# sql - ORA-01843: Java 应用程序中的月份无效

> ID：10435412
> 
> 赞同：0
> 
> 时间：2012-05-03T16:21:30.863
> 
> 标签：sql, oracle, jdbc, oracle10g

我们在 SAP Netweaver 中部署了一个 Java Web 应用程序，它通过普通 JDBC 访问 Oracle 10g 数据库。该应用程序运行良好，直到几天前，查询导致以下错误：

```
ORA-01843: not a valid month 
```

给我们带来麻烦的查询是这样的：

```
SELECT *
FROM   (SELECT *
        FROM   (SELECT inspeccion.sociedad_id,
                       inspeccion_id,
                       estado_id,
                       (SELECT des_estado
                        FROM   estado
                        WHERE  estado.estado_id = inspeccion.estado_id)
                       des_estado,
                       (SELECT numero_secuencia
                        FROM   estado
                        WHERE  estado.estado_id = inspeccion.estado_id)
                       numero_secuencia,
                       planta_id,
                       (SELECT des_planta
                        FROM   planta
                        WHERE  planta.planta_id = inspeccion.planta_id)
                       des_planta,
                       area_id,
                       (SELECT des_area
                        FROM   area
                        WHERE  area.area_id = inspeccion.area_id)       des_area
                       ,
                       igp_id,
                       '-'
                       nom_lider,
                       nom_inspector,
                       nom_responsable,
                       To_char(fecha_inspeccion, 'DD/MM/YYYY')
                       fecha_inspeccion,
                       observacion,
                       recomendacion
                FROM   inspeccion) inspeccion) t_inspeccion
WHERE  estado_id NOT IN ( 10 )
       AND t_inspeccion.estado_id IN ( 11, 12 )
       AND t_inspeccion.planta_id = 42
       AND t_inspeccion.fecha_inspeccion >= To_date('01/11/2010', 'dd/mm/yyyy')
       AND t_inspeccion.sociedad_id = '0101'
ORDER  BY t_inspeccion.numero_secuencia,
          t_inspeccion.fecha_inspeccion 
```

我们怀疑该`To_date('01/11/2010', 'dd/mm/yyyy')`语句，但是当我们通过 DBVisualizer 运行查询时，我们一点问题都没有。

我有点迷失在这里。也许有一个数据库设置与查询混淆，或者一些 SAP Netweaver 配置？或者可能是一些 Oracle 驱动程序问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:51:37.550

在成为`t_inspeccion`您的嵌套选择中：

```
To_char(fecha_inspeccion, 'DD/MM/YYYY') fecha_inspeccion, 
```

...然后在外部`where`子句中你有：

```
AND t_inspeccion.fecha_inspeccion >= To_date('01/11/2010', 'dd/mm/yyyy') 
```

假设原件`inspection.fecha_inspeccion`是 a `date`，您似乎正在转换为字符串，然后进行隐式转换回日期以将其与您的固定值进行比较。我怀疑隐式转换`t_inspeccion.fecha_inspeccion`会引发错误，可能来自意外`NLS_DATE_FORMAT`设置；在 Java 中，它通常是从您的语言环境中获得的。从错误中我猜它隐含地使用了 MM/DD/YYYY，但很容易是别的东西。

我不明白为什么你有这个`to_char()`，除非你特别想要结果中的文本格式；在这种情况下，您需要在`where`子句中显式转换日期：

```
AND To_date(t_inspeccion.fecha_inspeccion, 'dd/mm/yyyy')
    >= To_date('01/11/2010', 'dd/mm/yyyy') 
```

...或者也拉出原始日期列并使用它进行比较；尽管这可能需要您在最外层列出所有其他列`select`。如果您正在或期望使用索引，`fecha_inspeccion`那么您也可能通过将其视为字符串来降低性能。

# c - 在 Linux 上编译 AMT（自动多播隧道）

> ID：10435413
> 
> 赞同：0
> 
> 时间：2012-05-03T16:21:34.670
> 
> 标签：c, makefile, multicast

有一个关于自动多播隧道 (AMT)的旧[项目。](http://cs.utdallas.edu)我正在尝试在 Ubuntu 11.10 上编译它，但出现错误。

1.  光盘
2.  。/配置
3.  制作

错误：

```
尽在 test_patricia
make[1]: 进入目录`/home/ubuntu/amt/test_patricia'
-I../libmem -I../libpatricia -I/usr/local/include -g -O2 -c `test -f 'test-patricia.c' || 回声'./'`test-patricia.c
test-patricia.c：在函数“pat2my”中：
test-patricia.c:53:23：错误：从指针转换为不同大小的整数 [-Werror=pointer-to-int-cast]
cc1：所有警告都被视为错误

make[1]: *** [test-patricia.o] 错误 1
make[1]: 离开目录`/home/ubuntu/amt/test_patricia'
make: *** [全递归] 错误 1

```

代码行：

```
    静态内联 mynode *
    pat2my (patext *ext)
    {
        return((mynode *)((int) ext - offsetof(mynode, extkey)));
    }

```

有什么解决办法吗？如何删除代码中的错误或如何删除 make 中的 Werror 选项。

# ruby - 从名称和变量数组创建哈希（不能将数组转换为字符串）

> ID：10435419
> 
> 赞同：1
> 
> 时间：2012-05-03T16:22:04.793
> 
> 标签：ruby, hash

我想构建一个嵌套的哈希数组。我有一个数组，`branch`看起来像这样：

```
branch = ["handbags", "womens-shoes", "womens-beauty", "womens-clothes"] 
```

然后我有另一个数组，其中包含以下内容`handbags`：

```
handbags = ["wallets", "backpacks", "clutches", "evening-handbags", "hobo-bags", "satchels", "shoulder-bags", "tote-bags"] 
```

我想在一个循环中将`handbags`数组插入到`branch`数组中，这样我就得到了这样的东西：

```
branch = {"handbags" => ["wallets", "backpacks", "clutches", "evening-handbags", "hobo-bags", "satchels", "shoulder-bags", "tote-bags"], "womens-shoes"],...} 
```

我这样尝试：

```
def insert_branch(branch, branch_index, candidate, candidate_index)
    branch[[branch_index], branch[branch_index]] ||= {}
    branch[[branch_index], branch[branch_index]] = candidate[candidate_index]  
end 
```

在哪里

```
candidate[candidate_index] = ["wallets", "backpacks", "clutches", "evening-handbags", "hobo-bags", "satchels", "shoulder-bags", "tote-bags"] 
```

给我

> 无法将数组转换为整数

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:39:42.863

您不能使用与整数不同的对象来索引数组。您必须使用哈希。由于 branch 是一个数组，Ruby 期望一个 Integer 来索引每个元素，并且当您给它另一个数组时，它会尝试将其转换为 Integer，从而产生错误。尝试这个：

```
branch = Hash.new #unnecessary, but makes the class explicit
handbags = ["wallets", "backpacks", "clutches", "evening-handbags", "hobo-bags", "satchels", "shoulder-bags", "tote-bags"]
branch["handbags"] = handbags 
```

branch.inspect 将产生：

```
"{\"handbags\"=>[\"wallets\", \"backpacks\", \"clutches\", \"evening-handbags\", \"hobo-bags\", \"satchels\", \"shoulder-bags\", \"tote-bags\"]}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:11:26.667

如果你真的有：

```
array = ["foo", "bar"]
foo   = ...
bar   = ... 
```

那么你就不走运了：你不能（以任何好的方式）根据其名称获取局部变量引用的对象。每当您发现自己想要按名称查找值时，您应该使用哈希来存储值以供以后检索。即你应该改变你的数据结构，而不是像这样：

```
array  = ["foo","bar"]
things = {
  "foo" => ...,
  "bar" => ...
} 
```

...但是当然，您无需再做任何工作即可**获得答案。**

如果由于某种原因您不能将代码更改为使用单个 Hash 文字，但如果您可以更改代码以使用实例变量而不是局部变量，则可以这样做：

```
array  = ["foo", "bar"]
@foo   = ...
@bar   = ...
branch = Hash[ array.map{ |name| [name,instance_variable_get("@#{name}")] } ] 
```

*以上代码需要Ruby 1.9；如果您改用旧的 1.8，请这样说。*

在行动中看到：

```
irb(main):001:0> a = %w[foo bar jim]
#=> ["foo", "bar", "jim"]

irb(main):002:0> @foo = %w[ 1 2 3 ]
#=> ["1", "2", "3"]
irb(main):003:0> @bar = %w[ 4 5 6 ]
#=> ["4", "5", "6"]
irb(main):004:0> @jim = %w[ 7 8 9 ]
#=> ["7", "8", "9"]

irb(main):006:0> Hash[ a.map{ |name| [name,instance_variable_get("@#{name}")] } ]
#=> {"foo"=>["1", "2", "3"], "bar"=>["4", "5", "6"], "jim"=>["7", "8", "9"]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:55:22.487

您尝试做的事情可以通过以下方式完成：

```
a = %w|Things Animals Cities|
things = %w|Desk Table Lamp|

a[0] = {a[0] => things}

a
=> [{"Things"=>["Desk", "Table", "Lamp"]}, "Animals", "Cities"] 
```

在你的情况下，它是

```
branch[0] = {branch[0] => handbags} 
```

**编辑：**使用元编程，您可以根据名称查找数组：

```
categories = %w|Things Animals Cities|
things = %w|Desk Table Lamp|
animals = %w|Dog Cat Turtle|
cities = %w|London Rome Madrid|

result = categories.map do |category| 
  { category => eval(category.downcase) }
end

result
=> [{"Things"=>["Desk", "Table", "Lamp"]},
    {"Animals"=>["Dog", "Cat", "Turtle"]},
    {"Cities"=>["London", "Rome", "Madrid"]}] 
```

注意使用`eval`来获取`Array`按类别命名的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:41:37.310

您的代码中存在索引问题。该声明：

```
branch[[branch_index], branch[branch_index]] 
```

Ruby 将其理解为试图`branch`在索引处访问`[branch_index]`（这不是有效的索引......它是一个数组）并查看`branch[branch_index]`许多元素（这也不是有效的元素数量......它是一个字符串）。

我认为你真正想要的是：

```
def insert_branch(branch, branch_index, candidate, candidate_index)
    branch[branch_index] = {branch[branch_index] => candidate[candidate_index]}
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T16:48:20.743

你所拥有的有点过。也许这会给你一些指导。

```
branch = ["handbags", "womens-shoes", "womens-beauty", "womens-clothes"]

handbags = ["wallets", "backpacks", "clutches", "evening-handbags", "hobo-bags", "satchels", "shoulder-bags", "tote-bags"]

def insert_branch(catagories,catagories_index,branch)
  catagories[catagories_index] = Hash[catagories[catagories_index],branch] 
end

insert_branch(branch,0,handbags)

>> p branch  # OUTPUT IS
>> [{"handbags"=>["wallets", "backpacks", "clutches", "evening-handbags", "hobo-bags", "satchels", "shoulder-bags", "tote-bags"]}, "womens-shoes", "womens-beauty", "womens-clothes"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T16:45:51.307

Ruby [Array 类](http://www.ruby-doc.org/core-1.9.3/Array.html)说：

> 数组是任何对象的有序整数索引集合。

所以问题是你的索引必须是一个整数，但你正在尝试使用字符串索引分配给数组。您可能会考虑将整个内容转换为哈希（以便您可以使用字符串作为键），或者您可以将哈希或子数组放入数组中正确索引处，如下所示：

```
idx = branch.index "handbags"
branch[idx] = { "handbags" => handbags } 
```

您还应该查看 Array#zip，看看它是否会为您提供所需的功能。

# java - 端口转发正确但局域网外无法访问Tomcat

> ID：10435420
> 
> 赞同：1
> 
> 时间：2012-05-03T16:22:06.717
> 
> 标签：java, tomcat

我的 Tomcat 有问题。

**我想做的事：**

我希望能够在局域网外访问我的 webapp。我使用 Tomcat 作为网络服务器，监听 9191 端口。

托管 Tomcat 的机器具有静态 IP（例如 192.168.1.100）。我的网络配置如下：

互联网 ----- 我的路由器 ----- 计算机 1 ----- 计算机 2（静态 IP：192.168.1.XXX） - 托管 TOMCAT

我已经使用 PFPortChecker 工具测试了端口转发，它说一切正常并且端口转发正确。

**问题：**

当我尝试**http:// localhost:9191/myAppName**或**http:// 192.168.1.XXX/myAppName**时，它​​可以工作，即使我从同一 LAN 中的另一台计算机尝试。. 但是，如果我尝试**http://mypublicip:9191/myAppName**。浏览器说它无法打开网站。我对此感到绝望。我不知道我还能做什么。

雄猫配置：

server.xml： http: [//pastebin.com/vhnuEHBM](http://pastebin.com/vhnuEHBM)

那么，我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:25:19.170

您已将 tomcat 绑定到环回接口。将其设置为 0.0.0.0（以侦听所有接口）或您分配给计算机的静态 ip。

# javascript - 使用 HTML5 画布元素和 Javascript 加载 3D 模型

> ID：10435422
> 
> 赞同：1
> 
> 时间：2012-05-03T16:22:15.317
> 
> 标签：javascript, html, model-view

我有一个简单的概念，我想使用 HTML5，但是当谈到用 Javascript 编写的画布和模型查看器时，我完全是新手。我有一个台灯的 3D 模型，我希望只有台灯的头部可以随着鼠标移动而旋转。这个[CSS3 盒子阴影效果](http://www.zachstronaut.com/lab/text-shadow-box/text-shadow-box.html)有点像我的意思，但我已经在 Maya 中绘制了 3D 模型，我想用 HTML5 加载并使用 Javascript 进行光标交互。我只需要灯头部分保留3D属性，底座可以使用png。我希望这是有道理的，我通常只使用 Flash，但如果可能的话，我想用 HTML5 来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:21:48.337

我也是 webgl 的新手，你可以用 three.js 来做。如果您使用的是 Blender，则可以使用转换器脚本将模型转换为 json 文件。

然后你可以使用 three.js 的 json loader 在画布上加载 json 文件。我发现这些链接对于加载 json 模型很有用。希望能帮助到你

[http://dev.opera.com/articles/view/porting-3d-graphics-to-the-web-webgl-intro-part-2/](http://dev.opera.com/articles/view/porting-3d-graphics-to-the-web-webgl-intro-part-2/)

查看此示例的来源 - [http://mrdoob.github.com/three.js/examples/canvas_materials_reflection.html](http://mrdoob.github.com/three.js/examples/canvas_materials_reflection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:27:44.147

CSS 3 对你没有帮助，听起来你需要使用 WebGL，它是一个*“用于在任何兼容的 Web 浏览器中呈现交互式 3D 图形的 JavaScript API，无需使用插件”*

试试[维基百科文章](http://en.wikipedia.org/wiki/WebGL)和[官方网站](http://www.khronos.org/webgl/)（还有“[测试您的浏览器是否支持 WebGL 网站](http://get.webgl.org/)”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-22T22:58:25.137

尝试 jsc3d：[https ://code.google.com/p/jsc3d/](https://code.google.com/p/jsc3d/)

引用：..JSC3D 是建立在纯 Javascript 软件渲染之上，使用 2d 画布技术以及提供更高效渲染的可选 WebGL 后端...

# json - 如何使用 JsonStore 和 XTemplate 使 Ext.Panel 显示 DataView？

> ID：10435424
> 
> 赞同：0
> 
> 时间：2012-05-03T16:22:23.943
> 
> 标签：json, extjs, dataview, jsonstore

这似乎应该很简单。这是我的数据存储声明：

```
var dataStore = new Ext.data.JsonStore({
    autoLoad : true,
    url : '#mvclink(' json.getCostReportsJsonData ')#&layout_type=txt',
    root : 'data',
    id : 'dataStoreId',
    fields : ['project', 'cost']
}); 
```

url 实际上是由 ColdFusion 生成的，它调用查询并将其转换为 Json 格式。我认为这里一切正常，因为 Json 对象返回为：

```
{"recordcount":1,"columnlist":"project,cost","data":[{"project":"ABC","cost":2250}]} 
```

我现在有虚拟数据，所以只返回一行。

接下来，我声明一个带有 DataView 的 Ext.Panel：

```
var myPanel = new Ext.Panel({
    layout : 'fit',
    id : 'myPanel',
    title : "My Panel",
    monitorResize : true,
    deferredRender : false,
    items : new Ext.DataView({
        store : dataStore,
        tpl : costReportTemplate
    }),
    renderTo : Ext.getBody()
}); 
```

引用的模板是一个 XTemplate：

```
var costReportTemplate = new Ext.XTemplate(
    '<tpl for=".">',
    '<p><b>{project}</b>: {cost:this.format}</p>',
    '</tpl>', {
    format : function (v) {
        var s = Ext.util.Format.usMoney(v);
        return s.substring(0, s.indexOf('.'));
    }
}); 
```

渲染页面后，我可以看到面板，但它完全是空的，并且在 Firebug 中没有任何错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:47:08.727

我想到了！我没有使用带小数点的虚拟成本值，因此格式功能无法正常工作。不过，我没有收到任何错误。我将其更改为检查`if (s.indexOf('.') != -1)`，现在一切都很好。

# listview - How to get all the values from a spinner within a ListView Custom Adapter

> ID：10435427
> 
> 赞同：3
> 
> 时间：2012-05-03T16:22:40.043
> 
> 标签：listview, custom-controls, spinner, xamarin.android

Im trying to create a Spinners within a ListView, but i dont know how to get all the values of each spinner in a List of strings for example. This is the code of the Adapter:

```
public class CustomizeColumnsListAdapter : BaseAdapter
{
    private Activity context;
    private int columnsCount;
    public List<string> fieldsValues;

    public CustomizeColumnsListAdapter(Activity context, int columnsCount)
    {
        this.context = context;
        this.dataObject = dataObject;
        this.columnsCount = columnsCount;
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        RelativeLayout view = (convertView
                        ?? context.LayoutInflater.Inflate(
                                Resource.Layout.customize_column_list_item, parent, false)
                    ) as RelativeLayout;

        try
        {
            string[] sortingColumsItems = {"None", "Id", "Customer Name", "Customer Number", "City", "Address", "Credit Limit", "Contact Name", "Phone Number", "Mail"};
            ArrayAdapter<string> spinnerArrayAdapter = new ArrayAdapter<string>(context, Android.Resource.Layout.SimpleSpinnerItem, sortingColumsItems);
            spinnerArrayAdapter.SetDropDownViewResource(Android.Resource.Layout.SimpleSpinnerDropDownItem);
            view.FindViewById<Spinner>(Resource.Id.cboCCD).Adapter = spinnerArrayAdapter;
            view.FindViewById<Spinner>(Resource.Id.cboCCD).Enabled = true;

            if(columnsCount>=position)
            {
                string columnIndex = (position + 1).ToString();
                view.FindViewById<TextView>(Resource.Id.lblColumn).Text = columnIndex;
            }

        }
        catch (System.Exception ex)
        {
            Toast.MakeText(context, ex.ToString(), ToastLength.Short).Show(); 
        }

        return view;            

    }

    public override int Count
    {
        get { return columnsCount; }
    }

    public override Java.Lang.Object GetItem(int position)
    {
        return null;
    }

    public override long GetItemId(int position)
    {
        return position;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:59:38.947

If you're looking to present the user with a way to launch a spinner from each row of the list, one approach would be to use a custom view such as the following SpinnerRow:

```
public class SpinnerRow : RelativeLayout, View.IOnClickListener, IDialogInterfaceOnClickListener
{
    #region Member Variables
    SpinnerItemSelectedDelegate _spinnerItemSelected;
    SpinnerPosSelectedDelegate _spinnerPosSelected;

    private TextView _label;
    private TextView _value;
    private ImageButton _edit;
    private string[] _options = new String[0];
    private int _position;

    private AlertDialog.Builder _builder;
    #endregion

    #region Construction
    public SpinnerRow (Context context) :
        base (context)
    {
        Initialize (context, null);
    }

    public SpinnerRow (Context context, IAttributeSet attrs) :
        base (context, attrs)
    {
        Initialize (context, attrs);
    }

    protected SpinnerRow (IntPtr doNotUse, Android.Runtime.JniHandleOwnership owner) :
        base (doNotUse, owner)
    {
        //Do nothing
    }

    protected void Initialize (Context context, IAttributeSet attrs)
    {
        Inflate (context, Resource.Layout.SpinnerRow, this);

        _label = FindViewById<TextView>(Resource.Id.editscope_addons_spinner_row_lbl);
        _value = FindViewById<TextView>(Resource.Id.editscope_addons_spinner_row_spin_lbl);
        _edit = FindViewById<ImageButton>(Resource.Id.editscope_addons_spinner_row_button);

        _label.Text = "Row label";
        string[] options = {"None", "Id", "Customer Name", "Customer Number", "City", "Address", "Credit Limit", "Contact Name", "Phone Number", "Mail"};
        _options = options;

        _edit.SetOnClickListener(this);

        _builder = new AlertDialog.Builder(context);
        _builder.SetTitle(_label.Text);
    }
    #endregion

    public virtual void OnClick(View v)
    {
        _builder.SetSingleChoiceItems(_options, _position, this);
        _builder.Create().Show();
    }

    public virtual void OnClick(IDialogInterface dialog, int position)
    {
        Position = position;
        _value.Text = _options[_position];

        dialog.Dismiss();
    }

    public int IndexOf(string option)
    {
        int numOptions = _options.Length;
        for (int i = 0; i < numOptions; i++)
        {
            if (_options[i].ToLower() == option.ToLower())
                return i;
        }

        return IntentConstants.INVALID_POSITION;
    }

    public bool Contains(string option)
    {
        return IndexOf(option) != IntentConstants.INVALID_POSITION;
    }

    #region Properties
    public string Text
    {
        get { return _label.Text; }
        set { _label.Text = value; }
    }

    public int Position
    {
        get { return _position; }
        set
        {
            _position = value;
            if (_position == IntentConstants.INVALID_POSITION)
            {
                _value.Text = NotSelectedText;
                if (OnSelected != null)
                    OnSelected("");
            }
            else if (_options != null && _options.Length > 0)
            {
                _value.Text = _options[_position];
                if (OnSelected != null)
                    OnSelected(_options[_position]);
            }

            if (OnPosSelected != null)
                OnPosSelected(_position);
        }
    }

    public string ValueText
    {
        get { return _value.Text; }
    }

    public String[] Options
    {
        get { return _options; }    
        set 
        { 
            _options = value;

            //Reset the current position so the text is updated
            int curPos = Position;
            _position = IntentConstants.INVALID_POSITION;
            Position = curPos;
        }
    }

    public SpinnerItemSelectedDelegate OnSelected
    {
        get { return _spinnerItemSelected; }
        set { _spinnerItemSelected = value; }
    }

    public SpinnerPosSelectedDelegate OnPosSelected
    {
        get { return _spinnerPosSelected; }
        set { _spinnerPosSelected = value; }
    }
    #endregion
} 
```

You would initialize this view within the GetView() of your CustomizeColumnsListAdapter above.

One other thing you'll likely want to consider in that method is the ViewHolder pattern recommended by Android: [http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html)

# sencha-touch - 出现错误 -Sencha touch 2 和 Cordova 1.6.1

> ID：10435433
> 
> 赞同：0
> 
> 时间：2012-05-03T16:22:55.677
> 
> 标签：sencha-touch, extjs, sencha-touch-2, cordova

我已经从[https://github.com/senchalearn/phonegapcontacts/tree/1_basic_structure](https://github.com/senchalearn/phonegapcontacts/tree/1_basic_structure)复制了 WWW 文件夹，现在我无法运行该应用程序。（我只是得到一个可以滚动的空白屏幕）

但是，当我编辑时`app.js`，会出现一个白屏，但它保持静止。

我已更改`Ext.regApplication` 为`Ext.application`，我得到白色静态屏幕和以下错误

> [INFO] 成功回调错误：NetworkStatus0 = ReferenceError：找不到变量：views

我的`app.js`文件如下。

```
Ext.application({
    name: 'app',
    launch: function() {
        this.launched = true;
        this.mainLaunch();
    },
                launch: function() {                                            
                this.view.ViewPort = new this.view.Viewport();
                }
}); 
```

Google 建议可能在 app.js 中使用了一种已弃用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:38:49.707

不确定，但 this.ViewPort = new 的这一行让我感觉您的视图没有正确呈现。

# jakarta-ee - javaee url-pattern "/" 匹配所有内容，而这应该仅适用于 "/*"，而不适用于 "/"

> ID：10435437
> 
> 赞同：2
> 
> 时间：2012-05-03T16:23:07.093
> 
> 标签：jakarta-ee, servlets, jboss-eap-4.3.x

```
 <security-constraint>
    <web-resource-collection>
      <web-resource-name>Common pages</web-resource-name>
      <url-pattern>/test1.html</url-pattern>
      <http-method>GET</http-method>
    </web-resource-collection>
    <auth-constraint>
      <role-name>MY_GROUP</role-name>
    </auth-constraint>
  </security-constraint> 
```

正如预期的那样，有了这个约束，页面 /test1.html 需要认证，而页面 /test2.html 不需要认证。

```
 <security-constraint>
    <web-resource-collection>
      <web-resource-name>Common pages</web-resource-name>
      <url-pattern>/*</url-pattern>
      <http-method>GET</http-method>
    </web-resource-collection>
    <auth-constraint>
      <role-name>MY_GROUP</role-name>
    </auth-constraint>
  </security-constraint> 
```

正如预期的那样，有了这个约束，所有页面都需要认证，包括/test2.html。

```
 <security-constraint>
    <web-resource-collection>
      <web-resource-name>Common pages</web-resource-name>
      <url-pattern>/</url-pattern>
      <url-pattern>/test1.html</url-pattern>
      <http-method>GET</http-method>
    </web-resource-collection>
    <auth-constraint>
      <role-name>MY_GROUP</role-name>
    </auth-constraint>
  </security-constraint> 
```

有了这个约束，我希望页面 /test1.html 和 / 需要身份验证，但页面 /test2.html 不需要身份验证。

然而，事实证明 /test2.html 也需要身份验证。

问题 1\. 这正常吗？为什么会这样？

问题2\. url-pattern“/”等价于“/*”的规范中哪里写到了？Java Servlet 规范 2.5：http: [//goo.gl/UxoPL](http://goo.gl/UxoPL)

问题 3\. 如何判断根页面“/”需要认证，而其他页面不需要？

ps：我使用的是jboss-eap-4.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:45:48.587

这`/`是一个特殊的 URL 模式，它匹配所有与同一个 webapp 中任何更具体的 servlet URL 模式**不**`/app/*`匹配的东西，比如,`*.do`等。它是，比如说，“默认 servlet”。默认情况下，这是由 servletcontainer 自己的默认 servlet 处理的，通常用于静态资源，例如普通的 HTML/CSS/JS/图像文件，不会调用任何 webapp 自己的 servlet。例如 Tomcat 就有[`DefaultServlet`](http://tomcat.apache.org/tomcat-7.0-doc/default-servlet.html)这个用途。

这`/*`是一个过于通用的 URL 模式，它匹配**所有内容**，包括“默认 servlet”请求。此 URL 模式通常仅由过滤器使用，而不由 servlet 使用。否则，您将不得不重新设计 servletcontainer 自己的默认 servlet 来处理静态文件，例如普通的 HTML/CSS/JS/图像文件。

至于您的具体功能要求，您需要指定一个欢迎文件`/`

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

然后`/index.html`改为使用安全约束 URL 模式。

# vb.net - 如何在VB中将有符号字节写入串行端口

> ID：10435439
> 
> 赞同：0
> 
> 时间：2012-05-03T16:23:13.627
> 
> 标签：vb.net

我需要能够使用将有符号字节写入串行端口

SerialPort.Write() 方法，除了该方法只采用 byte[] 无符号字节数组，我如何将有符号字节写入串行端口？

对于我正在处理的特定命令，其值从 -1700 到 1700。

谢谢

噩梦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:31:19.900

串行通信通道没有有符号或无符号的概念，只有线路上的 1 和 0 的概念。是您的操作系统（最终是您的 CPU 架构）在发送端和接收端为这些 1 和 0 分配一个数值。

您声明的值范围不能以字节表示（根据我的评论和您的回复）。您需要了解接收设备对给定数字期望的位模式（另一个设备是[大端还是小端](http://en.wikipedia.org/wiki/Endianness)？），然后您可以发送适当的字节 [] 序列来表示您要传输的数字。

如果两个设备具有相同的字节序，您可以设置一个短数组，然后复制到一个字节数组，如下所示：

```
short[] sdata = new short[] { 1, -1 };
byte[] bdata = new byte[sdata.Length * 2];

Buffer.BlockCopy(sdata, 0, bdata, 0, bdata.Length); 
```

但是，请确保并测试一系列值。尤其是在处理嵌入式设备时，数字编码可能与英特尔 PC 上的不完全相同。

# objective-c - iOS 在会话期间保持 gps 权限

> ID：10435440
> 
> 赞同：0
> 
> 时间：2012-05-03T16:23:18.880
> 
> 标签：objective-c, ios, xcode, cocoa-touch, jquery-mobile

我的应用程序将 jquery + google maps 文件加载到 webview 中，并且当 viewDidLoad 激活警报要求 gps 访问时（正常）。验证后，如果稍后重新加载此视图，仍然会推送警报！如何保持 gps 权限以避免多个警报请求权限？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:38:28.450

我会先尝试从本机 Obj-C 代码访问 GPS，然后让 webview 加载：

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
[locationManager startUpdatingLocation];
[locationManager stopUpdatingLocation]; 
```

这应该验证您的应用程序使用 GPS，因此 Webview 使用它（至少如果它是本地 webview，不确定它是否是远程的）。

# java - 为什么 user.dir 可以设置为“.”？

> ID：10435441
> 
> 赞同：4
> 
> 时间：2012-05-03T16:23:21.883
> 
> 标签：java, unix, ant

如果以下命令显示 user.dir 设置为“.”，那么在 UNIX 环境中会出现什么问题？

```
/home/user> $ANT_DIR/bin/ant -diagnostics | grep dir
user.dir : . 
```

如果我在不同的计算机上运行此命令 - user.dir 设置为当前目录：

```
/home/user2> $ANT_DIR/bin/ant -diagnostics | grep dir
user.dir : /home/user2 
```

Java 也不起作用。

```
/home/user> java -cp .:$CLASSPATH test
Exception in thread "main" java.lang.NoClassDefFoundError: test
Caused by: java.lang.ClassNotFoundException: test
        at java.net.URLClassLoader.findClass(URLClassLoader.java:434)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:653)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:358)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:619)
Could not find the main class: test.  Program will exit. 
```

将当前目录添加到类路径。

```
/home/user> java -cp /home/user:$CLASSPATH test
Hello World! 
```

如您所见，只有当我将当前目录而不是“.”添加到类路径时，java 才找到测试类。

据我了解，某些 unix 环境变量的值错误。但是什么环境变量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:39:19.340

以防万一：名为“user.dir”的系统属性应指向当前工作目录，而不是用户主目录（参见[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)） . 如果您想拥有用户主目录，请使用名为“user.home”的属性。

我的java测试程序：

```
public class UserDirSystemProperty {
    public static void main(final String[] args) {
        System.out.println(System.getProperty("user.dir"));
    }
} 
```

总是给我当前目录的绝对路径。我刚刚安装了ant（apache-ant-1.8.4），这里的输出也是绝对路径。

保存当前工作目录的唯一环境变量是 PWD，但即使像这样修改 PWD`PWD=. ant -diagnostics | grep dir`也不会改变任何事情，它仍然会打印`user.dir : /home/holger/Programming`. 所以这必须是环境之外的东西。

我的下一个猜测是权限：目录 /home/user 可能是 NFS 挂载并且运行 ant 的用户（一些放错位置的 suid 位？）没有访问该目录的权限。要对此进行测试：执行 a`cd /tmp`并`ant -diagnostics`再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:30:32.743

那有什么问题？你想要用户目录的绝对位置吗？

如果是这样就这样做

```
new File(System.getProperty("user.dir")).getAbsolutePath() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-02T08:57:46.413

主目录在 /etc/passwd 文件中设置。

parv1616@parv:~$ cat /etc/passwd | grep parv1616

parv1616:x:1000:1000:Parvinder Singh,,,: **/home/parv1616** :/bin/bash

你只需要用你想要的目录来改变它。

也可以使用 usermod 命令更改。

如果仍然不起作用，请告诉我。

# binding - Emberjs - 临时禁用属性更改通知

> ID：10435446
> 
> 赞同：2
> 
> 时间：2012-05-03T16:23:36.920
> 
> 标签：binding, ember.js, observable

有没有什么简单的方法可以暂时禁用一个或多个对象属性的通知？

我知道您可以推迟它们，`beginPropertyChanges()`但`endPropertyChanges()`我不希望在我明确启用它们之前通知这些更改。

先感谢您。

**用例：**`A`我必须用另一个对象 ( ) 设置一个对象 ( ) 的属性`B`。的属性`B`正在通过其他对象的几种方法进行观察。有时`B`对象的数据会被清除并通知观察者，稍后 HTTP 响应会为他们设置一些有用的东西。我不希望在清除对象时通知观察者，因为此时属性值无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T08:29:13.353

Ember 不支持暂停通知。我强烈建议不要玩弄上述评论中提到的私有 API。

我想知道您为什么要在 HTTP 请求之前清除对象的数据？似乎很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-16T05:46:53.437

使用标志将导致计算仍然触发。

我想出的最好的方法是用最后一个已知值覆盖计算。稍后您可以通过再次设置计算属性定义来启用它。

```
let _myComputedProperty = Ember.computed('foobar', function() {
  let foobar = this.get('foobar');
  console.log('myComputedProperty triggered >', foobar);
  return '_' + foobar + '_';
});

Controller.extend({
  turnOffComputed: function() {
    let myComputedProperty = this.get('myComputedProperty');
    this.set('myComputedProperty', myComputedProperty);
  },

  turnOnComputed: function() {
    this.set('myComputedProperty', _myComputedProperty);
  }
}) 
```

完整示例：[计算属性的条件绑定](https://ember-twiddle.com/8ae1a91e6a625da3882981843b3d1e5a?fileTreeShown=false&openFiles=controllers.application.js%2C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T11:51:20.307

这是一个古老的问题，但在谷歌搜索暂停观察者时似乎很高，所以我会发表评论。

这种特性有明显的用例，例如，对象的枚举属性由列表框表示，并且对象可能会更改。如果列表框用于向服务器请求属性更改并在成功时设置新值，那么自然的做法是使用列表框的控制器属性，当对象更改时将该属性设置为对象属性，并观察它向服务器发出请求。在这种情况下，只要对象发生变化，观察者就会收到不需要的通知。

但是，我同意这些用例是如此多样化，以至于 Ember 无法支持它们。

因此，一种可能的解决方法是在控制器中声明一个变量，并在您更改属性时使用它，以便您只对用户所做的更改做出反应：

```
doNotReact: false,
updateManually: function() {
    this.doNotReact = true; 
    Ember.run.scheduleOnce('actions', this, function() {
       this.doNotReact = false;
    });
    ............
    this.set('something', somevalue);
    ............
},

onChange: function() {
    if (this.doNotReact) return;
    ...............
}.observes('something') 
```

doNotReact 的值将在观察者有机会运行后重置。我不建议在观察者中重置 stopper 变量，因为如果您将属性设置为它已有的相同值，它将不会运行。

# c# - 如何使用计时器访问线程中的信息？

> ID：10435449
> 
> 赞同：0
> 
> 时间：2012-05-03T16:23:56.550
> 
> 标签：c#, multithreading, xna

我创建了一个表单，`C#`其中有一个正在转换为布尔数组的图像。我正在尝试使用计时器生成一个线程，其中图像每秒转换 4 次。

当我调试它时，它可以工作，我可以跟踪计时器的滴答声。但是当表单正在运行时，应用程序会退出而不会出现错误。

这是初始化脚本：

```
form = new LoadForm();
form.Show();
form.BringToFront();

timer = new System.Threading.Timer(new TimerCallback(camTick), null, 0, 250); 
```

这是有效的刻度：

```
private void camTick(Object myObject) 
{
    if (form.isRunning) 
    {
        bool[,] ar = form.getBoolBitmap(100);
    }
} 
```

这是加载和保存位图的函数。在form1.cs

```
public bool[,] getBoolBitmap(uint threshold) {
        unsafe {
            Bitmap b = getBitmap();

            BitmapData originalData = b.LockBits(new Rectangle(0, 0, b.Width, b.Height), ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb);

            bool[,] ar = new bool[b.Width, b.Height];

            for (int y = 0; y < b.Height; y++) {
                byte* Row = (byte*)originalData.Scan0 + (y * originalData.Stride);

                for (int x = 0; x < b.Width; x++) {
                    if ((byte)Row[x * 3] < threshold) {
                        ar[x, y] = false;
                    } else {
                        ar[x, y] = true;
                    }
                }
            }

            b.Dispose();

            return ar;
        }
    }

public Bitmap getBitmap() {
        if (!panelVideoPreview.IsDisposed) {
            Bitmap b = new Bitmap(panelVideoPreview.Width, panelVideoPreview.Height, PixelFormat.Format24bppRgb);
            using (Graphics g = Graphics.FromImage(b)) {
                Rectangle rectanglePanelVideoPreview = panelVideoPreview.Bounds;
                Point sourcePoints = panelVideoPreview.PointToScreen(new Point(panelVideoPreview.ClientRectangle.X, panelVideoPreview.ClientRectangle.Y));
                g.CopyFromScreen(sourcePoints, Point.Empty, rectanglePanelVideoPreview.Size);
            }

            return b;
        } else {
            Bitmap b = new Bitmap(panelVideoPreview.Width, panelVideoPreview.Height);
            return b;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:31:53.507

该图像是否存储在像 PictureBox 这样的控件中？如果是这样，请确保您仅在控件的线程上访问它。查看[Control.Invoke()](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:19:42.273

来自的回调在线程`System.Threading.Timer`上运行。`ThreadPool`在该回调中，您正在访问一个`Form`实例。你根本无法做到这一点。好吧，你*可以*，但它不能正常工作。它会以不可预知的方式失败，有时甚至会非常壮观。

改为使用`System.Windows.Forms.Timer`。让它每 4 秒打勾。如果`Tick`从表单中获取您需要的任何数据，*然后*将其传递给另一个线程进行进一步处理。

在下面的代码中，我`Bitmap`通过调用`DrawToBitmap`UI 线程来获取对象。然后我将它传递`Bitmap`给a `Task`，它可以`bool[]`在后台转换为a。或者，如果需要，您可以`bool[]`从`Task`and 然后调用`ContinueWith`将其返回到 UI 线程（听起来您可能不需要这样做）。

```
private void YourWindowsFormsTimer_Tick(object sender, EventArgs args)
{
  // Get the bitmap object while still on the UI thread.
  var bm = new Bitmap(panelVideoPreview.ClientSize.Width, panelVideoPreview.ClientSize.Height, PixelFormat.Format24bppRgb);
  panelVideoPreview.DrawToBitmap(bm, panelVideoPreview.ClientRectangle);

  Task.Factory
    .StartNew(() =>
    {
      // It is not safe to access the UI here.

      bool[,] ar = ConvertBitmapToByteArray(bm);

      DoSomethingWithTheArrayHereIfNecessary(ar);

      // Optionally return the byte array if you need to transfer it to the UI thread.
      return ar;
    })
    .ContinueWith((task) =>
    {
      // It is safe to access the UI here.

      // Get the returned byte array.
      bool[,] ar = task.Result;

      UpdateSomeControlIfNecessaryHere(ar);

    }, TaskScheduler.FromCurrentSynchronizationContext());
} 
```

`ConvertBitmapToByteArray`现在看起来像这样。

```
public unsafe bool[,] ConvertBitmapToBoolArray(Bitmap b, uint threshold) 
{
  BitmapData originalData = b.LockBits(new Rectangle(0, 0, b.Width, b.Height), ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb);

  bool[,] ar = new bool[b.Width, b.Height];

  for (int y = 0; y < b.Height; y++) 
  {
    byte* Row = (byte*)originalData.Scan0 + (y * originalData.Stride);
    for (int x = 0; x < b.Width; x++) 
    {
      if ((byte)Row[x * 3] < treshold) 
      {
        ar[x, y] = false;
      } else 
      {
        ar[x, y] = true;
      }
    }
  }
  b.Dispose();
  return ar;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:32:56.437

在网上搜索了一番后，我发现了这一点，我需要制作另一个函数来返回`bool[,]`，这就是我想出的：

```
public bool[,] invokeBitmap(uint treshold) {
        if (this.InvokeRequired) {
            return (bool[,])this.Invoke((Func<bool[,]>)delegate {
                return getBoolBitmap(treshold);
            });
        } else {
            return getBoolBitmap(treshold);
        }
    } 
```

# php - PHP URL 验证

> ID：10435452
> 
> 赞同：0
> 
> 时间：2012-05-03T16:24:08.557
> 
> 标签：php, regex

我知道有无数个线程在问这个问题，但是我找不到可以帮助我解决这个问题的线程。

我基本上是在尝试解析大约 10,000,000 个 URL 的列表，确保它们符合以下标准，然后获取根域 URL。这个列表几乎包含了你能想象到的所有内容，包括（以及预期的格式化 url）之类的东西：

```
biy.ly/test [VALID] [return - bit.ly]
example.com/apples?test=1&id=4 [VALID] [return - example.com]
host101.wow404.apples.test.com/cert/blah [VALID] [return - test.com]
101.121.44.xxx [**inVALID**] [return false]
localhost/noway [**inVALID**] [return false]
www.awesome.com [VALID] [return - awesome.com]
i am so awesome [**inVALID**] [return false]
http://404.mynewsite.com/visits/page/view/1/ [VALID] [return - mynewsite.com]
www1.151.com/searchresults [VALID] [return - 151.com] 
```

有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T16:38:12.433

```
^(?:https?://)?(?:[a-z0-9-]+\.)*((?:[a-z0-9-]+\.)[a-z]+) 
```

解释

```
^                # start-of-line
(?:              # begin non-capturing group
  https?         #   "http" or "https"
  ://            #   "://"
)?               # end non-capturing group, make optional
(?:              # start non-capturing group
  [a-z0-9-]+\.   #   a name part (numbers, ASCII letters, dashes) & a dot
)*               # end non-capturing group, match as often as possible
(                # begin group 1 (this will be the domain name)
  (?:            #   start non-capturing group
    [a-z0-9-]+\. #     a name part, same as above
  )              #   end non-capturing group
  [a-z]+         #   the TLD
)                # end group 1 
```

[http://rubular.com/r/g6s9bQpNnC](http://rubular.com/r/g6s9bQpNnC)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:35:40.267

我将从默认开始：

```
filter_var($inputUrl, FILTER_VALIDATE_URL); 
```

然后添加您不可接受的特殊情况以进行进一步验证。这应该简化一点。

至于找主人。

```
parse_url($inputUrl, PHP_URL_HOST); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:28:48.547

`^(([a-zA-Z](\.[a-zA-Z])+)|([0-9]{1,3}(\.[0-9]{1,3}){3})/.*$`

**编辑**

在php中`preg_match ( '^(([a-zA-Z](\.[a-zA-Z])+)|([0-9]{1,3}(\.[0-9]{1,3}){3})/.*$' , $myUrls , $matches)`

你需要的是`$matches[1]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T12:45:17.387

```
$website = test_input($_POST["website"]);
if (!preg_match("/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i",$w$website = test_input($_POST["website"]);
if (!preg_match("/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i",$website))
  {
  $websiteErr = "Invalid URL";
  }ebsite))
  {
  $websiteErr = "Invalid URL";
  } 
```

# php - jQuery float，MySQL 每天计算行数

> ID：10435455
> 
> 赞同：1
> 
> 时间：2012-05-03T16:24:22.430
> 
> 标签：php, jquery, mysql, rows, flot

我有包含 2 个字段的匹配表

```
id    time(TIMESTAMP)
1     2012-05-03 08:56:17
2     2012-04-26 03:22:20
3     2012-05-03 08:56:17 
```

我如何计算每天有多少行，例如过去 10 天？

我的意思是产生的正确查询是什么：

2012-05-03 => 25 次点击 2012-05-05 => 55 次点击等

另外，如何将返回的数组排列为 jQuery 浮点数组？

关于我的问题的任何答案/文章都会有很大帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:38:16.520

这是我的做法：

```
select count(id), DATE(time) as hitday from yourtable group by hitday 
```

关于你的 jQuery 东西，我不太确定我是否理解它。你想让 mysql 为你生成一个 jQuery 可解析数组吗？为此，您绝对需要有一个像 php 这样的中间人。 [这](https://stackoverflow.com/questions/383631/json-encode-mysql-results)是另一个线程，它向您展示了如何使用 php 将选择结果转换为 json。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:28:50.707

您想在日期字段上使用 Group By，例如

```
select count(*), dateField from tablename 
group by dateField 
```

# fullcalendar - 带有 JQuery Fullcalendar 插件的时间线视图

> ID：10435456
> 
> 赞同：3
> 
> 时间：2012-05-03T16:24:40.940
> 
> 标签：fullcalendar

是否可以使用 JQuery FullCalendar 插件 ( [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/) ) 进行时间线视图？我想做这样的事情：http: [//dhtmlx.com/docs/products/dhtmlxScheduler/sample_timeline.shtml](http://dhtmlx.com/docs/products/dhtmlxScheduler/sample_timeline.shtml)

不过，我喜欢 dhtmlx 上的 fullcalendar 的外观。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:18:10.823

谷歌代码有一个常见问题，但它被标记为“资源视图”而不是时间线......这是链接[“资源视图”](http://code.google.com/p/fullcalendar/issues/detail?id=150&q=resource&colspec=ID%20Type%20Status%20Milestone%20Summary%20Stars)。也许它会给你一个开始的地方......让我知道它是否有帮助

# ios - 用于重新发生字符串替换的宏

> ID：10435459
> 
> 赞同：1
> 
> 时间：2012-05-03T16:24:53.520
> 
> 标签：ios, objective-c, macros, c-preprocessor

我想要一个可以像这样使用的宏：

```
CREATE_URL(@"{SOME-TOKEN}/some/url/path"); 
```

然后宏应该将我的令牌模拟替换为以下调用：

```
NSString *initialURL = @"{SOME-TOKEN}/some/url/path";
[initialURL stringByReplacingOccurencesOfString:@"{SOME-TOKEN}" withString:@"http://server.com"] 
```

所以我已经像这样定义了我的宏，不幸的是它不起作用：

```
#define CREATE_URL(url) [##url stringByReplacingOccurencesOfString:@"{SOME-TOKEN}" withString:@"http://server.com"]; 
```

我使用宏时的两个错误：

```
Missing '[' at start of message send expression
Pasting formed '[@', an invalid preprocessing token 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:32:43.027

为什么不是这个？

```
#define CREATE_URL(url) [url stringByReplacingOccurencesOfString:@"{SOME-TOKEN}" withString:@"http://server.com"] 
```

它应该可以正常工作......为什么##和;？

# java - Eclipse 中的项目使用 EclipseLink 并连接到 MySQL

> ID：10435460
> 
> 赞同：1
> 
> 时间：2012-05-03T16:24:58.293
> 
> 标签：java, mysql, eclipse, eclipselink

我正在使用 EclipseIndigo、EclipseLink 和 MySQL 我有一个名为 condition 的表，我需要使用该名称保留它，但是当我`"Query qb = em.createQuery("SELECT c FROM Condition c ")"`在 eclipse 中执行此命令时，它会引发此异常：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'condition' at line 1
    at sun.reflect.GeneratedConstructorAccessor5.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2310)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:931)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:607) 
```

我知道 MySQL 有一个名为 condition 的命令，这就是为什么这个命令会抛出异常。问题是：有一个表格可以将我的表命名为条件，我可以执行这个命令`"Query qb = em.createQuery("SELECT c FROM Condition c ")"`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:36:08.383

MySQL 必须引用保留字作为标识符。

将以下内容添加到 Condition 实体有帮助（查询可以保持原样）：

```
@Table(name = "`condition`") 
```

# python - 我是否正确设置了这个关系数据库（python，sqlite3）

> ID：10435465
> 
> 赞同：0
> 
> 时间：2012-05-03T16:25:24.863
> 
> 标签：python, database, sqlite

我正在尝试制作一个连接 3 个不同表的关系数据库。主程序数据库包含供应商，链接到每个供应商的发票，然后发票链接到在该发票中购买的项目。

```
tempcur.execute("""CREATE TABLE program (
                     vendorid INTEGER PRIMARY KEY, 
                     vendor TEXT, 
                     phone TEXT, 
                     store INTEGER)""")

tempcur.execute("""CREATE TABLE dairystore (
                     invoice INTEGER REFERENCES program(vendorid), 
                     date VARCHAR)""")

tempcur.execute("""CREATE TABLE invoices(
                     item INTEGER REFERENCES dairystore(invoice), 
                     shipped VARCHAR, 
                     description TEXT, 
                     weight INTEGER, 
                     price INTEGER, 
                     amount INTEGER)""") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:35:21.660

`dairystore`不，你的表格有误。它应该是以下内容：

```
CREATE TABLE dairystore (
  invoice INTEGER  PRIMARY KEY,
  vendor INTEGER REFERENCES program(vendorid), 
  date VARCHAR
) 
```

您正在尝试`dairystore.invoice`从`invoices`表中引用，因此`dairystore.invoice`必须是记录的 id。在您的代码`dairystore.invoice`中不能是记录的 id，因为它是引用的，`program.vendorid`并且它的值将等于`program`表中记录的 id。

# java - spring框架java中如何计算年数

> ID：10435466
> 
> 赞同：0
> 
> 时间：2012-05-03T16:25:28.343
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中计算某人的年龄？](https://stackoverflow.com/questions/1116123/how-do-i-calculate-someones-age-in-java)

我正在 spring 框架中创建一个应用程序，该应用程序计算用户在 UI 中输入他们的出生日期后的年龄。到目前为止，我的 getAge bean 有获取和集合，但是我如何在语法上正确地计算方法？

```
import java.util.*;
public class ageBean {

Date birthdate;

public Date getBirthday(){
return birthdate;
}
 public void setBirthdate(Date birthdate){
this.birthdate=birthdate;
}

   //method goes here 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:57:47.587

使用 java.util.Calendar 来确保闰年、月中不同的天数等被考虑在内，

```
int thisYear = Calendar.getInstance().get(Calendar.YEAR);
Calendar birthdateCalendar = Calendar.getInstance();
birthdateCalendar.setTime(birthdate);
int birthYear = birthdateCalendar.get(Calendar.YEAR);
int yearsSinceBirth = thisYear - birthYear; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:37:06.600

您可以通过将 date1 替换为您的生日来尝试这段代码，

```
Date date= new Date(System.currentTimeMillis());
date.setYear(date.getYear()+1900); 
```

// 这是因为 currentTimeMillis 返回从 1970 年 1 月 1 日起经过的时间

```
Date date1=new Date(2000,10,15);
long timegap =date.getTime()-date1.getTime();
long milliSecsInAYear = 31536000000L;

System.out.println(timegap/milliSecsInAYear+"years" +((date.getTime()-date1.getTime())%milliSecsInAYear)/(milliSecsInAYear/365)+"days" ); 
```

注意：我把一年当作有 365 天

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:34:29.950

Spring 什么都没有。如果要计算当前年龄，

```
 long diff = new Date().getTime() - birthdate.getTime(); // current date - b'day
    long diffSeconds = diff / 1000;         
    long diffMinutes = diff / (60 * 1000);         
    long diffHours = diff / (60 * 60 * 1000);                      
    System.out.println("Time in seconds: " + diffSeconds + " seconds.");         
    System.out.println("Time in minutes: " + diffMinutes + " minutes.");         
    System.out.println("Time in hours: " + diffHours + " hours."); 
```

# asp.net - 字符串替换根本不起作用

> ID：10435467
> 
> 赞同：1
> 
> 时间：2012-05-03T16:25:28.920
> 
> 标签：asp.net, vb.net

我正在阅读一个文本文件，我需要用我用 {0}、{1}、{2}、{3}、{4}、{5}、{6} 标记的新文本替换一些区域。

所以我加载文本，将其保存到字符串变量，然后使用 String.Replace 但它不起作用。

```
 For i As Integer = 0 To 6
            fileText.Replace("{" & i & "}", DisplayStudentData(i))
        Next 
```

DisplayStudentData 看起来像这样：

```
 Protected Function DisplayStudentData(ByVal itemNumber As Integer) As String

        Dim dsItem As String = ""
        If itemNumber <> -1 Then
            Select Case itemNumber
                Case 0
                    dsItem = "testFirstName"
                Case 1
                    dsItem = "testTitle"
                Case 2
                    dsItem = "testClass"
                Case 3
                    dsItem = "testTeacher"
                Case 4
                    dsItem = "testDept"
                Case 5
                    dsItem = "testEmail"
                Case 6
                    dsItem = "testPhone"
            End Select
        End If
        Return dsItem
    End Function 
```

看起来上面应该可以工作，但事实并非如此。

任何帮助将不胜感激。

谢谢！

* * *

好吧，我想通了...

我将所有数据项放入一个数组中，然后在加载文本文件后执行此操作：

```
 fileText = String.Format(fileText, dArr(0), dArr(1), dArr(2), dArr(3), dArr(4), dArr(5), dArr(6)) 
```

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T16:26:53.973

```
fileText = fileText.Replace("{" & i & "}", DisplayStudentData(i)) 
```

替换返回一个**新**字符串。它不会修改调用它的字符串。

你也可以这样做：

```
fileText = String.Format(fileText, Enumerable.Range(0,7).Select(Function(i) DisplayStudentData(i)).ToArray()) 
```

为什么 DisplayStudentData 首先不只是一个数组（这会使 string.Format() 更容易）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:31:38.397

另一方面，如果您知道字符串将始终保持不变

你可以做类似的事情

```
dim myTestString = "{0} {1} {2} {3} {4} {5} {6}"
dim result as string = string.format(myTeststring, "testFirstName", 
 "testTitle", "testClass", "testTeacher", "testDept", "testEmail", "testPhone") 
```

你总是可以让它成为你的 studentdata 对象的属性。

# image - 横幅未在 IE7 和 IE8 中显示

> ID：10435468
> 
> 赞同：0
> 
> 时间：2012-05-03T16:25:29.840
> 
> 标签：image, internet-explorer

这是网站：[http ://soundlabrecordingstudio.com/](http://soundlabrecordingstudio.com/)

我有正确的文件路径，图像是 RGB。还有其他想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:28:30.447

看看你的源代码。就在`<body>`标签之后，你写了 `<div id='container'­->`而不是`<div id='container'>`（没有额外的破折号）。FF很棒，他会自动更正。IE 恐慌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:26:31.970

正如 OP 的评论中所指出的，保存在 PNG 中解决了这个问题。

我的意见：JPEG 编码可能是错误的。

# xml - 在 XSLT 中汇总 BIll of Material 数量

> ID：10435469
> 
> 赞同：2
> 
> 时间：2012-05-03T16:25:37.470
> 
> 标签：xml, xslt, recursion

我正在处理 XSLT 报告，需要在物料清单中查找组件的总数。输入 XML 由项目和链接组成。对于每个项目，我需要获取使用它的每个链接的数量。为了使事情复杂化，我需要提升层次结构并将数量乘以父数量。该示例仅显示了两个级别，但可能比这更深。例如，项目组件 1 使用 5 个组件 2 和 1 个螺钉项目。每个 Item assy2 使用 2 个螺钉。所以总共会有 5 个 assy2 和 11 个螺丝（1 个由 assy1 使用，每个 assy2 使用 2 个（2X5））。我已经知道如何合计项目数量，但不知道如何将它们乘以层次结构。

这是源 XML：

```
<items>
<item id="93516">
<attrs><attr name="FILE_ID">assy1</attr></attrs>
</item>
<item id="93515">
<attrs><attr name="FILE_ID">assy2</attr></attrs>
</item>
<item id="93514">
<attrs><attr name="FILE_ID">screw</attr></attrs>
</item>
</items>

<links>
<link source="93516" destination="93514">
<attrs><attr name="QUANTITY">5</attr></attrs>
</link>
<link source="93516" destination="93515">
<attrs><attr name="QUANTITY">1</attr></attrs>
</link>
<link source="93515" destination="93514">
<attrs><attr name="QUANTITY">2</attr></attrs>
</link>
</links> 
```

这是我找到的一些代码并适用于对数量求和，但它不会乘以父数量：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:template match="/">
    <xsl:apply-templates select="/items/item"/>
</xsl:template>

<xsl:template match="item">
    <xsl:value-of select="attrs/attr[@name='FILE_ID']"/> - 
    <xsl:variable name="item_id" select="@id"/>
    <xsl:call-template name="bomQty">
        <xsl:with-param name="itemLinks" select="/links/link[@destination=$item_id]"/>
    </xsl:call-template> - 
</xsl:template>

<xsl:template name="bomQty">
  <xsl:param name="itemLinks"/>
    <xsl:choose>
      <xsl:when test="$itemLinks">
        <xsl:variable name="recursive_result">
          <xsl:call-template name="bomQty">
            <xsl:with-param name="itemLinks" select="$itemLinks[position() > 1]"/>
          </xsl:call-template>
        </xsl:variable>
        <xsl:value-of select="number($itemLinks[1]/attrs/attr[@name='QUANTITY']) + $recursive_result"/>
      </xsl:when>
      <xsl:otherwise><xsl:value-of select="0"/></xsl:otherwise>
  </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:49:28.103

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kItemById" match="item" use="@id"/>

 <xsl:key name="kUses" match="@destination"
                       use="../@source"/>
 <xsl:key name="kLink" match="link"
           use="concat(@source, '+', @destination)"/>
 <xsl:key name="kelemByName" match="*/*" use="name()"/>

 <xsl:template match="/">

Bill of Materials for the production of one <xsl:text/>

 <xsl:text/> "<xsl:value-of select="/*/items/item[1]/*/*"/>":

  <xsl:variable name="vrtfPass1">
      <xsl:call-template name="generate">
       <xsl:with-param name="pId"
          select="/*/items/item[1]/@id"/>
      </xsl:call-template>
  </xsl:variable>

  <xsl:apply-templates mode="pass2" select=
                       "ext:node-set($vrtfPass1)/*"/>
 </xsl:template>

 <xsl:template name="generate">
  <xsl:param name="pId"/>
  <xsl:param name="pQty" select="1"/>

  <xsl:element name="{string(key('kItemById', $pId))}">
    <xsl:attribute name="qty">
      <xsl:value-of select="$pQty"/>
    </xsl:attribute>
    <xsl:for-each select="key('kUses', $pId)">
      <xsl:call-template name="generate">
        <xsl:with-param name="pId" select="."/>
        <xsl:with-param name="pQty" select=
        "key('kLink', concat($pId, '+', .))
              /attrs/attr[@name='QUANTITY']"/>
      </xsl:call-template>
    </xsl:for-each>
  </xsl:element>
 </xsl:template>

 <xsl:template match="/*" mode="pass2">
  <xsl:for-each select=
   "descendant::*
      [generate-id()
      =
       generate-id(key('kelemByName', name())[1])
      ]">

    <xsl:value-of select=
     "concat(name(), ': ')"/>

      <xsl:variable name="vrtfQuantities">
          <xsl:for-each select="key('kelemByName', name())">
              <xsl:call-template name="totalQuantity"/>
          </xsl:for-each>
      </xsl:variable>

            <xsl:value-of select=
             "concat(sum(ext:node-set($vrtfQuantities)/total), '&#xA;')"/>

  </xsl:for-each>
 </xsl:template>

 <xsl:template name="totalQuantity">
  <xsl:param name="pNode" select="."/>

  <xsl:choose>
   <xsl:when test="not($pNode/parent::*)">
    <total><xsl:value-of select="$pNode/@qty"/></total>
   </xsl:when>
   <xsl:otherwise>
    <xsl:variable name="vAncTotal">
     <xsl:call-template name="totalQuantity">
      <xsl:with-param name="pNode" select="$pNode/.."/>
     </xsl:call-template>
    </xsl:variable>

    <total><xsl:value-of select="$pNode/@qty * $vAncTotal"/></total>
   </xsl:otherwise>
  </xsl:choose>
 </xsl:template>

</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<bm>
    <items>
        <item id="93516">
            <attrs>
                <attr name="FILE_ID">assy1</attr>
            </attrs>
        </item>
        <item id="93514">
            <attrs>
                <attr name="FILE_ID">assy2</attr>
            </attrs>
        </item>
        <item id="93515">
            <attrs>
                <attr name="FILE_ID">screw</attr>
            </attrs>
        </item>
    </items>
    <links>
        <link source="93516" destination="93514">
            <attrs>
                <attr name="QUANTITY">5</attr>
            </attrs>
        </link>
        <link source="93516" destination="93515">
            <attrs>
                <attr name="QUANTITY">1</attr>
            </attrs>
        </link>
        <link source="93514" destination="93515">
            <attrs>
                <attr name="QUANTITY">2</attr>
            </attrs>
        </link>
    </links>
</bm> 
```

**产生想要的正确结果：**

```
Bill of Materials for the production of one  "assy1":

assy2: 5
screw: 11 
```

# asp.net-mvc-3 - ASP.NET MVC3 UI 单元测试

> ID：10435474
> 
> 赞同：2
> 
> 时间：2012-05-03T16:25:46.470
> 
> 标签：asp.net-mvc-3, unit-testing, user-interface

我觉得我陷入了这场政治/宗教斗争。从我所做的研究中，我发现很多人非常坚信通过单元测试来进行 UI 测试是愚蠢的，而由一个真实的人来做的事情要好得多。我同意。

然而，似乎高层告诉我对 UI 进行单元测试。（这已经很奇怪了，因为他们之前告诉我我只需要写一个测试计划而不是实际测试）。老实说，我对单元测试不是很熟悉。我正在尝试使用 MOQ，但我找到的所有教程都使用存储库而不是服务，并且我正在围绕服务构建我的 Web 应用程序。

例如，这里是服务的（一部分）：

```
public class ProductService : Service<Product, EntitiesDbContext>
    {
        ...
        public Product GetProduct(int id)
        {
            return All().FirstOrDefault(p => p.ProductId == id);
        }
        ...
    } 
```

我的假设是我需要使用 Moq 创建一个新产品，然后有人使用我的模型验证硬编码输入。我不知道该怎么做。

测试 UI 是我的大部分工作，因为该网站严重依赖用户通过表单输入。我再次发现使用单元测试进行测试非常愚蠢，因为我的模型非常严格并且只允许某些输入。

对于我的问题：我将如何使用 MOQ 或其他测试框架来测试表单输入？我听说有一些程序可以跟踪你的行为然后复制它们，但我一直没有找到它们，而且我也相信这样的技术会花钱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:32:33.523

尝试使用[Selenium](https://www.selenium.dev/)或[Watin](http://watin.org/)进行 UI 测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:48:01.563

您还可以尝试使用 Ivonna (http://ivonna.biz) 进行 MVC 测试——不测试您的客户端，但让您测试您的 Asp.Net 服务器端代码。

但首先你应该问自己（或你的管理层）一个问题：我想测试什么？客户端/服务器端验证？你的服务？行动方法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:43:37.927

您是在测试 UI 的操作还是在测试实际 UI。

如果您正在测试 Actions 以及它们发送到视图的数据，那么使用[NUnit](http://www.nunit.org/)、[xUnit等进行单元测试并使用](http://xunit.codeplex.com/)[MOQ](http://code.google.com/p/moq/)或[Rhino Mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)等 moq 框架将是正确的做法。

如果您正在测试实际 UI（Web 服务器返回的 HTML），那么使用像[Selenium](http://seleniumhq.org/)这样的自动化测试框架将是正确的工具

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T23:44:19.610

开发人员对自动化 UI 测试有很多反对意见。几年前我所做的是使用“Selenium Core”这让我能够修复在 Firefox 中进行测试，然后保存为 C# ，然后混合 C# 和 Html 文件，我可以在其中执行以下操作。

1.  忘记密码 - 将输入来自数据库的自动化随机用户名，然后将加密密码通过电子邮件发送到我设置的各种 gmail 帐户，我有 C# API 登录到 gmail 并检索新的重置密码，然后重定向并让应用程序输入新密码，并且我可以将它放在 CI Server Hudson 上，并整天自动执行此测试，并记录成功和错误等...

2.  新注册...类似于#1

因此，对于您的 UI 测试，我们称之为功能或 UAT 测试……然后对于真正的单元测试，这是针对 NUnit / Xunit、MSTest 等……，然后 MOQ 等……可以提供帮助。集成测试是真正测试整个应用程序与连接的系统......如文件系统或 WCF 或数据库，而不是被“模拟”

它们各有优缺点，没有一个是完美的，但大多数人最终都说单元测试是最划算的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T16:34:10.823

Visual Studio 2010 Ultimate 有一个叫做 Coded UI 测试的东西。基本上，您在 Internet Explorer 中记录您的操作，这些操作将转换为您添加断言的 C# 代码，然后您在不同的浏览器中重放这些操作。

但是，很难针对数据库支持的 Web 应用程序进行测试，因为您几乎无法确定哪一行是新添加的行。为了简化问题，您可能需要设置一个示例数据库，在按顺序运行您的测试套件之前将其重置为其初始状态。

观看有关如何使用 Coded UI 测试的各种 TechEd 视频。例如[http://www.youtube.com/watch?v=rZ8Q5EJ2bQM](http://www.youtube.com/watch?v=rZ8Q5EJ2bQM)

# android - Android ContextWrapper.Java:100

> ID：10435475
> 
> 赞同：0
> 
> 时间：2012-05-03T16:25:50.167
> 
> 标签：android, sharedpreferences, android-context

```
public void newNotification(CharSequence message) {

    prefs = new AppPreferences(getApplicationContext());

    Intent i = new Intent(GameNotification.this, ChallengeList.class);

    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, i, 0);

    NotificationManager nm = (NotificationManager)
                getSystemService(NOTIFICATION_SERVICE);

    Notification notif = new Notification(R.drawable.icon, "Ny utmaning!", System.currentTimeMillis());

    notif.setLatestEventInfo(this, "Triviation", message + " utmanar dig!", pendingIntent);

    notif.defaults |= Notification.DEFAULT_ALL;
    notif.flags |= Notification.FLAG_AUTO_CANCEL;

    //notif.vibrate = new long [] {0, 1000};

    nm.notify(prefs.id(), notif);
} 
```

这是我的通知活动，但是当我调用它时，我收到一条错误消息：

```
prefs = new AppPreferences(getApplicationContext()); 
```

LogCat 说：

```
05-03 18:20:13.441: E/AndroidRuntime(1688): java.lang.RuntimeException: Unable to start         receiver se.saxman.triviation.C2DMReceiver: java.lang.NullPointerException
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1809)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.app.ActivityThread.access$2400(ActivityThread.java:117)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.os.Looper.loop(Looper.java:130)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at java.lang.reflect.Method.invokeNative(Native Method)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at java.lang.reflect.Method.invoke(Method.java:507)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at dalvik.system.NativeStart.main(Native Method)
05-03 18:20:13.441: E/AndroidRuntime(1688): Caused by: java.lang.NullPointerException
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at se.saxman.triviation.GameNotification.newNotification(GameNotification.java:15)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at se.saxman.triviation.C2DMReceiver.onReceive(C2DMReceiver.java:63)
05-03 18:20:13.441: E/AndroidRuntime(1688):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:1798)
05-03 18:20:13.441: E/AndroidRuntime(1688):     ... 10 more 
```

我在另一个活动中使用完全相同的代码行并且它正在工作，但不是在这里。怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:12:00.887

你不能在构造函数中获取上下文，你可以在 onCreate() 中获取。查看您的代码，您是否在类的构造函数中使用 newNotification() ？

# bash - Bash排序，我不知道如何排序同一行，并选择较旧的

> ID：10435476
> 
> 赞同：2
> 
> 时间：2012-05-03T16:25:54.607
> 
> 标签：bash

我有一些问题，我没有找到，也不知道如何在我的脚本中实现良好的排序。我想对一些输入字符串进行排序，向我展示冗余（一些重复），然后从这里返回最大重复的行，如果我有更多相同的重复，例如

输入 ：

```
qwe1
qwe1
wer2
wer2
wer4 
```

输出：//我想要的

```
2 qwe1 
input:
asd1
asd1
asd1
asd2
asd2
asd2
asd3
asd3
asd3
output: // What i want
3 asd1  // If I have a the same name return id of alphabeticall first 

#!/bin/bash
sort -n|uniq -c -i | sort -dr | head -n1 
```

我尝试了一些其他的论点，但我没有找到解决方案。

对不起我的英语，请有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:52:08.620

这可能对您有用：

```
 sort | uniq -c | sort -nrs | head -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:49:25.983

```
sort | uniq -c | sort -k1nr -k2 | head -1 
```

其中`-k1nr`表示在第一列上按数字排序并反向（从高到低）
，`-k2`表示在第一个键相等的情况下，按 column2 排序（按字母顺序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:55:51.783

我认为这一切都可以在一个 awk 命令中完成。考虑一下：

```
awk '{freq[$0]++;} END {for (var in freq)
{if (freq[var]>max || (freq[var]==max && var < item)) 
{max=freq[var]; item=var} } print max, item; }' file.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:37:27.300

```
sort | uniq -c | sort -nr | awk '{if(a&&a!=$1){print a,b;exit;}a=$1;b=$2}' 
```

# maven - Maven：确定依赖项与项目是否使用较新版本的库

> ID：10435478
> 
> 赞同：1
> 
> 时间：2012-05-03T16:25:58.497
> 
> 标签：maven, versioning, maven-3

我有几套图书馆。例如：

*   核心1.0
*   核心 1.5
*   Web 1.0（使用 Core 1.0）
*   绘图 1.0（使用 Core 1.5）

当我有一个同时使用 Web 和绘图库的项目时，我的问题就出现了。我在项目的 dependencyManagement 部分中硬编码核心库的版本号，并不时更新它。我想确保如果 Web 或绘图使用较新版本的 Core，我会更新 dependencyManagement 中的版本号。

versions:display-dependency-updates 告诉我是否有任何新版本的 Core 可用，但我不想更新到更新版本，除非 Web 或绘图需要它。

有没有办法确定依赖项是否需要比我的项目使用的其他依赖项的更新版本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:33:08.790

您可以使用`mvn -Dverbose dependency:tree`它来查看依赖层次结构，它还会像您描述的那样向您显示版本冲突。

也可以`mvn versions:display-dependency-updates`用来查看更新的依赖项。

# clojure - “没有找到函数的单一方法 [...]”试图使用协议

> ID：10435480
> 
> 赞同：6
> 
> 时间：2012-05-03T16:26:13.040
> 
> 标签：clojure

我有一个 Clojure 库，它定义了一个`MQHandle`协议并对其进行了扩展

```
(ns example.mq
  (:import [java.util.concurrent BlockingQueue]))

(defprotocol MQHandle
  (send-message [this key body & params])

(extend-type BlockingQueue
  MQHandle
  (send-message [this key body & params]
    (.put this (merge {::key key, ::body body}
                      (into {} (partition 2 params)))))

(defn get-handle ^BlockingQueue [& config]
   "return a BlockingQueue tied to a thread which consumes messages
   and submits them to a remote message queue"
   ...) 
```

...但是当我尝试使用它时：

```
(require '[example.mq :as mq])

(def handle (mq/get-handle config))

(satisfies? mq/MQHandle handle)
; => true

(mq/send-message handle "key" "body")
; java.lang.IllegalArgumentException: No single method: send_message of interface:
;  com.indeed.clojure_network_repl.mq.MQHandle found for function: send-message of
;  protocol: MQHandle 
```

我不理解这个例外的含义，或者我应该做些什么不同的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T16:34:43.180

协议函数不支持其余参数。

# javascript - 如何在 YUI 事件处理程序中获取 DOM 节点？

> ID：10435481
> 
> 赞同：0
> 
> 时间：2012-05-03T16:26:15.520
> 
> 标签：javascript, dom, yui3

给定一个使用 YUI 绑定到一系列链接的通用处理程序，我如何找出哪个链接触发了事件？

```
YUI().use('node', function (Y) {
    var list = Y.one('#studentList'), links;
    links = list.all('a');
    links.on('click', function (e) {
        alert(this.get('id')); // this just shows a comma delimited list of all ids
    });
}); 
```

我想我可以单独绑定每个链接，而不是使用链接列表上的“on”习语，但对我来说，YUI 不提供对 DOM 节点的访问似乎很奇怪。深入事件对象会显示几个看起来像 DOM 节点的私有字段，但肯定必须有一种安全的方法来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:59:12.310

[`e.currentTarget`](http://yuilibrary.com/yui/docs/api/classes/DOMEventFacade.html#property_currentTarget)似乎是您正在寻找的东西：

```
links.on('click', function (e) {
    alert(e.currentTarget.get('id'));
}); 
```

从[NodeList 的`on`](http://yuilibrary.com/yui/docs/api/classes/NodeList.html#method_on)：

> 默认情况下，`this`对象将是`NodeList`订阅来自的对象，*而不是`Node`接收事件*的对象。用来`e.currentTarget`指代`Node`。

# c# - 买书做减法

> ID：10435483
> 
> 赞同：0
> 
> 时间：2012-05-03T16:26:17.507
> 
> 标签：c#, sql

我使用以下代码购买一本书，并且......`TextBox`每次我输入已售书籍的数量时，它都会`TextBox`在数据库中更新一个新值。每次书籍销售时，它都必须做减法。但是，它会更新新值。

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Return)
        {
            sql = new SqlConnection(@"Data Source=PC-PC\PC;Initial Catalog=Anbar;Integrated Security=True");
            adapter = new SqlDataAdapter("select * from Goods", sql);
            cmd = new SqlCommand();
            cmd.Connection = sql;
            cmd.CommandText = ("Update Goods set Buy =@Buy, Remain =@Remain where GoodsNumber =@GoodsNumber");
            cmd.Parameters.AddWithValue("@Buy", Convert.ToInt32(textBox1.Text));
            cmd.Parameters.AddWithValue("@GoodsNumber", Convert.ToInt32(comboBox1.Text));
            cmd.Parameters.AddWithValue("@Remain", Convert.ToInt32(comboBox3.Text) - Convert.ToInt32(textBox1.Text));
            sql.Open();
            cmd.ExecuteNonQuery();
            sql.Close();
            fill();
        }
    } 
```

它应该显示总书籍的剩余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:49:58.170

我认为问题是您`comboBox3`在更新数据库中的剩余计数后不更新。

顺便说一句，您为什么为此使用组合框？数据库中的列名也非常混乱：Buy、GoodsNumber 和 Remain。很难猜测那里存储了哪些数据。考虑诸如 ProductId、Name 和 Quantity 之类的名称。

如果我要实现类似的东西，我会从将产品加载到组合框开始：

```
private void Form_Load(object sender, EventArgs e)
{
    productsComboBox.DataSource = GetAllProducts();
    productsComboBox.DisplayMember = "Name";
    productsComboBox.ValueMember = "Id";
}

private IList<Product> GetAllProducts()
{
    List<Product> products = new List<Product>();

    // I use ConfigurationManager from System.Configuration.dll 
    // to read connection strings from App.config
    string connectionString = ConfigurationManager.ConnectionStrings["anbar"].ConnectionString;

    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        string query = "SELECT * FROM Products";
        SqlCommand cmd = new SqlCommand(query, conn);
        conn.Open();
        SqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
        {
            products.Add(new Product() { Id = (int)reader["Id"],
                                         Name = (string)reader["Name"],
                                         Quantity = (int)reader["Quantity"] });
        }
    }
    return products;
} 
```

产品简单类：

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Quantity { get; set; }
} 
```

当所选产品发生变化时，显示其详细信息：

```
private void ProductsComboBox_SelectedIndexChanged(object sender, EventArgs e)
{
    Product product = productsComboBox.SelectedItem as Product;
    qtyTextBox.Text = product.Quantity.ToString();
    // I use NumericUpDown control to input numbers
    // Minimum is set to 1
    qtyToSellNumericUpDown.Maximum = product.Quantity;
} 
```

最后 - 当我输入要出售的数量（1..当前数量）时，我执行以下操作：

```
private void ButtonSell_Click(object sender, EventArgs e)
{
    Product product = productsComboBox.SelectedItem as Product;
    int qtyToSell = (int)qtyToSellNumericUpDown.Value;
    SellProduct(product, qtyToSell);
    product.Quantity -= qtyToSell; // update product
    qtyTextBox.Text = product.Quantity.ToString(); // update current quantity 
}

private void SellProduct(Product product, int qtyToSell)
{
    string connectionString = ConfigurationManager.ConnectionStrings["anbar"].ConnectionString;

    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        string query = "UPDATE Products SET Quantity = @Quantity WHERE Id = @Id";
        SqlCommand cmd = new SqlCommand(query, conn);
        cmd.Parameters.AddWithValue("@Id", product.Id);
        cmd.Parameters.AddWithValue("@Quantity", product.Quantity - qtyToSell);
        conn.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

而已。是的，有很多需要改进的地方，但是这个小示例很有效。

更新：如何将连接字符串添加到 App.Config

```
<configuration>
  <connectionStrings>
    <add name="anbar" 
         connectionString="Data Source=PC-PC\PC;Initial Catalog=Anbar;Integrated Security=True"                 
         providerName="System.Data.SqlClient"/>
  </connectionStrings>
</configuration> 
```

# jquery - jQuery ajax 驱动的菜单？

> ID：10435484
> 
> 赞同：0
> 
> 时间：2012-05-03T16:26:25.177
> 
> 标签：jquery, ajax, json, menu, dynamic-data

问题：

我正在寻找一个 jQuery 菜单组件。

类似的东西： http:
[//www.designchemical.com/lab/jquery-drill-down-menu-plugin/examples/](http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/examples/)

只是它使用的数据应该通过 AJAX / JSON**动态填充。**

我可以找到很多废话，其中大部分在视觉上非常漂亮，但它们都不会动态填充菜单数据。

有人知道动态数据的好菜单插件吗？
我真的不在乎它们是否复杂，只要我不必自己编写大部分菜单，我就可以处理。最好是免费和 MIT/BSD/LGPL 许可。

# jquery - jQuery高亮显示更多功能

> ID：10435488
> 
> 赞同：0
> 
> 时间：2012-05-03T16:26:32.880
> 
> 标签：jquery, jquery-selectors

我正在尝试单击一个侧面导航项，然后让它突出显示我的内容中的一个 div，但还需要打开更多信息链接。这是我到目前为止的代码。

这是我目前拥有的侧面导航代码。我知道这不是很漂亮的代码。

```
 <ul class="side">
      <li><a href='Default.aspx#range' onclick = "document.getElementById('range').style.backgroundColor = '#FFFF66';  document.getElementById('satisfaction').style.backgroundColor = '#ffffff';">Range</a></li>
      <li><a href='Default.aspx#satisfaction' onclick = "document.getElementById('satisfaction').style.backgroundColor = '#FFFF66'; document.getElementById('range').style.backgroundColor = '#ffffff';">Satisfaction</a></li>
    </ul> 
```

这是我的内容代码..

```
 <div id="Range">
            <div class="header">Range<br /><a id="button1" href="javascript:toggle2('colcontent1','button1');" ><img src="images/more-info-button.png" width="76" height="20" /></a></div>
            <div class="col2">;lekjra</div>
            <div class="col3">;aeihba</div>
            <div class="col4">aeb;</div>
    </div> <!-- End of priceRange div -->
    <div style="clear:both;"></div>
    <div id="collapse">
      <div id="colcontent1">
            <div class="header"></div>
            <div class="col2">jls.r;</div>
            <div class="col3">a;ebb</div>
            <div class="col4">;ihae</div>
      </div>
    </div>
    <div id="satisfaction">
         <div class="header">Satisfaction <br /><a id="button2" href="javascript:toggle2('colcontent2','button2');" ><img src="images/more-info-button.png" width="76" height="20" /></a></div>
            <div class="col2">;iahib</div>
            <div class="col3">ai;hei</div>
            <div class="col4">akhge'l</div>
    </div> <!-- End of satisfaction div -->
    <div style="clear:both;"></div>
    <div id="collapse">
         <div id="colcontent2">
            <div class="header"></div>
            <div class="col2">;agei;</div>
            <div class="col3">alghel;</div>
            <div class="col4">ah;gioehai</div>
      </div>
    </div> 
```

如果您有任何建议，请让我知道！！

谢谢！

# linux - eval函数如何在makefile中使用？

> ID：10435490
> 
> 赞同：11
> 
> 时间：2012-05-03T16:26:45.847
> 
> 标签：linux, makefile

在手册中：

> eval 函数非常特殊：它允许您定义非常量的新 makefile 结构；这是评估其他变量和函数的结果。eval 函数的参数被扩展，然后扩展的结果被解析为 makefile 语法。
> 
> 重要的是要意识到 eval 参数被扩展了两次。首先由 eval 函数，然后在将其解析为 makefile 语法时再次扩展该扩展的结果。这意味着您在使用 eval 时可能需要为“$”字符提供额外的转义级别。

“扩大了两次”让我感到困惑。

例如，我创建了一个 makefile ：

```
define func
    tmp = $(OBJPATH)/$(strip $1)
    objs += $$(tmp)
    $$(tmp) : $2
        gcc $$^ -o $$@
endef

all : foo

$(eval $(call func, foo, 1.c)) 
```

eval 函数将如何扩展？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-03T18:09:45.517

理解它的最简单方法是将 eval 替换为 info：

```
$(info $(call func, foo, 1.c)) 
```

这将显示第一次扩展的结果作为输出，因此您可以看到 make 实际解析的内容。您没有提供 OBJPATH 变量的值，但如果是`obj`例如，那么在您的情况下，（调用函数的）第一次扩展会导致：

```
tmp = obj/foo
objs += $(tmp)
$(tmp) : 1.c
    gcc $^ -o $@ 
```

然后 make 解析器将对此进行评估，并在此过程中再次对其进行扩展，因此诸如此类的内容`$(tmp)`将被扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-09T09:42:33.433

这对我来说一直是个问题，但我找到了一个很好的解决方法。就我而言，它与 AWS docker login 有关。我以前在我的 shell 脚本中有：

`eval $(aws ecr get-login --region eu-west-1 --no-include-email --profile someprofile)`

但是当把它放进去时`Makefile`它不起作用。解决方法是将行更改为：

`$$(aws ecr get-login --region eu-west-1 --no-include-email --profile someprofile)`

# php - 如果条件在 php 中有效，这是

> ID：10435492
> 
> 赞同：0
> 
> 时间：2012-05-03T16:26:49.357
> 
> 标签：php

对于 php Web 服务，我遇到了一种情况，用于计算具有最小 2 和最大 5 多项选择的问题的百分比，所以我正在尝试这样
我正在使用以下条件

```
 $x=0;
 $y=5;

if($x < $row[0] < $y) 
```

row[0] 用于从我尝试过的查询中获取值，但它不能正常工作是否有任何其他计算方法。我也试过喜欢

```
 select (count(showdown_choice_id)*100/(select count(showdown_id) from showdown_response where  showdown_id='$showid')) from showdown_response where showdown_choice_id='$row[0]' and showdown_id=".$showid 
```

但在 while 循环（包含值 1 到 5）中，每个选择都重复相同的百分比。

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:29:19.450

表达方式

```
if($x < $row[0] < $y) 
```

应该

```
if($x < $row[0] && $row[0] < $y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:29:24.793

尝试

```
$x=0;
$y=5;

if($row[0] > $x && $row[0] < $y) 
```

# iphone - '应用程序试图在目标上显示一个 nil 模式视图控制器' 尝试打开邮件编写器时出现错误/崩溃

> ID：10435496
> 
> 赞同：23
> 
> 时间：2012-05-03T16:26:56.917
> 
> 标签：iphone, cocoa-touch

我有一个简单的应用程序，它打开一个模式视图来发送电子邮件。我正在使用 Xcode 4.2 和 iOS 5，并且正在使用 iOS 模拟器进行测试。由于未捕获的异常“NSInvalidArgumentException”，应用程序崩溃并 *终止应用程序，原因：
“应用程序试图在目标上呈现一个 nil 模态视图控制器。”*

执行该行时：

```
 [self presentModalViewController:mailComposer animated:YES]; 
```

虽然我已经初始化了对象'mailComposer'。

**com_FirstViewController.m 类：**

```
#import "com_FirstViewController.h"
...
@implementation com_FirstViewController
....
....
-(void)showEmailComposer {

Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
if (mailClass != nil)
{
    if ([mailClass canSendMail]) {
                    NSLog(@"showEmailComposer: Calling displayComposerSheet");
        [self displayComposerSheet];

    } else {
                    NSLog(@"showEmailComposer: Calling launchMailAppOnDevice");
        [self launchMailAppOnDevice];
    }
}
else {
            NSLog(@"showEmailComposer: Calling launchMailAppOnDevice");
    [self launchMailAppOnDevice];
}
}

#pragma mark -
#pragma mark Compose Mail

-(void) displayComposerSheet {

    mailComposer = [[MFMessageComposeViewController alloc] init];
    mailComposer.messageComposeDelegate = self;

    // Set the mail title
    [mailComposer setTitle:@"Mail Title"];

    // Set the recipients
    NSArray *toRecipients = [NSArray arrayWithObject:@"user@company.com"];

    [mailComposer setRecipients:toRecipients];

    // EMail Body
    NSString *mailBody = @"This is the mail body";
    [mailComposer setBody:mailBody];

    NSLog(@"present the modal view ctlr");
    [self presentModalViewController:mailComposer animated:YES];
}
...
... 
```

请问有什么指点吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-05T05:29:52.437

我也遇到过类似的问题。我分配了一个实例`MFMailComposeViewController`并尝试以模态方式呈现它。我也有一个例外：

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Application tried to present a nil modal view controller on target`

这是因为邮件选项在 iPhone 的设置中被禁用。当设备中未设置邮件帐户时，也可能出现这种情况。所以`MFMailCompseViewController`实例将是`nil`并且以模态方式呈现它会导致崩溃。

我使用的`canSendMail`方法`MFMailComposeViewController`来解决这个问题。

```
Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
if (mailClass != nil) {
    MFMailComposeViewController * mailView = [[MFMailComposeViewController alloc] init];
    mailView.mailComposeDelegate = self;

    //Set the subject
    [mailView setSubject:emailSubject];

    //Set the mail body
    [mailView setMessageBody:emailBody isHTML:YES];

    //Display Email Composer
    if([mailClass canSendMail]) {
        [self.navControl presentModalViewController:mailView animated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-03T16:35:28.040

```
 mailComposer = [[MFMessageComposeViewController alloc] init]; 
```

在我看来，是问题的根源。模拟器无法发送 SMS 消息，因此初始化方法可能返回 NULL。无论如何，sou 似乎想发送电子邮件，所以我说你需要使用

```
 mailComposer = [[MFMailComposeViewController alloc] init]; 
```

# sqlite - SQLite 3.0 中的 integer(255) 字段是什么，我需要更改它吗？

> ID：10435497
> 
> 赞同：0
> 
> 时间：2012-05-03T16:27:08.830
> 
> 标签：sqlite, integer

我正在开发的 Rails 应用程序中有一个数据库，它有一个`product_type`定义为 varchar(255) 的字段（在 SQLite 管理器中），最终成为外键。我将名称`product_type_id`和类型更改为`integer`在 Rails 中使用迁移以使用另一个`product_type`文件中的现有 id 字段。完成后，Firefox 中的 SQLite 管理器将类型显示为，`integer(255)`而不仅仅是`integer`.

什么是`integer(255)`? 这里对另一个问题的回答说 (255) 是显示宽度。那是对的吗？目前数据库中没有数据。我是否应该删除并重新创建该字段以获得`integer`，否则两个字段上的数据类型将不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:12:47.897

这`integer(255)`是因为字符串字段 [ `varchar(255)`] 已转换为整数，并且 DB 保持字段大小，因此在更改期间转换时它可能会保存旧数据。显然，大多数数据库不支持那么大的整数。有些人会忽略尺寸规格，但其他人会出错。无论如何，结果不是我想要的。

我发现取消限制的方法是在 Rails 中执行迁移并将限制设置为 nil。

```
class RemoveIntegerLimits < ActiveRecord::Migration
  def up
    change_column :inv_x_refs, :company_id, :integer, limit: nil
  end
end 
```

# javascript - 将外部图像加载到工具提示 onMouseOver 事件处理程序中

> ID：10435498
> 
> 赞同：2
> 
> 时间：2012-05-03T16:27:13.200
> 
> 标签：javascript, jquery, event-handling, jquery-tools, onmouseover

我正在为一个基于搜索参数加载大量照片的页面构建一个汽车购物网站的动态工具提示。加载的图像是我们在本地托管的缩略图。

我遇到麻烦的地方是添加功能，因此当有人将鼠标悬停在缩略图上时，工具提示会呈现更大的汽车图像，以及年份、品牌、型号和价格。这些图像托管在外部域上。

我将 jQuery Tools Tooltip 插件用于核心功能。当谈到这些更中间的 JavaScript 概念时，我有点新手，我似乎在 Google 上找不到任何有助于我用例的教程。

我的 HTML

```
<div id="tooltip" class="tooltip">
    <img  src="http://placehold.it/320x240" />
    <p>2012 Infiniti GSX $29,800</p>
</div><!-- #tooltip -->
<ul id="thumbs">        
    <li>
        <a href="#">
        <img src="http://www.web2carz.com/images/thumbs/22/80/thumb_large_70364184.jpg" />
        </a>
    </li>               
</ul>​ 
```

我的 JavaScript：

```
// Image Tooltips
jQuery("#thumbs li a").tooltip({
    tip: '#tooltip',
    effect: 'fade',
    relative: true,
    position: 'bottom center',
    delay: 0,
    offset: [5, 150]
}).dynamic({ top: { direction: 'down', bounce: true } });​ 
```

我最初的假设是添加这样的函数（[在此处找到](https://stackoverflow.com/questions/1534516/assign-the-onmouseover-event-handler)）：

```
function loadImg() {
    var img = new Image();
    img.src='http://placehold.it/320x240';
    img.id = 'toolImg';
    return img;
    document.getElementById('tooltip').innerHTML += img;
  } 
```

将事件处理程序添加到我的锚点，例如：`<a href="#" onMouseOver="loadImg()">`然后将加载的图像附加到工具提示：

`document.getElementById('tooltip').innerHTML += 'img';`

我似乎无法找到正确的后续步骤来实现我想要的功能。

我还设置了当前代码的 jsfiddle：

[http://jsfiddle.net/aRJ84/10/](http://jsfiddle.net/aRJ84/10/)

## 回答

所以我让它工作了，这是我的功能代码：

HTML：

```
<ul id="thumbs">
 <li>
  <a href="#" onMouseOver="loadImg('http://placehold.it/720x480', 'Honda')">
   <img src="http://www.web2carz.com/images/thumbs/22/80/thumb_large_70364184.jpg" />          
  </a>
 </li>
</ul> 
```

JavaScript：

```
function loadImg(img, makeName) {
  var bla = "<img src=\"" + img + "\"/>";

  bla += "<br><p>This is  great car</p>" + makeName;

  document.getElementById('tooltip').innerHTML = bla;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:19:39.867

尝试将您的事件处理程序定义更改为：

```
<a href="#" onMouseOver="loadImg()"> 
```

看起来您实际上正在做的只是为`onMouseOver`事件提供对您的函数的*引用*，这与告诉它***调用***函数不同。添加括号应该会有所帮助。

我去了您的 jsFiddle 尝试进行一些编辑，但`loadImg`在您的 JavaScript 中看不到该功能。我不想做任何伤害，所以我没有做任何改变。希望这可以帮助 -

# python - 旅行推销员蟒蛇

> ID：10435501
> 
> 赞同：0
> 
> 时间：2012-05-03T16:27:21.950
> 
> 标签：python, traveling-salesman

我正在尝试创建一个 python 脚本来计算一组大学的最短行程。我需要添加一个起点，但我将自己迷惑到无法相信的地步。谁能帮我弄清楚从这里去哪里

```
 from Tkinter import *
import tkMessageBox, tkFileDialog
import json
import re
from urllib import urlopen
import math
class Application(Frame):
    collegelist = []
    collegelist1 = []
    def __init__(self,master=None):
        Frame.__init__(self,master)
        self.pack()
        self.createWidgets()
    def createWidgets(self):
        self.top_frame = Frame(self)
        self.mid_frame = Frame(self)
        self.bot_frame = Frame(self, bg = 'red')
        self.top_frame.pack(side = 'top')
        self.mid_frame.pack(side = 'top')
        self.bot_frame.pack(side = 'top')
        #top frame

        self.label1 = Label(self.top_frame, text = "Your College Choices", bg ='red')
        self.label1.pack(side = 'left', padx='40', pady='0')
        self.label2 = Label(self.top_frame, text = "Your Tour Selections", bg ='green')
        self.label2.pack(side = 'right', padx='40')

        #mid frame
        self.mylist = Listbox(self.mid_frame,
                              bg = 'black',
                              fg = 'gold')
        self.mylist.pack(side='left')
        self.my_button1 = Button(self.mid_frame, text = '>>>', command=self.getlist)
        self.my_button2 = Button(self.mid_frame, text = '<<<', command=self.returnlist)
        self.my_button1.pack(side="left")
        self.my_button2.pack(side="left")
        self.mylist1 = Listbox(self.mid_frame, 
                              selectmode=DISABLED,
                              bg = 'black',
                              fg = 'gold')
        self.mylist1.pack(side='right')
        #bottom frame
        self.openbutton = Button(self.bot_frame, text='Open File', command=self.openfile, fg ='green')
        self.openbutton.pack(side='left')
        self.my_button = Button(self.bot_frame, text = 'Route', fg ='green', command=self.collegeroute)
        self.my_button.pack(side='left')
        self.quit_button = Button(self.bot_frame, text = 'Quit', 
                                  command = self.quit, fg = 'green')
        self.quit_button.pack(side='left')

    def openfile(self):
        filename = tkFileDialog.askopenfilename(title='Choose a file')
        if filename:
            clist = open(filename, "r")
        for line in clist.readlines():
            for i in line.split():
                self.collegelist.append(i)
        for college in self.collegelist:
            self.mylist.insert(1,college)
    def getlist(self):
    # get selected line index
        index = [int(x) for x in self.mylist.curselection()]
        print index
        for i in index:
            seltext = self.mylist.get(i)
            self.mylist.delete(i)
            self.mylist1.insert(1,seltext)
            self.collegelist1.append(seltext)
            print seltext
    def returnlist(self):
    # get selected line index
        index = [int(x) for x in self.mylist1.curselection()]
        for i in index:
            seltext = self.mylist1.get(i)
            self.mylist1.delete(i)
            seltext = seltext.strip()
            seltext = seltext.replace(' ', '')
            self.mylist.insert(0,seltext)
            self.collegelist1.remove(seltext)
    def collegeroute(self):
    # get selected line index
        global tuplist
        self.tuplist =[]
        for college in self.collegelist1:
            f = urlopen('http://graph.facebook.com/%s' % college) #load in the events
            d = json.load(f)
            longitude = d["location"]["longitude"]
            latitude = d["location"]["latitude"]
            name = d['name']
            self.tuplist.append((latitude, longitude))
        cartesian_matrix(self.tuplist)

def cartesian_matrix(coords):
    '''create a distance matrix for the city coords
      that uses straight line distance'''
    matrix={}
    for i,(x1,y1) in enumerate(coords):
        for j,(x2,y2) in enumerate(coords):
            dx,dy=x1-x2,y1-y2
            dist=math.sqrt(dx*dx + dy*dy)
            matrix[i,j]=dist
        tour_length(matrix,collegelist1)
        return matrix
def tour_length(matrix,tour):
    total=0
    num_cities=len(tour)
    print tour
    print num_cities
    for i in range(num_cities):
        j=(i+1)%num_cities
        city_i=tour[i]
        city_j=tour[j]
        total+=matrix[city_i,city_j]
    print total
def getRad(x):
    return float(x) * (math.pi/180.0)
def main():
    app = Application()
    app.master.title("My Application")
    app.mainloop()

if __name__ == "__main__":
    main() 
```

无法让 tour_length 正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:31:10.790

> 无法让 tour_length 正常工作

我看到的唯一明显的问题`tour_length`是你没有返回结果。在末尾添加以下内容：

```
return total 
```

经过仔细检查，以下内容也很可疑：

```
 tour_length(matrix,collegelist1)
    return matrix 
```

首先，它是错误的缩进。其次，您忽略了`tour_length`.

错误缩进可能是导致异常的原因（您在`tour_length`完全初始化之前调用`matrix`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:42:30.747

您正在调用 tour_length 并在错误的地方从 cartesian_matrix 返回。你只做矩阵的一行，然后调用 tour_length 并返回。

# html - 在 Chrome 和 Safari 中禁用应用程序缓存

> ID：10435508
> 
> 赞同：12
> 
> 时间：2012-05-03T16:27:51.673
> 
> 标签：html, google-chrome, safari, cache-manifest, html5-appcache

我正在使用 AppCache 来启用 Web 应用程序的离线访问。问题是，对于开发来说，每次我对 JavaScript 进行更改时，我还需要对清单进行更改（以触发缓存字段的重新下载）。现在我知道在FireFox中你可以禁用AppCache（实际上当你第一次访问页面时会提示你是否授予网站在本地存储数据的权限）这使得开发更加方便。

我的问题是 chrome 和 safari 是否有类似的选项？我知道我可以通过 chrome://appcache-internals/ 在 chrome 中查看/编辑 AppCache，我正在寻找一种禁用它的方法。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T13:56:10.640

在 Chrome 中，使用隐身模式。好吧，这可能不是它最初的用途，但它确实可以完成工作。没有任何东西被缓存，现在各地的开发人员都有一个方便的借口来解释为什么他们可能会使用隐身模式。

我假设 Safari 中有类似的“私人浏览”功能。

**编辑：**我从您的评论中看到您只想禁用缓存清单功能。**尝试使用--disable-application-cache**开关从命令行启动 Chrome 。

# windows-8 - 在 SuspensionManager.SessionState 中存储字符串以外的内容

> ID：10435510
> 
> 赞同：4
> 
> 时间：2012-05-03T16:27:55.580
> 
> 标签：windows-8, windows-runtime

示例应用程序包含一个 Suspension Manager 类，该类将会话状态存储在 Dictionary 中，但从不尝试在其中存储除字符串之外的任何内容。

每当我存储除字符串之外的任何其他内容，然后触发序列化时，我都会收到以下错误

不应使用数据合同名称为“RuntimeType:http://schemas.datacontract.org/2004/07/System”的类型“System.RuntimeType”。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

我是否必须做其他事情才能在 SessionState 中存储其他类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T13:52:07.613

你需要做两件事：

首先，确保您正在（反）序列化的类型使用`DataContract`来自的属性进行修饰，`System.Runtime.Serialization`并确保其成员被适当地修饰。例如在 C# 中：

```
[DataContract]
public struct Product
{
     [DataMember]
     public Guid Id { get; set; }

     [DataMember]
     public DateTime ManufactureDate { get; set; }

     [DataMember]
     public decimal Cost { get; set; }  
} 
```

`AddKnownType<T>()`其次，在尝试（反）序列化之前，您需要调用 SessionManager （其中 T 是您需要的类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:28:38.667

查看 SessionManager 代码它只是字符串类型，猜你将不得不“自己动手” [http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2/sourcecode?fileId=43552&pathId=6033729](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2/sourcecode?fileId=43552&pathId=6033729)

# javascript - 捕获传入的 URL 参数，然后使用 Javascript 传递给 iFrame Src

> ID：10435512
> 
> 赞同：23
> 
> 时间：2012-05-03T16:27:58.717
> 
> 标签：javascript, iframe, google-analytics, query-string, window.location

所以试图弄清楚如何在 Javascript 中使用 window.location 来做到这一点。我正在将用户发送到我们的网站，并附带一个带有 Google Analytics 代码的 URL，我需要将其传递给该页面上的 iframe src。我假设 Javascript 可以做到这一点（注意 - 我不能使用 PHP）......

这就是我想要做的：

我会将用户发送到包含所有活动数据的页面。例如，用户会点击此链接： [http ://www.xyz.com/index.html?utm_source=Facebook&utm_campaign=Facebook+May&utm_medium=click](http://www.xyz.com/index.html?utm_source=Facebook&utm_campaign=Facebook+May&utm_medium=click)

他们将被定向到该页面，然后该页面上有此 iFrame。商店端的代码需要获取 utm_source、utm_campaign、utm_medium 并将这些部分包含在 IFRAME SRC 所以这一点：

```
<iframe height="960px" frameborder="0" scrolling="no" width="958px" src="http://www.abc.com/minis"></iframe> 
```

现在变成：

```
 <iframe height="960px" frameborder="0" scrolling="no" width="958px" src="http://www.abc.com/minis?utm_source=Facebook&utm_campaign=Facebook+May&utm_medium=click"></iframe> 
```

任何 javascript 建议将不胜感激。注意 - 我不能使用 PHP。

***更新：让它工作！是的，但现在我需要对其进行一些编辑：***

所以说被点击的附加网址是这样的：

```
http://abc.com/index.html?apple&orange&peach 
```

我需要 iframe src 是这个

```
 http://xyz.com/minis?orange&peach 
```

我在脚本中移动了一些东西，但现在只抓取橙色而不是其他 & 属性（桃子）。请告知是否有更好的工作方式（没有所有参数，然后根据输入的链接，一些 & 将是未定义的：

```
<body>

<script type="text/javascript">

$(function() {

var loc = window.location.toString(),
params = loc.split('&')[1],
params2 = loc.split('&')[2],
params3 = loc.split('&')[3],
params4 = loc.split('&')[4],
params5 = loc.split('&')[5],
params6 = loc.split('&')[6],
  iframe = document.getElementById('myIframe');
alert(iframe.src); 
iframe.src = iframe.src + '?' + params + '&' + params2 + '&' + params3 + '&' + params4+ '&' + params5;
alert(iframe.src); 

});
</script>
<iframe id="myIframe" src="http://www.xyz.com/minis"></iframe>

</body> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T16:40:41.967

这个小片段应该做，在这里你所要做的就是抓住之后的位？作为字符串并将其附加到 iframe 源。

```
var loc = window.location.toString(),
    params = loc.split('?')[1],
    iframe = document.getElementById('myIframe');

iframe.src = iframe.src + '?' + params;​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-11T19:55:34.017

只需使用`window.location.search`.

```
const iframe = document.getElementById('frame');
iframe.src = iframe.src + window.location.search;​​​​​​​​​​​​​​​​ 
```

# linux - 在 Mocha.js 测试上运行“make”时，在已安装的驱动器上，出现 Permission Denied 错误 127

> ID：10435513
> 
> 赞同：0
> 
> 时间：2012-05-03T16:28:09.963
> 
> 标签：linux, node.js, makefile, mocha.js

我有一个 node.js 应用程序位于 linux (Ubuntu) 中的 ntfs 安装驱动器中。makefile 内容如下所示：

```
test:
    @./node_modules/.bin/mocha -u tdd 
```

在此运行“make test”时，出现错误：

```
make: execvp: ./node_modules/.bin/mocha: Permission denied
make: *** [test] Error 127 
```

甚至在运行“sudo make test”时也会发生这种情况

列出该目录的权限时，该文件具有执行权限：

```
ls -l node_modules/.bin/
total 3
-rwxrwxrwx 1 root root 208 2012-05-01 14:15 express
-rwxrwxrwx 1 root root 191 2012-05-01 14:15 express.cmd
-rwxrwxrwx 1 root root 200 2012-05-01 14:15 mocha
-rwxrwxrwx 1 root root 202 2012-05-01 14:15 _mocha
-rwxrwxrwx 1 root root 185 2012-05-01 14:15 _mocha.cmd
-rwxrwxrwx 1 root root 183 2012-05-01 14:15 mocha.cmd 
```

将此目录复制到已安装驱动器之外的位置，并在那里运行“sudo make test”成功。

它通过 /etc/fstab 挂载为以下行：

```
/dev/disk/by-label/Files    /media/d    ntfs-3g defaults,user,local=en_US.utf8 0 0 
```

我怎样才能让它在 ntfs 安装的驱动器中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:45:46.860

卷已安装`noexec`。而是重新安装它`exec`。

# ruby - 如何编写更好的代码来传递键值参数？

> ID：10435518
> 
> 赞同：0
> 
> 时间：2012-05-03T16:28:28.110
> 
> 标签：ruby, coding-style

我想以更像 Ruby 的风格为 Ruby 编写代码，但在处理参数传递时遇到了问题。

我必须看看是否`ABC`为零。如果`ABC`是 nil，我会将另一个符号传递给`dosomething`，如果不是，我将传递另一种类型的哈希值来计算。

由于 Ruby 不像 Java，它可以传递不同类型的参数（不同的键）。

我怎样才能使下面的代码更漂亮？

`do_manything`将, `do_otherthings`,合并`do_manythings_again`到一个函数中不是我的答案，因为我会`dosomething`在代码中的很多地方调用：

```
if ABC.nil?
Apple.dosomething (:foo => DEF) { |a| 
     a.do_manything
     a.do_otherthings
     a.do_manythings_again  
}
else
Apple.dosomething (:bar => ABC) { |a| 
     a.do_manything
     a.do_otherthings
     a.do_manythings_again  
}
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:51:22.257

使用三元运算符。

```
Apple.dosomething (ABC.nil? ? {foo:DEF} : {bar:ABC}) do |a|
  a.do_manything
  a.do_otherthings
  a.do_manythings_again
end 
```

这是格式 `condition ? return_if_true : return_if_false`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:04:17.250

您可以切换您发送的哈希值：

```
opts = ABC.nil? ? {foo:DEF} : {bar:ABC}
Apple.dosomething(opts) do |a|
  do_many_things
  do_other_things
  do_many_things_again
end 
```

...或者您可以将 lambda 作为块传递：

```
stuff_to_do = ->(a) do
  do_many_things
  do_other_things
  do_many_things_again
end

if ABC.nil?
  Apple.dosomething(foo:DEF,&stuff_to_do)
else
  Apple.dosomething(bar:ABC,&stuff_to_do)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:51:07.117

你可以这样做：

```
options = if ABC.nil? then { foo: DEF } else { bar: ABC } end

Apple.do_something options do |apple| 
  apple.instance_eval do
    do_many_things
    do_other_things
    do_many_things_again
  end
end 
```

`_`按照惯例，名称和标识符中的单词用下划线 ( )分隔，而`do`/`end`用于多行块。

另外，我相信这个问题属于[Code Review](https://codereview.stackexchange.com/)。

# c# - 什么 .NET 数据模型可以让我忘记 ID？

> ID：10435534
> 
> 赞同：1
> 
> 时间：2012-05-03T16:29:24.517
> 
> 标签：c#, database, linq, entity-framework, abstraction

我想利用 .NET 的数据框架，但我对它们的工作方式有点困惑，我不确定我想要的是否可行。（我已经用 PHP 框架完成了很多工作，所以我希望 .NET 也能做到这一点！）简而言之，我希望我的业务逻辑与数据库无关，并且在某种意义上，与以下事实无关它根本就是一个数据库。

像这样的查询让我很恼火：

```
var productNames =
    from p in context.Products
    where seller.SellerID == mySeller.SellerID
    select p.Name; 
```

相反，我想做：

```
var productNames =
    from p in context.Products
    where seller == mySeller
    select p.Name; 
```

本质上，我希望我的业务逻辑不*关心*ID 映射。部分原因是因为在一些表中，ID 具有真正的意义。（我正在使用的一些表是从另一个应用程序域导入的，我需要能够直接使用这些 ID，但对于我自己的类型，ID 是偶然的。）

这是示例中的一个小问题，但总的来说，我希望能够完全在对象的世界中工作，并且或多或少地忘记底层数据库的现实。这只是为我的类定义等价运算符的问题吗？

总结：什么 .NET 数据框架为我提供了对象世界最干净的数据库抽象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:35:07.780

如果产品和卖家之间存在关系（我不知道您的代码示例中的卖家是什么），那么 EF 让您执行 p.Seller（或者 p.Sellers，如果每个产品可以有多个卖家）。

但这似乎无助于您想做的事情。`seller == mySeller`一点都不清楚。什么决定了平等？通常，您有一个主键来建立相等性。因此比较 ID 仍然有意义。此外，它通常也更有效率。

另一种选择是重载`==`运算符。这允许您编写一个比较 ID 的方法，该方法对操作员的用户不可见。但是，这可能会或不会在您的查询中起作用，因为它无法转换为 SQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:36:40.270

如果您只是尝试比较对象而不必使用属性，则可以在类中覆盖[Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)。然而，这是一个坏主意，因为它隐藏了正在发生的事情的逻辑。我强烈反对

# java - Java - 使用递归查找单词的排列？

> ID：10435536
> 
> 赞同：1
> 
> 时间：2012-05-03T16:29:26.353
> 
> 标签：java

我有一个程序，它会找到作为命令行参数给出的单词的所有可能排列，但是我无法从程序中获得任何输出，程序编译得很好，当我运行完程序时，我可以'看不出有什么问题。有任何想法吗？

```
 import java.io.*;
02   
03  public class Anagrams
04  {
05      private static char [] word;
06      private static char [] permutation;
07      private static boolean [] characterUsed;
08   
09       
10       
11      public static void main(String [] args)throws Exception
12      {
13        
14         word = args[0].toCharArray();
15         permutation = new char[word.length];
16         characterUsed =  new boolean[word.length];
17         printPermutations(0);
18      }//main
19       
20     private static void printPermutations(int currentIndex)throws Exception          
02     {
03   
04      if(currentIndex == permutation.length)
05          System.out.println(permutation);
06      else
07      {
08          for(int index=0;index<word.length-1;index++)
09          {
10  //if the character at that index hasn't been used       
11             if(!characterUsed[index]);
12              {
13                 //mark character at this position as in use
14                 characterUsed[index] = true;
15                 //put the character in the permutation
16                permutation[index]= word[currentIndex];
17                 printPermutations(currentIndex +1);
18                 characterUsed[index] = false;
19               }//if
20           }//for
21         }//else
22       }//printPermutation
41  }//Anagrams 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:36:56.997

改变

`permutations[index] = permutations[currentIndex];`

至

`permutations[index] = argument[currentIndex];`

`premutation`尚未预先填充，因此您始终将其分配给空字符。

将来做类似的事情`System.out.println("<"+myString+">");`对这类问题很有帮助。

并改变

`for (int index = 0; index < argument.length-1; index++)`

至

`for (int index = 0; index < argument.length; index++)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:45:38.037

不确定这是否是唯一的问题，但这条线看起来也很可疑：

```
for (int index = 0; index < argument.length - 1; index++) 
```

您的意思是不要使用`char`数组中的最后一个吗？你可能的意思是：

```
for (int index = 0; index <= argument.length - 1; index++) 
```

或者

```
for (int index = 0; index < argument.length; index++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:46:42.457

它不打印任何内容的原因是因为 for 循环中的错误。尝试

for (int index = 0; index < argument.length; index++)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T23:54:40.537

我相信问题出在第 11 行和第 12 行。你真的打算拥有 ; 在 if 条件结束时？

```
10  //if the character at that index hasn't been used       
11             if(!characterUsed[index]); 
```

希望有帮助..

# vb.net - 禁用列表框项目

> ID：10435537
> 
> 赞同：0
> 
> 时间：2012-05-03T16:29:30.873
> 
> 标签：vb.net, winforms, listbox

据我所知，没有办法将 ListBox 控件中的特定项目变灰/禁用？

我想列出需要回答的调查，但灰色/禁用用户已经回答的调查。

有人对我应该如何做有一些建议吗？或者有什么办法可以用 ListBox 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:49:29.573

您将需要进行自定义绘图来处理此问题。抬头`OwnerDraw`

典型（和更简单）的模式就是不将这些项目包含在 ListBox 中。

另一种方法是`ListView`在详细信息视图模式下使用。然后您可以修改每个项目的前/后颜色、字体等。

# visual-studio-2010 - 如何在 C# 程序中设置卸载选项？

> ID：10435538
> 
> 赞同：3
> 
> 时间：2012-05-03T16:29:35.563
> 
> 标签：visual-studio-2010, c#-4.0

我想在我的 C# 程序中创建一个卸载选项？你能帮忙吗？并提供一些代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:31:36.953

您可以创建一个安装项目，该项目将自动添加对卸载的支持。根据`Other Project Types`你有`Setup and Deployment`。有**InstallShield LE**和**Visual Studio Installer**。如果您在 Visual Studio 安装程序项目下选择安装项目，您将卸载作为构建项目的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:32:22.667

如果您通过 部署应用程序`Visual Studio Setup and Deployment Project`，则卸载程序将作为安装的标准配置。它将在控制面板的添加/删除程序中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:33:06.740

看这个视频

[http://www.youtube.com/watch?v=Z-xFLltALg0](http://www.youtube.com/watch?v=Z-xFLltALg0)

如果您希望可执行文件自行删除。又称自毁。查看此博客[http://blog.pedroliska.com/2010/05/20/c-self-destruct-windows-app/](http://blog.pedroliska.com/2010/05/20/c-self-destruct-windows-app/)

# sql-server-2008 - 如何在产品/类别上使用我自己的 PK

> ID：10435541
> 
> 赞同：0
> 
> 时间：2012-05-03T16:30:02.137
> 
> 标签：sql-server-2008, nopcommerce

我正在努力将我的内部产品数据库与 nopCommerce 同步，因此大多数产品已经存在于内部数据库中，我想将它们上传到 SQL Server nop 数据库。

我想重新使用内部数据库中的所有 PK，因为它可以让我轻松匹配它们并自动同步。它不允许我手动添加 PK，因为 PK 在 DBMS 中设置为自动增加。

如何更改它以便我可以添加自己的 PK 编号，但如果我使用管理员 CP 并手动添加产品，我还希望数据库继续正常运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:35:28.507

要允许在列是身份时设置主键，您需要设置身份插入。格式为

```
SET IDENTITY_INSERT [table name] ON 
```

您可能希望将要移动的数据库的身份种子远远高于您将手动设置的任何主键，这样您就不会发生冲突

完成后将其放回原处

```
SET IDENTITY_INSERT [table name] OFF 
```

[http://msdn.microsoft.com/en-us/library/ms188059.aspx](http://msdn.microsoft.com/en-us/library/ms188059.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:33:41.303

我认为您需要[IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/aa259221%28v=sql.80%29.aspx)属性。

# actionscript-3 - 如何判断 OSMF 播放器何时完成播放视频

> ID：10435544
> 
> 赞同：0
> 
> 时间：2012-05-03T16:30:22.057
> 
> 标签：actionscript-3, apache-flex, flash-builder4.5, osmf

我已经为我的移动 flex 应用程序构建了一个 OSMF 播放器信息，但我找不到一种方法来判断视频何时播放完毕。我能以某种方式告诉视频何时完成吗？
提前致谢！

```
 import mx.core.UIComponent;

        import org.osmf.events.TimeEvent;

        import spark.components.Button;
        import spark.components.Group;

        public var playerInstance:StrobeMediaPlayback;
        public var grp:Group = new Group();
        protected function init(event:Event):void
        {

            _stage = systemManager.stage;
            _stage.align = StageAlign.TOP_LEFT;
            _parameters  =
                {
                    src:"assets/Mini film 2b with filter on.mp4"
                    , controlBarMode:"docked"
                    , controlBarAutoHide: true
                    , autoPlay: true
                    , playButtonOverlay:true
                    , showVideoInfoOverlayOnStartUp: true
                };

            var playerInstance:StrobeMediaPlayback = new StrobeMediaPlayback();
            playerInstance.initialize(_parameters, _stage, systemManager.loaderInfo, null);
            playerInstance = playerInstance;
            //playerInstance.addEventListener(, remove);
            var ui:UIComponent = new UIComponent();
            ui.addChild(playerInstance as DisplayObject);

            grp.percentWidth = 100;
            grp.percentHeight = 100;
            addElement(grp);
            grp.addElement(ui);
            actionBarVisible = false

        }

        private var urlLoader:URLLoader;
        private var urlRequest:URLRequest;
        private var loader:Loader;
        private var _stage:Stage;
        private var _parameters:Object;
        /* static */
        private static const ALLOW_LOAD_BYTES_CODE_EXECUTION:String = "allowLoadBytesCodeExecution";

        public function emptyCache():void
        {
            //playerInstance.player.pause();

            grp.removeAllElements();
            this.destructionPolicy = "auto";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:07:22.943

你可以试试这个：

```
player.addEventListener(TimeEvent.COMPLETE, onComplete); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T08:52:57.907

```
function onComplete() {
  console.log("Completed");
} 
```

`player.addEventListener("complete", onComplete);`

API 文档 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/org/osmf/events/TimeEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/org/osmf/events/TimeEvent.html)

# ruby-on-rails - Rails 应用程序连接池大小，避免最大池大小问题

> ID：10435548
> 
> 赞同：10
> 
> 时间：2012-05-03T16:30:35.330
> 
> 标签：ruby-on-rails, ruby, activerecord, jruby

我正在运行 JRuby on Rails 应用程序。我在日志中随机看到了很多这样的内容：

`The max pool size is currently 5; consider increasing it`

我知道我可以在我的配置中增加最大池大小来解决这个问题。我要解决的问题是了解最佳数字应该是多少。我试图避免连接的争用问题。显然，将此数字设置为令人讨厌的大数字也行不通。

是否有通用协议可以了解您的应用程序的最佳池大小设置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T01:08:38.347

从[这里开始](http://www.ibm.com/developerworks/library/j-jtp0730/index.html)，

> 线程池的最佳大小取决于可用处理器的数量和工作队列中任务的性质。在一个工作队列的 N 处理器系统上，工作队列将完全容纳计算密集型任务，您通常会通过 N 或 N+1 个线程的线程池实现最大 CPU 利用率。
> 
> 对于可能等待 I/O 完成的任务（例如，从套接字读取 HTTP 请求的任务），您需要将池大小增加到超过可用处理器的数量，因为并非所有线程都能正常工作每时每刻。使用分析，您可以估计典型请求的等待时间 (WT) 与服务时间 (ST) 的比率。如果我们将此比率称为 WT/ST，对于 N 处理器系统，您将需要大约 N*(1+WT/ST) 线程以保持处理器充分利用。
> 
> 处理器利用率不是调整线程池大小的唯一考虑因素。随着线程池的增长，您可能会遇到调度程序、可用内存或其他系统资源的限制，例如套接字数量、打开的文件句柄或数据库连接。

因此，分析您的应用程序，如果您的线程主要受 cpu 限制，则将线程池大小设置为内核数，或内核数 + 1。如果您花费大部分时间等待数据库调用完成，则尝试使用相当多的线程，看看应用程序是如何执行的。

# java - 在 jframe 中添加日期选择器？

> ID：10435552
> 
> 赞同：0
> 
> 时间：2012-05-03T16:30:56.010
> 
> 标签：java, swing, netbeans, datepicker, jframe

我想在 Jframe 中添加一个 Datepicker？这可能吗？，您是否推荐任何带有日期选择器的特定库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:46:33.180

如果您找到一个提供此类日期选择器的 Swing 库，它很可能`JComponent`会被添加到 a 中`JFrame`（如果不是这种情况，那么没有头脑正常的 Swing 开发人员会想要使用该库）。

我`JXDatePicker`对 SwingX 项目中的`JXDatePicker`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:20:38.780

可能是[JCalendar](http://www.toedter.com/en/jcalendar/index.html)。它是开源的，支持 LaF，已本地化。这是它的在线[演示](http://www.toedter.com/en/jcalendar/demo.html)。

您也可以考虑[DateSpinner](http://www.jidesoft.com/javadoc/com/jidesoft/spinner/DateSpinner.html)。它是[JIDE 开源层的](http://www.jidesoft.com/products/oss.htm)一部分。JIDE 也提供`DateChooserPanel`，但它是 Grids 库的一部分，不是免费的。

# java - 如何停止 Spring 的默认输出？

> ID：10435557
> 
> 赞同：2
> 
> 时间：2012-05-03T16:31:12.040
> 
> 标签：java, spring, logging

我是春天的新手。当我运行 Spring 批处理应用程序时，我希望只看到“Hello World！”，但相反，我得到了以下附加详细信息 -

```
2012 年 5 月 3 日 12:28:42 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
信息：刷新 org.springframework.context.support.ClassPathXmlApplicationContext@4e660b27：启动日期 [Thu May 03 12:28:42 EDT 2012]；上下文层次的根
2012 年 5 月 3 日 12:28:42 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
信息：从类路径资源 [helloWorldJob.xml] 加载 XML bean 定义
2012 年 5 月 3 日 12:28:43 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
信息：从类路径资源 [MEMORY-JOBREPOSITORY.xml] 加载 XML bean 定义
2012 年 5 月 3 日 12:28:44 PM org.springframework.beans.factory.support.DefaultListableBeanFactory registerBeanDefinition
信息：覆盖 bean 'helloWorldJob' 的 bean 定义：替换 [Generic bean: class [org.springframework.batch.core.configuration.xml.SimpleFlowFactoryBean]; 范围=; 摘要=假；懒惰初始化=假；自动线模式=0；依赖检查=0；自动接线候选=真；主要=假；工厂BeanName=空；工厂方法名=空；初始化方法名=空；destroyMethodName=null] 与 [通用 bean: 类 [org.springframework.batch.core.configuration.xml.JobParserJobFactoryBean]; 范围=; 摘要=假；懒惰初始化=假；自动线模式=0；依赖检查=0；自动接线候选=真；主要=假；工厂BeanName=空；工厂方法名=空；初始化方法名=空；销毁方法名=空]
2012 年 5 月 3 日 12:28:44 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
信息：在 org.springframework.beans.factory.support.DefaultListableBeanFactory@63dfb24d 中预实例化单例：定义 bean [jobRepository,jobRepository-transactionManager,jobLauncher,hello,world,org.springframework.batch.core.scope.internalStepScope,org. springframework.beans.factory.config.CustomEditorConfigurer,org.springframework.batch.core.configuration.xml.CoreNamespacePostProcessor,step0,step1,helloWorldJob]; 工厂层次结构的根
2012 年 5 月 3 日 12:28:44 PM org.springframework.aop.framework.DefaultAopProxyFactory
信息：CGLIB2 可用：proxyTargetClass 功能已启用
2012 年 5 月 3 日 12:28:44 PM org.springframework.batch.core.launch.support.SimpleJobLauncher afterPropertiesSet
INFO：未设置TaskExecutor，默认为同步执行器。
2012 年 5 月 3 日 12:28:44 PM org.springframework.batch.core.launch.support.SimpleJobLauncher$1 运行
信息：作业：[FlowJob：[name=helloWorldJob]] 使用以下参数启动：[{time=11:06AM}]
2012 年 5 月 3 日 12:28:44 PM org.springframework.batch.core.job.SimpleStepHandler handleStep
信息：执行步骤：[step0]
你好May 03, 2012 12:28:44 PM org.springframework.batch.core.job.SimpleStepHandler handleStep
信息：执行步骤：[step1]
 世界！2012 年 5 月 3 日下午 12:28:44 org.springframework.batch.core.launch.support.SimpleJobLauncher$1 运行
信息：作业：[FlowJob：[name=helloWorldJob]] 使用以下参数完成：[{time=11:06AM}] 和以下状态：[COMPLETED]
2012 年 5 月 3 日 12:28:44 PM org.springframework.context.support.AbstractApplicationContext doClose
信息：关闭 org.springframework.context.support.ClassPathXmlApplicationContext@4e660b27：启动日期 [Thu May 03 12:28:42 EDT 2012]；上下文层次的根
2012 年 5 月 3 日 12:28:44 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
信息：在 org.springframework.beans.factory.support.DefaultListableBeanFactory@63dfb24d 中销毁单例：定义 bean [jobRepository,jobRepository-transactionManager,jobLauncher,hello,world,org.springframework.batch.core.scope.internalStepScope,org.springframework。 beans.factory.config.CustomEditorConfigurer,org.springframework.batch.core.configuration.xml.CoreNamespacePostProcessor,step0,step1,helloWorldJob]; 工厂层次结构的根

```

如何防止显示这些额外的东西？谢谢。

附加信息- log4j.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

  <appender name="appender" class="org.apache.log4j.FileAppender">
    <param name="File" value="helloWorld-Log.txt"/>
    <param name="Append" value="false"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d [%t] %p - %m%n"/>
    </layout>
  </appender>
  <appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.SimpleLayout"/>
  </appender>
  <root>
    <priority value ="ERROR"/>
    <appender-ref ref="ConsoleAppender"/>
  </root>

</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:36:41.213

您可以[切换到 Log4J 日志](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/overview.html#overview-not-using-commons-logging "将 Spring 的日志记录切换到 Log4J")并将[日志级别设置为 ERROR 或 FATAL](http://logging.apache.org/log4j/1.2/manual.html "Log4J 快速手册")。这样您就可以停用所有非错误日志记录。

但戴夫牛顿是对的：这听起来确实是个坏主意。

# sorting - prolog排序和打印最佳3

> ID：10435565
> 
> 赞同：1
> 
> 时间：2012-05-03T16:31:45.047
> 
> 标签：sorting, prolog

我现在拥有的是，

```
 :-dynamic listofPeople/2.
    listofPeople(Mark,Name). 
```

例如

```
 19, 'Jos'
     92, 'Abdul'
     33, 'Izz'
     16, 'Xin' 
```

我想要这样-

```
92, 'Abdul'
33, 'Izz'
19, 'Jos' 
```

其中基本上包含每个学生的分数。

我想打印最好的 3 分。

为此，我必须进行排序。如果我进行排序，我将失去学生姓名的顺序。

正如您默认情况下可以理解的那样，我想要的是仅对标记进行排序并根据标记更改名称位置，所以当我打印时

我得到上面的输出

代码片段赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:00:55.407

我已经在下面的帖子中回答了你：

```
go(N1-G1,N2-G2,N3-G3) :- findall(Grade-Name, listofPeople(Grade,Name), List), 
                         keysort(List, [G1-N1,G2-N2,G3-N3|SortedList]). 
```

在您的输入`go(X,Y,Z)`结果中`X = 'Abdul'-92, Y = 'Izz'-33, Z ='Jos'-19`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:40:45.847

您不能在打印之前按标记对列表进行排序，取前 3 个，然后按名称排序吗？

# asp.net-mvc-3 - MVC3 :: 使用 global.asax 将特定控制器/动作定向到不同的控制器/动作

> ID：10435567
> 
> 赞同：1
> 
> 时间：2012-05-03T16:31:45.443
> 
> 标签：asp.net-mvc-3, routes

在 MVC3 应用程序中，我的家庭控制器中有一个视图，可通过以下 URL 访问：

[http://mysite.com/home/mycontent](http://mysite.com/home/mycontent)

但是，我的用户希望通过以下方式访问它：

[http://mysite.com/mycontent](http://mysite.com/mycontent)（没有具体提及家庭控制器）

我尝试使用以下内容修改我的 global.asax：

```
 routes.MapRoute(
        "MyContent", // Route name
        "MyContent", // URL with parameters
        new { controller = "Home", action = "MyContent"} // Parameter defaults
    ); 
```

但是当我尝试使用它时出现 404 错误。有没有办法可以完成我的用户想要做的事情 - 将 URL 重定向到特定的控制器/视图对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:41:27.990

我认为你应该保留一些“参数”：

```
routes.MapRoute(
        "MyContent", // Route name
        "{action}/{id}", // URL with parameters
        new { controller = "Home", action = "MyContent", id = ""} // Parameter defaults
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:59:10.453

您的路线按什么顺序注册？该路线应该在您的默认路线之前。

例如

```
routes.MapRoute(
    "MyContent", // Route name
    "MyContent", // URL with parameters
    new { controller = "Home", action = "MyContent"} // Parameter defaults
);

routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Pages", action = "Index", id = UrlParameter.Optional }
); 
```

否则，它应该可以工作......我定义的路线与此完全相同。

# ruby-on-rails - 如何更改 Rails 中的外键字段？

> ID：10435568
> 
> 赞同：0
> 
> 时间：2012-05-03T16:31:52.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我的模型：

```
class Project < ActiveRecord::Base
  has_many :gs_collectors, dependent: :destroy

class GsCollector < ActiveRecord::Base
  belongs_to :project
  has_one :application, dependent: :destroy

class Application < ActiveRecord::Base
  belongs_to :gs_collector 
```

这是我的工厂：

```
 factory :application do
    ....
    association :gs_collector
    association :dust_type
  end

  factory :gs_collector do
    ...
    association :project
  end

  factory :project do
    sequence(:name) { |n| "Project#{n}" }
    contact_name 'John Customer'
  end 
```

Application模型曾经是belong_to Project，所以我只是使用迁移将db中的project_id更改为gs_collector_id。但是，现在我在尝试运行我的任何测试时遇到此错误（即使在与应用程序模型无关的单元/控制器上）：

```
ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'project' in 'field list': INSERT INTO `applications` (`project`, .... 
```

为什么我会收到此错误？

如果我将此行添加回我的应用程序模型：

```
belongs_to :project 
```

一切都恢复正常。但这应该不再是必要的了。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:52:21.710

这里的问题是我有一个由脚手架生成器创建的夹具文件。一旦我删除了fixtures文件，一切都很好。

# c# - 显示列表的值 不使用额外变量或使用 foreach 循环

> ID：10435570
> 
> 赞同：2
> 
> 时间：2012-05-03T16:31:54.023
> 
> 标签：c#, arrays, string, list

我陷入了一个疑问，我不知道如何解决它，案例是：

我创建了一个这样的“数组字符串”列表：

```
List<string[]> definitions; 
```

我已经添加了这样的值：

```
definitions.Add(new string[2] { "A", "Def.1" });
definitions.Add(new string[2] { "B", "Def.2" }); 
```

为了显示值，我这样做：

```
foreach (string[] theDefinition in definitions)
{
Console.WriteLine(theDefinition[0] + "\tdef: " + theDefinition[1]);
} 
```

到目前为止，这工作正常，但是我如何在没有 foreach 的情况下显示值我的意思是这样的：

```
Console.WriteLine(definitions[0] ...) 
```

我应该在 3 个点中写什么来显示索引 0 列表中的“A”或“Def.1”。

我想克服这个问题是通过执行以下操作：

```
string[] temp = definitions[0]
Console.WriteLine(temp[0] + ", " + temp[1]); 
```

如何在不使用额外变量的情况下仅使用 Console.WriteLine 来实现它，这可能吗？如何？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:33:56.270

```
Console.WriteLine(definitions[0][0]  + "\tdef: " + definitions[0][1]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:44:34.613

更好的方法是声明定义类型

```
public class Definition
{
    public string Name { get; set; }
    public string Value { get; set; }

    public override string ToString()
    {
        return Name + "\tdef: " + Value;   
    }
} 
```

现在您可以像这样简化代码

```
List<Definition> definitions = new List<Definition> {
    new Definition { Name = "A", Value = "Def.1" },
    new Definition { Name = "B", Value = "Def.2" },
};

foreach (Definition theDefinition in definitions)    
{    
    Console.WriteLine(theDefinition);    
} 
```

当然，您可以使用 Nikhil Agrawal 提出的流畅版本，现在更简单了。

```
definitions.ForEach(def => Console.WriteLine(def)); 
```

印刷

```
定义：Def.1
B定义：Def.2

```

* * *

访问字段比使用数组索引更具描述性

```
Definition def = definitions[0];
Console.WriteLine(def.Name + ", " + def.Value);

// compared to
// Console.WriteLine(temp[0] + ", " + temp[1]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T16:45:13.627

其他答案当然是正确的，但为什么不只使用字典而不是二维字符串数组的列表。

```
 var definitions = new Dictionary<string, string> 
        {
            { "A", "Def.1" },
            { "B", "Def.2" }
        };

        foreach (var keypair in definitions)
        {
            Console.WriteLine("{0} \tdef: {1} ", keypair.Key, keypair.Value);
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T16:35:18.577

您可以像这样访问它：`definitions[definition_index][string_index]`.

尝试：

```
Console.WriteLine(definitions[0][0] + "\tdef: " + definitions[0][1]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T16:40:55.060

```
for (var i = 0; i < definitions.Length; i++)
{
    Console.WriteLine(definitions[i][0] + "\tdef: " + definitions[i][1]);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T16:36:51.067

**一行答案而不是 3 行。当 LINQ 在这里时，不使用 For 或 foreach 循环或额外变量**

```
definitions.ForEach(x => Console.WriteLine(x[0] + "\tdef: " + x[1])); 
```

# pattern-matching - OCaml 模式匹配非常数

> ID：10435572
> 
> 赞同：4
> 
> 时间：2012-05-03T16:31:59.530
> 
> 标签：pattern-matching, ocaml

是否可以对变量而不是常量值进行模式匹配：

```
# let x = 2 in
let y = 5 in
match 2 with
| x -> "foo"
| y -> "bar"
| _ -> "baz";;
            let y = 5 in
Warning 26: unused variable y.
  let x = 2 in
Warning 26: unused variable x.
  | y -> "bar"
Warning 11: this match case is unused.
  | _ -> "baz";;
Warning 11: this match case is unused.
- : string = "foo" 
```

显然，使用这种语法，`x -> "foo"`case 会处理一切。有没有办法让它等同于：

```
match 2 with
| 2 -> "foo"
| 5 -> "bar"
| _ -> "baz" 
```

匹配表达式的值是在运行时确定的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:22:20.250

在`when`我看来，守卫在这里是个坏主意。初学者倾向于过度使用他们认为方便的模式匹配语法，这会导致他们的应用程序中出现细微的错误。对于一个会注意到“嘿，`| y -> ..`这不是我想要的”的人，另外十个人会犯错误并且不会直接注意到它。

您应该阻止这种容易出错的模式。我对初学者的个人建议是*永远不要*使用`when`，并且*只*使用模式匹配来解构归纳数据类型（如列表、树、选项等）的值。整数的模式匹配几乎总是一个错误。

我建议`if ... then .. else if .. then .. else`改用。

```
if z = x then "foo"
else if z = y then "bar"
else "baz" 
```

什么时候可以合法使用`when`？当其余情况确实受益于模式匹配（以测试嵌套模式等）时，或者当对匹配值的深度解构产生的值执行测试时，拥有一个是可以理解的。它通常可以通过合并两个分支并在`if..then..else`本地使用来翻译掉。

以下是不方便删除的一个示例（测试与解构相结合）：

```
match foo with
| (Baz x) when pred x -> ...
| _ -> ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T16:39:55.007

你需要`when`守护：

```
let x = 2 in
let y = 5 in
match 2 with
| z when z = x -> "foo"
| z when z = y -> "bar"
| _ -> "baz";; 
```

错误消息非常有指导意义。当您使用：

```
let x = 2 in
...
match 2 with
| x -> "foo"
| ... 
```

新值`x`隐藏了`x`先前 let-bound 中的值，因此是第一条错误消息。此外，由于 new`x`匹配所有内容，`y`因此 和`_`的以下两个模式显然是多余的。

请注意，匹配常量 ( `match 2 with`) 不是一个好主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T16:42:26.633

“何时”守卫是您在这里寻找的：

```
let x = 2 in
let y = 5 in
match 2 with
| x' when x' = x -> "foo"
| y' when y' = y -> "baz"
| _ -> "baz" ;; 
```

...尽管我不确定您为什么要与常量匹配。

# perl - 在 perl 中，我的 fork 进程以 ""Undefined subroutine &main::fatal called at wrapper.pl" 终止

> ID：10435573
> 
> 赞同：1
> 
> 时间：2012-05-03T16:32:08.147
> 
> 标签：perl, fork

在我的主程序中，我使用以下方法分叉孩子：

```
pid = fork();
if ($pid == 0) {
   exec("$wrapper_file $hours_run");
   exit 0;
} 
```

并做一些其他的工作。

在我的包装文件中：

```
$test_run = time();
while ($test_run < $hours_run) {
     do $node_grp_submit; # -------------------->script does some work
     sleep 30;
     $test_run = time();
} 
```

如果我运行它 4 小时，该脚本可以正常工作。

但是如果我运行更长的时间（比如 5-8 小时），我的包装脚本会以 `Undefined subroutine &main::fatal called at wrapper.pl`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:58:58.083

`fatal()`不是 perl 内置的，但它是调用不可克服（“致命”）错误的子例程的常用名称。显然，您的脚本中的某些内容正在调用此函数，但它不存在。

您在脚本中使用了哪些模块？作者可能是故意这样做的，以便您可以定义一个 fatal() 并捕获错误。如果你不知道它发生在哪里，你可以将它添加到 wrapper.pl：

```
use YAML::XS;

sub fatal () {
    print Dump caller 1;
    print Dump @_;
    die "FATAL!";
} 
```

这将为您提供有关从 ( ) 调用 sub 的位置`Dump caller 1`以及参数堆栈中的内容的一些详细信息。

# regex - 正则表达式在 180 个字符之后和之前修剪字符串 |

> ID：10435574
> 
> 赞同：1
> 
> 时间：2012-05-03T16:32:08.830
> 
> 标签：regex, notepad++

在管道分隔的文本文件中，我需要将第一列修剪为不超过 180 个字符。

如果少于 180 个字符，我会保留那里的任何内容。

现在是丑陋的部分......我正在尝试在 Notepad++ 中执行此操作，这意味着我可以使用正则表达式查找/替换，但不能使用实际代码。不知道如何做一个正则表达式“如果你在 180 之前碰到管道，你不需要修剪任何东西。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:36:00.183

您可以使用此正则表达式：

```
^([^|]{0,180})[^|]+(.*)$ 
```

这作为替换：

```
\1\2 
```

这是 Notepad++ 中查找/替换对话框的屏幕截图：

![记事本++正则表达式](../Images/72014f578c098fef1c92b15241238c28.png)

我用这个虚拟数据对其进行了测试：

[http://pastie.org/3855302](http://pastie.org/3855302)

结果是这样的输出：

[http://pastie.org/3855308](http://pastie.org/3855308)

# mercurial - HG：查找删除的行被删除的位置

> ID：10435591
> 
> 赞同：29
> 
> 时间：2012-05-03T16:33:24.473
> 
> 标签：mercurial, blame

我正在寻找这个问题的解决方案的等价物：

[我如何“git责备”删除的行？](https://stackoverflow.com/questions/4404444/how-do-i-blame-a-deleted-line)

简而言之，我正在查看添加了一行的 mercurial 提交，而在当前版本中，该行不再存在，我想找出它何时以及为何被删除。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-07T16:44:53.623

`hg grep`将允许您在更改日志中搜索模式，例如已删除的字符串。如果您要查找的不仅仅是第一次出现，请务必包含该`--all`标志。对我来说，它看起来像这样：

`hg grep --all -r 9876:tip "pattern" path/to/file`

感谢 Anton 的有用评论和 krtek 的[相关回答](https://stackoverflow.com/questions/9725856/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-03T13:52:46.780

`hg log -p fileName > fileName.log`

然后打开`fileName.log`文件

在那里，您将找到每个提交的详细信息以及该提交的差异。提交的详细信息包括用户名。

# postgresql - rake assets：precompile 不适用于 PostgreSql

> ID：10435592
> 
> 赞同：4
> 
> 时间：2012-05-03T16:33:31.957
> 
> 标签：postgresql, rake, asset-pipeline, ruby-on-rails-3.2

我正在尝试部署一个使用 Postgres 的 Rails 3.2.3 应用程序。我让部署本身通过 Capistrano 工作，数据库迁移也工作。但现在我被困在预编译资产中：

```
deploy:MyAPP/current$ bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/deploy/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
rake aborted!
FATAL:  role "deploy" does not exist
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `initialize'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `new'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `connect'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:303:in `new_connection'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:313:in `checkout_new_connection'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:237:in `block (2 levels) in checkout'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:232:in `loop'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:232:in `block in checkout'
/home/deploy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `checkout'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:398:in `retrieve_connection'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/model_schema.rb:308:in `clear_cache!'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/railtie.rb:91:in `block (2 levels) in <class:Railtie>'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:418:in `_run__1909267555841955845__prepare__3200542818861587462__callbacks'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/deploy/www/MyApp/releases/20120503154931/config/environment.rb:5:in `<top (required)>'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:103:in `require_environment!'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/deploy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/sprockets/assets.rake:93:in `block (2 levels) in <top (required)>'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/deploy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/home/deploy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
Tasks: TOP => environment
rake aborted!
Command failed with status (1): [/home/deploy/.rvm/rubies/ruby-1.9.3-p194/b...]
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/deploy/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
/home/deploy/www/MyApp/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
Tasks: TOP => assets:precompile 
```

出于某种原因，它试图以系统用户“部署”的身份登录 Postgres，但我完全不知道为什么——我从未遇到过 MySql 的这个问题......

有人有想法吗？

干杯，CS

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T10:14:57.340

Rake 初始化整个 Rails 堆栈，并且 postgres 适配器似乎在启动时测试连接。由于这种情况没有凭据，因此 rake 失败。

为了防止 rake 这样做，我不得不把它放在我的`config/application.rb`：

```
config.assets.initialize_on_precompile = false 
```

这对我行得通！

在[这个答案](https://stackoverflow.com/a/8997640/727341)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:03:11.403

如果您默认不提供任何其他用户名，PostgreSQL 将使用操作系统用户名（当连接是本地的一台机器时）。这大概就是它使用“部署”的原因。

您需要在哪里/如何设置数据库名称以便它被拾取我不能说我害怕。

# mysql - MySQL Groupby 查询

> ID：10435594
> 
> 赞同：0
> 
> 时间：2012-05-03T16:33:49.280
> 
> 标签：mysql, group-by

[请参阅链接以获取更好格式的表格](http://www.dbasupport.com/forums/attachment.php?attachmentid=586&d=1336060648)

在 MySQL 数据库中，我有两个表 'VEHICLE' 和 'VEHICLE_CLASS'，如下所示：

```
VEHICLE 
------------------------------------------- 
VEHICLE_ID  | VEHICLE_CLASS_ID  | STATUS 
------------------------------------------- 
vehicle_001 | vehicle_class_001 | 0 
vehicle_002 | vehicle_class_002 | 1 
vehicle_003 | vehicle_class_003 | 2 
vehicle_004 | vehicle_class_001 | 0 
vehicle_005 | vehicle_class_002 | 2 
vehicle_006 | vehicle_class_001 | 0 
vehicle_007 | NULL              | 1 
---------------------------------------------- 

VEHICLE_CLASS 
------------------------------------------ 
VEHICLE_CLASS_ID  | VEHICLE_CLASS_NAME 
----------------------------------------- 
vehicle_class_001 | ABC 
vehicle_class_002 | BCD 
vehicle_class_003 | EFG 
vehicle_class_004 | XYZ 
vehicle_class_005 | PQR 
vehicle_class_006 | STU 
--------------------------------------- 
```

*   共有三种状态 0 = 已启动，1 = 进行中，2 = 已完成

我需要一个查询来获取结果行，如下所示：

```
----------------------------------------------------------------------- 
VEHICLE_CLASS_NAME | COMPLETED_ VEHICLES | NOT_COMPLETED_ VEHICLES 
--------------------------------------------------------------------------- 
ABC                |                     |vehicle_001, vehicle_004, vehicle_006 
BCD                | vehicle_005         |vehicle_002 
EFG                | vehicle_003         | 
```

*   如果 Status=2 则完成，否则未完成。

这是我写的查询，但它没有给我正确的行。

```
SELECT 
      veh.VEHICLE_CLASS_ID, 
      vehclass.VEHICLE_CLASS_NAME, 
      IF(STATUS=2, GROUP_CONCAT(`VEHICLE_ID`),'') COMPLETED_ VEHICLES, 
      IF(STATUS<2,GROUP_CONCAT(`VEHICLE_ID`),'') NOT_COMPLETED_ VEHICLES 
   FROM 
      VEHICLE veh 
         LEFT JOIN VEHICLE_CLASS vehclass 
            on veh.VEHICLE_CLASS_ID = vehclass.VEHICLE_CLASS_ID 
   GROUP BY 
      veh.VEHICLE_CLASS_ID 
   having 
      veh.VEHICLE_CLASS_ID is not null; 
```

请帮助我，我怎样才能得到结果行。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:48:58.077

# MySQL

```
SELECT 
  vehclass.VEHICLE_CLASS_NAME, 
  GROUP_CONCAT(CASE veh.STATUS WHEN 2 THEN `VEHICLE_ID` ELSE NULL END) COMPLETED_VEHICLES, 
  GROUP_CONCAT(CASE veh.STATUS WHEN 2 THEN NULL ELSE `VEHICLE_ID` END) NOT_COMPLETED_VEHICLES 
FROM VEHICLE veh 
LEFT JOIN VEHICLE_CLASS vehclass 
  ON veh.VEHICLE_CLASS_ID = vehclass.VEHICLE_CLASS_ID 
GROUP BY veh.VEHICLE_CLASS_ID
HAVING veh.VEHICLE_CLASS_ID is not null; 
```

[SQLFiddle](http://sqlfiddle.com/#!2/59a58/22)

# 微软 SQL 2008

```
SELECT 
  vehclass.VEHICLE_CLASS_NAME, 
  STUFF((SELECT CASE v.STATUS WHEN 2 THEN ',' + v.VEHICLE_ID ELSE '' END
          FROM Vehicle v
          WHERE v.VEHICLE_CLASS_ID = veh.VEHICLE_CLASS_ID
          FOR XML PATH (''))
         , 1, 1, '') as COMPLETED_VEHICLES, 
  STUFF((SELECT CASE v.STATUS WHEN 2 THEN '' ELSE ',' + v.VEHICLE_ID END
          FROM Vehicle v
          WHERE v.VEHICLE_CLASS_ID = veh.VEHICLE_CLASS_ID
          FOR XML PATH (''))
         , 1, 1, '') as NOT_COMPLETED_VEHICLES
FROM VEHICLE veh 
LEFT JOIN VEHICLE_CLASS vehclass 
  ON veh.VEHICLE_CLASS_ID = vehclass.VEHICLE_CLASS_ID 
GROUP BY veh.VEHICLE_CLASS_ID, vehclass.VEHICLE_CLASS_NAME
HAVING veh.VEHICLE_CLASS_ID is not null; 
```

[SQLFiddle](http://sqlfiddle.com/#!3/59a58/11)

# 甲骨文

为了在 oracle 中实现这一点，请参阅[此链接](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)以了解使用什么来代替 GROUP_CONCAT

1.  自定义用户定义的聚合函数 - 很可能是您的最佳选择
2.  wm_concat - 未记录，不受支持，可能存在。
3.  listagg - 11g 第 2 版

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:53:17.283

```
SELECT 
  vechile_class.vechile_class_name,
  GROUP_CONCAT(v1.vechile_id) AS COMPLETED_VEHICLES,
  GROUP_CONCAT(v2.vechile_id) AS NOT_COMPLETED_VEHICLES
FROM vechile_class
LEFT JOIN vechile v1 ON 
  v1.vechile_class_id = vechile_class.vechile_class_id AND v1.status = 2
LEFT JOIN vechile v2 ON 
  v2.vechile_class_id = vechile_class.vechile_class_id AND v2.status <> 2
GROUP BY vechile.vechile_class_id 
```

# .htaccess - 使用 htacess 重写 url。

> ID：10435598
> 
> 赞同：0
> 
> 时间：2012-05-03T16:34:01.200
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

在这一点上，我有这个结构。`/quote-submit-php/`我想做的是将最后一个“-”重命名为“。” 所以这`quote-submit.php` 基本上是一个单一的角色。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:57:10.327

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(.*)-(php)$ $1.$2 [L] 
```

# mysql - 在 mySQL 中，如何创建触发器以便一个表保留所有其他表的更改日志？

> ID：10435599
> 
> 赞同：0
> 
> 时间：2012-05-03T16:34:06.720
> 
> 标签：mysql, triggers

我的想法是有一个名为“changelog_table”的表，其中包含以下列：

```
updated_table     //the table being updated
updated_column    //the column being updated
updated_row       //the id of the row being updated
updated_content   //this is what they updated the field to
updated_user      //the user who updated
updated_datetime  //the timestamp it was updated 
```

我认为这是我真正想要的最小值和最大值，但我可能错了。另外......经过数周的阅读，我不明白如何在我的触发器中存储变量（例如“正在更新哪个表”和“正在更新哪个列”等等）。

假设我有一个名为“foo_table”的表，其中有一列“bar_column”，行“58008”，用户“peter_griffin”在 12 月 30 日将其更新为“这是新内容” 2013年中午。

可以捕捉到这种情况的触发器会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:39:38.000

您需要为每个表创建单独的触发器`UPDATE`（如果需要，还需要为`INSERT`和`DELETE`）。他们每个人都可以调用执行实际日志记录的相同存储过程。

触发器可以向存储过程传递一个参数，该参数包含正在对其执行操作的表的名称（因为触发器是特定于表的，它会知道这一点 - 它必须被硬编码）；要检测哪些列已更新，您需要在每个触发器中`NEW.column`与`OLD.column`相应表中的每一列进行比较。

例如：

```
CREATE TRIGGER upd_tbl_name AFTER UPDATE ON tbl_name FOR EACH ROW
  CALL AuditLog('UPDATE', 'tbl_name', NEW.id, CONCAT_WS(',',
    IF(NEW.columnA <=> OLD.columnA, NULL, CONCAT('columnA:=', NEW.columnA)),
    IF(NEW.columnB <=> OLD.columnB, NULL, CONCAT('columnB:=', NEW.columnB)),
    -- etc.
  ));

CREATE PROCEDURE AuditLog(
  Action VARCHAR(10),
  TableName VARCHAR(64),
  RowID INT,
  Columns TEXT,
)
  INSERT INTO changelog_table VALUES (
    Action,
    TableName,
    RowID,
    Columns
    USER(),
    NOW(),
  ); 
```

# php - 与 Facebook 集成的网络聊天

> ID：10435600
> 
> 赞同：0
> 
> 时间：2012-05-03T16:34:08.250
> 
> 标签：php, ajax, facebook

我需要你们的帮助，我正在为我的在线广播网站建立自己的网络聊天。我已经有一个来自 Tutorialzine 的 AJAX PHP Web 聊天。我想修改它。但我不知道从哪里开始。我希望它与 Facebook 集成。我想要它而不是询问用户名和电子邮件，会有一个按钮显示“连接到 Facebook”。用户的头像和姓名会自动保存到数据库中。我真的需要它。我希望它能够被缓和。谢谢你！上帝保佑大家！:)

ajax.php

```
<?php

/* Database Configuration. Add your details below */

$dbOptions = array(
'db_host' => 'localhost',
'db_user' => 'root',
'db_pass' => '',
'db_name' => 'chat'
);

/* Database Config End */

error_reporting(E_ALL ^ E_NOTICE);

require "classes/DB.class.php";
require "classes/Chat.class.php";
require "classes/ChatBase.class.php";
require "classes/ChatLine.class.php";
require "classes/ChatUser.class.php";

session_name('webchat');
session_start();

if(get_magic_quotes_gpc()){

// If magic quotes is enabled, strip the extra slashes
array_walk_recursive($_GET,create_function('&$v,$k','$v = stripslashes($v);'));
array_walk_recursive($_POST,create_function('&$v,$k','$v = stripslashes($v);'));
}

try{

// Connecting to the database
DB::init($dbOptions);

$response = array();

// Handling the supported actions:

switch($_GET['action']){

    case 'login':
        $response = Chat::login($_POST['name'],$_POST['email']);
    break;

    case 'checkLogged':
        $response = Chat::checkLogged();
    break;

    case 'logout':
        $response = Chat::logout();
    break;

    case 'submitChat':
        $response = Chat::submitChat($_POST['chatText']);
    break;

    case 'getUsers':
        $response = Chat::getUsers();
    break;

    case 'getChats':
        $response = Chat::getChats($_GET['lastID']);
    break;

    default:
        throw new Exception('Wrong action');
}

echo json_encode($response);
}
catch(Exception $e){
die(json_encode(array('error' => $e->getMessage())));
}

?> 
```

脚本.js

```
$(document).ready(function(){

// Run the init method on document ready:
chat.init();

});

var chat = {

// data holds variables for use in the class:

data : {
    lastID      : 0,
    noActivity  : 0
},

// Init binds event listeners and sets up timers:

init : function(){

    // Using the defaultText jQuery plugin, included at the bottom:
    $('#name').defaultText('Nickname');
    $('#email').defaultText('Email (Gravatars are Enabled)');

    // Converting the #chatLineHolder div into a jScrollPane,
    // and saving the plugin's API in chat.data:

    chat.data.jspAPI = $('#chatLineHolder').jScrollPane({
        verticalDragMinHeight: 12,
        verticalDragMaxHeight: 12
    }).data('jsp');

    // We use the working variable to prevent
    // multiple form submissions:

    var working = false;

    // Logging a person in the chat:

    $('#loginForm').submit(function(){

        if(working) return false;
        working = true;

        // Using our tzPOST wrapper function
        // (defined in the bottom):

        $.tzPOST('login',$(this).serialize(),function(r){
            working = false;

            if(r.error){
                chat.displayError(r.error);
            }
            else chat.login(r.name,r.gravatar);
        });

        return false;
    });

    // Submitting a new chat entry:

    $('#submitForm').submit(function(){

        var text = $('#chatText').val();

        if(text.length == 0){
            return false;
        }

        if(working) return false;
        working = true;

        // Assigning a temporary ID to the chat:
        var tempID = 't'+Math.round(Math.random()*1000000),
            params = {
                id          : tempID,
                author      : chat.data.name,
                gravatar    : chat.data.gravatar,
                text        :  text.replace(/</g,'&lt;').replace(/>/g,'&gt;')
            };

        // Using our addChatLine method to add the chat
        // to the screen immediately, without waiting for
        // the AJAX request to complete:

        chat.addChatLine($.extend({},params));

        // Using our tzPOST wrapper method to send the chat
        // via a POST AJAX request:

        $.tzPOST('submitChat',$(this).serialize(),function(r){
            working = false;

            $('#chatText').val('');
            $('div.chat-'+tempID).remove();

            params['id'] = r.insertID;
            chat.addChatLine($.extend({},params));
        });

        return false;
    });

    // Logging the user out:

    $('a.logoutButton').live('click',function(){

        $('#chatTopBar > span').fadeOut(function(){
            $(this).remove();
        });

        $('#submitForm').fadeOut(function(){
            $('#loginForm').fadeIn();
        });

        $.tzPOST('logout');

        return false;
    });

    // Checking whether the user is already logged (browser refresh)

    $.tzGET('checkLogged',function(r){
        if(r.logged){
            chat.login(r.loggedAs.name,r.loggedAs.gravatar);
        }
    });

    // Self executing timeout functions

    (function getChatsTimeoutFunction(){
        chat.getChats(getChatsTimeoutFunction);
    })();

    (function getUsersTimeoutFunction(){
        chat.getUsers(getUsersTimeoutFunction);
    })();

},

// The login method hides displays the
// user's login data and shows the submit form

login : function(name,gravatar){

    chat.data.name = name;
    chat.data.gravatar = gravatar;
    $('#chatTopBar').html(chat.render('loginTopBar',chat.data));

    $('#loginForm').fadeOut(function(){
        $('#submitForm').fadeIn();
        $('#chatText').focus();
    });

},

// The render method generates the HTML markup 
// that is needed by the other methods:

render : function(template,params){

    var arr = [];
    switch(template){
        case 'loginTopBar':
            arr = [
            '<span><img src="',params.gravatar,'" width="23" height="23" />',
            '<span class="name">',params.name,
            '</span><a href="" class="logoutButton rounded">Logout</a></span>'];
        break;

        case 'chatLine':
            arr = [
                '<div class="chat chat-',params.id,' rounded"><span class="gravatar"><img src="',params.gravatar,
                '" width="23" height="23" onload="this.style.visibility=\'visible\'" />','</span><span class="author">',params.author,
                ':</span><span class="text">',params.text,'</span><span class="time">',params.time,'</span></div>'];
        break;

        case 'user':
            arr = [
                '<div class="user" title="',params.name,'"><img src="',
                params.gravatar,'" width="30" height="30" onload="this.style.visibility=\'visible\'" /></div>'
            ];
        break;
    }

    // A single array join is faster than
    // multiple concatenations

    return arr.join('');

},

// The addChatLine method ads a chat entry to the page

addChatLine : function(params){

    // All times are displayed in the user's timezone

    var d = new Date();
    if(params.time) {

        // PHP returns the time in UTC (GMT). We use it to feed the date
        // object and later output it in the user's timezone. JavaScript
        // internally converts it for us.

        d.setUTCHours(params.time.hours,params.time.minutes);
    }

    params.time = (d.getHours() < 10 ? '0' : '' ) + d.getHours()+':'+
                  (d.getMinutes() < 10 ? '0':'') + d.getMinutes();

    var markup = chat.render('chatLine',params),
        exists = $('#chatLineHolder .chat-'+params.id);

    if(exists.length){
        exists.remove();
    }

    if(!chat.data.lastID){
        // If this is the first chat, remove the
        // paragraph saying there aren't any:

        $('#chatLineHolder p').remove();
    }

    // If this isn't a temporary chat:
    if(params.id.toString().charAt(0) != 't'){
        var previous = $('#chatLineHolder .chat-'+(+params.id - 1));
        if(previous.length){
            previous.after(markup);
        }
        else chat.data.jspAPI.getContentPane().append(markup);
    }
    else chat.data.jspAPI.getContentPane().append(markup);

    // As we added new content, we need to
    // reinitialise the jScrollPane plugin:

    chat.data.jspAPI.reinitialise();
    chat.data.jspAPI.scrollToBottom(true);

},

// This method requests the latest chats
// (since lastID), and adds them to the page.

getChats : function(callback){
    $.tzGET('getChats',{lastID: chat.data.lastID},function(r){

        for(var i=0;i<r.chats.length;i++){
            chat.addChatLine(r.chats[i]);
        }

        if(r.chats.length){
            chat.data.noActivity = 0;
            chat.data.lastID = r.chats[i-1].id;
        }
        else{
            // If no chats were received, increment
            // the noActivity counter.

            chat.data.noActivity++;
        }

        if(!chat.data.lastID){
            chat.data.jspAPI.getContentPane().html('<p class="noChats">No chats yet</p>');
        }

        // Setting a timeout for the next request,
        // depending on the chat activity:

        var nextRequest = 1000;

        // 2 seconds
        if(chat.data.noActivity > 3){
            nextRequest = 2000;
        }

        if(chat.data.noActivity > 10){
            nextRequest = 5000;
        }

        // 15 seconds
        if(chat.data.noActivity > 20){
            nextRequest = 15000;
        }

        setTimeout(callback,nextRequest);
    });
},

// Requesting a list with all the users.

getUsers : function(callback){
    $.tzGET('getUsers',function(r){

        var users = [];

        for(var i=0; i< r.users.length;i++){
            if(r.users[i]){
                users.push(chat.render('user',r.users[i]));
            }
        }

        var message = '';

        if(r.total<1){
            message = 'No one is online';
        }
        else {
            message = r.total+' '+(r.total == 1 ? 'person':'people')+' online';
        }

        users.push('<p class="count">'+message+'</p>');

        $('#chatUsers').html(users.join(''));

        setTimeout(callback,15000);
    });
},

// This method displays an error message on the top of the page:

displayError : function(msg){
    var elem = $('<div>',{
        id      : 'chatErrorMessage',
        html    : msg
    });

    elem.click(function(){
        $(this).fadeOut(function(){
            $(this).remove();
        });
    });

    setTimeout(function(){
        elem.click();
    },5000);

    elem.hide().appendTo('body').slideDown();
}
};

// Custom GET & POST wrappers:

$.tzPOST = function(action,data,callback){
$.post('php/ajax.php?action='+action,data,callback,'json');
}

$.tzGET = function(action,data,callback){
$.get('php/ajax.php?action='+action,data,callback,'json');
}

// A custom jQuery method for placeholder text:

$.fn.defaultText = function(value){

var element = this.eq(0);
element.data('defaultText',value);

element.focus(function(){
    if(element.val() == value){
        element.val('').removeClass('defaultText');
    }
}).blur(function(){
    if(element.val() == '' || element.val() == value){
        element.addClass('defaultText').val(value);
    }
});

return element.blur();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:43:13.940

如果您只想通过用户名和图片与 facebook 连接，那么您需要做的就是包含[Facebook Javascript SDK](http://developers.facebook.com/docs/reference/javascript/)，然后使用[登录按钮插件](http://developers.facebook.com/docs/reference/plugins/login/)或使用[客户端身份验证](http://developers.facebook.com/docs/authentication/client-side/)。

如果您想与 Facebook 内部聊天连接，那么您可以使用具有两种身份验证方法的[Chat API ：](http://developers.facebook.com/docs/chat/) [Facebook Platform](http://developers.facebook.com/docs/chat/#platauth)和[Username/Password](http://developers.facebook.com/docs/chat/#jabber)。如果您想要第一种方法（听起来像您想要的那样），那么您需要使用客户端流程或[服务器端流程](http://developers.facebook.com/docs/authentication/server-side/)对用户进行身份验证，并请求[“xmpp_login”权限](http://developers.facebook.com/docs/authentication/permissions/)。

聊天 API 文档中有 php 示例。

# ios - 如何使用在 NSUserDefaults 中保存值的开关显示/隐藏按钮

> ID：10435602
> 
> 赞同：0
> 
> 时间：2012-05-03T16:34:12.383
> 
> 标签：ios, xcode, uibutton, nsuserdefaults, uiswitch

我有名为**sosSwitch的****UISwitch** ，它保存了 NSUserDefaults 键中的值**：** MySwitch **，**我有名为**sosBtn的****UIButton**。如何根据保存在 NSUserDefaults 中的开关值**显示/隐藏****sosBtn**？我需要把代码放在哪里？在 viewDidLoad? 谢谢！

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:50:28.807

假设您已经拥有：

```
@property (retain, nonatomic) IBOutlet UIButton *sosBtn;
@property (retain, nonatomic) IBOutlet UISwitch *sosSwich;
- (IBAction)sosSwitch:(id)sender; 
```

试试这个：

```
-(void)viewDidLoad
{    
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"MySwitch"])
    {
        self.sosBtn.hidden = NO;
        [self.sosSwich setOn:YES animated:YES]; 
    }
    else 
    {
        self.sosBtn.hidden = YES;
        [self.sosSwich setOn:NO animated:YES];
    }
}

- (IBAction)sosSwitch:(id)sender 
{
    UISwitch *mySosSwitch = (UISwitch *)sender;
    if (mySosSwitch.on)
    {
        self.sosBtn.hidden = NO;
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"MySwitch"];  //YES means sosBtn should be visible
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
    else 
    {
        self.sosBtn.hidden = YES;
        [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"MySwitch"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
} 
```******

# java - 驱动 JDBC PostgreSQL 与 Android

> ID：10435609
> 
> 赞同：0
> 
> 时间：2012-05-03T16:34:45.550
> 
> 标签：java, android, postgresql, jdbc

我正在尝试使用 JDBC 驱动程序将我的 android 应用程序连接到服务器（PostgreSQL），但出现此错误：

```
java.lang.ClassNotFoundException: org.postgresql.Driver
...
Caused by: java.lang.NoClassDefFoundError: org/postgresql/Driver
... 12 more
Caused by: java.lang.ClassNotFoundException: org.postgresql.Driver
...
java.sql.SQLException: No suitable driver 
```

我尝试了很多东西，比如在路径中添加驱动程序的地址，但没有任何效果。我遵循了本教程： [http](http://appliedcoffeetechnology.tumblr.com/post/10657124340) : //applidcoffeetechnology.tumblr.com/post/10657124340 并在构建路径中添加了驱动程序 JDBC4（我也尝试了 JDBC3）。

大家可以帮帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T01:35:03.963

虽然不是对您问题的严格回答，但我确实有一个建议。

不要尝试直接在 Android 设备上使用 JDBC。这样你会省去很多麻烦。[我在“Android 的 JDBC 与 Web 服务”问题上对此进行了更详细的描述](https://stackoverflow.com/questions/15853367/jdbc-vs-web-service-for-android/15853566#15853566)。

在 Web 可访问的应用程序服务器上编写您的数据库逻辑，并通过 HTTP+JSON、SOAP、XML-RPC 或类似方式与该应用程序服务器通信。这将大大提高带宽效率，并且您可以使您的应用程序更能容忍这种方式的连接问题。它还使您不必将数据库服务器直接暴露在 Internet 上——只要您使用 SSL，就不必担心 PostgreSQL，但最好根本不必这样做。

在 JBoss AS 7、Tomcat 7 或类似版本上使用 JAX-RS，您应该能够非常轻松地为您的应用程序组合一个 Web RESTful XML/JSON 服务 API。人们似乎也很快将 REST/JSON API 与 PHP 组合在一起。

您可以使用几乎任何您喜欢的语言轻松地编写 JSON/REST Web API。只需搜索`REST server yourlanguagename`.

"Kaw" has pointed out in a deleted answer that there are also virtual JDBC drivers that tunnel requests over HTTP. These may be suitable for some applications.

# security - IE拦截网址

> ID：10435610
> 
> 赞同：0
> 
> 时间：2012-05-03T16:34:54.037
> 
> 标签：security, internet-explorer, bho, url-interception

我知道[BHO](http://msdn.microsoft.com/en-us/library/bb250436%28VS.85%29.aspx)是监听[浏览器事件](http://msdn.microsoft.com/en-us/library/aa752134%28v=vs.85%29.aspx)的方式，但 BHO 的问题在于它显示了一个[选择加入栏](http://blogs.msdn.com/b/ie/archive/2010/09/17/add-ons-staying-in-control-of-your-browsing-experience.aspx)，这需要用户干预。

有没有其他方法可以在不使用 BHO 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:14:46.933

你想听什么样的浏览器事件？您的问题主题表明您对 URL 感兴趣。如果是这种情况，BHO 的替代方案（用于过滤 urlmon 调用）将是异步可插入协议： http: [//msdn.microsoft.com/en-us/library/aa767916](http://msdn.microsoft.com/en-us/library/aa767916(v=VS.85).aspx) (v=VS.85).aspx 。

# download - Tortoise SVN的下载页面是空白的

> ID：10435611
> 
> 赞同：1
> 
> 时间：2012-05-03T16:35:00.247
> 
> 标签：download, tortoisesvn, installation

如何安装 Tortoise SVN？下载页面似乎是空的。

[http://tortoisesvn.net/downloads.html](http://tortoisesvn.net/downloads.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:41:36.720

您可以从[sourceforge 项目页面](http://sourceforge.net/projects/tortoisesvn/files/)下载安装程序。

# ios - MKMapView 委托方法不起作用

> ID：10435616
> 
> 赞同：1
> 
> 时间：2012-05-03T16:35:13.057
> 
> 标签：ios, uitableview, delegates, mkmapview

我只是想在我的地图中添加一条折线，它显示在 tableviewcell 中。不幸的是，没有调用委托方法......如果有人知道为什么会很好。

我的 tableview.h：

```
#import <UIKit/UIKit.h>
#import "Route.h"
#import <MapKit/MapKit.h>
#import <QuartzCore/QuartzCore.h>

@interface RoutesDetailView : UITableViewController<MKMapViewDelegate>{
    Route *myRoute;
    MKMapView *mapView;
    // the view we create for the line on the map
    MKPolylineView* _routeLineView;

    // the rect that bounds the loaded points
    MKMapRect _routeRect;
    MKPolyline* _routeLine;
}

@property (nonatomic, retain) Route *myRoute;
@property (nonatomic,retain) MKMapView *mapView;
@property (nonatomic, retain) MKPolyline* routeLine;
@property (nonatomic, retain) MKPolylineView* routeLineView;

-(MKPolyline *) loadRoute: (Route *) theRoute;
@end 
```

还有我的 tableview.m：

```
 @implementation RoutesDetailView
    @synthesize myRoute,mapView;
    @synthesize routeLine = _routeLine;
    @synthesize routeLineView = _routeLineView;

    - (id)initWithStyle:(UITableViewStyle)style
    {
        self = [super initWithStyle:style];
        if (self) {
            // Custom initialization
        }
        return self;
    }

    - (void)didReceiveMemoryWarning
    {
        // Releases the view if it doesn't have a superview.
        [super didReceiveMemoryWarning];

        // Release any cached data, images, etc that aren't in use.
    }

    #pragma mark - View lifecycle

    - (void)viewDidLoad
    {    
        [super viewDidLoad];
        MKMapView *myMap = [[MKMapView alloc] initWithFrame:CGRectMake(10, 1, 300 , 300)];
        myMap.layer.cornerRadius = 10.0;
        [self setMapView:myMap];
        [mapView setDelegate:self];
        CLLocationCoordinate2D annotationCoord;
        annotationCoord.latitude = [[NSString stringWithFormat:@"%@",NSLocalizedString(@"DefaultPointLAT", nil)] doubleValue];
        annotationCoord.longitude = [[NSString stringWithFormat:@"%@",NSLocalizedString(@"DefaultPointLONG", nil)] doubleValue];
        MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
        annotationPoint.coordinate = annotationCoord;
        MKCoordinateRegion region =
        MKCoordinateRegionMakeWithDistance (annotationPoint.coordinate,[[NSString stringWithFormat:@"%@",NSLocalizedString(@"DefaultCircle", nil)] doubleValue], [[NSString stringWithFormat:@"%@",NSLocalizedString(@"DefaultCircle", nil)] doubleValue]);
        [mapView setRegion:region animated:NO];
        // Uncomment the following line to preserve selection between presentations.
        // self.clearsSelectionOnViewWillAppear = NO;

        // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
        // self.navigationItem.rightBarButtonItem = self.editButtonItem;
    }

    - (void)viewDidUnload
    {
        [super viewDidUnload];
        // Release any retained subviews of the main view.
        // e.g. self.myOutlet = nil;
    }

    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];
    }

    - (void)viewDidAppear:(BOOL)animated
    {
        [super viewDidAppear:animated];
    }

    - (void)viewWillDisappear:(BOOL)animated
    {
        [super viewWillDisappear:animated];
    }

    - (void)viewDidDisappear:(BOOL)animated
    {
        [super viewDidDisappear:animated];
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        // Return YES for supported orientations
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    }

    #pragma mark - Table view data source

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
.
.
.

            static NSString *CellIdentifier = @"CellMap";
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            [mapView setFrame:CGRectMake(10, 1, cell.frame.size.width-20 , cell.frame.size.height-1)];
            [cell addSubview:mapView];
            [mapView addOverlay:[self loadRoute:myRoute]];
            return cell;
.
.
.

    }

    #pragma mark - Table view delegate
    -(MKPolyline *) loadRoute: (Route *) theRoute
    {

        MKMapPoint northEastPoint;
        MKMapPoint southWestPoint; 

        // create a c array of points.
        MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) * theRoute.latitude.count);

        for(int idx = 0; idx < theRoute.latitude.count; idx++)
        {

            CLLocationDegrees latitude = [[[theRoute latitude] objectAtIndex:idx] doubleValue];
            CLLocationDegrees longitude = [[[theRoute longitude] objectAtIndex:idx] doubleValue];

            // create our coordinate and add it to the correct spot in the array
            CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude, longitude);

            MKMapPoint point = MKMapPointForCoordinate(coordinate);

            //
            // adjust the bounding box
            //

            // if it is the first point, just use them, since we have nothing to compare to yet.
            if (idx == 0) {
                northEastPoint = point;
                southWestPoint = point;
            }
            else
            {
                if (point.x > northEastPoint.x)
                    northEastPoint.x = point.x;
                if(point.y > northEastPoint.y)
                    northEastPoint.y = point.y;
                if (point.x < southWestPoint.x)
                    southWestPoint.x = point.x;
                if (point.y < southWestPoint.y)
                    southWestPoint.y = point.y;
            }

            pointArr[idx] = point;

        }

        // create the polyline based on the array of points.
        self.routeLine = [MKPolyline polylineWithPoints:pointArr count:theRoute.latitude.count];

        _routeRect = MKMapRectMake(southWestPoint.x, southWestPoint.y, northEastPoint.x - southWestPoint.x, northEastPoint.y - southWestPoint.y);

        // clear the memory allocated earlier for the points
        free(pointArr);
        return self.routeLine;

    }

    - (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id )overlay
    {
        NSLog(@"DELEGATE CALL");
        MKOverlayView* overlayView = nil;

        if(overlay == self.routeLine)
        {
            //if we have not yet created an overlay view for this overlay, create it now.
            if(nil == self.routeLineView)
            {
                self.routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
                self.routeLineView.fillColor = [UIColor redColor];
                self.routeLineView.strokeColor = [UIColor redColor];
                self.routeLineView.lineWidth = 15;
            }

            overlayView = self.routeLineView;

        }

        return overlayView;

    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        // Navigation logic may go here. Create and push another view controller.
        /*
         <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
         // ...
         // Pass the selected object to the new view controller.
         [self.navigationController pushViewController:detailViewController animated:YES];
         */
    }

    @end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T01:32:26.347

试试这个，我遇到了同样的问题。在尝试了许多组合之后，这是一个有效的组合。

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapViewController : UIViewController<MKMapViewDelegate> {

    MKMapView   *mapView;
} 
```

和实施...

```
- (void)viewDidLoad {

    [super viewDidLoad];

    mapView = [[MKMapView alloc] initWithFrame: CGRectMakeFullScreenIphone];
    mapView.delegate = self;
    [mapView setMapType: MKMapTypeStandard];
    [self.view addSubview: mapView]; 

    MKCoordinateRegion newRegion;
    // configure region...
    [mapView setRegion:newRegion animated:YES];

    CLLocationCoordinate2D coordinate;
    //configure coordinate...

    MKPointAnnotation *annotation = [[MKPointAnnotation alloc]init];
    [annotation setCoordinate:coordinate];
    [annotation setTitle:@"TEST"];
    [mapView addAnnotation:annotation];
} 
```

上面的简单代码运行良好，并且调用了委托的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T14:44:40.697

> 如果您在模拟器中运行应用程序，那么

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id )overlay 
```

此委托方法不会被调用，**您需要在 iOS 设备上运行它。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T15:22:18.367

第一个冰毒是

**mapView:regionDidChangeAnimated:**

第二个是

**地图视图：didUpdateUserLocation：**

**头文件**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface ViewController : UIViewController <MKMapViewDelegate>
@property (weak, nonatomic) IBOutlet MKMapView *mapView;
@property (weak, nonatomic) IBOutlet UIButton *searchButton;

@end 
```

**实施文件**

```
@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.mapView.delegate = self;
    self.mapView.mapType = MKMapTypeStandard;
    self.mapView.showsUserLocation = YES;
    self.searchButton.hidden = YES;
}

- (IBAction)setMapType:(UISegmentedControl *)sender {
    switch (sender.selectedSegmentIndex) {
        case 0:
            self.mapView.mapType = MKMapTypeStandard;
            break;
        case 1:
            self.mapView.mapType = MKMapTypeSatellite;
            break;
        case 2:
            self.mapView.mapType = MKMapTypeHybrid;
            break;
        default:
            break;
    }
}

- (IBAction)zoomToCurrentLocation:(UIBarButtonItem *)sender {
    float spanX = 0.00725;
    float spanY = 0.00725;
    MKCoordinateRegion region;
    region.center.latitude = self.mapView.userLocation.coordinate.latitude;
    region.center.longitude = self.mapView.userLocation.coordinate.longitude;
    region.span.latitudeDelta = spanX;
    region.span.longitudeDelta = spanY;
    self.searchButton.hidden = YES;
    [self.mapView setRegion:region animated:YES];
}

-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
    self.searchButton.hidden = NO;
}

-(void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation {
    [self.mapView setCenterCoordinate:userLocation.coordinate animated:YES];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

# ruby-on-rails - Rails 嵌套资源和设计

> ID：10435623
> 
> 赞同：0
> 
> 时间：2012-05-03T16:35:41.207
> 
> 标签：ruby-on-rails, mongodb, reference, mongoid, relationship

假设我有一个名为“User”的设计模型，其中 has_many`:notes`和`:notebooks`每个`:notebook`has_many `:notes`。

所以一个笔记会有两个外键，`:user_id`和`:notebook_id`，那么如何构建/找到一个笔记？

current_user.notebooks.find(param).notes.new(params[:item]) 将只为笔记本或数据库中的笔记记录中的用户创建foreign_key？

如果是第二种情况（外键只用于笔记本），我应该怎么写？

将 MongoDB 与 MongoID 和引用关系一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:48:38.580

Mongoid 将为您管理文档引用和查询，只需确保为您需要的每个方向指定关联/关系（例如，用户 has_many :notes 和 Note belongs_to :user）。与 ActiveRecord 一样，它似乎对关系“聪明”。请不要手动操作引用，而是让您的 ODM (Mongoid) 为您工作。当您运行测试（或使用 rails 控制台）时，您可以使用 tail -f log/test.log（或 log/development.log）查看 Mongoid 正在为您完成哪些 MongoDB 操作，您可以看到实际对象文件更新时的参考。您可以看到关系如何使用特定的对象引用，如果您注意这一点，链接优化应该会变得更加清晰。

以下模型和测试对我有用。可根据要求提供有关设置的详细信息。希望这会有所帮助。

楷模

```
class User
  include Mongoid::Document
  field :name

  has_many :notebooks
  has_many :notes
end

class Note
  include Mongoid::Document
  field :text

  belongs_to :user
  belongs_to :notebook
end

class Notebook
  include Mongoid::Document

  belongs_to :user
  has_many :notes
end 
```

测试

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase

  def setup
    User.delete_all
    Note.delete_all
    Notebook.delete_all
  end

  test "user" do
    user = User.create!(name: 'Charles Dickens')
    note = Note.create!(text: 'It was the best of times')
    notebook = Notebook.create!(title: 'Revolutionary France')
    user.notes << note
    assert_equal(1, user.notes.count)
    user.notebooks << notebook
    assert_equal(1, user.notebooks.count)
    notebook.notes << note
    assert_equal(1, notebook.notes.count)
    puts "user notes: " + user.notes.inspect
    puts "user notebooks: " + user.notebooks.inspect
    puts "user notebooks notes: " + user.notebooks.collect{|notebook|notebook.notes}.inspect
    puts "note user: " + note.user.inspect
    puts "note notebook: " + note.notebook.inspect
    puts "notebook user: " + notebook.user.inspect
  end

end 
```

结果

```
Run options: --name=test_user

# Running tests:

user notes: [#<Note _id: 4fa430937f11ba65ce000002, _type: nil, text: "It was the best of times", user_id: BSON::ObjectId('4fa430937f11ba65ce000001'), notebook_id: BSON::ObjectId('4fa430937f11ba65ce000003')>]
user notebooks: [#<Notebook _id: 4fa430937f11ba65ce000003, _type: nil, user_id: BSON::ObjectId('4fa430937f11ba65ce000001'), title: "Revolutionary France">]
user notebooks notes: [[#<Note _id: 4fa430937f11ba65ce000002, _type: nil, text: "It was the best of times", user_id: BSON::ObjectId('4fa430937f11ba65ce000001'), notebook_id: BSON::ObjectId('4fa430937f11ba65ce000003')>]]
note user: #<User _id: 4fa430937f11ba65ce000001, _type: nil, name: "Charles Dickens">
note notebook: #<Notebook _id: 4fa430937f11ba65ce000003, _type: nil, user_id: BSON::ObjectId('4fa430937f11ba65ce000001'), title: "Revolutionary France">
notebook user: #<User _id: 4fa430937f11ba65ce000001, _type: nil, name: "Charles Dickens">
.

Finished tests in 0.018622s, 53.6999 tests/s, 161.0998 assertions/s.

1 tests, 3 assertions, 0 failures, 0 errors, 0 skips 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:37:19.950

我会用

```
class User
  has_many :notebooks
  has_many :notes, :through => :notebooks
end 
```

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

**更新**

你总是可以手动设置 user_id，像这样（我假设 param 是你笔记本的 ID？）：

```
Notebook.find(param).notes.new(params[:item].merge(:user_id => current_user.id)) 
```

# python - 表单查询集过滤器不起作用，cleaned_data 与“CHOICES=...”不匹配

> ID：10435630
> 
> 赞同：0
> 
> 时间：2012-05-03T16:36:11.780
> 
> 标签：python, django, forms, filter, django-queryset

我正在尝试创建一个允许最终用户过滤交易数据的表单。我有一个“付款方式”的过滤器。

```
For Example: credit card, cash, check etc. 
```

出于某种原因，我的结果没有过滤（没有显示）。我注意到表单从可用选项中更改了我的过滤器值。

```
For Example: the "cash" choice becomes [u'cash']. 
```

如果我直接在我的过滤器中输入选择选项，它就可以工作。

```
For Example: Transactions.objects.filter(payment_method__exact="cash") 
```

不确定这是否与它有关......我怎样才能让我的过滤器工作？

楷模：

```
class QueryForm(forms.Form):
    payment_method = forms.MultipleChoiceField(choices=PAYMENT_TYPE) 
```

看法：

```
def findtransation(request):
    qf = QueryForm()
    if request.method == "POST":
        qf = QueryForm(request.POST)
        if qf.is_valid():
            p = qf.cleaned_data['payment_method']
            results = Transactions.objects.filter(payment_method__exact=p)
            return render_to_response('testdb/results.html', {'results': results, 'query_form': qf,}, context_instance=RequestContext(request))
    return render_to_response('testdb/results.html', {'query_form': qf,}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:43:26.583

尝试将您的`payment_method`字段更改`QueryForm`为普通字段`ChoiceField`：

```
class QueryForm(forms.Form):
    payment_method = forms.ChoiceField(choices=PAYMENT_TYPE) 
```

A`forms.MultipleChoiceField`返回一个字符串列表。您没有展示您的`Transactions`模型，但它的`payment_method`字段可能是`CharField`. 所以我认为正在发生的事情是您正在尝试使用从返回的列表过滤模型中`CharField`的. （当您对字符串“cash”进行硬编码时，它可以正常工作）`Transaction``QueryForm.MultipleChoiceField`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:54:53.703

如果您使用 MultipleChoiceField 是因为您确实希望能够选择多个项目 - 例如，您想要搜索支付方式为现金或卡的交易*-*您可以保持该字段不变，但更改过滤器使用`__in`而不是`__exact`：

```
results = Transactions.objects.filter(payment_method__in=p) 
```

# objective-c - clickedButtonAtIndex：不工作

> ID：10435632
> 
> 赞同：1
> 
> 时间：2012-05-03T16:36:33.203
> 
> 标签：objective-c, ios, xcode, ios5.1

大家好，我有这个 i IBAction 链接到一个按钮：

```
- (IBAction)showCurl:(id)sender {
        alert1 = [[UIAlertView alloc]initWithTitle:@"Loading" message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
        [alert1 show]; 
```

}

和一个 clickedButtonIndex 自动运行，但不知何故它不加载 SecondViewController：

```
#pragma mark UIAlertView
- (void)alertView:(UIAlertView *)alert1 clickedButtonAtIndex:(NSInteger)buttonIndex {
    if(buttonIndex == 0){
        SecondViewController *sampleView = [[SecondController alloc] init];
        [sampleView setModalTransitionStyle:UIModalTransitionStylePartialCurl];
        [self presentModalViewController:sampleView animated:YES];
        }
    else{
            // Cancel prompt
        }
} 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:45:53.303

如果您不给警报视图一些按钮标题，则不会有任何按钮可以点击，并且不会调用该委托方法。

```
- (IBAction)showCurl:(id)sender {
        alert1 = [[UIAlertView alloc] initWithTitle:@"Loading" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert1 show]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:03:36.023

您的代码没有显示按钮

```
 alert1 = [[UIAlertView alloc]initWithTitle:@"Loading" message:nil delegate:self cancelButtonTitle:**nil** otherButtonTitles:**nil**]; 
```

您将 nil 作为 cancelButtonTitle 和 nil 作为 otherbuttonTitles 传递，您至少应该设置一个按钮标题。

# java - Java-在抽象类中使用子类也需要使用的常量

> ID：10435635
> 
> 赞同：7
> 
> 时间：2012-05-03T16:36:41.493
> 
> 标签：java, constants, abstract, final

我有一个抽象类和 2 个子类。有 4 个常量与所有类相关。我打算将决赛放在抽象类中，但我知道最终变量不是继承的？我是否必须在每个类中定义常量（似乎效率低下）？或者只是让常数成为一个即时变量（听起来不是一个好主意）？

我有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T16:39:21.270

如果在抽象类中定义，以下内容将可用于您的所有子类。

```
public static final Integer MYCONSTANT = 42; 
```

或者

```
static final Integer MYCONSTANT = 42; 
```

或者

```
protected static final Integer MYCONSTANT = 42; 
```

第二个（包私有）仅适用于同一包中的类。第三个（受保护的）将可用于所有子类，而不管它们的包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:38:14.047

常量由子代继承。您只需要确保拥有它们，`protected`否则`public`孩子们可以访问它们。

```
abstract class A {
    protected final static String FOO = "bar";
}
class B extends A {
    somemethod() {
        System.out.println("foo: " + FOO);
    }
} 
```

可以从类及其所有子类访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:46:48.540

是的，他们是。但是因为它们应该是恒定的，所以它应该`final and static`只有`static modifier`一个“副本”，如果它只用于子类，那么你可以使用`protected`，或者如果来自其他类也必须制作它`public`。

# java - 尝试java中的所有可能性

> ID：10435636
> 
> 赞同：2
> 
> 时间：2012-05-03T16:36:46.493
> 
> 标签：java

我有 4 个整数（a、b、c、d）和 3 个表示数学运算符（+、-、*、/）的字符串。我想检查是否可以从这些整数和字符串中得出某个数字 (e)。

例如：

a + b * c - d == e;

每个整数只能使用一次，运算符可以多次使用，但每 2 个整数之间只能使用一次。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:48:35.640

首先把你的问题分解成更小的部分。

我将其分解如下：

1.  计算 4 个整数的所有排列。应该有 4!(24) 个。（查找生成排列）

2.  计算可能发生的 3 种操作的所有组合。其中应该有 3*3 (9) 个。（查找生成具有重复的排列）。

3.  现在您已经掌握了整数的顺序和操作的顺序，请尝试计算 e。（交织组合：即 1 来自 int，1 来自 ops，2nd 来自 int，第二个来自 ops 等......）这应该使用所有 int 排列和所有 op 组合来完成。

4.  在评估所有方程（其中 216 个）后，如果没有一个方程等于 e，则没有解。

# javascript - 在 JavaScript 中访问 asp:HiddenField 时“getElementById 返回未定义”？

> ID：10435637
> 
> 赞同：0
> 
> 时间：2012-05-03T16:36:48.570
> 
> 标签：javascript, asp.net

我有 MasterPage/ContentPage，在`ContentPage.aspx`文件中我有`java-script`代码。我想将 java-script 代码移出`ContentPage.aspx`一个单独的 js 文件并执行以下操作：

//在 ContentPage.aspx 中

```
<script type="text/javascript" src='<%= ResolveClientUrl("~/file1.js") %>'></script> 
```

在 file1.js 中，我复制并粘贴所有 java 脚本代码。在 java 脚本代码上，我有一个 cide 行：

//file1.js:

```
var hiddenvar1 = document.getElementById('<%=hiddenvariable1.ClientID%>'); 
```

..then 我无法获得该变量的值（hiddenvar1.value），因为对象 hiddenvar1 为空。javascript 代码在 ContentPage.aspx 中时可以正常工作。当我将它移到 file1.js 时，它不再工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:55:15.263

`Page Load`代码。

```
ClientScript.RegisterClientScriptBlock(typeof(Page), 
Guid.NewGuid().ToString("N"), "MyjavaScriptFunction('" + 
MyHiddenField.ClientID + "');", true); 
```

* * *

## JavaScript

```
function abc(ObjID){
    var Val = document.getElementById(ObjID).value;
    alert(Val);
} 
```

# python - Linux Fedora virtualenv 站点包位置不正确

> ID：10435638
> 
> 赞同：0
> 
> 时间：2012-05-03T16:36:49.190
> 
> 标签：python, linux, virtualenv, fedora

我刚刚尝试在我的新虚拟环境中设置安装应用程序。

为了创建我的虚拟环境，我使用了：

```
virtualenv -p /usr/bin/python2.6/python2.6 rollEnv2 --no-site-packages 
```

然后安装应用程序，我使用：

```
python setup.py install 
```

但我最后得到一个错误：

```
File "/home/aaron/workspace/rollEnv2/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/package_index.py", line 475, in fetch_distribution
AttributeError: 'NoneType' object has no attribute 'clone' 
```

好吧，无论如何，让我们尝试为应用程序提供服务：

```
paster serve development.ini 
```

错误：

```
File "/usr/lib/python2.7/site-packages/pkg_resources.py", line 588, in resolve
raise VersionConflict(dist,req) # XXX put more info here
pkg_resources.VersionConflict: (WebOb 1.0.8 (/usr/lib/python2.7/site-packages), Requirement.parse('WebOb==0.9.6.1'))
(rollEnv2) 
```

似乎是一个明显的错误，让我们：

```
easy_install WebOb==0.9.6.1 
```

但：

```
WebOb 0.9.6.1 is already the active version in easy-install.pth 
```

那么这里可能是什么问题呢？就好像 easy install 正在查找基本 Python 目录而不是 virtualenv 目录。但理想情况下，修复原始`AttributeError: 'NoneType' object has no attribute 'clone'`.

我已经用谷歌搜索了，但我似乎无法找到一个像样的答案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:45:18.373

首先，我建议您也尝试一下[mkvirtualenv](http://www.doughellmann.com/articles/pythonmagazine/completely-different/2008-05-virtualenvwrapper/index.html)，为什么您仍在使用 easy_install 并且还没有切换到 pip ？

默认情况下，virtualenv 使用 Distribute 而不是 setuptools。我认为您正在使用 setuptools，因此只需使用 setuptools 重新创建您的环境。

从虚拟环境：

```
--distribute          Ignored.  Distribute is used by default. See
                      --setuptools to use Setuptools instead of Distribute. 
```

# php - LURACAST Restler 框架 - 处理欧洲字符的问题

> ID：10435641
> 
> 赞同：0
> 
> 时间：2012-05-03T16:36:53.853
> 
> 标签：php, rest, restler

我正在使用 restler PHP API 来托管 REST 服务。我在处理一些欧洲字符时遇到问题，否则它工作正常。

例如，我在 MySQL 数据库中有字符串“Český rozhlas 1 - Radiožurnál”。当 restler API 将数据转换为 JSON 时，它会像这样转换 "?esk\u00fd rozhlas 1 - Radio\u009eurn\u00e1l"

这里第一个字符被转换为问号。

如何使用 restler PHP 服务正确转换数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:44:23.990

在处理 Unicode 时，我们需要确保一路使用 utf-8

首先，您需要确保 MySQL 数据库使用的是 utf-8 编码。您可以运行以下 sql 来确保这一点

```
ALTER TABLE your_table_name_here CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

接下来，您需要确保 MySQL 在与 PHP 对话时输出 utf-8。

您可以使用以下命令

```
mysql_query('SET NAMES utf8');
mysql_query('SET CHARACTER SET utf8'); 
```

如果您使用的是 PDO，则需要使用以下内容来连接数据库

```
$db = new PDO(
          'mysql:host=localhost;dbname=data_pdo_mysql', 'username', 'password',
          array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'")
      ); 
```

经过这些更改后，restler 结果应该变为

```
"\u010cesk\u00fd rozhlas 1 - Radio\u017eurn\u00e1l" 
```

这是具有完整数据的有效 JSON，其中使用 unicode 转义序列对 unicode 字符进行转义。

# php - 通过 preg_replace() 交换所有 youtube url 以嵌入

> ID：10435645
> 
> 赞同：3
> 
> 时间：2012-05-03T16:37:03.863
> 
> 标签：php, preg-replace

您好我正在尝试将 youtube 链接转换为嵌入代码。

这就是我所拥有的：

```
<?php

$text = $post->text;

     $search = '#<a(.*?)(?:href="https?://)?(?:www\.)?(?:youtu\.be/|youtube\.com(?:/embed/|/v/|/watch?.*?v=))([\w\-]{10,12}).*$#x';
     $replace = '<center><iframe width="560" height="315" src="http://www.youtube.com/embed/$2" frameborder="0" allowfullscreen></iframe></center>';
     $text = preg_replace($search, $replace, $text);

echo $text;
?> 
```

它适用于一个链接。但是，如果我添加两个，它只会交换最后一次出现。我必须改变什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T16:42:56.343

您没有正确处理字符串的结尾。删除`$`, 并将其替换为结束标记`</a>`。这将解决它。

```
 $search = '#<a(.*?)(?:href="https?://)?(?:www\.)?(?:youtu\.be/|youtube\.com(?:/embed/|/v/|/watch?.*?v=))([\w\-]{10,12}).*<\/a>#x';
 $replace = '<center><iframe width="560" height="315" src="http://www.youtube.com/embed/$2" frameborder="0" allowfullscreen></iframe></center>';
 $text = preg_replace($search, $replace, $text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:38:24.660

试试这个 ：`preg_replace($search, $replace, $text, -1);`

我知道这是默认设置，但谁知道...

**编辑**尝试，如果不工作；

```
do{
    $text = preg_replace($search, $replace, $text, -1, $Count);
}
while($Count); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:56:40.183

这是一个更有效的正则表达式：[http](http://pregcopy.com/exp/26) ://pregcopy.com/exp/26，将其转换为 PHP：（添加“s”修饰符）

```
<?php

$text = $post->text;

     $search = '#<a (?:.*?)href=["\\\']http[s]?:\/\/(?:[^\.]+\.)*youtube\.com\/(?:v\/|watch\?(?:.*?\&)?v=|embed\/)([\w\-\_]+)["\\\']#ixs';
     $replace = '<center><iframe width="560" height="315" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe></center>';

     $text = preg_replace($search, $replace, $text);

echo $text;
?> 
```

测试一下

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T19:28:26.183

**一个视频有两种类型的 youtube 链接：**

例子：

```
$link1 = 'https://www.youtube.com/watch?v=NVcpJZJ60Ao';
$link2 = 'https://www.youtu.be/NVcpJZJ60Ao'; 
```

**该函数同时处理：**

```
function getYoutubeEmbedUrl($url)
{
     $shortUrlRegex = '/youtu.be\/([a-zA-Z0-9_-]+)\??/i';
$longUrlRegex = '/youtube.com\/((?:embed)|(?:watch))((?:\?v\=)|(?:\/))([a-zA-Z0-9_-]+)/i';

    if (preg_match($longUrlRegex, $url, $matches)) {
        $youtube_id = $matches[count($matches) - 1];
    }

    if (preg_match($shortUrlRegex, $url, $matches)) {
        $youtube_id = $matches[count($matches) - 1];
    }
    return 'https://www.youtube.com/embed/' . $youtube_id ;
} 
```

$link1 或 $link2 的输出将是相同的：

```
 $output1 = getYoutubeEmbedUrl($link1);
 $output2 = getYoutubeEmbedUrl($link2);
 // output for both:  https://www.youtube.com/embed/NVcpJZJ60Ao 
```

现在您可以在 iframe 中使用输出了！

# linq - linq 与 max() 并加入

> ID：10435648
> 
> 赞同：0
> 
> 时间：2012-05-03T16:37:09.653
> 
> 标签：linq

我正在使用 linq 语句

```
 var renewalQuery = from r in crnnsupContext.Renewals
                               from w in crnnsupContext.WorkPlaces
                               join p in crnnsupContext.ProvStates on p.ProvinceStateID equals r.EmployerProvState
                               where  r.RegNumber == _username && r.PlaceOfWork == w.WorkID
                               select r; 
```

有一个`r.RenewalYear`我想得到最近一年的，所以我尝试了类似的东西

```
 var renewalQuery = from r in crnnsupContext.Renewals
                               group r by r.RenewalYear into g
                               from w in crnnsupContext.WorkPlaces
                               join p in crnnsupContext.ProvStates on p.ProvinceStateID equals r.EmployerProvState
                               where  r.RegNumber == _username && r.PlaceOfWork == w.WorkID
                               select g.max(r.RenewalYear); 
```

显然它不起作用，有人知道正确的语法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:39:48.857

选择您的年份，然后使用 Max() ：

```
var renewalQuery = (from r in crnnsupContext.Renewals
                               group r by r.RenewalYear into g
                               from w in crnnsupContext.WorkPlaces
                               join p in crnnsupContext.ProvStates on p.ProvinceStateID equals r.EmployerProvState
                               where  r.RegNumber == _username && r.PlaceOfWork == w.WorkID
                               select r.RenewalYear).Max(); 
```

# mysql - MySQL 错误 #1064 为 NOT NULL

> ID：10435657
> 
> 赞同：1
> 
> 时间：2012-05-03T16:37:27.963
> 
> 标签：mysql, phpmyadmin, mysql-error-1064

创建表时遇到此错误。如何修复？

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“NOT NULL, mult smallint default NOT NULL, part_des varchar(120) NOT NULL defau”附近使用正确的语法

```
CREATE TABLE currentpricer_supplier1
(
    supplier_number varchar(50) NOT NULL,
    moq smallint default NOT NULL,
    mult smallint default NOT NULL,
    part_des varchar(120) default NOT NULL,
    uom_qbreak char(2) default NOT NULL,
    costbreak1 smallint default NOT NULL,
    costvalue1 dec(6,3) default NULL,
    costbreak2 smallint default NOT NULL,
    costvalue2 dec(6,3) default NULL,
    costbreak3 smallint default NOT NULL,
    costvalue3 dec(6,3) default NULL,
    costbreak4 smallint default NOT NULL,
    costvalue4 dec(6,3) default NULL,
    costbreak5 smallint default NOT NULL,
    costvalue5 dec(6,3) default NULL,
    costbreak6 smallint default NOT NULL,
    costvalue6 dec(6,3) default NULL,
    costbreak7 smallint default NOT NULL,
    costvalue7 dec(6,3) default NULL,
    costbreak8 smallint default NOT NULL,
    costvalue8 dec(6,3) default NULL,
    leadtime smallint default NOT NULL,
    leadtime_code char(2) default NOT NULL,
    PRIMARY KEY (supplier_number)
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:42:38.610

如果您指定了默认关键字，则必须输入默认值。“not null”是另一种规范，而不是值本身。

默认值是多少？例如：

> moq smallint 默认 0 NOT NULL,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:46:07.527

在每个带有`default`关键字的列上，您没有提供默认值。这可以像`0`数字一样简单，默认值后面的字符为空字符串。此外，您的主键列不存在，因此您需要更正它 - 是 lumex_number 吗？

以下编辑有效：

```
CREATE TABLE currentpricer_supplier1
(
    lumex_number varchar(50) NOT NULL,
    moq smallint default 0 NOT NULL,
    mult smallint default 0 NOT NULL,
    part_des varchar(120) default 0 NOT NULL,
    uom_qbreak char(2) default 0 NOT NULL,
    costbreak1 smallint default 0 NOT NULL,
    costvalue1 dec(6,3) default 0 NULL,
    costbreak2 smallint default 0 NOT NULL,
    costvalue2 dec(6,3) default 0 NULL,
    costbreak3 smallint default 0 NOT NULL,
    costvalue3 dec(6,3) default 0 NULL,
    costbreak4 smallint default 0 NOT NULL,
    costvalue4 dec(6,3) default 0 NULL,
    costbreak5 smallint default 0 NOT NULL,
    costvalue5 dec(6,3) default 0 NULL,
    costbreak6 smallint default 0 NOT NULL,
    costvalue6 dec(6,3) default 0 NULL,
    costbreak7 smallint default 0 NOT NULL,
    costvalue7 dec(6,3) default 0 NULL,
    costbreak8 smallint default 0 NOT NULL,
    costvalue8 dec(6,3) default 0 NULL,
    leadtime smallint default 0 NOT NULL,
    leadtime_code char(2) default '' NOT NULL,
    PRIMARY KEY (lumex_number)
) 
```

# mysql - 是否在表中实现继承

> ID：10435658
> 
> 赞同：-1
> 
> 时间：2012-05-03T16:37:35.910
> 
> 标签：mysql, database, database-design

我有一个问题，现在我自己一点一点地学习什么是数据库。

很好的结果，我有一家电脑零售店，商店在个人服务（经理、管理员、供应商和支持）和客户（自然和合法）中，所有这些都必须有一个用户名和密码，您将有权访问（用户、服务人员）。

正如设计会做的那样？我想要的是管理访问权限，从而避免某些表继承，但如果它应该适用于我的情况或仅适用于 Access，则不是，因为从一个名为 PERSON 的表和另一个名为 SALES 的表中，例如，如果一个人是卖家和另外一个工作人员是一个用户，他会在桌子上买任何东西 SALE 我想保存卖家人员和梯子的数据，如果你只有一个叫做 pERSON 的桌子，那会不会有双重关系？，应该是两个 FK身份证人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:58:51.030

在一个好的模型中，你必须考虑无限-1、无限-无限、1-1 的关系。所以，一个好的模型必须是：

*   每个表对应一种对象（人员、销售等）
*   每类（管理员、卖家、买家等）
*   如果您有无限表，则必须为关系创建一个表。

例如对于无限无限（1 人可以拥有 1 种或多种类型）：

```
PERSONS
- Person_ID
- Firstname
- Lastname
- Address

WORK
-Work_ID
-Kind (Administrator, seller, etc)

REL_PERS_WORK
-Rel_Id
-Person_ID (from PERSONS table)
-Work_ID (from WORK table) 
```

# android - 按下主页键时从配置活动更新小部件

> ID：10435659
> 
> 赞同：0
> 
> 时间：2012-05-03T16:37:41.157
> 
> 标签：android, configuration, widget

我正在开发一个小部件，我正在使用小部件提供程序 xml 中的 android:configure 设置来设置第一次添加到主屏幕上的小部件。问题在于，这仅在用户从配置活动中点击返回键时才有效。如果用户点击 HOME 键，则不会添加小部件。即使用户点击主页键，有没有办法在主屏幕上添加小部件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:53:50.530

我找到了一个似乎可以解决问题的解决方法。这是做什么：

不要在小部件提供程序 xml 中指定配置活动，而是指定不同的活动，例如 StartActivity。

在 StartActivity 的构造函数中执行以下操作：

*   将结果集为 RESULT_OK 的广播意图发送回小部件
*   启动配置活动
*   调用finish停止StartActivity

在配置活动的 onStop 函数中，更新小部件以反映依赖于任何配置设置的任何更改。

# sql-server - Linq - 根据单个字段的值（最小值）将列表限制为每个唯一值 1 行

> ID：10435660
> 
> 赞同：0
> 
> 时间：2012-05-03T16:37:41.267
> 
> 标签：sql-server, vb.net, linq

我有一个通过 linq 调用的存储过程（我无法编辑）。

存储过程返回值（下面更复杂但重要的数据）：

```
Customer   Stock Item   Date       Price   Priority  Qty
--------------------------------------------------------
CUST1      TAP         01-04-2012  £30     30        1 - 30
CUST1      TAP         05-04-2012  £33     30        1 - 30
CUST1      TAP         01-04-2012  £29     20        31 - 99
CUST1      TAP         01-04-2012  £28     10        1 - 30 
```

我试图将此列表限制为在 LINQ 中具有唯一日期和唯一数量的行。我想删除具有更高优先级的项目，留下具有唯一日期和数量的行。

我已经尝试了几种`group by`使用`Max`and`order by`的方法，但都没有得到结果。

有没有办法通过 linq 做到这一点？

**编辑：**

设法将 brad-rem 的答案转换为 VB.net。

如果有人需要，请使用以下语法：

```
returnlist = (From p In returnlist
              Order By p.Qty Ascending, p.Priority
              Group By AllGrp = p.Date, p.Qty Into g = Group
              Select g.First).ToList 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:17:41.503

下面怎么样。它按日期和数量分组并对其进行排序，以便优先级较低。然后，它只选择每个组中的第一个项目，它们都是优先级较低的项目：

```
var result = from d in dbData
orderby d.Priority 
group d by new
{
    d.Date,
    d.Qty
} into group1
select group1.First(); 
```

# browser - IE上消失的表单字段？

> ID：10435662
> 
> 赞同：0
> 
> 时间：2012-05-03T16:09:41.523
> 
> 标签：browser, cross-browser

我在这个网站上工作了一段时间，刚刚为一个客户推出了它。人们实际上很难相信我是在 WordPress 上完成的，尽管我不明白为什么......

无论如何，我突然看到网站上的一个表单（时事通讯注册）的表单域在 IE 上消失了，你可以看到它们一秒钟然后喘气，它们消失了。我之前确实在 IE 上检查过这个并且它有效，我特别使用[CSS3 PIE](http://css3pie.com/)来获得 IE 上字段的圆角效果......

链接到网站： http: [//www.doritsivan.com](http://www.doritsivan.com)（希望这不是推广，不是我的意图）网站基于 WordPress 和 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:20:47.450

解决了问题，谢谢大家。这是相对定位与绝对定位的糟糕案例，并且字段决定消失（字面意思）一堆使用 firebug-lite 进行的调试（顺便说一句，让它在我的 IE 上工作是真实的，不断崩溃或拒绝完全加载结合 IE 弹出窗口和安全问题），我明白这是问题所在，然后是一些像素摆弄，一切都很好。在 Chrome 中重新检查，发现结果完全一样。任务完成

# c - 如何在 C 中对带符号的数字进行字节交换？

> ID：10435665
> 
> 赞同：4
> 
> 时间：2012-05-03T16:37:57.720
> 
> 标签：c, standards, unsigned, signed

我知道从无符号类型转换为等等级的有符号类型会产生一个实现定义的值：

> C99 6.3.1.3：
> 
> > 3.  否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

这意味着我不知道如何对有符号数字进行字节交换。例如，假设我从外围设备以小端顺序接收两个字节、二进制补码的有符号值，并在大端 CPU 上处理它们。C 库中的字节交换原语（如`ntohs`）被定义为处理无符号值。如果我将我的数据转换为无符号数据以便可以对其进行字节交换，那么之后如何可靠地恢复有符号值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:49:07.240

正如您在问题中所说的那样，结果是*实现定义的或产生了实现定义的信号*- 即取决于平台/编译器会发生什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-21T21:59:12.507

要对有符号数进行字节交换，同时尽可能避免实现定义的行为，您可以使用更广泛的有符号中间体，它可以表示具有与您想要的有符号值相同的宽度的*无符号*类型的整个范围字节交换。以 little-endian 16 位数字为例：

```
// Code below assumes CHAR_BIT == 8, INT_MAX is at least 65536, and
// signed numbers are twos complement.
#include <stdint.h>

int16_t
sl16_to_host(unsigned char b[2])
{
    unsigned int n = ((unsigned int)b[0]) | (((unsigned int)b[1]) << 8);
    int v = n;
    if (n & 0x8000) {
        v -= 0x10000;
    }
    return (int16_t)v;
} 
```

这就是它的作用。首先，它将 little-endian 值转换`b`为 host-endian 无符号值（无论主机实际上是哪种字节序）。然后它将该值存储在一个更广泛的有符号变量中。它的值仍在 [0, 65535] 范围内，但它现在是一个有符号数量。因为`int`可以表示该范围内的所有值，所以转换完全由标准定义。

现在到了关键的一步。我们测试*无符号*值的高位，即符号位，如果为真，我们从有*符号*值中减去 65536 (0x10000)。这将范围 [32768, 655535] 映射到 [-32768, -1]，这正是二进制补码有符号数的编码方式。这仍然在更广泛的类型中发生，因此我们保证该范围内的所有值都是可表示的。

最后，我们将更宽的类型截断为`int16_t`. 此步骤涉及不可避免的实现定义的行为，但很可能，您的实现将其定义为按您预期的方式运行。在极不可能发生的情况下，您的实现使用符号和大小或补码表示有符号数，值 -32768 将被截断破坏，并可能导致程序崩溃。我不会担心它。

当您没有可用的 64 位类型时，另一种方法可能对字节交换 32 位数字有用，它是屏蔽符号位并单独处理它：

```
int32_t
sl32_to_host(unsigned char b[4])
{
    uint32_t mag = ((((uint32_t)b[0]) & 0xFF) <<  0) |
                   ((((uint32_t)b[1]) & 0xFF) <<  8) |
                   ((((uint32_t)b[2]) & 0xFF) << 16) |
                   ((((uint32_t)b[3]) & 0x7F) << 24);
    int32_t val = mag;
    if (b[3] & 0x80) {
        val = (val - 0x7fffffff) - 1;
    }
    return val;
} 
```

我在`(val - 0x7fffffff) - 1`这里写了，而不是仅仅`val - 0x80000000`，以确保减法发生在有符号类型中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-22T07:51:13.770

> 我知道从无符号类型转换为具有相同等级的有符号类型会产生一个实现定义的值。

它将是实现定义的，只是因为 C 中的签名格式是实现定义的。例如，二进制补码就是这样一种实现定义的格式。

所以这里唯一的问题是，如果传输的任何一方都不是二进制补码，这在现实世界中不太可能发生。我不会费心将程序设计为可移植到黑暗时代的晦涩、已灭绝的计算机。

> 这意味着我不知道如何对有符号数字进行字节交换。例如，假设我正在从外围设备以 little-endian 顺序接收两个字节、二进制补码的有符号值，并在 big-endian CPU 上处理它们

我怀疑这里的一个混淆来源是你认为一个通用的二进制补码将从一个大端或小端的发送者发送，并由一个大端或小端的发送者接收。数据传输协议不是这样工作的：它们明确指定字节序和签名格式。所以双方都必须适应协议。

一旦指定，这里真的没有火箭科学：你收到 2 个原始字节。将它们存储在原始数据数组中。然后将它们分配给您的补码变量。假设协议指定小端：

```
int16_t val;
uint8_t little[2];

val = (little[1]<<8) | little[0]; 
```

位移位具有与字节序无关的优点。所以无论你的 CPU 是大是小，上面的代码都可以工作。因此，尽管这段代码包含大量丑陋的隐式促销，但它是 100% 可移植的。C保证将上述内容视为：

```
val = (int16_t)( ((int)((int)little[1]<<8)) | (int)little[0] ); 
```

移位运算符的结果类型是其提升的左操作数的结果类型。| 结果类型 是平衡型（通常的算术转换）。

移动带符号的负数会产生未定义的行为，但我们可以避免这种移动，因为单个字节是无符号的。当他们被隐式提升时，这些数字仍然被视为正数。

并且由于`int`保证至少为 16 位，因此代码将在所有 CPU 上运行。

或者，您可以使用完全排除所有隐式促销/转换的迂腐风格：

```
val = (int16_t) ( ((uint32_t)little[1] << 8) | (uint32_t)little[0] ); 
```

但这是以可读性为代价的。

# ruby-on-rails - 无法访问公共图像 可能的路由问题

> ID：10435673
> 
> 赞同：0
> 
> 时间：2012-05-03T16:38:18.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, routing, paperclip, show

我正在做一个项目，并尝试在我的一个展示视图中渲染一些位于公共目录下的图像。我可以在我的索引视图上很好地访问这些图像，但是对于显示视图来说似乎并不那么容易。

因此，在我看来，我有类似以下的内容：

```
<%= "<img src=\"images/16x16/actions/filesave.png\" class=\"icon" title=\"save\">"%> 
```

这在我的索引视图中可以正常工作，但由于某种奇怪的原因，我在我的显示视图中得到了这个路由错误：

> ActionController::RoutingError (没有路由匹配 [GET] "/uploads/images/16x16/actions/filesave.png"):

我注意到由于某种特殊原因，它在“/images ...”之前注入了“/uploads/”路由，这是我的问题的原因，我不知道为什么或如何阻止它。这只发生在我的节目视图中。

现在我的 routes.rb 文件中发生了很多事情，我知道它很难看，但我确实计划在我有机会的时候去那里清理它。

```
resources :upload_images

  get "upload_image/new"

  get "upload_image/index"

  get "upload_image/show"

  get "upload_image/delete"

  resources :help_categories

  resources :global_configs

  resources :competitions

  match '/teams/register', :controller => 'teams', :action => 'register'
  match '/teams/invite_users', :controller => 'teams', :action => 'invite_users'
  match '/teams/view_invitations', :controller => 'teams', :action => 'view_invitations'
  match '/teams/ignore', :controller => 'teams', :action => 'ignore'
  match '/teams/leave_team', :controller => 'teams', :action => 'leave_team'
  resources :teams

  resources :competitions do
    resources :matches
  end

  resources :registers
  resources :players do
    collection do
      post :edit_individual
      put :update_individual
      get :results
    end
  end
  resources :tournaments

  resources :matches

  resources :upload_categories

  resources :uploads, :except => [:new]

  match '/download/:id' => 'uploads#download'

  devise_for :users do    
    match 'logout' => 'devise/sessions#destroy'
  end

  resources :users, :except => [:new] do
    member do
      get 'upload_files'
      get 'delete_files'
    end
  end

  resources :games

  devise_for :videolinks

  resources :topics do
    collection do
      get "mark_all_viewed"
    end
    member do
      get 'show_new'
    end
  end

   resources :posts do
    member do
      get 'quote'
      get 'topic'
    end
  end

  resources :forums do
    member do
      get 'confirm_delete'
    end
  end

  resources :blog_entries, :except => [:index]
  resources :categories
  resources :videolinks
  resources :competition_games
  resources :competitions
  resources :news  
  resources :events 

  match 'uploads/find_uploads' => 'uploads#find_uploads'
  match 'uploads/add_upload_image' => 'uploads#add_upload_image'
  match 'forum_root' => 'forums#index'
  match 'upload_root' => 'uploads#index'
  match 'user' => 'forums#index'
  match 'news_root' => 'news#index'
  match 'topic_post' => 'forums#index'
  match 'quote_post' => 'forums#index'
  match 'new_upload' => 'forums#index'
  match 'videolinks/:id', :to => 'videolinks#show'
  match 'register' => 'users#sign_up'
  match 'login' => 'users#sign_in'

  match 'users/find_users' => 'users#find_users'
  match '/users/get_states/:country' => 'users#states'
  match '/ban/:username' => 'users#ban'
  match '/ban_user/:username' => 'users#ban_user'
  match ':username' => 'users#show'
  match ':username/edit' => 'users#edit'
  match ':username/delete_files_all' => 'uploads#index'
  match ':username/delete_files' => 'users#delete_files'
  match ':username/upload_files' => 'users#upload_files'
  match ':username/password/edit' => 'users#editpass'
  match ':username/edit_file/:id' => 'uploads#edit'
  match '/maketakeadmin/:username' => 'users#maketakeadmin'
  match ':username/destroy' => 'users#destroy'

  root :to => "home#index"

  resources :categories do
    member do
      get 'confirm_delete'
    end
  end 
```

另一位开发人员在此应用程序的上传部分工作，它使用回形针。默认情况下，它将上传保存在公共目录中，我们不希望这样，所以他告诉我他做了一些奇怪的修补程序来将上传保存到应用程序根目录下的一个名为“uploads”的私有目录。不确定这是否与它有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:52:31.397

在路径的开头需要一个正斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:28:24.563

我认为你应该使用这样的东西：

```
<%= image_tag "/images/16x16/actions/filesave.png", class: "icon", alt: "save" %> 
```

# android - 在android中隐藏活动

> ID：10435678
> 
> 赞同：6
> 
> 时间：2012-05-03T16:38:29.983
> 
> 标签：android, android-activity

我在一个 android 应用程序中有两个活动，每个活动都有一个按钮可以转到另一个活动（按`startActivity()`方法）。在第二个活动中，我有一个编辑文本（URL 地址栏）和一个 Web 视图。

所以，当我点击 activity1 的按钮启动 activity2 时，我会得到带有 web 视图的 activity2。然后我在地址栏中键入`cnn.com`（例如），我的 web 视图将显示该`cnn.com`网站。之后，我单击按钮从活动 2 转到活动 1。如果我再次点击activity1的按钮，我会启动activity2。但是刚刚创建了activity2，我的意思是，编辑文本和网络视图都是空的。

我想要的是：如果我从活动 1 返回到活动 2，我希望活动 2 保持最后一个状态：编辑文本应该保持`cnn.com`，网络视图应该继续显示 CNN 网站。所以我需要的不是在启动activity1之前退出activity2，而是隐藏它并启动activity2，这样如果我再次返回它，我就会得到它的最后一个状态。（就像我点击主页按钮时一样。）我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T16:54:07.840

这是解决您问题的建议。

当您从活动二中的按钮转到活动一时，请确保当您从活动二移到活动一时，它不应完成活动二。

现在当你想回到活动二时，你需要像下面这样调用你的活动。

```
 Intent mIntent=new Intent(yourActivityOne1.this, YourActivity2.class);
    mIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    mIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(mIntent); 
```

所以这段代码的作用是它会让 Activity 首先过来而不创建一个新的 Activity 实例，你可以在那里看到你最后加载的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:46:22.410

我不知道如何隐藏它，但我要做的是将活动 2 中的文本保存到 onPause 方法的首选项中，并在创建活动 2 时从首选项中加载数据。

活动 2 将如下所示：

```
onPause(){
    SharedPreferences settings = getSharedPreferences("MyPreferences", MODE_PRIVATE);  
    SharedPreferences.Editor prefEditor = settings.edit();  
    prefEditor.putString("activity2Text", textField.getText().toString());  
    prefEditor.commit(); 
}

onCreate(){
      .....
    SharedPreferences settings = getSharedPreferences("MyPreferences", MODE_PRIVATE); 
    textField.setText(settings.getString("activity2Text","") );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T07:22:18.483

它不会完成 BackPressed 上的活动，它将表现为主页按钮

你可以编辑它..它可能有助于不完成

```
@Override
public void onBackPressed()
    {

   Log.d("CDA", "onBackPressed Called");
   Intent setIntent = new Intent(Intent.ACTION_MAIN);
   setIntent.addCategory(Intent.CATEGORY_HOME);
   setIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
   startActivity(setIntent);
   } 
```

# python - 避免用户中止 python 子进程

> ID：10435680
> 
> 赞同：1
> 
> 时间：2012-05-03T16:38:41.797
> 
> 标签：python, subprocess, multiprocessing

即使用户关闭页面，我也希望我通过脚本启动的过程在网络服务器上运行。它似乎不适用于此：

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

import cgi,cgitb,subprocess

print "Content-Type: text/plain;charset=utf-8"
print

form = cgi.FieldStorage()
ticker = form['ticker'].value

print subprocess.Popen(['/usr/bin/env/python','options.py',ticker]) 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:47:04.863

我想这是错误的：

```
'/usr/bin/env/python' 
```

通常应该是：

```
'/usr/bin/env python' 
```

但最好使用这个：

```
>>> import sys
>>> sys.executable # contains the executable running this python process
'C:\\Python27\\pythonw.exe' 
```

我曾经这样做：

```
p = subprocess.Popen([sys.executable,'options.py',ticker]) 
```

# html - 浮动 div 与浮动 li，我如何在 LI 中居中文本

> ID：10435685
> 
> 赞同：0
> 
> 时间：2012-05-03T16:38:58.980
> 
> 标签：html, css

我必须在 HTML/CSS 中实现以下看起来很简单的设计示例，但我似乎无法让带有两个管道的文本在页面上居中对齐。[左行、文本和右行位于居中位置，文本几乎位于行的中间](http://i.stack.imgur.com/miNV1.jpg)

这是我目前拥有的 CSS 代码：

```
#nav {
float: right;
font-family: "Trebuchet MS","Lucida Grande","Lucida Sans",Verdana,Arial,sans-serif;
font-size: 6.5em;
margin: 0px 0 10px;
/****************IE6****************/
padding-top: 0em;
}
#nav ul {
    padding: 0 0 0 20px;
    position: relative;
}
ul, ol, dl, li, dt, dd, h1, h2, h3, h4, h5, h6, pre, form, body, html, p, blockquote, fieldset, input {
    margin: 0;
    padding: 0;
}
ul, ol {
    list-style: none outside none;
}
#nav ul li {
    float: left;
    margin: 0 0 0 20px;
    position: relative;
    padding-right: 20px;
    background:url(pipe.png) no-repeat 100% 50%;
}
#nav ul li:last-child
{
    background: none;
}
#nav li  {
    color: #666666;
    text-decoration: none;
    padding-right: 5px;
}

/*End hide*/
/*Mac IE 5*/
* html #nav li:first-child { border-left: 0; } 
```

这是我的 HTML

```
<div id="nav">
    <ul>
        <li>
            &nbsp;
        </li>
        <li> 
            LYNXX
        </li>
        <li>
        &nbsp;
        </li>
    </ul>
</div> 
```

我尝试了以下方法：

1.  添加一个外部 div 并对齐该中心，这对内部 div 没有任何作用
2.  我尝试使用三个 div 并全部向左浮动，但仍然无法对齐“管道”/行中间的文本

我已经尝试了很多，但是在我已经花费了 5 个小时之后，我不记得我做了什么以及我不再做了什么。

这应该是 IE 7,8,9 和所有其他最新的浏览器准备好了。

如果有人可以帮助我，我将不胜感激。

谢谢安妮娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:44:14.533

HTML：

```
<ul>
 <li><span>Text goes here</span></li>
</ul> 
```

CSS：

```
ul {
 list-style-type: none;
}
ul li {
 background: #000;
 text-align: center;
 float: left;
 padding: 30px 100px;
}
ul li span {
 display: block;
 float: left;
 margin: 0 auto;
 padding: 10px 50px;
 border-width: 0 1px;
 border-style: solid;
 border-color: #fff;
 text-align: center;
 color: #fff;
} 
```

[http://jsfiddle.net/MKf4B/](http://jsfiddle.net/MKf4B/)

这是一个简单的实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:58:54.717

你为什么用 li's 来握管子？

我认为这可能更合适

```
<div class="container">
    <div class="text">
        Text goes here
    </div>
</div> 
```

有了这些款式

```
 .container {
        width: 500px;
        margin: auto;
    }

    .text {
        width: 250px;
        margin: auto;
    }

    .text:before {
        content: "|";
    }

    .text:after {
        content: "|";
    } 
```

我假设您了解如何在 li 上使用它，如果那是您真正需要的。

# javascript - 如何正确停止 iframe 内的传输

> ID：10435686
> 
> 赞同：0
> 
> 时间：2012-05-03T16:39:03.537
> 
> 标签：javascript, jquery

当用户单击“取消”按钮时，我试图阻止文件上传。为此，我正在考虑停止 iframe 内的传输。问题是能够正确编码。以下是我试图实现的代码，但我在这里收到此错误：

```
$('.upload_target').contentWindow is undefined 
```

首先如何修复错误，其次如何正确编写下面的代码，以便当单击“取消”按钮时，它会停止 iframe 内的传输？

下面是开始上传文件的 startImageUpload() 函数。在该函数中是处理单击“取消”按钮的函数；

```
function startImageUpload(imageuploadform){

              $(".imageCancel").click(function() {
              $('.upload_target').get(0).contentwindow

              if ($('.upload_target').contentWindow.document.execCommand)
    { // IE browsers
       $('.upload_target').contentWindow.document.execCommand('Stop');
    }
else
    { // other browsers
        $('.upload_target').contentWindow.stop();
    }

          return stopImageUpload();

    });

      return true;
} 
```

以下是包含 iframe 的表单代码：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return startImageUpload(this);' class='imageuploadform' >" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "</p><p class='imagef1_cancel' align='center'><label>" + 
    "<input type='button' name='imageCancel' class='imageCancel' value='Cancel' /></label></p>" + 
    "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:45:34.667

`$('.upload_target')` 将返回一个包含该类的所有元素的 jQuery 对象，因此 contentWindow 属性将不存在

`$(.upload_target:eq(0)').get()`将返回（第一个但假设只有一个）元素本身，然后 contentWindow 应该存在

或者`$(.upload_target')[0]`如果您针对单个元素但 ID 会更高效

# java - 特定 div 的页面抓取

> ID：10435687
> 
> 赞同：1
> 
> 时间：2012-05-03T16:39:04.493
> 
> 标签：java, html

我想知道是否有办法使用 Java 读取给定网页的 html 输出？

我知道在 php 中您可以执行以下操作：

```
$handle = @fopen("'http://www.google.com", "r");
$source_code = fread($handle,9000); 
```

我正在寻找 Java 等价物。

此外，一旦我拥有呈现的 html，是否有任何 Java 实用程序可以让我通过其 id 去除单个 div？

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:43:27.653

使用[jsoup](http://jsoup.org/)。

您可以在树模型和类似于 CSS 或 jQuery 选择器的强大查询语法以及快速获取网页源代码的实用方法之间进行选择。

引用他们的网站：

> 获取 Wikipedia 主页，将其解析为 DOM，然后从 In the news 部分中选择标题到元素列表中：
> 
> ```
> Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
> Elements newsHeadlines = doc.select("#mp-itn b a"); 
> ```

找到要删除的`Element`代表后，只需调用它即可。`div`[`remove()`](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#remove%28%29)

# mysql - 我怎样才能使这个查询在 D7 中工作？

> ID：10435688
> 
> 赞同：3
> 
> 时间：2012-05-03T16:39:05.317
> 
> 标签：mysql, sql, drupal, drupal-7

我正在尝试从我的 template.php D6 站点的第 52 行重写此数据库查询

```
 $uid = db_query('SELECT pm.author FROM {pm_message} pm INNER JOIN {pm_index} pmi ON pmi.mid = pm.mid AND pmi.thread_id = %d WHERE pm.author <> %d ORDER BY pm.timestamp DESC LIMIT 1', $thread['thread_id'], $user->uid); 
```

进入 D7 标准。

但它一直给我

> 可恢复的致命错误：传递给 db_query() 的参数 2 必须是一个数组，给定字符串，在第 52 行的 C:\wamp2\www\site-name\sites\all\themes\simpler\template.php 中调用并在 db_query 中定义()（C:\wamp2\www\site-name\includes\database\database.inc 的第 2313 行）。

此数据库查询是 template.php 片段的一部分，该片段在私人消息模块中显示用户图片，并使其看起来像 Facebook 或其他社交网站。你可以在这里看到完整的片段。因为私人消息有一个统一的价值 $participants （或消息线程）这个数据库查询基本上是试图隔离除当前用户之外的最后一个作者。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T00:26:53.737

正如错误消息所说：“传递给 db_query() 的参数 2 必须是数组 ...”。

Drupal 7 将数据库层切换为使用[PDO ，因此](http://php.net/manual/en/book.pdo.php)[db_query()](http://api.drupal.org/api/drupal/includes!database!database.inc/function/db_query/7)中的占位符替换发生了一些变化 - 尝试：

```
$query = 'SELECT pm.author FROM {pm_message} pm'
  . ' INNER JOIN {pm_index} pmi ON pmi.mid = pm.mid AND pmi.thread_id = :thread_id'
  . ' WHERE pm.author <> :uid'
  . ' ORDER BY pm.timestamp DESC LIMIT 1';
$args = array(
  ':thread_id' => $thread['thread_id'],
  ':uid' => $user->uid,
);
$uid = db_query($query, $args)->fetchField(); 
```

拆分并重新格式化以提高可读性。未经测试，所以要小心拼写错误。

请注意[`->fetchField()`](http://api.drupal.org/api/drupal/includes!database!database.inc/function/DatabaseStatementInterface%3A%3AfetchField/7)最后的 - 这仅适用于只返回一个字段的查询（如这个）。如果您需要获取更多字段或记录，请查看[DatabaseStatementInterface](http://api.drupal.org/api/drupal/includes!database!database.inc/interface/DatabaseStatementInterface/7)文档。

# android - 以编程方式将图像添加到 RelativeLayout

> ID：10435689
> 
> 赞同：4
> 
> 时间：2012-05-03T16:39:06.317
> 
> 标签：android, android-relativelayout

我想通过代码添加到线性布局，各种相关布局。每个相对布局包括：左侧的图像视图，右侧的文本视图（正好在中间）和右侧的另一个图像。我必须使用从数据库读取的数据添加它们。它必须与 relativelayout 一起使用，因为我想在图像上使用一个侦听器，而在 RL 上使用不同的侦听器。

每个 relativelayout 看起来像我在 XML 中的这个东西。

```
<RelativeLayout
    android:id="@+id/relativecanal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

       <ImageView
           android:id="@+id/imageView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentLeft="true"
           android:layout_alignParentTop="true"
           android:src="@drawable/antena3" />

       <TextView
           android:id="@+id/textView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_centerVertical="true"
           android:layout_marginLeft="39dp"
           android:layout_toRightOf="@+id/imageView1"
           android:text="Large Text"
           android:textAppearance="?android:attr/textAppearanceLarge" />

       <ImageView
           android:id="@+id/imageView2"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentRight="true"
           android:layout_centerVertical="true"
           android:src="@drawable/star" />

    </RelativeLayout> 
```

我正在使用这段代码：但是在为图像制作 addView() 时我得到了 NullPointerException，我尝试添加 textView 并且它可以工作。

```
 try {
     File sdcard = Environment.getExternalStorageDirectory();
     File file = new File(sdcard,archivoCanales);
  LinearLayout layout = (LinearLayout) findViewById(R.id.channelslistlayout);
     BufferedReader br = new BufferedReader(new FileReader(file));
     String line;

     while ((line = br.readLine()) != null) {

         RelativeLayout channel=new RelativeLayout(this);
         channel.setBackgroundColor(2);

         TextView channelName=new TextView(this);
         channelName.setText(new String(line));

         ImageView image=(ImageView)findViewById(R.drawable.animalplanet);

      LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(
              LinearLayout.LayoutParams.MATCH_PARENT,
              LinearLayout.LayoutParams.WRAP_CONTENT
      );    

    RelativeLayout.LayoutParams firstImageParams = new RelativeLayout.LayoutParams(
            android.view.ViewGroup.LayoutParams.WRAP_CONTENT,
            android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
            firstImageParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT);

         RelativeLayout.LayoutParams secImageParams = new RelativeLayout.LayoutParams(
                android.view.ViewGroup.LayoutParams.WRAP_CONTENT,android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
                secImageParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

         channel.addView(image,firstImageParams);
         channel.addView(channelName,secImageParams);

         layout.addView(channel,llp);
}

 }
 catch (IOException e) {
    e.printStackTrace();
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T17:14:04.113

您正在使用`(ImageView)findViewById(R.drawable.animalplanet)`它不是以编程方式执行它的正确方法afaik。如果你想充气，`ImageView`你应该这样做：

```
RelativeLayout.LayoutParams imParams = 
new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
ImageView imSex = new ImageView(context);
imSex.setImageResource(getmyImage());
imSex.setId(2);
addView(imSex,imParams); 
```

但是，如果您只显示图像而不显示可点击并从数据库加载它，我建议您使用[ViewBinder](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#setViewBinder%28android.widget.SimpleCursorAdapter.ViewBinder%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T16:53:10.920

您没有制作新图像，这就是您得到空指针异常的原因。您应该创建一个新的或布局膨胀一个新的。

# clearcase - 在 Clearcase 中创建项目特定文件

> ID：10435695
> 
> 赞同：1
> 
> 时间：2012-05-03T16:39:29.823
> 
> 标签：clearcase

我想知道是否可以在 Clearcase 中创建特定于项目的文件。我想做的是在一个项目中创建文件，使用 Clearcase 对文件进行源代码控制，但我不希望这些文件离开该项目，因为它们在任何其他项目中都不适用。

例如：我想在 Clearcase 中管理数据库更改。我计划在每个项目中有 3 个文件夹（为软件的每个版本创建项目）。文件夹是“安装”、“更新”和“退出”。安装文件夹包含从头开始为我正在使用的流构建数据库所需的脚本，假设流在项目“13.03”中。“update”和“backout”文件夹包含更新和撤销更改以将数据库从 13.02 带到 13.03 所需的脚本，反之亦然。

在 13.04 项目中，我将拥有相同的文件夹结构，但我不希望 13.04 中的“更新”和“退出”文件夹的内容，因为我会有其他文件将数据库从 13.03 带到13.04。

所以我要做的基本上是在 Clearcase 中创建“特定于项目的”文件/文件夹。

对于在 Clearcase 中管理数据库更改，我很乐意采纳任何其他建议。请记住，可以同时开发 13.03 和 13.04（例如）基线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:33:08.453

您似乎指的是同一个项目，具有不同的版本（13.02、13.03、...）。
如果是这样的话：

*   只需根据当前版本更新您的 3 文件夹
*   在代表您的项目的组件上放置基线（如果我们正在谈论 ClearCase UCM）
*   如果需要对特定版本的任何文件进行进化，请创建一个名为“13.03”的子流，并在那里更新您的“13.03”文件夹。它们将在自己专用的“13.03”*分支*中完全隔离地发展。

* * *

如果您*必须*为每个项目版本创建一个新目录（这意味着您根本不需要源代码控制系统，只需要一个简单的备份系统），那么您别无选择，只能使用相应的文件重新创建每个文件夹在其中，制作新的“添加到源代码管理”。

# php - 使用 CURL 仅获取最新推文的 ID

> ID：10435696
> 
> 赞同：0
> 
> 时间：2012-05-03T16:39:33.570
> 
> 标签：php, curl, twitter

```
$ch = curl_init("http://api.twitter.com/1/statuses/user_timeline/nafhameducation.json");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$latest_tweet = curl_exec($ch);
$latest_tweet_id = $latest_tweet[0]->id_str;
curl_close($ch); 
```

我正在使用此代码获取时间线上最新推文的 ID，但是 $latest_tweet_id 返回一个空字符串，知道为什么它没有得到我需要的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:41:28.507

尝试

```
 $latest_tweet = json_decode(curl_exec($ch)); 
```

卷曲返回文本。打开你的错误报告，顺便说一句，你应该得到 PHP 错误，试图将字符串作为对象访问。

此外，在调试它时，`var_dump($latest_tweet);`在第 3 行之后会很有用——这应该清楚地表明 $latest_tweet 的类型不是对象。

# testflight - TestFlight 拒绝构建“get-task-allow”错误

> ID：10435697
> 
> 赞同：39
> 
> 时间：2012-05-03T16:39:37.983
> 
> 标签：testflight

所以我使用 testflightapp 来分发一个临时构建。

但我不断收到此消息：“配置文件无效：分发构建权利必须将 get-task-allow 设置为 false。”

我没有我的应用程序的权利文件，因此 XCode 会自动生成一个并将其包含在构建中。我解压缩 App.ipa 并打开 embedded.mobileprovision 文件并查看权利字典。

它看起来像这样：

```
<key>Entitlements</key>
<dict>
    <key>application-identifier</key>
    <string>E9PBH9V8TB.*</string>
    <key>get-task-allow</key>
    <false/>
    <key>keychain-access-groups</key>
    <array>
        <string>E9PBH9V8TB.*</string>
    </array>
</dict> 
```

以前有其他人经历过吗？我不明白为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-03T17:04:00.997

结果发现我的构建配置中的代码签名身份与我在保存存档以进行临时分发时选择的身份不匹配。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2014-05-31T18:48:35.343

Heh, i suddenly found that **Code Signing Identity** for **Release** build was changed to **iOS Developer**. You should change it to **iOS Distribution**. If it doesn't fix your problem, set **Provisioning profile** for **Release** build.

![Steps to fix it](../Images/bd645034c134a22b4575f5f9ea14da1d.png)

It works for me. Happy coding!

**Update:** Sometimes XCode doesn't apply this changes and restarting of XCode could help. Anyway before uploading to Testflight I strongly recommend you to check **build logs**. You should find this line **"Using code signing identity"** and see if XCode use the *right Code Identity* (**distribution**) to sign. It could save you a lot of time.

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-07-31T14:53:49.983

奇怪的是，重新启动 xcode 并重新归档会有所帮助。它确实对我有用。:-)

（[TestFlight iOS App get-task-allow 问题](https://stackoverflow.com/questions/22536234/testflight-ios-app-get-task-allow-issue)）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-06T21:32:12.783

我在 XCode 5 中遇到了这个问题。我的配置文件设置正确，但我没有“权利”文件。为了解决这个问题，我选择了目标应用程序，然后选择了“功能”选项卡。我打开了一个或两个可用选项（iCloud、Game Center、Passbook 等），这样 XCode 就会创建一个“权利”文件。创建文件后，我关闭了刚刚打开的选项。同样，我构建并存档了项目，并且能够将 .ipa 文件与 TestFlight 一起使用。（见下面的屏幕截图）

![在此处输入图像描述](../Images/f1c98f3abcbcd9ccf84a55e33f5eff3e.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T17:00:02.657

我也有同样的问题。

如果您遵循 TestFlight 说明，则应禁用 Target --> Summary 中的权利配置。

“向下滚动并展开摘要选项卡中的权利部分。在以前版本的 Xcode 中，您需要创建一个权利文件并创建一个 get-task-allow 键。这不再需要。除非您的应用程序需要特殊权限iCloud 或钥匙串访问，您不需要创建此文件。取消选中启用权利复选框。”

但对我不起作用，希望对你有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-26T22:05:55.227

大多数情况下，您使用开发供应配置文件签署您的应用程序。

您必须确保使用**Ad Hoc Provisioning Profile**对您的应用程序进行签名。

来自[Testflight 网站](http://help.testflightapp.com/customer/portal/articles/535398-invalid-profile-distribution-build-entitlements-must-have-get-task-allow-set-to-false-)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-05-14T05:36:13.667

我有同样的问题。我登录到 Apple Provisioning Portal，结果发现我的 Ad-hoc 分发配置文件无效，并带有黄色警告标志。

我删除了旧的配置文件，创建了一个新的并在 XCode 发布设置中选择了它。（确保您首先转到 XCode Preferences、Account 并刷新提供配置文件）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-31T20:22:43.137

如果您的 Entitlements.plist 文件中没有任何重要的内容，另一件可能有效的事情就是删除该文件。奇怪的是，这对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-09T08:35:18.793

我有同样的问题。通过检查和更改我用来签署构建的身份来解决它。为我修好了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-22T10:01:26.130

即使在项目和目标设置中设置了正确的代码签名后，我也会多次遇到这个问题。我重新启动了 XCode，创建了另一个 IPA 并将其上传到 Testflight。那工作得很好。

所以我总结为：1）首先检查代码签名细节和配置文件是否正确。2）如果你仍然面临这个问题，相当XCode。重新启动它并再次存档。重新上传新创建的存档，此时一切都应该没问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-04T18:41:45.940

如果有人在 Xcode 7.3.1 中遇到此问题并且重新启动没有帮助，请先尝试`Validate`捆绑，然后再执行`Upload to App Store...`

# java - 句子识别/检测：判断某个文本是否是句子

> ID：10435702
> 
> 赞同：0
> 
> 时间：2012-05-03T16:39:54.543
> 
> 标签：java, nlp

大多数句子拆分器都能够在正确的位置拆分文本流。

我正在寻找一个模型来**决定某些文本是否是句子**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:43:57.983

简单的解决方案：使用解析器（例如，斯坦福解析器，它是免费的和 Java，但有很多选择）来解析句子。如果解析器返回一个解析树（即，如果它找到了一些合适的结构），则称它为一个句子。如果不是，那就说不是。这种方法不需要您付出额外的努力。

需要注意的是，就其本质而言，统计解析器可能会为实际上不合语法的句子返回“最佳猜测”解析。因此，在此方案下，不合语法的句子可能显示为“ok”。

另一方面，如果您想根据您的系统非常具体地了解什么是*正确**的*语法，您可以编写自己的上下文无关语法 (CFG)，然后使用基于 CFG 的解析器来解析句子（你可以找到一个或实现 CKY 算法或其他东西）。*这将准确地*告诉您句子是否符合您提供的语法规范。

当然，这个问题涉及到许多语言学家会为之争执的“[句子是什么意思”这个危险的话题。](http://en.wikipedia.org/wiki/Grammaticality)它还回避了似乎没有任何意义的语法句子问题，例如“[无色的绿色想法疯狂地睡觉。](http://en.wikipedia.org/wiki/Colorless_green_ideas_sleep_furiously) ”或无数其他语义问题。

# c# - 在单个查询中检索“HasMany”实体 - Fluent-NHibernate

> ID：10435704
> 
> 赞同：1
> 
> 时间：2012-05-03T16:39:57.733
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有一个`Entity`包含`OtherEntity`多对多样式关系的集合。此属性的映射如下所示：

```
HasManyToMany(x => x.OtherEntity)
                .AsBag()
                .Table("EntityToOtherEntityMapping")
                .ParentKeyColumn("EntityId")
                .ChildKeyColumn("OtherEntityId")
                .Not.LazyLoad()
                .Cascade.None(); 
```

我注意到，在检索`Entity`' 的集合时，每个 . 集合都有一个单独的 SQL 查询`OtherEntity`。

如何让 Fluent-NHibernate 在一个查询而不是 n 中执行此检索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:39:33.803

在您的财产上添加获取连接。

```
.Fetch.Join(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:39:13.763

答案原来是将 FetchModel 设置为 Eager 并选择 ResultTransformer：

```
.SetFetchMode("Tags", FetchMode.Eager)
.SetResultTransformer(Transformers.DistinctRootEntity) 
```

# android - 在没有广播接收器的情况下找出蓝牙状态？

> ID：10435705
> 
> 赞同：2
> 
> 时间：2012-05-03T16:40:10.830
> 
> 标签：android, bluetooth, state

我想知道是否有任何方法可以简单地检查当前是否连接了蓝牙设备-我不想使用广播接收器-只需检查状态即可。我似乎无法找出这是如何完成的。

我目前有一个监听器，它确实监听蓝牙的状态变化，并相应地更改了一个内部变量 - 但是，即使只是这么说听起来很奇怪，它实际上似乎*有时会*错过蓝牙设备断开广播。我想做的是额外检查设备是否真的仍然连接，或者是否错过了广播......

那么，我该怎么做呢？

感谢阅读/帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:19:48.187

我用它来检查蓝牙的状态。我不知道如何检查当前是否连接到另一台设备，但我认为这可以作为一个起点。

```
 private void CheckBlueToothState() {
    if (bluetoothAdapter == null) {
        //stateBluetooth.setText("Bluetooth NOT support");
    } else {
        if (bluetoothAdapter.isEnabled()) {
            if (bluetoothAdapter.isDiscovering()) {
                //stateBluetooth.setText("Bluetooth is currently in device discovery process.");
            } else {
                //stateBluetooth.setText("Bluetooth is Enabled.");
            }
        } else {
            //stateBluetooth.setText("Bluetooth is NOT Enabled!");
            Intent enableBtIntent = new Intent(
                    BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
    }
} 
```

# c# - MSMQ - 无法从多播队列接收

> ID：10435706
> 
> 赞同：7
> 
> 时间：2012-05-03T16:40:15.313
> 
> 标签：c#, msmq, multicast

我试图了解多播在 MSMQ 中的工作原理，但我根本无法接收消息，即使来自同一台机器也是如此。我显然做错了什么，但看不到什么。

这是我所在的位置：

我手动创建了一个名为的非事务性私有队列`MulticastTest`，然后将多播地址设置为`234.1.1.1:8001`. 然后我的测试发送应用程序会这样做：

```
MessageQueue queue = new MessageQueue("FormatName:MULTICAST=234.1.1.1:8001");
queue.Send("Hello World"); 
```

这行得通，它至少似乎发送了我在同一台机器上的传出队列中看到的消息。至少我认为这是正确的，如果不是，请告诉我。

所以现在我尝试运行我的接收应用程序（在同一台机器上或配置为相同多播地址的不同机器上），但我无法让它工作。如果我试试这个：

```
MessageQueue queue = new MessageQueue("FormatName:MULTICAST=234.1.1.1:8001");
var message = queue.Receive(); 
```

它根本行不通，该`Receive()`方法抛出一个异常说：

> 指定的格式名称不支持请求的操作。例如，不能删除直接队列格式名称

如果我尝试将接收队列设置为`.\private$\MulticastTest`至少等待消息但没有任何反应，则所有消息仍保留在传出队列中。

那么我做错了什么？MSMQ 是否需要运行某种服务才能从传出队列发送消息？

我还尝试根据[此问题](https://stackoverflow.com/questions/8588377/using-multicast-queues-in-system-messaging-and-msmq-3-0)向匿名用户授予完全权限，但这没有影响。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T15:08:25.890

经过大量实验，我终于找到了让多播队列正常工作所需的正确步骤。

首先，确保您已安装 MSMQ 多播功能！尽管能够在我的一台服务器上创建具有多播地址的队列，但服务器管理器实际上告诉我该组件没有安装。

在我的本地机器上尝试了这个之后，我在我的事件日志中发现了这条消息：

> 消息队列找到本地计算机的多个 IP 地址。消息队列将使用 PGM 驱动程序为多播消息确定的默认 IP 地址。要使用不同的 IP 地址，请将 \HKLM\Software\Microsoft\MSMQ\Parameters\MulticastBindIP 注册表值设置为以下有效 IP 地址之一：[此处列出的 IP 地址]

事实证明，我的局域网有多个 IP 地址，所以首先我使用发送消息所需的正确 IP 地址添加了此注册表项，然后重新启动消息队列服务。更多细节可以在这里找到：[https ://technet.microsoft.com/en-us/library/cc770813%28v=ws.10%29.aspx?f=255&MSPPError=-2147217396](https://technet.microsoft.com/en-us/library/cc770813%28v=ws.10%29.aspx?f=255&MSPPError=-2147217396)

接下来，我必须为 ANONYMOUS LOGON 用户向我的消息队列添加权限，因此我提供了（至少）接收和发送权限。

现在要寄东西。您需要的队列名称的正确格式如下：

```
FormatName:MULTICAST=234.1.1.1:8001 
```

或您的多播 IP 地址/端口是什么。我的发送应用程序现在发送了消息，我可以看到它现在出现在我的私人队列中，该队列与这个多播地址相关联。这意味着消息肯定已经发送。

在接收端，我需要监听私有队列（不是上面的多播格式），所以我监听：

```
.\private$\MulticastTest 
```

最后我看到我发送的消息出现在接收端。

作为健全性检查，我设置了另一个指向相同多播地址的队列（确保在该机器上我遵循了上述相同的步骤），现在可以从一台机器发送消息并让多台机器接收它。

我希望这个答案对其他人有所帮助，因为这对我来说是一次真正的反复试验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T09:53:44.350

我通过其他方式解决了同样的问题：

1.  使用多播地址创建私有队列。
2.  通过 next 在生产者中创建队列

    > 常量字符串 QUEUE_PATH = @"格式名:MULTICAST=234.1.1.1:8001"
    > 
    > 消息队列 mq = 新消息队列（QUEUE_PATH）

3.  接下来创建消费者队列（**每个消费者都有不同的名字！**）：

消费者1：

> 常量字符串 QUEUE_PATH = @".\Private$\MSMQ-Task3-Consumer-1";
> 
> 消息队列 mq = !MessageQueue.Exists(QUEUE_PATH) ？MessageQueue.Create(QUEUE_PATH) : new MessageQueue(QUEUE_PATH);
> 
> mq.MulticastAddress = "234.1.1.1:8001";

消费者2：

> 常量字符串 QUEUE_PATH = @".\Private$\MSMQ-Task3-Consumer-2";
> 
> 消息队列 mq = !MessageQueue.Exists(QUEUE_PATH) ？MessageQueue.Create(QUEUE_PATH) : new MessageQueue(QUEUE_PATH);
> 
> mq.MulticastAddress = "234.1.1.1:8001";

来源可以在这里找到：[https ://github.com/constructor-igor/TechSugar/tree/master/MessageQueue](https://github.com/constructor-igor/TechSugar/tree/master/MessageQueue)

可以找到简短的设置说明：[https ://github.com/constructor-igor/TechSugar/wiki/MessageQueue](https://github.com/constructor-igor/TechSugar/wiki/MessageQueue)

# ios - Xcode 中的智能搜索和替换

> ID：10435711
> 
> 赞同：1
> 
> 时间：2012-05-03T16:40:47.790
> 
> 标签：ios, xcode, bash, scripting

我在 Xcode 中创建了一个预处理器符号，它释放一个变量并将其设置为 nil，如下所示：

```
#define ReleaseAndSetToNil(x) [x release]; x = nil; 
```

但是现在我想 ARC 我的项目，这个宏是有问题的。因此，我想将项目中所有出现的宏（数百个）替换为相应的 release 和 nil 语句。有没有办法在 Xcode 中做到这一点？

基本上，我想搜索：

```
ReleaseAndSetToNil(whatever) 
```

...并将其替换为：

```
[whatever release]; 
whatever = nil; 
```

有没有我可以使用的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:09:17.343

如果要转换为 ARC，为什么不直接将宏修改为`#define ReleaseAndSetToNil(x) x = nil;`?

在您现有的代码中，切换到 ARC 后，这将基本相同。

# linq - 实体框架取N项子集合

> ID：10435713
> 
> 赞同：0
> 
> 时间：2012-05-03T16:40:51.913
> 
> 标签：linq, entity-framework

假设我有一个`Customer`实体和一个`Sales`实体，是一对多的关系。我怎样才能获得最近销售 N 次的所有客户？

```
var result = Customers.Where(c => c.Sales.Any()); 
```

这将返回所有客户的所有销售额。如果我只想从每个客户那里获得 2 条销售记录怎么办？

P/S：我可以用查询语法来做到这一点，我正在寻找方法语法解决方案。我只是不知道如何以方法语法形式将它们链接在一起

```
var result = from cust in context.Customers
             select new
             {
                 Customers = cust,
                 Sales = cust.Sales.OrderBy(s => s.Date).Take(2)
             }; 
```

这可行，但我不确定这是否是最好的方法。

编辑：好的，事实证明我在这里包含的查询语法也不起作用。只有`Sales`匿名类型中的 有效减少到 2 条记录。

```
var filtered = result.AsEnumerable().Select(r => r.Customers); 
```

这样做仍然会产生一个包含所有销售额的客户列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:00:54.977

您可以按照[此处所述进行项目](http://blogs.msdn.com/b/alexj/archive/2009/10/13/tip-37-how-to-do-a-conditional-include.aspx)

```
var dbquery = Customers.Select( c => new { 
                        Customer = c,
                        Sales = c.Sales.OrderBy(s => s.Date)
                             .Take(2).Select( s => new { s, s.SalesDetails})
                  });

var customers = dbquery 
   .AsEnumerable() 
   .Select(c => c.Customer); 
```

# python - Mac OS X上的Python安装混乱，无法运行python

> ID：10435715
> 
> 赞同：4
> 
> 时间：2012-05-03T16:40:55.700
> 
> 标签：python, macos, bash, shell, installation

我愚蠢地下载了python 3.2.2，从那以后在终端中写“python”会产生“找不到命令”。另外，在启动终端时，我得到了这个：

上次登录：5 月 2 日星期三 23:17:28 在 ttys001 -bash: export: `folder]:/Library/Frameworks/Python.framework/Versions/2.7/bin:/opt/local/bin:/opt/local/sbin :/usr/local/git/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Applications/ android-sdk-mac_86/tools:/Applications/android-sdk-mac_86/platform-tools:/usr/local/git/bin:/usr/X11/bin:/usr/local/ant/bin': 无效标识符

为什么 Android SDK 文件夹存在于我之外。这一切都很热闹。有什么想法可以删除有问题的文件、文件夹或解决他的问题吗？我检查了 System Profiler，出现了 python 2.6.1 和 2.7.2.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:44:35.407

你的`$PATH`. 查看`~/.profile`, `~/.bashrc`,`~/.bash_profile`等，并寻找以`export`不干净结尾的行开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:44:01.063

你的个人资料问题的一个非常丑陋的解决方案，因为`$PATH`它似乎是非常错误的（正如 blahdiblah 所提到的）

```
/bin/cp ~/.profile /tmp/bkup_profile
/bin/cat /tmp/bkup_profile | /usr/bin/grep -v "PATH" > ~/.profile 
```

打开一个新的终端，看看是否可以正常运行命令，例如try `ls`, 。`echo``sudo`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:46:32.823

如果二进制文件没有被覆盖，它通常位于

```
/System/Library/Frameworks/Python.framework/Versions/X.X/bin/python 
```

你的版本在哪里`X.X`（可能是 2.7）如果它不在那里，它有时*可以*在

```
/Library/Frameworks/Python.framework/Versions/X.X/bin/python 
```

如果您找到了正确的二进制文件并且可以运行它，请继续并开始在您需要的地方进行符号链接并制作必要的补丁。我的第一条建议是将您更改`Current`为指向旧版本。

```
 sudo ln -s /System/Library/Frameworks/Python.framework/Versions/X.X /System/Library/Frameworks/Python.framework/Versions/Current 
```

或者

```
sudo ln -s /Library/Frameworks/Python.framework/Versions/X.X /Library/Frameworks/Python.framework/Versions/Current 
```

# android - Android：TextView 背景可绘制 - 允许高度为 0？

> ID：10435717
> 
> 赞同：-1
> 
> 时间：2012-05-03T16:41:00.813
> 
> 标签：android, textview, height

我正在玩 Android 中 TextView 对象的背景图像，我想知道高度的奇怪行为。

为什么我不能将 TextView 的高度设置为 0，所以它变得“不可见”并且不再占用任何空间 - 在设置背景图像时？

这是一些测试代码，演示了 - 对我来说 - 奇怪的行为。

```
public class HelloAndroid extends Activity implements View.OnClickListener{

TextView btn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    btn = new TextView(this);
    btn.setOnClickListener(this);
    //Put in any drawable of you in here
    btn.setBackgroundDrawable(getResources().getDrawable(R.drawable.restablebg5));
    btn.setHeight(80);

    LinearLayout v = new LinearLayout(this);
    v.setOrientation(LinearLayout.VERTICAL);
    v.addView(btn);
    setContentView(v);        

}

public void onClick(View arg0) {
    btn.setHeight(0);

} 
```

}

如何将 textview 的高度设置为 0？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:44:03.097

改为这样做：

btn.setVisibility(View.GONE);

你也可以使用： btn.setVisibility(View.INVISIBLE);

第二个选项将保留空间，但您的项目将不可见 - 第一个选项将您的项目从显示中完全删除（并且不保留空间）。

# mysql - MySQL 嵌套查询计数

> ID：10435719
> 
> 赞同：1
> 
> 时间：2012-05-03T16:41:12.137
> 
> 标签：mysql

一些背景信息；这是一个允许用户创建挑战然后对这些挑战进行投票的应用程序（沼泽标准 userX-vs-userY 类型的应用程序）。

这里的最终目标是获得一个由 5 个用户组成的列表，按他们赢得的挑战数量排序，以创建一种排行榜。如果状态 = 已过期并且用户对该挑战的投票数大于 50（挑战在总共 100 票后过期），则用户将赢得挑战。

我将在这里稍微简化一下，但基本上有三个表：

1.  用户

    *   ID
    *   用户名
    *   ...
2.  挑战

    *   ID
    *   发给
    *   由...发出
    *   地位
3.  挑战投票

    *   ID
    *   挑战ID
    *   用户身份
    *   投票给

到目前为止，我有一个内部查询，如下所示：

```
SELECT `challenges`.`id`
FROM `challenges_votes`
LEFT JOIN `challenges` ON (`challenges`.`id` = `challenges_votes`.`challenge_id`)
WHERE `voted_for` = 1
WHERE `challenges`.`status` = 'expired'
GROUP BY `challenges`.`id`
HAVING COUNT(`challenges_votes`.`id`) > 50 
```

在此示例中，这将返回已过期的质询 ID，并且 ID 为 1 的用户拥有 > 50 票。

我需要做的是计算此处返回的行数，将其应用于 users 表中的每个用户，按返回的行数排序并将其限制为 5。

为此，我有以下查询：

```
SELECT `users`.`id`, `users`.`username`, COUNT(*) AS challenges_won
FROM (
    SELECT `challenges`.`id`
    FROM `challenges_votes`
    LEFT JOIN `challenges` ON (`challenges`.`id` = `challenges_votes`.`challenge_id`)
    WHERE `voted_for` = 1
    GROUP BY `challenges`.`id`
    HAVING COUNT(`challenges_votes`.`id`) > 0
) AS challenges_won, `users`
GROUP BY `users`.`id`
ORDER BY challenges_won
LIMIT 5 
```

这有点到达那里，但当然`voted_for`这里的用户 ID 总是 1。这甚至是进行此类查询的正确方法吗？任何人都可以阐明我应该如何做吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:05:48.167

我想下面的脚本会解决你的问题：

```
-- get the number of chalenges won by each user and return top 5
SELECT usr.id, usr.username, COUNT(*) AS challenges_won
FROM users usr
JOIN (
    SELECT vot.challenge_id, vot.voted_for
    FROM challenges_votes vot
    WHERE vot.challenge_id IN (       -- is this check really necessary?
        SELECT cha.id                 -- if any user is voted 51 he wins, so
        FROM challenges cha           -- why wait another 49 votes that won't
        WHERE cha.status = 'expired'  -- change the result?
    )                                 -- 
    GROUP BY vot.challenge_id
    HAVING COUNT(*) > 50
) aux ON (aux.voted_for = usr.id)
GROUP BY usr.id, usr.username
ORDER BY achallenges_won DESC LIMIT 5; 
```

请允许我对关闭挑战的条件提出一个小考虑：如果任何用户在 51 票后获胜，为什么还要等待另外 49 票不会改变结果？如果可以删除此约束，您将不必检查`challenges`表，这可以提高查询性能——但是，它也可能变得更糟，您只能在使用实际数据库进行测试后判断。

# mule - originalPayload 与 groovy 脚本中的 message.originalPayload 不同

> ID：10435720
> 
> 赞同：0
> 
> 时间：2012-05-03T16:41:13.203
> 
> 标签：mule

我发现这`originalPayload`与`message.originalPayload`groovy 表达式不同。也就是说，以下转换器不会做同样的事情：

与`originalPayload`：

```
<expression-transformer evaluator="groovy" expression="originalPayload" /> 
```

与`message.originalPayload`：

```
<expression-transformer evaluator="groovy" expression="message.originalPayload" /> 
```

以下 mule 配置和测试用例可用于重现该问题：

```
<mule ...>
    <flow name="test">
        <vm:inbound-endpoint name="test.Name" path="test.Path"
            exchange-pattern="request-response" />

        <expression-transformer evaluator="string" expression="bar" />

        <expression-transformer evaluator="groovy" expression="originalPayload" />
        <!-- or alternatively -->
        <!-- <expression-transformer evaluator="groovy" expression="message.originalPayload" /> -->
    </flow>
</mule> 
```

测试用例可以是：

```
@Test
public void transformers() throws MuleException {
    final MuleClient client = muleContext.getClient();
    final MuleMessage reply = client.send("vm://test.Path", 1, null, RECEIVE_TIMEOUT);
    assertEquals(1, reply.getPayload());
} 
```

替代方案`message.originalPayload`按预期工作。一个`originalPayload`没有，日志中显示了以下异常：

```
Exception stack is:
1\. Expression Evaluator "groovy" with expression "originalPayload" returned null 
but a value was required. (org.mule.api.expression.RequiredValue Exception) 
```

我可能做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:51:12.510

问题在于它使用了一组`expression-transformer`与`scripting:transformer`a 使用的绑定不同的绑定`scripting:component`，这是因为它们在`org.mule.module.scripting.component.Scriptable`.

此外，当`originalPayload`被绑定时，它的值是错误的：

```
bindings.put("originalPayload", event.getMessage().getPayload()); 
```

因此：[MULE-6215](http://www.mulesoft.org/jira/browse/MULE-6215)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:14:57.910

在[Scripting Module Reference](http://www.mulesoft.org/documentation/display/MULE3USER/Scripting+Module+Reference)之后，它们应该是相同的。

此外，如果您查看脚本模块中的 org.mule.module.scripting.component.Scriptable，您会发现“originalPayload”是 message.getPayload。

您可以发布一个重现错误的小项目吗？

```
public void populateBindings(Bindings bindings, MuleMessage message)
{
    populateDefaultBindings(bindings);
    if (message == null)
    {
        message = new DefaultMuleMessage(NullPayload.getInstance(), muleContext);
    }
    bindings.put("message", message);
    //This will get overwritten if populateBindings(Bindings bindings, MuleEvent event) is called
    //and not this method directly.
    bindings.put("payload", message.getPayload());
    //For backward compatability
    bindings.put("src", message.getPayload());
}

public void populateBindings(Bindings bindings, MuleEvent event)
{
    populateBindings(bindings, event.getMessage());
    bindings.put("originalPayload", event.getMessage().getPayload());
    bindings.put("payload", event.getMessage().getPayload());
    bindings.put("eventContext", new DefaultMuleEventContext(event));
    bindings.put("id", event.getId());
    bindings.put("flowConstruct", event.getFlowConstruct());
    if (event.getFlowConstruct() instanceof Service)
    {
        bindings.put("service", event.getFlowConstruct());
    }
} 
```

# menu - CKEditor 从样式下拉列表中删除样式预览

> ID：10435725
> 
> 赞同：2
> 
> 时间：2012-05-03T16:41:28.500
> 
> 标签：menu, styles, drop-down-menu, ckeditor, preview

我一直在寻找和寻找这个问题的答案，但找不到解决方案。

我在 CKEditor 中添加了一些自定义样式，为选定的文本添加了左侧边距。问题是这会导致样式预览在样式列表中向右移动。如此之多，以至于他们离开了下拉列表的右侧。不幸的是，我没有足够的代表来发布屏幕截图。

如果可能的话，我希望列表中的样式根本没有预览。

我试图将**.cke_panel_listItem p {margin-left: 0px !important;}**添加到我的 global.css 和 editor.css。无论我做什么，我都无法覆盖内联样式。

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-06T19:43:56.643

我能够使用[contentsCss 配置属性](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.contentsCss)来做到这一点。所以：

```
CKEDITOR.editorConfig = function( config ) {
  config.contentsCss  = 'wysiwyg.css';
} 
```

然后在 wysiwyg.css 中放入你的 CSS 代码：

```
.cke_panel_listItem p {
  margin-left: 0px !important;
} 
```

# c++ - 数组与地图的性能

> ID：10435726
> 
> 赞同：2
> 
> 时间：2012-05-03T16:41:32.707
> 
> 标签：c++

我必须遍历一个大数组中的元素子集，其中每个元素指向另一个元素（问题来自于大图中连接组件的检测）。

我的算法如下： 1\. 考虑第一个元素 2\. 将下一个元素视为前一个元素指向的元素。3\. 循环直到没有发现新元素 4\. 考虑下一个元素在 1-3 中尚未考虑，回到 1。注意要考虑的元素数量远小于元素的总数。

对于我现在所看到的，我可以：

```
//create a map of all element, init all values to 0, set to 1 when consider
map<int,int> is_set; // is_set.size() will be equal to N 
```

或者

```
//create a (too) large array (total size), init to 0 the elements to consider
int* is_set = (int*)malloc(total_size * sizeof(int)); // is_set length will be total_size>>N 
```

我知道访问 map 中的键是 O(log N)，而它只是数组的常量，但我不知道 malloc 在创建时是否成本更高，同时它还需要更多内存？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T16:46:53.777

**如有疑问，*请衡量两种备选方案的性能*。** 这是确定哪种方法对您的应用程序最快的唯一方法。

也就是说，一次性的大型 malloc 通常不会非常昂贵。此外，虽然地图是 O(log N)，但根据我的经验，大 O 隐藏了一个相对较大的常数因子，至少对于`std::map`实现而言。我不会惊讶地发现在这种情况下数组方法更快，但再次确定的唯一方法是测量。

还要记住，虽然映射没有大量的前期内存分配，但它在对象的生命周期内有许多小的分配（每次插入新元素时，都会获得另一个分配，每次删除一个元素，你会得到另一个免费的）。如果你有很多这样的东西，那可能会使你的堆碎片化，这可能会对性能产生负面影响，具体取决于你的应用程序可能同时在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:07:19.627

如果索引搜索满足您的需求（例如由常规 C 样式数组提供），则可能`std::map`不适合您。相反，`std::vector`如果您需要动态运行时分配，或者`std::array`如果您的集合是固定大小的，并且您只需要最快的边界安全替代 C 样式指针，请考虑使用。

[您可以在上一篇文章](https://stackoverflow.com/questions/4424579/c-stdvector-vs-stdarray)中找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:47:37.750

> 我知道访问 map 中的键是 O(log N)，而它只是数组的常量，但我不知道 malloc 在创建时是否成本更高，同时它还需要更多内存？

地图中的每个条目都是动态分配的，因此如果动态分配是一个问题，那么地图中的问题将是一个更大的问题。至于数据结构，您可以使用位图而不是普通的 int 数组。这将在具有 32bit`int`的架构中将数组的大小减少 32 倍，在大多数情况下，将索引映射到数组的额外成本将远小于额外内存的成本，因为结构更紧凑并且可以容纳更少的缓存行。

还有其他需要考虑的事情，例如集合中元素的密度是否很小。如果条目很少（即图形稀疏），那么任何一个选项都可以。作为最后一个选项，您可以通过使用向量来手动实现映射`pair<int,int>`并缩短它们，然后使用二进制搜索。这将减少分配的数量，在排序中产生一些额外的成本，并提供比地图更紧凑的 O(log N) 解决方案。不过，我会尝试使用位掩码。

# facebook - 是否可以使用 Graph API 发布用户对 QuestionObject 的回答？

> ID：10435730
> 
> 赞同：0
> 
> 时间：2012-05-03T16:41:43.690
> 
> 标签：facebook, facebook-graph-api, post

目前我们可以使用 Graph API

*   获取用户提出的所有问题
*   获取问题以查看其 QuestionOptions
*   获取 QuestionOption 的 /votes 以查看用户对每个选项的投票
*   将新问题发布到用户的墙上
*   向问题发布新的 QuestionOptions

这一切都很棒。但我想代表用户回答一个问题。是否可以发布用户对问题的投票？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:25:42.840

有了答案 ID，您只需在[https://graph.facebook.com/option_id上发布一个 http 帖子](https://graph.facebook.com/option_id)

我在[Facebook Explorer Tool 上](https://developers.facebook.com/tools/explorer)进行了测试，它对我有用。

我可能以错误的方式解释自己，当我说 option_id 时，我提到了你从问题选项中获得的选项 id，例如：

```
var client = new FacebookClient(*FacebookToken);
dynamic parameters = new ExpandoObject();
parameters.fields = "id,question,from,is_published,options.fields(votes,name,**id**,vote_count)";

//Loads the question

dynamic question = client.Get(**questionID, parameters);

foreach (dynamic opt in question.options.data)
{ 
    //set the first answer as the choosed one for example
    client.Post(opt.id, null);
    break;
}

* the token u got
** the question id you want to load and answer 
```

# ruby-on-rails - Rails 正在缓存范围的结果

> ID：10435731
> 
> 赞同：3
> 
> 时间：2012-05-03T16:42:02.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个模型，它的“摘要”范围仅获取几个重要字段：

```
class Cupcake < ActiveRecord::Base
  scope :summary, select([:id, :name])
end 
```

如果我调用这个范围，然后再调用

```
Cupcake.find(id) 
```

我得到的记录只填充了 id 和 name 属性。

是否有一些选项我可以传递给 find 命令以强制它进入数据库？这些也不应该生成完全不同的 sql 语句，因此 activerecord 将被迫进入数据库吗？

注意：我正在使用带有 pg gem 的 Rails 3.2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:18:43.970

您可以使用未缓存的方法。请参阅[http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/QueryCache.html#method-i-uncached](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/QueryCache.html#method-i-uncached)

举个例子：

```
uncached_cupcake = ActiveRecord::Base.uncached do
  Cupcake.find(id)
end 
```

希望这可以帮助。

# asp.net-mvc - 带有测试数据的 Azure 集成测试

> ID：10435732
> 
> 赞同：0
> 
> 时间：2012-05-03T16:42:03.993
> 
> 标签：asp.net-mvc, azure

我正在使用 Watin 为我的 MVC4 应用程序进行集成测试，一切都很好。我只是想知道，是否可以使用自定义 Web.config 启动 Azure 来进行测试？

现在我必须在 Web.Debug.config 中切换连接设置并从存储中删除所有数据，但这需要很多时间。有人知道更好更自动化的方式吗？

所以目标是使用额外的 Web.config 运行 Azure 服务器并重置存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:38:56.460

我可以想到两种可能的方法来做到这一点。

一种方法是创建两个云项目，一个用于常规开发，一个用于测试。这里将涉及几个步骤：

1.  将所有数据库配置移出 web.config 并放入 CSCFG 文件。在 Azure 中工作时，这通常是一个好主意。
2.  创建一个新的云项目。将其指向与现有项目相同的站点。
3.  更改新项目中的 CSCFG 以使用您的集成测试设置。
4.  添加一个调用“dsinit /forcecreate”的构建后事件来重建存储

或者，您可以通过创建一个单独的构建配置来执行您想要的操作。我不确定这会起作用，但它会是这样的：

1.  创建测试构建配置（构建 -> 配置管理器 -> 活动解决方案配置 -> 新建...）
2.  使用正确的设置创建一个 Web.Test.config 文件
3.  添加仅在测试配置中运行“dsinit /forcecreate”的条件构建后事件。

# c - 使用 valgrind 在 strstr() 中读取大小为 1 的无效

> ID：10435736
> 
> 赞同：2
> 
> 时间：2012-05-03T16:42:35.683
> 
> 标签：c, valgrind, strstr

我正在用 valgrind 检查一些代码，我得到了这个错误：

```
==7001== Invalid read of size 1
==7001==    at 0x402E21B: strstr (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==7001==    by 0x8049742: replace_in_file (functions.c:191)
==7001==    by 0x8049C55: parse_dir (functions.c:295)
==7001==    by 0x8049059: main (main.c:214)
==7001==  Address 0x42018c3 is 0 bytes after a block of size 3 alloc'd
==7001==    at 0x402B018: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==7001==    by 0x80496EC: replace_in_file (functions.c:183)
==7001==    by 0x8049C55: parse_dir (functions.c:295)
==7001==    by 0x8049059: main (main.c:214) 
```

代码片段如下所示：

```
long int replace_in_file(char **sets, FILE *file, char *path, const char *mode){
    long int n = 0, size = 0, len, remaining_len;

    char *buffer,
         *found,
         *before,
         *after;

    size = file_size(file);
    if(-1 != size){

        buffer = malloc(size * sizeof(char));

        rewind(file);
        fread(buffer, 1, size, file);

        int i=0;
        do{
            do{
                found = strstr(buffer, sets[i]); // LINE 191
                if(NULL != found && '\0' != sets[i][0]){

//rest of code... 
```

我无法理解为什么会出现该错误，因为一切都按预期工作，并且在调试器中每个变量似乎都很好。

出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:48:08.857

`fread()`不会以 nul 终止它读取的数据，但*需要*`strstr()`一个以 nul 终止的字符串。您应该分配 size+1 字节并显式添加 nul 终止符以确保安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T16:52:49.893

你`buffer`的不是 nul 终止的。通常，您可以在`bzero()`它之前使用它`fread()`以确保它可以与`strstr()`类似的功能一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T17:02:42.513

从我在手册页中读到的内容，`fread()`不会`NULL`- 根据 C89 终止其结果 - 而且它也不会在我的系统上 - 所以`strstr()`只会在末尾读取，`buffer`除非您像这样终止它

```
buffer = malloc((size + 1) * sizeof(char));
memset(buffer, '\0', size + 1); 
```

（它的优点是在 fread 无法读取整个文件的情况下也终止它）

旁注：由于您已经`sizeof(char)`在通话中使用了，为了保持一致性`malloc()`，您还可以考虑替换`1`in 。`fread()`

# php - FK 关系的问题。教义

> ID：10435738
> 
> 赞同：0
> 
> 时间：2012-05-03T16:42:43.490
> 
> 标签：php, orm, doctrine, doctrine-1.2

Doctrine 1.2.4、PHP 5.3.3
表格配置文件、流、事件

fk:event -> 配置文件多对一
fk:event -> 流式多对一

**溪流**

```
$this->hasMany('modelEvent as Events', array(
            'local' => 'id',
            'foreign' => 'stream_id'
)); 
```

**轮廓**

```
$this->hasMany('modelEvent as Events', array(
            'local' => 'id',
            'foreign' => 'profile_id'
)); 
```

**事件**

```
 $this->hasOne('modelProfile', array(
                 'local' => 'profile_id',
                 'foreign' => 'id'
 ));

 $this->hasOne('modelStream', array(
                'local' => 'stream_id',
                'foreign' => 'id'
 )); 
```

**关系不起作用:(**

```
<?php
    $event = new modelEvent();
    $event -> merge ($data_event);
    $event -> modelProfile -> merge($data_profile);
    $event -> modelStream -> merge($data_stream);
    $event -> save();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T23:00:21.133

您需要使用**setRelation()**方法将关系数据正确添加到模型中。

例如：

```
$profile = new modelProfile();
$profile->fromArray($arrayOfData); //you can optionally populate the new model with an array of values.  Values with keys that don't exist in the model will be ignored.

$event = new modelEvent();
$event->setRelation('modelProfile', $profile);
$event->save(); 
```

# visual-studio-2010 - 在没有 VSDBCMD 的情况下部署 VS2010 数据库项目？

> ID：10435739
> 
> 赞同：3
> 
> 时间：2012-05-03T16:42:48.497
> 
> 标签：visual-studio-2010, database-project

自从首次引入 Visual Studio 2010 的数据库项目以来，我们一直在将它们用于多个内部或单一客户项目，并且到目前为止它们对我们来说非常有用。现在，我们首次将它们与需要打包安装在任意客户站点的“盒装”产品一起使用。

到目前为止，我所看到的一切都表明我将`.dbschema`文件以及`vsdbcmd`工具及其要求作为我的 MSI 的一部分发送，然后在安装过程中启动该工具。

这真的是完成这项任务的最简单方法吗？我们这样做是为了我们最初的 beta 测试，但到目前为止，这似乎是一个快速的 hack，而不是一个好的长期部署策略。特别是，在安装我们的软件之前，我们被迫在机器上安装***SQL*** Server CE 32 位和 SQL Server CE 64 位。每次在 MSI 中打包我们需要的东西的尝试都失败了，因为我们缺少一个或另一个架构中的程序集。

我们研究的另一件事是运送`sqlcmd`我们在构建时“部署”项目时生成的输出文件，但这些文件包括我们内部开发服务器的硬编码服务器名称（并且它不是像数据库名称那样的 SQLCMD 变量是），这意味着我们必须在服务器安装期间编辑 .sql 脚本。同样，这很有效，但总的来说这似乎是一个坏主意。

我们的最后一种方法，如果我不能想出更好的东西，我们最终可能会为生产做些什么，是根据部署输出手动生成创建和升级脚本，然后在我们的安装程序中包含一个自定义工具来执行基于用户交互的脚本（通过`SqlClient`或`sqlcmd`类似的东西），但这似乎违背了数据库项目的大部分目的。

是否有任何其他方法可以构建和打包 VS2010 DB 项目以自动部署到不同的服务器，而不涉及安装 2 个版本的 SQL CE 并使用我们的安装程序运送一块 Visual Studio？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T12:55:36.457

据我所知，您最初的建议可能是最好的。

微软似乎从一开始就知道这一点，因为他们推荐并有关于如何`vsdbcmd`在不需要 Visual Studio 的情况下在构建服务器上安装的说明。您可以轻松地将这种想法扩展到在客户站点上安装。

虽然您可以想出自己的方法来创建输出文件并对其进行一些后期构建过程，但您只是将复杂性移到了其他地方并创建了另一部分需要维护的代码。

SQL CE 的安装程序并没有那么大，将其作为 MSI 的一部分使事情变得简单、打包在一起，并确保您从数据库项目中获得最大的功能。

我在这个 SO 问题中回答了与此类似的问题并链接到相关的 MS 文章：
[我可以在不安装 Visual Studio 或 VSTSDB 的情况下进行数据库部署吗？](https://stackoverflow.com/questions/4383184/can-i-do-database-deployments-without-installing-visual-studio-or-vstsdb)

# build - 用于显示 Jenkins 构建进度的 Vaadin 进度指示器

> ID：10435741
> 
> 赞同：1
> 
> 时间：2012-05-03T16:42:55.113
> 
> 标签：build, progress-bar, build-process, jenkins, vaadin

我正在开发一个显示每个 Jenkins 作业的构建列表的 Vaadin 应用程序。我想放置一个进度指示器来显示构建进度。有没有办法找出詹金斯需要多少时间来构建一个参数化进度条的特定工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:51:39.517

我认为您正在寻找由[Build class实现的](http://javadoc.jenkins-ci.org/hudson/model/Build.html)[getEstimatedDuration()](http://javadoc.jenkins-ci.org/hudson/model/Queue.Executable.html#getEstimatedDuration%28%29)。或者（见那里的评论）[Executables#getEstimatedDurationFor(Build)](http://javadoc.jenkins-ci.org/hudson/model/queue/Executables.html#getEstimatedDurationFor%28hudson.model.Queue.Executable%29)。

# c++ - 具有可变参数的函数运行时错误

> ID：10435750
> 
> 赞同：0
> 
> 时间：2012-05-03T16:43:25.000
> 
> 标签：c++, c

我写了这个函数来计算一些浮点数的平均值。但是它在“平均”函数的最后一行出现运行时错误。它有什么问题？

```
#include <stdarg.h>
#include <stdio.h>

float average(float first , ...)
{
    int count = 0;
    float sum = 0 , i = first;

    va_list marker;

    va_start(marker , first);
    while(i != -1)
    {
        sum += i;
        count++;
        i = va_arg(marker , float);
    }

    va_end(marker);
    return(sum ? (sum / count) : 0);
}

int main(int argc , char* argv[])
{
    float avg = average(12.0f , 34.0f);

    printf("The average is : %f\n" , avg);
    scanf("a\n");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:46:15.757

函数循环直到它看到 a `-1`，并且调用者没有提供`-1`.

我盒子上的手册页承诺“随机错误”：

> ```
> va_arg()
>    ...
>    If  there  is  no  next argument, or if type is not compatible with the
>    type of the actual next argument (as promoted according to the  default
>    argument promotions), random errors will occur. 
> ```

尝试：

```
float avg = average(12.0f, 34.0f, -1f); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:45:38.853

您忘记以 a 结束调用`-1`，因此您的`while`循环会导致未定义的行为，因为它试图不断获得比您传递的参数更多的参数。它应该是：

```
float avg = average(12.0f, 34.0f, -1f); 
```

此外，`float`参数在传递给可变参数函数时会被提升为`double`，因此您不能使用`float`with `va_arg`。你应该使用`double`这一切：

```
double average(double first, ...)
{
    int count = 0;
    double sum = 0, i = first;

    va_list marker;

    va_start(marker, first);
    while(i != -1)
    {
        sum += i;
        count++;
        i = va_arg(marker, double);
    }

    va_end(marker);

    return sum ? sum / count : 0;
}

double avg = average(12.0, 34.0, -1.0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T16:49:02.127

你不想通过 -1 作为最后一个参数来停止 while 循环吗？

另外，我相信在使用 VA 时浮点数会转换为双精度数，因此将浮点数更改为双精度会很好......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T16:50:45.933

问题是您的 while 循环没有终止。您正在检查`-1`但从未传入`-1`. 您需要将您的`average`函数称为

```
float avg = average(12.0f ,34.0f, -1); 
```

[在va_arg, va_​​end, va_​​start](http://msdn.microsoft.com/en-us/library/kb57fad8%28v=VS.71%29.aspx)有这个示例的运行时示例，它几乎完全显示了您的代码，但使用`int`而不是`float`值。

# iphone - 如何调整表格视图控制器的宽度

> ID：10435756
> 
> 赞同：1
> 
> 时间：2012-05-03T16:43:41.483
> 
> 标签：iphone, uitableview

我的课是 UITableViewController。如何减小表格视图单元格的宽度或减小表格视图的宽度。

请就这个问题给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:10:07.980

您可以重新调整大小`UITableViewController`，就好像您正在重新调整 word 中任何图像的大小一样。有时会变得难以选择`UITableViewController`。

如果使用 .xib 或 nib 文件。

步骤：
1.选择您的笔尖文件。
2.扩展名为dock的垂直条轴承（文件的所有者和第一响应者）。
3.选择合适的表格视图控制器。
4.现在您可以轻松地重新调整特定控制器的大小。

如果使用 StoryBoard

步骤：
1.选择您的 MainStoryboard.StoryBoard 文件。
2.单击项目导航器旁边的展开按钮。
3.选择合适的表格视图控制器。
4.现在您可以轻松地重新调整特定控制器的大小。

或者

`CGRectMake(x,y,width,height)`您可以通过参考 Apple 文档以 编程方式重新调整它的大小以获取更多变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:49:34.870

您可以手动调整框架的大小。

假设 tableview 只是在视图控制器中。

```
CGFloat newWidth = [your new value];

yourTableViewController.view.frame = CGRectMake(yourTableViewController.view.frame.origin.x,  yourTableViewController.view.frame.origin.y, newWidth, yourTableViewController.view.frame.size.height); 
```

您可能需要提供更多关于您真正需要的信息，但这可能足以让您继续前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T16:52:20.653

要减小表格视图的宽度：

```
self.tableView.frame = CGRectMake(x, y, width, height); 
```

我认为您无法更改 UITableViewCell 的宽度，它与 tableView 始终相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:17:22.477

考虑把 UITableViewController 变成一个简单的 UIViewController 和一个表格视图子视图。那张桌子可以用任何你喜欢的方式装裱。将普通视图控制器声明为并连接 IB 中的这些插座。

UITableViewController 提供了一种或两种以上的行为（例如，表格视图控制器取消选择 viewWillAppear 上当前选定的行），但实际上并没有太多。

在我看来，对于它所添加的内容，UITableViewController 带有您所看到的这种布局损失，通常使它成为一个糟糕的交易。每当我需要调整布局时，我都会毫不后悔地删除它以支持 vanilla vc。

# c# - 网站进度指示器

> ID：10435761
> 
> 赞同：0
> 
> 时间：2012-05-03T16:44:02.850
> 
> 标签：c#, asp.net, updatepanel

我一直在使用带有更新面板的进度指示器，效果很好。

我要问的是如何在单击按钮时显示进度指示器，该按钮从数据库的页面上填充数据。情况是我必须在单击按钮时从数据库中获取大量信息，并且我希望用户在发生这种情况时看到进度指示器。

最好用更新面板包围它吗？我应该以编程方式控制每个按钮处理程序的进度指示器吗？

甚至在更改或回发页面时显示此内容。就像在从第 1 页导航到第 2 页之间显示进度指示器一样。

我只想知道最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:50:53.357

将更新面板更新模式设置为有条件的，然后为所有按钮添加异步触发器。您不想用更新面板包围它。

# javascript - 使用 javascript / jquery 捕获搜索词

> ID：10435766
> 
> 赞同：1
> 
> 时间：2012-05-03T16:44:15.023
> 
> 标签：javascript, jquery, seo

我看过各种关于如何使用 PHP tp 抓取用于查找网站的搜索词的文章和帖子。例如，

[在php中捕获搜索引擎关键字](https://stackoverflow.com/questions/1349774/capture-search-engine-keywords-in-php)

我怎么能用 Javascript / jQuery 做到这一点？

最终，我想获取关键字并将它们用于我已经编写和工作的 AJAX 请求（用于其他类似但不同的东西）。

注意：这对我来说是一个新领域，所以慢慢打字，用勺子喂它，如果可以的话，总是很感激链接到更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:48:42.303

您可以使用[`document.referrer`](https://developer.mozilla.org/en/DOM/document.referrer)获取上一页网址的网址，如下所示：

```
console.log(document.referrer); 
```

会输出类似：

```
http://www.google.com/search?hl=en&q=stack+overflow&aq=0&oq=stack+over&aqi=g10 
```

只是喂给你的ajax。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T16:55:30.423

使用您链接到的问题中的正则表达式，此函数将返回用于查找当前页面的关键字数组或空数组：

```
function parse_keywords(url){
    var matches = url.match(/.*(?:\?p=|\?q=|&q=|\?s=)([a-zA-Z0-9 +]*)(?:&toggle=|&ie=utf-8|&FORM=|&aq=|&x=|&gwp)/);
    return matches ? matches[1].split('+') : [];
}

console.log(parse_keywords(document.referrer)); // Get keywords from referrer
console.log(parse_keywords('http://www.google.com/search?hl=en&q=stack+overflow&aq=0&oq=stack+over&aqi=g10')); // Or any given url 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T16:51:35.857

简短的回答：你不能。

> 编辑：嗯，你可以。我的错。看`document.referrer`答案。不过，我的最后一点仍然有效。

扩展版：Javascript 在客户端运行，而 PHP 在 Web 服务器上运行。因此，PHP 可以访问环境变量，例如 HTTP referer，并且可以提取其中的一部分。在任何情况下，您都需要提供一些信息以及您的网站（例如隐藏字段），这些信息可能会通过 javascript 进行处理。

此外，您的 ajax 请求是（您猜对了）对服务器端脚本的调用。因此，您可能希望在您的网站交付脚本中使用该脚本的逻辑。

# css - 将固定 div 中的流体宽度 div 居中以固定到视口顶部

> ID：10435771
> 
> 赞同：0
> 
> 时间：2012-05-03T16:44:41.530
> 
> 标签：css, width, center, fixed, fluid

好的，所以我正在设计一个页面中心需要 50% 宽度的 div - 没问题。我的屏幕顶部还需要一个 50% 宽的标题 - 没问题。最后，我需要将该标题放在一个固定的 div 中，以便在我滚动时它保持在我的屏幕顶部 - 这就是我遇到问题的地方，无论我多么努力，我似乎​​都无法获得那个顶部 div居中大概是因为它是一个流动的宽度，我不能真正指定一个像素边距？

这是我一直在处理的代码（暂时保持简单）......

```
<div id="wrapper">
    <div id="topwrapper">
        <div id="top">
            <div id="topleft"></div>
            <div id="topright"></div>
        </div>
    </div>
    <div id="table">
        Lorum Ipsum to fill here.
        <div id="left"></div>
        <div id="right"></div>
    </div>
</div> 
```

还有我的 CSS .....

```
#wrapper {
    overflow:         auto;
    position:         absolute;
    top:              0px;
    left:             0px;
    height:           100%;
    width:            100%;
    background-image: url('images/background.jpg');
}

#table {
    position:         relative;
    margin:           0 auto;
    width:            50%;
    background-image: url('images/midmiddle.png');
    padding:          50px;
    padding-top:      130px;
}

#topwrapper {
    position:    fixed;
    margin-left: -112px;
    left:        50%;
    width:       50%;
    z-index:     20;
    height:      169px;
}

#top {
    position:         relative;
    margin-left:      -8px;
    left:             -50%;
    width:            100%;
    background-image: url('images/topmiddle.png');
    z-index:          20;
    height:           169px;
    padding-left:     112px;
    padding-right:    112px;
}

#left {
    position:         absolute;
    margin-left:      -162px;
    top:              0px;
    width:            112px;
    height:           100%;
    background-image: url('images/midleft.png');
    z-index:          10;
}

#right {
    position:         absolute;
    right:            -112px;
    top:              0px;
    width:            112px;
    height:           100%;
    background-image: url('images/midright.png');
    z-index:          10;
}

#topleft {
    position:         absolute;
    margin-left:      -168px;
    top:              0px;
    width:            112px;
    height:           169px;
    background-image: url('images/topleft.png');
    z-index:          10;
}

#topright {
    position:         absolute;
    right:            -56px;
    top:              0px;
    width:            112px;
    height:           169px;
    background-image: url('images/topright.png');
    z-index:          10;
} 
```

因此，我的主包装器的宽度和高度为 100% 以占据大部分空间，左上、右上、左和右 div 位于主 div 内，以重复我的盒子的两侧，但顶部是我卡住的地方.

我发布的代码*实际上*有效，但正如您所看到的，这是一个非常复杂的解决方法，大多数边距与我的侧面图像尺寸有关，但#top -8px 是我似乎可以绕过它工作的唯一方法 - 那里一定是更简单的方法？！

非常感谢您的帮助:)

* * *

感谢您的输入 - 对代码格式感到抱歉，我在 CSS 之前放了四个空格，但我猜你们喜欢它在列表中而不是行中 - 抱歉，旧习惯....！

我已经设法让它在一定程度上再次工作，在顶部包装器上放置 25% 左右，顶部 100% 宽度和 -120px 边距......现在看看（鉴于我的图片是 112px 宽）我已经在某处拾取了额外的 8px，这也可以在原始代码中看到（-8px 的左边距）。对方程式中的计算方式感到非常困惑......但它正在工作！

我会看看那个小提琴，不是我熟悉的东西，所以期待学习新东西:)

非常感谢大家的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:04:19.533

尝试将#wrapper 的边距设置为自动怎么样？也许问题是包装器没有固定到位，所以#wrapper 可能正在移动，而不是桌子？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:42:12.503

我通过创建一个固定的包装器，然后将可见元素定位为子元素来做到这一点。见[http://jsfiddle.net/LDVmu/](http://jsfiddle.net/LDVmu/)

所以，HTML是

> `<div id="top"><div>I am at the top!</div></div>`
> 
> `<div>blah blah blah</div>`

我使用的 CSS 是

> `#top {position: fixed; width: 100%;}`
> 
> `#top div {width: 50%; margin: auto; border: 1px solid red; background: white;}`

我知道这是另一个嵌套的 div，它的语义较少，但我认为这是唯一可行的方法。绝对和固定定位以及 left/right=0 的居中技巧似乎仅适用于显式像素宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T11:04:15.827

从您的问题中我不确定它是否完全无法居中对齐（即它出现在页面的左侧）或者它是否稍微偏离中心，或者我怀疑它几乎完全在右侧。

`#topwrapper`宽度为 50%，左侧为 50%。所以它从页面的一半开始并占据页面的一半（右半部分）。只有负边距才能将其推回正确的方向。`left`减少到 25% ，而不是负边距。那么你应该不再需要负定位/边距了`#top`。

在此之后，它可能仍然稍微偏离中心。如果是这样，那可能是因为滚动条出现在`#wrapper`. `#table`调整以允许他们，`#topwrapper`不（因为它是固定位置，所以它只注意什么`html`和/或`body`正在做什么）。解决方案 - 至少对于 Chrome 和 Firefox，我没有在其他人身上测试过 - 是让滚动条永远存在`html`并且永远不会在`body`or `#wrapper`：

更改`height`为`min-height`in `#wrapper`，并添加以下内容：

```
html {
    margin:            0;
    height:            100%;
    overflow-y:        scroll;
}
body {
    margin:            0;
    min-height:        100%;
} 
```

一些笔记...

1.  如果您想`#wrapper`拥有 100% 的视口高度，那么 `body`（在大多数浏览器中`html`）也需要拥有它。
2.  您`#table`的 padding-top 为 130px，但`#topwrapper`高度为 169px，因此您的 Lorem Ipsum 隐藏在下方。我将 padding-top 增加到 180px。

# websphere - 如何在 Websphere 控制台的 Logs and Trace 中启用 JVM 日志

> ID：10435773
> 
> 赞同：3
> 
> 时间：2012-05-03T16:44:50.420
> 
> 标签：websphere, logging, zos

每当我进入选项卡故障排除-> 日志和跟踪-> 服务器时，我都会得到常规属性部分，其中只有一个更改日志详细信息级别的链接。我已经更改了内部跟踪以反映我的应用程序。但是除了这个选项之外，我无法看到 WAS 中的日志文件。我们在 Z/OS 上有 WAS，我可以在大型机上查看日志。我们需要运行任何文件或脚本来启用 JVM 日志吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:32:40.393

*   在 AIX、linux 和 Windows 上，当我进入 TroubleShooting -> Logs and Trace -> Server 时，我会在常规属性部分获得几个链接，其中一个是“诊断跟踪”，通过它我可以启用/禁用跟踪并配置日志的位置文件应位于，它们的大小，翻转设置等。

    您没有看到此链接的事实表明这是 z/OS 特定的，或者您没有执行运行时操作的权限。您可以检查您是否使用管理员组中的用户登录（您可以在用户和组 -> 管理用户角色中检查您的用户）。

*   屏幕上有两个选项卡可以更改跟踪选项，即“配置”和“运行时”。如果您在配置选项卡上进行更改，则必须回收服务器以使跟踪字符串变为活动状态。如果您还没有这样做，您可以尝试使用运行时选项卡。

*   您可以尝试使用 wsadmin 启用跟踪，如 [http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae% 2Ftxml_profiletrace.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Ftxml_profiletrace.html)

    *   打开跟踪（放置您自己的跟踪字符串）

        ```
        ts = AdminControl.queryNames('type=TraceService,node=mynode,process=server1,*')
        AdminControl.setAttribute(ts, 'traceSpecification', 'com.ibm.=all=enabled') 
        ```

    *   关闭跟踪

        ```
        ts = AdminControl.queryNames('type=TraceService,node=mynode,process=server1,*')
        AdminControl.setAttribute(ts, 'traceSpecification', 'com.ibm.*=all=disabled') 
        ```

# asp.net-mvc-3 - 在 MVC3 asp.net 中搜索

> ID：10435776
> 
> 赞同：0
> 
> 时间：2012-05-03T16:44:59.020
> 
> 标签：asp.net-mvc-3

我有多个查看页面进行搜索，例如`searchArea.cshtml`按地区`searchCity.cshtml`搜索、按城市搜索等。我想使用一个动作。在行动中，我想为搜索类型切换大小写和隐藏字段，例如 type=1 用于区域搜索，type=2 用于城市搜索等等。这种类型将用于 switch case 以识别我要搜索的类别。我有一个搜索操作，例如

 ````
 public ActionResult SearchPost(string searchString,int searchType)
    {

        var posts= from s in db.posts.Include("user")
                       select s;
        switch (searchType)
        {
            case 1:
                posts = db.posts.Include("user").Where(i => i.area == searchString);
                break;
            case 2:
                posts = db.posts.Include("user").Where(i => i.city == searchString);
                break;
            case 3:
                posts = db.posts.Include("user").Where(i => i.garage == searchString);
                break;
            case 4:
                posts = db.posts.Include("user").Where(i => i.p_code == searchString);
                break;

        }
        return View(db.posts.ToList());
    } 
```` 

`我想在一个共同的视图中显示结果。有什么想法可以通过单视图搜索页面和单视图搜索结果页面来实现吗？？？？是否可以？？？提前致谢...`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:44:20.843

MVC 模型绑定适用于您“手动”编码的输入（即不使用`@Html helpers`）

因此，如果您在视图中包含一个隐藏字段，并带有一个与您的 case 语句相对应的硬编码值，它应该可以正常工作。

例如在`searchArea.cshtml`包括

`<input type="hidden" name="searchString" value="1" />`

以及其余视图中的相应字段，它们都应该能够使用相同的操作。`

# printing - 如何在 MIPS 中以十进制数打印无符号整数？

> ID：10435777
> 
> 赞同：0
> 
> 时间：2012-05-03T16:45:05.017
> 
> 标签：printing, mips, unsigned-integer

例如，我想在 MIPS 中以无符号十进制数打印此数字 A0090000(16)。所以打印结果应该是2684944384(10)。但我被卡住了，因为我只知道打印签名数字的汇编代码。

代码是这样的：

```
li    $v0, 1    #System call code for print_int
li    $a0, 5    #integer to print
syscall 
```

因此，如果我在该代码中输入 A0090000(16) 值而不是“5”，它将打印一个负十进制值（因为 MSB 为 1），即 -1610022912(10) 但我希望得到结果 2684944383(10 )，读作无符号数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:31:51.657

[向量值为 36，用于打印无符号十进制整数。](http://courses.missouristate.edu/KenVollmar/MARS/Help/SyscallHelp.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T16:51:42.190

通过将值除以 10（无符号）并将余数的数字添加到字符串的开头，以相反的顺序填充一个字符串；然后打印字符串。

# c# - StreamReader 没有读取我的整个文件？

> ID：10435778
> 
> 赞同：2
> 
> 时间：2012-05-03T16:45:05.427
> 
> 标签：c#, .net, visual-studio, netduino

解决：

> SD 卡上的文件在那一点上有一堆 NULL。

* * *

我正在使用 Netduino Plus 从 SD 卡上的文件中读取文本。我正在使用 C# .NET Micro Framework 4.2 和 FileReader / StreamReader 来完成它。我读过 StreamReader 缓冲区的长度为 512 字节。您只能使用 StreamReader 读取 512 字节的数据吗？这就是我想知道的原因和我的问题的描述......

这是我正在阅读的文件的示例...

```
40
3,241,17,17,1000,2000
3,14,92,223,1000,2000
3,101,229,12,1000,2000
3,16,215,228,1000,2000
3,50,240,11,1000,2000
3,232,213,10,1000,2000
3,234,219,219,1000,2000
3,202,13,222,1000,2000
3,240,5,65,1000,2000
3,25,234,3,1000,2000
3,236,5,164,1000,2000
3,26,229,12,1000,2000
3,225,217,18,1000,2000
3,8,229,216,1000,2000
3,49,0,7,1000,2000
3,12,99,190,1000,2000
3,222,7,226,1000,2000
3,12,221,208,1000,2000
3,4,37,227,1000,2000
3,4,122,48,1000,2000
3,88,181,192,1000,2000
3,1,17,222,1000,2000
3,56,235,19,1000,2000
3,236,15,101,1000,2000
3,13,175,231,1000,2000
3,229,218,17,1000,2000
3,9,74,239,1000,2000
3,10,233,17,1000,2000
3,12,73,227,1000,2000
3,234,3,3,1000,2000
3,7,128,110,1000,2000
3,5,209,241,1000,2000
3,8,61,229,1000,2000
3,237,1,238,1000,2000
3,228,19,19,1000,2000
3,16,228,92,1000,2000
3,243,206,14,1000,2000
3,193,3,220,1000,2000
3,236,7,7,1000,2000
3,115,236,7,1000,2000 
```

- 第一行表示要跟随多少行。- 以下行中的第一个数字表示将从该行读取多少数据项。（在此示例中，每行有 3 个数据元素） - 行上的最后两个数字是以毫秒为单位的时间。

我的代码读取了这么多文件并停止。

```
40
3,241,17,17,1000,2000
3,14,92,223,1000,2000
3,101,229,12,1000,2000
3,16,215,228,1000,2000
3,50,240,11,1000,2000
3,232,213,10,1000,2000
3,234,219,219,1000,2000
3,202,13,222,1000,2000
3,240,5,65,1000,2000
3,25,234,3,1000,2000
3,236,5,164,1000,2000
3,26,229,12,1000,2000
3,225,217,18,1000,2000
3,8,229,216,1000,2000
3,49,0,7,1000,2000
3,12,99,190,1000,2000
3,222,7,226,1000,2000
3,12,221,208,1000,2000
3,4,37,227,1000,2000
3,4,122,48,1000,2000
3,88,181,192,1000,2000
3,1,17,222,1000,2000
3,56,235,19,1000,2000
3,236,15,101,1000,2000
3,13,175,231,1000,2000
3,229,218,17,1000,2000
3,9,74,239,1000,2000
3,10,233,17

other lines are not read 
```

它错过了这个 readline 调用上的两个时间值，并且代码在 System.IndexOutOfRangeException 的下面代码中的 time2 分配上中断，因为线性是 5 个元素长（null 不能很好地转换为 int lol）并且看起来像....

```
linearray[0] = "3"
linearray[1] = "10"
linearray[2] = "233"
linearray[3] = "17"
linearray[4] = "" 
```

而不是像其他线条一样长 6 个元素，看起来像....

```
linearray[0] = "3"
linearray[1] = "10"
linearray[2] = "233"
linearray[3] = "17"
linearray[4] = "1000"
linearray[5] = "2000" 
```

前面的所有行都可以很好地读取，并且 linearray 包含它应该包含的所有数据。我没有正确使用 StreamReader 吗？

这是代码....

```
 FileStream fs2 = new FileStream(FilePath, FileMode.Open, FileAccess.Read, FileShare.None);
            StreamReader sr = new StreamReader(fs2);

            line = sr.ReadLine();

            numLines = Convert.ToInt32(line);

            line = "";
            for (int i = 0; i < numLines; i++)
            {
                line = sr.ReadLine();
                string[] linearray = line.Split(comma);
                numDataElements[i] = int.Parse(linearray[0]);

                for (int j = 1; j <= numDataElements[i]; j++)
                {
                    readData[i][j] = byte.Parse(linearray[j]);
                }
                //clear the rest of the channels
                for (int j = (numDataElements[i]+1); j <= MAXCHANNELS; j++)
                {
                    data[i][j] = (byte)0;
                }

                time1[i] = Convert.ToInt32(linearray[linearray.Length - 2]);
                time2[i] = Convert.ToInt32(linearray[linearray.Length - 1]);

            } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-03T12:32:22.827

只是为了回答这个问题，上面的代码没有任何问题。我在 FTP 服务器库中发现了一个错误。它还使用了一个 512 字节的缓冲区，并且仅写入该缓冲区是已满的。因此，部分已满的第二个缓冲区永远不会写入传入文件。我修复了 FTP 库代码，一切都很好！

# facebook - Silverlight 和 Flash 超出应用程序框架

> ID：10435779
> 
> 赞同：1
> 
> 时间：2012-05-03T16:45:09.080
> 
> 标签：facebook, silverlight

我的粉丝页面上的页面选项卡上有两个应用程序，一个是用 Silverlight 编写的，第二个是用 Flash 制作的，当我向下滚动时它们都出现了相同的问题，它们超出了应用程序位置（框架或其他）。

我认为截图会告诉你所有的问题。

在发布这个问题之前我尝试过的事情：

1) [css] z-index；

2) [html] 在 iframe 中放置 Silverlight 和 Flash（对象标签）；

3）和大量的谷歌搜索结果

```
<div id="silverlightControlHoster"> <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="520" height="292">
<param name="source" value="galaxy.xap"/>
<param name="onError" value="onSilverlightError" />
<param name="background" value="white" />
<param name="minRuntimeVersion" value="4.0.50826.0" />
<param name="autoUpgrade" value="false" />
<a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.50826.0" style="text-decoration:none">
<img src="slerror.png" alt="Get Microsoft Silverlight" style="border-style:none"/>
</a>
</object>
<iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe>
</div> 
```

和“silverlightControlHoster”的 CSS

```
#silverlightControlHoster {
display:block;
margin-top:80px;
margin-left:145px;
text-align:center;
height:292px;
width:520px; 
```

## Silverlight 截图：

![Silverlight 的屏幕截图](../Images/67da90af7e753d678e3372442148d629.png)

## Flash截图：

![Flash 截图](../Images/0fe72245b14aecfe56ec180970897917.png)

编辑：我自己解决了问题是对象标签中的属性“无窗口”如果您在窗口中查看 Silverlight（例如 facebook 页面选项卡），您必须添加这些属性，只需将其复制并粘贴到对象标签之间：）

```
<param name="background" value="transparent" />
<param name="windowless" value="true" /> 
```

对于闪光灯：

```
<param name="wmode" value="transparent" /> 
```

# spring - 在 Hibernate/Spring Transactions 中优雅地处理陈旧的数据库连接

> ID：10435799
> 
> 赞同：2
> 
> 时间：2012-05-03T16:46:33.653
> 
> 标签：spring, hibernate

我有一个在测试中运行良好的系统，但现在我已将它们移至生产服务器并准备扔开关，我遇到了问题。

如果应用程序闲置约 15 分钟，则 Spring 事务服务中的 DB 连接将断开。发生这种情况后，第一个来到应用程序的人会收到这个问候

```
org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Cannot open connection
    org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
    org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    parity.persistence.DataAccess$$EnhancerByCGLIB$$921ef13.find(<generated>)
    parity.model.Configuration.getConfiguration(Configuration.java:84)
    parity.model.Configuration.getSetting(Configuration.java:46)
    parity.model.Configuration$$FastClassByCGLIB$$8355c3d0.invoke(<generated>)
    net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:617)
    parity.model.Configuration$$EnhancerByCGLIB$$5e96e8b9.getSetting(<generated>)
    parity.model.OnlineStatus.getSiteStatus(OnlineStatus.java:50)
    parity.action.site.SiteStatusInterceptor.intercept(SiteStatusInterceptor.java:16)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
root cause 
```

如果您在浏览器上按 F5，它会重新连接并正常运行。看起来spring正在按照第一个请求的方式做一些事情，去eek，我死了，在死的过程中，重新连接到数据库。但我不确定。

我一直在寻找解决这个问题的方法，但除非我使用 c3p0 或 weblogic，否则每个人都一无所知。有没有办法解决这个问题？这是我的配置文件

休眠.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>

    <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
        <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
        <property name="connection.autocommit">false</property>
        <property name="show_sql">false</property>
        <property name="use_sql_comments">false</property>

    </session-factory>
</hibernate-configuration> 
```

交易服务.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
     http://www.springframework.org/schema/aop 
     http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="boardingSessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="configLocations">
            <list>
                <value>classpath:hibernate/boarding-hibernate.cfg.xml</value>
                <value>classpath:boarding-hibernate.cfg.xml</value>
            </list>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
    </bean>

    <bean id="boardingTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="boardingSessionFactory" />
        <qualifier value="boarding" />
    </bean>

    <tx:advice id="boardingTxAdvice" transaction-manager="boardingTransactionManager">
        <tx:attributes>
            <tx:method name="get*" read-only="true" />
            <tx:method name="*" />
        </tx:attributes>
    </tx:advice>
</beans> 
```

请注意，我的休眠使用 2 个文件，一个在处理全局设置的 API 中，另一个在应用程序本身中具有应用程序特定设置。出于这里的目的，我认为，全球性才是最重要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:35:45.117

[休眠文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#configuration-hibernatejdbc)说：

> 然而，Hibernate 自己的连接池算法非常初级。它旨在帮助您入门，而不是用于生产系统，甚至不用于性能测试。您应该使用第三方池以获得最佳性能和稳定性。

所以，答案很简单：使用真正的连接池，并在将连接提供给应用程序之前对其进行配置以测试连接。

# c# - 根据 W3 XMLSchema.xsd 验证 XSD

> ID：10435801
> 
> 赞同：0
> 
> 时间：2012-05-03T16:46:43.017
> 
> 标签：c#, xsd

关于如何验证我的 XSD 的任何建议？

我想要一个单元测试来检查我的 XSD 的有效性，但我无法克服以下错误：

> “出于安全原因，此 XML 文档中禁止 DTD。要启用 DTD 处理，请将 XmlReaderSettings 上的 DtdProcessing 属性设置为 Parse 并将设置传递给 XmlReader.Create 方法。”

这似乎是因为 W3 模式定义引用了 DTD。

这是单元测试（xUnit）：

```
namespace MyNamespace.Profile.Test
{
    using System;
    using System.IO;
    using System.Xml;
    using System.Xml.Schema;

    using Xunit;

    public class ProfilesSchemaTests
    {
        [Fact]
        public void ShouldValidateProfilesXsd()
        {
            string profilesXsd = "Profiles.xsd";
            Assert.DoesNotThrow(() => ValidateXsd(profilesXsd));
        }

        private static void ValidateXsd(string path)
        {
            const string W3Schema = "http://www.w3.org/2001/XMLSchema.xsd";

            var config = new XmlReaderSettings { ValidationType = ValidationType.Schema };
            config.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;
            config.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
            config.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;
            config.DtdProcessing = DtdProcessing.Parse;
            config.XmlResolver = null;
            config.ValidationEventHandler += ValidationCallBack;
            config.Schemas.Add(null, W3Schema);

            using (var reader = XmlReader.Create(path, config))
            {
                while (reader.Read())
                {
                }
            }
        }

        private static void ValidationCallBack(object sender, ValidationEventArgs validationEventArgs)
        {
            Console.WriteLine(
                validationEventArgs.Severity == XmlSeverityType.Warning
                    ? "\tWarning: Matching schema not found.  No validation occurred. {0}"
                    : "\tValidation error: {0}",
                validationEventArgs.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:45:33.803

在[MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/xmlandnetfx/thread/c88ef0b0-39a8-413e-8e35-deb95fb57e58)，我有一个非常好的建议 - 使用 XmlSchemaSet.Compile 作为验证。

# android - ADT 更新后验证错误

> ID：10435804
> 
> 赞同：0
> 
> 时间：2012-05-03T16:46:53.433
> 
> 标签：android, adt, verifyerror

我有一个工作了几个月的项目，但几天前我更新了 ADT 插件，今天突然该项目停止工作。如果我尝试在设备上运行它，它会在启动后立即引发 VerifyError。

（xxx是项目名称的替代品，因为我不允许发布它）

这种错误会重演，所以我只发布一个。主要的 VerifyError 本身是无用的，因为它只是指向主要的启动 Activity。

```
05-03 18:06:59.898: I/dalvikvm(26640): Could not find method org.osmdroid.views.MapView.enableScroll, referenced from method com.xxx.activities.MainAc.disableSwipe
05-03 18:06:59.898: D/dalvikvm(26640): VFY: replacing opcode 0x6e at 0x0005
05-03 18:06:59.898: D/dalvikvm(26640): VFY: dead code 0x0008-0010 in Lcom/xxx/activities/MainAc;.disableSwipe ()V
05-03 18:06:59.898: W/dalvikvm(26640): VFY: unable to find class referenced in signature (Lorg/osmdroid/util/GeoPoint;)
05-03 18:06:59.898: E/dalvikvm(26640): Could not find class 'org.osmdroid.util.GeoPoint', referenced from method com.xxx.activities.MainAc.displayPointNavigation
05-03 18:06:59.908: W/dalvikvm(26640): VFY: unable to resolve new-instance 575 (Lorg/osmdroid/util/GeoPoint;) in Lcom/xxx/activities/MainAc;
05-03 18:06:59.908: D/dalvikvm(26640): VFY: replacing opcode 0x22 at 0x0018
05-03 18:06:59.908: D/dalvikvm(26640): VFY: dead code 0x001a-0093 in Lcom/xxx/activities/MainAc;.displayPointNavigation (Lorg/osmdroid/util/GeoPoint;)V
05-03 18:06:59.908: W/dalvikvm(26640): Unable to resolve superclass of Lcom/xxx/overlay/MyUpmoveLocationOverlay; (584) 
```

我认为问题在于我包含 osmdroid lib 的方式。由于要改很多osmdroid代码，不想一直建jar，所以我从osmdroid源码中创建了一个Java Project，并将osmdroid Project添加到我的Project的Classpath中。

到目前为止，这个设置就像一个魅力。我认为我自己可能已经更改了导致VerifyError 的某些内容，因此我将项目恢复到它确实可以正常工作的修订版，但我得到了同样的错误。

是否有一些设置我必须更改才能使其再次工作，或者我是否必须重做整个设置并将 osmdroid 作为 jar 包含在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:56:49.760

使 OSMDroid 成为一个[Android 库项目](http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject)，并将其作为库添加到您的主应用程序项目中。

# c - 指针数组的大小

> ID：10435806
> 
> 赞同：0
> 
> 时间：2012-05-03T16:47:01.333
> 
> 标签：c, pointers

我正在编写一个程序，它接收来自用户的文本输入，并将其保存在一个指针数组中，每个单词都作为一个指针（让我们说 char** 单词）

我的问题是：一旦我有了它，我怎么知道单词的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:10:20.243

从用户那里读取它们时对它们进行计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:12:12.360

无法查看 C 数组并知道它包含多少元素，因此您需要跟踪。

实际上，您可能需要跟踪两件事：（1）您创建的数组有多大（您可以处理的最大单词数），以及（2）到目前为止您实际看到的单词数.

# ios - Cocos2d for iOS 中具有二维幂的纹理

> ID：10435808
> 
> 赞同：3
> 
> 时间：2012-05-03T16:47:11.270
> 
> 标签：ios, graphics, opengl-es, cocos2d-iphone, textures

我已经阅读了有关在许多地方使用具有二维幂的纹理的信息。**使用 Cocos2d 时，纹理尺寸的最佳实践是什么？**

说我有`MyTexture.png`，尺寸是`100x100`. 目前我只是按原样使用纹理并忽略非二维幂。`128x128`将纹理大小调整为，然后将其设置为`contentSize`，也许会有好处`100x100`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:36:52.147

在这里您可以找到有关此的一些信息。这是关于 POT 和 NPOT 纹理以及可能在您的应用程序上造成一些内存问题的可能错误的讨论，请查看此链接

[http://www.cocos2d-iphone.org/forum/topic/31092](http://www.cocos2d-iphone.org/forum/topic/31092)

除此之外，我认为与 POT 或 NPOT 纹理没有太大区别，但我不是这个主题的专家。

# javascript - jQuery 序列化多个表单并作为 JSON 发送

> ID：10435809
> 
> 赞同：0
> 
> 时间：2012-05-03T16:47:11.550
> 
> 标签：javascript, jquery, serialization

我在一个页面上有多个表单，每个表单都会将单个项目添加到数据库中。还有一个“全部添加”按钮，可以发送所有产品数据。请参阅下面的基本 html：

```
<button type="submit">All all products</a>

<form>
<input type="hidden" name="Product" value="ProductA" />
<input type="checkbox" name="optionAll" value="Option All" /> Option All 
<input type="checkbox" name="option" value="Option 1" checked="checked" /> Option 1 
<input type="checkbox" name="option" value="Option 2" /> Option 2
<button type="submit">Add this product"</button> 
</form>

<form>
<input type="hidden" name="Product" value="ProductB" />
<input type="checkbox" name="optionAll" value="Option All" /> Option All 
<input type="checkbox" name="option" value="Option 1" checked="checked" /> Option 1 
<input type="checkbox" name="option" value="Option 2" checked="checked" /> Option 2 
<button type="submit">Add this product"</button> 
</form> 
```

我正在尝试将序列化的表单数据发布为以下 JSON 格式：

```
products = {
    "ProductA": {
        "option": ["Option 1"] // only 1 checkbox is checked
    },
    "ProductB": {
        "optionAll": "Option All",
        "option": ["Option 1", "Option 2"] // both checkboxes are checked
    }   
} 
```

我一直在尝试映射序列化数据，但无法将其转换为上面的 JSON 格式。

```
data = $.map($('form').serializeArray(), function(el, i){
    var json = {};
    ???
    return json;
});
console.log(data) 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:15:03.177

```
var result = {};  // object to hold final result

$('button[type="submit"]').on('click', function() {

    $('form').each(function() {  // loop start for each form

      var sr = $(this).serializeArray(),
          options = [];

      result[sr[0].value] = {}; // insert Product value and initiate it as object

      $.each(sr, function() {  // loop start for each checkbox

        if(this.name == 'option') {

            options.push(this.value);

        }

      });

      // if all checkbox are checked then insert the property optionAll

      if(options.length == $('input[type="checkbox"][name="option"]',this).length) {

        result[sr[0].value].optionAll = 'Option All';  

      }

      result[sr[0].value].option = options;

   });

   console.log(result);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:49:26.047

要将 javascript 对象序列化为 JSON 字符串，只需使用

```
JSON.stringify(myobject) 
```

所以你的工作主要是制作对象：

```
 var products = {
 };

 products['ProductA'] = $('input[name="Products"]').find(':checked').val(); 
```

等等...

但是你真的应该改变一点你的 html ：你真的应该避免使用同名的输入。尝试至少给他们一个 id。

# iphone - 奇怪的 UIView 坐标问题

> ID：10435814
> 
> 赞同：2
> 
> 时间：2012-05-03T16:47:31.663
> 
> 标签：iphone, xcode, uiview

我正在编写一个通用应用程序。因此，我已对其进行了设置，以便我的 XIB/NIB 不是使用视图控制器创建的，而是单独创建的，然后通过将 XIB 上的类名设置为适当的视图控制器的类名来链接到视图控制器（以及将 File's Owner 上的视图链接到 XIB 上的视图）。然后在初始化视图控制器时加载适当的 XIB/NIB（iPhone 或 iPad），如下所示：

```
SomeViewController *vc = [[SomeViewController alloc] initWithNibName:@"SomeView-iPhone" bundle:nil];
[self.navigationController pushViewController:vc animated:YES];
[vc release]; 
```

此外，iphone 版本在底部设置了一个 UITabBarController，在顶部设置了一个 UINavigationController。这是这样创建的：

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[UIApplication sharedApplication].delegate;
UINavigationController *localNavigationController;
UITabBarController *tabBarController = [[UITabBarController alloc] init];
NSMutableArray *localControllersArray = [[NSMutableArray alloc] init]; 

//setup the first tab
FirstViewController *vc = [[FirstViewController alloc] initWithNibName:@"FirstView-iPhone" bundle:nil];
localNavigationController = [[UINavigationController alloc] initWithRootViewController:vc];
[localControllersArray addObject:localNavigationController];
[localNavigationController release];
[vc release];

//setup the second tab
SecondViewController *vc = [[SecondViewController alloc] initWithNibName:@"SecondView-iPhone" bundle:nil];
localNavigationController = [[UINavigationController alloc] initWithRootViewController:vc];
[localControllersArray addObject:localNavigationController];
[localNavigationController release];
[vc release];

....

//set the controllers onto the tab bar
tabBarController.viewControllers = localControllersArray;
[localControllersArray release];    

[appDelegate.window setRootViewController:tabBarController];
[tabBarController release]; 
```

所有这一切都很好。iPhone 视图显示正常（带有工作标签栏和导航栏）并且导航工作正常。这就是事情变得奇怪的地方（两条龙很奇怪）。

- 位于 IB 中的大多数 UI 元素（标签、按钮等）显示正常 -
如果我在代码中创建 UIScrollView 并将其添加到视图中，它显示正常 -
如果我在 IB 中创建 UIScrollView 并将其放在视图，它在运行时从设计时出现在 IB 中的位置向上转置 93 像素 -
如果我在 IB 中创建一个 UIScrollView 作为单独的视图，然后将其添加到代码中的主视图中，它会被转置 93像素。

换句话说，如果我这样做：

```
[scrollView setFrame:CGRectMake(0,0,320,100)];
[self.view addSubview:scrollView]; 
```

然后它将显示在代码中创建的 UIScrollView 的 0,0，但对于在 IB 中创建的 UIScrollView（并通过 IBOutlet 链接到 ivar），它将显示在 (0,-93)。现在恰好 93 = 44 + 49，这是标签栏和导航栏组合的高度。这显然不是巧合。

所以问题是，为什么 iOS 会在运行时将 IB 中创建的滚动视图向上移动导航栏和标签栏的高度（而不是其他 UI 元素，如 UILabel 或 UIButton）？

编辑：我之前在仅限 iPhone 的应用程序中使用过设置标签栏和导航栏的代码，但它没有这个问题，所以我怀疑这与使用 initWithNibName 初始化我的视图控制器或将 XIB 文件手动链接到 VC，因为这在我的通用应用程序中有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:08:45.390

我解决了。我偶然发现了这个问题/答案，它起到了作用：

[UIView 大小/位置在 iPad 上不像在 iPhone 上那样工作](https://stackoverflow.com/questions/7981962/uiview-size-position-not-working-on-ipad-as-on-iphone)

发生这种情况是因为默认情况下，在 IB 中创建的滚动视图设置为自动调整到左下角。我将其切换为绑定到左上角，现在一切正常。奇怪的。

# c - 在运行 configure 时为不同于默认值的编译器进行配置

> ID：10435816
> 
> 赞同：6
> 
> 时间：2012-05-03T16:47:39.487
> 
> 标签：c, linux, gcc, glibc

我正在编译 glibc 库。在我能做到这一点之前，我需要运行`configure`. 但是，为了编译 glibc，我需要使用 gcc 编译器，它不是机器上的默认编译器。[手册](http://www.gnu.org/software/libc/manual/html_node/Configuring-and-compiling.html)说如下。

```
It may also be useful to set the CC and CFLAGS variables in the environment 
when running configure. CC selects the C compiler that will be used, and CFLAGS 
sets optimization options for the compiler. 
```

现在我的问题是我在那台机器上没有任何管理权限。那么如何使用不同于默认的编译器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T16:56:15.327

在 linux 上，任何人都可以更改其进程的环境变量；不需要管理权限。

在 bash 中：

```
export CC="gcc" CFLAGS="-O3 -Wall" 
```

在 csh 中使用

```
setenv CC "gcc" 
```

在此命令之后在此 shell 中启动的任何程序都将在其环境中具有 CC 变量。（环境变量被 bash、csh 或其他 shell 记住）。您可以将此命令添加到您的`~/.bashrc`文件中以使此设置永久化。

还有其他方法可以通过 CC 进行配置，例如在 bash 中，可以将环境变量设置为单个命令，而无需记住：

```
CC="gcc" CFLAGS="-O3 -Wall" ./configure ... 
```

PS 和流行`./configure CC=gcc`不是环境变量更改，而是特定于配置实现（但大多数配置都支持这一点）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T17:24:46.327

您也可以在运行 make 时执行此操作：

```
make CC=/whatever/compiler 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T16:56:23.560

CC=gcc ./configure 将允许您设置编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:56:35.247

在运行配置之前执行以下操作。

```
export CC=gcc_your_version 
```

# ember.js - 将把手绑定到 ember.js 中的应用程序对象

> ID：10435820
> 
> 赞同：1
> 
> 时间：2012-05-03T16:47:49.617
> 
> 标签：ember.js

问：如何将把手绑定到应用程序对象变量，以便当该变量更新时，屏幕上的把手数据也会更新？

jsfiddle：http: [//jsfiddle.net/kQuVG/3/](http://jsfiddle.net/kQuVG/3/)

**车把**：

```
<script type="text/x-handlebars">
    {{App.Player.stats.basic}} Scrap
</script>
<button>Add Scrap</button> 
```

**JavaScript**：

```
App.Player = Em.Object.create({
    stats:{
        basic: 10,
        premium: 20
    }
});    

$('button').click(function(){
    console.log(App.Player.stats.basic);
    App.Player.stats.basic += 10;
    console.log(App.Player.stats.basic);
}); 
```

小提琴甚至不起作用，我想做的是单击按钮并将 10 添加到 App.Player.stats.scrap 值上，并将其反映在输出窗格中。这甚至是正确的方法吗？

提前致谢。

G

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:07:08.510

小提琴有很多问题。在设置和获取任何对象的属性（甚至是单例和“应用程序/命名空间全局”属性）时，您应该始终使用 Ember 的通用访问器。Ember 也有特定的命名约定，例如不使用大写字母来启动对象实例（“人”，而不是“人”）。您还应该使用目标/操作界面。

我用这些变化创造了一个小提琴。[http://jsfiddle.net/ud3323/Ac2hs/](http://jsfiddle.net/ud3323/Ac2hs/)

**车把**：

```
<script type="text/x-handlebars">
  {{App.playerObj.stats.basic}} Scrap <br />
  <button {{action "click" target="App.playerController"}}>Add Scrap</button>
</script>​ 
```

**JavaScript**：

```
var get = Ember.get, getPath = Ember.getPath, set = Ember.set, setPath = Ember.setPath;

App = Ember.Application.create();

set(App, 'playerObj', Object.create({
    stats:Ember.Object.create({
        basic: 10,
        premium: 20
    })
}));

set(App, 'playerController', Ember.Object.create({
    click: function(view) {
        getPath(App, 'playerObj.stats').incrementProperty('basic', 10);
    }
})); 
```

​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:53:46.427

您需要使用 setter 而不是直接分配值。我已经用有用的东西更新了小提琴。

[http://jsfiddle.net/kQuVG/4/](http://jsfiddle.net/kQuVG/4/)

**车把**：

```
<script type="text/x-handlebars">
    {{App.Player.stats.basic}} Scrap
</script>
<button>Add Scrap</button> 
```

**JavaScript**：

```
App.Player = Em.Object.create({
    stats:{
        basic: 10,
        premium: 20
    }
});    

$('button').click(function(){
    console.log(App.Player.stats.basic);
    App.Player.setPath('stats.basic',  App.Player.getPath('stats.basic') + 10);
    console.log(App.Player.stats.basic);
}); 
```

# java - 二传手不工作

> ID：10435823
> 
> 赞同：1
> 
> 时间：2012-05-03T16:48:00.993
> 
> 标签：java

```
public class Shape{

    public int xPos = 10;
    public int yPos = 20;

    Shape(){

    }

    public int getXpos(){
        return xPos;
    }

    public void setXpos(int x){
        this.xPos = x;
    }

    public int getYpos(){
        return yPos;
    }

    public void setYpos(int y){
        this.yPos = y;
    }

}

public class Shape1 extends Shape{

    Shape1(){
        xPos = 100;
        yPos = 200;
    }

}

public class Test{

    public static void main(String[] args) {
        Shape1 shape1 = new Shape1();

        System.out.println(shape1.getXpos());
    }

} 
```

为什么我得到 10 而不是 100？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:01:18.950

> 现在我的问题是：为什么我得到 10 而不是 100？

显示的代码打印出 100。最可能的解释是您没有运行您说正在运行的代码。这可能是由于复制和粘贴错误、部署问题等而发生的。

可以巧妙地修改代码以打印的一种鲜为人知但令人讨厌的方法是在的构造函数前面`10`添加：`void``Shape1`

```
void Shape1() {
    xPos = 100;
    yPos = 200;
} 
```

这`Shape1()`从构造函数转换为普通方法（在对象构造期间不会自动调用）。

我的编译器接受了这个修改，`10`当我运行它时代码会打印出来。

实际上，我曾经不得不处理一个由此引起的真正错误。花了一点时间发现，我可以告诉你。

# c# - 在页面加载时从 .aspx 中删除下拉项

> ID：10435827
> 
> 赞同：2
> 
> 时间：2012-05-03T16:48:13.483
> 
> 标签：c#, asp.net

I have the following code that removes the item selected in dropdown1 from dropdown2 when a value in dropdown1 is selected:

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList2.Items.Remove(DropDownList1.SelectedItem);

    } 
```

效果很好。但是我尝试在页面加载时添加相同的代码，但它并没有删除我猜测的值，因为没有选择任何内容我该如何完成这个？

```
 protected void Page_Load(object sender, EventArgs e)
    {

        DropDownList2.Items.Remove(DropDownList1.SelectedItem);
    } 
```

这是什么行不通，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:47:57.137

> 我想要做的是在 dropdown2 上不显示当前在 dropdown1 中选择的内容。

您的问题是，在页面加载上，所有内容都“重置”了。所以 DropDownList1.SelectedItem 是列表中的第一个或默认项。如果 DropDownList1.SelectedItem 为“One”，则它将始终从 DropDownList2 中删除“One”。

您需要的是 DropDownList1 的按钮或 OnSelectedIndexChanged 事件。

试试我在下面所做的，它对我有用。

```
<form id="form1" runat="server">
<div>
    <asp:DropDownList ID="ddlOne" runat="server" OnSelectedIndexChanged="ddlOne_OnSelectedIndexChanged" AutoPostBack="true" />
    <br />
    <br />
    <asp:DropDownList ID="ddlTwo" runat="server" />
    <br />
    <br />
    <asp:Button ID="btRemove" runat="server" Text="Remove" 
        onclick="btRemove_Click" />
</div>
</form> 
```

* * *

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            // Bind data
            BindLists();
        }
    }

    /// <summary>
    /// Removes whatever Selected Item from ddlTwo that is 
    /// currently selected in ddlOne.
    /// </summary>
    private void RemoveFromTwoWhatIsSelectedInOne()
    {
        ddlTwo.Items.Remove(ddlOne.SelectedItem);
    }

    /// <summary>
    /// Click handler for btRemove. Calls the method 
    /// RemoveFromTwoWhatIsSelectedInOne()
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    protected void btRemove_Click(object sender, EventArgs e)
    {
        RemoveFromTwoWhatIsSelectedInOne();
    }

    /// <summary>
    /// OnSelectedIndexChanged handler for ddlOne. Calls the method 
    /// RemoveFromTwoWhatIsSelectedInOne()
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    protected void ddlOne_OnSelectedIndexChanged(object sender, EventArgs e)
    {
        RemoveFromTwoWhatIsSelectedInOne();
    }

    /// <summary>
    /// Binds a list of names the two Drop Down Lists, ddlOne and ddlTwo, by using 
    /// the same Data Source from the Manager.
    /// </summary>
    private void BindLists()
    {
        // Get the data
        Manager theManager = new Manager();
        List<Names> theNames = theManager.GetNames();

        // Assign the data source
        ddlOne.DataSource = theNames;
        ddlTwo.DataSource = theNames;

        // Bind each drop down list
        ddlOne.DataBind();
        ddlTwo.DataBind();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:50:29.743

你试过做吗？

```
if(!IsPostback)
{
    DropDownList2.Items.Remove(DropDownList1.SelectedItem);
} 
```

在你的`Page_Load`活动中？另外，你是如何绑定数据的？为什么不这样做`Selected_IndexChanged`呢？在我看来，这就是这段代码所属的地方。`DropdowsList``Page_Load`

# c# - 用于 C# 代码的解析器来评估可测试性？

> ID：10435834
> 
> 赞同：2
> 
> 时间：2012-05-03T16:48:32.023
> 
> 标签：c#, unit-testing, parsing, testability

我正在尝试编写一个程序，该程序将允许我为其提供一组 C# 代码文件并分析它们的[可测试性问题](http://misko.hevery.com/code-reviewers-guide/ "可测试性问题")。我从前面链接中提供的 4 个开始。

最终目标是创建所有文件的报告，它们可能存在的任何可测试性问题，以及可能观察到这些问题的特定代码注释（如果适用）。我想要帮助的是选择一些工具来简化解析代码的工作；我可以将所有内容作为字符串读取，但在这种情况下很难对代码进行排序来分析它。

到目前为止，我已经评估了以下内容：

*   [FxCop](http://msdn.microsoft.com/en-us/library/bb429476%28VS.80%29.aspx "外汇警察")（对任何不是 .dll 的东西都不起作用，一些测试项目是在其控制器或演示器中具有可测试逻辑的 Web 项目）
*   [代码合同](http://research.microsoft.com/en-us/projects/contracts/ "代码合约")（不是我需要的；这无助于发现问题）
*   [Pex](http://research.microsoft.com/Pex/default.aspx "pex")（同上）
*   [NRefactory](https://github.com/icsharpcode/NRefactory/ "NRefactory")（可能很有趣，但文档和使用信息不存在，并且演示已损坏，即使在 Windows 上安装了 gtk/mono）
*   [CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx "CSharpCodeProvider")（.Parse 方法返回 NotImplementedException）

至于我在找什么：

我至少想检测基本的对象结构和访问器对象以在其中导航（例如，一个*File*对象具有一个带有*Classes集合的**Namespace*属性，每个*Class*都有*Members*、*Constructors*和*Methods*的集合等）。显然，如果有工具可以变得越来越精细和详细，那将是惊人的，但只要有这些东西可以让我处理小的、集中的字符串，那将是天赐之物。

 ***提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:01:03.983

如果您可以使用预发布代码，您可能需要查看[roslyn](http://blogs.msdn.com/b/csharpfaq/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)，即“编译器即服务”：

> 传统上，编译器是黑盒子——源代码在一端，目标文件或程序集从另一端出来。Roslyn [项目]通过***将 Visual Basic 和 C# 编译器作为 API 开放来更改该模型。***这些 API 允许工具和最终用户共享编译器拥有的关于代码的大量信息。

但是请注意，解释你得到的东西（语法树）可能仍然需要做很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T11:04:59.423

[NRefactory 5](https://github.com/icsharpcode/NRefactory)为 C# 提供与 Roslyn 为 C# 提供大致相同的分析功能，“只是”缺少编译为 IL 的能力。

不确定基于 GTK 的演示发生了什么；所以我修复了基于 WinForms 的演示并将其添加回解决方案。

要解析 C# 代码，请使用`new CSharpParser().Parse(sourceCode, "filename.cs")`. 这将为您提供文件的完整语法树；即以s 为子节点的`CompilationUnit`根节点。`NamespaceDeclaration`使用演示应用程序查看树的外观。

如果您想检测某些代码模式（您的可测试性问题），您可以使用 NRefactory 的模式匹配功能。（详见`doc/Pattern Matching.html`）

我认为具有模式匹配的 NRefactory 可能比 Roslyn 更适合您的用例。***

# asp.net - 无法选择网站上的文本框

> ID：10435835
> 
> 赞同：2
> 
> 时间：2012-05-03T16:48:33.713
> 
> 标签：asp.net, html

我在[http://cooldeal.se](http://cooldeal.se)上有一个奇怪的问题。问题是无法通过鼠标单击激活/选择页面上的文本框。该问题出现在某些浏览器（Opera 和 Firefox）中，而在 Internet Explorer 中却可以正常工作。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:12:29.993

这是一个 z-index 问题，可以通过向输入添加位置值来解决。添加位置：相对；到输入，然后您的 z-index 值将起作用。

# java - 从 Java 访问 Firefox 的证书信任库

> ID：10435836
> 
> 赞同：4
> 
> 时间：2012-05-03T16:48:33.987
> 
> 标签：java, firefox, cryptography, nss, pkcs#11

我几乎对这个失去了希望。我正在尝试通过 PKCS#11 使用 Firefox 安装随附的 NSS 库从 Java 7 访问 Firefox 信任库。

这是代码：

```
import java.security.KeyStore;
import java.security.Security;
import java.util.Enumeration;
import sun.security.pkcs11.SunPKCS11;

public class Test {

    public static void main(String[] args) throws Exception {
        String configName = "pkcs11.cfg";
        SunPKCS11 p = new SunPKCS11(configName);
        Security.addProvider(p);
        KeyStore ks = KeyStore.getInstance("PKCS11", p);
        ks.load(null,  "apassword".toCharArray());
        System.out.println("Size: " + ks.size());
        Enumeration<String> aliases = ks.aliases();
        while (aliases.hasMoreElements()) {
            System.out.println(aliases.nextElement());
        }
    }
} 
```

以下是 PKCS#11 配置的内容：

```
name = NSS
nssLibraryDirectory = /usr/lib/firefox/
nssSecmodDirectory = "/home/bogdan/.mozilla/firefox/x5d8wol9.default/"
nssModule =trustanchors
showInfo = true 
```

当我运行应用程序时，我还设置了属性`-Djava.library.path=/usr/lib/firefox/`

当我运行应用程序时，我得到以下信息：

```
NSS modules: [NSS Internal PKCS #11 Module (CRYPTO, /usr/lib/firefox/libsoftokn3.so, slot 0), NSS Internal PKCS #11 Module (KEYSTORE, /usr/lib/firefox/libsoftokn3.so, slot 1)]
Exception in thread "main" java.security.ProviderException: NSS module not available: trustanchors
    at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:271)
    at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:103)
    at Test.main(Test.java:11) 
```

您实际上可以看到“trustanchors”模块在初始化步骤没有加载，但我不知道为什么。这里的文档：http: [//docs.oracle.com/javase/6/docs/technotes/guides/security/p11guide.html#NSS](http://docs.oracle.com/javase/6/docs/technotes/guides/security/p11guide.html#NSS)说

> 如果 secmod.db 已配置为包含信任锚库，则 trustanchors 模块允许通过 PKCS11 KeyStore 访问 NSS 信任锚证书。

但我不知道这意味着什么。值得注意的是，我在 Windows XP 32 位和 Ubuntu 11.10 64 位上都得到了相同的行为。pkcs11.cfg 似乎是正确的，就好像我更改了应用程序将因其他错误而失败的任何路径一样。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:46:55.950

我最终通过使用 JSS4 Mozilla 库设法解决了这个问题。如果要使用它，请确保下载 JSS4 JAR 以及本机库实现以及它具有的其他依赖项 - NSPR 和 NSS 本机库。

确保在 Linux 上，本机库的位置在 LD_LIBRARY_PATH 中，在 Windows 上，它们的位置在 %PATH% 变量中。您可能很想使用 Firefox 发行版附带的 DLL/SO。**这在我发现的 Windows 上不起作用（与我认为它们是为 WIN95 平台编译的事实有关）**

其余信息在 JSS4 库的文档中，但您基本上需要使用`org.mozilla.jss.CryptoManager`该类。

# python - QWebPage - 获取资源列表/验证页面加载时没有错误

> ID：10435839
> 
> 赞同：0
> 
> 时间：2012-05-03T16:48:41.297
> 
> 标签：python, qt, webkit, pyside, qtwebkit

我正在 PySide 中加载网页。我希望能够查看它是否已成功加载而没有错误。如果我得到一个错误，那么我想知道它。我不能简单地对加载完成信号使用“成功”参数，因为它似乎总是表明成功。我知道该怎么做的唯一方法是做这样的事情：

```
class WebPageResourceTracker(
    PySide.QtCore.QObject
):
    def __init__(self, url):
        PySide.QtCore.QObject.__init__(self)
        self.page = PySide.QtWebKit.QWebPage()
        self.frame = self.page.currentFrame()

        # The reason for the lambda is that otherwise I get this:
        #ASSERT: "self" in file /var/tmp/portage/dev-python/pyside-1.1.0/work/pyside-qt4.7+1.1.0/libpyside/signalmanager.cpp, line 534
        self.frame.loadFinished.connect(lambda ok: self.onLoadFinished(ok))
        self.page.networkAccessManager().finished.connect(lambda reply: self.onResourceFinished(reply))

        self.frame.setUrl(
            PySide.QtCore.QUrl(
                url,
            )
        )

    def onLoadFinished(self, ok):
        print 'onLoadFinished', ok

    def onResourceFinished(self, reply):
        print 'onResourceFinished', reply.url().toString(), reply.error()

import sys
from PySide import QtGui

app = QtGui.QApplication(sys.argv)
#WebPageResourceTracker("http://google.com")
WebPageResourceTracker(
    "http://migration.tanagerproductions.com/broken.html"
)
sys.exit(app.exec_()) 
```

但是，我想有一种方法可以直接访问页面的资源列表，因为 webkit 检查器可以列出资源......

奖励：我还想知道页面中是否有任何 JavaScript 错误，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:41:12.343

一种方法是首先创建一个继承自[`QNetworkManager`](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html)overrides的新类[`QNetworkAccessManager::createRequest`](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html#createRequest)。在您的 createRequest 函数中，您将首先调用基类/超类来获取请求，然后连接到[`QNetworkReply::error`](http://qt-project.org/doc/qt-4.8/qnetworkreply.html#error-2)信号或`QNetworkReply::finished`检查`QNetworkReply::error`函数。

然后，您`QNetworkAccessManager`在 QWebPage 上使用[`QWebPage::setNetworkAccessManager`](http://qt-project.org/doc/qt-4.8/qwebpage.html#setNetworkAccessManager).

要拦截 JavaScript 消息，您需要创建一个继承自`QWebPage`overrides的新类[`QWebPage::javaScriptConsoleMessage`](http://qt-project.org/doc/qt-4.8/qwebpage.html#javaScriptConsoleMessage)。任何错误或调用`console.log`都将传递给此函数：

> 每当 JavaScript 程序尝试将消息打印到 Web 浏览器的控制台时，都会调用此函数。例如，在评估错误的情况下，可以在 sourceID 和 lineNumber 中提供源 URL。

*注意：这个答案假设 PySide 提供了完整的 Qt API，我实际上并没有检查这在 Python 中是否可行，但这是我之前在 C++ 中做过类似事情的方式。*

# c - 数字常量之前的预期标识符或“（”？

> ID：10435847
> 
> 赞同：9
> 
> 时间：2012-05-03T16:49:14.913
> 
> 标签：c, linux

我有这个头文件......由于某种原因，我不断收到错误消息，说 `log_server.h:48: error: expected identifier or ‘(’ before numeric constant` 我在定义 put_evt 和 print_evt_list 函数的两行都收到此错误，代码如下所示：

```
#ifndef _GENERIC
#define _GENERIC
#include <string.h>
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#endif

#ifndef _NETWORKING
#define _NETWORKING
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <sys/socket.h>
#include <sys/types.h>
typedef struct sockaddr SA;/* To make casting in the (bind, recvfrom, sendto) more readable */
#endif

#define LOGIN_EVT 0
#define LOGOUT_EVT 1

#define RECV_MSG 27
#define SEND_MSG 64000
#define MAX_EVT_COUNT 3000

struct evt{ 
    char user_name[8];
    int type;
    long int time;
};

/* open log file to append the events to its end
 * return 0 on success and -1 on failure (file could not be opened)
 */
int init_log(const char *log_fname);

/* closes the log file
 * return 0 on success and -1 on failure (file could not be opened)
 */
int terminate_log();

/* add new event to the log file
 * return 0 on success and -1 on failure
 */
int put_evt(struct evt *e);

/* get list of events that occured after the given time
 * count is the size of the allocated and passed e-list
 * return number of found events on success and -1 on failure
 */
int get_events(struct evt  *e_list, long int time);

/* print given event's info (name, time)*/
void print_evt(struct evt  *e);

/* print "count" event's info from the given e_list info (name, time)*/
void print_evt_list(struct evt  *e_list, int count);

/* startListen takes a port number and returns a listening descriptor on sucess or negavtive on error  */
int startListen(int port);

/* Responsbile for hanlding received messages from clients and responding to them accordingly
if the message is an action done, it'll save it in the log file and notify the client
if the message is a query about the events, it'll call the private function queryHandler(); to handle it
returns negative on ERROR*/
int handle_message(int sockDescriptor, struct sockaddr_in *client, char *recvMessage); 
```

我读过这个错误可能是由于在多行上编写了预处理指令......但我没有。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T21:23:18.133

问题是我已经`struct evt`在另一个地方声明了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T16:55:14.153

我认为你`#define e 2.71828183`在前面的标题中有或一些这样的。

要确定答案，请通过预处理器运行代码并查看输出。在 gcc 那是 -E 命令行开关

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-22T08:01:22.900

我遇到了完全相同的问题，并发现这`struct evt`是在另一个位置定义的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:56:36.303

我会尝试稍微重命名这些函数。有时，如果其中一个标头定义了您使用的令牌（例如“put_evt”），则预处理器会破坏您的代码。

# c# - 禁用 Request.Validation/Encode URL

> ID：10435850
> 
> 赞同：1
> 
> 时间：2012-05-03T16:49:25.467
> 
> 标签：c#, asp.net

我有一个简单的 asp.net 网页表单页面，它只是拦截 http 请求、从查询字符串中提取参数、进行一些检查并根据参数重定向请求。

最近，我在日志中似乎出现了 HttpRequestValidationException 错误。这是因为我们接收的 url 没有编码，并且我们将 Request.Validation 设置为 true。

现在，我想停止出现这个错误，但我仍然希望受到保护以免受注入。我在想我可以关闭 Request.Validation 并对 URL 进行简单的编码，然后再对它进行任何操作。这是一个有效的解决方案吗？另外，我应该使用什么类型的编码？HTML编码还是url编码？我猜 HTML 编码不能防止 javascript 或 sql 注入，对吧？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:01:01.170

> 现在，我想停止收到此错误

你有什么理由不想再得到这个吗？这很好——它告诉你一个危险的请求被抓到了。如果您只想阻止这些命中日志，为什么不吞下异常呢？

这可以解决问题（Global.asax）：

```
void Application_Error(object sender, EventArgs e)
{

    Exception exc = Server.GetLastError();
    if(exc.GetType() == typeof(HttpRequestValidationException))
    {
        //ignore and don't write to log
    }

} 
```

这还具有仍然记录所有其他异常的优点。

# html - 两种需要输入的表格

> ID：10435855
> 
> 赞同：0
> 
> 时间：2012-05-03T16:49:29.907
> 
> 标签：html

我有一个包含两种形式的页面。他们做不同的事情。他们都有输入`required="required"`。

我的问题是，如果我尝试单击第二个表单的必需输入，浏览器会强制我填写第一个表单的字段。

这种行为正确吗？我的意思是浏览器是否应该像这样工作，因为 html5 假设只有一个表单，每页需要输入？还是我对代码做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T11:45:19.113

您的页面中是否有任何嵌套表单？第一个表单标签在嵌套表单中不起作用，如下所示。在这种情况下，使用空表单标签来避免错误。并且不要编写带有表单标签的类，例如 form.filed{}

```
<form>
main form
<form> </form>
<form> form1 </form>
<form> form2 </form>

</form> 
```

# signalr - 为什么我的网页无法接收信号器消息

> ID：10435858
> 
> 赞同：3
> 
> 时间：2012-05-03T16:49:42.117
> 
> 标签：signalr

基本上我有3个应用程序。用于我的集线器的 Web 应用程序、Nservicebus 和信号器自托管服务器。我目前正在使用信号器版本 0.4。基本上，Web 应用程序会在页面加载时启动与自托管服务器的连接。用户执行向服务总线发送命令的操作。然后服务总线连接到信号器服务器以通知所有 Web 客户端。

**我的网页：**

```
<script src="http://localhost:8081/test/signalr/hubs" type="text/javascript"></script>
<script>
    jQuery.support.cors = true;
    var myHub;  

    $.connection.hub.url = 'http://localhost:8081/test/signalr/hubs';

    $(function () {
        myHub = $.connection.userAccountHub;

        myHub.ChangeNameUpdated = function (connId) {
            alert("recieved signalr message");          
        };

        $.connection.hub.start().done(function() {
            var myClientId = $.connection.hub.id;
            setCookie("srconnectionid", myClientId);
        });
    });

</script> 
```

**我的 SignalR 服务器：**

```
 static void Main(string[] args)
    {
        Debug.Listeners.Add(new ConsoleTraceListener());
        Debug.AutoFlush = true;

        string url = "http://localhost:8081/test/";
        var server = new Server(url);

        server.EnableHubs();
        server.Start();

        Console.WriteLine("Server running on {0}", url);

        while (true)
        strong text{
            ConsoleKeyInfo ki = Console.ReadKey(true);
            if (ki.Key == ConsoleKey.X)
            {
                break;
            }
        }
    } 
```

**我的 Signalr 服务器项目中的集线器**

```
 public class UserAccountHub : Hub
    {

        public void UsersNameChanged(string passedThroughConnectionId)
        {
            Clients.ChangeNameUpdated(passedThroughConnectionId);
        }
    } 
```

**我的 nservicebus 打来的电话**

```
 //connect to signalRServer
        var connection = new HubConnection("http://localhost:8081/test/signalr/hubs");
        IHubProxy myHub = connection.CreateProxy("SignalRServer.Hubs.UserAccountHub");

        //Credentials are inherited from the application
        connection.Credentials = CredentialCache.DefaultNetworkCredentials;

        var test = message.GetHeader("signalrConnectionId");

        connection.Start().Wait();
        myHub.Invoke("UsersNameChanged", message.GetHeader("signalrConnectionId")).ContinueWith(task =>
        {
            //for debuging purposes
            if (task.IsFaulted)
            {
                Console.WriteLine(
                    "An error occurred during the method call {0}",
                    task.Exception.GetBaseException());
            }
            else
            {
                Console.WriteLine("Successfully called MethodOnServer");
            }
        }); 
```

我打开2个浏览器。我在第二个浏览器上启动该过程，只有第一个浏览器收到通知。第二个浏览器没有。

当我运行 fiddler 时，我也没有看到任何突出的问题。

有没有更好的方法来实现这个，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:59:46.000

好的！大卫的评论让我朝着正确的方向前进。还注意到这是更新的，以前没有注意到这一点。 [滚动到底部以获得跨域支持](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs)

1.) 更新至 0.5 版

2.）将我在javascript中的连接信息修改为

```
$.connection.hub.url = 'http://localhost:8081/test/signalr';

$.connection.hub.start({ transport: 'longPolling', xdomain: true }).done(function () {
    //alert("staring hub connection:  " + $.connection.hub.id);
    setCookie("srconnectionid", $.connection.hub.id);
}); 
```

3.）我不得不改变`HubConnection`

```
var connection = new HubConnection("http://localhost:8081/test/"); 
```

4.) 我不得不改变`IHubProxy`

```
IHubProxy myHub = connection.CreateProxy("UserAccountHub"); 
```

# facebook - 如何使用访问令牌？

> ID：10435863
> 
> 赞同：1
> 
> 时间：2012-05-03T16:50:23.297
> 
> 标签：facebook, facebook-javascript-sdk

**使用javascript** ( response.authResponse.accessToken )获取**访问令牌**后如何使用它？

 **我希望每个人都可以向朋友发送消息（**即使从 Facebook 注销后**）。

编辑：

我刚刚尝试过这段代码，但它不起作用：

```
FB.api('/me?access_token=AAACZBLSe4fcoBAFcGMJZAUS9OthIr5o6ZCUySgXYj0nfWX7u08X7h0VZAFFuJJs9LmeWgud2u5ZCEZCeUHZCVIq1Y2j4gjKAjJ0gx5OY9PBihlABJn64njm', function(response) { });

function sendRequestto() {
      FB.ui({
          method: 'send',
          name: 'hello',
          to: '100000497530558',
          description: 'yuhuuuuuuu'
          });    
} 
```

在体内：

```
<input type="button" onclick="sendRequestto(); return false;" value="sendRequestto" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:10:41.383

您所要做的就是将 access_token 保存到数据库/cookie/会话中，并在调用 FB.api 方法时，像这样将访问令牌附加到图形 url

```
FB.api('/me/friends?access_token=...', function(response) {
  alert(response.name);
}); 
```

要离线使用访问令牌，您必须获得offline_access 权限或扩展有效性访问令牌。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:28:19.410

像这样：

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
     FB.api('/me', function(response) {
       alert('Your name is ' + response.name);
     });
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

无需显式使用访问令牌。API 会为您做到这一点。**

# jquery - Phonegap v1.0.0 到 v1.1.0：带有外部域的 ajax 查询返回错误而不使用“ExternalHosts”

> ID：10435866
> 
> 赞同：0
> 
> 时间：2012-05-03T16:50:31.330
> 
> 标签：jquery, jquery-mobile, cordova

当我尝试将 phonegap 1.0.0 升级到 phonegap 1.1.0 时，我所有的 jQuery Ajax 都无法调用外部网站 url。

我有一个带有 phonegap 1.0.0 和 jquerymobile 1.0.0 的应用程序（iOS 和 Android），它们调用网络服务来获取一些网站的 URL 列表以在这个应用程序中使用。这些 URL 使用 jquery ajax 调用，返回这些网站的 html 代码。一切都与phonegap 1.0.0完美配合。

在 v1.1.0 上更新 phonegap 后，所有调用这些网站 URL 的 ajax 查询都返回了 readystate=4 的错误。

我找到了这个解决方案：如果我将域名主机放在 phonegap.plist 中的“ExternalHosts”中，ajax 查询将返回该域的 html 代码。

但这对我来说不是一个好的解决方案，因为我的 web 服务恢复的 URL 列表每天都会改变。我无法每天在 phonegap.plist 的“ExternalHosts”中使用新域创建新应用程序。

是否所有新版本的 PhoneGap（下一个 1.0.0）都需要使用“ExternalHosts”修复 ajax 查询（调用外部网站 url）？

有人在最新的 Phonegap 版本上使用外部网站 url 测试了 ajax 查询吗？

目前我将phonegap版本降级为1.0.0 .... :-(

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:04:36.640

如果您不知道您的应用程序可能连接到的所有主机，那么您将需要在 .plist 中为“ExternalHosts”使用“*”通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:56:05.137

jQuery Mobile 文档中有一节描述了使用 jQuery Mobile 创建 PhoneGap 应用程序时要采取的步骤：http: [//jquerymobile.com/demos/1.1.0/docs/pages/phonegap.html](http://jquerymobile.com/demos/1.1.0/docs/pages/phonegap.html)

基本上整个页面都是很好的信息（否则我会复制特定的文本）。

# vb.net - 使用实体框架返回列表，'System.Collections.Generic.List 无法转换为'一维数组

> ID：10435872
> 
> 赞同：2
> 
> 时间：2012-05-03T16:51:02.240
> 
> 标签：vb.net, entity-framework, list

我在 Web 方法中返回列表时遇到问题。这是代码

```
<WebMethod()> _
Public Function getTags(para_parents As String) As List(Of getTypeDetailsByParentName_Result)()

    Dim context As New PPEntities

    Return context.getTypeDetailsByParentName(para_parents).ToList()

    context.Dispose()

End Function 
```

错误是

> “System.Collections.Generic.List(Of SaftyonRoad.getTypeDetailsByParentName_Result)”类型的值无法转换为“System.Collections.Generic.List(Of SaftyonRoad.getTypeDetailsByParentName_Result) 的一维数组”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T16:53:01.113

您的方法声明表明您正在返回一个列表数组：

> 列表（getTypeDetailsByParentName_Result）**（）**

如果您不想返回列表数组，请删除末尾的括号。然后你将只返回一个列表。

* * *

在不相关的说明中，您`context.Dispose()`将永远不会被调用，因为您在此之前将函数保留为`Return`. 不正确清理资源可能会导致问题。[`Using`通常你可以用一个语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)来处理这个：

```
<WebMethod()> _
Public Function getTags(para_parents As String) As List(Of getTypeDetailsByParentName_Result)
    Using context As New PPEntities
        Return context.getTypeDetailsByParentName(para_parents).ToList()
    End Using
End Function 
```

# vba - Excel：删除行执行期间的运行时错误“13”类型不匹配

> ID：10435874
> 
> 赞同：2
> 
> 时间：2012-05-03T16:51:08.340
> 
> 标签：vba, excel

什么会导致这条线

`If Cells(i, 3) = "" Or VBA.Left(Cells(i, 3), 5) = "BIGA-" Or VBA.Left(Cells(i, 3), 5) = "BRNG-" Or VBA.Left(Cells(i, 3), 5) = "ENER-" Or VBA.Left(Cells(i, 3), 5) = "EURE-" Or VBA.Left(Cells(i, 3), 5) = "STRE-" Then Rows(i).Delete`

在下面的宏中找到并删除第一个单元格记录后返回运行时错误“13”类型不匹配？

```
Option Explicit

Sub deletedExceptions_row()
Dim i As Long
For i = Cells.SpecialCells(xlCellTypeLastCell).Row To 1 Step -1
    If Cells(i, 3) = "" Or 
    VBA.Left(Cells(i, 3), 5) = "BIGA-" Or 
    VBA.Left(Cells(i, 3), 5) = "BRNG-" Or 
    VBA.Left(Cells(i, 3), 5) = "ENER-" Or 
    VBA.Left(Cells(i, 3), 5) = "EURE-" Or 
    VBA.Left(Cells(i, 3), 5) = "STRE-" Then
    Rows(i).Delete
Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:10:23.487

尝试这个

```
Option Explicit

Sub deletedExceptions_row()
    Dim i As Long
    Dim ws As Worksheet

    On Error GoTo whoa

    Set ws = Sheets("Sheet1")

    With ws
        For i = .Cells.SpecialCells(xlCellTypeLastCell).Row To 1 Step -1
            If .Cells(i, 3) = "" Or _
            VBA.Left(.Cells(i, 3), 5) = "BIGA-" Or _
            VBA.Left(.Cells(i, 3), 5) = "BRNG-" Or _
            VBA.Left(.Cells(i, 3), 5) = "ENER-" Or _
            VBA.Left(.Cells(i, 3), 5) = "EURE-" Or _
            VBA.Left(.Cells(i, 3), 5) = "STRE-" Then
                .Rows(i).Delete
            End If
        Next i
    End With
    Exit Sub
whoa:
    MsgBox "Value of i is " & i, vbInformation, Err.Description
End Sub 
```

现在它给出一个错误吗？如果是，那么 的值是多少`i`。如果值为`i`17，则检查单元格 C17。我确信该单元格中有一个给出错误的公式。例如`#DIV/0!`或任何其他错误。只有在这种情况下，它才会给出一个`type mismatch error`.

快照

![在此处输入图像描述](../Images/31ff51931a71bfb61c09f5e84fe5ad9b.png)

# sql - 选择带有 2 个表的 SQL

> ID：10435876
> 
> 赞同：0
> 
> 时间：2012-05-03T16:51:15.730
> 
> 标签：sql

我有 2 张桌子

```
User
Colum : User_id,user_name,email

User_Authenticate 
Colum : user_id,user_key,hash 
```

我可以要求查询以通过 1 个查询获取数据表 2 表，其值为电子邮件或用户名吗？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:54:28.400

```
SELECT *
FROM User u
JOIN User_Authenticate ua
    on u.User_id = ua.user_id 
WHERE u.user_name = 'yourusername'
    OR u.email = 'yourname@email.com' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T16:58:24.760

结果将输出用户的信息，如下所示：

```
email  user_name  user_key  hash
-----  ---------  --------  ----
x@x.x   xxxx       xxxx     xxxx 
```

当然结果会与另一张表 User_Authenticate 相关。
SQL查询：

```
SELECT email, user_name, user_key, hash FROM User JOIN User_Authenticate ON User.User_id = User_Authenticate.user_id AND email='EMAIL-ENTERED' AND user_name='USERNAME-ENTERED' 
```

享受！下次请在问问题之前先搜索谷歌，不需要冗余！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:56:54.380

```
SELECT * FROM user JOIN User_authenticate ON User.user_id=user_authenticate.user_id WHERE user.email = $something 
```

只是一个非常简单的尝试，应该给你一些提示..

# asp.net-mvc-3 - 默认路由不起作用

> ID：10435883
> 
> 赞同：5
> 
> 时间：2012-05-03T16:51:54.717
> 
> 标签：asp.net-mvc-3, routing

为什么这不起作用？

路线：

```
routes.MapRoute(
                "Summary",
                "{controller}/{id}",
                new { controller = "Summary", action = "Default" }
            ); 
```

控制器：

```
public class SummaryController : Controller
    {
        public ActionResult Default(int id)
        {
            Summary summary = GetSummaryById(id);

            return View("Summary", summary);
        }
    } 
```

网址：

```
http://localhost:40353/Summary/107 
```

错误：

```
Server Error in '/' Application.

    The resource cannot be found.

    Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

    Requested URL: /Summary/107

    Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.225 
```

**更新：**

让我用一个更聪明的问题来更新这个问题。我怎么能同时拥有这两个？

```
routes.MapRoute(
                    "Home",
                    "{controller}",
                    new { controller = "Home", action = "Default" }
                );

routes.MapRoute(
                    "Summary",
                    "{controller}/{id}",
                    new { controller = "Summary", action = "Default" }
                ); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T17:54:42.487

## 路由如何工作（默认情况下）？

让我们回到默认路由，它有点像这样：

```
routes.MapRoute(

    // Route name
    "Default", 

    // URL with parameters
    "{controller}/{action}/{id}", 

    // Parameter defaults
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } 

); 
```

让我们试着理解这个是如何工作的。

*   如果你访问`/`，它会调用控制器的`Index`动作`Home`；省略了可选的 ID。

*   如果您访问`/C`它将调用控制器的`Index`操作`C`；省略了可选的 ID。

*   如果您访问`/C/A`它将调用控制器的`A`操作`C`；省略了可选的 ID。

*   如果您访问`/C/A/1`它将调用带有 id`A`的控制器的操作。`C``1`

因此，该路由允许任何形式为`/`,的 URL `/C`，`/C/A`并且`/C/A/1`where`C`是控制器和`A`操作。这是什么意思？这意味着您不必*指定*自己的路线。

因此，如果没有路由，您可以只使用 a`HomeController`和 a`SummaryController`并向最后一个名为`Show`.

然后`/Summary/Show/1`会打电话`SummaryController.Show(1)`

* * *

## 如果我想为控制器设置更短的路由 (/Controller/Id) 怎么办？

假设我们确实想要映射这样的路由`/Summary/1`调用`SummaryController.Show(1)`。

这是正确的形式：

```
routes.MapRoute(
    "Summary",
    "Summary/{id}",
    new { controller = "Summary", action = "Show" }
);

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

请注意，我们已将`Home`路线更改为看起来像`Default`路线。现在我们添加了一个`Summary`路由，我们告诉表单的 URL`Summary/{id}`将触发该路由。当他们这样做时，它会调用控制器的`Show`动作并作为参数`Summary`传递；`id`这正是你想要的......

另请注意，我们需要先放置`Summary`路线，使其优先。

***警告：**您不会希望为您创建的每个操作都创建新路由。您也不希望所有操作都在同一个控制器中。如果是其中一种情况，请考虑重新考虑您的方法，这样您以后就不会遇到问题......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:14:25.973

尝试更换：

```
new { controller = "Summary", action = "Default" } 
```

和 ：

```
new { controller = "Summary", action = "Default", id = UrlParameter.Optional } 
```

**编辑：**尝试了您的代码，为我工作。您的 global.asax 中是否定义了任何其他路线？

# javascript - 从 Twitter REST API 的实体（主题标签、链接、提及...）创建推文文本的链接

> ID：10435885
> 
> 赞同：5
> 
> 时间：2012-05-03T16:52:03.487
> 
> 标签：javascript, jquery, twitter

我在一个网站中插入推文，但我在获取实体（主题标签、提及、链接......）时遇到了一点问题

REST Api 为我们提供有关实体的信息，就像我们可以在这里看到的那样[https://dev.twitter.com/docs/tweet-entities](https://dev.twitter.com/docs/tweet-entities)

但是，api 在字符串文本（推文）中给了我这个实体的索引，但是，如果我在这条推文中插入一个链接，另一个链接将会改变，并且从所有情况下进行验证都会花费很多时间。

有人知道一些方法可以做到这一点，一种简单的方法，或者 jQuery 或 API 中的一些插件可以为我们做到这一点？

（PS：抱歉有些错误，我是巴西开发人员，我的英语不太好：D）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T17:00:44.363

快速谷歌产生了以下要点：

[https://gist.github.com/442463](https://gist.github.com/442463)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T14:19:39.337

也看看这个：[https ://github.com/twitter/twitter-text-js](https://github.com/twitter/twitter-text-js)

# sql - select name from customers as @myvariable // sql 中的动态 AS

> ID：10435886
> 
> 赞同：0
> 
> 时间：2012-05-03T16:52:05.947
> 
> 标签：sql, select

```
DECLARE @myvariable VARCHAR(100)
SET @myvariable = 'mytext'

SELECT Name FROM Customers AS @myvariable 
```

一个人会怎么做呢？

**对 Gareth 的回答：** 这将允许我在执行以下操作时保留列的原始名称：

```
declare @myvariable varchar(20)
set @myvariable='Name'

select case @myvariable when 'Name' then Name
                        when 'Id' then Id
       end
          as Name

from Customers 
```

现在，当@myvariable 的值发生变化时，列名不会改变，但我需要它与@myvariable 相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:58:25.540

像这样的东西可以工作

```
DECLARE @myvariable VARCHAR(100)
SET @myvariable = 'mytext'

DECLARE @sql NVARCHAR(200)

SET @sql = 'SELECT Name AS ' + QUOTENAME(@MyVariable)  + ' FROM Customers'

EXEC sp_executesql @sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:17:39.370

我想我明白你想问什么，你需要使用的是 PL/SQL，我对你的问题的理解是你想要一个程序，你想输入一个变量名，它输出结果。

```
SET SERVEROUTPUT ON;

CREATE OR REPLACE PROCEDURE FindCustomer(customerName IN STRING) AS
BEGIN
     SELECT NAME INTO CUSTNAME FROM CUSTOMER WHERE NAME = customerName;
     DBMS_OUTPUT.PUT_LINE(CUSTNAME);         
END FindCustomer;
/
PROMPT 'Input Customer\'s name';
ACCEPT temp;
EXECUTE FindCustomer(&temp); 
```

我不完全确定这是否正确，因为我没有对其进行测试，但是，这是一个 PL/SQL 函数，理论上它将返回您通过键盘或任何输入输入到脚本中的客户名称。如果你想了解更多关于 PL/SQL 我建议你去[这里](http://plsql-tutorial.com/index.htm)

# cmake - 使用 CMake 字节编译 elisp 文件

> ID：10435890
> 
> 赞同：1
> 
> 时间：2012-05-03T16:52:18.860
> 
> 标签：cmake, elisp

我在一个项目中有一些 elisp 文件，我想用 CMake 进行字节编译和安装。编译后我想有一个目标来安装`.el`和`.elc`文件到一个目录。到目前为止我所拥有的是

```
set(ELISP_SOURCES
  a.el.in
  b.el
  )

# Top level target to compile the elisp sources
add_custom_target(emacs_byte_compile ALL)

foreach(el ${ELISP_SOURCES})

  # Configure and copy the files
  get_filename_component(EL_NAME ${el} NAME_WE)
  configure_file(${el} ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.el)

  # Add command to compile the files
  add_custom_command(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.elc
    COMMAND ${EMACS} ARGS -batch -f batch-byte-compile ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.el
    DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.el
    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
    )

  # Create the dependencies
  add_dependencies(emacs_byte_compile
    ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.el ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.elc
    )

  # Installation target
  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.el ${CMAKE_CURRENT_BINARY_DIR}/${EL_NAME}.elc
    RUNTIME DESTINATION ${ELISP_DIR}
    )

endforeach(el) 
```

当我使用`cmake`(or `ccmake`) 配置然后运行`make`时，它不会编译`.el`文件。然而，它确实说它完成了目标的构建`emacs_byte_compile`。所以我假设我对依赖项的工作方式有一些误解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:14:44.173

您需要创建一个使用您创建的自定义命令的输出的顶级目标。你可以在这里找到一些想法：[http ://www.cmake.org/Wiki/CMake_FAQ#How_can_I_generate_a_source_file_during_the_build.3F](http://www.cmake.org/Wiki/CMake_FAQ#How_can_I_generate_a_source_file_during_the_build.3F)

add_dependencies 命令仅对连接顶级 cmake 目标有用，因此该行不执行任何操作。

像这样的东西：

```
foreach(el ..)
  # collect output files into a list
  # create a custom command to run emacs to create the elc, 
  #input is .el output is .elc
endforeach()
add_custom_target(emacs_byte_compile DEPENDS ${ELC_LIST}) 
```

# .net - ILmerge 和汇编参考

> ID：10435893
> 
> 赞同：2
> 
> 时间：2012-05-03T16:52:26.233
> 
> 标签：.net, assemblies, ilmerge

我有一个由多个项目（所有类库）组成的解决方案。假设：A、B、C、D、E。

A、B 和 C 提供核心功能并且必须一起分布。D 和 E 提供了一些不一定在每种情况下都需要的适配器。

因此，很自然地，我想在分发之前将 A、B 和 C 合并为一个程序集（名为 ABC）。

问题是在编译项目时，D 和 E 引用了 A、B 和/或 C，而不是 ABC。因此，当后来我尝试在其他项目中引用 ABC、D 和 E 时，我收到编译错误，例如：“实例参数：无法从 'A.IBoo' 转换为 'A.IBoo'”。当然，在 VS 中，我还可以看到程序集签名（名称）是不同的。

有没有解决这个问题的好方法？

我知道我可能可以使用发布者政策，但它并不漂亮。

另外，我知道我可以将项目合并到原始解决方案中并避免使用 ILmerge，但我不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:08:14.773

我遇到了类似的问题。事实证明，我引用了两次类型。一次在组合组件中，一次在单独的项目中。这真是令人沮丧。

您可以删除项目并仅引用组合程序集，将其视为库，或者可以在后期构建操作中组合项目。

另一种可能性是为全局命名空间 (http://msdn.microsoft.com/en-us/library/c3ay4x3d(v=vs.80).aspx) 设置别名并引用组合程序集。不利的一面是，您将始终落后于适配器。

在没有看到实际项目的情况下，我会这样做：我会分离 ABC 项目并将它们放入自己的解决方案中。通过构建后事件，我会运行 ILMerge。确保这是版本化和强命名的。它会让你在路上头疼。

项目 D 和 E 将与 ABC 组合程序集一起出现在一个解决方案中。

再次没有看到代码和很难分辨的依赖关系。它还取决于更改发生的频率。如果我在 ABC 中进行更改以适应具有两种解决方案的 DE，那么会很快变老。

# matrix - 矩阵逆的行列式

> ID：10435895
> 
> 赞同：2
> 
> 时间：2012-05-03T16:52:51.173
> 
> 标签：matrix, linear-algebra

如何使用 Cholesky 分解计算矩阵逆矩阵的行列式。我发现直接计算矩阵的行列式并不是一个好主意。那么任何人都可以提供一些见解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T17:34:26.007

如果您已经有了 Cholesky 分解 (A = L * L_t)，那么您只需

```
det(A) = det(L) * det(L_t) = sqr(det(L)) 
```

L 矩阵是下三角矩阵，所以它的行列式是对角线元素的乘积。

Cholesky 分解需要 O(n^3) 次操作，L 的对角线元素的乘积仅为 O(n)。高斯消元法（将 A 转换为三角矩阵）需要 O(n^3) 并且会遇到可能的数值问题。

最后，det(inv(A)) = 1/det(A)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T21:59:18.313

`det(A) = product(eigenvalues(A)) = product(diagonal(choleskyFactorization(A)))^2`

例如，要`A`在 Matlab/Octave 中计算矩阵的行列式，您可以使用`prod(diag(chol(A)))^2`，这是 Matlab 语法中上述等式的右侧。

# jquery - jQuery 根据选择的选项禁用和启用

> ID：10435896
> 
> 赞同：1
> 
> 时间：2012-05-03T16:52:55.167
> 
> 标签：jquery, html, javascript-events

我已经切换了很多论坛并使用了建议的方法，但它似乎不起作用。所以我正在寻找第二双眼睛来帮助我发现我做错了什么。

这是一个生成表单的 cms，我只是在编写一个脚本来完成其余的工作。根据用于 jQuery 的 cms，我可以互换名称和 id。下面将显示我的 jQuery 代码，然后是我要操作的部分。表单已经禁用了文本框，只是在选择选项后不会重新启用它。

```
<script type="text/javascript">  
  $(document).ready(function() 
  {
    $("input:text[name=Other]").attr("disabled", true);
      $("select[name=School[]]").change(function() 
      {
      var chk= $(this).val();
        if (chk == 'Other') 
        {
          $("input:text[name=Other]").attr("disabled", false);
        }
      });
  });
</script>

<form id="ouforms" name="ouforms" method="post" class="ldpforms">    
  <select name="School[]">
    <option value="PleaseSelect" checked="checked">(Please Select)</option>
    <option value="BeachPublicSchools">Beach Public Schools</option>
    <option value="BelfieldPublicSchools">Belfield Public Schools</option>
    <option value="BillingsCountyPublicSchools">Billings County Public Schools</option>
    <option value="BowmanCountyPublicSchools">Bowman County Public Schools</option>
    <option value="DakotaHorizonYouthCenter">Dakota Horizon Youth Center</option>
    <option value="DickinsonAdultLearningCenter">Dickinson Adult Learning Center</option>
    <option value="DickinsonCatholicSchools">Dickinson Catholic Schools</option>
    <option value="DickinsonStateUniversityStudents">Dickinson State University Students</option>
    <option value="EarlyChildhoodLeft">Early Childhood Left</option>
    <option value="GlenUllinPublicSchools">Glen Ullin Public Schools</option>
    <option value="HallidayPublicSchools">Halliday Public Schools</option>
    <option value="HebronPublicSchools">Hebron Public Schools</option>
    <option value="HettingerPublicSchools">Hettinger Public Schools</option>
    <option value="HopeChristianAcademy">Hope Christian Academy</option>
    <option value="KilldeerPublicSchools">Killdeer Public Schools</option>
    <option value="LoneTreeGolvaPublicSchools">Lone Tree (Golva) Public Schools</option>
    <option value="MottRegentPublicSchools">Mott/Regent Public Schools</option>
    <option value="NewEnglandPublicSchools">New England Public Schools</option>
    <option value="RichardtonTaylorPublicSchools">Richardton  Taylor Public Schools</option>
    <option value="ScrantonPublicSchools">Scranton Public Schools</option>
    <option value="SouthHeartPublicSchools">SouthHeart Public Schools</option>
    <option value="SWCHS">SWCHS</option>
    <option value="TwinButtesPublicSchools">Twin Buttes Public Schools</option>
    <option value="WestRiverSpecialServices">West River Special Services</option>
    <option value="Other">Other</option>
  </select>
  <br/>
  <label for="Other">Other: </label>
  <input type="text" name="Other" value=""/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:56:36.087

你应该使用： var chk= $(this).find(':selected').val();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:21:37.777

由于某种原因，`change`事件绑定不成功。当试图[摆弄](http://jsfiddle.net/XpZEL/)你的代码时，它不起作用。

然后我只是改为`select[name=School[]]`（`select[name='School[]']`观看单引号），它开始[工作](http://jsfiddle.net/XpZEL/1/)。

我不知道为什么，这个引号使选择器有效。因为，在某处我读到没有引号的属性选择器应该可以正常工作。

不管怎样，我今天也学到了一些东西。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:58:31.373

这个怎么样：

```
$("input:text[name=Other]").attr("disabled", true);
$('select[name="School[]"]').change(function() {
    $("input:text[name=Other]").attr("disabled", ($(this).val() == 'Other') ? false : true);
});​ 
```

这将根据是否选择“其他”选项来更改文本输入的禁用属性。

**[jsFiddle 示例](http://jsfiddle.net/j08691/MvQvN/1/)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T06:22:58.997

您好，首先我要感谢 Robert purpose 的代码，当然还有其他人。我按原样尝试了您的代码，但什么也没发生...所以我检查了我的 jquery 版本或其他脚本是否有问题...但又没有...然后我玩了，发现如果我可以正常工作删除select语句的[]...如下：select[name='School']

希望这对其他人有帮助...

# tracking - 如何创建用于跟踪的唯一标识符

> ID：10435902
> 
> 赞同：3
> 
> 时间：2012-05-03T16:53:16.473
> 
> 标签：tracking, uniqueidentifier

我正在开发一个具有**网络版本、移动网络版本和 ios 应用程序的应用程序**。我需要跟踪访问量、登录次数等。为此，我需要让每个用户都有一个**跟踪唯一标识符**，该标识符不能是 user_id 因为**有些用户是 guest**。

我们的工作方式是，我们为将新用户带到应用程序而发布的**每个链接都****指向“http://core.APP.com”**，并且加载的文件**在后端重定向**到：

*   如果用户使用的是 iPhone 并且没有应用程序，则应用程序商店。
*   ios 应用程序，如果用户使用 iPhone 并拥有该应用程序。
*   如果用户使用手机，则为移动网络版本。(m.app.com)
*   其他情况的网络版本。(www.app.com)

我研究过的选项是：

1.  **使用 IP 作为标识符**。（这不是一个好的解决方案，因为可能有许多具有相同 ip 的用户，例如可能是公司网络的用户）
2.  **使用 cookie**。（如果用户通过直接打开 iphone 应用程序登录，我们将失去对用户的跟踪）
3.  **使用通过计算连接 ip 和 http_user_agent 创建的字符串的 md5 创建的哈希。**（这是我们找到的最佳选择，因为我们不仅通过 ip 分隔，而且添加了 http_user_agent，这应该使标识符更加唯一）。

有没有办法让所有用户的标识符都是唯一的？

注意：我们计划在未来创建一个 android 应用程序。如果答案与android兼容，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T07:55:49.827

用户将分为两类

*   挂号的
*   未注册（客人）

注册用户将再次分为两类

*   登录
*   未登录

甚至为访客用户分配一个 user_id。开始跟踪他们，一旦他们确定自己（注册、登录、单击电子邮件中的链接等）就合并活动数据。

这个解决方案的好处是 - 您甚至在注册之前就重新主动跟踪您的网络应用程序和移动应用程序的使用情况。

坏事是你的数据库会很快变大，你需要巧妙地管理旧数据。

# c++ - 创建 ac/c++ 应用程序（使用 Xlib）来渲染 SWF 文件

> ID：10435905
> 
> 赞同：2
> 
> 时间：2012-05-03T16:53:26.037
> 
> 标签：c++, c, browser, flash, xlib

约束：AS 在 C/C++ 中

所以基本上，这个想法是创建我自己的窗口应用程序（在 Linux 环境中）并加载（播放）我的 swf 文件。相当“简单”的问题。

我想在没有小部件的情况下使用 Xlib（所以没有 Qt、GITK 等），我有点想知道是否有任何库可以打开 swf ...

我正在寻找洞察力。你们会怎么做呢？

谢谢你。我会及时通知您我正在采用的工作流程；）

编辑 (1): 任何用于玩 SWF 的 C 库？

**编辑 (2): 如何使用插件 API ( [NNP](http://devedge-temp.mozilla.org/library/manuals/2002/plugin/1.0/intro.html) )**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:56:08.177

看看GameSWF

[http://en.wikipedia.org/wiki/GameSWF](http://en.wikipedia.org/wiki/GameSWF)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:56:51.253

我找到了一种使用 NPAPI 的方法。以我的方式在那里工作，但这将完成这项工作。在过去的几天里，我已经阅读了大量的文档（非常难，因为它有点旧），但最终找到了一个很好的示例/示例来实现我想要的。

[http://code.google.com/p/npapi-sdk/source/browse/trunk/samples/unix-basic/BasicPlugin.c](http://code.google.com/p/npapi-sdk/source/browse/trunk/samples/unix-basic/BasicPlugin.c) https://developer.mozilla.org/en/Plugins

所以，我的整个事情都在 C 中并使用 Xlib（不是 GTK），我有 libflashplayer.so 。

# wpf - 使用 MapPoint 从 x64 机器上的 MVVMLight WPF 应用程序调用 Windows 窗体控件库

> ID：10435906
> 
> 赞同：1
> 
> 时间：2012-05-03T16:53:31.190
> 
> 标签：wpf, forms, controls, mvvm-light, mappoint

如果 AxMapPoint 对象被合并到 Windows 窗体控件库中，则 MapPoint 可以在 WPF 应用程序中使用。

创建一个简单的测试应用程序，在 MainWindows.xaml 中具有以下主体

```
<Grid x:Name="LayoutRoot">     
    <Grid Name="mapControl" Loaded="MapPointControl_Loaded"/>
</Grid> 
```

在创建 WPF 项目时工作。CodeBehind 函数调用如下所示。

```
private void MapPointControl_Loaded(object sender, RoutedEventArgs e)
    {
        try
        {
                // Create the interop host control.
                System.Windows.Forms.Integration.WindowsFormsHost host =
                    new System.Windows.Forms.Integration.WindowsFormsHost();

                //  mpControl = new 
                MapPointControl userControl = new MapPointControl();
                host.Child = userControl;

                // Add the interop host control to the Grid
                // control's collection of child controls.
                this.mapControl.Children.Add(host);

        } catch { } 
```

这适用于 WPF 项目，

但是，创建 MVVM 项目不起作用。

此行发生故障

```
 MapPointControl userControl = new MapPointControl(); 
```

出现以下对话框

> FileNotFoundException 被捕获
> 
> 无法加载文件或程序集“Interop.MapPoint，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。
> 
> （Interop.MapPoint.dll 存在于 bin/Debug 文件夹中）

在 Visual Studio 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:00:43.890

[启用 Fusion 日志查看器](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)并共享结果。它应该告诉您缺少什么依赖项。

1.  单击开始-> 输入“fusion”并右键单击**Fusion Log Viewer**以以管理员身份运行。

2.  单击设置-> 将绑定失败记录到磁盘。

3.  触发异常，然后在日志查看器中单击“刷新”。

4.  在 Fusion 中显示的条目上单击“查看日志”。分享结果。

# java - 如何在jar中获取资源路径

> ID：10435908
> 
> 赞同：1
> 
> 时间：2012-05-03T16:53:36.113
> 
> 标签：java, macos, resources, jar

我知道有许多类似的问题，但一直没有成功。我可能遗漏了一些非常基本的东西。我在应用程序 jar 文件中的 ressources 包中有 html 文件，我需要检索它们的路径来读取和更新它们。这是我的代码：

```
URL url  = ClassLoader.class.getResource("/com/lamalva/ressources/test.html");
System.out.println(url);          
java.awt.Desktop.getDesktop().browse(java.net.URI.create(url.toString())); 
```

当我从 NetBeans IDE 运行此代码时，输​​出为：file:/Users/Philippe/NetBeansProjects/Test/build/classes/com/lamalva/ressources/SatelliteQuotaMonitor.html 并且 html 文件按预期在浏览器中打开，但是当我从 OSX 终端运行 jar 文件，输出为：jar:file:/Users/Philippe/.Trash/Test/Test.jar!/com/lamalva/ressources/SatelliteQuotaMonitor.html 并且没有打开 html 文件。无论我做什么，我都无法获得正确的路径。我一直都有“Test.jar！” 在中间。我将非常感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-26T12:35:54.650

单行答案是-

字符串路径 = this.getClass().getClassLoader().getResource().toExternalForm()。

基本上 getResource 方法给出了 URL。从此 URL 中，您可以通过调用 toExternalForm() 来提取路径。

参考资料：[https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource(java.lang.String)](https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource(java.lang.String)) [https://docs.oracle.com/javase/7/ docs/api/java/net/URL.html#toExternalForm()](https://docs.oracle.com/javase/7/docs/api/java/net/URL.html#toExternalForm())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:08:22.353

带有`!`解压子协议的 URL 不能在普通浏览器中使用。就像`ssh:`（终端访问）或`smtp:`/ `mailto:`（电子邮件）。此外，“file:..../my.jar!...”是普通 URL 的一个无法使用的扩展。

有有限的 HTML 支持的 JTextPane/JEditorPane。还有一些java浏览器项目。

也许可以使用嵌入 java Jetty Web 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:10:40.257

要在默认平台 Web 浏览器中从类路径打开资源，您有两种选择。提取所述资源并将其复制到文件系统上的临时位置并传递文件：url。另一个可能更好的选择是运行嵌入式 Web 服务器（例如 Jetty）并直接从您的类路径提供资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:07:40.570

`ClassLoader`如果你想要一个 jar 中的资源，你需要使用几个。这个片段也适用于 AppServers。

在这个例子中，我从`sqlite-jdbc-3.7.2.jar`位于`org.sqlite`package.json 的文件中读取。

```
public class Main {

private static InputStream getResourceAsStream(String resource) throws FileNotFoundException {
    String stripped = resource.startsWith("/") ? resource.substring(1) : resource;
    InputStream stream = null;
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    if (classLoader != null) {
        stream = classLoader.getResourceAsStream(stripped);
    }
    if (stream == null) {
        stream = MyClass.class.getResourceAsStream(resource);
    }
    if (stream == null) {
        stream = MyClass.class.getClassLoader().getResourceAsStream(stripped);
    }
    if (stream == null) {
        throw new FileNotFoundException("File not found: " + resource);
    }
    return stream;
}

public static void main(String[] args) throws FileNotFoundException {
    // Read file from JAR sqlite-jdbc-3.7.2.jar
    Scanner sc = new Scanner(getResourceAsStream("org/sqlite/NativeDB.c"));
    while(sc.hasNextLine()) {
        System.out.println(sc.nextLine());
    }
} 
```

}

有关更多详细信息，请阅读[Java 类加载器](http://en.wikipedia.org/wiki/Java_Classloader)

如果您想更新内容，[Jar Inspector](http://www.codeland.org)可以帮助您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T17:07:08.167

需要读取和更新jar文件中的资源吗？

您可以从输入流中读取内容 - 如果资源与类文件位于同一包中，则使用相对路径。

```
InputStream in = this.getClass().getResourceAsStream("/class/path/to/file"); 
```

要编写，您可能需要读入现有 jar 的内容，修改您想要的部分，然后使用 JarInputStream 和 JarOutputStream 写出更新的内容。

# ruby-on-rails - 在 Rails 中跳过验证的更优雅的方法？

> ID：10435909
> 
> 赞同：5
> 
> 时间：2012-05-03T16:53:39.193
> 
> 标签：ruby-on-rails, validation

在我的用户模型中，我通常怀疑电子邮件、名字、姓氏、密码等。

我有几种情况需要跳过所有或部分验证。

目前，我有一个看起来像这样的除非条件：

```
 validates :first_name, presence: :true, etc..., unless: :skip_first_name_validation?
  validates :last_name, presence: :true, etc..., unless: :skip_last_name_validation?
  validates :email, presence: :true, etc..., unless: :skip_email_validation? 
```

当然我也有：

```
 attr_accessor :skip_first_name_validation, :skip_last_name_validation, etc. 
```

然后我使用私有方法来检查每个的状态：

```
 def skip_first_name_validation?
    skip_first_name_validation
  end

  def skip_last_name_validation?
    skip_last_name_validation
  end

  def skip_email_validation?
    skip_email_validation
  end

  etc.. 
```

`true`从那里开始，每当我需要跳过验证时，我只需在我的控制器中为每个人分配一个值。

* * *

**因此，尽管所有这些都可以正常工作，但我想知道是否有更优雅的方法？**

理想情况下，如果我可以对模型中的每个属性使用这样的简单条件，那就太好了：

```
:skip_validation? 
```

在我的控制器中，只需执行以下操作：

```
skip_validation(:first_name, :last_name, :password) = true 
```

有人可以就我如何编程提出建议吗？我不想使用现有的 gem/库，但我想了解如何在 rails 中编程这种行为。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:16:36.460

这可以帮助您动态定义所有设置器和检查器

```
private 
def self.skip_validations_for(*args)

  # this block dynamically defines a setter method 'set_validations' 
  # e.g.
  #   set_validations(true, :email, :last_name, :first_name)
  #   set_validations(false, :email, :last_name, :first_name)
  define_method('set_validations') do |value, *params|
    params.each do |var|
      self.send("skip_#{var.to_s}_validations=", value)
    end
  end

  # this block walks through the passed in fields and defines a checker
  # method `skip_[field_name]_validation?
  args.each do |arg|
    if self.method_defined? arg
      send :define_method, "skip_#{attr.to_s}_validation?" do 
        send "skip_#{attr.to_s}_validation"  
      end
    end
  end
end 
```

然后在您的模型中，无论这是本机的还是通过模块包含的，您都可以添加：

```
Class Foo < ActiveRecord::Base
  validate :bar, :presence => true
  validate :baz, :length_of => 10

  skip_validations_for :bar, :baz
end 
```

届时您将可以访问

```
set_validations(true, :bar, :baz) 
```

和

```
skip_bar_validation? 
```

**更新：**

> 这段代码会去哪里？

这取决于您希望使用它的范围。如果您只想覆盖一个模型中的验证，那么您可以将其全部直接放入该模型中。但是，如果您希望创建一个`Module`允许您在每个类中执行此操作的文件，那么您必须创建一个`Module`将其放入`lib/`目录并确保它位于加载路径中。也许[这](https://stackoverflow.com/questions/1073076/rails-lib-modules-and)可以帮助你。

> 为什么事情发生了如此巨大的变化？

最初我在一个实例上使用 _validations 方法，这是一个返回验证哈希的 ActiveRecord 方法（字段名称 -> ActiveRecord::Validation）。这种做事的方法自动开启了每个领域的能力。允许您选择所需的特定字段更符合 Rails 的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:10:29.507

我不是元编程方面的专家，但我想你可以像这样实现它。

```
class User < ActiveRecord::Base
  ...
  %w(email first_name last_name).each do |attr|
    self.send :attr_accessor, "skip_#{attr}_validation".to_sym
    self.send :alias, "skip_#{attr}_validation?".to_sym, "skip_#{attr}_validation".to_sym
    self.send :validates_presence_of, attr, { unless: "skip_#{attr}_validation?".to_sym }
  end

  def skip_validation_for(*attrs)
    attrs.map{|attr| send "skip_#{attr}_validation=", true }
  end
end 
```

混入模型中并不是很优雅，但您可以将其制成一个模块 - 使用可能类似于：

```
class User < ActiveRecord::Base
  include SkipValidations
  skip_validations :email, :first_name, :last_name
end 
```

# stored-procedures - Oracle 存储过程 - 游标内循环

> ID：10435910
> 
> 赞同：1
> 
> 时间：2012-05-03T16:53:43.220
> 
> 标签：stored-procedures, plsql, oracle10g, cursor

我有一个存储过程Procedure1，

1.  在Procedure1 中，我正在调用另一个返回sys_refcursor ProcResult2 的过程Procedure2。
2.  我需要遍历这个游标的每一行并将数据插入到一个表中

编码

```
Create Procedure1()  
as   
ProcResult1 Sys_refcursor;  
begin  
    Procedure2(ProcResult2);  
    For eachrow in ProcResult2  
      Loop  
        insert into test_table(ProcResult2.Id);  
      end loop;  
end ;\ 
```

任何想法，关于如何实现 2\. 功能的指针？即遍历 ProcResult2 中返回的每一行并插入到新表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:04:43.580

你快到了：

```
Create Procedure1()  
as   
    ProcResult1 Sys_refcursor;  
    v_record ???; -- See below
begin  
    Procedure2(ProcResult2);  
    Loop  
        fetch ProcResult2 into v_record;
        exit when ProcResult2%notfound;
        insert into test_table(v_record.Id);  
    end loop;  
    close ProcResult2;
end; 
```

您需要使用与游标返回的结构相匹配的结构声明变量 v_record - 即，您需要在构建过程时知道游标记录的结构。如果光标返回“select * from mytab”，那么您可以使用：

```
v_record mytab%rowtype; 
```

但如果它只选择某些列，例如“select col1, col3 from mytab”，那么您需要手动定义结构：

```
type v_record_type is record (col1 number, col3 varchar2(10));
v_record v_record_type; 
```

# appharbor - 使用 Appharbor 是否可以在构建失败时收到电子邮件？

> ID：10435918
> 
> 赞同：8
> 
> 时间：2012-05-03T16:54:10.077
> 
> 标签：appharbor

当构建失败时，是否可以让 appharbor 向开发人员或用户列表发送电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:04:54.797

[您可以使用AppHarbor Service Hooks](http://support.appharbor.com/kb/3rd-party-integrations/developing-a-service-hook)设置自己的服务来完成此操作。使用[TweetHarbor](http://tweetharbor.apphb.com/)并让 Twitter 发送电子邮件是另一种选择。还可以查看这篇关于将[AppHarbor 构建通知发送到 Hipchat/Campfire 聊天室的](http://www.laurentkempe.com/post/Using-Appharbor-service-hook-to-get-build-status-in-HipChat-rooms.aspx)博文。

# c# - 检查大写/小写查询字符串的最佳方法

> ID：10435920
> 
> 赞同：7
> 
> 时间：2012-05-03T16:54:21.860
> 
> 标签：c#, query-string, casing

我有一个问题，我需要从 url 中提取查询字符串参数。该参数可以是该单词的任何一个`"Territory"`或`"territory"`其他大写/小写变体。虽然以下适用于前两种情况，但我想知道是否有更好的方法？

```
IDictionary<string, string> queryString = HtmlPage.Document.QueryString;

if (queryString.ContainsKey("territory"))
{
    ish.SetDefaultRegion(int.Parse(queryString["territory"]));
    // do something (the same something as below)
}
else if (queryString.ContainsKey("Territory"))
{
    ish.SetDefaultRegion(int.Parse(queryString["Territory"]));
    // do something (the same something as above)
} 
```

我宁愿将查询字符串插入字典中忽略大小写（即，如果用户不小心输入`"TERRITORY"`了此代码将失败，那么我如何才能测试该单词是否存在而不管大小写？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T16:58:31.893

使用带有不区分大小写的键比较器的字典：

```
var queryParams = new Dictionary<string, string>(
    HtmlPage.Document.QueryString,
    StringComparer.InvariantCultureIgnoreCase
);

if (queryParams.ContainsKey("territory")) {
    // Covers "territory", "Territory", "teRRitory", etc.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-07T19:03:32.940

如果您的 QueryString 对象不是字典对象，而是诸如 NameValueCollection 之类的东西...

```
IDictionary<string, string> queryString = QueryString.AllKeys.ToDictionary(k => k.ToLowerInvariant(), k => QueryString[k]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:59:44.930

您好，它也可以是 TeRriTory，在查询字符串中执行 .Tolower()

# php - 数组限制大小写

> ID：10435921
> 
> 赞同：2
> 
> 时间：2012-05-03T16:54:22.420
> 
> 标签：php, arrays, function, sorting, element

是否有某种类型的选择功能来创建一个新数组，只选择具有匹配情况的子元素的某些元素？例如，我只想有一个包含 [type] 为“A”的数组，所以最终的数组只包含 [1] 和 [2]。

```
[1]  
    [type] => A
    [month] => January

[2]
    [type] => A
    [month] => February

[3]
    [type] => B
    [month] => March 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:20:28.870

```
function is_type_a($element) { return $element['type'] === 'A'; }
$fiteredArray = array_filter($inputArray, 'is_type_a'); 
```

如果你有 PHP 5.4，你可以用匿名函数更简洁地做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T01:46:29.527

您可以将该数组简化为您想要的条目。请记住，这将保留原始键，因此如果在此过程中未设置 2，您最终可能会得到一个包含 0、1 和 3 作为键的数组。

```
foreach( $array as $key => &$value ){
  if ( $value['type'] != 'A' )
    unset( $array[ $key ] );
} 
```

演示：[http ://codepad.org/OG5rguJ8](http://codepad.org/OG5rguJ8)

另一种方法是使用`array_filter`迭代地减少数组一次一个条目：

```
function callbackFunc( $val ) {
    return $val['type'] == 'A';
}

$result = array_filter( $array, callbackFunc ); 
```

We call the `array_filter` method passing in the array we'd like to filter, as well as the filtering function we've created. Our function will be ran against each element within the array, treating the current element as a `$val` variable.

If that variable's type key maps to a value that is `==` to "A", `TRUE` is returned. Otherwise, `FALSE` is returned. When the function returns `TRUE`, the evaluated value is sent to the `$result` array. If `FALSE` was returned, the value is not pushed onto the `$result` array.

Like the previous option, this method will also preserve the key values.

Demo: [http://codepad.org/todHBZo7](http://codepad.org/todHBZo7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:50:32.847

```
function select_custom($array,$param)
{
    foreach($array as $k=>$v)
    {
       if($v['type']==$param)
       {
          $returnArray[] = $v; 
       }
    }
    return $returnArray;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T01:48:46.843

You can use array_splice() if you know the indexes of the elements you want to pick, if not as suggested by previous answers, you have to loop

# .net - Windows 8 中的桌面程序是否受益于触摸屏操作？

> ID：10435925
> 
> 赞同：0
> 
> 时间：2012-05-03T16:54:33.530
> 
> 标签：.net, winapi, windows-8

较旧的 Windows 7 或更早版本的程序是否至少获得了 Windows 8 桌面上触摸屏操作的一些好处。是否会在 Windows 8 中激活点击和手指悬停。触摸屏 API 可以用于更新桌面 Windows 程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T04:50:16.447

是的。来自 Windows 7 的现有 WM_GESTURE 消息在 Windows 8 上仍然有效。此外，桌面应用程序可以利用统一输入堆栈。查看[WM_POINTERUPDATE](http://msdn.microsoft.com/en-us/library/hh454929%28v=VS.85%29.aspx)消息以获取有关桌面应用程序如何接收统一鼠标、指针和笔输入的更多信息。

请注意，您需要使用窗口句柄调用[RegisterPointerInputTarget](http://msdn.microsoft.com/en-us/library/hh454911%28v=vs.85%29.aspx)以接收统一指针消息。

# gettext - 如何自动删除未使用的 gettext 字符串？

> ID：10435926
> 
> 赞同：8
> 
> 时间：2012-05-03T16:54:33.913
> 
> 标签：gettext, xgettext

我有一个 Web 应用程序，其中我有几个使用 gettext 的翻译。但是现在我已经对应用程序进行了重大重写，虽然大多数字符串是相同的，但也有相当多的字符串被显着更改或删除。

我使用 xgettext 创建 .po 文件，很高兴能够在代码中找到新字符串并将它们添加到 .po 文件中，但我没有看到删除在代码中找不到的字符串的选项.

是否有一种自动方法可以从 .po 文件中删除不再在代码中的字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-27T19:37:24.550

假设您有一个新的 PO 模板文件，其中**只包含应该在**名为 的文件中的最终 PO 目录中的字符串，`messages.pot`以及在 中的目标 PO 目录`messages.po`，您可以这样做：

```
msgattrib --set-obsolete --ignore-file=messages.pot -o messages.po messages.po 
```

这会标记任何过时的字符串。该`--set-obsolete`开关告诉 msgattrib 将*obsolete*标志应用于目标文件中的所有字符串，并`--ignore-file`告诉它忽略出现在指定文件中的字符串（在我们的例子中是 PO 模板）。

如果您还想完全删除它们，还有一个步骤：

```
msgattrib --no-obsolete -o messages.po messages.po 
```

[您可以在此处](https://www.gnu.org/software/gettext/manual/html_node/msgattrib-Invocation.html)阅读有关`msgattrib`命令的更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-20T15:43:02.977

如此

```
find . -name '*.po' -print0 | while read -d '' -r file; do msgattrib --output-file="$file" --no-obsolete "$file"; done 
```

# ms-access - 访问报告 - 如果 field2 等于 field3，则显示 field1

> ID：10435927
> 
> 赞同：0
> 
> 时间：2012-05-03T16:54:42.727
> 
> 标签：ms-access, ms-access-2010

我有测试/测验数据，我正在尝试为每个应试者做一个列表。所以我有：

```
QuestionText
    Answer1
    Answer2
    Answer3
    Answer4 
```

我也有两个字段...一个是“RightWrong”（如果他们做对了，则为 1，如果他们做错了，则为 0），另一个是“Response”（这是应试者给出的答案）将匹配 Answer1、2、3 或 4)。

我想要做的是在 Answer1（或突出显示 Answer1）之后有一个字段，如下所示：

```
IF [RESPONSE]=[ANSWER1] AND [RIGHTWRONG]="1" THEN (somehow show it as correct) 
```

回答2后：

```
IF [RESPONSE]=[ANSWER2] AND [RIGHTWRONG]="1" THEN (somehow show THIS as correct) 
```

等等

这可以通过条件格式来完成吗？如果没有，我需要什么样的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:09:27.223

右键单击文本框并选择“条件格式...”。然后输入这样的内容

![在此处输入图像描述](../Images/1cb053f8d1f16bfee213d3b2c2c1006b.png)

* * *

如果您只有一个为每条记录重复的文本框，则“ `[RESPONSE]=[ANSWER1] And`”部分不是必要的原因。仅`[RIGHTWRONG]="1"`作为表达式输入。

如果要格式化绑定到该字段的文本框，`RightWrong`可以像这样进一步简化它

![在此处输入图像描述](../Images/e6b2457b3c50ee333f47287b931ff92c.png)

* * *

如果该`RightWrong`字段键入为 Integer 或 Long ，则将双引号放在`1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:09:20.480

您可以使用条件格式根据 RIGHTWRONG 的值有条件地格式化报表中的 RESPONSE。

您只需要使用“表达式是”而不是“字段值是”并输入公式`[RIGHTWRONG]=1`和可选的第二个公式`[RIGHTWRONG]=0`来获取错误答案。

**例子**

![在此处输入图像描述](../Images/8e2a524daa49041b03e4c83299a7c004.png)

**输出**

![在此处输入图像描述](../Images/0202b28d058fffde8b96ac42a8775cc6.png)

# android - 为什么 Toast 和 Dialogs 在 ActivityInstrumentationTestCase2 中不起作用？

> ID：10435929
> 
> 赞同：1
> 
> 时间：2012-05-03T16:54:54.387
> 
> 标签：android, testing

出于某种原因，当从 ActivityInstrumentationTestCase2 类中的测试方法调用时，Toast.makeText().show() 和 dialog.show() 调用什么也不做。

有谁知道为什么或如何解决这个问题？

例子：

```
public class MyTest extends ActivityInstrumentationTestCase2<MyActivity> {

    public MyTest(String name)
    {
        super("com.mypackage.activities", MyActivity.class);
        setName(name);
    }

    public exampleTest()
    {
        //This works to show that the test class is running correctly
        TouchUtils.drag(this, 200.0F, 200.0F, 300.0F, 300.0F, 5);

        //The following line does nothing
        Toast.makeText(getActivity(), "toast message", Toast.LENGTH_LONG).show();

        //Sleep to make sure we can see the message
        SystemClock.sleep(5000);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:36:44.020

您需要在应用程序的 UI 线程上执行代码：

```
MyActivity myActivity = getActivity();

// create a toast on application's ui thread.
// you can also use getInstrumentation().runOnMainSync() here.
myActivity.runOnUiThread(new Runnable() {
  public void run() {
    Toast.makeText(myActivity, "toast message", Toast.LENGTH_LONG).show();
  }
});

// wait a second to see the effect.
try {
  Thread.sleep(1000);
} catch (InterruptedException e) {
  e.printStackTrace();
} 
```

希望这可以帮助。

# plone - 如何在 Plone 的 EEA 分面导航中添加多个搜索类别/分类法？

> ID：10435930
> 
> 赞同：2
> 
> 时间：2012-05-03T16:55:03.077
> 
> 标签：plone

我是克隆和内容管理工具的新手。我们有一个已安装的克隆，我们实验室的出版物列表所在的位置。我只想要类似 EEA 导航演示的东西，我可以在其中定义例如作者的小部件、场地的小部件以及我们出版列表年份的小部件。

我在plone上安装了eea facted navigation。它允许我在我定义的标签（我在页面或文件的分类选项卡中定义的那些）上有一个复选框小部件。但现在所有标签（作者、年份、地点等）都出现在所有使用“标签”的小部件中。如何在 EEA 多面导航中对小部件施加约束。或者，我如何定义自己的类别更多标签类型甚至其他词汇表我不确定解决它的最简单方法是什么。

有什么帮助吗？哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:45:25.187

您可以做一件事来手动创建词汇表：

安装 Products.ATVocabularyManager。使用此产品，您可以创建词汇表 TTW，我相信 faceted nav 可以将这些引入（它在文档中说可以）。

您在演示中看到的可能是具有自定义索引设置的自定义内容类型。因此，在演示中，他们不太可能将所有数据放入标签中——它们是目录索引的内容上的不同字段。这种方式更好用，如果你想走这条路，你可以查看 plone.app.dexterity。

# scheme - 从命令提示符接受单词并转换为字符串列表

> ID：10435931
> 
> 赞同：1
> 
> 时间：2012-05-03T16:55:08.320
> 
> 标签：scheme, racket

我想在 DrRacket 中编写一个代码，它接受来自命令提示符的多个单词并将它们转换为字符串列表。例如。如果我在提示中输入**hello how do you do**，它应该将其转换为列表**'("hello" "how" "do" "you" "do")**。DrRacket 有可能吗？

我试过这个：（定义inp-lst（读取））

运行此代码时，命令提示符中会显示一个输入栏。但是当我输入上述行时， inp-lst 的值原来只是**'hello**。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:10:07.667

第一步，在引号之间输入您的输入，如下所示：

```
(define inp-lst (read))
"hello how do you do" 
```

现在，您可以创建一个字符串列表：

```
(regexp-split #px" " inp-lst)
> '("hello" "how" "do" "you" "do") 
```

**编辑 ：**

正如评论中指出的那样，`read-line`可能是更好的选择：

```
(define inp-lst (read-line))
(regexp-split #px" " inp-lst)
> '("hello" "how" "do" "you" "do") 
```

使用`read-line`，您不需要用引号将键入的文本括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:14:40.103

“读取”函数读取一个表达式，在您的情况下它是单个符号“你好”。您的意图是读取一行，以#\newline 终止，获取一个字符串，然后用#\space 将其拆分。尝试“阅读线”

# iphone - 设备方向的屏幕旋转和新的 UIView

> ID：10435934
> 
> 赞同：1
> 
> 时间：2012-05-03T16:55:14.840
> 
> 标签：iphone, objective-c, rotation, screen, orientation

当屏幕从纵向旋转到横向时，将新 UIView 放置在视图堆栈顶部的应用程序 UIWindow 范围内的最安全和最有效的方法是什么？*此外，当从横向返回到纵向时，要删除此子视图。*

基本上，该应用程序的创建大部分是：

> -UI窗口：
> 
> --UIView
> 
> ---所有子视图（包括一个tabview控制器）

我想创建：

> -UI窗口：
> 
> --UIView（新的，要放在上面）
> 
> --UIView
> 
> ---所有子视图（并由此处的视图控制器触发）

这是错的吗？令人惊讶的是，很少有文档可以帮助做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:08:20.133

如果您创建一个视图控制器来保存所有子视图，您可以使用将为您调用的旋转函数：

willRotateToInterfaceOrientation:duration: 和 didRotateFromInterfaceOrientation:

所以假设你使用你检查的 didRotateFromInterfaceOrientation

```
if(UIInterfaceOrientationIsLandscape(orientation))
{
    [yourView removeFromSuperView];
}
else
{
    [self.view addSubView: yourView];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:15:28.477

在这里查看我的答案：[https ://stackoverflow.com/a/4960988/202451](https://stackoverflow.com/a/4960988/202451)

它应该让你更接近做这样的自定义事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:08:52.557

我找到了一个可行的解决方案。你能提供一个更好的吗？

```
 ArtsDayAppDelegate *appDelegate = (ArtsDayAppDelegate*)[[UIApplication sharedApplication] delegate];
    UIView *landscapeView;

    if (!landscapeView) {
        landscapeView = [[UIView alloc] initWithFrame: frame];
    }

    [landscapeView setBackgroundColor:[UIColor blackColor]];
    ..add various views..
    [appDelegate.window.rootViewController.view addSubview:landscapeView]; 
```

# jquery - 合并对话框代码

> ID：10435936
> 
> 赞同：1
> 
> 时间：2012-05-03T16:55:16.493
> 
> 标签：jquery, jquery-ui

我一直在加快 jQuery 的速度，但我认为我仍然缺少一些基础知识。我有一组复杂的对话框弹出窗口（如下提炼），我不知道如何将它们整合到一个“类”中。

HTML：

```
 <div id="FirstDialogFrame" 
      title="First" 
      data-button="Alert First"
      data-alert="FirstAlert">
 </div>

 <div id="SecondDialogFrame" 
      title="Second" 
      data-button="Alert First"
      data-alert="SecondAlert" >
 </div>

 <button id="PopFirst">First</button>
 <button id="SecondFirst">Second</button> 
```

JavaScript：

```
$("#FirstDialogFrame").dialog({
    autoOpen: false,
    resizable: true,
    height: 340,
    width: 340,
    modal: true,
    buttons: {
        "Alert": function() {
            alert($(this).attr("data-alert"));
            $(this).dialog("close");
        },
        Close: function() {
            $(this).dialog("close");
        }
    }
});

$("#SecondDialogFrame").dialog({
    autoOpen: false,
    resizable: true,
    height: 340,
    width: 340,
    modal: true,
    buttons: {
        "Alert": function() {
            alert($(this).attr("data-alert"));
            $(this).dialog("close");
        },
        Close: function() {
            $(this).dialog("close");
        }
    }
});

$("#PopFirst").click(function() {
    $("#FirstDialogFrame").dialog("open");
});

$("#SecondFirst").click(function() {
    $("#SecondDialogFrame").dialog("open");
}); 
```

小提琴：

[http://jsfiddle.net/tzerb/BYKqM/](http://jsfiddle.net/tzerb/BYKqM/)

任何反馈表示赞赏。

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:59:15.803

HTML

```
 <div id="FirstDialogFrame" class="popup"
      title="First" 
      data-button="Alert First"
      data-alert="FirstAlert">
 </div>

 <div id="SecondDialogFrame" class="popup"
      title="Second" 
      data-button="Alert First"
      data-alert="SecondAlert" >
 </div>

 <button id="PopFirst">First</button>
 <button id="SecondFirst">Second</button> 
```

Javascript

```
 $(".popup").dialog({
    autoOpen: false,
    resizable: true,
    height: 340,
    width: 340,
    modal: true,
    buttons: {
        "Alert": function() {
            alert($(this).attr("data-alert"));
            $(this).dialog("close");
        },
        Close: function() {
            $(this).dialog("close");
        }
    }
});

$("#PopFirst").click(function() {
    $("#FirstDialogFrame").dialog("open");
});

$("#SecondFirst").click(function() {
    $("#SecondDialogFrame").dialog("open");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:00:36.850

您可以将 javascript 移动到点击事件中。因此，您的页面加载速度更快，并在需要时构建对话框。

```
<button class="popup" 
  data-button="Alert First" 
  title="First" 
  data-alert="FirstAlert">Open first dialog</button>

<button class="popup" title="Second" 
  data-button="Alert First"
  data-alert="SecondAlert">Open second dialog</button> 
```

您的代码如下所示：

```
$("button.popup").click(function(){
  $("<div/>")
     .appendTo(document.body)
     .attr('title', this.title)
     .data('button', $(this).data('button'))
     .data('alert', $(this).data('alert'))
     .dialog({
         resizable: true,
         height: 340,
         width: 340,
         modal: true,
         close: function(event, ui) {
           $(this).remove();
         },
         buttons: {
             "Alert": function() {
                 alert($(this).data('alert'));
                 $(this).dialog("close");
             },
             Close: function() {
                 $(this).dialog("close");
             }
         }
     });

}); 
```

见小提琴：http: [//jsfiddle.net/e6t76/](http://jsfiddle.net/e6t76/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:10:42.083

为什么不组合对话框选择器并具有不同的打开事件，因为它们都具有相同的参数？

```
$("#FirstDialogFrame, #SecondDialogFrame").dialog({
    autoOpen: false,
    resizable: true,
    height: 340,
    width: 340,
    modal: true,
    buttons: {
        "Alert": function() {
            alert($(this).attr("data-alert"));
            $(this).dialog("close");
        },
        Close: function() {
            $(this).dialog("close");
        }
    }
});

$("#PopFirst").click(function() {
    $("#FirstDialogFrame").dialog("open");
});

$("#SecondFirst").click(function() {
    $("#SecondDialogFrame").dialog("open");
}); 
```

# linq-to-sql - 如何在 linq pad 中执行左连接 -

> ID：10435938
> 
> 赞同：4
> 
> 时间：2012-05-03T16:55:26.430
> 
> 标签：linq-to-sql, left-join, linqpad

如何让 linq pad 运行我的左连接，如下所示？

```
var query = 
            from s in db.CDBLogsHeaders
                    .OrderByDescending(g => g.LogDateTime)
                    from sc in db.StyleColors
                        .Where(stylecolor => stylecolor.id == (int?)s.StyleColorID)
                        .DefaultIfEmpty()
                    from c in db.StyleHeaders
                        .Where(styleHeader => styleHeader.id == (int?)s.StyleHeaderID)
                        .DefaultIfEmpty()
        select new 
        {
            CDBLogsHeaderId = s.Id,
            Merchandiser = c.Merchandiser,
            Material = s.Material,
            Season = s.Season,
            LogsHeaderLogType = s.LogType,
            PushFromTo = s.PushFromTo,
            LinePlan = s.LinePlan,
            QuikRefNumber = s.QuikRefNumber,
            PLMOrigin = s.PLM_Origin,
            SeasonOriginal = c.SeasonOriginal,
            SeasonCurrent = c.SeasonCurrent,
            StyleHeaderId = c.Id,
            StyleCode = c.StyleCode,
            StyleColorsColorCode = sc.ColorCode
        };

    query.Dump(); 
```

linq pad 创建的 sql 在 Management Studio 中完美运行，但 linq-pad 不显示任何行并给出此错误

> InvalidOperationException：无法将 null 值分配给 System.Int32 类型的成员，该类型是不可为 null 的值类型。

我怎样才能让 linqpad 工作，这样我就可以玩它了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:23:08.617

在您的匿名类型中，确保您的整数返回整数。

改变

```
StyleHeaderId = c.Id, 
```

到

```
StyleHeaderId = (c.Id == null ? 0 : c.Id), 
```

# php - PHP Memcache 连接到 couchbase 但不能做任何其他事情

> ID：10435949
> 
> 赞同：2
> 
> 时间：2012-05-03T16:56:16.040
> 
> 标签：php, windows, memcached, couchbase

我在 Windows 7 上设置了一个新的 CouchBase 服务器，并且正确配置了 PHP 和 php_memcache.dll 的 Apache。我可以连接到服务器，但无法获取统计信息或设置任何值。有什么建议我做错了吗？我已经关闭了防火墙，但是我可以连接到 11211，我认为连接还可以，无论如何？

这是一个测试脚本

```
$memcache = new Memcache;
$memcache->connect('127.0.0.1', 11211) or die ("Could not connect");
var_dump($memcache);
echo "<hr />";
$allSlabs = $memcache->getExtendedStats('slabs');
var_dump($allSlabs);
echo "<hr />";
$items = $memcache->getExtendedStats('items');
var_dump($items);
echo "<hr />";
$tmp_object = new stdClass;
$tmp_object->str_attr = 'test';
$tmp_object->int_attr = 123;
$t = $memcache->set("rule_$uid", $tmp_object, false, 10);
var_dump($t);
exit; 
```

哪个输出

```
object(Memcache)#3 (1) { ["connection"]=> resource(8) of type (memcache connection) }
------------------------------------
array(1) { ["127.0.0.1:11211"]=> bool(false) }
------------------------------------
array(1) { ["127.0.0.1:11211"]=> bool(false) }
------------------------------------
bool(false) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:39:55.923

如果它是 Couchbase 存储桶类型（可在安装时选择），则不会有“统计数据板”或“统计数据项”。这解释了这两个。至于您获取和设置的项目，代码片段中的其他任何地方都没有 $uid ，所以其他地方肯定有更多？

# java - jdbc数组绑定：字符集编码

> ID：10435950
> 
> 赞同：4
> 
> 时间：2012-05-03T16:56:20.480
> 
> 标签：java, oracle, jdbc, character-encoding

我正在尝试将 SQL 字符串数组绑定到准备好的语句，并且对于某些数据库字符集，数组的值变为空。如果我绑定简单的字符串（不在数组中），它就可以工作。

如果字符集（v$nls_parameters 中的 NLS_CHARACTERSET）是 AL32UTF8，它可以正常工作。如果是 WE8ISO8859P15，那么我可以绑定字符串，但不能绑定字符串数组。不同之处似乎在于 Oracle JDBC 具有支持转换的[特定字符集列表](http://docs.oracle.com/cd/E16338_01/appdev.112/e13995/oracle/sql/CharacterSet.html)，而 ISO-8859-15 不是其中的一部分。

这解释了部分问题，因为当它在数据库中发现它时，它会将所有字符串转换为 null。但是当字符串不在数组中时转换确实有效......所以我很困惑。

我的整个测试如下。我使用的表类型定义为`create type t_v4000_table as table of varchar2(4000);`

```
Connection connection;

@Before
public void setup() throws SQLException {
    OracleDataSource ds = new OracleDataSource();
    ds.setUser("aaa");
    ds.setPassword("a");
    ds.setURL("jdbc:oracle:thin:@server:1521:orcl");
    connection = ds.getConnection();
}

@Test
// works with both AL32UTF8 and WE8ISO8859P15
public void testScalar() throws SQLException {
    CallableStatement stmt = connection.prepareCall("declare a varchar2(4000) := ?; "
            + "begin if a is null then raise_application_error(-20000,'null'); end if; end;");
    stmt.setString(1, "a");
    stmt.execute();
}

@Test
// works only with AL32UTF8
public void testArray() throws SQLException {
    ArrayDescriptor descriptor = ArrayDescriptor.createDescriptor("T_V4000_TABLE", connection);
    String[] array = new String[] {"a"};
    Array sqlArray = new ARRAY(descriptor, connection, array);
    CallableStatement stmt = connection.prepareCall("declare a t_v4000_table := ?; " +
            "begin if a(1) is null then raise_application_error(-20000,'null'); end if; end;");
    stmt.setArray(1, sqlArray);
    stmt.execute();
} 
```

我怀疑我在声明和绑定数组的方式上做错了，但我不知道是什么。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:59:43.367

解决方案，以及对象/集合内的字符串与否之间的区别，[有据可查](http://docs.oracle.com/cd/B28359_01/java.111/b31224/global.htm#CHDCHJJC)，实际上：

> 基本的 Java 归档 (JAR) 文件 ojdbc5.jar 和 ojdbc6.jar 包含所有必要的类，以提供完整的全球化支持：
> 
> *   未作为 Oracle 对象或集合类型的数据成员检索或插入的 CHAR、VARCHAR、LONGVARCHAR 或 CLOB 数据的 Oracle 字符集。
> *   字符集 US7ASCII、WE8DEC、WE8ISO8859P1、WE8MSWIN1252 和 UTF8 的对象和集合的 CHAR 或 VARCHAR 数据成员。
> 
> 要在对象或集合的 CHAR 或 VARCHAR 数据成员中使用任何其他字符集，您必须在应用程序的 CLASSPATH 环境变量中包含 orai18n.jar。

在 CLASSPATH 中添加 orai18n.jar 后，它就像一个魅力

# facebook - 如何通过带有对象的 Graph API 创建问题？

> ID：10435951
> 
> 赞同：0
> 
> 时间：2012-05-03T16:56:20.667
> 
> 标签：facebook, facebook-graph-api

我需要使用[Graph Api](https://developers.facebook.com/docs/graph-api)创建问题，其中选项是我的应用程序对象（网页）。

例子：

问题：我应该看哪个节目？

*   选项1：程序1 -`// http://www.example.com/programs/1`
*   选项2：程序2 -`// http://www.example.com/programs/2`

文档页面的[示例](https://developers.facebook.com/docs/graph-api/reference/question#options)仅显示带有文本的创建选项。

编辑：

不可能通过[Graph Api将](https://developers.facebook.com/docs/graph-api)[自定义对象](https://developers.facebook.com/docs/sharing/opengraph/using-objects)添加到问题中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:32:08.110

这不是 Questions API 支持的用例 - 您可以使用 URL 作为 Question 选项的文本，但它们在 Facebook 上显示时不会被链接。

# php - 在 if 情况下混合和匹配 mysql 和 mssql whileloop

> ID：10435952
> 
> 赞同：0
> 
> 时间：2012-05-03T16:56:21.420
> 
> 标签：php, mysql, sql-server, if-statement

请查看以下代码并告诉我是否有解决方法。

```
if ($current_server_is_mysql):
    while ($row = mysql_fetch_assoc($RS)) {
else:
    while( $row = sqlsrv_fetch_array( $RS, SQLSRV_FETCH_ASSOC)){ 
endif: 
```

根据我正在使用的服务器，我想以正确/原生的方式将我的记录编译到 $RS 记录集中。如果我能通过这部分，其余的应该没问题，因为 mysql 和 mssql $row 都可以以相同的方式被利用。例如，`$row['fieldname']`无论该行是 mysql 还是 mssql 资源，都会给我字段值。所以这一切都归结为上述片段失败。

我得到的错误指向`else:`上述代码段中的部分。

```
Parse error: syntax error, unexpected T_ELSE in D:\Hosting\5291100\html\blueprint\pages\populate_migration_table.php on line 415 
```

我可以理解为什么会收到此错误。

但是，我希望你们可以提供一个解决方法，而无需我复制整个 while 循环 she-bang。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:12:27.540

你有一些语法不匹配，把你的代码放在这样的函数中对我有用：

```
if ($current_server_is_mysql):
    while ($row = mysql_fetch_assoc($RS)) {
        ProcessThisRow($row);
    }
else:
    while( $row = sqlsrv_fetch_array( $RS, SQLSRV_FETCH_ASSOC)){
        ProcessThisRow($row);
    }
endif;

function ProcessThisRow ($row) {
    /*Put your code in this function */
    return true;
} 
```

# centos - 如何从 yum 插件中触发“yum clean all”？

> ID：10435954
> 
> 赞同：2
> 
> 时间：2012-05-03T16:56:23.787
> 
> 标签：centos, fedora, redhat, rpm, yum

我正在编写一个 yum 插件来更新本地存储库的 URL。当 repo URL 更改时，我想让 yum 运行 a`yum clean all`以确保没有缓存过时的信息。我知道 yum 有一个钩子可以在请求时运行代码，`yum clean [plugins|all]`但是是否可以从插件的其他钩子函数之一中触发 clean all？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T05:59:16.013

你可以很容易地做到这一点。Yum 公开了一个由命令行程序使用的库。这是 yum clean all 的示例代码：

```
import sys
sys.path.append("/usr/share/yum-cli")
import cli
ybc = cli.YumBaseCli()
ybc.cleanCli(["all"]) 
```

如果您想做更多的事情，然后使用函数检查所有由 CLI 库方法公开的 API，这些 API 在 /user/share/yum-cli 文件夹中公开:)

问候，

# facebook - 获取 Facebook 目标 ID

> ID：10435958
> 
> 赞同：1
> 
> 时间：2012-05-03T16:56:32.813
> 
> 标签：facebook, json, facebook-graph-api

我们从这个位置从 Facebook 获取目标 ID：

[http://developers.facebook.com/attachment/targeting_ids.json](http://developers.facebook.com/attachment/targeting_ids.json)

不幸的是，当我们尝试访问它时，它现在给了我们一个 404。我们确实在此处找到了它的副本：http: [//fbdevwiki.com/wiki/File](http://fbdevwiki.com/wiki/File:Targeting_ids.json.txt) :Targeting_ids.json.txt但是我们希望直接从 Facebook 访问它。

是否有其他位置或其他方式来获取城市、州、地区和语言的目标 ID 列表？我们使用这些 ID 来定位新的粉丝页面墙贴。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:28:36.617

我去谷歌搜索“targeting_ids.json”并找到了几个不同的存档站点，您可以在其中[获取副本](http://fbdevwiki.com/wiki/File%3aTargeting_ids.json.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:35:15.070

根据长期不推荐使用静态文件的文档；您应该直接从 API 获取定位信息。

这样做的说明（带有示例）在这里：[https ://developers.facebook.com/docs/reference/ads-api/get-autocomplete-data/](https://developers.facebook.com/docs/reference/ads-api/get-autocomplete-data/)

# php - 将mysql查询与子查询结果合并为一个PHP数组

> ID：10435964
> 
> 赞同：0
> 
> 时间：2012-05-03T16:56:37.777
> 
> 标签：php, arrays

我有一个包含事件的表，为了列出这些事件，我遍历事件表，检查事件类型并在它的特定表中查找它的值，它是 eventId。

目前，它使用一个查询来获取 20 个事件，然后最多使用 3 个查询来获取这些事件的数据。我目前已对其进行了程序编码，但需要对其进行更改，以便最后它仅以数组形式返回数据。

这是我需要实现的 Pseduo 代码示例：

```
while(eventQuery):

    if commentQueryResult;
        $array .= commentQueryResult;

    if forumPostQueryResult;
        $array .= forumPostQueryResult;

    if uploadItemQueryResult;
        $array .= uploadItemQueryResult;

endwhile;

return $array; // Combined returned results as one array 
```

然后我将能够访问数据并通过它进行 foreach 循环。

我只是不确定将多个结果集组合成一个数组的最佳方法？

**或者您可以尝试将它们组合成一个查询...**

```
$eventResult = mysql_query(
    'SELECT userevent.event, userevent.eventId, userevent.friendId 
    FROM userevent
    WHERE userevent.userId = 1 OR userevent.friendId = 1 
    ORDER BY userevent.id DESC
    LIMIT 20'
);

while ($eventRow = mysql_fetch_row($eventResult)){

    if($eventRow[0] == 1){

        $result = mysql_fetch_array(mysql_query("
            SELECT forumRooms.id, forumRooms.title                                                                                       
            FROM forumPosts                                                 
            INNER JOIN forumRooms ON forumPosts.`forumTopic` = forumRooms.`id`                                                      
            WHERE forumPosts.id = '$eventRow[1]'"));
    }
    elseif($eventRow[0] == 2){

        $result = mysql_fetch_array(mysql_query("
            SELECT game.id, game.uriTitle, game.title                                                           
            FROM usergamecomment 
            INNER JOIN game ON usergamecomment.`gameId` = game.id
            WHERE usergamecomment.id = $eventRow[1]"));   
    }
    elseif($eventRow[0] == 4){

        $result = mysql_fetch_array(mysql_query("
            SELECT usercomment.comment, UNIX_TIMESTAMP(usercomment.TIME), `user`.id, `user`.username, `user`.activate
            FROM usercomment
            INNER JOIN `user` ON usercomment.`userId` = `user`.id
            WHERE usercomment.id = $eventRow[1]
            AND `user`.activate = 1"));
    }
    elseif($eventRow[0] == 5){

        $result = mysql_fetch_array(mysql_query("
            SELECT game.id, game.title, game.uriTitle 
            FROM game 
            WHERE game.id = $eventRow[1]"));
    }

// Combined Results as array
} 
```

我正在将所有这些转换为 PDO，这是在找到将其最小化的最佳方法之后的下一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:44:58.407

已接受的挑战。;)

由于您实际上只对 while 循环内的结果感兴趣，因此您可以尝试这个单一查询。由于 LEFT JOINS，它可能不会更快，很大程度上取决于您的数据库。final`$result`包含所有元素及其各自的字段。

```
$result = array();
$q = 'SELECT userevent.event AS userevent_event, 
      userevent.eventId AS userevent_eventId, 
      userevent.friendId AS userevent_friendId,
      forumRooms.id AS forumRooms_id,
      forumRooms.title AS forumRooms_title,
      game.id AS game_id,
      game.uriTitle AS game_uriTitle,
      game.title AS game_title,
      usercomment.comment AS usercomment_comment, 
      UNIX_TIMESTAMP(usercomment.TIME) AS usercomment_time,
      user.id AS user_id, 
      user.username AS user_username, 
      user.activate AS user_activate,
      g2.id AS game2_id,
      g2.uriTitle AS game2_uriTitle,
      g2.title AS game2_title

    FROM userevent
    LEFT JOIN forumPosts ON forumPosts.id = userevent.eventId
    LEFT JOIN forumRooms ON forumPosts.forumTopic = forumRooms.id
    LEFT JOIN usergamecomment ON usergamecomment.id = userevent.eventId
    LEFT JOIN game ON usergamecomment.gameId = game.id
    LEFT JOIN usercomment ON usercomment.id = userevent.eventId
    LEFT JOIN user ON usercomment.userId = user.id
    LEFT JOIN game g2 ON userevent.eventId = g2.id
    WHERE (userevent.userId = 1 OR userevent.friendId = 1)
      AND userevent.eventId >= (SELECT userevent.eventId 
                WHERE userevent.userId = 1 OR userevent.friendId = 1 
                ORDER BY userevent.id DESC LIMIT 1,20);';

$r = mysql_query($q);

while ( $o = mysql_fetch_row($r) ) {
  switch($o['userevent_event']) {
    case 1: 
      $result[] = array(
    'id' => $o['forumsRooms_id'],
    'title' => $o['forumsRooms_title'],
      );
      break;
    case 2: 
      $result[] = array(
    'id' => $o['game_id'],
    'uriTitle' => $o['game_uriTitle'],
    'title' => $o['game_title'],
      );
      break;
    case 4: 
      $result[] = array(
    'comment' => $o['usercomment_comment'],
    'time' => $o['usercomment_time'],
    'id' => $o['user_id'],
    'username' => $o['user_username'],
    'activate' => $o['user_activate'],
      );
      break;
    case 5: 
      $result[] = array(
    'id' => $o['game2_id'],
    'uriTitle' => $o['game2_uriTitle'],
    'title' => $o['game2_title'],
      );
      break;
  }
} 
```

注意：最终，必须稍微编辑查询，我只是在没有测试的情况下将其写出来。如果我对 db 结构有更多了解，肯定可以进行优化。

***此外，这仅仅是一个概念证明，它确实可以通过单个查询来完成。;)***

# jquery - jquery - 隐藏/显示字段集不一致

> ID：10435967
> 
> 赞同：0
> 
> 时间：2012-05-03T16:56:50.020
> 
> 标签：jquery

我的 jsfiddle 在这里：http: [//jsfiddle.net/justmelat/QnKeZ/](http://jsfiddle.net/justmelat/QnKeZ/)

我在页面加载时隐藏字段集，然后根据从下拉列表中选择的产品类型显示特定的字段集。我以为我已经完成了这项工作，但是在您从产品类型下拉列表中选择了几次之后，应该隐藏或不隐藏的部分。

我应该怎么做或者我错过了什么？

**我的jsfiddle在这里：** `http://jsfiddle.net/justmelat/QnKeZ/`

**此处为 HTML >>**

```
<form method="post" action="">
    <div id="holdMsg"></div>
    <fieldset id="mainSection" name="mainSection">
                <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                <table style="width: 100%">
                    <tr>
                        <td style="height: 33px; width: 178px;">Name</td>
                        <td style="height: 33px"><input  id="1125" name="1125" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 33px; width: 178px;">Email</td>
                        <td style="height: 33px"><input  id="1026" name="1026" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Title</td>
                        <td><input  id="1089" name="1089" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Type</td>
                        <td><select id="1169" name="1169">
                        <option value="">Select</option>
                        <option value="Cars">Cars</option>
                        <option value="Boats">Boats</option>
                        <option value="Planes">Planes</option>
                        </select></td>
                    </tr>
                                    </table>
            </fieldset>

            <fieldset id="section-11" name="section-11">
                <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1433" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

            <fieldset id="section-12" name="section-12">
                <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1433" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
            <fieldset id="section-13" name="section-13">
                <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1433" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset><br>
<fieldset id="section-1011" name="section-1011">
                <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1302" name="1302">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

</form> 
```

**jQuery在这里>>**

```
$("#section-11").hide();
$("#section-12").hide();
$("#section-13").hide();
$("#section-1011").hide();

var projtype = new Array(
        {value : 'Cars', sect_id : 'fieldset#section-11'},
        {value : 'Planes', sect_id : 'fieldset#section-12'},
        {value : 'Boats', sect_id : 'fieldset#section-13'}
    );
$("select#1169").on('change',function () {
var thisVal = $(this).val();
 var sect_id ="";
    $(projtype).each(function() {
$(this.sect_id).hide();
        if(this.value == thisVal) {
        $(this.sect_id).show();
        return false;
        }
    });        
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:02:07.540

```
$("#section-11").hide();
$("#section-12").hide();
$("#section-13").hide();
$("#section-1011").hide();

var projtype = new Array({
    value: 'Cars',
    sect_id: 'fieldset#section-11'
}, {
    value: 'Planes',
    sect_id: 'fieldset#section-12'
}, {
    value: 'Boats',
    sect_id: 'fieldset#section-13'
});
$("select#1169").on('change', function() {
    var thisVal = $(this).val();
    $('fieldset[id!="mainSection"]').hide();
    var sect_id = "";
    $(projtype).each(function() {
        if (this.value == thisVal) {
            $(this.sect_id).show();
        }
    });
}); 
```

看这个[演示](http://jsfiddle.net/tkB7S/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:03:52.130

`return false;`从您的`each`功能中删除。

此`return`语句停止执行您的`each`迭代并停止隐藏其他字段集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:06:15.553

删除`return false;`. 是否有任何具体原因将其保留在那里？你更新的[小提琴](http://jsfiddle.net/QnKeZ/8/)。

# c# - 防止用户通过浏览器而不是通过链接导航到文档

> ID：10435969
> 
> 赞同：0
> 
> 时间：2012-05-03T16:56:59.740
> 
> 标签：c#, iis-7, forms-authentication

我的站点中有一个文件夹，其中包含我不希望用户通过浏览器浏览的文件，因此我将其放入我的 web.config

```
<location path="documents">
    <system.web>
      <authorization>
        <deny users="*"/>
      </authorization>
    </system.web>
    <system.webServer>
      <directoryBrowse enabled="false" />
    </system.webServer>
  </location> 
```

问题是在我网站的某些页面上，我有指向这些文档的链接，我希望用户能够在点击这些文档时看到它们。问题是目前当他们点击这些链接时，他们没有得到文件。我确实理解，这是一种矛盾的状态。唯一对我有利的是，当用户单击链接时，他将登录。有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:01:30.307

我会这样做的方法是使用一个页面作为参数接收您尝试获取的文件的一些 ID（如果它本身不是安全漏洞，文件名本身也可以）检查用户的凭据和访问权限到后面代码中的文件，然后用文件的内容覆盖输出（因此在服务器端加载）。

这样，客户端根本不需要访问机密文件夹，所有通信都通过您的网页和您的凭据检查算法进行。即使他们从某人那里获得了有效链接并且他们无权访问它，他们也会收到一个请求被拒绝屏幕（或您选择编码的任何内容）。

# objective-c - 如何从应用程序委托访问视图控制器变量......反之亦然？

> ID：10435970
> 
> 赞同：6
> 
> 时间：2012-05-03T16:57:02.790
> 
> 标签：objective-c, ios, cocoa-touch

我希望视图控制器能够`dog`在应用程序委托中访问。

我希望应用程序委托能够`mouse`在视图控制器中访问。

* * *

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    int mouse;  // <----------------
}
@end 
```

* * *

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    mouse = 12;  // <-------------------

    NSLog(@"viewDidLoad %d", dog); // <---------------
} 
```

* * *

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    int dog;  // <---------------
}
@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@end 
```

* * *

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    NSLog(@"applicationWillResignActive %d", mouse); // <--------------
} 
```

* * *

```
 - (void)applicationDidBecomeActive:(UIApplication *)application
{
    dog = 77; // <---------------------

    NSLog(@"applicationDidBecomeActive");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T18:11:37.387

第 1 部分：在 ViewController.h 中：

```
-(int)mouse;  //add this before the @end 
```

在 ViewController.m 中，添加这个方法：

```
-(int)mouse
{
    return mouse;
} 
```

要从 AppDelegate 访问鼠标，使用 self.viewController.mouse 例如；

```
NSLog(@"ViewController mouse: %i", self.viewController.mouse); 
```

第2部分：

在 AppDelegate.h 中：

```
-(int)dog;  //add this before the @end 
```

在 AppDelegate.m 中，添加此方法：

```
-(int)dog
{
    return dog;
} 
```

在 ViewController.m 中：

```
#import "AppDelegate.h" 
```

要从 ViewController 访问 dog，请使用以下命令：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSLog(@"dog from AppDelegate: %i", [appDelegate dog]);  //etc. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T18:16:43.693

在您的视图控制器头文件中添加鼠标作为属性：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    NSInteger mouse;  // <----------------
}

@property (nonatomic, assign) NSInteger mouse;

@end 
```

在 @implementation 行下方的视图控制器实现中合成属性：

```
@synthesize mouse; 
```

在您的应用委托中添加 dog 作为属性：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    NSInteger dog;  // <---------------
}
@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@property (nonatomic, assign) NSInteger dog;

@end 
```

还在您的应用程序委托实现中合成狗。

现在在您的应用程序委托中，假设您有对视图控制器的引用，您可以像这样访问鼠标：

```
viewController.mouse = 13; 
```

您可以对您的应用程序委托类执行相同的操作，可以从任何视图控制器使用（假设您的应用程序委托类的名称是 AppDelegate）访问它：

```
((AppDelegate *)([UIApplication sharedApplication].delegate)).dog = 13; 
```

我建议您也使用 NSInteger 而不是 int。

# c++ - 创建不依赖于对象的方法

> ID：10435974
> 
> 赞同：1
> 
> 时间：2012-05-03T16:57:16.837
> 
> 标签：c++, methods, include

如何在一个 cpp/hpp 文件中创建一堆不依赖于任何对象的方法（在我的文件中没有类、没有对象、没有 main，只有方法）以及如何声明它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:00:32.240

创建一个`namespace`. 像这样的东西：

**实用程序.h**

```
namespace Utils
{
   void myMethod();
} 
```

**实用程序.cpp**

```
namespace Utils
{
  void myMethod()
  {
    //Implementation
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:00:26.850

如果您希望它们是公开的，即在多个翻译单元中可用，最好的方法是将它们包含在 a`namespace`中，在标头中声明它们并在单个实现文件中实现它们：

```
//functions.h

namespace MyFunctions
{
   void foo();
   void goo();
}

//functions.cpp

namespace MyFunctions
{
   void foo() {}
   void goo() {}
} 
```

**重要的**

如果您在标头中提供定义，则应标记它们`inline`，否则在多个翻译单元中包含该标头可能会导致链接器错误：

```
//functions.h
inline void foo() {  
    //..
}
inline void goo() { 
    //..
} 
```

如果您只希望它们在翻译单元中可用，请在匿名命名空间中的该实现文件中定义它们（或声明它们`static`）：

```
//fileThatUsesFunctions.cpp

namespace
{
    void foo() {}
    void goo() {}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:00:51.810

要定义不依赖于对象的函数，只需直接声明它们即可。

```
// MyFile.h
int some_function();

// MyFile.cpp

int some_function() {
  return 42;
} 
```

使用 C++ 虽然在命名空间中声明它们是个好主意。这不会使他们依赖于对象，但确实减少了全局命名空间污染

```
// MyFile.h
namespace MyNamespace {
  int some_function();
}

// MyFile.cpp
using MyNamespace;
int some_function() {
  return 42;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T17:01:02.163

你声明它们的方式与在`C`. 它可以在命名空间内或命名空间外。除了他们不在一个班级之外，没有什么区别。

如果你想在`C`以后使用这些函数，你应该在它们前面加上`extern "C"`.

`extern "C" void foo();`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T17:03:49.567

没有什么能阻止你编写*自由函数*。如果你认为一个函数应该是全局的，那么自由函数是非常合适的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T17:05:04.677

您应该将它们放在命名空间中。Naveen 的例子很恰当。

作为附加说明，如果您希望在命名空间中隐藏某些函数或数据单元（从而模仿“私有”访问），请将这些函数和数据单元放置在匿名命名空间中，嵌套在父命名空间中。例如：

```
namespace Foo
{
    publicFunction1();
    publicFunction2();

    namespace
    {
        privateFunction1();
        std::vector<Bar> privateData;
    }
} 
```

嵌套的匿名命名空间内的项目只能由父命名空间内的项目访问。我发现这非常有用。

# escaping - 将 FQL 与 file_get_contents() 一起使用时出现间歇性 HTTP400（错误请求）

> ID：10435976
> 
> 赞同：0
> 
> 时间：2012-05-03T16:57:21.900
> 
> 标签：escaping, facebook-php-sdk, facebook-fql, file-get-contents, ampersand

我的网页使用 PHP 进行 FQL 请求，获取登录用户的好友数，代码如下：

```
$graph = 'https://graph.facebook.com/fql?q=';
$graph .= 'SELECT+friend_count+FROM+user+WHERE+uid%3Dme%28%29';
$graph .= '&access_token=' . $access_token;
$result = file_get_contents($graph); 
```

大约 80% 的时间都可以正常工作，但有时我会收到 400 Bad Request。我注意到这似乎是由将“q”与“access_token”分开的&符号被转义的；即我明白了（不起作用）：

```
https://graph.facebook.com/fql?q=SELECT+friend_count+FROM+user+WHERE+uid%3Dme%28%29&amp;access_token=AAAF8VR3YZCpQBAGiX16jvZAwaEciTwZB1QZAaUjcjy82Ce7Ov7nPqNxjsKM1SAZASGVcZCJ80R9KJZBJYrjKmsDVK6YNrPGA7plPVuwCFZCaOwZDZD 
```

取而代之的是（有效 - 相同的请求，但 '&' 已替换为 '&'）：

```
https://graph.facebook.com/fql?q=SELECT+friend_count+FROM+user+WHERE+uid%3Dme%28%29&access_token=AAAF8VR3YZCpQBAGiX16jvZAwaEciTwZB1QZAaUjcjy82Ce7Ov7nPqNxjsKM1SAZASGVcZCJ80R9KJZBJYrjKmsDVK6YNrPGA7plPVuwCFZCaOwZDZD 
```

我尝试相应地调整我的代码，以便 PHP 明确告诉字符串替换转义的 & 符号，但无济于事：

```
$graph = 'https://graph.facebook.com/fql?q=';
$graph .= 'SELECT+friend_count+FROM+user+WHERE+uid%3Dme%28%29';
$graph .= '&access_token=' . $access_token;
$result = file_get_contents($graph);
$graphNoEscape = str_replace('&amp;', '&', $graph);
$result = file_get_contents($graphNoEscape); 
```

有人知道问题的解决方案吗？令人讨厌的是，这段代码有时有效，但并非一直有效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T18:00:56.217

对于发现此问题并遇到相同问题的任何人，这就是我解决问题的方法：

首先，我告诉服务器使用 public_html/www 文件夹中的一个 php.ini，PHP 版本 5.3。

然后我编辑我的代码如下：

```
$graph = 'https://graph.facebook.com/fql?q='; 
$graph .= urlencode('SELECT friend_count FROM user WHERE uid = me()');
$graph .= '&access_token='.$access_token; 
$graphNoEscape = str_replace('&amp;', '&', $graph); 
$file_contents = file_get_contents($graphNoEscape); 
$fql_result = json_decode($file_contents); 
$friend_count = mysql_real_escape_string($fql_result->data[0]->friend_count); 
```

诚然，我可能用 str_replace() 完成了它，但它仍然有效:)

希望这可以帮助某人。

# ruby-on-rails - 生产中显示的错误消息 - Ruby on Rails 3.1、Nginx、Unicorn

> ID：10435978
> 
> 赞同：1
> 
> 时间：2012-05-03T16:57:32.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, nginx, unicorn

我有一个使用 Nginx 和 Unicorn 在生产中运行的 Rails 3.1 应用程序。由于某种原因，我的自定义 404 和 500 html 错误页面没有显示。相反，我收到了实际的错误消息（例如“路由错误”）。

在我的 production.rb 文件中，我有`config.consider_all_requests_local = false`

在具有几乎相同配置的同一台服务器上，我有一个运行良好的“登台”站点。据我所知，唯一的区别是生产版本有 SSL，而暂存版本没有。

这是生产应用程序的 Nginx 配置：

```
upstream unicorn_myapp_prod {
  server unix:/tmp/unicorn.myapp_prod.sock fail_timeout=0;
}

server {
  listen 80;

  server_name myapp.com;

  root /home/deployer/apps/myapp_prod/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn_myapp_prod;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
}

server {
  listen 443 default;
  ssl on;
  ssl_certificate /home/deployer/apps/myapp_prod/shared/ssl_certs/myapp_prod.crt;
  ssl_certificate_key /home/deployer/apps/myapp_prod/shared/ssl_certs/myapp_prod.key;

  server_name myapp.com;

  root /home/deployer/apps/myapp_prod/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn_myapp_prod;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:29:49.250

如果您将 haproxy 与 nginx 和 unicorn 一起使用（例如，您在 Engineyard 上），则此修复还不够。您需要使用以下内容覆盖*Rails*：

```
class ActionDispatch::Request
  def local?
    Rails.env != 'production'
  end
end 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T03:41:54.140

The https listener's `location @unicorn` block is missing the `X-Forwarded-For` directive.

```
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
```

It's in your http listener, but not the https listener.

Assuming that Rails' force_ssl is successfully redirecting all of the http requests and your only errors are happening on https requests, it seems that would explain it.

Also, to be very clear, there is a well known problem in Rack/Rails3 with respect to routing errors, which you specifically mention.

[https://rails.lighthouseapp.com/projects/8994/tickets/4444-can-no-longer-rescue_from-actioncontrollerroutingerror](https://rails.lighthouseapp.com/projects/8994/tickets/4444-can-no-longer-rescue_from-actioncontrollerroutingerror)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:39:26.503

不确定这是否适用，但在处理 /500.html 页面位置的 error_page 行之后，我们的 nginx 配置中也有一个链接

位置 = /500.html { 根 /path/to/rails/app/public; }

显然用您的路径替换 rails app 部分的路径。

# asp.net-mvc-3 - MVC 3从局部视图中获取结果到模型中

> ID：10435980
> 
> 赞同：2
> 
> 时间：2012-05-03T16:57:38.190
> 
> 标签：asp.net-mvc-3

我敢肯定这很容易，但也许我没有很好地搜索......

我想知道如何将部分视图的结果返回给模型和/或控制器。

如果用户输入名字、性别（从下拉列表中）和等级（从下拉列表中），我只能在模型中找到名字和性别。我想知道如何从局部视图中的下拉菜单中获取等级一直回到模型中，这样我就可以在控制器中看到它。

请在控制器代码中查找此问题：

> > > > > 我需要做什么才能让部分类的 GradeLevel 出现在此处：<<<<<

注意：这不是确切的代码。可能有小的，微不足道的错字。

编辑：显然你不能添加长评论，所以我会在这里添加：

谢谢你，汤姆和神秘人。汤姆让我思考为什么它不起作用。我没有考虑模型绑定。通过我提出的设计，HTML 被渲染，并且 Grade 下拉列表有这个 id：“Grade”。我要绑定的模型上的属性是：“GradeLevelID”。如果我将部分视图中的助手更改为 @Html.DropDownList("GradeLevelID" ... 它工作得很好。

但这不是一个好的解决方案。我的想法是从主视图中抽象出部分视图。硬编码的名字吹了！我确实制定了一个稍微改进的解决方案。在主视图中，我更改了@Html.Partial 语句以将模型属性名称传递给部分。像这样：

```
@Html.Partial("GradeDropDown", (SelectList)Model.GradeSelectList, new ViewDataDictionary { { "modelPropertyName", "GradeLevelID" } }) 
```

然后我可以改变部分观点说

```
@model System.Web.Mvc.SelectList
@Html.DropDownList((string)ViewData["modelPropertyName"], Model) 
```

但这似乎也是一种处理事情的愚蠢方式。谢谢您的帮助。我会看看 EditorTemplates。

* * *

## 这是我的模型：

```
public class RegisterModel{

    public MemberRegistration MemberRegistration{
        get{
            if (HttpContext.Current.Session["MemberRegistration"] == null){
                return null;
            }
            return (MemberRegistration)HttpContext.Current.Session["MemberRegistration"];

        }

        set{
            HttpContext.Current.Session["MemberRegistration"] = value;
        }

    }

    public string FirstName{
        get{
            return MemberRegistration.FirstName;
        }
        set{
            MemberRegistration.FirstName = value;
        }
    }

    public SelectList GenderSelectList{
        get{

            List<object> tempList = new List<object>();

            tempList.Add(new { Value = "", Text = "" });
            tempList.Add(new { Value = "M", Text = "Male" });
            tempList.Add(new { Value = "F", Text = "Female" });

            return new SelectList(tempList, "value", "text", MemberRegistration.Gender);
        }
    }

    [Required(ErrorMessage = "Gender is required")]
    public string Gender{
        get{
            return MemberRegistration.MemberPerson.Gender;
        }
        set{
            MemberRegistration.MemberPerson.Gender = value;
        }
    }

    public SelectList GradeLevelSelectList{
        get{
            List<object> tempList = new List<object>();

            tempList.Add(new { Value = "", Text = "" });
            tempList.Add(new { Value = "1", Text = "1st" });
            tempList.Add(new { Value = "2", Text = "2nd" });
            tempList.Add(new { Value = "3", Text = "3rd" });
            tempList.Add(new { Value = "4", Text = "4th" });

            return new SelectList(tempList, "value", "text", MemberRegistration.GradeLevel);
        }
    }

    [Required(ErrorMessage = "Grade is required")]
    public Int32 GradeLevel{
        get{
            return MemberRegistration.GradeLevel;
        }
        set{
            MemberRegistration.GradeLevel = value;
        }
    }
} 
```

* * *

## 这是我的主要观点：

```
@model RegisterModel

@using (Html.BeginForm())
{
   <p class="DataPrompt">
        <span class="BasicLabel">First Name:</span>
        <br />
        @Html.EditorFor(x => x.FirstName)
    </p>

    <p class="DataPrompt">
        <span class="BasicLabel">Gender:</span>
        <br />
        @Html.DropDownListFor(x => x.Gender, Model.GenderSelectList)
    </p>

    <p class="DataPrompt">
        <span class="BasicLabel">Grade:</span><span class="Required">*</span>
        <br />
        @Html.Partial("GradeDropDown", (SelectList)Model.GradeLevelSelectList)
    </p>

    <p class="DataPrompt">
        <input type="submit" name="button" value="Next" />
    </p>

} 
```

* * *

## 这是我的部分视图（名为“GradeDropDown”）：

```
@model System.Web.Mvc.SelectList

@Html.DropDownList("Grade", Model) 
```

* * *

## 这是我的控制器：

```
[HttpPost]
public ActionResult PlayerInfo(RegisterModel model)
{
    string FirstName = model.Registration.FirstName;
    string Gender = model.Registration.Gender;

    >>>>> What do I need to do to get the GradeLevel from the partial class to be here: <<<<<
    Int32 GradeLevel = model.Registration.GradeLevel;           

    return RedirectToAction("Waivers");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:16:55.530

尝试这样做，以便在发布元素时获得正确的元素命名。

在您的主视图上

```
 @Html.Partial("GradeDropDown", Model) //Pass the Model to the partial view 
```

这是您的部分视图（名为“GradeDropDown”）：

```
 @model RegisterModel

   @Html.DropDownList("Grade", (SelectList)Model.GradeLevelSelectList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:26:51.943

我什至不知道你为什么使用局部视图。您所做的只是使用一种辅助方法，您可以用视图中的辅助方法替换部分视图，这样代码会更少。

其次，您应该使用`Html.DropDownListFor()`而不是`Html.DropDownList()`，然后它会为您正确命名 html 控件。

只需这样做：

```
<p class="DataPrompt"> 
    <span class="BasicLabel">Grade:</span><span class="Required">*</span> 
    <br /> 
    @Html.DropDownListFor(m => m.GradeLevel, (SelectList)Model.GradeLevelSelectList) 
</p> 
```

# zend-framework - Zend 框架路由/重定向

> ID：10435981
> 
> 赞同：2
> 
> 时间：2012-05-03T16:57:39.240
> 
> 标签：zend-framework

我试图在用户注册后将用户重定向到注册页面，但它没有这样做..

```
<?php

class RegisterController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        $form = new Application_Form_Register();
        $form->submit->setLabel('Register');
        $this->view->form = $form;
        if ($this->getRequest()->isPost()) {
            $formData = $this->getRequest()->getPost();
            if ($form->isValid($formData)) {
                $first_name = $form->getValue('first_name');
                $surname = $form->getValue('surname');
                $email = $form->getValue('email');
                $username = $form->getValue('username');
                $password = $form->getValue('password');
                $is_admin = $form->getValue('is_admin');
                $age = $form->getValue('age');
                $gender = $form->getValue('gender');
                $uni = $form->getValue('uni');
                $register = new Application_Model_DbTable_Users();
                $register->addUser($first_name, $surname, $email, $username, $password, $is_admin, $age, $gender, $uni);

            } else {
                $form->populate($formData);
            }
            $route = array('controller'=>'Register', 'action'=>'registered');
                    $this->_helper->redirector->gotoRoute($route);

        }
    }

    public function registeredAction()
    {
        // action body
    }

} 
```

这就是我所拥有的

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:39:49.230

我通常不使用`gotoRoute()`，因此我不确定这是否是您的问题的原因，但您的控制器名称应该全部小写，即`Register`应该`register`或可能`gotoRouteAndExit()`会解决您的问题（只是快速浏览一下[接口](http://framework.zend.com/apidoc/1.11/)）

您可以尝试另一种方法：对于动作/控制器之间的路由，我发现以下最方便：

```
$this->_helper->redirector('registered'); 
```

这会将您重定向到同一控制器中的注册操作。如果您想在不同的控制器中执行操作，只需将控制器添加为第二个参数，如下所示：

```
$this->_helper->redirector('registered', 'register'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:11:04.827

在控制器中，您可以执行以下操作：

```
$this->_redirect('/controller/action'); 
```

# tsql - 在 CASE 语句中按 NEWID 排序的 SQL

> ID：10435982
> 
> 赞同：0
> 
> 时间：2012-05-03T16:57:44.947
> 
> 标签：tsql

我试图弄清楚如何在 ORDER BY 子句中的 CASE 语句中涉及 NEWID() （这样我可以以随机顺序返回结果），如下所示：

```
ORDER BY CASE WHEN @RankingMethod = 1 THEN intFoo ELSE NEWID() END DESC 
```

显然这不起作用，因为它抛出“操作数类型冲突：uniqueidentifier 与 int 不兼容”

有没有办法构造这个 ORDER BY 让它随机排序或按指定列排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:02:53.257

你可以做

```
ORDER BY CASE WHEN @RankingMethod = 1 THEN intFoo ELSE -1 END DESC, newid() 
```

如果需要，请选择另一个“魔法值”而不是`-1`

# python - 在 Django 中的不同应用程序中显示应用程序的特定数据

> ID：10435984
> 
> 赞同：0
> 
> 时间：2012-05-03T16:57:52.827
> 
> 标签：python, django

我的 Django 网站中有两个应用程序，一个称为 Playlist，它具有 Song 模型，而后者又具有 BooleanField。另一个应用程序称为 Spotlight，并具有 Track 模型。在 Track 模型中，我只想显示 BooleanField 值等于 True 的歌曲（播放列表应用程序的）。我知道如何通过使用过滤器在网页中做到这一点，但我不知道如何在管理面板中实现这一点。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:02:19.130

假设你有一个`ForeignKey`or `ManyToManyField`，你想要[`limit_choices_to`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.limit_choices_to).

# php - PHP：重复值删除

> ID：10435986
> 
> 赞同：0
> 
> 时间：2012-05-03T16:57:56.787
> 
> 标签：php, arrays, pchart

我有 2 个数组，每个数组有 1000 个键，一个保存温度值，另一个保存小时。

示例数组临时：

```
[0] = 3.1
[1] = 4.3
[2] = 4.1
[3] = 5.1
[4] = 4.1 
```

小时数组示例：

```
[0] = 0
[1] = 1
[2] = 2
[3] = 3
[4] = 3 
```

这样做的问题是，当我将这些组合到数组中并将其绘制在例如 pchart 中时，我在 X 上有太多值并且它变得混乱。
所以我需要删除重复的时间并用“NULL”替换，这样不需要的时间就不会绘制在 x 轴上。
我想保留数组中的第一个小时，重复的第二个到末尾可以设置为“NULL”

小时输出数组应为：

```
[0] = 0
[1] = 1
[2] = 2
[3] = 3
[4] = NULL
etc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:59:47.837

听起来像是一份工作[`array_unique()`](http://il.php.net/manual/en/function.array-unique.php)。

> ```
> array array_unique ( array $array [, int $sort_flags = SORT_STRING ] ) 
> ```
> 
> 接受一个输入数组并返回一个没有重复值的新数组。
> 
> 请注意，密钥是保留的。array_unique() 首先对作为字符串处理的值进行排序，然后将保留每个值遇到的第一个键，并忽略所有后续键。这并不意味着将保留未排序数组中第一个相关值的键。
> 
> > **注意：当且仅当 时，两个元素被认为相等`(string) $elem1 === (string) $elem2`。换句话说：当字符串表示相同时。将使用第一个元素。**

* * *

如果您需要保留数组键，您可以尝试使用`array_map()`.

```
<?php

//Variable initialization
$array = array(
    0 => 0,
    1 => 1,
    2 => 2,
    3 => 3,
    4 => 3
);
$temp  = array();

$array = array_map(function($element) use (&$temp) {
    if (!in_array($element, $temp)) {
        $temp[] = $element;
        return $element;
    }
    return null;
}, $array);

print_r($array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:05:24.270

您的数组已排序，所以... 这个怎么样？

```
$hours = array(0,1,2,3,3,4,4,5);
$prev = -1;
foreach ($hours as &$hour) {
  if ($prev === $hour) {
    $hour = NULL;
  }
  else {
    $prev = $hour;
  }
}
unset($hour);
print_r($hours); // 0,1,2,3,NULL,4,NULL,5... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:05:07.963

如果您使用的是 php 5.3：

```
$a = array(0,1,2,3,4,4,5);

array_walk($a, function(&$item) {
  static $encountered = array();
  if(in_array($item, $encountered)) {
    $item = null;
    return;
  }
  $encountered[] = $item;
});

var_dump($a); 
```

将保留键的数量。Array_walk 为每个键调用一个用户函数。static 使得函数范围内的 $encountered 数组在执行之间保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:01:09.397

如果您想完全删除重复项，您可以使用[array_unique()](http://php.net/manual/en/function.array-unique.php) 但它不会将它们设置为 NULL。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-03T17:02:02.780

也许这个技巧可以做到：

```
$simplified = array_combine($hours, $temperatures);

$hours = array_keys($simplified);
$temperatures = array_values($simplified); 
```

这不会将事物设置为 NULL 而是完全删除它们，我认为这是您正在寻找的。否则应该这样做：

```
foreach(array_slice(array_reverse(array_keys($hours)), 0, -1) as $i)
    ($hours[$i] === $hours[$i-1]) && $hours[$i] = NULL; 
```

[演示](http://codepad.org/8ahi0OOo)

# geometry - 如何确定一个点位于极线的哪一侧？

> ID：10435987
> 
> 赞同：-2
> 
> 时间：2012-05-03T16:58:01.610
> 
> 标签：geometry, line, point, polar-coordinates

如果我有一条以极坐标给出的二维线（即距原点的 rho 距离和距 x 轴的 theta 角），我如何确定点位于直线的哪一侧？具体来说，我将如何取两个点并确定它们是在这条线的同一侧还是相反侧？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:30:33.043

我知道你有你的线，说 rho 是你的线与 x 轴的交点，而 theta 是你的线和 x 轴之间的角度。

然后，您的线路的方程式将显示为

```
f(x) = (x-rho)*tan(theta) 
```

要确定点 (x0,y0) 是否在该线上方，请检查是否

```
f(x0) = (x0-rho)*tan(theta) > y0 
```

检查它是否在线检查

```
f(x0) = (x0-rho)*tan(theta) < y0 
```

但请注意，如果 theta= 90°、270°，此方法将失效。但在这种情况下，您只需检查 x0 是大于还是小于 rho 就很容易了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:14:43.880

您能否获取两个提供的点并计算它们相对于 theta 的角度？

为了争论起见，说您的 2D 线在 (3,3) 处结束；

二维线：坐标：(3,3)
 半径：3 * √2
 Theta：0.79 弧度

第 1 点：
 坐标：(3,4)
 半径：5
 Theta：Arcsin(4/5) = 0.92 弧度

第 2 点：
 坐标：(3,1)
 半径：√10
 Theta：Arcsin(2/√10) = 0.68 弧度

Point 1 的 Theta 大于 2D Line；它在一个不同的方面。点 2 小于 2D 线；它在另一边。

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T04:16:17.690

这样的线有方程：

-x*cos(theta)+y*sin(theta)-rho=0 [1]

从点 (x0, y0) 到这条线的距离是

Dist = -x0*cos(theta)+y0*sin(theta)-rho [2]

重要的事情：Dist 的符号取决于点位于直线的哪一侧（当该点和坐标原点位于直线的不同侧时为正，否则为负）。

因此，计算和比较两个所需点的 [2] 表达式的符号就足够了

# c# - XNA 游戏状态管理参考分配

> ID：10435994
> 
> 赞同：0
> 
> 时间：2012-05-03T16:58:33.053
> 
> 标签：c#, reference, xna, state

最近我开始使用**游戏状态管理**（详情：[create.msdn.com/en-US/education/catalog/sample/game_state_management](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)），这是用 XNA 制作的简单游戏的绝佳模板。

几天来我一直在分析它的实现，我对这种方法的**LoadingScreen.cs有疑问：**

```
/// <summary>
/// The constructor is private: loading screens should
/// be activated via the static Load method instead.
/// </summary>
private LoadingScreen(ScreenManager screenManager, bool loadingIsSlow,
                      GameScreen[] screensToLoad)
{
    this.loadingIsSlow = loadingIsSlow;
    this.screensToLoad = screensToLoad;

    TransitionOnTime = TimeSpan.FromSeconds(0.5);
} 
```

我不明白为什么会有参考分配：`this.screensToLoad = screensToLoad;`。为什么不`.Clone()`使用类似方法的东西呢？

**[编辑]**

好的...我认为我的问题不是 XNA 或游戏状态管理我准备了一段代码，并解释了我的疑问。

代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace test
{
    public class a
    {
        public int number = 3;
    }

    public class b
    {
        public a tmp;

        public void f(a arg)
        {
            tmp = arg; // (*?*) isn't it dangerous assigning?
        } 
    }

    class Program
    {
        static void Main(string[] args)
        {
            b temp_b = new b();

            {// (*!*) CODE BLOCK COMES HERE:
                a temp_a = new a();
                temp_b.f(temp_a);
                temp_a.number = 4;
            }

            // TROUBLE EXPLANATION:
            // We are outside of code block which I marked with (*!*)
            // Now reference 'temp_a' is inaccessible. 
            // That's why line of code which I marked with (*?*) is dangerous.
            // We saved 'temp_a' which is no longer accessible in 'temp_b' object.
            // 
            // Now computer's memory pointed by reference, which is saved in 'temp_b.tmp' (and was saved in 'temp_a'),
            // can be overriden by code which comes somewhere below this comment (or even in another thread or process).
            //
            // I think the same situation is in XNA GSM's piece of code.
            // The only solution in my opinion is deep copy (AFAIK .Clone() can be implemented as shallow or deep copy).

            Console.WriteLine(temp_b.tmp.number); // result is 4
                                                  // because we copied reference
                                                  // For me it's strange that this line was printed. As I mentioned above
                                                  // memory intended for 'temp_a' could be reused and overwritten.
        }
    }
} 
```

为方便起见，此处使用相同的代码：[ideone.com/is4S3](http://ideone.com/is4S3)。

我在上面的代码中提出了问题和疑问（见评论）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:42:58.597

这完全取决于编写库的人的口味，但这可能是因为该`Load()`方法具有以下签名：

```
public static void Load(ScreenManager screenManager, bool loadingIsSlow,
                        PlayerIndex? controllingPlayer,
                        params GameScreen[] screensToLoad) 
```

注意`screensToLoad`是使用`params`关键字定义的。这意味着您应该这样称呼它：

```
LoadingScreen.Load(manager, false, null, s1, s2, s3, s4, s5); 
```

其中 s1 ... sN 是正在加载的屏幕。

在这个用例中，调用代码实际上并没有对数组的引用，因此对其进行克隆将毫无意义地浪费时间和内存。它的内容从你下面被改变的可能性很小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:27:19.957

对screensToLoad 进行浅拷贝是有意义的（仅复制数组），但正如在[this other answer](https://stackoverflow.com/a/10446418/221933)中指出的那样，不这样做通常不会造成麻烦。

制作深拷贝是错误的。屏幕是有状态的对象，如果您复制它们，用户将无法获得他们通常期望的效果。例如，在调用后注册到原始屏幕的所有处理程序`Load`都将注册到“死”屏幕，因为它们`ScreenManager`将持有副本，而不是原始屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:41:54.600

创建一个屏幕对象以由屏幕管理器管理...

克隆没有意义，因为原始屏幕将变得无用...

屏幕管理器最好是一个工厂，按类型创建屏幕并返回一个 id 或要使用自定义参数初始化的屏幕......

但我认为这段代码来自一个示例来学习，不应该期望有一个复杂的代码......

# sql - 将一个表更新为另一个 sql

> ID：10435997
> 
> 赞同：0
> 
> 时间：2012-05-03T16:58:44.993
> 
> 标签：sql, sql-server-2008

好的..我确定我有一个大脑放屁的时刻..但由于某种原因我无法让这个更新工作。我有 2 个表，我非常想将信息从 8 列复制到另一个表的 8 列。..这是我到目前为止所拥有的

```
update a
set a.denialcharge_cost = b.denial_cost
    , a.epd_cost = b.early_default_payment
    , a.expeditecharge_cost = b.expeditecharge
    , a.duediligence_cost = b.duediligence
    , a.deskreview_cost = b.deskreview
    , a.servicing_cost = b.servicingcharge
    , a.mers_cost = b.merscharge
    , a.qcplans_cost = b.qcplans
from orderheader a 
inner join clients b
on a.prnt_id = b.id 
```

我得到了错误

```
Msg 512, Level 16, State 1, Procedure UpdateOrderHeader, Line 13
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.
The statement has been terminated. 
```

我在客户端中有 x 个客户..在 orderheader 中有 y 个订单..每个订单可以有 1 个客户..每个客户可以有多个订单...orderheader 中的 prnt_id 在客户表中具有 id....任何帮助将不胜感激...我正在尝试将 denial_cost、early_default_payment、expeditecharge、duediligence、deskreview、servicescharge、merscharge、qcplans 从客户复制到 orderheader

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:13:07.590

根据对上一个问题的[回答](https://stackoverflow.com/questions/149124/sql-server-2000-subquery-returned-more-than-one-value-on-an-update-statement)以及我们所做的所有其他故障排除，您似乎在某处遇到了触发器。尝试禁用它并运行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:02:55.823

类似的东西应该可以工作（带格式）

```
update orderheader
set denialcharge_cost = b.denial_cost, 
    epd_cost = b.early_default_payment,
    expeditecharge_cost = b.expeditecharge,
    duediligence_cost = b.duediligence,
    deskreview_cost = b.deskreview, 
    servicing_cost = b.servicingcharge,
    mers_cost = b.merscharge, 
    qcplans_cost = b.qcplans
from clients b 
where orderheader.prnt_id = clients.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:07:14.193

根据我对错误的理解，您尝试在某处仅获取一个结果，并且子查询返回的不仅仅是一个字段。

喜欢

select (select * from bb) as count from cc 给出错误

因为子查询从嵌套查询返回多个字段