# StackOverflow 问答 11604000-11604999

# mysql - 特定的 MySQL 表结构

> ID：11604000
> 
> 赞同：2
> 
> 时间：2012-07-22T21:08:50.053
> 
> 标签：mysql, database-design

有人可以就这个问题的正确 SQL 架构给我建议：

我正在创建一个具有动态数量的选项（选项 1、选项 2、选项 3 等）的应用程序。我希望用户能够选择其中一个选项，然后增加与该选项关联的数字。如何实现动态表，例如，我显然无法预先定义 4 个表，并且每个表都是一个选项。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:14:34.110

听起来你在找一张像

```
CREATE TABLE `options` (
    option_id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255),
    occurrences INT UNSIGNED
) ENGINE=InnoDB; 
```

然后，您可以运行如下查询：

```
UPDATE options SET occurrences = occurrences + 1 WHERE option_id = ____; 
```

（根据访问者选择的内容填写 option_id。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:24:11.160

如果您想跟踪哪个用户选择了哪些选项，您可以添加一个用户选项表，并从 VoteyDeciple 中删除出现次数计数器。

```
CREATE TABLE `UserOptions` (
    `uo_user` INT NOT NULL REFERENCES `users`(`user_id`),
    `uo_option` INT NOT NULL  REFERENCES `options`(`option_id`)
); 
```

然后，如果您想计算某个选项的出现次数，您可以使用

```
SELECT count(*) as `occurrences` from UserOptions where uo_option={$option_id}; 
```

# email - 可以设置与 grails 邮件插件中的地址不同的回复地址吗？

> ID：11604007
> 
> 赞同：15
> 
> 时间：2012-07-22T21:09:44.000
> 
> 标签：email, amazon-web-services, grails, amazon-ses

我正在使用 Grails 邮件插件通过 Amazon SES 发送电子邮件。Amazon SES 强制验证“发件人”地址，这意味着域在我的控制之下，这很好，但我发送的大部分邮件都是代表系统中希望任何回复直接发送给他们的客户。鉴于此，我想将回复设置为不同于发件人，这在 Grails 邮件插件中是否可行？

所以电子邮件最终会成为

```
From: noreply@domainThatIControl.com
Reply-To:  customer@customersDomain.com
Subject: ...
Body: ... 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-22T22:08:28.443

是的，只需使用回复

```
sendMail {
  to 'someone@somewhere.com'
  replyTo 'customer@customersDomain.com'
  subject "some mail"
  from 'noreply@domainThatIControl.com'
  body "some body"
} 
```

# c# - KeyStroke 上的 DataGridViewComboBoxColumn 下拉列表

> ID：11604009
> 
> 赞同：1
> 
> 时间：2012-07-22T21:09:57.550
> 
> 标签：c#, winforms

我有一个 DataGridViewComboBoxColumn`DropDownStyle = ComboBoxStyle.Simple`

如何强制下拉菜单在击键时展开？

我试过`((ComboBox)?).DroppedDown = true;`在没有解决方案的情况下放置几个地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:26:49.953

以下代码片段应该可以工作：

```
//If no row/cell selected, select an appropriate row/cell
dataGridView1.Rows[0].Selected = true;
dataGridView1.Rows[0].Cells[0].Selected = true;

//Start edit mode or otherwise EditingControl property will return null
dataGridView1.BeginEdit(true);

var comboBox = dataGridView1.EditingControl as DataGridViewComboBoxEditingControl;

if (comboBox != null)
{
   comboBox.DroppedDown = true;
} 
```

请注意，要使其正常工作，您的组合框中必须有项目，通过绑定或手动输入。

# php - 将 1 行 PHP 代码转换为 VB.NET

> ID：11604010
> 
> 赞同：0
> 
> 时间：2012-07-22T21:09:57.973
> 
> 标签：php, vb.net

我正在尝试确定这一行代码在 php 中的作用，以便我可以将其转换为 VB.NET。

```
Code: $test = ("www.facebook.com" & "VSSLIGHTBOX007"); 
```

当我在 php 中执行以下命令时：

```
echo $test; 
```

这返回：`VSS@A@DBOH #`

当我在 vb.net 中执行以下操作时：

```
test = ("www.facebook.com" And "VSSLIGHTBOX007")

Msgbox(test) 
```

这返回：`ERROR`

本质上，vb.net 代码的结果应该等于 php 代码的结果。

我究竟做错了什么？

我需要尽快解决这个问题。请帮忙谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:12:41.750

PHP手册说它使用ASCII编码将它们按位与在一起。

您必须手动执行此操作。使用`Encoding`该类将每个作为 ASCII 字节，然后按位将它们组合在一起。

# objective-c - 通过自定义 UITabBar 中的选项卡制作动画

> ID：11604012
> 
> 赞同：1
> 
> 时间：2012-07-22T21:10:36.180
> 
> 标签：objective-c, ios5, xcode4, uitabbar

我的应用程序中有一个自定义标签栏。通过不同的标签导航时如何制作动画？这是我的代码

```
UIImage *image = [UIImage imageNamed:@"bgtab.png"];
[self.tabBarController.tabBar setBackgroundImage:image];
self.tabBarController.tabBar.tintColor =[UIColor brownColor];
self.tabBarController.tabBar.selectionIndicatorImage = [UIImage imageNamed:@"selected.png"]; 
```

苹果文档说我们应该编写以下代码，但它不起作用

```
- (void)setItems:(NSArray *)items animated:(BOOL)animated 
```

# java - Ajax 发送的数据包和普通的 http 数据包有什么区别？

> ID：11604013
> 
> 赞同：0
> 
> 时间：2012-07-22T21:10:39.307
> 
> 标签：java, ajax, packet-capture, jpcap

Ajax 发送的数据包和普通数据包之间有什么区别（在属性中`source port`，...）？或者***当我使用 jpcap 捕获数据包时如何区分 Ajax 数据包和其他数据包***？

*Ajax 如何发送数据包*？它是由一个独特的线程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:17:37.137

AJAX 只是一个普通的 HTTP 调用。原则上，与普通浏览器请求相比，AJAX 请求绝对没有什么特别之处。

更直接地说：`http://example.com/some/document.html`在浏览器地址栏中键入和使用 AJAX 读取该文档没有区别。浏览器可能使用完全相同的代码在低级别运行这两个请求。相同的标头、相同的 cookie、相同的端口……

# google-maps - 使用 jQuery 选择器在 Google 地图中选择元素

> ID：11604015
> 
> 赞同：0
> 
> 时间：2012-07-22T21:11:02.313
> 
> 标签：google-maps, google-maps-api-3, infowindow

好的，所以我在 Google 地图中使用 infoBubble 弹出窗口 (http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/)。它类似于 infoWindow，但有一点可定制的。我稍微更改了库并给了气泡一个 ID (#infoBubble)，希望使用 jQuery 来操作它。但似乎我无法选择它。可以使用 jQuery 选择包含地图的 DIV，但不能选择其中的任何元素。谁能帮我这个？

我正在尝试从通常的 $(document).ready(function() {} 中访问 infoBubble div

更新：从 geocodezip 的回复中得知在 infoBubble 中创建的 div 不是 DOM 的一部分后，我添加了一个监听器事件，如下所示：

```
google.maps.event.addListener(infoBubble, "domready", function( { 
    $j('#infoBubble').click(function(){alert('bubble clicked');}); 
}); 
```

现在它正在到达某个地方。这行得通。虽然我遇到了问题，因为有很多 infoBubble 弹出窗口，但如果我遇到一些问题，我会编辑这个问题。截至目前，这有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:53:01.247

在 infoWindow 打开并呈现之前，在 infoBubble 中创建的 div 不是 DOM 的一部分。使用[infoWindow domready 事件](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)来访问它。

# .net - .NET - 重载和覆盖方法中的多态性

> ID：11604019
> 
> 赞同：0
> 
> 时间：2012-07-22T21:12:05.057
> 
> 标签：.net, vb.net

我来自 Java 背景。请看一下下面的代码（示例取自我曾经读过的一本 Java 书籍并将代码转换为 .NET）：

```
Public Class Animal
    Public Overridable Sub Eat()
        MsgBox("Animal Eat no arguement")
    End Sub
End Class

Public Class Horse
    Inherits Animal
    Public Overrides Sub Eat()
        MsgBox("Horse Eat no arguement")
    End Sub
    Public Overloads Sub Eat(ByVal food As String)
        MsgBox("Horse Eat food arguement")
    End Sub
End Class

Public Class Form1

    Private Sub Form2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim a1 As New Animal
        Dim a2 As New Horse
        a1.Eat()
        a2.Eat() 
        a2.Eat("Fruit") 'line 5
    End Sub
End Class 
```

我希望 form_load 的第 5 行会产生编译时错误。在 Java 中，编译器会查看引用并看到 Animal 没有采用 String 的 Eat 方法。为什么 .NET 中没有编译错误？

**更新** 上面的代码有错误。正如回答者指出的那样；a2 是对 Horse 的引用和实例。因此，为什么第 5 行不会导致编译时错误。如果 a2 引用了动物并创建了马的实例，则会出现编译时错误（与 Java 一致）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:14:21.357

`a2` is a reference to a `Horse`. `Horse` has an `Eat` method that takes a `string`. Now if line 5 was referencing `a1`, that would result in a compiler error.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:15:20.397

You are `overload`ing `eat()` with a version that accepts a `string` arg in the `horse` class. That is entirely valid.

An `overload` is a method with the same name but different arguments. Your overloaded `eat(string)` is perfectly valid and works just fine when called on an object and reference of type `horse`.

You could not call it on an object or reference of type `animal`, though.

# vim - vim 中是否有任何默认键可以在当前行之后创建新行并保持正常模式？

> ID：11604020
> 
> 赞同：19
> 
> 时间：2012-07-22T21:12:15.127
> 
> 标签：vim

在编辑代码时，我总是需要这个功能：在当前行之后创建一个新行，将光标移动到一个新行（保存当前缩进！）并保持正常模式。例如（假设 █ 是一个游标）：

```
function a() {
    foon█tion()
} 
```

输入命令后，我需要变成这样：

```
function a() {
    foonction()
    █
} 
```

例如，如果我`<Enter><Esc>`在插入模式下将光标放在行尾时按下，我可以达到相同的效果。该`o`命令的作用也类似，但在我退出插入模式后它会删除缩进。所以我需要一个按键来插入一行。

inb4 nmap：我知道如何映射一个命令来做这样的事情，但我想知道是否有标准的方法来做到这一点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-08T20:09:53.617

你也可以使用[`<C-o> o`组合](http://vim.wikia.com/wiki/Insert_newline_without_entering_insert_mode)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-22T21:21:16.857

没有这样的键，但事实证明我们可以做到这一点 - 无缩进 - 只需四次击键：`:pu_<Enter>`

这是一个[vim 常见](http://vimdoc.sourceforge.net/htmldoc/vimfaq.html)问题，答案是使用 Ex 命令`:put`：

> 12.15。如何在不进入插入模式的情况下在当前行上方/下方插入空行？
> 
> 你可以使用 ":put" ex 命令插入空行。例如，尝试

```
:put =''
:put! ='' 
```

> 有关更多信息，请阅读 :help :put

`:put`将给定寄存器中的文本放在当前行之后，并使您处于正常模式。`:put!`将文本放在当前行上方的一行。

上面的例子是使用`expression`寄存器`=`向`put`命令发送一个空字符串。我们可以通过使用 vim 的*黑洞*寄存器来减少它，`_`: `:put _`。

最后，这可以缩写为：`:pu_<Enter>`和`:pu!_<Enter>`。

另见：`:help registers`。

最后，请注意，这也是 Tim Pope 的*unimpaired*插件的一个功能。

从未受损的自述文件中：

> 有线性映射。`[<Space>`并`]<Space>`在光标行前后添加换行符。`[e`并将`]e`当前行与其上方或下方的行交换。

# java - 关于多线程系统中信息收集和时间测量的建议

> ID：11604022
> 
> 赞同：0
> 
> 时间：2012-07-22T21:12:37.717
> 
> 标签：java, multithreading, logging, open-source, time-measurement

我发现自己陷入了一个非常规的问题。我将用 Java 编写一个组件，该组件将从多线程系统中收集一些信息。我将不胜感激任何可以帮助我进步的信息或建议。以下是一些细节：

-system 包含许多相互交换信息的子系统（例如，一个组件可以运行另一个组件来进行一些记录或计算数据）

- 在系统上执行的每个操作更像是一个命令链，并导致连续运行几个组件，

-系统收到大量请求并且操作没有ID，因此很难跟踪哪个操作属于哪个链（我需要获取链的每个步骤的操作时间）

我必须处理的问题： - 操作中缺少 ID - 最终在子系统之间交换 ID - 代码更改最少（它是一个巨大的系统） - 最终找到解决此类问题的现有开源解决方案（或至少一些一部分）

这是我的组件从单个操作中获得的示例结果：

搜索 nr 60

Component1 45s Component6 2s Component4 32s Component2 4s

其中 45、2、32、4 代表在每个组件中花费的时间

如果有人发现自己解决了类似的问题或在日志记录/信息收集领域有经验，您的建议可以极大地帮助我。

编辑：我在 AspectJ 中创建了组件，它可以测量“围绕”每个方法的时间并将每个子系统的结果收集在一起。主要问题是我无法识别哪个日志属于哪个请求（例如特定的“搜索号 60”或“添加号 5”请求）。所以问题是：是否有任何有效的方法来创建可以通过控制流传输（以及如何传输）而不需要大量源代码更改的请求 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:26:23.080

如果操作在单个 JVM 中，那么您可能能够使用它们的系统哈希码（通过[System.identityHashcode()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)获得来跟踪对象。如果系统是多进程或分布式的，那么您对这种方法不走运。

您也许可以使用[面向方面的编程](http://www.google.co.uk/search?q=aspect%20oriented%20programming%20java)来编织检测代码，而无需更改现有代码。

# c# - 如何根据列表视图中的选定项目更改详细信息

> ID：11604030
> 
> 赞同：0
> 
> 时间：2012-07-22T21:13:26.620
> 
> 标签：c#, wpf, xaml

我有一个包含一些项目的列表视图，列表视图绑定到对象列表。当我从列表视图中选择一个项目时，我想从列表视图中显示一些按钮和 TextBlock，当我单击列表视图中的另一个项目时，我希望显示其他按钮和 TextBlock。我认为这与用户控制有关，因为我知道将所有按钮和 TextBlocks 一个接一个地让它们可见和隐藏并不能很好地解决我的问题。

我怎样才能使这个好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:11:09.963

我相信您在问如何在 WPF 中创建主从视图。如果是这种情况，有很多示例可供您查看和使用，具体取决于您的具体情况。这里只是几个选项：

1.  [MSDN 博客](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/01/19/create-wpf-master-detail-ui-using-data-sources-window-object-datasource.aspx)
2.  [使用 MVVM 的代码项目](http://www.codeproject.com/Articles/332615/WPF-Master-Details-MVVM-Application)
3.  [MSDN 视频](http://msdn.microsoft.com/en-us/vstudio/dd239277.aspx)

# jquery - IE8 页面没有正确加载 CDN jquery 可能吗？

> ID：11604032
> 
> 赞同：0
> 
> 时间：2012-07-22T21:13:28.433
> 
> 标签：jquery, internet-explorer, internet-explorer-8

我遇到的问题是我的产品页面似乎无法在 IE8 中正确加载，但在所有其他主要浏览器中都很好。我将谷歌的 ajax 库用于主要脚本，这会导致我的问题吗？

一个示例页面是： http: [//www.hollinwoodhydroponics.co.uk/lighting-accessories/lumii-600w-kit](http://www.hollinwoodhydroponics.co.uk/lighting-accessories/lumii-600w-kit) （在 Firefox、safari、chrome 中加载很好，只是不是 IE8）

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:59:05.667

这样做的原因是因为您在页面加载时调用了 jQuery 代码，但没有等待页面完成加载。

理论上它不应该在任何浏览器中工作。它在某些浏览器中工作的唯一原因是因为这些浏览器渲染页面的速度足够快，以至于它们在 JS 代码运行之前就完成了。

jquery`.ready()`专门针对这个问题提供了一个函数。您希望在页面加载时运行的页面上的所有设置代码都应包含在`.ready()`函数调用中，如下所示：

```
$(document).ready(function() {
    //your code here.....
}); 
```

这将防止它被过早调用，并使其在所有浏览器中都能正常工作。

# php - PHP 表溢出

> ID：11604038
> 
> 赞同：0
> 
> 时间：2012-07-22T21:15:14.477
> 
> 标签：php, html, css

我正在建立一个系统，您可以在其中跟踪您的任务。我现在遇到了一个问题，我希望放置此表的 DIV 会导致溢出......好吧，不是问题 - 除非它不会水平溢出......请有人可以帮助我

请有人能帮我把它放进去……或者帮我把这张桌子放在一张桌子上，以适应 1100 x 545 像素的区域……

我已经将间距设置为好看的东西......让它使溢出水平

```
$UArr = array("u1" => "Introduction to Marketing ", 
             "u2" => "Maintenance Unit ", 
             "u3" => "Starting a biz", 
            "u4" => "Web Design", 
            "u5" => "Webserver / PHP", 
            "u6" => "Modeling / Multimedia Design" ,
             "u7" => "CISCO 1 " , 
             "u8" => "CISCO 2 " , 
             "u9" => "C&G Marketing"); ///unit array

$AArr = array("a1" => "Assignment 1", "a2" => "Assignment 2", "a3" => "Assignment 3", "a4" => "Assignment 4"); //assigment array
$TArr = array("t1" => "Task 1", "t2" => "Task 2", "t3" => "Task 3", "t4" => "Task 4"); //task array

$Connection = mysql_connect($host,$username, $password);
mysql_select_db("dbname");

$Result = mysql_query("SELECT * FROM `tracker` WHERE `CollegeID`='collegeid' ");
if(mysql_num_rows($Result) == 1) {
    while($Data = mysql_fetch_array($Result)){
        $i = 0;
        $Assignment = "";
        $Unit = "";
        $Task = "";
        echo "<table style=\"float:left;\" width=\"200\" border=\"0\" overflow:scroll;>";
        foreach($Data as $Item => $Value) {
            if(!is_numeric($Item) && $Item !== "CollegeID") {
                if($i == 0) {
                    $Unit = substr($Item, 0, 2);
                    $Assignment = substr($Item, 2, 2);
                    $Task = substr($Item, 4, 2);
                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$UArr[$Unit]."</p></td></tr>";
                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$AArr[substr($Item, 2, 2)]."</p></td></tr>";
                    echo "<tr><td width=\"10\">".$TArr[$Task]."</td><td width=\"10\">".DropDown($Item, $Value)."</td></tr>";
                }
                if($Unit !== substr($Item, 0, 2)) {
                    echo "</tr>";
                    echo "</tr>";
                    echo "<table style=\"float:left;\" width=\"200\" border=\"0\">";
                    $Unit = substr($Item, 0, 2);
                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$UArr[substr($Item, 0, 2)]."</p></td></tr>";
                }
                if($Assignment !== substr($Item, 2, 2)) {
                    $Assignment = substr($Item, 2, 2);
                    echo "<tr style=\"text-align: center\"><td colspan=\"4\"><p>".$AArr[substr($Item, 2, 2)]."</p></td></tr>";
                }
                if($Task !== substr($Item, 4, 2)) {
                    $Task = substr($Item, 4, 2);
                    echo "<tr><td width=\"10\">".$TArr[$Task]."</td><td width=\"50\">".DropDown($Item, $Value)."</td></tr>";
                }
                $i++;
            }

        }
        echo "</table>"; 
```

![这有点像它的样子，除了间距更好，4个单位溢出](../Images/12c32618afe5c1ab148a4d3b56abefc1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:23:56.010

要使其水平溢出，只需将其放入`<div>`具有精确宽度值的另一个中（一张桌子的宽度 * 你有多少张桌子）。

在这个例子中使用 9 个表格*200px = 1800px

我还建议在样式或 css 类中使用表格宽度，例如：

```
<table style="float:left;width:200px;border-width:0;overflow:scroll;"> 
```

你的代码很乱，需要重新排列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:39:22.410

```
 Not an big issue with the scrolling. what i suggest to you that take a div and put a desired height width you want and apply the css as

.divName 
{
height: //specify
widht: //specify
overflow:scroll;  
overflow-x:scroll; 
overflow-y:hidden;
} 
```

并将结果放入此 div

# python - Python TastyPie - 自定义管理器方法作为过滤器？

> ID：11604045
> 
> 赞同：3
> 
> 时间：2012-07-22T21:15:41.497
> 
> 标签：python, django, tastypie, geodjango

我有一个 GeoDjango 项目，它有一个像这样的管理器模型；

```
class AdvertManager(models.GeoManager):

    def within_box(self, x0, y0, x1, y1):
        geometry = Polygon.from_bbox((x0, y0, x1, y1,))
        return self.filter(point__within=geometry) 
```

我试图让我的资源模型（AdvertResource）通过 GET 参数公开 inside_box 函数，例如；

```
http://127.0.0.1:8000/api/v1/advert/?format=json&box=51.623349,-3.25362,51.514195,-3.4754133 
```

我开始`build_filters`像这样在资源模型上写一个方法；

```
def build_filters(self, filters=None):
        if not filters:
            filters = {}
        orm_filters = super(AdvertResource, self).build_filters(filters)

        if 'box' in filters:
            points = [float(p.strip()) for p in filters['box'].split(',')]
            orm_filters = {'box': Advert.objects.within_box(*points).all()}

        return orm_filters 
```

但这会引发错误“无法将关键字'box'解析为字段......”。

是否可以将自定义管理器中的方法公开给 api url？

**编辑 - 我现在已经用以下解决方案解决了这个问题。**

```
class AdvertResource(ModelResource):

    longitude = fields.FloatField(attribute='longitude', default=0.0)
    latitude = fields.FloatField(attribute='latitude', default=0.0)
    author = fields.ForeignKey(UserResource, 'author')

    def build_filters(self, filters=None):
        """
        Build additional filters
        """
        if not filters:
            filters = {}
        orm_filters = super(AdvertResource, self).build_filters(filters)

        if 'point__within_box' in filters:
            points = filters['point__within_box']
            points = [float(p.strip()) for p in points.split(',')]
            orm_filters['within_box'] = points

        return orm_filters

    def apply_filters(self, request, applicable_filters):
        """
        Apply the filters
        """
        if 'within_box' in applicable_filters:
            area = applicable_filters.pop('within_box')
            poly = Polygon.from_bbox(area)
            applicable_filters['point__within'] = poly
        return super(AdvertResource, self).apply_filters(request, 
                                                        applicable_filters) 
```

现在这意味着请求`http://127.0.0.1:8000/api/v1/advert/?format=json&point__within_box=51.623349,-3.25362,51.514195,-3.4754133`现在过滤边界框中的所有结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:28:10.867

上面的代码有几个问题。

首先，是的，您可以将任何自定义管理器暴露给任何东西，无论您是否使用它。仅当您将其默认管理器替换为您自己的版本时，您上面定义的 AdvertManager 才能通过 Advert.objects 访问。

其次，您希望在 AdvertResource 上公开美味派过滤的方式与过滤的实际工作方式是正交的。

所有过滤器都以实际的形式应用为 ORM 过滤器`<field_name>__<filter_name>=<value_or_values>`。由于在您的示例中，您使用的是`box=<number>,<number>,...,<number>`sweetpie 将其爆炸`box__exact=...`并尝试`box`在 AdvertResource 中查找字段并按预期失败。

如果您的广告有一个名为的字段，`location`您可以添加`withinbox`作为该字段的过滤器并过滤：`location__withinbox=<values>`。

如果您想保留原来的方法，您必须自己从 request.GET 字典中解析框过滤器，然后将它们传递给您自己的覆盖版本`obj_get`和`obj_get_list`AdvertResource 中。

最后，在扩展时，`build_filters`您只是在 Tastypie 过滤器和 ORM 过滤器之间进行映射。在您的示例中，您将对象作为过滤器返回；而是简单地将其定义为：

```
{ 'withinbox' : 'point__within' } 
```

并将值列表转换为 inside，`Polygon`然后`apply_filters`再将其传递给实际的过滤器方法。

# sql - SQL 查询 - GROUP BY , PARTITION BY

> ID：11604047
> 
> 赞同：1
> 
> 时间：2012-07-22T21:16:02.783
> 
> 标签：sql

这是我的第一篇文章，我是 SQL 新手

我有一张像

```
H     Amount    Count      ID 

h1      2         1         x
h2      3         2         x
h3      5         3         x
h1      3         3         x
h1      1         5         y
h2      3         2         x
h3      1         1         x
h3      2         3         y
h2      5         5         y 
```

我希望每个 H 组的 SUM(Amount*Count) 基于该 H 组中的 id / Total SUM(Amount*Count)

IE

```
H     value       ID

h1     11/16       x                     value =  (2*1+3*3)/2*1+3*3+1*5 
h1      5/16       y                     value =   1*5/ 2*1+3*3+1*5 
h2      12/37      x 
h2      25/37      y 
h3      16/22      x 
h3       6/22      y 
```

我的目标是按 H 分组，然后在每个组上我必须做 - Sum(average*count) Over(partition by ID) / Sum(average*count)

但我无法编写这样的查询，你们能帮帮我吗？对格式表示抱歉谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:33:47.487

尝试这个：

```
SELECT t2.h, t1.value1/t2.value2, t1.id  
FROM 
     (SELECT sum(value) as value1, id  from table
      group by id) as t1, 
     (SELECT sum(value) as value2, h  from table
      group by h) as t2
WHERE t1.h = t2.h 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:37:15.007

简单的答案是使用这样的内部查询：

```
SELECT SUM(Amount * Count), (SELECT SUM(Amount * Count) FROM table AS t2 WHERE t2.H = t1.H)
FROM table AS t1
GROUP BY H, ID 
```

这实质上是指同一个表作为两个不同`t1`的`t2`查询。

但是，您使用的特定数据库管理系统（MySQL、Microsoft SQL Server、sqlite 等）可能具有处理此类事情的内置函数。您应该查看您的 DBMS 提供的内容（或在此处使用特定平台标记您的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T21:40:41.073

你想要做的是获得被除数（每组的金额*计数的总和）并在另一个子选择中`h -> id`加入除数（每组的金额*计数的总和）：`h`

```
SELECT 
    a.h, a.id, a.dividend / b.divisor AS value
FROM
(
    SELECT h, id, SUM(amount*count) AS dividend
    FROM tbl
    GROUP BY h, id
) a 
INNER JOIN
(
    SELECT h, SUM(amount*count) AS divisor
    FROM tbl
    GROUP BY h
) b ON a.h = b.h 
```

# jquery - 如果 jquery 中的类名更改，则删除函数

> ID：11604048
> 
> 赞同：1
> 
> 时间：2012-07-22T21:16:08.213
> 
> 标签：jquery, function, addclass, removeclass

我会尝试向我解释，但直到我都感到困惑。
我正在开发一个每周日历，用户在其中单击一个单元格，显示一个确认操作的提示，然后重新绘制单元格。让我们更详细地说：

html标记：

```
<td> <a class="free"></a> </td> 
```

JS 代码如下所示（伪代码）：

```
$(".free").click(function() {
    alert('engaging');
    $(this).text("taken");
    $(this).removeClass("free").addClass("taken");
}) 
```

这里出了什么问题？好吧，一旦元素类被替换为“taken”而不是“free”，如果用户再次单击此链接，则会再次显示警报，但它不应该！

我认为[jsfiddle 中的这个例子说明了](http://jsfiddle.net/Tz3Qd/)我的场景

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T21:22:45.523

您的原始语法将处理程序绑定到元素本身，并且处理程序只绑定一次。对元素类的任何后续更改都不会影响处理程序。请改用委托事件。[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).on('click','.free', function() {

    alert('engaging');

    $(this).text("taken");
    $(this).removeClass("free").addClass("taken");
}); 
```

[演示](http://jsfiddle.net/ttASr/)

如果您有多个具有 class 的元素`.free`，并且您可以通过多次单击动态添加或删除此类，则使用这种类型的处理程序将允许您仅在当前具有 class 的元素上捕获“单击”事件`.free`。另请注意，替代方法 using`.off`意味着即使您`.free`再次添加到元素，处理程序也不会触发 - 任何其他绑定到该元素的“单击”处理程序也不会触发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T21:23:28.643

单击处理程序仍将附加到元素，即使您动态更改它的类，您也必须使用[off()](http://api.jquery.com/off/)删除处理程序。

```
$(".free").on('click', function(){
     alert('engaging');
     $(this).text("reservada").removeClass("free").addClass("taken").off('click');
}); 
```

[小提琴](http://jsfiddle.net/Tz3Qd/4/)

# visual-studio-2012 - Visual Studio 2012 无法识别 .js 文件中的 Javascript

> ID：11604049
> 
> 赞同：0
> 
> 时间：2012-07-22T21:16:14.860
> 
> 标签：visual-studio-2012

我在 Visual Studio 2012 的 MVC4 项目中有许多我自己的包含 javascript 代码的 .js 文件。智能感知在这些 .js 文件中不起作用，并且错误检查显示虚假错误，例如“字符文字中的字符太多”和“命名空间不能直接包含字段等成员”。

我认为正在发生的事情是它没有将代码识别为 javascript（包括由 mvc4 模板自动添加的 jquery 文件）。文件类型 .js 可能与 Javascript 无关。我已经尝试过工具 -> 选项 -> 文本编辑器 -> 文件扩展名并添加了 js 作为脚本编辑器，但这没有用。

如果我在 cshtml 页面中放置一个脚本块，它可以完美地识别我的 Javascript 代码，但我需要将我的 js 分成单独的文件。

任何帮助将非常感激 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:18:43.853

听起来您将其设置`Build Action`为`Compile`，将其视为 C#。
改为`Content`改为。

# c++ - 在 C++ 中打开位图

> ID：11604050
> 
> 赞同：1
> 
> 时间：2012-07-22T21:16:24.940
> 
> 标签：c++

一开始对我的英语感到抱歉。

我的目的是从位图中加载 rgb 数组。但是图像的大小和高度 * 宽度 * 3 的乘积之间存在差异。当我阅读 bmp 格式时，我注意到当 widht % 4 为 != 0 时，我必须在宽度上添加一些数字以达到平衡。（width%4==1 我必须加 3，width%4==2 我必须加 2 等等）图像的大小是 1 442 454 字节，高度是 601，宽度是 801。804 * 600 * 3 == 1 441 800，它大于图像的大小。801 * 600 * 3 == 1441800 它必须小于图像的大小（即使我添加了 54 位标题）。我必须做什么才能正确阅读？（标题已正确加载）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T21:24:04.717

请注意，每一行都填充为 4*个字节*的倍数（不是*像素*）。

因此，如果每行有 801 个像素并且每个像素是 3 个字节（RGB），那么每行有 801*3=2403 个字节，这将用一个额外的字节填充到 2404 个字节。因此位图大小将是 601*2404=1444804 字节。

但是，如果您的行宽只有 800 像素，那么每行有 800*3=2440 字节，这已经是 4 字节的倍数，因此不会有额外的填充字节，位图大小将为 601*2400=1442400 字节。对于 54 字节的标头，这给出了 1442454 字节。

结论：您的图像尺寸实际上是 801 x 600，而不是 801 x 601。

# javascript - jQuery - 鼠标输入闪烁图像

> ID：11604052
> 
> 赞同：0
> 
> 时间：2012-07-22T21:16:29.493
> 
> 标签：javascript, jquery, css

我正在尝试在 div 上进行简单的悬停并显示/隐藏图像。

这是小提琴：http: [//jsfiddle.net/s2WWM/](http://jsfiddle.net/s2WWM/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:18:58.227

使用`mouseenter`and`mouseleave`代替`mouseover`and`mouseout`

[http://jsfiddle.net/s2WWM/2/](http://jsfiddle.net/s2WWM/2/)

还将它绑定在容器元素上。

这些事件之间的区别在于`mouseenter`，`mouseleave`仅当您完全离开元素时才计数，而当您离开元素时`mouseover`计数`mouseout`，无论您是否仍在元素内。

例如，当您将外部元素留给内部元素时，那是 a`mouseout`但不是 a `mouseleave`，因为您仍在外部元素内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:22:25.793

问题是，当您将鼠标悬停在 .fullscreen 上时，您将不再悬停在 #canvas 上，因此请像这样更改它：

```
$(document).ready(function () {

    $("#canvas, .fullscreen").mouseover(function() {
        console.log("Show...");
    $(".fullscreen").show();
  }).mouseout(function(){
    $(".fullscreen").hide();
  });

});​ 
```

# ruby-on-rails - Rails 活动记录过滤或命名范围困难

> ID：11604059
> 
> 赞同：1
> 
> 时间：2012-07-22T21:18:04.237
> 
> 标签：ruby-on-rails, ruby, activerecord, filtering, named-scope

我定义了以下一组类和关系，我希望能够构建所有事件的集合，其中至少包含一个特定用户已被标记的故事。

即在我的事件控制器中，我希望能够调用类似 Event.events_user_is_in(@user) 的东西，它返回包含用户已被标记的故事的每个事件。

```
class Event < ActiveRecord::Base
  has_many :stories
end

class Story < ActiveRecord::Base
  belongs_to :event
  has_many: tags
end

class Tag< ActiveRecord::Base
  belongs_to :story
  belongs_to :user
end

class User< ActiveRecord::Base
  has_many :tags
end 
```

我一直在阅读有关范围界定的内容，并成功地在 Story 上生成了范围界定，它只返回用户被标记的故事，但我看不到如何为事件执行此操作。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:45:50.260

如果您愿意，可以使用方法或范围：

```
class Event < ActiveRecord::Base

  scope :events_user_is_in, lambda {|user|
    joins(:stories => :tags).where("tags.user_id = ?", user.id).uniq
  }

end 
```

# qt - QGLWidget 上的半透明 QWidget：奇怪的结果

> ID：11604062
> 
> 赞同：8
> 
> 时间：2012-07-22T21:18:46.537
> 
> 标签：qt, opengl, overlay, transparency

我有一个全尺寸的 QGLWidget，它使用 QPainter 绘制应用程序背景（将来可能会更改为原生 openGL 命令）。

在这个 QGLWidget 之上，我使用 QWidgets（非 GL）作为用户界面元素。例如，它们是 QLineEdits 和 QPushButtons。我将它们放入一个自定义绘制的 QWidget 中，该 QWidget 使用半透明背景绘制。QLineEdit 和 QPushButton 的paintEvents 也被覆盖并使用半透明背景。

整个 UI**应该如下所示**（这是我禁用 OpenGL 并使用 QWidget 而不是 QGLWidget 作为背景的屏幕截图。注意半透明的顶部栏也绘制了阴影（在其自己的区域内））：

![截屏](../Images/1176ff6c5e79bc38e915a61e21cd639c.png)

当 QLineEdit 具有焦点时，它应该具有更高的不透明度，但仍不是完全不透明：

![截屏](../Images/d9c4747308e2e55fe4cc977e12dffaa2.png)

所以现在，启用 OpenGL（背景是 QGLWidget），上面的半透明小部件不会在背景上绘制，而是在（似乎是）未初始化的数据上绘制。通过顶部栏的图像有时是整个窗口本身，有时是我桌面上当前的其他窗口。

**这目前看起来如下**（在此屏幕截图中，绘制半透明绘画操作的数据似乎是小部件本身的图像，具有偏移量。）：

![截屏](../Images/f8d7036d0da2adf6baea1e0c78d39c6d.png)

当我将文本写入行编辑时（此处：“这是一些以前存在的文本！”），将其删除并将焦点设置回背景小部件（因此出现放大镜图标和占位符文本），之前涂漆的东西仍然会发光（请注意，可见边框不应*再*可见，但仍会发光）：

![截屏](../Images/e62948259bb3f0e939e8624fb3c03723.png)

所以问题是：半透明小部件不是绘制在底层小部件之上，而是绘制在*旧结果*之上，最初类似于“未初始化的内存”。

**为什么会这样？我该如何解决这个问题？**

在回答之前你应该知道的事情：

*   背景场景是在屏幕外渲染的图块的组合。因此可以非常快速地绘制它，并且为覆盖层的每一个微小变化重新绘制背景都没有问题。
*   顶部栏是一个自定义 QWidget，其中包含两个小部件（按钮和行编辑）的手动绘制和排列。
*   这两个小部件覆盖了paintEvent，仅在它们具有焦点时才绘制自己的（半透明）背景，并且不使用Qt已经提供的框架。所以第二个屏幕截图中的白色边框是在我的自定义paintEvent中绘制的。
*   我希望背景和覆盖小部件的组成可以单独实现。背景是一个`AbstractMapView`有一些具体的地图视图类。整个窗口是一个`AbstractView`（也有多个具体视​​图），它包含一个具体的地图视图和覆盖小部件，它们以自己决定的方式组成。因此，我不希望覆盖小部件的逻辑成为底层地图视图的一部分。（我希望你明白这一点，因为它有点复杂。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T02:13:11.060

这听起来像是 GL 内容（即您的背景，也就是 QGLWidget）不在 Qt 上下文中的问题。虽然我不是使用 Qt 进行 GL 绘画的专家，但您可能希望查看有关 GL 绘画和 QLabel 的讨论，以获得一些方向/潜在的提示。

[http://www.qtcentre.org/threads/40335-QLabel-on-top-of-a-QGLWidget-background-issue](http://www.qtcentre.org/threads/40335-QLabel-on-top-of-a-QGLWidget-background-issue)

简而言之，我们在办公室使用 OpenGL 绘画和地图的屏幕外渲染，确保 Qt 了解像素非常重要，这样您的前景小部件可以将半透明应用于其背景。

我们使用的特定产品还可以在瓦片中渲染地图，并支持在缓冲区中提供 GL 输出（即，它称为快照并以位图的形式提供），此时我们使用常规 QWidget 的paintEvent 来绘制缓冲区，以便绘制的像素在 Qt 上下文中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-08T07:44:12.633

您可以使用 Qt::SplashScreen 标志定义一个 Qframe 作为搜索框并设置其不透明度。将您的小部件（例如搜索文本框）放入其中，并将其放置在应该出现在主窗口上的位置。当主窗口被移动或调整大小以覆盖其 moveEvent 时，重新定位它也是一个好主意。

# php - 针对 CSRF 的保护，无需任何形式的隐藏输入

> ID：11604065
> 
> 赞同：3
> 
> 时间：2012-07-22T21:19:19.617
> 
> 标签：php, html, security, csrf

我想知道是否可以将 crsf 令牌`<head>`放在元标记或其他东西上，然后在我的服务器上访问它。这将真正简化流程并使其更加透明。我只是不知道怎么做。我真的希望在不涉及 javascript 的情况下做到这一点。

我认为rails实现了类似的东西......也许用etags？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:26:51.223

[CSRF 预防备忘单](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)上列出了许多方法。不需要在每个表单上都有隐藏字段的方法是[检查 referer](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Checking_Referer_Header)。请记住，缺少引用者应被视为 CSRF 攻击，并且可能会导致某些隐私浏览器插件出现问题（这非常罕见）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T21:28:05.727

CSRF 令牌的基本目的是在每次提交表单时将其传递回服务器。您将唯一令牌传递到页面，当提交该页面上的表单时，令牌会随之返回。

如果您未在表单中包含令牌（或使用 JavaScript 以编程方式将令牌添加到当前位于页面其他位置的表单），则不会将其发送回服务器。

也许更好的问题是：你真正想要完成的是什么？换句话说，你为什么不想在表单中包含一个 CSRF 令牌？你想在你的场景中克服什么缺点？

# javascript - 提交表单后如何编辑我的链接

> ID：11604066
> 
> 赞同：1
> 
> 时间：2012-07-22T21:19:29.330
> 
> 标签：javascript, jquery, json

我有一个包含两个字段名称和姓氏的表格。写下这些字段，然后我点击提交而不采取任何行动。在我的网站之前`http://www.xn--nonlos-8wa.html` 表格是

```
 <form method="GET">
        <input type=”text” nome=”id” value=”qui il tuo testo”&gt;
<input type=”text” cognome=”id” value=”qui il tuo testo”&gt;
        <input type= "submit" name= "submit" value= "Invia" >
        </form> 
```

提交后的站点是：

```
http://www.xn--nonlos-8wa.html/?name=pollo&cognome=che+sono&nome=a&cognome=b&nome=c&cognome=d 
```

这是我发送了三个表单的站点，但现在我想更改我发送的第二个表单的名称。除非程序的数据与我读取的站点和受变量有关。我编辑了字段（变量），但因为我要在网站上重写。从 name=a 和 surname=b 表示该站点将成为新参数。

```
http://www.xn--nonlos-8wa.html/?nome=pollo&cognome=che+sono&nome=565655&cognome=8765634&nome=c&cognome=d. 
```

然后不使用表单的提交......如何？？？如何通过仅更改感兴趣的值来编辑站点？

在我提交的网站之前是

```
http://www.xn--nonlos-8wa.html/?name=pollo&cognome=che+sono&nome=a&cognome=b&nome=c&cognome=d 
```

使用脚本 Javascrits 后（可能吗？？）是 `http://www.xn--nonlos-8wa.html/?nome=pollo&cognome=che+sono&nome=565655&cognome=8765634&nome=c&cognome=d`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:11:58.980

您的问题可能存在翻译问题，但我想您是在问如何设置从表单传递的参数的名称？

最简单的方法就是更改输入的名称：

```
<input type=”text” name=”surname” value=”qui il tuo testo”&gt; 
```

但是，如果由于某种原因无法编辑 html，您也可以使用 jQuery 发送请求并在 json 对象中设置参数：

```
$.ajax({
    type: "GET",
    url: "http://www.xn--nonlos-8wa.html/",
    data: {name: "a", surname:"b"}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:24:42.283

您必须明确定义表单提交到的 URL，否则表单操作将变为 URL 中的任何内容，并将复制您的查询字符串变量。

```
<form method="GET" action="testo.html">
    ...
</form> 
```

然后它将转到 testo.html?nome=pollo&cognome=che+sono。

当然，您可以将“testo.html”更改为您的测试实际所在的任何页面。

# r - ggplot2、geom_bar 和 position="dodge" 的问题：stacked 具有正确的 y 值，dodged 没有

> ID：11604070
> 
> 赞同：20
> 
> 时间：2012-07-22T21:20:12.630
> 
> 标签：r, plot, ggplot2

我有相当的时间理解`geom_bar()`和`position="dodge"`。我试图制作一些条形图来说明两组。最初，数据来自两个单独的数据帧。根据[这个问题](https://stackoverflow.com/questions/8901330/multiple-histograms-with-ggplot2-position)，我将我的数据放在长格式中。我的例子：

```
test <- data.frame(names=rep(c("A","B","C"), 5), values=1:15)
test2 <- data.frame(names=c("A","B","C"), values=5:7)

df <- data.frame(names=c(paste(test$names), paste(test2$names)), num=c(rep(1, 
nrow(test)), rep(2, nrow(test2))), values=c(test$values, test2$values)) 
```

我使用该示例是因为它类似于支出与预算示例。每个因素级别的支出有很多行，`names`而预算只有一个（每个类别一个预算金额）。

对于堆积条形图，这很好用：

```
ggplot(df, aes(x=factor(names), y=values, fill=factor(num))) +
geom_bar(stat="identity") 
```

![堆积图](../Images/44e43492049736a6b1459f036c3135ec.png)

特别要注意 y 值的最大值。它们是来自顶部蓝色显示`test`的值的数据总和。`test2`

根据我读过的其他问题，我只需要添加`position="dodge"`以使其成为并排图与堆叠图：

```
ggplot(df, aes(x=factor(names), y=values, fill=factor(num))) + 
geom_bar(stat="identity", position="dodge") 
```

![躲过了](../Images/a3ac3d497d041bca4f4376339f4cbeda.png)

它看起来不错，但请注意新的最大值 y 值。似乎它只是从每个名称因子级别中`test`获取 y 值的最大值。它不再对它们求和。

根据其他一些问题（比如[这个](https://stackoverflow.com/questions/3773969/ggplot-position-dodge-question)和[这个](https://stackoverflow.com/questions/11005782/ggplot2-geom-bar-position-dodge-does-not-dodge)，我也尝试添加`group=`选项但没有成功（产生与上面相同的躲避图）：

```
ggplot(df, aes(x=factor(names), y=values, fill=factor(num), group=factor(num))) +
geom_bar(stat="identity", position="dodge") 
```

我不明白为什么堆叠的效果很好，而躲避的不只是将它们并排而不是放在上面。

* * *

**ETA：**我[最近](https://groups.google.com/forum/?fromgroups#!topic/ggplot2/tdiL-Gq3ThQ)在 ggplot 谷歌组上发现了一个关于此的问题，并建议添加`alpha=0.5`以查看发生了什么。并不是 ggplot 从每个分组中获取最大值；它实际上是在每个值的顶部绘制条形图。

似乎在使用时`position="dodge"`，ggplot 预计每个 x 只需要一个 y。我联系了 ggplot 开发人员 Winston Chang 以确认并询问是否可以更改，因为我没有看到优势。

似乎`stat="identity"`应该告诉 ggplot 计算`y=val`内部传递的值，而不是在没有传递任何 y 值`aes()`的情况下发生的单个计数。`stat="identity"`

目前，解决方法似乎是（对于上面的原始 df）进行聚合，因此每个 x 只有一个 y：

```
df2 <- aggregate(df$values, by=list(df$names, df$num), FUN=sum)
p <- ggplot(df2, aes(x=Group.1, y=x, fill=factor(Group.2)))
p <- p + geom_bar(stat="identity", position="dodge")
p 
```

![正确的](../Images/8cd5755830f43f9206db7e4cb59cbdde.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-23T21:24:31.203

我认为问题在于您想在组的值*内*堆叠，`num`并*在*. `num`查看向条形添加轮廓时会发生什么可能会有所帮助。

```
library(ggplot2)
set.seed(123)
df <- data.frame(
  id     = 1:18,
  names  = rep(LETTERS[1:3], 6),
  num    = c(rep(1, 15), rep(2, 3)),
  values = sample(1:10, 18, replace=TRUE)
) 
```

默认情况下，有很多条堆叠在一起——除非你有一个轮廓，否则你只是看不到它们是分开的：

```
# Stacked bars
ggplot(df, aes(x=factor(names), y=values, fill=factor(num))) + 
  geom_bar(stat="identity", colour="black") 
```

![堆叠条](../Images/99f525be6ef71252b544ed9f77f09817.png)

如果你躲避，你会得到在 的值之间躲避的条形`num`，但在每个 的值内可能有多个条形`num`：

```
# Dodged on 'num', but some overplotted bars
ggplot(df, aes(x=factor(names), y=values, fill=factor(num))) + 
  geom_bar(stat="identity", colour="black", position="dodge", alpha=0.1) 
```

![躲过 num](../Images/468056777c9c2ee97aa698f0d16c11bd.png)

如果您还添加`id`为分组变量，它会避开所有这些：

```
# Dodging with unique 'id' as the grouping var
ggplot(df, aes(x=factor(names), y=values, fill=factor(num), group=factor(id))) + 
  geom_bar(stat="identity", colour="black", position="dodge", alpha=0.1) 
```

![躲避所有酒吧](../Images/9868b0724a347831379027dad7c8dae0.png)

我认为你想要的是躲避和堆叠，但你不能两者都做。所以最好的办法是自己总结数据。

```
library(plyr)
df2 <- ddply(df, c("names", "num"), summarise, values = sum(values))

ggplot(df2, aes(x=factor(names), y=values, fill=factor(num))) + 
  geom_bar(stat="identity", colour="black", position="dodge") 
```

![事前总结](../Images/048859094b202e919f3f31d59af5e852.png)

# c# - 从同一个表中的多个列中选择行 SQL Server CE WebMatrix

> ID：11604071
> 
> 赞同：0
> 
> 时间：2012-07-22T21:20:15.300
> 
> 标签：c#, database, razor, webmatrix

我正在尝试创建表单，用户可以在其中输入最多 3 个表单的文本。每个表单都对应于 SQL Server CE 数据库表中的列。根据表单中的文本输入，页面将显示包含所有指定文本的所有行（空值被视为通配符）。

对于 1 种形式，我可以正常工作。表单文本被分配为变量的值并在页面之间传递没有问题。我只是不确定如何在查询中包含其他 2 列。

这是带有表单的输入页面的代码：

```
@{ 
var formValue1 = Request.Form["FN"];
var formValue2 = Request.Form["LN"];
var formValue3 = Request.Form["CPNY"];  
if (IsPost) 
 { 
       Response.Redirect("DisplaySearch.cshtml?firstname=" + formValue1);
       Response.Redirect("DisplaySearch.cshtml?lastname=" + formValue2);       
 } 
 }

<form action="" method="post">
First Name:<input type="text" ID="FN" name="FN" value=""></input><br>
Last Name:<input type="text" ID="LN" name="LN"></input><br>
Company:<input type="text" ID="CPNY" name="CPNY"></input>
<br>
<input type="submit" value="Search"></input></form> 
```

这是显示页面的代码：

```
@using WebMatrix.Data 

@{
var Keyword1 = Request.QueryString["firstname"];    //Retrieves passed variable from    the database search page for First Names
var Keyword2 = Request.QueryString["lastname"];    //Retrieves passed variable from the database search page for First Names
var Keyword3 = Request.QueryString["company"];    //Retrieves passed variable from the database search page for First Names
var db= Database.Open("Orientation"); 
var sqlQ = "SELECT * FROM Orientation WHERE FirstName LIKE @0";
var data = db.Query(sqlQ,  "%" + Keyword1 + "%");  
 }

<div class="content-box-main">

<ol>
@foreach(var row in data){
<li>
@row.LastName, @row.FirstName, @row.MiddleName, @row.Email, @row.Company, @row.Date
</li>
}
</ol><br>

</div> 
```

非常感谢您的帮助！我是一个创建 Web 应用程序的菜鸟，直到 2 周前我唯一的编程经验是 Office 中奇怪的 VBA 宏。我还要再次提及，我使用的是 WebMatrix 和 SQL Server CE。我知道 SQL Server CE 存在一些限制，尽管我喜欢作为菜鸟的易用性。如果有人对使用不同的 SQL Server 程序有任何建议，我愿意听取他们的意见。

谢谢！

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:25:39.577

```
 Response.Redirect("DisplaySearch.cshtml?firstname=" + formValue1 + "&lastname=" + formValue2 + "&company=" + formValue3); 
```

和

```
var sqlQ = "SELECT * FROM Orientation WHERE FirstName LIKE @0 AND LastName LIKE @1 AND Company LIKE @2";
var data = db.Query(sqlQ,  "%" + Keyword1 + "%", "%" + Keyword2 + "%", "%" + Keyword3 + "%"); 
```

# mongodb - mongoose - 按数组长度排序

> ID：11604075
> 
> 赞同：4
> 
> 时间：2012-07-22T21:22:24.890
> 
> 标签：mongodb, sorting, mongoose

我有这个架构

```
var PostSchema = new Schema({
    title: {type: String, trim: true}
  , description: {type: String, trim: true}
  , votes: [{ type: Schema.ObjectId, ref: 'User' }]
}) 
```

我想根据投票对帖子进行排序，即我需要按数组长度排序。

尝试了通常的方法，但不起作用

```
PostSchema.statics.trending = function (cb) {
  return this.find().sort('votes', -1).limit(5).exec(cb)
} 
```

有什么帮助吗？

我使用的猫鼬版本是 2.7.2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T21:24:33.390

你不能直接这样做。为了能够对数组长度进行排序，您必须将其维护在一个单独的字段（`votes_count`或其他任何内容）中，并在您向/从 推/拉元素时更新它`votes`。

`votes_count`然后你在那个字段上排序。如果你也索引它，查询会更快。

# django - 测试期间未加载夹具

> ID：11604077
> 
> 赞同：5
> 
> 时间：2012-07-22T21:22:30.647
> 
> 标签：django, unit-testing, fixtures

我写了一个单元测试检查初始数据是否正确加载。然而，`Node.objects.all().count()`总是返回 0，因此似乎根本没有加载固定装置。没有加载夹具的命令行中没有输出/错误消息。

```
from core.models import Node

class NodeTableTestCase(unittest.TestCase):
    fixtures = ['core/core_fixture.json']
    def setUp(self):
        print "nothing to prepare..."

    def testFixture(self):
        """Check if initial data can be loaded correctly"""
        self.assertEqual(Node.objects.all().count(), 14) 
```

夹具`core_fixture.json`包含 14 个节点，我使用此夹具作为初始数据加载到数据库中，使用以下命令：

```
python manage.py loaddata core/core_fixture.json 
```

它们位于我在`settings.py`设置中提供的文件夹中`FIXTURE_DIRS`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:52:54.327

在另一个线程中找到了解决方案，[来自 John Mee 的回答](https://stackoverflow.com/questions/4655038/django-test-not-loading-fixture-data "约翰·米的回答")

```
# Import the TestCase from django.test:

# Bad:  import unittest
# Bad:  import django.utils.unittest
# Good: import django.test

from django.test import TestCase

class test_something(TestCase):
    fixtures = ['one.json', 'two.json']
    ... 
```

这样做我收到一条正确的错误消息，说外键被违反，我还必须包括应用程序“auth”的固定装置。我用这个命令导出了所需的数据：

```
manage.py dumpdata auth.User auth.Group > usersandgroups.json 
```

使用 Unittest 我只收到了加载夹具数据失败的消息，这不是很有帮助。

最后我的工作测试看起来像这样：

```
from django.test import TestCase

class NodeTableTestCase2(TestCase):
    fixtures = ['auth/auth_usersandgroups_fixture.json','core/core_fixture.json']

    def setUp(self):
        # Test definitions as before.
        print "welcome in setup: while..nothing to setup.."

    def testFixture2(self):
        """Check if initial data can be loaded correctly"""
        self.assertEqual(Node.objects.all().count(), 11) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T15:46:54.940

确保您列出了您的`INSTALLED_APPS`应用程序并且您的应用程序包含`models.py`文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T21:49:34.703

在测试用例中加载夹具时，我认为 Django 不允许您包含目录名称。尝试将您的`fixtures`设置更改为：

```
fixtures = ['core_fixture.json',] 
```

您可能还必须更改`FIXTURE_DIRS`设置以包含`core`目录。

如果您以[详细模式](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-option---verbosity)运行测试，您将看到 Django 尝试加载的夹具文件。这应该可以帮助您调试配置。

```
python manage.py test -v 2 
```

# php - Laravel中奇怪的未处理异常错误

> ID：11604080
> 
> 赞同：0
> 
> 时间：2012-07-22T21:23:04.063
> 
> 标签：php, mysql, fluent, laravel

我正在尝试从表中检索一些值，但`Unhandled exception: Trying to get property of non-object`在尝试将结果作为 Fluent 返回的对象的属性进行访问时出现错误。

**问题：**尝试访问对象的属性有效，即使它抛出错误。这对我来说真的很令人费解。可能是什么问题？

**PHP 代码**

```
$sets = DB::table('sets')->where('user_id', '=', $user_id)->get();

// Get thumbnail of latest item added to set
foreach($sets as $set) {
    $post_set = DB::table('posts_sets')
                ->where('set_id', '=', $set->id)
                ->order_by('created_at', 'desc')
                ->first();
    print_r($post_set);  // works fine
    echo $post_set->id;  // prints out value, BUT throws the unhandled exception error!
} 
```

## 错误

## 未处理的异常

### 信息：

```
试图获取非对象的属性
```

### 地点：

```
/home/test/public_html/application/controllers/api.php 在第 47 行
```

### 堆栈跟踪：

```
#0 /home/test/public_html/laravel/laravel.php(40): Laravel\Error::native(8, '尝试获取 p...', '/home/test/pub...', 47 )
        #1 /home/test/public_html/application/controllers/api.php(47): Laravel{closure}(8, '试图获取 p...', '/home/test/pub...', 47 ， 大批）
        #2【内部函数】：Api_Controller->action_sets()
        #3 /home/test/public_html/laravel/routing/controller.php(323): call_user_func_array(Array, Array)
        #4 /home/test/public_html/laravel/routing/controller.php(283): Laravel\Routing\Controller->response('sets', Array)
        #5 /home/test/public_html/laravel/routing/controller.php(165): Laravel\Routing\Controller->execute('sets', Array)
        #6 /home/test/public_html/laravel/routing/route.php(153): Laravel\Routing\Controller::call('api@(:1)', Array)
        #7 /home/test/public_html/laravel/routing/route.php(124): Laravel\Routing\Route->response()
        #8 /home/test/public_html/laravel/laravel.php(125): Laravel\Routing\Route->call()
        #9 /home/test/public_html/public/index.php(34): require('/home/test/pub...')
        #10 {主要}
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:21:17.570

首先，如果数据库中没有可用的数据记录，$post_set 查询将返回 NULL，这意味着您应该始终首先检查 is_null($post_set)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:08:36.240

你应该使用 eloquent 来做到这一点。

请记住，您是在 foreach 中进行查询，当您的数据库变大时，您会遇到性能问题。

使用 eloquent 你可以像这样使用急切加载：

```
$sets = Set::with('posts')->where_user_id($user_id)->get();

foreach($sets as $set)
{
var_dump($set);
var_dump($set->posts);
} 
```

[你可以在http://laravel.com/docs/database/eloquent](http://laravel.com/docs/database/eloquent)看到更多

# c# - 从用户输入中获取相关帖子

> ID：11604082
> 
> 赞同：-1
> 
> 时间：2012-07-22T21:23:24.450
> 
> 标签：c#, sql-server, sql-server-2008-r2

我正在写一个客户支持网站，用户可以在其中提交问题。我希望用户根据他的输入（标题和帖子）查看相关问题的列表。这将与本网站的内容非常相似（类似问题）。

我有点卡住了，不知道从哪里开始。有关如何构建此功能的任何指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T05:38:30.723

就数据库搜索而言，您可以使用全文搜索

如需更多信息，请访问以下链接：

*   [http://msdn.microsoft.com/en-IN/library/ms142571.aspx](http://msdn.microsoft.com/en-IN/library/ms142571.aspx)
*   [http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:00:25.253

Lucene 有一个很好的方法来做这样的事情，甚至还有一个称为[MoreLikeThis](http://wiki.apache.org/solr/MoreLikeThis)的运算符以及排名和得分，它可以帮助你完成你想要的事情。

Luncene 有一个非常好的 .net [Lucenenet](http://lucenenet.apache.org/)端口，您可以使用 nuget 获得它

# php - 如何为 PHP 包含的页面开发大型白名单？

> ID：11604085
> 
> 赞同：2
> 
> 时间：2012-07-22T21:23:47.977
> 
> 标签：php

很明显，对于任何大小合理的网站，使用 PHP 包含在模块中构建它具有很大的优势，因此我选择使用包含来动态创建页面内容。我反对包含页眉和页脚的想法，所以我做了这样的逆操作（index.php）：

```
 if(isset($_GET['page']))
    {
        $whitelist = array("contact","about","access", etc.);
        if(in_array($_GET['page'], $whitelist))
        {
           include($_GET['page'].".php");
        }

    }
    else
    {
        include('home.php');
    } 
```

有些人以安全为由反对这一点（尽管他们从不提供替代方案），但我发现这是一个巧妙的解决方案。我的问题是，当我的网站有数百甚至数千页时会发生什么？我是否只是继续向白名单数组添加变量，直到它变得很大，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:33:19.937

当您的网站有成百上千的页面时，所有页面都是独一无二的，您可能会将它们存储在数据库中。他们的 URL 也是如此（`contact`,`about`等）。因此，如果 get value 是有效的 slug（存在于表中），那么就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:32:03.383

使用数据库将页面列入白名单。这样您就可以一次性获得配置设置和权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T22:22:44.360

以我的经验，将它们包含在 php 中的白名单页面不是一个好习惯。因为添加新页面或修改旧页面名称需要更改此列表。我认为最好使用另一种形式的地址验证。**使用**MVC之类**的类或基于模式验证地址，**或者使用 apache 的重写是很好的做法。无论如何，这取决于你！

# c# - 在不同的控件上调用函数

> ID：11604092
> 
> 赞同：0
> 
> 时间：2012-07-22T21:24:46.557
> 
> 标签：c#, asp.net, user-controls

我有一个带有一些搜索功能的用户控件，然后我还有一个包含网格的控件。在具有网格的控件中，我具有检索某些项目的所有功能，我需要从搜索控件填充报告。

我的问题是，我已经阅读了有关此内容但不完全确定如何使其工作的信息，我读到我需要在控件 A 中注册一个事件处理程序，该处理程序调用控件 B 中的函数。它是如何工作的？

说在控件 B 中有一个我需要调用的函数 我 `GetAllItemsByRegistrantID(int id).`怎样才能从控件 A 调用这个函数？

我真的很感激任何帮助或指导。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:03:02.670

[这是一个示例，如果您必须使用事件来执行此操作。](https://dl.dropbox.com/u/9659390/TestUserControls.zip)

在您的第一个用户控件（搜索控件）上定义一个自定义事件。

```
public partial class UserControl1 : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public event EventHandler<MyCustomeEventArgs> MyCustomClickEvent;

    protected virtual void OnMyCustomClickEvent(MyCustomeEventArgs e)
    {
        if (MyCustomClickEvent != null)
            MyCustomClickEvent(this, e);

    }

    public void button1_Click(object sender, EventArgs e)
    {
        OnMyCustomClickEvent(new MyCustomeEventArgs(5));
    }

}
public class MyCustomeEventArgs : EventArgs
{
    public MyCustomeEventArgs(int searchID)
    {
        SearchID = searchID;
    }
    public int SearchID { get; set; }

} 
```

在带有网格的用户控件上，定义一个处理程序。

```
public void HandleCustomEvent(object sender, MyCustomeEventArgs e)
{
    GetAllItemsByRegistrantID(e.SearchID);
}

public void GetAllItemsByRegistrantID(int id)
{
    Label1.Text = id.ToString();
} 
```

在他们都居住的页面上，将它们连接在一起。

```
protected void Page_Load(object sender, EventArgs e)
{
    UserControl1Instance.MyCustomClickEvent += UserControl2Instance.HandleCustomEvent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:33:18.440

我肯定会尽量避免这种情况。您应该将此类代码放在一个类中并在两个控件之间共享它。

# java - java安全问题

> ID：11604093
> 
> 赞同：1
> 
> 时间：2012-07-22T21:24:56.963
> 
> 标签：java, java-service-wrapper

我尝试使用 java 服务包装器 ( [JSW](http://wrapper.tanukisoftware.com/doc/english/download.jsp) ) 将 derby 数据库作为 Windows 服务运行。我下载了社区版`3.5.15`。

我使用了包装器配置：

```
wrapper.java.command=java
#wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperStartStopApp

wrapper.java.classpath.1=../lib/derby.jar
wrapper.java.classpath.2=../lib/derbynet.jar
wrapper.java.classpath.3=../lib/derbytools.jar
wrapper.java.classpath.4=Wrapper.jar

wrapper.java.library.path.1=

wrapper.java.additional.1=-Dderby.system.home=c:/data/derby

#wrapper.app.parameter.1=org.apache.derby.drda.NetworkServerControl
#wrapper.app.parameter.2=start

wrapper.app.parameter.1=org.apache.derby.drda.NetworkServerControl
wrapper.app.parameter.2=3
wrapper.app.parameter.3=start
wrapper.app.parameter.4=-h
wrapper.app.parameter.5=127.0.0.1
wrapper.app.parameter.6=org.apache.derby.drda.NetworkServerControl
wrapper.app.parameter.7=true
wrapper.app.parameter.8=1
wrapper.app.parameter.9=shutdown
wrapper.console.format=PM
wrapper.console.loglevel=INFO
wrapper.logfile=log/wrapper.log
wrapper.logfile.format=LPTM
wrapper.logfile.loglevel=INFO
wrapper.logfile.maxsize=5m
wrapper.logfile.maxfiles=10
wrapper.syslog.loglevel=ERROR

wrapper.console.title=Derby DB Server
wrapper.ntservice.name=derby
wrapper.ntservice.displayname=Apache Derby Database
wrapper.ntservice.description=Apache Derby Relational Database Engine (Network Server)
wrapper.ntservice.starttype=AUTO_START
wrapper.ntservice.interactive=false
#wrapper.ntservice.account=.\derby
#wrapper.ntservice.password=derbypw 
```

当我尝试通过包装器启动 derby 服务器时，出现安全违规异常：

```
c:\derby\bin>wrapper -c derby.conf
wrapper  | --> Wrapper Started as Console
wrapper  | Java Service Wrapper Community Edition 32-bit 3.5.15
wrapper  |   Copyright (C) 1999-2012 Tanuki Software, Ltd. All Rights Reserved.
wrapper  |     http://wrapper.tanukisoftware.com
wrapper  |
wrapper  | Launching a JVM...
jvm 1    | WrapperManager: Initializing...
jvm 1    | Sun Jul 22 22:11:11 BST 2012 : Security manager installed using the Basic server security policy.
jvm 1    | Sun Jul 22 22:11:11 BST 2012 : Apache Derby Network Server - 10.9.1.0 - (1344872) started and ready to accept connections on port 1527
jvm 1    | WrapperManager Error: Error in WrapperListener.start callback.  java.security.AccessControlException: access denied (org.tanukisoftware.wrapper.security.WrapperPerm
ission signalStarting)
jvm 1    | WrapperManager Error: java.security.AccessControlException: access denied (org.tanukisoftware.wrapper.security.WrapperPermission signalStarting)
jvm 1    | WrapperManager Error:        at java.security.AccessControlContext.checkPermission(Unknown Source)
jvm 1    | WrapperManager Error:        at java.security.AccessController.checkPermission(Unknown Source)
jvm 1    | WrapperManager Error:        at java.lang.SecurityManager.checkPermission(Unknown Source)
jvm 1    | WrapperManager Error:        at org.tanukisoftware.wrapper.WrapperManager.signalStarting(WrapperManager.java:3268)
jvm 1    | WrapperManager Error:        at org.tanukisoftware.wrapper.WrapperStartStopApp.start(WrapperStartStopApp.java:437)
jvm 1    | WrapperManager Error:        at org.tanukisoftware.wrapper.WrapperManager$11.run(WrapperManager.java:3963)
jvm 1    | WrapperManager Error: Unable to remove the Wrappers shudownhook: {0}
jvm 1    | Exception in thread "WrapperListener_start_runner" java.security.AccessControlException: access denied (org.tanukisoftware.wrapper.security.WrapperPermission signal
Stopped)
jvm 1    |      at java.security.AccessControlContext.checkPermission(Unknown Source)
jvm 1    |      at java.security.AccessController.checkPermission(Unknown Source)
jvm 1    |      at java.lang.SecurityManager.checkPermission(Unknown Source)
jvm 1    |      at org.tanukisoftware.wrapper.WrapperManager.signalStopped(WrapperManager.java:3320)
jvm 1    |      at org.tanukisoftware.wrapper.WrapperManager.shutdownJVM(WrapperManager.java:4058)
jvm 1    |      at org.tanukisoftware.wrapper.WrapperManager.privilegedStopInner(WrapperManager.java:4363)
jvm 1    |      at org.tanukisoftware.wrapper.WrapperManager.access$2900(WrapperManager.java:124)
jvm 1    |      at org.tanukisoftware.wrapper.WrapperManager$11.run(WrapperManager.java:3983)
wrapper  | CTRL-C trapped.  Shutting down.
wrapper  | Shutdown failed: Timed out waiting for signal from JVM.
wrapper  | JVM did not exit on request, terminated
wrapper  | <-- Wrapper Stopped 
```

我可以向 java.policy 添加权限授予来解决这个问题（我没有尝试过，但假设它会起作用）。

我想知道的是：在这种情况下，是什么强制执行安全约束（并引发安全异常）？我认为所有本地启动的 java 应用程序都被授予所有权限。

还有一件事让我感到困惑：我有通过 JSW（但早期版本）运行的 h2 数据库服务器（1.3.162（2011-11-26）），它没有安全授权。我搜索了包含`wrapper`word 的 *.policy 文件，但什么也没有。在这种情况下如何配置安全性，以及是否已配置？

如果有人能更清楚地说明这些安全问题，我将不胜感激：P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:18:16.363

将 Leif 的评论作为答案：

当您使用 Wrapper 运行时，Wrapper 类将启动应用程序的 main 方法。这是将 wrapper.jar 中的类插入调用堆栈。Java 的安全模型通过限制对授予调用堆栈中最弱方法的权限的访问来工作。为了完成这项工作，您需要授予 wrapper.jar 中的类执行所需操作的权限。

这在我们的网站上有所描述：

[http://wrapper.tanukisoftware.com/doc/english/security-model.html](http://wrapper.tanukisoftware.com/doc/english/security-model.html)

# html - 正确居中

> ID：11604098
> 
> 赞同：1
> 
> 时间：2012-07-22T21:26:04.113
> 
> 标签：html, css

我目前正在尝试将一个水平居中，就像在对象（如果你愿意的话）本身，而不是里面的文本。我尝试了很多建议并遵循了许多教程，但没有任何效果......我最终自己设置了边距，但我希望它能够动态调整自身。这是我目前拥有的代码：

```
.navbar { 
    margin:auto;
    margin-left:30em;
    display:none;
    position:fixed;
    top:0px;
    list-style-type:none;
    padding:0;
    overflow:hidden;
    z-index:200;
}
.navbar li {
    float: left;
    display:inline;
    width:120px;
    text-align:center;
}
.navbar #left {
    left:0px;
    width:100px;
    height:35px;
    background:url('res/navigation.png') 0 0;
} 
```

... 等等。html真的很简单，就是对应class和id属性的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:32:48.067

许多解决方案提出的设置`margin: 0 auto;`不起作用，因为你已经`position: fixed;`上了你的`ul`;）

在我看来，定位元素居中的一个好方法是：

```
.someelement{
    width: 600px;
    position: fixed;
    left: 50%;
    margin-left: -300px; //here we put half of the element's width
} 
```

这种方法的一个活生生的例子可以在这里看到：http: [//jsfiddle.net/skip405/G8LrV/](http://jsfiddle.net/skip405/G8LrV/) 这种方法的唯一问题是我们设置了固定宽度。

如果你有一个元素的宽度**可能会改变**- 例如，你可能必须通过 jQuery 动态计算它，然后设置负边距。

可以在这里看到一个活生生的例子：http: [//jsfiddle.net/skip405/G8LrV/1/](http://jsfiddle.net/skip405/G8LrV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:40:32.290

使用 CSS 居中需要使用`margin: 0 auto`-- 正如其他人所提到的，并且我认为您已经尝试过。

这可能对您不起作用的原因是它还要求对象具有已定义`width`并具有块类型`display`属性（即，要么`display:block`或`display:inline-block`）。

它必须是 a `block`，因为只有块才能以这种方式进行操作。

它需要有，`width`因为块默认为其容器宽度的 100%，这显然没有空间让它居中。宽度可以是百分比而不是`px`如果您希望它适应容器的大小，但必须设置它。

如果您仍然在努力解决它，请尝试使用 Firebug（或类似的）并检查浏览器认为它对盒子所做的事情。您可能会在这里发现问题。

如果这没有帮助，请创建一个 JSFiddle 示例；这将帮助您了解正在发生的事情，并在此处显示一些内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T21:50:24.647

这有点棘手，您必须将其`<ul>`放入容器中。然后使用以下css：

```
div {
    text-align: center;
}

ul {
    text-align: left;
    display: inline-block;
    width: auto;
} 
```

`div`集装箱在哪里`ul`。

[看到这个小提琴现场演示](http://jsfiddle.net/VvHHe/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T21:28:51.950

将 div 相对于它的容器居中，你需要做

```
width:75%;
margin-left:auto;
margin-right:auto; 
```

这样对象就会以自身为中心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T21:36:24.303

您需要设置一个明确的宽度才能`margin:0 auto`工作。

或者，当宽度未知时，您可以使用一些位置技巧，如此[处所示。](http://www.cssplay.co.uk/menus/centered.html)

而且您需要从中删除`display:none`，`.navbar`否则您将看不到任何东西；除非有一些其他代码在工作中不包括在内。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-21T23:49:55.783

您可以尝试使用 section 或 div 将 .navbar 放入容器中，然后将容器的 display 属性设置为 flex，然后将 justify-content 属性设置为 center 并为导航栏提供特定的宽度。像这样的东西： `section or code{display: flex; justify-content: center; width: 300px;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-22T01:00:51.650

`.navbar`使用`section`或`div`然后将`display`容器的属性设置为`flex`then `justify-content property`to并将其放入容器中`center`并给出`navbar`特定的宽度。像这样的东西：

```
section or code {
  display: flex;
  justify-content: center;
  width: 300px;
} 
```

# ios - 更高效的 iCloud 同步？

> ID：11604102
> 
> 赞同：0
> 
> 时间：2012-07-22T21:27:06.150
> 
> 标签：ios, icloud, magicalrecord

我正在使用 MagicalRecord。每当我保存时，它都会保存到 iCloud，这需要几秒钟。有没有办法让我：

1.  保存而不保存到 iCloud，所以我大部分时间都可以选择这样做吗？
2.  在后台上下文中保存到 iCloud？我可以将 save 方法放在后台线程中，以执行此操作。那行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:15:03.197

使用 Core Data 保存到 iCloud 是一种全进或全出的交易。您*可以*在应用的核心数据堆栈中拥有多个商店。但是，这意味着可以使用以下方法将数据从一个存储（可能是 iCloud 存储）移动到另一个（本地）存储：

```
[NSManagedObjectContext assignObject:<obj> toPersistentStore:<store>] 
```

这意味着，您首先要在上下文中创建对象，然后告诉它将自己保存在本地存储中。然后，当您读取将其移动到云端时，您可以使用此方法，并再次保存，这次是到 iCloud。

将数据保存到 iCloud Core Data 存储的规则应该与您的本地存储相同。除了将您的核心数据存储移动到一个无处不在的容器之外，iCloud 没有不同的 API，该容器由神奇的记录处理。这意味着，使用后台上下文（私有队列上下文）保存。

# c# - 如何更改最大化按钮颜色/纹理

> ID：11604103
> 
> 赞同：0
> 
> 时间：2012-07-22T21:27:15.743
> 
> 标签：c#, wpf, xaml

有什么方法可以更改最小化按钮、最大化按钮、WPF 窗口框架/边框等。在 xaml 中使用样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:36:02.667

这些按钮是 Window Chrome 的一部分，因此应该留给用户决定它们的外观（Windows 具有更改 chrome 颜色的选项）。所以要想控制Chrome，可不是窗口样式那么简单。

您可以使用 WindowStyle 属性来摆脱它们，或者使窗口成为对话框类型的窗口，但要获得更多控制，您需要为您的窗口创建自定义镶边。

如果您想走这条路，那绝对是可能的，但您需要查看有关为您的窗口创建自定义镶边的信息。以下是一些资源，但请进行研究，看看其中哪些或其他哪些资源最能满足您的需求：

1.  [代码项目库](http://www.codeproject.com/Articles/131515/WPF-Custom-Chrome-Library)
2.  [带有链接的堆栈溢出答案](https://stackoverflow.com/questions/6792275/how-to-create-custom-window-chrome-in-wpf)
3.  [MSDN 博客](http://blogs.msdn.com/b/wpfsdk/archive/2008/09/08/custom-window-chrome-in-wpf.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:38:25.083

您可以使用 删除默认的 Windows chrome，`WindowStyle="None"`然后`ResizeMode="NoResize"`创建您喜欢的任何边框/按钮。例如

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        ResizeMode="NoResize"
        BorderBrush="Blue"
        BorderThickness="5">
    <StackPanel Orientation="Horizontal" 
                VerticalAlignment="Top" 
                HorizontalAlignment="Right"
                Height="20" >
        <Button Content="Minimize" />
        <Button Content="Restore" />
        <Button Content="Close" />
    </StackPanel>
</Window> 
```

# c# - datagridview 添加行

> ID：11604106
> 
> 赞同：2
> 
> 时间：2012-07-22T21:27:41.487
> 
> 标签：c#, winforms, datagridview

我的表单上有一个简单的 datagridview。我添加了 2 列——一个是按钮类型，另一个是文本类型。我正在尝试添加一些行作为测试，但我没有看到它们。

下面是代码。它一定很简单，但我需要做什么才能看到我的新行？

```
 private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.Rows.Clear();
        DataGridViewRow newRow = new DataGridViewRow();
        Button button = new Button();
        button.Name = "BUTTON";
        button.Text="BUTTON";
        newRow.SetValues(button, "TEST");
        dataGridView1.Rows.Add(newRow);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:33:33.680

这似乎是我同样的问题。我还在读书，看看他们发现了什么。

[为什么我看不到添加到 DataGridView 的 DataGridViewRow？](https://stackoverflow.com/questions/5698356/why-cant-i-see-the-datagridviewrow-added-to-a-datagridview)

一种解决方案似乎是在行创建后调用 CreateCells。

```
 newRow.CreateCells(dataGridView1); 
```

# autocomplete - Pydev 缺少库代码补全

> ID：11604113
> 
> 赞同：4
> 
> 时间：2012-07-22T21:28:55.790
> 
> 标签：autocomplete, pygame, pydev, code-completion

今天想看看python/pygame，下载了pydev作为我的IDE。总体上很满意，但它似乎缺少 pygame 类的自动完成功能。

在“screen”变量上，它只列出了所有的“ **x** ”函数，我猜这是默认的类对象函数。pydev 文件夹被添加到 PYTHONPATH。

```
import os, sys
import pygame
from pygame.locals import *

class Main:

    background_colour = (255,0,255)

    def __init__(self):
        pygame.init();
        self.screen = pygame.display.set_mode((500, 500));
        self.screen.fill(self.background_colour);
        pygame.display.flip();

        running = True
        while running:

            self.update();

            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False

    def update(self):
        pass

if __name__ == '__main__':
    Main() 
```

代码完美无瑕，但特别是对于像我这样的 pygame/python 菜鸟来说，没有任何代码完成是无法忍受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T09:49:39.270

问题是 pydev 不知道是哪种类型`self.screen`。

一种解决方法是使用局部变量并`assert isinstance(...)`帮助 pydev。

![在此处输入图像描述](../Images/78d3312a15d8ff62de3120ff82eac03a.png)

# path - 路由生成的路径已停止工作

> ID：11604114
> 
> 赞同：0
> 
> 时间：2012-07-22T21:29:04.637
> 
> 标签：path, routes, ruby-on-rails-3.2

我正在创建一个博客，`Rails 3.2.5`并且一直在使用's 来使用整个站点中`link_to`由 Routes 生成的资源路径（即我的`code_entries`: `code_entries_path`、等）的每个操作。`new_code_entry_path`突然，每当我尝试访问一个页面时，我都会收到此错误：

```
undefined local variable or method `controller' for #<CodeEntriesController:0x007f887f8b3300> 
```

此错误来自我`index`对 my 的操作`code_entries_controller.rb`，但无论我尝试在任何控制器中执行哪个操作，我都会在每个`link_to`带有 Routes 资源路径的操作上收到此错误。它以前工作正常，我不确定是什么原因造成的。

由于这个问题是在我的上下文中`code_entries`，所以这里是代码`code_entries_controller.rb`，以及我得到的错误，但在操作的上下文`/code_entries/index.html.haml`中：`routes.rb``code_entries#index`

* * *

# `code_entries_controller.rb`

* * *

```
class CodeEntriesController < ApplicationController

  before_filter :authenticate_action

  def index
    @entries = CodeEntry.order("created_at desc")
  end

  def new
    @entry = CodeEntry.new
  end

  def show
    @entry = CodeEntry.find_by_id(params[:id])
  end

  def create
    @entry = CodeEntry.new(params[:code_entry])

    if @entry.save
      redirect_to code_entry_path(@entry), :notice => "#{@entry.title} has been created"
    else
      puts @entry.errors.messages.inspect
      render "new"
    end
  end

  def edit
    @entry = CodeEntry.find_by_id(params[:id])
  end

  def update
    @entry = CodeEntry.find_by_id(params[:id])
    if @entry.update_attributes(params[:code_entry])
      redirect_to code_entry_path(@entry), :notice => "#{@entry.title} has been updated"
    else
      puts @entry.errors.messages.inspect
      render "edit"
    end
  end

  def destroy
    @entry = CodeEntry.find_by_id(params[:id])
    @entry.destroy
    redirect_to code_entries_path, :notice => "#{@entry.title} has been deleted"
  end
end 
```

* * *

* * *

# `/code_entries/index.html.haml`

* * *

```
%h1 Hello!
%br
- @entries.each do |e|
  %h2= link_to e.title, code_entry_path(e)
  %h3= e.updated_at
  = raw excerpt(e, 200)
  %br
  - if current_user
    = link_to "Edit", edit_code_entry_path(e)
    = button_to "Delete", code_entry_path(e), :confirm => "Really really?", :method => :delete
  %hr 
```

* * *

* * *

# `routes.rb`

* * *

```
Blog::Application.routes.draw do
  resources :users
  resources :code_entries
  resources :food_entries
  resources :inclusive_entries
  resources :sessions

  root :to => "home#index"

  get "login" => "sessions#new", :as => "login"
  get "logout" => "sessions#destroy", :as => "logout"

  get "users/new"
end 
```

* * *

* * *

# `NameError in Code_entries#index`

* * *

显示 /Users/kyle/Projects/blog/app/views/code_entries/index.html.haml 其中第 4 行提出：

```
undefined local variable or method `controller' for #<CodeEntriesController:0x007f887f813418> 
```

提取的源代码（第 4 行附近）：

```
1: %h1 Hello!
2: %br
3: - @entries.each do |e|
4:   %h2= link_to e.title, code_entry_path(e)
5:   %h3= e.updated_at
6:   = raw excerpt(e, 200)
7:   %br
Rails.root: /Users/kyle/Projects/blog 
```

应用程序跟踪 | 框架跟踪 | 全跟踪

```
app/views/code_entries/index.html.haml:4:in `block in _app_views_code_entries_index_html_haml___3334012984247114074_70112115764360'
app/views/code_entries/index.html.haml:3:in `_app_views_code_entries_index_html_haml___3334012984247114074_70112115764360'
Request 
```

参数：

```
None 
```

显示会话转储

显示环境转储

回复

标题：

```
None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:33:19.337

我在内部创建了一个方法，`application_controller.rb`并将其用作`helper_method`. 因为它在里面`application_controller.rb`而不是`application_helper.rb`我已经使用了标签`include ActionView::Helpers::UrlHelper`所以我可以使用一个`link_to`inside 辅助方法。不知何故，那个`include`声明让它爆炸了，但是一旦我删除了这个`include`声明并将辅助方法移动到`application_helper.rb`一切都很好！

# sql - SQL SELECT 查询帮助

> ID：11604122
> 
> 赞同：0
> 
> 时间：2012-07-22T21:29:59.683
> 
> 标签：sql, sql-server

我有两个表，`Document`定义`DocumentField`如下。

**文档**（相关栏目仅为简洁起见）：

```
DocumentKey - char(36)
DocTypeKey - char(36) 
```

**文档字段**：

```
DocumentKey - char(36)
FieldId - varchar(10)
FieldValue - varchar(255) 
```

`DocumentKey`和`DocTypeKey`值是标准的 GUID。`FieldId`主要是数字 1 到 30 的字符串值（还有其他几个非数字值，因此它是一`varchar`列）。`FieldValue`只是一个字符串值，可以是任何东西。

样本数据为`Document`：

```
DocKey | DocTypeKey  
A      | X  
B      | Y  
C      | Z 
```

样本数据`DocumentField`为：

```
DocKey | FieldId | FieldValue  
A      | 1       | PO1234  
A      | 2       | INV1234  
B      | 1       | PO5678  
B      | 2       | INV5678 
C      | 1       | PO1234
C      | 2       | INV2345 
```

我试图运行的查询是：

```
SELECT * 
FROM Document 
INNER JOIN DocumentField ON Document.DocumentKey = DocumentField.DocumentKey 
WHERE  (DocTypeKey IS NOT NULL) AND (FieldId = '1' AND FieldValue LIKE 'PO1%') AND (FieldId = '2' AND FieldValue LIKE 'INV1%') 
```

但是当我添加`AND (FieldId = '2' AND FieldValue LIKE 'INV%')`部分时我没有得到结果。它只适用于第一`WHERE (DocTypeKey IS NOT NULL) AND (FieldId = '1' AND FieldValue LIKE 'PO%')`部分。鉴于上面的示例数据，我希望它返回：

```
DocKey | DocTypeKey
A      | X 
```

有没有一种简单的方法可以获得我正在寻找的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:41:02.003

您需要使用子查询检查每个文档。我能想到的最好的是：

```
select d.* from Document d
where d.DocTypeKey is not null
and (
    select count(*) = 2 from DocumentField df
    where df.DocKey = d.DocKey
    and (
        (df.FieldId = '1' and df.FieldValue like 'PO1%')
        or (df.FieldId = '2' and df.FieldValue like 'INV1%'))); 
```

`count(*) = 2`你必须在子选择中使用+`FieldId`条件`FieldValue`的数量。

这是包含您的数据的 ideone 示例：http: [//ideone.com/uURwu](http://ideone.com/uURwu)。ideone 使用 SQLite，我在 H2 中开发了它，但 SQL Server 语法应该相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:41:07.167

您可能想要 OR (FieldId = '2' AND FieldValue LIKE 'INV1%')

你不能有 FieldId = '1' AND FieldId = '2'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T21:41:42.277

我想你想要这个：

```
WHERE  (DocTypeKey IS NOT NULL) 
AND ((FieldId = '1' AND FieldValue LIKE 'PO1%') OR (FieldId = '2' AND FieldValue LIKE 'INV1%')) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T21:53:12.317

正如其他答案所述，您不能有 FieldId = '1' AND FieldId = '2' 的行。

但是，我不同意使用 OR 的其他答案 - 您似乎希望找到 FieldId 为 1 和 2 且具有适当 FieldValues 的单个 Document 行。所以 OR 不会得到你想要的 - 你需要使用子选择：

```
SELECT Document.DocKey, Document.DocTypeKey
FROM Document 
INNER JOIN DocumentField ON Document.DocKey = DocumentField.DocKey 
WHERE  Document.DocTypeKey IS NOT NULL 
  AND DocumentField.FieldId = '1' AND DocumentField.FieldValue LIKE 'PO1%'
  AND  Document.DocKey = (SELECT DocumentField.DocKey FROM DocumentField WHERE DocumentField.FieldId = '2' AND DocumentField.FieldValue LIKE 'INV1%') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:31:21.523

谢谢大家的建议。我最终得到的结果与Brian S 和millimoose 的答案大致相同，对每个附加条件都使用了子选择。

```
SELECT Document.* 
FROM Document 
INNER JOIN DocumentField ON Document.DocumentKey = DocumentField.DocumentKey 
WHERE  (DocTypeKey IS NOT NULL) 
AND Document.DocumentKey IN (
    SELECT DocumentKey FROM DocumentField WHERE FieldId = '1' AND FieldValue  LIKE 'PO1%' 
    INTERSECT 
    SELECT DocumentKey FROM DocumentField WHERE FieldId = '2' AND FieldValue  LIKE 'INV1%'
) 
```

# apache - 使用 htaccess 进行子域重定向

> ID：11604123
> 
> 赞同：0
> 
> 时间：2012-07-22T21:30:06.567
> 
> 标签：apache, .htaccess, redirect

在过去的几个小时里，我一直试图让它正常运行，但没有运气。我已经尝试了我在网上找到的所有类型的代码。

所以我有 images.website.com，我想将它的所有内容重定向到 images.website.org（tld 更改）。

我设法进行主页重定向，但我的原始图像没有重定向到 .org。

图片网址：http: [//images.website.com/images/123.png](http://images.website.com/images/123.png)

一旦用户直接在浏览器中加载该图像，我希望它指向[http://images.website.org/images/123.png](http://images.website.org/images/123.png)

我正在使用 Apache 和 htaccess。

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:47:05.307

**尝试将此添加到images.website.com**的文档根目录

 **```
Redirect 301 / http://images.website.org/ 
```

如果**images.website.com**和**images.website.org**的文档根目录相同，您可以尝试：

```
RewriteCond %{HTTP_HOST} ^images.website.com$ [NC]
RewriteRule ^(.*)$ http://images.website.org/$1 [R=301,L] 
```**

# request - Titanium Appcelerator HTTPClient 返回数组

> ID：11604124
> 
> 赞同：0
> 
> 时间：2012-07-22T21:30:09.563
> 
> 标签：request, titanium, httpclient, appcelerator

我想将 httpclient 放在一个单独的类中，并希望返回已建立的数据数组。我的代码

```
function ServiceRequest(callback){
var data = [];
var xhr = Titanium.Network.createHTTPClient({
    onload: function(e){
        //Ti.API.info("Received text: " + this.responseText);

        var doc = this.responseXML.documentElement;
        var elements = doc.getElementsByTagName("record");
        for (var r=0;r<elements.length;r++){
             var name = elements.item(r).getElementsByTagName("field").item(3).textContent;
             var monteur = elements.item(r).getElementsByTagName("field").item(15).textContent;  
             var adresse =elements.item(r).getElementsByTagName("field").item(10).textContent;
             var ort = elements.item(r).getElementsByTagName("field").item(4).textContent +" - "+ elements.item(r).getElementsByTagName("field").item(5).textContent;
             var date = elements.item(r).getElementsByTagName("field").item(8).textContent;
             var termin 
             if (date !="") {
                var arrayDate = date.split(".");
                var newdate = arrayDate[1]+"."+arrayDate[0]+"."+arrayDate[2];
                var temptermin = newdate +" - "+ elements.item(r).getElementsByTagName("field").item(9).textContent;
                termin = temptermin;
            };

            data.push({"name":name,"monteur":monteur,"adresse":adresse,"ort":ort,"termin":termin});

             callback( data );
            };

    },
    onerror: function(e){

        Ti.API.debug(e.error);
        alert(e.error);
    }
});

    xhr.open("GET","http://theurltomyxml.com",false);
    xhr.send(); 
```

}

module.exports =服务请求；

我初始化的代码片段

```
var ServiceRequest = require('ui/common/ServiceRequest');
request = new ServiceRequest(function(data){

});

Ti.API.info(request); 
```

但是请求为空，我的 onLoad 函数中的数组填充了数据。我怎样才能等到 httpRequest 准备好而不是返回数据数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:59:46.087

您可以像这样使用自定义函数进行回调`onload : callBack`创建自己的回调函数，或者您可以将您的回调函数放在您`callback( data );`的 forloop 之后。

`for (var r=0;r<elements.length;r++){//==your code here for parsing } callback( data );`

# php - 减少 mySQL 查询和时间

> ID：11604125
> 
> 赞同：0
> 
> 时间：2012-07-22T21:30:54.927
> 
> 标签：php, mysql

我目前正在加快网站的速度，该网站从查询中返回 300,000 多行。虽然我认为这不会对数据库服务器造成太大的负载，但此查询是在 while 循环中发生的，具体取决于用户拥有的“画廊”的数量。

例如，乔的帐户中有 10 个画廊。这些画廊中的每一个都有 x 数量的图像，这些图像有 x 数量的评论。所以当前正在运行的查询......

```
SELECT count(*) as total 
FROM galleryimage a 
INNER JOIN imagecomments b ON a.id=b.imgId 
WHERE a.galleryId='".$row['id']."' 
AND b.note <> '' 
```

...正在查看所有 galleryimage 表 334,000 行和 imagecomments 表 76,000 行，并在每个图库上返回结果。在单个画廊上运行的查询在大约 578 毫秒内返回结果，但是对于许多画廊，比如 30-40，您可能会看到 17 秒以上的页面加载时间。有关如何处理此问题的任何建议？

我无法更改数据库架构....

查询画廊 id

```
SELECT a.id, 
       a.created, 
       a.name, 
       b.clientName, 
       a.isFeatured, 
       a.views, 
       a.clientId 
FROM gallery a 
INNER JOIN client b 
ON a.clientId = b.id 
WHERE a.isTemp = 0 
AND a.clientRef = '{$clientRef}' 
AND a.finish='1'  
AND a.isArchive='0' 
ORDER BY created 
DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:01:41.330

您可以合并查询并消除循环的需要：

```
SELECT 
    a.id, 
    a.created, 
    a.name, 
    b.clientName, 
    a.isFeatured, 
    a.views, 
    a.clientId,
    COALESCE(c.img_cnt, 0) AS gallery_image_count,
    COALESCE(c.comment_cnt, 0) AS gallery_comment_count
FROM 
    gallery a 
INNER JOIN 
    client b ON a.clientId = b.id 
LEFT JOIN
(
    SELECT aa.galleryId, 
           COUNT(DISTINCT aa.id) AS img_cnt, 
           COUNT(1) AS comment_cnt
    FROM galleryimage aa
    INNER JOIN imagecomments bb ON aa.id = bb.imgId
    WHERE bb.note <> ''
    GROUP BY aa.galleryId
) c ON a.id = c.galleryId
WHERE 
    a.isTemp = 0 AND
    a.clientRef = '{$clientRef}' AND
    a.finish = 1 AND
    a.isArchive = 0 
ORDER BY 
    a.created DESC 
```

# python - 实施超时。以下代码有什么问题？

> ID：11604134
> 
> 赞同：0
> 
> 时间：2012-07-22T21:33:03.923
> 
> 标签：python, time

程序第一次打印 Expired。我希望代码在打印过期之前至少打印 4 次“未过期”。有人可以解释原因并帮助我更正代码。谢谢

```
import time
TIMEOUT =  5

class Timer ():
    def __init__(self):
        self.timeout = time.time()+TIMEOUT
    def isExpired ():
        return time.time() > self.timeout

timing = Timer()

def main():
    while 1:
        if timing.isExpired:
            print "Expired"
            return
        else:
            print "Not expired"
            print "sleeping for 1 second"
            time.sleep(1)

if __name__== "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:34:31.807

你有几个问题：

1.  你没有给你的`isExpired`方法一个自我论证。将其定义为`def isExpired(self):`。

2.  您正在每次循环迭代中创建一个新的 Timer 实例。将`timing = Timer()`while 循环移到外部。

3.  `timing.isExpired`是对方法对象自身的引用（在布尔上下文中始终为真）。你需要做`timing.isExpired()`才能真正调用它。

这些都是与`Timer`. 阅读[Python 教程](http://docs.python.org/tutorial/)以了解如何使用类等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:35:13.743

您每次都在创建一个`Timer`实例。将其从循环中移开，否则您的 while 循环将永远不会终止。此外，您需要调用`timing.isExpired`，因为它是一种方法。所以你的代码应该是：

```
import time
TIMEOUT = 60 * 5

class Timer ():
    def __init__(self):
        self.timeout = time.time()+TIMEOUT
    def isExpired (self):
        return time.time() > self.timeout

def main():
    timing = Timer()
    while 1:
        if timing.isExpired():
            print "Expired"
            return
        else:
            print "Not expired"
            print "sleeping for 1 second"
            time.sleep(1) 
```

# c# - 如何使用 Ninject 将参数传递给构造函数

> ID：11604135
> 
> 赞同：-2
> 
> 时间：2012-07-22T21:33:07.357
> 
> 标签：c#, .net, ninject

我尝试了两天的示例，说明如何使用 Ninject 将值传递给类板的构造函数。我看过很多例子，但我不太了解。特别是我想看到，以及记录建筑物的配置（绑定）以及在运行时传递一个值：

```
    _Kernel.Get(of MyRoot)(Pass. "TheValue". At.param. "Param1". For(of INdependency))

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:47:12.370

您可以尝试使用 .WithConstructorArgument。

# android - 检查用户是否通过 wifi 或（Android 上的 Google Chrome）连接

> ID：11604142
> 
> 赞同：0
> 
> 时间：2012-07-22T21:34:04.210
> 
> 标签：android, google-chrome

我正在为 Chrome mobile 编写一个移动网站，并想检测用户是否通过 wifi 或 3g 连接到互联网。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:00:55.667

看看这个线程：[ANDROID：如果 WiFi 已启用且处于活动状态，则启动一个意图](https://stackoverflow.com/questions/1811852/android-if-wifi-is-enabled-and-active-launch-an-intent)。我想你可能会找到你要找的东西。

# facebook-apps - 无法添加应用管理员

> ID：11604144
> 
> 赞同：1
> 
> 时间：2012-07-22T21:34:07.643
> 
> 标签：facebook-apps

我有一个正在关闭的帐户（http://www.facebook.com/UrbanDystopia - 电子邮件地址：urban@urbandystopia.com）并且我已经以我的名义开设了另一个帐户（http://www.facebook.com/ david.manning.336333 - 电子邮件地址：davem@roseandmoon.com 和 david.manning.336333@facebook.com）。

我正在关闭[http://www.facebook.com/UrbanDystopia](http://www.facebook.com/UrbanDystopia)并且我是两个应用程序的管理员 - Bbblackdog (266537753438090) 和 CanCon (385773268120508) - 因此我“必须在停用之前删除或转移它们的所有权”。

我想将他们俩的所有权转移到我的新帐户，但是当我尝试向其中一个帐户添加新管理员时，我得到以下信息：“davem@roseandmoon.com 不是 Facebook 用户”和“david .manning.336333@facebook.com 不是 Facebook 用户”并且“david.manning.336333 不是 Facebook 用户”。

它不会让我添加我的新帐户，它确实存在，并且这些是新帐户的电子邮件地址。

由于再也没有人可以通过电子邮件向 Facebook 寻求帮助，所以我在阅读了 Facebook 上关于我可以使用的所有应用程序的所有内容后，作为最后的手段来到这里**，**但没有一个回答这个问题。

有人可以帮忙吗？

戴夫·M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:31:15.247

看来您的问题与此问题有关

[为页面创建新应用](http://facebook.stackoverflow.com/questions/9034805/creating-a-new-app-for-page)

就像您的新帐户未经过验证一样。

# perl - 在 perl 归档 tar 中将 CHOWN 设置为 0

> ID：11604145
> 
> 赞同：2
> 
> 时间：2012-07-22T21:34:15.993
> 
> 标签：perl, archive, tar, cpan

我正在尝试将 CHOWN 设置为 0，这样当以 root 身份提取文件时，文件不会被保存在存档中的 uid 中。这似乎不起作用。

```
use Archive::Tar;
use Getopt::Long qw( :config pass_through );

my $tarballName = $ARGV[0];
 my $testfix = Archive::Tar->new();
  $testfix::CHOWN=0;
$testfix->read ($tarballName);

 print "CHOWN=$testfix::CHOWN \n";

$testfix->extract() 
```

上面的代码打印 CHOWN=0，但是当我添加 print "CHOWN=$CHOWN \n"; 归档::tar.pm 并运行它我得到：

```
CHOWN=0 
CHOWN in tar.pm=1 
```

这是更改此设置的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:08:19.733

你应该设置`$Archive::Tar::CHOWN`，而不是`$testfix::CHOWN`。此外，您声明`$testfix`为对象，但稍后将其用作前缀-这两个概念完全不同！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:08:41.840

No. `$testfix::CHOWN`是包中的`$CHOWN`变量，`testfix`除了您的`print`声明之外，其他任何人都不会参考它。

```
$Archive::Tar::CHOWN = 0; 
```

# ruby - 使用历史初始化类似 attr_accessor 的方法

> ID：11604149
> 
> 赞同：2
> 
> 时间：2012-07-22T21:34:49.803
> 
> 标签：ruby, metaprogramming

```
class Class
  def attr_accessor_with_history(attr_name)
    attr_name = attr_name.to_s
    attr_reader attr_name
    attr_reader attr_name + "_history"
    class_eval %Q{
      def #{attr_name}=(new_value)
        @#{attr_name}_history = [nil] if @#{attr_name}_history.nil?
        @#{attr_name}_history << @#{attr_name} = new_value
      end
    }
  end
end

class Example
  attr_accessor_with_history :foo
  attr_accessor_with_history :bar
end 
```

有一种`Class.attr_accessor_with_history`方法可以提供与该属性相同的功能，`attr_accessor`但也可以跟踪该属性曾经拥有的每个值。

```
> a = Example.new; a.foo = 2; a.foo = "test"; a.foo_history
=> [nil, 2, "test"] 
```

但，

```
> a = Example.new; a.foo_history
=> nil 
```

它应该是`[nil`。

如何为每个 值初始化为的类定义单个`initialize`方法？`Example``…_history``[nil]`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-22T21:40:48.327

我认为，您最好的选择是为历史定义一个自定义阅读器（以及您的自定义作者）。

```
class Class
  def attr_accessor_with_history(attr_name)
    attr_name = attr_name.to_s
    attr_reader attr_name
    class_eval %Q{
      def #{attr_name}_history
        @#{attr_name}_history || [nil] # give default value if not assigned
      end

      def #{attr_name}=(new_value)
        @#{attr_name}_history ||= [nil] # shortcut, compare to your line
        @#{attr_name}_history << @#{attr_name} = new_value
      end
    }
  end
end

class Example
  attr_accessor_with_history :foo
  attr_accessor_with_history :bar
end

a = Example.new; a.foo = 2; a.foo = "test"; 
a.foo_history # => [nil, 2, "test"]

a = Example.new
a.foo_history # => [nil] 
```

## 编辑：

这是一个稍微冗长的片段，但它没有使用`class_eval`（如果没有必要使用，这是不受欢迎的）。

```
class Class
  def attr_accessor_with_history(attr_name)
    attr_name = attr_name.to_s
    attr_reader attr_name

    define_method "#{attr_name}_history" do
      instance_variable_get("@#{attr_name}_history") || [nil]
    end

    define_method "#{attr_name}=" do |new_value|
      v = instance_variable_get("@#{attr_name}_history")
      v ||= [nil]
      v << new_value

      instance_variable_set("@#{attr_name}_history", v)
      instance_variable_set("@#{attr_name}", new_value)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T06:58:24.003

Sloves in one class_eval `class Class def attr_accessor_with_history(attr_name) attr_name = attr_name.to_s attr_reader attr_name attr_reader attr_name+"_history" class_eval %Q{ def #{attr_name}=(val) if @#{attr_name}_history @#{attr_name}_history << @#{attr_name} else @#{attr_name}_history = [nil] end @#{attr_name} = val end } end end`

# hash - 用户认证失败 /w Hash

> ID：11604150
> 
> 赞同：0
> 
> 时间：2012-07-22T21:34:51.760
> 
> 标签：hash, passwords, sha1, salt

而且我需要保护我的网上商店中的某些区域以供管理员使用。问题是用户的身份验证：salt + hash 失败。

这是我创建密码的代码（使用 PHP5.x）：

```
$salt = rand(0, 999999999999);<br>
$passEncr = sha1($pass1 + $salt); 
```

这个变量 $passEncr 连同它的盐一起被插入到数据库中。

在登录页面上，我进行了以下检查：

```
$password = $_POST['password']; // hash+salt in the database

$storedSalt = $row['salt']; // salt from database<br>
if (sha1($password + $storedSalt) == $row['password']) 
```

现在我遇到的问题是一些哈希似乎是相同的。如果我尝试使用字母数字密码登录，我会成功，无论该密码的内容是什么。完整登录检查：http: [//pastebin.com/WjVnQ4aF](http://pastebin.com/WjVnQ4aF)

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:46:50.167

好吧，SQL 注入，使用 SHA 代替 bcrypt 是我看到的第一件事，不使用 OpenId 这样你就可以摆脱存储密码的业务是另一回事。

至于密码是否相同，我会检查数据库——看看你在存储什么，这会告诉你问题出在哪里。

# windows-8 - Win RT中的IE10无法连接本地网络上的服务器

> ID：11604151
> 
> 赞同：2
> 
> 时间：2012-07-22T21:35:01.557
> 
> 标签：windows-8, windows-runtime, internet-explorer-10

当我在 win8 的 Metro 部分中使用 IE10 浏览网页时没有问题，但是当我尝试查看位于本地网络（同一子网）中服务器上的页面时，它会显示以下消息：

```
This page can't be displayed

•Make sure the web address http://192.168.1.100  is correct.
•Look for the page with your search engine.
•Refresh the page in a few minutes.

If following these suggestions didn't work, resetting your connection might help.

Reset connection [<-a button here]

Get more help with connection problems 
```

现在有趣的是，在 ie10 的 Metro 版本中有一个选项可以在桌面上打开页面（在常规 IE10 中），而且它可以正常工作。我找不到或想到任何会限制在您自己的本地网络中浏览网站的安全设置。

（这是 Windows 8 32Bit Release Preview build 8400）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:11:23.830

这与 IE10 中的 EPM（增强保护模式）有关。在这里很难总结出答案，但是 Eric Lawrence（IE 团队的 PM）有一篇很棒的帖子，详细介绍了 EPM 的所有内容：

*   [http://blogs.msdn.com/b/ieinternals/archive/2012/03/23/understanding-ie10-enhanced-protected-mode-network-security-addons-cookies-metro-desktop.aspx](http://blogs.msdn.com/b/ieinternals/archive/2012/03/23/understanding-ie10-enhanced-protected-mode-network-security-addons-cookies-metro-desktop.aspx)

特别是，请阅读“Loopback-blocked”和“Private Network resources”部分。

在您的情况下，您可以尝试以下方法之一：

1.  尝试`http://192.168.1.100`通过自定义 DNS 条目（例如`http://myservice`）为虚线主机名（）起别名
2.  更改受信任区域设置
3.  查看您的网络连接是建立为共享还是非共享，这将触发私有与公共模式。

再次，请参阅 Eric 的帖子以了解其中的每一个的详细信息。

# css - 左边表格，右边地图

> ID：11604154
> 
> 赞同：0
> 
> 时间：2012-07-22T21:35:31.917
> 
> 标签：css, forms

这是目前的情况（搞砸了）：[http ://bit.ly/NK8s12](http://bit.ly/NK8s12)

这是尚未实现的结果（图片）：http: [//i.imgur.com/zqiRY.png](http://i.imgur.com/zqiRY.png)

CSS 位于：[http ://bit.ly/QoQO52](http://bit.ly/QoQO52)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:37:35.600

只需添加：

```
.info {
    float: left;
    margin-right: 120px;
} 
```

# css - less.css 是否支持指数？

> ID：11604159
> 
> 赞同：2
> 
> 时间：2012-07-22T21:36:11.683
> 
> 标签：css, less

我想在 less.css 中使用指数，以生成一系列字体并节省键入多个乘法运算符。

目前我只是重复乘以同一个变量。这很丑陋，但有效：

```
h5 {
   font-size: @basefontsize * @goldenratio * @goldenratio;
} 
```

以下均未通过编译器：

```
h5 {
   font-size: @basefontsize ** @goldenratio;
} 
```

或者

```
h5 {
   font-size: @basefontsize ^ @goldenratio;
} 
```

有什么办法可以在less.css中使用指数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:38:25.977

## 预 LESS 1.5

使用内联 Javascript 评估：

```
h5 {
   font-size: @basefontsize * (~`Math.pow("@{goldenratio}",2)`);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-07T18:05:32.013

从最新版本的 Less (1.5) 开始，您可以只使用`@basefontsize * pow(@goldenratio,2)`.

请参阅[函数参考](http://lesscss.org/#reference)。

# android - 是否可以以编程方式更改地图视图的高度？

> ID：11604160
> 
> 赞同：0
> 
> 时间：2012-07-22T21:36:16.147
> 
> 标签：android

我在获取应用程序所需的最终布局外观时遇到问题。

但是，我在想如果我可以以编程方式更改地图的宽度，它会解决问题吗？

所以我想知道是否可以以编程方式改变地图视图的高度？

# ios - ASIHTTPRequest 请求超时

> ID：11604162
> 
> 赞同：4
> 
> 时间：2012-07-22T21:36:28.727
> 
> 标签：ios, asihttprequest, testflight

我一直在研究这个问题很长时间，我不确定如何继续尝试解决它。

我有一个简单的 ASIHTTPRequest。代码贴在下面。

该应用程序在我第一次运行时始终有效。我有一个可以拉动刷新的表格视图，它启动 ASIHTTPRequest，并且我可以根据需要刷新任意多次而不会出现问题。我可以将应用程序发送到后台并将其带回来，一切正常。但是如果我离开应用程序几个小时然后回来，有时我会开始收到请求超时错误。一旦发生这种情况，每次我尝试刷新时都会重复该错误，并且如果没有实际关闭应用程序并重新启动它，我将永远无法再次连接。

我不认为问题出在我的网址上，因为它可能会卡在一台设备上，而在另一台设备上却很好。我从来没有能够在模拟器上得到超时错误。

我可以想象为什么我可能会收到一次超时错误，但我不明白为什么一旦它开始，错误就永远不会停止。我真的不知道去哪里尝试解决这个问题，或者我如何去调试它。

可能需要注意的是，我目前在我的应用程序中使用 TestFlightLive、GoogleAnalytics 和 Urban Airship。也许这些库之一导致我的网络行为出现问题？

这是代码：

```
- (void)getData
{    
    NSURL *url = [NSURL URLWithString:@"http://www.mysite.com/appname/latestData.py?callback=?"];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDelegate:self];
    [request setTimeOutSeconds:20.0];
    [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{    
    NSData *responseData = [request responseData];

    DLog(@"requestFinished entered");

    NSString *dataString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    // Update the data model
    if (dataString != nil)
    {
        SBJsonParser *jsonParser = [[SBJsonParser alloc] init];              
        NSDictionary *dataDictionary = [jsonParser objectWithString:dataString error:NULL];
        [self updateDataModel:dataDictionary];
    }        

    [self refreshIsFinished];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
    NSError *error = [request error];

    // inform the user
    ELog(@"Connection failed! Error - %@ %@",
         [error localizedDescription],
         [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:nil
                                                        message:NSLocalizedString(@"CONNECTION_FAILED_MESSAGE",nil) 
                                                       delegate:nil 
                                              cancelButtonTitle:NSLocalizedString(@"CLOSE",nil) 
                                              otherButtonTitles:nil];

    [alertView show];

    [self updateUI];
    [self refreshIsFinished];
} 
```

# jquery - 创建数据驱动的 html 网页

> ID：11604164
> 
> 赞同：1
> 
> 时间：2012-07-22T21:36:45.317
> 
> 标签：jquery, mysql, html

目前我正在使用 jquery 从 mysql 数据库中获取数据，但我想知道如何根据收到的数据为我的网页创建内容。例如，如果我返回一个像 { "options" : 3 } 这样的 JSON 对象，那么我想知道如何在 HTML 中做出相应的响应来创建 4 个列表项。

```
 for (i = 0; i < 3; i++){
    $('ul#optionsList').append('<li><a href="javascript:void(loadRand());">1.</a>          </li>');
        } 
```

**jQuery Mobile 列表视图**

```
 <ul id="optionsList" data-role="listview" data-theme="g">
        </ul> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:51:01.223

您有很多可能如何创建和修改 DOM 元素，这里是填充无序列表的[jsFiddle示例](http://jsfiddle.net/SU9Uc/)

有关创建新元素的更多信息，[请参阅](http://api.jquery.com/jQuery/#jQuery-html-props)

为了更好地构建您的页面，您可以考虑使用[Backbone.js等库（](http://backbonejs.org/)[此处](http://addyosmani.github.com/backbone-fundamentals/)提供全面的初学者教程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T11:35:01.497

如果您需要使用您的数据构建一个巨大的 html，请考虑使用模板。handlerbars.js 是一个非常好的选择。[http://handlebarsjs.com/](http://handlebarsjs.com/)

# javascript - 在 JQuery 中，“加载”方法的相对路径在引用项目中的 html 文件时从哪里开始？

> ID：11604170
> 
> 赞同：0
> 
> 时间：2012-07-22T21:38:08.510
> 
> 标签：javascript, jquery

我有一个使用大量 html、javascript、java 等的 Java EE 项目。我希望使用 JQuery 将 html 模板加载到 div 标记中，但是我不确定加载方法的相对路径从哪里开始.

我试图加载的 html 文件在项目中，但在不同的目录中。我是否必须后退并返回才能到达路径？如果有一种简单的方法可以通过某种类型的调试方法找出正确的路径是什么……那将是奖励！它使用的javascript（JQuery）被加载，下面的行也在另一个文件中。我有类似以下的东西

```
$("<div id=\"eventMaintDialog\"></div>").appendTo($("body"));
$("eventMaintDialog").load("src\main\webapp\resources\js\template\Event\EventMaintTemplate.html"); 
```

我希望我清楚地解释了这一点。我觉得我一直在改变路径，但一无所获。我在黑暗中刺伤。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:47:29.400

Javascript 在浏览器中运行，它不了解您的 Java EE 项目。

您可以打开浏览器控制台并将其写在页面上以查看：

```
var resolved = $("<a>", {href: "src\main\webapp\resources\js\template\Event\EventMaintTemplate.html"}).prop( "href" );

resolved; //The absolute url 
//"http://stackoverflow.com/questions/11604170/srcmainwebappesourcesjsemplateEventEventMaintTemplate.html" 
```

这取决于您在其上运行代码的页面的 url。

请注意，这`"\"`是 javascript 字符串中的转义字符。你可能想要`"/"`那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:47:28.987

您可以通过使用斜线来指定绝对 url。

```
$("eventMaintDialog").load("\src\main\webapp\resources\js\template\Event\EventMainTemplate.html"); 
```

将参考 http://www.[yourwebsite].com/src/main/webapp/resources/js/template/Event/EventMainTemplate.html

之前给我带来了很多麻烦

# c++ - 在应用程序之间的消息中重复 WaitForSingleObject

> ID：11604171
> 
> 赞同：0
> 
> 时间：2012-07-22T21:38:14.330
> 
> 标签：c++, multithreading, messages, waitforsingleobject

我在 C（生产者和消费者）中创建了两个程序，它们相互发送消息（使用 CreateEvent、SetEvent 和 WaitForSingleObject）

我为每个程序实现一个线程以使用 WaitForSingleObject(myEvent, INFINITE) 等待消息来管理此消息

我将 WaitForSingleObject 放入循环中以重复并及时获取许多消息。

这在第一次工作正常，但其他时候 WaitForSingleObject 不等待消息，左侧代码在不定式循环中运行（再次包括 WaitForSingleObject）

我测试删除了两个程序的 CloseHandle(myEvent) 但没有结果

```
do {
//wait until the event received from another process
WaitForSingleObject(myrcvEvent, INFINITE);

//send the feeback event, if it is failed show a message
printf ("consumer: try to send the feedback event\n");
if (!SetEvent(myfeedbackEvent)) {
msgbox("consumer: Set feedbackEvent failed!");
        return;
 } else {

InvalidateRect(hWnd,NULL,TRUE); //redraw with new values
 }

//CloseHandle(myrcvEvent);
//CloseHandle(myfeedbackEvent);

Sleep(100);
} while(1); 
```

怎么了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:07:15.397

你为什么要为此使用事件？使用信号量 - CreateSemaphore() API。

即使为此信号使用（不适当的）事件，我也不希望持续循环作为一个生产者、一个消费者和一个自动重置事件的症状 - 发布您的代码。

# search - 像 w3schools.com 这样的搜索框

> ID：11604174
> 
> 赞同：0
> 
> 时间：2012-07-22T21:38:29.223
> 
> 标签：search, web

我想在我的网站上制作一个简单的搜索框。我认为就我的情况而言，最好的方法是使用 w3schools.com 之类的东西。当用户键入 smth 并按 Enter 时，它会重定向到 google.com/search，并且它将仅从 google 中的 w3schools.com 搜索，因为在 url 中给出了 site:www.w3schools.com。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:48:29.457

只需浏览源代码并获取所需的一切，在 HTML 操作指南的情况下通常会使用该技巧：

```
<form method="get" name="searchform" action="http://www.google.com/search" target="_blank">
    <input type="hidden" name="sitesearch" value="www.yoursite.com">
    <input type="text" name="as_q" size="20" value="Search yoursite.com">
    <input type="submit" value="Search" title="Search">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:48:55.233

一个简单的解决方案是这样的：

```
<html>
<head></head>
<body>
<form method="get" name="searchform" action="http://www.google.com/search" target="_blank">
    <input type="hidden" name="sitesearch" value="stackoverflow.com">
    <input type="text" name="as_q" size="20" value="Search stackoverflow.com">
    <input type="submit" value="Search" title="Search">
</form>
</body>
</html> 
```

但你也应该看看这个： [http ://www.google.com/cse/](http://www.google.com/cse/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T21:49:24.083

好。实际上，这似乎是一件很容易的工作。我在以下位置找到了解决方案： [http ://www.askdavetaylor.com/how_can_i_add_a_google_search_box_to_my_web_site.html/](http://www.askdavetaylor.com/how_can_i_add_a_google_search_box_to_my_web_site.html/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T21:53:13.570

我认为您正在寻找的是**Google Custom Search Engine**。从这里开始：[http://www.google.com/cse/docs/](http://www.google.com/cse/docs/)，[http://www.google.com/cse/manage/all](http://www.google.com/cse/manage/all)

# python - 如何关闭 matlibplot 轴的刻度和标记？

> ID：11604175
> 
> 赞同：8
> 
> 时间：2012-07-22T21:38:29.713
> 
> 标签：python, matplotlib, axes

我想使用 matlibplot 轴绘制 2 个子图。由于这两个子图具有相同的 ylabel 和刻度，我想关闭第二个子图的刻度和标记。以下是我的简短脚本：

```
import matplotlib.pyplot as plt
ax1=plt.axes([0.1,0.1,0.4,0.8])
ax1.plot(X1,Y1)
ax2=plt.axes([0.5,0.1,0.4,0.8])
ax2.plot(X2,Y2) 
```

顺便说一句，X轴标记重叠，不确定是否有一个整洁的解决方案。（一种解决方案可能是使每个子图的最后一个标记不可见，除了最后一个，但不确定如何）。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T22:07:08.147

一个快速的谷歌，我找到了答案：

```
plt.setp(ax2.get_yticklabels(), visible=False)
ax2.yaxis.set_tick_params(size=0)
ax1.yaxis.tick_left() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T01:34:38.233

稍微不同的解决方案可能是将刻度标签实际设置为“”。以下将摆脱所有 y-ticklabels 和刻度线：

```
# This is from @pelson's answer
plt.setp(ax2.get_yticklabels(), visible=False)

# This actually hides the ticklines instead of setting their size to 0
# I can never get the size=0 setting to work, unsure why
plt.setp(ax2.get_yticklines(),visible=False)

# This hides the right side y-ticks on ax1, because I can never get tick_left() to work
# yticklines alternate sides, starting on the left and going from bottom to top
# thus, we must start with "1" for the index and select every other tickline
plt.setp(ax1.get_yticklines()[1::2],visible=False) 
```

现在摆脱 x 轴的最后一个刻度线和标签

```
# I used a for loop only because it's shorter
for ax in [ax1, ax2]:
    plt.setp(ax.get_xticklabels()[-1], visible=False)
    plt.setp(ax.get_xticklines()[-2:], visible=False) 
```

# android - Android 上的 Intent zxing 库

> ID：11604179
> 
> 赞同：0
> 
> 时间：2012-07-22T21:39:29.640
> 
> 标签：android, android-intent, zxing

> **可能重复：**
> [如何仅对我的应用程序强制使用 zxing lib？](https://stackoverflow.com/questions/11559577/how-to-force-using-zxing-lib-with-only-my-application)

我使用 zxing 在 Android 应用程序中扫描二维码。我用 Intent 来展示它：

```
Intent intent = new Intent("com.google.zxing.client.android.healthcode.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
startActivityForResult(intent, 0); 
```

它正在工作，但如果我安装了更多使用 Zxing lib 的应用程序，我有一个应用程序列表来打开这个意图。

如何强制我的应用使用我的 lib ？什么是最好的方法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T21:44:57.813

我无法想象你实际上有两个应用程序响应“com.google.zxing.client.android.healthcode.SCAN”，因为那是你自己编造的字符串，所以我认为这是一个错字。（如果不是你这里有更多问题，包括在不允许的情况下使用我们的命名空间。）

`Intent`您发送的错误，它应该是“com.google.zxing.client.android.SCAN”。用于`setPackage()`指定应处理它的应用程序。要使用条形码扫描仪，请设置“com.google.zxing.client。安卓”。

更好的是，`IntentIntegrator`在项目中使用提供的代码`android-integration`。

# javascript - 仅显示每个可见元素

> ID：11604186
> 
> 赞同：1
> 
> 时间：2012-07-22T21:41:11.273
> 
> 标签：javascript, jquery, html

```
<div class="save" id="1">1</div>
<div class="save" id="2" style="display:none">2</div>
<div class="save" id="3">3</div>
<div class="save hide" id="4">4</div>
<div class="save" id="5">5</div>

.hide {
 display: none;
}

$('.save').each(function(){
   console.log($(this).attr('id'));
}) 
```

这告诉我：

```
1
2
3
4
5 
```

但应为：

```
1
3
5 
```

我必须使用什么来遍历每个可见元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T21:43:46.443

使用[:visible](http://jqapi.com/#p=visible-selector)选择器：

```
$('.save:visible').each(function(){
    console.log(this.id);
}) 
```

如果你已经有了你的`.save`元素，你可以[`filter`](http://jqapi.com/#p=filter)：

```
var $saves = $(".save");
$saves.filter(':visible').each(function(){
    console.log(this.id);
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T21:43:45.403

```
$('.save:visible').each(function(){
       console.log($(this).attr('id'));
    }) 
```

或者

```
$('.save').each(function(){
      if( $(this).is(':visible') ) { //only if visible
           console.log($(this).attr('id'));
      }
      else { //only if hidden

      }
    }) 
```

# c++ - 变量类型后的“&”含义

> ID：11604190
> 
> 赞同：40
> 
> 时间：2012-07-22T21:41:53.963
> 
> 标签：c++

> **可能重复：**
> [C++ 中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)
> [应用于变量名时 * 和 & 的含义是什么？](https://stackoverflow.com/questions/3350626/whats-the-meaning-of-and-when-applied-to-variable-names)

`&`在这种情况下试图理解“”的含义

```
void af(int& g)
{
    g++;
    cout<<g;
} 
```

如果您调用此函数并传递变量名称 - 它的行为将与正常相同`void(int g)`。我知道，当你写`&g`这意味着你正在传递变量的地址`g`。但是在这个示例中它意味着什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-22T21:43:36.713

这意味着您通过引用传递变量。

实际上，在类型的声明中，它意味着引用，就像：

```
int x = 42;
int& y = x; 
```

声明对 的引用`x`，称为`y`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-22T21:47:20.350

这`&`意味着函数接受变量的*地址*（或引用），而不是变量的*值*。

例如，请注意这之间的区别：

```
void af(int& g)
{
    g++;
    cout<<g;
}

int main()
{
    int g = 123;
    cout << g;
    af(g);
    cout << g;
    return 0;
} 
```

而这个（没有`&`）：

```
void af(int g)
{
    g++;
    cout<<g;
}

int main()
{
    int g = 123;
    cout << g;
    af(g);
    cout << g;
    return 0;
} 
```

# git - 吉特。我的路径已经存在

> ID：11604191
> 
> 赞同：1
> 
> 时间：2012-07-22T21:41:54.023
> 
> 标签：git

我是一个项目的新手。

我使用 git clone git@###.###.... 克隆了 repo，而且似乎这个命令只克隆了 master 分支。因为这是一个新项目。此主分支中没有代码。我现在看到所有代码都在“开发”分支中。所以我试图克隆开发分支。所以我做了： git clone -b develop git@###.###

然后我收到错误消息：

Fatel：目标路径 $$$ 已存在且不是空目录。

我的问题是：这样做的正确方法是什么？我应该 cd .. 这个目录并为开发分支创建一个单独的新文件夹吗？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:46:25.103

只需使用
`git checkout develop`
，您将在`develop`分支上。克隆存储库时，不应克隆每个分支。你可以在它们之间切换。
您可以通过键入查看所有分支 `git branch -r`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:13:48.710

```
git clone URL
cd reponame
git branch -r 
```

上述命令 ( `git branch -r`) 将显示远程服务器上可用的分支。

您可以说出`gitk --all --date-order`并查看正在积极开发哪些分支。一旦你找到了一个分支，比如 origin/develop，那么你就可以`git checkout develop`并且代码应该在那里。

# php - 如何从 PHP 快速制作多个略有不同的插入

> ID：11604192
> 
> 赞同：1
> 
> 时间：2012-07-22T21:42:08.810
> 
> 标签：php, mysql

我正在做大约 600 个`INSERT ON DUPLICATE KEY UPDATE`查询，其中每个插入可以有一组不同的列。

我现在这样做的方式只是一个带有`mysql_query()`. 真的很慢，由于最大执行时间为 30 秒，php 脚本停止了。

我不能使用`INSERT INTO table (columns) VALUES (values 1), (values 2), ..., (values n)`，因为每个插入必须能够有一组不同的列。

我还查看了准备好的查询，但从我所见，它似乎也不适用于不同的列集。

我是数据库和 MYSQL 的新手。我只是在拼凑一些东西作为周末项目，现在我只想让项目的最后一部分工作。我很抱歉没有以正确的方式做到这一点。（很抱歉也使用了已弃用的 php mysql 函数。）也许我应该去睡觉，稍后再重写。正确的方法是什么？

编辑：这是有关表格类型的一些信息

```
-- phpMyAdmin SQL 转储
-- 版本 3.5.1
-- http://www.phpmyadmin.net
--
-- 主机：本地主机
-- 生成时间：2012 年 7 月 22 日晚上 9:59
-- 服务器版本：5.5.24-log
-- PHP版本：5.3.13

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

--
-- 数据库：`trailerbay`
--

-------------------------------------------------- --------

--
-- 表`movies`的表结构
--

如果不存在“电影”，则创建表（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `imdb` int(7) NOT NULL,
  `title` 文本整理 utf8_unicode_ci,
  `releasedate` 日期 DEFAULT NULL,
  `enlistdate` 日期时间不为空，
  `runtime` 时间 DEFAULT NULL,
  `trailer` 文本 COLLATE utf8_unicode_ci NOT NULL，
  `plot` 文本整理 utf8_unicode_ci，
  `cover` 文本 COLLATE utf8_unicode_ci NOT NULL，
  主键（`id`），
  唯一键`id`（`id`），
  唯一键 `imdb` (`imdb`)
) 引擎=InnoDB 默认字符集=utf8 排序=utf8_unicode_ci AUTO_INCREMENT=1145 ；

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:02:12.117

我不认为你可以在表中有这么多列，它们的开/关组合非常多。

因此，对于每一行，您可以提取其列组合（例如，您可以按字母顺序对字段进行排序）并将其结构用作键：

```
// $tuple has been sorted based on keys

$syndrome = implode(',', array_keys($tuple));

$values = array_values($tuple);    

if (isset($big_inserts[$syndrome]))
    array_push($big_inserts[$syndrome], $values);
else
    $big_inserts[$syndrome] = array($values); 
```

在循环结束时，您会发现自己拥有一个`$big_inserts`包含一定数量键的数组。每个键将映射一组值，适用于多次插入。

除非您真的非常不走运，否则您的“多个插入”将比您开始使用的单个插入少得多。如果所有插入具有相同的列，那么 big_inserts 中将只有一个键，保存所有元组。

现在，在 big_inserts 上循环，您可以为每个键准备一个语句。要发送到 PDO 的值数组是 中所有元组的串联`$big_inserts[$key]`。

```
foreach($big_inserts as $fields => $lot)
{
    $SQL = "INSERT INTO table ($fields) VALUES ";
    // I need a (?.?.?---) tuple
    $tuple = '('.implode(',', array_fill(0, count($lot[0]), '?')).')';
    // How many tuples are in a lot?
    $SQL .= implode(',', array_fill(0, count($lot), $tuple));
    $values = array();
    foreach($lot as $set)
        $values = array_merge($values, $set);
    // Now $SQL has all the '?'s, and $values contains all the values.
    // Run the statement.
 } 
```

如果这还不够，您可能必须将语句分成块，将它们保存在会话中并按顺序执行每个块，可能使用单独的表来模拟“多往返”事务（以防连接丢失/用户关闭浏览器/无论一半的块已经执行，另一半还没有完成。使用直接插入到具有相同结构的表中，然后当表准备好时，在事务中运行一个 INSERT INTO ... SELECT FROM 并删除辅助提交后的表。

如果它们是简单的 INSERT，我会尝试暂时禁用一些索引，但您依赖它们进行 ON DUPLICATE KEY UPDATE，所以这是不行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:48:35.257

只需一次将其拆分为 50 个插入，将其划分为 12 个文件并按顺序执行它们。简单的 javascript 在完成时重定向到下一个。

如果它只是一次性交易，那可能是最简单的解决方案。

否则发布一些示例代码，以便我们提供一些更有帮助的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T21:56:09.610

您的插入是否在 mysql 事务中执行？如果没有，这可能有助于提高您的性能。

[http://kevin.vanzonneveld.net/techblog/article/improve_mysql_insert_performance/](http://kevin.vanzonneveld.net/techblog/article/improve_mysql_insert_performance/)

# python - 如何让 Google App Engine 具有从数据库下载内容的下载链接？

> ID：11604193
> 
> 赞同：1
> 
> 时间：2012-07-22T21:42:20.747
> 
> 标签：python, google-app-engine, download

好的，假设我有一个数据库

```
Class Content(db.Model):
    code=db.TextProperty() 
```

我想在网页上提供一个下载链接，用于下载`code`. 我该怎么做？

我正在使用 python 和 jinja2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T21:50:42.647

您将创建一个发送回内容的视图`code`（假设您使用的是“webapp”框架）：

```
class MainPage(webapp.RequestHandler):
    def get(self):
        content = Content.get(…)
        self.response.headers['Content-Type'] = 'application/octet-stream'
        self.response.out.write(content.code) 
```

请注意，您可能希望将 设置`Content-Type`为更具体的内容。此外，如果您想强制浏览器下载文件（而不是可能显示文件），您可以设置`Content-Disposition`header: `headers['Content-Disposition'] = 'attachment; filename=some_filename.txt'`。

# c++ - 如何在 QTableView/QAbstractTableModel 中使用多行文本/换行符？

> ID：11604194
> 
> 赞同：1
> 
> 时间：2012-07-22T21:42:28.970
> 
> 标签：c++, qt, qtableview, line-breaks, qabstracttablemodel

我已将 QAbstractTableModel 和 QTabelView（以及 QSortFilterProxyModel）子类化，并且我希望允许用户在文本单元格中显示和输入多行文本（目前，点击返回将确认编辑而不是插入换行符）。

应该有一些简单的标志来设置，我只是不知道是哪一个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:38:10.873

不完全确定您要问什么，但我假设您已经为您的单元格设置了一个可以接受多行输入的小部件（即在您`QTextEdit`的.`setItem``QTableView`

如果你有，我相信你会想要创建一个自定义`QItemDelegate`派生类并覆盖默认的 Enter 行为以插入换行符，而不是像默认行为那样提交委托的数据

请参阅[http://qt-project.org/doc/qt-4.8/qitemdelegate.html#eventFilter](http://qt-project.org/doc/qt-4.8/qitemdelegate.html#eventFilter)以帮助您朝着正确的方向开始。

# iphone - iCalendar 闹钟

> ID：11604197
> 
> 赞同：1
> 
> 时间：2012-07-22T21:43:17.270
> 
> 标签：iphone, alarm, icalendar

一段时间以来一直在阅读[iCalendar VALARM 规范](https://www.rfc-editor.org/rfc/rfc2445#section-4.6.6)，只是不太确定我应该怎么做。我正在尝试生成一个带有事件的 ical 文件。

我打算在我的 iPhone 上订阅这个文件，我希望 iPhone 在距离活动开始还有 1 小时时提醒我。

任何人都可以帮助我如何做到这一点？可能相当简单，但我目前对该规范视而不见:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:36:38.560

[一个简单的例子和​​一些期望跨平台合规性的陷阱在这里](https://stackoverflow.com/q/10259358/1167333)可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:43:30.790

这是我的建议：

1.  根据您的需要创建一个事件（在您的计算机上）。
2.  导出活动
3.  在编辑器中打开

这应该给你一个可靠的想法。

# php - PHP - 使用 fpassthru 通过 imagePNG 将图像发送到移动设备

> ID：11604202
> 
> 赞同：1
> 
> 时间：2012-07-22T21:44:16.127
> 
> 标签：php, android, iphone, image

我有一个 php 脚本，用于根据请求将图像发送到移动设备。在当前版本中，脚本运行，在结束之前我使用 imagePNG() 将图像输出到设备，但是在阅读 php 在线手册中的示例时，我看到了这个示例：

```
<?php
 header("Content-Type: image/png");

 # Generate cachefile for image, if it doesn't exist
 if( !file_exists($cachefile) ) {
   $im = generateimage();     # some code generates an image resource
   imagepng($im, $cachefile); # store the image to cachefile

   # don't output it like this:
   /* imagepng($im);*/

   imagedestroy($im);
 }

 $fp = fopen($cachefile, 'rb'); # stream the image directly from the cachefile
 fpassthru($fp);
 exit;
?> 
```

我使用此示例进行了一些修改以将我的图像发送到移动设备，它工作正常，但我有一些问题想问：1）这是否比从文件创建图像并使用 imagePNG 发送更有效？

2) 我也不应该在使用 fpassthru 后立即关闭文件吗？

3）如果我确实使用 fopen 是否意味着文件被锁定意味着没有其他设备，但在那一刻能够访问它被流式传输？

对此事的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:48:40.807

我认为如果您有一个繁忙的站点，缓存生成的图像是一个好主意。它肯定会节省内存和 CPU 周期以换取一些硬盘空间。

关于使用后关闭文件`fpassthru`，这是不必要的，因为 PHP 会在脚本终止时关闭文件。由于下一行调用`exit`，因此无需显式关闭文件。如果输出图像后还有更多事情发生，我建议在不再使用时关闭文件。

至于你的第三个问题，因为你没有调用[flock](http://php.net/flock)，所以文件没有被锁定。如果一个进程将其打开以供阅读，则另一个进程可以同时将其打开以供阅读。

最后一点，您可以使用函数[readfile](http://php.net/readfile)来输出文件。这使您不必调用`fopen`，但在内部`readfile`调用`fpassthru`相同的 PHP 函数`php_stream_passthru`，因此根据您使用的函数，时间或效率几乎没有差异。

# node.js - Express.js 渲染简单的 html

> ID：11604203
> 
> 赞同：1
> 
> 时间：2012-07-22T21:44:20.387
> 
> 标签：node.js, express, pug

我正在制作一个显示 HTML 表格的网络应用程序。该应用程序是用 Express 编写的，并由 mongo 支持。

我需要根据大量不同的因素（如数据比较、数据类型等）动态设置表格中不同的框/单元格的样式。

现在，我正在尝试使用玉渲染从 mongo 获得的 json。

但我需要做的是从 mongo 读取行，将表格标签应用于字段，基本上构建一个 HTML 表格并将其回显在页面 AS-IT-IS 上。

意思是，我将使用代码构建 html，然后将其显示为 html，就像 rails html_safe 方法一样。

我怎么能用 express.js 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:00:34.037

您可以为此使用该`res.send()`方法。

```
var table = '<table><tr><td>hi!</td></tr></table>';
res.send(table); 
```

如果您需要将它分成多个块发送到浏览器，您可以使用节点`res.write()`来代替，这`res.send()`将结束响应。

```
var table = '<table><tr><td>hi!</td></tr></table>';
res.write(table); 
```

# html - 无法对齐 CSS 下拉菜单

> ID：11604207
> 
> 赞同：0
> 
> 时间：2012-07-22T21:44:51.227
> 
> 标签：html, css

正如我上面所说，我无法将下拉菜单对齐到正确的位置。我想要的是下拉其父项下的项目。

![我的默认菜单](../Images/ba3b9f4ac7c37561b8abbc0e8694d5a3.png)

当我将鼠标悬停在“HOVERTHIS”上时 ![悬停状态](../Images/19742558295340158f35bf99a3b818f0.png)

我需要在其父项下找到这些子菜单。

这是我的 HMTL：

```
<div id="templatemo_menu">
    <ul>
            <li><a href="index.php" class="current">Anasayfa</a></li>
            <li><a href="galeri.php">Galeri</a></li>
            <li><a href="duyurular.php?duyuru=1">23 Nisan</a></li>
            <li><a href="urunler.php">Ürünler</a></li>
            <li><a href="iletisim.php">İletişim</a></li>
            <li><a href="icerik.php?icerik=3">Okuyun</a></li>
            <li><a href="urunler.php" onclick="return false;">HOVERTHIS</a>
                <ul class="alturun">
                    <li><a href="urunler.php?kat=2">Test Kategori 1</a></li>
                    <li><a href="urunler.php?kat=3">Hizmet Ürünleri</a></li>
                    <li><a href="urunler.php?kat=15">POWDERS</a></li>
                </ul>
            </li>
        </ul>       
    <div class="cleaner"></div>
</div> <!-- end of templatemo_menu --> 
```

这是我的CSS：

```
/* menu */
#templatemo_menu {
    clear: both;
    width: 900px;
    height: 40px;
    padding: 0 30px;
    background:url(images/templatemo_menu.png)
}

#templatemo_menu ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

#templatemo_menu ul li {
    padding: 0px;
    margin: 0px;
    display: inline;
}

#templatemo_menu ul li a {
    float: left;
    display: block;
    width: 100px;
    height: 28px;
    padding: 9px 0 0;
    margin: 0 1px 0 0;
    font-size: 14px;
    text-align: center;
    text-decoration: none;
    color: #383838; 
    font-weight: 500;
    letter-spacing: 1px;
    outline: none;
    border: none;
}

#templatemo_menu ul li a:hover, #templatemo_menu ul li .current { color: #000; height: 31px; padding: 6px 0 0; background: url(images/templatemo_menu_hover.png) bottom center no-repeat }

.alturun {

}

#templatemo_menu ul li:hover ul {

    display: block;
}
#templatemo_menu ul li ul{
    width: 100px;
    display: none;
}

/* end of menu */ 
```

提前致谢！

**山姆编辑**

包含基于 OP 代码的 jsfiddle -> [http://jsfiddle.net/uWcLM/](http://jsfiddle.net/uWcLM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:54:13.650

您可以将`position: relative;`下拉列表添加到 li 中，然后`position: absolute;`+ 一些顶部和左侧值以在其中设置 ul 下拉列表。

请参阅我对小提琴 Sam 的改动，为您提供[http://jsfiddle.net/rlemon/uWcLM/1/](http://jsfiddle.net/rlemon/uWcLM/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:58:17.620

关键是制作#templatemo_menu ul li`display: inline-block`而不是`display: inline`

然后你可以定位嵌套的 ul ：

```
position: absolute;
top: 20px; 
```

我分叉了原来的 jsfiddle：http: [//jsfiddle.net/SE4cD/2/](http://jsfiddle.net/SE4cD/2/)

# c# - 如何在等待结果填充我的表格时避免我的表单（以及整个应用程序）冻结。

> ID：11604211
> 
> 赞同：1
> 
> 时间：2012-07-22T21:45:23.420
> 
> 标签：c#, .net, winforms, devexpress

我的应用程序使用 devExpress“Office 2007”标签样式。当我在表单中并单击填充 DevExpress XtraGrid 的按钮时，整个应用程序会冻结，直到结果填充到表中。

我如何允许用户在等待结果时导航到我的应用程序中的其他“选项卡”？

谢谢 ！

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:00:29.593

您是否查看过即时反馈 UI？

[http://community.devexpress.com/blogs/thinking/archive/2010/11/11/winforms-grid-control-and-the-new-instant-feedback-ui.aspx](http://community.devexpress.com/blogs/thinking/archive/2010/11/11/winforms-grid-control-and-the-new-instant-feedback-ui.aspx)

如果您熟悉的话，这类似于它们在 PivotGrid 中的异步模式。

根据我的经验，您无法从另一个线程更新网格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:12:11.393

你想要这样的东西：

```
Task.Factory.StartNew(
    () =>
    {
        var object = //Populate your grid

        this.yourXtraGrid.BeginInvoke(new Action(() =>
        {
            this.yourXtraGrid.ItemSource = object ;
        }));
    }); 
```

# visual-studio - 我可以使用 VS 2012 创建 Office 2007 加载项吗？

> ID：11604212
> 
> 赞同：9
> 
> 时间：2012-07-22T21:45:42.123
> 
> 标签：visual-studio, vsto, visual-studio-2012, office-2007

这建议不要： http: [//msdn.microsoft.com/en-us/library/ee519072 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ee519072(v=vs.110).aspx)

但是，但是……*真的*吗？

Office 2007 仍然无处不在——他们肯定还没有放弃对它的支持吗？我需要支持它，这似乎意味着我不能使用VS2012。

或者也许这个限制只适用于 RC？（请）。或者，它创建了针对 2010 年但仍可在 2007 年运行的加载项？（抓着稻草）。

告诉我不是这样...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:25:48.797

您可以创建[面向 2010 的 Office 插件，但在 Office 2007 中仍然有效](http://blogs.msdn.com/b/vsto/archive/2010/06/04/creating-an-add-in-for-office-2007-and-office-2010-that-quot-lights-up-quot-on-office-2010-mclean-schofield.aspx)。诀窍是您需要了解 2007 年与 2010 年存在哪些互操作类型和事件。如果您尝试访问 2007 年不存在的事件或类成员，您将遇到问题。

Visual Studio 2012 仅包含 Office 2010 项目模板。另一个烦恼/限制是他们取消了对**设置项目**的支持，这就是我们发布插件的方式。安装项目已被[InstallShield Limited Edition (ISLE) 取代](http://msdn.microsoft.com/en-us/library/2kt85ked%28v=vs.110%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T10:39:04.253

仅供参考，大约在 2013 年 3 月，我刚刚创建了一个针对 Excel 2013 的 Excel 插件，它在 Excel 2007 中运行良好。

我不得不删除/替换对 get_Range 的调用，但这并不奇怪，因为 get_Range 似乎总是有点小技巧。

```
#if PRE_VSTO_2012
 Excel.Range vsto_range = vsto_sheet.Cells.get_Range( 
  vsto_sheet.Cells[1, 1],
   vsto_sheet.Cells[rowCount, colCount]) as Excel.Range;
#else
   Excel.Range top_left = vsto_sheet.Cells[ 1, 1 ];
    Excel.Range bottom_right = vsto_sheet.Cells[ rowCount, colCount ];
     Excel.Range vsto_range = vsto_sheet.Range[ top_left, bottom_right ];
#endif 
```

我还没有创建 InstallShield LE 包。接下来就是...

# ios - UIView transitionWithView 丢弃层设置

> ID：11604215
> 
> 赞同：3
> 
> 时间：2012-07-22T21:46:13.473
> 
> 标签：ios

我 viewDidload 我有如下设置：

```
 [[self layer] setCornerRadius:30.0f];
    NSString *imgFilepath = [[NSBundle mainBundle] pathForResource:@"imageName" ofType:@"jpeg"];
    backImg = [[UIImage alloc] initWithContentsOfFile:imgFilepath]; 
```

然后在按下按钮时，我正在执行 transitionWithView:viewPressed ，例如：

```
 [UIView transitionWithView:viewPressed duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromLeft
                    animations:^{                            
                        [self setImage:img];
                        [self setFrame:useFrame]; // Just a bigger frame
                        [((UIView*)self) bringSubviewToFront:viewPressed];                            
                    }
                    completion:NULL]; 
```

我有漂亮的圆角，但是当过渡开始时，它会在动画之前变成方角。

希望我解释清楚？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:56:34.930

第二个代码块中的自指是什么？

我假设 self 是一个自定义视图， setImage 设置其图层的内容，然后使用

```
[[self layer] setMasksToBounds:YES]; 
```

就在`setCornerRadius`它对我有用之后！

# nhibernate - 为什么我的 FluentNHibernate References 属性没有更新？

> ID：11604216
> 
> 赞同：0
> 
> 时间：2012-07-22T21:46:14.683
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我正在使用 FluentNHibernate 尝试使用非常简单的映射（如下）更新一个类。不必选择语言。当我执行插入并设置语言属性时，一切都按预期工作。如果我然后尝试进行更新，仅设置引用属性，则不会发出更新语句。如果我更新其中一个非参考属性和语言，则会发出更新语句。

我正在使用 NH v.3.3.1.4000 和 FluentNH v.1.3.0.733。

```
public class OrderItem
{
    public OrderItem()
    {
        OrderDate = DateTime.Now;
        OrderStatus = Models.OrderStatus.Pending;
    }

    public virtual int OrderId { get; set; }
    public virtual Language Language { get; set; }
    public virtual DateTime OrderDate { get; set; }
    public virtual OrderStatus OrderStatus { get; set; }
}

public class OrderItemMap : ClassMap<OrderItem>
{
    public OrderItemMap()
    {
        Table("tblOrder");

        Id(x => x.OrderId);

        Map(x => x.OrderDate);
        Map(x => x.OrderStatus).CustomType(typeof(Int32));

        References(x => x.Language, "LanguageID").Cascade.None();

    }
}

public class LanguageMap : ClassMap<Language>
{
    public LanguageMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        Map(x => x.LanguageCode);
    }
}

public class Language
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string LanguageCode { get; set; }
} 
```

//更新对象的代码。取消注释代码设置数量会强制更新，但仅设置语言不会。

```
 NHibernateRepository<Language> languagedb = new NHibernateRepository<Language>(SessionFactory);
        NHibernateRepository<UserDetail> userdb = new NHibernateRepository<UserDetail>(SessionFactory);

        var newItem = itemdb.All().Where(x => x.OrderId == 16).First();

        newItem.Language = languagedb.All().Where(x => x.Id == 1).First();
        //newItem.Quantity = 200;

        itemdb.Update(newItem); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:08:03.993

尝试`Cascade.SaveUpdate()`在您的`Language`参考上使用，而不是`Cascade.None()`.

[在Ayende 的帖子](http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update)或官方 NHibernate[文档](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-graphs)中阅读有关级联选项的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T02:38:59.153

您是否对两个存储库使用了相同的会话？您是否在会话中使用了事务？如果是这样，尝试做`session.Commit()`或至少做`session.Flush()`。更多细节在[这里](https://stackoverflow.com/q/43320/443366)

# database - 将数据库表与其镜像进行比较的最有效方法是什么

> ID：11604218
> 
> 赞同：0
> 
> 时间：2012-07-22T21:46:38.643
> 
> 标签：database, performance, sqlite, compare

我有一个 SQLite 数据库表和一个相同的镜像表。该表有一个 id 列（主键）和许多其他列。它可能在给定点包含大约 1K 行。

我的程序经常被触发来检查表和它的镜像，看看它的任何列是否发生了任何变化。我只需要知道发生了变化，我不在乎哪个栏目内容发生了变化。

我需要这个检查非常有效，因为它发生了很多。我考虑过对 id 求和并进行比较，但这已经足够好了。有任何想法吗？

谢谢！

# android - 无法在 extsd 卡中创建文件夹

> ID：11604220
> 
> 赞同：0
> 
> 时间：2012-07-22T21:47:10.627
> 
> 标签：android, permissions, directory, sd-card

我有一个 android 平板电脑，其中外部 SD 卡称为“/mnt/extsd”，其内部存储称为“/mnt/sdcard”。

当我尝试通过以下代码在“/mnt/sdcard”中创建一个文件夹时。应用程序成功在根目录中创建文件夹，而我尝试在“/mnt/extsd”中创建文件夹时出现异常“打开失败：EACCESS（权限被拒绝）”

```
 // create a File object for the parent directory
    File root_directory = new File("/mnt/extsd/abc/");
    // have the object build the directory structure, if needed.
    root_directory.mkdirs();
    // create a File object for the output file
    File outputFile = new File(root_directory, "abc_checking");
    // now attach the OutputStream to the file object, instead of a String representation
    try {
        FileOutputStream fos = new FileOutputStream(outputFile);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        Utility.showDialogue(getActivity(), e.getMessage() + "");
    } 
```

显现

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

你们的任何帮助都将是非常可观的。请帮忙...：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:53:35.340

如果`Environment.getExternalStorageDirectory()`返回`/mnt/sdcard/`，那么这就是您应该在应用程序中使用的外部存储。虽然您的设备可能有其他挂载点（例如，`/mnt/extsd/`），但这些不是 Android SDK 的一部分，并且对于您的特定设备或多或少是唯一的。您需要联系您的设备制造商，询问他们是否有可以`/mnt/extsd/`从常规 SDK 应用程序中使用的方法。

如果您具有 root 访问权限，则可以通过更改 的权限来解决此问题`/mnt/extsd/`，但这并不是真正的编程主题，因此超出了 StackOverflow 的范围。

# javascript - 如何使用 for 循环更改图像的不透明度以创建渐变照明效果？

> ID：11604224
> 
> 赞同：1
> 
> 时间：2012-07-22T21:48:08.123
> 
> 标签：javascript, image, for-loop, event-handling, opacity

我创建了一个 Css 类，它定义了图像的不透明度，但我需要在 JavaScript 中访问它并在 for 循环中更改它，然后将新的不透明度传递回变量并重复该过程，直到获得我想要的不透明度100%。

我需要由 onmouseover 事件处理程序触发它。谁能给我看一些代码，让我知道它是怎么做的？

我的外部样式表中的 css：

```
.test{

opacity:0.4;
filter:alpha(opacity=40); /* For IE8 and earlier */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T21:55:07.803

```
// assuming jQuery
$('.test').bind({
 mouseover: function() {
  $(this).animate({opacity:1},500,function(){
    // something to do when done
  });
 }
}); 
```

使用直接的 javascript，您需要获取元素：

```
var element = this;// for example or var element = document.getElementById('some-id');

var opacity = element.style.opacity;

function updateOpacity() {
  opacity = opacity+=0.2;
  if(opacity >= 1) {
    // done
    opacity = 1;
  } else {
    element.style.opacity = opacity; // this updates the opacity
    setTimeout(function(){updateOpacity();}, 50); // 50 is the delay, 50milliseconds
  }
} 
```

评论中的快速说明：

setTimeout() 调用可以通过以下方式使用：

1.  如果您没有要传递的参数，请使用此

    setTimeout(updateOpacity, 50);

2.  如果您使用的是遗留代码，您可能会发现这个可行，但请参见下文

    setTimeout("updateOpacity();", 50);

3.  如果您需要将参数传递给回调函数，请优先使用它而不是 2。

    setTimeout(function(){ updateOpacity(); }, 50);

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-22T21:53:24.917

使用 jQuery，您可以使用

`$('.test').fadeTo( 500, 1.0 ); //fade to 100% opaque in 500 ms`

参考：[http ://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

对于鼠标悬停：

```
$('.test').mouseover(function(){
  $(this).fadeTo( 500, 1.0 );
}); 
```

# javascript - 谷歌图表 API：设置表格列宽以适合数据

> ID：11604225
> 
> 赞同：4
> 
> 时间：2012-07-22T21:48:17.833
> 
> 标签：javascript, google-visualization

我有一个使用 gviz_api 创建的表。我希望每列自动调整其宽度，以便该列的宽度很好地适合那里的任何内容。例如，目前我有一个看起来像这样的表：

```
 Num column    |  Num column     |   String column               |
1234            |           1234  |  some string                  | 
```

我希望它看起来像这样：

```
Num column |  Num column |   String column |
1234       |        1234 | some string     | 
```

我可以为整个表设置一个属性来执行此操作吗？还是我必须单独浏览每个单元格并将宽度明确设置为某个数字？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-27T19:20:42.733

我相信我正在处理同样的问题，这是我为我的项目所做的，并且效果很好。我不是说它会工作 %100，但它值得一试。

```
chart: {
   type: 'TABLE',
   options: {width: '100%', chartArea:{left:0,top:0,width:"100%",height:"100%"}} /* THIS LINE */
} 
```

您可能使用了与我生成图表不同的代码。但是在某个地方，您可能有一个区域可以输入一些选项。那就是我将标记为 /* THIS LINE */ 的行的地方。

如果您粘贴代码，我可能会提供更好的帮助。

# git - 使用 git 创建私有分支

> ID：11604226
> 
> 赞同：0
> 
> 时间：2012-07-22T21:48:20.313
> 
> 标签：git, version-control

我对 Git 有点陌生。所以，我的任务是为 3 个开发人员创建 3 个分支，这些分支只连接到他们的分支并且只与他们自己的分支一起工作。像这样的东西：

```
developer 1 == branch 1
developer 2 == branch 2 
```

任何帮助或教程都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T21:59:07.917

使用 Git 创建的所有分支最初都是私有的，而主干本质上是一个分支。您所描述的是 Git 的默认行为。

查看[这篇文章](https://git.wiki.kernel.org/index.php/GitSvnComparison)，了解 Git 中的分支处理有何不同。此外，[本教程](http://git-scm.com/course/svn.html#branch)对于从 Subversion 迁移到 Git 的人很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:54:56.990

他们应该这样做：
开发人员 1：`git checkout branch1`
开发人员 2：`git checkout branch2`
开发人员 3：`git checkout branch3`
所以他们将使用自己的分支。`push`只会到他们被结帐的分支机构。
但如果他们愿意，他们可以使用另一个分支。因此，如果您想拒绝他们使用另一个分支，只需为每个开发人员创建单独的存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T21:51:06.707

Git 本身不包含任何访问控制。

[Gitolite](https://github.com/sitaramc/gitolite/)是一个 Git 服务器，它提供访问控制，包括为不同的分支设置访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T22:04:07.503

[我建议您在http://progit.org](http://progit.org)或[http://sethrobertson.github.com/GitBestPractices](http://sethrobertson.github.com/GitBestPractices)中阅读 git 工作流程

正如 seanhodges 建议的那样，默认情况下，当每个开发人员克隆上游 repo 时，他们将拥有分支的私有版本，例如 master。他们可以在当地为所欲为。当他们准备好与其他人分享时，他们会推/拉/等等。没有特别的理由说明它们需要位于名为“dev1”的分支上。如果其他人想查看他们的东西，他们可以通过将 dev 的 repo 添加为远程，然后他们可以查看 dev1/master。

如果你想按照你建议的方式去做，你当然可以。只是`git checkout $USER`。人们发现创建功能分支（特定功能的分支）比创建用户分支更有用。

如果您正在谈论访问控制，那么肯定 gitolite 可能是其他答案中提到的最佳选择，但实际上除了在最正式的情况下，您没有理由需要打扰。如果用户搞砸了，您可以随时清除这些更改或恢复到较早的状态。

# java - 在 Java 中延迟加载接口

> ID：11604227
> 
> 赞同：3
> 
> 时间：2012-07-22T21:48:25.897
> 
> 标签：java, generics, lazy-loading

我正在尝试使用 Java Lists 创建一个延迟加载方法，该方法接受索引，将元素添加到 List 直到索引有效，然后返回该索引处的值。

例如，假设我有一个这样的列表`[0, 1, 2, 3]`。如果我用它调用我的方法并传入索引 1，它应该返回 1 而不会以任何方式更改 List。如果我用它调用我的方法并传入索引 5，它应该返回 0（默认整数值）并且我的 List 现在应该看起来像这样`[0, 1, 2, 3, 0, 0]`。

一开始实现起来似乎很简单，但是当我尝试传入像`List<List<String>>`. 我知道你不能实例化一个列表，所以我尝试制作一个 ArrayList，但它不起作用。

这是我的方法的当前化身

```
protected <T> T getOrCreateAt(int index, List<T> list, Class<T> elementClass) {
    while (list.size() < index + 1) {
        try {
            list.add(elementClass.newInstance());
        } catch (InstantiationException e) {
            e.printStackTrace();
            System.exit(1);
        } catch (IllegalAccessException e) {
            e.printStackTrace();
            System.exit(1);
        }
    }

    return list.get(index);
} 
```

这是我称之为的一个地方

```
List<List<String>> solutionText = new ArrayList<List<String>>();

for (Node node : solution) {
    List<String> row = getOrCreateAt(node.rowNo, solutionText, ArrayList.class);
    getOrCreateAt(node.colNo, row, String.class);
    row.set(node.colNo, String.valueOf(node.cellNo));
} 
```

对 getOrCreateAt 的第二次调用有效，但第一次没有编译。

如何让我的延迟加载方法在接口和抽象类上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:11:19.873

我理解[这个问题](https://stackoverflow.com/questions/2390662/java-how-do-i-get-a-class-literal-from-a-generic-type)的答案意味着这不能通过简单的方式来完成。一个有点不满意的解决方案：使参数`elementClass`非参数化：

```
static <T> T getOrCreateAt(int index, List<T> list, Class<?> elementClass) {
    while (list.size() < index + 1) {
        try {
            list.add((T) elementClass.newInstance());
            // ... 
```

您将在演员表上收到编译器警告（未经检查的演员表）。事实上，不幸的是，你会以这种方式失去类型安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T22:34:38.373

我过去遵循的一种类似工厂的行为是通过匿名类完成的。

```
interface Factory<T> {
    T newInstance() throws InstantiationException, IllegalAccessException;
} 
```

然后是您需要的实现

```
Factory<List<String>> arrayListFactory = new Factory<List<String>>() {
    @Override
    public List<String> newInstance() throws InstantiationException, IllegalAccessException {
        return new ArrayList<String>();
    }
};
Factory<String> stringFactory = new Factory<String>() {
    @Override
    public String newInstance() throws InstantiationException, IllegalAccessException {
        return String.class.newInstance();
    }
}; 
```

当然改变你的方法来接受工厂的东西而不是一个类。

```
protected static <T> T getOrCreateAt(int index, List<T> list, Factory<T> factory) {
    while (list.size() < index + 1) {
        try {
            list.add(factory.newInstance()); 
```

所以用法看起来像

```
for (Node node : solution) {
    List<String> row = TestThing.getOrCreateAt(node.rowNo, solutionText, arrayListFactory);
    getOrCreateAt(node.colNo, row, stringFactory);
    row.set(node.colNo, String.valueOf(node.cellNo));
} 
```

如果我不需要在一个文件之外使用它，我可能会将它们全部作为内部成员粘贴在该源文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:36:10.237

你有没有尝试过

```
protected <T> T getOrCreateAt(int index, List<T> list, Class<? extends T> elementClass) {
    // ...
}

List<String> row = getOrCreateAt(node.rowNo, solutionText, ( Class< ArrayList< String > > )solutionText.getClass()); 
```

? `ArrayList< String >`是 的子类`List< String >`，所以`Class< ArrayList >`是`Class< ? extends List >`（但不是`Class< List >`）的子类。强制转换和`getClass()`调用是必要的，因为`ArrayList.class`不是`Class< ? extends List< String > >`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T22:42:33.180

子类 ArrayList（记住泛型）并覆盖 set 方法以获取您描述的行为。此代码显示了 if `null`is 如何成为未分配元素的值。

```
public T set(int index, T arg1) {
    while (index >= size()) {
        add(null);
    }
    return super.set(index, arg1);
} 
```

`new`然后，您可以通过在分配列表时使用不同的方法来根据需要使用新行为的列表。

我猜你可以在一个完整的代码中做到这一点。

# macos - 包装制造商的选择

> ID：11604228
> 
> 赞同：1
> 
> 时间：2012-07-22T21:48:28.020
> 
> 标签：macos, packagemaker

我目前正在使用 packagemaker 进行安装程序。

我创建了我的项目并创建了多个选择。选择 1 始终需要安装，但也需要在其他 6 个选项之间进行选择。

所以我想配置你只能在 2 个选项处于活动状态时单击“继续”。

如果我将选择 1 的有效负载放在所有其他有效负载中，则包将非常大。也许您知道一个要求，如果选中其他选项 1，将自动选中选项 1？这个周末我已经尝试了所有方法，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T01:31:48.390

PackageMaker 已弃用。根据自己的经验，我只能推荐[使用新工具 pkgbuild、productbuild 和 pkgutil](https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode4-developer-id-mountain-lion-re)。

我建议看一下 iTunes Installers Distribution.xml，它可以让你了解如何做依赖，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:30:19.267

根据您的描述，似乎有一个可能对最终用户隐藏的选择。所以一个可能的解决方案是：

*   使选项 1 不可见，然后将此选项的状态依赖于其他 6 个可见选项。

这可以通过 PackageMaker 的另一种替代方案轻松实现：[Packages](http://s.sudre.free.fr/Software/Packages/about.html)

# objective-c - 如何将字符串存储在外部文件中以供应用程序范围使用（iOS）

> ID：11604231
> 
> 赞同：1
> 
> 时间：2012-07-22T21:48:43.683
> 
> 标签：objective-c, ios, xcode, string, nsstring

我正在创建一个 iOS 应用程序，作为其功能的一部分，它在 UIWebView 中加载许多网页。

为了便于编辑和分组，我想在外部文件中列出每个 URL 字符串，然后在应用程序中访问该字符串。例如，字符串文件可能如下所示：

```
NSString *google = @"http://www.google.com";
NSString *stackOverflow = @"http://www.stackoverflow.com";
NSString *cnn = @"http://www.cnn.com";
NSString *facebook = @"https://www.facebook.com" 
```

在核心应用程序代码中，我会告诉 UIWebview 加载包含在`stackOverflow`. 这样，如果 StackOverflow 决定更改他们的 URL（这是一个假设示例），我可以轻松地更改外部字符串文件中的 URL，而无需担心核心应用程序代码。

我该怎么做？我知道 Xcode 中有一个“字符串文件”，但我认为它仅用于语言本地化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T22:07:44.820

即使加载非本地化的字符串资源，您也可以使用与本地化字符串相同的基础设施。因此，对于 iOS，如果您将 WebLinks.strings 文件放在应用程序包的顶层，它将被视为字符串资源的非本地化版本。每当您使用任何系统函数来检索本地化字符串时，如果没有找到合适的本地化字符串资源，包的加载代码会自动选择合适的非本地化字符串。因此，例如，您可以在应用程序包的顶层设置 WebLinks.strings 就像标准 .strings 文件一样，其中包含以下行：

```
/* Google's URL */
"googleURL" = "http://www.google.com"; 
```

您可以使用以下代码来检索字符串：

```
NSString *google = NSLocalizedStringFromTable(@"googleURL", @"WebLinks", @"Google's URL"); 
```

# android - MapView 在布局中占据了整个空间

> ID：11604235
> 
> 赞同：0
> 
> 时间：2012-07-22T21:49:04.847
> 
> 标签：android

我厌倦了试图解决这个问题，但没有运气。

我的布局由地图视图、搜索栏和 EditText 组成。

mapview 占用整个空间的问题，因此不会出现 EditText 文本。

我试图玩重量值，但没有运气。

感谢你的帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:a="http://schemas.android.com/apk/res/android"
    a:layout_width="fill_parent"

    a:layout_height="fill_parent" >

        <com.google.android.maps.MapView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/mapview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:apiKey="somekey"
            android:clickable="true" 

             android:layout_weight="0"
            a:layout_alignParentTop="true"
             />

       <SeekBar
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/seekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"

            android:layout_marginTop="26dp"
            a:paddingLeft="10dip"
            a:paddingRight="10dip"
            a:paddingTop="30dip"
            android:max="100" >
        </SeekBar>

 <EditText
            a:id="@+id/smsBody"
            a:layout_width="0dip"
            a:layout_height="wrap_content"
            a:layout_weight="1.0"
            a:autoText="true"
            a:capitalize="sentences"
            a:hint="@string/sms_enter_message"
            a:imeOptions="actionSend|flagNoEnterAction"
            a:inputType="textShortMessage|textAutoCorrect|textCapSentences|textMultiLine"
            a:maxLines="10"
            a:nextFocusRight="@+id/send_button"
            a:layout_alignParentBottom="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:07:02.703

看起来您正在尝试直接在 MapView 上应用布局权重。相反，将 MapView 放在父容器内，例如 FrameLayout 并将布局权重（例如 0.7）应用于父容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T22:20:53.760

你应该用 `android:layout_weight`. 例如以这种方式：我希望它会起作用。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/textlayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:weightSum="15" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="6" >

            <SeekBar
                android:id="@+id/seekBar1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/maplayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="6" >

            <EditText
                android:id="@+id/smsBody"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:hint="test" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="3" >

            <com.google.android.maps.MapView
                android:id="@+id/map"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:apiKey="XXX" />
        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T22:33:45.260

这是您需要的，尝试在 MapView 或其他元素中设置此属性：

`android:layout_above="@+id/.."`或`android:layout_below="@+id/..."`.

并删除所有权重属性，它们在 RelativeLayout 中没有用，因为您可以使用所描述的属性来完成您的工作。当所有元素都在堆栈中而不是“填充”在布局中时`layout_weight`，通常使用它。`LinearLayout`

当父布局是 a 时使用这些属性`RelativeLayout`，并确定哪个布局应该在另一个之上，通常是整个方向。它也分别具有左或右方向的`layout_toLeftOf`和`layout_toRightOf`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T22:41:36.443

只需两行简单的代码，您就完成了:)

```
 android:layout_alignParentBottom="true"

    android:layout_above="@+id/headerRow"

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg" >

    <FrameLayout
        android:id="@+id/headerRow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="HERE GOES YOUR TEXT" />
    </FrameLayout>

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/headerRow"
        android:apiKey="mykey"
        android:clickable="true" />

</RelativeLayout> 
```

这肯定会帮助您完美地完成工作。

谢谢 ：）

# asp.net-mvc - MVC - 如何从 html 表单获取文件上传？

> ID：11604239
> 
> 赞同：0
> 
> 时间：2012-07-22T21:49:51.190
> 
> 标签：asp.net-mvc, file-upload

我正在尝试允许用户通过 html 表单上传图像，并且我想将其作为 byte[] 存储在我的模型中。（将存储在 db 中）除非我应该使用其他东西而不是 byte[] ?

这就是我的表格的样子

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>ImageUploadModel</legend>

    @Html.DisplayFor(model => model.Image)
   <input type="file" name="Image" id="Image" accept="image/*" />

    @Html.DisplayFor(model => model.Caption)
    @Html.EditorFor(model => model.Caption)
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

这是我的控制器现在的样子

```
[HttpPost]
    public ActionResult Create(ImageUploadModel model)
    {
           // do stuff

        return View();
    } 
```

这是我的 ImageUploadModel 的样子

```
public class ImageUploadModel
{
    public Guid UploadedBy { get; set; }

    [Display(Name = "Image")]
    public byte[] Image { get; set; }

    [Display(Name = "Image Caption")]
    public string Caption { get; set; }
} 
```

当我尝试上传文件时，我收到关于不是有效的 base64string 的错误。

在 MVC4/C# 中将上传文件作为字节 [] 获取的正确方法是什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:58:57.650

像这样更改您的表单标签（您可以`YourControllerName`用您的实际控制器名称替换）

```
@using (Html.BeginForm("Create", "YourControllerName", 
            FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  <input type="file" name="Image" />
  <input type="file" name="Image" id="Image" 
  //your other form elements also
} 
```

并更改您的`POST`操作以接受`HttpPostedFileBase`与该元素**同名的实例**`input file`

```
[HttpPost]
public ActionResult Create(HttpPostedFileBase Image)
{
       // do stuff

    return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:51:28.253

您需要将其更改为`HttpPostedFileBase`.

# r - 如何合并多个变量以在 R 中创建一个新的因子变量？

> ID：11604242
> 
> 赞同：2
> 
> 时间：2012-07-22T21:50:13.487
> 
> 标签：r, variables, merge

我有一项调查的数据。它来自一个看起来像这样的问题：

```
Did you do any of the following activities during your PhD

                             Yes, paid by my school. Yes, paid by me.  No. 

Attended an internationl conference?
Bought textbooks? 
```

数据以这种方式自动保存在电子表格中：

```
id conf.1 conf.2 conf.3 text.1 text.2 text.3

1    1                              1
2           1               1
3                   1       1
4                   1                    1
5 
```

这意味着参与者 1 参加了由她的大学支付的会议；参加者2参加了他支付的会议，参加者3没有去。

我想在单个变量中合并 conf.1、conf.2 和 conf.3 以及 text.1、text.2 和 text.3

```
id new.conf new.text

1   1        2
2   2        1
3   3        1
4   3        3

where the number now respresents the categories of the survey question

Thanks for your help 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:23:41.053

您没有说明每组问题是否可以有多个答案。如果是这样，这种方法可能不适合您。如果是这种情况，我建议在继续之前让您的问题更具[可重复性。](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)有了这个警告，试一试：

```
library(reshape2)
#recreate your data
dat <- data.frame(id = 1:5,
                  conf.1 = c(1,rep(NA,4)),
                  conf.2 = c(NA,1, rep(NA,3)),
                  conf.3 = c(NA,NA,1,1, NA),
                  text.1 = c(NA,1,1,NA,NA),
                  text.2 = c(1, rep(NA,4)),
                  text.3 = c(rep(NA,3),1, NA))

#melt into long format
dat.m <- melt(dat, id.vars = "id")
#Split on the "."
dat.m[, c("variable", "val")] <- with(dat.m, colsplit(variable, "\\.", c("variable", "val")))
#Subset out only the complete cases
dat.m <- dat.m[complete.cases(dat.m),]
#Cast back into wide format
dcast(id ~ variable, value.var = "val", data = dat.m)
#-----
  id conf text
1  1    1    2
2  2    2    1
3  3    3    1
4  4    3    3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:50:46.110

这是一个处理缺失值的基本方法：

```
confvars <- c("conf.1","conf.2","conf.3")
textvars <- c("text.1","text.2","text.3")

which.sub <- function(x) {
maxsub <- apply(dat[x],1,which.max)
maxsub[(lapply(maxsub,length)==0)] <- NA
return(unlist(maxsub))
}

data.frame(
id = dat$id,
conf = which.sub(confvars),
text = which.sub(textvars)
) 
```

结果：

```
 id conf text
1  1    1    2
2  2    2    1
3  3    3    1
4  4    3    3
5  5   NA   NA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T21:02:49.377

以下解决方案非常简单，我经常使用它。让我们使用上面 Chase 所做的相同数据框。

```
dat <- data.frame(id = 1:5,
                  conf.1 = c(1,rep(NA,4)),
                  conf.2 = c(NA,1, rep(NA,3)),
                  conf.3 = c(NA,NA,1,1, NA),
                  text.1 = c(NA,1,1,NA,NA),
                  text.2 = c(1, rep(NA,4)),
                  text.3 = c(rep(NA,3),1, NA)) 
```

现在我们首先用零替换 NA。

```
dat[is.na(dat)] <- 0 
```

将每一列乘以不同的数字可以让我们简单地计算新变量。

```
dat <- transform(dat, conf=conf.1 + 2*conf.2 + 3*conf.3,
                      text=text.1 + 2*text.2 + 3*text.3) 
```

让我们将新变量（或整个数据集）中的零重新编码为 NA 并完成。

```
dat[dat == 0] <- NA 

> dat
  id conf.1 conf.2 conf.3 text.1 text.2 text.3 conf text
1  1      1     NA     NA     NA      1     NA    1    2
2  2     NA      1     NA      1     NA     NA    2    1
3  3     NA     NA      1      1     NA     NA    3    1
4  4     NA     NA      1     NA     NA      1    3    3
5  5     NA     NA     NA     NA     NA     NA   NA   NA 
```

# c# - mvc 4 本地化

> ID：11604243
> 
> 赞同：1
> 
> 时间：2012-07-22T21:50:21.643
> 
> 标签：c#, asp.net-mvc, localization

我正在尝试在我的项目中使用本地化。我创建了 MVC 4 项目并添加了 resourses.resx 文件。但是，当我尝试从 _Layout.schtml 工作室访问此文件时，说当前上下文中不存在名称“资源”。

![在此处输入图像描述](../Images/75ac288c122524839fe484802d83184d.png)

![在此处输入图像描述](../Images/8f759d533b40e82dfbe342b4ca387591.png)

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:57:35.230

您必须`@using`在页面（文件）开头的语句中添加资源`_Layout.cshtml`的命名空间，或者将命名空间添加到开头。

在您的情况下，添加`@using kazwaySite`它应该可以工作。另外，请注意您的资源的访问修饰符设置为`public`. 打开你的资源文件，你会在屏幕顶部看到这个（见下文）：

![更改访问修饰符资源](../Images/82c449fe6adec5d1811c17dab783d639.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T21:57:50.220

`@Resources.ResourceName.Property`当你想从 cshtml 访问你的资源时使用 不要
忘记让你的资源公开访问

# java - 在java中使用方法

> ID：11604246
> 
> 赞同：0
> 
> 时间：2012-07-22T21:50:28.353
> 
> 标签：java, object, methods

我编写了以下代码以满足程序要求，如下所示：

> 三的平均值 编写一个程序，读取三个整数并显示三个数字的平均值。
> 
> 输入注意事项：在控制台输入三个整数（非负整数）。
> 
> 输出说明（提示和标签）：程序用这些字符串提示输入三个整数：“输入第一个整​​数。”，“输入第二个整数。”，“输入第三个整数。”。然后程序打印 NUMBER1、NUMBER2 和 NUMBER3 的平均值 = AVG，其中 NUMBER1 是输入的第一个整数值，NUMBER2 和 NUMBER3 是随后的整数，而 AVG 是计算的平均值。
> 
> 名称规范：您的应用程序类应称为 Average3：

我的源代码：

```
import java.util.Scanner;
public class Average3 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        int AVG, NUMBER1, NUMBER2, NUMBER3;
        System.out.println("Enter the first integer.");
        Scanner keyboard = new Scanner(System.in);
        NUMBER1 = keyboard.nextInt();
        System.out.println("Enter the second integer.");
        NUMBER2 = keyboard.nextInt();
        System.out.println("Enter the third integer.");
        NUMBER3 = keyboard.nextInt();
        AVG = (NUMBER1 + NUMBER2 + NUMBER3) / 3;
        System.out.println("The average of NUMBER1, NUMBER2, and NUMBER3 = " + AVG);

    }

} 
```

我的程序编译得很好，但我知道我可以使用关联的方法实现和调用一个对象，但我正在努力从哪里开始我从概念上理解方法和对象，但就编写代码而言。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T21:57:45.277

我不知道我是否会为这么简单的任务使用对象。但是，既然你问了，我会解释如果需要对象我会怎么做，

我将创建一个具有 的对象（类）`ArrayList<Integer>`，这样您就可以计算出不止 3 个数字的平均值。

该对象将有 2 个公共方法。`void addNumber(int number)`addNumber 将简单地`double/int getAverage()` 将一个数字添加到 arraylist，而 getAverage 将遍历整个列表，将所有数字相加，然后除以它的大小（不要忘记 -1）

主要是，您创建该类的一个新对象，然后扫描仪的每次扫描，使用 addNumber 方法将输入的数字插入到数组列表中。

我想我会怎么做，因为我被指示使用对象。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:33:37.083

首先，我将创建一个`InputData`存储用户输入的类：

```
class InputData {
    public int number1;
    public int number2;
    public int number3;
} 
```

这本身就是一种有用的通用技术：将多个相关值收集到一个数据结构中。然后，您可以重写您的`main`方法以使用此类而不是三个单独的`int`变量，或者您可以更进一步，向`InputData`该类添加一些行为。要添加的明显第一个行为是计算平均值：

```
class InputData {
    public int number1;
    public int number2;
    public int number3;

    public int average() {
        return (number1 + number2 + number3) / 3;
    }
} 
```

有了这个，你可以重写你`main`的如下：

```
public class Average3 {
    static class InputData {
        public int number1;
        public int number2;
        public int number3;

        public int average() {
            return (number1 + number2 + number3) / 3;
        }
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        InputData input = new InputData();
        System.out.println("Enter the first integer.");
        Scanner keyboard = new Scanner(System.in);
        input.number1 = keyboard.nextInt();
        System.out.println("Enter the second integer.");
        input.number2 = keyboard.nextInt();
        System.out.println("Enter the third integer.");
        input.number3 = keyboard.nextInt();
        System.out.println("The average of NUMBER1, NUMBER2, and NUMBER3 = "
            + input.average());
    }
} 
```

请注意，我创建了`InputData`一个[*静态内部*](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)类`Average3`. 它也可以是同一文件中的一个单独的顶级类（只要不是`public`）或单独文件中的一个类。

对此的改进是在类中使用数组而不是单独的`int`字段`InputData`。您的程序可能如下所示：

```
public class Average3 {
    static class InputData {
        public int[] numbers;

        InputData(int size) {
            numbers = new int[size];
        }

        public int average() {
            int sum = 0;
            for (int number : numbers) {
                sum += number;
            }
            return sum / numbers.length;
        }
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        String[] prompts = { "first", "second", "third" };
        InputData input = new InputData(3);
        Scanner keyboard = new Scanner(System.in);
        for (int i = 0; i < prompts.length; ++i) {
            System.out.println("Enter the " + prompts[i] + " integer.");
            input.numbers[i] = keyboard.nextInt();
        }
        System.out.println("The average of NUMBER1, NUMBER2, and NUMBER3 = "
            + input.average());
    }
} 
```

在这里，我添加了一个构造函数`InputData`来初始化数组并给它一个参数来设置数组的大小。

然后，您可以引入其他改进，例如使输入值的数量动态化（使用 an`ArrayList<Integer>`而不是`int`数组）。但这超出了作业的具体要求。有些人（实际上很多人）倾向于自动进行这种概括。然而，[极限编程](http://en.wikipedia.org/wiki/Extreme_programming)的倡导者会指出，通常最好保持简单：为今天的需求设计和编码，而不是明天、下周或下个月的需求。

换句话说，你不知道下一个任务会带来什么，所以无论你在当前任务之外进行概括，都可能是浪费工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T22:07:03.463

这是一个关于如何使用非常简单的类制作程序的简短示例。

您可以轻松更改它并询问要计算平均值的数字。

```
/* using default package */

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

/**
 * The Class Average3.
 */
public class Average3 {

    /** The number list. */
    private List<Integer> numberList;

    /** The sum. */
    private float sum;

    /**
     * Instantiates a new my first class.
     */
    public Average3() {
        this.numberList = new ArrayList<Integer>();
        this.sum = 0;
    }

    /**
     * Adds the integer.
     *
     * @param integer the integer
     */
    public void addInteger(int integer) {
        this.numberList.add(integer);
        this.sum += integer;
    }

    /**
     * Gets the average.
     *
     * @return the average
     */
    public float getAverage() {
        return (this.sum/this.numberList.size());
    }

    /**
     *  Prints the Average.
     */
    public void printAverage() {
        System.out.print("The average of ");
        for(int j = 0; j < this.numberList.size()-1; j++) {
            Integer i = this.numberList.get(j);
            System.out.print(i.toString() + ", ");
        }

        System.out.print("and " + numberList.get(numberList.size()-1));
        System.out.println(" = " + this.getAverage());
    }

    /**
     * The main method.
     *
     * @param args the arguments
     */
    public static void main(String[] args) {
        Average3 myClass = new Average3();

        System.out.println("Enter the first integer.");
        Scanner keyboard = new Scanner(System.in);

        myClass.addInteger(keyboard.nextInt());

        System.out.println("Enter the second integer.");
        myClass.addInteger(keyboard.nextInt());

        System.out.println("Enter the third integer.");
        myClass.addInteger(keyboard.nextInt());

        myClass.printAverage();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T22:18:33.837

作为一个非常基本的示例，在一个 .java 文件中，您可以创建一个“知道如何”获取输入并创建平均值的类，例如：

```
// takes input and stores in a list which it 
// can do mathematical operations on
class InputMath
{
    // ivar to store input
    private List<int> list;

    // contructor
    public AverageInput() {}

    // gets user input and pushes to `list`
    public void getInput(String question) {}

    // works out the average of `list`
    public int average() {}

    // works out the total of `list`
    public int total() {}

    ...
} 
```

然后你可以使用你想要的类，比如在你的'main'函数中

```
import InputMath;

class Main
{
    public static void main(String args)
    {
        InputMath im = new InputMath();

        for(int i=0; i<3; i++)
        {
            im.getInput("Enter number " + (i+1));
        }
        System.out.println(im.average());
    }
} 
```

但就像许多评论所暗示的那样，您确实需要通读一些材料/参考/示例并“玩耍”

# spring - 在 spring 上下文初始化之前运行代码

> ID：11604249
> 
> 赞同：4
> 
> 时间：2012-07-22T21:50:50.077
> 
> 标签：spring, tomcat, web-applications, web.xml

在 tomcat 7 上运行 Web 应用程序，我的部署描述符包含 2 个侦听器，一个是我创建的自定义侦听器，另一个是 Spring 侦听器：

```
<listener>
    <listener-class>com.company.appName.web.context.MyContextListener</listener-class>
</listener>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

当我运行我的集成测试时，我的监听器根本不会被调用，所以为了克服它，我自己做一些初始化（调用一些基本上是从我的这个监听器调用的静态方法）。无论如何，我想我在这里遗漏了一些东西，听众什么时候被叫到？为什么在我的集成测试期间不会初始化？更具体地说，Spring 上下文确实被初始化了，这是因为我在我的测试类的顶部声明了它：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:testApplicationContext.xml" }) 
```

所以 web.xml 从来没有真正使用过..

在这种情况下，弹簧上下文总是首先被调用，在它被初始化之前我没有机会做任何事情 - 是这样吗？有没有办法在春天的上下文之前运行一些代码？

更新：我还想提一下，我在我的测试套件中使用了 @BeforeClass 注释：

```
@RunWith(Categories.class)
@IncludeCategory(HttpTest.class)
@SuiteClasses({ <MY TEST CLASSES> })
public class HttpSuiteITCase {

    /**
     * Run once before any of the test methods.
     */
    @BeforeClass
    public static void setTestsConfigurations() {
    TestConfiguration.setup(false);
    }
} 
```

使用这种方法并不能解决问题，首先初始化测试类以及我所有的 spring bean。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T02:32:51.610

`static`在您的测试类中注释一个方法[`@BeforeClass`](http://junit.sourceforge.net/javadoc/org/junit/BeforeClass.html)并在那里进行初始化。例如：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:testApplicationContext.xml" })
public class TestTest {

    @BeforeClass
    static public void beforeClass() {
        // do intialization here
    } 
```

如果您的初始化代码需要访问类字段，因此无法访问，`static`那么您可以设置 a[`TestExecutionListener`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/test/context/TestExecutionListener.html)并实现`beforeTestClass()`. 有关示例，请参阅[此博客文章。](http://www.tikalk.com/java/forums/how-create-after-class-methods-junit-4-using-spring-3-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:02:16.757

您可以在测试上下文中使用 bean 中的 init-method 来完成。

```
<bean id="exampleInitBean" class="examples.ExampleBean" init-method="init"/> 
```

公共类 ExampleBean {

```
public void init() {
    // do some initialization work
} 
```

}

# colors - 如何定义要在 RPG 中用于子文件显示的颜色

> ID：11604253
> 
> 赞同：0
> 
> 时间：2012-07-22T21:51:33.923
> 
> 标签：colors, ibm-midrange, rpg

如何在某些条件执行时为子文件中的特定记录设置颜色？我有一个显示文件，其中定义了 SFL 和 CTL。我在哪里可以参考 DSP 文件中的指标或在 RPG 中使用它们来触发适当的调节。

例如：

```
 Name      Age       Location
      Rosell     26        Amsterdam
      Smarkon    31        London
      Jack       40        Chicago
      Jim        22        Mauritius 
```

我现在只想在我的子文件中显示年龄大于 30 岁的记录。(age>30) 我想要那些以不同颜色检索的记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:47:37.337

在显示文件中使用编号指示器来控制颜色属性，如下所示：

```
.....AAN01N02N03T.Name++++++RLen++TDpBLinPosFunctions+
                  S1AGE          3  0   5 12EDTCDE(Z)
    30                                  COLOR(BLU) 
```

显示文件记录中的这些数字指示符以显示文件的记录格式来回传递给 RPG 程序。因此，在您的 RPG 中，您根据人的年龄值将指示器 30 设置为打开或关闭。（**注意**：以下示例是自由形式的 RPG。）

```
If S1AGE > 30;
  *IN30 = *On;
Else;
  *IN30 = *Off;
EndIf; 
```

或者，如果您喜欢 RPG 中的简洁代码：

```
*IN30 = (S1Age > 30); 
```

# python - 检查目录在 Python 中是否有效

> ID：11604256
> 
> 赞同：3
> 
> 时间：2012-07-22T21:52:07.810
> 
> 标签：python, windows, linux, directory

我在 python 2.7 中有一个程序，它根据用户输入编写某些文件和目录。我需要确保文件和目录对 linux 和 windows 都有效，因为文件将通过两个操作系统进行交换。这些文件最初将在 linux 中创建并手动移动到 windows。

我检查了 Python 文档、堆栈交换和谷歌的几页，但没有找到任何奇怪的可用信息，因为我想这将是一个相当普遍的问题。

有简单的解决方案吗？

编辑：我想验证目录文件名，以防用户输入不适用于 linux 或 windows 的路径。例如，如果用户输入“Folder1/This:Error/File.txt”，程序会将其视为错误。

该程序将在 Linux 中运行并在 linux 中写入文件，但稍后这些文件将被移动到 Windows。正斜杠/反斜杠的差异不是问题，但其他可能适用于 linux 但不适用于 windows 的字符会出现问题。

此外，文件或目录通常不存在（因为它们即将被创建）所以我需要检查保存在字符串中的路径是否是有效路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T22:54:04.553

我不确定是否有内置功能可以满足您的需求，因此您可能需要自己动手。

您最好的选择是创建一个您知道有效的字符的“白名单”。例如：字母数字、下划线等。然后，如果用户给出的文件名有任何不在此列表中的字符，则抛出错误。这个白名单是否遗漏了一些应该起作用的字符并不重要；做对了 95%（只要 5% 是假阴性）应该没问题。

请记住，除了无效的字符之外，可能还有一些问题。编写此类函数时，请参阅[此问题以了解各种注意事项。](https://stackoverflow.com/questions/295135/turn-a-string-into-a-valid-filename-in-python)

最后，一种解决方案是自己命名文件，而不是让用户自己命名。根据您的情况，您可能可以使用一个文件名存储文件，但在应用程序中，您会看到它以不同的名称引用。当然，如果用户将直接在您的程序之外访问这些文件，这可能会造成混淆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T21:56:41.343

你的问题还是有点模糊。如果您在使用不同的操作系统时谈论构建/指定目录路径，您可能需要查看[os](http://docs.python.org/library/os.html?highlight=os#os)和 [os.path](http://docs.python.org/library/os.path.html)模块，尤其是[os.sep](http://docs.python.org/library/os.html?highlight=os.sep#os.sep)。

此外，在创建路径时，最好使用[os.path.join()而不是使用字符串函数](http://docs.python.org/library/os.path.html?highlight=os.path.join#os.path.join)

然后是这些（也许这就是您所说的“有效”文件和目录的意思）？

**os.path.isdir(路径)**

> 如果 path 是现有目录，则返回 True。这遵循符号链接，因此 islink() 和 isdir() 对于同一路径都可以为真。

**os.path.isfile(路径)**

> 如果 path 是现有的常规文件，则返回 True。这遵循符号链接，因此 islink() 和 isfile() 对于同一路径都可以为真。

还有其他许多 os.path 函数，例如`os.path.islink()`etc，如果这与您所询问的内容相符，您可能会在那里找到答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-28T16:54:48.047

如果您使用 os.path.join 创建目录字符串，您将根据您所处的环境正确写入路径。然后您可以使用 os.path.isdir，如上所示。验证字符串是否指向现有目录

# java - 在 JNI 中获取方法地址

> ID：11604257
> 
> 赞同：0
> 
> 时间：2012-07-22T21:52:22.953
> 
> 标签：java, java-native-interface

完成后：

```
jmethodID mid = (*env)->GetMethodID(env, cls, "run", "()V"); 
```

如何获得运行地址，以便将函数指针作为参数传递给 C 函数？也许某个`jmethodID`领域？我无法在 jni 文档中找到它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:08:38.113

您在 C/C++ 中填充的方法将如下所示：

```
#include "MyTest.h"

JNIEXPORT void JNICALL 
 Java_InstanceMethodCall_nativeMethod(JNIEnv *env, jobject obj)
 {
     jclass cls = (*env)->GetObjectClass(env, obj);
     jmethodID mid = (*env)->GetMethodID(env, cls, "run", "()V");
     (*env)->CallVoidMethod(env, obj, mid);
 } 
```

签名是使用 javah 生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:44:18.847

你不能。您必须使用 API 的 CallXXXMethod() 系列。这就是他们的目的。如果你不能干扰需要函数指针的代码，你将不得不自己用 C 编写回调并让它自己调用 CallXXXMethod()，以某种方式保存对象和方法ID。

# php - 自动刷新页面

> ID：11604261
> 
> 赞同：7
> 
> 时间：2012-07-22T21:53:13.230
> 
> 标签：php, javascript, jquery, html

我将创建一个 JQuery 幻灯片放映，但需要每 5 分钟刷新一次页面以更改内容。

我知道我可以通过一些 Javascript 来做到这一点，但这可以在客户端进行更改以避免页面刷新。服务器有没有办法让页面超时并强制刷新？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-22T21:55:08.303

除了 javascript 重新加载之外，您还可以发送刷新标头：

```
header("Refresh: 300;url='http://thepage.com/example'"); 
```

浏览器将在 300 秒后重定向，不管 javascript。虽然可以在浏览器的配置中禁用它，但通常不会禁用它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-22T22:00:10.830

元刷新将非常简单：

```
<meta http-equiv="refresh" content="300"> 
```

300 表示它将每 300 秒或 5 分钟刷新一次。通过这种方式，您不使用 JavaScript，因此用户无法将其关闭。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-22T21:54:44.297

您无法**强制**页面从服务器重新加载。

在 JavaScript 中执行此操作的方法很简单：

```
setTimeout(function() {
    window.location.reload();
}, 5000); 
```

尽管这可以在客户端被覆盖，但调节器用户不会弄乱你的脚本。

* * *

**作为旁注：**您有什么理由如此*坚持*重新加载页面？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T12:20:32.867

**JavaScript 方法**

```
var timer = null;

function auto_reload()
{
  window.location = 'http://domain.com/page.php';
}

<body onload="timer = setTimeout('auto_reload()',10000);"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T12:24:42.883

**META标签方法**

```
The following refreshes the page every 30 seconds.

<head>
<meta http-equiv="refresh" content="30" />
</head> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-30T08:04:48.113

## 使用 PHP

我会使用可以在任何页面上调用而无需设置 url 的 php 函数

```
 // write the function
    function refresh( $time ){
        $current_url = $_SERVER[ 'REQUEST_URI' ];
        return header( "Refresh: " . $time . "; URL=$current_url" );
    }

    // call the function in the appropriate place
    refresh( 4 );   
    // this refreshes page after 4 seconds 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-22T22:01:21.083

另一种重新加载的方法是使用`window.location`：

```
 setTimeout(function(){
        window.location.href = "YOUR_PAGE_URL";
    }, 5000); 
```

# java - 在 Swing JAVA 中刷新表模型或 GUI

> ID：11604282
> 
> 赞同：2
> 
> 时间：2012-07-22T21:56:26.667
> 
> 标签：java, swing, jtable, tablemodel

在我一直在处理的程序中，我需要用新数据刷新表。目前，由于我是 GUI 新手，我打算用一个新表刷新整个 GUI。我的程序会这样做，但它最终会在之前的 GUI 下构建。

为了继续这个项目并继续前进直到我可以重建，我想做两件事之一。要么使以前的 GUI 无效并使用新的 GUI，要么编辑表模型。现在，我使用的是 DefaultTableModel，因为我是用 JTable 构建的。三个关键文件是

AppGUI.java

```
//compile javac -cp ;./jsoup-1.6.3.jar;commons-logging-1.1.1.jar;commons-httpclient-3.0.1.jar;commons-codec-1.6.jar;httpclient-4.2.jar AppGUI.java

public class AppGUI extends JFrame{

public AppGUI(Company company)throws Exception {

        retrieveGUI(company);
}

public void retrieveGUI(Company company){
        this.company = company;
        incomeStatementPane = new IncomeStatementPane();
        balanceSheetPane = new BalanceSheetPane();
        cashFlowsPane = new CashFlowsPane();

        JTabbedPane leftTabbedPane = new JTabbedPane();             //Left Pane
        JComponent panel1 = incomeStatementPane.render(company);            //Income Statement 
        leftTabbedPane.addTab("Income Statement", panel1);
        leftTabbedPane.setMnemonicAt(0, KeyEvent.VK_1);
        JComponent panel2 = balanceSheetPane.render(company);               //Balance Sheet PAnel
        leftTabbedPane.addTab("Balance Sheet", panel2);
        leftTabbedPane.setMnemonicAt(1, KeyEvent.VK_2);
        JComponent panel3 = cashFlowsPane.render(company);                  //Cash Flows Panel
        leftTabbedPane.addTab("Cash Flows", panel3);
        leftTabbedPane.setMnemonicAt(2, KeyEvent.VK_3);

        JTabbedPane rightTabbedPane = new JTabbedPane();            //Right Pane
        JComponent panel4 = LiquidityPane.render(company);                  //Liquidity
        rightTabbedPane.addTab("Liquidity", panel4);
        //ratioTabbedPane.setMnemonicAt(3, KeyEvent.VK_4);
        JComponent panel5 = ProfitabilityPane.render(company);              //Profitability 
        rightTabbedPane.addTab("Profitability", panel5);
        //ratioTabbedPane.setMnemonicAt(4, KeyEvent.VK_5);
        JComponent panel6 = LongTermSolvencyPane.render(company);           //Long Term Solvency
        rightTabbedPane.addTab("Long Term Solvency", panel6);
        //ratioTabbedPane.setMnemonicAt(5, KeyEvent.VK_6);
        JComponent panel7 = CashFlowAdequacyPane.render(company);           //Cash Flow 
        rightTabbedPane.addTab("Cash Flow", panel7);

        add(rightTabbedPane, BorderLayout.CENTER);
        add(leftTabbedPane, BorderLayout.WEST);
        JPanel bottomPanel = new JPanel();
        bottomPanel.setBackground(new Color(150, 150, 150));

        JButton computeBtn = new JButton("Compute Ratios");
        //ActionListener computeBtnListener = new computeListener();        //computebutonlistener
        //computeBtn.addActionListener(computeBtnListener);     //actionlistener

        //compute()
        bottomPanel.add(computeBtn, BorderLayout.EAST);

        JPanel tickerPanel = new JPanel();
        JLabel tickerLabel = new JLabel("Search Ticker:");
        final JTextField tickerField = new JTextField(10);

        JButton searchBtn = new JButton("Search");
        searchBtn.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e){
                final String newTicker = tickerField.getText();
            try{
            refresh(tickerField.getText());
            }
            catch(Exception ae){}
            }
        });

        tickerPanel.add(tickerLabel/*, BorderLayout.WEST*/);
        tickerPanel.add(tickerField/*, BorderLayout.WEST*/);
        tickerPanel.add(searchBtn);
        add(tickerPanel, BorderLayout.NORTH);
        add(bottomPanel, BorderLayout.SOUTH);

}

public void setCompany(Company company) {
    this.company = company;
}

// Enter new symbol.
// compnay 

public void refresh(String newTicker)throws IOException{
Company newCompany = new Company(newTicker);  // Creates new Company. Updating methods are called from constructor automatically.
//System.out.println(newTicker);
//frame.invalidate();
//frame.validate();

retrieveGUI(newCompany);     // Stuff from contstructor.    
}

//public void retrieveNewData(String newTicker){
//Company newCompany = new Company(newTicker);

//}

private Company company;//company from ticker JLabel
private IncomeStatementPane incomeStatementPane;
private BalanceSheetPane balanceSheetPane;
private CashFlowsPane cashFlowsPane;

    public static void main(String[] args) throws Exception{
        Company company = new Company("FTK"); // Creates new Company. Updating methods are called from constructor automatically.
        AppGUI frame = new AppGUI(company); // Creates new App GUI.  Various panes are initialized from constructor.
        frame.retrieveGUI(company);
        frame.setTitle("Financial Calculator | Ratios");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setMinimumSize(new Dimension(1000, 500));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

//      public compute(){
//          refresh();
//          render();
//      }

} 
```

公司.java

```
public class Company {
//Variables and Objects

String Ticker;

private Object[][] incomeStatementInfo = new String[52][11];
private Object[][] balanceSheetInfo = new String [46][11];
private Object[][] cashFlowsInfo = new String [22][11];

Company(){}

Company(String newTicker)throws IOException{
    this.Ticker = newTicker;
    updateCompanyInfo();
}

    //Get Methods
    public Object[][] getIncomeStatementInfo() {
        return incomeStatementInfo;
    }   

    public Object[][] getBalanceSheetInfo(){
        return balanceSheetInfo;
    }
    public Object[][] getCashFlowsInfo(){
        return cashFlowsInfo;
    }

    public void investoolsLogin(){
    HttpClient client = new HttpClient();  

    GetMethod method = new GetMethod("https://online.investools.com/authentication/auth.iedu");  
    client.getParams().setParameter("userid", "d*********");  
    client.getParams().setParameter("password", "S****"); 
    client.getParams().setParameter("http.protocol.single-cookie-header", true);
    client.getParams().setCookiePolicy(CookiePolicy.BROWSER_COMPATIBILITY);
    }

    //Updating Methods from Internet or computer
    public void updateCompanyIs()throws IOException{

    File f = new File ("Data/"+(Ticker)+"/IS.txt");
    if(f.exists() == true){

        Scanner input = new Scanner(f);

        while (input.hasNextLine()){    
        for (int row = 0, row_size = incomeStatementInfo[row].length; row < row_size; row++){
                for (int col = 0, col_size = incomeStatementInfo.length; col < col_size; col++){
                    if(input.hasNextLine()){
                    incomeStatementInfo[col][row] = input.nextLine();
                    }
                }
            }           
        }
    }

    if(f.exists() == false){
    //OptionPane.showMessageDialog("Offline Ticker Data Does Not Exist");
        investoolsLogin();

        Document doc = Jsoup.connect("http://toolbox.investools.com/graphs/fundamentalAnalysis.iedu?report=BS&symbol="+(Ticker)).get();

        System.out.println("doc is null: " + (doc == null));
        // Elements table = doc.select("table");
        Elements columns = doc.getElementById("fundamentalsForm").children().select("table").get(0).select("tr").get(0).select("td");
        Iterator<Element> columnIterator = columns.iterator();
        int col = 0;
        int row = 0;
                while (columnIterator.hasNext()) {
                    Element column = columnIterator.next();
                    Elements rows = column.select("table").get(0).select("tr");
                    Iterator<Element> rowsIterator = rows.iterator();
                    col = col + 1;
                    while (rowsIterator.hasNext()){
                    row = row + 1;
                    //Element rowIterator.next = ;
                    incomeStatementInfo[col][row] = rowsIterator.next();
                }
            }
        }
    }   
    public void updateCompanyBs()throws IOException{

    File f = new File ("Data/"+(Ticker)+"/BS.txt");
    if(f.exists() == true){
        //OptionPane.showMessageDialog("Offline Ticker Data Does Not Exist");

        Scanner input = new Scanner(f);
            while (input.hasNextLine()){
            for (int row = 0, row_size = balanceSheetInfo[row].length; row < row_size; row++){
                for (int col = 0, col_size = balanceSheetInfo.length; col < col_size; col++){
                    if(input.hasNextLine()){
                    balanceSheetInfo[col][row] = input.nextLine();
                    }
                }
            }                   
        }
    }   
    if(f.exists() == false){
        investoolsLogin();

        Document doc = Jsoup.connect("http://toolbox.investools.com/graphs/fundamentalAnalysis.iedu?report=BS&symbol="+(Ticker)).get();
            // Elements table = doc.select("table");
        Elements columns = doc.select("fundamentalsForm").first().select("table").get(0).select("tr").get(0).select("td");
        Iterator<Element> columnIterator = columns.iterator();
        int col = 0;
        int row = 0;
                while (columnIterator.hasNext()) {
                    Element column = columnIterator.next();
                    Elements rows = column.select("table").get(0).select("tr");
                    Iterator<Element> rowsIterator = rows.iterator();
                    col = col + 1;
                    while (rowsIterator.hasNext()){
                    row = row + 1;
                    //Element rowIterator.next = ;
                    balanceSheetInfo[col][row] = rowsIterator.next();
                }
            }
        }   
    }
    public void updateCompanyCf()throws IOException{

    File f = new File ("Data/"+(Ticker)+"/CF.txt");
    if(f.exists() == true){
        //OptionPane.showMessageDialog("Offline Ticker Data Does Not Exist");

        Scanner input = new Scanner(f);
        while (input.hasNextLine()){    
                for (int row = 0, row_size = cashFlowsInfo[row].length; row < row_size; row++){
                    for (int col = 0, col_size = cashFlowsInfo.length; col < col_size; col++){
                        if(input.hasNextLine()){
                        cashFlowsInfo[col][row] = input.nextLine();
                        }
                    }
                }                           
            }
        }

    if(f.exists() == false){    
        investoolsLogin();

            Document doc = Jsoup.connect("http://toolbox.investools.com/graphs/fundamentalAnalysis.iedu?report=BS&symbol="+(Ticker)).get();
            // Elements table = doc.select("table");
            Elements columns = doc.getElementById("fundamentalsForm").children().select("table").get(0).select("tr").get(0).select("td");
            Iterator<Element> columnIterator = columns.iterator();
            int col = 0;
            int row = 0;
                while (columnIterator.hasNext()) {
                    Element column = columnIterator.next();
                    Elements rows = column.select("table").get(0).select("tr");
                    Iterator<Element> rowsIterator = rows.iterator();
                    col = col + 1;
                    while (rowsIterator.hasNext()){
                    row = row + 1;
                    //Element rowIterator.next = ;
                    cashFlowsInfo[col][row] = rowsIterator.next();
                }
            }
        }
    }
public void updateCompanyInfo() throws IOException {
        updateCompanyIs();
        updateCompanyBs();
        updateCompanyCf();

}
} 
```

和 IncomeStatePane.java（以及我在其中构建 tablemodel 的类似其他对象类

```
public class IncomeStatementPane {

public static JComponent render(Company company) {
    // Refreshes all cells
    //Parse HTML for object company
    String[] columnNames = {"","Year","Year", "Year", "Year", "Year","Year","Year", "Year", "Year", "Year"};

    Object[][] is = company.getIncomeStatementInfo();

    JPanel isPanel = new JPanel();
    JTable isTable = new JTable(is, columnNames);
    JScrollPane scrollPane = new JScrollPane(isTable);
    isPanel.add(scrollPane, BorderLayout.CENTER);

    return isPanel;
    }
} 
```

完全可编译的版本是 @ [http://dl.dropbox.com/u/43354605/IS.zip](http://dl.dropbox.com/u/43354605/IS.zip)

在执行代码搜索时，如何让 AppGUI 无效并重新绘制，或更新表模型。（我知道 GUI 刷新可能并不理想，但我只想继续对版本进行最少的重建）。如果有人有任何见解可以帮助我推动这个项目，那就太好了。PS为了查看第二个gui如何在前一个gui下刷新，您需要最大化窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:13:42.080

您需要做的就是修改表格的模型。它将触发适当的事件，这将使视图自行刷新。例如，要添加新行：

```
DefaultTableMode model = (DefaultTableModel) table.getModel();
model.addRow(newRow); 
```

浏览[DefaultTableModel 的 javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)以了解所有可能的操作。并阅读[有关 JTable 的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

# c++ - Boost BCP 不输出任何文件？

> ID：11604285
> 
> 赞同：7
> 
> 时间：2012-07-22T21:57:12.290
> 
> 标签：c++, boost, bcp, normal-distribution

我正在尝试使用[Boost Copy (BCP)](http://www.boost.org/doc/libs/1_50_0/tools/bcp/doc/html/index.html)实用程序将`normal_distribution`类从 Boost 中提取出来。但是，当我这样做时`bcp normal_distribution ./my_normal_distribution_dir`， my_normal_distribution_dir 目录中不会出现任何内容。

以下是有关我正在执行此操作的环境的一些更详细的背景：

在 Mac OS 10.7 上，我下载了 Boost 1.50 和未去皮的源文件。在顶级 Boost 目录中，我做了`./bootstrap.sh`. 然后，我做了`./bjam ./tools/bcp`，它在 ./dist/bin 目录中生成了一个 bcp 可执行文件。我创建了一个名为 my_normal_distribution_dir 的目录。然后，我尝试了以下命令来提取`normal_distribution`类：

```
./dist/bin/bcp normal_distribution ./my_normal_distribution_dir
./dist/bin/bcp --list normal_distribution --boost=./ ./my_normal_distribution_dir 
./dist/bin/bcp --list normal_distribution --boost=./ output-path:./my_normal_distribution_dir 
```

我也尝试使用 my_normal_distribution_dir 的绝对路径。

所有这些都给出以下输出：

```
no errors detected 
```

但是，在尝试了所有这些东西之后，my_normal_distribution_dir 目录仍然是空的！我应该怎么办？

另外，感谢[这个线程](https://stackoverflow.com/questions/11596959/compiling-with-individual-boost-libraries-without-installing-boost)建议 BCP。一旦我们解决了上述问题，BCP 应该可以完美地处理我的用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:19:22.133

我从来没有解决这个问题。我最终只是从 Boost 代码库中手动提取了我需要的文件。不过，我很想学习如何以“正确”的方式进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-25T01:00:03.577

老问题，但万一其他人遇到这个问题，我在这里遇到了类似的问题，我发现 bcp 对名称中使用的文件夹很挑剔。所以虽然`dist/bin/bcp boost/range/irange mydir`并`dist/bin/bcp irange mydir`没有工作，`dist/bin/bcp range/irange`但确实如此。所以我猜在上面的情况下，

`./dist/bin/bcp random/normal_distribution ./my_normal_distribution_dir`

可能有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T16:23:51.997

我想你需要类似的东西

```
bcp --list math/distributions/normal.hpp 
```

文档： http: [//www.boost.org/doc/libs/1_59_0/tools/bcp/doc/html/index.html#bcp.syntax.module](http://www.boost.org/doc/libs/1_59_0/tools/bcp/doc/html/index.html#bcp.syntax.module)

# testing - 通用 JUnit 测试类

> ID：11604288
> 
> 赞同：7
> 
> 时间：2012-07-22T14:22:37.893
> 
> 标签：testing, junit

我写了一个接口`MyInterface`，它将由不同的实现者实现。

我还编写了一个类`MyInterfaceTest`，其中包含所有实现者应该能够用来测试其实现的通用测试方法。

我只是不知道如何使它作为 JUnit 测试工作。

目前，我有这样的事情：

```
public class MyInterfaceTest {
    private static MyInterface theImplementationToTest = null;

    @BeforeClass public static void setUpBeforeClass() throws Exception {
                // put your implementation here:
        theImplementationToTest = new Implementation(...);
    }

    @AfterClass public static void tearDownAfterClass() throws Exception { 
        theImplementationToTest = null;
    }

    @Test public void test1() { /* uses theImplementationToTest */ }    
    @Test public void test2() { /* uses theImplementationToTest */ }    
} 
```

我使用静态方法`setUpBeforeClass`是因为每个实现的初始化都需要很多时间，所以我想为所有测试初始化​​一次。

使用这个版本的测试，实现者必须更改代码`setUpBeforeClass`并放置他们自己的实现。

我确信还有另一种编写方式`MyInterfaceTest`，这样实现者只需继承它或向它发送一个参数，而无需更改代码。但是，我在 JUnit 方面的经验不足，无法使其正常工作。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T14:36:44.680

您可以让子类仅实现 before 类方法并继承所有测试。

```
import org.junit.*;

public class ImplementingClassTest extends MyInterfaceTest {

    @BeforeClass
    public static void setUpBeforeClass() throws Exception {
        // put your implementation here:
         theImplementationToTest = new MyInterfaceImpl();
    }

} 
```

这使您正在编写的抽象类看起来像：

```
import org.junit.*;

public abstract class MyInterfaceTest {
    protected static MyInterface theImplementationToTest = null;

    @AfterClass
    public static void tearDownAfterClass() throws Exception {
        theImplementationToTest = null;
    }

    @Test
    public void test1() { /* uses theImplementationToTest */
    }

    @Test
    public void test2() { /* uses theImplementationToTest */
    }
} 
```

通常，您会将方法设为实现抽象所需的子类。在这里不能这样做，因为它是一种静态设置方法。（此外，您可能希望重构实例化以不花费很长时间，因为这通常是一种反模式）。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-22T14:42:20.800

您应该下载一个 jar 名称`junit-4.10.jar`并将其添加到您的项目中。然后让你的类`MyInterfaceTest`继承名为的类`TestCase`，比如`public class MyInterfaceTest extends TestCase`。

# python - 这个 python 基准测试有用吗？

> ID：11604294
> 
> 赞同：1
> 
> 时间：2012-07-22T21:57:55.320
> 
> 标签：python

我最近尝试在 python 中运行 Project Euler 问题。我相信它会做 100^5 步之类的事情。

在看到我的解决方案花费了太长时间（它应该在一分钟内运行）之后，我问自己是否*有任何*运行这么多步骤的 python 程序是可行的（在一分钟内）

所以，我设计了一个愚蠢的小测试

```
def fun():
  l=range(1,100)
  for x in l:
     for y in l:
        for k in l:
           for n in l:
               for h in l:
                  s=1

>>> t = timeit.Timer('demorado.fun()','import demorado')
>>> t.timeit(1)
1202.484529018402
>>> 
```

有意义吗？它是否证明任何具有这么多步骤的程序（在这种情况下，我猜有 2*(100^5)）总是需要大约 20 分钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:02:45.337

欧拉计划问题不应该在一分钟内运行，因为您的编程语言足够*快*，而是因为存在一种比蛮力*更聪明的解决方案。*

但在你的情况下，是的，你会得到一个循环`99^5`时间的函数（不是`100^5`因为`range(1,100)`is `1, 2, ..., 99`）......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T22:05:28.607

这是一个合理的假设，尽管我不确定它是否在做你想要的。在现实生活中，这可能更接近：

```
for i in xrange(100 ** 5): pass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T22:06:26.863

对于python，这可能是一个很好的估计。使用 numpy 或 C++ 扩展可能会加快您的 Project Euler 代码，但请记住 Project Euler 上的所有问题都旨在在 <1 分钟内解决。您不太可能需要运行 100^5 次操作才能得出正确的解决方案。如果我是你，我会尝试从不同的角度解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T22:09:57.863

> 这是否证明任何有这么多步骤的程序总是需要大约 20 分钟？

取决于您对“步骤”的定义。以下代码需要大约 99^5 次浮点运算，但运行时间约为 1 秒：

```
import numpy as np
a = np.zeros(shape=(1681, 1681), dtype=np.float32) # 1681 x 1681 matrix
b = np.dot(a, a) # matrix product 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T22:02:36.007

尝试`pass`而不是`s=1`在内循环中。

此外，使用`numpy.nditer`“external_loop”选项，或者如果循环成为您的瓶颈，则在 Cython 中编写循环。

# java - Java - 错误消息：'无法从 void 转换为字符串

> ID：11604298
> 
> 赞同：0
> 
> 时间：2012-07-22T21:58:33.437
> 
> 标签：java, string, void

我正在为分配创建一个简单的控制台小程序，但在尝试运行我的应用程序时遇到了错误。错误是：
“类型不匹配：无法从 void 转换为字符串”。

由于我有一个反复出现的“ElseIf”语句，因此该错误发生了四次。
这是问题所在的元素：

```
String thirdNum = println("Would you like a third number?(Y/N)"); 
```

这是完整的代码：

```
import acm.program.*;

    public class abacusConsole extends ConsoleProgram {
        public void run() {
            println("This program is a basic calculator two numbers!");
            println("Operations that the program recognises: \n Add \n Subtract \n Multiply \n Divide");
            String operator = readLine("Which operator would you like to use?");

            if (operator.equals("Add")) {
                int n1 = readInt("First Number");
                int n2 = readInt("Second Number");
                String thirdNum = println("Would you like a third number?(Y/N)");
                if (thirdNum.equals("Y")) {
                    int n3 = readInt("Third Number:");
                    int total = n1 + n2 + n3;
                    println(+n1+" + "+n2+" + "+n3+" = "+total+".");
                } else if (thirdNum.equals("N")) {
                    int total = n1 + n2;
                    println(+n1+" + "+n2+" = "+total+".");
                } else {
                    println("Please reload the application and type in either 'Y' or 'N'");
                }
            } else if (operator.equals("Subtract")) {
                int n1 = readInt("First Number");
                int n2 = readInt("Second Number");
                String thirdNum = println("Would you like a third number?(Y/N)");
                if (thirdNum.equals("Y")) {
                    int n3 = readInt("Third Number:");
                    int total = n1 - n2 - n3;
                    println(+n1+" - "+n2+" - "+n3+" = "+total+".");
                } else if (thirdNum.equals("N")) {
                    int total = n1 + n2;
                    println(+n1+" - "+n2+" = "+total+".");
                } else {
                    println("Please reload the application and type in either 'Y' or 'N'");
                }
            } else if (operator.equals("Multiply")) {
                int n1 = readInt("First Number");
                int n2 = readInt("Second Number");
                String thirdNum = println("Would you like a third number?(Y/N)");
                if (thirdNum.equals("Y")) {
                    int n3 = readInt("Third Number:");
                    int total = n1 * n2 * n3;
                    println(+n1+" x "+n2+" x "+n3+" = "+total+".");
                } else if (thirdNum.equals("N")) {
                    int total = n1 * n2;
                    println(+n1+" x "+n2+" = "+total+".");
                } else {
                    println("Please reload the application and type in either 'Y' or 'N'");
                }
            } else if (operator.equals("Divide")) {
                    int n1 = readInt("First Number");
                    int n2 = readInt("Second Number");
                    String thirdNum = println("Would you like a third number?(Y/N)");
                    if (thirdNum.equals("Y")) {
                        int n3 = readInt("Third Number:");
                        int total = n1 / n2 / n3;
                        println(+n1+" / "+n2+" / "+n3+" = "+total+".");
                    } else if (thirdNum.equals("N")) {
                        int total = n1 / n2;
                        println(+n1+" / "+n2+" = "+total+".");
                    } else {
                        println("Please reload the application and type in either 'Y' or 'N'");
                    }
            }   
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:01:19.320

查看您的代码的这一行

```
String operator = readLine("Which operator would you like to use?");` 
```

并将其与导致错误的那个进行比较

```
String thirdNum = println("Would you like a third number?(Y/N)"); 
```

看起来你放错地方`readLine`了`println`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:00:50.880

看起来您的 println 函数被声明为 void（请附上它的签名 btw），但您正试图将其结果（void）分配给 String 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T22:01:09.957

`println()`方法没有返回类型，因此它返回`void`并且您显然不能将其分配给`String`引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T22:03:45.670

```
 String thirdNum = println("Would you like a third number?(Y/N)"); 
```

println 或 (printline) 正是这样做的。它打印一行并且不返回任何内容。您尝试将任何内容（void）放入字符串中。那是行不通的。

你可能打算使用另一个

```
 readline 
```

# c# - 创建字符数组的快捷方式

> ID：11604303
> 
> 赞同：21
> 
> 时间：2012-07-22T21:59:14.600
> 
> 标签：c#, array-initialization

由于我喜欢`Split()` `string`s，我通常使用

```
new char[] { ';' } 
```

或类似的参数用于`Split()`.

在编译时创建一个包含一个元素的字符数组有什么捷径吗？不是我介意打字，而是...

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-22T22:02:22.530

特别是对于多个元素，以下快捷方式很好：

```
";".ToCharArray() 
```

您可以将其与多个字符一起使用：

```
";,\t".ToCharArray() 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-22T22:01:11.533

在 C# 3 中，您可以使用隐式类型数组：

```
new[] { ';' } 
```

如果你没有传递 a `StringSplitOptions`，你可以简单地利用`params`参数：

```
.Split(',') 
```

# ruby-on-rails - Rails 和 bootstrap - 将 HTML 标记添加到提交按钮文本

> ID：11604304
> 
> 赞同：29
> 
> 时间：2012-07-22T21:59:19.690
> 
> 标签：ruby-on-rails, twitter-bootstrap

我有一个使用 ajax 的喜欢/不喜欢按钮的表单：

```
= form_for like, :html => { :method => :delete}, :remote => true do |f|
= f.submit pluralize(@video.likes.count, 'like'), :class => "btn btn-warning btn-mini", "data-disable-with"=> "Just a moment..." 
```

表格完美运行。

我想在提交按钮的文本前添加一个图标。添加图标的haml代码如下（twitter bootstrap）：

```
%i.icon-heart.icon-white 
```

有没有办法将此html添加到按钮？我尝试将其添加为纯 html，但 rails 将其呈现为文本。

**更新**

我设法将提交按钮封装在一个包含图标和适当样式的跨度类中。我现在需要删除按钮上的所有样式...

```
%span.btn.btn-danger.btn-mini
  %i.icon-heart.icon-white
  = f.submit pluralize(@video.likes.count, 'like') 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-07-24T22:35:58.887

感谢 ismaelga，我发现[了这个 SO question](https://stackoverflow.com/questions/10858582/html-code-inside-buttons-with-simple-form)。

这是解决方案：

```
<%= button_tag(type: 'submit', class: "btn btn-primary") do %>
 <i class="icon-ok icon-white"></i> Save
<% end %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-12T22:29:04.647

问题本身的公认答案将起作用，但更像是一个补丁，而不是保持代码风格清晰一致的完美解决方案。它回溯到使用标准和手动查看方法： `#button_tag`. 我倾向于避免使用 #submit_tag、#form_tag、#input_tag ... 等手动方法，因为它们与支持的模型或表单模型本身无关，您需要手动对它们执行所有操作。尽管提交与`f.`a 中的每个输入都没有联系，`form_for`例如`f.input ...`，它与样式、代码可读性和良好的编程实践有关。此代码运行良好（form_for 和 simple_form）：

```
= f.button :button, type: :submit, class: 'class1 class2 ... classN' do
    = 'button call to action text'
    %i.fa.fa-download.ml5 // => haml icon as requested 
```

希望它可以帮助其他人像我一样尝试避免`_tag`使用方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-13T22:28:52.750

另一种选择可以`button`代替`submit`

请参阅 Rails 文档[FormBuilder#button](http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-button)

```
= f.button :class => "btn btn-warning btn-mini" do
  %i.icon-heart.icon-white
    = pluralize(@video.likes.count, 'like') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-22T22:20:33.020

试试这个。我没有测试过，但我认为可以做这样的事情。

```
= f.submit :class => "btn btn-warning btn-mini", "data-disable-with"=> "Just a moment..." do
  %i.icon-heart.icon-white
  = pluralize(@video.likes.count, 'like')
end 
```

因此，如果您使用 simple_form，这是可能的。对不起。

所以另一个尝试是

```
= f.submit "#{pluralize(@video.likes.count, 'like')} <i class='icon-heart icon-white'/>".html_safe, :class => "btn btn-warning btn-mini", "data-disable-with"=> "Just a moment..." 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-24T18:18:43.140

贾斯汀 D 的回答也帮助了我。如果您从 Google 来到这里，并且正在寻找 Slim 实现，您可以这样做：

```
= button_tag(type: 'submit', class: 'btn btn-default') do
    span.glyphicon.glyphicon-floppy-disk>
    | Save
end 
```

Slim 用户会认识到`>`'s 的必要性。

截至 2014 年 9 月 24 日，这对我使用 Rails 4.1.5、Ruby 2.1.2 和 bootstrap-sass 3.2 有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-16T00:36:43.667

解决方案

```
= button_to('Add', line_item_path, method: :post , class: "btn btn-warning btn-lg" , params: { param1: 'value1',  param2: 'value2' }) 
```

[http://qiita.com/tomomomo1217/items/a5f790c31670587e2d87](http://qiita.com/tomomomo1217/items/a5f790c31670587e2d87)

[如何在链接中放置图像？](https://stackoverflow.com/questions/18117191/how-to-place-an-image-inside-of-a-link/32030708#32030708)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-06-17T14:08:58.613

请尝试以下代码。有用

```
<%= f.submit :class => "btn btn-success btn-mini" %> 
```

# mysql - 模型上的识别和非识别关系

> ID：11604307
> 
> 赞同：2
> 
> 时间：2012-07-22T21:59:46.323
> 
> 标签：mysql, database, model, relational-database, mysql-workbench

我做了我的模型的草图，但我不知道关系（识别和非识别）是否正确，我不想继续让它过去。

如果您可以看看我所做的，并告诉我这是否正确（或不正确），我将不胜感激。

![我的数据库模型](../Images/ca04e573e31563ed7f5e5fc107d02e38.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:43:29.017

***一种产品可能有多个订单；一份订单可能包含许多产品：***

您的交叉引用表具有以下结构：

```
+-----------------+
| orders_products |
+-----------------+
| id           PK |
| orders_id    PK |
| products_id  PK |
+-----------------+ 
```

我认为自动递增`id`字段是不必要的，除非订单可以多次包含相同的产品（这没有意义）。如果您这样做是为了记录订单上指定的每种产品的*数量*`quantity`，最好为每种产品设置一列`order_id -> product_id`。我将该表的结构更改为：

```
+-----------------+
| orders_products |
+-----------------+
| orders_id    PK |
| products_id  PK |
| quantity        |
+-----------------+ 
```

* * *

***一个用户可能有多个地址预设；一个地址预设可能只属于一个用户：***

我认为将`addresses`表连接到表不是一个好主意`orders`。如果用户删除或更新他/她的地址预设之一怎么办？删除/更改将级联到包含该地址的任何过去订单。根据您设置级联操作的方式，这些订单记录将被完全删除，或者您可能会收到有关旧订单的错误信息。这是不适合引用完整性的一种情况。下订单后，为该订单指定的送货地址以后将无法更改。

您应该做的是`addresses`仅使用该表来存储用户拥有的地址预设列表（以便可以为用户生成下拉选择）。当用户提交订单时，您只需将实际的文本地址信息插入表格上的“shipping_address”列`orders`。

* * *

为了更好地理解识别与非识别关系之间的区别，请参阅：

*   [识别关系和非识别关系有什么区别？](https://stackoverflow.com/questions/762937/whats-the-difference-between-identifying-and-non-identifying-relationships/762994#762994)

我的回答在这里：

*   [识别或非识别关系中的子表是哪个？](https://stackoverflow.com/questions/11108846/which-is-the-child-table-in-a-identifying-or-non-identifying-relationship/11110385#11110385)

# php - 从 Meta 中删除某些链接

> ID：11604308
> 
> 赞同：1
> 
> 时间：2012-07-22T22:00:04.933
> 
> 标签：php, html, wordpress

如何从我的 wordpress 博客的 META 部分中删除`Log in`or`Log out`和和。`Wordpress.org`如果相关的话，我会使用 21 点。我试过编辑 sidebar.php 但似乎没有任何改变，我的意思是这部分：

![在此处输入图像描述](../Images/7896104559dcc9ce5f4ed42e70de379c.png)

```
<aside id="meta" class="widget">
                    <h3 class="widget-title"><?php _e( 'Meta', 'twentyeleven' ); ?></h3>
                    <ul>
                        <?php wp_register(); ?>
                        <li><?php wp_loginout(); ?></li>
                        <?php wp_meta(); ?>
                    </ul>
                </aside> 
```

尝试删除`<?php wp_meta(); ?>`和/或`<li><?php wp_loginout(); ?></li>`，没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:24:05.617

既然您要求 PHP 解决方案...

把它放在顶部`sidebar.php`：

```
<?php
function _wpMeta($o){
  $links = 'Log in|Logout|WordPress.org';
  return preg_replace('#<li>.+?('.$links.').+?</li>#','',$o);
}
ob_start("_wpMeta");
?> 
```

这在底部：

```
<?php ob_end_flush(); ?> 
```

# php - 如何将二进制（blob）数据从 mysql 传递到 imagejpeg 以保存文件？

> ID：11604309
> 
> 赞同：0
> 
> 时间：2012-07-22T22:00:07.223
> 
> 标签：php, mysql, gd

我正在将存储在数据库中的所有图像转换为文件系统结构，但似乎无法将它们保存到文件中。这是我正在尝试的。

```
....
$SQL = "SELECT thumbnail FROM profile_image WHERE user_id=7";
$r = mysql_query($SQL) or die ("Error");

$image=mysql_result($r,0,"thumbnail");

$destination = SITE_ROOT .'/photos/7/test.jpeg';

imagejpeg($image, $destination);

//header("Content-type: image/jpeg");
//echo ($image); 
```

它在抱怨一个无效的资源......我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:07:45.290

尝试使用[imagecreatefromstring](http://php.net/manual/en/function.imagecreatefromstring.php)创建一个有效的资源。

```
// ...
if (false !== $im = imagecreatefromstring($image)) {
    imagejpeg($im, SITE_ROOT . '/photos/7/test.jpeg');
    imagedestroy($im);
} 
```

# silverlight - CSS图像均匀填充拉伸？

> ID：11604311
> 
> 赞同：1
> 
> 时间：2012-07-22T22:00:34.387
> 
> 标签：silverlight, html, css

我正在尝试将一些 Silverlight 代码移植到 CSS，因为客户要求我这样做，但我有点卡住了。Silverlight 应用程序用于在网页顶部显示 5 张图像，每个 Image 对象的 Stretch 属性设置为 UniformToFill，它不会拉伸源图像而是缩放源图像以使其适合Image 对象，并将源图像保持在 Image 对象的中心。

我想知道是否有办法在 CSS 中实现这一点，如果我必须使用 CSS3 也可以（或者 HTML5 中是否有办法）。我已经有一段时间没有进行 HTML/CSS Web 开发了，如果我有点生疏，请原谅我。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:12:54.207

您可以使用图像本身的百分比宽度来做到这一点：

[http://jsfiddle.net/R4QNk/1/](http://jsfiddle.net/R4QNk/1/)

```
img{
    display: block;
    width: 20%;
    float: left;
}​ 
```

# svg - d3.js 中 SVG 元素的聚类产生了意想不到的结果

> ID：11604316
> 
> 赞同：2
> 
> 时间：2012-07-22T22:00:56.353
> 
> 标签：svg, coffeescript, d3.js

所以我正在尝试为使用 d3.js、polymaps 和 Coffeescript 的项目做一些地图标记聚类。

我根据基础数据计算集群，然后将集群数组作为 .data(clusters) 传递到 d3

集群的位置似乎没问题。初始缩放级别上的聚类似乎没问题，并且根据我的知识是 100% 准确的。当我更改缩放级别时，乍一看一切似乎都很好，但是当我将鼠标悬停在圆圈上时，描述似乎与它们所在的位置不匹配，而之前的路线所在的位置似乎与它们的位置不匹配现在。

我在[http://bl.ocks.org/3161013](http://bl.ocks.org/3161013)准备了一个包含完整代码的示例。

我看到了两个主要的失败点：集群和更新 SVG。

集群代码相当简单，基于[Mark Tuupola](http://www.appelsiini.net/2008/11/introduction-to-marker-clustering-with-google-maps)的代码，但使用的是 coffeescript 而不是 php。

```
 cluster: (elements, distance) ->
    currentElements = elements.slice(0)
    pixelDistance = @pixelDistance()
    distLat = distance * pixelDistance.lat
    distLon = distance * pixelDistance.lon 

    clustered = []
    while currentElements.length > 0
      stop = currentElements.shift()

      cluster = []
      cluster.push stop

      i = 0
      while i < currentElements.length
        if Math.abs(currentElements[i].lat - stop.lat) < distLat and Math.abs(currentElements[i].lon - stop.lon) < distLon
          aStop = currentElements.splice i,1
          cluster.push aStop[0]
          i--
        i++
      clustered.push cluster  
    clustered 
```

SVG 更新的代码看起来像是相当直接的 d3 代码。每当移动地图时，都会调用此更新方法。如果缩放发生了变化，或者预聚类的数据发生了变化，我们重新聚类，布局，否则我们只是平移现有的点。

```
 update: ->
    if not @stops
      @stops = []

    if not @prevNumStops
      @prevNumStops = 0

    if not @prevZoom
      @prevZoom = 0

    if @zoomLevel() != @prevZoom or @prevNumStops != @stops.length
      @prevZoom = @zoomLevel()
      @prevNumStops = @stops.length 

      start = new Date()
      @clusters = @cluster(@stops,10)
      console.log @clusters
      console.log "clustering: " + ((new Date()) - start)

      start = new Date()
      marker = @selector.selectAll("g").data(@clusters)
      marker.enter().append("g")
      .append("circle")
      .attr("class", "stop no-tip")
      marker.exit().remove()
      @selector.selectAll("g").selectAll("circle")
      .attr('r', (cluster) -> if cluster.length > 1 then 5 else 3.5)
      .attr("text", (cluster) -> "<ul>" + ((("<li>" + route + "</li>") for route in stop.routes).join("") for stop in cluster).join("") + "</ul>")

    @selector.selectAll("g").attr("transform", (cluster) => 
      @transform cluster[0]
    ) 
```

我觉得这里可能缺少一些简单的东西，但我对 d3 还是很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:33:29.713

数据更改时，现有标记内的“圆圈”元素不会更新（d3 默认使用索引来确定新元素是添加（进入）、删除（退出）还是更新（默认））。这会导致文本成为该缩放级别上已存在的所有元素的先前缩放级别的旧文本。

它应该使用以下代码：

```
marker = @selector.selectAll("g").data(@clusters)

# update existing 'g' elements
marker.select('circle')
.attr('r', your_cluster_size_function)
.attr("text", your_text_function)

# add new 'g' elements
marker.enter().append("g")
.append("circle")
.attr("class", "stop no-tip")
.attr('r', your_cluster_size_function)
.attr("text", your_text_function)

# remove 'g' elements if there are too many
marker.exit().remove() 
```

# oop - 具有伴随对象的类与具有相同名称的类和对象之间有什么区别？

> ID：11604320
> 
> 赞同：13
> 
> 时间：2012-07-22T22:01:06.163
> 
> 标签：oop, scala, language-lawyer, scala-java-interop, companion-object

Scala 类的“伴生对象”可以被视为具有与类相同的完全限定名称的单例对象（即同名，在同一个包中）。它们用于保存类的所有实例共有的实用函数，作为 Java`static`方法的替代品。

但是，在文档和问题的各个地方，它都说必须在同一个编译单元中定义伴随对象。例如，它们必须在同一个文件中定义；[不能为 Java 对象定义伴生对象](https://stackoverflow.com/questions/4921827/in-scala-how-can-i-define-a-companion-object-for-a-class-defined-in-java)；[在 REPL 中，它们必须在同一输入行上定义](https://stackoverflow.com/questions/6919965/companion-object-cannot-access-private-variable-on-the-class)，因此会出现警告消息：

```
warning: previously defined class Foo is not a companion to object Foo.
Companions must be defined together; you may wish to use :paste mode for this. 
```

这意味着在类及其伴生对象之间必须有区别，而只是具有相同（完全限定）名称的类和对象。这个区别是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-22T22:01:06.163

让我们调用这个类`class SomeClass`（尽管它也可以是例如 a `trait`）。

### 私人会员

伴随对象 ( `object SomeClass`)**的方法可以访问**的实例的私有方法/数据`class SomeClass`。

如果您的伴生对象仅使用您的类的公共接口（例如仅定义常量），则没有实际区别。但是在许多情况下，让实用程序函数访问私有成员很有用。例如，`object SomeClass`可以定义一个工厂方法`apply`来设置 的私有成员`class SomeClass`，而不必在公共接口中公开 setter。因此，在这种情况下，您必须通过将 的定义`object SomeClass`与`class SomeClass`.

另一个区别是[编译器在类型（及其超类型）的伴随对象中搜索隐式](http://docs.scala-lang.org/tutorials/FAQ/finding-implicits.html#companion_objects_of_a_type)。因此，如果您使用在 的代码中定义的隐式转换`class SomeClass`，则必须在伴随对象中定义它们。

### 评论

两者的结合也解释了相同编译单元的限制。

*   `scalac``object SomeClass`在它知道`class SomeClass`它调用的私有成员之前无法编译。
*   `scalac``class SomeClass`在它知道它调用什么隐式之前无法编译。所以伴生对象必须在不迟于`class SomeClass`.

因此它们必须同时编译。此外，当前的编译器显然单独编译单独的文件（参见缺乏对跨多个文件拆分类的支持），将其限制在同一个编译单元中。

# java - 构建 WebService 应用程序的推荐方法是什么？

> ID：11604325
> 
> 赞同：0
> 
> 时间：2012-07-22T22:01:11.843
> 
> 标签：java, web-services, jakarta-ee, architecture

在 Java webapp 中，是否有存储 XSD 文件和 wsdl 文件的最佳实践？

1) 应该使用什么文件夹结构来存储 XSD 和 WSDL？（这适用于既是“消费者”又是 Web 服务的“生产者”的应用程序）。

2）我们应该使用一次性生成的 POJO，还是应该编写一个 Maven 插件（或 Ant），在每次调用“编译”任务之前自动生成 POJO。

3) 我们是否应该将 XSD 文件的内容粘贴到 WSDL 中？或者 WSDL 是否应该“导入”XSD 文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:44:09.167

1.  最好的办法是创建一个仅存储 xsd 和 wsdl 文件的专用项目/库，并将其作为依赖项添加到要生成 POJO 的模块中。

2.  Maven 插件已经可用，例如 cxf-codegen-plugin 或 wsdl2java-maven-plugin。这些运行良好，您可以自定义 POJO 的生成方式。

3.  将 XSD 导入 WSDL。

# javascript - 谷歌图表 api：修复表格中的列

> ID：11604328
> 
> 赞同：0
> 
> 时间：2012-07-22T22:01:22.503
> 
> 标签：javascript, google-visualization

我使用 gviz_api 创建了一个表。该表包含由字符串值和数值组成的列。api 自动选择列呈现自己的顺序；但是，我希望渲染按照我提供描述的顺序进行。

为了创建表，我传入了一个描述，它是一个字典和数据，它是每一行的字典列表。我认为因为描述是字典，所以排序不是明确的，所以可以随机选择。有没有办法强制 api 使用我在描述中指定的列的顺序或任何其他方式？

这是我拥有的示例描述和数据代码：

```
descr = {'field1': ('string', 'Field1'),
         'field2': ('number', 'Field2'),
         'field3': ('string', 'Field3'),
         'field4': ('string', 'Field3')}
data = [{'field1': 'value1-1', 'field2': value1-2, 'field3': 'value1-3', 'field4': 'value1-4},
        {'field1': 'value2-1', 'field2': value2-2, 'field3': 'value2-3', 'field4': 'value2-4}]

data_table = gviz_api.DataTable(description)
data_table.LoadData(data)
code = data_table.ToJSCode(stats_type_name + '_data') 
```

以及事物实际呈现的顺序：

```
field3     field2      field1     field4
value1-3   value1-2    value1-1   value1-4
value2-3   value2-2    value2-1   value2-4 
```

我希望事物出现的顺序与我在描述中指定的顺序相同：

```
field1     field2      field3     field4
value1-1   value1-2    value1-3   value1-4
value2-1   value2-2    value2-3   value2-4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:49:32.893

我决定从源头上纠正问题。我以特定顺序指定查询并期望我的结果以相同的方式。

我对`gviz_api.py`( `Line 488`)进行了本地修改

```
Change: for key, value in sorted(table_description.items()):
To    : for key, value in table_description.items(): 
```

`DataTables`现在将按照为创建提供的相同顺序呈现/公开他们的数据（以`toJS()`、`toJSON()`等方式返回） 。`DataTable`

带来额外的好处，我现在不需要一大群笨拙`views`的人来确保图表正常工作！

凯洛

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:14:07.597

所以我找到了一个黑客解决方案。从观察中，我注意到 gviz_api 在向表中添加列时使用字母顺序。我的列名有不同的标签（即 ('string', 'label') 中的第二个条目，它们不是按字母顺序排列的。为了解决这个问题，我在标签名称前加上一个数字（即 ('string', '1label') ) 以确保列的顺序是我想要的。

如果其他人找到一个不那么 hackier 的解决方案，请告诉我。

# autohotkey - 自动热键 ctrl+click = 右键单击

> ID：11604334
> 
> 赞同：8
> 
> 时间：2012-07-22T22:02:07.227
> 
> 标签：autohotkey

将控制+单击变为右键单击的代码是什么？

我在 Mac 上运行 Windows 7，并且想控制触控板上的点击，而不是两指点击。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T07:12:26.720

```
^LButton::RButton 
```

很简单！:D

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T14:03:11.807

尝试这个。这比 Juhzuri 的解决方案更类似于原生右键单击——上下文菜单出现在光标附近；它适用于不尊重 Windows 菜单键 ( `AppsKey`) 的控件；它允许拖动。

```
^LButton::
  Send {RButton Down}
  Return

^LButton Up::
  Send {RButton Up}
  Return 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T05:07:35.703

以下为我做。

```
^LButton::AppsKey 
```

我建议你从以下开始 -

[http://www.autohotkey.com/docs/Tutorial.htm](http://www.autohotkey.com/docs/Tutorial.htm)

[http://www.autohotkey.com/docs/KeyList.htm](http://www.autohotkey.com/docs/KeyList.htm)

# c++ - 组件对象模型查询接口

> ID：11604335
> 
> 赞同：0
> 
> 时间：2012-07-22T22:02:07.873
> 
> 标签：c++, com

嗨，我正在阅读 Don Box 的书“Essential COM”。我的问题是关于 IUnknown 中的 QueryInterface 方法。虽然我知道类型转换的实现被移动到接口以屏蔽客户端类型转换代码，但我不明白这是为什么。这本书在第一章中说，RTTI 的实现因编译器而异，因此在 IUnknown 中有 QueryInterface 方法的动机。但是，在客户端进行强制转换有什么问题。我的意思是只要求实现是跨供应商、跨编译器和跨平台的，客户端代码不必有任何这些约束，因此也可以在客户端进行转换。对此的任何见解将不胜感激。

谢谢， 阿卜杜勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:16:04.940

存在多重继承的情况下的强制转换需要了解实现，因此它不能纯粹是客户端。（所需要的几乎是动态演员表。）

现有机制还允许使用强制转换不会的有用实现技术——例如，QueryInterface 的结果可以是一个完全独立的对象，可能是动态创建的。

# c++ - Microtime() 等效于 C 和 C++？

> ID：11604336
> 
> 赞同：8
> 
> 时间：2012-07-22T22:02:11.930
> 
> 标签：c++, c, microtime

我想知道 C**和**C++ 中是否有与 PHP 函数 microtime() 等效的函数。我环顾四周，但找不到明确的答案。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T12:19:22.110

没有与 PHP 的 microtime() 完全等价的功能，但您可以根据以下代码创建一个具有类似功能的函数：

### Mac OS X 可能还有 Linux/Unix

```
#include <sys/time.h>
struct timeval time;
gettimeofday(&time, NULL); #This actually returns a struct that has microsecond precision.
long microsec = ((unsigned long long)time.tv_sec * 1000000) + time.tv_usec; 
```

（基于：[http](http://brian.pontarelli.com/2009/01/05/getting-the-current-system-time-in-milliseconds-with-c/) ://brian.pontarelli.com/2009/01/05/getting-the-current-system-time-in-milliseconds-with-c/ ）

* * *

### 视窗：

```
unsigned __int64 freq;
QueryPerformanceFrequency((LARGE_INTEGER*)&freq);
double timerFrequency = (1.0/freq);

unsigned __int64 startTime;
QueryPerformanceCounter((LARGE_INTEGER *)&startTime);

//do something...

unsigned __int64 endTime;
QueryPerformanceCounter((LARGE_INTEGER *)&endTime);
double timeDifferenceInMilliseconds = ((endTime-startTime) * timerFrequency); 
```

（Darcara 的回答，来自：[https](https://stackoverflow.com/a/4568649/330067) ://stackoverflow.com/a/4568649/330067 ）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T22:06:07.847

在 Linux 上，您可以使用[gettimeofday](http://linux.die.net/man/2/gettimeofday)，它应该提供相同的信息。事实上，我相信这是 PHP 在幕后使用的功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T22:06:49.313

C++11 添加了一些标准的计时函数（参见第 20.11 节“时间实用程序”），准确度很高，但大多数编译器还不支持这些。

大多数情况下，您需要使用您的操作系统 API，例如`gettimeofday`POSIX。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-22T22:07:10.530

对于代码的计时部分，请尝试[std::clock](http://www.cplusplus.com/reference/clibrary/ctime/clock/)，它返回滴答声，然后除以`CLOCKS_PER_SEC`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-06T21:33:48.103

在 c++11 中，我相信相当于 php 的`microtime(true)`是：

```
#include <chrono>
double microtime(){
    return (double(std::chrono::duration_cast<std::chrono::microseconds>(std::chrono::system_clock::now().time_since_epoch()).count()) / double(1000000));
} 
```

*   但我不确定 C 等价物是什么，或者是否有一个（正如其他人所指出的，gettimeofday 是 posix 的一部分，但不是 c/c++ 规范的一部分）

有趣的是，一微秒是百万分之一秒，但 c++ 也支持纳秒，即十亿分之一秒，我想你会得到更高的精度`std::chrono::nanoseconds`而不是`std::chrono::microseconds`，但那时你可能会遇到最大数量限制`double`，并且函数名称会产生误导（这样的函数应该有名称`nanotime()`not `microtime()`，并且返回值可能应该大于两倍），顺便说一句，我在这里收集了 php-functions-ported-to-c++：[https：/ /github.com/divinity76/phpcpp](https://github.com/divinity76/phpcpp)（其中包括 microtime()）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-22T22:21:23.463

libUTP（uTorrent 传输协议库）有一个在不同平台上获取 microtime的好[例子。](https://github.com/bittorrent/libutp/blob/master/utp_utils.cpp)

# ios - 使用 CGContextEndPage 崩溃

> ID：11604340
> 
> 赞同：0
> 
> 时间：2012-07-22T22:02:24.947
> 
> 标签：ios, core-graphics

我在使用 Core Graphics 库创建 PDF 文件时遇到了一个奇怪的问题。

使用**CGContextEndPage**方法仅在 iOS 5.1 及更高版本上会发生崩溃 (EXC_BAD_ACCESS)，在真实 iPhone 上进行测试。这不会在模拟器上发生。

我可能做错了什么？

**更新**

PDF方法有300多行。每次创建新页面时，我都会使用 CGContextBeginPage (pdfContext, &pageRect)。奇怪的是，在模拟器上测试时，没有崩溃。

**更新 2**

```
// This code block sets up our PDF Context so that we can draw to it

CGContextRef pdfContext;

CFStringRef path;

CFURLRef url;

CFMutableDictionaryRef myDictionary = NULL;

// Create a CFString from the filename we provide to this method when we call it

path = CFStringCreateWithCString (NULL, filename, kCFStringEncodingUTF8);

// Create a CFURL using the CFString we just defined

url = CFURLCreateWithFileSystemPath (NULL, path, kCFURLPOSIXPathStyle, 0);

CFRelease (path);

// This dictionary contains extra options mostly for 'signing' the PDF

myDictionary = CFDictionaryCreateMutable(NULL, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);

CFDictionarySetValue(myDictionary, kCGPDFContextTitle, title);

CFDictionarySetValue(myDictionary, kCGPDFContextCreator, CFSTR("MindScore"));

// Create our PDF Context with the CFURL, the CGRect we provide, and the above defined dictionary

pdfContext = CGPDFContextCreateWithURL (url, &pageRect, myDictionary);

// Cleanup our mess

CFRelease(myDictionary);

CFRelease(url);

for (…) {

/** START NEW PAGE */

    if (…) {

    CGContextEndPage (pdfContext);

    }

    /** START INITIALIZATION OF PAGE*/

    if (…) {

       CGContextBeginPage (pdfContext, &pageRect); 

       // This code block will create an image that we then draw to the page

       const char *picture = "pdf-sheet";

       CGImageRef image;

       CGDataProviderRef provider;

       CFStringRef picturePath;

       CFURLRef pictureURL; 

       picturePath = CFStringCreateWithCString (NULL, picture,

        kCFStringEncodingUTF8);

       pictureURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), picturePath, CFSTR("png"), NULL);

       CFRelease(picturePath);

       provider = CGDataProviderCreateWithURL (pictureURL);

       //CFRelease (pictureURL);

       image = CGImageCreateWithPNGDataProvider (provider, NULL, true, kCGRenderingIntentDefault);

       CGDataProviderRelease (provider);

       CGContextDrawImage (pdfContext, CGRectMake(0, 0, 2480, 3508),image);

       CGImageRelease (image);

       // End image code

    }
}

[...]

/** END LAST PAGE */

NSLog(@"END LAST PAGE");

CGContextEndPage (pdfContext);

CGContextRelease (pdfContext); 
```

# c# - CodeDom ReferencedAssemblies 绝对路径

> ID：11604344
> 
> 赞同：3
> 
> 时间：2012-07-22T22:02:49.007
> 
> 标签：c#, .net, wpf, assemblies, codedom

我正在`.exe`用`WPF forms`. 问题是，我需要引用一些程序集。

这就是我添加它们的方式：

```
var p = new CompilerParameters
{
    GenerateExecutable = true,
    TreatWarningsAsErrors = false,
    CompilerOptions = "/t:winexe",
    IncludeDebugInformation = false,
    OutputAssembly = dlg.FileName,
};

string[] assemblies = {
    "System", "System.Core", "System.Data", "mscorlib",
    "System.Drawing", "System.Windows.Forms", "Microsoft.CSharp",
    @"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\WindowsBase",
    @"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\PresentationCore",
    @"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\PresentationFrameWork"
};

foreach (string a in assemblies)
{
    p.ReferencedAssemblies.Add(a + ".dll");
} 
```

这工作正常，但您会注意到我必须输入 , 和 的绝对路径`Windowsbase.dll`，`PresentationCore.dll`否则`PresentationFrameWork.dll`它会因为找不到它们而引发错误。这可能不适用于所有计算机。

我能做什么？

（我想我可以只`.dll`在项目文件夹中包含 3 并将它们与应用程序一起发送并引用相对路径（如果它有效，我现在无法测试它），但是还有其他方法吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-01T15:33:13.010

一种作弊方法是，如果您在项目中引用该 dll，您可以执行以下操作：

```
typeof(System.Windows.Point).Assembly.Location 
```

这将使您摆脱 WindowsBase 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:26:50.263

您应该确保有问题的程序集已在[GAC（全局程序集缓存）](http://msdn.microsoft.com/en-us/library/yf1d93sz%28v=vs.100%29.aspx)中注册，因为当未提供绝对路径时，您的应用程序最终会在此处查找它们。

您可以通过浏览来检查哪些程序集已注册到 GAC `C:\Windows\Assembly`（假设`C:\Windows`是您的 Windows 安装目录）。

# php - PHP - print_r(get_defined_vars()); 返回空白屏幕

> ID：11604349
> 
> 赞同：2
> 
> 时间：2012-07-22T22:03:44.650
> 
> 标签：php

我正在尝试在我的 php 中获取变量转储，所以我正在使用：

```
print_r(get_defined_vars()); 
```

生成它，但无论我在哪里插入代码，它都会导致空白页。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:06:59.237

输出的变量之一可能包含阻止加载站点的 HTML、CSS 和/或 JavaScript 代码。

查看源代码（在大多数浏览器中使用`Ctrl`+`U`或右键单击 → `View Source`）而不是呈现的页面以查看您的 php 脚本输出的所有内容。

此外，通过插入一个`echo "test";`. 这应该显示出来，至少在源代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T22:09:24.750

当然你的代码是正确的，所以空白页的原因一定是其他地方有错误（如果你不把那行放进去，页面会工作吗？）；也许你的行打破了代码块的语法。

然后错误被重定向到 php_errors.log 或其他文件，或者甚至没有生成，你会看到一个空白页。

查看：

*   尽早在脚本中包含 error_reporting(E_ALL)
*   错误在 php.ini 中应该出现的位置
    *   检查那些错误日志文件（如果有）
*   检查服务器错误日志（例如 Apache 的 error_log 文件）。

清除上游错误后，您应该能够看到输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T22:19:18.823

`get_defined_vars`包含`$GLOBALS`在其返回的变量中，并且`print_r`不检查递归。因此，您只是在无限循环中结束，甚至`max_execution_time`无法将您从中拯救出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-21T13:03:23.290

也许如果您正在为使用 ioncube 作为保护的脚本开发扩展/插件，那么可能是问题所在，Ioncube 似乎停止`get_defined_vars()`作为防止逆向工程的一部分。

# php - 在 PHP 中应用错误日志记录，页面仍然是空白的

> ID：11604350
> 
> 赞同：0
> 
> 时间：2012-07-22T22:04:01.720
> 
> 标签：php

为客户在主机上工作。网站由 DreamHost 托管。index.php 文件功能齐全，但是从首页链接到的任何页面都显示为空白。我在可用的日志中找不到任何东西，所以一些搜索出现了以下代码：

```
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE); 
```

我把它放在所有适用页面的 php 代码顶部，但是没有出现任何错误，页面仍然完全空白。我更像是一个安全人员而不是开发人员，所以有人能指出我正确的方向吗？

编辑：服务器 php.ini 文件也有 display_errors = 1 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:15:33.257

检查您的代码中是否有[@-operator](http://php.net/manual/en/language.operators.errorcontrol.php)、[die](http://php.net/manual/en/function.die.php)或[exit](http://php.net/manual/en/function.exit.php)。如果是，请输出一些字符串以了解您的脚本在哪里结束或使用[error_log](http://php.net/manual/de/function.error-log.php) -function：

```
error_log("Oh no, file: ".__FILE__." on line ".__LINE__, 1, "operator@example.com"); 
```

在您的代码中包含以下错误处理程序，然后再试一次：

```
function exception_error_handler($errno, $errstr, $errfile, $errline )
{
  if (error_reporting() === 0)
  {
    return;
  }

  throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
}

set_error_handler("exception_error_handler"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:13:03.600

您可以尝试`error_log()`在调用 index.php 的每个块之前/之后添加函数（if/else、for/foreach 或 while、函数或 $this->[*]）。并继续进入从 index.php 调用的类文件 php，这样你就可以找到系统失败的地方。有时，php 系统不会打印任何错误日志，直到您打印（使用`error_log()`、`print_r()`或`echo`）问题附近的内容。

**编辑**

您可以通过命令行安装 php5-xdebug 和/或运行 index.php：

```
 php index.php 
```

发现 php 错误系统和系统出现故障的位置将非常简单。

# wordpress - 商店在 WordPress 永久链接中不起作用

> ID：11604359
> 
> 赞同：0
> 
> 时间：2012-07-22T22:05:08.530
> 
> 标签：wordpress, slug, permalinks

我对这个错误感到困惑，因为我不确定如何调试它。

我已经设置了我的 .htaccess 文件并将我的永久链接设置为自定义结构：

```
/%category%/ 
```

我也试过

```
/%postname%/ 
```

和

```
/%category%//%postname%/ 
```

这些都不起作用。

所有链接都可以正常工作，除了 Shop，它会抛出 404。如果我将 slug 覆盖到 shop-1，它就可以工作。

与蛞蝓“商店”有永久链接冲突吗？这似乎不太可能，因为它可以在我的本地机器上运行，而不是在 prod 服务器上。

这是我的 .htaccess 代码

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

我很乐意发布任何其他代码或必要的信息。我只是不确定您可能需要什么来诊断此问题。

非默认插件包括：

NivoSlider 插件 W3 Total Cache

当我停用这些插件时，它仍然会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:23:00.590

您是否使用“重定向”或任何类似的插件？如果是这样，您可能会清除那里的重定向日志并重试。

否则，您可以检查其他术语区域（例如标签）中是否存在冲突的 slug 并删除它们。

# jquery - 简单的 jQuery 加法

> ID：11604361
> 
> 赞同：0
> 
> 时间：2012-07-22T22:05:25.620
> 
> 标签：jquery

为什么

```
$(this).css("z-index") + 10; 
```

金额不加10？

我得到的结果是`1010`，而我期望得到`20`。

我认为它需要在引号中才能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:07:20.997

使用`parseInt()`- 当前您正在连接一个字符串。

`parseInt($(this).css("zIndex")) + 10"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:06:39.750

您必须先将其转换为数字：

```
+$(this).css("z-index") + 10; 
```

这是小提琴：http: [//jsfiddle.net/8pJyc/](http://jsfiddle.net/8pJyc/)

**注意：** `+"1"`是`Number("1")`.

* * *

如果您想要实际增加`z-index`，请改用：

```
$(this).css('z-index', '+=10'); 
```

这是小提琴：http: [//jsfiddle.net/8pJyc/1/](http://jsfiddle.net/8pJyc/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T22:07:02.527

```
parseInt($(this).css("z-index"), 10) + 10; 
```

# css - HTML5 页面 100% 高度问题

> ID：11604363
> 
> 赞同：6
> 
> 时间：2012-07-22T22:05:57.473
> 
> 标签：css, html, height

我正在尝试创建一个自动适应高度的应用程序页面。跟随页面中使用的 HTML 代码

```
<div id="main" role="main">
<header class="header">
    <div class="allPageHeaderImg"></div>
    <div class="logo"><img src="images/logo-viva.png" alt="VIVAGREL Logo" /></div>
</header>
<section class="allContent">
    <div class="button-links-subpg">
        <ul class="buttons">
            <li><a href="#"><img src="images/graceButton.png" alt="cardiac-button" /></a></li>
            <li><a href="#"><img src="images/timiButton.png" alt="cardiac-button" /></a></li>      
        </ul>
    </div>
</section>
<footer id="footer">
    <div id="footerBg">
        <div class="footer-links">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html">Back</a></li>
            </ul>
        </div>
    </div>
</footer>
</div> 
```

使用的 CSS

```
html {
  height:100%!important;
  width:100%;
  padding:0;
  margin:0;
}

body {
  margin:0;
  padding:0;
  width:100%;
  height:100%!important;
}

#main {
  height:100%;
  margin:100%;
  margin:0 auto;
  padding:0;
  background:#fff;
}

.header {
  height:145px;
  width:100%;
  background:url(../images/header-repbg-320.png) left top repeat-x;
  display:block;
  display:inline-block;
}

.allContent {
  width:100%;
  border:0 solid green;
  height:100%;
  min-height:100%;
  vertical-align:middle;
  display:block;
  display:inline-block;
}

#footer {
  background:url(../images/footer-repbg-320.png) bottom left repeat-x;
  height:90px;
  width:100%;
  display:block;
  display:inline-block;
} 
```

我的问题是，整个页面只占用了页面高度的一半，在页脚下方留下了一个尴尬的空间，

问题：如何使内容自动适应页面的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T07:23:04.233

[点击 Demo](http://jsfiddle.net/GGGTb/3/) Set Html 和 body 标签， `height:100%;`你可以给body 标签，也可以给 wrapper div `maring:0;``padding :0;``height:100%;`

## HTML

```
<html>
<body>
<div id="Wrapper">  
<div id="header">
    header
</div>     
<div id="content">
    content
</div> 
 <div id="footer">
    footer
</div>  
    </div>
</body>    
</html> 
```

## CSS

```
html{
    height: 100%;

}
body{
 margin: 0;
    padding: 0;

    height: 100%;
}
#Wrapper{
        text-align:center;
        margin: auto;
     height:100%;

    border-left: 1px solid #aaa;
    border-right: 1px solid #aaa;
    background-color:orange;

}
#header{
    height:10%;
   background-color:yellow; 
}
#content{
    height:80%;
   background-color:#4072b4; 
}
#footer{
    height:10%;
   background-color:green; 
} 
```

![输出](../Images/750e0b1cdd97aae35629e8b06563960a.png)

* * *

如果没有为 body 和 html 标记背景图像设置填充将不起作用

## [不工作的例子](http://jsfiddle.net/h5VXS/)和[工作的例子](http://jsfiddle.net/h5VXS/3/)

[你的问题是小提琴](http://jsfiddle.net/GGGTb/5/)

![您的背景图片示例](../Images/43e46f8bbad988056179a1123ea9a776.png)

## 及其输出，它在浏览器调整大小时效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:08:05.963

你几乎拥有它。我简单地修改了前三个选择器的 CSS 如下：

```
html {
    height: 100%;
}
body {
    margin: 0;
    padding: 0;
    height: 100%;
}

#main {
    margin: auto;
    min-height: 100%;
    background: #ccc;
    width: 960px;
    border-left: 1px solid #aaa;
    border-right: 1px solid #aaa;
} 
```

我只在#main 选择器中添加了背景、宽度和边框以显示它的工作原理。它可以在没有这些属性的情况下工作，但是边距和最小高度是必要的。您还将注意到 !important 值是不必要的，并且作为最佳实践应该主要用于解决继承冲突。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:47:24.077

```
＃主要的 {

    高度：100%；
    宽度：100%；
    边距：0 自动；
    填充：0；
    背景：#fff;
    位置：相对；

}

.header {

    位置：绝对；
    顶部：0px；
    左：0px；
    右：0px；
    高度：145px；
    宽度：100%；
    背景：url（../images/header-repbg-320.png）左上重复-x；
    显示：块；
    显示：内联块；

}

.allContent {

    位置：绝对；
    顶部：145px；
    左：0px；
    右：0px；
    底部：90px；
    宽度：100%；
    边框：0 纯绿色；
    显示：块；
    显示：内联块；
    溢出：自动；

}

#页脚{

    位置：绝对；
    底部：0px；
    左：0px；
    右：0px；
    背景：url(../images/footer-repbg-320.png) 左下重复-x；
    高度：90 像素；
    宽度：100%；
    显示：块；
    显示：内联块；

}
```

# ios - UIAlertView 输入 Apple ID 和密码 IAP

> ID：11604364
> 
> 赞同：6
> 
> 时间：2012-07-22T22:06:06.167
> 
> 标签：ios, in-app-purchase, uialertview

当我开始测试我的 IAP 时，系统会要求我输入 Apple ID 和密码。有一个带有确定和取消按钮的警报视图。

我需要处理这个按钮，因为当我按下取消按钮时，我需要在应用程序中执行一些操作。

非常重要：有一个自动对话框而不是购买警报。我需要知道如何在应用程序中处理此操作（例如，如果用户点击取消按钮并且在此自动对话框消失后）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T22:43:23.880

如果您只看到授权提醒，而不是购买提醒，则表示您正在尝试恢复购买。

如果用户点击授权对话框上的取消按钮，则调用此委托方法：

```
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T22:13:06.437

您必须在 failedTransaction 委托消息中处理这种情况：

```
- (void)failedTransaction:(SKPaymentTransaction *)transaction
{
    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        // error!
    }
    else
    {
        // this is fine, the user just cancelled
        [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
    }
} 
```

# javascript - 谷歌地图自定义路线和海拔使用我自己的点

> ID：11604365
> 
> 赞同：0
> 
> 时间：2012-07-22T22:06:06.427
> 
> 标签：javascript, api, google-maps, elevation

我正在尝试重现该页面的第三个示例[https://developers.google.com/maps/customize](https://developers.google.com/maps/customize)但使用我自己的路线，到目前为止我运气不佳。

问题是使用“setDirections”它从谷歌的 api 获取路径，但我正在用我自己的 long、lat 创建一条远足路线，并且真的不知道自己来处理那部分。

这是我到目前为止得到的地方[http://dev.oneshot.nc/www.megarando.nc/html/map.html](http://dev.oneshot.nc/www.megarando.nc/html/map.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:27:34.237

setDirections 很好：根据官方文档，它们可以是字符串（由服务器端的 Google 地理编码引擎隐式解析）或 LatLong 对象，你的很好。

```
origin: LatLng | String,
destination: LatLng | String, 
```

[https://developers.google.com/maps/documentation/javascript/directions#DirectionsRequests](https://developers.google.com/maps/documentation/javascript/directions#DirectionsRequests)

但是，我想您只想使用显示逻辑，因为您定义了完整路径。那么方向不一定适合您，请考虑改用折线（[https://developers.google.com/maps/documentation/javascript/overlays#PolylineArrays](https://developers.google.com/maps/documentation/javascript/overlays#PolylineArrays)）。

使用任何类型的图形可视化工具（谷歌图表：[https](https://developers.google.com/chart/) ://developers.google.com/chart/或 Raphael JS（[http://g.raphaeljs.com/](http://g.raphaeljs.com/)或[http://raphaeljs.com/analytics.html](http://raphaeljs.com/analytics.html)）海拔。

要回答您的评论，请尝试以下内容（基于[https://developers.google.com/maps/documentation/javascript/overlays#Polylines](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)）：

```
var routePath = new google.maps.Polyline({
    path: kids,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
});

routePath.setMap(map);
elevationPath = kids;
recalcHeight();
}); 
```

正如我所看到的，首先，在两点之间进行路由请求。路线是一组路径，因此对于每条路径，它都会收集点并将它们放入一个统一的数组（或单个“路径”）中，并要求一个所谓的外观函数来绘制多段线路线。

采集点后，它会调用高程服务，告诉沿途的高程，当它返回时，它可以使用图表API绘制图表。

但是，您已经有了路径，并且只有一条路径：您只需告诉 Google 地图根据您的路径绘制折线（在变量 kids 中），并告诉高程服务返回沿线点的高程那条路。

# c# - PDU GSM 7bit 编码

> ID：11604367
> 
> 赞同：1
> 
> 时间：2012-07-22T22:06:24.667
> 
> 标签：c#, gsm, at-command

在 C# 项目和华为 E1550 调制解调器上使用 +CUSD 命令发送 USSD 代码

经过大量研究和尝试错误后，我发现我应该发送使用“GSM 7bit”编码的命令

我找到了这样做的在线转换器：[http ://smstools3.kekekasvi.com/topic.php?id=288](http://smstools3.kekekasvi.com/topic.php?id=288)

所以我搜索找到类/算法来使用 c# 实现它，我发现这个：[https ://sites.google.com/site/freesmsuk/gsm7-encoding](https://sites.google.com/site/freesmsuk/gsm7-encoding)

问题是如果我编码一个字符，它只会正确编码“1”->“31”

但是当我对字符串“*888#”进行编码时，在线转换器会生成“2A1C0E3702”，而类会生成“2A38383823”

调制解调器处理的是在线编码而不是类

算法有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:55:24.230

如果我尝试转换它，我会得到“2A1C0E3702”

```
Hex         2A          1C          0E          37          02      +++++++
Octets      00101010    00011100    00001110    00110111    00000010     
Septets      0101010     0111000     0111000     0111000     0100011    +++++++
Character    *           8           8           8           # 
```

这是七位字母表。间距纯粹是为了可读性。

```
SEVEN_BIT_ALPHABET_ARRAY = (
'@', '£', '$', '¥', 'è', 'é', 'ù', 'ì', 'ò', 'Ç', '\n', 'Ø', 'ø', '\r','Å', 'å',
'\u0394', '_', '\u03a6', '\u0393', '\u039b', '\u03a9', '\u03a0','\u03a8', '\u03a3', '\u0398', '\u039e',
'€', 'Æ', 'æ', 'ß', 'É', ' ', '!', '"', '#', '¤', '%', '&', '\'', '(', ')','*', '+', ',', '-', '.', '/',
'0', '1', '2', '3', '4', '5', '6', '7','8', '9',
':', ';', '<', '=', '>', '?', '¡',
'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
'Ä',                                                                  'Ö',
                                                                 'Ñ',                               'Ü', '§', 
                         '¿',
'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
'ä',                                                                  'ö',
                                                                 'ñ',                               'ü',
'à') 
```

[我使用http://rednaxela.net/pdu.php](http://rednaxela.net/pdu.php)上的计算器来转换这些。

看起来可能是字符编码问题。确保您要转换的字符是 ASCII，而不是 unicode。

最后，您确定需要对 USSD 进行 PDU 编码吗？大多数调制解调器都可以使用

```
AT+CUSD=1,"*888#",15 
```

# java - 使用 EAGER @ElementCollection 在 find() 上休眠 LazyInitializationException

> ID：11604370
> 
> 赞同：3
> 
> 时间：2012-07-22T22:06:41.247
> 
> 标签：java, hibernate, jpa, persistence

我正在`org.hibernate.LazyInitializationException: illegal access to loading collection`输入我的 JPA 代码 - 所有集合都是 EAGER fetch - 当集合实体也有一个集合时。

有人可以帮我解决这个问题吗？

我已将我的 JPA 代码中的一个问题隔离为以下`@Entity`定义：

（注意，我跳过了 package 和 import 语句来缩短代码。使用了一些 Lombok 注释，例如 @Data 表示该字段有一个 getter/setter 和 @Cleanup 来执行通常的 try/catch close()舞蹈）

```
@Entity
@Data
public class MyEntity implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

//    @ElementCollection(fetch = FetchType.EAGER)
//    private Set<String> tags = Sets.newTreeSet();
}

@Entity
@Data
public class MyOtherEntity implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ManyToMany(fetch = FetchType.EAGER)
    private Set<MyEntity> entities = Sets.newHashSet();
} 
```

（如果我明确地做一个 full `@JoinTable`，我也会遇到同样的问题，但是如果没有它，Hibernate 似乎可以生成一切正常 - 我很高兴将它排除在外）。

问题是，如果我取消注释中的“标签”字段`@MyEntity`，那么我总是会得到以下信息`PersistenceException`

```
Exception in thread "main" javax.persistence.PersistenceException: org.hibernate.LazyInitializationException: illegal access to loading collection
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1377)
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:828)
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:781) 
```

以下是一个简短的应用程序，它举例说明了这个问题：

```
public class JpaQuestion {
    public static void main(String[] args) throws Exception {
        Properties properties = new Properties();
        properties.put("hibernate.connection.driver_class", "org.apache.derby.jdbc.EmbeddedDriver");
        properties.put("hibernate.connection.url", "jdbc:derby:playground;create=true");
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("PlaygroundPU", properties);

        populate(emf);

        @Cleanup("close") EntityManager em = emf.createEntityManager();
        MyOtherEntity other = em.find(MyOtherEntity.class, 1L);
        System.out.println(other != null ? other.toString() : "null");
    }

    public static void populate(EntityManagerFactory emf) {
        @Cleanup("close") EntityManager em = emf.createEntityManager();
        em.getTransaction().begin();
        MyEntity a = new MyEntity();
        em.persist(a);
        MyOtherEntity other = new MyOtherEntity();
        other.getEntities().add(a);
        em.persist(other);
        em.getTransaction().commit();
    }
} 
```

更新：当字段渴望时，我知道[LazyInitializationException ，](https://stackoverflow.com/questions/5503771)但这似乎是因为`load()`抓取了实体的惰性版本。我在这里使用“查找”。我注意到，如果我发出 JPA 查询（而不是 find），那么这个问题就会消失。

`find()`更新：如果我使用类似 的查询而不是 ，这确实可以正常工作`"SELECT b FROM MyOtherEntity b WHERE b.id = :id"`。也许`find()`真的会忽略`EAGER`加载！因此，这可能是 Hibernate 中的一个错误。

[更新：我已在https://hibernate.onjira.com/browse/HHH-7476](https://hibernate.onjira.com/browse/HHH-7476)将其记录为 Hibernate 的错误报告

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T12:05:52.287

首先，参考完整的堆栈跟踪很有用：http: [//pastie.org/4358203](http://pastie.org/4358203)

问题是由您在 MyEntity 的 hashCode() 实现中调用 tags.hashCode() 引起的。

当您使用 Hibernate 加载 MyOtherEntity 实例时，它的 MyEntity 集合被初始化。当 MyEntity 被添加到 MyOtherEntity 中的 Set 实现中时，它的 hashCode() 方法自然会被调用（sets 不能包含重复项，记住，hashCode() 是 Java 检查对象相等性的一部分）。MyEntity 的 hashCode() 方法然后尝试在标签集合上调用 hashCode()。标签集合正在初始化，这会导致您出现此错误。

我认为值得考虑为 MyEntity 实现 hashCode() 。您的用例是否真的需要您比较标签集合中所有元素的值以确保对象相等？

有关在 Hibernate 中管理对象相等性的更多信息，以下是有用的资源：

[https://community.jboss.org/wiki/EqualsAndHashCode](https://community.jboss.org/wiki/EqualsAndHashCode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:09:29.203

> LazyInitializationException – 表示访问会话上下文之外的未获取数据。例如，当会话关闭后访问未初始化的代理或集合时。

您可能想尝试的一些事情：

**已删除`@Cleanup`**-[`LazyInitializationException`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/LazyInitializationException.html)通常意味着当代理尝试访问字段时 Hibernate 会话已关闭，您应该在没有这些[`@Cleanup`](http://projectlombok.org/api/lombok/Cleanup.html)注释的情况下尝试它。`.close()`我自己从未使用过它们，但文档说通过调用“范围的结尾”来清理变量声明。

**仔细检查配置**- 仍然很奇怪，因为您声明`FetchType.EAGER`了两个关联。您是否检查过这些选项是否真的被使用了？我知道配置有时可能会有点棘手。

**PersistenceContextType** - 您可能想尝试[`PersistenceContextType.EXTENDED`](http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceContextType.html#EXTENDED)为您的设置`EntityManager`（我认为`TRANSACTION`是默认设置，可能是错误的，但您可能想尝试确定）。

> [在事务范围的持久性上下文的情况下，实体变得分离，也就是说，它们不再被管理。在扩展持久性上下文的情况下，实体保持受管理状态。](https://blogs.oracle.com/enterprisetechtips/entry/extended_persistence_context_in_stateful)

我猜你已经知道[“克服 LazyInitializationException”](https://community.jboss.org/wiki/LazyInitializationExceptionovercome) wiki 条目了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T15:50:58.180

问题是 Hibernate 忽略了大多数查询的 fetch = FetchType.EAGER。尝试将 @Fetch(FetchMode.JOIN) 添加到实体。

请参阅： [https ://community.jboss.org/wiki/HibernateFAQ-AdvancedProblems#Hibernate_ignores_my_outerjointrue_or_fetchjoin_setting_and_fetches_an_association_lazily_using_n1_selects](https://community.jboss.org/wiki/HibernateFAQ-AdvancedProblems#Hibernate_ignores_my_outerjointrue_or_fetchjoin_setting_and_fetches_an_association_lazily_using_n1_selects)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T07:31:31.747

当休眠尝试初始化对象并发生一些错误时出现此错误。

错误可以是

1.  哈希码和等于未正确实现
2.  预计惰性对象将被加密，但在 db 中未正确加密
3.  你在休眠会话上下文之外。

# ios - 在 UIWebView 中显示 didSelectRowAtIndexPath

> ID：11604372
> 
> 赞同：0
> 
> 时间：2012-07-22T22:06:56.320
> 
> 标签：ios, parsing, uitableview, webview, feed

我正在使用`MWFeedParser`，我想点击一个单元格来打开一个 webview 而不是另一个`UITableViewController`. 这就是发生在 didSelect...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

// Show detail
DetailTableViewController *detail = [[DetailTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
detail.item = (MWFeedItem *)[itemsToDisplay objectAtIndex:indexPath.row];
[self.navigationController pushViewController:detail animated:YES];

// Deselect
[self.tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

我认为我的第一个障碍是从每个 RSS 帖子中获取 URL，以便 webview 知道要显示什么。这是如何完成的，我将如何更改上述方法以打开 web 视图？

变成

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

webViewController *webView = [[webViewController alloc] initWithURL:@"http://www.google.com"];
webView.item = (MWFeedItem *)[itemsToDisplay objectAtIndex:indexPath.row];
[self.navigationController pushViewController:webView animated:YES];

[self.tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

但是 initWithURL 给了我一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:48:12.293

行

1.  当用户点击单元格时，您可以打开任何您想要的视图控制器。顺便说一句，你甚至可以做任何你想做的事情。
2.  `DetailTableViewController *detail = [[DetailTableViewController alloc] initWithStyle:UITableViewStyleGrouped];`正如我所说，可以是您想要的任何东西，**但是：**
3.  据我所知，您不能将 UIWebView 子类化（您可以，但苹果建议不要这样做）。
4.  相反，您应该创建一个 UIViewController 并添加一个 UIWebView 作为它的视图或子视图。
5.  然后在你的`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`初始化这个 viewController 并将 url 作为参数传递给 viewController。
6.  在`viewDidAppear`webView 中打开 URL。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:24:18.077

检查基类，`webViewController`我怀疑它不包含方法`initWithURL`。（顺便说一句，`webViewController`如果它是一个类，也不遵循推荐的命名约定 - 类名应以大写字母开头，变量/实例方法以小写字母开头 -[在此处](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146-SW1)查看 Apple 的指南）

此外，`@"http://www.google.com"` 不是 URL - 它是一个字符串。要创建 URL 对象，您需要执行以下操作：

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"]; 
```

然后使用该`url`对象传递给任何方法，例如`initWithURL`

希望这可以帮助您解决`initWithURL`问题。

要在点击单元格时打开您的 web 视图，请设置您的`UIWebView`inside `didSelectRowAtIndex`，然后将包含 的控制器推`UIWebView` 到您的导航控制器上。

# python - Python 在没有预期的情况下返回数据

> ID：11604386
> 
> 赞同：4
> 
> 时间：2012-07-22T22:07:40.843
> 
> 标签：python, return, reddit

我正在使用[praw](https://github.com/praw-dev/praw) reddit 库从 reddit 中提取数据，我遇到了这段代码，我不明白为什么它会返回任何数据（在 BaseReddit 类中（[完整源代码](https://github.com/praw-dev/praw/blob/master/praw/__init__.py)）：

```
def get_content(self, page_url, limit=0, url_data=None, place_holder=None,
                root_field='data', thing_field='children',
                after_field='after'):
    """A generator method to return reddit content from a URL. Starts at
    the initial page_url, and fetches content using the `after` JSON data
    until `limit` entries have been fetched, or the `place_holder` has been
    reached.

    :param page_url: the url to start fetching content from
    :param limit: the maximum number of content entries to fetch. If
        limit <= 0, fetch the default_content_limit for the site. If None,
        then fetch unlimited entries--this would be used in conjunction
        with the place_holder param.
    :param url_data: dictionary containing extra GET data to put in the url
    :param place_holder: if not None, the method will fetch `limit`
        content, stopping if it finds content with `id` equal to
        `place_holder`.
    :param data_field: indicates the field in the json response that holds
        the data. Most objects use 'data', however some (flairlist) don't
        have the 'data' object. Use None for the root object.
    :param thing_field: indicates the field under the data_field which
        contains the list of things. Most objects use 'children'.
    :param after_field: indicates the field which holds the after item
        element
    :type place_holder: a string corresponding to a reddit content id, e.g.
        't3_asdfasdf'
    :returns: a list of reddit content, of type Subreddit, Comment,
        Submission or user flair.
    """
    content_found = 0

    if url_data is None:
        url_data = {}
    if limit is None:
        fetch_all = True
    elif limit <= 0:
        fetch_all = False
        limit = int(self.config.default_content_limit)
    else:
        fetch_all = False

    # While we still need to fetch more content to reach our limit, do so.
    while fetch_all or content_found < limit:
        page_data = self.request_json(page_url, url_data=url_data)
        if root_field:
            root = page_data[root_field]
        else:
            root = page_data
        for thing in root[thing_field]:
            yield thing
            content_found += 1
            # Terminate when we reached the limit, or place holder
            if (content_found == limit or
                place_holder and thing.id == place_holder):
                return
        # Set/update the 'after' parameter for the next iteration
        if after_field in root and root[after_field]:
            url_data['after'] = root[after_field]
        else:
            return 
```

在我看来，所有 return 语句都没有参数，因此默认为返回`None`。谁可以给我解释一下这个？

注意：代码是 Python 2.x

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T22:10:10.630

它是一个发电机。请参阅`yield`声明以获取提示。

[http://wiki.python.org/moin/Generators](http://wiki.python.org/moin/Generators)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T22:13:11.273

这是一个生成器函数，你可以通过`yield`语句来判断。该值实际上是“返回”的，而实际上并未从函数中返回。当从函数请求另一个值时，生成器从它产生的点恢复（根据下面的代码，继续`for thing`循环......）。

```
for thing in root[thing_field]:
    yield thing 
```

简单的例子：

```
def blah():
    for i in xrange(5):
        yield i + 3

numbers = blah()
print next(numbers)
# lots of other code here...
# now we need the next value
print next(numbers) 
```

# c++ - GNU MP Bignum 库的数值问题

> ID：11604390
> 
> 赞同：4
> 
> 时间：2012-07-22T22:08:07.330
> 
> 标签：c++, gnu, gmp

我正在做一些数字运算，这需要高精度算术。我正在使用 GNU MP 库，并[根据 GMP 手册](http://gmplib.org/manual/Nomenclature-and-Types.html#Nomenclature-and-Types)：

“浮点数或简称Float，是具有有限精度指数的任意精度尾数。”

尽管尾数应该具有任意精度，但我仍然遇到精度问题。与其用我的实际代码让你厌烦，不如用一个近乎最小的工作示例来说明我的问题。代码计算 9.3^15、9.8^15 和 (9.3*9.8)^15。在我的机器上，(9.3^15)*(9.8^15) 和 (9.3*9.8)^15 的值开始从第 16 位开始不同，在这种情况下导致（大约）4.94* 的错误10^13。

任何帮助将不胜感激。代码如下。

```
#include <gmp.h>
#include <gmpxx.h>

#include <iostream>
#include <iomanip>

int main()
{
    mpf_class x, y, z;
    x = y = z = 1.0;

    for (int i = 0; i < 15; i++)
    {
        x *= 9.3;
        y *= 9.8;
        z *= 9.3*9.8;
    }

    std::cout << z - x*y << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:17:59.563

您看到的问题是由于 9.3 * 9.8 是**近似**计算的。请将文字更改为 mpf_class 的实例：

```
mpf_class a, b;
a = 9.3;
b = 9.8;

// ...

x *= a;
y *= b;
z *= a * b; 
```

如果您需要**无限**精度，请考虑使用**有理数**：

```
#include <gmp.h>
#include <gmpxx.h>

#include <iostream>
#include <iomanip>

int main()
{
    mpq_class x(1), y(1), z(1), a(93, 10), b(98, 10);

    for (int i = 0; i < 15; i++)
    {
        x *= a;
        y *= b;
        z *= (a * b);
    }

    std::cout << z - x*y << std::endl << z << std::endl;

    return 0;
} 
```

印刷

```
0
7589015305950762920038660273144124106674963183136666693/30517578125000000000000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:34:27.740

问题是您没有明确设置精度，因此您获得了默认精度，通常（我认为）是 64 位，因此由于不同计算方式的舍入不同，最后一位的结果会有所不同。这使得大约 20 位数字成为公共前缀（随着计算的增加，差异可能会变得更大）。如果设置更高的精度，

```
#include <gmp.h>
#include <gmpxx.h>

#include <iostream>
#include <iomanip>

int main()
{
    mpf_class x(1.0,200), y(1.0,200), z(1.0,200), a("9.3",200), b("9.8",200), c(0,200); 
    c = a*b;

    for (int i = 0; i < 15; i++)
    {
        x *= a;
        y *= b;
        z *= c;
    }

    std::cout << z << "\n" << (x*y) << std::endl;
    std::cout << z - x*y << std::endl;

    return 0;
} 
```

在这里 200 位，你会得到更准确的结果：

```
$ ./a.out 
2.48677e+29
2.48677e+29
-4.80637e-49 
```

所以一个大约 80 个十进制数字的公共前缀，或接近 256 位（64 的最小倍数大于 199）。

精度为 2000 时，与字符串构造函数的差异为 -2.78942e-588，如果从以下位置初始化，则为 0 `double`（但当然，初始精确度限制为 53 位，因此这仅意味着两种方式都会在一样的方法）。

# java - 在 iReport 中有许多独立的 - 不相关的数据集

> ID：11604391
> 
> 赞同：4
> 
> 时间：2012-07-22T22:08:12.967
> 
> 标签：java, jasper-reports, ireport, subreport

我正在使用 iReport 2.0.4 将一些数据从 Java 应用程序导出到 Excel。

我的问题是我的子报表在顶级报表下分组，但我希望它们是离散报表。目前它看起来像这样

**订单**
- 订单   行 1
    **收货**
- 收货       行 1
       - 收货行 2
    **发票**
- 发票       行 1 - 发票
       行 2
**订单**
- 订单   行 2
    **收货**
- 收货       行 1
       ........

我希望它是一个电子表格中的 3 个单独的报告。像这样

**订购**
    所有订单行
**收货**
    所有收货行
**发票**
    所有发票行

目前，我将订单作为主报告，将收据和发票作为子报告，放入详细信息带订单。

如果可能的话，获得这种布局的最佳方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T11:16:34.653

*   ***第一种方式。使用[JasperReports API](http://jasperreports.sourceforge.net/api/index.html)***

您可以填写和编译三个单独的报告，然后使用[**JRPdfExporterParameter.JASPER_PRINT_LIST**](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRExporterParameter.html#JASPER_PRINT_LIST)参数来使用如下代码构建单个报告：

```
JasperReport ordersReport = JasperCompileManager.compileReport(srcOrdersReport);
JasperPrint jpOrdersReport = JasperFillManager.fillReport(ordersReport, ordersParamsMap, ordersDataSource);

JasperReport receiptsReport = JasperCompileManager.compileReport(srcReceiptsReport);
JasperPrint jpReceiptsReport = JasperFillManager.fillReport(receiptsReport, receiptsParamsMap, receiptsDataSource);

JasperReport invoicesReport = JasperCompileManager.compileReport(srcInvoicesReport);
JasperPrint jpInvoicesReport = JasperFillManager.fillReport(invoicesReport, invoicesParamsMap, invoicesDataSource);

List<JasperPrint> printList = new ArrayList<JasperPrint>();

printList.add(jpOrdersReport);
printList.add(receiptsReport);
printList.add(invoicesReport);

JRExporter exporter = new JRPdfExporter();
exporter.setParameter(JRPdfExporterParameter.JASPER_PRINT_LIST, printList);

exporter.setParameter(JRPdfExporterParameter.OUTPUT_STREAM, output);
exporter.exportReport(); 
```

您可以查看此[示例以了解您的*JR*版本 - 2.0.4](http://jasperforge.org/svn/repos/jasperreports/tags/jr-2-0-4/jasperreports/demo/samples/batchexport/)以了解更多详细信息。

*   ***第二种方式。使用多个数据集和列表组件***

您可以将*iReport 4.x 版本*中的多个数据集添加到单个报表中。每个数据集都可能包含自己的查询。***列表***组件可以使用自己的数据集。

*在这个示例（使用iReport 4.5.1*构建）中，我将 3 个***列表***组件放置到*标题*带中：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="several_queries" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <subDataset name="OrdersDataset">
        <queryString>
            <![CDATA[SELECT TOP 5 ORDERID AS orderId, SHIPNAME AS orderShipName, SHIPCOUNTRY AS orderShipCounty, SHIPCITY  AS orderShipCity
FROM orders]]>
        </queryString>
        <field name="ORDERID" class="java.lang.Integer"/>
        <field name="ORDERSHIPNAME" class="java.lang.String"/>
        <field name="ORDERSHIPCOUNTY" class="java.lang.String"/>
        <field name="ORDERSHIPCITY" class="java.lang.String"/>
    </subDataset>
    <subDataset name="ReceiptsDataset">
        <queryString>
            <![CDATA[SELECT TOP 10 ID AS receiptId, CITY AS receiptCity FROM receipts]]>
        </queryString>
        <field name="RECEIPTID" class="java.lang.Integer"/>
        <field name="RECEIPTCITY" class="java.lang.String"/>
    </subDataset>
    <subDataset name="InvoicesDataset">
        <queryString>
            <![CDATA[SELECT TOP 7 ID AS invoiceId, TOTAL AS invoiceSum FROM invoices]]>
        </queryString>
        <field name="INVOICEID" class="java.lang.Integer"/>
        <field name="INVOICESUM" class="java.math.BigDecimal"/>
    </subDataset>
    <subDataset name="dataset1"/>
    <queryString>
        <![CDATA[SELECT 1 as t FROM dual WHERE 1=2]]>
    </queryString>
    <field name="t" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="243" splitType="Stretch">
            <componentElement>
                <reportElement positionType="Float" x="0" y="44" width="555" height="19"/>
                <jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
                    <datasetRun subDataset="OrdersDataset">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:listContents height="19" width="555">
                        <textField>
                            <reportElement x="0" y="0" width="100" height="19"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{ORDERID}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement x="100" y="0" width="100" height="19"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{ORDERSHIPNAME}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement x="200" y="0" width="100" height="19"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{ORDERSHIPCOUNTY}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement x="300" y="0" width="100" height="19"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{ORDERSHIPCITY}]]></textFieldExpression>
                        </textField>
                    </jr:listContents>
                </jr:list>
            </componentElement>
            <componentElement>
                <reportElement positionType="Float" x="0" y="130" width="400" height="18"/>
                <jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
                    <datasetRun subDataset="ReceiptsDataset">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:listContents height="18" width="400">
                        <textField>
                            <reportElement positionType="Float" x="100" y="0" width="100" height="18"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{RECEIPTCITY}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement positionType="Float" x="0" y="0" width="100" height="18"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{RECEIPTID}]]></textFieldExpression>
                        </textField>
                    </jr:listContents>
                </jr:list>
            </componentElement>
            <staticText>
                <reportElement positionType="Float" x="0" y="4" width="400" height="20"/>
                <box topPadding="1" leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Orders]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="24" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[ID]]></text>
            </staticText>
            <staticText>
                <reportElement x="100" y="24" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[Customer name]]></text>
            </staticText>
            <staticText>
                <reportElement x="200" y="24" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[Customer country]]></text>
            </staticText>
            <staticText>
                <reportElement x="300" y="24" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[Customer city]]></text>
            </staticText>
            <staticText>
                <reportElement positionType="Float" x="0" y="109" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[ID]]></text>
            </staticText>
            <staticText>
                <reportElement positionType="Float" x="100" y="109" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[City]]></text>
            </staticText>
            <staticText>
                <reportElement positionType="Float" x="0" y="89" width="200" height="20"/>
                <box topPadding="1" leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Receipts]]></text>
            </staticText>
            <componentElement>
                <reportElement positionType="Float" x="0" y="201" width="400" height="18"/>
                <jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="InvoicesDataset">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:listContents height="18" width="400">
                        <textField pattern="###0.00;-###0.00">
                            <reportElement positionType="Float" x="100" y="0" width="100" height="18"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{INVOICESUM}]]></textFieldExpression>
                        </textField>
                        <textField>
                            <reportElement positionType="Float" x="0" y="0" width="100" height="18"/>
                            <box leftPadding="10" rightPadding="10">
                                <topPen lineWidth="1.0"/>
                                <leftPen lineWidth="1.0"/>
                                <bottomPen lineWidth="1.0"/>
                                <rightPen lineWidth="1.0"/>
                            </box>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{INVOICEID}]]></textFieldExpression>
                        </textField>
                    </jr:listContents>
                </jr:list>
            </componentElement>
            <staticText>
                <reportElement positionType="Float" x="0" y="161" width="200" height="20"/>
                <box topPadding="1" leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Invoices]]></text>
            </staticText>
            <staticText>
                <reportElement positionType="Float" x="100" y="181" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[Sum]]></text>
            </staticText>
            <staticText>
                <reportElement positionType="Float" x="0" y="181" width="100" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement textAlignment="Center">
                    <font isItalic="true"/>
                </textElement>
                <text><![CDATA[ID]]></text>
            </staticText>
        </band>
    </title>
</jasperReport> 
```

报告的设计是：

![iReport 中的报表设计](../Images/cf774f02ff50be44821b1ecb957e5331.png)

结果将是（通过*iReport*预览）：

![报告结果](../Images/3bf766cb57d53cca245254064eb69314.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T19:12:38.807

在[JasperReports 6.1.1 API](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRExporterParameter.html)中，`JRPdfExporterParameter.JASPER_PRINT_LIST`and `JRPdfExporterParameter.OUTPUT_STREAM`is **Deprecated**我添加到@Alex K 回答当前不推荐使用的方法：

**“第一种方式。使用 JasperReports API”**

替换（不推荐使用的代码）：

```
exporter.setParameter(JRPdfExporterParameter.JASPER_PRINT_LIST, printList);
exporter.setParameter(JRPdfExporterParameter.OUTPUT_STREAM, output); 
```

和

```
exporter.setExporterInput(SimpleExporterInput.getInstance(printList));
exporter.setExporterOutput(new SimpleOutputStreamExporterOutput(output)); 
```

# gwt - JDO 查询返回零结果

> ID：11604399
> 
> 赞同：0
> 
> 时间：2012-07-22T22:08:48.787
> 
> 标签：gwt, jdo

我正在构建一个 GWT 应用程序来访问在服务器端使用 JDO 持久保存的房屋列表。然后通过 RPC“getHouseService”将房屋列表移动到客户端以进行显示和操作。之后它们不会被返回并保存在服务器端。

当我运行应用程序并执行 RPC 服务时，客户端总是得到一个空列表。在测试期间，我注意到我的 ide (eclipse) 在调试模式下注意到 getHouse 中返回的列表的值是 StreamingQueryResult。

我究竟做错了什么？？我被这个问题困扰了一个多星期，我在网上找不到相关的解决方案。

这是我编写的用于处理数据持久性的代码：

```
public static PersistenceManagerFactory getPersistenceManagerFactory() {
        return pmfInstance;
    }

    public void addHouse(List<House> listofHouses) {
        PersistenceManager pm = getPersistenceManagerFactory().getPersistenceManager(); 
        try {
            pm.makePersistentAll(listofHouses);
            System.out.println("after makePersistentAll");
        }
        finally {
            pm.close();
        }
    }

    @SuppressWarnings("unchecked")
    public List<House> getHouses() {
        PersistenceManager pm = getPersistenceManagerFactory().getPersistenceManager();
    List<House> houseList = (List<House>) pm.newQuery("select from " + House.class.getName()).execute();
    return houseList;
    } 
```

房子类是：

```
package vancouverHEA.shared;

import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.IdentityType;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

import org.datanucleus.jpa.annotations.Extension;

import com.google.gwt.user.client.rpc.IsSerializable;

@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
public class House extends Building implements IsSerializable {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @Extension(vendorName = "datanucleus", key = "gae.encoded-pk", value = "true")
    private Long key;
    @Persistent (serialized = "true")
    java.lang.Double landPrice;
    @Persistent (serialized = "true")
    java.lang.Double housePrice;
    @Persistent (serialized = "true")
    java.lang.Boolean forSale;
    @Persistent (serialized = "true")
    private java.lang.String realtorContact;
    @Persistent (serialized = "true")
    private java.lang.Integer listPrice;
    @Persistent (serialized = "true")
    private java.lang.Integer yrBuilt;
    @Persistent (serialized = "true")
    private java.lang.Integer yrReno;
    @Persistent (serialized = "true")
    private java.lang.String postalCode;
    @Persistent (serialized = "true")
    java.lang.Double latitude;
    @Persistent (serialized = "true")
    java.lang.Double longitude;

    String STRATA = "Strata";
    String SINGLE = "Single House" ;

    public House(double landPrice, double improvPrice, String address,
            String postalCode, int yrBuilt, int yrReno) {
        super();
        this.landPrice = landPrice;
        this.housePrice = improvPrice;
        this.address = address;
        this.postalCode = postalCode.trim().toUpperCase();
        this.yrBuilt = yrBuilt;
        this.yrReno = yrReno;
    }

    public String getPostalCode() {
        return postalCode;
    }

    public void setPostalCode(String postalCode) {
        this.postalCode = postalCode.trim().toUpperCase();
    }

    public double getLatitude() {
        return latitude;
    }

    public void setLatitude(double latitude) {
        this.latitude = latitude;
    }

    public double getLongitude() {
        return longitude;
    }

    public void setLongitude(double longitude) {
        this.longitude = longitude;
    }

    public double getPrice() {
        return this.landPrice + this.housePrice;
    }

    public boolean isForSale() {
        return forSale;
    }

    public void setForSale(boolean forSale) {
        this.forSale = forSale;
    }

    public String getRealtorContact() {
        return realtorContact;
    }

    public void setRealtorContact(String realtorContact) {
        this.realtorContact = realtorContact;
    }

    public int getListPrice() {
        return listPrice;
    }

    public void setListPrice(int listPrice) {
        this.listPrice = listPrice;
    }

    public int getYrBuilt() {
        return yrBuilt;
    }

    public void setYrBuilt(int yrBuilt) {
        this.yrBuilt = yrBuilt;
    }

    public int getYrReno() {
        return yrReno;
    }

    public void setYrReno(int yrReno) {
        this.yrReno = yrReno;
    }

    public void setLandPrice(Double landPrice) {
        this.landPrice = landPrice;
    }

    public double getLandPrice(){
        return landPrice;
    }

    public void setHousePrice(Double housePrice) {
        this.housePrice = housePrice;
    }

    public double getHousePrice() {
        return housePrice;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:19:19.577

这可能与此问题中描述的问题相同：[GWT 通过 serviceimpl 从数据存储中检索列表](https://stackoverflow.com/q/7641319/66416)总结该列表是延迟加载的，因此如果您通过 RPC 返回该列表，它尚未读取并返回一个空列表。问题的答案[https://stackoverflow.com/a/7646549/66416](https://stackoverflow.com/a/7646549/66416)建议在返回之前调用`size()`列表，这将触发列表被读取（尽管不确定这是否是最优雅的解决方案）。

# url - Google 在查询期间放置 INVALID_REQUEST

> ID：11604400
> 
> 赞同：0
> 
> 时间：2012-07-22T22:08:55.617
> 
> 标签：url, request

我创建以下 URL 来获取某个区域的位置： [https ://maps.googleapis.com/maps/api/place/search/xml?location=38.78989,-77.63975&radius=32186&sensor=true&types=restaurant&rankby=distance&key=](https://maps.googleapis.com/maps/api/place/search/xml?location=38.78989,-77.63975&radius=32186&sensor=true&types=restaurant&rankby=distance&key=)

我得到以下回复：INVALID_REQUEST

对于我的生活，我看不出 URL 中可能有什么问题。在 Google 报告控制台中，每个请求的图表都在递增，因此我知道密钥已正确连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:41:53.917

事实证明，半径不是必需的，也不应该使用。Google 最多只返回 30 条回复。

# jquery - jQuery：用跨度包装部分文本

> ID：11604401
> 
> 赞同：1
> 
> 时间：2012-07-22T22:09:04.960
> 
> 标签：jquery, regex

我将如何将一段文本包装在一个带有跨度的段落中。例如，在：

```
<p class="info"> Posted by johnny, 20/07/2012 4:47pm (3 days ago) </p> 
```

我希望能够用一个跨度来包装海报的名字，这不一定总是 1 个单词，它可以是 John Smith 或 John H Smith。

基本上我想包装段落中“发布者”之后和最后一个逗号（，）之前的任何内容。

我认为正则表达式是前进的方向，但我以前从未接触过这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T22:14:37.610

```
$('.info').html(function(i, v) {
    return v.replace(/(Posted by )([^,]+)(,)/, '$1<span class="auther">$2</span>$3');
}); 
```

这是小提琴：http: [//jsfiddle.net/9Urph/](http://jsfiddle.net/9Urph/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:13:31.110

> 我认为正则表达式是前进的方向，但我以前从未接触过这一点。

不一定，尽管这是一种选择。

基本上，您必须找到逗号（因为您已经知道有多长`"Posted by"`）。找到它的最简单方法是`String#indexOf`. 找到它后，您只需要拆分文本。你可以这样做：[Live example](http://jsbin.com/orepow) | [来源](http://jsbin.com/orepow/edit)

```
$("p.info").each(function() {
    var $this = $(this),
        html = $this.html(),
        comma = html.indexOf(",");
    html = html.substring(0, 10) + // 10 = length of "Posted by "
           "<span>" +
           html.substring(10, comma) +
           "</span>" +
           html.substring(comma);
    $this.html(html);
}); 
```

...或者您也可以使用 DOM API 的[`splitText`function](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-38853C1D)做很多相同的事情。

# variables - 将变量从 Tinymce 弹出窗口传回内容编辑器

> ID：11604403
> 
> 赞同：2
> 
> 时间：2012-07-22T22:09:20.110
> 
> 标签：variables, tinymce

我的 Tinymce 插件几乎可以正常工作，可以从 Wordpress 中提取所有短代码并将它们显示在弹出窗口中，然后可以选择并插入到内容编辑器中。

这是我的 tinymce .js 文件的一部分：

```
insert : function(file, title) {
var ed = tinyMCEPopup.editor, dom = ed.dom;

tinyMCEPopup.execCommand('mceInsertContent', false, '$tagname');
tinyMCEPopup.close(); 
```

这是我为弹出窗口调用的 .php 文件的一部分：

```
foreach($shortcode_tags as $tagname=>$tag)

echo "<div><table id='emoticon_table'><tr><td><input type='radio' onclick=doInsert('[".$tagname."]') name='[".$tagname."]' value='[".$tagname."]' /><a class='emoticon_link' id='[".$tagname."]'>[$tagname]</a></td></tr></table></div>"; 
```

因此，列表显示为单选按钮，可以选择然后插入。

问题是什么被插入回内容编辑器。正如您在上面看到的`mceInsertContent`，所有出现在编辑器中的都是文字`$tagname`。

我想插入的是输入的实际值（或者它的 id、class 或 alt 名称），因为我也可以在 php 中设置它们。

但是如何将变量值从 tinymce 模式窗口插入回内容区域？

我可以`global $tagname`在 .js 中使用 a 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:46:55.293

你应该指定'$tagname'。例如，您可以使用生成的要插入的 html 字符串。

# objective-c - Objective C Interface Builder ARC - 保留自定义控制器

> ID：11604406
> 
> 赞同：1
> 
> 时间：2012-07-22T22:09:45.693
> 
> 标签：objective-c, ios, xcode, xcode4

在 iPhone 应用程序中，我有一个带有按钮的视图。Button 连接到`IBAction`MyClass。

```
@interface MyClass : NSObject   
-(IBAction)buttonPressed:(id)sender;
@end 
```

当我点击这个按钮时，我得到一个 EXC_BAD_ACCESS。使用右侧边栏中的“对象”组件将该类`MyClass`添加到视图中。

我认为这是因为我的自定义控制器被 ARC 释放。它是否正确？通过接口控制器添加的对象不会自动保留吗？如何保留我通过接口构建器连接的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:47:25.590

1.  `MyClass`必须是 的子类`UIView`，而不是`NSObject`。

2.  如果您认为一个对象被过早地释放，请实现该`-dealloc`方法并添加一些日志记录和一个断点。

3.  如果您的自定义视图在屏幕上，那么它的超级视图将持有对该视图的引用，并且不会被释放。如果您的自定义视图控制器有一个父视图控制器，例如 UINavigationController，那么它的父视图控制器将持有对您的视图控制器的引用，并且不会被释放。

4.  在您的方法中设置断点`-buttonPressed:`以确认它被正确调用。然后单步执行代码。

5.  查看 EXC_BAD_ACCESS 时的调用堆栈，以更好地隔离问题所在。你的 -buttonPressed: 方法实际上被调用了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:13:50.650

好的，第一件事。为什么要将 IBAction 添加到您的课程中？因为控制器应该有处理事件的出口。这门课是什么？

你必须在你的控制器中实例化它（不知道你是如何连接它的）并保留它以使其生效，因为它可能会变为 nil，因为没有任何东西持有它。

这只是不好的做法，您的操作逻辑应该由控制器本身处理，这是控制器的功能，因此最好将操作挂接到控制器中。

# javascript - 如何切换布尔值？

> ID：11604409
> 
> 赞同：499
> 
> 时间：2012-07-22T22:10:14.177
> 
> 标签：javascript, boolean, toggle

有没有一种非常简单的方法可以在**javascript**中切换布尔值？

到目前为止，除了编写自定义函数之外，我最好的方法是三元：

```
bool = bool ? false : true; 
```

* * *

## 回答 #1

> 赞同：1116
> 
> 时间：2012-07-22T22:11:18.967

```
bool = !bool; 
```

这适用于大多数语言。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2013-05-28T05:14:19.017

如果您不介意将布尔值转换为数字（即 0 或 1），则可以使用[Bitwise XOR Assignment Operator](http://msdn.microsoft.com/en-us/library/ie/06f6ta51%28v=vs.94%29.aspx)。像这样：

```
bool ^= true;   //- toggle value. 
```

如果您使用长的、描述性的布尔名称，这特别好，例如：

```
let inDynamicEditMode   = true;     // Value is: true (boolean)
inDynamicEditMode      ^= true;     // Value is: 0 (number)
inDynamicEditMode      ^= true;     // Value is: 1 (number)
inDynamicEditMode      ^= true;     // Value is: 0 (number) 
```

这比在每一行中重复变量更容易扫描。

此方法适用于所有（主要）浏览器（和大多数编程语言）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-07-13T11:00:59.327

```
bool = bool != true; 
```

案例之一。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-01-29T12:52:44.293

让我们看看它的实际效果：

```
var b = true;

console.log(b); // true

b = !b;
console.log(b); // false

b = !b;
console.log(b); // true
```

无论如何，[没有比你目前拥有的更短的方法了。](https://stackoverflow.com/a/13972910/2404470)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-11T13:46:44.303

`null`我正在寻找一种切换方法，它做同样的事情，但将or的初始值“切换”`undefined`到`false`。

这里是：

```
booly = !(booly != false) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-20T11:42:05.503

```
bool === tool ? bool : tool 
```

如果`tool`（另一个布尔值）具有相同的值，则您希望该值保持为真

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-26T14:46:43.557

在您可能将真/假存储为字符串的情况下，例如在 localStorage 中，协议在 2009 年翻转到多对象存储，然后仅在 2011 年翻转回字符串 - 您可以使用 JSON.parse 解释为布尔值飞：

```
this.sidebar = !JSON.parse(this.sidebar); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-22T15:12:11.947

我一直喜欢布尔值，但现在我使用二进制来方便和调试。您可以使用 de consept `!key : ++key: --key`进行切换，如果您在任何异步函数中或任何时候发生错误或 false true，则该值将从 0（零）/ 1（一）泄漏，您可以稍后触发警报进行调试。

# macos - 即使应用程序没有运行，是否可以向 Mountain Lion 的通知中心发送通知，例如在 iOS 中？

> ID：11604410
> 
> 赞同：3
> 
> 时间：2012-07-22T22:10:16.680
> 
> 标签：macos, notifications, center, osx-mountain-lion

在 iOS 中，您可以在远程服务器中注册 APNS ID；即使接收通知的应用程序未运行，服务器也会使用该 ID 和适当的证书向设备发送推送通知。

OSX Mountain Lion 有类似的机制吗？我可以获得指向任何代码/示例的指针吗？

请注意，我对通知中心的本地通知不感兴趣，这在网络上进行了广泛讨论。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:37:58.800

是的，这与山狮的机制相同。

这是一个很好的起点：

[https://developer.apple.com/appstore/push-notifications/index.html](https://developer.apple.com/appstore/push-notifications/index.html)

# actionscript-3 - 如何在不加载到 AS3 的情况下检查文件是否存在

> ID：11604416
> 
> 赞同：0
> 
> 时间：2012-07-22T22:11:32.533
> 
> 标签：actionscript-3, file, actionscript, external

我想放一个按钮来使用navigateURL下载文件，当文件存在时它正在工作，而当它不显示404内容时。我想让 swf 检查该文件是否不在它应该在的位置，然后只需在按钮上执行 visible.false，问题是我不知道如何在不加载文件的情况下检查它。我会感谢你的帮助。

附加：它是一个网络应用程序，按钮只需在浏览器中打开一个链接，该链接将是一个 mp3 文件和一个 pdf 文件。这就是我让用户下载它们的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:11:43.540

最好的方法是从 Web 服务器获取一些“初始化数据”。其中应包含有关文件的信息。但你也可以赶上 Loader 的`Event.OPEN`. 如果它被捕获 - 文件存在然后调用`close`方法，如果不是那么你将捕获`IOErrorEvent.IO_ERROR`.

[open 事件在加载开始时被调度。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)

# java - java.sql.Connection 接口的实现在哪里？

> ID：11604420
> 
> 赞同：4
> 
> 时间：2012-07-22T22:12:29.720
> 
> 标签：java, jdbc

我正在使用包 java.sql 中的接口连接

实际上我虽然它是一个类，但是当我试图查看源代码时，我发现它是一个接口。

在 Connection 接口的源代码中，每个方法只有一行，没有任何实现！！

是什么让这个界面如此运作？

要连接的数据库：MySql

连接源代码页： http: [//www.docjar.com/html/api/java/sql/Connection.java.html](http://www.docjar.com/html/api/java/sql/Connection.java.html)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-22T22:19:37.803

它不是“工作”的接口，而是它的一种实现，它特定于您的特定 RDBMS 供应商。事实上，通常是供应商提供`Connection`接口的实现。

你打电话时

```
Connection conn = DriverManager.getConnection(
    "jdbc:jdbc:mysql://localhost:3306/
,    connectionProps); 
```

驱动程序管理器搜索已注册的 JDBC 驱动程序，找到 MySQL 的驱动程序（它从连接字符串中知道它是 MySQL），将连接属性传递给 MySQL JDBC 驱动程序中实现的类的构造函数，`Connection`并将结果`Connection`实例返回给您。例如，驱动程序可能会返回实现 的包私有类的实例`MySqlConnection`，`Connection`并且您的程序将使用它与 RDBMS 交互，而不需要知道有关该类的任何细节，除了它实现的事实`Connection`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T22:18:39.163

MySQL 驱动程序 ( [http://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/) ) 包含实际的实现。java.sql.Connection 接口只定义了 JDBC 标准所期望的方法。每个数据库驱动程序都必须定义如何实际连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T14:56:44.160

以下是一些直接或间接实现 java.sql.Connection 接口的类示例：

*   oracle.jdbc。OracleConnection 包装器
*   com.mysql.jdbc。ConnectionImpl
*   com.microsoft。sqlserver.jdbc。SQLServerConnection

通过包命名空间，您可以知道它们来自哪个 jdbc 驱动程序。但是这些和其他实现类不能直接使用。正如 dasblinkenlight 所指出的，您应该针对 JDBC API 进行编程，而不是针对每个 JDBC 驱动程序库中提供的类进行编程。使用 API 将允许您切换 RDBMS 而不会破坏您的 java 数据访问代码。

有趣的是，现在使用 JDBC API 的人越来越少。许多人使用构建在 JDBC 之上的对象关系映射框架，例如 Hibernate。

# css - 表单显示元素错误

> ID：11604429
> 
> 赞同：0
> 
> 时间：2012-07-22T22:13:39.137
> 
> 标签：css

我正在尝试创建一个表单，其中表单部分位于左侧，背景颜色为灰色。我希望它浮动到左侧并有一个红色框，错误将直接显示在右侧。但是，如果您查看它在我的链接[http://www.yourfantasyfootballreality.com/createleaguevalidation.php](http://www.yourfantasyfootballreality.com/createleaguevalidation.php)中的显示方式， 您会看到该框仅显示在表单下方，并且表单没有灰色背景色。有人可以帮我将表单背景部分设为灰色并在右侧显示红色框...

```
 <html><head><title>Create a League</title></head>

<body>

<center><h1>Create a League</h1></center>

<div class="form width:400px; height:200px; background-color:gray;">
<form action="createleaguevalidation.php" method="POST">
League Name:       <input style="margin-left:0px;" type="text" name="leaguename" value="<?=$leaguename?>" /><br />
Number of Members: <input type="text" name="members" value="<?=$members?>"/><br>
League Password:   <input type="password" name="leaguepassword" value="<?=$leaguepassword?>"><br>
<input type="submit" value="Register" name="action">
</form>
</div>

<div style="background-color:red; height:200px; width:200px; float:left;">
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T22:18:24.210

您的问题在于您网站的这一行：

```
<div class="form width:400px; height:200px; background-color:gray;"> 
```

它可能应该读得更像这样才能有效：

```
<div class="form" style="width:400px; height:200px; background-color:gray;"> 
```

尽管我建议不要使用内联样式对其进行样式设置，而是使用外部样式表。这样，您可以像这样简化 html：

```
<div class="form"> 
```

你会有这样的css：

```
div.form {
     width:400px; 
     height:200px; 
     background-color:gray;
 } 
```

此外，如果您希望红色框出现在右侧，给定您当前的样式，您需要添加 a`float: left;`到您的`div.form`元素，如下所示：

```
div.form {
     width:400px; 
     height:200px; 
     background-color:gray;
    float: left;
 } 
```

# iphone - 故事板xcode中的错误？

> ID：11604434
> 
> 赞同：0
> 
> 时间：2012-07-22T22:14:09.060
> 
> 标签：iphone, xcode, storyboard

我丢失了所有视图控制器的状态栏，并且我在情节提要上的所有项目都很小。

我所有的视图控制器，导航控制器都是扁平的。我可以重置故事板中的所有内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:30:26.127

如果物品很小，请尝试放大它们。对于状态栏，转到您的属性检查器并在模拟指标中将状态栏更改为黑色或半透明黑色。或者您可以检查您的 plist，因为您可能将状态栏最初隐藏为是

# com - 任何人都让 DCOM 在 Windows 7 中使用 CoCreateInstanceEx

> ID：11604438
> 
> 赞同：0
> 
> 时间：2012-07-22T22:14:50.190
> 
> 标签：com, ole, dcom

我受够了试图实例化一个远程对象。

使用 dcomcnfg，启用对所有 Windows 7 相同工作组 PC 的访问。

```
CoInitializeEx(0,COINIT_APARTMENTTHREADED);
CoInitializeSecurity(0, -1, NULL, NULL,RPC_C_AUTHN_LEVEL_DEFAULT, RPC_C_IMP_LEVEL_IMPERSONATE, NULL, EOAC_NONE, NULL);
COAUTHINFO ca = {0};
ca.dwAuthnSvc = RPC_C_AUTHN_WINNT;
ca.dwAuthzSvc = RPC_C_AUTHZ_NONE;
ca.dwAuthnLevel = RPC_C_AUTHN_LEVEL_DEFAULT;
ca.dwImpersonationLevel = RPC_C_IMP_LEVEL_IMPERSONATE;
COAUTHIDENTITY id = {0};
ca.pAuthIdentityData = &id;
id.User = (USHORT*)<username>;
id.UserLength = length;
id.Password = (USHORT*)<password>;
id.PasswordLength = pwdlength;
id.Domain = (USHORT*)L"WORKGROUP";
id.DomainLength = 9;
id.Flags = SEC_WINNT_AUTH_IDENTITY_UNICODE;

COSERVERINFO c = {0};
c.pwszName = L"192.168.10.3";
c.pAuthInfo = &ca;
MULTI_QI res = {0};
res.pIID = &TheIID;
HRESULT hr = CoCreateInstanceEx(TheCLSID,0,CLSCTX_REMOTE_SERVER,&c,1,&res); 
```

总是 E_ACCESSDENIED。顺便说一下，这个示例 (http://support.microsoft.com/kb/259011) 有效。但我找不到它的来源。

服务器还调用具有相同级别的 CoInitializeSecurity()。

以 Windows XP 计算机为目标时，CoCreateInstanceEx() 返回 S_OK，但未创建服务器。针对 Windows 7 时，E_ACCESSDENIED。

有什么线索吗？此外，工作示例不使用 U+P。也许我应该尝试匿名电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:49:28.233

我有它的工作...

我对您的代码示例有一些观察：

*   您在 CoInitializeSecurity 中对 SOLE_AUTHENTICATION_LIST 使用 NULL；我用与 CoCreateInstanceEx 相同的凭据填写它

*   你使用 RPC_C_AUTHN_LEVEL_DEFAULT；我使用 RPC_C_AUTHN_LEVEL_CONNECT

希望这可以帮助。我是否可以建议您将 DCOM 作为标签添加到您的问题中……这将向您展示与 DCOM 相关的问题。这也帮助了我。

```
 SEC_WINNT_AUTH_IDENTITY authIdent;
    std::wstring domain = string_cast<std::wstring>(commandLineOptions["domain"].as<std::string>());
    std::wstring username = string_cast<std::wstring>(commandLineOptions["username"].as<std::string>());
    std::wstring password = string_cast<std::wstring>(commandLineOptions["password"].as<std::string>());
    authIdent.Domain = reinterpret_cast<unsigned short*>(const_cast<wchar_t*>(domain.c_str()));
    authIdent.DomainLength = wcslen(reinterpret_cast<const wchar_t*>(authIdent.Domain));
    authIdent.User = reinterpret_cast<unsigned short*>(const_cast<wchar_t*>(username.c_str()));
    authIdent.UserLength = wcslen(reinterpret_cast<const wchar_t*>(authIdent.User));
    authIdent.Password = reinterpret_cast<unsigned short*>(const_cast<wchar_t*>(password.c_str()));
    authIdent.PasswordLength = wcslen(reinterpret_cast<const wchar_t*>(authIdent.Password));
    authIdent.Flags = SEC_WINNT_AUTH_IDENTITY_UNICODE;

    /*
    SOLE_AUTHENTICATION_INFO authInfo[2];
    authInfo[0].dwAuthnSvc = RPC_C_AUTHN_WINNT;
    authInfo[0].dwAuthzSvc = RPC_C_AUTHZ_NONE;
    authInfo[0].pAuthInfo = &authIdent;

    authInfo[1].dwAuthnSvc = RPC_C_AUTHN_GSS_KERBEROS;
    authInfo[1].dwAuthzSvc = RPC_C_AUTHZ_NONE;
    authInfo[1].pAuthInfo = &authIdent;

    SOLE_AUTHENTICATION_LIST authList;
    authList.cAuthInfo = 2;
    authList.aAuthInfo = authInfo;
    */

    SOLE_AUTHENTICATION_INFO authInfo[1];
    authInfo[0].dwAuthnSvc = RPC_C_AUTHN_WINNT;
    authInfo[0].dwAuthzSvc = RPC_C_AUTHZ_NONE;
    authInfo[0].pAuthInfo = &authIdent;

    SOLE_AUTHENTICATION_LIST authList;
    authList.cAuthInfo = 1;
    authList.aAuthInfo = authInfo;

    HRESULT hr = CoInitializeSecurity(
        nullptr,                     // pVoid
        -1,                          // cAuthSvc
        nullptr,                     // asAuthSvc
        nullptr,                     // pReserved1,
        RPC_C_AUTHN_LEVEL_CONNECT,   // dwAuthnLevel,
        RPC_C_IMP_LEVEL_IMPERSONATE, // dwImpLevel,
        &authList,                   // pAuthList,
        EOAC_NONE,                   // dwCapabilities,
        nullptr);                    // pReserved3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T05:06:41.670

我得到错误类未在我的 xp 机器上注册，而相同的代码在 Windows Server 2003 上运行正常

```
 IGPM *pGPM = NULL; 
 hr = CoCreateInstance(CLSID_GPM, NULL, CLSCTX_INPROC_SERVER, IID_IGPM , (LPVOID*)&pGPM); 
```

# .htaccess - .htaccess RewriteRule 重定向包含特定参数的 url

> ID：11604444
> 
> 赞同：4
> 
> 时间：2012-07-22T22:17:12.023
> 
> 标签：.htaccess, redirect, http-status-code-404, forum

我已经看到了几个关于类似请求的问题，但是，我并没有尝试重定向到自定义制作的 URL。我只想获取已链接到的常见 URL 并将它们重定向到登录页面。

例如，我想捕获一个特定的 URL，如下所示，但只有这个 URL：

[http://example.com/forum/viewtopic.php?f=12&t=345](http://example.com/forum/viewtopic.php?f=12&t=345)

...并将其重定向到：

[http://example.com/landing-page.html](http://example.com/landing-page.html)

我有一些不再存在的链接，因此我将添加 4 或 5 个重定向到更有用的页面，因为它们目前正在达到 404。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:53:03.107

将此添加到文档根目录中的 htaccess 文件中：

```
RewriteCond %{QUERY_STRING} ^f=12&t=345$
RewriteRule ^forum/viewtopic.php$ /landing-page.html [R=301] 
```

本质上，您希望匹配 this 中的查询字符串`RewriteCond`和`RewriteRule`.

# php - 根目录的 PHP 绝对路径

> ID：11604445
> 
> 赞同：45
> 
> 时间：2012-07-22T22:17:27.043
> 
> 标签：php, relative-path, absolute-path

我不敢相信 PHP 没有一个简单的解决方案来解决这个简单的问题。ASP.NET 有一个 ~ 符号来处理这个问题并从根级别开始一切。这是我的问题：

```
localhost/MySite
   -->Admin
      -- Edit.php
   -->Class
      -- class.EditInfo.php
   -->Texts
      -- MyInfo.txt
   --ShowInfo.php 
```

在 class.EditInfo.php 中，我正在访问 MyInfo.txt，因此我定义了一个相对路径“../Texts/MyInfo.txt”。然后我在 Admin/Edit.php 中创建了一个 EditInfo 对象并访问了 Texts/MyInfo.txt - 它工作正常。

但是现在我必须在 ShowInfo.php 中创建一个 EditInfo 对象并访问 Texts/MyInfo.txt，这就是发生的问题。当我在课堂上使用相对路径时，每当我创建 objEditInfo 并尝试访问 MyInfo.txt 时，我都会收到“文件不存在”错误。

现在我正在寻找与 ASP.NET 中的“~/Texts/MyInfo.txt”等效的东西。有没有类似的东西？？？或者我是否必须使用一些 if/else 条件来设置路径？

* * *

**更新：**

我使用了 $_SERVER['DOCUMENT_ROOT']。我正在使用我的实际网站所在的子文件夹。所以我不得不使用 $_SERVER['DOCUMENT_ROOT']."/mySite" & 然后将其余的地址 ("/Texts/MyInfo.php") 添加到它。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-22T22:26:16.527

`define`使用in创建一个具有到根的绝对路径的常量`ShowInfo.php`：

```
define('ROOTPATH', __DIR__); 
```

或 PHP <= 5.3

```
define('ROOTPATH', dirname(__FILE__)); 
```

现在使用它：

```
if (file_exists(ROOTPATH.'/Texts/MyInfo.txt')) {
  // ...
} 
```

或使用`DOCUMENT_ROOT`定义在`$_SERVER`：

```
if (file_exists($_SERVER['DOCUMENT_ROOT'].'/Texts/MyInfo.txt')) {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-22T22:23:27.340

在 PHP 中有一个全局变量，其中包含与服务器相关的各种详细信息。它被称为 $_SERVER。它还包含根：

```
 $_SERVER['DOCUMENT_ROOT'] 
```

唯一的问题是此变量中的条目是由 Web 服务器提供的，并且不能保证所有 Web 服务器都提供它们。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-08T15:33:27.860

最好使用引导文件启动任何自定义 PHP 项目，在该文件中，您可以根据从`$_SERVER`. 它应该使您的项目或项目的一部分迁移到另一台服务器或服务器上的另一个目录变得容易得多。

这就是我定义根路径的方式：

```
define("LOCAL_PATH_ROOT", $_SERVER["DOCUMENT_ROOT"]);
define("HTTP_PATH_ROOT", isset($_SERVER["HTTP_HOST"]) ? $_SERVER["HTTP_HOST"] : (isset($_SERVER["SERVER_NAME"]) ? $_SERVER["SERVER_NAME"] : '_UNKNOWN_')); 
```

路径`LOCAL_PATH_ROOT`是文档根目录。`HTTP_PATH_ROOT`通过 HTTP 访问同一路径时，该路径是等效的。

此时，可以使用以下代码将任何本地路径转换为 ​​HTTP 路径：

```
str_replace(LOCAL_PATH_ROOT, RELATIVE_PATH_ROOT, $my_path) 
```

如果您想确保与基于 Windows 的服务器的兼容性，您还需要将目录分隔符替换为 URL 分隔符：

```
str_replace(LOCAL_PATH_ROOT, RELATIVE_PATH_ROOT, str_replace(DIRECTORY_SEPARATOR, '/', $my_path)) 
```

这是我用于[PHP PowerTools 样板](https://github.com/PHPPowertools/Boilerplate)的完整引导代码：

```
defined('LOCAL_PATH_BOOTSTRAP') || define("LOCAL_PATH_BOOTSTRAP", __DIR__);

// -----------------------------------------------------------------------
// DEFINE SEPERATOR ALIASES
// -----------------------------------------------------------------------
define("URL_SEPARATOR", '/');
define("DS", DIRECTORY_SEPARATOR);
define("PS", PATH_SEPARATOR);
define("US", URL_SEPARATOR);

// -----------------------------------------------------------------------
// DEFINE ROOT PATHS
// -----------------------------------------------------------------------
define("RELATIVE_PATH_ROOT", '');
define("LOCAL_PATH_ROOT", $_SERVER["DOCUMENT_ROOT"]);
define("HTTP_PATH_ROOT",
        isset($_SERVER["HTTP_HOST"]) ?
        $_SERVER["HTTP_HOST"] : (
        isset($_SERVER["SERVER_NAME"]) ?
        $_SERVER["SERVER_NAME"] : '_UNKNOWN_'));

// -----------------------------------------------------------------------
// DEFINE RELATIVE PATHS
// -----------------------------------------------------------------------
define("RELATIVE_PATH_BASE",
        str_replace(LOCAL_PATH_ROOT, RELATIVE_PATH_ROOT, getcwd()));
define("RELATIVE_PATH_APP", dirname(RELATIVE_PATH_BASE));
define("RELATIVE_PATH_LIBRARY", RELATIVE_PATH_APP . DS . 'vendor');
define("RELATIVE_PATH_HELPERS", RELATIVE_PATH_BASE);
define("RELATIVE_PATH_TEMPLATE", RELATIVE_PATH_BASE . DS . 'templates');
define("RELATIVE_PATH_CONFIG", RELATIVE_PATH_BASE . DS . 'config');
define("RELATIVE_PATH_PAGES", RELATIVE_PATH_BASE . DS . 'pages');
define("RELATIVE_PATH_ASSET", RELATIVE_PATH_BASE . DS . 'assets');
define("RELATIVE_PATH_ASSET_IMG", RELATIVE_PATH_ASSET . DS . 'img');
define("RELATIVE_PATH_ASSET_CSS", RELATIVE_PATH_ASSET . DS . 'css');
define("RELATIVE_PATH_ASSET_JS", RELATIVE_PATH_ASSET . DS . 'js');

// -----------------------------------------------------------------------
// DEFINE LOCAL PATHS
// -----------------------------------------------------------------------
define("LOCAL_PATH_BASE", LOCAL_PATH_ROOT . RELATIVE_PATH_BASE);
define("LOCAL_PATH_APP", LOCAL_PATH_ROOT . RELATIVE_PATH_APP);
define("LOCAL_PATH_LIBRARY", LOCAL_PATH_ROOT . RELATIVE_PATH_LIBRARY);
define("LOCAL_PATH_HELPERS", LOCAL_PATH_ROOT . RELATIVE_PATH_HELPERS);
define("LOCAL_PATH_TEMPLATE", LOCAL_PATH_ROOT . RELATIVE_PATH_TEMPLATE);
define("LOCAL_PATH_CONFIG", LOCAL_PATH_ROOT . RELATIVE_PATH_CONFIG);
define("LOCAL_PATH_PAGES", LOCAL_PATH_ROOT . RELATIVE_PATH_PAGES);
define("LOCAL_PATH_ASSET", LOCAL_PATH_ROOT . RELATIVE_PATH_ASSET);
define("LOCAL_PATH_ASSET_IMG", LOCAL_PATH_ROOT . RELATIVE_PATH_ASSET_IMG);
define("LOCAL_PATH_ASSET_CSS", LOCAL_PATH_ROOT . RELATIVE_PATH_ASSET_CSS);
define("LOCAL_PATH_ASSET_JS", LOCAL_PATH_ROOT . RELATIVE_PATH_ASSET_JS);

// -----------------------------------------------------------------------
// DEFINE URL PATHS
// -----------------------------------------------------------------------
if (US === DS) { // needed for compatibility with windows
    define("HTTP_PATH_BASE", HTTP_PATH_ROOT . RELATIVE_PATH_BASE);
    define("HTTP_PATH_APP", HTTP_PATH_ROOT . RELATIVE_PATH_APP);
    define("HTTP_PATH_LIBRARY", false);
    define("HTTP_PATH_HELPERS", false);
    define("HTTP_PATH_TEMPLATE", false);
    define("HTTP_PATH_CONFIG", false);
    define("HTTP_PATH_PAGES", false);
    define("HTTP_PATH_ASSET", HTTP_PATH_ROOT . RELATIVE_PATH_ASSET);
    define("HTTP_PATH_ASSET_IMG", HTTP_PATH_ROOT . RELATIVE_PATH_ASSET_IMG);
    define("HTTP_PATH_ASSET_CSS", HTTP_PATH_ROOT . RELATIVE_PATH_ASSET_CSS);
    define("HTTP_PATH_ASSET_JS", HTTP_PATH_ROOT . RELATIVE_PATH_ASSET_JS);
} else {
    define("HTTP_PATH_BASE", HTTP_PATH_ROOT .
            str_replace(DS, US, RELATIVE_PATH_BASE));
    define("HTTP_PATH_APP", HTTP_PATH_ROOT .
            str_replace(DS, US, RELATIVE_PATH_APP));
    define("HTTP_PATH_LIBRARY", false);
    define("HTTP_PATH_HELPERS", false);
    define("HTTP_PATH_TEMPLATE", false);
    define("HTTP_PATH_CONFIG", false);
    define("HTTP_PATH_PAGES", false);
    define("HTTP_PATH_ASSET", HTTP_PATH_ROOT .
            str_replace(DS, US, RELATIVE_PATH_ASSET));
    define("HTTP_PATH_ASSET_IMG", HTTP_PATH_ROOT .
            str_replace(DS, US, RELATIVE_PATH_ASSET_IMG));
    define("HTTP_PATH_ASSET_CSS", HTTP_PATH_ROOT .
            str_replace(DS, US, RELATIVE_PATH_ASSET_CSS));
    define("HTTP_PATH_ASSET_JS", HTTP_PATH_ROOT .
            str_replace(DS, US, RELATIVE_PATH_ASSET_JS));
}

// -----------------------------------------------------------------------
// DEFINE REQUEST PARAMETERS
// -----------------------------------------------------------------------
define("REQUEST_QUERY",
        isset($_SERVER["QUERY_STRING"]) && $_SERVER["QUERY_STRING"] != '' ?
        $_SERVER["QUERY_STRING"] : false);
define("REQUEST_METHOD",
        isset($_SERVER["REQUEST_METHOD"]) ?
        strtoupper($_SERVER["REQUEST_METHOD"]) : false);
define("REQUEST_STATUS",
        isset($_SERVER["REDIRECT_STATUS"]) ?
        $_SERVER["REDIRECT_STATUS"] : false);
define("REQUEST_PROTOCOL",
        isset($_SERVER["HTTP_ORIGIN"]) ?
        substr($_SERVER["HTTP_ORIGIN"], 0,
        strpos($_SERVER["HTTP_ORIGIN"], '://') + 3) : 'http://');
define("REQUEST_PATH",
        isset($_SERVER["REQUEST_URI"]) ?
        str_replace(RELATIVE_PATH_BASE, '',
        $_SERVER["REQUEST_URI"]) : '_UNKNOWN_');
define("REQUEST_PATH_STRIP_QUERY",
        REQUEST_QUERY ?
        str_replace('?' . REQUEST_QUERY, '', REQUEST_PATH) : REQUEST_PATH);

// -----------------------------------------------------------------------
// DEFINE SITE PARAMETERS
// -----------------------------------------------------------------------
define("PRODUCTION", false);
define("PAGE_PATH_DEFAULT", US . 'index');
define("PAGE_PATH",
        (REQUEST_PATH_STRIP_QUERY === US) ?
        PAGE_PATH_DEFAULT : REQUEST_PATH_STRIP_QUERY); 
```

如果您将上面的代码添加到您自己的项目中，此时输出所有用户常量（您可以使用它`get_defined_constants(true)`给出的结果看起来有点像这样：

```
array (
  'LOCAL_PATH_BOOTSTRAP' => '/var/www/libraries/backend/Data/examples',
  'URL_SEPARATOR' => '/',
  'DS' => '/',
  'PS' => ':',
  'US' => '/',
  'RELATIVE_PATH_ROOT' => '',
  'LOCAL_PATH_ROOT' => '/var/www',
  'HTTP_PATH_ROOT' => 'localhost:8888',
  'RELATIVE_PATH_BASE' => '/libraries/backend/Data/examples',
  'RELATIVE_PATH_APP' => '/libraries/backend/Data',
  'RELATIVE_PATH_LIBRARY' => '/libraries/backend/Data/vendor',
  'RELATIVE_PATH_HELPERS' => '/libraries/backend/Data/examples',
  'RELATIVE_PATH_TEMPLATE' => '/libraries/backend/Data/examples/templates',
  'RELATIVE_PATH_CONFIG' => '/libraries/backend/Data/examples/config',
  'RELATIVE_PATH_PAGES' => '/libraries/backend/Data/examples/pages',
  'RELATIVE_PATH_ASSET' => '/libraries/backend/Data/examples/assets',
  'RELATIVE_PATH_ASSET_IMG' => '/libraries/backend/Data/examples/assets/img',
  'RELATIVE_PATH_ASSET_CSS' => '/libraries/backend/Data/examples/assets/css',
  'RELATIVE_PATH_ASSET_JS' => '/libraries/backend/Data/examples/assets/js',
  'LOCAL_PATH_BASE' => '/var/www/libraries/backend/Data/examples',
  'LOCAL_PATH_APP' => '/var/www/libraries/backend/Data',
  'LOCAL_PATH_LIBRARY' => '/var/www/libraries/backend/Data/vendor',
  'LOCAL_PATH_HELPERS' => '/var/www/libraries/backend/Data/examples',
  'LOCAL_PATH_TEMPLATE' => '/var/www/libraries/backend/Data/examples/templates',
  'LOCAL_PATH_CONFIG' => '/var/www/libraries/backend/Data/examples/config',
  'LOCAL_PATH_PAGES' => '/var/www/libraries/backend/Data/examples/pages',
  'LOCAL_PATH_ASSET' => '/var/www/libraries/backend/Data/examples/assets',
  'LOCAL_PATH_ASSET_IMG' => '/var/www/libraries/backend/Data/examples/assets/img',
  'LOCAL_PATH_ASSET_CSS' => '/var/www/libraries/backend/Data/examples/assets/css',
  'LOCAL_PATH_ASSET_JS' => '/var/www/libraries/backend/Data/examples/assets/js',
  'HTTP_PATH_BASE' => 'localhost:8888/libraries/backend/Data/examples',
  'HTTP_PATH_APP' => 'localhost:8888/libraries/backend/Data',
  'HTTP_PATH_LIBRARY' => false,
  'HTTP_PATH_HELPERS' => false,
  'HTTP_PATH_TEMPLATE' => false,
  'HTTP_PATH_CONFIG' => false,
  'HTTP_PATH_PAGES' => false,
  'HTTP_PATH_ASSET' => 'localhost:8888/libraries/backend/Data/examples/assets',
  'HTTP_PATH_ASSET_IMG' => 'localhost:8888/libraries/backend/Data/examples/assets/img',
  'HTTP_PATH_ASSET_CSS' => 'localhost:8888/libraries/backend/Data/examples/assets/css',
  'HTTP_PATH_ASSET_JS' => 'localhost:8888/libraries/backend/Data/examples/assets/js',
  'REQUEST_QUERY' => false,
  'REQUEST_METHOD' => 'GET',
  'REQUEST_STATUS' => false,
  'REQUEST_PROTOCOL' => 'http://',
  'REQUEST_PATH' => '/',
  'REQUEST_PATH_STRIP_QUERY' => '/',
  'PRODUCTION' => false,
  'PAGE_PATH_DEFAULT' => '/index',
  'PAGE_PATH' => '/index',
) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-22T22:26:22.580

您可以访问[$_SERVER['DOCUMENT_ROOT']](http://php.net/manual/en/reserved.variables.server.php)变量：

```
<?php 
   $path = $_SERVER['DOCUMENT_ROOT'];
   $path .= "/subdir1/yourdocument.txt";
?> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-22T22:24:31.910

给定您的设置，最好的方法是定义一个描述站点根路径的常量。`config.php`您可以在应用程序的根目录创建一个文件：

```
<?php

define('SITE_ROOT', dirname(__FILE__));

$file_path = SITE_ROOT . '/Texts/MyInfo.txt';

?> 
```

然后在代码中包含`config.php`每个入口点脚本和引用`SITE_ROOT`，而不是提供相对路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-22T22:25:04.167

`dirname(__FILE__)`在全局配置文件中使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-25T10:07:23.597

使用 dirname() 的最佳方式。因为 SERVER['DOCUMENT_ROOT'] 不能在所有服务器上工作，并且还返回服务器运行路径。

```
$root = dirname( __FILE__ );

$root = __DIR__;

$filePath = realpath(dirname(__FILE__));

$rootPath = realpath($_SERVER['DOCUMENT_ROOT']);

$htmlPath = str_replace($root, '', $filePath); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-16T17:49:09.720

**这是我找到rootstart的方法。在根目录下创建一个名为 mainpath.php 的文件**

```
<?php 
## DEFINE ROOTPATH
$check_data_exist = ""; 

$i_surf = 0;

// looking for mainpath.php at the aktiv folder or higher folder

while (!file_exists($check_data_exist."mainpath.php")) {
  $check_data_exist .= "../"; 
  $i_surf++;
  // max 7 folder deep
  if ($i_surf == 7) { 
   return false;
  }
}

define("MAINPATH", ($check_data_exist ? $check_data_exist : "")); 
?> 
```

**对我来说，这是找到它们的最好和最简单的方法。^^**

# html - 绝对定位 + 负边距随窗口调整大小而失真

> ID：11604449
> 
> 赞同：0
> 
> 时间：2012-07-22T22:18:17.943
> 
> 标签：html, css

我有一个`div`我想在窗口居中的包装。我使用以下 CSS 来完成此操作：

```
#wrapper {
    width: 960px;
    margin-left: -480px;
    position: absolute;
    left: 50%;
} 
```

唯一的问题是，当我改变浏览窗口的大小时，我看不到窗口中点的任何东西。我知道这是因为负边距，但是有什么办法可以纠正这个问题吗？

我试图将它浮动在其他一些`div`s 上，因此自动保证金技巧将不起作用。

这是我所拥有的链接：[dev.connectionsquad.com](http://dev.connectionsquad.com)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:44:16.613

我建议重写您的代码并使其符合标准，如下所示：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8" />
    <title></title>
    <style type="text/css">
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    min-height: 600px;
}
body {
    background: #222;
    text-align: center
}
#content {
    text-align: left;
    display: inline-block;
    position: absolute;
    width: 40%;
    min-width: 300px;
    height: 50%;
    min-height: 400px;
    top: 10%;
    margin-left: -20%;
    padding: 25px;
    background-color: #ccc;
    background-image: url('/img/noise.png');
    border: 5px solid #000
}
#background {
    position: absolute;
    width: 100%;
    height: 250px;
    top: 50%;
    margin-top: -125px;
    z-index: -1;
    background-color: #666;
    background-image: url('/img/placeholder.png');
    border-top: 5px solid #eee;
    border-bottom: 5px solid #eee;
}
a:active, a:visited {
    color: #075f76
}
    </style>
</head>
<body>
    <div id="content">
        <h1>Test</h1>
    </div>
    <div id="background"></div>
</body>
</html> 
```

请参阅[HTML5-MDN](https://developer.mozilla.org/en/HTML/HTML5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:53:05.240

对于以页面为中心的任何 div，我建议以下内容。 `body { text-align: center; } #wrapper { width: 1080px; margin: 0px auto; text-align: left; }`

对于某些浏览器，您必须在 body 标记上使用 text-align: center 以使 div 在页面中居中。

# .net - 在 .Net 中动态生成抽象类

> ID：11604458
> 
> 赞同：3
> 
> 时间：2012-07-22T22:19:55.817
> 
> 标签：.net, compilation

我有一个导出过程，它将带注释的类作为输出文件定义（很像 Linq-To-Entities）

一个类看起来像这样：

```
<ExportDefinition(Name:="Some Export Format")>
Public Class SomeExportFormat
    Overridable Property Id As Integer

    <DisplayName("Customer Name")>
    Overridable Property CustomerName As String

End Class 
```

属性是可覆盖的，因为我有时必须代理。

我需要添加允许指定瞬态格式的功能（WCF 调用请求以一次性格式导出特定数据）。

为避免重写大量导出代码，我想采用通过 WCF 传递的定义并定义一个新类。

是我最好的选择`System.CodeDom.Compiler`还是有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:53:33.970

就个人而言，我会看`TypeBuilder`，但我有点……*不平衡*，准备跳进去`ILGenerator`。但是，是的，您可以通过这种方式创建新的子类。但请注意 - WCF 和 EF 不会自动接受您的类型。大多数具有继承意识的库（包括 WCF 和 EF）都会*讨厌*动态子类，因为它们没有预料到它们并将它们视为完全意外的数据。

# c# - 当前上下文中不存在名称“GridLengthHelper”

> ID：11604462
> 
> 赞同：0
> 
> 时间：2012-07-22T22:20:35.743
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在阅读 Metro Revealed：[使用 XAML 和 C# 构建 Windows 8 应用程序](https://rads.stackoverflow.com/amzn/click/com/1430244917)。这本书包含我无法编译的这段代码：

```
using Windows.UI.Xaml;

...

private void HandleViewStateChange(ApplicationViewState viewState) {
    if (viewState == ApplicationViewState.Snapped) {
        GridLayout.ColumnDefinitions[0].Width
            = GridLengthHelper.FromPixels(0);
    } else {
        GridLayout.ColumnDefinitions[0].Width
            = GridLengthHelper.FromValueAndType(1, GridUnitType.Star);
    }
} 
```

问题在于`GridLengthHelper`Visual Studio 不可见的类（在 VS 2012 Express for Windows 8 RC 和 VS 2012 Ultimate RC 中都试过）。构建错误是：

> 当前上下文中不存在名称“GridLengthHelper”

或者

> “Windows.UI.Xaml.GridLengthHelper”因其保护级别而无法访问

[对象浏览器没有根据文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.gridlengthhelper.aspx)显示此类`Windows.winmd`应该在的位置。当我导航到对象浏览器中显示的路径时，更令人沮丧的是：

```
C:\Program Files (x86)\Windows Kits\8.0\References\CommonConfiguration\Neutral\Windows.winmd 
```

并在 Reflector 中打开`Windows.winmd`文件，我看到 public`GridLengthHelper`类存在！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:43:00.700

您可以只使用 new GridLength(pixels) 或 new GridLength(starWidth, GridUnitType.Star)

# google-closure-templates - 如何将大豆模板返回值作为 DOM 节点附加到文档正文？

> ID：11604463
> 
> 赞同：2
> 
> 时间：2012-07-22T22:20:51.590
> 
> 标签：google-closure-templates

我目前正在通过以下方式将 Google Closure Soy 模板附加到我的 HTML 文档的正文中

```
var header = app.ui.templates.home.header();
document.body.innerHTML =
  header + app.ui.templates.home.bottom({
      "widgets": widgets,
  }); 
```

但是，我不认为这是最优的，因为大豆模板构造函数不返回 DOM 节点。因此，我不能说 call `goog.dom.appendChild(header, someNewElementICreated);`。

有没有一种方便的方法可以将大豆模板（比如`header`）转换为 DOM 节点？我可以只调用`goog.dom.$('idOfMyHeader')`，但这将涉及浏览器重排操作，因为在标头已显示后，新的 DOM 节点将附加到标头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T22:57:22.277

> 有没有一种方便的方法可以将大豆模板（比如标题）转换为 DOM 节点？

闭包模板可以使用 Soy JavaScript 库函数呈现为 DOM 片段`soy.renderAsFragment`。

**应用程序.js**

```
goog.require('app.ui.templates');
goog.require('soy');

var fragment = soy.renderAsFragment(app.ui.templates.myTemplate, null /*data*/);
goog.dom.appendChild(goog.dom.getElementsByTagNameAndClass('body')[0],
    /** @type {Node} */ (fragment)); 
```

**模板.soy**

```
{namespace app.ui.templates}

{template .myTemplate}
  <div>
    ...
  </div>
{/template} 
```

由于在这种情况下渲染的模板是一个元素节点，它可以被强制转换为 a`Node`并附加到 DOM。但是，更常见的是使用`div` 元素作为占位符并设置`innerHTML`属性。

# java - 如何将 XML 数据源对象作为参数发送到 JasperReports 填充方法

> ID：11604469
> 
> 赞同：2
> 
> 时间：2012-07-22T22:22:21.370
> 
> 标签：java, xml, jasper-reports, ireport

我在使用 iReport 的 java 应用程序中使用 JasperReports 来创建模板。对于一个特定的报告，我想将一个 xml 对象作为数据源传递给报告机器。我已经能够首先在我的 java 应用程序中的文件系统上创建一个 xml 文件，然后将其用作数据源，这一切都很好。但是写入/读取开销似乎会影响性能，并且肯定会显着减慢该过程。

是否可以将整个 xml 数据源本身作为参数发送到 jasper 填充方法并绕过磁盘写入/读取步骤？

（这是一个不基于网络的桌面应用程序）。

在此先感谢，杰夫

# c# - 属性实现 - Noob 缺乏知识

> ID：11604474
> 
> 赞同：2
> 
> 时间：2012-07-22T22:23:35.677
> 
> 标签：c#, properties

我确定在抱歉之前已经回答了这个问题，但我无法将我的问题浓缩为可谷歌搜索的短语。

我有一个 Pt3 类，它是一个 3d 笛卡尔点（x、y、z 属性加上其他一些好东西）。我使用 Pt3 类型作为 RegionProvider 类中的 get/set 属性值 - 用于 Location 和 Normal。

Location 属性很好，我不在乎属性是如何设置的：

```
//Location set method 1 - sweet...
RegionProvider Foo = new RegionProvider();
Foo.Location.x = 10;
Foo.Location.y = 20;
Foo.Location.z = 30;

//Location set method 2 - also sweet...
RegionProvider Foo2 = new RegionProvider();
Foo2.Location = new Pt3(10, 20, 30); 
```

Normal 属性需要不同的行为。如果需要，我希望 RegionProvider 类将输入规范化为 Normal 属性，例如，如果调用者将“正常”值设置为 40,50,60，RegionProvider 类将规范化为 0.4558、0.5698、0.6838（给出向量长度 == 1） . 如果调用者执行以下操作，一切都很好......

```
//Normal set method A - sweet...
Foo.Normal = new Pt3(40, 50, 60); 
```

...但是如果他们这样做会带来悲伤：

```
//Normal set method B - grief...
Foo2.Normal.x = 40;
Foo2.Normal.y = 50;
Foo2.Normal.z = 60; 
```

...因为 RegionProvider 类将在设置每个元素时进行规范化。我想要做的是阻止调用者看到 Normal 属性的 x、y、z，因此他们被迫使用上面的方法“A”。

一种解决方案可能是根本不规范化属性集，而是规范化属性获取，但这似乎是伪造的。

对于它的价值，这是我的 Normal 属性声明：

```
/// <summary>
/// Property for the objects normal
/// </summary>
public Pt3 Normal
{
    set
    {
        _normal = Bit555ModelCore.NormalizeVector(value);
        this.NotifyPropertyChanged("Normal");
    }
    get
    {
        return _normal;
    }
} 
```

提前欢呼任何帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:33:49.813

如果 Pt3 是您的班级，请删除设置器 (X, Y, Z) 或将它们设为私有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:02:57.700

假设`Normal`并且`Location`必须是同一类型，Pt3 可以具有简单的属性：

```
public bool CanSetXyz { get; } 
```

对于`Location`，将此属性初始化为`true`。对于`Normal`，将其初始化为`false`。

然后在每个 X、Y 和 Z 属性中：

```
private int _x;

public int X
{
    get { return _x; }
    set
    {
        if (!CanSetXyz)
        {
            throw new CantSetXyzException("Can't set X on a Normal point.");
        }
        _x = value;
    }
} 
```

如果它们不必是相同的类型，你会想要创建一个公共的基类，其中的东西总是在两者之间共享，然后一个类将没有 X、Y 和 Z 的设置器，并且其他人会有公共二传手。

例子：

```
public abstract class BasePt3
{
    protected int x;
}

public class LocationPt3 : BasePt3
{
    public int X
    {
        get { return x; }
        set { x = value; }
    }

    public LocationPt3(int _x)
    {
        x = _x;
    }
}

public class NormalPt3 : BasePt3
{
    public int X
    {
        get { return x; }
    }

    public NormalPt3(int _x)
    {
        x = _x;
    }
} 
```

编辑：一个可能更有用的例子，允许读取 X 的基类：

```
public abstract class BasePt3
{
    protected int x;

    public int X
    {
        get { return x; }
    }
}

public class LocationPt3 : BasePt3
{
    public new int X
    {
        get { return x; }
        set { x = value; }
    }

    public LocationPt3(int _x)
    {
        x = _x;
    }
}

public class NormalPt3 : BasePt3
{
    public new int X
    {
        get { return x; }
    }

    public NormalPt3(int _x)
    {
        x = _x;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:18:21.747

`Pt3`应该可能是一个结构并被视为一个不可变的值。

删除设置器，只允许通过构造函数设置坐标。这样，您类型的用户将无法一次更改一个属性，并且`RegionProvider`始终知道 的值何时`Normal`更改。

这几乎就是[System.Drawing.Point](http://msdn.microsoft.com/en-us/library/system.drawing.point.aspx)的行为方式，除了`Point`允许设置 X 和 Y 时，当人们尝试类似的事情时会导致各种问题

```
Foo.Bar.X += 10; 
```

代替

```
Foo.Bar += new Size(10, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T23:37:29.277

我想说问题在于你关于“好东西”的陈述。

如果您决定要拥有一个矢量类（您的 Pt3），请使用它。定义“Normalize()”方法并明确使用它。

好吧，无论如何，这将是我的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-22T23:52:49.420

我认为你有两个选择：

1.  `Pt3`通过使整个类不可变，确保永远不会独立设置 的属性：

    ```
    class Pt3
    {
        public Pt3(double x, double y, double z)
        {
            X = x;
            Y = y;
            Z = z;
        }

        public double X { get; private set; }
        public double Y { get; private set; }
        public double Z { get; private set; }
    } 
    ```

2.  有两个类：`Pt3Mutable`和`Pt3Immutable`（或一些更好的名字）。 `Pt3Immutable`将是不可变的，因此您可以`Normal`安全地使用它。`Pt3Mutable`将是可变的，因此如果您将其用于`Location`，方法 1 仍然有效。

    然后，您可以使用转换运算符在两种类型之间进行转换：隐式转换 from `Pt3Mutable`to`Pt3Immutable`和显式转换相反。

# android - 可以创建没有文本的 ToggleButton 吗？

> ID：11604476
> 
> 赞同：20
> 
> 时间：2012-07-22T22:23:41.380
> 
> 标签：android, android-layout, button, togglebutton

我想像这样创建一个android默认值`ToggleButton`：![在此处输入图像描述](../Images/22f49e998797a422d374948fa9c97ee8.png)

但我想在没有 TEXT 的情况下创建它

我试过这段代码：

```
ToggleButton tb = new ToggleButton(map);
tb.setText(null);
tb.setTextOn(null);
tb.setTextOff(null); 
```

但它在水平绿色条的顶部留下了一个空白空间。

我不想要那个空白空间，我只想要水平的绿色条。

如何实现？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-22T23:33:55.863

顶部的空白区域是由默认的 toggleButton 样式中使用的 2 Ninepatch (`btn_toggle_off.9.png`和) 引起的。`btn_toggle_on.9.png`

要使水平条完美居中，您必须为 ToggleButton 创建一个新样式，该样式将使用两个新的 Ninepatch 派生形式 original。

编辑：需要最少 XML 的方法：

*   为您的切换按钮创建两个九个补丁，将其命名为：`my_btn_toggle`_on 和`my_btn_toggle_off`

*   在drawable文件夹中，创建`my_btn_toggle.xml`：

    ```
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_checked="false" android:drawable="@drawable/my_btn_toggle_off" />
        <item android:state_checked="true" android:drawable="@drawable/my_btn_toggle_on" />
    </selector> 
    ```

*   在您的代码中，添加`tb.setBackgroundResource(R.drawable.my_btn_toggle)`：

    ```
    ToggleButton tb = new ToggleButton(map);
    tb.setText(null);
    tb.setTextOn(null);
    tb.setTextOff(null);
    tb.setBackgroundResource(R.drawable.my_btn_toggle) 
    ```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-12T06:32:46.837

只需设置以下内容：

```
<ToggleButton android:id="@+id/tbtn1" 
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:background="@drawable/bg_check"
 android:textOn="" 
 android:textOff="" 
 android:text="" /> 
```

而且，样式 xml，如果您需要...

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

  <item android:state_checked="true" 
android:drawable="@drawable/bg_check_on" /> <!-- pressed -->

  <item android:drawable="@drawable/bg_check_off" /> <!-- default/unchecked -->
</selector> 
```

希望有帮助~

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-30T15:52:39.687

使用

```
<ToggleButton
    ...
    android:textOff="@null"
    android:textOn="@null"
    android:textSize="0dp" /> 
```

不仅会使文本消失，而且还会摆脱原本会显示的空白空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-25T21:35:03.407

我是这么想的

```
android:textColor="@android:color/transparent" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-10T02:10:30.927

像这样填充样式 XML.. 神奇的是文本颜色透明...

```
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:textOff="blabla"
android:textOn="blablabla"
android:textColor="@android:color/transparent"
android:background="@drawable/boutmediumrouge"

/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-22T22:47:30.317

不是最优雅的解决方案，但`tb.setTextSize(0);`如果您只是想隐藏顶部的额外空间，您可以尝试。可能需要将 textOn/textOff 设置为空字符串：`tb.setTextOn("");`

编辑：我更好的选择是通过`extend`ing创建您自己的自定义按钮`Button`，保持状态（有关按下/未按下状态，请参阅此 SO 帖子：[Pressed android button state](https://stackoverflow.com/questions/10019367/pressed-android-button-state)）并找到要设置为适当状态的资产...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-11T13:59:26.453

```
 <ToggleButton
                android:id="@+id/setting_tb"
                style="@style/style_setting_tb"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:checked="true"
                android:gravity="center"
                android:minHeight="0dp"
                android:minWidth="0dp"
                android:textColor="@color/White"
                android:textOff=""
                android:textOn=""
                android:textSize="14sp" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-22T12:28:50.223

使用 a`CheckBox`而不是`ToggleButton`. `CheckBox`它们具有相同的状态并因此实现相同的功能，但您可以通过定义其`<android:button="@drawable/...">`属性轻松更改外观。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-04T11:35:37.883

```
<ToggleButton
        android:id="@+id/tooglebutton"
        android:layout_width="60dp"
        android:layout_height="25dp"
        android:textOff="off"
        android:textOn="on"
        android:textSize="0dp"
       /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-11T09:25:03.673

布局文件.xml

```
 <ToggleButton
    android:id="@+id/toggle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginStart="8dp"
    android:layout_marginTop="8dp"
    android:layout_marginEnd="8dp"
    android:background="@drawable/check"
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toTopOf="parent" /> 
```

在主要活动.java

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final ToggleButton mic = (ToggleButton)findViewById(R.id.toggle);
    mic.setTextOff(null);
    mic.setTextOn(null);
    mic.setText(null); 
```

layout.xml 使用的 check.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 <item android:drawable="@drawable/mic_on"
        android:state_checked="true">

    </item>
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/mic_off"
        android:state_checked="false">

    </item> 
```

这些行是您正在寻找的那些

```
 mic.setTextOff(null);
    mic.setTextOn(null);
    mic.setText(null); 
```

# javascript - 使用 WebApi/MVC4/Knockout 输出日期的问题

> ID：11604482
> 
> 赞同：1
> 
> 时间：2012-07-22T22:24:52.370
> 
> 标签：javascript, date, knockout.js

我的日期格式为：2012-07-22T:14:45:00

我需要知道如何在 JS 中格式化以便以特定格式显示，即 22/07/2012

如果我这样做：

```
var date = new Date(self.StartTime());
alert("test " + date.getDate() + "/" + date.getMonth() + "/" + date.getFullYear()); 
```

我实际上得到了 22/06/2012 这是一个月吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:29:40.257

[`getMonth`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getMonth)返回从零开始的月份数：

> 的返回值`getMonth`是 0 到 11 之间的整数。0 对应 1 月，1 到 2 月，依此类推。

因此，您需要添加一个来获得您想要的从一开始的月份数，然后通过手动添加缺少的零来计算一位数月份。您还需要考虑单个数字`getDate`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:55:15.743

您可以在服务器端编写一个方法，该方法获取 date 属性的当前值并将其格式化为 javascript 友好字符串，然后从您的 mvc web api 方法返回。然后你可以从这个 js 友好的日期字符串创建 javascript 日期对象，因为 js 日期对象就像那样很酷。

有关格式问题，请参阅此答案：

[Javascript Date() 构造函数不起作用](https://stackoverflow.com/questions/163563/javascript-date-constructor-doesnt-work)

# c# - 公共只读数组数据成员 - 在类构造函数之外更新

> ID：11604483
> 
> 赞同：1
> 
> 时间：2012-07-22T22:25:02.923
> 
> 标签：c#, arrays, readonly

如果可能的话，有人可以告诉我。我正在查看 Microsoft 在 GameState 上为其 XNA 框架提供的代码示例。在其中一个类中，他们使用“Public ReadOnly”数组数据成员。虽然不是一种促进 OO 的做法，但这并没有错。

该类稍后在构造函数中实例化它，到目前为止一切都很好，它也记录在 MSDN 上。

问题：该类稍后在类方法中遍历数组并更改数组中的数据。我查看了 MSDN 并在其上进行了 Google 搜索，并且在我所看到的任何地方都说完全会出错。只读数组有特殊例外吗？

请指教。

```
public class InputState
{
    public readonly KeyboardState[] CurrentKeyboardStates;
    public readonly KeyboardState[] LastKeyboardStates;

    public InputState()
    {
        CurrentKeyboardStates = new KeyboardState[max];  
        LastKeyboardStates = new KeyboardState[max];  
    }
    //Does not make sense code...
    public void Update()
    {
        for (int i=0; i < max; ++i)
        {
            //this should throw errors...
            CurrentKeyboardStates[i] = LastKeyboardStates[i];  
            LastKeyboardStates[i] = Keyboard.GetState();
            //more code....
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:28:36.723

`readonly`表示**变量**在构造函数中设置后不能更改。但是，在这种情况下，这是对数组对象的引用，*可以*更改。

如果字段是值类型（例如`int`），那么您的理解是正确的。该字段可以由初始化程序或任何构造函数设置。这与字段几乎相同`const`。

但如果它是一个引用，那么我们只能保证它总是引用*同一个对象*。您是否可以修改该对象取决于其实现。因此，在数组的情况下，例如，您可以更改数组的内容，但不能更改其长度。

请参阅 MSDN 文档以获取[`readonly`](http://msdn.microsoft.com/en-us/library/acdd6hb7.aspx).

[SLaks](https://stackoverflow.com/users/34397/slaks)指出此警告将从代码分析中生成：[CA2105: Array fields should not be read only](http://msdn.microsoft.com/en-us/library/ms182299.aspx)。你在这里提出来就是为了这个目的。标记数组`readonly`会给您一种无法修改的错误安全感。但是，您唯一*不能*做的就是为该字段分配不同的数组。

* * *

如果您想将一组信息暴露给外部，而不会被更改，那么最好的方法是使用`IEnumerable<T>`属性：

```
public class Foo {
    private int[] _data = new int[40];

    public IEnumerable<int> Data {
        get { return _data; }
    }
} 
```

这将允许该类的使用者对其进行迭代，就像任何其他`IEnumerable`：

```
Foo f = new Foo();
foreach (int d in f.Data) {
    //...
}

f.Data[0] = 7;           // This won't work. IEnumerable doesn't have [] operator.
f.Data = new int[10];    // This won't work. Data only has a getter. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T22:30:24.467

更改只读数组的元素非常好，只是不能重新分配引用。（不能将 CurrentKeyboardStates/LastKeyboardStates 设置为新数组等）可以更改元素值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T22:35:29.190

就像其他两张海报提到的那样，更改被引用的项目并没有错。当它是只读的时，您不能更改引用本身。

所以你想要的不是一个可修改的数组，而是其他一些一旦定义就不可修改的结构。我不会给你一个完整的解决方案，但你应该查看`IEnumerable`和`IEnumerator`接口：http: [//msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)。

# android - Android 外部库参考和 NoClassDefFoundError

> ID：11604485
> 
> 赞同：0
> 
> 时间：2012-07-22T22:25:08.527
> 
> 标签：android, noclassdeffounderror

我正在尝试在 Android中测试这个 api： [http ://code.google.com/p/google-api-spelling-java/。](http://code.google.com/p/google-api-spelling-java/)我创建了一个新应用程序并将库和依赖项从 prev url 复制到项目的“libs”目录，然后通过 Java Build Path->Libraries->Add jars 添加对它们的引用...

这是测试活动：

```
package com.jimmcgowen.googleapispelling;

import org.xeustechnologies.googleapi.spelling.SpellChecker;
import org.xeustechnologies.googleapi.spelling.SpellCorrection;
import org.xeustechnologies.googleapi.spelling.SpellResponse;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.i("classpath", System.getProperty("java.class.path") );
    }

    public void onDoIt(View view) {
        EditText input = (EditText)findViewById( R.id.PlainText );
        String word = input.getText().toString().trim();

        SpellChecker checker = new SpellChecker();
        SpellResponse spellResponse = checker.check( word );

        for (SpellCorrection sc : spellResponse.getCorrections()) {
            Log.i("Spell Checker", sc.getValue());

            TextView tv = new TextView( this );
            tv.setText( sc.getValue() );

            LinearLayout container = (LinearLayout)findViewById( R.id.ResultContainer );
            container.addView( tv );
        }
    }
} 
```

编译得很好，但是当我运行它时，我得到：

```
07-22 16:16:48.673: E/dalvikvm(29209): Could not find class 'org.xeustechnologies.googleapi.spelling.SpellChecker', referenced from method com.jimmcgowen.googleapispelling.MainActivity.onDoIt
07-22 16:16:48.703: W/dalvikvm(29209): VFY: unable to resolve new-instance 28 (Lorg/xeustechnologies/googleapi/spelling/SpellChecker;) in Lcom/jimmcgowen/googleapispelling/MainActivity;
07-22 16:16:48.713: D/dalvikvm(29209): VFY: replacing opcode 0x22 at 0x0015
07-22 16:16:48.713: D/dalvikvm(29209): VFY: dead code 0x0017-004c in Lcom/jimmcgowen/googleapispelling/MainActivity;.onDoIt (Landroid/view/View;)V
07-22 16:16:48.903: I/classpath(29209): .
07-22 16:16:48.903: D/ATRecorder(29209): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40529128
07-22 16:16:53.948: D/AndroidRuntime(29209): Shutting down VM
07-22 16:16:53.958: W/dalvikvm(29209): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
07-22 16:16:53.978: E/AndroidRuntime(29209): FATAL EXCEPTION: main
07-22 16:16:53.978: E/AndroidRuntime(29209): java.lang.IllegalStateException: Could not execute method of the activity
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.view.View$1.onClick(View.java:2192)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.view.View.performClick(View.java:2533)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.view.View$PerformClick.run(View.java:9299)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.os.Handler.handleCallback(Handler.java:587)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.os.Looper.loop(Looper.java:150)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.app.ActivityThread.main(ActivityThread.java:4352)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at java.lang.reflect.Method.invokeNative(Native Method)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at java.lang.reflect.Method.invoke(Method.java:507)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at dalvik.system.NativeStart.main(Native Method)
07-22 16:16:53.978: E/AndroidRuntime(29209): Caused by: java.lang.reflect.InvocationTargetException
07-22 16:16:53.978: E/AndroidRuntime(29209):    at java.lang.reflect.Method.invokeNative(Native Method)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at java.lang.reflect.Method.invoke(Method.java:507)
07-22 16:16:53.978: E/AndroidRuntime(29209):    at android.view.View$1.onClick(View.java:2187)
07-22 16:16:53.978: E/AndroidRuntime(29209):    ... 11 more
07-22 16:16:53.978: E/AndroidRuntime(29209): Caused by: java.lang.NoClassDefFoundError: org.xeustechnologies.googleapi.spelling.SpellChecker
07-22 16:16:53.978: E/AndroidRuntime(29209):    at com.jimmcgowen.googleapispelling.MainActivity.onDoIt(MainActivity.java:29)
07-22 16:16:53.978: E/AndroidRuntime(29209):    ... 14 more 
```

请注意，类路径在运行时为空。我认为这就是问题所在，但我不知道从哪里开始。

使用 API 8 级 SDK 工具 20 平台工具 13 我刚刚更新了 eclipe 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:55:07.950

将 jar 添加到资产文件夹，然后将它们链接到项目构建路径。不要忘记在订单和导出选项卡中选择罐子。

# c# - web.config 文件中的自定义配置部分破坏了我的单元测试

> ID：11604488
> 
> 赞同：2
> 
> 时间：2012-07-22T22:25:54.570
> 
> 标签：c#, asp.net-mvc-3, unit-testing

我的单元测试有效，但是在我添加了一些代码以从 web.config 文件中的自定义配置部分获取值后，单元测试停止工作。以下是我的代码，那些标有“//new”的行是我添加的新代码，它们破坏了测试。

```
public partial class AccountController : Controller
{
    private readonly string _twitterConsumerKey;
    private readonly string _twitterConsumerSecret;
    private readonly string _twitterAccessToken;
    private readonly string _twitterAccessTokenSecret;

    private readonly IUserService _userService;

    public AccountController(IUserService userService)
    {
        if (userService == null)
            throw new ArgumentNullException("userService");

        _userService = userService;

        _twitterConsumerKey = TwitterSettings.Settings.ConsumerKey;  //new code
        _twitterConsumerSecret = TwitterSettings.Settings.ConsumerSecret;  //new code
        _twitterAccessToken = TwitterSettings.Settings.AccessToken;  //new code
        _twitterAccessTokenSecret = TwitterSettings.Settings.AccessTokenSecret;  //new code

    }

public class TwitterSettings : ConfigurationSection
{

    private static TwitterSettings settings = ConfigurationManager.GetSection("Twitter") as TwitterSettings;
    public static TwitterSettings Settings { get { return settings; } }

    [ConfigurationProperty("ConsumerKey", IsRequired = true)]
    public string ConsumerKey
    {
        get { return (string)this["ConsumerKey"]; }
        set { this["ConsumerKey"] = value; }
    }

    [ConfigurationProperty("ConsumerSecret", IsRequired = true)]
    public string ConsumerSecret
    {
        get { return (string)this["ConsumerSecret"]; }
        set { this["ConsumerSecret"] = value; }
    }

    [ConfigurationProperty("AccessToken", IsRequired = true)]
    public string AccessToken
    {
        get { return (string)this["AccessToken"]; }
        set { this["AccessToken"] = value; }
    }

    [ConfigurationProperty("AccessTokenSecret", IsRequired = true)]
    public string AccessTokenSecret
    {
        get { return (string)this["AccessTokenSecret"]; }
        set { this["AccessTokenSecret"] = value; }
    }

} 
```

当我在单元测试中调用这个控制器时。我收到以下错误消息：“失败：System.NullReferenceException：对象引用未设置为对象的实例”。我需要创建一个ISSetting接口吗？？？

```
 [Test]
    public void Login_Action_Get_Returns_Login_View()
    {
        // Arrange

        var expectedViewName = "~/Views/Account/Login.cshtml";

       // it breaks here.
        _accountController = new AccountController(_userService.Object, _mappingService.Object, _authenticationService.Object);

        // Act

        var result = _accountController.Login() as ViewResult;

        // Assert

        Assert.AreEqual(expectedViewName, result.ViewName, "View name should be {0}", expectedViewName);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T08:03:27.490

好的做法是单独测试单元。这也意味着抽象你的环境——数据库、文件系统（包括配置文件）等。所以，从你的类中提取`TwitterSettings`接口：`TwitterSettings`

```
public interface ITwitterSettings
{
    string ConsumerKey { get; set; }
    string ConsumerSecret { get; set; }
    string AccessToken { get; set; }
    string AccessTokenSecret { get; set; }
} 
```

通过您的设置实现此接口：

```
public class TwitterSettings : ConfigurationSection, ITwitterSettings 
```

并将此依赖项注入控制器：

```
public partial class AccountController : Controller
{
    private readonly IUserService _userService;
    private readonly ITwitterSettings _twitterSettings;

    public AccountController(IUserService userService, 
                             ITwitterSettings twitterSettings)
    {
        if (userService == null)
            throw new ArgumentNullException("userService");    

        _userService = userService;
        _twitterSettings = twitterSettings;
    }   
} 
```

BTW abstracting of environment makes tests run faster, and your tests will fail only if your SUT logic is broken, not if database server not responding, or web.config is not found.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T00:03:13.160

单元测试项目不会使用 MVC 项目的 web.config 文件，因为它正在运行它自己的应用程序上下文。

在测试项目的根目录中创建一个 App.Config 文件，并将您的自定义配置部分添加到其中。现在运行您的控制器测试，看看它是否有效。这不是一个适当的单元测试，但它会证明您的自定义代码确实有效。

如果要测试实际 web.config 文件的有效性，则必须编写其他辅助方法。

[此链接可能会有所帮助](https://stackoverflow.com/questions/4738/using-configurationmanager-to-load-config-from-an-arbitrary-location)

# .net - 自升级 2012 年 6 月 SDK 1.7 以来，Azure 部署不断回收

> ID：11604491
> 
> 赞同：2
> 
> 时间：2012-07-22T22:26:28.377
> 
> 标签：.net, asp.net-mvc, azure

我有一个以前成功运行的部署。从那时起，我已升级到 2012 年 6 月的 SDK，当我部署它时，它会不断回收。如果我远程桌面进入实例，我可以手动打开应用程序并运行（没有黄屏死机），所以必须有一些关于部署的东西。

在事件查看器中，我看到了错误：

错误应用程序 WaHostBootstrapper.exe，版本 6.0.6002.18488，时间戳 0x4fcaabe9，错误模块 ntdll.dll，版本 6.0.6002.18520，时间戳 0x4e811810，异常代码 0xc0000008，错误偏移量 0x00000000000b6ff8，进程 id 0x%x，应用程序启动时间.

但这并不是特别有用。我已经用 SDK 1.7 完全重新创建了 Cloud 项目。它是一个 ASP.NET MVC 4 RC 应用程序。

我该怎么做才能查看此错误的确切原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:41:41.767

根据您的陈述“我已经使用 SDK 1.7 完全重新创建了 Cloud 项目。它是一个**ASP.NET MVC 4 RC**应用程序。”，我不确定 1）您是否真的在使用 MVC4.0 RC 位或 2）您是使用 MVC 4.5 BETA 位。MVC 4.0 已经发布，安装 2012 年 6 月 SDK 实际上安装了基于 ASP.NET MVC 4.0 的云模板和二进制文件，因此您必须将 MVC 4.0 的发布位与 Windows Azure 云项目一起使用。如果您使用的是 RC 位，这可能是您的第一个问题。

我过去曾看到完全相同的错误，并在我的博客中描述了此类问题的原因和可能的解决方法：[Windows Azure Web Role Error: "Faulting application WaHostBootstrapper.exe](http://blogs.msdn.com/b/avkashchauhan/archive/2011/06/29/windows-azure-web-role-error-quot-faulting-application-wahostbootstrapper-exe-quot.aspx)

我相信您的包没有必要的 DLL，因此请检查您的部署中缺少哪个 DLL，然后重新部署您的应用程序以解决此问题。

此外，如果您想在默认情况下使用 Windows Server 2008 R2 运行您的应用程序，您可以修改 ServiceConfiguration.cscfg 中的 osFamily=2 (1:Windows Server 2008 SP2, 2:Windows Server 2008 R2) 设置，[如下](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710)所示在部署时进行配置：

```
<ServiceConfiguration 
    serviceName="<service-name>" 
    xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" 
    osFamily="2" 
    osVersion="*" 
    schemaVersion="2012-05.1.7"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:40:49.063

升级到 v1.7 后我遇到了同样的问题，但是在查看 Azure VM 中的 Windows Azure 日志时，我注意到以下异常：

```
An unhandled exception occurred. Type: System.ArgumentException Process ID: 2340
Process Name: DiagnosticsAgent
Thread ID: 1
AppDomain Unhandled Exception for role Backend_IN_0
Exception: Endpoint http://xxxx.blob.core.windows.net/ is not a secure connection. 
```

因此，我将诊断连接字符串更改为使用`https`，而不是`http`瞧，这解决了我的问题。

希望这对你有用，我已经把头发拉了两天了。

# haskell - haskell 模型导出错误

> ID：11604492
> 
> 赞同：-1
> 
> 时间：2012-07-22T22:26:34.747
> 
> 标签：haskell

参考[haskell facebook 示例](https://stackoverflow.com/questions/11596234/haskell-facebook-example)效果很好，但现在我不知道如何将它拆分到一个单独的模块中，以便我可以用它做一些有用的事情。另外我不知道我需要为 fbEmail fbUrl 放置什么类型，以及是否需要在每个模块中放置 OverloadedStrings？也许我的思考过程是错误的，并且不可能将导入 Network.HTTP.Conduit (withManager) 与 main 分开？

登录.hs

```
{-# LANGUAGE OverloadedStrings, NoMonomorphismRestriction #-}
module Login (
    fbUrl,
    fbEmail
) where

import qualified Facebook as FB
import Network.HTTP.Conduit (withManager)
import Data.Text
import Data.ByteString.Internal (ByteString)

app :: FB.Credentials
app = FB.Credentials "localhost" "249348058430770" "..."

url :: FB.RedirectUrl
url = "http://localhost/fb"

perms :: [FB.Permission]
perms = ["user_about_me", "email"]

fbUrl = FB.getUserAccessTokenStep1 url perms

fbEmail c = withManager $ \manager -> FB.runFacebookT app manager $ do
    t <- FB.getUserAccessTokenStep2 url [c]
    u <- FB.getUser "me" [] (Just t)
    return $ FB.userEmail u 
```

主文件

```
module Main (
  main
) where

import Login
import System.IO

main :: IO ()
main = do
    u <- fbUrl
    print u
    a <- readLn
    e <- fbEmail a
    print e 
```

我收到以下错误

```
src/Main.hs:11:10:
Couldn't match expected type `IO t0'
            with actual type `fb-0.9.6:Facebook.Monad.FacebookT
                                fb-0.9.6:Facebook.Monad.Auth m0 Data.Text.Internal.Text'
In a stmt of a 'do' block: u <- fbUrl
In the expression:
  do { u <- fbUrl;
       print u;
       a <- readLn;
       e <- fbEmail a;
       .... }
In an equation for `main':
    main
      = do { u <- fbUrl;
             print u;
             a <- readLn;
             .... } 
```

代码更新 6：见答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:53:44.880

总结评论中发生的事情，这个问题基本上是三重的。您尝试返回 a`Maybe Text`而不是 a `FacebookT ... (Maybe Text)`，由于缺少 a `return`，缺少类型签名导致单态限制踢 inm ，最后您忘记了`runFacebookT`in `main`。

编辑：第四个问题是你给`fbEmail`了一个太多态的类型，类型检查器抱怨类型变量`a`实际上必须是*完全* `(ByteString, ByteString)`的。编辑：在这里使用类型*变量*表明该函数可以应用于*任何东西*，但事实并非如此，因为`getUserAccessTokenStep2`需要一个成对的列表`ByteStrings`（而不仅仅是一个任意列表）。

编辑：第五个问题是由于`FacebookT`接管*任何*monad 的要求太弱（withManager 要求它是一堆更具体的东西，例如`MonadIO`）。正如您在错误中看到的那样，它是一长串的事情，您最好只删除类型签名`fbEmail`并启用`NoMonomorphismRestriction`扩展名（只需将其添加到您拥有的扩展名列表中`OverloadedStrings`。

请注意，通常你应该有明确的类型声明，但我对管道包不太熟悉（我更喜欢管道人：P），我不知道那里是否有一些约束同义词技巧它不那么冗长。

Unless these were just silly typos you might want to read up on monads and monad transformers in one of the many tutorials floating around (or check the [haskell wiki](http://www.haskell.org/haskellwiki/Monad)).

Also questions such as these might be considered a little too specific for stackoverflow (see the FAQ) and more appropriate to the haskell IRC channel (I'll flag it once we've managed to got it running the way you want, but in future I suggest you try the IRC channel on FreeNode :)).

# python - 如何使最后一个标记在 matplotlib 轴子图中不可见？

> ID：11604493
> 
> 赞同：2
> 
> 时间：2012-07-22T22:26:44.407
> 
> 标签：python, matplotlib, axes

假设轴子图的标记显示为“0,20,40,60,80,100”，但我想让最后一个标记 100 不可​​见。不确定如何为 matplotlib 轴子图执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T10:25:29.827

如果要设置 x-ticks 的位置，只需将最后一个标签替换为空字符串即可。

```
import pylab as plt

x=[12, 13, 14, 15, 16]
y=[14, 15, 16, 17, 18]

xticks=[12,13,14,15,16]

fig=plt.figure()
ax=fig.add_subplot(111)
ax.plot(x,y,'o-')

ax.set_xticks(xticks)
ax.set_xticklabels(xticks[:-1]+[""])
plt.show() 
```

您还可以使用以下内容删除最后一个 x-tick 标签

```
for label in ax.get_xticklabels():
    pass
label.set_visible(False) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T12:58:56.970

你的问题没有指定除了ticklabel之外是否要隐藏tickline，所以如果你还想隐藏tickline，这条线应该这样做

```
plt.setp(ax.get_xticklines()[-2:],visible=False) 
```

Matplotlib 的刻度标签的顺序在底部和顶部之间交替，从左到右移动。因此，隐藏最后两个假设您希望隐藏顶部和底部的刻度标签。只隐藏底部的一个：

```
plt.setp(ax.get_xticklines()[-2],visible=False) 
```

或者只是最上面的一个：

```
plt.setp(ax.get_xticklines()[-1],visible=False) 
```

我应该补充一点，这是对@imsc 先前答案的补充，它应该在任何设置 xticklabels 身份的行之后输入，以避免将其可见性状态重置为 True。

# python - python交互式shell中的内存泄漏

> ID：11604499
> 
> 赞同：2
> 
> 时间：2012-07-22T22:27:36.170
> 
> 标签：python, memory-leaks, ubuntu-12.04

当我运行 python 2.7 交互式 shell（在 Ubuntu 12.04 LTS 中）时，我得到了似乎是内存泄漏的情况。当我启动一个交互式 shell 时，内存使用率以相当均匀的速度增加，直到所有 ram (3.9gb) 被使用，然后它回落到 80% (ish) 并且交换空间增加了 ~200-400mb 并且它平稳并提供提示，但任何进一步的交互都会将 RAM 使用率推回到 100% 的位置（使系统几乎无法运行）。

交互式 shell 可以从 gnome 终端启动，或者当从另一个盒子 ssh 进入计算机时（我正在使用用于 android 的 connectbot 进行测试），也会出现同样的问题。

**编辑**：我删除了我的 .pythonrc.py 文件，问题似乎已经消失了。我最近没有更改它（我一个月前创建了它，从那以后就没有碰过它，这个问题从昨天开始）。

这是我的pythonrc文件（`.pythonrc.py`）

```
import atexit 
import os 
import readline 
import rlcompleter 

history = os.path.expanduser('~/.python_history') 
readline.read_history_file(history) 
readline.parse_and_bind('tab: complete') 
atexit.register(readline.write_history_file, history) 
```

**编辑2：**

我删除了我的`.python_history`文件，这似乎解决了问题。该文件是 1914155 行，大约 54mb。我打算调整我的 .pythonrc 文件，以便它只存储几百行的历史记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:14:01.483

`.pythonrc.py`为了解决这个问题（希望是永久解决方案），我在文件中添加了以下行。

```
import atexit 
import os 
import readline 
import rlcompleter 

history = os.path.expanduser('~/.python_history') 
readline.read_history_file(history) 
readline.parse_and_bind('tab: complete')
# The added line
readline.set_history_length(200)
atexit.register(readline.write_history_file, history) 
```

我认为任何足够大的数字都可以（而不是只有 200 行），但我认为如果我在我的历史中回溯超过 200 行，那我就做错了。

# asp.net-mvc - 如何在 Ninject 中创建一个根据请求的控制器更改的绑定？

> ID：11604502
> 
> 赞同：2
> 
> 时间：2012-07-22T22:29:07.820
> 
> 标签：asp.net-mvc, dependency-injection, ninject, asp.net-mvc-4

我有一个 ASP.NET MVC 3 应用程序，并且遇到了以下情况。在我的页面上，我有一个侧栏，它可以包含特定于该页面的相关链接，即由控制器类型确定。链接将由当前页面的内容决定。

我已经关注了Phil Haack 的关于使用和单独的控制器渲染动态侧边栏[的博客文章。](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)`Html.Action`我喜欢这种方法给我的关注点分离：我的控制器对侧边栏一无所知，这是应该的方式。

我现在想将派生类型的实例注入`SideBar`到 my`SideBarController`中，该操作将被调用以呈现侧栏本身。每个控制器都有一种派生类型`SideBar`，所以我发现自己想编写类似这样的代码：

```
kernel.Bind<SideBar>().ToMethod(_ => controllerName == "foo" 
                                         ? new FooSideBar(kernel.Get<UrlHelper>()) 
                                         : new BarSideBar(kernel.Get<UrlHelper>())); 
```

但是这段代码有很多错误，尤其是我无法在 lambda 中获取控制器名称这一事实，以及当第三种类型的控制器出现时会发生什么的问题，然后第四等

请注意，我不能使用`WhenInjectedInto<T>()`，因为`SideBar`实例将始终注入到`SideBarController`.

值得一提的`SideBar`是，当前正在通过 Ninject Factory 扩展创建 的实例，因此相关的侧边栏绑定如下（我硬绑定了 SideBar 的实现，只是为了证明该方法到目前为止有效）：

```
kernel.Bind<ISideBarFactory>().ToFactory().InRequestScope();
kernel.Bind<SideBar>().To<FooSideBar>().InRequestScope(); 
```

`SideBar`最后，我基本上在派生类型和控制器类型之间建立了一对一的映射关系。感觉这里可能有点重复，但也代表了组件之间的关系，所以我觉得我可以接受。

这一切都让我觉得我解决这部分问题的方法是错误的，因此我欢迎有关如何使用 Ninject 实现干净解决方案的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:33:04.700

我会尝试回答，但我现在不在电脑附近，所以会有点模糊。

从根本上说，您可以将另一个参数传递给 Html.Action，因此如果该参数是请求或从请求中收集到的内容（例如控制器名称或 Url 部分），那么您可以使用它来确定要显示哪个侧边栏。您可能需要将工厂注入到侧边栏控制器中，并使用它来创建正确的控制器，或者进行其他一些操作，但是一旦您知道需要哪个侧边栏，它就会变得容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:53:13.680

我不确定这是否可以使用 ninject 但它正在使用 ModelBinding 像这样：

```
public interface ISidebar
    {
    }
    public class Sidebar1 : ISidebar
    {
    }
    public class Sidebar2 : ISidebar
    {
    }

 public class SidebarModelBinder : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var controller = controllerContext.RouteData.Values["Controller"];
            var action = controllerContext.RouteData.Values["Action"];

            switch (controller.ToString())
            {
                case "Home":
                    return new Sidebar1();

                default:
                    return new Sidebar2();

            }

            throw new NotImplementedException();
        }
    }

 public class TestController : Controller
    {
        public TestController()
        {
        }

        public string Index(ISidebar sidebar)
        {
            //Do something with it
            return "OK";
        }
    }

//Add to the Application_Start
ModelBinders.Binders.Add(typeof(ISidebar), new SidebarModelBinder()); 
```

编辑：花了我一段时间，但设法让它使用 Ninject 工作。

请阅读：[http ://blog.voltje.be/2012/08/22/creating-a-dynamic-sidebar-with-asp-net-mvc-ninject/](http://blog.voltje.be/2012/08/22/creating-a-dynamic-sidebar-with-asp-net-mvc-ninject/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:26:32.387

建议：

*   不要注入侧边栏。
*   而是注入 [sidebar]ContentProvider。
*   在全局 asax 中绑定一个默认实现（每个请求），然后在控制器中根据需要取消绑定并重新绑定。

# javascript - 变量对后代函数不可用，涉及的事件

> ID：11604503
> 
> 赞同：0
> 
> 时间：2012-07-22T22:29:15.770
> 
> 标签：javascript, variables, drop-down-menu, dom-events

我有一个简单的选择框。当用户选择一个选项时，应该会出现一个图像和一个包含一些代码的文本框：

```
 <select name="state" id="state" style="margin-bottom: 1em;">
      <option value="AL">Alabama</option>
      <option value="AK">Alaska</option>
      <option value="AZ">Arizona</option>
      <!-- etc. etc. -->
 </select>

 <div id="badgeView"></div>

 <div id="codewrap" >
      <textarea id="codeView" readonly="readonly"></textarea>
 </div> 
```

这是脚本：

```
/* Helpful variables */ 
var codeTemplate = '<a href="http://www.nonprofitvote.org/voting-in-yourstate.html" title="Voting in Your State">\n' + '<img src="http://nonprofitvote.org/images/badges/voting_in_yourstate.jpg" alt="Voting in Your State" />\n' + '</a>';
var state = document.getElementById('state');
var badgeView = document.getElementById('badgeView');
var codeView = document.getElementById('codeView');

/* Load up AL's image and code when the page first loads */
changeBadgeAndCode();

/* What to do when the user selects an option */
state.addEventListener('change', changeBadgeAndCode, false);

/* What to do if a user clicks in the code view text box */
codeView.addEventListener('click', selectText, false);

/* Function declarations */
function changeBadgeAndCode(){
    changeBadgeView(badgeView);
    changeCodeView(codeView);

    var stateName = state.options[state.selectedIndex].value.toLowerCase();

    function changeBadgeView(element) {
        element.innerHTML = '<img src="http://www.nonprofitvote.org/images/badges/voting_in_' + stateName + '.jpg" />';
    }

    function changeCodeView(element) {
        codeTemplate = codeTemplate.replace(/yourstate/g, stateName);
        codeTemplate = codeTemplate.replace(/Your State/g, stateName);
        element.innerHTML = codeTemplate;
    }
}
function selectText(){this.select()} 
```

如果我 alert `stateName`，我会得到一个反映我的选项选择的值。但是该`stateName`变量似乎并没有出现在`changeBadgeView`and`changeCodeView`函数中。我不明白为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:35:36.227

您正在调用`changeBadgeView`并且`changeCodeView`在`stateName`分配其值之前。

你需要先完成任务...

```
function changeBadgeAndCode(){
    var stateName = state.options[state.selectedIndex].value.toLowerCase();

    changeBadgeView(badgeView);
    changeCodeView(codeView);

    function changeBadgeView(element) {
        element.innerHTML = '<img src="http://www.nonprofitvote.org/images/badges/voting_in_' + stateName + '.jpg" />';
    }

    function changeCodeView(element) {
        codeTemplate = codeTemplate.replace(/yourstate/g, stateName);
        codeTemplate = codeTemplate.replace(/Your State/g, stateName);
        element.innerHTML = codeTemplate;
    }
} 
```

# http - 与 Scala 的 http 会话

> ID：11604505
> 
> 赞同：2
> 
> 时间：2012-07-22T22:30:08.523
> 
> 标签：http, scala, wget

我怎样才能将这个 wget 的东西移植到 scala：

```
wget --keep-session-cookies --save-cookies cookies.txt --post-data 'password=xxxx&username=zzzzz' http://server.com/login.jsp
wget --load-cookies cookies.txt http://server.com/download.something 
```

我想编写一个小巧的可移植脚本，没有外部库等。

这可以轻松完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:51:38.110

您的两个主要要求似乎是：

*   使用一些正文进行身份验证
*   维护请求之间的会话 cookie。

由于除了 scala.io.Source 之外，Scala 本身在核心库中对 HTTP 的支持并不多，因此您几乎被 Java 本身的 HttpUrlConnection 所困扰。看起来这个站点已经有一些以如下方式使用 HttpUrlConnection 的示例： [Reusing HttpURLConnection so to keep session alive](https://stackoverflow.com/questions/10714943/reusing-httpurlconnection-so-as-to-keep-session-alive)

# c - c中的strstr与正则表达式

> ID：11604509
> 
> 赞同：3
> 
> 时间：2012-07-22T22:30:57.503
> 
> 标签：c, regex, gcc, strstr

例如，我有一个用户 ID、访问时间、程序名称和版本号列表作为 CSV 字符串列表，如下所示：

```
1,1342995305,Some Program,0.98
1,1342995315,Some Program,1.20
2,1342985305,Another Program,15.8.3
1,1342995443,Bob's favorite game,0.98
3,1238543846,Something else,
... 
```

假设这个列表**不是**一个文件，而是一个内存中的字符串列表。

现在假设我想了解某个程序被某些程序访问的频率，如它们的版本号所示。（例如*“Some Program version 1.20”*被访问了 193 次，*“Some Program version 0.98”*被访问了 876 次，*“Some Program 1.0.1”*被访问了 1,932 次）

是构建一个正则表达式然后用它`regexec()`来查找匹配并拉出版本号，还是`strstr()`匹配程序名称加逗号，然后读取字符串的以下部分作为版本号更好？如果它有所作为，假设我在 Linux 上使用 GCC。

有性能差异吗？一种方法比另一种方法“更好”还是“更合适”？这有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:00:37.997

继续`strstr()`- 使用正则表达式来计算出现次数不是一个好主意，因为无论如何你都需要使用循环，所以我建议你做一个简单的循环来搜索子字符串的位置并增加计数器并在之后开始搜索位置每场比赛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:21:54.073

strchr/memcmp 是大多数 libc 版本实现 strstr 的方式。glibc 中 strstr 的硬件相关实现做得更好。SSE2 和 SSE4.2 (x86) 指令集都比逐字节扫描要好得多。如果您想了解如何操作，我不久前发布了几篇博客文章 --- [SSE2 和 strstr](http://mischasan.wordpress.com/2011/07/16/convergence-sse2-and-strstr/) 以及[SSE2 和 BNDM 搜索](http://mischasan.wordpress.com/2012/02/04/sse2-and-bndm-string-search/)--- 您可能会觉得有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:02:46.430

`strtok()`，并将数据分解成更结构化的东西（如结构列表）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T23:04:10.150

我什么都不做：我打赌用它`strchr()`来查找逗号和`strcmp()`检查程序名称会更快。

至于性能，我希望字符串函数（`strtok`/ `strstr`/ `strchr`/ `strpos`/ `strcmp`...）或多或少以相同的速度运行（即非常非常快），而正则表达式的运行速度会明显变慢，尽管仍然很快。

真正的性能优势将来自正确设计搜索：它必须运行多少次，程序的数量是否固定......？

例如，您获得所有程序的所有频率数据的单次扫描将比寻找给定程序的单次扫描慢得多。但是如果设计得当，对其他程序的所有后续查询都会运行得更快。

# javascript - 在 JSP 中设置选定的菜单项

> ID：11604512
> 
> 赞同：0
> 
> 时间：2012-07-22T22:31:20.953
> 
> 标签：javascript, jsp, menu, highlight

我试图突出显示链接到新页面的所选菜单项。将背景图像交换为较亮的图像是可行的，但该设置在页面上滞后。索引页是正确的，但随后它开始突出显示先前单击的菜单项。

`request.setAttribute("menuitem","home")`我开始在每个页面上使用 JSP ( ) 的会话属性。页面由两部分组成：

*   标题
*   身体

菜单位于**标题**中，单击菜单项会重新加载整个页面。添加`setAttribute`是通过每个页面正文顶部的脚本进行的。页面加载完成后，我将类更改为突出显示。

我该如何解决这种对突出变化的迟到反应？? 还是我应该使用不同的方法？ **菜单项示例：**

```
<div id="home" class="menu clickable" 
    <div>Home</div> 
</div> 
```

**剧本：**

```
<script>
    function checkMenuItem() {
        /*var selected=getMenuItem("selectedmenu");*/
        var selected = <%= (String) request.getAttribute("selectedmenu") %>
        if (selected != null && selected != "") {
            switch (selected) {
            case 'home':
                $("#home").removeClass('clickable').addClass('selected');
                $(".menu").not("#home").addClass('clickable'); <% chosenpage = "home";
                request.setAttribute("selectedmenu", chosenpage); %>
                break;
            case 'upload':
                $("#upload").removeClass('clickable').addClass('selected');
                $(".menu").not("#upload").addClass('clickable'); <% chosenpage = "upload";
                request.setAttribute("selectedmenu", chosenpage); %>
                break;
            case 'question':
                $("#question").removeClass('clickable').addClass('selected');
                $(".menu").not("#question").addClass('clickable'); <% chosenpage = "question";
                request.setAttribute("selectedmenu", chosenpage); %>
                break;
            case 'plan':
                $("#plan").removeClass('clickable').addClass('selected');
                $(".menu").not("#plan").addClass('clickable'); <% chosenpage = "plan";
                request.setAttribute("selectedmenu", chosenpage); %>
                break;
            case 'indication':
                $("#indication").removeClass('clickable').addClass('selected');
                $(".menu").not("#indication").addClass('clickable'); <% chosenpage = "indication";
                request.setAttribute("selectedmenu", chosenpage); %>
                break;
            default: $("#home").removeClass('clickable').addClass('selected');
              $(".menu").not("#home").addClass('clickable');
             break;
           }
        } //end if
    }

    $('document').ready(function () {
     checkMenuItem();    
         $("#home").click(
                 function(){ document.location.href="<%=request.getContextPath()%>/index.html";} );
         $("#upload").click(
                 function(){ document.location.href="<%=request.getContextPath()%>/upload.html";} );
         $("#indicator").click(
                 function(){ document.location.href="<%=request.getContextPath()%>/plan/indicator.html";} );
         $("#plan").click(
                 function(){ document.location.href="<%=request.getContextPath()%>/plan/improvementplans.html";} );
         $("#question").click(
                 function(){ document.location.href="<%=request.getContextPath()%>/question.html";} );
    });
</script> 
```

# java - Wav比较，相同的文件

> ID：11604518
> 
> 赞同：5
> 
> 时间：2012-07-22T22:33:06.087
> 
> 标签：java, audio, comparison, fft, wav

我现在**很难过**。我一直在环顾四周并尝试音频比较。我找到了相当多的材料，以及对不同库和方法的大量参考。

到目前为止，我已经采用*Audacity*并导出了一个名为“long.wav”的 3 分钟 wav 文件，然后将其中的前 30 秒拆分为一个名为“short.wav”的文件。我想沿着这条线的某个地方我可以通过java为每个可视化记录（log.txt）数据，并且应该能够至少看到值之间的一些视觉相似性......这里有一些代码

**主要**方法：

```
 int totalFramesRead = 0;
        File fileIn = new File(filePath);
        BufferedWriter writer = new BufferedWriter(new FileWriter(outPath));
        writer.flush();
        writer.write("");
        try {
            AudioInputStream audioInputStream = 
                    AudioSystem.getAudioInputStream(fileIn);
            int bytesPerFrame = 
                    audioInputStream.getFormat().getFrameSize();
            if (bytesPerFrame == AudioSystem.NOT_SPECIFIED) {
                // some audio formats may have unspecified frame size
                // in that case we may read any amount of bytes
                bytesPerFrame = 1;
            } 
            // Set an arbitrary buffer size of 1024 frames.
            int numBytes = 1024 * bytesPerFrame; 
            byte[] audioBytes = new byte[numBytes];
            try {
                int numBytesRead = 0;
                int numFramesRead = 0;
                // Try to read numBytes bytes from the file.
                while ((numBytesRead = 
                        audioInputStream.read(audioBytes)) != -1) {
                    // Calculate the number of frames actually read.
                    numFramesRead = numBytesRead / bytesPerFrame;
                    totalFramesRead += numFramesRead;
                    // Here, do something useful with the audio data that's 
                    // now in the audioBytes array...

                    if(totalFramesRead <= 4096 * 100)
                    {                           

                    Complex[][] results = PerformFFT(audioBytes);
                    int[][] lines = GetKeyPoints(results);
                    DumpToFile(lines, writer);      

                    }   
                }
            } catch (Exception ex) { 
                // Handle the error...
            }
            audioInputStream.close();
        } catch (Exception e) {
            // Handle the error...
        }
        writer.close(); 
```

然后**执行FFT**：

```
public static Complex[][] PerformFFT(byte[] data) throws IOException
    {
        final int totalSize = data.length;

        int amountPossible = totalSize/Harvester.CHUNK_SIZE;

        //When turning into frequency domain we'll need complex numbers:
        Complex[][] results = new Complex[amountPossible][];

        //For all the chunks:
        for(int times = 0;times < amountPossible; times++) {
            Complex[] complex = new Complex[Harvester.CHUNK_SIZE];
            for(int i = 0;i < Harvester.CHUNK_SIZE;i++) {
                //Put the time domain data into a complex number with imaginary part as 0:
                complex[i] = new Complex(data[(times*Harvester.CHUNK_SIZE)+i], 0);
            }
            //Perform FFT analysis on the chunk:
            results[times] = FFT.fft(complex);
        }
            return results;
} 
```

在这一点上，我尝试到处记录：转换前的音频字节、复杂值和 FFT 结果。

**问题：**无论我记录什么值，每个 wav 文件的 log.txt 都是完全不同的。我不明白。鉴于我从 large.wav 中获取了 small.wav（并且它们具有所有相同的属性），原始 wav byte[] 数据...或 Complex[][] fft 数据之间应该有非常大的相似性。 ..或到目前为止的东西..

**如果在这些计算的任何时候数据甚至不接近相似， **我怎么可能尝试比较这些文件。****

 ****我知道我在**音频分析方面缺少相当多的知识，这就是我向董事会寻求帮助的原因！感谢您提供的任何信息、帮助或修复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:43:12.367

你看过[MARF](http://marf.sourceforge.net/)吗？它是一个用于音频识别的有据可查的 Java 库。

它用于识别说话者（用于转录或保护软件），但应该能够使用相同的功能对音频样本进行分类。我不熟悉它，但看起来你想使用[FeatureExtraction](http://marf.sourceforge.net/docs/marf/0.3.0.6/api-dev/marf/FeatureExtraction/FeatureExtraction.html)类从每个音频样本中提取一组特征，然后创建一个唯一的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:13:49.543

对于 16 位音频，3e-05 与零并没有什么不同。因此，零文件与零文件几乎相同（可能会因一些微小的舍入错误而丢失相等性。）

添加：为了进行比较，请使用一些 Java 绘图库读取并绘制两个波形中每一个的一部分，当它们通过大部分（接近）零的部分时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:26:46.860

我不知道你是如何比较两个音频文件的，但是，看到一些提供音乐识别的服务（如 TrackId 或 MotoID），这些服务会从你听到的音乐中抽取一小部分样本（10-20 秒），然后在他们的服务器中处理它们，我推测他们有很长或更少的样本，并且他们有一个数据库（或动态计算）该样本的模式（在你的情况下是傅里叶变换），在你的情况下，你可能需要将您的长音频文件分成比您的样本数据更小或更小的块，在第一种情况下，您可能会发现一个与样本数据中的模式更相似的特定块，在第二种情况下，您的较小块可能会重新编码您的一部分样本数据，您可以计算样本数据属于相应音频文件的概率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T05:29:13.493

我认为为了调试你最好尝试使用 matlab 来绘制。由于 matlab 在处理这个问题上要强大得多。

您对文件使用“wavread”，并使用“stft”来获得短时间傅立叶变换，这是一个复数矩阵。然后简单地用 abs(Matrix) 来获得每个复数的大小。使用 imshow(abs(Matrix),[]) 显示图像。

我不知道您如何比较整个文件和 30s 剪辑（通过查看 stft 图像？）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T17:56:59.570

我认为您正在研究[Acoustic Fingerprinting](https://en.wikipedia.org/wiki/Acoustic_fingerprint) 这很难，并且有图书馆可以做到这一点。如果你想自己实现它，[这](http://www.ee.columbia.edu/~dpwe/papers/Wang03-shazam.pdf)是一份关于 shazam 算法的白皮书。**

# string - 如何判断有多少文件与unix中的*匹配描述

> ID：11604521
> 
> 赞同：2
> 
> 时间：2012-07-22T22:33:38.630
> 
> 标签：string, bash, unix

非常简单的问题：假设我有一组文件：

```
a1.txt
a2.txt
a3.txt
b1.txt 
```

我使用以下命令：

```
ls a*.txt 
```

它将返回：

```
a1.txt a2.txt a3.txt 
```

bash 脚本中有没有办法告诉使用 * 模式时将返回多少结果。在上面的例子中，如果我使用 a*.txt 答案应该是 3，如果我使用 *1.txt 答案应该是 2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T23:33:26.090

**评论使用`ls`：**

1.  我看到所有其他答案都通过解析 `ls`. 这是非常不可预测的，因为当您的文件名带有“不寻常的字符”（*例如*空格）时，这会中断。
2.  另一个陷阱是，它`ls`依赖于实现。特定的实现可能会以不同的方式格式化输出。

[Greg Wooledge 维护](http://mywiki.wooledge.org/ParsingLs)的 bash wiki 上对解析 ls 输出的陷阱进行了很好的讨论 。

**使用 bash 数组的解决方案**

由于上述原因，使用 bash 语法将是更可靠的选择。您可以使用 glob 使用所有匹配的文件名填充 bash 数组。然后你可以询问 bash 数组的长度来获得匹配的数量。以下代码段应该可以工作。

```
files=(a*.txt) && echo "${#files[@]}" 
```

要将匹配数保存在变量中，您可以执行以下操作：

```
files=(a*.txt)
count="${#files[@]}" 
```

此方法的另一个优点是您现在还可以将匹配的文件放在一个可以迭代的数组中。

**注意：**虽然我一直在重复上面的*bash 语法*，但我相信上面的解决方案适用于所有*sh* -shell 系列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T22:35:33.307

您无法提前知道，但您可以计算返回了多少结果。IE

```
 ls -l *.txt | wc -l 
```

`ls -l`将显示与指定通配符匹配的目录条目， wc -l 将为您提供计数。

您可以使用以下任一方法将此命令的值保存在 shell 变量中

```
 num=$(ls * | wc -l) 
```

或者

```
 num=`ls -l *.txt | wc -l` 
```

然后用于`$num`访问它。第一种形式是首选。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-22T22:35:14.057

您可以`ls`结合使用`wc`：

```
ls a*.txt | wc -l 
```

该`ls`命令每行列出一个匹配文件，并`wc -l`计算行数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T21:13:08.217

我喜欢 suvayu 的回答，但没有必要使用数组：

```
count() { echo $#; }
count * 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T00:09:03.123

为了计算可能具有不可预知名称的文件，例如包含换行符、不可打印字符等，我将使用and with`-print0`选项：`find``awk``RS='\0'`

```
num=$(find . -maxdepth 1 -print0 | awk -v RS='\0' 'END { print NR }') 
```

调整选项以`find`细化计数，例如，如果条件是当前目录中以小写开头并`a`带有`.txt`扩展名的文件，请使用：

```
find . -type f -name 'a*.txt' -maxdepth 1 -print0 
```

# git - Git - 文件夹“refs”丢失

> ID：11604526
> 
> 赞同：0
> 
> 时间：2012-07-22T22:34:09.223
> 
> 标签：git

我不得不从备份中恢复一些 git 裸存储库，并发现 git（我在 wondows XP 上使用 msysgit）无法识别该存储库。经过一番调查，我发现问题似乎是文件夹“refs”以及子文件夹“heads”和“remotes”丢失了。我也没有文件“heads/master”。有什么办法可以重新创建它吗？我真的需要恢复这些文件夹中的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T23:21:53.080

如果您丢失了所有引用（refs 文件夹），但没有丢失任何实际数据，您可以通过查找悬空提交来找到所有**可能的**最后提交（即其他提交未作为父提交引用的提交）

您可以在此命令的帮助下完成

```
git fsck --lost-found 
```

这列出了所有悬空提交（可能还有一些其他有用的信息）。采用

```
git log SHA1SUM 
```

进一步调查。跑步也是个好主意

```
git fsck 
```

确保只在丢失的地方引用。

**UPD:** Also refs can be located in **packed-refs** file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:48:01.370

当然，如果您对这些存储库有任何结帐，最简单的方法就是从这些存储库中恢复。

* * *

`refs`仅包含具有这些名称指向的提交的 SHA1 的文件；`refs/heads/master`可能是您所需要的，仅包含 HEAD 提交的 SHA1。您没有丢失任何数据（全部在 中`objects`），但是找出您想要的提交的 SHA1 可能有点棘手。

如果你有文件`logs/HEAD`，则 ref 应该在底部（第一个 SHA1 是最近提交的父级，第二个是它的 id；如果是合并提交，可能会有更多，不确定）。例如，这是我的一个回购的最后一行：

```
4b2ef6873c3f4c7eaebca06fee4b95ffa9cf58c3 feb84419b6685b920f8a3d61a77e9508ba5dcfe1 Dougal Sutherland <dougal@gmail.com> 1342838724 -0400 pull: Fast-forward 
```

所以以开头的哈希`feb84419b6`是我想要的。不幸的是，我认为这些只是在非裸结帐中。

如果您没有这些日志，则提交都在`objects`目录中。它很可能是最近修改过的，例如，您可以在 Unix 上`ls -1t */* | head -10`从`objects`目录中获取它；你可以尝试一对，看看会发生什么。如果你从中得到，说

```
04/718652eb1f03bb0594cc05665665b749b52a87 
```

然后删除`/`以获取您要使用的哈希：

```
04718652eb1f03bb0594cc05665665b749b52a87 
```

# c++ - 如何加快向量初始化c ++

> ID：11604533
> 
> 赞同：1
> 
> 时间：2012-07-22T22:35:16.060
> 
> 标签：c++, visual-studio-2010, optimization, vector, initialization

我之前有一个关于堆栈溢出错误的问题，并为我的对象数组切换到向量。如果需要，可以在此处引用该问题：[How to get rid of stack overflow error](https://stackoverflow.com/questions/11594934/how-to-get-rid-of-stack-overflow-error)

但是，我当前的问题是，如何加快向量的初始化。我目前的方法目前需要约 15 秒。使用数组而不是向量需要一秒钟的时间，而数组的大小足够小，不会引发堆栈溢出错误。

这是我初始化它的方式：

在 main.cpp 我初始化我的地牢对象：

```
dungeon = Dungeon(0, &textureHandler, MIN_X, MAX_Y); 
```

在我的地牢（...）构造函数中，我初始化我的 5x5 房间向量并调用 loadDungeon：

```
Dungeon::Dungeon(int dungeonID, TextureHandler* textureHandler, int topLeftX, int topLeftY)
{
    currentRoomRow = 0;
    currentRoomCol = 0;
    for (int r = 0; r < MAX_RM_ROWS; ++r)
    {
        rooms.push_back(vector<Room>());
        for (int c = 0; c < MAX_RM_COLS; ++c)
        {
            rooms[r].push_back(Room());
        }
    }
    loadDungeon(dungeonID, textureHandler, topLeftX, topLeftY);
} 
```

我的 Room 构造函数填充了我的 30x50 单元格向量（所以我可以在 loadDungeon 函数中设置它们）：

```
Room::Room() 
{ 
    for (int r = 0; r < MAX_ROWS; ++r)
    {
        cells.push_back(vector<Cell>());
        for (int c = 0; c < MAX_COLS; ++c)
        {
            cells[r].push_back(Cell());
        }
    }
} 
```

我的默认单元构造函数很简单，没有做太多，但我还是会发布它：

```
Cell::Cell() 
{ 
    x = 0;
    y = 0;
    width = 16;
    height = 16;
    solid = false;
    texCoords.push_back(0);
    texCoords.push_back(0);
    texCoords.push_back(1);
    texCoords.push_back(0);
    texCoords.push_back(1);
    texCoords.push_back(1);
    texCoords.push_back(0);
    texCoords.push_back(1);
} 
```

最后，我的 loadDungeon() 函数将设置单元格。最终这将从文件中读取并加载单元格，但现在我想尽可能优化一下。

```
void Dungeon::loadDungeon(int dungeonID, TextureHandler* textureHandler, int topLeftX, int topLeftY)
{
    int startX = topLeftX + (textureHandler->getSpriteWidth()/2);
    int startY = topLeftY - (textureHandler->getSpriteHeight()/2);
    int xOffset = 0;
    int yOffset = 0;
    for (int r = 0; r < MAX_RM_ROWS; ++r)
    {
        for (int c = 0; c < MAX_RM_COLS; ++c)
        {
            for (int cellRow = 0; cellRow < rooms[r][c].getMaxRows(); ++cellRow)
            {
                xOffset = 0;
                for (int cellCol = 0; cellCol < rooms[r][c].getMaxCols(); ++cellCol)
                {
                    rooms[r][c].setupCell(cellRow, cellCol, startX + xOffset, startY - yOffset, textureHandler->getSpriteWidth(), textureHandler->getSpriteHeight(), false, textureHandler->getSpriteTexCoords("grass"));
                    xOffset += textureHandler->getSpriteWidth();
                }
                yOffset += textureHandler->getSpriteHeight();
            }
        }
    }

    currentDungeon = dungeonID;
    currentRoomRow = 0;
    currentRoomCol = 0;
} 
```

那么我怎样才能加快速度，这样每次加载都不需要大约 15 秒。我觉得加载一个简单的 2D 游戏不需要 15 秒。

**解决方案** 好吧，我的解决方案是在我的代码中使用 std::vector::reserve 调用（rooms.reserve，它最终运行良好。我将函数 Dungeon::loadDungeon 更改为 Dungeon::loadDefaultDungeon 因为它现在加载了一个保存文件.

无论如何，这里是代码（我在调试模式下从 ~15+ 秒缩短到大约 4-5 秒）：

```
Dungeon::Dungeon() 
{ 
    rooms.reserve(MAX_RM_ROWS * MAX_RM_COLS);
    currentDungeon = 0;
    currentRoomRow = 0;
    currentRoomCol = 0;
}
void Dungeon::loadDefaultDungeon(TextureHandler* textureHandler, int topLeftX, int topLeftY)
{
    int startX = topLeftX + (textureHandler->getSpriteWidth()/2);
    int startY = topLeftY - (textureHandler->getSpriteHeight()/2);
    int xOffset = 0;
    int yOffset = 0;
    cerr << "Loading default dungeon..." << endl;
    for (int roomRow = 0; roomRow < MAX_RM_ROWS; ++roomRow)
    {
        for (int roomCol = 0; roomCol < MAX_RM_COLS; ++roomCol)
        {
            rooms.push_back(Room());
            int curRoom = roomRow * MAX_RM_COLS + roomCol;
            for (int cellRow = 0; cellRow < rooms[curRoom].getMaxRows(); ++cellRow)
            {
                for (int cellCol = 0; cellCol < rooms[curRoom].getMaxCols(); ++cellCol)
                {
                    rooms[curRoom].setupCell(cellRow, cellCol, startX + xOffset, startY - yOffset, textureHandler->getSpriteWidth(), textureHandler->getSpriteHeight(), false, textureHandler->getSpriteTexCoords("default"), "default");
                    xOffset += textureHandler->getSpriteWidth();
                }
                yOffset += textureHandler->getSpriteHeight();
                xOffset = 0;
            }
            cerr << "     room " << curRoom << " complete" << endl;
        }
    }
    cerr << "default dungeon loaded" << endl;
}

Room::Room()
{ 
    cells.reserve(MAX_ROWS * MAX_COLS);
    for (int r = 0; r < MAX_ROWS; ++r)
    {
        for (int c = 0; c < MAX_COLS; ++c)
        {
            cells.push_back(Cell());
        }
    }
}
void Room::setupCell(int row, int col, float x, float y, float width, float height, bool solid, /*std::array<float, 8>*/ vector<float> texCoords, string texName)
{
    cells[row * MAX_COLS + col].setup(x, y, width, height, solid, texCoords, texName);
}

void Cell::setup(float x, float y, float width, float height, bool solid, /*std::array<float,8>*/ vector<float> t, string texName)
{
    this->x = x;
    this->y = y;
    this->width = width;
    this->height = height;
    this->solid = solid;
    for (int i = 0; i < t.size(); ++i)
        this->texCoords.push_back(t[i]);
    this->texName = texName;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:40:18.517

由于您的向量似乎在编译时定义了它们的大小，如果您可以使用 C++11，您可以考虑使用[`std::array`](http://en.cppreference.com/w/cpp/container/array)而不是`std::vector`. `std::array`无法调整大小并且缺少 中的许多操作`std::vector`，但更轻量级，并且似乎非常适合您正在做的事情。

例如，您可以声明`cells`为：

```
#include <array>

/* ... */

std::array<std::array<Cell, MAX_COLS>, MAX_ROWS> cells; 
```

**更新：**由于本地定义`std::array`的在堆栈上分配其内部数组，因此由于数组的大小相当大，OP 将遇到堆栈溢出。尽管如此，仍然可以通过在堆上分配数组来使用 an `std::array`（以及与 using 相比的好处）。`std::vector`这可以通过执行以下操作来完成：

```
typedef std::array<std::array<Cell, MAX_COLS>, MAX_ROWS> Map;
Map* cells;

/* ... */

cells = new Map(); 
```

更好的是，可以使用智能指针：

```
#include <memory>    

/* ... */

std::unique_ptr<Map> cells;
cells = std::unique_ptr(new Map()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T23:06:20.137

有这么多动态分配似乎很浪费。您可以通过展平向量并大步访问它来摆脱一次分配：

```
std::vector<Room> rooms;

rooms.resize(MAX_RM_ROWS * MAX_RM_COLS);

for (unsigned int i = 0; i != MAX_RM_ROWS; ++i)
{ 
    for (unsigned int j = 0; j != MAX_RM_COLS; ++j)
    {
        Room & r = rooms[i * MAX_RM_COLS + j];
        // use `r`       ^^^^^^^^^^^^^^^^^^^-----<< strides!
    }
} 
```

请注意如何`resize`只执行一次，只产生一次分配，以及默认构造每个元素。如果您希望专门构造每个元素，请`rooms.reserve(MAX_RM_ROWS * MAX_RM_COLS);`改用并在循环中填充向量。

您可能还希望使用交换的行和列进行分析，看看哪个更快。

# java - android - 静态方法的问题

> ID：11604537
> 
> 赞同：0
> 
> 时间：2012-07-22T22:35:37.630
> 
> 标签：java, android, static

在一个类中，我从另一个类中调用一个函数，该类位于另一个 .java 文件中。

这是功能

```
public void make_a_call(String phonenumber) {
    Intent phone_call = new Intent(android.content.Intent.ACTION_CALL, Uri.parse("tel:"+phonenumber));
    startActivity(phone_call); 
} 
```

问题是这个函数要求它是非静态的，因为 startActivity，但是当我从另一个类调用这个函数时，它说，要调用它，这个函数需要是静态的。

我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:40:37.773

另一个类需要对将用于启动活动的上下文的引用。一种解决方案是将对活动（包含 的活动`make_a_call`）的引用传递给另一个类中的代码。另一种可能性（例如，如果另一个类是自定义视图）是它用于`getContext()`获取上下文，然后修改`make_a_call`为`static`但接受上下文作为参数：

```
public static void make_a_call(Context context, String phonenumber) {
    Intent phone_call = new Intent(android.content.Intent.ACTION_CALL, Uri.parse("tel:"+phonenumber));
    context.startActivity(phone_call);
} 
```

# javascript - 如何自动确定 d3.layout.tree 大小？

> ID：11604539
> 
> 赞同：2
> 
> 时间：2012-07-22T22:36:18.883
> 
> 标签：javascript, d3.js

我找不到任何[D3 API](https://github.com/mbostock/d3/wiki)文档可以让您轻松确定给定 d3.layout.tree 或任何其他布局所需的宽度和高度，以确保没有节点相互重叠。

例如，一旦展开所有子节点， [d3.layout.tree 示例就会](http://mbostock.github.com/d3/talk/20111018/tree.html)开始重叠。

是否有一种简单的 D3 方法来确定我的树需要避免重叠的宽度和高度？或者，我必须编写自己的方法吗？

**编辑**

在将来的某个时候添加此行为存在一个未[解决的问题。](https://github.com/mbostock/d3/issues/317)

**编辑#2**

现在有[https://github.com/mbostock/d3/wiki/Cluster-Layout#nodeSize](https://github.com/mbostock/d3/wiki/Cluster-Layout#nodeSize)和[https://github.com/mbostock/d3/wiki/Tree-Layout#nodeSize](https://github.com/mbostock/d3/wiki/Tree-Layout#nodeSize)来设置基于布局的大小关于每个节点的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:28:54.717

我很确定这是您需要自己创建的东西 - 树布局不知道您将如何表示树节点、标签和其他视觉元素（尤其是这些元素的大小），所以它不知道不一定知道它们是重叠的（您可以减小元素的大小，它们将不再这样做）。因此，我认为不可能将这样的东西构建到树布局功能中。

您可以考虑通过使用“basewidth”变量并将其乘以正在显示的“最终”节点的数量来动态设置宽度（或高度，视情况而定）。

# python - Best way to print word on .txt file on right position using line and column as parameter in Python

> ID：11604540
> 
> 赞同：0
> 
> 时间：2012-07-22T22:36:20.890
> 
> 标签：python, io

I currently got a program in Python that reads a text file but it loses its formatting while staying on memory for a couple of reasons, but it keeps as information the line and column of it. **I would be interested on using this line and column information to reproduce the file as it was originally read.** It is ok if the column doesn't match in amount of spaces or tabs in comparison to the original as long it is consistent thru the new file.

One first naive solution that occurred to me was to always keep some pointer to line 1 and column 1 and spam `\n` and `white spaces` using the line and column information, but I was wondering if there is a better way to do that in Python (in fact I don't know how to do this pointer to first line and column either).

Some method that would take as parameters a string, the line, column, and the file as four parameters in Python and would maybe be a possible solution, although I am unsure in this case what would occur if (line,column) is occupied (this would never occur in my situation so is not really a concern).

**Edit:** The information is stored on a complicated 'structure', but it suffices to say that I can extract such information as a list of strings, where each string has an associated line and column information. I would then use this 'method' to take each string and its column and line to add to the file on the right position.

**Edit 2:** The only assumption is that when getting every word from the original file they will happen on exactly the same order. That is to say, if the original file is "The cat jumped \n but did not die" then it is expected that I will be taken the strings: ' the', 'cat', 'jumped', 'and', 'didn't', 'die' and its associated line and columns. In that case, 'but', 'did', 'not' and 'die' will have line 2 instead of 1 and all words their associated columns (which may or may not overlap since its a different line).

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:34:51.113

不确定它是否有效，我确定它需要一些工作。我已经使用 cat 示例来模拟支持数据，然后将其作为文本放回......没有错误检查，但我认为这是它的基本原理......

```
import re
from operator import itemgetter

test = "The cat jumped \n but did not die"
lines = test.splitlines()
line_ref = []
for line in lines:
    words = list(re.finditer(r'(\S+)', line))
    line_ref.append((len(line), dict( (m.span(), m.group()) for m in words) ))

output = []
for line in line_ref:
    last = max(line[1], key=itemgetter(1))[1]
    textlist = [' '] * max(last, line[0])
    for (start, end), word in line[1].iteritems():
        textlist[start:end] = word
    output.append(''.join(textlist))

print '\n'.join(output) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:43:19.740

您需要根据行号 (y) 对内存中的行进行排序。然后对于范围 (1..N) 中的 i，N = 原始文件中每页的行数，您将：

```
- if there are rows with that y:
    - sort all rows with that y in that page using their x
    - start with j = 0, and for each text chunk:
       - write (x - j) spaces
       - write the chunk
       - set j equal to x plus the length of the chunk
- output a carriage return and continue 
```

这将重建文本的可接受版本。对模 8 进行轻微修改甚至可以让您用制表符替换其中的一些 xj 空格。

# c# - display multivalue attribute in gridView

> ID：11604541
> 
> 赞同：-2
> 
> 时间：2012-07-22T22:36:54.883
> 
> 标签：c#, asp.net, gridview

I have a table `studentPhone` that looks like the following:

```
phone      studentID
2345678      1
0562436720   1
2254754      2
0546218611   2 
```

I want to display its data in a gridView with sqlDataSource select query as:

```
SELECT phone, studentID FROM studentPhone WHERE (studentID IN (1)) 
```

but the gridView display only the firstPhone of the specified `studentID`. How can I solve that to display all phones for a specific ID?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:38:29.563

```
SELECT phone, studentID FROM studentPhone WHERE (studentID = 1 ) 
```

If you want to display all the phone number of one ID in a single column then you have to write a store procedure. Example:

```
create table test1
( phone varchar(30),
   id int )

insert into test1(phone,id) values('2345678',1)
insert into test1(phone,id) values('0562436720',1)

Create Procedure getStudentsByID
@ID
AS
BEGIN
declare @test varchar(max)

select @test = ISNULL(@test+',','')+  test1.phone from test1 where test1.id = @ID
select @test 
```

This will return you the comma separated list of all the phone numbers of the given ID.

# javascript - Backbone - Model that fires an event when a specific attribute is changed

> ID：11604543
> 
> 赞同：1
> 
> 时间：2012-07-22T22:36:58.150
> 
> 标签：javascript, backbone.js, backbone-events

What is a good way for a Backbone model to fire a custom event when a specific attribute has been changed?

So far this is the best I've got:

```
var model = Backbone.Model.extend({
    initialize: function(){
        // Bind the mode's "change" event to a custom function on itself called "customChanged"
        this.on('change', this.customChanged);
    },
    // Custom function that fires when the "change" event fires 
    customChanged: function(){
        // Fire this custom event if the specific attribute has been changed
        if( this.hasChanged("a_specific_attribute")  ){
            this.trigger("change_the_specific_attribute");
        }
    }
}) 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:16:03.483

您已经可以绑定到特定于属性的更改事件：

```
var model = Backbone.Model.extend({
  initialize: function () {
    this.on("change:foo", this.onFooChanged);
  },

  onFooChanged: function () {
    // "foo" property has changed.
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:12:34.593

Backbone 已经有一个事件“change:attribute”，它会为每个已更改的属性触发。

```
var bill = new Backbone.Model({
      name: "Bill Smith"
    });

    bill.on("change:name", function(model, name) {
      alert("Changed name to " + name);
    });

    bill.set({name : "Bill Jones"}); 
```

# r - 如何从 GitHub 安装 RGoogleDocs？

> ID：11604547
> 
> 赞同：4
> 
> 时间：2012-07-22T22:38:07.803
> 
> 标签：r, github, google-docs

我看到 GitHub 中有一个新版本的 RGoogleDocs。它是版本 0.6-0。 [https://github.com/duncantl/RGoogleDocs](https://github.com/duncantl/RGoogleDocs)。

如何在 64 位版本的 R 中安装它？过去，Duncan Temple Lang 向我提供了一个包含 Windows 二进制文件的 zip 文件。我下载了它并执行了这个命令来安装它

`install.packages("C:/Users/Farrel/Dropbox/RGoogleDocs_0.5-0.zip",repos=NULL)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T01:14:08.240

如果您已经`Rtools`安装，您可以使用`devtools`包及其`install_github`功能直接从`github`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-22T23:14:43.740

对于这个特定的包，您可以单击 git URL 左侧的 ZIP 按钮来下载 zip 文件。然后，将其解压缩到您的工作目录中。或者，您可以使用[TortoiseGit](http://code.google.com/p/tortoisegit/)将代码克隆到本地目录中。

然后，您可以使用`install.packages`with `type='source'`。

```
install.packages("duncantl-RGoogleDocs-0e3879c/", type='source', repos=NULL) 
```

但是，总的来说，学习构建包确实是一个好主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-22T22:46:46.177

有关从源代码安装包的信息，请参阅[Windows 上的 R 常见问题解答。](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#Packages)

# python - Running python script in Blender

> ID：11604548
> 
> 赞同：40
> 
> 时间：2012-07-22T22:38:12.627
> 
> 标签：python, blender

I installed Blender 2.6 and I'm trying to run a script called drawcar.py (Which uses PyOpenGL)

I looked around the documentation for importing a script and could only access Blender's python console.

How do I run drawcar.py from the Linux terminal with Blender?

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-02T00:54:34.640

您还可以在 python 控制台中执行以下代码来执行外部脚本，而无需在文本编辑器中打开它：

```
filename = "/full/path/to/myscript.py"
exec(compile(open(filename).read(), filename, 'exec')) 
```

上述代码来自以下链接：

[搅拌机 - 提示和技巧](http://www.blender.org/documentation/blender_python_api_2_59_2/info_tips_and_tricks.html)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-22T22:44:58.747

1.  在 Blender 中打开一个文本编辑器视图。
2.  按 Alt + O，或转到文本>打开文本块并打开 .py 文件
3.  然后只需按运行脚本：D

Ps 除了在第 2 步中打开文件，您还可以点击“+ New”按钮并创建一个新脚本。

注意：在较新的版本中，*运行脚本*按钮标签已被替换为*播放*图标：[![在此处输入图像描述](../Images/67e82b38814417b46fd946b4c57ad521.png)](https://i.stack.imgur.com/AA0z4.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-04-19T16:46:38.473

这个答案为时已晚，但可以帮助任何有同样问题的人

通过终端：

```
blender yourblendfilenameorpath --python drawcar.py 
```

从手册页

```
 -P or --python <filename>
              Run the given Python script file. 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-03-31T14:42:33.300

通过另一个脚本或从控制台运行脚本：

```
import bpy

script = bpy.data.texts["script_name.py"]
exec(script.as_string()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T18:42:06.537

很可能 drawcar.py 正在尝试在 Blender 中执行 pyOpenGL 命令，如果不进行修改，它将无法工作。我怀疑您也遇到了一些导入错误（如果您查看命令控制台）。Blender 有它自己的用于 opengl 的内部 python 包装器`bgl`，它确实包含许多 opengl 标准，但都以 bgl 为前缀。

如果您有 drawcar.py 的链接，我可以查看它并告诉您发生了什么。

# css - css odd/even pair on class selector for jquerymobile

> ID：11604550
> 
> 赞同：1
> 
> 时间：2012-07-22T22:38:32.810
> 
> 标签：css, jquery-mobile

Trying to set the first slider with a width of 20% and second with 75%

[http://jsfiddle.net/kE8GJ/5/](http://jsfiddle.net/kE8GJ/5/)

Seems I'm missing something.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:24:38.920

问题是，如果您查看生成的代码，jQuery 会自动将生成的标记插入到您的 HTML 中，如下所示：

```
<div data-role="content" class="ui-content" role="main" style="
    width: 300px;
    background: blue;
">
        <h2> List </h2>
            <select data-theme="b" data-mini="true" name="slider2" id="flip-a2" data-role="slider" onchange="" class="ui-slider-switch">
                <option value="3">something</option>
                <option value="0">name</option>
            </select><div role="application" class="ui-slider ui-slider-switch ui-btn-down-c ui-btn-corner-all ui-slider-mini" style=""><span class="ui-slider-label ui-slider-label-a ui-btn-active ui-btn-corner-all" role="img" style="width: 100%; ">name</span><span class="ui-slider-label ui-slider-label-b ui-btn-down-c ui-btn-corner-all" role="img" style="width: 0%; ">something</span><div class="ui-slider-inneroffset"><a href="#" class="ui-slider-handle ui-btn ui-shadow ui-btn-corner-all ui-slider-handle-snapping ui-btn-up-b" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="b" role="slider" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0" aria-valuetext="name" title="name" aria-labelledby="flip-a2-label" style="left: 100%; "><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text"></span></span></a></div></div>

            <select data-theme="e" data-mini="true" name="slider" id="flip-a" data-role="slider" onchange="" class="ui-slider-switch">
                <option value="3">gkhkj</option>
                <option value="0">ok</option>
            </select><div role="application" class="ui-slider ui-slider-switch ui-btn-down-c ui-btn-corner-all ui-slider-mini" style=""><span class="ui-slider-label ui-slider-label-a ui-btn-active ui-btn-corner-all" role="img" style="width: 100%; ">ok</span><span class="ui-slider-label ui-slider-label-b ui-btn-down-c ui-btn-corner-all" role="img" style="width: 0%; ">gkhkj</span><div class="ui-slider-inneroffset"><a href="#" class="ui-slider-handle ui-btn ui-btn-up-e ui-shadow ui-btn-corner-all ui-slider-handle-snapping" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="e" role="slider" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0" aria-valuetext="ok" title="ok" aria-labelledby="flip-a-label" style="left: 100%; "><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text"></span></span></a></div></div> 
    </div> 
```

所以你的两个“偶数”选择器都被击中了。您可以使用 ":nth-child(4n+2)" 和 ":nth-child(4n+4) 来选择正确的模式，但此时您将标记与 css 紧密耦合，因此您可能不想要要做到这一点。

为您的特定示例添加了 JS fiddle，说明了顶部的 H2 [http://jsfiddle.net/kE8GJ/10/](http://jsfiddle.net/kE8GJ/10/)

# mysql - MySQL JOIN + Subquery Query Optimization

> ID：11604551
> 
> 赞同：0
> 
> 时间：2012-07-22T22:38:47.580
> 
> 标签：mysql, query-optimization

I'm trying to fetch 100 posts and order them by the number of times they've been "remixed" in the last week. Here is my query thus far:

```
SELECT COUNT(remixes.post_id) AS count, posts.title
FROM posts 
LEFT JOIN (
    SELECT * FROM remixes WHERE created_at >= 1343053513
) AS remixes ON posts.id = remixes.post_id
GROUP BY posts.id 
ORDER BY count DESC, posts.created_at DESC
LIMIT 100 
```

This produces the correct result; however, after running `DESCRIBE` I get this:

![Result of the DESCRIBE syntax](../Images/0a9cd1b18d8d4bbeb856fe274e84d0cf.png)

And here are my indexes on `posts`:

![Posts Indexes](../Images/759759be0ef9237e000bd840c5e5c328.png)

And my indexes on `remixes`:

![Remixes Indexes](../Images/d07c065c56ca3736b462851bf5705c17.png)

And here are my questions:

1.  Can you explain what the terms used in the extra column are *really* trying to tell me?
2.  Could you provide tips on how I can optimize this query so that it'll scale better.

Thanks in advance!

### Update

Per Zane's solution, I've updated my query to:

```
SELECT COUNT(remixes.post_id) AS count, posts.title
FROM posts 
LEFT JOIN remixes ON posts.id = remixes.post_id AND remixes.created_at >= 1343053513
GROUP BY posts.id 
ORDER BY count DESC, posts.created_at DESC
LIMIT 100 
```

And here's the latest `DESCRIBE`

![LATEST DESCRIBE](../Images/e495f8ce2ef9e383c4ccd35e088d2c40.png)

I'm still worried about the `filesort` part. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:13:25.690

尽量不要将您包装`JOIN`在子选择中，因为这将创建一个未索引的临时表来存储子选择的结果，然后它会在该未索引表上连接。

相反，`created_at`在加入 remixes 表时作为附加的加入条件：

```
SELECT 
    a.title, COUNT(b.post_id) AS remixcnt
FROM 
    posts a
LEFT JOIN 
    remixes b ON a.id = b.post_id AND b.created_at >= 1343053513
GROUP BY 
    a.id, a.title
ORDER BY 
    remixcnt DESC, a.created_at DESC
LIMIT 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:50:17.577

在我看来，这

```
SELECT COUNT(remixes.post_id) AS count, posts.title
FROM posts 
LEFT JOIN (
    SELECT * FROM remixes WHERE created_at >= 1343053513
) AS remixes ON posts.id = remixes.post_id
GROUP BY posts.id 
ORDER BY count DESC, posts.created_at DESC
LIMIT 100 
```

可以改写为

```
SELECT COUNT(r.post_id) AS count, posts.title
FROM posts 
LEFT JOIN remixes r ON posts.id = r.post_id
WHERE r.created_at >= 1343053513
GROUP BY posts.id 
ORDER BY count DESC, posts.created_at DESC
LIMIT 100 
```

这应该会给你一个更好的`EXPLAIN`计划并且跑得更快。

# c++ - wcslen quits silently when string returned by the ReadConsoleOutputCharacterW has some particular length

> ID：11604553
> 
> 赞同：0
> 
> 时间：2012-07-22T22:39:06.990
> 
> 标签：c++, winapi, console, wchar-t

compiler : [http://sourceforge.net/projects/mingwbuilds/files/](http://sourceforge.net/projects/mingwbuilds/files/)

```
#include <iostream>
#include <string.h>
#include <windows.h>
using namespace std;

  const wchar_t* readConsole(int chars_to_read) {
    wchar_t* wcharFromConsole = new wchar_t[chars_to_read+1];
    COORD pos = {0,0};
    DWORD dwChars;
    if (!ReadConsoleOutputCharacterW(
      GetStdHandle(STD_OUTPUT_HANDLE),
      wcharFromConsole,  // Buffer where store symbols
      chars_to_read,     // number of chars to read
      pos,    // Read from row=8, column=6
      &dwChars // How many symbols stored
    ))
    {
      printf("ReadConsoleOutputCharacterW failed %d\n", GetLastError());
      abort();
    }
    wcharFromConsole [dwChars] = L'\0'; // Terminate, so string functions can be used
    wstring ws = wcharFromConsole;
    return ws.c_str();
  }

int main() {
  for (int i = 1; i<=0x3000; i++) {
    printf("wcslen: %X \n",wcslen(readConsole(i)));
  }
  system("pause");
} 
```

This loop ends at `0x1FF1` and pause is not called. Removing wstring seems to do away with this problem. But I need it here for functions like trimming white-space etc.. it is not much relevant here, but why invoking wstring causes that issue anyway ? There is no error message the program simply quits.

Updated code, now loop quits at `0x2BBF`

```
#include <iostream>
#include <string.h>
#include <windows.h>
using namespace std;

  const wchar_t* readConsole(int chars_to_read) {
    wchar_t* wcharFromConsole = new wchar_t[chars_to_read+1];
    COORD pos = {0,0};
    DWORD dwChars;
    if (!ReadConsoleOutputCharacterW(
      GetStdHandle(STD_OUTPUT_HANDLE),
      wcharFromConsole,  // Buffer where store symbols
      chars_to_read,     // number of chars to read
      pos,    // Read from row=8, column=6
      &dwChars // How many symbols stored
    ))
    {
      printf("ReadConsoleOutputCharacterW failed %d\n", GetLastError());
      abort();
    }
    wcharFromConsole [dwChars] = L'\0'; // Terminate, so string functions can be used
    wstring ws = wcharFromConsole;
    delete [] wcharFromConsole;
    const wchar_t* wc = ws.c_str();
    return wc;
  }

int main() {
  for (int i = 1; i<=0x3000; i++) {
    printf("wcslen: %X \n",wcslen(readConsole(i)));
  }
  system("pause");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T22:49:27.190

哎哟。

```
wstring ws = wcharFromConsole;
return ws.c_str(); 
```

基本上，您在这里返回了一个死指针。该字符串将在返回时被销毁，因此到达调用者的指针将无效。

编辑：您也在泄漏内存，因为“新”永远不会被删除。但这通常不会导致明显的问题，只会增加程序的内存使用。

# tortoisehg - TortoiseHG hg clone doesn't work error 255

> ID：11604554
> 
> 赞同：2
> 
> 时间：2012-07-22T22:39:41.170
> 
> 标签：tortoisehg

According to the [documentation](https://web.archive.org/web/20101002113432/https://confluence.atlassian.com/display/BITBUCKET/bitbucket+101) from Atlassian I have installed the version 2.2.1 of tortoiseHg but i am getting the next error when i try clone my repository.

```
% hg clone --verbose -- hg clone https://mymercurialrepository .
repository hg clone https://mymercurialrepository not found
[command returned code 255 Sun Jul 22 17:42:51 2012] 
```

What is wrong? btw:before to have installed the version 2.2.1 i had other version using kiln. do i need to install something else? edit some file?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T03:06:44.980

错误的命令字符串：

```
% hg clone --verbose https://mymercurialrepository.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-29T11:40:03.697

为了让答案更清楚，我从[这里](http://support.hglabhq.com/discussions/problems/728-tortoisehg-error-command-returned-code-255)得到了这个。

你只是粘贴了错误的东西，HgLab 在这里有点困惑。要使用 TortoiseHg 进行克隆，您只需要 URL 部分，即 hg 克隆子字符串之后的所有内容，如下图所示：

[![在此处输入图像描述](../Images/d431a82efaaf2d276aab0abc760d5e83.png)](https://i.stack.imgur.com/gQJHr.png)

# java - How to Mock Parent class for Unit testing

> ID：11604555
> 
> 赞同：4
> 
> 时间：2012-07-22T22:39:45.260
> 
> 标签：java, unit-testing, mocking

So I have three classes: A, B, C. I need to write unit tests for class `A`.

```
 class A extends B{
   //fields go here ...

   public A(String string, ...){
      super.(string,...);
   }
   //other methods here ...
 }

 class B{
   C stuff;
   //other stuff
 } 
```

So `C` is an important resource (like JDBC or ssh Session). Naturally, I am mocking `C`. How do I mock `B`. Imagine `B` has many children classes that extends it.

My main problem is that `A` is calling `super.(...)`. I don't want to inject methods into `A` just for testing. To me that's bad design. Any ideas how to mock the parent?

For example I cannot do `class MockB extends B{...}` and then try `MockB obj = new A();` This would not work because both `MockB` and `A` would be children of `B`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T00:01:50.587

您真的不应该尝试模拟被测类的超类。虽然一些模拟框架允许“部分模拟”，这可能使部分模拟您实际测试的类成为可能，但这是一个坏主意。

如果类和和`A`之间的关系足够复杂以至于您认为您需要它，那么它们可能根本不应该处于继承关系中。`A``B`

考虑更改您的代码，以便`B`委托`A`而不是扩展它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T23:47:33.620

你想模拟 B 类，这意味着你可能没有测试 B 或 A。所以你为什么关心它是否调用 super、foo、bar 或其他方法？你知道jdbc调用了多少方法吗？但正如你所说，嘲笑它没有问题。同样在这里。你只是做

```
B mockOfB = Mockito.mock(B.class); 
```

而已。你有一个 B 的模拟，你可以测试你喜欢的任何调用。

如果您正在测试 A 那么为什么不能简单地实例化它呢？B 的构造函数是否需要一些静态依赖项？在这种情况下，您应该重构它或使用类似 powermock 的东西（如果您真的无法重构该类）。如果你不能实例化 B 因为它是抽象的，那么只需在你的测试中扩展它

# python - Django behind uwsgi+nginx not able to set cookies

> ID：11604556
> 
> 赞同：4
> 
> 时间：2012-07-22T22:39:47.867
> 
> 标签：python, django, nginx, uwsgi

I'm putting together a PoC for a side-project meal-planner tool. I'm using django running on AWS with nginx and uwsgi. The site is running and loading pages, but there is no CSRF cookie being passed to the browser.

The CSRF and Messages middleware are both enabled, and the django debug output lists a value for 'CSRF_COOKIE', and my browser has cookies enabled, so I suspect that Django is attempting to set a cookie which is getting stripped out by nginx or uwsgi.

Configuration information below:

uwsgi.ini

```
[uwsgi]
chdir=/opt/django/mealplanner/src/mealplanner/
module=mealplanner.wsgi:application
master=True
autoload=True
pidfile=/opt/run/mealplanner.pid
vacuum=True
max-requests=5000
socket=/opt/run/mealplanner.sock
chmod-socket=True
harakiri=120
processes=1
home=/opt/django/mealplanner/src
daemonize=/opt/log/uwsgi/mealplanner.log 
```

nginx.conf

```
user www-data;
worker_processes 1;
pid /opt/run/nginx.pid;

events {
        worker_connections 768;
        # multi_accept on;                                                                                 
}

http {

        ##                                                                                                 
        # Basic Settings                                                                                   
        ##                                                                                                 

        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        # server_tokens off;                                                                               

        # server_names_hash_bucket_size 64;                                                                
        # server_name_in_redirect off;                                                                     

        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        ##                                                                                                 
        # Logging Settings                                                                                 
        ##                                                                                                 

        access_log /opt/log/nginx/access.log;
        error_log /opt/log/nginx/error.log;

        ##                                                                                                 
        # Gzip Settings                                                                                    
        ##                                                                                                 

        gzip on;
        gzip_disable "msie6";

        # gzip_vary on;                                                                                    
        gzip_proxied any;
        gzip_comp_level 2;
        # gzip_buffers 16 8k;                                                                              
        # gzip_http_version 1.1;                                                                           
        gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml \
application/xml+rss text/javascript;

        server {
               listen 80;
               # I've also tried the dns name I access the site with as the server name.
               server_name ec2-xx-xx-xx-xx.us-west-2.compute.amazonaws.com xx.xx.xx.xx;
               client_max_body_size 50M;
               set $home /opt/django/mealplanner;
               root $home;
               location / {
                        include uwsgi_params;
                        uwsgi_pass unix://opt/run/mealplanner.sock;
                        root $home;
               }
        }

        ##                                                                                                 
        # Virtual Host Configs                                                                             
        ##                                                                                                 

        include /etc/nginx/conf.d/*.conf;
        include /etc/nginx/sites-enabled/*;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T01:37:58.067

看起来问题可能出在 nginx.conf 中的 server_name 上。它突然开始工作，我唯一改变的是使 server_name 与站点的域名匹配。另一方面，将它改回来似乎并没有重新引入问题，所以要么我没有正确重新启动 nginx，要么这根本不是问题。

该网站现在正在运行，但这是我对原因和解决方案没有令人满意的理解的情况之一，所以如果有人可以证实这个假设或指出其他事情，我会欢迎输入。

# c# - Generic covariance workarounds?

> ID：11604558
> 
> 赞同：2
> 
> 时间：2012-07-22T22:40:02.917
> 
> 标签：c#, generics, casting

I have bullets:

```
public LaserBullets : Projectile 
```

I have a gun that inherits from a base weapon with the bullet type that goes with the derived gun:

```
public LaserWeapon : Weapon<LaserBullets> 
```

I have a property to establish the current weapon of a player:

```
public Weapon<Projectile> CurrentWeapon
{
    set { currentWeapon = value; }
} 
```

This fails (cannot implicitly cast `LaserWeapon` to `Weapon<Projectile>`)

```
player.CurrentWeapon = new LaserWeapon(); 
```

I've read about no support for certain covariance in C#, but I don't want to think that I'm stuck here. Is there any way to make my situation work? I'm trying to maintain a base weapon in the player class but work with a more specific weapon in another class.

I tried creating my own cast operator for LaserWeapon but I got an error about being unable to cast to/from base class.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T23:00:55.833

`Weapon<T>`我相信如果是这样声明的协变接口，您的示例会起作用：

```
public interface Weapon<out TProjectile>
{
} 
```

这仅适用于`TProjectile`用作返回值的地方，例如：

```
TProjectile Fire(); 
```

但在用作输入参数的地方不起作用**，例如：**`TProjectile`

```
LoadClip(IEnumerable<TProjectile> ammo); 
```

从您的评论中，我可以看到您在使用通用返回值，因此请按如下方式制作接口：

```
public interface IWeapon<out TProjectile> where TProjectile : Projectile
{
    TProjectile Fire();
} 
```

然后使用这个接口实现；没有什么能阻止你拥有一个有用的基类，例如

```
public abstract class Weapon<TProjectile> : IWeapon<TProjectile> where TProjectile : Projectile
{
    public abstract TProjectile Fire();
} 
```

只要您的播放器类符合以下要求：

```
public class Player
{
    public IWeapon<Projectile> CurrentWeapon { get; set; }
} 
```

这允许您仍然使用`CurrentWeapon.Fire()`which 将返回`Projectile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:06:54.177

`Weapon`创建一个继承的非泛型类`Weapon<T>`。使用该类而不是`Weapon<Projectile>`在您的代码中。

# java - How to get response from restlet ClientResource?

> ID：11604561
> 
> 赞同：1
> 
> 时间：2012-07-22T22:40:20.327
> 
> 标签：java, android, rest, http-post, restlet

This may be easy one, but I am confused.

I am trying to do HTTP POST on a server using Android Restlet, and read the reply returned from the server.

I created form using:

```
Form form = new Form
form.add("msg" ,"This is my message"); 
```

Now, I have clientResource as follows:

```
ClientResource clientResource = new ClientResource("www.example.com/my-http-post-url/"); 
```

Now, I am doing HTTP Post as:

```
Representation response=null;

try{

 response= clientResource.post(form.getWebRepresentation(null));
 System.out.println("Got response !! , response : " + response.getText());
 System.out.println( "Got Context: " + clientResource.getContext() );
 System.out.println( "Got Response: " + clientResource.getResponse());
 System.out.println( "Got Resonse Attribute : " + clientResource.getResponseAttributes() );
 System.out.println( "Got Resonse Entity: " + clientResource.getResponseEntity() );

}catch(Exception e){

e.printStackTrace();

} 
```

I found out that the code is going inside try, but its printing :

```
I/org.restlet(  493): Starting the default HTTP client
I/System.out(  493): Got response !! , response : null
I/System.out(  493): Got Context: null
I/System.out(  493): Got Response: HTTP/1.1 - OK (200) - OK
I/System.out(  493): Got Resonse Attribute : {org.restlet.http.headers=[(Date,Sun, 22 Jul 2012 22:14:03 GMT), (Server,WSGIServer/0.1 Python/2.7.1+), (Vary,Authorization), (Content-Type,application/json; charset=utf-8)]}
I/System.out(  493): Got Resonse Entity: [application/json,UTF-8] 
```

I tried sniffing the data, to see if the server is replying or not, I am confident that server is sending the response content.

Can anyone tell me, how can I find out the response content send by the server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:56:54.320

您正在以正确的方式使用 Restlet 的客户端支持。响应内容应包含在响应表示中...

第一步是在 Android 之外调用您的 REST 服务以查看确切的响应内容。您可以尝试使用 restclient (http://code.google.com/p/rest-client/) 或 curl 来执行此操作吗？

蒂埃里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T18:02:39.927

尝试这样的事情：

我现在有类似的东西：

```
ClientResource clientResource = new ClientResource(url);
Request request = new Request(Method.POST, url);

clientResource.setRequest(request);

    Form form = new Form();

    form.set("foo", "barValue");

    org.restlet.representation.Representation   response = clientResource.post(form, MediaType.APPLICATION_JSON);
    Representation responseEntity = clientResource.getResponseEntity();

    JsonRepresentation jsonRepresentation = new JsonRepresentation(responseEntity);

    JSONObject jsonObject = jsonRepresentation.getJsonObject();
    String[] names = JSONObject.getNames(jsonObject);

    if (jsonObject.has("errorString"))
    {
        String error = jsonObject.optString("errorString");
    } 
```

# r - How to interpret bubble plot scale and plotting negative numbers with scale_area

> ID：11604562
> 
> 赞同：3
> 
> 时间：2012-07-22T22:40:24.023
> 
> 标签：r, ggplot2

I asked a question about making bubble charts in ggplot2 [here](https://stackoverflow.com/questions/11517411/ggplot2-how-to-manually-adjust-scale-area "here").

My follow-up questions are:

1)how do I interprete the scale_size in the legend?

2) Does small dot (labeled 10) mean the data can be anything from 5-10? If the data for a particular point is 8, does scale_area function change the data point to 10 before it is presented as a dot size 10 on the graph.

3) is there a way to plot negative number on ggplot bubble chart? Some software can make the negative data a color bubble.

4) I tried to incorporate scale_area and scale_alpha but the legend shows 2 scales. I just want a combined one. How do I do that?

```
ggplot(dataset, aes(x = N, y = PctCens, size = BiasAM, alpha=BiasAM ,label = NULL)) +
geom_point(shape = 16) + 
scale_area(to = c(1, 10), breaks = c(0, 10, 30, 50, 70, 100)) +
scale_x_continuous("Sample size", limits = c(0, 100)) + 
scale_y_continuous("Percent censored", limits = c(0, 100)) +
facet_wrap(~Method,ncol=2) + 
theme_bw()+
opts(
panel.grid.minor = theme_blank(),
panel.background = theme_blank(),
axis.ticks = theme_blank(),
axis.title.x=theme_text(face='bold',vjust=0.2, size =12), 
axis.title.y=theme_text(face='bold',angle=90, vjust=0.2,size =12)) 
```

![enter image description here](../Images/52cd61f8f79637831fcdbce6d348d2d0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:40:35.300

这是我最终解决气泡图中负数问题的方法。

原始 BiasAM（称为 OrgBiasAM）变量具有负数，因此我取它的绝对值并创建了一个名为 BiasAM 的新变量，我在上面的代码中使用了它。为了区分负数和正数，我使用 ifelse 语句创建了一个名为 BiasAMCat 的新分类变量

数据集$BiasAMCat <-ifelse(数据集$OrgBiasMA < 0, 'Negative', 'Positive')

修改后的代码现在是：

```
ggplot(dataset, aes(x = N, y = PctCens, size = BiasAM, colour=factor(BiasAMCat) ,label =       NULL)) +
  geom_point(shape = 16) + 
  scale_area(to = c(1, 10), breaks = c(0, 10, 30, 50, 70, 100)) +
  scale_colour_manual(name=NULL, values=c('grey','black')) +  # for bw printing
  scale_x_continuous("Sample size", limits = c(0, 100)) + 
  scale_y_continuous("Percent censored", limits = c(0, 100)) +
  facet_wrap(~Method,ncol=2) + 
  theme_bw()+
  opts(
  panel.grid.minor = theme_blank(),
  panel.background = theme_blank(),
  axis.ticks = theme_blank(),
  axis.title.x=theme_text(face='bold',vjust=0.2, size =12), 
  axis.title.y=theme_text(face='bold',angle=90, vjust=0.2,size =12)) 
```

注意：如果您喜欢渐变色，可以按照 Andy W 的建议使用 color_gradient 而不是 scale_colour_manual。

# php - how to covert following curl script to php curl script?

> ID：11604563
> 
> 赞同：2
> 
> 时间：2012-07-22T22:40:29.933
> 
> 标签：php, curl

can any one help me to convert following curl code to php curl script?

```
curl -X POST 'https://api.twilio.com/2010-04-01/Accounts/xxx/SMS/Messages.xml' \
-d 'From=%2Byyyy' \
-d 'To=%2Bxxxx' \
-d 'Body=Dear%2C+Plz+wake+up%3B+it'\''s+time+4+SAHERI.%0D%0AYour+1+night+sacrifice+will+make+thousands+night+wonderful+by+the+grace+of+almighty+ALLAH.%0D%0A%0D%0A-biplob+(%2Bxxxxx)' \
-u xxx:yyy 
```

best regards MD Kamrul Hassan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:51:03.673

您需要在 curl 手柄上设置的选项如下。

```
curl_setopt($ch, CURLOPT_URL, 'https://api.twilio.com/2010-04-01/Accounts/xxx/SMS/Messages.xml');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('From' => 'blah', 'To' => 'blih', 'Body' => 'Please wake up whatever'));
curl_setopt($ch, CURLOPT_USERPWD, 'username:password'); 
```

# php - Process multiple logins via PHP?

> ID：11604567
> 
> 赞同：0
> 
> 时间：2012-07-22T22:41:06.243
> 
> 标签：php, api, login, background

We have a WHMCS installation and a multicraft installation and then the site itself has a login for the user's profile.

Basically what I'm looking to do is have it so if the user has a site account and they enter their login for WHMCS and multicraft basically tying their accounts together, (Real quick, I know how to process the logins for each of these systems individually so that's not my problem here) I would like to be able to have it so if they login to their site account, during the login process it also logs them into the other services in the background. I'm trying to figure out a good way to implement the "background" part of it. WHMCS has an API to validate the login but I've never worked with API's so I'm not sure yet how to exactly do that but I think I can manage that.

WHMCS API (For those interested): [http://docs.whmcs.com/API:Validate_Login](http://docs.whmcs.com/API:Validate_Login)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:49:19.023

您正在构建的内容称为单点登录。

基本上，您必须告诉 multicraft 与其查看自己的身份验证系统，不如调用 WHMCS 来检查用户是否已经在那里登录。它与 Facebook 或 Twitter 一起工作的方式称为 OAuth：[http](http://hueniverse.com/oauth/guide/workflow/) : //hueniverse.com/oauth/guide/workflow/ - 我想你应该修改 multicraft 以支持类似的东西。你可以在这里找到图书馆：http: [//oauth.net/2/](http://oauth.net/2/)

这里有一个 WHMCS 的库：[http ://whmcsaddon.com/products/oauth/](http://whmcsaddon.com/products/oauth/)

# sql-server - Using original record ID within trigger process

> ID：11604568
> 
> 赞同：0
> 
> 时间：2012-07-22T22:41:08.070
> 
> 标签：sql-server, tsql, triggers, insert

I have table `question`

```
id        int
answers   int 
```

With every insert, delete call on this table I want to update `answers` column. I want to use trigger on this. I don't know how I can read `question.id` within trigger for insert, delete.

Any help appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:56:33.687

在插入后发生的触发器中，您可以从`inserted`表中选择以获取任何插入行的 id。同样对于删除，您可以从`deleted`表中选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:51:08.767

在 BEFORE/AFTER INSERT 触发器中，您可以将 OLD 和 NEW 与“id”（OLD.id/NEW.id）和“answer”（OLD.answer/NEW.answer）列一起使用。您将能够获得每列的旧值和新值。同样，在 AFTER DELETE 触发器中，您可以获得 OLD.id 和 OLD.answer，这反过来将给出已删除行的值

# c++ - C++：数组元素设置为 0

> ID：11604569
> 
> 赞同：2
> 
> 时间：2012-07-22T22:41:23.993
> 
> 标签：c++, arrays

我已经使用数组一段时间了。

我有几个问题需要问。

现在我知道我不能使用一个数组而不给它的元素一个值。

例如，这会给我一个错误

```
int fly[5];
cout << fly[4] << endl; 
```

如果我打印一个没有设定值的元素，它会给出一个错误：

```
int fly[5];
fly[2] = 1;
cout << fly[4] << endl; 
```

现在我发现如果我在数组初始化中给数组的 1 个元素任何数字。然后将其余元素设置为 0。

所以这段代码打印 0

```
int fly[5] = {15};
cout << fly[4] << endl; 
```

为什么会发生这种情况。谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T22:46:50.070

它发生是因为 C++ 语言标准说它应该发生。该标准说它应该发生，因为它是明智的行为，并且在您想要初始化大型数组的情况下节省了大量的输入。

您的前几个示例会产生未定义的行为，因为这些数组元素的值可以是任何值，但它们不应“给出错误”。（足够聪明的编译器可能会发出警告。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T22:46:33.197

首先，不保证您的前两个示例会出错。如果不这样做，它们将编译并以未定义的行为运行。最后一个具有明确定义的行为。如果您没有为数组的每个元素指定值，则剩余部分将使用默认值进行初始化，在本例中为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:11:50.647

当您对数组进行大括号初始化并且初始化程序太短时，缺少的元素将被值初始化。对于诸如 的原始类型`int`，这意味着零初始化（即初始值为零）。例如，你可以说`int a[100] = {};`得到一个全零数组。不过，整数并不特殊，这也适用于默认可构造的类类型。

您的前两个示例构成未定义的行为，因为您正在读取未初始化的变量。

# objective-c - 有效，但我不确定为什么，目标 c

> ID：11604572
> 
> 赞同：0
> 
> 时间：2012-07-22T22:41:36.960
> 
> 标签：objective-c, xcode, properties, methods, segue

我正在制作一个计算器，并有两个 MVC 用于数学部分，称为 CalculatorFirstViewController 和一个名为 CalculatorBrain 的类。图形部分的另一个称为 GraphViewController。

在 CalculatorController 中，我使用 mutableArray 作为计算器堆栈，并通过 segue 将其传递给图形视图控制器。GraphView 的属性称为 graphingPoints。之后通过drawrect并调用“programToGraph”方法，该方法将创建一个点数组来绘制图形。让我感到困惑的是，我在“programGraph”中调用了一个方法“runProgram:usingVariableValues”，尽管“runProgram”只在 CalculatorBrain 中声明，这是一个单独的目标文件。为什么这个方法调用有效？

```
@interface CalculatorFirstViewController ()
@property (nonatomic, strong) CalculatorBrain *brain;
@end

@implementation CalculatorFirstViewController
@synthesize brain = _brain;

- (CalculatorBrain*) brain{
   if(!_brain) _brain = [[CalculatorBrain alloc] init];
   return _brain;
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

   if([segue.identifier isEqualToString:@"Graph"])
   //The call [self.brain program] returns the CalculatorStack
    [segue.destinationViewController setGraphingPoint:[self.brain program]];
  } 
```

这里是 RunProgram 的声明，在 Calculator MVC 中使用的 CalculatorBrain 对象中声明。它是一个类方法。它所做的只是返回在堆栈上执行操作的值。

```
+ (double)runProgram:(id)program usingVariableValues:(NSDictionary*)variableValues; 
```

这是 graphViewController 代码。

```
-(void) setGraphingPoint:(NSMutableArray*) graphingPoint{

if(_graphingPoint == nil) _graphingPoint = [[NSMutableArray alloc] init ];
    _graphingPoint = graphingPoint;
    //this will call drawrect
    [self.graphingView setNeedsDisplay];
}

-(id) programToGraph:(GraphingView *)sender{

    CGPoint graphPoint;
    NSMutableArray *pointValues = [[NSMutableArray alloc] init];

    for( int x =0;x<5; x++)
    {
        NSDictionary* xValue = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:x] forKey:@"X"];
        graphPoint.x =x;

     //This is the main part I dont get, If calculatorBrain is a seperate object file 
     //and I didn't import it, how am I able to call the method by just saying 
     //CalculatorBrain as the receiver? 

        graphPoint.y = [CalculatorBrain runProgram: self.graphingPoint usingVariableValues:xValue];

        [pointValues addObject:[NSValue valueWithCGPoint:graphPoint]];

}

return pointValues;

} 
```

那么，虽然我没有导入 CalculatorBrain 文件并且我没有通过 segue 将它传递给另一个控制器，但我怎么能调用 runProgram 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:59:26.943

Objective-c 允许在不需要声明的情况下调用对象上的选择器（方法）。这是因为实际调用是在运行时查找的。这允许您的代码具有在其他库中实现的类的扩展方法，因为调用是在需要时在运行时而不是在编译时找到的。

因此，您的调用在运行时被查找并且工作正常，因为该方法存在。在这种情况下，编译器应该给出一个警告，在编译时找不到该方法，但仍会成功编译。

编辑：您仍然需要使用@class 转发声明类本身。

# android - 如何配置我的 Android + Phonegap 应用程序以根据手机的分辨率自动缩放图像？

> ID：11604574
> 
> 赞同：2
> 
> 时间：2012-07-22T22:42:28.657
> 
> 标签：android, cordova, image

`<meta name="viewport" content="width=device-width, initial-scale=1">`

这根本没有帮助。我有 100 px X 100 px.jpg 图片，它们在 Nexus 7 中太小了，但在其他设备中还可以。是否可以配置应用程序以使图片始终根据设备调整大小？

我正在使用 Phonegap/Cordova，我的图片在 assets/www/images-folder 中。我从 developer.android-page 读到，如果图片是 jpg、png 或 bmp 格式，它应该缩放图片。

感谢您的帮助！萨米人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T22:48:41.910

Android 只会缩放存储在`/res`文件夹中的资源。它不会扩展或以其他方式在替代资源中选择存储在`/assets`. 如果您将图像放入 中`/res/drawable`，那么它们将根据像素密度自动缩放。但是，听起来您希望为 Nexus 7 等大屏幕设备提供更大的图像。在这种情况下，请将更大版本的图像放入`/res/drawable-large`.

有关可以使用的资源限定符的完整说明，请参阅[有关提供替代资源的文档。](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# c - fflush(stdin) ANSI C

> ID：11604575
> 
> 赞同：2
> 
> 时间：2012-07-22T22:43:05.083
> 
> 标签：c, fflush

我是 ANSI C 的初学者，我有一个问题，这可能是个愚蠢的问题，我很抱歉。

```
#include<stdio.h>
    main()
    {
          int age;
          printf("Hello World!\n");
          printf("Please enter your age: ");
          scanf("%d", &age);
          printf("You entered %d\n", age);
          fflush(stdin);
          getchar();
    } 
```

这是我学习scanf函数的第二个程序。我的问题是：我知道**printf**、**scanf**、**fflush**、**stdin**和**getchar是在****stdio.h**中定义的，但只有当我使用**fflush(stdin)**时我必须输入**#include< *stdio.h* >**，但是当使用任何其他方法时我可以删除该行#include。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T22:54:58.603

当您调用在该标头中声明的任何函数时，您*必须*拥有。`#include <stdio.h>`

好吧，这并不*完全*正确。在 1989/1990 版本的语言标准中，调用可以创建函数的隐式声明。如果这恰好与正确的声明相匹配，您就可以侥幸逃脱；。否则你的程序的行为是不确定的——这意味着你仍然*可能*逃脱它，或者没有，但是编译器不需要警告你。由于`printf`需要可变数量的参数，因此您*必须*有一个可见的声明以避免未定义的行为 - 获得可见声明的方法是`#include <stdio.h>`.

（您也可以自己声明该函数，但这很容易出错，而且没有充分的理由这样做。）

在 C99 及更高版本中，没有隐式声明。

`main()`应该是`int main(void)`。

`fflush(stdin)`具有未定义的行为。如果要丢弃`scanf()`调用后输入的字符，可以读取并丢弃它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T22:46:49.403

您可能需要该头文件，因此`stdin`将被定义。如果你关闭了编译器警告，编译器不会让你知道未定义的函数。（如果它们真的是未定义的，你稍后会得到一个链接器错误）。`stdin`是类型的变量`FILE *`，而不是函数。

请不要打电话`fflush(stdin)`。它具有未定义的行为。如果您需要清除输入缓冲区，请使用另一种方法。执行此操作的标准方法是尝试读取数据，直到下一行结束：

```
int flush_line(FILE *file)
{
    int ch;
    do {
        ch = fgetc(file);
    } while (ch != '\n' && ch != EOF);
    if (ch == EOF && ferror(file)) {
        return -1;
    }
    return 0;
} 
```

然后你会打电话给`flush_line(stdin)`.

如果不考虑可移植性（注意这不适用于 Windows），您可以暂时使文件描述符为非阻塞并从中读取*所有*输入：

```
int flush_in(FILE *file)
{
    int ch;
    int flags;
    int fd;

    fd = fileno(file);
    flags = fcntl(fd, F_GETFL, 0);
    if (flags < 0) {
        return -1;
    }
    if (fcntl(fd, F_SETFL, flags | O_NONBLOCK)) {
        return -1;
    }
    do {
        ch = fgetc(file);
    } while (ch != EOF);
    clearerr(file);
    if (fcntl(fd, F_SETFL, flags)) {
        return -1;
    }
    return 0;
} 
```

然后你会打电话给`flush_in(stdin)`.

# r - 缩小y轴宽度

> ID：11604580
> 
> 赞同：3
> 
> 时间：2012-07-22T22:43:36.237
> 
> 标签：r, ggplot2

可以缩小y轴吗？我的意思不是绘图是正方形的，而是希望它是矩形的，y 轴缩小。

```
library(ggplot2)
data = data.frame(rnorm(10000))
colnames(data) = "numOfX"
m <- ggplot(data, aes(x=numOfX))
m + geom_histogram(colour = "blue", fill = "white", binwidth = 0.5) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T23:00:56.143

```
last_plot() + opts(aspect.ratio=1/10) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T22:55:21.117

您可以通过将以下内容添加到代码的最后一行来调整边距：

```
+ opts(plot.margin = unit(c(1,1,10,1), "lines")) 
```

数字是按 c（上、右、下、左）的顺序添加到边距的行数。

**更新：**我和巴蒂斯特讨论的方法将改变情节本身的大小，但不会改变情节区域的大小。为了完整起见，如果你想改变绘图的纵横比但仍然让它填满整个绘图区域，那么你需要改变绘图区域本身的大小。

在 Mac 上你可以做`quartz(width=w, height=h)`, 宽度和高度以英寸为单位。这将打开一个指定大小的绘图窗口。然后运行您的原始代码（不更改边距或纵横比）。这将为您提供所需的任何绘图大小，并且绘图将填充绘图区域。完成后，您可以使用`dev.off()`关闭 Quartz 窗口。

[您可以使用此 Stack Overflow 答案](https://stackoverflow.com/questions/2367328/how-to-change-current-plot-window-size-in-r)在 Windows 中执行相同的操作。

最后，如果您使用的是 RStudio，您可以执行 Export-->Copy-to-Clipboard，然后手动调整纵横比。

当然，您可以结合使用我或巴蒂斯特的原始答案以及上述方法来同时控制绘图区域的大小和边距的大小。

# wpf - 如何在独立于 ItemsControl 中的 ItemsControl 中绑定 DataTemplate 中的特定属性

> ID：11604582
> 
> 赞同：0
> 
> 时间：2012-07-22T22:44:08.180
> 
> 标签：wpf, datatemplate, itemscontrol, itemssource

我有以下数据模板

```
 <DataTemplate x:Key="iconButtonsTemplate">
            <StackPanel  Orientation="Horizontal" Margin="120,50,0,0"  HorizontalAlignment="Left" VerticalAlignment="Top"  >
                <icon:IconButton   Command="{Binding Path=DataContext.ButtonClickCommand,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"
                                   CommandParameter="{Binding Path=CommandParameter}"    TextContent="{Binding TextContent}" ImageSource="{Binding ImageSource}"
                                   IsIconButtonVisible="{Binding Path=MyLocalBoolList}"  />
            </StackPanel>
        </DataTemplate> 
```

我也有 ItemsControl 这样的，

```
 <ItemsControl Width="2400"  VerticalAlignment="Top" HorizontalAlignment="Left"
                           ItemsSource="{Binding IconConfigList}"  ItemTemplate="{StaticResource iconButtonsTemplate}" >
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel  Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
      </ItemsControl> 
```

那么是否可以将我的 IsIconButtonVisible 属性绑定到独立于 ItemsControl 中的 IconConfigList 的 ViewModel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:44:29.283

```
IsIconButtonVisible="{Binding Path=DataContext.ViewModelProperty,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:01:17.003

在绑定中使用 ElementName 值。

```
<DataTemplate x:Key="iconButtonsTemplate">
    <StackPanel Orientation="Horizontal" Margin="120,50,0,0"  HorizontalAlignment="Left" VerticalAlignment="Top"  >
        <icon:IconButton Command="{Binding Path=DataContext.ButtonClickCommand,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"
                     CommandParameter="{Binding Path=CommandParameter}"    TextContent="{Binding TextContent}" ImageSource="{Binding ImageSource}"
                     IsIconButtonVisible="{Binding Path=DataContext.MyLocalBoolList, ElementName=ItemsControlName}"  />
    </StackPanel>
</DataTemplate> 
```

如果 ElementName 不适合您，请尝试使用 RelativeSource。

# c++ - 编译/链接到 libpano13

> ID：11604584
> 
> 赞同：1
> 
> 时间：2012-07-22T22:44:38.250
> 
> 标签：c++, compilation, g++, linker-errors, static-linking

我试图在使用 libpano13 中的函数时编译一个非常简单的程序，但我遇到了链接错误。我在 Ubuntu 10.04 上，并做了以下事情：

```
sudo apt-get install libpano13-dev 
```

我的示例程序如下：

```
#include <cstring>
#include <pano13/PTcommon.h>

int main(int argc, char **argv) {
    fullPath *outFile = new fullPath();
    StringtoFullPath(outFile, (char *)"/tmp/randomImage.jpg");

    return 0;
} 
```

我正在尝试使用以下命令编译它（上面的代码位于名为 panoTest.cpp 的文件中）：

```
$ g++ panoTest.cpp -o testApp -L/usr/lib -lpano13 
```

当我运行此命令时，我收到以下错误：

```
$ g++ panoTest.cpp -o testApp -L/usr/lib -lpano13 
/tmp/ccyIioEi.o: In function `main':
panoTest.cpp:(.text+0x87): undefined reference to `StringtoFullPath(fullPath*, char*)'
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

现在，我检查了 /usr/lib 的 libpano* 并找到了以下文件：

```
$ ls /usr/lib/libpano*
/usr/lib/libpano13.a  /usr/lib/libpano13.so  /usr/lib/libpano13.so.1
/usr/lib/libpano13.so.1.0.0 
```

我使用 nm 检查了 libpano13.so 并得到以下输出：

```
$ nm --demangle /usr/lib/libpano13.a | grep StringtoFullPath
U StringtoFullPath
U StringtoFullPath
00000000 T StringtoFullPath

$ nm --demangle /usr/lib/libpano13.so | grep StringtoFullPath
nm: /usr/lib/libpano13.so: no symbols 
```

我还使用 objdump 检查了它：

```
$ objdump -T /usr/lib/libpano13.so | grep StringtoFullPath
00057fd0 g    DF .text  0000004c  Base        StringtoFullPath 
```

因此，以下似乎是正确的：

1.  libpano13 存在于 /usr/lib 中，
2.  libpano13 包含 StringtoFullPath 的符号，
3.  我正在使用 /usr/lib 的正确库目录，
4.  我正在使用正确的 pano13 库名称，并且
5.  g++ 能够找到库

但是，由于某种原因，g++ 无法找到 StringtoFullPath 的符号。

有人对为什么会发生这种情况有任何建议/想法吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:00:46.970

这

```
undefined reference to `StringtoFullPath(fullPath*, char*)' 
```

我有点担心：它包含参数的类型。大多数 Linux 库都不是 C++，所以应该没有类型......

尝试用 extern "C" { ... } 块包围标题的#include。

# android - 我想使用java从xml布局更改为surfaceview

> ID：11604585
> 
> 赞同：0
> 
> 时间：2012-07-22T22:44:44.187
> 
> 标签：android, xml, eclipse, surfaceview

好的，所以我使用 xml 来设置以下 java 代码支持的菜单

```
package starting.rt;

import java.util.List;
import java.util.Random;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Menu extends Activity implements OnClickListener{

    View.OnTouchListener gestureListener;

    TextView display;
    Button begin;
    Button random;
    Button game;

    TextView counter;

    Button next;
    Button previous;
    Button moreapps;
    Button rate;

    Random myRandom;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(starting.rt.R.layout.menu);

        begin = (Button) findViewById(starting.rt.R.id.Begin);
        random = (Button) findViewById(starting.rt.R.id.Random);
        display = (TextView) findViewById(starting.rt.R.id.tvResults);
        counter = (TextView) findViewById(starting.rt.R.id.tvCounter);
        next = (Button) findViewById(starting.rt.R.id.Next);
        previous = (Button) findViewById(starting.rt.R.id.Previous);
        moreapps = (Button)findViewById(R.id.More);
        rate = (Button) findViewById(R.id.rate);
        game = (Button) findViewById(R.id.game);

//       display.setOnTouchListener(this.gestureListener);

begin.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        Intent openStartingPoint = new Intent("starting.rt.RelationshipTipsActivity");
        startActivity(openStartingPoint);

    }});

moreapps.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {

    Intent goToMarket; 
    goToMarket = new Intent(Intent.ACTION_VIEW, Uri.parse("market://search?q=pub:\"Wompa\"")); 
    startActivity(goToMarket); 
    }});

game.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {

    Intent openStartingPoint = new Intent("starting.rt.GameView");
    startActivity(openStartingPoint);
    }});

    rate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse("market://details?id=" + getPackageName()));
            startActivity(i);
        }});}

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

现在应该发生的是，当他们点击游戏时，它会启动一个名为 GameView 的新 java 类，点击它会崩溃。每个其他按钮都有效。

这是来自 GameView 的代码

```
package starting.rt;
import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class GameView extends SurfaceView {
       private GameLoopThread gameLoopThread;
       private List<Sprite> sprites = new ArrayList<Sprite>();
       private List<TempSprite> temps = new ArrayList<TempSprite>();
       private long lastClick;
       private Bitmap bmpBlood;

       public GameView(Context context) {
             super(context);
             gameLoopThread = new GameLoopThread(this);
             getHolder().addCallback(new SurfaceHolder.Callback() {

                    public void surfaceDestroyed(SurfaceHolder holder) {
                           boolean retry = true;
                           gameLoopThread.setRunning(false);
                           while (retry) {
                                  try {
                                        gameLoopThread.join();
                                        retry = false;
                                  } catch (InterruptedException e) {}
                           }
                    }

                    public void surfaceCreated(SurfaceHolder holder) {
                           createSprites();
                           gameLoopThread.setRunning(true);
                           gameLoopThread.start();
                    }

                    public void surfaceChanged(SurfaceHolder holder, int format,
                                  int width, int height) {
                    }
             });
             bmpBlood = BitmapFactory.decodeResource(getResources(), R.drawable.blood1);
       }

       private void createSprites() {
             sprites.add(createSprite(R.drawable.bad1));
//             sprites.add(createSprite(R.drawable.bad2));
//             sprites.add(createSprite(R.drawable.bad3));
//             sprites.add(createSprite(R.drawable.bad4));
//             sprites.add(createSprite(R.drawable.bad5));
//             sprites.add(createSprite(R.drawable.bad6));
//             sprites.add(createSprite(R.drawable.good1));
//             sprites.add(createSprite(R.drawable.good2));
//             sprites.add(createSprite(R.drawable.good3));
//             sprites.add(createSprite(R.drawable.good4));
//             sprites.add(createSprite(R.drawable.good5));
//             sprites.add(createSprite(R.drawable.good6));
       }

       private Sprite createSprite(int resouce) {
             Bitmap bmp = BitmapFactory.decodeResource(getResources(), resouce);
             return new Sprite(this, bmp);
       }

       @Override
       protected void onDraw(Canvas canvas) {
             canvas.drawColor(Color.BLACK);
             for (int i = temps.size() - 1; i >= 0; i--) {
                    temps.get(i).onDraw(canvas);
             }
             for (Sprite sprite : sprites) {
                    sprite.onDraw(canvas);
             }
       }

       @Override
       public boolean onTouchEvent(MotionEvent event) {
             if (System.currentTimeMillis() - lastClick > 300) {
                    lastClick = System.currentTimeMillis();
                    float x = event.getX();
                    float y = event.getY();
                    synchronized (getHolder()) {
                           for (int i = sprites.size() - 1; i >= 0; i--) {
                                  Sprite sprite = sprites.get(i);
                                  if (sprite.isCollition(x, y)) {
                                        sprites.remove(sprite);
                                        temps.add(new TempSprite(temps, this, x, y, bmpBlood));
                                        break;
                                  }
                           }
                    }
             }
             return true;
       }
} 
```

GameView 为游戏的一部分调用了其他一些类，但它在开始之前就崩溃了。我认为它崩溃了，因为它正在从 xml 布局切换到 java surfaceview。帮助将不胜感激:) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:30:16.707

首先，您应该始终在您的问题中发布堆栈跟踪，`Logcat`除非您的应用程序崩溃。

您不能`SurfaceView`直接启动，而是您的自定义`SurfaceView`必须嵌入到`Activity`android 中的任何其他视图中。例如：

```
public class GameViewActivity extends Activity {

     @Override
     public void onCreate(Bundle savedInstance) {
          super.onCreate(savedInstance);
          setContentView(new GameView(this));
     }   

} 
```

# regex - 代码折叠在一行

> ID：11604589
> 
> 赞同：3
> 
> 时间：2012-07-22T22:45:15.753
> 
> 标签：regex, emacs, folding

**编辑**我认为漂亮模式在概念上比各种折叠模式更接近我想要的，但我需要能够用其他字符串替换字符串，而不是单个字符。据我所知，*漂亮模式*只允许用唯一字符替换字符串。

我希望在 Emacs 中做一些非常具体的事情，这是一种代码折叠。我读过这个： [Emacs 中的代码折叠](https://stackoverflow.com/questions/1208622/code-folding-in-emacs)

由于此而被关闭：

[Emacs中如何实现代码折叠效果？](https://stackoverflow.com/questions/1085170/how-to-achieve-code-folding-effects-in-emacs)

但是，我正在尝试做一些特别的事情，因为我不想折叠函数行：我确实想在一行上折叠字符。

我也完全不喜欢导航：这不是为了方便导航。只是为了稍微整理一下屏幕。

例如，如果我有这个：

```
super verbose syntax my_bar = 42;
hyper long syntax my_foo = 84; 
```

我想让它出现在 Emacs 中，如下所示：

```
svs my_bar = 42;
hls my_foo = 84; 
```

因为我不仅读了一百万次“超级冗长语法”/“超长语法” **，而且**因为十年来当我输入“svs”时，它会自动扩展为“超级冗长语法”，而“hls”自动扩展为“超级长语法”，我没有机会使用“svs”作为真正的标识符，也没有机会我不会立即认识到发生了什么。当然，文件/缓冲区应该仍然包含非常冗长的语法。

我纯粹想要一个“折叠在一行上的字符”。

所以，简而言之，当我输入“超级详细语法”时，我希望它在屏幕上自动折叠为“svs”（当我输入“svs”选项卡时，它会扩展为“超级详细语法”，但那是另一回事。 ..在我的情况下，键入 svs TAB 将扩展为“超级详细语法”，然后应将其直接折叠为*屏幕上*的“svs” ）。

这将节省大量屏幕空间并帮助我专注于更重要的事情。

*（作为一个很酷的副作用，它还会排列长度不同的垂直保留关键字，使代码对我来说更具可读性）*

如何在 Emacs 下实现这一点？是否有一个次要模式已经这样做了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T23:50:29.947

尝试将这两个表达式添加到您的模式挂钩中：

```
(font-lock-add-keywords
 nil
 '(("super verbose syntax" (0 '(face default display "svs") append))
   ("hyper long syntax" (0 '(face default display "hls") append)))
 t)
(push 'display font-lock-extra-managed-props) 
```

# java - mouseMoved 给出空异常指针 - 完全困惑（更多斯坦福 CS106 痛苦）

> ID：11604594
> 
> 赞同：1
> 
> 时间：2012-07-22T22:46:37.390
> 
> 标签：java, nullpointerexception, runtime-error

我已经完美地完成了这个练习：

```
import acm.program.*;
import acm.graphics.*;
import java.awt.event.*;
public class ProgramHierarchy extends GraphicsProgram {
public void run() {
    Paddle = new GRect(0,getHeight() - 30,100,20);
    add(Paddle);
    addMouseListeners();
    }

public void mouseMoved(MouseEvent e) {
    if(e.getX() - Paddle.getWidth()>0) {
    Paddle.move(e.getX()-Paddle.getX()-Paddle.getWidth(), 0);
    }
}

private GRect Paddle;
} 
```

但是当我在一个更大的项目中使用**完全相同的代码**时，我的 eclipse 会抛出空指针异常，甚至会完全导致 eclipse 崩溃，我会撞到办公桌上说一些我不希望家人听到的坏话。我的 Eclipse 副本是否已损坏？会发生什么？

这是我更大的硬崩溃项目。

```
import acm.graphics.*;
import acm.program.*;
import acm.util.*;
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

public class Breakout extends GraphicsProgram {

public static final int APPLICATION_WIDTH = 400;
public static final int APPLICATION_HEIGHT = 600;
private static final int WIDTH = APPLICATION_WIDTH;
private static final int HEIGHT = APPLICATION_HEIGHT;
private static final int PADDLE_WIDTH = 60;
private static final int PADDLE_HEIGHT = 10;
private static final int PADDLE_Y_OFFSET = 30;
private static final int NBRICKS_PER_ROW = 10;
private static final int NBRICK_ROWS = 10;
private static final int BRICK_SEP = 3;
private static final int BRICK_WIDTH =
  (WIDTH - (NBRICKS_PER_ROW - 1) * BRICK_SEP) / NBRICKS_PER_ROW;
private static final int BRICK_HEIGHT = 8;
private static final int BALL_RADIUS = 10;
private static final int BRICK_Y_OFFSET = 70;
private static final int NTURNS = 3;
private static final int DELAY = 30;

public void run() {
    setup();
    GRect Paddle = new GRect(0,HEIGHT - PADDLE_HEIGHT - PADDLE_Y_OFFSET,PADDLE_WIDTH,PADDLE_HEIGHT);
    add(Paddle);
    addMouseListeners();
    }

private void setup() {

    int xStart = (WIDTH - ((NBRICKS_PER_ROW * BRICK_WIDTH) + ((NBRICKS_PER_ROW -1) * BRICK_SEP)))/2;

    int y = BRICK_Y_OFFSET;

    for (int i = 0; i< NBRICK_ROWS; i++) {
        int x = xStart;

        for (int j = 0; j < NBRICKS_PER_ROW; j++) {
            GRect block = new GRect(x, y, BRICK_WIDTH, BRICK_HEIGHT);
            if (i<2) {
                block.setColor(Color.RED);
                block.setFilled(true);
                block.setFillColor(Color.red);
            }
            if (i==2||i==3) {
                block.setColor(Color.orange);
                block.setFilled(true);
                block.setFillColor(Color.orange);
            }
            if (i==4||i==5) {
                block.setColor(Color.yellow);
                block.setFilled(true);
                block.setFillColor(Color.yellow);
            }
            if (i==6||i==7) {
                block.setColor(Color.green);
                block.setFilled(true);
                block.setFillColor(Color.green);
            }
            if (i==8||i==9) {
                block.setColor(Color.cyan);
                block.setFilled(true);
                block.setFillColor(Color.cyan);
            }
            add (block);
            x=x+BRICK_WIDTH + BRICK_SEP;
        }
    y=y+BRICK_HEIGHT+BRICK_SEP;
    }
}

public void mouseMoved(MouseEvent PadX) {
    if(PadX.getX() - Paddle.getWidth()>0) {
    Paddle.move(PadX.getX()-Paddle.getX()-Paddle.getWidth(), 0);
    }
}

private GRect Paddle;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T22:52:42.363

您正在隐藏 Paddle 变量：在类中声明它，但在 run 方法中重新声明它。类中保存的 Paddle 变量从未初始化，因此它保持为空。解决方法是不在run方法中重新声明这个变量。

例如，在您的有效代码中，您有：

```
public void run() {
  Paddle = new GRect(0,getHeight() - 30,100,20); // **** notice the difference?
  add(Paddle);
  addMouseListeners();
} 
```

在不起作用的代码中：

```
public void run() {
  setup();

  // notice that you re-declare Paddle here!
  GRect Paddle = new GRect(0,HEIGHT - PADDLE_HEIGHT - PADDLE_Y_OFFSET,PADDLE_WIDTH,PADDLE_HEIGHT);
  add(Paddle);
  addMouseListeners();
} 
```

上面初始化的 Paddle 变量仅在 run 方法中可见，在您的类中其他任何地方都看不到。同名的类变量保持为空。

解决方案：不要重新声明Paddle：

```
public void run() {
  setup();

  // Now we don't re-declare Paddle 
  Paddle = new GRect(0,HEIGHT - PADDLE_HEIGHT - PADDLE_Y_OFFSET,PADDLE_WIDTH,PADDLE_HEIGHT);
  add(Paddle);
  addMouseListeners();
} 
```

# c# - 如何为类 C 语言创建 Visual Studio 语法高亮

> ID：11604596
> 
> 赞同：0
> 
> 时间：2012-07-22T22:46:47.173
> 
> 标签：c#, c++, c, visual-studio-2010, syntax-highlighting

当我编辑类似 C 语言的代码文件时，我希望有简单的语法突出显示。我知道我可以选择 C++ 语法高亮，但该语言有很多类似于 HLSL 的关键字，我也想为它们着色。

我需要为此编写一个 VS 扩展吗？或者这只是证明一个列出关键字、运算符、注释等的 VS 特定文本文件的问题？

我在哪里可以找到这样的例子作为基础？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:21:56.130

[您可以在 codeplex http://www.codeplex.com/site/search?query=highlight&ac=3](http://www.codeplex.com/site/search?query=highlight&ac=3)上找到一些示例。具体来说，其中一个插件用于 HSLS、GLSL 和 CG (http://nshader.codeplex.com/)

# mysql - 在 mysql 中更改 max_allowed_pa cket 有困难

> ID：11604600
> 
> 赞同：1
> 
> 时间：2012-07-22T22:47:28.407
> 
> 标签：mysql

我正在尝试更改`max_allowed_packet=20M`. 这就是我所做的：

```
$ mysql -u root -e 'show variables like "max%"'

+----------------------------+----------------------+
| Variable_name              | Value                |
+----------------------------+----------------------+
| max_allowed_packet         | 16777216             |

$ sudo vim /etc/my.cnf

# my.cnf
[mysqld]
max_allowed_packet=20M

$ sudo service mysql restart

$ mysql -u root -e 'show variables like "max%"'

+----------------------------+----------------------+
| Variable_name              | Value                |
+----------------------------+----------------------+
| max_allowed_packet         | 16777216             | 
```

为什么这里没有任何变化？我需要做什么才能真正更改此设置？（请注意，我在这里使用的是 ec2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:14:55.470

尝试

```
[mysqld]
max-allowed-packet=20M 
```

反而。

电脑可以*这么*挑剔！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T04:37:34.203

您的重新启动查询不正确。它应该是：

$ sudo 服务 mysqld 重启

你错过了mysqld中的“d”

# java - 如何“锚定” SWT 小部件？

> ID：11604603
> 
> 赞同：1
> 
> 时间：2012-07-22T22:48:09.263
> 
> 标签：java, eclipse, layout, swt

我正在尝试使用 SWT 库制作一个简单的浏览器。虽然试图让对象锚定到左上角等，但我遇到了问题。

我正在使用 Eclipse 并使用布局助手将锚点设置为左上角和所有其他选项。

基本上我希望浏览器控件自动调整大小。谢谢！:D

我使用的布局类型是表单布局（在 SWT 帮助页面上建议使用锚点。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:31:43.767

对于您要执行的操作（将小部件附加到其父级的两侧），使用`FormAttachment`. 这有效：

```
fd_browser.top = new FormAttachment(0);
fd_browser.left = new FormAttachment(0);
fd_browser.bottom = new FormAttachment(100);
fd_browser.right = new FormAttachment(100); 
```

意思是“将顶部边缘连接到容器的 0% 垂直位置”，“将左边缘连接到 0% 水平位置”，“将底部边缘连接到容器的 100% 垂直位置”，以及“将右边缘附加到容器的 100% 位置。” 换句话说，顶部和左侧边缘将在容器原点 + 0 处，底部和右侧边缘将在容器原点 + 容器大小的 100% 处。这听起来很复杂，但我认为它实际上非常直观。

像您的代码一样使用两个参数 c'tor 指定从容器的 0,0 位置（向下 450 和跨 845）硬编码的偏移量，这实际上是告诉浏览器小部件的大小是固定的。FormLayout 中的偏移量实际上只对设置边距有用，或者，嗯，从容器边缘或其他小部件的偏移量。:-)

我建议再次阅读 FormAttachment 和 FormLayout 的 JavaDocs - 一旦你“得到”它，我认为它对你来说很容易使用。[SWT Snippets 页面](http://www.eclipse.org/swt/snippets/)上也可能有一些示例。

# php - 回显成功但未从远程服务器发送电子邮件

> ID：11604608
> 
> 赞同：1
> 
> 时间：2012-07-22T22:49:40.680
> 
> 标签：php, email-validation

```
<?php

$msg="";
if(isset($_POST['submit']))
{

    $from_add = "name@your-web-site.com"; 

    $to_add = "receiver@gmail.com"; //<-- I replaced this with my real gmail account

    $subject = "Test Subject";
    $message = "Test Message";

    $headers = "From: $from_add \r\n";
    $headers .= "Reply-To: $from_add \r\n";
    $headers .= "Return-Path: $from_add\r\n";
    $headers .= "X-Mailer: PHP \r\n";

    if(mail($to_add,$subject,$message,$headers)) 
    {
        $msg = "Mail sent OK";
    } 
    else 
    {
       $msg = "Error sending email!";
    }
}
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
<head>
    <title>Test form to email</title>
</head>

<body>
<?php echo $msg ?>
<p>
<form action='<?php echo htmlentities($_SERVER['PHP_SELF']); ?>' method='post'>
<input type='submit' name='submit' value='Submit'>
</form>
</p>

</body>
</html> 
```

我从[http://www.html-form-guide.com](http://www.html-form-guide.com)获得了这段代码，它说如果正确配置为发送电子邮件，它将检查我的服务器的配置。

我试过了，我上传到我的域，当我打开它时，它显示回显“邮件发送正常”，但我没有收到邮件。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T01:01:25.813

检查您的服务器是否设置为发送邮件。

你用的是什么操作系统，邮件服务器？

在 Linux 上尝试`sendmail`从命令行运行。

```
echo 'this is a test'| mail -s test_email user@somedomain.com 
```

其他要检查的事情是您的邮件设置`php.ini`是否正确，没有防火墙阻止外发邮件，并且电子邮件没有被垃圾邮件过滤器捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:41:29.620

```
 $from_name ="Mahendra";
  $from_mail = "xxxx@gmail.com";
  $to = "xxxx@gmail.com";
  $subject = "Mahendra's Test Mail";
  $mail_body = "This is email test";
  $message = $mail_body ;
  $headers = "MIME-Version: 1.0" . "\r\n";
  $headers .= "Content-type:text/html;charset=UTF-8\r\n";
  $headers .= "From: ".$from_name." <".$from_mail.">\r\n";
  ob_start();
  //$sendmail=mail($to,$subject,$message,$headers);

  if($sendmail)
  {
      echo "Send";
  }
  else
  {
      echo "Not Send";  
   } 
```

试试上面的代码，我确定邮件正在使用上面的代码发送，如果你将使用上面的代码并且你的邮件没有发送。那么 100% 的问题出在您的邮件服务器上。在这么多项目中，我都使用过这样的方式，并且效果很好。

# javascript - CasperJS 中“那么”的真正含义是什么

> ID：11604611
> 
> 赞同：97
> 
> 时间：2012-07-22T22:50:10.190
> 
> 标签：javascript, casperjs

我正在使用 CasperJS 通过网站自动执行一系列点击、完成表单、解析数据等。

Casper 似乎以语句的形式组织成一个预设步骤列表`then`（参见他们的示例：http: [//casperjs.org/quickstart.html](http://casperjs.org/quickstart.html)），但不清楚是什么触发了下一个语句实际运行。

例如，是否`then`等待所有待处理的请求完成？是否`injectJS`算作待处理的请求？如果我有一个`then`嵌套的语句 - 链接到`open`语句的末尾会发生什么？

```
casper.thenOpen('http://example.com/list', function(){
    casper.page.injectJs('/libs/jquery.js');
    casper.evaluate(function(){
        var id = jQuery("span:contains('"+itemName+"')").closest("tr").find("input:first").val();
        casper.open("http://example.com/show/"+id); //what if 'then' was added here?
    });
});

casper.then(function(){
    //parse the 'show' page
}); 
```

我正在寻找有关 CasperJS 中流程如何工作的技术解释。我的具体问题是我的最后一个`then`语句（上面）在我的`casper.open`语句之前运行，我不知道为什么。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-14T17:51:25.980

`then()`基本上在堆栈中添加了一个新的导航步骤。一个步骤是一个 javascript 函数，它可以做两种不同的事情：

1.  等待上一步 - 如果有的话 - 正在执行
2.  等待请求的 url 和相关页面加载

我们来看一个简单的导航场景：

```
var casper = require('casper').create();

casper.start();

casper.then(function step1() {
    this.echo('this is step one');
});

casper.then(function step2() {
    this.echo('this is step two');
});

casper.thenOpen('http://google.com/', function step3() {
    this.echo('this is step 3 (google.com is loaded)');
}); 
```

您可以打印出堆栈中所有创建的步骤，如下所示：

```
require('utils').dump(casper.steps.map(function(step) {
    return step.toString();
})); 
```

这给出了：

```
$ casperjs test-steps.js
[
    "function step1() { this.echo('this is step one'); }",
    "function step2() { this.echo('this is step two'); }",
    "function _step() { this.open(location, settings); }",
    "function step3() { this.echo('this is step 3 (google.com is loaded)'); }"
] 
```

注意`_step()`CasperJS 自动添加的为我们加载 url 的功能；当 url 被加载时，堆栈中可用的下一步——即`step3()`——被调用。

定义导航步骤后，`run()`按顺序一一执行：

```
casper.run(); 
```

**脚注：**回调/监听器的东西是[Promise 模式](http://blog.thepete.net/blog/2011/07/02/javascript-promises/)的实现。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-01T21:43:30.510

`then()`仅注册一系列步骤。

`run()`及其一系列运行器函数、回调和侦听器，都是执行每个步骤的实际工作。

每当一个步骤完成时，CasperJS 将检查 3 个标志：`pendingWait`、`loadInProgress`和`navigationRequested`. 如果这些标志中的任何一个为真，则什么也不做，闲置直到稍后时间（`setInterval`样式）。如果这些标志都不是真的，那么下一步将被执行。

从 CasperJS 1.0.0-RC4 开始，存在一个缺陷，在某些基于时间的情况下，“尝试执行下一步”方法将在 CasperJS 有时间引发`loadInProgress`or`navigationRequested`标志之一之前被触发。解决方案是在离开预期会引发这些标志的任何步骤之前提高其中一个标志（例如：在要求 a 之前或之后提高标志`casper.click()`），可能像这样：

*（注意：这只是说明性的，更像是伪代码而不是正确的 CasperJS 形式......）*

```
step_one = function(){
    casper.click(/* something */);
    do_whatever_you_want()
    casper.click(/* something else */); // Click something else, why not?
    more_magic_that_you_like()
    here_be_dragons()
    // Raise a flag before exiting this "step"
    profit()
} 
```

为了将该解决方案封装到一行代码中，我`blockStep()`在这个 github[拉取请求](https://github.com/n1k0/casperjs/pull/264 "拉取请求")中介绍了扩展`click()`和`clickLabel()`作为帮助保证我们在使用`then()`. 查看请求以获取更多信息、使用模式和最小测试文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-06T21:33:16.223

**根据[CasperJS 文档](http://docs.casperjs.org/en/latest/modules/casper.html#then)：**

### `then()`

**签名：** `then(Function then)`

> 通过提供一个简单的函数，此方法是向堆栈添加新导航步骤的标准方法：

```
casper.start('http://google.fr/');

casper.then(function() {
  this.echo('I\'m in your google.');
});

casper.then(function() {
  this.echo('Now, let me write something');
});

casper.then(function() {
  this.echo('Oh well.');
});

casper.run(); 
```

> 您可以根据需要添加任意数量的步骤。请注意，当前`Casper`实例`this`会在步骤函数中自动为您绑定关键字。
> 
> 要运行您定义的所有步骤，请调用该[`run()`](http://docs.casperjs.org/en/latest/modules/casper.html#run)方法，然后瞧。
> 
> **注意：**您必须[`start()`](http://docs.casperjs.org/en/latest/modules/casper.html#start)使用 casper 实例才能使用该`then()`方法。
> 
> **警告：**添加到的阶跃函数*`then()`*在两种不同的情况下进行处理：
> 
> 1.  当上一个 step 函数已经执行时，
> 2.  当先前的主 HTTP 请求已执行并*加载*页面时；
> 
> 请注意，没有单一的*页面加载*定义；是在触发 DOMReady 事件的时候吗？是“所有请求都已完成”吗？是“正在执行所有应用程序逻辑”吗？还是“正在渲染的所有元素”？答案总是取决于上下文。因此，为什么鼓励您始终使用[`waitFor()`](http://docs.casperjs.org/en/latest/modules/casper.html#waitfor)家庭方法来明确控制您的实际期望。
> 
> 一个常见的技巧是使用[`waitForSelector()`](http://docs.casperjs.org/en/latest/modules/casper.html#waitforselector)：

```
casper.start('http://my.website.com/');

casper.waitForSelector('#plop', function() {
  this.echo('I\'m sure #plop is available in the DOM');
});

casper.run(); 
```

* * *

**在幕后，[源代码`Casper.prototype.then`](https://github.com/casperjs/casperjs/blob/master/modules/casper.js#L1989)如下所示：**

```
/**
 * Schedules the next step in the navigation process.
 *
 * @param  function  step  A function to be called as a step
 * @return Casper
 */
Casper.prototype.then = function then(step) {
    "use strict";
    this.checkStarted();
    if (!utils.isFunction(step)) {
        throw new CasperError("You can only define a step as a function");
    }
    // check if casper is running
    if (this.checker === null) {
        // append step to the end of the queue
        step.level = 0;
        this.steps.push(step);
    } else {
        // insert substep a level deeper
        try {
            step.level = this.steps[this.step - 1].level + 1;
        } catch (e) {
            step.level = 0;
        }
        var insertIndex = this.step;
        while (this.steps[insertIndex] && step.level === this.steps[insertIndex].level) {
            insertIndex++;
        }
        this.steps.splice(insertIndex, 0, step);
    }
    this.emit('step.added', step);
    return this;
}; 
```

* * *

**解释：**

换句话说，`then()`安排导航过程中的下一步。

当`then()`被调用时，它被传递一个函数作为参数，该参数将作为一个步骤调用。

它检查一个实例是否已经启动，如果没有，它会显示以下错误：

```
CasperError: Casper is not started, can't execute `then()`. 
```

接下来，它检查`page`对象是否为`null`.

如果条件为真，Casper 将创建一个新`page`对象。

之后，`then()`验证`step`参数以检查它是否不是函数。

如果参数不是函数，则会显示以下错误：

```
CasperError: You can only define a step as a function 
```

然后，该函数检查 Casper 是否正在运行。

如果 Casper 未运行，`then()`则将该步骤附加到队列的末尾。

否则，如果 Casper 正在运行，它会插入一个比上一步更深的子步骤。

最后，该`then()`函数通过发出一个[`step.added`](http://docs.casperjs.org/en/latest/events-filters.html#step-added)事件结束，并返回 Casper 对象。

# ruby-on-rails - 如何在 rails_admin 中为链接的 has_many_association 表显示不同的列

> ID：11604615
> 
> 赞同：0
> 
> 时间：2012-07-22T22:50:35.097
> 
> 标签：ruby-on-rails, ruby, rails-admin

我有一个与**Result**有 has_many_association 关系的表**Match**，在 rails_admin 默认是将 Result 的id**放在****匹配**页面中。我真正想要的是显示的**player_id**，但链接是指向**id**的链接，这样我可以更好地了解那场比赛中发生的事情，但仍然可以点击查看结果。

 ******简而言之：如何更改 rails_admin 中相关表的显示列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:22:37.370

Rails_admin 在这里没有错。我的联想错了。一旦修复了 rails admin 就完美地选择了这些名称。******

# php - 谷歌结帐 IPN

> ID：11604621
> 
> 赞同：0
> 
> 时间：2012-07-22T22:51:38.870
> 
> 标签：php, paypal, paypal-ipn, google-checkout

我已经设置了一个“立即购买”按钮，该按钮具有设定值，并将其正确发送到 Google 服务器，并显示“立即付款”页面等。我还使用商家私人数据或其他任何名称发送附加参数。

我做这一切的方式是通过 cURL，所以用户无法在我发现并停止它的情况下强制降低费用。（对所有输入等进行验证）。

因此，由于我正在传递所有这些数据。我需要一种方法来将其全部取回，而我目前不确定该怎么做。

我已经阅读了文档，只是被它们弄糊涂了。

我知道我需要确定它是否可以收费，如果可以，然后自动为他们处理费用。但是有没有办法让这种情况发生，然后当我收到钱时，我可以用我发送给他们的额外数据更新数据库？如果是这样，我该怎么做？

这是我当前的代码：

```
$fields = array(
            'item_name_1'=>urlencode($name),
            'item_description_1'=>urlencode($name . ' of [xxx]'),
            'item_quantity_1'=>urlencode('1'),
            'item_price_1'=>urlencode($value),
        'item_currency_1'=>urlencode('GBP'),
        '_charset_'=>'utf-8',
    'shopping-cart.merchant-private-data' => '[username]',
    'shopping-cart.items.item-1.digital-content.description' => 'Your account has been upgraded. &#xa;&#xa;
    'shopping-cart.items.item-1.digital-content.email-delivery' => 'true'
             );
$fields_string = "";
foreach($fields as $key=>$value)
        {
    $fields_string .= $key.'='.$value.'&'; 
    }
rtrim($fields_string,'&');
$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,'https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/8048xxx');
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
curl_setopt($ch,CURLOPT_USERAGENT,$_SERVER['HTTP_USER_AGENT']);
curl_setopt($ch,CURLOPT_FOLLOWLOCATION,true);
$result = curl_exec($ch);
curl_close($ch); 
```

用于 Google 结帐的过程（当他们点击立即购买按钮时）

这是当前不起作用的“处理”代码。

```
if(isset($_POST['serial-number'])){
    // new order made
    $sn = $_POST['serial-number'];
    $id = '804xxx';
    $key = 'xxxxx';

    $fields = array('_type'=>'notification-history-request',
                    'serial-number'=>urlencode($sn));

                    $fields_string = "";
                    foreach($fields as $key=>$value) {
                         $fields_string .= $key.'='.$value.'&'; 
                    }

                    rtrim($fields_string, '&');

                    $ch = curl_init();
                    curl_setopt($ch, CURLOPT_URL, 'https://checkout.google.com/api/checkout/v2/reportsForm/Merchant/8048xxx');
                    curl_setopt($ch, CURLOPT_POST, count($fields));
                    curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);

                    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Basic ' . base64_encode($id . ':' . $key), 'Content-Type: application/xml;charset=UTF-8', 'Accept: application/xml;charset=UTF-8'));
                    $result = curl_exec($ch);
                    if(curn_errno($ch)){
                        $w = fopen('log.text', 'w+');
                        fwrite($w, 'Error: ' . curl_error($ch));
                        fclose($w);
                    } else {
                        $status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
                        $f = fopen('test.txt', 'w+');
                        fwrite($f, 'Status: ' . $status . ' ' . print_r($result, true));
                        fclose($f);
                    }
                    curl_close($ch);
   } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:08:51.913

要取回订单状态信息和商家私人数据，您需要收听发送到回调 URL 的通知。请参阅下面的文档，了解如何与 Checkout Notifications API 集成。

[http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=70647](http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=70647)

[http://support.google.com/checkout/sell/bin/answer.py?hl=zh-CN&answer=134463](http://support.google.com/checkout/sell/bin/answer.py?hl=en-GB&answer=134463)

[https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API)

当您收到通知时，请从商家私有数据字段中读取您的自定义数据。

有关类似问题的解决方案，请参阅此[答案。](https://stackoverflow.com/questions/3333835/google-checkout-xml-api-associate-callback-serial-number-with-original-order)

您可能还想查看各种语言的 Checkout 示例代码库：

[https://developers.google.com/checkout/samplecode](https://developers.google.com/checkout/samplecode)

# c - 如何在 chroot 监狱中执行 linux 命令

> ID：11604622
> 
> 赞同：0
> 
> 时间：2012-07-22T22:51:44.843
> 
> 标签：c, unix, chroot

我需要编写一个被监禁的命令执行器，它需要执行 linux 命令，我尝试将 /bin 复制到我的新根目录，但 system()（例如 system("ls")）仍然不起作用。我已经阅读了有关复制库的信息，但是还有其他方法可以执行不涉及复制内容的 linux 命令吗？

此外（也许更重要），有一种方法可以让非 root 的被监禁进程执行 linux 命令？

谢谢，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T22:56:54.750

您复制到 chroot 环境的二进制文件必须是静态链接的，或者您还需要复制必要的共享库 ( `/lib`/ `/usr/lib`)。

非 root 进程可以像 root 进程一样在 chroot 环境中执行，但只有 root 进程可以调用`chroot()`，因此您需要让 root 进程设置 chroot 环境，然后切换到非特权用户 ID。

# css - 溢出没有足够的溢出

> ID：11604623
> 
> 赞同：0
> 
> 时间：2012-07-22T22:51:46.557
> 
> 标签：css, html, overflow

我有一段代码，其中包含需要适合固定大小的 div 的样式图像。如果没有，它应该流过。但是，不适合的浮动元素会按应有的方式流过，但会接触其他元素并将其自身置于其中一个阴影上。

最好用一个例子来解释：http: [//jsfiddle.net/wjw83/10/](http://jsfiddle.net/wjw83/10/)

第 7 张图像（几乎不可见）应该完全消失，或者在移出可见区域的位置进一步向下移动。谁能帮我完成这个？

谢谢你。

*编辑*

由于没有想法并且处于愤怒的边缘，我开始粘贴随机属性并最终成功。

已解决：http: [//jsfiddle.net/wjw83/13/](http://jsfiddle.net/wjw83/13/)

我所要做的就是添加“margin-bottom: 20px;” 到图像类。由于它与阴影的值相同，因此它会在完全移除被剪裁的元素的同时保持阴影完好无损。哇哦！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:05:27.783

```
.main{
    padding-top: 15px;
    width: 870px;
    height: 140px; /* Reduced height */
    overflow:hidden;
} 
```

**现场演示：[小提琴](http://jsfiddle.net/wjw83/12/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:47:19.113

由于没有想法并且处于愤怒的边缘，我开始粘贴随机属性并最终成功。

已解决：http: [//jsfiddle.net/wjw83/13/](http://jsfiddle.net/wjw83/13/)

我所要做的就是添加“margin-bottom: 20px;” 到图像类。由于它与阴影的值相同，因此它会在完全移除被剪裁的元素的同时保持阴影完好无损。哇哦！

# android - Android - 如何更改 ScrollView/ListView Overscroll 的颜色？（例如，请参阅描述）

> ID：11604624
> 
> 赞同：5
> 
> 时间：2012-07-22T22:51:53.877
> 
> 标签：android

> **可能重复：**
> [在 android 的滚动视图中更改过度滚动的颜色](https://stackoverflow.com/questions/9062616/changing-the-color-of-over-scroll-in-scrollview-in-android)

我想问，如果有人知道如何改变这个“过度滚动”的颜色？我知道你可以通过调用来摆脱它`setOverscrollmode="never"`。但是你如何改变它的颜色呢？

这是图片，所以你知道我的意思：

![在此处输入图像描述](../Images/b252136a071b657c887a36153e46ecd0.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:00:17.863

在您的 xml 中使用以下属性`ListView`

```
 android:overScrollHeader="@drawable/the_header"
 android:overScrollFooter="@drawable/the_footer" 
```

或者您也可以以编程方式执行此操作：

```
SetOverscrollHeader(R.drawable.the_header);
setOverscrollFooter(R.drawable.the_footer); 
```

这些方法和属性仅从 API 9 开始可用；它们不适用于以前的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:57:33.493

尝试这个：

```
<ListView
      ...
      android:overScrollHeader="@drawable/header"
      android:overScrollFooter="@drawable/footer"/> 
```

# php - 如何自动添加一些东西来价值 $address？

> ID：11604626
> 
> 赞同：0
> 
> 时间：2012-07-22T22:52:07.527
> 
> 标签：php, forms

我有这个：

```
echo '<input type="text" id="address" name="address" value="'.$address.'" />'; 
```

当您在搜索表单中输入您的地址（我的地址）并点击“搜索”按钮时，我想在链接中自动搜索添加城市名称和国家，链接看起来像 .../index.php?address=my+adress+citiname +县。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:56:04.580

那么只需`method="get"`在 post 字段中使用 a ，它就会将字段转储到 URL 中？

```
<form action="" method="get">
    <input  type="text" name="myAddress">
    <input type="text" name="city">
    <input type="text" name="county">
    <input type="submit" value="Go Search">
</form> 
```

如果您不想添加字段，则需要解析该`myAddress`字段并使用 a`meta redirect`填充您从其地址解析的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:58:42.723

它会更直接：

*   在 index.php 中添加城市名称和国家，如果它们在 _SESSION 中是已知的

或者：

*   在表单中添加一个（可能是隐藏的）带有城市名称和地址的字段，即使您会从表单中收到两个不同的值并需要合并它们

要**完全按照**您的意愿行事，您需要在提交之前修改查询；这样做是最简单的，例如，使用 jQuery。

# ios - 为什么委托/协议 Apple 首选的方法是关闭呈现的 UIViewControllers？

> ID：11604630
> 
> 赞同：0
> 
> 时间：2012-07-22T22:52:57.807
> 
> 标签：ios, cocoa-touch, uiviewcontroller

当 UIViewController 呈现另一个视图控制器时，呈现的视图控制器在 iOS 5 下关闭自身的最简单方法是调用：

```
[[self presentingViewController] dismissViewControllerAnimated:YES completion:NULL]; 
```

另一方面，Apple 的[View Controller Programming Guide](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)说：

> 当需要关闭呈现的视图控制器时，首选的方法是让呈现的视图控制器关闭它。换句话说，只要有可能，呈现视图控制器的同一个视图控制器也应该负责解除它。*尽管有几种技术可以通知呈现视图控制器其呈现的视图控制器应该被解除，但首选技术是委托。*

这导致这里的一些答案建议坚持制定新的协议和委托，即使只呈现一个非常简单的视图控制器。为什么这是文档的“首选技术”而不是上面的单行？使用委托/协议技术编写的代码大量增加的缺点是否有任何抵消优势？显然，如果需要将来自呈现视图控制器的信息传递回呈现视图控制器委托是一种很好的技术。然而，信息是委托的原因，而不是简单地从屏幕上删除呈现的视图控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:23:40.237

`[self dismissViewControllerAnimated:YES completion:nil]`（在 iOS 5 之前）可以实现相同的行为`[self dismissModalViewControllerAnimated:YES]`，因为一次总是最多（模态）呈现一个视图控制器。

然而，委托模式的重点是单个视图控制器可以以不同的方式呈现，例如模态或推送到导航堆栈。该视图控制器不知道它是如何呈现的（好吧，它可以弄清楚，但它不应该关心）。它应该做的唯一一件事就是通知它的父级，即委托，它的工作已经完成。然后委托决定如何移除视图控制器（关闭模式或从导航堆栈中弹出等），或者孩子应该留下来，因为它的工作结果不足。所以主要思想是视图控制器的可重用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:16:38.390

> [[self presentingViewController]dismissViewControllerAnimated:YES 完成:NULL];

这可能是最简单的，但通常不是很有用。

模态视图通常需要向调用者返回一些信息；这就是为什么它们是模态的。在更传统的 SDK 中，模式窗口会阻止调用者，直到模式窗口被关闭。然后将模态窗口的结果返回给调用者。例如：

```
int result = ShowModalDialog("Do you want to continue?");
if (result == kYes) 
{
    doSomething();
}
else
{
    return;
} 
```

在 UIKit 中，`-presentModalViewController:`不会阻塞，因此您需要一些其他机制让模态视图控制器将信息返回给呈现视图控制器。通常这是通过委派完成的，尽管还有其他方法（例如让呈现控制器处理左右 UINavigationBar 按钮）。

如果模态视图控制器需要向其呈现视图控制器返回一个值，那么这是通过委托完成的，在这种情况下，呈现控制器在收到结果后关闭模态控制器是有意义的。那是原来的模式。

# mobile - J2ME 的控制音量代码

> ID：11604631
> 
> 赞同：1
> 
> 时间：2012-07-22T22:52:58.480
> 
> 标签：mobile, java-me

我有 nokia xpressmusic 5130 c-2 在 symbian (j2me) 上工作，音量按钮坏了，所以我决定制作一个 j2me 程序来控制音量（增加，减少）

我通过互联网找到了很多代码，但由于不符合程序流程图和屏幕，经常无法正常工作或有很多错误

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:28:37.637

如果设备支持 JSR 256：Mobile Sensor API，那么您可以使用您的 API：http: [//jcp.org/en/jsr/detail ?id=256](http://jcp.org/en/jsr/detail?id=256)

我使用 JSR 256 的课程：

```
/*
 * REVISION HISTORY:
 *
 * Date         Author(s)
 * CR           Headline
 * =============================================================================
 * 22/Oct/2009  Douglas Daniel Del Frari
 * <CR51674>    Initial Version             
 * =============================================================================
 * 25/Feb/2010  Douglas Daniel Del Frari
 * <CR52577>    Added more one sensor (charge state) to detection of charger state.             
 * =============================================================================
 */

package j2me.mobilesensor;

import java.io.IOException;

import javax.microedition.io.Connector;
import javax.microedition.sensor.Data;
import javax.microedition.sensor.DataListener;
import javax.microedition.sensor.SensorConnection;
import javax.microedition.sensor.SensorInfo;
import javax.microedition.sensor.SensorManager;

/**
 * This class uses the resource of the mobile sensor (JSR-256) to capture the
 * phone battery level, and the volume level of the phone
 * 
 * @author Douglas D. Del Frari (douglas.frari@gmail.com)
 */
public class MobileSensorManager implements DataListener, Runnable{
    /** ID for the alert dialog */
    public static final int ID_DIALOG_BATTERY_CHARGE = 90;

    /**
     * String used to get the battery charge level. 
     */
    private static final String BATTERY = "battery_charge";

    /**
     * String used to get the charger state (plugged on or off). 
     */
    private static final String BATTERY_CHARGER_STATE = "charger_state";

    /**
     * String used to get the sound level 
     */
    private static final String SOUND_LEVEL = "sound_level_setting";

    // sensors 
    private static SensorConnection batterySensor = null;
    private SensorConnection soundSensor = null;

    // SensorInfo objects containing info about
    private SensorInfo infos[]; 

    // Is sensor thread running?
    private static boolean isStopped = false; 

    // Buffer for the sensor data
    private static final int BUFFER_SIZE = 1;

    /**
     * Indicate the minimal value of battery level of the game
     */
    public static final int BATTERY_LIFE_LIMIT = 25;

    // Thread for initializing and listening
    private Thread thread = null; 

    /*
     * Sensor quantity string received from the dataReceived() method
     */
    private String sensorString = ""; 

    // Sensor value (battery_charge)
    private String batteryString = "";
    private String volumeString = "";

    private boolean isActiveBatterySensor; 
    private boolean isLowBatteryCharge;
    private int batteryChargeValue;
    private int volumeValue;

    private SensorConnection batteryChargerState;

    private boolean chargeState;

    // instance this class
    private static MobileSensorManager instance;

    /**
     * default constructor
     */
    private MobileSensorManager() {
    }

    /**
     * Get the MobileSensorManager instance
     * 
     * @return instance this
     */
    public static MobileSensorManager getInstance() {
        if (instance == null) {
            instance = new MobileSensorManager();
        }

        return instance;
    }

    /**
     * @param stopped
     */
    private synchronized void setStopped(boolean stopped) {
        isStopped = stopped;
        notify();
        if (thread != null)
            thread = null;
    }

    /**
     * start the mobile sensors
     */
    public synchronized void start() {
        setStopped(false);
        if (thread == null)
            thread = new Thread(this);
        thread.start();
    }

    /**
     * stop the mobile sensors
     */
    public synchronized  void stop() {
        setStopped(true);
        thread = null;
    }

    /* (non-Javadoc)
     * @see java.lang.Runnable#run()
     */
    public void run() {
        initSensors();
    }

    /**
     * Initializes (opens) the sensors and sets the DataListener. Takes also
     * care of removing the DataListeners and closing the connections
     */
    private synchronized void initSensors() {
        batterySensor = openSensor(BATTERY);
        if (batterySensor == null) {
            isActiveBatterySensor = false;
            return;
        } else {
            isActiveBatterySensor = true;
        }

        batteryChargerState = openSensor(BATTERY_CHARGER_STATE);
        soundSensor = openSensor(SOUND_LEVEL);

        try {
            batterySensor.setDataListener(this, BUFFER_SIZE);
            if (soundSensor !=null) {
                soundSensor.setDataListener(this, BUFFER_SIZE);
            }

            if (batteryChargerState != null) {
                batteryChargerState.setDataListener(this, BUFFER_SIZE);
            }

            while (!isStopped) {
                try {
                    wait();
                } catch (InterruptedException ie) {
                }
            }
            batterySensor.removeDataListener();

            if (soundSensor !=null) {
                soundSensor.removeDataListener();
            }

            if (batteryChargerState != null) {
                batteryChargerState.removeDataListener();
            }

        } catch (IllegalMonitorStateException imse) {
            imse.printStackTrace();
        } catch (IllegalArgumentException iae) {
            iae.printStackTrace();
        }
        try {
            if (batterySensor!=null) {
                batterySensor.close();
            }
            if (soundSensor !=null) {
                soundSensor.close();
            }

            if (batteryChargerState != null) {
                batteryChargerState.close();
            }

        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
        if (isStopped) {
            batterySensor = null;
            soundSensor = null;
            batteryChargerState = null;
        }
    }

    /**
     * Searches sensors of desired quantity and if found returns a
     * SensorConnection opened to it.
     * 
     * @return SensorConnection, which has been opened to a sensor matching the
     *         criteria
     */
    private SensorConnection openSensor(String quantity) {
        infos = SensorManager.findSensors(quantity, null);
        if (infos.length == 0)
            return null;
        String sensor_url = infos[0].getUrl();
        try {
            return (SensorConnection) Connector.open(sensor_url);
        } catch (IOException ioe) {
            ioe.printStackTrace();
            return null;
        }
    }

    /* (non-Javadoc)
     * @see javax.microedition.sensor.DataListener#dataReceived(javax.microedition.sensor.SensorConnection, javax.microedition.sensor.Data[], boolean)
     */
    public void dataReceived(SensorConnection sensor, Data[] data, boolean isDataLost) {

        sensorString = sensor.getSensorInfo().getQuantity();
        int values[] = data[0].getIntValues();
        if (sensorString.equals(BATTERY)) {
            setBatteryString("" + values[0] + "%");
            batteryChargeValue = values[0];
        }

        if (sensorString.equals(SOUND_LEVEL)) {
            setVolumeString("" + values[0] + " sound level");
            volumeValue = values[0];
        }

        if (sensorString.equals(BATTERY_CHARGER_STATE)) {
            int value = values[0];
            if (value == 0)
                chargeState = false;
            else if (value == 1)
                chargeState = true;
        }

        if (values[0] <= BATTERY_LIFE_LIMIT) {
            isLowBatteryCharge = true;
        } else {
            isLowBatteryCharge = false;
        }

    }

    /**
     * @return the batteryString
     */
    public String getBatteryString() {
        return batteryString;
    }

    /**
     * @param batteryString the batteryString to set
     */
    public void setBatteryString(String batteryString) {
        this.batteryString = batteryString;
    }

    /**
     * @return the isLowBatteryCharge
     */
    public boolean isLowBatteryCharge() {
        return isLowBatteryCharge;
    }

    /**
     * @return the isActiveBatterySensor
     */
    public boolean isActiveBatterySensor() {
        return isActiveBatterySensor;
    }

    /**
     * @return the batteryChargeValue
     */
    public int getBatteryChargeValue() {
        return batteryChargeValue;
    }

    /**
     * @param volumeString the volumeString to set
     */
    public void setVolumeString(String volumeString) {
        this.volumeString = volumeString;
    }

    /**
     * @return the volumeString
     */
    public String getVolumeString() {
        return volumeString;
    }

    /**
     * @param volumeValue the volumeValue to set
     */
    public void setVolumeValue(int volumeValue) {
        this.volumeValue = volumeValue;
    }

    /**
     * @return the volumeValue
     */
    public int getVolumeValue() {
        return volumeValue;
    }

    /**
     * Get state of battery charge
     * 
     * @return True if the charge is plugged in, otherwise not plugged in
     */
    public boolean isChargedState() {

        return chargeState;

    }

} 
```

# image-processing - 'cvFindContours' 未在此范围内声明，opencv 2.4.2，编译错误

> ID：11604632
> 
> 赞同：2
> 
> 时间：2012-07-22T22:52:59.930
> 
> 标签：image-processing, opencv, compiler-errors, eclipse-cdt

我正在使用 opencv 2.4.2 库检测边缘并在图像上查找四边形形状。一切都很顺利，直到我得到这些编译错误

```
../src/GoodFeaturesToDetect.cpp:198:109: error: ‘cvFindContours’ was not declared in this scope
../src/GoodFeaturesToDetect.cpp:203:106: error: ‘cvContourPerimeter’ was not declared in this scope
../src/GoodFeaturesToDetect.cpp:203:114: error: ‘cvApproxPoly’ was not declared in this scope
../src/GoodFeaturesToDetect.cpp:206:64: error: ‘cvContourArea’ was not declared in this scope 
```

这是我的标题：

```
#include <opencv2/core/core.hpp>
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <stdlib.h>
#include <iostream>
#include <stdio.h>
#include <stdlib.h>

using namespace cv;
using namespace std;

void DrawLine( Mat img, Point start, Point end );
vector<Point2f> FindCornersUsingGoodFeaturesToTrack(Mat toTrack);
void ConnectPointsWithLine(Mat img,vector<Point2f> corners);
void DrawQuad(Mat img, Point a, Point b, Point c, Point d);
void DetectAndDrawQuads(Mat img); 
```

这是调用函数的方法

```
void DetectAndDrawQuads(Mat img){
        CvSeq* contours;
        CvSeq* result;
        CvMemStorage *storage=cvCreateMemStorage(0);
        Mat gray;
        cvtColor(img,gray,CV_BGR2GRAY);
        cvFindContours(&gray,storage, &contours, sizeof(CvContour),CV_RETR_LIST,CV_CHAIN_APPROX_SIMPLE, Point(0,0));

        //Loop through all the contours discovered
        //Figure out which ones form a quad
        while(contours){
            result=cvApproxPoly(contours, sizeof(CvContour),storage, CV_POLY_APPROX_DP,cvContourPerimeter(contours)*0.02,0);

        if(result->total=4 && fabs(cvContourArea(result, CV_WHOLE_SEQ)) > 20){
            CvPoint *pt[4];
            for(int i=0; i<4; i++)
                pt[i]=(CvPoint*) cvGetSeqElem(result,i);

            DrawQuad(gray,*pt[0],*pt[1],*pt[2],*pt[3]); 

        }
        contours = contours->h_next;
        }

} 
```

DetectAndDrawQuads 被 main() 调用。

这是链接的库

```
opencv_contrib opencv_flann opencv_legacy opencv_calib3d opencv_ml opencv_imgproc opencv_highgui opencv_objdetect opencv_core opencv_features2d 
```

我正在研究 Eclipse CDT (Helois)

我会很感激任何提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:57:31.963

首先，您应该使用`#include <>`opencv 标头（例如您的第一行，与第二行和第三行相反）。

`cv`以like开头的方法`cvFindContours`来自较旧的 opencv C 接口，并与较新的 C++ 接口分开。例如`cvFindContour`定义在`opencv2/imgproc/imgproc_c.h`而不是在`opencv2/imgproc/imgproc.hpp`（注意`_c.h`部分）。

在旁注中，您已经包含`stdlib.h`了两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:36:55.083

事实证明，我调用的方法来自 openCv 2.0。我不得不将 cvFindContours 更改为 findContours(...)，将 cvApproxPoly 更改为 approxPolyDP 等等，如 OpenCV 2.4.2 中所述。

# architecture - 如何处理基于队列的系统中的消费者失败？

> ID：11604636
> 
> 赞同：1
> 
> 时间：2012-07-22T22:54:24.873
> 
> 标签：architecture, message-queue, batch-processing

我有一个相当概念性的问题，我希望不会被认为太笼统或太愚蠢:)

在数据项需要经过许多步骤的应用程序中（例如 - 第 1 步 - 从 CSV 文件解析并生成报告，第 2 步 - 然后根据上一步生成的报告运行报告等），让我们假设处理是使用持久队列实现的，这样当发现新的原始文件时，会在队列中放置一条消息，要求处理所述文件。消息由处理文件的消费者选择，并将另一条消息放入队列中，以便下一步处理等。

我的问题是 - 处理此过程中的故障的最佳做法是什么？假设第 1 步的消费者完全失败。

在基于队列的架构上实现这样的批处理是否完全符合逻辑/效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:05:21.457

是的，队列没问题，您还需要一个错误队列，您可以在其中将消息放在有问题的文件和记录上

请注意，完全失败是一种简单的情况，因为您可以稍后重新处理整个文件（如果它是一个临时问题）或忽略该文件（如果它有故障）。更严重的问题是部分失败，其中一些记录有问题。

如果一个步骤的失败意味着必须以某种方式撤消其他步骤，那么您可能希望将其作为一个[saga](http://rgoarchitects.bit.ly/4xNwpp)来实现。如果您想更好地控制流程，您可能需要考虑编排

# javascript - 在 disqus 评论脚本中更改语言

> ID：11604638
> 
> 赞同：3
> 
> 时间：2012-07-22T22:54:46.160
> 
> 标签：javascript, translation, disqus

我想使用带有阿拉伯语的 disqus 评论脚本 (disqus.com) 我将此代码添加到我的网页

```
<script type="text/javascript">
var disqus_config = function () { 
  this.language = "ar";
};
</script> 
```

但它没有转换成阿拉伯语！请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T21:54:22.097

如果您使用 WordPress，您可以安装插件[Disqus Language](https://wordpress.org/plugins/disqus-language/)，它会自动检测页面语言并以该语言显示 Disqus，一个主要的好处是它是一个服务器解决方案，即前端没有添加 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:53:36.977

只需转到 admin/settings（diqus 门户），然后在选项卡 General 中禁用带有“为您的站点启用 Disqus 2012 功能”标签的复选框，保存更新，仅此而已。

语言包似乎不适用于最后一个版本。

# android - Android应用项目和Android项目的区别

> ID：11604641
> 
> 赞同：3
> 
> 时间：2012-07-22T22:55:11.350
> 
> 标签：android, eclipse, java-7

我是一个开始学习android应用程序开发的初学者。我通过的大多数教程都显示了获取“Android 项目”选项的屏幕截图，但是我得到的选项显示“Android 应用程序项目”。我只是想知道这两者之间是否有区别。我正在运行 Windows 7 Pro 64 位和 Eclipse Juno 以及 Java 7 和 Android 4.1 SDK。我看到的教程通常都有所有软件的旧版本。所以，跟随他们对我来说有点困惑。我想这些是初学者的出牙问题。有人可以通过向我推荐可以帮助像我这样的初学者的参考资料来帮助我绕过它们吗？只是这样我就不会再碰到这样的颠簸了。调色板视图和其他一切似乎也不相同。这可能是我感到困惑的原因。感谢您的时间。非常感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T23:02:48.210

> 我只是想知道这两者之间是否有区别。

“Android Application Project”或多或少是“Android Project”的新名称。有些东西被移到了其他向导中（例如，“来自现有源的 Android 项目”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T08:22:03.427

android 简单项目和新版本 Sdk 中的应用程序项目没有区别 Android 应用程序项目是否存在差异意味着简单项目默认值采用 Android 版本和 Sdk 但在应用程序项目中有机会手动获取这些东西

# php - 所有 PHP 页面都显示为完全空白

> ID：11604648
> 
> 赞同：0
> 
> 时间：2012-07-22T22:56:53.420
> 
> 标签：php, ubuntu, apache2

我编写了一个网站，无需详细了解它，但它可以工作并且不需要任何数据库或类似的东西。但是在我的新 Ubuntu 10.04.4 LTS 服务器上，所有 PHP 页面都显示为空白。我已经使用以下命令安装了 Apache2、PHP5 和一些我不知道它的用途：

```
sudo apt-get install apache2
sudo apt-get install php5
sudo apt-get install libapache2-mod-php5
sudo /etc/init.d/apache2 restart 
```

我试图在没有运气的情况下卸载并重新安装所有这些组件。PHP 页面都没有出现在我的浏览器中，它们显示为空白并带有空白源，而我所有的纯 .html 页面都可以正常工作。

有什么办法让它工作，我很乐意发布更多信息，但我不知道我应该从哪里得到。

**错误日志：**

```
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/apache2/conf.d/mcrypt.ini on line 1 in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/curl.so' - /usr/lib/php5/20090626/curl.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/gd.so' - /usr/lib/php5/20090626/gd.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mcrypt.so' - /usr/lib/php5/20090626/mcrypt.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mysql.so' - /usr/lib/php5/20090626/mysql.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mysqli.so' - /usr/lib/php5/20090626/mysqli.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/pdo_mysql.so' - /usr/lib/php5/20090626/pdo_mysql.so: cannot open shared object file: No such file or directory in Unknown on line 0
[Mon Jul 23 00:36:05 2012] [notice] Apache/2.2.14 (Ubuntu) PHP/5.3.2-1ubuntu4.15 with Suhosin-Patch configured -- resuming normal operations
[Mon Jul 23 00:36:16 2012] [error] [client 217.227.25.35] PHP Parse error:  syntax error, unexpected ')' in /var/www/vtest5532/Header.php on line 19
[Mon Jul 23 00:36:17 2012] [error] [client 217.227.25.35] PHP Parse error:  syntax error, unexpected ')' in /var/www/vtest5532/Header.php on line 19
[Mon Jul 23 00:38:09 2012] [notice] caught SIGTERM, shutting down
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/apache2/conf.d/mcrypt.ini on line 1 in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/curl.so' - /usr/lib/php5/20090626/curl.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/gd.so' - /usr/lib/php5/20090626/gd.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mcrypt.so' - /usr/lib/php5/20090626/mcrypt.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mysql.so' - /usr/lib/php5/20090626/mysql.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mysqli.so' - /usr/lib/php5/20090626/mysqli.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/pdo_mysql.so' - /usr/lib/php5/20090626/pdo_mysql.so: cannot open shared object file: No such file or directory in Unknown on line 0
[Mon Jul 23 00:38:10 2012] [notice] Apache/2.2.14 (Ubuntu) PHP/5.3.2-1ubuntu4.15 with Suhosin-Patch configured -- resuming normal operations
[Mon Jul 23 00:38:59 2012] [error] [client 180.76.5.62] File does not exist: /var/www/Forum
[Mon Jul 23 01:10:36 2012] [error] [client 66.249.68.165] File does not exist: /var/www/Forum
[Mon Jul 23 01:10:36 2012] [error] [client 66.249.68.165] File does not exist: /var/www/Forum 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:07:04.090

PHP 默认配置为不显示错误。如果您检查 Apache 错误日志，`/var/log/apache2/error.log`您应该会看到问题的原因。如果这是一台开发机器，您还应该将`php.ini`文件更改为对开发人员更友好的设置（`error_reporting`最多显示错误）。如果它是生产服务器，则保留 php.ini 原样。

# jquery - 如何在此代码上使用 .each 进行迭代？

> ID：11604650
> 
> 赞同：-1
> 
> 时间：2012-07-22T22:57:13.850
> 
> 标签：jquery

还在学习中，需要一些帮助。

此代码示例检查 url 的有效性：

```
function check_URL() {
var url = "http://" + localStorage['t'] + ".somewhere.com";

$.getJSON("http://query.yahooapis.com/v1/public/yql?"+
            "q=select%20*%20from%20html%20where%20url%3D%22"+
            encodeURIComponent(url)+
            "%22&format=xml'&callback=?",
    function(data){
      if(data.results[0]){
        console.log("yes");
      } 
      else { 
      console.log("no");
      alert(url + " is not a valid URL or is down.");

     }
    }
  );

}; 
```

它完全符合我的要求（我在这里找到了它！）。但是，我也需要检查其他网址。

我怎么能用 .each 做到这一点？我对这些东西太陌生了，一个例子将有助于我的学习。

此外，如果有帮助，示例中使用的“某处”域将始终相同。

**更新：**感谢蒂亚戈，他帮助我指明了正确的方向。

```
function check_URL() {

var url = "http://" + localStorage['t'] + ".somewhere.com";
var url1 = "http://" + localStorage['t1'] + ".somewhere.com";
var url2 = "http://" + localStorage['t2'] + ".somewhere.com";
var url3 = "http://" + localStorage['t3'] + ".somewhere.com";

var urlArray = ['url', 'url1', 'url2','url3'];
$(urlArray).each(function (urlItem) {
$.getJSON("http://query.yahooapis.com/v1/public/yql?"+
            "q=select%20*%20from%20html%20where%20url%3D%22"+
            encodeURIComponent(urlItem)+
            "%22&format=xml'&callback=?",
    function(data){
      if(data.results[0]){
        console.log("yes");
      } 
      else { 
      console.log("no");
      alert(url + " is not a valid URL or is down.");

     }
    }
  );
});
}; 
```

这似乎找到了任何未验证但警报已损坏的网址。

想法？

谢谢！

**最后更新：**下面发布的工作解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:06:11.387

```
var urlArray = ['url', 'url1', 'url2'];
$(urlArray).each(function (urlItem) {
    //do your stuff with your urlItem string
}); 
```

[http://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T02:35:21.717

这是我使用的解决方案。感谢@BaylorRae' 的指导！

```
function check_URL() {

  var url = "http://" + localStorage['t'] + ".somewhere.com";
  var url1 = "http://" + localStorage['t1'] + ".somewhere.com";
  var url2 = "http://" + localStorage['t2'] + ".somewhere.com";
  var url3 = "http://" + localStorage['t3'] + ".somewhere.com";

  var urlArray = [url, url1, url2, url3],
      invalidUrls = [];

  $.each(urlArray, function (i, urlItem) {
    $.getJSON("http://query.yahooapis.com/v1/public/yql?"+
    "q=select%20*%20from%20html%20where%20url%3D%22"+
    encodeURIComponent(urlItem)+
    "%22&format=xml'&callback=?",
    function(data){
      if(data.results[0]){
        console.log("yes");
      } 
      else { 
        invalidUrls.push(urlItem);
      }
    }
    );
  });

  return invalidUrls;
}; 
```

# python - 如何在 Python3 中添加带有标志的命令行参数？

> ID：11604653
> 
> 赞同：19
> 
> 时间：2012-07-22T22:57:32.970
> 
> 标签：python, command-line, python-3.x, arguments

我必须从命令行输入参数，即用户名、密码和数据库名称。我知道如何在不使用标志的情况下做到这一点，方法`sys.argv`如下：

```
##Test.py
hostname = str(sys.argv[1])
username = str(sys.argv[2])
password = str(sys.argv[3])

def ConnecttoDB():
    try:
        con=sql.connect(host=hostname, user= username, passwd= password)
        print ('\nConnected to Database\n')

# If we cannot connect to the database, send an error to the user and exit the program.
    except sql.Error:
        print ("Error %d: %s" % (sql.Error.args[0],sql.Error.args[1]))
        sys.exit(1)

    return con 
```

因此，它可以运行为：

```
$test.py DATABASE USERNAME PASWORD 
```

但问题是我必须使用“标志”。因此，脚本可以像这样运行：

```
$test.py -db DATABSE -u USERNAME -p PASSWORD -size 20 
```

如何使用标志从命令行获取参数？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-22T23:18:41.040

python 3 库包括 3 个用于解析命令行的模块，因此无需额外添加到您的设置中。

你应该使用的是[argparse](http://docs.python.org/py3k/library/argparse.html)

```
import argparse
parser = argparse.ArgumentParser()

#-db DATABSE -u USERNAME -p PASSWORD -size 20
parser.add_argument("-db", "--hostname", help="Database name")
parser.add_argument("-u", "--username", help="User name")
parser.add_argument("-p", "--password", help="Password")
parser.add_argument("-size", "--size", help="Size", type=int)

args = parser.parse_args()

print( "Hostname {} User {} Password {} size {} ".format(
        args.hostname,
        args.username,
        args.password,
        args.size
        )) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-23T18:52:40.427

首先感谢 Mark 提供的 'argparse' 代码。我已经找到了从标志指定的命令行获取参数的方法。我正在粘贴下面的代码，该代码使用修改后的“标记”代码和一个小模块，该模块显示如何使用通过命令行收集的参数：

```
import argparse

parser = argparse.ArgumentParser()

#-db DATABASE -u USERNAME -p PASSWORD -size 20000
parser.add_argument("-host", "--hostname", dest = "hostname", default = "xyz.edu", help="Server name")
parser.add_argument("-db", "--database", dest = "db", default = "ding_dong", help="Database name")
parser.add_argument("-u", "--username",dest ="username", help="User name")
parser.add_argument("-p", "--password",dest = "password", help="Password")
parser.add_argument("-size", "--binsize",dest = "binsize", help="Size", type=int)

args = parser.parse_args()

print( "Hostname {} db {} User {} Password {} size {} ".format(
        args.hostname,
        args.db,
        args.username,
        args.password,
        args.binsize
        ))
def ConnectToDB():
    print ('Trying to connect to mySQL server')
    # Try to connect to the database
    try:
        con=sql.connect(host=args.hostname, user= args.username, passwd= args.password)
        print ('\nConnected to Database\n')

    # If we cannot connect to the database, send an error to the user and exit the program.
    except sql.Error:
        print ("Error %d: %s" % (sql.Error.args[0],sql.Error.args[1]))
        sys.exit(1)

    return con 
```

我关心的一个问题是如何使用从参数到代码的变量。为此需要做两件事

1.  将 'dest' 添加到 add_argument 行 ex dest ="username" 这意味着从命令行收集的值将分配给变量 'username'
2.  每当您使用“dest”中的此类命令行分配变量时，只需在变量 ex con=sql.connect(host=args.hostname, user= args.username, passwd= args.password) 之前添加“args”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-05T15:44:36.277

首先，安装 cli-args-system ：

```
linux: pip3 install cli-args-system
windows: pip install cli-args-system 
```

后：

```
from cli_args_system import Args

#for dont try to convert the host
args = Args(convert_numbers=False)

hostname = args.flag_str('h','hostname','host')
username = args.flag_str('u','user','username','password')
password = args.flag_str('p','password')

print(f'host: {hostname}')
print(f'username: {username}')
print(f'password: {password}') 
```

尝试：

```
python3 teste.py -h 1234 -user foo -p bar
-> 
host: 1234
username: foo
password: bar 
```

# java - 使用 Java 中的进程构建器生成多个进程

> ID：11604657
> 
> 赞同：1
> 
> 时间：2012-07-22T22:59:16.103
> 
> 标签：java, shell, processbuilder

我正在开发一个 Web 应用程序，其中我使用 Java 作为我的前端和 shell 作为我的后端。我在 shell 中处理很多文件。例如，如果我必须处理 100 个文件。我计划从 Java 应用程序中生成 4 个子进程。我读到了 process Builder 。但是我不清楚如何使用 start() 方法生成多个进程，然后等待所有进程完成并再次继续处理。任何关于这方面的想法都会对我非常有用。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:29:23.600

一般来说，start会`Runtime.exec(...)`代表你打电话。

一旦运行（在它自己的小进程中关闭），您可以通过进程输入和输出流与它交互。

在我自己的工作中，我监控输入和错误流。为此，我为每个流生成一个新线程，并通过该`stream.read()`方法监视吞吐量，并查找 -1 的返回结果以确定流何时完成。

我使用第三个“监视器”线程，它用于提供“waitFor”功能并帮助清理流线程。

我建议至少在单独的线程中读取输入和错误流，因为这允许您在不阻塞当前线程上下文的情况下监视进程。

如果你想等待进程退出，你应该使用`Process.waitFor()`（进程由`ProcessBuilder.start()`方法返回给你）。这将等待进程退出。此方法将返回进程的退出代码，这对于响应进程可能想要告诉您的错误很有用。

好吧，简而言之...

```
ProcessBuilder pb = new ProcessBuilder(new String[] {cmd, parameter1, parameter2, ...});
Process process = pb.start();

InputStream is = process.getInputStream();
InputStream isErr process.getErrorStream();

// Spawn some threads to process the streams

int exitValue = process.waitFor();

if (exitValue == 0) {

    System.out.println("All is good with the world");

} else {

    // Handle error     

} 
```

# optimization - 通过 fortran 中的静态变量执行性能

> ID：11604658
> 
> 赞同：6
> 
> 时间：2012-07-22T22:59:24.957
> 
> 标签：optimization, recursion, fortran

在 Fortran 中，如果不将子例程或函数明确声明为`recursive`. 一位 Fortran 程序员告诉我，正因为如此，编译器可以将静态存储分配给所有局部变量，从而提高程序的速度。我对这种说法感到非常惊讶，因为当今大多数处理器都针对快速引用堆栈进行了优化。我认为，从静态地址加载的局部变量可能会导致很多缓存未命中，因为与堆栈相反，其他子例程不使用静态地址。

静态地址的局部变量真的有加速吗？还有哪些其他优化可能禁止递归子例程和函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T01:12:58.727

您咨询的 Fortran 程序员有一些倒退 - 出现了对递归的限制，因为以前（假设的）编译器**只能**为任何变量分配静态存储。性能主要是一个无关紧要的考虑因素——尽管我想如果你根本不能做某事，那么你不太可能很快做到。

早期的 Fortran（F77 和更早版本）旨在允许整个程序的内存需求在程序运行之前由 fortran 处理器静态确定。这适合那个时代的一些有限的机器架构。在“必须能够通过静态分析计算总内存”限制的一般情况下，很难让递归（内存需求可能因程序输入而异）之类的东西工作 - 因此语言不允许这样做。

具体处理器如何实际实现语言取决于他们——如果他们想使用基于堆栈的 stoge 来处理局部变量，那么他们可以。在标准边界之外编写的 Fortran 程序员在历史上可能已经习惯于期望您从使用静态存储中获得的行为（非保存的变量在调用之间记住它们的值等），但是对底层实现敏感的程序不是符合标准。

（具有此限制的架构已被 F90 淘汰。该标准引入了几种方法，程序内存需求可以根据程序输入动态变化 - 显而易见的一种是 allocate 语句，但现在也允许使用自动变量。）

对于小的未保存的局部变量（标量），相关存储在堆栈上的速度很可能（假设硬件合理）更快。

区分能够递归的过程和那些不能递归的过程在今天仍有一​​些实际价值——如果局部变量很大（数组或长字符），那么它可能根本不适合堆栈。为了避免这种情况——如果一个过程没有被标记为递归并且数组的大小是已知的，那么 fortran 处理器可以使用静态存储。这避免了与动态内存分配相关的任何开销，这可能相当昂贵。如果过程被标记为递归（并且局部变量未保存）或数组的大小在编译时未知，那么 fortran 处理器别无选择 - 它要么希望数据适合堆栈，要么使用动态内存分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T23:54:43.910

这只是因为某些大型机 cpu 根本没有堆栈（例如 s/360）。编译器必须生成特殊代码来模拟它。因此，非递归函数确实包含更简单/更少的代码。我不知道这在今天是否仍然适用。

引用特定地址而不是堆栈上的位置并不意味着更多的缓存未命中。相反，静态地址简化了优化器的工作，因为它可以根据它们的使用情况将它们放在内存中。

# node.js - http.get 带有空格的网址

> ID：11604662
> 
> 赞同：6
> 
> 时间：2012-07-22T23:00:10.647
> 
> 标签：node.js

使用 node js 和图像下载器。我偶然发现了 urls 和 的问题，`http.get`如果 url 在查询中包含空格，这对我来说失败了。我设法通过自己转义 url 路径来解决这个问题。如果我使用`url.parse()`路径变量将在第一个空格处被截断。我的解决方案有效，但我想知道是否有更好的解决方案。

```
function downloadFileFromURL( file_url, callback ) 
{
    //-------------
    // really complicated way to get a http.get save path
    var protocol = url.parse( file_url).protocol;
    var host = url.parse( file_url ).host;
    var full_domain =  protocol + '//' + host;
    var escaped_path =  escape(file_url.substring( full_domain.length ));

    var options = {
        host: host
      , port: 80
      , path: escaped_path
    }

    var file_url_info = url.parse( file_url );
    var file_path = path.join( __dirname, 'images', path.basename(file_url) );

    var request = http.get( options , function(res){

        var imagedata = ''
        res.setEncoding('binary')

        res.on('data', function(chunk){
            imagedata += chunk;
        })

        res.on('end', function(){

            fs.writeFile( file_path, imagedata, 'binary', function(err){
                if (err) callback( err );
                else {
                    callback( null, file_path );
                }
            })
        })

    })
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T18:29:01.427

尝试运行它[`encodeURI`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI)。

```
var encoded_url = encodeURI(file_url); 
```

# function - 使用数组列表 作为参数类型为 ArrayList 的方法参数

> ID：11604663
> 
> 赞同：1
> 
> 时间：2012-07-22T23:00:13.663
> 
> 标签：function, inheritance, parameters, casting, arraylist

所以我有两节课。类`B`扩展类`A`。我正在创建一个`ArrayList`包含类型的对象`B`，所以列表是类型的`ArrayList<B>`。我想`ArrayList`在`useList`输入参数类型为`ArrayList<A>`. 按理说，既然`B`是 的子类`A`，它可以在任何地方使用`A`，包括在这个应用程序中。

但是，编译器似乎不喜欢这样（请参阅下面代码中的错误消息）。`ArrayList<B>`在将它传递给方法时，我也尝试`ArrayList<A>`将其转换为，但那个也不起作用。

代码：

```
public class Test {
    private class A { }
    private class B extends A { }
    public static void useList(ArrayList<A> aList) { }

    public static void main(String[] args) {

        ArrayList<B> bList = new ArrayList<B>();

        /* "The method test(ArrayList<Test.A>) in the type Test
         * is not applicable for the arguments (ArrayList<Test.B>)" */
        useList(bList); 

        /* "Cannot cast from ArrayList<Test.B> to ArrayList<Test.A>" */
        useList((ArrayList<A>)bList);
    }
} 
```

毫无疑问，我在做一些愚蠢的事情，所以任何建议都将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:13:59.110

只需声明一个带有扩展元素`useList`的类型参数：`ArrayList``A`

```
public static void useList(ArrayList<? extends A> aList) { } 
```

# ios - 如何同步添加新的 CALayer 对象与另一个对象的动画

> ID：11604664
> 
> 赞同：0
> 
> 时间：2012-07-22T23:00:15.887
> 
> 标签：ios, animation

我有两个 CALayer 对象——layer1、layer2。我想执行以下操作 -

*   将 layer1 添加到视图的图层用户 addSublayer：
*   使用 CABasicAnimation 将 layer1 移动到新位置
*   将 layer2 添加到视图的图层
*   将 layer2 移动到新位置

在 layer1 的动画完成之前，没有显示 layer2。

我通过将 layer2 的动画上的 beginTime 设置为 layer1 动画的结束时间来尝试此操作——但 layer2 在开始时间之前的间隙中显示。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:00:05.563

我发现了一种实现我的结果的方法。我不确定这是最好的方法，所以仍然会感谢其他想法。

我同时创建 layer1 和 layer2 并将 Sublayer 都添加到 view.layer。然后我为 layer1 设置动画以将其移动到新位置，持续时间 = 0.3。对于 layer2，我使用一个由移动（beginTime = 0.3，duration = 0.3）和另一个使用 hidden 属性的动画组成的组进行动画处理。后一个动画立即隐藏 layer2，然后在 beginTime = 0.3 时取消隐藏。为了实现后一个动画，我使用了 CAKeyFrameAnimation，因为这个动画必须是离散的——要么完全隐藏，要么完全不隐藏。

这是代码。我通过删除有关我的实现的细节来简化它，所以这不是我的应用程序中的实际代码——如果有任何错误，我们深表歉意。

```
CALayer layer1 = [CALayer layer];
CALayer layer2 = [CALayer layer];

/*
 * set attributes of the layers -- cut out of this example
 */
layer1.position = toPosition1;  // positions when animation is complete
layer2.position = toPosition2;

[myView.layer addSublayer:layer1];
[myView.layer addSublayer:layer2];

// animate layer 1
CABasicAnimation* move1 = [CABasicAnimation animationWithKeyPath:@"position"];
move1.duration = 0.3;
move1.fromValue = fromPosition2;
[layer1 addAnimation:move1 forKey:nil];

// animate layer 2 with a group
CABasicAnimation* move2 = [CABasicAnimation animationWithKeyPath:@"position"];
move2.duration = 0.3;
move2.fromValue = fromPosition2;
move2.beginTime = 0.3;

CAKeyframeAnimation *show = [CAKeyframeAnimation animationWithKeyPath:@"hidden"];
show.values = [NSArray arrayWithObjects:[NSNumber numberWithBool:YES], [NSNumber numberWithBool:NO], [NSNumber numberWithBool:NO], nil];
// times are given as fractions of the duration time -- hidden for first 50% of 0.6 sec
show.keyTimes = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0], [NSNumber numberWithFloat:0.5], [NSNumber numberWithFloat:1.0], nil];
show.calculationMode = kCAAnimationDiscrete;
show.duration = 0.6;
show.beginTime = 0;

CAAnimationGroup *grp = [CAAnimationGroup animation];
[grp setAnimations:[NSArray arrayWithObjects:move2, show, nil ]];
grp.duration = 0.6;

[layer2 addAnimation:grp forKey:nil]; 
```

我

# android - Android 支持库 V4 XML

> ID：11604672
> 
> 赞同：0
> 
> 时间：2012-07-22T23:01:03.023
> 
> 标签：android, xml

我已经导入了 android support v4 库，在 Java 中它工作正常，但是当我尝试在 xml 中使用它时，它给了我一个**XML 文件中的错误：正在中止构建。**，所以我不能在我的 xml 中这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >
    <android.support.v4.view.ViewPager android:id="@+id/pager"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent" >
    </android.support.v4.view.ViewPager>
</LinearLayout> 
```

我尝试添加库来构建路径和许多其他方法，但我仍然有问题。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:02:57.217

您是否确保将其放入项目`jar`的`libs`文件夹中？请参阅此 SO 帖子以获取说明：[Android：jar 文件（LIB 或 LIBS）的文件夹名称是什么？](https://stackoverflow.com/questions/7185488/android-what-is-the-folder-name-of-the-jar-files-lib-or-libs)

# c# - 尝试使用类时出错，表示找不到类型或命名空间

> ID：11604674
> 
> 赞同：0
> 
> 时间：2012-07-22T23:01:26.760
> 
> 标签：c#, asp.net, class, json.net

我已经查看了很多关于这个问题的问题，并且大多数问题是通过将应用程序目标从 Net 4.0 Client 更改为仅 Net 4.0 来解决的，我的已经是这样了，所以这不是问题。情况是我刚刚获得了 Json.Net，并创建了一个类 Customer 来使用它，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace CC
{
    public class Customer
    {
        private string location;

        public string Location
        {
            get { return location; }
            set { location = value; }
        }

        private string name;

        public string Name
        {
            get { return name; }
            set { name = value; }
        }

        private int serviceTimeMin;

        public int ServiceTimeMin
        {
            get { return serviceTimeMin; }
            set { serviceTimeMin = value; }
        }

        public Customer()
        {
        }
    }
} 
```

然后在我的页面代码隐藏中，我有以下代码：

```
protected void Button_Click(object sender, EventArgs e)
        {
            Customer customer = new Customer();
            customer.Location = txtCustomerAddress + ", " + txtCustomerCity + ", " + txtCustomerState + " " + txtCustomerZipcode;
            customer.Name = txtCustomerFirstName + " " + txtCustomerLastName;
            customer.ServiceTimeMin = 3;
            string json = JsonConvert.SerializeObject(customer);
         } 
```

它在同一个命名空间中，并且已经检查过了，当我输入它时它没有错误，只是当我构建调试时，我得到以下信息：

```
CS0246: The type or namespace name 'Customer' could not be found (are you missing a using directive or an assembly reference?) 
```

并且源指向该行：

```
Line 290:            Customer customer = new Customer(); 
```

我错过了什么？

**编辑：**只是想澄清一下，这都在同一个命名空间和同一个项目（程序集）中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:03:25.473

代码隐藏也在`CC`命名空间中吗？否则，您需要添加`using CC`到文件的顶部。

我唯一能想到的另一件事是，如果`Customer`没有正确构建。是否有任何其他错误或警告？这可能是一个副作用错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:56:34.110

您是否正在运行测试，是否启用了代码覆盖率？有时在这种情况下，您的项目 DLL 将不会更新。

# c++ - 在 Form.h 之外更改表单标签文本

> ID：11604677
> 
> 赞同：0
> 
> 时间：2012-07-22T23:02:09.853
> 
> 标签：c++, .net, winforms, visual-c++, c++-cli

我正在学习 Visual C++，并在第一天遇到了相当大的绊脚石。我正在尝试使用 Visual C++ 2010 中的表单模板制作一个简单的“Hello World”应用程序。

该解决方案创建了 Form1.h、resource.h、stdafx.h、AssemblyInfo.cpp、helloworld.cpp 和 stdafx.cpp。我向 Form1 添加了一个按钮和一个标签，并且能够做到这一点，以便当单击该按钮时，标签将 Form1.h 中的文本更改为“Hello World”。不过，我想从 Form1.cpp 中执行此操作，因此我从标题中删除了代码。我目前有以下代码：

Form1.cpp

```
#include "stdafx.h"
#include "stdio.h"
#include "Form1.h"

using namespace helloworld;

helloworld::Void testButton_Click(System::Object^  sender, System::EventArgs^  e) {
    helloworld::Form1::label1->Text = "Test";
} 
```

表格1.h

```
#pragma once

namespace helloworld {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Form1
    /// </summary>
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  testButton;
    public: System::Windows::Forms::Label^  label1;
    protected: 

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>testButton
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->testButton = (gcnew System::Windows::Forms::Button());
            this->label1 = (gcnew System::Windows::Forms::Label());
            this->SuspendLayout();
            // 
            // testButton
            // 
            this->testButton->Location = System::Drawing::Point(136, 159);
            this->testButton->Name = L"testButton";
            this->testButton->Size = System::Drawing::Size(75, 23);
            this->testButton->TabIndex = 0;
            this->testButton->Text = L"Test Button";
            this->testButton->UseVisualStyleBackColor = true;
            this->testButton->Click += gcnew System::EventHandler(this, &Form1::testButton_Click);
            // 
            // label1
            // 
            this->label1->AutoSize = true;
            this->label1->Location = System::Drawing::Point(125, 100);
            this->label1->Name = L"label1";
            this->label1->Size = System::Drawing::Size(35, 13);
            this->label1->TabIndex = 1;
            this->label1->Text = L"label1";
            // 
            // Form1
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(284, 262);
            this->Controls->Add(this->label1);
            this->Controls->Add(this->testButton);
            this->Name = L"Form1";
            this->Text = L"Form1";
            this->Load += gcnew System::EventHandler(this, &Form1::Form1_Load);
            this->ResumeLayout(false);
            this->PerformLayout();

        }
#pragma endregion
    private: System::Void testButton_Click(System::Object^  sender, System::EventArgs^  e) ;
private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
         }
    };
} 
```

使用此代码，我收到以下错误：

```
error C2227: left of '->Text' must point to class/struct/union/generic type 
```

根据我的发现，该错误意味着程序不知道我在说什么`label1->Text`。我将不胜感激任何可以给予 Visual C++ 新手的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:17:46.347

问题出在以下代码段中：

```
helloworld::Void testButton_Click(System::Object^  sender, System::EventArgs^  e) {
    helloworld::Form1::label1->Text = "Test";
} 
```

`helloworld::Form1`是您的表格类型；这不是实际的例子。我们使用`this`关键字来引用当前对象实例（大多数时候`this`关键字是可选的）。另一个问题是`helloworld::Void`，应该是`System::Void`。您还需要替换`testButton_Click`为`Form1::testButton_Click`以表明这是一个类方法而不是自由函数。你的代码应该变成：

```
System::Void Form1::testButton_Click(System::Object^  sender, System::EventArgs^  e) {
    label1->Text = "Test";
} 
```

* * *

注意：在使用 Windows 窗体时，您应该使用 C#。C++/CLI 是一门乱七八糟的语言，大多数人仅在将托管代码与本机代码结合使用时才使用 C++/CLI。

# android - android.database.sqlite.SQLiteException：没有这样的列：personname：，编译时：SELECT id，personname FROM numbersTable

> ID：11604678
> 
> 赞同：4
> 
> 时间：2012-07-22T23:02:22.843
> 
> 标签：android, database, eclipse, sqlite

我是 android 的新手，我想将 db 中的数据获取到 textview。

但它有错误我无法纠正这个问题。

请帮我。

这是数据库类

```
 public class blockornot1 {
     String TAG;
 private dbHelper1 ourHelper;
 private final Context ourContext;
 private SQLiteDatabase ourDatabese;

  public final static  String DATABASE_NAME1="databasename.db";
  public final String DATABASE_TABLE="numbersTable";
  public final String KEY_NAME="personname";
  public final String KEY_ID="id";
  public final int DATABASE_VERSION =2;

  public  class dbHelper1 extends SQLiteOpenHelper{

    public dbHelper1 (Context context) {
          super (context,DATABASE_NAME1,null,DATABASE_VERSION);
          }

    @Override
    public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE "+ DATABASE_TABLE+ "("+KEY_ID+ " INTEGER PRIMARY KEY AUTOINCREMENT, "               
      + KEY_NAME + "TEXT NOT NULL);");
        Log.v(TAG, "creat");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);

    }

  }``

  public blockornot1(Context c){

      ourContext = c;
  }

  public blockornot1 open() throws SQLException{
      ourHelper= new dbHelper1(ourContext);
      ourDatabese= ourHelper.getWritableDatabase();
      return this;
  }

  public void close(){
      ourHelper.close();

  }

public long creatEntry(String inputtext) {
    // TODO Auto-generated method stub
    ContentValues cv= new ContentValues();
    cv.put(KEY_NAME, inputtext);
    Log.v(inputtext, "add to database");
    return ourDatabese.insert(DATABASE_TABLE, null, cv);

}

public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ID, KEY_NAME };
    Cursor c=ourDatabese.query(DATABASE_TABLE, columns, null, null, null, null,   null);
    String result = "";
    int iRow = c.getColumnIndex(KEY_ID);
    int iName = c.getColumnIndex(KEY_NAME);
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){

        result= result + c.getString(iRow) + "   " + c.getString(iName) + "/n";
    }
    return result;
   }

     } 
```

这是我的主要课程

```
 public class Mainclass extends Activity implements OnClickListener {
      EditText et;
  String TAG;
    public void onCreate(Bundle savedInstanceState) {
        Log.v(TAG,"onCreate");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       et=(EditText)findViewById(R.id.edittext1);
       Button bt=(Button)findViewById(R.id.button1);
        Button bt1=(Button)findViewById(R.id.button2view);
        bt.setOnClickListener(this);
        bt1.setOnClickListener(this);

    }

        public void onClick(View v) {

            switch (v.getId()) {
            case R.id.button1:
                boolean dididwork =true;
                try{
                 String inputtext=et.getText().toString();
                 blockornot1 entry= new blockornot1(Mainclass.this);
                 entry.open();
                 entry.creatEntry(inputtext);
                 entry.close();
                 Log.v(TAG," okkkkkkk hastaaaaaaa");
                break;}
                catch (Exception e){
                    String error=e.toString();
                    Dialog d= new Dialog(this);
                    d.setTitle("Heack ya!"); 
                            TextView t= new TextView(this);
                            t.setText(error);
                            d.setContentView(t);
                            d.show();
                    dididwork=false;

                }finally {
                if(dididwork){
                    Dialog d= new Dialog(this);
                    d.setTitle("Heack ya!"); 
                            TextView t= new   TextView(this);
                            t.setText("success");
                            d.setContentView(t);
                            d.show();

                }

                }

            case R.id.button2view:
                Intent i = new Intent("android.intent.action.SQLVIEW");  
                startActivity(i);
                break;

            }

                  } 
```

}

这个类用于在 textview 中显示 DB

```
 public class ShowDb extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqlview);
    TextView tv=(TextView)findViewById(R.id.textViewsqlview);
    blockornot1 info= new blockornot1(this);
    info.open();
    String data= info.getData();
    info.close();
    tv.setText(data);
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T23:06:13.303

我猜您在某个时候更改了表的创建语句，但是在您增加数据库版本之前，您的应用程序不会自动实现任何更改。尝试将 设置`DATABASE_VERSION`为`3`。

**添加**

如果要将数据库中的信息绑定到 ListView、Spinner 等，则应更改`KEY_ID`为`_id`. （Android 对主键列的名称很讲究。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T22:02:01.327

你有两个选择：

1）更改`KEY_ID`为`_id`（不是`id`）并通过设置重建您的数据库`DATABASE_VERSION = 4`。

或者

2）添加`as _id`到这一行：`String[] columns = new String[]{ KEY_ID as _id, KEY_NAME };`。

目前我在将数据库中的信息显示到 ListView 时遇到了同样的问题，所以我按照“Sam”给出的说明进行操作，这确实解决了我的问题。非常感谢山姆。

# math - 靠近线的点

> ID：11604680
> 
> 赞同：3
> 
> 时间：2012-07-22T23:02:45.797
> 
> 标签：math, geometry, line, point

我有 3 个点和它们的坐标。他们两个之间有一条线我想找到第三个点是否在创建线的人之间并且靠近线。在图 1 中显示了我可以使用公式来查找点是否共线的情况。在图 2 中，A 和 B 之间有一条线。我想检查范围内的点，比如说 15px 并找到 C 点位于 A 和 B 之间并且靠近线并忽略 D 点，因为它很远从线。

![共线](../Images/6b0b1c00f0a4f799250207d0394ee790.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T06:19:52.173

点**C**到线段**AB**的距离是与的[叉](http://en.wikipedia.org/wiki/Cross_product#Coordinate_notation)积的[长度](http://en.wikipedia.org/wiki/Vector_length#Euclidean_norm)。`vector(A,C)``unit_vector(A,B)`

也就是说（在伪代码中），

```
def vec_length(x,y) = sqrt(x*x + y*y)

def unitvec(ax,ay,bx,by) = (dx/m, dy/m) 
        where dx = bx - ax
              dy = by - ay
              m  = vec_length(dx,dy)

def dist_segm(cx,cy,ax,ay,ux,uy) = abs( dx*uy - dy*ux )
        where dx = cx - ax
              dy = cy - ay 
```

要确定**C**是否“介于” **A**和**B**之间，您可以计算并查看它是否小于（但为正）。作为计算的一部分，你无论如何都要计算。[`dot_product`](http://en.wikipedia.org/wiki/Dot_product)`( vector(A,C), unit_vector(A,B) )``vector_length(A,B)``vector_length(A,B)``unit_vector(A,B)`

这种方式是计算效率最高的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T02:29:32.847

将点正交投影`C`到直线上`AB`，找到投影点`P`：距离`C`直线最近的点`AB`。现在，您需要做的就是使用线段的长度`CP`来确定`C`与线的距离。并使用`P`与关系到`A`和的位置`B`来确定是否`C`“介于”`A`和之间`B`。

点到直线上的正交投影是计算几何中的标准基本操作。例如，参见[Wolfram World](http://mathworld.wolfram.com/Point-LineDistance2-Dimensional.html)。

我会这样做：

1.  线的法向量`AB`是`(By - Ay, -(Bx - Ax))`
2.  将此向量添加到点`C`并获得点`C'`

    ```
    C'x = Cx + By - Ay
    C'y = Cy - Bx + Ax 
    ```

3.  找到line和 line的[交点](http://en.wikipedia.org/wiki/Line-line_intersection)。交点就是你的投影点。`AB``CC'``P`

# java - Java 2d 多边形碰撞响应

> ID：11604684
> 
> 赞同：0
> 
> 时间：2012-07-22T23:02:48.293
> 
> 标签：java, 2d, physics, collision

我制作了一个使用凸多边形的游戏。我的计划是让这些多边形根据它们的质量和速度发生碰撞和反弹。但首先我需要确保它们没有重叠。此代码检查多边形 A 的每条边，以查看多边形 B 的任何顶点是否在垂直于边的轴上重叠。整个方法返回修复多边形 A 所需的结果向量：

```
 /**Calculates adjustment vector for EntityPolygon A*/
public Vector calculateCollision(EntityPolygon A, EntityPolygon B) {

    //this is a large number so the first comparison of overlap is true
    double overlap = 10000;

            //this is the angle of the axis to apply the overlap vector
    double angle = 0;

            //I ran a for loop for every edge of the polygon
    for(int x = 0; x <= A.numPoint - 1; x++) {

                    //create variables
        Vector edge;
        Vector axis;
        double centerA;
        double centerB;
        double maxA;
        double maxB;
        double minA;
        double minB;

                    //this if statement finds this point and the next point
                    //to make a Vector of the edge
        if(x != A.numPoint - 1) {
            edge = new Vector(A.point[x], A.point[x + 1]);
        } else {
            edge = new Vector(A.point[x], A.point[0]);
        }

                    //this finds the axis perpendicular axis of the edge
        axis = edge.getRightNormal();

        //finds the location of both polygon's centers when projected onto
                    //the velocity(projectionOnVelocity() projects the point on the                                                           
                    //new axis)
        centerA = A.getLocation().getProjectionOnVelocity(axis);
        centerB = B.getLocation().getProjectionOnVelocity(axis);

                    //finds the location of polygons A and B on the axis by
                    //setting the min and max of their highest and lowest points
        maxA = findMax(A, axis);
        maxB = findMax(B, axis);
        minA = findMin(A, axis);
        minB = findMin(B,axis);

        //final comparison to find overlapping vector.
        if(centerA > centerB) {//if A is above B on the axis
            if(maxB > minA) {//if the max point on B is above min on A
                double m = maxB - minA;
                if(m < overlap) {
                    overlap = m;
                    angle = axis.angle;
                }
            } else {
                                    //(0,0) vector
                return Vector.getDefault();
            }
        } else if(centerB > centerA) {//if B is above A on axis
            if(maxA > minB) {//if the max point on A is above min on B
                double m = maxA - minB;
                if(m < overlap) {
                    overlap = m;
                    angle = axis.angle + Math.PI;
                }
            } else {
                                    //(0,0) vector
                return Vector.getDefault();
            }
        }
    }
            //if the overlap value has been set by the edges of Polygon A
    if(overlap != 10000) {
                    //returns the adjustment vector along overlap edge axis
        return new Vector(angle, overlap, true);
    } else {
                    (0,0) vector
        return Vector.getDefault();
    }
} 
```

这段代码有一个错误，在一个非常平坦的部分高于方形部分的情况下会导致问题，平坦的部分认为它比实际下降得更远。结果，扁平件和方形件发生碰撞，将它们推到下图中的当前位置

这是预赛阶段实际比赛的照片。右边的蓝色方块在他们接触之前就已经被顶部的障碍物移动了。这发生在程序开始时，此时方块位于屏幕的最左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:32:14.843

我同意 Beta，你的算法看起来不正确（主要是因为我很确定多边形相交不会那么容易。只是为了检查 2 个形状的相交（没有任何智能），你必须检查是否有任何边缘相交与其他形状的任何边缘，但即使是适度简单的形状也很慢。

矩形相交很容易做到，三角形相交应该不会太难，如果你可以将你的形状分成其中一个（或者实际上任何一组具有相当简单公式的形状），它会让事情变得更容易。

你也可以看看[这个问题](https://stackoverflow.com/questions/2272179/a-simple-algorithm-for-polygon-intersection)。

多边形相交是一个经过充分研究的问题，只要谷歌一下，你应该会得到很多选择。

# jquery - jQuery 循环 pagerAnchorBuilder 跨度在 li 之间

> ID：11604690
> 
> 赞同：0
> 
> 时间：2012-07-22T23:03:56.067
> 
> 标签：jquery

我正在创建一个循环幻灯片，问题是，我在 li 标签之间有跨度，控制器 li 按钮无法正常工作，因为活动的 li 跳过了第二个菜单按钮，如果我删除了所有跨度标签，它工作得很好。有什么办法可以保留跨度标签？我应该如何更改“pagerAnchorBuilder”属性？非常感谢提前

这是代码

```
var $featured_content = $('#slide');
if ($featured_content.length) {
    $('#slide').cycle({ 
    activePagerClass: 'active',
    timeout: 0,         
    speed: 300,
    cleartypeNoBg: true,
    cleartype: true, 
    pager: '#controller ',
    fx: 'fade',
    pagerAnchorBuilder: function(idx, slide) {
           return '#controller li:eq(' + (idx) + ')';
        }
}); 
}

<ul id="controller">
<li>menu1</li>  
<span>|</span>
<li>menu2</li> 
<span>|</span>
<li>menu3</li>
<span>|</span>
<li>menu4</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:34:48.943

像这样使用的 SPAN 是无效的。UL 的孩子应该是 LI。

`xxx | yyy | zzz`您可以通过在 CSS 中使用 padding、border-left 和border-right 组合来设置 LI 的样式来实现相同的视觉效果。想必您已经在使用`display:inline`.

网上肯定有很多例子，还是自己写的挺简单的。

# cocoa - 来自枚举值的 NSString

> ID：11604694
> 
> 赞同：1
> 
> 时间：2012-07-22T23:04:13.610
> 
> 标签：cocoa, object, enums

是否有可能获得`NSString`的值`kIconServices128PixelDataARGB`，意思是：`@"ic07"`？

```
enum {
    kIconServices16PixelDataARGB  = 'ic04', /* uses kSmall32BitIconIndex and kSmallDeepMaskIconIndex*/
    kIconServices32PixelDataARGB  = 'ic05', /* uses kLarge32BitIconIndex and kLargeDeepMaskIconIndex*/
    kIconServices48PixelDataARGB  = 'ic06', /* uses kHuge32BitIconIndex and kHugeDeepMaskIconIndex*/
    kIconServices128PixelDataARGB = 'ic07' /* uses kThumbnailDataIndex and kThumbnailMaskIndex*/
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:56:51.683

有一些 API 可以使这种转换更简单，例如`UTCreateStringForOSType()`返回`CFStringRef`（您可以将其转换`NSString*`为等价的），或者在 QTKit 中有`QTStringForOSType()`.

# java - 使用 actionlistern 从文本字段中获取文本

> ID：11604695
> 
> 赞同：0
> 
> 时间：2012-07-22T23:04:37.440
> 
> 标签：java, actionlistener, gridbaglayout

这可能是一个相当愚蠢的问题，但我正在玩 gridbag 布局，我正在尝试构建一个基本的登录屏幕，将用户信息发送到另一个使用 mysql DB 检查的类。但在我这样做之前，我必须找到一种方法来监听我的登录按钮被按下，然后从文本字段中获取文本（最后一部分是我遇到问题的地方）。我尝试在 addComponentsToPane 方法之外声明 JTextField 但无济于事。

到目前为止，这是我的代码

我也很抱歉我是这个网站的新手并且还没有足够的知识来正确格式化我的代码。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package GUI;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

/**
 *
 * @author TeslaSolari
 */
public class login {

    public void login() {
        createAndShowGUI();
    }

    private static void createAndShowGUI() {
        //Create and setup the windows
        JFrame frame = new JFrame("Login");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Setup the content pane
        addComponentsToPane(frame.getContentPane());

        //Display the window
        frame.pack();
        frame.setVisible(true);
    }

    public static void addComponentsToPane(Container pane) {
        pane.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);

        //parts
        JButton login;
        JTextField user;
        JLabel[] label = new JLabel[10];
        JPasswordField pass;
        ActionListener loginB = null;

        pane.setLayout(new GridBagLayout());
        //Cpnstraints
        GridBagConstraints c = new GridBagConstraints();
        c.fill = GridBagConstraints.CENTER;

        // Buttons
        login = new JButton("Login");
        c.weightx = 0.5;
        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridx = 0;
        c.gridy = 4;
        pane.add(login, c);
        login.addActionListener(new Action());

        // textfields / labels
        label[0] = new JLabel("Username");
        user = new JTextField();
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 0;
        pane.add(label[0], c);
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 1;
        pane.add(user, c);

        label[1] = new JLabel("Password");
        pass = new JPasswordField();
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 2;
        pane.add(label[1], c);
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 3;
        pane.add(pass, c);

    }

    //Actions

    static class Action implements ActionListener{
        public void actionPerformed (ActionEvent e){
            System.out.println(label[]);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:50:58.183

看来您的解决方案是正确的（将声明 JTextField 声明移到方法之外），但您可能错过了将它们声明为静态（根据您的类的其余部分）

```
private static JTextField user;
private static JPasswordField pass; 
```

# javascript - jQuery：选择父div之外的下一个div

> ID：11604696
> 
> 赞同：5
> 
> 时间：2012-07-22T23:04:47.060
> 
> 标签：javascript, jquery, next

好的，我觉得我错过了一些非常简单的东西，但这里有：

这段代码效果很好，正是我想要的方式。您单击链接并显示下一个 div（一个页面上大约有 10 个）

```
 $('a.addtask').click(function(){
      $(this).next('.field').slideToggle();
    return false;
    });

  <div class="field">
   Some content
  </div>

  <a href="#" class="addtask">Add a task</a>

  <div class="field" style="display:none;">
    some other content
  </div> 
```

然而，我想做的是像这样更改 HTML（div 内的链接）：

```
<div class="field">
   Some content
   <a href="#" class="addtask">Add a task</a>
  </div>

  <div class="field" style="display:none;">
    some other content
  </div> 
```

^^这不再正常工作了。

我需要在我的 jquery 中进行哪些更改才能使其正常工作？我已经在谷歌上搜索了一段时间，类似帖子中的许多解决方案似乎都不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-22T23:06:44.070

`$(".addtask").parent().next(".field")`应该管用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-28T15:37:43.920

试试这个：`$(".addtask").nextAll('.field').first()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:48:07.390

我已经为上述问题完成了完整的垃圾箱。

**演示：** [http ://codebins.com/bin/4ldqp9y](http://codebins.com/bin/4ldqp9y)

**HTML：**

```
<div class="field">
  Some content
  <a href="#" class="addtask">
    Add a task
  </a>
</div>
<div class="field" style="display:none;">
  some other content
</div> 
```

**CSS：**

```
.field{
  padding:7px;
  border:1px solid #4455f9;
  background:#74cca9;
} 
```

**查询：**

```
$(function() {
    $('a.addtask').click(function() {
        $(this).closest('.field').next('.field').slideToggle();
        return false;
    });

}); 
```

# javascript - 奇怪的行为jQuery

> ID：11604697
> 
> 赞同：0
> 
> 时间：2012-07-22T23:04:55.043
> 
> 标签：javascript, jquery

我在一些主题中看到了这一点，但还没有修复我的脚本。

我有一段 jQuery 不起作用，因为我使用它来管理（验证）一段 html（表单），该段在加载页面后使用 jQuery 函数 load() 加载。

`alert("Something")`但是，如果我在函数之外的脚本中放置例如一个，它就可以工作。

我尝试将验证脚本放在这些开头，但它不起作用......

```
$(window).bind("load", function() {
$(document).ready(function () { 
```

很奇怪……你有解决办法吗？

更新：现在工作，检查第一个答案的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:29:27.543

据我了解，您正在尝试将事件附加到加载 AJAX 的表单，但它不起作用，因为您实际上是在表单存在之前附加它。

大概你`.load(url)`在那里的某个地方，所以你应该这样做：

```
$("selector").load(url,"",function() {
    // do stuff to the loaded content, such as attaching events, here
}); 
```

# c# - 使用 Windows API 的子窗口的滚动高度？

> ID：11604698
> 
> 赞同：0
> 
> 时间：2012-07-22T23:05:08.313
> 
> 标签：c#, windows, winapi, user32

有谁知道如何使用 Windows API 获取可滚动子窗口的高度？我找到了 GetWindowRect 但这似乎只返回“可见”区域的 RECT，但我想要整个“可滚动”子窗口的 RECT。这个窗口是第 3 方窗口，所以我假设我需要使用 User32 WinAPI 函数。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:21:00.137

你能做的最好的就是打电话[`GetScrollInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787583%28v=vs.85%29.aspx)。

```
SCROLLINFO si = {sizeof(SCROLLINFO), SIF_ALL};
GetScrollInfo(hWndChild, SB_VERT, &si); 
```

# python - 有没有办法在退货声明之后做更多的工作？

> ID：11604699
> 
> 赞同：50
> 
> 时间：2012-07-22T23:05:08.960
> 
> 标签：python

我有点好奇在返回结果后是否可以在函数中做更多的工作。基本上，我在处理输入后使用金字塔框架（它只是在 python 中编码）创建一个站点，我返回变量以呈现页面，但有时我想在呈现页面后做更多的工作。

例如，您来到我的网站并更新您的个人资料，而您只关心它是否成功，所以我输出一条消息说“成功！” 但在那之后，我想获取您的更新并更新您的活动日志，更新您的朋友活动流等。现在我正在做所有这些，然后返回您关心的结果状态，但我'我很好奇我是否可以这样做，以便用户更快地得到他们的回复。

我之前做过多处理，最坏的情况下我可能只是分叉一个线程来完成这项工作，但如果有一种方法可以在 return 语句之后完成工作，那就更简单了。

例子：

```
def profile_update(inputs):
  #take updates and update the database 
  return "it worked"
  #do maintenance processing now. 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-23T00:09:02.387

如果你从 try 块返回，你仍然可以在返回后做一些工作，finally 块*仍然*会被执行，例如：

```
def fun(x):
    try:
        return x * 20
    finally:
        print("Yay! I still got executed, even though my function has already returned!")

print(fun(5)) 
```

预期输出：

```
Yay! I still got executed, even though my function has already returned!
100 
```

引用[文档](https://docs.python.org/3/reference/simple_stmts.html#the-return-statement)：

> 当 return 将控制权从带有 finally 子句的 try 语句中传递出来时，该 finally 子句在真正离开函数之前执行。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-22T23:15:27.443

你为什么不使用[contextmanager](http://docs.python.org/library/contextlib.html#contextlib.contextmanager)？它基本上完全符合您的要求。

这是 Python 文档中的规范示例。

```
from contextlib import contextmanager

@contextmanager
def tag(name):
    print "<%s>" % name
    yield
    print "</%s>" % name 
```

因此，对于您的功能，您只需执行以下操作：

```
@contextmanager
def profile_update(inputs):
  #take updates and update the database 
  yield "it worked"
  #do maintainence processing now.. 
```

要调用它，您只需执行以下操作：

```
with profile_update(inputs) as result: #pre-yield and yield here
    # do whatever while in scope
# as you move out of scope of with statement, post-yield is executed 
```

编辑：我只是在测试，结果发现，使用 yield 语句，函数仍然执行到最后。这是一个愚蠢的例子，说明了要点和事情何时执行。

```
def some_generator(lst):
    for elem in lst:
        yield elem
    lst[0] = "I WAS CHANGED POST-YIELD!!!!"

>>> q = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> gen = some_generator(q)
>>> for e in gen:
...    print e, q

0 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
1 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
2 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
3 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
4 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
5 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
6 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
7 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
8 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
9 [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

print q
['I WAS CHANGED POST YIELD!!!', 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

contextmanager 的优点是不需要两次`next`调用即可到达停止迭代（和更简洁的语法），但是如果您想返回多个值或其他内容，您也可以这样做，但是您可以看到 post yield 语句直到生成器在调用中引发 StopIteration 才真正被`next`调用（for 循环在它 get 时结束`StopIteration`）

* * *

如果由于某种原因，您需要比 offer 更高程度的控制`@contextmanager`，您还可以使用`__enter__`和`__exit__`方法定义一个类：

```
class MyContextClass(object):
    # ...

    def __enter__(self):
        # do some preprocessing
        return some_object

    def __exit__(self, exc_type, exc_value, traceback):
        # do some post processing
        # possibly do some processing of exceptions raised within the block
        if exc_type == MyCustomErrorType:
            return True #don't propagate the error 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-22T23:06:10.963

不，不幸的是，一旦你点击了`return`语句，你就会从函数/方法返回（无论有没有返回值）。

从[文档中返回](http://docs.python.org/reference/simple_stmts.html?highlight=break#grammar-token-return_stmt)：

> return 以表达式列表（或无）作为返回值离开当前函数调用。

您可能需要查看生成器函数和**[yield](http://docs.python.org/reference/expressions.html?highlight=generator#yield-expressions)**语句，这是一种从函数返回值并继续处理并准备在下次调用函数时返回的另一个值的方法。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-12-27T11:12:50.267

```
import threading

def profile_update(inputs):

    # call function to take updates and update the database 
    update_function(inputs)

    # call the maintainence_function here
    t = threading.Thread(target=maintainence_function, args=[input1, input2])
    # setDaemon=False to stop the thread after complete
    t.setDaemon(False)
    # starting the thread
    t.start()

    # return response/anything-else you want to return
    return "it worked"

def update_function(inputs):
    # updating the database process here

def maintainence_function(input1, input2):
    #do maintainence processing now.. 
```

这里我们使用python的线程功能。

首先我们调用更新函数（如果需要，如果响应不依赖于该函数并且需要立即给出响应，您也可以在线程中使用此函数）。

然后我们创建了一个线程，它将完成maintainence_function函数并在完成后停止。但响应不会延迟，直到该功能完成。

即： return "it working" 将被返回，然后如果 ts 是一个位过程，线程也会维护函数maintainence_function 的工作。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-23T02:06:02.990

不，返回将值返回给调用者并停止。

如果调用者也在您的控制之下（不是金字塔框架的一部分），您可以更改`profile_updates`为如下所示：

```
def profile_update(inputs):
    #take updates and update the database 
    def post_processing_task():
        #do maintainence processing now..
    return ("it worked", post_processing_task) 
```

然后对调用者进行编码以期望一对`(response, task)`，而不仅仅是响应。它可以立即对部件执行某些操作`response`（将其传达给用户），然后调用`task()`以处理后处理。

这允许`profile_update`确定之后需要执行哪些代码（并将这些细节隐藏并从更高级别封装），但允许更高级别确定将响应传达给用户然后执行后处理的流程背景。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-07T20:11:42.560

我最喜欢神道约瑟夫的回答，我们使用线程来拆分另一个进程。然而，我相信这个例子更好地体现了他的想法：

```
import threading
from time import sleep

def math_fun(x):
    # The sleep here is simply to make it clear that this happens in the background
    sleep(1)
    print(x*20)

def fun(x):
    # Create thread to run math_fun for each argument in x 
    t = threading.Thread(target=math_fun, args=[x])
    t.setDaemon(False)
    t.start()

    print("Function has returned!")

fun(5) 
```

预期输出：

```
Function has returned!
100 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-22T08:43:06.767

您可以使用`Timer`来安排事件在某个时间点异步发生。您还可以给出事件发生的时间间隔。我希望下面的代码和输出有所帮助。

```
import time
from threading import Timer

def func():
    print("Inside func at", time.time())

def schedule_an_event():
    print(time.time())
    Timer(3, func).start()
    return "Done"

print(schedule_an_event()) 
```

输出：

```
1579682455.5378997
Done
Inside func at 1579682458.5382733 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-17T21:14:55.333

可以用`try-except-finally`结构作弊。例子：

```
def function():
  try:
    #do some stuff here
    return x
  except Exception:
    #do something when an error occures
  finally:
    #do here whatever you wanna do after return 
```

请注意，`finally`即使捕获到异常，也会执行该语句。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-03T22:08:32.250

我认为这就是您要搜索的内容：

def foo(): # do stuff try: return something finally: # 后返回

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-10T04:51:20.890

您要问的问题是不可能的，因为当您给出 return 语句时，函数范围在此时终止，但您可以尝试不同的方法

```
def show_status():
  return "it worked"

def profile_update(inputs):
  #take updates and update the database 
  show_status
  #do maintainence processing now..
  return  # when you are done with the maintainence processing 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-15T15:50:58.717

意识到这是一个老话题并且已经有了很好的答案，但也许新用户也觉得我的想法很有吸引力：

```
def master_profile_update(inputs):
    # since input parameters are global inside the upper scope
    # i omit them from the arguments of lower nested function:
    def profile_update()
        #take updates and update the database 
        return "it worked"

    profile_update()
    #do maintenance processing now.. 
```

我发现它比**decorator**和**contextmanager**更传统。

# regex - 正则表达式匹配单词至少一个字符

> ID：11604700
> 
> 赞同：-3
> 
> 时间：2012-07-22T23:05:13.460
> 
> 标签：regex

我想匹配包含带/不带空格的单词的字符串，但它应该包含至少一个非空格字符。下面的正则表达式是否正确？

```
/[\w]*[\s]+/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:17:43.073

当您想匹配必须包含某些内容的字符串时，最好的方法是在捕获开始时进行正向前瞻，因此如果您想确保会有一些空白字符，那么您应该从正则表达式模式开始`((?=.*\s)...)`，`...`其余的模式在哪里。如果您的意思是仅空格键字符（因为`\s`也将匹配制表`\t`符和换行符`\n`和`\r`），则以`((?=.* )...)`.

现在——你说的词是什么意思？您使用`\w`- 这是`[a-zA-Z0-9_]`. 如果这是您想要的，那么您的正则表达式模式是`((?=.*\s)[\w\s]*)`, resp。`((?=.* )[\w ]*)`.

但这也将匹配带有一个空格字符的字符串，resp。只有空格键字符，仅此而已。你应该澄清你的问题，因为我相信你想要别的东西，而不是这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:21:13.570

应该匹配，

stackoverflow #2 -> 应该匹配任何字符，包括特殊字符

stackoverflow 2 -> 即使以空格开头也应该匹配

不应该匹配，

```
 -> containing only blank spaces 
```

# html - css 元素的定位不是我期望的

> ID：11604701
> 
> 赞同：0
> 
> 时间：2012-07-22T23:05:21.393
> 
> 标签：html, css, position

[http://jsfiddle.net/PerryCS/zFewp/2/](http://jsfiddle.net/PerryCS/zFewp/2/)

嗨，我已经玩了大约 6 个小时了，我变得脾气暴躁，因为我不明白为什么它不起作用。:)

如果我将 adminHeader 做得很小，它会放在顶部并且似乎可以正常工作。但是当我把它变大时，内容变得很糟糕......

结构是这样的。。

adminMaster（一切都在其中的主模板） adminHeader（我的网站顶部，在 master 内部） adminContent（中间，在 master 内部，在 header 下） adminFooter（底部，在 master 内部，在 content 下）

我的 adminContent 在我的页眉中间，而页脚就在内容的正下方。

我将所有 4 个“结构”设置为相对。当然，我不会在完成后留下那么大的管理，但我需要知道为什么其他元素在标题下没有很好地进行。

它们是块元素，没有什么是绝对的，所以从技术上讲，它们应该都能很好地流动。在网站的“公共”区域（未在此示例中发布）我将宽度设置为像素（988px），但对于网站的管理部分，我希望 master 填充浏览器窗口（宽度：100%）和其他结构（页眉、内容、页脚）来填充母版。

我需要什么帮助...（请）

为什么布局不会一个接一个地流动？

如果它很简单（我还没有查过） - Master DIV 上的最小宽度（800px）会很好。

注释？我这样做是不是很糟糕？

万一有人错过了 - jsfiddle 在顶部:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:35:06.337

adminHeader 的高度设置为 24px。文本从容器中溢出，这就是为什么你可以看到它，但是 adminHeader 的尺寸仍然设置为 24px 的高度。如果增加 adminHeader 的高度，以下 div 会在页面下移。

见[小提琴](http://jsfiddle.net/MsjFC/)

这是你想要做的吗？

# iphone - Iphone webapp保持活力

> ID：11604702
> 
> 赞同：0
> 
> 时间：2012-07-22T23:05:26.273
> 
> 标签：iphone, ajax, gps, iphone-web-app

我目前正在为 iphone 开发一个网络应用程序

该应用程序的主要功能是以常规方式（每 10 秒）收集 GPS 数据，以便通过 AJAX 发送到 WebService 并保存...

问题是，片刻之后，iphone进入睡眠模式（屏幕关闭），然后进程不再活动

有没有办法让应用程序像 GPS 应用程序等传统应用程序一样保持唤醒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:29:27.057

您无法使用非本机应用程序保持设备唤醒。[请参阅文档](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。

# php - PHP - 为什么数组中两个项目的值都会改变？

> ID：11604705
> 
> 赞同：5
> 
> 时间：2012-07-22T23:05:39.980
> 
> 标签：php, arrays

> **可能重复：**
> [PHP 在 foreach 中通过引用传递](https://stackoverflow.com/questions/3307409/php-pass-by-reference-in-foreach)

为什么数组中两个项目的值都会发生变化？我只是想更改等于 $testitem 的键的值。

**以下代码的所需结果：** 项目：5 数量：12 项目：6 数量：2

**以下代码的当前结果是：** item:5 Quantity:12 item:6 Quantity:12

```
<?php
            $items = array(
                '5' => '4',
                '6' => '2',
            );

            $testitem = '5';
            $testvalue = '8';

            foreach($items as $key => &$value)
            {   
                if ($key == $testitem)
                {
                    $value = $value + $testvalue;   
                }
            }

            foreach($items as $key => $value)
            {                       
                print 'item:'.$key.' Quantity:'.$value.'<br/>';
            }
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T23:09:51.273

当您尝试将`$value`变量作为参考传递时，问题就出现了。`foreach`通过将循环修改为如下所示，您将能够达到您想要的结果-

```
foreach($items as $key => $value){   
  if ($key == $testitem){
    $items[$key] = $value + $testvalue;   
  }
} 
```

只需使用当前`$key`或值`$testitem`作为对`$items`数组的引用 - 并像这样修改内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:15:42.493

因为 $value 的引用和最后一个数组元素即使在 foreach 循环之后仍然存在。

在您的第一次 foreach 之后使用`unset($value)`, 您的代码将正常工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-22T23:09:52.920

你为什么不直接使用这段代码而不是循环：

$items[$testitem] += $testvalue;

这适用于您的示例。

在 php 中，您可以使用变量引用数组元素。所以它正是你想要的。

# wordpress - 如何在管理插件菜单页面中显示发布信息（例如标题）？

> ID：11604708
> 
> 赞同：0
> 
> 时间：2012-07-22T23:06:07.603
> 
> 标签：wordpress

我正在尝试开发一个 WP 插件来在管理菜单页面中显示帖子（或页面）相关信息（例如在列表中显示所有帖子标题）。我尝试使用“The Loop”，但似乎无法在 Dashboard 中访问“The Loop”。

我已经通过使用 $wpdb 直接查询数据库来实现我的目标。

但是有没有更好或更安全的方法来在仪表板菜单页面中加载帖子信息？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:19:43.760

您将希望在仪表板中使用 wp_query。这将允许您创建一个您可以完全控制的私人查询，它的工作方式与您在 Wordpress 主题中了解和喜爱的查询完全一样。

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

```
$the_query = new WP_Query( $args );

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile; 
```

# php - PHP/MySQL 文本字段按条件搜索

> ID：11604713
> 
> 赞同：0
> 
> 时间：2012-07-22T23:06:25.880
> 
> 标签：php, mysql, lambda

我在 php/mysql 中有**产品搜索页面。**我在表**products中有名为****price**的文本字段。我需要能够**使用如下表达式**在 mysql 表中搜索产品：

 ****1.  => 35 和 <= 45
2.  < 200
3.  >= 200 或 45
4.  // ETC

是否可以将此功能留给用户并使用用户友好的表达方式按价格**安全/快速搜索产品？**

我只是不知道从哪里开始。[create_function](http://php.net/create_function)是我正在寻找的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:10:33.900

您希望为用户提供一个界面，以允许他们为他们的查询建立条件。然后，您可以使用这些数据以编程方式适当地构建您的 SQL 查询（警惕 SQL 注入）。

还要确保你在 price 列上有一个索引，以确保 MySQL 可以快速运行查询。****

# sql - SQL：如何使用 LIKE 连接两个表以获取名称而不是 Id 到搜索引擎？

> ID：11604714
> 
> 赞同：0
> 
> 时间：2012-07-22T23:06:28.790
> 
> 标签：sql, join, sql-like

我有两个名为：t_servicio 和 cat_clientes 的表，其组成如下：

**t_service:** ![t_service](../Images/b43b8819978fa63c1add9de24679d357.png)

**cat_clientes：** ![cat_clientes](../Images/aaa10b6fdacfc3ba60f26760c50fcf49.png)

表 t_servicio 托管“Id_Cliente”。所以我正在做的是一个搜索引擎，现在我只想搜索**“Id_cliente”**列。问题是，如何使用 LIKE 条件获取将表**t_servicio**与表**cat_clientes**连接起来的客户（客户）的名称以查找匹配项？

希望能帮到我！

**编辑：**

例如，在获取结果时，**Marca、Producto 和 SubProducto**列只显示 ID，但我想要她的名字，那会是什么句子？

我想要这样的结果： ![像这样的结果](../Images/0cdbe5a85a67f50aba83a944554186a6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:12:48.773

希望我没有遗漏您的问题，但是执行此操作的 SQL 很简单：

```
select s.Id_Servicio, c.Nombre
from cat_clientes c, t_servicio s
where c.Id = s.Id_Cliente
and c.Nombre like '%Uno%'; 
```

您可以扩展它（向输出添加更多列）以包含任一表中的其他列。假设您有其他表要链接在一起，您可以构建查询。你提到了 Marca、Producto 等表，但没有提供结构，所以我猜：

```
select s.Id_Servicio, m.Marca, p.Producto, c.Nombre
from cat_clientes c, t_servicio s, t_producto p, t_subproducto sp, t_marca m
where c.Id = s.Id_Cliente
and m.Id = s.Id_Marca
and p.Id = s.Id_Producto
and sp.Id = s.Id_SubProducto
and c.Nombre like '%Uno%'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T23:13:56.380

我的西班牙语不好，但如果我理解正确，您想`LIKE`在 cat_clientes 表中的 P_Nombre （即名称，对吗？）上使用条件，其中客户 ID 在 t_servicio 表中。如果这是正确的，使用简单的`INNER JOIN`应该可以解决问题：

```
SELECT *
FROM t_servicio T
    INNER JOIN cat_clientes C ON C.Id = T.Id_Cliente
WHERE C.P_Nombre LIKE '%queso%' 
```

**编辑：**响应“例如，在获取结果时，Marca、Producto 和 SubProducto 列仅显示 ID，但我想要她的名字，以及句子是什么？”...

如果 Marca、Producto 和 SubProducto 也是 Id，那么就像使用 Id_Cliente 一样，您将需要加入这些键引用的任何表。例如，如果有一个 Products 表，您将添加：

```
SELECT C.P_Nombre, P.Nombre -- (Or whatever column has the product name)
FROM t_servicio T
    INNER JOIN cat_clientes C ON C.Id = T.Id_Cliente
    INNER JOIN Products P ON P.Id = C.Producto
WHERE C.P_Nombre LIKE '%queso%' 
```

SubProducto 和 Marca 也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:14:49.123

```
SELECT * FROM `cat_clientes` AS c LEFT JOIN `t_servicio` AS t ON(c.id = t.Id_Cliente) 
```

# android - PreferenceActivity 中包含的膨胀类错误

> ID：11604722
> 
> 赞同：1
> 
> 时间：2012-07-22T23:08:13.753
> 
> 标签：android, xml, sharedpreferences

> java.lang.RuntimeException：无法启动活动 ComponentInfo{org.emphie.fod/org.emphie.fod.preferences}：android.view.InflateException：二进制 XML 文件第 7 行：膨胀类包含错误

我试图在支持它的版本中包含一个开关首选项，否则是一个复选框首选项。公平地说，我在 include 上找不到任何 docco，但我看到的*示例*都是针对布局的，而不是针对偏好的。

当只有某些元素需要不同的定义时，要求所有首选项片段为其适当的 API 完全定义似乎很疯狂。

屏幕：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" android:enabled="true" android:fragment="org.emphie.fod.preferences$prefFrag1" >
    <PreferenceCategory android:title="Preferences" >
        <include android:key = "@+id/send_sms" xml="@xml/pref_send_sms" />
    </PreferenceCategory>
</PreferenceScreen> 
```

包含的首选项：在 res-v14 中：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >
    <SwitchPreference
        android:defaultValue="true"
        android:disableDependentsState="false"
        android:key="@+id/send_SMS"
        android:summaryOff="Just generate insults"
        android:summaryOn="Actually send the wanker insults"
        android:switchTextOff="No"
        android:switchTextOn="Yes"
        android:title="Send SMS" />
</merge> 
```

在 res-v8 中

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >
    <CheckBoxPreference
        android:defaultValue="true"
        android:disableDependentsState="false"
        android:key="@+id/send_SMS"
        android:summaryOff="Just generate insults"
        android:summaryOn="Actually send the wanker insults"
        android:switchTextOff="No"
        android:switchTextOn="Yes"
        android:title="Send SMS" />
</merge> 
```

感谢您收到指向适当 docco 的链接，以及 google-fu 提示。我在做一些根本上、语法上或愚蠢的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:33:33.673

好吧，经过大量研究，事实证明这是完全不合理和不可能的。

# actionscript-3 - 如何将 Robotlegs 与 Molehill 集成？

> ID：11604724
> 
> 赞同：0
> 
> 时间：2012-07-22T23:09:03.137
> 
> 标签：actionscript-3, molehill

我想扩展 Robotlegs (1.5.2) SignalContext 以允许 AGAL / Molehill 3D。那里有一个 Away3d 端口以及与 Starling 兼容的机器人腿构建的开始 - 但这看起来不完整。至少我想这需要一个自定义 SignalContext 和 MediatorMap 但我想看看其他人是否正在考虑它（可能是下一个 Robotlegs 的主要版本？）

任何关于如何实现这一目标的想法表示赞赏

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:43:09.773

M-model V-iew C-ontroller S-service

信号基本上是在一天结束时注入的变量，其他一切都像往常一样被分开。

Stage2D、Stage3D、StageVideo = 观看次数。

AGAL / 着色器又名墙和上面的油漆（分类视图）

但是，如果它是一个复杂的 Away3D 4.x 项目，为了简单和速度，我不会触及框架。自己采用强大的文件夹化轻松的 mvc 文件夹结构，只需在需要的地方和时间使用一些单例和工厂模式来编写一些东西。

您还需要权衡使用 Robotleg/Pure MVC 等构建项目所需的时间，与实际工作以实现项目目标的框架（通常最终会花费相当多的时间）作斗争的时间。

我经常在此类项目中构建一个轻松的 mvmu（模型、vies、managers、utils）来实现强大的文件夹化，从而提供更好的性能并实现 RAD（快速应用程序开发）并聘请自由职业者从事这些工作。有些人转身走了，我不知道这里发生了什么。如果自由职业者无法理解 4 个文件夹（models、views、managers & utils）的概念，其中包含与任务相关的子文件夹，例如 view->ui、models->constants、models->config、managers->xml ，managers->navigation，managers->auto_navigation，utils->CreateReflectionBitmap 等。他们已经为自己赢得了一张返回寻找工作板的快速票。

结构：

```
 main.as (entry point)
    com [dir]
     --- greensock [dir] (example of 3rd party api location)
     --- application [dir]
         --- application.as (instantiator and startup handler)
         --- models [dir]
         --- views [dir]
         --- managers [dir]
         --- utils [dir] 
```

我建议在 Robotlegs 网站上注册并在那里提出很多问题，那里有很多很好的支持，而且 google 小组也很有用。

祝你好运。

D

# google-chrome - 使用 Chrome 打印到 PDF 时嵌入 @font-face 字体

> ID：11604726
> 
> 赞同：10
> 
> 时间：2012-07-22T23:09:27.607
> 
> 标签：google-chrome, pdf, printing, font-face

我有一个页面，我只在 Chrome 中使用一堆自定义字体呈现：

```
@font-face{ font-family: BodyFont; src: url('fonts/font.ttf'); } 
```

浏览器完美呈现一切。但是，当我尝试将其打印为 PDF 时，有两个问题：

1.  Chrome 的打印预览有时不会以某些字体显示文本，或者会损坏它。这个视图会传递给我使用的任何打印设备。关闭/重新打开选项卡不会更改预览。但是，重新启动浏览器会。

2.  无论我做什么，我都无法生成嵌入字体的 PDF。我尝试过 Chrome 的“保存到 PDF”，它会生成 Adob​​e Acrobat 无法打开的 PDF。各种 PDF 打印机（例如 Adob​​e 的）不会生成嵌入这些字体的 PDF，即使将`@font-face`s 替换为标准 Web 字体确实会生成嵌入字体。

感谢您对这两个问题的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:25:28.007

在 CSS 或 HTML 中注释掉媒体查询，重新打开浏览器，它会在打印预览中加载网络字体，然后，重新添加媒体查询部分，它就可以工作了。

我从这里找到了这个解决方法：<a href="https://getsatisfaction.com/fontdeck/topics/_font_face_embedded_fonts_do_not_show_up_in_a_print_preview" rel="nofollow">@font-face 嵌入字体不显示在打印预览中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T09:19:27.033

打印时尝试加载默认字体。将以下行添加到您的 CSS 并尝试。

```
@media print {
 body {
      font-family: Arial, Helvetica, sans-serif;       
  }
} 
```

# jquery - 创建自定义 Jquery 滑块

> ID：11604727
> 
> 赞同：2
> 
> 时间：2012-07-22T23:09:38.567
> 
> 标签：jquery, html, css

这是我到目前为止所拥有的：http: [//jsfiddle.net/6j4cT/3/](http://jsfiddle.net/6j4cT/3/)

很抱歉没有粘贴代码，因为要添加到这篇文章中的内容太多。

首先，到目前为止我所拥有的 JQuery 没有在“新闻项目”中选择第一个 LI 并添加“活动”类。

此外，如果有人想将我的代码重写为更清晰的格式，欢迎您这样做。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:24:00.057

只需将类名`active`赋予第一个`li`元素：

```
<ul id="news-items">
    <li class="active">
        <a href="#">Node 1</a>
    </li>
    <li>
        <a href="#">Node 2</a>
    </li>
</ul> 
```

参考：[**jsFiddle**](http://jsfiddle.net/6j4cT/10/)

* * *

状态更新：[**jsFiddle Rev 2**](http://jsfiddle.net/6j4cT/11/)

您还可以使用 jQuery 添加类，如下所示：

```
var periodToChangeSlide = 5000;
var pp_slideshow = undefined;
var currentPage = 0;
$('#news-items li:first').addClass('active'); 
```

* * *

通过消息请求重新修订：[**jsFiddle Rev 4**](http://jsfiddle.net/6j4cT/14/)

```
var periodToChangeSlide = 5000;
var pp_slideshow = undefined;
var currentPage = 0;
$('#news-feature-img-wrap li').css('display','list-item').slice(1).css('display','none');
$('#news-items li:first').addClass('active'); 
```

根据您的消息评论，新增内容将`display:list-item`仅设置第一项，同时设置`display:none`其余项目，因为已通过 jQuery`.slice()`方法将其切掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:28:27.133

几天后回到 SO`:)`解决方案：**工作演示**- [http://jsfiddle.net/qJea8/](http://jsfiddle.net/qJea8/)或[http://jsfiddle.net/qJea8/show](http://jsfiddle.net/qJea8/show)

现在的行为当您单击`Node 1`它时将转到第一张幻灯片，依此类推下一张。

罪魁祸首是：`var index = $(this).parent().index();`更改为，`var index = $(this).index();`因为父级将始终返回相同的索引。

休息我希望它有助于事业。`:)`

**代码**

```
// News Article Slideshow
var periodToChangeSlide = 5000;
var pp_slideshow = undefined;
var currentPage = 0;
$("#news-feature-wrap #news-items li").click(function() {
    $(this).parent().addClass('active');
    $(this).parent().siblings().removeClass('active');

    var index = $(this).index();
    var toShow = $("#news-feature-wrap #news-feature-img-wrap li").eq(index);
    toShow.show();
    toShow.siblings().hide();
    currentPage = index;
    $.stopSlideshow();
});

$.startSlideshow = function() {
    if (typeof pp_slideshow == 'undefined') {
        pp_slideshow = setInterval($.startSlideshow, periodToChangeSlide);
    } else {
        $.changePage();
    }
}

$.stopSlideshow = function() {
    clearInterval(pp_slideshow);
    pp_slideshow = undefined;
}
$.changePage = function() {
    var numSlides = $('#news-feature-wrap #news-feature-img-wrap li').length;
    currentPage = (currentPage + 1) % numSlides;
    var menu = $('#news-feature-wrap #news-items li').eq(currentPage);
    menu.addClass('active');
    menu.siblings().removeClass('active');

    var toShow = $("#news-feature-wrap #news-feature-img-wrap li").eq(currentPage);
    toShow.show();
    toShow.siblings().hide();
}

$.startSlideshow();​ 
```

**工作图像**

![在此处输入图像描述](../Images/c4f522410ba0e13c9b389be97551c5d9.png)

# xml - 在 VB 中从多个 XML 文件创建一个 Box List

> ID：11604730
> 
> 赞同：0
> 
> 时间：2012-07-22T23:09:56.197
> 
> 标签：xml, vb.net, list

我正在为几项运动创建一个计分程序。您可以创建玩家资料并跟踪您的职业生涯。当您创建职业时，它会自动创建一个 XML 文档，如下所示：

```
<Data>
 <Player>
  <Name>Eve</Name>
  <Hometown>Serbia</Hometown>
  <Score>0</Score>
 </Player>
</Data> 
```

每个播放器都有一个文档“Playername.xml”。现在，我有一个 BoxList 可以管理和查看所有球员职业。

* * *

**如何用 XML 信息填充 BoxList？**

*一个列表元素对应一个播放器（所以一个 XML 文件）。以及姓名、家乡和分数的 3 列。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:41:08.133

假设这是针对 VB.NET 并假设您将这些 xml 数据放在单独的字符串中，您可以执行以下操作，例如：

```
Dim xml1 As String = "<Data>" &  " <Player>" &  "  <Name>Eve</Name>" &  "  <Hometown>Serbia</Hometown>" &  "  <Score>0</Score>" &  " </Player>" &  "</Data>"
Dim xml2 As String = "<Data>" &  " <Player>" &  "  <Name>Ricardo</Name>" &  "  <Hometown>Armenia</Hometown>" &  "  <Score>9</Score>" &  " </Player>" &  "</Data>"

Dim doc As XDocument = XDocument.Load(New StringReader("<root>" & xml1 & xml2 & "</root>"))
Dim query = From c In doc.Descendants("Player") 
select  
        New Player With  {  .Name = c.Element("Name").Value, 
              .Hometown = c.Element("Hometown").Value,
              .Score = c.Element("Score").Value } 
```

播放器在哪里：

```
Public Class Player
   Public Property Name As String 
    Public Property Hometown As String
    public Property Score as Integer
End Class 
```

现在您拥有集合中的所有内容，您可以使用将其绑定到您的列表框`listbox.DataSource=query;`

只需设置`lisbox.DisplayMember`为类的`Name`属性，`Player`如下所示：

```
listbox.DisplayMember="Name" 
```

# java - Netbeans 属性表 Swing 控件在导航器窗口中的容器中

> ID：11604731
> 
> 赞同：1
> 
> 时间：2012-07-22T23:10:23.247
> 
> 标签：java, swing, layout, netbeans, border-layout

虽然 JButton 具有 Properties 表中的 Layout 类别，但其他组件没有。具体来说，JList 是 JScrollPane 的一部分，显然它是不可点击的。

如何选择 JScrollPane 来编辑其方向属性？

在 Netbeans GUI 构建器中，以下代码是自动生成的并且不可编辑：

```
/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

jButton1 = new javax.swing.JButton();
jScrollPane1 = new javax.swing.JScrollPane();
jTextPane1 = new javax.swing.JTextPane();
jScrollPane2 = new javax.swing.JScrollPane();
jList1 = new javax.swing.JList();
jScrollPane3 = new javax.swing.JScrollPane();
jList2 = new javax.swing.JList();
jScrollPane4 = new javax.swing.JScrollPane();
jTable1 = new javax.swing.JTable();

setLayout(new java.awt.BorderLayout());

jButton1.setText("jButton1");
add(jButton1, java.awt.BorderLayout.CENTER);

jScrollPane1.setViewportView(jTextPane1);

add(jScrollPane1, java.awt.BorderLayout.PAGE_START);

jList1.setModel(new javax.swing.AbstractListModel() {
    String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
    public int getSize() { return strings.length; }
    public Object getElementAt(int i) { return strings[i]; }
});
jScrollPane2.setViewportView(jList1);

add(jScrollPane2, java.awt.BorderLayout.PAGE_END);

jList2.setModel(new javax.swing.AbstractListModel() {
    String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
    public int getSize() { return strings.length; }
    public Object getElementAt(int i) { return strings[i]; }
});
jScrollPane3.setViewportView(jList2);

add(jScrollPane3, java.awt.BorderLayout.LINE_END);

jTable1.setModel(new javax.swing.table.DefaultTableModel(
    new Object [][] {
        {null, null, null, null},
        {null, null, null, null},
        {null, null, null, null},
        {null, null, null, null}
    },
    new String [] {
        "Title 1", "Title 2", "Title 3", "Title 4"
    }
));
jScrollPane4.setViewportView(jTable1);

add(jScrollPane4, java.awt.BorderLayout.LINE_START);
}// </editor-fold>
// Variables declaration - do not modify 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:44:41.913

选择要修改的面板，在 中`PropertySheet`，向下滚动到`Layout`类别。从那里修改`direction`属性。

# extjs - 无法将过滤器重新应用于网格

> ID：11604735
> 
> 赞同：3
> 
> 时间：2012-07-22T23:11:35.863
> 
> 标签：extjs, extjs4

我有一个`Ext.grid.Panel`需要对其应用过滤器的网格 ( )。这些过滤器将是预定义的（与您通过从网格列下拉列表中手动选择它们来设置的过滤器相反。）

我有两个功能：

```
// Clear filter
function() {
    grid.filters.clearFilters();
}

// Apply filter
function() {
    grid.filters.clearFilters();

    grid.filters.addFilter({
        dataIndex: 'size',
        type: 'list',
        options: ['small', 'medium', 'large', 'extra large'],
        value: ['small', 'medium']
    });

    store.load();
} 
```

第一次应用过滤器效果很好。但是，如果您调用该函数清除过滤器，然后再次尝试应用过滤器，则不会过滤数据。我根本没有收到任何错误或反馈。

我也不确定这是否是添加过滤器的推荐方式。我在网上看到了过滤器直接应用于商店的示例，但据我所见，网格不会识别出这些过滤器已到位。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:15:19.417

我也必须这样做。它是一个更大的函数的一部分，该函数将 JSON“网格格式对象”（包含任意数量的网格过滤器、可见列以及排序列和方向）应用于渲染的网格面板。

要求是用户需要能够将现有网格面板的可见列、应用过滤器和应用排序保存到具有名称的数据库中，然后能够在以后将这三件事重新应用到网格面板以获得相同的结果过滤器、可见列和排序状态，方法是选择它们保存的格式。

我也不想使用商店过滤器，因为如果用户想要调整它们，则需要在网格面板过滤器功能 UI（网格过滤器下拉菜单）上显示选定的过滤器选项。

以下是用户保存的网格格式 JSON 示例：

```
{
"columns":[
    "first_name",
    "last_name",
    "course",
    "course_room",
    "student_status",
    "start_date",
    "schedule",
    "time_on_course",
    "attendance",
    "this_period",
    "acct_bal"
  ],
"filters":[{
    "field":"student_status",
    "data":{
        "type":"list",
        "value":"Attending"
    }
}],
"sort":{
        "property":"start_date",
        "direction":"ASC"
    }
} 
```

这是函数，JSON用作参数：

```
applyLogFormat: function(format) {
    var log = this.getLog(),
        format = Ext.JSON.decode(format);

    log.filters.autoReload = false;

    // apply the grid filters correctly
    log.filters.clearFilters();
    Ext.each(format.filters, function(filter) {
        var gridFilter = log.filters.getFilter(filter.field);

        gridFilter.setActive(true);
        switch(gridFilter.type) {

            case 'date':
                var dateValue = Ext.Date.parse(filter.data.value, 'm/d/Y'),
                    value = filter.data.comparison == 'gt' ? {after: dateValue} : {before: dateValue};

                gridFilter = log.filters.getFilter(filter.field);
                gridFilter.setValue(value);
                break;

            case 'list':
                gridFilter = log.filters.getFilter(filter.field);
                gridFilter.menu.setSelected(gridFilter.menu.selected, false);
                gridFilter.menu.setSelected(filter.data.value.split(','), true);
                break;

            default :
                gridFilter = log.filters.getFilter(filter.field);
                gridFilter.setValue(filter.data.value);
                break;
        }
    });

    // remove any pre-existing sorting from the grid
    Ext.each(log.columns, function(column, index) {
        if (column.hasCls('x-column-header-sort-ASC') ||
            column.hasCls('x-column-header-sort-DESC')) {
            log.columns[index].setSortState(null);
            return false;
        }
    });

    // show only the specified columns
    log.suspendLayout = true;
    Ext.each(log.columns, function(column) {
        if (column.dataIndex) {
            column.setVisible(Ext.Array.contains(format.columns, column.dataIndex));
        }
    });
    log.suspendLayout = false;
    log.doComponentLayout();

    // set the sorter
    if (format.sort) {
        var column = log.down('gridcolumn[dataIndex=' + 
            format.sort.property + ']');
        column.setSortState(format.sort.direction);
        log.filters.autoReload = true;
    } else {
        log.store.sorters.clear();
        log.store.loadPage(1);
        log.filters.autoReload = true;
    }
} 
```

这一切都是为 4.1.0 完成的

**编辑：**

我意识到实现的一个重要部分是从该函数中看不到的。

通常，`filter feature`只有在用户实际单击其中一个时，才会创建网格面板菜单。然后它们都被创建了。我想这是为了节省内存？

显然，在创建过滤器菜单之前，此功能将不起作用。

为了处理这个问题，我在网格面板的事件中明确地创建了它们，`afterrender`以便它们立即可用。即使用户没有单击过滤器菜单之一，此功能也将起作用。

我正在使用 MVC 模式，所以我从网格面板的控制器中进行了操作，如下所示：

```
// code from gridpanel's controller
var me = this;
me.control({

    'log': {
        afterrender: function() {
            me.getLog().filters.createFilters();
        },
    },

    // ... other event handlers

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:17:32.867

在你的网格初始化代码中试试这个

```
filtersCfg.createFilters();

filtersCfg.filters.each(function (filter) {
     filter.setActive(true);
     filter.setActive(false);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T00:58:24.003

你为什么不应用过滤`grid.filters`器`grid.store`？Ext.data.Store 有以下方法`filter()`和`clearFilter()`

# java - JMenuItem 不能动态添加组件

> ID：11604749
> 
> 赞同：0
> 
> 时间：2012-07-22T23:14:24.100
> 
> 标签：java, swing, jframe, cardlayout, jmenu

我有一个带有`JMenuBar`. 当我按下其中一个时，`JMenuItems`我想`JLabel`在框架中添加一个，但它不起作用。我不明白...它在同一个班级。

```
public class GuiMain {
    private JLabel logo_headsup;
    JFrame frame1 = new JFrame();
    JMenuBar menubar;

    // other stuff
    public GuiMain() {
        frame1.setLayout(null);
        logo_headsup = new JLabel(new ImageIcon(getClass().getResource(
                "logo_headsup.png")));
        logo_headsup.setBounds(headImage.getWidth() + 2, 120, 271, 46);
        menubar = new JMenuBar();
        menubar.setOpaque(false);
        menubar.setBorderPainted(false);
        menubar.setBounds(0, 0, 750, 30);

        JMenu view = new JMenu("View");
        view.setMnemonic('V');
        view.setFont(new Font("Verdana", Font.BOLD, 10));
        Color myColor = new Color(192, 0, 0);
        view.setForeground(myColor);
        JMenuItem hu = new JMenuItem("Heads-up");
        JMenuItem sh = new JMenuItem("Short-handed");
        JMenuItem fr = new JMenuItem("Full-ring");

        hu.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("You pressed headsup"); // testing & it works
                frame1.remove(logo_fullring);
                frame1.remove(logo_shorthanded);
                frame1.add(logo_headsup).repaint(); // now it`s working

            }
        });
        view.add(hu);
        view.add(sh);
        view.add(fr);
        menubar.add(view);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T00:17:50.963

我强烈支持 Andrew Thompson 的使用 CardLayout 的建议，因为这可以简化一切。使用带有 CardLayout 的 JMenu 的示例：

```
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;

public class Swapper {
   private static final String BLUEPRINT = "http://duke.kenai.com/IPG/Duke_Blueprint.gif";
   private static final String COOKIES = "http://duke.kenai.com/IPG/Duke_Cookies.gif";
   private static final String INT_FLOAT_CHAR = "http://duke.kenai.com/IPG/Duke_Int_Float_Char.gif";
   private static final String THREAD = "http://duke.kenai.com/IPG/Duke_Thread.gif";

   private JPanel mainPanel = new JPanel();
   private JMenu menu = new JMenu("Menu");
   private JMenuBar menuBar = new JMenuBar();
   private CardLayout cardlayout = new CardLayout();

   public Swapper() {
      mainPanel.setLayout(cardlayout);
      mainPanel.setBackground(Color.white);
      addCard("Blueprint", BLUEPRINT);
      addCard("Cookies", COOKIES);
      addCard("Int Float Char", INT_FLOAT_CHAR);
      addCard("Thread", THREAD);

      menuBar.add(menu);
   }

   private void addCard(String name, String imagePath) {
      BufferedImage img;
      try {
         URL imgUrl = new URL(imagePath);
         img = ImageIO.read(imgUrl);
         ImageIcon icon = new ImageIcon(img);
         JLabel label = new JLabel(icon);
         mainPanel.add(label, name);
         menu.add(new JMenuItem(new MenuAction(name)));

      } catch (MalformedURLException e) {
         e.printStackTrace();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }

   public JComponent getMainPanel() {
      return mainPanel;
   }

   public JMenuBar getMenuBar() {
      return menuBar;
   }

   private class MenuAction extends AbstractAction {

      public MenuAction(String name) {
         super(name);
      }

      @Override
      public void actionPerformed(ActionEvent arg0) {
         String name = getValue(NAME).toString();
         cardlayout.show(mainPanel, name);
      }
   }

   private static void createAndShowGui() {
      Swapper swapper = new Swapper();

      JFrame frame = new JFrame("Swapper");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(swapper.getMainPanel());
      frame.setJMenuBar(swapper.getMenuBar());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

这导致：

![在此处输入图像描述](../Images/ed5b54c00bd412e24d52a2b884e668b3.png) ![在此处输入图像描述](../Images/d1544f11b7f16901c62b8a1469711828.png)

# sql - 在一个语句中从不同的表中获取数据？

> ID：11604752
> 
> 赞同：0
> 
> 时间：2012-07-22T23:14:45.397
> 
> 标签：sql

我有一个游戏，桌子看起来像：

```
// users
user_id | favorite_color

// games
game_id | game_name

// game_participants
id | fk_game_id | fk_user_id 
```

我想在特定游戏中获得所有用户最喜欢的颜色。我可以通过几个步骤来做到这一点，例如：

```
// get the game.
Game game =  select * from games where game_id = 'abc';

// get each user's favorite color, one at a time.
for (participants in game) {
    select favorite_color from users where user_id = game.participants[i].id;
} 
```

但是有没有办法在一个选择语句中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:16:45.803

```
SELECT favorite_color
FROM games 
    INNER JOIN game_participants on games.game_id = game_participants.fk_game_id
    INNER JOIN users on users.user_id = game_participants.fk_user_id
WHERE game_id = 'abc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:22:30.383

```
SELECT users.favourite_color
FROM game_participants 
    INNER JOIN users ON game_participants.fk_user_id = users.user_id
WHERE fk_game_id = 'abc' 
```

# sql - SQL查询在父子关系中搜索并检索所有节点及其所有父节点

> ID：11604755
> 
> 赞同：1
> 
> 时间：2012-07-22T23:15:33.163
> 
> 标签：sql, sql-server, tsql

我有带有父子关系的数据库表，例如：

```
ID         Name         ParentID
-------------------------------------
1         Computer          0
2         Software          1
3         Hardware          1
4         Windows           2
5         Games             0
6         Windows           5
7         Linux             5
8         3D                6
9         DirectX           8 
```

我想在这张表上搜索单词“Windows”，我想要的结果如下：

```
ID         Name         ParentID
-------------------------------------
1         Computer          0          <== Grandparent of 4
2         Software          1          <== Parent of 4
4         Windows           2          <== 4
5         Games             0          <== Parent of 6
6         Windows           5          <== 6 
```

我的意思是所有与搜索词有关系的**父母**都应该保留，其余的应该从记录中删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:17:29.180

您可以使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx?ppud=4)

```
with C as 
(
  select T.ID, T.Name, T.ParentID
  from @T as T
  where Name = 'Windows'
  union all
  select T.ID, T.Name, T.ParentID
  from YourTable as T
    inner join C
      on T.ID = C.ParentID
)
select ID, Name, ParentID
from C
order by ID; 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/75843)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:27:13.770

使用[`HierarchyId`数据类型](http://msdn.microsoft.com/en-us/library/bb677290.aspx)，然后使用`IsDescendant`of 方法

```
SELECT * FROM Table
WHERE @searchId.IsDescendantOf(ID) = 1 
```

这允许您执行任意递归和/或循环。它快速而直接。

# twitter-bootstrap - 如何在多个属性上搜索对象（knockout.js+ twitter bootstrap typeahead）？

> ID：11604756
> 
> 赞同：5
> 
> 时间：2012-07-22T23:15:39.737
> 
> 标签：twitter-bootstrap, knockout.js, typeahead

我在这一点上:)

[http://blogs.msdn.com/b/rebond/archive/2012/07/18/knockout-js-binding-for-bootstrap-typeahead-plugin.aspx](http://blogs.msdn.com/b/rebond/archive/2012/07/18/knockout-js-binding-for-bootstrap-typeahead-plugin.aspx)

```
// Bootstrap.Typeahead binding: presently requires custom version from gist: https://gist.github.com/1866577.
// Use like so: data-bind="typeahead: { target: selectedNamespace, source: namespaces }"
ko.bindingHandlers.typeahead = {
  init: function(element, valueAccessor) {
  var binding = this;
  var elem = $(element);
  var value = valueAccessor();

  // Setup Bootstrap Typeahead for this element.
  elem.typeahead(
  {
    source: function() { return ko.utils.unwrapObservable(value.source); },
    onselect: function(val) { value.target(val); }
  });

// Set the value of the target when the field is blurred.
elem.blur(function() { value.target(elem.val()); });
  },
   update: function(element, valueAccessor) {
var elem = $(element);
var value = valueAccessor();
elem.val(value.target());
  }
 }; 
```

我有 4 个属性的 X 类。

我想在它的 3 个属性上搜索 X 对象数组。（其他属性为id）

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T19:42:14.307

在您的 .typeahead 调用中，传递一个[匹配器函数](http://twitter.github.com/bootstrap/javascript.html#typeahead)，该函数将查看您的其他属性：

```
elem.typeahead({
   source: function() { return ko.utils.unwrapObservable(value.source); },
   onselect: function(val) { value.target(val); },
   matcher: function(item) {
      // Check if it matches Foo, Bar, or Baz properties.
      return item.Foo.indexOf(this.query) >= 0 || item.Bar.indexOf(this.query) >= 0 || item.Baz.indexOf(this.query) >= 0;
   }
}); 
```

# python - 如何在 QtGui 中创建动画？

> ID：11604757
> 
> 赞同：1
> 
> 时间：2012-07-22T23:15:40.433
> 
> 标签：python, animation, pyqt, pyqt4, qgraphicsview

我对 Python 和 Qt 还很陌生，但我正在尝试创建一个带有一些动画图形元素的 GUI。我可以制作简单的动画作品；下面的代码`class MyView`在调用时会起作用，但`class GraphicsView`不是动画！

谁能帮我看看问题？

问题出在GraphicsScene类中，我认为：

```
import sys
from PyQt4 import QtGui, QtCore

class MyView(QtGui.QGraphicsView):
    def __init__(self):
        QtGui.QGraphicsView.__init__(self)

        self.scene = QtGui.QGraphicsScene(self)
        self.item = QtGui.QGraphicsEllipseItem(-20, -10, 40, 20)
        self.scene.addItem(self.item)
        self.setScene(self.scene)

        # Remember to hold the references to QTimeLine and QGraphicsItemAnimation instances.
        # They are not kept anywhere, even if you invoke QTimeLine.start().
        self.tl = QtCore.QTimeLine(1000)
        self.tl.setFrameRange(0, 100)
        self.a = QtGui.QGraphicsItemAnimation()
        self.a.setItem(self.item)
        self.a.setTimeLine(self.tl)

        # Each method determining an animation state (e.g. setPosAt, setRotationAt etc.)
        # takes as a first argument a step which is a value between 0 (the beginning of the
        # animation) and 1 (the end of the animation)
        self.a.setPosAt(0, QtCore.QPointF(0, -10))
        self.a.setRotationAt(1, 360)

        self.tl.start()

#create the graphicsView which contains the graphicsScene
class GraphicsView(QtGui.QGraphicsView):
    #initialize and set dragMode and renderHints for everything inside the view
    def __init__(self, parent=None):
        super(GraphicsView, self).__init__(parent)

        #the dragMode should be changed to use the rihgt-mousebutton
        self.setDragMode(QtGui.QGraphicsView.ScrollHandDrag)

        self.setRenderHint(QtGui.QPainter.Antialiasing)
        self.setRenderHint(QtGui.QPainter.TextAntialiasing)

    #crate a zoom function for the mouse-wheel
    def wheelEvent(self, event):
        factor = 1.5 ** (event.delta() / 240.0)
        self.scale(factor, factor)

#create the GraphicsScene containing the main graphics
class GraphicsScene(QtGui.QGraphicsScene):

    def animate(self):

        self.animations = range(3)

        #move item to position(x,y) at time t
        def animate_to(item,x,y,t):

            animation = QtGui.QGraphicsItemAnimation()
            #create a timeline of 1 second
            timeline = QtCore.QTimeLine(2000)
            #number of steps in timeline (100)
            timeline.setFrameRange(0,100)
            #set position at time t
            animation.setPosAt(t, QtCore.QPointF(x,y))
            #apply this to "item"
            animation.setItem(item)
            #add timeline to the animation
            animation.setTimeLine(timeline)

            #output of this definition is "animation"
            return animation

        self.animations[0] = animate_to(self.geos[0],200,200,0.2)
        self.animations[1] = animate_to(self.geos[1],200,200,0.2)
        self.animations[2] = animate_to(self.geos[2],200,200,0.2)

        #animation.timeline().start()
        self.animator.start(2000)

    def __init__(self, parent=None):
        QtGui.QGraphicsScene.__init__(self, parent)
        #set the size of the scene
        self.setSceneRect(0,0,2000,2000)

        #self.addRect(QtCore.QRectF(800,800,200,200))

        #---create the scene-geometries ---   

        #empty list to hold the geometries
        self.geos = []

        #create stuff to add to the scene
        geo_01 = QtGui.QGraphicsEllipseItem(800,800,200,200)
        geo_02 = QtGui.QGraphicsEllipseItem(850,850,300,300)
        geo_03 = QtGui.QGraphicsEllipseItem(900,900,400,400)
        #add stuff to the scene
        self.addItem(geo_01)
        self.addItem(geo_02)
        self.addItem(geo_03)

        #put stuff into list so it can be referenced
        self.geos.append(geo_01)
        self.geos.append(geo_02)
        self.geos.append(geo_03)

        #----do the animation thing---
        self.animator = QtCore.QTimer()

        self.animator.timeout.connect(self.animate)

        self.animate()

#Create a new class which inherrits from "QtGui.QMainWindow"
class Example(QtGui.QMainWindow):

    def __init__(self):
        #The "super()"-method returns the parrent object of the example-class
        #and it's constructor is called ("__init__")
        super(Example, self).__init__()

        self.initUI()

    #create the GUI
    def initUI(self):

        """---create the buttons---"""

        #set a font for the tool-tips
        QtGui.QToolTip.setFont(QtGui.QFont('SansSerif', 10))

        #create a button and a tool-tip for the button
        btn_01 = QtGui.QPushButton('Button', self)
        btn_01.setToolTip('This is a <b>QPushButton</b> widget')
        #resize the button with a recommended size (.sizeHint())
        btn_01.resize(btn_01.sizeHint())

        #create a button and a tool-tip for the button
        btn_02 = QtGui.QPushButton('Button', self)
        btn_02.setToolTip('This is a <b>QPushButton</b> widget')
        #resize the button with a recommended size (.sizeHint())
        btn_02.resize(btn_02.sizeHint())

        """----create a layout----"""

        #create the main widget, which holds the layout
        self.main_widget = QtGui.QWidget(self)

        #create a vertical box layout to hold the buttons on the right
        vbox = QtGui.QVBoxLayout()
        vbox.addStretch(1)
        vbox.addWidget(btn_01)
        vbox.addWidget(btn_02)  

        #create horizontal box layout to hold the vbox and the main area
        hbox = QtGui.QHBoxLayout()

        #store the GraphicsScene in a variable so it is not destroyed
        self.scene = GraphicsScene()
        #add the scene to the GraphicsView
        view = GraphicsView(self.scene)

        hbox.addWidget(view)
        hbox.addStretch(1)
        hbox.addLayout(vbox)

        self.main_widget.setLayout(hbox)
        self.setCentralWidget(self.main_widget)

        #set the possition and size of the window, then set the window title
        #these methods have been inherited by the "QtGui.QWidget"-class
        self.setGeometry(100, 100, 700, 500)
        self.setWindowTitle("PatternNexus...Maybe?")
        #self.setWindowIcon(QtGui.QIcon('web.png'))

        self.show()

    def closeEvent(self, event):
        #create a messagebox to confirm quit
        # when QtGui.QWidget is closed the QtGui.QCloseEvent is generated
        # to modify its behaviour the event handler (closeEvent()) must be reinplemented

        #create a msgBox with 2 buttons
        #4th argument is the button combination
        #5th argument is the button with initial ketboard focus
        reply = QtGui.QMessageBox.question(self, 'Message',
            "Are you leaving?", QtGui.QMessageBox.Yes | 
            QtGui.QMessageBox.No, QtGui.QMessageBox.No)

        #test the return value, is "yes" the event is accepted
        if reply == QtGui.QMessageBox.Yes:
            event.accept()
        else:
            event.ignore()

def main():
    #start the application
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

#if this module (.py-file) is run as the main program the statement is true
#if this module is imported the statement will return false
if __name__ == '__main__':
    main() 
```

我对此进行编码的主要参考资料是“使用 python 和 QT 进行快速 GUI 编程 - 第 12 章”，这些链接：[http](http://lateral.netmanagers.com.ar/stories/BBS53.html) ://lateral.netmanagers.com.ar/stories/BBS53.html和[http://www.diotavelli .net/PyQtWiki/GraphicsView_-_SimpleAnimation](http://www.diotavelli.net/PyQtWiki/GraphicsView_-_SimpleAnimation)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:38:33.160

所以我的问题的答案是：
在动画定义中添加：[animation.timeLine().start() for animation in self.animations] 开始时间线

# sql - sqlite char，ascii 函数

> ID：11604766
> 
> 赞同：8
> 
> 时间：2012-07-22T23:17:12.260
> 
> 标签：sql, sqlite

sqlite 中是否有任何解决方法可以弥补“char()”和“ascii()”函数的缺失？

例如：

```
char(97) => 'a'
ascii('a') => 97 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-05-09T15:22:10.080

我知道这为时已晚，但是：

```
SELECT unicode('a') --ascii('a')
SELECT char(97)     --char(97) 
```

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-31T18:52:40.527

从写这个问题开始，SQLite 显然增加了一个`CHAR()`功能：

```
SELECT CHAR(97) -- Result is 'a' 
```

但是，我在另一个方向上最接近的是`HEX()`函数：

```
SELECT HEX('a') -- Result is 61 (hexadecimal, is equal to 97 decimal) 
```

获得十进制`ASCII`字符值似乎需要一些复杂的工作......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T01:01:17.880

我想，如果你真的想要，你可以创建一个包含一`ASCIICHAR`列和一`ASCIICODE`列的值的“ASCII 表”表，并用 ASCII 表填充它。然后您的查找可以在查询/子查询中执行：

```
SELECT ASCIICHAR FROM ASCIITABLE WHERE ASCIICODE = 97; 
```

确实，Richard J. Ross III 的评论是关于钱的——如果您使用 SQLite，您可能正在通过您的调用代码访问它，计算不能在那里完成吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T00:36:55.560

虽然转换不太可能，但 sqlite 确实在此查询中识别 ASCII：

```
select * from segments where substr(name, 1, 1) < 'A' or substr(name, 1, 1) > 'Z' and substr(name, 1, 1) < 'a'; 
```

可能的结果：0-9 和所有 ASCII < 'a'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T18:29:11.447

实现在 C 中执行转换的 sqlite3 用户函数 ascii() 和 char() 或通过支持 sqlite3 用户函数（例如在 python 中）的另一种语言包装器将是微不足道的。

[http://www.sqlite.org/c3ref/create_function.html](http://www.sqlite.org/c3ref/create_function.html)
[https://docs.python.org/2/library/sqlite3.html](https://docs.python.org/2/library/sqlite3.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-21T21:36:39.867

您可以基于此站点上的 sqlite 扩展库实现您自己的 ascii 版本：http: [//sqlite.1065341.n5.nabble.com/Extension-functions-for-SQLite-in-C-for-free- td18942.html](http://sqlite.1065341.n5.nabble.com/Extension-functions-for-SQLite-in-C-for-free-td18942.html)

我已修改此代码以添加功能，但不是专门针对您的。它应该很简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-03T21:29:27.733

对于旧版本，使用 cast(X'61' as text) 而不是 char(97)。61 是 97 的十六进制表示。

# javascript - 使用 jQuery 的 IE 限制警告

> ID：11604768
> 
> 赞同：0
> 
> 时间：2012-07-22T23:17:36.347
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8, internet-explorer-9

我想在本地运行我的应用程序，所有的图像、样式、脚本都在同一个目录中，但是 IE 给出了限制消息，尽管 MOTW 标记。

我试图将所有脚本放在同一个文件中 - 没有结果。谷歌搜索了网络的每个角落，仍然没有结果。

如果消息只有一次那么没问题，但是每次我用 IE 打开应用程序时都会显示消息，我关心的是用户，而不是我自己。每次都要求用户“允许”应用程序运行真的不是我想要的。

顺便说一句，我正在使用 jQuery。

我应该怎么办？如果我希望我的应用程序在本地运行，IE 的解决方案是什么。100% 本地化，没有互联网连接。

# symfony - Symfony2：为 S3 使用 Finder 组件

> ID：11604772
> 
> 赞同：2
> 
> 时间：2012-07-22T23:17:52.310
> 
> 标签：symfony, amazon-s3

在[此页面上](http://symfony.com/doc/current/components/finder.html)，我读到（向下滚动）您可以使用 Symfony 的 Finder 组件来遍历 S3 存储桶，如下所示：

```
use Symfony\Component\Finder\Finder;

$s3 = new \Zend_Service_Amazon_S3($key, $secret);
$s3->registerStreamWrapper("s3");

$finder = new Finder();
$finder->name('photos*')->size('< 100K')->date('since 1 hour ago');
foreach ($finder->in('s3://bucket-name') as $file) {
    // ... do something

    print $file->getFilename()."\n";
} 
```

但我不知道在哪里可以获得 \Zend_Service_Amazon_S3 类以及如何使其与 Symfony 一起使用，因为它不使用 PHP 5.3 命名空间。我下载了新的 zend 框架，发现 S3.php 继承了一些其他文件。我需要把它放在哪里以及如何包含它？

旁注：我找到了一个类（Orchestra S3 Stream），它也可以读取 S3 存储桶，但安装它失败，因为它使用了 pear 包，我在文件中遇到了一些路径问题。我想如果我可以使用 Finder 组件那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:52:55.727

Zend 现在遵循 PSR-0 命名空间约定[http://phpmaster.com/autoloading-and-the-psr-0-standard/](http://phpmaster.com/autoloading-and-the-psr-0-standard/)你可以只使用你需要的 paquage [http://packages.zendframework.com/#作曲家](http://packages.zendframework.com/#composer)

# c# - 有条件地禁用 ASP.NET MVC 控制器

> ID：11604773
> 
> 赞同：19
> 
> 时间：2012-07-22T23:17:57.707
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

有条件地禁用 ASP.NET MVC 控制器的最佳方法是什么？

如果 web.config 中的某个值为“true”，我想访问控制器操作，如果为“false”，则为 404

我应该写自己的属性吗？

**更新**：寻找比动作过滤器属性更优雅的解决方案（能够将非常量参数传递给属性构造函数）

```
 [AttributeUsage(AttributeTargets.Class, AllowMultiple = true, Inherited = true)]
    public class CloseForSomeSettingAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            bool mySettingValue = MySettingManager.GetMySettingValue();

            if (mySettingValue)
            {
                filterContext.Result = new HttpStatusCodeResult(404);
            }
            else
            {
                base.OnActionExecuting(filterContext);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T00:52:59.453

最简单的可能是实现自定义操作过滤器：

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

您还可以有条件地添加与该控制器匹配的路由，这将导致返回 404。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-13T16:18:34.860

在这里回答 -[防止 ASP.NET Core 在单独的程序集中发现控制器](https://stackoverflow.com/questions/64789567/prevent-asp-net-core-discovering-controller-in-separate-assembly)

这种方法不需要过滤器，并且从招摇等中隐藏控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T11:08:02.580

交叉发帖来自：[https ://stackoverflow.com/a/43044667/257470](https://stackoverflow.com/a/43044667/257470)

我禁用`ApiController`控制器的解决方案：

*   使用 WebConfig AppSettings 配置标志而不是 ( `#if DEBUG`)
*   调用方法之前`ExecuteAsync`拦截调用并检查功能切换（功能标志）；
*   如果功能被禁用，则返回`HTTP 410 GONE`
*   如果它对许多控制器很常见，请将代码移动到控制器的基类

编码：

```
public class TestController : ApiController
{
    public override Task<HttpResponseMessage> ExecuteAsync(HttpControllerContext controllerContext, CancellationToken cancellationToken)
    {
        var featureFlag = Convert.ToBoolean(System.Configuration.ConfigurationManager.AppSettings["EnableTest"]);

        if (featureFlag == false)
        {
            return Task.FromResult(new HttpResponseMessage(HttpStatusCode.Gone));
        }

        return base.ExecuteAsync(controllerContext, cancellationToken);
    } 
```

# javascript - JavaScript 闭包和变量作用域

> ID：11604780
> 
> 赞同：1
> 
> 时间：2012-07-22T23:19:53.103
> 
> 标签：javascript, jquery, closures, scope

我很难理解 JS 中的闭包和变量范围的概念。具体来说，如何访问`styleData`一个类中深层嵌套的变量，然后访问从该类创建的对象？

我确定我在这里还有其他一些问题，所以请在您认为合适的地方加入并纠正我。谢谢！

```
var BuildJSON = {
    convert: function() {
        $.ajax({
            type: "GET",
            url: "style2.xml",
            dataType: "xml",
            success: function(xml) {
                var styleData = $.xml2json(xml);
                return styleData; // Do I need to return this somehow?
            }
        //How to get access to styleData??
        });                 
    },

    styleData: this.convert();
};

var myClass = function() {
    this.info = BuildJSON.styleData;
};

var myObject = new myClass;

alert(myObject.info.Style[0].name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:31:48.180

JavaScript 中的闭包是函数，因此在函数范围内声明的任何内容都只能在该函数内可见。

在您的示例`styleData`中是本地的，它属于该`success`功能，并且无法在其他任何地方访问。最简单的解决方案是在作用域的顶部声明该变量`BuildJSON`，在这种情况下，由于您将该对象声明为对象文字，您可以将其初始化为该对象的属性：

```
this.styleData = '',

...

success: function(xml) {
  BuildJSON.styleData = $.xml2json(xml);
} 
```

这种方法的“问题”`styleData`是公开的，也许这不是你想要的。如果您想在 BuildJSON 中使用该变量但不使其可公开访问，则模块模式会派上用场。

```
var BuildJSON = (function(){
  var styleData = '', // local
      convert = function(){ ... } // You can use style data here

  return {
    convert: convert // Return only stuff you want to be public
  }
}()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:44:19.230

我想说这里的大问题更多是关于 AJAX 调用的异步编程，然后是回调本身。

您可以做的一件事就是从 ajax 回调中显式设置 styleData。请注意如何从内部范围访问和修改外部范围的“那个”变量。

```
var BuildJSON = {
   convert: function() {
        var that  = this; // inner callbacks get separate "this" 
                          // variables so we save the BuildJSON in a separate variable.
        $.ajax({
            type: "GET",
            url: "style2.xml",
            dataType: "xml",
            success: function(xml) {
                that.styleData = $.xml2json(xml);
            }
        });                 
    }
};
BuildJSON.convert(); 
```

虽然这很容易做到，但它的缺点是您只能在转换完成运行后读取“styleData”属性，并且您编写代码的方式您无法知道 ajax 调用已完成（其他轮询带有 setinterval 的 styleData 变量，但这很愚蠢）。

从异步函数“返回”内部值有两种主要方法。一种方法是像 $.ajax 本身所做的那样，将您的函数转换为继续传递样式。这样，当您完成计算时，您会收到一个使用 styledata 调用的函数，而不是返回 styleData 结果

```
convert: function( onStyleData ) {
    $.ajax({
        // ...
        success: function(xml) {
            var styleData = $.xml2json(xml);
            onStyleData( styledata ); // <---
        }
    });                 
};

BuildJSON.convert(function(styledata){
    console.log('got styledata', styledata)
}) 
```

另一种可能性是利用 JQuery 中的承诺支持。诸如 ajax 之类的函数返回特殊的 Promise 对象，使异步编程更加方便（因为您可以编写代码返回值并使用“return”而不是被迫进行手动 CPS。

我真的不知道他们在 JQuery 中为此使用的名称，但在 Dojo 工具包中它看起来有点像

```
var styleDataPromise = dojo.xhr({
    url: /*...*/,
    load: function(data){
       return xmlToJSON(xml);
    }
})

styleDataPromise.then(function(styleData){
    console.log('got styledata', styleData)
}) 
```

# java - 在 Prolog 和 java 中查询谓词

> ID：11604781
> 
> 赞同：0
> 
> 时间：2012-07-22T23:20:00.733
> 
> 标签：java, prolog, swi-prolog, jpl

我想通过 JPL 查询以在 java 中使用 Prolog，我想在 java 中调用这样的谓词：

```
predicate_test([X,Y,Z]):-
     a_predicate(X),
     another_predicate(Y). 
```

我在java中进行查询以调用“predicate_test”，如下所示：

```
 Query q4=null;
    try{
        q4 = new Query("predicate_test(Percept).");
        System.out.println(q4.query());
    }
    catch(PrologException pl){

        System.out.println(pl.getMessage());
    } 
```

我从 catch 块中收到此消息

```
PrologException: error(existence_error(predicate_test, /(schedule, 1)), context(:(system, /('$c_call_prolog', 0)), _37)) 
```

我的方法有什么问题？

提前致谢

# c++ - 挤奶，解决方案说明

> ID：11604783
> 
> 赞同：1
> 
> 时间：2012-07-22T23:20:13.550
> 
> 标签：c++, algorithm, bit, bitset

我练习 C++ 解决一些练习，但一整天后，我无法解决它们。所以，我在网上搜索并找到了一个简短的解决方案，但是，我无法理解。

练习：http: [//jeremiahflaga.blogspot.com/2011/09/milking-cows-programming-problem-from.html](http://jeremiahflaga.blogspot.com/2011/09/milking-cows-programming-problem-from.html)

解决方案 [https://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=13658&lngWId=3](https://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=13658&lngWId=3)

我很感兴趣，因为我想学习使用二进制数据解决问题，就像这个练习一样，所有数据都存储在一个 bitset 中。

因此，如果有人可以向我解释解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:06:19.850

解决方案所做的只是填充然后读取一个位集。

bitset 中每秒都有一个条目，每当有人在挤奶时，bitset 都设置为 1（它们在读取`for(int j = begin + 1; j <= end; j++)`循环中的输入时设置）。

然后，一旦读取了所有输入，并设置了所有适当的位，就会扫描位集以计算 0 和 1 的最长序列（从 0 到 1 的切换或反之亦然，由前一个位的值`if(a[i] != toggler)`在哪里检测）。`toggler`

如果您看不到上述内容，我建议将代码复制到 ide 或编辑器中并重新格式化，以便正确缩进。

这不是一个很好的解决方案。也许这是赢得比赛的正确方法，但它不是大多数人在正常情况下会编写的那种代码，因为它非常浪费内存。通常对于“现实生活”中的此类问题，您将使用（开始，结束）对来管理间隔，合并重叠间隔。

# sql-server - 如何估计 SQL Server 数据库的服务器大小要求？

> ID：11604784
> 
> 赞同：0
> 
> 时间：2012-07-22T23:20:46.177
> 
> 标签：sql-server

我已经与几家服务器提供商交谈过，他们现在试图估算 Web 开发项目的成本可行性，但并没有真正得到明确的答案。

该项目的主要负担是数据库，它将保存 2000 万行数据，每行 5 列（10 个字母代码、10 个字母代码、10 个字母代码、10 位整数、URL（平均说 20 个字符长）。

主要问题是如何估计此类所需的 GB 存储空间？（使用 SQL Server ）。[我没有要测试的 SQL Server 副本]。

第二个问题实际上是关于速度和 I/O 要求的，但这可能是开发演示后的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:17:28.140

关于这个主题有一个完整的 MSDN 章节：[估计数据库的大小](http://msdn.microsoft.com/en-us/library/ms187445)。重要的是要知道您需要多少个非聚集索引（您是否要在这些“代码”列中的任何一个中查找数据？）以及聚集索引键是什么。每个主题在 MSDN 上都有一个主题：

*   [估计聚集索引的大小](http://msdn.microsoft.com/en-us/library/ms178085)
*   [估计非聚集索引的大小](http://msdn.microsoft.com/en-us/library/ms190620)

此外，您可以部署[行压缩](http://msdn.microsoft.com/en-us/library/cc280576)或[页面压缩](http://msdn.microsoft.com/en-us/library/cc280464)以减小表的大小。如果您选择 Unicode 列，您还可以启用[Unicode 压缩](http://msdn.microsoft.com/en-us/library/ee240835)。

您的性能要求将主要由您的负载（即您的查询）驱动。您没有指定如何查询数据库（范围？聚合，单例查找？，BI？）以及如何更新数据库（只读？，ETL？，OLTP？）。关于如何[监控和调整性能](http://msdn.microsoft.com/en-us/library/ms189081)有一些技巧，但更重要的是设计您的应用程序以提高性能。有很多细节，例如。阅读[数据访问代码如何影响数据库性能](http://msdn.microsoft.com/en-us/magazine/ee236412.aspx)，但在很大程度上，最重要的任务是调整您的数据模型（表和索引的布局）以适应您的访问模式（您将如何查询数据库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:32:50.923

假设您的 10 个字母代码和 20 个字母的 url 存储为 nchar 并且您的 10 位整数存储为 int，看起来根据[此](http://www.connectionstrings.com/Articles/Show/sql-server-data-type-reference)表，您正在查看每行 124 个字节：每个 nchar(10) 20 个，每行 4 个int，每个 nchar(20) 40。这意味着，在 2000 万行中，您的空间刚刚超过 2.3 GB。

# c# - MySQL + C# 连接器 / NET 批量操作

> ID：11604785
> 
> 赞同：0
> 
> 时间：2012-07-22T23:20:55.797
> 
> 标签：c#, mysql, mysql-connector

我目前正在编写一个多线程聊天服务，并且在 MySql 中遇到了一些我似乎无法找到解决方案的错误。

我目前正在使用“MySqlHelper”类来利用 MySql 的连接池：

```
 public User GetUser(string Email)
    {
        try
        {
            string Escape = MySqlHelper.EscapeString(Email);
            string Query = String.Format("SELECT * FROM `users` WHERE `email` = '{0}' LIMIT 1", Escape);
            using (MySqlDataReader reader = MySqlHelper.ExecuteReader(databaseLoader.connectionString.ToString(), Query))
            {
                if (!reader.HasRows)
                {
                    return null;
                }
                while (reader.Read())
                {
                    string messages = reader["messages"].ToString();
                    var OfflineMessages = new List<UserMessagePair>();
                    if (reader["messages"].ToString() != "")
                    {
                        foreach (var msg in ListSerializer.Deserialize(messages))
                        {
                            var pair = ListSerializer.Deserialize(msg);
                            OfflineMessages.Add(new UserMessagePair(int.Parse(pair[0]), pair[1]));
                        }
                    }
                    return new User()
                               {
                                   ID = int.Parse(reader["id"].ToString()),
                                   Email = reader["email"].ToString(),
                                   Password = reader["password"].ToString(),
                                   Nickname = reader["nickname"].ToString(),
                                   Status = reader["status"].ToString(),
                                   About = reader["about"].ToString(),
                                   Role = (Misc.Type.RoleType) Enum.Parse(typeof (Misc.Type.RoleType),
                                                                          reader["role"].ToString(),
                                                                          true),
                                   Premium = bool.Parse(reader["premium"].ToString()),
                                   Rooms = ListSerializer.Deserialize(reader["subscriptions"].ToString()),
                                   Device = (Misc.Type.DeviceType) Enum.Parse(typeof (Misc.Type.DeviceType),
                                                                              reader["devicetype"].ToString(),
                                                                              true),
                                   lastIPAddress = reader["ipaddress"].ToString(),
                                   uniqueID = reader["uniqueid"].ToString(),
                                   Contacts = ListSerializer.Deserialize(reader["contacts"].ToString()),
                                   CustomTag = reader["tag"].ToString(),
                                   OnlineStatus = int.Parse(reader["onlinestatus"].ToString()),
                                   Messages = int.Parse(reader["messagecount"].ToString()),
                                   LastTime = reader["lasttime"].ToString(),
                                   UserNotes = reader["notes"].ToString(),
                                   OfflineMessages = OfflineMessages,
                                   Exists = true
                               };
                }
                return null;
            }
        }

        catch
        {
            return null;
        }
    } 
```

确实没有抛出正式的错误 - 一段时间后会发生什么（在 30-40 个用户连接后）库将停止连接？我认为这是因为超出了最大池大小（我将其设置为 100,000），是否有一种有效的方法来管理池连接并确保不会发生超出此限制的情况，因为 Oracle 在其网站上声称（[http：/ /dev.mysql.com/doc/refman/5.0/en/connector-net-programming-connection-pooling.html](http://dev.mysql.com/doc/refman/5.0/en/connector-net-programming-connection-pooling.html)）它会自动为您管理连接，但这似乎没有正确发生......

老实说，我不确定发生了什么，因为没有抛出异常，而且它只是不起作用。

有没有人像这样大规模使用连接器/网络并遇到问题？因为我遇到了无数的问题，似乎无法找到解决这个问题的方法。

另一个问题是，除了使用连接器/网络之外，还有其他选择吗？

非常感谢！（对不起，如果我含糊不清，我真的不知道这里发生了什么......）

# html - Firefox 渲染菜单图像不正确

> ID：11604790
> 
> 赞同：0
> 
> 时间：2012-07-22T23:21:28.113
> 
> 标签：html, css, firefox, mozilla

大家好 - 我想知道是否有人可以对我遇到的问题提供任何见解，我无法理解。最初这是 Chrome 的一个问题，但自从修复后，它现在是 Firefox 的问题。

查看以下左侧菜单图像。当它在 Firefox 中呈现时，“go”按钮出于某种原因悬停在下方。这在其他浏览器中不会发生。

它在 Firefox 中的外观：

[Firefox 菜单 http://desmond.imageshack.us/Himg254/scaled.php?server=254&filename=20212630.jpg&res=landing](http://desmond.imageshack.us/Himg254/scaled.php?server=254&filename=20212630.jpg&res=landing)

[这](http://jsfiddle.net/yXaJE)是HTML和CSS

我正在使用 Firefox 14.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:52:39.730

将其包含在您的样式表中：

```
button::-moz-focus-inner, 
input[type="button"]::-moz-focus-inner, 
input[type="submit"]::-moz-focus-inner, 
input[type="reset"]::-moz-focus-inner {
  padding: 0 !important;
  border: 0 none !important;
} 
```

问题是 Firefox 在按钮和输入中放置了一些默认填充。由于您的搜索元素需要一个特定的宽度，所以那一点点填充就会把它弄乱。

上面的代码删除了该填充。在许多重置样式表中，它是一段常见的“代码”。

# html - 使用 CSS 而不是 JS 进行悬停预览

> ID：11604792
> 
> 赞同：9
> 
> 时间：2012-07-22T23:21:45.147
> 
> 标签：html, css, preview

有没有办法制作这样的[东西](http://cssglobe.com/lab/tooltip/02/)

只使用 css 和 html？如果可能的话，请给我一个例子:)

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-22T23:26:36.967

看一看：[CSS 弹出图像查看器](http://www.dynamicdrive.com/style/csslibrary/item/css-popup-image-viewer/)。

```
.thumbnail {
  position: relative;
  z-index: 0;
}

.thumbnail:hover {
  background-color: transparent;
  z-index: 50;
}

.thumbnail span {
  /*CSS for enlarged image*/
  position: absolute;
  background-color: lightyellow;
  padding: 5px;
  left: -1000px;
  border: 1px dashed gray;
  visibility: hidden;
  color: black;
  text-decoration: none;
}

.thumbnail span img {
  /*CSS for enlarged image*/
  border-width: 0;
  padding: 2px;
}

.thumbnail:hover span {
  /*CSS for enlarged image on hover*/
  visibility: visible;
  top: 0;
  left: 60px; /*position where enlarged image should offset horizontally */
}
```

```
<a class="thumbnail" href="#thumb"><img src="https://loremflickr.com/320/240" width="100px" height="66px" border="0" /><span><img src="https://loremflickr.com/320/240" /><br />Simply beautiful.</span></a>

<a class="thumbnail" href="#thumb"><img src="https://loremflickr.com/320/240" width="100px" height="66px" border="0" /><span><img src="https://loremflickr.com/320/240" /><br />So real, it's unreal. Or is it?</span></a>

<br />
<br />

<a class="thumbnail" href="#thumb">Dynamic Drive<span><img src="https://loremflickr.com/320/240" /><br />Dynamic Drive</span></a><br />
<a class="thumbnail" href="#thumb">Zoka Coffee<span><img src="https://loremflickr.com/320/240" /><br />Zoka Coffee</span></a>
```

# msbuild - Msbuild Windows 商店应用程序（地铁）

> ID：11604794
> 
> 赞同：2
> 
> 时间：2012-07-22T23:21:53.307
> 
> 标签：msbuild, windows-store-apps, hudson

我使用 nugget 和 Hudson 将我们的库部署到我们的企业以供重用。我们最近开始开发 Windows 商店应用程序（以前称为 Metro 应用程序）。Hudson 在 Windows Server 2008 机器上运行。我需要安装什么才能从源代码编译以部署到 nuget。Ms build 没有找到需要的目标文件。是否有要安装的特定 SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:58:19.397

所以，为了解决这个问题，我安装了 4.5 框架 SDK。这样做之后，正如我所提到的，它缺少目标文件。然后我简单地将目标文件从本地开发机器上的 C:\Program Files (x86)\MSBuild\Microsoft\WindowsXaml\v11.0 复制到服务器上的同一目录。

MSBuild 喜欢这个，并且编译时没有问题。

# .net - 可以使用 MEF 扩展哪些 Microsoft 应用程序？

> ID：11604797
> 
> 赞同：1
> 
> 时间：2012-07-22T23:22:33.387
> 
> 标签：.net, mef

哪些 Microsoft 产品支持通过 MEF 进行扩展？现在我知道可以使用 MEF 扩展 Visual Studio 和 NuGet。还有其他人吗？如果有，有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:30:50.980

MEF 是一项相对较新的技术（在 .NET 4.0 之前，但仍然相对较新），所以我不认为 Visual Studio 之外还有很多应用程序实现了这种扩展模型。

# rest - 我需要 text/applescript 的媒体类型，但我没有看到在 iana 注册？

> ID：11604798
> 
> 赞同：1
> 
> 时间：2012-07-22T23:22:35.860
> 
> 标签：rest, applescript, mime-types

我对 iana 注册的 mime 类型进行了快速扫描，但没有看到任何具体的“文本/applescript”。

我错过了什么吗？

还是人们使用 text/plain 代替？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:54:55.807

一个快速的谷歌搜索出现了这个页面，它将 mime 类型显示为“application/x-applescript”。 [http://www.huw.id.au/filetypes.html](http://www.huw.id.au/filetypes.html)

# javascript - 为什么 return false 仍然允许提交表单？

> ID：11604799
> 
> 赞同：0
> 
> 时间：2012-07-22T23:22:38.073
> 
> 标签：javascript

我正在尝试在提交表单字段之前填充它，但是该功能似乎被忽略了，并且不确定我是否做错了。为什么即使我返回 false 也允许提交表单？

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta http-equiv="content-language" content="en" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />
    <meta name="robot" content="noindex, nofollow" />

    <title> sample form</title>

    <base href="" />

    <link rel="stylesheet" type="text/css" media="all" href="" />

    <style type="text/css">

    </style>

    <script type="text/javascript">

    function formDetails() {
        var name = document.forms["sampleform"]["name"].value = "test"
        return false;
    }

    </script>
</head>
<body>
<form id="sampleform" name="sampleform" action="" method="get">
    <p><label for="name">Name</label>
    <input type="text" name="name" id="name" maxlength="50" /></p>

    <p><input type="submit" name="submit" value="submit" onClick="formDetails();" /></p>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T23:23:41.430

您必须将返回值传递给事件处理程序本身：

```
<input ... onClick="return formDetails();" ... /> 
```

# mysql - 来自同一表的 MySQL 匹配列

> ID：11604800
> 
> 赞同：0
> 
> 时间：2012-07-22T23:22:52.960
> 
> 标签：mysql, sql, database-design

好的一点底漆；我是专家级的 PHP/JS/C 开发人员，但一直无法全面掌握 MySQL。如果您能回答我的问题，那就太好了，但如果您能向我指出*好的*资源的方向，以了解复杂的 MySQL 查询的注意事项（主要是从效率的角度来看），那将同样有帮助。

**客观的**

我需要在单个表中找到相似之处/重叠，同时仍然拉动整个结果集（与另一个表中的实际标题/描述内容进行 LEFT JOIN）。

桌子极其简单；它包含 3 列 ( `page`, `user`, `time`)。

基本上每个查询将有两个用户。我需要提取所有匹配结果`User 1`的计数、所有匹配结果的计数`User 2`和所有列（加上 LEFT JOIN）以进行重叠（两者`User 1`都`User 2`在表中匹配。

**示例查询**

这个查询有效，但它非常慢（到需要几分钟才能运行的程度）并且我猜测由于子查询而效率低下。如果任何 SQL 专家可以指出一种更有效的方法来做到这一点（以及为什么），那将不胜感激。

```
SELECT DISTINCT `page`, 
    (SELECT COUNT(*) FROM `m_likes` WHERE `user` = "1") AS userLikes,
    (SELECT COUNT(*) FROM `m_likes` WHERE `user` = "2") AS friendLikes

    FROM `m_likes` LEFT JOIN `app_pages` AS page ON (page.id = `page`)

        WHERE `page` IN (SELECT `page` FROM `m_likes` WHERE `user` = "1") 
        AND `page` IN (SELECT `page` FROM `m_likes` WHERE `user` = "2")

        AND (`user` = "1" OR `user` = "2") 
```

**EXPLAIN 查询结果**

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY     m_likes index   NULL    page    604 NULL    35043   Using where; Using index; Using temporary
1   PRIMARY     page    eq_ref  PRIMARY PRIMARY 767 tablename.m_likes.page  1   
5   DEPENDENT SUBQUERY  m_likes unique_subquery page    page    604 func,const      1   Using index; Using where
4   DEPENDENT SUBQUERY  m_likes unique_subquery page    page    604 func,const      1   Using index; Using where
3   SUBQUERY    m_likes index   NULL    page    604 NULL    35043   Using where; Using index
2   SUBQUERY    m_likes index   NULL    page    604 NULL    35043   Using where; Using index 
```

**表架构**

**app_pages**：`id`VARCHAR（255），`name`VARCHAR（255），`category`VARCHAR（255）

**m_likes** : `page`VARCHAR(255), `user`VARCHAR(255), `time`INT(20)

m_likes.page = app_pages.id

另外值得注意的是，不幸的是，用户和页面 ID 必须是 VARCHAR 而不是 INT，因为不能保证它在 64 位系统上运行，并且某些 ID 值大于 32 位允许的最大值系统...希望这不会对性能造成重大影响。

**输出示例**

```
array (size=156)
  0 => 
    array (size=6)
      'page' => string '100861973286778' (length=15)
      'time' => string '1297383617' (length=10)
      'name' => string 'Leila' (length=5)
      'category' => string 'Book' (length=4)
      'userLikes' => string '104' (length=3)
      'friendLikes' => string '52' (length=2)
  1 => 
    array (size=6)
      'page' => string '10150160788195604' (length=17)
      'time' => string '1272653871' (length=10)
      'name' => string 'Frisbee Golfing' (length=15)
      'category' => string 'Interest' (length=8)
      'userLikes' => string '104' (length=3)
      'friendLikes' => string '52' (length=2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:14:56.950

您的查询运行如此缓慢的原因是因为您正在执行**四个**单独的子查询，这些子查询实际上最终会为**每一**行执行。

相反，您可以对子选择进行笛卡尔积以获得*总计*数（仅执行一次）：

```
SELECT a.page, c.userLikes, c.friendLikes
FROM m_likes a
INNER JOIN app_pages b ON a.page = b.id
CROSS JOIN
(
    SELECT
        COUNT(CASE WHEN user = '1' THEN 1 END) AS userLikes,
        COUNT(CASE WHEN user = '2' THEN 1 END) AS friendLikes
    FROM m_likes
    WHERE user IN ('1','2')
) c
WHERE a.user IN ('1','2')
GROUP BY a.page
HAVING COUNT(1) = 2 
```

此查询将检索用户 1 和 2 都喜欢的所有页面，以及他们喜欢的总次数（将在结果集中重复）。

# c# - 将 MVC 视图路由值映射到物理路径

> ID：11604806
> 
> 赞同：3
> 
> 时间：2012-07-22T23:24:35.343
> 
> 标签：c#, asp.net-mvc-3, routes, asp.net-mvc-routing

假设我有一个具有视图的路径的路由值，例如

```
new
{
    controller = "Home",
    action = "Index"
} 
```

我如何将其映射到`~/Views/Home/Index.cshtml`？

我知道并非所有视图都一定有一个动作，并且并非所有动作都一定会返回一个视图，因此这可能会被证明是一个问题。

# 更新：

也许是这样的：

```
IView view = ViewEngines.Engines.FindView(ControllerContext, "Index").View;
view.GetViewPath(); 
```

但这允许我指定一个控制器，而不是假设我想使用我的控制器上下文（或者甚至可能为我想要的控制器（字符串）模拟一个控制器上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:44:58.177

这是我的做法：

```
private string GetPhysicalPath(string viewName, string controller)
{
    ControllerContext context = CloneControllerContext();

    if (!controller.NullOrEmpty())
    {
        context.RouteData.Values["controller"] = controller;
    }
    if (viewName.NullOrEmpty())
    {
        viewName = context.RouteData.GetActionString();
    }
    IView view = ViewEngines.Engines.FindView(viewName, context).View;
    string physicalPath = view.GetViewPath();
    return physicalPath;
} 
```

扩展方法`GetViewPath`是：

```
public static string GetViewPath(this IView view)
{
    BuildManagerCompiledView buildManagerCompiledView = view as BuildManagerCompiledView;
    if (buildManagerCompiledView == null)
    {
        return null;
    }
    else
    {
        return buildManagerCompiledView.ViewPath;
    }
} 
```

并且`CloneControllerContext`是：

```
private ControllerContext CloneControllerContext()
{
    ControllerContext context = new ControllerContext(Request.RequestContext, this);
    return context;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:24:00.460

从 RazorViewEngine.cs（在 mvc3 源代码中），视图的搜索路径如下（假设为 razor）：

```
 ViewLocationFormats = new[] {
        "~/Views/{1}/{0}.cshtml",
        "~/Views/{1}/{0}.vbhtml",
        "~/Views/Shared/{0}.cshtml",
        "~/Views/Shared/{0}.vbhtml"
    }; 
```

{1} 指的是控制器路由值，{0} 是视图名称（不是路由值的一部分）。

您可以搜索这些位置以尝试找到符合您的条件的视图，但您还需要了解您正在做出多少假设......即视图与操作具有相同的名称（默认情况下是，但如果不是您在控制器操作中对 View 的调用中指定视图名称）。你已经提到了其他几个假设

# python - 使用“和”作为回报

> ID：11604808
> 
> 赞同：8
> 
> 时间：2012-07-22T23:25:17.997
> 
> 标签：python, methods, python-2.7, return

我正在学习 Udacity 的 Web 应用工程课程。我注意到讲师在他的验证方法中使用了语句中的`and`运算符。`return`而且我不明白如何返回 2 个参数。我认为，这可能类似于`if`声明。谁能解释它实际上是什么？

下面是验证方法：

```
USER_RE = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
def valid_username(username):
    return username and USER_RE.match(username) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T23:29:46.627

运算符评估它的`and`两个参数是否为真，但以一种有点令人惊讶的方式：首先它检查它的左参数。如果它是真的，那么它会返回正确的论点。如果左参数为假，则返回左参数。

所以代码中的最后一行：

```
return username and USER_RE.match(username) 
```

是相同的：

```
if username:
    return USER_RE.match(username)
else:
    return username 
```

`username`如果它们不为空，则类似的字符串是真实的。如果模式匹配，则 regex`match`函数返回一个真实的匹配对象`None`，如果不匹配，则返回一个虚假的值。

最终结果是，`valid_username`如果用户名不是空字符串，并且用户名与给定模式匹配，则将返回一个真值。

注意这里的“and”与返回两个值无关，它是计算一个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T23:30:09.803

当您使用逻辑运算符时，它会根据规则继续，因此使用 and，它会评估第一个语句的真实性，如果它不真实，则返回一个非真实值（在第一种情况下，''） .

```
print repr("" and "THIS IS POST AND")
""

print "" or "THIS IS POST AND"
THIS IS POST AND

print None or "Something else"
Something else 
```

当你不想在类似的东西`None`（例如长度特征）上调用不存在的方法时，这会派上用场：

```
r = None

s = [1,2,3,4]

print r and len(r)
None

print s and len(s)
4 
```

在您发布的情况下，关键是如果用户名是真实的，您只想根据正则表达式检查用户名。

这里需要注意的是`and`， 和`or`两者都短路。所以如果你得到一些不真实的东西，这个函数甚至不会评估正则表达式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T02:26:15.783

`and`只是一个二元运算符。`return a and b`在结构上与`return a + b`or相同`return a * b`，并且工作方式相同。对表达式求值，然后将其结果提供给 ，然后将`return`其返回给调用者。`and`在`return`语句中使用并没有什么特别之处。

正如 Ned 的回答很好地解释的那样，`a and b`如果`a`和`b`都为真，则结果为真，否则为假。如果左参数是假的，它也会短路，因为这足以确定整个`a and b`表达式的结果。

在这种情况下，空字符串与该正则表达式不匹配，因此该操作是多余的，纯粹作为逻辑考虑。我强烈怀疑它在这里被使用，因为`username`可能会被赋予 value `None`，这会导致正则表达式匹配抛出异常。使用`username and USER_RE.match(username)`而不是仅仅`USER_RE.match(username)`意味着任何错误的值（包括`None`）`username`导致函数返回错误的值，甚至不尝试正则表达式匹配。

But again, this has nothing to do with `return`, it's just how `and` works.

# java - Java中的变量范围

> ID：11604809
> 
> 赞同：-1
> 
> 时间：2012-07-22T23:25:25.087
> 
> 标签：java, list, variables, scope

在 Java 类中，我有三个 List 作为类中的字段。所以我相信我让全班都可以使用它们？和所有*内部*类？

但是，这不起作用：（例如，我将在这里只显示一个列表，而不是全部三个）

```
class Items extends ListActivity {

List<String> items = null;  // field

Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            // stuff

    items = new ArrayList<String>();

    new Task().execute();

    Log.d("Size", String.valueOf(items.size()));

 }

 class Task extends AsyncTask<String, String, Void> {

    // in this subclass, I parse items from JSON and add to List "items".

     items = add(item);

 } 
```

退出任务后，我似乎丢失了列表中的项目。它记录“大小 0”；如果我在任务中执行此操作，它会显示适当数量的项目。我在这里错过了关于 List 变量范围的一个非常基本的观点吗？

编辑：下面是完整的任务类（稍微清理一下以供发布）

```
class Task extends AsyncTask<String, String, Void> {
    private InputStream is = null;
    private String result = "";

    @Override
    protected Void doInBackground(String... params) {
        String url_select = "items.php";

        param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("category", Category));

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        try {
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = "";
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

        } catch (Exception e) {
            // TODO: handle exception
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return null;

    }

    protected void onPostExecute(Void v) {

        try {

            JSONArray jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                item = json_data.getString("item");

                items.add(item);

                Log.d("Items", item);
            }
        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), "No items!",
                    Toast.LENGTH_SHORT).show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:41:13.287

我不是 Android 开发人员，但不是`AsyncTask`像 new Thread 这样的东西吗？如果是，那么您只会看到“大小 0”，因为在更新您的列表`Log.d("Size", String.valueOf(items.size()));`之前已执行。`new task().execute();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:35:37.920

您需要通读本[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

基本上，默认访问级别是`package private`（我的描述可能是错误的），但基本上这意味着只要您在同一个包中，您就可以看到该成员，但它对子类不可见。

尝试改用`protected`访问级别

# qt - 如何在 Qt 中进行 UDP 打孔？

> ID：11604810
> 
> 赞同：1
> 
> 时间：2012-07-22T23:25:37.950
> 
> 标签：qt, networking, udp, nat, hole-punching

我在 Internet 上有一台可以发送和接收数据报的服务器。

我应该在客户端做什么才能打一个洞，以便我可以从服务器接收数据报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:41:30.547

您必须按照以下方式设计您的客户端
1\. 客户端应该能够连接到服务器并请求其他客户端的 IP 和端口。
2.一旦每个客户端获得了彼此的IP端口，就应该开始相互连接。按照给定链接中的文章。 [http://www.brynosaurus.com/pub/net/p2pnat/](http://www.brynosaurus.com/pub/net/p2pnat/)

# c# - 调用存储过程时转换失败

> ID：11604812
> 
> 赞同：-1
> 
> 时间：2012-07-22T23:26:27.337
> 
> 标签：c#, asp.net, sql, sql-server, stored-procedures

这是我的**存储过程**：

```
[dbo].[DFW_Completed_Safety] (
    @StartDate VARCHAR(10),
    @Station VARCHAR(50),
    @EmployeeID INT) 
```

当我**编写**以下代码时：

```
SqlDataAdapter daAC_CSM = new SqlDataAdapter();
DataSet dsAC_CSM = new DataSet();
try
{
    using (SqlConnection sqlConnection = new SqlConnection(connectionString))
    {
        sqlCmd = new SqlCommand();
        sqlCmd.CommandType = CommandType.StoredProcedure;               
        sqlCmd.Connection = sqlConnection;
        sqlCmd.CommandTimeout = 0;
        sqlCmd.CommandText = "DFW_Completed_Safety";
        sqlCmd.Parameters.AddWithValue("@StartDate", startdate);
        sqlCmd.Parameters.AddWithValue("@Station", station);
        sqlCmd.Parameters.AddWithValue("@EmployeeID", "0");
        daAC_CSM.SelectCommand = sqlCmd;
        daAC_CSM.Fill(dsAC_CSM);
    }
    return dsAC_CSM;
}
catch (Exception)
{
    throw;
} 
```

它抛出异常：***EmployeeID***作为 varchar 接收。

> `Conversion failed when converting the varchar value 'd ' to data type int.`

**我尝试过的事情：**

1- 许多其他人在 StackOverflow 上发帖建议这样`Convert.ToInt32(0);`做。由于默认情况下 0 是 Int32，因此这不是解决方案。
2-更改接收varchar的方法（发送“0”），它也不起作用。

感谢您的任何想法！（将方法签名保持为 Int 会更好）。

**更新：**这个问题还没有回答，因为将我的存储过程更改为 varchar 并没有成功。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:24:34.637

Finally it wasn't the first line. The FormName is a field that stores the FormID. The programmer that was here before was probably a noob or changed the Column datatype to int, making all queries not to work. Thanks anyways @Matt_Whitfield & @Luxspes. By the way Luxpes, you were right, it was written line 1 even on SSMS, but I did it using the same:

```
EXEC    @return_value = [dbo].[DFW_Completed_Safety]
        @StartDate = N'07-18-2012',
        @Station = N'YHZ',
        @EmployeeID = 0 
```

And by doing Print @SqlStatement, I was able to copy & paste in a new Query and see that it was the Form**Name** that was an Int. Who knew that a Name could be an Int?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:10:27.187

当您从 SSMS 运行您的程序时，您很可能会遇到相同的错误，因为该错误很可能源自您的程序主体，而不是您如何调用它。如果您正在查询的表中的列中有值“d” - 并且您正在将该列与整数类型进行比较，那么您将收到该错误。另外，还有几点：

*   您应该将您的`SqlCommand`和`SqlConnection`实例放在 using 子句中或手动处理它们，因为它们是 IDisposable。
*   你可能不想`throw ex`在你的 catch 块中 - 你可能只是想要`throw`. 通过使用`throw ex`，您会弄乱原始异常中可用的堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:53:15.930

请像这样重写您的代码：

```
try
{
    sqlCon = new SqlConnection(connectionString);
    sqlCmd = new SqlCommand();
    sqlCmd.CommandType = CommandType.StoredProcedure;
    SqlDataAdapter daAC_CSM = new SqlDataAdapter();
    DataSet dsAC_CSM = new DataSet();
    sqlCmd.Connection = sqlCon;
    sqlCmd.CommandTimeout = 0;
    sqlCmd.CommandText = "DFW_Completed_Safety";
    sqlCmd.Parameters.AddWithValue("@StartDate", startdate);  //Using "@"
    sqlCmd.Parameters.AddWithValue("@Station", station);    //Using "@"
    sqlCmd.Parameters.AddWithValue("@EmployeeID", 0); //Using "@"

    foreach(SqlParameter p in  sqlCmd.Parameters){
      //Will print Name, Type and Value
      System.Diagnostics.Trace.WriteLine("Name:" + p.ParameterName + "Type: " + p.DbType+" Value: "+p.Value); 
    }

    sqlCon.Open();
    daAC_CSM.SelectCommand = sqlCmd;
    daAC_CSM.Fill(dsAC_CSM);
    sqlCon.Close();
    return dsAC_CSM;
}
catch (Exception ex)
{
    throw ex;
} 
```

它打印什么？你得到什么错误？

# c++ - RapidXML 编译错误解析字符串

> ID：11604818
> 
> 赞同：4
> 
> 时间：2012-07-22T23:27:22.857
> 
> 标签：c++, string, xml-parsing, rapidxml

我在使用 RapidXML 解析字符串时遇到了一些麻烦。我从 Eclipse 中收到一个错误，声称解析函数不存在。

```
make all 
Building file: ../search.cpp
Invoking: Cross G++ Compiler
g++ -DDEBUG -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"search.d" -MT"search.d" -o "search.o" "../search.cpp"
../search.cpp: In function ‘void search(CURL*, CURLcode, std::string, std::string)’:
../search.cpp:29:27: error: no matching function for call to ‘rapidxml::xml_document<>::parse(const char*)’
../search.cpp:29:27: note: candidate is:
../rapidxml-1.13/rapidxml.hpp:1381:14: note: template<int Flags> void rapidxml::xml_document::parse(Ch*) [with int Flags = Flags, Ch = char]
make: *** [search.o] Error 1 
```

以下代码引发错误：

```
rapidxml::xml_document<> doc;    // This has no errors
doc.parse<0>(data.c_str());      // This line raises the error (data is a string) 
```

此处参考在线文档： [http ://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1parsing](http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1parsing)

RapidXML 有四个头文件：

1.  rapidxml_iterators.hpp
2.  rapidxml_print.hpp <--包含错误，但构建成功
3.  rapidxml_utils.hpp <--包含错误，但构建成功
4.  rapidxml.hpp <--程序链接，包含解析函数

如何解决代码中的错误，我是否首先需要以某种方式解决标头中的编译器错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:59:20.417

问题是`char*`调用`c_str()`a返回的`std::string`实际上是 a `const char*`，这对解析函数没有好处（解析实际上会更改它在 rapidXML 中解析的字符串）。这意味着我们需要在解析之前复制字符串

```
 xml_document<> doc;
  string str;                             // String you want to parse
  char* cstr = new char[str.size() + 1];  // Create char buffer to store string copy
  strcpy (cstr, str.c_str());             // Copy string into char buffer

  doc.parse<0>(cstr);                     // Pass the non-const char* to parse()

  // Do stuff with parsing

  delete [] cstr;                         // free buffer memory when all is finished 
```

我没有尝试编译上述内容，因此可能存在错误，关键是`c_str()`返回 a`const char*`并且`parse()`必须采用 non-const `char*`。希望这可以帮助。至于你的标题，我通常只使用

```
 rapidxml.hpp
 rapidxml_print.hpp 
```

包含在我的源文件中。您没有链接器问题，因为 RapidXML 是仅标头实现（这在我看来很好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T13:56:32.107

正如@Hydranix 在评论中指出的那样，

```
doc.parse<0>(&str[0]); 
```

效果很好。我使用它解析了一些大的 xml 文件。

# iphone - 在设备上将数据插入 FMDB 崩溃，这是将数据插入 sqlite 的最节省内存的方法

> ID：11604819
> 
> 赞同：0
> 
> 时间：2012-07-22T23:27:26.547
> 
> 标签：iphone, fmdb

我有很多行需要插入到数据库中。我下载了大约 50 个以制表符分隔的 .txt 文件，其中包含我需要的信息。我解析数据并以相同的方法将其插入数据库。当我将它作为单独的方法使用时，我的 27" iMac 上的模拟器会因为内存不足而崩溃。该方法如下所示：

```
- (BOOL)insertDataWithFileName:(NSString *)fileName {
    NSLog(@"%s %@", __FUNCTION__, fileName);
    if (_db == nil) {
        return NO;
    }
    // Get the data from the file
    NSData *data = [[NSData alloc] initWithContentsOfFile:[[self applicationDocumentsDirectory] stringByAppendingPathComponent:fileName]];
    NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    // Parse each line by newlines first
    NSArray *lines = [responseString componentsSeparatedByString:@"\n"];        

    NSString *ID = [[fileName componentsSeparatedByString:@"."] objectAtIndex:0];

    // Set up the database insert statement
    NSString *tableName = @"Hardcodedtablename"; // remove after prototype
    BOOL oldshouldcachestatements = _db.shouldCacheStatements;
    [_db setShouldCacheStatements:YES];
    [_db beginTransaction];
    NSString *insertQuery = [NSString stringWithFormat:@"INSERT INTO %@ values(null, ?, ?, ?, ?, ?, ?, ?);", tableName];
    BOOL success;

    // Parse each line by tabs
    for (NSString *line in lines) {
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        NSArray *fields = [line componentsSeparatedByString:@"\t"];

        // Need to check since some of the .txt files have an empty newline at the EOF.
        if ([fields count] == NUM_VARIANT_FIELDS) {
            NSNumber *loc = [NSNumber numberWithInteger:[[fields objectAtIndex:0] integerValue]];       
            NSString *carType = [fields objectAtIndex:1];
            NSString *model = [fields objectAtIndex:2];
            NSString *AA = [fields objectAtIndex:7];
            NSString *BB = [fields objectAtIndex:8];

            NSNumber *freq = [[fields objectAtIndex:11] isEqualToString:@""] ? [NSNumber numberWithDouble:-1.0] : [NSNumber numberWithDouble:[[fields objectAtIndex:11] doubleValue]];

            NSArray *argArray = [[NSArray alloc] initWithObjects:ID, loc, carType, model, AA, BB, freq, nil];

            success = [_db executeUpdate:insertQuery withArgumentsInArray:argArray];
            [argArray release];

        }
        [pool drain];
    }

    [_patientAnnotatedDatabase commit];
    [_patientAnnotatedDatabase setShouldCacheStatements:oldshouldcachestatements];

    return success;
} 
```

正如您从我的 for 循环中看到的那样，在数组中的所有文件被 \t 分隔后，我实际上并不需要它。我设置了一个自动释放池来减少 for 循环中的内存占用。最大的文件中有 270,000 行。这些文件大约有 50 个。因此，在设备上的 2 个文件之后，它崩溃了。虽然没有错误消息。

我想知道此时我的选择是什么。iPad 真的可以处理这么多的数据吗？我可以对这种方法进行优化吗？

还是我必须在服务器端创建一个数据库并将数据库下载到设备上？如果我确实将数据库从服务器下载到设备，FMDB 是否支持将这些表从一个数据库传输到另一个数据库？我在谷歌搜索时找不到类似的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:47:41.810

这实际上取决于您使用数据的目的。如果您使用它来搜索或用于某些您真正需要所有这些的目的，那么您基本上使用了这么多内存：

```
270,000 rows * 25 chars/row * 50 files * 1 byte/char = 321 Mb of RAM 
```

我猜测 25 chars/row 部分，但是当您使用超过 100 Mb 的内存时，您正在使用大量内存。但是，iPad*确实*有大约 1GB 的 RAM 供您使用，因此您似乎在可用内存量之内。*但是，*由于您使用 NSArrays 和 SQLite FMDB 来存储它（以及其他 NSObjects），当添加到 iPad 上运行的其他进程时，封装的数据可能超过 1GB。

所以，所有这些内存可能都是你的问题。您可能最好将所有这些数据保存在可以处理它的网络服务器上，并通过所述服务器调用您想要的任何功能。它可能会快得多，并且如果需要更新，它可以让您轻松地对数据进行调整。它还可以让您的应用程序在没有足够 RAM 的 iPhone 等设备上使用。

如果大量数据是您的问题，那么您的解决方案就是上述解决方案。但是，我仍然相信 iPad 能够处理 300+ Mb 的 RAM，因此您的问题可能出在代码上。确保您正确访问所有数据，尤其是当您将数据与文件分离为数组时，因为最小的“越界”数组错误可能会导致您的程序失败。

您是否也尝试过在启用内存分析器的情况下运行代码。您可以通过按住“运行”圆形按钮在新的 Xcode 中启用此应用程序，直到您可以选择“Profiler”选项。这个应用程序将显示您的应用程序正在使用多少内存，因此您可以确保它低于 1GB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:41:08.303

不幸的是，我在我的计划中设置了 NSZombieEnabled 以追踪早期的错误。关闭它后，它现在似乎没有在这一刻崩溃。

# regex - 我怎么能逃脱'？使用node.js express HTTP get时的字符，以模拟http请求？

> ID：11604820
> 
> 赞同：0
> 
> 时间：2012-07-22T23:27:38.100
> 
> 标签：regex, node.js, express

我正在使用 node.js 的 express 模块来模拟以下形式的 url：

```
http://localhost:3002/example.domain.to.mock/features/location?lat=100.1234&lon=99.9876 
```

但是在使用正则表达式时我似乎无法逃脱问号字符

```
var express = require('express');
var app = module.exports = express.createServer();

app.get('/example.domain.to.mock/features/location\?lat=*', function(req, res) {
    sendMockResponseFromFile("mock_location.txt", res);
}); 
```

上面的代码不适用于带有问号的网址。我可以模拟带有 & 号的请求，而不是问号。我也试过'\\？和 '？' 没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:40:38.530

Express 的路由器仅对 URL 的路径部分进行操作，而不是对整个 URL 进行操作，因此路由无法匹配查询字符串的内容。您的解决方法是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:57:46.507

我为我的目的找到了一种解决方法：我只是接受所有请求，然后执行一个简单的正则表达式测试以发送我需要的适当模拟文件：

```
app.get('/example.domain.to.mock/features/location', function(req, res) {
  var originalURL = req.originalUrl;
  var regexPatternForFilteredSearch = new RegExp(".*myRequiredRegex.*");

  if (regexPatternForFilteredSearch.test(originalURL)) {
      sendMockResponseFromFile("mock_location.txt", res);
  } else {
      sendMockResponseFromFile("second_mock_location.txt", res);
  }
}); 
```

我仍然很好奇为什么我无法在 app.get() 命令中使用正则表达式

# jquery - 使用 .on 函数时，是什么阻止了点击事件？

> ID：11604823
> 
> 赞同：1
> 
> 时间：2012-07-22T23:28:46.480
> 
> 标签：jquery, event-handling, click, jquery-on

//HTML:

```
 <table id="requests" class="table table-striped multiselecttable">
        <tbody>
            <tr data-uid="209" style="cursor: pointer; ">
                <td class="span5">Username</td>
                <td>
                    <a class="btn btn-success"><i class="icon-ok icon-white"></i> Approve</a>
                    <a class="btn btn-inverse"><i class="icon-remove icon-white"></i> Reject</a>
                </td>
            </tr>
        </tbody>
    </table> 
```

//查询：

```
if($("#requests").length) {
    //individual request approve button
    $("#requests .btn-inverse").click(function(e){
        //works!
        $(this).removeClass("btn-inverse").addClass("btn-danger").html("<i class='icon-white icon-remove'></i> Are you sure?");
    });
    $("#requests .btn-success").click(function(e){
        //works!
        e.stopPropagation();
    });
    $("#requests").on('click', '.btn-danger', function(e){
        alert('why u no trigger (╯°□°）╯︵ ┻━┻');
        e.stopPropagation();
    });
} 
```

当我点击 .btn-danger 时，什么都没有发生。其他两个功能（点击）正在工作。还有很多其他的javascript；有没有办法告诉我点击它时是否发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:38:36.703

工作演示** [http://jsfiddle.net/JTrKZ/](http://jsfiddle.net/JTrKZ/)

你错过了关闭`});`我也不确定，`//if($("#requests").length) {`但你知道我认为发生了什么。

希望对事业有所帮助`:)`

**代码**

```
//if($("#requests").length) {
    //individual request approve button
    $(".btn-inverse").click(function(e){
        //works!

        $(this).removeClass("btn-inverse").addClass("btn-danger").html("<i class='icon-white icon-remove'></i> Are you sure?");

    });
    $("#requests .btn-success").click(function(e){
        //works!
        e.stopPropagation();
    });
    $("#requests").on('click', '.btn-danger', function(e){
        alert('why u no trigger (╯°□°）╯︵ ┻━┻');
        e.stopPropagation();
    }); // <----- Here this was missing;
//}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:19:59.297

.on 是在 jQuery 版本 1.7 中添加的，因此如果您使用的是旧版本，它将无法工作。

# wordpress - 自定义 Wordpress 插件：限制角色使用插件

> ID：11604824
> 
> 赞同：0
> 
> 时间：2012-07-22T23:28:50.740
> 
> 标签：wordpress, plugins, permissions, restrict

我有两个插件，我只希望编辑或管理员能够使用（它们推送发布到 FB 和 Twitter，我不希望任何用户能够这样做）。所以，我正在寻找如何编辑每个插件以添加权限限制。这两个插件都在页面或帖子编辑器中创建选项框，基本上我希望这些只显示给具有适当角色状态的人。

我在想类似的事情：

if ( current_user_can( 'manage_categories' ) add_action( ... );

...但是我的代码根本不够好，无法编写我想要的东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:40:30.683

您可能想要获取用户角色，因为 user_can 描述了可能属于多个角色的功能。

```
$roles= $current_user->roles;
$role = array_shift($roles); 
```

会给你一个简单的英文字符串来比较。然后你可以做

```
if ($role == "administrator" || $role == "editor") add_action ... 
```

# mysql - MySQL 日期预订

> ID：11604825
> 
> 赞同：0
> 
> 时间：2012-07-22T23:28:52.283
> 
> 标签：mysql

我试图找到一个类似的问题，但没有找到一个确切的问题，所以我会发布我的：

我有 2 张桌子：

*   房间 (room_id)
*   room_reservation (room_id, 日期)

如何返回在 2 个日期之间至少有 1 天免费的房间列表。

例如，如果我有这些房间：

room_id 1、2 和 3

然后在 room_reservation 表中，我有以下内容：

```
1 - 2012-07-22
1 - 2012-07-23
1 - 2012-07-24
1 - 2012-07-25
1 - 2012-07-26
2 - 2012-07-23
2 - 2012-07-24 
```

然后在 2012-07-22 和 2012-07-26 之间搜索可用房间应该只返回房间 #2 和 #3。

到目前为止我有这个查询，但没有工作......请帮忙！

```
SELECT DISTINCT room_id AS id
FROM room
WHERE (SELECT COUNT('listing') FROM listing_calendar WHERE listing = l.listing_id AND date BETWEEN '2012-07-22' AND '2012-07-26' GROUP BY listing) < 5" 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:44:01.960

您可以使用此解决方案：

```
SELECT    a.room_id
FROM      rooms a
LEFT JOIN room_reservations b ON 
          a.room_id = b.room_id AND
          b.date BETWEEN '2012-07-22' AND '2012-07-26'
GROUP BY  a.room_id
HAVING    COUNT(b.room_id) < DATEDIFF('2012-07-26', '2012-07-22') + 1 
```

* * *

## [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b2904/3/0)

# ruby-on-rails - Ruby on Rails/Twitter Bootstrap Popover 在 jQuery 更新后无法正常工作

> ID：11604829
> 
> 赞同：3
> 
> 时间：2012-07-22T23:29:16.490
> 
> 标签：ruby-on-rails, jquery, twitter-bootstrap, popover

我在 Rails 3 中使用 Twitter 引导弹出窗口。
当我最初加载页面（显示操作）时，弹出窗口正常工作。

我的部分（一个叫另一个）看起来像这样：

```
<span class="solution_votes_stat" id="<%= 'solution_votes_stat_' + sid.to_s %>">
   <%= render :partial => 'solutions/popover', :locals => {:s => s} %>
</span> 
```

_popover.html.erb 看起来像这样：

```
<% sid = s.id %>
<% solution_vote_up_count = s.solution_votes.votes_up.count %>

<% all_users_who_voted_up(sid) %>
<span class = "popover-with-html" rel = "popover"  
      data-original-title = "Who likes this" 
      data-content = "<%= render :partial => 'solutions/users_who_voted_up', :locals => {:users_who_voted_up => @users_who_voted_up} %>" 
      id="<%= 'solution_' + sid.to_s + '_up_votes' %>">
  <%= solution_vote_up_count %> 
</span>
<%= solution_vote_up_count==1 ? "Advisor" : "Advisors" %> 
```

这会产生这样的 HTML：

```
<span class="solution_votes_stat" id="solution_votes_stat_1">
    <span class = "popover-with-html" rel = "popover"  
          data-original-title = "Who likes this" 
          data-content = "<ul><li>Admin</li></ul>" 
          id="solution_1_up_votes">1 
    </span>
       Advisor
</span> 
```

到目前为止，一切都很好 => 一切正常。
问题是当我尝试用 jQuery 更新它时。

在我的 up_votes.js.erb 中，我有：

```
update_popover = ('<%= escape_javascript(render(:partial => "solutions/popover", :locals => {:s => @solution}))%>');
$('<%= "#solution_votes_stat_"+@solution.id.to_s %>').html(update_popover);
```

作为测试，我点击了反对票，然后点击了赞成票。当我查看生成的 HTML 时，它看起来与上面的完全一样，只是它现在对于这个 div 不起作用（没有弹出窗口）；弹出框仍在处理所有其他 div（使用相同的 HTML）。

关于正在发生的事情以及如何解决这个问题的任何想法？

更新：看起来它正在缓存它。我点击了投票来查看 div HTML 是什么，在 Chrome 开发人员中，HTML 是正确的（0 票等），但是当我查看页面源时，它没有改变（1 票等）。仍然不确定该怎么做......我想直接使用jQuery来修改数据/属性而不是渲染部分？仍然......为什么即使使用缓存数据，弹出框也不再工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:45:05.067

有没有想过给自己一个快速的踢？:) 好的，我想通了。在我的solutions.js.coffee（在资产文件夹中）中，我有这个jQuery在加载文档时触发它：

```
$('.popover-with-html').popover({ html: true }) 
```

当我将此行添加到下面我更新数据的 up_votes.js.erb 文件中时，它会重新加载数据并正确显示。呃 - 一整天都被烧毁了 - 但我想你有时会这样学习。:|

# visual-studio-2010 - 如何在没有互操作程序集的情况下依赖 COM 对象？

> ID：11604834
> 
> 赞同：0
> 
> 时间：2012-07-22T23:29:58.557
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, com, shdocvw

当我向 Microsoft Internet 控件/SHDocVw.dll 添加引用（公共属性、框架和引用，添加新引用）并编译项目时，会在项目的发布文件夹中创建一个新文件。文件 (Interop.SHDocVw.1.1.dll) 需要与程序位于同一文件夹中才能运行。

如何让我的程序使用位于 system32 中的 SHDocVw.dll 而不是程序文件夹中的 Interop.SHDocVw.1.1.dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:33:50.737

不使用主互操作程序集来*代替*本机 DLL，它是一个加载本机 DLL 的 .NET 绑定层。Windows DLL 仍在做所有艰苦的工作。

# linux - 如何熟练使用终端？

> ID：11604839
> 
> 赞同：-2
> 
> 时间：2012-07-22T23:30:38.773
> 
> 标签：linux, macos, terminal

作为一个编程新手，我经常在尝试安装包、使用 virtualenv 以及使用命令行做任何稍微复杂的事情时遇到麻烦。

有哪些很好的参考资料可以帮助我理解路径、环境、shell 脚本等内容？

基本上，我厌倦了复制和粘贴。我想真正了解发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:49:08.887

我使用了 O'Reilly[的 Linux in a Nutshell](http://amzn.to/OfNUJP)。它可以帮助您度过最初的初学者阶段。显然有更多的链接和教程，在线击键列表，通过谷歌搜索很容易找到，但这将帮助你开始，当你在公共汽车或午餐或其他时间阅读时，给你一些你可能不只是在日常生活中发生的想法。

# json - 使用 REST API 删除本地/客户端对象的常用方法是什么？

> ID：11604844
> 
> 赞同：2
> 
> 时间：2012-07-22T23:31:58.147
> 
> 标签：json, web-services, api, rest, restful-architecture

是否有将已删除对象分派给请求者（API 的客户端）的通用设计模式？

我们面临的挑战：

1.  当 API 上的对象被完全删除时，客户端将不知道该对象已消失并将其保留在本地（因为 API 仅显示在特定日期之后更改的对象）
2.  如果我们启用对象的属性以显示已删除（例如“deleted = TRUE”），那么最终 API 中的对象数量会增长并减慢传输速率。

我们研究的另一个选项是在 API 上设置单独的端点以仅显示已删除对象的列表（这是任何人都使用的模式吗？）。

我正在寻找最“RESTful 方式”来删除本地对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:37:04.493

我处理它的方式是您的#1 的变体：每个项目`last updated`在数据库中都有一个字段，如果删除了某些内容，我会在另一个已删除项目表中创建一个条目，并且它的更新值是它被删除的时间。

客户端发出请求，请求“自 X 以来的更改”，这是他们自己的本地存储`last updated`值……它返回新数据和已删除项目的数组。然后在客户端我清除这些值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:35:40.613

陈旧数据始终是客户端/服务器应用程序的问题。如果客户端加载了一些数据，然后在服务器上删除了一些对象，然后客户端发送了一个 DELETE 请求，RESTFul 要做的就是返回一个 404，表示“未找到”。如果客户端知道如果它发送 DELETE 并获得 404，则资源正在从下面删除......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:43:48.023

如果您认为您的资源不是一个列表，而是一个变更集怎么办？

例如。更改您在 git 或 SVN 中的内容。

这样，总有一个“头”版本，客户端总是有一些版本，资源是客户端的最后一个和头之间的变化。

这样你就可以通过检查/使用版本控制系统来应用你学到的任何东西。

如果您需要更复杂的东西，背后的科学称为操作转换 (OT) - [http://en.wikipedia.org/wiki/Operational_transformation](http://en.wikipedia.org/wiki/Operational_transformation)

# hadoop - 如果这些 API 仅使用本地文件系统路径，如何在 hadoop 中使用第三方 API 从 hdfs 读取文件？

> ID：11604845
> 
> 赞同：1
> 
> 时间：2012-07-22T23:31:57.633
> 
> 标签：hadoop, hdfs

我有大型 mbox 文件，我正在使用 mstor 之类的第三方 API 使用 hadoop 解析来自 mbox 文件的消息。我已经在 hdfs 中上传了这些文件。但问题是这个 API 只使用本地文件系统路径，如下所示

```
MessageStoreApi store = new MessageStoreApi(“file location in locl file system”); 
```

我在此 API 中找不到将从 stream 初始化的构造函数。所以我无法读取 hdfs 流并对其进行初始化。

现在我的问题是，我应该将文件从 hdfs 复制到本地文件系统并从本地临时文件夹初始化吗？这就是我现在一直在做的事情：

目前 My Map 函数接收 mbox 文件的路径。

```
Map(key=path_of_mbox_file in_hdfs, value=null){

String local_temp_file = CopyToLocalFile(path in hdfs);
MessageStoreApi store = new MessageStoreApi(“local_temp_file”);
//process file

} 
```

或者还有其他解决方案吗？我期待一些解决方案，例如如果我增加块大小以便单个文件适合一个块，并且以某种方式如果我可以在我的地图函数中获取这些块的位置，因为大多数地图函数将在同一个节点上执行那些块被存储然后我可能不必总是下载到本地文件系统？但我不确定这是否总是有效:)

欢迎提出建议、评论！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:22:53.077

对于本地文件系统路径式访问，HDFS 提供了两个选项：HDFS NFS（通过 NFSv3 挂载）和 FUSE 挂载的 HDFS。

前者记录在[Apache Hadoop 文档](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsNfsGateway.html)下（CDH 用户可能会[遵循此](http://www.cloudera.com/content/cloudera/en/documentation/core/latest/topics/admin_hdfs_nfsgateway.html)文档）

后者记录在[Apache Hadoop wiki](https://wiki.apache.org/hadoop/MountableHDFS)中（CDH 用户可以[在这里](http://www.cloudera.com/content/cloudera/en/documentation/core/latest/topics/cdh_ig_hdfs_mountable.html)找到相关文档）

目前，NFS 功能比 FUSE 选项在上游得到更多维护。

# android - 将 EditText 的文本大小从像素更改为缩放像素

> ID：11604846
> 
> 赞同：0
> 
> 时间：2012-07-22T23:32:00.020
> 
> 标签：android, android-edittext, text-size

我提供了一个文本大小选项，其中一个是用于`EditText`框的。我已经使用`EditText#getTextSize()`. 结果以像素为单位。一旦用户选择了文本大小，我就使用它`edittext.setTextSize(TypedValue.COMPLEX_UNIT_SP, chosen)`来应用文本大小。

问题是不同的屏幕尺寸给了我非常不同的文本大小，例如在 ICS 电话上，`EditText.getTextSize()`返回 36，这绝对是巨大的，绝对不是整个系统使用的默认文本大小。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:01:06.870

由于屏幕密度不同以及从 getTextSize() 获得的值以像素 (px) 为单位，您可能会看到不同的值。Density Independent Pixels(dp) 和 Scaled Pixels(sp) 被调整为独立于屏幕密度，它们是您应该使用的。要从 px 获取 dp 或 sp，您可以使用如下简单的转换：

```
public static float pxToDp( float px, Context context ) {
    Resources resources = context.getResources();
    DisplayMetrics metrics = resources.getDisplayMetrics();
    float dp = px / ( metrics.densityDpi / 160f );
    return dp;
} 
```

或者这个（我从[这篇文章](https://stackoverflow.com/questions/6263250/convert-pixels-to-sp)中得到的）：

```
public static float pixelsToSp(Context context, Float px) {
    float scaledDensity = context.getResources().getDisplayMetrics().scaledDensity;
    return px/scaledDensity;
} 
```

# sql-server - 在不知道节点名称的情况下查询 XML 创建字段名称

> ID：11604854
> 
> 赞同：2
> 
> 时间：2012-07-22T23:33:30.363
> 
> 标签：sql-server, xml, nodes, sql-server-2012

如果我有一个包含 XML 字段类型的 SQL SERVER 2012 表。它可以包含的记录如下。

我已将我的问题简化为以下内容。

记录 1：

```
ID_FIELD='nn1'

XML_FIELD=
<KNOWN_NAME_1>
    <UNKNOWN_NAME1>Some value</UNKNOWN_NAME1>
    <UNKNOWN_NAME2>Some value</UNKNOWN_NAME2>
  ... Maybe more ...
</KNOWN_NAME_1> 
```

记录 2：

```
ID_FIELD='nn2'

XML_FIELD=
<KNOWN_NAME_2>
  <UNKNOWN_NAME1>Some value</UNKNOWN_NAME1>
  <UNKNOWN_NAME2>Some value</UNKNOWN_NAME2>
  ... Maybe more unknown fields ...
</KNOWN_NAME_2> 
```

我想输出非xml：

```
UNKNOWN_NAME1 | UNKNOWN_NAME2 | ETC
-----------------------------------
Some Value      Some value 
```

对于已知的根值（即 KNOWN_NAME_1）

即如果我新的节点值（我没有）我可以

```
SELECT
  XMLData.Node.value('UNKNOWN_NAME1[1]', 'varchar(100)') ,
  XMLData.Node.value('UNKNOWN_NAME2[1],  'varchar(100)')
FROM FooTable
  CROSS APPLY MyXmlField.nodes('//KNOWN_NAME_1') XMLData(Node)
  -- WHERE SOME ID value = 'NN1' (all XML records have a separate id) 
```

一切都很好，但是我想在不知道节点名称的情况下对所有节点（未知数量）执行此操作。根将只包含不会变得更深的节点。

这在 SQL 中可能吗？

我已经看过这个，但我怀疑我能否获得足够的权利来实施它。

[http://architectshack.com/ClrXmlShredder.ashx](http://architectshack.com/ClrXmlShredder.ashx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:51:31.487

如果您不知道输出中的列名，则必须使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)：

```
-- Source table
declare @FooTable table
(
  ID_FIELD char(3),
  XML_FIELD xml
)

-- Sample data
insert into @FooTable values
('nn1', '<KNOWN_NAME_1>
           <UNKNOWN_NAME1>Some value1</UNKNOWN_NAME1>
           <UNKNOWN_NAME2>Some value2</UNKNOWN_NAME2>
         </KNOWN_NAME_1>')

-- ID to look for
declare @ID char(3) = 'nn1'

-- Element name to look for
declare @KnownName varchar(100) = 'KNOWN_NAME_1'

-- Variable to hold the XML to process
declare @XML xml

-- Get the XML
select @XML = XML_FIELD
from @FooTable
where ID_FIELD = @ID

-- Variable for dynamic SQL
declare @SQL nvarchar(max)

-- Build the query
select @SQL = 'select '+stuff(
  (
  select ',T.N.value('''+T.N.value('local-name(.)', 'sysname')+'[1]'', ''varchar(max)'') as '+T.N.value('local-name(.)', 'sysname')
  from @XML.nodes('/*[local-name(.)=sql:variable("@KnownName")]/*') as T(N)
  for xml path(''), type
  ).value('.', 'nvarchar(max)'), 1, 1, '')+
  ' from @XML.nodes(''/*[local-name(.)=sql:variable("@KnownName")]'') as T(N)'

-- Execute the query
exec sp_executesql @SQL, 
     N'@XML xml, @KnownName varchar(100)', 
     @XML = @XML, 
     @KnownName = @KnownName 
```

结果：

```
UNKNOWN_NAME1   UNKNOWN_NAME2
--------------- ---------------
Some value1     Some value2 
```

动态生成的查询如下所示：

```
select T.N.value('UNKNOWN_NAME1[1]', 'varchar(max)') as UNKNOWN_NAME1,
       T.N.value('UNKNOWN_NAME2[1]', 'varchar(max)') as UNKNOWN_NAME2 
from @XML.nodes('/*[local-name(.)=sql:variable("@KnownName")]') as T(N) 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/75869)

# java - 构造函数和关键字“this”

> ID：11604856
> 
> 赞同：1
> 
> 时间：2012-07-22T23:33:49.567
> 
> 标签：java

我有一个语法错误，我不知道如何修复它。代码对我来说似乎是正确的，但 Eclipse 告诉我“构造函数调用必须是构造函数中的第一条语句”在方法`setName()`和`setAge()`

```
 public class KeywordThis {

    private String name;
    private int age;

    public KeywordThis(){

        this.name = "NULL";
        this.age = 0;

    }

    public KeywordThis(String s, int a){

        this.name = s;
        this.age = a;

    }

    public KeywordThis(String s){

        this.name = s;      
    }

    public KeywordThis(int a){

        this.age = a;

    }

    public int setAge(int a){

        this(a);
    }

    public String setName(String s){

        this(s);
    }

    public static void main(String args[] ){

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T23:38:11.933

您不能从实例方法中调用这样的构造函数。您希望您的 setter 更改已有对象的值，而不是创建新对象。我认为你的意思是这样做：

```
public void setAge(int a){

    this.age = a;
}

public void setName(String s){

    this.name = s;
} 
```

另请注意，您的设置器通常不返回值，因此我已将它们更改为返回类型 void。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:38:41.350

创建对象后，您不能手动调用构造函数。构造函数只能在另一个构造函数内部调用。

正如其他人指出的那样，它应该是：

```
public void setAge(int a) {
    this.a = a;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:37:56.383

请注意，您的二传手应该看起来像

```
public void setAge(a) {
   this.a = a;
} 
```

而不是构造一个新对象。如果你不这样做，你就打破了一个普遍存在的 Java 约定。

假设您想在 setter 中创建一个新实例，您可以执行类似的操作

```
public KeywordThis setAge(a){
   return new KeywordThis(a);
} 
```

并且不使用`this(a)`. 尝试使用`this`只能在构造函数中完成（为同一个类调用另一个构造函数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T03:50:44.907

公共类 KeywordThis {

```
private String name;
private int age;

public KeywordThis(){

    this.name = "NULL";
    this.age = 0;

}

public KeywordThis(String s, int a){

    this.name = s;
    this.age = a;

}

public KeywordThis(String s){

    this.name = s;      
}

public KeywordThis(int a){

    this.age = a;

}

public int setAge(int a){

    this(a);
    int b=a;
    return b;
}

public String setName(String s){

    this(s);
    String s1=s;
    return s; 
}

public static void main(String args[] ){

   KeywordThis ob1=new Keyword();
   ob1.setAge(20);
   ob1.setName("sandy");

}

} 
```

java共享|编辑

# r - ggplot2：当 ymin 大于 ymax 时色带改变填充

> ID：11604859
> 
> 赞同：0
> 
> 时间：2012-07-22T23:34:06.167
> 
> 标签：r, ggplot2

我有两个时间序列数据，一个在某个时期高于另一个，然后在另一个时期反转顺序。我可以使用 geom_ribbon 填充两条线之间的间隙，然后使用不同的颜色（例如灰色 if`ts2 > ts1`和粉红色 if `ts2 < ts1`）吗？

在我看来， ggplot 似乎隐含地喜欢`aes(ymin=pmin(ymin,ymax), ymax=pmax(ymin,ymax))`，并不关心两者中的哪一个实际上更大。

# mysql - MySQL 从马确定人的年数 (Times 3)

> ID：11604860
> 
> 赞同：0
> 
> 时间：2012-07-22T23:34:19.357
> 
> 标签：mysql, date

对不起，我已经搜索了线程并尝试了直到我的大脑受伤，但我不得不寻求帮助。

我有一张名为“Horse”的桌子，上面有 ID、姓名、出生（仅限年份）、颜色、死亡。

我需要返回死去的马的年龄，然后乘以 3 得到人类年龄，并显示马 ID、名称和人类年龄。

我被困在第一个障碍。我不能让桌子返回马的年龄。

我正在使用另一个 SO 用户的建议；

选择 DATEDIFF(horse.born, '2012') / 365.25 作为人类年

但是，这将返回 Null。

还尝试了一个 CURDATE：

CURDATE('%Y%') - 生于马年；

不好。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:57:41.287

以下假设出生是“int”，而死是“日期”：

```
select (Year(died)-born) * 3 from horse where died is not null 
```

（此外，由于所有赛马都被认为是在 1 月 1 日出生，因此可以忽略小数年份）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:59:32.113

如果您的列`Born`仅包含一年（大概是整数？），您将无法对其执行日期数学运算。而且您可能会遇到列名（例如`Human Years`其中包含空格）的麻烦。或者这是一个错字？

无论如何，尝试类似：

```
SELECT Id, Name, (YEAR(CURDATE()) - Born) * 3 AS Human_Years
  FROM horse
  WHERE Died IS NOT NULL 
```

还是`Died`日期字段？在这种情况下，您可能想要类似的东西：

```
SELECT Id, Name,
  (DATEDIFF(Died, STR_TO_DATE(CONCAT(Born, "-08-01"),"%Y-%m-%d")/365.25 * 3 AS Human_Years
  FROM horse
  WHERE Died IS NOT NULL 
```

# compiler-errors - Arduino初学者问题

> ID：11604865
> 
> 赞同：0
> 
> 时间：2012-07-22T23:35:05.960
> 
> 标签：compiler-errors, arduino

我对 Arduino 很陌生，并且正在尝试示例。使用以下代码时，我遇到了许多问题：

```
#include <ctype.h>
#include <Arduino.h>
#include "Telegraph.h"
//#include <Telegraph.h>

char* LETTERS[]  =  {
  ".-", "-...", "-.-.", "-..", ".",      // A-E
  "..-.", "--.", "....", "..", ".---",   // F-J
  "-.-", ".-..", "--", "-.", "---",      // K-O
  ".--.", "--.-", ".-.", "...", "-",     // P-T
  "..-", "...-", ".--", "-..-", "-.--",  // U-Y
  "--.."                                 // Z
};

char* DIGITS[]  =  {
  "-----", ".----", "..---", "...--",     //0-3
  "....-", ".....", "-....", "--...",     //4-7
  "---..", "----."                        //8-9
};

Telegraph::Telegraph(const int outputPin, const int ditLength){
  _outputPin  =  outputPin;
  _ditLength  =  ditLength;
  _dahLength  =  dahLength;
  pinMode(_outputPin, OUTPUT);
}

void Telegraph::outputCode(const char* code){
  for(int i=0; i<strlen(code); i++){
    if( code[i]  ==  '.' )
      dit();
    else
      dah();
  }
}

void Telegraph::dit(){
  Serial.print(".");
  outputSymbol(_ditLength);
}

void Telegraph::dah(){
  Serial.print("-");
  outputSymbol(_dahLength);
}

void Telegraph::outputSymbol(const int length){
  digitalWrite(_outputPin, HIGH);
  delay(length);
  digitalWrite(_outputPin, LOW);
  delay(length);
}

void Telegraph::sendMessage(const char* message){
  for(int i=0;  i  <  strlen(message); i++){
    const char currentChar  =  toupper(message[i]);
    if( isalpha(currentChar) ){
      outputCode(LETTERS[currentChar  -  'A']);
      delay(_dahLength);
    }else if(isdigit(currentChar) ){
      outputCode(DIGITS[currentChar  -  '0']);
      delay(_dahLength);
    }else if(currentChar  =  ' '){
      Serial.print(" ");
      delay(_ditLength * 7);
    }
  }
  Serial.println();
} 
```

我收到以下错误：

```
Telegraph.cpp:6:15: error: two or more data types in declaration of ‘LETTERS’
Telegraph.cpp: In constructor ‘Telegraph::Telegraph(int, int)’:
Telegraph.cpp:24:18: error: ‘dahLength’ was not declared in this scope
Telegraph.cpp: In member function ‘void Telegraph::sendMessage(const char*)’:
Telegraph.cpp:58:18: error: ‘LETTERS’ was not declared in this scope
Telegraph.cpp:63:30: error: assignment of read-only variable ‘currentChar’ 
```

抱歉，如果这个问题太笼统，但正如我所提到的，我很新，并不完全理解代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:48:56.890

> Telegraph.cpp:6:15: 错误：'LETTERS' 声明中有两种或多种数据类型</p>

在其他地方`LETTERS`已经定义了符号。也许在`Telegraph.h`？你必须寻找那个。

```
Telegraph.cpp: In constructor ‘Telegraph::Telegraph(int, int)’:
Telegraph.cpp:24:18: error: ‘dahLength’ was not declared in this scope 
```

相关代码：

```
 _dahLength  =  dahLength; 
```

是的，`dahLength`无处定义。也许您想将此作为另一个参数添加到构造函数中？

```
Telegraph.cpp: In member function ‘void Telegraph::sendMessage(const char*)’:
Telegraph.cpp:58:18: error: ‘LETTERS’ was not declared in this scope 
```

有关该问题，请参见上文。解决第一个问题，忽略这个问题这么久。

```
Telegraph.cpp:63:30: error: assignment of read-only variable ‘currentChar’ 
```

这是因为

```
}else if(currentChar  =  ' '){ 
```

我确定你想使用`==`而不是`=`.

# android - 如何在 AndEngine 中删除碰撞的 box2d 物体？

> ID：11604871
> 
> 赞同：3
> 
> 时间：2012-07-22T23:36:24.270
> 
> 标签：android, box2d, andengine

我正在使用 AndEngine 创建一个带有 box2d 扩展名的游戏。我想实现一个条件，即当两个物体发生碰撞时，它们应该被移除或重生。最初我尝试使用

```
if(sprite1.collidesWith(sprite2))
// remove the sprites 
```

但这似乎无济于事，因为精灵附着在它们各自的身体上。我还尝试使用contactListener，如下所示：

```
bodyA=getFixtureA().getBody();
bodyB=getFixtureB().getBody(); 
```

然后稍后

```
if(bodyA!=null && bodyB!=null)
// remove the bodies 
```

但这使游戏崩溃。有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T23:43:30.193

所以有一些关于碰撞的东西，但我花了很长时间才弄清楚如何根据碰撞移除对象。所以决定做一个快速教程来尝试帮助其他人。关键是在 Box2D 中，您不能在碰撞处理程序中删除主体，需要做一些事情来标记它以便在下次更新时处理删除。（可能是更好的方法，但这有效并完成了工作）

这是一个非常好的教程的链接。

[Box2D 碰撞和移除](http://www.andengine.org/forums/tutorials/box2d-collision-and-removal-t523.html)

这肯定会帮助您完成工作。

谢谢 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:48:32.027

如果确实发生了 Sprite 碰撞，您也可以同时移除身体：

```
mPhysicsWorld.getPhysicsConnectorManager().findPhysicsConnectorByShape(pSprite); 
```

# php - 从 php 返回的 JSON 是 [obejct Object] 并且 jQuery.parseJSON 是 null

> ID：11604872
> 
> 赞同：2
> 
> 时间：2012-07-22T23:36:42.080
> 
> 标签：php, javascript, jquery, json

在我的 php 文件中，我有：

```
$arr[] = array("status"=>0);
echo json_encode($arr); 
```

在我的 javascript 中，我有：

```
$(document).ready(function(){

    initialize(); 
    $("#searchbutton").click(function(){

    var usrinput = $("#userinput").val();

    $.get(
        "searchpageajaxjson.php",
        {searchterm: usrinput},
        function(data){
            searchreturned(data);
        },
        "json"
    ); 
    });
 });

function searchreturned(data){
   console.log(data); 
   var parsed = jQuery.parseJSON(data);
   console.log(parsed); 
   //for (var i = 0; i < parsed.length; i++) {  
    //            alert(parsed[i]);  
    //     } 
   //    
} 
```

console.log(data) 显示 [object Obejct] 和 console.log(parsed) 显示 null

我哪里错了？

编辑添加：

alert(data.status) 显示未定义。

第二次编辑：

我非常感谢我收到的所有帮助。很难选择答案，因为由于所有评论中收到的所有帮助，我真的只能从这个问题中继续前进。我总是敬畏你们这些善良的人，他们花时间帮助像我这样的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:44:02.793

你不应该再打电话`jQuery.parseJSON`了`data`。jQuery 已经为您处理好了，因为您`"json"`使用`dataType`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T23:51:15.143

**1.**没有理由调用`jQuery.parseJSON`，或者`$.parseJSON`因为`"json"`你在这里传递的参数，jQuery知道它已经是一个JSON对象：

```
$.get('source', {param:param}, function(data){ /*work with data*/ }, "json"); 
```

**2.**如果`console.log(data);`不是 null 并且您正在`[Object Object]`尝试查看该对象的属性，如下所示：

**例如：**探索你的对象：

![在此处输入图像描述](../Images/c2e8a7b0ecbcab400d981fa5b2ce74d6.png)

**例如：**从对象打印值：

```
//this will output "Horror"
data.genre 
```

希望这对您有所帮助。

# r - 绘图中的指向箭头

> ID：11604876
> 
> 赞同：2
> 
> 时间：2012-07-22T23:37:11.110
> 
> 标签：r, ggplot2

我试图在 x 轴上的第 10 点指向一个小箭头。这个箭头垂直指向下方。我无法使用以下代码这样做。这里还需要什么？

```
data = data.frame(rnorm(1000))
colnames(data) = "numOfX"
m <- ggplot(data, aes(x=numOfX))
m + geom_histogram(colour = "blue", fill = "white", binwidth = 0.5) +
annotate("segment", x=10,xend=10,y=0,yend=0,arrow=arrow()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:32:59.593

这是你想要做的吗？

```
data = data.frame(rnorm(1000))
colnames(data) = "numOfX"
m <- ggplot(data, aes(x=numOfX))
m + geom_histogram(colour = "blue", fill = "white", binwidth = 0.5) +
  annotate("segment", x=10,xend=10,y=25,yend=0,arrow=arrow()) 
```

# java - 用于从不同服务器执行 shell 文件的 Java 应用程序

> ID：11604887
> 
> 赞同：0
> 
> 时间：2012-07-22T23:39:03.263
> 
> 标签：java, shell, execute

我想知道以下是否可行：

我必须创建一个从不同服务器运行 .sh 文件的 Java 应用程序，我有我的类来执行 shell，使用 Runtime 和 Process，它从我的计算机运行 .sh 文件，现在的事情是我想知道是否改为我的位置是

```
 process = runtime.exec("/home/user/Documents/example.sh"); 
```

可能：

```
 process = runtime.exec("180.150.2.***/server/user/Documents/serverExample.sh"); 
```

问题是，要从服务器获取 .sh 文件，我必须登录，该应用程序可以是桌面应用程序或 Web 应用程序，但必须使用 Java，那么，我该怎么做呢？

我感谢您的帮助。

化学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:09:03.177

查看[Jsch](http://www.jcraft.com/jsch/)或[Ganymed SSH](http://www.cleondris.ch/opensource/ssh2/)。我使用后者以编程方式执行 ssh/scp 任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T00:51:39.677

基本上，我不认为你可以这样做，你正在尝试的方式。将`Runtime.exec(...)`委托给操作系统执行实际执行。

有许多方法可以实现您想要的，无论是纯粹使用 Java 还是通过基于操作系统的其他实用程序。

您可以通过 SSH 或 telnet 连接到远程机器并通过这些接口执行命令。

您可以编写一个客户端服务器应用程序，服务器将允许您向它发送命令以代表您执行（但您必须了解这是一个巨大的安全风险）。

# python - 具有多种设置的python单元测试？

> ID：11604888
> 
> 赞同：13
> 
> 时间：2012-07-22T23:39:38.707
> 
> 标签：python, unit-testing, sockets, fixtures

我正在使用带有数百个测试用例的套接字开发一个模块。这很好。除了现在我需要测试所有有和没有socket.setdefaulttimeout（60）的情况......请不要告诉我剪切和粘贴所有测试并在设置/拆卸中设置/删除默认超时。

老实说，我知道将每个测试用例单独布置是一种很好的做法，但我也不喜欢重复自己。这实际上只是在不同的上下文中进行测试，而不是不同的测试。

我看到 unittest 支持模块级设置/拆卸装置，但对我来说，如何将我的一个测试模块转换为使用两种不同设置进行两次测试对我来说并不明显。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-03-26T20:40:42.637

你可以这样做：

```
class TestCommon(unittest.TestCase):
    def method_one(self):
        # code for your first test
        pass

    def method_two(self):
        # code for your second test
        pass

class TestWithSetupA(TestCommon):
    def SetUp(self):
        # setup for context A
        do_setup_a_stuff()

    def test_method_one(self):
        self.method_one()

    def test_method_two(self):
        self.method_two()

class TestWithSetupB(TestCommon):
    def SetUp(self):
        # setup for context B
        do_setup_b_stuff()

    def test_method_one(self):
        self.method_one()

    def test_method_two(self):
        self.method_two() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T13:58:50.483

关于这个问题的其他答案是有效的，因为它们可以在多种环境下实际执行测试，但在玩弄这些选项时，我认为我更喜欢一种更独立的方法。我正在使用套件和结果来组织和显示测试结果。为了使用两个环境而不是两个测试运行一个测试，我采用了这种方法 - 创建一个 TestSuite 子类。

```
class FixtureSuite(unittest.TestSuite):
    def run(self, result, debug=False):
        socket.setdefaulttimeout(30)
        super().run(result, debug)
        socket.setdefaulttimeout(None)
...
suite1 = unittest.TestSuite(testCases)
suite2 = FixtureSuite(testCases)
fullSuite = unittest.TestSuite([suite1,suite2])
unittest.TextTestRunner(verbosity=2).run(fullSuite) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-22T23:42:53.083

我会这样做：

1.  让您的所有测试都派生自您自己的 TestCase 类，我们称之为 SynapticTestCase。

2.  在 SynapticTestCase.setUp() 中，检查环境变量以确定是否设置套接字超时。

3.  运行整个测试套件两次，一次以一种方式设置环境变量，然后再次以另一种方式设置环境变量。

4.  编写一个小的 shell 脚本来双向调用测试套件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T00:00:01.723

如果您的代码没有调用`socket.setdefaulttimeout`，那么您可以通过以下方式运行测试：

```
import socket
socket.setdeaulttimeout(60)
old_setdefaulttimeout, socket.setdefaulttimeout = socket.setdefaulttimeout, None
unittest.main()
socket.setdefaulttimeout = old_setdefaulttimeout 
```

这是一个黑客，但它可以工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-14T09:03:26.950

您还可以继承并重新运行原始套件，但覆盖整个 setUp 或其中的一部分：

```
class TestOriginal(TestCommon):
    def SetUp(self):
        # common setUp here

        self.current_setUp()

    def current_setUp(self):
        # your first setUp
        pass

    def test_one(self):
        # your test
        pass

    def test_two(self):
        # another test
        pass

class TestWithNewSetup(TestOriginal):
    def current_setUp(self):
        # overwrite your first current_setUp 
```

# php - Zend Project 给出 404

> ID：11604890
> 
> 赞同：0
> 
> 时间：2012-07-22T23:40:26.117
> 
> 标签：php, zend-framework, web, http-status-code-404

我正在关注本[教程](http://akrabat.com/zend-framework-tutorial/)，但遇到了一些麻烦。该应用程序由具有共享托管的网络解决方案托管。当我尝试访问其中一个新创建的操作时，我收到一条 404 消息。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我为我的公共目录使用了建议的 htaccess 设置，但仍然没有运气。问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:27:57.300

您可以通过以下方式检查 mod_rewrite 启用或禁用：

```
in_array('mod_rewrite', apache_get_modules()); 
```

另外，您如何访问您的文件？理想情况下，它是：example.com// 确保您有“views/scripts//”？

# c# - 使用 LinqToSql 持久化对象图的最佳方法是什么？

> ID：11604892
> 
> 赞同：1
> 
> 时间：2012-07-22T23:40:57.923
> 
> 标签：c#, linq-to-sql

我有一个包含许多关联实体的实体，我正在尝试使用这些实体来坚持使用`LinqToSql`，来自`NHibernate`我用来创建这样的实体的世界

```
// UI layer
var entity1 = new Entity1();

entity1.Entity2 = new Entity2 { Id =  long.Parse(dropdown.SelectedValue) };
entity1.Entity3 = new Entity3 { Id =  long.Parse(dropdown2.SelectedValue) };
...
entity1.List = GetEntities();
...

//DAO layer
public void Insert(Entity1 entity)
{
   dataContext.Entity1.InsertOnSubmit(entity);                                  
   dataContext.SubmitChanges();                                            
} 
```

当我调用层 `dbContext.SubmitChanges()`中的方法时，尝试保留关联的类，它不必这样做，我知道要解决这个问题，我必须将这些实体附加到当前的.`DAO``LinqToSql``dataContext`

所以我的问题是你如何处理这样的情况以及使用以下方法持久化对象图的最佳方法是什么`LinqToSql` ：

*   像上面的例子一样实例化关联的类，然后将主题附加到`datacontext`

*   或直接从数据库加载主题？

感谢帮助。

# php - dynatree：如何将 dynatree 数据转换为 HTML？

> ID：11604893
> 
> 赞同：0
> 
> 时间：2012-07-22T23:40:58.433
> 
> 标签：php, html, dynatree

我正在使用[dynatree](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)插件对在线应用程序进行编码，并且我正在使用 toDict() 方法将树数据转换为 JavaScript 对象，然后存储在数据库中。

我的问题是：

我需要一种将这些数据转换为 HTML (ul-li) 结构的方法。

例如

```
Title 1
Title 2
  +Title 2.1
  +Title 2.2
Title 3 
```

表格应转换为：

```
<ul>
<li>Title 1</li>
<li>Title 2
  <ul>
    <li>Title 2.1</li>
    <li>Title 2.2</li>
  </ul>
</li>
<li>Title 3</li>
</ul> 
```

上面的表格。如何在 PHP 中完成（数据将从数据库中提供）？

数据样本：

```
{"title":"Products", "key":"products", "isFolder":true, "isLazy":false, "tooltip":null, "href":null, "icon":null, "addClass":null, "noLink":false, "activate":false, "focus":false, "expand":true, "select":false, "hideCheckbox":true, "unselectable":false, "children":[{"title":"Product 1 Category", "key":"products-product-1-category", "isFolder":true, "isLazy":false, "tooltip":"Product 1", "href":null, "icon":null, "addClass":null, "noLink":false, "activate":false, "focus":false, "expand":true, "select":false, "hideCheckbox":false, "unselectable":false, "children":[{"title":"Product 1.1 Category", "key":"products-product-1-product-11-category", "isFolder":true, "isLazy":false, "tooltip":"Product 1.1 Category", "href":null, "icon":null, "addClass":null, "noLink":false, "activate":true, "focus":false, "expand":true, "select":false, "hideCheckbox":false, "unselectable":false, "children":[{"title":"Product Name", "key":"products-product-1-category-product-11-category-product-name", "isFolder":false, "isLazy":false, "tooltip":"Product Name", "href":null, "icon":null, "addClass":null, "noLink":false, "activate":false, "focus":false, "expand":false, "select":false, "hideCheckbox":false, "unselectable":false}]}]}]} 
```

**注意**：isFolder 表示，它将是列表项 (li)，但将具有子无序列表 (ul-li) 结构。

上面的数据结构等于：

```
Products (isFolder = true)
  +Product 1 Category (isFolder = true)
    +Product 1.1 Category (isFolder = true)
      +Product Name (isFolder = false) 
```

和 HTML 表单应如下所示（或任何其他可展开/可折叠的列表样式菜单表单）：

```
<ul>
<li>Products
<ul>
    <li>+Product 1 Category
    <ul>
        <li>+Product 1.1 Category
        <ul>
            <li>+Product Name</li>
        </ul>
        </li>
    </ul>
    </li>
</ul>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:32:06.477

因为我找不到比dynatree自己的方法更好的解决方案，我通过使用dynatree自己的列表机制解决了这个问题。

我已经包含了 Dynatree.js，添加了一个 div (id=tree) 和 fire

```
$('#tree').dynatree(); 
```

功能。这不是最有用的方法（因为 SEO/url 链接和可视化问题），但它似乎是最简单的方法。

# objective-c - 无法从 NSValue 的 mutableArray 中提取 CGPoint 值

> ID：11604894
> 
> 赞同：2
> 
> 时间：2012-07-22T23:41:00.760
> 
> 标签：objective-c, xcode, nsmutablearray, cgpoint, nsvalue

我制作了一个 CGpoints 的 NSMUtableArray，并通过将它们子类化为 NSValue 来存储它们，但我无法获取这些值。在这里，我做了什么。

```
 CGPoint graphPoint;
    NSMutableArray *pointValues = [[NSMutableArray alloc] init];

    for( int x =0;x<5; x++)
    {
    NSDictionary* xValue = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:x] forKey:@"X"];
    graphPoint.x =x;
    graphPoint.y = [CalculatorBrain runProgram: self.graphingPoint usingVariableValues:xValue];

    [pointValues addObject:[NSValue valueWithCGPoint:graphPoint]];

} 
```

我尝试使用它来获取值，但我只是返回 null

```
for( int x=0; x<5; x++) {
NSValue *val = [pointValues objectAtIndex:x];
CGPoint point = [val CGpointValue];
NSLog(@"Points = %@", point);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:48:44.737

您不能`CGPoint`使用`%@`格式说明符打印 a，因为它不是对象。相反，使用[`NSStringFromCGPoint()`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/NSStringFromCGPoint)：

```
NSLog(@"%@", NSStringFromCGPoint(myPoint)); 
```

# r - R中分散数据帧数据的平滑曲线并添加置信区间

> ID：11604896
> 
> 赞同：0
> 
> 时间：2012-07-22T23:41:40.443
> 
> 标签：r

我有很多data.frame，每个都包含很多列。说我的第一个 data.frame col1=a, col2=b,col3=c

我想绘制 x-axis=b/a 和 y-axis=a。我设法绘制它们（散点图）

```
plot (dataframe$b/dataframe$a, dataframe$a, xlim=...,ylim=..) 
```

现在，我需要获取散点数据的模式（我不想要线性回归，因为 x 和 y 都在变化）。我确实使用了该命令`loess(..)`，并且能够显示该模式。

```
lo_smooth<-loess(x,y, f=number, iter=number) 
```

如何将置信区间 (CI) 添加到图表中？我的目标是检查两个 data.frame 是否在彼此的 CI 内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:25:39.507

使用您的尝试的解决方案（干得好！）加上您的澄清

一些虚拟数据

```
dppm <- data.frame(a = runif(100, 1, 100), b = runif(100,1, 100))
dppm_2 <- data.frame(a = runif(100, 1, 75), b = runif(100,1,75))
dppm_3 <- data.frame(a = runif(100, 1,50), b = runif(100,1,50)) 
```

使用 reshape2 将这些数据融合到单个数据框库中（reshape2）

```
data_list <- list(dppm1 = dppm, dppm2 = dppm_2, dppm3 = dppm_3)
all_data <- melt(data_list, id.vars = c('a','b')) 
```

这个单一的数据框有一列`L1`是标识符（在`data_list`.

```
head(all_data)
          a        b    L1
## 1 83.202896 36.94026 dppm1
## 2 42.618987 11.23863 dppm1
## 3 29.505029 11.91742 dppm1
## 4 63.569487 59.07395 dppm1
## 5 94.499772 47.32779 dppm1
## 6  4.535389 64.11570 dppm1 
```

然后我们可以通过这个标识符绘制这个组合的数据集和颜色。我们还将`fill`平滑设置为相同的标识符，以便 CI 以相同的方式着色。

```
ggplot(all_data,aes(x = b/a, y = a, colour = L1)) + 
  geom_point() + 
  stat_smooth(method = "loess", se = TRUE,level = 0.90, aes(fill = L1))+
  coord_cartesian(ylim = c(0, 100)) 
```

![在此处输入图像描述](../Images/ee16f1bc1a4bf9baa1c0e48a06a3220d.png)

# iphone - UIBarButtonItem 偏移量？

> ID：11604899
> 
> 赞同：2
> 
> 时间：2012-07-22T23:42:11.467
> 
> 标签：iphone, objective-c, uinavigationbar, uibarbuttonitem, uitoolbar

我正在尝试偏移我的应用程序中的 UIBarButtonItems，由于我用于导航栏的图像，我需要它们稍微偏移，因此它们都正确排列。我已经设法这样做了：

```
[[UINavigationBar appearance] setTitleVerticalPositionAdjustment:-3 forBarMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundVerticalPositionAdjustment:-3 forBarMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonBackgroundVerticalPositionAdjustment:-3 forBarMetrics:UIBarMetricsDefault]; 
```

我有两个疑问：

1.  这将停止按钮具有任何突出显示的状态，它们起作用但没有明显地被按下。无论如何围绕这个？

2.  更重要的是，这很好地在导航栏中向上推动我的按钮，但它在我的工具栏中以及在我需要相反的屏幕底部将它们向上推动，实际上将它们向下推动一点。我该如何处理？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T10:42:17.507

原来我找到了解决方案！您可以使用以下方法根据对象所在的视图调整这些外观属性：

```
appearanceWhenContainedIn: 
```

代替标准

```
appearance 
```

所以我已经实现了我的需求，根据按钮是在导航栏还是工具栏中进行上下调整：

```
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setBackgroundVerticalPositionAdjustment:-3 forBarMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setBackButtonBackgroundVerticalPositionAdjustment:-3 forBarMetrics:UIBarMetricsDefault];

    [[UIBarButtonItem appearanceWhenContainedIn:[UIToolbar class], nil] setBackgroundVerticalPositionAdjustment:3 forBarMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearanceWhenContainedIn:[UIToolbar class], nil] setBackButtonBackgroundVerticalPositionAdjustment:3 forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T00:46:01.027

标签栏项目框架可以直接操作：

```
// get the handle of your tabBar (probably self.tabBarController.tabBar
for (UIView *item in tabBar.items) {
    item.frame = CGRectOffset(item.frame, 0.0, -3.0);
} 
```

水平调整位置的一种侵入性较小的方法是利用条形按钮项的固定和灵活空间：

```
// this will put three pixels between whatever items it sits between
UIBarButtonItem *fixed = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil]
fixed.width = 3.0; 
```

将这些放入您的 items 数组中。因此，如果您想将两个项目分开 3px，请执行以下操作：

```
tabBar.items = [NSArray arrayWithObjects:button1, fixed, button2, nil]; 
```

# javascript - jquery 正则表达式警告框

> ID：11604900
> 
> 赞同：-1
> 
> 时间：2012-07-22T23:42:40.507
> 
> 标签：javascript, regex

我有这段代码，它使用正则表达式验证字段。此时它会弹出一个窗口，以防出现问题。我想放弃这一点，并在字段旁边或上方显示一条消息。请问有什么帮助吗？

这是代码：

```
<script>
function validate(form) {

var pwd = form.elements.pasa.value;
var eml = form.elements.pasa2.value;

if(5 > pwd.length || pwd.length > 25){
    alert("error");
    return false;
}

var rgx = /[a-zA-Z]|\d+/;
if(!rgx.test(pwd)){
    alert("error");
    return false;
}

rgx = /\s/;
if(rgx.test(pwd)){
    alert("error");
    return false;
}

if(8 > eml.length || eml.length > 40){
    alert("error");
    return false;
}

var rgx = /^\s*[a-z\d_]+(\.[a-z\d_]+)*@[a-z\d\-]{1,255}\.[a-z]{2,6}\s*$/;
if(!rgx.test(eml)){
    alert("error");
    return false;
}

rgx = /\s/;
if(rgx.test(eml)){
    alert("error");
    return false;
}

return true;
}

</script> 
```

和形式：

```
<form name="Form1" method="post" action="action1.php" language="javascript" onSubmit="return      validate(this);" id="Form1">
<input name="pasa" class="field" type="text">
<input name="pasa2" class="field" type="text">
<input type="submit">
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:48:25.973

`alert()`用将消息放在正确位置的代码替换调用。`createElement`和其他基本 DOM 方法之类的东西`appendChild`可能很有用。

# c - 什么是无操作系统的裸机 Cortex M3 的开源数据存储

> ID：11604902
> 
> 赞同：6
> 
> 时间：2012-07-22T23:42:54.680
> 
> 标签：c, datastore

我正在寻找有关用 C 语言编写的数据存储的建议，该存储将在没有任何操作系统的情况下为 ARM Cortex M3 编译。

我希望它是：

*   用C写的
*   最好是免费和/或开源的
*   能够用 GCC 编译
*   适用于没有操作系统或文件系统支持的裸机处理器

它可以是 SQL，也可以不是。我想要与 JSON 兼容的 MongoDB 之类的东西（即可以通过 JSON 在纯 C 字符缓冲区中进行序列化。）

数据存储的需求是通过固定分配的内存管理 RAM 中的数据。没有“动态”分配（即没有 malloc）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:33:11.410

SQLite3 是一个非常好的竞争者，但如果你只是在寻找一个小而简单的键/值存储，你也应该查找[gdbm](http://www.gnu.org.ua/software/gdbm/)。

# javascript - JavaScript 事件处理程序 jQuery

> ID：11604906
> 
> 赞同：0
> 
> 时间：2012-07-22T23:43:31.007
> 
> 标签：javascript, jquery, html

我正在做一个手工项目，这个项目是由一个明显比我更擅长 HTML 和 JavaScript 的人编写的。html 有这样的 AJAX 链接：

```
<ul class="subNav">
       <li><a link="contacts.html">Contacts</a></li>
       <li><a link="contacts_add.html">Add Contact</a></li>
</ul> 
```

我认为在这段代码中处理：

```
$('.subNav li a').click(function() {

        var href = $(this).attr('link')

        $('#mainStage').load(href, function() {
            pageLoad();
        })
}) 
```

上面的所有代码都能完美运行。

我的问题是我似乎无法重新创建此功能。我正在使用这个 HTML：

```
 <div class="nameTitle colorOne"><a link="contacts_add.html">
      <span class="firstNameField">Contact Name</span>
 </a></div> 
```

和这个JavaScript：

```
$('.nameTitle').click(function() {
        alert('')
        $('#mainStage').load("contacts_add.html", function() {
            pageLoad();
        })
}) 
```

当我单击“nameTitle”类时，它应该将contacts_add.html 加载到页面的mainStage 部分，但我看不到任何事情发生。我敢肯定，精通这种编码风格的人可以告诉我为什么我的事件从不触发，而早期的代码却触发了。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:46:56.683

您应该尝试将代码更改为以下内容：

```
$('.nameTitle').click(function() {

  //This line finds the address to load
  var address = $(this).children("a").attr("link");

  //This line loads the address and then runs the pageLoad function when it has completed
  $('#mainStage').load(address, function() {
    pageLoad();
  });
}); 
```

如果这不起作用，可能是因为 html 是动态加载的。在这种情况下您需要使用，请参阅[此处](http://api.jquery.com/on/)`.on`的此链接。

为了回应下面布雷特的评论，我整理了一个 jsfiddle`.on`在[这里](http://jsfiddle.net/HxqBV/)展示。我还补充说`.preventDefault`，因为这可能会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:54:16.673

尝试

```
$('.nameTitle a').click(function() { 
```

可能是您正在尝试使用仅接受点击“a”标签的浏览器，尽管希望它们越来越少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T23:55:30.680

'click' 事件永远不会在您的 div 上引发，因为有`a`一个定义了 href 的内部元素。单击后，将首先在锚链接上引发事件，默认情况下，该事件将重定向到 href 指定的位置。为了使其正常工作，请在以下位置出现点击时捕捉点击`a`：

```
$('.nameTitle a').click(function(e) {
    e.preventDefault(); // prevent browser from following href
    alert('');
    $('#mainStage').load("contacts_add.html", function() {
        pageLoad();
    });
}); 
```

[演示](http://jsfiddle.net/ZwS2k/)- 注释掉负载，因为该页面不在此服务器上。另请注意，我将您的`a`元素更改为具有属性`href`而不是`link`.

# excel - 使用公式，从变量字符串中提取操作系统版本号

> ID：11604909
> 
> 赞同：1
> 
> 时间：2012-07-22T23:43:58.893
> 
> 标签：excel, parsing, substring, excel-formula

我有一个在我工作场所的一堆服务器上运行的操作系统列表。给出操作系统的字符串可以有多种格式。以下是一些示例：

*   AIX 5.1
*   VMware ESX Server 3.5.0 build-110268
*   Linux Linux 2.6.X Linux
*   红帽企业 AS 4 (2.6.9-78.0.13.ELlargesmp)
*   Microsoft (R) Windows (R) 2000 高级服务器
*   微软视窗 XP Win2008R2 6.1.7601

总共有 180 个唯一字符串（以及超过 10,000 个服务器）。

我的老板要求一个公式来从每个字符串中提取操作系统类型和版本。我通过查找一个包含十个条目的表，为能够可靠工作的操作系统类型制作了一个。但是版本公式更难，因为版本的格式取决于操作系统的类型，即使这样，每种操作系统类型也可以有多种格式。

就我而言，您需要一个包含 180 行的表，字符串在 COL A 中，版本在 COL B 中，然后对字符串进行 Vlookup。但是，他要求从字符串中提取版本，仅使用 excel 公式，而不使用 vba。

在这一点上我几乎放弃了，所以我把它扔到这个网站上。任何人都知道这是否可以做到，以及如何做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T02:15:26.190

这是我的尝试：

```
=IF(NOT(ISNUMBER(SEARCH(".", A1))), "Cannot find version number", IF(NOT(OR(MID(A1, SEARCH(".", A1) - 2, 1) = "1", MID(A1, SEARCH(".", A1) - 2, 1) = "2", MID(A1, SEARCH(".", A1) - 2, 1) = "3", MID(A1, SEARCH(".", A1) - 2, 1) = "4", MID(A1, SEARCH(".", A1) - 2, 1) = "5", MID(A1, SEARCH(".", A1) - 2, 1) = "6", MID(A1, SEARCH(".", A1) - 2, 1) = "7", MID(A1, SEARCH(".", A1) - 2, 1) = "8", MID(A1, SEARCH(".", A1) - 2, 1) = "9")), IF(NOT(ISERROR(MID(A1, SEARCH(".", A1) - 1, SEARCH(" ", MID(A1, SEARCH(".", A1), LEN(A1)))))), MID(A1, SEARCH(".", A1) - 1, SEARCH(" ", MID(A1, SEARCH(".", A1), LEN(A1)))), MID(A1, SEARCH(".", A1) - 1, LEN(A1))),  IF(NOT(ISERROR(MID(A1, SEARCH(".", A1) - 2, SEARCH(" ", MID(A1, SEARCH(".", A1), LEN(A1)))))), MID(A1, SEARCH(".", A1) - 2, 1 + SEARCH(" ", MID(A1, SEARCH(".", A1), LEN(A1)))), MID(A1, SEARCH(".", A1) - 2, LEN(A1))))) 
```

这个（复杂的）公式的好处是它适用于大于 9 的版本。例如，如果整个文本是“Ubuntu Linux 13.5.3”，它将打印出“13.5.3”。希望这可以帮助！

编辑：我应该补充一点，我的公式假定版本 100 或更高版本没有操作系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T02:29:12.843

我认为最简单的方法是使用所谓的数组公式，它能够一次性对整个数组进行计算。输入数组公式时，最后必须按++ `Ctrl`，而不是.`Shift``Enter``Enter`

下面的屏幕截图显示了不同的列和要使用的公式。首先在单元格中输入公式`E1`（并使用`Ctrl`+ `Shift`+`Enter`确认）。`E`然后通过选择`E1`并向下拖动右下角一直向下复制到列中的其他单元格。

列`A`包含您的操作系统的 180 个名称。列`B`包含它们的版本号。列`D`包含要查找的 >10,000 个字符串。列`E`包含 >10,000 个相应的查找版本号。

列中使用的公式`E`是

```
=IF(MAX(COUNTIF(D1,$A$1:$A$6)),OFFSET($B$1,MAX(ROW($A$1:$A$6)*COUNTIF(D1,$A$1:$A$6))-1,0),"Not Found") 
```

此`D1`公式中的 将随行号而变化。在您的情况下，`$A$6`当然应该替换`$A$180`为查找所有 180 个操作系统名称。我不确定当您将项目数量增加到您要求的规模时性能会发生什么，所以我建议逐步执行此操作，慢慢增加项目数量......

如果这对您有用，如果您需要任何帮助，我可以更详细地解释该公式的工作原理。

注意：如果您按`Ctrl`+ `Shift`+`Enter`确认为数组公式，Excel 将在其周围显示大括号。每次更改公式时也必须使用此组合键。

![说明要使用的公式的 Excel 工作表屏幕截图](../Images/190cf607969163b9346f88e2cbc03a18.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T01:28:09.453

我有一些空闲时间，并决定尝试这个有趣的挑战。它有效，但它对任何变化都非常敏感。不过，它会为您在此处提交的所有案例输出正确的版本号。

```
=IF(ISERROR(FIND(".",B2,1)),"Cannot find version number",IF(ISERROR(FIND("(",B2,1)), MID(B2, FIND(".",B2, 1)-1, IF(ISERROR(FIND(" ", B2, FIND(".", B2, 1))), LEN(B2) + 1, FIND(" ", B2, FIND(".", B2, 1))) - FIND(".", B2, 1) + 1),MID(B2,FIND("(",B2,1)+1,FIND(")",B2,1)-FIND("(",B2,1)-1))) 
```

如果公式中有任何错误，可能是因为我必须翻译函数。让我知道，我会帮你解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T00:00:18.900

Reinier 的回答也很棒，但是我被教导了一种新的方法，这种方法效果很好，我的顽固老板很满意 :)。它需要一个包含大约 35 个值的查找表（比拥有所有 180 个唯一字符串的条目要好得多，这是我在此之前唯一的解决方案）。它使用的公式是：

```
=IFERROR(LOOKUP(2^15, SEARCH('Lookup Tables'!$A$2:$A$36, $A2), 'Lookup Tables'!$B$2:$B$36), "") 
```

它不需要作为数组公式输入。在“查找表”工作表上，A 列包含查找术语列表，B 列包含与这些术语关联的版本号。查找项可能包括通配符。例如：

> 赢*2003

将匹配其中包含 Win 和 2003 的任何字符串，只要前者在后者之前。您不需要在字符串的左侧和右侧包含通配符，公式会为您执行此操作。奇怪的是，如果字符串匹配列表中的两个条目，则底部的条目将优先，而不是顶部的条目。

当然，您首先必须浏览 180 个字符串的列表并找出要包含的查找字符串。

公式中的值 $A2 表示包含操作系统字符串的单元格。2^15 是一个任意大的数字。我无法准确解释该公式是如何工作的，但确实如此。

# jquery - jQuery.when().then() 不适用于选择更改事件

> ID：11604912
> 
> 赞同：0
> 
> 时间：2012-07-22T23:44:14.330
> 
> 标签：jquery

当我更改国家/地区选择框时，我在页面中有一些代码会加载城市列表。

我正在尝试使用流动代码在页面中设置默认值，但 .then 之后的 jquery 不起作用。有任何想法吗？

这个国家工作完美，但城市没有加载。

```
jQuery(window).load(function() {
   jQuery(document).ready(function(){
       jQuery('#jr_country').val('united-kingdom');
       jQuery.when( jQuery('#jr_country').change() ).then( jQuery('#jr_city').val('london') );
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:46:31.130

`$.when()`接受 jquery`$.Deferred`对象，同时`.change()`返回 jquery 对象实例。

如果您想在代码中使用 Promise - 将其重写为：

```
var d = jQuery.Deferred().then(...);
jQuery('#jr_country').change(d.resolve); 
```

工作示例：http: [//jsfiddle.net/zerkms/QuU3f/](http://jsfiddle.net/zerkms/QuU3f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:48:07.170

**您可以对索引进行评估**

```
 $("#select_id").change(function () {
    if ($("#select_id")[0].selectedIndex == 1){
      // Do something
    }
    }); 
```

您可以通过以下方式评估价值

```
 $("#select_id").val(); 
```

# java - ContentProvider insert() 总是在 UI 线程上运行？

> ID：11604914
> 
> 赞同：37
> 
> 时间：2012-07-22T23:44:41.613
> 
> 标签：java, android, multithreading, user-interface, android-contentresolver

我有一个应用程序需要从服务器中提取数据并将其插入 SQLite 数据库以响应用户输入。我认为这将非常简单——从服务器提取数据的代码是 AsyncTask 的一个相当简单的子类，它完全按照我的预期工作而无需挂起 UI 线程。我用一个简单的接口为它实现了回调功能，并将它包装在一个静态类中，所以我的代码如下所示：

```
MyServerCaller.getFolderContents(folderId, new OnFolderContentsResponseListener() {
    @Override
    public void onFolderContentsResponse(final List<FilesystemEntry> contents) {
        // do something with contents
    }
} 
```

一切都还好。即使服务器需要一个小时来检索数据，UI 仍然可以顺利运行，因为 getFolderContents 中的代码是在 AsyncTask 的 doInBackground 方法中运行的（它在与 UI 不同的线程中）。在 getFolderContents 方法的最后，调用 onFolderContentsResponse 并传递从服务器接收到的 FilesystemEntry 列表。我只是真的这么说，希望很清楚我的问题不在于 getFolderContents 方法或我的任何网络代码，因为它不会在那里发生。

当我尝试通过 onFolderContentsResponse 方法中的 ContentProvider 子类插入数据库时​​，就会出现问题；UI 总是在代码执行时挂起，这让我相信，尽管是从 AsyncTask 的 doInBackground 方法调用的，插入仍然以某种方式在 UI 线程上运行。以下是有问题的代码：

```
MyServerCaller.getFolderContents(folderId, new OnFolderContentsResponseListener() {
    @Override
    public void onFolderContentsResponse(final List<FilesystemEntry> contents) {
        insertContentsIntoDB(contents);
    }
} 
```

和`insertContentsIntoDB`方法：

```
void insertContentsIntoDB(final List<FilesystemEntry> contents) {
    for (FilesystemEntry entry : contents) {
        ContentValues values = new ContentValues();
        values.put(COLUMN_1, entry.attr1);
        values.put(COLUMN_2, entry.attr2);
        // etc.

        mContentResolver.insert(MyContentProvider.CONTENT_URI, values);
    }
} 
```

其中 mContentResolver 先前已设置为 getContentResolver() 方法的结果。

我尝试将 insertContentsIntoDB 放在它自己的线程中，如下所示：

```
MyServerCaller.getFolderContents(folderId, new OnFolderContentsResponseListener() {
    @Override
    public void onFolderContentsResponse(final List<FilesystemEntry> contents) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                insertContentsIntoDB(contents);
            }
        }).run();
    }
} 
```

我还尝试在其自己的线程中运行每个单独的插入（MyContentProvider 中的插入方法是同步的，因此这不会导致任何问题）：

```
void insertContentsIntoDB(final List<FilesystemEntry> contents) {
    for (FilesystemEntry entry : contents) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                ContentValues values = new ContentValues();
                values.put(COLUMN_1, entry.attr1);
                values.put(COLUMN_2, entry.attr2);
                // etc.
                mContentResolver.insert(MyContentProvider.CONTENT_URI, values);
            }
        }).run();
    }
} 
```

为了更好地衡量，我还使用另一个 AsyncTask 的 doInBackground 方法中的相关代码尝试了这两种解决方案。最后，我在我的 AndroidManifest.xml 中将 MyContentProvider 明确定义为存在于一个单独的进程中：

```
<provider android:name=".MyContentProvider" android:process=":remote"/> 
```

它运行良好，但它**似乎仍然在 UI 线程中运行**。这就是我真正开始为此而烦恼的地方，因为这对我来说根本没有任何意义。无论我做什么，UI 总是在插入过程中挂起。有没有办法让他们不这样做？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-25T08:00:26.830

而不是调用`mContentResolver.insert()`，使用[`AsyncQueryHandler`](http://developer.android.com/reference/android/content/AsyncQueryHandler.html)及其[`startInsert()`](http://developer.android.com/reference/android/content/AsyncQueryHandler.html#startInsert%28int,%20java.lang.Object,%20android.net.Uri,%20android.content.ContentValues%29)方法。`AsyncQueryHandler`旨在促进异步`ContentResolver`查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-19T17:08:56.913

我认为您最初的问题可能是您`run`在新线程上调用该方法（这会导致在当前线程上继续执行）而不是调用该`start`方法。我认为这就是 Bright Great 在他/她的回答中试图表达的意思。请参阅[运行和启动线程之间的区别](https://stackoverflow.com/questions/15841301/difference-between-running-and-starting-a-thread)。这是一个常见的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T13:06:37.110

您可以在[AsynTask](http://developer.android.com/reference/android/os/AsyncTask.html)`doInBackground(Integer int)`的重写方法中运行查询，并在该方法上更新主 UI 。`onPostExecute(Integer int)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T06:52:55.777

男人。放松自己。任何事情都会看起来更好。起初，Start a Thread 是 Func start 而不是 Func run，如果要启动新的 Thread 不仅要调用 func run。

```
new Thread(Runnable runnable).start(); 
```

然后我敢打赌，有时使用 Handler 会比 AsyncTask 更好。

# android - 如何定义自己的 InputFilter 并只允许某些类型的输入（见帖子）？

> ID：11604919
> 
> 赞同：3
> 
> 时间：2012-07-22T23:46:29.437
> 
> 标签：android, android-edittext, input-filtering

假设我有一个 EditText，我想将其限制为 0-9 和 AF（包括），用于十六进制输入。有没有办法我可以做到这一点？我尝试查看 InputFilters，但我不确定这是正确的方法。有没有人做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:02:40.400

将输入类型设置为数字，将数字设置为“0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ” 在 xml 文件中，它看起来像这样：

```
<EditText
    android:id="@+id/hexedit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    android:inputType="number"      
/> 
```

您可以尝试不同的 inputTypes 来查看它们带来的软键盘布局。

# .net - 具有并发和单声道支持的 C# 嵌入式 Db

> ID：11604924
> 
> 赞同：0
> 
> 时间：2012-07-22T23:47:27.467
> 
> 标签：.net, database, concurrency, mono

我正在编写一个需要嵌入式数据库来存储基本信息的服务（id、插入日期、上次更新以及我将返回的大量实际数据）。我将有多个线程同时读取不同的行，并且至少有 1 个线程同时对行进行更新。我更喜欢多个线程进行更新的选项，但我可以只使用一个线程进行更新。基本上这是一个缓存服务，但通常我 99% 的数据将在缓存中，我可以有一个线程来填充缺少的内容，因为它是一个服务的缓存，它限制了每分钟的请求数，因此缓存了所有数据.

我希望能够在 Windows 或 linux 上运行它，因此必须支持 dotnet 和 mono，但我看过的几乎所有嵌入式数据库都不支持并发，这对我来说是必须的。对象数据库或 sql 数据库只要能与 dotnet 很好地集成，就不会兼而有之。

我希望有人在类似情况下需要具有并发支持的嵌入式数据库。此外，如果可能的话，我更喜欢免费（成本明智）的数据库，因为这只是现阶段家庭的个人项目。

我查看了许多数据库（STSdb、SQL CE、Firebird、codeplex 上的一堆开源数据库），但它们要么不能在 mono/linux 上工作，要么似乎没有并发支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T23:59:35.437

您可以使用Mono ( [http://www.mono-project.com/SQLite ) 上不支持的](http://www.mono-project.com/SQLite)[SQLite](http://www.sqlite.org/)，它具有并发支持，引用自[常见](http://www.sqlite.org/faq.html)问题解答问题 5：

> 问：多个应用程序或同一应用程序的多个实例可以同时访问一个数据库文件吗？
> 
> A：多个进程可以同时打开同一个数据库。多个进程可以同时执行 SELECT。但是，任何时候只有一个进程可以对数据库进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:00:26.387

我们在谈论多少数据？
需要数据库吗？

如果它只是一个“表”，您是否可以只编写一个使用文件系统的小层，每行一个名为 id-createdDate-updatedDate 的文件夹，然后在其中放入一个文本文件？你仍然会得到并发读取和有限的写入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T00:44:29.977

自从第一次提出这个问题以来，一个变化是您现在可以使用 .NET 异步和等待功能，因此无法进行并发写入不太可能导致瓶颈。

# php - Mediawiki在php中解析页面上的json数据

> ID：11604925
> 
> 赞同：-1
> 
> 时间：2012-07-22T23:47:29.210
> 
> 标签：php, json, api, mediawiki

我刚开始使用 Mediawiki。我正在尝试从页面中的 wiki 文章中解析 json 数据。

```
$jsonurl = "http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvlimit=1&rvprop=content&format=json&titles=Snowy_Owl";
$json = file_get_contents($jsonurl,0,null,null);

var_dump(json_decode($json)); 
```

我明白了

> 消息：file_get_contents（http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvlimit=1&rvprop=content&format=json&titles=Snowy_Owl）[function.file-get-contents]：无法打开流：HTTP请求失败！HTTP/1.0 403 禁止

我不知道为什么我会得到这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T00:02:12.130

[由于Wikimedia User-Agent 政策](http://meta.wikimedia.org/wiki/User-Agent_policy)，您很可能会收到 403 ：

> 脚本应使用包含联系信息的信息性用户代理字符串

因此，您应该将`User-Agent`标头设置为可以识别您的应用程序并且可以在出现问题时与您联系的内容。

# node.js - 当猫鼬模型是新的时，有没有办法自动生成 ObjectId？

> ID：11604928
> 
> 赞同：30
> 
> 时间：2012-07-22T23:47:57.527
> 
> 标签：node.js, mongodb, mongoose

有没有办法在猫鼬中声明模型模式，这样当模型是新的时，_id 字段会自动生成？

例如：

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var ObjectIdSchema = Schema.ObjectId;
var ObjectId = mongoose.Types.ObjectId;

var PersonSchema = new Schema({
    _id:            ObjectIdSchema,
    firstName:      {type: String, default: 'N/A'},
    lastName:       {type: String, default: 'N/A'},
    age:            {type: Number, min: 1}
});

var Person = mongoose.model('Person', PersonSchema); 
```

起初，我觉得很棒！，我会做的

```
_id:    {type:ObjectIdSchema, default: new ObjectId()} 
```

但当然这不起作用，因为 new ObjectId() 仅在模式初始化时被调用。所以调用 new Persion() 两次会创建两个具有相同 _id 值的对象。

那么有没有办法做到这一点，以便每次我执行“new Person（）”时都会生成一个新的 ObjectId（）？

我之所以尝试这样做是因为我需要知道新人的 _id 值的值以进行进一步处理。

我也试过：

```
var person = new Person({firstName: "Joe", lastName: "Baz"});
person.save(function(err, doc, num){
    console.log(doc._id);
}); 
```

即使那样，doc 也不包含 ObjectId。但如果我查看数据库，它确实包含它。

ps 我正在使用猫鼬 2.7.1

pps我知道我可以在创建人时手动创建ObjectId：

```
var person = new Person({_id: new ObjectId(), firstName: "Joe", lastName: "Baz"}); 
```

但我宁愿不必导入 ObjectId 并且每次我想新建一个人时都必须新建它。猜想我习惯使用 mongodb 的 java 驱动程序，我可以在 Model 构造函数中为 _id 字段创建值。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-23T00:08:16.603

你打电话的那一刻 var person = new Person(); person._id 应该为您提供 id（即使尚未保存）。只需实例化它就足以给它一个 id。之后您仍然可以保存它，这将存储 id 以及 person 对象的其余部分

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-03-07T14:11:09.120

添加`auto`标志：

```
_id: {
    type: mongoose.Schema.Types.ObjectId,
    index: true,
    required: true,
    auto: true,
  } 
```

[来源](https://github.com/Automattic/mongoose/issues/1285)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-18T13:46:37.097

代替：

```
_id:    {type:ObjectIdSchema, default: new ObjectId()} 
```

你应该做：

```
_id:    {type:ObjectIdSchema, default: function () { return new ObjectId()} } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-02-02T16:34:12.073

取自官方 MongoDB 手册和文档：

## _ID

> 每个 MongoDB 文档中都需要一个字段。该`_id`字段必须具有唯一值。您可以将`_id`字段视为文档的主键。如果您创建一个没有`_id`字段的新文档，MongoDB 会自动创建该字段并分配一个唯一的 BSON ObjectId。
> [来源](https://docs.mongodb.com/manual/reference/glossary/#term-id)

* * *

## 对象 ID

> ObjectId 很小，可能是唯一的，生成速度快，并且是有序的。 *ObjectId*值由 12 个字节组成，其中前四个字节是反映 ObjectId 创建的时间戳。具体来说：
> 
> 一个 4 字节的值，表示自 Unix 纪元以来的秒数，一个 5 字节的随机值和一个 3 字节的计数器，从一个随机值开始。在 MongoDB 中，存储在集合中的每个文档都需要一个唯一的`_id` 字段作为主键。如果插入的文档省略了该 `_id`字段，MongoDB 驱动程序会自动 为该字段生成一个*ObjectId*`_id`。
> 
> 这也适用于通过带有 upsert: true 的更新操作插入的文档。
> 
> MongoDB 客户端应该添加一个`_id`具有唯一*ObjectId*的字段。为该`_id`字段使用 ObjectIds 提供了以下额外好处：在 mongo shell 中，您可以 使用该方法访问*ObjectId*`ObjectId.getTimestamp()`的创建时间。对存储 ObjectId 值的 _id 字段进行排序大致相当于按创建时间排序。
> 
> **重要**
> 虽然*ObjectId*值应随时间增加，但它们不一定是单调的。这是因为他们：
> 
> 仅包含一秒的时间分辨率，因此在同一秒内创建的*ObjectId*值没有保证的顺序，并且由可能具有不同系统时钟的客户端生成。
> [来源](https://docs.mongodb.com/manual/reference/bson-types/#objectid)

### 明确声明`_id`：

显式声明`_id`字段时，指定`auto`选项：

```
new Schema({ _id: { type: Schema.ObjectId, auto: true }}) 
```

> 仅 ObjectId - 如果 turnOn 为 true，则添加自动生成的 ObjectId 默认值。
> [来源](https://github.com/Automattic/mongoose/issues/1285#issuecomment-13419165)

* * *

## TL;博士

如果您创建一个没有 _id 字段的新文档，MongoDB 会自动创建该字段并分配一个唯一的 BSON ObjectId。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T12:28:20.060

这是做到这一点的好方法

在模型中：

```
const schema = new Schema({ userCurrencyId:{type: mongoose.Schema.Types.ObjectId,
        index: true,
        required: true,
        auto: true}); 
```

# javascript - PhoneGap - 显示可用空间？

> ID：11604929
> 
> 赞同：3
> 
> 时间：2012-07-22T23:47:59.463
> 
> 标签：javascript, android, cordova

我正在使用 PhoneGap 并试图向用户显示可用于存储的可用空间量。

我尝试了各种不同类型的代码来让它工作，但没有运气。

有没有人有一个关于如何在 PhoneGap 中显示可用存储空间的工作示例？我目前在 android 工作，但我正在寻找一个 phonegap 跨平台解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-07T07:31:06.060

主要用于自我参考，现在有一个用于此的 api：

```
cordova.exec(win, fail, "File", "getFreeDiskSpace", []); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-09T18:03:53.007

在创建这篇文章之前，我创建了自己的函数来执行此操作，尝试获取具有确定字节的文件系统，直到达到限制并递归地假定可用空间。由于回调，可能需要将超时设置为大于 0。在我的测试中，cordova.exec 方式和我的方式之间的差异非常小，并且可能会更好地降低限制值的准确性。

```
function availableBytes(callback, start, end){
    callback = callback == null ? function(){} : callback
    start = start == null ? 0 : start
    end = end == null ? 1 * 1024 * 1024 * 1024 * 1024 : end //starting with 1 TB
    limit = 1024 // precision of 1kb

    start_temp = start
    end_temp = end
    callback_temp = callback
    if (end - start < limit)
        callback(start)
    else{
        window.requestFileSystem(LocalFileSystem.PERSISTENT, parseInt(end_temp - ((end_temp - start_temp) / 2)), function(fileSystem){
            setTimeout(function(){
                availableBytes(callback_temp, parseInt(parseInt(end_temp - ((end_temp - start_temp) / 2))), end_temp)
            }, 0)
        }, function(){
            setTimeout(function(){
                availableBytes(callback_temp, start_temp, parseInt(end_temp - ((end_temp - start_temp) / 2)))
            }, 0)
        })
    }
} 
```

可以像这样使用：

```
availableBytes(function(free_bytes){
    alert(free_bytes)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-09T08:28:24.977

正如@RomainMF 所述，以下在 Cordova 3.4.1-0.1.0 中有效：

```
cordova.exec(
    function(freeSpace) {
      alert('reported free space is ' + freeSpace);
    },
    function() {
      alert('failed');
    }, 
    "File", "getFreeDiskSpace", []
  ); 
```

freeSpace 参数是以字节为单位的可用存储空间，如果不可用，则为 -1。

它适用于 4.0 AVD 和我的 Galaxy S4，并正确报告外部存储（见下文）。

不要忘记在之后运行您的`deviceready`代码`cordova plugin add org.apache.cordova.file`

插件文档：[https ://github.com/apache/cordova-plugin-file/](https://github.com/apache/cordova-plugin-file/)

文档中未提及此调用，但可以阅读[Java/Android 源代码](https://github.com/apache/cordova-plugin-file/blob/4435819f6356e14602a4173d32e08576be473eca/src/android/FileUtils.java#L252)（以及[iOS/Objective-C](https://github.com/apache/cordova-plugin-file/blob/0fe20d743fc8d836f2c4b3b338cbc7bc763e8681/src/ios/CDVFile.m#L1074)。AFAIK 您只能通过这种方式获取*外部存储*的可用空间，因为 checkInternal 参数是设置为 false（请参阅[getFreeDiskSpace](https://github.com/apache/cordova-plugin-file/blob/0e2ce7be57607b87d852ae55d6508d2651b5c8ed/src/android/DirectoryManager.java#L63)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T07:58:43.807

我认为Phonegap 不提供此功能。
因此，您需要通过 Java、原生 Android SDK 从 SD 卡中获取可用空间。

像这样的东西：

```
File sdcard = Environment.getExternalStorageDirectory();
StatFs stat = new StatFs(sdcard.getAbsolutePath());
long available = stat.getAvailableBlocks() * (long) stat.getBlockSize(); 
```

[然后使用WebIntent](http://smus.com/android-phonegap-plugins/)插件通过意图将值传递给 PhoneGap 。现在您在 PhoneGap 中获得了可用空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T00:30:58.837

我猜这不是 Phonegap 本身规范的一部分，而是您可能必须为其制作 phonegap 插件的本机代码解决方案。

我无法回答 Android 但在 IOS 上，因为该应用程序是沙盒的，我不确定您是否能够访问可用空间量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T04:04:27.027

在电话间隙中，您可能无法完成它，但您可以创建和使用插件。单击[此处](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide "插件开发指南")了解更多信息，这些信息可能会引导您找到问题的解决方案。

# ios - viewDidLoad 中的 alloc/init 导致 IB 忽略出口

> ID：11604935
> 
> 赞同：0
> 
> 时间：2012-07-22T23:48:40.820
> 
> 标签：ios, memory-management, interface-builder, uitextfield

我刚刚目睹了一个非常奇怪的问题，我的视图将忽略来自自定义视图的所有委托调用，因为我在加载时对项目调用了 alloc/init。我很好奇为什么。

```
@synthesize customTextField;

-(void)viewDidLoad {
   // by calling this alloc/init, none of the changes here actually update to the view
   // everything is ignored from here on in.
   // if I comment out the alloc/init line, everything works fine
   self.customTextField = [[UITextField alloc] init];
   self.customTextField.text = @"Some text";
   // setting font and size as well

} 
```

虽然我仍然会收到对文本字段委托方法的调用，但没有一个链接到我的特定文本字段。我无法回应只是`customTextField`。

我确实意识到调用 alloc/init 会给我一个全新的实例`customTextField`……但是为什么不将那个新实例链接到 IB 和我的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T23:55:47.670

因为`IB linking != binding`.

当你在 IB 中链接一个变量时，它只是在第一次加载时设置一次变量，就是这样。它没有其他特殊代码来跟踪它的任何更改，这是有充分理由的。

例如：

您正在设计一个`UITableViewCell`，如果您选择了一个单元格，则必须重新排列单元格内的所有内容。在这种情况下，您确定如果您只是重新创建所有子视图并将它们重新添加到视图中会更容易，因此您执行以下操作：

```
-(void) layoutSubviews {
    if (cellIsSelected)
    {
        // custom button is an IBOutlet property, which is by default a subview of self
        self.customButton = [UIButton buttonWithType:UIButtonTypeCustom];

        [[self someSubView] addSubview:customButton];
    }
    else {
         // where is customButton located now? is it a subview of self or `someSubView`?
         self.customButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

         // [self addSubview:customButton];
    }
} 
```

`let's set this once, and let the programmer figure the rest out`因此，与 IB 尝试跟踪对对象所做的所有更改并将其报告给 UI 相比，IB说起来要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T23:56:59.343

`viewDidLoad`在您的 nib 加载后调用，此时创建一​​个新的 UITextField 实例将不会与您的 nib 关联。如果您手动设置新实例，您还需要手动设置委托，并将它们添加为视图的子视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T23:59:51.883

XIB 文件无法知道您正在更改引用。考虑以下代码

```
NSObject *myObjA = [[NSObject alloc]init]; //create object
NSObject *myObjB = myObjA; //assign reference <- this is the your case after xib load 
myObjB = [[NSObject alloc]init]; //create object, myObjA still lives on. 
```

加载 XIB 文件时发生的情况基本相同；您将获得对实例化对象的引用（在上面的示例中等于 myObjB）。您可以随心所欲地使用引用，但您不能仅通过创建新对象来更改接口实例。

# php - 我可以通过反射获得私有财产的价值吗？

> ID：11604946
> 
> 赞同：30
> 
> 时间：2012-07-22T23:51:26.977
> 
> 标签：php, reflection

它似乎不起作用：

```
$ref = new ReflectionObject($obj);

if($ref->hasProperty('privateProperty')){
  print_r($ref->getProperty('privateProperty'));
} 
```

它进入 IF 循环，然后抛出错误：

> 属性 privateProperty 不存在

:|

`$ref = new ReflectionProperty($obj, 'privateProperty')`也不行……

[文档页面](http://www.php.net/manual/en/class.reflectionproperty.php)列出了一些常量，包括`IS_PRIVATE`. 如果我无法访问私有财产大声笑，我怎么能使用它？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-22T23:54:44.057

```
class A
{
    private $b = 'c';
}

$obj = new A();

$r = new ReflectionObject($obj);
$p = $r->getProperty('b');
$p->setAccessible(true); // <--- you set the property to public before you read the value

var_dump($p->getValue($obj)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-14T16:01:49.983

**请注意，如果您需要获取来自父类**的私有属性的值，则接受的答案将不起作用。

为此，您可以依赖[Reflection API 的 getParentClass 方法](https://www.php.net/manual/en/reflectionclass.getparentclass.php)。

[另外，这个微库](https://github.com/ivastly/php-reflection)已经解决了这个问题。

[此博客文章](https://github.com/ivastly/php-reflection)中的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T00:04:17.003

`getProperty`抛出异常，而不是错误。重要的是，您可以处理它，并为自己节省`if`：

```
$ref = new ReflectionObject($obj);
$propName = "myProperty";
try {
  $prop = $ref->getProperty($propName);
} catch (ReflectionException $ex) {
  echo "property $propName does not exist";
  //or echo the exception message: echo $ex->getMessage();
} 
```

要获取所有私有属性，请使用`$ref->getProperties(ReflectionProperty::IS_PRIVATE);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-30T13:48:29.140

如果您需要它**而无需**反思：

```
public function propertyReader(): Closure
{
    return function &($object, $property) {
        $value = &Closure::bind(function &() use ($property) {
            return $this->$property;
        }, $object, $object)->__invoke();
         return $value;
    };
} 
```

然后像这样使用它（在同一个类中）：

```
$object = new SomeObject();
$reader = $this->propertyReader();
$result = &$reader($object, 'some_property'); 
```

# c - 用 C 对包进行序列化

> ID：11604948
> 
> 赞同：0
> 
> 时间：2012-07-22T23:52:20.180
> 
> 标签：c, sockets, serialization, deserialization, packages

我是新来的，我会喜欢你的帮助。我试图序列化和反序列化一个包（在套接字中使用它），结果不是我期望的，但我找不到错误。这是代码。

```
typedef struct {
    int32_t size;
    char data[1024];
} t_socket_buffer;

typedef struct {
    int16_t payloadLength;
    int8_t type;
    char *path;
} ReadRequestPackage; 
```

序列化的函数

```
t_socket_buffer *Open_serializer(ReadRequestPackage *ReadPackage){
char data[1024];
t_socket_buffer *stream = malloc(sizeof(t_socket_buffer));
int8_t offset = 0, tmp_size = 0;

memcpy(data, &ReadPackage->payloadLength, tmp_size = sizeof(int16_t));

offset = tmp_size;
memcpy(data + offset,&ReadPackage->type, tmp_size = sizeof(int8_t));

offset+= tmp_size;
memcpy(data + offset, ReadPackage->path,tmp_size = strlen(ReadPackage->path)+1);

stream->size = offset + tmp_size;
memcpy(stream->data, data,strlen(data)+1);

return stream;

    } 
```

反序列化的函数

```
 ReadRequestPackage *Open_deserializer(t_socket_buffer *stream)
    {
ReadRequestPackage *ReadPackage = malloc(sizeof(ReadRequestPackage));
int32_t offset = 0, tmp_size = 0;

memcpy(&ReadPackage->payloadLength,stream->data,tmp_size = sizeof(int16_t));

offset = tmp_size;
memcpy(&ReadPackage->type, stream->data + offset, tmp_size = sizeof(int8_t));

offset += tmp_size;
for(tmp_size = 1; (stream->data + offset)[tmp_size-1]!='\0';tmp_size++);
ReadPackage->path = malloc(tmp_size);
memcpy(ReadPackage->path, stream->data + offset, tmp_size);

return ReadPackage;

     } 
```

当我用这个 main() 测试它时

```
int main (void){
ReadRequestPackage *pqt1 = malloc(sizeof(ReadRequestPackage));
ReadRequestPackage *pqt2;

t_socket_buffer *stream;
pqt1->path=malloc(sizeof("directory"));
strcpy(pqt1->path,"directory");
pqt1->payloadLength = strlen("directory")+1+sizeof(int8_t);
pqt1->type  = 1;

stream = Open_serializer(pqt1);
pqt2 = Open_deserializer(stream);
printf("path 1: ");
puts(pqt1->path);
printf("path 2: ");
 puts(pqt2->path);
printf("\ntype1:%d ",pck1->type);
printf("\ntype2:%d ",pck2->type);
printf("\nize:%d ",pck1->payloadLength);
printf("\nsize:%d ",pck2->payloadLength);

return 1;
} 
```

结果是不一样的，他们应该！

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:56:37.450

```
memcpy(stream->data, data,strlen(data)+1); 
```

这条线没有做你认为它正在做的事情。`data`不是字符串。

顺便说一句，您是否考虑过使用适当的序列化库？

# android - 如何正确水平设置textview的layout_width和layout_weight？

> ID：11604950
> 
> 赞同：0
> 
> 时间：2012-07-22T23:52:21.010
> 
> 标签：android

我想要一个列表视图，并且我的应用程序中有 header.xml 和 row.xml 文件。它们都是线性布局，有 6 个子文本视图。第一个文本视图是 ID，我想最小化它（仍然可见），因为它对用户并不重要。

代码（header.xml）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:text="ID"
        android:textSize="12dp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Date"
        android:textSize="12dp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="time"
        android:textSize="12dp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Food"
        android:textSize="12dp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Rating2"
        android:textSize="12dp" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Rating"
        android:textSize="12dp" />

</LinearLayout> 
```

问题是现在 ID textview 完全消失了。我认为layout_weight越高，视图越小（在width = fill_parent的情况下）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:59:46.433

```
<TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:text="ID"
        android:textSize="12dp"
        android:visibility="invisible"/> 
```

所以添加`android:visibility="invisible"`

# git - 如何同时 SVN 提交多个 git-svn 存储库？

> ID：11604958
> 
> 赞同：2
> 
> 时间：2012-07-22T23:53:52.633
> 
> 标签：git, git-svn

我在一家公司工作，该公司跟踪一个 SVN 存储库下的多个项目。因此，当我 git-svn 克隆所述存储库时，我将其放入多个 git-svn 存储库中。但是，有时 SVN 提交跨越多个项目的单个逻辑更改会更好。有没有办法做到这一点？

例如，给定 git-svn 存储库：

*   项目-a => svn://svn.server/project-a
*   项目-b => svn://svn.server/project-b

我希望能够`git svn dcommit-simultaneously project-a project-b`做某事并让它只向 SVN 提交一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:36:47.000

为每个项目运行“svn info $project_url”。如果报告的“Repository Root”对于每个都相同，那么您可以“git svn clone $repo_root”并使用它在项目之间进行原子提交。否则，不可能跨存储库进行原子提交，即使是本机的颠覆。

# objective-c - 如何捕捉 UITextField 文本的变化？

> ID：11604960
> 
> 赞同：3
> 
> 时间：2012-07-22T23:53:58.323
> 
> 标签：objective-c, ios

我看过所有类似的问题，它们与我所问的不同。我需要捕捉 UITextField 中实际文本的变化，而不仅仅是编辑状态。当视图加载时，它将是第一响应者，我需要知道何时输入文本，以便我可以在导航栏中启用“下一步”。如果可以的话，请帮助我，这真的阻碍了我的项目。

补充：我目前正在使用 - 它不起作用：

```
[textField addTarget:self action:@selector(textFieldDidChange)    forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:58:08.047

实现`UITextFieldDelegate`协议，并响应`textField:shouldChangeCharactersInRange:replacementString:`方法。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)replacementStr {
    // Enable "Next" if you like what's entered in the replacementStr
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T23:57:57.823

检查开发者文档`UITextFieldDelegate`，特别是[这个方法](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

# google-maps - 街景谷歌地图网址和坐标查询

> ID：11604963
> 
> 赞同：4
> 
> 时间：2012-07-22T23:54:10.590
> 
> 标签：google-maps, google-api, google-street-view

我目前正在将一些简单的谷歌地图街景链接转换为静态街景图像的 URL 请求。除了我正在努力解释的一些奇怪的情况外，大多数转换都有效。

首先，以正常方式，我以普通用户的身份访问谷歌地图，并在伦敦的一条道路上找到我想看到的位置，称为伦敦墙，然后向上和向东指向。这是生成的链接：（请对其进行测试，您将在 Google 消费者使用的 Flash 街景视图中看到一座名为 Winchester House 的著名建筑，其外部光滑弯曲）：

[http://maps.google.com/maps?q=Winchester+House,+London+Wall,+London,+United+Kingdom&hl=en&ll=51.516287,-0.083299&spn=0.007838,0.018196&sll=51.522309,-0.080509&sspn= 0.06227,0.145569&oq=winchester+house,+london+wall&hq=Winchester+House,&hnear=Wall,+1+Denbigh+Rd,+London+W11+2SJ,+United+Kingdom&t=m&z=16&layer=c&cbll=51.516305,- 0.083422&panoid=U6g4EoZt5cM4e2WFiDLoxA&cbp=12,268.2,,0,-16.66](http://maps.google.com/maps?q=Winchester+House,+London+Wall,+London,+United+Kingdom&hl=en&ll=51.516287,-0.083299&spn=0.007838,0.018196&sll=51.522309,-0.080509&sspn=0.06227,0.145569&oq=winchester+house,+london+wall&hq=Winchester+House,&hnear=Wall,+1+Denbigh+Rd,+London+W11+2SJ,+United+Kingdom&t=m&z=16&layer=c&cbll=51.516305,-0.083422&panoid=U6g4EoZt5cM4e2WFiDLoxA&cbp=12,268.2,,0,-16.66)

其次，如果我采用上述链接中的相同坐标通过以下 URL 请求获取静态街景照片，我会得到不同的结果：

[http://maps.googleapis.com/maps/api/streetview?size=800x600&location=51.516305,%20-0.083422&fov=110&heading=268.2&pitch=16.66&sensor=false](http://maps.googleapis.com/maps/api/streetview?size=800x600&location=51.516305,%20-0.083422&fov=110&heading=268.2&pitch=16.66&sensor=false)

第二个视图仍沿伦敦墙向西看，但静态街景照片在错误的全球坐标上设置了大约 50 多米（请尝试上面的链接，您会看到温彻斯特大厦前面有一座人行天桥，位于距离）。

当上面的两个 URL 似乎使用相同的全局坐标时，这是令人困惑的。（我为许多其他不同的链接引用了相同的坐标，并且两个 URL 通常显示相同的视图）。

我将不胜感激任何人对此的帮助，并了解是否有人遇到过类似的问题或与不同的 Google 坐标不一致。

非常感谢

麦克风

# jquery - 带有外键的 AJAX 发布到 Rails 控制器

> ID：11604965
> 
> 赞同：0
> 
> 时间：2012-07-22T23:54:36.000
> 
> 标签：jquery, ruby-on-rails, ajax

我有 2 个模型：

```
类文件
    has_many :引文
结尾

类引文
    属于_to：文档
结尾

```

如何让`document_id`客户端添加到我发送到控制器的对象文字中？

我发送到`create`方法的哈希示例`CitationsController`：

```
$.ajax({
    网址：网址，
    类型：'发布'，
    数据： {
        引用：{
            document_id: //需要这个
            报价：'报价'
        }
    }
});

```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:19:31.307

您可以使用 HTML data-* 属性来保存这些值，因为它们是 HTML 标准的一部分。例如，如果您通过单击链接触发 AJAX Post 请求，则该链接可以定义如下：

```
= link_to "trigger", "#", "data-document_id" => document.id 
```

然后在 JavaScript 中，您从触发元素中提取属性值。

上面的代码片段是一个非常具体的示例，可能不适用于您的用例，但希望您能理解。

# php - 如何从数组中删除键并更新索引？

> ID：11604982
> 
> 赞同：7
> 
> 时间：2012-07-22T23:57:06.047
> 
> 标签：php, arrays

```
$array = array('a', 'b','c');
unset($array[0]);
var_dump($array);

Yields:
array(1) {
  [1]=>
  'b'
  'c'
} 
```

我如何删除 array[0] 以获取 ['bb','cc'] （没有空键）：

```
array(1) {
  'b'
  'c'
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T00:02:25.230

检查这个：

```
$array = array('a', 'b','c');
unset($array[0]);
$array = array_values($array); //reindexing 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-23T00:00:24.500

看一眼[`array_splice()`](http://us.php.net/manual/en/function.array-splice.php)

```
$array = array_splice($array, 0, 1); 
```

如果您碰巧专门删除了第一个元素（而不是数组中间的任意元素），`array_shift()`则更合适。

# python - INT 函数不起作用，我正在尝试从数字列表中删除引号

> ID：11604983
> 
> 赞同：-1
> 
> 时间：2012-07-22T23:57:08.220
> 
> 标签：python, map, int

我正在尝试生成一个周围没有“”的数字列表。我尝试过使用 INT(x) 函数和 MAP 函数。两者都没有工作。这是生成列表的代码：

```
for f in range (0, workingframes):

    if f<=(workingframes/2):

        for x in range (0, archnodes):
            frames[f].append(archstartred[x])
            frames[f].append(archstartgrn[x])
            frames[f].append(archstartblu[x])

        for y in range (0, nodesperframe):
            archstartred.pop()
            archstartgrn.pop()
            archstartblu.pop()
            archstartred.insert(0, backred)
            archstartgrn.insert(0, backgrn)
            archstartblu.insert(0, backblu)

    else:
        frames[f]=frames[workingframes-f]

    [int(value) for value in frames[f]] 
```

这是生成正确的数字，我只需要删除引号，以便我可以在另一个程序中使用列表。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T23:59:25.920

您的列表理解看起来正确（假设`frames[f]`是一个包含整数值的字符串列表），但是您需要将结果列表分配给某个变量，以便您可以使用结果。

例如，

```
int_val_list = [int(value) for value in frames[f]] 
```

# c++ - c++ A* 在网格游戏中

> ID：11604984
> 
> 赞同：0
> 
> 时间：2012-07-22T23:57:19.993
> 
> 标签：c++, algorithm, game-engine, game-physics

我有游戏网格（像矩阵一样以整数对枚举单元格）。每个单元格都有不同的穿越成本（从 0 到 1000000 ）。谁能建议我用 A* 实现（不同于 micropather）来寻找路径？我的机器人可以小步前进，而不仅仅是跳到下一个单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:06:22.667

您可能想要使用的是[Dijkstra's Algorithm](https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。A* 实际上可以被认为只是 Dijkstra 的推广。

# vb.net - 无法访问列表框项目的属性值

> ID：11604985
> 
> 赞同：0
> 
> 时间：2012-07-22T23:57:25.563
> 
> 标签：vb.net, listbox

我有一个激活了多项选择的列表框，我正在尝试读取不同的选定值

我尝试了很多片段，这是最新的两个：

```
 For i = 0 To ListBox1.SelectedIndices.Count
     MsgBox(ListBox1.Items((ListBox1.SelectedIndices(i))).value)
 Next

 For i = 0 To ListBox1.SelectedItems.Count
     MsgBox(ListBox1.SelectedItems(i).value)
 Next 
```

由于某种原因，我选择的任何方法我都无法读取任何项目的价值

我的列表框是数据绑定的，所以我在一个论坛上发现，将其公开可能会解决问题，但它没有

我很犹豫，因为即使 Intellisense 也没有显示太多信息，我得到的只是：

```
Equals
GetHashCode
GeType
ReferenceEquals
ToString 
```

有什么想法我哪里出错了吗？

提前致谢

**编辑：**

![在此处输入图像描述](../Images/b6beafeab25ddf7d6e4bfb4070906c2c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T02:03:36.390

我不喜欢在 VB 中使用 Data GUI 工具。也就是说，我认为您正在寻找的是：

```
For Each dvRow As DataRowView In Me.Listbox1.SelectedItems
  MessageBox.Show(dvRow("Id").ToString)
Next 
```

如果您对姓氏字段感兴趣，请将“Id”更改为“姓氏”。

另外，我使用`MessageBox.Show`而不是`MsgBox`. `MsgBox`是VB6的遗留物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T02:03:26.597

当您使用 databound`ListBox`时，这些项目不是`ListBoxItem`对象（您希望拥有这些对象`Text`和`Value`属性）。相反，它们是来自数据源的类型。`Items`集合（及其变体，例如）被定义为对象的`SelectedItems`集合，运行时类型是从数据源中获取的。你有没有尝试过这样的事情？

```
For i = 0 To ListBox1.SelectedItems.Count
    MsgBox(ListBox1.SelectedItems(i).ToString())
Next 
```

在评论中，您指出数据源是包含对象的 DB`String`对象。如果你有一个类的集合，比如`Person`，你可以这样得到：

```
For i = 0 To ListBox1.SelectedItems.Count
    MsgBox(DirectCast(ListBox1.SelectedItems(i), Person).FirstName)
Next 
```

`For Each`只要在循环时未更改所选项目集合，您还应该使用 a 获得相同的结果。

```
For Each p As Person in ListBox1.SelectedItems
    MsgBox(p.FirstName)
Next 
```

**注意：这是未经测试的代码，因为我现在不在 Visual Studio 前面。**

**编辑：** 我从屏幕截图中看到`Value Member`设置为名为`Id`. 如果那是`uniqueidentifier`数据库中的一列，那么 ListBox 中的运行时类型应该是`Guid`.

# linux - 想了解linux命令发生了什么

> ID：11604991
> 
> 赞同：0
> 
> 时间：2012-07-22T23:58:17.623
> 
> 标签：linux, terminal, virtualenv

我正在安装一个 virtualenv 并想了解发生了什么。

$ curl -O [https://raw.github.com/pypa/virtualenv/master/virtualenv.py](https://raw.github.com/pypa/virtualenv/master/virtualenv.py) - 我理解 curl 很好

$ python virtualenv.py my_new_env - 也明白这一点

$ . my_new_env/bin/activate - 这就是我迷路的地方。期间在这里做什么？

(my_new_env)$ pip install ... - 这里有括号是什么意思？这个用途是否告诉我我在一个文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T00:03:12.770

点是一个命令，意思是在当前shell中读取并执行给定脚本的内容（通常运行一个shell脚本在一个新进程中运行它。）在当前shell中评估脚本可以改变当前shell的环境变量shell，因此后续命令的行为会受到影响。

我不确定括号，但我不认为它们是你输入的语法。当它们出现在“$”提示符之前，也许这就是您在运行`activate`脚本后将获得的新提示符，以表明您的环境已更改？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:04:34.593

点本质上是一个“执行”命令——执行命令，`my_new_env/bin/activate`就好像它们是在你的提示符中键入的一样，本质上。

提示中显示的括号（至少在教程说明中）表明您是在新的虚拟环境中键入命令，而不是在原始（真实）环境中。

# javascript - 在运行时更改对象属性名称

> ID：11604993
> 
> 赞同：2
> 
> 时间：2012-07-22T23:59:19.773
> 
> 标签：javascript

假设我有一个这样的对象数组：

```
 var nodes = [{"size":8,"name":"myName"},{"size":10,"name":"otherName"},{"size":11,"name":"userName"}]; 
```

如何创建一个数组，该数组`arr`包含从中映射的对象，`nodes`但属性具有不同的名称。假设我希望将`arr.r`其映射到每个`size`属性，所以：

```
thisSize = arr[0].r 
```

应该`8`考虑到`thisSize`。希望我清楚地解释了我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T00:03:30.020

您可以使用属性，或者`map`如果您不担心支持 Internet Explorer 8 及更早版本，但我假设您是。只需迭代并使用新对象构造一个新数组：

```
var arr = [];

for(var i = 0; i < nodes.length; i++) {
    var node = nodes[i];

    arr.push({
        r: node.size
    });
} 
```

`push`根据需要在对象 ed 中映射您的属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T00:07:18.580

```
 <script>
    function item(name,size){
      this.name = name;
      this.size = size;
    }

    var arr = [];
    arr[0] = new item("item 1",9);
    arr[1] = new item("item 2",14);

    alert("name: " + arr[0].name + " size:" + arr[0].size);
    alert("name: " + arr[1].name + " size:" + arr[1].size);
    </script> 
```

# vb.net - 多列组合框和日期数据类型

> ID：11604994
> 
> 赞同：0
> 
> 时间：2012-07-22T23:59:21.167
> 
> 标签：vb.net, visual-studio-2010, visual-studio, date, combobox

我正在尝试制作一个程序来计算某人醒了多长时间。用户只需要输入他醒来的时间。但是我遇到了两个问题：

1.  我需要制作一个组合框供用户在 PM 和 AM 之间进行选择，但我不知道如何制作具有多列的组合框。

2.  如何使用日期类型变量进行计算？因为我需要获取当前时间并减去用户醒来的时间。

这是现在的代码：

```
Public Class Form1
    Dim wokeup As Date
    Dim now As Date
    Dim awake As Date

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        now = DateAndTime.TimeOfDay
        ComboBox1.Text = "AM"

    End Sub
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        wokeup = TextBox1.Text
        Label2.Text = wokeup

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:07:57.630

1）我不确定您所说的“多列”是什么意思，但我猜您只需要用户在 AM 和 PM 之间进行选择。

```
Combobox1.Items.Add("AM")
Combobox1.Items.Add("PM")
Combobox1DropDownStyle = ComboBoxStyle.DropDownList 
```

2）要减去时间间隔，您可以使用以下方法：

```
Dim timeAwake as TimeSpan = Date.Now.Subtract(CDate(Textbox1.Text)) 
```

`Textbox1.Text`如果文本框仅包含时间，您可能需要在前面添加当前日期。从中`timeAwake`，您可以使用`timeAwake.TotalHours`.