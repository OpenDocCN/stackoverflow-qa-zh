# StackOverflow 问答 11611000-11611999

# http-headers - 无法使到期标头工作

> ID：11611001
> 
> 赞同：0
> 
> 时间：2012-07-23T10:45:54.827
> 
> 标签：http-headers, yslow

我正在使用可怕的 yslow，并且有 39 个静态组件，没有遥远的未来到期日期。消息踢我。

我遵循了一些教程/回复，并在我的 httpdocs/.htaccess 中提出了这个

```
#Expire Header
ExpiresActive On
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf)$">
    ExpiresDefault "access plus 6 months"
    Header append Cache-Control public
</FilesMatch> 
```

但是，所有文件都存储在其中的目录很疯狂，例如，我有这些。

```
httpdocs/mpu/
httpdocs/css/
httpdocs/images/
httpdocs/js/
httpdocs/favicon.ico
httpdocs/mph/
httpdocs/min/
httpdocs/js/sliders/
httpdocs/js/gallery/ 
```

等等，我不完全确定 FilesMatch 表达式是否会捕获所有子目录文件？

如果他们这样做了，那么任何人都可以看到我上面的片段仍然说它没有遥远的到期日期的原因。

编辑：这是来自 chrome 的标头响应

```
Request Headers

Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Pragma:no-cache
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11

Response Headers

Accept-Ranges:bytes
Cache-Control:max-age=15552000, public
Connection:close
Content-Length:3597
Content-Type:image/png
Date:Mon, 23 Jul 2012 10:49:43 GMT
Expires:Sat, 19 Jan 2013 10:49:43 GMT
Last-Modified:Thu, 21 Jun 2012 16:46:19 GMT
Server:Apache
X-Powered-By:PleskLin 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T19:22:59.570

如果您认为您的 FilesMatch 选择器不起作用，您还可以使用 ExpiresByType 指令进行测试：

```
ExpiresActive on
ExpiresByType image/gif "access plus 1 week"
ExpiresByType image/jpeg "access plus 1 week"
ExpiresByType image/png "access plus 1 week"
ExpiresByType image/x-icon "access plus 1 year" 
```

查看您包含的标头，该文件至少显示它**正在**正确设置缓存控制：

```
Cache-Control:max-age=15552000, public
Date:Mon, 23 Jul 2012 10:49:43 GMT
Expires:Sat, 19 Jan 2013 10:49:43 GMT 
```

max-age 参数 15552000 等于 6 个月，Expires 标头是今天 + 6 个月。

这是 YSlow 认为没有过期标头的文件之一的结果吗？您是否有显示问题的可公开访问的链接？

# python - 没有响应（输出）时执行某些操作的 python 或 bash 脚本

> ID：11611002
> 
> 赞同：0
> 
> 时间：2012-07-23T10:45:58.660
> 
> 标签：python, bash

有一个外部程序 A。如果被调用的外部程序 A 没有显示任何输出（粗壮），我想编写一个执行某些操作的脚本。

这在 bash 或 python 中怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:58:49.137

您可以使用 subprocess 模块，该模块允许您执行系统调用并将其输出存储在以后可以使用的变量中。

```
#!/usr/bin/python
import subprocess as sub

ur_call = '<your system call here>'

p = sub.Popen(ur_call, stdout=sub.PIPE,stderr=sub.PIPE)
output, errors = p.communicate()
if len(output) == 0 and len(errors) == 0:       
    pass  # Do something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:50:49.303

在 Bash 脚本中，您可以将输出重定向到文件，如果文件的长度为零，则没有输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:55:27.050

如果有时给出输出的脚本是 no.sh，那么您可以在 Python 中执行此操作：

```
import os                                                                                                                                              
x = os.popen("./no.sh")
y = x.read()
if y:
    print "Got output" 
```

# php - 上传前检查图片尺寸

> ID：11611004
> 
> 赞同：0
> 
> 时间：2012-07-23T10:46:07.463
> 
> 标签：php

嗨，我基于我在网络上找到的那个函数，并尝试为我的 PHP 页面修改它以上传他们的图标，但我想限制用户上传一张只有 100x100 像素大小的图像。好吧，我只是用这个来称呼它：

```
uploadImage($id,$_FILES['upload']['name'],$_FILES['upload']['tmp_name']); 
```

这是我做的功能：

```
 function uploadImage($new_name,$imagename,$tmp_name){

 if($tmp_name!=null||$tmp_name!=""){
     list($width, $height, $type, $attr) = getimagesize($tmp_name);
         if($width==100&&$height==100){
          $image1 = $imagename;

          $extension = substr($image1, strrpos($image1, '.') + 1);
          $image = "$new_name.$extension";
          $folder = "Images/"; 
                  if($image) { 
                    $filename = $folder.$image; 

                    $copied =  copy($tmp_name, $filename); 
                  }
                  else echo "image not uploaded.";
          }
          else
            echo "upload only 100x100px image!"; 
    }

} 
```

现在的问题是，即使我上传了超过 100 x 100px 尺寸的图像，它仍然会继续进行而不会返回任何错误，现在我迷失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:55:04.720

您可能需要稍微重构您的代码；具有检查上传的图像是否有效的功能，然后实际进行上传。或者，您可以创建一个类。

```
<?php

class ImageUpload
{    
    public $tmpImage;
    public $maxWidth = 100;
    public $maxHeight = 100;
    public $errors = [];

    public function __construct($image)
    {
        $this->tmpImage = $image;
    }

    public function upload()
    {
        // Check image is valid; if not throw exception

        // Check image is within desired dimensions
        list($width, $height) = getimagesize($this->tmpImage);

        if ($width > $this->maxWidth || $height > $this->maxHeight) {
            throw new Exception(sprintf('Your image exceeded the maximum dimensions (%d&times;%d)', $this->maxWidth, $this->maxHeight));
        }

        // Create filename
        // Do the upload logic, i.e. move_uploaded_file()
    }
} 
```

然后，您可以按如下方式使用此类：

```
<?php

$imageUpload = new ImageUpload($_FILES['upload']['tmp_name']);

try {
    $imageUpload->upload();
} catch (Exception $e) {
    echo 'An error occurred: ' . $e->getMessage();
} 
```

这是即兴写的，所以它们可能是错误的。但希望它展示了一种更好的方式来处理文件上传，以及上传过程中可能出现的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:05:16.157

好吧，您也可以在上传后调整图像大小。

```
function createFixSizeImage( $pathToImages, $pathToFixSizeImages, $Width ) 
{

  // open the directory
  $dir = opendir( $pathToImages );

  // loop through it, looking for any/all JPG files:
  while (false !== ($fname = readdir( $dir ))) {

  $image_info   = getimagesize( "path/to/images/".$fname );
  $image_width  = $image_info[0];
  $image_height = $image_info[1];
  $image_type   = $image_info[2];

  switch ( $image_type )
  {

    case IMAGETYPE_JPEG:

    // parse path for the extension
    $info = pathinfo($pathToImages . $fname);
    // continue only if this is a JPEG image
    if ( strtolower($info['extension']) == 'jpeg' ) 
    {

      // load image and get image size
      $img = imagecreatefromjpeg( "{$pathToImages}{$fname}" );

      $width = imagesx( $img );
      $height = imagesy( $img );

      // give the size,u want
      $new_width = 100;
      $new_height = 100;

      // create a new temporary image
      $tmp_img = imagecreatetruecolor( $new_width, $new_height );

      // copy and resize old image into new image 
      imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height );

      // save Fix Size Images into a file

      imagejpeg( $tmp_img, "{$pathToFixSizeImages}{$fname}" );

    }
      break;

     case IMAGETYPE_PNG:
         // parse path for the extension
    $info = pathinfo($pathToImages . $fname);
    // continue only if this is a JPEG image
    if ( strtolower($info['extension']) == 'png' ) 
    {

      // load image and get image size
      $img = imagecreatefrompng( "{$pathToImages}{$fname}" );

      $width = imagesx( $img );
      $height = imagesy( $img );

      $new_width = 100;
      $new_height = 100;

      // create a new temporary image
      $tmp_img = imagecreatetruecolor( $new_width, $new_height );

      // copy and resize old image into new image 
      imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height );

      // save Fix Size Images into a file

      imagejpeg( $tmp_img, "{$pathToFixSizeImages}{$fname}" );

    }
      break;

    case IMAGETYPE_BMP:
      echo "bmp";
      break;

    default:
      break;
  }
}
  }
  // close the directory
  closedir( $dir );
}

createFixSizeImage("path","path/to/images/to/be/saved",100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:12:48.530

扩展或多或少未知的代码然后对其进行调试，就像您在几周前编写了一些代码并且您不再理解它一样。

在您的情况下，您通过添加检查图像大小的功能来扩展一些现有代码（您没有发布原始代码，但您写道您是这样做的）。

因此，您不需要编辑很多（未知但）工作代码，创建新功能作为它自己的功能：

```
/**
 * @param string $file
 * @param int $with
 * @param int $height
 * @return bool|null true/false if image has that exact size, null on error.
 */
function image_has_size($file, $width, $height)
{
    $result = getimagesize($file);
    if ($count($result) < 2) {
        return null;
    }

    list($file_width, $file_height) = $result;

    return ($file_width == (int) $width) 
           && ($file_height == (int) $height);
} 
```

您现在在一个函数中拥有了新功能，您可以更轻松地集成到原始（希望其他工作）代码中。

用法：

```
$imageHasCorrectSize = image_has_size($tmp_name, 100, 100); 
```

So whenever you change code, do it like a surgeon, keeping the cuts as small as possible.

# c# - 如何在 C# 中初始化默认值？

> ID：11611007
> 
> 赞同：1
> 
> 时间：2012-07-23T10:46:15.243
> 
> 标签：c#

我想要一个布尔值的默认值`crossover`如何`false`
初始化它？

```
public class DecisionBar
{
public DateTime bartime 
     { get; set; }
public string frequency
         { get; set; }
public bool HH7
        {get;set;}
public bool crossover
        {get;set;}
public double mfe
        {get;set;}
    public double mae
        {get;set;}
public double entryPointLong
        {get;set;}
public double entryPointShort
        {get;set;}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:49:16.040

除了默认值为 false 之外，还有两个选项。显然它们是多余的，但如果您希望默认值为 true，您可以使用任何一种方法。

要么不使用自动实现的属性，而是使用支持属性；

```
private bool _crossover = false;

public bool crossover 
{
 get { return _crossover; }
 set { _crossover = value; }
} 
```

或在构造函数中；

```
public DecisionBar() 
{
 crossover = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:47:54.263

any 的默认值`bool`是`false`，所以在这种情况下你真的不需要做任何事情。

但是，如果您想`true`成为默认值，则可以有一个显式的支持私有字段`crossover`并将其初始化为`true`：

```
private bool _co = true;
public bool crossover
{
   get { return _co; }
   set { _co = value; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:49:33.280

布尔值的默认值为`false`。我不确定你在这里的意思。

如果你想明确地设置它。把这个放在课堂上。

```
private bool _crossover = false;

public bool crossover 
{
    get
    {
        return _crossover;
    }
    set
    {
        _crossover = value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T10:49:53.663

```
private bool _crossover = false;//or true
public bool Crossover {get {return _crossover;}set{_crossover =value;}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T11:00:25.790

**来自[MSDN](http://msdn.microsoft.com/en-us/library/c8f5xwh7%28v=vs.100%29.aspx)：**

[`bool`](http://msdn.microsoft.com/en-us/library/c8f5xwh7.aspx)的[默认](http://msdn.microsoft.com/en-us/library/83fhsxwc.aspx)值为`false`; `bool?`变量的默认值为`null`。使用 new 运算符调用默认构造函数，如下所示：

```
var decisionBar = new DecisionBar();
var myBool = decisionBar.crossover; // 'myBool' should be 'false' 
```

前面的语句与下面的语句具有相同的效果：

```
var decisionBar = new DecisionBar();
decisionBar.crossover = false; 
```

请参阅这篇文章： [如何为 C# 自动属性赋予默认值？](https://stackoverflow.com/questions/40730/how-do-you-give-a-c-sharp-auto-property-a-default-value)

# jquery - jQuery ajax 提交 2 个数据源（表单和数据表）

> ID：11611009
> 
> 赞同：0
> 
> 时间：2012-07-23T10:46:23.963
> 
> 标签：jquery, datatables

我有一个使用 jQuery ajax 提交的表单，它工作正常，但我还需要提交第二个数据源。

这就是我到目前为止所拥有的：

```
<script type="text/javascript"> 
    var $j = jQuery.noConflict();
    $j(window).load(function(){     
        // this is the ID of your FORM tag
        $j("#send-form").submit(function(e) {
            e.preventDefault(); // this disables the submit button so the user stays on the page
            // this collects all of the data submitted by the form
            var str = $j(this).serialize();                  
               $j.ajax({               
               type: "POST", // the kind of data we are sending
               url: "<?php print $cs_base_dir; ?>sendmail.php", // this is the file that processes the form data
               data: str, sData, // this is our serialized data from the form
               success: function(msg){  // anything in this function runs when the data has been successfully processed

                    // this sets up our notification area for error / success messages
                    $j("#note").ajaxComplete(function(event, request, settings)
                    { 
                        if(msg == "OK") // Message Sent? Show the Thank You message and hide the form
                        {
                            // This is shown when everything goes okay
                            result = "<div id=\"message\" class=\"updated\">Your message has been sent.</div>";

                        }
                        else // if there were ewrrors
                        {
                            result = msg; // msg is defined in sendmail.php
                        }                                
                        $j(this).html(result); // display the messages in the #note DIV                          
                    });                  
                }                    
             });                     
        });         
    });
</script> 
```

但是我还需要提交一些其他数据（数据表），这些数据是通过以下方式获得的：

```
var sData = $j('input', oTable.fnGetNodes()).serialize(); 
```

这是指定如何发送它的页面：[DataTables with form elements example](http://datatables.net/examples/api/form.html)

如何添加它以便提交表单和数据表？

谢谢 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:53:50.933

尝试

```
data: str + "&" + sData 
```

str 和 sData 都作为字符串发送，取自 DataTables 页面上的示例，如下所示：“check8=8&check9=9”。因此，您只需在它们之间添加“&”即可发送两者。

# algorithm - 在生成身份图标时防止生成类似卐字符的图像

> ID：11611011
> 
> 赞同：19
> 
> 时间：2012-07-23T10:46:35.413
> 
> 标签：algorithm, language-agnostic, identicon

我正在使用这个[PHP 脚本](http://sourceforge.net/projects/identicons/)来生成身份图标。它使用 Don Park 的原始标识符算法。

该脚本运行良好，我已将其改编为我自己的应用程序以生成身份图标。问题是有时会生成万字符。虽然万字符有和平的起源，但人们看到这些符号时确实会生气。

我想做的是改变算法，以便永远不会生成万字符。我做了一些挖掘，[在微软的网站上找到了这个帖子](http://social.microsoft.com/Forums/en-HK/suggest/thread/13ca5fea-80b4-4533-be79-2a07375bfb1f)，一位员工说他们已经添加了一个调整来防止产生万字符，但仅此而已。

有没有人确定要进行什么调整以及如何防止产生万字符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T11:03:43.977

在[Jeff Atwood 的介绍线程](http://www.codinghorror.com/blog/2007/01/identicons-for-net.html)中，Don Park 建议：

> Re Swastika 评论说，这可以通过应用专门的类似 OCR 的视觉分析来识别所有违规代码，然后使用遗传算法将它们压缩成有效的布隆过滤器来解决。当过滤器返回 true 时，可以使用第二种类型的标识（即 4 块被子）。

或者，您可以通过将 identicons 替换为 unicorns 来完全避免该[问题](http://unicornify.appspot.com/whats-this)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T11:21:59.513

在我看来（快速浏览）同名总是具有四重旋转对称性。万字符当然可以。以不同的方式重复四分之一块怎么样？如果你取一个会在当前模式中产生一个卐字符的四分之一块，并反射两个对角相对的四分之一，那么你就会得到一种太空入侵者。

基本上，任何具有反射对称性的东西都不会看起来很像万字符。我想如果有一个小卐字符完全包含在该季度内，那么您仍然有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T23:46:39.680

我最初的建议涉及视觉分析是在使用的特定算法的背景下，即 9 块被子。

如果您想尝试另一种没有 Swastika 问题的算法，请尝试将像在墨迹中看到的对称性引入流行的 16 块被子 Identicons。

# math - 图形编程的数学准备

> ID：11611012
> 
> 赞同：0
> 
> 时间：2012-07-23T10:46:36.943
> 
> 标签：math, 3d, 2d

这个问题是针对那些已经有编程、图形 2D 或 3D 经验的人提出的。编程时间表需要什么数学背景？您需要多久将这些知识应用到实践中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:55:23.167

就个人而言，我认为您使用什么语言或框架并不重要，从背景知识的角度来看，您需要考虑 3 个领域。

1.  矢量数学
2.  三角学
3.  离散算法

在你开始之前，我很想很好地掌握这三个方面。此外，从简单开始 - Vectors 和 Trig 在 2D 中要简单得多，然后一旦掌握了它的窍门，就可以开始添加 3D。

祝你好运，玩得开心！

# json - android phonegap 插件的java脚本调用

> ID：11611013
> 
> 赞同：0
> 
> 时间：2012-07-23T10:46:42.650
> 
> 标签：json, callback, android-ndk, java-native-interface, phonegap-plugins

我已经使用 JNI、NDK 和 phonegap Plugin fr android 在 android 中创建了一个应用程序。

在这里，我使用该函数从 java 本机代码调用 java 脚本函数`sendJavascript(SendJS);`

其`SendJS`制作如下：

```
SendJS = "javascript:" + SuccessCallBack + "('" + JSONObject.quote(result.toString()) + "')"; 
```

到目前为止，它工作正常，因为我的字符串在结果`result`中没有`'`。

但是现在当我得到一个结果时`'`，我的结果是我`sendJavascript(SendJS);`的不工作并给了我

`phonegap-1.0.0.js: Line 778 : JSCallback Error: SyntaxError: Parse error`

它工作得很好，`Double Quotes(")`也`\'`没有工作。

所以任何人都可以帮助我摆脱这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:55:50.557

这是一个愚蠢的事情......

`'`用thn替换`\\'`其余部分和原来一样......

# php - 多个元素

> ID：11611023
> 
> 赞同：1
> 
> 时间：2012-07-23T10:47:10.183
> 
> 标签：php, arrays, redis

使用 PHP，我得到这种形式的文本：

```
 key1,key2,keyn 
```

然后我将这个文本转换成一个数组。现在，我要做的是为每个键，获取它的列表长度。我知道我可以在内部使用“llen”命令进行 foreach，但是否可以仅使用一个查询来完成？

此外，更一般地说，这通常可以与其他数据库（如 mySQL 或 mongo）一起使用吗？如果要搜索的值太多，一个简单的“或”语句是否不会太重？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:49:55.303

不，没有“multi-llen”命令。在循环中执行。

如果您将所有 LLEN 命令[流水线](http://redis.io/topics/pipelining)化，它将几乎与单个 LLEN 一样快，因为您无需等待每个 LLEN 的回复。但请注意，您的 redis 客户端可能不支持获取流水线命令的结果。

# mongodb - Mongo中的分箱和制表（唯一/计数）

> ID：11611024
> 
> 赞同：8
> 
> 时间：2012-07-23T10:47:32.887
> 
> 标签：mongodb, mongoose, nosql

我正在寻找一种使用 Mongo 生成一些汇总统计数据的方法。假设我有一个包含许多表单记录的集合

```
{"name" : "Jeroen", "gender" : "m", "age" :27.53 } 
```

现在我想获得性别和年龄的分布。假设性别，只有值`"m"`和`"f"`。获取我的收藏中男性和女性总数的最有效方法是什么？

对于年龄，有没有一种方法可以进行一些“分箱”并给我一个像摘要这样的直方图；即年龄在区间内的记录数：`[0, 2), [2, 4), [4, 6) ...`等？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T01:07:35.023

我刚刚试用了 MongoDB 2.2 版（2.2.0-rc0 已发布）中将提供的新聚合框架，它应该比 map reduce 具有更高的性能，因为它不依赖于 Javascript。

输入数据：

```
{ "_id" : 1, "age" : 22.34, "gender" : "f" }
{ "_id" : 2, "age" : 23.9, "gender" : "f" }
{ "_id" : 3, "age" : 27.4, "gender" : "f" }
{ "_id" : 4, "age" : 26.9, "gender" : "m" }
{ "_id" : 5, "age" : 26, "gender" : "m" } 
```

性别聚合命令：

```
db.collection.aggregate(
   {$project: {gender:1}},
   {$group: {
        _id: "$gender",
        count: {$sum: 1}
   }}) 
```

结果：

```
{"result" : 
   [
     {"_id" : "m", "count" : 2},
     {"_id" : "f", "count" : 3}
   ],
   "ok" : 1
} 
```

要获取垃圾箱中的年龄：

```
db.collection.aggregate(
   {$project: {
        ageLowerBound: {$subtract:["$age", {$mod:["$age",2]}]}}
   },
   {$group: {
       _id:"$ageLowerBound", 
       count:{$sum:1}
   }
}) 
```

结果：

```
{"result" : 
    [
       {"_id" : 26, "count" : 3},
       {"_id" : 22, "count" : 2}
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T23:24:00.203

康斯坦丁的回答是对的。MapReduce 完成了工作。这是完整的解决方案，以防其他人觉得这很有趣。

要计算性别，map 功能键是`this.gender`每条记录的属性。然后 reduce 函数简单地将它们相加：

```
// count genders
db.persons.mapReduce(
    function(){
        emit(this["gender"], {count: 1})
    }, function(key, values){
        var result = {count: 0};
        values.forEach(function(value) {
            result.count += value.count;
        });
        return result;
    }, {out: { inline : 1}}
); 
```

为了进行分箱，我们将 map 函数中的键设置为向下舍入到最接近的除以 2。因此，例如 10 和 11.9999 之间的任何值都将获得相同的密钥`"10-12"`。然后我们再次简单地将它们相加：

```
db.responses.mapReduce(
    function(){
        var x = Math.floor(this["age"]/2)*2;
        var key = x + "-" + (x+2);
        emit(key, {count: 1})
    }, function(state, values){
        var result = {count: 0};
        values.forEach(function(value) {
            result.count += value.count;
        });
        return result;
    }, {out: { inline : 1}}
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:13:28.020

获得男性总数的简单方法是`db.x.find({"gender": "m"}).count()`

如果您只想在一个查询中同时计算男性和女性人数，那么没有简单的方法。映射/减少将是一种可能性。或者也许是新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)。*您的分箱*要求也是如此

Mongo 不适合聚合，但它对于许多小的增量更新来说非常棒。所以用 mongo 解决这个问题的最好方法是在单独的集合中收集聚合数据。

因此，如果您使用这样的一个文档保存统计信息集合：

```
stats: [
  {
     "male": 23,
     "female": 17,
     "ageDistribution": {
       "0_2" : 3,
       "2_4" : 5,
       "4_6" : 7
     }
  }
] 
```

...然后每次您从另一个集合中添加或删除一个人时，您都会在统计数据集合中向上或向下计数相应的字段。

```
db.stats.update({"$inc": {"male": 1, "ageDistribution.2_4": 1}}) 
```

通过这种方式，对统计信息的查询将非常快，并且您几乎不会注意到上下统计统计信息的任何性能开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:06:46.080

根据数据量，查找男性和女性数量的最有效方法可能是幼稚查询或地图缩减工作。装箱最好通过 map reduce 完成：

在 map 阶段，您的键是一个 bin，值为 1，而在 reduce 阶段，您只需对值求和

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-23T06:32:44.667

借助新的 $bucket 和[$bucketAuto](https://docs.mongodb.com/manual/reference/operator/aggregation/bucketAuto/)聚合函数，使用 Mongo 3.4 变得更加容易。以下查询自动分为两组：

```
db.bucket.aggregate( [
   {
     $bucketAuto: {
         groupBy: "$gender",
         buckets: 2
     }
   }
] ) 
```

使用以下输入数据：

```
{ "_id" : 1, "age" : 22.34, "gender" : "f" }
{ "_id" : 2, "age" : 23.9, "gender" : "f" }
{ "_id" : 3, "age" : 27.4, "gender" : "f" }
{ "_id" : 4, "age" : 26.9, "gender" : "m" }
{ "_id" : 5, "age" : 26, "gender" : "m" } 
```

它给出以下结果：

```
{ "_id" : { "min" : "f", "max" : "m" }, "count" : 3 }
{ "_id" : { "min" : "m", "max" : "m" }, "count" : 2 } 
```

注意，bucket 和 auto-bucket 通常用于连续变量（数字、日期），但在这种情况下 auto-bucket 工作得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-10T15:05:51.380

根据@ColinE 的答案，直方图的分箱可以通过

```
db.persons.aggregate([
  {
  $bucket: {
    groupBy: "$j.age",
    boundaries: [0,2,4,6,8,10,12,14,16,18,20],
    default: "Other",
    output: {
      "count": { $sum: 1 }
    }
  }
],
{allowDiskUse:true}) 
```

`$bucketAuto`对我不起作用，因为桶似乎是按对数刻度收集的。 `allowDiskUse`仅当您拥有数百万个文档时才需要

# struts2 - struts2中的密码标签无法正常工作

> ID：11611029
> 
> 赞同：1
> 
> 时间：2012-07-23T10:48:01.763
> 
> 标签：struts2

我是struts2的新手。我有带有字段的jsp `username`, `password`, `email`,`postal code`像这样。我 在输入jsp中使用`<s:password>`了字段标签。`password`提交页面时，如果该页面中有任何错误，则将操作重定向到相同的输入页面。在这种情况下，该`password`字段被清除，并且其他字段存在输入值，但我想显示`password`具有先前输入值而不是空值的字段。如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T11:28:32.243

将`showPassword`属性设置为**true**。

```
<s:password key="password" showPassword="true" /> 
```

# c# - C# 中的并发下载/处理

> ID：11611031
> 
> 赞同：2
> 
> 时间：2012-07-23T10:48:10.767
> 
> 标签：c#, multithreading, concurrency, parallel-processing, task-parallel-library

我正在寻找最快和最可靠的方法来同时使用 C# 下载 1000 个远程网页（使用 HttpWebRequest），将它们写入单个本地文件并在所有文件下载后运行一些处理代码，同时充分利用并行性和非阻塞并发可用。

服务器是运行 Windows 2008 和 .NET 4.0 的四核 (vCPU) VPS（不能使用较新的 async/await 东西）。

你有什么建议？

**更新：**目前建议的选项有：反应式扩展 (Rx)、异步 CTP、TPL。

看起来 Async CTP 将是理想的方法，其次是 Rx 和 TPL。大伙怎么说？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:18:11.700

无论您最终使用哪种异步方法，请不要忘记您需要增加允许的最大连接数，因为默认值为***2 per domain***。因此，如果您对单个域进行大量调用，您的速率将受到限制。

您可以使用基本配置在独立（非 ASP.NET）应用程序中解决此问题：

```
<system.net>
   <connectionManagement>
       <add address="*" maxconnections="200" />
   </connectionManagement>
</system.net> 
```

但是，如果您在 ASP.NET 中，这将无法按预期工作，因为默认`<processModel autoConfig="true" ...>`属性将导致它自动配置为每个核心 12 个，虽然总数量优于 2 个，但仍可能不适合您的需求。因此，您将不得不在 Application_Start 之类的东西中使用基于代码的方法：

```
ServicePointManager.DefaultConnectionLimit = 200; 
```

注意：这种基于代码的方法同样适用于非 ASP.NET 应用程序，因此如果您想避免使用 .config，可以将其用作“通用”解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T11:53:06.760

I would use Rx for that task.

```
string[] webpages = { "http://www.google.com", "http://www.spiegel.de"};

webpages
    .Select(w => FetchWebPage(w))
    .ForkJoin()
    .Subscribe(x => /*This runs when all webpages have been fetched*/  Console.WriteLine(x)); 
```

Or if you like to control the concurrency to process max 4 requests concurrently as svick suggested you could change it to this:

```
Observable.ForkJoin(
    webpages
        .Select(w => FetchWebPage(w))
        .Merge(4))
        .Subscribe(x => /*This runs when all webpages have been fetched*/  Console.WriteLine(x)); 
```

You also neeed a helper method to transform from the regular async way to the Rx way

```
public static IObservable<string> FetchWebPage(string address)
{
    var client = new WebClient();

    return Observable.Create<string>(observer =>
    {
        DownloadStringCompletedEventHandler handler = (sender, args) =>
        {
            if (args.Cancelled)
                observer.OnCompleted();
            else if(args.Error != null)
                observer.OnError(args.Error);
            else
            {
                observer.OnNext(args.Result);
                observer.OnCompleted();
            }
        };

        client.DownloadStringCompleted += handler;

        try
        {
            client.DownloadStringAsync(new Uri(address));
        }
        catch (Exception ex)
        {
            observer.OnError(ex);
        }

        return () => client.DownloadStringCompleted -= handler;
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:14:07.663

VS2010 SP1 可以使用Async CTP在.NET 4.0 上做`async`/ 。`await`VS2012 RC 可以使用 Async Targeting Pack 来做`async`/ `await`on .NET 4.0。

但如果您真的不想使用`async`/ `await`，您仍然可以使用任务和延续（任务并行库是 .NET 4.0 的一部分）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T14:33:47.647

我也有类似的需求，但对我来说，URL 数量超过 7,000 个（过去大约需要 25 - 28 分钟才能完成）。对于我的解决方案，我使用了 TPL。由于每个 URL 没有依赖关系，因此很容易将每个 URL 封装在一个对象中，将其放入一个集合中，然后将该集合传递给 Parallel.ForEach() 调用。

每次下载完成后，我们都会查看页面的内容，根据我们找到的内容，我们会将其发送出去以进行额外处理。

正如我所说，这过去需要半小时才能完成，但现在运行时间约为 4.5 分钟（我有双四核 Xeon 处理器 @ 3GHz、Windows 7 Ultimate 64 位版和 24 GB RAM .... 大量的电力正在被利用，而不是大部分被浪费掉）。

微软的 TPL 给我留下了深刻的印象，以至于我回到了我的大部分遗留项目/代码并重构了设计以尽可能利用 TPL，并且我总是对我编写的任何新代码进行“TPL 处理”（它是如果您在循环迭代之间有任何类型的依赖关系，则并非总是可能的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T11:27:12.197

我最近使用 C# 5 的新异步功能和 WebClent 而不是 HttpWebRequest 做了类似的事情。您可以使用 WebClient 获得一些不错的异步方法，例如 DownloadDataTaskAsync。

```
WebClient client = new WebClient();
byte[] data = await client.DownloadDataTaskAsync(url) 
```

# vb.net - 表格在另一个表格上最大化

> ID：11611032
> 
> 赞同：1
> 
> 时间：2012-07-23T10:48:11.170
> 
> 标签：vb.net, forms

我有一个包含许多子表单的 MDI 应用程序

我的问题是，在单击特定菜单时，我在 MDI 表单中打开了一个带有最大化窗口的表单。这工作正常。

现在，如果我在第一个表格上方打开另一个表格，并且我希望第二个表格具有正常大小，我将无法做到。

第二种形式也以类似于第一种形式的最大化窗口打开。我希望第二种形式是正常的小尺寸。

我想正常显示第二种形式并最大化第一种形式。

我怎样才能做到这一点？

```
Private Sub TESTToolStripMenuItem_Click(sender As System.Object, e As System.EventArgs) Handles TESTToolStripMenuItem.Click
        Dim f As New newCalendar2("UGHARANI")
        f.Show()
        f.MdiParent = Me
        f.WindowState = FormWindowState.Maximized
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:23:33.493

好的，我想我理解您要完成的工作：您希望第一个（数据）表单成为 MDI 应用程序的一种背景，并在其上显示其他表单，对吗？

一种方法可能是从背景表单中删除边框——<code>FormBorderStyle = None——并将其填充停靠在 MDI 父表单中。尽管如果用户单击它的任何位置，它最终会脱颖而出并隐藏所有其他表单。但是如果它不需要任何用户交互，你总是可以使用它的`Activate`事件将它发送回后台，使用`Me.SendToBack().`

# mysql - Mysql 聚合函数。平均价格和商品价格

> ID：11611033
> 
> 赞同：1
> 
> 时间：2012-07-23T10:48:13.703
> 
> 标签：mysql

我想在一个查询中查询有多少商品的价格高于平均价格和低于平均价格。

我的查询：

```
SELECT COUNT(*)
FROM item i
WHERE refine = 0 AND item = 5170
GROUP BY id
HAVING price > AVG(price) - STD(price) AND i.price < AVG(price) + STD(price) 
```

但我在“有条款”中收到错误*未知列“价格”*

如果我在 SELECT 中使用 AVG 和 STD 函数：

```
SELECT COUNT(*), SUM(price > AVG(price) - STD(price) AND i.price < AVG(price) + STD(price)) as middle
FROM item i
WHERE refine = 0 AND item = 5170 
```

我再次收到错误。如何进行正确的查询？

这里链接在[sqlFiddle](http://sqlfiddle.com/#!2/e630c/3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:16:18.860

试试这个

```
select count(*) from item as t1 inner join
(
select id,AVG(price) - STD(price) as sum1, AVG(price) + STD(price)  as sum2
from item 
group by id
) as t2
on t1.id=t2.id and t1.price>sum1 and t1.price<sum2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T10:50:56.170

```
SELECT COUNT(*), SUM(price > AVG(price)) - STD(price) AND i.price < AVG(price) + STD(price)) as    middle
 FROM item i WHERE refine = 0 AND item = 5170 
```

你忘了一个“）”->`SUM(price > AVG(price))`

# optimization - 使用 NEON 组件进行优化

> ID：11611039
> 
> 赞同：5
> 
> 时间：2012-07-23T10:48:40.593
> 
> 标签：optimization, opencv, arm, simd, neon

我正在尝试使用 NEON 优化 OpenCV 代码的某些部分。这是我工作的原始代码块。（注意：如果有什么重要的，你可以在“opencvfolder/modules/video/src/lkpyramid.cpp”找到完整的源代码。它是一个对象跟踪算法的实现。）

```
for( ; x < colsn; x++ )
{
    deriv_type t0 = (deriv_type)(trow0[x+cn] - trow0[x-cn]);
    deriv_type t1 = (deriv_type)((trow1[x+cn] + trow1[x-cn])*3 + trow1[x]*10);
    drow[x*2] = t0; drow[x*2+1] = t1;

} 
```

在此代码中，deriv_type 的大小为 2 个字节。这是我写的 NEON 程序集。使用原始代码，我测量 10-11 fps。使用 NEON 更糟，我只能获得 5-6 fps。我对NEON不太了解，可能这段代码有很多错误。我在哪里做错了？谢谢

```
for( ; x < colsn; x+=4 )
{
    __asm__ __volatile__(
    "vld1.16 d2, [%2] \n\t" // d2 = trow0[x+cn]
    "vld1.16 d3, [%3] \n\t" // d3 = trow0[x-cn]
    "vsub.i16 d9, d2, d3 \n\t" // d9 = d2 - d3

    "vld1.16 d4, [%4] \n\t" // d4 = trow1[x+cn]
    "vld1.16 d5, [%5] \n\t" // d5 = trow1[x-cn]
    "vld1.16 d6, [%6] \n\t" // d6 = trow1[x]

    "vmov.i16 d7, #3 \n\t"  // d7 = 3
    "vmov.i16 d8, #10 \n\t" // d8 = 10

    "vadd.i16 d4, d4, d5 \n\t" // d4 = d4 + d5
    "vmul.i16 d10, d4, d7 \n\t" // d10 = d4 * d7
    "vmla.i16 d10, d6, d8 \n\t" // d10 = d10 + d6 * d8

    "vst2.16 {d9,d10}, [%0] \n\t" // drow[x*2] = d9; drow[x*2+1] = d10;
    //"vst1.16 d4, [%1] \n\t"

    :   //output
    :"r"(drow+x*2), "r"(drow+x*2+1), "r"(trow0+x+cn), "r"(trow0+x-cn), "r"(trow1+x+cn), "r"(trow1+x-cn), "r"(trow1) //input
    :"d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "d10"  //registers

    );
} 
```

**编辑**

这是带有内在函数的版本。和以前几乎一样。它仍然运行缓慢。

```
const int16x8_t vk3 = { 3, 3, 3, 3, 3, 3, 3, 3 };
const int16x8_t vk10 = { 10, 10, 10, 10, 10, 10, 10, 10 };

for( ; x < colsn; x+=8 )
{
                int16x8x2_t loaded;
                int16x8_t t0a = vld1q_s16(&trow0[x + cn]);
                int16x8_t t0b = vld1q_s16(&trow0[x - cn]);
                loaded.val[0] = vsubq_s16(t0a, t0b); // t0 = (trow0[x + cn] - trow0[x - cn])

                loaded.val[1] = vld1q_s16(&trow1[x + cn]);
                int16x8_t t1b = vld1q_s16(&trow1[x - cn]);
                int16x8_t t1c = vld1q_s16(&trow1[x]);

                loaded.val[1] = vaddq_s16(loaded.val[1], t1b);
                loaded.val[1] = vmulq_s16(loaded.val[1], vk3);
                loaded.val[1] = vmlaq_s16(loaded.val[1], t1c, vk10);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:26:36.273

由于数据危害，您正在创建大量管道停顿。例如这三个指令：

```
"vadd.i16 d4, d4, d5 \n\t" // d4 = d4 + d5
"vmul.i16 d10, d4, d7 \n\t" // d10 = d4 * d7
"vmla.i16 d10, d6, d8 \n\t" // d10 = d10 + d6 * d8 
```

它们每个只需要 1 条指令即可发出，但由于结果尚未准备好（[NEON 指令调度](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0344k/Babfjcjb.html "NEON 指令调度")），它们之间存在多个周期停顿。

尝试展开循环几次并交错它们的指令。如果您使用内在函数，编译器可能会为您执行此操作。在指令调度等方面击败编译器并非不可能，但这非常困难并且通常不值得（这可能属于不过早优化的范畴）。

编辑

你的内在代码是合理的，我怀疑编译器做得不是很好。看看它生成的汇编代码 ( `objdump -d`)，您可能会发现它也造成了很多管道危险。更高版本的编译器可能会有所帮助，但如果没有，您可能必须自己修改循环以隐藏结果的延迟（您将需要指令时序）。保留当前代码，因为它是正确的，并且应该可以通过聪明的编译器进行优化。

你最终可能会得到类似的东西：

```
// do step 1 of first iteration
// ...
for (int i = 0; i < n - 1; i++) {
  // do step 1 of (i+1)th
  // do step 2 of (i)th
  // with their instructions interleaved
  // ...
}
// do step 2 of (n-1)th
// ... 
```

您还可以将循环分成两个以上的步骤，或展开循环几次（例如更改`i++`为`i+=2`，将循环主体加倍，在后半部分更改`i`为）。`i+1`我希望这个答案有帮助，如果有什么不清楚的地方请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:05:32.717

那里有一些循环不变的东西需要移到 for 循环之外 - 这可能会有所帮助。

您还可以考虑使用全宽 SIMD 操作，这样每次循环迭代可以处理 8 个 ppint，而不是 4 个。

最重要的是，您可能应该使用内在函数而不是原始 asm，以便编译器可以处理窥视孔优化、寄存器分配、指令调度、循环展开等。

例如

```
// constants - init outside loop

const int16x8_t vk3 = { 3, 3, 3, 3, 3, 3, 3, 3 };
const int16x8_t vk10 = { 10, 10, 10, 10, 10, 10, 10, 10 };

for( ; x < colsn; x += 8)
{
    int16x8_t t0a = vld1q_s16(&trow0[x + cn]);
    int16x8_t t0b = vld1q_s16(&trow0[x - cn]);
    int16x8_t t0 = vsubq_s16(t0a, t0b); // t0 = (trow0[x + cn] - trow0[x - cn])

    // ...
} 
```

# sql - SQL 将没有事务的日期显示为 value = 0

> ID：11611040
> 
> 赞同：1
> 
> 时间：2012-07-23T10:48:41.733
> 
> 标签：sql, date

我正在做体重报告，但我遇到了问题。我使用此查询来了解我们仓库中的重量输入，但是当某个日期没有交易时，该日期不会出现在结果中。

```
SELECT  erp.MKPF.BUDAT AS Data,  
Sum( erp.MSEG.MENGE * erp.MARM.BRGEW ) as pes 

From erp.MKPF  
INNER Join erp.MSEG on erp.MKPF.MANDT = erp.MSEG.MANDT and erp.MKPF.MBLNR = erp.MSEG.MBLNR  
INNER Join erp.MARM on erp.MSEG.MANDT = erp.MARM.MANDT and erp.MSEG.MATNR = erp.MARM.MATNR And erp.MSEG.MEINS = erp.MARM.MEINH  
INNER JOIN erp.MARA on erp.MSEG.MANDT = erp.MARA.MANDT and erp.MSEG.MATNR = erp.MARA.MATNR

WHERE  erp.MKPF.MANDT = '100'  
and erp.MKPF.BUDAT >= '20120720' 
and erp.MKPF.BUDAT <= CONVERT(VARCHAR(8), GETDATE(), 112) -1 
and erp.MSEG.LGORT in ('1001','1069') 
and erp.MSEG.BWART In ('101','102','311','312') 
and erp.MSEG.WERKS = '1001' 
and erp.MARA.MTART in ('Z001','Z010','Z002','Z02E') 

GROUP BY erp.MKPF.BUDAT* 
```

现在结果是这样的：

```
Data        PES
20120720    9999999.9999
20120721    9999999.8888
20120723    9999999.7777 
```

我需要这个

```
Data        PES
20120720    9999999.9999
20120721    9999999.8888
20120722    0
20120723    999999.7777 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:26:33.610

使用表或视图来生成感兴趣的日期范围并让其驱动查询。然后你将你的结果外部加入到这个视图中。这可以在查询中动态完成。例如，在 Oracle 中，您可以使用“connect by”来生成一个系列：

```
create table my_summary(the_day date, pes number);
insert into my_summary values(to_date('20120720', 'yyyymmdd'),  9999999.9999);
insert into my_summary values(to_date('20120721', 'yyyymmdd'),  9999999.8888);
insert into my_summary values(to_date('20120723', 'yyyymmdd'),  9999999.7777);

SELECT d.the_day, NVL(s.pes, 0) AS pes
  FROM ( SELECT to_date('20120720', 'yyyymmdd') + level -1 AS the_day
           FROM dual CONNECT BY level <= 4) d
       LEFT OUTER JOIN my_summary s ON (d.the_day = s.the_day)
  ORDER BY 1

THE_DAY   PES
--------- ---
20-JUL-12 9999999.9999 
21-JUL-12 9999999.8888 
22-JUL-12   0 
23-JUL-12 9999999.7777 
```

其他 rdbms 有其他方法来生成系列。这将要求您知道所需的开始日期和记录数（在上面的示例中为 20120720 和 4）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:08:10.783

谢谢大家，最后我做到了，它有效

```
 SELECT 
    c.BUDAT AS DATA, 
    CASE When SAP.pes Is Null then '0'
    ELSE SAP.pes
    END
From
    erp.YSD_CALENDAR as c LEFT JOIN

    (SELECT 
    erp.MKPF.BUDAT,
    Sum(
    erp.MSEG.MENGE
     * erp.MARM.BRGEW ) as pes
     FROM
     erp.MKPF 

INNER Join erp.MSEG on erp.MKPF.MANDT = erp.MSEG.MANDT and erp.MKPF.MBLNR = erp.MSEG.MBLNR  

INNER Join erp.MARM on erp.MSEG.MANDT = erp.MARM.MANDT and erp.MSEG.MATNR = erp.MARM.MATNR And erp.MSEG.MEINS = erp.MARM.MEINH 

INNER JOIN erp.MARA on erp.MSEG.MANDT = erp.MARA.MANDT and erp.MSEG.MATNR = erp.MARA.MATNR 

WHERE 
    erp.MKPF.MANDT = '100' 
and erp.MKPF.BUDAT >= '20120720'
and erp.MSEG.LGORT in ('1001','1069')
and erp.MSEG.BWART In ('101','102','311','312')
and erp.MSEG.WERKS = '1001'
and erp.MARA.MTART in ('Z001','Z010','Z002','Z02E')
and erp.MSEG.SHKZG = 'S'
GROUP BY erp.MKPF.BUDAT
) SAP ON SAP.BUDAT = c.BUDAT 

WHERE 
c.BUDAT >= '20120720'
and c.BUDAT <=  CONVERT(VARCHAR(8), GETDATE(), 112)

GROUP BY c.BUDAT, SAP.pes
ORDER BY c.BUDAT 
```

# java - 多个数据库支持相同的 JPA 类

> ID：11611046
> 
> 赞同：1
> 
> 时间：2012-07-23T10:49:05.210
> 
> 标签：java, oracle, spring, hibernate, jpa-2.0

我们在项目中使用 MYSQL 和 Hibernate。

JPA 用于将对象持久保存在数据库中。

我们有多个具有相似代码的类

```
@Entity
@Table(name = "users")
class Users implement Serializable {
   @Id
   @GeneratedValue(strategy=GenerationType.AUTO)
   private Long id;
    .
    .    
    .
   public Long getId() {
    return id;
   }

   public void setId(Long id) {
    this.id = id;
   }
} 
```

现在我们也想支持oracle。我们应该怎么做？oracle 不支持 strategy=GenerationType.AUTO。

一个解决方案是我们可以在每个 POJO 中定义我们不想做的序列？

请向我们提供一些意见，以便我们继续前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:04:03.253

AUTO 策略也应该适用于 Oracle。与 MySQL 的不同之处在于它将使用序列而不是依赖于 auto_increment ID。

如果需要，您甚至可以控制每个实体的序列名称：请参阅[Oracle 上的 Hibernate 序列，@GeneratedValue(strategy = GenerationType.AUTO)](https://stackoverflow.com/questions/3068692/hibernate-sequence-on-oracle-generatedvaluestrategy-generationtype-auto)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:14:00.473

```
@Id
    @SequenceGenerator(name="admin_seq", sequenceName="unique_id")
    @GeneratedValue(strategy=GenerationType.AUTO, generator="admin_seq")
    private Long id 
```

为我工作，感谢您的所有回答

# c# - 跨语言插件架构的错误报告模式

> ID：11611051
> 
> 赞同：1
> 
> 时间：2012-07-23T10:49:21.923
> 
> 标签：c#, exception, plugins, error-handling, cross-language

我正在为我们的产品设计一个插件系统的界面。当前的插件将用 C# 编写，但我设想将来至少创建 C/C++ 包装器。

考虑到潜在的语言差异，我很困惑如何处理错误。通常我对错误使用异常，但我假设不同语言之间的异常机制差异会使这一点变得不简单，并且某些语言不支持异常。

如果是这种情况，那么我能看到的唯一其他模式是：

A) 从所有函数返回错误代码。这仅允许预定义的错误。有关临时/未知错误的信息是不可能的。

B) 从所有函数返回布尔值并提供 GetLastError() 类型函数。由于可能的线程问题，我对此并不热衷（另一个线程在读取之前更改了错误）。

C) 从所有函数返回布尔值，并让 API 提供一个 LogError() 函数，插件可以使用该函数记录任何问题。由于在调用时难以以编程方式对特定错误做出反应，因此对此也不热衷。

D）将错误信息对象传递给每个可以填写的函数调用。Urgh。

有没有针对跨语言 API 发展起来的最佳实践？

# django - Django Admin 以内联形式显示外键图像字段的缩略图

> ID：11611054
> 
> 赞同：0
> 
> 时间：2012-07-23T10:49:51.947
> 
> 标签：django, django-admin, thumbnails, imagefield

我有一个简单的结构，有一个 Product 模型、一个 AppMedia 模型和一个 ProductMedia 连接表。

产品（有很多） ProductMedia

ProductMedia（有一个）AppMedia

我真正想要的是在 Product 中以内联形式查看 AppMedia 媒体字段的缩略图。

例如，在 Django admin 中编辑 Product，显示 StackedInline 表单。这包含（目前）所有 AppMedia 的下拉列表（选择）。

我需要的是缩略图。

任何帮助表示赞赏。

我确信这并不困难，但我正在努力。为 AppMedia 表单（媒体 ImageField 所在的位置）放置缩略图非常简单，但对于使用 AppMedia 作为 ForeignKey 的 ProductMedia 表单则不然。

基本型号...

```
class Product(models.Model):
    name             = models.CharField(max_length=100)

class AppMedia(models.Model):
    media           = models.ImageField(upload_to=appmedia_upload_to) #appmedia_upload_to defined elsewhere)

class ProductMedia(models.Model):
    title           = models.CharField(max_length=150)
    media           = models.ForeignKey(AppMedia)
    media_order     = models.IntegerField(default=0)
    product         = models.ForeignKey(Product) 
```

AppMedia 以这种方式共享以停止同一文件的多次上传，并与图像一起存储额外的元数据（此处未显示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:07:24.800

我遇到过同样的问题。我希望我的至少一项尝试对您的情况有用：

我第一次尝试解决这个问题（不覆盖`ForeignKeyRawIdWidget`）是：

*   `form`在应显示缩略图的内联管理中设置属性
*   使用小部件将另一个字段添加到给定的表单类中，这将显示一个缩略图

但是我放弃了这个解决方案，因为我认为我必须将有关缩略图的数据注入表单构造函数的给定字段中，而且我认为它不是一个好的解决方案。

我的下一个解决方案是`MultiWidget`用于某些领域。在这种情况下，我不需要向表单添加另一个字段，并且我将拥有在小部件中显示缩略图所需的数据，而无需在构造函数中注入它们。

```
class ThumbnailMultiWidget(MultiWidget):

   def decompress(self, value):
       #has to be overriden
       return [None,None]

class ThumbnailWidget(Widget):

    def render(self, name, value, attrs=None):
       #not quite sure what is in `value`, I've not been so far
       return '<img src="%s"/>' % value.url

class PhotoInlineForm(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        super(PhotoInlineForm, self).__init__(*args, **kwargs)

        wdgts = [self.fields['media'].widget, ThumbnailWidget()]
        self.fields['media'].widget = ThumbnailMultiWidget(widgets=wdgts)

    class Meta:
        model = RecipePhoto 
```

但我也放弃了这个解决方案，因为我发现，实际上有一个实例的表示`ForeignKeyRawIdWidget`（这是我使用的小部件），其中包含我需要显示缩略图的所有数据。这就是我的最终解决方案：

因此，因为我的内联项`raw_id_field`用于选择内联记录，所以我可以简单地覆盖用于表示现有内联记录的方法`label_for_value`in 。`ForeignKeyRawIdWidget`通常是`__unicode__`（我认为）。我继承`ForeignKeyRawIdWidget`并覆盖了这个方法来显示图像缩略图：

```
class PhotoForeignKeyRawIdWidget(ForeignKeyRawIdWidget):

    def label_for_value(self, value):
        key = self.rel.get_related_field().name
        try:
            obj = self.rel.to._default_manager.using(self.db).get(**{key: value})
        except (ValueError, self.rel.to.DoesNotExist):
            return ''
        else:
            """
            there's utilized sorl.thumbnail, but you can return st like this:
            <img src='%s' /> % obj.media.url
            """
            return Template("""{% load thumbnail %}
            {% thumbnail image.image "120x120" crop="center" as one %}
                <img src="{{ one.url }}" />
            {% endthumbnail %}""").render(Context({
                'image': obj
            }))

class AppMediaInlineAdmin(admin.TabularInline):
    model = AppMedia
    extra = 1

    def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
        if db_field.name == 'media':
            db = kwargs.get('using')
            kwargs['widget'] = PhotoForeignKeyRawIdWidget(db_field.rel, self.admin_site, using=db)
        return super(AppMediaInlineAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-29T11:38:35.430

您应该查看外键的 related_name 参数，这将允许您反向访问 ProductMedia，即，如果您将 ProductMedia 模型更改为：

```
class ProductMedia(models.Model):
    title           = models.CharField(max_length=150)
    media           = models.ForeignKey(AppMedia)
    media_order     = models.IntegerField(default=0)
    product         = models.ForeignKey(Product, related_name='media') 
```

您可以访问 Product 模型中的媒体对象，这将允许您将其放入您的管理内联表单中。即你会拥有（为了更简单的解释，我将 ImageField 放在 ProductMedia 中）：

```
class Product(models.Model):
    name             = models.CharField(max_length=100)

    def admin_image(self):
        return '<img src="%s"/>' % (self.media.all()[0].image.url)
    admin_image.allow_tags = True

class ProductMedia(models.Model):
    title           = models.CharField(max_length=150)
    image           = models.ImageField(upload_to=appmedia_upload_to) #appmedia_upload_to defined elsewhere)
    media_order     = models.IntegerField(default=0)
    product         = models.ForeignKey(Product, related_name='media') 
```

然后在你的 admin.py 中输入：

```
class ProductAdmin(admin.ModelAdmin):
    list_display = ('name', 'admin_image')

admin.site.register(models.Product, ProductAdmin) 
```

[https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)

希望我正确理解了您的问题，这对您有所帮助。代码也没有经过测试，但我很确定它应该可以工作。

# javascript - 如何使用 Worklight 使用服务器端 javascript 发出 HTTPS 请求？

> ID：11611058
> 
> 赞同：8
> 
> 时间：2012-07-23T10:49:56.380
> 
> 标签：javascript, https, google-places-api, ibm-mobilefirst

我正在[玩弄 IBM worklight](http://www-01.ibm.com/software/mobile-solutions/worklight/)，并试图创建一个适配器来从[Google Places API](https://developers.google.com/places/documentation/)提供一些数据。

我想调用这个 URL：

```
https://maps.googleapis.com/maps/api/place/search/json?key=AIzaSyCTlPms1pvhzeoRrBao5qW-DJMI_CWcbAM&location=52.0700,1.1400&radius=10000&sensor=false&name=coffee 
```

在浏览器中执行此 URL 可以正常工作，并显示一些我试图通过 Worklight 获取的漂亮 JSON。

Worklight 适配器是用 Javascript 创建的，这是我目前所拥有的：

```
function getCoffeeHouses() {

    var input = {
        method : 'get',
        returnedContentType : 'json',
        path : 'maps/api/place/search/json',
        parameters : {
            'key'       :   'AIzaSyCTlPms1pvhzeoRrBao5qW-DJMI_CWcbAM',
            'location'  :   '52.0700,1.1400',
            'radius'    :   '10000',
            'sensor'    :   'false',
            'name'      :   'coffee' 
        }
    };

    var response = WL.Server.invokeHttp(input);

 // Extract latitude and longitude from the response.
    var type = typeof response; 
    if ("object" == type) {
        if (true == response["isSuccessful"]) {
            // Return JSON object with lat and lng.
            return response["results"];
        } 
        else {
            // Returning null. Web request was not successful.
            return null;
        }
    } 
    else {
        // Returning null. Response is not an object.
        return null;
    }
} 
```

这是我在控制台中得到的结果，当我测试上述内容时：

```
Failed to parse JSON string
<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 404 (Not Found)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}
  </style>
  <a href=//www.google.com/><img src=//www.google.com/images/errors/logo_sm.gif alt=Google></a>
  <p><b>404.</b> <ins>That’s an error.</ins>
  <p>The requested URL <code>/maps/api/place/search/json?key=AIzaSyCTlPms1pvhzeoRrBao5qW-DJMI_CWcbAM&amp;location=52.0700%2C1.1400&amp;radius=10000&amp;sensor=false&amp;name=coffee</code> was not found on this server.  <ins>That’s all we know.</ins>
Caused by: java.io.IOException: Unexpected character '<' on line 1, column 1
[2012-07-23 11:08:57] An error occurred while invoking procedure CoffeeFinder/getCoffeeHouses parameters: {
   "arr": [
   ]
}
null
Caused by: null 
```

我认为，这可能是因为适配器请求为 HTTP，而它应该使用 HTTPS。

如果我将请求更改为在浏览器中使用 HTTP，它会显示类似的结果。

**问题：我可以通过更改上述 Javascript 来发出 HTTPS 请求，还是我误解了工作灯适配器？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T08:48:20.430

如果您未在请求中指定 Host 标头，googleapis 似乎将不起作用。添加后一切正常：

这是适配器的 XML 部分

```
<connectivity>
    <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
        <protocol>https</protocol>
        <domain>maps.googleapis.com</domain>
        <port>443</port>            
    </connectionPolicy>
    <loadConstraints maxConcurrentConnectionsPerNode="2" />
</connectivity> 
```

这是适配器的 JS：

```
function doGet() {

var input = {
    method : 'get',
    returnedContentType : 'json',
    path : 'maps/api/place/search/json',
    headers: {
        Host: 'maps.googleapis.com'
    },
    parameters : {
        'key'       :   'AIzaSyCTlPms1pvhzeoRrBao5qW-DJMI_CWcbAM',
        'location'  :   '52.0700,1.1400',
        'radius'    :   '10000',
        'sensor'    :   'false',
        'name'      :   'coffee' 
    }
};

var response = WL.Server.invokeHttp(input);
return response; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T21:04:32.627

在您的适配器中还有一个 {ADAPTER NAME}.xml

其中，在connectionPolicy下的连接下，有协议。您是否将其更改为 https 并部署？

# c# - 查询不返回任何内容

> ID：11611059
> 
> 赞同：1
> 
> 时间：2012-07-23T10:49:59.567
> 
> 标签：c#, .net, linq, linq-to-sql

我有 2 个表：winery 和 wineType（在 wineType 中我有酒厂的外键，称为 wineryID）。我尝试获取所有生产葡萄酒的酒厂名称，例如客户从下拉列表中选择的酒厂名称。我有这个功能

```
public void ispolniLista()
{
    DataClassesDataContext MyDB = new DataClassesDataContext();
    var id = from wineT in MyDB.WineTypes where wineT.kind == ddlSorti.SelectedItem.Text select new { wineT.wineryID };

     List<int> listaID = id as List<int>;
     List<string> listaIminja = new List<string>();
     try
     {
         foreach (int i in listaID)
         {
             var vname = from w in MyDB.Wineries where w.wineryID == i select new { w.name };
             listaIminja.Add(vname.ToString());
         }
         lstVinarii.DataSource = listaIminja;
         lstVinarii.DataBind();
     }
     catch (NullReferenceException err)
     {
         Console.Write(err.Message);
     }
 } 
```

我没有任何结果，lstVinarii 是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:52:37.550

你在哪里投射这样的结果：

```
List<int> listaID = id as List<int>; 
```

您需要实例化它，以便实际枚举可枚举，如下所示：

```
List<int> listaID = new List<int>(id); 
```

但是，值得重写它以利用连接，因为您将使用上述方法弹出很多查询（因为您在循环中有一个查询）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:14:51.987

```
List<int> id = ( from wineT in MyDB.WineTypes where wineT.kind == ddlSorti.SelectedItem.Text select  wineT.wineryID ).ToList(); 
```

做这个 ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T10:53:36.697

## 编辑

**注意：从您的代码中从选择中删除新的，无需创建额外的匿名类型，这也是一个问题**

为了避免评论错误这样写

```
 var id = from wineT in MyDB.WineTypes 
where wineT.kind == ddlSorti.SelectedItem.Text 
select wineT.wineryID ; 
```

从选择中删除新的，无需在下面的代码中创建额外的匿名类型

* * *

尝试

```
List<int> listaID = id.ToList<int>(); 
```

而不是删除 foreach 循环并像这样编写

```
var listaIminja= (from win MyDB.Wineries
             where listaID .Contains( w.wineryID ) 
            select  w.name ).ToList();
      lstVinarii.DataSource = listaIminja;
      lstVinarii.DataBind(); 
```

# android - Android：如何从网络异步获取搜索建议？

> ID：11611061
> 
> 赞同：9
> 
> 时间：2012-07-23T10:50:22.497
> 
> 标签：android, search, search-suggestion

我创建了一个可搜索的活动。现在，我想添加从 Web 服务获取的搜索建议。我想异步获得这些建议。根据[添加自定义建议](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)，我需要覆盖查询方法，进行建议搜索，构建自己的[MatrixCursor](http://developer.android.com/reference/android/database/MatrixCursor.html)并返回它。但这就是问题所在，我对获得建议的要求是异步的。因此，当结果从网络返回时，它超出了查询方法的范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-04T14:18:15.447

这是 SearchView 的示例，其中包含来自网络服务的建议（我使用了 Retrofit）：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_search_activity, menu);

        final SearchView searchView = (SearchView) MenuItemCompat.getActionView(menu.findItem(R.id.search));

        final CursorAdapter suggestionAdapter = new SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_1,
                null,
                new String[]{SearchManager.SUGGEST_COLUMN_TEXT_1},
                new int[]{android.R.id.text1},
                0);
        final List<String> suggestions = new ArrayList<>();

        searchView.setSuggestionsAdapter(suggestionAdapter);
        searchView.setOnSuggestionListener(new SearchView.OnSuggestionListener() {
            @Override
            public boolean onSuggestionSelect(int position) {
                return false;
            }

            @Override
            public boolean onSuggestionClick(int position) {
                searchView.setQuery(suggestions.get(position), false);
                searchView.clearFocus();
                doSearch(suggestions.get(position));
                return true;
            }
        });

        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {

            @Override
            public boolean onQueryTextSubmit(String query) {
                return false;
            }

            @Override
            public boolean onQueryTextChange(String newText) {

                MyApp.autocompleteService.search(newText, new Callback<Autocomplete>() {
                    @Override
                    public void success(Autocomplete autocomplete, Response response) {
                        suggestions.clear();
                        suggestions.addAll(autocomplete.suggestions);

                        String[] columns = {
                                BaseColumns._ID,
                                SearchManager.SUGGEST_COLUMN_TEXT_1,
                                SearchManager.SUGGEST_COLUMN_INTENT_DATA
                        };

                        MatrixCursor cursor = new MatrixCursor(columns);

                        for (int i = 0; i < autocomplete.suggestions.size(); i++) {
                            String[] tmp = {Integer.toString(i), autocomplete.suggestions.get(i), autocomplete.suggestions.get(i)};
                            cursor.addRow(tmp);
                        }
                        suggestionAdapter.swapCursor(cursor);
                    }

                    @Override
                    public void failure(RetrofitError error) {
                        Toast.makeText(SearchFoodActivity.this, error.getMessage(), Toast.LENGTH_SHORT).show();
                        Log.w("autocompleteService", error.getMessage());
                    }
                });
                return false;
            }
        });

        return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T18:02:45.257

无论如何，根据这个答案，对建议内容提供者的请求似乎没有在 UI 线程上运行：[https](https://stackoverflow.com/a/12895381/621690) ://stackoverflow.com/a/12895381/621690 。如果您可以更改您的 http 请求，您可以简单地在查询方法中将其称为阻塞。可能有助于监听中断或其他信号（可能是自定义信号）以停止不必要的请求。

另一种选择 - 如果您不想更改任何已经异步的请求类（例如，如果您正在使用 Robospice） - 应该只返回 MatrixCursor 引用并稍后填充它。AbstractCursor 类已经实现了观察者模式，并在发生变化时发出通知。如果搜索系统正在侦听，它应该处理数据中的任何更改。我自己还没有实现它，所以我无法确认它是否会像我想象的那样完美。（查看 CursorLoader 的来源以获得更多灵感。）

而且，无论如何，这不是光标的全部意义吗？否则我们可以简单地返回一个包含数据的列表。

更新：对我来说，使用 MatrixCursor 没有成功。相反，我实施了另外两个解决方案：

1.  将 AutoCompleteTextField 与 ArrayAdapter 的自定义子类结合使用，后者本身使用 Filter 的自定义子类。该方法`Filter#performFiltering()`（我用对远程服务的同步调用覆盖）被异步调用，并且 UI 线程没有被阻塞。
2.  将 SearchWidget 与 SearchableActivity 和自定义 ArrayAdapter（没有自定义过滤器）一起使用。当搜索意图进入时，远程请求启动（Robospice），当它通过回调返回时，我在我的`ArrayAdapter<Tag>`子类上调用以下自定义方法：

    ```
    public void addTags(List<Tag> items) {
        if (items != null && items.size() > 0) {
            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
                super.setNotifyOnChange(false);
                for (Tag tag : items) {
                    super.add(tag);
                }
                super.notifyDataSetChanged();
            } else {
                super.addAll(items);
            }
        }
    } 
    ```

此方法负责触发适配器上的通知，从而触发搜索结果列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:20:44.393

我发现解决这个问题的最接近的方法是使用 ContentProvider 并在`Query`您的提供者的方法上执行网络请求（即使这违反了最佳实践），结果您可以创建一个[在这里](https://stackoverflow.com/questions/4635973/is-it-possible-to-retrieve-search-suggestions-from-an-internet-source-in-an-andr)和[这里](https://stackoverflow.com/questions/4264589/search-suggestions-from-network-resource-into-quick-search-box)`MatrixCursor`显示的.

我仍在寻找其他选项，例如使用 a `SyncAdapter`，这对于仅显示其他任何地方未使用的建议而言似乎是压倒性的。

我采用异步方式执行此操作的另一个选项是使用 AutoCompleteTextView，这样您就可以创建一个自定义适配器，您可以在其中实现[此答案](https://stackoverflow.com/a/5051180/569332)`getFilter`中显示的功能。

# android - 获取应用程序的资源语言

> ID：11611065
> 
> 赞同：24
> 
> 时间：2012-07-23T10:50:39.793
> 
> 标签：android

是否有可能在运行时知道我的应用程序中嵌入了哪些资源语言？

即这个文件夹的存在：

```
values-en
values-de
values-fr
... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T17:27:05.650

这很复杂，因为即使您有一个名为`values-de`它的文件夹也不意味着您在那里有任何资源。如果你有它并不意味着你在那里有字符串值`string.xml`。`values-de`

价值观：

```
<resources>
    <string name="app_name">LocTest</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
</resources> 
```

价值观-de：

```
<resources>
    <string name="hello_world">Hallo Welt!</string>
</resources> 
```

您可以测试特定语言环境的资源是否不同于默认值：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
Resources r = getResources();
Configuration c = r.getConfiguration();
String[] loc = r.getAssets().getLocales();
for (int i = 0; i < loc.length; i++) {
    Log.d("LOCALE", i + ": " + loc[i]);

    c.locale = new Locale(loc[i]);
    Resources res = new Resources(getAssets(), metrics, c);
    String s1 = res.getString(R.string.hello_world);
    c.locale = new Locale("");
    Resources res2 = new Resources(getAssets(), metrics, c);
    String s2 = res2.getString(R.string.hello_world);

    if(!s1.equals(s2)){
        Log.d("DIFFERENT LOCALE", i + ": "+ s1+" "+s2 +" "+ loc[i]);
    }
} 
```

它有一个错误——你可以检查一个值是否有翻译。

上面的脏代码将打印如下内容：

> LOCALE(5667): 51: en_NZ LOCALE(5667): 52: uk_UA LOCALE(5667): 53: nl_BE LOCALE(5667): 54: de_DE 不同地区(5667): 54: 你好世界！你好世界！de_DE 区域（5667）：55：ka_GE 区域（5667）：56：sv_SE 区域（5667）：57：bg_BG 区域（5667）：58：de_CH 不同区域（5667）：58：你好世界！你好世界！de_CH LOCALE（5667）：59：fr_CH LOCALE（5667）：60：fi_FI

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-01T01:46:05.237

AssetManager.getLocales() 实际上就是这样做的方法。但是，从公共 API 中，您创建的每个 AssetManager 的搜索路径中也包含框架资源……因此，当您调用 AssetManager.getLocales() 时，您还将看到属于框架资源一部分的任何语言环境。抱歉，SDK 无法解决此问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-16T22:15:28.607

对于使用 Gradle 的任何人，我都是这样做的，它遍历 all `strings.xml`，获取目录名称并从那里找出语言环境。它添加了一个`String[]`您 `BuildConfig`可以访问的`BuildConfig.TRANSLATION_ARRAY`

```
task buildTranslationArray << {
    def foundLocales = new StringBuilder()
    foundLocales.append("new String[]{")

    fileTree("src/main/res").visit { FileVisitDetails details ->
        if(details.file.path.endsWith("strings.xml")){
            def languageCode = details.file.parent.tokenize('/').last().replaceAll('values-','').replaceAll('-r','-')
            languageCode = (languageCode == "values") ? "en" : languageCode;
            foundLocales.append("\"").append(languageCode).append("\"").append(",")
        }
    }

    foundLocales.append("}")
    //Don't forget to remove the trailing comma
    def foundLocalesString = foundLocales.toString().replaceAll(',}','}')
    android.defaultConfig.buildConfigField "String[]", "TRANSLATION_ARRAY", foundLocalesString

}
preBuild.dependsOn buildTranslationArray 
```

因此，在上述任务发生后（在预构建上），`BuildConfig.TRANSLATION_ARRAY`您的语言环境列表就会出现。

我不是 Gradle/Groovy 专家，所以这肯定会更整洁一些。

推理 - 我在实施 pawelzieba 的解决方案时遇到了太多问题，因为翻译是众包的，所以我没有可靠的字符串来“比较”。最简单的方法是实际查看可用的 values-blah 文件夹。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-25T15:22:08.647

受 Mendhak 解决方案的启发，我创建了一些更简洁的东西：

```
 defaultConfig {
        ....

        def locales = ["en", "it", "pl", "fr", "es", "de", "ru"]

        buildConfigField "String[]", "TRANSLATION_ARRAY", "new String[]{\""+locales.join("\",\"")+"\"}"
        resConfigs locales
    } 
```

然后在Java中使用：

```
BuildConfig.TRANSLATION_ARRAY 
```

这种方法的优点：

*   较小的 apk - resConfigs 将从您不需要的库中删除资源（有些有数百个）
*   快速 - 无需解析资源配置

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-15T10:00:51.747

受上述答案的启发，我创建了一个简单的方法来根据提供的翻译获取所有应用程序的语言：

```
public static Set<String> getAppLanguages( Context ctx, int id ) {
  DisplayMetrics dm = ctx.getResources().getDisplayMetrics();
  Configuration conf = ctx.getResources().getConfiguration();
  Locale originalLocale = conf.locale;
  conf.locale = Locale.ENGLISH;
  final String reference = new Resources( ctx.getAssets(), dm, conf ).getString( id );

  Set<String> result = new HashSet<>();
  result.add( Locale.ENGLISH.getLanguage() );

  for( String loc : ctx.getAssets().getLocales() ){
    if( loc.isEmpty() ) continue;
    Locale l = Build.VERSION.SDK_INT <= Build.VERSION_CODES.KITKAT_WATCH ? new Locale( loc.substring( 0, 2 ) ) : Locale.forLanguageTag( loc );
    conf.locale = l;
    if( !reference.equals( new Resources( ctx.getAssets(), dm, conf ).getString( id ) ) ) result.add( l.getLanguage() );
  }
  conf.locale = originalLocale;
  return result; 
} 
```

其中 as `id`arg 应该使用`R.string.some_message`所有翻译中都提供并包含清晰可辨的文本，例如`"Do you really want to delete the object?"`

也许它会帮助某人......

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-22T16:27:13.803

[`LocaleList`](https://developer.android.com/reference/android/os/LocaleList.html)或者[`LocaleListCompat`](https://developer.android.com/reference/kotlin/androidx/core/os/LocaleListCompat)是获得应用程序支持的语言的一种方式。

LocaleList 是在 API 24 中引入的。

使用 LocaleListCompat 时要考虑的事情是，对于 API < 24，只会使用第一个语言标签。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-23T10:53:01.067

这些 res-lang 实际上取决于语言环境，因此您需要从设备获取语言环境，并且可以从语言环境中获取显示的语言。

```
Locale myPhoneLocale = Locale.getDefault(); 
```

然后，您可以调用 getDisplayLanguage() 以了解正在显示哪种语言。

参考：[语言环境](http://developer.android.com/reference/java/util/Locale.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T10:52:14.700

你在说这个吗？

```
String language = Locale.getDefault().getDisplayLanguage(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-25T18:01:37.947

尝试调用[`AssetManager.getLocales()`](http://developer.android.com/reference/android/content/res/AssetManager.html#getLocales%28%29)：

> 获取此资产管理器包含数据的语言环境。

或者您可以尝试使用[`list()`](http://developer.android.com/reference/android/content/res/AssetManager.html#list%28java.lang.String%29).

> 返回给定路径中所有资产的字符串数组。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-18T12:11:12.177

受@Injecteer 的代码启发，我做了以下工作：

对于应用程序支持的语言列表，必须通过默认语言，因为无法检测到

```
public static Map<String,String> getAppLanguages(Context context, String appDefaultLang) {
    Map<String, String> listAppLocales = new LinkedHashMap<>();

    listAppLocales.put("default","Auto");

    DisplayMetrics metrics = new DisplayMetrics();
            Resources res = context.getResources();
    Configuration conf = res.getConfiguration();
    String[] listLocates = res.getAssets().getLocales();

    for (String locate : listLocates) {

        conf.locale = new Locale(locate);
        Resources res1 = new Resources(context.getAssets(), metrics, conf);
        String s1 = res1.getString(R.string.title_itinerary);
        String value = ucfirst(conf.locale.getDisplayName());

        conf.locale = new Locale("");
        Resources res2 = new Resources(context.getAssets(), metrics, conf);
        String s2 = res2.getString(R.string.title_itinerary);

        if (!s1.equals(s2)) {
            listAppLocales.put(locate, value);
        } else if (locate.equals(appDefaultLang)) {
            listAppLocales.put(locate, value);
        }
    }
    return listAppLocales;
} 
```

结果是`map<key,value>`应用程序支持的语言列表，第一件事是如果你想用来填充一个listPreference

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-07-26T00:37:32.527

你的意思是：

```
String[] locales = getAssets().getLocales(); 
```

这将使您获得设备所具有的语言。

# php - 在 PHP 中获取网页的最后加载/刷新时间

> ID：11611069
> 
> 赞同：1
> 
> 时间：2012-07-23T10:50:47.790
> 
> 标签：php, reload

我想知道实际网页已加载或刷新的时间。

我试过http请求，但没有这样的信息。

页面加载后，ajax 函数每 60 秒检查一次新消息。我只需要显示新的（页面加载后发布的）。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:03:25.563

时间戳每条消息。在您的 AJAX 函数中，发送您已有的最后一条消息的参数。只返回比那更新的消息。例如，您点击的 AJAX URL 可能类似于`/get_messages.php?newer_than=1343041382`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:13:23.903

假设您将消息发送的时间存储在数据库中，并将其存储为时间戳，您可以使用如下内容：

加载页面时，您可以将当前时间保存为：

```
$page_load_time = time(); 
```

然后只需使用 post 或 get 将 $page_load_time 发送到使用 AJAX 加载的文件，然后在使用 AJAX 加载的 PHP 文件中，您可以执行 SQL 查询来获取所有新消息。也许是这样的：

```
$sql = "SELECT * FROM `messages` WHERE `time` > '{$page_load_time}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:42:40.990

正如@DaveRandom 提到的：

> 您只需将 time() 的结果存储在 $_SESSION 中 - 例如 $_SESSION['lastPoll'] = time();。然后每次轮询服务器以获取新消息“SELECT * FROM messages WHERE message_time >”.$_SESSION['lastPoll']，并使用新的 time() 更新存储的值

# xamarin.android - apk 中包含的 mscorlib.dll 中缺少方法

> ID：11611074
> 
> 赞同：0
> 
> 时间：2012-07-23T10:51:04.907
> 
> 标签：xamarin.android

我在 Monodroid 中有一个混淆的应用程序，我的问题是 apk 中包含的 mscorlib 程序集没有实现方法 System.String.Intern() 并且我的应用程序不起作用。

我的混淆器调用此方法来混淆字符串，我得到一个 MissingMethodException。此方法在 apk 包含的程序集中不存在，但奇怪的是它确实存在于 myproject/obj/release/assemblies/mscorlib.dll

这些文件完全不同。如果我将文件 myproject/obj/release/assemblies/mscorlib.dll 放在 apk 中，它可以工作，但这个解决方案是一个糟糕的解决方案，因为应用程序在其他点失败，因为 dll 的变化导致 TypeLoadException。

谁能告诉我为什么 monodroid 使用 mscorlib 缩减文件和替代解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:56:34.357

> 谁能告诉我为什么 monodroid 使用 mscorlib 缩减文件和替代解决方案？

[较小的文件用于通过链接程序集](http://docs.xamarin.com/android/advanced_topics/linking)来减小应用程序的大小。链接可能很脆弱，因为链接器不跟踪运行时行为。例如， using`Type.GetType("Foo")`不会保留 type `Foo`，因此如果没有以其他方式引用它，链接器可能会删除它。

`obj\Release\assemblies\mscorlib.dll`是源程序集。`obj\Release\android/assets/mscorlib.dll`是链接的（较小的）程序集，它包含在`.apk`.

如果您的混淆器直接使用`String.Intern()`，这可能表明链接器中存在错误。但是，如果您的混淆器使用反射（例如`Type.GetMethod()`），那么这将是预期的行为。要修复它，您`String.Intern()` [在 falseflag 块](http://docs.xamarin.com/android/advanced_topics/linking#falseflag)中显式使用，以便保留该方法。

# java - 在 Java 中解决内存泄漏的方法

> ID：11611075
> 
> 赞同：0
> 
> 时间：2012-07-23T10:51:07.317
> 
> 标签：java

我正在构建一个大型导入脚本，该脚本使用来自我怀疑存在内存泄漏的单独代码库的功能。对于相同的操作，它调用代码库多达 10000 次，虽然第一次相对较快（2 秒），但脚本需要很长时间才能运行（超过 100 小时并且还在计数），到最后相同的任务完成到 60 秒或更长时间（并且仍在攀爬）。在发现并修复泄漏时解决此问题的最佳方法是什么？

一些经过头脑风暴的解决方案是：

创建一个运行部分脚本的进程，然后结束它，回收它使用的资源。

使用 shell 脚本多次启动程序，每次完成任务的子集，并将更新的数据输出到文件以供下一次迭代使用

编辑：更改了问题的表述方式，以明确导入和代码库是单独的程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:16:40.700

您知道，您提供的任何证据都没有明确指出存储泄漏。真正的问题可能是完全不同的东西，比如设计不佳的算法，或者调整不当的数据库表或查询。

假设这是存储泄漏并应用“创可贴”解决方案可能会浪费时间，或者实际上会使问题变得更糟。

您最好花时间预先确定真正的问题是什么并解决它，而不是尝试一系列变通办法......这可能是徒劳的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:44:58.143

我通过最小化包含对其他代码库的引用的范围来解决这个问题。基本上每次我初始化一个对象或从其他代码库调用一个函数时，我都会经历一些麻烦以确保它存在的时间尽可能短。通常将引用再次设置为 NULL 以确保删除所有引用。

最终效果很好，将时间从 150 多个小时减少到 30 小时以下。

# mysql - mySQL 查询错误选择？

> ID：11611076
> 
> 赞同：1
> 
> 时间：2012-07-23T10:51:14.843
> 
> 标签：mysql

尝试脚本时出现此错误。

```
mySQL query error: SELECT * FROM ibf_store_shopstock WHERE is_hidden='0' AND category=1 ORDER BY item_name ASC  LIMIT 0,

mySQL error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
mySQL error code: 
Date: Monday 23rd 2012f July 2012 05:37:44 PM` 
```

这很奇怪，因为我在本地主机（MySQL 5.5.14）上尝试的相同脚本工作得很好，但是当我在实时服务器（MySQL 5.1.63）上尝试时，它会导致这个错误。我以为MySQL版本之间没有太大区别？

无论如何这里是可疑脚本的一部分（它很长）： http: [//pastebin.com/YaQwVPqT](http://pastebin.com/YaQwVPqT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:55:38.593

我认为您在 LIMIT 子句之后遗漏了一些东西`"LIMIT start_record", "offset"`

尝试

```
SELECT * 
FROM   ibf_store_shopstock 
WHERE is_hidden='0' AND 
      category=1 
ORDER BY item_name ASC  
LIMIT 0, 10; 
```

# android - 如何禁用状态栏或通知栏但不禁用android中的标题栏？

> ID：11611080
> 
> 赞同：6
> 
> 时间：2012-07-23T10:51:25.177
> 
> 标签：android, notifications, statusbar, titlebar

我想在 android 中禁用状态栏或通知栏。我`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`用于禁用它，但它也使我的标题栏也禁用。我怎样才能只禁用状态栏？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T11:06:34.423

在 onCreate 函数中使用以下代码创建一个基本活动，并每次扩展该活动

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

或者

您可以在每个活动中使用上述代码，以使标题栏可见但状态栏不可见。

编辑：只要确保你没有在你的 Android 清单中定义任何主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:24:52.057

在清单中使用全屏主题，然后您可以定义一个单独的布局，其中包含您的标题，然后在应用程序的每个布局上使用 include 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:56:20.630

这是一个非常好的教程，可以帮助您完成工作。

[Android – 隐藏应用程序的状态和标题栏](http://www.vogella.com/blog/2011/02/28/android-hidding-the-status-and-title-bar/)

或者看看这个

如果您想隐藏它们，您可以通过代码或“AndroidManifest.xml”中的主题设置来实现。

要隐藏应用程序的标题栏，您可以使用预定义的样式 android:theme=”@android:style/Theme.NoTitleBar”。如果您还想隐藏应用程序的状态栏，请使用 android:theme=”@android:style/Theme.NoTitleBar.Fullscreen”。例如在我的 Android 开发教程中：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="de.vogella.android.temperature"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Convert"
                  android:label="@string/app_name"
                   android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
    <uses-sdk android:minSdkVersion="9" />

</manifest> 
```

这肯定会帮助你。

谢谢 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-18T08:54:25.183

1.  无标题栏无状态栏，显示全屏安卓（多用于游戏）

res->values->styles.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="AppBaseTheme" parent="android:Theme.NoTitleBar.Fullscreen">
        <!-- API 11 theme customizations can go here. -->
</style>

</resources> 
```

应用程序清单.xml：

```
:
:
<application android:label="@string/app_name"
                 android:icon="@drawable/ic_launcher"
                 android:theme="@style/AppBaseTheme" 
                 >
:
: 
```

结果：全屏没有标题栏和状态栏 ![在此处输入图像描述](../Images/b5cae0e61bb470b4787639528a8390ad.png)

2.  没有标题栏只显示电话状态栏相同的文件只是删除“.Fullscreen”

    res->values->styles.xml：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
    <style name="AppBaseTheme" parent="android:Theme.NoTitleBar">
            <!-- API 11 theme customizations can go here. -->
    </style>

    </resources> 
    ```

结果：它将仅显示状态栏而没有完整的标题栏 ![在此处输入图像描述](../Images/1156b4e38de7efbcb50c92cc2e4d866d.png)

3.  显示状态栏和标题栏

res->values->styles.xml：

```
 <style name="AppBaseTheme"> 
```

结果： ![在此处输入图像描述](../Images/92e51c3d9607a8a828b17c5370d27113.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-23T10:54:10.060

在清单文件中尝试这个：

```
 android:theme="@android:style/Theme.Black.NoTitleBar" 
```

# apache - mod_rewrite 不加载 css 和 js 文件

> ID：11611084
> 
> 赞同：5
> 
> 时间：2012-07-23T10:51:42.620
> 
> 标签：apache, mod-rewrite

我对 mod_rewrite 条件/规则有一个奇怪的问题。

这是我正在使用的条件和规则。

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ index.php?params=$1 [QSA,L] 
```

我的问题是如果我访问 www.example.com 和 www.example.com/page 它加载正常但是当我尝试加载 www.example.com/page/category 时它会加载页面但找不到 css 和 javascript。它尝试从 page/css 而不是 / 目录加载它们。

对我做错了什么有任何想法吗？我在这里进行了搜索并尝试了一些方法，例如添加

```
RewriteCond $1 !\.(js|ico|gif|jpg|png|css|html|swf|mp3|wav|txt)$ 
```

和

```
RewriteRule ^(images|css|javascript)(.*)$ index.php?params=$1 [QSA,L] 
```

但这似乎并没有太大的区别。

谢谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:53:55.737

问题是静默重写不会告诉访问者的网络浏览器他们实际上正在查看来自不同目录路径的页面。

因此，对 /page 的请求让浏览器（正确地）认为它正在查看 Web 服务器上顶级公共目录中的资源，图像和 CSS 文件也是如此。

但是对 /page/category 的请求会让浏览器（错误地）认为它正在查看位于名为 page 的子目录中的资源。因此，当浏览器发送对 CSS 和图像文件的请求时，它会要求服务器在 /page/ 子目录中查找它们，但实际上并不存在。因此，当浏览器尝试获取图像和 CSS 文件时，服务器会返回 404 代码。

解决此问题的一种方法是将 CSS、图像和其他页面引用资源的路径更改为绝对路径。以正斜杠开头，以便它们相对于实际的顶级公共目录锚定。如果您只有少量资源路径要更新，这可能是最好的方法。例如，更改：

```
src="image-name.png" 
```

进入

```
src="/image-name.png" 
```

这将强制浏览器使用绝对路径请求文件，而不是根据相对路径推断错误的位置。

要消除对 RewriteCond 的需求，您可以将 RewriteRule 更改为以下内容：

```
RewriteRule ^([a-z]+(?:/[a-z]+)*)$ index.php?params=$1 [QSA,L] 
```

这将不匹配包含句点（点）符号的任何内容，因此将跳过对图像和 CSS 文件的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T20:32:13.687

您是否考虑过仅使用[`base`元素](http://www.w3.org/html/wg/drafts/html/master/document-metadata.html#the-base-element)，并删除图像前的“/”？

# android - 是否需要绑定到已启动的本地服务？

> ID：11611085
> 
> 赞同：2
> 
> 时间：2012-07-23T10:51:56.970
> 
> 标签：android, service

我想使用已启动的（前台）服务来管理网络连接，当用户离开应用程序一小段时间时该网络连接应该持续存在，并且用户应该知道（这样他就可以返回应用程序并可能断开连接）。此服务将仅由同一流程中的活动在本地使用。

也许这只是因为我是 Android 新手，但我发现在每个使用它的活动中绑定到这个服务是不必要的困难 - 特别是绑定的异步性质，这似乎只有在以不同的方式访问服务时才真正需要过程。是否有任何迹象表明仅通过静态变量访问已启动的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:58:55.053

也许我理解你的问题是错误的，但没有必要绑定到`Service`从 every开始`Activity`。相反，您可以简单地从需要与之交互的任何地方开始*。*`Service`这调用`onStartCommand()`if`Service`已经启动。您可以包含一个额外的`Intent`开头，`Service`以区分第一次启动和后续启动。

当然 - 这解决了您不希望在活动之间使用客户端 - 服务器模式交互的用例`Service`- 该场景需要绑定，如果您确实需要绑定，那么您需要从需要绑定的每个组件中进行绑定由`Service`.

# c# - 实体框架和关系

> ID：11611094
> 
> 赞同：2
> 
> 时间：2012-07-23T10:52:17.113
> 
> 标签：c#, entity-framework, orm

我在 VS 2012 RC 上使用 EF 5 rc 并遇到了一些问题。很确定这与我在数据库和 EF 方面的知识有关，而不是我使用的软件的版本号 :)

所以，我有3节课。用户、角色和权利。

**用户类**

```
public class User
{
    [Key]
    public int UserId { get; private set; }

    [Required]
    public string EmailAddress { get; internal set; }

    [Required]
    public string Username { get; internal set; }

    public ICollection<Role> Roles { get; set; }

    // More properties 
} 
```

**正确的阶级**

```
public class Right
{
    public virtual int RightId { get; set; }
    public virtual string Description { get; set; }
} 
```

**角色类**

```
public class Role
{
    public virtual int RoleId { get; set; }
    public virtual string Description { get; set; }

    public virtual ICollection<Right> Rights { get; set; }
} 
```

**语境**

```
 class MyContext : DbContext
 {
    public virtual DbSet<User> Users { get; set; }
    public virtual DbSet<Role> Roles { get; set; }
    public virtual DbSet<Right> Rights { get; set; }
 } 
```

现在，我想给一个*用户添加**角色*，给一个*角色添加**权限*。但我也想确保可以添加相同的*Right*可以添加到不同的*角色*。

 ***```
 var role1 = new Role()
{
     Description = "role1"
};

var role2 = new Role()
{
    Description = "role2"
};

var right = new Right()
{
    Description = "right"
};

context.Rights.Add(right);
context.Roles.Add(role1);
context.Roles.Add(role2);

role1.Rights = new List<Right>();
role2.Rights = new List<Right>();
role1.Rights.Add(right);
role2.Rights.Add(right);

 /**** ERROR ****/
context.SaveChanges(); 
```

我越来越

> InvalidOperationException：违反多重性约束。关系“Role_Rights”的角色“Role_Rights_Source”具有多重性 1 或 0..1。

我究竟做错了什么 ？另外，我对创建一个新列表感觉不正确

```
 role1.Rights = new List<Right>();
 role2.Rights = new List<Right>(); 
```

推荐的方法是什么？权利属性为空。所以我不能在没有更新的情况下添加任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:09:56.277

拉迪斯拉夫的答案应该适用于该错误。

关于您对使用感到不舒服的问题：

```
role1.Rights = new List<Right>(); 
```

您应该在构造函数中将这些属性初始化为新列表，然后将为所有角色实例完成：

```
public class Role
{
    public virtual int RoleId { get; set; }
    public virtual string Description { get; set; }

    public virtual ICollection<Right> Rights { get; set; }

public Role ()
{
this.Rights =  new List<Right>();    
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:04:52.020

问题是 EF 用来推断关系的约定。它认为关系是一对多，但你想要多对多（角色可以有多个权限，并且权限可以在多个角色中使用）。

有两种选择可以解决这个问题：

**选项 1：在 Right 中创建导航属性：**

```
public class Right
{
    public virtual int RightId { get; set; }
    public virtual string Description { get; set; }

    public virtual ICollection<Role> Roles { get; set; }
} 
```

现在 EF 约定将检测关系两侧的集合并正确使用多对多多重性而不是一对多

**选项 2：使用 Fluent-API 告诉 EF 您需要多对多关系：**

```
public class MyContext : DbContext
{
    public virtual DbSet<User> Users { get; set; }
    public virtual DbSet<Role> Roles { get; set; }
    public virtual DbSet<Right> Rights { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Role>()
                    .HasMany(r => r.Rights)
                    .WithMany();
    }
} 
```

现在 EF 知道即使没有导航属性，`Right`也可以将 分配给多个角色。`Right``Role`

如果`Role`可以将其分配给多个用户，则还必须使用多对多关系***

# php - CakePHP - 生成图像链接的快速简单的方法？

> ID：11611097
> 
> 赞同：1
> 
> 时间：2012-07-23T10:52:20.147
> 
> 标签：php, cakephp

我正在为我的网站创建一个照片库，我打算使用 Lightbox。在使用 CakePHP 时，我可以自动创建与灯箱相关的图像链接吗？

是否有任何助手可以扫描我的图像目录，然后生成如下链接：-

```
<a href="images/1.jpg" rel="lightbox[plants]" title=""><img src="images/1t.jpg alt="Plants: image 1 of 4" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:49:11.850

上传图像文件时，最好将所有图像详细信息（如“title、alt_tag_msg、image_path”）保存到数据库中。然后，您可以直接从该表中获取图像详细信息，并使用 foreach 循环轻松完成。

# objective-c - 向 Mac 应用程序添加滚动的最简单方法

> ID：11611099
> 
> 赞同：0
> 
> 时间：2012-07-23T10:52:34.520
> 
> 标签：objective-c, xcode, macos, cocoa, scroll

有没有一种简单的方法可以将滚动添加到 NSwindow 的内容中？例如在此窗口上横向滚动以显示更多空间？

![窗户](../Images/e5df9d76b4bb5b3060d062d5b2439cee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:05:40.457

这很容易使用`NSScrollView`. 在 Interface Builder 中，只需将滚动视图拖到您的窗口中。然后你可以在`NSScrollView`'s 视图中嵌入任何你想要的内容。在 Interface Builder 的滚动视图的属性检查器中，您可以设置是否需要水平和/或垂直滚动​​条。

# video - 如何在iOS中使用pjsip2.0实现视频通话

> ID：11611103
> 
> 赞同：1
> 
> 时间：2012-07-23T10:52:44.163
> 
> 标签：video, ios4, sip, pjsip

我们想使用 pjsip 2.0 在 iOS 中实现视频通话。我们知道 pjsip 2.0 在 iOS 中不支持视频通话。因此，我们计划使用 iOS 原生 API 实现整个视频通话显示。

我想知道这可能吗？pjsip 是否会给我们视频数据，以便我们可以将其直接传递给 iOS 原生视频 API。我们还需要做些什么来集成音频。

有没有相同的链接？

任何线索都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T03:44:31.287

[虹吸](http://code.google.com/p/siphon/)已经做到了，你可以在[这里](http://code.google.com/p/siphon/wiki/VIdeoSupport)找到他的说明。它缺少位，因此您必须自己想出缺少的位。

你基本上需要两个主要的代码位：

1.  输入 pjsip 视频 io 管道的视频捕获代码。
2.  显示来自 pjsip 的视频源的显示代码。

# asterisk - 无法检测 confBridge 10 中的通话事件

> ID：11611106
> 
> 赞同：0
> 
> 时间：2012-07-23T10:52:59.397
> 
> 标签：asterisk

我在我的星号中使用 confBridge 进行会议。我想检测会议内谁在说话，谁不在说话。为此，confBridge 中有一个选项“talk_detection_events=yes”，它将谈话事件发送到 AMI，但它只在用户加入会议时发送谈话事件，之后我无法在 AMI 中看到任何事件。我希望每当用户开始说话或停止说话时，AMI 中都会触发一个事件。

或者，是否有任何命令可以检测用户是否在 confbridge 中说话？

另外，我想检测 confbridge 中的按键（dtmf）事件。有一个选项“dtmf_passthrough=yes”将 dtmf 事件传递给 AMI，但是当用户在会议中按下任何键时，我没有看到任何事件。

请帮我设置这些。

问候阿尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:17:52.607

**谈话检测：**

虽然设置 talk_detection_events=yes 将启用发送 AMI 事件，表示用户何时开始/结束谈话，但这可能不足以配置您的 ConfBridge，具体取决于其他几个因素。

用户是否被确定为“说话”取决于 dsp_talking_threshold 和 dsp_silence_threshold 设置的组合。如果您没有收到预期的谈话检测事件，那么您可能需要调整这些设置以匹配 ConfBridge 从其参与者接收的音频属性。

或者，您应该确保您的 AMI 帐户具有足够的类权限来接收谈话检测事件。该事件具有 EVENT_FLAG_CALL 类权限，您应该正在监听事件 ConfbridgeTalking。

**双音多频**

dtmf_passthrough 与 DTMF AMI 事件的实际引发无关，这是由通道读/写例程完成的。dtmf_passthrough 允许将 DTMF 按键发送到网桥中的其他通道 - 通常，ConfBridge 应用程序会吸收 DTMF 按键。

启用此功能后，您应该至少可以在桥接通道上看到 DTMF 事件。如果您没有看到任何类型的事件，您很可能没有在 AMI 帐户上设置适当的类权限。

说了这么多，我想知道你为什么要寻找 DTMF 按键。通常，ConfBridge 中的通道操作应该使用 ConfBridge 中实现的菜单系统或使用 AMI/CLI 命令进行。当频道仍在会议桥中时，您将很难准确拦截和处理频道的 DTMF - 此时频道归桥接层所有，您选择对该频道执行的任何操作几乎可以肯定不安全。

# jdbc - DB2 JDBC 消息

> ID：11611113
> 
> 赞同：1
> 
> 时间：2012-07-23T10:53:21.813
> 
> 标签：jdbc, db2, message

我在我的 Java 应用程序中使用 DB2。我在机器上设置的语言是斯洛文尼亚语。我在我的程序中遇到的例外是斯洛文尼亚语。有没有办法设置我想要获得例外的语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:41:53.703

更改正在执行命令的用户的区域设置将更改异常的语言。

更好的方法是更改​​ db2 安装，并删除除英语以外的任何其他语言 || 或者以仅使用英语作为语言的高级模式重新安装 db2。

我说西班牙语，翻译有点可怕，像表空间或缓冲池这样的词被翻​​译成没有人理解消息的方式。

# iphone - iPhone - 设置 UIImage 位置

> ID：11611115
> 
> 赞同：2
> 
> 时间：2012-07-23T10:53:34.590
> 
> 标签：iphone, objective-c, xcode, image

我想要一个每次按下按钮时都会移动的图像。它应该每次移动一组像素值。

我希望 image1 现在有一个位置属性，但据我所见，它没有。

```
 UIImageView *image1=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"indicator"]];
  [self.view addSubview:image1];
... 
```

谢谢

编辑：`UIImageView *image1=[[UIImageView alloc]...`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T11:14:42.657

正如其他两个答案所述，您可以使用框架（或 CGRect）设置 UIImageView 的初始位置。请注意，CGRectMake 的参数是；x 位置，y 位置，x 尺寸，y 尺寸。

```
UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 100, 100)];
[imgView setImage:[UIImage imageNamed:"image.png"]]; 
```

要在每次按下按钮时移动图像，每次按下按钮时都需要更新帧。但是，框架的 x 和 y 坐标是只读的，因此您需要像这样创建一个新框架：

```
CGRect oldFrame = imgView.frame;
CGRect newFrame = CGRectMake(oldFrame.origin.x + 10, oldFrame.origin.y, oldFrame.size.width, oldFrame.size.height);
imgView.frame = newFrame; 
```

请注意，此代码将图像向右移动 10 个点（沿 x 轴）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T10:57:06.283

你需要一个 imageview 来显示一个 UIImage。

```
UIImage *image1=[UIImage imageNamed:@"indicator.png"];

UIImageView *iv = [[UIImageView alloc] initWithFrame:CGRectMake(10,10,100,100)];
iv.image = image1;
[self.view addSubView:iv];
[image1 release];
[iv release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:01:53.267

您可以设置 UIImageView 的框架：

```
UIImageView* imgv= [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 120, 120)];
imgv.image = [UIImage imageNamed:@"image.png"]; 
```

在这里，您必须通过反复试验来设置框架的位置。

# java - 在 Java 反射中动态返回 ArrayList 对象

> ID：11611120
> 
> 赞同：-1
> 
> 时间：2012-07-23T10:54:05.850
> 
> 标签：java, reflection, arraylist

我需要有关 Java 反射的帮助。根据附加的代码，我不确定如何在 buildPersonDynamically 方法中动态返回类对象的 ArrayList。逻辑类似于 buildPerson 方法。请参考 MyMain.java。

```
package reflection;

import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.util.ArrayList;
import reflection.builder.PersonBuilder;
import reflection.one.two.three.Person;

public class MyMain {
public static void main(String[] args) {                
    buildPerson(3);
    buildPersonDynamically(3);
}   
static void buildPerson(int total) {
    PersonBuilder pb = new PersonBuilder();

    pb.build(3);
    ArrayList<Person> per = pb.getDataSet();
    System.out.println(per.get(1).FirstName);
}   
static void buildPersonDynamically(int total) {
    try {
        Class<?> c = java.lang.Class.forName("reflection.builder.PersonBuilder");
        Object obj = c.newInstance();            

        Class<Integer> partypes = Integer.TYPE;
        Method m1 = c.getMethod("build", partypes);
        m1.invoke(obj, total);

        Method m2 = c.getMethod("getFirstName", partypes);
        Object objStr = m2.invoke(obj, 2);
        System.out.println(objStr.toString()); // success

        Method m3 = c.getMethod("getDataSet");

        // Not sure how to get an ArrayList of Person dataSet dynamically.
        // Example, want to get the FirstName from the m3.

    }
    catch (Throwable e) {
        System.err.println(e);
    }
}
}

package reflection.builder;
import java.util.ArrayList;
import reflection.one.two.three.Person;

public class PersonBuilder {
private ArrayList<Person> dataSet;

public ArrayList<Person> getDataSet() {
    return dataSet;
}

public ArrayList<Person> build(int numberOfRecords) {
    ArrayList<String> firstName = new ArrayList<String>();
    ArrayList<String> lastName = new ArrayList<String>();
    ArrayList<Integer> age = new ArrayList<Integer>();
    ArrayList<String> emailAddress = new ArrayList<String>();

    Person per;

    this.dataSet = new ArrayList<Person>();

    firstName.add("Barrack");
    firstName.add("John");
    firstName.add("Whitney");
    firstName.add("Paris");
    firstName.add("Britney");

    lastName.add("Obama");
    lastName.add("Lennon");
    lastName.add("Houston");
    lastName.add("Hilton");
    lastName.add("Spears");

    age.add(47);
    age.add(60);
    age.add(48);
    age.add(32);
    age.add(25);

    emailAddress.add("barrack.obama@gmail.com");
    emailAddress.add("john.lennon@gmail.com");
    emailAddress.add("whitney.houston@gmail.com");
    emailAddress.add("paris.hilton@gmail.com");
    emailAddress.add("britney.spears@gmail.com");

    if (numberOfRecords >= 5) numberOfRecords = 5;
    for (int i=0; i < numberOfRecords; i++) {
        per = new Person();
        per.FirstName = firstName.get(i);
        per.LastName = lastName.get(i);
        per.Age = age.get(i);
        per.EmailAddress = emailAddress.get(i);

        this.dataSet.add(per);
    }   
    return this.dataSet;
}

public String getFirstName(int a) {
    return this.dataSet.get(a).FirstName;
}
}

package reflection.one.two.three;

public class Person {
public String FirstName;
public String LastName;
public int Age;
public String EmailAddress;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:05:23.680

这应该有效：

```
Method m3 = c.getMethod("getDataSet");
ArrayList<Person> per = (ArrayList<Person>) m3.invoke(obj, null); 
```

该方法的`null`参数`invoke`表明没有参数要传递给该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:02:49.517

如果您确定 a`ArrayList`已生成，您可以直接转换它。

```
Method m3 = c.getMethod("getDataSet");
Object resultM3 = m3.invoke(obj);
ArrayList<Person> resultListM3 = (ArrayList<Person>) resultM3; 
```

# c# - 布尔值始终仅输出为 True

> ID：11611124
> 
> 赞同：0
> 
> 时间：2012-07-23T10:54:19.353
> 
> 标签：c#, .net

我有以下代码片段，其中我通过方法声明中的参数`True`或`False`通过参数传递值。`PropertyValue`

```
public void SetTaskInstance(String PropertyName, String PropertyValue, int row)
{
    bool bValue;
    try
    {
        PropertyName = PropertyName.ToUpper();
        switch (PropertyName)
        {
            case "BYPASSRULESENGINE":
                m_tInstance.byPassRulesEngine =            
                   System.Boolean.TryParse(PropertyValue.ToString(), out bValue);
                break;
        }
        Console.WriteLine("Invoking method");
    }
} 
```

如果我通过`True`，则`True`输出。但是，如果我通过`False`，参数`False`会通过代码传递，但是一旦达到 break 语句并且当我将鼠标悬停在 上时`m_tInstance.ByPassRulesEngine`，我看到 bool 值`True`几乎变得神奇。为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T10:56:57.610

TryParse 的返回值指示解析是否成功。当然，值“false”或“False”是有效的，所以 TryParse 会返回 true。解析值本身被写入`out bValue`参数。

换行

```
m_tInstance.byPassRulesEngine = System.Boolean.TryParse(PropertyValue.ToString(), out bValue); 
```

到

```
bool parseSuccessful = System.Boolean.TryParse(PropertyValue.ToString(), out bValue);
if (parseSuccessful)
{
    m_tInstance.byPassRulesEngine = bValue;
} 
```

所有 TryParse 方法都以这种方式运行。所以在这里阅读 MSDN 上的 TryParse 的文档：http: [//msdn.microsoft.com/en-us/library/system.boolean.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.boolean.tryparse.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:59:26.747

查看[msdn](http://msdn.microsoft.com/en-us/library/system.boolean.tryparse.aspx) 转换的结果存储在 Output 变量中（您的`bValue`）

> 当此方法返回时，如果转换成功，如果 value 等效于 Boolean.TrueString，则包含 true，如果 value 等效于 FalseString，则包含 false。如果转换失败，则包含 false。如果 value 为 null 或不等于 TrueString 或 FalseString 字段的值，则转换失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:06:49.477

让我解释一下为什么你总是收到一个真实的价值：

`System.Boolean.TryParse`如果函数可以成功地进行从字符串到布尔值的转换，则该函数返回 true。

因此，在您的示例中，它始终是正确的。

Carsten Schütte 已经给出了解决方案代码。

# java - 使用 java 代码或开源工具制作视频？

> ID：11611126
> 
> 赞同：0
> 
> 时间：2012-07-23T10:54:41.027
> 
> 标签：java, video-streaming, video-capture

我有一个通过打开特定网站来执行测试用例的脚本，让我通过以下示例来说明这一点-：

1.  我的脚本打开网页 www.google.com

2.  在搜索框中输入一些文本

3.  按下按钮搜索

4.  然后单击搜索页面上的第一个链接。

问题是我需要对整个过程进行实时截屏，即需要捕获所有动作，这里我不是在说屏幕截图，我需要将这个过程集成到我的项目中，谁能给我一些建议工具或将我指向任何对我有用的 java 库。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:50:52.673

您可以使用免费软件[CamStudio](http://camstudio.org/) - 用于记录计算机上所有屏幕和音频活动的工具。您可以录制*Streaming Flash*格式的视频或制作 AVI 文件。

# java - 在正则表达式方面需要帮助

> ID：11611129
> 
> 赞同：-2
> 
> 时间：2012-07-23T10:54:51.220
> 
> 标签：java, regex

我正在检查需要输入的 JTextfield

```
RD-AK+++++++ Or EX-AK+++++++ 
```

它共有 12 个字符`RD-AK or EX-AK`作为字母数字字符串的开头。

请帮助我使用正则表达式来检查这两个条件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:00:05.130

也许

```
input.matches("(RD|EX)-AK\\w{7}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:01:17.293

这将匹配以任意七个字符开头`RD-AK`或`EX-AK`后跟任意七个字符的字符串。

```
/^(?:RD-AK|EX-AK).{7}$/ 
```

当您缩小“字母数字字符串”的定义时，可以改进“匹配所有”组。比如说，您的意思是数字 (0-9) 和非特殊字母 (az)，您可以尝试：

```
/^(?:RD-AK|EX-AK)[a-zA-Z0-9]{7}$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:03:35.633

(RD|EX)-AK[A-Za-z0-9]{7} 这就是你想要的吗？在这里测试它[http://www.regexpal.com/](http://www.regexpal.com/)

# iphone - iPhone 中的 PopViewController 是如何工作的？

> ID：11611130
> 
> 赞同：-1
> 
> 时间：2012-07-23T10:54:58.177
> 
> 标签：iphone

我想要关于 popToViewController 的知识。我是一个使用基于导航的应用程序，在每个视图中我都使用 2 UIButton 作为前进和后退视图。我正在使用 pushViewController 移动下一个视图，作为一个孔程序，我使用 4 个视图序列 A、B、C、D。当我单击 A 视图中的前进按钮时，它会推送到下一个视图（表示 B）。再次他们的前进按钮，我再次单击该前进按钮，它移动到 C 视图。但是当我单击后退按钮时，我想移回 B 视图并再次在 B 视图中移回 A 视图。

请有人帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:19:51.307

我相信您已经在 AppDelegate 中声明了导航控制器并将导航控制器设置为根视图控制器。以防万一您还没有假设您从单个视图应用程序开始。

appdelegate.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
ViewController *objViewController;

UINavigationController *objectNavigationController;
} 
```

n .m 文件

```
objViewController =[[HomeViewController alloc]initWithNibName:@"ViewController" bundle:nil];
objectNavigationController = [[UINavigationController alloc]initWithRootViewController:objViewController];
self.window.rootViewController=objectNavigationController; 
```

只需为按钮操作提供与此类似的代码，它就会导航到下一个视图控制器

```
-(IBAction)buttonClick:(id)sender

{
secondViewController *newObj = [[secondViewController alloc]initWithNibName:@"secondViewController" bundle:nil];
[self.navigationController pushViewController:newObj animated:YES]; 
```

}

n 至于导航到上一页的按钮，导航控制器提供了一个按钮，其作用类似于后退按钮。

如果你真的想用一个按钮弹出

```
-(IBAction)popBack:(id)sender
{
[self.navigationController popViewControllerAnimated:YES];
} 
```

这会做:)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:02:10.713

这是 iPhone 中 popover 的开源实现。

[http://mobiledevelopertips.com/open-source/ios-open-source-popover-api-for-iphone-wepopover.html](http://mobiledevelopertips.com/open-source/ios-open-source-popover-api-for-iphone-wepopover.html)

代码@github [https://github.com/PaulSolt/WEPopover](https://github.com/PaulSolt/WEPopover)

# iphone - 为什么页面控制点从一页变为下一页

> ID：11611131
> 
> 赞同：1
> 
> 时间：2012-07-23T10:54:59.360
> 
> 标签：iphone, ios, uiscrollview, uiimage, uipagecontrol

我正在开发一个 ipad 应用程序，在该应用程序中，我们在滚动视图上显示大量图像，并且我在底部添加了页面控件，当我们将图像从一页滚动到下一页时，它滚动得很好，但我没有不知道为什么页面控制点需要时间从一个点更改为另一个点，即当我从一页滚动到下一页时页面立即到达下一页但页面控制点需要一些时间任何人请告诉我为什么会这样，非常感谢任何帮助。我在 ScrollViewDidScroll 上的代码是-

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {

    Paddle8Singleton *paddle8Singleton = [Paddle8Singleton sharedMaster];       
    CGFloat pageWidth = sender.frame.size.width;
    DebugLog(@"current offsetX %f and cus offset %f",sender.contentOffset.x,sender.frame.size.width*currIndex);
    int page;
    if ([paddle8Singleton.selectedFilteredArtistDetailsDict count]>2) {

        page = floor((sender.frame.size.width*currIndex - pageWidth / 2) / pageWidth) + 1;
    }
    else{
        page = floor((sender.contentOffset.x - pageWidth / 2) / pageWidth) + 1;                
    }

    if([self ShowAlternateImageButtonForCurrentArtwork:page]&& barsHidden)
    {
        secondaryImageButton.userInteractionEnabled = YES;
        secondaryImageButton.hidden = NO;
        [self.view bringSubviewToFront:secondaryImageButton];
    }
    else
    {
        secondaryImageButton.userInteractionEnabled = NO;
        secondaryImageButton.hidden = YES;
    }

    pageControll.currentPage = page;
    self.selectedImageIndex = page;
    [self updateInfoView:page];
} 
```

谢谢：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:08:26.387

你不应该与发件人做。

```
CGFloat pageWidth = self.yourview.frame.size.width;
int page = floor((self.yourview.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
self.pageControl.currentPage = page; 
```

# database - 持续交付中的生产数据迁移模式

> ID：11611133
> 
> 赞同：11
> 
> 时间：2012-07-23T10:55:07.220
> 
> 标签：database, postgresql, continuous-deployment, flyway

持续交付中的生产关系数据库（和模式）迁移模式是什么？

在许多传统开发中，DBA 从当前发布周期中创建的许多较小脚本中安排了一个大迁移脚本。但是在 CD 中，开发人员可能希望现在将更改推送到生产环境，而不是等待与其他脚本一起编译它们。

我知道 rails-migration 但对我来说使用原始 sql 脚本看起来更合理。

我还看到过像[flyway](http://flywaydb.org/)这样的工具来管理迁移，但我还没有看到很多人在生产中使用它们。这就是为什么我想知道这里的常见做法是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T11:21:04.520

Flyway 非常适合持续交付/部署。许多客户在包括生产在内的所有环境中使用它。

跨环境级联数据库迁移最重要的一点是有一个 3 步过程：

**步骤1**

旧应用程序代码与旧数据库一起工作。

**第2步**

部署新的应用程序代码，并在启动时迁移数据库。此迁移必须向后兼容，以便旧应用程序代码仍可与新数据库一起使用。这是必不可少的，因为：

*   然后您可以进行滚动升级，一次升级一个节点，直到所有节点都有新的应用程序代码
*   如果新应用程序代码损坏，立即回滚到旧应用程序代码

此步骤可能涉及兼容性视图和触发器来完成这项工作。

**第 3 步**

在证明更改有效后，下一个版本的应用程序代码将与必要的数据库迁移一起部署，以丢弃任何剩余的过时（来自步骤 1）和兼容性（来自步骤 2）结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-29T20:23:22.653

将您的数据库更改为单个（原始）sql 文件，然后使用[sqlpatch](https://github.com/LuvDaSun/sqlpatch)构建迁移脚本。

我通常有一个单独用于数据库的 git 存储库和一个附加的 cd 环境。我通常有一个生产数据库和一个开发数据库，​​当我推送到相应的分支时会自动迁移它们。

这种设置使得为功能分支设置另一个数据库并对其进行试验非常容易。Sqlpatch 负责处理单独的 sql 文件中的所有依赖项，以便我可以轻松地将功能分支合并到另一个分支中。

# php - 如果文件存在 Javascript

> ID：11611134
> 
> 赞同：0
> 
> 时间：2012-07-23T10:55:07.990
> 
> 标签：php, javascript

有人能看出这有什么问题吗？当图像不在这里时，它会停止图像更改，但它不会一直更改图像！

干杯，肖恩

```
var myFile = "/_images/multi/" + productCode + "/" + imgCodeAlt + "_l.jpg";
if (myFile.exists()) {
    $("#imgMain img").attr({
        rel: 'lightbox',
        src: "/_images/multi/" + productCode + "/" + imgCodeAlt + "_l.jpg"
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:08:14.300

如果您`exists`这样定义，您的代码将起作用：

```
String.prototype.exists = function() {
    var a = new XMLHttpRequest;
    a.open( "GET", this+"", false );
    a.send( null );
    return a.status === 200;
};

"/".exists() //true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:58:26.780

我认为javascript中没有exists函数可以检查某个位置是否存在文件。如果您真的想检查文件是否存在，那么您可以在 js 中执行此操作的唯一方法是使用 ajax。检查这篇文章[如何检查文件是否存在于 jQuery 或 JavaScript 中？](https://stackoverflow.com/questions/3646914/how-do-i-check-if-file-exists-in-jquery-or-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T10:57:46.220

由于 Javascript 是客户端语言，因此您无法检查 Javascript 中存在的文件。

您可以尝试对该文件的 ajax 请求，如果它返回 404 状态代码，则该文件不存在 - 虽然看起来很乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T10:58:52.767

是`exists()`为了什么？如果您尝试从 JavaScript 检查文件是否存在，那么在 JS 中使用该方法将无法正常工作。

如果您需要验证文件是否存在，我建议使用 AJAX 调用。

# android - android从数组列表中列出元素

> ID：11611135
> 
> 赞同：0
> 
> 时间：2012-07-23T10:55:12.557
> 
> 标签：android, list, filter

我有以下列表：

```
List<String> item = new ArrayList<String>(); 
```

它包含一个带有水果的列表。如何过滤`first 1 or 2 or three characters`来自元素（`startsWith()`）之后的列表并在过滤后显示列表中的第一个元素？

有人可以给我一个例子吗？

欣赏！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:58:58.237

你可以用`collection`这个

```
 Collections.sort(item, new Comparator<String>() {
    @Override
    public int compare(String s1, String s2) {
        return s1.compareToIgnoreCase(s2);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:00:36.450

在这里你正在寻找什么。

[如何在 Android 上制作漂亮的 ListView 过滤器](https://stackoverflow.com/questions/1737009/how-to-make-a-nice-looking-listview-filter-on-android)

[Android 自定义 ListView 过滤](http://jondavidjohn.com/blog/2011/08/android-custom-listview-filtering)

或者

这可以帮助你。

1.  添加`TextWatcher`到`EditText#addTextChangedListener`
2.  在您的适配器中`onTextChanged`添加或删除项目。`ListView`

如果您是子类化`ArrayAdapter`，它将具有添加和删除方法。

这肯定会帮助你。

# jquery - JQUERY 2 组带标签的单选按钮 - 隐藏的单选按钮 - 1 个选中 1 个未选中

> ID：11611136
> 
> 赞同：1
> 
> 时间：2012-07-23T10:55:15.107
> 
> 标签：jquery, radio-button, hidden-field, labels

我有两组单选按钮。这个想法是使用标签图像并隐藏单选按钮。当您单击图像时，应选择单选按钮。它适用于第一组，但不适用于第二组。我注释掉了隐藏单选按钮的 css，因此您可以看到，当您单击标签时，第二组中的单选按钮不会像在第一组中那样被选中。

这是我的代码：

[http://jsfiddle.net/flaming_nonsense/rSBPJ/](http://jsfiddle.net/flaming_nonsense/rSBPJ/)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:10:43.523

标记是罪魁祸首：

*   ID 必须是唯一的
*   单选组必须具有唯一`name`属性

```
 <div id="sites2">
    <input type="radio" name="site2" id="so2" value="stackoverflow" /><label for="so2"><img src="http://sstatic.net/stackoverflow/img/favicon.ico" alt="Stack Overflow" /></label>
    <input type="radio" name="site2" id="sf2" value="serverfault" /><label for="sf2"><img src="http://sstatic.net/serverfault/img/favicon.ico"alt="Server Fault" /></label>
    <input type="radio" name="site2" id="su2" value="superuser" /><label for="su2"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label>
</div> 
```

[http://jsfiddle.net/rSBPJ/2/](http://jsfiddle.net/rSBPJ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:11:19.037

元素的 ID 应该是唯一的。所以改变你的HTML如下

请参阅以下链接[http://jsfiddle.net/bCLJZ/](http://jsfiddle.net/bCLJZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:12:37.820

问题是您为第二组的无线电输入提供了与第一组的无线电输入相同的 id。

您必须为第二组中的无线电输入提供不同的 ID。

# jpa - OneToMany 注释引发的异常

> ID：11611137
> 
> 赞同：1
> 
> 时间：2012-07-23T10:55:16.337
> 
> 标签：jpa, playframework, ebean

在我使用 EBean ORM 的 Play 2.0 应用程序中，我有以下类：

```
@Entity
public class User extends Model {

    @Id
    public Long id;

    @Constraints.Required
    public String someString;

    @OneToMany(mappedBy="user", cascade=CascadeType.REMOVE)
    @OrderBy("index")
    public List<UserImage> userImages = new ArrayList<UserImage>();
} 
```

除非我完全注释掉该`@OneToMany`行，否则应用程序会抛出一个`RunTimeException`声明

> 读取模型注释时出错。用户

我在这里引用的`UserImage`类如下所示：

```
public class UserImage extends Model {
    @Id
    public long id;

    @Constraints.Min(0)
    public int index;

    @Column(name="user_id")
    @ManyToOne
    public User user;

    //...
} 
```

我在这里做错了什么？为什么 EBean 不理解我的注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:35:46.530

我认为您错过了以下`@Entity`注释`UserImage class`：

```
@Entity
public class UserImage extends Model {
    @Id
    public long id;

    @Constraints.Min(0)
    public int index;

    @Column(name="user_id")
    @ManyToOne
    public User user;

    //...
} 
```

# c# - 如何在 XNA 中更改图像的颜色

> ID：11611138
> 
> 赞同：1
> 
> 时间：2012-07-23T10:55:17.007
> 
> 标签：c#, .net, xna

我有一个包含半透明白色图像的 Texture2D ......我想知道如何以编程方式将其更改为半透明绿色。

任何帮助将非常感激。j3d

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:00:28.873

当你[绘制](http://msdn.microsoft.com/en-us/library/ff433991.aspx)它时，你可以指定一种颜色：

```
batch.Draw(texture, Vector2.Zero, Color.Green); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:18:06.960

这是关于什么的：

```
batch.Draw(texture, myVector, Color.Green * 0.5f); //The float indicates the transparency of the green color 
```

# python - 使用外部文件为字典键定义值列表

> ID：11611140
> 
> 赞同：1
> 
> 时间：2012-07-23T10:55:24.960
> 
> 标签：python, dictionary

我有一个包含配对条目（键）列表的文件，如下所示：

```
6416    2318
84665   88
90  2339
2624    5371
6118    6774 
```

我还有另一个文件，其中包含这些键的值：

```
266743  Q8IUM7
64343   H7BXU6
64343   Q9H6S1
64343   C9JB40
23301   Q8NDI1
23301   A8K930 
```

如您所见，同一个键可以有多个值。我想要做的是通过自动创建初始 k、v 对来创建字典，然后为字典中已经存在的每个条目附加更多值，如下所示：

程序找到`"266743: 'Q8IUM7'"`，然后`"64343: 'H7BXU6'"`。当它找到`"64343: 'Q9H6S1'"`它时，它会这样做：`"64343: ['H7BXU6', 'Q9H6S1']"`.

这是我到目前为止所拥有的：

```
# Create dictionary
    data = {}

    for line in inmap:
        value = []
        k, v = [x.strip() for x in line.split('\t')]
        data[k] = value.append(v)
        if k in data.viewkeys() == True and v in data.viewvalues() == False:
            data[k] = value.append(v) 
```

但是 if 语句似乎不起作用。那或`value = []`在for循环内部。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:59:33.103

这不是一个好主意。您应该从一开始就使用一个列表并随着您的前进而扩展该列表，而不是在为键找到多个值时从“字符串”更改为“字符串列表”。

为此，您可以简单地使用

```
from collections import defaultdict
data = defaultdict(list)
for line in inmap:
    k, v = (x.strip() for x in line.split('\t'))
    data[k].append(v) 
```

这是有效的，因为当您尝试引用尚不存在的键时[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)，类型会自动创建一个键和一个空列表作为其值。`list`否则，它的行为就像普通字典一样。

结果：

```
>>> data
defaultdict(<type 'list'>, {'23301': ['Q8NDI1', 'A8K930'], 
'64343': ['H7BXU6', 'Q9H6S1', 'C9JB40'], '266743': ['Q8IUM7']}) 
```

# java - 休眠：索引描述符在 SQL Server 2008 上无效

> ID：11611142
> 
> 赞同：0
> 
> 时间：2012-07-23T10:55:31.873
> 
> 标签：java, sql-server, hibernate

我有两个表格，文件和修订。一份文件可能有多个修订版，而一份修订版只有一份文件。当我尝试从文档中检索版本时，出现异常（请参阅附加的完整堆栈跟踪）。

如果我检索版本它可以工作，我可以获得它的相关文档。问题在于获得一组修订的文档。

在 MySQL 上试过，效果很好。感谢您的帮助，请参阅随附的所有相关信息：

**数据库配置**：

```
CREATE TABLE [dbo].[DOCUMENTS](
    [ID_DOCUMENT] [int] NOT NULL,
    [NAME] [varchar](255) NULL)
) ON [PRIMARY]

CREATE TABLE [dbo].[VERSIONS](
    [ID_VERSION] [int] NOT NULL,
    [ID_DOCUMENT] [int] NOT NULL
) ON [PRIMARY] 
```

**休眠配置文件**

休眠.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">sun.jdbc.odbc.JdbcOdbcDriver</property>
        <property name="hibernate.connection.url">jdbc:odbc:documental</property
        <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
        <mapping resource="mappings/Document.hbm.xml"/>
        <mapping resource="mappings/Version.hbm.xml"/>
    </session-factory>
</hibernate-configuration> 
```

文档.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="entities.Document" table="DOCUMENTS">
        <id name="idDocument" type="java.lang.Integer" column="ID_DOCUMENT">
            <generator class="increment"/>
        </id>
        <set name="versions" table="VERSIONS" inverse="true">
            <key column="ID_DOCUMENT" />
            <one-to-many class="entities.Version" />
        </set>
    </class>
</hibernate-mapping> 
```

版本.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="entities.Version" table="VERSIONS">
        <id name="idVersion" type="java.lang.Integer" column="ID_VERSION">
            <generator class="increment"/>
        </id>
        <many-to-one name="document" class="entities.Document" fetch="select">
            <column name="ID_DOCUMENT" />
        </many-to-one>
    </class>
</hibernate-mapping> 
```

**Java 类**

文档.java

```
public class Document implements Serializable {
    private java.lang.Integer idDocument;
    private Set<Version> versions;

    public Document(){}

    //Autogenerated getters and setters
} 
```

版本.java

```
public class Version implements Serializable {
    private java.lang.Integer idVersion;
    private Document document;

    public Version(){}

    //Autogenerated getters and setters
} 
```

**完整的堆栈跟踪**

```
>Exception occurred in target VM: could not initialize a collection: [entities.Document.versions#1] 
org.hibernate.exception.GenericJDBCException: could not initialize a collection: [entities.Document.versions#1]
at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at org.hibernate.loader.Loader.loadCollection(Loader.java:2001)
at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:36)
at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:565)
at org.hibernate.event.def.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:60)
at org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1716)
at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:344)
at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:86)
at org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:109)
at org.hibernate.collection.PersistentSet.size(PersistentSet.java:139)
at servlets.LoginAction.execute(LoginAction.java:33)
at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)
at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1805)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)

Caused by: java.sql.SQLException: [Microsoft][ODBC SQL Server Driver]Índice descriptor no válido
at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)
at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)
at sun.jdbc.odbc.JdbcOdbc.SQLGetDataInteger(JdbcOdbc.java:3810)
at sun.jdbc.odbc.JdbcOdbcResultSet.getDataInteger(JdbcOdbcResultSet.java:5637)
at sun.jdbc.odbc.JdbcOdbcResultSet.getInt(JdbcOdbcResultSet.java:582)
at sun.jdbc.odbc.JdbcOdbcResultSet.getInt(JdbcOdbcResultSet.java:600)
at org.hibernate.type.IntegerType.get(IntegerType.java:28)
at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:163)
at org.hibernate.type.NullableType.nullSafeGet(NullableType.java:154)
at org.hibernate.persister.collection.AbstractCollectionPersister.readKey(AbstractCollectionPersister.java:734)
at org.hibernate.loader.Loader.readCollectionElement(Loader.java:975)
at org.hibernate.loader.Loader.readCollectionElements(Loader.java:646)
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:591)
at org.hibernate.loader.Loader.doQuery(Loader.java:701)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
at org.hibernate.loader.Loader.loadCollection(Loader.java:1994)
... 31 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:58:50.747

解决了将驱动程序更改为 jDTS (http://jtds.sourceforge.net/)。

# jquery - jQuery 1.7.2 中的 Konami 代码键绑定

> ID：11611143
> 
> 赞同：3
> 
> 时间：2012-07-23T10:55:36.317
> 
> 标签：jquery, version, compatibility, key-bindings

我想实现[`raptorize-Plugin`](http://www.zurb.com/playground/jquery-raptorize)但它不适用于*jQuery 1.7.2*，因为我认为这部分：

```
else if(options.enterOn == 'konami-code'){
            var kkeys = [], konami = "38,38,40,40,37,39,37,39,66,65";
            $(window).bind("keydown.raptorz", function(e){
                kkeys.push( e.keyCode );
                if ( kkeys.toString().indexOf( konami ) >= 0 ) {
                    init();
                    $(window).unbind('keydown.raptorz');
                }
            }, true); 
```

当我使用`button-version`它时，它可以工作。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:11:05.793

[http://www.zurb.com/playground/javascripts/plugins/jquery.raptorize.1.0.js](http://www.zurb.com/playground/javascripts/plugins/jquery.raptorize.1.0.js)的第93 行的 .bind()使用第三个参数来防止冒泡，不知道为什么当我们'重新在窗口上寻找 keydown 事件，但这就是在较新的 jQuery 版本中破坏它的原因。删除第三个参数，它将在 1.7.2 中工作。

还要确保您正确设置选项，例如：

```
$('.myButton').raptorize({
   'enterOn' : 'konami-code'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:59:58.050

您可能需要考虑为此使用[Mousetrap](http://craig.is/killing/mice)库而不是 jQuery。

上面链接的页面上甚至还有一个 Konami 代码示例，它是在一行 JS 代码中完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-22T20:48:55.990

自从原始 raptorize 插件发布（2010 年）以来已经有很长时间了，不幸的是，较新的 jQuery 版本打破了它。有一个更新的实现 ( [https://github.com/randomvlad/raptorize-jquery](https://github.com/randomvlad/raptorize-jquery) ) 支持 jQuery 版本 1.7+、2.x 和 3.x 以及一些额外的改进。

具体的逻辑`konami-code`已经调整：

```
} else if (options.enterOn === 'konami-code') {
    var keysPressed = [];
    var konamiCode = "38,38,40,40,37,39,37,39,66,65";
    $(window).on("keydown.raptorz", function (e) {
        keysPressed.push(e.keyCode);

        if (keysPressed.length > 10) {
            keysPressed = keysPressed.slice(1);
        }

        if (keysPressed.toString() === konamiCode) {
            animateRaptor();
        }
    });
} 
```

变化：

*   将不推荐使用的 jQuery 替换`bind()`为`on()`.
*   允许多次使用 konami-code。
*   优化以仅跟踪和比较最后 10 次击键。

免责声明：我是更新后的 raptorize 2.0 插件的“作者”，该插件本身基于 ZURB 的原始插件（[https://zurb.com/playground/jquery-raptorize](https://zurb.com/playground/jquery-raptorize)）。

# dojo - 在 dijit.Tree 中搜索

> ID：11611146
> 
> 赞同：2
> 
> 时间：2012-07-23T10:55:42.097
> 
> 标签：dojo, dijit.tree

在我的一个项目中，我使用 dijit.Tree 控件。我需要向树中添加搜索并仅显示其中包含搜索词的那些节点/叶子。但是，我似乎无法弄清楚如何实现这一目标。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:40:38.407

我不完全确定你的问题完全但它应该给出提示。

让我们使用参考文档示例作为偏移量，有 1) 存储 2) 模型和 3) 树

```
 var store = new ItemFileReadStore({
        url: "{{dataUrl}}/dijit/tests/_data/countries.json"
    });

    var treeModel = new ForestStoreModel({
        store: store,
        query: {"type": "continent"}, // note, this bit
        rootId: "root",
        rootLabel: "Continents",
        childrenAttrs: ["children"]
    });

    new Tree({
        model: treeModel
    }, "treeOne"); 
```

如此解释上述内容；您已加载所有已知的国家和大洲，但“用户”已选择仅通过在模型上使用查询来显示大洲 - 然后层次结构以树结构表示。

您想要一个具有搜索功能的文本框，所以我们连接到 onChange

```
 new dijit.form.TextBox({
        onChange: function() {
              ...
        }
    }); 
```

第一点，获取变量

```
var searchByName = this.get("value");
var oQuery = treeModel.query; 
```

接下来，在模型上设置一个新查询 - 使用对象 mixin 保留旧查询

```
treeModel.query = dojo.mixin(oQuery, { name: '*'+searchByName+'*' }); 
```

最后，通知模型及其树发生了变化 - 并重新查询可见项。

```
treeModel._requeryTop(); 
```

**注意**如果顶级项目（For ForestModel）不可见，则不会显示其任何子元素，即使搜索字符串与那些匹配。（例如，如果查询不匹配美国大陆，则不显示阿拉巴马州）

*编辑*

由于 OP 有通过“NB”的议程，这可能不适合 100% 的需求，但它是 dojo 提供的 dijit.Tree.. 因为重新编码模型/存储查询以包含父分支将需要相当长的过程直到 root 我不会在这里这样做 - 但仍然有一些技巧;）

```
var tree = new dijit.Tree( {
   /**
    * Since TreeNode has a getParent() method, this abstraction could be useful
    * It sets the dijit.reqistry id into the item-data, so one l8r can get parent items
    * which otherwise only can be found by iterating everything in store, looking for item in the parent.children
    *
   */
   onLoad : function() {
       this.forAllNodes(function(node) {
            // TreeNode.item <-- > store.items hookup
            node.item._NID = node.domNode.id
       });
   },
   /* recursive iteration over TreeNode's
    * Carefull, not to make (too many) recursive calls in the callback function..
    * fun_ptr : function(TreeNode) { ... }
   */
   forAllNodes : function(parentTreeNode, fun_ptr) {
        parentTreeNode.getChildren().forEach(function(n) {
             fun_ptr(n);
             if(n.item.children) {
                 n.tree.forAllNodes(fun_ptr);
             }
        })
   }
}); 
```

（未经测试，但可能只是工作）示例：

```
// var 'tree' is your tree, extended with
tree.forAllNodes = function(parentTreeNode, fun_ptr) {
        parentTreeNode.getChildren().forEach(function(n) {
             fun_ptr(n);
             if(n.item.children) {
                 n.tree.forAllNodes(fun_ptr);
             }
        })
};
// before anything, but the 'match-all' query, run this once
tree.forAllNodes(tree.rootNode, function(node) {
    // TreeNode.item <-- > store.items hookup
    node.item._NID = node.domNode.id
});

// hopefully, this in end contains top-level items
var branchesToShow = [] 

// run fetch every search (TextBox.onChange) with value in query
tree.model.store.fetch(query:{name:'Abc*'}, onComplete(function(items) {
   var TreeNode = null;
   dojo.forEach(items, function(item) {
       TreeNode = dijit.byId(item._NID+'');
       while(TreeNode.getParent() 
             && typeof TreeNode.getParent().item._RI == 'undefined') {
          TreeNode = TreeNode.getParent();
       }
       branchesToShow.push(TreeNode.item);
   });
}});

// Now... If a success, try updating the model via following
tree.model.onChildrenChange(tree.model.root, branchesToShow); 
```

# .net - 带有 PDF 的文件夹的 Web.config 授权不起作用

> ID：11611147
> 
> 赞同：1
> 
> 时间：2012-07-23T10:55:42.487
> 
> 标签：.net, asp.net-mvc-3, web-config

我已经搜索了我的问题的答案，但到目前为止还没有找到任何东西（对我有用）。

我有一个包含一些 pdf 文档的文件夹，经过身份验证的用户应该能够在我的 mvc3 应用程序中下载。在互联网上搜索了一段时间后，我发现我应该使用以下代码将 Web.config 文件放在该文件夹中：

```
<configuration>
    <system.web>
        <authorization>
            <deny users="?"/>
        </authorization>
    </system.web>
</configuration> 
```

或根 Web.config 文件中的类似内容

```
<location path="~/Downloads/">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
</location> 
```

这应该拒绝所有匿名用户。

在我看来，我有一个列表，其中包含指向这些文档的链接。就像是：

```
<a href="/Downloads/example.pdf">Download this document</a> 
```

但是，即使我没有登录，我仍然可以访问和下载该文档。

我错过了什么吗？还是有其他（更好的）方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:55:02.030

您需要在 ASP.NET 处理的文件类型中包含 .pdf。

[如何：在 IIS 中配置 HTTP 处理程序扩展](http://msdn.microsoft.com/en-us/library/bb515343.aspx)

# facebook - 发布到 facebook 页面作为页面而不是用户消息作品链接不是

> ID：11611148
> 
> 赞同：0
> 
> 时间：2012-07-23T10:55:46.320
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, publish

我正在使用 php-sdk，当我仅将文本消息发布到粉丝页面时，一切正常，它显示为粉丝页面帖子......当我发布具有相同功能的链接时，它显示为用户帖子......为什么？

```
try {
      $res = $facebook->api('/'.$PAGE_ID.'/feed', 'POST',                   
                  array(
                        'access_token' => $PAGE_ACCESS_TOKEN
                        ,'message' => $message                        
                        ,'link' => $link
                      ) 
            );                       } catch (FacebookApiException $e) 
     {
        echo "e:".$e->getMessage();
        var_dump($res);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:16:31.527

如果要作为页面本身发布到页面，则必须使用页面的访问令牌而不是用户。

进行 API 调用`/me/accounts`，您将看到用户有权访问的页面/应用程序列表。每个条目都将`access_token`提供一个用户已接受“manage_pages”权限的情况。

在您的 API 调用中使用它`access_token`可以让您发布为页面。

# git - 如何合并来自其他 git 存储库的部分更改

> ID：11611151
> 
> 赞同：4
> 
> 时间：2012-07-23T10:56:11.513
> 
> 标签：git

我有一个带有 Android 内核 v3.0.36 的 git 存储库。但是现在，Linux 3.0.38 出来了。Android 和主线 Linux 不兼容，所以我只想从 3.0.37 和 3.0.38 中提取更改（只是更改的一小部分）。而且我不想进行其他更改。

我正在使用 Github。我看到很多人的日志是这样的：

net: wireless:bcm4329: Fix Unknown escape '%' 90fcf01d79 Browse code Choi, Jong-Hwan 作者 8 个月前 xxx 承诺 3 个月前

他们怎么能做到？我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:10:40.460

您可以获取存储库中的另一个分支并挑选您需要的提交。查看`git cherry-pick`, 或者`git show --pretty=email <commit-id> |git am -3`, 甚至`git format-patch -o /tmp v3.0.37..v3.0.38`, 后面跟着`git am -3 /tmp/<file>`有趣的并且可能编辑过的补丁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:52:52.423

如“[在两个标签之间创建单个补丁并在它们之间进行多次提交](https://stackoverflow.com/questions/9078820/create-a-single-patch-between-two-tags-with-multiple-commits-between-them)”，您可以在 v3.0.36 之间创建单个路径。和 3.0.38，在一个 repo 中指定您感兴趣的子目录。

```
git diff tag1 tag2 -- /path/to/subdir > the-patch.diff 
```

这个想法是，您可以将差异应用于另一个存储库。

关于 GitHub，同样的机制也适用于[拉取请求](https://help.github.com/articles/using-pull-requests/)：一旦你在本地打了补丁，你就可以推送到我们的 GitHub 仓库，它应该是一个**[分叉](https://help.github.com/articles/fork-a-repo)**，然后发出拉取请求。

* * *

作为[fork0](https://stackoverflow.com/users/410126/fork0)评论，`git diff`会丢失与提交相关的评论。
`git format-patch`是一个更好的解决方案（我赞成 fork 的[答案](https://stackoverflow.com/a/11615326/6309)）。只有当您意识到[它的局限性](https://stackoverflow.com/a/881112/6309)
时， 我才会考虑。`cherry-pick`

* * *

像[这样的提交](https://github.com/biergaizi/AIR-Kernel_ICS/commit/27aec2107c6c9f0aea46ebc011ee17357ee8e784)是 gregkh 完成的拉取请求的结果，并被 edoko 接受。

# debugging - 如何使用断点和所有东西调试节点 js 应用程序？

> ID：11611162
> 
> 赞同：42
> 
> 时间：2012-07-23T10:56:55.223
> 
> 标签：debugging, node.js, v8, node-inspector

我安装了节点检查器只是为了发现它不支持断点：| 这有什么意义呢，记住在很大程度上节点代码是异步的，你根本无法一步一步地遵循它？..

我肯定在这里错过了一点......

无论如何用断点和一切调试节点代码？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-23T12:29:17.823

是的，我已经成功使用了节点检查器。如果您想要*永久*断点，只需`debugger;`在您的代码中插入。请参阅[http://nodejs.org/api/debugger.html](http://nodejs.org/api/debugger.html)。

`node --inspect-brk script.js`使用(previously )让节点等到调试器连接上`node --debug-brk script.js`，也很有帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-06-21T15:23:41.557

（适用于节点 8 及更高版本）

Node.js 有一个内置的调试器。通常您可以通过两种方式打开调试器：

1.  `--inspect`使用或`--inspect-brk`开关启动您的 Node.js 应用程序或脚本。例如：

    `$ node.js --inspect index.js`

（注意：`--inspect-brk`在用户代码开始之前中断）

2.  如果由于某种原因您无法使用`--inspect`开关启动 Node.js 应用程序或脚本，您仍然可以通过使用 SIGUSR1（在 Linux 和 OS X 上）发出信号来指示 Node.js 进程开始侦听调试消息。对于 Node 8 及更高版本，它将激活 Inspector API，与 --inspect 开关相同

    `$ kill -sigusr1 23485`

（注意：需要将 23485 替换为自己的 Node.js 进程 ID）

打开调试器，你可以打开谷歌Chrome浏览器，在地址栏输入`chrome://inspect`

然后您应该会看到“远程目标”下列出的条目。继续并单击“检查”。

现在您可以设置断点并开始调试您的代码。

参考：

1.  [https://nodejs.org/en/docs/guides/debugging-getting-started/](https://nodejs.org/en/docs/guides/debugging-getting-started/)
2.  stackoverflow 上的相关问题： [Chrome Devtools Dedicated Node.js Inspector not stop at breakpoints](https://stackoverflow.com/a/53210907/2700356)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-30T09:01:59.430

要调试 Node.js 应用程序，可以使用调试内置方法：

(1)`debugger;`在要插入断点的地方插入语句
(2) 使用命令运行文件`$ node inspect <file name>`
(3) 使用键例如，`c`继续到下一个断点

您甚至可以通过键入来调试与该断点处的变量关联的值`repl`。更多信息，请查看[官方指南。](https://nodejs.org/en/docs/guides/debugging-getting-started/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-07T23:00:33.727

您是否尝试过使用`nodemon`库？[可以在这里找到](https://www.npmjs.com/package/nodemon)。

出于开发目的，您可以启动运行 nodemon 的应用程序。我有这个脚本：

`"dev": "nodemon --inspect src/index.js"`

任何时候`debugger`到达代码中的语句都会中断。要打开可以查看服务器代码的控制台，请在 chrome 中打开控制台并单击 nodejs 图标：[![在此处输入图像描述](../Images/cc55b841625c1e49fa587dfeccfa9088.png)](https://i.stack.imgur.com/8nyrJ.png)

它还可以帮助您每次在服务器上保存任何文件时刷新服务器。

让我知道它是否有效！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-29T17:32:06.977

在这里稍微详细说明一下：

在您希望断点所在的任何位置设置调试器，然后使用 node debug script.js/index.js 运行代码

当调试器在您的断点处停止时，您将需要 repl 来检查变量。

# c# - 在 ssis 脚本组件中添加第三方 dll 引用

> ID：11611165
> 
> 赞同：8
> 
> 时间：2012-07-23T10:57:00.140
> 
> 标签：c#, sql-server-2008, ssis

我在我的脚本组件中添加了第三方引用（Json newtonsoft）dll（使用编辑脚本选项），但是当我运行包时，我收到一个错误

无法加载文件或程序集“Newtonsoft.Json，Version=4.5.0.0，Culture=neutral，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。该系统找不到指定的文件。

有什么建议么？

我将无法在 GAC 中添加 dll。

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T13:58:04.040

通过“运行”，我假设从代理/命令行运行失败？它应该在 BIDS/SSDT 中工作。简短的回答是必须向 GAC 注册 DLL，或者您可以下载源代码并将该项目添加到脚本任务中，然后引用所述项目。

查看项目，它应该是一个强签名的 DLL（基于[Dynamic.snk](http://json.codeplex.com/SourceControl/changeset/view/65597#441959)的存在），因此能够添加到 GAC。哦，但是您声明您**将无法将**其添加到 GAC 中，这意味着这是权限而不是功能问题。

如果是这种情况，要么用源代码编译项目，要么用 Web 服务包装器将其包围，然后引用该服务。

我也看到了这个答案，看来您可以尝试动态加载引用。

*   [混合 SSIS/DLL 解决方案的自动化部署](https://stackoverflow.com/questions/1861212/automated-deployment-of-mixed-ssis-dll-solution)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-19T10:55:44.830

您可以使用反射在运行时从文件系统加载 dll，而无需在 GAC 中安装。如果在 GAC 中安装的权限不可用，这将很有帮助。

```
//Add a Static Constructor which is guaranteed to be called exactly once
// “before the first instance is created or any static members are referenced.”, 
// so therefore before the dependent assemblies are loaded.

 static ScriptMain()
 {
    AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(CurrentDomain_AssemblyResolve);
 }

 //Provide path to dll stored in folder on file system
 static System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
 {

     string path = @"D:\DLL\";
     return System.Reflection.Assembly.LoadFile(System.IO.Path.Combine(path, "Newtonsoft.dll"));

  } 
```

当然，您还需要在脚本任务中添加对 dll 的引用。

# google-apps-script - ScriptDb 剩余配额

> ID：11611167
> 
> 赞同：0
> 
> 时间：2012-07-23T10:57:06.310
> 
> 标签：google-apps-script

有没有办法找出剩余的 ScriptDb 配额是多少？（在我填写 scriptDb 之前添加记录似乎不是找出数据库限制的好方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:51:05.650

此功能目前不可用。Apps 脚本团队希望在接下来的几个版本中的某个时间通过配额仪表板提供这些数据。

如果您需要以编程方式访问此功能，最好在我们的问题跟踪器中提交[功能请求。](http://code.google.com/p/google-apps-script-issues/issues/list)

# sql - 有没有办法简化这个查询？

> ID：11611169
> 
> 赞同：1
> 
> 时间：2012-07-23T10:57:14.483
> 
> 标签：sql, sql-server-2008

我有一个永远不会完成执行的存储过程。尽管该表已编入索引，但即使有 80,000 条记录，它也会失败。我尝试使用 Adam Machanic 脚本，发现以下语句永远不会终止。我知道问题出在 where 子句之后。

PS 参数嗅探并非如此。

```
insert into ProcessedFile_396 (Name,Phone,Title,Address,company,domain,SIC,NAICS,Industry,Email,UploadedB2bFiled_id) select  
  b.Name,
  b.Phone,
  b.Title, 
  case when isnull(b.Street,'') <> '' then isnull(b.Street,'') +',' else '' end  +
   case when isnull(b.city,'') <> '' then isnull(b.city,'') + ',' else '' end +
   case when isnull(b.state,'') <> '' then isnull(b.state,'') + ',' else '' end +
   case when isnull(b.zip,'') <> '' then isnull(b.zip,'') + '.' else '' end as Address,
  (select top 1 Company from CompanyWebsite where domain = b.domain) as Company,
  b.domain,
  b.SIC,
  b.NAICS,
  b.Industry,
  b.Email,
  B2bFiled_id 
from 
  UploadedFile_396 a, B2bDB b 
where 
  ((a.CompanyDomain = b.domain and ISNULL(a.CompanyDomain,'') <> '')) 
  and 
  ((a.Name = b.Name or a.FirstName = b.FirstName or a.LastName = b.LastName or a.MiddleName = b.MiddleName) 
   and 
   (ISNULL(a.Name,'') <> '' or ISNULL(a.FirstName,'') <> '' or ISNULL(a.LastName,'') <> '' or ISNULL(a.MiddleName,'') <> '' )) 
 group by 
   B2bFiled_id,b.Name,b.Phone,b.Title,b.Street,b.City,b.State,b.Zip,b.domain,b.domain,b.SIC,b.NAICS,b.Industry,b.Email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:19:49.083

我能想到两件事。首先，SQL Server 可能正在对查询进行次优优化。但是，它并没有那么复杂，因此可能不是原因。

更可能的原因是域上的加入。我的猜测是您的域包含数千或数万个示例。在连接中，这会产生数百万（或数十亿）个候选行，这可以解释性能不佳的原因。空白是一个明显的候选者，但你消除了空白。

在连接中使用“或”可能会出现问题。尝试仅在其中一个字段（例如名称）上运行带有匹配项的查询，以查看它是否在有限的时间内返回。如果是这样，一种解决方案是将查询分成四个，并将它们合并在一起。

# matlab - 结构管理

> ID：11611171
> 
> 赞同：0
> 
> 时间：2012-07-23T10:57:24.057
> 
> 标签：matlab, struct

我正在编写一个管理来自眼动仪的数据的解决方案。我目前将数据保存在 N x 5 矩阵中，包含以下列：

```
X Position, Y Position, timestamp, Velocity, Acceleration 
```

每行代表来自眼动仪的单个样本（以 1000Hz 运行）。

目前，我以矩阵的形式访问数据——例如，如果我想访问样本#600 的速度，我使用'dataStream(600,4)'。

这很好，但我希望我的代码更具可读性。“4”可能会令人困惑；像 dataStream.velocity(600) 这样的东西是理想的。我知道这将是 STRUCT 的简单使用。但是，在某些情况下，我需要复制整个样本（即矩阵的一行中的所有列）。据我了解，这在 STRUCT 对象中不容易实现，因为每个 STRUCT 子标题中的各种数组没有内在联系。我必须（我认为）分别复制每个元素，例如，如果我想复制样本#100，我相信我需要复制 dataStream.xPos(100)、dataStream.yPos(100)、dataStream.timestamp(100) ) 以此类推。

关于 STRUCT 的管理，我是否缺少一些东西，或者我最好还是省去麻烦并坚持使用矩阵方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:21:07.203

如果只是为了提高可读性，我不会使用结构，而是使用一种非常简单的方法，为数据矩阵的不同列定义变量。参见例如：

```
xPosition = 1;
yPosition = 2;
timestamp = 3; 
Velocity = 4; 
Acceleration = 5; 
```

例如，使用这些变量，您可以编写非常有意义的查询，而不是`dataStream(600,1)`编写：

```
dataStream(600, xPosition) 
```

请注意，您还可以定义更复杂的查询，例如

```
position = [1 2];  
wholeSample = 1:5; 
```

一次查询多个列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:32:10.727

您可以轻松复制结构

```
s = struct(another_struct); 
```

在性能方面，struct 会比 matrix 慢。按照@H.Muster 的建议，使用可读常量替换您的数字索引。

# c# - 为了测试，我想生成很多包含一些内容的文件——有什么简单的方法吗？

> ID：11611174
> 
> 赞同：-1
> 
> 时间：2012-07-23T10:57:25.690
> 
> 标签：c#, .net, file, testing

我使用 C#，我的代码正在读取和移动一些文件。问题是，没有那么多文件可以读取并将它们移动到其他文件夹。但我想一次用 500,1000 个或更多文件测试我的代码。

我可以自己创建每个文件-> 不那么聪明。我可以生成这些文件并为此编写我自己的代码 -> 可以工作，但没有更简单的方法吗？也许已经有一些工具可供开发人员创建测试文件？或者在 c#/.net 中还有其他解决方案吗？

PS：啊忘了说 - 我正在阅读普通的 ascii 文件。如果可能的话，稍后我想创建“类似csv”的文件（字符串由“;”分割）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:21:46.143

此代码将创建任意数量的文件，每个文件具有任意数量的行，每个包含任意数量的逗号分隔的随机整数值。

我希望它能让您开始为您的应用程序创建一些测试数据。

```
 static void Main(string[] args)
    {
        int numFiles = 30;

        for (int fileIndex = 0; fileIndex < numFiles; fileIndex++)
        {
            string randomFileName = Path.Combine(@"c:\temp", Path.GetRandomFileName() + ".csv");

            GenerateTestFile(randomFileName, 20, 10);
        }
    }

    static void GenerateTestFile(string fileName, int numLines, int numValues)
    {
        int[] values = new int[numValues];

        Random random = new Random(DateTime.Now.Millisecond);
        FileInfo f = new FileInfo(fileName);

        using (TextWriter fs = f.CreateText())
        {
            for (int lineIndex = 0; lineIndex < numLines; lineIndex++)
            {
                for (int valIndex = 0; valIndex < values.Length; valIndex++)
                {
                    values[valIndex] = random.Next(100);
                }

                fs.WriteLine(string.Join(",", values));
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:42:38.603

```
 var yourSampleTextStringArray = new[]{"dada","dada","aaa"/*.....*/};
        var rnd = new Random();

        for (int i = 0; i < 10e3; i++)
        {
            var temp = Path.GetTempFileName();
            File.WriteAllLines(temp, yourSampleTextStringArray.Where(line => rnd.NextDouble() > 0.5));
        } 
```

# c# - 提取存在于一个字符串中而不存在于其他字符串中的字符串

> ID：11611175
> 
> 赞同：1
> 
> 时间：2012-07-23T10:57:35.870
> 
> 标签：c#, string

我有两个字符串：

```
string strone="what is your name?"
string strtwo="what is your name? what is your school name?" 
```

这里的任何字符串都可以更大。我需要的是从中提取`strtwo`不在`strone`.

我试过的是这样的：

```
IEnumerable<string> str=strtwo.Except(strone); //(returns only first character ie w) 
```

我尝试将`strone`和都转换`strtwo`为字符串数组，但是一个一个地循环遍历每个字符串不会提供解决方案，因为它们`strone`之间可能包含其他字符。

我需要的是按顺序提取整个字符串`strtwo`，而不是在`strone`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:10:38.323

您可以尝试以这种方式从第二个字符串中提取文本

```
string diff = strtwo.Replace(strone,""); 
```

这应该输出您`" what is your school name?"`正在寻找的内容，否则请使用其他示例/案例更新问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:12:45.467

最简单的方法是使用`Replace`：

```
string strone="what is your name?";
string strtwo="what is your name? what is your school name?";

string finalStr = strtwo.Replace(strone, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:14:12.343

```
string strone="what is your name?"
string strtwo="what is your name? what is your school name?"

string extractedString = strtwo.Replace(strone, ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T11:15:21.430

为什么不看结果

```
strtwo.Split(new String[]{strone}, StringSplitOptions.RemoveEmptyEntries) 
```

?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T11:01:29.217

如果您寻找的不仅仅是比较字符串的第一部分并在最后显示差异，那么请查看[Diff Implementation](http://www.codeproject.com/Articles/13326/An-O-ND-Difference-Algorithm-for-C)，但基本上您正在寻找[This Algorithm](http://en.wikipedia.org/wiki/Diff#Algorithm)

但是，如果您只是在寻找字符串末尾的差异，请查看@dasblinkenlight 解决方案

# c# - 如何调试 AC# 类库 COM 互操作组件

> ID：11611179
> 
> 赞同：1
> 
> 时间：2012-07-23T10:57:51.103
> 
> 标签：c#, debugging, com-interop

我有一个 C# 类库，我也通过 COM Interop 使用它。为了测试库，我在解决方案中添加了一个 C# 测试应用程序，将其设置为启动项目，我可以通过这种方式对其进行测试。该库以这种方式工作正常，但是当从 Visual C++ 6 测试应用程序通过 COM 互操作调用时，一个函数不起作用。在这种情况下如何调试库？我在谷歌上搜索了一个解决方案，但我能找到的唯一建议是在解决方案中添加一个测试应用程序，在这种情况下我当然不能这样做。

编辑：非常抱歉。我忘了说 Visual C++ 测试应用程序是 Visual C++ 6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:02:28.963

首先，打开启动 Visual Studio 和 Visual C++。在 VC++ 中启动您的测试应用程序。之后，在 VS 中，打开 Debug 菜单并选择 Attach to process。这将向您显示当前正在运行的进程列表，选择与您的测试应用程序相对应的进程，然后单击附加。这将使您能够放置断点并调试您的 DLL。

# web-services - 我无法使用 gSOAP 与 Web 服务通信

> ID：11611180
> 
> 赞同：0
> 
> 时间：2012-07-23T10:57:52.813
> 
> 标签：web-services, soap, gsoap

我实际上正在从事一个项目，我必须使用 Altium 的 Board NB3000 创建一个 SOC 设计。该项目的一部分是与给定的已发布 Web 服务进行通信。如您所知，在嵌入式项目中，我们大部分时间都使用纯 C。

我正在尝试使用 gSOAP 为我的项目创建所需的文件。我设法从 WSDL 文件创建文件。

我试图将我的文件包含到 Altium Designer 并编译，结果错误太多。我在想这与 Altium Designer 的 c 编译器有关，所以我决定首先尝试在 Ubuntu 下使用纯 c 和编译器 GCC 与 Web 服务进行通信。我的错误更少。错误是：

```
/tmp/ccgst5ir.o: In function `soap_init_LIBRARY_VERSION_REQUIRED_20809':
main.c:(.text+0x2c469): undefined reference to `namespaces'
/tmp/ccgst5ir.o: In function `soap_print_fault':
main.c:(.text+0x3ce23): undefined reference to `soap_check_faultsubcode'
main.c:(.text+0x3ce41): undefined reference to `soap_check_faultdetail'
/tmp/ccgst5ir.o: In function `soap_sprint_fault':
main.c:(.text+0x3cfa5): undefined reference to `soap_check_faultdetail'
collect2: ld returned 1 exit status 
```

如果有人可以帮助我使用纯 C 与我的 Web 服务进行通信，那就太好了。（我可以发送 WSDL 的链接。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:18:27.710

尝试编译定义 WITH_NONAMESPACES。

# facebook-graph-api - Facebook 使用我的应用令牌访问用户照片

> ID：11611181
> 
> 赞同：1
> 
> 时间：2012-07-23T10:57:57.090
> 
> 标签：facebook-graph-api, photo, user-permissions

从我的 Facebook 应用程序访问用户照片时遇到问题。

我在运行时请求应用程序令牌：（将 [] 括号中的值替换为实际值。

https://graph.facebook.com/oauth/access_token?client_id=[clientid]&client_secret=[clientsecret]&grant_type=client_credentials

然后我尝试使用该访问令牌访问用户照片，即：

[https://graph.facebook.com/fql?q=select](https://graph.facebook.com/fql?q=SELECT) pid，src_big，src_small从pid in（'4313357036026642249'，''4313357036026642250'，'4313357036026642252'，'4313357036026642253'， '4313357036026642254')

用户已使用我的应用程序进行身份验证并接受了 USER_PHOTO 权限。

但是我得到了 0 个结果。当我使用该用户访问令牌而不是应用程序令牌时，我确实得到了结果。

我已经在图形资源管理器上证明了这个问题： [https ://developers.facebook.com/tools/explorer?method=GET&path=1004281695](https://developers.facebook.com/tools/explorer?method=GET&path=1004281695)

任何人都知道为什么已被授予访问用户照片的应用程序无法使用应用程序访问令牌获取这些照片？

提前致谢， 里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:21:38.703

因为除了极少数例外，您只能使用该用户（或他们的一位朋友，取决于相关对象的隐私）的有效访问令牌访问该用户的数据。

在这种情况下，请使用用户的访问令牌，应用访问令牌用于代表应用执行操作，不应真正用于特定于用户的调用，因为它无法查看非公开信息，除非使用非常有限的情况

# android - Android 后退按钮行为

> ID：11611182
> 
> 赞同：11
> 
> 时间：2012-07-23T10:58:00.483
> 
> 标签：android, android-activity, onresume, onpause, ondestroy

假设我们有一个具有默认行为的默认空活动，使用默认意图标志启动。用户按下设备上的后退按钮。活动消失了……但实际上如何？

*   按下后退按钮的行为方式是否相同`finish()`？
*   活动是否立即被破坏（`onDestroy`被调用）？
*   活动是否保证被销毁，但不是立即销毁？
*   是否有可能该活动不会被销毁并且将来启动此活动时该实例将被重用？（所以只有`onPause`and `onStop`-> `onStart`and`onResume`被调用？）

我正在寻找一个可靠的答案，所以如果您不确定这里会发生什么，请不要回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:15:45.347

[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)

这是官方 Android 文档中的一个子章节，用于解决您的问题。这是主题的一个子章节`Managing the Activity Lifecycle`，可以在这里阅读：http: [//developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

绝对值得阅读整章以了解有关 Android Activity 行为的详细信息。但是子章节（第一个链接）是这个问题的相关部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:10:20.253

当您按下返回时，（如果没有被键盘、片段、活动等截获）操作系统（可能通过 ActivityManager）将尝试向用户显示当前任务中的先前活动（同样，忽略片段的回栈） .

如果没有这样的活动，任务将被终止，您将转到上一个任务 - 大多数时候是主屏幕或其他可能启动您的应用程序的应用程序。

您`onDestroy`很快就会接到电话（这取决于开始下一个活动需要多长时间，但在一部好手机上应该在 100-200 毫秒以下）。

之后您的活动实例将不会被重用`onFinish`。这发生在活动被销毁之前，因此如果您需要另一个相同类型的活动，操作系统将创建另一个实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T11:20:03.400

你用应该看看这个 [试试这个](https://developer.android.com/guide/components/tasks-and-back-stack.html)

并请具体说明您希望对默认活动的后退按钮做什么......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T11:09:05.590

当用户按下BACK键时，当前activity从栈顶弹出（该activity保证会被销毁，但不会立即销毁，可能是系统资源不足的时候）并恢复之前的activity（之前的状态其 UI 已恢复）。

[Android 上的后退按钮/后退键会触发哪些操作？](https://stackoverflow.com/questions/7290019/which-actions-does-the-back-button-on-android-trigger#answers-header)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T00:12:20.023

肯定`onDestroy()`被称为.....在某些情况下，您的 Activity 由于正常的应用程序行为而被破坏，例如当用户按下后退按钮或您的 Activity 通过调用发出自己的破坏信号时`finish()`。

# python - 在python中用双引号替换单引号，用于插入数据库

> ID：11611183
> 
> 赞同：1
> 
> 时间：2012-07-23T10:58:08.020
> 
> 标签：python, insert

想知道是否有人有一个聪明的解决方案来修复 Python 中的错误插入语句，由一个不太聪明的程序导出。它没有为字符串中带有单引号的字符串添加两个单引号。为了使它更容易一点，所有插入的值都是字符串。

所以它有：

```
INSERT INTO addresses VALUES ('1','1','CUCKOO'S NEST','CUCKOO'S NEST STREET'); 
```

代替：

```
INSERT INTO addresses VALUES ('1','1','CUCKOO''S NEST','CUCKOO''S NEST STREET'); 
```

显然这有多行，我也不想替换封闭的单引号。

正在考虑使用拆分和连接，但我不确定如何在循环中轻松更新拆分值。对不起，我是菜鸟。类似下面的东西，我不知道该怎么做#update bit

```
import sys

fileIN = open('a.sql', "r")
line = fileIN.readline()

while line:
   bits = line.split("','")
   for bit in bits:
      if bit.find("'") > -1:
         #update bit
   line_out = "','".join(bits)      
   sys.stdout.write(line_out)
   line = fileIN.readline() 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T12:19:37.997

根据 katrielalex 的建议，这个怎么样：

```
>>> import re
>>> s = "INSERT INTO addresses VALUES ('1','1','CUCKOO'S NEST','CUCKOO'S NEST STREET');"
>>> def repl(m):
    if m.group(1) in ('(', ',') or m.group(2) in (',', ')'):
        return m.group(0)
    return m.group(1) + "''" + m.group(2)

>>> re.sub("(.)'(.)", repl, s)
"INSERT INTO addresses VALUES ('1','1','CUCKOO''S NEST','CUCKOO''S NEST STREET');" 
```

如果你对消极的后向断言，这是令人头痛的纯正则表达式版本：

```
re.sub("((?<![(,])'(?![,)]))", "''", s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:01:44.743

一起去：

```
import sys
import re

def repl(m):
    if m.group(1) in ('(', ',') or m.group(2) in (',', ')'):
        return m.group(0)
    return m.group(1) + "''" + m.group(2)

fileIN = open('a.sql', "r")
line = fileIN.readline()

while line:
    line_out = re.sub("(.)'(.)", repl, line)
    sys.stdout.write(line_out)
    # Next line.
    line = fileIN.readline() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:11:02.930

```
while line:
    # Restrain line2 to inside parentheses
    line1, rest = line.split('(')
    line2, line3 = rest.split(')')
    # A bit more cleaner
    new_bits = []
    for bit in line2.split(','):
        # Remove border ' characters
        bit = bit[1:-1]
        # Duplicate the ones inside
        if "'" in bit:
            bit = bit.replace("'", "''")
        # Re-add border '
        new_bits.append("'" + bit + "'")
   sys.stdout.write(line1 + '(' + ','.join(new_bits + ')' + line3)
   line = fileIN.readline() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:51:09.527

警告：这在很大程度上取决于SQL 语句*的*格式。但是，如果您的输入只会采用“语句（参数）结束”格式，那么这将每次都有效。

```
import sys

fileIN = open('a.sql', "r")
line = fileIN.readline()

while line:
    #split out the parameters (between the ()'s)
    start, temp = line.split("(")
    params, end = temp.split(")")

    #replace the "'"s in the parameters (without the start and end quote)
    newParams = "','".join([x.replace("'", "''") for x in params[1:-1].split("','")])

    #join the statement back together
    line_out = start + "('" + newParams + "')" + end

    #next line
    sys.stdout.write(line_out)
    line = fileIN.readline() 
```

解释：

1.  将字符串拆分为 3 部分：查询开始、参数和结束。
2.  生成器获取参数（没有开始/结束`'`s），将其拆分为`','`，并且对于拆分生成的列表中的每个元素（单个数据条目），将`'`s替换为`''`s。
3.  最后一行然后连接查询开始、新参数（带有先前删除的括号和引号）和语句的结尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T14:05:03.107

另一个答案：

```
a = "INSERT INTO addresses VALUES ('1','1','CUCKOO'S NEST','CUCKOO'S NEST STREET');"
open_par = a.find("(")
close_par = a.find(")")
b = a[open_par+1:close_par]
c = b.split(",")
d = map(lambda x: '"' + x.strip().strip("'") + '"',c)
result = a[:open_par+1] + ",".join(d) + a[close_par:] 
```

# ms-access - Ms-Access 尝试使用“传输文本”创建具有唯一文件名的 csv 文件

> ID：11611186
> 
> 赞同：1
> 
> 时间：2012-07-23T10:58:35.093
> 
> 标签：ms-access, export

我正在尝试使用自动宏将 Ms-Access 表导出到 csv 文件。我希望目标文件具有唯一的名称，并且我认为使用 now()yyyymmddhhnn 将是实现此目的的好方法。

我的宏中的传输文本工作正常，并且我已经为传输设置了导出文件规范。

我在宏的文件名参数中使用 ="C:\batchfile_" & Format(Now(),"yyyymmddhhnn") & ".csv" 。这一点有效。

但是当我尝试运行宏时，它告诉我文件名不存在，然后导出没有完成。我不确定这是为什么，但我认为这是因为导出文件规范期望目标文件具有与源表相同的文件名和列结构。

有谁知道解决这个问题的方法？

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T10:11:39.847

这是一个非常古老的线程，我正在发布我的解决方案，以便它可能对其他人有用，传输文本工作正常，只要正确提供变量，您可以检查文件名以外的其他选项，或者使用文件打开创建数据源通过打开文本文件声明并将记录集数据转换为 CSV 格式。

# vb.net - 正则表达式 Vb.Net

> ID：11611189
> 
> 赞同：0
> 
> 时间：2012-07-23T10:58:37.057
> 
> 标签：vb.net, winforms

我正在尝试验证我的 vb.net windows 窗体应用程序的电子邮件地址，这是在另一个类中编写的验证电子邮件功能

```
Public Function ValidateEmailAddress(strEmailAddress As String) As Boolean

    Dim pattern As String
    pattern = "^([0-9a-zA-Z]([-\.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$"

    If Regex.IsMatch(strEmailAddress, pattern) Then
        Return True
    Else
        Return False
    End If

End Function 
```

然后我通过编写这段代码从另一个类调用 IsValid 函数

```
 If ValidateEmailAddress(txtEmailAddress.Text) Then
        MessageBox.Show("Email Valid")
    Else
        MessageBox.Show("Email Not Valid")
    End If 
```

单步执行此代码时，它会跳过 ValidateEmailAddress 函数中的 Return True 语句，也跳过 isValid() 函数中的 MessageBox.Show("Email Valid")。因此，即使我输入正确的电子邮件格式，我也会收到一封电子邮件无效的退货声明。请问正则表达式模式是否正确，或者任何人都可以在这里发现我做错了什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:26:24.607

对我来说，这看起来像是一个正则表达式问题。试试这个：

```
Public Function ValidateEmailAddress(strEmailAddress As String) As Boolean
    Dim EmailRegex As New Regex("^([a-zA-Z0-9_\-\.\']+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$")
    If EmailRegex.IsMatch(strEmailAddress) Then
        Return True
    Else
        Return False
    End If
End Function 
```

很抱歉简短的回答，目前我几乎没有时间指出错误可能出在哪里。

# sql-server-2008 - 使用来自另一个数据库的 SQL 证书

> ID：11611199
> 
> 赞同：1
> 
> 时间：2012-07-23T10:59:14.687
> 
> 标签：sql-server-2008, encryption, certificate

我`A`在这个数据库中有一个数据库，有一个证书和一个表。我想将加密值插入到数据库中的表中`A`。存储过程在数据库中`B`，理想情况下会像这样进行调用：

```
EncryptByCert(Cert_ID('CertifiacteName'), 'SecretData') 
```

这总是会失败，因为数据库`B`在数据库中找不到证书`A`

在不移动存储过程或证书的情况下，如何`B`使用数据库中的证书在数据库中创建加密值`A`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:39:37.497

您可以将 EncryptByCert 调用包装在数据库 A 中的函数中，如下所示：

```
CREATE FUNCTION dbo.MyEncrypt(@Data VARCHAR(4000))
RETURNS TABLE
AS
RETURN
SELECT ENCRYPTBYCERT(CERT_ID('MyCert'),@Data) EncryptedData; 
```

要在连接到数据库 B 的同时将数据插入到数据库 A 中的表中，请使用以下内容：

```
INSERT INTO DatabaseA.dbo.MyTable(id,EncryptedData)
VALUES(42, (SELECT EncryptedData FROM DatabaseA.dbo.MyEncrypt('testvalue')) ); 
```

# filesystems - 实现FAT文件系统的开/写功能

> ID：11611202
> 
> 赞同：0
> 
> 时间：2012-07-23T10:59:22.797
> 
> 标签：filesystems, fat32, fat, broadcom

我必须在[http://www.broadcom.com/support/communications_processors/downloads.php](http://www.broadcom.com/support/communications_processors/downloads.php)的 Broadcomd（固件代码）availabel 中实现打开/写入功能，我正在通过[http://elm-chan.org/fsw /ff/00index_e.html](http://elm-chan.org/fsw/ff/00index_e.html)开发对 FAT 文件系统的理解。我也从上面的链接中对代码有了一些了解。但仍然无法编写完整的代码......缺少一些设计部分......你们可以帮助我开发实现级别的理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:22:29.830

在通过 FAT32 数据结构，并在 NTdiskviewer 实用程序的帮助下查看原始扇区之后......我有了更好的理解。目前我已经部分实现了它，并且打开/创建功能工作得很好。

# jquery - 关闭网页时如何打开广告？

> ID：11611206
> 
> 赞同：-1
> 
> 时间：2012-07-23T10:59:38.233
> 
> 标签：jquery, tabs

我正在使用 php 电子商务网站。在该站点中，我的客户希望在用户关闭浏览器选项卡或窗口时显示他的广告。我使用 jquery 卸载事件但它不起作用。

我的代码是：

```
$(window).unload(function(event) {
     var url = 'http://www.google.com/';
     window.open(url);
     window.focus();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:01:56.770

奇怪的是，代码不起作用是有*原因的。*:-) 原因是它曾经工作，被滥用，现在浏览器供应商禁用打开窗口，除非直接响应某些用户生成的事件，如`click`事件。

卸载页面时，您无法可靠地打开新窗口，您必须告诉您的客户这不是一个选项。

# python - 无法在 python 中访问 request.session['.....']

> ID：11611209
> 
> 赞同：0
> 
> 时间：2012-07-23T10:59:51.933
> 
> 标签：python, session

def 候选名单（请求）：

my_shortlist = request.session['my_shortlist']

def shortlist_action(request, id, action):

```
id = int(id)
my_shortlist = request.session["my_shortlist"]
if action == "add":
    try:
        my_shortlist = request.session["my_shortlist"]
        if not id in my_shortlist:
            my_shortlist.append(id)
            request.session["my_shortlist"] = my_shortlist
        return HttpResponse("You're in try and you entered :  %s" % my_shortlist)
    except:
        my_shortlist = []
        my_shortlist.append(id)
        request.session["my_shortlist"] = my_shortlist
        return HttpResponse("You're in except and you entered :  %s" % my_shortlist)        
if action == "remove":
    my_shortlist = request.session["my_shortlist"]
    if id in my_shortlist:
        my_shortlist.remove(id)
    request.session["my_shortlist"] = my_shortlist
    return HttpResponse("You have removed all traces of: %s from %s" %(id, my_shortlist)) 
raise Http404 
```

我有两个视图，我在视图中创建了一个会话变量，并尝试在另一个视图中访问该特定会话变量，但它给了我错误...任何建议都会对我有很大帮助...谢谢

# java - 蚂蚁并行性能

> ID：11611211
> 
> 赞同：1
> 
> 时间：2012-07-23T11:00:11.913
> 
> 标签：java, multithreading, memory, ant, mxmlc

我需要在我的项目中编译许多类似的 SWF。我有 ant 构建文件，我在其中运行`mxmlc`（flex 编译器）任务。为了减少一般构建时间，我想并行运行任务。我有4个核心cpu。

```
<parallel threadsperprocessor="1" failonany="true"> 
```

如果我不使用并行编译，那么编译一个 swf**大约需要 12 秒。**但是当我尝试并行运行它（一次 4 个内核 => 4 个线程）时，每个 swf 的编译时间**约为 20 秒**，而当 ant 运行时，我的整个操作系统都有可怕的滞后。**重要提示**：我刚刚重新安装了我的操作系统（windows 7 64），在此之前一切正常（没有滞后，4 个线程的快速 12 秒编译）。顺便说一句，如果我设置`threadcount="2"`，那也可以，但我想在 4 个线程中进行。

我想这可能是一些java内存问题。我现在正在使用（以前也使用过）`-Xmx1024m -Xms256m`

请帮我配置我的 JVM 以加快构建速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:41:31.550

好的，我已经成功了。安装了 x86 JRE 而不是 x64。我不知道为什么它不适用于 x64 ......

# asp.net - 报告查看器未显示报告

> ID：11611213
> 
> 赞同：0
> 
> 时间：2012-07-23T11:00:14.927
> 
> 标签：asp.net, report, reportviewer, rdlc

我尝试在我的报告查看器中查看报告，但它什么也没显示

我的报告查看器的加载功能如下：

```
if(!IsPostBack)
{
ReportViewer1.ProcessingMode = ProcessingMode.Local;
ReportViewer1.LocalReport.ReportPath = "Reports/MainReport.rdlc";
DataTable orderDt = controller.SelectFullOrderDetailsInfo(orderID);
ReportDataSource rptds = new ReportDataSource("OrderInfo", orderDt);
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(rptds);
ReportViewer1.LocalReport.Refresh();
ReportViewer1.DataBind();
} 
```

报告查看器页面只是空着，没有显示任何东西！我错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-10T18:54:30.387

我知道我的回复是在提出问题 5 年后 :)，但我把我的发现放在这里，希望它能为将来的其他人节省时间。

最近我为我的公司做了60份报告。以下是报告未显示的原因：

1：最常见的情况：您报告的参数可以为空或空。如果您有参数，请确保您指定这些参数可以接受空值或空值，否则 re[rot 显示为空。要进行验证，请从报告中删除所有参数并在没有任何参数的情况下运行它。

2：检查 rptds Table(report DataSource) 以确保它已填充。

3：（这个发生了几次）。浏览您的代码以确保您没有将报表查看器可见性设置为 false。

# php - 会话开始与 php 中的 usleep 冲突

> ID：11611217
> 
> 赞同：0
> 
> 时间：2012-07-23T11:00:32.647
> 
> 标签：php, ajax, session, usleep

我想写一个聊天系统。我使用过 ajax、php 和 commet porotocol。

一切正常，但会话有问题：当会话在脚本顶部启动时，一切都出错了（我的脚本无法理解有一个新的消息，所以我必须等待睡眠时间结束）

这是我的 php 文件的简单版本：

```
 $filename  = dirname(__FILE__).'/data.txt';

// store new message in the file
$msg = isset($_GET['msg']) ? $_GET['msg'] : '';
if ($msg != '')
{
  file_put_contents($filename,$msg);
  die();
}
// infinite loop until the data file is not modified
$lastmodif    = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
$currentmodif = filemtime($filename);
while ($currentmodif <= $lastmodif) // check if the data file has been modified
{
  usleep(10000); // sleep 10ms to unload the CPU
  clearstatcache();
  $currentmodif = filemtime($filename);
}

// return a json array
$response = array();
$response['msg']       = file_get_contents($filename);
$response['timestamp'] = $currentmodif;
echo json_encode($response);
flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:58:52.863

那是因为会话被锁定，避免这种情况的唯一方法是`session_write_close()`在你的 usleep 命令之前调用。

基本上，如果一个脚本使用会话，则在第一个脚本完成或调用`session_write_close()`. 这是因为 PHP 使用锁定，并且看到会话文件被锁定，并在运行脚本之前等待它再次可用。

# excel - 发生错误时是否可以自动保护工作表？

> ID：11611218
> 
> 赞同：0
> 
> 时间：2012-07-23T11:00:35.410
> 
> 标签：excel, excel-2000, vba

我曾尝试在错误时使用 Goto，但即使发生错误，它似乎也会跳过此操作，或者即使没有发生错误也执行此操作，具体取决于我将其放置在脚本中的位置。

这行代码出现了运行时错误：

```
Range(Worksheets("Search Engine").Cells(9, 1), Worksheets("Search Engine").Cells(Endcolumn, Endrow + 2)).Select Selection.RowHeight = 20` when `Endcolumn = 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:54:17.403

根据您的评论，`Application-defined or object-defined error`当您的`Endcolumn`变量为 0 时，您会看到。发生这种情况是因为 Excel`Range`是基于 1 的，而不是基于 0 的，这意味着永远没有列 0。

由于您似乎特别对错误处理最感兴趣，因此大致应该如何处理它：

```
Sub ErrorExample()

    On Error GoTo ErrHandler ' Set the Error Handling Condition
                             '  in this case, if an error occurs
                             '  goto the ErrHandler label

    ' do stuff
    Debug.Print "I am in `do stuff` code"

    Range(Worksheets("Search Engine").Cells(9, 1), 
           Worksheets("Search Engine").Cells(Endcolumn, 
           Endrow + 2)).Select Selection.RowHeight = 20

    Exit Sub ' Exit from the Sub gracefully and do not run the
             '  following lines of code (if this is not
             '  included, the ErrHandler code will run in all
             '  cases, not just error cases

    Debug.Print "I will never run"

ErrHandler:
    Debug.Print "I am in the error code"
    ' Code to run in case of error
    ThisWorkbook.Worksheets("Search Engine").Protect ' protect your sheet
    On Error GoTo 0 ' Reset the error handling condition
End Sub 
```

# java - Unix 上的 MSSQL JDBC

> ID：11611221
> 
> 赞同：2
> 
> 时间：2012-07-23T11:00:45.907
> 
> 标签：java, sql-server-2005, mssql-jdbc

我正在尝试使用集成安全性将我们拥有的 web 工具与 sql server 数据库集成。我一直在四处寻找 sqljdbc4.jar 的 unix 版本，但是我似乎找不到只有 .dll 的 .so 文件的版本。

有谁知道我在哪里可以获得所需的 .so 文件的版本或使用集成安全性的其他方式？

目前我的应用程序无法连接

```
com.microsoft.sqlserver.jdbc.SQLServerException: This driver is not configured for integrated authentication 
```

我可以看到

```
WARNING: Failed to load the sqljdbc_auth.dll 
```

早在日志中。

使用 2.5 版的 mssqljdbc。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:12:43.057

根据[这些文档](http://technet.microsoft.com/en-us/library/gg558122.aspx)，从 MSSQL JDBC Driver 4.0 开始，您应该能够指定`authenticationScheme=JavaKerberos`使用不需要 sqljdbc_auth.dll 的纯 Java Kerberos 实现。

请注意，我没有尝试过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T05:52:41.223

我知道它很晚，但对于任何搜索这个的人，请尝试以下操作：

将 sqljdbc_auth.dll 放在资源文件夹中，然后添加以下代码

```
ClassLoader classLoader = TestDBConnection.class.getClassLoader();
File file = new File(classLoader.getResource("sqljdbc_auth.dll").getFile());
System.setProperty("java.library.path", file.getParent()); 
```

# php - 登录系统不工作

> ID：11611231
> 
> 赞同：-4
> 
> 时间：2012-07-23T11:01:36.907
> 
> 标签：php, mysql, apache, login

我已经制作了登录系统，但它似乎不适用于我的客户端 PC...

它曾经工作多年，但昨晚突然停止了。

我试图清除缓存、cookies、使用了 3 个不同的浏览器，她获得了登录成功，这意味着设置了 cookie，并且它已经登录，当她被重定向绕过登录屏幕时，她只是被要求再次登录，在一个循环中再次...

我尝试使用相同的密码，相同的用户名从我的电脑登录，它让我登录非常好......

我已经没有选择它可能是什么了......

她使用的是苹果（mac）电脑，我在 safari、chrome、firefox 上试过。

我可以确认 cookie 已启用并清除我只是不知道我还可以检查什么来调试脚本，因为这只是一台 PC 上的问题，它只是在一夜之间停止，没有任何修改或任何东西......除非主机提供商存在服务器更新问题。

我正在寻求任何可以修复它的帮助，因为我不相信登录系统本身有任何问题。但我客户的电脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:18:09.167

查看服务器的访问日志文件，看看是否有从她的 PC 到服务器的实际 POST 请求（以及它返回的状态代码）。除此之外，我建议您使用 teamviewer 或类似的工具连接到她的 PC，然后自己查看

# c# - 在 Azure 中恢复和备份 vm

> ID：11611243
> 
> 赞同：0
> 
> 时间：2012-07-23T11:02:13.073
> 
> 标签：c#, azure, cloud, hyper-v

我想在 azure 中备份和恢复 vm。我可以将 vm 备份为 xml 文件，将其存储在本地计算机中并成功恢复到 windows azure。但现在我的要求是从 windows azure 备份一个 vm 并将其恢复到 hyper v. 和副 varsa。是否可以？以及如何完成，我想以编程方式执行此操作。

等待答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:27:03.457

我认为当您说“可以将 VM 备份为 XML”时，实际上是在保存 Windows Azure VM 配置，然后使用相同的配置创建另一个 Windows Azure 虚拟机。

如果要下载与 Windows Azure 虚拟机相关的 OS Disk 或 Data Disk VHD，只需从 Windows Azure Storage 下载 VHD。如果您想以编程方式执行此操作，您可以在程序中使用 Powershell，或者仅使用 Windows Azure Storage API 将 VHD 作为页面 Blob 下载，或者仅使用 REST API 下载 Blob。

我已经解释了以下 Windows Azure 虚拟机论坛问题中的步骤：

[下载虚拟机​​ VHD](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/5e851d21-8829-4fec-aa4a-a45258ec5da2)

从技术上讲，我可以看到一个案例，您可以下载一个 VM（作为 OS 磁盘 VHD）用于备份目的（您实际上可以在 Azure 存储中备份它以便快速访问）但是从 DC 下载然后上传没有意义，因为您可以登录进入虚拟机并安装你想要的任何东西或配置你想要的方式。关闭 VHD 然后再次上传可能是一个重要的设计问题。我有兴趣听听你的情况。

# android - 在 Eclipse 的属性框中设置 (dp) 值

> ID：11611246
> 
> 赞同：3
> 
> 时间：2012-07-23T11:02:39.940
> 
> 标签：android, eclipse, eclipse-plugin, adt

> **可能重复：**
> [Android eclipse 编辑器：无法编辑属性](https://stackoverflow.com/questions/11579594/android-eclipse-editor-unable-to-edit-properties)

我最近用最新版本的 Eclipse 和 ADT 插件更换了我的电脑，我很困惑。我注意到 ADT 插件发生了一些变化，现在我无法在 Eclipse 的属性框中输入特定值。

我曾经点击一个布局（在图形视图中）；然后我转到属性框并将布局属性之一更改为特定值，例如 50dp。

现在我别无选择，只能选择fill_parent、wrap_content、match_parent……我为了做我想做的事，我需要手动编辑xml。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:34:28.310

如果您查看布局正上方的工具栏，请使用带有虚线方块的按钮。

![输入特定的保证金值](../Images/390f7ebc82a8d0227ad7d1f943b99a04.png)

# c# - 设置自动生成时在运行时访问Gridview中的数据？

> ID：11611249
> 
> 赞同：3
> 
> 时间：2012-07-23T11:02:42.543
> 
> 标签：c#, asp.net

我将我的数据从 Excel 工作表导入到网格视图。之后，我想将我的网格视图的列标题文本放入下拉列表中，但我无法访问它们，请帮助我 :-( ;

这是我的代码，但它不起作用：

```
List<string> lst = new List<string>();
* for (int i = 0; i < dg_excel.Columns.Count; i++)
{
    lst.Add(dg_excel.Columns[i].HeaderText);
}
ddl_prd_count.DataSource;
ddl_prd_count.DataBind(); 
```

对于这一`*`行，它对我说没有列（column.count = 0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:46:49.240

检查另一个 SO 线程上的[答案](https://stackoverflow.com/a/9817850/770710)[Why column count is 0 for GridView](https://stackoverflow.com/questions/9817597/why-column-count-is-0-for-gridview)以了解为什么您无法访问网格的 Columns 集合中的列。

在我看来，如果你想使用自动生成的列，那么请点击这个 ASP.net 论坛链接 -[自定义自动生成的列 (GridView)](http://forums.asp.net/t/888287.aspx)和 SO 线程[如何使用自动生成的列隐藏 ASP.NET GridView 中的列？](https://stackoverflow.com/questions/2091457/how-to-hide-columns-in-an-asp-net-gridview-with-auto-generated-columns).

例如，从这段代码中有一个想法。我没有检查其中的正确语法等。

```
 protected void MyGridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        if (IsFillCombo)
        {
            //fill your list here.
            for (int i = 0; i < datasourcetable.Columns.Count; i++)
            {
                lst.Add(e.Row.Cells[i].Text);
            }
            IsFillCombo = false;
        }
    }
} 
```

// 另一种最简单的实现方法如下：来自[问题文本](https://stackoverflow.com/questions/9817597/why-column-count-is-0-for-gridview)

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                List<Abc> listofAbc = new List<Abc>();
                for (int i = 0; i < 10; i++)
                {
                    listofAbc.Add(new Abc
                    {
                        ID = i + 1,
                        Name = "Abc" + (i + 1).ToString()
                    });
                }
                GridView1.DataSource = listofAbc;
                GridView1.DataBind();

                List<string> lst = new List<string>();

                for (int i = 0; i < GridView1.HeaderRow.Cells.Count; i++)
                {

                    lst.Add(GridView1.HeaderRow.Cells[i].Text);
                    System.Diagnostics.Debug.WriteLine(GridView1.HeaderRow.Cells[i].Text);
                }
            }
        }
    }
    public class Abc
    {
        public int ID { get; set; }
        public string Name { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:56:09.867

您可以使用以下代码

```
List<string> lst = new List<string>();

for (int i = 0; i < dg_excel.HeaderRow.Cells.Count; i++)
{

    lst.Add(dg_excel.HeaderRow.Cells[i].Text);

}

ddl_prd_count.DataSource=lst ;

ddl_prd_count.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:33:15.883

访问`gridView1_CellValueChanged`您的网格的事件，然后访问`e.Column.FieldName.ToString()`

# c - 解释 p=(char*)66 的作用。

> ID：11611252
> 
> 赞同：-9
> 
> 时间：2012-07-23T11:02:52.680
> 
> 标签：c, pointers

我在考试中有一个问题，我得到了以下问题：-

第 4 行是什么意思（第 4 行发生了什么？）

```
1    char i , *p;
2    i=65;
3    p=&i;
4    p=(char*)66;
5    (*p)++; 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:04:51.383

看看[这个教程](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)，它提供了一些关于指针的好信息。我不想告诉你它的确切作用，因为它不会教任何东西，而是给你一个鹦鹉时尚的答案，你会被下一个这样的问题难住。

您想要寻找的区域是铸造和指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:04:50.913

"66" 将被转换为 (char *) 类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:07:11.247

`p=(char*)66;`将内存中的地址 66 转换为指针，然后在下一行将其递增。照原样，此代码可能无法正常工作，除非您碰巧有权写入 RAM 中的 66 字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T11:35:15.103

我修复了第 4 行以使代码更合理。

```
1    char i , *p;
2    i=65;
3    p=&i;
4    *p=(char)66;
5    (*p)++; 
```

*   在第 1 行，您有一个 char`i`和一个指向 char 的指针`p`。

*   在第 2 行，`i`保存值 65，即 ASCII 中的字母“A”。

*   在第 3 行中，`p`指向 的地址`i`。

*   在第 4 行中，地址中`p`指向的值为`66`，即 ASCII 中的字母`B`。既然`p`指向 的地址`i`，那么`i`也有 的值`66`。

*   在第 5 行中，`p`指向的地址中的值从`66`to增加`67`，这使其成为`C`ASCII 中的字母。

如果你打印`i`，否则`*p`你会得到字母“C”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T11:50:53.700

由于`p`是一个指针（在这种情况下指向 char ），它拥有一个地址。第 4 行只是将地址`66`写入`p`. 行执行后，`p`指向地址`66`。这是否是一个有效的地址是一个不同的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T13:15:04.657

我发现在学习一门编程语言时，学习如何大声说出来有助于理解该语言的含义：

所以`p = (char *)66;`对我来说是“将 66 分配给 p”，正如其他人所提到的，这`(char *)`是一个演员表。它将 66 转换（更改类型）`char *`为称为 char 的指针。或者，字符变量的地址。

基本上整行都是在说“在地址 66，你会找到一个字符”，并将 66 分配给先前指向 . 中保存的字符的指针`i`。

`*`在这种情况下，星号 ( ) 的使用与`*p = (char) 66;`表示“at 的`p`值为 66，它是字符值”的行不同。因此，虽然我们第一次看到的行修改了保存在的地址`p`，但第二行修改了已经保存在地址中的值`p`。

此外，最后一行 ( `(*p)++`) 的意思是：“取 p 的值，然后给它加 1，不管它是什么。”

请记住，这些不是这个问题的教科书答案，这是你在回答之前思考问题的方式。此外，如果这确实是您在测试中给出的代码，请务必注意，在现实生活中这样做是个坏主意。在第 4 行和第 5 行中，您正在修改内存中可能甚至不属于您的应用程序的随机位置，这可能（并且可能会）导致崩溃和其他令人讨厌的事情发生。

# jquery - 数组值被多次调用，我如何限制它以使每个值都是唯一的？

> ID：11611253
> 
> 赞同：0
> 
> 时间：2012-07-23T11:02:57.210
> 
> 标签：jquery, arrays

希望你能帮忙，我有趣的项目快完成了，但我还有一个最后的错误要修复。

我有一个数组，可以将一组值打乱，然后将它们吐出到随机段落中。问题是，当我转储这些打乱的单词时，有些单词会被多次调用，而我需要每个值只打印一次。

```
$("#generatebutt").click(function() {

var dumpStr = "";
var lengthOfParagraph = $('#length').val();
var numberOfParagraph = $('#numberpara').val();

for (var i = 0; i < numberOfParagraph; i++) {
    ShuffleWords(melbArray);

    for (var j = 0; j < lengthOfParagraph; j++) {
        var theWords = melbArray[j];                 
        if(j == 0){
            dumpStr += theWords.charAt(0).toUpperCase();
            theWords = theWords.substring(1)
        }
        else {
        }
        if(j % 5 == 1){
            dumpStr += theWords + ", ";
        }
        else {
            dumpStr += theWords + " ";
        }
    }
    dumpStr = $.trim(dumpStr);
    dumpStr += ".<br/><br/>";
}
$("#dump").html(dumpStr); 
```

非常感谢！

利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:09:54.963

**工作演示** [http://jsfiddle.net/Ehqzj/1/](http://jsfiddle.net/Ehqzj/1/)

我认为您需要的只是一种从数组中获取唯一单词的方法，在这种情况下，这应该会有所帮助，否则您也可以轻弹您的 HTML；否则，如果只获得独特的价值。

希望它符合您的需求`:)`

**代码**

您可以使用 array.filter 来解决问题-

```
var a=["hulk","hulk","thor","thor","ironman","hawk","hawk"];

var unique=a.filter(function(itm,i,a){
    return i==a.indexOf(itm);
});

alert(unique);

// Return set will be **Unique** words only: hulk,thor,ironman,hawk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:15:05.663

首先通过执行以下操作克隆数组（在函数的开头）：

```
var newArray = melbArray.slice(); 
```

然后，使用新数组，在引用它时从数组中删除值。改变：

~~`var theWords = melbArray[j];`~~

至`var theWords = newArray.splice( j, 1 )[0];`

此`.splice()`方法删除索引处的条目`j`并返回一个仅包含该条目的新数组（我添加了`[0]`返回元素本身）。执行此操作后，旧数组将不再包含此值。

# php - 如何缩短php条件？

> ID：11611257
> 
> 赞同：0
> 
> 时间：2012-07-23T11:03:27.570
> 
> 标签：php, html, if-statement, switch-statement

你好我有以下问题：

我有一个表格，我想通过 php 检查一些输入错误。除此之外，我想显示有关错误的用户信息。

我遇到的问题是，我只喜欢显示一条消息，而不是同时显示所有消息。因此，我需要过滤来自 php 的所有错误消息，以将其限制为一条。

所以php正在寻找这个：

```
<?php if (isset($errors['for_a']):?><div id="errormessage">some text</div><?php endif; ?> 
```

php规则是：

```
(case1) ... if ( isset($errors['for_a']) AND (!isset($errors['for_b'])) AND (!isset($errors['for_c'])) OR (!isset($errors['for_d'])) ...
OR
(case 2) ...AND (!isset($errors['for_b'])) AND (!isset($errors['for_c'])) AND (!isset($errors['for_d'])) ...
and so on for input field a... 
```

所以问题是我有 7 个输入字段，这意味着我必须写下所有的可能性。有没有办法缩短这个？

多谢。

更新：

好吧，也许它不够清楚我想要实现什么。

我没有显示错误消息的问题。这很好用。每个特定输入字段的每个错误消息都可以正确显示。

问题是我每个都有不同的错误消息。我确实将其存储在更多维数组中：

```
if(empty($a)){$errors['a'][]="first failure for a"}
if(something else happens($a)){$errors['a'][]="second failure for a"}
...

if(empty($b)){$errors['b'][]="first failure for b"}
if(something else happens($b)){$errors['b'][]="second failure for b"}
... 
```

显示错误消息也不是问题。

```
<?php if (isset($errors['a'])):?>
<?php echo "<div class='erl'>"; 
echo $errors['a'][0];
echo "</div>";          
endif;?>
<?php endif;?> 
```

问题是同时只显示一条错误消息的条件！

所以这里有一些图形来说明我的意思：

这是目前的情况，所有的错误 div 会同时显示：

![f0](../Images/d96e6d5c863377fc6427b4beeaf16ac1.png)

这就是我想要实现的，同时只会显示一条错误消息，开始通过第一个输入字段进行检查：

![f2](../Images/6594e5dbbc115f7d1216380abdf79cf2.png)

这样用户将被迫在显示第二个错误层之前更正第一个输入字段：

![f5](../Images/c10f197a79a917bb18f25cf252cc3cc4.png)

希望现在清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:09:43.993

我不确定你在问什么。通常对于表单，如果您有很多字段，您可以创建一个错误数组，并将错误显示为表单顶部的项目符号列表，或者与其相应的表单元素内联。

```
<?php
$errors = array();

if (isset($_POST['submit'])) {
    // for each form field check it's valid, if it's not add a key to the errors array, i.e.
    if (empty($_POST['name'])) {
        $errors['name'] = 'Name is a required field';
    }
}

// display form
?> 
```

您现在将拥有一个`$errors`数组。如果它不为空，则您的表单有错误。然后，您可以通过以下两种方式之一显示这些错误。作为表单顶部的项目符号列表：

```
<!DOCTYPE html>
<html>
  <body>
    <form method="post">
<?php if (!empty($errors)): ?>
      <p>Please correct the following errors:</p>
      <ul>
<?php foreach ($errors as $error): ?>
        <li><?php echo $error; ?></li>
<?php endforeach; ?>
      </ul>
<?php endif; ?>
      <!-- the rest of your form -->
    </form>
  </body>
</html> 
```

或与每个表单字段内联：

```
<form method="post">
  <div class="input">
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" />
<?php if (isset($errors['name'])): ?>
    <div class="error"><?php echo $errors['name']; ?></div>
<?php endif; ?>
  </div>
</form> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:10:50.303

您如何进行错误处理？

如果你只设置`$errors['for_a']`，等等...如果输入字段有错误`for_a`，你可以这样做：

```
if (count($errors) > 0) {
    foreach ($errors as $input => $errormsg) {
        echo '<div id="errormessage">' . $errormsg . '</div>'
    }
} else {
    // continue normally
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:12:36.980

OO解决方案怎么样？就像是：

`<?php echo $errors->show('for_a', 'some text'); ?>`

其中 $errors 指向一个类，该类只有在它之前没有输出任何东西时才会输出“一些文本”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:13:25.147

可能最简单的解决方案是使用一个全局变量，如果您显示错误，该变量将保持不变。

例如：

```
$errorShown = false; 
```

还有一个功能：

```
function showError($whatError,$errArr){
  global $errorShown;
  if ((isset($errArr[$whatError])) && (!$errorShown)){
    echo $whatError;
    $errorShown = true;
  }
} 
```

并改为调用该函数。

```
<?php showError('for_a',$errors); ?> 
```

# internationalization - 在 Google+ 中共享多语言网站

> ID：11611261
> 
> 赞同：4
> 
> 时间：2012-07-23T11:03:39.437
> 
> 标签：internationalization, web, translation, google-plus

我有一个多语言网站，可以正确检测用户语言（网站的语言会相应更改），但无法在 Google+ 中正确共享。

该网站以两种语言存在，因此我设置了两组不同的元属性，每种语言各一组：

英语：

```
<link rel="canonical" href="http://en.perehana.com/"/>

<meta property="og:title" content="Perehana, the best way to find perfect gifts!"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="http://www.perehana.com"/>
<meta property="og:image" content="http://www.perehana.com/img/large-icon.jpg"/>
<meta property="og:site_name" content="Perehana"/>
<meta property="og:description" content="No gift ideas for Christmas, birthdays, weddings, births or any other event? Perehana allows you to enter gift ideas and to reserve your family and friends' ideas before buying them."/>
<meta property="og:locale" content="en_GB"/>
<meta property="fb:app_id" content="242045389185230"/>
<meta property="og:locale:alternate" content="fr_FR"/>

<meta itemprop="name" content="Perehana, the best way to find perfect gifts!"/>
<meta itemprop="description" content="No gift ideas for Christmas, birthdays, weddings, births or any other event? Perehana allows you to enter gift ideas and to reserve your family and friends' ideas before buying them."/>
<meta itemprop="image" content="http://www.perehana.com/img/square_logo.png"/> 
```

法语：

```
<link rel="canonical" href="http://fr.perehana.com/"/>

<meta property="og:title" content="Perehana, le meilleur moyen de faire plaisir à coup sûr !"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="http://www.perehana.com"/>
<meta property="og:image" content="http://www.perehana.com/img/large-icon.jpg"/>
<meta property="og:site_name" content="Perehana"/>
<meta property="og:description" content="En manque d'idées de cadeaux à l'approche de Noël, des anniversaires, des mariages ou des naissances ? Perehana est un site qui vous permet de saisir des idées-cadeaux et de réserver celles de votre famille et de vos amis. Vous pouvez ensuite aller les acheter sans qu'ils le sachent."/>
<meta property="og:locale" content="fr_FR"/>
<meta property="fb:app_id" content="242045389185230"/>
<meta property="og:locale:alternate" content="en_GB"/>

<meta itemprop="name" content="Perehana, le meilleur moyen de faire plaisir à coup sûr !"/>
<meta itemprop="description" content="En manque d'idées de cadeaux à l'approche de Noël, des anniversaires, des mariages ou des naissances ? Perehana vous permet de saisir des idées-cadeaux et de réserver celles de votre famille et de vos amis. Vous pouvez ensuite aller les acheter sans qu'ils le sachent."/>
<meta itemprop="image" content="http://www.perehana.com/img/square_logo.png"/> 
```

如您所见，语言环境和替代设置已正确设置。

这就是我调用 G+ API 的方式（这是一个法国用户的示例）：

```
<div class="g-plusone" data-size="medium" data-href="http://www.perehana.com"></div>

<script type="text/javascript">
    window.___gcfg = {
        lang: 'fr'
    };

    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script> 
```

根据用户的语言，显示正确的属性。

当我想通过 Google+ 共享它时会出现问题，即使我的 G+ 用户帐户是法语的，Google 自动为该站点选择的标题和描述都是英文的...... :-(

感谢任何能提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:35:59.097

我假设您正在使用 Accept-Language HTTP 标头在您的网站上执行此操作。

用于分享到 Google+ 的页面提取程序不会传播来自发起操作的用户的任何 HTTP 标头，因此您的网站将回退到默认语言。

您可以通过使用 GET 参数设置语言来解决此问题。如果您通过 +1 按钮、分享按钮或分享链接进行分享，您可以将当前语言设置为该插件的[目标 url 参数](https://developers.google.com/+/plugins/+1button/#target-url), `data-href`。

您似乎已经在 Google+ 问题跟踪器中为此提交了[功能请求。](http://code.google.com/p/google-plus-platform/issues/detail?id=323)如果不是您，请在问题上加注星标以接收更新通知。

# android - Android：库项目中的更改不会更改应用程序

> ID：11611272
> 
> 赞同：1
> 
> 时间：2012-07-23T11:04:06.633
> 
> 标签：android, eclipse, android-library

我的 Android 应用程序使用我在 Eclipse 中导入的库项目。到目前为止，一切都很好。但现在我尝试更改库项目（String.xml 和界面）。我可以在图形布局编辑器中看到这两种变化，但在主应用程序中它没有改变。

我已经尝试过，重新启动，清理，删除并再次添加，没有任何效果，有什么想法吗？

谢谢！

# opencv - 霍夫变换 n OpenCvSharp

> ID：11611273
> 
> 赞同：1
> 
> 时间：2012-07-23T11:04:17.490
> 
> 标签：opencv

我正在尝试在 OpenCvSharp 中使用霍夫变换，但我对此有很多疑问。有人可以在这里解释或给我一个示例代码吗？我在编程方面有点新手。请记住它是 OpenCvSharp，所以请尝试提供相应的帮助。先感谢您..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-10T16:02:58.343

这有点晚了，但对于查看这篇文章的其他用户可能会有用。

您应该对[边缘图像](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html)执行霍夫变换。您还需要为 Hough 结果定义内存存储。然后只需在 edgeImage 上使用 HoughLines2/HoughCircles：

```
CvSeq SeqLines;
SeqLines= edgeImage.HoughLines2(storage, HoughLinesMethod.Probabilistic, 1, Math.PI / 180, 80, 30, 10); 
```

现在，如果您愿意，可以根据角度过滤掉您不感兴趣的线条。

# python - 我们可以传递和覆盖 django 内置方法参数的值吗？

> ID：11611276
> 
> 赞同：0
> 
> 时间：2012-07-23T11:04:42.677
> 
> 标签：python, django, request

我正在使用 django 内置方法

> **重设密码**

这是在

> **django.contrib.auth.views**

，现在我想为它覆盖一些值，比如**domain_override**并想通过我的项目视图传递它的值。？

首先，是否有可能覆盖其变量值并仅从您的项目中传递它们，如果是，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:35:27.223

是的，您可以这样做，但您需要设置自己的视图来包装身份验证视图，这意味着您必须使用不同的 Url：

```
# in urls.py
url(r'^custom-reset/$', 'myapp.views.custom_password_reset', name='custom_password_reset'),

# in views.py
from django.contrib.auth.views import password_reset
def custom_password_reset(request, *args, **kwargs):
    # Do your custom processing of the args and kwargs
    return password_reset(request, *args, **kwargs) 
```

# jquery - 从 web sql 读取数据到变量中

> ID：11611281
> 
> 赞同：0
> 
> 时间：2012-07-23T11:05:12.993
> 
> 标签：jquery, cordova, web-sql

我正在使用 websql 数据库成功存储我的记录，并在读取它时第一次返回未定义，第二次返回实际值。

```
myDB.transaction(function(transaction) {
  transaction.executeSql('SELECT * FROM tempTelemedicine', [], function(transaction, output) {
    if (output != null && output.rows != null) {
      for (var i = 0; i < output.rows.length; i++) {
        var record = output.rows.item(i);
        this.date = record.date;
        this.firstName = record.firstName;
        this.lastName = record.lastName;
        this.address = record.address;
        this.clinic = record.clinic;
        this.mobile_no = record.mobile_no;
        this.age = record.age;
        this.age_afa = record.age_afa;
        this.number_oa = record.number_oa;
        this.number_oailsm = record.number_oailsm;
        this.months_sla = record.months_sla;
        this.sex = record.sex;
        this.predisposing = record.predisposing;
        this.color = record.color;
        this.stiff = record.stiff;
        this.shaking = record.shaking;
        this.tongue = record.tongue;
        this.incontinent = record.incontinent;
        this.head = record.head;
        this.eyes = record.eyes;
        this.communicates = record.communicates;
        this.weakness = record.weakness;
        this.comment = record.comment;
        alert("DATA SET");
        $('#lbUsers').append('<br>'+"new data"+'   '+ record.patientId
         + ' ' + record.date + ' ' + record.firstName + ' ' + record.lastName
         + ' ' + record.address + ' ' + record.clinic + ' ' + record.mobile_no
         + ' ' + record.age + ' ' + record.age_afa + ' ' + record.number_oa
         + ' ' + record.number_oailsm + ' ' + record.months_sla + ' '
         + record.sex + ' ' + record.predisposing + ' ' + record.color
         + ' ' + record.stiff + ' ' + record.shaking + ' ' + record.tongue
         + ' ' + record.incontinent + ' ' + record.head + ' ' + record.eyes
         + ' ' + record.communicates + ' ' + record.weakness + ' ' + record.comment);
      }
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:52:44.230

这是因为 JavaScript 的异步执行模式。
Web 浏览器和 JavaScript 共享一个线程来渲染和处理代码，在这种情况下，变量在被赋值之前被使用。

# windows-services - Tomcat service.bat 安装出错

> ID：11611286
> 
> 赞同：2
> 
> 时间：2012-07-23T11:05:42.217
> 
> 标签：windows-services, tomcat7

当我尝试运行以下代码时，

```
D:\apache-tomcat\bin>service.bat install 
```

我得到了这个错误。

```
The JAVA_HOME environment variable is not defined correctly
This environment variable is needed to run this program
NB: JAVA_HOME should point to a JDK not a JRE 
```

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:18:40.483

我找到了我的问题的答案。我应该补充，

```
set JAVA_HOME=<JAVA INSTALLED Location> 
```

就在`set "CURRENT_DIR=%cd%"`在`service.bat`文件中找到`bin`tomcat安装目录中的目录之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:11:39.163

1.  您需要定义环境变量 JAVA_HOME 并将其指向 java 安装位置。

或者

您可以在 TOMCAT_HOME\bin\startup.bat 中添加以下行

```
set 'JAVA_HOME=<JAVA INSTALLED Location>' 
```

2.如果你的机器上没有安装JDK，定义JRE_HOME并指向安装的JRE

# jquery - datatables jQuery插件获取单列数据并添加到textarea

> ID：11611287
> 
> 赞同：0
> 
> 时间：2012-07-23T11:05:43.453
> 
> 标签：jquery, jquery-datatables

我有一个使用 jQuerys 数据表插件（很棒的插件！！）的数据表，并且每次过滤或更新表时，我都需要将电子邮件列中的数据动态添加到文本区域。

这可以做到吗？如果是，那怎么办？

我浏览了网站上的所有文档，但找不到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:45:10.547

您可能可以从事件现场演示代码开始。他们的示例显示，`textarea`每当对数据表进行排序、过滤或分页时，时间戳都会附加到 a。这听起来很像你想做的事情：

[http://datatables.net/release-datatables/examples/advanced_init/dt_events.html](http://datatables.net/release-datatables/examples/advanced_init/dt_events.html)

```
function eventFired( type ) {
    var n = document.getElementById('demo_info');
    n.innerHTML += '<:div>:'+type+' event - '+new Date().getTime()+'<:/div>:';
    n.scrollTop = n.scrollHeight;      
}

$(document).ready(function() {
    $('#example')
        .bind('sort',   function () { eventFired( 'Sort' ); })
        .bind('filter', function () { eventFired( 'Filter' ); })
        .bind('page',   function () { eventFired( 'Page' ); })
        .dataTable();
} ); 
```

那应该照顾您处理过滤的要求。我不确定我是否理解“更新”的要求，但如果您正在寻找一种在数据表处于活动状态时运行代码的方法，此示例可能会有所帮助：

[http://datatables.net/release-datatables/examples/advanced_init/events_live.html](http://datatables.net/release-datatables/examples/advanced_init/events_live.html)

```
$('#example tbody tr').live('click', function () { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:42:35.497

我从 Allan @ datatables 那里得到了这个答案：

> 使用 fnDrawCallback 运行一个函数，该函数将在表更新时触发。然后也许使用 fnGetData 或插件 fnGetColumnData API 方法来获取数据并使用标准 DOM / jQuery 方法将其粘贴到文本字段中。
> 
> 艾伦

我按照这个方法得到了我想要的结果。

希望这对其他人有帮助。

C

# asp.net-mvc-3 - 在 mvc3 中调用 aspx 页面会出错 - 视图必须派生自 ViewPage、ViewPage 、 ViewUserControl 或 ViewUserControl

> ID：11611288
> 
> 赞同：0
> 
> 时间：2012-07-23T11:05:44.637
> 
> 标签：asp.net-mvc-3

我在 mvc3 中调用一个 aspx 页面。

它给出了一个错误

> '~/WebForms/Calendar/Schedule.aspx' 中的视图必须派生自 ViewPage、ViewPage、ViewUserControl 或 ViewUserControl。

我在 global.asax.cs 中添加了以下代码

```
routes.MapPageRoute(
    "Schedule",
    "Classes/ManageSchedule",
    "~/WebForms/Calendar/schedule.aspx"
); 
```

以及 Classes 控制器中的以下代码

```
public ActionResult ManageSchedule()
{        
    return View("~/WebForms/Calendar/Schedule.aspx");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:17:20.703

控制器操作不会提供您的 aspx 页面。您应该从控制器中删除 ManageSchedule 操作。

为了将您的 url /Classes/ManageSchedule 路由到 /WebForms/Calendar/schedule.aspx，只需将您拥有的 MapPageRoutes 移到 MVC 用于注册控制器路由的 routes.MapRoute() 上方。路线的工作方式是 - 第一场比赛获胜。

# android - 有没有办法在不使用 JNI 的情况下本地访问 android DPI？

> ID：11611290
> 
> 赞同：5
> 
> 时间：2012-07-23T11:05:49.303
> 
> 标签：android, opengl-es, android-ndk, dpi

我的 android 游戏使用 OpenGL 和 Android NDK。我目前通过从我的 Activity/GLSurfaceView 进行 JNI 本机调用，将必要的 dpi 值作为参数传递。

目前我正在使用：

```
 // request an instance of DisplayMetrics, say 'dm' from android.
    float densityFactor = dm.density;

    // pass this as a parameter using JNI call
    myCustomNativeMethod(densityFactor); # implementation in a 'game.c' file 
```

我只是想知道是否可以在不使用 JNI 接收它们（参数）的情况下访问 android 环境参数。可能就像，导入一些低级 NDK 头文件（.h），这将帮助我直接与 UI 系统通信或什么？

我的意思是：

```
 #import <android_displayparams.h>
    ...        
    float densityfactor = getDisplayParamDensity(); // <- Is this possible? 
```

注意：出于好奇，这是一个问题，我知道这样的机制可能不是一个好习惯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-10T21:33:12.837

使用 Java Activity / GLSurfaceView 设置将 DPI 作为参数传递看起来是最好的解决方案。

如果您使用 NativeActivity，您可以使用以下方法获得[DisplayMetrics.densityDpi](http://developer.android.com/reference/android/util/DisplayMetrics.html#densityDpi)：

```
#include <android/configuration.h>
#include <android_native_app_glue.h>
#include <android/native_activity.h>

int32_t getDensityDpi(android_app* app) {
    AConfiguration* config = AConfiguration_new();
    AConfiguration_fromAssetManager(config, app->activity->assetManager);
    int32_t density = AConfiguration_getDensity(config);
    AConfiguration_delete(config);
    return density;
} 
```

不幸的是，没有获取 DisplayMetrics.xdpi 和 DisplayMetrics.ydpi 的 API。

# c# - 如何在我的 ASP.NET 应用程序中为我的 ListView 使用 ItemCommand 事件

> ID：11611291
> 
> 赞同：6
> 
> 时间：2012-07-23T11:06:04.950
> 
> 标签：c#, asp.net, listview, active-directory, itemcommand

我有一个带有 ListView 的 ASP.NET 应用程序。在我的 ListView 的每一行中，我都有一个 LinkBut​​ton，可以打开一个新的网络表单“Benutzer.aspx”。我的问题是我没有得到这一行的索引。我使用 ItemCommand 事件，但它不起作用:(

这是我的代码：

ASPX：

```
...

        <ItemTemplate>

            <tr runat="server"> 

                <td align="left" ><asp:Label ID="Label1" Text='<%# Eval("Benutzer") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefon") %>' runat="server" /></td>

             <td align="left"><asp:LinkButton runat="server" Text="Anzeigen" CommandName="Anzeigen" OnCommand="ListView1_ItemCommand" CommandArgument="myArguments"></asp:LinkButton></td>

            </tr>

        </ItemTemplate>

... 
```

cs 文件：

```
...

protected void ListView1_ItemCommand(object sender, ListViewCommandEventArgs e)
        {
            if (e.CommandName == "Anzeigen")
            {
                Label lbText = (Label)e.Item.FindControl("Label2");

               string email = lbText.Text;

               Session["email"] = email;

               Response.Redirect("Benutzer.aspx");

            }
        }

... 
```

什么事 ：（

塔拉索夫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T11:53:24.083

试试这个：

首先，您需要拥有按钮的索引。所以在 html 代码中在按钮的 CommandArgument 中添加这个来获取索引：

```
CommandArgument='<%# Container.DataItemIndex %>' 
```

然后在代码隐藏中：

```
if (e.CommandName == "Anzeigen")
{
      Label lbText = ListView1.Item[e.CommandArgument].FindControl("Label2");
      string email = lbText.Text;           

           Session["email"] = email;           

           Response.Redirect("Benutzer.aspx");           
} 
```

希望我有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:11:34.220

您找不到该控件，因为它包含在另一个服务器控件的子控件集合中：

```
<tr runat="server"> 
```

您需要尝试递归查找控件：

看一看

[在 ASP.NET 中查找控件的更好方法](https://stackoverflow.com/q/4955769/1268570)

或者您可以使用此扩展方法：

```
public static class ControlExtensions
{
    public static Control FindControlRecursively(this Control control, string targetControlID)
    {
        if (control == null)
        {
            return null;
        }

        var ctrl = control.FindControl(targetControlID);

        if (ctrl == null)
        {
            foreach (Control child in control.Controls)
            {
                ctrl = FindControlRecursively(child, targetControlID);

                if (ctrl != null)
                {
                    break;
                }
            }
        }

        return ctrl;
    }
} 
```

用法：

```
var ctrl = e.Item.FindControlRecursively("your control ID"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T10:42:48.737

您提供的代码很好......“只需从您的 listview 属性中删除'CommandArgument'，bcoz ..它已经具有您正在寻找的数据索引。通过指定命令参数，您将覆盖默认参数。所以只需删除命令参数，您的代码将正常工作...... :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-09T05:44:14.810

我是一个 VB 程序员检查这个方法可能会给你一些想法

将列表与数据源绑定后，在 itemCommand 中执行此操作

```
Dim <sometext> As Label = TryCast(e.Item.FindControl("Anzeigen"), Label)

    If e.CommandName = "Anzeigen" Then
     'do what ever you like 
     'also you can use <sometext> if you want to extract data from list
     'simply use <sometext>.<whatproperty>, you can also store it in sessions like the email you are using.

         Session("email") = email         

       Response.Redirect("Benutzer.aspx");  
    End If 
```

让我知道它是否可以帮助您解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-03T19:09:01.287

这是 HTML，然后构建`OnItemCommand`.

```
<asp:ListView ID="lvFiles" runat="server"  DataKeyNames="FileName" OnItemCommand="lvFiles_ItemCommand">
  <ItemTemplate>
    <tr runat="server">
      <td style="width:80px">
        <asp:LinkButton runat="server" 
                        ID="SelectEmployeeButton" 
                        Text="Download File"   
                        CommandName='<%#Eval("FileName")%>'
                        CommandArgument='<%#Eval("FileName")%>' />
      </td> 
    </tr>
  </ItemTemplate>
</asp:ListView> 
```

这是后面的代码...

```
protected void lvFiles_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    string v = e.CommandArgument.ToString(); 
} 
```

# django - 用“从头开始的 Django”学习 django：过时了吗？

> ID：11611292
> 
> 赞同：2
> 
> 时间：2012-07-23T11:06:08.120
> 
> 标签：django

我发现了这个优秀的视频教程系列，“从头开始的 Django”，但由于它是在 09/08 上传的，我想知道它是否仍然值得通过它，否则我会教我和“过时”的方式与 django 一起工作。

你怎么看？

在此先感谢，伊格纳西奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:23:51.963

我没有看过视频，但我怀疑它已经过时了。

如果教程是 2008 年的，那么它可能基于 Django 1.0。在我写这篇文章时是 2012 年，最新版本是 Django 1.4。

Django 非常擅长不破坏版本之间的东西，但是您必须进行一些更改才能使 1.0 项目在 1.4 中工作。如果您是 Django 新手，您最终可能会浪费大量时间来处理这些更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:03:57.093

虽然我个人不知道“从头开始的 Django”，但我不建议使用 2-3 岁的关于 Django 深入部分的教程。

Django 的很大一部分仍然是相同的（例如表单），但是在 Django ORM 和 Django Admin 中添加/修改了很多很酷的东西。所以这真的取决于你在学习什么。如果它是一个简单的部分或只是一个初步的外观，那么它可能是一个很好的起点。

如果您想要深入的知识，那么您将需要更新的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T23:58:22.513

我认为 teamtreehouse 有一些 django 视频（虽然我从未看过它们），但我建议你购买 django 创作者编写的 django 书“The Definitive Guide to Django: Web Development Done Right”。但一定要拿到第二版。你还应该看看“http://harry.pythonanywhere.com/tutorial/1/”，他有一些非常好的教程，你应该学习。但是，如果您真的想要视频，请尝试[http://www.youtube.com/user/programmersbook](http://www.youtube.com/user/programmersbook)他拥有完整的 django 教程集合。这些唯一的缺点是前 16 个视频没有声音。无论如何，django 祝你好运！

# magento - 如何在magento的注册页面中显示自定义字段？

> ID：11611295
> 
> 赞同：0
> 
> 时间：2012-07-23T11:06:16.703
> 
> 标签：magento

我是magento的新手。我创建了一个自定义模块，应该将自定义字段添加到客户注册页面。我已成功向客户添加了一个自定义字段，在编辑客户或添加新客户时我可以在管理员/客户上看到该字段。我怎样才能让它也显示在注册页面上？

这是我的模块的安装文件：

**mysql4-install-0.1.0.php**

```
<?php
$installer = $this;
$installer->startSetup();

$setup = new Mage_Eav_Model_Entity_Setup('core_setup');

$entityTypeId     = $setup->getEntityTypeId('customer');
$attributeSetId   = $setup->getDefaultAttributeSetId($entityTypeId);
$attributeGroupId = $setup->getDefaultAttributeGroupId($entityTypeId, $attributeSetId);

$setup->addAttribute('customer', 'resale', array(
    'input'         => 'text',
    'type'          => 'varchar',
    'label'         => 'Resale number',
    'visible'       => 1,
    'required'      => 1,
    'user_defined' => 1,
));

$setup->addAttributeToGroup(
 $entityTypeId,
 $attributeSetId,
 $attributeGroupId,
 'resale',
 '999'  //sort_order
);

$oAttribute = Mage::getSingleton('eav/config')->getAttribute('customer', 'resale');
$oAttribute->setData('used_in_forms', array('adminhtml_customer','customer_account_create'));
$oAttribute->save();

$installer->endSetup(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:35:43.623

您应该向 register.html 添加代码，如下所示：

```
<div class="field">
  <label for="my_attribute" class="required"><em>*</em><?php echo $this->__('My Attribute') ?></label>
  <div class="input-box">
    <input type="text" name="my_attribute" id="my_attribute" value="<?php echo $this->htmlEscape($this->getFormData()->getMyAttribute()) ?>" title="<?php echo $this->__('My Attribute') ?>" class="input-text required-entry" />
  </div>
</div> 
```

# jsf - 使用 h:commandButton 通过 POST 打开新窗口

> ID：11611296
> 
> 赞同：13
> 
> 时间：2012-07-23T11:06:22.053
> 
> 标签：jsf, http-post, commandbutton, new-window

我需要通过单击 POST 在新窗口中打开 JSF 页面`<h:commandButton>`。我知道我可以使用 JavaScript 来实现这一点。但我想使用 JSF 而不是 JavaScript 来实现这一点。

我怎样才能做到这一点？我正在使用 JSF 2.0。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-24T13:08:32.303

唯一的非 JS 方式是`target="_blank"`在 parent中设置`<h:form>`。

```
<h:form target="_blank">
    ...
    <h:commandButton value="Open in new Window" />
</h:form> 
```

但是，这会影响以完全相同的形式执行的*所有*非 ajax(!) 操作。因此，如果您很聪明，请将不应在新窗口中打开的操作设为 ajax 操作。但是，ajax 也是 JavaScript，您提到您不想使用 JS（希望您在发现 PrimeFaces 实际上充满 JavaScript 时不要感到震惊）。

如果您绝对需要将其限制为单个操作，那么您真的不能到处向 JavaScript 寻求一点帮助。

```
<h:form>
    ...
    <h:commandButton value="Open in new Window" onclick="this.form.target='_blank'" />
</h:form> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T09:52:24.060

当您将目标限制为单个操作时，您可能希望表单处于初始状态。通过 oncklick 操作，您可以将表单的目标设置为 _blan 页面。点击后，页面在新标签页/页面中打开（触发动作事件）。最后，触发 onblur 动作并将表单再次设置为初始状态（其余按钮将在 _self 页面中打开） 使用此代码，您可以限制为仅 ah:commandbutton 在新页面中打开。其余按钮将在 self 页面中打开：

```
 <h:commandButton
       onclick="this.form.target='_blank'"
       onblur="this.form.target='_self'"
       id="listadoRebuts"
       action="#{giaquaBusquedaCorte.abrirListadoRebuts}"
       value="#{msg.seqVisorbtnRecibos}">
    </h:commandButton> 
```

# jquery - 保存到数据表中的 csv

> ID：11611297
> 
> 赞同：1
> 
> 时间：2012-07-23T11:06:29.040
> 
> 标签：jquery, csv, datatables

我有一张桌子。在表中，最后一列仅包含两个图像，通过使用数据表，我将表的记录保存为 csv 格式。但我想从 csv 文件中排除最后一列，因为它只包含 2 个图像。怎么做。请帮我。我的代码是这样的：

```
$('#example').dataTable( {
   "bProcessing": true,
   "bJQueryUI": true,
   "sPaginationType": "full_numbers",
   "sDom": 'T<"clear">lfrtip',
   "oLanguage": {
       "sSearch": "Search all columns:"
       },
   "oTableTools": {                     
       "aButtons": [{
                     "sExtends": "csv",
                     "sButtonText": "Save to CSV"
                     }]
   },
   "aoColumns": [
       null,
       null,
       null,
    { "bSortable": false }, // disable the sorting property for checkbox header
    null,
    null,
    null, 
    { "bSortable": false } // disable the sorting property for checkbox header
       ]
} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:17:19.400

通过使用列默认值，可以通过使列不可见来做到这一点。

```
"aoColumnDefs": [{
    "bSearchable": false,
    "bVisible": false,
    "aTargets": [4]
}] 
```

# linux - WGET 从域下载默认网页

> ID：11611302
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:06:49.943
> 
> 标签：linux, http, wget

如何使用 wget 从域下载默认网页？例子：

*www.mydomain.com*返回**index.html**作为默认页面，*www.newdomain.com*返回**default.html**作为默认页面。因此，使用 wget as`wget [options] www.mydomain.com`必须下载 index.html 并且`wget [options] www.newdomain.com`必须下载 default.html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:10:37.773

```
wget [options] www.mydomain.com/index.html
wget [options] www.newdomain.com/default.html 
```

`Wget`支持文件名而不仅仅是域名。

您永远不会知道文件的默认名称是什么（作为最终用户），只有服务器知道这一点。当您向 www.domain.com 发送响应时，www.domain.com 的网络服务器得到的是`GET /`网络服务器，然后在 / 目录中查找默认文件是什么（index.html、default.html 或服务器的其他任何内容） admin 已设置为默认值。然后您只需将该副本发送回来。因此，作为最终用户，您无需执行任何操作即可获取默认页面，它会自行发生。

# javascript - JavaScript 日期验证 RegEx 还是 JS？

> ID：11611309
> 
> 赞同：0
> 
> 时间：2012-07-23T11:07:19.290
> 
> 标签：javascript, regex, validation, date, time

我正在使用设备内置的日期选择器，它以 YYYY/MM/DD 格式返回日期，并以 HH:MM 24 小时格式返回时间。

总体返回的字符串是 YYYY/MM/DDT/HH/MM T 作为分隔符。

验证它以使其匹配格式 YYYY/MM/DD/T/HH/MM Regex 的最佳方法是什么？JavaScript 是否对构建的日期/时间进行了验证，即使我必须在 T 处拆分，所以我将日期和时间放在单独的变量中？

什么是最好的方法/算法来做到这一点以及性能明智？

如果我将变量拆分为数组，例如...

["YYYY/MM/DD","HH:MM"]

是否有一个 regex 或 js 函数可以最好地验证这一点？性能是关键。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:12:55.663

我不会担心性能，大概你不会在一个紧密的循环中这样做数十万次。

[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)是一种很好的方法，而且很容易编写；如果您创建一次正则表达式并重复使用它，它也应该表现良好。

假设您的格式示例是一个错字并且您的意思是`YYYY/MM/DDTHH:MM`，现代 JavaScript 引擎也应该支持使用该字符串作为参数来`new Date(...)`提供您更改`/`为`-`（您可以通过 轻松完成`String#replace`）。那是因为它符合被定义为 ES5 一部分的[简化的 ISO-8601 格式。](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.15)但是较旧的引擎（例如 IE8 和更早版本）可能不支持它，您必须在您打算支持的浏览器上进行测试。但如果是真的`YYYY/MM/DDT/HH/MM`，请忽略这一段。

# android - 检测扬声器是否忙的全局（或静态）方法？

> ID：11611310
> 
> 赞同：1
> 
> 时间：2012-07-23T11:07:27.000
> 
> 标签：android, android-mediaplayer

Android 的[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)类有一个方法可以告诉我它是否正在播放：[isPlaying()](http://developer.android.com/reference/android/media/MediaPlayer.html#isPlaying%28%29)

但这是针对我可以访问的[MediaPlayer的特定实例。](http://developer.android.com/reference/android/media/MediaPlayer.html)

有没有办法判断当前是否*有*声音通过手机的**扬声器**发出？

也就是说，即使来自我无权访问且我无法控制的其他应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:16:58.560

我想你正在寻找这个:)

这是一些方便的代码，可以在音频播放完毕之前休眠：

```
 AudioManager manager = (AudioManager)this.getSystemService(Context.AUDIO_SERVICE);
   while(manager.isMusicActive())
    {
        Log.d("music", "music is active");
        try
        {
            Thread.sleep(500);
        }
        catch (InterruptedException e)
        {
            Log.e("music", "interrupted waiting for music to stop");
        }
        Log.d("music", "done playing music");
    } 
```

我希望这将帮助您完成工作。

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:26:38.833

由于缺乏权威和可验证的答案，我将回答这个问题：

**不**，没有办法判断当前是否有声音通过手机的扬声器发出。

# javascript - 排列具有相同数据的多个对象（减少冗余）

> ID：11611317
> 
> 赞同：0
> 
> 时间：2012-07-23T11:08:02.263
> 
> 标签：javascript, jquery

我正在开发一个 Web 应用程序，我使用**jquery 验证**作为：

```
$("#register").validate({
    rules: {
        emailID: {
            required: true,
            email: true
        },
        pass: {
            required: true,
            minlength: 6
        },
        user_email: {
            required: true,
            email: true
        },
        user_pass: {
            required: true,
            minlength: 6
        }
    } 
```

**一切正常**，但问题是作为对象`emailID`，并且`user_email`两者都具有**相同的数据**，并且对于`pass`和`user_pass`，我如何在不更改我在 html 中的属性的情况下将**它们排成一行，如下所示：**`name`

```
$("#register").validate({
    rules: {
        emailID, user_email:
        {
            required: true,
            email : true
        }        
    } 
```

我知道这种结构不正确。

而且因为我有**很多具有相同数据的对象，所以****重复**似乎并不好

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:18:05.203

```
function RequiredRule( email, minlength ) {
    this.email = email;
    this.minlength = minlength;
    this.required = true;
}

$("#register").validate({
    rules: {
        emailID: new RequiredRule(true),
        pass: new RequiredRule(false, 6),
        user_email: new RequiredRule(true),
        user_pass: new RequiredRule(false, 6)
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:13:46.160

```
var one = {
    required: true,
    email: true
},
    two = {
        required: true,
        minlength: 6
};

$("#register").validate({
    rules: {
        emailID: one,
        pass: two,
        user_email: one,
        user_pass: two
    }
}); 
```**

# jquery - 如何使用 validate.js 验证 ckeditor？

> ID：11611318
> 
> 赞同：0
> 
> 时间：2012-07-23T11:08:08.930
> 
> 标签：jquery, validation, ckeditor

我想在将 CKEDITOR 加载到具有 id="txtNews" 并且它具有 name="news" 的文本区域后验证它。我想使用 validate.js 来验证 ckeditor。如果 ckeditor 为空白并且如果我单击“保存”按钮，则 ckeditor 应标记为“*”红色。并且不应该进一步进行。

我尝试验证其他字段，包括 textarea 等，但是当我将 CKEDITOR 加载到 textarea 并使用它的 name 属性来验证使用规则和消息作为传递给 validate() 函数的对象作为参数时，只有具有 CKEDITOR 的 textarea 未被验证。
注意：我只想使用 validate.js 进行验证，并且必须使用 name 属性进行验证。
有人可以给我答案吗？

这张图片会有所帮助，我有什么问题。 ![在此处输入图像描述](../Images/924174d20ac0b11a76dc6ec49d10e096.png)

**HTML**代码如下：

```
 <div class="frmlabel">
                    <label class="sfFormlabel">
                        NewsTitle</label>
                </div>
                <div class="inputclass">
                    <textarea id="txtNewsTitle" name="newstitle" class="sfTextarea"></textarea>
                </div>
            </div>
            <div class="fieldwrapper">
                <div class="frmlabel">
                    <label class="sfFormlabel">
                        Searach Key</label>
                </div>
                <div class="inputclass">
                    <textarea id="txtNewsSearchKey" name="search" class="sfTextarea"></textarea>
                </div>
            </div>
            <div class="fieldwrapper">
                <div class="frmlabel">
                    <label class="sfFormlabel">
                        News</label>
                </div>
                <div class="inputclass">                
                    <textarea id="txtNews" name="news" class="sfTextarea"></textarea>
                </div>
            </div>
     <div class="sfButtonwrapper">
                <button type="button" id="btnSaveNews" class="sfBtn">
                    Save</button>
                <button id="btnCancelNews" class="sfBtn">
                    Cancel</button>
            </div> 
```

和**JS**代码

```
 delete CKEDITOR.instances['txtNews'];
                    $("#txtNews").ckeditor();              

                    $('#btnSaveNews').bind('click', function() {

                        var v = $("#form1").validate({

                            ignore: ':hidden',
                            messages: {
                                newstitle: {
                                    required: '*'
                                },
                                search: {
                                    required: '*'
                                },
                                news: {
                                    required: '*'

                                },
                                date: {
                                    required: '*'
                                }
                            },
                            rules: {
                                newstitle: {
                                    required: true
                                },
                                search: {
                                    required: true
                                },
                                news: {
                                    required: true,
                                    news:true                                  
                                },
                                date: {
                                    required: true
                                }
                            }
                        });  

                        if (v.form()) {
                            News.SaveNews();  

                            return false;
                        }

                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:20:51.760

看看[这个问题](https://stackoverflow.com/questions/3147670/ckeditor-update-textarea)。

这些答案中使用的技术是使用 CKEditor 内容更新 textarea，然后对其进行验证。

# android - PhoneGap 应用程序读取远程 html 内容

> ID：11611321
> 
> 赞同：0
> 
> 时间：2012-07-23T11:08:19.110
> 
> 标签：android, html, cordova

我可以使用在运行时从远程位置读取 html 内容的 phonegap 开发混合应用程序吗？

如果是，它适用于 Android 和 iOS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:30:52.317

是的，这在 Android 上很容易做到，上面的评论提供了一种方法。另一种方法是对您想要的 HTML 进行 AJAX 请求并将其注入您的页面。然而，即使技术上可行，Apple 也不会喜欢这个。你最好通过 AJAX 请求数据，然后在你的应用程序中显示数据，而不是拉下纯 HTML。

# entity-framework - EF 4.3 Code First 迁移 - 每次迁移的种子

> ID：11611322
> 
> 赞同：2
> 
> 时间：2012-07-23T11:08:24.547
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

最近开始使用 Code First 迁移，并希望在每个**Up**方法中播种数据。

这可能吗？

IE。

1.  创建数据库表
2.  填写数据

对于下降：

1.  从连接表中删除数据
2.  删除表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T12:16:48.780

Yes it is possible but you must do it through executing SQL commands. Use `Sql` method in both `Up` and `Down` methods of your migration to execute `INSERT` and `DELETE` SQL commands.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T12:45:31.127

```
public partial class DBInitializer : IDatabaseInitializer<DBContext>
{
    public void InitializeDatabase(DBContext context)
    {

        var cfg = new Migrations.Configuration();
        var migrator = new DbMigrator(cfg);

        List<string> pendingMigrations = new List<string>(migrator.GetPendingMigrations());

        foreach (string migration in pendingMigrations)
        {
            Console.WriteLine("Updating Migration:" + migration);
            migrator.Update(migration);
            Console.WriteLine("Updated Migration:" + migration);

            if (migration.Contains("AddMyProperty"))
            {
                // seed data codes
                context.SaveChanges();
            }                
        }

    }

} 
```

# jquery - jqplot - 日期轴渲染器：国际化

> ID：11611324
> 
> 赞同：7
> 
> 时间：2012-07-23T11:08:33.780
> 
> 标签：jquery, internationalization, jqplot

我使用*jqplot*，并且我的 x 轴上有日期。

我使用*DateAxisRenderer*插件，但我想将日期转换为我当前的语言环境。

例如，**对于英语**

```
Jan 2012 
Feb 2012... 
```

对于**法语**

```
Jan 2012
Fév 2012... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T15:43:17.923

## 一点解释

jqPlot 在内部使用 jsDate：[http ://sandbox.kendsnyder.com/date2/](http://sandbox.kendsnyder.com/date2/)

jsDate 具有内置的本地化支持和区域设置检测。但是，此功能仅限于内部区域表上的几种预配置语言（请参阅**2.**）。

**1\. 对于幸运儿**

因为在我的 jqPlot (v1.0.4) 版本中，法语包含在此表中（可能是作者的礼物），所以您只需在标签`lang`上设置属性：`<html>`

```
<html lang="fr"> 
```

等等...

**2.外国人**

如果您想在运行时添加自己缺少的语言，可以使用以下说明：

```
$(document).ready(function(){
    // Add a new localization
    $.jsDate.regional['it'] = {
        monthNames: ['Gennaio','Febbraio','Marzo','Aprile','Maggio','Giugno','Luglio','Agosto','Settembre','Ottobre','Novembre','Dicembre'],
        monthNamesShort: ['Gen','Feb','Mar','Apr','Mag','Giu','Lug','Ago','Set','Ott','Nov','Dic'],
        dayNames: ['Domenica','Lunedi','Martedi','Mercoledi','Giovedi','Venerdi','Sabato'],
        dayNamesShort: ['Dom','Lun','Mar','Mer','Gio','Ven','Sab'],
        formatString: '%d-%m-%Y %H:%M:%S'
    };
    // Do not forget to call
    $.jsDate.regional.getLocale();
}); 
```

不要忘记调用`$.jsDate.regional.getLocale()`以刷新内部设置并`<html>`相应地设置标签。

我的看起来像：

```
<html lang="it"> 
```

就这样...

如果您无法控制标签的`html`标记，您可以使用

```
document.documentElement.setAttribute('lang', 'it'); 
```

`lang`设置中间元素（如环境）不起作用`div`。

# wpf - 将属性绑定到 CustomDataTemplate

> ID：11611326
> 
> 赞同：0
> 
> 时间：2012-07-23T11:08:51.123
> 
> 标签：wpf, xaml, data-binding, celltemplate

我有一个物品清单

```
public List<Item> MyItems { get; set; } 
```

显示在 DataGrid 上。一列显示由模板定义的状态“图标”。代码看起来像这样：

列模板 [...]

```
<DataGridTemplateColumn Header="Status">
  <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
      <Grid Height="18" Width="35">
        <Rectangle Fill="{Binding Status.Background}" />
        <TextBlock Text="{Binding Status.Text}" />
      </Grid>   
    </DataTemplate>
  </DataGridTemplateColumn.CellTemplate>    
</DataGridTemplateColumn> 
```

数据模型 [...]

```
public class Item
{
    public int ItemId { get; set; }
    public string Name { get; set; }
    public int StatusId { get; set; } 
    public Status Status { get; set; }
}
public class Status
{
    public int StatusId { get; set; }
    public int Text { get; set; }

    public Brush Background
    {
      get
      {
         //Colour logic goes here
      }
    }
} 
```

我想从数据模型中删除颜色逻辑并将其放入资源文件中。

```
<DataGridTemplateColumn Header="Status" CellTemplate="{StaticResource MyCustomTemplate}" </DataGridTemplateColumn> 
```

我希望到目前为止我朝着正确的方向前进，但此时我迷路了，因为我不知道如何将 Status 属性（或 StatusId）绑定到 MyCustomTemplate。

如果有人可以帮助我，那就太好了。

**编辑**

这工作正常。

```
<DataGridTemplateColumn Header="V" Width="25" IsReadOnly="True" >
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <ic:CloseIcon  Visibility="{Binding DockStatus, Converter={StaticResource CloseIconDisplayVisibilityConverter}}" />
                <ic:DockIcon Visibility="{Binding DockStatus, Converter={StaticResource DockIconDisplayVisibilityConverter}}" />
                <ic:UndockIcon Visibility="{Binding DockStatus, Converter={StaticResource UndockIconDisplayVisibilityConverter}}" />
            </StackPanel>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

模型更改时，这不会刷新 UI（DockStatus 更改）

```
<DataGridTemplateColumn Header="V" Width="25" IsReadOnly="True" CellEditingTemplateSelector="{StaticResource DockIconCellTemplateSelector}}"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:29:12.297

如果只是为特定项目或具有特定 的项目选择正确的背景颜色`StatusId`，则可以编写[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter)。转换器只需将 a 转换`int`为 a `Brush`：

```
[ValueConversion(typeof(int), typeof(Brush))]
public class StatusColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is int)
        {
            int statusId = (int)value;
            // create Brush from id here and return it
        }

        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

您将像这样修改您的绑定：

```
<Rectangle Fill="{Binding Status.StatusId, Converter={StaticResource StatusColorConverter}}" /> 
```

# php - 分组中每条记录的MySQL子查询

> ID：11611333
> 
> 赞同：5
> 
> 时间：2012-07-23T11:09:41.903
> 
> 标签：php, mysql, group-by

这是较早问题的更高级的续集。

[这是一个 SQLFiddle 的链接，使事情更清楚](http://sqlfiddle.com/#!3/db932)

我需要返回类似的东西（对于每个位置）：

> 一楼
> `---------------`
> 车库
> -
> 暖气厨房
> - 炊具
> - 冰箱

会有比这更多的关卡，但如果我能开始，我希望能够根据需要走得更远。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:16:40.810

由于 SQL 无法返回您在上面格式化的嵌套记录，因此您只需要返回一个查询，该查询按楼层然后按 sub_location 对您的行进行排序。你会得到每一行的`location`和`sub_location`重复的，但是在你的应用程序代码循环中打印结果时，你可以像上面那样格式化它们。

```
SELECT
  location.location_name,
  sublocation.sub_location_name,
  asset.asset_name
FROM
  location
  LEFT JOIN sub_location ON location.location_key = sublocation.location_key
  LEFT JOIN assets ON sub_location.sub_location_key = assets.sub_location_key
ORDER BY
  location.location_name,
  sub_location.sub_location_name 
```

在应用程序中循环遍历行集时，您只需在新位置或 sub_location 更改时打印它。格式化是在代码中完成的。

假设您的行都在数组中`$rowset`：

```
// Store location, sub_location for each loop
$current_loc = "";
$current_subloca = "";
foreach ($rowset as $row) {
  // If the location changed, print it
  if ($row['location'] != $current_loc) {
    echo $row['location_name'] . "\n";
    // Store the new one
    $current_loc = $row['location_name'];
  }
  // If the sub_location changed, print it
  if ($row['sub_location'] != $current_subloc) {
    echo $row['sub_location_name'] . "\n";
    $current_subloc = $row['sub_location_name'];
  }
  echo $row['asset_name'] . "\n";      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:33:50.467

您可以使用此解决方案显示已知深度的层次结构：

```
SELECT a.name
FROM
(
    SELECT 
        CONCAT('- - - - - - - - - -> ', a.asset_name) AS name,
        CONCAT(c.location_key, c.location_name, b.sub_location_name, a.asset_name) AS orderfactor
    FROM asset a
    INNER JOIN sub_location b ON a.sub_location_key = b.sub_location_key
    INNER JOIN location c ON b.location_key = c.location_key

    UNION ALL

    SELECT 
        CONCAT('- - - - -> ', a.sub_location_name),
        CONCAT(b.location_key, b.location_name, a.sub_location_name)
    FROM sub_location a
    INNER JOIN location b ON a.location_key = b.location_key

    UNION ALL

    SELECT
        location_name,
        CONCAT(location_key, location_name)
    FROM location
) a
ORDER BY a.orderfactor 
```

对于更多级别，您可以在子选择中添加更多联合。

* * *

## [SQLFiddle 演示](http://sqlfiddle.com/#!2/db932/14/0)

* * *

示例结果集：

```
Ground Floor
-----> Garage
----------> Radiator
-----> Kitchen
----------> Cooker
----------> Fridge
First Floor
-----> Bedroom
----------> Radiator
----------> Taps
Second Floor
-----> Bathroom
----------> Shower
----------> Taps
----------> Toilet
Third Floor 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:32:32.827

如果是在 MySQL5

```
SELECT L.location_name, GROUP_CONCAT(DISTINCT S.sub_location_name), GROUP_CONCAT(A.asset_name) 
FROM location L
INNER JOIN sub_location S ON L.location_key = S.location_key
INNER JOIN asset A ON A.sub_location_key = S.sub_location_key
GROUP BY S.sub_location_name ORDER BY L.location_key 
```

[http://sqlfiddle.com/#!2/db932/9](http://sqlfiddle.com/#!2/db932/9)

# joomla - Joomla 2.5 - 未找到视图

> ID：11611335
> 
> 赞同：0
> 
> 时间：2012-07-23T11:09:46.783
> 
> 标签：joomla, joomla-extensions, joomla2.5, joomla1.7

我下载了 Joomla 1.7/2.5 的事件列表组件（组件 URL：[http](http://www.joomlaos.de/option,com_remository/Itemid,41/func,fileinfo/id,6603.html) ://www.joomlaos.de/option,com_remository/Itemid,41/func,fileinfo/id,6603.html ）

要从此组件获取输出，我必须访问以下网址：[my site]/index.php?option=com_eventlist&view=categoryevents&id=1

这工作得很好！但我只想输出 - 没有我的站点模板！

所以我在网址中添加了 &no_html=1，因为我读到这将解决我的问题。但随后出现 500 错误（未找到视图 [名称、类型、前缀]）。

我做错了什么？谢谢你的帮助，

蒂莫

Ps.：对不起我的英语._。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:20:09.060

view.raw.php 丢失。问题解决了

# git - (git svn dcommit) 可以输出它将运行哪些 SVN 命令吗？

> ID：11611337
> 
> 赞同：1
> 
> 时间：2012-07-23T11:09:52.360
> 
> 标签：git, git-svn

我知道`git svn dcommit --dry-run`。但是，由于（重命名检测/文件夹删除/其他我无法方便预测的复杂问题），我希望能够查看实际输出它将运行的 SVN 命令的空运行，而不仅仅是告诉我哪个提交它正在翻译。

所需行为的示例：

```
$ git svn dcommit --svn-dry-run

Commit 03cfd743661f07975fa2f1220c5194cbaff48451:
svn propset svn:executable "*" script
svn rm something

Commit 7b18d017f89f61cf17d47f92749ea6930a3f1deb:
svn propset svn:mergeinfo /branches/something-else:12345-12346 
```

# mysql - 我的 my.cnf 文件有什么问题

> ID：11611340
> 
> 赞同：0
> 
> 时间：2012-07-23T11:09:59.897
> 
> 标签：mysql, database

我试图启用 slow_query_log。我已经使用 WinSCP 从服务器下载了 my.cnf 文件，并添加了启用 slow_query_log 的代码。

```
slow_query_log = ON
slow_query_log_file = /var/log/mysql_slow.log 
```

当我重新启动服务器时，我在`mysql has failed, please contact the sysadmin (result was "mysql is not running").` 这里收到此错误，我正在添加我尝试过的 my.cnf 文件`slow_query_log = 1`。但得到同样的错误。当我删除我添加的代码时，错误消失了。任何人请帮助我...

**我的.cnf**

```
 [mysqld]
datadir=/home/mysql/
tmpdir=/home/mysqltmp
#max_connections = 175 #was 175
max_connections = 80
#max_connect_errors = 350 #was 250
max_connect_errors = 250
safe-show-database
skip-locking
key_buffer = 1024M # was 128M
max_allowed_packet = 6M
myisam_sort_buffer_size = 64M

#old settings, for 900 ish max maxconn
#sort_buffer_size = 32M
#read_buffer_size = 32M
#read_rnd_buffer_size = 32M

sort_buffer_size = 5M
read_buffer_size = 5M
read_rnd_buffer_size = 5M

query_cache_size= 1024M
query_cache_limit= 16M
max_heap_table_size = 128M
tmp_table_size = 128M
thread_concurrency = 16
wait_timeout = 10
innodb_file_per_table
innodb_log_file_size = 10485760
open_files_limit = 8192
low_priority_updates = 1 
slow_query_log = ON
slow_query_log_file = /var/log/mysql_slow.log

# who set these? these are NOT memory settings, but rather integer settings.
#table_cache = 1024M
#thread_cache_size = 8M

table_cache = 512
thread_cache_size = 8

[mysqldump]
quick
max_allowed_packet = 16M

[mysql]
no-auto-rehash

[isamchk]
key_buffer = 128M
sort_buffer_size = 128M
read_buffer = 2M
write_buffer = 2M

[myisamchk]
key_buffer = 128M
sort_buffer_size = 128M
read_buffer = 2M
write_buffer = 2M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:12:47.927

检查所有权为 mysql.mysql 和文件权限`/var/log/mysql_slow.log`

```
ls -al /var/log/mysql_slow.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:17:44.220

在 /var/log 中创建文件 mysql_slow.log 并更改文件的所有权：

```
chown mysql.mysql -R /var/log/mysql_slow.log 
```

任何一个值（1 或 ON）都应该适用于慢查询日志。

另外，您是否使用常规语句？

# javascript - 应根据更新自动检查复选框

> ID：11611342
> 
> 赞同：0
> 
> 时间：2012-07-23T11:10:07.140
> 
> 标签：javascript, jsp

我有 JSP 页面，其中每个文本框都显示了复选框。有 3 个带有 2 个文本框和 1 个下拉列表的列。

如果对文本框值进行了任何更改或更改了任何下拉值，则应自动选中相应的复选框。

提前致谢。

**编辑**（下图显示了上述屏幕）： ![图片根据描述](../Images/5d5bb8c27de5b354e2c79b7f187c581e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:56:05.027

只需使用 jQuery`change`函数：[http ://api.jquery.com/change/](http://api.jquery.com/change/)

```
$('.target').change(function() {
  $('.myCheckbox').prop('checked', true);
}); 
```

# android - 进程 ID 和 UID

> ID：11611345
> 
> 赞同：0
> 
> 时间：2012-07-23T11:10:17.143
> 
> 标签：android, android-intent, android-emulator

是否可以以编程方式为两个不同的应用程序设置相同的进程 id 和共享 uid，而不是在清单文件中设置它？如果是这样，请解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:30:15.513

不，这一切都由作为安全模型一部分的清单控制。如果您可以通过编程方式更改您的 user_id 或 process_id，那么任何安全机制都不会起作用。

# ios - pushViewController 后跟“返回”按钮有时不会弹出视图

> ID：11611348
> 
> 赞同：0
> 
> 时间：2012-07-23T11:10:21.320
> 
> 标签：ios, cocoa-touch, uiviewcontroller

我正在使用 pushViewController 在我的应用程序中推送视图。按下后退按钮大约 95% 的时间都与您预期的一样。但是，如果我尽可能快地进出视图，我会遇到顶部栏移动的情况，就好像发生了弹出一样，但视图会显示。在这种状态下，我留下了一个后退按钮，（在正常操作中，我已将此按钮的文本更改为“取消”）。按下返回将再次为顶栏设置动画，然后我在顶栏中没有任何按钮，我被困在视图中。

你知道这里会发生什么吗？以下是更多细节：

子视图调用这些一次或两次：

```
[[UIApplication sharedApplication] beginIgnoringInteractionEvents];
[[UIApplication sharedApplication] endIgnoringInteractionEvents]; 
```

子视图也扩展了 BaseViewController。在这个基本控制器中，所有的视图方法都被重载（它们只是调用 super）。可能有趣的是：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self customizeNavigationBar];
}

- (void)customizeNavigationBar
{
    [self.navigationController.navigationBar setTintColor:UIColorFromRGB(kNavigationBackgroundColor)];
    UIBarButtonItem *backButton_ = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"ID_BUTTON_BACK", @"") style:UIBarButtonItemStyleBordered target:self action:nil];
    self.navigationItem.backBarButtonItem = backButton_;
    [backButton_ release]; 
```

}

如果您需要更多代码或者我是否可以更好地解释事情，请告诉我。

--- 编辑 ---- 我也在调用 Google Analytics in view 会出现。我记得这会导致我的应用程序出现其他问题：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    NSError *error;
    if (![[GANTracker sharedTracker] trackPageview:@"/app_new_page"
                  withError:&error]) {    }
} 
```

这段代码被放在我的实际视图中（不是 BaseViewController）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:39:15.530

我发现了问题。问题是我在 viewDidLoad 中调用 setNavigationBarHidden:NO 和动画：NO 来显示没有动画的导航栏，但使用 pushViewContoller 和动画：YES。

- - - 起初 - - -

```
[self.navigationController pushViewController:controller animated:YES]; 
```

和

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.navigationController setNavigationBarHidden:NO animated:NO];
} 
```

解决方案是从 viewDidLoad 中删除 setNavigationBarHidden 并将其移动到 viewWillAppear 中，并以与视图动画相同的方式对其进行动画处理。由于我的导航栏立即出现，因此可以在视图控制器完成动画（推入堆栈）之前按回，从而导致所有这些问题。

- - - 解决方案 - - -

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:NO animated:animated];
} 
```

谢谢你们的帮助！

# objective-c - HTTP 请求目标 c

> ID：11611350
> 
> 赞同：1
> 
> 时间：2012-07-23T11:10:23.720
> 
> 标签：objective-c, xcode

我正在尝试以这种方式发出 HTTP 请求：

```
 NSString *urlString = [NSString stringWithFormat:@"https://api.dropbox.com/1/oauth/request_token"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

//set headers
NSString *contentType = [NSString stringWithFormat:@"text/xml"];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

 oauth_version="1.0"
oauth_signature_method="PLAINTEXT"
oauth_consumer_key="<app-key>"
oauth_signature="<app-secret>&"

//create the body
NSMutableData *postBody = [NSMutableData data];
[postBody appendData:[[NSString stringWithFormat:@"<xml>"] dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"<yourcode/>"] dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"</xml>"] dataUsingEncoding:NSUTF8StringEncoding]];

//post
[request setHTTPBody:postBody];

//get response
NSHTTPURLResponse* urlResponse = nil;  
NSError *error = [[NSError alloc] init];  
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];  
NSString *result = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
NSLog(@"Response Code: %d", [urlResponse statusCode]);
if ([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 300) {
    NSLog(@"Response: %@", result);

    //here you get the response

} 
```

我正在尝试使用这些标头发出请求：

```
Authorization: OAuth oauth_version="1.0", oauth_signature_method="PLAINTEXT", oauth_consumer_key="<app-key>", oauth_signature="<app-secret>&" 
```

但我不明白怎么做。请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:37:33.473

在您的情况下，授权只是一个 HTTP 标头。所以这是：

```
[request addValue:@"OAuth oauth_version=\"1.0\", oauth_signature_method=\"PLAINTEXT\", oauth_consumer_key=\"<app-key>\", oauth_signature=\"<app-secret>&\"" forHTTPHeaderField: @"Authorization"]; 
```

或者：

```
NSString* oauth_version=@"1.0";
NSString* oauth_signature_method=@"PLAINTEXT";
NSString* oauth_consumer_key=@"<app-key>";
NSString* oauth_signature=@"<app-secret>&";
NSString* authHeader = [NSString stringWithFormat: @"OAuth oauth_version=\"%@\", oauth_signature_method=\"%@\", oauth_consumer_key=\"%@\", oauth_signature=\"%@\"",
    oauth_version, oauth_signature_method, oauth_consumer_key, oauth_signature]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:20:22.340

**尝试评论这一切**

```
//NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];  
//NSString *result = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
//NSLog(@"Response Code: %d", [urlResponse statusCode]);
//if ([urlResponse statusCode] >= 200 && [urlResponse statusCode] < 300) {
   // NSLog(@"Response: %@", result);

    //here you get the response

//} 
```

**并使用它而不是以上所有**

```
 NSURLConnection *conn = [NSURLConnection connectionWithRequest:request delegate:self]; 
```

**实现这些委托功能**

**注意 - self.data 是在标头中声明为数据的 NSMUtableData 对象。**

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [self.data setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)d {
    [self.data appendData:d];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [[[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", @"")
                                 message:[error localizedDescription]
                                delegate:nil
                       cancelButtonTitle:NSLocalizedString(@"OK", @"") 
                       otherButtonTitles:nil] autorelease] show];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSString *responseText = [[NSString alloc] initWithData:self.data encoding:NSUTF8StringEncoding];

    // Do anything you want with it 
    [responseText release];
}

// Handle basic authentication challenge if needed
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

//I'm using HTTP Digest Authentication in your case it could be different
    NSURLCredential *credential = [NSURLCredential credentialWithUser:HTTP_DIGEST_USER
                                                             password:HTTP_DIGEST_PASSWORD
                                                          persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
} 
```

**希望它会有所帮助**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:09:46.597

当您将错误的包或文档目录路径传递给媒体时，会发生此错误。只需简单地验证您的 HTTP 请求正文的媒体路径。

# python - 用户输入 Python 脚本执行守护进程

> ID：11611351
> 
> 赞同：0
> 
> 时间：2012-07-23T11:10:23.967
> 
> 标签：python, module, daemon

我正在开发一个需要用户输入 python 代码才能在我的服务器上执行的 Web 服务（我们检查了代码注入）。我必须导入一个相当大的模块，所以我想确保我没有启动 python 并且每次运行时都从头开始导入模块（大约需要 4-6 秒）。

为此，我计划创建一个 python (3.2) 守护程序，将用户输入代码作为模块导入，执行它，然后删除/垃圾收集该模块。我需要确保该模块完全从 RAM 中消失，因为此过程将持续到服务器重新启动。我读过很多东西说这在 python 中是一件非常困难的事情。

做这个的最好方式是什么？使用 exec 用用户输入代码（用于变量范围）定义一个函数，然后执行该函数并以某种方式删除该函数会更好吗？或者有没有更好的方法来完成我错过的这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:58:09.663

您也许可以考虑创建**一个 python 守护进程池**？

他们的目的是满足一个请求，然后死去。

您必须编写一个池管理器，以确保始终有 X 守护进程等待传入请求。（X 是等待守护进程的数量：取决于所需的工作负载）。池管理器必须观察守护进程池并在每次进程完成时启动新实例。

# c++ - 获取 RGBDemo 的鼠标位置坐标

> ID：11611352
> 
> 赞同：1
> 
> 时间：2012-07-23T11:10:27.780
> 
> 标签：c++, visual-studio-2010, position, mouse, coordinates

我意识到有人问了一些类似的问题，但我仍然卡住了。

我正在尝试编写一小段代码，当单击使用 kinect 重建的 3D 场景时，它将给出鼠标的 x、yz 坐标。我的目标是为机械臂创建一个“转到”功能。

我想我需要在窗口框架中找到鼠标 xy 位置，然后将其转换为屏幕框架，然后最终成为场景框架。这是正确的吗？另外我不知道如何从像素中读取深度值？

我对 Visual Studio 和 C++ 编程相当陌生，我正在努力编写正确的代码。我不确定是否应该创建一个新类并将其包含在内，或者只是将其直接插入查看器项目中。

这是我写的，但我确信它需要改变。

任何帮助将不胜感激。

托比

```
void get_point_position_MOUSE(int event, int x, int y, int flags,
    void* depthMapZ) {
if (CV_EVENT_LBUTTONDOWN == event) {
    if (DISP_IMAGE_DEPTH != IPL_DEPTH_32F) {
        write_on_buffer(
                g_strdup_printf(
                        "This only supports IPL_DEPTH_32F images.\n"));
        return;
    }
    if (selectionMode != POINT_SEL_MODE_MOUSE) {
        write_on_buffer(g_strdup_printf("X: %f Y: %f\n", (float) x,
                (float) y));
        CvPoint3D32f points = getWorldCo_Ords((float) x, (float) y,
                (float) CV_IMAGE_ELEM((IplImage*) disparityMap, int, y, x));
        write_on_buffer(g_strdup_printf("X: %f Y: %f Z: %f\n", points.x,
                points.y,
                (float) CV_IMAGE_ELEM((IplImage*) disparityMap, int, y, x)));
        return;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:58:40.863

如果您使用的是 RGBDemo，则 RGBImage 中有一些方法可以为您提供该信息。首先，您需要将您的点从 2D 图像映射到 2D 深度图像（如果您的图像已经存在，并使用这些坐标创建一个 cv::Point pt。然后从 ntk::RGBDImage 您可以调用该函数：

```
cv::Point3f p3f = rgbdimage->calibration()->depth_pose->unprojectFromImage(pt, rgbdimage->depth()(pt)); 
```

此点包含世界的 3D 坐标（不确定，但我认为它以米为单位）

希望它有所帮助！

# mysql - 无法在 nodejs 中使用 npm 安装 mysql

> ID：11611354
> 
> 赞同：2
> 
> 时间：2012-07-23T11:10:37.093
> 
> 标签：mysql, node.js

我尝试了以下命令，mysql模块没有添加到node_module文件夹中，使用mysql的代码也抛出错误。

```
 Your environment has been set up for using Node.js 0.8.3 (ia32) and NPM

C:\Users\Work>npm install mysql
npm http GET https://registry.npmjs.org/mysql
npm http 304 https://registry.npmjs.org/mysql
npm http GET https://registry.npmjs.org/hashish/0.0.4
npm http 304 https://registry.npmjs.org/hashish/0.0.4
npm http GET https://registry.npmjs.org/traverse
npm http 304 https://registry.npmjs.org/traverse
mysql@0.9.6 node_modules\mysql
└── hashish@0.0.4 (traverse@0.6.3)

C:\Users\Work>npm install mysql@2.0.0-alpha3
npm http GET https://registry.npmjs.org/mysql/2.0.0-alpha3
npm http 304 https://registry.npmjs.org/mysql/2.0.0-alpha3
npm http GET https://registry.npmjs.org/require-all/0.0.3
npm http 304 https://registry.npmjs.org/require-all/0.0.3
mysql@2.0.0-alpha3 node_modules\mysql
└── require-all@0.0.3

C:\Users\Work>node D:\nodejs\sqlwrite.js

module.js:340
    throw err;
          ^
Error: Cannot find module 'mysql'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (D:\nodejs\sqlwrite.js:1:74)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)

C:\Users\Work> 
```

我已经输入了github上显示的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:19:45.073

您应该将路径（安装节点模块的位置）添加到系统变量。或者导航到 NodeJS 模块的默认系统路径并安装 NodeJS 模块。这是我的系统的路径：

`C:\Users\[user-name]\AppData\Roaming\npm\node_modules`

# regex - REGEX：获取字符串和数字中间的文本

> ID：11611359
> 
> 赞同：0
> 
> 时间：2012-07-23T11:10:49.013
> 
> 标签：regex

我面临的问题是，如果我有这个字符串：

```
STARTGAME grindurr 9 51 19 3 7 1 2 2 0 
```

...我想`grindurr`从中间提取名称。我试过这个正则表达式：

```
STARTGAME\t.*\t[^\d] 
```

......但它没有工作。:( 谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:15:04.527

```
STARTGAME\s+(.*?)\s+\d 
```

可能会奏效。然后结果在第一个捕获组中。您可以通过使用环视来消除对捕获组的需求，但我不知道该正则表达式引擎的确切功能，所以上面可能是最安全的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:14:52.143

您可以使用...

```
STARTGAME\s+(.*?)\s+\d+ 
```

那应该有介于`STARTGAME`和第一个数字之间的词。

# asp.net-mvc-3 - 在我的 asp.net MVC 中使用 asp.net Icontroller 与使用 asp.net ApiController 的 CRUD 操作

> ID：11611361
> 
> 赞同：0
> 
> 时间：2012-07-23T11:10:50.803
> 
> 标签：asp.net-mvc-3, asp.net-web-api

如果我需要构建一个 Web 应用程序来实现与管理医疗医院机构相关的功能。该应用程序包括添加、更新、删除、搜索和检索患者、就诊等功能。

**所以我很困惑在我的 ASP.NET MVC Web 应用程序中遵循哪种方法**，或者在我的 asp.net MVC 中使用我的控制器类。

1.  派生自 IController 以执行 CRUD 操作

**或者**

1.  派生自 ApiController 以执行 CRUD 操作

**第二个问题**是否有一种方法可以取代另一种方法，每种方法相对于另一种方法的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:20:52.057

如果您要从控制器生成经典的 HTML 页面，请使用 MVC 页面。如果您想要返回给客户端的是某种序列化数据（XML、JSON、...），请使用 Web API 控制器，因为这些控制器更容易，例如内容协商。

另请参阅[Web API 入门](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:15:11.560

You can absolutely use both. Nothing stops you to use good old Controller to do CRUD in JSON and MVC is capable of doing it. However, you do not get all the nice features of Web API such as content negotiation, message handlers, media type formatters, etc.

If you do not need any of Web API specific features, then use MVC. But **on the long run, Web API will be a better investment as I believe adoption will rocket soon.**

# android - Android 中的数据分析

> ID：11611364
> 
> 赞同：0
> 
> 时间：2012-07-23T11:11:11.537
> 
> 标签：android, google-analytics

我是数据分析的新手，想在这方面练习一些示例。谷歌给了我太多的分析 SDK。你能建议我练习数据分析的有用链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:47:14.593

我的公司 (Localytics) 定期发布 Android（和 iOS 等）应用程序分析的最佳实践和提示，您可能会发现它们对您有所帮助。我们还发表了相当多的研究。

*   最佳实践：[http ://www.localytics.com/blog/category/best-practices-tips/](http://www.localytics.com/blog/category/best-practices-tips/)
*   研究：[http ://www.localytics.com/blog/category/research/](http://www.localytics.com/blog/category/research/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:19:03.663

直接使用谷歌分析怎么样？？？他们甚至为此制作了一个 SDK...-> [https://developers.google.com/analytics/devguides/collection/android/?hl=fr](https://developers.google.com/analytics/devguides/collection/android/?hl=fr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T12:11:49.340

共享 12 个 Analytics API（包括 Google Analytics API 和替代方案）

1.  MailChimp API
2.  发送网格 API
3.  MailGun API
4.  KeenIO API
5.  微软文本分析 API
6.  Baremetrics API
7.  谷歌分析 API
8.  Metacert 安全 API
9.  人脸检测和分析 API
10.  全接触 API
11.  Finbox API
12.  OnFleet API

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-25T07:45:01.957

不知道您对分析不熟悉是什么意思，但您可以通过 Coursera 上的 Google 数据分析认证获得适当的基础。

您可以从以下链接开始；

[https://grow.google/certificates/data-analytics/#?modal_active=none](https://grow.google/certificates/data-analytics/#?modal_active=none)

希望有帮助吗？

# python - 带有乳胶的轴刻度标签的无衬线字体

> ID：11611374
> 
> 赞同：3
> 
> 时间：2012-07-23T11:11:49.493
> 
> 标签：python, latex, matplotlib

我第一次尝试将 Latex 与 matplotlib 一起使用。似乎在使用 Latex matplotlib 时，轴标签使用了衬线字体。我尝试使用明确地将字体系列设置为“无衬线”

```
rc('font',family='sans-serif') 
```

但这没有效果，我假设这是因为轴标签位于数学环境中。有没有办法设置“rc”，以便 matplotlib 将使用无衬线字体作为轴标签？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T12:15:53.940

[在sfmath](http://www.ctan.org/pkg/sfmath)包的帮助下，可以在 LaTeX 中使用无衬线数学字体。要在 matplotlib 中使用这个包，您需要更改它用于编译文本的 LaTeX 前导码，这可以通过 'text.latex.preamble' rc 选项来完成。因此，

```
rc('text.latex', preamble='\usepackage{sfmath}') 
```

应该做你想做的。您还可以选择另一种字体并将其作为选项提供给包，请参阅[sfmath 的文档](http://dtrx.de/od/tex/sfmath.html)以供参考。

# iframe - 喜欢盒子 - 在新窗口中打开

> ID：11611379
> 
> 赞同：0
> 
> 时间：2012-07-23T11:12:14.823
> 
> 标签：iframe, facebook-likebox

试图在我的网站 gulbrand.net 中实现类似框 iframe 的 FB。

使用以下代码：

```
<iframe src="http://www.facebook.com/plugins/likebox.php?href=
http%3A%2F%2Fwww.facebook.com%2Fgulbrandnet&amp;width=500&amp;height=1000&amp;
colorscheme=light&amp;show_faces=false&amp;border_color&amp;stream=true&amp;
header=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden;
width:500px; height:1000px;" allowTransparency="true"></iframe> 
```

在我的测试站点上看起来没问题。带有“赞”按钮的 gulbrand.net FB 页面的链接。以及来自 FB 页面的帖子。

但是：当按下like按钮时，会打开一个用于登录FB的新浏览器窗口（IE）。我已经登录 FB，并希望我自动喜欢 FB 页面（也许喜欢的次数会随着 1 增加）。当我在登录面板中输入密码时，只会打开一个新的空白页面。而且我还没有“喜欢” FB 页面。

我做错什么了吗？解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:22:26.257

因为您使用的是 IE，最有可能发生的事情是它正在为您制作的每个选项卡创建一个新进程。默认情况下，它还阻止跨域 cookie。还注意到在弹出窗口中丢失会话 cookie 的问题。据我所知，这主要是针对 IE8 的，但你没有提到什么版本。您可以在这里阅读更多相关信息：http: [//blogs.msdn.com/b/askie/archive/2009/03/09/opening-a-new-tab-may-launch-a-new-process-with- internet-explorer-8-0.aspx](http://blogs.msdn.com/b/askie/archive/2009/03/09/opening-a-new-tab-may-launch-a-new-process-with-internet-explorer-8-0.aspx)这是一个持续存在的问题。

我建议您使用 chrome 框架：[http](http://www.google.com/chromeframe/?prefersystemlevel=true) ://www.google.com/chromeframe/?prefersystemlevel=true来重定向用户以使用更好的浏览器，例如 chrome。它很容易集成到任何网站中。在上面的链接中了解更多信息。让我们知道您是否也仅在 IE8 或 chrome 或其他浏览器上发生这种情况。

# xml - 如何使用 xmllint 和 XPath 从属性中获取值？

> ID：11611385
> 
> 赞同：39
> 
> 时间：2012-07-23T11:12:47.483
> 
> 标签：xml, shell, xpath

我想获取 name 的值并将其放入使用 XMLLint 的变量中

```
<body>
<value name="abc"></value>
</body>

echo 'cat //body/value/@name' | xmllint --shell "test.xml"

/ >  -------
 name="abc"
/ > 
```

所以我想将值“abc”分配给变量 $test

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-10T16:49:38.500

您需要使用[fn:string()](https://www.w3.org/TR/xquery-operators/#func-string)，它将其参数的值作为`xs:string`. 如果它的参数是一个属性，它将因此返回属性的值作为`xs:string`.

```
test=$(xmllint --xpath "string(//body/value/@name)" test.xml) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T08:28:22.670

试试这个，它不漂亮，但它有效:)

我只是`>`从 stdout 中删除包含的行，剪切字符串以获得第二部分`=`，然后删除“

```
test=$(echo 'cat //body/value/@name' | xmllint --shell "test.xml" | grep -v ">" | cut -f 2 -d "=" | tr -d \"); 
echo $test 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-27T18:00:15.480

一种带有支持**多个属性的****辅助`awk`命令**[的方法（自我方法](https://stackoverflow.com/a/11684170/45375)的简化版本）：

 **```
echo 'cat //*/@name' | xmllint --shell file | awk -F\" 'NR % 2 == 0 { print $2 }' 
```

`awk`命令：

*   将 的输出行按字符拆分`xmllint`为字段。`"`( `-F\"`)

    *   请注意，`xmllint`将围绕属性值的引用规范化到`"..."`输出，即使输入有`'...'`，所以用 分割就足够了`"`。
*   仅处理偶数行 ( )，从而过滤掉总是打印`NR %2 == 0`的分隔线。`cat`

*   `print $2`然后只打印第二个字段，这是每个属性的*值*，没有封闭的`"..."`.

假设以下示例 XML 在`file`：

```
<body>
  <value name="abc"></value>
  <value name="def"></value>
</body> 
```

以上产量：

```
abc
def 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-05T03:23:23.867

我最近不得不将使用 --xpath 的原始更简单的解决方案移植到缺少此功能的平台，因此也不得不采用“cat”解决方案。这将处理多个匹配，在 Ubuntu 12.04 和 Solaris 11 上测试：

```
getxml() { # $1 = xml file, $2 = xpath expression
    echo "cat $2" | xmllint --shell $1 |\
    sed -n 's/[^\"]*\"\([^\"]*\)\"[^\"]*/\1/gp'
} 
```

例如从 glassfish 域配置中提取实例名称：

```
$ getxml /tmp/test.xml "//server[@node-ref]/@name"
inst1
inst2 
```

sed 后处理只是抓取所有引用的值，这些值足以满足我的需要（获取一些 glassfish 配置）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-05T01:27:37.423

为了匹配多行并提取其同名属性的值并基于[以前](https://stackoverflow.com/a/44220069/12342517)的答案，这对我有用，而且更短呵呵

```
xmllint --xpath "//*/@value" file.xml | awk -F\" '{ print $2 }' 
```**

# windows - 从驱动程序商店安装驱动程序的 API

> ID：11611387
> 
> 赞同：2
> 
> 时间：2012-07-23T11:12:48.897
> 
> 标签：windows, winapi, driver, modem

是否有任何 API 可用于为我的设备安装驱动程序，例如来自 driverstore 或 inf 文件夹的 (PNPC031)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:35:31.633

触发设备的即插即用检测应该从 inf 目录/驱动程序存储中为您的设备安装驱动程序 - 如果它找到匹配的驱动程序。查看 CM_Reenumerate_DevNode_Ex API： http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff539766 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff539766(v=vs.85).aspx)

如果您知道 INF 文件的路径，则可以使用 Setup API 安装它：http: [//msdn.microsoft.com/en-us/library/aa377398 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa377398(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:34:46.867

我不知道，如果这正是你想要的，但从 inf 文件安装驱动程序可能使用[ADVAPACK.DLL API](http://msdn.microsoft.com/en-us/library/aa752070%28v=vs.85%29)。

# java - 如何在数据库中读取和存储 XML 数据

> ID：11611390
> 
> 赞同：0
> 
> 时间：2012-07-23T11:13:08.900
> 
> 标签：java, oracle, xml-parsing

我是 java 和 xml 解析器的新手，我需要从 XMl 文件中读取数据并将其存储在数据库中。

首先我所做的是我从 Xml 文件中读取数据，并将以列和行格式存储在文本文件中。谁能告诉我如何从 xml 文件中读取数据并以列和行的形式操作数据。

列和行意味着：

1.  节点名称必须逐行显示在标题位置

    例子：

    ```
    Column1, column2, column3..... 
    ```

2.  该数据中的值必须存储在上述列明智的标签中

    例子：

    ```
    Column1, column2, column3,...  
    row1, row2, row3,...  
    row1, row2, row3,.... 
    ```

请帮助我，从过去的 10 天开始，我一直在与此作斗争，我无法读取列和行中的数据。我所做的是：

示例代码：

```
 public class XMLReader extends XMLUtil{

    public static void main(String args[]) {
        try{
        XMLUtil xml=new XMLUtil();
        Document doc=xml.docFromFilePath("data/Schools.xml");
        //System.out.println("Root element :"+ doc.getDocumentElement().getNodeName());
        NodeList nl= doc.getElementsByTagName("*");
        for(int i=0;i< nl.getLength();i++)
            {
                /*String column1=nl.item(i).getNodeName();
                String column=nl.item(i).getFirstChild().getNodeValue();
                System.out.println(column1+":"+ column);*/
            Node n = nl.item(i);
            String name=n.getNodeName();
            System.out.print(name+ " ");
            }
        System.out.println();

         File f=new File("results/test1.txt");
        xml.prettyPrintToFile(f, doc);
        FileUtil futil=new FileUtil();
        futil.readFileBytes(f);
        //System.out.println(futil.toString());
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:40:49.147

为了形成查询，您应该使用[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

示例用法：

```
String query = "INSERT INTO some_table (col1,col2,col3) values (?,?,?)
PreparedStatement stmt = null;
stmt = con.prepareStatement(query);
//now use the values from the xml and bind them to the statement
stmt.setString(someStringValue);
stmt.setInt(someIntValue);
...
stmt.execute(); 
```

# ruby-on-rails - Rails - 当它仍然是一个字符串时验证浮点类型

> ID：11611397
> 
> 赞同：1
> 
> 时间：2012-07-23T11:13:31.077
> 
> 标签：ruby-on-rails, ruby, validation

我有带有**:balance字段的****用户**模型（它是**浮点**类型）。我想为这个字段编写我自己的验证，但是我想在它仍然是一个字符串并且 Rails 还没有将它转换为浮点数时访问这个值。我的意思是，我想做这样的事情：

 ****```
class User < ActiveRecord::Base
  validate :check_balance

  def check_balance
    if balance.is_a?(String)
      # do my validation, add errors and etc.
    end
  end
end 
```

我怎样才能做到这一点？

PS **validates_format_of**在我目前的情况下没有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:30:00.680

[`<attribute>_before_type_cast`](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Accessing+attributes+before+they+have+been+typecasted)返回 的原始值`attribute`：

```
def check_balance
  if balance_before_type_cast.is_a?(String)
    // do my validation, add errors and etc.
  end
end 
```****

# javascript - html5 中的 CANVAS 支持哪些图像格式？

> ID：11611398
> 
> 赞同：7
> 
> 时间：2012-07-23T11:13:32.477
> 
> 标签：javascript, html, canvas

像 .jpg 或 .jpeg ，在 html5 中 Canvas 支持哪些图像格式。？

我的意思是在调用**context.drawImage(image,dx,dy,dw.dh)** ...

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T11:27:22.807

支持的图像取决于您的浏览器。你没有`tif`支持？你在使用 Chrome 吗？

[这是浏览器支持的图像格式列表。](http://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support)

您可以转换您的图像类型，或者尝试找到支持更多图像类型的插件。

# build - QTCreator .pro 文件：根据 DEBUG / RELEASE 设置 LIBS 路径

> ID：11611399
> 
> 赞同：0
> 
> 时间：2012-07-23T11:13:33.567
> 
> 标签：build, qt-creator, libs

作为 Qt 的新手，我正在编写一个依赖于另一个项目的小项目，该项目位于并行目录中。

在我的`.pro`文件中，一些`.obj`文件包括如下（有效）。但是，在创建版本时，我想使用另一个项目的版本，而不是它的调试路径。我检查了[Qt 变量](https://doc.qt.io/qt-5/qmake-variable-reference.html)并找到了“目标示例”。但我未能将它应用到我的`LIBS`，特别是因为构建可以同时适用于两者`debug_and_release`，而且我不知道如何编写`LIBS`路径。

轮廓：

```
LIBS += -L"../../OtherApp/OtherApp-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Debug/debug"
LIBS += http.obj some other obj files 
```

“目标示例”：

```
 build_pass:CONFIG(debug, debug|release) {
 unix: TARGET = $$join(TARGET,,,_debug)
 else: TARGET = $$join(TARGET,,,d)
 } 
```

我可以写`LIBS += -L"......."$$(TARGET)"......"`吗，特别是如果目标可能同时包含调试和发布？

[编辑 1] 我找到了解决方案：[https ://stackoverflow.com/a/11612903/356726](https://stackoverflow.com/a/11612903/356726)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:52:00.023

通过使用向导（包括内部库），我创建了以下“代码”。这很可能是解决方案：

```
win32:CONFIG(release, debug|release): LIBS += -LLIBS += -L"../../MyApp/current/MyApp-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Release/release"
else:win32:CONFIG(debug, debug|release): LIBS += -L"../../MyApp/current/MyApp-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Debug/debug" 
```

# c# - CloudConfigurationManager 不会从 app.config 中获取 ApplicationSettings

> ID：11611404
> 
> 赞同：20
> 
> 时间：2012-07-23T11:13:57.900
> 
> 标签：c#, azure, configuration-files

我有一个包含一些 Azure 助手类的库。在这些帮助程序类中，我获得了 Azure 帐户名称和密钥等设置。在 Azure 中运行时，这些设置是从云配置文件 (cscfg) 中获取的。这一切都很好。

为了在 Azure 之外对这些类（特别是 RoleEnvironment）进行单元测试，我在单元测试项目中创建了相同变量名称的设置。这些实际上保存在 app.config 文件中，并通过我的测试项目的属性部分下的设置部分进行编辑。我决定使用 CloudConfigurationManager 类，而不是创建我自己的从 web.config/app.config 设置中抽象云配置设置的方法。但是，当我运行单元测试时，我的任何设置都没有被拾取，所以我只是得到空值。但是，如果我将 app.config 文件更改为使用下面“appSettings”格式的设置，那么我确实会得到有效值。这样做的缺点是我无法再使用 Visual Studio 中的设置编辑器页面来编辑我的设置。

所以我的问题是我做错了什么或者这是云配置管理器的限制，它只能选择手动添加的 appSettings 而不是使用编辑器添加的 applicationSettings？

```
<appSettings>
    <add key="Foo" value="MySettingValue"/>
</appSettings> 
```

以上有效，而以下无效：

```
<applicationSettings>
    <ComponentsTest.Properties.Settings>
      <setting name="Foo" serializeAs="String">
        <value>MySettingValue</value>
      </setting>
    </ComponentsTest.Properties.Settings>  
</applicationSettings> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-23T11:30:02.967

CloudConfigurationManager 仅支持 web.config/app.config 的**AppSettings**部分，如果 Azure 配置中缺少该设置，它将尝试从此处读取值。文档指出，如果属性 RoleEnvironment.IsAvailable 为*true*（在 Azure 中运行），*它将不会*读取 web.config/app.config ，但正如我们在下面的源代码中看到的那样，这是**不正确**的（不检查 IsAvailable） .

 ***您可以查看[源代码](https://github.com/WindowsAzure/azure-sdk-for-net/blob/master/microsoft-azure-api/Configuration/Microsoft.WindowsAzure.Configuration/AzureApplicationSettings.cs)以了解发生了什么：

```
 /// <summary>
    /// Gets a setting with the given name.
    /// </summary>
    /// <param name="name">Setting name.</param>
    /// <returns>Setting value or null if such setting does not exist.</returns>
    internal string GetSetting(string name)
    {
        Debug.Assert(!string.IsNullOrEmpty(name));

        string value = null;

        value = GetValue("ServiceRuntime", name, GetServiceRuntimeSetting);
        if (value == null)
        {
            value = GetValue("ConfigurationManager", name, n => ConfigurationManager.AppSettings[n]);
        }

        return value;
    } 
```

如您所见，只有一个对普通**ConfigurationManager**类的调用，它只是访问**AppSettings**。***

# android - android：我如何使用 tabhost/tabwidget（一般标签）在 tabcontents 上放置不同的活动

> ID：11611405
> 
> 赞同：1
> 
> 时间：2012-07-23T11:14:04.493
> 
> 标签：android

首先！，我使用了`Activity`使用选项卡导航类型生成的。我只是用它来自动生成`Tab`对`Activity`. 它在最新的*ADT*上。我认为 :(,，现在我的问题是如何使用`Fragments`从其他内容`Activity`到`Tab`内容

其次，有没有其他方法可以将另一个`Activity`放在`Tab`内容中，比如说它的 MainACtivity.class？....

计划有 3 个`Tab`s 和 3 个不同`Activity`的 s，每个包含 1`Activity`个`tab`内容

真的需要你们的帮助，我的想法和资源已经用完了:( :( ... android 开发的新手，所以要温柔。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:19:11.983

选项卡.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
         >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_marginTop="60dp"/>
       <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp"/>
    </RelativeLayout>

</TabHost> 
```

在您的 activity.java 文件中添加以下代码：

`android.app.TabActivity`通过而不是扩展您的活动`Activity`

```
TabHost tabHost=getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    intent=new Intent().setClass(YourActivity.this, NewActivity.class);
    spec=tabHost.newTabSpec("tab1").setIndicator("imageId").setContent(intent);
    tabHost.addTab(spec);

    intent=new Intent().setClass(YourActivity.this, New1Activity.class);
    spec=tabHost.newTabSpec("tab2").setIndicator("imageId").setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0); 
```

以同样的方式，您可以在活动中添加尽可能多的选项卡。

# ruby-on-rails-3 - has_one 关联选择特定字段

> ID：11611410
> 
> 赞同：0
> 
> 时间：2012-07-23T11:14:15.603
> 
> 标签：ruby-on-rails-3, activerecord

我有与之关联的`user`模型`has_one``user_profile`

我想从 user_profile 中选择名称字段而不是`user_profile`.*

我努力了，

```
user = User.first
user.user_profile.select(:name) 
```

但这不起作用。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:40:02.290

**更新：**

看起来，rails 以不同的方式处理另一个方向和一对一的连接。你有两个选择：

1）在关联中定义选择的属性，它总是会选择那些

`has_one :user_profile, :select => [:name, :id]`

2) 在您的模型中定义一个特定的 find ，您可以在其中添加`select`，如下所示：

```
def my_profile
  UserProfile.find(self.user_profile_id)
end

....

my_profile.select(:name) 
```

**原来的：**

在`has_many`方向的情况下，它的工作原理：

我已经在我的代码中尝试了你的方法，比如：

```
= User.find("admin").article.select(:title).to_sql 
```

它返回正确的 sql：

```
SELECT title 
FROM "articles"
WHERE "articles"."user_id" = 1364 
```

# full-text-search - SQL Server 2008 中的全文搜索：将新的停用词添加到现有的停用词列表

> ID：11611411
> 
> 赞同：4
> 
> 时间：2012-07-23T11:14:17.057
> 
> 标签：full-text-search, stop-words

我正在 SQL Server 2008 中进行 FTS。

我需要一次将一些新的停用词（大约有 100 个）添加到现有的停用词列表中。

如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:22:00.993

```
ALTER FULLTEXT STOPLIST [TableName.CatalogName] ADD 'NewStopWord' LANGUAGE 'Neutral'; 
```

显然你需要`'NewStopWord'`用你的话来代替。`'Neutral'`如果要使停用词语言特定，也可以进行更改。冲洗。重复。

再来一注。在 SQL 2008 中，您只能指定 ，`[TableName]`但在 SQL 2012 中，您可以指定`[TableName.CatalogName]`. 这是有道理的，因为在 2008 年，每个表/视图只能有一个全文目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:29:51.877

直接取自[MSDN](http://msdn.microsoft.com/en-us/library/ms142551.aspx)

1.  在对象资源管理器中，展开服务器。
2.  展开数据库，然后展开要在其中创建全文非索引字表的数据库。
3.  展开存储，然后右键单击全文停止列表。
4.  选择新建全文停止列表。
5.  指定停止列表名称。
6.  （可选）指定其他人作为停止列表所有者。
7.  选择以下创建停止列表选项之一：
    *   创建一个空的停止列表
    *   从系统停止列表创建
    *   从现有的全文非索引字表创建
8.  有关详细信息，请参阅新建全文非索引字表（常规页面）。

单击确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T10:19:17.643

试试这个：

```
Create table StopListCustome (StopListCustome nvarchar(50))

BULK INSERT dbo.StopListCustome
FROM '\\SystemX\DiskZ\Sales\data\StopList.csv' --you can use other type of insert
WITH ( FORMAT='CSV');

SELECT 'ALTER FULLTEXT STOPLIST MyStoplist ADD ' + 
    quotename(StopListCustome, '''') + ' LANGUAGE ''English'''
FROM  StopListCustome 
```

然后`copy & past`生成新的查询窗口并运行它。如果你`while`像我这样使用插入比复制过去好，你可以在光标中编写选择查询。

# python - 为什么循环枚举比生成器快得多？

> ID：11611412
> 
> 赞同：3
> 
> 时间：2012-07-23T11:14:17.437
> 
> 标签：python, optimization, generator, enumeration

最近，我在[此](https://stackoverflow.com/questions/11602396/replacing-3-lists-with-2-generators/1)线程中的 Jon Clements 的帮助下发现以下代码的执行时间非常不同。

你知道为什么会这样吗？

*评论：* self.stream_data 是一个向量元组，有许多零和 int16 值，create_ZS_data 方法正在执行所谓的 ZeroSuppression。

**环境**
*输入：* 许多（3.5k）小文件（每个~120kb）
*操作系统：* Linux64
*Python ver* 2.6.8

**基于生成器的解决方案：**

```
def create_ZS_data(self):
    self.ZS_data = ( [column, row, self.stream_data[column + row * self.rows ]]
                     for row, column in itertools.product(xrange(self.rows), xrange(self.columns))
                     if self.stream_data[column + row * self.rows ] ) 
```

*探查器信息：*

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     3257    1.117    0.000   71.598    0.022 decode_from_merlin.py:302(create_ZS_file)
   463419   67.705    0.000   67.705    0.000 decode_from_merlin.py:86(<genexpr>) 
```

**乔恩的解决方案：**

```
create_ZS_data(self):
    self.ZS_data = list()
    for rowno, cols in enumerate(self.stream_data[i:i+self.columns] for i in xrange(0, len(self.stream_data), self.columns)):
        for colno, col in enumerate(cols):
            # col == value, (rowno, colno) = index
            if col:
                self.ZS_data.append([colno, rowno, col]) 
```

*探查器信息：*

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     3257   18.616    0.006   19.919    0.006 decode_from_merlin.py:83(create_ZS_data) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:15:59.283

我看了之前的讨论；您似乎很困扰，因为您的聪明理解在循环中不如在源代码字符中有效。我当时没有指出的是，这将是我阅读的首选实现：

```
def sparse_table_elements(cells, columns, rows):
    ncells = len(cells)
    non_zeros = list()
    for nrow in range(0, ncells, columns):
         row = cells[nrow:nrow+columns]
         for ncol, cell in enumerate(row):
             if cell:
                 non_zeros.append([ncol, nrow, cell])
    return non_zeros 
```

我没有测试过它，但我可以理解它。有几件事让我觉得*潜在*的效率低下。重新计算两个恒定单调“无聊”指数的笛卡尔积必须很昂贵：

```
itertools.product(xrange(self.rows), xrange(self.columns)) 
```

然后，您可以使用结果`[(0, 0), (0, 1), ...]`从源中进行单元素索引：

```
stream_data[column + row * self.rows] 
```

这也比像“Jon's”实现那样处理更大的切片更昂贵。

生成器并不是保证效率的秘诀。在这种特殊情况下，135kb 的数据已经读入核心，构建不良的生成器似乎确实会让您付出代价。如果您想要简洁的矩阵运算，请使用[APL](http://www.youtube.com/watch?fmt=18&gl=GB&hl=en-GB&v=a9xAKttWgP4)；如果您想要可读的代码，请不要在 Python 中追求最小化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:37:36.787

您可以将 Jon 的解决方案简单地重写为生成器：

```
def create_ZS_data(self):
    self.ZS_data = ([colno, rowno, col]
                    for rowno, cols in enumerate(self.stream_data[i:i+self.columns]
                                                 for i in xrange(0, len(self.stream_data), self.columns))
                    for colno, col in enumerate(cols)
                    if col) 
```

我强烈希望这与 Jon 的基于循环的解决方案具有相同的行为，证明性能差异可以归结为算法实现的中等规模细节。

# gwt - GWT 资源包优先级

> ID：11611413
> 
> 赞同：0
> 
> 时间：2012-07-23T11:14:27.440
> 
> 标签：gwt, resourcebundle

我有一个 GWT 应用程序，它使用在资源包中定义并注入到我的主入口点的样式表，如下所示：

```
MyResources.INSTANCE.main().ensureInjected(); 
```

然后我还有另一个样式表，我使用它由我的 cms 提供服务，并通过 bla.gwt.xml 文件注入，如下所示：

```
<stylesheet src="cms/clientSpecific.css"/> 
```

这个想法是 clientSpecific.css 中的样式应该覆盖 main.css 中的样式，但似乎 main.css（资源包中的那个）优先于 bla.gwt.cml 中定义的那个（由我的厘米）。有没有办法告诉 GWT 应用程序哪个样式表优先？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:43:31.543

这是不可能的，因为`main`它是在加载样式表之后执行的 JavaScript 中注入的。然而，即使你可以让它工作，你可能还有另一个问题，因为注入的主 css 被混淆了（除非你禁用它）。因此，原始样式名称消失了，并且样式`clientSpecific.css`不匹配。

# php - JSON：字符集和获取键/值

> ID：11611414
> 
> 赞同：1
> 
> 时间：2012-07-23T11:14:30.003
> 
> 标签：php, javascript, json, utf-8, character-encoding

所以我有一个执行此操作的 php 脚本：

```
$rows = array();        
while($r = mysql_fetch_assoc($sth2)) {
 $rows[] = array($r['alternative'] => $r['amount']);
}
print json_encode($rows); 
```

我得到这个输出：

`[{"\u00e5l":"3"},{"vin":"3"},{"whiskey":"1"},{"gin":"1"},{"rom":"1"},{"vodka":"1"}]`

问题一：\u00e5 应该是 ø。除了这个功能之外，其他所有东西都适用于 utf8，知道如何解决这个问题吗？

第二个问题是我似乎无法以一种很好的方式读取 javascript 中的数据。我目前正在使用此代码（我知道不是那么好，但它现在应该可以工作）：

```
$.each(obj, function(key, val) 
{
counter = counter +1 ;
switch (counter)
    {
        case 0:
            numberOne = key;
            valueOne = val;
            break;
        case 1:
            numberTwo = key;
            valueTwo = val;
            break;
        case 2:
            numberThree = key;
            valueThree = val;
            break;
        case 3:
            numberFour = key;
            valueFour = val;
            break;
        case 4:
            numberFive = key;
            valueFive = val;
            break;
        case 5:
            numberSix = key;
            valuesix = val;
            break;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:17:34.210

您可以将 JSON_UNESCAPED_UNICODE 选项传递给 json_encode。

你用来读出数据的代码确实看起来不是最理想的，但很难评论如何改进它，因为我无法判断你实际上对数据做了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:23:08.270

对于您的第二个问题，您可以使用

```
for(a in obj)
{
  alert(a +' = '+obj[a]);
} 
```

你还没有通过读取对象属性来指定你想要实现的目标所以我把它留给你:) 希望它有所帮助。

编辑：

```
for(a in obj)
    {
      alert(a +' = '+obj[a]);
      for(b in obj[a])
      {
        alert(b+' = '+obj[a][b]); // or   alert(b+'  '+obj[a].b); would work  
      }
    } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-23T11:26:23.933

您不能使用 JSON 传递空值。用空字符串替换它们。我建议在查询级别通过

```
case columnname when is null then '' end as newcolumnname 
```

# iphone - 我可以使用越狱设备进行 iPhone 应用程序开发吗

> ID：11611416
> 
> 赞同：0
> 
> 时间：2012-07-23T11:14:44.670
> 
> 标签：iphone, ios, xcode, ipad, jailbreak

> **可能重复：**
> [越狱的iphone可以用于开发吗](https://stackoverflow.com/questions/995262/can-jailbroken-iphone-used-for-development)

例如，在应用购买、游戏中心、icloud 或通知中进行测试。

任何人都测试并验证它是否有效？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:19:17.003

它在大多数情况下都有效。有些事情并不完美。例如，有时 Game Center 不会在沙盒模式下自动匹配。但大多数情况下它都有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:59:45.673

我曾尝试从 Jail Broken 设备中的应用程序调用服务器数据。我无法从中调用网络服务。它总是显示错误。在其他有应用程序在工厂解锁设备中运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:03:24.800

我昨天越狱了，因为当我运行应用程序时它卡住了。它说像 Locktalking，所以我将它恢复到 iOS6 beta 3。大多数“酷”认为越狱是有代价的（当然，他们应得的，但我不太需要它们）所以它不是一个优势。

# jquery - 如何迭代由列表组成的json字符串

> ID：11611417
> 
> 赞同：0
> 
> 时间：2012-07-23T11:14:46.963
> 
> 标签：jquery, ajax

> **可能重复：**
> [如何访问此 JSON 值？](https://stackoverflow.com/questions/10397019/how-to-access-this-json-value)

我从列表的 Spring mvc 控制器生成了以下 json 字符串。如何访问 jquery 中的 holidayName 属性。

```
[{"holidayId":1,"holidayName":"Raksha Bandhan",
  "holidayStartDate":"Aug 2, 2012 12:00:00 AM",
  "holidayEndDate":"Aug 2, 2012 12:00:00 AM"},
 {"holidayId":2,"holidayName":"Independence day",
  "holidayStartDate":"Aug 15, 2012 12:00:00 AM",
  "holidayEndDate":"Aug 15, 2012 12:00:00 AM"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:31:19.393

```
 var data=[
           {"holidayId":1,"holidayName":"Raksha Bandhan","holidayStartDate":"Aug 2, 2012 12:00:00 AM","holidayEndDate":"Aug 2, 2012 12:00:00 AM"},
           {"holidayId":2,"holidayName":"Independence day","holidayStartDate":"Aug 15, 2012 12:00:00 AM","holidayEndDate":"Aug 15, 2012 12:00:00 AM"}
         ]

   $.each(data,function(index,item){       
        alert(item.holidayName)      
   }); 
```

工作样本：http: [//jsfiddle.net/5egk2/1/](http://jsfiddle.net/5egk2/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:43:23.027

我不熟悉 Spring MVC，但是您应该小心观察您正在使用的起始“json string”是***string***还是***object***。

如果它是一个字符串，您需要首先使用 $.parseJSON 作为@Felix 提到的。

如果它已经是一个对象，那么您可以像@Shyju 所做的那样直接访问它，或者像这样没有每个循环：

```
var input = 
    [
        {
            "holidayId": 1,
            "holidayName": "Raksha Bandhan",
            "holidayStartDate": "Aug 2, 2012 12:00:00 AM",
            "holidayEndDate": "Aug 2, 2012 12:00:00 AM"
        },
        {
            "holidayId": 2,
            "holidayName": "Independence day",
            "holidayStartDate": "Aug 15, 2012 12:00:00 AM",
            "holidayEndDate": "Aug 15, 2012 12:00:00 AM"
        }
    ];

console.log(input[0]['holidayName']); //'Raksha Bandhan'
console.log(input[1]['holidayName']); //'Independence Day' 
```

​http://jsfiddle.net/zTeX2/

# ios - 在部分页面卷曲模式视图上呈现模式视图

> ID：11611425
> 
> 赞同：0
> 
> 时间：2012-07-23T11:15:19.273
> 
> 标签：ios, xcode, cocoa-touch, storyboard, modalviewcontroller

我的主菜单嵌入在导航控制器中。设置按钮执行模态序列以显示我的设置页面，该页面是使用部分页面卷曲显示的半页。现在在设置上我有一个“合法”按钮，我只想显示一个全屏 UITextView 以及我所有的合法内容。问题是，当我使用模态 segue 显示合法视图控制器时，它显示在部分页面卷曲的后面。如果我尝试使用推送 segue，它会崩溃，因为没有导航控制器，因为设置以模态方式显示。

有没有办法在部分卷页的顶部呈现模态视图？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T12:09:53.230

我能想到的最佳选择是**在初始主菜单控制器中管理所有转场**。

例如，您可以编写一个委托方法，这样，如果用户点击“合法”，您可以使用委托方法关闭模态视图（从主菜单控制器的 .m 中），然后在同一个方法中呈现一个新的模态视图设置页面的视图控制器（它的父级是主菜单视图控制器，然后可以有另一个委托方法来关闭合法页面并显示设置菜单）。

# c# - SSL HttpWebRequest 导致内部服务器错误？

> ID：11611428
> 
> 赞同：0
> 
> 时间：2012-07-23T11:15:26.910
> 
> 标签：c#, ssl, httpwebrequest

我正在尝试编写登录脚本，但由于某种原因，我收到了内部服务器错误 (500)。

我用 PHP 和 cURL 试过这个，当我设置选项时我得到了一个响应`VERIFY_PEER = false`。

这是 C# 代码：

```
 private void Login()
    {
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("https://whatever.com");
        ASCIIEncoding encoding = new ASCIIEncoding();
        string postData = string.Format("user={0}&password={1}&submit=login", User, Password);
        byte[] data = Encoding.ASCII.GetBytes(postData);
        webRequest.Method = "POST";
        ServicePointManager.ServerCertificateValidationCallback = (x,y,z,a) => true;
        webRequest.ContentLength = data.Length;
        webRequest.KeepAlive = false;
        using (Stream stream = webRequest.GetRequestStream())
        {
            stream.Write(data, 0, data.Length);
        }
        using (HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse())
        {
            using (StreamReader responseStream = new StreamReader(response.GetResponseStream()))
            {
                Console.WriteLine(responseStream.ReadToEnd());
            }
        }
    } 
```

有人知道为什么我没有得到回复吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:24:52.410

我建议使用[Fiddler](http://www.fiddler2.com/fiddler2/)来检查 HTTP 请求/响应。您也可以将其设置为拦截 HTTPS 流量。这样你就可以准确地看到你的系统正在请求什么。

从您的评论中，您收到 500 错误，这通常意味着如果 url/request 从一个脚本/应用程序而不是另一个脚本/应用程序工作，则它的格式不正确。这将使您看到正在请求的内容（并为您突出显示任何协议错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:10:51.253

我发现了错误......似乎服务器需要一个“有效”的用户代理。将 firefox 设置为用户代理时，一切正常。

# vaadin - 如何在 vaadin 中将点击监听器添加到表格的单元格？

> ID：11611429
> 
> 赞同：2
> 
> 时间：2012-07-23T11:15:29.473
> 
> 标签：vaadin, cell, clicklistener

我在 vaadin 中创建了一个多选表，但是当我单击它选择所有行时，我不能只选择该表中的一个单元格。

有没有办法只选择一行的一个单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:37:11.343

问题的标题并不反映里面的实际问题

> 有没有办法只选择一行的一个单元格？

不，Vaadin 表的全部意义在于以表格形式反映数据*行*。将表设置为可选可跟踪表中所选行的 itemId

您*可以*通过在表格中使用 a来*模拟*[`ColumnGenerator`](https://vaadin.com/book/-/page/components.table.html#components.table.columngenerator)选择单元格，并向生成的组件添加侦听器。然而，移除监听器可能会很棘手。

或者，您可能希望简单地在 a 中生成组件[`GridLayout`](https://vaadin.com/book/-/page/layout.components.gridlayout.html)并自己跟踪选定的单元格。

最终，这里的方法实际上完全取决于您要实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T17:50:14.097

这取决于您要完成的工作。（您的问题标题和您的问题详细信息解决了两个不同的问题。）如果您想知道是否可以定位特定单元格并为其添加点击侦听器，那么可以，您当然可以：

```
//initial layout setup
final VerticalLayout layout = new VerticalLayout();
layout.setMargin(true);
setContent(layout);

//Create a table and add a style to allow setting the row height in theme.
final Table table = new Table();
table.addStyleName("components-inside");

//Define the names and data types of columns.
//The "default value" parameter is meaningless here.
table.addContainerProperty("Sum",            Label.class,     null);
table.addContainerProperty("Is Transferred", CheckBox.class,  null);
table.addContainerProperty("Comments",       TextField.class, null);
table.addContainerProperty("Details",        Button.class,    null);

//Add a few items in the table.
for (int i=0; i<100; i++) {
    // Create the fields for the current table row
    Label sumField = new Label(String.format(
                   "Sum is <b>$%04.2f</b><br/><i>(VAT incl.)</i>",
                   new Object[] {new Double(Math.random()*1000)}),
                               Label.CONTENT_XHTML);
    CheckBox transferredField = new CheckBox("is transferred");

    //Multiline text field. This required modifying the 
    //height of the table row.
    TextField commentsField = new TextField();
    //commentsField.setRows(3);

    //The Table item identifier for the row.
    Integer itemId = new Integer(i);

    //Create a button and handle its click. A Button does not
    //know the item it is contained in, so we have to store the
    //item ID as user-defined data.
    Button detailsField = new Button("show details");
    detailsField.setData(itemId);
    detailsField.addListener(new Button.ClickListener() {
        public void buttonClick(ClickEvent event) {
            // Get the item identifier from the user-defined data.
            Integer iid = (Integer)event.getButton().getData();
            Notification.show("Link " +
                              iid.intValue() + " clicked.");
        } 
    });
    detailsField.addStyleName("link");

    //Create the table row.
    table.addItem(new Object[] {sumField, transferredField,
                                commentsField, detailsField},
                  itemId);
}

//Show just three rows because they are so high.
table.setPageLength(3);

layout.addComponent(table); 
```

[检查文档](https://vaadin.com/book/-/page/components.table.html)可能会有所帮助。

# symfony - 奏鸣曲管理包：嵌套集

> ID：11611431
> 
> 赞同：1
> 
> 时间：2012-07-23T11:15:52.883
> 
> 标签：symfony, nested-sets, sonata-admin

我有嵌套集的实体位置，它将有大约 600 万条记录。实体属性与位置是多对一的。

不幸的是，奏鸣曲不支持嵌套集。因此，有没有一种方法可以为该字段实现自动完成，而不是使用 6mill 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:04:47.570

据我所知，在 Sonata 中可以通过[3pp4rd / DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)实现嵌套集行为（请参阅树扩展），并且 Sonata 中的自动完成功能是通过这个集成了 jQuery 自动完成器的[genemu / GenemuFormBundle包提供的。](https://github.com/genemu/GenemuFormBundle)这两个捆绑包都将指导您如何实现它。

# ios - 将资产库的 URL 发送到 MPMoviePlayerController

> ID：11611432
> 
> 赞同：1
> 
> 时间：2012-07-23T11:16:12.173
> 
> 标签：ios, mpmovieplayercontroller, alasset

我想从资产库播放电影。我从相机胶卷中得到一个 ALAsset，然后将其 URL 发送到 MPMoviePlayerController：

```
xxxViewController *SelectVC = [[xxxViewController alloc] initWithContentURL: [[mediumAsset defaultRepresentation]url]];

- (id)initWithContentURL:(NSURL *)contentURL
{
    self = [super initWithNibName:nil bundle:nil];

    if (self)
    {
        moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:contentURL];

        [moviePlayer setShouldAutoplay:NO];
        [moviePlayer setControlStyle:MPMovieControlStyleFullscreen];
        [moviePlayer prepareToPlay];

        [[NSNotificationCenter defaultCenter] addObserver:self 
                                                 selector:@selector(moviePlayerLoadStateChanged:) 
                                                     name:MPMoviePlayerLoadStateDidChangeNotification 
                                                   object:nil];

    }

    return self;
} 
```

错误信息为：

```
[MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2012-07-23 19:11:54.194 [5466:907] url assets-library://asset/asset.mov?id=DA201372-BC11-4C0A-B134-B7E89FBC7DAF&ext=mov
2012-07-23 19:11:54.286 [5466:907] [MPAVController] Autoplay: Enabling autoplay
2012-07-23 19:11:54.289 [5466:907] Error (null) setting playback mode to 'AVAudioSessionModeDefault'
2012-07-23 19:11:54.313 [5466:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2012-07-23 19:11:54.340 [5466:907] [MPQueuePlayer] Inserting item <AVPlayerItem: 0x209eaae0, asset = <AVURLAsset: 0x209e8f20, URL = assets-library://asset/asset.mov?id=DA201372-BC11-4C0A-B134-B7E89FBC7DAF&ext=mov>> into player <AVQueuePlayer: 0x20a65f90>
2012-07-23 19:11:54.408 [5466:907] [MPQueuePlayer] Items after insertion: (
    "<AVPlayerItem: 0x209eaae0, asset = <AVURLAsset: 0x209e8f20, URL = assets-library://asset/asset.mov?id=DA201372-BC11-4C0A-B134-B7E89FBC7DAF&ext=mov>>"
)
2012-07-23 19:11:54.930 [5466:907] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2012-07-23 19:11:54.956 [5466:907] [MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:56:24.997

这不是错误。我在方案中打开诊断，所以所有的注销和应用程序的速度变慢。

# events - magento 无法加载观察类

> ID：11611433
> 
> 赞同：0
> 
> 时间：2012-07-23T11:16:18.000
> 
> 标签：events, magento, observers

当我尝试为`checkout_type_onepage_save_order`事件编写观察者时，如下所示

```
<events>
    <checkout_type_onepage_save_order>
        <observers>
            <Appeal_Consignor_Model_Observer>
                <type>singleton</type>
                <class>consignor/observer</class>
                <method>savedata</method>
            </Appeal_Consignor_Model_Observer>
        </observers>
    </checkout_type_onepage_save_order>
</events> 
```

上面的代码我试过`frontend`了`global`。

即使我也尝试过。

```
<events>
    <checkout_type_onepage_save_order>
        <observers>
            <Appeal_Consignor_Model_Observer>
                <type>singleton</type>
                <class>Appeal_Consignor_Model_Observer</class>
                            <method>savedata</method>
            </Appeal_Consignor_Model_Observer>
        </observers>
    </checkout_type_onepage_save_order>
</events> 
```

完整的config.xml文件如下

```
<?xml version="1.0"?>
<config>
    <modules>
        <Appeal_Consignor>
            <version>1.0.1</version>
        </Appeal_Consignor>
    </modules>

    <global>
        <models>
            <consignor>
                <class>Appeal_Consignor_Model</class>
            </consignor>
        </models>
        <resources>
            <consignor_setup>
                <setup>
                    <module>Appeal_Consignor</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </consignor_setup>
            <consignor_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </consignor_write>
            <consignor_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </consignor_read>
        </resources>
        <helpers>
            <consignor>
                <class>Appeal_Consignor_Helper</class>
            </consignor>
        </helpers>
    </global>

    <frontend>
        <routers>
            <consignor>
                <use>standard</use>
                <args>
                    <module>Appeal_Consignor</module>
                    <frontName>consignor</frontName>
                </args>
            </consignor>
        </routers>

        <events>
            <checkout_type_onepage_save_order>
                <observers>
                    <Appeal_Consignor_Model_Observer>
                        <type>singleton</type>
                        <class>Appeal_Consignor_Model_Observer</class>
                        <method>savedata</method>
                    </Appeal_Consignor_Model_Observer>
                </observers>
            </checkout_type_onepage_save_order>

        </events>

    </frontend>
    <adminhtml>
        <layout>
            <updates>
                <consignor>
                    <file>consignor.xml</file>
                </consignor>
            </updates>
        </layout>

    </adminhtml>

</config> 
```

但是以下错误即将到来。我清除了缓存 1000 次，也手动删除了 var 缓存文件夹文件。

```
2012-07-23T11:04:09+00:00 ERR (3): Warning: include(Appeal_Consignor_Model_Observer.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such file or directory  in E:\xampp\htdocs\magento\includes\src\Varien_Autoload.php on line 93
2012-07-23T11:04:09+00:00 ERR (3): Warning: include() [<a href='function.include'>function.include</a>]: Failed opening 'Appeal_Consignor_Model_Observer.php' for inclusion (include_path='E:\xampp\htdocs\magento\includes\src;.;E:\xampp\php\PEAR')  in E:\xampp\htdocs\magento\includes\src\Varien_Autoload.php on line 93 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T11:37:18.847

从包含警告来看，您似乎启用了编译器，但它找不到（展平的）文件。

所以要么禁用编译器：

```
php shell/compiler.php disable 
```

或者运行编译，以便为您生成文件：

```
php shell/compiler.php compile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:52:48.040

这是我在将新产品添加到购物车时用来运行观察者的方法：

等\config.xml

```
 <?xml version="1.0"?>
    <config>
        <modules>
            <Iln_Cartvalidation>
                <version>0.1.0</version>
            </Iln_Cartvalidation>
        </modules>
        <global>
            <helpers>
                <cartvalidation>
                    <class>Iln_Cartvalidation_Helper</class>
                </cartvalidation>
            </helpers>
        </global>
        <frontend>
            <events>
                <checkout_cart_product_add_after>
                    <observers>
                        <Iln_Cartvalidation_Model_Observer>
                            <type>singleton</type>
                            <class>Iln_Cartvalidation_Model_Observer</class>
                            <method>Mytestmethod</method>
                        </Iln_Cartvalidation_Model_Observer>
                    </observers>
                </checkout_cart_product_add_after>
            </events>
        </frontend>
    </config> 
```

助手\数据.php

```
 <?php
    class Iln_Cartvalidation_Helper_Data extends Mage_Core_Helper_Abstract {
    } 
```

模型\observer.php

```
<?php
class Iln_Cartvalidation_Model_Observer {

    public function Mytestmethod($observer) {
        $event = $observer->getEvent(); //Fetches the current event
        $product = $event->getProduct();
        $eventmsg = "Current Event Triggered : " . $event->getName() . "Currently Added Product : " . $product->getName();
        //Adds Custom message to shopping cart
        echo Mage::getSingleton('checkout/session')->addSuccess($eventmsg);
        //Your Custom Logic Here
        print_r($product);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:51:25.643

我认为它应该对您有所帮助：

```
<events>
    <checkout_type_onepage_save_order>
        <observers>
            <consignor>
                <type>model</type>
                <class>consignor/observer</class>
                <method>savedata</method>
            </consignor>
        </observers>
    </checkout_type_onepage_save_order>
</events> 
```

# c++ - Qt - C++ 字符串连接分段错误

> ID：11611438
> 
> 赞同：0
> 
> 时间：2012-07-23T11:16:36.150
> 
> 标签：c++, qt, segmentation-fault, string-concatenation

我是 C++ 新手，所以我想我掉进了一个新的 C++ 陷阱。

我尝试执行以下操作：

```
QString  sdkInstallationDirectory=getenv("somEnv");

QString someSourceDir=sdkInstallationDirectory+"\\Data\\"+someReference+ "\\src"; 
```

我得到一个分段错误。

我猜这是因为 const 字符的串联和分配给`someSourceDir`QString 的内存不足。

我的错误到底是什么？我该如何进行这种连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:19:17.393

```
char * getenv ( const char * name ); 
```

> 具有请求的环境变量值的以空字符结尾的字符串，**如果该环境变量不存在，则为 NULL**。

为什么不检查结果？

**编辑。**

因此，检查指针不是必需的。

> 由于历史原因，QString 区分空字符串和空字符串。空字符串是使用 QString 的默认构造函数或通过将 (const char *)0 传递给构造函数来初始化的字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T11:23:35.667

您不能将字符串与 + 一起添加。尝试使用字符串流。

就像是：

`stringstream ss;
ss << sdkInstallationDirectory << "\Data\" + someReference << "\src";
string str = ss.str();`

虽然，如果您使用的是 Qt，则不应将路径作为字符串连接。

请参阅[如何从单独的字符串构建完整路径字符串（安全）？](https://stackoverflow.com/questions/6297738/how-to-build-a-full-path-string-safely-from-separate-strings)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T12:50:10.367

谢谢大家的答案。

看来我错了，分段错误是之前造成的一行，我在这里创建了我在问题中提到的引用。

我通过进一步的调试发现了它。

很抱歉造成混乱，再次感谢您！

# html - 小程序上的 iframe

> ID：11611444
> 
> 赞同：0
> 
> 时间：2012-07-23T11:16:50.860
> 
> 标签：html, iframe, applet

我想在我的 Applet 游戏上显示丰富的 HTML 内容。我尝试使用 JeditorPane 但它没有正确加载 CSS。

我知道在 Flash Player 顶部显示 iFrame 的 hack。那么有没有这样的黑客可以在我的 Applet 游戏上显示 HTML 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:19:42.570

看看[这里的文章](http://www.gobdg.com/blog/2009/04/how-to-show-a-div-over-a-select-box-iframe-flash-java-applet-etc/)，它展示了如何使 div 出现在另一组对象上，应用相同的逻辑可以使 div 包含 iFrame。

# c# - 在c#中使用存储过程根据datagrid中的文本框过滤记录

> ID：11611449
> 
> 赞同：0
> 
> 时间：2012-07-23T11:17:21.123
> 
> 标签：c#, search, stored-procedures

我想根据文本框过滤数据网格上的行，并且我正在使用存储过程，我的代码如下：

我在存储过程中编写了查询以供选择：

```
if @operation =1
select * from Item_Configuration where itemId like '%' + itemId + '%' 
```

和 C# 代码是

```
private void btnSrch_Click(object sender, EventArgs e)
{
    SqlConnection conn1 = new SqlConnection();

    try
    {
        SqlCommand selectItem = new SqlCommand("Item_Configuration_SP", conn1);
        selectItem.CommandType = CommandType.StoredProcedure;

      if (itemId.Text=="")
            {
                selectItem.Parameters.Add("@operation", SqlDbType.VarChar);
                selectItem.Parameters["@operation"].Value = 1;

                selectItem.Parameters.Add("@itemId", SqlDbType.VarChar);
                selectItem.Parameters["@itemId"].Value = itmId.Text;

            SqlDataReader myReader = selectItem.ExecuteReader();
            List<Item> list = new List<Item>();
            while (myReader.Read())
            {
                if (myReader.HasRows)
                {
                    Item item = new Item();
                    item = MapItem(myReader, item);
                    list.Add(item);
                }
            }

            dataGridView1.DataSource = list;
        }
    }
} 
```

现在我在网格上得到所有记录记录没有根据文本框过滤我找不到我错的地方请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:22:55.867

鉴于您使用的是 Sql Server，您的查询已磨损

而不是这个

```
select * from Item_Configuration where itemId = '%' + itemId + '%' 
```

肯定是

```
select * from Item_Configuration where itemId LIKE '%' + itemId + '%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:24:58.627

此外，如果您从文本框的输入中获取操作 ID，则必须添加它

```
selectItem.Parameters["@operation"].Value = txtbox.Text.Trim(); 
```

# java - 如何在单个命令中使用 keytool 在 java 中导入和信任 Web 服务器证书？

> ID：11611450
> 
> 赞同：1
> 
> 时间：2012-07-23T11:17:21.953
> 
> 标签：java, certificate, keytool

用例：您有一个使用自签名证书或由不受信任的 CA 发出的证书的 Web 服务器，您只想确保您的 Java 服务器将与该服务器正确通信。

我在网上找到了几个教程，但没有一个使用自动化/可编写脚本的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:03:49.240

也发布为[https://gist.github.com/3164098](https://gist.github.com/3164098)（欢迎补丁）

```
 #!/bin/bash
REMHOST=$1
REMPORT=${2:-443}

KEYSTORE_PASS=changeit
KEYTOOL=/opt/jira/jre/bin/keytool

# FYI: the default keystore is located in ~/.keystore

if [ -z "$REMHOST" ]
    then
    echo "ERROR: Please specify the server name to import the certificatin from, eventually followed by the port number, if other than 443."
    exit 1
    fi

set -e

rm -f $REMHOST.pem

echo -n | openssl s_client -connect $REMHOST:$REMPORT 2>/dev/null  $REMHOST.pem

if $KEYTOOL -list -storepass ${KEYSTORE_PASS} -alias $REMHOST >/dev/null
    then
    echo "Key of $REMHOST already found, skipping it."
    else
    $KEYTOOL -import -trustcacerts -noprompt -storepass ${KEYSTORE_PASS} -alias $REMHOST -file $REMHOST.pem
    fi 
```

# r - R保存图像以创建以大量点增量生成的绘图动画

> ID：11611456
> 
> 赞同：2
> 
> 时间：2012-07-23T11:17:48.687
> 
> 标签：r, animation, graphics, plot

我正在尝试根据随时间逐步建立的散点图创建动画。用例是我有一个包含大约 200 万个点的数据库，每个点都有时间戳，并且想要生成显示特定日期或之前的所有点的帧。

在不保存图像的情况下，我可以通过首先调用 来做到这一点`plot()`，然后有一个 for 循环，使用该`points()`函数递增地绘制每一天的数据。

当我尝试使用下面的代码保存图像时，我收到“尚未调用 plot.new”的错误。据我了解，`dev.off()`需要保存图像，但这也会关闭正在绘制的设备。有没有办法解决这个问题？由于数据的大小，不得不为每一帧重新绘制数据并不是一个很好的选择。

```
plot(info$lon, info$lat, xlim=c(0,30), ylim=c(30,60))
for (i in c(1:length(allDates))){
    filename=paste(sprintf('%05d', i), ".png", sep="")  
    png(filename=fileName)
    # (code that gets the data for a particular date via a database query)
    points(info$lon, info$lat, cex=0.1)
    dev.off()
} 
```

**更新：** @roman-lustrik 的评论`ggsave()`是我正在寻找的内容，结果如下：

```
plotObj = ggplot(...) + geom_point() + xlim(...) + ylim(...)
for (i in c(1:length(allDates))){
    filename=paste(sprintf('%05d', i), ".png", sep="")  
    # (code that gets the data for a particular date via a database query)
    plotObj = plotObj + geom_point(data=info, aes(x=lon, y=lat), size=0.5)
    print(plotObj)
    ggsave(filename=filename, width=6, height=6)
} 
```

但是，这仍然有点慢，所以我目前快速渲染图像的解决方案是使用与原始代码类似的代码，但我只是`plot()`用来渲染具有单个日期数据的帧（使用透明背景）。为了逐步堆叠图像，我使用了一个 bash 脚本，该脚本使用 imagemagick`convert -composite`命令将两个图像混合在一起。然后将此混合图像与下一个日期的图像混合，依此类推，直到最终图像显示所有数据：

```
#!/bin/bash
for i in $files
do
    convert $prevFile $i -composite ./stackedImages/$i
    prevFile=./stackedImages/$i
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:03:02.133

如果我理解了，您想要获得几个具有不同点数的 png 文件，并且第一个点由`plot(info$lon, info$lat, xlim=c(0,30), ylim=c(30,60))`.

你可以这样做：

```
temp1 <- info$lon
temp2 <- info$lat
for (i in c(1:length(allDates))){
        filename=paste(sprintf('%05d', i), ".png", sep="")  
        png(filename=fileName)
        plot(temp1, temp2, xlim=c(0,30), ylim=c(30,60))
        # (code that gets the data for a particular date via a database query)
        points(info$lon, info$lat, cex=0.1)
        dev.off()
        temp1 <- c(temp1,info$lon)
        temp2 <- c(temp2,info$lat)
} 
```

# javascript - 如何在 Javascript 中调用 Java 方法

> ID：11611460
> 
> 赞同：0
> 
> 时间：2012-07-23T11:18:13.670
> 
> 标签：javascript, jsf-2, javabeans, onload

我正在使用 JSF 2.0 创建网页。

我想要做的是，在每个页面加载时调用`setLastVisitedPage`我在 bean 中的一种方法。`MyBean`

我可以通过简单地写来做到这一点

```
<h:body onLoad="#{MyBean.setLastVisitedPage()}" 
```

但是我必须在所有页面中写入，并且已经创建了 30-40 页。:(

在页面中，因为我有共同的标题，所以我创建了一个名为`commonPage.xhtml`. 我正在考虑在此处包含该文件。

所以我在下面添加了，`commonPage.xhtml`这样每当加载任何页面时，`myScript.js`都会被调用，并且我会收到“我在这里”的警报。

```
<h:outputScript name="js/myScript.js" target="head" /> 
```

并且`myScript.js`有

```
onload = alert("i m here"); 
```

每当我打开任何新页面时，我都会收到“我在这里”的警报。

***现在我的问题是如何添加`#{MyBean.setLastVisitedPage()}`javascript 以便`setLastVisitedPage()`为每个页面调用？***

有没有替代方法？可能是我想错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:31:00.607

由于您使用的是 JSF，因此您最好使用*PreRenderViewEvent*，就像这样

```
 <f:metadata>
     <f:event type="preRenderView" listener="#{MyBean.putLastVisitedPage}"/>
 </f:metadata>

public void putLastVisitedPage(ComponentSystemEvent event){
} 
```

看看这里[JSF 2 PreRenderViewEvent Example](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)

# java - 如何运行从字符串转换的类？

> ID：11611462
> 
> 赞同：0
> 
> 时间：2012-07-23T11:18:23.740
> 
> 标签：java, string, class, junit4

我在 HashMap 中存储了一些类名。当用户提供名称时，该特定类应该运行。我怎样才能做到这一点？请提供任何帮助。

我确实喜欢下面，但我得到类未发现异常。

```
Map<String,String> ruleMap = new HashMap<String, String>();

    ruleMap.put("1", "CalculatorTest");
    ruleMap.put("2", "AreaTest")
JUnitCore junit = new JUnitCore(); 
```

调用方法是，

```
for (Map.Entry<String, String> entry : ruleMap.entrySet()) 

    {
        Class c = null;

        if(selection.equals(entry.getKey()))
        {
            try 
            {
                c = Class.forName(entry.getValue());
            } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }
            junit.run(c); 
            break;
        }
    } 
```

当我像下面这样打电话时，它工作正常。

```
junit.run(CalculatorTest.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:25:33.767

使用完全限定的类名而不是简单的类名！

尝试使用：

```
ruleMap.put("1", CalculatorTest.class.getName());
ruleMap.put("2", AreaTest.class.getName()); 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:39:00.683

junit.run(CalculatorTest.class); 表示 junit.run(Package.CalculatorTest );

所以 junit.run(c) 不起作用。

例如 ，

包 cocat.test.kmt;

```
public static void main(String args[]) throws ClassNotFoundException {
    String test =String.valueOf(Class.forName("cocat.test.kmt.Concat"));
  System.out.println(test);
} 
```

运行此代码时，显示以下结果，

类 cocat.test.kmt.Concat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:34:55.857

正如 Peter Rader 和 Peter Lawrey 所评论的那样， Class.forName() 将采用该类的全名。就我而言，我的代码应该是，

```
ruleMap.put("1", "package.CalculatorTest"); 
```

感谢彼得的... :)

# javascript - 正则表达式只允许 5 位数字或字母字符后跟 5 位数字

> ID：11611463
> 
> 赞同：4
> 
> 时间：2012-07-23T11:18:35.510
> 
> 标签：javascript, regex, validation

我想在表单字段上创建验证，以检查输入是否为有效 ID。

大多数 ID 都是简单的 5 位数字，但也有一些奇怪的变化，其中数字可能具有前导字母字符（例如 F 或 G `F12345`）或以字母字符结尾（例如 A 或 B `12345B`）。

我有一个 5 位数字的正则表达式，但我不知道去哪里允许开头的 F/G 或结尾的 A/B

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T11:19:58.030

这个正则表达式应该做：

```
/^([FG]?\d{5}|\d{5}[AB])$/ 
```

您可以使用对象的`.test()`功能`RegExp`来验证字符串。

```
/^([FG]?\d{5}|\d{5}[AB])$/.test("F12345") 
```

# objective-c - 依次更改 UIView 的属性，但没有动画？

> ID：11611464
> 
> 赞同：0
> 
> 时间：2012-07-23T11:18:37.110
> 
> 标签：objective-c, ios, animation, xamarin.ios

我想创建一个闪烁效果，类似于打开荧光灯。该序列大约需要 2 秒。因为它在黑色背景上（并且图像是白色的），所以我可以按如下顺序调整 alpha：

```
0.5sec   Alpha = 1.0;
0.15sec  Alpha = 0.0;
0.4sec   Alpha = 1.0;
0.35sec  Alpha = 0.0;
0.3sec   Alpha = 1.0;
0.1sec   Alpha = 0.0;
~        Alpha = 1.0; 
```

此时，alpha 为 1.0，我想将其留在那里。问题是我不能只更改这些值，因为它们只会排队等待绘制并且不会立即发生，而是会在下次绘制 UI 时立即发生，让我没有闪烁效果。

我也不能使用 UIView.animate 块，因为这将在指定的时间内补间/动画视图的 alpha，我不希望它平滑，我希望它立即在 alpha 级别之间闪烁。

我可能会使用 UIImageView 图像帧动画，但想知道是否有更清洁、更快、更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:27:25.710

使用 NSTimer。这就是我要做的（伪代码）：

```
timer = new scheduledTimer(0.5 seconds) selector:flicker() repeats:YES;
timeSpent = 0;

    flicker()
    {
        timeSpent+= 5;
        switch(seconds)
             case 5: alpha = 1.0; break;
             case 15: alpha = 0.0; break;
    ...
        case 120: alpha = 1.0; [timer invalidate]; break;

    } 
```

如果你对闪烁有一些模式，你可以做出比长开关更好的东西，也许只是有类似的东西`if (timeSpent % 5 == 0) { alpha = 1.0; } else { alpha = 0.0; }`

编辑：这样的事情怎么样：

```
CAKeyframeAnimation* animation = [CAKeyframeAnimation animationWithKeyPath: @"opacity"];
    animation.duration = 0.7f;
    animation.values   = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:1.0f],
                          [NSNumber numberWithFloat:1.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:1.0f],

                          [NSNumber numberWithFloat:1.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:1.0f],
                          [NSNumber numberWithFloat:1.0f],

                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:1.0f],
                          nil];
    animation.keyTimes = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:0.1f],
                          [NSNumber numberWithFloat:0.2f],
                          [NSNumber numberWithFloat:0.2f],
                          [NSNumber numberWithFloat:0.3f],
                          [NSNumber numberWithFloat:0.3f],

                          [NSNumber numberWithFloat:0.4f],
                          [NSNumber numberWithFloat:0.4f],
                          [NSNumber numberWithFloat:0.5f],
                          [NSNumber numberWithFloat:0.5f],
                          [NSNumber numberWithFloat:0.6f],

                          [NSNumber numberWithFloat:0.6f],
                          [NSNumber numberWithFloat:0.7f],
                          [NSNumber numberWithFloat:0.7f],
                          nil];    

    [self.view.layer addAnimation:animation forKey:nil]; 
```

# jquery - jquery 和 Visual Studio 和 IE 8 不工作

> ID：11611466
> 
> 赞同：0
> 
> 时间：2012-07-23T11:18:38.673
> 
> 标签：jquery

我已经看到了与此相关的所有先前问题，但我的问题是一些独特的所以这篇文章。

我有非常简单的应用程序

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
        <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="Scripts/app1.js" type="text/javascript"></script>
</body>
</html> 
```

我的 app1.js 看起来像这样

> $(document).ready(function () { alert("Test this app"); console.log("Test this app"); });

如果我在调试模式下从 visualstudio 运行应用程序，我无法在 IE8 中看到警报消息，但相同的代码在 Firefox 中可以正常工作，无需对代码进行任何更改。

不确定我是否遗漏了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:21:01.183

尝试：

```
$(document).ready(function () { alert("Test this app");}); 
```

我怀疑 IE8 无法处理，`console.log`因此整个语句失败，并且警报没有显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:21:39.137

IE8 无法访问“控制台”对象，除非您打开了开发人员工具 (F12)。如果您删除 console.log() 部分，它应该可以工作。

# c++ - unsigned long 的类型与 Windows 上的 uint32_t 和 uint64_t 不同（VS2010）

> ID：11611467
> 
> 赞同：8
> 
> 时间：2012-07-23T11:18:51.853
> 
> 标签：c++, visual-c++, visual-c++-2010

在 Windows 7 32 位下的 Visual Studio 2010 上，unsigned long 似乎是与 uint32_t 和 uint64_t 不同的类型。请参阅以下测试程序：

```
#include <stdint.h>
#include <stdio.h>

template<class T, class U>
struct is_same_type
{
    static const bool value = false;
};
template<class T>
struct is_same_type<T, T>
{
    static const bool value = true;
};

#define TO_STRING(arg)        TO_STRING_IMPL(arg)
#define TO_STRING_IMPL(arg)   #arg

#define PRINT_SAME_TYPE(type1, type2) printf("%s (size=%d) %s %s (size=%d)\n", \
    TO_STRING(type1), int(sizeof(type1)), \
    is_same_type<type1, type2>::value ? "==" : "!=", \
    TO_STRING(type2), int(sizeof(type2)))

int main(int /*argc*/, const char* /*argv*/[])
{
    PRINT_SAME_TYPE(uint32_t, unsigned long);
    PRINT_SAME_TYPE(uint64_t, unsigned long);
    return 0;
} 
```

我希望它可以打印

```
uint32_t (size=4) != unsigned long (size=8)
uint64_t (size=8) == unsigned long (size=8) 
```

（我在 x86_64 Linux 上得到）或

```
uint32_t (size=4) == unsigned long (size=4)
uint64_t (size=8) != unsigned long (size=4) 
```

当然，假设 long 不超过 64 位。

然而，在 Windows 上，我感到莫名其妙

```
uint32_t (size=4) != unsigned long (size=4)
uint64_t (size=8) != unsigned long (size=4) 
```

这意味着有两种不同的 32 位无符号类型。这是 C++ 标准允许的吗？或者这是 Visual C++ 编译器中的错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T17:46:35.350

> 有两种不同的 32 位无符号类型

是的，有。两者`int`都`long`用 32 位表示。

> 这是 C++ 标准允许的吗？

是的。规范声明（C++11 §3.9.1[basic.fundamental]/2）：

> 有五种标准有符号整数类型：`signed char`、`short int`、`int`、`long int`和`long long int`。在此列表中，**每种类型提供的存储空间至少与列表中它前面的类型一样多。**
> 
> 对于每一种标准有符号整数类型，都存在一个对应的（但不同的）标准无符号整数类型……每一种都与对应的有符号整数类型占用相同的存储量并具有相同的对齐要求

请注意，尽管`int`和`long`由相同的位数表示，但它们仍然是不同的类型（因此，例如，在重载决议期间它们的处理方式不同）。

# android - 如何通过google api获取2点之间的距离

> ID：11611468
> 
> 赞同：1
> 
> 时间：2012-07-23T11:18:52.713
> 
> 标签：android

当我有纬度，2 点的隆基。人们可以帮助我，如何在代码android中获得2点之间的距离（模式：驾驶谷歌地图）？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:26:17.230

你可以试试

`http://maps.googleapis.com/maps/api/distancematrix/xml?origins="+a+"&destinations="+b+"&mode=driving&language=en-EN&sensor=false` 您可以使用 a=addressFrom, b=addressTo获取与位置地址的距离

如果您有纬度，经度的位置，您可以获得该位置的地址：

```
 double latiTude = 10.3929393;
 double longiTude = 150.93984884;

 Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
  GeoPoint p= new GeoPoint((int) (latiTude * 1E6), (int) (longiTude * 1E6));
  List<Address> address = geocoder.getFromLocation(
                                                    p.getLatitudeE6() / 1E6,
                                                    p.getLongitudeE6() / 1E6, 1);
    if (address.size() > 0) 
    {
    String addressFroLatLong= "";
    for (int i = 0; i < address.get(0).getMaxAddressLineIndex(); i++) 
    {   addressFroLatLong+= address.get(0).getAddressLine(i) + "\n";
    }   
   } 
```

# java - Android Eclipse 错误

> ID：11611470
> 
> 赞同：0
> 
> 时间：2012-07-23T11:19:01.430
> 
> 标签：java, android, eclipse

我正在使用 eclipse 开发一个 android 应用程序，似乎无法解决这些突然出现的错误。我是开发新手，非常感谢您的帮助。谢谢

我的错误在这里[http://oi50.tinypic.com/2hflzc8.jpg](http://oi50.tinypic.com/2hflzc8.jpg)

这是我的代码：

```
package com.example.easyfindme;

import com.example.easyfindme.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class EasyFindMe extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(android.R.layout.activity_easy_find_me);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(android.R.menu.activity_easy_find_me, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:20:17.893

利用

```
setContentView(R.layout.activity_easy_find_me); 
```

代替

```
setContentView(android.R.layout.activity_easy_find_me); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:21:01.183

//不要使用

```
android.R.layout.activity_easy_find_me 
```

用于

```
R.layout.activity_easy_find_me 
```

// 对于菜单，您需要在菜单文件夹中使用单独的 xml。布局 xml 不起作用。

```
getMenuInflater().inflate(R.menu.menuxml, menu); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:22:31.743

将您的代码更改为以下代码

```
 public class EasyFindMe extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_easy_find_me);<========== here
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.activity_easy_find_me, menu);<======== here
return true;
}
} 
```

在布局中使用 android.R.xxxx 是个问题。那就是问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:20:06.117

您应该包含您的 R.java 文件，而不是 android.R ..

```
setContentView(android.R.layout.activity_easy_find_me); //is wrong
setContentView(com.example.easyfindme.R.layout.activity_easy_find_me); //is right 
```

# c# - 在 C# 中另存为事件

> ID：11611479
> 
> 赞同：2
> 
> 时间：2012-07-23T11:19:40.137
> 
> 标签：c#, visual-studio-2010, vsto

我使用 VSTO(C#) 为 excel 开发了一个插件。

我想知道工作簿在运行时是否“**另存为”。**IE。用户正在 WBK 1 上执行一些操作，然后他使用 SAVE AS 保存工作簿，然后重命名工作簿并再次开始处理它。那么在这种情况下是否有可能捕捉到“Worlbook SAve AS”事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T11:37:39.217

Application.WorkbookAfterSave 事件传入一个名为的 WorkBook 对象`wb`和一个名为 的布尔值`Success`。

您可以从 Workbook 对象的 FullName 属性中获取保存为文件名。也许您可以将初始名称存储在变量中，并在 AfterSave 事件中比较名称和位置，以查看是否已像这样使用 Save As：

```
using Excel = Microsoft.Office.Interop.Excel;
using System;

namespace ExcelAddIn1
{
    public partial class ThisAddIn
    {
        private string CurrentFullName { get; set; }
        private event EventHandler SaveAs;

        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            CurrentFullName = this.Application.ThisWorkbook.FullName;

            this.Application.WorkbookAfterSave += new Excel.AppEvents_WorkbookAfterSaveEventHandler(Application_WorkbookAfterSave);

            SaveAs += new EventHandler(ThisAddIn_SaveAs);
        }

        void ThisAddIn_SaveAs(object sender, EventArgs e)
        {
            //Do What I want to do if saved as
        }

        void Application_WorkbookAfterSave(Excel.Workbook Wb, bool Success)
        {
            if (Wb.FullName != CurrentFullName)
            {
                CurrentFullName = Wb.FullName;
                SaveAs.Invoke(null, null);
            }
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {
        }
    }
} 
```

# c# - 时间：2019-05-10 标签：c#screenscrapingproject-webbrowser不改变url

> ID：11611480
> 
> 赞同：1
> 
> 时间：2012-07-23T11:19:42.073
> 
> 标签：c#, browser, screen-scraping, web-scraping

我正在从事一个小型自动化项目，但已经碰壁了。首先，我想说明我在项目的这个组件中使用 webbrowser 的唯一原因是被抓取的网站有混淆的代码，并且需要启用 java 的浏览器来显示代码，我有另一个使用 webclient 的应用程序可以工作对其他测试站点很好，但不幸的是不能用于这个目标

尝试以编程方式配置 webbrowser 控件时出现我的问题

我发现的第一个问题是，如果我在控件属性中手动设置 url，它会加载第 1 页并且刮板适用于该页面。
但是，我继续清除属性中的 url 并在 Form1_Load 方法中手动设置它，但它返回 about:blank 作为 url，尽管我已经验证了被拉入的自动参数很好并且应该设置没有问题

这是我正在使用的：

注意：
集合是指定义的 XML 序列化数组
定义是指此目标的活动定义，其想法是为多个目标配置此

```
 private void Form1_Load(object sender, EventArgs e)
    {
        PopulateScraperCollection();
        webBrowser1.Url = new Uri(collection.ElementAt(b).AccessUrl);
        NavigateToUrl(collection.ElementAt(b).AccessUrl);
    }

    public void PopulateScraperCollection()
    {
        string[] xmlFiles = Directory.GetFiles(@"E:\DealerConfigs\");
        foreach (string xmlFile in xmlFiles)
        {
            collection.Add(ScraperDefinition.Deserialize(xmlFile));
        }
    }

    public void NavigateToUrl(string url)
    {
        Console.WriteLine(collection.ElementAt(b).AccessUrl);
        webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;
        webBrowser1.Navigate(webBrowser1.Url);
    }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        WebBrowser wb = sender as WebBrowser;
        Process(collection.ElementAt(b), 0);
        b++;
    } 
```

因此，这会导致使用 DocumentCompleted 导航到分页结果时出现另一个问题。在第一页加载时，我使用 DocumentCompleted 事件来触发链接提取。
当我尝试为下一页设置 url 时，正在使用 xpath 很好地挑选并再次验证，使用 F10 在调试中单步执行表明它没有被更改并且 DocumentCompleted 事件没有被触发

我更改网址等的代码是：

```
string nextPageUrl = string.Format(definition.NextPageUrlFormat, WebUtility.HtmlDecode(relativeUrl));
webBrowser1.Url = new Uri(nextPageUrl);
webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;
webBrowser1.Navigate(webBrowser1.Url); 
```

非常感谢任何帮助，这被证明是自动化的噩梦，不仅因为 WebBrowser 比 WebClient 慢得多，而且事实证明在运行中进行更改很痛苦

问候

巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:44:35.893

你永远不应该真正设置 webBrowser1.Url，你应该只是使用 Navigate void，所以

```
private void Form1_Load(object sender, EventArgs e)
{
    PopulateScraperCollection();
    NavigateToUrl(collection.ElementAt(b).AccessUrl);
} 
```

我的猜测是它为什么不导航，是 collection.ElementAt(b).AccessUrl 为 null 或 about:blank

我不太确定如何回答您的问题，但 Navigate void 应该会改变它

注意：WebBrowser 控件是正确的废话，您可以尝试其他 WebBrowser 控件，例如 Awesomium 或 GeckoFX

# xcode - 如何在界面生成器中找到鼠标光标的坐标

> ID：11611489
> 
> 赞同：0
> 
> 时间：2012-07-23T11:20:09.080
> 
> 标签：xcode, interface-builder, coordinates

我想确切地知道我以编程方式放置图像的位置，因此需要知道我的故事板的坐标。

有没有办法从 Xcode 的界面生成器中查看这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:28:34.320

您的工作区尺寸是 320X460 假设您想以编程方式添加一个按钮首先进入 IB 并将一个按钮放置在您想要的位置，然后在右侧检查按钮的坐标以显示尺寸检查器并在您的代码中使用这些坐标这将使您对以编程方式添加按钮后的按钮位置有一个公平的了解...希望这对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:23:08.083

不。动用你的想象力。在 IB 中无法看到以编程方式添加的视觉对象。

相反，您可以在 IB 中放置一个对象，将其位置调整到所需的位置，读取它的框架，从 IB 中删除它，然后使用它的框架值以编程方式添加 id。

# java - 如何在 Java 中使用匿名内部类避免 @SuppressWarnings？

> ID：11611493
> 
> 赞同：1
> 
> 时间：2012-07-23T11:20:27.363
> 
> 标签：java, android

在使用匿名类时，我正在努力使用更智能的编码风格。

在以下情况下，如何使用没有 @SuppressWarnings 的匿名内部类？

像这样使用匿名类时：

```
someMethod( new Y(){

    // non-overriding public method
    public void echo1(){
        // do some stuff
    }

} );

...

public abstract class Y
{
    // use me as an anonymous class,
    // and define any methods when defining me
} 
```

此代码发出警告。

公共方法 "echo1" 需要注释 @SuppressWarnings("unused") 。

如果我另外编码 echo2, echo3, echo4,... 所有方法都需要一一注释。

为了避免频繁写注解，我尝试用这种方式编写代码，以便在所有子类上传播注解效果：

```
@Inherited // <- This is what I want this annotation to be!
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface SuppressWarningsPropagate extends SuppressWarnings
{
} 
```

然后我尝试用这个注释来注释 Y 类。这将非常有用且简单到只注释一个基类。

...我发现自己很愚蠢。

像 SuppressWarnings 这样的注解不能被“扩展”或“实现”。

相反，此代码可以正常工作并且没有警告，因为 SuppressWarnings 仅适用于这个具体的一个类：

```
@SuppressWarnings("unused")
public class X
{
    private int i;
    private int j;
} 
```

总而言之，我怎么能...

*   使用匿名内部类（为了代码的良好可读性）
*   并在 new 上定义公共方法（必须是公共的，就 Android SDK 的 addJavascriptInterface() 而言）
*   并且还要避免为所有方法一一写@SuppressWarnings("unused")（为了良好的可写性）

...可能的？还是我只是在做白日梦？

提前非常感谢。

# django - django 管理员列表页面

> ID：11611494
> 
> 赞同：0
> 
> 时间：2012-07-23T11:20:28.937
> 
> 标签：django

我在 django-admin 工作。在 Django 管理列表页面中，我需要在操作附近自定义插入字段名称。对于此自定义，我需要用于管理列表页面的 django 模板

有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:25:45.233

[文档中解释了](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)覆盖管理模板。您需要将`django/contrib/admin/templates/admin/change_list.html`（从 django 源代码）复制到`templates/admin/change_list.html`（您的模板目录）

# database - 使用 NHibernate 获取大量数据

> ID：11611495
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:20:35.473
> 
> 标签：database, nhibernate

### 我有大约 300 万行数据要使用 C# 在数据网格上显示。

目前使用 NHibernate 从数据库 sqlserver 2005 中获取数据 ***。NHibernate***需要大量时间来获取数据。**有没有办法使用NHibernate**从数据库中有效地检索数据。

**---编辑---**
由于应用程序有大量数据要操作，加载所有行只是最坏的情况。
在正常使用中，用户将加载 10k 行。使用分页可以最大程度地减少显示行的数量，但是由于某些行依赖于其他行，因此我需要在初始化应用程序时加载所有数据。
**即使有 1000 行，NHibernate 也会变慢。**任何提高性能的建议。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:35:16.897

您可以使用[无状态会话](http://nhforge.org/doc/nh/en/index.html#batch-statelesssession)来获取数据。

[http://ayende.com/blog/4137/nhibernate-perf-tricks](http://ayende.com/blog/4137/nhibernate-perf-tricks)
[http://darioquintana.com.ar/blogging/2007/10/08/statelesssession-nhibernate-without-first-level-cache/](http://darioquintana.com.ar/blogging/2007/10/08/statelesssession-nhibernate-without-first-level-cache/)

但首先问问你自己，你真的需要显示数百万行吗？这对你的用户有什么价值？他们能否轻松找到所需的数据？

此外，`DataGrid`它本身会占用大量内存（无论您使用的是 Windows Forms、WPF、ASP.NET...）。用于存储数据本身的内存，以及用于存储额外 DataGrid 列/单元元数据的内存。

考虑只使用一个数据子集。您可以允许用户通过数据过滤和/或添加分页。过滤器和分页可以转换为 HQL / Criteria / Linq / QueryOver 查询并最终转换为 SQL 查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:26:55.903

我在这里的建议是不要使用 ORM 来获取这种大小的数据，但是我的第二点是为什么要获取 300 万行数据并将其显示在网格中？

没有用户可能想要滚动表格的 300 万行。

您可以使用分页数据系统在任何时候仅请求您正在查看的页面。或者，您可以过滤用户感兴趣的较小子集的数据。

如果您有 300 万条记录，则所需的数据可能是对这些记录的分析。

我会看看其中一些资源：

[http://msdn.microsoft.com/en-us/magazine/cc164022.aspx](http://msdn.microsoft.com/en-us/magazine/cc164022.aspx)

[http://weblogs.asp.net/rajbk/archive/2010/05/08/asp-net-mvc-paging-sorting-filtering-using-the-mvccontrib-grid-and-pager.aspx](http://weblogs.asp.net/rajbk/archive/2010/05/08/asp-net-mvc-paging-sorting-filtering-using-the-mvccontrib-grid-and-pager.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T08:43:13.743

随着应用程序复杂性的增加以及它们赖以生存的数据变得复杂，这种 OR 映射引擎的通用性可能会导致各种性能和可扩展性瓶颈。应用程序无法随着事务需求的增加而线性扩展。缓存是一种可以提高 NHibernate 应用程序性能的技术。Infect NHibernate 提供了一个开箱即用的基本的、不那么复杂的进程内 L1 缓存。但是，它不提供缓存解决方案必须具备的特性才能对应用程序性能产生显着影响。所以最好使用二级缓存，它可以帮助你提高你的 Nhibernate 应用程序的性能。有许多第三方 NHibernate 2nd Level 缓存提供者可用，但我建议您使用**NCache**. 这是一个很好的阅读，

[http://www.alachisoft.com/ncache/nhibernate-l2cache-index.html](http://www.alachisoft.com/ncache/nhibernate-l2cache-index.html)

# android - Android - MEDIA ERROR UNKNOWN -1 通常是什么意思

> ID：11611496
> 
> 赞同：2
> 
> 时间：2012-07-23T11:20:40.813
> 
> 标签：android, android-layout, android-intent, android-emulator, android-ndk

我正在开发一个音频播放器（使用 MediaPlayer），它可以在 mdpi、hdpi、平板电脑上正常工作，但会引发错误：三星 Galaxy mini (ldpi) 上的 MEDIA ERROR UNKNOWN -1。

我注意到大多数歌曲都会出现此错误，尽管仍有 1、2 首歌曲仍在 Galaxy Mini 上播放。

为什么通常会出现这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:48:53.603

通过将导致问题的相同 URI 传递给本机音频播放器，我设法知道问题出在哪里，然后看看它会如何反应。原生音频播放器以更用户友好的方式做出回应，表示不支持该文件类型。

所以至少现在我知道问题不在我这边。

```
private void startNativeAudioPlayer() {

        String path="http://..";

        Intent intent = new Intent();  
        intent.setAction(android.content.Intent.ACTION_VIEW);  
        intent.setDataAndType(Uri.parse(path), "audio/*");  
        startActivity(intent);
} 
```

# cassandra - cassandra中拥有％的含义是什么以及如何更改它？

> ID：11611500
> 
> 赞同：2
> 
> 时间：2012-07-23T11:20:51.307
> 
> 标签：cassandra

我已经配置了 4 个实例的 cannsadra 集群 (cassandra-1.1)。我有 2 台电脑，我在每台电脑上运行 2 个实例。电脑是相同的，并具有20G ram。但是，当我运行 nodetool 时，它会显示不同的 Owns %。问题是为什么？

```
./bin/nodetool  -p 8001 ring

Note: Ownership information does not include topology, please specify a keyspace. 
Address         DC          Rack        Status State   Load            Owns                     Token                                                                                                                                   51042355038140769519506191114765231718      
172.16.40.32    datacenter1 rack1       Up     Normal  11.12 KB        70.00%              0                                           
127.0.0.2       datacenter1 rack1       Up     Normal  11.31 KB        10.00%              17014118346046923173168730371588410572      
172.16.40.202   datacenter1 rack1       Up     Normal  6.7 KB          10.00%              34028236692093846346337460743176821145      
127.0.0.3       datacenter1 rack1       Up     Normal  11.18 KB        10.00%              51042355038140769519506191114765231718 
```

我的 free -m 在两台机器上看起来：

```
 total       used       free     shared    buffers     cached
Mem:         20119       9621      10497          0        281       7925
-/+ buffers/cache:       1414      18704
Swap:         2894          2       2892 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:45:57.410

百分比由节点间的代币分布决定。Cassandra 的令牌范围从 0 到 2^127 (170141183460469231731687303715884105728)。您的环的代币在 0 到 2^127 之间分布不均，这就是为什么您拥有一个拥有 70% 所有权的节点的原因。你可以用它`nodetool move`来让你的戒指保持平衡。

[Cassandra wiki](http://wiki.apache.org/cassandra/Operations#Load_balancing)上有一个简单的 python 脚本，可以生成均衡的令牌。我还编写了一个简单的工具来帮助[可视化您的环形拓扑](http://psanford.github.com/cassandra-visual-ring/)。

# java - HTTP 请求：';' 请求 URL 中的字符

> ID：11611505
> 
> 赞同：2
> 
> 时间：2012-07-23T11:21:01.013
> 
> 标签：java, .net, http, http-headers

在许多网站（特别是 gmail、yahoo 或 hotmail）中，您会注意到 URL

紧随其后的是：yahoo.com/abc/bcd.html;_x=12323;_y=2322;

这些 _x 和 _y 参数是什么？如何在服务器端代码中访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:25:34.723

它们是URL 中的*参数*（与查询字符串不同），[本文](http://www.skorks.com/2010/05/what-every-developer-should-know-about-urls/)有一个很好的讨论，包括这个有用的图表：

```
<scheme>://<username>:<password>@<host>:<port>/<path>;<parameters>?<query>#<fragment> 
```

请注意，它们不是 Java EE[`ServletRequest#getParameter`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)等中使用的“参数”（当他们说“参数”时，它们的意思是查询字符串或 POST 参数，它们是不同的）。

这在[RFC 2396 的 §3.3 中](https://www.rfc-editor.org/rfc/rfc2396#section-3.3)定义：

> 路径可能由一系列路径段组成，由单个斜杠“/”字符分隔。在路径段中，字符“/”、“;”、“=”和“?” 被保留。每个路径段可以包括一系列参数，用分号“;”表示 特点。这些参数对于解析相对引用并不重要。

（为免生疑问：上面的“路径”一词不包括查询字符串，请参见第 3 节的[开头](https://www.rfc-editor.org/rfc/rfc2396#section-3)。）

但是， RFC 2396 已被[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)淘汰，它对[上述](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)内容进行了明显的修改：

> 除了层次路径中的点段之外，路径段被通用语法认为是不透明的。生成 URI 的应用程序通常使用段中允许的保留字符来分隔特定于方案或特定于解引用处理程序的子组件。例如，分号 (";") 和等号 ("=") 保留字符通常用于分隔适用于该段的参数和参数值。逗号 (",") 保留字符通常用于类似目的。例如，一个 URI 生产者可能使用诸如“name;v=1.1”之类的段来指示对“name”的 1.1 版本的引用，而另一个 URI 生产者可能使用诸如“name,1.1”之类的段来指示相同。参数类型可以由特定于方案的语义定义，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:23:48.797

它们只是可能出现在 URL 中的字符。您可以通过解析 URL 来访问它们，因为它们不是常规的查询字符串参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:46:42.197

URI 语法在[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#section-3)中定义如下：

> ```
>  URI         = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
> 
>   hier-part   = "//" authority path-abempty
>               / path-absolute
>               / path-rootless
>               / path-empty 
> ```
> 
> [...]
> 
> ```
> The following are two example URIs and their component parts:
> 
>      foo://example.com:8042/over/there?name=ferret#nose
>      \_/   \______________/\_________/ \_________/ \__/
>       |           |            |            |        |
>    scheme     authority       path        query   fragment
>       |   _____________________|__
>      / \ /                        \
>      urn:example:animal:ferret:nose 
> ```

在此示例 ( `http://yahoo.com/abc/bcd.html;_x=12323;_y=2322;`) 中，这些参数是[路径组件](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)的一部分。本质上，这只是该应用程序中用于识别资源的约定。

一般而言，尽管 HTTP URI 中的路径通常与您在文件系统上找到的路径相似，但它们不必以任何方式与文件系统结构相关。这纯粹是来自取消引用 URI 的引擎的实现决策（即 HTTP 服务器实现以及将请求分派给任何将产生响应的对象）。

严格来说，查询也是 URI 的一个组成部分（你会发现很多关于“RESTful”URI 的讨论都是毫无意义的，除了一些 SEO 技术）。

因为在使用 HTML 表单时参数是通过查询段传递的，所以许多 HTTP 框架通过将查询拆分为地图来公开其内容。例如，在 Java/Servlet 内容中，查询字符串 ( `getQueryString()`) 会自动填充由`getParameter(...`) 返回的参数。

如果要从中获取参数`bcd.html;_x=12323;_y=2322;`，则必须自己拆分路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T11:25:08.143

这些是URI*路径部分中段的参数。*

# automation - Cane 和 metric_fu 是否像 CoffeeScript 的代码指标？

> ID：11611508
> 
> 赞同：4
> 
> 时间：2012-07-23T11:21:06.317
> 
> 标签：automation, coffeescript, code-metrics

Rails 有很多易于使用的代码度量工具，例如 metric_fu、cane 等。

CoffeeScript 有类似的工具吗？

到目前为止，我找到[了 CoffeeLint](http://www.coffeelint.org/)，它检查正确的编码风格。但它的功能集仅限于语法检查。

# java - Tomcat 中无法查看服务器状态，Manager App 页面：不接受用户名和密码，为什么会这样？

> ID：11611510
> 
> 赞同：5
> 
> 时间：2012-07-23T11:21:06.473
> 
> 标签：java, windows, tomcat, tomcat7, role

我无法在 Tomcat 中查看服务器状态和 Manager App 页面。

![在此处输入图像描述](../Images/333d237eecf1ce530ed9f07313dc703c.png)

虽然我在 中配置了用户名和密码`tomcat-users.xml`，但它不接受该组合并显示此消息：

```
401 Unauthorized

You are not authorized to view this page. If you have not changed any configuration  files, please examine the file conf/tomcat-users.xml in your installation. That file must contain the credentials to let you use this webapp.

For example, to add the manager-gui role to a user named tomcat with a password of s3cret, add the following to the config file listed above.

<role rolename="manager-gui"/>
<user username="tomcat" password="s3cret" roles="manager-gui"/>

Note that for Tomcat 7 onwards, the roles required to use the manager application were changed from the single manager role to the following four roles. You will need to assign the role(s) required for the functionality you wish to access.

manager-gui - allows access to the HTML GUI and the status pages
manager-script - allows access to the text interface and the status pages
manager-jmx - allows access to the JMX proxy and the status pages
manager-status - allows access to the status pages only

The HTML interface is protected against CSRF but the text and JMX interfaces are not. To maintain the CSRF protection:

Users with the manager-gui role should not be granted either the manager-script or manager-jmx roles.
If the text or jmx interfaces are accessed through a browser (e.g. for testing since these interfaces are intended for tools not humans) then the browser must be closed afterwards to terminate the session. 
```

我编辑`tomcat-users.xml`为：

```
 <tomcat-users>
  <role rolename="admin"/>
  <role rolename="admin-gui"/>
  <role rolename="manager"/>
  <role rolename="manager-gui"/>
  <user username="suhail" password="suhail" roles="admin,admin-gui,manager,manager-gui"/>
  </tomcat-users> 
```

我把用户名和密码设置为`suhail`. 为什么它不接受组合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T15:12:33.937

我也很挣扎。这个对我有用。将以下内容复制粘贴到 tomcat-users.xml

```
<?xml version='1.0' encoding='utf-8'?>

<tomcat-users>
<role rolename="tomcat"/>
<role rolename="role1"/>
<user username="tomcat" password="tomcat" roles="tomcat"/>
<user username="both" password="tomcat" roles="tomcat,role1"/>
<user username="role1" password="tomcat" roles="role1"/>
 -->
<role rolename="manager-gui" />
<user username="jeril" password="1" roles="manager-gui"/>
</tomcat-users> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:31:10.387

在您的 tomcat-users.xml 中添加以下行以检查服务器状态和管理器应用程序。

```
<user username="username" password="password" roles="admin-gui,manager-gui"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:32:17.017

在您的 tomcat-user.xml 中复制粘贴以下行并更改用户名和密码

```
 <?xml version='1.0'?>
 <tomcat-users>
       <user name="username" password="password" roles="admin-gui,manager-gui" />
 </tomcat-users> 
```

重启tomcat

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T15:48:26.997

`Tomcat`我从我的 IDE *(Netbeans)*启动服务器。所以，我不得不从 Netbeans 设置更改配置：

![在此处输入图像描述](../Images/b7a41fe44f177a0fb53e0e3599837376.png)

现在它按预期工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T06:29:45.007

这对我有用……您只需要在设置用户角色时小心。某些用户角色不能使用相同的用户名。

例如：

> 不应授予具有 manager-gui 角色的用户 manager-script 或 manager-jmx 角色。如果文本或 jmx 接口是通过浏览器访问的（例如，用于测试，因为这些接口是为工具而非人类设计的），那么之后必须关闭浏览器以终止会话。
> 
> 不应授予具有 admin-gui 角色的用户 admin-script 角色。如果文本界面是通过浏览器访问的（例如，用于测试，因为该界面是为工具而非人类设计的），那么之后必须关闭浏览器以终止会话。

所以这就是我所做的，我能够查看所有三个服务器状态、管理器应用程序、主机管理器

我希望这对你有帮助..

```
<tomcat-users>
    <role rolename="admin-gui"/>
    <role rolename="manager-gui" />
    <user username="Your User Name" password="Your Password" roles="manager-gui, admin-gui"/>
</tomcat-users> 
```

确保关闭tomcat并重新启动它！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-30T02:36:58.880

仅供参考：我遇到了相同的 401 错误（在 Tomcat 7 中），但它基于一个完全不同的问题，该问题源于从网络复制和粘贴 tomcat-users.xml 定义：有两种类型的双引号（不同的 Unicode 字符) 看起来几乎相同，因此我忽略了这个问题几个小时！

一种类型的双引号（有效的）是直型“（Unicode 字符 U+0022），另一种（无效）是弯曲或卷曲或斜体或'右侧'类型”（Unicode字符 U+201D)。

用正确的双引号替换不正确的双引号后，我的登录工作完美无缺。

让我发现这个问题的线索是查看报告以下错误的 catalina.out（注意：在我的 tomcat-users.xml 文件中，我删除了所有评论以确保我在隔离问题时处理的是纯 XML 语句） ：

```
SEVERE: Parse Fatal Error at line 4 column 18: Open quote is expected for attribute "{1}" associated with an  element type  "rolename". 
```

替换不正确的引号后，我的登录工作完美无缺。

# json - 将原始 JSON 与不同类的字段绑定

> ID：11611511
> 
> 赞同：0
> 
> 时间：2012-07-23T11:21:14.740
> 
> 标签：json, gson

我正在通过 http webservice 获取以下 JSON 字符串：

***原始 JSON 字符串：***

```
[
 {
   field1OfClass1:"someValue",
   field2OfClass1:"someValue",
   field1OfClass2:"someValue",
   field2OfClass3:"someValue"
 } 
] 
```

***课程：***

```
class Class1
{
    String field1;
    String field2;
}

class Class2
{
    String field1;
}

class Class3
{
    String field2;
} 
```

在 GSON 中，有没有办法用描述的类的字段解析上述 JSON 字符串？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:32:12.940

据我所知，Gson 没有内置功能可以自动将示例 JSON 结构映射到原始问题中的示例 Java 数据结构。自定义反序列化处理是必要的。

# json - 与 JAXB 和 JAX-RS 一致的 JSON 表示？

> ID：11611513
> 
> 赞同：1
> 
> 时间：2012-07-23T11:21:24.650
> 
> 标签：json, jboss, jaxb, glassfish, jax-rs

我正在编写一个在 Glassfish 或 JBoss 中运行的 Java EE 应用程序，并且我被要求为我们的 JAX-RS 客户端提供 JSON 支持。

当然，简单地启用 JSON 媒体类型很简单，但会导致我的 JAXB 注释模型的供应商特定表示。因此，我正在寻找一种前进的方式，一种确保我的测试与两个 AS 服务器一起工作并且我仍然利用 JAXB/JAX-RS 而不是编写大量自定义代码的方式。

我已经尝试添加一个 jaxb.properties 文件来选择一个特定的实现，但大概运送 Jackson/MOXy/其他 JAXB 库可能与提供的库冲突？

任何其他想法将不胜感激。

# c# - C# 将 Windows UAC 级别更改为 Always Notify

> ID：11611516
> 
> 赞同：2
> 
> 时间：2012-07-23T11:21:37.567
> 
> 标签：c#, registry, uac

我想将机器的 UAC 级别更改为最高级别的“始终通知”级别。

我尝试将以下注册表项值更改为 1。 Key =`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System`

```
const string UACkey = @"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System";
            const string Subkey = "EnableLUA";
RegistryUtilities.SetValue(UACkey, Subkey, **1**, Microsoft.Win32.RegistryValueKind.DWord, RegistryUtilities.WOW64Key.Key64); 
```

这导致 UAC 处于第 3 级（当程序尝试进​​行更改时通知）。

如何将其设置为顶级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:35:21.110

我设法通过更改 UAC 并同时打开 regedit 并观察哪些值发生了变化来找到这一点。

当在顶部设置时，值

```
ConsentPromptBehaviorAdmin 
```

更改为`2`，而不是`5`在第 3 级时（微软的逻辑很好）。更改该值以及`EnableLUA`应该这样做。

希望这可以帮助

# jquery - 使用 mustache.js 渲染复杂的 JSON

> ID：11611522
> 
> 赞同：0
> 
> 时间：2012-07-23T11:21:52.680
> 
> 标签：jquery, json, couchdb, mustache

我是 CouchDB 的新手。我从安静的某个时候开始熟悉 JSON。我现在的问题是我有一个非常复杂的 JSON 数据。我还阅读了一些 mustache.js 的文档，觉得它非常适合渲染 JSON。渲染简单的 JSON 很好，但是如果存在嵌套对象怎么办。下面是我的示例 JSON：

```
{
 "name": "John",
 "email": "john@abc.com",
 "files": {
         "img1.jpg":
               {"content_type": "image/jpeg", "revpos": 3, "length": 33423, "stub": true},
         "img2.jpg": 
              {"content_type": "image/jpeg", "revpos": 2, "length": 146909, "stub": true}
 } 
```

}

我想显示我的姓名、电子邮件和图像文件。如何使用 mustache.js 完成此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:20:16.107

我会改变你的数据返回方式。

```
{
 "name": "John",
 "email": "john@abc.com",
 "files": {
         0:
               {"filename": "image1.jpg", "content_type": "image/jpeg", "revpos": 3, "length": 33423, "stub": true},
         1: 
              {"filename": "image2.jpg", "content_type": "image/jpeg", "revpos": 2, "length": 146909, "stub": true}
 } 
```

你的输出应该是这样的：

```
Name: {{name}}<br />
Email: {{email}}<br />
Files: <ul>
{{#.}}
    <li>{{filename}}</li>
{{/.}}
</ul> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T12:53:36.347

我不知道如何循环一个对象并获得它的关键，但如果你向文件添加一个“文件名”属性，你可以这样做：

```
Name: {{name}}<br />
Email: {{email}}<br />
Files: <ul>
{{#files}}
    <li>{{filename}}</li>
{{/files}}
</ul> 
```

[https://github.com/janl/mustache.js#non-empty-lists](https://github.com/janl/mustache.js#non-empty-lists)

顺便说一句：您发布的是有效的 JS，但不是有效的 JSON（缺少键周围的引号）

# windows-8 - 单击搜索时将调用魅力栏下方的项目

> ID：11611525
> 
> 赞同：0
> 
> 时间：2012-07-23T11:22:14.070
> 
> 标签：windows-8, charms-bar

我创建了一个带有水平布局列表视图的页面，其中添加了足够多的项目并具有水平滚动条。当您单击列表视图中的项目时，它会导航到另一个页面，其中包含有关单击项目的一些详细信息。

现在，我通过使用搜索合同向我的应用程序添加了搜索功能。这就是问题出现的地方。当您打开魅力栏时，它会覆盖在列表视图上，这很好。但是，当我单击超级按钮栏中的搜索图标时，搜索会打开，而且列表项（位于超级按钮栏下方）的点击事件也会被调用。

其他人见过这种行为吗？在魅力栏中对我来说感觉就像一个错误？希望有人也看到了这一点并有解决方案来防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:31:10.600

一个快速的想法是，当用户调用搜索时，您的应用程序是从 OnSearchActivated 方法激活的；您可以在其中添加/删除事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:31:17.413

不错的尝试，但无论您做什么（调度、计时器...），单击事件都会在 OnSearchActivated 之前引发。

顺便说一句，我们通过在右侧提供 86 像素的视图边距来“解决”这个问题（我测量了 Charm 条，无论分辨率如何，它都是 86 像素）。为了保持视图对称，我们还在左侧提供了 86 个像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:22:19.133

昨天在 RTM 版本上测试了它，似乎这个问题在 RTM 版本中得到了修复。

谢谢各位的意见。

# rest - 什么 rest API 可用于获取创建问题的字段默认值？

> ID：11611526
> 
> 赞同：2
> 
> 时间：2012-07-23T11:22:15.010
> 
> 标签：rest, web-services, jira

我在我的应用程序中使用 jira rest api。我找到了用于获取元数据以创建 jira 问题的 api，但该 API 不返回字段的默认值，例如：-

这是请求：-

```
http://kelpie9:8081/rest/api/latest/issue/createmeta?projectKeys=QA&issuetypeNames=Bug&expand=project.issuetypes.fields 
```

priority 字段的默认值设置为“major”，优先级的描述也是自定义的，但是从 api 的返回是：-

```
{
    "expand": "projects",
    "projects": [
        {
            "expand": "issuetypes",
            "self": "http://kelpie9:8081/rest/api/2/project/QA",
            "id": "10010",
            "key": "QA",
            "name": "QA",
            "avatarUrls": {
                "16x16": "http://kelpie9:8081/secure/projectavatar?size=small&pid=10010&avatarId=10011",
                "48x48": "http://kelpie9:8081/secure/projectavatar?pid=10010&avatarId=10011"
            },
            "issuetypes": [
                {
                    "expand": "fields",
                    "self": "http://kelpie9:8081/rest/api/2/issuetype/1",
                    "id": 1,
                    "name": "Bug",
                    "iconUrl": "http://kelpie9:8081/images/icons/bug.gif",
                    "fields": {
                        "summary": {
                            "required": true,
                            "schema": {
                                "type": "string",
                                "system": "summary"
                            },
                            "operations": [
                                "set"
                            ]
                        },
                        "timetracking": {
                            "required": false,
                            "operations": [ ]
                        },
                        "issuetype": {
                            "required": true,
                            "schema": {
                                "type": "issuetype",
                                "system": "issuetype"
                            },
                            "operations": [ ],
                            "allowedValues": [
                                {
                                    "id": "1",
                                    "name": "Bug",
                                    "description": "A problem which impairs or prevents the functions of the product.",
                                    "iconUrl": "http://kelpie9:8081/images/icons/bug.gif"
                                }
                            ]
                        },
                        "priority": {
                            "required": false,
                            "schema": {
                                "type": "priority",
                                "system": "priority"
                            },
                            "name": "Priority",
                            "operations": [
                                "set"
                            ],
                            "allowedValues": [
                                {
                                    "self": "http://172.19.30.101:18080/rest/api/2/priority/1",
                                    "iconUrl": "http://172.19.30.101:18080/images/icons/priority_blocker.gif",
                                    "name": "Blocker",
                                    "id": "1"
                                },
                                {
                                    "self": "http://172.19.30.101:18080/rest/api/2/priority/2",
                                    "iconUrl": "http://172.19.30.101:18080/images/icons/priority_critical.gif",
                                    "name": "Critical",
                                    "id": "2"
                                },
                                {
                                    "self": "http://172.19.30.101:18080/rest/api/2/priority/3",
                                    "iconUrl": "http://172.19.30.101:18080/images/icons/priority_major.gif",
                                    "name": "Major",
                                    "id": "3"
                                },
                                {
                                    "self": "http://172.19.30.101:18080/rest/api/2/priority/4",
                                    "iconUrl": "http://172.19.30.101:18080/images/icons/priority_minor.gif",
                                    "name": "Minor",
                                    "id": "4"
                                },
                                {
                                    "self": "http://172.19.30.101:18080/rest/api/2/priority/5",
                                    "iconUrl": "http://172.19.30.101:18080/images/icons/priority_trivial.gif",
                                    "name": "Trivial",
                                    "id": "5"
                                }
                            ]
                        },
                        "customfield_10080": {
                            "required": false,
                            "schema": {
                                "type": "array",
                                "items": "string",
                                "custom": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
                                "customId": 10080
                            },
                            "operations": [ ]
                        },

                        "customfield_10010": {
                            "required": false,
                            "schema": {
                                "type": "array",
                                "items": "string",
                                "custom": "com.atlassian.jira.plugin.system.customfieldtypes:labels",
                                "customId": 10010
                            },
                            "operations": [ ]
                        },
                        "customfield_10071": {
                            "required": false,
                            "schema": {
                                "type": "array",
                                "items": "string",
                                "custom": "com.atlassian.jira.plugin.system.customfieldtypes:textfield",
                                "customId": 10071
                            },
                            "operations": [ ]
                        }
                    }
                }
            ]
        }
    ]
} 
```

优先级字段中没有默认值或描述，我将如何获取这些值？

# objective-c - 与 SKPSMTP 消息相关

> ID：11611530
> 
> 赞同：0
> 
> 时间：2012-07-23T11:22:33.837
> 
> 标签：objective-c

我在 iphone 中使用 SKPSMTP 发送消息。我正在发送该消息，但我的帐户中没有收到邮件。

```
 Actually it is happening when am i using my office mail(a@example.com) and server(mail.example.com). Am receiving mail to other mail(b@example.com) with same server but not to gmail, yahoo like that. Will any one please help me what is the reason behind that?

SKPSMTPMessage *mail = [[SKPSMTPMessage alloc]init];
    mail.fromEmail = @"a@example.com";
    //mail.toEmail = @"xxx@yahoo.in";
    //mail.toEmail = [toMail objectAtIndex:i];
    mail.toEmail = toMail;
    mail.relayHost = @"mail.example.com";//@"smtp.mail.yahoo.com";//@"smtp.gmail.com";
    mail.requiresAuth = YES;
    mail.login = @"a@example.com";
    mail.pass = @"aaaaaaa";
    mail.subject = @"Testing using SMTP background app message ";
    mail.wantsSecure = YES; // smtp.gmail.com doesn't work without TLS!

    // Only do this for self-signed certs!
    //mail.validateSSLChain = NO;
    mail.delegate = self;

    //email contents
    NSString * bodyMessage = [NSString stringWithFormat:@"Hi , how r u? This is from my mail."];

mail.parts = [NSArray arrayWithObjects:plainPart, nil];
[mail send]; 
```

# android - android布局权重以编程方式

> ID：11611531
> 
> 赞同：12
> 
> 时间：2012-07-23T11:22:36.583
> 
> 标签：android, android-layout, android-linearlayout

我已经在布局 xml 上对 layout_weight 进行了硬编码。但现在我想从 java 代码中给出 layout_weight 和 weightSum。

我们如何在课堂上做到这一点？

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="25" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:background="#F51215"
        android:paddingLeft="5dip"
        android:text="5" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:background="#1AC92B"
        android:paddingLeft="5dip"
        android:text="20" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-23T11:31:58.907

像这样的东西：

```
 ......
               LinearLayout layout = (LinearLayout)findViewById(YOUR_LAYOT_ID);
               layout.setWeightSum(25f);
               LinearLayout.LayoutParams lParams = (LinearLayout.LayoutParams) layout.getLayoutParams(); //or create new LayoutParams... 

               lParams.weight = 0.5f;
               .......
               someView.setLayoutParams(lParams);
               ....... 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-23T11:24:34.633

```
//set as like this below for different view set different float value.

myview.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,5f)); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-05T15:35:29.230

我只是想添加一个示例，说明如何将 weightsum 与内部带有 TextViews 的 TableRow 一起使用：

```
 TableRow row = new TableRow(this);
           TableRow.LayoutParams params1 = new TableRow.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT, 10f);
           row.setLayoutParams(params1);
           row.setPadding(10, 10, 10, 10);
           row.setBackgroundColor(R.color.black);

           TextView tv = new TextView(this);
           TableRow.LayoutParams params2 = new TableRow.LayoutParams(0, LayoutParams.WRAP_CONTENT, 6f);
           tv.setLayoutParams(params2);
           tv.setTextSize(30);
           tv.setBackgroundResource(R.color.white);

           TextView tv2 = new TextView(this);
           TableRow.LayoutParams params3 = new TableRow.LayoutParams(0, LayoutParams.MATCH_PARENT, 2f);
           tv2.setLayoutParams(params3);
           tv2.setBackgroundResource(R.color.green);

           TextView tv3 = new TextView(this);
           TableRow.LayoutParams params4 = new TableRow.LayoutParams(0, LayoutParams.MATCH_PARENT, 2f);
           tv3.setLayoutParams(params4);
           tv3.setBackgroundResource(R.color.blue); 
```

在下面生成 TableRow。weightsum 为 10 的父级，子级的宽度则等于宽度的 60%、20% 和 20%。这里的高度是由高度为 30 的 TextView、tv 确定的。希望对某人有所帮助。:-)

![文本](../Images/3df5c1e90f2b047fadee277c8e29a5ea.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-10T12:38:04.250

**如果您想以编程方式更改父权重并且它是子属性，那么请在下面使用**

这是您的设置方式。

```
 LinearLayout yourLayout=(LinearLayout)findViewById(R.id.container);
 yourLayout.setWeightSum(0.6f); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-23T07:02:30.103

使用 LinearLayout 动态生成带权重的 TextView

```
LinearLayout lin_hoizontal = new LinearLayout(context);
lin_hoizontal.setOrientation(LinearLayout.HORIZONTAL);
lin_hoizontal.setLayoutParams(new android.widget.LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT, 10f));
lin_hoizontal.setPadding((int) context.getResources().getDimension(R.dimen.d_8), (int) context.getResources().getDimension(R.dimen.d_2), (int) context.getResources().getDimension(R.dimen.d_8), (int) context.getResources().getDimension(R.dimen.d_2));

android.widget.LinearLayout.LayoutParams params_label = new android.widget.LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT, 2.5f);
TextView txt_label = new TextView(context);
txt_label.setTextColor(context.getResources().getColor(R.color.listing_header_txt_color));//your text color
txt_label.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.d_13));
txt_label.setTypeface(Typeface.create("sans-serif-medium", Typeface.NORMAL));
txt_label.setLayoutParams(params_label);
txt_label.setPadding(0, 0, (int) context.getResources().getDimension(R.dimen.d_2), 0);
txt_label.setText("Label");

android.widget.LinearLayout.LayoutParams params_value = new android.widget.LinearLayout.LayoutParams(0, LinearLayout.LayoutParams.WRAP_CONTENT, 7.5f);
TextView txt_value = new TextView(context);
txt_value.setTextColor(context.getResources().getColor(R.color.listing_header_txt_color));
txt_value.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.d_13));
txt_value.setTypeface(Typeface.create("sans-serif-light", Typeface.NORMAL));
txt_value.setLayoutParams(params_value);
txt_value.setPadding((int) context.getResources().getDimension(R.dimen.d_2), 0, 0, 0);
txt_value.setText("Value");

lin_hoizontal.addView(txt_label);
lin_hoizontal.addView(txt_value);
lin_hoizontal.addView(lin_main); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-02T14:48:31.693

我喜欢 Ajii 的回答或：

```
((LinearLayout)view).setWeightSum(n); 
```

对于个人视图权重：

```
((LinearLayout.LayoutParams)view.getLayoutParams()).weight = n; 
```

*   当然你可以做.. `LinearLayout view = findViewById(R.id.view_name);`
    （并放弃动态转换（LinearLayout））

*   或替代………………..`findViewById(R.id.view_name)`用于上面的视图。

这些都对我有用。如果你想要尺寸文件中的价值：

```
<item name="new_weight" format="float" type="dimen">(your number)</item> 
```

和：`float n = getResources().getFloat(R.dimen.new_weight);`

我相信您已经知道其中的大部分内容，但是...我曾经是新手，我一直很欣赏额外的描述。

# android - WebView 点击动作

> ID：11611534
> 
> 赞同：0
> 
> 时间：2012-07-23T11:22:45.943
> 
> 标签：android

我正在开发一个简单的应用程序上的 Android。而且我是 Android 新手。我在 WebView 上有一个小任务。我正在向 Webview 添加一个 HTML 页面。它工作正常。问题是如何将点击动作赋予“点击按钮”，这是 HTML 页面中彩色文本的类型。

如果我在我的 javascrip 中使用了单击操作，我如何能够在我的意图中获得该单击操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:28:55.800

```
 mwebview.addJavascriptInterface(new JavaScriptInterface(this), "Android");//in js add this fn

   <script type="text/javascript">
         function buttonclickAction(toast) {
                Android.showToast(toast);           
         }   
    </script> 
```

# php - 将 http://www 添加到 url

> ID：11611537
> 
> 赞同：0
> 
> 时间：2012-07-23T11:22:55.657
> 
> 标签：php

如何`http://www`以优雅的方式添加到 url？我可以做一些 if 语句，但我更喜欢简洁的东西。

这个想法是创建一个函数 addHttpWWW，它返回以下内容，用于以下输入：

```
google.com => http://www.google.com
http://www.google.com => http://www.google.com
www.google.com => http://www.google.com
http://google.com => http://www.google.com 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T11:29:22.150

```
$url = preg_replace('#(?:http(s)?://)?(?:www\.)?(.+)#', 'http\1://www.\2', $url); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:27:47.823

```
$input = "google.com";   //Or whatever you want.

$output = "http://www." + str_replace(array("http://www.", "http://", "www."), "", $input); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-23T12:00:21.007

如果你在你的页面中使用 jquery：这里是 ajax 工作后的解决方案，你可以有这个：记住它的工作 1.7.2 版本；）

```
<input type="text" id="txt_url" />

//...............................................

$("body").on("keyup","#txt_url",function() {
    var el=document.getElementById('txt_url');
    el.onkeyup=function();
    var str=el.value;
    if(str=='') return;   
    if(str.indexOf('http://')==-1 && str.length >= 7)
        el.value='http://'+str;   
    }
}); 
```

工作解决方案：

[http://jsfiddle.net/3uupV/](http://jsfiddle.net/3uupV/)

# mysql - mysql内部连接需要另一种类型的连接

> ID：11611538
> 
> 赞同：0
> 
> 时间：2012-07-23T11:22:58.020
> 
> 标签：mysql

```
[TABLE1]

 +----------+-------------------+-------------+
 | USERNAME | POST              | FRUIT       |
 +----------+-------------------+-------------+
 | Bob      | 'Hi There'        | APPLE       |
 | Jack     | 'Hello'           | ORANGE      |
 | Bob      | 'Today is Monday' | APPLE       |    
 | Tony     | 'That is ok'      | PEAR        |
 +----------+-------------------+-------------+

 [TABLE2]

 +----------+-----------+
 | USERNAME | FOLLOWING |
 +----------+-----------+
 | Mike     | Jack      |
 | Jack     | Bob       |
 | Bob      | Jack      |
 | Jack     | Mike      |
 +----------+-----------+

 [TABLE3]

 +----------+----------- +
 | USERNAME | LIKESFRUIT |
 +----------+----------- +
 | Mike     | APPLE      |
 | Jack     | ORANGE     |
 | Bob      | BERRY      |
 | Jack     | PEAR       |
 +----------+------------+ 
```

我正在使用以下查询。如果 jack 跟随 TABLE2 中的用户或 jack 在 TABLE 1 中的用户名中，它将显示 TABLE1 中的所有记录。

```
 SELECT t1.* 
 FROM TABLE1 t1 
 INNER JOIN table2 t2 
 ON t1.username = t2.following 
 AND (t2.username = 'jack' OR t1.username = 'jack'); 
```

现在我想这样做并显示 TABLE1 中的记录，如果 Jack LIKESFRUIT 在 TABLE3 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:28:25.350

```
 SELECT t1.* 
 FROM TABLE1 t1 
 INNER JOIN table2 t2 
 ON t1.username = t2.following 
left join tablet3 t3 on t3.username = t1.username
 AND (t2.username = 'jack' OR t1.username = 'jack')
AND (t3.username = 'jack' and t3.LIKESFRUIT <> '' and t3.LIKESFRUIT is not null)
; 
```

虽然我不确定“显示 TABLE1 中的记录”是什么意思

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:31:09.433

尝试这个

```
SELECT t1.* 
 FROM TABLE1 t1 
 INNER JOIN table2 t2 
 ON t1.username = t2.following 
 AND (t2.username = 'jack' OR t1.username = 'jack')
 and exists(select * from TABLE3 t3 where t3.username=t1.username) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:39:17.373

```
SELECT
    username, post, fruit
FROM
    TABLE1 t1
INNER JOIN
    TABLE2 t2
ON
    t1.username = t2.username
AND t1.username = t2.follwing
INNER JOIN
    TABLE3 t3
ON
    t3.LIKESFRUIT = t1.fruit
WHERE
    t1.username = 'jack'; 
```

# php - PHP：如果 a 等于 b 或 c 或 d

> ID：11611540
> 
> 赞同：7
> 
> 时间：2012-07-23T11:22:59.143
> 
> 标签：php, if-statement

> **可能的重复：**
> [简写如下： if($variable == 1 || $variable == “whatever” || $variable == '492') 。](https://stackoverflow.com/questions/8205377/short-hand-to-do-something-like-ifvariable-1-variable-whatever)

这是

```
if ($a==b||$a==c||$a==$d){ ... 
```

描述这种逻辑的最短方法。我正在考虑类似的事情

```
if ($a==($b||$c||$d)) { ... 
```

但这不是有效的代码。有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T11:25:47.690

您可以使用[in_array](http://php.net/manual/en/function.in-array.php)：

```
if( in_array($a, array($b,$c,$d)) ){
    //do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:26:59.030

这是有效的代码，但在逻辑上不正确。

如果你有很多价值观，那么你可以做这样的事情。

```
if(in_array($a,array($b,$c,$d))) {
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:25:57.613

两者都与`||`布尔运算符不同，并且将始终返回`true`or `false`。因此，在第二个语句中，您正在比较 if `$a`is `true`or `false`。

您可以使用`in_array`比较是否`$a`存在于`array($b, $c, $d)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T11:26:00.123

不知道为什么你想做一些事情，但是你可以把 b,c,d 放在数组中并调用 in_array 函数来搜索元素。仍然我不明白为什么你想要简短而简单的代码使简短而不简单。

# android - Android：如何在访问数据库时创建加载屏幕

> ID：11611542
> 
> 赞同：0
> 
> 时间：2012-07-23T11:23:06.233
> 
> 标签：android

我一直在开发一个地图项目。在所有 Activity 类中，我有一个名为**getDataFromServer()**的方法，它解析来自服务器的一些 JSON 响应以用于特定的活动。并在地图上显示该数据。在接收和解析数据时，我想显示加载屏幕。如何在 Doinbackground() 中创建 getDataFromServer() 方法。

请给我最好的方法........谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:25:10.157

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)：

```
public final class DownloadFile extends AsyncTask<Void, Long, Boolean> {

private Context context;
private ProgressDialog progressDialog;

public DownloadFile (Context context) {
    this.context = context;
}

/* 
 * @see android.os.AsyncTask#onPreExecute()
 */
@Override
protected void onPreExecute() {
    try {
        progressDialog = ProgressDialog.show(context, "", "message", true);
    } catch (final Throwable th) {
        //TODO
    }
}

/* 
 * @see android.os.AsyncTask#doInBackground(Params[])
 */
@Override
protected Boolean doInBackground(Void... arg0) {
    //do something
}

    @Override
protected void onProgressUpdate(String... progress) {
    //do something
    super.onProgressUpdate(progress);
}

/* 
 * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
 */
@Override
protected void onPostExecute(Boolean result) {
    progressDialog.dismiss();
} } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:30:06.180

参考这个链接

[http://www.bango29.com/go/blog/2011/android-asynctask-is-a-beauty-part-2](http://www.bango29.com/go/blog/2011/android-asynctask-is-a-beauty-part-2)

在 clicklistener 上的按钮中，您可以创建对象。

新的类名（）。执行（）；

# javascript - 如何显示/绘制以数字为输入的屏幕锁定模式

> ID：11611547
> 
> 赞同：1
> 
> 时间：2012-07-23T11:23:22.497
> 
> 标签：javascript, android, jquery, css, html

如何通过输入数字作为输入来显示/绘制 9 点屏幕锁定图案使用 PHONEGAP（HTML、JAVASCRIPT、JQUERY、CSS）...（分别从 1-9 假设和命名点）..例如，如果我提供输入序列为 1236987，那么我的输出应该是这样的

```
[ 1 → 2 → 3
            ↓
  4 5 6
            ↓
  7 ← 8 ← 9]

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:57:18.863

我认为这就是你想要的……又快又脏……用过的桌子……没有做所有的箭头方向

[http://jsfiddle.net/mattnull/YaCRe/2/](http://jsfiddle.net/mattnull/YaCRe/2/)

# javascript - 使用 HTML5 画布和 getImageData 的透明像素？

> ID：11611549
> 
> 赞同：8
> 
> 时间：2012-07-23T11:23:30.280
> 
> 标签：javascript, image, html, canvas

在我的应用程序中，我需要获取一些图像，对其进行处理，然后保存以备后用。所以我将它们绘制到一个临时画布上，然后使用`getImageData`功能。但在输出透明度丢失......

这是我的代码：

```
var tempCanvas = document.createElement('canvas');
var tempContext = tempCanvas.getContext('2d');

tempContext.drawImage(image, 0, 0);
var imageData = tempContext.getImageData(0, 0, image.width, image.height); 
```

我`image`有一些透明像素，但在此之后没有透明像素`imageData`我该如何解决这个问题？

有没有办法将 Html Image 转换为 ImageData，所以我可以处理它然后绘制到画布上？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T16:53:07.023

你的 imageData 应该包含 alpha 通道。

但是， putImageData 将替换上下文中的像素值。它不会将它与上下文中像素的先前值合并，它将替换它。所以，你应该看到的是画布后面的像素（在大多数情况下，你的 html 页面的 body 标签的像素颜色）。

你必须做的：

*   使用临时画布获取图像数据是好方法
*   根据需要修改 imageData
*   不要尝试使用 putImageData 将此 imageData 放回 conetext 中，它不会像您希望的那样运行
*   但创建一个新的 Image 对象并将 imageData 作为源（是的，它有效:)）
*   使用 drawImage 绘制图像

代码示例：

```
var tempCanvas = document.createElement('canvas');
var tempContext = tempCanvas.getContext('2d');

tempContext.drawImage(image, 0, 0);
var imageData = tempContext.getImageData(0, 0, image.width, image.height);

//modify here the imageData as you need

var img = new Image();
img.src = imageData;
context.drawImage(img, 0, 0); //the true context of the canvas 
```

它应该有效。

# iphone - 发布到 Facebook 朋友墙而不是使用 iOS 发送通知

> ID：11611552
> 
> 赞同：0
> 
> 时间：2012-07-23T11:23:33.493
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我目前有以下代码，可以选择一个随机的 Facebook 朋友并发布到他们的墙上。我希望能够从所有朋友中进行选择（而不是随机选择一个）并发布到他们的墙上。如果有人可以帮助我使用以下代码，那就太好了:)

```
 case gkAPIFriendsForDialogFeed:
            {
                NSArray *resultData = [result objectForKey: @"data"];
                // Check that the user has friends
                if ([resultData count] > 0) {
                    // Pick a random friend to post the feed to
                    int randomNumber = arc4random() % [resultData count];
                    [self apiDialogFeedFriend: 
                     [[resultData objectAtIndex: randomNumber] objectForKey: @"id"]];
                } else {
                    [self showMessage:@"You do not have any friends to post to."];
                }
                break;
            } 
```

此代码选择所有朋友，但不会发布到他们的墙上，而是向他们发送通知：

```
case gkAPIGetAppUsersFriendsUsing:
        {
            NSMutableArray *friendsWithApp = [[NSMutableArray alloc] initWithCapacity:1];
            // Many results
            if ([result isKindOfClass:[NSArray class]]) {
                [friendsWithApp addObjectsFromArray:result];
            } else if ([result isKindOfClass:[NSDecimalNumber class]]) {
                [friendsWithApp addObject: [result stringValue]];
            }

            if ([friendsWithApp count] > 0) {
                [self apiDialogRequestsSendToUsers:friendsWithApp];
            } else {
                [self showMessage:@"None of your friends are using Whatto."];
            }

            [friendsWithApp release];
            break;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:36:47.320

在多个用户的墙上发帖违反 Facebook 平台条款。您应该坚持使用 Requests 方法，因为这是向多个用户发送消息的正确方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:53:03.137

Call this function after get random id.

and change parameter according to your app.

-(void)sendFBPost:(UIButton *)tag

{

```
NSString *Message = [NSString stringWithFormat:@"-posted via iPhone App"];
NSMutableDictionary *params1 = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                Message, @"message", nil];
NSString *post=[[appDelegate.FBFriendListArray objectAtIndex:tag.tag] objectForKey:@"id"];

[[appDelegate facebook] requestWithGraphPath:[NSString stringWithFormat:@"/%@/feed",post] andParams:params1 andHttpMethod:@"POST" andDelegate:self];

UIAlertView  *alert = [[UIAlertView alloc] initWithTitle:@"Message!" message:@"Invitation Send Sucessfully" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];
[alert release]; 
```

}

# c# - Mongodb 数组 ElemMatch

> ID：11611555
> 
> 赞同：4
> 
> 时间：2012-07-23T11:23:45.380
> 
> 标签：c#, mongodb

我有一系列文件：

```
 "_id" : ObjectId("500d1aa9cf6640c15214fc30"),
  "Title" : "Title0",
  "Description" : "Description0",
  "Keywords" : ["Keyword000", "Keyword001", "Keyword002", "Keyword003", "Keyword004", "Keyword005", "Keyword006", "Keyword007", "Keyword008", "Keyword009"],
  "Category" : 0 
```

我想查询具有一个关键字的项目：

```
var query = Query.ElemMatch("Keywords", Query.EQ(XXX, "Keyword003")); 
```

我不知道要在 Query.EQ 上查询什么。

* * *

通过将示例转换为：

```
"_id" : ObjectId("500d4393cf6640c152152354"),
"Title" : "Title0",
"Description" : "Description0",
"Keywords" : [{
  "Value" : "Keyword000"
}, {
  "Value" : "Keyword001"
}],
"Category" : 0 
```

并通过查询

```
var query = Query.ElemMatch("Keywords", Query.EQ("Value", "Keyword001")); 
```

我得到结果没有问题。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T14:12:12.003

当 x 是一个数组时，MongoDB 查询引擎会以不同的方式处理 { x : 123 } 形式的查询。它匹配 x 数组包含 123 的任何文档。请参阅：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)

在您的情况下，查询：

```
Query.EQ("Keywords", "Keyword003") 
```

将匹配关键字数组包含“Keyword003”的任何文档。它也可能包含其他值，但这并不重要。

仅当数组是嵌入文档的数组并且您想要针对每个嵌入文档编写复杂的测试时才需要 ElemMatch。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:46:26.907

您是否尝试过像文档中的其他键一样查询关键字？驱动程序将返回包含提供的关键字的文档

再见

# javascript - Flask 的 Javascript 框架

> ID：11611556
> 
> 赞同：9
> 
> 时间：2012-07-23T11:23:46.727
> 
> 标签：javascript, flask

我是 Flask 和前端 javascript 框架的新手，并试图构建不会重新加载每个用户点击的漂亮 REST 站点。我现在有点jQuery。适合 Flask 的最佳 javascript 框架是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T13:05:42.080

Flask 是一个微框架，旨在广泛使用扩展（参见最知名[的列表](http://flask.pocoo.org/extensions/)）。而且它与 JavaScript 无关。所以你可以使用任何你想要的 js 框架。

jQuery 很好而且很有名。我会推荐 jQuery + Backbone.js 用于 AJAX/REST Web 应用程序。与 Flask 配合得很好。

Backbone.js 也是众所周知的，默认使用 RESTful 接口。但它的主要目的是帮助您在客户端使用 MVC（模型-视图-控制器）方法实现 Web 应用程序。MVC 方法对于复杂的、功能覆盖的应用程序是强制性的，并为您提供可支持性和代码可读性。

我认为这将是您的最佳选择。（当然也有类似的框架）

# asp.net - GridView的Itemtemplate与DataTable的绑定

> ID：11611560
> 
> 赞同：1
> 
> 时间：2012-07-23T11:24:05.603
> 
> 标签：asp.net, gridview

我在 .aspx 文件中有下面的 GridView。

```
 <asp:GridView ID="grdScopeList" runat="server">
    <Columns>
    <asp:TemplateField>
    <ItemTemplate>
    <asp:CheckBox ID="ScopeChk" runat="server" Checked=false />
    </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField DataField="sync_scope_name"  Visible=true />
    </Columns>
    </asp:GridView> 
```

我正在使用 Dataset/DataTable 来分配 GridView。下面是 PageLoad 事件中使用的代码片段。

```
string scopecomm="select sync_scope_name from Sync.scope_info";
DataSet ds_scope = new DataSet();
ds_scope = GetData(scopecomm, remoteconn);   grdScopeList.DataSource = ds_scope;
grdScopeList.DataBind(); 
```

但是我得到了**两次**sync_scope_name 列。我能够将Dataset 中的sync_scope_name 列绑定到BoundField。我只需要显示**一次**。

问候，

萨钦K

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:45:53.260

我在 GridView 中添加了 AutoGenerateColumns="false"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:41:24.993

您的查询很可能返回重复项。

手动对数据库运行查询以丢弃它。

如果查询**应该**返回重复项并且您只想显示一次，则需要对查询进行分组

```
select sync_scope_name 
from Sync.scope_info
group by sync_scope_name 
```

或者使用`distinct`关键字

```
select distinct sync_scope_name from Sync.scope_info 
```

# forms - Choice 约束需要一个有效的回调

> ID：11611563
> 
> 赞同：2
> 
> 时间：2012-07-23T11:24:12.043
> 
> 标签：forms, symfony-2.1

我将 Symfony2 更新为 2.1，当我尝试提交表单时出现错误：

> Choice 约束需要一个有效的回调

表单类型类的源代码：

```
$builder->add('type', 'choice', 
                    array(
                        'expanded' => true, 
                        'multiple' => false,
                        'choice_list' => new TypeChoices(),
                        'required' => true,
                    )
                  ) 
```

类型选择类：

```
class TypeChoices implements ChoiceListInterface {

    public static $choices = array(
        'full-time' => 'Full time', 
        'part-time' => 'Part time', 
        'freelance'  => 'Freelance',
    );

    public static function getChoiceNameByValue($value)
    {
        return self::$choices[$value];
    }

    public function getChoices() 
    {   
        return self::$choices;  
    }

    public static function getTypeChoicesKeys() 
    {
        return array_keys(self::$choices);
    }

    public static function getPreferredChoiceKey()
    {
        return 'full-time';
    }
} 
```

有人可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:11:30.857

也许您可以尝试以这种方式扩展[SimpleChoiceList](http://api.symfony.com/master/Symfony/Component/Form/Extension/Core/ChoiceList/SimpleChoiceList.html)类：

**选择列表代码：**

```
class TypeChoices extends SimpleChoiceList
{
    public static $choices = array(
        'full-time' => 'Full time', 
        'part-time' => 'Part time', 
        'freelance'  => 'Freelance',
    );

    /**
     * Constructor.
     *
     * @param array $preferredChoices Preffered choices in the list.
     */
    public function __construct(array $preferredChoices = array()) // PASS MORE ARGUMENT IF NEEDED
    {
        parent::__construct(
            static::$choices,
            $preferredChoices
        );
    }
} 
```

**表格类型代码：**

```
->add('type', 'choice', array(
    'choice_list' => new TypeChoices(),
    ...
)) 
```

# c - const char * VS char const * const（不是关于什么是 const）

> ID：11611564
> 
> 赞同：12
> 
> 时间：2012-07-23T11:24:19.067
> 
> 标签：c, string, constants

所以，我知道 char const *、char * const 和 char const * const 之间的区别。那些是：

> char* the_string ：我可以更改 the_string 指向的字符，也可以修改它指向的字符。
> 
> const char* the_string ：我可以更改 the_string 指向的字符，但我不能修改它指向的字符。
> 
> char* const the_string ：我无法更改 the_string 指向的字符，但我可以修改它指向的字符。
> 
> const char* const the_string ：我无法更改 the_string 指向的字符，也无法修改它指向的字符。

（来自[const char * const 与 const char *?](https://stackoverflow.com/questions/4949254/const-char-const-versus-const-char)）

现在，我的问题是：假设我正在编写一个不会修改传递给它的 C 字符串的函数，例如：

```
int countA(??? string) {
    int count = 0;
    int i;
    for (i=0; i<strlen(string); i++) {
         if (string[i] == 'A') count++;
    }
    return count;
} 
```

现在，标题应该是什么？

```
int countA(char const * string); 
int countA(char const * const string); 
```

我的感觉是我应该使用第二个，因为我不会修改指针本身，也不会修改数组的内容。但是当我查看标准函数的标题时，他们使用第一个。例子

```
char * strcpy ( char * destination, const char * source ); 
```

为什么？

（实际上`char const *`对我来说没有任何意义，因为如果您正在考虑抽象字符串，则要么您没有修改字符串（因此，`char const * const`因为您没有修改指针，也没有修改内容），否则您将修改字符串（所以只是`char *`因为，你可能会修改内容，你可能需要分配更多的内存，所以你可能需要修改指针）

我希望有人能把这一切告诉我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T11:27:27.213

在这种情况下，指针本身是否为 const 并不重要，因为无论如何它都是按值传递的：无论`strcpy`做什么`source`都不会影响调用者的变量，因为它将对调用者在堆栈`strcpy`上的副本进行操作，而不是`source`原本的。注意我说的是*指针值*，而不是指针*指向*的值，显然*不*应该改变它，因为它是*源*参数。

```
char dest[10];
char const * source = "Hello";
strcpy( dest, source );
// no matter what strcpy does, the value of source will be unchanged 
```

在 内，您需要在由和`strcpy`指向的数组上迭代指针。不将参数声明为 const 允许函数直接使用堆栈中的值，而无需先复制/强制转换它们。`destination``source`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T11:27:41.230

拥有`const char *` **代表一个合同**。这是一个承诺，该函数不会使用该指针来修改用户传递的内容。指针本身是否为常量的价值较低。

因此，对于调用者来说，指针本身是否`const`存在没有任何区别。

在许多实现中，“字符串”函数定期修改传递的指针而不修改内容。如果规范（C 标准）要求指针本身保持不变，**那么它将成为**所有实现的限制因素，而不会为调用者提供任何好处。

* * *

作为旁注，我认为你不应该做所有的事情`const`，然后按照自己的方式解决它。`const`如果它*觉得*功能不应该有理由改变它，那就去做吧。简而言之，不要疯狂，**这不是灵丹妙药**，*可能*会导致挫败感。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T11:32:02.663

非定义声明：

```
int countA(char const * string);
int countA(char const * const string);
int countA(char const * foobar);
int countA(char const *); 
```

都是等价的。`string`参数名称（实际上）是实现内部的一个局部变量`countA`。实现是否修改该变量与调用者无关，也不影响函数的签名。

函数是否修改 的*referand*是调用者的事`string`，所以第一个 const 很重要。变量命名多少是调用者的事，但这只是因为约定是在声明中命名参数作为提示它们的用途。文档是*完整*传达每个参数含义的方式，而不是其名称。

如果你想要一个规则：省略第二个`const`，因为它使声明混乱，同时告诉调用者没有任何用处。

您可以将它包含在函数*定义*中，但这样做会出现一些问题。您要么需要使标头与定义保持同步（在这种情况下，您有时会发现自己更改了标头，因为实现细节的更改不会影响调用者）。否则您必须接受标题与定义不匹配，这有时会使看到以下内容的人感到不安：

```
int countA(char const * const string) {
    return 0; 
} 
```

并在标题中搜索`int countA(char const * const string)`，反之亦然，查看标题并搜索源。他们需要更智能的搜索词。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T11:34:13.783

当您将函数参数声明为`const char * const`时，它与来自 的调用者没有什么不同`const char *`：他们不在乎您对该指针做什么，因为对他们来说，无论如何这都是“按值传递”。

第二个`const`是为您服务的，而不是为您的用户服务的。如果您知道您不会修改该指针，那么请务必声明它`const char * const`：它将帮助您和其他维护您的代码的人在以后捕获错误。

至于标准库，我的猜测是他们不想这样做，`const char * const`因为他们想要修改指针的能力：

```
char * strcpy ( char * destination, const char * source ) {
    char *res = destination;
    while (*destination++ = *source++)
        ;
    return res;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-23T11:50:39.450

*   `char const *s`:`s`是指向`const char`.
*   `char *const s`:`s`是一个指向 的常量指针`char`。

When`s`是函数参数，第一种表示法比第二种表示法更有用。

*   使用`char const *`，您不能修改指向的值。
*   With `char *const`, you can't modify the value of your pointer. It is like `int const` in function parameters : you can't do operations directly onto your parameter. It doesn't change anything for the call function. (now, it's almost useless for the compiler, but it's meaningful for programmers)

# c# - 无法将程序集 stodol.dll 复制到文件

> ID：11611565
> 
> 赞同：0
> 
> 时间：2012-07-23T11:24:20.907
> 
> 标签：c#, asp.net

我正在尝试在我的 OCR 项目中添加 Microsoft Document Imaging Library。但在添加 COM 引用时出现以下错误。

> 无法将程序集 stodol.dll 复制到文件

谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:35:58.863

我会通过以下正常步骤：

*   清洁溶液
*   重新启动 Visual Studio
*   重启机器

如果不这样做，请确保您的构建目录没有写保护，并确保您拥有正确的 DLL 名称。

# c++ - 创建/组织可移植 C++ 库

> ID：11611567
> 
> 赞同：1
> 
> 时间：2012-07-23T11:24:34.580
> 
> 标签：c++, linux, portability, bitbucket

我不确定我组织图书馆的方式是最优雅的组织方式。我主要关心的是使我键入的所有代码为我所针对的所有系统编译/运行（保持它的可移植性），并使其对每个系统保持最新。

例如：我不确定使用 __declspec(dllexport/dllimport) 是否会用于 Mac 或 Linux。我认为不是，但我不知道 Mac/Linux 的等价物是什么。或者另一个例子可能是调用特定的操作系统函数，我尽量避免。但是，诸如：以精确的方式测量某件事发生需要多长时间*，确实需要我调用操作系统特定的函数。

*如准确获取用户的时间（低至微/毫秒）。

我目前（未来可能更多）瞄准的系统是 Mac、Windows 和 Linux。但是测试每个系统的代码是否可以编译（并正确运行）似乎是在浪费时间。目前，我提议的方式要求我为每个系统制作一个单独的项目。即，我为 Windows 创建了一个 Visual Studio 项目，为 Mac 创建了一个 Xcode 项目，并为 Linux 使用命令行或使用其他一些 IDE。

好的，所以我组织事物的方式的主要问题是：
1\. 时间消耗，如为所有系统创建项目并保持每个单独的项目，为每个系统更新。
2\. 了解我需要使用的所有 IDE/编译器

请注意，我以前从未真正*使用过** Linux，我正在考虑切换。我担心的唯一问题是找到合适的工具供我使用，并找到适合我的合适的发行版，以满足我的需要。如果有 Linux 经验的人可以指导我，或者给我一些是否切换或不切换的建议，我将非常感激。

我真的很喜欢 Visual Studio，而且很长一段时间以来它一直是我的主要 IDE。对于 Linux，我只是不确定是否要放弃 Visual Studio；因为我不知道可用于 Linux 的工具是否可以做 Visual Studio 可以做的事情。我的意思是，它和 Visual Studio 一样用户友好。我害怕学习如何使用 Linux 的工具，我只是不确定是否值得这样做。时间不是这个图书馆的主要因素，我有足够的时间，我还很年轻，并决心在未来将编程作为我的职业。

*我以前用过它，但我从来没有为 Windows 替换过它。

我目前在 BitBucket 上托管我的项目的所有源代码，但目前，我的仓库中只有 RAW 代码。没有项目文件或任何其他工具可以编译它，只有代码和自述文件。我正在考虑使用 Makefile，因为它们看起来很流行。但是我之前从来没有做过Makefile，不要误会，我愿意学习。我只是不确定从哪里开始。我听说人们使用 CMake 来创建可移植库，例如 SFML 和 Ogre3D。我已经用 CMake 构建了几个库，但我不知道如何用它实际制作我自己的库来制作我的项目/制作文件。我应该学习 CMake 并将其与我的库结合，还是有更好的选择？

**编辑：**

我的目标不是为使用 GUI 的实际软件编写库。我的主要目的是写***游戏***。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:53:02.413

1 - Boost. Boost will help your portability more than you can imagine. Its only real sticking point is, believe it or not, OS X.

2 - Use CMake. It integrates with Visual Studio project files as the build tool, and you can put most of your different-platform compilation voodoo in there.

3 - If you're seriously writing a portable library, consider writing it in C/writing a C wrapper, or making it header-only, or providing the source-code. Making it a shared or statically linkable library does not mean that it will play nice. Name mangling leads to inconsistencies that will blow your mind.

4 - Always be explicit about the number of bits in each variable.

5 - use git. It'll allow you to setup a crappy local server for a repository very easy and get very fast transfers of the kind of huge changes MSVC will make annoyingly

There are a lot more best-practices that can be discussed about cross-platform development. All of that advice isn't applicable in every case; I have a very code-heavy Linux/Windows library that I code almost exclusively in MSVC2k10 and mostly build/test for in Linux, and it is nowhere close to header-only.

EDIT in response to comments:

git was suggested because I find it very easy to use and manage locally. I've use svn before and liked it, I won't really endorse any others, but there are probably plenty of fine ones.

To expound on point 3, A C wrapper would make it so that anyone anywhere could use your library - FORTRAN developers, Ruby, even Java. Otherwise you generally have to have similar compiler versions to link properly and it will only link to other C++ code, outside the case of DLLs, and there are still versioning issues. It's one of the stupidest problems in C++ left over, check "name mangling" on Wikipedia. There is a reason widely-used libraries are written in C or have C wrappers, such as libz, openssl etc.

There are other advantages to it. Exception propagation across dynamic libraries is non-existent; with static libraries it can be inconsistent or non-existent.

You'll find that the most widely-used C++ libraries are mostly header-only, like Boost. A header-only library solves many problems by putting all the code directly into a project in a relatively intuitive way, and modern compilers can still optimize away much (but certainly not all) of the extra compile time associated with it.

With all this said, it is certainly possible to do without a C wrapper or header-only, it is just annoying and very troublesome. DLL hell and its Linux equivalents still exist.

You also asked about Boost. That depends. If you're distributing the sourcecode then you certainly must distribute Boost with your code/have people install it. Having people install libraries in order to compile other libraries or use programs is common practice. Think of how specific versions of DirectX come with games for an example.

However if you are distributing binary versions of your library, statically linking against Boost will eliminate any need to include it as long as you are careful to keep Boost headers out of the outward-facing parts of your library. This is where you start seeing things like void * pointers inside C++ headers; an unfortunate side-effect of some of the shortcomings of C++ compilation and library distribution unfortunately.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:59:28.297

就我个人而言，我会利用像 Qt 这样的框架，因为它非常便携，它确实抽象了很多操作系统功能（文件、计时、线程、网络），并且你得到了一个体面的、免费的 IDE（Qt Creator），它也是可移植的并在 Windows、OS X 和任何运行 Qt 的 Unix 风格上运行。它会给你最低的进入门槛。Qt Creator 可以利用 Visual Studio 编译器和 CDB 调试器（如果它们可用）。

你*不需要*使用 OpenGL 来使用 Qt，事实上你并没有绑定到任何特定的图形子系统。Qt 仅在 Qt 5 中为 Qt Quick 2 图形后端“使用”OpenGL。Qt 4 和 Qt Quick 1 都不需要它（即使在 Qt 5 中！）。

您可以使用任何您喜欢的 2D 或 3D 框架将图像和其他内容推送到屏幕上。Qt 擅长的是创建游戏中经常需要的那种 2D 图像——菜单、配置屏幕、HUD 等。Qt 可以轻松利用许多控件和绘图原语来实现您的目的。

Qt 还允许您使用相当强大的模型视图和网络框架，因此您可以相当容易地生成实时更新的服务器或客户端列表。

当然，在 Qt 和 DirectX 之间需要有少量的 shim 代码。在输出端，你通常会`QImage`在 Qt 中结束，然后使用 DirectX、SDL、OpenGL 等将其推送到屏幕上。在输入端，您需要`qApp->processEvents()`在主游戏循环中调用，并且需要使用`qApp->postEvent(...)`. 仅当 DirectX 主循环使用所有 Windows 消息并且不会让标准 winapi/win32 代码（Qt 的 Windows 事件调度程序）看到它们时才需要这样做。我没有过多地处理 DirectX，所以当然，其他人可以随意加入细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:05:38.077

CMake 是一个不错的选择。你可以学习使用它。阅读教程：
[http ://www.cmake.org/cmake/help/cmake_tutorial.html](http://www.cmake.org/cmake/help/cmake_tutorial.html)

但是，如果您的目标仅是 Linux 和 Windows。在您的情况下（小型/平均第一个多平台项目），维护 2 个独立的构建系统可能是可以的。

*   在 Linux 上，使用 Make。它是标准的并且有一个很好的参考手册：
    [http ://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)

*   在 Windows 上。使用您的 IDE 项目文件，无论是 Visual、DevC++ 还是其他。这是最简单的方法。

最重要的是，可以轻松地在不同平台上测试您的库/软件。在桌面上安装虚拟机。或者至少将你的库编译成 Cygwin。

一旦你在这里回来stackoverflow，我们会帮忙！

# html - 从 html/xml 中提取数据

> ID：11611577
> 
> 赞同：1
> 
> 时间：2012-07-23T11:24:59.890
> 
> 标签：html, xml, xpath, webharvest

我正在使用 Webharvest 从网站检索数据。它先将 html 页面转换为 xml 文档，然后根据提供的 xPath 为我获取想要的数据。

现在我正在处理这样的页面：[pastebin](http://pastebin.com/sDP9yuhR)我在其中展示了我想要获取的块。每个块应作为一个单元返回。

xPath 块的第一个元素是：`//div[@id="layer22"]/b/span[@style="background-color: #FFFF99"]` 我对其进行了测试，它给出了所有“块开始”元素。

块的最后一个元素的 xPath 是：`//div[@id="layer22"]/a[contains(.,"Join")]` 我对其进行了测试，它给出了所有“块结束”元素。

xPath 应返回一组块：

`(xPath)[1]`= 块 1

`(xPath)[2]`= 块 2

……

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:10:48.380

**使用**（对于第一个想要的结果）：

```
 ($first)[1] | ($last)[1]

|

  ($first)[1]/following::node()
       [count(.|($last)[1]/preceding::node()) = count(($last)[1]/preceding::node())] 
```

您需要替换`$first`的地方：

```
//div[@id="layer22"]/b/span[@style="background-color: #FFFF99"] 
```

并替换`$last`为：

```
//div[@id="layer22"]/a[contains(.,"Join")] 
```

要获得第 k 个结果，请`($first)[1]`用`($first)[{k}]`和`($last)[1]`替换最终表达式`($last)[{k}]`，其中`{k}`应替换为*数字*k。

**该技术直接遵循著名的** *XPath 1.0 中集合交集的 Kayessian 公式*：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

它选择两个节点集`$ns1`和的交集`$ns2`。

下面是一个简单示例的 XSLT 验证：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>03</num>
  <num>07</num>
  <num>10</num>
</nums> 
```

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="v1" select=
  "(//num[. = 3])[1]/following-sibling::*"/>
 <xsl:variable name="v2" select=
  "(//num[. = 7])[1]/preceding-sibling::*"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "$v1[count(.|$v2) = count($v2)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用 XPath 表达式并将所选节点复制到输出：**

```
<num>04</num>
<num>05</num>
<num>06</num> 
```

# java - WebView 马拉雅拉姆语 Unicode 复杂/组合字母

> ID：11611578
> 
> 赞同：2
> 
> 时间：2012-07-23T11:25:01.670
> 
> 标签：java, android, fonts, android-widget

我的 Android 应用程序有问题。它不显示一些特殊字母，即`(KOOTTAKSHARAM)`来自`Malayalam`语言的复杂/组合字母。

在我的应用程序中，我使用 WebView 加载使用从服务器接收的 Unicode 字符准备的 html。字体“Thoolika.ttf”正在从资产加载。

后来我使用了来自服务器的 ascii 文本和 .ttf 字体文件，并且工作没有问题。我也尝试了 UTF-8 转换，但没有帮助。

**所以我想知道是否可以使用 Unicode 字符和 Unicode 字体文件 (.ttf) 显示来自马拉雅拉姆语的复杂/组合字母 (KOOTTAKSHARAM)？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:13:48.643

马拉雅拉姆语中 Koottaksharam 和 Chillu 的分割渲染并不是真正的问题。真正的问题是 - 只有少数制造商支持马拉雅拉姆语 Unicode 字体，而且很少有人能正确呈现马拉雅拉姆语。

您可以在三星中阅读马拉雅拉姆语，但不能在 HTC、LG、索尼等中阅读。Google 在 JellyBean (v.4.1) 中添加了对马拉雅拉姆语的原生支持

唯一的解决方法是 - 将 Unicode 文本转换为 ASCII 代码，在组件中使用该 ASCII 文本，然后动态加载字体。您可以在 Manoramaonline.com 上看到 - 查看 HTML 源代码 - 他们没有使用 Unicode，而是使用了一些符号，并使用自己的字体显示这些符号，最终看起来像马拉雅拉姆语文本。

Mathrubhumi.com 有他们网站的移动版本，它使用相同的技术。即使没有支持，您也可以完美地阅读马拉雅拉姆语。我认为他们首先输入 ASCII 版本（为印刷版和 Android 发布），然后将其转换为 Unicode（在网站上发布）

有许多 ASCII 到 Unicode 转换器，例如[http://aksharangal.com/](http://aksharangal.com/)，一个著名的 Unocode 到 ASCII 转换器是 - [http://smc.org.in/silpa/ASCII2Unicode](http://smc.org.in/silpa/ASCII2Unicode)

# python - Facebook API - 分页 - 270 个项目的限制？

> ID：11611580
> 
> 赞同：0
> 
> 时间：2012-07-23T11:25:03.483
> 
> 标签：python, facebook, json, api

我现在一直在玩 Facebook API，我认为它运行得很好，但是，在获取我的朋友列表时，我遇到了 270（271？）项的限制，其中包含一个**分页**键json数据。

自然我尝试在**分页键中迭代扔****下一页**，但是，从下一页返回的数组是空的，它包含**下一个**和**上一个**键但没有实际数据，有人知道出了什么问题吗？

 ******直接在浏览器中尝试只是为了忽略所有编程错误，它与代码中的相同：

```
https://graph.facebook.com/me/friends?access_token=[ACCESS_TOKEN]&limit=5000 
```

我也尝试过`&offset=269`etc，没有任何效果，这是输出：

```
{
   "data": [
      {
         "name": "Person A",
         "id": "..."
      },
      {
         "name": "Person B",
         "id": "..."
      },
      {
         "name": "Person C",
         "id": "..."
      }
   ],
   "paging": {
      "next": "https://graph.facebook.com/me/friends?limit=5000&offset=5268&value=1&access_token=[ACCESS_TOKEN]&__after_id=[Person C ID]",
      "previous": " Previous URL ... "
   }
} 
```

在浏览器中（或通过代码）尝试此 URL 时，我得到以下信息：

```
{
   "data": [

   ],
   "paging": {
      "previous": "https://graph.facebook.com/me/friends?limit=5000&offset=268&value=1&access_token=[ACCESS_TOKEN]"
   }
} 
```

为什么会这样，你如何解决它？

感谢我能得到的所有帮助，谢谢！

编辑：我有 284 个朋友，所以“下一个”页面上应该有 10+。

（通过“Official Python SDK”在 Python 中完成编程（修改为处理分页）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:30:41.360

也许是因为您可能只有 270 (271) 个朋友？除非你确定你有更多的朋友...

如果您有超过 270 个朋友。可能还有其他两个原因：

*   这 14 名用户阻止应用通过 API 访问他们的数据
*   Facebook 已缓存您的好友列表，您需要等待缓存更新。******

# opencv - OpenCV OpenNI 校准 kinect

> ID：11611585
> 
> 赞同：2
> 
> 时间：2012-07-23T11:25:24.747
> 
> 标签：opencv, kinect, openni, camera-calibration, calibration

我用 home 通过 kinect 捕捉：

```
capture.retrieve( depthMap, CV_CAP_OPENNI_DEPTH_MAP )
capture.retrieve( bgrImage, CV_CAP_OPENNI_BGR_IMAGE ) 
```

现在我不知道是否必须校准 kinect 才能使深度像素值正确。也就是说，如果我从图像 RBG 中获取一个像素（u，v），那么从图像深度中获取像素（u，v）得到正确的深度值？

```
depthMap.at<uchar>(u,v) 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:37:51.110

您可以检查是否注册是这样的：

```
cout << "REGISTRATION     " << capture.get( CV_CAP_PROP_OPENNI_REGISTRATION ) << endl; 
```

如果不是，请将其设置为：

```
capture.set(CV_CAP_PROP_OPENNI_REGISTRATION,1); 
```

或者：

```
if(capture.get( CV_CAP_PROP_OPENNI_REGISTRATION ) == 0) capture.set(CV_CAP_PROP_OPENNI_REGISTRATION,1); 
```

# c++ - libav 通过 mpegts 将 h264 流式传输到 rtmp 服务器

> ID：11611588
> 
> 赞同：3
> 
> 时间：2012-07-23T11:25:30.530
> 
> 标签：c++, streaming, h.264, libav, mpeg2-ts

我正在开发一个应用程序，我想通过 mpegts 将 h264 流式传输到 rtmp 服务器（FMS、C++ RTMP 服务器、Wowza）。我正在查看 libav 的 output-example.c。为了简单起见，我暂时删除了所有音频。

我将此代码用作测试（不起作用）： [https ://gist.github.com/fb450aee77471a1d86f3#comments](https://gist.github.com/fb450aee77471a1d86f3#comments)

我在那里做错了什么？

谢谢

# javascript - jquery 图像滑块库

> ID：11611591
> 
> 赞同：0
> 
> 时间：2012-07-23T11:25:38.563
> 
> 标签：javascript, jquery

我正在尝试在我的预览元素中动态添加图像。因此，当我单击缩略图时，图像将加载并滑动。

```
<div id="imageGallery">
    <div id="loading"></div>
    <a class="thumbnail"><img alt="Image 1" src="../../baContent/image1.jpg" /></a>
    <a class="thumbnail"><img alt="Image 2" src="../../baContent/image2.jpg" /></a>
    <div id="preview">
        <img id="mainImage" alt="Main Image" src="../../baContent/image1.jpg" /> 
    </div>
</div>

 $(document).ready(function () {
        $("#loading").show();
        var oldImage = $("#preview img:first");
        var newImage = $("#mainImage").insertAfter(oldImage).css('position', 'absolute').css('left', 800);
        newImage.load(function () {
            $("#loading").hide();
            oldImage.css({ left: 0 }).animate({ left: -800 });
            newImage.css({ left: 800 }).animate({ left: 0 });
            oldImage.remove();
        });
}); 
```

我的想法是在第一张图片和旧图片删除后动态插入图片。我尝试了许多函数追加，插入到。但它不起作用。谢谢建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:34:20.727

你想的太复杂了，我猜...

```
$(document).ready(function(){
    $(".thumbnail").click(function(){
        $("#loading").show();
        // Create new image instance
        $("<img/>", {
            // Get source of image to load
            src: $(this).find("img").attr("src")
        }).css({
            position: "absolute",
            left: 800
        }).load(function(){
            $("#loading").hide();
            // Append new image to preview div
            $("#preview").append($(this));
            // Get current image and animate it
            $("#preview").find("img:first").css({
                position: "absolute"
            }).animate({
                left: -800
            }, function(){
                // Remove the image when animation complete
                $(this).remove();
            });
            // Animate new image
            $(this).animate({
                left: 0
            }, function(){
                // Do something interesting...
            });
        });
    });
}); 
```

在这里测试它：http: [//jsfiddle.net/dpzdL/](http://jsfiddle.net/dpzdL/)

# cassandra - 在 cassandra *没有*复制因子的情况下设置键空间

> ID：11611599
> 
> 赞同：3
> 
> 时间：2012-07-23T11:26:21.793
> 
> 标签：cassandra

我们从 cassandra 集群 (1.0.10) 中得到了奇怪的行为。

我们正在运行一个 3 节点集群。

*如果我在未*设置复制因子的情况下创建键空间，则在尝试输入数据时会出错：

```
[default@unknown] create keyspace foo;
ae639ba0-d4b8-11e1-0000-424d3d43a8df
Waiting for schema agreement...
Warning: unreachable nodes 10.227.65.172, 10.51.62.63... schemas agree across the cluster
[default@unknown] use foo;
Authenticated to keyspace: foo
[default@foo] create column family User with comparator = UTF8Type;
b4608180-d4b8-11e1-0000-424d3d43a8df
Waiting for schema agreement...
Warning: unreachable nodes 10.227.65.172, 10.51.62.63... schemas agree across the cluster
[default@foo] update column family User with
...             column_metadata =
...             [
...             {column_name: first, validation_class: UTF8Type},
...             {column_name: last, validation_class: UTF8Type},
...             {column_name: age, validation_class: UTF8Type, index_type: KEYS}
...             ];
b70562c0-d4b8-11e1-0000-424d3d43a8df
Waiting for schema agreement...
Warning: unreachable nodes 10.227.65.172, 10.51.62.63... schemas agree across the cluster
[default@foo] set User['jsmith']['first'] = 'John';
null
UnavailableException()
        at org.apache.cassandra.thrift.Cassandra$insert_result.read(Cassandra.java:15206)
        at org.apache.cassandra.thrift.Cassandra$Client.recv_insert(Cassandra.java:858)
        at org.apache.cassandra.thrift.Cassandra$Client.insert(Cassandra.java:830)
        at org.apache.cassandra.cli.CliClient.executeSet(CliClient.java:901)
        at org.apache.cassandra.cli.CliClient.executeCLIStatement(CliClient.java:218)
        at org.apache.cassandra.cli.CliMain.processStatementInteractive(CliMain.java:220)
        at org.apache.cassandra.cli.CliMain.main(CliMain.java:348) 
```

（无法到达节点的问题应该不是[这里](http://mail-archives.apache.org/mod_mbox/cassandra-user/201106.mbox/%3CBANLkTinUOcQo2D9SZzU0sVrxN_p90UQJQw@mail.gmail.com%3E)所说的问题）

但是，如果我创建键空间并指定复制因子（1、2 或 3），那么它可以正常工作。

如果在没有指定复制因子的情况下创建集群存在问题，那么不应该在创建时抛出异常吗？如果您*未*在多节点集群上指定复制因子，预期的行为是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T22:03:09.243

从内部创建键空间时的默认复制策略`cassandra-cli`是`NetworkTopologyStrategy`(NTS)，它实际上没有单个`replication_factor`. NTS 的副本是基于每个数据中心配置的。使用 NTS 时的默认复制选项是“ `{datacenter1:1}`”，这意味着一个副本应该放在“datacenter1”副本组中。如果您没有配置特定的告密者，那么很可能所有节点都被分配给“datacenter1”。

我对您如何将复制因子设置为 1、2 或 3 感到困惑，因为 cassandra-cli 不应该让您在`replication_factor`不指定 a `placement_strategy`of 的情况下指定`SimpleStrategy`，如果您这样做，我认为您会更清楚这种差异。

无论如何，由于您在默认情况下的有效复制因子是 1，我希望您的问题确实是警告消息中的故障节点。它们真的是僵尸节点，正如您引用的邮件中所讨论的那样，还是它们仍然在环中并且无法访问的真实节点？的输出`nodetool ring`应该有助于诊断为什么 Cassandra 认为它不能成功存储您的记录。

最后，我应该指出，您会发现*使用*该`cqlsh`工具比使用`cassandra-cli`. 在这种情况下，它至少会迫使您给出明确的复制策略和策略选项。

# android - 如何在应用程序设置中更改文本大小？

> ID：11611605
> 
> 赞同：1
> 
> 时间：2012-07-23T11:26:37.237
> 
> 标签：android, textview, android-theme, android-textattributes

在我的应用程序中，我想为用户提供一个选项来选择文本的大小，这可能吗？

我该怎么做？有什么建议么？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:31:54.363

是的，为什么不？您可以保存用户输入的 int，并以编程方式将 textview 的大小设置为此 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:47:01.277

这是可能的。
参考[此链接](http://www.developer.nokia.com/Community/Wiki/How_to_dynamically_change_font_size_in_Web_Runtime_widgets)，甚至您可以使用输入类型从用户那里获取值，然后使用参数“size”创建一个函数并使用此函数更改**css“font-size” 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:31:11.827

# 一个

一个

如果用户选择小 A 然后将其更改为字体 16sp 如果用户选择大 A 然后将字体大小更改为 21sp。

```
if(small)
textView.setTextSize(16); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:33:53.297

您可以允许用户从字体列表视图中进行选择并创建字体选择的列表视图，您可以检查[在 ListView - Android/Eclipse 中更改字体大小以](https://stackoverflow.com/questions/2464056/change-font-size-in-listview-android-eclipse)了解详细信息。

有关详细信息，您可以[http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)了解更多信息。

谢谢，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T11:34:15.443

您可以添加带有字体大小列表的微调器

喜欢

```
12
14
16
18 
```

并在`onItemSelect()`set fontSize(x);

# objective-c - 为什么将 self.object 设置为 nil 会导致崩溃

> ID：11611608
> 
> 赞同：0
> 
> 时间：2012-07-23T11:26:57.207
> 
> 标签：objective-c, xcode, null, dealloc

在以下情况下，我遇到了崩溃

```
 if (self.videoEngine != nil)
{
    [self.videoEngine.player.view removeFromSuperview];

    [videoEngine release];
    self.videoEngine = nil;
} 
```

videoEngine 对象是 (nonatomic, retain)，它是使用 videoEngine = _videoEngine 合成的。如果我删除 self.videoEngine = nil 行，则代码可以正常工作。这是正确的行为，为什么 nil 行会导致崩溃？self.videoEngine = nil 是否仍会导致 viewDidUnload 函数出现问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:32:41.670

当您调用“self.videoEngine = nil;”时 它调用它的 setter 方法，默认情况下在 setter 方法中释放对象，然后将其设置为您提供的值，因此在这种情况下，您释放对象一次，然后 setter 方法尝试再次释放它，即导致崩溃，现在如果您删除“[videoEngine release];” 那很好，不会有内存泄漏。

希望现在很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:07:02.417

您应该只释放 _videoEngine，因为那是合成的名称。videEngine 只是 setter 和 getter 的名称，但值存储在综合名称中。所以你的代码应该是：

```
 if (self.videoEngine != nil)
{
    [self.videoEngine.player.view removeFromSuperview];

    [_videoEngine release];
    self.videoEngine = nil;   // Unnecessary 
```

}

但是你不需要在释放 _videEngine 后调用 self.videEngine = nil，因为 setter 总是返回 nil。

它不被认为是通过使用 nil 调用 setter 方法来释放的正确方法，尽管它可以工作，就像使用以下行一样：`self.videoEngine = nil; // Unnecessary`。正确的释放方式只有`[_videoEngine release];`

# css - 如何为我的文本区域创建白色背景（将其更改为不同的颜色）？

> ID：11611611
> 
> 赞同：0
> 
> 时间：2012-07-23T11:27:08.610
> 
> 标签：css, textarea

我的网站 - [http://www.automated-stores.com](http://www.automated-stores.com)有一个奇怪的特征，即文本区域的蓝色背景，在这里可以更具体地看到：[http ://www.automated-stores.com/vending-machines-business -电子产品-化妆品-香水](http://www.automated-stores.com/vending-machines-business-electronics-cosmetics-perfume)

我没有对网站进行编码，但我想要更改它必须在 stylesheet.css 中，有人知道要输入/更改什么代码吗？

我以为会是这样：

```
input,textarea,select { 
    padding: 1px; 
    border: solid 1px #000000; 
    font-size: 10pt; 
    color:#000000; 
    background-color:#ffffff;
} 
```

（之前颜色不一样）但是我换了好几次都没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:33:40.043

我查看了您的源代码，您需要在根目录下找到您的 style.css 并进行更改：

```
input,textarea,select { 
    padding: 1px; 
    border: solid 1px #5c8593; 
    font-size: 10pt; 
    color:#42484d; 
    background-color:#224f5f;
} 
```

对此：

```
background-color:#ffffff; 
```

请记住，这将影响输入、textarea、select 类的所有内容。我使用了 chrome inspect 和 firebug lite 工具来验证这一点并且它有效。如果您只想影响文本区域 bg 颜色，请执行以下操作：

```
input,select { 
    padding: 1px; 
    border: solid 1px #5c8593; 
    font-size: 10pt; 
    color:#42484d; 
    background-color:#224f5f;
}

textarea { 
    padding: 1px; 
    border: solid 1px #5c8593; 
    font-size: 10pt; 
    color:#42484d; 
    background-color:#ffffff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:35:36.000

更改页面颜色的具体规则`textarea`（第二个链接）在`style.css`第 44 行：

```
input, textarea, select {
    background-color: #224F5F; // This is the blue background
    border: 1px solid #5C8593;
    color: #42484D;
    font-size: 10pt;
    padding: 1px;
} 
```

如果它只是您想要设置样式但不想触摸格式的文本区域，您可以执行以下两项操作之一：

**选项1**

保持 CSS 原样并在下面添加：

```
textarea {
    background-color:#FFFFFF !important;
} 
```

我不喜欢这样做，因为它使 CSS 变得僵硬，并且大量的 !important 声明使得管理样式变得非常困难。

**选项 2**

将第 44 行样式更改为：

```
input, textarea, select {
    border: 1px solid #5C8593;
    color: #42484D;
    font-size: 10pt;
    padding: 1px;
}

textarea {
    background-color: #FFFFFF;
}

input, select {
    background-color: #224F5F;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:38:22.447

你`<textarea>`有属性`<... class="textarea"...`你可以把它添加到你的样式表中

```
.textarea {
    background-color: #FFFFFF;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:38:31.767

问题中的代码可以做到这一点，前提是您将其插入`style`到 tag 之后的元素中`<link rel="stylesheet" href="style.css" type="text/css" />`。外部样式表以简单的方式设置背景颜色等，只要您将代码放在该标记*之后，就可以轻松地覆盖它。*`link`

如果这似乎不起作用，请在浏览器中检查页面的 HTML 源代码。服务器软件可能对您的代码进行了一些修改，或者您的浏览器有旧版本的页面（此时 Ctrl+F5 应该会有所帮助）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T11:41:04.700

我建议简单地定位 textareas 并更改它们的背景颜色并给它们一个边框。

```
textarea {
    background-color:#FFF;
    border:1px solid #224f5f;
    color:#000;
} 
```

# iphone - 如何做缩放图像xcode？

> ID：11611618
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:27:28.703
> 
> 标签：iphone, xcode, zooming

我有个问题。我有这个代码缩放不起作用。

- (void)viewDidLoad {

```
UIImage *image = [UIImage imageNamed:@"zoomimage.jpeg"];

CGRect yFrame = CGRectMake(0.0, 0.0, 320, 432);

imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, image.size.width, image.size.height)];
[imageView setImage:image];

scrollView = [[UIScrollView alloc] initWithFrame:yFrame];
[scrollView setScrollEnabled:YES];
[scrollView setBackgroundColor:[UIColor blackColor]];
[scrollView setContentSize:CGSizeMake(image.size.width, image.size.height)];
scrollView.minimumZoomScale = 0.4;
scrollView.maximumZoomScale = 4.0;
[scrollView setZoomScale:scrollView.minimumZoomScale];

[self.view addSubview:scrollView];
[self.view bringSubviewToFront:scrollView];

[scrollView addSubview:imageView]; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:30:33.400

首先，将滚动视图的委托设置为您自己。

```
scrollView.delegate = self; 
```

现在，在您的类中添加此委托方法`UIScrollView`以启用图像缩放。

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
  return imageView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T17:26:31.350

尝试这个：

**.h 控制器：**

```
@interface MyViewController : UIViewController{

IBOutlet UIScrollView *scrollView; 
UIImageView *imageView;

}

@property (nonatomic, retain) UIScrollView *scrollView;
@property (nonatomic, retain) UIImageView *imageView; 
```

**.m 控制器：**

```
@synthesize scrollView, imageView;

-(UIView *)viewForZoomingInScrollView:(UIScrollVi­ew *)scrollView{ 

return imageView;

}

- (void)viewDidLoad
{

UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"YourImageName.png"]]; 
self.imageView = tempImageView; 
[tempImageView release]; 
scrollView.maximumZoomScale = 3.0; 
scrollView.minimumZoomScale = 0.6; 
scrollView.clipsToBounds = YES; 
scrollView.delegate = self; 
[scrollView addSubview:imageView];
} 
```

这段代码对我有用:)

# php - 具有 HTTP 基本身份验证的 SOAP：将用户名+密码放入 soapAction url？

> ID：11611619
> 
> 赞同：1
> 
> 时间：2012-07-23T11:27:29.990
> 
> 标签：php, soap, basic-authentication

我们正在使用 HTTP 基本身份验证保护 SOAP Web 服务，因此 WSDL URL 是例如[https://user:pass@example.org/api?wsdl](https://user:pass@example.org/api?wsdl)。

我们应该在 WSDL 的 soapAction 属性中添加用户名和密码吗？

这将使使用 Web 服务变得非常容易，因为您只需将 WSDL url 传递给您的 soap 客户端并进行设置。如果我们不将其放在soapAction URL 中，则必须使用用户名和密码显式配置soap 客户端（除了wsdl url）。

另一方面，将 user+pass 放入 wsdl 意味着敏感的身份验证数据可能会被缓存，就像 PHP 对 WSDL 文件所做的那样。

我们应该做什么？

# objective-c - nsformatter dateFromString 为 nil

> ID：11611620
> 
> 赞同：1
> 
> 时间：2012-07-23T11:27:36.643
> 
> 标签：objective-c, nsdateformatter

我正在使用 xcode、objective c 和至少以 ios 5 为目标开发 iphone 应用程序。我要做的就是将字符串转换为日期。我已经阅读了很多这方面的内容，这应该是一个简单直接的任务。我在论坛中看到了许多其他类似的问题，但对人们有用的东西似乎对我不起作用。这是我正在做的

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSString *dobText = [dict valueForKey:@"DateOfBirth"];
NSDate *dobDate = [dateFormatter dateFromString:dobText]; 
```

dobText 始终采用@"1999-01-01" 格式，它与日期格式化程序中设置的日期格式相匹配，但使用字符串中的日期时的结果始终为零。

谁能向我解释一下，让我知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:18:17.857

我怀疑就像 bigkm 说的那样，您的破折号可能会妨碍您。

我建议你先尝试一个虚拟字符串。例如

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSString *dobText = @"1999-01-01" // [dict valueForKey:@"DateOfBirth"];
NSDate *dobDate = [dateFormatter dateFromString:dobText]; 
```

现在这行得通吗？它应该。现在用另一种方式进行三角测量：

1.  从 dob 文本中完全删除破折号，使其具有格式“yyyyMMdd”
2.  让日期格式化程序查找相同的格式

那样有用吗？它应该。这将证明您格式中的分隔符是问题所在，需要进一步检查（或按照 bigkm 的建议进行清理）。

侧节点重新线程化：如果您在创建它的线程上使用 NSDateFormatter 就可以了。如果你不这样做，你就会知道应用程序会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:46:34.987

查看您设备上的用户首选项。文档说：

> 请注意，尽管设置格式字符串 (setDateFormat:) 原则上指定了精确的格式，但实际上它也可能被用户的偏好所覆盖——有关更多详细信息，请参阅[数据格式指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DataFormatting/DataFormatting.html#//apple_ref/doc/uid/10000029i) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T15:59:49.603

如果您的日期格式正确，我可以建议将 NSLocale 设置为您的 NSDateFormatter。

对我来说，这段代码适用于模拟器：

```
NSString *format = [NSString stringWithFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];
NSDateFormatter *df = [NSDateFormatter new];
[df setDateFormat:format];
NSDate *date = [df dateFromString:pubDateSttring]; 
```

但在设备上，日期始终为 NIL。

我找到了设置 NSLocale 的解决方法：

```
df.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:44:33.827

# android - 在 Titanium Appcelerator 中注册一个 BroadcastReceiver

> ID：11611622
> 
> 赞同：2
> 
> 时间：2012-07-23T11:27:45.257
> 
> 标签：android, titanium, appcelerator

我正在使用钛 Appcelerator。谁能告诉我如何注册一个 BroadcastReceiver 来监听启动事件？或者如果可能的话，谈谈关于这个主题的一些好的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:02:26.403

开箱即用的 Titanium 是不可能的。您需要开发自己的模块来实现您的目标。

# c++ - 在 C++ 中动态更改数组的名称

> ID：11611626
> 
> 赞同：1
> 
> 时间：2012-07-23T11:28:15.847
> 
> 标签：c++

嗨，我有一个问题，在编译时，我不知道我的程序中需要多少个向量。所需的数量取决于在运行时给出的数据集，这将导致需要从 1 到 N 的向量范围。

所以如果数据集需要十个向量，就会创建 vec1,vec2,......vecN

如何动态创建向量，使它们都有不同的名称？

然后我需要分别调用每个数组。大概我可以为此使用字符串和几个循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:29:34.170

你不能直接这样做。但是，您可以使用映射来存储向量名称和向量本身：

```
map<string, vector<int> > myMap; 
```

您可以像这样简单地添加元素（如果具有此类键的元素尚不存在）：

```
vector<int> vec;
myMap["vec"] = vec; 
```

如果您将使用已存在的键执行此操作，则该值将被替换。例如：

```
vector<int> vec;
vector<int> vec1;
myMap["vec"] = vec;
myMap["vec"] = vec1;//now myMap["vec"] holds the vec1 vector 
```

您还可以像这样轻松访问元素：

```
myMap["vec"]//this will access the vector with the key "vec1" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T11:32:39.800

您可以创建一个向量来包含您的向量：

```
std::vector<std::vector<int>> my_vector_of_vectors;

// Add a vector
my_vector_of_vectors.push_back(std::vector<int>{});

// Add a number to the inner vector
my_vector_of_vectors[0].push_back(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:30:39.927

你有一个向量向量，vec[0] 到 vec[n]，每个向量都包含向量。

但是，如果您知道向量的数量（例如 10），这最有效。如果您需要按需添加新的，那么矢量列表或地图可能是您更好的选择。

# php - 最佳实践：将大型值存储到数据库中

> ID：11611631
> 
> 赞同：3
> 
> 时间：2012-07-23T11:28:37.597
> 
> 标签：php, mysql, foreach

假设我有一个大表单，有 25 个字段，包括文本框、单选按钮、复选框、选择标签、文本区域等。

提交表单后，收集这些值然后将它们存储到数据库中的最佳方法是什么？通过最佳实践，我的意思是**使用尽可能少的代码行**。

*有一种传统的方式：*

```
$name = $_POST['name'];
$age = $_POST['age'];
$city = $_POST['city']; 
```

*这绝对不是要走的路。*

*还有另一种方法：*

```
foreach($_POST['submit'] as $key=>$val)
{
 $$key = $val;
} 
```

*但这又需要一个巨大的 INSERT SQL 语句：*

```
"INSERT INTO tablename (col1, col2, col3, col4,...col25)
 VALUES('$var1', '$var2', '$var3',.....'$var25')" 
```

使用**foreach 来捕获值**是好的，但是它带有一个加长的 SQL INSERT 语句。我确信必须有更好的方法来使用 INSERT 语句。欢迎提出想法、建议和批评。

谢谢，尼萨尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:32:14.380

您不需要那种传统方式，您可以使用`extract`以下功能：

`extract($_POST);`

这将使所有索引成为具有值的变量。

换句话说，要存储在数据库中，您可以`serialize`值或以`JSON`格式存储。然后将整个表单值作为单个条目存储在数据库中（如果没有任何关系并且目的只是存储值。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T11:48:21.737

在 HTML 中更改如下

```
<input type="text" name="pval[name]" value="test" />
<input type="city" name="pval[city]" value="Bangalore" /> 
```

然后在服务器端

**更新 ：**

```
// Need to have the predefined array which is having valid fields
$fields = array('name', 'city');

$pval = $_POST['pval'];
foreach( $pval as $field_name => $val ){

   if( ! isset($fields[$field_name]) ){ // If it is not a valid field name

      unset($pval[$field_name]);
   }

}

if( count($pval) > 0 ){

$pval = array_map( 'mysql_real_escape_string', $pval );

//Then its easy to write the query as follows

    $qry = "INSERT INTO table_name( ". implode( ',', array_keys( $pval ) ) .") values( '". implode( "','", $pval ) . "')";  
} 
```

# function - 从记录变量中选择列 (PostgreSQL 8.4)

> ID：11611632
> 
> 赞同：4
> 
> 时间：2012-07-23T11:28:38.093
> 
> 标签：function, postgresql, variables, record, rule

我正在尝试从我从更新规则调用的函数中的记录变量中选择一列，并收到以下错误：

'无法识别记录数据类型中的列“名称”'

以下是我为产生错误所做的事情：

从更新规则中：

```
SELECT * INTO TEMPORARY TABLE TempTable FROM NEW;
SELECT MyFunction(); 
```

从 MyFunction() 内部

```
DECLARE RecordVar Record;
SELECT * INTO STRICT RecordVar FROM TempTable;
EXECUTE 'UPDATE AnotherTable SET column = $1.name' USING RecordVar; 
```

注意：我意识到有更简单的方法可以实现上述代码的实现，但我已经简化了实际实现以专注于我遇到的问题，这开辟了其他可能的解决方案，但我真的很想得到如果可能的话，上面的代码可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T00:16:49.383

我刚刚想通了。我没有将来自 NEW 的列插入到临时表中，而是将 NEW 记录作为单列插入到临时表中，并在我的函数中将其称为 RecordVar."NEW"。我的规则和功能现在看起来像这样：

从更新规则中：

```
SELECT NEW AS "NEW" INTO TEMPORARY TABLE TempTable;
SELECT MyFuction(); 
```

从 MyFunction() 内部

```
DECLARE RecordVar Record;
SELECT * INTO STRICT RecordVar FROM TempTable;
EXECUTE 'UPDATE AnotherTable SET column = $1.name' USING RecordVar."NEW"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:06:50.543

第二部分可以这样工作：

```
DO
$BODY$
DECLARE
   RecordVar TempTable;
BEGIN
   SELECT * INTO STRICT RecordVar FROM TempTable LIMIT 1;
   EXECUTE 'UPDATE AnotherTable  SET column = $1.name'
   USING RecordVar;
END;
$BODY$ 
```

请注意我如何使用表名作为类型。PostgreSQL 自动为系统中的每个表创建一个复合类型。

一个变量保存一行，`SELECT`可以返回多行。除第一个之外的所有内容都将被丢弃。我添加`LIMIT 1`以澄清效果。我怀疑那是你想要的。

一开始您可能不必在规则中使用临时表。您可能想发布您的完整设置...

# javascript - 如何将带有参数的链接固定到printerest

> ID：11611635
> 
> 赞同：0
> 
> 时间：2012-07-23T11:28:49.380
> 
> 标签：javascript, jquery, html, pinterest

我尝试用多个参数固定链接，但它只接受一个参数。我正在使用 html（JS 对我来说也很好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:35:50.253

Pinterest 还没有公共 API。

[这](http://tijn.bo.lt/pinterest-api)是一个网站，其中披露了有关要发布的 API 的一些信息。

# wordpress - 如何将 /app/webroot/bolg/wp-admin 重定向到 blog/wp-admin，.htacsess 不起作用

> ID：11611636
> 
> 赞同：0
> 
> 时间：2012-07-23T11:28:55.320
> 
> 标签：wordpress, .htaccess, cakephp

我已将 /app/webroot/blog/.htacsess 更改为

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /app/webroot/blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /app/webroot/blog/index.php [L]
</IfModule> 
```

和根 /.htacsess 到

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RedirectMatch temp ^/blog/wp-admin$ http://mysite.com/blog/wp-admin/
    RewriteRule blog$ /blog/ [L]
    RewriteRule blog/wp-admin$ /blog/wp-admin/ [L]
    RewriteRule ^$ app/webroot/ [L]
    RewriteRule (.*) app/webroot/$1 [L]
</IfModule> 
```

我的站点重定向到[http://mysite.com/blog/](http://mysite.com/blog/)但是当我尝试登录到管理站点时，例如[http://mysite.com/blog/wp-admin](http://mysite.com/blog/wp-admin)它重定向到[http://mysite.com/app /webroot/blog/wp-admin](http://mysite.com/app/webroot/blog/wp-admin)我的用户名和密码不起作用。

但如果我写硬编码网址“http://mysite.com/blog/wp-login.php”，那么我的用户名和密码就可以使用。

如何解决这个问题呢？请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:58:03.887

你`app/webroot/blog/.htaccess`应该是：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteBase /blog/
   RewriteRule ^index\.php$ - [L]
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule . /blog/index.php [L]
</IfModule> 
```

你的基础`.htaccess`应该是：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RedirectMatch temp ^/blog/wp-admin$ http://www.yoursite.com/blog/wp-admin/
   RewriteRule blog$ /blog/ [L]
   RewriteRule blog/wp-admin$ /blog/wp-admin/ [L]
   RewriteRule    ^$ /app/webroot/    [L]
   RewriteRule    (.*) /app/webroot/$1 [L]
</IfModule> 
```

注意RewriteRules 中的**/ ：**

```
RewriteRule    ^$ /app/webroot/    [L]
RewriteRule    (.*) /app/webroot/$1 [L] 
```

# c# - 无法使用 DropDownList 按价格对数据进行排序

> ID：11611641
> 
> 赞同：2
> 
> 时间：2012-07-23T11:29:16.510
> 
> 标签：c#, asp.net, sql

我正在尝试按价格对我的数据（在数据列表中）进行排序。这意味着有 DropDownList 供用户选择，如果他们想要从最贵到最便宜的价格，反之亦然。存储在我的数据库中的价格是根据我的 catID 随机排列的。我已经编写了如下代码，但它没有按照我写的内容进行排序。我在这里做错了什么？请给我建议。

```
protected void Page_Load(object sender, EventArgs e)
{

}

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    bindDropDownList();
}

private void bindDropDownList()
{
    DropDownList1.DataTextField = "price";
    DataList1.DataSourceID = null;
    DataList1.DataSource = getReader();
    DropDownList1.DataBind();

}

private SqlDataReader getReader()
{
    SqlDataReader reader = null;

    if(DropDownList1.Text == "-Select-")
    {
      string strConnectionString =
            ConfigurationManager.ConnectionStrings["ProBizConnection"].ConnectionString;
        SqlConnection myConnect = new SqlConnection(strConnectionString);

        string strCommandText ="SELECT * FROM [Category ] WHERE catID<= 20";

        SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
        myConnect.Open();

   reader = cmd.ExecuteReader(CommandBehavior.CloseConnection);

    }
    else if (DropDownList1.SelectedValue == "Price - Highest to Lowest")
    {
        string strConnectionString =
            ConfigurationManager.ConnectionStrings["ProBizConnection"].ConnectionString;
        SqlConnection myConnect = new SqlConnection(strConnectionString);

        string strCommandText = "SELECT catID, packageName, price, description1, description2, image1, image2 FROM Category WHERE catID <= 20 ORDER BY price desc";

        SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
        myConnect.Open();

   reader = cmd.ExecuteReader(CommandBehavior.CloseConnection);

    }

    else if (DropDownList1.DataTextField == "Price - Lowest to Highest")
    {
        /string strConnectionString =
            ConfigurationManager.ConnectionStrings["ProBizConnection"].ConnectionString;
        SqlConnection myConnect = new SqlConnection(strConnectionString);

        string strCommandText = "SELECT catID, packageName, price, description1, description2, image1, image2 FROM Category WHERE catID <= 20 ORDER BY price";

        SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
        myConnect.Open();

   reader = cmd.ExecuteReader(CommandBehavior.CloseConnection);

    }
    return reader;
} 
```

我的 .aspx 代码：

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" AppendDataBoundItems="true" 
            onselectedindexchanged="DropDownList1_SelectedIndexChanged" Height="18px" 
            Width="184px">
            <asp:ListItem>-Select-</asp:ListItem>
            <asp:ListItem>Price - Highest to Lowest</asp:ListItem>
            <asp:ListItem>Price - Lowest to Highest</asp:ListItem>
        </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:33:45.097

排序无法正确处理 Price 列可能是因为 Price 的数据类型不是小数并且可能是 Varchar

所以请将价格数据类型更改为十进制以正确排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:37:56.540

我可以看到三个错误...

1）您的`getReader`代码有一条返回null的路径。您可能应该确保始终有一个`else`默认值，以防其他检查为假。

2）您正在读取 的值，`DropDownList1.SelectedValue`同时试图让读者对其进行数据绑定。这在我看来是错误的 - 我假设有两个下拉列表，一个包含订购信息，另一个是您想要设置和数据绑定到的内容......

3）在您正在比较的 getReader 的 elseif 中，`DropDownList1.DataTextField`它应该包含您要绑定的字段的名称（您`"price"`在方法的代码中将其设置为前面的名称`bindDropDownList`。

如果这些错误中的任何一个是您遇到的问题（如果它们现在不是，它们可能会在将来出现），那么您应该能够通过在调试模式下单步执行来发现这一点。这应该告诉您代码正在下降的路径等等。

如果以上都不是导致您当前的问题，那么请提供更多详细信息。我不得不强调三个不同的问题，因为您的描述不足以说明您到底出了什么问题。

[http://tinyurl.com/so-hints](http://tinyurl.com/so-hints)是一个非常有用的链接，该链接指向一个页面，旨在帮助解释是什么使问题变得好且易于回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:01:36.000

我认为这条线是错误的，可能永远不会评估为真

```
 else if (DropDownList1.DataTextField == "Price - Lowest to Highest") 
```

应该

```
 else if (DropDownList1.SelectedValue == "Price - Lowest to Highest") 
```

甚至更好

```
 else if (DropDownList1.Text == "Price - Lowest to Highest") 
```

**更新：**

`AppendDataBoundItems="true"`可能会弄乱您的下拉项目。Lowest 和 Highest 的结果正在合并，这可能就是您看不到差异的原因。

删除默认列表项并将它们放在您的代码隐藏中

```
private void bindDropDownList()
{
   DropDownList1.DataTextField = "price";
   DropDownList1.DataSource = getReader();
   DropDownList1.DataBind();

   DropDownList1.Items.Insert(0, new ListItem("-Select-"));
   DropDownList1.Items.Insert(1, new ListItem("Price - Highest to Lowest"));
   DropDownList1.Items.Insert(2, new ListItem("Price - Lowest to Highest"));
} 
```

对于替代方法，请检查[DropDownList AppendDataBoundItems （第一项为空白且无重复项）](https://stackoverflow.com/questions/730555/dropdownlist-appenddatabounditems-first-item-to-be-blank)

# jquery - jQuery slideDown() slideUp() 问题

> ID：11611645
> 
> 赞同：0
> 
> 时间：2012-07-23T11:29:34.910
> 
> 标签：jquery, load, slidedown, slideup

我有一些 jQuery slideDown 问题。

我第一次单击我的 slideDown 它没有动画，它只是从隐藏变为可见。但随后的每一次点击都会产生动画效果。

这是我正在使用的代码：

```
$('#open').click(function() { 
 $('#hideWrapper').slideDown('fast', function()
   }); 
}); 
$('#close').click(function() {
 $('#hideWrapper').slideUp('fast', function() {
   });
}); 
```

我想我应该使用这段代码，因为它更干净，但它根本不起作用：

```
$('#open').click(function() { 
 $('#hideWrapper').slideDown('fast', function()
}); 
$('#close').click(function() {
 $('#hideWrapper').slideUp('fast', function() {
}); 
```

它们都在 jsfiddle 中工作正常：

1.  [jsfiddle1](http://jsfiddle.net/V7JWE/21/)
2.  [jsfiddle2](http://jsfiddle.net/6MNgj/3/)

第一次单击时向下滑动，我没有按我应该加载的方式加载 jQuery 吗？onDomReady 问题？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:14:20.950

尝试删除您的 ASO 文件。

ASO 文件是类文件的缓存编译版本。尽管 IDE 在进行更改时释放旧缓存的能力要好得多，但有时您必须手动删除它们。删除 ASO 文件：控制>删除 ASO 文件。

这也是 CS3 中引入的“I-am-not-seeing-my-changes-so-let-me-add-a-trace-now-everything-works”错误的原因。

# java - 按一列对 Java JTable 进行排序

> ID：11611653
> 
> 赞同：2
> 
> 时间：2012-07-23T11:30:04.957
> 
> 标签：java, swing, sorting, jtable

> **可能的重复：**
> [jTable 和排序](https://stackoverflow.com/questions/4268124/jtable-and-sorting)

我有一个带有标题的 Jtable，它通过用户单击自动对表进行排序。是否可以重现用户单击标题以使表格基于一列排序的效果？实际上我使用这个：

```
table.getRowSorter().toggleSortOrder(0); 
```

有更好的解决方案吗？

# javascript - angular-ui：日期选择器在显示按钮时似乎挂起 angularjs

> ID：11611655
> 
> 赞同：0
> 
> 时间：2012-07-23T11:30:11.467
> 
> 标签：javascript, jquery, jquery-ui, angularjs

我的应用程序中有这段 html 代码（之前定义了 ng-app 和 ng-controller 值）：

```
<div>
    <label for="projectSearchDateFrom"><%= Res("Projects.Search.From")%></label>
    <input id="projectSearchDateFrom" type="text" ng-model="startDate" ui-date="dateOptions"/>
    <img ng-show="hasStartDate()" ng-click="clearStartDate()" src="/_Layouts/ClientPortal/Images/layout/TA/delete-small.png" alt="<%= Res("ToolbarDialog.Clear")%> <%= Res("Projects.Search.From")%>" title="<%= Res("ToolbarDialog.Clear")%>" />
</div> 
```

我的 AngularJS 控制器如下所示：

```
function ProjectSearchCtrl($scope) {
    $scope.startDate = '';

    $scope.hasStartDate = function () {
        return $scope.startDate != '';
    };

    $scope.clearStartDate = function () {
        $scope.startDate = '';
    };

    $scope.dateOptions = {
        dateFormat: "yy-mm-dd",
        showOn: "focus"
    };
} 
```

这完美地工作：感谢AngularUI，我正确设置了一个日期选择器，AngularJS绑定工作......

但是，如果我将 showOn 值更改为“button”或“both”（这两个可能的选项将实际显示 datepicker 按钮），则输入后的所有内容（包含 ui-date 属性）都将停止工作：ng-show、ng-单击...控制器甚至没有被调用。

版本（所有都是最新的）：

*   jQuery 1.7.2
*   角JS 1.0.0
*   角UI 0.1.0
*   铬 20

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:06:49.243

请看一下[Select2 指令中的这一行](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/select2/select2.js#L97)。这是给任何在 AngularJS（不仅仅是 AngularUI）中编写指令/实现插件的**人的说明：**

**任何在链接元素后立即注入新 DOM 元素的插件都有可能破坏编译器。**原因是 AngularJS 的工作方式，它在编译时缓存每个 DOM 元素的索引，然后在链接时进行第二次传递。当你注入新的 DOM 时，你会在指令之后立即偏移所有兄弟的索引。

出于这个原因，我被迫将 TinyMCE 和 Select2 都包装在 setTimeout 中，以便在链接完成**后注入 DOM。**请注意，我不费心使用 $timeout 因为我真的不需要/想要 $apply() 只是为了打开插件而触发，因为当插件更改数据时已经有回调来执行此操作。

我会考虑确保这在 AngularUI 中是统一的。不幸的是，目前 AngularJS 中似乎没有优雅的解决方案来解决这个问题，但这是我一直在思考的问题，并且一直在寻找更好的解决方案。

有关编译与链接的更多信息，请阅读此 Google 群组帖子：[https ://groups.google.com/forum/?fromgroups#!searchin/angular/compile$20link/angular/RuWn5W3Q5I0/KJhcQJ_RNsIJ](https://groups.google.com/forum/?fromgroups#!searchin/angular/compile%2420link/angular/RuWn5W3Q5I0/KJhcQJ_RNsIJ)

以后你也可以[在 AngularUI 项目上开一个 bug 票](https://github.com/angular-ui/angular-ui/issues?sort=updated&state=open)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:30:19.773

正如 Pete BD 在他对该问题的评论中所建议的那样，jQueryUI 和 angularJS 交互的方式存在某种错误/不需要的行为。一种解决方法是将输入控件包装在 div 中。

```
<div class="date">
    <label for="projectSearchDateFrom"><%= Res("Projects.Search.From")%></label>
    <div>
        <input id="projectSearchDateFrom" type="text" ng-model="startDate" ui-date="dateOptions"/>                                  
    </div>
    <img class="clear" ng-show="hasStartDate()" ng-click="clearStartDate()" src="/_Layouts/ClientPortal/Images/layout/TA/delete-small.png" alt="<%= Res("ToolbarDialog.Clear")%> <%= Res("Projects.Search.From")%>" title="<%= Res("ToolbarDialog.Clear")%>" />
</div> 
```

现在我可以使用 showOn "both" 或 "button"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:45:04.523

这已在最新版本中修复！

# jsf-2 - 从托管 Beans JSF2.0 中的列表中提取值的问题

> ID：11611659
> 
> 赞同：0
> 
> 时间：2012-07-23T11:30:22.080
> 
> 标签：jsf-2, primefaces

我一直试图在 JSF 2.0 的输入文本框中显示列表中的一些值。该值未显示。以下是我尝试运行的代码

```
<h:inputText id="targetDaysValueID" value="#{demandBean.filterSelectionVOList.targetDays}" required="false" style="height:22px;width:155px;float: right"></h:inputText> 
```

以下是我尝试在 xhtml 页面中运行包含上述代码的页面时收到的错误消息。

```
ava.lang.NumberFormatException: For input string: "targetDays"
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at javax.el.ListELResolver.coerce(ListELResolver.java:166)
at javax.el.ListELResolver.getValue(ListELResolver.java:51)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at org.apache.el.parser.AstValue.getValue(AstValue.java:118)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164) 
```

该代码在数据表中工作正常，我将列表分配给数据表并为其创建一个变量，当我使用带有我想要显示的字段名的变量时，同样工作正常。但是当我尝试显示 value="#{demandBean.filterSelectionVOList.targetDays}" 时不起作用

请协助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:34:46.300

问题是`#{demandBean.filterSelectionVOList}`解决了一个列表。`h:inputtext`值不能是集合。

如果`filterSelectionVOList`不为空，请尝试例如：

`#{demandBean.filterSelectionVOList.get(0).targetDays}`

编辑：

要显示集合中的所有数据，您可以例如通过以下方式包装输出组件`ui:repeat`：

```
<ui:repeat var="element" value="#{demandBean.filterSelectionVOList}">
    <h:inputText value="#{element.targetDays}" /> 
</ui:repeat> 
```

还添加一个适当的命名空间定义：

```
xmlns:ui="http://java.sun.com/jsf/facelets" 
```

`h:dataTable`如果这更适合您，您还可以使用显示元素。

# php - 错误：您的 SQL 语法有错误；检查对应的手册 .. 语法以在第 1 行的“1”附近使用

> ID：11611661
> 
> 赞同：0
> 
> 时间：2012-07-23T11:30:31.017
> 
> 标签：php, mysql

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“1”附近使用正确的语法。代码如下，我收到错误，来自 [http://cms2.br-de。 tk/editinfo.php](http://cms2.br-de.tk/editinfo.php)到[http://cms2.br-de.tk/updateinfo.php](http://cms2.br-de.tk/updateinfo.php)

```
<?php
    mysql_connect("mysql10.000webhost.com","******_12","*******") or       die("Error:".mysql_error()); 
    mysql_select_db("******_1");//add your dbname

    //get the variables we transmitted from the form
    $Title = $_POST['Title'];
    $Author = $_POST['Author'];
    $Date = $_POST['Date'];
    $Content = $_POST['Content'];

    //replace TestTable with the name of your table
    //replace id with the ID of your user
    $sql = "UPDATE `posts` SET `Tilte` = '$Tilte',`Author` = '$Author',`Date` =   '$Date',`Content` = '$Content' WHERE `posts`.`ID` = '$ID' 1 ";

     mysql_query($sql) or die ("Error: ".mysql_error());

    echo "Database updated. <a href='editinfo.php'>Return to edit info</a>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:32:32.233

您在查询结束时添加了额外的 1。它应该是这样的：

```
$sql = "UPDATE `posts` SET `Tilte` = '$Title',`Author` = '$Author',`Date` =   '$Date',`Content` = '$Content' WHERE `posts`.`ID` = '$ID'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:31:25.163

`1`你在你的陈述结束时有一个备用的。

```
UPDATE `posts` SET `Tilte` = '$Title',`Author` = '$Author',`Date` =   '$Date',`Content` = '$Content' WHERE `posts`.`ID` = '$ID';" 
```

正如 Grigore 正确发现的那样，根据列名，您的语句中可能还会出现拼写错误。

```
UPDATE `posts` SET `Title` = '$Title',`Author` = '$Author',`Date` =   '$Date',`Content` = '$Content' WHERE `posts`.`ID` = '$ID';" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:33:43.297

```
`Tilte` = '$Title' 
```

也许这是标题而不是倾斜，除了查询末尾有一个“1”

# android - 单个设备上的“无法压缩回收的位图”异常

> ID：11611667
> 
> 赞同：1
> 
> 时间：2012-07-23T11:30:52.407
> 
> 标签：android, exception, bitmap, imageview

我在 HTC Wildfire S 设备上遇到了一个大问题。我的应用程序使用图像 uri 启动第二个活动，用户可以旋转图像，然后将其保存并返回到主活动。问题出在 HTC 上，只有第一张照片会被返回，而第二张照片会导致应用程序崩溃，并出现以下错误：

`java.lang.IllegalStateException: Can't compress a recycled bitmap at android.graphics.Bitmap.checkRecycled(Bitmap.java:372) at android.graphics.Bitmap.compress(Bitmap.java:799) at zapytaj.hot.or.not.ImageRotator.end(ImageRotator.java:151) at zapytaj.hot.or.not.ImageRotator$RotatorClass.onClick(ImageRotator.java:80) at android.view.View.performClick(View.java:2532) at android.view.View$PerformClick.run(View.java:9293) at android.os.Handler.handleCallback(Handler.java:587) at android.os.Handler.dispatchMessage(Handler.java:92) at android.os.Looper.loop(Looper.java:150) at android.app.ActivityThread.main(ActivityThread.java:4277) at java.lang.reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:507) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) at dalvik.system.NativeStart.main(Native Method)`

我已经读过我应该 .copy bitmap 以避免在另一篇文章中出现这个问题，但无法弄清楚如何在我的代码上做到这一点。谢谢你的帮助。第二个活动的代码如下：

```
package com.example.app;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Base64;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.Toast;

public class ImageRotator extends Activity {
    private static final String TAG = "Rotator";
    private Uri file;
    private String suffix = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.picture);

        Bundle b = getIntent().getExtras();

        file = getIntent().getData();
        suffix = b.getString("suffix");

        Bitmap bm = this.getBitmap();

        ImageView box = (ImageView) findViewById(R.id.imageView1);
        box.setImageBitmap(bm);

        ImageButton v1 = (ImageButton) findViewById(R.id.rotateLeft);
        ImageButton v2 = (ImageButton) findViewById(R.id.rotateRight);
        ImageButton v3 = (ImageButton) findViewById(R.id.save);
        v1.setOnClickListener(new RotatorClass());
        v2.setOnClickListener(new RotatorClass());
        v3.setOnClickListener(new RotatorClass());
    }

    class RotatorClass implements ImageButton.OnClickListener
    {
        public void onClick(View v) {
            final int id = v.getId();

            int change = 0;

            switch(id) {
                case R.id.rotateLeft:
                    change = -90;
                    break;
                case R.id.rotateRight:
                    change = 90;
                    break;
                case R.id.save:
                    end(true);
                    return;
            }

            Log.d(TAG, "change: "+change);

            ImageRotator.this.rotate(change);
        }
    }

    @Override
    public void onBackPressed() {   
        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Podane zdjęcie nie zostanie dodane. Kontynuować?");
        alertDialog.setButton("Tak", new DialogInterface.OnClickListener() {
              public void onClick(DialogInterface dialog, int which) {
                  end(false);
              }
        });

        alertDialog.setButton2("Nie", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                alertDialog.cancel();
            }
        });

        alertDialog.setCancelable(false);
        alertDialog.show();
    }

    public void rotate(int change) {
        // TODO Auto-generated method stub

        ImageView imageView = (ImageView) findViewById(R.id.imageView1);

        BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
        BitmapFactory.Options options = new BitmapFactory.Options();
        Bitmap bm = drawable.getBitmap();
        Matrix matrix = new Matrix();
        matrix.postRotate(change);

        Bitmap bm2 = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight(), matrix, true);
        bm = null;

        imageView.setImageBitmap(bm2);      
    }

    public String getRealPathFromURI(Uri contentUri) {
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    public void end(boolean save) {

        Intent in = new Intent();

        if(save == true) {

            File file2 = new File(getRealPathFromURI(file));

            try {
                FileOutputStream fos = new FileOutputStream(file2);
                ImageView imageView = (ImageView) findViewById(R.id.imageView1);
                BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
                Bitmap bm = drawable.getBitmap();

                ByteArrayOutputStream baos = new ByteArrayOutputStream();  
                bm.compress(Bitmap.CompressFormat.JPEG, 30, baos);
                byte[] b = baos.toByteArray(); 

                String base = Base64.encodeToString(b, Base64.NO_WRAP);

                bm.compress(Bitmap.CompressFormat.PNG, 90, fos);
                fos.flush();
                fos.close();

                bm.recycle();
                bm = null;

                in.setData(file);

                in.putExtra("base", base);
                System.gc();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        setResult(4,in);
        finish();
    }

    private Bitmap getBitmap() {

        Uri uri = this.file;
        InputStream in = null;

        ContentResolver mContentResolver = getContentResolver();

        try {
            final int IMAGE_MAX_SIZE = 300000;
            in = mContentResolver.openInputStream(uri);

            // Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(in, null, o);
            in.close();

            int scale = 1;
            while ((o.outWidth * o.outHeight) * (1 / Math.pow(scale, 2)) > IMAGE_MAX_SIZE) {
                scale++;
            }
            Log.d(TAG, "scale = " + scale + ", orig-width: " + o.outWidth       + ", orig-height: " + o.outHeight);

            Bitmap b = null;
            in = mContentResolver.openInputStream(uri);
            if (scale > 1) {
                scale--;
                // scale to max possible inSampleSize that still yields an image
                // larger than target
                o = new BitmapFactory.Options();
                o.inSampleSize = scale;
                b = BitmapFactory.decodeStream(in, null, o);

                // resize to desired dimensions
                int height = b.getHeight();
                int width = b.getWidth();
                Log.d(TAG, "1th scale operation dimenions - width: " + width    + ", height: " + height);

                double y = Math.sqrt(IMAGE_MAX_SIZE
                        / (((double) width) / height));
                double x = (y / height) * width;

                Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x,     (int) y, true);
                b.recycle();
                b = null;

                b = scaledBitmap;
            } else {
                b = BitmapFactory.decodeStream(in);
            }
            in.close();
            return b;
        } catch (IOException e) {
            Log.e(TAG, e.getMessage(),e);
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:53:30.153

只需使用原始位图的复制工具。

`Bitmap bm = drawable.getBitmap().copy(Bitmap.Config.ARGB_8888, false);`

`Config`- 具有两个或三个可选值的枚举器，以支持像素表示。

布尔参数说明结果位图是否允许访问编辑它的位。

# iphone - iPad 和手机出现大图问题

> ID：11611677
> 
> 赞同：3
> 
> 时间：2012-07-23T11:31:22.087
> 
> 标签：iphone, css, ios, ipad

我目前在我的网站上有一个比平时大得多的图像，但是该网站会根据每个用户显示器的宽度在每一侧切断图像，这很好。

然而，在 iPad/移动设备上，整个图像总是显示，这将整个站点推向左侧，同时在右侧留下大面积的空白区域。

任何有关如何确保 iPad 在 Web 浏览器执行时切断图像的建议都将不胜感激。

我在标题中使用了以下内容

```
<meta name="viewport" content="user-scalable=yes, width=980px">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=980"> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:53:13.153

把它放在你定义 UIWebView 的时候

```
webView.frame=self.view.bounds;

webView.scalesPageToFit = YES; 
```

因此用户将根据阅读内容的需要放大和缩小。

# android - VpnService Android 4.0

> ID：11611679
> 
> 赞同：4
> 
> 时间：2012-07-23T11:31:27.967
> 
> 标签：android, vpn, android-4.0-ice-cream-sandwich

请我需要一个在带有 PPTP VPN 服务器的 Android 4.0 中使用 VpnService 的示例。我试过 ToyVpnService 但它没有使用用户名和密码连接到 VPN 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:27:00.030

VPNService API 不是用于配置系统 VPN 服务，而是用于实现您自己的 VPN 解决方案。例如，您可以实施 OpenVPN 等系统未实施的协议。

要将 pptp 与 VPNService API 一起使用，您需要自己实现 PPTP 协议（​​或移植现有实现（应该不难））

# .htaccess - 如何使用 .htaccess mod rewrite 创建虚拟 username.domain.com

> ID：11611680
> 
> 赞同：1
> 
> 时间：2012-07-23T11:31:38.860
> 
> 标签：.htaccess, subdomain, wildcard

我知道有很多像我问的问题，但是整天搜索解决方案，我没有找到适合我的解决方案，因此我提出了问题。这是`.htaccess`我必须查看用户配置文件的代码：

```
RewriteRule  ^users/([^/\.]+)/$ viewProfile.php?user=$1&%{QUERY_STRING}
RewriteRule  ^users/([^/\.]+)/([^/\.]+)/$ viewProfile.php?user=$1&usr_profile=$2&%{QUERY_STRING} 
```

并使用此重写用户配置文件*URL*是：

```
http://www.domain.com/users/username.html 
```

在这种类型的*URL*中，我想创建子域用户*URL*，例如：

```
http://username.domain.com 
```

任何人都可以提出解决方案吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:22:11.537

确保您的虚拟主机设置为接受`*.domain.com`. 然后将其添加到您的其他重写规则之上：

```
RewriteCond %{HTTP_HOST} !^www [NC]
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com$ [NC]
RewriteRule ^$ viewProfile.php?user=%1 [L,QSA] 
```

# android - 滚动时编辑文本失去焦点

> ID：11611681
> 
> 赞同：3
> 
> 时间：2012-07-23T11:31:40.393
> 
> 标签：android, scroll, android-edittext

我有一个包含各种编辑文本和微调器的页面。为了启用滚动，我已将`android:windowSoftInputMode="adjustResize"`活动放入我的清单中。但是当我滚动视图时，我的重点编辑文本失去了焦点。我的意思是，假设我首先关注的是编辑文本，然后我向下滚动，然后回到我的第一个编辑文本，但现在我的第一个编辑文本失去了焦点。有趣的一点是，当我在 API level4.0 中测试相同的东西时，它工作正常，而不是在 4.0 之前

请帮我做什么或建议我失去的东西。

而对于代码，它只是一些正在工作的编辑文本

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello" />

            <EditText
                android:id="@+id/et_user"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:singleLine="true" />
        </LinearLayout>
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:49:49.277

这是 android 提供的，可能有一些解决方法，但目前这就是它的工作方式。所以我可以告诉你的是遵守这个限制。任何更新都会通知您。

# android - 我在安卓手机中的数据库在哪里？

> ID：11611684
> 
> 赞同：0
> 
> 时间：2012-07-23T11:31:53.117
> 
> 标签：android, eclipse

我创建了一个这样的数据库：

```
db = openOrCreateDatabase("ImisData.db3",SQLiteDatabase.CREATE_IF_NECESSARY, null); 
```

在真机上安装并运行应用程序后，我在哪里可以找到我的数据库？我查看了数据文件夹，但我什至没有在那里找到我的包名。

请问有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:33:58.580

它在您的内存`/data/data/package_name/databases`文件夹中。为了访问该文件夹，我相信您的手机必须是*root*并且需要使用某种*root explorer*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:34:51.407

它应该在`/data/data/your.package/databases`

您需要有根电话才能访问它。您将需要此命令来检索数据库：

```
adb pull <remote> <local> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:35:03.227

内部存储器

/data/data/your_apk_package_name/databases/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:35:08.773

使用此方法，它将在 ("/data/data/YourPackageName/databases/")..

# javascript - 使用 JavaScript SDK 阅读提要

> ID：11611689
> 
> 赞同：0
> 
> 时间：2012-07-23T11:32:01.513
> 
> 标签：javascript, facebook, api, get, feed

我正在尝试使用 JavaScript SDK 检索用户的新闻提要。这在测试控制台中运行良好，但一旦我在我的站点上尝试它就不起作用。

```
FB.api('/me/home', 'get', function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert(response);
  }
}); 
```

我知道警报只会返回“[object]”，但我只是想让 API 调用现在正常工作。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:34:14.620

您是否要求用户获得`read_stream`许可。没有该权限，您无法查看用户的供稿。这可能是错误的原因。

警告实际错误以使调试更容易：

```
alert( response.error ); 
```

甚至更好，使用`console.log`：

```
FB.api('/me/home', 'get', function(response) {
  console.log(response);
}); 
```

过早调用你的函数可能会导致调用失败。尝试将函数包装在函数中`fbAsycInit`：

```
window.fbAsyncInit = function() {
    FB.api('/me/home', 'get', function(response) {
        console.log(response);
    });
}; 
```

# android - 获取在 Android 上传递的实时时间

> ID：11611691
> 
> 赞同：1
> 
> 时间：2012-07-23T11:32:08.030
> 
> 标签：android, time

我正在开发一个应用程序，它将有一个自定义的年度订阅许可证。我需要确切地知道已经过去了多少时间。用户可以让设备离线，因此我无法通过互联网查看时间。用户可以拨回时钟，因此我无法确定真正经过的时间。有没有办法让实时过去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:39:17.423

我认为您可以使用`System. nanoTime()`，它可以帮助您测量绝对经过的时间（而不是`System.currentMillis()`在系统时钟更改时进行调整）。

有关更多信息，请参阅[nanoTime](http://developer.android.com/reference/java/lang/System.html#nanoTime%28%29)和[currentMillis](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis%28%29) javadocs。

ps：我没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:44:54.960

you can have a preference or database that need to be stored the time when user install the application ... and you will always compare the time passed with the difference between stored time - current system time ........

or may be make a service to get network time

# java - 在 Play 中渲染表单时添加附加信息！2.0.2

> ID：11611695
> 
> 赞同：3
> 
> 时间：2012-07-23T11:32:24.183
> 
> 标签：java, forms, playframework, playframework-2.0

我正在通过 LinkedIn API 向用户模型添加更多信息，所有这些代码都在控制器中处理。将信息添加到模型后，我在新视图中重新呈现（用户类的）表单。有没有办法将附加信息附加到此表单（内置于 Play！），以显示 API 调用已更新哪些字段？

用例：

1.  用户进入查看/编辑个人资料页面

2.  用户点击“从领英导入信息”

3.  对 LinkedIn API 进行 API 调用 - 然后将用户返回到特定控制器（称为 Social），该控制器处理 JSON 到 JAVA 的数据转换，并将新数据绑定到用户模型，并将更新的模型存储在数据库。

4.  然后控制器将用户重定向到 index() 控制器，该控制器再次呈现视图/编辑配置文件视图。（现在我想添加一个功能，用户可以看到他的个人资料中的哪些字段由于 API 调用而被修改）。

例如，类似于`form.errrors()`（称为 form.info() 或其他东西）的东西。如果这是不可能的，那么是否有任何方法可以访问 FieldElements，并可能向它们添加一些东西？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:56:45.180

我没有清楚地看到问题。

当控制器将用户重定向到其个人资料页面时，您只需使用数据库中的数据填充表单。

像这样的东西：

```
public static Result profile(String userId) {
    Form<User> userForm = form(User.class);

    User user = User.findById(userId); // data have been set in the database
    if (user != null) {
         userForm = userForm.fill(user);
    }

    return redirect(your.view.render(userForm));
} 
```

# java - JSF Lifecycle 使用 PrimeFaces ajax 执行 2 次

> ID：11611699
> 
> 赞同：1
> 
> 时间：2012-07-23T11:32:35.703
> 
> 标签：java, ajax, jsf-2, primefaces

我在 WebSphere Application Server 上使用 PrimeFaces 3.3.1 和 Apache MyFaces 2。我的 BackingBean 是 SessionScoped。我有一个带有 selectOneButton 的表单应该更新整个表单。

```
<h:form id="options">
    <p:panelGrid>
        <p:column rowspan="2" style="width:115px;">
            <p:selectOneButton value="#{graph.diagramdata}" id="diagramdata">           
                <f:selectItem itemLabel="WAS-Diagramm" itemValue="1" />
                <f:selectItem itemLabel="PSC-Diagramm" itemValue="2" />
                <p:ajax listener="#{graph.changeView }" update=":options"/>
            </p:selectOneButton>
            <h:outputText>#{graph.diagramdata}</h:outputText>
        </p:column>
        <p:column rendered="#{graph.diagramdata eq '1' }">
          ...
        </p:column>
    </p:panelGrid>
</h:form> 
```

**编辑：支持豆的一部分**

```
@ManagedBean(name = "graph")
@SessionScoped
public class MyGraphBean implements Serializable {
  private int diagramdata;

  public void changeView(AjaxBehaviorEvent event) {
      LOGGER.info(this.getDiagramData());   
  }

  public int getDiagramdata() {
    return diagramdata;
  }

  public void setDiagramdata(int diagramdata) {
    if(diagramdata == 1 || diagramdata == 2) {
      this.diagramdata = diagramdata;
    }
  }
} 
```

但是当我更改一个值时，jsf 生命周期会执行 2 次。第一次 in.getValue 为空，第二次为 1 或 2（来自 LOGGER）。但最后我的 h:outputText 打印 0...

要调试，我使用[BalusC：调试 JSF 生命周期](http://balusc.blogspot.de/2006/09/debug-jsf-lifecycle.html)

为什么 te Lifecycle 会执行 2 次？

如何使用我的 selectOneButton 正确呈现其他列？

**编辑：肮脏的解决方案**

我找到了解决问题的方法（很脏！！！）。我将 p:ajax 组件更改为 f:ajax。所以现在我的值在第二个生命周期阶段被设置为正确的值。

```
<p:selectOneButton value="#{graph.diagramdata}" id="diagramdata">           
      <f:selectItem itemLabel="WAS-Diagramm" itemValue="1" />
      <f:selectItem itemLabel="PSC-Diagramm" itemValue="2" />
      <f:ajax listener="#{graph.changeView }" render="options"/>
</p:selectOneButton> 
```

我还在我的 setter 方法中添加了一个 if 语句，以避免设置“0”。

现在第一个 jsf 生命周期什么都不做，第二个设置我的值。

它可以工作，但不是很好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:42:36.300

你`onchange="submit()"`那里有什么？是否有机会提交表单？如果是这样，则将其删除...

此外，您确定需要`immediate="true"`您计划跳过验证吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:46:19.407

似乎是 PrimeFaces selectOneButton 的错误。当我使用例如 p:selectOneMenu 时，它适用于 1 个 JSF 生命周期！

这是 primefaces 的已知[问题](http://code.google.com/p/primefaces/issues/detail?id=3767)。

# maven - 如何编译和运行多模块 jersey web 服务？

> ID：11611703
> 
> 赞同：0
> 
> 时间：2012-07-23T11:32:42.323
> 
> 标签：maven, jersey, multi-module

我是 maven 新手，我正在尝试按照[本教程](http://subodh1287.wordpress.com/2012/02/21/hello-world/)创建一个新的多模块 jersey web 服务。所以现在我的项目由 3 个 maven 模块组成：

```
* Model module
* Core module
* web service module 
```

现在，由于我是 Maven 项目的新手，我不知道如何编译这些模块并运行我的 Web 服务。当我更新这 3 个模块之一时，我应该使用哪些命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:21:46.703

通常会`mvn clean install`在父项目中运行，然后`mvn jetty:run`从 Web 服务模块中运行（假设您使用的是 Jetty 插件）。

# java - 访问可执行 jar 中的文件和文件夹

> ID：11611704
> 
> 赞同：0
> 
> 时间：2012-07-23T11:32:44.643
> 
> 标签：java, eclipse, jar, directory, executable

我面临以下问题：我将 Eclipse 用于我的 Java 项目，并且我有以下结构：

```
 --> src
      --> package1
          ....
      --> package2
          ...

   -->dataFolder
       --> Folder1
            --> file1.xml
       --> Folder2
            file2.xml 
```

在我的 java 项目中，我解析 dataFolder 目录中的所有文件。这没问题，因为我可以直接使用eclipse项目的根目录，像这样：

```
File dataStoreFolder = new File("dataFolder");
Some parsing...... 
```

但是当我将我的项目导出为可执行 jar 文件时，我无法再访问这些文件了。当然那是因为它们不在我放置 exec.jar 文件的同一个文件夹中。但我不想将包含数据的整个文件夹复制到我的 exec.jar 文件中。我可以以某种方式将它放在我的 jar 文件中吗？（我通过将 dataFolder 添加到 Java 构建路径来做到这一点，但它仍然无法像在 Eclipse 中那样工作）

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:37:14.693

当您使用 jar 文件时，这些*文件*不再作为文件存在。

您绝对可以将数据包含在您的 jar 文件中，但是您也需要更改访问它的代码。`File`您不需要创建对象，而是需要以下内容：

```
InputStream input = Foo.class.getResourceAsStream("/dataFolder/Folder1/file.xml"); 
```

所以你有两个可分离的任务：

*   弄清楚如何在 jar 文件中包含数据文件夹
*   更改代码以适当地访问数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:39:43.450

是的，您可以将它们放入您的 jar 文件中。只需`dataFolder`在 Eclipse 下创建一个源文件夹，它会将非 Java 文件复制到目标目录，并将它们添加到 jar 文件中。

一旦进入 jar 文件，你会得到`file1.xml`这样的：

```
InputStream in = SomeClass.class.getResourceAsStream("/Folder1/file1.xml"); 
```

# plot - ipython notebook 中的动画图

> ID：11611705
> 
> 赞同：18
> 
> 时间：2012-07-23T11:32:46.313
> 
> 标签：plot, ipython

有没有一种创建动画图表的方法。例如显示具有不同参数的相同图表。

比如是SAGE notebook，可以这样写：

```
a = animate([circle((i,i), 1-1/(i+1), hue=i/10) for i in srange(0,2,0.2)], 
            xmin=0,ymin=0,xmax=2,ymax=2,figsize=[2,2])
a.show() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T21:37:31.470

这有可怕的闪烁，但至少这为我创造了一个动画情节。它基于 Aron's，但 Aron's 不能按原样工作。

```
import time, sys
from IPython.core.display import clear_output
f, ax = plt.subplots()

n = 30
x = array([i/10.0 for i in range(n)])
y = array([sin(i) for i in x])
for i in range(5,n):
  ax.plot(x[:i],y[:i])
  time.sleep(0.1)
  clear_output()
  display(f)
  ax.cla() # turn this off if you'd like to "build up" plots
plt.close() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-12T13:35:43.030

**更新：2014 年 1 月**

Jake Vanderplas 为 matplotlib 动画创建了一个基于 Javascript 的包，可[在此处](https://github.com/jakevdp/JSAnimation)获得。使用它很简单：

```
 # https://github.com/jakevdp/JSAnimation
 from JSAnimation import examples
 examples.basic_animation() 
```

![Jake 的 JSAnimation 包示例](../Images/9efbd95ffac6b678602958c0b9f8b3fb.png)

有关更完整的描述和示例， 请参阅[他的博客文章。](http://jakevdp.github.io/blog/2013/05/19/a-javascript-viewer-for-matplotlib-animations/)**历史答案（请参阅 goger 进行更正）**

是的，Javascript 更新还没有正确保存图像帧，所以会出现闪烁，但是您可以使用这种技术做一些非常简单的事情：

```
import time, sys
from IPython.display import clear_output
f, ax = plt.subplots()

for i in range(10):
  y = i/10*sin(x) 
  ax.plot(x,y)
  time.sleep(0.5)
  clear_output()
  display(f)
  ax.cla() # turn this off if you'd like to "build up" plots
plt.close() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-03T23:23:48.443

[IPython 小部件](https://ipython.org/ipython-doc/dev/whatsnew/version2.0.html#interactive-widgets)让您可以使用 Notebook 中的 GUI 对象来操作内核中的 Python 对象。您可能还喜欢 Sage[托管的 IPython Notebooks](http://sagemath.blogspot.com/2013/09/ipython-notebooks-in-cloud-with.html)。在笔记本中共享小部件或交互性时可能遇到的一个问题是，如果其他人没有 IPython，他们将无法运行您的工作。为了解决这个问题，您可以使用 Domino与其他人可以运行的小部件[共享笔记本。](http://blog.dominodatalab.com/interactive-charts-with-plotly-and-domino/)

下面是您可以在 Notebook 中构建的三个小部件示例，使用 pandas 过滤数据、分形和 3D 绘图的滑块。[了解更多信息并在此处](http://moderndata.plot.ly/widgets-in-ipython-notebook-and-plotly/)查看代码和笔记本。

![在此处输入图像描述](../Images/f2c305cec6b3ffc3090b6a2ded7c9ac5.png)

![在此处输入图像描述](../Images/390a8e96cabc89ad1214d387956aaf4c.png)

![在此处输入图像描述](../Images/5dd13cd551cdc4794fee9d88c543f7ec.png)

如果您想要实时流式传输数据或设置模拟以循环运行，您还可以将[数据流式传输](https://plot.ly/python/streaming-tutorial/)到笔记本中的绘图中。免责声明：我为 Plotly 工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-14T12:53:38.940

如果您使用 IPython notebook，v2.0 及以上版本支持[交互式小部件](http://nbviewer.ipython.org/github/ipython/ipython/blob/2.x/examples/Interactive%20Widgets/Index.ipynb)。[你可以在这里](http://earthpy.org/pyncview_pm.html)找到一个很好的示例笔记本（nb 你需要从你自己的机器上下载并运行才能看到滑块）。

它基本上归结为导入`interact`，然后将其传递给一个函数，以及参数的范围。例如，从第二个链接：

```
In [8]:
def pltsin(f, a):
    plot(x,a*sin(2*pi*x*f))
    ylim(-10,10)
In [9]:
interact(pltsin, f=(1,10,0.1), a=(1,10,1)); 
```

这将产生一个带有两个滑块的图，for`f`和`a`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-27T22:17:01.427

如果您想要 3D 散点图动画，Ipyvolume Jupyter 小部件非常令人印象深刻。 [http://ipyvolume.readthedocs.io/en/latest/animation.html#](http://ipyvolume.readthedocs.io/en/latest/animation.html#)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-21T20:50:05.390

bqplot 现在是一个非常好的选择。它专为通过笔记本中的 python 制作动画而构建

[https://github.com/bloomberg/bqplot](https://github.com/bloomberg/bqplot)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-28T07:52:35.343

`matplotlib`有一个[`animation`](https://matplotlib.org/api/animation_api.html)模块可以做到这一点。但是，网站上提供的示例不会像在笔记本中那样运行；您需要进行一些调整才能使其正常工作。

以下是修改为在笔记本中工作的页面示例（修改以*粗体显示*）。

```
 import numpy as np
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation
**from matplotlib import rc
from IPython.display import HTML**

fig, ax = plt.subplots()
xdata, ydata = [], []
ln, = plt.plot([], [], 'ro', animated=True)

def init():
    ax.set_xlim(0, 2*np.pi)
    ax.set_ylim(-1, 1)
    return ln,

def update(frame):
    xdata.append(frame)
    ydata.append(np.sin(frame))
    ln.set_data(xdata, ydata)
    return ln,

**ani = FuncAnimation(fig, update, frames=np.linspace(0, 2*np.pi, 128),
                    init_func=init, blit=True)
rc('animation', html='html5')
ani
# plt.show()** # not needed anymore 
```

请注意，笔记本中的动画是通过电影制作的，您需要安装 ffmpeg 并配置 matplotlib 才能使用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-04T03:32:12.167

在@goger 对“可怕的闪烁”的评论中，我发现调用 clear_output(wait=True) 解决了我的问题。该标志告诉 clear_output 等待渲染，直到它有新的渲染。

# c# - 网页浏览器控件中使用Watin，capturewebpagetofile() 无法捕获页面

> ID：11611711
> 
> 赞同：0
> 
> 时间：2012-07-23T11:33:04.190
> 
> 标签：c#, browser, screenshot, watin

我想在 WebBrowser Control 中创建网页截图，所以我使用 Watin 来实现这一点。但是 capturewebpagetofile() 捕获的都是黑色图像。网页已在 WebBrowser 中完成加载。capturewebpagetofile() 除了在 WebBrowser 中工作正常。为什么 capturewebpagetofile() 不能在 WebBrowser 控件中工作？

我的代码打击：

```
IE ie = new IE(webBrowser1.ActiveXInstance);
ie.GoTo(url);
ie.CaptureWebPageToFile(@"c:\test.png"); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T11:59:12.430

我不建议使用 ActiveXInstance，为什么不使用 WebBrowser wb = new WebBrowser(); 反而

# jquery - jqPlot 过滤选项

> ID：11611713
> 
> 赞同：0
> 
> 时间：2012-07-23T11:33:20.453
> 
> 标签：jquery, filter, charts, jqplot

我有充满 jqPlot（其中 6 个）的仪表板，它们主要按时间戳或日期或位置工作。

**jqPlot**上是否有一个选项可以让我按日期或位置进行**过滤**？顶部的某种形式的**下拉菜单连接到图表并从 json 提要获取数据。**和示例或起始链接将有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:23:59.497

有几种方法可以做到这一点。

首先jqplot有一个datarenderer，它允许你通过一个函数（可能有一个ajax调用）来获取数据 [http://www.jqplot.com/deploy/dist/examples/data-renderers.html](http://www.jqplot.com/deploy/dist/examples/data-renderers.html) 如果你想改变绘制绘图后的数据，您需要调用重新绘图。 [http://www.jqplot.com/docs/files/jqplot-core-js.html#jqPlot.replot](http://www.jqplot.com/docs/files/jqplot-core-js.html#jqPlot.replot)

您还可以加载所有数据，并有一些预设的缩放选项或类似的东西。我已经看到了它的例子，但我找不到一个快速的。

对于位置图，我会尝试显示/隐藏不同的系列。我确定该选项在图例中可用，因此我会尝试捕捉该事件。 [http://www.jqplot.com/docs/files/plugins/jqplot-enhancedLegendRenderer-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-enhancedLegendRenderer-js.html) 如果你尝试 $('td.jqplot-table-legend:first').click(); 在你的控制台[http://www.jqplot.com/deploy/dist/examples/blockPlot.html](http://www.jqplot.com/deploy/dist/examples/blockPlot.html)你会明白的

# android - 自定义布局的dispatchDraw中的画布大小

> ID：11611719
> 
> 赞同：0
> 
> 时间：2012-07-23T11:33:44.440
> 
> 标签：android, android-layout, android-custom-view

我在自定义布局中遇到问题，这是 LinearLayout 的扩展。我想要实现的只是在布局的画布上绘制一些形状。

因此我做了这样的事情：

```
public class MyLayout extends LinearLayout {

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);

        int width = canvas.getWidth();
        int height = canvas.getHeight();

        Log.d(TAG, "canvas width: " + width);
        Log.d(TAG, "canvas height: " + height);

        // do some drawing on the canvas ...
    }
} 
```

我省略了我进行实际绘图的部分，因为我猜它与我的问题无关。

我的问题是，在 ICS 之前（或者可能是 Honeycomb 之前），画布似乎是整个屏幕的大小，而不仅仅是应该绘制布局的部分。因此，我的图纸最终出现在错误的地方。

例如，在 HTC Desire 上，上面的日志输出为：

```
canvas.width: 480
canvas.height: 800 
```

而高度应该更小，因为布局上方和下方还有其他元素。

ICS 上不存在此问题，我得到的画布与我的布局大小完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:23:53.597

你必须使用调度抽奖吗？为什么不使用 invalidate 并让框架计算出画布大小。

# ruby - 在 Ruby 中使用带有参数的 procs/lambdas

> ID：11611721
> 
> 赞同：1
> 
> 时间：2012-07-23T11:33:47.110
> 
> 标签：ruby, lambda, scope, proc

## 编辑以包括 SSCE

我有一个 Proc 对象，我将它与其他 Procs 添加到 Hash 中：

```
ten_percent_discount_over_sixty = Proc.new {
  cart.each { |item| cart_total += item.price }

  if cart_total >= 60.00
    cart_total =- cart_total * 0.1
  end
} 
```

如您所见，有一个`cart`数组包含`items`. 但是，我无法将我的`cart`实例变量放入此 proc 的范围内。`rules`所以后来当我用另一种方法遍历所有这些时，我得到了`undefined variable`错误。

这样做的目的是我有各种促销规则（功能）需要在这个购物车对象上运行。可能有更好的存储方法`rules`可以迭代地应用于对象实例变量。

* * *

我有`checkout`一个包含对象购物车（数组）的`item`对象；`items`具有以下属性`code`：`price`和`name`。

接下来我有一个`Promotion`对象，其中包含`promotional rules`. 这个散列包含`Proc`持有这些规则的对象（它们是每个在购物车对象上运行的函数，改变购物车的最终价格）。可以通过调用方法并将名称作为参数来添加和删除规则。

我遇到的问题是当我遍历`promotional rules`. 我不知道如何将`cart`对象放入这些对象的范围内，`Proc`以便运行这些对象中包含的函数`Proc`，从而改变`cart`状态。

1.  创建 Proc/lambda 时是否传入购物车对象？
2.  在对象中创建一个购物车实例变量`Promotion`并设置/获取它？
3.  以某种方式传入对象内的购物车变量`checkout`？
4.  我过度思考或以不正确的方式解决问题？

完整的代码很长，所以我将在`gist`下面发布：

[https://gist.github.com/3163127](https://gist.github.com/3163127)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:39:46.520

您的规则过程必须接受购物车作为参数，对其采取行动，并返回修改后的购物车。

```
cart = {total: 100}

rules = {ten_percent_discount: lambda{|c| c[:total] *= 0.9; c },
  five_percent_discount: lambda{|c| c[:total] *= 0.95; c}}

rules.each do |name, rule|
  cart = rule.call cart.dup
end

cart # => {:total=>85.5} 
```

# asp.net - 从 Visual Studio 浏览但不使用 IIS 时，身份验证有效

> ID：11611728
> 
> 赞同：1
> 
> 时间：2012-07-23T11:34:02.203
> 
> 标签：asp.net, sql-server, authentication, exception-handling, ado.net

我有一个 ASP.NET 网站。它有一个登录页面，我在其中使用内置的 Membership 类进行用户身份验证。我有一个奇怪的问题。在 Visual Studio 中，当我指向我的 Default.aspx 文件并选择在浏览器中查看时我没有问题，我输入凭据并进行身份验证。但是，当我直接从浏览器（localhost/MyWebsite）打开同一个网站时，身份验证失败或出现以下错误：

> 无法打开登录请求的数据库。登录失败。用户“NT AUTHORITY\NETWORK SERVICE”登录失败。”

我使用 SQL Server express 作为成员资格。我已将 mdf 文件放在 App_Data 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:56:59.847

如果您正在使用::

```
Integrated Security 
```

在您的连接字符串中，这仅意味着 ASP.Net 正在尝试使用**当前 AppPool 身份**与您的数据库连接，在这种情况下，*AUTHORITY\NETWORK SERVICE*

您可以更改数据库身份验证机制以使用用户/密码并避免此问题

*另一种解决方案是向数据库中的AUTHORITY\NETWORK SERVICE*用户授予所需的权限

# python - 基于 Django 类的视图，使用“queryset”属性时语言值错误

> ID：11611729
> 
> 赞同：0
> 
> 时间：2012-07-23T11:34:09.627
> 
> 标签：python, django

当我`translation.get_language()`在`queryset`基于类的视图的属性中使用它时，它会在更改语言时返回不正确的值。

```
class LandingPageOverview(ListView):
    model = LandingPage
    context_object_name = 'landingpages'
    template_name = 'landingpage/overview.html'
    queryset = LandingPage.objects.filter(language=translation.get_language()) 
```

当我使用`get_queryset`正确的值时返回。

```
class LandingPageOverview(ListView):
    model = LandingPage
    context_object_name = 'landingpages'
    template_name = 'landingpage/overview.html'

def get_queryset(self):
    return LandingPage.objects.filter(language=translation.get_language()) 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:49:19.370

在第一个示例中，第一次加载类时评估语言。试试这个：

```
def a(x=[]):
    x.append(1)
    print x

a()
a()
a()
a() 
```

结果将是：

```
[1]
[1, 1]
[1, 1, 1]
[1, 1, 1, 1] 
```

**编辑**：

你可以这样做：

```
class LandingPageOverview(ListView):
    model = LandingPage
    context_object_name = 'landingpages'
    template_name = 'landingpage/overview.html'

    @property
    def queryset(self):
        return LandingPage.objects.filter(language=translation.get_language()) 
```

并根据需要使用它：

```
l = LandingPageOverview()
l.queryset 
```

# java - 从 maven 构建时出现 jvm 堆大小错误

> ID：11611734
> 
> 赞同：1
> 
> 时间：2012-07-23T11:34:15.073
> 
> 标签：java, maven-3

我正在关注我的 Web 应用程序，它由多个项目组成，即大约 23 个项目，其中一些是 Java 项目，一些是动态 Web 项目。当我从 RAD 制作 EAR 时，它会成功生成，但是当我尝试从 MAVEN 制作 EAR 时，它会抛出堆大小问题。当我将`POM.xm`l 中的项目数量从 23 个减少到 12 个时，EAR 成功生成，但增加项目数量会带来相同的堆大小错误。

如果我设置环境变量`MAVEN_OPTS = -Xmx1024M`，它就不起作用。我的 PC RAM 是 2 GB，当我尝试设置时`MAVEN_OPTS = -Xmx2048M`，它会抛出错误，因为它无法为 JVM 保留这么多空间。

我有 jdk 1.7 和 maven 3。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:47:02.720

我们的多模块项目也有同样的问题。编译器或编译器插件似乎存在内存泄漏。因此，当 Maven 开始构建 EAR 时，它也会消耗太多内存来构建 EAR 项目。但是，您可以建议编译器在单独的进程中运行，这样就不会发生此问题（请参阅[Maven 文档](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-with-memory-enhancements.html)）：

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <fork>true</fork>
    </configuration>
  </plugin>
</plugins> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:41:58.180

建议：

*   买一台内存更大的机器。
*   在运行构建之前关闭您的 IDE。
*   尝试将堆大小增加到1Gb 和 2Gb*之间的某个数字。*
*   `install`尝试使用目标以正确的顺序一次构建一个组件项目。（问题可能是由于 Maven 在构建单个项目之间在内存中保留了太多东西。）

还值得研究*为什么*它不能分配 2Gb 的堆空间。这可能是交换空间的问题，或者可能是可以解决的 32 位 Windows 2Gb 限制。

而罗兰的想法也不错。

# android - 我可以将意图传递给 Play，以便新安装的应用在启动时接收吗？

> ID：11611735
> 
> 赞同：0
> 
> 时间：2012-07-23T11:34:31.010
> 
> 标签：android, android-intent, google-play

我有两个安卓应用。激活一个特定功能应该向另一个发送意图，但如果没有安装其他应用程序，我必须将用户发送到 Play 以安装它。

我知道如何检测是否安装了其他应用程序以及如何打开市场 -[如果未安装意图则下载应用程序](https://stackoverflow.com/questions/4240077/download-app-if-intent-not-installed)- 我知道我可以设置一个侦听器来检测第二个应用程序何时新安装并原则上发送这是我最初想发送的意图 -[如何捕获或接收已安装应用程序的 android os '广播'？](https://stackoverflow.com/questions/6717067/how-to-catch-or-receive-android-os-broadcasts-of-installed-applications)- 但是有没有办法将我想发送到另一个应用程序的意图嵌入到播放启动意图中，所以它会在安装另一个应用程序时自动激活？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:39:14.220

您无法干预播放启动意图。

正如您所说，您可以做的是收听应用程序的安装。

安装应用程序后，向其发送包含您希望它接收的任何数据的意图。

在接收应用程序中，采用该意图并将数据存储到 SharedPreferences 或文件中。一旦用户安装了新打开的应用程序，检查主活动中的数据并相应地使用它。

# android - 带有 Androidplot 的负条形图

> ID：11611739
> 
> 赞同：1
> 
> 时间：2012-07-23T11:34:55.883
> 
> 标签：android, bar-chart, androidplot

我正在使用该`Androidplot`库绘制条形图以显示某些内容。我的值的范围是**-40 到 +40**。

如何将条形图绘制到负面？我只想将零在中间的 y 轴上居中，如果值是负值，则条应该向上或向下增长。我的酒吧从下限向上增长。它应该如下所示： ![在此处输入图像描述](../Images/4651d2efd0df507177d1b854c7cc310a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T13:31:37.010

最近在 Androidplot **0.6.2**中添加了负条支持；您需要使用[最新的开发版本](https://androidplot.jira.com/builds/artifact/ANDROIDPLOT-TRUNK/JOB1/build-latest/)来获取它（它非常稳定）。

一旦您拥有正确版本的 Androidplot，您就可以使用 Maria Reina 的建议来启用负值显示。这是我在下面的屏幕截图中的操作方式：

```
plot.setUserRangeOrigin(0);
plot.setRangeBoundaries(0, BoundaryMode.AUTO, 0,BoundaryMode.AUTO); 
```

![在此处输入图像描述](../Images/b4aa1a30e688eff8b59bb42031aa8e84.png)

*注意：*目前存在一个错误，如果您使用具有 2 个或更多系列的叠加模式并且有负条，则负条的叠加顺序会颠倒，导致条组中较小的负值被较大的负值遮挡。如果您的目标只是重现上面的图像，那么您应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T09:18:40.807

这对我行得通：

> plot.centerOnRangeOrigin(0);
> 
> plot.setRangeLowerBoundary(0,BoundaryMode.AUTO);

其中 plot 是 XYPlot 的一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T15:39:06.103

这是一个很好的问题。我认为当前版本的 AndroidPlot (0.6.0) 没有办法做到这一点，只有一系列值。我在我的项目中创建了一个解决方法。我知道这并不完美，但它确实有效：创建两个重叠的系列，一个是绿色的，一个是背景色的。假设您有要绘制的 currentValue..

```
if (currentValue>=0) {
    greenRes[i] = Float.valueOf(currentValue);
    coverRes[i] = Float.valueOf(0);
}
else {
    greenRes[i] = Float.valueOf(0);
    coverRes[i] = Float.valueOf(currentValue);
} 
```

这样，您始终可以看到从零轴开始向上或向下的绿色条。

# jquery - 具有 display:block 的 jQuery 计数 div

> ID：11611744
> 
> 赞同：3
> 
> 时间：2012-07-23T11:35:11.993
> 
> 标签：jquery

我有 div 元素，如下图所示。我想要将 css 显示为块的 div 的计数。

我尝试了什么：

1) `$('div.price_listing_container:visible').length`

和

2.)

```
 $('#content').children("div").filter(function() {
        return $(this).css('display') !== 'none';
  }).length 
```

和

3.) `$("#content > div").filter(":block").size()`

最后一个选项根本不起作用，其他两个在警报中起作用，但是如果我将它们的返回值分配给一个变量，则值变为 0，不知道为什么会这样，请参见下面的代码：

```
var numberOfResultsVisible =  ($('#content').children("div").filter(function() {
                return $(this).css('display') !== 'none';
            }).length); 
```

和

```
var numberOfResultsVisible =  $('div.price_listing_container:visible').length; 
```

赋值后为0。

你能告诉我是否可以使用其他方法来获得计数。

![在此处输入图像描述](../Images/93f3becda293a30dae0a18ca6031ca17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:54:49.883

一个简单的循环怎么样？

```
$(function(){
    var allElems = document.getElementsByTagName('div');
    var count = 0;
    for (var i = 0; i < allElems.length; i++)
    {
        var thisElem = allElems[i];
        if (thisElem.style.display == 'block') count++;
    }
    alert(count);
}); 
```

同样在这里：http: [//jsfiddle.net/E252r/8/](http://jsfiddle.net/E252r/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:37:35.133

```
$('#content').find("div:visible").length 
```

见演示：http: [//jsfiddle.net/E252r/2/](http://jsfiddle.net/E252r/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:38:14.613

不要内联样式 - 添加另一个类：

```
 <div class="price_listing_container plblock"> ... 
```

然后您可以使用以下方法过滤它们：

```
 $('#content div.price_listing_container.plblock') 
```

在您的 CSS 中，您将拥有：

```
 div.plblock {display:block;} 
```

这是一种更清洁的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:25:35.080

试试这个...我刚刚测试过

```
 length = $('div[style~="display:block;"]').size(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T11:41:26.373

```
$('#content').children('div:visible').length 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T11:41:55.630

您正在寻找[`getComputedStyle()`](http://www.java2s.com/Tutorial/JavaScript/0440__Style/GetComputedStyle.htm)房产。我听说它在 IE 中不可用，它可能有自己的替代功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T11:42:42.490

```
var display = $("#content").attr("style");
if(display.text(style) == "display:none")
  {

  } else {

  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T11:44:47.487

You said it worked on alert than try this where you do alert

```
//alert($('div.price_listing_container:visible').length);
var myVar;
eval('myVar = '+$('div.price_listing_container:visible').length+';'); 
```

When you assign any thing to new variable it shares the reference, and if the value of referenced memory is changed than the new variable is also changed. by this code it will not happen.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-05T07:40:36.443

这段代码也对我有用：

```
$('#content').children('div:visible').length
$('#content').children('div:hidden').length 
```

# python - 在什么情况下相等的字符串共享相同的引用？

> ID：11611750
> 
> 赞同：9
> 
> 时间：2012-07-23T11:35:27.927
> 
> 标签：python, string, reference, immutability

我已经搜索了网络和堆栈溢出问题，但无法找到这个问题的答案。我所做的观察是，在 Python 2.7.3 中，如果您为两个变量分配相同的单个字符串，例如

```
>>> a = 'a'
>>> b = 'a'
>>> c = ' '
>>> d = ' ' 
```

然后变量将共享相同的引用：

```
>>> a is b
True
>>> c is d
True 
```

对于一些较长的字符串也是如此：

```
>>> a = 'abc'
>>> b = 'abc'
>>> a is b
True
>>> '  ' is '  '
True
>>> ' ' * 1 is ' ' * 1
True 
```

但是，在很多情况下（出乎意料地）没有共享引用：

```
>>> a = 'a c'
>>> b = 'a c'
>>> a is b
False
>>> c = '  '
>>> d = '  '
>>> c is d
False
>>> ' ' * 2 is ' ' * 2
False 
```

有人可以解释一下原因吗？

我怀疑解释器和/或某些缓存机制可能会进行简化/替换，这些缓存机制利用 python 字符串在某些特殊情况下是不可变的这一事实进行优化，但我知道什么？我尝试使用 str 构造函数和 copy.deepcopy 函数制作字符串的深层副本，但字符串仍然不一致地共享引用。

我遇到问题的原因是因为我在一些单元测试中检查对字符串的引用是否不相等，我正在为新型 python 类的克隆方法编写。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T11:37:37.440

何时缓存和重用字符串的细节取决于实现，可以从 Python 版本更改为 Python 版本，并且不能依赖。如果要检查字符串是否相等，请使用`==`，而不是`is`。

在 CPython（最常用的 Python 实现）中，源代码中出现的字符串字面量始终是 intern，因此如果相同的字符串字面量在源代码中出现两次，它们最终将指向同一个字符串对象。在 Python 2.x 中，您还可以调用内置函数[`intern()`](http://docs.python.org/2/library/functions.html#intern)来强制执行特定字符串，但实际上您不应该这样做。

**编辑**关于检查属性是否在实例之间不正确共享的实际目的：这种检查仅对可变对象有用。对于不可变类型的属性，共享对象和非共享对象之间没有语义差异。您可以通过使用从测试中排除不可变类型

```
Immutable = basestring, tuple, numbers.Number, frozenset
# ...
if not isinstance(x, Immutable):    # Exclude types known to be immutable 
```

请注意，这也将排除包含可变对象的元组。如果你想测试这些，你需要递归地下降到元组中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T11:53:04.550

在 CPython 中，作为实现细节[，空字符串是 shared](http://hg.python.org/cpython/file/b127046831e2/Objects/unicodeobject.c#l184)，其代码点在 Latin-1 范围内的单字符字符串也是如此。你不应该*依赖*这个，因为它可以绕过这个特性。

您可以使用;请求要*实习的字符串* [`sys.intern`](http://docs.python.org/dev/library/sys.html#sys.intern)这在某些情况下会自动发生：

> 通常，Python 程序中使用的名称是自动实习的，用于保存模块、类或实例属性的字典具有实习键。

`sys.intern`暴露出来，以便您可以使用它（在分析之后！）以提高性能：

> 留置字符串对于在字典查找中获得一点性能很有用——如果字典中的键被留存，并且查找键被留存，则键比较（在散列之后）可以通过指针比较而不是字符串比较来完成。

请注意，这[`intern`](http://docs.python.org/library/functions.html#intern)是 Python 2 中的内置函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T11:38:15.863

我认为这是一个实现和优化的事情。如果字符串很短，它们可以（并且经常？）“共享”，但你不能依赖它。一旦你有更长的字符串，你会发现它们是不一样的。

```
In [2]: s1 = 'abc'
In [3]: s2 = 'abc'

In [4]: s1 is s2
Out[4]: True 
```

更长的字符串

```
In [5]: s1 = 'abc this is much longer'
In [6]: s2 = 'abc this is much longer'

In [7]: s1 is s2
Out[7]: False 
```

用于`==`比较字符串（而*不是*运算符`is`）。

--

OP 的观察/假设（在下面的评论中）这可能是由于令牌的数量似乎得到以下支持：

```
In [12]: s1 = 'a b c'
In [13]: s2 = 'a b c'

In [14]: s1 is s2
Out[14]: False 
```

如果与`abc`上面的初始示例相比。

# mysql - 转化为教义

> ID：11611753
> 
> 赞同：0
> 
> 时间：2012-07-23T11:35:36.090
> 
> 标签：mysql, doctrine, doctrine-1.2

```
SELECT id, forename, surname, created 
FROM name n 
WHERE created = (SELECT MAX(created) 
                          FROM name 
                          GROUP BY id 
                          HAVING id = n.id); 
```

架构.yml：

```
 id:
      type: integer(4)
      fixed: false
      unsigned: true
      primary: true
      autoincrement: true
  lcreated:
      type: timestamp(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  forname/surname:
      type: integer(4)
      fixed: false
      unsigned: true
      primary: false
      notnull: true
      autoincrement: false 
```

我确实有一个额外的名字和姓氏的表格！

我怎样才能将其转换为学说 1.2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:54:10.000

试试这个：

```
$query = Doctrine_Query::create()
  ->from('Name m')
  ->where('m.created = (SELECT MAX(gn.created) 
                          FROM Name gn
                          GROUP BY gn.id 
                          HAVING m.id = gn.id)'); 
```

[链接到文档](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/dql-doctrine-query-language.html#subqueries)

# java - 在android中显示图像和html内容的最佳视图

> ID：11611757
> 
> 赞同：3
> 
> 时间：2012-07-23T11:36:12.403
> 
> 标签：java, android, android-layout, android-webview

*我正在开发一个可以阅读电子邮件的应用程序。我正在使用 textview / edittext 来显示邮件。现在我可以将电子邮件内容作为字符串获取并显示出来。但是哪个是显示带有 html 内容和图像的电子邮件的最佳视图？请帮帮我。谢谢 :) 编辑：我按照 SO 朋友的建议使用了 webview（感谢@Andro Selva，@CFlex）。但我面临一个问题，它显示了电子邮件的正文两次！:( 一次作为文本/纯文本，再次作为文本/html。 ![当发送空白邮件时，它是一个加载了电子邮件消息的 webview 的截图](../Images/a361ae14b93f9c27811a0b2c73c2c099.png) 我尝试了以下代码来加载 webview。

```
webViewBody.loadData(details[3], "text/html", "UTF-8");
//webViewBody.loadDataWithBaseURL(null, details[3] , "text/html", "utf-8", null); 
```

这里的 details[3] 是电子邮件的内容。我在这里想念什么！？:(请帮帮我。

已编辑：我添加了用于获取消息内容以在下面显示电子邮件内容的代码。

```
 public void getContent(Message msg)
{
     try
     {
        Object o = msg.getContent();
            if (o instanceof String) 
        {
        if(((String) o).equalsIgnoreCase(""))
        {
        }
                    else
        {
           messageBody = (String)o+"STRING!!";
        }
       }
       else if (o instanceof Multipart) 
       {
        Multipart mp = (Multipart)o;
            int count3 = mp.getCount();
        for (int j = 0; j < count3-1; j++)
        {
            // Part are numbered starting at 0
            BodyPart b = mp.getBodyPart(j);
            Object o2 = b.getContent();
            if (o2 instanceof String) 
            {
                if(((String) o).equalsIgnoreCase(""))
                {
                }
                                    else
                {
                    messageBody = (String)o2+"MULTIPART!!"; 
                }
            }
        } //End of for
       }
       else if (o instanceof InputStream) 
       {
        //System.out.println("**This is an InputStream message**");
        InputStream is = (InputStream)o;
        // Assumes character content (not binary images)
                    //messageBody = convertStreamToString(is)+"INPUT STREAM!!";
            int c;
                    while ((c = is.read()) != -1) 
                    {
                    messageBody = convertToString(is)+"INPUT STREAM!!";
                System.out.println(messageBody);
                    }
       }
    }
        catch (Exception ex)
    {
    System.out.println("Exception arise at get Content");
    ex.printStackTrace();
    }

    //TODO TEST CODES
    try
    {
        String contentType = msg.getContentType();
        //          System.out.println("Content Type : " + contentType);
        Multipart mp = (Multipart) msg.getContent();
        int count = mp.getCount();
        for (int i = 0; i < count; i++)
        {
            dumpPart(mp.getBodyPart(i));
        }
    }
    catch (Exception ex)
    {
        System.out.println("Exception arise at get Content");
        ex.printStackTrace();
    }
}

public String convertToString(InputStream inputStream)
{
    StringBuffer string = new StringBuffer();
    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
    String line;
    try 
    {
        while ((line = reader.readLine()) != null) 
        {
            string.append(line + "\n");
        }
    }
    catch (IOException e) 
    {
    }
    return string.toString();
} 
```

该控件始终处于“else if (o instanceof InputStream)”状态。所以它总是流式传输电子邮件并显示完整的电子邮件内容。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:46:47.557

我认为您将需要实现 a `WebView`，因为它可以格式化 html**并**显示图像。

AFAIK，带有 html 的 textView 可以格式化内容，但不能显示图像。

**编辑**：以下应该工作：

```
webViewBody.loadData(details[3], "text/html", null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:09:56.210

可能您在同一封电子邮件中显示所有可以由 html 和纯文本内容组成的电子邮件内容。这是因为这种电子邮件是多部分内容，您需要拆分它，您还需要将附件和图像（嵌入）分开，看看您的“详细信息”是否没有返回多部分内容正文。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T05:06:20.300

仅因为您编写了两次，详细信息才会显示两次：

```
webViewBody.loadData(details[3], "text/html", "UTF-8");
webViewBody.loadDataWithBaseURL(null, details[3] , "text/html", "utf-8", null); 
```

可能的解决方案：使用`loadData()`或`loadDataWithBaseURL()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T10:09:06.360

添加这些行解决了问题！

```
 MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
    CommandMap.setDefaultCommandMap(mc); 
```

感谢所有帮助我解决这个问题的人。:)

# asp.net - 使用 jquery.ajax 传递大数据

> ID：11611758
> 
> 赞同：1
> 
> 时间：2012-07-23T11:36:20.737
> 
> 标签：asp.net, jquery

我正在使用 asp.net 和 jQuery 1.6

在我的函数中，我需要将 html 标签作为数据参数传递给用 C# 编写的服务器端方法。在我的数据库中，该列具有 Blob 数据类型。
我能够成功提交数据到 528b 但如果我提交大数据......我无法在服务器端发送。

当我传递小数据时，它可以工作并插入一行。但是如果我传递大约 17Kb 的数据，那么这不会转到服务器端，而是在 jquery 中提示我一个未定义的错误。

以下是 Ajax 代码：

```
$.ajax({
    type: "POST",
    url: "Post.aspx/savePost",
    data: "{Title:'" + Title + "',Html:'" + Html + "'}",
    contentType: "application/json",
    dataType: "json",
    success: function (data) {
        if (data == undefined) {
            alert("Error : 219");
        }
        else {
            alert(data.d);
        }
    },
    error: function (data) {
        if (data == undefined) {
            alert("Error : 465");
        }
        else {
            alert("Error : 468 " + data.d);
        }
    }
}); 
```

以下是C#代码

```
[System.Web.Services.WebMethod]
public static string savePost(string Title,string Html)
{
    string retMsg = "Not Saved";
    Post bp = new Post();
    int count = 0;
    count = bp.mySavePost(Title,Html);
    if (count > 0)
    {
        retMsg = "Post Save Successfully.";
    }
    return retMsg;
}

protected int mySavePost(string Title, string Html)
{
    int count=0;
    try
    {
        string rawQuery = "INSERT INTO temp_posts (Title,HTML)"
                        + " VALUES(?Title,?HTML)";
        cmd = new MySqlCommand();
        cmd.CommandText = rawQuery;
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Parameters.Add("?Title", MySqlDbType.VarChar).Value = Title;
        cmd.Parameters.Add("?Html", MySqlDbType.Blob).Value = Html;
        count = c.insertData(cmd);
     }
     catch(Exception ex){}
 } 
```

请用你宝贵的知识指导我。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:41:04.153

非常感谢所有为这个线程付出最大努力的人。

最后在我的一位前辈的帮助下，我发现了我的代码中缺少的地方。

当我将 html 标签作为数据参数传递给用 C# 编写的服务器端方法时，`jQuery.ajax();`我需要对数据进行编码。

当我`escape()`在 javascript 中使用该函数对其进行编码时，它起作用了。数据被提交到数据库。

```
var encodedHTML = escape(Html);         //here encoding Html.
$.ajax({  
    type: "POST",   
    url: "Post.aspx/savePost",  
    data: "{Title:'" + Title + "',Html:'" + encodedHTML + "'}",  
    contentType: "application/json",  
    dataType: "json",  
    success: function (data) {  
        if (data == undefined) {  
            alert("Error : 219");  
        }  
        else {  
            alert(data.d);  
        }  
    },  
    error: function (data) {  
        if (data == undefined) {  
            alert("Error : 465");  
        }  
        else {  
            alert("Error : 468 " + data.d);  
        }  
    }  
}); 
```

谢谢大家 ：）

# c# - 后台进程

> ID：11611759
> 
> 赞同：0
> 
> 时间：2012-07-23T11:36:21.623
> 
> 标签：c#, .net, multithreading, asp.net-mvc-3

我有一个 Web 应用程序，我需要一个特定的进程在后台（一直）运行并不时更新数据库。最好的方法是什么？使用方法创建控制器并在后台线程中运行它？还有其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T11:41:25.160

最好的办法是创建一个单独的应用程序，您可以将其作为 Windows 服务运行，或者，如果它只是定期更新，则作为计划任务运行。

使用计划任务的好处是您不必编写计划程序代码——这一切都由操作系统为您处理。您的应用程序只包含更新数据库所需的代码。

通过将其与您的 Web 应用程序完全分离，它使其更安全且更易于维护（您可以独立地更新 Web 应用程序或服务）。

# android - Android AVD 中忽略方向更改

> ID：11611761
> 
> 赞同：2
> 
> 时间：2012-07-23T11:36:31.487
> 
> 标签：android, android-emulator, android-orientation

我在 Linux 上的 Eclipse 中设置了 Android SDK，我正在尝试一些 AVD。我创建了一个 2.3.3 (API 10) 设备和一个 4.1 (API 16) 设备。两者都使用对话框中提供的默认值进行创建。

当我运行 2.3.3 AVD 并按 ctrl + F11 更改方向时，屏幕的方向从纵向变为横向，键盘移动到屏幕下方但所有活动（我的以及标准应用程序）继续绘制在纵向模式下。配置更改似乎没有被注册和处理。

4.1 AVD 按预期工作：屏幕方向发生变化，正在运行的活动被终止并在布局区域中重新绘制。

这是我可以修复的错误还是配置问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:51:39.253

是的，这是一个错误：[问题 13189：在 2.3 上的模拟器上，方向不会从横向变为纵向](http://code.google.com/p/android/issues/detail?id=13189) 它已针对 2.3.3 后的 AVD 图像进行了修复，但似乎该修复从未向后移植到 2.3.x

解决方法是将*键盘支持*作为硬件属性添加到 Gingerbread AVD，尽管如错误报告中所述，这并不完美。

# android - 在eclipse中引用android.jar

> ID：11611762
> 
> 赞同：0
> 
> 时间：2012-07-23T11:36:34.863
> 
> 标签：android, dalvik

我的要求是将修改后的内容引用`android.jar`到 android 项目中。新的 android.jar 有一些特定于平台的更改。当我尝试将其作为外部 jar 引用时，出现以下错误：

> 转换为 Dalvik 格式失败，错误 1

如何`android.jar`在我的项目中使用新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:13:00.347

将您的 android.jar 文件添加到项目的“libs”文件夹中，然后右键单击该文件并选择“构建路径”选项，然后选择“添加到构建路径”

# c# - 随机排列一个列表 I have a list of objects that I want to randomly arrange or jumble up. Is this possible? The list is built up from company products. I take the top 2 of each company and the add the rest to another list. I want to jumble 问问题 问问题 2012-07-23T11:36:56.703 3994 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a list of objects that I want to randomly arrange or jumble up. Is this possible? The list is built up from company products. I take the top 2 of each company and the add the rest to another list. I want to jumble the second list. Thanks for any help Try this: var rnd = new Random(); var shuffledList = list.OrderBy(x => rnd.Next()).ToList(); This works fine, because OrderBy implementation first creates a list of keys and then sorts using the generated keys. So the lamba expression is only called once for each item. During the sort processes, each item in the list has it's own, random sort key. c#listshuffle 4 3 回答 3 This answer is useful 5 尝试这个： var rnd = new Random(); var shuffledList = list.OrderBy(x => rnd.Next()).ToList(); 这很好用，因为 OrderBy 实现首先创建一个键列表，然后使用生成的键进行排序。因此，lamba 表达式仅对每个项目调用一次。在排序过程中，列表中的每个项目都有自己的随机排序键。 于 2012-07-23T11:43:30.047 回答 This answer is useful 1 You don't need O(N*LogN) operation. Just use FisherYatesShuffle See Also: http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle 于 2012-07-23T12:06:38.897 回答 This answer is useful 1 Try NBuilder - it builds lists of objects, and provides inclemently generated values for properties (you also can provide any value manually): var products = Builder<product>.CreateListOfSize(10).Build(); If you want (non-incremental) random items, you can pick them from any collection: var randomProducts = Pick<product>.UniqueRandomList(3).From(products); 于 2012-07-23T12:21:37.410 回答 Related 2 iphone - 谷歌 OAuth 错误 -1001 1 javascript - 在 JQuery 中弹出？ 1 android - 已发布的 apk 崩溃，而手动安装的签名不会 4 java - 如何制作地图 不可修改？ 1 php - application.ini 中的 Zend_Cache 默认 cache_dir 1 html - div元素内的CSS3图像动画拉伸 1 java - 如何通过使用 DataInputStream 类指定偏移量和字节长度将字节读入数组？ 1 php - 以编程方式更改 Magento 1.7.02 中的产品布局 3 c# - 读取文本文件 C# 2 php - 自定义 Wordpress 导航栏 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</product></product>

> ID：11611764
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, list, shuffle

I have a list of objects that I want to randomly arrange or jumble up. Is this possible? The list is built up from company products. I take the top 2 of each company and the add the rest to another list. I want to jumble the second list.

Thanks for any help

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:43:30.047

尝试这个：

```
var rnd = new Random();
var shuffledList = list.OrderBy(x => rnd.Next()).ToList(); 
```

这很好用，因为 OrderBy 实现首先创建一个键列表，然后使用生成的键进行排序。因此，lamba 表达式仅对每个项目调用一次。在排序过程中，列表中的每个项目都有自己的随机排序键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:06:38.897

You don't need O(N*LogN) operation. Just use [FisherYatesShuffle](https://stackoverflow.com/a/9593077/932418)

See Also: [http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:21:37.410

Try [NBuilder](http://nbuilder.org/) - it builds lists of objects, and provides inclemently generated values for properties (you also can provide any value manually):

```
var products = Builder<Product>.CreateListOfSize(10).Build(); 
```

If you want (non-incremental) random items, you can pick them from any collection:

```
var randomProducts = Pick<Product>.UniqueRandomList(3).From(products); 
```

# jquery-ui - jQuery UI – 可拖动的“捕捉”事件

> ID：11611765
> 
> 赞同：12
> 
> 时间：2012-07-23T11:37:10.217
> 
> 标签：jquery-ui, jquery-ui-draggable

我正在寻找一种绑定`snap`事件的方法。

当我在我的表面上拖动一个元素并且*可拖动*元素被捕捉到声明的*捕捉*位置时，我想触发一个事件。

像这样的东西：

```
$(".drag").draggable({
  snap: ".grid",
  snaped: function( event, ui ) {}
}); 
```

加分项：引用`.grid`了*可拖动*元素被*捕捉*的元素。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-24T13:25:05.943

小`draggable`部件（目前）还没有公开这样的事件。您可以修改它并维护您的自定义版本，或者更好的是，从中派生一个新小部件并在那里实现新事件。然而，还有第三种方式。

从[这个问题](https://stackoverflow.com/q/5177867/464709)`snapElements`中，我们知道小部件在其属性中存储了一个潜在“可对齐”元素的数组。反过来，该数组中的每个元素都会公开一个`snapping`属性，`true`即可拖动助手当前是否对齐到该元素，`false`否则（助手可以同时对齐多个元素）。

该`snapElements`数组会针对每个事件进行更新，因此它在处理程序`drag`中始终是最新的。`drag`从那里，我们只需要使用[data()](http://api.jquery.com/data/)`draggable`从关联元素中获取小部件实例，并调用它的方法来引发我们自己的事件（实际上是在幕后）。顺便说一句，我们可以[$.extend()](http://api.jquery.com/jQuery.extend/)使用jQuery 对象包装捕捉到的元素：`_trigger()``snapped``dragsnapped``ui`

```
$(".drag").draggable({
    drag: function(event, ui) {
        var draggable = $(this).data("draggable");
        $.each(draggable.snapElements, function(index, element) {
            if (element.snapping) {
                draggable._trigger("snapped", event, $.extend({}, ui, {
                    snapElement: $(element.item)
                }));
            }
        });
    },
    snap: ".grid",
    snapped: function(event, ui) {
        // Do something with 'ui.snapElement'...
    }
}); 
```

但是，上面的代码仍然可以改进。就目前而言，只要可拖动的助手保持与元素对齐，就会`snapped`为每个`drag`事件（发生*很多）触发一个事件。*此外，捕捉结束时不会触发任何事件，这不是很实用，并且有损于此类事件成对发生（`snapped-in`，`snapped-out`）的约定。

幸运的是，`snapElements`数组是持久的，所以我们可以用它来存储状态。我们可以`snappingKnown`为每个数组元素添加一个属性，以跟踪我们已经`snapped`为该元素触发了一个事件。此外，我们可以使用它来检测自上次调用以来元素已被抢购并做出相应的反应。

请注意，下面的代码没有引入另一个事件，而是`snapped-out`选择在对象中传递一个附加`snapping`属性（反映元素的当前状态）`ui`（当然，这只是一个偏好问题）：

```
$(".drag").draggable({
    drag: function(event, ui) {
        var draggable = $(this).data("draggable");
        $.each(draggable.snapElements, function(index, element) {
            ui = $.extend({}, ui, {
                snapElement: $(element.item),
                snapping: element.snapping
            });
            if (element.snapping) {
                if (!element.snappingKnown) {
                    element.snappingKnown = true;
                    draggable._trigger("snapped", event, ui);
                }
            } else if (element.snappingKnown) {
                element.snappingKnown = false;
                draggable._trigger("snapped", event, ui);
            }
        });
    },
    snap: ".grid",
    snapped: function(event, ui) {
        // Do something with 'ui.snapElement' and 'ui.snapping'...
        var snapper  = ui.snapElement.attr("id"),snapperPos = ui.snapElement.position(),
            snappee  = ui.helper.attr("id"),     snappeePos = ui.helper.position(),
            snapping = ui.snapping;
        // ...
    }
}); 
```

[您可以在此处](http://jsfiddle.net/fhamidi/PjmJe/1/)测试此解决方案。

最后，另一个改进可能是使`snapped`事件*可取消*，就像`drag`事件一样。为了实现这一点，如果对返回的调用之一，我们将不得不`false`从我们的处理程序返回。不过，在实现此功能之前，您可能需要三思而后行，因为在一般情况下，取消对 snap-in 或 snap-out 的拖动操作看起来并不是一个非常用户友好的功能。`drag``_trigger()``false`

***更新：***从 jQuery UI 1.9 开始，[键`data()`成为小部件的完全限定名称，点被替换为破折号](http://jqueryui.com/upgrade-guide/1.9/#changed-naming-convention-for-data-keys)。因此，上面用于获取小部件实例的代码变为：

```
var draggable = $(this).data("ui-draggable"); 
```

代替：

```
var draggable = $(this).data("draggable"); 
```

1.9 中仍支持使用非限定名称，但已弃用，并且将在 1.10 中删除支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:14:44.563

在 jquery-ui 1.10.0 中，上面的代码不起作用。拖动功能是：

```
drag: function(event, ui) {
  var draggable = $(this).data("ui-draggable")
  $.each(draggable.snapElements, function(index, element) {
    if(element.snapping) {
      draggable._trigger("snapped", event, $.extend({}, ui, {
        snapElement: $(element.item)
      }));
    }
  });
} 
```

# c# - 如何找到不包含在大括号内的文本

> ID：11611777
> 
> 赞同：1
> 
> 时间：2012-07-23T11:37:42.443
> 
> 标签：c#, regex

我有一个像`test{0:##}test2{Order:C}test3`. 我需要使用正则表达式`test`并找到不在`test2`.`test3``{...}`

对于花括号 {0:##} 内的文本，我使用了

```
@"{0:(.*?)}" 
```

但是尝试不在大括号内的文本，面临一些困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:16:17.447

如果没有嵌套大括号，您可以使用以下内容：

```
(?<=^|})[^{]+(?={|$) 
```

这使用lookbehind 和lookahead 来查找嵌入`}...{`或由一端的字符串的开头或结尾分隔的片段。

快速 PowerShell 测试：

```
PS> [regex]::Matches('test{0:##}test2{Order:C}test3', '(?<=^|})[^{}]+(?={|$)') | select Value

Value
-----
test
test2
test3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:36:05.637

与其匹配大括号外的所有内容（如 Joey 所建议的那样），通过仅匹配大括号的表达式将字符串拆分为数组可能更容易。

```
result = Regex.Split(teststring, "\{[^}]*\}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:24:43.807

如果文本始终采用相同的格式，为什么不使用该`Split`功能？

# android - 单击设备的搜索按钮时如何限制关闭警报对话框？

> ID：11611780
> 
> 赞同：0
> 
> 时间：2012-07-23T11:37:54.010
> 
> 标签：android, android-widget

我必须限制在单击设备的搜索按钮时关闭警报对话框，如何在 android 中实现它？场景：我的应用程序有一个带有数据列表的活动，用户可以选择列表中的数据并对其执行编辑、删除等操作，如果用户尝试按下编辑，删除应用程序的按钮而不从列表中选择项目然后它会弹出警报对话框，并带有“请选择一个项目”的消息，并带有确定按钮。因此，如果用户按下设备的搜索按钮，则弹出警报对话框时，警报对话框将关闭，我只想限制警报对话框的关闭。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:52:27.317

试试这个 ：

```
dialog.setCanceledOnTouchOutside(false); 
```

它将**限制只关闭**警报对话框的外部点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:42:24.063

将关键侦听器设置为您的`AlertDialog Builder`并跟踪`KeyEvent.KEYCODE_SEARCH`. 或在您的活动中覆盖`onKeyDown()`..

对于类似的`AlertDialog Builder`东西，

```
.setOnKeyListener(new DialogInterface.OnKeyListener() {   
    @Override
    public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_SEARCH && event.getRepeatCount() == 0) {
            return true; 
        }
        return false; 
    }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T11:43:13.017

`Dialog.setCancelable(false);` 在显示对话框之前使用

否则，您可以像其他人在这里解释的那样处理按钮按下

# ios - UIImagePicker 设置多个图像视图

> ID：11611783
> 
> 赞同：1
> 
> 时间：2012-07-23T11:38:06.787
> 
> 标签：ios, uiimageview, uibutton, uiimagepickercontroller, ibaction

我有几个按钮。当按下任一按钮时，它会弹出并 alertView 要求用户拍照或从相机胶卷中选择。现在我遇到的问题是我有 12 个按钮和 12 个 UIImageViews。所有按钮都有自己的动作，可以弹出警报并允许用户选择任一选项。现在在 didFinishPickingMediaWithInfo 方法中，我将图像从相机或相机胶卷传递到第一个 imageView。这一切都很好，但是如果我想选择按钮 2，它会触发另一个带有另一个标签的警报，我想设置 imageView 2 等等（不替换 imageView1）。我需要一种方法在 didFinishPickingMediaWithInfo 中根据弹出警报的按钮选择来区分要设置的 imageView。

这是按钮的操作。

```
-(IBAction) addPhoto1:(id) sender {

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Image Source" message:@"Take a photo or select a previously taken photo" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Take Photo", @"Select Photo", nil];
    [alert show];
    alert.tag = 101;
    [alert release];

} 
```

并警告`clickedButtonAtIndex`：

```
- (void)alertView:(UIAlertView *)alert clickedButtonAtIndex:(NSInteger)buttonIndex 
{

    if (alert.tag == 101) {

        if (buttonIndex == 1) {
            //Take photo
            [self performSelector:@selector(takePicture:) withObject:nil afterDelay:0.0];
        }
        else if (buttonIndex == 2){
            //Camera roll
            [self performSelector:@selector(pictureAlbum:) withObject:nil afterDelay:0.0];
        }
        else if (buttonIndex == 0) {
            NSLog(@"Cancel");
        }
    }
} 
```

这是`didFinishPickingMediaWithInfo`：

```
-(void) imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

    if (picker.sourceType == UIImagePickerControllerSourceTypeCamera) {

        UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"]; 
        NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];

        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

        [library writeImageToSavedPhotosAlbum:[image CGImage] metadata:dict completionBlock:nil];

        if (addFirstImage.tag == 1001) {
            firstImage.image = [info objectForKey:UIImagePickerControllerOriginalImage];
           firstImage.layer.cornerRadius = 5;
           firstImage.layer.masksToBounds = YES;

        }
        if (addSecondImage.tag == 1002) {            
           secondImage.image = [info objectForKey:UIImagePickerControllerOriginalImage];
           secondImage.layer.cornerRadius = 5;
           secondImage.layer.masksToBounds = YES;

        }
    }
} 
```

现在显然这是不对的，根据最初按下的警报按钮设置正确的 imageViews 图像的最佳方法是什么？（addFirstImage 和 addSecondImage 都是通过 IB 链接的按钮）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:23:05.633

好的，我想出了如何做到这一点。首先，我在接口文件中创建了一个名为 myTag 的 ivar int

```
int myTag; 
```

然后我在 viewDidLoad 中用标签号标记了我的所有按钮，即 button1.tag = 1001（我的 12 个按钮为 1012），

然后，我为每个按钮创建了一个 Action，而不是 12 个。并通过 IB 将所有这些连接到这一操作。

```
- (IBAction)takePhoto:(UIButton*)sender {

UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Image Source" message:@"Take a photo or select a previously taken photo" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Take Photo", @"Select Photo", nil];
[alert show];
alert.tag = 101;
[alert release];

if (sender.tag == 1001){

    NSLog(@"You clicked button 1");
    myTag = 1001;

}

if (sender.tag == 1002){

    NSLog(@"You clicked button 2");
    myTag = 1002;
} 
```

}

然后我检测按下了什么按钮并将一个 int 值传递给 myInt ivar

然后在我的 didFinishPickingMediaWithInfo 中我这样做了！

```
if (picker.sourceType == UIImagePickerControllerSourceTypeCamera) {

    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"]; 
    NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];

    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    [library writeImageToSavedPhotosAlbum:[image CGImage] metadata:dict completionBlock:nil];

    if (myTag == 1001){

        firstImage.image = [info objectForKey:UIImagePickerControllerOriginalImage];
        firstImage.layer.cornerRadius = 5;
        firstImage.layer.masksToBounds = YES;

    }

    if (myTag == 1002) {
        secondImage.image = [info objectForKey:UIImagePickerControllerOriginalImage];
        secondImage.layer.cornerRadius = 5;
        secondImage.layer.masksToBounds = YES;
    }

    [picker dismissModalViewControllerAnimated:YES];

} 
```

一切正常！非常感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:13:11.713

为什么不使用动作的“发送者”来“记住”首先按下哪个按钮？使用 IBOutletCollections，以相同的索引排序：

```
@property (...) IBOutletCollection(UIButton) allYourButtons;

@property (...) IBOutletCollection(UIImageView) allYourImageViews;
// I suppose that both Collections objects have 'tags' (set in XIB file)
// a UIButton and the corresponding UIImageVIew have the SAME tag

@property (...) NSInteger clickedButtonIndex;

- (IBAction) imageViewWasPressed:(id)sender
{
    //keep a reference to the specific button that launched the action
    self.clickedButtonIndex = [(UIButton *)sender tag]; 

    [self presentAlertViewForPictureChoice];
} 
```

然后，您`clickedButtonIndex`在`UIAlertView`委托方法中使用来查找`allYourImageViews`应该更新其图像的 UIImageVIew ...

```
- (UIImageView *)imageToUpdateForSelectedIndex:(NSInteger)anIndex
{
    UIImageView *result = nil;
    for (UIImageView *imageView in self.allYourImageViews){
        if(imageView.tag == anIndex){
             result = imageView;
            break;
        }
    }
    return result;

} 
```

**（编辑）** 好的，将 UIButton 与 UIImageView 关联的另一种方法是创建一个子类

```
// a new UIButton subclass

ButtonWithImageView : UIButton

@property (...) IBOutlet UIImageView *relatedImageView;

//IBOutlet enables you to directly link a Button with its imageVIew in your XIB

// in your controller

@property (...) ButtonWithImageView *selectedButton;

- (IBAction)buttonWasPressed:(id)sender
{
    ...
    self.selectedButton = (ButtonWithImageView *)sender;

} 
```

然后你所要做的就是编辑`self.selectedButton.relatedImageView`

# c - 将 32 位转换为浮点值

> ID：11611787
> 
> 赞同：5
> 
> 时间：2012-07-23T11:38:22.517
> 
> 标签：c, linux, embedded

我正在开发一个 DSP 处理器，以在 Linux 系统上使用 C 实现 BFSK 跳频机制。在程序的接收器部分，我得到一组样本的输入，我使用 Goertzel 算法对其进行解调，以确定接收到的位是 0 还是 1。

现在，我能够单独检测这些位。但是我必须以浮点数组的形式返回数据进行处理。因此，我需要将接收到的每组 32 位打包成一个浮点值。对，我正在做类似的事情：

```
uint32_t i,j,curBit,curBlk;
unint32_t *outData; //this is intiallized to address of some pre-defined location in DSP memory
float *output;
for(i=0; i<num_os_bits; i++) //Loop for number of data bits
{ 

//Demodulate the data and set curBit=0x0000 or 0x8000

curBlk=curBlk>>1;
curBlk=curBlk|curBit;

bitsCounter+=1;
    if(i!=0 && (bitsCounter%32)==0) //32-bits processed, save the data in array
    {
        *(outData+j)=curBlk;
        j+=1;
        curBlk=0;
    }
}

output=(float *)outData; 
```

现在，`output`数组的值只是`outData`小数点后为 0 的数组的值。例如：如果`output[i]=12345``outData[i]=12345.0000'。

但是在测试程序时，我正在使用浮点数组生成位的样本测试数据 `float data[] ={123.12456,45.789,297.0956};`

因此，在解调之后，我期望浮点数组`output`具有与数组相同的值`data`。是否有其他方法可以将 32 位数据转换为浮点数。我是否应该将接收到的位存储到一个`char`数组中，然后将其转换为浮点数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T11:56:41.383

不知道我是否明白你的意思——你顺序获得位，如果你有 32 位，你想从他们那里得到一个浮点数？

关于什么：

```
union conv32
{
    uint32_t u32; // here_write_bits
    float    f32; // here_read_float
}; 
```

可以像这样在线使用：

```
float f = ((union conv32){.u32 = my_uint}).f32; 
```

或者使用辅助变量：

```
union conv32 x = {.u32 = my_uint};
float f = x.f32; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T13:59:29.540

您需要逐字复制位模式而不调用任何隐式转换。最简单的方法是在取消引用之前获取数据的地址并将其重新解释为指向中间“载体”类型的指针。

考虑一下：

```
float source_float = 1234.5678f ;
uint32_t transport_bits = *((uint32_t*)&source_float);
float destination_float = *((float*)&transport_bits); 
```

中间结果`transport_bits`取决于目标，在我对 x86 的测试中，它是 0x449a522b，这是该平台上单精度浮点数的位表示（浮点表示和字节序相关）。

无论哪种方式，结果`destination_float`都与`source_float`通过`uint32_t` `transport_bits`.

然而，这确实要求发起者的浮点表示与可能不是给定的接收者的浮点表示相同。这有点不可移植，您的代码不起作用的事实可能表明发送者和接收者之间的表示确实不同。不仅FP表示必须相同，而且字节序也必须相同。如果它们不同，您的代码可能必须对位进行重新排序并通过提取指数和尾数来计算浮点等效项中的一项或两项。因此，您需要确保位的传输顺序与您重新组装它们的顺序相同。有很多机会会出错。

# jquery - 如何防止浏览器在 Ajax 提交后被重定向到 FORM 操作？

> ID：11611793
> 
> 赞同：0
> 
> 时间：2012-07-23T11:39:06.253
> 
> 标签：jquery, ajax, coffeescript

我正在尝试通过 Jquery Ajax 提交上传多个文件。

一切正常，除了提交后，浏览器会转到表单中指定的 url，即使我添加了`Return False`.

如果我使用`$("#upload").serialize(),`而不是 a `FormData`，则不会重定向！这是我的 Coffeescript 代码：

```
# Initialization code
$("#upload").submit ->
  ajaxUpload()
  return false

# Handler
ajaxUpload = ->
  fd = new FormData()
  files = $("#uploadFiles")[0].files
  $.each files, (i, file) ->
    fd.append("file" + i, file)
  $.ajax
    type: $("#upload").attr("method"),
    url: $("#upload").attr("action"),
    data: fd,
    # data: $("#upload").serialize(),
    success: (data, text, xhr) ->
      debug "Success: " + JSON.stringify(data)
      loadEventAgain()
    error: (xhr, status) ->
      debug "Error: " + JSON.stringify(xhr)
  alert "done"
  return false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:46:44.013

提交事件处理程序通常会获取传递的事件对象。履行

```
ev.preventDefault();
//and optionally
return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:02:08.333

原来代码失败了......我需要包括：

```
processData: false
contentType: false 
```

防止 JQuery 做一些不那么理想的魔法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:43:49.803

在您的事件处理函数中，您应该使用`e.preventDefault();` 这可以防止默认操作，在您的情况下是表单提交。

# java - java - 如何在java中添加面板/ jpanel或任何包的任何面板到复合？（使用 RAP、SWT）

> ID：11611795
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:39:12.607
> 
> 标签：java, swt, panel, composite

我正在用 JAVA 创建一个 RAP 应用程序。我想要一个像主细节一样的 GUI。in which left side has panel that has a tree (like in windows 7) and on the right side there will be text fields which will be changing when different TreeItem is selected. 所以我必须添加两个面板，但我不知道如何将面板添加到复合材料中。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:58:49.200

SWT 是一回事，Swing 是另一回事。如果您已经用 SWT 编写了一些东西并且想要添加 Swing 组件，那么您必须使用 SWT/AWT Bridge。[您可以在此处](http://www.eclipse.org/articles/article.php?file=Article-Swing-SWT-Integration/index.html)找到有关如何执行此操作的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:49:02.767

使用 frame.getContentPane() 到主内容窗格。将其布局设置为 new GridLayout(1,2)。现在创建两个面板并将它们添加到框架中。[http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)

根据您想要做什么，还有更复杂的解决方案。例如，如果您想在左侧和右侧 cosumizable 之间划分空间，请使用 jsplitpanes ( [http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html) )。

# java - 在网络位置运行 Java 应用程序

> ID：11611806
> 
> 赞同：2
> 
> 时间：2012-07-23T11:40:01.143
> 
> 标签：java, networking, deployment

我们有一个 VPN 网络，并且在中心点我们保留了一个 java 应用程序（.jar 文件）。我们允许 VPN 系统的用户使用此应用程序 - 使用此解决方案有什么缺点？

至于优点——

1.  易于更新到新版本
2.  将文件存储在相对位置有助于将文件保存在中心位置

## 编辑

由于我们的应用程序在沙箱中运行，是否可以使用 JWS 访问 COM 端口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:54:24.473

我认为您所描述的内容适用于 Java Web Start - 我能想到的优势

*   减少带宽使用（JWS 将仅在文件已更新时下载文件，否则将使用本地缓存副本）。
*   使用特定 JVM 参数的可能性。
*   自动检查客户端配置（例如，JRE 版本必须至少为 xxxx，如果不下载它）。

可能还有更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:46:24.583

没关系。对于一个客户项目，我们也选择了这个解决方案。没关系，如果您有良好的带宽，并且在产生流量的应用程序上，运行时的延迟较低。

对于测试，我构建了一个 Sql-Wrapper，为对我们数据库的每次调用添加模拟延迟。所以我们在没有真正的 vpn 连接的情况下在运行时对应用程序有一种感觉。

# javascript - document.referrer 没有提供原始页面网址？

> ID：11611813
> 
> 赞同：0
> 
> 时间：2012-07-23T11:40:48.400
> 
> 标签：javascript, dom, iframe

我的脚本在 iframe 中的 iframe 中运行，我正在尝试获取根引荐来源网址（iframe 所在的 url）。它不工作。这是代码：

```
<script type="text/javascript">
    var referrer_url = document.referrer;
    document.write("You come from this url: " +referrer_url);
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:45:31.073

Document.referrer 并非在所有情况下都设置。

您应该使用`window.top.location.href.toString();`，但它要求它们都在同一个域中。

# forms - 斯卡拉，电梯 | SHtml.select - 如何从数据库中放入列表

> ID：11611814
> 
> 赞同：1
> 
> 时间：2012-07-23T11:40:47.867
> 
> 标签：forms, scala, lift

`select`我正在尝试将数据库中的一些值放入表单（ ）中：

```
val kateg = Kategoria.findAll.map(a => (a.id.toString , a.nazwa)) 
```

接下来是形式：

```
 bind("entry", xhtml,
        "kateg" -> SHtml.select(kateg, Empty, select ), 
       "temat" -> SHtml.text(temat, temat = _),
        "opis" -> SHtml.textarea(opis, opis = _, "cols" -> "80", "rows" -> "8"),
        "submit" -> SHtml.submit("Add", processEntryAdd)) 
```

然后我有错误：

```
Description Resource    Path    Location    Type
type mismatch;  found   : List[(java.lang.String, a.nazwa.type) for 
Some { val a: code.model.Kategoria }]  
required: Seq[(String, String)] Forma.scala 
/lift-todo-mongo/src/main/scala/code/snippet    
line 51 Scala Problem 
```

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:29:31.250

`SHtml.select(..)`允许您选择一个`String`值。它需要一个 Seq 元组（值：`String`，键`String`：）

在这种情况下，您可能需要编写：

```
val kateg = Kategoria.findAll.map(a => (a.id.toString , a.nazwa.is)) 
```

如果**nazwa**是`MappedString`类别实体的字段。即**kateg**应该有一种`Seq[(String, String)]`

但我建议您使用`SHtml.selectObj`选择类别实体而不是字符串名称值：

```
val kateg: Seq[(Kategoria, String)] = Kategoria.findAll.map(a => (a, a.nazwa.is))
SHtml.selectObj[Kategoria](kateg, Empty, (k: Kategoria) => { .. /* assign */ .. }) 
```

# list - 将动态密钥添加到匿名列表

> ID：11611815
> 
> 赞同：0
> 
> 时间：2012-07-23T11:41:00.110
> 
> 标签：list, c#-4.0

如何将动态密钥添加到匿名列表中，例如下面的 mydatetime：

```
DateTime myDateTime = DateTime.Parse(datepickerval, ukCulture.DateTimeFormat);
        var qid = (from p in db.Vw_INTERACTPEOPLE
                   select p
                   );

        var AvilList = new List<object>();
        var ddate = myDateTime.DayOfWeek.ToString().Substring(0, 3) + "Jul" + myDateTime.Day;
        foreach (var q in qid)
        {
            AvilList.Add(
                new
                {// Availability
                    Name = q.Fullname,
          here  >>> ddate = "Some Test"
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:54:06.133

正如上面亚当所说，没有办法使用列表来做到这一点，但是由于 Slickgrid 期望返回 Json，我只是在 .net 中构建了字符串，然后通过 JavaScriptSerializer 序列化程序返回它，然后在后面的代码中简单地使用 eval 来 de -序列化回一个数组。

# struts - 不使用 POI api 读取 excel 表

> ID：11611816
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:41:03.403
> 
> 标签：struts

我有一个紧急要求。从excel表中读取数据。是否有任何程序可以在不使用 apache poi api 的情况下从 excel 表中读取数据。我必须只使用支柱。

谢谢你，维普尔库马尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:57:08.690

What do you mean you "only have to use Struts"? If that means you cannot use any other library (and I hope it doesn't), you only have one way: implement an Excel parser yourself.

I strongly advise you against it, though. Why would you want to reinvent the wheel?

If not, then there are a couple of alternatives to help you:

1.  Apache POI
2.  JExcelApi

# java - 查询字符串属性之间的 DynamoDB

> ID：11611819
> 
> 赞同：0
> 
> 时间：2012-07-23T11:41:13.223
> 
> 标签：java, amazon, amazon-dynamodb

使用 来自 DynamoDB的[查询API。](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/API_Query.html)实体表具有散列和范围主键。范围列是字符串类型。在对范围键进行 BETWEEN 查询时，我得到了奇怪的结果：

![询问](../Images/e211596c0ab0749164a46c90b6f6ce2c.png) [大](https://i.imgur.com/VDBnx.png)

而且文档不是很清楚：

*BETWEEN ：大于或等于第一个值，小于或等于第二个值。对于 BETWEEN，AttributeValueList 必须包含两个相同类型的 AttributeValue 元素，String 或 Number（不是集合）。如果目标值大于或等于第一个元素并且小于或等于第二个元素，则目标属性匹配。如果项目包含的 AttributeValue 类型与请求中指定的类型不同，则该值不匹配。例如，{"S":"6"} 不与 {"N":"6"} 比较。此外，{"N":"6"} 不能与 {"NS":["6", "2", "1"]} 比较。*

任何人都可以解释这个结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:21:18.857

在比较 中`AttributeValue`，在比较值之前验证值类型。如果你检查`.equals(obj)`，`AttributeValue`那可能会给你一个更好的解释。

# c# - 从父母到孩子的位置改变的通知

> ID：11611821
> 
> 赞同：2
> 
> 时间：2012-07-23T11:41:22.263
> 
> 标签：c#, wpf

我有一个自定义控件，需要通知父级的布局更改。因此，如果父母重新安排孩子，我想计算新的视觉位置。不幸`ArrangeOverride`的是，孩子不会被调用，这是有道理的，因为在孩子控件内部的位置并没有真正改变。现在在布局过程中，我的自定义控件被正确定位但`ArrangeOverride`没有被调用。为了让您更清楚地了解我想要实现的目标：我有一个控件，[它模糊了背景](https://stackoverflow.com/questions/11524863/blur-background-with-viewbox)产生类似航空玻璃的效果。为了实现这一点，我的控件将背景控件渲染到可视画笔中，并计算该画笔的视图框以使背景发光，然后通过模糊效果对其进行模糊处理。只要布局没有改变，它就可以正常工作。如果是这样，我需要更新画笔。我在 ArrangeOverride 方法中做到了这一点。

`ArrangeOverride`因此，我尝试使用`MeasureOverride`Invalidating 或 Parent 无效的各种组合。起初我继承自`ContentControl`但将其更改为`Decorator`，认为装饰器可能有一些特殊行为无用。我想尽可能地避免`LayoutChanged`，因为它是一个非常非常邪恶的事件。我会给你一些代码，但它没有什么特别之处，我认为这是一个相当基本的问题，并没有真正绑定到我的代码。顺便说一下，布局器可以是任何东西（不仅仅是画布）。那么我必须通过什么事件、方法或方式来告知父母告诉我的控制“我知道你没有改变任何东西，但我确实重新定位了你”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:33:28.377

所以我以一种我不太满意的方式修复了它，但它解决了很多其他不必要的东西，只是为了让它工作，比如当模糊控件本身被动画时。因此，无论发生什么，这个解决方案现在都适用。虽然我避免了 LayoutUpdated 事件，但我使用了类似的“邪恶”事件。`CompositionTarget.Rendering`所以在`Loaded`事件中，我注册到渲染事件，在`Unloaded`我从渲染事件中注销。这样，无论多久`Loaded`或被`Unloaded`调用一次都无关紧要。在渲染事件本身中，我只是触发了我的`VisualBrush.Viewbox`失效代码。这工作得很好，即使事件被触发了很多。我并没有过多地使用模糊，所以它不会对性能产生太大影响......现在。

# codeigniter - codeigniter 密码保护站点上的 cron 作业

> ID：11611826
> 
> 赞同：0
> 
> 时间：2012-07-23T11:41:27.823
> 
> 标签：codeigniter, cron, cpanel

嘿伙计们希望你能帮助我

我正在尝试让 cron 工作与 codeigniter 应用程序一起工作，但它只是没有发生。我有 cpanel 和 ftp 访问权限。

该网站受密码保护。我已经用谷歌搜索了很长时间没有运气。

我不太了解 linux，虽然我确实打算以后至少学习 linux 命令的基础知识，但现在我只想要一个简单的 cron 工作。

基本上是为了测试cron作业，我有一个方法

```
public function update_cronjob2() {     
    $to = "my_email@domain.com";
    $subject = "asdf!";
    $message="cronjob";

    mail($to,$subject,$message);
} 
```

当我直接输入网址时，即

```
http://www.site.com/my_directory/index.php/home/update_cronjob2 
```

我收到电子邮件。但不是 cron 工作。

这是我到目前为止所尝试的。请注意，我已按原样粘贴所有内容，仅替换了用户名、密码和站点的文本。没有添加符号等

```
wget --user='user123'--password='pass123' http://www.site.com/my_directory/index.php/home/update_cronjob2 
```

和

```
wget http://www.site.com/my_directory/index.php/home/update_cronjob2 
```

和

```
$ cd /my_directory/project;$ php index.php home update_cronjob2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:46:53.053

您是否可以将 cron 放在站点的管理员/用户部分之外？听起来您需要登录才能访问给定的页面。这就是为什么您的浏览器可以处理它，但不能处理 cron。

那，或者你可以在你的登录部分添加这个：

```
if ( ! in_array($this->uri->segment(1), array('cron'))) {
    // Login prompt
} 
```

或者，也许你还有其他问题？

# ios - 扩张重点

> ID：11611828
> 
> 赞同：5
> 
> 时间：2012-07-23T11:41:31.423
> 
> 标签：ios, image-processing, opencv, opticalflow

我之前问过一个[问题](https://stackoverflow.com/questions/11553861/collision-avoidance-using-opencv-on-ipad)，但没有收到任何回复。在这里，我希望进一步缩小范围，希望得到答案。

从 OpenCV 导出光流后，如何计算扩展焦点？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:22:39.057

让我们假设一个带有移动相机的静态场景，其中所有光流都是由相机运动引起的。没有*相机旋转*，只有（3D）平移。
在这种情况下，FOE（*扩展焦点）是**所有*像素流的交点。

您可以使用最小二乘法来查找作为超定矩阵的零空间的 FoE，其行是由运动矢量定义的线。RANSAC 可能是一种更稳健的方法。

在横向运动的情况下，FoE 将处于无穷大，在向前运动的情况下，它将是图像内的一个点。

在更一般的情况下，FoE 是极点，一旦您估计了基本矩阵，就可以找到它。

# django - django-storages 未安装在 heroku 部署中

> ID：11611829
> 
> 赞同：2
> 
> 时间：2012-07-23T11:41:32.150
> 
> 标签：django, heroku

我在heroku上部署了我的应用程序，然后当我检查它时显示“内部服务器错误”。当我查看日志时，它包含以下简介：

```
2012-07-23T11:31:16+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
2012-07-23T11:31:16+00:00 app[web.1]: ImportError: No module named storages2012-07-23T11:31:16+00:00 app[web.1]:     __import__(name)
2012-07-23T11:31:18+00:00 heroku[router]: GET peaceful-plains-3853.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=5ms status=404 bytes=2065 
```

当我检查安装日志时，它看起来不像 django-storages 已安装。我的需求文件确实包含 django-stoages。它在下面列出：

```
Django==1.4
boto==2.5.2
django-storages==1.1.5
distribute==0.6.27
simplejson==2.6.0
gunicorn==0.14.2 
```

所以现在，我完全被难住了，不知道如何进一步排除故障。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:55:10.753

尝试再次运行您的构建。最初部署应用程序时，pypi.python.org 镜像可能已关闭，这可能导致它无法安装。做另一个 git push（在你对你的应用程序进行更改之后）应该可以解决这个问题。

# spring - hibernate 4和spring 3配置问题

> ID：11611831
> 
> 赞同：0
> 
> 时间：2012-07-23T11:41:48.043
> 
> 标签：spring, hibernate

我将hibernate 4与spring 3一起使用，并在xml中配置它，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

<bean id="propertiesConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>/WEB-INF/conf/jdbc.properties</value>
            </list>
        </property>
</bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>
    <context:annotation-config />
    <context:component-scan base-package="com.friendsalert"/>
    <aop:aspectj-autoproxy/>

    <!--    
<bean id="log4jInitialization"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"    >
    <property name="targetClass"
        value="org.springframework.util.Log4jConfigurer" />
    <property name="targetMethod" value="initLogging" />
    <property name="arguments">
        <list>
            <value>/WEB-INF/conf/log4j.xml</value>
             this value is bad for production.
            <value>10000</value>

        </list>
    </property>
</bean>    
 -->
<!-- ========================= RESOURCE DEFINITIONS ========================= -->

<!-- Local Apache Commons DBCP DataSource that refers to a combined database -->
<!-- (see dataAccessContext-jta.xml for an alternative) -->
<!-- The placeholders are resolved from jdbc.properties through -->
<!-- the PropertyPlaceholderConfigurer in applicationContext.xml-->

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
    <property name="initialSize" value="${jdbc.initialSize}"/>
    <property name="validationQuery" value="${jdbc.validationQuery}"/>
    <property name="maxWait" value="${jdbc.maxWait}"/>
    <property name="testOnBorrow" value="${jdbc.testOnBorrow}"/>
    <property name="testWhileIdle" value="${jdbc.testWhileIdle}"/>
    <!-- property name="loginTimeout" value="${jdbc.loginTimeout}"/ -->

</bean>

<!-- Transaction manager for a single JDBC DataSource -->
<!-- (see dataAccessContext-jta.xml for an alternative) 
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>
-->
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="localSessionFactory"/>
</bean>

<bean id="localSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean" depends-on="dataSource">
    <property name="dataSource" ref="dataSource"/>
    <property name="mappingResources">
        <list>
            <value>com/friendsalert/model/User.hbm.xml</value>

        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <!-- prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop -->
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
            <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop> 
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.cache.provider_class">org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory</prop>
            <prop key="hibernate.cache.use_query_cache">true</prop> 

                <!--  cache factory for hibernate 3.3 (surrently we use 3.2)-->
            <prop key="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</prop>                              
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.connection.useUnicode">true</prop>
            <prop key="hibernate.connection.charSet">UTF8</prop>
            <!--  <prop key="hibernate.current_session_context_class">thread</prop>-->
            <prop key="hibernate.connection.aggressive_release">false</prop>                    
            <prop key="hibernate.connection.release_mode">after_transaction</prop>  
            <prop key="hibernate.connection.autocommit">true</prop>
            <!--  create / drop.. use exporter class instead!-->
            <prop key="hibernate.hbm2ddl.auto">update</prop> 
        </props>
    </property>
</bean>

<bean id="userDao" class="com.friendsalert.dao.UserDao">
<property name="sessionFactory" ref="localSessionFactory"/>     
 </bean>

</beans> 
```

我用道。当我进行事务（保存、获取、更新）时，它第一次工作，第二次我收到一个错误，表明事务已关闭。我在我的 dao 中为每个函数使用 @Transactional 注释，所以我无法找出为什么没有事务。

谁能告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:46:01.747

关于您的配置的不寻常之处是：

```
<prop key="hibernate.connection.aggressive_release">false</prop>                    
<prop key="hibernate.connection.release_mode">after_transaction</prop>  
<prop key="hibernate.connection.autocommit">true</prop> 
```

我会尝试不使用这些线条。

从参考文档：不推荐使用自动提交模式
hibernate.connection.autocommit
为 JDBC 池连接启用自动提交（不推荐）。例如真| false hibernate.connection.release_mode 指定 Hibernate 何时应该释放 JDBC 连接。默认情况下，JDBC 连接会一直保持到会话显式关闭或断开连接为止。对于应用程序服务器 JTA 数据源，使用 after_statement 在每次 JDBC 调用后主动释放连接。对于非 JTA 连接，使用 after_transaction 在每个事务结束时释放连接通常是有意义的。auto 将为 JTA 和 CMT 事务策略选择 after_statement，为 JDBC 事务选择 after_transaction

# c# - 如何读取 XML 文件节点属性和子节点属性值？

> ID：11611835
> 
> 赞同：1
> 
> 时间：2012-07-23T11:42:01.887
> 
> 标签：c#

如何读取包含内容的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<A>
   <B value="1">
     <Hash algo="SHA256" value="905C45B51B970434D7159641D9F6A88DC91E9C35030618A729C8E4BE174711AF" />
   </B>
   <B value="2">
     <Hash algo="SHA256" value="649721FF455E9B100E691A3857696350E14364029C34C9438AB3EA9665C91292" />
   </B>
   <B value="3">
     <Hash algo="SHA256" value="90FC91C4B82BF440FDAFECF3303DCA8FB9F2E9D7EFFAE394D8B74D0C7CD7DA10" />
   </B>
</A> 
```

在上面的 xml 文件中，我想读取所有`B`标签的“值”属性值和标签`Hash`“算法”或“值”属性值的值。

这是我正在使用的代码：

```
 var settings = new XmlReaderSettings();
        settings.IgnoreWhitespace = true;
        using (var stm = new FileStream(@"xmlFilePath", FileMode.Open, FileAccess.Read, FileShare.Read))
        using (var reader = XmlReader.Create(stm, settings))
        {
            while (reader.Read())
            {
                string srcFileHash=null;
                reader.ReadToDescendant("B");
                if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "B")
                {
                    reader.MoveToAttribute("value");
                    var bValue=reader.Value;   // get the B tag attribute value.

                    //also want to read the <hash value=? and algo=?. but I dnt know how to get these hash tag attributes.
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:55:38.887

```
XDocument xDoc = XDocument.Parse(xml);
var result = xDoc.Descendants("B")
    .Select(b => new
    {
        BValue = b.Attribute("value").Value,
        Alg = b.Element("Hash").Attribute("algo").Value,
        AlgValue = b.Element("Hash").Attribute("value").Value,
    })
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:56:34.320

```
XElement doc = XElement.Load(yourxmlfilename);//Load the document

foreach (XElement b in doc.Elements("B"))//Iterate all elements B
{
    var xAttribute = b.Attribute("value");//get attribute called value
    if (xAttribute != null)
    {
        string v = xAttribute.Value;//now you have the B value
    }

    foreach (XElement h in b.Elements("Hash"))//Iterate all elements Hash
    {
        var xAttributev = h.Attribute("value");//get attribute called value
        if (xAttributev != null)
        {
               string hashValue = xAttribute.Value;//now you have the Hash value
        }

        var xAttributeh = h.Attribute("algo");//get attribute called algo
        if (xAttributeh != null)
        {
           string algorithm = xAttributeh.Value;//now you have the Hash algorithm
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:45:37.370

您的问题尚不清楚，但这里有一些快速代码可以做您想做的事情。

```
XDocument xdoc = XDocument.Load(@"file.xml");
if (xdoc.Root != null)
{
    var bs = xdoc.Root.Descendants("B");

    foreach (var bNode in bs)
    {
        Console.Out.WriteLine("B Value: " + bNode.FirstAttribute.Value);
        var hash = bNode.XPathSelectElement("Hash");
        Console.Out.WriteLine("algo is : " + hash.FirstAttribute.Value);
        Console.Out.WriteLine("value is : " + hash.FirstAttribute.NextAttribute.Value);
    } 
} 
```

我建议复习 XDocument 和 XmlDocument （两者仍然相关，具体取决于您的代码的年龄:)

# nginx - NGINX PHP-FPM 502 错误

> ID：11611837
> 
> 赞同：0
> 
> 时间：2012-07-23T11:42:07.227
> 
> 标签：nginx, fastcgi, php

我到处搜索，根本无法让它工作......

Nginx 1.0.11, php 5.3.2 ubuntu 10.04 lts (fpm-fcgi) 和 Suhosin v0.9.29

问题：

我有 Joomla，当我创建一篇新文章时，我得到 502 bad gateway。如果我重新启动 php5-fpm 和 nginx，我可以访问该页面一次，但是当我再次访问时，我得到 502。它似乎就是那个页面......

我试过了

```
fastcgi_buffer_size 128k;
fastcgi_buffers 256 16k;

fastcgi_buffers 8 16k;
fastcgi_buffer_size 32k;

fastcgi_buffer_size 16k;
fastcgi_buffers 4 256k; 
```

但没有任何区别。

有任何想法吗？似乎它是 php5-fpm，因为重新启动它可以让我访问该页面一次，但就是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:20:22.673

想通了，我的apc配置不正确，看看我在下面做了什么

```
apt-get install libpcre3-dev

pecl install apc

service php5-fpm restart

service nginx restart 
```

# launcher - 自定义 Minecraft 启动器

> ID：11611839
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:42:09.733
> 
> 标签：launcher, minecraft, lzma

我想创建我自己的 Minecraft 启动器，当玩家检查强制更新时，它会下载修改后的 minecraft.jar、更新的 lwjgl（都不是大问题）和 .minecraft 目录中的 2 个额外文件夹。我可以通过将 MinecraftDownload 目录更改为我自己网站上的一个并将修改后的文件放在我的网站上来完成前 2 个操作，但我不完全知道如何让它下载并将存档解压缩到 .minecraft 目录中（我猜我将使用 lzma，因为它的库已经在那里）。

我是 Java 新手，但我做了一些非常好的 vb.net 编程，所以我知道标准开发术语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-19T19:56:59.813

0# 这不是问题的真正答案。启动 Minecraft 1.5.2（旧）：

```
java -Djava.library.path=bin/natives -cp bin/* net.minecraft.client.Minecraft YOURUSERNAMEHERE
pause 
```

启动新的 Minecraft：

```
java -Xms2048M -Xmx2048M -Djava.library.path=versions/1.8/1.8-natives-xxxxxxxxxxxx -cp
libraries/ here the minecraft 1.8 libraries (optain from 1.8.json)
versions/1.8/1.8.jar
net.minecraft.client.main.Main
--username yourusername
--version 1.8
--assetsdir assest 
--assetindex 1.8
--accesstoken null
--userproperties {} 
```

要了解此命令，请阅读此帖子：

[使用 C# 从命令行启动 minecraft 1.6.4](https://stackoverflow.com/questions/20486866/launch-minecraft-1-6-4-from-command-line-with-c-sharp)

[从命令行启动 Minecraft - 用户名和密码作为前缀](https://stackoverflow.com/questions/14531917/launch-minecraft-from-command-line-usename-and-password-as-prefix)

[https://gaming.stackexchange.com/questions/156000/launching-minecraft-1-7-4-from-the-command-line](https://gaming.stackexchange.com/questions/156000/launching-minecraft-1-7-4-from-the-command-line)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T05:57:30.920

解压 bin/minecraft.jar 并查看里面

快乐的黑客。

# c# - 执行将基于配置触发的任务的设计建议

> ID：11611841
> 
> 赞同：1
> 
> 时间：2012-07-23T11:42:24.357
> 
> 标签：c#, oop, design-patterns

在我的 Web 应用程序中，有一个网页显示某些字段及其值。这些值可以由用户编辑。一旦值被编辑，它们就会被持久化到数据库中。现在出现了我需要建议的问题。将值更新到数据库后，我需要运行一些耗时的模块。因此，这个耗时的部分可能会也可能不会立即完成，具体取决于配置。配置中的选项可以是瞬时、每小时、每天、每周或每月。因此，如果它是瞬时的，我必须运行模块，否则我应该根据配置在指定时间触发任务。

作业调度程序是解决此问题的好方法吗？听说过 Quartz.NET。是否有任何 .NET 库可用于实现此目的。请提供建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:56:05.553

强烈建议将这些作业存储在一个队列中并创建另一个异步服务来执行队列作业。因此，您不会在 Web 服务器 (IIS) 上加载所有工作，并且在 Web 服务器重新启动或 Web 应用程序重新启动的情况下，应用程序不会丢失作业。

要创建此解决方案，您需要考虑 3 点。

**队列设计与管理**

当然，您可以使用其中一种排队服务器（例如 MSMQ、ActiveMQ、ZeroQ）。但为了简单起见，我建议使用数据库上的新表作为队列。在以下链接中查找如何将数据库表用作队列。 [http://rusanu.com/2010/03/26/using-tables-as-queues/](http://rusanu.com/2010/03/26/using-tables-as-queues/)

**作业调度**

您在这里有两个选项 Windows 任务计划程序和 QuatrZ.NET。我建议在这部分使用 QuatrZ.Net，因为它更具可定制性并且可以满足您的所有需求。

**托管服务**

[您可以使用 QuartZ.NET 服务器部署，也可以使用.NET 4 Managed Extensibility Framework (MEF)](http://msdn.microsoft.com/en-us/library/dd460648.aspx)并基于 QuartZ IJob 合同及其[Corn 表达式](http://quartznet.sourceforge.net/tutorial/lesson_6.html)构建自己的托管服务。

# php - 创建新主题后 Drupal 错误，未定义变量：hide_site_name 和其他类似错误

> ID：11611842
> 
> 赞同：2
> 
> 时间：2012-07-23T11:42:28.797
> 
> 标签：php, drupal, drupal-7, drupal-theming, drupal-themes

我是 drupal 主题的新手。我创建了一个目录`mytheme`并将其添加`mytheme.info`到其中，并从 drupal 的默认主题目录中复制了其他文件。现在编辑后`page.tpl.php`，drupal 显示以下错误。

```
Notice: Undefined variable: hide_site_name in include() (line 99 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined variable: hide_site_name in include() (line 109 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: featured in include() (line 168 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: highlighted in include() (line 187 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: sidebar_second in include() (line 212 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: triptych_first in include() (line 220 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: triptych_middle in include() (line 220 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: triptych_last in include() (line 220 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: footer_firstcolumn in include() (line 230 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: footer_secondcolumn in include() (line 230 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: footer_thirdcolumn in include() (line 230 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php).
Notice: Undefined index: footer_fourthcolumn in include() (line 230 of C:\wamp\www\dtest\sites\all\themes\mytheme\bartik\templates\page.tpl.php). 
```

google了一下，发现清除缓存可以解决问题。但即使清除了我的缓存，它仍然是一样的！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T07:44:12.157

通常，当您在文件中调用`page.tpl.php`主题文件中不存在的区域时，会发生这些错误`.info`。

在你的`page.tpl.php`：

```
$page['footer_firstcolumn']; 
```

在您的主题中`.info`：

```
regions[footer_firstcolumn] = Footer first column 
```

重新检查所有区域后，不要忘记`flush the cache`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T14:36:03.287

如果你想创建一个新鲜的主题，最好的做法是使用[Zen 之](http://drupal.org/project/zen/)类的东西。它是空白的并且完全可定制。

只要您按照规定的说明进行操作，您就可以避免像上面的那些令人讨厌的错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T03:16:41.343

我在编写自定义子模板时遇到了几乎相同的消息问题：“注意：未定义索引：include() 中的 myIndex（some/path/myPage.tpl.php 中的第 n 行）”

对于通知消息中告诉的每一行，我使用 php 的函数 isset() 解决了这个问题。

例如，在您的第 99 行中，我将使用：

```
if(isset(hide_site_name)){
    //use hide_site_name in the normal way
} 
```

或在您的第 168 行

```
if(isset( some_var[featured] )){
    //use "featured" index in the normal way
} 
```

希望这对某人有所帮助，因为这在长时间寻找解决方案后对我有所帮助。顺便说一句，我从来没有找到这种行为的原因。抱歉语法不好，如果有的话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-29T16:20:05.453

创建子主题后我遇到了同样的问题，我遵循了 Meiker 的回答，它在包含 isset 方面效果很好。但由于我没有太多编程经验，我遇到了第 220 行和同一行中的多个三联画的障碍。

> 注意：未定义索引：include() 中的triptych_first（C:\wamp\www\dtest\sites\all\themes 的第 220 行

所以我像这样添加了isset：

```
if(isset($page['triptych_first']) || (isset($page['triptych_middle']) || (isset($page['triptych_last'])))) : 
```

并且对类似的错误行做了同样的事情，现在我没有出现更多错误。

我希望这可以帮助其他遇到编程挑战的人。

# ajax - 春天和阿贾克斯

> ID：11611843
> 
> 赞同：3
> 
> 时间：2012-07-23T11:42:33.373
> 
> 标签：ajax, spring, spring-mvc

我可以将 spring 表单标签库与 Ajax 结合使用吗？我无法在控制器内检索表单输入参数。它们始终为**null**。

实际上有一个逻辑是表单永远不会提交。但是随后我只能将字符串发送到我的控制器，而不是像映射到 Spring **commandBean**的表单提交那样发送对象。

接受**commandBean的表单**

```
<form:form method="POST" commandName="clinicBean">
    Clinic Name: <form:input path="name" type="text" /><br/>
    Clinic Address: <form:input path="address" type="text"/><br/>
    <input type="button" value="Create Clinic" onclick="clinicAjax()"/>
</form:form> 
```

调用**Spring 控制器的 Ajax 函数**

```
function clinicAjax(){
    alert('Inside Clinic Ajax Method');
    $.ajax({
        url: 'clinicAjax',
        type: 'POST',
        success: alert('Ajax Successful')
    });
} 
```

**弹簧控制器方法：**

```
@RequestMapping(value="clinicAjax",method=RequestMethod.POST)

 public @ResponseBody String createClinic(@ModelAttribute("clinicBean") Clinic clinic){
        System.out.println("Ajax call successful");
        System.out.println(clinic);
        System.out.println(clinic.getName());
        System.out.println(clinic.getAddress());
        return "SUCCESS";
    } 
```

它在 System.out.println() 语句中总是为**空。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:56:25.573

问题是您没有在任何地方序列化您的表单，因此它不会被发送到服务器。

将您的 javascript 代码更改为：

```
function clinicAjax(){
    alert('Inside Clinic Ajax Method');
    $.ajax({
        url: 'clinicAjax',
        data: yourFormElement.serialize(); /* i.e. $('#formId').serialize(); */
        type: 'POST',
        success: alert('Ajax Successful')
    });
} 
```

`yourFormElement`用代表您的表单的 jQuery 对象替换它应该可以工作。

# python - 区分双绞线中的传出和传入连接

> ID：11611849
> 
> 赞同：0
> 
> 时间：2012-07-23T11:42:45.713
> 
> 标签：python, twisted

我正在开发基于 Twisted 框架的 P2P 应用程序。因此，我可以同时拥有传入和传出连接。有没有简单的方法来区分它们？目前我只是创建另一个工厂，将连接标记为传出并将所有工厂调用委托给原始工厂，但必须有更简单的方法。

```
class OutgoingProtocolFactory(MyProtocolFactory):
    """
    A rather simple factory that is used to earmark connections as outgoing.
    """
    def __init__(self, parentFactory):
        self.factory = parentFactory

    def buildProtocol(self, addr):
        connection = MyProtocolFactory.buildProtocol(self.factory, addr)
        connection.factory = self.factory
        connection.incoming = False
        return connection

    def clientConnectionFailed(self, connector, reason):
        self.factory.clientConnectionFailed(connector, reason)

    def clientConnectionLost(self, connector, reason):
        self.factory.clientConnectionLost(connector, reason) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:23:03.953

Twisted 中包含的任何工厂构造的每个协议实例都会获得一个自由`factory`属性，该属性引用回创建它们的工厂。

按照惯例，接受的（服务器）连接有一个`ServerFactory`（或子类）实例作为它们的工厂，连接的（客户端）连接有一个`ClientFactory`（或子类）实例。

但是，如果您真的希望您的代码完全通用，则不能依赖它，最好自己跟踪它，就像您目前正在做的那样。

如果您当前用于将呼叫从一个工厂转移到另一个工厂的代码比必要的更麻烦，这里有一个例子来说明它的简单程度：

```
from twisted.internet.protocol import ClientFactory
from twisted.protocols.policies import WrappingFactory

IN, OUT = 1, 2

class YourFactory(ClientFactory):
    # Your application logic
    ...

class Incoming(WrappingFactory):
    direction = IN

    def buildProtocol(self, addr):
        protocol = self.wrappedFactory.buildProtocol(addr)
        protocol.direction = self.direction
        return protocol

class Outgoing(Incoming):
    direction = OUT

yourFactory = YourFactory(...)
reactor.listenTCP(0, Incoming(yourFactory))
reactor.connectTCP('example.com', 1234, Outgoing(yourFactory)) 
```

如果这对你来说仍然太复杂，那么我不知道该说什么。我不够聪明，无法想出一个更简单的解决方案。

# .net - SQL Server 连接问题（错误 26）

> ID：11611850
> 
> 赞同：0
> 
> 时间：2012-07-23T11:42:46.073
> 
> 标签：.net, sql-server, winforms, exception-handling, ado.net

我在 SQL Server Express 的实例上安装了一个数据库。当我从服务器计算机运行应用程序时，我的客户端应用程序运行并成功连接到数据库。但是，当我在同一网络上的其他 PC 上运行该应用程序时，它不会连接到数据库。我不断收到错误消息：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。. . . . 错误 26 - 错误定位服务器/指定的实例

当我过去遇到此错误时，是因为 SQL Browser 服务没有运行。但是，当我在服务器上的服务中查找 SQL Browser 时，它根本不存在。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:47:01.487

默认情况下，快递有时不做广告。您尝试连接到什么？

它应该是 \SQLEXPRESS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:03:10.030

最后的答案是在 Windows 服务中访问启用 SQL 浏览器，并确保属性允许端口 134 上的 TCP 连接。希望对其他人有帮助。

# webgl - 在three.js中平滑移动相机

> ID：11611854
> 
> 赞同：3
> 
> 时间：2012-07-23T11:43:08.697
> 
> 标签：webgl, three.js

我正在尝试修改全景 equirectangula 播放器（[https://github.com/mrdoob/three.js/blob/master/examples/webgl_panorama_equirectangular.html](https://github.com/mrdoob/three.js/blob/master/examples/webgl_panorama_equirectangular.html)）以向相机添加一些平滑移动。有没有机会让它像立方体示例（[https://github.com/mrdoob/three.js/blob/master/examples/canvas_geometry_cube.html](https://github.com/mrdoob/three.js/blob/master/examples/canvas_geometry_cube.html)）中那样移动，而不会在 mousedown 上中断移动但平滑淡出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:55:58.380

Javascript 原始鼠标输入事件率太低，无法平滑更新。我假设鼠标输入事件的生成频率比您的 FPS 低得多。

该解决方案将在鼠标输入事件之间进行插值。第一人称射击游戏称这种鼠标平滑。过滤传入事件，使用样条插值，添加动量（又名 iPhone 样式滚动）等。

# python - 以编程方式修改 wiki 页面 (Confluence)

> ID：11611865
> 
> 赞同：2
> 
> 时间：2012-07-23T11:43:52.780
> 
> 标签：python, html, urllib2

我想以编程方式（在 python 中）修改 wiki 页面（Atlassian 的 Confluence - JIRA 编辑器）。到目前为止，我尝试的是模拟用户行为：

1.  点击编辑按钮
2.  改变`textarea`输入的内容
3.  使用保存按钮提交更改

第 1 部分可以，因为我有与页面编辑相对应的 URL，第 2 部分（页面检索和修改）也可以，但我不知道如何实现第 3 步...我正在使用`urllib2`.

谢谢你的帮助 ！！

**编辑**：XML-RPC 确实是解决方案，[这个例子](https://confluence.atlassian.com/display/DISC/XML-RPC+Page+Updater+Example)正是我想要的！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-13T01:30:10.303

```
# write to a confluence page
import xmlrpclib

CONFLUENCE_URL = "https://intranet.example.com/confluence/rpc/xmlrpc" 
CONFLUENCE_LOGIN = "a confluence username here"
CONFLUENCE_PASSWORD = "confluence pwd for username"

# get this from the page url while editing
# e.g. ../editpage.action?pageId=132350005 <-- here
PAGE_ID = "132350005" 
client = xmlrpclib.Server(CONFLUENCE_URL, verbose = 0)
auth_token = client.confluence2.login(CONFLUENCE_LOGIN, CONFLUENCE_PASSWORD)
page = client.confluence2.getPage(auth_token, PAGE_ID)

# and write the new contents
page['content'] = "!!!your content here!!!"

result = client.confluence2.storePage(auth_token, page)
client.confluence2.logout(auth_token) 
```

请注意，当您执行此操作时，confluence 会修改您的 html 代码。例如，它会去除元素上的脚本、样式和有时的标题属性。为了把这些东西拿回来，你需要使用他们的宏代码。

最简单的方法是在融合中编辑页面并使其看起来像您想要的那样，然后抓取页面并打印页面 ['content'] 以查看 atlassian 人决定对标准 html 做哪些神奇的新东西.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T11:51:14.187

这似乎是绝对错误的做法。

首先，Confluence 有一个插件架构，它应该允许您从应用程序本身以编程方式[管理内容](http://wiki.customware.net/repository/display/ATLASSIAN/API+-+Confluence+-+Creating+and+Modifying+Pages)，而无需任何类型的 HTTP 请求。其次，即使您出于某种原因不想或不能使用插件 API，下一个明显的选择是使用[SOAP/XML-RPC API](https://developer.atlassian.com/display/CONFDEV/Confluence+XML-RPC+and+SOAP+APIs)。

除非您尝试进行某种端到端测试，包括测试 GUI（例如自动跨浏览器测试），否则没有理由真正混淆`button`s 和s。`textarea`

# web-services - 如何在 ColdFusion 中对 SOAP 请求正文进行数字签名？

> ID：11611866
> 
> 赞同：3
> 
> 时间：2012-07-23T11:43:55.800
> 
> 标签：web-services, soap, coldfusion, digital-signature, webservices-client

对我来说是新的：我需要使用提供商颁发的证书对来自 ColdFusion 客户端应用程序的 SOAP 请求的主体进行数字签名和加密。我还需要解密响应以进行处理。

我已经搜索了几天，一无所获。我找到了引用其他语言的信息，但在 ColdFusion 中没有。如果无法通过 ColdFusion 语言 API 本地执行此操作，有人可以帮助我通过“createObject()”函数或您可能拥有的任何其他方法调用正确的 Java 或 .net 类吗？

2012 年 9 月 17 日 - 附加信息：

更多信息：我在查看代码时发布超时。这是完整的帖子：

我正在使用一项 Web 服务，而不是提供一项。我已经达到了让整个工作正常工作的地步，但它只能通过 ColdFusion“createObject”调用工作一次。

仍然需要帮助。系统：带有 ColdFusion 9 单服务器安装的 Windows Server 2003。

我使用了 Apache 的 wss4J 库并编写了一个简单的 Java 类作为入口点。自定义 Java 类只需将完整的 SOAP 消息作为 String 参数，将 String 传递给 wss4j DateStamp 类，然后将生成的 SOAP 部分对象传递给签名类，然后是加密类。然后它返回签名和加密的 SOAP 信封，该信封已通过 PrettyDocumentToString 函数从文档（SOAP 部分）转换为字符串。

所有这些都有效，我得到了一个带有安全标头和签名加密正文的 SOAP 信封。问题是，在重新启动 ColdFusion 服务（在 Windows Server 2003 上安装单服务器）后，它一次全部工作，但随后的运行导致 wss4j 签名代码中出现错误。我什至使用 Winmerge 在重新启动后立即比较了整个 ColdFusion9 目录，在第一次运行后立即运行，在第二次运行后立即进行比较。唯一的区别在于日志文件。ColdFusion9\lib\neo-datasource.xml 文件中存在差异，但仅在几个数据源描述符的顺序上，而不是在内容上。

下面是代码和堆栈跟踪：

> writeOutputs 和 writeDumps 仅用于调试期间的可视化。

ColdFusion 调用脚本：

```
<cfscript>
    variables.tempPath = getDirectoryFromPath(getCurrentTemplatePath());
    variables.filePath = tempPath & "ASI_source_request_example.xml";
    variables.fileContent = FileRead(filePath);

writeOutput("FILECONTENT: <br>");
writeOutput("variables.fileContent);
writeDump(var="#variables.fileContent#", format="html", output="#expandPath('./')#_DUMP-OUTPUT.htm");

    variables.encSOAP=createobject("java","ProcessIDSRSSOAP").runProcess(fileContent);

writeOutput("<br><br>encSOAP: <br>");
writeOutput(variables.encSOAP);
writeDump(var="#variables.encSOAP#", format="html", output="#expandPath('./')#_DUMP-OUTPUT.htm");
</cfscript> 
```

Java类：

```
import java.io.FileReader;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

import org.apache.ws.security.SOAPConstants;
import org.apache.ws.security.WSConstants;
import org.apache.ws.security.WSEncryptionPart;
import org.apache.ws.security.WSSConfig;
import org.apache.ws.security.common.SOAPUtil;
import org.apache.ws.security.components.crypto.Crypto;
import org.apache.ws.security.components.crypto.CryptoFactory;
import org.apache.ws.security.message.WSSecEncrypt;
import org.apache.ws.security.message.WSSecHeader;
import org.apache.ws.security.message.WSSecSignature;
import org.apache.ws.security.message.WSSecTimestamp;
import org.apache.ws.security.util.WSSecurityUtil;
import org.w3c.dom.Document;

public class ProcessIDSRSSOAP {
    private static Crypto crypto = null;
    private static Properties properties = new Properties();
    private static String user = "";
    private static String cryptoPwd = "";
    private static WSSecSignature builder = new WSSecSignature();
    private static SOAPConstants soapConstants = null;
    private final WSSecHeader secHeader = new WSSecHeader();
    private Document tsDoc = null;
    private Document signedDoc = null;
    private Document encryptedDoc = null;

    private static final org.apache.commons.logging.Log LOG = org.apache.commons.logging.LogFactory
            .getLog(ProcessIDSRSSOAP.class);

    public ProcessIDSRSSOAP() throws Exception {
        WSSConfig.init();
    }

    /*
     * public static void main(String[] args) throws Exception {
     * ProcessIDSRSSOAP processor = new ProcessIDSRSSOAP();
     * processor.runProcess(args[0]); }
     */

    public String runProcess(String inDoc) throws Exception {
        // ProcessIDSRSSOAP processor = new ProcessIDSRSSOAP();
        // LOG.debug(inDoc);
        Class<ProcessIDSRSSOAP> thisClass = ProcessIDSRSSOAP.class;
        ClassLoader thisLoader = thisClass.getClassLoader();
        URL propertiesURL = thisLoader.getResource("crypto.properties");
        String propertiesPath = propertiesURL.getPath();
        propertiesPath = propertiesPath.replaceAll("%20", " ");
        properties.load(new FileReader(propertiesPath));
        user = properties
                .getProperty("org.apache.ws.security.crypto.merlin.keystore.alias");
        cryptoPwd = properties
                .getProperty("org.apache.ws.security.crypto.merlin.keystore.password");
        crypto = CryptoFactory.getInstance("crypto.properties");
        builder.setUserInfo(user, cryptoPwd);
        builder.setKeyIdentifierType(WSConstants.ISSUER_SERIAL);
        SOAPUtil.toSOAPPart(inDoc.trim());
        Document PKIDoc = processDoc(inDoc);
        String PKIDocString = org.apache.ws.security.util.XMLUtils
                .PrettyDocumentToString(PKIDoc);
        LOG.debug(PKIDocString);
        return PKIDocString;
    }

    /**
     * @param SOAPMsg
     *            The entire SOAP message as a type String
     * @throws Exception
     */
    public Document processDoc(String SOAPMsg) throws Exception {
        tsDoc = timestampMSG(SOAPMsg);// Time stamp the SOAP String and make it
                                        // a Document type.
        secHeader.insertSecurityHeader(tsDoc);// Insert the security header.
        soapConstants = WSSecurityUtil.getSOAPConstants(tsDoc
                .getDocumentElement());
        signedDoc = signBody(tsDoc);// Send the Document on for signing.
        encryptedDoc = encryptBody(signedDoc);
        return encryptedDoc;
    }

    /**
     * @param msg
     *            The entire SOAP message as a type String
     * @throws Exception
     */
    public Document timestampMSG(String msg) throws Exception {
        Document doc = SOAPUtil.toSOAPPart(msg);
        WSSecHeader secHeader = new WSSecHeader();
        secHeader.insertSecurityHeader(doc);

        WSSecTimestamp timestamp = new WSSecTimestamp();
        timestamp.setTimeToLive(300);
        Document createdDoc = timestamp.build(doc, secHeader);
        return createdDoc;
    }

    /**
     * @param doc
     *            Expects a SOAP message as a type Document
     * @throws Exception
     */
    public Document signBody(Document doc) throws Exception {
        List<WSEncryptionPart> parts = new ArrayList<WSEncryptionPart>();
        WSEncryptionPart encP = new WSEncryptionPart(soapConstants
                .getBodyQName().getLocalPart(), soapConstants.getEnvelopeURI(),
                "");
        parts.add(encP);
        builder.setParts(parts);
        Document signedDoc = builder.build(doc, crypto, secHeader);
        return signedDoc;
    }

    public Document encryptBody(Document doc) throws Exception {
        SOAPConstants soapConstants = WSSecurityUtil.getSOAPConstants(doc
                .getDocumentElement());
        WSSecEncrypt encrypt = new WSSecEncrypt();
        encrypt.setUserInfo(user, cryptoPwd);
        encrypt.setKeyIdentifierType(WSConstants.ISSUER_SERIAL);

        WSSecHeader secHeader = new WSSecHeader();
        secHeader.insertSecurityHeader(doc);

        List<WSEncryptionPart> parts = new ArrayList<WSEncryptionPart>();
        WSEncryptionPart encP = new WSEncryptionPart(soapConstants
                .getBodyQName().getLocalPart(), // define the body
                soapConstants.getEnvelopeURI(), "");
        parts.add(encP);
        encrypt.setParts(parts);
        Document encryptedDoc = encrypt.build(doc, crypto, secHeader);
        return encryptedDoc;
    }
} 
```

冷融合错误：

```
Signature creation failed (Cannot setup signature data structure)  

The error occurred in G:/Inetpub/wwwroot/SOAP/index.cfm: line 14

12 : writeDump(var="#variables.fileContent#", format="html", output="#expandPath('./')#_DUMP-OUTPUT.htm");
13 : 
14 :    variables.encSOAP=createobject("java","ProcessIDSRSSOAP").runProcess(fileContent);
15 : 
16 : writeOutput("<br><br>encSOAP: <br>"); 
```

堆栈跟踪：

```
at cfindex2ecfm1134068877.runPage(G:/Inetpub/wwwroot/SOAP/index.cfm:14) 

org.apache.ws.security.WSSecurityException: Signature creation failed (Cannot setup signature data structure)
    at org.apache.ws.security.message.WSSecSignatureBase.addReferencesToSign(WSSecSignatureBase.java:191)
    at org.apache.ws.security.message.WSSecSignature.addReferencesToSign(WSSecSignature.java:409)
    at org.apache.ws.security.message.WSSecSignature.build(WSSecSignature.java:381)
    at ProcessIDSRSSOAP.signBody(ProcessIDSRSSOAP.java:118)
    at ProcessIDSRSSOAP.processDoc(ProcessIDSRSSOAP.java:85)
    at ProcessIDSRSSOAP.runProcess(ProcessIDSRSSOAP.java:67)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at coldfusion.runtime.java.JavaProxy.invoke(JavaProxy.java:97)
    at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2360)
    at cfindex2ecfm1134068877.runPage(G:\Inetpub\wwwroot\SOAP\index.cfm:14)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416)
    at coldfusion.filter.CfincludeFilter.invoke(CfincludeFilter.java:65)
    at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:381)
    at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
    at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
    at coldfusion.filter.PathFilter.invoke(PathFilter.java:94)
    at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
    at coldfusion.filter.BrowserDebugFilter.invoke(BrowserDebugFilter.java:79)
    at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
    at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
    at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    at coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62)
    at coldfusion.CfmServlet.service(CfmServlet.java:200)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at jrun.servlet.FilterChain.service(FilterChain.java:101)
    at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
Caused by: java.lang.NullPointerException
    at org.apache.ws.security.message.DOMCallbackLookup.getElements(DOMCallbackLookup.java:94)
    at org.apache.ws.security.util.WSSecurityUtil.findElements(WSSecurityUtil.java:267)
    at org.apache.ws.security.message.WSSecSignatureBase.addReferencesToSign(WSSecSignatureBase.java:156)
    ... 43 more 
```

显然，org.apache.ws.security.message.DOMCallbackLookup.getElements 中缺少某些内容。提供它的代码是：

```
return callbackLookup.getElements(part.getName(),part.getNamespace()); 
```

我似乎无法弄清楚为什么它在从 CF 调用时第一次工作，但在随后的运行中失败并出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-17T14:51:28.500

实际的问题是我的函数调用被颠倒了。我颠倒了块的顺序

`signedDoc = signBody(tsDoc);// Send the Document on for signing. encryptedDoc = encryptBody(signedDoc);`

到

`encryptedDoc = encryptBody(signedDoc); signedDoc = signBody(tsDoc);// Send the Document on for signing.`

它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:51:03.690

您需要添加一个处理程序，看看这里，因为我相信这与您想要实现的目标相似：http: [//milanchandnacf.blogspot.co.uk/2011/09/adding-handler-to-coldfusion-网页.html](http://milanchandnacf.blogspot.co.uk/2011/09/adding-handler-to-coldfusion-web.html)

# iphone - 核心情节条形图条不会显示

> ID：11611869
> 
> 赞同：0
> 
> 时间：2012-07-23T11:44:16.690
> 
> 标签：iphone, objective-c, graph, core-plot, bar-chart

尽管花费了无数个小时检查代码行，并且在创建了一个功能齐全的散点图之后，我还是无法让条形图显示在我的条形图上。

我正在使用 Core Plot，我确信我已经导入了 core plot 库并正确设置了 core plot 环境，因为散点图完全正常工作。

有人可以帮我拔掉头发，也许可以告诉我哪里出错了？我有一种感觉，因为我的 #define BAR_POSITION @"POSITION" 和 #define BAR_HEIGHT @"HEIGHT" 没有正确设置/调用。

下面是我用于头文件和主文件的代码。

任何和所有的帮助表示赞赏。

头文件：

```
#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"

@interface BarPlotViewController : UIViewController 
<CPTBarPlotDataSource, CPTBarPlotDelegate> {

}

@property (nonatomic, retain) NSMutableArray *data;
@property (nonatomic, retain) CPTGraphHostingView *hostingView;
@property (nonatomic, retain) CPTXYGraph *graph;

- (void) generateBarPlot;

@end 
```

主文件：

```
#import "BarPlotViewController.h"

@implementation BarPlotViewController

#define BAR_POSITION @"POSITION"
#define BAR_HEIGHT @"HEIGHT"
#define COLOR @"COLOR"
#define CATEGORY @"CATEGORY"

#define AXIS_START 0
#define AXIS_END 50

@synthesize data;
@synthesize graph;
@synthesize hostingView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    self.data = [NSMutableArray array];

    int bar_heights[] = {20,30,10,40};
    NSLog(@"After heights initialised.");

    int bar_positions[] = {10,20,30,40};
    NSLog(@"After position initialised.");

    UIColor *colors[] = {
        [UIColor redColor],
        [UIColor blueColor],
        [UIColor orangeColor],
        [UIColor purpleColor]};
    NSLog(@"After colors initialised.");

    NSString *categories[] = {@"A", @"B", @"C", @"D"};
    NSLog(@"After categories initialised.");

    for (int i = 0; i < 4 ; i++){
        double position = i*10; //Bars will be 10 pts away from each other
        double height = bar_heights[i];
        //double position = bar_positions[i];

        NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithDouble:position],BAR_POSITION,
                             [NSNumber numberWithDouble:height],BAR_HEIGHT,
                             colors[i],COLOR,
                             categories[i],CATEGORY,
                             nil];
        [self.data addObject:bar];

        NSLog(@"Data entered into bar dictionary.");

        //NSString *positionStringValue = [NSString stringWithFormat:@"%.02f", position];
        //NSString *log = [@"Position " stringByAppendingFormat: positionStringValue];
        //NSLog( log );

        //NSString *colorsStringValue = [NSString stringWithFormat:@"%.02f", position];
        //NSString *log2 = [@"Colors " stringByAppendingFormat: colors[i]];
        //NSLog( log2 );

    }
    [self generateBarPlot];
    NSLog(@"After generate bar plot.");
}
return self;
}

- (void)generateBarPlot
{
//Create host view
self.hostingView = [[CPTGraphHostingView alloc] 
                    initWithFrame:[[UIScreen mainScreen]bounds]];
[self.view addSubview:self.hostingView];

//Create graph and set it as host view's graph
self.graph = [[CPTXYGraph alloc] initWithFrame:self.hostingView.bounds];
//self.graph = [[CPTXYGraph alloc] initWithHostingView:_graphHostingView];

[self.hostingView setHostedGraph:self.graph];
//self.scatterPlot = [[TUTSimpleScatterPlot alloc] initWithHostingView:_graphHostingView andData:data];
//[self.scatterPlot initialisePlot];

//set graph padding and theme
self.graph.plotAreaFrame.paddingTop = 20.0f;
self.graph.plotAreaFrame.paddingRight = 20.0f;
self.graph.plotAreaFrame.paddingBottom = 70.0f;
self.graph.plotAreaFrame.paddingLeft = 70.0f;
[self.graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];

// Gets rid of decimal on years
NSNumberFormatter *labelFormatter = [[NSNumberFormatter alloc] init];
labelFormatter.maximumFractionDigits = 0;

//set axes ranges
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:
                    CPTDecimalFromFloat(AXIS_START)
                                                length:CPTDecimalFromFloat((AXIS_END - AXIS_START))];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:
                    CPTDecimalFromFloat(AXIS_START)
                                                length:CPTDecimalFromFloat((AXIS_END - AXIS_START))];

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;
//set axes' title, labels and their text styles
CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
textStyle.fontName = @"Helvetica";
textStyle.fontSize = 14;
textStyle.color = [CPTColor whiteColor];

axisSet.xAxis.title = @"A";
axisSet.yAxis.title = @"B";
axisSet.xAxis.titleTextStyle = textStyle;
axisSet.yAxis.titleTextStyle = textStyle;
axisSet.xAxis.titleOffset = 30.0f;
axisSet.yAxis.titleOffset = 40.0f;
axisSet.xAxis.labelTextStyle = textStyle;
axisSet.yAxis.labelTextStyle = textStyle;
axisSet.xAxis.labelOffset = 3.0f;
axisSet.yAxis.labelOffset = 3.0f;

//set axes' line styles and interval ticks
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.lineColor = [CPTColor whiteColor];
lineStyle.lineWidth = 3.0f;
axisSet.xAxis.axisLineStyle = lineStyle;
axisSet.yAxis.axisLineStyle = lineStyle;
axisSet.xAxis.majorTickLineStyle = lineStyle;
axisSet.yAxis.majorTickLineStyle = lineStyle;
axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(5.0f);
axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(5.0f);
axisSet.xAxis.majorTickLength = 10.0f;
axisSet.yAxis.majorTickLength = 10.0f;
axisSet.xAxis.minorTickLineStyle = lineStyle;
axisSet.yAxis.minorTickLineStyle = lineStyle;
axisSet.xAxis.minorTicksPerInterval = 1;
axisSet.yAxis.minorTicksPerInterval = 1;
axisSet.xAxis.minorTickLength = .0f;
axisSet.yAxis.minorTickLength = .0f;
axisSet.xAxis.labelFormatter = labelFormatter;
axisSet.yAxis.labelFormatter = labelFormatter;

// Create bar plot and add it to the graph
CPTBarPlot *plot = [[CPTBarPlot alloc] init] ;
plot.dataSource = self;
plot.delegate = self;
plot.barWidth = [[NSDecimalNumber decimalNumberWithString:@"10.0"]
                 decimalValue];
plot.barOffset = [[NSDecimalNumber decimalNumberWithString:@"10.0"]
                  decimalValue];
plot.barCornerRadius = 5.0;

// Remove bar outlines
CPTMutableLineStyle *borderLineStyle = [CPTMutableLineStyle lineStyle];
borderLineStyle.lineColor = [CPTColor greenColor];
plot.lineStyle = borderLineStyle;

// Identifiers are handy if you want multiple plots in one graph
plot.identifier = @"chocoplot";
[self.graph addPlot:plot];
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
if ( [plot.identifier isEqual:@"chocoplot"] ) 
{
    return [self.data count];
}

return 0;
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
if ( [plot.identifier isEqual:@"chocoplot"] )
{
    NSDictionary *bar = [self.data objectAtIndex:index];

    if(fieldEnum == CPTBarPlotFieldBarLocation) {
        //return [bar valueForKey:BAR_POSITION];
        NSLog(@"bar position before");
        return [NSNumber numberWithDouble:30];
        NSLog(@"bar position after");
    }
    else if(fieldEnum ==CPTBarPlotFieldBarTip) {
        //return [bar valueForKey:BAR_HEIGHT];
        NSLog(@"bar height before");
        return [NSNumber numberWithDouble:20];
        NSLog(@"bar height before");
    }
}
NSLog(@"numberForPlot return before");
return [NSNumber numberWithFloat:0];
NSLog(@"numberForPlot return after");
}

-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index
{
if ( [plot.identifier isEqual: @"chocoplot"] )
{
    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.fontName = @"Helvetica";
    textStyle.fontSize = 14;
    textStyle.color = [CPTColor whiteColor];

    NSDictionary *bar = [self.data objectAtIndex:index];
    CPTTextLayer *label = [[CPTTextLayer alloc] initWithText:[NSString stringWithFormat:@"%@", [bar valueForKey:@"CATEGORY"]]];
    label.textStyle =textStyle;

    return label;
}

CPTTextLayer *defaultLabel = [[CPTTextLayer alloc] initWithText:[NSString stringWithString:@"Label"]];
return defaultLabel;

}

-(CPTFill *)barFillForBarPlot:(CPTBarPlot *)barPlot
              recordIndex:(NSUInteger)index
{
if ( [barPlot.identifier isEqual:@"chocoplot"] )
{
    NSDictionary *bar = [self.data objectAtIndex:index];
    CPTGradient *gradient = [CPTGradient gradientWithBeginningColor:[CPTColor whiteColor]
                                                        endingColor:[bar valueForKey:@"COLOR"]
                                                  beginningPosition:0.0 endingPosition:0.3 ];
    [gradient setGradientType:CPTGradientTypeAxial];
    [gradient setAngle:320.0]; 

    CPTFill *fill = [CPTFill fillWithGradient:gradient];

    return fill;

}
return [CPTFill fillWithColor:[CPTColor colorWithComponentRed:1.0 green:1.0 blue:1.0 alpha:1.0]];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:36:47.343

你确定你的 xrange 设置正确吗？我还没有调试过代码，但它很容易被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:51:16.540

You need to give the #define AXIS_START -xx so that you can show up

# google-app-engine - 在 GAE / GWT 应用程序上运行的应用程序的自动安全审计

> ID：11611870
> 
> 赞同：1
> 
> 时间：2012-07-23T11:44:20.897
> 
> 标签：google-app-engine, gwt

有谁知道是否有工具可以为 Google App Engine 应用程序执行自动安全检查？

那里有关于如何为在 Google App Engine 上运行的 GWT 应用程序设置安全性的文档，但我想知道是否有一个自动化工具可以用来检查安全漏洞

谢谢，

雨果

# android - 超类和布局android

> ID：11611875
> 
> 赞同：0
> 
> 时间：2012-07-23T11:44:47.167
> 
> 标签：android

我有一个像这样的超类：

```
public class SuperClass extends Activity 
```

和一个儿童班

```
 public class ChildClass extends SuperClass 
```

SuperClass 包含一个设置布局的函数

```
public void setTabBar(String layout){
    inflater.inflate(...., ...); 
} 
```

我的子类和超类中唯一不同的是布局。那么回到我的问题：

无论如何我可以向超类方法发送一个字符串`setTabBar("name of the layout")`；然后指定布局。我试过这个：

```
public void setTabBar(String layout) {

        int layoutFromString = Integer.parseInt("R.layout."+layout);
        inflater.inflate(layoutFromString, null);
} 
```

但这似乎不起作用。有任何想法吗？

**编辑**

如前所述，我试过这个：

```
 public void setTabBar(int id) {
     inflater.inflate(id, null);
  } 
```

这**将**适用于超类，但是当我像这样从子类调用函数时：

```
public class TestClass extends SuperClass{

  @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setTabBar(R.layout.test); 

  }
} 
```

LogCat 只输出这个：

```
07-23 13:57:15.775: E/AndroidRuntime(7329):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:49:43.273

```
int layoutFromString = Integer.parseInt("R.layout."+layout); 
```

给你一个 NumberFormatException，因为 String "R.layout.yourLayoutId" 不是一个数字，它的字符串。要查找 layoutName 的 id，请使用：

```
getResources().getIdentifier("YOUR_LAYOUT_NAME",
                "layout", context.getPackageName()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:53:38.930

您正在尝试从传入 setTabBar 的字符串中解析一个整数。将变量名称转换为实际值需要反射，我个人不想踩到那个兔子洞。

为什么不直接指定传入的参数是一个整数呢？

```
public void setTabBar(int layoutId) {
    inflater.inflate(....,....);
} 
```

并且，在调用类中：

```
activity.setTabBar(R.layout.nifty_layout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:54:39.320

像这样的东西应该工作：

```
public abstract class SuperClass extends Activity{
    public void setTabBar(String layout){
        inflater.inflate(getResId(), null); 
    }

    protected abstract int getResId();
}

public class ChildClass extends SuperClass{
    @Override
    protected abstract int getResId(){
        return R.layout.child;
    }
} 
```

我不确定这是你想要的。我希望这能帮到您。

# asp.net - 有没有办法在 c# 中查询流，例如。从流对象中选择 *

> ID：11611876
> 
> 赞同：4
> 
> 时间：2012-07-23T11:44:50.303
> 
> 标签：asp.net, file-upload, stream, c#-3.0

我在我的asp.net（c#）网站上有一个文件上传控件，用于上传带有要插入数据库的数据的csv文件，我的问题是，我无法获取上传文件的实际路径

它总是给我：`C:\inetput\projectfolder\csvname.csv` 它应该类似于：`C:\Documents and settings\Pcname\Desktop\csvname.csv`

但是通过文件上传的各种帖子，我知道文件需要先保存在服务器上，

使用`Fileupload1.Saveas(savepath);`

这是将文件保存在先前指定的位置所必需的，而实际上并不需要。（因为它会增加再次删除文件的开销）。

那么我所做的如下：

```
bool result = true;
strm = FileUpload1.PostedFile.InputStream;

reader2 = new System.IO.StreamReader(strm);

// **** new ****

FileInfo fileinfo = new FileInfo(FileUpload1.PostedFile.FileName);

string savePath = "c:\\"; // example "c:\\temp\\uploads\\"; could be any path

string fileName = fileinfo.Name;
string strFilePath = savePath.ToString();

savePath += fileName;

FileUpload1.SaveAs(savePath);

string strSql = "SELECT * FROM [" + fileinfo.Name + "]";

string strCSVConnString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + strFilePath + ";" + "Extended Properties='text;HDR=NO;'";

// load the data from CSV to DataTable 

OleDbDataAdapter oleda = new OleDbDataAdapter(strSql, strCSVConnString);

DataTable dtbCSV = new DataTable();

oleda.Fill(dtbCSV);

if (dtbCSV.Columns.Count != 2)
{
    result = false;
} 
```

因为我想计算文件中的列数，所以我使用的是 oledb 阅读器。需要查询一个文件。

是否可以查询流？我不想保存文件，而是直接读取而不保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:58:24.287

不幸的是，您不能对流使用 OLEDB。

在必须使用 OLEDB 的情况下，我设法编写了一个`IDisposable`包装器，该包装器可以从流中提供一个临时文件并管理删除。

但是，您可以采用另一种方法来读取内容，而不保存它，例如直接从流中自己解析文件。我会推荐这个而不是包装器，因为您可以避免文件访问限制问题以及文件访问的开销。

[这是](https://stackoverflow.com/questions/2081418/parsing-csv-files-in-c-sharp)一个有几种不同方法的 SO。

# sql - 使用 MS SQL Server 函数作为列别名

> ID：11611881
> 
> 赞同：0
> 
> 时间：2012-07-23T11:45:13.203
> 
> 标签：sql, winforms, sql-server-2005

我已经创建了一个函数，用于在 MS SQL Server 2005 中检索数据库列的翻译，具体取决于所选的语言代码（例如“el-GR”）。该函数本身可以正常工作，但我无法将其结果用作检索列的别名。

这是我正在使用的代码：

```
SELECT
    tblAuditors.[Full Name] as dbo.GetLocalizedGridTranslation('Auditor Name', @languageCode)
FROM tblCompanyAuditors 
```

有谁知道我可以如何欺骗 SQL Server 允许我使用该函数作为别名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:46:40.520

将别名括在括号中`[]`：

```
SELECT 
   [dbo.GetLocalizedGridTranslation('Auditor Name', @languageCode)] = tblAuditors.[Full Name]
FROM tblAuditors 
```

除此之外，您查询表格`tblCompanyAuditors`但该列来自表格是否是错字`tblAuditors`？

**编辑**：我只是注意到列别名本身应该是函数的结果。

那有意义吗？别名是所有记录的列，每个记录都会执行一个函数。如果这是一个存储过程，我建议将结果存储在一个变量中，并将其用作动态 sql 中的列别名。

```
DECLARE @column_alias VARCHAR(30)
SET @column_alias = dbo.GetLocalizedGridTranslation('Auditor Name', @languageCode);

-- Use dynamic SQL
DECLARE @sql VARCHAR(1000)
SET @sql = 'SELECT tblAuditors.[Full Name] AS ' + @column_alias + ' FROM tblAuditors'

EXEC sp_executesql @sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:31:03.347

我认为您将需要使用动态 SQL

IE

```
 declare @sql nvarchar(max)
 select @sql = 'SELECT tblAuditors.[Full Name] as ['
      + dbo.GetLocalizedGridTranslation('Auditor Name', @languageCode) 
      + '] FROM tblCompanyAuditors'

 exec sp_executesql @sql 
```

# javascript - 如何使用 swfObject 获取 Flash 对象的 HTML

> ID：11611882
> 
> 赞同：0
> 
> 时间：2012-07-23T11:45:12.907
> 
> 标签：javascript, flash, swfobject

澄清一下：我想获取生成的 HTML 而不将其嵌入到 DOM 中。类似 getHTML(params...) 而不是 embedSWF

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:42:00.960

我最终重写了部分 swfobject 以获得我需要的东西

# asp.net - .aspx 页面的 .asp 处理程序映射

> ID：11611886
> 
> 赞同：4
> 
> 时间：2012-07-23T11:45:36.447
> 
> 标签：asp.net, iis-7, asp-classic, iis-7.5, umbraco

我目前正在 Umbraco 4.7 中开发。

我的客户需要将带有 .asp 扩展名的经典 ASP 页面重定向到他们的新页面。我已经安装了以下软件包：

管理 URL 重定向 [http://our.umbraco.org/projects/backoffice-extensions/manage-url-redirects](http://our.umbraco.org/projects/backoffice-extensions/manage-url-redirects)

这个包完全符合我对 .aspx 页面和没有扩展名的页面的需要。

但是，当涉及到 .asp 时，这是行不通的。我的第一个想法是，这是因为 .asp 未设置为映射到 IIS7 内的处理程序映射配置中的 .aspx 页面。

为了解决这个问题，我向 IIS 添加了一个新的处理程序映射。

1.  添加脚本管理器
2.  请求路径 - *.asp
3.  可执行文件 - C:\windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll
4.  名称 - ClassicAspToNet

在添加此处理程序映射之前，我收到了 IIS 404 错误页面。现在我收到一个服务器异常：

执行 URL 失败。

示例：*** 此处已删除链接 ***

非常感谢您的帮助，帮助我确定是否可以使用 .asp 扩展名提供 .aspx 页面，如果可以，我该怎么做？

提前致谢，

大卫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:44:49.197

我在将 PHP 迁移到 Umbraco 时遇到了类似的问题。我的解决方案是添加一个无扩展处理程序（通配符映射），然后使用 Umbraco 中的 UrlRewriting 剥离 .php 并用 .aspx 替换它。

这是我使用的重写规则：

```
<add name="phptoaspx"
     virtualUrl="^~/(.*).php"
     rewriteUrlParameter="ExcludeFromClientQueryString"
     destinationUrl="/$1.aspx"
     ignoreCase="true" /> 
```

也许在你的情况下你只需要重写？不过，您可能需要从 IIS 处理程序映射中删除 .asp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T07:06:21.753

`301 Moved Permanently`如果有帮助，您可以使用该功能。

在您的经典 asp 站点中，您有 global.asa 以及诸如 On Application start 之类的事件，您可以重定向到适当的 aspx 文件。

例如

```
Sub Application_OnStart
    Declare a variable and Get page name from request and redirect accordingly

   Response.Status="301 Moved Permanently"
   Response.AddHeader "Location","http://www.example.com/" + VariableNameThatHoldsPageName
   Response.End

End Sub 
```

希望能帮助到你.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T00:11:55.563

您可以尝试我写的关于如何在经典模式和集成模式下将其他扩展重新映射到 IIS 的博客文章：http: [//blogs.msdn.com/b/carlosag/archive/2008/07/04/mappingfileextensionforaspxpagesiniis70.aspx](http://blogs.msdn.com/b/carlosag/archive/2008/07/04/mappingfileextensionforaspxpagesiniis70.aspx)

# amazon-simpledb - 使用 boto 从 amazon simpledb 中选择 itemName()

> ID：11611888
> 
> 赞同：1
> 
> 时间：2012-07-23T11:45:40.020
> 
> 标签：amazon-simpledb, boto

我正在尝试使用 boto 从 simpleDB 选择查询中获取 itemName()，但是这样做`select itemName() from domain where attribute = 'foo' limit 10`给了我一个包含 10 个项目的结果集，但它们都是空的。

我也试过`select `itemName()` from domain where attribute = 'foo'`and `select itemName from domain where attribute = 'foo'`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:34:24.240

返回的 Item 对象是空的，因为您没有在查询中要求任何属性。itemName 并不是真正的属性。它存储为 Item 对象上的特殊值，可作为 item.name 访问。

# jquery - Jquery datepicker 和计算函数

> ID：11611889
> 
> 赞同：0
> 
> 时间：2012-07-23T11:45:43.360
> 
> 标签：jquery, datepicker

我对 jquery datepicker 和计算函数有一些问题。当我填写每个字段时，函数计算“总天”字段中的正确值，但是当我将日期更改为另一个时，“总天”值没有计算。

工作示例：http: [//jsfiddle.net/amarcinkowski/3Upet/](http://jsfiddle.net/amarcinkowski/3Upet/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:59:44.580

日期选择器未触发“更改”事件。在 onSelect 事件中运行您的 compute() 函数并将其绑定到更改其他输入 - 或手动触发更改事件。

要手动触发更改，我会将其添加到 onSelect 回调中 - 通过以下方式引入第二个参数（datepicker 实例）：

```
onSelect: function( selectedDate, inst ) 
```

我们需要在 onSelect 回调结束时定位相关输入：

```
inst.input.trigger('change'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:04:36.567

在 onSelect 中添加计算函数：

```
 $('#date_to').datepicker("option","maxDate",rent_date_to);      
        }
        compute(); //Add compute
    } 
```

示例：[小提琴](http://jsfiddle.net/axqyR/)

# android - 使用预构建的静态库 android

> ID：11611890
> 
> 赞同：1
> 
> 时间：2012-07-23T11:45:43.250
> 
> 标签：android, c++, c, android-ndk, shared-libraries

我在我的android项目中使用freeimage.so，如何从C代码中引用这个库？或者是否需要访问这个库中的函数？更多信息：我已将该功能放在项目中的armeabi文件夹中请向我提供您的宝贵建议提前感谢您的宝贵努力

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:10:30.863

.so 是动态库（又名共享对象），而不是静态库。

要直接从 C 代码使用 .so 文件，您可以使用 dlfcn POSIX API。就像 WinAPI 中的 LoadLibrary/GetProcAddress 一样。

```
#include <dlfcn.h>

// sorry, I don't know the exact name of your FreeImage header file
#include "freeimage_header_file.h"

// declare the prototype
typedef FIBITMAP* ( DLL_CALLCONV* PFNFreeImage_LoadFromMemory )
         ( FREE_IMAGE_FORMAT, FIMEMORY*, int );

// declare the function pointer
PFNFreeImage_LoadFromMemory LoadFromMem_Function;

void some_function()
{
    void* handle = dlopen("freeimage.so", RTLD_NOW);

    LoadFromMem_Function = 
            ( PFNFreeImage_LoadFromMemory )dlsym(handle, "FreeImage_LoadFromMemory" );

    // use LoadFromMem_Function as you would use
    // statically linked FreeImage_LoadFromMemory
} 
```

如果您需要静态的，请获取`libfreeimage.a`（或自己构建）并添加链接器指令`-lfreeimage`。

# sql - 对一列求和，直到另一列中的特定值

> ID：11611891
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:45:43.803
> 
> 标签：sql, sql-server

我有一个表格，按执行顺序列出活动及其持续时间，即表格按时间排序。它主要有四列：

person_ID、duration、activity_ID、time

如何将持续时间相加，直到达到某个 activity_ID？activity_ID 描述的活动可以按任何顺序出现。

例如，该表可以列出您白天的活动，例如起床、淋浴、刮胡子、吃饭、穿衣、穿鞋。顺序和活动因人和天而异。

我想总结所有活动的持续时间，直到某个活动（例如“穿衣服”）然后停止。我如何在 sql 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:06:51.243

不确定这是否是您要查找的内容，而是一种通用技术：根据您是否要包含它来打开或关闭一行的标志，然后将所有带有该标志的记录相加。

```
create table activity( person_ID number, duration number, activity_ID number)

insert into activity values(1, 1, 1);
insert into activity values(1, 2, 2);
insert into activity values(1, 3, 3);
insert into activity values(1, 4, 4);
insert into activity values(1, 5, 5);

insert into activity values(2, 10, 1);
insert into activity values(2, 20, 2);
insert into activity values(2, 30, 3);
insert into activity values(2, 40, 4);
insert into activity values(2, 50, 5);

SELECT person_id, SUM( CASE WHEN activity_id <= 3 THEN duration ELSE 0 END ) AS sum_till_3
  FROM activity
  GROUP BY person_id
  ORDER BY person_id

PERSON_ID SUM_TILL_3
--------- ----------
        1          6 
        2         60 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:26:50.713

以下是使用常规窗口函数的方法：

```
select t.user_id, sum(time <= activity_time then duration else 0 end)
from (select t.*,
             min(activitytime) over (partition by user_id) as activitytime
      from (select t.*,
                   (case when activity_id = xxx then 1 else 0 end) as isactivity,
                   (case when activity_id = xxx then time end) as activitytime,
            from t
           ) t
      ) t
group by user_id 
```

这只是找到每个用户发生活动的最短时间，然后将他们的持续时间相加。

# silverlight - 如何根据我的数据在 Silverlight Datagrid 中启用、禁用复选框列

> ID：11611892
> 
> 赞同：0
> 
> 时间：2012-07-23T11:45:44.163
> 
> 标签：silverlight, datagrid, checkbox

我有一个 silverlight 数据网格，其中第一列是复选框列。

看起来像这样..

```
 <sdk:DataGridCheckBoxColumn Header ="Select" Binding="{Binding Path=IsChecked ,Mode=TwoWay}" ></sdk:DataGridCheckBoxColumn> 
```

这将根据我的绑定属性 IsChecked 选中或取消选中。

我还有一个绑定属性 IsCheckBoxEnabled。

是否可以使用此属性启用禁用复选框。

像这样的东西。

```
<sdk:DataGridCheckBoxColumn Header ="Select" IsReadOnly={Binding IsCheckBoxEnabled} Binding="{Binding Path=IsChecked ,Mode=TwoWay}" ></sdk:DataGridCheckBoxColumn> 
```

虽然上面的行不起作用。我错过了什么吗？我不想在后面的代码中处理它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T11:49:25.870

我有同样的问题：

[Silverlight，datagrid，修改列上的自动生成列更改单元格内容的可见性](https://stackoverflow.com/questions/6058379/silverlight-datagrid-autogenerated-columns-on-modified-column-change-cell-visi)

这就是我找到并修复它的方式。

# java - 减少 Swing 中 JWebBrowser 的重叠

> ID：11611904
> 
> 赞同：1
> 
> 时间：2012-07-23T11:46:33.220
> 
> 标签：java, swing

我正在开发基于 Swing 的应用程序。

我的问题是我使用[JWebBrowser](http://djproject.sourceforge.net/ns/documentation/javadoc/chrriis/dj/nativeswing/swtimpl/components/JWebBrowser.html)并将一个放在可滚动面板中。当我向下滚动面板时，Web 浏览器与应用程序的面板/框架重叠。

我该怎么做才能使浏览器不与面板重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:30:21.897

我在这里没有看到答案，所以作为一个在这条崎岖不平的道路上走过的人，我可以对这些问题表示同情，并希望提供一些指导。

首先，它`JWebBrowser`是一个 AWT 重量级组件，如果没有一些干预，它在 Swing 中不能很好地发挥作用（因为它使用了轻量级组件）。

像这样实例化`JWebBrowser`友好的 Swing 集成的第一步：

```
new JWebBrowser(NSComponentOptions.destroyOnFinalization(),
                NSComponentOptions.constrainVisibility(),
                NSComponentOptions.proxyComponentHierarchy()) 
```

单独的实例化应该可以防止浏览器与 Swing 轻量级组件重叠，但是，除非您执行一些额外的步骤，否则它不会像您对透明度或图层所期望的那样工作。

因此，在构建过程中，调用这些：

```
webBrowser.setDoubleBuffered(true);
webBrowser.getNativeComponent().createBackBuffer(); 
```

然后，在 Web 浏览器与任何类型的透明度或图层一起使用之前，调用这些：

```
rects[0] = webBrowser.getBounds();
webBrowser.getNativeComponent().updateBackBuffer(rects); 
```

这些调用将在使用组件之前重新绘制后备缓冲区，因此在使用时，它将与最新的后备缓冲区一起显示，并且在那时看起来很像常规的 Swing 组件。

所有这些都有一些细微差别，但这是基础知识，应该足以让任何人开始使用它。

# objective-c - dyld: F_ADDFILESIGS 失败 .... with errno=1

> ID：11611906
> 
> 赞同：1
> 
> 时间：2012-07-23T11:46:40.223
> 
> 标签：objective-c, xcode, cocoa, dylib

我使用 Xcode 创建了一个 C++ 动态库。当我尝试在我的应用程序中加载此动态库时，我收到以下错误：

> dyld：TestApp.app/DylibTest.dylib 的 F_ADDFILESIGS 失败，errno=1

为了解决这个问题，我需要做什么？

# c - “真实”的多重定义——但不是吗？

> ID：11611925
> 
> 赞同：1
> 
> 时间：2012-07-23T11:47:13.630
> 
> 标签：c

我有一个 double 类型的 bool，所以已添加到标题中：

```
typedef double bool;
extern bool true;
extern bool false; 
```

和：

```
bool true = 1.0;
bool false = 0.0; 
```

在相应的 C 文件中。

但是，我现在有多个 true 的错误定义，false 的定义相同，指向 C 文件中第一个函数的第一行。显示“先前声明在这里”的错误指向同一行......它始终指向它的文件中首先放置哪个函数没有任何区别。

我的头文件，虽然包含在一个通用头文件中，但确实有包含保护，所以我希望那里*不应该*有多个 true 和 false 声明。

我已经使用 vars tTrue 和 tFalse 将 typedef 更改为 tBool，这解决了问题，但我不明白为什么它首先会发生？由于代码中仍然有一些使用 true 和 false 的 bool 类型，因此编译器似乎已经将 true 和 false 定义为 ints ......虽然我不认为 C 这样做了

我使用的是使用 mingw 的 dev-c++ 4.9.9.2 IDE，但我不确定 mingw 是哪个版本。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:18:43.190

在我看来，您的参数根本不是[布尔](http://en.wikipedia.org/wiki/Boolean_data_type)值。您有一个浮点参数，具有离散数字 0.0 和 1.0 的特殊情况。创建两个`double`常量而不是一个类型。

C99 增加了类型`_Bool`、**宏** `bool`、**宏** `true`和**宏** `false`的定义。尝试在标题中插入以下内容：

```
#if __bool_true_false_are_defined
# error "stdbool.h has been included"
#endif
#ifdef bool
# error "bool is already DEFINED"
#endif
#ifdef true
# error "true is already DEFINED"
#endif
#ifdef false
# error "false is already DEFINED"
#endif 
```

如果其中任何一个着火了，那么你在某处包含了*stdbool.h 。*您应该能够使用`#undef`这三个宏，然后安全地设置您的类型。当然，如果其他人期望`bool`是一个小的整数值并且有更多的风格问题你可以动摇，这可能会破坏。

ISO/IEC 9899:1999 确实对许多团体在添加到标准之前已经定义了自己的布尔类型这一事实做出了让步。这是将 , 和 定义`bool`为`true`宏`false`而不是新关键字的基本原理。但是，明确包含以下警告：

> **7.26.7 布尔类型和值`<stdbool.h>`**
> 
> 取消定义然后可能重新定义宏的能力**`bool`**, **`true`**, 和**`false`**是一个过时的功能。

# html - 开始 HTML5 应用程序编程

> ID：11611926
> 
> 赞同：2
> 
> 时间：2012-07-23T11:47:22.413
> 
> 标签：html

我是一名中间件程序员，曾在 Unix 和 Windows 上工作，主要使用 C 和电信领域（VoIP、移动和协议）。但是，我精通 perl 和 ruby​​，并且接触过 html 和 javascript。

现在我开始开发机顶盒，我需要开发 HTML5 应用程序，因为浏览器是机顶盒的开发平台。现在我需要有关如何开始使用 HTML5 应用程序编程的帮助。我已经阅读了有关 HTML5 功能（如视频、画布等）的文章和书籍。但我没有遇到任何教我动手实践 HTML5 应用程序开发的东西。说 C 的“Hello World”示例。

可能是最初的摩擦阻碍了从电信到网络编程的过渡，尽管领域之间的界限长期以来一直很模糊。为了混淆这个问题，我遇到了很多可供开发的框架和插件，例如 Sencha、JQuery for DOM 等。

简而言之 - 我如何开始 HTML5 应用程序开发？如果我需要使用任何特定的框架，请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:58:10.000

HTML 5 的一些重要资源：

[HTML5 备忘单](http://www.smashingmagazine.com/2009/07/06/html-5-cheat-sheet-pdf/)

[推动网络向前发展](http://movethewebforward.org/)

[HTML5 准备就绪](http://html5readiness.com/)

[深入了解 HTML5](http://diveintohtml5.info/)

[Google 从头开始​​的 HTML、CSS 和 Javascript](http://code.google.com/edu/submissions/html-css-javascript/)

[Opera Web 标准课程](http://dev.opera.com/articles/view/1-introduction-to-the-web-standards-cur/#toc)

[SitePoint](http://reference.sitepoint.com/) HTML,CSS,JS + 功能支持列表

[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs)中级 CSS 和优秀的 JavaScript

还有几个……

# mysql - SQL查询根据条件选择记录？

> ID：11611931
> 
> 赞同：0
> 
> 时间：2012-07-23T11:47:57.903
> 
> 标签：mysql, sql

我有一点 SQL n00b 时刻。假设我有一个包含两个表的房地产网站：`properties`和`features`，以及一个连接它们的表。如果我有一个搜索表单，我如何构建我的查询以仅选择具有**所有**选定条件的属性？

例如，标准将通过复选框以数组的形式发布：

```
Array
(
    [features] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 5
        )
) 
```

如何从我的记录中选择`properties`具有 ID 为 1、2 和 5（可能还有其他）的特征，但只有一个或两个属性不匹配的记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:51:18.993

您可以过滤连接表以查找感兴趣的功能，然后按属性分组并将结果集限制为仅包含所需记录数的组：

```
SELECT   properties.*
FROM     properties JOIN propfeatures USING (property_id)
WHERE    propfeatures.feature_id IN (1,2,5)
GROUP BY property_id
HAVING   COUNT(DISTINCT propfeatures.feature_id) = 3 
```

当然，如果保证唯一性，您可以节省`DISTINCT`操作并简单地使用`COUNT(*)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:00:02.597

如果`properties`和`features`表通过表中的列连接`feature_id`到`properties`表`id`中`features`，那么我们可以这样做：

```
SELECT a.* FROM `properties` AS a JOIN `features` AS b WHERE 
a.`feature_id`=b.`id` AND b.`id` IN (1,2,5) ORDER BY a.`feature_id` ASC; 
```

希望这可以帮助。

# ruby - Twitter gem - 如何获取推文的纬度和经度？

> ID：11611932
> 
> 赞同：1
> 
> 时间：2012-07-23T11:48:06.000
> 
> 标签：ruby, twitter, rubygems, ruby-on-rails-3.2, twitter-gem

如何使用 Twitter gem 获取推文的经纬度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:41:25.420

我花了一段时间才弄清楚，但像这样：

```
Twitter.status(227376948400230400).place.bounding_box.coordinates 
```

希望这可以帮助。

# c# - 获取 NullReferenceException

> ID：11611936
> 
> 赞同：5
> 
> 时间：2012-07-23T11:48:13.857
> 
> 标签：c#

我得到这个：

```
 private object setReportValues(object report, FormCollection values)
    {
        PropertyInfo[] properties = report.GetType().GetProperties();
        foreach (PropertyInfo property in properties)
        {
            string val = values.GetValue(property.Name).ToString();
            property.SetValue(report, val, null);
        }
        return report;
    } 
```

异常开启`string val = values.GetValue(property.Name).ToString();`。我必须先检查空值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:50:08.727

> 我必须先检查空值吗？

在这条线上，是的：

```
string val = values.GetValue(property.Name).ToString() 
```

仅仅是因为该特定属性的价值*可能*是`null`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T11:52:08.037

我会四处走动，并建议在提供`property.Name`的 in 中没有财产`values`。因此，您对 values.GetValue 的调用返回 null。当您尝试对该空值执行 ToString() 时，它会抱怨。

简而言之，您的 values 变量包含什么？

更新：

根据提供的值是 FormsCollection 的信息，您的属性集合很可能包含一些您没有 FormsCollection 字段的属性。发生的情况是您尝试获取此字段，它返回一个空值，然后您调用 ToString ，导致一切中断。

当你遇到它们时，我会颠倒我的策略并循环通过我的 FormsCollection 来获取属性。另一种方法是保持原样，并在执行 ToString 之前检查 null。

PS：我希望您在表单上表示的所有属性都是字符串，否则会损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:51:42.613

为什么要勉强`.ToString()`？`null`对大多数事情来说是一个完全合法的价值。目前尚不清楚是什么`values`，所以我假设它来自您自己的代码，但是：

```
object val = values.GetValue(property.Name);
property.SetValue(report, val, null); 
```

根据什么`values` *是*，您可能还想检查“有一个值，即为空”与“没有任何定义的值”之间的区别。就个人而言，我*希望*做类似的事情：

```
object val;
if(values.TryGetValue(property.Name, out val)) {
    property.SetValue(report, val, null);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-01T00:44:31.133

刚刚遇到了同样的问题，但我找到了一个无需使用循环的解决方案：

```
private object setReportValues(object report, FormCollection values)
{
    PropertyInfo[] properties = report.GetType().GetProperties();
    foreach (PropertyInfo property in properties)
    {
        string val = values.GetValue(property.Name)?.ToString();
        property.SetValue(report, val, null);
    }
    return report;
} 
```

我通过`?`在`...property.Name)`.

# c - 使用 zlib 解压缩 zip 文件

> ID：11611950
> 
> 赞同：12
> 
> 时间：2012-07-23T11:49:36.530
> 
> 标签：c, zlib, unzip, compression

我有一个 archive.zip，其中包含两个加密的“.txt”文件。我想解压缩档案以检索这两个文件。

这是我到目前为止所做的：

```
FILE *FileIn = fopen("./archive.zip", "rb");
if (FileIn)
    printf("file opened\n");
else
    printf("unable to open file\n");

fseek(FileIn, 0, SEEK_END);
unsigned long FileInSize = ftell(FileIn);
printf("size of input compressed file : %u\n", FileInSize);

void *CompDataBuff = malloc(FileInSize);
void *UnCompDataBuff = NULL;

int fd = open ("archive.zip", O_RDONLY);
CompDataBuff = mmap(NULL, FileInSize, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, 0);
printf("buffer read : %s\n", (char *)CompDataBuff);

uLongf UnCompSize = (FileInSize * 11/10 + 12);
UnCompDataBuff = malloc(UnCompSize);

int ret_uncp ;

ret_uncp = uncompress((Bytef*)UnCompDataBuff, &UnCompSize, (const Bytef*)CompDataBuff,FileInSize);
printf("size of uncompressed data : %u\n", UnCompSize);

if (ret_uncp == Z_OK){
    printf("uncompression ok\n");
    printf("uncompressed data : %s\n",(char *)UnCompDataBuff);
    }
if (ret_uncp == Z_MEM_ERROR)
    printf("uncompression memory error\n");
if (ret_uncp == Z_BUF_ERROR)
    printf("uncompression buffer error\n");
if (ret_uncp == Z_DATA_ERROR)
    printf("uncompression data error\n"); 
```

我总是收到“解压缩数据错误”，我不知道为什么。然后我想知道如何在我的数据未压缩的情况下检索这两个文件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T23:29:40.607

zip 是一种文件格式，它围绕压缩数据流包装标题和尾部信息，以表示一组文件和目录。压缩后的数据流几乎都是[deflate 数据流](https://www.rfc-editor.org/rfc/rfc1951)，实际上可以通过 zlib 生成和解码。zlib 还提供了`crc32`可用于生成和检查 zip 包装信息中的 crc 值的功能。

zlib 本身不做的是解码和解构 zip 结构。您可以使用[规范](ftp://ftp.info-zip.org/pub/infozip/doc/appnote-iz-latest.zip)编写自己的代码来执行此操作（不是很难做到），或者您可以使用[zlib 发行版的](http://zlib.net/)[contrib/minizip 目录](https://github.com/madler/zlib/tree/master/contrib/minizip)中的 minizip 例程，它提供了打开、访问和关闭 zip 的功能文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-23T12:20:56.157

Zlib 不是用于处理 .zip 文件的库。它支持解压缩 zlib 和 gzip 流，两者都在单个数据流的级别上工作，而不是像 .zip 这样的“存档”格式。

您将需要一个不同的库（例如[libzip](http://www.nih.at/libzip/)；还有许多其他库）来打开和操作 .zip 档案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-26T18:49:58.073

如前所述，zlib 只处理压缩​​，它不归档。当您想要压缩或解压缩时，您正在做的是从恰好是 zip 格式的存档中提取文件（还有其他格式，如 rar、7zip 等）

如果您想创建 zip 或解压缩文件，您必须处理 zip 格式，而 minizip 是一个不错的库，功能强大并且已经存在了很长时间。

有一个 minizip 的贡献[https://github.com/nmoinvaz/minizip](https://github.com/nmoinvaz/minizip)以及如何使用它的示例。并不难，您可以查看 minizip.c 和 miniunz.c 以获取有关如何使用它的代码。*（Minizip 使用 zlib 进行压缩）*

此外，我最终构建了一个包含 minizip 的库，并为其添加了许多不错的功能，使其更易于使用且更面向对象。让您可以执行压缩整个文件夹、流、向量等操作，以及完全在内存中完成所有操作。

回购与示例在这里：[https ://github.com/sebastiandev/zipper](https://github.com/sebastiandev/zipper)

测试版预发布：[https ://github.com/sebastiandev/zipper/releases/](https://github.com/sebastiandev/zipper/releases/)

代码看起来像：

```
Zipper zipper("ziptest.zip");
zipper.add("somefile.txt");
zipper.add("myFolder");
zipper.close(); 
```

# python - OS X 上的 Python 看不到最新的 numpy

> ID：11611953
> 
> 赞同：1
> 
> 时间：2012-07-23T11:49:57.453
> 
> 标签：python, macos, numpy, matplotlib

`easy_install -U numpy`

尝试在 上使用 matplotlib 时`Mac OS X 10.7.5`，似乎`Python`总是找到旧版本，而不是我从站点`numpy`安装的二进制版本。`SourceForge`

当我尝试：

```
>>> 从 matplotlib 导入 pyplot

```

我得到：

```
RuntimeError：针对 API 版本 6 编译的模块，但这个版本的 numpy 是 4

```

（以及更多的错误跟踪）

我寻找答案并尝试：

```
sudo easy_install -U numpy

```

尽管运行时出现错误，但它在我的情况下对其他人有用。我的错误是：

```
RuntimeError：损坏的工具链：无法链接简单的 C 程序
/tmp/easy_install-tntLIw/numpy-1.6.2/numpy/distutils/misc_util.py:252：RuntimeWarning：处理绝对导入时找不到父模块'numpy.distutils'

```

我仍然无法使用`matplotlib`，Python 仍然报告看到`numpy version 1.5.1`

安装预先构建的 Python 组合（如 ）的各种尝试`scipy`都`superpack`产生了相同的结果。

我会很感激一些帮助和建议。

# android - onserviceconnected 从未调用过：android

> ID：11611957
> 
> 赞同：1
> 
> 时间：2012-07-23T11:50:22.270
> 
> 标签：android, android-activity, android-service

如何自己启动服务？我不想从另一个活动启动服务。但我想将服务绑定到活动。我的问题与此链接中描述的完全一样。 [在 bindService 方法之后从未调用过 onServiceConnected，](https://stackoverflow.com/questions/2486692/onserviceconnected-never-called-after-bindservice-method) 即从未调用过我的 onserviceconnected。

```
Messenger mService = null;
public void onServiceConnected(ComponentName className, IBinder service) {
            mService = new Messenger(service);
            Log.d("IMSLogging", "inside onServiceConnected");
        } 
```

从我的活动的 oncreate 开始，我正在调用 bindService.但是当我在执行 mService.send(msg) 时，我得到了一个空指针异常；从 oncreate 开始。（当然，在调用 bindService 之后。）虽然 bindService 返回 true。，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:56:30.300

在收到回拨`mService.send()`之前**，**您不能打电话`onServiceConnected()`。这意味着您不能同时执行`bindService()`和`mService.send()`in `onCreate()`。您需要将`mService.send()`呼叫移至其中一个`onResume()`或移入`onServiceConnected()`或其他地方。

# c - C - if/else 语句

> ID：11611958
> 
> 赞同：1
> 
> 时间：2012-07-23T11:50:24.307
> 
> 标签：c

我相当能胜任 if/else 语句，这是一个非常古老的任务，我最终只完成了部分任务。但我仍然想确切地知道为什么我的代码不起作用。

我希望我的用户输入姓名、身高和性别。然后我的代码将显示一个完整的句子，上面写着“名字是 X 厘米高并且是男性”或“名字是 X 厘米高并且是女性”。

当我输入姓名并输入时，它会立即跳过显示身高和性别。不管我在那之后输入什么，它都会结束程序。

输入姓名：Jack 输入身高 cm：180 性别（男/女）：电脑 $

我一直在玩这个代码一段时间了，但我已经被困了一段时间了。任何帮助将不胜感激。这是我的代码：

```
#include<stdio.h>

int main() {
  char name[30];
  char sex;
  float height; 

  printf("Input name: ");
  scanf("%s", name);
  fflush(stdin);
  printf("Input height in cm: ");
  scanf("%f", &height);
  fflush(stdin);

  printf("sex(M/F): ");
  scanf("%c", &sex);
  if (sex == 'M') 
  {
    printf("%s is %f cm tall and male", name, height);
  }
  else if (sex == 'F')
  {
    printf("%s is %f cm tall and female", name, height);
  }
  printf("\n");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:54:12.173

据我所见，它只跳过了性部分——说实话，这很可悲:-))。

> 然后它立即跳过显示身高和性别
> 
> 输入姓名：Jack 输入身高 cm：180 性别（男/女）：电脑 $

你可以试试这个：

```
scanf(" %c", &sex);
       ^ 
```

空格会导致`scanf`在读取字符之前吃掉空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:01:33.550

`fflush(stdin)`是一个非常糟糕的主意（未定义的行为）。您应该将此调用替换为其他函数调用，例如这个：

```
static void
clean_stdin(void)
{
    int c;
    do {
        c = getchar();
    } while (c != '\n' && c != EOF);
} 
```

有了它，它似乎工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:02:24.693

您在第 9 行缺少一个 & 符号：

```
scanf("%s", name); 
```

应该是：

```
scanf("%s", &name); 
```

也许这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:02:26.753

你也可以试试这个

```
printf("sex(M/F): ");
scanf("%s", &sex); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T16:24:11.707

要从标准输入读取单个字符，您必须使用 getchar() 而不是 scanf("%c", &c) 或将变量类型更改为 char[2] 并使用 scanf("%s", sex)

# django - django-tastypie ModelResource 类中的两个字段集

> ID：11611959
> 
> 赞同：0
> 
> 时间：2012-07-23T11:50:25.097
> 
> 标签：django, tastypie

我正在尝试找到一种在 django-tastypie ModelResource 类中创建两组字段的方法。我希望一组返回模型的所有字段，而另一组只返回字段的子集。我可以创建两个 ModelResource 类，每个类都有两个字段集，但是，我正在寻找更好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:45:48.537

通过将此方法添加到我的资源中，我最终使内容类型脱水

```
def dehydrate(self,bundle):
    bundle.data['type'] = bundle.obj.content_type
    return bundle 
```

然后我在客户端过滤了数据。它不是一个理想的解决方案，但现在已经足够了

# java - Android - 如何区分第一个指针和第二个指针在onTouchEvent中移动

> ID：11611961
> 
> 赞同：1
> 
> 时间：2012-07-23T11:50:43.793
> 
> 标签：java, android, touch, listener, gesture

我想在我的活动中处理一个手势。为此，我在我的 Activity 上覆盖了**公共布尔 onTouchEvent(MotionEvent MEvent)**方法。内容如下所示：

```
motionaction = MEvent.getAction();

if(motionaction == MotionEvent.ACTION_DOWN)
{
    ...
    return true;
}

if(motionaction == MotionEvent.ACTION_UP)
{
    ...
    return true;
}

if(motionaction == MotionEvent.ACTION_MOVE)
{ 
    ...
    return true;
}

motionaction = MEvent.getActionMasked();

if(motionaction == MotionEvent.ACTION_POINTER_DOWN)
{
    ...
    return true;
}

if(motionaction == MotionEvent.ACTION_POINTER_UP)
{
    ...
    return true;
}

return true; 
```

手势如下：

-finger1 在屏幕上保持它的位置（实际上是因为总是有一点点移动）

-finger2 在屏幕上移动。这是我想要抓住的运动。

我可以抓住 5 个动作，但问题是当两根手指在屏幕上时，ACTION_MOVE 会抓住第一根和第二根手指的运动。**MEvent.getActionIndex()**方法不适用于始终返回 0 的 ACTION_MOVE；我唯一能做的就是保存手指 1 的位置并丢弃靠近该点的移动。结果它确实并不完美，有时手指2 的运动会被小指1 的运动“污染”，因为尽管手指保持在屏幕上的位置，但听众会感觉到每个最小的运动。

我该如何改进呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:07:03.993

参考**Quintin Balsdon**的回答：

我的代码中有类似的东西。我在 ACTION_DOWN 情况下保存了手指 1 的位置，然后当手指 2 移动时，我查看移动的 Y 坐标是否超过了保存的手指 1 Y 坐标。如果是这样，则将其称为finger2的运动，否则称为finger1，我在两指模式下将其丢弃。

如果我尝试在一个手指模式下在我的视图上画一个圆圈，我会得到这样的结果：http: [//img208.imageshack.us/img208/8113/onefingercircle.jpg](http://img208.imageshack.us/img208/8113/onefingercircle.jpg)

如果我尝试在两指模式下在我的视图上画一个圆圈，我会得到这样的结果：http: [//img256.imageshack.us/img256/6778/twofingercircle.jpg](http://img256.imageshack.us/img256/6778/twofingercircle.jpg)

因此，在单指模式下它可以完美运行，但在两指模式下却不行。我不知道它是否与手机多点触控处理程序或触摸屏有关。它也可能只是硬件相关，或者我对 API 的误解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:20:07.250

这是由您作为开发人员管理的。您将不得不创建一些布尔变量以在“DOWN”动作发生时设置（为真），然后在“UP”或“MOVE”动作事件发生时取消设置（假）。在下面的代码中，我甚至在“DOWN”发生时维护坐标，并在用户四处移动时进行调整。

```
switch (e.Action) //e is a MotionEvent type
{
    case MotionEvent.ACTION_DOWN:
    {                        
        _prevx = e.getX();
        _prevy = e.getY();
    }
    break;
    case MotionEvent.ACTION_MOVE:
    {
        _xoffset += e.GetX() - _prevx;
        _yoffset += e.GetY() - _prevy;
        Invalidate();

        _prevx = e.GetX();
        _prevy = e.GetY();
    }
    break;
} 
```

如果要进行多指拖动，则需要实现 ScaleGestureDetector.OnScaleGestureListener (http://developer.android.com/reference/android/view/ScaleGestureDetector.OnScaleGestureListener.html)

# android - android 布局设计仅在图形布局中看起来不错，而不在设备中

> ID：11611963
> 
> 赞同：0
> 
> 时间：2012-07-23T11:50:51.363
> 
> 标签：android, android-layout

我尝试为我的 android 应用程序设计一个 xml 布局。它在 android api 级别 10 的 eclipse 图形布局中看起来不错。但是当我在 2.3.3（api 级别 10）的 android 设备中运行相同的设备时，该布局看起来完全不同。

在顶部的文本标题之后，一切都发生了变化

我已经附上了我在 Eclipse 中的图形布局的屏幕截图和来自我的 android 设备的图像

![在此处输入图像描述](../Images/c1bc3df2436ac5ef9cf759fdd81348c0.png)

以下是我的xml文件

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

     <RelativeLayout
        android:id="@+id/frame2_include"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="@drawable/bg">

            <LinearLayout
                android:id="@+id/title_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top">
                <include
                    android:id="@+id/title_include"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    layout="@layout/title" />  
            </LinearLayout>

            <RelativeLayout
                android:id="@+id/r_title_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:background="@drawable/title_bg">
                <TextView
                    android:id="@+id/normal_title_txt"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"
                    android:text="@string/app"
                    android:textAppearance="?android:attr/textAppearanceMedium" />
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/r_frame_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/r_title_layout">

                <ViewSwitcher
                    android:id="@+id/r_frame_viewSwitcher1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">

                    <LinearLayout
                        android:id="@+id/r_frame_image_layout"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_margin="7dp"
                        android:background="@color/white" 
                        android:layout_gravity="center_vertical">
                        <RelativeLayout
                            android:id="@+id/r_round_points"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:background="@drawable/points_bg" >
                            <LinearLayout
                                android:id="@+id/r_center_frame_img_layout"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_centerInParent="true">
                                <TextView
                                    android:id="@+id/r_frame_img_txt1"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:textSize="30dp"
                                    android:text="50"
                                    android:textColor="#000000"
                                    android:textAppearance="?android:attr/textAppearanceMedium" />
                                <TextView
                                    android:id="@+id/r_frame_img_txt2"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="@string/Points"
                                    android:textAppearance="?android:attr/textAppearanceMedium"
                                    android:textColor="#000000" />
                            </LinearLayout>
                        </RelativeLayout>
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/r_frame_map_layout"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent">                    
                        <include
                            android:id="@+id/parii_me_map_view2"
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent"
                            layout="@layout/parii_map" />   
                    </LinearLayout>
            </ViewSwitcher>

            <RelativeLayout
                android:id="@+id/r_merge_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="105dp"
                android:background="@android:color/transparent">

                <ImageView
                    android:contentDescription="@string/app_name"
                    android:id="@+id/merge_bg_img"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/title_bg" 
                    android:layout_centerInParent="true"/>

                <RelativeLayout
                    android:id="@+id/merge_view_pro_layout"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_toLeftOf="@+id/merge_center_img"
                    android:layout_centerVertical="true">
                    <TextView
                        android:id="@+id/merge_view_pro_txt"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="@string/mrg_profile"
                        android:layout_centerInParent="true"
                        android:textAppearance="?android:attr/textAppearanceMedium" />
                </RelativeLayout>

                <ImageView
                    android:contentDescription="@string/app_name"
                    android:id="@+id/merge_center_img"
                    android:layout_width="73dp"
                    android:layout_height="73dp"
                    android:layout_centerInParent="true"
                    android:background="@drawable/ic_launcher" />

                <RelativeLayout
                    android:id="@+id/merge_view_cash_layout"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@+id/merge_center_img"
                    android:layout_centerVertical="true">
                    <TextView
                        android:id="@+id/merge_view_cash_txt"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_centerInParent="true"
                        android:text="@string/mrg_cash"
                        android:textAppearance="?android:attr/textAppearanceMedium" />
                </RelativeLayout>
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/r_edit_box_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="185dp">

                <TextView
                    android:id="@+id/r_remaining_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginLeft="7dp"
                    android:layout_marginRight="3dp"
                    android:gravity="center|center_horizontal"
                    android:text="200"
                    android:textColor="@color/black"
                    android:background="@drawable/ponts_field"
                    android:textAppearance="?android:attr/textAppearanceSmall"  />

                <TextView
                    android:id="@+id/r_remaining_txt"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@+id/r_remaining_label"
                    android:text="@string/Reamins"
                    android:layout_centerVertical="true"
                    android:textColor="@color/black"
                    android:textAppearance="?android:attr/textAppearanceSmall"  />

                <TextView
                    android:id="@+id/r_points_txt"
                    android:layout_toLeftOf="@+id/r_points_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/Parii_Pts"
                    android:layout_centerVertical="true"
                    android:gravity="center"
                    android:textColor="@color/black"
                    android:textAppearance="?android:attr/textAppearanceSmall"  />

                <TextView
                    android:id="@+id/r_points_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_marginRight="7dp"
                    android:layout_marginLeft="3dp"
                    android:text="100"
                    android:gravity="center|center_horizontal"
                    android:textColor="@color/black"
                    android:background="@drawable/ponts_field"
                    android:textAppearance="?android:attr/textAppearanceSmall"  />
            </RelativeLayout>

    </RelativeLayout>

    <TextView
        android:id="@+id/r_items_viewed_txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_below="@+id/r_frame_layout"
        android:maxLines="2"
        android:textColor="@color/black"
        android:textAppearance="?android:attr/textAppearanceSmall" />

     <RelativeLayout
           android:id="@+id/r_bottom_map_layout"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:layout_below="@+id/r_items_viewed_txt"
           android:layout_marginTop="20dp">
          <TextView
               android:id="@+id/r_valid_date"
               android:layout_toLeftOf="@+id/r_points_label"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_centerVertical="true"
               android:layout_marginLeft="10dp"
               android:textColor="@color/black"
               android:textAppearance="?android:attr/textAppearanceSmall"  />

          <ImageButton
                android:contentDescription="@string/app_name"
                android:id="@+id/parii_me_details_switch_mapBtn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginRight="15dp"
                android:layout_centerVertical="true"
                android:background="@drawable/map_sel_btn" />
    </RelativeLayout>
</FrameLayout> 
```

请告诉我我哪里出错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:34:03.683

试试这个：

仅将默认图像替换为内部有 50 分的圆形图像。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="#aba4a4">

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/l1">
    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Back btn"
        android:textColor="#121212"
        android:textSize="18dp" />

    <TextView
        android:id="@+id/txt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Rewards"
        android:textColor="@android:color/black"
        android:textSize="18dp"
        android:textStyle="bold"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="15dp"/>
    </LinearLayout>

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/l2"
        android:layout_below="@+id/l1"
        android:background="#7d7373">
        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Title"
            android:textSize="18dp"
            android:layout_centerHorizontal="true"
            android:textColor="@android:color/white"/>
    </RelativeLayout>

    <ImageView 
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:layout_below="@+id/l2"
        android:background="@drawable/ic_launcher"/>
    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/l3"
        android:background="#7d7373"
        android:layout_centerInParent="true">

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Profile"
            android:textSize="18dp"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:textColor="@android:color/white"
            android:layout_marginLeft="20dp"/>
        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="View"
            android:textSize="18dp"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:textColor="@android:color/white"
            android:layout_marginRight="20dp"/>
    </RelativeLayout>

   <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/ic_launcher"
            android:layout_centerInParent="true"/>

</RelativeLayout> 
```

在其中添加剩余的视图。我认为这必须解决您的问题。

# facebook - facebook喜欢按钮语言按位置选择

> ID：11611968
> 
> 赞同：3
> 
> 时间：2012-07-23T11:51:07.640
> 
> 标签：facebook, button, facebook-like, facebook-likebox

在我看来，创建一个 Facebook Like 按钮是合法的，并且可以根据用户的位置显示类似 (en-US) 或 Gefallt mir (de-DE) 文本。我正在尝试使用 Facebook 链接生成 Facebook 赞按钮：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

不幸的是，结果它包含

```
 js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1"; 
```

或者

```
 js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; 
```

如您所见，我自动选择语言。

如何解决这个问题，以便来自德国的人看到德国 Facebook 的赞按钮，而来自美国的人看到的是英文按钮（“赞”）。

# ios - 为什么 -sizeWithFont: 在代码和调试器中返回不同的结果？

> ID：11611972
> 
> 赞同：0
> 
> 时间：2012-07-23T11:51:15.353
> 
> 标签：ios, iphone, xcode, cocoa-touch, lldb

这一行：

```
NSLog(@"%@", NSStringFromCGSize([@"Test" sizeWithFont:((id)[UIFont systemFontOfSize:12.0f])])); 
```

打印正确的结果：`{24, 15}`.

但是，当我在调试器中执行相同操作时（GDB 或 LLDB 无关紧要），我会得到完全不同的结果：

```
(gdb) p (CGSize) [@"Test" sizeWithFont:((UIFont*)[UIFont systemFontOfSize:12.0f])]
$1 = {
  width = 0, 
  height = 0
} 
```

这发生在模拟器和设备上以及 5.1 最终版 SDK 和 6.0 beta 3 SDK 上。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:03:15.490

好的，深入挖掘，我发现 UIFont 对象的动态分配在调试器中以某种方式失败：

```
(gdb) p (CGFloat) [[UIFont systemFontOfSize:12.0f] pointSize]
$3 = 0
(gdb) po [UIFont systemFontOfSize:12.0f]
<UICFFont: 0x8e4b720> font-family: ".Helvetica NeueUI"; font-weight: normal; font-style: normal; font-size: 0px 
```

所以出于某种原因，在调试器环境中创建的字体对象的字体大小为 0。其他属性看起来不错。

我已将此记录为错误：[rdar://11934937](http://openradar.appspot.com/11934937)

# haskell - 为什么我在尝试“读取”这个值时会出错？

> ID：11611978
> 
> 赞同：1
> 
> 时间：2012-07-23T11:51:38.980
> 
> 标签：haskell, haskell-prelude

.hs 代码：

```
data Person = Person { firstName :: String  
                     , lastName :: String  
                     , age :: Int  
                     } deriving (Eq, Show, Read) 
```

编译：

```
*Main> :load "/home/optimight/baby.hs"  
[1 of 1] Compiling Main             ( /home/optimight/baby.hs, interpreted )  
Ok, modules loaded: Main. 
```

在编译后立即测试时：

```
*Main> read "Person {firstName = \"Michael\", lastName \"Diamond\", age = 43}" :: Person  
*** Exception: Prelude.read: no parse 
```

请指导。为什么会发生此错误以及如何避免此类错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T11:58:01.553

```
lastName \"Diamond\" 
```

缺少一个等号。

```
read "Person {firstName = \"Michael\", lastName = \"Diamond\", age = 43}" :: Person 
```

# image - TileMill with non map images

> ID：11611982
> 
> 赞同：3
> 
> 时间：2012-07-23T11:52:01.483
> 
> 标签：image, html, custom-action, tile

I'm building a web app that will use the tiling, zooming, marker and other functionality associated with map applications, however i dont need to use all this Geolocation and other stuff that TileMill requires as my application will be loading medical images not maps. Is it possible to import a custom image into TileMill? If so how? Maybe TileMill is completely unsuited to my specific application, if so could someone suggest an alternative?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T19:22:17.320

这是可行的，但 Tilemill 可能是你正在寻找的过度杀伤力。像@thisguyzaphod 提到的那些简单的插件可以解决问题。如果您希望使用最先进的磁贴缩放功能，我会使用 Leaflet.js，它可以专门用于非地理内容，例如此页面文档：

[http://omarriott.com/aux/leaflet-js-non-geographical-imagery/](http://omarriott.com/aux/leaflet-js-non-geographical-imagery/)

您可能可以在这里找到一些其他有价值的建议： [Leaflet 是非地图图像的好工具吗？](https://stackoverflow.com/questions/13110763/is-leaflet-a-good-tool-for-non-map-images)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T10:19:56.657

你看过其中一个吗？

*   PanoJS [http://www.dimin.net/software/panojs/](http://www.dimin.net/software/panojs/)
*   jQuery TileZoom [http://labs.webcodingstudio.com/tilegenerator/](http://labs.webcodingstudio.com/tilegenerator/)

这两个库都包含用于从原始照片生成所有图块的脚本和用于在网页上显示这些图块的 JavaScript 库。

# java - 需要一个同时支持mysql和oracle的例子

> ID：11611984
> 
> 赞同：1
> 
> 时间：2012-07-23T11:52:26.593
> 
> 标签：java, hibernate, jpa

> **可能重复：**
> [相同 JPA 类的多个数据库支持](https://stackoverflow.com/questions/11611046/multiple-database-support-for-same-jpa-classs)

我有一张桌子

用户（id，姓名）；

现在我想为表创建 JPA 类，以便它可以支持两个数据库。

id 应该是自动递增的。

请通过提供一些示例帮助我实现同样的目标。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:53:55.143

只需直接转到最便携的[GenerationType.TABLE即可。](http://docs.oracle.com/javaee/6/api/javax/persistence/GenerationType.html#TABLE)它不太依赖于数据库细节，因为递增值是通过 SQL 完成的。我也发现它比 AUTO 更合适，因为相同的生成类型将独立于数据库提供程序使用。你也可以在没有[TableGenerator](http://docs.oracle.com/javaee/6/api/javax/persistence/TableGenerator.html)的情况下使用它，但是因为我们的目标是让它在所有数据库中以完全相同的方式运行，所以我们明确给出了所需的值。

在您的情况下，映射是：

```
@Entity
@TableGenerator(
    name="usersGenerator",
    table="ID_GENERATOR",
    pkColumnName="GENERATOR_KEY",
    valueColumnName="GENERATOR_VALUE",
    pkColumnValue="USERS_ID",
    initialValue = 1,
    allocationSize=1)
public class Users {
    @Id
    @GeneratedValue(strategy= GenerationType.TABLE, 
                    generator = "usersGenerator")
    private Integer value;

    private String name;

    protected Integer getValue() {
        return value;
    }

    protected void setValue(Integer value) {
        this.value = value;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

多个表生成器可以使用同一个数据库表（在这种情况下为 ID_GENERATOR）。如果需要，例如由于 id 的类型，同一个表可以存储多个 pk 和 value 列。

TableGenerator 的名称对于持久性单元来说是全局的，就像一般的生成器名称一样。如果愿意，注释也可以定位到 id 属性。

可能的警告：如果我没记错的话，一些休眠版本组合不支持初始值。这在一般情况下不限制可移植性。只有当我们必须自动生成表并重现完全相同的一组 id 值时，这才是问题。解决方法是在建表后手动插入初始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:21:03.227

发电机类型

**增量**

```
This generator supports in all the databases, database independent
This generator is used for generating the id value for the new record by using the 
```

**顺序**

```
Not has the support with MySql
This generator class is database dependent it means, we cannot use this generator class for all the database, we should know whether the database supports sequence or not before we are working with it 
```

参考这个链接，它可能对你有帮助。

[http://www.java4s.com/hibernate/generators-in-hibernate/](http://www.java4s.com/hibernate/generators-in-hibernate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:25:15.807

您应该选择生成类型 AUTO。我只使用了 .hbm 映射，但我的理解是使用注释它应该看起来像这样：

```
@Entity
public class Employee {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private long id; 
```

# mysql - 快速比较大量二进制数据

> ID：11611997
> 
> 赞同：1
> 
> 时间：2012-07-23T11:53:05.737
> 
> 标签：mysql, database, performance, nosql

我有一个数据库，其中包含大量图像（数百万）和我需要比较的那些图像（由[libpuzzle生成）的内容签名。](http://www.pureftpd.org/project/libpuzzle)

我已经运行了许多不同的替代方案来尝试提高效率，包括各种搜索算法（目前运行速度最快的[levenshtein 差异](http://en.wikipedia.org/wiki/Levenshtein_distance)）和各种数据点作为预过滤器（将比较减少到只有几千个批次图像），但我尝试过的一切仍然会减慢生产使用的速度。我每天添加数千张图片，与完整收藏中的其他所有图片相比，它们需要有自己的签名。

我使用的两种主要存储方法是 CouchDb 和 MySql，它们都需要 10 多个 gig 的数据存储，并且在几百万条记录之后 MySql 运行速度太慢（即使有结果缓存和索引键大小变化，索引使用类似于[这种](https://stackoverflow.com/a/9780314/1358220)方法的方法太大但仍然很慢），并且在 Couch 上它似乎无法处理大型索引。我还考虑过像 Amazon SimpleDB 这样可以解决存储问题的服务，但考虑到如此大的索引的内存需求，我预计会非常昂贵，而且可能不会比 Couch 好。

表结构很简单：

```
ImageId int(11),
Signature VARCHAR(1020) //implemented as text 
```

期望的结果应该是给定 ImageId 的 ImageId(s) 列表。一个简单的自连接（ON 比较函数）太慢了。

我的实现是比较现有图像，并不断将新图像与现有基础进行比较，以实现这两个目标...... 1）识别相同或非常接近相同的图像（包括调整大小、裁剪和微小的颜色变化， 2) 识别相似图像以帮助可能对相似视觉内容的图像感兴趣的图像搜索。libpuzzle 库提供了一个可用于两者的分数（我对前者使用 >95%，对后者使用 >80%）。

基本上我的问题是，有没有人知道
a）不同的数据存储平台
b）使用MySql的技术
c）或其他一些（可能是自定义的）方法
可以用来线性比较大量的二进制数据，在一个非常有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:23:47.553

您链接的“优秀方法”实际上是答案，但它有一个主要问题：它不应该在 MySQL 中完成，这对于那种搜索来说很糟糕，但在 Solr 或 Sphinx 中是专门为那。

因为我知道 Solr，所以你可以这样做：

使用具有恒定长度（最大 ngram 长度 = 最小 ngram 长度）的 ngram 过滤器将索引签名标记为文本 - 这会将签名从链接的答案中拆分为“单词”（令牌）。

```
<fieldType 
   name="signatureNgrams" 
   stored="false" 
   class="solr.StrField"> 
 <analyzer type="index"> 
   <tokenizer 
       class="solr.analysis.NGramTokenizerFactory" 
       minGramSize="4" 
       maxGramSize="4" 
       /> 
   <filter class="solr.LowerCaseFilterFactory"/> 
 </analyzer> 
</fieldType> 
```

使用[http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29](http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29)定义最小相似度（必须匹配多少个 ngram）。

# titanium - 如何在 Titanium 中实现另一个 .js 文件的功能

> ID：11611999
> 
> 赞同：1
> 
> 时间：2012-07-23T11:53:08.870
> 
> 标签：titanium

如何在钛中使用另一个 .js 文件中的函数/方法？

例如 Utils.js

```
var db = Titanium.Database.open('myinfodb');
function addIntoDb(name) {
    db.execute('INSERT INTO info (name) VALUES(?)', name);
    Ti.Ti.API.info(name+' Added to db');
}

function getFromDb() {
    var holddatavar = db.execute('SELECT name FROM info');
    return holddatavar;
}

db.close(); 
```

如何在我当前的 js 文件中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:55:35.040

数据库.js

```
// creates your database if necessary
var db = Titanium.Database.open('myinfodb');
db.execute('CREATE TABLE IF NOT EXISTS [info] (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT)');
db.close();

var addIntoDb = function(name) {
    var db = Titanium.Database.open('myinfodb');
    db.execute('INSERT INTO info (name) VALUES(?)', name);
    Ti.Ti.API.info(name+' Added to db');
    db.close();
}
exports.addIntoDb = addIntoDb; // <=== This exposes the function to another file

// This function would remain accessible only to the file because we didn't export the function
function getFromDb() {
    var holddatavar = db.execute('SELECT name FROM info');
    return holddatavar;
} 
```

然后你可以在其他 JavaScript 文件中使用它来访问它，如下所示：

```
var db = require('/mypath/db'); // NO .js extension on this
db.addIntoDb('Pravin'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:04:09.680

知道了。只是

```
Ti.include('/ui/common/Utils.js'); 
```

和

Utils.js 将是

```
addStudent= function addIntoDb(name) {
    var db = Titanium.Database.open('myinfodb');
    db.execute('INSERT INTO info (name) VALUES(?)', name);
    Ti.API.info(name+' Added to db');
}

getStudent=function getFromDb() {
    var db = Titanium.Database.open('myinfodb');
    var holddatavar = db.execute('SELECT name FROM info');
    return holddatavar;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:53:43.123

如果您不使用 commonJS，那么您可以简单地包含该文件，我的意思是为此类函数创建一个文件，并将该文件包含在您的 current.js 文件中并调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T09:36:30.873

var All = require('ui/common/All');

```
 Tree = require('ui/common/Tree');

    EBOM = require('ui/common/E-BOM');

    MBOM = require('ui/common/M-BOM');

    SBOM = require('ui/common/S-BOM');

//create object instance

var self = Ti.UI.createWindow({

    title:'Products',

    exitOnClose:true,

    navBarHidden:true,

    backgroundColor:'#ffffff',
    /////////////////////////////////////////////////////////////////////////////

    activity: {

        onCreateOptionsMenu: function(e) {

            var menu = e.menu;         

            var menuItem = menu.add({ title: "C-BOM", icon: 'Arrow-Hover.jpg' });

            //menuItem.setIcon("Arrow-Hover.jpg");

            menuItem.addEventListener("click", function(e) {

                 var all = new All();

                        self.add(all);

            });

            (.....) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-28T14:52:38.097

最好是在 /lib 文件夹中创建子文件夹，如 /Utils 并在 /Utils/Utils.js 中放置一个文件。

然后在 index.js 控制器中添加全局变量，如：

> Alloy.Globals.Helpers=Ti.include('/Utils/Utils.js')

当您这样做时，您的文件现在可以在您制作的任何控制器中访问。请注意，这适用于合金，但对于经典钛几乎相同。