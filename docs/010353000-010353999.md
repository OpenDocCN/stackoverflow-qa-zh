# StackOverflow 问答 10353000-10353999

# javascript - 如何访问 json 密钥中的 Json 密钥

> ID：10353000
> 
> 赞同：0
> 
> 时间：2012-04-27T14:59:18.060
> 
> 标签：javascript, jquery, json

我有一个关于 JSON 的问题。我正在使用一个 jquery 插件，它期望 JSON 结构如下：

```
[   { key: "Id" },
            { key: "Username" },
                    { key: "Age" }
        ], 
```

但我的 JSON 看起来像：

```
 [{
        "Employee1": 
        {
          "ID": 43036,
          "Name": XYZ,
          "Age": 21
        },
       "Employee2": 
        {
          "ID": 30436,
          "Name": MNP,
          "Age": 23
        }
    }] 
```

现在我不想更改我的代码，有什么解决方案可以让我在不使用“Employee”的情况下将 Id 、 Name 传递给我的插件 json。我需要我的 JSON 为：

```
[        
        {
          "ID": 43036,
          "Name": XYZ,
          "Age": 21
        }, 
        {
          "ID": 30436,
          "Name": MNP,
          "Age": 23
        }
    ] 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:18:45.490

你需要一个简单的函数来推送对象内部的值，

```
var data = [{
    "Employee1": {
        "ID": 43036,
        "Name": 'XYZ',
        "Age": 21
    },
    "Employee2": {
        "ID": 30436,
        "Name": 'MNP',
        "Age": 23
    }}];

data = data[0];
var output = [];
for (i in data) {
    output.push(data[i]);
} 
```

[**演示**](http://jsfiddle.net/skram/KNmnW/)

**注意：您发布的 JSON 无效，XYZ 和 MNP 是字符串值，我想其他数字也是如此。我将验证留给您。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:07:44.763

像这样的东西？

```
var myObj = [{
        "Employee1": 
        {
          "ID": 43036,
          "Name": XYZ,
          "Age": 21
        },
       "Employee2": 
        {
          "ID": 30436,
          "Name": MNP,
          "Age": 23
        }
    }];

var jsonObj = [];
$.each(myObj[0], function(key, val){
     jsonObj.push({ key: val.ID });
     jsonObj.push({ key: val.Name });
     jsonObj.push({ key: val.Age });
}); 
```

# visual-c++ - 错误代码 429：Active X 组件无法创建对象

> ID：10353001
> 
> 赞同：0
> 
> 时间：2012-04-27T14:59:18.980
> 
> 标签：visual-c++, com, excel, vba

我有一个在 VBA 中引用的 .Net 类库，一切顺利。当我尝试在其他机器上使用相同的 Excel 文件时，错误是：`Error Code 429:Active X component Cannot create Object`

错误是记录线

```
set a = createobject("dllname.classname") 
```

但是我在运行时注册 DLL 并且它没有给出该行的错误

```
Dim a as dllname.classname 
```

这个错误发生在我的 Win-7 电脑上，而在 Win-XP 电脑上工作得很好。请帮忙，因为我需要使用 Excel 工作表运行我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:06:42.933

[这篇文章](http://www.simple-talk.com/dotnet/visual-studio/build-and-deploy-a-.net-com-assembly/)对确保您的程序集是后期可绑定的，即通过`createobject()`.

要点：

*   确保您的程序集包含 ProgID 属性
*   在目标（部署）机器上使用`regasm`来做COM类的实际注册

# javascript - 在 HTML 中隐藏和显示跨度

> ID：10353013
> 
> 赞同：3
> 
> 时间：2012-04-27T15:00:13.967
> 
> 标签：javascript, jsp, html

我有一个 JSP 页面，上面有一些`input submit`按钮。现在基于我从`AJAX`我想要控制的请求中获得的一些值`display and hiding of these input buttons`。所以我`spans`为每个输入创建了。并且基于我从 AJAX 请求中收到的变量值，我在那里操作显示属性。但我没有得到正确的结果。

这是我的代码：

```
<td style="width: 600px"><span id="startspan"><input name="start" value="startActivity" type="submit" id="startbuttonid"></span></td>
       <td style="width: 600px"><span id="holdspan"><input name="start" value="holdActivity" type="submit" id="holdbuttonid"></span></td>
       <td style="width: 600px"><span id="cancelspan"><input name="start" value="cancelActivity" type="submit" id="cancelbuttonid"></span></td>
       <td style="width: 600px"><span id="closespan"><input name="start" value="closeActivity" type="submit" id="closebuttonid"></span></td> 
```

我`java script`正在编写代码以显示或隐藏它们的代码是::

```
if(temp1[15]=="InProcess"){
        document.getElementById('startspan').style.display='none';
        document.getElementById('holdspan').style.display = 'block';
        document.getElementById('cancelspan').style.display = 'block';
        document.getElementById('closespan').style.display = 'block';
    }
    if(temp1[15]=="New"){
        document.getElementById('startspan').style.display='block';
        document.getElementById('holdspan').style.display = 'none';
        document.getElementById('cancelspan').style.display = 'block';
        document.getElementById('closespan').style.display = 'none';
    } 
```

这里基于`temp1[15]`我收到的变量值。我想显示或隐藏那些输入提交按钮。我正在以正确的方式进行操作，例如定义跨度或需要一些更正。基本上所有这些输入按钮都在里面`dialog box <div>`，只有当我写了我的隐藏或显示跨度代码（写在上面）的函数被触发时，它才会打开。需要帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:07:16.323

CSS 中的`display`属性还决定了它是像块（DIV、P 等）还是内联元素（span、b 等），以及它的可见性。

对于您的跨度，您希望这样做：

```
document.getElementById('span').style.display = 'inline'; 
```

如果它是一个 DIV 你会使用`block`，如果它是一个 IMG 你会使用`inline-block`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T19:01:03.537

由于它在小提琴中而不是在您的主代码中工作，因此我怀疑在加载 DOM（或生成 DOM）之前执行的代码可能存在问题`dialog box <div>`。您提到您正在使用 AJAX。确保显示或隐藏按钮的代码在 AJAX 成功回调中。

# c++ - C++ Win 异步套接字。是否可以中断 select()

> ID：10353017
> 
> 赞同：1
> 
> 时间：2012-04-27T15:00:34.080
> 
> 标签：c++, windows, sockets, events

我有一个监听线程，等待使用 select 和 FD_SET 在几个套接字上读取。故事是。在某个时候，我将向池中添加另一个套接字，并且需要中止选择并重新初始化选择的 FD_SET 数组。我有一个事件来表示池更改。但是 select 如何对我的事件做出反应？select() 此时使用 timeval 等待间隔为 20 秒，我不想将时间更改为较低的值。我不希望经常通过超时重新启动 select() ...

有没有办法中止选择？通知/重新启动选择和强制使用新的套接字列表的正确方法是什么（至少一个套接字将添加到池中）

还有另一个问题——Msdn 说“选择函数确定一个或多个套接字的状态，必要时等待，以执行同步 I/O。” 这是否意味着 select 不适用于使用异步操作的套接字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T20:40:14.853

使用`WSAEventSelect()`and`WSAWaitForMultipleEvents()`而不是`select()`. 这样，您的池可以创建一个单独的事件，`WSACreateEvent()`并在需要时发出信号`WSASetEvent()`以唤醒它`WSAWaitForMultipleEvents()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:10:09.393

如果您希望 select() 唤醒，最简单的方法是将一个字节发送到 select() 正在等待读取访问的套接字之一。在不影响现有套接字功能的情况下实现该功能的一种方法是专门为此目的创建一对套接字，然后将其连接（）到另一个。

# api - 是否有 craigslist.org 的开发人员 API

> ID：10353021
> 
> 赞同：72
> 
> 时间：2012-04-27T15:00:48.200
> 
> 标签：api, craigslist

我正在构建一个应用程序，并希望通过单击按钮自动发布到 craigslist。有没有办法做到这一点？

我有一个帐户，将为每个帖子付费。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-27T15:08:09.753

最终没有。您可以使用来自 RSS 提要的搜索字符串查询列表，例如：

```
http://YOURCITY.craigslist.org/search/sss?format=rss&query=SearchString 
```

至于发帖，craiglist 还没有开放他们的 API。但是，这个 SO Question 可能会提供一些启示和可能的解决方案 - 尽管不是一个非常可靠的解决方案。

[Craigslist 自动发布 API？](https://stackoverflow.com/questions/3633830/craigslist-automated-posting-api)

给 craigslist 写个便条，要求他们打开他们的 API，

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-14T17:34:36.320

Craigslist 确实有一个“批量发布界面”，它允许通过 HTTPS POST 一次发布多个帖子。看：

[http://www.craigslist.org/about/bulk_posting_interface](http://www.craigslist.org/about/bulk_posting_interface)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-14T13:49:18.960

Craiglist 对他们的数据非常吝啬，他们甚至不遗余力地阻止抓取。如果你[在这里使用 ruby​​ 是我写的一个 gem](https://github.com/mark-nery/craigslist_scraper)来帮助抓取 craiglist 数据，你可以搜索多个城市，计算平均价格等......

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-09-24T02:51:16.693

大家好消息！Craigslist 现在实际上已经发布了一个批量发布 api！

[享受](https://www.craigslist.org/about/bulk_posting_interface)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-06-02T14:29:31.290

我能找到的最接近的是[3taps](https://3taps.com/developers-overview.html)。[3taps 被 Craigslist 起诉](http://en.wikipedia.org/wiki/Craigslist_Inc._v._3Taps_Inc.)，其结果是“可以通过将某些查看者（即竞争对手）列入黑名单来选择性地审查对公共网站上公共数据的访问”，并因此声明“3taps 将因此仅从公共来源访问相同的数据，保留对公共数据的公开和平等的访问权”。

# java - 将文件对象写入另一个位置

> ID：10353022
> 
> 赞同：0
> 
> 时间：2012-04-27T15:00:58.053
> 
> 标签：java, swing

我选择了使用文件

```
File file = fileChooser.getSelectedFile(); 
```

现在我想在用户单击保存按钮时将用户选择的这个文件写入另一个位置。如何使用摇摆来实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:41:40.893

要选择您需要类似的文件，

```
 JFileChooser open = new JFileChooser();
    open.showOpenDialog(this);
    selected = open.getSelectedFile().getAbsolutePath(); //selected is a String 
```

...并保存副本，

```
 JFileChooser save = new JFileChooser();  
    save.showSaveDialog(this);  
    save.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    tosave = fileChooser.getSelectedFile().getAbsolutePath(); //tosave is a String

    new CopyFile(selected,tosave); 
```

... copyFile 类将类似于，

```
public class CopyFile {

    public CopyFile(String srFile, String dtFile) {

        try {
            File f1 = new File(srFile);
            File f2 = new File(dtFile);
            InputStream in = new FileInputStream(f1);

            OutputStream out = new FileOutputStream(f2);

            byte[] buf = new byte[1024];
            int len;
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
            in.close();
            out.close();
            System.out.println("File copied.");
        } catch (FileNotFoundException ex) {
            System.out.println(ex.getMessage() + " in the specified directory.");
            System.exit(0);
        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

* * *

也看看这个问题：[How to save file using JFileChooser?](https://stackoverflow.com/q/2531037/977676) #MightBeHelpfull

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:06:25.777

Swing 只会给你位置/文件对象。您将不得不自己编写新文件。

要复制文件，我将向您指出这个问题：[在 Java 中复制文件的标准简洁方法？](https://stackoverflow.com/questions/106770/standard-concise-way-to-copy-a-file-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:07:35.677

将文件读入 a`InputStream`然后将其写出到`OutputStream`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:07:46.427

如果您使用的是 JDK 1.7，则可以使用[java.nio.file.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)类，它提供了几种复制方法来将文件复制到给定的命运。

# c++ - 在地图容器中使用映射值重载 << 运算符

> ID：10353026
> 
> 赞同：3
> 
> 时间：2012-04-27T15:01:22.037
> 
> 标签：c++, pointers, reference, map, g++

**我在重载 operator<<**以与我的地图中的**映射值**一起使用时遇到问题：

```
map<string,abs*> _map;
// that my declaration, and I have filled it with keys/values 
```

**我试过这两个：**

```
std::ostream& operator<<(std::ostream& os, abs*& ab) 
{ 
    std::cout << 12345 << std::endl; 
}

std::ostream& operator<<(std::ostream& os, abs* ab)
{ 
    std::cout << 12345 << std::endl; 
} 
```

在我的程序中，我只是调用：

```
std::cout << _map["key"] << std::endl; 
// trying to call overloaded operator for mapped value
// instead it always prints the address of the mapped value to screen 
```

我也试过：

```
std::cout << *_map["key"] << std::endl; 
// trying to call overloaded operator for mapped value
// And that gives me a really long compile time error 
```

任何人都知道我可以改变什么来让它输出映射值的值，而不是地址？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:20:33.200

不要`abs`用作类型 -`abs`是在标头中声明的函数`cstdlib`。您没有提供该类型的声明，因此此示例使用了一些虚构的`Abs`类型：

```
#include <map>
#include <string>
#include <iostream>

struct Abs
{
    Abs(int n) : n_(n){}
    int n_;
};

std::ostream& operator<<(std::ostream& os, const Abs* p) 
{ 
    os << (*p).n_;
    return os;
}

int main(int argc, char** argv)
{
    std::map<std::string, Abs*> map_;
    Abs a1(1);
    Abs a2(2);

    map_["1"] = &Abs(1);
    map_["2"] = &Abs(2);
    std::cout << map_["1"] << ", " << map_["2"] << std::endl;
} 
```

输出：

```
 1, 2 
```

# facebook - 如何查看隐藏了我的粉丝页面新闻的用户？

> ID：10353029
> 
> 赞同：0
> 
> 时间：2012-04-27T15:01:31.320
> 
> 标签：facebook, facebook-like, facebook-page

我在 facebook 上有一个粉丝页面，有 20k 粉丝，我可以看到有多少用户在他们的墙上隐藏了我的新闻/帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:54:18.013

没有办法做到这一点。页面洞察力将向您显示您的页面的覆盖面，但它不会提供关于谁隐藏了您的帖子的明确数字。

# javascript - iframe 源更改后重定向用户？

> ID：10353034
> 
> 赞同：0
> 
> 时间：2012-04-27T15:01:43.017
> 
> 标签：javascript, iframe, html

我正在用 javascript 编码，我知道它不是一个简洁的解决方案。

这是我的代码。我正在使用溢出 iframe。我希望用户在 iframe 源更改后被重定向。但是我的代码在 iframe 源更改后不重定向用户。

**请注意**：我希望将 iframe 放置在页面上并且我想检查 iframe 内链接的历史记录以检测 iframe 源更改而不是页面源更改。我无法控制 iframe 的内容。它是一个跨域 iframe。例如 [http://freestarbucksgiftcard4u.blogspot.in/2012/04/stalk-overflow-testing.html](http://freestarbucksgiftcard4u.blogspot.in/2012/04/stalk-overflow-testing.html)

另外，iframe 内的链接是随机的，所以我无法确定。我可以将其与历史进行比较以检测变化。

**框架代码：**

```
 <div class="offerlink"
 style="overflow: hidden; width: 467px; height: 321px; position: relative;" id="i_div"><iframe name="i_frame" src="http://www.villanovau.com/form/pm/070809_vu_pm_save/?source=193664zv1&utm_source=Quigo&utm_medium=PPC&utm_campaign=VU_PM&WT.mc_id=4321" style="border: 0pt none ; left: -518px; top: -274px; position: absolute; width: 1242px; height: 616px;" scrolling="no"></iframe></div> 
```

**Javascript代码：**

```
var Delay = 0;
        var AppearDelay = 10;
        var oldHistLength = history.length;

    var once_per_session=1;
    var unknown=true;

    function setcookie() {
    if (unknown==false){
    document.cookie="alerted=yes"
    }
    }  

    function get_cookie(Name) {
    var search = Name + "="
    var returnvalue = "";
    if (document.cookie.length > 0) {
    offset = document.cookie.indexOf(search)
    if (offset != -1) { // if cookie exists
    offset += search.length
    // set index of beginning of value
    end = document.cookie.indexOf(";", offset);
    // set index of end of cookie value
    if (end == -1)
    end = document.cookie.length;
    returnvalue=unescape(document.cookie.substring(offset, end))
   }
    }
    return returnvalue;
   }

    setInterval ( "checkHistory()", 1000 );

     function checkHistory()
    {
   if (oldHistLength != history.length)
   {
   redirect();
   oldHistLength = history.length;
   }
   }

    $(document).ready(function()
    {
        $('.offerlink').click(function()
        {
            setTimeout('redirect()', Delay*1000);
        });

    }); 
```

这个解决方案对我不起作用。请帮我调试这个javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:06:45.617

如果您可以控制 iframe 中生成的内容，则可以这样做：

```
<body onload="top.location.href='newpath.html'"> 
```

或者更好的脚本版本

```
<script type="text/javascript">
window.onload=function(){top.location.href='newpath.html';}
</script> 
```

在里面

最好的，迈克尔

# php - 在 PHP 中使用 CDATA 解析 XML 提要

> ID：10353036
> 
> 赞同：0
> 
> 时间：2012-04-27T15:01:53.427
> 
> 标签：php, xml, xml-parsing

```
<item>
  <title>Bazinga !</title>
  <ext:originalFilename><![CDATA[BVT-ch4-pt18.mp4]]></ext:originalFilename>
</item> 
```

我`SimpleXmlElement`用来解析提要，现在提要已更改并且不再能够从提要中检索 originalFilename。我现在正在使用这个

```
$xml = new SimpleXmlElement($feed); 
```

但是这个 $xml 没有关于 originalFilename 的数据。我怎样才能获得 CDATA 以及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:07:08.940

这个问题以前见过。您必须注册您正在使用的命名空间，查看这个 SO 问题：[Parse XML with Namespace using SimpleXML](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)

# mysql - Mysql查询在每日记录上建立分组日期

> ID：10353037
> 
> 赞同：0
> 
> 时间：2012-04-27T15:01:59.590
> 
> 标签：mysql, date

我有一张带有 day_date 和 price 的表格，每条记录显示如下：

```
Day_date   Price
2012-05-20 500
2012-05-21 500
2012-05-22 500
2012-05-23 600
2012-05-24 600
2012-05-25 500
2012-05-26 500
2012-05-27 700
2012-05-28 700 
```

我想要做的是显示如下：

```
season 2012-05-20 to 2012-05-22 price 500
season 2012-05-23 to 2012-05-24 price 600
season 2012-05-25 to 2012-05-26 price 500
season 2012-05-27 to 2012-05-28 price 700 
```

我正在尝试使用以下查询来执行此操作：

```
SELECT min(day_add) as start_date, max(day_add) as end_date, price 
FROM table GROUP BY price 
```

通过此查询，我得到以下结果：

```
2012-05-20  2012-05-26  500
2012-05-23  2012-05-24  600
2012-05-27  2012-05-28  700 
```

正如你所看到的，我想做的是第一个记录`price=500`应该是 2012 年 5 月 20 日至 22 日，然后第三名应该是 5 月 25 日至 26 日`price=500`。

由于我按价格分组，因此将季节从 2012 年 5 月 25 日缩短至 26 日。

是否有可能`SELECT`得到我想要的结果？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:14:27.613

问题不在于查询本身，而在于数据，因为没有分组依据。您所要做的就是创造新的价值。

你可以这样做：

```
select min(day_date) minDate, max(day_date) maxDate, price from (
  select day_date, @row := @row + (@price != price) grp, @price := price price
  from t, (select @row := 0, @price := '') init
  order by day_date
) final
group by final.grp, price 
```

在这里，您可以使用[小提琴](http://sqlfiddle.com/#!2/fec74/1)。

# c# - 如何让 2 个“面板”对象同时滚动？

> ID：10353041
> 
> 赞同：1
> 
> 时间：2012-04-27T15:02:07.240
> 
> 标签：c#, .net, panel

我`Panel`在一个表格上有 2 个并排的对象。当我滚动第一个面板时，我希望另一个面板滚动完全相同的数量。

像这样的东西。

```
private void Panel1_Scroll(object sender, ScrollEventArgs e)
{
    Panel2.ScrollPosition() = Panel1.ScrollPosition();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T15:11:49.283

我同意 scottm，但添加了一些有所作为的内容：

```
private void ScorePanel_Scroll(object sender, ScrollEventArgs e)
{
    var senderPanel = sender as Panel;

    if (senderPanel == null)
    {
        // Might want to print to debug or mbox something, because this shouldn't happen.
        return;
    }

    var otherPanel = senderPanel == Panel1 ? Panel2 : Panel1;

    otherPanel.VerticalScroll.Value = senderPanel.VerticalScroll.Value;
} 
```

另一种方式，您总是将 Panel1 更新为 Panel2 的滚动偏移量，因此如果您滚动 Panel2，它实际上不会滚动任何内容。

现在你有了这个方法，你应该订阅两个面板，像这样：

```
Panel1.Scroll += ScorePanel_Scroll;
Panel2.Scroll += ScorePanel_Scroll; 
```

这可能最好在包含面板的表单的 ctor 中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:05:55.810

非常接近，这应该适合你：

```
private void ScorePanel_Scroll(object sender, ScrollEventArgs e)
{
    Panel1.VerticalScroll.Value = Panel2.VerticalScroll.Value;
} 
```

[在这些情况下，阅读 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)总是有帮助的。

# filter - 在链路层丢弃选定的数据包

> ID：10353050
> 
> 赞同：1
> 
> 时间：2012-04-27T15:03:04.300
> 
> 标签：filter, ip, dump, packet, tcpdump

我需要转储一些传入的数据包，然后阻止它们进入堆栈，这样应用程序就不会处理它们。

现在，tcpdump 在第 2 层工作，对吧？所以理想情况下，我应该找到一些我会在 tcpdump 丢弃选定数据包之后立即使用的工具。我在 tcpdump 和丢弃数据包时应用的过滤器将是相同的。

任何已经这样做的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:20:39.733

> 现在，tcpdump 在第 2 层工作，对吧？所以理想情况下，我应该找到一些我会在 tcpdump 丢弃选定数据包之后立即使用的工具。

Tcpdump 从链路层的网络捕获，是的。但是，在这种情况下，“捕获”意味着“被动地进入网络，获取所有接收和发送的数据包的副本”。它不会*以*允许它阻止这些数据包被网络堆栈处理的方式接入网络。可以将其想象为类似于敲击电话线——敲击电话的人可以听到对话，但他们无法阻止对话一侧的人听到另一侧的人在说什么。

> 任何已经这样做的东西？

可能有，但它用来这样做的机制可能会非常依赖于它运行的操作系统。您需要捕获正在运行的数据包的机器是什么操作系统。

# actionscript-3 - AS3 如何根据键盘输入让人物做出不同的动画？

> ID：10353051
> 
> 赞同：0
> 
> 时间：2012-04-27T15:03:06.547
> 
> 标签：actionscript-3, flash, flash-cs5

我正在使用动作脚本 3 和 CS5.5。我希望根据键盘输入使我的角色以不同的方式制作动画。比如说如果我按下右箭头键，我希望我的跑步动画开始，如果我按下左箭头键，我想反转相同的动画。然后当没有输入时，我希望他只是站着，当按下向上箭头键时，我希望跳跃动画起作用。在动作脚本 3 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:06:16.550

首先，您使用 KeyboardEvent 检查是否按下了箭头键。那么你在事件监听器函数中究竟做了什么取决于你的动画是如何创建的。例如，如果您正在播放在 Flash 中绘制的 MovieClip，则在 KeyboardEvent 侦听器中切换 MovieClip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:25:25.190

使用帧标签以编程方式控制播放头在时间线上的移动。

媒体

角色剪辑应具有以下结构：

-3 层时间轴，每层有 3 个关键帧，共 9 个

--一个帧标签层，给每一帧一个帧标签（“standing”，“walkingRight”，“walkingLeft”）

--a 停止层，使每个帧分开，因此帧之间的移动仅由代码控制

--a sub-animations layer，每一帧有一个动画，所有的动画循环播放并且没有停止

---向左走动画剪辑

---向右走动画剪辑

---站立动画剪辑

为了清楚起见，这些嵌套动画中的每一个都占用一帧，但如果您将播放头移到它上面，看起来该动画是单独播放的，并且在您的代码移动播放头之前它会一直保持这种状态。

编码

```
var character:MovieClip=new MyCharacterClass()
addChild(character);
character.gotoAndStop("standing") 
stage.addEventListener(KeyboardEvent.KEY_UP,keyUp); 

protected function keyUp(event:KeyEvent):void
{
   switch (event.keyCode)
{
    case Keyboard.LEFT:
        character.gotoAndStop("walkingLeft")
    break;

    case Keyboard.RIGHT:
        character.gotoAndStop("walkingRight")
    break;

    default:
        character.gotoAndStop("standing")
    break;
}
} 
```

这是最简单的示例——单击左箭头，动画显示角色向左走（尽管在某个位置，您需要添加实际的移动代码）。单击右箭头，它向右走。按任何其他键，角色站立。

# c++ - C ++中接口的多重继承中的歧义

> ID：10353053
> 
> 赞同：7
> 
> 时间：2012-04-27T15:03:15.320
> 
> 标签：c++, inheritance, interface, multiple-inheritance, virtual-inheritance

我做了一个测试代码如下：

```
#include <iostream>
using namespace std;

#ifndef interface
#define interface struct
#endif

interface Base
{
    virtual void funcBase() = 0;
};

interface Derived1 : public Base
{
    virtual void funcDerived1() = 0;
};

interface Derived2 : public Base
{
    virtual void funcDerived2() = 0;
};

interface DDerived : public Derived1, public Derived2
{
    virtual void funcDDerived() = 0;
};

class Implementation : public DDerived
{
public:
    void funcBase() { cout << "base" << endl; }
    void funcDerived1() { cout << "derived1" << endl; }
    void funcDerived2() { cout << "derived2" << endl; }
    void funcDDerived() { cout << "dderived" << endl; }
};

int main()
{
    DDerived *pObject = new Implementation;
    pObject->funcBase();

    return 0;
} 
```

我写这段代码的原因是为了测试函数 funcBase() 是否可以在 DDerived 的实例中调用。当我尝试编译此代码时，我的 C++ 编译器 (Visual Studio 2010) 给了我一条编译错误消息。在我看来，这段代码没有问题，因为它肯定`funcBase()`会在接口的某个派生类中实现（因此被覆盖）`DDerived`，因为它是纯虚拟的。换句话说，任何类型的指针变量都`Implementation *`应该与派生实现并覆盖函数的类的实例相关联`funcBase()`。

我的问题是，为什么编译器会给我这样的错误信息？为什么 C++ 语法是这样定义的；即，将这种情况视为错误？如何使代码运行？我想允许接口的多重继承。当然，如果我使用“虚拟公共”或重新声明`funcBase()`该`Implementation`功能

```
interface DDerived : public Derived1, public Derived2
{
    virtual void funcBase() = 0;
    virtual void funcDDerived() = 0;
}; 
```

然后一切运行没有问题。

但是我不想那样做，寻找更方便的方法，因为虚拟继承可能会降低性能，如果类的继承关系非常复杂，重新声明会很繁琐。除了使用虚拟继承之外，还有其他方法可以在 C++ 中启用接口的多重继承吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T15:25:16.760

正如您定义的那样，您的对象结构如下所示：

![在此处输入图像描述](../Images/ed49b5cf923ce0177fa307a3e138ee61.png)

这里重要的一点是，每个实例都`Implementation`包含两个完全独立的实例`Base`。您提供了 的覆盖`Base::funcBase`，但它不知道您是尝试覆盖您继承的`funcBase`，还是您继承的。`Base``Derived1``Base``Derived2`

是的，处理这个问题的干净方法是虚拟继承。这将改变您的结构，因此只有一个 Base 实例：

![在此处输入图像描述](../Images/db5017a517cb1d2bdbb9e603a359afe9.png)

这几乎毫无疑问是你真正想要的。是的，在原始编译器和 25 MHz 486 等时代，它因性能问题而闻名。使用现代编译器和处理器，您*不太可能*遇到问题。

另一种可能性是某种基于模板的替代方案，但这往往会遍及您的代码的其余部分——即，`Base *`您编写的模板可以与提供函数 A、B 和 C 的任何东西一起使用，而不是传递 a，然后将（相当于）`Implementation`作为模板参数传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:16:34.767

C++ 语言的设计方式是，在没有虚拟继承的第一种方法中，将有该方法的两个父副本，并且它无法确定调用哪个父副本。

虚拟继承是从多个基继承相同函数的 C++ 解决方案，所以我建议只使用这种方法。

或者，您是否考虑过不从多个基础继承相同的功能？你真的有一个派生类，你需要能够根据上下文将其视为`Derived1`或`Derived2`OR吗？`Base`

在这种情况下，详细说明具体问题而不是人为的示例可能有助于提供更好的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:21:21.047

```
DDerived *pObject = new Implementation;
pObject->funcBase(); 
```

这会创建一个指向实现的 DDerived 类型的指针。当您使用 DDerived 时，您实际上只有一个指向接口的指针。

DDerived 不知道 funcBase 的实现，因为在 Derived1 和 Derived2 中都定义了 funcBase 不明确。

这创造了一个继承钻石，这才是真正导致问题的原因。

[http://en.wikipedia.org/wiki/Diamond_problem](http://en.wikipedia.org/wiki/Diamond_problem)

我还必须检查你在那里的界面“关键字”

这是 Visual Studio 识别的特定于 ms 的扩展

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:31:48.210

我认为 C++ Standard 10.1.4 - 10.1.5 可以帮助您理解代码中的问题。

```
class L { public: int next; /∗ ... ∗/ };
class A : public L { /∗...∗/ };
class B : public L { /∗...∗/ };
class C : public A, public B { void f(); /∗ ... ∗/ }; 
```

> **10.1.4****不**包含关键字 virtual的基类说明符指定非虚拟基类。包含关键字 virtual 的基类说明符指定虚拟基类。对于最派生类的类格中非虚拟基类的每次不同出现，最派生对象（1.8）应包含该类型的相应不同基类子对象。对于指定为虚拟的每个不同的基类，最派生的对象应包含该类型的单个基类子对象。[**示例：** 对于类类型 C 的对象，在 C 的类格中每个不同的（非虚拟）基类 L 与类型 C 对象内的不同 L 子对象一一对应。给定类 C 定义上面，**C 类的对象将有 L 类的两个子对象，**如下所示。
> 
> **10.1.5**在这样的格中，可以使用**显式限定**来指定所指的子对象。函数 C::f 的主体可以引用每个 L 子对象的成员 next： void C::f() { A::next = B::next; } *// 格式良好的*. 如果没有 A:: 或 B:: 限定符，上面的 C::f 的定义会***因为歧义而格式错误***

因此，只需在调用 pObject->funcBase() 时添加限定符或以其他方式解决歧义。

```
pObject->Derived1::funcBase(); 
```

**更新：阅读****10.3 Virtual Functions** of Standard也很有帮助。

周末愉快 ：）

# asp.net-mvc - 检索不同的字段值

> ID：10353057
> 
> 赞同：0
> 
> 时间：2012-04-27T15:03:20.397
> 
> 标签：asp.net-mvc, linq, entity-framework

检索不同列值的最有效方法是什么。我有一个包含字段`FormsID`和`ProductLineDescription`其他列的表。`ProductLine`表具有一对多的关系，表中的样本数据如下：

```
FormID ProdculineDesc
1      abc
2      abc
1      xyz
2      def
3      abc
3      xyz 
```

我希望下拉列表中只有`ProductLineDesc`. 这是代码，

```
private void LoadProductLines(Models.SearchModel Model, xyzEntities Context)
{
    Model.ProductLine = Context.PRODUCTLINEs
        .OrderBy(T => T.FormsGuid).ToSelectList().Distinct();
} 
```

这仍然给了我每一个`ProductLineDesc`，我如何只检索这些`Distinct`值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:55:05.947

怎么样：

```
var distinctInfo = (from c in Context.PRODUCTLINEs
                           group by c.ProductLineDesc into result
    select new Model.ProductLine {
    ProductLineDesc = result.Key,
    FormID = result.Min(d=>d.FormID)
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:29:15.823

这是一个带有自定义质量比较器的版本（带有[示例](http://ideone.com/Vxw8q)）：

```
public class UniqueProductLineDesc : IEqualityComparer<Product>
{
    public Boolean Equals(Product a, Product b)
    {
        if (Object.ReferenceEquals(a, b))
            return true;

        if (Object.ReferenceEquals(a, null) || Object.ReferenceEquals(b, null))
            return false;

        return String.Compare(a.ProductLineDesc, b.ProductLineDesc, true) == 0;
    }

    public Int32 GetHashCode(Product product)
    {
        if (Object.ReferenceEquals(product, null))
            return 0;

        return product.ProductLineDesc == null ? 0 : product.ProductLineDesc.GetHashCode();
    }
} 
```

并实施：

```
private void LoadProductLines(Models.SearchModel Model, xyzEntities Context)
{
    Model.ProductLine = Context.PRODUCTLINEs
        .OrderBy(T => T.FormsGuid)
        .ToSelectList()
        .Distinct(new UniqueProductLineDesc());
} 
```

# java - 在我的应用程序中嵌入 ApacheDS，它在 service.startup() -> DefaultSchemaService.getSchemaManager() 上失败，返回 null

> ID：10353061
> 
> 赞同：0
> 
> 时间：2012-04-27T15:03:33.510
> 
> 标签：java, ldap, apacheds

我正在尝试在我的应用程序中运行嵌入式 ApacheDS。阅读后：[运行嵌入在我的应用程序中的 Apache DS](https://stackoverflow.com/questions/1560230/running-apache-ds-embedded-in-my-application) 和[http://directory.apache.org/apacheds/1.5/41-embedding-apacheds-into-an-application.html](http://directory.apache.org/apacheds/1.5/41-embedding-apacheds-into-an-application.html)

使用最后一个稳定版本 1.5.7，这个简单的例子在执行“service.startup();”时失败了

```
Exception in thread "main" java.lang.NullPointerException
    at org.apache.directory.server.core.schema.DefaultSchemaService.initialize(DefaultSchemaService.java:380)
    at org.apache.directory.server.core.DefaultDirectoryService.initialize(DefaultDirectoryService.java:1425)
    at org.apache.directory.server.core.DefaultDirectoryService.startup(DefaultDirectoryService.java:907)
    at Test3.runServer(Test3.java:41)
    at Test3.main(Test3.java:24) 
```

也就是说，DefaultSchemaService.getSchemaManager() 返回 null。

源代码：

```
import java.util.Properties;

import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.Attributes;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;
import javax.naming.directory.SearchControls;
import javax.naming.directory.SearchResult;

import org.apache.directory.server.core.DefaultDirectoryService;
import org.apache.directory.server.core.partition.Partition;
import org.apache.directory.server.core.partition.impl.btree.jdbm.JdbmPartition;
import org.apache.directory.server.ldap.LdapServer;
import org.apache.directory.server.protocol.shared.transport.TcpTransport;
import org.apache.directory.shared.ldap.entry.ServerEntry;
import org.apache.directory.shared.ldap.name.DN;

public class Test3 {

    public static void main(String[] args) throws Exception {
        runServer();
        testClient();
    }

    static void runServer() throws Exception {
        DefaultDirectoryService service = new DefaultDirectoryService();
        service.getChangeLog().setEnabled(false);

        Partition partition = new JdbmPartition();
        partition.setId("apache");
        partition.setSuffix("dc=apache,dc=org");
        service.addPartition(partition);

        LdapServer ldapService = new LdapServer();
        ldapService.setTransports(new TcpTransport(1400));
        ldapService.setDirectoryService(service);

        service.startup();

        // Inject the apache root entry if it does not already exist
        try {
            service.getAdminSession().lookup(partition.getSuffixDn());
        } catch (Exception lnnfe) {
            DN dnApache = new DN("dc=Apache,dc=Org");
            ServerEntry entryApache = service.newEntry(dnApache);
            entryApache.add("objectClass", "top", "domain", "extensibleObject");
            entryApache.add("dc", "Apache");
            service.getAdminSession().add(entryApache);
        }

        DN dnApache = new DN("dc=Apache,dc=Org");
        ServerEntry entryApache = service.newEntry(dnApache);
        entryApache.add("objectClass", "top", "domain", "extensibleObject");
        entryApache.add("dc", "Apache");
        service.getAdminSession().add(entryApache);

        ldapService.start();
    }

    static void testClient() throws NamingException {
        Properties p = new Properties();
        p.setProperty(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        p.setProperty(Context.PROVIDER_URL, "ldap://localhost:1400/");
        p.setProperty(Context.SECURITY_PRINCIPAL, "uid=admin,ou=system");
        p.setProperty(Context.SECURITY_CREDENTIALS, "secret");
        p.setProperty(Context.SECURITY_AUTHENTICATION, "simple");

        DirContext rootCtx = new InitialDirContext(p);
        DirContext ctx = (DirContext) rootCtx.lookup("dc=apache,dc=org");
        SearchControls sc = new SearchControls();
        sc.setSearchScope(SearchControls.SUBTREE_SCOPE);

        NamingEnumeration<SearchResult> searchResults = ctx.search("", "(objectclass=*)", sc);

        while (searchResults.hasMoreElements()) {
            SearchResult searchResult = searchResults.next();
            Attributes attributes = searchResult.getAttributes();
            System.out.println("searchResult.attributes: " + attributes) ;
        }
    }
} 
```

ApacheDS 1.5.x 版似乎不向后兼容。

在 ApacheDS 1.5.4 中调用“service.startup();” 工作正常（但在其他地方失败）。

知道如何使这个例子工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:46:49.537

这个版本的 ApacheDS 需要明确定义工作目录：

```
service.setWorkingDirectory(new File("data")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T03:17:46.743

我最近遇到了类似的问题，经过长时间的谷歌搜索，终于找到了有用的东西

使用 1.5.7 的嵌入式 Apache 目录示例

[http://svn.apache.org/repos/asf/directory/documentation/samples/trunk/embedded-sample/src/main/java/org/apache/directory/seserver/EmbeddedADSVer157.java](http://svn.apache.org/repos/asf/directory/documentation/samples/trunk/embedded-sample/src/main/java/org/apache/directory/seserver/EmbeddedADSVer157.java)

并看看 pom.xml

使用 1.5.7 的嵌入式 Apache 目录的 Pom.xml 示例

[http://svn.apache.org/repos/asf/directory/documentation/samples/trunk/embedded-sample/pom.xml](http://svn.apache.org/repos/asf/directory/documentation/samples/trunk/embedded-sample/pom.xml)

希望是帮助！

# javascript - 计算 Javascript 中的小时差，但只有特定小时

> ID：10353062
> 
> 赞同：2
> 
> 时间：2012-04-27T15:03:33.713
> 
> 标签：javascript, date, time

不确定描述这一点的最佳方式，但我需要计算小时差（四舍五入），但仅在晚上 8 点和早上 6 点之间（或者更确切地说是 20:00 - 06:00 在这种情况下！）

例如：

```
22:00 - 04:00 (6 hours)
02:40 - 10:20 (4 hours)
20:00 - 06:00 (10 hours) 
```

不幸的是，我需要在确切的日期上工作，因为有些日期会跨越数天——而且只是为了增加混乱，**我还需要完全排除某些日期以用于银行假期**（我有一个数组列表），但绝对有不知道如何实现这一点 - 任何建议都会非常受欢迎，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:54:03.347

只是关闭示例中的输入的样子：

```
// According to your example, your inputs are strings...
// t1 = "22:00"
// t2 = "04:00";

function hoursDiff(t1, t2){

   // Parse out the times, using radix 10 to
   // avoid octal edge cases ("08:00" & "09:00")
   var time1   = parseInt( t1, 10 );
   var time2   = parseInt( t2, 10 );
   var hours   = 0;

   while ( time1 !== time2 ){
      time1++;
      hours++;

      // If we've passed midnight, reset
      // to 01:00AM
      if ( time1 === 25 ){
         time1 = 1;
      }  
   }

   return hours;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T00:24:17.277

好的，这是一个很好的谜题。这确实花了我太多时间，但很有趣。

下面的完整工作代码（[此处为 jsfiddle](http://jsfiddle.net/bavanandel/k8WDB)）：

```
function isHoliday(/*Date*/ date) {
    for(var i = 0; i < holidays.length; i++) {
        if(holidays[i].getTime() == date.getTime()) {
            return true;
        }
    }
    return false;
}

function diffHours(/*Date*/ d1, /*Date*/ d2) {
    var date1 = new Date(d1.getUTCFullYear()+"-"+(d1.getUTCMonth()+1)+"-"+d1.getUTCDate()+" UTC");
    var date2 = new Date(d2.getUTCFullYear()+"-"+(d2.getUTCMonth()+1)+"-"+d2.getUTCDate()+" UTC");

    var sum = 0;
    var oneday = 24*3600*1000;
    var hours, date;

    // first day
    if(!isHoliday(date1)) {
        // decrease by a whole day first (will be added later)
        sum -= 10;

        // add real hours
        hours = d1.getUTCHours() + d1.getUTCMinutes() / 60;
        if(hours <= 6) {
            sum += 10 - hours;
        } else if(hours <= 20) {
            sum += 4;
        } else {
            sum += 24 - hours;
        }
    }

    // last day
    if(!isHoliday(date2)) {
        // decrease by a whole day first (will be added later)
        sum -= 10;

        // add real hours
        hours = d2.getUTCHours() + d2.getUTCMinutes() / 60;
        if(hours <= 6) {
            sum += hours;
        } else if(hours <= 20) {
            sum += 6;
        } else {
            sum += hours - 14;
        }
    }

    // whole days
    while(date1 <= date2) {
        if(!isHoliday(date1)) {
            sum += 10;
        }

        // increase date by 1 day
        date1.setTime(date1.getTime() + oneday);
    }

    return Math.floor(sum);
}

// ==============
// examples below
// --------------

// array of Dates (in UTC) to skip
var holidays = [
    new Date("2012-01-04 UTC"),
];

for(var i = 0; i < holidays.length; i++) {
    console.log('holiday: ', holidays[i].toUTCString());
}

a = new Date("2012-01-01 12:00 UTC");
b = new Date("2012-01-02 12:00 UTC");
c = new Date("2012-01-02 22:00 UTC");
d = new Date("2012-01-03 07:00 UTC");
e = new Date("2012-01-05 12:00 UTC");

console.log({d1: a.toUTCString(), d2: b.toUTCString(), hours: diffHours(a, b)});
console.log({d1: b.toUTCString(), d2: c.toUTCString(), hours: diffHours(b, c)});
console.log({d1: c.toUTCString(), d2: d.toUTCString(), hours: diffHours(c, d)});
console.log({d1: d.toUTCString(), d2: e.toUTCString(), hours: diffHours(d, e)}); 
```

# java - 是否可以设置超时以断开已建立的 http 连接？

> ID：10353066
> 
> 赞同：1
> 
> 时间：2012-04-27T15:03:40.617
> 
> 标签：java, android, timeout, http-post, connection-timeout

我正在编写一个文件上传应用程序。我可以使用 asyn 方法连接到服务器并上传文件（apache http）。
服务器已将连接数限制设置为 100。如果连接持续 60 秒，我想设置连接超时以断开连接。

流程如下：
(1) Android 客户端建立与服务器的连接。（开始计数60s）
（2）如果60s后连接仍然存在，则断开与Android客户端的连接

我知道将超时设置为 HttpParams 不起作用。我不知道该怎么做。
有人知道该怎么做吗？欢迎任何解决方案或建议。谢谢！

以下是如何上传文件的代码片段：

```
try
{
        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, 60000);
        HttpConnectionParams.setSoTimeout(httpParameters, 60000);

        HttpClient client =  new DefaultHttpClient(httpParameters);  
        ...
        ByteArrayBody bab = new ByteArrayBody(byteArray, "photo.jpg");
        entity.addPart("photo", bab);
        httpPost.setEntity(entity);   

        startTime = System.currentTimeMillis();

        //ClientConnectionRequest connRequest = new ManagedClientConnection();
        //httpPost.setConnectionRequest((ClientConnectionRequest) connRequest.getConnection(3000, TimeUnit.MILLISECONDS));

        HttpResponse response = client.execute(httpPost, localContext);

        Handler mHandler = new Handler();

        BufferedReader reader = new BufferedReader(new InputStreamReader( response.getEntity().getContent(), "UTF-8"));  
        String result = "";  
        String tmp = "";

        while ((tmp = reader.readLine()) != null)
        {
            result += tmp;
        }
        reader.close();

        return result;

    } catch (Exception e) {  
        Log.e(TAG, "error time = " + (System.currentTimeMillis() - startTime));
        Log.e("httpUploadHandler", "Some error came up"); 
        Log.e("httpUploadHandler", e.toString()); 

    } 
```

我可以通过调用断开连接：

```
client.getConnectionManager().shutdown(); 
```

但是我怎么能数 60 秒来断开活动连接呢？另外，是否可以知道连接何时建立？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:14:18.963

您是否尝试过设置套接字超时？它与连接超时不同。

```
params.setParameter( HttpConnectionParams.SO_TIMEOUT, 60000 ); 
```

where`params`是 的一个实例`BasicHttpParams`，它被传递到 的构造函数中`DefaultHttpClient`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:03:05.817

在您的活动中使用处理程序来完成这项工作。下面的代码会给你一个想法：

```
 private ShutDownHandler mRedrawHandler = new ShutDownHandler(); 

     class ShutDownHandler extends Handler {  
            @Override  
            public void handleMessage(Message msg) {  
         client.getConnectionManager().shutdown();
            }  

            public void doJob(long delayMillis) {  
              this.removeMessages(0);  
              sendMessageDelayed(obtainMessage(0), delayMillis);  
            }  
          }; 
```

从主线程调用 mRedrawHandler.doJob(60000)。

# asp.net-mvc - 用户身份如何 | 应用程序生命周期中的主体集

> ID：10353068
> 
> 赞同：7
> 
> 时间：2012-04-27T15:03:51.467
> 
> 标签：asp.net-mvc, forms-authentication, asp.net-web-api

在 ASP.NET（MVC 和 WebAPI）中，如何使用 FormsAuthentication cookie 中的数据初始化 User Identity 对象？

我想要做的是使用 2 种类型的身份验证，基于 cookie 和基于自定义标头的一种。由于`AuthorizeAttribute`该类仅检查`User.Identity.IsAuthorized()`方法并且不使用特定于 FormsAuthentication 的代码，因此这意味着我所要做的就是手动设置`User.Identity`对象，无论是在 global.asax 中还是在 DelegatingHandler 中。

那么，如何设置 User.Identity？框架如何使用 FormsAuthentication 自动设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:13:34.147

这是一个[相关的答案](https://stackoverflow.com/questions/8810496/forms-authentication-understanding-context-user-identity)。

身份可以在处理程序、模块或 Global.asax 中设置。您可以在请求生命周期的任何时候修改它，但通常最好的地方是在 PostAuthenticateRequest 中。至此，FormsAuthentication 完成了它的工作，您可以增加或替换 HttpContext.Current.User。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:25:37.813

ASP.NET MVC 控制器有一个[Controller.User](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.user.aspx)但 Web API 没有。目前正在[请求](http://www.leastprivilege.com/ASPNETWebAPISecurity2IdentityArchitecture.aspx)放入。

# ruby-on-rails - 尝试在安装了 Xcode (4.3.2) 的 OS X 10.7 上安装 Passenger 时出现错误：“您必须先安装开发工具。”

> ID：10353069
> 
> 赞同：0
> 
> 时间：2012-04-27T15:03:52.910
> 
> 标签：ruby-on-rails, xcode, osx-lion, passenger

我正在尝试在安装了 Xcode（4.3.2）的 OS X 10.7 上安装 Passenger 时出现错误：“您必须先安装开发工具。”

这对我来说没有意义，为什么找不到合适的要求？我已经从 Apple 商店安装了 Xcode。

是否有它需要的实际需求列表，而不是这个通用消息？或者是否有任何人知道的解决方法可以帮助我在 OSX Lion 上与乘客合作？谢谢！

例外详情：

```
cd ext/libev/ && make libev.la
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.     -g -O2 -O3 -c -o ev.lo ev.c
 gcc -DHAVE_CONFIG_H -I. -g -O2 -O3 -c ev.c -o ev.o
/bin/sh ./libtool --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.     -g -O2 -O3 -c -o event.lo event.c
 gcc -DHAVE_CONFIG_H -I. -g -O2 -O3 -c event.c -o event.o
/bin/sh ./libtool --tag=CC   --mode=link gcc  -g -O2 -O3 -version-info 3:0  -o libev.la -rpath /usr/local/lib ev.lo event.lo  -lm 
mkdir .libs
ar cru .libs/libev.a  ev.o event.o
ranlib .libs/libev.a
creating libev.la
(cd .libs && rm -f libev.la && ln -s ../libev.la libev.la)
g++ ext/common/LoggingAgent/Main.cpp -o agents/PassengerLoggingAgent -Iext -Iext/common -Iext/libev   -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<ext/hash_fun.h>" -DHAS_ALLOCA_H -DHAS_SFENCE -DHAS_LFENCE -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-long-long -Wno-missing-field-initializers -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS ext/common/libpassenger_common.a ext/common/libboost_oxt.a ext/libev/.libs/libev.a -lcurl -lz -lpthread  
cd 'ext/ruby/ruby-1.9.2-x86_64-macosx/' && /Users/victorstan/.rvm/wrappers/ruby-1.9.2-p290@contact-monkey/ruby '/Users/victorstan/.rvm/gems/ruby-1.9.2-p290@contact-monkey/gems/passenger-3.0.12/ext/ruby/extconf.rb'
checking for alloca.h... *** /Users/victorstan/.rvm/gems/ruby-1.9.2-p290@contact-monkey/gems/passenger-3.0.12/ext/ruby/extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=/Users/victorstan/.rvm/gems/ruby-1.9.2-p290@contact-monkey/gems/passenger-3.0.12/ext/ruby
    --curdir
    --ruby=/Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
/Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:368:in `try_do': The complier failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:452:in `try_cpp'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:834:in `block in have_header'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:693:in `block in checking_for'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:280:in `block (2 levels) in postpone'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:280:in `block in postpone'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:276:in `postpone'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:692:in `checking_for'
    from /Users/victorstan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:833:in `have_header'
    from /Users/victorstan/.rvm/gems/ruby-1.9.2-p290@contact-monkey/gems/passenger-3.0.12/ext/ruby/extconf.rb:36:in `<main>'
rake aborted!
Command failed with status (1): [cd 'ext/ruby/ruby-1.9.2-x86_64-macosx/' &&...]

Tasks: TOP => nginx => native_support => ext/ruby/ruby-1.9.2-x86_64-macosx//passenger_native_support.bundle => ext/ruby/ruby-1.9.2-x86_64-macosx//Makefile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:06:37.440

您可能需要安装[Xcode 命令行工具](https://developer.apple.com/downloads/index.action?=command%20line%20tools)

在过去，这是 Xcode 安装包中的一个可选项目。苹果现在将它们分开（无论出于何种原因）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T17:37:16.967

在 XCode 4.3.2 中，您可以从 XCode 的 Preferences 中的“Downloads”下安装命令行开发人员工具。

![在此处输入图像描述](../Images/2c5c1705c759e34d71e93662cd90e34a.png)

# c# - 部分实体类的报表设计器中未显示属性

> ID：10353074
> 
> 赞同：1
> 
> 时间：2012-04-27T15:04:12.877
> 
> 标签：c#, visual-studio, linq, entity-framework, reporting-services

我在 VS 2010 报表设计器中制作报表，数据的主要来源是`Lines`实体。但我需要另一个实体的额外字段`Parts`。所以我添加了一个带有额外属性的部分 Line 类，如下所示：

```
public partial class Line
{
    public string ShelfLocation
    {
        get
        {
            using (RSContext rs = new RSContext())
            {
                return rs.Parts.First(x => x.Code == this.Part).ShelfLocation;
            }
        }
    } 
```

问题是我仍然无法从报表设计器中看到这个额外的字段：

![在此处输入图像描述](../Images/d0357fd7f3bf90de2bee4dae3fe80d91.png)

我怎样才能在不创建另一个视图的情况下实现这一点？

提前谢谢了。

编辑 1（都在同一个命名空间中）：

![在此处输入图像描述](../Images/cab448c45c9409576680a076a207d2a3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:57:55.863

我不知道是否有更好的解决方案，但暂时我将其手动添加到报告中并且它有效：

```
<Fields>    
...
    <Field Name="ShelfLocation">
          <DataField>ShelfLocation</DataField>
          <rd:TypeName>System.String</rd:TypeName>
   </Field>
</Fields> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:20:21.107

您确实需要确保两个类都在同一个命名空间中。

您可以考虑创建一个 Line 类型的对象并验证您是否可以看到您添加的新属性：

```
var testLine = new Line();
testLine.ShelfLocation  // <-- Does ShelfLocation show up as a valid property? Do your other properties like Debit, Id, etc. also show up? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T08:14:51.553

我对 Linq2Sql 有完全相同的问题。自定义分部类的所有属性在报表设计器中均不可见。

**解决问题**

1.  打开 *.dbml 的属性对话框并清除“自定义工具”属性。*.designer.cs 文件随即消失。
2.  使用“预构建事件”中的 sqlmetal.exe 手动生成 *.designer.cs

    > sqlmetal /namespace:"$(ProjectName)" /code:"$(ProjectDir)DataModel.designer.cs" "$(ProjectDir)DataClasses1.dbml"

在这些操作之后，附加属性被成功识别。

# javascript - JQuery Mobile：使用 CSS @media 查询修改按钮 data-inline="true"

> ID：10353078
> 
> 赞同：0
> 
> 时间：2012-04-27T15:04:40.480
> 
> 标签：javascript, jquery, css, html, jquery-mobile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:41:21.347

是的。您可以使用带有属性选择器的 CSS 响应式设计技术来影响这些元素。

```
@media only screen and (min-width : 320px) {
    a[data-inline=true] {
        display:inline;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:40:01.113

现在简单地使用`display: inline-block`实际上对我有用。

# php - XML 提要 503 错误

> ID：10353080
> 
> 赞同：1
> 
> 时间：2012-04-27T15:04:41.683
> 
> 标签：php, xml, timeout

当我从 XML 流中收到 503 错误时是否有可能不让它停止 PHP 脚本而是重试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:10:58.690

您的问题可能会从更多上下文中受益，但假设您的意思是 HTTP 状态代码 503，您可以尝试使用

```
do {
    $feed = simplexml_load_file('http://example.com/rss.xml');
} while (strpos($http_response_header[0], '503') !== false);

// do something with $feed now 
```

只要服务器以 503 状态代码[响应](http://php.net/manual/en/reserved.variables.httpresponseheader.php)，这将重复该[`do`块。](http://php.net/manual/en/control-structures.do.while.php)

# backbone.js - 你需要多长时间来学习backbone.js

> ID：10353082
> 
> 赞同：3
> 
> 时间：2012-04-27T15:04:53.173
> 
> 标签：backbone.js, duration

我只是决定学习backbone.js。我是一名介于初级和中级之间的前端开发人员。我目前的工作是处理 html、css 和 jQuery。我的老板让我学习这个backbone.js，并想知道我需要多长时间才能学习。所以有经验的人能告诉我需要多长时间吗？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:20:50.530

如果您不了解javascript，则需要一段时间。我知道这一点是因为当我开始使用 javascript 时我并不真正了解它。通过了解 javascript，我的意思是能够理解并充分解释：

*   [变量范围](https://stackoverflow.com/questions/500431/javascript-variable-scope)
*   对象.原型
*   .call、.apply 和 .bind
*   闭包/词法范围
*   匿名函数
*   功能提升

如果您不了解所有这些，请获取并阅读 Crockford 的[Javascript：好的部分](https://rads.stackoverflow.com/amzn/click/com/0596517742)

如果您确实知道所有这些，那么您需要了解如何正确使用 Backbone，否则它将没有任何意义。使用 Backbone 时，除了基本视图的稀疏初始化之外，您真的不应该有任何非主干 javascript……学习如何使用内置事件绑定也是必不可少的。[这](https://github.com/addyosmani/backbone-fundamentals)是一个很好的指南，因为（显然）是[这里的所有来源](https://github.com/documentcloud/backbone/wiki/Tutorials,-blog-posts-and-example-sites)

所以我会说可能需要几天到一周或更长时间才能完全理解正在发生的事情，而要非常熟练地掌握它可能需要更长的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:14:13.880

我也只是从骨干开始，我必须说它非常简单。因此，假设您已经对 JavaScript 本身有透彻的了解，我认为您可以在 2-3 天内开始使用它（只要投入适当的精力）。如果您对 JavaScript 还不是很熟悉，则必须确保先了解它。

Code school 有一个优秀的高质量互动教程，可以让你快速入门。 [http://www.codeschool.com/](http://www.codeschool.com/)

但是也有大量免费资源可用，所以不要让它阻止你！ [http://backbonetutorials.com/](http://backbonetutorials.com/)

github 上的文档非常完整，但可能不是最好的入门位置。 [http://documentcloud.github.com/backbone/](http://documentcloud.github.com/backbone/)

如果您正在寻找主干，您可能还想用 requireJS 研究 AMD，这有点复杂，但也绝对值得研究！ [http://requirejs.org/](http://requirejs.org/)

# reverse-proxy - 海上慢速 SQL 连接

> ID：10353083
> 
> 赞同：0
> 
> 时间：2012-04-27T15:04:54.077
> 
> 标签：reverse-proxy

这就是我们所知道的：英国的 Web 服务器 + 英国的 SQL SERVER 因为我们无法对数据库进行实时复制，所以我们为美国提出了这个解决方案：美国的 Web 服务器 + 与 SQL SERVER 对话英国。

我们看到一个奇怪的结果，我们的页面连接速度很慢，从美国到英国的代理速度更慢，我们不明白为什么。

逻辑对我们说，sql数据比proxy（页面中所有数据）小。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:31:50.877

如果你希望你的 SQL 数据库离你的服务器那么远，你需要认真考虑减少使用的顺序查询的数量。

如果您对 MySQL 服务器的往返 ping 为 0.2 毫秒，并且您进行查询，则等待往返通信。如果按顺序进行 5 次往返查询（即等待第一个查询结束后再开始第二个查询），则需要 0.2ms * 5 = 1ms。

增加 1 毫秒的额外延迟没什么大不了的。你可能不会注意到。

如果您的数据库服务器位于同一个数据中心之外，您可能会得到至少 20 毫秒的数据库延迟。连续五个查询将花费 100 毫秒。仍然没有那么糟糕。

如果您与数据中心隔海相望，您可能会说 100-200 毫秒的延迟。然后，五个顺序查询将需要一整秒才能返回。

如果您在整个后端使用 20-30 个查询，则加载页面可能需要 10 多秒。

* * *

解决方案？

1.  将您的数据库服务器与您的 Web 服务器放在同一个数据中心。除非您可以并行执行所有查询，或者将系统减少到每页单个查询，否则在英国拥有您的网络服务器实际上比将网络服务器和数据库服务器隔开一大片要快。
2.  大大减少查询次数。
3.  缓存。

# jquery - jQuery Star Rating plugin addClass does not work

> ID：10353084
> 
> 赞同：1
> 
> 时间：2012-04-27T15:04:57.417
> 
> 标签：jquery, asp.net, rating-system

I am using JQuery with the Star Rating Plugin from the following site [http://www.fyneworks.com/jquery/star-rating/#](http://www.fyneworks.com/jquery/star-rating/#) . If I use the rating system in Asp markup there is no problem. However, if I dynamically create the rating system and follow the same steps it only shows up as radio buttons instead of stars.

Here is the markup that works as expected:

```
 <input name="star4" id="Radio1" type="radio" class="star" /> 
```

Here is the relevant jquery script that does not work and only shows the unconverted radio elements:

```
 function loadMovies(firstMovie, lastMovie) {

          for (incMovie = firstMovie; incMovie <= lastMovie; incMovie++) {
              $('<input>', {
                  type: "radio",
                  id: 'star1-' + incMovie,
                  name: "star",
               }).appendTo($('#sngMovie' + incMovie));

              $('#star1-' + incMovie).addClass('star');
          }
      } 
```

The radio buttons is supposed to be transformed into the star rating system when it has the "star" class. But it does not work when the class is added in JQuery. The radio buttons were not converted even when I tried the following:

Markup

```
<input name="star4" id="Radio1" type="radio" /> 
```

Script

```
$('#Radio1').addClass("star"); 
```

I need to be able to create the rating system dynamically. So I need some help on getting the radio buttons to be transformed to the rating system using jquery addClass or something similar.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:13:05.557

Try this:

```
$('#Radio1').addClass("star");
$('input[type=radio].star').rating(); 
```

or event better:

```
$('#Radio1').addClass("star").rating(); 
```

**Edit: Some more explanation** The star rating plugin is a normal jQuery plugin (Check out how to build plugins [here](http://docs.jquery.com/Plugins/Authoring)). Normally, to invoke a plugin on an element, you will have to do something like this:

```
$('#myElement').myPlugin(); 
```

In the case of the Star plugin, the following code is found in the bottom of the plugin code:

```
$(function(){
    $('input[type=radio].star').rating();
}); 
```

This snippet will run the rating() plugin on all radiobuttons with the 'star' class, and it will be done on the jQuery.ready event (wrapping something in an jQuery method, is the same as adding it to the ready event).

When you add the star class to an element, after the codesnippet above have been executed, you have to call the rating() plugin yourself.

Hope this explanation helps you :)

# java - 在 JSpinner 中为 DateEditor 设置步骤

> ID：10353087
> 
> 赞同：1
> 
> 时间：2012-04-27T15:05:21.420
> 
> 标签：java, jspinner

怎么可能*一步*为 JSpinner 指定（例如 10 分钟而不是 1 分钟）

有一个模型允许为数字选择步长

```
SpinnerNumberModel(value, min, max, step); 
```

但是如何为日期设置呢？

这段代码

```
JSpinner timeSpinner = new JSpinner( new SpinnerDateModel() );
DateEditor timeEditor = new DateEditor(timeSpinner, "HH:mm:ss");
timeSpinner.setEditor(timeEditor);
timeSpinner.setValue(new Date()); // will only show the current time 
```

（从这个答案[中，Java Swing 是否有任何好的免费日期和时间选择器可用？](https://stackoverflow.com/questions/654342/is-there-any-good-and-free-date-and-time-picker-available-for-java-swing)）

仅允许编辑时间，但步长始终为 1 小时、1 分钟或 1 秒，具体取决于是否指定了“HH”、“HH:mm”或“HH:mm:ss”。

* * *

有没有什么简单的方法可以让 min、 max 和 step 持续几分钟？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:53:38.320

用于`DateEditor.getModel()`获取[`SpinnerDateModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SpinnerDateModel.html)which 提供`setStart`,`setEnd`和`setCalendarField`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-04T21:14:01.090

正如您在以下代码中看到的`SpinnerDateModel`：

```
public Object getNextValue() {
    Calendar cal = Calendar.getInstance(); //Current date.
    cal.setTime(value.getTime()); //Set the date to the current value of the model.
    cal.add(calendarField, 1); //Increment the date by 1 unit of the selected calendar field (e.g. 1 month).
    Date next = cal.getTime(); //Convert back to Date Object.
    return ((end == null) || (end.compareTo(next) >= 0)) ? next : null;
}

public Object getPreviousValue() {
    Calendar cal = Calendar.getInstance(); //Current date.
    cal.setTime(value.getTime()); //Set the date to the current value of the model.
    cal.add(calendarField, -1); //Decrement the date by 1 unit of the selected calendar field (e.g. 1 month).
    Date prev = cal.getTime(); //Convert back to Date Object.
    return ((start == null) || (start.compareTo(prev) <= 0)) ? prev : null;
} 
```

它适用于添加或减去指定日历字段的 1 个单位。
您想将此数字 1 自定义为其他内容。
所以我在这里看到两个选项：

1.  重新实现`AbstractSpinnerModel`. 只需复制粘贴`SpinnerDateModel`（它并不大），然后例如引入整数字段“step”，而不是数字 1，只需将“step”放入`getNext`and中`getPrevious`。
2.  实现 a `SpinnerDateModel`，它也可以在内部与 a 一起使用`SpinnerDateModel`。它会小很多，但我猜有点hackish。

遵循这样的代码`SpinnerDateModel`（案例2）：

```
import java.awt.GridLayout;
import java.util.Calendar;
import java.util.Date;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerDateModel;

public class MultiStepDateSpinner extends JPanel {
    private static class StepperSpinnerDateModel extends SpinnerDateModel {
        private final SpinnerDateModel internal; //We let the internal SpinnerDateModel do the work for us.
        private final int step; //The number of steps to increment and decrement per click.
        private Object currentValue; //Needed to get restored each time getPreviousValue and getNextValue is called.

        private StepperSpinnerDateModel(final Date value, final Comparable start, final Comparable end, final int calendarField, final int step) {
            internal = new SpinnerDateModel(value, start, end, calendarField);
            if (step <= 0)
                throw new IllegalArgumentException("Non positive step.");
            this.step = step;
            currentValue = internal.getValue();
        }

        private StepperSpinnerDateModel(final int step) {
            this(new Date(), null, null, Calendar.DAY_OF_MONTH, step);
        }

        @Override
        public Object getValue() {
            return currentValue;
        }

        @Override
        public void setValue(final Object value) {
            internal.setValue(value);
            currentValue = value;
            fireStateChanged(); //Important step for the spinner to get updated each time the model's value changes.
        }

        @Override
        public Object getNextValue() {
            Object next = null;
            for (int i=0; i<step; ++i) { //Calculate step next values:
                next = internal.getNextValue();
                internal.setValue(next); //We have to set the next value internally, in order to recalculate the next-next value in the next loop.
            }
            internal.setValue(currentValue); //Restore current value.
            return next;
        }

        @Override
        public Object getPreviousValue() {
            Object prev = null;
            for (int i=0; i<step; ++i) { //Calculate step previous values:
                prev = internal.getPreviousValue();
                internal.setValue(prev); //We have to set the previous value internally, in order to recalculate the previous-previous value in the next loop.
            }
            internal.setValue(currentValue); //Restore current value.
            return prev;
        }
    }

    private MultiStepDateSpinner() {
        super(new GridLayout(0, 1));

        //Increment and decrement by 4 minutes each step.
        //The null values indicate there shall be no minimum nor maximum date.
        //The current value is set to the current date.
        final JSpinner spinner = new JSpinner(new StepperSpinnerDateModel(new Date(), null, null, Calendar.MINUTE, 4));

        final JButton getValueButton = new JButton("Get value");
        getValueButton.addActionListener(e -> {
            JOptionPane.showMessageDialog(null, spinner.getValue(), "Got value", JOptionPane.PLAIN_MESSAGE);
        });

        add(spinner);
        add(getValueButton);
    }

    public static void main(final String[] args) {
        final JFrame frame = new JFrame("Frame");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(new MultiStepDateSpinner());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

上面的示例代码是可运行的，因此您可以在实践中看到它。

为什么不让它成为一个`AbstractSpinnerModel`而不是`SpinnerDateModel`？因为我们需要将其标识为的实例，`SpinnerDateModel`所以`JSpinner`内部默认`DateEditor`为编辑器分配 a。
即使您扩展`AbstractSpinnerModel`并为微调器提供 a `DateEditor`，您也会收到一个异常，抱怨模型不是 a `SpinnerDateModel`。

但在我看来，最干净的方法是重新实现`AbstractSpinnerModel`并复制粘贴`SpinnerDateModel`如果需要的代码（不是很大），并引入您认为的任何字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-22T02:23:18.270

```
Incrementa JSpinnerDateEditor_15_+_15_minutos
    Calendar Horacalendario = Calendar.getInstance();
    Horacalendario.setTime(cita_hora.getDate());
    Date HoraParaCita = Horacalendario.getTime();//para asignar luego del incremento de 15 formato date()'
    int minutos = Horacalendario.get(Calendar.MINUTE);
    Horacalendario.set(Horacalendario.get(Calendar.YEAR), Horacalendario.get(Calendar.MONTH),
            Horacalendario.get(Calendar.DATE), Horacalendario.get(Calendar.HOUR), 0);//hago cero los minutos
    if (minutos >= 1 & minutos <= 14) {
        Horacalendario.add(Calendar.MINUTE, 15); //minutos A Sumar 
        HoraParaCita = Horacalendario.getTime();
        cita_hora.setDate(HoraParaCita);
    }
    if (minutos >= 16 & minutos <= 29) {
        Horacalendario.add(Calendar.MINUTE, 30);
        HoraParaCita = Horacalendario.getTime();
        cita_hora.setDate(HoraParaCita);
    }
    if (minutos >= 31 & minutos <= 44) {
        Horacalendario.add(Calendar.MINUTE, 45);
        HoraParaCita = Horacalendario.getTime();
        cita_hora.setDate(HoraParaCita);
    }
    if (minutos >= 46 & minutos <= 59) {
        Horacalendario.set(Horacalendario.get(Calendar.YEAR), Horacalendario.get(Calendar.MONTH),
                Horacalendario.get(Calendar.DATE), Horacalendario.get(Calendar.HOUR), 0);//hago cero los minutos
        HoraParaCita = Horacalendario.getTime();
        cita_hora.setDate(HoraParaCita);
    } 
```

# android - 将自定义样式应用于 Android SpinnerItems

> ID：10353094
> 
> 赞同：2
> 
> 时间：2012-04-27T15:05:53.750
> 
> 标签：android, android-layout

以前有人问过这个问题，但仔细研究以前帖子的答案并没有帮助我破译这个问题。

我正在尝试使用自定义主题将自定义样式应用于我的 Android 应用程序的微调器控件中的项目。我无法让微调器项目尊重自定义样式。

这是我所拥有的`themes.xml`：

```
<resources>
  <style name="CustomTheme" parent="android:Theme">
    <item name="android:spinnerItemStyle">@style/CustomSpinnerItem</item>
    <item name="android:windowTitleSize">25dp</item> <!-- This works -->
  </style>
</resources> 
```

这是我的`styles.xml`：

```
<resources>  
  <style name="CustomSpinnerItem" parent="android:Widget.TextView.SpinnerItem">
    <item name="android:textAppearance">@style/CustomTextAppearanceSpinnerItem</item>
    <item name="android:padding">20dp</item> <!-- This works fine -->
  </style>

  <style name="CustomTextAppearanceSpinnerItem" parent="android:TextAppearance.Widget.TextView.SpinnerItem">
    <item name="android:textColor">#F00</item> <!-- This does NOT work -->
  </style>
</resources> 
```

请注意有关哪些有效，哪些无效的评论。我很确定问题出在该`CustomTextAppearanceSpinnerItem`部分，但我不知道出了什么问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-16T22:11:12.880

这对我很有效

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="MySpinnerItem" parent="@android:Widget.TextView.SpinnerItem">
    <item name="android:textAppearance">@style/MySpinnerTextAppearance</item>
</style>
<style name="MySpinnerTextAppearance" parent="@android:TextAppearance.Widget.TextView.SpinnerItem">
    <item name="android:textColor">#FF0000</item>
</style>
</resources> 
```

# jquery - 有没有办法将简单的 IDE 嵌入到 html 表单中？

> ID：10353095
> 
> 赞同：1
> 
> 时间：2012-04-27T15:05:54.497
> 
> 标签：jquery, html, ide

我正在尝试构建一些编程测验，我们可以在其中保存用户响应并在以后查看它们。我非常熟悉所有后端的东西应该如何工作，但我不知道如何为用户在前端输入代码创建一个友好的环境。

这是我需要的：

*   语法高亮（至少 HTML/CSS、PHP 和 Javascript/JQuery
*   一种基于每个文本区域指定答案应该使用哪种语言的方法
*   如果可能的话，与 JQuery 兼容的东西。

有谁知道这个问题的好解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:12:13.153

使用非常强大且支持多种语言的 CodeMirror 编辑器。

[http://codemirror.net/](http://codemirror.net/)

看看下面的链接，它比较了广泛使用的客户端编辑器以及它们的优缺点。

[http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors](http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:10:42.517

我的公司使用编辑区，我认为它适合您的需求：

[http://www.cdolivet.com/editarea/](http://www.cdolivet.com/editarea/)

演示：[http ://www.cdolivet.com/editarea/editarea/exemples/exemple_full.html](http://www.cdolivet.com/editarea/editarea/exemples/exemple_full.html)

# flickr - Flickr API - 在网站中包含照片

> ID：10353097
> 
> 赞同：1
> 
> 时间：2012-04-27T15:06:00.810
> 
> 标签：flickr

我试图在我的网站上获取用户上传的最新照片，但我不确定如何获取该资源的 URL。我可以使用“flickr.photosets.getPhotos”获取图片的 ID，但我不知道如何获取标签的 url。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:24:17.480

您可能想尝试仅将“附加”查询参数传递给您要返回的 url 的值。例如，如果您的请求有 ?extras=url_m，则响应中的照片对象将如下所示：

```
 {
            "id": "8475556512",
            "secret": "beca454079",
            "server": "8102",
            "farm": 9,
            "title": "new",
            "isprimary": "0",
            "url_m": "https:\/\/farm9.staticflickr.com\/8102\/8475556512_beca454079.jpg",
            "height_m": "500",
            "width_m": "386"
        } 
```

Temboo 有一个很好的接口来测试 Flickr 方法。您可以在这里试用：[https](https://www.temboo.com/library/Library/Flickr/) ://www.temboo.com/library/Library/Flickr/ 。他们有 JAVA、Python、PHP、Ruby、Node.js、Android 和 iOS 的 SDK。

（全面披露：我在 Temboo 工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:28:44.323

[您可以使用flickr.tags.getListUser](http://www.flickr.com/services/api/flickr.tags.getListUser.html)获取给定用户的标签。您可以使用[flickr.photos.search](http://www.flickr.com/services/api/flickr.photos.search.html)按标签搜索。

**更新**

将标签字符串（“horses”或“sunset”或其他）填充到 flickr.photos.search 的 tags 参数中。此端点的[API Explorer](http://www.flickr.com/services/api/explore/flickr.photos.search)页面非常有用：您可以填写示例参数、查询端点并以交互方式查看结果。

**更新**

哦，你的意思是 HTML 标签。

请参阅这些说明，了解如何[构建图像的 URL](http://www.flickr.com/services/api/misc.urls.html)。

**更新**

场 ID 可从[flickr.photos.getInfo](http://www.flickr.com/services/api/flickr.photos.getInfo.html) API 调用获得。该示例没有显示它，但如果您使用 API Explorer 运行它，您会看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:10:48.570

从标签中，可以通过以下方式进行调用

[http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=YOU-API-KEY&tags=Your-tag&api_sig=Your-API-sig](http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=YOU-API-KEY&tags=Your-tag&api_sig=Your-API-sig)

输出类似于

```
<photo id="213636561" owner="49719616@N00" secret="55187e8a7d" server="86" farm="1" title="Hawaii Kauai I - The myth is there" ispublic="1" isfriend="0" isfamily="0" \> 
```

照片的 URL 格式为

```
http://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}.jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T16:17:53.967

有一个非常简单的例子可以使用 jquery [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# sql-server-2008 - SQL Server：检查列的数据类型

> ID：10353098
> 
> 赞同：14
> 
> 时间：2012-04-27T15:06:11.253
> 
> 标签：sql-server-2008, sqldatatypes

如何检查表中的列是否具有特定的数据类型？

例如，如何检查*SQL Server*表中的列是否属于数据类型`char(11)`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T15:08:32.273

```
select COLUMN_NAME 
from INFORMATION_SCHEMA.COLUMNS
where DATA_TYPE = 'char'
and CHARACTER_MAXIMUM_LENGTH = 11
and TABLE_NAME = 'your_table' 
```

使用`syscolumns`：

```
SELECT name FROM SYSCOLUMNS
where length = 11
and xtype = 175 --char type 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-20T10:55:20.497

```
select case when DATA_TYPE= 'char' then 'T' else 'F' end,    
case when CHARACTER_MAXIMUM_LENGTH = 11 then 'T' else 'F' end    
from INFORMATION_SCHEMA.COLUMNS     
where COLUMN_NAME = 'MY_COLUMN_NAME'     
and TABLE_NAME = 'MY_TABLE_NAME' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-25T17:21:19.407

查询列数据类型的sql查询

```
ALTER TABLE table_name MODIFY COLUMN column_name data_type; 
```

# macos - 停止在 Mac OS 中临时启动的工作

> ID：10353099
> 
> 赞同：3
> 
> 时间：2012-04-27T15:06:15.397
> 
> 标签：macos, launchd

我在 launchd 下安装了**Redis**作业。

为了检查我的应用程序在没有 Redis 的情况下如何工作，我想暂时停止一个。

```
$launchctl stop homebrew.redis # => redis down and up right away 
```

我知道命令`launchctl unload path_to_plist`，但这不是我的解决方案。

**不卸载plist的解决方案是否存在？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T16:03:43.870

我认为**没有**。

`launchctl unload`是在 OS X 中暂时停止服务的唯一方法。

# vb.net - 搜索文件夹通配符并打开文件夹

> ID：10353100
> 
> 赞同：0
> 
> 时间：2012-04-27T15:06:16.173
> 
> 标签：vb.net

我在尝试在目录中搜索带有通配符的文件夹时遇到问题。

该文件夹将如下所示：[2008][560909][Market Change] 或 [year][number][name]

到目前为止，这就是我所拥有的：

```
Function searching()

Dim choice, input
Dim strPatheServices

strPatheServices = "s:\dirr\subdirr\"
ending = true

choice = InputBox("Please choose: c for number, y for year created, n for name") 

If choice = "c" Then 
    MsgBox ("You entered: " & choice)
    input = InputBox("Please input a number:") 
    System.IO.Directory.Exists(strPatheServices\input)

ElseIf choice = "y" Then
    MsgBox ("You entered: " & choice)
    input = InputBox("Please input a year:") 
    System.IO.Directory.Exists(strPatheServices\input)

ElseIf choice = "n" Then
    MsgBox ("You entered: " & choice)
    input = InputBox("Please input a number:") 
    System.IO.Directory.Exists(strPatheServices\input)
End If

MsgBox "Done",,"Completed"

End Function 
```

除了将通配符添加到存在之外，我不确定从哪里开始，例如：

```
System.IO.Directory.Exists(strPatheServices\input + "*") 
```

请帮助我很困惑......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:40:32.733

您将需要使用`System.IO.Directory.GetDirectories(rootPath, wildcardPattern)`并查看返回的数组是否包含多个零元素。

# objective-c - 在字符串中搜索标签

> ID：10353101
> 
> 赞同：1
> 
> 时间：2012-04-27T15:06:16.223
> 
> 标签：objective-c, xcode, tags, nsstring

我有一个字符串，我想搜索以“#”开头并以“.”结尾的单词（标签）。或“，”或“”我在网上找到的，但受到限制，因为： - 您可以在字符串中找到单个单词（尽管有更多单词） - “RangeOfString”不允许多选

```
NSString *stringText = @"test #hello #world";
NSString *result = nil;

// Determine  "#"
NSRange hashRange = [stringText rangeOfString:@"#" options:NSCaseInsensitiveSearch];
if (hashRange.location != NSNotFound)
{
    // Determine " " location according to "#" location
    NSRange endHashRange;

    endHashRange.location = hashRange.length + hashRange.location;
    endHashRange.length   = [stringText length] - endHashRange.location;
    endHashRange = [stringText rangeOfString:@" " options:NSCaseInsensitiveSearch range:endHashRange];

    if (endHashRange.location != NSNotFound)
    {
        // Tags found: retrieve string between them
        hashRange.location += hashRange.length;
        hashRange.length = endHashRange.location - hashRange.location;

        result = [stringText substringWithRange:hashRange];
    }
} 
```

你知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:20:37.767

您可以使用[`NSRegularExpression`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708-CH1-SW48)类，如下所示：

```
NSError *error = NULL;
NSRegularExpression *tags = [NSRegularExpression
    regularExpressionWithPattern:@"[#]([^, .]+)([, .]|$)"
    options:NSRegularExpressionCaseInsensitive
    error:&error];
NSArray *matches = [tags matchesInString:str options:0 range:NSMakeRange(0, str.length)];

for (NSTextCheckingResult *match in matches) {
    NSLog(@"%@", [str substringWithRange:[match rangeAtIndex:1]]);
} 
```

您可能需要使用正则表达式才能使其正确。我喜欢的参考资料描述了 Apple 类支持的正则表达式语言的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:19:52.853

您应该使用[NSRegularExpression](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)，它将为您提供多个匹配项。以下是未经测试的示例：

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\b(#\\S*[.,])\\b" options:NSRegularExpressionCaseInsensitive];
int numberOfMatches = [regex numberOfMatchesInString:string options:0 range:NSMakeRange(0, string.length)];
NSArray *matches = [regex matchesInString:string options:0 range:NSMakeRange(0, [string length])]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:27:14.933

您很可能想要使用 NSScanner。

```
NSString *stringText = @"test #hello #world";
NSString *result = nil;
NSCharacterSet *endingChars = [NSCharacterSet characterSetWithCharactersInString:@"., "];

NSScanner *scanner = [NSScanner scannerWithString:stringText];
scanner.charactersToBeSkipped = nil;

[scanner scanUpToString:@"#" intoString:NULL];
[scanner scanString:@"#" intoString:NULL];
[scanner scanUpToCharactersFromSet:endingChars intoString:&result];
[scanner scanCharactersFromSet:endingChars intoString:NULL];

STAssertEqualObjects(result, @"hello", nil); 
```

此时您只需循环直到 [scanner isAtEnd];

* * *

```
NSString *stringText = @"test #hello #world";
NSString *match = nil;
NSMutableArray *results = [NSMutableArray arrayWithCapacity:2];
NSCharacterSet *endingChars = [NSCharacterSet characterSetWithCharactersInString:@"., "];

NSScanner *scanner = [NSScanner scannerWithString:stringText];
scanner.charactersToBeSkipped = nil;

while (![scanner isAtEnd]) {
    [scanner scanUpToString:@"#" intoString:NULL];
    [scanner scanString:@"#" intoString:NULL];
    [scanner scanUpToCharactersFromSet:endingChars intoString:&match];
    [scanner scanCharactersFromSet:endingChars intoString:NULL];
    [results addObject:match];
}

STAssertEquals(results.count, 2, nil);
STAssertEqualObjects([results objectAtIndex:0], @"hello", nil);
STAssertEqualObjects([results objectAtIndex:1], @"world", nil); 
```

# javascript - 使用条形码阅读器防止在 chrome 中打开下载窗口

> ID：10353105
> 
> 赞同：7
> 
> 时间：2012-04-27T15:06:42.933
> 
> 标签：javascript, barcode-scanner

我的网站（MVC3、C#）和条形码阅读器有这个问题。在我的表格中，我有这样的东西：

```
<ajax form....>

<input type=text />

<div id=list>
</div>

</form> 
```

输入由条形码阅读器填充，并自动提交带有 ajax 的表单，用 id = list 填充 div。我的问题是，使用 chrome 和 ie，在提交文本后，chrome 中会出现下载窗口，而 ie 中会出现收藏夹窗口。我想这是因为条形码阅读器在文本中插入了 [CR][LF] 并打开了这些窗口。我认为条形码阅读器在某个时刻插入了 ctrl-j，因为该组合打开了 chrome 中的下载窗口和 ie 中的收藏夹，但是使用 Firefox 时，下载窗口没有打开（并且也是 ctrl-j）。

我不想告诉我的客户配置条形码阅读器以便我的页面工作，所以我想要一个 javascript 中的解决方案也许可以解决这个问题。

谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T21:43:26.243

我找到[了此](http://code.google.com/p/chromium/issues/detail?id=50171)链接，但唯一的解决方案是更改扫描仪的默认字符...我不确定我是否可以更改我的，所以像您一样，我也在寻找与浏览器相关的修复程序..也许是 javascript。我会尝试用 javascript 处理字符以防止这种情况发生......如果我有任何成功，我会试着记住回到这里告诉你 hehehehehe

我认为这可以解决问题....

```
$(document).ready(function(){
    $("#input").keydown(function(e){
        if(e.which==17 || e.which==74){
            e.preventDefault();
        }else{
            console.log(e.which);
        }
    })
}); 
```

让我知道他是否也适合你……确保你也清空缓存……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T20:46:48.983

这段代码对我有用

```
$(document).ready(function(){
    $("#input").keydown(function(e){
        if(e.which==17 || e.which==74 || e.keyCode == 13){
            e.preventDefault();
        }
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T18:33:13.177

我的扫描仪 (Intermec SR30) 设置为在条形码后应用 3 个换行符。我通过打开 Vim，插入，然后扫描条形码找到了这个。然后我将文件添加到 od -ax：

```
0000000   3   1   2   2   1   0   9   9   9   4   8   5   2   8  nl  nl
       3133    3232    3031    3939    3439    3538    3832    0a0a
0000020  nl
           000a
0000021 
```

我可以用以下方法捕获'nl's：

```
$(document).ready(function(){
    $("#barcode").keypress(function(e){
        console.log('"' + e.keyCode + '"\n');
        if(e.keyCode == 13){
            e.preventDefault();
        }
    })
}); 
```

但是下载窗口打开事件（键盘上的 Ctrl+j）在它到达打开的页面之前被浏览器吞掉了。这个问题也困扰着 Firefox 30.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-02T11:31:13.747

已批准答案上的代码阻止了 CTRL 和 J 键。这只会阻止 CTRL + J

```
$("#barcode").keypress(function(event){
    if(event.keyCode == 74 && event.ctrlKey){
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-18T09:45:45.480

下面的这段代码不起作用。因为如果条形码值中包含“J”字符，您将无法获得正确的结果。我们尝试添加 e.ctrlkey 控件，但这次只能检索到条形码的一个字符。通过js解决似乎很难。也许最好的选择是更改扫描仪设置。

```
$(document).ready(function(){
    $("#input").keydown(function(e){
        if(e.which==17 || e.which==74 || e.keyCode == 13){
            e.preventDefault();
        }
    })
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-07T07:16:57.017

这对我有用。

```
<script>
  document.addEventListener('keydown', function(event) {
    if( event.keyCode == 13 || event.keyCode == 17 || event.keyCode == 74 )
      event.preventDefault();
  });
</script> 
```

# c# - ASP.NET 配置，安全部分错误

> ID：10353108
> 
> 赞同：0
> 
> 时间：2012-04-27T15:06:45.973
> 
> 标签：c#, asp.net

我使用 Visual Studio 2010，当我想使用 ASP.NET 配置添加用户名和密码时遇到问题，并且出现以下错误：

" 由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将被关闭。"

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:09:59.503

您可能需要删除

`C:\Documents and Settings\username\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`目录。

然后尝试重新启动您的机器。

希望能帮助到你。

# c++ - 使用 FBX 的骨骼动画

> ID：10353110
> 
> 赞同：1
> 
> 时间：2012-04-27T15:06:48.393
> 
> 标签：c++, model, directx, converter, fbx

我为我们的小型游戏引擎编写了一个 fbx 转换器。我坚持使用动画渲染模型。每个时间戳的矩阵看起来都很好，当我只渲染骨骼时，它也看起来像原始动画。我做了一些快照来显示我的问题。我只是不知道出了什么问题。也许有人能给我一个提示:)

我用于测试的文件是来自 FBX-SDK 的 humanoid.fbx。

着色器应该没问题：

```
VS_OUT output = (VS_OUT)0;

float4x4 skinTransform = 0;
skinTransform += MatrixPallette[input.BoneIndices.x] * input.Weights.x;
skinTransform += MatrixPallette[input.BoneIndices.y] * input.Weights.y;
skinTransform += MatrixPallette[input.BoneIndices.z] * input.Weights.z;
skinTransform += MatrixPallette[input.BoneIndices.w] * input.Weights.w;
//skinTransform = mul(BindShape, skinTransform);

//Transform Position
float4 worldPosition = mul(input.Position, skinTransform);
float4 viewPosition = mul(worldPosition, matView);
output.Position = mul(viewPosition, matProj); 
```

这是图片。（右-> 原始） [http://www.pic-upload.de/view-13949399/Unbenannt.png.html](http://www.pic-upload.de/view-13949399/Unbenannt.png.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:48:17.433

我建议不要计算顶点的“皮肤变换”，而是使用提供的变换计算变换后的顶点，然后使用权重获得组合位置。插值两个矩阵确实不是一个好主意。

```
float4 worldPosition = 0;
worldPosition += mul(input.Position, MatrixPallette[input.boneIndicies.x]) * input.Weights.x;
worldPosition += mul(input.Position, MatrixPallette[input.boneIndicies.y]) * input.Weights.y;
worldPosition += mul(input.Position, MatrixPallette[input.boneIndicies.z]) * input.Weights.z;
worldPosition += mul(input.Position, MatrixPallette[input.boneIndicies.w]) * input.Weights.w; 
```

但是，当您看到这样变形的物体时，通常意味着您忘记将矩阵调色板乘以“反向骨骼变换”。反向骨骼变换是变换矩阵骨骼具有“皮肤游行”姿势（即对象已被装配的原始姿势）。要计算蒙皮对象的正确位置，您应该在矩阵调色板中存储组合 transform = `inverse(skinParadeTransform)*currentTransform`。当前变换是骨骼在当前动画层次结构中的变换，而 skinParadeTransform 是“皮肤游行”模式下的原始骨骼变换。`inverse`是矩阵求逆（是的，你必须这样做）。

# python - 在 wxPython 中更改不同框架中的元素

> ID：10353111
> 
> 赞同：0
> 
> 时间：2012-04-27T15:06:51.917
> 
> 标签：python, user-interface, wxpython, frame, wxwidgets

我有一个批处理文件的小程序。这些文件使用地图文件来加载某些设置。映射文件的顶部有一行指定它的目录。

目前我能够读取该行并将其分配给源路径变量（sPath）。我想更新源目录的 TextCtrl，但它位于 MainFrame 类中，我将地图文件加载到不同的类中。

```
class Process(wx.Panel):

    def loadMap(self, event):
    MainFrame.sPath = str(mapFile.readline()).strip("\n")
    MainFrame.loadSource(MainFrame())

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="DICOM Toolkit", size=(800,705))
        self.srcTc = wx.TextCtrl(self.panel, 131, '', size=(600,25), style=wx.TE_READONLY)

    def loadSource(self):
        self.srcTc.SetValue(MainFrame.sPath) 
```

我删除了大部分代码，上面的代码给我带来了麻烦。如何从 Process 类或 MainFrame 类中的函数更改 MainFrame 类中的 self.srcTc？如果没有源自 MainFrame 类的处理程序，我实际上无法指向 self.srcTc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:26:53.467

有几种方法可以完成这类事情。您可以将句柄传递给面板类，该类可以调用父级中所需的任何内容来设置值（即 parent.myTxtCtrl.SetValue(val) ），或者您可以使用 pubsub。我个人推荐后者，因为它更灵活，并且在您更改程序时不易损坏。我写了以下教程，可以让你快速上手：http: [//www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:21:09.850

我认为您想要的东西必须看起来像这样（没有工作示例）：

```
class Process(wx.Panel):
    def loadMap(self, event):
        frame = MainFrame()
        frame.sPath = str(mapFile.readline()).strip("\n")
        frame.loadSource() 
```

使用时，`MainFrame.sPath = ...`您实际上并没有将 sPath 更改为您创建的 MainFrame，而是更改为类本身，然后您创建它，`MainFrame()`而不存储对它的引用（例如，将其分配给变量）。所以，除了类本身的“内部”之外，您不能从其他地方访问它`self`。

解决方案是创建一个 a 的实例`MainFrame`并对其进行操作。创建它并将其分配给变量后，您可以操作该`.sPath`属性并调用`loadSource()`.

**更新**：从您的代码片段来看，您似乎`MainFrame`在文件末尾创建了实例：`MainFrame().Show()`，然后在`loadMap`方法中创建了一个新实例。

你应该做的是，在你的文件末尾：

```
app = wx.App(0)
#MainFrame().Show()
mainFrame = MainFrame() # or, insteadof making it a global variable, pass it as an argument to the objects you create, or store a reference to it anywhere else.
mainFrame.Show()
app.MainLoop() 
```

并在`loadMap`方法中：

```
def loadMap(self, event):
    global mainFrame # or wherever you stored the reference to it
    # ...
    # remove this:
    # mainFrame = MainFrame()
    # set the sPath to the OBJECT mainFrame not the CLASS MainFrame
    mainFrame.sPath = str(mapFile.readline()).strip("\n")
    mainFrame.srcTc.SetValue(MainFrame.sPath) 
```

现在这样，它应该可以工作。问题是您正在创建另一个框架，更改其路径并更新其文本，但您没有显示它。更正是存储正在显示的实际窗口，并更新这个。

# vba - 在 Access 2010 中收到来自我的 VBA 代码的错误：“数据库”找不到对象“|1”

> ID：10353112
> 
> 赞同：2
> 
> 时间：2012-04-27T15:06:57.227
> 
> 标签：vba, ms-access-2010

因此，当我单击该按钮时，它将使用正确的文件名打开保存对话框，并在预览模式下打开报告，但是当我单击保存时，它会给我错误代码。我看到其他人说这是因为没有声明对象。谁能帮我？如果我让它工作，它将节省我每个月手动输入文件名超过 6 个小时的时间！

```
Option Compare Database

'------------------------------------------------------------
' Export_MLR
'
'------------------------------------------------------------
Function Export_MLR()
On Error GoTo Export_MLR_Err
    Dim strReportName As String
    DoCmd.OpenReport "Market Rate Notification Final", acViewPreview
    strReportName = Format(Reports![Market Rate Notification Final].Market_ID, "00") & " " & Reports![Market Rate Notification Final].Product_Code & "-" & "Market Rate Notification Final" & "_" & Format(Date, "mmddyy")
    DoCmd.OutputTo acOutputReport, strReportName, "PDFFormat(*.pdf)", "", False, "", , acExportQualityScreen

Export_MLR_Exit:
    Exit Function

Export_MLR_Err:
    MsgBox Error$
    Resume Export_MLR_Exit

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:26:51.767

来自评论：

> 我发现了自己的错误：这是 DoCmd.Outputto 行的修复：

```
DoCmd.OutputTo acOutputReport, "Market Rate Notification Final",
 "PDFFormat(*.pdf)", strReportName, False, , , acExportQualityScreen 
```

– 尼克

# wcf - WCF：异步 CTP：可以使用吗？

> ID：10353114
> 
> 赞同：0
> 
> 时间：2012-04-27T15:07:03.477
> 
> 标签：wcf, async-ctp

我正在尝试将 asyn CTP 与 WCF 一起使用，但我遇到了问题，因为 Task 不可序列化。

我已经安装了 CTP v3。

是否可以将 asyn CTP 与 WCF 一起使用？是否需要配置比仅安装 CTP 更多的东西？

我在想，如果不可能使用异步 CTP 喷射，也许不是在服务端使用异步 CTP，我可以使用异步 CTP 实现异步方法，该方法调用服务的正常方法（不是异步方法）。这是一个不错的选择吗？在这种情况下，服务不实现异步方法。

其他选项在服务端，使用开始/结束方法实现异步方法，使用 Task.Factory.FromAsync 方法将这两个方法包装在一个任务中。但这是更多的工作。

所以我的问题是，如果我希望客户端在等待服务响应时不被阻塞，我可以使用两种解决方案。首先在调用服务的普通方法的客户端中使用异步CTP，或者在使用Task.Factory.FromAsync的服务中使用异步方法。哪个是最好的选择？为什么？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:47:46.657

我不确定带有 Async CTP 的 VS 2010，但是对于 VS 11 Beta（您可能应该使用它），您可以简单地定义一个返回 a 的操作`Task`：

```
[OperationContract]
Task<string> GetData(int value); 
```

然后使用`async`：

```
public async Task<string> GetData(int value)
{
    return await …;
} 
```

我假设相同的方法适用于 Async CTP，但这只是一个假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:11:12.547

实现非阻塞客户端调用的最简单方法是在客户端，原因有两个：

1.  客户端异步方法可以通过现有的VS工具生成
2.  通过服务边界传递任务将需要您编写自己的同步功能。

为服务生成基于客户端 Task<>（因此兼容 async/await）的方法：

1.  在 VS11 中，存在一个新的复选框：“配置服务参考”对话框中“允许生成异步操作”下的“生成基于任务的方法”。（我相信它还没有记录）
2.  对于 CTP，您可以使用[此处](http://social.msdn.microsoft.com/Forums/en-US/async/thread/efb6d66b-1ff1-43d2-893b-876c2e6aa1c1/)描述的扩展来生成基于任务的方法。

# asp.net - 在 ASP.Net 中将可点击的图像添加到 GridView

> ID：10353115
> 
> 赞同：3
> 
> 时间：2012-04-27T15:07:03.687
> 
> 标签：asp.net, image, gridview, hyperlink

我正在尝试在 GridView 中每一行的末尾添加一个删除图像。我希望用户能够单击图像以删除该行。

因此，我使用 HyperLinkField 创建了指向另一个页面的链接，该页面将删除记录：

```
<asp:HyperLinkField DataNavigateUrlFields="ID" 
                        DataNavigateUrlFormatString="RemoveLine.aspx?ID={0}"                             
                        Target="_blank"   /> 
```

HyperLinkField 不包含 Image 标签，因此我创建了一个带有 Image 的 TemplateField。

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Image ID="imageRemove" runat="server" ImageUrl="~/Images/smallcross.gif"  />                                
    </ItemTemplate>                        
</asp:TemplateField> 
```

但是 HyperLinkField 和 Image 出现在不同的列中，并且图像没有点击事件。

有什么方法可以将两者结合起来？

我正在使用 ASP.Net 4.0。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:10:48.050

Normally you need to identify which record you want to delete, you can use the **CommadArgument** property to identify the record's Id:

```
<asp:TemplateField HeaderStyle-Width="40">
    <ItemTemplate>
        <asp:ImageButton ID="ButtonDelete" runat="server"  
            ImageUrl="~/Imags/delete.png" OnClick="ButtonDelete_Click" ToolTip="Delete"
            CommandArgument='<%#Bind("UserId")%>'/>
    </ItemTemplate>
</asp:TemplateField>

protected void ButtonDelete_Click(object sender, EventArgs e)
{
    ImageButton button = sender as ImageButton;
    DeleteUserById(Convert.ToInt32(button.CommandArgument));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:31:12.673

```
<asp:TemplateField>
 <ItemTemplate>
    <asp:ImageButton ID="btnDelete" runat="server"  
        ImageUrl="~/Imags/delete.png" OnClick="btnDelete_Click"
 ToolTip="Delete row" CommandName="Eliminar" CommandArgument='<%#Eval("UserId")%>'/>
 </ItemTemplate> 
```

您可以使用 CommandArgument 传递所选行的 ID 值并执行期望结果

```
// fires when the ImageButton gets clicked
protected void GridView1_ItemCommand(object sender, DataGridCommandEventArgs e)
{
  if(e.Commandname ="Eliminar"){
  this.Eliminar(Convert.ToInt32(e.CommandArgument));

} 
```

}

```
// function to delete the record
 private void Eliminar(int code)
 { 
    //custom code to delete the records
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:13:11.347

you can wrap your image with a raw anchor tag , you get the same result.

```
<asp:TemplateField>

<ItemTemplate>

<a href="RemoveLine.aspx?ID={0}">      
<asp:Image ID="imageRemove" runat="server" ImageUrl="~/Images/smallcross.gif" />                                              
</a>
</ItemTemplate>

</asp:TemplateField> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:28:12.570

图片按钮怎么样？

```
<ItemTemplate>
        <asp:ImageButton ID="ImageButton1" runat="server" 
            ImageUrl="~/Images/smallcross.gif" onclick="ImageButton1_Click" />
</ItemTemplate> 
```

# iphone - CSS 查询在我的 iPhone 4 上不起作用

> ID：10353116
> 
> 赞同：0
> 
> 时间：2012-04-27T15:07:07.620
> 
> 标签：iphone, css, media-queries

我尝试使用通过 Google 找到的几个媒体查询来定位 iPhone，但我的网站仍然没有像我希望的那样在实际 iPhone 上显示。当我使用 iphone4simulator.com 时，它看起来不错。这是我现在使用的媒体查询：

```
@media only screen and (device-width: 480px) and (orientation: portrait) and (resolution: 163dpi) 
```

这是网址：[cfbpreview](http://www.cfbpreview.com)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:10:01.637

由于视网膜显示屏，您必须为 iPhone 4 添加此功能。

```
/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

这是响应式设计可能需要的[所有媒体查询的链接。](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

**重要提示：**这将适用于像素比超过 1.5 的所有设备。如果您希望它更具体到设备，则必须向 meida 查询添加更多条件。

# java - 在运行时操作 ANT 任务（设置属性）

> ID：10353121
> 
> 赞同：0
> 
> 时间：2012-04-27T15:07:30.107
> 
> 标签：java, ant

我在我的项目中使用 ant 任务来做很多事情，比如创建目录、删除文件等等。在这种情况下，我从我的 SVN 服务器获得了一个分支列表，它运行良好。这一切都发生在我的程序运行时，从 java 代码中触发任务。

我的问题是：是否可以操作 ant 文件（tasks.xml）？用户应该输入用户名/密码组合，并且在触发任务时，这些凭据应该在我的 ant-task 中使用，而不是在属性中使用。

蚂蚁文件：

```
<target name="getBranchList">
    <exec executable="c:/svnclient/svn.exe" 
            output="c:/test/output/versionsonsvn.log">
        <arg value="ls" />
        <arg value="--username" />
        <arg value="${svn.user}" />
        <arg value="--password" />
        <arg value="${svn.password}" />
        <arg value="--non-interactive" />
        <arg value="--trust-server-cert" />
        <arg value="${svn.server}" />
    </exec>
</target> 
```

我如何在 Java 中使用它：

```
import org.apache.tools.ant.*;

public static void main(final String[] args) {
    Vector<String> v = new Vector<String>();
    v.add("getBranchList");
    v.add("someOtherTask");
    fireAntTasks("c:/test/tasks.xml", v); }

private void fireAntTasks(String fileName, Vector<String> v) {
    File taskFile = new File(fileName);
    if (buildFile.exists()) {
        Project p = new Project();
        p.setUserProperty("ant.file", buildFile.getAbsolutePath());
        p.init();
        ProjectHelper helper = ProjectHelper.getProjectHelper();
        p.addReference("ant.projectHelper", helper);
        helper.parse(p, buildFile);
        p.executeTargets(v);

    } else {
        System.out.println("File not found!");
    }
} 
```

我能想象的唯一解决方案是直接操作文件（在运行时设置“tasks.xml”中的属性）。但也许有更好的方法可以让这个工作......

问候

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:18:23.690

我不确定我是否完全理解你，但我猜你试图让用户输入来替换一些属性。

您可以使用[输入任务](http://ant.apache.org/manual/Tasks/input.html)，它将提示您可以将其存储到变量中的用户。

[或者，您可以通过属性任务](http://ant.apache.org/manual/Tasks/property.html)加载用户在执行 ant 之前编辑的属性文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:19:32.760

您可以使用[loadproperties 任务](https://ant.apache.org/manual/Tasks/loadproperties.html)和属性文件来实现类似的功能：

```
<loadproperties srcFile="build.properties"/> 
```

每个用户都必须`build.properties`在构建目录中创建一个并将值放入其中，如下所示：

```
svn.user = user
svn.password = password 
```

您也可以这样做，以便此文件位于主目录中：

```
<loadproperties srcFile="${user.home}/build.properties"/> 
```

这样文件将受到更多保护。

# wordpress - 获取下一篇文章的 $post 对象

> ID：10353126
> 
> 赞同：0
> 
> 时间：2012-04-27T15:07:46.633
> 
> 标签：wordpress, object, post

有没有办法`$post`在 Wordpress 中获取下一篇或上一篇文章的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:22:15.863

```
<?php
//get_adjacent_post($in_same_cat,$excluded_categories,$previous)
$nextPost = get_adjacent_post(false, '', false);
$previousPost = get_adjacent_post(false, '', true);
?> 
```

更多信息在这里：[http ://codex.wordpress.org/Function_Reference/get_adjacent_post](http://codex.wordpress.org/Function_Reference/get_adjacent_post)

# wpf - 无法通过 mvvm 访问嵌套的 wpf 项目命令

> ID：10353127
> 
> 赞同：0
> 
> 时间：2012-04-27T15:07:52.860
> 
> 标签：wpf, mvvm, command, nested

假设我有一个虚拟 WPF 应用程序（面向 MVVM）。我的主窗口包含一个我创建的自定义列表，该列表包含一个自定义项。该项目有一个图像按钮，我希望按钮命令是我在视图模型中得到的命令。视图模型绑定到主窗口。我该怎么做 ？

我附上了虚拟项目（在此处下载：[http](http://www.2shared.com/file/qmO3E5rx/NestedCommand.html) ://www.2shared.com/file/qmO3E5rx/NestedCommand.html 或此处： http: [//www.multiupload.nl/KCFLSKAIH0](http://www.multiupload.nl/KCFLSKAIH0)），

但如果你不想下载它，代码如下：

主窗口 XAML：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Application="clr-namespace:WpfApplication2"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Application:List x:Name="myList" DataContext="{Binding}" />
</Grid> 
```

MainWindow 代码隐藏：

```
 public MainWindow()
    {
        InitializeComponent();
        CharacterViewModel viewModel = new CharacterViewModel();
        this.myList.ItemsList.ItemsSource = viewModel.Model.Powers;
    } 
```

列出 XAML：

```
<UserControl x:Class="WpfApplication2.List"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:Application="clr-namespace:WpfApplication2"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <ListView x:Name="ItemsList" ItemsSource="{Binding Path=Name}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <Application:Item x:Name="myItem" />
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid> 
```

项目 XAML：

```
<UserControl x:Class="WpfApplication2.Item"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="50" d:DesignWidth="50">
<Grid>
    <Button x:Name="ButtonImage" Command="**????????**">
        <Button.Template>
            <ControlTemplate>
                <Border HorizontalAlignment="Center" VerticalAlignment="Center" >
                    <Image Width="50" Height="50" Source="/WpfApplication2;component/Images/Jellyfish.jpg"/>
                </Border>
            </ControlTemplate>
        </Button.Template>
    </Button>
</Grid> 
```

视图模型代码：

```
 public class CharacterViewModel : ObjectBase
{
    public Character Model { get; private set; }
    public DelegateCommand<object> RemoveCommand { get; private set; }

    public CharacterViewModel()
        : this(Character.Create())
    {
    }

    public CharacterViewModel(Character model)
    {
        Model = model;
        RemoveCommand = new DelegateCommand<object>(RemoveCommand_Execute, RemoveCommand_CanExecute, "Save");
    }

    void RemoveCommand_Execute(object arg)
    {
        Model.Powers.Clear();
        MessageBox.Show(string.Format("{0} character powers removed.", Model.Name));
    }

    bool RemoveCommand_CanExecute(object arg)
    {
        return Model.Name != string.Empty;
    }
} 
```

型号代码：

```
public class Character : ObjectBase
{
    string _Name = string.Empty;
    ObservableCollection<string> _Powers = new ObservableCollection<string>();

    public string Name
    {
        get { return _Name; }
        set
        {
            if (_Name == value)
                return;

            _Name = value;
            OnPropertyChanged("Name");
        }
    }

    public ObservableCollection<string> Powers
    {
        get { return _Powers; }
    }

    public static Character Create()
    {
        Character hero = new Character()
        {
            Name = "Superman",
        };

        hero.Powers.Add("Flight");
        hero.Powers.Add("Strength");
        hero.Powers.Add("X-Ray Vision");

        return hero;
    }
} 
```

框架代码：

```
public class DelegateCommand<T> : ICommand
{
    public DelegateCommand(Action<T> execute) : this(execute, null) { }

    public DelegateCommand(Action<T> execute, Predicate<T> canExecute) : this(execute, canExecute, "") { }

    public DelegateCommand(Action<T> execute, Predicate<T> canExecute, string label)
    {
        _Execute = execute;
        _CanExecute = canExecute;

        Label = label;
    }

    readonly Action<T> _Execute = null;
    readonly Predicate<T> _CanExecute = null;

    public string Label { get; set; }

    public void Execute(object parameter)
    {
        _Execute((T)parameter);
    }

    public bool CanExecute(object parameter)
    {
        return _CanExecute == null ? true : _CanExecute((T)parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add
        {
            if (_CanExecute != null)
                CommandManager.RequerySuggested += value;
        }
        remove
        {
            if (_CanExecute != null)
                CommandManager.RequerySuggested -= value;
        }
    }
}

public abstract class ObjectBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected internal void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:44:11.797

ListItem 的 DataContext 是它所绑定的项目，而不是您要查找的项目。您正在寻找 UserControl 的 DataContext 并得到它，您需要使用[ElementName](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname.aspx)显式引用 UserControl或使用[RelativeSource](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.aspx)绑定来探索可视化树。RelativeSource 可能是最好的解决方案，因为它引用了控件本身，您需要在您正在寻找 DataContext 上的 RemoveCommand 成员的绑定路径中指定 - 类似于`Path=DataContext.RemoveCommand`. 请参阅下面的完整示例。

XAML：

```
<Grid DataContext="{Binding}"> <!-- Set the binding for the DataContext of the control and all of its children -->
    <ListView ItemsSource="{Binding Path=Model.Powers}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <!-- Use RelativeSource to access the Grid control and then get its DataContext -->
                <Button Command="{Binding Path=DataContext.RemoveCommand, RelativeSource={RelativeSource AncestorType=Grid}}">
                    <Border HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <Image Width="50" Height="50" Source="/WpfApplication2;component/Images/Jellyfish.jpg"/>
                    </Border>
                </Button>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid> 
```

# jquery - 用户在下拉列表中进行选择时的 Jquery 事件

> ID：10353128
> 
> 赞同：13
> 
> 时间：2012-04-27T15:07:55.573
> 
> 标签：jquery

我有一个下拉列表。在 Jquery 中，当用户进行选择时我会使用什么事件。

下拉列表的 id 是 drp1

我尝试了以下但没有奏效：

```
$("#ddrp1").SelectChanged(SelectionItem); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-27T15:08:59.170

使用[`change()`](http://api.jquery.com/change/)事件：

```
$("#ddrp1").change(function() {
    // Pure JS
    var selectedVal = this.value;
    var selectedText = this.options[this.selectedIndex].text;

    // jQuery
    var selectedVal = $(this).find(':selected').val();
    var selectedText = $(this).find(':selected').text();
}); 
```

在 jQuery 1.7 中，您可以使用[`.on()`](http://api.jquery.com/on/)

```
$("#ddrp1").on("change", function() {
    // Pure JS
    var selectedVal = this.value;
    var selectedText = this.options[this.selectedIndex].text;

    // jQuery
    var selectedVal = $(this).find(':selected').val();
    var selectedText = $(this).find(':selected').text();
}​​​​);​ 
```

这是一个正在使用的[jsFiddle](http://jsfiddle.net/JamesHill/LwwFL/)`on()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:09:09.507

你想要的是`onchange`可以写成的事件

```
 $("#ddrp1").change (function () { 
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T15:09:26.727

使用 jQuery`change`事件处理程序。

```
$("#ddrp1").change(function(){
    //selection changed
    alert(this.value);//this will give the selected option's value
    alert($(this).find(':selected').text());//this will give the selected option's text
}); 
```

`change`绑定事件处理程序的另一种方法是。

```
$("#ddrp1").bind('change', function(){

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T02:48:15.623

你需要使用`change()`.

当元素的值发生更改时，会发生 jQuery 更改事件。

此事件仅限于`input`元素、`textarea`框和`select`元素。

```
$("#ddrp1").change (function () { 

     var getText = $(this).find(':selected').text();
     alert (getText); // show the text value of the selected element ...

 }); 
```

# java - 如何显示传递值到struts 2 checkboxlist标签

> ID：10353130
> 
> 赞同：0
> 
> 时间：2012-04-27T15:08:09.080
> 
> 标签：java, jsp, jakarta-ee, struts2

我对 struts2 复选框列表有疑问。当我使用我的操作类中的值初始化复选框列表标签时，列表会在使用属性标签打印时进入页面，但不会填充我的复选框列表。这是我的代码：

数据类：

```
public class CashBook implements Serializable
{
    private Integer id;
    private String description;

    public Integer getId()
    {
        return id;
    }

    public void setId(Integer id)
    {
        this.id = id;
    }

    /**
     * @return the description
     */
    public String getDescription()
    {
        return description;
    }

    /**
     * @param description the description to set
     */
    public void setDescription(String description)
    {
        this.description = description;
    }
} 
```

动作类：

```
 private List<CashBook> cashBook;

    /**
     * @return the cashBook
     */
    public List<CashBook> getCashBook()
    {
        return cashBook;
    }

    /**
     * @param cashBook the cashBook to set
     */
    public void setCashBook(List<CashBook> cashBook)
    {
        this.cashBook = cashBook;
    }

    public String startModify() throws Exception
    {
        cashBook = e.findCashBookEntities();
        return SUCCESS;
    } 
```

JSP：

```
<s:form id="myForm" action="" method="post">
  <s:checkboxlist id="cashBook" name="cashBook" list="#session.cashBookList" listKey="id" listValue="description"/>
</s:form> 
```

请我如何让这个复选框列表接收现金簿列表中的记录。

还有我将如何制作如下图所示的复选框列表。

![预期的复选框列表图像](../Images/b3065fdb8bf131446264fe87e27e9931.png)

# javascript - 如何在 CakePHP 中使用插件 javascript 脚本加载插件图像？

> ID：10353132
> 
> 赞同：4
> 
> 时间：2012-04-27T15:08:10.580
> 
> 标签：javascript, html, image, url, cakephp

我的CakePHP 插件中有一个 ( **javascript**`img` ) 脚本，它在当前查看的文档中创建一个标签。问题是，直到现在，每次提供有效图像源的尝试都失败了。该插件位于*CakePHP 库*（而不是 CakePHP 应用程序）的插件目录中，因为我们将它用于几个具有很多共同点的独立应用程序。

图像位于`/cake/plugins/Corporate/webroot/img`.

( **javascript** ) 脚本位于`/cake/plugins/Corporate/webroot/js`.

从脚本到图像的相对路径不起作用 ( `../img/image.png`)。`/Corporate/img/image.png`CakePHP的路由路径（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-11T12:20:11.187

## 使用正确的路径

在 PluginName 插件中获取 webroot 资产的正确路径是：

> /plugin_name/路径

IE：

*   文件路径：`App/Plugin/Corporate/webroot/img/image.png`
*   网址：`/corporate/img/image.png`

在 CakePHP 的早期版本中，资产调度是自动的，而在 2.2+ 版本中，[资产调度必须显式启用](http://book.cakephp.org/2.0/en/appendices/2-2-migration-guide.html#required-steps-to-upgrade-2-2)。

处理插件资产的正常方法是*不*使用资产调度过滤器并将文件复制（或符号链接）到与 url 对应的相同路径中的应用程序 webroot 即：

```
cd App
cp -R Plugin/Corporate/webroot webroot/corporate 
```

这意味着请求的 url 直接映射到应用程序 webroot 文件夹中的文件 - 在提供这些文件时没有调用 php 逻辑，这有利于显着加快提供此类资产的[速度](http://book.cakephp.org/2.0/en/views/themes.html#increasing-performance-of-plugin-and-theme-assets)。

## 处理javascript中的路径

如果应用程序始终安装为域的根 ( `http://example.com`)，则绝对没有复杂性 - 只需参考图像的相对路径：

```
var imagePath = '/corporate/img/image.png'; 
```

但是，如果应用程序的根是可变的（`http://example.com/`, `http://exmaple.com/sub/folder/`, `http://localhost/someproject/`） - 有必要*告诉*javascript 考虑应用程序的根。例如将以下内容放入布局文件中：

```
<head>
    ...
    <script>ROOT = '<?= $this->Html->url('/'); ?>';</script>
</head>
<body>
    <?= $this->fetch('content'); ?>
    ...
</body> 
```

这样，javascript 可以在`ROOT`任何地方引用全局来知道根 url 是什么，如下所示：

```
var imagePath = ROOT . 'corporate/img/image.png'; 
```

这使得无论应用程序如何安装都可以使用相同的 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T13:26:03.867

你可以使用这个代码

```
<?php echo $this->Html->image("recipes/6.jpg", array(    "alt" => "Brownies",    'url' => array('controller' => 'recipes', 'action' => 'view', 6))); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T11:54:36.890

虽然，这个问题已经很老了，但我仍然想为其他正在寻找它的人回答这个问题

你可以使用

```
<?php 
    echo $this->Html->image( $this->Html->url('/', true).'{plugin_name}/{folder_name}/{asset_name}');
?> 
```

例如，

```
<?php 
    echo $this->Html->image( $this->Html->url('/', true).'Corporate/img/image.png');
?> 
```

请注意，plugin_name 和asset_name 区分大小写。

# mysql - #1054 - '字段列表'中的未知列'tidbitz'

> ID：10353135
> 
> 赞同：2
> 
> 时间：2012-04-27T15:08:22.587
> 
> 标签：mysql, phpmyadmin

通过 phpmyadmin，我从表中删除了“tidbitz”列。

现在，每当我尝试写入该表时，都会收到此错误。该列已消失，并且未包含在我正在运行的任何查询中。我知道语法对于我的查询是正确的。我什至无法使用 phpmyadmin 编辑数据，我仍然收到此错误。

我试过：重启mysql服务器，重启apache，整理和优化表...

为什么这个鬼柱还在附近？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:30:36.063

刚遇到同样的问题。在我的情况下，它是由运行查询的插入触发器引起的，该查询正在使用不再存在的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:44:16.847

我最终通过创建另一个相同的表来解决我的问题，将表一中的所有数据写入表二，删除表一，并将表二重命名为表一。

因此，问题已解决，但我仍然很想知道是否有人以前遇到过这个问题以及根本原因是什么。

谢谢！

# php - 每个搜索结果都需要谷歌分析

> ID：10353137
> 
> 赞同：0
> 
> 时间：2012-04-27T15:08:30.533
> 
> 标签：php, mysql, record

我有一个带有多条记录的 mySQL 数据库。当客户端执行搜索并找到时，每条记录都将显示为个人资料页面。

我需要跟踪每条记录以了解每条记录的流量 - 该特定记录被查看了多少次，等等。

如何将 Google Analytics 与每条记录合并。我是否为每条记录插入谷歌代码？

感谢任何反馈。

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:16:07.020

您可能会想要使用[事件跟踪](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)来跟踪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:33:27.490

转到内容/页面并使用高级搜索对页面进行分段。

如果我猜对了，您应该为每个配置文件使用查询字符串。

将配置文件 ID 放在搜索中。示例 ?id=499

您可以使用 Google Analytics API 下载内容。

[https://developers.google.com/analytics/devguides/](https://developers.google.com/analytics/devguides/)

# facebook - Facebook 的 OpenGraph 编码不正确

> ID：10353139
> 
> 赞同：1
> 
> 时间：2012-04-27T15:08:32.697
> 
> 标签：facebook, encoding, facebook-opengraph

我在这里有一个网页：http: [//iworker.ru/career/article/446673](http://iworker.ru/career/article/446673)

当我尝试在我的 Facebook 帐户上分享它时（使用下面的类似按钮），我在 og:title 和 og:description 中得到了不正确的编码。

奇怪的是它可以在另一个页面上正常工作，例如：“iworker.ru/career/article/350527”

我可以确认，Facebook 使用此调试工具错误地查看了我的内容：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug （og:title 和 og:description 在工具的输出中显示的编码不正确）。

请指教...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:43:59.897

调试工具运行正常。您的页面包含一些不映射到 UTF-8 字符集的字符。请参阅[http://validator.w3.org/check?uri=http%3A%2F%2Fiworker.ru%2Fcareer%2Farticle%2F446673&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fiworker.ru%2Fcareer%2Farticle%2F446673&charset=%28detect+automatically%29&doctype=Inline&group=0)以确认这一点。

# java - 在二叉树中寻找同构性质的算法

> ID：10353140
> 
> 赞同：3
> 
> 时间：2012-04-27T15:08:33.057
> 
> 标签：java, algorithm, data-structures, binary-tree

检查两个二叉树本质上同构的算法是什么？我的代码-

```
boolean isIsomorphic(Root t1 , Root t2){
    if(t1==null || t2==null){
        return false;
    }

    if((t1.value == t2.value) && (isIsomorphic(t1.left,t2.right) && isIsomorphic(t1.right,t2.left))) {
        return true
    }

    return false; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:19:58.293

关于“同构”的[维基百科文章](http://en.wikipedia.org/wiki/Isomorphism)说：“如果两个对象是同构的，那么由同构保留的任何属性并且对于其中一个对象是正确的，对另一个对象也是正确的。”

所以你的问题需要说明你是否关心形状、数据、性能等。

如果您关心搜索二叉树的行为，那么您的算法是不正确的。请参阅[两个二叉树同构意味着什么？](https://stackoverflow.com/questions/742605/what-does-it-mean-for-two-binary-trees-to-be-isomorphic)

检查同构的最简单方法是按顺序遍历两棵树，检查每一步之后的值。

另一方面，如果您关心形状*和*数据，@amits 修复程序将为您解决。但请注意，您不妨称之为完全匹配。

最后，如果您只关心形状，那么您需要放弃检查`t1.value == t2.value`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:50:35.463

从[这里开始](http://tech-queries.blogspot.com/2010/04/quasi-isomorphic-trees.html)：如果 s 可以通过交换 s 的一些节点的左右子节点转换为 t，那么两棵树 s 和 t 是准同构的。节点中的值在确定准同构时并不重要，只有形状很重要。

该链接还提供了此同构定义的代码。

如果这些值很重要，则方法可能如下：

1.  使用两个队列对每棵树进行逐级遍历
2.  在两棵树中添加完关卡后，检查队列大小。如果不同，请报告“非同构”
3.  否则，对于第一棵树，将该级别中的所有节点出列到一个集合中。
4.  对于第二棵树，将每个节点出列并检查它是否存在于集合中。
5.  如果集合成员测试失败，报告“NOT ISOMORPHIC”。
6.  如果我们完成所有级别，请报告 ISOMORPHIC。

# c++ - 你能发现这个 boost::heap::binomial_heap 声明有什么问题吗？

> ID：10353145
> 
> 赞同：0
> 
> 时间：2012-04-27T15:09:04.977
> 
> 标签：c++, boost, binomial-heap

我的图形实现的 Vertex 类中有一个名为 handle 的成员。它是这样声明的：

```
boost::heap::binomial_heap<Vertex*,boost::heap::compare<VertComp> >::handle_type handle; 
```

...句柄来自我们的 TA 向我们展示的 boost::heap 库。所以，它所在的 Graph.h 文件有

```
 #include <boost/heap/binomial_heap.hpp> 
```

当我编译一个使用这个句柄成员的程序时，我得到这个错误：

Graph.h:80：错误：预期的 `;' 在“处理”之前

马上，任何人都可以看到缺少的东西（或者我需要更仔细地查看周围的线条吗？）？

# bash - 在 bash 中运行进程时出现奇怪的系统权限警告

> ID：10353151
> 
> 赞同：0
> 
> 时间：2012-04-27T15:09:20.800
> 
> 标签：bash, permissions, osx-lion, user-permissions, path-variables

当我在本地运行自制软件或任何 ruby​​ Web 服务器时，我收到以下警告。

有谁知道如何让他们离开？

```
larson:local larson$ brew doctor
/usr/local/Library/Homebrew/global.rb:65: warning: Insecure world writable dir /Users/larson in PATH, mode 040757
/usr/local/bin/brew:74: warning: Insecure world writable dir /Users/larson in PATH, mode 040757
/usr/local/Library/Homebrew/global.rb:65: warning: Insecure world writable dir /Users/larson in PATH, mode 040757
/usr/local/bin/brew:74: warning: Insecure world writable dir /Users/larson in PATH, mode 040757
Your system is raring to brew. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:11:07.350

使目录不可全局写入。

```
chmod o-w /Users/larson 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:11:17.643

只需从目录中删除世界写入权限。因为它是你的主目录，所以它真的不应该有它们

```
chmod o-w /Users/larson 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T15:11:25.817

更改指定目录的权限以删除全局可写位。

如在

```
chmod 750 ${directory} 
```

编辑：这不仅仅是你的主目录，如果路径的任何部分包含世界可写权限，ruby 会抱怨，因为写入目录的能力意味着你可以删除该目录中的任何文件，即使你没有拥有它。然后，您可以重新创建目录结构并将您自己的文件放置在适当的位置，这可能会替换恶意代码。

也就是说，如果Users目录也是全局可写的，也会导致错误弹出。

一口气把它们全部搞定：

```
sudo chmod -R 750 /Users 
```

# php - 有没有办法在magento的类别页面上创建标签

> ID：10353156
> 
> 赞同：0
> 
> 时间：2012-04-27T15:09:53.727
> 
> 标签：php, jquery, css, magento, tabs

我想知道是否有人知道在 Magento 的类别/主页上创建选项卡的简单方法，然后可以填充这些选项卡以显示各种块（查看最多的产品/新产品等）

有各种扩展可以在选项卡中显示此类产品/块bt。有没有办法修改代码，使其显示在选项卡中。

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:55:38.913

Magento 中的选项卡 - 默认情况下

您可以尝试在**view.phtml上创建选项卡**

例子 -

**标题**

```
<ul class="tabs" id="">
<li class="active first" id="product_tabs_description"><a href="javascript:void(0)">test1</a></li>
<li id="product_tabs_additional" class=""><a href="javascript:void(0)">test2</a></li>
</ul> 
```

**内容**

```
<div class="padder">
<div id="product_tabs_description_contents">test1</div>
<div id="product_tabs_additional_contents" style="display: none;">test2</div>
</div> 
```

**脚本**

```
<script type="text/javascript">
Varien.Tabs = Class.create();
Varien.Tabs.prototype = {
  initialize: function(selector) {
    var self=this;
    $$(selector+' a').each(this.initTab.bind(this));
  },

  initTab: function(el) {
      el.href = 'javascript:void(0)';
      if ($(el.parentNode).hasClassName('active')) {
        this.showContent(el);
      }
      el.observe('click', this.showContent.bind(this, el));
  },

  showContent: function(a) {
    var li = $(a.parentNode), ul = $(li.parentNode);
    ul.getElementsBySelector('li', 'ol').each(function(el){
      var contents = $(el.id+'_contents');
      if (el==li) {
        el.addClassName('active');
        contents.show();
      } else {
        el.removeClassName('active');
        contents.hide();
      }
    });
  }
}
new Varien.Tabs('.tabs');
</script> 
```

# xml - XSL 中的模板干扰 - 单独工作但不能一起工作

> ID：10353167
> 
> 赞同：0
> 
> 时间：2012-04-27T15:10:18.863
> 
> 标签：xml, xslt, xpath, wix, xslt-1.0

*如何使两个模板在同一个 XSLT 文件中工作？*

### 源 XML

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="WixSlave.Binaries">
            <Component Id="cmpA1D1BF677641BE2AE700859D8256B0FC" Guid="{B0BF9CBD-8A5D-43C1-B9DE-0A1B5A6BD1DE}">
                <File Id="filC2827DDF7874712A62423151FBE8CE34" Source="$(var.WixSlave.TargetDir)\WixSlave.exe" />
            </Component>
            <Component Id="cmpBC6AB890535757A915C99A10445CC74E" Guid="{8726FF82-808A-4736-AD0A-C804A34E494B}">
                <File Id="fil7BD5BE5CD71AC92FF47D1D51A99FEE05" Source="$(var.WixSlave.TargetDir)\WixSlave.exe.config" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="WixSlave.Binaries">
            <ComponentRef Id="cmpA1D1BF677641BE2AE700859D8256B0FC" />
            <ComponentRef Id="cmpBC6AB890535757A915C99A10445CC74E" />
        </ComponentGroup>
    </Fragment>
</Wix> 
```

### 只有文件夹模板产生所需的输出，注册表模板“忽略”

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:wix="http://schemas.microsoft.com/wix/2006/wi" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <!-- Copy all attributes and elements to the output. -->
    <xsl:template match="@*|*">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates select="*"/>
        </xsl:copy>
    </xsl:template>

    <!-- Folder Template -->
    <xsl:template match="wix:Wix/wix:Fragment/wix:DirectoryRef">
        <DirectoryRef Id="TARGETFOLDER">
            <xsl:copy-of select="*"/>
        </DirectoryRef>
    </xsl:template>

    <!-- Registry Template -->
    <xsl:template match="wix:Wix/wix:Fragment/wix:DirectoryRef/wix:Component">
        <Component>
            <xsl:apply-templates select="@*|*"/>
            <RegistryValue Root="HKCU" Key="Software\[Manufacturer]\[ProductName]" Name="toBeVariableKey" Type="integer" Value="1" KeyPath="yes"/>
        </Component>
    </xsl:template>
</xsl:stylesheet> 
```

### 注册表模板可以在没有文件夹模板的情况下正常工作

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:wix="http://schemas.microsoft.com/wix/2006/wi" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <!-- Copy all attributes and elements to the output. -->
    <xsl:template match="@*|*">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates select="*"/>
        </xsl:copy>
    </xsl:template>

    <!-- Registry Template -->
    <xsl:template match="wix:Wix/wix:Fragment/wix:DirectoryRef/wix:Component">
        <Component>
            <xsl:apply-templates select="@*|*"/>
            <RegistryValue Root="HKCU" Key="Software\[Manufacturer]\[ProductName]" Name="toBeVariableKey" Type="integer" Value="1" KeyPath="yes"/>
        </Component>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:15:08.360

您必须让模板匹配链继续。通过以下方式更改文件夹模板将使您继续前进：

```
<!-- Folder Template -->
<xsl:template match="wix:Wix/wix:Fragment/wix:DirectoryRef">
    <DirectoryRef Id="TARGETFOLDER">
        <xsl:apply-templates select="*"/>
    </DirectoryRef>
</xsl:template> 
```

所以基本上你必须让 XSLT 知道你需要继续向下遍历节点。

**更新**：如果您不想复制`Component`节点，请删除指令的副本

# java - Java - 如果我向一个类添加一个方法，它的每个实例会占用更多空间吗？使方法静态改变什么吗？

> ID：10353168
> 
> 赞同：2
> 
> 时间：2012-04-27T15:10:21.230
> 
> 标签：java, memory, static

此外，方法的大小是否会影响每个对象占用多少空间（如果标题问题的答案是肯定的）？还是更像是对方法的引用，每个引用的大小相同？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:11:55.150

方法不会将内存空间添加到实例变量，只会添加到类本身（当然也是一个 Object :-)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:22:26.973

类的方法和静态成员在 VM 中仅表示一次，作为类定义的一部分。每个单独实例的大小应该只受类中的非静态成员变量的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:31:05.963

每个对象都有对其类的引用。该类中方法的数量无关紧要。

非静态字段的数量对每个对象都有影响，因为每个对象都需要具有该字段。（除非 JVM 优化了该字段）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:12:02.057

据我所知，方法不会影响对象的大小。它会增加文件大小，但不会增加对象大小。

# javascript - Phonegap textarea滚动

> ID：10353171
> 
> 赞同：2
> 
> 时间：2012-04-27T15:10:26.473
> 
> 标签：javascript, iphone, ios, cordova, touch

我有一个 phonegap 应用程序，我通过应用文档触摸移动和 prevent.default() 禁用了 web 视图的滚动；

问题是我有两个文本区域，如果文本溢出，我想滚动它们。阻止默认设置会干扰这一点。

我已经尝试了几种不同结果的变通方法，到目前为止最好的方法是使用以下功能来检测触摸移动事件的 x 和 y，并且只有在它超出文本区域时才应用阻止默认值。

```
function preventBehavior(e) 
{ 
    console.log("event.targetTouches[0].pageX = " + event.targetTouches[0].pageX + " event.targetTouches[0].pageY = " + event.targetTouches[0].pageY);

    var x = event.targetTouches[0].pageX;
    var y = event.targetTouches[0].pageY;

    //fix the scroll of textareas for iOS by avoiding prevent default in them 
    if (x > 20 && x < 300 && y > 80 && y < 230){
        //touch falls within first text area
    }else if (x > 20 && x < 300 && y > 245 && y < 400){
        //touch falls within second text area
    }else{
        e.preventDefault(); 
    }
};
document.addEventListener("touchmove", preventBehavior, false); 
```

现在的问题是，如果文本区域不需要滚动，那么它会滚动整个 Web 应用程序。

有没有人对这个问题有明确的解决方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:48:29.967

如果您只想滚动文本字段，则可以使用[iscroll.js 。](http://cubiq.org/iscroll)它也适用于桌面网络浏览器。

# java - 如果需要处理的数据太多，如何让 ThreadPoolExecutor 命令等待？

> ID：10353173
> 
> 赞同：12
> 
> 时间：2012-04-27T15:10:38.537
> 
> 标签：java, multithreading

我正在从队列服务器获取数据，我需要对其进行处理并发送确认。像这样的东西：

```
while (true) {
    queueserver.get.data
    ThreadPoolExecutor //send data to thread
    queueserver.acknowledgement 
```

我不完全理解线程中发生了什么，但我认为该程序获取数据，将其发送到线程，然后立即确认。因此，即使我限制每个队列只能有 200 个未确认的项目，它也会尽可能快地接收它。当我在单个服务器上编写程序时这很好，但是如果我使用多个工作人员，那么这就会成为一个问题，因为线程队列中的项目数量并不是它完成的工作的反映，而是它的速度有多快可以从队列服务器获取项目。

如果线程队列满了工作，我能做些什么来让程序等待吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-27T15:15:23.007

> 如果需要处理的数据太多，如何让 ThreadPoolExecutor 命令等待？

`BlockingQueue`您可以使用带有限制的a 而不是开放式队列：

```
BlockingQueue<Date> queue = new ArrayBlockingQueue<Date>(200); 
```

就提交给 的作业而言，您可以创建自己的`ExecutorService`，而不是使用使用无界队列创建的默认`ExecutorService`s ：`Executors`

```
return new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS,
              new ArrayBlockingQueue<Runnable>(200)); 
```

一旦队列填满，它将导致它拒绝任何提交的新任务。您将需要设置一个`RejectedExecutionHandler`提交到队列的。就像是：

```
final BlockingQueue queue = new ArrayBlockingQueue<Runnable>(200);
ThreadPoolExecutor threadPool = new ThreadPoolExecutor(nThreads, nThreads,
           0L, TimeUnit.MILLISECONDS, queue);
// by default (unfortunately) the ThreadPoolExecutor will throw an exception
// when you submit the 201st job, to have it block you do:
threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {
   public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
      // this will block if the queue is full
      executor.getQueue().put(r);
      // check afterwards and throw if pool shutdown
      if (executor.isShutdown()) {
         throw new RejectedExecutionException(
              "Task " + r + " rejected from " + e);
      }
   }
}); 
```

我认为 Java 没有`ThreadPoolExecutor.CallerBlocksPolicy`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:21:43.960

如果您想要在工作人员开始处理任务时得到确认，您可以自定义`ThreadFactory`在执行实际工作之前从线程发送确认。或者您可以覆盖`beforeExecute`.`ThreadPoolExecutor`

如果您希望在新工作人员被释放以执行新任务时得到确认，我认为您可以`ThreadPoolExecutor`使用 a`SynchronousQueue`和 a初始化 a `ThreadPoolExecutor.CallerRunsPolicy`，或者使用您自己的调用者阻塞的策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:08:46.350

首先，我认为您的态度是错误的，因为您在伪代码中所做的工作正忙于等待，您应该阅读 java 教程[http://docs.oracle.com/javase/tutorial/essential/concurrency/中的并发教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

忽略这一点，我会为您提供繁忙等待的解决方案（不推荐）：

```
 ExecutorService e1 =  Executors.newFixedThreadPool(20);
     while (true) {
          if (!serverq.isEmpty() && !myq.isFull()) myq.enq(serverq.poll());
          if (!myq.isEmpty()) e1.execute(myq.poll());
     } 
```

笔记：

1.如其他答案所述，确保您的 myq 已同步。您可以扩展一些阻塞队列以确保同步正确。

2.您实现了一个可运行类，该类在服务迭代中执行您从服务器执行的操作，这些可运行类必须将 myq 作为构造函数的参数并将其保存为全局变量。

3.myq 获取runnables，在它的run 方法结束时，你必须确保runnable从myq 中删除**自己。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-18T07:23:26.197

拥有一个不会执行超过 200 个任务并等待任务完成后再提交 201 个任务的阻塞池怎么样。我已经在我的应用程序中使用信号量实现了它。您还可以通过将值传递给其构造函数来更改限制。

与@Gray 答案的唯一区别是，在这种情况下，很少有任何任务会被拒绝。信号量将使任何 201 任务等待，除非其他任务结束。尽管如此，我们有拒绝处理程序在任何拒绝的情况下将该任务重新提交给执行者。

```
private class BlockingPool extends ThreadPoolExecutor {
    private final Semaphore semaphore;      
    public BlockingPool(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue, int tasksAllowedInThreads){    
        super(corePoolSize,maximumPoolSize,keepAliveTime,unit,workQueue,new RejectedExecutionHandler() {
            @Override
            public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
                executor.execute(r);
            }
        });
        semaphore = new Semaphore(tasksAllowedInThreads);
    }

    @Override
    public void execute(Runnable task){
        boolean acquired = false;
        do{
            try{
                semaphore.acquire();
                acquired = true;
            } catch (final InterruptedException e){
                // log
            }
        } while (!acquired); // run in loop to handle InterruptedException
        try{
            super.execute(task);
        } catch (final RejectedExecutionException e){
            System.out.println("Task Rejected");
            semaphore.release();
            throw e;
        }
    }    

    @Override
    protected void afterExecute(Runnable r, Throwable t){
        super.afterExecute(r, t);
        if (t != null){
            t.printStackTrace();
        }
        semaphore.release();
    }
} 
```

这有意义吗！

# javascript - Javascript 选择器引擎和内置函数

> ID：10353181
> 
> 赞同：0
> 
> 时间：2012-04-27T15:11:10.653
> 
> 标签：javascript, css-selectors

我找到了以下关于创建选择器引擎的教程。 [http://blog.insicdesigns.com/2010/04/creating-your-own-selector-engine/](http://blog.insicdesigns.com/2010/04/creating-your-own-selector-engine/)

在javascript中，我们有类似的功能

*   getElementById()
*   getElementsByTageName()
*   getElementsByName()

等等，.....但是对于相同的功能，在他们的选择器引擎中，他们正在做类似的检查

```
 this.nodes[i].tagName == nm.toUpperCase() 
```

而不是 getElementsByTagName。这种方法的优点是什么？...

另外将所有节点分配给变量的用途是什么

```
 e.getElementsByTagName('*'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:21:15.047

`this.nodes[i].tagName == nm.toUpperCase()`是按标签名称过滤节点列表的方法的一部分......所以与“通过标签名称获取元素”无关

最后一点不是一个真正的问题..您想知道“为什么要选择所有节点”的原因？好吧，您正在编写扇区引擎....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:21:19.103

以下行

```
this.nodes[i].tagName == nm.toUpperCase() 
```

是函数内`ofTag`。它正在过滤一组节点，以查找具有给定名称的节点。

下一行

```
e.getElementsByTagName('*'); 
```

检索节点下的所有子/后代，以便您以后可以像下面这样过滤它

```
new DOMNodes(Selector.getAll(document)).ofTag('p').hasClass('note'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:23:25.800

`tagName`获取元素的属性时[存在不一致。](http://reference.sitepoint.com/javascript/Element/tagName)一些浏览器返回大写，而另一些则返回小写。要规范化值的输出，您必须在继续进一步操作之前执行其中一项操作。

至于`e.getElementsByTagName('*');`，[我最近回答了一个问题](https://stackoverflow.com/a/10314363/575527)，其中 OP 想要查找包含具有前缀的属性*名称*`mce_`的所有元素。获取此类元素的唯一方法是获取 DOM 中的所有元素，并检查它们的属性名称。

这也有一个很好的应用，`getElementsByTagName('*')`那就是确定元素的直接子元素。例如，在一个非常深的 DOM 中。如果我要根据属性查找某些父元素并获取它的子元素，通常您会从主体向下进行递归搜索以找到父元素。这将需要大量的递归操作。之后，你确定他们的孩子。

另一种方法是获取所有标签，确定它们的父节点，如果它们具有具有属性的父节点，则它们是直接子节点。此方法不需要递归，只需要`getElementsByTagName('*')`循环`nodeList`返回。

# ios - MBProgressHUD 在 connectionDidFinishLoading 中更改 label.text

> ID：10353183
> 
> 赞同：0
> 
> 时间：2012-04-27T15:11:19.967
> 
> 标签：ios, mbprogresshud

我正在使用 MDProgressHUD 来管理使用 NSConnection 的下载进度。一切都很好。当我尝试在调用 connectionDidFinishLoading 时将 HUD labelText 从说正在下载更改为完成时遇到问题。

在我的 connectionDidFinishLoading 方法中，我正在更改 labelText 并将图标更改为 checkmark ，就像在示例应用程序中一样。

```
 HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]];
HUD.mode = MBProgressHUDModeCustomView;
HUD.labelText = @"Finishing Up";
NSLog(@"show change now!!!"); 
```

在该代码之后，我解压缩下载并进行一些数据库操作。

但是由于某种原因，直到到达函数结束时它才会改变 [HUD hide:YES afterDelay:4]; 叫做。

我希望在它开始解压缩我的内容之前对其进行更改，因为下载已满，并且它使应用程序看起来像挂起或冻结。

如果重要，我正在使用 zipArchive 进行提取。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-14T18:09:14.680

这对我有用

```
dispatch_async(dispatch_get_main_queue(), ^{
  progressView.titleLabelText = @"Downloading ...";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:23:34.100

您是否尝试过：

```
[HUD setNeedsLayout];
[HUD setNeedsDisplay]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:51:14.987

MBProgressHUD 使用 KVO 来检测标签、进度等属性的更改。一旦您更改它，observeValueForKeyPath() 应该运行并更新 UI。您的代码是否真的很密集并且阻塞了 UI？我以前见过这种情况。。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-16T02:06:42.810

您只需将此方法添加到 MBProgressHud 的头文件中：

```
+ (MB_INSTANCETYPE)showHUDAddedTo:(UIView *)view withText:(NSString *)text; 
```

并在.m文件中实现如下：

```
+ (MB_INSTANCETYPE)showHUDAddedTo:(UIView *)view withText:(NSString *)text
{
    MBProgressHUD *hud = [[self alloc] initWithView:view];
    hud.labelText = text;
    [view addSubview:hud];
    [hud show:YES];
    return MB_AUTORELEASE(hud);
} 
```

并在任何你想要的地方调用它：

```
[MBProgressHUD showHUDAddedTo:self.view withText:@"Loading..."]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-24T19:17:17.513

对于其他回到此的人，请注意设置：

```
HUD.hidden = YES; 
```

不足以调用委托方法。您实际上必须调用：

```
[HUD hide:YES]; 
```

# python - 从数据库中检索后将 unicode 对象转换为列表

> ID：10353184
> 
> 赞同：0
> 
> 时间：2012-04-27T15:11:21.623
> 
> 标签：python, django, select, unicode

在 Django 中，我从一个选择字段中`request.POST.getlist('tags')`使用`u"['literature']"`. 我认为这是非常合理甚至可取的，因为我不想使用另一个表来存储这些信息。显然，当我尝试检索该信息时，问题就出现了，因为正如预期的那样，我得到了这个：

```
u'['
u'u'
u"'"
u'l'
u'i'
u't'
u'e'
.
.
. 
```

（假设这个标签是文学，例如）。

如何将此 unicode 对象转换为 Python 列表？有更好的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:13:58.827

简短的回答：创建另一个表。

数据库被设计为以特定方式使用，为什么要试图强迫它们以不应该的方式存储信息？

还有其他解决方案，但最好的答案是按预期使用数据库，从长远来看会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:22:14.923

这有帮助吗？

```
>>> import ast
>>> lst = ast.literal_eval(u"['literature']")
>>> lst
['literature']
>>> isinstance(lst, list)
True 
```

但更好的方法是在存储为字符串之前正确序列化列表。你可以使用现有的pickle实现之一，json，或者自己滚动（因为它不必是通用的，它可以是一个简单的oneliner，比如`"SENTINAL".join(list)`......虽然我不推荐后者）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:12:49.440

用于`json`在写入前转换为 JSON，在读取后从 JSON 转换。或者使用野外的几种实现之一`JSONField`。

# xcode - 外部主机通配符phonegap IOS

> ID：10353186
> 
> 赞同：2
> 
> 时间：2012-04-27T15:11:29.393
> 
> 标签：xcode, cordova, app-store, wildcard

大家好，我几乎准备好将我的应用程序发送到应用程序商店，但出现了一个问题！简而言之，我通过 ajax 调用远程 php 文件并从数据库中检索信息，其中我将有一些我想在我的应用程序中显示的外部链接（如产品网站）。问题是：要让用户打开外部链接，我必须在我的 phonegap.plist externalhosts 字段中放一个 *。我想知道这是否会导致应用商店拒绝我的应用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:17:27.233

不，你很好，这也是本机应用程序必须完成的方式。我已经接受了使用相同东西的应用程序。:)

# javascript - 在后端加载内容时显示徽标/广告

> ID：10353193
> 
> 赞同：3
> 
> 时间：2012-04-27T15:11:54.287
> 
> 标签：javascript, jquery

我想在内容前面放置一个徽标/广告，有一些方法可以做到，但它们的问题是它们使用 JS 显示/隐藏方法。发生的情况是，在用户观看徽标/广告时内容未加载，这导致双重等待用户首先等待徽标/广告，然后才是实际的 Flash 内容加载。所以我在想是否有一种方法可以显示徽标/广告，同时在后端继续加载 Flash 内容。 *我没有要求加载程序在后端闪存内容完成加载之前继续出现，因为我发现只有一个脚本能够使用 Jquery 执行此操作，但它被设计为在我的闪存内容时使用固定像素基于 %ages*

现场演示：[http ://bloghutsbeta.blogspot.com/2012/04/testing-game-content-issue.html](http://bloghutsbeta.blogspot.com/2012/04/testing-game-content-issue.html)

注意：很抱歉提供 blogspot 链接，但 JsFiddle 不是生活在阿富汗的 5KBps 的人的选择，但如果您觉得我遗漏了什么，请告诉我，我会编辑它并尽我所能提供尽可能相关的问题^^

相关标记：灯箱或模式窗口的按钮

```
<a class="poplight" href="#?w=100%" rel="popup_name"><img alt="play game" class="happybutton" onmouseout="this.style.opacity=0.8;this.filters.alpha.opacity=80" onmouseover="this.style.opacity=1;this.filters.alpha.opacity=100" src="http://farm5.static.flickr.com/4084/4998558471_27e3985c16_m.jpg" style="opacity: 0.8;" /></a> 
```

在单击上述按钮之前，内容设置为不显示

```
<div class="popup_block" id="popup_name">
 <script type="text/javascript">
$(document).ready(function(){
    $('a.poplight[href^=#]').click(function() {
        $('<iframe/>')
            .attr('frameborder', 0)
            .attr('allowTransparency', false)
            .attr('scrolling', 'no')
            .attr('width', '100%')
            .attr('height', '98%')
            .attr('src', 'http://files.cryoffalcon.com/bhgames/dressup/Celebrities/Wizard%20Fashion.html')
            .appendTo('#popup_name');
    });
});
</script>
</div> 
```

CSS：

```
#fade { 
    display: none; 
    background: #000;
    position: fixed; left: 0; top: 0;
    width: 100%; height: 100%;
    opacity: .80;
    z-index: 9999999;
}

.popup_block{
   width: 98.95%; height: 98.2%;
    display: none;
    padding: 0px;
    line-height:1em;
    font-size: 1em;
    position: fixed;
    top: 0px; left: 0px;
    z-index: 999999999;
    -webkit-box-shadow: 0px 0px 20px #000;
    -moz-box-shadow: 0px 0px 20px #000;
    box-shadow: 0px 0px 20px #000;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
}
.close {
    height:20px;
    float: right;
    margin: 0 2px 0 0;   
} 
```

JS（实际上是 Jquery）

```
 <script type="text/javascript">
$(document).ready(function(){

//When you click on a link with class of poplight and the href starts with a #
$('a.poplight[href^=#]').click(function() {
var popID = $(this).attr('rel'); //Get Popup Name
var popURL = $(this).attr('href'); //Get Popup href to define size

//Pull Query & Variables from href URL
var query= popURL.split('?');
var dim= query[1].split('&');
var popWidth = dim[0].split('=')[1]; //Gets the first query string value

//Fade in the Popup and add close button
$('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a href="#" title="Close It" class="close"><img src="http://files.cryoffalcon.com/bloghuts/images/close%20button.png" alt="Close" width="20" height="20" /></a>');

//Define margin for center alignment (vertical + horizontal) - we add 80 to the height/width to accomodate for the padding + border width defined in the css
var popMargTop = ($('#' + popID).height() + 0) / 0;
var popMargLeft = ($('#' + popID).width() + 0) / 0;

//Apply Margin to Popup
$('#' + popID).css({
'margin-top' : -popMargTop,
'margin-left' : -popMargLeft
});

//Fade in Background
$('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
$('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer

return false;
});

//Close Popups and Fade Layer
$('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
$('#fade , .popup_block').fadeOut(function() {
$('#fade, a.close').remove();
}); //fade them both out

return false;
});

});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:59:21.547

我认为您可以尝试为 flash 内容设置事件以通知内容已下载（本教程可以帮助您[http://www.permadi.com/tutorial/flashjscommand/](http://www.permadi.com/tutorial/flashjscommand/)）。虽然主要内容不会收到来自所有内容元素（如果不止一个）的信号，但您可以显示模式窗口或隐藏其他内容。

# facebook - 将评论从 Facebook 插件导入 Disqus

> ID：10353195
> 
> 赞同：2
> 
> 时间：2012-04-27T15:12:00.747
> 
> 标签：facebook, import, comments, export, transfer

如何将评论从 Facebook 评论插件转移到 Disqus？

请记住，我在脚本方面的知识非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:22:14.037

Disqus 会自动查询您的 FB 页面以获取评论。大多数 Facebook 评论插件也会查询 FB 以获取在那里发布的评论。

您需要做的就是在 Facebook 评论插件中找到您的 Facebook 应用 ID，然后将其输入到您的 Disqus 管理面板中的设置 > 高级 > Facebook 应用 ID。您的 FB 评论应该会自动出现在 Disqus 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-18T10:32:00.353

登陆这里寻找解决方案，但从另一个博客中找到了解决方案。在这里分享它，以便其他人可能会发现它有用。这个插件解决了这个问题 - [http://wordpress.org/plugins/seo-facebook-comments/](http://wordpress.org/plugins/seo-facebook-comments/)

SEO Facebook 评论在您的博客上嵌入 Facebook 评论表，并查看您的每篇博客文章，搜索已发布的 Facebook 评论并将它们添加到您的 WP 数据库，一旦所有 FB 评论都迁移到 WP 数据库，它就可以轻松导入迪斯科斯。

# eclipse - Subclipse 和 Eclipse - RA 层请求失败

> ID：10353198
> 
> 赞同：5
> 
> 时间：2012-04-27T15:12:03.053
> 
> 标签：eclipse, subclipse

我正在按照通过 Subclipse 将 Ardor3D 安装为 Eclipse 项目集的说明进行操作；说明在：

[http://www.ardor3d.com/wiki/svneclipsetutorial](http://www.ardor3d.com/wiki/svneclipsetutorial)

我从安装 Subclipse

[http://subclipse.tigris.org/](http://subclipse.tigris.org/)

并安装好。如果我转到 Eclipse 的首选项和团队|SVN，我可以看到 SVN 接口客户端是 JavaHL，因此安装得很好。

但是，当我来检查代码时：

[http://ardorlabs.svn.cvsdude.com/Ardor3Dv1](http://ardorlabs.svn.cvsdude.com/Ardor3Dv1)

通过选择 New|Other|SVN|Check Projects from SVN 我收到以下错误消息：

RA 层请求失败 svn：无法连接到 URL 'http://ardorlabs.svn.cvsdude.com/Ardor3Dv1' 的存储库 svn：'http://ardorlabs.svn.cvsdude.com/Ardor3Dv1'的选项：可以未连接到服务器 (http://ardorlabs.svn.cvsdude.com)

我知道该 URL 是有效的，因为我可以在我的 WinXP 工作 m/c 上安装上述罚款。但是，在我的个人笔记本电脑上安装相同的 Win7 无法连接。

我尝试暂时禁用防火墙，但仍然失败。

我尝试过使用以下配置和服务器文件：

C:\Documents and Settings\Administrator\Application Data\Subversion

但老实说，不是 100% 确定要更改什么，如果有的话，因为我没有使用代理设置。

如果那里有专家知道解决此问题的方法，我将非常感谢您的来信。

谢谢

格雷厄姆

PS。我发现错误消息“RA 层请求失败”令人困惑，因为 URL 有效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T10:07:27.077

我遇到了完全相同的问题，结果证明是由代理服务器引起的。我的问题的解决方案是将颠覆配置为与代理服务器一起使用，但是如何做到这一点并不明显。

您应该有一个类似于以下内容的目录：`C:\Documents and Settings\UserName\Application Data\Subversion`

在该目录中将有一个名为`servers`.

我取消注释并编辑了以下条目，我的 subversion 现在可以在 Eclipse 上正常工作：

```
http-proxy-host
http-proxy-port
http-proxy-username
http-proxy-password 
```

为什么你不能通过 Eclipse 来配置它有点神秘，但是你去吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T14:52:46.927

另一个用户帐户可以登录，我收到上述错误。不同之处在于我的帐户中缺少代理设置。它按用户存储在注册表中，我可以在 Tortoise SVN 配置中轻松更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T13:35:49.903

我们的服务器遇到了这个错误。虽然我们能够成功访问 CollabNet 5 SVN 管理控制台，但导航到存储库以从管理控制台浏览它会失败。我们也无法从 Subclipse 客户端连接。

问题是我们没有在服务器上访问正确的端口。我们已将默认端口从 80 重新配置为 4343，管理控制台报告了更改的设置，但服务器仍在 80 上运行。

对于它的价值，为了使配置更改生效，我们必须关闭 repo 服务器并在管理控制台中进行更改，然后重新启动机器。然后，我们可以从管理控制台中的链接浏览 repo。

# nhibernate - GenericADOException：无法插入

> ID：10353200
> 
> 赞同：3
> 
> 时间：2012-04-27T15:12:08.420
> 
> 标签：nhibernate, nhibernate-mapping

我正在尝试将我的订单对象保存在与表pastaIndividual 具有多对一关系的数据库中。

但是，我得到了这个例外：

> 错误：NHibernate.Exceptions.GenericADOException：无法插入：[FrancosPoS.DBMapping.order][SQL：INSERT INTO 订单（价格、现金、信用、obs）值（？，？，？，？）；选择 LAST_INSERT_ID（）] ---> MySql.Data.MySqlClient.MySqlException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“订单（价格、现金、信用、obs）值（'123'、1、0、'休眠'）附近使用正确的语法

这是我的订单映射表：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="FrancosPoS" namespace="FrancosPoS.DBMapping" xmlns="urn:nhibernate-mapping-2.2">
  <class name="order" table="order" lazy="true" >
    <id name="idOrder">
      <generator class="identity" />
    </id>
    <set name="pastaIndividual" table="pasta_individual" cascade="save-update">
      <key column="idPastaI"/>
      <one-to-many class="pastaIndividual"/>
    </set>
    <!--<many-to-one insert="false" update="false" lazy="false" name="pastaIndividual" class="FrancosPoS.DBMapping.pastaIndividual">
      <column name="idPastaI" sql-type="int(11)" not-null="false" />
    </many-to-one>-->
    <many-to-one insert="false" update="false" lazy="false" name="pastaCombo" class="FrancosPoS.DBMapping.pastaCombo">
      <column name="idPastaC" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <many-to-one insert="false" update="false" lazy="false" name="pastaFeast" class="FrancosPoS.DBMapping.pastaFeast">
      <column name="idPastaF" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <many-to-one insert="false" update="false" lazy="false" name="salad" class="FrancosPoS.DBMapping.salad">
      <column name="idSalad" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <many-to-one insert="false" update="false" lazy="false" name="drink" class="FrancosPoS.DBMapping.drink">
      <column name="idDrink" sql-type="int(11)" not-null="false" />
    </many-to-one>
    <property name="price">
      <column name="price" sql-type="decimal(8,4)" not-null="true" />
    </property>
    <property name="cash">
      <column name="cash" sql-type="tinyint(1)" not-null="false" />
    </property>
    <property name="credit">
      <column name="credit" sql-type="tinyint(1)" not-null="false" />
    </property>
    <property name="obs">
      <column name="obs" sql-type="varchar(150)" not-null="false" />
    </property>
  </class>
</hibernate-mapping> 
```

这是我的pastaIndividual映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="FrancosPoS" namespace="FrancosPoS.DBMapping" xmlns="urn:nhibernate-mapping-2.2">
  <class name="pastaIndividual" table="pasta_individual" lazy="true" >
    <id name="idPastaI">
      <generator class="identity" />
    </id>
    <property name="type">
      <column name="type" sql-type="varchar(25)" not-null="true" />
    </property>
    <property name="price">
      <column name="price" sql-type="decimal(8,4)" not-null="true" />
    </property>
  </class>
</hibernate-mapping> 
```

我已经尝试过使用`<set>`or just进行订单映射`<many-to-one>`，但发生了同样的错误。

也许我错过了一些逆属性？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:05:11.310

订单是一个保留字。只需在您的类定义中添加一些反引号，NHibernate 就会自动为您转义表名。

```
 <class name="order" table="`order`" lazy="true" > 
```

# c# - 贝宝更改默认货币

> ID：10353204
> 
> 赞同：1
> 
> 时间：2012-04-27T15:12:24.507
> 
> 标签：c#, asp.net, paypal

我在一个捐赠网站上工作，并且我已经设置了一个 PayPal 沙盒企业帐户。一切都很好，但是我想接受欧元而不是默认设置的美元。请问这怎么做？谢谢 ：）

- -编辑 - -

我没有使用任何 API。我刚刚创建了一个企业帐户并使用了以下代码：

```
string temp_url = "https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_donations&business=sponsorchild10@gmail.com&item_name=Sponsor a Child Society&amount=";
string PayPal = temp_url + Convert.ToString(donation);
Response.Redirect(PayPal); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:33:59.627

你有没有使用`currency_code`财产。

*"此参数代表货币代码。可能的值为 "USD","EUR","GBP","YEN","CAD" 等。默认为 "USD"。*

查找更多：[在 ASP.NET 中使用 PayPal 支付系统](http://www.codeproject.com/Articles/19184/Use-of-the-PayPal-payment-system-in-ASP-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:31:43.463

当您生成对贝宝的请求时，您可以包含一个参数，说明您希望使用哪种货币进行交易。

# android - JSONObject getString if 语句

> ID：10353205
> 
> 赞同：0
> 
> 时间：2012-04-27T15:12:25.003
> 
> 标签：android, json

String result = "{\"error_type\":\"success\",\"message\":\"Error Message....."}";

```
JSONObject json = new JSONObject(result);
if( (json.getString("error_type") == "error") {
   Toast.makeText(getApplicationContext(), "Test", Toast.LENGTH_LONG).show();
} else {
   Toast.makeText(getApplicationContext(), "Nooo", Toast.LENGTH_LONG).show();
} 
```

此代码是敬酒“Nooo”。但是 json.getString("error_type") 是一个“错误”。这是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:17:21.653

您应该`String`使用`equals`方法而不是`==`. IE，

```
if (json.getString("error_type").equals("error")) {
  ...
} 
```

运算符`==`比较对象引用而不是`String`自身的内容。

# android - 如何在用户设置的时间运行方法？

> ID：10353207
> 
> 赞同：0
> 
> 时间：2012-04-27T15:12:33.490
> 
> 标签：android, timer

我正在制作一个应用程序，我必须在用户设置的时间执行该方法。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:16:50.103

定义一个`PendingIntent`将执行操作然后设置`Alarm`执行：http `PendingIntent`: [//developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:18:30.197

也许这可以帮助你：http: [//developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html)

以及其他相关：

[安卓计时器？如何？](https://stackoverflow.com/questions/4597690/android-timer-how)

[如何在android中设置计时器](https://stackoverflow.com/questions/1877417/how-to-set-a-timer-in-android)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:34:31.470

实现这一点的最佳方法是`Service`在您的应用程序中创建一个调用`AlarmManager`. `AlarmManager`用于触发将来设置的事件并在 a 中调用它使`service`您即使在应用程序关闭时也可以运行它。可以在[这里](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)找到一个非常好的相同教程。尽管我建议您先阅读`AlarmManager` [文档](http://developer.android.com/reference/android/app/AlarmManager.html)。

# ruby - gsub 的奇怪之处

> ID：10353212
> 
> 赞同：9
> 
> 时间：2012-04-27T15:12:42.307
> 
> 标签：ruby, regex, rspec, ruby-1.9, gsub

我试图用来`gsub`删除rails应用程序中字符串中的非单词字符。我使用了以下代码：

```
somestring.gsub(/[\W]/i, '')  #=> "" 
```

但它实际上是不正确的，它也会删除字母`k`。正确的应该是：

```
somestring.gsub(/\W/i, '')  #=> "kkk" 
```

但我的问题是包含上述代码的rails控制器的单元测试使用rspec不起作用，单元测试实际上通过了。所以我在 rspec 中创建了一个非常极端的测试用例

```
it "test this gsub" do
  'kkk'.gsub(/[\W]/i, '').should == 'kkk'
end 
```

上面的测试用例应该失败，但它实际上通过了。这里有什么问题？为什么考试会通过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:34:49.953

Ruby 1.9 切换到了不同的正则表达式引擎 ( [Oniguruma](http://www.geocities.jp/kosako3/oniguruma/) )，它解释了行为变化。这似乎是其中的一个错误。

对于您的示例，您可以通过不指定不区分大小写的匹配来解决此问题：

```
irb(main):001:0> 'kkk'.gsub(/[\W]/i, '')
=> ""
irb(main):002:0> 'kkk'.gsub(/[\W]/, '')
=> "kkk"
irb(main):004:0> 'kkk'.gsub(/\W/i, '')
=> "kkk"
irb(main):003:0> 'kkk'.gsub(/\W/, '')
=> "kkk" 
```

**更新：**看起来删除字符组是另一种方法。可能是这样的否定匹配在字符组中不一定有效？

# python - 在下次运行时在 python 中写入文件

> ID：10353215
> 
> 赞同：1
> 
> 时间：2012-04-27T15:12:50.173
> 
> 标签：python, file

我有以下代码：

```
f=open('data.txt', 'w')
conn = urllib2.urlopen('http://example.com')
page_html = conn.read()
data=BeautifulSoup(page_html)
count=0
out=""
for val in data.findAll('td'):
    count=count+1
    if(count%2==0 and val.contents):
        out=out+val.contents[0].strip(' \n\t')+"\n"
    if(count>=18):
        f.write(out+"\n")
        break
f.closed 
```

现在，当我执行代码时，上一次运行的输出进入文件 data.txt

例如，现在我在 url 中有 example.com，我运行代码然后将 url 更改为 stackoverflow.com。现在，当我再次运行它并检查 data.txt 时，我在 data.txt 文件中有 example.com 的输出。下次我使用不同的 url 运行时，我会在文件中获得 stackoverflow.com 的输出。有人可以帮我解决这个问题吗？我检查了代码中每个阶段的输出。如果我直接给出输出而不是写入文件，它会完美运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:14:25.130

您可能想使用`f.close()`而不是`f.closed`. 后者不会关闭文件。它返回一个布尔值，告诉您文件是否已关闭。

我还建议您使用[`with`语句](http://effbot.org/zone/python-with-statement.htm)而不是手动关闭文件。

```
with open('data.txt', 'w') as f:
    # etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:14:39.343

你想关闭你的文件

```
 f.close() 
```

函数调用，从而刷新您的输出缓冲区。

# c# - 哪个在 Java 中最好；模拟接口还是模拟类？

> ID：10353222
> 
> 赞同：0
> 
> 时间：2012-04-27T15:13:32.950
> 
> 标签：c#, java, unit-testing, mocking

首先，让我透露一下，我不是 Java 开发人员，我目前使用 C# 进行开发，因此我对 Java 所做的任何假设或陈述都可能是不正确的或消息不灵通的。

在 .Net 中使用模拟对象编写单元测试时，99% 的时间我们模拟接口。可以模拟类，但您只能控制虚拟（因此可模拟）方法。

在 Java 中，由于默认情况下方法是虚拟的，所以我想模拟一个类与模拟一个接口是一样的，因为一切都将被模拟行为所覆盖。

那么，在 Java 中依赖接口（因此在单元测试中模拟接口）仍然是最佳实践，还是大多数 Java 开发人员使用类来减少类型的数量（不需要接口）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:19:23.883

我实际上做了相反的转换——即在 java 中模拟，然后转换到 csharp。我工作的公司传统上仍然模拟接口，如果具体确实有接口的话。否则，我们*确实*模拟了由于您指定的原因而起作用的实际课程。因此，根据我的经验，出于明显的依赖性原因，我们优先考虑接口。

对于 java，我们选择了 Mockito 模拟框架，我认为它工作得很好。

[http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:21:15.703

我也会在 Java 中模拟接口。我认为这就是整个想法：客户只知道接口引用类型。您可以在其后面注入一个模拟实现，而客户端并不聪明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:19:51.900

我推荐的另一个好的框架是 EasyMock。

[http://easymock.org/](http://easymock.org/)

它的学习曲线很低，我使用它时没有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T18:53:43.620

试试 Mockito [http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)。非常简单，仍然很强大！

# macos - 如何绑定以使用 DHCP dns 进行查找？

> ID：10353223
> 
> 赞同：1
> 
> 时间：2012-04-27T15:13:33.803
> 
> 标签：macos, dns, bind, dhcp

我在我的笔记本电脑（OSX 10.6）上为开发人员设置了 XAMPP，我想使用 VirtualDocumentRoot 以便我可以执行 *.localhost 并且它会自动映射到我的站点目录下的文件夹。我已经把这一切都设置好了，而且效果很好，但是当我今天开始工作时，我发现我们的 LAN 处理 DNS 的方式存在问题。

长话短说，它不是检查本地域的 LAN DNS 服务器，而是到根目录。有没有办法绑定来检查 DHCP 提供的 DNS 服务器以获取它不负责的地址？或者，有没有办法让我的操作系统首先使用 DHCP DNS 服务器，然后以最小的性能影响回退到本地？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:32:53.747

我正在使用 Linux Arch，但由于 MacOSX 是基于某些 *nix 系统的 - 这个想法可能对您有所帮助：

查看文件*/etc/resolv.conf*。在我的设置中，此文件由*NetworkManager*自动生成。

*本文档介绍了在使用dhcpcd*、*NetworkManager*或*dhclient*时更新*/etc/resolv.conf*的方法：[https ://wiki.archlinux.org/index.php/Dnsmasq#DHCP_Setup](https://wiki.archlinux.org/index.php/Dnsmasq#DHCP_Setup)

 ***通过这种方式，您只需在 dhcp 的 dns 之前添加本地 dns（如果您要切换到静态配置，则为静态）。确保从 dns 服务器中删除所有转发器。

如果 macos 不使用它们，即使它非常有限，这种变通方法可能会给您一个提示：将全局名称服务器（如谷歌的*8.8.8.8*）添加到您的 dns 服务器的转发器列表中。***

# asp.net - ASP.NET - 多个站点共享同一个数据库，如何管理用户名和密码？

> ID：10353225
> 
> 赞同：2
> 
> 时间：2012-04-27T15:13:43.740
> 
> 标签：asp.net, database, web-config, app-config, user-management

我有多个网站和一个 Windows 应用程序共享同一个数据库。有没有办法可以跨所有 web.configs 和 app.configs 管理数据库用户名和密码？我希望能够更改用户名和密码，然后让所有网站和应用程序使用新名称。有什么我可以使用的东西可以自动化吗？我目前将用户名和密码存储在连接字符串中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:21:50.913

您可能必须在您的 Windows 应用程序中编写一些自定义代码来支持它，但是 ASP.NET 成员资格将允许您在多个应用程序之间共享用户名和密码。

[http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)

> ASP.NET 成员支持以下设施：
> 
> 创建新用户和密码。
> 
> 在 Microsoft SQL Server、Active Directory 或替代数据存储中存储成员信息（用户名、密码和支持数据）。
> 
> 对访问您网站的用户进行身份验证。您可以通过编程方式对用户进行身份验证，也可以使用 ASP.NET 登录控件创建一个只需要很少或不需要代码的完整身份验证系统。
> 
> 管理密码，包括创建、更改和重置密码。根据您选择的会员选项，会员系统还可以提供自动密码重置系统，该系统接受用户提供的问题和响应。
> 
> 为经过身份验证的用户公开唯一标识，您可以在自己的应用程序中使用该标识，并且还与 ASP.NET 个性化和角色管理（授权）系统集成。
> 
> 指定自定义成员资格提供程序，它允许您替换自己的代码来管理成员资格并在自定义数据存储中维护成员资格数据

另外，请参阅[此 SO question](https://stackoverflow.com/questions/2996564/can-i-run-multiple-websites-under-a-single-membership-database)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:25:57.417

*   将用户名和密码保存在注册表中。
*   使用类即时构建连接字符串
*   所有网站和应用程序都应具有相同的类

顺便说一句，注册表比网络配置更安全。

# entity-framework - Entity Framework 4.3 to Oracle：Web 项目有效，NUnit 无效

> ID：10353231
> 
> 赞同：4
> 
> 时间：2012-04-27T15:14:24.987
> 
> 标签：entity-framework

我已经使用 DevArt 的提供程序针对 Oracle 数据库设置了 Entity Framework 4.3。我在通过 NUnit 2.6 测试运行程序中的单元测试项目连接到数据库时遇到问题。有趣的是，我有一个 ASP.NET MVC 3 项目连接到它就好了。我在我的类库单元测试项目中创建了一个 App.config 并将实体连接字符串信息复制到它。我错过了什么？

这是实体连接信息（在 Web.config 和 App.config 中相同）：

```
 <connectionStrings>
    <add name="Entities" connectionString="metadata=res://*/Entities.MagellanDataModel.csdl|res://*/Entities.MagellanDataModel.ssdl|res://*/Entities.MagellanDataModel.msl;provider=Devart.Data.Oracle;provider connection string=&quot;User Id=theusername;Password=thepassword;Server=theTNSname&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

这是异常信息：

```
AppName.Tests.AccountRepositoryTests.GetByContactId:
System.Data.EntityException : The underlying provider failed on Open.
----> System.InvalidOperationException : Can not obtain Oracle client information
      from registry. Make sure that Oracle Client Software is installed, or use 
      Direct mode of connecting to server. 
```

注意：Web 和单元测试程序集都设置为编译为`Any CPU`. 我在 64 位 Windows 7 上运行 32 位 Oracle 10g 数据库。我发现一篇文章似乎表明它与需要 x86 的平台有关，但我的 Web 项目设置为`Any CPU`并且运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:16:41.167

我有一个类似的问题：Win7 64-bit DevArt with 32bit Oracle。

适用`Any CPU`于 Web 项目，但不适用于控制台和单元测试项目。我通过在模式下设置测试和控制台 projs 来修复它*（或解决它） 。*`x86``Debug`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T21:02:11.290

我遇到过同样的问题。对我来说，通过取消选中项目属性 -> 构建 -> 平台目标下方的“首选 32 位”复选框来解决此问题。我的平台目标设置为“任何 CPU”。

# powershell - 如何在 NuGet 中从 install.ps1 输出调试消息

> ID：10353233
> 
> 赞同：11
> 
> 时间：2012-04-27T15:14:25.617
> 
> 标签：powershell, nuget

我正在开发一个 NuGet 包，包括`install.ps1`在包安装期间运行的脚本。我希望能够从我的脚本中输出消息，并从我的脚本中输出运行`.bat`文件的结果。

这是我的`install.ps1`：

```
param($installPath, $toolsPath, $package, $project)
Write-Output "Running install.ps1 for MyPkg"
Set-Location $toolsPath
.\helper.bat | Write-Output 
```

当我在 Visual Studio 中安装我的包时，我查看页面中的`Package Manager`选项`Output`，我看到：

```
Executing script file 'C:\Test\packages\MyPkg.1\tools\install.ps1'. 
```

并且似乎脚本正在运行（我可以以其他方式`helper.bat`运行），但我没有看到任何输出。如何使输出正常工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-27T19:19:19.307

从 NuGet 包管理器对话框安装时，我无法获得输出，稍后我会深入了解它的去向。

但是从 Nuget 控制台（工具->库包管理器->包管理器控制台）安装时，您应该能够看到它。输出直接进入控制台。例子 ：

```
PM> uninstall-package samplepackage
hello from unninstal.ps1
Successfully removed 'samplepackage 1.0.0' from WebApplication24. 
```

卸载.ps1：

```
param($installPath, $toolsPath, $package, $project)
Write-Host "hello from unninstal.ps1" 
```

# forms - 编写调用特定 servlet 的路径。

> ID：10353235
> 
> 赞同：0
> 
> 时间：2012-04-27T15:14:35.550
> 
> 标签：forms, servlets, path, relative-path, absolute-path

我需要获得正确路径的帮助，以便我从 JSP 页面到 servlet 的请求正常工作。现在它给了我一个错误 Servlet not found .. 我在 eclipse 中工作。我的目录是这样的::

```
At the top level is my Project_Name 2_8_2012\. Now inside JavaResources i have a Src folder inside which i have a package Mypackage inside which i have a TimeServlet.java and TimeManagement.java. 
```

我的 JSP 页面在`WebContent/jsp/Page.jsp`

现在从`Page.jsp`我发送一个关于输入提交按钮点击的请求。基本上提交了一个表单

```
<form  id="timeform" name="timeformname" action="/2_8_2012/jsp/timeservlet" method="post"> 
```

转到我`web.xml`有这个代码的地方::

```
<servlet>
    <servlet-name>Timeserv</servlet-name>
    <servlet-class>  
            MyPackage.TimeServlet  
        </servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Timeserv</servlet-name>
    <url-pattern>/2_8_2012/jsp/timeservlet</url-pattern>
  </servlet-mapping> 
```

但我得到了错误`servlet not found.`

要在我的浏览器上打开 page.jsp，我去链接

```
http://localhost:8080/2_8_2012/jsp/Page.jsp. 
```

它打开得很好。

我应该如何提供一条路径以便调用我的 servlet？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:21:16.437

将 URL-PAttern 更改为

/jsp/timeservlet 并检查

# javascript - jquery datepicker 不显示 yearRange

> ID：10353239
> 
> 赞同：0
> 
> 时间：2012-04-27T15:15:02.023
> 
> 标签：javascript, jquery, datepicker

我使用 jQuery datepicker 并且需要一个带有年份选择元素的选项。这是我的元素的代码：

```
$("#geburtsdatum").datepicker({
    "yearRange":"2000:2010",
    "firstDay":1,
    "dayNamesMin":["So","Mo","Di","Mi","Do","Fr","Sa"],
    "monthNames":["Januar","Februar","M&auml;rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],
    "dateFormat":"dd.mm.yy"}); 
```

但是我错过了我的日期选择器中的选择。有谁知道我做错了什么？（我正在使用 jquery-1.7.1。）

![我的日期选择器](../Images/82e5a31a7945e784d204c7299fd8492d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:16:54.223

您需要添加“changeYear”选项。[请参阅此处文档页面上的源代码。](http://jqueryui.com/demos/datepicker/#dropdown-month-year)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:19:02.740

您的代码应如下所示

```
$("#geburtsdatum").datepicker({
yearRange: "2000:2010",
firstDay: 1,
dayNamesMin: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"],
monthNames: ["Januar", "Februar", "M&auml;rz", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"],
dateFormat: "dd.mm.yy",
changeYear: true
});​ 
```

这是它的一个工作小提琴：http: [//jsfiddle.net/pratik136/WByxq/](http://jsfiddle.net/pratik136/WByxq/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:18:35.610

我就是这样做的：

```
$(".datefield").datepicker({
    minDate: (new Date(1920, 0, 1)),
    maxDate: "+100Y",
    yearRange: '1920:2020',
    changeMonth: true,
    changeYear: true,
    onSelect: function() { $(this).valid(); }
}); 
```

# c++ - 零大小的数组？

> ID：10353240
> 
> 赞同：1
> 
> 时间：2012-04-27T15:15:06.020
> 
> 标签：c++, arrays, size

通常我们以以下格式声明数组：

```
DataType array_name[SIZE]; 
```

所以如果我尝试为例如创建 0 长度数组

```
int arr[0]; //Line#1
arr[0] = 5; //Line#2 
```

执行上述代码时，我没有收到任何错误。在这种情况下，是否为单个整数分配了内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T15:21:13.223

**为什么 Line#1 不会产生任何编译错误？**
理想情况下，它应该！在本地存储上
创建大小数组不是合法代码。 理想情况下，编译器应该向您发出错误，可能某些编译器扩展允许它编译，但根据标准，这不是有效代码。尝试使用.`0`
`-pedantic`

参考：

**C++03 标准 8.3.4/1：**

> 如果 _constant-expression+ (5.19) 存在，它应该是一个整数常量表达式并且它的值应该大于零。

此外，
**为什么 Line#2 不会产生任何编译错误？**
因为超出分配数组的范围写入是**未定义的行为**。未定义的行为不需要编译器为您提供任何诊断。请注意，一旦代码表现出未定义的行为，实际上任何事情都可能发生，并且所有的赌注都被取消了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T15:18:09.527

您不会收到任何错误，因为 C/C++ 不对数组进行任何范围检查。 `arr[10000000]`也不会给你可以编译的错误。

发生的事情是您正在向堆栈上不属于其中的某个位置写入一些内存，`arr`谁知道会发生什么。它可能导致访问冲突和崩溃或随机损坏某些其他数据结构。

那是缓冲区溢出。

# linux - linux编程：文件描述符的值总是3

> ID：10353243
> 
> 赞同：0
> 
> 时间：2012-04-27T15:15:08.390
> 
> 标签：linux, unix, file-descriptor

我是 linux 编程的新手。我写了一个非常简单的程序：

```
#include stdio.h
#include fcntl.h
#include sys/ioctl.h
#include mtd/mtd-user.h
#include errno.h

int main( void )
{
    int fd;

    fd = open("test.target", O_RDWR);
    printf("var fd = %d\n", fd);
    close(fd);
    perror("perror output:");

    return 0;
} 
```

test.target 是使用 touch 命令创建的。该程序的输出是：

```
var fd = 3
perror output:: Success 
```

我尝试打开其他文件，文件描述符总是3。我记得它的值应该是一个更大的数字。如果这个程序有错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T15:17:18.190

这似乎很正常。进程以预先打开的文件描述符开始：0 表示标准输入，1 表示标准输出，2 表示标准错误。您打开的任何新文件都应以 3 开头。如果您关闭文件，则该文件描述符编号将重新用于您打开的任何新文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:20:59.633

如果您要打开另一个文件而不关闭前一个文件，它将是 4、5 等等。

有关更多信息，请访问[http://wiki.bash-hackers.org/howto/redirection_tutorial](http://wiki.bash-hackers.org/howto/redirection_tutorial) 它适用于 bash，但整个想法是通用的。

# javascript - 如何让浏览器提前下载隐藏的div内容

> ID：10353249
> 
> 赞同：0
> 
> 时间：2012-04-27T15:15:21.430
> 
> 标签：javascript, jquery, css

在玩了隐藏的 div ( `display:none`) 之后，我注意到浏览器似乎不会费心下载该 div 中的任何图像/flash 文件，直到 div 变为可见。

问题在于，在大多数用户的机器上，当查看隐藏的 div 时，浏览器下载图像或 swf 文件等似乎有好几秒钟的等待时间……这 == 用户不满意。

有什么方法可以让浏览器在隐藏的时候下载隐藏的 div 的内容，而不是在它被设置为可见的时候？

也许在 JS 或 jQuery 中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:18:51.217

不要`display:none;`用来隐藏图像。

尝试设置以下内容以隐藏内容。

```
height:0;
width:0;
overflow:hidden; 
```

您还可以尝试使用绝对定位将内容定位在屏幕外。

```
position:absolute;
left:-1000px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:20:27.487

您可以尝试的一种方法是，不要将它们绝对隐藏在具有较大的负左侧位置并且最小尺寸可能为 1 或 0 的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:20:56.013

以下是一些选项：

*   从可见的 DIV 开始，然后在页面加载后或浏览器已获取图像后使用 jQuery 添加隐藏样式。这可能会发生得如此之快，甚至没有人会注意到这种变化。
*   在加载内容时最初将 DIV 放置在屏幕外，并将 DIV 的尺寸（高度/宽度）固定为非常小，以免占用可见空间。
*   使用 jQuery 在您希望使其可见的同时加载 DIV 的内容——按需获取图像。IE`$('#yourDivId').html('[html goes here]');`
*   使用`visible:hidden`代替`display:none`（但请注意它仍会占用空间，因此这可能不适用于所有情况）。您可以将图像的副本放置在页面底部不会影响布局的位置，但当您使其他位置可见时，仍会被提取和浏览器缓存。

# linq - 如何获取行数 3 表连接和 lambda 表达式？

> ID：10353252
> 
> 赞同：2
> 
> 时间：2012-04-27T15:15:30.593
> 
> 标签：linq, entity-framework, lambda

我正在尝试获取用户具有与特定 channelId 匹配的报告的行数。我尝试过使用 lambda 表达式，但没有任何运气。

```
int count = 
_reportsRepository.
    GetMany(r => r.UserId == user.Id && 
    (r.Charts.Any(cr => cr.Channels.Any(ch => ch.Id == channel.Id))).Any()).Count(); 
```

![在此处输入图像描述](../Images/470be5431c83783ecf71851107506db5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:35:47.470

关于什么

```
int count = _reportsRepository.Where( 
                r => r.UserId == user.Id &&
                     r.User.Channels.Any(c => c.Id == channel.Id)).Count(); 
```

# tfs - 有没有办法在团队项目的根目录中启动一个分支（基于标签）？

> ID：10353257
> 
> 赞同：0
> 
> 时间：2012-04-27T15:16:02.133
> 
> 标签：tfs, branch

我在 TFS 2010 中处于以下情况：

*   我有一个团队项目（有 2 个源代码子文件夹）。
*   团队项目没有分支，但过去已被标记。
*   我需要根据特定（和历史）标签在团队项目的根目录中创建一个分支。

我已经尝试过这种方法（全部在源代码管理资源管理器中）：

1.  右键单击团队项目并转到分支...
2.  将目标更改为`$/MyTeamProject/NewBranchName`
3.  选择合适的标签。
4.  取消选中“将源和目标文件夹转换为分支”。

当我单击确定时，我收到此错误：

> 目标项`$/MyTeamProject/NewBranchName`不能在源项下`$/MyTeamProject`。

有任何想法吗？

PS。我**能够**将标签分支到不同的团队项目中，但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:43:21.580

我的猜测是该项目`$/MyTeamProject`包含在您的标签中，然后 TFS 无法在该路径下创建分支。

所以编辑标签并删除`$/MyTeamProject`路径，然后重试。

**编辑 ：**

您只能使用[TFS Sidekicks](http://www.attrice.info/downloads/index.htm#tfssidekicks2010)删除文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:31:43.940

问题是您正在尝试在您要分支的分支的根目录下创建一个分支。也就是说，通过右键单击**团队项目**并选择分支，您无法在该团队项目下创建分支。

相反，请尝试从文件夹中进行分支操作。这将允许您将它们放在团队项目下。如果您希望它们有一个共同的根，您可能需要将它们单独分支到团队项目下的子文件夹中。

# android - Android 地图 KML 处理程序

> ID：10353258
> 
> 赞同：0
> 
> 时间：2012-04-27T15:16:03.397
> 
> 标签：android, kml, android-maps

好的，目前我在添加到覆盖列表时遇到空指针异常。我在地图活动类的顶部声明了这一点：

```
private static List<Overlay> mOverlays; 
```

然后再往下，我已经为我的来源/从点得到了这个：

```
Drawable fromDrawable = getResources().getDrawable(R.drawable.pin_blue);
OverlayItem fromOverlayItem = new OverlayItem(fromGeoPoint, "Hello!", "This is your current Location.");
MapWhatsNearOverlay fromItemizedOverlay = new MapWhatsNearOverlay(fromDrawable);
mOverlays.add(fromItemizedOverlay);

connectAsyncTask _connectAsyncTask = new connectAsyncTask();
_connectAsyncTask.execute();
mMapView.getOverlays().add((Overlay) mOverlays); 
```

目的地也是一样，但是在处理最后一行代码时会弹出空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:12:22.813

请参阅此[链接](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)以在您的应用程序中绘制行驶路径。您只需在项目中添加链接中存在的四个类，并在需要显示路线时调用以下行。

```
SharedData data = SharedData.getInstance();
data.setAPIKEY("0RUTLH7cqd6yrZ0FdS0NfQMO3lioiCbnH-BpNQQ");//set your map key here
data.setSrc_lat(17);//set your src lat
data.setSrc_lng(78);//set your src lng
data.setDest_lat(18);//set your dest lat
data.setDest_lng(77);//set your dest lng
startActivity(new Intent(YourActivity.this,RoutePath.class));//add RoutePath in your manifeast file 
```

//同时将权限添加到您的清单文件

# sql - 是否有相当于在派生表中放置 order by 子句的东西？

> ID：10353263
> 
> 赞同：0
> 
> 时间：2012-04-27T15:16:44.693
> 
> 标签：sql, sybase, derived-table

这是sybase 15。这是我的问题。

我有 2 张桌子。

```
t1.jobid          t1.date
------------------------------
1                   1/1/2012
2                   4/1/2012
3                   2/1/2012
4                   3/1/2012

t2.jobid   t2.userid    t2.status
-----------------------------------------------
1              100            1
1              110            1
1              120            2
1              130            1
2              100            1
2              130            2
3              100            1
3              110            1
3              120            1
3              130            1
4              110            2
4              120            2 
```

我想找到他们最近两个工作状态为 2 的所有人。

我的计划是获取连接 t1 和 t2 的派生表的前 2 个，并为给定用户按日期向后排序。因此，前两个将是给定用户的最新信息。

所以这会给我这些人最近的工作号码。不是每个人都从事每项工作。

然后我将进行一个外部查询，该查询与派生表相结合，搜索状态 2 的总和（状态）= 4 或类似的东西。那将找到具有 2 个状态 2 的人。

但是 sybase 不允许我在派生表中使用 order by 子句。

关于如何解决这个问题的任何建议？

我总是可以编写一个小程序来遍历所有用户，但我会尝试用它制作一个 horrendus sql。

多汁的，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:16:28.047

```
With Table1 As
    (
    Select 1 As jobid, '1/1/2012' As [date]
    Union All Select 2, '4/1/2012'
    Union All Select 3, '2/1/2012'
    Union All Select 4, '3/1/2012'
    )
    , Table2 As
    (
    Select 1 jobid, 100 As userid, 1 as status
    Union All Select 1,110,1
    Union All Select 1,120,2
    Union All Select 1,130,1
    Union All Select 2,100,1
    Union All Select 2,130,2
    Union All Select 3,100,1
    Union All Select 3,110,1
    Union All Select 3,120,1
    Union All Select 3,130,1
    Union All Select 4,110,2
    Union All Select 4,120,2
    )
    , MostRecentJobs As
    (
    Select T1.jobid, T1.date, T2.userid, T2.status
        , Row_Number() Over ( Partition By T2.userid Order By T1.date Desc ) As JobCnt
    From Table1 As T1
        Join Table2 As T2
            On T2.jobid = T1.jobid
    )
Select *
From MostRecentJobs As M2
Where Not Exists    (
                    Select 1
                    From MostRecentJobs As M1
                    Where M1.userid = M2.userid
                        And M1.JobCnt <= 2
                        And M1.status <> 2
                    )
     And M2.JobCnt <= 2 
```

我在这里使用了 Sybase 15 中确实存在的许多功能。首先，我对我的示例数据使用公用表表达式并将我的查询组合在一起。其次，我使用排名功能`Row_Number`按日期对工作进行排序。

应该注意的是，在您提供的示例数据中，没有用户满足他们最近的两个工作都为“2”状态的要求。

__

**编辑**

如果您使用的 Sybase 版本不支持排名函数（例如 15.2 之前的 Sybase 15），则需要使用 Counts 模拟排名函数。

```
Create Table #JobRnks
    (
    jobid int not null
    , userid int not null
    , status int not null
    , [date] datetime not null
    , JobCnt int not null
    , Primary Key ( jobid, userid, [date] )
    )

Insert #JobRnks( jobid, userid, status, [date], JobCnt )    
Select T1.jobid, T1.userid, T1.status, T1.[date], Count(T2.jobid)+ 1 As JobCnt
From    (
        Select T1.jobid, T2.userid, T2.status, T1.[date]
        From @Table2 As T2
            Join @Table1 As T1
                On T1.jobid = T2.jobid
        ) As T1
    Left Join   (
                Select T1.jobid, T2.userid, T2.status, T1.[date]
                From @Table2 As T2
                    Join @Table1 As T1
                        On T1.jobid = T2.jobid
                ) As T2
        On T2.userid = T1.userid
            And T2.[date] < T1.[date]
Group By T1.jobid, T1.userid, T1.status, T1.[date]

Select *
From #JobRnks As J1
Where Not Exists    (
                    Select 1
                    From #JobRnks As J2
                    Where J2.userid = J1.userid
                        And J2.JobCnt <= 2
                        And J2.status <> 2
                    )
    And J1.JobCnt <= 2 
```

在这里使用临时表的原因是为了性能和易于阅读。从技术上讲，您可以将临时表的查询插入用作派生表的两个位置并获得相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:20:09.737

您可以通过使用窗口函数添加额外的列来对子查询中的行进行排名。然后选择在其组中具有适当等级的行。

我从未使用过 Sybase，但[文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc38151.1510/html/iqrefbb/BCGEEBHA.htm)似乎表明这是可能的。

# php - Paypal 定期付款 - 如何防止重复？

> ID：10353267
> 
> 赞同：1
> 
> 时间：2012-04-27T15:16:54.273
> 
> 标签：php, paypal, paypal-ipn

所以我已经使用贝宝定期付款大约一年了，并且在大多数情况下它运作良好（付款后通过IPN验证等......）

我遇到的一个问题是有时我的客户会设置多个付款配置文件，我绝对不希望他们这样做。然后我必须进去 + 退款并取消其他配置文件。

我很好奇是否有人有任何建议来阻止用户这样做，或者我应该在哪里阻止这种情况发生。

IPN 通知到达我的服务器后，用户无法再次购买，但有时这可能需要 30 秒或一个小时。因此，我的用户回过头来认为它没有通过并再次购买。

我的过程差不多是这样的：

```
Page 1 (user selects options)
  Paypal API: SetExpressCheckout 
Page 2 (user goes to paypal, logs in, accepts agreement) 
Page 3 (I create the agreement)
  Paypal API: GetExpressCheckoutDetails
  Paypal API: CreateRecurringPaymentsProfile 
```

我会认为我应该在第 3 页的某个地方进行检查，但我不能 100% 确定我应该如何去做。只需与他们试图在这里购买的东西建立一个关联的 PayerID，然后阻止它继续进行吗？

人们推荐什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:40:05.793

创建第一个定期付款配置文件后，在响应中您将获得配置文件 ID 和配置文件状态，应为“ActiveProfile”。我建议您保存它，并在他再次在第 1 页上选择任何订阅（或产品）之前进行检查。

# c# - 通过 IP 与串行通信拒绝命令 MODBUS？

> ID：10353269
> 
> 赞同：0
> 
> 时间：2012-04-27T15:17:07.083
> 
> 标签：c#, winforms, sockets, serial-port, modbus

这很奇怪，我们有一个打印机设置，它有一个 IP 和它监听的端口，然后我们需要将打印作业发送到打印机。

我已经设法连接到打印机，但是每当我传输任何东西时，我都会在打印机上超时，或者它只是坐在那里什么都不做。

我知道我可以与打印机交谈，因为它显示在它的日志中。

到目前为止，我有以下内容：

```
_Socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
_Socket.Connect("192.168.1.52", 2123);
byte Enq = 0x05;
byte Ack = 0x06;
byte[] tran;
tran = new byte[] { Enq };
_Socket.Send(tran, 1, SocketFlags.None);

tran = new byte[] { 0x30 };
_Socket.Send(tran, 1, SocketFlags.None);

tran = new byte[] { 0x00, 0x01 };
_Socket.Send(tran, 2, SocketFlags.None);

tran = new byte[] { 0xFF };
_Socket.Send(tran, 1, SocketFlags.None); 
```

根据手册，我需要执行以下操作：

```
send 1 byte Identifier 30h
send 2 bytes length 00h, 01h
send data (action to be performed) 1 byte FFh 
```

正如您可能看到的，我不知道如何实现这一点，所以欢迎任何和所有帮助

```
Edit 
```

一些附加信息，打印机没有附带驱动程序，所以据我所知，我需要将原始数据传输到打印机，打印机有一个串行连接，但它距离串行电缆太远，因此以太网连接在那里（我相信它是以太网串行）。

Dialog 的一般原理 计算机发送 ENQ（1 字节） 打印机发送 ACK（1 字节） 计算机发送数据（Ident 1 字节 | 长度 2 字节 | 数据 0 到 n 字节 | 校验和 1 字节） 打印机发送 Ack（1 字节）

当我过去使用串行时，我使用端口上的写入功能来发送数据，将数据放入缓冲区，一旦完成接收检查缓冲区，但我对如何在 IP 上执行此操作一无所知?

```
Identifier (1 hexadecimal byte)
Specific to each command.
 Length (2 hexadecimal bytes)
The length is a hexadecimal value representing the number of bytes present after the
two length bytes and not including the check byte (Checksum).
In general, the maximum value is 2044 bytes or 07h FCh.
For transmission of a message for printing, the maximum value is 4092 bytes or 0Fh
FCh.
Note: The check byte is not checked by the printer if b7 of the first length byte is set
to 1\. In this case the data in the frame received is not checked.
Data (0 to n bytes)
Zero bytes for a general request from the computer to the printer.
n bytes representing the instructions needed to define a function.
Checksum (1 hexadecimal byte)
This corresponds to an exclusive OR of all preceding bytes (identifier, length and data
bytes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:58:18.590

我将系统更改为使用 TCPClass 而不是套接字，它现在按预期工作，他们的技术人员没用，但至少他们的销售负责人来帮助解决了他对打印机其他问题的了解，最终设法得到那里。一切都归结为文档中缺少信息

# xcode - 为什么我的 Xcode 项目中有一些蓝色文件夹？

> ID：10353274
> 
> 赞同：88
> 
> 时间：2012-04-27T15:17:59.453
> 
> 标签：xcode

当我从 Github 导入我的项目时，我有两个文件夹在 Xcode 中显示为蓝色，但所有其他文件夹都是黄色的。这是怎么回事？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-01T18:44:44.703

蓝色用于表示“文件夹参考”。

关于这些是什么以及何时使用它们的清晰描述来自[http://struct.ca/2010/xcode-folder-references/](http://struct.ca/2010/xcode-folder-references/)

> Xcode 中有两种类型的文件夹：组和文件夹引用。您可以使用组来组织项目中的文件，而不会影响它们在实际文件系统上的结构。这对于代码来说非常有用，因为您只会在 Xcode 中处理您的代码。另一方面，组对于资源文件不是很好。
> 
> 在任何相当复杂的项目中，您通常会处理数十个（如果不是数百个）资产文件，并且这些资产需要由您或设计师从 Xcode 外部进行修改和操作。将所有资源文件放在一个平面文件夹中是灾难的根源。这就是文件夹引用的来源。它们允许您将文件组织到文件系统上的文件夹中，并在 Xcode 中保持相同的文件夹结构。

# vb.net - ASP.NET - 删除 AD 中的计算机帐户

> ID：10353275
> 
> 赞同：1
> 
> 时间：2012-04-27T15:18:05.087
> 
> 标签：vb.net, active-directory

我正在构建一个退役应用程序，该应用程序将允许个人提供计算机名称，该实用程序将出去并从各个位置清除计算机记录。尝试从 Active Directory 中删除计算机帐户时遇到问题。我正在模拟一个仅有权在特定 OU 结构中“删除所有子对象”的服务帐户。如果我使用我的域管理员帐户运行以下代码，则它可以工作；但是，当我使用模拟的服务帐户运行它时，会出现“拒绝访问”失败。我已经验证了 AD 中的权限是正确的，因为我可以使用“runas”启动 Active Directory 用户和计算机并提供服务帐户凭据，并且可以完美地删除计算机对象。

想知道是否有人以前遇到过这种情况，或者在使用我当前的 OU 权限的同时有不同的编码方式。我的直觉告诉我“DeleteTree”方法比删除对象做得更多。

任何援助将不胜感激。

```
Sub Main()
    Dim strAsset As String = "computer9002"
    Dim strADUsername As String = "serviceaccount@domain.com"
    Dim strADPassword As String = "password"
    Dim strADDomainController As String = "domaincontroller.domain.com"

    Dim objDirectoryEntry As New System.DirectoryServices.DirectoryEntry
    Dim objDirectorySearcher As New System.DirectoryServices.DirectorySearcher(objDirectoryEntry)
    Dim Result As System.DirectoryServices.SearchResult
    Dim strLDAPPath As String = ""

    Try
        objDirectoryEntry.Path = "LDAP://" & strADDomainController

        objDirectoryEntry.Username = strADUsername
        objDirectoryEntry.Password = strADPassword

        objDirectorySearcher.SearchScope = DirectoryServices.SearchScope.Subtree
        objDirectorySearcher.Filter = "(&(ObjectClass=Computer)(CN=" & strAsset & "))"

        Dim intRecords As Integer = 0

        For Each Result In objDirectorySearcher.FindAll
            Console.WriteLine(Result.Path)
            Diagnostics.Debug.WriteLine("DN: " & Result.Path)
            Dim objComputer As System.DirectoryServices.DirectoryEntry = Result.GetDirectoryEntry()
            objComputer.DeleteTree()
            objComputer.CommitChanges()
            intRecords += 1
        Next

        If intRecords = 0 Then
            Console.WriteLine("No Hosts Found")
        End If

    Catch e As System.Exception
        Console.WriteLine("RESULT: " & e.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:26:34.187

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
' set up domain context
Dim ctx As New PrincipalContext(ContextType.Domain, "DOMAIN", strADUsername, strADPassword)

' find a computer
Dim computerToDelete As ComputerPrincipal = ComputerPrincipal.FindByIdentity(ctx, strAsset)

If computerToDelete IsNot Nothing Then
    ' delete the computer, if found
    computerToDelete.Delete()
End If 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:24:13.210

删除树不同于删除。您需要对子计算机对象具有删除子树权限才能使其正常工作。

# django-models - Django中模型的结构

> ID：10353278
> 
> 赞同：0
> 
> 时间：2012-04-27T15:18:13.270
> 
> 标签：django-models

我有我想要建模的东西：疫苗、国家、疾病和药物。

一种疾病在 N 个国家出现 一种药物可以治愈 N 种疾病 一种疫苗可以预防 N 种疾病

我的主要搜索方法是按国家/地区，通过疾病联系列出疫苗和药物。

我想我会用这个模型来做到这一点：

```
class Country(models.Model):
name = models.CharField(max_length=100)
    def __unicode__(self):
        return self.name

class Disease(models.Model):
    name = models.CharField(max_length=100)
    country = models.ManyToManyField(Country)
    def __unicode__(self):
        return self.name

class Vaccine(models.Model):
    name = models.CharField(max_length=100)
    diseases = models.ManyToManyField(Disease, blank=True)
    def __unicode__(self):
        return self.name

class Medicine(models.Model):
    name = models.CharField(max_length=100, blank=True)
    diseases = models.ManyToManyField(Disease, blank=True)
    def __unicode__(self):
        return self.name 
```

我这样搜索：

```
def vacc_for_country(request, country_id):
    diseases = Disease.objects.filter(countries__pk=country_id)
    vaccines = Vaccine.objects.filter(id__in=[d.id for d in [v.diseases for v in Vaccine.objects.all()]])
    return serialize(vaccines) 
```

但这不起作用，我得到：/vaccines/seek/countryId/3 'ManyRelatedManager' 对象的 AttributeError 没有属性 'id'。

那么如何从 country_id 转到疫苗列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:22:41.497

我不知道你要去那里做什么。

```
Vaccine.objects.filter(diseases__country__id=country_id) 
```

# magento - Magento 1.4.1.1 - 它是否支持 api 中的 cart.create 方法？

> ID：10353285
> 
> 赞同：0
> 
> 时间：2012-04-27T15:18:32.723
> 
> 标签：magento

我找不到任何说明版本历史记录的文档，有人知道 magento 1.4.1.1 是否支持 API 中的 cart.create 方法，以便从 POS 进行编程订单创建。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:32:11.517

我找到了答案。购物车 API 是在 magento 1.5 版中引入的。我已通过下载 1.5 并复制以下文件夹将其添加到我的 1.4.1.1 站点；

```
app/code/core/mage/checkout/cart
app/code/core/mage/checkout/api 
```

以及以下文件；

```
app/code/core/mage/checkout/etc/api.xml
app/code/core/mage/checkout/etc/wsdl.xml
app/code/core/mage/checkout/etc/wsi.xml 
```

排序！

希望这可以帮助某人。

# sql - 在 SQL Server 2005 中格式化日期/时间

> ID：10353288
> 
> 赞同：1
> 
> 时间：2012-04-27T15:18:37.310
> 
> 标签：sql, vb.net, sql-server-2005, datetime

我在 SQL Server 2005 表中有一个日期时间字段，其值如下：

```
2012-04-23 09:00:00.000
2012-04-23 14:00:00.000 
```

分钟、秒和微秒始终为零。

我需要像这样显示一个“时间段”（基本上是时间加一小时）：

```
2012/04/23  09:00 AM - 10:00 AM
2012/04/23  02:00 PM - 03:00 PM 
```

我得到了我需要的东西：

```
SELECT SUBSTRING(CONVERT(VARCHAR, TimeSlot, 20), 1, 10) + '  ' +
       RIGHT('00000' + LTRIM(SUBSTRING(CONVERT(VARCHAR(24), TimeSlot, 109), 13, 5)), 5) + ' ' +
       SUBSTRING(CONVERT(VARCHAR(19), TimeSlot, 100),18,2) + ' - ' +
       RIGHT('00000' + LTRIM(SUBSTRING(CONVERT(VARCHAR(24), DATEADD(hh, 1, TimeSlot), 109), 13, 5)), 5) + ' ' +
       SUBSTRING(CONVERT(VARCHAR(19), DATEADD(hh, 1, TimeSlot), 100), 18, 2) AS TimeSlot
FROM MyTable 
```

它有效，但我觉得很脏。

我知道我可以在代码（VB .NET）中更轻松地做到这一点，但假设我必须在 SQL 中做到这一点。

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:48:11.763

采用内置的[转换](http://msdn.microsoft.com/en-us/library/ms187928.aspx)，我会使用这样的东西：

```
SELECT 
    convert(varchar, [TimeSlot], 111) + ' ' +
    RIGHT(convert(varchar, [TimeSlot], 0), 7) + ' - ' +
    RIGHT(convert(varchar, dateadd(hour, 1, [TimeSlot]), 0), 7)
FROM
    [MyTable]; 
```

这给了你你想要的线

```
2012/04/23  9:00AM - 10:00AM 
```

详细地：

*   `convert(varchar, @dt, 111)`转换成`datetime`日文格式`yy/mm/dd`
*   `convert(varchar, @dt, 0)`转换`datetime`为`Apr 23 2012 9:00AM`所以我们可以使用时间部分
*   `dateadd(hour, 1, @dt)`在当前`datetime`值上增加一小时

您可以在没有表格的情况下对其进行测试：

```
DECLARE @dt DATETIME
SET @dt = '2012-04-23 09:00:00'

PRINT convert(varchar, @dt, 111) + ' ' +
      RIGHT(convert(varchar, @dt, 0), 7) + ' - ' +
      RIGHT(convert(varchar, dateadd(hour, 1, @dt), 0), 7); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:57:34.130

SQL Server 中内置的日期/时间格式只会格式化为实际的日期格式，因此无论如何您都可以使用自定义格式。如果你用这个来提供 SSRS，那么你可以使用表达式在 SSRS 中对其进行格式化。否则，您可以使用类似于您所描述的技术的查询来格式化它。

如果您实际上是使用 VB 应用程序显示它，那么您可以在客户端执行该操作。

如果您的日期/时间值始终是小时或某个一致的时间间隔，您还可以制作一个以时间为键的参考表，并将格式化的时间间隔存储为 varchar 列并使用它。这将节省您将格式化表达式内联到需要生成间隔描述的每个查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T01:33:25.190

遵循ConcernedOfTunbridgeW 的建议，如果您维护一个包含主键 int 列 [hr] 从 0 到 23 的两列表和一个 char(20) 列 [rng]，其中包含每小时的空格前缀范围字符串

```
' 12:00 AM - 01:00 AM'  (in the row where hr = 0)
...

' 11:00 PM - 12:00 AM'  (in the row where hr = 23) 
```

这个简单的查询应该产生你想要的：

```
 select
    convert(char(10),TimeSlot, 111) + rng as TimeRange
  from T join RangesByHr
  on datepart(hour,TimeSlot) = hr; 
```

# oracle - 带有 ODP.Net 的 Oracle AQ。连接时自动出列

> ID：10353297
> 
> 赞同：1
> 
> 时间：2012-04-27T15:19:00.993
> 
> 标签：oracle, odp.net, oracle-aq

我正在使用 Oracle ODP.Net 进行入队和出队。

进程 A：入队进程 B：使用 MessageAvailable 事件出队

如果进程 A 和 B 正在运行，则没有问题。在“进程 B”上，事件总是被触发。

但是，如果“进程 B”处于关闭状态而“进程 A”处于打开状态，则当“进程 B”重新启动时，在关闭期间插入的队列将丢失。

是否可以选择为过去插入的所有队列触发事件？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T03:38:23.703

似乎有两种方法可以解决这个问题：

1.  调用 OracleAQQueue 类的 Listen() 方法（在注册消息通知之后）以获取队列中的“孤立”消息。请注意，Listen() 会阻塞，直到收到消息或发生超时。因此，如果队列中没有消息，您需要指定一个（短）超时以返回到处理线程。
2.  调用 Dequeue() 方法并捕获 Oracle 错误 25228（没有可用于出队的消息）。请参阅 Oracle 支持论坛中的以下主题：[https](https://forums.oracle.com/forums/thread.jspa?threadID=2186496) ://forums.oracle.com/forums/thread.jspa?threadID=2186496 。

我一直在为这个话题摸不着头脑。如果您仍然必须“手动”测试新消息，那么首先使用 MessageAvaiable 事件回调有什么好处？我考虑过的一种方法是将 Listen() 方法包装在异步调用中，这样调用者就不会阻塞线程（直到收到消息或发生超时）。我将 Listen() 和 Dequeue() 包装在自定义的 Receive() 方法中，并创建了自己的 MessageReceived 事件处理程序以将消息详细信息传递给调用线程。似乎有些多余，因为 ODP.NET 提供了开箱即用的回调，但我不必处理您描述的问题（或编写代码来“手动”测试“孤立”消息。

欢迎对方法提出任何意见/想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:13:52.337

我也一直在看这个，最终做了类似于 Greg 的事情。我没有使用 Listen() 方法，因为我认为它除了简单的 Dequeue() 之外没有提供任何东西 - 当您想代表多个消费者收听时，Listen() 似乎是有益的，其中我的实例不相关（请参阅[Oracle Docs](http://docs.oracle.com/html/E15167_01/OracleAQQueueClass.htm#CHDBFFIG)）。

因此，在我的“流程 B”中，我首先注册通知，然后再启动轮询流程以检查任何现有消息。它不是 Listen()，它只是在一个受控循环内调用 Dequeue()，并设置了几秒钟的等待时间。如果轮询过程遇到 Oracle 超时，则等待期已过并且轮询停止。如果等待期尚未到期，我可能需要考虑处理超时（但如果这可能发生，则不能 100% 确定）。

我注意到，在轮询时排队的任何消息都会调用消息通知方法，但是当它连接并尝试检索消息时，轮询过程似乎总是接受它。因此，在消息通知方法中，我捕获并忽略任何编号为 25263 ( `no message in queue <...> with message ID <...>`) 的 OracleExceptions。

# iphone - iphone sdk - 扑克赔率计算

> ID：10353299
> 
> 赞同：0
> 
> 时间：2012-04-27T15:19:02.510
> 
> 标签：iphone, analyzer, poker

我正在使用 xcode 创建扑克手分析器。我使用了specialK手部评估器。在我的项目中包含评估器后，我分离了两个线程（每个线程有 125k 周期）以尝试运行蒙特卡罗模拟以检查每个玩家的获胜百分比......我的问题是 125k x 2 周期大约需要 40在 iphone 4 上运行几秒钟。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:00:36.527

您是否尝试过比较从 125K 模拟运行中得出的百分比与从较小运行（例如 5K 或 10K）中得出的百分比？出于实际目的，百分比可能非常接近地收敛。

# flash - 是否可以在 Mac OS X 上的 64 位 Qt 构建中的 QWebView 中播放 Flash 动画？

> ID：10353303
> 
> 赞同：2
> 
> 时间：2012-04-27T15:19:09.283
> 
> 标签：flash, qt, webkit, qtwebkit, qwebview

以前在 Mac OS X 上的 64 位 Qt 版本中无法在 QWebView 中播放 Flash 动画，因为尚未发布 64 位版本的 Adob​​e Flash Player。看这里：

[http://qt-project.org/forums/viewthread/5338](http://qt-project.org/forums/viewthread/5338)

从那时起，Adobe 发布了 64 位的 Flash Player 11。但是，Flash 动画似乎仍然不起作用，我只是在加载的页面中得到“蓝色乐高积木”而不是 Flash 动画。

我正在使用浏览器演示应用程序进行 Qt 的基本构建（即配置、制作、安装）和测试。没有关于在 Flash Player 插件中找不到正确架构的控制台错误消息，并且 Browser.app 似乎可以从磁盘加载插件正常，即 GDB 输出中的“信息共享”：

```
164 Flash Player                 - 0x11bc8e000        dyld Y Y /Library/Internet Plug-Ins/Flash Player.plugin/Contents/MacOS/Flash Player at 0x11bc8e000 (offset 0x11bc8e000)
165 FlashPlayer-10.6             - 0x11bc97000        dyld Y Y /Library/Internet Plug-Ins/Flash Player.plugin/Contents/PlugIns/FlashPlayer-10.6.plugin/Contents/MacOS/FlashPlayer-10.6 at 0x11bc97000 (offset 0x11bc97000) 
```

我在配置 Qt 时做错了吗？有没有其他人得到这个工作？我正在使用 Qt 浏览器演示应用程序，所以我（相当）确定它正确地打开了对它的 QWebView 的插件支持。如果使用 32 位 Qt 版本，一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:54:30.543

这可能来得有点晚，但这是我的一位同事偶然发现[的解决方案。](https://bugs.webkit.org/show_bug.cgi?id=72358)您需要应用补丁“基于 Qt 4.8 的问题的初步修复”，该补丁附加到 Qt 4.8.0 源的错误报告中并构建它。它为我解决了“蓝色问号乐高”问题。

这些补丁目前正在等待 WebKit 和/或 Qt 团队的审查，因此这些补丁将或不会包含在 Qt / WebKit 的发布版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:04:59.770

这里的经验相同，尽管我们没有尝试将我们的应用程序构建为 32 位应用程序。如果这是我们可能会考虑的唯一方法，尽管为了获得 Flash 支持而不得不恢复将是一种耻辱。

我确认 FancyBrowser 演示应用程序有同样的问题，所以我知道这不是我们做错的事情。适用于 Windows，不适用于 Mac OS。

# javascript - 跨域 AJAX/Javascript - 人工使用 sessionid

> ID：10353309
> 
> 赞同：2
> 
> 时间：2012-04-27T15:19:30.937
> 
> 标签：javascript, ajax, tomcat, cross-domain

我目前有一个 RESTful 网络服务，它通过它的会话识别客户端。

我有一个客户端，它使用 ajax/javascript 来访问 RESTful 网络服务的内容。我通过使用标题响应请求来允许这种情况发生：`Access-Control-Allow-Origin`, `Access-Control-Allow-Credentials`, `Access-Control-Allow-Methods`.

但是，尽管客户端可以访问内容，但每个请求都被视为不同的会话，因为 cookie 不能跨域使用。

我不想修改我的服务器代码来专门迎合这种风格的客户端，我更喜欢在客户端周围工作以提供使用会话的外观。

因为我不想通过会话存储任何东西，所以我只使用 jsessionid 作为客户端标识符，我认为我可以人为地注入`&jsessionid=`到 URL 中，至少从服务器端，使客户端看起来正确地跟踪的会议。

这似乎不起作用 - 有人可以建议我如何让我的客户表现得好像它正在使用相同的 sessionid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:54:37.497

> ...我以为我可以人为地将 &jsessionid= 注入到 URL ...

`jsessionid`不是查询字符串参数。您想要人为添加`;jsessionid=...`（在 URL 中的任何 & 之前），而不是`&jsessionid=...`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:28:39.380

作为背景...我制作了一个名为 kitgui.com 的产品，它允许跨域通信并模拟内容管理的页面保存，但实际上是通过 iframe 与安全服务器进行跨域通信。

您不必修改服务器代码。假设您不需要 IE8 以下的支持，您可以使用 iframe + postMessage。所有其他现代浏览器都支持这一点。对于较低的浏览器，还有 iframe 轮询技术。您也不需要在非 SSL 上的查询字符串中公开您的会话 ID。您可以通过 javascript 与您的 iframe 交谈以获取登录或未登录的状态。会话信息保留在 iframe 的域中它应该在的位置。

这个链接可以帮助你-> [http://benalman.com/projects/jquery-postmessage-plugin/](http://benalman.com/projects/jquery-postmessage-plugin/)

# java - Java - 逐行读取文件 - 分页

> ID：10353312
> 
> 赞同：-2
> 
> 时间：2012-04-27T15:19:50.087
> 
> 标签：java, file, frameworks

我正在尝试实现一个简单的日志阅读器，为此我正在寻找一个执行以下操作的 java 框架（例如 apache commons io） -

*   逐行读取文本文件
*   提供分页功能 - 即我应该能够提及我需要从文件中读取的行数 + 从下一页开始获取行数 - 比如第 50 行到第 100 行

是否有任何标准框架可以做到这一点？（不想在这里重新发明轮子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:26:22.373

足以帮助您入门！

```
Scanner scanner = new Scanner(new FileReader("myFile.txt");

while(scanner.hasNext()) {
    String line = scanner.next();
    System.out.println(line);
} 
```

# wcf - 跨服务器和 WCF 的证书

> ID：10353314
> 
> 赞同：1
> 
> 时间：2012-04-27T15:19:54.050
> 
> 标签：wcf, iis, certificate, ssl-certificate, wif

我有一个网站、wcf 服务和一个安全令牌服务 (STS) 在一台服务器上运行。一切都很好。我现在正试图在服务器之间分离这些碎片。当网站尝试登录以获取令牌时，我收到 ssl 证书错误。

在我调试时，这将在 Server 2008 和 IIS 7.5 以及我的 windows 7 IIS 7.5 上。

```
An error occurred while making the HTTP request to https://x.x.x.x/STS/issue/wstrust/mixed/username. This could be due to the fact that the server certificate is not configured properly with HTTP.SYS in the HTTPS case. This could also be caused by... 
```

我在 STS 服务器上生成了一个自签名证书并将其导出到网站服务器。我还导出了密钥并让 IIS 访问网站服务器上的密钥。这克服了一堆 WIF 错误，它不会运行，但我不确定这是正确的做法。

我也尝试过 [netsh http add sslcert ipport:0.0.0.0:44400 等...] 但我不确定要使用哪个端口，我尝试了六种不同的端口，但似乎都没有，而 443 将无法工作。

该网站正在使用 WSTrustChannelFactory 创建连接。它轰炸了底部的 channel.issue 命令。

```
 var factory = new WSTrustChannelFactory(
                 new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential),
                 new EndpointAddress(signInEndpoint));
             factory.TrustVersion = TrustVersion.WSTrust13;

             factory.Credentials.UserName.UserName = userName;
             factory.Credentials.UserName.Password = password;

             var channel = factory.CreateChannel();

             var rst = new RequestSecurityToken
             { 
                 RequestType = RequestTypes.Issue,
                 AppliesTo = new EndpointAddress(realm),
                 KeyType = KeyTypes.Bearer
             };

             try
             {
                 var genericToken = channel.Issue(rst) as GenericXmlSecurityToken; 
```

** 编辑 **

我还设置了网站服务器 iis 默认网站 https 绑定端口 443 以使用我从 STS 服务器导入的证书并得到相同的错误。

** 结束编辑 **

我一直在使用谷歌和 stackoverflow，虽然许多问题似乎很接近，但没有一个获得批准的答案有效。

想法？我是服务器/硬件菜鸟，所以“傻瓜版”会很好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T22:55:00.120

由于您使用的是自签名证书，因此您是否确保关闭[证书链验证](http://social.technet.microsoft.com/wiki/contents/articles/windows-identity-foundation-wif-how-to-change-certificate-chain-validation-settings-for-web-applications.aspx)或将其添加到受信任的存储中。看起来您正在使用 IdentityServer 的 url，在那里您可以关闭强大的端点要求，并在客户端上使用仅具有消息安全性的 UserNameWSTrustBinding。

# sql - 在循环中即使一条记录通过检查如何设置值

> ID：10353319
> 
> 赞同：0
> 
> 时间：2012-04-27T15:20:20.197
> 
> 标签：sql, oracle

我正在加入两张桌子`Employee`和`Wages`. 现在一个员工可以有多个工资，因为他们可以在不同的项目中工作，我想要他的工资总和。还有一个名为 的列`Employee_benefits_Claimed_Ind`。这是一个指示员工是否在每个项目中要求任何福利的指标。他可以为某些项目申请福利，但不能为某些项目申请福利，但就我而言，如果他甚至在一个项目中申请福利，他都不符合资格。这是我要填充的表：

```
CREATE TABLE EMPLOYEE_QUAL
(Employee_id NUMBER,
 TOTAL_WAGES NUMBER,
EMPLOYEE_disQUALIFY CHAR(1))

INSERT INTO EMPLOYEE_QUAL(Employee_id, Total_wages, EMployee_disQualify)
SELECT      c_Employee_id,
            c_Total_wages,
            c_Employee_disQualify
FROM        (
                Select  Employee_ID as c_Employee_id
                from    Employees
            ) e
LEFT JOIN   (
                Select      SUM(Wages),
                            Employee_disQualify
                from        wages
                group by    Employee_disQualify
            ) w on e.employee_id = w.employee_id 
```

但是，如果一个员工为一个人申请福利，而另一个人没有，这将只有两个条目，因为`GROUP BY`. 理想情况下，它应该只有一个条目，其中 Employee_disqualify_ind 为“Y”，因为他声称在一个项目中受益。如果他没有在另一个上也没关系。我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:02:54.137

我要猜你到底在说什么。

英文：对于由 指定的所有员工`Employees.Employee_ID`，在`WAGES`表上汇总工资，并设置工资`EMployee_disQualify' = 'Y' if any of the`。Employee_disqualify`标志设置为是。

在 SQL 中，这将是：

```
SELECT e.Employee_ID,
       sum(w.wages),
       case when 
          (sum (case w.Employee_disQualify WHEN 'Y' THEN 1 else 0 end)) > 0
              THEN 'Y'
              ELSE 'N'
       end
FROM Employees e
LEFT JOIN wages w 
   on e.employee_id = w.employee_id
group by e.employee_ID 
```

（我刚刚展示了选择）。

主要技巧是将 employee_disqualify 标志转换为数字（使用`CASE`），以便可以轻松聚合，然后将此聚合的结果转换回 Y 或 N w/ another `CASE`。如果任何匹配行中至少有一个 Y，那么总和将 > 1，因此，您将得到一个 Y 作为最终结果。否则，N。（我再次猜测您的字段是如何设置的。）

如果您不进行聚合，我可能会使用内联`select 'Y' where exists . .`类型的 cluase 来执行此操作，但无论如何您已经在聚合，`sum(wages)`并且这是在通过表的同一扫描中计算的`wages`，因此这应该是相当有效的。

例如，请参见此处： [http ://sqlfiddle.com/#!4/67691/2](http://sqlfiddle.com/#!4/67691/2)

# jquery - 如何根据上一个或下一个幻灯片按键更改 Nivo Slider 中的效果？

> ID：10353332
> 
> 赞同：0
> 
> 时间：2012-04-27T15:20:50.513
> 
> 标签：jquery, carousel, nivo-slider

我想根据按下的按钮更改 Nivo Slider 上的过渡效果。关于如何做到这一点的任何想法？

**更新** 为了澄清，我的意思是下一个或上一个按钮，而不是键盘上的按钮。我正在寻找的是，如果一个人按下下一个按钮，就会调用一个 slideToRight 过渡效果。如果有人按下前一个按钮，则会调用一个 slideToLeft 过渡效果。如果有人按下特定的幻灯片，如果它滑动正确的方向，那么锦上添花。我喜欢 Nivo Slider，但我觉得这些应该是默认的可选操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T13:16:46.997

```
$('.nivo-prevNav').live('mouseover', function(){
     $('#slider img').attr("data-transition","sliceUpDown");
});

$('.nivo-nextNav').live('mouseover', function(){
     $('#slider img').attr("data-transition","sliceUpDownLeft");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T05:45:31.297

使用按钮

```
<script type='text/javascript'>
$(document).ready(function() {
    jQuery("#previousButton').click(function (e) {
         e.preventDefault();
         jQuery(".nivo-directionNav .nivo-prevNav").click();
    });
    jQuery("#nextButton').click(function (e) {
         e.preventDefault();
         jQuery(".nivo-directionNav .nivo-nextNav").click();
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:23:41.713

将此添加到“jquery.nivo.slider.js”之前的注释“//运行效果”之后的注释和代码中的“//由“data-transition”属性定义的自定义转换”。如果您单击左箭头或右箭头或按钮，此显示更改当前效果。对于这项工作，您必须在 HTML 中使用不带“data-transition”属性的图像，并且您必须在注释“//默认设置”下的“jquery.nivo.slider.js”中定义默认效果，因为首选“data-transition”属性。我为我的项目编写了正确的代码。

```
 if(nudge === 'prev'){
            currentEffect = 'slideInLeft';
        } 
        else if (nudge === 'next'){
            currentEffect = 'slideInRight';
        }
        else if (nudge === 'control'){
            currentEffect = 'fade'; /*test*/
        } 
```

# php - 使用全局变量的 PHPUnit 测试代码。（原为：提供的参数不是有效的 sdl 资源）

> ID：10353336
> 
> 赞同：0
> 
> 时间：2012-04-27T15:20:57.707
> 
> 标签：php, unit-testing, soap, wsdl, phpunit

我正在为使用 SOAP 的 PHP 库编写单元测试。测试用例中有**两个**测试。

该库在**第二个**单元测试中出现以下消息（我正在使用 PHPUnit）：

```
SoapClient::__call(): supplied argument is not a valid sdl resource

/test/SOAPLib.php:186
/test/SOAPLibTest.php:56 
```

我正在测试的库的第 186 行是：

```
$issue = $client->getIssueById($auth_token, $id); 
```

当从任何其他脚本以通常的方式调用时，这不会失败 - 只有在**第二个**单元测试中使用时才会失败。这意味着我的第二个 SOAP 调用中的全局变量存在某种身份验证或令牌错误。

UnitTest 文件的第 56 行是：

```
list($summary, $pri) = \SOAPLibTest\get_issue_by_id($id); 
```

我*在 PHP 手册中查找了 SoapClient::_ call(): ，它说该函数已弃用，我应该改用 SoapClient::* _soapCall 。问题是我不知道如何改变它。

尝试更新 php-soap 报告我已经是最新的。

我真的被这个难住了，而且谷歌似乎没有立即提供任何帮助。

非常感谢， **ns**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:37:43.920

我设法找到了问题的根源——这实际上是一个 PHPUnit 问题，我的 SOAP 库中有一些全局变量。我将更改此问题的标题以反映 PHPUnit，而不是我最初认为的 php-soap。

Sebastian Bergmann（PHPUnit 的创建者）的这篇博文非常有帮助：

[http://sebastian-bergmann.de/archives/797-Global-Variables-and-PHPUnit.html](http://sebastian-bergmann.de/archives/797-Global-Variables-and-PHPUnit.html)

他包括的一些重要声明是：

> 很难测试使用单例的代码。使用全局变量的代码也是如此。”
> 
> 通常，您要测试的代码与全局变量紧密耦合，您无法控制它的创建。另一个问题是一个测试对全局变量的更改可能会破坏另一个测试。
> 
> 全局和超全局变量的备份和恢复操作的实现使用 serialize() 和 unserialize()。PHP 本身提供的某些类的对象（例如 PDO）无法序列化，并且当此类对象存储在 $GLOBALS 数组中时，备份操作将中断。
> 
> 可以像这样禁用全局和超级全局变量的备份和恢复操作：

```
<?php
class MyTest extends PHPUnit_Framework_TestCase
{
    protected $backupGlobals = FALSE;

    // ...
}
?> 
```

我希望这对其他人有所帮助。

问候， **ns**

# java - 您如何获得当前正在运行代码的 SwingWorker？

> ID：10353351
> 
> 赞同：0
> 
> 时间：2012-04-27T15:21:22.630
> 
> 标签：java, multithreading, swing, swingworker

您如何获得`SwingWorker`当前正在运行的代码？你可以`Thread.currentThread()`用来获取`Thread`实例，但我需要`SwingWorker`实例。

评论中的代码

```
private static void loadFeaturesForSym(final SeqSymmetry optimized_sym, 
                                       final GenericFeature feature) 
  throws OutOfMemoryError { 
  final CThreadWorker<Boolean, Object> worker = 
     new CThreadWorker<Boolean, Object>("Loading feature " + feature.featureName) { 
         @Override 
         protected Boolean runInBackground() { 
           try { 
             return loadFeaturesForSym(feature, optimized_sym); 
           } catch (Exception ex) { 
             ex.printStackTrace(); 
           } 
           return false; 
         } 
       }; 
       ThreadHandler.getThreadHandler().execute(feature, worker); 
     } 
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:18:02.590

我建议您创建一个模型对象，SwingWorker 可以监听该模型对象并将这些更新发送到发布和处理方法。您的其他对象不应该知道 SwingWorker，他们应该只知道自己的进度并将其发布给任何想听的人。这叫做解耦。这是这样做的一个想法，它使用了一些接近 MVC 的东西。我没有编译这段代码，但它有助于解释我在说什么。

```
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;

public class ProcessStatus {
    public static final String PROGRESS = "Progress";

    private PropertyChangeSupport propertyChangeSupport;

    private int progress = 0;

    public void addPropertyChangeListener(PropertyChangeListener listener) {
        propertyChangeSupport.addPropertyChangeListener(listener);
    }

    public void removePropertyChangeListener(PropertyChangeListener listener) {
        propertyChangeSupport.removePropertyChangeListener(listener);
    }

    protected void firePropertyChange(String propertyName, Object oldValue, Object newValue) {
        propertyChangeSupport.firePropertyChange(propertyName, oldValue, newValue);
    }

    public void setProgress(int progress) {
        int oldProgress = progress;
        this.progress = progress;
        firePropertyChange(PROGRESS, oldProgress, progress);
    }

    public int getProgress() {
        return progress;
    }
}

public class SomeWorker extends SwingWorker implements PropertyChangeListener {
    public void doInBackground() {
        ProcessStatus status = new ProcessStatus();
        status.addPropertyChangeListener(this);
        ProcessorThingy processor = new ProcessorThingy(status);
        processor.doStuff();
    }

    public void propertyChange(PropertyChangeEvent evt) {
        if (evt.getPropertyName().equals(ProcessStatus.PROGRESS)) {
            publish((Integer) evt.getNewValue());
        }
    }
}

public class ProcessorThingy {
    private ProcessStatus status;

    public ProcessorThingy(ProcessStatus status) {
        this.status = status;
    }

    public void doStuff() {
        //stuff part 1
        status.setProgress(10);
        //stuff part 2
        status.setProgress(50);
        //stuff part 3
        status.setProgress(100);
    }
} 
```

# php - 没有 curl 的 PHP 帖子等待响应

> ID：10353352
> 
> 赞同：0
> 
> 时间：2012-04-27T15:21:24.057
> 
> 标签：php, post

在没有 cURL 的情况下进行 PHP 调用（如在此处找到：[http](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/) ://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/ ），但响应大约需要 10-15 秒回来。它目前只是出现了一个错误。知道如何让它工作吗？我试过 set_time_limit 无济于事。

代码：

```
function DoPostRequest($url, $data, $optional_headers = null)
{
    $params = array('http' => array('method' => 'POST', 'content' => $data));
    if($optional_headers != null) {
        $params['http']['header'] = $optional_headers;
    }
    $ctx = stream_context_create($params);
    try {
        $fp = fopen($url, 'rb', false, $ctx);
        $response = stream_get_contents($fp);
    } catch (Exception $e) {
      echo 'Exception: '.$e->getMessage();
    }
    return $response;
} 
```

和错误：

```
Notice: fopen(): Content-type not specified assuming application/x-www-form-urlencoded in <php url> on line 81 Warning: fopen(http://localhost:59396/Update.ashx): failed to open stream: HTTP request failed! HTTP/1.1 100 Continue in <php url> on line 81 Warning: stream_get_contents() expects parameter 1 to be resource, boolean given in <php url> on line 82 bool(false) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T16:59:26.833

尝试

```
function DoPostRequest($url, $data, $optional_headers = null) {
    $params = array (
            'http' => array (
                    'method' => 'POST',
                    'content' => $data,
                    'header' => "Content-type: application/x-www-form-urlencoded\r\n" .
                    "Content-Length: " . strlen ( $data ) . "\r\n" 
            ) 
    );
    if ($optional_headers != null) {
        $params ['http'] ['header'] = $optional_headers;
    }
    $ctx = stream_context_create ( $params );
    try {
        $fp = fopen ( $url, 'rb', false, $ctx );
        $response = stream_get_contents ( $fp );
    } catch ( Exception $e ) {
        echo 'Exception: ' . $e->getMessage ();
    }
    return $response;
} 
```

将 Content-Type 更改为您想要的 .. JSON、XML 任何东西

# oracle - 将 Oracle 10g CLOB 与 Grails 2.0.1 一起使用

> ID：10353353
> 
> 赞同：5
> 
> 时间：2012-04-27T15:21:24.443
> 
> 标签：oracle, hibernate, grails

我正在开发一个使用 Oracle 10g 和 Grails v2.0.1 的项目。

我正在尝试对我的 Domain 类中的文本输入字段使用 CLOB 数据类型，但它似乎不起作用。我的第一次尝试是基于我[在这里读到的关于 GORM](http://grails.org/doc/2.0.1/guide/GORM.html "这里是关于 GORM")的内容，其中说使用`type: 'text'`，就像这个例子：

```
class Address {
   String number
   String postCode
   static mapping = {
       postCode type: 'text'
   }
} 
```

Grails 将其映射到`LONG`我的数据库中的数据类型，这是[不可取的](https://stackoverflow.com/questions/3599211/oracle-long-or-clob)

第二次尝试是尝试`type: 'clob'`。这在使我的 DB 数据类型为 CLOB 方面很有效，但导致了类转换错误，因为属性本​​身被定义为字符串，即`String postCode`. （请注意，我从未`type:'clob'`在文档中看到过，但我可以从方言类中推断出`clob`可能是那里的有效输入）

我随后尝试将属性定义为`java.sql.Clob`, ie `Clob postCode;`，但这根​​本不起作用。没有错误消息，但也没有任何东西被持久化到数据库中。

我采取了保留该`Clob`方法的最后一步，但使用了一个瞬态`String`属性，其中 getter/setter 尝试将瞬态 String 值映射到持久 Clob 字段。但我无法弄清楚如何将我的字符串值放入 Clob。Grails 不会抛出错误，但`println()`在我尝试分配之后永远不会打印。我试过用`myClob.setString(1, theString)`做作业，但没有成功。

所以长话短说，我似乎无法在我的场景中使用 Clob，我想知道是否有其他人已经看到并能够克服它。如果是这样，你能告诉我我可能做错了什么吗？

或者...有没有办法覆盖 Grails 选择的数据类型，以便我可以强制它映射`postCode type: 'text'`到 a `CLOB`？我不精通Hibernate，所以如果有办法，我不知道该怎么做。

旁注：在我们从 Grails 1.3.7 升级到 2.0.1 之前，我很确定`type: 'text'`确实映射到 Oracle 中的 CLOB。所以这对 2.0.1 来说可能是新的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T16:14:21.550

我*想我在*[Custom Hibernate Types](http://grails.org/doc/latest/guide/single.html#customHibernateTypes)的文档中找到了答案。

> 在这种情况下，使用 sqlType 属性覆盖列的 SQL 类型

这似乎工作。

看起来我可以使用它来强制我的数据库类型为 CLOB，同时保持 java 类型为字符串。换句话说，也许`type`选择 DB 类型和 Java 类型来处理字段？但是`sqlType`提供了更多粒度来指定要使用的数据库类型。

所以在我的例子中，上面的示例域类应该是这样的：

```
class Address {
    String number
    String postCode
    static mapping = {
        postCode sqlType: 'clob'
    }
} 
```

我从关于该主题的另一个 StackOverflow 问题中收集到这一点（问题本身让我明白了这一点，而接受的答案却误导了我！）：

*   [如何让 Grails 将我的 String 字段映射到 Clob？](https://stackoverflow.com/questions/9268777/how-do-i-get-grails-to-map-my-string-field-to-a-clob)

我花了一天时间试图弄清楚这一切，这非常令人沮丧。所以也许我在这里关于这个主题的笔记会帮助其他人避免这种经历！

* * *

虽然我在这里做笔记......这篇文章在解决如何在我的映射中更具体的问题方面被证明是有用的：

*   [http://omaha-seattle.blogspot.com/2010/02/grails-hibernate-custom-data-type.html](http://omaha-seattle.blogspot.com/2010/02/grails-hibernate-custom-data-type.html)

此处转载了有趣的代码：

```
//CONFIG.GROOVY (maps a custom SixDecimal type)
grails.gorm.default.mapping = {
    'user-type'( type: SixDecimalUserType, class: SixDecimal )
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-12T12:44:56.367

可能为时已晚，但我找到了一个非常简单的解决方案：

```
class MyDomain{
  String myField
  ...
  static mapping = {    
    myField type:'materialized_clob'        
  }
} 
```

不需要其他任何东西，写和读就像魅力一样！:D

希望能帮助到你。伊万。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T21:44:21.247

伊万的回答对我有用。MaterializedClob 是 Java 字符串的 Hibernate JDBC 类型。

# javascript - Cufon 控制台错误，不替换字体。（参考错误：找不到变量：Cufon）

> ID：10353357
> 
> 赞同：1
> 
> 时间：2012-04-27T15:21:46.403
> 
> 标签：javascript, html, cufon

我第一次尝试使用 Cufon 给我带来了一些问题，因为我似乎无法让它工作。Coda 的 Javascript 日志给了我这个错误 (ReferenceError: Can't find variable: Cufon) 从几个教程中，我精确地遵循了它们，一遍又一遍地来回下载库，但没有任何效果。如果你们能看看并帮助我，将不胜感激。

这是我的代码；

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
    <title>Test</title>
    <!-- Styles go here -->
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" href="css/style.css" />
    <!-- End styles here -->

    <!-- Scripts go here -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="scripts/A.font.js"></script>
    <script type="text/javascript" src="scripts/cufon.js"></script>

    <script type="text/javascript">
        Cufon.replace("p");
    </script>
    <!-- Scripts end here -->
</head>

<body>

<p>Test</p>
Test

</body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:06:10.233

出现此错误是因为您在加载`Cufon`需要它的字体之后才加载，所以尝试更改顺序，先加载`cufon.js`

```
<script type="text/javascript" src="scripts/cufon.js"></script> 
```

然后加载`A.font.js`

```
<script type="text/javascript" src="scripts/A.font.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:29:29.830

我知道这不能直接回答您的问题，但请不要使用 Cufon。请改用 CSS 2.1 的 @font-face。它非常容易且 100% 可访问，而 Cufon 则不然。

以下是您需要在 CSS 中使用 @font-face 的唯一 2 个链接：

[http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax](http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax) http://www.fontsquirrel.com/fontface/generator

# php - Facebook 请求是如何工作的？

> ID：10353361
> 
> 赞同：1
> 
> 时间：2012-04-27T15:21:52.807
> 
> 标签：php, javascript, facebook, facebook-requests

假设我经营一个网站，用户可以在其中创建团队，并且他可以邀请他的朋友加入他的团队。

假设用户 A 创建了团队 XYZ，并邀请用户 B 和用户 C 加入团队 XYZ。

为此，他使用 javascript 使用[这种方法](https://developers.facebook.com/docs/reference/dialogs/requests/)向他们发送了一个 facebook 请求。

请求已发送，我的回调函数可能会从 facebook 获取请求 ID，使用它在我的数据库中存储一条带有 requestId 和 teamId 的记录，因此如果用户接受请求，我将能够通过以下方式将它们添加到团队中通过 facebook requestId 识别它们。（这就是假设它会起作用的方式，如果我错了，请纠正我）。

用户 B 和 C 在下次登录 facebook 时看到请求，并接受请求。

我的应用程序将如何收到回电，说明请求被拒绝或接受？我可以设置回调 URL，在哪里可以看到回调将包含的一些文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:45:18.793

如果用户在请求上单击“接受”，他们将被发送到发送请求的应用程序的画布页面 URL。此 URL 将包含一个额外的 GET 参数 request_ids，它是用户尝试操作的请求 ID 的逗号分隔列表：

```
https://apps.facebook.com/[app_name]/?request_ids=[request_ids] 
```

有关请求格式的更多详细信息，请参阅[https://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)。

# vba - Excel：选择所有行直到空单元格

> ID：10353367
> 
> 赞同：4
> 
> 时间：2012-04-27T15:22:17.793
> 
> 标签：vba, excel

我要从 2 个相邻列中选择所有行，从标题下方的行开始（这是固定的），并以第一行之前的行结束，并带有空白单元格。

鉴于以下示例...

```
 A       B
1   Item    Amount
2   Item1   1
3   Item2   4
4           2
5 
```

我想选择范围 A2:B3。第一行始终是第 2 行，最后一行是第 3 行，因为它是具有空白单元格的第一行之前的行。

我的目标是在我完全填满当前最后一行下方的行后，使用此选择自动对行进行排序和添加边框。在此示例中，我必须填写 A4 以使行成为选择的一部分并应用上述操作。

我希望任何人都可以帮助我..提前谢谢！

编辑

我提出了一个解决方案，基于 chris neilsen 的解决方案：

```
Dim rng As Range
With Worksheets("YourSheet")
    Set rng1 = .Range(.Cells(2, 1), .Cells(2, 2).End(xlDown))
    Set rng2 = .Range(.Cells(2, 2), .Cells(2, 1).End(xlDown))
    Set r = Application.Intersect(rng1, rng2)

End With 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:28:37.070

尝试这个

```
Dim rng as Range
With Worksheets("YourSheet")
    Set rng = .Range(.Cells(1,2), .Cells(1,2).End(xlDown)).Resize(,2)
End With 
```

该变量`rng`现在将设置为`A2:B3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:08:23.580

试试下面的代码：

```
Sub sample()
    Dim lastRow As Long
    lastRow = Range("A65000").End(xlUp).Row

    Dim rng As Range, newRng As Range

    Set rng = Range("A2:A" & lastRow)
    Set newRng = rng.Resize(, 2)

    If Not newRng Is Nothing Then
        newRng.Sort key1:=Range("A2")
    End If

    newRng.BorderAround xlContinuous, xlMedium, xlColorIndexAutomatic

End Sub 
```

# javascript - textarea 属性 wrap=hard 不适用于粘贴的文本，有什么解决方法吗？

> ID：10353370
> 
> 赞同：2
> 
> 时间：2012-04-27T15:22:34.897
> 
> 标签：javascript, html, textarea, copy-paste

我有一个文本区域

```
<textarea id="id-textarea-readme" wrap="hard"></textarea> 
```

效果很好，直到有人在“记事本”中写下他的文本并通过 c&p 将其放在那里，单词被正确包装但没有“额外”换行符（这是“硬”的目的）

是否有任何解决方法可以使这项工作？任何 JS 或触发换行符的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:16:06.177

该`wrap=hard`属性是非标准的，并且不能在浏览器中一致地工作。修改设计，使您不需要依赖此类客户端操作。Textarea 元素应该会产生实际的用户输入，当用户实际按 Enter 时包含换行符。如果您需要拆分长行以进行进一步处理，请在服务器端进行。

在我的测试中，IE 甚至可以在复制和粘贴中进行换行。另一方面，Firefox 仅在空格处换行时才引入硬换行符，而不是在“单词”内换行时才引入硬换行符，因此对于`cols=5`，输入 0123456789（无论是直接还是复制粘贴）显示为两行，但作为一个发送行，而 01234 56789 作为两行发送。我希望也能找到其他浏览器不兼容的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T01:11:59.413

复制和粘贴问题可能来自本机操作系统换行/返回/换行问题。

您可以只听文本区域 DOM 元素上的更改或粘贴并使用 javascript 解析吗？那将是我的概念猜测，这是 jquery 中的一个通用示例：

```
$("textarea").on("change", function(event){
    $this.replace(/\n\r?/g, '\n');
}); 
```

# algorithm - 有向图中的领导者选举算法

> ID：10353372
> 
> 赞同：0
> 
> 时间：2012-04-27T15:22:42.060
> 
> 标签：algorithm, leader

我正在尝试在给定有向图的情况下找到领导者选举算法。到目前为止，我发现大多数 LE 算法都有环形网络或网状拓扑。谁能给我一些算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:24:49.140

Tel 的“分布式算法简介”在第 7 章中介绍了这一点。这里提到了一些可能是搜索术语“树算法”——在树上找到最小值的相当简单的算法。Finn 算法参考了前一章中的 Wave 算法，如果用于领导选举，该算法的效率相对较低。Tel 说任意网络上的领导者选举问题与生成树的创建密切相关，并描述了 Gallager-Humblet-Spira。Korach-Kutten-Moran 显然描述了如何将通用网络的遍历算法转变为领导者选举算法。

# cron - Cron 作业多任务

> ID：10353373
> 
> 赞同：0
> 
> 时间：2012-04-27T15:22:51.990
> 
> 标签：cron

我想编写一个执行以下任务的 cron 作业：

每隔一小时：

1）打开一个url，例如[http://my.domain.com/wp-admin/post.php?post=1&action=edit](http://my.domain.com/wp-admin/post.php?post=1&action=edit)（有登录ID和密码）（url是Wordpress草稿）

2)输入ID和密码登录

3) 按“保存草稿”按钮

这对我很有帮助，因为我有几个与“保存草稿”按钮相关的操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:32:26.003

让 cron 作业执行单击“保存草稿”按钮的操作。我看不出有任何理由通过 UI。

# php - 在 Drupal 中使用 Apache Solr 按版本而不是节点进行索引

> ID：10353385
> 
> 赞同：1
> 
> 时间：2012-04-27T15:23:46.347
> 
> 标签：php, mysql, drupal, drupal-6, solr

我不需要按节点索引，而是按 Apache Solr 中节点的每个修订版进行索引。我使用`hook_apachesolr_modify_query`,`hook_apachesolr_update_index`还是都不使用？有人做过吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T13:27:59.970

如果我正确理解了您的问题，就像 Drupal6 一样，您可以在 apachesolr 中为自定义字段编制索引。请参阅有关自定义字段索引[的 Drupal 帖子或搜索](http://drupal.org/node/1490800)[Drupal.org](http://www.drupal.org)

有关信息，`apachesolr_update_index`在 Drupal7(beta15) 中已/将被弃用，因此您可能应该修改您的代码以使用`apachesolr_index_document_build`

# javascript - Highcharts 数据减少了一天

> ID：10353386
> 
> 赞同：10
> 
> 时间：2012-04-27T15:23:49.273
> 
> 标签：javascript, datetime, highcharts

我有一个似乎无法修复的 Highchart。xAxis 上的日期是正确的，但标签上的日期相差一天。无论我将什么数据传递给我的图表，它总是会延迟一天。我一直在拔头发试图弄清楚这一点。任何提示将不胜感激。

你可以在这里看到我的代码：http: [//jsfiddle.net/brenjt/zxBTG/2/](http://jsfiddle.net/brenjt/zxBTG/2/)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-06T09:45:46.920

刚刚找到您的问题...我认为您的问题的解决方案是将 UTC 时区选项设置为 false。这会将图表时区设置为本地而不是 UTC。

```
Highcharts.setOptions({
    global : {
        useUTC : false
    }
}); 
```

请参阅：[http ://api.highcharts.com/highcharts#global.useUTC](http://api.highcharts.com/highcharts#global.useUTC)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T19:43:04.383

好吧，我在轴和工具提示中添加了时间信息，请参见[http://jsfiddle.net/gATfu/](http://jsfiddle.net/gATfu/)
看起来您的时间戳是从晚上 10 点开始的，但轴标签显示的是上午 0 点……这就是为什么这些点看起来大约有一天的变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T12:40:35.817

这是因为时区。您应该使用 Date.UTC(..) 将日期转换为 UTC 格式。它会工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-11T13:10:01.367

UTC 的全局 HighCharts 选项效果很好。我还不能投票赞成:(

我还发现 HighCharts 会根据 dgw 描述的确切时间戳移动我的条形图。即从 5 月 1 日开始的日期可以在 4 月 30 日附近显示，具体取决于缩放比例。这让我很困惑，因为有两个 4 月 30 日的条目，而没有 5 月 1 日的条目。

# c++ - 将 gcc 可执行文件与 Visual C++ 库链接是否安全？

> ID：10353387
> 
> 赞同：4
> 
> 时间：2012-04-27T15:23:52.383
> 
> 标签：c++, mingw, oracle-call-interface, mingw32

将 MinGW 可执行文件与由 Visual C++ 编译的库链接起来有多安全。

类似于此处解释的内容。 [http://www.codesynthesis.com/~boris/blog/2011/12/09/oci-mingw/](http://www.codesynthesis.com/~boris/blog/2011/12/09/oci-mingw/)

TL; DR "...因为 OCI 是一个 C 库，我们可以使用 VC++ 的“官方”OCI 导入库`oci.lib`，将其重命名为`libclntsh.a`，我们已经为 MinGW 提供了 OCI"

这是一场等待发生的事故吗？会出什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:18:44.457

这取决于。

AFAIK，没有什么可以阻止 glibc 和 msvcrt 在 Windows 上的同一进程中共存 - 在 Linux 上发生的相同全局函数搜索不会在 Windows 上发生（每个动态导入都知道它来自哪个 DLL - 函数不是合并到一个命名空间中）。

但是，特定库可能存在问题。例如，如果库指定“函数返回一个指针，完成后应该释放它`free()`”，您需要使用**正确**的释放它来释放它，即与`malloc()`分配它的那个相对应。同样，如果函数声明“参数是一个将被`free()`函数释放的缓冲区”，那么它必须分配相应的`malloc()`. 类似的问题适用于`realloc()`可能使用的地方。

例如，当使用针对不同版本的 MSVCRT（例如 MSVCRT20.dll 与 MSVCRT40.dll）编译的 DLL 时，也会出现此问题。

这就是为什么 windows 库总是说明应该如何分配内存的原因。参见例如 CoTaskMemAlloc/CoTaskMemFree、LocalAlloc/LocalFree、HeapAlloc/HeapFree。文档可能会声明“当不再需要缓冲区时，必须使用 CoTaskMemFree 释放”。或者他们可以提供他们自己的 free/alloc 对，例如“当不再需要返回的缓冲区时，必须使用 SuperLibraryFreeBuffer 释放”（内部可以简单地委托给 CRT `free`，但至少它将是正确的 free 版本）。

这是因为 windows 一直是一个多语言平台，其中库可以用 C 以外的语言编写。今天我们可能已经习惯了 Lisp、Pascal 等是 C 运行时之上的一层的想法，-大多数程序员可能会认为，即使它不像 Pascal 那样是正确的——但情况并非总是如此：在 C 发明之前，Pascal 在 DEC 计算机上已普遍使用了两年，而 Windows 的遗产就像每个人一样知道与 DEC 有很多共同点。Windows 的早期版本在很大程度上是用汇编程序编写的，并且......您知道的 Windows 3 标头中的“pascal”调用约定是有原因的......

# android - 在 Android 应用程序中生成条形码图像

> ID：10353392
> 
> 赞同：45
> 
> 时间：2012-04-27T15:24:14.083
> 
> 标签：android, image, barcode

我需要生成一维条码图像并根据给定的 13 个字符代码将其设置为 ImageView。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-01-08T02:25:32.300

您可以使用 zxing 库轻松生成条形码。

首先，在 libs 文件夹下找到 core.jar。

```
libs/core.jar 
```

您可以从这里下载 ZXing-2.1.zip。

[http://repo1.maven.org/maven2/com/google/zxing/](http://repo1.maven.org/maven2/com/google/zxing/)（[来源](https://github.com/zxing/zxing/releases)）

解压后找到jar文件。

```
\ZXing-2.1\zxing-2.1\core\core.jar 
```

然后编写您自己的代码，如下所示。

```
import java.util.EnumMap;
import java.util.Map;

import android.app.Activity;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.Gravity;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TextView;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.EncodeHintType;
import com.google.zxing.MultiFormatWriter;
import com.google.zxing.WriterException;
import com.google.zxing.common.BitMatrix;

public class BarcodeExampleActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LinearLayout l = new LinearLayout(this);
    l.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    l.setOrientation(LinearLayout.VERTICAL);

    setContentView(l);

    // barcode data
    String barcode_data = "123456";

    // barcode image
    Bitmap bitmap = null;
    ImageView iv = new ImageView(this);

    try {

        bitmap = encodeAsBitmap(barcode_data, BarcodeFormat.CODE_128, 600, 300);
        iv.setImageBitmap(bitmap);

    } catch (WriterException e) {
        e.printStackTrace();
    }

    l.addView(iv);

    //barcode text
    TextView tv = new TextView(this);
    tv.setGravity(Gravity.CENTER_HORIZONTAL);
    tv.setText(barcode_data);

    l.addView(tv);

    }

    /**************************************************************
     * getting from com.google.zxing.client.android.encode.QRCodeEncoder
     * 
     * See the sites below
     * http://code.google.com/p/zxing/
     * http://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/encode/EncodeActivity.java
     * http://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/encode/QRCodeEncoder.java
     */

    private static final int WHITE = 0xFFFFFFFF;
    private static final int BLACK = 0xFF000000;

    Bitmap encodeAsBitmap(String contents, BarcodeFormat format, int img_width, int img_height) throws WriterException {
    String contentsToEncode = contents;
    if (contentsToEncode == null) {
        return null;
    }
    Map<EncodeHintType, Object> hints = null;
    String encoding = guessAppropriateEncoding(contentsToEncode);
    if (encoding != null) {
        hints = new EnumMap<EncodeHintType, Object>(EncodeHintType.class);
        hints.put(EncodeHintType.CHARACTER_SET, encoding);
    }
    MultiFormatWriter writer = new MultiFormatWriter();
    BitMatrix result;
    try {
        result = writer.encode(contentsToEncode, format, img_width, img_height, hints);
    } catch (IllegalArgumentException iae) {
        // Unsupported format
        return null;
    }
    int width = result.getWidth();
    int height = result.getHeight();
    int[] pixels = new int[width * height];
    for (int y = 0; y < height; y++) {
        int offset = y * width;
        for (int x = 0; x < width; x++) {
        pixels[offset + x] = result.get(x, y) ? BLACK : WHITE;
        }
    }

    Bitmap bitmap = Bitmap.createBitmap(width, height,
        Bitmap.Config.ARGB_8888);
    bitmap.setPixels(pixels, 0, width, 0, 0, width, height);
    return bitmap;
    }

    private static String guessAppropriateEncoding(CharSequence contents) {
    // Very crude at the moment
    for (int i = 0; i < contents.length(); i++) {
        if (contents.charAt(i) > 0xFF) {
        return "UTF-8";
        }
    }
    return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T08:23:03.023

谢谢你们的回答......与此同时，我找到了解决方案，所以这就是我使用的：[http](http://www.onbarcode.com/products/android_barcode/barcodes/ean13.html) ://www.onbarcode.com/products/android_barcode/barcodes/ean13.html 这是一个对我来说很好的库，所以如果任何人都有同样的问题，我建议使用它。

再次感谢！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-21T06:51:02.840

```
public Bitmap Ean13_Encode(String qrData,  int qrCodeDimention) {
    Bitmap bitmap= Bitmap.createBitmap(1, 1, Bitmap.Config.ARGB_8888);       
    QRCodeEncoder qrCodeEncoder = new QRCodeEncoder(qrData, null,
    Contents.Type.TEXT, BarcodeFormat.EAN_13.toString(), qrCodeDimention);
    try {
        bitmap = qrCodeEncoder.encodeAsBitmap();
    } catch (WriterException e) {
        e.printStackTrace();
    };
    return bitmap;
};

public final class QRCodeEncoder {
private static final int WHITE = 0xFFFFFFFF;
private static final int BLACK = 0xFF000000;

private int dimension = Integer.MIN_VALUE;
private String contents = null;
private String displayContents = null;
private String title = null;
private BarcodeFormat format = null;
private boolean encoded = false;

public QRCodeEncoder(String data, Bundle bundle, String type, String format, int dimension) {
    this.dimension = dimension;
    encoded = encodeContents(data, bundle, type, format);
}

public String getContents() {
    return contents;
}

public String getDisplayContents() {
    return displayContents;
}

public String getTitle() {
    return title;
}

private boolean encodeContents(String data, Bundle bundle, String type, String formatString) {
    // Default to QR_CODE if no format given.
    format = null;
    if (formatString != null) {
        try {
            format = BarcodeFormat.valueOf(formatString);
        } catch (IllegalArgumentException iae) {
            // Ignore it then
        }
    }
    if (format == null || format == BarcodeFormat.QR_CODE) {
        this.format = BarcodeFormat.QR_CODE;
        encodeQRCodeContents(data, bundle, type);
    } else if (data != null && data.length() > 0) {
        contents = data;
        displayContents = data;
        title = "Text";
    }
    return contents != null && contents.length() > 0;
}

private void encodeQRCodeContents(String data, Bundle bundle, String type) {
    if (type.equals(Contents.Type.TEXT)) {
        if (data != null && data.length() > 0) {
            contents = data;
            displayContents = data;
            title = "Text";
        }
    } else if (type.equals(Contents.Type.EMAIL)) {
        data = trim(data);
        if (data != null) {
            contents = "mailto:" + data;
            displayContents = data;
            title = "E-Mail";
        }
    } else if (type.equals(Contents.Type.PHONE)) {
        data = trim(data);
        if (data != null) {
            contents = "tel:" + data;
            displayContents = PhoneNumberUtils.formatNumber(data);
            title = "Phone";
        }
    } else if (type.equals(Contents.Type.SMS)) {
        data = trim(data);
        if (data != null) {
            contents = "sms:" + data;
            displayContents = PhoneNumberUtils.formatNumber(data);
            title = "SMS";
        }
    } else if (type.equals(Contents.Type.CONTACT)) {
        if (bundle != null) {
            StringBuilder newContents = new StringBuilder(100);
            StringBuilder newDisplayContents = new StringBuilder(100);

            newContents.append("MECARD:");

            String name = trim(bundle.getString(ContactsContract.Intents.Insert.NAME));
            if (name != null) {
                newContents.append("N:").append(escapeMECARD(name)).append(';');
                newDisplayContents.append(name);
            }

            String address = trim(bundle.getString(ContactsContract.Intents.Insert.POSTAL));
            if (address != null) {
                newContents.append("ADR:").append(escapeMECARD(address)).append(';');
                newDisplayContents.append('\n').append(address);
            }

            Collection<String> uniquePhones = new HashSet<String>(Contents.PHONE_KEYS.length);
            for (int x = 0; x < Contents.PHONE_KEYS.length; x++) {
                String phone = trim(bundle.getString(Contents.PHONE_KEYS[x]));
                if (phone != null) {
                    uniquePhones.add(phone);
                }
            }
            for (String phone : uniquePhones) {
                newContents.append("TEL:").append(escapeMECARD(phone)).append(';');
                newDisplayContents.append('\n').append(PhoneNumberUtils.formatNumber(phone));
            }

            Collection<String> uniqueEmails = new HashSet<String>(Contents.EMAIL_KEYS.length);
            for (int x = 0; x < Contents.EMAIL_KEYS.length; x++) {
                String email = trim(bundle.getString(Contents.EMAIL_KEYS[x]));
                if (email != null) {
                    uniqueEmails.add(email);
                }
            }
            for (String email : uniqueEmails) {
                newContents.append("EMAIL:").append(escapeMECARD(email)).append(';');
                newDisplayContents.append('\n').append(email);
            }

            String url = trim(bundle.getString(Contents.URL_KEY));
            if (url != null) {
                // escapeMECARD(url) -> wrong escape e.g. http\://zxing.google.com
                newContents.append("URL:").append(url).append(';');
                newDisplayContents.append('\n').append(url);
            }

            String note = trim(bundle.getString(Contents.NOTE_KEY));
            if (note != null) {
                newContents.append("NOTE:").append(escapeMECARD(note)).append(';');
                newDisplayContents.append('\n').append(note);
            }

            // Make sure we've encoded at least one field.
            if (newDisplayContents.length() > 0) {
                newContents.append(';');
                contents = newContents.toString();
                displayContents = newDisplayContents.toString();
                title = "Contact";
            } else {
                contents = null;
                displayContents = null;
            }

        }
    } else if (type.equals(Contents.Type.LOCATION)) {
        if (bundle != null) {
            // These must use Bundle.getFloat(), not getDouble(), it's part of the API.
            float latitude = bundle.getFloat("LAT", Float.MAX_VALUE);
            float longitude = bundle.getFloat("LONG", Float.MAX_VALUE);
            if (latitude != Float.MAX_VALUE && longitude != Float.MAX_VALUE) {
                contents = "geo:" + latitude + ',' + longitude;
                displayContents = latitude + "," + longitude;
                title = "Location";
            }
        }
    }
}

public Bitmap encodeAsBitmap() throws WriterException {
    if (!encoded) return null;

    Map<EncodeHintType, Object> hints = null;
    String encoding = guessAppropriateEncoding(contents);
    if (encoding != null) {
        hints = new EnumMap<EncodeHintType, Object>(EncodeHintType.class);
        hints.put(EncodeHintType.CHARACTER_SET, encoding);
    }
    MultiFormatWriter writer = new MultiFormatWriter();
    BitMatrix result = writer.encode(contents, format, dimension, dimension, hints);
    int width = result.getWidth();
    int height = result.getHeight();
    int[] pixels = new int[width * height];
    // All are 0, or black, by default
    for (int y = 0; y < height; y++) {
        int offset = y * width;
        for (int x = 0; x < width; x++) {
            pixels[offset + x] = result.get(x, y) ? BLACK : WHITE;
        }
    }

    Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    bitmap.setPixels(pixels, 0, width, 0, 0, width, height);
    return bitmap;
}

private String guessAppropriateEncoding(CharSequence contents) {
    // Very crude at the moment
    for (int i = 0; i < contents.length(); i++) {
        if (contents.charAt(i) > 0xFF) { return "UTF-8"; }
    }
    return null;
}

private  String trim(String s) {
    if (s == null) { return null; }
    String result = s.trim();
    return result.length() == 0 ? null : result;
}

private String escapeMECARD(String input) {
    if (input == null || (input.indexOf(':') < 0 && input.indexOf(';') < 0)) { return input; }
    int length = input.length();
    StringBuilder result = new StringBuilder(length);
    for (int i = 0; i < length; i++) {
        char c = input.charAt(i);
        if (c == ':' || c == ';') {
            result.append('\\');
        }
        result.append(c);
    }
    return result.toString();
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T13:50:17.597

查看答案：[在 Android 中生成一维条码](https://stackoverflow.com/questions/9906293/generate-1d-barcode-in-android)

他们建议使用[IText](http://www.itextpdf.com/)，它是一个 java PDF 操作库。它还具有生成条形码图像的能力。

您可以在我链接的那个问题中找到示例代码，[也可以在此处找到](http://itextpdf.com/examples/iia.php?id=297)

# php - 有没有办法阻止 Symfony2 为某些路径发送会话 cookie？

> ID：10353393
> 
> 赞同：9
> 
> 时间：2012-04-27T15:24:19.403
> 
> 标签：php, symfony, session-cookies

我正在实现一个 Web 服务作为 Symfony2 站点的一部分，该站点将使用来自另一个（静态）站点的 JSONp 和 iframe 进行访问。当用户使用 iFrame 登录时，Safari 不会保留会话，因此我使用 javascript 将会话 ID 存储在静态站点的 cookie 中，并将其传递回请求的 GET 或 POST 参数中，这工作正常.

问题是在其他浏览器上，Web 服务的会话 cookie 被保留，这意味着当用户注销时，他们实际上仍然登录到 Symfony 站点。

有没有办法，仅对于 symfony 站点的 web 服务部分，禁用 PHP 会话 cookie，最好以 Symfony2 友好的方式（而不是，例如，弄乱 .htaccess）？

我仍然想要一个会话，但会通过在我发出的所有请求中自己传递一个 PHPSESSID 变量来维护它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T11:46:12.007

[这](http://symfony.com/doc/current/book/security.html#stateless-authentication)可能正是您正在寻找的东西。拥有无状态防火墙：

在你的 security.yml

```
# app/config/security.yml
security:
    firewalls:
        main:
            stateless:  true 
```

# java - 如何在 java 中使用指针（引用）？

> ID：10353396
> 
> 赞同：0
> 
> 时间：2012-04-27T15:24:33.803
> 
> 标签：java, pointers, reference

C++ 中的这段代码

```
void generate_moves(char _board[9], std::list<int> &move_list) {
    for(int i = 0; i < 9; ++i) {
        if(_board[i] == 0) {
            move_list.push_back(i);
        }
    }
} 
```

我想这样编码，但在java中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:29:02.017

```
void generate_moves(char _board[], List<Integer> move_list) {
    for (int i = 0; i < _board.length; ++i) {
        if (_board[i] == 0) {
            move_list.add(i);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:40:27.720

Java的确切翻译是：

```
import java.util.ArrayList;
import java.util.List;

public class Main
{
    public static void main(String[] args)
    {
        char[] board = new char[]
        {
            'o', 'o', 'o',
            'x', 'x', 'x',
            'x', 'x', 'x'
        };

        List<int> moves = new ArrayList<int>();
        generateMoves ( board, moves );
    }

    public static void generateMoves(char[] board, List<int> moves )
    {
        for (int i = 0; i < board.length; ++i)
        {
            if (board[i] == 0)
            {
                moves.add ( i );
            }
        }
    }
} 
```

因为在 Java 中，所有对象都被认为是通过指针传递的。除非您专门这样做，否则没有副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:30:11.407

在这种情况下，Java 引用将或多或少地用作 c++ 指针。

```
public void generate_moves(..., List<Integer> move_list) {
 ...
  move_list.push_back(i);
} 
```

在这种情况下，`push_back`对**引用**move_list 的调用与您的指针示例完全相同。引用跟随到它的对象实例，然后调用该方法。

您将无法做的是使用指针算法访问数组中的位置。这在 Java 中根本不可能。

# javascript - 为什么 .getElementByTagName 的 .parent 未定义

> ID：10353397
> 
> 赞同：0
> 
> 时间：2012-04-27T15:24:44.493
> 
> 标签：javascript, sharepoint, parent

为什么返回`.parent`的项目`.getElementsByTagName`未定义？我正在尝试将一个类应用于`href`等于的父级`document.URL`。

```
<div id="JSE_vertical_nav">
  <div class="jse_link_row">
    <a href="../SitePages/Home.aspx">HOME</a>
  </div>
  <div class="jse_link_row">
    <a href="#">ABOUT</a>
  </div>
  <div class="jse_link_row">
     <a href="#">NEWS</a>
  </div>
</div>

<script language="javascript" type="text/javascript">
  var jse_page_url = document.URL;

  var jse_links_in_nav = document.getElementById('JSE_vertical_nav').getElementsByTagName('a');
  for (var i=0; i < jse_links_in_nav.length; i++) {
    if (jse_links_in_nav[i] == jse_page_url) {
      //why does this alert undefined?
      alert(jse_links_in_nav[i].parent);
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:28:21.237

`parentNode`是您正在寻找的财产:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:45:03.583

为此使用 jquery

```
$(document).ready(function(){   
        if($('a[href="google.com"]').length != 0)
        {
            alert("found !");
        }
}); 
```

# ruby-on-rails - ImageMagick 多行文本和背景图像

> ID：10353401
> 
> 赞同：5
> 
> 时间：2012-04-27T15:24:54.843
> 
> 标签：ruby-on-rails, image, image-processing, imagemagick, rmagick

我正在学习使用 ImageMagick，但是当我尝试生成如下示例的图像时遇到了问题：

![ImageMagick 示例](../Images/36d5979bee2b866f743000b5aacf43bb.png)

为此，我使用以下代码：

```
convert original.jpg -size 460x caption:'This is a multiline caption, This is a multiline caption, This is a multiline caption.' result.jpg 
```

这个命令生成了两个单独的图像，一个只有标题。你能帮助我吗？

* * *

**PS：**我将 RubyOnRails 与 ImageMagick 一起使用，但您可以建议使用 MiniMagick 或 Rmagick 的示例。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T16:04:42.807

这在 php 中有效，我不明白为什么它在 RubyOnRails 中不起作用：

```
convert original.jpg -size 460x -background transparent -fill black -pointsize 40 caption:'This is a multiline caption, This is a multiline caption, This is a multiline caption.'  -gravity center -composite result.jpg 
```

# php - 将文本追加和前置到字符串

> ID：10353404
> 
> 赞同：3
> 
> 时间：2012-04-27T15:25:11.093
> 
> 标签：php, regex, string

我希望能够在字符串中搜索某个单词，并将字符附加到该单词的每个实例中。

例子：

```
I like cats, cats are awesome! I wish I had cats! 
```

变成：

```
I like (cats), (cats) are awesome! I wish I had (cats)! 
```

我知道我可以使用

```
str_replace( 'cats', '(cats)', $string ); 
```

但我必须写两次“猫”。我想要一个只需要我写一次的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T15:27:54.107

```
$search = 'cats';
preg_replace('/' . preg_quote($search, '/') . '/', '($0)', $string); 
```

从[`preg_replace`文档](http://php.net/manual/en/function.preg-replace.php)中解释：

> 替换字符串可能包含表单的引用`$n`。每个这样的引用都将被第 n 个带括号的模式捕获的文本替换。`$0`指整个模式匹配的文本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T15:28:44.810

使用`preg_replace()`带有反向引用： http: [//php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

```
preg_replace("/cats/smi","($0)",$string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:03:17.997

你评论说：

> 我有一个巨大的纯文本值列表，我需要用括号括起来，我想让编写代码更容易。

既然您将要进行许多替换（昂贵的 cpu 方面），并且您只想缩短编码时间，为什么不通过 wrapping 来节省 CPU`str_replace()`呢？

```
function str_wrap($needle,$prefix,$suffix,$haystack) {
    return str_replace($needle, $prefix . $needle . $suffix, $haystack);
} 
```

根据[PHP 手册](http://php.net/manual/en/function.str-replace.php)：

> 如果你不需要花哨的替换规则（比如正则表达式），你应该总是使用 [str_replace()] 而不是 preg_replace()。

# sql - 如何在 HSQL 中返回最后插入（自动递增）的行 ID？

> ID：10353405
> 
> 赞同：5
> 
> 时间：2012-04-27T15:25:13.530
> 
> 标签：sql, insert, hsqldb, auto-increment

我正在使用 HSQL 数据库进行测试。我想要独立的数据库文件。但现在我很难在 HSQL 中获取最后插入的行 ID（自动增量 - 身份）。我怎样才能得到身份证？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-23T19:35:58.867

[http://www.hsqldb.org/doc/guide/ch09.html](http://www.hsqldb.org/doc/guide/ch09.html)

> 使用函数 IDENTITY() 可以使用函数 IDENTITY() 获得最后插入到连接标识列中的值，例如（其中 Id 是标识列）：
> 
> INSERT INTO Test (Id, Name) VALUES (NULL,'Test');
> 呼叫身份（）；

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-04-27T15:29:40.020

当您没有给出表模式时，很难编写查询来执行此操作，但类似于以下内容：

```
SELECT TOP 1 Id FROM [TABLENAME] ORDER BY Id DESC 
```

# delphi - 在调用 ExitProcess 后，如何判断我是否在 DLL_PROCESS_DETACH 期间被调用？

> ID：10353417
> 
> 赞同：4
> 
> 时间：2012-04-27T15:26:06.633
> 
> 标签：delphi, winapi, dll, process, delphi-5

我在 Delphi 中有一个单元（可以选择）提供单个全局对象：

```
var
   InternalThemeParkServices: TThemeParkServices;

function ThemeParkServices: TThemeParkServices;
begin
   if InternalThemeParkServices= nil then
      InternalThemeParkServices := TThemeParkServices.Create();
   Result := InternalThemeParkServices ;
end;

...

initialization
finalization
   FreeAndNil(InternalThemeServices);
end. 
```

我在进程关闭期间摧毁了自己。

> **注意**：另一个代码变体是：
> 
> ```
> var
>    InternalThemeParkServices: IThemeParkServices;
> 
> function ThemeParkServices: TThemeParkServices;
> begin
>    if InternalThemeParkServices= nil then
>       InternalThemeParkServices := TThemeParkServices.Create();
>    Result := InternalThemeParkServices ;
> end; 
> ```
> 
> 当程序关闭期间接口变量的引用计数变为零时，接口变量被隐式销毁

当我的对象不再使用时（即在其期间`destructor`），我调用各种 WinAPI 函数。

问题是，如果有人从 DLL 中使用我的类（我无法控制的东西），那么在以下过程中会调用任何东西：

```
finalization 
```

是 的德尔福道德等价物[`DLL_PROCESS_DETACH`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)。[在](http://blogs.msdn.com/b/oldnewthing/archive/2012/01/05/10253268.aspx)[进程终止时](http://blogs.msdn.com/b/oldnewthing/archive/2010/01/15/9948740.aspx)（例如） ，我不[应该做](https://forums.embarcadero.com/thread.jspa?threadID=63509)[各种事情。](http://blogs.msdn.com/b/oldnewthing/archive/2012/04/27/10298256.aspx) `DLL_PROCESS_DETACH` `CoCreateInstance`

我知道 Embarcadero 使用：

```
initialization 
   if not IsLibrary then
   begin
      ... 
```

我也许可以适应，改变我的代码：

```
var
   InternalThemeParkServices: IThemeParkServices; 
```

（使用隐式清理），以：

```
var
   InternalThemeParkServices: IThemeParkServices;
...
finalization
   if IsLibrary then
      Pointer(InternalThemeParkServices) := nil; //defeat reference counting and let the object leak
end; 
```

让它泄漏。

但这是最好的解决方案吗？我*认为*这意味着如果运行我的代码的 dll 被卸载（但不是在进程关闭期间），我将泄漏内存。如果 dll 被附加和分离，我每次都会泄漏。

我*真正*想要的是 Delphi在/*之前*`finalization`运行它的块。这可能吗？ *`ExitProcess``DllMain(DLL_PROCESS_DETACH)`*

 *## 奖金喋喋不休

[@pa](https://stackoverflow.com/users/30447/pa)破译[了 Delphi 应用程序关闭方案](https://stackoverflow.com/a/1185236/12597)：

> 关机的层次结构如下
> 
> ```
>  Application.Terminate()
>     performs some unidentified housekeeping of application
>     calls Halt()
> 
>   Halt()
>     calls ExitProc if set
>     alerts the user in case of runtime error
>     get rid of PackageLoad call contexts that might be pending
>     finalize all units
>     clear all exception handlers
>     call ExitprocessProc if set
>     and finally, call ExitProcess() from 'kernel32.dll'
> 
>   ExitProcess() 
>     unloads all DLLs
>     uses TerminateProcess() to kill the process 
> ```

在调用*后*卸载 DLL `ExitProcess`- 因为 Windows 是这样做的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T17:27:55.143

要判断是否在调用 ExitProcess 后的 DLL_PROCESS_DETACH 期间调用了您，您可以为您的库编写初始化代码，以便在`FreeLibrary`从主程序调用时执行您的代码。`ExitProcess`如果已经调用了“lpReserved”参数，则为“1” ，否则为“0”：

```
..
var
  SaveDllProcEx: TDllProcEx;

procedure DllMainEx(Reason: Integer; Reserved: Integer);
begin
  if (Reason = DLL_PROCESS_DETACH) and (Reserved = 0) then
    // Main app is still running, cleanup.

  if Assigned(SaveDllProcEx) then
    SaveDllProcEx(Reason, Reserved);
end;

initialization

if IsLibrary then begin
  SaveDllProcEx := DllProcEx;
  DllProcEx := @DllMainEx;
end; 
```

从[DllMain 入口点](http://msdn.microsoft.com/en-us/library/ms682583%28v=vs.85%29.aspx)：

> lpReserved 参数指示是否由于 FreeLibrary 调用、加载失败或进程终止而卸载 DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:46:29.120

> 我*真正*想要的是 Delphi`finalization`之前运行它的块`DllMain(DLL_PROCESS_DETACH)`。这可能吗？

不，这是不可能的。

如果您需要执行在此期间无法完成的关闭操作，`DllMain(DLL_PROCESS_DETACH)`则需要将导出的函数添加到执行最终确定的 DLL 中。然后，您应该要求 DLL 的客户端在卸载 DLL 之前调用此函数。`CoInitialize`这与/的模式相同`CoUninitialize`。*

# iphone - 暂时禁用更改事件 NSFetchedResultsController

> ID：10353428
> 
> 赞同：1
> 
> 时间：2012-04-27T15:26:59.473
> 
> 标签：iphone, ios

在核心数据中插入一个新实体后，一些属性正在改变。更改一个属性后，更改事件已经发送到 NSFetchedResultsController-delegate。

是否可以相互更改多个属性，并且只有在更改最新属性时，才会将事件发送到对象被修改的 NSFetchedResultsController-delegate。

# jquery - 使用jquery从asp.net中的grdiview控件获取所有字段的值？

> ID：10353430
> 
> 赞同：4
> 
> 时间：2012-04-27T15:27:06.307
> 
> 标签：jquery, asp.net, gridview

我正在使用 jquery 将 gridview 的选定数据发布到服务器上以便使用 jquery 插入，但我只得到一列（即 id），但我想要选定行的所有字段值。所以为此我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:40:05.747

好吧，给你的整行一个 css 类很容易。只需给该行一个实际上不会改变任何样式的 css 类。然后，使用 jquery 选择器获取所有输入：

```
$(".yourClass input") 
```

# c - sendto() : UDP 中的错误文件描述符 - IPv6

> ID：10353432
> 
> 赞同：1
> 
> 时间：2012-04-27T15:27:11.627
> 
> 标签：c, udp, ip, ipv6, sendto

```
static void app(const char *address, int port, char *name)
{
  int sock;
  struct addrinfo server;

  sock = init_connection(address,port,&server);
  char buffer[BUF_SIZE];

  write_server(sock, &server, name); /*error is here*/

  /* ..... */   
} 
```

连接功能

```
static int init_connection(const char *address, int port, struct addrinfo *server)
{
  int sockfd;

  struct addrinfo hints;

  hints.ai_family = AF_UNSPEC; /*ipv4 or ipv6 */
  hints.ai_socktype = SOCK_DGRAM; /* UDP mode */
  hints.ai_flags = 0;
  hints.ai_protocol = IPPROTO_UDP;

  char port_s[BUF_SIZE];
  sprintf(port_s,"%d",port); /* port in char* */

  if((getaddrinfo(address, port_s, &hints, &result)) != 0)
{
    perror("getaddrinfo()");
    exit(EXIT_FAILURE);
}

for (rp = result; rp != NULL; rp = rp->ai_next)
{
    //Creating the socket
    if((sockfd = socket(rp->ai_family, rp->ai_socktype, rp->ai_protocol)) == -1)
    {
        continue;
    }
    else
    {
        break;
    }
}

  return sockfd;
} 
```

sendto() ：问题出在这个函数中

```
static void write_server(int sockfd,struct addrinfo *client, char *buffer) /* write to server */
{
    if(sendto(sockfd, buffer, strlen(buffer), 0, client->ai_addr, sizeof (struct addrinfo)) < 0)
      {
        perror("sendto()");
        exit(EXIT_FAILURE);
      }
} 
```

主要的 ：

```
int main(int argc, char **argv)
{
  if(argc != 3)
  {
    printf("Usage : %s addr_serv port_number\n", argv[0]);
    return EXIT_FAILURE;
  }

  char name[20]="name";
  int port=atoi(argv[2]); 
  app(argv[1], port, name);

  return EXIT_SUCCESS;   
} 
```

write_server 函数有问题。我变成了 sendto() : Invalid argument 有人知道这个问题吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:28:56.757

您尚未为`sockfd`in分配值`init_connection`。您需要`socket`至少打一次电话。查看手册页以`getaddrinfo`获取更多信息：

```
 /* getaddrinfo() returns a list of address structures.
          Try each address until we successfully bind(2).
          If socket(2) (or bind(2)) fails, we (close the socket
          and) try the next address. */

       for (rp = result; rp != NULL; rp = rp->ai_next) {
           sfd = socket(rp->ai_family, rp->ai_socktype,
                   rp->ai_protocol);
           if (sfd == -1)
               continue;

           if (bind(sfd, rp->ai_addr, rp->ai_addrlen) == 0)
               break;                  /* Success */

           close(sfd);
       } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T16:17:38.597

您的 sockfd 从未初始化且无效。您没有在任何地方建立连接。建立连接时会返回 sockfd。

# mysql - MySQL：根据列值限制接收到的结果数| 组合查询

> ID：10353436
> 
> 赞同：12
> 
> 时间：2012-04-27T15:27:36.477
> 
> 标签：mysql, sql, greatest-n-per-group

我已经对这个问题进行了研究，但找不到解决方案。

我有以下查询，它给了我一个“some_id”列表：

```
SELECT some_id FROM example GROUP BY some_id 
```

我有以下查询，它将获取“some_id”等于数字的行的 5 个最新条目的列表。

```
SELECT * FROM example
WHERE some_id = 1
ORDER BY last_modified DESC
LIMIT 5 
```

如何仅使用一个查询从表“示例”中为每个“some_id”获取前 5 个最新条目？如果“some_id”的条目少于 5 个，则可以包含它们，如果这会使事情变得不那么复杂。

非常感谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T12:51:32.247

在查看以下帖子中的第一个答案时找到了答案：

[如何限制 SQL 中每个字段值的行数？](https://stackoverflow.com/questions/10421807/how-do-i-limit-the-number-of-rows-per-field-value-in-sql)

我已经对其进行了修改以满足我的特定需求：

```
SELECT * FROM
(
    SELECT *, @num := if(@some_id = some_id, @num := @num + 1, 1) as row_num,
           @some_id := some_id as some_id
    FROM example
    ORDER BY last_modified DESC
) as e
WHERE row_num <= 5 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-30T11:45:11.747

嗨，请使用`Group by`and `having clause`来检查每个 id 的限制..

```
SELECT * FROM `example`
GROUP BY some_id
HAVING count( * ) <= 5
ORDER BY last_modified DESC 
```

它将检查每一个`some_id`并检查是否`number of rows for some_id is <=5`显示结果。

# matlab - 双重到char matlab

> ID：10353439
> 
> 赞同：-1
> 
> 时间：2012-04-27T15:27:50.923
> 
> 标签：matlab

我想要以下内容：

> '这个变量是指针'

我有

```
a = get_param(....) 
```

=>这给了我：指针知道上面的字符串我做了：

```
strcat('This variable is',a) 
```

但这给了我：

> '指针中的这个变量'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T21:43:19.190

很难弄清楚你想要做什么。

当前标题“double to char matlab”表示您正在尝试将double 转换为字符串（char？）。

Matlab中有很多函数可以做到这一点：

```
a=3.1;

num2str(a)

sprintf('The value is %g', a ); 
```

我不确定您要达到什么目的：

```
strcat('This variable is',a) 
```

但我能想到的唯一方法是你实际上可以得到：

```
'This variable in pointer' 
```

是如果你设置了类似的东西：

```
a = sprintf('\bn pointer'); 
```

如果 a 设置为“指针”，则

```
strcat('This variable is',a) 
```

会导致：

```
'This variable ispointer' 
```

即使您在 is 之后添加了一个空格，您也会得到相同的结果，因为 strcat 在连接之前会修剪空白。

你最好使用：

```
['This variable is ' a] 
```

连接2个字符串。

# database - 名称和电子邮件地址的单独表格？

> ID：10353441
> 
> 赞同：0
> 
> 时间：2012-04-27T15:27:54.187
> 
> 标签：database, database-design, relational-database

自从我开始研究我的数据库以来，我一直在与最初的决定作斗争。我正在争论是否需要单独的电子邮件地址表。我的数据库如下所示：

```
people(id, first_name, last_name, email)
addresses(id, address, street, city, state, zip, latitude, longitude)
addresses_people(id, person_id, address_id)
phone_numbers(id, person_id, phone_number, type) 
```

我想我不需要单独的电子邮件地址表，因为我只想要一个人，不管他们是否有更多。我似乎遇到的问题是有些人没有电子邮件地址。很多时候，我会将孩子存放在 people 表中。现在，如果我将电子邮件地址放在一个单独的表格中以避免我将拥有数千个空电子邮件字段，这似乎是更好的设计。

现在改变它是一个巨大的麻烦，因为该应用程序已经在生产中，但现在改变它而不是一两年后会成倍地容易。将电子邮件更改为另一张桌子是否值得一两天？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:31:48.303

在我看来，你是过度工程。可选`email`字段很好。实际上有一个单独的表可能会引入更大的开销。

如果您希望用户拥有多个电子邮件，则使用单独表的唯一原因是为 1-N 关系建模。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:32:59.707

我相信没有必要改变它。大多数时候，让一些字段连续为空并不是什么大问题。事实上，它在大多数数据库中都很常见。数据库的设计应该主要取决于您尝试建模的对象，而不是仅仅出于存储原因将事物分成表，除非您有严重的存储限制或其他情有可原的情况。

请参阅[数据库设计 - 空白字段](https://stackoverflow.com/questions/2751489/database-design-empty-fields)，这也为您的问题提供了很多启示。

# javascript - 在 Firefox 中渲染内联 SVG

> ID：10353443
> 
> 赞同：5
> 
> 时间：2012-04-27T15:28:02.897
> 
> 标签：javascript, svg

我有一个我正在开发的网站，我们允许创建形状，我们使用通过 javascript 构建的内联 svg 来做到这一点。我有一个奇怪的问题，svg 在 Chrome 中正确呈现，但在 Firefox 中它会删除一部分 SVG。下面的代码是一颗星。在 chrome 中，这完美地显示出来。在 Firefox 中，我只能看到图像左上角的 25% 左右。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg">
<head></head>
<body>

<svg shape-rendering="" preserveAspectRatio="none">
<polygon transform="rotate(0 100 100)" points="256.53212826312154,13.412653125,314.88080229627076,201.3216034012431,499.6516034012431,201.3216034012431,348.91752881560774,320.0009404178177,382.9542553349448,507.9098906940608,256.53212826312154,389.2305536774862,130.11000119129832,507.9098906940608,164.14672771063536,320.0009404178177,13.412653125,201.3216034012431,198.18345422997237,201.3216034012431,256.53212826312154,13.412653125" fill="rgb(49, 48, 255)" stroke="black" stroke-width="2.49125px" style="position: absolute; ">
</polygon>
</svg>

</body>
</html> 
```

我不确定我们是否做错了什么，或者它是否是 Firefox 的问题。有趣的是，如果我将星形变小（比如这个星形的 1/4），它可以在 Firefox 中完美呈现。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T15:41:43.087

您需要为`<svg>`元素添加宽度和高度属性。width="100%" 和 height="100%" 可能很适合您的情况。

# gwt - GWT 表格小部件显示大量类似的小部件

> ID：10353445
> 
> 赞同：0
> 
> 时间：2012-04-27T15:28:06.657
> 
> 标签：gwt

我需要在表格中显示大量（1000+）类似的小部件（每个小部件包含照片 + 描述 - 总共约 400*400 像素） - 例如，每页 10 行和 2 列。我不需要选择、拖动、突出显示或使用这些小部件进行其他操作 - 只需显示它们。

FlexTable 似乎不支持分页。CellTable 可以，但它似乎太复杂了，最适合在不同的列中显示不同的数据，而我只需要在每个单元格中放置类似的小部件。

所以，我对使用什么表有点困惑，需要一些帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:25:50.320

Celltable 和家庭绝对是要走的路。从文档：

> Cell 小部件（数据展示小部件）是由 Cells 组成的用于显示数据的高性能、轻量级的小部件。例如列表、表格、树和浏览器。这些小部件旨在快速处理和显示非常大的数据集。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets)

他们支持服务器端分页......

我读到的你的情况。

# facebook - 没有重定向的 Facebook 注册插件

> ID：10353450
> 
> 赞同：1
> 
> 时间：2012-04-27T15:28:28.747
> 
> 标签：facebook, registration

我们目前正在使用 Facebook 注册插件来注册用户（我们也让他们在没有它的情况下注册）。

我们以前使用 FB 登录插件，但需要允许用户为我们的网站设置密码，而登录插件不允许这样做。

登录插件的工作方式是在授权时 FB javascript sdk 触发您的客户端代码可以订阅的事件。我想知道是否有办法获得类似的流程但使用注册插件。也就是说，不是在用户授权我们的应用程序时重定向到指定的 url，而是在 javascript 回调中捕获注册信息，以便我们可以通过 ajax 接口注册用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:04:33.697

注册插件不提供任何客户端回调来代替 redirect_uri。您可以使用 FB.login 来实现此目的，方法是处理事件并使用 authResponse 中的访问令牌和用户 ID 执行 Graph API 调用，以获取填充注册表客户端所需的信息。此注册表单可以要求输入密码，您可以将其与帐户以及用户 ID 相关联，以便将来从 Facebook 无缝登录。

# asp.net-mvc-3 - 使用 jQuery 不显眼的验证 asp.net MVC3 手动验证文本框

> ID：10353453
> 
> 赞同：1
> 
> 时间：2012-04-27T15:28:41.890
> 
> 标签：asp.net-mvc-3, jquery-validate, unobtrusive-validation

所以我有一个多步骤过程，允许用户检索忘记的密码。步骤是这样的，我的控制器中的每个步骤都有不同的操作：

1.  输入用户名和电子邮件
2.  输入密码问题答案
3.  如果一切顺利，通过电子邮件将恢复链接发送给用户

我尝试对所有事情都使用一个模型：

```
public class AccountForgotPassword
{

    [Required()]
    [DisplayName("Username")]
    public string UserName { get; set; }

    [Required()]
    public string Email { get; set; }

    [Required()]
    public string PasswordAnswer { get; set; }

} 
```

但是当我在第一个操作中检查 ModelState.IsValid 时，由于用户还不能输入他们的密码答案问题，它总是错误的，并且会产生一些有趣的代码来检查模型状态实际上是否有效但只是缺失密码答案，因为我还不知道用户是谁。

为了解决这个问题，我决定放弃类型化模型，只在我的操作中使用字符串参数。现在唯一的问题是我不能再使用通过模型绑定获得的简单验证连接。

话虽如此，有没有人知道一种简单的方法来手动将 jQuery 验证连接到各个输入，以便检查所需的规则？此外，这种接线是否允许我使用验证器生成的默认错误消息，或者我必须在接线时提供自己的错误消息？在我看来会这么容易吗：

```
@{
    ViewBag.Title = "Forgot Password";
}
<h2>
    Forgot Password</h2>
@using (Html.BeginForm())
{ 
    <p>
        @Html.Label("UserName", "Username")
        @Html.TextBox("UserName")
        @Html.ValidationMessage("UserName")
    </p>

    <p>
        @Html.Label("Email", "Email")
        @Html.TextBox("Email")
        @Html.ValidationMessage("Email")
    </p>

    <p>
        <input type="submit" value="Send Form" />
    </p>
}

<script type="text/javascript">
    $.validator.unobtrusive.addRule(..something here...);
</script> 
```

## 另外，如果有更好的方法可以做到这一点，请告诉我。

**更新**

对于发现这一点的其他人，我确实想出了如何手动添加规则。应该先阅读验证文档。假设上面的视图 html，脚本将是：

```
<script type="text/javascript">
    $(function () {
        $('#UserName').rules('add', {
            required: true,
            messages: {
                required: 'The username field is required.'
            }
        });

        $('#Email').rules('add', {
            required: true,
            messages: {
                required: 'The email field is required.'
            }
        });

        $.validator.unobtrusive.parse('form');
    });
</script> 
```

但是，在考虑了更多并考虑到 AFinkelstein 的回答之后，我想我会继续制作 2 个不同的视图模型，让框架为我完成工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:32:14.173

如果您首先验证用户名和密码，然后验证密码答案，我认为最简单的解决方案是拥有两个单独的视图模型。然后您仍然可以为每个部分使用适当的视图模型和验证。

# c# - 检测点击何时下载winforms WebBrowser组件中的文件

> ID：10353454
> 
> 赞同：2
> 
> 时间：2012-04-27T15:28:42.537
> 
> 标签：c#, winforms, webbrowser-control

我有一个简单的网页，我的 webbrowser 组件中只显示了 3 个链接：

```
<a href="/newpage1.html" id="el-1">Go to new page 1</a>
<a href="/newpage2.html" id="el-2">Go to new page 2</a>
<a href="/file.zip" id="el-1">Download file</a> 
```

我在元素列表上为 click 事件注册了一个事件处理程序

```
foreach (HtmlElement e in this.webBrowserMain.Document.GetElementsByTagName("a")){
    e.Click += this.SingleElementClickHandler;
} 
```

假设服务器端为文件 /file.zip 发送了以下标头

```
header('Content-type: application/zip');
header('Content-Disposition: attachment; filename="file.zip"'); 
```

如何编写 SingleElementClickHandler 以在下载文件而**不是**打开另一个网页时弹出带有文本“Hello”的消息框？

我不能使用任何第三方组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:40:28.787

简单地

```
this.webBrowserMain.FileDownload += 
    new EventHandler((x, y) => MessageBox.Show("Hello")); 
```

[在此处](http://msdn.microsoft.com/en-us/library/bb268220%28v=vs.85%29.aspx)和[此](https://stackoverflow.com/questions/6927909/wpf-webbrowser-how-to-detect-when-it-tries-to-download)SO 问题中进行更多搜索后发现了此问题（即使它是 wpf 组件而不是 winforms 组件）。

# api - 使用 Graph API 为网站创建“社交按钮”

> ID：10353465
> 
> 赞同：0
> 
> 时间：2012-04-27T15:29:08.083
> 
> 标签：api, facebook-graph-api, graph, social

现在有很多网站都有“社交按钮”，这意味着，当打开时，观众阅读的任何文章都会使用 Graph API 自动发布到他们的时间线，而无需按下按钮。

是否有任何教程/工具可以帮助我为自己的网站开发它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:40:20.427

从这里开始：[https](https://developers.facebook.com/docs/opengraph/) ://developers.facebook.com/docs/opengraph/ 您将主要关注在我想象的文章上发布“阅读”操作，文档中有示例

# sql - 如何在bash中将二进制数据插入sqlite3数据库？

> ID：10353467
> 
> 赞同：6
> 
> 时间：2012-04-27T15:29:17.180
> 
> 标签：sql, bash, sqlite, binary

我想在 bash 脚本中将二进制数据（png、jpg、gif 等）插入到 sqlite3 数据库中。
我使用独立的二进制文件`sqlite3`。如何编写 SQL 语句？
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T15:02:25.240

正如我在@sixfeetsix 答案的评论中提到的，插入数据只是问题的一半。一旦它进入，您需要将其取出。我们可以为此使用 xxd。

```
#A nice hubble image to work with.
echo 'http://asd.gsfc.nasa.gov/archive/hubble/Hubble_20th.jpg' > imageurl.txt
image=imageurl.txt
curl $image > image.jpg

#Insert the image, using hexdump to read the data into SQLite's BLOB literal syntax.
echo "create table images (image blob);" | sqlite3 images.db
echo "insert into images (image) values(x'$(hexdump -ve '1/1 "%0.2X"' image.jpg)');" | sqlite3 images.db 2>&1

#Select just the one image, then use xxd to convert from hex back to binary.
echo "select quote(image) from images limit 1 offset 0;" | sqlite3 images.db  | tr -d "X'" | xxd -r -p > newimage.jpg
eog newimage.jpg 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T14:37:01.520

这是一种方法。该文件被编辑成sqlite的二进制文字格式后`test.jpg`插入`foo`到数据库的表中：`foodb``hexdump`

```
[someone@somewhere tmp]$ sqlite3 foodb "create table foo (bar blob);"
[someone@somewhere tmp]$ echo "insert into foo values (X'`hexdump -ve '1/1 "%.2x"' test.jpg`');" | sqlite3 foodb 
```

**编辑**

在这里，我们看到数据以“全保真”方式存储，因为 .jpg 文件可以恢复：

```
[somneone@somewhere tmp]$ sqlite3 foodb "select quote(bar) from foo;" | perl -ne 's/([0-9a-f]{2})/print chr hex $1/gie' > bla.jpg 
[somneone@somewhere tmp]$ ll *.jpg
-rw-rw-r-- 1 someone someone 618441 Apr 28 16:59 bla.jpg
-rw-rw-r-- 1 someone someone 618441 Apr 28 16:37 test.jpg
[someone@somewhere tmp]$ md5sum *.jpg 
3237a2b76050f2780c592455b3414813  bla.jpg
3237a2b76050f2780c592455b3414813  test.jpg 
```

此外，这种方法节省空间，因为它使用 sqlite 的 BLOB 类型存储 .jpg。它不会使用例如 base64 编码对图像进行字符串化。

```
[someone@somewhere tmp]$ ll foodb 
-rw-r--r-- 1 someone someone 622592 Apr 28 16:37 foodb 
```

# html - SyntaxError：来自 DOCTYPE 标记的无效字符“\u0008”消息

> ID：10353468
> 
> 赞同：0
> 
> 时间：2012-04-27T15:29:19.007
> 
> 标签：html, content-type, doctype, invalid-characters

我正在设置服务器，但遇到了一个我从未见过的奇怪错误：

![在此处输入图像描述](../Images/50c51ed45a5e4aab431e07e558c3e786.png)

它抱怨源代码中的第 1 行，但这只是`DOCTYPE`标签！

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <!-- <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
    ... 
```

如您所见，我已经尝试将 设置`Content-Type`为`utf-8`. 这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:36:54.123

错误的实际原因不在第 1 行，例如 using`eval`也会导致在第 1 行报错。

在源代码中查找*BACKSPACE U+0008*字符。[此处](https://stackoverflow.com/questions/9955242/syntaxerror-invalid-character-u8203/9955265#9955265)描述了一种发现此隐形字符的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:09:39.663

如果在 line1 上添加注释会发生什么？

```
<!--empty line for the fun of it-->
<!DOCTYPE HTML> 
```

# c - C while 循环逻辑 ( y != ( 1 || 0) )

> ID：10353470
> 
> 赞同：2
> 
> 时间：2012-04-27T15:29:21.033
> 
> 标签：c

我有以下代码来选择要集成的 sin 或 cos，

```
while( x !=1 || y !=(1||0) ){

      printf("Sin (1) or Cos (0)?\n");    
      x = scanf("%d",&y);
      _flushall();

      if(y==1){
        printf("Sin set\n");
      }
      else if(y==0){
        printf("Cos set\n");
      }
} 
```

然而

```
 y!= (1||0) 
```

y == 0 永远不会评估为真，有人可以解释这里有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T15:31:33.107

你需要`(y != 1 && y != 0)`（或类似的，这取决于你在那里表达的真正意思）。运算符被`||`应用于操作数`1`和`0`。换句话说，`y != (1 || 0)`意思是“做`(1 || 0)`然后做`y != result`”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:31:10.153

您正在尝试有效地直接编写布尔代数，而 C 不以您提供的方式接受它。

```
while( x !=1 || y !=(1||0) ) 
```

应该

```
while( (x!=1) || ( (y!=1) || (y!=0) ) ) 
```

永远不要低估在 C 中使用多余括号的价值。优化器可能会优化代码以提高效率。

生成此错误的代码部分评估如下：LHS（左侧），RHS（右侧）

> LHS = y
> != (1||0) [给定定义]
> != (1) [b/c (1||0) = (1)]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:31:36.873

```
y != (0||1) 
```

相当于

```
y != 1 
```

因为`0||1`是`1`。如果需要，您将需要两次比较`y != 0`或`y != 1`.

# asp.net - 如何防止数据以科学格式显示？

> ID：10353471
> 
> 赞同：1
> 
> 时间：2012-04-27T15:29:22.913
> 
> 标签：asp.net, vb.net, excel

我有在我的 .net 应用程序中运行的这个 sql server 查询。

```
(CONVERT(VARCHAR(8), EventDate, 112)+ substring(RequestedBy,1,1)+right( '0000000' + convert( varchar( 7 ), ContactID ), 7 )) as Contacts 
```

它以以下格式生成以下结果：

20120731e0000001 20120731f0000002 20120731p0000003

这是我们想要的结果和格式。

问题是当我们单击导出图标将这些结果导出到 excel 时，第一个更改为科学格式，如 2.01E+08。

任何中间有 e 的日期，例如 20120731* *e* *0000001 都会变成科学数据。

其余的都很好。

任何想法如何解决这一问题？

**如果我在标签**部分粘贴了错误的标签，我想提前道歉，因为我不确定修复的来源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:31:41.320

当 Excel 打开您导出的文件时，格式正在发生。只需将列更改为具有字符串的“格式化文本”，以便它显示为原始格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:28:16.727

当您直接使用 Excel 打开导出的数据文件时，所有格式都设置为常规。在常规格式中，Excel 将格式应用于它识别为数字和日期的内容。因此，需要明确的是，问题不在于您的导出，而在于 Excel 默认如何读取您的数据。尝试以下方法来解决此问题。

导出为 CSV。然后，不要在 Excel 中打开 CSV，而是使用 Excel 的“**从文本中获取外部数据**”工具将数据导入空工作簿。您可以在此处指定将此字段视为 TEXT 而不是 GENERAL。

请注意，一旦 Excel 将数字（或日期）格式应用于单元格，单元格中的数据就会更改。新格式的应用不会带回您想要的数据。因此，您必须在Excel 打开文件*之前指定格式。*

# php - 如何在 Cookies 中保存用户喜欢的文章 ID？

> ID：10353472
> 
> 赞同：0
> 
> 时间：2012-04-27T15:29:37.303
> 
> 标签：php, cookies

假设您有一个博客，用户可以“点赞”和文章。在具有用户群的普通网站上，您的用户可能会登录，并且这些数据可能会存储在数据库中，但在诸如 Wordpress 博客之类的东西中，您的用户可能没有登录帐户，以跟踪他们是否“喜欢”文章与否，您可能会将其 id 存储到他们的 Cookie 中。至少大多数现有解决方案都是这样做的。

我的问题是到目前为止我看到的所有解决方案都会为用户喜欢的每篇文章创建一个新的 cookie。如果您有一个包含数百或数千篇文章的大型博客，并且假设用户喜欢 150 篇文章，那么每个请求都会发送 150 个 cookie。光是想到这个就让我害怕。

我的想法是将每个文章 ID 以 JSON 格式存储到同一个 cookie 中，或者可能只是 ID 用 | 分隔。

然后我必须将所有 ID 提取到一个数组或其他东西中，这样它会增加一些处理，但会减少 HTTP 请求

我很想听听关于如何做到这一点的其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:42:46.947

服务器需要知道吗？如果您将其纯粹存储在客户端，使用`localStorage`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:36:55.123

除非你这样做，否则你`JSON.stringify()` 需要用 | 分隔它们。然后将其分解成一个数组。如果您需要为每篇“喜欢”的文章存储多个数据，请使用另一个分隔符，将数据提取到一个多维数组中，您可以使用一两个循环处理该数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:40:22.697

我建议将喜欢的内容存储在 PHP 会话中而不是 cookie 中。使用会话您不会遇到与太多 cookie 有关的问题。此外，您不能信任 cookie 数据，因为它可能已被篡改，您每次访问时都需要对其进行验证。

# matlab - 更改绘图中的 xaxis 范围

> ID：10353474
> 
> 赞同：0
> 
> 时间：2012-04-27T15:29:42.000
> 
> 标签：matlab, label

```
clear all
depth1 = [0;2;3;4;5;6;8;10;12;14;16;18];
depth2 = [0;2;3;4;5;6;7;8;9;10;11;12];
depth3 = [0;4;6;8;10;12;14;16;18;20;22;24];
Depth = {depth1,depth2,depth3};

data1 = [0.8,0.797,0.796,0.795,0.795,0.795,0.797,0.798,0.8,0.802,0.803,0.802];
data2 = [0.764,0.752,0.743,0.745,0.746,0.736,0.710,0.656,0.584,0.574,0.577,0.601];
data3 = [0.760,0.750,0.745,0.714,0.593,0.354,0.257,0.272,0.295,0.327,0.368,0.379];
Data = {data1;data2;data3}';

coloring = {[0 0 0],[1 0 0],[0 0 1]}';
marking = {'+','o','s'};

for i = 1:length(Depth);
    fh = figure(1);
    plot(Depth{i},Data{i},'color',coloring{i},'Marker',marking{i});hold on;
    legend;
    set(fh,'color','white');
    set(gca,'TickLength',[.01 .01],'TickDir','out','box','on','XMinorTick','on',...
        'YMinorTick','on','FontName','Helvetica','FontSize', 14,...
         'Fontweight','demi','XColor','k','YColor','k');      
end 
```

此示例显示了一个绘图，其中包含在不同深度测量的三个不同变量，其中每个测量的深度各不相同。我想知道是否可以更改 xaxis 以使显示的范围从 0 到 1 变化，分别代表最小和最大深度。这可能吗？

我使用的当前方法是：

```
newDepth = cellfun(@(x)linspace(0,1,length(x)),Depth,'un',0); 
```

然后根据这个新的深度向量绘制数据。

```
for i = 1:length(Depth);
    fh = figure(1);
    plot(newDepth{i},Data{i},'color',coloring{i},'Marker',marking{i});hold on;
    legend;
    set(fh,'color','white');
    set(gca,'TickLength',[.01 .01],'TickDir','out','box','on','XMinorTick','on',...
        'YMinorTick','on','FontName','Helvetica','FontSize', 14,...
         'Fontweight','demi','XColor','k','YColor','k');      
end 
```

有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:17:29.020

我认为您以错误的方式规范化变量。x 轴值的当前归一化使用退化了每个向量`cellfun(@(x)linspace(0,1,length(x)),Depth,'un',0);`的元素之间的关系。`depth`我认为，正确的方法是，

```
 newDepth = cellfun(@(x)(((x)-(min(x)))'./((max(x))-(min(x)))'),Depth,'un',0); 
```

这样，未归一化的不同元素之间的相对间距`depths`也保留在归一化值中。用这个，让我知道。我确定使用获得的归一化图`newDepth = cellfun(@(x)linspace(0,1,length(x)),Depth,'un',0);`是不正确的。您只是没有意识到这一点，因为微小的错误缩放并没有在标准化图中非常明显地表现出来。

至于循环绘制图形的方法，我现在觉得很好。你到底觉得它有什么问题？

# android - 如何从json响应中获取jsonarry值

> ID：10353476
> 
> 赞同：0
> 
> 时间：2012-04-27T15:29:43.100
> 
> 标签：android, json

我得到这样的json响应

> {“内容”：“”，“面包屑”：“”，“副标题”：“”，“作者”：“”，“标题”：“fas”，“absolute_url”：“http://abrilemlondres.com。 br/599/voce-em-londres/fas", "commentsEnabled": false, "releaseDateTime": 1335524514, "image": ["http://abrilemlondres.com.br/m/up/40/00/553 .jpg"], "标签": "ff"}

以及如何从此响应中获取图像值......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:49:36.283

下面的代码片段为您提供了所需的值。

```
String jsonExample = "{\"content\": \"\", \"breadcrumb\": \"\", \"subtitle\": \"\",                \"author\": \"\", \"title\": \"fas\", \"absolute_url\": \"http://abrilemlondres.com.br/599/voce-em-londres/fas\", \"commentsEnabled\": false, \"releaseDateTime\": 1335524514, \"image\": [\"http://abrilemlondres.com.br/m/up/40/00/553.jpg\"], \"tags\": \"ff\"}";

JSONObject jsonobject = new JSONObject(jsonExample);

JSONArray array = jsonobject.getJSONArray("image");

System.out.println("$$$$$$$$$      "+array.getString(0)+"&&&&&&&&     " ); 
```

# templates - 用于 Xcode 4 中小段代码的类 Eclipse 编辑模板

> ID：10353477
> 
> 赞同：1
> 
> 时间：2012-04-27T15:29:43.560
> 
> 标签：templates, xcode4, editing

我习惯于使用 Eclipse，并且有一个我非常喜欢并且我真的认为可以节省时间的功能，即编辑模板。这是一个允许您预先编写模板代码的功能；每次你在源代码中写下它的名字时，你的模板就会被插入。

Xcode 中是否存在该功能或等效功能？我试图谷歌它并在设置中找到它，但我什么也没找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:32:49.617

查看“创建自定义代码片段”下的文档。除其他外，它说，“代码片段让您可以轻松输入源文本。您可以将标准或自定义代码片段拖到源文件中。您还可以键入完成快捷方式来输入片段。”

# c# - 元数据的 wcf 错误

> ID：10353478
> 
> 赞同：0
> 
> 时间：2012-04-27T15:29:55.460
> 
> 标签：c#, wcf

从控制台应用程序引用 WCF 服务时出现元数据错误。“从地址下载元数据时出错”。这是我的服务代码。我很感激任何帮助。

```
namespace WcfService1
{
    public class Service1 : IService1
    {
        public void test(string parm1, long parm2, Stream parm3)
        {

            string folder1 = @"C:\TEST";
            string fileName = Path.Combine(folder1, parm1);

            using (FileStream target = new FileStream(fileName, FileMode.Create, FileAccess.Write, FileShare.None))
            {

                    const int bufferLen = 65536;
                    byte[] buffer = new byte[bufferLen];
                    int count = 0;
                    while ((count = parm3.Read(buffer, 0, bufferLen)) > 0)
                    {
                        target.Write(buffer, 0, count);
                    }
            }

        }
    }
}

    namespace WcfService1
    {

        [ServiceContract]
        public interface IService1
        {
            [OperationContract]
            void test(string parm1, long parm2, Stream parm3);
        }
    } 
```

这是配置：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:32:13.590

这很可能是由于您将 a`System.IO.Stream`作为参数进行了测试。根据我的经验（有人可能会过来纠正我），您有两种选择：

1.  将请求包装在请求对象中（见下文）。
2.  删除 param1 和 param2 并仅使用 Stream-param。

服务接口：

```
[ServiceContract]
public interface IService1
{

        [OperationContract]
        void test(Request request);
} 
```

数据合约：

```
namespace WcfService1
{
    [DataContract]
    public class Request
    {
        [DataMember]
        public string Param1 { get; set; }
        [DataMember]
        public long Param2 { get; set; }
        [DataMember]
        public Stream Param3 { get; set; }
    }
} 
```

您可能需要对 Stream 的子集使用 [KnownType] 进行一些额外的工作，但我对此不太确定。以上内容至少应该让您远离在添加服务引用时看到的元数据错误。

# java - java.lang.NoClassDefFoundError: com.google.ads.AdView

> ID：10353479
> 
> 赞同：18
> 
> 时间：2012-04-27T15:30:00.120
> 
> 标签：java, android, eclipse, admob

我正在尝试在我的应用中加入 admob 广告。到目前为止，我已经在我的应用程序主要活动的 onCreate 方法中添加了以下代码......

```
 adView = new AdView(this,AdSize.BANNER,"my code number");
    adView.loadAd(new AdRequest()); 
```

该程序编译没有错误，但在运行时我收到消息`java.lang.NoClassDefFoundError: com.google.ads.AdView`。我在[这里](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)看到了对问题和解决方法的假设解释，但我看不出它如何适用于我的项目，因为我的项目中没有“lib”或“libs”目录。

根据 eclipse 的 SDK 管理器，我拥有我使用的所有东西的最新版本。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-17T08:23:22.317

我有类似的问题，但不必添加 libs 文件夹；我尝试了，但没有成功，然后删除它们，当我意识到我刚刚忘记导出包含的 Jar 存档时。

> **修复：**
> 选择 project settings > Java Build Path，然后选择*Order and export*。
> 
> 在这里，检查**GoogleAdMobAdsSdk** -package。

这应该解决*NoClassDefFoundError*问题。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-27T15:39:01.487

只需手动创建“libs”文件夹，然后在其中添加您的库。默认情况下，它们不存在

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-11T12:54:21.547

1.  项目-> 清洁
2.  项目设置 -> Java 构建路径。打开“订购和导出”选项卡。
3.  检查 GoogleAdMobsAdsSDK。

它对我有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-30T16:22:39.123

从 android 16 更新到 20 时出现此错误。

通过转到 Java Build Path、Order 和 Export 选项卡来解决，检查并移动 GoogleAdMobAdsSdk 就在我的源代码下。由于某种原因修复了它。

改回订单并没有破坏它。所以一定需要初始化一些设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-10T11:14:35.567

我有这个问题，也有这个问题：

[多个 dex 文件定义 Lcom/google/ads/AdRequest$ErrorCode 和多个 dex 文件定义 Lcom/google/ads/AdRequest$ErrorCode](https://stackoverflow.com/questions/22958979/multiple-dex-files-define-lcom-google-ads-adrequesterrorcode-and-multiple-dex-f)

尽管遵循列出的所有解决方案很多小时，但我可以让我的应用正常工作的唯一方法是在此处使用 AdMob 横幅示例：

[https://github.com/googleads/googleads-mobile-ios-examples/tree/master/admob/SmartBannerExample](https://github.com/googleads/googleads-mobile-ios-examples/tree/master/admob/SmartBannerExample)

并围绕它重新构建我的项目，将我的文件复制到该项目中。如果你被卡住了，试试看。

不知道为什么它起作用了，但现在它起作用了。我的项目中的某些东西非常错误。现在我可以继续我的工作了。我喜欢谷歌/安卓，但真的是一团糟！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-08T16:02:54.493

转到**属性 - Java 构建路径 - 订购和导出**并检查每个复选标记！这对我的项目起到了作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-10T16:02:05.413

更新：

选择项目设置 > Java 构建路径，然后选择订购和导出。

在这里，检查 google-play-services.jar。

这应该可以解决 NoClassDefFoundError 问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-08T08:58:40.497

仅在 Java Build Path 中添加“GoogleAdMobAdsSdk-6.4.1.jar”是不够的，您应该切换到 table:Order 和 export。在此处查看“GoogleAdMobAdsSdk-6.4.1.jar”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-27T17:11:52.607

看到这个答案[Android update 17似乎与外部罐子不兼容](https://stackoverflow.com/questions/10046298/android-update-17-seems-incompatible-with-external-jars/10046725#10046725)。

您需要将所有 jars 放在**libs的****libs**文件夹中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-21T07:59:07.837

就我而言，我需要单击“订购和导出”选项卡上的“Android 私人图书馆”

# ibm-mq - MQ 客户端连接远程 MQ 服务器权限不足

> ID：10353481
> 
> 赞同：4
> 
> 时间：2012-04-27T15:30:10.567
> 
> 标签：ibm-mq

现在我用c#使用websphere MQ客户端连接远程MQ服务器（7.0版本），出现权限问题，即运行MQ客户端应用的用户没有足够的权限访问qmgr。然后我使用'setmqaut'命令授予用户足够的权限并且它可以工作。

我认为这不是很方便，必须是更好的方法。可以通过在 MQ 服务器中添加用户的 IP 吗？但我不知道该怎么做。

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:50:36.287

WebSphere MQ 不执行任何认证。本地应用程序由操作系统进行身份验证，因此可以信任它们的 ID。（根据定义，如果您不能信任本地操作系统身份验证，那么整个服务器就会受到威胁。）就像本地连接一样，WMQ 相信远程连接的 ID 是真实的。由 WMQ 管理员决定采用何种级别的身份验证。在 WMQ v7 中有两种选择 - 使用 SSL/TLS 通道进行身份验证，或者使用通道出口进行身份验证。

无论哪种情况，通道的 MCAUSER 值决定了使用什么 ID 进行授权。如果 MCAUSER 留空，则通道将使用客户端发送的用户 ID。在您的情况下，您收到 2035 错误，因为客户端发送的 ID 不在管理 (mqm) 组中。如果您的客户端发送了 ID“mqm”（或在 Windows 上的“MUSR_MQADMIN”），连接就会成功。如果您的程序是 Java 或 JMS，那么选择提供的 ID 的能力是 API 的一部分。只需告诉 QMgr 你想成为谁。

如果您愿意允许远程连接在服务器上执行操作系统命令，那么只需将管理 ID 放在通道的 MCAUSER 中。（例如，UNIX/Linux 上的 MCAUSER('mqm') 或 Windows 上的典型 MCAUSER('MUSR_MQADMIN')。）但是，请注意，具有管理员权限的远程用户可以使用 QMgr 远程执行任意操作系统命令行代码。这是 WMQ 的一个特性，而不是一个错误，因此我们从不推荐在生产环境中这样做。事实上，我个人建议开发环境启用安全性。等到生产阶段才弄清楚如何验证连接以及需要哪些授权通常会导致不必要的部署延迟。

如果您想使用 IP 过滤来减轻该威胁，您可以迁移到原生包含此功能的 WMQ v7.1，或者使用[BlockIP2](http://mrmq.dk)等出口。这些解决方案中的任何一个都允许您创建通过 IP 地址、用户 ID 等过滤传入连接请求的规则。

请注意，在 v7.0 QMgr 上，默认情况下所有通道都不受保护。因此，即使您在一个通道上过滤传入请求，如果其他通道保持默认状态，任何人仍然可以以管理员身份连接和执行命令。要全面了解这一切，请查看[t-rob.net](http://t-rob.net/links)上的 Hardening WebSphere MQ 演示文稿。向下滚动到 v7.0 演示文稿。

# c++ - 为什么返回指向本地内存的指针不会崩溃？

> ID：10353483
> 
> 赞同：0
> 
> 时间：2012-04-27T15:30:19.433
> 
> 标签：c++, c

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我认为以下对 f() 的调用将获得指向编译器不会处理的本地内存的指针（根据教科书，这很危险）。但是，它仍然运作良好。不确定这是否安全。

```
#include <iostream>

using namespace std;

int * f()
{
   int  v[1000000];
   for (int i=0; i<1000000; i++) v[i]=i;
   cout<<v[7]<<endl;
  return  v;
}

int main()
{
   int * v = f();
   cout<<v[7]<<endl;
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:35:27.947

有趣的问题。您的代码可能在某些平台上工作（或似乎工作）而在其他平台上失败。

您的代码似乎工作的原因是函数`f()`在堆栈上保留的内存已*释放*但在返回时没有*被擦除。*`f()`释放后，内存可供其他功能使用；但在另一个函数实际使用它之前，它可能不会被覆盖。

这里的其他一些人正确地指出您的代码会引起未定义的行为，从技术上讲，这是正确的。但是，您得到特定的未定义行为是有原因的，这就是我的答案。

在一些平台上，包括x86，在`f()`释放内存后`v[]`，第一个被重用的内存通常是之前保存的内存`v[999999]`。保留的内存可能需要很长时间才能`v[0]`被重用。因此，来自的数据`v[7]`仍然虚假地存在。

至少还有一个皱纹。一些实现，使用一些设置，可能会立即用随机数据覆盖所有释放的内存，以防范安全风险。（例如，如果`v[]`持有密码怎么办？随机数据会安全地将其擦除。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T15:31:53.310

`v`in的指针`main()`是返回后的悬空指针`f()`。取消引用悬空指针是**未定义的行为**，这意味着任何事情都可能发生：

*   它可能会崩溃
*   它可能会打印不正确的整数值
*   它可以打印正确的整数值

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T15:31:53.653

因为它是未定义的行为，而未定义的行为并不一定意味着崩溃。
这当然是不安全的。
未定义的行为意味着所有安全赌注都已关闭，实际上任何事情都可能发生，所以如果它没有崩溃并不意味着它是有效的。这是无效的，你不应该这样做！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:34:21.220

未定义的行为：它可以工作，或者崩溃，或者擦除你的硬盘，或者内爆到一个黑洞，或者和你的妻子一起逃跑。

不过有一件事是肯定的：它会导致你的课程不及格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T15:40:34.310

如其他答案所述，这是未定义的行为，因此您不能依赖它正常工作。它可能在某些平台或某些编译器上工作正常，但在其他编译器上则不行。你'侥幸逃脱'主要是因为你的程序小而简单。您对程序的详细说明越多，您遇到问题的可能性就越大。

# c# - 日期时间转换

> ID：10353485
> 
> 赞同：0
> 
> 时间：2012-04-27T15:30:23.707
> 
> 标签：c#, calendar, asp.net-4.0

我正在尝试将字符串转换为 a`DateTime`并将其格式从`05/06/2012 12:00:00`to更改`2012-06-05 12:00:00.000`为在数据库（SQL Server 2008 R2）`DATETIME`列类型中搜索。原始日期来自日历！

我试过这个：

```
string Datereturn = row.Cells[9].Text; 

DateTime dategiven = DateTime.ParseExact(Dategiven, 
             "YYYY-MM-DD hh:mm:ss[.nnn]", CultureInfo.InvariantCulture); 
```

但它会弹出一个无效日期时间的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:33:53.970

解析`05/06/2012 12:00:00`：

```
DateTime dategiven = DateTime.ParseExact(Dategiven, 
         "dd/MM/yyyy hh:mm:ss", CultureInfo.InvariantCulture); 
```

要获取不同格式的字符串：

```
string newFormat = dateGive.ToString("yyyy-MM-dd hh:mm:ss"); 
```

我建议阅读MSDN 上的[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

还有解析和格式化之间的区别（关于`DateTime`）：

*   解析意味着获取一个表示日期时间的字符串并`DateTime`从中获取一个对象

*   格式化 a`DateTime`是获取一个`DateTime`对象并从中获取一个字符串，并根据需要进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:34:17.203

你能试试这个

```
DateTime dategiven = DateTime.ParseExact(Dategiven, "dd/MM/yyyy hh:mm:ss", CultureInfo.InvariantCulture); 
```

# objective-c - 如何从 CustomURLConnection 获取标签？

> ID：10353486
> 
> 赞同：0
> 
> 时间：2012-04-27T15:30:25.423
> 
> 标签：objective-c, tags, nsdictionary, nsdata

我正在使用此代码片段[http://snipplr.com/view/43115/](http://snipplr.com/view/43115/)，我想知道如何访问标签属性以对 connectionDidFinishLoading 中的数据执行不同的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:54:41.060

是的，但是该方法的参数是 URLConnection 类型，而不是 CustomURLConnection。如果您知道该对象实际上是一个 CustomURLConnection，您可以重新转换它并提取“tag”属性：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    CustomURLConnection *myconn = (CustomURLConnection *)connection;
    NSLog(@"%@", myconn.tag);

    NSMutableData *dataForConnection = [self dataForConnection:(CustomURLConnection*)connection];
    [connection release];

    // Do something with the dataForConnection.
} 
```

# php - PHP将图像颜色更改为透明然后用作蒙版

> ID：10353489
> 
> 赞同：0
> 
> 时间：2012-04-27T15:30:45.090
> 
> 标签：php, image, image-processing

我正在尝试将图像的背景颜色从白色更改为透明，然后将其用作遮罩以覆盖另一张图像。（不能是透明的，因为另一部分被用作另一个图像的蒙版）......图层很有趣：）

完整代码：

```
<?
include '../includes/db.php';
include '../includes/checks.php';

$type = $_GET['t']; //shirt | shorts
$style = $_GET['s'];
$z = $_GET['z']; // home | away
$a = $_GET['a'];
$b = $_GET['b'];

$aR = hexdec($a['0'].$a['1']);
$aG = hexdec($a['2'].$a['3']);
$aB = hexdec($a['4'].$a['5']);
$bR = hexdec($b['0'].$b['1']);
$bG = hexdec($b['2'].$b['3']);
$bB = hexdec($b['4'].$b['5']);

// main top
$imgname = '../images/kits/test/'. $uTime .'.png';
$im = imagecreatetruecolor( 100, 100); 
$red = imagecolorallocate($im, $aR, $aG, $aB);
imagefill($im, 0, 0, $red);

$mask = imagecreatefrompng('../images/kits/test/6-space.png'); 
imagecopyresampled($im, $mask, 0, 0, 0, 0, imagesx($im), imagesy($im), imagesx($mask), imagesy($mask));
imagedestroy($mask);

$mask = imagecreatefrompng('../images/kits/test/4-shadows.png'); 
imagecopyresampled($im, $mask, 0, 0, 0, 0, imagesx($im), imagesy($im), imagesx($mask), imagesy($mask));
imagedestroy($mask);

$mask = imagecreatefrompng('../images/kits/test/1-tag.png'); 
imagecopyresampled($im, $mask, 0, 0, 0, 0, imagesx($im), imagesy($im), imagesx($mask), imagesy($mask));
imagedestroy($mask);

// design
$im2 = imagecreatetruecolor( 100, 100); 
$red = imagecolorallocate($im2, $bR, $bG, $bB);
imagefill($im2, 0, 0, $red);

$mask = imagecreatefrompng('../images/kits/test/5-logo.png'); 
imagecopyresampled($im2, $mask, 0, 0, 0, 0, imagesx($im2), imagesy($im2), imagesx($mask), imagesy($mask));
imagedestroy($mask);
imagecolortransparent($im2, imagecolorallocatealpha($im2, 0, 0, 0, 127));
imagealphablending($im2, false);
imagesavealpha($im2, true);
$white = imagecolorallocate($im2,255,255,255);
imagecolortransparent($im2, $white);

// merge and result
imagecopyresampled($im, $im2, 0, 0, 0, 0, imagesx($im), imagesy($im), imagesx($im2), imagesy($im2));
imagepng($im, $imgname);
imagedestroy($im2);
imagedestroy($im);
echo '<img src="', $imgname ,'">';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:54:11.850

Imagemagick 的几种方法（第二个示例来自[http://www.imagemagick.org/Usage/masking/](http://www.imagemagick.org/Usage/masking/)）

将图像中的所有白色更改为透明

```
convert input.jpg -matte -fuzz 1% -transparent rgb(255,255,255) mask.png 
```

更改连接到左上角像素的图像中的所有白色。

```
convert input.jpg -alpha set -channel RGBA -fuzz 1% -fill none -floodfill +0+0 white mask.png 
```

在 php 中使用如下：

```
exec("convert input.jpg -matte -fuzz 1% -transparent rgb\(255,255,255\) mask.png"); 
```

上面的命令将白色 rgb(255,255,255) 实际上 +- rgb 值的 1% 更改为透明

# javascript - 当用户将鼠标悬停在html文档中的静态图像上时如何显示谷歌地图

> ID：10353490
> 
> 赞同：1
> 
> 时间：2012-04-27T15:30:52.177
> 
> 标签：javascript, jquery, google-maps, onhover

我想知道当用户点击图像时在灯箱中显示谷歌地图。

例如：-

```
<img src="map_icon.png" alt="hover over image to show corresponding map" onclick="run_map_function();" /> 
```

我真的很想知道如何做到这一点。任何帮助都感激不尽！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:35:19.663

我不太确定是否可以使用灯箱插件，但请尝试使用 JqueryUi 对话框，它易于使用并且可以在几秒钟内设置 看看我的小提琴 [http://jsfiddle.net/theodore/trnZS/49 /](http://jsfiddle.net/theodore/trnZS/49/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:45:59.833

地图需要互动吗？如果没有，你应该看看使用静态地图 api：

[https://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

基本上，您可以使用静态地图 api 生成您想要查看的位置的图像，如下所示：[http://maps.googleapis.com/maps/api/staticmap?center=Brooklyn+Bridge,New+York, NY&zoom=14&size=512x512&maptype=roadmap&markers=color:blue%7Clabel:S%7C40.702147,-74.015794&markers=color:green%7Clabel:G%7C40.711614,-74.012318&markers=color:red%7Ccolor:red%7Clabel: C%7C40.718217,-73.998284&sensor=false](http://maps.googleapis.com/maps/api/staticmap?center=Brooklyn+Bridge,New+York,NY&zoom=14&size=512x512&maptype=roadmap&markers=color:blue%7Clabel:S%7C40.702147,-74.015794&markers=color:green%7Clabel:G%7C40.711614,-74.012318&markers=color:red%7Ccolor:red%7Clabel:C%7C40.718217,-73.998284&sensor=false)

如果您需要交互式地图，那么我建议使用 iFrame（这意味着为地图创建单独的页面）。您应该可以轻松地从灯箱中显示 iframe。

# css - CSS字体特征“SS05”是什么意思？

> ID：10353491
> 
> 赞同：0
> 
> 时间：2012-04-27T15:30:52.957
> 
> 标签：css

在[http://numbertext.org/linux/](http://numbertext.org/linux/)上写着，WikiPedia 使用 LinuxLibertine 字体特征“ss05”。

ss05 是什么意思？该字体功能在哪里定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:37:22.263

## 字体功能设置属性

此属性提供对 OpenType 字体功能的低级控制。它旨在作为一种访问未广泛使用但特定用例所需的字体功能的方式。'normal' 值意味着由于此属性，字形选择或定位不会发生变化。

```
/* enable small caps and use second swash alternate */
font-feature-settings: "smcp", "swsh" 2; 
```

功能标记值具有以下语法：

```
<feature-tag-value> = <string> [ <integer> | on | off ]? 
```

这是一个区分大小写的 OpenType 功能标记。正如 OpenType 规范中所指定的，功能标签包含四个 ASCII 字符。长于或短于四个字符或包含 U+20–7E 代码点范围之外的字符的标记字符串无效。用户代理不得使用通过将字符串截断或填充为四个字符而创建的功能标签。特征标签只需要匹配字体中定义的特征标签，它们不限于显式注册的 OpenType 特征。定义自定义功能标签的字体应遵循 OpenType 规范 [OPENTYPE-FEATURES] 中定义的标签名称规则。字体中不存在的特征标签将被忽略；用户代理不得尝试基于这些功能标签综合回退行为。

如果存在，则值指示用于字形选择的索引。值必须为 0 或更大。值 0 表示该功能已禁用。对于布尔功能，值为 1 启用该功能。对于非布尔特征，1 或更大的值启用该特征并指示特征选择索引。“on”值与 1 同义，“off”与 0 同义。如果省略该值，则假定值为 1。

**作者通常应尽可能使用“font-variant”及其相关子属性，并且仅在特殊情况下使用此属性，因为它的使用是访问特定不常用字体功能的唯一方式。**

尽管专门为 OpenType 功能标签定义，但将来可能会添加支持字体功能的其他现代字体格式的功能标签。在可能的情况下，为其他字体格式定义的功能应尝试遵循已注册的 OpenType 标记的模式。

### 例子

```
/* use small-cap alternate glyphs */
.smallcaps { -moz-font-feature-settings: "smcp=1"; }

/* convert both upper and lowercase to small caps (affects punctuation also) */
.allsmallcaps { -moz-font-feature-settings: "c2sc=1, smcp=1"; }

/* enable historical forms */
.hist { -moz-font-feature-settings: "hist=1"; }

/* disable common ligatures, usually on by default */
.noligs { -moz-font-feature-settings: "liga=0"; }

/* enable tabular (monospaced) figures */
td.tabular { -moz-font-feature-settings: "tnum=1"; }

/* enable automatic fractions */
.fractions { -moz-font-feature-settings: "frac=1"; }

/* use the second available swash character */
.swash { -moz-font-feature-settings: "swsh=2"; }

/* enable stylistic set 7 */
.fancystyle {
  font-family: Gabriola; /* available on Windows 7 */
  -moz-font-feature-settings: "ss07=1";
} 
```

来源：[http](http://dev.w3.org/csswg/css3-fonts/#propdef-font-feature-settings) ://dev.w3.org/csswg/css3-fonts/#propdef-font-feature-settings和[https://developer.mozilla.org/en/CSS/-moz-font-feature-settings](https://developer.mozilla.org/en/CSS/-moz-font-feature-settings)

# c# - 无法从泛型类型转换为接口

> ID：10353494
> 
> 赞同：7
> 
> 时间：2012-04-27T15:31:13.467
> 
> 标签：c#, generics

尝试将通用对象添加到 List<> 时出现错误。

它可能与协方差和逆变有关，但我不知道如何解决这个问题。我尝试使用*where T: IRegister*来限制我的泛型类型。

我有一个表示寄存器的接口，然后是两个表示 ByteRegister 和 DoubleWordRegister 的类。

```
public interface IRegister
{
    string Name {get;set;}
}

 public class ByteRegister : IRegister
{
...
}

public class DoubleWordRegister : IRegister
{
...
} 
```

然后我有另一个类，它代表所有相同类型的这些寄存器块。

```
public class RegisterBlock<T> where T:IRegister
{
   private IList<T> _registers;

 ... constructors, properties etc

    public void AddRegister(T register)
    {
        _registers.Add(register);
    }
} 
```

最后，我有一个 RegisterMap 类，用于定义寄存器块列表和块中的每个寄存器。

```
public class RegisterMap
{
    private List<RegisterBlock<IRegister>> _blocks;

    public RegisterMap()
    {
        _blocks = new List<RegisterBlock<IRegister>>();

        RegisterBlock<ByteRegister> block1= new RegisterBlock<ByteRegister>("Block1", 0);
        block1.AddRegister(new ByteRegister("Reg1"));
        block1.AddRegister(new ByteRegister("Reg2"));
        _blocks.Add(block1);

        RegisterBlock<DoubleWordRegister> block2= new RegisterBlock<DoubleWordRegister>("Block2", 10);
        block2.AddRegister(new DoubleWordRegister("Reg3"));
        block2.AddRegister(new DoubleWordRegister("Reg4"));
        block2.AddRegister(new DoubleWordRegister("Reg5"));
         _blocks.Add(block2);
    }
} 
```

**但是我收到以下错误：**

`Error 20 Argument '1': cannot convert from 'RegisterBlock<ByteRegister>' to 'RegisterBlock<IRegister>'`在 _blocks.Add(block1) 线上，同样在 _blocks.Add(block2);

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T15:59:06.563

我注意到**你忘了问一个问题**。你只是陈述了一堆事实。我将假设您的问题是“为什么编译器会产生此错误？”

编译器会产生该错误，因为不产生该错误会导致运行时崩溃。假设我们允许：

```
List<RegisterBlock<IRegister> _blocks = new List<RegisterBlock<IRegister>>();
RegisterBlock<ByteRegister> block1= new RegisterBlock<ByteRegister>();
_blocks.Add(block1);  // Illegal, but suppose it was legal. 
```

现在是什么阻止了这一切？

```
RegisterBlock<IRegister> block1Again = _blocks[0]; 
```

没有什么。`_blocks`是一个列表`RegisterBlock<IRegister>`，所以当然`_blocks[0]`是类型`RegisterBlock<IRegister>`。但请记住，当然列表中的第一项实际上是一个`RegisterBlock<ByteRegister>`.

现在是什么阻止了这一切？

```
block1Again.AddRegister(new DoubleWordRegister())? 
```

没有什么。`block1Again`是类型`RegisterBlock<IRegister>`，它有一个方法`AddRegister(IRegister)`和`DoubleWordRegister`实现`IRegister`。

因此，您只需将双字寄存器放入只能包含字节寄存器的块中。

显然这并不安全。在编译时唯一可以将其设为非法的地方是第一步；首先，协变转换是不合法的。

顺便说一句，您的问题每天在这里经常被问好几次。今天早上两次：

[实现嵌套的通用接口](https://stackoverflow.com/questions/10352587/implementing-nested-generic-interfaces)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T15:34:42.700

这确实是一个[**方差问题](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)。您的`RegisterBlock`班级可能需要另一个界面，也许是`IRegisterBlock`：

```
public class RegisterBlock<T> : IRegisterBlock
    where T : IRegister 
```

然后你可以创建一个列表`IRegisterBlock`：

```
private List<IRegisterBlock> _blocks; 
```

实际上，上周我在我们的代码库中遇到了类似的情况，这正是我解决它的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T15:41:42.860

在 C# 中，只有接口可以是协变或逆变的，因此您不能以您想要的方式显式标记您的`RegisterBlock<>`协变。`T`

但是，在这种情况下，您实际上并不*需要*协方差，您只需将两个集合对象声明为：

```
RegisterBlock<IRegister> block1= new RegisterBlock<IRegister> 
```

由于两者都`ByteRegister`和`DoubleWordRegister`实现`IRegister`，您可以将它们中的任何一个添加到`RegisterBlock<IRegister>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T00:58:16.970

也许如果你做了类似的事情。

```
ByteRegisterBlock : RegisterBlock<ByteRegister> 
```

这应该使您的代码正常工作，但是，您确实失去了一些灵活性。

# javascript - 从变量访问元素属性

> ID：10353496
> 
> 赞同：-4
> 
> 时间：2012-04-27T15:31:15.463
> 
> 标签：javascript, variables, properties

我有功能：

```
this.addNode = function(element){

            var context = this.obj.element;
         return context;    
} 
```

this.obj 是一个具有一些属性的对象。当我想从上面的变量中调用这些属性时，如何访问这些属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:24:25.450

我需要做一些假设，因为这个例子并不完全清楚。假设您在构造函数中有此代码并且您想引用`obj.<some-passed-name>`此对象，那么您不能使用`.`而是`[]`像这样

```
function SomeObj() {

  this.obj = { a: 1, b: 2 };

  this.addNode = function (element) {
    var context = this.obj[element];
    return context;    
  }
} 
```

然后你可以像这样使用它

```
var o = new SomeObj();
o.addNode('a'); // returns 1
o.addNode('b'); // returns 2 
```

但通常建议`obj`像这样隐藏实现（该属性）

```
function SomeObj() {

  var obj = { a: 1, b: 2 };

  this.addNode = function (element) {
    var context = obj[element]; // not using this.obj
    return context;    
  }
} 
```

如果你`obj`作为参数传递给构造函数，那就更简单了：

```
function SomeObj(obj) {
  this.addNode = function (element) {
    var context = obj[element]; // not using this.obj
    return context;    
  }
}

var o = new SomeObj({ a: 1, b: 2 });
o.addNode('a'); // returns 1
o.addNode('b'); // returns 2 
```

我希望我猜对了这个问题。

# google-app-engine - 是否可以在 Google App Engine 上使用 com.google.gwt.core.ext.Generator

> ID：10353498
> 
> 赞同：-1
> 
> 时间：2012-04-27T15:31:17.107
> 
> 标签：google-app-engine, gwt

我正在使用 GWT 和 Google App Engine ...

我使用 com.google.gwt.core.ext.Generator 在客户端加载动态 Presenter-Classes。

当我在本地测试它时它可以工作。但不在谷歌 App Engine 上... :-(

```
PresenterFactory factory = (PresenterFactory) GWT.create(ReflectiveFactory.class);
IDynamicPresenter p =  factory.newInstance("ch...NewsPresenter"); 
```

这应该在运行时绑定类。

我实现了以下代码： http: [//programmatica.blogspot.com/2007/10/classfornamefullyqualifiedclassnamenewi.html](http://programmatica.blogspot.com/2007/10/classfornamefullyqualifiedclassnamenewi.html)

是否可以在 GAE 上使用 com.google.gwt.core.ext.Generator？

最亲切的问候

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:01:17.133

我在没有运行时类转换的情况下编译了它——它可以工作！

问题是 IE-cache.html 文件中的 ClassCasting

-XdisableCastChecking 作为编译器标志

# jquery - Phonegap FileTransfer 和 JQuery Mobile JSON 响应

> ID：10353500
> 
> 赞同：0
> 
> 时间：2012-04-27T15:31:31.710
> 
> 标签：jquery, json, jquery-mobile, cordova

我需要专家的帮助。

我想将图片上传到我的 php 脚本，它可以工作。现在，我想在上传到我的 div #showdata 后取回 JSON 响应，但它不起作用:(

## 开始传输上传

```
 var options = new FileUploadOptions();
                options.fileKey="file";
                options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
                options.mimeType="image/jpeg";

                var params = new Object();
                params.message = pmsg;
                options.params = params;
                options.chunkedMode = false;
        var ft = new FileTransfer();
        ft.upload(imageURI, server, function(r) {
        document.getElementById('camera').innerHTML = "Upload successful: "+r.bytesSent+" bytes uploaded.";  
        $.mobile.hidePageLoadingMsg();

 // here get the Json response

    $('#showdata').html("<p>item1="+r.item1+" item2="+r.item2+" item3="+r.item3+"</p>");}, function(error) {
    document.getElementById('camera').innerHTML = "Upload failed: Code = "+error.code;              
    }, options); } 
```

你能帮我吗，我如何显示 JSON 结果。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:06:35.867

因此，在您的成功函数中，您将获得一个[FileUploadResult](http://docs.phonegap.com/en/1.6.1/cordova_file_file.md.html#FileUploadResult)，您将其称为“f”。那么 f 有一个名为“response”的属性，它为您提供来自 PHP 页面的响应。您必须查看响应并使用 JSON.parse() 将其转换为 Object。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T11:09:36.743

来自服务器 PHP 页面的响应：

```
return json_encode(array('item1'=>'value1', 'item2'=>'value2')); 
```

在 javascript 中解析 FileUploadResult：

```
try {
    var obj = JSON.parse(FileUploadResult.response); // Produces a SyntaxError
} catch (error) {
    console.log(error.message); // Handle the error - Unexpected token
} 
```

尝试使用评估：

```
eval('var obj=' + FileUploadResult.response); 
```

# c++ - 局部静态对象的静态销毁

> ID：10353501
> 
> 赞同：1
> 
> 时间：2012-04-27T15:31:31.740
> 
> 标签：c++, static, local, termination, destruction

帮助我理解这一点......看粗体。从标准 3.6.3 终止 (2)

> 2 如果函数包含已销毁的静态或线程存储持续时间的块范围对象，并且在具有静态或线程存储持续时间的对象的销毁期间调用该函数，则**如果控制流通过，则程序具有未定义的行为先前销毁的块作用域对象的定义**。同样，如果块范围对象在其销毁后被间接使用（即，通过指针），则行为未定义。

```
Manager& GetManager()
{
    static Manager localMan;
    return localMan;
} 
```

然后在别的地方...

```
{
   static User localUser;
   localUser.DoSomething(); //localUser calls GetManager and uses the reference returned.
} 
```

然后在用户析构函数中......

```
User::~User()
{
   GetManager().DoSomethingOneLastTime();
}

//Now lets say Main exits and static destruction begins.
//Somehow localMan is destructed before User.
//Then user calls the GetManager() function in it's destructor.
//What case is this defined, and what case makes this undefined? 
```

标准是否说如果使用 odr-use 规则静态创建的本地静态 localMan 对象被破坏，然后再次调用该函数（是否创建新的静态），这是未定义的？看起来它为定义的行为留出了空间，但如果它通过了被破坏对象的定义，则不是。

有人对此有明确的见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:04:02.140

我相信这里的关键词是

> 是否创建一个新的静态

如果这发生在静态对象的销毁过程中，并且会导致一些已经销毁的静态对象的重新创建，那么*它们*什么时候会被销毁？如果它导致循环怎么办？系统应该如何跟踪所有这些？可能的好处值得麻烦吗？

可能不会，因为语言标准明确决定不定义这一点。

# github - 找不到在 github 项目和用户页面上使用 markdown 的详细、具体的文档

> ID：10353513
> 
> 赞同：7
> 
> 时间：2012-04-27T15:31:49.957
> 
> 标签：github, markdown, github-pages

我正在将 github 页面添加到我的一些存储库和我的用户页面。对于许多网页，我想使用 Markdown 格式。

但是，由于我只能找到有关如何执行此操作的[模糊、不详细的](http://help.github.com/pages/)信息，因此我正在反复试验以弄清楚它是如何工作的。

真正的文档在哪里？血淋淋的细节？

* * *

[这](http://xlson.com/2010/11/09/getting-started-with-github-pages.html)是迄今为止我发现的最好的信息，上面写着：

*   使用特殊的分支名称`gh-pages`为项目 repo 创建站点
*   文件顶部的三行咒语是必要的：

    ```
    ---
    title: something
    --- 
    ```

*   后缀变为`.html`

但我还有很多关于细节的问题，例如：

*   我可以导入css文件吗？
*   那个“标题”宣传实际上是做什么的？
*   文件需要有什么后缀？

等等所以我真的很想查看所有功能的详细文档。

* * *

请注意，这个问题不是关于如何使用 Markdown 语法，而是如何利用 github 的魔力在用户和项目页面范围内从 Markdown 自动创建 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:58:10.090

只有带有扩展名的文件`.md`或`.markdown`将被翻译成 GitHub 用户页面上的 HTML。

根据我的尝试，*带有*扩展名且未`.html`翻译的文件。`.textile`

 *请注意，应避免使用 UTF8 编码。*

# sql-server-2008 - SQL Server 实例 ID

> ID：10353520
> 
> 赞同：2
> 
> 时间：2012-04-27T15:32:22.077
> 
> 标签：sql-server-2008, instance

我正在寻找一种从服务器中的存储过程中识别特定 SQL Server 实例的方法。我需要确保我的应用程序连接到该特定实例，而不是连接到具有相同名称/IP 地址的其他实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:34:31.470

你可以写：

```
select  @@ServiceName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:42:51.893

我会看一下[SERVERPROPERTY](http://msdn.microsoft.com/en-us/library/ms174396.aspx "服务器属性")函数 - 例如，您可以混合使用 InstanceName、MachineName、ServerName 或 ProcessID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:47:50.640

您应该考虑使用[@@SERVICENAME](http://msdn.microsoft.com/en-us/library/ms180056.aspx)函数。

这是来自[@@SERVICENAME MSDN 文章的描述](http://msdn.microsoft.com/en-us/library/ms180056.aspx)

> 返回运行 SQL Server 的注册表项的名称。如果当前实例是默认实例，@@SERVICENAME 返回“MSSQLSERVER”；如果当前实例是命名实例，则此函数返回实例名称。

[@@SERVERNAME](http://msdn.microsoft.com/en-us/library/ms187944.aspx)将返回数据库正在运行的服务器的名称，这也可能对您有所帮助。

使用示例：`SELECT @@SERVERNAME as 'Server Name', @@SERVICENAME AS 'Service Name'`

# objective-c - 为什么我的实体的 BOOL 类型属性即使设置为 NO 也返回 YES？

> ID：10353523
> 
> 赞同：0
> 
> 时间：2012-04-27T15:32:27.870
> 
> 标签：objective-c, ios, xcode, core-data

我的数据库中有一个名为“Me”的实体，它有一个名为“loggedIn”的 BOOL 属性。我将属性的默认值设置为 NO，如下所示：

![在此处输入图像描述](../Images/d7ce6bcc4d85bf09d88b8b259e35e5be.png)

只是为了确保它设置为 NO，我还以编程方式设置它，但它仍然在日志中显示为 YES：

```
NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Me"];

NSError *err;
NSUInteger count = [context countForFetchRequest:request error:&err];

if (count == 0) {
    NSManagedObject *me = [NSEntityDescription insertNewObjectForEntityForName:@"Me" inManagedObjectContext:context];
}
NSArray *fetchedObjects = [context executeFetchRequest:request error:&err];

[[fetchedObjects objectAtIndex:0] setValue:[NSNumber numberWithBool:NO] forKey:@"loggedIn"];
NSString *amIYesOrNo = [NSString stringWithFormat:@"%@", ([[fetchedObjects objectAtIndex:0] valueForKey:@"loggedIn"] ? @"YES" : @"NO")];

NSLog(amIYesOrNo); 
```

当它应该是 NO 时，amIYesOrNo 总是显示 YES。到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:36:15.780

valueForKey:@"loggedIn" 正在向您返回一个有效对象，然后您的 ?: 运算符正在检查它是否为非零，并且始终如此。您需要对 NSNumber 应用 boolValue 方法调用以获取它包含的内容。

# ruby-on-rails - 有没有办法使用 Capistrano 部署到 vagrant VM 中？

> ID：10353530
> 
> 赞同：21
> 
> 时间：2012-04-27T15:33:03.347
> 
> 标签：ruby-on-rails, deployment, capistrano, vagrant

我想在我的项目目录之外设置一个 vagrant 实例。有没有办法像我在真正的生产主机上那样使用 capistrano 将 Rails 部署到 vagrant VM 中？

我正在尝试将服务器用作“本地主机”，但我得到：

```
connection failed for: localhost (Errno::ECONNREFUSED: Connection refused - connect(2)) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-16T13:12:27.670

您还可以将 Vagrant 的 SSH 选项提供给 Capistrano（大部分`:ssh_options`直接转到 Net::SSH，[http](http://net-ssh.github.com/ssh/v1/chapter-2.html) ://net-ssh.github.com/ssh/v1/chapter-2.html ，请参阅“选项”）所以那里没必要弄乱你的真实 ~/.ssh/config

```
set :user, 'vagrant'
set :ssh_options, {port: 2222, keys: ['~/.vagrant.d/insecure_private_key']}

role :web, "localhost" 
... 
```

（当然，`insecure_private_key`除非防火墙适当，否则您不应该真正使用或默认 root/vagrant 密码，但原理保持不变。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-27T15:57:10.870

我想到了。如果其他人想知道：

1.  我创建了一个单独的文件夹并在那里进行了整个 Vagrant 初始化。
2.  我将 Vagrant 文件配置为使用桥接网络。
3.  我登录了我的 vagrant VM ( `$ vagrant ssh`) 并跑去`ifconfig`获取我的 IP 地址。
4.  我将该 IP 地址添加到我的 Capistrano 部署文件中。
5.  我将 vagrants ssh 信息传递给我的本地配置：`vagrant ssh-config >> ~/.ssh/config`
6.  我运行了部署，当提示输入 SSH 密码时，我使用了`vagrant`

有效。

# php - Imagick 3 writeImages（）函数不起作用

> ID：10353534
> 
> 赞同：3
> 
> 时间：2012-04-27T15:33:09.393
> 
> 标签：php, imagick

我在网上找不到任何错误，但自从从 2.1 切换到 Imagick 3 后，我无法以正确的方式使用 writeImages() 函数。图像已保存，但不再具有动画效果。我已经正确设置了框架，因为如果`echo $gif`我得到动画。

```
$gif = new Imagick();
$gif->setFormat("gif");

foreach ($files as $file) {
    $frame = new Imagick();
    $frame->readImage($file);
    $gif->addImage($frame);
    $gif->setImageDelay(1);
}

$path = "/any/path/will/do/animation.gif";
$gif->writeImages($path,true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:31:05.210

是 PHP 中的错误 [https://bugs.php.net/bug.php?id=61879](https://bugs.php.net/bug.php?id=61879)

# c# - 如何在 WPF 中强制 DataGrid 组顺序？

> ID：10353535
> 
> 赞同：1
> 
> 时间：2012-04-27T15:33:23.160
> 
> 标签：c#, wpf, datagrid

我有这样的代码：

```
StatusItems = new ObservableCollection<StatusItem> { };
StatusItemsGrouped = new ListCollectionView(StatusItems);
StatusItemsGrouped.GroupDescriptions.Add(new PropertyGroupDescription("GenericStatus"));
StatusItemsGrouped.SortDescriptions.Add(new SortDescription("GenericStatus", ListSortDirection.Descending)); 
```

基本上，我`DataGrid`基于名为`GenericStatus`. 一切都很好，除了排序。我现在想要实现的是按降序对组进行排序（就像我的代码一样），但是上面代码的问题是，一旦用户单击某个列，排序就会被破坏。

我想保留组排序，*但仍然允许用户排序*​​。用户排序基本上是我猜的次要排序，即我想要这个：`ORDER BY GenericStatus DESC, UsersColumnOfChoise ASC/DESC`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T17:11:36.953

我自己刚遇到这个问题，我的解决方案是拦截 Sorting 事件，让 ICollectionView 在 ViewModel 中进行排序，而不是依赖 DataGrid 来处理它。

XAML：

```
<DataGrid ItemsSource="{Binding StatusItemsGrouped}" Sorting="OnSorting_"/> 
```

XAML.CS：

```
private void OnSorting_(object sender, DataGridSortingEventArgs e)
{
    var viewModel = DataContext as ViewModel;
    e.Handled = true;                                 // prevent DataGrid from sorting
    viewModel.SortItemSource(e.Column);               // perform sorting
    e.Column.SortDirection = viewModel.SortDirection; // set sort direction icon on column header
} 
```

视图模型：

```
public class ViewModel 
{
    public ListCollectionView StatusItemsGrouped { get; set; }
    public ListSortDirection SortDirection { get; set; }
    public string SortColumn { get; set; }

    public void SortItemSource(string columnName)
    {
        if (String.Compare(SortColumn, columnName, true) == 0)
            SortDirection = ListSortDirection.Ascending;
        else
            SortDirection = ListSortDirection.Descending;
        SortColumn = columnName;
        using(StatusItemsGrouped.DeferRefresh()) {
            StatusItemsGrouped.GroupDescriptions.Clear();
            StatusItemsGrouped.SortDescriptions.Clear();
            StatusItemsGrouped.SortDescriptions.Add(new SortDescription(SortColumn, SortDirection));
            StatusItemsGrouped.GroupDescriptions.Add(new PropertyGroupDescription("GenericStatus"));
        }
        StatusItemsGrouped.Refresh();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:40:14.763

您可以尝试将每列单击设置为“命令” - 然后观察要执行的命令并将其添加为已排序的列，以及您的 GenericStatus。

创建一个命令存根：

```
private bool sortAscending;
private CommandStub _sortList;
public ICommand sortList {
    get {
        if (_sortList == null) {
           _sortList = new CommandStub();
           _sortList.OnExecuting += new CommandStub.ExecutingEventHandler(_sortList_OnExecuting);
        }

        return _sortList;
   }
}

void _sortList_OnExecuting(object parameter) {

    var sortColumn = (string)parameter;
    StatusItems.SortDescriptions.Clear();

    if (sortAscending) {
        // Always sort first by GenericStatus
        StatusItems.SortDescriptions.Add(new SortDescription("GenericStatus", ListSortDirection.Ascending));

        // Sort by the column clicked
        StatusItems.SortDescriptions.Add(new SortDescription(sortColumn, ListSortDirection.Ascending));
        this.sortAscending = false;
    } else {
        // Always sort first by GenericStatus
        StatusItems.SortDescriptions.Add(new SortDescription("GenericStatus", ListSortDirection.Descending));

        StatusItems.SortDescriptions.Add(new SortDescription(sortColumn, ListSortDirection.Descending));
        this.sortAscending = true;
    }
} 
```

每个列标题都有一个与之关联的命令，当用户单击排序时会调用该命令：

```
var h = new GridViewColumnHeader();
h.Command = sortList;
h.CommandParameter = "deviceName"; 
```

# c# - 在 DTE.ActiveDocument 更改时收到通知

> ID：10353536
> 
> 赞同：11
> 
> 时间：2012-04-27T15:33:23.843
> 
> 标签：c#, .net, visual-studio, visual-studio-2008

我正在编写一个 Visual Studio 2008 扩展。我希望每次 DTE.ActiveDocument 更改时都收到通知，因此我可以在自定义面板中更新某些内容，该面板执行与解决方案资源管理器类似的功能。我还没有找到发生这种情况时发生的任何事件。有这样的活动吗？

具体来说，我正在寻找类似的东西：

```
var dte = GetService(typeof(EnvDTE._DTE)) as EnvDTE.DTE;
dte.Events.DTEEvents.ActiveDocumentChanged += s => {
    // implies dte.ActiveDocument has changed value
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T20:41:28.257

我相信你正在寻找这个活动

```
_applicationObject.Events.WindowEvents.WindowActivated 
```

检查`GotFocus.Document == null`您是否只对文档激活更改感兴趣

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-21T15:03:39.693

你也可以实现[`IVsRunningDocTableEvents`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsrunningdoctableevents.aspx)，注册自己为监听器，然后在`OnBeforeDocumentWindowShow`切换到文档之前调用该方法。

```
class RdtEvents : IVsRunningDocTableEvents
{
    RdtEvents()
    {
        var rdt = Package.GetGlobalService(typeof(SVsRunningDocumentTable));
        uint evtCookie;
        rdt.AdviseRunningDocTableEvents(this, out evtCookie);
    }

    // ...

    int IVsRunningDocTableEvents.OnBeforeDocumentWindowShow(uint docCookie, int fFirstShow, IVsWindowFrame pFrame)
    {
        // ...
    }
} 
```

# jquery - 在 Object Javascript 中创建 EventHanlder

> ID：10353539
> 
> 赞同：0
> 
> 时间：2012-04-27T15:33:32.740
> 
> 标签：jquery, object, event-handling

我想知道这是否可以使用 jquery 或标准 javascript

```
function myObj (x,y)
{
 this.x=x;
 this.y=y;
 //above doesn't really matter much
 // real question below
 $(this).click(function(){
 //place some javascript fucnction in here to run when something happens
 });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:42:41.360

我不确定我是否理解你的问题！但是您可以像这样将自定义 jQuery 事件添加到您的代码中：

```
$('body').trigger('myevent'); 
```

然后，从代码中的其他地方，您可以监听此事件，并在它被触发时执行一些代码：

```
$('body').bind('myevent', function(){
     // code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:38:22.097

您的对象将如何捕获事件？至于您的处理程序，您可以`$(myObj).trigger('click')`从函数外部调用它

# regex - 列出与 R 中的完整路径模式匹配的所有文件

> ID：10353540
> 
> 赞同：30
> 
> 时间：2012-04-27T15:33:40.883
> 
> 标签：regex, r, path

我正在尝试获取与**完整路径**模式匹配的文件列表。到目前为止，我已经使用了 list.files() 但它没有用。

假设我们有以下目录组织：

```
results
   |- A
   |  |- data-1.csv
   |  |- data-2.csv
   |
   |- B
      |- data-1.csv
      |- data-2.csv 
```

然后是以下命令：

```
list.files(pattern='data-.*\\.csv', recursive=TRUE) 
```

将返回与模式匹配的所有文件。这可行，但是在使用**完整路径**模式时会出现问题。例如，如果我想从目录*results/A*获取所有 CSV 文件，我可以这样做：

```
list.files(pattern='results/A/data-.*\\.csv', recursive=TRUE) 
```

但是，这不起作用。不知何故，R 似乎无法将完整路径模式用作正则表达式。在这种情况下，解决方案可能是只使用*results/A*作为基本路径。但在更复杂的问题中，这是无法做到的。例如，在某些时候我们可能想要匹配仅包含字符的子目录：

```
list.files(pattern='results/[A-Z]+/data-.*\\.csv', recursive=TRUE) 
```

可以在R中做到这一点吗？

**更新：**使用临时解决方案一段时间后，我决定停止一次又一次地输入相同的内容。因此，我创建了一个[库](https://github.com/betabandido/exptools)来简化此任务。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-27T15:56:50.473

首先，请注意您没有使用正则表达式模式。你的第一个例子应该是：

```
list.files(pattern='data-.*\\.csv', recursive=TRUE) 
```

然后，内部的模式匹配似乎`list.files` 应用于文件基名（即，不包括目录路径），因此您可以将任务拆分为：

1.  仅查找与基本名称匹配的所有文件，返回它们的完整路径：

    ```
    basename.matches <- list.files(pattern='data-.*\\.csv', recursive=TRUE,
                                   full.names = TRUE)
    basename.matches
    # [1] "./results/A/data-1.csv" "./results/A/data-2.csv" "./results/B/data-1.csv"
    # [4] "./results/B/data-2.csv" 
    ```

2.  仅保留与预期目录匹配的那些：

    ```
    full.matches <- grep(pattern='^\\./results/A/', basename.matches, value = TRUE)
    full.matches
    # [1] "./results/A/data-1.csv" "./results/A/data-2.csv" 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T16:08:30.833

您不能只这样做，`list.files`因为它会遍历其中的每个元素`path`并将正则表达式应用于其中包含的文件。但是由于`path`参数 to`list.files`可以接受一个向量，你可以用它来解决你的问题。

```
dirs <- grep("[A-Z]+$",list.dirs("results",recursive=FALSE),value=TRUE)
list.files(dirs, "data-.*\\.csv", recursive=TRUE, full.names=TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T19:24:31.073

我认为有一个更简单的解决方案：

`Sys.glob(file.path(results, "[A-Z]", "data-*.csv"))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-28T16:41:32.017

我会用

```
paths <- list.files(results, pattern= glob2rx("*data-*.csv$*"), full.names=T, recursive=T) 
```

# c# - 使用 DateTime 时 INSERT INTO 语句中的语法错误

> ID：10353541
> 
> 赞同：1
> 
> 时间：2012-04-27T15:33:44.530
> 
> 标签：c#, ms-access, ado.net

我在 Insert INTO 语句中收到“语法错误，但我不知道原因。

我将该声明与我在该工作中找到的其他声明进行了比较，发现没有结构上的差异。唯一的区别是，在这一个中，我试图在我的 MS Access 数据库中保存一个 DateTime。

我在 MS Access 中为日期/时间设置了我的数据库字段，格式为 MM/DD/YY HH:MM:SS AM（或 PM）。我的 DateTime 格式设置相同。

当我设置一个断点并执行它时，我可以看到传递的 DateTime 格式是正确的，并且与 MS Access 中的一般格式相匹配。

我确定问题出在我身上，但如果我能看到它，我会很生气。这是我的代码：

```
//method to save user input to database
public static void SaveData(ProgramLoginBOL busObject)
{
    try
    {
        String sSQLCommand = "INSERT INTO ProgramLogin ( " +
            "UserName, DateTime) VALUES ('" + busObject.UserName + 
            "','" + busObject.DtDate + "')";

        if (aConnection.State == ConnectionState.Closed)
        {
            aConnection.Open();
        }

        OleDbCommand cmd = aConnection.CreateCommand();
        cmd.CommandText = sSQLCommand;
        // Execute the SQL command
        cmd.ExecuteNonQuery();
        aConnection.Close();

        MessageBox.Show("Data Saved");                 
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.ToString());
        MessageBox.Show("Error! Data was not saved.");
    }
} 
```

正如我所说，调试显示`busObject.DtDate`与 MS Access 日期/时间格式匹配

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:38:10.833

解决问题的一种方法是改用参数化查询。这样做会让提供者担心类型，并且您不必担心用单引号分隔字符串值（有助于使用 O'Donnel 之类的名称）或用 # 为值加上日期。作为奖励，它避免了任何 SQL 注入攻击。

做这个用？参数的占位符

```
 string sSQLCommand = "INSERT INTO ProgramLogin ( " +
            "UserName, DateTime) VALUES (?,?)" 
```

然后稍后添加参数

```
 cmd.Parameters.AddWithValue("?", busObject.UserName);
   cmd.Parameters.AddWithValue("?", busObject.DtDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:39:58.063

使用 Access，您必须用 # 字符将日期括起来。

因此，将您的命令更改为：

```
String sSQLCommand = "INSERT INTO ProgramLogin (UserName, DateTime) VALUES ('" + busObject.UserName + "',#" + busObject.DtDate + "#)"; 
```

像这样格式化您的日期字符串以获得最佳结果：

```
#2012-04-21 13:21:25# 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:41:12.330

您分配给访问日期/时间列的显示格式与查询中日期/时间值的正确字符串格式无关。

您可以在 DateTime 值上调用适当的重载`ToString`，以按照 Access 的要求对其进行格式化，或者，正如 SLaks 评论的那样，您可以使用参数。使用参数更安全，也意味着您无需担心值的格式。OleDb 提供者会为您处理这些问题。

# skype - 如何删除Skype检测号码？

> ID：10353542
> 
> 赞同：4
> 
> 时间：2012-04-27T15:33:46.117
> 
> 标签：skype

有没有办法通过包含任何头文件或任何代码来删除我网站上的 Skype 检测号码以便点击调用？请帮助，以便我可以删除它...

![在此处输入图像描述](../Images/9e783a4a93a2c3e05c6242a0fe0ba550.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T15:45:59.310

来自“[如何防止 Skype 突出显示电话号码](http://bacsoftwareconsulting.com/blog/index.php/web-development/prevent-skype-from-highlighting-phone-numbers/)”：

```
<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE" /> 
```

但是，我没有测试过，也无法在 Skype 的文档中找到信息（并不是说我努力过）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T18:11:41.520

Skype 概述的防止页面更改的方法是在文档标题中添加一个元标记，以告诉 Skype 组件不要触摸数字。但是，这并不可靠，根据我的经验，通常会被忽略。

与其依赖 Skype 的不可靠覆盖，我更喜欢的解决方案是让电话号码对访问者来说就像电话号码，但对 Skype 来说却不是。为此，我们可以在电话号码中间的范围内添加下划线，并将范围设置为不显示。代码：

```
<span style="display:none;">_</span> 
```

例子：

HTML 中的原始代码：

```
Phone:<span>+381113233309</span> 
```

添加下划线后的代码：

```
<span>+38111-<span style="display:none;">_</span>3233309</span> 
```

测试并且工作正常。:)

**对于 Wordpress：**我把它变成了一个简单的函数，可以进入主题的 functions.php 或添加一个易于记忆的短代码的功能插件，即文本可以插入任何电话号码中，但放置一个 [noskype] 短代码在数字的中间。

```
// ==============================================
//       PREVENT SKYPE CLICK-TO-CALL HIJACK
//       add [noskype] within the phone number
// ==============================================
function cc_noskype( $atts, $content = null ) {
return '<span style="display:none;">_</span>';
}
add_shortcode('noskype', 'cc_noskype'); 
```

享受

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T15:40:03.447

据[报道](http://l3rady.com/2011/01/21/how-to-stop-skype-replacing-telephone-numbers-on-your-web-design/)，这个css可以工作：

```
span.skype_pnh_container {display:none !important;}
span.skype_pnh_print_container {display:inline !important;} 
```

它适用于我的机器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:32:18.907

卸载浏览器插件/扩展将删除它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T15:51:03.680

Skype 注入 javascript“setTimeout”事件的 HTML。你可以用 CSS 隐藏它，它并没有真正从你的文档中删除它。防止来自 Skype Click 2 Call 的任何操作的最佳方法是在 setTimeout 操作开始之前销毁对象。

```
/* Destroy injected objects */
var intervalNumber = 12;
var objectDestroyerInterval = setInterval(function() {

  if(intervalNumber == 0) {clearInterval(objectDestroyerInterval);}

  if(window.SkypeClick2Call) {window.SkypeClick2Call = undefined;}

  intervalNumber--
}, 250); 
```

此脚本在 3 秒内检查 12 次，如果有任何 SkypeClick2Call 对象可用并将其销毁。如有必要，您可能希望增加该次数。您还可以启发自己使用此脚本来销毁浏览器可能注入的任何其他对象

**结果：**没有注入 SkypeClick2Call HTML，也没有记录 javascript 错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-07T23:56:04.280

```
function reformatPhoneNumberToDisabeSkypeToCall(){
    var processedNumber = $('#phone').text()
        .replace(/\-/g, "-&shy")
        .replace(/\ /g, "&nbsp");
    $('#phone').html(processedNumber);
} 
```

为我工作

# xml - 查找未嵌套在子节点中的文本节点

> ID：10353557
> 
> 赞同：0
> 
> 时间：2012-04-27T15:34:30.470
> 
> 标签：xml, xslt

我有以下xml：

```
<p>
  <tx>
    <ts>
      <mtr>
        <pos>
          <Part>Text1</Part>
        </pos>
      </mtr>
    Text2<hyph/>Text3
    </ts>
  </tx>
</p>
<p>
  <tx>
    <ts>
      Text4
    </ts>
  </tx>
</p> 
```

所以基本上我有一系列 p/tx/ts 与 ts 有时有可选的子节点。

现在我需要找到 p/tx/ts 正下方的所有文本节点，但不是那些嵌套在 ts 的子节点中的文本节点。在上面的示例中，我需要 text2、text3 和 text4 但不需要 text1（因为它嵌套在 mtr/pos/part 即 ts 的子节点中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:47:01.380

此 XPath 应返回您要查找的内容：

```
/*/p/tx/ts/text()[normalize-space(.)!=''] 
```

注意：添加第一个`/*`是因为您需要一个根元素才能使您的示例格式正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:38:16.787

这让我回到了我正在寻找的东西：

```
<xsl:template match="p">
  <xsl:for-each select="./tx/ts">
    <xsl:apply-templates select="child::text()" />
  </xsl:for-each>
</xsl:template> 
```

# javascript - 创建和填充 elements

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-04-27T15:34:32.857177 次This question shows research effort; it is useful and clear2This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

Firefox and Chrome let me create a `<style>` element and populate it, all from JavaScript. I could swear that in the past I've done that in IE (like, IE6), in different circumstances. But now I can't get IE (7 or 8; haven't tried 9) to let me set it at all.

I have this recollection of a "cssText" property, but now in the (mysteriously diminished; does anybody know what happened to the MSDN documentation site?) MSDN docs that only shows up as a part of the stylesheet API and not as a DOM element thing.

So: is it at all possible to create and populate a `<style>` element in Internet Explorer?

[Here](http://jsfiddle.net/3skkD/) is a trivial jsfiddle example, with the following jQuery code:

```
$('head').append($('<style/>', { html: 'div { color: red; }' })); 
```

Works fine in Firefox, Chrome, and Opera. (I guess I should try Android and iOS while I'm at it.)

*edit* — yes, I've tried setting "text" instead of "html", and it doesn't help. Trying to set "innerText" without jQuery also doesn't work.

[javascript](/tags/javascript "show questions tagged 'javascript'")[html](/tags/html "show questions tagged 'html'")[css](/tags/css "show questions tagged 'css'")4

## 1 回答 1

This answer is useful3

Here is how I've done this before. I've pretty much copied this straight out of some old code of mine, but if I remember correctly, the `styleSheet` property is only used by IE, and as you mentioned, that's when you need to use `cssText`:

```
var styleElem = document.createElement("style");
styleElem.type = "text/css";
styleRules = document.createTextNode(".someClass { color: red; }");
if(styleElem.styleSheet) {
 styleElem.styleSheet.cssText = styleRules.nodeValue;
}
else {
 styleElem.appendChild(styleRules);
}
document.getElementsByTagName("head")[0].appendChild(styleElem); 
```

Here's a [working example](http://jsfiddle.net/esDNG/1/) (tested in latest Chrome and IE6).

于 2012-04-27T15:43:03.653 回答

#### Related

[9](/questions/13019640 "Question score (upvotes - downvotes)")[javascript - 如何测试是否为函数提供了参数？](/questions/13019640)[1](/questions/13019649 "Question score (upvotes - downvotes)")[spring-mvc - 如何自动装配一些 bean 以使用 Spring MVC 3 自动注入？](/questions/13019649)[3](/questions/13019650 "Question score (upvotes - downvotes)")[asp.net - 如何在代码隐藏中更改 HTML 标签的 onclick 属性](/questions/13019650)[1](/questions/13019651 "Question score (upvotes - downvotes)")[ms-access - 自动生成电子邮件无法解析多个收件人](/questions/13019651)[6](/questions/13019653 "Question score (upvotes - downvotes)")[python - 将 YAML 文件转换为 python dict](/questions/13019653)[1](/questions/13019656 "Question score (upvotes - downvotes)")[graph-algorithm - 如果在邻居节点中找到目标，我们是否停止深度优先搜索？](/questions/13019656)[1](/questions/13019658 "Question score (upvotes - downvotes)")[c++ - 当字符串匹配某些内容时，如何在 qtextedit 中发出信号？](/questions/13019658)[1](/questions/13019660 "Question score (upvotes - downvotes)")[objective-c - @synthesize 中的 = 运算符是什么意思？](/questions/13019660)[2](/questions/13019661 "Question score (upvotes - downvotes)")[ffmpeg - ffmpeg - 转置然后应用水印](/questions/13019661)[2](/questions/13019668 "Question score (upvotes - downvotes)")[java - 数据存储类？](/questions/13019668)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：10353560
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# sql - 在 WHERE 中选择语法

> ID：10353564
> 
> 赞同：3
> 
> 时间：2012-04-27T15:34:54.093
> 
> 标签：sql, sql-server

如何`SELECT`在内部使用语法`WHERE`，例如我有以下代码：

```
SELECT 
    blah...blah..
    ...
WHERE  
(
  (APM_AlertsAndReportsData.ApplicationName = 'instance: tomcat6_noram (SNMP)') AND 
  (APM_AlertsAndReportsData.ComponentName = 'Memory Heap Used (B)') AND 
  (APM_AlertsAndReportsData.StatisticData >= 1908932600)
) 
```

在这里，我正在比较大于或等于的值`1908932600`。我想使用它`SELECT`来代替，`1908932600`所以它会自动比较值而不是查询中的静态代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:37:20.597

您可以使用子查询，只需要在它周围加上括号：

```
APM_AlertsAndReportsData.StatisticData >= (SELECT ... FROM ...) 
```

请注意，它可能运行缓慢，具体取决于您在子查询中执行的操作。改用 JOIN 可能会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:37:59.937

您需要 WHERE 子句中的“相关子查询”：

```
WHERE  
(
  (APM_AlertsAndReportsData.ApplicationName = 'instance: tomcat6_noram (SNMP)') AND 
  (APM_AlertsAndReportsData.ComponentName = 'Memory Heap Used (B)') AND 
  (APM_AlertsAndReportsData.StatisticData >= (SELECT SomeValue FROM SomeTable))
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T15:41:49.310

这是一个简单的：

单值子查询

```
select * from Table1
where id = (select id from Table2 where Name = 'cool') 
```

多值子查询

```
select * from Table1
where id IN (select id from Table2 where Name LIKE 'A%')

select * from Table1
where id NOT IN (select id from Table2 where Name LIKE 'A%') 
```

相关子查询

```
select * from Table1
where exists (select 1 from Table2 where Table1.id = Table2.id) 
```

# objective-c - 如何检测 NSString 中以“@”或“#”开头的单词？

> ID：10353567
> 
> 赞同：8
> 
> 时间：2012-04-27T15:34:59.523
> 
> 标签：objective-c, ios, twitter, nsstring, uitextview

我正在构建一个 Twitter iPhone 应用程序，它需要检测您何时在 UITextView 的字符串中输入主题标签或 @-mention。

如何在 NSString 中找到所有以“@”或“#”字符开头的单词？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-27T15:43:16.090

您可以将[NSRegularExpression](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)类与 #\w+ 之类的模式一起使用（\w 代表单词字符）。

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"#(\\w+)" options:0 error:&error];
NSArray *matches = [regex matchesInString:string options:0 range:NSMakeRange(0, string.length)];
for (NSTextCheckingResult *match in matches) {
    NSRange wordRange = [match rangeAtIndex:1];
    NSString* word = [string substringWithRange:wordRange];
    NSLog(@"Found tag %@", word);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:41:29.973

您可以使用 componentsSeparatedByString: 将字符串分解为多个片段（单词），然后检查每个片段的第一个字符。

或者，如果您需要在用户键入时执行此操作，您可以为文本视图提供一个委托并实现 textView:shouldChangeTextInRange:replacementText: 以查看键入的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-30T15:53:08.013

为此制作了一个 NSString 类别。这很简单：查找所有单词，返回所有以 # 开头的单词以获取主题标签。

下面的相关代码段 - 也重命名这些方法和类别......

```
@implementation NSString (PA)
// all words in a string
-(NSArray *)pa_words {
    return [self componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
}

// only the hashtags
-(NSArray *)pa_hashTags {
    NSArray *words = [self pa_words];
    NSMutableArray *result = [NSMutableArray array];
    for(NSString *word in words) {
        if ([word hasPrefix:@"#"])
            [result addObject:word];
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:40:55.963

```
if([[test substringToIndex:1] isEqualToString:@"@"] ||
   [[test substringToIndex:1] isEqualToString:@"#"])
{
    bla blah blah
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T07:20:41.533

这是您可以使用的方法`NSPredicate`

你可以在 UITextView 委托中尝试这样的事情：

```
- (void)textViewDidChange:(UITextView *)textView
{
    _words = [self.textView.text componentsSeparatedByString:@" "];
    NSPredicate* predicate = [NSPredicate predicateWithFormat:@"SELF BEGINSWITH[cd] '@'"];
    NSArray* names = [_words filteredArrayUsingPredicate:predicate];
    if (_oldArray)
    {
        NSMutableSet* set1 = [NSMutableSet setWithArray:names];
        NSMutableSet* set2 = [NSMutableSet setWithArray:_oldArray];
        [set1 minusSet:set2];
        if (set1.count > 0)
            NSLog(@"Results %@", set1);
    }
    _oldArray = [[NSArray alloc] initWithArray:names];
} 
```

其中 _words、_searchResults 和 _oldArray 是 NSArray。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-18T13:12:54.113

使用以下表达式检测字符串中的 @ 或 #

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(#(\\w+)|@(\\w+)) " options:NSRegularExpressionCaseInsensitive error:&error]; 
```

# php - 如何优化php进程内存使用？

> ID：10353568
> 
> 赞同：10
> 
> 时间：2012-04-27T15:35:04.527
> 
> 标签：php, linux, wordpress, centos

我正在运行一个 wordpress 站点，每个 PHP 进程使用大约 200mb 到 250mb 的常驻大小内存。使用 16GB 的内存，服务器只能处理大约 70 个进程。通过将虚拟内存增加到 16GB，它可以处理 140 个。之后负载不断上升。如果在 10 分钟内有 200 个连接，则服务器负载在 3Ghz 四核至强处理器上达到 20！

我已经尝试停用所有插件，但这只会将每个进程的 PHP 内存使用量减少不到 10%。suPHP 告诉我哪个用户使用了这么多内存，但不告诉我 wordpress 代码的哪一部分。

关于如何减少内存使用的任何建议？还是我升级到 32GB 内存的唯一选择？

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
10585 nobody    16   0 2266m 237m 199m S 21.3  1.5   1:09.17 /usr/bin/php
10597 nobody    16   0 2257m 255m 226m S 15.3  1.6   0:17.56 /usr/bin/php 
```

pmap -d 的最大输出

```
000000000e8b8000   27580 rw--- 000000000e8b8000 000:00000   [ anon ]
00002b3772850000 2097152 rw-s- 0000000000000000 000:00009   [ shmid=0x2d1b803a ]
00002b37f2a62000   55108 r---- 0000000000000000 0fd:00000 locale-archive
mapped: 2320852K    writeable/private: 30012K    shared: 2097152K 
```

ipcs 输出

```
------ Semaphore Arrays --------

key        semid      owner      perms      nsems
0x000000a7 0          root      600        1
0x00000000 162529281  nobody    600        1
0x00000000 162562050  nobody    600        1
0x00000000 162594819  nobody    600        1
0x00000000 162627588  nobody    600        1
------ Message Queues --------

key        msqid      owner      perms      used-bytes   messages` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T21:21:09.277

我将总结 Lisa 为找到问题所做的工作：

*   使用 .检查单个 PHP 进程的内存布局`pmap -d <pid>`。输出显示该进程使用了​​大量共享内存：

> ```
> 00002b3772850000 2097152 rw-s- 0000000000000000 000:00009   [ shmid=0x2d1b803a ] 
> ```

*   用 . 检查共享内存区域`ipcs -m`。它表明有很多由用户nobody（Web服务器）创建的共享内存区域，这里只是其中的一部分：

> ```
> 0x00000000 117964807 nobody 600 2147483648 1 dest 
> 0x00000000 117997576 nobody 600 2147483648 1 dest 
> 0x00000000 118030345 nobody 600 2147483648 1 dest
> 0x00000000 118063114 nobody 600 2147483648 1 dest 
> ```

*   在 php.ini 中禁用 eAccelerator 并删除创建的共享内存区域：

> 对于 i 在 `ipcs -m | 剪切-d''-f2 | grep '^[0-9]'`; 做 ipcrm -m $i; 完毕

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:06:11.137

Rasmus Lerdorf 于 2010 年在 Confoo 举办了一次关于 PHP 性能的会议，他以 Wordpress 博客为例，这应该为您提供很好的工具来回答您的问题：

[http://talks.php.net/show/confoo10/1](http://talks.php.net/show/confoo10/1)

总结一下：

*   运行`phpinfo()`并禁用您不使用的 PHP 扩展。它们会占用大量内存（imagick、curl、...）
*   使用 included.so 扩展生成包含的图表。您可能会在您的 wordpress 设置中加载无用的功能。
*   运行基准测试`siege`。有时，微小的优化会对性能产生很大影响，因此请确保您有指标，以帮助您做出决定。
*   使用 callgrind 显示性能下降的地方。在我的一个项目中，我`md5()`用来散列我的 SQL 查询并缓存它们。使用 20% 的 CPU 时间的`md5()`调用。

如果可能的话，我肯定会从禁用 PHP 扩展开始。

# c++ - 便携式 __attribute__ ((__packed__))

> ID：10353569
> 
> 赞同：3
> 
> 时间：2012-04-27T15:35:10.117
> 
> 标签：c++, c, portability

是否有便携式等效物 `__attribute__ ((__packed__))`

（我所说的可移植性是指在 PC、Android 和 iPhone 上工作，无论架构如何）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:47:55.977

根据定义，`__attribute__`s 是不可移植的。如果您希望以特定方式获取数据，Plan9 解决方案通常是`unsigned char`在您的结构中使用数组：

```
struct foo {
    uchar data1[4];
    uchar other[2];
} 
```

通常不会有任何对齐，因为它基本上使用无符号字符。当然，如果你对疼痛有很高的容忍度，你总是可以使用一个`enum`偏移量：

```
enum { FOO_DATA1=0, FOO_OTHER=4, FOO_LAST=6 }; 
```

然后你可以像这样加载它：

```
unsigned char foo[FOO_LAST];
uint32_t n = htonl(val)
memcpy(foo+FOO_DATA1, &n, sizeof n)
memcpy(foo+FOO_OTHER, &some_16_bit_val, sizeof some_16_bit_val) 
```

只要您有胃口，它将完全便携。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:41:06.010

不。结构包装和填充不是 C++ 语言规范的一部分（它属于平台 ABI），因此任何处理它的东西都在语言之外。

# javascript - Sencha Touch 2 + PhoneGap + iPad：带有base64编码数据的视频：“操作无法完成”

> ID：10353570
> 
> 赞同：6
> 
> 时间：2012-04-27T15:35:15.577
> 
> 标签：javascript, android, ios, html, sencha-touch-2

我的应用程序（包装在 PhoneGap 中）同时运行在线和离线模式。我将使用 base64 编码的图像和视频存储在本地存储中。当我在浏览器上调试它时，它运行得很好，但在 iPad 上，它会在 javascript 提示中喊出“操作无法完成”。

我试过用纯 html 标签和 tru Ext.Video 放置视频。

我在这里遗漏了什么？谢谢

```
newhtml += "<video width='320' height='240' controls='controls'> <source src='data:video/mp4;base64,"+tmpStore.getAt(i).data.myPages[j].myProducts[k].myItens[0].fileData+"'  /></video>"; 
```

更新：

在 iPad 和 Android 3.0 原生浏览器中测试，结果是相同的“操作...”。测试有无自动播放和控制器（在视频/源标签中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:26:08.210

PhoneGap 无法识别**视频**标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:05:26.530

您忘记了元素`type="video/mp4"`上的 TYPE 属性 。`source`

出于某种原因，它在您制作时开始在 Android 上运行：`src='data:video/mp4;base64,AAAA'`[不要问为什么 AAAA，我不知道。在某处找到它，它帮助了我]

希望这可以帮助某人。

# c# - 如何判断何时按下/释放修饰键

> ID：10353572
> 
> 赞同：4
> 
> 时间：2012-04-27T15:35:26.103
> 
> 标签：c#, wpf, events, modifier-key

我希望能够知道何时按下或释放修改的键（`Ctrl`或）。`Shift`

基本上，用户可以在按下修改键的情况下执行多次击键，并且我不想在它被释放之前执行一个动作（想想带有+ +的[Emacs](https://en.wikipedia.org/wiki/Emacs)）。`Ctrl``X``S`

我试图用 PreviewKeyUp 和 PreviewKeyDown 来做到这一点，但这似乎处理普通键而不是修饰符。一旦我在事件中，我可以判断修改键是否被按下，但我无法判断修改键是否被释放并在事件之间重新按下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:42:05.473

```
protected override void OnPreviewKeyDown(KeyEventArgs e)
{
    // I just picked that key for a sample
    case Key.Tab:
        if (Keyboard.IsKeyDown(Key.LeftShift) ||
            Keyboard.IsKeyDown(Key.RightShift))
        {
            DoMyStuff();
        }

    // Similar things for Ctrl:

       if (Keyboard.IsKeyDown(Key.LeftCtrl) ||
           Keyboard.IsKeyDown(Key.RightCtrl))
        {
            ....
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:39:08.430

我才意识到`Key.LeftShift`，等的存在。所以我可以在按下时设置一个标志，并在释放键时检查该标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:47:45.007

最简单的方法是这样做，只要您想获得按下了哪些修饰符。

```
var kb = new Microsoft.VisualBasic.Devices.Keyboard();

var alt = kb.AltKeyDown;
var ctrl = kb.CtrlKeyDown;
var shift = kb.ShiftKeyDown; 
```

您可以从中创建一个方法，因此使用起来会更容易，如下所示：

```
using Microsoft.VisualBasic.Devices;

...

private static readonly Keyboard KEYBOARD = new Keyboard();

private static Keys GetPressedModifiers()
{
    var mods = Keys.None;

    if (KEYBOARD.AltKeyDown)
    {
        mods |= Keys.Alt;
    }

    if (KEYBOARD.CtrlKeyDown)
    {
        mods |= Keys.Control;
    }

    if (KEYBOARD.ShiftKeyDown)
    {
        mods |= Keys.Shift;
    }

    return mods;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:07:46.233

您可以在 KeyDown 或 PreviewKeydown 事件中执行类似的操作。

这里我只是举一个`Shift`+的例子`A`：

```
if (e.Key == Key.A && Keyboard.Modifiers == ModifierKeys.Shift)
{
    // Do something.
} 
```

# c# - .NET 中的视频会议

> ID：10353575
> 
> 赞同：7
> 
> 时间：2012-04-27T15:35:34.433
> 
> 标签：c#, .net, wcf, video-streaming

我正在向我们的一个软件添加聊天功能，我已经使用 WCF 启动并运行了聊天功能。我正在考虑尝试使用 WCF 再次添加视频聊天功能，基本上不是发送客户端消息，而是发送视频流。我想知道是否有人用 WCF 做过这个？是否非常推荐使用 WCF 执行此操作？

还有任何人使用（并推荐）任何组件（最好是开源）或库用于 .NET 4 中的视频会议。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:43:21.583

您可以使用以下方法：

1.  使用 avicap32.dll 和 COM-interop（或 DirectShow.NET）来捕获网络摄像头的视频。

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/7cd5e561-0e1e-46f7-92e0-800276ce9cf9](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/7cd5e561-0e1e-46f7-92e0-800276ce9cf9)

[http://www.c-sharpcorner.com/uploadfile/yougerthen/integrate-the-web-webcam-functionality-using-C-Sharp-net-and-com-part-viii/](http://www.c-sharpcorner.com/uploadfile/yougerthen/integrate-the-web-webcam-functionality-using-C-Sharp-net-and-com-part-viii/)

[http://www.codeproject.com/Articles/7637/DirectX-Video-Stream-and-frame-capture](http://www.codeproject.com/Articles/7637/DirectX-Video-Stream-and-frame-capture)

1.  使用流式传输通过 WCF 发送流。可以使用 IIS Live Smooth 流式传输：

[http://learn.iis.net/page.aspx/620/getting-started-with-iis-live-smooth-streaming](http://learn.iis.net/page.aspx/620/getting-started-with-iis-live-smooth-streaming)

一些允许您捕获视频的组件/库：

*   [http://www.fathsoft.com/videocapx.html](http://www.fathsoft.com/videocapx.html)
*   [http://easywebcam.codeplex.com/](http://easywebcam.codeplex.com/)
*   [http://directshownet.sourceforge.net/about.html](http://directshownet.sourceforge.net/about.html)
*   [http://www.aforgenet.com/framework/features/](http://www.aforgenet.com/framework/features/)

# wpf - WPF Windows 对接会影响最大化模式下的其他窗口

> ID：10353577
> 
> 赞同：0
> 
> 时间：2012-04-27T15:35:47.727
> 
> 标签：wpf, c#-4.0, windows-7, wpf-controls

我正在编写一个 WPF 项目，它实际上是一个运行在屏幕底部、任务栏上方的代码。我需要自动收报机：
1）直接位于任务栏上方
2）保持在所有其他窗口的顶部
3）如果任务栏设置为自动隐藏，则继续这样做，而不妨碍任务栏
4）使其其他最大化的窗口不会占用代码后面的空间。所以它的行为方式应该与任务栏相同，因为它占据了永久的桌面空间，其他应用程序无法使用。

目前，之前的开发人员只是通过查找屏幕大小来设置代码，然后通过将屏幕大小减去代码高度并将该值设置为 WPF 窗口的顶部来放置底部。但这不适用于上面的数字 3 和 4。数字 2 很简单，只需设置 TopMost="True"

我看过一些关于码头、粘性和拥挤群众的帖子，但我认为他们所做的并不完全符合我的需要。有谁知道如何完成我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:58:10.440

对于任何关心的人，事实证明我没有在寻找正确的术语。我想要的是一个 AppBar。我找到的解决方案在这里：stackoverflow.com/questions/75785/... 该解决方案完美运行。

# asp.net - 如何使用通用参考使用 ASP.net Web 服务和 WCF Web 服务

> ID：10353579
> 
> 赞同：1
> 
> 时间：2012-04-27T15:35:57.400
> 
> 标签：asp.net, wcf, web-services, soap, wsdl

我正在编写一个 C# 控制台应用程序，该应用程序必须使用通用代理来使用 ASP.net Web 服务和 WCF 服务。WCF 和 ASP.net Web 服务将实现相同的数据和服务契约以及相同的命名空间。我需要知道它是如何实现的。

提前感谢您的建议和意见。

@Pertu 感谢您的输入，我使用的是相同的方法，但是同一消费者无法同时调用这两种服务。下面是代码快照

=======消费者用来调用webservices的代理==========

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "4.0.30319.1")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Web.Services.WebServiceBindingAttribute(Name="BaseServiceSoap", 
Namespace="http://tempuri.org/")]

public partial class BaseService : System.Web.Services.Protocols.SoapHttpClientProtocol 
{

private System.Threading.SendOrPostCallback GetWeightOperationCompleted;

/// <remarks/>
public BaseService()
{
    this.Url = "http://localhost:53899/BaseService.asmx";
}
......

======== Consumer Code
//Below call to ASP.NEt webservice succeeds 

BaseService typeACalculator = new BaseService();
typeACalculator.Url = "http://localhost:54106/TypeA.asmx";
Console.WriteLine("Article for type A weighs: " +
    typeACalculator.GetWeight(articleForCalcA).ToString());

//Below call to WCF fails

BaseService WCFCalculator = new BaseService();

WCFCalculator.Url = "http://localhost:52224/TypeWCF35Calc.svc";
Console.WriteLine("Article for type WCF weighs: " +
    WCFCalculator.GetWeight(articleForCalcB).ToString());
Console.ReadKey();

======== Contract in WCF===============

 [ServiceContract]
 public interface IBaseServiceSoap 
 {
   [OperationContract]
    double GetWeight(Article article);
 }

====== Contract in ASP.NEt webservice================
/// <remarks/>

  [System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "4.0.30319.1")]
  [System.Web.Services.WebServiceBindingAttribute(Name="BaseServiceSoap", 
    Namespace="http://tempuri.org/")]
  public interface IBaseServiceSoap 
  {

   /// <remarks/>
   [System.Web.Services.WebMethodAttribute()]
   [System.Web.Services.Protocols.SoapDocumentMethodAttribute  
   ("http://tempuri.org/GetWeight",     
   RequestNamespace="http://tempuri.org/", ResponseNamespace="http://tempuri.org/",  
   Use=System.Web.Services.Description.SoapBindingUse.Literal, 
   ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]

   double GetWeight(Article article);
  } 
```

嗯，已经在路上一段时间了....这里是wsdls

===ASMX webservice 的 WSDL ==== 使用 WSDL.exe 创建

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" 
 xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
 xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://tempuri.org/" 
 xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
 xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" 
 xmlns:s="http://www.w3.org/2001/XMLSchema" 
 xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://tempuri.org/" 
 xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
      <s:element name="GetWeight">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="article" type="tns:Article" />
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:complexType name="Article">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="1" name="Id" type="s:string" />
          <s:element minOccurs="0" maxOccurs="1" name="Name" type="s:string" />
          <s:element minOccurs="0" maxOccurs="1" name="Characteristics" 
           type="tns:ArticleCharacteristics" />
        </s:sequence>
      </s:complexType>
      <s:complexType name="ArticleCharacteristics">
        <s:sequence>
          <s:element minOccurs="1" maxOccurs="1" name="Length" type="s:double" />
          <s:element minOccurs="1" maxOccurs="1" name="Height" type="s:double" />
          <s:element minOccurs="1" maxOccurs="1" name="Width" type="s:double" />
          <s:element minOccurs="1" maxOccurs="1" name="Weight" type="s:double" />
        </s:sequence>
      </s:complexType>
      <s:element name="GetWeightResponse">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="1" maxOccurs="1" name="GetWeightResult" type="s:double" />
          </s:sequence>
        </s:complexType>
      </s:element>
    </s:schema>
  </wsdl:types>
  <wsdl:message name="GetWeightSoapIn">
    <wsdl:part name="parameters" element="tns:GetWeight" />
  </wsdl:message>
  <wsdl:message name="GetWeightSoapOut">
    <wsdl:part name="parameters" element="tns:GetWeightResponse" />
  </wsdl:message>
  <wsdl:portType name="BaseServiceSoap">
    <wsdl:operation name="GetWeight">
      <wsdl:input message="tns:GetWeightSoapIn" />
      <wsdl:output message="tns:GetWeightSoapOut" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BaseServiceSoap" type="tns:BaseServiceSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetWeight">
      <soap:operation soapAction="http://tempuri.org/GetWeight" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="BaseServiceSoap1" type="tns:BaseServiceSoap">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetWeight">
      <soap12:operation soapAction="http://tempuri.org/GetWeight" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="TypeA">
    <wsdl:port name="BaseServiceSoap" binding="tns:BaseServiceSoap">
      <soap:address location="http://localhost:54106/TypeA.asmx" />
    </wsdl:port>
    <wsdl:port name="BaseServiceSoap1" binding="tns:BaseServiceSoap1">
      <soap12:address location="http://localhost:54106/TypeA.asmx" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>

===== WSDL of WCF webservice, generated after configuring the WCF webservice===
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:http="http://schemas.xmlsoap.org/wsdl/http/"  
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://tempuri.org/" 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" 
xmlns:s="http://www.w3.org/2001/XMLSchema" 
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://tempuri.org/" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
      <s:element name="GetWeight">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="article" type="tns:Article" />
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:complexType name="Article">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="1" name="Id" type="s:string" />
          <s:element minOccurs="0" maxOccurs="1" name="Name" type="s:string" />
          <s:element minOccurs="0" maxOccurs="1" name="Characteristics"  
           type="tns:ArticleCharacteristics" />
        </s:sequence>
      </s:complexType>
      <s:complexType name="ArticleCharacteristics">
        <s:sequence>
          <s:element minOccurs="1" maxOccurs="1" name="Length" type="s:double" />
          <s:element minOccurs="1" maxOccurs="1" name="Height" type="s:double" />
          <s:element minOccurs="1" maxOccurs="1" name="Width" type="s:double" />
          <s:element minOccurs="1" maxOccurs="1" name="Weight" type="s:double" />
        </s:sequence>
      </s:complexType>
      <s:element name="GetWeightResponse">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="1" maxOccurs="1" name="GetWeightResult" type="s:double" />
          </s:sequence>
        </s:complexType>
      </s:element>
    </s:schema>
  </wsdl:types>
  <wsdl:message name="GetWeightSoapIn">
    <wsdl:part name="parameters" element="tns:GetWeight" />
  </wsdl:message>
  <wsdl:message name="GetWeightSoapOut">
    <wsdl:part name="parameters" element="tns:GetWeightResponse" />
  </wsdl:message>
  <wsdl:portType name="BaseServiceSoap">
    <wsdl:operation name="GetWeight">
      <wsdl:input message="tns:GetWeightSoapIn" />
      <wsdl:output message="tns:GetWeightSoapOut" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BaseServiceSoap" type="tns:BaseServiceSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetWeight">
      <soap:operation soapAction="http://tempuri.org/GetWeight" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="BaseServiceSoap1" type="tns:BaseServiceSoap">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="GetWeight">
      <soap12:operation soapAction="http://tempuri.org/GetWeight" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="TypeA">
    <wsdl:port name="BaseServiceSoap" binding="tns:BaseServiceSoap">
      <soap:address location="http://localhost:54106/TypeA.asmx" />
    </wsdl:port>
    <wsdl:port name="BaseServiceSoap1" binding="tns:BaseServiceSoap1">
      <soap12:address location="http://localhost:54106/TypeA.asmx" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:45:22.250

Web 服务的所谓美妙之处在于，客户端是什么或服务的底层实现是什么并不重要。

使用您所说的相同合同以您想要或可以的任何方式（许多人会说使用 WCF）构建您的代理，然后根据需要调用服务；我假设 SOAP 地址不同，因此请确保将其参数化（在命令行参数中）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T15:31:12.307

是的，您可以使用相同的代码使用 WCF 服务和 ASP.NET WebService。

**第1 步 -**您需要先更改 WCF 服务以拦截肥皂标头。为此使用[WCFExtras](http://wcfextras.codeplex.com/)。

**第2**步 - 使用使用 ASP.NET Web 服务生成的代理。

# javascript - Colorbox 仅在 IE8 中不加载变量 URL

> ID：10353580
> 
> 赞同：0
> 
> 时间：2012-04-27T15:35:58.807
> 
> 标签：javascript, internet-explorer, coldfusion, colorbox

**附加信息 1**
控制台中未显示任何错误。此外，此问题仅在 Windows XP 上的 IE8 中发生。IE8 中的 Windows 7 运行良好。

**问题**
我要求 colorbox 打开一个复杂的 URL

```
$('.manage_locations').colorbox({
    innerWidth: '1100px',
    innerHeight: '505px',
    iframe:true,
    href:'/admin_console/assignments_groups_group_information_manage_locations.cfm?gid=3&amp;CFID=22701&amp;CFTOKEN=83690449'}); 
```

该系统内置于 ColdFusion。当我单击触发器`.manage_locations`时，它会启动颜色框，但加载器只是旋转并且从不加载 iFrame 内容。我已将其范围缩小到问题是 URL 中的数据之后的`?` 任何想法如何为 IE8 更正此问题？

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:02:36.110

通过将 fastIframe 属性设置为 false 以延迟加载图形的删除，直到 iframe 元素的 onload 事件触发，该问题已得到纠正。例子：

```
$('a.myIframe').colorbox({iframe:true, width:500, height:500, fastIframe:false}); 
```

# rss - 如何创建我的网站的 RSS 提要，以供其他人共享和自定义

> ID：10353583
> 
> 赞同：0
> 
> 时间：2012-04-27T15:36:20.417
> 
> 标签：rss

我想创建一个小部件，为我的网站的访问者提供复制我的 rss 提要的嵌入代码以分享到他们的网站的选项。此外，提供自定义选项。我特别想做这个网站的工作......

[http://prospectheights.patch.com/widgets/articles/quicklist](http://prospectheights.patch.com/widgets/articles/quicklist)

我不是强大的程序员，希望找到一个开箱即用的解决方案，但如果有人能指出我正确的方向，我将不胜感激！谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:43:24.043

您想使用 CSS 样式，可能使用一些动态 JavaScript 格式化布局并插入该样式。 [http://duckduckgo.com/?q=format+RSS+CSS+JavaScript](http://duckduckgo.com/?q=format+RSS+CSS+JavaScript)

jQuery在这里很方便：http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-build-an-rss-reader-with-jquery-mobile-2/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-build-an-rss-reader-with-jquery-mobile-2/)

[http://www.egrappler.com/rss-driven-dynamic-jquery-news-slider-plugin-dynamic-news/](http://www.egrappler.com/rss-driven-dynamic-jquery-news-slider-plugin-dynamic-news/)

[http://www.jquerynewsticker.com/](http://www.jquerynewsticker.com/)

[http://willcode4beer.com/ware.jsp?set=jquery_rss](http://willcode4beer.com/ware.jsp?set=jquery_rss)

# php - 隐藏“最新推文”中的@提及

> ID：10353585
> 
> 赞同：0
> 
> 时间：2012-04-27T15:36:31.037
> 
> 标签：php, javascript, twitter

我在网站上设置了“最新推文”功能。客户现在要求我隐藏@提及以阻止它们显示为“最新推文”。我看过 Twitter API，但老实说，我对此知之甚少，因此无法真正了解如何做到这一点。或者即使有可能。

我用来调用“最新推文”的这段代码是

```
<?php
            // Your twitter username.
            $username = "****";

            // Prefix - some text you want displayed before your latest tweet.
            // (HTML is OK, but be sure to escape quotes with backslashes: for example href=\"link.html\")
            $prefix = "";

            // Suffix - some text you want display after your latest tweet. (Same rules as the prefix.)
            $suffix = "";

            $feed = "http://search.twitter.com/search.atom?q=from:" . $username . "&rpp=1";

            function parse_feed($feed) {
                $stepOne = explode("<content type=\"html\">", $feed);
                $stepTwo = explode("</content>", $stepOne[1]);
                $tweet = $stepTwo[0];
                $tweet = str_replace("&lt;", "<", $tweet);
                $tweet = str_replace("&gt;", ">", $tweet);
                return $tweet;
            }

            $twitterFeed = file_get_contents($feed);
            echo stripslashes($prefix) . parse_feed($twitterFeed) . stripslashes($suffix);
        ?>​ 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:51:33.193

尝试，改变你返回：

```
if(!preg_match("/@(\w+)/", $tweet))
{
    return $tweet;
}
else
{
    return "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:32:14.770

似乎您想获取用户最新的推文，然后过滤掉 @'s。我会避免使用搜索调用，而是专注于[时间线调用](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)。

呼叫中的每个项目都附有这些字段

```
 "in_reply_to_status_id": null,
 "in_reply_to_status_id_str": null,
 "in_reply_to_user_id": null,
 "in_reply_to_user_id_str": null,
 "in_reply_to_screen_name": null, 
```

`"in_reply_to_status_id"`并且`"in_reply_to_status_id_str"`可能仍然存在`null`，它仍然可能是一个`@`答复。你要找的是`"in_reply_to_screen_name"`. 如果填写了姓名，`@`则为回复。

拨打电话时，只需忽略其中的项目`in_reply_to_screen_name != null`

看看[开发者控制台](https://dev.twitter.com/console)，你可以在其中进行测试、混合和匹配。

-- PHP中的示例代码☟</p>

```
<?php
$json = file_get_contents("http://twitter.com/status/user_timeline/twitterapi.json", true); 
$decode = json_decode($json, true); //PHP Array output from twitter JSON

$valid = array();
$count = count($decode); //counting the number of status
for($i=0;$i<$count;$i++){
    if(!$decode[$i]['in_reply_to_screen_name']){
        array_push($valid, $decode[$i]); 
    }
};

print_r($valid); //tweets that are not @ replies
?> 
```

# javascript - 淡入/淡出数组元素

> ID：10353587
> 
> 赞同：-2
> 
> 时间：2012-04-27T15:36:39.757
> 
> 标签：javascript, jquery

如何淡入和淡出数组元素？我在 JavaScript 中有一个包含三个元素的以下数组，并希望以几秒钟的延迟将它们逐个淡入 xor Out。

```
textlist = new Array( "news1", "news2","news3"); 
```

**更新：**数组项不是 id，这些是网站上出现的实际文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:42:01.423

如果字符串是元素 id：

```
textlist = ["news1", "news2","news3"];
$.each(textlist, function(index, value){
    $('#' + value).delay(1000 * index).fadeIn();
}); 
```

*   第一个元素在 1000 * 0 = 马上淡入
*   第二个元素在 1000 * 1 = 一秒后淡入。
*   第三个元素在 1000 * 2 = 两秒后淡入。
*   ...
*   ...
*   **n**元素在1000 * n = **n**秒后淡入。

[**现场演示**](http://jsfiddle.net/RwMy7/2/)

* * *

**更新：**

好的，您更新了数组中的元素不是`id`s 而是自由文本，因此您可以使用`:contains`选择器：

```
textlist = ["News 1", "News 2", "News 3"];
$.each(textlist, function(index, value) {
    $(':contains("' + value + '")').delay(1000 * index).fadeIn();
});​ 
```

[**现场演示**](http://jsfiddle.net/RwMy7/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T16:40:22.067

正如您所说，数组项是文本；所以你需要在页面的某个地方显示，例如在一个`<div id='newsPanel'/>`元素中。你可以试试：

```
var listTicker = function(options) {

    var defaults = {
        list: [],
        startIndex:0,
        interval: 3 * 1000,
    }   
    var options = $.extend(defaults, options);

    var listTickerInner = function(index) {

        if (options.list.length == 0) return;

        if (!index || index < 0 || index > options.list.length) index = 0;

        var value= options.list[index];

        options.trickerPanel.fadeOut(function() {
            $(this).html(value).fadeIn();
        });

        var nextIndex = (index + 1) % options.list.length;

        setTimeout(function() {
            listTickerInner(nextIndex);
        }, options.interval);

    };

    listTickerInner(options.startIndex);
}

var textlist = new Array("news1", "news2", "news3");

$(function() {
    listTicker({
        list: textlist ,
        startIndex:0,
        trickerPanel: $('#newsPanel'),
        interval: 3 * 1000,
    });
});​ 
```

[在jsfiddle](http://jsfiddle.net/kibria/Lsy77/1/)试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:50:30.670

我认为这些值是元素的 ID。如果是这样，请尝试以下方法，

```
function fadeInOut(textlist) {
    $('#' + textlist.splice(0, 1)[0]).fadeIn(1000, function() {
        $(this).fadeOut(1000, function() {
            fadeInOut(textlist);
        });
    });
} 
```

[**演示**](http://jsfiddle.net/skram/RwMy7/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T17:32:07.803

**HTML：**

```
<div id="container"></div> 
```

**Javascript：**

```
var textlist=new Array( "news1", "news2","news3");
var timer;

    function textFade(index){
       $("#container").fadeOut(200).html(text).fadeIn(200);
        timer = setTimeout(function() {
            textFade(text);

             },3000);
    }

    $(document).ready(function() {
        textFade(0);
    }); 
```

# c# - 如何将非托管 dll 中的所有方法导出到托管 c#？

> ID：10353588
> 
> 赞同：1
> 
> 时间：2012-04-27T15:36:42.083
> 
> 标签：c#, .net, dll, unmanaged

我有一个具有 10 个方法和 12 个属性的 c++ dll，是否有任何方法或任何应用程序可以导出要在 c# 中使用的方法的 p/invoke 格式？我已经使用 OLE 查看器来检查所有方法，例如：

> [id(0x00000013)]
> BSTR GetCPUID(
> short BeginAddress,
> short EndAddress);

但我不知道如何在 c# 中使用这个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:44:07.647

也许这篇文章可以帮助你

[http://www.codeproject.com/Articles/18032/How-to-Marshal-aC-Class](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)

让我知道这是否有帮助。

# c# - 如何处理 EF 4.3.1 设置修改了 Rowversion 行

> ID：10353589
> 
> 赞同：5
> 
> 时间：2012-04-27T15:36:42.247
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3

假设我们有：

```
public class Driver
{
    public int driverID { get; set; }
    public byte[] stamp { get; set; }
    public string name { get; set; }
    public string prename { get; set; }
} 
```

现在简而言之，我正面临这种情况。

```
 ...
 var myDriver = myCustomDBContext.Drivers.AsNoTracking()
                                         .Where(d => d.driverID == driverID)
                                         .SingleOrDefault();
 ...
 myDriver.name = "John";
 myDriver.prename = "Lennon";
 ...
 myCustomDBContext.Drivers.Attach(myDriver);
 myCustomDBContext.Entry(myDriver).State = EntityState.Modified;
 myCustomDBContext.SaveChanges();
 ... 
```

结果是

```
 The column cannot be modified because it is an identity, rowversion or 
     a system column. [Column name = stamp] 
```

是否有任何方法可以强制对分离的实体进行更新，或者没有将此*rowversion*列设置为已修改的解决方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T16:33:32.423

看起来您没有`stamp`在模型中将该属性指定为 rowversion，它只是一个二进制字段。您可以使用 Fluent API 指定它：

```
modelBuilder.Entity<Driver>().Property(d => d.stamp)
    .IsRowVersion()
    .IsConcurrencyToken(false); 
```

上面的代码适用于您不希望将`stamp`属性用作并发令牌的情况。（默认情况下，rowversion 是一个并发令牌，因此您必须明确禁用它。）如果您想将它作为并发令牌，那么您可以使用 Fluent API...

```
modelBuilder.Entity<Driver>().Property(d => d.stamp)
    .IsRowVersion(); 
```

...或带有数据注释：

```
[Timestamp]
public byte[] stamp { get; set; } 
```

这应该会阻止 EF 为该属性写入 UPDATE。

**编辑**

如果您使用 Database-First 策略，则该`[Timestamp]`属性不起作用。此属性仅适用于 Code-First 开发。

当您使用 Database-First 时，连接字符串包含一个引用 EDMX 文件中定义的 EDM 的元数据部分：

```
connectionString="metadata=res://*/Model1.csdl
                          |res://*/Model1.ssdl
                          |res://*/Model1.msl;
                          ...
                          ..." 
```

如果实体框架在连接字符串中找到此部分，它不会在模型属性上使用数据注释，也不会处理 Fluent API 中的任何代码（`OnModelCreating`根本不调用）。相反，它从嵌入和编译的 EDMX 文件加载映射定义。

这意味着，如果要将`stamp`属性定义为并发令牌，则*必须*在 EDMX 文件中执行此操作。在 XML 中，它看起来像这样：

在 SSDL 部分：

```
<Property Name="stamp" Type="timestamp" Nullable="false"
          StoreGeneratedPattern="Computed" /> 
```

在 CSDL 部分：

```
<Property Name="stamp" Type="Binary" Nullable="false" MaxLength="8"
          FixedLength="true"
          annotation:StoreGeneratedPattern="Computed"
          ConcurrencyMode="Fixed" /> 
```

您也可以在 Visual Studio 的模型设计器中定义它：`stamp`在设计器表面中标记实体中的属性，转到“属性”窗口并将“并发模式”设置为“固定”（并将“StoreGeneratedPattern”设置为“计算” ”）。

您还可以从连接字符串中删除元数据部分。但这实际上意味着您从数据库优先切换到代码优先开发。然后将尊重所有属性和 Fluent API，但不再是 EDMX 中的任何定义。

# ruby-on-rails - Link_to Ruby on rails - 未定义的方法“post_path”

> ID：10353596
> 
> 赞同：0
> 
> 时间：2012-04-27T15:37:08.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个代码：

```
<%= @r2_blog_posts = Refinery::Blog::Post.recent(2) %>
<%= link_to(@r2_blog_posts.first) do %>
    <%= image_tag(@r2_blog_posts.first.teaser_first_img) %>
<% end %> 
```

我在第二行收到此错误：#<#:0x0000000841c168> teaser_first_img 的未定义方法 `post_path' is Returns the src attribute of the first image inteaser

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:56:31.660

我没有使用过这个引擎，但我认为这些帖子 - 是一个嵌套或命名空间的资源。所以你需要知道第一个发布路径：`rake routes` 然后使用类似的东西：`link_to blog_post_path(@r2_blog_posts.first)`- 更改`blog_post_path`为实际路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:56:47.527

您必须在路线上定义类似

```
resources :posts 
```

或者

```
match 'post/:id' => 'posts#show', :as => :post 
```

# xdebug - 无法使用 vmware 来宾操作系统打开 xdebug 会话？

> ID：10353600
> 
> 赞同：0
> 
> 时间：2012-04-27T15:37:20.563
> 
> 标签：xdebug, komodo

我有一个带有网络服务器和 xdebug 2.1.2 的 vmware 来宾操作系统，我想在我的主机操作系统上使用远程调试器和 Komodo IDE 工作。我必须如何配置 xdebug 和 Komodo 才能使其工作？我试图在 remote_host 变量中添加我的主机 ip 和我的访客 ip 无济于事：

```
xdebug.remote_enable        On  
xdebug.remote_handler       dbgp
xdebug.remote_host          192.168.1.1 
xdebug.remote_log           /var/log/xdebug.log
xdebug.remote_mode          req
xdebug.remote_port          9000 
```

当我使用具有相同地址的 Komodo 代理选项时，它给了我错误，没有连接。通常我会使用反向外壳来隧道连接，但这是我本地主机上的虚拟机，所以我不需要隧道？Xdebug 已加载，我可以更改每个变量并重新启动我的网络服务器。我使用 Komodo 远程 ftp 来加载我要调试的 php 文件？

编辑：我无法远程登录到端口 9000，但我已将端口转发到主机端口 9000：

![在此处输入图像描述](../Images/24a50185b091adf971c66b0dad1cb5a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:24:24.210

“xdebug.remote_host”中的 IP 地址需要是运行 IDE 的机器的 IP 地址。确保您可以从运行 PHP 的 VM 远程登录到运行 IDE 的计算机上的端口 9000。不要使用 Komodo 代理选项，除非您自己启动了 dbgpproxy（我怀疑您已经这样做了）。您还应该将 Xdebug 升级到最新版本。

# java - 简单的短信支付系统

> ID：10353602
> 
> 赞同：-5
> 
> 时间：2012-04-27T15:37:34.947
> 
> 标签：java, netbeans, sms

> **可能重复：**
> [如何使用拆分短信的输出](https://stackoverflow.com/questions/10351910/how-to-use-output-from-a-splited-sms)

我有使用 smslib 阅读短信的代码。我想使用 Java 开发一个短信支付系统。我有一个包含两个表个人帐户和商家帐户的数据库。程序就像，发短信一样`pay*merchant*amount`。现在我需要知道如何拆分文本，但问题是如何使用已拆分的变量。我的意思是例如在增加商家帐户的同时将金额扣除在个人帐户中。如果您知道所需的查询，请告诉我和所需的编码。

这是用于拆分的代码 lam

```
 String myString =  (msg.getText());

 String[] a = myString.split("\\*");

    for (String b : a) {

          System.out.println(b); 
```

# javascript - 将某些内容附加到该 div 后，如何将 div 滚动到底部？

> ID：10353608
> 
> 赞同：2
> 
> 时间：2012-04-27T15:37:48.463
> 
> 标签：javascript, jquery

所以我目前正在使用[这个解决方案](https://stackoverflow.com/questions/270612/scroll-to-bottom-of-div)通过编写类似的内容将 div 滚动到底部

```
$(document).ready(function() {
    $('#comment_list').scrollTop($('#comment_list').scrollHeight)
} 
```

但是我注意到，当我尝试做`.append()`一些事情时，`#comment_list`然后执行上面的代码。它实际上并没有滚动到底部（也许`.scrollHeight`是静态值？）。

例如，这不起作用

```
$('#comment_list').append('<div>something</div>').scrollTop($('#comment_list').scrollHeight) 
```

这也不会

```
$('#comment_list').append('<div>something</div>')
$('#comment_list').scrollTop($('#comment_list').scrollHeight) 
```

我是否需要使用其他“技巧”或其他东西？

欢迎任何提示和建议。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:43:23.640

这应该可以解决问题：

```
$('#comment_list').append( '<div>something</div>' );
$('#comment_list').scrollTo( '100%' ); 
```

检查[这个 jsFiddle](http://jsfiddle.net/purmou/Bk5vV/)示例。

[来源](https://stackoverflow.com/questions/7114446/how-to-always-see-bottom-line-when-append-text-to-a-div)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:49:58.637

该`scrollTop`函数在`$(document).ready()`事件中调用。

`DIV`当您将内容附加到客户端时，不会触发此事件。

因此，在附加内容后，您需要`scrollTop`再次调用 以正确设置它：

```
$('#comment_list').append('<div>something</div>');
$('#comment_list').scrollTop('100%'); 
```

高温高压

# javascript - Javascript 方法超出范围

> ID：10353609
> 
> 赞同：0
> 
> 时间：2012-04-27T15:37:58.480
> 
> 标签：javascript, knockout.js

我对 javascript 非常陌生，我正在研究 knockooutjs 库以开始在我的应用程序中使用它。我已经用一些方法声明了一个命名空间和视图模型。在我调用 OnTemplateChange 之前，一切都按预期工作。然后 addIp 和 removeIp 方法不再起作用。

我在一个单独的文件中声明了一个命名空间：

```
var omega = omega || {}; 
```

这是我的视图模型在另一个文件中的代码。我正在从 FranchiseData 控制器获取 Json 数据，并且正在使用映射插件来创建 viewmodel 可观察属性。

```
$(function () {
    omega.franchiseInfo = {}

    $.getJSON("FranchiseData", function (data) {
        //using the mapping plugin
        omega.franchiseInfo = ko.mapping.fromJS(data);
        //declare an observable array for some custom logic to handle when json data is received from the server
        omega.franchiseInfo.Ips = ko.observableArray([]);

        if (data.ServerIps.length === data.ServerPorts.length) {
            for (var i = 0; i < data.ServerIps.length; i++) {
                omega.franchiseInfo.Ips.push({ ip: ko.observable(data.ServerIps[i]), port: ko.observable(data.ServerPorts[i]) });
            }
        }
        ko.applyBindings(omega.franchiseInfo);
    });

   onTemplateChange = function (value) {
    var template = $("#networks :selected").val();
    $.getJSON("FranchiseData", { network: template }, function (data) {
        omega.franchiseInfo = ko.mapping.fromJS(data);
        omega.franchiseInfo.Ips = ko.observableArray([]);         
}

save = function () {
    $.ajax({
        url: "/Home/Save",
        type: "POST",
        //data: ko.toJSON({ folderName: FolderName }),
        data: ko.toJSON(this),
        contentType: "application/json; charset=utf-8",
        dataType: 'json',
        success: function (result) { alert("result") }
    });
}

addIp = function () {
    if (omega.franchiseInfo.Ips().length < 10) {
        omega.franchiseInfo.Ips.push({ ip: ko.observable(), port: ko.observable() });
    }

}

removeIp = function () {
    if (omega.franchiseInfo.Ips().length > 1) {
        omega.franchiseInfo.Ips.pop();
    }
}
)} 
```

当调用 onTemplateChange 方法时，我再次进行映射，因为我无法使用页面加载时第一个 Json 调用中的可观察方法。此外 addIp 和 removeIp 不再起作用。我认为我的范围有问题，两次映射是错误的。

如果我尝试像这样声明特许经营信息视图模型的方法：

```
omega.franchiseInfo = {
        Ips: ko.observableArray([])
    }; 
```

Ips 数组在`$.getJSON("FranchiseData", function (data)`范围内未定义。

任何帮助将不胜感激。我非常坚持这一点。如果有什么不清楚的地方，我会做进一步的解释。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:40:32.683

在 $.getJSON( 我希望像 }) 或 }); 之后结束

此外，您已经将 omega.franchiseInfo.Ips 声明为 observableArray

那么你为什么不像这样 omega.franchiseInfo.Ips([]) 让它为空

# php - CodeIgniter CLI 给出 system_path 错误“路径似乎设置不正确。”

> ID：10353611
> 
> 赞同：1
> 
> 时间：2012-04-27T15:38:07.373
> 
> 标签：php, codeigniter, cron

我有一个 cron 任务设置来运行以下命令：

```
php /var/www/vhosts/examplesite.com/index.php cron processCategoryItemCount 
```

当我在我的生产服务器（通过 MediaTemple dv4 托管）上运行它时，ssh 窗口上会闪烁以下错误：

> 您的系统文件夹路径似乎设置不正确。请打开以下文件并更正：index.php

当我在我的开发 Mac 上运行 php CLI 命令时，我根本没有收到任何错误。

据我所知，我的 system_path 设置正确.. 这是片段。

```
/*
 *---------------------------------------------------------------
 * SYSTEM FOLDER NAME
 *---------------------------------------------------------------
 *
 * This variable must contain the name of your "system" folder.
 * Include the path if the folder is not in the same  directory
 * as this file.
 *
 */
    $system_path = 'system'; 
```

## 手动测试

我做了一些测试来检查 CI 用来确定`system_path`和`application_path`. 据我所知，它工作正常..

**CodeIgniter 使用以下代码进行路径验证**

```
// Set the current directory correctly for CLI requests
if (defined('STDIN'))
{
    chdir(dirname(__FILE__));
}

if (realpath($system_path) !== FALSE)
{
    $system_path = realpath($system_path).'/';
}

// ensure there's a trailing slash
$system_path = rtrim($system_path, '/').'/';

// Is the system path correct?
if ( ! is_dir($system_path))
{
    exit("Your system folder path does not appear to be set correctly. Please open the following file and correct this: ".pathinfo(__FILE__, PATHINFO_BASENAME));
} 
```

结果，我制作了一个 test.php 文件并将其卡在我的**httproot**中。

```
<?php
$system_path = 'system';
echo "index.php dir is: ".dirname(__FILE__)."\n";
chdir(dirname(__FILE__));
echo "System Dir is: ".realpath($system_path)."\n";
if ( ! is_dir($system_path)){
        exit("Your system folder path does not appear to be set correctly. Please open the following file and correct this: ".pathinfo(__FILE__, PATHINFO_BASENAME));
}else{
    echo "System Path Set Properly\n";
}
sleep(30); 
```

我使用以下命令通过命令行运行它：

```
/usr/bin/php /var/www/vhosts/examplesite.com/client/stage/test.php` 
```

### 这就是我得到的：

```
index.php dir is: /var/www/vhosts/examplesite.com/client/stage
System Dir is: /var/www/vhosts/examplesite.com/client/stage/system
System Path Set Properly 
```

## 因此，进行了更多测试，我发现问题出在这部分：

```
if ( ! is_dir($system_path))
{
    exit("Your system folder path does not appear to be set correctly. Please open the following file and correct this: ".pathinfo(__FILE__, PATHINFO_BASENAME));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T05:14:50.723

我只想写评论，但我不能....我是新来的，我没有选项对这个问题添加评论。

好吧... 1 年前，我的专用服务器遇到了同样的问题。

解决方案是将 $system_path 留空...

```
$system_path = ''; 
```

你可以试试这个：

```
$system_path = './system'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:14:22.853

问题与权限有关。我从来没有想过这一点，但是当我从 github 拉出时，如果我以 root 身份登录，显然所有权是`root`. 结果 php 无法正常执行。

我跑了：`chown exampleuser:psacln index.php`现在一切都好！

因此，作为遇到此问题的其他人的教训..如果您遇到同样的问题，请确保所有权和文件权限是正确的！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-05T11:12:06.440

另一个更好的解决方案是使用[dirname() 之](http://php.net/manual/en/function.dirname.php)类的，

**更改以下 2 行**

```
$system_path = 'system';
$application_folder = 'application'; 
```

**经过**

```
$system_path = dirname(__FILE__) . DIRECTORY_SEPARATOR . 'system';
$application_folder = dirname(__FILE__) . DIRECTORY_SEPARATOR . 'application'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:03:28.457

```
/*
 *---------------------------------------------------------------
 * SYSTEM FOLDER NAME
 *---------------------------------------------------------------
 *
 * This variable must contain the name of your "system" folder.
 * Include the path if the folder is not in the same  directory
 * as this file.
 *
 */
    $system_path = '../system';

/*
 *---------------------------------------------------------------
 * APPLICATION FOLDER NAME
 *---------------------------------------------------------------
 *
 * If you want this front controller to use a different "application"
 * folder then the default one you can set its name here. The folder
 * can also be renamed or relocated anywhere on your server.  If
 * you do, use a full server path. For more info please see the user guide:
 * http://codeigniter.com/user_guide/general/managing_apps.html
 *
 * NO TRAILING SLASH!
 *
 */
    $application_folder = '../application'; 
```

如果不工作，你可以试试这个兄弟添加另一个../

如果路径设置正确，错误报告肯定不会这么说:)

只是帮助^_^希望这会

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T10:11:50.380

您确定在 FTP 传输中没有任何问题吗？ie系统其实和index.php在同一个目录？

另外，你确定你是从正确的地方调用 php 吗？路径对吗？

我最近遇到了这个问题：[CodeIgniter + Command Line + Cron + Cpanel](https://stackoverflow.com/questions/10322587/codeigniter-command-line-cron-cpanel)

尝试运行它：

```
/usr/local/bin/php your/path/to/index.php <controller> <method> 
```

对于路径，它可能应该是完整路径？不是 www.example.com/index.php？即我的是这样的：

```
/usr/local/bin/php /home/account_name/public_html/index.php <controller> <method> /dev/null 2>&1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T10:03:39.530

在 index.php 中

我已经做出了这些改变并为我工作。

```
$system_path = '../system/';

$application_folder = '../application/'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-09T08:06:32.063

要将所有目录更改为 755 (-rwxr-xr-x)：

```
find /opt/lampp/htdocs -type d -exec chmod 755 {} \; 
```

要将所有文件更改为 644 (-rw-r--r--)：

```
find /opt/lampp/htdocs -type f -exec chmod 644 {} \; 
```

修复 codeigniter 3.0.0 分布式 plz！

# html - 是否可以仅使用 UL/LI 和 CSS 制作此菜单？

> ID：10353619
> 
> 赞同：0
> 
> 时间：2012-04-27T15:38:48.837
> 
> 标签：html, css, menu

我想为我的网站制作一个菜单，我只需要 UL 和 LI 来进行 SEO。它应该看起来像：

```
<ul>
    <li>Link 1</li>
    <li>Link 2</li>
    <li>Link 3</li>
    <li>Link 4</li>
    <li>Link 5</li>
    <li>Link 6</li>
</ul> 
```

每个 li 必须有 1 个链接。水平的。它必须是动态的：如果我更改链接的文本，它必须自动调整（因此理论上不应该使用任何固定宽度`<li>`）。

![在此处输入图像描述](../Images/9e74e4e70d6bea931aa2db8e6ee16078.png)

[这](http://oi48.tinypic.com/wipn2p.jpg)（或多或少）是布局应该的样子。或多或少是因为我还没有计算对链接的每个块的最大长度大小之间的实际距离。比方说，每个块还剩下 20 像素。

正如你所看到的，链接块之间的距离（有 1px 边框的地方）是不同的，这取决于容器（因此，每对链接的长度）。我不能在不同的内部使用不同`ul`的元素`li`，这是主要问题。

知道这是否可能吗？我尝试了很多方法，但我真的不知道如何才能得到它（这是我不知道如何制作的第一个菜单）。

任何输入都会很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:41:44.920

将此添加到您的 CSS 中。

```
li { float: left; display: block; } 
```

这是 jQuery 解决方案：http: [//jsfiddle.net/ADtke/5/](http://jsfiddle.net/ADtke/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:34:23.433

在受支持的浏览器中，有一种纯 CSS3 方式（可惜我们有这么乱的 -webkit、-moz）

```
ul { 
  border-left:2px solid #cc0;
  border-right:2px solid #cc0;
  -moz-column-count: 3;
  -moz-column-gap: 5px;
  -webkit-column-count: 3;
  -webkit-column-gap: 5px;
  column-count: 3;
  column-gap: 5px;
  -webkit-column-rule-color: #cc0;
  -webkit-column-rule-style: solid;
  -webkit-column-rule-width: 2px;
  -moz-column-rule-color: #cc0;
  -moz-column-rule-style: solid;
  -moz-column-rule-width: 2px;
  column-rule-color: #cc0;
  column-rule-style: solid;
  column-rule-width: 2px;
}
li {
  white-space:nowrap;
} 
```

就像在这个jsfiddle [http://jsfiddle.net/hyxxJ/5/](http://jsfiddle.net/hyxxJ/5/)

# ios - Facebook 墙贴说明未出现在 IOS Mobile 上

> ID：10353620
> 
> 赞同：1
> 
> 时间：2012-04-27T15:38:51.223
> 
> 标签：ios, facebook, mobile

我正在使用 FB.ui 调用来生成 Facebook Wall 帖子。我正在使用 FB.ui 调用设置链接、标题和描述。代码看起来像这样：

```
FB.ui({
    method: 'feed',
    name: 'MyName',
    image: 'http://myimage.com',
    link: 'http://mysite.com',
    to: 'A Facebook user ID',
    caption: 'my caption',
    description: 'my description'
},
function(response) {}); 
```

这似乎工作正常：我成功地将 Wall 帖子写入指定用户的墙上。这一切在网络上看起来都很完美。

但是，在 IOS 设备上通过 Facebook 应用程序或移动浏览器在移动设备上查看墙贴时，不会出现描述。

常规墙贴不会发生这种情况。而且我看到一些应用程序发布了所有内容都显示的内容。但是通过我的应用发布时它不会出现。

有谁知道可能会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:26:12.637

我认为这是 Facebook 上已确认的错误。

> 提要故事的描述未出现在 m.facebook.com 或移动原生 Facebook 应用程序 [http://developers.facebook.com/bugs/255260497908026/](http://developers.facebook.com/bugs/255260497908026/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T01:37:48.407

我注意到了同样的问题。iPhone 和 Android 的 facebook 应用程序似乎没有显示在描述字段中发布的值，但 web ui 似乎包含它。这意味着在桌面网络浏览器中查看帖子所提供的信息与在 Facebook 移动应用程序之一中查看相同帖子所提供的信息不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:34:18.140

我会从您最喜欢的浏览器的开发工具中查看带有“检查元素”的帖子的 html。也许 facebook 应用程序和移动浏览器不喜欢你正在测试的桌面浏览器可以处理的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:24:30.333

我注意到了同样的问题。我的解决方法只是使用标题而不是描述，似乎限制在大约 1000 个字符。不理想，但找不到任何其他解决方法！

# api - Google Maps API 以最少的使用量禁用

> ID：10353621
> 
> 赞同：0
> 
> 时间：2012-04-27T15:39:00.193
> 
> 标签：api, google-maps

谷歌地图 API 在我们几周前推出的一个网站上突然被禁用[http://electriphobia.com/](http://electriphobia.com/) 该页面在加载时显示此消息。

“Google 已禁用此应用程序的 Maps API。所提供的密钥不是有效的 Google API 密钥，或者未授权此站点上的 Google Maps Javascript API v3。如果您是此应用程序的所有者，您可以了解......等等等等”

我已经调查了我的 api 控制台中的使用统计信息，它只显示了最少的使用情况[http://i1240.photobucket.com/albums/gg483/jmo26/ScreenShot2012-04-27at113111AM.png](http://i1240.photobucket.com/albums/gg483/jmo26/ScreenShot2012-04-27at113111AM.png)

我已尝试重新生成 api 密钥并实现它，但相同的消息仍然存在。

我找不到与谷歌联系的电子邮件地址，谁能指出我正确的方向以找到解决方案？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:52:20.980

您能否提供指向显示此错误的页面的直接链接？在 electriphobia.com 上单击几下后，我没有看到任何带有地图的页面

此外，请确保您已在代码控制台中授权该域获取密钥（请参阅 API 访问 -> 引用者）。如果没有，则编辑允许的推荐人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:50:53.687

当我遇到这个问题时，删除 API 密钥是可行的。

# php - 在 Bourne Shell 脚本 (.sh) 中包装 PHP cron 作业有什么好处？

> ID：10353624
> 
> 赞同：1
> 
> 时间：2012-04-27T15:39:01.613
> 
> 标签：php, shell, cron, sh

我在工作中遇到了一个创建新 PHP cron 的清单，其中一个方向是：

> 添加一个包装文件，将作业代码的主要部分称为 cron_[name].sh

一个示例 cron.sh：

```
#!/bin/sh
###########################################################
# This job sends out the daily digest emails
###########################################################
. $DS_JOBS_DIR/cron_common.sh

cd $DS_JOBS_DIR/digests
$DS_PHP daily_digest.php 
```

在 shell 脚本中包装 PHP cron 有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:44:37.403

没理由。

但是之后您可以在 shell 脚本中执行多项操作 - 更多 php 或其他任务。

但我的主要猜测是，如果您在“创建新 PHP cron 的清单”中找到它，那么这只是组织希望完成的事情 - 由于上述因素，或者只是他们的 IT 经理/服务器管理员更喜欢它做完了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:54:07.263

我能想到这样做的唯一原因是允许 PHP 脚本访问在 cron_common.sh 中设置的 shell 环境变量（即，可能包含配置设置）。

# c# - c#泛型如何转换返回类型？

> ID：10353627
> 
> 赞同：0
> 
> 时间：2012-04-27T15:39:20.530
> 
> 标签：c#, generics

我有一本字典

```
var dictionary = new Dictionary<string,string>{{"name","Smith"},{"age","20"}}; 
```

我想将它的值映射到一个类

```
class Person{ 
public string Name {get;set;} 
public string Age {get;set;}
} 
```

我试着用这种方式做

```
public T Map<T>(Dictionary<string, object> row) 
{
      var p= new Person();
      if (row.ContainsKey("name")) Person.Name= row["name"];
      if (row.ContainsKey("age")) Person.Age= row["age"];
      return (T) p;
} 
```

问题是我在返回类型上失败了，我不知道如何将 T 转换为 Person 类。有任何想法吗 ？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:40:52.190

问题在于这一行：

```
var p= new Person(); 
```

您正在尝试返回一个`Person`类型，但`T`可以是*任何*类型。

您需要向该类添加一个[泛型类型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)，只允许`T`成为`Person`- 尽管这不是很有用。

但是在您的情况下，甚至不需要泛型：

```
public Person Map(Dictionary<string, string> row) 
{
      var p= new Person();
      if (row.ContainsKey("name")) Person.Name= row["name"];
      if (row.ContainsKey("age")) Person.Age= row["age"];
      return p;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:41:16.340

T 只是一种类型。你不会把它投射到任何东西上。如果你有一个 T 的实例，你就会有 (Person)T。

你也可以这样做： where T: Person 假设你的问题只是相反的措辞。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T15:41:40.777

如果您有以下形式的字典：

```
new Dictionary<string,string>{{"Smith", "20"},{"Paul","44"}} 
```

您可以使用 LINQ 轻松完成此操作。就像是：

```
dictionary
    .Select(k=>new Person()
        {
            Name=k.Key,
            Age=k.Value
        })
    .ToList(); 
```

使用您拥有的字典，您必须执行以下操作：

```
public Person GetPersonFromDictionary(Dictionary<string,string> dictionary)
{
    var myPerson = new Person()
    {
        Name=dictionary[name],
        Age=dictionary[age]
    }
    return myPerson;
} 
```

假设您保证字典具有您需要的值。我认为这里没有必要涉及泛型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T15:44:25.580

任何一个：

```
public Person Map(Dictionary<string, object> row) 
{
      var p= new Person();
      if (row.ContainsKey("name")) Person.Name= row["name"];
      if (row.ContainsKey("age")) Person.Age= row["age"];
      return p;
} 
```

或者：

```
public T Map<T>(Dictionary<string, object> row) 
 where T : Person
{
      var p= new Person();
      if (row.ContainsKey("name")) Person.Name= row["name"];
      if (row.ContainsKey("age")) Person.Age= row["age"];
      return (T) p;
} 
```

或者：

```
public T Map<T>(Dictionary<string, object> row) 
 where T : Person, new ()
{
      var p= new T();
      if (row.ContainsKey("name")) Person.Name= row["name"];
      if (row.ContainsKey("age")) Person.Age= row["age"];
      return p;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T15:54:30.417

您可以使用反射来填充属性：

```
 public static T Map<T>(Dictionary<string, string> dictionary) where T : class, new()
    {
        var obj = new T();
        var properties = typeof(T).GetProperties();

        foreach (var item in dictionary)
        {
            var prop = properties.FirstOrDefault(p => p.Name.Equals(item.Key, StringComparison.InvariantCultureIgnoreCase));
            if (prop != null)
                prop.SetValue(obj, item.Value, null);
        }

        return obj;
    } 
```

...

```
 var dictionary = new Dictionary<string, string> { { "name", "Smith" }, { "age", "20" } };
 Person o = Map<Person>(dictionary); 
```

# eclipse - Eclipse 和代理自动配置

> ID：10353628
> 
> 赞同：1
> 
> 时间：2012-04-27T15:39:27.660
> 
> 标签：eclipse, networking, proxy, pac

您如何设置 Eclipse 以使用*带有用户名/密码*的自动配置代理？即使我尝试手动从脚本中获取正确的代理地址，我也无法让 Eclipse 识别凭据。

我试过了

*   在 Eclipse 中将代理设置设置为 NATIVE -> 不要求提供凭据，失败
*   将代理设置设置为手动，为 https 设置设置（可能）正确的代理 ip 并传递用户名/密码 - > 失败，下次启动时没有凭据
*   将 -Dhttp.proxyHost、proxyPort、proxyUser 和 proxyPassword 放入*eclipse.ini*文件 -> 失败，并且“属性”-“网络设置”选项卡一直显示以前的设置

不幸的是，我们有一个相当严格的网络政策。

# php - 跟踪 Cookie 以决定加载哪些图像

> ID：10353631
> 
> 赞同：0
> 
> 时间：2012-04-27T15:39:50.677
> 
> 标签：php, javascript, html, cookies

我正在制作这个幻灯片，客户想要一个跟踪 cookie 来报告他们已经在网站上的位置，并根据它加载不同批次的图像。

共有 9 张图像，设置为 3 个批次。我之前用 PHP 完成了一个随机图像加载器，只需要一些关于如何在此处执行此操作的建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:20:06.027

您可以使用图像 ID 创建 cookie，以查看它们是否与用户的 cookie 匹配。如果它们匹配，则这意味着用户已经看到它们并且您向其他人展示。

**在 javascript 中执行此操作的简单脚本：**

**你也可以通过 PHP 做到这一点，阅读这个[http://php.net/manual/es/function.setcookie.php](http://php.net/manual/es/function.setcookie.php)（这真的很好解释）**

```
function createCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date( );
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toGMTString();
    }
    else expires = "";
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) 
{
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for( var i=0;i < ca.length;i++) 
    {
        var c = ca[i];
        while (c.charAt( 0)==' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}

function eraseCookie( name) 
{
    createCookie(name,"",-1);
} 
```

现在，要创建 cookie，请执行以下操作：

```
createCookie('cookiename', 'cookievalue', false); 
```

要评估 cookie，请执行以下操作：

```
 var cookie = readCookie('cookiename');

 // var cookie will be null if there is no cookie to read.
 if(cookie == 'cookievalue'){
   //do something
 } 
```

要删除它：

```
eraseCookie('cookiename'); 
```

# magento - Magento：商店代码中的 Dash

> ID：10353636
> 
> 赞同：3
> 
> 时间：2012-04-27T15:40:02.157
> 
> 标签：magento, seo

我将 Magento 与多个商店和商店视图一起使用（1 个网站，4 个商店，每个商店都有一个商店视图）。我激活了“将商店代码添加到网址”选项，并且可以通过[http://example.com/storecode/](http://example.com/storecode/)访问我的不同商店，效果很好。但是，我有一个商店代码，出于 SEO 目的，应该以两个词命名。不幸的是，Magento 只允许使用下划线 (_) 而不是破折号 (-) 作为商店代码：

```
The store code may contain only letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter. 
```

由于[建议使用破折号](https://stackoverflow.com/questions/119312/urls-dash-vs-underscore)来分隔 URL 中的单词，因此我正在寻找一种将破折号用作商店代码的方法。覆盖 Magento 的验证没有问题，但我想知道这里是否有任何特殊原因禁用破折号。有人有想法吗？

谢谢， 马蒂亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:29:12.747

您始终可以尝试复制`Mage_Core_Model_Mysql4_Store`in`app/code/local`并修改正则表达式以允许破折号。可能的原因是 Magento`_`在命名约定中将其解释为分隔符或空格的方式。

我想这是有原因的，但具体是什么我不确定。如果您确实进行了更改，我建议您事先在您的代码库/magento 副本上进行更改，以确定在生产站点上进行更改之前是否有任何影响。

```
protected function _beforeSave(Mage_Core_Model_Abstract $model)
{
    if(!preg_match('/^[a-z]+[a-z0-9_\-]*$/',$model->getCode())) {
        Mage::throwException(
            Mage::helper('core')->__('The store code may contain only letters (a-z), numbers (0-9) or underscore(_), the first character must be a letter'));
    }

    return $this;
} 
```

# facebook - 检索应用程序的流故事印象

> ID：10353639
> 
> 赞同：0
> 
> 时间：2012-04-27T15:40:07.957
> 
> 标签：facebook, facebook-fql

我在 facebook FQL 上苦苦挣扎——我需要知道应用程序生成的 Steam 故事获得了多少印象。

在 FQL 表中有一个 app_id 列-如果我可以选择 where app_id = '' 那么那将是我的飞行但因为它不是索引列 fql 吐出并出错

[https://developers.facebook.com/docs/reference/fql/stream/](https://developers.facebook.com/docs/reference/fql/stream/)

我知道每个发布的帖子都会返回一个帖子 ID——我目前不存储它，但如果它意味着存储每个 ID，然后进行大规模查询以计算每个人发布的印象数，那就这样吧......

但必须有一种更简单的方法（尤其是当我收到用户生成的数千个帖子时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:09:53.313

您所要求的，FQL 明智是不可能的，因为您只能在 WHERE 子句中使用“可索引”列。“app_id”列不可索引（没有'*'），所以你不能使用它。

正如您所说，您可以保存帖子 ID，然后询问特定帖子，或者您可以使用“source_id”，它也可索引来查询您的应用程序在用户墙（或页面墙）上发布的所有帖子。

此外，您应该能够使用 IN 子句，因此您最终会得到如下内容：

```
SELECT post_id, impressions
FROM stream
WHERE
    source_id IN (SOME IDS OF USERS)
    AND
    app_id = YOUR APP ID 
```

# java - 如何知道时间戳何时更改？

> ID：10353641
> 
> 赞同：0
> 
> 时间：2012-04-27T15:40:18.407
> 
> 标签：java, logic

我有这门课`Log`：

```
private Integer id;

private Timestamp time;

private String value; 
```

我想生成关于这些间隔的平均值的报告：`seconds, minutes, hours, days, months, years`. 例如，我在 a 中有这些值`List<Log> logs`：

代码：

```
for (Log log : logs)
            System.out.println(log.getTime().toString() + " " + log.getValue() + ", "); 
```

输出：

```
INFO: 2012-04-26 20:06:21.0 10.0, 
INFO: 2012-04-27 09:09:32.0 10.0, 
INFO: 2012-04-27 09:31:09.0 15.0, 
INFO: 2012-04-27 09:31:23.0 27.0, 
INFO: 2012-04-27 09:31:42.0 30.0, 
INFO: 2012-04-27 09:31:54.0 47.0, 
INFO: 2012-04-27 12:19:00.0 80.0, 
```

我想取平均值`minutes`，那么结果应该是：

```
10 / 1 = 10, 
10 / 1 = 10, 
15 + 27 + 30 + 47 = 119/4 = 29.75
80 / 1 = 80 
```

你们知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:10:13.780

好的，这样的事情怎么样（虽然当我看到你还在挣扎时我很快就把它放在一起 - 使用地图来保持计数并不出色）：

将日志更改为：

```
Integer id;
DateTime time;
String value;

public Log(Integer id, Timestamp time, String value) {
    this.id = id;
    this.time = new DateTime(time.getTime());
    this.value = value;
} 
```

然后：

```
// Build some fake logs
final List<Log> logs = new ArrayList<Log>();
logs.add(new Log(1, new Timestamp(new DateTime().withDate(2011,1,1).getMillis()), "90"));
logs.add(new Log(1, new Timestamp(new DateTime().withDate(2010,1,1).withTimeAtStartOfDay().getMillis()), "60"));
logs.add(new Log(1, new Timestamp(new DateTime().withDate(2010,1,1).withTimeAtStartOfDay().getMillis()), "80"));
logs.add(new Log(1, new Timestamp(new DateTime().withDate(2009,1,1).getMillis()), "70"));
final Map<DateTime, Integer> total = new HashMap<DateTime, Integer>();
final Map<DateTime, Integer> count = new HashMap<DateTime, Integer>();

for(Log l : logs) {
    // Round down to the nearest minute
    final DateTime t = l.getTime().withSecondOfMinute(0);
    Integer sum = total.get(t);
    sum = (sum == null) ? 0 : sum;
    total.put(t, sum + Integer.parseInt(l.getValue()));

    Integer c = count.get(t);
    c = (c == null) ? 0 : c;
    count.put(t, c + 1);
}

for(Map.Entry<DateTime, Integer> entry : total.entrySet()) {
    System.out.println(entry.getValue() / count.get(entry.getKey()));
} 
```

在这里，我假设您仍然希望`TimeStamp`在`Log`构造函数中使用，但不介意在内部将其存储为 JodaTime`DateTime`对象。然后我们创建一些假日志。然后我们遍历所有日志并将计数和总数存储到最近的分钟。实际上，我会创建一个对象来存储这些数据（包括总数和计数），然后将其`DateTime`用作键。我希望这是有道理的。

# facebook-oauth - Facebook Oauth 在 IE 和 Firefox 的 iframe 中失败

> ID：10353648
> 
> 赞同：0
> 
> 时间：2012-04-27T15:40:35.573
> 
> 标签：facebook-oauth

我正在使用 Facebook Oauth。我的应用程序在 iframe 中。以下是我最初的 Oauth URL：

[https://graph.facebook.com/oauth/authorize?client_id=XXXXX&redirect_uri=XXXX&scope=offline_access,publish_stream](https://graph.facebook.com/oauth/authorize?client_id=XXXXX&redirect_uri=XXXX&scope=offline_access,publish_stream)

redirect_uri 是 https。

在 IE8 中，我收到以下错误页面：

[最初它显示 Go To Facebook.com 链接][1]

![然后显示以下错误页面][2]

此内容无法在框架中显示

在 Firefox 中，它显示空白页。所以 Facebook Oauth 不能在 IE 和 Firefox 中工作。我确实在你的网站上找到了一些帖子。但那些并没有帮助我解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:19:31.560

根据[https://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/)：

> **iframe**：供应用在 Facebook 画布页面内的 iframe 内运行时使用。在灯箱样式叠加中显示对话框。由于存在点击劫持的风险，这仅允许用于某些特定对话框，并且需要您传递有效的 access_token。*OAuth 对话框不支持此模式。*

即使您没有指定`iframe`显示类型，您也在 iframe 中加载对话框，facebook 会检测到这一点以防止点击劫持。

解决此问题的一种好方法是打开一个处理身份验证的弹出窗口：

```
<script type="text/javascript">
window.open('https://www.facebook.com/dialog/oauth?display=popup&client_id=...');
</script> 
```

或类似的东西（在您的网站上打开一个执行重定向的 URL 等）。

# sql - Sharepoint 工作流表

> ID：10353649
> 
> 赞同：3
> 
> 时间：2012-04-27T15:40:40.023
> 
> 标签：sql, sharepoint

试图找出像状态和参与者这样的工作流信息存储在 Sharepoint 数据库中的位置。有一个名为工作流的表，但我似乎无法找到文档与工作流数据中的数据之间的联系。任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T07:29:35.050

SharePoint 工作流基于 Windows Workflow Foundation 3.5，因此您将找到的任何相关信息很可能适用于 SharePoint 工作流。其中之一是对[工作流进行水合和脱水](http://Hydrating%20and%20Dehydrating%20Workflows)，它本质上是以序列化的形式将工作流的当前状态保存到数据库（或其他任何地方）中。

SharePoint 工作流依赖于四种机制：

1.  工作流模板
2.  ...协会
3.  ...实例

工作流模板是您将在 SharePoint Designer/Visual Studio 中创建的模板。使用 SharePoint 设计器，这将生成一个声明性 *.XOML 文件，使用 Visual Studio 一个 *.DLL - 您的工作流的所有逻辑、将分配给谁、您的参与者是谁都存储在其中。

您可以将此工作流模板与 SharePoint 中的列表、内容类型或站点以及（隐藏的）工作流历史记录列表和工作流任务列表相关联 - 即使您不使用它。通过此关联，您还可以拥有一个关联表单，一旦您关联您的工作流程，该表单就会执行。

工作流实例是在例如列表项上运行的实际实例（在实例化中也可以呈现表单）。这个实例实际上做了你在模板中告诉它做的事情。

现在，关于您的问题：*“状态和参与者等工作流信息存储在数据库中的什么位置？”*
简短的回答：不是。

更长的答案：该表`WorkflowAssociation`存储关联。所以我可以看到带有他`BaseID`XYZ 的工作流与带有等的`SiteId`xyz相关联`ListId`（这是文档和数据之间的连接）。数据库中的`Workflow`表存储有关运行和过去工作流的信息。因此，您知道工作流实例在哪个`ItemGUID`工作流实例上运行，它是何时创建的以及`InternalState`它处于什么状态。这种内部状态对您没有帮助，因为它没有映射您在 SP Designer 中设计的状态，它只是像这样的状态SharePoint 内部的“运行/未运行/错误”。但是有专栏`InstanceData`. 我不确定，但是一旦工作流程脱水，当前状态可能会保存在那里。以什么编码/形式 - 不知道。您将无法在数据库中的正在运行的工作流中找到您寻求的信息（当前参与者）。
最重要的是：无论如何，您都不应该查看数据库。

您只能通过代码找到状态和参与者等信息，更好的是您可以调试工作流程以查看所有信息。您还可以为此信息创建字段并简单地显示“参与者”。

# css - Div 在 Firefox、Safari、Chrome 等中显示，但在 Internet Explorer 中不显示

> ID：10353655
> 
> 赞同：3
> 
> 时间：2012-04-27T15:41:04.087
> 
> 标签：css, internet-explorer, html, css-transitions

这种`div`转换在大多数浏览器中都能正常显示，但在 Internet Explorer 中却不行。您可以通过单击左侧的 secondview 链接来查看错误。

这是 HTML 和 CSS 源代码：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
   <meta charset="UTF-8" />
   <!--<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">-->
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <title>Page Transitions with CSS3</title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
   <meta name="description" content="" />
   <meta name="keywords" content="" />
   <meta name="author" content="Your name" />
       <link rel="shortcut icon" href="../favicon.ico"> 
       <link rel="stylesheet" type="text/css" href="css/demo.css" />
       <link rel="stylesheet" type="text/css" href="css/style3.css" />
       <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/blitzer/jquery-ui.css" type="text/css" />
       <link href='http://fonts.googleapis.com/css?family=Electrolize' rel='stylesheet' type='text/css' />

       <script src="javascript/jquery-1.7.1.min.js" type="text/javascript"></script>
       <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
       <script src="javascript/jquery.easy-confirm-dialog.js"></script>
 </head>
 <body>
     <div id="home" class="content">
     <div class="content">
         <center><h2>Div #1</h2></center>
         Div #1
     </div>
</div>
<!-- /Home -->

<!-- SecondView --> 
    <div id="secondview" class="panel">
            <div class="content">
                 <center><h2>Div #2</h2>
             Div #2
            </div>
        </div>
    <!-- /SecondView -->

<!-- Header with Navigation -->
    <div id="header">
        <ul id="navigation">
        <li><a id="link-home" href="#home">Home</a></li>
        <li><a id="link-secondview" href="#secondview">Second View</a></li>
        </ul>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:47:14.137

您正在使用 CSS3 进行过渡，这对 IE 不可用。来自你的 CSS。

```
.panel{
    [...]
    -webkit-transition: all .6s ease-in-out;
    -moz-transition: all .6s ease-in-out;
    -o-transition: all .6s ease-in-out;
    -ms-transition: all .6s ease-in-out;
    transition: all .6s ease-in-out;
} 
```

# java - 不同的窗口有相同的代码？

> ID：10353666
> 
> 赞同：1
> 
> 时间：2012-04-27T15:41:42.540
> 
> 标签：java, swing

这是“主”类（不包含主方法）

```
import javax.swing.*;
import java.awt.*;
//import java.lang.Object;
//import java.awt.event.ActionListener;
//import java.awt.event.;

public class Program {

  public JFrame frame;
  public JPanel header;
  public JPanel text;
  public JPanel body;
  public JTextField input;
  public JButton agregar;

  public List listA;
  public List listB;

  public Program(String title) {
    frame = new JFrame(title);
    frame.setSize(500,600);
    frame.setResizable(false);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(null);

    header = new JPanel();
    header.setBackground(new Color(255,204,50));
    header.setBounds(0,0,500,100);

    text = new JPanel();
    text.setBackground(new Color(255,204,100));
    text.setBounds(0,100,500,50);
    text.setLayout(null);

    //Inicializando la "entrada"
    input = new JTextField(20);
    input.setBounds(50,13,300,25);
    text.add(input);

    agregar = new JButton();
    agregar.setBounds(360,12,80,25);
    agregar.setText("Agregar");
    text.add(agregar);
    //Listo

    body = new JPanel();
    body.setBackground(new Color(255,204,150));
    body.setBounds(0,150,500,450);

    //Lo que está dentro del body
    listA = new List(20);
    body.add(listA);

    listB = new List(20);
    body.add(listB);
    //Listo

    //Añadir todos los paneles al frame principal
    frame.add(header);
    frame.add(text);
    frame.add(body);

  }
} 
```

这是 MAIN 类（这个包含主要方法）：

```
public class Main {
  public static void main(String[] args) {
    new Program("Ordenamiento Recursivo");
  }
} 
```

每次我运行该应用程序时，UI 组件都会以不同的方式呈现，请参阅随附的屏幕截图。

* * *

好吧，感谢所有回复帖子的人，我完成了程序，我对最终结果非常满意，这里是：

![莫基拉萨计划](../Images/b642132285c887194efaf9ce3c56c984.png)

如果有人想看一下代码，这里是：[链接](http://www.copypastecode.com/214612/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:23:16.867

问题：

*   ***在添加组件之前***调用`setVisible(true)`您的 JFrame ，这将导致程序图形的绘制不可靠，这就是您看到不同结果的原因。不要这样做，而是在将所有内容添加到顶级窗口*后调用它。*
***   正如其他人所说，阅读并学习使用布局管理器。**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T15:44:53.513

> 不同的窗口有相同的代码？

*   我认为这很简单，可以通过实现[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

*   我建议不要打开新的[Top-Level Container](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)，只有在有真正重要的原因时才使用[JDialog 或 JOptionPane](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T16:23:16.973

请务必在 EDT 上构建 GUI。不这样做会导致不可预测的结果。

`pack()`在使用布局添加组件后调用，**然后**调用`setVisible(true)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T15:56:59.273

您的表单需要一个布局管理器，因此不应该将布局管理器设置为 null。

这里正在进行中... [https://gist.github.com/2510570](https://gist.github.com/2510570)

几个变化。还没完结，请看下面

1.  让 Program 扩展一个 JFrame。
2.  已设置布局管理器。

更新最后，我在 IntelliJ 的表单设计器中解决了这个问题。

[https://gist.github.com/2512197](https://gist.github.com/2512197)

您希望将行为附加到按钮的位置通过代码搜索要求您添加代码的注释。虽然我是在 InteliJ Ultimate 中做到这一点的（这个要花钱的），但我认为免费下载 Community Edition UI 设计器也可以绘制 Swings GUI。非常快速和容易。Netbeans 也有一个很好的 GUI 画家。

[oracle.com](http://docs.oracle.com/javase/tutorial/uiswing/)上的 Swing 教程也值得一看。**

# asp.net-mvc-3 - mvcPaging 文档 - Mvc 分页建议

> ID：10353676
> 
> 赞同：0
> 
> 时间：2012-04-27T15:42:15.410
> 
> 标签：asp.net-mvc-3, pagination

我正在尝试将 MVCPaging 用于 asp.net mvc 3，可以在[此处](http://nuget.org/packages/mvcpaging)找到，但我无法使其正常工作。我一步一步地按照本[教程](http://weblogs.asp.net/shijuvarghese/archive/2011/07/06/using-mvcpaging-in-asp-net-mvc-apps.aspx)进行操作，但是当我单击应该作为 ajax 加载到 div 中的链接页面时，它会打开另一个新页面，

我的视图代码是：

```
@Html.Pager(1, 1, 2, new AjaxOptions { UpdateTargetId = "gridcontainer"}).Options(o => o.Action("AjaxPage")) 
```

调用该操作 ok，它返回一个部分，但部分页面打开到另一个新页面，而不是在我的实际页面上刷新 div

这个问题让我抓狂，有没有人使用这个 nuget 包并且知道问题可能来自哪里？

否则，你能告诉我一个用于 ajax 分页的 asp.net mvc 3 的链接/教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:33:47.170

我遇到了这个问题，在您的 _Layout.cshtml 视图中添加对 jquery.unobtrusive-ajax.js 的引用为我解决了这个问题。

# visual-studio-2010 - Visual Studio 给我一个关于旧 DLL 的错误

> ID：10353680
> 
> 赞同：0
> 
> 时间：2012-04-27T15:42:49.723
> 
> 标签：visual-studio-2010, dll

我已将旧的 .net1 项目升级到 vs2010。一切正常，除了设计师在打开一些使用引用 DLL 中的组件的表单时给我一个错误。

> 无法加载文件或程序集 'XXX.YYY, Version=1.0.2363.24558, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。Det går inte att hitta filen。

我重新编译了 DLL 并删除了对旧版本的所有引用，然后添加了对新版本的引用，但 Deisgner 仍然对这个特定的不存在的版本喋喋不休？如前所述.. 运行应用程序时一切正常，但设计师似乎讨厌它。

有线索的人吗？我承认，我不是一个 .net 黑客。

编辑：如前所述，该应用程序有效。如果我选择“忽略并继续”，表单会显示但没有我的用户控件。如果我打开特定的用户控件，它会显示出来。但是为什么它不会出现在表单中，为什么它工作顺利但设计师拒绝展示它，因为它有一个奇怪的想法，即在我的解决方案的某个地方它引用了那个旧程序集..这显然不存在？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:05:06.287

问题解决了，原来有另一个旧 DLL 文件的参考，而该文件又是使用麻烦的 DLL 版本构建的。该项目的升级并使用新的 DLL 重新编译解决了该问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:45:24.303

提示：在解决方案 ++ 中查找正在`Ctrl`使用此行的位置......可能有些地方仍在引用旧的 DLL。`Shift``F`

寻找这个字符串：`1.0.2363.24558`

您可以尝试的其他事情是：右键单击您的项目`Solution Explorer`并选择`Unload Project`（我在这里使用的是 VS 11 Beta）。然后再次右键单击它并选择`Edit 'ProjectName'.csproj`。然后看看那里是否有这个程序集版本的参考......

# javascript - 使用 jquery 上传文件在 Firefox 中有效，但在 Internet Explorer 中无效

> ID：10353682
> 
> 赞同：2
> 
> 时间：2012-04-27T15:42:54.810
> 
> 标签：javascript, jquery, asp.net-web-api, file-upload

这个 javascript 代码

```
$(document).ready(function () {
            var uploader = new qq.FileUploader({
                element: document.getElementById('file-uploader'),
                action: 'api/GradeCheckIn',
                debug: true,
                onComplete: function (id, fileName, responseJSON) {
                    alert(responseJSON[0].ValidationErrors[0].ErrorMessage);
                }
            });
        }); 
```

像 Firefox 中的魅力一样工作。文件被发送到服务器，结果返回给客户端。返回的数据是json btw。

但在 Internet Explorer 中，我收到消息**Do ​​you want to open or save GradeCheckIn (2 bytes) from localhost。**就像我正在尝试下载文件一样。

我该如何解决这个问题？我希望资源管理器中的行为与 Firefox 中的行为相同。

**评论后编辑：**

请求标头中的内容类型在 IE 和 FireFox 之间有所不同：

```
IE: multipart/form-data; boundary=---------------------------7dc2ec8205b2

Firefox: application/json; charset=utf-8 
```

即使我在发出请求的代码中明确设置了内容类型：

```
xhr.open("POST", queryString, true);
xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
xhr.setRequestHeader("X-File-Name", encodeURIComponent(name));
xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8");
xhr.send(file); 
```

我仍然无法解决这个问题。所有想法都受到高度赞赏。如果我应该提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:54:09.793

大多数浏览器不`application/json`作为​​返回内容类型处理。如果您仍想编写 json 并将其从 iframe 中读取，您可能只考虑“破解”响应并发回您的内容，但使用`text/html`.

# uiwebview - 无法为 UIWebView 设置缩略图

> ID：10353683
> 
> 赞同：0
> 
> 时间：2012-04-27T15:42:57.540
> 
> 标签：uiwebview, video-thumbnails

我想在视图的 uiwebview 框架中设置缩略图。但是，当我使用以下代码时，虽然图像值不为空，但没有显示图像。有人可以帮忙，让我知道我哪里出错了吗？

请注意，在代码中，VideoView 类是从 UIWebView 派生的，并且与它一样工作。

```
 video = [[VideoView alloc] 
                              initWithStringAsURL:@"http://www.youtube.com/watch?v=T6X3j7zxUHA" 
                              frame:CGRectMake(11, 7, 298, 311)];

    [self addSubview:video];

    UIGraphicsBeginImageContext(video.bounds.size); 
    [video.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *resultImageView = UIGraphicsGetImageFromCurrentImageContext();

    thumbnailButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [thumbnailButton setFrame:CGRectMake(0,0, 298, 311)];
    [thumbnailButton setImage:resultImageView forState:UIControlStateNormal];
    [video addSubview:thumbnailButton];
     UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T15:59:08.467

我不建议使用 UIWebView 来获取 YouTube 视频的缩略图，但这里有一些代码用于在我的应用中嵌入 youtube 视频。

```
static NSString* EmbedHTML = "<html>\
<head>\
<meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no, width=%0.0f\"/>\
</head>\
<iframe width=\"%0.0f\" height=\"%0.0f\" src=\"%@\" frameborder=\"0\" allowfullscreen>   </iframe></html>"; 
```

使用它嵌入视频并将您的 youtube URL 从 更改`http://www.youtube.com/watch?v=T6X3j7zxUHA`为`http://www.youtube.com/embed/T6X3j7zxUHA`。

另一种不需要 webview 的方法是手动构建缩略图。（下面的例子）

```
 ///////////////////////////////////////////////////////////////////////////////////////////////////
-(NSString*)youtubeThumb:(NSString*)url
{
    NSRange end = [url rangeOfString:@"?"];
    if(end.location != NSNotFound)
    {
        NSRange start = [url rangeOfString:@"/" options:NSBackwardsSearch range:NSMakeRange(0, end.location)];
        if(start.location != NSNotFound)
        {
            NSString* video_id = [url substringWithRange:NSMakeRange(start.location+1, (end.location-1)-start.location)];
            return [NSString stringWithFormat:@"http://i.ytimg.com/vi/%@/2.jpg",video_id];
        }
    }
    return nil;
} 
```

现在您有了图像缩略图 URL，只需获取它（通过一个简单的`GET`请求）。

# java - FTPClient 构造函数使用最新的 SDK 工具和 ADT 失败

> ID：10353690
> 
> 赞同：0
> 
> 时间：2012-04-27T15:43:51.203
> 
> 标签：java, android

我的代码可以与以前版本的 SDK 工具和 ADT (v16) 配合使用。但是在我将两者都更新到 v19 apache commons FTPClient 构造函数调用后，导致程序崩溃，甚至没有抛出任何异常！每当我将以下代码行放入代码中时，它都会导致崩溃：

```
FTPClient client = new FTPClient(); 
```

我试图通过采用最新的 commons.net 库（v3.1）来解决这个问题，但它没有帮助。我正在使用 SDK 2.2 (API 8)。有什么想法吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:04:53.910

解决了。问题在于 ADT 17 中引入的库引用的新方式。这是帮助我的解决方案的链接：[http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt- 17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# sql - 消除查询中的多条记录

> ID：10353693
> 
> 赞同：0
> 
> 时间：2012-04-27T15:44:02.120
> 
> 标签：sql, tsql

我有一个选择，我只想为每个案例返回一条记录，但我遇到了问题。

例子：

```
Select 
    CaseId, Party_id, RANKING
from... 
```

问题是在收费水平上，案件可能有类似的多次收费......

收费

```
 Case   ChargeCount  RANKING    
     1           1        800
     2           1        802
     2           2        803 
     3           1        800 
```

我只希望退回 3 个案例，其中第一个收费符合所选标准。我尝试通过 caseId 使用简单的分区，但这弄乱了其他地方的计数。有没有其他方法可以做到这一点？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:47:17.110

怎么样：

```
SELECT CaseId, ChargeCount, Ranking FROM SomeTable WHERE ChargeCount = 1 
```

除非我遗漏了什么，否则就这么简单。您的示例查询对您所呈现的底层结构并不是非常有启发性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:51:57.637

假设您希望每个 CaseID 只返回一行：

```
Select 
    CaseId, Party_id, RANKING
from...
GROUP BY CaseID 
```

请注意，如果每一行有多个可能的答案，这将返回一个任意答案，除非您以某种方式定义要选择的答案。

# c++ - Python scons 构建

> ID：10353695
> 
> 赞同：1
> 
> 时间：2012-04-27T15:44:07.523
> 
> 标签：c++, python, build, scons

现在我正在研究一种名为 pabalos 的开源流体模拟。我在构建自己的链接库的程序时遇到了一些问题。

该库是使用 scons 从源代码构建的。

该项目的目录是：

```
[fred@suck palabos-v1.1r0]$ls
codeblocks/  examples/           jlabos/  pythonic/  SConstruct  utility/
COPYING      externalLibraries/  lib/     scons/     src/ 
```

我将其称为项目根目录！

该项目的官方建筑文档说：

> Palabos 库使用按需编译过程。代码在最终用户应用程序第一次使用时被编译，然后在将来自动重新使用，直到由于代码或编译选项的修改而需要新的编译。

在示例目录中，有一些示例代码目录，例如：

```
[fred@suck palabos-v1.1r0]$ls examples/showCases/rectangularChannel3d/*
examples/showCases/rectangularChannel3d/Makefile
examples/showCases/rectangularChannel3d/rectangularChannel3D.cpp 
```

该示例的 Makefile 为：

```
[fred@suck rectangularChannel3d]$cat Makefile 
##########################################################################
## Makefile for the Palabos example program rectangularChannel3D.
##
## The present Makefile is a pure configuration file, in which
## you can select compilation options. Compilation dependencies
## are managed automatically through the Python library SConstruct.
##
## If you don't have Python, or if compilation doesn't work for other
## reasons, consult the Palabos user's guide for instructions on manual
## compilation.
##########################################################################

# USE: multiple arguments are separated by spaces.
#   For example: projectFiles = file1.cpp file2.cpp
#                optimFlags   = -O -finline-functions

# Leading directory of the Palabos source code
palabosRoot   = ../../..
# Name of source files in current directory to compile and link with Palabos
projectFiles = rectangularChannel3D.cpp

# Set optimization flags on/off
optimize     = true
# Set debug mode and debug flags on/off
debug        = false
# Set profiling flags on/off
profile      = false
# Set MPI-parallel mode on/off (parallelism in cluster-like environment)
MPIparallel  = true
# Set SMP-parallel mode on/off (shared-memory parallelism)
SMPparallel  = false
# Decide whether to include calls to the POSIX API. On non-POSIX systems,
#   including Windows, this flag must be false, unless a POSIX environment is
#   emulated (such as with Cygwin).
usePOSIX     = true

# Path to external libraries (other than Palabos)
libraryPaths =
# Path to inlude directories (other than Palabos)
includePaths =  
# Dynamic and static libraries (other than Palabos)
libraries    = 

# Compiler to use without MPI parallelism
serialCXX    = g++
# Compiler to use with MPI parallelism
parallelCXX  = mpicxx
# General compiler flags (e.g. -Wall to turn on all warnings on g++)
compileFlags = -Wall -Wnon-virtual-dtor
# General linker flags (don't put library includes into this flag)
linkFlags    =
# Compiler flags to use when optimization mode is on
optimFlags   = -O3
# Compiler flags to use when debug mode is on
debugFlags   = -g
# Compiler flags to use when profile mode is on
profileFlags = -pg

##########################################################################
# All code below this line is just about forwarding the options
# to SConstruct. It is recommended not to modify anything there.
##########################################################################

SCons     = $(palabosRoot)/scons/scons.py -j 2 -f $(palabosRoot)/SConstruct

SConsArgs = palabosRoot=$(palabosRoot) \
            projectFiles="$(projectFiles)" \
            optimize=$(optimize) \
            debug=$(debug) \
            profile=$(profile) \
            MPIparallel=$(MPIparallel) \
            SMPparallel=$(SMPparallel) \
            usePOSIX=$(usePOSIX) \
            serialCXX=$(serialCXX) \
            parallelCXX=$(parallelCXX) \
            compileFlags="$(compileFlags)" \
            linkFlags="$(linkFlags)" \
            optimFlags="$(optimFlags)" \
            debugFlags="$(debugFlags)" \
        profileFlags="$(profileFlags)" \
        libraryPaths="$(libraryPaths)" \
        includePaths="$(includePaths)" \
        libraries="$(libraries)"

compile:
    python $(SCons) $(SConsArgs)

clean:
    python $(SCons) -c $(SConsArgs)
    /bin/rm -vf `find $(palabosRoot) -name '*~'` 
```

我知道这个 makefile 将调用 scons，并且 SConstruct 文件位于项目根目录中，如我所示。

SContstruct 文件是：

```
[fred@suck palabos-v1.1r0]$cat SConstruct 
###########################################################
# Configuration file for the compilation of Palabos code,
# using the SConstruct library.
# IT IS NOT RECOMMENDED TO MODIFY THIS FILE.
# Compilation should be personalized by adjusting the 
# Makefile in the directory of the main source files.
# See Palabos examples for sample Makefiles.
###########################################################

import os
import sys
import glob

argdict = dict(ARGLIST)

# Read input parameters
palabosRoot   = argdict['palabosRoot']
projectFiles  = Split(argdict['projectFiles'])
optimize      = argdict['optimize'].lower() == 'true'
debug         = argdict['debug'].lower() == 'true'
profile       = argdict['profile'].lower() == 'true'
MPIparallel   = argdict['MPIparallel'].lower() == 'true'
SMPparallel   = argdict['SMPparallel'].lower() == 'true'
usePOSIX      = argdict['usePOSIX'].lower() == 'true'
serialCXX     = argdict['serialCXX']
parallelCXX   = argdict['parallelCXX']
compileFlags  = Split(argdict['compileFlags'])
linkFlags     = Split(argdict['linkFlags'])
optimFlags    = Split(argdict['optimFlags'])
debugFlags    = Split(argdict['debugFlags'])
profileFlags  = Split(argdict['profileFlags'])
libraryPaths  = Split(argdict['libraryPaths'])
includePaths  = Split(argdict['includePaths'])
libraries     = Split(argdict['libraries'])

# Read the optional input parameters
try:
    dynamicLibrary = argdict['dynamicLibrary'].lower() == 'true'
except:
    dynamicLibrary = False

try:
    srcPaths = Split(argdict['srcPaths'])
except:
    srcPaths = []

flags = compileFlags
allPaths = [palabosRoot+'/src'] + [palabosRoot+'/externalLibraries'] + includePaths

if optimize:
    flags.append(optimFlags)

if debug:
    flags.append(debugFlags)
    flags.append('-DPLB_DEBUG')

if profile:
    flags.append(profileFlags)
    linkFlags.append(profileFlags)

if MPIparallel:
    compiler = parallelCXX
    flags.append('-DPLB_MPI_PARALLEL')
else:
    compiler = serialCXX

if SMPparallel:
    flags.append('-DPLB_SMP_PARALLEL')

if usePOSIX:
    flags.append('-DPLB_USE_POSIX')

env = Environment ( ENV       = os.environ,
                    CXX       = compiler,
                    CXXFLAGS  = flags,
                    LINKFLAGS = linkFlags,
                    CPPPATH   = allPaths
                  )

if dynamicLibrary:
    LibraryGen = env.SharedLibrary
else:
    LibraryGen = env.Library

sourceFiles = []
for srcDir in glob.glob(palabosRoot+'/src/*'):
    sourceFiles.extend(glob.glob(srcDir+'/*.cpp'))

for srcDir in srcPaths:
    sourceFiles.extend(glob.glob(srcDir+'/*.cpp'))

sourceFiles.extend(glob.glob(palabosRoot+'/externalLibraries/tinyxml/*.cpp'));

if MPIparallel:
    palabos_library = LibraryGen( target  = palabosRoot+'/lib/plb_mpi',
                                  source  = sourceFiles )
else:
    palabos_library = LibraryGen( target  = palabosRoot+'/lib/plb',
                                  source  = sourceFiles )

local_objects = env.Object(source = projectFiles)

all_objects = local_objects + palabos_library

env.Program(all_objects, LIBS=libraries, LIBPATH=libraryPaths) 
```

**我的问题是：**

当我更改示例目录中的源文件 rectangleChannel3D.cpp 并运行 make 时，不应重建 palabos 库，因为我根本没有更改库项目的源文件（在根目录的 'src' 目录中） . 但实际上 lib 文件“libplb.a”**已**被重建！所以为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:37:25.780

我同意布雷迪的观点。尝试联系您正在尝试构建的项目。

或者，如果你没有从他们那里得到帮助，和/或真的想自己解决这个问题，SCons 有一个标志`--debug=explain`，它会告诉你为什么要构建/重建任何对象。

# ajax - wp-load.php 未找到 - 404 - Buddypress & Ajax

> ID：10353697
> 
> 赞同：0
> 
> 时间：2012-04-27T15:44:09.887
> 
> 标签：ajax, buddypress

我遇到了 Buddypress ajax 调用的问题。正在拨打电话，但是在回调中我遇到了问题。我正在使用自定义主题，并带有一些自定义页面供好友按。加载所有相同的 javascript 文件，并且 ajaxurl 被定义为正常。

当我与 Buddpress 中的任何内容（收藏夹、发布消息、评论等）进行交互时，我在控制台中的 wp-load.php 上得到 404。内容就在那里。ajax 函数本身就好像您刷新页面内容已更新一样。

尝试了一些东西来修复，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:30:45.750

After agonising on this for a while, there was a simple fix which i placed in the Ajax.php file.

`status_header( 200 );`

# php - 为什么这个 jquery 不滑动切换我的 php 生成列表？

> ID：10353698
> 
> 赞同：0
> 
> 时间：2012-04-27T15:44:11.823
> 
> 标签：php, jquery

为什么这个 jquery 不滑动切换我的 php 生成列表？

我试过改变一些东西来让它工作，但没有一个工作。

前任：`$('ol>li:has(ol)').click` `$(this).children('ol').slideToggle();` `$(this).siblings('ol').slideToggle();`

PHP：

```
function listFolderFiles($dir){
    $ffs = scandir($dir);
    echo '<ol class="list_hold">';
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..'){
            echo '<li class="list">'.$ff;
            if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff);
            echo '</li>';
        }
    }
    echo '</ol>';
} 
```

查询：

```
$(document).ready(function(){
    $('ol ol').slideUp();
    $('ol>li').click(function(){
        $(this).next('ol').slideToggle();
    });
}); 
```

HTML 示例：

```
<ol>
<li class="list">find_folders
<ol class="list_hold" style="display: none; ">
    <li class="list">Thumbs.db</li>
    <li class="list">find.css</li>
    <li class="list">find.php</li>
    <li class="list">index.php</li>
    <li class="list">minus.png</li>
    <li class="list">plus.png</li>
    <li class="list">test folder
        <ol class="list_hold" style="display: none; ">
            <li class="list">bananas</li>
        </ol>
    </li>
</ol>
</li>
</ol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:03:39.997

根据您提供的 html，您需要执行以下操作：

```
$('li:has(ol)').each(function () {
    $(this).children('ol').slideUp();
    $(this).on("click", function (event) {
        event.stopPropagation();
        $(this).children('ol').slideToggle();
    });
}); 
```

[http://jsfiddle.net/farneman/n2Arc/2](http://jsfiddle.net/farneman/n2Arc/2)

主要问题是您的选择器与您的实际 html 不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:47:17.940

尝试这个：

```
$(document).ready(function(){
    $('ol ol').slideUp();
    $('ol>li').on("click", function(){
        $(this).next('ol').slideToggle();
    });
}); 
```

* * *

`on`适用于动态生成的内容，例如由 PHP 的`echo`. 当您向它们添加点击处理程序时，这些`echoed`元素不存在于页面上；这就是为什么您的点击事件不起作用的原因。

无法从您的 PHP 中看到您的 HTML 是什么样的，但您可能需要这样的东西？

```
$('ol>li').live("click", function(){
    $(this).parent().next('ol').slideToggle();
}); 
```

假设您的 HTML 看起来像这样：

```
<ol>
    <li> </li>
</ol>

<ol>
    <li> </li>
</ol> 
```

问题是`this`指单击的元素（`<li>`在本例中为），在您的情况下它没有`<ol>`兄弟姐妹。`<li>`您需要下一个的父级的兄弟姐妹`<ol>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:24:46.780

可能想试试这个：

```
$('ol ol').slideUp();
$('ol>li').click(function(e) {
    e.stopPropagation();
    $(this).children('ol').slideToggle();
});​ 
```

您正在使用 .next() 它适用于兄弟元素，但您的有序列表实际上是父列表的子级。在这种情况下，您需要使用像 find() 或 children() 这样的选择器。

**[jsFiddle 示例](http://jsfiddle.net/j08691/JQCdm/)**。

# mysql - 在事务中，如何在事务完成之前阻止对受影响行的读取？

> ID：10353699
> 
> 赞同：5
> 
> 时间：2012-04-27T15:44:14.077
> 
> 标签：mysql, transactions

我相当确定这有一个简单的解决方案，但到目前为止我还没有找到它。提供了一个隔离级别设置为 SERIALIZABLE 的 InnoDB MySQL 数据库，并给出以下操作：

```
BEGIN WORK;
SELECT * FROM users WHERE userID=1;
UPDATE users SET credits=100 WHERE userID=1;
COMMIT; 
```

我想确保一旦事务中的 select 发出，对应于 userID=1 的行就被锁定以供*读取*，直到事务完成。就目前而言，如果事务正在进行，则对该行的 UPDATE 将等待事务完成，但 SELECT 只会读取先前的值。我知道这是在这种情况下的预期行为，但我想知道是否有办法锁定行，这样 SELECT 也会等到事务完成返回值？

我正在寻找的原因是，在某个时候，如果有足够多的并发用户，可能会发生这样的情况：当前一个交易正在进行时，其他人会读取“信用”来计算其他东西。理想情况下，其他人运行的代码应该等待事务完成才能使用新值，否则可能会导致不可逆转的异步问题。

请注意，我不想锁定整个表进行读取，只锁定特定行。

此外，我可以在表中添加一个布尔“锁定”字段并将其设置为 1 每次我开始事务时，但我并不觉得这是这里最优雅的解决方案，除非绝对没有其他方法可以直接通过mysql处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:35:45.473

我找到了一种解决方法，特别是：

> SELECT ... LOCK IN SHARE MODE 在读取的行上设置共享模式锁。共享模式锁使其他会话能够读取行但不能修改它们。**读取的行是最新可用的，因此如果它们属于尚未提交的另一个事务，则读取会阻塞，直到该事务结束。**

（[来源](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)）

似乎可以在依赖事务数据的关键 SELECT 语句中包含 LOCK IN SHARE MODE，并且它们确实会在检索行之前等待当前事务完成。为此，事务必须明确使用 FOR UPDATE（与我给出的原始示例相反）。例如，给定以下内容：

```
BEGIN WORK;
SELECT * FROM users WHERE userID=1 FOR UPDATE;
UPDATE users SET credits=100 WHERE userID=1;
COMMIT; 
```

我可以在代码中的其他任何地方使用：

```
SELECT * FROM users WHERE userID=1 LOCK IN SHARE MODE; 
```

由于该语句未包装在事务中，因此锁会立即释放，因此对后续查询没有影响，但是如果在事务中选择了涉及 userID=1 的行进行更新，则该语句将等待事务完成，这正是我想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:14:28.883

您可以尝试*SELECT ... FOR UPDATE*锁定读取。

*SELECT ... FOR UPDATE 读取最新的可用数据，在它读取的每一行上设置排他锁。因此，它设置了与搜索的 SQL UPDATE 将在行上设置的锁相同的锁。*

请浏览以下网站：[http ://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)

# recursion - 如何使这段代码尾递归？

> ID：10353701
> 
> 赞同：0
> 
> 时间：2012-04-27T15:44:19.450
> 
> 标签：recursion, tail-recursion

假设我有这个以伪代码形式反转列表的函数：

```
def function reverse( list ) :
if ( empty(list) ) 
    return empty_list;
else 
    return append( 
        reverse( list(2, lenght) , 
                 list(1))); 
```

此代码不是尾递归的；我怎样才能让它尾递归？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T16:23:33.713

请参阅：[尾调用](http://en.wikipedia.org/wiki/Tail_call)

对于[F#](http://blogs.msdn.com/b/fsharpteam/archive/2011/07/08/tail-calls-in-fsharp.aspx)

```
let map f l =
    let rec loop acc = function
        | [] -> List.rev acc
        | x::xs -> loop (f x::acc) xs
    loop [] l 
```

用于[反转字符串](http://codemonkeyism.com/string-reversing-part-ii-tail-recursion/)

# html - 重写 DIV 容器的内容，而不是创建新的 HTML 文件

> ID：10353705
> 
> 赞同：0
> 
> 时间：2012-04-27T15:44:31.447
> 
> 标签：html, html-lists

我是新手，我需要为我的网站创建一个导航菜单。创建它的标准方法如下：

```
<ul>
<li><a href="default.html">Home</a></li>
<li><a href="news.html">News</a></li>
<li><a href="contact.html>Contact</a></li>
<li><a href="about.html">About</a></li>
</ul> 
```

因此，每次选择导航项时，都会打开一个新的 HTML 文件。但是是否可以重写特定 DIV 容器的内容而不是创建新的 HTML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:50:44.130

这个小提琴可能会帮助你：http: [//jsfiddle.net/pratik136/JgReZ/](http://jsfiddle.net/pratik136/JgReZ/)

另请阅读：[http ://www.jacklmoore.com/notes/jquery-tabs](http://www.jacklmoore.com/notes/jquery-tabs)

@Shawn 的技术是您的问题的任何解决方案或多或少起作用的基础。但是正如您建议的新手一样，我建议您查看此链接教程。尽管它不能直接回答您的问题，但它正是您想要使用的技术。该技术称为单页应用程序

[http://addyosmani.com/blog/building-spas-jquerys-best-friends/](http://addyosmani.com/blog/building-spas-jquerys-best-friends/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:47:02.633

你可以用 jQuery 做到这一点。有关更改元素的 HTML 内容的详细信息，请参阅[http://api.jquery.com/html/#html2](http://api.jquery.com/html/#html2) ，有关使用 AJAX 异步获取内容的详细信息，请参阅[http://api.jquery.com/jQuery.get/ 。](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:52:26.800

JavaScript 将允许重写容器的内容。如上所述，jQuery 有工具可以使这更容易；在这里学习：http: [//tutsplus.com/lesson/creating-and-appending-content/](http://tutsplus.com/lesson/creating-and-appending-content/)

恕我直言，我永远不会“重写”菜单，但我会使用 CSS 和额外的标签来指出你所在的页面。如果您不断从根本上更改菜单，您将失去或挫败访问者。

# wpf - 数据绑定到 RelativeSource 标记

> ID：10353707
> 
> 赞同：0
> 
> 时间：2012-04-27T15:44:39.300
> 
> 标签：wpf, xaml, data-binding

我正在尝试使用 Tag 属性作为绑定的源，但是当它到达转换器时该值为 null。

我究竟做错了什么？

# 消费者

```
<Button Style="{StaticResource AddNewItemButtonStyle}" Tag="blah" /> 
```

# 捆绑

```
<Style x:Key="AddNewItemButtonStyle" BasedOn="{StaticResource blueButtonStyle}" 
       TargetType="{x:Type Button}">
    ...             
    <AccessText Text="{Binding RelativeSource={RelativeSource Self}, 
                Path=Tag, Converter={StaticResource AddNewItemForLabel}}">
</Style> 
```

# 更新

我使用相同的策略为 ToolTip 添加了一个设置器，并且仅在第二次调用转换器（通过鼠标悬停触发）之后才起作用。

你能明白为什么绑定在第一次通过时不起作用吗？

除了我可以更可靠地使用的标签之外，还有其他地方吗？

# 第二次更新

根据 Phil 的输入，我将样式更改为下面的 xaml。我必须向样式添加模板属性吗？

```
<Style x:Key="AddNewItemButtonStyle" BasedOn="{StaticResource blueButtonStyle}" TargetType="{x:Type Button}">
    <Setter Property="resx:ResxExtension.DefaultResxName" Value="Smack.Core.Presentation.Resources.MasterDetail"/>
    <Setter Property="Content" >
        <Setter.Value>
            <StackPanel Orientation="Horizontal">
                <Image Source="{resx:Resx ResxName=Smack.Core.Presentation.Resources.MasterDetail, Key=bullet_add}" Stretch="Uniform" />
                <AccessText VerticalAlignment="Center" Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Tag, Converter={StaticResource AddNewItemForLabel}}" />
                <ContentPresenter/>
            </StackPanel>
        </Setter.Value>
    </Setter>
    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Tag, Converter={StaticResource AddNewItemForToolTip}}"/>
    <Setter Property="Command" Value="{Binding AddNewItemCommand}" />
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:40:09.617

如果您更改我给您的其他问题的答案中的 xaml

```
<AccessText Grid.Column="1" VerticalAlignment="Center">
    <AccessText.Text>
        <MultiBinding StringFormat="{}_{0} {1}">
            <Binding Source="{StaticResource Test}"/>
            <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Tag"/>
        </MultiBinding>
    </AccessText.Text>
</AccessText> 
```

然后标签将起作用。

或者您可以使用 TemplateBinding 的缩写形式

```
<AccessText Grid.Column="1" VerticalAlignment="Center" Text="{TemplateBinding Tag}"/> 
```

或长格式

```
<AccessText Grid.Column="1" VerticalAlignment="Center" 
    Text="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Tag}"/> 
```

或者，您的样式将像这样工作（为测试而删除的位）：

```
<Style x:Key="AddNewItemButtonStyle" TargetType="{x:Type Button}">
    <Setter Property="Content" >
        <Setter.Value>
            <StackPanel Orientation="Horizontal">
                <AccessText VerticalAlignment="Center" 
                            Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Button}}, Path=Tag}" />
                <ContentPresenter/>
            </StackPanel>
        </Setter.Value>
    </Setter>
    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Tag}"/>
</Style> 
```

# java - 我如何控制 char[] 是否为空？

> ID：10353708
> 
> 赞同：-4
> 
> 时间：2012-04-27T15:44:48.800
> 
> 标签：java

我编写了这段代码来控制 char[] 是否为空。

```
char[] xxx = new char[9]; 

for (int i = 0; i < 9; ++i)
        {
            if (xxx[i]==null)   
            {
                xxx[i]=i; 
            }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:47:45.413

a 的每个元素`char[]`都是 a `char`，它是一个原始类型。原始类型不能`null`，因此您的比较将永远不会返回`true`。如果你更多地说明你想要完成的事情，你可能会得到一些关于如何去做的有用建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:47:49.633

你`char[]`的例子是什么？如果`_board`是 a`char[]`那么您正在检查其中一个是否`char`为空，字符不能为空，因为 char 是原始类型。

我猜你应该这样做

```
if (_board == null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:48:53.917

if (xxx[i]==0) 此代码有效。0 表示 in char 为 null。试试吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:49:00.417

您以令人困惑的方式使用“控制”一词。

您的代码将测试是否`_board[i]`为空。从这个意义上说是正确的。如果它可能会失败

*   `_board`没有定义。
*   `i`没有定义。
*   `_board`不是数组
*   `_board`不是对象数组（只有对象引用可以为空）

`_board[i]`如果不为空，它将“工作”但不会“做任何事情” 。

# hibernate - Hibernate OneToOne 为列添加前缀

> ID：10353715
> 
> 赞同：1
> 
> 时间：2012-04-27T15:45:08.717
> 
> 标签：hibernate

首先，对不起我的英语不好。

我是 Java 程序员，但我没有足够的背景来使用 Hibernate。由于在办公室我们正在尝试学习一些新的技术，因此我正在尝试使用 Hibernate 来帮助我们解决数据库问题。

我有两个课程，一个叫 Processamento，另一个叫 Fila

表 processamento 在 Fila 有一个注册表，由 fila.id 定义

**加工类**

```
@Entity
@Table(name="ra_fila_processamento", schema = "processamento")
public class Processamento implements java.io.Serializable {

    private static final long serialVersionUID = 1L;

    private int idProcessamento;
    private int idFila;
    private int idServidor;

    private Fila fila;

    @Column(name="rfp_id")
    public int getIdProcessamento() {
        return idProcessamento;
    }

    public void setIdProcessamento(int idProcessamento) {
        this.idProcessamento = idProcessamento;
    }

    @Id
    @Column(name="rfp_rf_id")
    public int getIdFila() {
        return idFila;
    }

    public void setIdFila(int idFila) {
        this.idFila = idFila;
    }

    @Column(name="rfp_ser_id")
    public int getIdServidor() {
        return idServidor;
    }

    public void setIdServidor(int idServidor) {
        this.idServidor = idServidor;
    }

    @OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinTable(name="ra_fila", schema="processamento", joinColumns = {@JoinColumn(name="rf_id", unique = true)})
    public Fila getFila() {
        return fila;
    }

    public void setFila(Fila fila) {
        this.fila = fila;
    }

} 
```

**类**

```
@Entity
@Table(name="ra_fila", schema="processamento")
public class Fila implements java.io.Serializable {

    private static final long serialVersionUID = 1L;

    public Fila() {}

    private int idFila;
    private String arquivoFonte;
    private String status;

    @Id
    @Column(name = "rf_id", unique = true, nullable = false)
    @GeneratedValue
    public int getIdFila() {
        return idFila;
    }

    public void setIdFila(int idFila) {
        this.idFila = idFila;
    }

    @Column(name="rf_arquivo_fonte")
    public String getArquivoFonte() {
        return arquivoFonte;
    }

    public void setArquivoFonte(String arquivoFonte) {
        this.arquivoFonte = arquivoFonte;
    }

    @Column(name="rf_status")
    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

} 
```

问题是，当我运行此代码时：

```
 Session session = HibernateUtil.getSessionFactory().openSession();

    session.beginTransaction();

    try {

        Query query = session.createQuery("from Processamento");

        @SuppressWarnings("unchecked")
        List<Fila> fila = query.list();

        session.getTransaction().commit();

        if (fila.size() == 0) return false;

    } catch (HibernateException e) {
        e.printStackTrace();
    } finally {
        session.flush();
        session.close();
} 
```

创建的 HQL 是这样的：

```
select processame0_.rfp_rf_id as rfp1_3_, processame0_.rfp_id as rfp2_3_, processame0_.rfp_ser_id as rfp3_3_, processame0_1_.fila_rf_id as fila4_2_ from processamento.ra_fila_processamento processame0_ left outer join processamento.ra_fila processame0_1_ on processame0_.rfp_rf_id=processame0_1_.rf_id 
```

此 HQL 中的错误是这部分：

```
processame0_1_.fila_rf_id as fila4_2_ 
```

这个**fila_**不应该在那里，我怎样才能正确地做这种关系 OneToOne？我只想获取列 Processamento 并获取它的 Fila。Processamento 在 Fila 只有一项成果。

谢谢。

此致。

[解决了]

主要错误是我不应该使用 JoinTable，我认为 JoinTable 就像一个联合子句。删除 JoinTable 并添加子句 JoinColumn 解决了我的问题，并且选择可以触发另一个选择并使关系存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:03:55.593

您为 Processamento 编写了查询并获取`List<Fila>`它是不行的。

```
Query query = session.createQuery("from Processamento");
List<Processamento> processamentos = query.list();

for(Processamento processamento: processamentos){
   System.out.println(processamento.getFila().getIdFila();
} 
```

# c# - 有没有更好的方法来构造这个 if 语句

> ID：10353718
> 
> 赞同：4
> 
> 时间：2012-04-27T15:45:18.270
> 
> 标签：c#, asp.net

这对我来说似乎一团糟，我的头脑告诉我必须有更好的方法。

我在网页上有 6 个控件。

```
if (printer_make_1.Text != "" && printer_model_1.Text != "" && printer_make_2.Text != "" && printer_model_2.Text != "" && printer_make_3.Text != "" && printer_model_3.Text != "")
{
  // Do something
} 
```

最好/最有效的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T15:49:23.353

如果您想提高可读性或在其他地方使用相同的逻辑，您可以重构为方法：

```
public Boolean AllControlsHaveAValue() {
    return (printer_make_1.Text != ""
        && printer_model_1.Text != ""
        && printer_make_2.Text != ""
        && printer_model_2.Text != ""
        && printer_make_3.Text != ""
        && printer_model_3.Text != "");
} 
```

然后问：

```
if (AllControlsHaveAValue()) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T15:51:37.997

重组从您的数据开始：避免`printer_make_1`、`printer_make_2`...

```
class PrinterData
{
   public string Make { get; set; }
   public string Model { get; set; }
}

PrinterData[] printers = new PrinterData[3];  //or use a List<>

printers[0] = new PrinterData { Make = "PH", Model = "1A" };
...

if (printers.All(p => ! (p.Make == "" || p.Model == "")) )
  ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T15:47:04.917

```
if(new[] { printer_make_1, printer_model_1 ...}.All(l => l.Text != string.Empty)
{
    //do something
} 
```

您可能希望将其拆分为更具可读性：

```
var labels = new[] { printer_make_1, printer_model_1 ... };
if(labels.All(l => l.Text != string.Empty))
{
    //do something
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T15:49:40.663

我通常将该测试放入一个方法中并调用它以使 if 更易于阅读

```
private boolean AreAllPrinterFieldsFilled()
{
    return (printer_make_1.Text != "" 
        && printer_model_1.Text != "" 
        && printer_make_2.Text != "" 
        && printer_model_2.Text != "" 
        && printer_make_3.Text != "" 
        && printer_model_3.Text != "");
} 
```

然后在if中：

```
if (AreAllPrinterFieldsFilled)
{
    // Do something
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T15:49:41.257

有很多方法可以做到这一点——没有一个是优雅的。**做对您（以及可能落后于您的人）最易读的事情。**

我可能会采用这种方法：

```
string makeText = String.Concat(printer_make_1.Text, printer_make_2.Text, printer_make_3.Text);
string modelText = String.Concat(printer_model_1.Text, printer_model_2.Text, printer_model_3.Text);

if (makeText.Length != 0 && modelText.Length != 0)
{
    // Do something
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T15:50:44.970

```
if (!Enumerable.Range(1, 3)
    .Any(i => ((TextBox)FindControl("printer_make_" + i)).Text == "" || 
        ((TextBox)FindControl("printer_model_" + i)).Text == "") {...} 
```

它允许您稍后扩展打印机品牌和型号的数量，但不是强类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T15:57:00.540

```
private bool CheckAllEmpty(params TextBox[] textBoxes)
{
    return textBoxes.All(tb => tb.Text != null);
}

private void Foo()
{
    ...

    if (CheckAllEmpty(tb1, tb2, tb3))
    {
        mbox("tb1, tb2 and tb3 are all empty");
    }
    else
    {
        mbox("tb1, tb2 or tb3 isn't empty");
    }

    ...
} 
```

# ruby-on-rails - 是否有 Ruby on Rails 的测验宝石？

> ID：10353721
> 
> 赞同：7
> 
> 时间：2012-04-27T15:45:27.407
> 
> 标签：ruby-on-rails, ruby, gem

我在 Ruby on Rails 中寻找一个简单的测验宝石。它需要向用户展示多项选择问题（单选按钮，仅限复选框），计算正确/错误答案，并在最后显示结果。测验将有大约 25 个问题 - 每页 1 个问题。它还需要与我正在构建的站点集成，因此它不能是独立站点或第三方站点。

到目前为止，我已经找到了这颗宝石，看起来很有希望： [https ://github.com/NUBIC/surveyor](https://github.com/NUBIC/surveyor)

有人知道 Rails 中的任何其他测验宝石吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T15:49:48.950

测量员宝石非常强大，我可以推荐它。您应该注意一件事：您在 dsl（具有特殊且易于理解的语法的 ruby​​ 文件）中编写调查，然后运行 ​​rake 任务。这意味着它对于一次性调查非常有用，开发人员可以在其中生成它（比手动进行更容易和更快），但如果您希望非技术人员自己生成调查则不行。

# java - Java gui框架重叠

> ID：10353723
> 
> 赞同：1
> 
> 时间：2012-04-27T15:45:51.853
> 
> 标签：java, dialog, applet, frame

我有一个小程序，上面有两个按钮：

当我们单击**Button1**时，会打开一个框架。
当我们单击**Button2**时，会显示一个对话框（它是新框架的子框架）。

现在假设如果当我们单击**Button1**时，打开的新框架现在位于我的小程序后面，并且没有完全对齐（未最小化）

现在，当我按下**Button2**时，弹出的对话框就在我的小程序前面，但是当我单击对话框的标题时，小程序和框架都会向前移动（它们都同时显示）。

所以我基本上只想在单击对话框时将小程序放在对话框后面（将框架留在背景中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:32:02.267

`frame.setVisible(false);`在**Button2**的 ActionListener中添加一个。

# jqplot - jqPlot - 有没有办法只标记特定的条形图？

> ID：10353724
> 
> 赞同：1
> 
> 时间：2012-04-27T15:45:55.967
> 
> 标签：jqplot

我的 jqPlot 图包含 200 个垂直条。我将短路的条涂成绿色，最长的条涂成红色，其他的涂成黄色。

如果我做

```
pointLabels: {
    show: true
} 
```

然后我得到 200 个点标签，它们都被压在一起，不可读。

是否可以只标记最短和最长的条形？

我已阅读此页面但无法找到解决方案：

[http://www.jqplot.com/docs/files/plugins/jqplot-pointLabels-js.html#$.jqplot.PointLabels.seriesLabelIndex](http://www.jqplot.com/docs/files/plugins/jqplot-pointLabels-js.html#%24.jqplot.PointLabels.seriesLabelIndex)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:20:51.653

为什么不将 'ticks' 传递给图表时将一些刻度设置为空字符串`""`。我还建议您使用此设置来旋转刻度标签：

```
tickRenderer: $.jqplot.CanvasAxisTickRenderer,
tickOptions: {
  angle: -45
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:20:44.593

如果有人感兴趣，这就是我所做的：

```
var shortest = 5; // find shortest somehow
var longest = 10; // find longest somehow

var myLabels = [];
for (var i = 0; i < histogramData.length; i++) {
    myLabels[i] = "";
}

myLabels[shortest] = shortest;
myLabels[longest] = longest; 
```

然后设置以下 jqPlot 选项：

```
pointLabels: {
    show: true,
    labels: myLabels,
    hideZeros: true
} 
```

唯一的缺点是，当您有许多像我这样的 x 轴条目时，**这会使缩放速度变慢。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:59:47.563

据说 jqplot 不支持智能轴渲染，这意味着截断标签，这样相邻的标签就不会冲突在一起。但是您可以使用角度选项，这样标签就不会发生冲突。但是对于大量数据，它也不起作用。无论要绘制图表的容器大小如何，jqplot 仅计算必要的轴刻度。

```
 If you have worked with Google chart or like thing you can see they are not prioritizing axis ticks or something, they calculate the axis according to data and the plot area both. So the answer is even if you angle the tick labels you will come up with a limit. I'm not saying cheers! for this 
```

对不起！..

# c# - 修复了 TextBox 中的文本

> ID：10353726
> 
> 赞同：0
> 
> 时间：2012-04-27T15:46:05.243
> 
> 标签：c#, wpf, textbox

如何将固定文本动态添加到 TextBox？“固定文本”是指用户输入无法删除的文本。

例如 CMD 中的路径：

```
C:\Program Files>cd ..
C:\> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:57:25.903

我假设您想要一个可编辑的文本框，它的开头有一些用户无法编辑的固定文本。如果是这样，那么这似乎可行 - 它基于 Blend 中提取的标准文本框样式...

您需要在您的 xaml 根目录中有以下命名空间声明：

```
 xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" 
```

然后使用这个模板：

```
 <ControlTemplate TargetType="{x:Type TextBox}">
        <Microsoft_Windows_Themes:ListBoxChrome x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderFocused="{TemplateBinding IsKeyboardFocusWithin}" SnapsToDevicePixels="true">
        <StackPanel Orientation="Horizontal">
            <TextBlock VerticalAlignment="Center">This is fixed:</TextBlock>
            <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
          </StackPanel>
    </Microsoft_Windows_Themes:ListBoxChrome>
    <ControlTemplate.Triggers>
        <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

如果要将其包装在自定义控件或用户控件中，则可以通过自定义属性以编程方式设置固定文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:50:48.717

动态填充文本时 TextBox IsReadOnly = true？如果您使用 MVVM 将 IsReadOnly 绑定到 ViewModel 中的属性，则当该 ViewModel 填充文本时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:51:10.633

您可以改用文本块。如果您必须使用文本框，则可以将 IsReadOnly 属性更改为“True”

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-27T15:57:48.023

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (textBox1.SelectionStart < LengthOfFixedString)
        e.SuppressKeyPress = true;
} 
```

# sql-server - SQL Server：检查其他表中是否存在所有行

> ID：10353727
> 
> 赞同：8
> 
> 时间：2012-04-27T15:46:06.517
> 
> 标签：sql-server

我需要知道一个表中的所有行是否存在于另一个表中：

```
declare @Table1 table (id int)
declare @Table2 table (id int)

insert into @Table1(id) values (1)
insert into @Table1(id) values (4)
insert into @Table1(id) values (5)

insert into @Table2(id) values (1)
insert into @Table2(id) values (2)
insert into @Table2(id) values (3)

if exists (select id from @Table1 where id in (select id from @Table2))
    select 'yes exists'
else
    select 'no, doesn''t exist' 
```

此查询返回`yes exists`但应该返回`no, doesn't exist`，因为 1 中仅存在 1 `@Table2`，值 4 和 5 不存在。

我应该在查询中更改什么？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T15:56:31.337

```
IF NOT EXISTS (
    SELECT ID FROM @Table1
    EXCEPT
    SELECT ID FROM @Table2
)
SELECT 'yes exists'
ELSE SELECT 'no, doesn''t exist' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:57:27.517

您可以使用[`EXCEPT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)来获取两个表的设置差异。如果返回任何 ID，则两个表不相等：

```
SELECT ID
FROM @Table1
EXCEPT 
SELECT ID
FROM @Table2 
```

EXCEPT 返回左侧查询中未在右侧查询中找到的任何不同值。

所以，要让你的*“不，不存在”*：

```
;WITH diff AS(
    SELECT ID
    FROM @Table1
    EXCEPT 
    SELECT ID
    FROM @Table2
)
SELECT CASE WHEN COUNT(diff.ID) = 0 
         THEN 'yes exists'
         ELSE 'no, doesnt exist'
         END AS Result
FROM diff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:55:02.567

```
select case when count(*) > 0 then 'no' else 'yes' end as AllExist
from @Table1 t1
left outer join @Table2 t2 on t1.id = t2.id
where t2.id is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:55:09.137

只要两个 id 列都是唯一的（如果它们是 id，它们应该是唯一的），这将起作用

```
DECLARE @totalRows int;
SET @totalRows = SELECT count(*) from Table1;

RETURN (@totalRows == SELECT count(*) from Table1 JOIN Table2 on Table1.id = Table2.id) 
```

# php - 为什么用 PHP 编写 html 文件时停滞在 '&' 处？

> ID：10353729
> 
> 赞同：0
> 
> 时间：2012-04-27T15:46:13.117
> 
> 标签：php, html

我有一个关于用 PHP 编写 HTML 文件的问题。

我有这个功能：

```
function openHTML ($file) {
 if (file_exists($file)) {
 $handle = fopen($file, "r");
 $output = fread($handle, filesize($file));
  fclose($handle);
 return $output; // output file text
 }else{
 return "This file is not exists";
 }
}

function saveHTML ($file,$string) {
 $a = fopen($file, 'w');
 fputs($a,stripslashes($string));
 fclose($a);
 return "success";
} 
```

我用`openHTML`的时候还好。但不幸的是，在我打开的文件中`openHTML()`有一些`&`，然后我正在保存，`saveHTML()`但随后保存的字符串或代码停滞在 char `&`。

示例：更新！
我打开空白`file.html`并`openHTML()`开始在下面输入一些字符串：

```
<html>
<head>
</head>
<body>
This is my login page & user page
</body>
</html> 
```

在我保存代码后`saveHTML()`：

```
<html>
<head>
</head>
<body>
This is my login page 
```

最后代码丢失。停在`&`。

我用过`fputs`, `utf8_encode`, `fwrite`, `file_put_contents`. 还是没有解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:48:28.363

单独的 & 符号在 PCDATA 部分中无效。改为使用`&amp;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:56:12.960

尝试

```
 $output = htmlentities($output); 
```

在你要保存的字符串上。

[在这里查看](http://php.net/manual/en/function.html-entity-decode.php)

它将所有 HTML 实体更改为其适用的字符。在这种情况下，您的 & 将更改为

```
 &amp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T15:52:40.523

尝试使用`fwrite()`instaed of`fputs()`

# jquery - jQuery代码区别

> ID：10353731
> 
> 赞同：0
> 
> 时间：2012-04-27T15:46:23.693
> 
> 标签：jquery

首先让我说我不是 JavaScript 程序员或 jQuery 大师，我实际上只是从 jQuery 开始。

我有以下两个 jQuery 代码：

```
$('.tipTrigger').hover(function(){
    $(this).toggleClass('active').prev('.tipText').stop(true, true).fadeToggle('fast'); 
}); 
```

和

```
if ($(".tooltip-container").length > 0){        
    $('.tipTrigger').hover(function(){
        $(this).toggleClass('active').prev('.tipText').stop(true, true).fadeToggle('fast'); 
    });
} 
```

我对此有几个问题：

1.  上面的两个代码基本上有什么区别？
2.  是什么意思`if ($(".tooltip-container").length > 0){`？
3.  使用上述内容有什么好处`if`吗？
4.  从开发人员的角度来看，什么更“有效”？（也就是说，如果这么小的东西会以任何方式对性能产生相当大的影响）

对于这个简单的比较的任何其他评论/帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:48:07.840

第二个设置悬停功能仅当有一个或多个 DOM 元素与 class `"tooltip-container"`。

两者都遍历 DOM 以查找具有指定类的元素；效率上的差异是否值得取决于 DOM，何时调用语句等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T15:49:30.540

1.  只有在以下情况下才会注册悬停功能...
2.  ...页面中至少有一个具有“工具提示容器”类的元素。
3.  可能会有轻微的性能，除非这些工具提示的工作方式有一些我不知道的隐藏魔法。
4.  如果它不会减慢速度或出错，我通常更喜欢更简洁的代码而不是微小的性能调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T15:58:08.867

*   上面的两个代码基本上有什么区别？

    > 第二个只会设置悬停功能，如果页面上有一个具有类“工具提示容器”的元素

*   if '($(".tooltip-container").length > 0){' 是什么意思？

    > 简单的 if 语句来测试`tooltip-container`文档上是否存在具有类的元素

*   使用上述内容有什么好处`if`吗？

    > 简而言之，在这种情况下，不是真的，因为除非存在具有类的元素，否则不会分配 .hover `tipTrigger`。这也可能导致性能问题，因为它只检查一个`tooltip-container`元素是否存在。如果这是一项确保`tipTrigger`“在”所述容器“内部”的检查，它将失败，因为一旦`tooltip-container`找到一个带有的元素，所有带有`tipTrigger`悬停功能的元素都将被分配，这可能是不希望的。

*   从开发人员的角度来看，什么更“有效”？（也就是说，如果这么小的东西会以任何方式对性能产生相当大的影响）

    > 如果您必须检查以确保只有`tipTrigger`元素内`tooltip-container`的元素被触发，您可以考虑使用 jQuery 的[.each 函数](http://api.jquery.com/each/)或在选择器中使用 CSS，如下所示

>

```
$('.tooltip-container .tipTrigger').hover(function(){
    $(this).toggleClass('active').prev('.tipText').stop(true, true).fadeToggle('fast'); 
}); 
```

# 为了进一步了解

*   [.toggleClass](http://api.jquery.com/toggleClass/) : 在此元素上活动的切换类
*   [.prev](http://api.jquery.com/prev/)：将链移动到引用具有`tipText`在 dom 中当前元素之前的类的元素
*   [.stop](http://api.jquery.com/stop/) : 停止该元素上的任何电流变化
*   [.fadeToggle](http://api.jquery.com/fadeToggle/)：将开始将元素淡入“隐藏”

# r - r中的翻译（重新编码）错误

> ID：10353736
> 
> 赞同：5
> 
> 时间：2012-04-27T15:46:46.053
> 
> 标签：r, replace, dataframe

这是一个小例子：

```
X1 <- c("AC", "AC", "AC", "CA", "TA", "AT", "CC", "CC")
X2 <- c("AC", "AC", "AC", "CA", "AT", "CA", "AC", "TC")
X3 <- c("AC", "AC", "AC", "AC", "AA", "AT", "CC", "CA")
mydf1 <- data.frame(X1, X2, X3) 
```

输入数据框

```
 X1 X2 X3
1 AC AC AC
2 AC AC AC
3 AC AC AC
4 CA CA AC
5 TA AT AA
6 AT CA AT
7 CC AC CC
8 CC TC CA 
```

功能

```
# Function 
atgc <- function(x) {
 xlate <- c( "AA" = 11, "AC" = 12, "AG" = 13, "AT" = 14,
"CA"= 12, "CC" = 22, "CG"= 23,"CT"= 24,
 "GA" = 13, "GC" = 23, "GG"= 33,"GT"= 34,
 "TA"= 14,  "TC" = 24, "TG"= 34,"TT"=44,
"ID"= 56, "DI"= 56, "DD"= 55, "II"= 66
 )
  x =   xlate[x]
 }
outdataframe <- sapply (mydf1, atgc)
outdataframe
   X1 X2 X3
AA 11 11 12
AA 11 11 12
AA 11 11 12
AG 13 13 12
CA 12 12 11
AC 12 13 13
AT 14 11 12
AT 14 14 14 
```

问题，AC 在输出中不等于 12，而是 11，其他情况类似。乱七八糟！

（Exta：我也不知道如何摆脱行名。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:50:04.807

只需使用`apply`和转置：

```
t(apply (mydf1, 1, atgc)) 
```

要使用`sapply`，然后使用：

1.  `stringsAsFactors=FALSE`创建数据框时，即

    ```
    mydf1 <- data.frame(X1, X2, X3, stringsAsFactors=FALSE) 
    ```

    （感谢@joran）或

2.  将函数的最后一行更改为：`x = xlate[as.vector(x)]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:22:19.970

`match 函数可以使用带有“字符”类的目标匹配向量的因子参数：

```
atgc <- function(fac){ c(11, 12, 13, 14, 
12, 22, 23, 24, 
13, 23, 33, 34, 
14, 24, 34,44, 
56, 56, 55, 66 )[ 
match(fac, 
  c("AA", "AC", "AG", "AT",
    "CA", "CC", "CG","CT",
    "GA", "GC", "GG","GT" ,
    "TA",  "TC", "TG","TT",
    "ID", "DI", "DD", "II") )
                ]}
#The match function returns an index that is designed to pull from a vector.
 sapply(mydf1, atgc)
     X1 X2 X3
[1,] 12 12 12
[2,] 12 12 12
[3,] 12 12 12
[4,] 12 12 12
[5,] 14 14 11
[6,] 14 12 14
[7,] 22 12 22
[8,] 22 24 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:01:55.440

这样，您只需为矩阵中的每个字母提供替换值，而无需仔细检查以确保您考虑了所有组合并正确匹配它们，尽管在您的示例中组合是有限的。

用值及其替代定义列表：

```
trans <- list(c("A","1"),c("C","2"),c("G","3"),c("T","4"),
  c("I","6"),c("D","5")) 
```

使用定义替换函数`gsub()`

```
atgc2 <- function(myData, x) gsub(x[1], x[2], myData) 
```

创建一个具有替换值的*矩阵*`mydf1`（在这种情况下，转换为矩阵会根据需要返回字符值`gsub()`，但您需要在继续之前检查这是否适用于任何其他数据）

```
mymat <- Reduce(atgc2, trans, init = as.matrix(mydf1)) 
```

中的值`mymat`仍然是它们最初出现的顺序，所以`"AC" = "12"`和`"CA" = "21"`，所以重新排序它们（并将它们转换为数值）

```
ansVec <- sapply( strsplit( mymat, split = ""),
  function(x) as.numeric( paste0( sort( as.numeric(x) ), collapse = ""))) 
```

该对象`ansVec`是一个向量，因此将其转换回 data.frame

```
( mydf2 <- data.frame( matrix( ansVec, nrow = nrow(mydf1) ) ) )
#   X1 X2 X3
# 1 12 12 12
# 2 12 12 12
# 3 12 12 12
# 4 12 12 12
# 5 14 14 11
# 6 14 12 14
# 7 22 12 22
# 8 22 24 12 
```

对于这种情况，其他答案肯定更快。但是，随着替换操作变得越来越复杂，我认为这种解决方案可能会带来一些好处。但是，此方法无法解决的一个方面是检查字符串`"ATTGCG"`中的`"ATT"`和`"TTG"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T00:53:43.337

实际上，我认为您想将原始向量表示为因子，因为它们表示有限的一组水平（DNA 二核苷酸）而不是任意字符值。

```
lvls = c("AA", "AC", "AG", "AT", "CA", "CC", "CG", "CT", "GA", "GC", 
         "GG", "GT", "TA", "TC", "TG", "TT", "ID", "DI", "DD", "II")
X1 <- factor(c("AC", "AC", "AC", "CA", "TA", "AT", "CC", "CC"), levels=lvls)
X2 <- factor(c("AC", "AC", "AC", "CA", "AT", "CA", "AC", "TC"), levels=lvls)
X3 <- factor(c("AC", "AC", "AC", "AC", "AA", "AT", "CC", "CA"), levels=lvls)
mydf1 <- data.frame(X1, X2, X3) 
```

同样，“11”是因子的级别，而不是数字 11。所以级别之间的映射是

```
xlate <- c("AA" = "11", "AC" = "12", "AG" = "13", "AT" = "14",
           "CA"= "12", "CC" = "22", "CG"= "23","CT"= "24",
           "GA" = "13", "GC" = "23", "GG"= "33","GT"= "34",
           "TA"= "14",  "TC" = "24", "TG"= "34","TT"="44",
           "ID"= "56", "DI"= "56", "DD"= "55", "II"= "66") 
```

并“重新调整”单个变量

```
levels(X1) <- xlate 
```

要重新调整数据框的所有列，

```
as.data.frame(lapply(mydf1, `levels<-`, xlate)) 
```

使用`sapply`是不合适的，因为这会创建一个（字符的）矩阵，即使您已将其命名为`outdataframe`. 这种区别实际上可能对这可能代表的 SNP 数据很重要，因为作为矩阵的 1000 个样本中的数百万个 SNP 将被实现一个长度比最长向量 R 可以存储的长度更长的单个向量（模大向量支持被引入R-devel），而数据框将是一个向量列表，每个向量只有数百万个元素。

# asp.net-mvc - viewbag 是最佳选择吗？

> ID：10353739
> 
> 赞同：0
> 
> 时间：2012-04-27T15:46:57.933
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewbag

我正在尝试构造一个 @Html.ActionLink 以返回上一页，但要返回上一页我需要传入一个 id 参数。

ShowController/Details 列出了一个由 int id 定义的电影，在这个列表中是一个链接，可以查看导演的详细信息：

```
@Html.ActionLink( "(Director Bio)", "Index", "Director", new { searchString = item.Director.Name }, null) 
```

当用户想要返回影片时，StoreController/Details ActionResult 正在等待它的 int。

我试图将 id 传递给 viewBag：

```
 public ActionResult Details(int id)
    {
        var item = from s in db.Shows.Where(si => si.ShowId == id) select s;

        ViewBag.id = id;

        return View(item);
    } 
```

这在 Details 视图中显示良好我无法在 DirectorController/Index 视图中将其拾取以在 actionLink 中使用，我该怎么办？

# objective-c - AVAudioPlayer 延迟 setImage 的发生

> ID：10353752
> 
> 赞同：0
> 
> 时间：2012-04-27T15:47:38.777
> 
> 标签：objective-c, ios, loops, view, avaudioplayer

免责声明：我对 iOS 编程比较陌生，并且我正在尝试自学基础知识，只是为了好玩……所以要温柔:-)

* * *

我正在构建一个应用程序，它可以播放一系列使用 AVAudioplayer 串在一起的 .mp3 文件。到目前为止，该部分运行良好。IBActions 和 IBOutlets 连接起来。点击按钮，播放音频。

我的问题是：我的播放按钮已直接添加到 main.storyboard，设置和自定义，其初始状态在 In​​terface Builder 中定义。当我单击播放时，我想更改按钮的图像以指示它正在播放。然而，一旦音频开始，看起来视图似乎是......暂停，或什么的。按钮图像保持不变，直到音频播放完毕。只有这样，按钮图像才会自行更新——几乎没有用处。

我也刚刚尝试设置另一个未附加到此特定按钮的随机 UIImageView 的图像。同样的经历。一旦我注释掉我的 playAudioArray 方法，按钮交换就会立即起作用。

```
 -(IBAction)start_playing:(UIButton*)pressed_button {
    [_btn_start setImage:[UIImage imageNamed:@"btn_on-active"] forState:UIControlStateNormal];

    [self playAudioArray];
    } 
```

我希望我已经留下了足够的继续...任何想法/意见/建议？

谢谢一百万 - 德鲁

# #

**更新：**

我发现当我将音频播放器放在 lopp 中时，更新视图会失败。此代码工作正常...

```
 if (audioPlayer.playing == YES) {

```
[audioPlayer pause];
[sender setImage:[UIImage imageNamed:@"btn_on.png"] forState:UIControlStateNormal];
[_btn_stop setImage:[UIImage imageNamed:@"btn_off.png"] forState:UIControlStateNormal];

} else {

NSString *path = [[NSBundle mainBundle] pathForResource:@"audio_file1" ofType:@"mp3"];
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
audioPlayer.volume = 1.0;
audioPlayer.numberOfLoops = 0;
[audioPlayer setMeteringEnabled: YES];
[audioPlayer play];

//changes the image when the button is pressed
[sender setImage:[UIImage imageNamed:@"btn_on.png"] forState:UIControlStateNormal];
[_btn_stop setImage:[UIImage imageNamed:@"btn_off.png"] forState:UIControlStateNormal];

} 
``` 但是这段代码没有下面没有。

```
 } else {

```
//changes the image when the button is pressed
[sender setImage:[UIImage imageNamed:@"btn_on.png"] forState:UIControlStateNormal];
[_btn_stop setImage:[UIImage imageNamed:@"btn_off.png"] forState:UIControlStateNormal];

NSArray  *theSoundArray = [NSArray arrayWithObjects:@"audio1",@"audio2",@"audio3",nil];

for (int i = 0; i < totalSoundsInQueue;) {

NSString *sound = [theSoundArray objectAtIndex:i];

// Wait until the audio player is not playing anything
while(![audioPlayer isPlaying]){

NSString *path = [[NSBundle mainBundle] pathForResource:@"mom" ofType:@"mp3"];
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
audioPlayer.volume = 1.0;
audioPlayer.numberOfLoops = 0;
[audioPlayer setMeteringEnabled: YES];
[audioPlayer play];

i++;

}        

}

} 
``` 音频播放正常，循环播放我所有的声音，没有出现错误。只是，我的按钮的“开启状态”只有在循环播放完成后才会设置。我已经尝试过许多不同类型的循环方法。For, for each, while...每次我开始循环播放声音时，音频播放效果很好，但显示失去了所有焦点。

这使我想起。一旦我进入循环，我的“停止”按钮就会失去它的可点击（可点击）性质。直到循环完成运行。如果我不在循环中，停止按钮可以正常工作，没有问题。

抱歉，如果我在这里犯了一个完全的新手错误……有人想/评论吗？

            回答 #1

赞同：0

时间：2012-05-04T14:27:44.703

您`for loop`正在占用主线程，使其 UI 无响应。不要连续运行 for 循环，而是将自己设置为 AVAudioPlayer 的代表。一旦音频播放器完成播放，它将向委托发送消息`- (void) audioPlayerDidReachEnd;`（您必须实现）。然后您可以在该实现中播放队列中的下一个音频文件。无论如何，您真的想将自己设置为代表。AVAudioPlayer 将发送您的代理消息以处理中断（如来电）和解码错误。您想优雅地处理这些事件。

我认为音频播放良好的原因是它具有更高的优先级并在单独的线程上运行。UI 变得无响应的原因是即使动画/UI 更改发生在单独的线程上，它们也是从主线程启动的。但是所有 UI 更改都排队到运行循环的末尾（因此可以进行优化）。但是，该运行循环永远不会结束，因为`for loop`在播放所有音频文件之前，您永远不会结束。音频文件可以按顺序播放，因为它们是在其中启动`for loop`并在单独的线程上运行的。说得通？一般来说，你真的不想占用主线程。

```

```

# html - 以像素为单位设置 CSS 字体大小时，该值是指字母的宽度还是高度？

> ID：10353761
> 
> 赞同：30
> 
> 时间：2012-04-27T15:48:10.293
> 
> 标签：html, css

字体大小的像素值是指字体的高度还是字体的宽度？

CSS：

```
.sixteen {
  font-size: 16px;
} 
```

HTML：

```
<span class='sixteen'>a</span> 
```

“a”是 16 像素高还是 16 像素宽，或者两者都像最大宽度/高度一样，以便整个字符适合 16 像素的框？

我所看到的所有文档在这件事上都模棱两可。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-27T15:50:30.213

高度——特别是从上升部分的顶部（例如，“h”或“l”（el））到下降部分的底部（例如，“g”或“y”）。[请参阅http://en.wikipedia.org/wiki/Typeface_anatomy](http://en.wikipedia.org/wiki/Typeface_anatomy)上关于 Type Anatomy 的有趣文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:58:28.003

该`font-size`属性指定字体的大小，无论使用什么单位。字体的大小可以用字体的高度来表征，但这也只是一个松散而务实的描述；字符可以在由字体大小定义的级别之上和之下延伸。大小或多或少是一个抽象属性，不应该期望它对应于任何字符的高度（仍然小于宽度）。

特别是，设计一个字母“a”占据整个字体高度的字体是完全错误的。“a”的高度通常约为字体大小的一半，但这肯定会因字体而异（尝试在 Times New Roman 和 Verdana 中使用“a”进行测试，使用相同的字体大小）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-28T08:44:48.633

根据[Vincent De Oliveira 的这篇文章](https://iamvdo.me/en/blog/css-font-metrics-line-height-and-vertical-align)，实际上与字符的*实际*高度`font-size`无关。它甚至不是包含文本的内联元素的高度。

 *当然，`font-size`属性值越大，文本越大。但像素值并不直接转化为文本的实际大小。

但是，像素值`font-size`设置的大小`1em`用于设置边距、填充等。*

# javascript - 为什么 ASP 经典 Select Case 分支中不会弹出 javascript 警报？

> ID：10353763
> 
> 赞同：0
> 
> 时间：2012-04-27T15:48:16.110
> 
> 标签：javascript, asp-classic

为什么 JavaScript 警报不会在 ASP 经典 Select Case 分支中弹出？当我放入 Response.End 语句并运行结帐过程时，JavaScript 警报会做他们的事情。但是当我将它们取出时，它们会立即跟随重定向...警报不会弹出。知道为什么吗？

```
If strResponse <> "000" Then
Select Case strResponse
    Case "701"
        %>
        <script type="text/javascript">
            alert("The customer is under 18 years of age based upon the date of birth.");
        </script>
        <%
        'Response.End
        Response.Redirect strRedirectCheckout
    Case "702"
        %>
        <script type="text/javascript">
            alert("The billing address is outside the United States.");
        </script>
        <%
        'Response.End
        Response.Redirect strRedirectCheckout
    Case "707"
        %>
        <script type="text/javascript">
            alert("The account holder does not have sufficient credit available for the transaction amount.");
        </script>
        <%
        'Response.End
        Response.Redirect strRedirectCheckout
    Case Else
        %>
        <script type="text/javascript">
            alert("Unable to obtain an authorization\nClick OK to be redirected back to checkout and please choose another form of payment");
        </script>
        <%
        'Response.End
        Response.Redirect strRedirectCheckout
End Select

Else ' if strResponse does == '000'; SUCCESS!!! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:53:12.427

当您使用 Response.Redirect 时，您正在影响请求的响应代码。当浏览器加载一段内容时，它会得到一个返回码，例如 200 或 401，指示请求的状态。Response.Redirect 发送一个返回码，导致浏览器不呈现它收到的任何内容，而是重定向响应。没有它，浏览器会收到 200 响应并呈现它收到的内容。

HTTP 响应代码详见[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

尤其看

> 10.3 重定向 3xx
> 
> 此类状态码表明用户代理需要采取进一步的行动才能满足请求。

本质上，您不能指示浏览器（通过 HTTP 状态代码）同时呈现页面并将其重定向到其他地方。这些是互斥的，重定向胜过渲染。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T15:53:25.843

因为 Response.Redirect 向浏览器发送消息以开始导航到指示的页面。如果您希望他们首先看到弹出窗口，则在警报之后只需停留在 JavaScript 中并使用 document.location.href=.....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:14:17.197

我会开始想知道为什么您首先将**服务器验证**与**客户端**验证混为一谈...

**客户端验证**是在对其自身的页面执行任何操作之前进行的验证，换句话说，在表单的实际 POST 之前。

**服务器验证**应该在服务器端执行相同的操作，并且应该只发出一条普通消息，例如，可以填充一个`<div>`

从你的例子我会这样做：

* * *

1 -*添加客户端验证*

假设您正在**使用 jQuery**（以方便代码，因为这个想法只是向您展示要采取的路径......），并且您有一个 POST 按钮，编码为

```
<input type="submit" id="btnSave" value="Save" /> 
```

将此添加到页面末尾的`</body>`标记之前：

```
<script type="text/javascript">
$(function() {

  $("form").submit(function() {
    // before the form submit, do this:

    var msg = '';

    if(parseInt($(".input-age-year").val()) < 1994)
        msg += '\nThe customer is under 18 years of age based upon the date of birth.';
    if($(".input-country").val() != 'USA')
        msg += '\nThe billing address is outside the United States.';
    if(parseInt($(".hidden-credit").val()) < parseInt($(".input-amount").val()))
        msg += '\nThe account holder does not have sufficient credit available for the transaction amount.';
    // etc...

    if(msg === '') 
       // message is empty, all is well, let's submit the form
       return true;
    else {
       // there is an error message to show
       alert(msg); // I would show an error div with the message instead though...
    }

  });

});

</script> 
```

顺便说一句，你应该看到[**jQuery Validation Plugin**](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，它好多了！

* * *

2 -*做你的服务器验证*

这始终很重要，因为您可以在不启用 javascript 的情况下提交，它有助于缩小潜在的“黑客”范围

做同样的事情，但重定向到同一页面，向 URL 添加查询字符串或使用`Session`对象来保存错误（记住在页面中显示消息后将其删除）

例如：

```
Dim msg As String = ""

If cInt(Request("frm-age-year")) < 1994 Then
    msg = "<br/>The customer is under 18 years of age based upon the date of birth."
End If

' ...

If msg = "" Then
  ' Continue processing ...
Else
  Response.Redirect Request.ServerVariables("URL") & "?error=" & msg
End if 
```

在`.asp`你有一个地方像

```
<% If Request("error") <> Null Then %>
    <div class="error"><%= Request("error") %></div>
<% EndIf %> 
```

# c# - 没有 Ionic.Zlib.DeflateStream.BaseStream

> ID：10353766
> 
> 赞同：0
> 
> 时间：2012-04-27T15:48:32.427
> 
> 标签：c#, compression, dotnetzip

我正在使用 C# 代码中的 Ionic.Zlib.DeflateStream（我认为又名 DotNetZip），并注意到它没有像 System.IO.Compression.DeflateStream 这样的 BaseStream 属性。有什么简单的方法可以访问它吗？也许是部分类或扩展（不太熟悉这些概念）或者只是我忽略的东西，或者这个库的更新版本？

更新：我在一个以 Ionic.Zlib.DeflateStream 作为参数的大型项目中具有功能。我知道底层流是一个MemoryStream，我想修改代码在底层流中寻找到Position 0，写入几个字节，然后返回到previos Position。这就是我们所说的“kludge”或脏黑客，而不是重写大量代码……但这是我们目前正在寻找的解决方案，而不是需要更多重新测试的其他解决方案。这部分 MemoryStream 中需要更新的几个字节没有被压缩，所以在这件事中在 DeflateStream 之外修改它们就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:22:05.267

我仍然想知道未来项目的其他选择，或者这个答案是否会导致问题，但我想我确实找到了一个选择......

当我这样创建对象时：

```
MemoryStream ms = new MemoryStream();
DeflateStream ds = new DeflateStream(ms,...); 
```

相反，如果我创建一个类，例如：

```
class MyDeflateStream : DeflateStream
{
public MemoryStream RootStream;
} 
```

我可以将上面的代码更改为：

```
MemoryStream ms = new MemoryStream();
MyDeflateStream ds = new MyDeflateStream (ms,...);
ds.RootStream = ms; 
```

然后在我需要访问它的地方创建这样的函数：

```
void Whatever(DeflateStream ds)
{
MyDeflateStream mds = (MyDeflateStream)ds;
MemoryStream ms = mds.RootStream;
} 
```

理想情况下，我只需要修改whatever() 函数，因为有时我可能无法访问最初创建对象的代码，但在这种情况下我可以。所以仍然希望得到答案，即使我找到了一种可能的方法来处理这个问题。

# java - 解析引号之间的文本不后跟两个引号

> ID：10353767
> 
> 赞同：0
> 
> 时间：2012-04-27T15:48:34.220
> 
> 标签：java, regex, parsing

我正在解析一个包含数据的文本文件。

无论何时是文本数据，数据都在引号内。例如：“这里的任何文字”

问题是在数据中我也可以有引号，但它们后面总是会跟着另一个引号。例如：“文本，他说“你好”“”

我尝试了以下方法，但没有成功：

```
 "(.+?)"(?!") 
```

如何定义与该格式的文本数据匹配的正则表达式？

PS：不知道有没有帮助，但是每种类型的数据都用 ; 分隔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:52:47.310

试试这个正则表达式（未测试）：

```
"([^"]|"")*" 
```

**编辑：（**没有意识到你不想匹配引号本身）

```
(?<=")([^"]|"")*(?=") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:17:02.280

参考我在[这里](https://stackoverflow.com/a/8036736/823393)发表的上一篇文章，您应该可以使用以下内容：

```
(?:\"[^\"]*?\")* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:14:47.730

这只会在双引号上拆分，但它也会为您提供引号之外的数据 - 希望这会有所帮助

```
public static void main(String[] args) {
    // TODO code application logic here
    Pattern p = Pattern.compile("[\"]{2}");

    String[] result1 = 
             p.split("\"\"A01 A02\"\" \"\"B01 B02\"\"");
    for (int i=0; i<result1.length; i++)
        System.out.printf("DATA: ]]%s[[\n", result1[i]);
    String[] result3 = 
             p.split("\"\"A21 \" A22\"\" STUFF \"\"B21 B22\"\"");
    for (int i=0; i<result3.length; i++)
        System.out.printf("DATA: ]]%s[[\n", result3[i]);       
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T16:15:43.747

我可以确定，有一个字符，它不是消息的一部分，比如`~`，你可以用 ~ 替换“”，进行匹配，最后转换`~`回`""`。

```
text.replaceAll ("\"\"", "~").
     replaceAll ("(\"[^\"]+)", "($1)").
     replaceAll ("~", "\"\"") 
```

理论上。

实际上，我得到了开头和结尾匹配的引号，所以这个文本：

```
echo 'asdf " I say ""hello"" " foo " you say ""goodbye"" "baz' 
```

被翻译成：

```
echo 'asdf (" I say ""hello"" )(" foo )(" you say ""goodbye"" )("baz' ) 
```

我找不到错误，但也许这个想法很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T16:31:00.853

如果您可以确定输入格式正确（没有不平衡的引号），那么这是有效的（如果格式不正确，那么您想做什么？）：

```
"(([^"]*?)((""[^"]*?)*?))"(?!") 
```

它是一个引号，后跟除引号以外的任何内容零次或多次，后跟任意数量的组，该组由一对双引号后跟任意数量的非引号组成，并以引号结尾而不是引号。

如果您确定每个数据都以 a 结尾，`";`那么它会变得更容易一些

```
"(([^"]*?)((""[^"]*?)*?))"; 
```

但是该行的最后一个以引号结尾`";`还是仅以引号结尾？

在 JoelFan 和 OldCurmudgeon 的启发下，这很有效，而且更简单一些：

```
"((?:[^"]|"")*)" 
```

对于每种模式，数据都在捕获组 1 中。因此您的代码将类似于：

```
while (matcher.find()) {
    data = matcher.group(1);
    /* do whatever you want with the data such as replace '""' with '"' */
} 
```

当然，在将它们编写为 Java 字符串时，您必须对模式中的引号进行转义，因此它们最终在您的代码中看起来像这样：

```
"\"(([^\"]*?)((\"\"[^\"]*?)*?))\"(?!\")" 
```

或者

```
"\"(([^\"]*?)((\"\"[^\"]*?)*?))\";" 
```

或（我将在我的代码中使用的）

```
"\"((?:[^\"]|\"\")*)\"" 
```

# mysql - MySQL 查询永远运行

> ID：10353769
> 
> 赞同：0
> 
> 时间：2012-04-27T15:48:39.760
> 
> 标签：mysql

我有一张包含超过 2.5 亿条记录的表。我们的报告服务器使用类似的查询定期查询该表。

```
SELECT
    COUNT(*),
    DATE(updated_at) AS date,
    COUNT(DISTINCT INT_FIELD) 
FROM
    TABLE_WITH_250_Million 
WHERE
    Field1 = 'value in CHAR' 
    AND field2 = 'VALUE in CHAR' 
    AND updated_at > '2012-04-27' 
    AND updated_at < '2012-04-28 00:00:00' 
GROUP BY
    Field2,
    DATE(updated_at) 
ORDER BY
    date DESC 
```

我试图以相同的顺序在包括 Field1、Field2、Field3 DESC 的表上创建 BTREE 索引，但它没有给我正确的结果。

任何人都可以帮助我如何优化它。我的问题是我无法更改查询，因为我没有此报告服务器从中执行查询的代码。

任何帮助将非常感激。

谢谢

* * *

这是我的桌子：

```
CREATE TABLE backup_jobs ( 
  id int(11) unsigned NOT NULL AUTO_INCREMENT, 
  backup_profile_id int(11) DEFAULT NULL, 
  state varchar(32) DEFAULT NULL, 
  limit int(11) DEFAULT NULL, 
  file_count int(11) DEFAULT NULL, 
  byte_count bigint(20) DEFAULT NULL, 
  created_at datetime DEFAULT NULL, 
  updated_at datetime DEFAULT NULL, 
  status_type varchar(32) DEFAULT NULL, 
  status_param_1 varchar(255) DEFAULT NULL, 
  status_param_2 varchar(255) DEFAULT NULL, 
  status_param_3 varchar(255) DEFAULT NULL, 
  started_at datetime DEFAULT NULL,
  PRIMARY KEY (id),
  KEY index_backup_jobs_on_state (state),
  KEY index_backup_jobs_on_backup_profile_id (backup_profile_id),
  KEY index_backup_jobs_created_at (created_at),
  KEY idx_backup_jobs_state_updated_at (state,updated_at) USING BTREE,
  KEY idx_backup_jobs_state_status_param_1_updated_at (state,status_param_1,updated_at) USING BTREE
) ENGINE=MyISAM AUTO_INCREMENT=508748682 DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:54:35.763

我确信所有 250M 行都没有出现在感兴趣的日期范围内。

问题是日期检查的中间性质会强制进行表扫描，因为您不知道日期在哪里。

我建议您将 250M 行表划分为周、月、季度或年，并且只扫描给定日期范围所需的分区。您只需扫描范围内的分区。这会有所帮助。

如果您走分区的道路，您将需要与 MySQL DBA 交谈，最好是熟悉分区的人。这不适合胆小的人。

[http://dev.mysql.com/doc/refman/5.1/en/partitioning.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:12:29.407

Add the `int_field` into the index:

```
CREATE INDEX idx_backup_jobs_state_status_param_1_updated_at_backup_profile_id ON backup_jobs (state, status_param_1, updated_at, backup_profile_id) 
```

to make it cover all fields.

This way, table lookups go (you will see `Using index` in the plan) which will make your query some `10x` faster (your mileage may vary).

Also note that (at least for the single-date range provided) `GROUP BY DATE(updated_at)` and `ORDER BY date DESC` are redundant and will only make the query to use `temporary` and `filesort` without any real purpose. Not that you can do much about it, though, if you cannot change the query.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T23:57:22.730

根据您的查询，您必须在这里带头 - 最小粒度。我们不知道活动的频率是多少，Field1，Field2 状态条目是什么，您的数据可以追溯到多远，在给定的 SINGLE DATE 有多少条目是正常的。综上所述，我将首先基于与您的查询条件非常匹配的最小粒度来构建索引。

例如：如果您的“Field1”有十几个可能的“CHAR”值，并且您正在应用“IN”子句，并且 Field1 是索引中的第一个，它将针对每个日期和 field2 值命中每个字符。2.5 亿条记录可能会强制执行大量索引分页活动，尤其是基于历史记录。您的 Field2 也是如此。但是，由于您在 Field2 上的“分组依据”子句和更新日期，我将在索引的第一个/第二个位置分别拥有一个。根据历史数据，我什至倾向于以日期为主要依据，在此范围内以次要标准为依据。

索引（Updated_At、Field2、Field1、INT_FIELD）

这样，您的整个查询可以仅在索引上完成，而无需针对实际记录的原始数据进行查询。索引中的所有字段都可以从中提取。您有一个有限的日期范围，因此您的 updated_at 立即合格，并按顺序准备分组。从那时起，您来自 Field2 的“CHAR”值将很好地完成您的分组。Field1 来限定您的“IN”字符列表的第三个标准，最后是您的 INT_FIELD 计数（不同）。

不知道在 2.5 亿的基础上建立索引需要多长时间，但这就是我要开始的地方。

# ruby-on-rails - Rails 路由：覆盖资源/成员块中的操作名称

> ID：10353776
> 
> 赞同：2
> 
> 时间：2012-04-27T15:49:06.117
> 
> 标签：ruby-on-rails, routes, rspec2

我知道如何做到这一点，`match`但我真的想在资源块中做到这一点。这是我所拥有的（简化）：

```
resources :stories do
  member do
    'put' collaborator
    'delete' collaborator
  end
end 
```

我正在寻找一种方法来允许在 URL 中使用相同的操作名称，但在控制器中有不同的入口点。目前我已经进入我的控制器：

```
# PUT /stories/1/collaborator.json
def add_collaborator
  ...
end

# DELETE /stories/1/collaborator.json
def remove_collaborator
  ...
end 
```

所以我尝试了这个：

```
resources :stories do
  member do
    'put' collaborator, :action => 'add_collaborator'
    'delete' collaborator, :action => 'remove_collaborator'
  end
end 
```

但是当我编写 rspec 单元测试时，这似乎不起作用：

```
describe "PUT /stories/1/collaborator.json" do
  it "adds a collaborator to the story" do
    story = FactoryGirl.create :story
    collaborator = FactoryGirl.create :user

    xhr :put, :collaborator, :id => story.id, :collaborator_id => collaborator.id

    # shoulds go here...
end 
```

结尾

我收到此错误：

```
Finished in 0.23594 seconds
5 examples, 1 failure, 1 pending

Failed examples:

rspec ./spec/controllers/stories_controller_spec.rb:78 # StoriesController PUT    
  /stories/1/collaborator.json adds a collaborator to the story 
```

我假设这个错误是因为我试图定义我的路线的方式不正确......有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:07:24.243

以下更好吗？

```
resources :stories do
 member do
   put 'collaborator' => 'controller_name#add_collaborator' 
   delete 'collaborator' => 'controller_name#remove_collaborator'
 end
end 
```

您还应该通过在终端中启动来检查您的路线：

```
$ rake routes > routes.txt 
```

并打开生成的 routes.txt 文件以查看从您的 routes.rb 文件生成的路由。

# ruby-on-rails-3 - 如何用简单的形式对集合进行排序

> ID：10353791
> 
> 赞同：3
> 
> 时间：2012-04-27T15:50:07.927
> 
> 标签：ruby-on-rails-3, collections, simple-form

我正在从模型中提取类别列表。在管理部分，我想用它来为产品分配类别。它工作正常，但列表按添加类别的顺序显示。我想按字母顺序对它们进行排序，但我无法确定。

我敢肯定这很简单（希望如此）

这是我的代码：

```
<%= simple_form_for(@game) do |f| %>
  <%= f.input :name %>
  <%= f.input :description %>
  <%= f.input :copy %>
  <%= f.input :image %>
  <%= f.input :thumbnail %>
  <%= f.input :heroimage %>
  <%= f.association :category, collection: @categories %>
  <%= f.button :submit %>
<% end %> 
```

我试图添加一个`.sort_by(desc)`或只是`.sort`在收集方法上，但它不会更改列表。

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-04T21:32:13.097

以下是您应该如何更新代码：

```
<%= f.association :category, collection: Category.order('name ASC') %> 
```

这假设您要按类别名称按升序排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T16:12:33.493

I imagine @categories is assigned as an arel in your controller, can you add an .order("description") to that; e.g.

```
@categories = Category.order('description') 
```

# git-tfs - 如何删除通过 Chocolatey 安装的软件包？

> ID：10353793
> 
> 赞同：21
> 
> 时间：2012-04-27T15:50:18.700
> 
> 标签：git-tfs, chocolatey

我使用安装了 gittfs

`cinst gittfs`

我现在如何删除 gittfs 包？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-02T10:19:27.153

采用

```
cuninst packagename 
```

有关详细信息，请参阅[卸载命令](https://chocolatey.org/commands-uninstall)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-15T20:26:11.007

**更新：**根据@ferventcoder 的评论，自从首次提出并回答了这个问题以来，Chocolately 增加了对卸载软件包的支持。

语法是`chocolatey uninstall packageName`或只是`cuninst packageName`。

您可以选择卸载特定版本：

```
cuninst packageName -version 1.0.1234 
```

请参阅 Rob 的链接了解最新信息，包括已知限制： [https ://chocolatey.org/docs/commands-uninstall](https://chocolatey.org/docs/commands-uninstall)

# svn - SVN 预提交挂钩脚本以阻止用户更改某些存储库文件

> ID：10353794
> 
> 赞同：1
> 
> 时间：2012-04-27T15:50:22.210
> 
> 标签：svn, pre-commit-hook

我想阻止我的 SVN 存储库的用户检查对某些文件的更改。我通过使用以下预提交钩子脚本完成了这项工作。然而，受限文件的数量正在增长，提交更改变得非常缓慢。我想知道是否有更有效的编码方式，我玩过变更列表，但我无法做到这一点。

提前致谢

预提交挂钩脚本（基于 Windows 的 SVN 存储库）：

```
setlocal
:: Inputs from Subversion
set REPOS=%1%
set TXN=%2%

:: Checks if one of the reference files
Rem Check if the commit contains reference files
svnlook changed %REPOS% -t %TXN% | findstr /r /i "^.*referenceparts/part1.txt" > nul
if %errorlevel%==0 (goto RefPart)
svnlook changed %REPOS% -t %TXN% | findstr /r /i "^.*referenceparts/part2.txt" > nul
if %errorlevel%==0 (goto RefPart)
......
.....
etc etc

exit 0

:: Blocks the commit if part are reference
: RefPart
echo. 1>&2
echo ---------------------------------------------------------------------- 1>&2
echo Your commit has been cancelled because you are trying to change a      1>&2
echo part for a reference turbine! Please make a copy of this part and      1>&2
echo save it under a different name.                                        1>&2
echo ---------------------------------------------------------------------- 1>&2
echo. 1>&2
exit 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:54:25.000

将“参考涡轮”分解成不同的 svn 存储库，将其构建为库，并将其作为库分发。然后只将“参考涡轮”库的访问权限授予需要它的人。

检查由无权更改的人构建数百次不可修改的源代码只是浪费电力和时间。

如果您担心他们在调试会话期间需要逐步检查参考涡轮源，请提供两个版本的库，一个带有调试符号和相应的源代码，一个没有调试符号。大多数 IDE 都有加载“源代码”包的概念，以提供人类可读的文本来伴随调试会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:59:44.203

我会重写它以使用 perl 而不是 windows cmd 脚本。Perl 具有更好的正则表达式支持，因此您可以使其更快一些，而不是使用脚本来查看所有参考文件 - 您可以过滤目录和模式。

Strawberry perl 很容易运行 - 下载它，将 exe 和 perl dll 放在路径上的目录中，工作完成。

请注意，我还曾经使用 findstr 和 Windows 脚本来过滤文件扩展名列表，这很快。我将 svnlook 的结果更改为一个文件（不要忘记将 revnum 附加到文件名并随后将其删除）并将其用作带有 /G 选项的 findstr 命令的输入。先试试那个。

# unit-testing - 使用 CI 服务器对 Web 应用程序插件进行单元测试

> ID：10353800
> 
> 赞同：1
> 
> 时间：2012-04-27T15:50:38.370
> 
> 标签：unit-testing, web-applications, plugins, continuous-integration

我使用 TeamCity 7 作为 CI 服务器，我必须测试几个 Web 应用程序插件，主要是用 PHP 编写的。我熟悉 ANT 和 *Unit，但我有一个问题要解决：要正确测试插件，我的想法如下：

1.  清理测试环境。
2.  安装将托管插件的 Web 应用程序的干净副本。
3.  安装插件。
4.  启用插件。
5.  运行测试。

显然，在已安装的环境中运行测试是容易的部分。大多数测试是通过直接调用插件的类的方法来触发的，但是必须配置框架，即使是最小的设置，以允许调用其引导文件并执行适当的初始化。我尝试在手动准备的环境中运行测试，它们按预期运行。

现在的问题是自动安装标准 Web 应用程序，最重要的是，它的配置。基本步骤如下：

1.  在某处解压缩框架（完成）。
2.  创建数据库（完成）。
3.  创建一个数据库用户并为其分配属性权限（完成）。
4.  运行 Web 应用程序的设置。

棘手的部分是并非所有 Web 应用程序都实现了命令行界面，例如Drupal 的*drush*，因此我提出了两种可能的方式来完成安装：

**通过 CURL 模拟手动安装**

*   记下安装步骤和需要填写的表格。
*   使用 CURL 将数据发布到每个表单。

我尝试了这种方法，仍然是手动的，结果可以接受。Web 应用程序按预期安装，并且可以使用。
但是，这需要一个可以运行应用程序的 Web 服务器。据我所知，TeamCity 代理在他们自己的、随机命名的目录中工作，并且无法通过 HTTP 请求访问其中“安装”的任何内容。

**备份/恢复**

*   手动预安装 Web 应用程序并配置其基本设置。
*   压缩应用程序的目录及其数据库的备份。
*   在运行测试之前，解压缩代理工作目录中的目录。
*   恢复备份的数据库。该应用程序现在将被“配置”。

这种方法有点“粗糙”，但它不需要运行 Web 服务器。尽管 Web 应用程序无法处理 HTTP 请求，但这并不重要，因为测试将针对插件的类运行。

但是，这种方法有两个主要缺点：

*   无法运行涉及与 Web 应用程序交互的测试（例如挂钩、事件处理程序等）。
*   由于 Web 应用程序及其数据库是预先配置的，因此它们的参数在每次运行时都是相同的。因此，不可能同时运行两个代理，例如测试两个不同的插件。

我现在想知道是否有更好的解决方案，因为上述两种方法对我来说都不是最优的。

请注意，虽然我使用的是 TeamCity，但 CI 服务器本身应该没什么大不了的，因为我使用 ANT 运行所有东西。因此，任何建议，甚至与另一个 CI Serverm 相关，都将受到欢迎（我知道 Hudson、CruiseControl 和 BuildMaster，我可以轻松地适应一个概念）。谢谢。

# image - 具有自定义域和无限流量的图像托管 CDN

> ID：10353801
> 
> 赞同：-1
> 
> 时间：2012-04-27T15:50:41.477
> 
> 标签：image, networking, hosting, cdn, vps

嗨，我正在寻找具有自定义域 (http://images.example.com/demoimages1.jpg) 和无限流量的图像托管 CDN。

Amazon S3、Rackspace 等的问题在于：它们是现收现付的，当您的网站变得更大时，这将非常昂贵。

有谁知道这样的图像托管cdn？

如果没有，我正在考虑使用 VPS。谁能推荐一个存储空间小但流量大的VPS。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:05:50.787

大多数 CDN 托管服务提供商会向您收取“现收现付”模式的费用。CDN是纯粹基于流量（带宽）的业务。因此，大多数托管服务提供商都提供“现收现付”模式。您可以试用 dediserve.com - 我将它们用于我的一个网站，他们每月向每个边缘位置收取固定金额。

关于 VPS 建议，您的流量要求是什么。您可以轻松找到一个[体面的 VPS 提供商](http://www.accuwebhosting.com/)，以每月 15 到 20 美元的价格提供 100 到 200 GIG 的带宽。

# python - 我如何循环遍历对象的字段？

> ID：10353804
> 
> 赞同：11
> 
> 时间：2012-04-27T15:50:42.897
> 
> 标签：python, django, model

我有一个这样的模型，我怎样才能遍历它而不必输入 company.id、company.name 等？

```
class Company(models.Model):
    name = models.CharField(max_length=1000)
    website = models.CharField(max_length=1000)
    email = models.CharField(max_length=200)
    phone_number = models.CharField(max_length=100)
    city = models.CharField(max_length=1000)
    zip = models.IntegerField()
    state = models.CharField(max_length=1000)
    address = models.CharField(max_length=1000)
    address2 = models.CharField(max_length=1000) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-28T03:53:52.427

您可以像这样遍历所有字段名称

```
for name in Company._meta.get_all_field_names():
    print name 
```

如果您有一个类别实例，这也适用：

```
c = Company(name="foo",website="bar",email="baz@qux.com",....,)
c.save()
for field in c._meta.get_all_field_names():
    print getattr(c, field, None) 
```

**Django 1.8 更新**

Django 1.8 现在有了[官方模型 Meta api](https://docs.djangoproject.com/en/1.8/ref/models/meta/#retrieving-all-field-instances-of-a-model)，您可以轻松抓取所有字段：

```
from django.contrib.auth.models import User
for field in User._meta.get_fields():
    print field 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-06T11:05:34.647

**视图**中的迭代：

如果您有以下实例`company`：`Company`

```
fields= company.__dict__
for field, value in fields.items():
    print field, value 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T15:54:05.553

首先[获取它们](https://stackoverflow.com/questions/2368948/list-fields-present-in-a-table)，然后使用 for 循环或列表推导。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T16:20:48.487

这是一个可能的解决方案：

```
entity = Company.all().get()

for propname, prop in entity.properties().items():   
    print propname, prop.get_value_for_datastore(entity) 
```

另一个可能是：

```
# this returns a dict with the property 
# name as key and the property val as its value
entity.__dict__.get('_entity') 
```

# php - 首先只嵌入 youtube 视频

> ID：10353811
> 
> 赞同：0
> 
> 时间：2012-04-27T15:51:05.427
> 
> 标签：php, regex, preg-replace, pattern-matching, embed

我正在使用以下功能将 youtube 链接显示为视频，但问题是我不知道要替换多个视频，所以我如何将其限制为仅 1 个？

php代码：

```
function embedYoutube($text)
{

    $pattern = '/[\\?\\&]v=([^\\?\\&]+)/';
    $replacement = '<div style="width:100%;float:left;margin-top:15px;margin-bottom:15px;"><iframe width="570" height="315" src=http://www.youtube.com/embed/$1 frameborder="0" allowfullscreen></iframe></div>';
    return preg_replace($pattern, $replacement, $text);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:54:49.887

```
return preg_replace($pattern, $replace, $text, 1); 
```

的第四个参数`preg_replace`是替换的限制。

# mysql - MySQL - 根据表中行的值从不同的表中检索行值

> ID：10353813
> 
> 赞同：1
> 
> 时间：2012-04-27T15:51:09.190
> 
> 标签：mysql, case, if-statement

我觉得这里应该使用 CASE，但我不确定。我正在尝试从通用表中获取性别（m/f），并根据性别，从相应的表中获取构建。例如，当性别为 m 时，查询应该通过转到 males 表并选择 male_build 来知道这一点。我将输出与示例查询放在一起，以了解我要完成的工作：

```
members table
member_id | member_name
------------------------
     1         Herb
     2         Karen
     3         Megan
     4         Pablo

males table
male_id | member_id | male_build
---------------------------------
    1         1        muscular
    2         4          fat

females table
female_id | member_id | female_build
-------------------------------------
    1           2           thin
    2           3           fat 

general table
general_id | member_id | sex
-----------------------------
     1          1         m
     2          2         f
     3          3         f
     4          4         m 
```

输出应该是这样的：

```
1\. Herb is a muscular male.
2\. Karen is a thin female.
3\. Megan is a fat female.
4\. Pablo is a fat male.
   -> query = "SELECT g.general_id, g.member_id, g.sex,   
              (CASE when g.sex=m THEN SELECT ma.male_build AS build 
                   FROM males ma WHERE ma.member_id=g.member_id,
              CASE when g.sex=f THEN SELECT fe.female_build AS build 
                   FROM females fe WHERE fe.member_id=g.member_id),
               m.member_name 
               FROM members m
               JOIN members m ON g.member_id=m.member_id 
               WHERE g.sex='m' OR g.sex='f'"; 
```

寻找此任务的有效查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:01:16.143

当您不得不进行这样的查询时，重新考虑您的数据库设计模式是一个好主意。话虽如此，这应该有效：

```
SELECT mem.*, g.*, coalesce(m.male_build, f.female_build) as build
from members_table mem
inner join general g on mem.meber_id = g.member_id
left join males m on mem.member_id = m.member_id
left join females f on mem.member_id = f.member_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:29:24.123

```
Select M.member_name + ' is a ' 
    + gender_attributes.sex_name 
    + ' ' 
    + gender_attributes.build
From members As M
    Join general_table As G
        On G.member_id = M. member_id   
    Join    (
            Select 'm' As sex, 'male' As sex_name, male_id as id, member_id, male_build As build
            From males_table    
            Union All 
            Select 'f' As sex, 'female', female_id, member_id, female_build
            From females_table
            ) As gender_attributes
        On gender_attributes.sex = G.sex
            And gender_attributes.member_id = M.member_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:33:08.403

I'd just have a `build_types` table and a foreign key on your `members` table. It may be an edge case, but you can get muscular women, and thin guys.

# iphone - 覆盖 UIButton 视图的背面

> ID：10353815
> 
> 赞同：0
> 
> 时间：2012-04-27T15:51:12.083
> 
> 标签：iphone, ios, ipad

当我使用 key path 翻转 UIButton 时`@"transform.rotation.y"`，我仍然可以看到 UIbutton 的正面。

无论如何我可以隐藏按钮前视图内容并显示简单的背面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:58:43.397

不，我相信你想要的是不可能的。视图或图层没有与正面不同的背面 - 如果有，则需要更多属性来设置其背面颜色等。`CALayer`该类具有`doubleSided`属性。如果将其设置为`NO`( `button.layer.doubleSided = NO;`)，当图层背对查看器时，图层会自动隐藏，但这可能不是您想要的。

作为一种解决方法，将另一个视图放置在与具有所需背面颜色的按钮相同的坐标/框架处。如果将此视图的初始旋转变换设置为 180 度，然后将两个图层设置为`doubleSided = NO`，然后将两个视图旋转 180 度，则按钮应该消失，而另一个视图应该出现。请注意，我还没有尝试过。

# android - Android SoftKeyBoard - 重命名 Enter 键

> ID：10353817
> 
> 赞同：0
> 
> 时间：2012-04-27T15:51:22.277
> 
> 标签：android, xml, android-softkeyboard, enter

我的应用程序中有几个 EditText。如果您按 Enter 键，您可以毫无问题地跳到下一个 EditText，但我想更改 Enter 键，以便此按钮不显示 Enter Simbol，而是显示“Next”或“Done”。我尝试了很多东西，但没有任何结果。这是我的 EditText 的 XML 代码：

```
<EditText
            android:id="@+id/et_nt_name"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="top"
            android:imeOptions="actionNext|flagNoEnterAction"
            android:imeActionLabel="Next"
            android:singleLine="true"
            android:inputType="textShortMessage"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:22:15.243

某些软键盘实际上会通过设计更改回车键上的默认文本，因此它没有显示您想要显示的内容可能不是您的错。不过，该功能应该是您对其进行编程的功能。

我建议您切换到默认键盘（长按任何编辑文本，然后选择输入法）以验证它是否显示正确的文本，并且不要关心其他软键盘的外观。

如果您的手机没有配备默认软键盘，那么 Android 模拟器是您最好的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T22:00:22.623

将此添加到您的 EditText，

```
 android:imeOptions="actionDone" 
```

# c# - Nunit、Asp.net MVC 4、Sql Server CE 4、错误提供程序

> ID：10353818
> 
> 赞同：2
> 
> 时间：2012-04-27T15:51:24.580
> 
> 标签：c#, unit-testing, nunit, sql-server-ce, asp.net-mvc-4

*   我创建了一个简单的 Asp.net MVC 4 应用程序
*   我使用 visula studio 2010 扩展创建了 NUnit 测试项目
*   我添加了几个控制器（带有模型和视图）并且网站运行良好。它适用于 Sql Server CE

现在我需要测试一个控制器。我写了这个简单的类：

```
namespace SkateboardShop.Tests.Controllers
{
    [TestFixture]
    class BrandControllerTest
    {

        [Test]
        public void TestDetailsView()
        {

            var controller = new BrandController();
            var result = controller.Details(2) as ViewResult;
            Assert.AreEqual("Details", result.ViewName);

        }

    }
} 
```

当我运行此测试时，NUnit 会返回此错误：

> SkateboardShop.Tests.Controllers.BrandControllerTest.TestDetailsView: System.Data.ProviderIncompatibleException：从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。检查内部异常以获取详细信息并确保连接字符串正确。----> System.Data.ProviderIncompatibleException ：提供程序未返回 ProviderManifestToken 字符串。----> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：

当然，测试项目从哪里获取数据提供者信息？我将连接字符串添加到 app.config 文件（测试项目的）中，如下所示：

```
<connectionStrings>
    <add name="SkateboardEntities" connectionString="Data Source=d:\Basic\project\asp\SkateboardShop\SkateboardShop\App_Data\SkateboardShop.sdf" providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings> 
```

但无事可做。由于我是 MVC 和 NUnit 的新手，所以我首先要问的是，单元测试是否应该测试真实的数据库数据，以及它是否是一个好方法，如何做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:01:46.103

在我看来 - 你应该有一个模拟存储库/持久层进行测试。以这种方式 - 你可以有一个可预测的结果集来处理和编写测试。

这方面的一个示例可能是您的控制器接受具有以下代码的存储库实例：

```
public class BrandController{
 public BrandController(IBrandRepository repository){...}
} 
```

您可以使用任何 DI + Mock 框架来注入 IbrandRepository 进行单元测试

但是，在某些情况下，模拟是不够的，您确实需要一个物理数据库进行测试。

在这种情况下，我建议使用具有相同结构的测试数据库，但测试数据可以根据单元测试的需要重新播种/初始化。

在这种情况下，您可以将配置文件指向测试数据库进行测试和某种脚本或 DbInitializer 将数据库初始化回原始状态等。

HTH。

# javascript - jQuery：当使用 on .scroll 事件和警报 firefox 似乎无限循环

> ID：10353820
> 
> 赞同：0
> 
> 时间：2012-04-27T15:51:30.307
> 
> 标签：javascript, jquery, firefox, alert

我的一个主模板中有以下 jQuery 代码：

```
$(document).scroll(function() {
    var scroll_top = $(document).scrollTop();
    alert(scroll_top);
    if (scroll_top <= 70) {
        $('#fixedback').fadeOut(500);
    } else {
        $('#fixedback').fadeIn(500);
    }
}); 
```

当代码执行时，Firefox 11 和 12 将空白页面并变得无响应。我必须在任务管理器中终止该进程。如果我取出 alert()，代码会完美执行。如果我在任何 .scroll 函数中添加警报，我的任何页面都会发生同样的事情。该页面将加载并工作，直到我滚动页面。

使用 Jquery 1.7.1.min。和 C# ASPX 页面。我没有在其他浏览器上测试过，因为它只是为了开发，我需要警报才能工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:50:29.347

它看起来像 Firefox 中的一个错误。

问题：[Firefox scrollTop 问题](https://stackoverflow.com/questions/5033478/firefox-scrolltop-problem)有一个可以在这里应用的[答案。](https://stackoverflow.com/a/5034197/492145)它的建议是你推迟`alert()`调用使用`setTimeout()`，让 Firefox 有机会做它需要做的任何事情，以避免空白页面。将解决方法应用于您的代码，您将得到如下内容：

```
window.onscroll = catchScroll;
var timeOutId = 0;
var jitterBuffer = 200;
function catchScroll() {
    if (timeOutId) clearTimeout(timeOutId);
    timeOutId = setTimeout(function () { DoStuffOnScrollEvent() }, jitterBuffer);
}

function DoStuffOnScrollEvent() {
    var scroll_top = $(document).scrollTop();
    alert(scroll_top);
    if (scroll_top <= 70) {
        $('#fixedback').fadeOut(500);
    } else {
        $('#fixedback').fadeIn(500);
    }
}; 
```

`alert()`或者，您可以使用代替`console.log()`，它将在更高版本的 IE 和 Chrome 以及通过[Firebug](http://getfirebug.com/)的 Firefox 中本地工作。

# c# - 代码合同使用情况有例外

> ID：10353822
> 
> 赞同：1
> 
> 时间：2012-04-27T15:51:33.567
> 
> 标签：c#, exception-handling

```
void ReadContent(string path)
{
  Contract.Requires(path!=null);
  string contentofileasstring = filehelperobj.GetContent(path);
   if(String.IsNullOrEmpty(contentofileasstring ))
  {
    throw new FileContentException(path + "No content found");
  }
  m_xmlobj = contentofileasstring ;
} 
```

在这种情况下，我对使用代码合同和异常的假设是否正确。您认为用代码合同替换异常是否合乎逻辑（反之亦然）？

代码未测试。只是一个示例场景

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:53:35.177

好吧，假设您的线路错误（即，在尝试使用它*之前测试 null 的路径）那么是的，它是一个有效的前提条件，因此应该是一个代码合同。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:56:40.490

我可能会选择如下所示的实现：

```
private void ReadContent(string path)
{
    Contract.Requires<FileMissingException>(File.Exists(path));
    string content = filehelperobj.GetContent(path);
    m_xmlobj = content;
} 
```

**发布编辑**

因为它是您要验证的内容，所以我会`Contract.Ensures(!String.IsNullOrEmpty(Contract.Result<string>()));`在`filehelperobj.GetContent(string)`方法中放置一个。然后，如果正在读取的内容为 null 或为空，我会抛出异常。例如

```
public string GetContent(string path)
{
    Contract.Requires<FileMissingException>(File.Exists(path));
    Contract.Ensures(!String.IsNullOrEmpty(Contract.Result<string>()));

    using(var reader = new StreamReader(File.OpenRead(path)))
    {
        var content = reader.ReadToEnd();

        if(String.IsNullOrEmpty(content))
            throw new FileContentException("No content found at file: " + path);

        return content;
    }
} 
```

# python - 正则表达式解析 HTML imgs

> ID：10353826
> 
> 赞同：0
> 
> 时间：2012-04-27T15:51:55.227
> 
> 标签：python, regex

我正在浏览一个 HTML 页面，我想提取 img srcs 和 a hrefs。

在特定站点上，所有这些都用双引号括起来。

我尝试了各种各样的正则表达式，但都没有成功。假设双引号内的字符为 [-\w/]（可打印字符 [a-zA-Z\d-_] 和 / 和 .）

在蟒蛇中：

```
re.search(r'img\s+src="(?P<src>[\w-/]+_"', line) 
```

不返回任何东西，但是

```
re.search(r'img\s+src="(?P[-\w[/]]+)"', line) 
```

返回方式非常多（即，不会停在 " ）。

我需要帮助创建正确的正则表达式。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T15:53:21.943

> 我需要帮助创建正确的正则表达式。

不，您需要帮助才能找到合适的工具。

试试[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

[（如果您*坚持*使用正则表达式 - 我建议不要这样做 - 尝试将 greedy 更改`+`为 non-greedy `+?`）。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T16:06:33.057

这是一个比使用正则表达式更好的方法的示例，它使用了出色的[lxml](http://lxml.de/lxmlhtml.html)库和[xpath](http://en.wikipedia.org/wiki/XPath)

* * *

```
In [1]: import lxml.html
In [2]: doc = lxml.html.parse('http://www.google.com/search?q=kittens&tbm=isch')
In [3]: doc.xpath('//img/@src')
Out[3]: 
['/images/nav_logo_hp2.png',
 'http://t1.gstatic.com/images?q=tbn:ANd9GcQhajNZimPGLw9iTfzrAF_HV5UogY-KGep5WYgw-VHZ15oaAwGquNb5Q2I',
 'http://t2.gstatic.com/images?q=tbn:ANd9GcS1LgVIlDgoIfNzwU4xBz9fL32ZJjZU26aB4aynRsEcz2VuXmjCtvxUonM',
 'http://t1.gstatic.com/images?q=tbn:ANd9GcRgouJt5Moe8uTnDPUFTo4csZOcBtEDA_B7WdRPe8pdZroR5QB2q_-LT59G',
 [...]
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T15:55:47.450

在引号内查找内容的好技巧`"([^"]+)"`。因此，您搜索除引号之间的引号以外的任何字符。

对于创建正则表达式的帮助，我强烈推荐 Expresso ( [http://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm) )

# ruby-on-rails - HAML - 如何并排设置几个元素的样式？

> ID：10353827
> 
> 赞同：1
> 
> 时间：2012-04-27T15:51:55.483
> 
> 标签：ruby-on-rails, layout, haml

我在 HAML 中有这几行：

```
.badge-container
  =badge_image(nil, @dis, :vertical)
  %h4= @dis.name
  %p= @dis.description 
```

现在他们在另一个下方排列，但我想让图像在左侧排列，名称和描述在图像的右侧。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:47:34.760

我在视图中使用[1140 网格](http://cssgrid.net/)。使用haml，我可以通过以下方式实现：

```
.badge-container
  .row 
    .threecol
      =badge_image(nil, @dis, :vertical)
    .fivecol
        %h4= @dis.name
        %p= @dis.description 
```

如果您想在没有网格的情况下执行此操作，可以访问 1140 [github 页面](https://github.com/andytlr/cssgrid/tree/origin/css)以检查上面代码中使用的类。

# qtp - QTP 生成 QC 报告

> ID：10353830
> 
> 赞同：1
> 
> 时间：2012-04-27T15:52:06.497
> 
> 标签：qtp, hp-quality-center

我正在尝试通过使用 QTP 导出/保存 QC 测试状态的 excel 文件来自动化 QC 报告。我正在尝试使用 QTP 的对象管理器来执行每个任务，但我遇到了两个问题。我遇到的第一个问题是让 QTP 识别 QC 中的不同对象。当我尝试运行脚本登录时，第二个问题出现了。我不断收到此错误：

> 以下客户端组件未成功下载：
> 1。CompStrgHelper.dll：（
> 错误 32）进程无法访问该文件，因为它正被另一个进程使用。无法打开文件进行写入
> 2 。CompStrgHelper.dll：
> 无法加载类型库
> 3。CompStrgHelper.dll :
> 无法注册类型库
> 关闭与服务器的所有连接并重试。

如果有人知道如何解决这个问题，或者只是另一种方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:50:45.650

以自动格式从 QC 获取报告的最佳方法是使用 VBscript 或任何脚本语言并将 SQL 查询发送到 QC 后端。[您可以从博客QTP 博客](http://qtp-automate.blogspot.co.uk/2010/05/how-to-retrieve-test-sets-test.html)中参考有关“如何为测试用例创建查询等”的更多信息

在 VBscript 或 excel 中，您可以使用 ADODB 连接和记录集连接到 QC 后端数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:22:23.603

AFAIK QTP 故意忽略 QC，假设只有 HP QA 会对测试 QC 感兴趣，而对于其他所有人来说，打开 QC 是测试环境的一部分，而不是 AUT。

如果你想自动化 QC，你应该使用 QC 的 API，[OTA](http://fijiaaron.wordpress.com/2011/11/17/updating-test-results-in-qc-using-the-qc-ota-api-explained/)。

# c# - 给定目录中的缓冲区文件名

> ID：10353832
> 
> 赞同：0
> 
> 时间：2012-04-27T15:52:10.867
> 
> 标签：c#, file-io, bufferedreader

我正在尝试找到一种方法来缓冲 C# 中给定目录中的文件名。我的意思是：

给定目录

> C:/我的目录

其中包含文件：

> File1_orig.txt
> 
> File1_edited.txt
> 
> File2_orig.txt
> 
> File2_edited.txt
> 
> ...
> 
> Filen_orig.txt
> 
> Filen_edited.txt

我想将文件名（不是整个文件路径，只是文件名，例如 String[] 文件名 = Filen_orig.txt）存储到临时字符串中，并对它们进行简单比较以查看它们是否包含目标字符串。

我想将字符串传递到：

```
while(STILL FILES IN DIRECTORY)
{
    string[] exFileName = {BUFFER FILENAME HERE}
    string[] words = exFileName.Split('_');
    string[] toCompare = "edited";
            bool result;
            foreach (string word in words)
            {
                Console.WriteLine(word);
                bool result = toCompare.Equals(word, StringComparison.OrdinalIgnoreCase);
                if (result)
                {
                    Console.WriteLine("success");
                }
            }
            Console.ReadLine(); 
```

检查正在检查的文件是被编辑过的 (*_edited.txt) 还是原始文件 (*_original.txt)，如果文件被编辑过，则进一步处理该文件。

有谁知道如何自动读取文件路径？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:59:27.213

[DirectoryInfo.GetFiles](http://msdn.microsoft.com/en-us/library/8he88b63.aspx)怎么样？

```
DirectoryInfo di = new DirectoryInfo(@"c:\");

// Get only subdirectories that contain the letter "p."
FileInfo[] files= di.GetFiles("*.txt");

foreach (FileInfo fi in files) 
{
   string exFileName = fi.FileName;
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:05:43.020

如果您想查看是否有任何文件包含 _edited 位，您可以使用：

```
bool success = Directory.GetFiles(@"c:\MyDir").Any(p => p.Contains("_edited")); 
```

我有点猜测这是你想要的，因为你的代码不是很清楚（你的描述也不是）

编辑：显示所有已编辑的文件：

```
 foreach(var file in Directory.GetFiles(@"c:\MyDir").Where(p => p.Contains("_edited")))
        {
            Console.WriteLine(" {0}: edited", file);
        } 
```

此外，必须使用“System.Linq”

# coffeescript - 多个页面的 PhantomJS 意外加载行为

> ID：10353833
> 
> 赞同：5
> 
> 时间：2012-04-27T15:52:25.203
> 
> 标签：coffeescript, phantomjs

我有一个脚本（如下），它通过 3 个步骤来抓取网站。一次最多设置为 1 页时效果很好。但是，当我一次将其增加到 2 时，事情开始变得不稳定。onFinished 比我预期的更早触发，并且页面尚未完全加载。因此，我的脚本的其余部分中断了。知道为什么会发生这种情况吗？我应该补充一点，我正在使用最新版本（1.5）。

```
MAX_PAGES = 1
### 
changing MAX_PAGES to >1 causes some pages onFinished event to fire before
the page is fully rendered.  this is evident by the fact that there are >1 images
for some pages.  i havent been able to reproduce using microsoft.com, but on some
pages i was working on the first onLoadFinished seemed to be called before the page
was actually fully loaded based on the look of the rendered images
###

newPage = (id) ->
context = {}
context.id = id
context.step = 0
context.page = require('webpage').create()
context.page.onLoadStarted = ->
    context.step++
context.page.onLoadFinished = (status) ->
    console.log status
    if status is 'success'
        context.page.render("#{context.id}_#{context.step}.png")
    else
        context.page.release()
        context.page.open('http://www.microsoft.com')
        console.log 'started loading'

newPage id for id in [1..MAX_PAGES] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T19:46:58.477

我认为这个问题与 PhantomJS 中的每个网页都使用相同的 QNetworkAccessManager 的事实有关，因此，当每个网页对象完成加载时， [finished()](http://doc.qt.nokia.com/4.7-snapshot/qnetworkaccessmanager.html#finished)信号就会触发。为了解决这个问题，可能需要对 PhantomJS 的代码进行修改。在尝试在 PhantomJS 中并行加载多个页面时，我已经注意到了这一点。我正在开发的一个应用程序使用 QtWebkit 并同时加载多个页面，因此我必须确保每个网页都有自己的 QNetworkAccessManager，以便 finished() 信号不会相互干扰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T02:07:21.583

要爬取多个页面，请参阅与库捆绑的示例 follow.js。[https://github.com/ariya/phantomjs/blob/master/examples/follow.js](https://github.com/ariya/phantomjs/blob/master/examples/follow.js)

在加载下一页之前，您需要使用递归来等待当前页面加载。

# c# - 将第三方 dll 的日志记录重定向到自己的日志文件

> ID：10353836
> 
> 赞同：0
> 
> 时间：2012-04-27T15:52:39.540
> 
> 标签：c#, .net, dll, apache-fop

在我的 C# 程序中，我打算像这样捕获每个潜在的日志：

```
public static void Main(string[] args)
{
   using (new ConsoleToFile("./output.log"))
   {
      doMain(args, parser, options, directConsole);
   }
} 
```

ConsoleToFile 是这个经典的：

```
public class ConsoleToFile : IDisposable
{
    private readonly StreamWriter fileOutput;
    private readonly TextWriter oldOutput;

    /// <summary>
    /// Create a new object to redirect the output
    /// </summary>
    /// <param name="outFileName">
    /// The name of the file to capture console output
    /// </param>
    public ConsoleToFile(string outFileName)
    {
        oldOutput = Console.Out;
        fileOutput = new StreamWriter(
            new FileStream(outFileName, FileMode.Create)
            );
        fileOutput.AutoFlush = true;
        Console.SetOut(fileOutput);
        Console.SetError(fileOutput);
    }

    // Dispose() is called automatically when the object
    // goes out of scope

    #region IDisposable Members

    public void Dispose()
    {
        Console.SetOut(oldOutput); // Restore the console output
        fileOutput.Close(); // Done with the file
    }

    #endregion
} 
```

关于我的代码中生成的输出，这很好用！

但我也包含了来自 apache.fop 的 fop.dll（我使用 IKVM 生成它）。

**问题：** 这个 fop-DLL 注销到控制台，就好像重定向不存在一样。

例如经典的令人讨厌的警告，例如：

```
“警告：padding-* 属性不适用于 fo:table-header，但发现填充的非零值。”
```

知道如何将这些日志记录重定向到我的文件“output.log”吗？

# magento - Magento 重写社区 codePool 重写

> ID：10353838
> 
> 赞同：2
> 
> 时间：2012-04-27T15:52:46.513
> 
> 标签：magento

我正在使用 Magento，我想重写 Mage_Catalog_Block_Product_Price，但社区 codePool 模块已经重写了该块。我知道在我的 xml 中，我需要

```
<config>
    <global>
        <blocks>
            <WHAT_GOES_HERE?>
                <rewrite>
                    <product_price>Display_Price_Block_Product_Price</product_price>
                </rewrite>
            </WHAT_GOES_HERE?>
        </blocks> 
```

但是我不确定应该在类组节点中放置什么（我已将其标记为 WHAT_GOES_HERE？）社区模块没有声明 <[classgroup]>，所以我不确定应该在我的节点中放置什么失踪。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:11:50.020

All of the configuration XML is merged into a single DOM structure in a way that means colliding xpaths will have their text values overridden. An example:

This community module is currently rewriting the resolved classname via configuration:

```
<config>
    <global>
        <blocks>
            <catalog>
                <rewrite>
                    <product_price>Community_Module_Block_Example_Price</product_price>
                </rewrite>
            </catalog>
        </blocks>
    </global>
</config> 
```

The framework invokes block classes using `Mage_Core_Model_Layout::createBlock()`, with the argument in this case being `catalog/product_price` (note how those two strings map to the configuration). The community module is changing the classname which is calculated from this information, and pointing it to the classname specified i.e. `Community_Module_Block_Example_Price`. That classname is then fed to PHP `new` to invoke a class.

What you need to do is copy this exact configuration to your module config - specifying your block classname - *and* (important!) make sure that the following occur:

1.  your configuration is loaded *after* the community module's configuration, and
2.  that your class extends from the community module's class.

How do you make sure that your module configuration is loaded after the community module? Just open the community module's declaration file in *app/etc/modules*, note the node name under the `<modules>` node (in the example above, would almost certainly be `Community_Module`), and then in your module declaration file (also in *app/etc/modules*), add this to your module declaration:

```
<depends>
    <Community_Module /> <!-- e.g. -->
</depends> 
```

HTH

# android - 替代 overridePendingTransition() - Android

> ID：10353840
> 
> 赞同：3
> 
> 时间：2012-04-27T15:52:58.810
> 
> 标签：android, animation

我刚刚发现了 android overrivePendingTransition() 方法。它工作正常，但我有以下问题：

在 Settings/Dislpay 菜单中，您可以选择不显示动画、部分动画或全部动画，并且该方法仅在设置为所有动画时有效。

我可以绕过它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T19:59:29.093

您正在谈论的设置是用户偏好。如果您的一位用户想要关闭所有动画，您为什么要找到一种解决方法来继续在您的应用中显示动画？它似乎不是很人性化。

无论如何，`overridePendingTransition`用于在 之间进行动画`Activities`处理，而不是`Views`您可以关闭它们的部分原因，并且是在**Android 2.0**中引入的。没有其他可用的 SDK 方法可以做同样的事情。但是，您可以尝试使用 a`LayoutAnimation`为`Activity`您创建的每个布局设置动画。它不会与 完全相同`overridePendingTransition`，但我认为这将是你能找到的最接近替代方案的东西之一。

**your_animation.xml**：

```
<layoutAnimation xmlns:android="http://schemas.android.com/apk/res/android"
android:animation="@anim/THE_ANIMATION_YOU_WANT_TO_USE" /> 
```

**your_layout.xml**：

```
android:layoutAnimation="@anim/your_animation" 
```

# grid - 在视觉工作室内拖动 wpf devexpress 网格

> ID：10353842
> 
> 赞同：0
> 
> 时间：2012-04-27T15:53:02.200
> 
> 标签：grid, devexpress

不能在 Visual Studio 内拖动 devexpress gridcontrol 吗？

我将工具箱中的网格添加到设计图面上。似乎没有任何方法可以选择网格并将其移动到设计表面上。我错过了什么吗？我只能通过修改xaml来移动它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:33:26.697

据我所知，DXGrid 中的设计时支持非常完整和直观。如[这些截图所示，DXGrid](http://help.devexpress.com/#WPF/CustomDocument8126)有所有标准的大小调整装饰。看来您这边的 IDE 环境或 GAC 有问题。因此，我建议您[直接向 DevExpress 报告此问题](http://www.devexpress.com/Support/Center/Issues/CreateIssue.aspx?issuetype=bugreport)。我相信他们的支持工程师会帮助您解决这个问题。

# asp.net - 调用 Web 服务会出现“无法连接到远程服务器错误”

> ID：10353846
> 
> 赞同：7
> 
> 时间：2012-04-27T15:53:11.370
> 
> 标签：asp.net, web-services

我正在从`.net`位于我公司服务器上的开发环境中调用 Web 服务。直到昨天一切正常，它正在返回正确的数据。但是，今天它突然给我一个错误***“无法连接到远程服务器”***。我在浏览器中输入了服务 URL，效果很好。有谁知道这个问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:07:09.447

我想到的第一件事是代理配置现在在您的应用程序和浏览器之间有所不同。或者，它可能是在您的计算机上运行的已更新其配置的防病毒程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T10:20:13.260

只需从应用程序引用中删除网络服务并重新添加..它会再次工作。错误发生只是因为网络服务的端口号发生了变化。

# .net - Visual Studio 为服务缺失添加安装程序

> ID：10353852
> 
> 赞同：2
> 
> 时间：2012-04-27T15:53:29.930
> 
> 标签：.net, visual-studio-2010, windows-services

我过去创建了 Windows 服务没问题，但我现在在一家新公司使用新设置，这是我从那时起创建的第一个服务，我无法为其添加安装程序选项。当我在设计器中查看服务并右键单击设计图面时，没有“添加安装程序”或“创建安装程序”选项

我一直在谷歌搜索无济于事，我找到了这样的答案：

[VS 2008 Windows 服务安装程序不起作用](https://stackoverflow.com/questions/4148896/vs-2008-windows-service-installer-doesnt-work)

[Visual Studio 在服务项目中缺少“添加安装程序”链接](https://stackoverflow.com/questions/407459/visual-studio-missing-add-installer-link-in-service-project)

[在 Visual Studio 中添加服务安装程序和服务进程安装程序](https://stackoverflow.com/questions/6460686/adding-a-service-installer-and-service-process-installer-in-visual-studio)

[创建 Windows 服务的最简单语言](https://stackoverflow.com/questions/593454/easiest-language-for-creating-a-windows-service/593803#593803)

但我怎么也找不到。

应该看起来像：

![在此处输入图像描述](../Images/4e0c79e73e5c41c42c2f5fa7914945f5.png)

但我得到：

![在此处输入图像描述](../Images/f2dc4c04b16ff3a0580c30b4004a9306.png)

我看到 Express 没有这个选项，但我使用的是 VS2010 Professional，并且我拥有所有其他预期的功能。

任何帮助将不胜感激，尤其是在我将脚穿过显示器之前。

谢谢

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:20:39.867

花了太多时间搜索互联网后，我决定硬着头皮简单地修复 VS 2010，这确实花了将近一个小时，但确实解决了问题。

# ember.js - 如何传递要在子视图中呈现的视图对象？

> ID：10353858
> 
> 赞同：1
> 
> 时间：2012-04-27T15:53:46.747
> 
> 标签：ember.js

我正在尝试使用它自己的模板和 CSS 构建一个可重用的弹出视图。在这个可重用的视图中，我希望能够显示带有父视图想要放入弹出窗口的内容的子视图。

弹出窗口的车把模板如下所示：

```
<div class='popup'>
    <a class='open' href='#' {{action toggleVisible}}>
        {{view button}}
    </a>

    <div class='collapse'>
        <div class='box'>
            <div class='arrow'></div>
            <div class='arrow-border'></div>

            {{view content}}

        </div>
    </div>
</div> 
```

在这种情况下，`button`应该`content`是在此弹出窗口中呈现的 Ember 视图，这些视图将根据正在创建和显示弹出窗口的父视图而有所不同。

弹出视图对象如下所示：

```
var popup = Ember.View.extend({
    button: null,
    content: null,
    templateName: 'popbox',
    visible: false,
    toggleVisible: function() {
        var visible = this.get('visible');
        this.set('visible', !visible);
        if (visible) {
            this.$().find('.box').fadeOut(250);
        } else {
            var pop = this.$().find('.popbox');
            var box = this.$().find('.box');
                box.css({
                    'display': 'block',
                    'top': 10,
                    'left': ((pop.parent().width()/2) -box.width()/2 )
                    });
            }
        }
    }
})); 
```

我不确定如何从父视图传递要在弹出窗口中呈现的模板。现在我正在尝试做这样的事情，但它不起作用。

```
var sendto = Ember.View.extend({
    templateName: 'sendto',
    popupView: popup.extend({
        button: Ember.View.extend({
            template: Ember.Handlebars.compile('{{model.selectedRecipients.length}} {{model.peopleOrPersonText}}')}),
        content: Ember.View.extend({template: Ember.Handlebars.compile('Test content')})
    })
})); 
```

将视图传递给弹出视图的正确方法是什么？

注意：这似乎有效，但会生成一条已弃用的错误消息：

```
Something you did caused a view to re-render after it rendered but before it was inserted into the DOM. 
```

**更新：**事实证明我的问题完全是由于其他原因（意外地包括了 Ember.js 两次）。上面的代码实际上似乎工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:16:11.923

使用 Ember.ContainerView，并让内部视图各自成为具有自己模板的视图类。然后，您可以在包含视图上设置 childViews 数组以包含您要显示的任何视图的实例。

# php - 是否可以从 wordpress 主题以编程方式安装插件

> ID：10353859
> 
> 赞同：5
> 
> 时间：2012-04-27T15:53:51.743
> 
> 标签：php, wordpress

我的梦想是在主题中包含一个 php 文件，该文件检查是否安装了一组插件，并安装未安装的插件。有点像主题的一组依赖项，但也是打包主题开发以包含一组好的插件的好方法。

我的问题...

1.  有这样的东西存在吗？
2.  是否可以从主题文件夹中的单个 php 文件中实现？
3.  这种方法有什么明显的缺陷或问题吗？
4.  我将如何实现这一目标？
    *   是否可以从主题文件夹中枚举已安装的插件？
    *   是否可以下载插件文件并将其放置在插件文件夹中？
    *   是否可以从主题目录中激活插件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T16:24:34.023

**2018 年 7 月 6 日编辑：**如果您遇到此答案，则下面突出显示的代码***非常过时且不安全***，不应在本地服务器上进行实验之外的任何容量中使用。如果您正在寻找更现代的插件管理解决方案，请考虑通过[Composer 和 Bedrock安装 Wordpress](https://roots.io/bedrock/)

* * *

我建议不要以编程方式检查某些插件的存在，从任何主题文件中下载、安装和激活它们。您必须考虑每次加载给定页面时都会运行检查，并且可能会导致大量多余的代码和不必要的活动。

相反，我的建议是将您的主题所依赖的任何插件打包为主题本身的一部分，而不是作为插件。插件应由用户自行决定安装。如果主题依赖于插件才能正常或有效地运行，那么它确实应该与主题本身一起打包和下载。

但是要直接回答您的问题：

1.  大概。这当然是可以做到的。
2.  是的。
3.  见上文。通过不断检查插件并根据这些条件运行一系列操作，而不是仅仅包括所需的一切，您可能会遇到更多问题。
4.  [大量研究](http://codex.wordpress.org/Plugin_API)

    *   大概
    *   是的
    *   是的

然而，我不能过分强调，PLUGIN 的目的是为用户提供扩展给定主题功能的选项。如果您的主题功能依赖于现有插件，那么当有人下载​​您的主题时，您真的应该包含所有文件。

尽管如果您觉得您的方法以我可能遗漏的方式有益于您的主题，请随意编写它。

**完整答案：**我决定帮助您创建概念验证，因为我感到无聊和好奇。其中大部分应该是不言自明的。添加这些功能：

```
function mm_get_plugins($plugins)
{
    $args = array(
            'path' => ABSPATH.'wp-content/plugins/',
            'preserve_zip' => false
    );

    foreach($plugins as $plugin)
    {
            mm_plugin_download($plugin['path'], $args['path'].$plugin['name'].'.zip');
            mm_plugin_unpack($args, $args['path'].$plugin['name'].'.zip');
            mm_plugin_activate($plugin['install']);
    }
}
function mm_plugin_download($url, $path) 
{
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $data = curl_exec($ch);
    curl_close($ch);
    if(file_put_contents($path, $data))
            return true;
    else
            return false;
}
function mm_plugin_unpack($args, $target)
{
    if($zip = zip_open($target))
    {
            while($entry = zip_read($zip))
            {
                    $is_file = substr(zip_entry_name($entry), -1) == '/' ? false : true;
                    $file_path = $args['path'].zip_entry_name($entry);
                    if($is_file)
                    {
                            if(zip_entry_open($zip,$entry,"r")) 
                            {
                                    $fstream = zip_entry_read($entry, zip_entry_filesize($entry));
                                    file_put_contents($file_path, $fstream );
                                    chmod($file_path, 0777);
                                    //echo "save: ".$file_path."<br />";
                            }
                            zip_entry_close($entry);
                    }
                    else
                    {
                            if(zip_entry_name($entry))
                            {
                                    mkdir($file_path);
                                    chmod($file_path, 0777);
                                    //echo "create: ".$file_path."<br />";
                            }
                    }
            }
            zip_close($zip);
    }
    if($args['preserve_zip'] === false)
    {
            unlink($target);
    }
}
function mm_plugin_activate($installer)
{
    $current = get_option('active_plugins');
    $plugin = plugin_basename(trim($installer));

    if(!in_array($plugin, $current))
    {
            $current[] = $plugin;
            sort($current);
            do_action('activate_plugin', trim($plugin));
            update_option('active_plugins', $current);
            do_action('activate_'.trim($plugin));
            do_action('activated_plugin', trim($plugin));
            return true;
    }
    else
            return false;
} 
```

...然后像这样执行：

```
$plugins = array(
    array('name' => 'jetpack', 'path' => 'http://downloads.wordpress.org/plugin/jetpack.1.3.zip', 'install' => 'jetpack/jetpack.php'),
    array('name' => 'buddypress', 'path' => 'http://downloads.wordpress.org/plugin/buddypress.1.5.5.zip', 'install' => 'buddypress/bp-loader.php'),
    array('name' => 'tumblr-importer', 'path' => 'http://downloads.wordpress.org/plugin/tumblr-importer.0.5.zip', 'install' => 'tumblr-importer/tumblr-importer.php')
);
mm_get_plugins($plugins); 
```

'name' 可以是任何东西，因为它更像是一个临时值。'path' 正是它的样子，是 Wordpress 服务器上 zip 文件的直接 URL。'install' 值只是包含所有插件信息的主 PHP 脚本的路径。您必须知道该特定插件目录的布局才能填写此信息，因为这也是激活黑客工作所必需的。

激活功能在这里找到（信用sorich87）：[https ://wordpress.stackexchange.com/questions/4041/how-to-activate-plugins-via-code](https://wordpress.stackexchange.com/questions/4041/how-to-activate-plugins-via-code)

**警告：**这绝不是一种非常安全的做事方式。我实际上认为这很容易被滥用，所以我们最好的选择是使用它作为我们的基线并尝试从那里改进。

如果您决定使用这种方法，~~我所要问的只是最初的整体脚本归功于我，以及 sorich87 的激活过程，~~ ***愿上帝怜悯您的灵魂***。

**07/06/2018 编辑：**说真的，不要这样做。按照今天的标准，这段代码是热垃圾。插件管理应该通过[Composer 和 Bedrock](https://roots.io/bedrock/)来完成。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-04T13:28:02.257

受到[Jamie Dixon 评论的](https://stackoverflow.com/questions/10353859/is-it-possible-to-programmatically-install-plugins-from-wordpress-theme#comment-13339265)启发，我检查了 Wordpress 的工作原理。

该过程可以在[第 93 行的 /wp-admin/update.php](https://github.com/WordPress/WordPress/blob/master/wp-admin/update.php#L93-L140)中看到。可以像这样制作一个简短的版本：

```
include_once( ABSPATH . 'wp-admin/includes/plugin-install.php' ); //for plugins_api..

$plugin = 'plugin-name';

$api = plugins_api( 'plugin_information', array(
    'slug' => $plugin,
    'fields' => array(
        'short_description' => false,
        'sections' => false,
        'requires' => false,
        'rating' => false,
        'ratings' => false,
        'downloaded' => false,
        'last_updated' => false,
        'added' => false,
        'tags' => false,
        'compatibility' => false,
        'homepage' => false,
        'donate_link' => false,
    ),
));

//includes necessary for Plugin_Upgrader and Plugin_Installer_Skin
include_once( ABSPATH . 'wp-admin/includes/file.php' );
include_once( ABSPATH . 'wp-admin/includes/misc.php' );
include_once( ABSPATH . 'wp-admin/includes/class-wp-upgrader.php' );

$upgrader = new Plugin_Upgrader( new Plugin_Installer_Skin( compact('title', 'url', 'nonce', 'plugin', 'api') ) );
$upgrader->install($api->download_link); 
```

如果您不希望显示反馈，您应该创建一个自定义皮肤类。例如：

```
$upgrader = new \Plugin_Upgrader( new Quiet_Skin() );

class Quiet_Skin extends \WP_Upgrader_Skin {
    public function feedback($string)
    {
        // just keep it quiet
    }
} 
```

# ruby-on-rails - 使用 session[:user_id] 进行 Rails 身份验证的安全性

> ID：10353861
> 
> 赞同：5
> 
> 时间：2012-04-27T15:53:54.927
> 
> 标签：ruby-on-rails

我注意到很多 Rails 身份验证教程将用户 ID 存储在 session[:user_id] 中以记住用户并对其进行身份验证。假设在应用程序中的某个地方 user_ids 是公开的（URL、HTML 属性上的属性等），这不是不安全的，因为我可以编辑我的会话 cookie 以使用其他人的 user_id 吗？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T17:56:08.113

根据[Rails 安全指南](http://guides.rubyonrails.org/security.html#session-storage)：“为了防止会话散列篡改，从带有服务器端机密的会话中计算摘要并插入到 cookie 的末尾。”

所以看起来可以假定 Session 是安全的，不会被用户篡改（假设我们的服务器端机密是安全的）。但是，用户仍然可以读取会话哈希中的任何内容，因此我们不希望存储敏感信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T16:02:53.497

cookie 往往不包含 user_id，它包含会话密钥，它本质上是一个随机的、无意义的字符串。会话存储在服务器上（在数据库、memcached 或像 redis 等的 nosql 存储中），并且会话保存用户 ID。

因此，给定用户的会话记录（仅限服务器端）可能包含以下数据：

```
key:  asoiuoi09u23uo8789289askho2
user_id: 1234 
```

并且 cookie（客户端）持有会话密钥，所以 cookie 看起来像这样：

```
name: somecookiename
site: www.yoursite.com
content: asoiuoi09u23uo8789289askho2 
```

因此，要访问其他人的会话，您需要获取他们的会话密钥。这绝不是不可能的（参见 session-sniffing），但使用 https （这又需要 SSL 证书）变得更加困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:22:45.843

一般来说，我的感觉是`:session_id`，cookie session 是无用的，可以省略，因为大多数情况下在服务器端是不检查的。还是我错了？

在大多数情况下`:user_id`，签名就足够了。

# f# - 为 Mono 打包 F# 程序

> ID：10353862
> 
> 赞同：2
> 
> 时间：2012-04-27T15:54:01.990
> 
> 标签：f#, mono, packaging

我目前正在学习 F# 并准备编写我的第一个程序。我将在 Windows 7 中使用 Visual Studio 10 来编写代码，因为 F# 对 MonoDevelop 的支持落后了几个版本。

我正常的日常开发环境是 Mac Os X 10.7。我安装了 Mono 和 MonoDevelop。在我写完我的杰作后，我如何打包它以便在 Os X 上运行？我需要将哪些 DLL 发送给其他 Windows 用户，以便他们可以运行我的 .exe 文件？他们如何安装这些 DLL？

在 Java 世界（我通常居住的地方）中，我只是将我的 Java 代码与任何依赖项打包到一个单一的**UberJAR**中，我可以将它发送给任何拥有适当 Java 版本（通常为 6）的人，他们可以通过键入来运行我的代码

```
java -jar MyUberJar.jar 
```

我经常用 Scala 编写代码并包含 Scala 库以及任何其他依赖项。

是否有任何简单的方法可以为.NET 做类似的事情，特别是对于 F#？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:41:13.357

一种替代方法是使用该`--standalone`标志`fsc`，将您需要的所有 DLL 静态编译到一个大型 EXE 中。您发送它的人仍然需要安装 Mono，但没有其他依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:31:48.823

我认为这是大多数人使用的：

[http://wix.sourceforge.net/](http://wix.sourceforge.net/)

我说“我认为”是因为在工作中我们有一个发布团队为我们构建安装程序包。

# php - 对象数组，提取最高值

> ID：10353865
> 
> 赞同：1
> 
> 时间：2012-04-27T15:54:06.380
> 
> 标签：php, arrays, object

给定一个存储在 中的对象数组`$my_array`，我想提取具有最高`count`值的 2 个对象并将它们放在一个单独的对象数组中。该数组的结构如下。

我该怎么做呢？

```
array(1) { 
     [0]=> object(stdClass)#268 (3) { 
             ["term_id"]=> string(3) "486" 
             ["name"]=> string(4) "2012" 
             ["count"]=> string(2) "40"
     } 
     [1]=> object(stdClass)#271 (3) { 
             ["term_id"]=> string(3) "488" 
             ["name"]=> string(8) "One more"
             ["count"]=> string(2) "20"  
     } 
     [2]=> object(stdClass)#275 (3) { 
             ["term_id"]=> string(3) "512" 
             ["name"]=> string(8) "Two more"
             ["count"]=> string(2) "50"  
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:02:28.060

您可以通过多种方式做到这一点。一种相当幼稚的方法是使用[`usort()`](http://us3.php.net/manual/en/function.usort.php)对数组进行排序，然后弹出最后两个元素：

```
usort($arr, function($a, $b) {
    if ($a->count == $b->count) {
        return 0;
    }

    return $a->count < $b->count ? -1 : 1
});

$highest = array_slice($arr, -2, 2); 
```

**编辑：**

请注意，前面的代码使用了一个匿名函数，该函数仅在 PHP 5.3+ 中可用。如果您使用的是 < 5.3，则可以只使用普通函数：

```
function myObjSort($a, $b) {
    if ($a->count == $b->count) {
        return 0;
    }

    return $a->count < $b->count ? -1 : 1
}

usort($arr, 'myObjSort');

$highest = array_slice($arr, -2, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:02:00.207

您可以使用[array_walk()](http://php.net/manual/en/function.array-walk.php)然后编写一个检查计数值的函数。

# oracle - Oracle 数据库连接问题

> ID：10353869
> 
> 赞同：6
> 
> 时间：2012-04-27T15:54:20.093
> 
> 标签：oracle

我的本地机器上有一个 oracle 数据库实例，我尝试连接到它。

使用 SQL Developer，我可以连接到它。但是当我使用 sqlplus 时，我无法连接到实例。

我得到的错误信息是

```
ORA-28547:connection to server failed,probable oracle net admin error. 
```

我尝试重新启动我的 TNS 服务，但问题仍然存在。

我需要连接到 sqlplus，因为我需要使用

```
impdp system/***** schemas=abcd dumpfile=DUMP_500.dmp 
```

请让我知道还需要什么其他信息，以便我发布

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:08:11.377

您是否为您的 SQL*Plus 使用与您的 SQL Developer 使用的相同的 tnsnames.ora 文件？

还可以尝试添加`SQL_AUTHENTICATION_SERVICES = (NONE)`到您的 sqlnet.ora 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T00:39:23.027

我添加`SQL_AUTHENTICATION_SERVICES = (NONE)`到我的 sqlnet.ora 文件中并且它有效

# asp.net - 异步网络调用瓶颈并按顺序运行

> ID：10353874
> 
> 赞同：0
> 
> 时间：2012-04-27T15:54:36.777
> 
> 标签：asp.net, multithreading, iis, asynchronous, web

我有一个网站，它经常向外部 Web 服务发出请求，我希望这些调用是异步和并行的，以避免阻塞并稍微加快网站速度。基本上，我有 8 个小部件，每个小部件都必须进行自己的网络调用。

出于某种原因，它们中只有前 3 个左右真正加载异步，然后线程没有及时释放，其余的小部件按顺序加载。如果我能让其中 3 个并行加载，然后再并行加载 3 个，再并行加载 2 个，我会很高兴。所以问题实际上是线程没有及时释放。

我猜答案与一些 IIS 配置有关。我正在非服务器操作系统上进行测试，所以也许这是其中的一部分。

编辑@jon skeet：

我正在使用反射来调用这样的网络调用：

```
output = methodInfo.Invoke(webservice, parameters); 
```

小部件操作（最终调用 Web 服务）通过 jquery $.each() 循环和 .load 函数调用（也许这会导致瓶颈？）。小部件操作在异步控制器中设置为异步方法。

这是其中一种异步方法的代码（它们都是这样设置的）：

```
public void MarketTradeWidgetAsync()
    {
        AsyncManager.OutstandingOperations.Increment();

        //a bunch of market trade logic

        //this eventually calls the web service
        PlanUISetting uiSettingMarketQuotesConfig = WebSettingsProviderManager.Provider.GetMarketQuotes(System.Configuration.ConfigurationManager.AppSettings["Theme"], SessionValues<String>.GlobalPlanID, SessionValues<String>.ParticipantID, "MARKETQUOTES");

        AsyncManager.OutstandingOperations.Decrement();

    }

public ActionResult MarketTradeWidgetCompleted(MarketTradeTool markettradetool)
    {
        if (Session.IsNewSession)
            return PartialView("../Error/AjaxSessionExpired");
        else
        {
            ViewData["MarketData"] = markettradetool;
            return PartialView(markettradetool);
        }
    } 
```

而且，就像我说的，这些方法是通过 jquery 调用的。我的想法是，由于操作方法是异步的，它们应该在被调用后将控制权交还给 jquery，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:11:26.757

当前页面的 SessionState = "readonly" 解决了这个问题。显然会话锁定是问题所在。

# codeigniter - 编译 Codeigniter 的用户指南

> ID：10353877
> 
> 赞同：0
> 
> 时间：2012-04-27T15:54:40.683
> 
> 标签：codeigniter, codeigniter-2

我正在从中提取最新的 Codeigniter

> [https://github.com/EllisLab/CodeIgniter](https://github.com/EllisLab/CodeIgniter)

但是，当我查看此用户指南页面时

> [https://github.com/EllisLab/CodeIgniter/tree/develop/user_guide_src](https://github.com/EllisLab/CodeIgniter/tree/develop/user_guide_src)

这不是我可以查看的东西。它应该是 HTML。我认为它需要编译。我不想用

> [http://codeigniter.com/user_guide/](http://codeigniter.com/user_guide/)

本指南，因为它没有本指南更新。2.1.0 稳定版发布后有很多改进。如何编译这个？实际上它写在 Codeigniter 页面上。但我从来没有分叉过 CI。我该怎么做？

> 那么HTML在哪里？
> 
> 显然，HTML 文档是我们最关心的，因为它是我们的用户遇到的主要文档。由于对已构建文件的修订没有价值，因此它们不受源代码控制。如果您想“预览”您的工作，这也允许您根据需要重新生成。生成 HTML 非常简单。从您的用户指南 repo fork 的根目录发出您在安装说明末尾使用的命令：
> 
> make html 你会看到它做了一个非常棒的编译，此时完全渲染的用户指南和图像将在 build/html/ 中。构建 HTML 后，每次后续构建只会重新构建已更改的文件，从而节省大量时间。如果出于任何原因您想“重置”您的构建文件，只需删除构建文件夹的内容并重新构建。

我发现我可以做到这一点。但是，我的主机“Hostgator”不允许我安装 sphinx。我认为最好让 Unix 用户为我编译它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:13:33.950

阅读文档...

[https://github.com/EllisLab/CodeIgniter/blob/develop/user_guide_src/README.rst](https://github.com/EllisLab/CodeIgniter/blob/develop/user_guide_src/README.rst)

将指南下载到本地计算机并自行编译。

# java - Selenium：在 Java 中使用 cssSelector 提取 div 的文本

> ID：10353880
> 
> 赞同：9
> 
> 时间：2012-04-27T15:55:00.810
> 
> 标签：java, selenium, junit, css-selectors

我正在使用 Selenium 为网页编写 JUnit 测试，并且我正在尝试验证页面中是否存在预期的文本。我正在测试的网页代码如下所示：

```
<div id="recipient_div_3" class="label_spacer">
   <label class="nodisplay" for="Recipient_nickname"> recipient field: reqd info </label>
   <span id="Recipient_nickname_div_2" class="required-field"> *</span>
   Recipient:
</div> 
```

我想将预期的内容与页面上的内容进行比较，所以我想使用 Assert.assertTrue()。我知道要从 div 中获取所有内容，我可以做到

```
String element = driver.findElement(By.cssSelector("div[id='recipient_div_3']")).getText().replaceAll("\n", " "); 
```

但这将返回“reqd info * Recipient:”

有没有办法使用cssSelector从div（“收件人”）中获取文本，而不使用其他标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:58:49.157

你不能使用 CSS 选择器来做到这一点，因为 CSS 选择器没有足够细粒度的方法来表达“包含在 DIV 中的文本节点，但不是它的其他内容”。不过，您可以使用 XPath 定位器来做到这一点：

```
driver.findElement(By.xpath("//div[@id='recipient_div_3']/text()")).getText() 
```

该 XPath 表达式将**仅**标识作为 DIV 的直接子节点的单个文本节点，而不是其中包含的所有文本及其子节点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T16:34:54.800

我不确定是否可以使用一个 css 定位器，但是您可以从 div 获取文本，然后从 div 的子节点获取文本并减去它们。类似的东西（代码未检查）：

```
String temp = "";
List<WebElement> tempElements = driver.findElements(By.cssSelector("div[id='recipient_div_3'] *"));
for (WebElement tempElement : tempElements) {
    temp =+ " " + tempElement.getText();
}
String element = driver.findElement(By.cssSelector("div[id='recipient_div_3']")).getText().replaceAll("\n", " ").replace(temp, ""); 
```

这适用于您尝试避免使用 xpath 的情况。Xpath 允许这样做：

```
//div[@id='recipient_div_3']/text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T12:47:56.160

您还可以获取元素的文本内容并使用正则表达式删除标签。另请注意：您应该使用不情愿的量词 [https://docs.oracle.com/javase/tutorial/essential/regex/quant.html](https://docs.oracle.com/javase/tutorial/essential/regex/quant.html)

```
String getTextContentWithoutTags(WebElement element) {
    return element.getText().replaceAll("<[^>]*?/>", "").trim();
} 
```

# events - 覆盖 Liferay 启动事件

> ID：10353881
> 
> 赞同：5
> 
> 时间：2012-04-27T15:55:01.683
> 
> 标签：events, liferay, startup

我有一个关于 Liferay Startup Events 的问题。

在 Liferay 文档中给出：

> ### 启动事件
> 
> 输入以逗号分隔的扩展类名列表`com.liferay.portal.struts.SimpleAction`。这些类将在指定的事件中运行。

`global.startup.events`谁能告诉我和之间有什么区别，`application.startup.events`任何人都可以告诉我在什么情况下我们需要覆盖它们？

这两个启动事件都应该延长`com.liferay.portal.struts.SimpleAction`吗？我在里面找不到任何东西，`SimpleAction`除了这个：

```
public abstract class SimpleAction {

    public abstract void run(String[] ids) throws ActionException;

    }
} 
```

我也想知道这个类什么都不包含，Liferay 怎么知道要读取和处理哪些 XML 文件？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T19:48:02.663

`global.startup.events`- 为全球服务器运行一次

`application.startup.events`- 在启动时为每个门户实例运行。如果您的服务器上有一个门户实例（正常情况） - 此属性之间没有区别。我用`application.startup.events`.

扩展`com.liferay.portal.kernel.events.SimpleAction`类和 impliment `run`-methode，这将由 liferay 启动调用。为此，创建一个钩子插件并在 liferay-hook.xml 中注册属性文件，例如：

```
<hook>
    <portal-properties>portal-myext.properties</portal-properties>
</hook> 
```

在类路径中创建`portal-myext.properties`并设置您的启动操作：

```
application.startup.events=com.my.actions.MyStartupAction 
```

动作`MyStartupAction`必须在同一个类路径中，因此是同一个钩子插件。

# php - 使用正则表达式从字符串中排除特定字符

> ID：10353885
> 
> 赞同：0
> 
> 时间：2012-04-27T15:55:06.567
> 
> 标签：php, regex

我有一个正则表达式，它从字符串（可能包括输入的 URL 的描述文本）中提取输入的 URL，并将它们转换为 href。这一切都很好，除了当输入 URL 并且它的最后一个字符是“，”或“)”时，它也将此字符作为 URL 的一部分。我怎么能防止这种情况？

示例文本：

> 嗨，这是我的美丽信息，其中包含一个链接（请参阅 www.website.com）和一些更多信息。

我的正则表达式会读取 URL，但在创建 href 时也会使用最后一个字符“)”，从而导致链接错误。

我的正则表达式：

```
preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:11:08.360

It looks like your matching anything after the url.try this.

```
preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ][^\,)]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:06:44.087

在 URL 终止字符列表中包含“,”和“)”。不要忘记用反斜杠转义“）”。换句话说，尝试：

`preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< \),]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $text);`

（我没有测试过这个。）

# symfony - 在 Symfony2 和 Doctrine 中处理 PagerBundle 的 EntityRepository 和 QueryBuilder

> ID：10353886
> 
> 赞同：3
> 
> 时间：2012-04-27T15:55:08.733
> 
> 标签：symfony, pagination, doctrine-orm, query-builder

PagerBundle是一个非常有用的包，用于处理[Symfony2](https://github.com/makerlabs/PagerBundle)中的分页。但是，它为[Doctrine2](https://github.com/makerlabs/PagerBundle/blob/master/Adapter/DoctrineOrmAdapter.php)提供了基于`QueryBuilder`.

然后，应该`QueryBuilder`在每个控制器内部创建一个特定的查询。这种方法将需要定义可在控制器内部使用的*临时*函数，以及表模式更改时可能出现的问题。事实上，正确的做法是使用 user-defined `EntityRepository`，其中包含对 Doctrine Entity 的所有有用查询。

对 的每次调用都`EntityRepository`应该返回查询的结果，而不是`Query`对象或`QueryBuilder`对象。那么，你建议如何处理这个问题？

PS：请不要回答我可以通过实体存储库的功能返回一个QueryBuilder。这是微不足道的！

# c++ - 开发 Windows 窗体应用程序？

> ID：10353888
> 
> 赞同：0
> 
> 时间：2012-04-27T15:55:11.293
> 
> 标签：c++, windows, forms

到目前为止，C++ 是我选择的语言。但是，我只开发了库和控制台应用程序。

我喜欢在 Visual C# 中您可以轻松地为您的应用程序设计 GUI - 简单的拖放控件和简单地编辑它们的属性。

我试图在 Visual C++ 中创建一个 Windows 窗体应用程序，但它使用 CLR/.Net。有没有办法在 Visual Studio 中制作 Windows 窗体应用程序而无需使用 CLR 或 .Net？我真的很喜欢用 C# 或 VB.NET 设计表单应用程序是多么容易。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:07:02.540

不，.NET 应用程序的整个概念是它利用 .NET 框架来完成您提到的所有很酷的事情。如果您要详细说明您要完成的工作，我们可能会推荐一个替代解决方案，但如果您编写 C# winForms 应用程序，它将需要 .NET 框架才能运行......

编辑：

您可以使用 qt ide，或者可能是 Visual Studio 的 QT 插件。看看这个线程： [最好的 QT ide？](https://stackoverflow.com/questions/427965/best-qt-ide)

# jquery - jQuery加载函数挂起问题

> ID：10353890
> 
> 赞同：0
> 
> 时间：2012-04-27T15:55:18.960
> 
> 标签：jquery

我正在加载一个大小为 50 kb 的页面，其中有一个 web 服务调用。我在这里面临的问题是，在初始加载期间，它需要相当长的时间，并且在页面呈现之前会有轻微的挂起。

如何克服这个？否则是否有任何替代方法可用于加载功能可以更好地执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:34:06.233

如果我理解正确，您的页面的加载取决于此 Web 服务，这实际上是您的瓶颈。

你基本上有两个选择。

**选项 1 - 缓存**

如果您调用的 Web 服务不必在每次加载时都 100% 更新，则您可能会缓存响应。我不知道你现在是怎么做的，但如果它是第三方服务，你可以编写一个简短的代理程序来每分钟调用一次，并将响应保存到磁盘，然后你的页面将在磁盘上获取它从。

或者，如果您不想编写自己的代理服务，您可以使用类似 Squid 的东西，它可以缓存内部网络连接，因此如果您的应用程序通过 Squid 查询某些内容，它会将对该服务器的响应缓存*t*时间段。

**选项 2 - AJAX**

如果它是无法缓存的（即与网页上的会员详细信息有关），您可以查看使用 jQuery 异步加载页面。

您可以使用 $.ajax(); 而不是加载 web 服务预渲染的详细信息；函数加载它，然后在完全加载后使用 JavaScript 更新您的页面。

如果它是不同域上的第三方，您将不得不在您自己的系统上构建一个代理，以便您可以调用您网站的 AJAX URL，然后该 URL 将调用 Web 服务。

在他们两个中，如果可以的话，我会认真考虑选择选项 1。如果它是一个高流量的应用程序，缓存响应将大大加快您的应用程序的速度，并减少对 Web 服务的压力。

选项 2 仍然不错，亚马逊等许多大品牌都使用它来解决这些问题。

# apache-flex - 灵活的模块化应用程序资源

> ID：10353895
> 
> 赞同：1
> 
> 时间：2012-04-27T15:55:22.710
> 
> 标签：apache-flex

我想知道在创建复杂且大型灵活模块化应用程序时的最佳实践是什么？特别关注国际化、性能、远程处理（服务）、皮肤、缓存、日志记录。

如何使用这些公共资源？

想象一下，许多开发人员将在同一个项目上工作，但每个人都在不同的“小”模块上，他们不必知道整个应用程序是如何工作的。因此，每个开发人员都将创建和编译他/她的模块 (swf)，而我只需将这些 swf 放在相应的文件夹中即可。

您如何看待这种方法：

1.  创建一个通用库：myAppLibrary，用于管理语言、服务、缓存、日志记录、调试。例如，该库可以具有以下功能：`translate(str:String):String`、、、`callAmfService(class:String,methode:string,...params)`等`loadCache(cacheKey:String):Object`

2.  要求每个模块（开发人员）在处理语言、服务等时都应该使用这个库。例如，在模块内，开发人员可以这样做：例如 langSingleton::getInstance()->translate('somestring')

3.  使模块通过事件进行通信

（对不起，如果我的英语不清楚）

谢谢

# android - Rotate 'something that can be drawn on Canvas'

> ID：10353896
> 
> 赞同：0
> 
> 时间：2012-04-27T15:55:23.317
> 
> 标签：android, matrix, bitmap, rotation, drawable

Hi have a problem regarding rotation. I'm currently drawing a few Objects on a Canvas. Currently this 'Objects' are just Bitmaps. After computing the rotation and passing it inside a Matrix, I'm forced to create a new Bitmap to get it rotated. A small snippet will clearify this:

```
public void onDraw(Canvas canvas){
    mMatrix = new Matrix();
    mMatrix.postRotate(getRotation());
    Bitmap rotateBmp = Bitmap.createBitmap(mBitmap, 0, 0, mBitmap.getWidth(), mBitmap.getHeight(), mMatrix, true);
    canvas.drawBitmap(rotateBmp, mCoords.x -(mBitmap.getWidth() / 2), mCoords.y - ( mBitmap.getHeight() / 2), null);
    rotateBmp.recycle();
} 
```

All I can do to save memory is calling recycle on the `rotateBmp`, and it will run most of the time correctly. Lets assume I have 10 Bitmap 'Objects' I want to rotate. That means I have to keep ten Bitmaps as 'sample' and create ten new Bitmaps in every draw-cycle plus an additional new Matrix (didn't find a way to 'reset' it). This sounds very weird to me. Is there another Way, to create 'something that can be drawn on a Canvas' on the fly (no XML), while keeping control of their rotation. Any Idea is very welcome. If its a View, a Drawable or another CustomClass doesn't matter. Maybe it is important that `getRotation` will be all the same for every "Something" that should be drawn. What is the best practice to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:27:57.687

You can rotate the `Canvas` using `canvas.rotate(float degrees)`

```
public void onDraw(Canvas canvas) {
    canvas.drawBitmap(mBitmap, mCoords.x -(mBitmap.getWidth() / 2), mCoords.y - ( mBitmap.getHeight() / 2), null);
    canvas.rotate(getRotation());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:37:13.333

With the great help of @Jason Robinson and [how To Rotate Text in Canvas](http://eleanordarephdjournal.blogspot.de/2011/03/another-good-android-example-with.html) I figured out a Way, of how I can do it. Here is a short snippet, that will work:

```
Bitmap mBitmap = getResources()...
int xPositionOfBitmap
int yPositionOfBitmap
public void onDraw(Canvas canvas) {
    int bitmapCenterX = xPositionOfBitmap + (mBitmap.getWidth() / 2)
    int bitmapCenterY = yPositionOfBitmap + (mBitmap.getHeight() / 2)
    canvas.save()
    canvas.rotate(getRotation(),bitmapCenterX, bitmapCenterY)
    canvas.drawBitmap(mBitmap, xPositionOfBitmap, yPositionOfBitmap)
    canvas.restore()
} 
```

# linq - 复合组加入

> ID：10353898
> 
> 赞同：1
> 
> 时间：2012-04-27T15:55:27.823
> 
> 标签：linq, entity-framework

我想使用 linq 扩展方法对以下三个表进行组加入

客户订单 OrderShippingInfo

客户可以有多个订单，每个订单只能有一个 OrderShippingInfo。

所以我的目标是对这 3 个表进行组连接，并返回一个匿名对象，该对象具有一个客户和一组 {Order, OrderShippinfo}。

我知道如何在客户和订单之间进行群组连接，但我不知道如何在集合中添加 OrderShippInfo

```
 Customer.GroupJoin(Order, c=>c.customerID, o=>o.CustomerID, (c,o)=> new {c,o}) 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:29:11.127

那个怎么样：

```
 Customer.GroupJoin(Order.Join(OrderShippinInfo,
                               o=>o.OrderID,
                               s=>s.OrderID,
                               (o, s) => new { Order = o, ShippingInfo = s}),
                    c=>c.customerID,
                    oi=>oi.Order.CustomerID,
                    (c,oi)=> new {c,oi}) 
```

# javascript - 如何使用 JQuery POST、检索结果以及使用结果设置对象属性

> ID：10353901
> 
> 赞同：0
> 
> 时间：2012-04-27T15:55:35.910
> 
> 标签：javascript, jquery

我使用下面的脚本将可视化嵌入到 HTML 页面中。本质上，我在代表可视化的对象上设置属性，然后 viz_v1.js 为我完成所有繁重的工作：

```
 <script type="text/javascript" src="http://public.tableausoftware.com/javascripts/api/viz_v1.js"></script>
  <div class="tableauPlaceholder" 
        style="width:654px; height:1469px;background-image: url('http://localhost:81/Background.gif'); top: 0px; left: 0px; width: 100%; margin-left: 76px;">

            <noscript>
                <a href="#"><img alt="Analytics, Inc. " 
                src="http://localhost:81/Background.gif" 
                style="border: none" /></a>
            </noscript>

            <object class="tableauViz" width="654" height="1469" style="display:none;">
            <param name="host_url" value="http%3A%2F%2F192.168.56.1%2F" />
            <param name="site_root" value="/t/Site2" />
            <param name="name" value="AnalyticsIncJavaScript&#47;AnalyticsInc" />
            <param name="tabs" value="no" />
            <param name="toolbar" value="yes" />
            <param name="static_image" value="Background.gif"/>
            <param name="animate_transition" value="yes" />
            <param name="display_static_image" value="yes" />
            <param name="display_spinner" value="yes" />
            <param name="display_overlay" value="yes" />
            <param name="display_count" value="yes" />
            </object>

    </div> 
```

请注意，我正在对所有有问题的属性值进行硬编码。

我现在需要在组合中添加另一个参数/属性 - 这个吸盘的值需要是动态的：

```
 <object class="tableauViz" width="654" height="1469" style="display:none;">
        <param name="host_url" value="http%3A%2F%2F192.168.56.1%2F" />
        ... 
        <param name="ticket" value="<a dynamic value>" />           
        </object> 
```

我必须通过将任意用户名和客户端 IP 发布到 URL 来检索“票证”的值，然后获取响应。

从我所做的研究来看，jquery 似乎允许我这样做，但由于我是 js 新手，我不清楚如何在发布时传递两个名称/值对（用户名、ipaddress）。我也不清楚如何通过解析响应来获取生成的“票证”值并将其放入变量中以供以后使用。

**问题1：**有人可以告诉我如何做到这一点吗？（“为愚蠢而保持简单”在这里肯定是有序的——假设我对 jquery 和 javascript 一无所知是正确的）

**问题 2：**假设我现在已将票证值加载到变量中（我们称之为 varTicket），如何在我的 tableauViz 对象上动态填充票证参数？

我是否使用 PHP 之类的东西（对此也一无所知），并以某种方式回显我的门票价值？我可以直接寻址 tableauViz 对象并触摸它的 .ticket 属性吗？我宁愿处理这部分难题，而不必重新加载/提交包含页面。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:07:08.690

假设您的服务器将返回一个代表您的票证的 Json。

您的 jQuery 帖子看起来像这样：

```
var ticketValueFromServer;

jQuery.post(
  dataType : "JSON",
  data : {"username" : username, "ipaddress" : ipaddress},
  url: myserverlocation,
  success: function(response){
    ticketValueFromServer = response.ticket;
  }
); 
```

在创建对象时使用此 ticketValue。

不要忘记看[例子](http://api.jquery.com/jQuery.post/)

# c - 有什么方法可以让 c 预处理器忽略所有#include 吗？

> ID：10353902
> 
> 赞同：1
> 
> 时间：2012-04-27T15:55:38.140
> 
> 标签：c, c-preprocessor

使用 pycparser 解析大量 .c 源文件，但解析器无法处理 #included 库中的许多内容，而且我真的不需要它们来达到我的目的。我不需要编译它，只需要从我正在处理的特定 .c 生成 AST。我现在传递的 cpp args 是：

```
cpp_args=["-D__attribute__=","-D__extension__=","-D__builtin_va_list=void*"] 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:05:35.073

尝试`-nostdinc`为预处理器指定选项（并确保您没有传递任何`-I`选项）。鉴于此输入`foo.c`：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char **argv) {
        return 0;
} 
```

跑步：

```
cpp -nostdinc foo.c 
```

给我：

```
# 1 "foo.c"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "foo.c"

int main(int argc, char **argv) {
 return 0;
} 
```

以及以下错误：

```
foo.c:1:19: error: no include path in which to search for stdio.h
foo.c:2:20: error: no include path in which to search for stdlib.h
foo.c:3:20: error: no include path in which to search for unistd.h 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:01:13.750

一种解决方案是使用#include 保护

如果您在每个标题中都有传统的包装器，例如。

```
#ifndef THIS_FILE_H
#define THIS_FILE_H

   // stuff

#endif 
```

然后你可以简单地`#define`所有你想忽略的标题保护标签

# jquery - 如何确保在移动 Safari 中滚动到顶部时不隐藏 URL 栏

> ID：10353903
> 
> 赞同：2
> 
> 时间：2012-04-27T15:55:40.263
> 
> 标签：jquery, mobile, safari, scroll, jquery-animate

在小屏幕样式表中，我想使用 jQuery（不是 jQuery mobile）滚动到页面顶部。

```
// scroll to top
$('html, body').animate({scrollTop:0}, 'fast'); 
```

现在这可行，但它一直向上并隐藏了 URL 栏。它会产生一种行为，当您将内容拉回（以查看 URL 栏）时，它会再次向上跳并再次隐藏 URL 栏。

我希望它滚动到页面顶部而不隐藏 URL 栏。那可能吗？

其他类似的问题更倾向于希望 URL 栏消失以生成 WebAppFeel。这仅适用于网站的小屏幕样式表，因此我希望 URL 栏保持原位。

# sharepoint - 在自定义页面上使用人员选择器时访问被拒绝错误

> ID：10353904
> 
> 赞同：0
> 
> 时间：2012-04-27T15:55:41.070
> 
> 标签：sharepoint, sharepoint-2007, peoplepicker

我们有文档库的自定义上传页面。在上传页面上，我们有一个人员选择器字段，（用户可以输入多个用户 ID）人员选择器设计

```
<SharePoint:PeopleEditor ID="pplApprovers" runat="server" Width="250px" Height="25px" MultiSelect="true"/> 
```

要从人员选择器中获取 emp id，我们使用以下代码

```
 public ArrayList approversArray; 
public SPFieldUserValueCollection approversCollection; 

try
{
SPSecurity.RunWithElevatedPrivileges(delegate()
 { 
  ArrayList aAccount1 = new ArrayList();
    approversArray= pplApprovers.Entities;

approversCollection = new SPFieldUserValueCollection(); 
SPUser user; 
SPGroup group; 
SPUser currentUser;
SPWeb web=SPControl.GetContextWeb(Context);
currentUser=web.CurrentUser;
 ArrayList aAccount = new ArrayList();
aAccount = pplApprovers.Accounts;
ArrayList peEntities = pplApprovers.Entities;
approversArray = pplApprovers.ResolvedEntities;

foreach (PickerEntity entity in approversArray) 
{
if (entity.EntityData["PrincipalType"].ToString() == "SharePointGroup") 
{
    group = web.SiteGroups[entity.Key]; 
    approversCollection.Add(new SPFieldUserValue(web,group.ID, group.Name)); 
} 
else 
{
    //handles SecurityGroup, Distribution List and User 
    user = web.EnsureUser(entity.Key); 
    approversCollection.Add(new SPFieldUserValue(web,user.ID, user.Name)); 
} 
} 
}); 

catch (Exception ex)
{
// Manage error event
} 
```

得到这个值后，我们将它插入到文档库中。

```
item.Item["Account Partner"]="approversCollection"; 
```

但是在单击上传按钮后，唯一具有站点管理员访问权限的用户可以成功上传文件，但其他没有管理员访问权限的用户会被重定向到 [https://web/_layouts/AccessDenied.aspx](https://web/_layouts/AccessDenied.aspx) 页面

我们尝试使用 SPSecurity.RunWithElevatedPrivileges 但没有成功......

任何人都请让我知道如何解决此问题或使用人员选择器的替代方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:41:11.313

您需要在提升的权限下创建新站点和 Web 对象，而不是使用 Web 对象的 SPContext。

```
SPWeb web=SPControl.GetContextWeb(Context) 
```

您需要在提升的权限下使用它：

```
using (SPSite site = new SPSite(SPContext.Current.Web.Url))
{
   using(SPWeb web = site.OpenWeb())
   {
      ....
   }
} 
```

# actionscript-3 - AS3 自定义命中测试

> ID：10353909
> 
> 赞同：0
> 
> 时间：2012-04-27T15:56:11.243
> 
> 标签：actionscript-3

我正在考虑在Flash中做一个平台游戏。我正在考虑的关卡设计方法是将每个关卡作为具有透明或纯色背景的图像。

使用常规的 hittest 函数确定一个对象是否接触了另一个对象。在这种情况下，这将始终返回 true。

我的问题是，如果玩家角色与关卡上的任何非透明/纯色发生碰撞，我希望 hitTest 函数返回 true。

如果我确实有一个透明背景，我可能会有另一个图像作为背景，它会比关卡图像移动一点，以创建一个简单的视差效果。如果我这样做，hitTest 函数将需要忽略背景图像（我认为这不会是一个问题，但指定并被称为白痴总比没有好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:43:33.260

这是一种效率低下的方法，但它是最简单的解决方案：

```
if (player.hitTestObject(platform) && platform.alpha == 1) {
            trace("we landed!!!");
        } else {
            trace("we fell!!!");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:23:15.157

考虑使用[AS3 碰撞检测套件](http://code.google.com/p/collisiondetectionkit/)，因为它可以检测颜色上的碰撞。

# linux - 如何使用“tail -1 */filename”拖尾多个文件的最后一行

> ID：10353912
> 
> 赞同：14
> 
> 时间：2012-04-27T15:56:22.307
> 
> 标签：linux, bash, tail, head

```
tail */filename 
```

有效，但是

```
tail -1 */filename 
```

没有。为什么是这样？是否有 1 班轮可以在没有循环的情况下执行此任务？

```
head -1 */filename 
```

出于某种奇怪的原因工作。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-27T16:34:25.720

虽然`head`适用`-1`于多个文件，`tail`但不能。但它适用于`-n`参数：

```
tail -n 1 */filename 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-18T10:27:12.340

如果您仍在寻找答案，请尝试以下一项：

转到文件可用的目录并执行以下命令

```
ls -1|while read file; do tail -1 $file; done 
```

# c# - StreamReader 与 BinaryReader？

> ID：10353913
> 
> 赞同：44
> 
> 时间：2012-04-27T15:56:25.533
> 
> 标签：c#, .net, file, streamreader, binaryreader

两者`StreamReader`都`BinaryReader`可以用于从二进制文件中获取数据（例如）

*二进制阅读器：*

```
 using (FileStream fs = File.Open(@"c:\1.bin",FileMode.Open))
            {
                    byte[] data = new BinaryReader(fs).ReadBytes((int)fs.Length);
                    Encoding.getstring....
            } 
```

*流阅读器：*

```
 using (FileStream fs = File.Open(@"c:\1.bin",FileMode.Open))
            {
                using (StreamReader sr = new StreamReader(fs,Encoding.UTF8))
                {
                       var myString=sr.ReadToEnd();
                }
            } 
```

有什么区别，我应该什么时候使用 which ？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-27T15:59:29.227

> StreamReader 和 BinaryReader 都可以用来从二进制文件中获取数据

好吧，`StreamReader`可以用来从文本的二进制表示中获取文本数据。

`BinaryReader`可用于获取任意二进制数据。如果其中一些二进制数据恰好是文本的表示，那很好 - 但它不一定是。

底线：

*   如果您的全部数据是文本数据的直接二进制编码，请使用`StreamReader`.
*   如果您从根本上获得了可能恰好在文本中包含*某些部分的**二进制数据，请使用**`BinaryReader`*

 *So for example, you *wouldn't* try to read a JPEG file with `StreamReader`.*

# rtc - 在 RTC 源代码控制中创建多个分支/流

> ID：10353914
> 
> 赞同：1
> 
> 时间：2012-04-27T15:56:29.853
> 
> 标签：rtc

在 RTC 源代码控制中创建同一项目的多个开发流的标准方法是什么？

目前要创建单个流，我创建了一个存储库工作区及其相应的流。我将项目签入到工作区，然后将其交付给这个新流。要为项目创建新的开发流程，我需要重复此过程还是有更好的方法，也许使用命令行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:17:01.610

不，您不需要重复该过程。

我建议为您在第一个流中交付的组件设置基线。或者将快照放在第一个流上。这将标记该流中的所有组件。

然后创建第二个流，您可以：

*   逐个填充组件，为每个组件指定一个基线
*   或直接在快照中指定，这会将所有组件及其相关标签放入该新流中。

然后创建存储库工作区并开始工作。

*因此，新*流背后的想法是指定您要从哪个版本开始工作。
因此，基线或快照放在第一个流中：这将有助于初始化下一个流。
无需重新导入所有内容。

# iphone - 如何关联 UIKit、Core Image、Quartz 2D 以及 iOS 中的各种框架？

> ID：10353916
> 
> 赞同：1
> 
> 时间：2012-04-27T15:56:31.120
> 
> 标签：iphone, ios, cocoa-touch, uikit, quartz-graphics

到目前为止，我很清楚 UIKit 是在 Core Graphics 和 Core Animation 之上的，而 Core Graphics 和 Core Animation 可以做什么，UIKit 也有一些更高级别的方法来完成它们。

其他层怎么样，Core Image、Quartz 2D、Quartz、Quartz Core、Quartz Graphics、Core Video、Cocoa Touch、Core Motion。它们如何相互关联？（是否有一个很好的图表可以准确地描述它们在 iOS 中的位置？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:09:15.810

石英 = 石英 2D = 核心图形。从程序员的角度来看，这些只是同一事物的不同名称。Apples 将其图形引擎称为 Quartz (2D)，它是 Core Graphics 框架的一部分。如果您想在代码中使用 Quartz (2D)，请使用 Core Graphics 框架中定义的 API。

Quartz Graphics：我以前从未听说过这个，但它可能只是 Quartz/Core Graphics 的另一个名称。

Core Image 是另一个主要关注图像处理的框架（首先出现在 Mac 上，最近出现在 iOS 上）。Core Image 允许您在图像上应用一组预定义或自定义的图形过滤器。众所周知，Core Image 非常快，因为它非常有效地使用 GPU 来应用这些过滤器。最近，Core Image 有了另一个功能：图像中的人脸检测。

（我对核心视频了解不多，所以如果其他人可以添加更多关于该主题的信息，我将不胜感激。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:11:29.057

感谢 Begemann 的回答。我在[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/WhatIsCocoa/WhatIsCocoa.html#//apple_ref/doc/uid/TP40002974-CH3-SW16上找到了更多信息](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/WhatIsCocoa/WhatIsCocoa.html#//apple_ref/doc/uid/TP40002974-CH3-SW16)

虽然可能不完整，但这里有一个概述：

* * *

**在 Mac OS X 上：**

![在此处输入图像描述](../Images/4814bf692edbfb1bbeee93c36249b55e.png)

* * *

**在 iOS 上：**

![在此处输入图像描述](../Images/1bec2943c71ee70cc96c6c709854de32.png)

**摘抄：**

> 下面从基础层开始总结了在 iOS 堆栈的每一层中发现的一些框架。
> 
> **核心操作系统**。此级别包含内核、文件系统、网络基础设施、安全性、电源管理和许多设备驱动程序。它还具有 libSystem 库，该库支持 POSIX/BSD 4.4/C99 API 规范并包括用于许多服务的系统级 API。
> 
> **核心服务**。该层中的框架提供核心服务，例如字符串操作、集合管理、网络、URL 实用程序、联系人管理和首选项。他们还提供基于设备硬件功能的服务，例如 GPS、指南针、加速度计和陀螺仪。这一层中的框架示例是核心位置、核心运动和系统配置。
> 
> 该层包括 Foundation 和 Core Foundation，这些框架为字符串和集合等常见数据类型提供抽象。核心框架层还包含核心数据，一个用于对象图管理和对象持久性的框架。
> 
> **媒体**。该层的框架和服务依赖于Core Services 层，为Cocoa Touch 层提供图形和多媒体服务。它们包括核心图形、核心文本、OpenGL ES、核心动画、AVFoundation、核心音频和视频播放。
> 
> **可可触摸**。这一层的框架直接支持基于 iOS 的应用程序。它们包括 Game Kit、Map Kit 和 iAd 等框架。
> 
> Cocoa Touch 层和 Core Services 层各有一个 Objective-C 框架，这对于开发 iOS 应用程序尤为重要。这些是 iOS 中的核心 Cocoa 框架：
> 
> **界面套件**。该框架提供应用程序在其用户界面中显示的对象，并定义应用程序行为的结构，包括事件处理和绘图。有关 UIKit 的说明，请参阅“UIKit (iOS)”。</p>
> 
> **基础**。该框架定义对象的基本行为，建立管理机制，并为原始数据类型、集合和操作系统服务提供对象。Foundation 本质上是 Core Foundation 框架的面向对象版本；有关 Foundation 框架的讨论，请参见“Foundation”。

# sql - 在多对多关系中的表之间创建连接

> ID：10353921
> 
> 赞同：3
> 
> 时间：2012-04-27T15:56:39.687
> 
> 标签：sql, sqlite

我有两张桌子：`photos (id,path)`和`tags(id,name)`。表是多对多的关系，所以我有第三个表： `photos_tags(photos_id, tags_id)`.

现在，如何将指定路径的照片与指定名称的标签连接起来？我想做这样的事情：

```
INSERT INTO photos_tags
  SELECT photos.id, tags.id FROM photos, tags
  WHERE photos.path = '/some/path' AND tags.name = 'tag'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:00:09.507

```
insert into photos_tags
(photos_id, tags_id)
select id,
    (
        select id
        from Tags
        where name = 'tag'
        )
from photos
where path = '/some/path' 
```

# active-directory - 使用 ADAM 进行身份验证。如何将 ApacheDS Studio 与 ADAM 连接

> ID：10353927
> 
> 赞同：1
> 
> 时间：2012-04-27T15:56:57.063
> 
> 标签：active-directory, adam, apacheds

我是 AD 新手，我刚刚在我的 windows xp 中安装了 ADAM。然后我创建了一个新的

实例按照步骤，一切都很好：

* * *

```
Install a unique instance of ADAM.

Instance name: dash
Computers will connect to this instance of ADAM using the following ports:
LDAP port: 389
SSL port: 636

ADAM replication will use Negotiate authentication.

Store ADAM program files in the following location:
C:\WINDOWS\ADAM

Store ADAM data files in the following location:
C:\Archivos de programa\Microsoft ADAM\dash\data

Store ADAM data recovery information in the following location:
C:\Archivos de programa\Microsoft ADAM\dash\data

Run ADAM using the following account:
NT AUTHORITY\NetworkService

Set up the following account to administer ADAM:
JUANOX\Juano

Create the following application directory partition:
dc=xxxx,dc=com 
```

* * *

之后我想使用 ApacheDS Studio 连接到 ADAM。但是我遇到了这个问题。我应该使用哪个用户/密码进行连接？

好吧，我尝试了“ADAM ADSI Edit”来创建连接，我有以下选项：

```
Connection Name=dash
ServerName=localhost:389
DistinguishName or Naming Context:dc=xxxx,dc=com
The account of the currently logged on User 
```

使用此配置后，我成功创建了连接

但我不知道用户/密码！。我尝试使用 JUANOX\Juano（这是我在 Windows 中的用户）和“密码”，在 ApacheDS Studio 中使用 Juano 和密码，但没有任何反应。我知道我不需要这个应用程序来管理 ADAM（我可以使用 ADAM ADSI Edit）。但我需要这些信息，因为我想使用我正在做的应用程序手动连接到 ADAM。我需要这些信息。

所以？？我错过了什么？

* * *

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T16:25:33.483

好吧，我从一开始就犯了错误。我删除了该实例并创建了一个新实例，遵循此链接：

[http://www.coreblox.com/blog/tag/adam/](http://www.coreblox.com/blog/tag/adam/)

因此，解决方案是使用“ADAM ADSI Edit”创建一个管理员用户。我习惯了 ApacheDS，而且我总是使用默认用户/密码。所以，这是错误的。

创建 ADmin 用户后，我可以使用新用户/密码登录 ApacheDS Studio Tool :)

我希望这对其他人有帮助:)

# asp.net-mvc - 如何重定向到同一控制器中的另一个动作？

> ID：10353931
> 
> 赞同：10
> 
> 时间：2012-04-27T15:57:10.463
> 
> 标签：asp.net-mvc, asp.net-mvc-3, redirect, controller, action

我想重定向到同一控制器中的另一个动作。我们怎样才能做到这一点？我试过回来

> RedirectToAction("未授权");

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T16:00:11.050

```
return RedirectToAction("ActionName"); 
```

而不是`return Redirect("/Elearning/NotAuthorized");`这样做：

```
return RedirectToAction("NotAuthorized"); // if you're inside the Elearning controller 
```

或者

```
RedirectToAction("NotAuthorized", "Elearning"); // if calling from other controller 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:59:53.740

尝试

```
return RedirectToAction("SomeAction"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T16:00:22.947

如果你想返回一个重定向

```
return RedirectToAction("NotAuthorized"); 
```

是执行此操作的有效方法。确保您的方法确实存在。

或者，如果您不想要重定向

```
return View("NotAuthorized"); 
```

也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T16:18:27.760

尝试先探索 ControllerBase，或转到控制器继承的控制器定义，然后查找“重定向”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-27T16:06:39.313

我正在使用 asp.net MVC 3，这有效：`return Redirect("/{VIEWPATH}/{ACTIONNAME}");`.

例如，`return Redirect("/account/NotAuthorized");`其中“帐户”是您的视图路径，您的控制器名称是 AccountController。希望这可以帮助。

# perl - 访问制表符分隔文件中的数据

> ID：10353933
> 
> 赞同：-1
> 
> 时间：2012-04-27T15:57:20.823
> 
> 标签：perl

例如，我有一个制表符分隔的文件

```
ID   NAME      FAMILYTAG     EFFECT
001  John      Black         Positive
002  Kate      Rhodes,Mich   Positive
003  Aaron     Sunders       Negative
004  Shirley   Rhodes        Negative
005  Dexter    Sunders,Hark  Positive 
```

我想输入这个文件（实际上要大得多）并读入一个名称，例如`Kate`. 我希望脚本识别它的家庭标签，即它包含`Rhodes`，然后输出另一个家庭成员`Shirley`。有没有办法做到这一点？输出文件将如下所示。

```
Kate  Rhodes 
Shirley Rhodes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:07:03.570

给定您的输入，这是获得所需输出的一种方法...

```
use warnings;
use strict;

my %names;
while (<DATA>) {
    next if /^ID/;
    my ($first, $last) = (split)[1 .. 2];
    $last =~ s/,//;
    push @{ $names{$last} }, $first;
}
print "$_ Rhodes\n" for @{ $names{Rhodes} };

__DATA__
ID     NAME   FAMILYTAG   EFFECT
001  John      Black               Positive
002  Kate      Rhodes, Mich           Positive
003  Aaron   Sunders          Negative
004  Shirley  Rhodes          Negative
005  Dexter    Sunders        Positive 
```

[复制自我在 PerlMonks 上的回答](http://www.perlmonks.org/?node_id=967406)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:25:56.550

我不清楚`FAMILYTAG`列中的多个名称表示什么，但我将它们放在一起假设它们是替代姓氏。

```
use strict;
use warnings;

my %names;
my %families;

while (<DATA>) {
  next unless /^\d/;
  my ($id, $name, $familytag, $effect) = split /\t/;
  for my $tag (split /,/, $familytag) {
    push @{ $names{$name} }, $tag;
    push @{ $families{$tag} }, $name;
  }
}

while () {

  print "\nName: ";
  chomp (my $name = <>);
  last unless $name =~ /\S/;
  print "\n";

  if (my $tags = $names{$name}) {
    for my $tag (@$tags) {
      my $names = $families{$tag};
      next unless @$names > 1;
      printf "%s %s\n", $_, $tag for @$names;
    }
  }
  else {
    warn qq(No name "$name" found);
  }
}

__DATA__
ID  NAME    FAMILYTAG   EFFECT
001 John    Black   Positive
002 Kate    Rhodes,Mich Positive
003 Aaron   Sunders Negative
004 Shirley Rhodes  Negative
005 Dexter  Sunders,Hark    Positive 
```

**输出**

```
E:\Perl\source>ff.pl

Name: Kate

Kate Rhodes
Shirley Rhodes

Name: Aaron

Aaron Sunders
Dexter Sunders

Name: Mike

No name "Mike" found at E:\Perl\source\ff.pl line 31, <> line 3.

Name: Dexter

Aaron Sunders
Dexter Sunders 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:33:23.873

```
#!/usr/bin/perl

use strict;
use warnings;
my %db;

open (F,'1.pl.tst');

my $find="Kate";
while(<F>)
{
    chomp;
    if (/^(\d+)[\t\ ]+(\w+)[\t\ ]+([^\t\ ]+)[\t\ ]+(\w+)$/)
    {
        $db{$1}{'name'}=$2;
        $db{$1}{'family'}=[split(',',$3)];
        $db{$1}{'effect'}=$4;
    }
}

my @family=@{name2family($find)};
foreach (@family)
{
    family2name($_);
}

sub name2family
{
    my $name=shift;
    foreach (keys %db)
    {
        if ($db{$_}{'name'} eq $name)
        {
            return $db{$_}{'family'};
        }
    }
}

sub family2name
{
    my $family=shift;
    foreach my $k (keys %db)
    {
        foreach (@{$db{$k}{'family'}})
        {
            if ($_ eq $family)
            {
                print $db{$k}{'name'}."\t\t".$_."\n";
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:13:11.700

[`Text::CSV`](http://search.cpan.org/perldoc?Text%3a%3aCSV)可以被告知使用不同的分隔符；`"\t"`在这种情况下。

```
use Text::CSV;

my $tsv = Text::CSV->new ( { sep_char => "\t" } ); 
```

然后使用与该模块示例中的`$tsv`对象类似的`$csv`对象。

# jquery - 如何在div中裁剪字符串

> ID：10353941
> 
> 赞同：0
> 
> 时间：2012-04-27T15:57:54.210
> 
> 标签：jquery, html

我有这个结构：

```
<div class="person">
  <a href="#">Title &ndash; Description</a>
</div> 
```

我需要一个解决方案：使用“person”类在 div 中剪切破折号后面的所有文本（使用破折号）。我怎样才能用jquery解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:04:57.770

应该管用：

```
$(function(){
    var el = $("div.person a");
    el.text(el.text().split('–')[0].trim());
}); 
```

现场演示：http: [//jsfiddle.net/bHFUK/](http://jsfiddle.net/bHFUK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:33:54.077

这有效：

```
$("div.person a").each(function() {
    $(this).html($(this).html().split('–')[0]);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/BFBbW/)**。

# xml - 如何使用 Linq XDocument 重构 Xmls？

> ID：10353947
> 
> 赞同：0
> 
> 时间：2012-04-27T15:58:35.263
> 
> 标签：xml, linq, linq-to-xml

我需要重组大量的 xml。更喜欢的做法是 Linq with XDocument .. 但我欢迎您提出任何建议。非常感谢。

我抓了一张照片..我希望这足以解释我想要做什么。

![在此处输入图像描述](../Images/3a7e986e099de15a1362e2b71a695ea7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:03:12.610

听起来像你想要的：

```
var original = XDocument.Load(...);
var replacement = new XDocument(
    new XElement("root",
        original.Descendants("Song")
                .GroupBy(x => (string) x.Attribute("artist"))
                .Select((songsForArtist, index) => new XElement("artist",
                    new XAttribute("id", index + 1),
                    new XAttribute("name", songsForArtist.Key),
                    songsForArtist))); 
```

# mouse - 使用 XTest lib 伪造鼠标滚动

> ID：10353948
> 
> 赞同：1
> 
> 时间：2012-04-27T15:58:36.203
> 
> 标签：mouse, x11

如何使用 XTest lib 伪造鼠标滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T23:01:17.483

检查`xte`程序及其源代码。您可能想使用`xte`它自己而不是您的代码。

*   [http://hoopajoo.net/projects/xautomation.html](http://hoopajoo.net/projects/xautomation.html)
*   [http://linux.die.net/man/1/xte](http://linux.die.net/man/1/xte)
*   [http://cgit.freedesktop.org/xorg/lib/libXtst/](http://cgit.freedesktop.org/xorg/lib/libXtst/)

另外，请阅读 @nm 对您的问题的评论。

# jquery - jquery 与 on 切换

> ID：10353950
> 
> 赞同：-2
> 
> 时间：2012-04-27T15:58:38.977
> 
> 标签：jquery, click

我以为我在某个地方看到了你可以在 jQuery 中做这样的事情

```
$(".show").on("click", function(){
  alert('1st');
}, function() {
  alert('2nd');
}); 
```

第一次点击将调用第一次，第二次点击第二次，第三次返回第一次。我知道这个特定的示例不起作用，但是有没有类似的方法来切换 jQuery 中的单击行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:46:47.133

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.show').addClass('OddClick');

            $('.show').live('click', function () {
                var obj = $(this);

                if (obj.hasClass('OddClick') === true) {
                    obj.addClass('EvenClick').removeClass('OddClick');
                    alert('1st');
                }
                else {
                    obj.addClass('OddClick').removeClass('EvenClick');
                    alert('2nd');
                }
            });
        });
    </script>
</head>
<body>
    <div class="show" style="font-size: 25px; font-weight: bolder; cursor: pointer;">
        Hello World
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:15:51.980

您快到了。您可以使用jQuery中的[切换事件](http://api.jquery.com/toggle-event/)来实现此行为。它将导致每次连续单击循环通过您提供的回调。在您的情况下，您可以这样做：

```
$(".show").toggle(function(){ 
  alert('1st'); 
}, function() { 
  alert('2nd'); 
}); 
```

如果您愿意，可以提供任意数量的回调以循环使用

```
$(".show").toggle(function(){ 
  alert('1st'); 
}, function() { 
  alert('2nd'); 
}, function(){
  alert('3rd');
}); 
```

您可以在这个[jsFiddle 演示页面](http://jsfiddle.net/BqrN5/)上看到这一点。

# actionscript - 我已经开始使用 Stage3D。这些类中的哪些可用于 Stage3D？

> ID：10353951
> 
> 赞同：0
> 
> 时间：2012-04-27T15:58:42.460
> 
> 标签：actionscript, stage3d

Stage3D 是否支持这些类？或者是否存在等效或类似的类？

```
flash.display.BitmapData;
flash.display.GraphicsSolidFill;
flash.display.GraphicsStroke;
flash.display.GraphicsPath;
flash.display.IGraphicsData;
flash.display.Shape;
flash.filters.BlurFilter;
flash.geom.ColorTransform; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T19:08:30.083

Stage3D 是一个完全不同的、相当低级的野兽。你列出的那些类都与传统的 Flash DisplayList 有关，它是一个 CPU 驱动的渲染引擎，所以不，它们本身不存在。但除此之外还有很多：

如果您使用的是原始 Stage3D API（[此处的示例教程](http://www.plugin.io/2011/10/stage3d-tutorial-part-1/)），那么它感觉非常像 OpenGL 编程。您正在将顶点缓冲区、索引缓冲区和纹理加载到 GPU 中，并使用称为 AGAL 的汇编语言定义顶点和片段着色器程序。所有这些都为您提供了一个可能非常快的跨平台硬件加速应用程序，但它与传统的 Flash DisplayList 有很大不同。你能得到渐变、过滤器和矢量形状吗？当然，但可能使用自定义着色器等，而不是使用这些类。

在某些应用程序中，将传统的 DisplayList 用于 Stage3D 硬件加速背景之上的交互式 UI 控件是有意义的。DisplayList 位于 Stage3D 平面的顶部，因此这是完全可能的。

但是，如果您对这种低级 3D 编程不感兴趣，您可以选择在框架之上进行构建。有许多 Stage3D 框架——一些用于创建 3D 应用程序，另一些用于 2D（但使用底层 3D 加速来提高速度）。Adobe 在[此处](http://www.adobe.com/devnet/flashplayer/stage3d.edu.html)列出了这些框架。

例如，[Starling](http://gamua.com/starling/)是一个 Stage3D 框架，旨在模仿传统的 Flash DisplayList，因此它可以让您接近您上面提到的一些类 - 查看他们的[演示](http://gamua.com/starling/first-steps/#)和[API 文档](http://doc.starling-framework.org/core/)以了解详细信息。

Flash 启用的另一种技术是 blitting，它可以动态生成用于 3D 加速的位图。您可以将您喜欢的任何 Flash 显示对象（形状、绘制的渐变、带有过滤器等）绘制到位图（又名 blit）中，然后将这些位图推送到 3D 加速框架中。您可以单独对单个对象进行 blit，或使用此技术将整个舞台 blit 成一个全屏纹理。但是您必须小心将新纹理上传到 GPU 的频率和数量，因为这会显着影响性能。事实上，GPU 编程中一个重要的性能考虑因素是将多个位图批处理成单个纹理的能力。

因此，在考虑从传统的 DisplayList 过渡到 Stage3D 时，需要考虑许多方面。希望这可以帮助。:)

# oracle - 具有凭据的 Oracle 调度程序失败并关闭套接字

> ID：10353963
> 
> 赞同：0
> 
> 时间：2012-04-27T15:59:40.167
> 
> 标签：oracle, scheduler

我在 Oracle 11 上添加 shell 脚本作为计划作业时遇到问题，无论是否添加凭据。

没有证书我得到

```
ORA-27369: job of type EXECUTABLE failed with exit code: 274662
ORA-06512: at "SYS.DBMS_ISCHED", line 154
ORA-06512: at "SYS.DBMS_SCHEDULER", line 450
ORA-06512: at line 17
27369\. 00000 -  "job of type EXECUTABLE failed with exit code: %s"
*Cause:    A problem was encountered while running a job of type EXECUTABLE.
           The cause of the actual problem is identified by the exit code.
*Action:   Correct the cause of the exit code and reschedule the job. 
```

此错误显然与 externaljob.ora 文件不属于 root 或组可写有关。这两者都不是。

使用我得到的凭据

```
Error report:
No more data to read from socket 
```

这不是很有帮助。我在 Linux 上运行的 Oracle 版本是 11.1.0.6.0。我正在使用的示例脚本如下。我注释掉凭据以尝试该版本，凭据只是沼泽标准用户名和密码。

```
declare
namea varchar2(1000) := 'unix_command_job2';
BEGIN
DBMS_SCHEDULER.drop_job(namea, force=>true);
  -- UNIX
  DBMS_SCHEDULER.create_job(
    job_name             => namea,
    job_type             => 'EXECUTABLE',
    number_of_arguments  => 1,
    job_action           => '/bin/ls',
    auto_drop            => FALSE,
    enabled              => FALSE);

  DBMS_SCHEDULER.set_job_argument_value(namea,1,'/tmp');

  --DBMS_SCHEDULER.set_attribute(namea, 'credential_name', 'DCSCRED');
  DBMS_SCHEDULER.run_job(namea);
  DBMS_SCHEDULER.drop_job(namea);
END;
/ 
```

# sql - 如何从 Oracle 中的值列表中进行选择

> ID：10353969
> 
> 赞同：60
> 
> 时间：2012-04-27T15:59:57.197
> 
> 标签：sql, oracle, select, oracle11g

我指的是这个`stackoverflow`答案：

[如何从 SQL Server 中的值列表中进行选择](https://stackoverflow.com/questions/1564956/how-can-i-select-from-list-of-values-in-sql-server/7285095#7285095)

**在Oracle**中怎么能做类似的事情？

我已经在此页面上看到了其他使用的答案，`UNION`尽管这种方法在技术上有效，但在我的情况下，这不是我想要使用的。

所以我想保留或多或少看起来像逗号分隔的值列表的语法。

***关于`create type table` [答案](https://stackoverflow.com/questions/10353969/how-can-i-select-from-list-of-values-in-oracle/10354083#10354083)***的更新**：**

 **我有一张桌子：

```
CREATE TABLE BOOK
(   "BOOK_ID" NUMBER(38,0)
) 
```

我使用这个脚本，但它没有向`BOOK`表中插入任何行：

```
create type number_tab is table of number;

INSERT INTO BOOK (
    BOOK_ID
)
SELECT A.NOTEBOOK_ID FROM
    (select column_value AS NOTEBOOK_ID from table (number_tab(1,2,3,4,5,6))) A
; 
```

脚本输出：

```
TYPE number_tab compiled
Warning: execution completed with warning 
```

但是，如果我使用此脚本，它会向`BOOK`表中插入新行：

```
INSERT INTO BOOK (
    BOOK_ID
)
SELECT A.NOTEBOOK_ID FROM
    (SELECT (LEVEL-1)+1 AS NOTEBOOK_ID FROM DUAL CONNECT BY LEVEL<=6) A
; 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-27T17:43:14.097

您不需要创建任何存储类型，您可以评估 Oracle 的内置集合类型。

```
select distinct column_value from table(sys.odcinumberlist(1,1,2,3,3,4,4,5)) 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-04-27T16:35:31.923

如果您正在寻求转换以逗号分隔的值列表：

```
select column_value 
from table(sys.dbms_debug_vc2coll('One', 'Two', 'Three', 'Four'));

-- Or

select column_value 
from table(sys.dbms_debug_vc2coll(1,2,3,4)); 
```

如果您希望转换逗号分隔值的字符串，那么我会推荐 Justin Cave 的正则表达式 SQL 解决方案。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-27T16:09:07.387

有多种方法可以获取逗号分隔的列表并将其解析为多行数据。在 SQL 中

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select '1,2,3,a,b,c,d' str from dual
  3  )
  4   select regexp_substr(str,'[^,]+',1,level) element
  5     from x
  6* connect by level <= length(regexp_replace(str,'[^,]+')) + 1
SQL> /

ELEMENT
----------------------------------------------------
1
2
3
a
b
c
d

7 rows selected. 
```

或者在 PL/SQL 中

```
SQL> create type str_tbl is table of varchar2(100);
  2  /

Type created.

SQL> create or replace function parse_list( p_list in varchar2 )
  2    return str_tbl
  3    pipelined
  4  is
  5  begin
  6    for x in (select regexp_substr( p_list, '[^,]', 1, level ) element
  7                from dual
  8             connect by level <= length( regexp_replace( p_list, '[^,]+')) + 1)
  9    loop
 10      pipe row( x.element );
 11    end loop
 12    return;
 13  end;
 14
 15  /

Function created.

SQL> select *
  2    from table( parse_list( 'a,b,c,1,2,3,d,e,foo' ));

COLUMN_VALUE
--------------------------------------------------------------------------------
a
b
c
1
2
3
d
e
f

9 rows selected. 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-04-16T16:20:34.860

从Oracle 12.2 开始，您不需要该`TABLE`功能，您可以直接从内置集合中选择。

```
SQL> select * FROM sys.odcinumberlist(5,2,6,3,78);

COLUMN_VALUE
------------
           5
           2
           6
           3
          78

SQL> select * FROM sys.odcivarchar2list('A','B','C','D');

COLUMN_VALUE
------------
A
B
C
D 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-27T16:07:23.673

你可以这样做：

```
create type number_tab is table of number;

select * from table (number_tab(1,2,3,4,5,6)); 
```

该列由 Oracle 命名为 COLUMN_VALUE，因此也可以：

```
select column_value from table (number_tab(1,2,3,4,5,6)); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-04-28T06:30:25.433

嗨，带有 XML-Table 的字符串也是可能的

```
SELECT trim(COLUMN_VALUE) str FROM xmltable(('"'||REPLACE('a1, b2, a2, c1', ',', '","')||'"')); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-02T00:41:16.260

[已弃用] - 只是为了添加操作，您的第二个代码的问题似乎是您没有在那里定义您的“number_tab”类型。

作为 ：

```
CREATE type number_tab is table of number;

SELECT a.notebook_id FROM (
SELECT column_value AS notebook_id FROM table (number_tab(1,2,3,4,5,6) )  ) a; 

INSERT INTO BOOK (  BOOK_ID )
SELECT a.notebook_id FROM (
SELECT column_value AS notebook_id FROM table (number_tab(1,2,3,4,5,6) )  ) a;

DROP type number_tab ; 
```

抱歉，我无法重现您的错误，您能否将使用的 oracle 版本和最初用于该过程的相同代码发送给我们？这可能会有所帮助。祝一切顺利。**

# variables - vbscript，使用计数变量来识别其他变量

> ID：10353974
> 
> 赞同：1
> 
> 时间：2012-04-27T16:00:22.337
> 
> 标签：variables, loops, vbscript

我有变量 el1, el2,....el16 和 c1, c2,....c16 和 Counter 想在计数循环中使用

```
For Counter = 1 to 16
  If el1 = "x" Then
    el1 = 0
    c1 = 0
  Else
    c1 = 1
  End If
Next 
```

If 语句适用于已定义的变量。如何将“Counter”变量与循环中的“el”和“c”结合起来识别为 el1、c1、el2、c2、...el16、c16

## 这是脚本的最终版本。它在 Windows 7 版本的 ArcPad 中运行良好，但 If 语句在使用移动 vbscript 运行时库的移动设备上爆炸了。可变数组方法可能会更好，但我不太确定如何修补它。任何帮助将不胜感激。

```
Sub findelement
Dim el1, el2, el3, el4, el5, el6, el7, el8, el9, el10, el11, el12, el13, el14, el15, el16, scoreA, scoreB, calc

el1 = EDITFORM.Pages.Item("page4").Controls.Item("element1")
el2 = EDITFORM.Pages.Item("page4").Controls.Item("element2")
el3 = EDITFORM.Pages.Item("page4").Controls.Item("element3")
el4 = EDITFORM.Pages.Item("page4").Controls.Item("element4")
el5 = EDITFORM.Pages.Item("page4").Controls.Item("element5")
el6 = EDITFORM.Pages.Item("page4").Controls.Item("element6")
el7 = EDITFORM.Pages.Item("page4").Controls.Item("element7")
el8 = EDITFORM.Pages.Item("page4").Controls.Item("element8")
el9 = EDITFORM.Pages.Item("page5").Controls.Item("element9")
el10 = EDITFORM.Pages.Item("page5").Controls.Item("element10")
el11 = EDITFORM.Pages.Item("page5").Controls.Item("element11")
el12 = EDITFORM.Pages.Item("page5").Controls.Item("element12")
el13 = EDITFORM.Pages.Item("page5").Controls.Item("element13")
el14 = EDITFORM.Pages.Item("page5").Controls.Item("element14")
el15 = EDITFORM.Pages.Item("page5").Controls.Item("element15")
el16 = EDITFORM.Pages.Item("page5").Controls.Item("element16")

Dim c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, Counter

For Counter = 1 to 16

If "x" = eval ("el" & Counter) Then
    execute "el" & Counter & " = 0"
    execute "c" & Counter & " = 0"
Else 
    execute "c" & Counter & " = 1"
End If
Next

'do math
scoreA = CInt(el1) + CInt(el2) + CInt(el3) + CInt(el4) + CInt(el5) + CInt(el6) + CInt(el7) + CInt(el8) + CInt(e9) + CInt(el10) + CInt(el11) + CInt(el12) + CInt(el13) + CInt(el14) + CInt(el15) + CInt(el16)
scoreB = CInt(c1) + CInt(c2) + CInt(c3) + CInt(c4) + CInt(c5) + CInt(c6) + CInt(c7) + CInt(c8) + CInt(c9) + CInt(c10) + CInt(c11) + CInt(c12) + CInt(c13) + CInt(c14) + CInt(c15) + CInt(c16)
calc = CDbl(scoreA) / CDbl(scoreB)
'vbscript assumes these are strings and appends them, to get the sum like you want cast them to a double (CDbl) or integer (CInt)
'MsgBox (scoreA)
'MsgBox (scoreB)
'MsgBox (calc)

'Return calculated data to form.....
EDITFORM.Pages("Results").Controls("sumEl").Value = (scoreA)
EDITFORM.Pages("Results").Controls("scoreB").Value = (scoreB)
EDITFORM.Pages("Results").Controls("calc").Value = (calc)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:17:34.980

您可以使用[`Execute`](http://msdn.microsoft.com/en-us/library/03t418d2%28v=vs.84%29.aspx),[`ExecuteGlobal`](http://msdn.microsoft.com/en-us/library/342311f1%28v=vs.84%29.aspx)和[`Eval`](http://msdn.microsoft.com/en-us/library/0z5x4094%28v=vs.84%29.aspx)动态形成要执行的表达式的变量名：

```
Execute "el" & Counter & " = 42" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:34:00.960

一般来说，Eval/Execute/ExecuteGlobal 是危险的、低效的和不必要的。有例外（例如库/模块导入，基于用户输入的（快速和肮脏的）计算），但我怀疑如果没有这样的 Voodoo，你的（真正的）问题就无法解决。

相比：

```
 Dim el1, el2, el3
  el1 = "a"
  el2 = "x"
  el3 = "b"
  WScript.Echo "el:", el1, el2, el3
  Dim c1, c2, c3
  Dim i
  For i = 1 to 3
      If "x" = Eval("el" & i) Then
         Execute "el" & i & " = 0"
         Execute "c" & i & " = 0"
      Else
         Execute "c" & i & " = 1"
      End If
  Next
  WScript.Echo "el:", el1, el2, el3
  WScript.Echo " c:", c1, c2, c3

  output:
    el: a x b
    el: a 0 b
     c: 1 0 1 
```

（从海伦那里偷来的想法）

和：

```
 Dim sEL  : sEL      = "a x b"
  Dim oWAN : Set oWAN = WScript.Arguments.Named
  If oWAN.Exists("el") Then sEL = oWAN("el")

  Dim aEL : aEL = Split(sEL)
  WScript.Echo "aEL:", Join(aEL)
  ReDim aC(UBound(aEL))
  Dim i
  For i = 0 to UBound(aEL)
      If "x" = aEL(i) Then
         aEL(i) = 0
         aC(i)  = 0
      Else
         aC(i)  = 1
      End If
  Next
  WScript.Echo "aEL:", Join(aEL)
  WScript.Echo " aC:", Join(aC)

  output (no arg):
    aEL: a x b
    aEL: a 0 b
     aC: 1 0 1

  output (arg: /el:"a a a x b x x c x"):
    aEL: a a a x b x x c x
    aEL: a a a 0 b 0 0 c 0
     aC: 1 1 1 0 1 0 0 1 0 
```

我认为，您会同意使用集合/数组为您提供与 eval/execute 方法一样多的灵活性。

# spring - Spring，XML bean 在应用程序启动时调用 Annotation bean

> ID：10353979
> 
> 赞同：0
> 
> 时间：2012-04-27T16:00:41.143
> 
> 标签：spring, annotations

我有一个带有一些方法的注释 bean。它工作正常。

```
public @Controller("adminController") class AdminController {

...
private @Autowired AdminDAO adminDAO;

public void resetTemporalList() {

    System.out.println("HE SIDO EJECUTADO.");

    this.adminDAO.resetTemporalRegisters();
} 
```

...

}

现在，我正在集成一项石英任务。但是我用调用 previus 注释 bean 的 XML 定义 bean 加载它。

```
<bean id="resetTemporalRegisters" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="adminController" />
    <property name="targetMethod" value="resetTemporalList" />
    <property name="concurrent" value="false" />
</bean> 
```

当我启动我的应用程序时出现下一个错误。

***引起：org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“adminController”的bean***

我相信问题是Spring首先加载XML bean，在Annotation bean之后，然后在这一刻“adminController”bean不退出......

我该如何解决？

**解决了！！**

问题在于我将 xml bean 定义放在 applicationContext.xml 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:07:26.380

有点猜测：您的控制器是在 Spring MVC 创建的子应用程序上下文中定义的，而您`resetTemporalRegisters`在主应用程序上下文（父级）中工作。子上下文可以从父上下文访问 bean，但反之则不行。

这提出了一个重要的问题：为什么您的业务逻辑试图调用控制器的方法？这些方法应该只被 MVC 框架调用。你不能打电话吗

```
this.adminDAO.resetTemporalRegisters(); 
```

直接来自你的工作？

```
<bean id="resetTemporalRegisters" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
  <property name="targetObject" ref="adminDAO" />
  <property name="targetMethod" value="resetTemporalRegisters" />
  <property name="concurrent" value="false" />
</bean> 
```

`adminDAO`可能在父上下文中定义，因此您可以轻松访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:05:39.633

不，XML 和注释集成得很好，但是您的 XML 中真的有组件扫描代码吗？

```
<context:component-scan base-package="com.yourcompany.yourapp"/> 
```

请参阅：[4.10 类路径扫描和托管组件](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-classpath-scanning)

# trigger.io - 使用新的构建工具版本时出错：3.3.0

> ID：10353980
> 
> 赞同：1
> 
> 时间：2012-04-27T16:00:44.747
> 
> 标签：trigger.io, forge

系统提示我下载新的 forge tools 版本，然后我从[https://trigger.io/forge/upgrade/](https://trigger.io/forge/upgrade/)成功下载了 3.3.0 版本。

接下来我运行“source go.sh”

之后，我运行“forge build”，我收到以下消息：

```
(forge-environment) forge build
[   INFO] Forge tools running at version 3.3.0
[   INFO] Update result: you already have the latest tools
[   INFO] Your app configuration has changed: we need to rebuild your app
[   INFO] Starting new build
[  ERROR] Forge API call to app/5164f58e8cfb11e1931112313d1adcbe/template went wrong: 
The platform version requested is incompatible with the version of the build tools you 
are using.

Requested Forge platform version: v1.2
Your current build tools version: 3.3.0

Update your build tools from: https://trigger.io/forge/upgrade/ 
```

我应该做额外的设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:10:14.610

v1.2 Trigger.io 平台暂时与最新的构建工具不兼容：我们修复了该问题并推出了更新。

如果你再次尝试跑步`forge build`，你应该很高兴。

# javascript - Ajax 调用后执行不显眼的 Javascript

> ID：10353982
> 
> 赞同：0
> 
> 时间：2012-04-27T16:00:52.937
> 
> 标签：javascript, jquery, unobtrusive-javascript

我想使用[John Resig 的](http://ejohn.org/blog/javascript-pretty-date/)漂亮日期来用一些易于阅读的时间规范替换我丑陋的时间戳。所以我考虑使用以下不显眼的 html 标记：

```
 <span data-type="prettyDate">25.04.2012 10:16:37</span> 
```

据此，我使用以下 Javascript/jQuery 来美化日期：

```
 $(function() {
    $('[data-type="prettyDate"]').prettyDate();
 } 
```

我的问题是我不知道如何处理使用 ajax 加载的标记，因为当 DOM 就绪事件触发时它还不存在，因此不会被捕获。[使用on 处理程序](http://api.jquery.com/on/)对“ajaxed”元素上的事件做出反应非常容易。但这不是一个事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:04:29.230

您必须在将`.prettyDate()`每个 Ajax 响应添加到 DOM 后调用。一个简单的方法是设置一个全局`complete`处理程序[`ajaxComplete`](http://api.jquery.com/ajaxComplete/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:04:17.663

您可以在动态内容实际插入文档之前使用 jQuery 来定位动态内容，例如：

```
success: function(html) {
   var $html = $(html);
   $html.find('[data-type="prettyDate"]').prettyDate();
   $(somewhere in document).append($html);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:07:18.893

为了获得最佳性能，您想要做的是拥有一个函数，该函数在数据从 ajax 回调返回时被调用。这样你就可以在将它们添加到 DOM 之前美化你的日期。

您不想每次都在 DOM 中的元素上调用漂亮的日期，因为您也会处理已经完成的日期。

所以，像这样的东西。

```
$.ajax({
  url:'someurl',
  success: function(data) {
    var $content = $(data).find('[data-type="prettyDate"]').prettyDate();
    $('#mycontainer').append($content);
  }
}); 
```

或者有一个你调用的辅助函数

```
function prettify(data) {
    return $(data).find('[data-type="prettyDate"]').prettyDate();
} 
```

甚至更好地挂钩到 ajax 调用，以便为所有 html 内容完成

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T16:10:47.557

在许多情况下，我需要在每次 AJAX 调用后执行某些代码。我不确定它是否被认为是“正确”的解决方案，但我只是决定创建自己的包装方法并在需要发出 AJAX 请求时使用它。它通常看起来像这样：

```
AJAXLoadData: function (url, data, successCallBack) {
    $.ajax({
        type: "GET",
        data: data,
        url: url,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            // Code I want to execute with every AJAX call
            // goes here.

            // Then trigger the callback function.
            if (successCallBack) successCallBack(msg);
        },
        error: function (msg) {
            alert("Server error.");
        }
    });
} 
```

就我而言，这使得为静态 HTML 文件创建 javascript 缓存系统变得特别方便。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T16:03:35.037

您可以将此代码合并到您的 ajax 成功回调函数中。完成 ajax 并更新页面后，还要运行代码来美化日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T16:05:29.000

这是其中的一[`.on()`件事](http://api.jquery.com/on/)。（在过去，[`.live()`会被使用](http://api.jquery.com/live/)。）

# java - 对 SWT/JFace 动画的任何好的建议

> ID：10353983
> 
> 赞同：0
> 
> 时间：2012-04-27T16:00:57.057
> 
> 标签：java, flash, swt, jface

我正在使用我不太熟悉的 java + SWT/JFace 开发桌面应用程序。程序需要显示一些图片来展示程序的进度，就像这样。![动图](../Images/1e3a5d7473807aa30b771bba9f664de5.png)

对不起我的英语不好，我不确定是否适合使用“移动”这个词，实际上我的意思是当事件发生时，图表正在像Flash一样变化。我正在考虑制作一些 Flash 电影来播放，但这似乎很困难，因为我需要添加第三方 jar，而且我不擅长 Flash。有没有更好的方法来做这样的工作？我需要你的建议。

谢谢你，如果我犯了一些困扰你的英语错误，再次为我糟糕的英语感到抱歉:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:12:04.103

可能您需要在窗口中嵌入 gif。java无法播放任何动画，除非您有系列图片并很快将它们一张一张播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:29:29.250

您可以使用 java2d 和 awt-swt 桥，或者有一个名为[Timing Framework](http://java.net/projects/timingframework)的框架，它适用于 swt 和 swing。

# xml - 在 XSL 中选择和转换子元素属性字符串值

> ID：10353986
> 
> 赞同：0
> 
> 时间：2012-04-27T16:01:09.900
> 
> 标签：xml, xslt, xpath, wix, xslt-1.0

*   *如何提取`File -> Source`价值*
*   *并将其分配为`RegistryValue -> Name`，`RegistryValue`作为提供 XSLT 的新元素注入到哪里？*

### 源 XML

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="WixSlave.Binaries">
            <Component Id="cmpA1D1BF677641BE2AE700859D8256B0FC" Guid="{B0BF9CBD-8A5D-43C1-B9DE-0A1B5A6BD1DE}">
                <File Id="filC2827DDF7874712A62423151FBE8CE34" Source="$(var.WixSlave.TargetDir)\WixSlave.exe" />
            </Component>
            <Component Id="cmpBC6AB890535757A915C99A10445CC74E" Guid="{8726FF82-808A-4736-AD0A-C804A34E494B}">
                <File Id="fil7BD5BE5CD71AC92FF47D1D51A99FEE05" Source="$(var.WixSlave.TargetDir)\WixSlave.exe.config" />
            </Component>
        </DirectoryRef>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="WixSlave.Binaries">
            <ComponentRef Id="cmpA1D1BF677641BE2AE700859D8256B0FC" />
            <ComponentRef Id="cmpBC6AB890535757A915C99A10445CC74E" />
        </ComponentGroup>
    </Fragment>
</Wix> 
```

### XSLT 在没有变量名称属性值的情况下工作

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:wix="http://schemas.microsoft.com/wix/2006/wi" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <!-- Copy all attributes and elements to the output. -->
    <xsl:template match="@*|*">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates select="*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="wix:Wix/wix:Fragment/wix:DirectoryRef/wix:Component">
        <Component>
            <xsl:apply-templates select="@*|*"/>
            <RegistryValue Name="toBeVariableKey" Root="HKCU" Key="Software\[Manufacturer]\[ProductName]" Type="integer" Value="1" KeyPath="yes"/>
        </Component>
    </xsl:template>
</xsl:stylesheet> 
```

*   更具体地说，我想阅读`File`元素属性`Source="$(var.WixSlave.TargetDir)\WixSlave.exe"`，然后将其转换为仅从`WixSlaveexe` **源字符串中提取字母（az，AZ），从最后一个斜杠之后开始**
*   然后将该字符串分配给`RegistryValue`元素`Name`属性，在示例中是`Name="toBeVariableKey"`，但应该成为`Name="WixSlaveexe"`第一个`Component`

*   对于第二个`Component`，它应该读取`File` `Source="$(var.WixSlave.TargetDir)\WixSlave.exe.config"`并添加`RegistryValue`with `Name="WixSlaveexeconfig"`，依此类推......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:18:20.813

您可以使用属性值模板来设置**名称**

```
<RegistryValue Name="{substring-after(wix:File/@Source, '\')}" /> 
```

这应该在第一个斜杠之后提取子字符串，并将结果分配给属性**name**。

要从文本中删除任何点，您可以使用**翻译**功能，如下所示

```
<RegistryValue Name="{translate(substring-after(wix:File/@Source, '\'), '.', '')}" /> 
```

# objective-c - 将 NSMutableArray 重新初始化为 NSMutableArray

> ID：10353989
> 
> 赞同：0
> 
> 时间：2012-04-27T16:01:27.343
> 
> 标签：objective-c, ios

在 NSMutableArray 上调用 removeObjectAtIndex 时，我的应用程序抛出异常时遇到问题，说 myLocationsArray 被声明为不可变的。该数组上的所有其他操作都很好，它肯定是正确声明的等等，但是在我的应用程序的某个地方它被设置为不可变的。在调查了一段时间试图找到它被设置为不可变的位置之后，我决定搞砸它并重新声明变量：

```
myLocationsArray = [[NSMutableArray alloc] initWithArray:[defaults
objectForKey:MYLOCATIONSARRAY_KEY]]; 
```

在 removeObjectAtIndex 调用之前。

但是我知道这一定是错误的，我在同一个变量上调用了 alloc/init 两次。然而，这是唯一有效的方法。有没有办法提醒这个变量它是一个 NSMutableArray 而不会像我一样引入内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:10:11.910

我建议在程序抛出异常的行（包含`removeObjectAtIndex`）的行上设置一个断点，并使用调试器检查数组的真实类型。如果您将鼠标悬停在数组名称上，将显示一个弹出菜单，为您提供有关指向对象所需的所有信息。

我期望你通过这种方式发现对象是一个 NSArray（与 NSMutableArray），然后追溯到你最初初始化它的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:29:21.043

看起来你正在使用`NSUserDefaults`. 您从中取出的所有对象`NSUserDefaults`始终是不可变的，无论您在其中存储了什么。`NSUserDefaults`不会保留对您设置的特定对象的引用，它会保留*data*。它实际上是在制作副本。当您`NSUserDefaults`从 .

毫不奇怪，您无法`NSUserDefaults`通过改变您（认为您）存储在其中的内容来更改存储的内容。您只能通过重新存储某些内容来替换以前存储的内容来更改存储的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T23:35:15.413

`NSUserDefaults`返回数组的不可变副本。不管你是放`NSArray`还是`NSMutableArray`在里面，它总是给你不可变的副本。

所以，这样做是为了得到一个你可以使用的可变副本

```
myLocationsArray = [[NSMutableArray alloc] initWithArray:[[[defaults objectForKey:MYLOCATIONSARRAY_KEY] mutableCopy] autorelease]]; 
```

或者只是这个

```
myLocationsArray = [[defaults objectForKey:MYLOCATIONSARRAY_KEY] mutableCopy]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T16:08:23.423

声明应该无关紧要；您的错误是运行时错误。听起来您的`myLocationsArray`变量已被分配了一个不可变数组（NSArray），尽管从您的代码片段中无法判断它是在某处重新分配还是始终是不可变的。

# crc - 反向消息CRC计算

> ID：10353990
> 
> 赞同：3
> 
> 时间：2012-04-27T16:01:28.133
> 
> 标签：crc, crc32, crc64

假设您有此消息`(ab,cd,ef)`并且您有 ROHC (Robust header compression) CRC8 polynomial `e0`。

```
C(x) = x^0 + x^1 + x^2 + x^8 
```

有什么方法可以从最后一个字节开始向后计算消息的 CRC，并获得与在原始消息上计算相同的结果？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T15:21:59.407

不，这对于您的多项式 (100000111) 通常是不可能的。

```
EG: 110100111/100000111 = 011010011
but: 111001011/xxxxxxxxx != 011010011 (in general) 
```

但是，如果您事先知道 CRC，您仍然可以检查消息的有效性。

```
EG: 110100111/100000111 = 01101001
    => message transmitted = 11010011 01101001
    => message received (reversed) = 10010110 11001011

then: 10010110 11001011/111000001 == 0
(where: 111000001 = reversed(100000111))

=> crc(reversed(11001011)) = crc(11010011) == reversed(10010110) = 01101001 
```

请注意，仅当消息按 BITEWISE 反转时才适用。

```
IE: reversed(ABC) = reversed(101010111100) = 001111010101
= 3D5 = reversed(ABC) != CBA = 110010111010 != reversed(101010111100) 
```

所以在实现你的算法时要小心;-)

# android - Android 多个 APK 使用相同的代码库给用户带来不便

> ID：10353992
> 
> 赞同：0
> 
> 时间：2012-04-27T16:01:45.843
> 
> 标签：android, apk

我有一个库项目，其中包含我的应用程序的代码库。我有一个演示和一个完整版本，其中包括包含所有活动等的这个库。大多数玩家从演示开始，如果他们喜欢它，他们会获取完整版本。但是，他们通常不会立即卸载演示，而是继续将它们同时安装在他们的设备上。这似乎会导致一个弹出窗口，询问哪个应用程序（演示或完整）通过活动打开每个活动作为播放器电影。

有什么方法可以防止这种情况发生，还是设备上同时拥有两个 APK 的不可避免的副作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:20:32.577

您需要在演示版和完整版之间定义不同的包。即使您的清单定义了不同的包（这是必需的，因为您不能在 Google Play 上有两个应用程序具有相同的包），我假设您调用的活动也存在于您的库项目中，这将使用两个版本的应用程序的库包。

要解决此问题，您还应该在子项目的库中声明清单中的每个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:05:39.853

以下是我如何通过检测两个游戏的存在来“解决”问题，然后提示卸载演示版，如果有人对未来感兴趣的话：

```
public class UpdateManager {

    public static void checkForBothVersions(final Activity activity) {

        PackageManager packageManager = activity.getPackageManager();

        //# We want to intentionally cause an Exception. This will let us know
        //# whether there is only one version installed.
        try {
            packageManager.getPackageInfo("package.full", 0);
            packageManager.getPackageInfo("package.demo", 0);

            //# If we get here, then both are installed. Let's display our warning.
            Builder builder = new AlertDialog.Builder(activity);
            builder.setTitle("Warning!");
            builder.setMessage("" +
                    "We've detected that you have both the FULL and DEMO versions of Application installed.\n" +
                    "This can cause undesired results. We suggest uninstalling the DEMO version of Application." +
                    "")
            .setCancelable(false)
            .setPositiveButton("Uninstall DEMO", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {

                    Uri uri = Uri.parse("package:package.demo");
                    //# Start the delete intent for the demo
                    activity.startActivity( new Intent(Intent.ACTION_DELETE, uri) );
                    //# We don't wanna call finish here. We want the delete Intent to open
                    //# and once the user closes that Intent, it should go back to the
                    //# calling RB Activity and call onResume where the check cycle will
                    //# restart.
                }
            })
            .setNegativeButton("Continue", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    activity.startActivity(new Intent("package.lib.SplashActivity"));
                    activity.finish();
                }
            });
            AlertDialog alert = builder.create();
            alert.show();
        }catch( Exception e ) {
            Log.i("UpdateManager", "Only one version of Application installed.");
            activity.startActivity(new Intent("package.lib.SplashActivity"));
            activity.finish();
        }       
    }   
} 
```

我只是从演示和完整应用程序的 onResume 方法中调用此方法。

# ios - 通过 rtmp 在 iOS 上流式传输

> ID：10353994
> 
> 赞同：0
> 
> 时间：2012-04-27T16:01:51.087
> 
> 标签：ios, streaming, video-streaming, rtmp

我正在拼命寻找从 iOS 上的 red5 服务器通过 rtmp 流式传输的解决方案。而且我无法在我的 Xcode 项目上运行 rtmp c lib。任何人都可以发布任何教程吗？或者分享一些其他的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:57:22.370

这是我到目前为止发现的。非常有用的 obj-c 库，但要花费 smt。- [http://www.themidnightcoders.com/products/weborb-for-mobile/universal-mobile-connectivity-overview.html](http://www.themidnightcoders.com/products/weborb-for-mobile/universal-mobile-connectivity-overview.html) - [http://www.aftek.com/afteklab/aftek-iphone-RTMP-library.shtml](http://www.aftek.com/afteklab/aftek-iphone-RTMP-library.shtml)

然后，我尝试实现 librtmp c lib。但这需要很长时间。-http://rtmpdump.mplayerhq.hu/librtmp.3.html

因此，我们最终决定通过 Web 套接字进行通信并通过 http 进行流式传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T08:01:13.813

这个对我有用

[Brightcove 播放器 iOS SDK](http://docs.brightcove.com/en/video-cloud/mobile-sdks/brightcove-player-sdk-for-ios/index.html)

# ruby-on-rails - 使用 Rails 和 Bootstrap 填充侧边栏实现

> ID：10353998
> 
> 赞同：0
> 
> 时间：2012-04-27T16:02:14.320
> 
> 标签：ruby-on-rails, twitter-bootstrap

对于我正在尝试开发的 webapp，这主要是一个实现问题。我相对缺乏经验，所以我想检查一下我的实施想法是否不错，或者是否有更简单的方法。

### 问题

我想创建一个可滚动的侧边栏，自动填充包含用户个人资料照片及其姓名的小容器。基本思想是用户是一个班级的成员，侧边栏应该包含他们所有的同学。侧边栏应该是固定大小的，用户应该能够向下滚动浏览他们的同学，如果他们想访问他们的页面，可以点击用户。

### 我的实施想法

在我看来，我需要使用一些嵌入式红宝石来指导填充过程。一些伪代码类似于“对于此类中的每个用户，使用他们的图片和名称创建一个容器”。对于实际处理这一步，我没有考虑太多，但我主要关心的是实际的 html 结构。

我的想法是做这样的事情：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span2">
            <!-- for each user in class -->
                <div class="container-fluid">
                    <div class="row-fluid">
                        <div class="span">
                            <!-- Load appropriate user data -->
</div> where appropriate... 
```

这是实现这一点的“正确”方式吗？我无法找到关于这个想法的太多信息，并且访问示例站点的源代码并没有那么有用，因为侧边栏已经填满了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:30:56.137

我会将您的侧边栏 HTML 和逻辑分成一个部分，例如“app/views/shared/_sidebar.html.erb”。从那里开始，您可以接受来自您正在呈现的任何视图的数据集合。

### 查看文件

```
<div class="container-fluid">
  <div class="row-fluid">
    <%= render "shared/sidebar", collection: @users %>
  </div>
</div> 
```

### 侧边栏部分

```
<div class="span2">
  .....
    <% @users.classmates.each do |e| %>
      <%= e.name %>
    <% end %>
  .....
</div> 
```