# StackOverflow 问答 10312000-10312999

# java - 在java中将构造函数重构为setter

> ID：10312002
> 
> 赞同：0
> 
> 时间：2012-04-25T08:27:09.157
> 
> 标签：java, eclipse, refactoring

我使用“引入参数”重构了我的方法，因为它接受了很多变量。但现在所有的调用者都有内联的 cosntructor 作为

```
this.somemethod(new MyParam("a", "b","c","d"); 
```

我想通过用 setter 替换构造函数来重构它

```
MyParam myParam= new MyParam();
myParam.setA("a");........
.
.
this.somemethod(myParam); 
```

有没有办法做到这一点？

在 Eclipse [https://bugs.eclipse.org/bugs/show_bug.cgi?id=105324上报告了一个类似的错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=105324)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:33:14.800

> 有没有办法做到这一点？

是的，具有返回的类似 setter 的函数，`this`因此您可以将它们链接起来：

```
public class MyParam {
    private String foo;
    private int bar;
    // ...and so on...

    public MyParam() {
        // Set reasonable defaults here
    }

    public MyParam letFoo(String foo) {
        this.foo = foo;
        return this;
    }

    public MyParam letBar(int bar) {
        this.bar = bar;
        return this;
    }

    // ...and so on...
} 
```

用法：

```
someFunction(new MyParam()
             .letFoo("foo")
             .letBar(42)
             .letXyz(...)
             // ...and so on...
); 
```

这在以下情况下特别有用 A) 几个“参数”有合理的默认值，因此调用者不一定必须使用所有的设置器，并且 B) 有很多参数，所以很容易按顺序迷失事物。

我使用`letXyz`了而不是`setXyz`因为正如 Sean 在评论中指出的那样，`setXyz`使用 JavaBean 命名约定，但 JavaBean 设置器不应该有返回值。（有关更多信息，请参阅[此处有关 SO](https://stackoverflow.com/q/5741369/157247)及其答案的其他问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:31:28.487

你为什么要做这种丑陋的事情？

你为什么不做类似的事情

```
public void sometMethod(Object.. parameters) 
```

你可以像这样访问它

```
this.someMethod("a", "b", "c", "d", "e", "f"); //:)
//or
this.someMethod("a"); 
```

并回答你的解决方案......你可以......使用反射......

您可以使用反射动态访问您的方法...[链接在这里](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:09:04.077

如果我理解正确，您希望自动从当前构造函数获取无参数构造函数，并随后调用设置器。我将通过将 setter 调用放入当前构造函数中来做到这一点，确保它们都是`public`，然后在构造函数上运行内联方法重构。啊，但 Eclipse 不会让你这样做。所以你可以写：

```
public static A newA(int a, int b) {
    A aa = new A();
    aa.setA(a);
    aa.setB(b);
    return aa;
} 
```

（当然你也必须编写空构造函数）然后手动替换所有

```
a = new A(3,2); 
```

和

```
a = A.newA(3,2); 
```

然后您可以内联该*方法*`newA()`。几乎不值得费心，我想。但我不知道更自动化的方式。

# iphone - CLLocationManager

> ID：10312006
> 
> 赞同：0
> 
> 时间：2012-04-25T08:27:26.567
> 
> 标签：iphone, ios, core-location, cllocationmanager

我有两个位置管理器，一个在带有地图的视图控制器上，另一个在我作为模态显示的单独控制器中。问题是每次我展示那个模态控制器时，我都会因为以下回溯而崩溃。

我尝试将代表设置为零，或在 viewWillDisappear 上将实际位置管理器设置为零，然后在 viewWillAppear 上重新初始化它们，但问题仍然存在。任何帮助将不胜感激。

```
#0  0x9105fafa in mach_msg_trap ()
#1  0x91060267 in mach_msg ()
#2  0x016d313a in __CFRunLoopServiceMachPort ()
#3  0x01636580 in __CFRunLoopRun ()
#4  0x01635db4 in CFRunLoopRunSpecific ()
#5  0x01635ccb in CFRunLoopRunInMode ()
#6  0x026a6879 in GSEventRunModal ()
#7  0x026a693e in GSEventRun ()
#8  0x003e1a9b in UIApplicationMain ()
#9  0x000028b2 in main (argc=1, argv=0xbfffeca4) at /Users/penushlievm/Desktop/DailyPlanner 2/DailyPlanner 2/main.m:16
#10 0x00002825 in start () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:15:10.937

尝试在全球范围内使用一个位置管理器而不是两个。

# c# - wpf 未处理的异常

> ID：10312009
> 
> 赞同：2
> 
> 时间：2012-04-25T08:27:32.250
> 
> 标签：c#, wpf, unhandled-exception

在我的 WPF 应用程序中，一些用户收到“应用程序生成了无法处理的异常”错误。我已经实现了[Application.DispatcherUnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)事件处理程序，但该事件不处理异常。是否有可能在应用程序外部发生异常导致关闭我的应用程序，也许是内存问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T08:31:10.720

除了 DispatcherUnhandledException 之外，您可以尝试的一件事是侦听来自 AppDomain 的异常

```
AppDomain.CurrentDomain.UnhandledException += 
        new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

理论上，这应该捕获与您的应用程序相关的所有异常，而不仅仅是在 Dispatcher 中运行的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:32:06.170

您是否尝试将此也添加到您的应用程序启动中？：

```
AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:16:45.270

如果您的处理程序被调用但异常仍未处理，则有必要处理该事件：`e.Handled=true;`请参阅：[如何在 wpf 中抑制 UI 异常？](https://stackoverflow.com/questions/10084196/how-to-suppress-ui-exceptions-in-wpf/10085553)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:42:23.837

根据我的经验，如果只有一些用户收到错误（并且这些用户一直收到错误），那么项目文件很可能引用了 dll 而没有将“CopyToLocal”属性设置为 true - 因此假设所有用户都有 dll安装在 GAC 中 - 对于某些用户而言可能并非如此。

# ios - TestFlight 中的最大测试人员数

> ID：10312010
> 
> 赞同：5
> 
> 时间：2012-04-25T08:27:35.593
> 
> 标签：ios, testflight

我可以添加到[TestFlight](https://testflightapp.com)帐户的最大测试人员数量是多少？有什么限制吗？我已经创建并构建了 iPhone 应用程序并上传到 TestFlight。然后我添加了一个测试器。他可以下载并安装它。由于我使用的是免费试飞帐户，我想知道它的局限性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T11:12:13.340

**注意**：*他的答案适用于旧的 testflightapp.com 服务。由于 Apple 拥有 TestFlight，规则发生了变化。*

* * *

Apple 限制您只能拥有 100 台 Ad Hoc 设备。这是每年的限制。如果您添加一个设备，然后将其删除，它不会让您添加另一个设备。

因此，即使 TestFlight 允许您添加 100 多个设备，您仍然无法在它们上安装 Ad Hoc 预置应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T03:38:22.677

邀请 TestFlight Beta 测试人员

内部测试人员

通过与最多 25 位团队中已在 iTunes Connect 中分配了技术或管理员角色的成员共享您的 beta 版本，快速获得反馈。每个成员最多可以在 10 台设备上进行测试。

外部测试人员

准备就绪后，您最多可以邀请 1,000 名不属于您的开发组织的用户对您打算在 App Store 上公开发布的应用进行 Beta 测试。向外部测试人员提供的应用程序需要经过 Beta 版应用程序审查，并且必须在开始测试之前遵守完整的 App Store 审查指南。包含重大更改的应用程序的新版本需要进行审核。一次最多可以在内部或外部测试 10 个应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T20:01:01.570

我相信限制取决于您注册的 iOS 程序。

100 台设备的限制适用于 iOS 开发人员计划。

如果您注册了 iOS Developer Enterprise 计划并分发您的企业签名应用程序，则没有限制。

[请参阅TestFlight 常见问题](http://help.testflightapp.com/customer/portal/articles/402851-testflight-faq)中的“团队成员限制”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-13T08:22:53.483

截至 2015 年 11 月 13 日，Apple 进行了更新：

> 为了让您的 TestFlight 体验更加出色，我们进行了一些重大更改。现在，每个应用最多可以邀请 2000 名外部测试人员和 25 名内部测试人员。您还可以在 60 天内同时测试多达 100 个应用程序，并每天向外部测试人员提交多达 6 个更新。

# python - python 绘图点

> ID：10312013
> 
> 赞同：0
> 
> 时间：2012-04-25T08:27:44.783
> 
> 标签：python, plot, matplotlib

使用 pylab 我正在绘制一组像这样的点：

```
plt.plt(row[1], row[2]); 
```

它正确地在这些点之间绘制了一条线，但是除了这条线之外，我还想绘制实际的点。所以点和线，得到点：

```
plt.plt(row[1], row[2], "bo"); 
```

如何在情节中结合这两者？有简单的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:36:21.723

我相信 pylab 依赖于 matplotlib。如果是这种情况，那么这样的事情应该可以工作。

```
plt.plt(row[1], row[2], 'b-', marker='o'); 
```

[请参阅文档中](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.plot)有关*kwargs* 的部分。

# macos - Jenkins osx“无法运行程序”

> ID：10312015
> 
> 赞同：4
> 
> 时间：2012-04-25T08:27:48.383
> 
> 标签：macos, jenkins

我在我的 Snow Leopard 笔记本电脑上安装了 Jenkins。我将用户“jenkins”分配给它的主目录等。接下来，我基本上遵循[了这个教程](http://jenkins-php.org/)。

现在，当我运行构建时，出现错误：

> /Users/Shared/Jenkins/Home/jobs/projectname/workspace/build.xml:78：执行失败：java.io.IOException：无法运行程序“phpmd”：错误=2，没有这样的文件或目录

此外，他对 phploc 等给出了相同的错误。

当我在命令行上运行 phpmd 时，一切都很好。此外，当我使用“su jenkins”作为用户 jenkins 登录并尝试在命令行上运行命令时，一切都很好。

我相信问题是詹金斯找不到命令。可能是因为它不在`/usr/bin dir`？我添加了一个`.bash_profile`带有导出路径的文件`/usr/local/bin`，但即使这样也没有什么区别。那么，有谁知道具体是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:34:12.953

您可以在从站页面的“系统信息”下看到环境变量（包括PATH）。您可以在从属配置页面上调整这些变量以及设置工具位置。要访问这些页面，请单击主页上的从站名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:03:54.047

我尝试如上所述设置PATH环境变量，即“管理节点”->“[节点]”->“配置”然后“名称”PATH和“值”/usr/bin:/bin:/usr/ sbin:/sbin:/usr/local/bin

由于某种原因，这不起作用 - 我访问了“管理节点”->“[节点]”->“系统信息”，PATH 值没有改变，作业继续不起作用。

这是版本 1.462 和 slave.jar 2.13。

我的解决方法是在节点配置页面的“工具位置”部分中为工具（在我的情况下为 git）设置显式路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:30:29.113

我建议用“echo $PATH”替换您的 phpmd 命令，这样您就可以在启动 phpmd 的上下文中查看 PATH 中的内容。

# android - 怎么能显示两个水平按钮，和下面一张图

> ID：10312016
> 
> 赞同：0
> 
> 时间：2012-04-25T08:27:48.590
> 
> 标签：android, android-layout, button

目前在我的代码中，按钮显示在另一个下方，地图显示在它们下方。我希望这两个按钮显示在同一行并在地图下方。

我的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
         xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="fill_parent" 
         android:layout_height="fill_parent">

     <Button
         android:id="@+id/btnProgram"
         android:layout_height="wrap_content"
         android:layout_width="wrap_content"
         android:text="Program" />

     <Button
         android:id="@+id/btnAfisareStatii"
         android:layout_height="wrap_content"
         android:layout_width="wrap_content"
         android:text="Afisare Statii" />        

     <com.google.android.maps.MapView 
            android:id="@+id/mapView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:enabled="true"
            android:clickable="true"
            android:apiKey="0ws8opHdf-pIbZUa916nju81kSSlPRK4Wbg_0vg"
     />

    <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />

    <WebView 
        android:id="@+id/webview2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:34:15.900

将两个按钮包装在水平 LinearLayout 中，或使用 RelativeLayout，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btnProgram"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Program" />

    <Button
        android:id="@+id/btnAfisareStatii"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Afisare Statii" android:layout_toRightOf="@+id/btnProgram"/>

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/btnAfisareStatii" />

    <WebView
        android:id="@+id/webview2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/webview" />

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0ws8opHdf-pIbZUa916nju81kSSlPRK4Wbg_0vg"
        android:clickable="true"
        android:enabled="true" android:layout_above="@id/btnProgram">
    </com.google.android.maps.MapView>

</RelativeLayout> 
```

如果您不需要它们，您还应该安排 webView 或删除它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:36:24.043

试试这个布局：

```
<?xml version="1.0" encoding="UTF-8"?>  <LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent">
<LinearLayout
     android:orientation="horizontal"
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent">

     <Button
         android:id="@+id/btnProgram"
         android:layout_height="wrap_content"
         android:layout_width="wrap_content"
         android:text="Program" />

     <Button
         android:id="@+id/btnAfisareStatii"
         android:layout_height="wrap_content"
         android:layout_width="wrap_content"
         android:text="Afisare Statii" />        

</LinearLayout>
 <com.google.android.maps.MapView 
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="0ws8opHdf-pIbZUa916nju81kSSlPRK4Wbg_0vg"
 />

<WebView 
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/>

<WebView 
    android:id="@+id/webview2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:45:33.093

设置按钮所在的布局 android:orientation:"horizo​​ntal" 使用这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="horizontal"
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent">

 <Button
     android:id="@+id/btnProgram"
     android:layout_height="wrap_content"
     android:layout_width="wrap_content"
     android:text="Program" />

 <Button
     android:id="@+id/btnAfisareStatii"
     android:layout_height="wrap_content"
     android:layout_width="wrap_content"
     android:text="Afisare Statii" /> 
```

`</LinearLayout>`

# html - 在 Asp.Net 中使用水晶报表打印 HTML 表格

> ID：10312027
> 
> 赞同：1
> 
> 时间：2012-04-25T08:28:54.347
> 
> 标签：html, asp.net, crystal-reports, html-table

我有一个网页应用程序。现在我想使用 Crystal 报表打印该页面。`<Table>`包含 HTML标记的网页。我是 Asp.net 的新手。

IE

```
<html>
<head>
</head>
<body>
<form>
    <div>
    <table>
    <tr>
    <td>
          Name :
    </td>
    </tr>
    <tr>
    <td>
          UserName1
    </td>
    </tr>
    <tr>
    <td>
          Address :
    </td>
    </tr>
    <tr>
    <td>
          INDIA
    </td>
    </tr>
    </table>
    </div>
</body>
</form></html> 
```

那么任何人都可以提出一些建议如何`<table>`直接在水晶报表中打印HTML标签吗？

# android - 设置 android 系统范围的代理设置

> ID：10312032
> 
> 赞同：1
> 
> 时间：2012-04-25T08:29:28.320
> 
> 标签：android

我正在考虑编写一个 Android 平板电脑应用程序，作为广泛的家长控制解决方案的一部分。

该应用程序应将平板电脑设置为与将在系统范围内使用的代理服务器一起使用（该设备上的所有应用程序都将被迫使用代理服务器）。

代理服务器的工作是过滤和监控来自平板电脑的所有传出连接。作为其中的一部分，只有特定站点将可用，而大多数应用程序将被阻止（包括 Google Play 商店或设备上安装的任何其他通信应用程序）。

另外，如果通过监视和更改设置或使用密码阻止用户，我希望用户无法更改或删除代理设置。

实际的代理服务器已经在运行并且可以正常工作。重要的是应用程序不需要自定义 ROM 和/或 root 访问权限

可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:58:13.240

默认情况下，如果无法访问所有系统，控制应用程序将无法工作 - 意味着 root 访问权限 - 您可以尝试了解 Android Anti Virus 软件使用的原理，这将有所帮助。

默认情况下，好像现在无法为应用程序设置代理...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-01T11:34:57.970

我有一段时间有同样的问题。我使用一个执行 http 请求的库，但我无法访问源代码。所以我开始挖掘，有两件事我需要做。一个是在我自己的 http 请求之前添加这段代码：

```
HttpClient httpClient = new DefaultHttpClient();
if (useProxy) {
  HttpHost proxy = new HttpHost("192.168.1.10", 8080, "http");
  httpClient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);
}
//use httpClient for a request here 
```

但这并没有完全解决我的问题。我无法访问发出自己请求的库的源代码。我寻找了更多解决方案，发现您可以使用以下代码为您的应用程序发出的所有请求设置默认代理。

```
System.setProperty("http.proxyHost", "192.168.1.10");
System.setProperty("http.proxyPort", "8080"); 
```

添加此代码后，来自库的请求也会通过代理。

# ajax - 为什么我不能从 ExtJs4 中的服务器获取 JSON？

> ID：10312034
> 
> 赞同：0
> 
> 时间：2012-04-25T08:29:35.807
> 
> 标签：ajax, django, extjs, extjs4

我想从服务器获取 JSON。这里是 django 服务器视图函数：

```
def showChart(request):
    data = [{"id":1, "name":"Tom", "email":"a@a.com"}, {"id":2, "name":"Bosh", "email":"c@c.com"}]
    return HttpResponse(json.dumps(data), mimetype="application/json"); 
```

显然，showChart() 将返回一个 json。

我的前端 extjs4 代码：

```
Ext.onReady(function() {
Ext.define('ProductionInfo', {
    extend: 'Ext.data.Model',
    fields: ['email', 'id', 'name']
});

var store_new = Ext.create('Ext.data.Store', {
    model: 'ProductionInfo',
    proxy: {
      type: 'ajax',
      url : 'http://localhost:8000/production_data',
      reader: {
          type: 'json'
      }
    }
});

store_new.load();
alert(store_new.getCount()); 
```

});

但是警报对话框显示“0”，而正确答案是“2”。那么为什么我不能从服务器获取 JSON 呢？（我可以通过 Chorme 和 Firefox 中的 GET 请求获得正确的 JSON）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:38:44.497

您可以查看我的示例：[https](https://github.com/lucassus/extjs4-account-manager) ://github.com/lucassus/extjs4-account-manager 它是 rails 应用程序，但 json 机制非常相似。

基本上你必须定义一个有效的模型`proxy`：[https://github.com/lucassus/extjs4-account-manager/blob/master/app/assets/javascripts/app/model/User.js](https://github.com/lucassus/extjs4-account-manager/blob/master/app/assets/javascripts/app/model/User.js)
和一个商店将有`model`属性： [https ://github.com/lucassus/extjs4-account-manager/blob/master/app/assets/javascripts/app/store/Users.js](https://github.com/lucassus/extjs4-account-manager/blob/master/app/assets/javascripts/app/store/Users.js)

# php - 如何让文件和文件夹更安全？

> ID：10312036
> 
> 赞同：1
> 
> 时间：2012-04-25T08:29:37.667
> 
> 标签：php, mysql, codeigniter

如何使文件和文件夹更安全。所以没有黑客可以访问，甚至文件夹结构也不应该被暴露，PHP 安全扫描程序应该给出更有效的报告？

我只是扫描我在 CodeIgniter 中的网站。我有可怕的报告。文件夹结构及其内容也完全暴露在会话 ID 上。

我应该怎么做才能防止这种情况发生？对每个文件夹的 .htaccess 可以防止这种情况吗？

我使用了“Acunetix WVS 记者”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:36:07.007

只是不要将不应公开访问的任何内容放入可公开访问的文件夹（`httpdocs/`,`public/`或任何文档根目录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:23:12.323

对于我的网站，当我想包含 javascript、CSS 或图像（任何外部的，真的）时，

我有一个获取文件内容的 PHP 文件，如下所示：

```
<?php
 $explode = explode(".", $_GET[f]);
 $md5 = md5($explode[0]);
 echo file_get_contents("secretfolder/$md5.$explode[1]");
?> 
```

并在 HTML 中使用

```
<img src='include.php?f=heart.jpg'>
<style type='text/css' rel='stylesheet' href='include.php?f=styles.css'> 
```

然后在该文件夹中放置一个 index.php，它会重定向到您的主页或显示虚假 404 错误。

您应该调试和扩展 PHP，以消除潜在的代码注入或 XSS 漏洞。我建议查看[文件获取内容](http://au.php.net/manual/en/function.file-get-contents.php)

了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:22:29.533

[CodeIgniter http://codeigniter.com/wiki/Better_Server_Setup_for_CI](http://codeigniter.com/wiki/Better_Server_Setup_for_CI)应该是这样的

# android - phonegap - deviceready 事件有效，但 resume/online/offline 事件无效

> ID：10312038
> 
> 赞同：2
> 
> 时间：2012-04-25T08:29:42.160
> 
> 标签：android, iphone, events, cordova

我使用 iframe 在我的应用程序中显示外部 url，但如果互联网或网站不再可用，我想显示一条错误消息。在我的代码中，我使用的是 deviceready/resume/online/offline 事件。但是我的问题是 deviceready 事件似乎触发并调用了我定义的其他方法，但其他事件似乎没有触发（工作）。因此，如果互联网或网站突然不再可用，则 iframe 不会刷新，只会停留在同一页面/图像上——从用户的角度来看，他们不知道发生了什么。

以下是我的一些代码：

```
 <script type="text/javascript" charset="utf-8" src="cordova-1.6.0.js"></script>

       <script type="text/javascript" charset="utf-8">

            function onload() 

            {

                document.addEventListener("deviceready", onDeviceReady, false);

            }

            function onDeviceReady() 

            {

                document.addEventListener("pause", onPause, false);

                document.addEventListener("resume", onResume, false);

                document.addEventListener("offline", onoffline, false);

                document.addEventListener("online", onOnline, false);

                checkUrl();

            }

            function onPause() {

              //code for the pause function     

            }

            function onResume()

            {

                   checkUrl();

            }

            function onoffline()

            {

               //display error message

            }

            function onOnline()

            {

                checkUrl();

            }

            function checkUrl()

            {

               //code to check the url is valid

                alert("checkur");

             }

            function onerror()

          {

                //display error message

           }                

          </script>

        </head>

<body onload="onload()">

    <div id="divFrameHolder" style="visibility:hidden;" scroll="no">

        <iframe allowtransparency src="http://www.XXXXX.com" id="iframe"width="100%" height="100%" scrolling="no" frameborder="0" onerror="onerror();" style="text-align:center;" >

        </iframe>

    </div> 

</body> 
```

在使用 cordova-1.6.0 - 我在 android 和 iPhone 上都遇到了同样的问题

多年来，这一直让我发疯，因为一个活动正在发挥作用，我原以为其他活动也应该发挥作用。我非常感谢您可能获得的任何帮助/建议。

# python - 使用 Selenium 和 Python 检查 ID

> ID：10312039
> 
> 赞同：0
> 
> 时间：2012-04-25T08:29:48.857
> 
> 标签：python, selenium

我正在用 python 运行硒测试。我对以下 html 代码有一个特定的问题.....

```
<span class="cke_label" id="cke_8_label">Source</span> 
```

我已经尝试了以下......

```
self.assert_element_present_by_class('Source button', 'cke_8_label', 'cke_label')** 
```

这是功能............

```
def assert_element_present_by_class(self, description, id, name):
    sel = self.selenium
    try:
        self.assert_(sel.is_element_present("//" + id + "[contains(@class,'" + name + "')]"))
        logging.info('PASS: "' + description + '" is present')
    except Exception:
        logging.exception('FAIL: "' + description + '" is not present') 
```

这给了我这个错误.......

> 文件“Template_Designer_P37.py”，第 293 行，在 assert_element_present_by_class self.assert_(sel.is_element_present("//" + id + "[contains(@class,'" + name + "')]")) 文件 "C: \Python27\lib\unittest\case.py"，第 420 行，在 assertTrue 中引发 self.failureException(msg) AssertionError: False is not true

我尝试了其他几种方法，例如简单地尝试断言 id * *strong text* *exists

我的预感是问题围绕着“id”

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:33:59.973

You try to use incorrect xpath and insert id instead of tag name. So correct version will be

```
self.assert_(sel.is_element_present("//*[@id='" + id + "' and contains(@class,'" + name + "')]")) 
```

# iphone - 如何将第一个简单的单视图视图控制器更改为导航视图控制器？

> ID：10312041
> 
> 赞同：0
> 
> 时间：2012-04-25T08:29:55.367
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, uitabbarcontroller

我首先喜欢加载显示一些选项的简单 viewController，然后单击某个按钮，我想根据按钮单击加载 navigationController 或 tabbarController。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:15:22.310

当我想切换视图时，我替换了窗口上的根视图控制器。

例如，在我的应用程序中，我首先显示加载屏幕，然后将视图切换到登录屏幕。

为此，您需要引用您的应用程序委托，然后您可以访问窗口属性并替换根视图控制器：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
LoginViewController *loginVC = [[LoginViewController alloc] init];              
appDelegate.window.rootViewController = loginVC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:49:58.623

在 appdelegate.h

```
@property (strong, nonatomic) id<UIApplicationDelegate>delegate; 
```

在 appdelgate.m

```
@synthesize delegate; 
```

在我的第一个 viewController 的 .h 文件中

```
AppDelegate *myappDelegate;
-(IBAction)start:(id)sender; 
```

在我的第一个 viewController 的 .m 文件中

```
-(IBAction)start:(id)sender
{
    NSLog(@"Start Button is clicked");
    mvc = [[MasterViewController alloc]initWithNibName:@"MasterViewController" bundle:nil];
    myappDelegate = [[UIApplication sharedApplication]delegate];
    myappDelegate.navigationController = [[UINavigationController alloc]initWithRootViewController:mvc];
    myappDelegate.window.rootViewController = myappDelegate.navigationController;
    [myappDelegate.window makeKeyAndVisible]; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:45:32.410

在您的 simpleViewController 中：

```
- (IBAction) yourButtonAction:(id)sender
{
   UIViewController *Vc = [[theViewControllerYouWantToShow alloc]init];
  UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:Vc];
  [self  presentModalViewController:nav animated:YES];
} 
```

**编辑 ：**

你有三个选项来显示你的 viewController 内容：

1.  如上例使用`presentModalViewController:`

2.  将 viewController 视图作为子视图添加到当前 viewController。在你的情况下：`[simpleViewController.view addSubView:nav.view];`

3.或者，如果您的简单 ViewController 是导航根 viewController，您可以将其他 viewController 推送到其导航堆栈。

# asp.net-mvc-3 - ASP.Net MVC 3 数据注释

> ID：10312046
> 
> 赞同：1
> 
> 时间：2012-04-25T08:30:20.593
> 
> 标签：asp.net-mvc-3, entity-framework, viewmodel, data-annotations

我正在使用 Entity Framework 4.1 构建一个 ASP.Net MVC 3 Web 应用程序。在我的一个接受 ViewModel 的视图中执行验证。我正在使用我放置在我希望验证的属性上的数据注释。

## 视图模型

```
public class ViewModelShiftDate
{
    public int shiftDateID { get; set; }

    public int shiftID { get; set; }

    [DisplayName("Start Date")]
    [Required(ErrorMessage = "Please select a Shift Start Date/ Time")]
    public DateTime? shiftStartDate { get; set; }

    [DisplayName("Assigned Locum")]
    public int assignedLocumID { get; set; }

    public SelectList AssignedLocum { get; set; }

} 
```

## 看法

```
@using (Html.BeginForm())
{
@Html.ValidationSummary(true)

    <br />
    <div class="editor-label">
        @Html.LabelFor(model => model.shiftStartDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.shiftStartDate, new { @readonly = "readonly" })
        @Html.ValidationMessageFor(model => model.shiftStartDate)
    </div>
    <br />

    <div class="editor-label">
        @Html.LabelFor(model => model.assignedLocumID)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.assignedLocumID, Model.AssignedLocum)
        @Html.ValidationMessageFor(model => model.assignedLocumID)
    </div>
    <br />

    <p>
        <input type="submit" value="Save" />
    </p>
    <br />
} 
```

SelectList ' **AssignedLocum** ' 被传递到我的 DropDownList 视图中，并且选定的项目被分配给属性 ' **assignedLocumID** '。

正如您从我的 ViewModel 中看到的那样，唯一的必填字段是“ **shiftStartDate** ”，但是，当我在视图中点击“提交”按钮时，下拉列表“ **AssignedLocum** ”也作为必填字段并且不允许用户提交，直到选择了一个值。

有谁知道为什么这个属性是必填字段，即使我没有标记它是这样的？

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-25T08:37:10.077

尝试使用下拉菜单的默认值（例如“请选择”）

```
@Html.DropDownListFor(model => model.assignedLocumID, Model.AssignedLocum, "Please select") 
```

# javascript - 如何使这个模块与 requireJS 兼容

> ID：10312049
> 
> 赞同：1
> 
> 时间：2012-04-25T08:30:26.023
> 
> 标签：javascript, requirejs

我正在移植我的一个旧 javascript 文件以与 requireJS 兼容。这是以前代码的样子。

```
// effect.js
(function(exports){

    // shorthand
    exports.effect = function(selector) {
        return new Effect(selector);
    };

    // init
    exports.Effect = function(selector){
        this.target = document.getElementById(selector);        
    };

    Effect.prototype.run = function(){
        alert('halo');
    };
})(this);

//invoke it with
effect('box').run(); 
```

试图使其与requireJS兼容：

```
// effect.js
define(function(exports){   
    // Shorthand
    exports.effect = function(selector) {
        return new Effect(selector);
    };

    // init
    exports.Effect = function(selector){
        alert('halo');
        this.target = document.getElementById(selector);        
    };

    Effect.prototype.run = function(){
        alert('halo');
    };      
}

// require js
require([
    'effect.js'
],function(Effect){
    effect('box').run();
}) 
```

上面的代码不会运行，我如何通过运行 effect('box').run() 的简写来达到相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:34:35.377

试试这个：

```
define(function() {

    // init
    var Effect = function(selector) {
        this.target = document.getElementById(selector);
    };

    Effect.prototype.run = function(){
        alert('halo');
    };

    // Replaces the 'shorthand' function from the first example 
    // This is returned as a module to the require call
    return function(selector) {
        return new Effect(selector);
    }

});

require(['effect.js'], function(effect) {
    effect('box').run();
}); 
```

# php - 在 Buddypress 中为公共、私人和隐藏组显示单独的选项卡

> ID：10312050
> 
> 赞同：0
> 
> 时间：2012-04-25T08:30:26.710
> 
> 标签：php, wordpress

我对 wordpress 和 buddypress 还很陌生。我想知道如何在显示所有组的组部分中为用户显示公共、私人和隐藏组的单独选项卡。有一个函数`bp_get_total_group_count()`可以获取特定用户的组总数，但没有函数可以确定它是哪种类型的组（即**public**、**private**或**hidden**）。可能必须使用一些`apply_filter`东西，但不确定。

请帮忙。

如果需要，我可以为您提供代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:38:29.670

经过一番挖掘，找到了答案。这里是：该过程用于单独显示一个私人组，公共和隐藏遵循相同的过程。

**1.**在 bp-groups/bp-groups-template.php 中，在函数 bp_has_groups 下，添加以下行：

elseif ('anything' == $bp->current_action) { $type ='anything'; }

**2.**在 bp-groups/bp-groups-loader.php 的 setup_nav 函数下，添加一个 nav 项：

$sub_nav[] = 数组（

```
 'name'            => __( 'Private', 'buddypress' ),
        'slug'            => 'anything',
        'parent_url'      => $groups_link,
        'parent_slug'     => $this->slug,
        'screen_function' => 'groups_screen_my_groups',
        'position'        => 20,
        'user_has_access' =>  bp_is_my_profile(),
 ); 
```

**3.**在 bp-default/members/single/groups.php 中，如果：

elseif (bp_is_current_action('anything'))：

```
 do_action( 'bp_before_member_groups_content' ); ?> 
     <?php locate_template( array( 'members/single/groups/anything.php' ), true ); ?>
     <?php do_action( 'bp_after_member_groups_content' ); 
```

**4.**在 bp-default/members/single/groups/ 创建一个新文件 'anything.php' 并编写此代码以显示用户的私有组：

```
 <li id="field_reg_groups_<?php echo $i; ?>" name="field_reg_groups[]" value="<?php bp_group_id(); ?>" />
    <?php bp_group_name(); ?>
  <div class="item-avatar">
    <a href="<?php bp_group_permalink(); ?>"><?php bp_group_avatar( 'type=thumb&width=50&height=50' ); ?></a>
  </div>

  <div class="item">
      <div class="item-title"><a href="<?php bp_group_permalink(); ?>"><?php bp_group_name(); ?></a></div>

      <div class="item-meta">
       <span class="activity"><?php printf( __( 'active %s', 'buddypress' ), bp_get_group_last_active() ); ?></span>
      </div>

      <div class="item-desc"><?php bp_group_description_excerpt(); ?>
      </div>

       <?php do_action( 'bp_directory_groups_item' ); ?>

  </div>

  <div class="action">

     <?php do_action( 'bp_directory_groups_actions' ); ?>

    <div class="meta">

       <?php bp_group_type(); ?> / <?php bp_group_member_count(); ?>

    </div>

  </div>

  <div class="clear"></div>
   </li>

   <?php } 
   $i++; 
   endwhile; 
   endif; 
   else: ?>
   <p class="reg_groups_none">No selections are available at this time.</p> 
```

而已。通过更改“任何内容”的值，对公共和隐藏组遵循相同的操作

# jquery - 如何停止链接到帖子的滑块图像 - 在 Wordpress 上使用anythingSlider

> ID：10312052
> 
> 赞同：0
> 
> 时间：2012-04-25T08:30:30.033
> 
> 标签：jquery, wordpress, slider

我正在使用 Wordpress 和anythingSlider。当您单击滑块上的图像时，您将被定向到帖子。

我不希望这种情况发生。我只有页面。

如何禁用图像与帖子的任何链接？

我试图在代码中找到一些标签，但无济于事。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:42:34.827

我想我想通了。不知道为什么它有效，但它确实有效。

更改永久链接自定义

# php - 更新数据库中的 ID

> ID：10312053
> 
> 赞同：1
> 
> 时间：2012-04-25T08:30:34.527
> 
> 标签：php, mysql, database, updating

数据库：

**表：新闻**

**使用列：唯一键和主键，它们会自动递增，称为 ID、内容和标题**

* * *

**代码：**

**-> 创建一个带有文本字段的表单，用户可以在其中输入他的 ID 值，从而输入项目的位置**

```
$form->textField("Position of the item item", "id", false, 30, false, getIfExists("id", $originalValues)); 
```

**-> 将新 ID 作为查询发布到数据库**

```
$queryvalues["id"]       = $_POST[ "id" ]; 
```

* * *

当我发布另一个项目未使用的 ID 时，它可以工作。但是，如果我尝试覆盖一个 ID，它会给我一个错误并且不会改变任何东西。显然，我需要更新 ID，以便增加所有冲突的 ID，从而允许发布编辑后的 ​​ID。

我对如何做到这一点有点恼火。我的想法是添加一个定义位置的索引号，然后切换到使用数据库 ID 对列表进行排序，并在 CMS 中更改 ID 将能够在 CMS 用户希望时更新它。

但是，我不太确定如何解决这个问题以及是否有更好的选择/解决方案。

有没有人有任何想法/提示/提示？

我试过使用 ON DUPLICATE KEY UPDATE，但到目前为止我还没有运气。

* * *

**编辑：**

好的，现在可以订购了。我创建了一个名为 Position 的新列，并用它来订购物品，它工作正常。

但是，如果我添加一个具有相同位置的新项目，它将把它放在另一个位置下。所以基本上新的“0”列在旧的“0”下，同时共享相同的密钥。对于如何解决这个问题，有任何的建议吗？我正在考虑增加旧的重复键。但不知道这将如何运作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:34:34.340

不要触摸 id 列，保持原样。创建一个名为“位置”的新列并使用它，然后它将允许非唯一值。

出于某种原因，您的 ID 设置为始终是唯一的，并且自动递增也无济于事。当您删除内容时，您的 id 列将不可避免地出现空白，但这不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:49:26.350

“主键”被强制**唯一并永久存在**。它是实体的标识符，不打算用作排序/排序。

要满足您的要求，只需添加 int 或 datetime/timestamp 字段然后`SELECT * FROM yoour_table ORDER BY field_name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:37:10.950

我了解您想使用 ID 来订购商品：不要那样做。

相反，添加一个名为 "ordering" 的新列：

*   插入项目时，将此字段值设置为 ID 值
*   更新项目位置时，交换正在移动的两个项目之间的位置值

# ember.js - 绑定到 ArrayProxy 中的模型

> ID：10312056
> 
> 赞同：1
> 
> 时间：2012-04-25T08:30:46.487
> 
> 标签：ember.js

我在 'pages' ArrayProxy 对象中有 6 个 'page' 对象。

我有一个 StateManager 实例，它将调节与这 6 个“页面”对象相对应的 6 个视图。

```
App.stateManager = Ember.StateManager.create({
  rootElement: '.tab-content',
  initialState: 'firstTab',
  firstTab: Ember.ViewState.create({
    view: Ember.View.extend({
      templateName: 'first',
      contentBinding: 'App.tempObject'// binding to a regular Ember Object works.
    })
  }),
  secondTab: Ember.ViewState.create({
    view: Ember.View.extend({
      templateName: 'second',
      contentBinding: 'WHAT GOES HERE?'//how to bind to an object in an array
    })
  }) 
```

问题是不清楚如何将视图绑定到 ArrayController 中的特定对象。

我有一个 jsFiddle 说明这里的问题：http: [//jsfiddle.net/lifeinafolder/xUNUN/](http://jsfiddle.net/lifeinafolder/xUNUN/)

出于说明目的，jsFiddle 只有 2 个状态，而不是全部 6 个。

这里显示了一个类似的问题：[Ember.js 绑定模型存储在一个数组](https://stackoverflow.com/questions/8512568/ember-js-binding-models-stored-within-an-array)中。解决方案虽然不是很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:12:12.157

您可以创建一个计算属性，该属性返回特定索引处的对象，请参阅[http://jsfiddle.net/pangratz666/MUUs3/](http://jsfiddle.net/pangratz666/MUUs3/)：

```
App.ObjectAtBindable = Ember.Mixin.create({
    targetObject: function() {
        var objectIndex = this.get('objectIndex');
        var controller = this.get('controller');
        if (controller) {
            return controller.objectAt(objectIndex);
        }
        return null;
    }.property('controller', 'objectIndex').cacheable()
});

App.stateManager = Ember.StateManager.create({
    firstTab: Ember.ViewState.create({
        view: Ember.View.extend(App.ObjectAtBindable, {
            templateName: 'first',
            contentBinding: 'targetObject',
            controllerBinding: 'App.controller',
            objectIndex: 0
        })
    })
}); 
```

# sql - SQL 嵌套查询作业

> ID：10312057
> 
> 赞同：4
> 
> 时间：2012-04-25T08:30:52.643
> 
> 标签：sql, nested-query

给定：

InsuranceCompanies（**cid**，姓名，电话，地址）

医生（**做**、姓名、专业、地址、电话、年龄、cid）

患者（**pid**、姓名、地址、电话、年龄、性别、cid）

访问次数（**vid**、did、pid、date、description）

在哪里：

```
cid - Insurance Company code
did - doctor code
pid - patient code
vid - code of visit 
```

还有一个任务：查找今年访问次数少于所有医生平均访问次数的医生（做了，姓名）。

我的尝试是：

```
SELECT  D.did, D. name
FROM    Doctor D,Visit V
WHERE   V.did = D.did   and   D.did = CV.did   and   CV.visits <
                (SELECT AVG ( CV.visits) 
                 FROM   (SELECT V1.did AS did,COUNT(V1.vid) AS visits
                         FROM   Visit V1
                         WHERE  V1.date LIKE '%2012' 
                         GROUP BY   V1.did) AS CV) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:32:13.100

非常感谢 Bridge 谁分享了有史以来最漂亮和用户友好的 SQL 命令可视化器！

[数据库示例： http](http://sqlfiddle.com/#!2/e85c7/3) ://sqlfiddle.com/#!2/e85c7/3

使用视图的解决方案：

```
CREATE VIEW  ThisYear AS 
    SELECT v.pid,v.vid,v.did
    FROM Visits v
     WHERE v.date LIKE '%2012';

CREATE VIEW DoctorsVisitCount AS
    SELECT v.did, COUNT(v.vid) as c
    FROM ThisYear v
    GROUP BY v.did;

SELECT DISTINCT d.did,d.dname,dvc.c
FROM Doctors d,DoctorsVisitCount dvc
WHERE dvc.c < (SELECT AVG(dvc.c)
               FROM DoctorsVisitCount dvc); 
```

# performance - 通过 JDBC 性能问题调用 PL/SQL 包

> ID：10312058
> 
> 赞同：2
> 
> 时间：2012-04-25T08:30:54.373
> 
> 标签：performance, oracle, jdbc, plsql, prepared-statement

我必须使用 PL/SQL 包作为 API 将数据导入 Oracle 数据库。我正在使用最新的 ojdbc 驱动程序在 Java 应用程序中执行此操作。我在导入期间使用的所有语句（原因是 PreparedStatements）仅初始化一次，并在每个要导入的集合中重复使用。

现在我面临以下问题：程序包的第一次调用占用了一组时间超过 90% 的时间。在导入过程中我必须调用大约 10 个程序，第一个大约需要 4 秒，其余大约 0.4 秒。不管是第 10 组还是第 100,000 组导入第一个过程调用总是需要那个时间。

重要的是要知道，如果我在第一个位置调用另一个程序，这将占用 90%。那么，可能是我错了，是关于包初始化的吗？但是，如果我（重新）使用准备好的语句，那不应该只在第一次调用时发生吗？

PL/SQL 包有大约 10,000 行代码，并且在导入过程中还会调用其他几个包。

所以现在我的问题是：

这个问题的可能原因是什么？什么是潜在的解决方案？有什么工具可以用来识别原因吗？

**编辑：**我可以确定导入缓慢的原因。它与错误的代码或其他东西无关。原因只是我在测试场景中使用的那种数据。我的错误是始终导入相同的数据。

如果线程一在第一个过程中对数据集进行了更新，它会在该行上保持锁定，直到完成导入后的提交。线程二到 n 试图更新完全相同的行。结果实际上是所有线程的同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:10:44.107

首先，这是不正常的。所以你的代码肯定有问题。但是如果不能看到您的来源，我们就无法发现问题。坦率地说，我不想调试 10000 LOC，甚至我的也不想调试，更不用说你的了。对不起。

所以我们能做的最好的就是给你一些指示。

**一：**

> “程序包的第一次调用占用了一组时间超过 90% 的时间。....如果我在第一个位置调用另一个程序，这将占用 90%”

也许有一些共同的代码片段，每个过程执行的行为不同，具体取决于调用过程是否是第一个在任何给定运行中执行它的过程。您需要找到该恶意代码。

**二：**

> " 我在 pl/sql developer 中使用了分析器。那里的执行速度非常快。"

您的程序的行为会有所不同，具体取决于您是否从 JDBC 的 PL/SQL Developer 调用它。所以很有可能问题不在于 PL/SQL 代码，而在于 JDBC 代码。获取数据库连接绝对是一种潜在的痛苦来源。取决于您的架构，网络流量可能是另一个问题：您是否将大量数据返回给 Java 程序，然后用于后续的过程调用？

简而言之：您要么需要识别 PL/SQL 代码中的某些共同点，这些共同点可能在不同的过程调用中导致相同的结果，要么识别在 PL/SQL Developer 和 JDBC 中调用程序时发生的不同情况。

# java - java分组问题

> ID：10312063
> 
> 赞同：0
> 
> 时间：2012-04-25T08:31:23.453
> 
> 标签：java, grouping

我有一个资产类型的 arralist，其中资产是一个 POJO，并且有它的 set 和 get 方法。

```
ArrayList<Asset> assetItems; 
```

每个资产都有一个 ratingValue，可以通过以下方式获取

```
assetItems.get(i).getratingValue(); 
```

现在的任务是assetItems 应该根据它们的评级值进行分组。有人可以帮我吗

例如，最初如果 arraylist 中的项目的 ratingvalue 是 a c g a j c

那么输出应该是 a a c c g j

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:35:25.843

听起来像[`Multimap`](http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/com/google/common/collect/Multimap.html)来自[番石榴](http://guava-libraries.googlecode.com)的是你想要的：

```
Multimap<String, Asset> map = Multimaps.newListMultimap();
for (Asset asset : assetItems) {
    map.put(asset.getRatingValue(), asset);
} 
```

然后您可以获得具有特定评级的所有资产：

```
for (Asset asset : map.get(someRating)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:37:50.653

您应该尝试以下方法：

```
Map<Integer, List<Asset>> groupedAssets = new HashMap<Integer,  List<Asset>>()
for(Asset asset : assetItems) {
    int ratingValue = asset.getratingValue();
    List<Asset> assets = groupedAssets.get(ratingValue);
    if(assets == null) { // this rating value has never been retrieved before
        assets = new ArrayList<Asset>();
        groupedAssets.put(ratingValue, assets);
    }
    assets.add(asset);
} 
```

结果`Map`包含`Asset`分组的列表`ratingValue`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:36:52.353

您可以像这样根据阈值对资产进行分组。

```
 Class AssetGroup
    {
    int thresholdrating;
    ArrayList<Asset> listAssets;

   // add Asset to group list

   public void add(Asset a)
   {
    this.listAssets = a;
   }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T08:37:46.270

如果您的意思是分组，请查看 Jon Skeet 解决方案。如果您的意思是排序，那么您可以使用以下代码：

```
Collections.sort(assetItems, new Comparator<Asset>() {
    public int compare(Asset a1, Asset a2) {
        return a1.getratingValue().compareTo(a2.getratingValue());
    }
}; 
```

# c - realloc()：下一个大小无效：0x0000000002119010

> ID：10312064
> 
> 赞同：0
> 
> 时间：2012-04-25T08:31:25.043
> 
> 标签：c, memory, malloc, realloc

当我编译并运行这段代码时，我得到一个错误。错误信息是：

`realloc(): invalid next size: 0x0000000002119010`

该文件`input`大约有4000字。

我调试了它，但我找不到任何问题。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>

#define BUF_LEN 10   //buf length

int main(int argc, char *argv[])
{
  int file_d;                     //file descriptor
  char *ct_head;                  //content_first_char
  char *content;
  ssize_t read_len = BUF_LEN;     //had read length
  int mem_block_count = 0;

  file_d = open("input", O_RDONLY);

  if (file_d < 0)
    {
      perror("open");
      exit (1);
    }

  content = ct_head = (char *) malloc(sizeof(char) * BUF_LEN);
  mem_block_count = 1;

  while (read_len == BUF_LEN)
    {
      read_len = read(file_d, ct_head, BUF_LEN);
      if (read_len < 0)
        {
          perror("read");
          exit(2);
        }
      if (read_len == BUF_LEN)
        {
          ct_head = (char *)realloc(content, sizeof(char) *(++mem_block_count));
          ct_head = &content[(mem_block_count-1) * BUF_LEN];
        }
      else
        ct_head[read_len] = '\0';
    }
  printf("%s", content);

  close(file_d);
  free(content);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:37:11.330

你已经在这里得到了一些很好的答案，但这里有一些不适合评论的建议。在 C 中，`sizeof(char)`总是1。根据定义，它是 1，因此它与 using 一样***多余***`(1 * BUF_LEN)`。同样在 C 中，您不必 [也不应该] 强制转换`malloc`. 这样做可以掩盖一个基本错误¹ ​​。

如果要根据类型的大小分配空间，请使用：

```
ct_head = malloc(sizeof(*ct_head) * BUF_LEN); 
```

这样，如果类型发生`ct_head`变化，您仍然可以分配足够的空间，而无需更改对`malloc`and的所有调用`realloc`。

[1\. 如果您没有为 包含适当的标头`malloc`，则 C 编译器将假定`malloc`返回`int`，这可能会导致在平台上的大小`int`与指针类型的大小不同的问题。此外，从整数类型到指针类型的转换是实现定义的。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:39:04.937

我不确定你的问题是什么，但这些行：

```
 ct_head = (char *)realloc(content, sizeof(char) *(++mem_block_count));
    ct_head = &content[(mem_block_count-1) * BUF_LEN]; 
```

非常狡猾。在第一行之后，`ct_head`指向重新分配的块并`content`指向垃圾。然后第二行读取`content`并重新分配`ct_head`- 泄漏重新分配的内存。

我怀疑您的程序中可能只是内存损坏？

我认为

```
ct_head = (char *)realloc(content, sizeof(char) *(++mem_block_count)); 
```

应该：

```
content = (char *)realloc(content, sizeof(char) *(++mem_block_count) * BUF_LEN);
if (content == NULL)
{
    // do something if the realloc fails
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:39:10.003

第一次使用 realloc 时，它只分配 2 个字节，因为在进入调用时，`sizeof(char)`它是 1 并且`mem_block_count`也是 1（然后它被预递增到 2）。

这意味着下一次读取将超出它分配的缓冲区。`BUF_LEN`我怀疑您还需要在 realloc 中乘以。

**编辑**

我刚刚意识到，更糟糕的是：在将内容分配给 2 个字节之后，您将设置`ct_head`为`BUF_LEN`内容开头之外的字节。这意味着您的读取会覆盖完全在缓冲区之外的区域。

# ios - 使用rest创建一个webservice与json通信 - 教程

> ID：10312078
> 
> 赞同：0
> 
> 时间：2012-04-25T08:32:00.643
> 
> 标签：ios, json, web-services, rest

我正在看一个教程，它让我学习并使用 PHP 在 REST 中创建 web 服务，以将 JSON 传递给我的 iOS 应用程序。

我没有找到任何“好”的教程或教程让我学习和创建看起来有点像我想要的东西。

你能帮助我，让我朝着好的方向发展吗^^

多谢你们 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:52:57.953

## 客户

对于客户端，我建议您使用[RestKit](http://restkit.org/)，它是一个非常方便的框架，用于使用基于 REST 的网络服务器。它适用于 XML 和 JSON。我以前用过它，绝对可以推荐它。还有各种示例，向您展示如何使用该框架。

## 服务器

根据您的需要，您可以执行以下选项之一：

1.  简单：如果您想更多地关注客户端，您只需将`.json`文件放在保管箱的公共文件夹中的文件夹中并使用这些数据文件。然后，您可以使用您选择的文本编辑器对它们进行更改

2.  如果您想拥有更多控制权并拥有数据库等。我建议使用[CakePHP](http://cakephp.org)，就像 PHP 的 Rails 一样。你有一点学习曲线，但是这个框架非常强大，而且有很多资源。像[Rails](http://rubyonrails.org)一样，它遵循[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)范式。

**更新：**

我刚刚偶然发现了一个[很好的 iPhone 分步教程](http://mobile.tutsplus.com/tutorials/iphone/iphone-json-twitter-api/)，它加载了基于 json 的 twitter-data 并将其显示在`UITableView`

![推特客户端](../Images/75489c69955ca6186cb0b39eeb33123b.png)

# php - php regexp 中未定义的索引通知

> ID：10312079
> 
> 赞同：1
> 
> 时间：2012-04-25T08:32:01.037
> 
> 标签：php, regex, preg-replace, mirc

好吧，我已经尝试在互联网上搜索了几个小时，但到目前为止它没有任何帮助。我试图弄清楚为什么我不断收到以下通知通知（是的，我知道这只是一个通知，不会停止脚本的执行）：

```
Notice: Undefined index: 05 in [redacted_path]\script.php(31) : regexp code on line 1 
```

该脚本旨在作为 irc 通道日志的颜色替换器；我从另一个站点获取了大型功能，并对其进行了一些修改以满足我的需要。功劳当然要归功于[它的创造者](http://forum.swiftirc.net/viewtopic.php?f=44&t=14875 "泽罗耶兹")。除此之外，我……对正则表达式有点熟悉，但我当然不能在下面发现有问题的错字或类似的东西。任何援助将不胜感激。

```
<?php
if (isset($_POST['chn'])) {
    $chn = $_POST['chn'];
    $str = urldecode($_POST['line']);
    $filen = "logs/$chn" . "_" . date('Y_F_d') . ".html";
    $str = preg_replace('/https?:\/\/[^\s"<>]+/', '<a href="$0" target="_blank">$0</a>', $str);
    $logln = mirc2html($str) . "<br />\r\n";
    $logln = str_replace("Â","",$logln);
    file_put_contents($filen,stripcslashes($logln),FILE_APPEND);
}

if (isset($_GET['test'])) {
    echo str_replace("Â","",mirc2html($_GET['test']));
}

function mirc2html($x) {
    $c = array("FFF","000","00007F","009000","FF0000","7F0000","9F009F","FF7F00","FFFF00","00F800","00908F","00FFFF","0000FF","FF00FF","7F7F7F","CFD0CF");
    $x = preg_replace("/\x02(.*?)((?=\x02)\x02|$)/", "<b>$1</b>", $x);
    $x = preg_replace("/\x1F(.*?)((?=\x1F)\x1F|$)/", "<u>$1</u>", $x);
    $x = preg_replace("/\x1D(.*?)((?=\x1D)\x1D|$)/", "<i>$1</i>", $x);
    $x = preg_replace("/\x03(\d\d?),(\d\d?)(.*?)(?(?=\x03)|$)/e", "'<span style=\"color: #'.\$c['$1'].'; background-color: #'.\$c['$2'].';\">$3</span>'", $x, -1, $n1);
    $x = preg_replace("/\x03(\d\d?)(.*?)(?(?=\x03)|$)/e", "'</span><span style=\"color: #'.\$c['$1'].';\">$2</span>'", $x);
    $x = preg_replace("/\x03|\x0F(.*?)/", "<span style=\"color: #000; background-color: #FFF;\">$1</span>", $x);
    $x = str_replace("\n","",$x);
    $x = str_replace("\r","",$x);
    $x = preg_replace("/\<\/span\>/","",$x,1);
    $x = preg_replace("/(\<\/span\>){2}/","</span>",$x);
    return $x;
}
?> 
```

因此，违规行是：

```
$x = preg_replace("/\x03(\d\d?)(.*?)(?(?=\x03)|$)/e", "'</span><span style=\"color: #'.\$c['$1'].';\">$2</span>'", $x); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:05:27.337

`$c['05']`错误的原因很明确：未定义变量。定义它或使用能够将其转换为整数的函数更改替换 - 由于某种原因我不清楚 - PHP 无法使用 eval 的正则表达式替换（通常数字字符串转换为整数键在内部自动）。

如果您愿意接受一些建议：

*   重构代码以删除重复的部分（总是一些代码做某事，多类代码，每个类都有自己的替换）。
*   使用回调函数进行替换，以便您可以更好地控制替换并传递颜色值。

# matlab - 具有排序顺序的 MATLAB 绘图

> ID：10312082
> 
> 赞同：2
> 
> 时间：2012-04-25T08:32:09.300
> 
> 标签：matlab, plot

我在[MATLAB](http://en.wikipedia.org/wiki/MATLAB)中有两个向量，比如：

```
x = [1 20 3 7 10] 
```

和

```
y = [2 51 1 9 18] 
```

我如何绘制`y`vs K`x`的排序值顺序（1 3 7 10 20），它们各自`y`的值如下所示？

```
x = [1 3 7 10 20]
y = [2 1 9 18 51] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T08:40:08.677

使用第二个输出参数调用 sort。

```
x = [1 20 3 7 10]  
y = [2 51 1 9 18]  

[xsorted, I] = sort(x)
ysorted = y(I) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:37:56.643

```
XY = sortrows([x ; y]');

plot(XY(:,1), XY(:,2)); 
```

连接矩阵，转置它们，然后您可以使用 sortrows 按 X 排序

# c# - WebView InvokeScript HRESULT 0x80020101

> ID：10312088
> 
> 赞同：17
> 
> 时间：2012-04-25T08:32:38.333
> 
> 标签：c#, webview, windows-runtime, invokescript

我正在尝试调用 WebView 中的函数。我需要调用的一些目标函数是：

```
play: function()
{
    if (this.value < this.p.max)
    {
        this.inc();
        this.timer = new it_timer({ object: this, method: "play", timeout: 200 });
    }
    else
        this.stop();
},
stop: function()
{
    if (this.timer)
        this.timer.stop();
    this.playing = false;
    this.playbutton.style.backgroundPosition = "0 0";
} 
```

我开始打电话

```
webView.InvokeScript("play", new string[0]); 
```

但这不起作用，HRESULT：0x80020101。我在这个主题上找到了这个[http://support.microsoft.com/kb/247784](http://support.microsoft.com/kb/247784)，但它根本没有帮助我。

然后，我尝试在多个站点上做我发现的示例：

```
webView.InvokeScript("eval", new string[] { "document.documentElement.outerHTML;"); 
```

和

```
webView.InvokeScript("alert", new string[] {"message"}); 
```

但是这两个都不起作用，给出了相同的 HRESULT 代码。WebView 正常呈现，并且 javascript 在页面上运行良好。

我将不胜感激在识别问题/寻找解决方案方面的任何帮助。

编辑：似乎“警报”并且在类中声明的所有方法都不起作用。在早期的 .NET 版本中似乎有一个 InvokeMethod(..)，WinRT 有什么替代品吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-13T08:11:41.170

当您在 javascript 中出现语法错误时，就会出现该错误。

# java - 在运行时创建的对象中使用自动装配的 bean

> ID：10312092
> 
> 赞同：3
> 
> 时间：2012-04-25T08:32:51.300
> 
> 标签：java, spring, autowired

我有一个实现 W 接口的 B 类。它具有 W 方法的默认实现。类 C 和 D 覆盖默认实现，它们需要一个服务，其 bean 由 spring 实例化。字符串 a 和 b 来自用户，因此我无法提前创建 B/C/D 的 bean。所以我有一个工厂，它根据用户参数创建一个新对象（它将根据参数创建 B/C/D）。有什么干净的方法可以从 C 和 D 内部使用服务 bean（aa/bb/cc/dd 等）（在服务器启动期间弹簧自动装配，当时实例化 B/C/D 所需的参数不可用）或有没有更好的方法来解决这个问题？

```
 Class B implements W{
      String a;
      String b;
      B (String a, String b);

      w_method(){

      }
   }

    Class C extends B {
      @Autowired
      Service aa;

      @Autowired
      Service bb;

      @Autowired
      Service cc;

      @override
      w_method(){
      }
    }

Class D extends B {
  @Autowired
  Service dd;

  @override
  w_method(){
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T08:58:08.593

有三种可能的方法：

*   构造函数参数来自用户这一事实并不意味着这些对象不能由 Spring 创建。

    您可以将它们声明为范围的 Spring bean`prototype`并在您的工厂中执行以下操作：

    ```
    public C createC(String a, String b) {
        return applicationContext.getBean("c", a, b);
    } 
    ```

    这种方法的一个缺点是你的工厂依赖于`ApplicationContext`.

*   `@Configurable`您可以使用AspectJ 编织来注释这些类并启用。在这种情况下，Spring 将配置这些类的对象，即使您使用`new`. 请参阅[7.8.1 使用 AspectJ 通过 Spring 依赖注入域对象](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-atconfigurable)。

*   您可以手动触发自动装配

    ```
    applicationContext.getAutowireCapableBeanFactory().autowireBean(...); 
    ```

    当您无法控制需要自动装配的对象（servlet 等）的创建时，这种方法很有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T09:05:46.670

我认为最简单的方法是将服务连接到工厂并在返回它们之前调用 B / C / D 对象上的设置器，而不是尝试使用`@Autowired`.

或者使用 axtavt 的构造函数参数方法。如果你想避免依赖`ApplicationContext`，你可以使用[Lookup Method Injection](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection)，但是你必须按照这篇博文修补 Spring：http: [//nurkiewicz.blogspot.co.uk/2010/08/creating-prototype-spring- bean-on.html](http://nurkiewicz.blogspot.co.uk/2010/08/creating-prototype-spring-beans-on.html)

# ios - ios 使用 NSUserDefaults 登录，处理崩溃或设备关闭

> ID：10312093
> 
> 赞同：0
> 
> 时间：2012-04-25T08:32:58.363
> 
> 标签：ios, login, nsuserdefaults

当用户登录我的 ipad 应用程序时，我正在尝试处理关键行为。

成功登录后，我们将记住使用 nsuserdefaults 登录，但在以下情况下需要重新登录：

1.  发生崩溃
2.  设备已关闭

发生上述操作时，是否可以重置 NSUserDefault 上的登录值？如果是，我该如何处理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:42:16.657

对于案例 1，添加一个异常处理程序

```
- (void) applicationDidFinishLaunching: (UIApplication *) application
{
    NSSetUncaughtExceptionHandler (&myExceptionHandler);
}
....
- (void) myExceptionHandler (NSException *exception)
{
    // Make a note in your default settings
    // User needs to log in
} 
```

对于案例 2 陷阱

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Make a note in your default settings
    // User needs to log in
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:23:38.547

我不知道应用程序知道设备何时关闭的方法。如果您的意思是退出应用程序，请继续阅读。

或者只是坚持逻辑

```
-(void)applicationDidBecomeActive:(UIApplication *)application 
```

并抓住这两种情况。

# asp.net-mvc-3 - 从 ASP MVC 3 中的另一个应用程序获取参数

> ID：10312097
> 
> 赞同：0
> 
> 时间：2012-04-25T08:33:32.887
> 
> 标签：asp.net-mvc-3

我正在开发一个 ASP MVC 3 应用程序，我有一个 div，其中包含来自 Python 应用程序的页面。这个 Python 应用程序执行一个给定的服务，该服务创建一个我想在我的 ASP MVC 应用程序中使用的结果。

我怎样才能得到这个变量。

PS：Python 应用程序在 dalymotion 上上传视频，结果是上传文件的 URL。上传工作正常，但我无法获取 URL。

有任何想法吗 ？

谢谢。

编辑 ：

这就是我从 ASP MVC 应用程序调用 Python 应用程序的方式：

```
function uploadVideo(url, target) {
window.ht = setTimeout(function () {
    var div = document.getElementById(target);
    div.innerHTML = '<iframe frameborder="0" src="' + url + '" />';
}, 20);
} 
```

这是 python 应用程序中的表单：

```
<form method="post" action="{{ upload_url|safe }}" onsubmit="openProgressBar(); return true;" enctype="multipart/form-data" target="uploadframe">
  <input type="file" name="file" />
  <input id="urlEmbedOC2" val="" />
  <input type="submit" name="submit" value="Upload"/>
</form> 
```

我尝试将 url 放在“urlEmbedOC2”输入中，但我无法从 ASP 应用程序访问它。

编辑 ：

我设法这样做：从 Python 应用程序中，我使用重定向到我的 ASP 应用程序中的操作，我将变量放在查询字符串中，然后我可以在我的控制器中访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:36:25.193

您可以让 Python 应用程序通过一个带有 ASP.NET 应用程序可以使用的 URL 的 Web 服务来提供数据。

# c++ - cvSet2D 的有效替代方案？

> ID：10312099
> 
> 赞同：2
> 
> 时间：2012-04-25T08:33:46.867
> 
> 标签：c++, opencv

我正在分析我开发的代码，当我使用 cvSet2D 时，我发现我的代码存在瓶颈。是否有比 cvSet2D 更有效的替代方法？

我怎样才能写出这些像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:45:05.840

我建议您使用 C++ 函数而不是旧的 C 样式函数。

写入像素的最有效方法如下。

```
 cv::Mat frame;

   // load your img to your Mat

   uchar* p = frame.ptr(row); // returns a row pointer
   p[column] = x; // accesses value in the given column 
```

需要注意的一点是，您的列数可能比像素列数多，例如，在 3 通道图像上，您可以访问的实际像素列数是 3 倍。

有关迭代像素的不同方法的更多信息，请查看[本](http://opencv.itseez.com/doc/tutorials/core/how_to_scan_images/how_to_scan_images.html#howtoscanimagesopencv)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:46:33.233

您需要获取指向结构的数据字段的指针。

(C API) IplImage 结构有一个称为数据的 char* 字段。访问`(your_type*)image->data`第一个元素，然后像常规的 C 1D 数组一样使用它，但要小心使用字段 stepWidth 从一行跳转到下一行（因为数据行可能会以 16 位的倍数对齐以进行内存访问优化）。

(C++ API)`T* cv::Mat::ptr<T>(int i)`用于获取指向要访问的行的第一个元素的指针。然后用作常规 C++ 1D 数组。

这应该是更快的访问模式（有关不同访问模式的比较，请参阅 OpenCV2 Cookbook 一书）。

# dns - 多个子域指向同一个文件夹，但保留 url

> ID：10312101
> 
> 赞同：3
> 
> 时间：2012-04-25T08:33:53.620
> 
> 标签：dns, subdomain

是否可以设置两个子域并将它们指向同一个文件夹，但在访问站点时保留 url？

我有域，一个用于企业，一个用于私有，如下所示：

*   私人域名
*   商业.tld

我创建了两个子域，如下所示：

*   dev.private.tld

*   dev.business.tld

    dev = development ：这是我测试新东西的地方，也是我展示/演示完成模块的地方。

因为它们都是我的，所以我只需要一个位置。但是当我分享时，我想给用户一种他们在我的私人或业务开发领域的印象。

所有域都在同一主机上，并且它们都是该帐户的附加域。

有人知道如何让这种情况起作用吗？

编辑#1：只想一件事；当我创建子域时，如果我将它们直接指向同一个文件夹 - 那会奏效吗？*（@work 所以无法测试它知道）*但是想听听你对此的想法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T07:56:52.867

有可能的。

您可以将您的虚拟主机指向您想要的任何地方。

以 NGiNX 为例，使用*服务器*块 [http://wiki.nginx.org/ServerBlockExample](http://wiki.nginx.org/ServerBlockExample)

使用不同的*server_name*的 [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)

和*位置*的

您还可以从反向代理机制中受益：nginx.com/resources/admin-guide/reverse-proxy/（传递标头或即时更改它们等）

# pax-exam - Pax 考试：提供包含所有依赖项的捆绑包

> ID：10312102
> 
> 赞同：1
> 
> 时间：2012-04-25T08:34:04.700
> 
> 标签：pax-exam

目前，要为 Pax Exam 设置配置，我发现我需要包含所有依赖项。例如像

```
@Configuration
public Option[] сonfig() {
    MavenArtifactProvisionOption commonsDbcp = mavenBundle("commons-dbcp",
            "commons-dbcp");
    MavenArtifactProvisionOption commonsPool = mavenBundle("commons-pool",
            "commons-pool");
    ...
    return options(
            felix(),
            provision(commonsDbcp, commonsPool));
} 
```

但是由于`commons-dbcp`依赖`commons-pool`，这感觉就像重复信息。`commons-dbcp`Pax Exam 是否有可能在不明确添加的情况下找出所需的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:34:19.983

并不真地...

*   并非 OSGi 包的每个 Maven 依赖项都是 OSGi 包。
*   依赖项可能只是一个接口，并且在运行时，您希望提供一个实现包。

明确列出所有捆绑包是配置框架的唯一安全方法。至少，您可以使用 versionAsInPom() 选项方法来避免复制工件版本。

# android - onScroll 无法正常工作

> ID：10312103
> 
> 赞同：0
> 
> 时间：2012-04-25T08:34:10.533
> 
> 标签：android

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) {
    // TODO Auto-generated method stub
    Toast.makeText(ViewPage.this, "In" , 1).show();
     if (loading) 
     {
         if (totalItemCount > previousTotal) 
         {
            loading = false;
            previousTotal = totalItemCount;
            currentPage++;
         }
     }
     if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) 
     { 

            for(int i=0;i<5;i++)
            {
                filename[i] = contactcursor.getString(contact_column_index);
                Toast.makeText(ViewPage.this, filename[i] +" "+ contactcursor.getString(contact_column_index) , 1).show();
                contactcursor.moveToNext();

            }

            arr_ad = new ArrayAdapter<String>(ViewPage.this, android.R.layout.simple_list_item_1, filename);

            setListAdapter(arr_ad);
            // I load the next page of gigs using a background task,
            // but you can call any function here.
           // new LoadGigsTask().execute(currentPage + 1);
            loading = true;
            Toast.makeText(ViewPage.this,totalItemCount+" "+visibleItemCount+" "+firstVisibleItem+" "+visibleThreshold+" ", 1).show();
     }
} 
```

这是代码的一部分，其中 onScroll 应该只在 listview 向下滚动时才起作用，但是当活动开始时它会自动工作，因为其中的 toast 被打印出来。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:44:25.890

首先，您不需要在 onScroll 中添加 toast，因为这不是一个好主意。而是使用`Log`.

其次，它会自动调用，因为 Listview 需要在里面填充项目。因此，当 ListView 第一次插入项目时，滚动元素也被更改/更新，导致 onScroll 发生（我猜）。一旦插入所需数量的项目以填充屏幕上可见的 Listview，我认为它不会引发 onScroll。所以这不是一个大问题。

# java - JNI 回调线程

> ID：10312109
> 
> 赞同：1
> 
> 时间：2012-04-25T08:34:41.407
> 
> 标签：java, c, java-native-interface

我有一些调用 jni 层的 java 代码。

JNI 层是第 3 方，所以我无法检查它，但在某些时候它会创建一个新线程并对 java 代码进行回调。

在这个回调方法中，我尝试创建另一个 java 线程并在该线程上调用 start。然而，这个 java 线程永远不会运行。就像它从来不存在一样。

从 JNI 回调创建线程有问题吗？

我可以创建一个具有核心大小的线程池执行器并将任务放在执行器上，但我想知道为什么我不能在回调中创建线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:57:16.437

您需要`AttachCurrentThread()`在回调内部调用任何其他 JNI 方法之前和`DetachCurrentThread()`退出之前。

# ruby-on-rails - 没有数据库和不断更新模型的 Rails 应用程序

> ID：10312115
> 
> 赞同：1
> 
> 时间：2012-04-25T08:35:05.563
> 
> 标签：ruby-on-rails, activerecord, soap

我想知道开发具有以下功能的rails应用程序的最佳方法是什么：

*   所有数据都来自对第 3 方的 SOAP 请求
*   一个后台任务将每 10 秒发出一次这个肥皂请求
*   后台任务将解析​​响应，然后相应地更新 ActiveRecord 模型
*   数据根本不会写入数据库，如果应用程序失败，当我们启动它时，数据将再次来自soap请求
*   用户将向应用程序发出请求，该应用程序将简单地显示模型中的数据（即来自soap 请求）。

这个想法是避免为每个用户发出 SOAP 请求，因为数据不会经常更改。不使用数据库可以避免读取和写入仅来自请求的数据。

我想所有这一切都可以通过一些宝石完全简单地完成，但是我在分类满足我的要求和不满足要求时遇到了一些麻烦。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:53:52.710

如果 WebService 的结果真的没有改变，我会推荐 Rails 缓存机制。在 Rails 应用程序的任何地方，您都可以：

```
Rails.cache.fetch "a_unique_cache_key" do
  ... do your SOAP request and return the result
end 
```

这将只在块内完成一次工作，并在将来从 rails 缓存存储中获取其结果。

缓存存储有多种类型（其中一种是 memcache 存储）。我通常将文件存储用于中等流量站点，但您可以选择另一个： http: [//guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:59:27.513

我不确定在这种情况下使用 ActiveRecord 有什么好处。

也许考虑一些其他类型的 SOAP 调用持久性？

# java - 用于检测诸如“[blablablabla]”之类的正则表达式

> ID：10312116
> 
> 赞同：0
> 
> 时间：2012-04-25T08:35:09.940
> 
> 标签：java, regex

我有一个带有变量的文本，例如`[abcderere]`.
为了检测这些变量，我决定创建以下正则表达式：

```
(\[.+?\]) 
```

它确实适用于类似字符串，`[azerty][qwerty]`但我希望我的正则表达式也能检测类似字符串，`[[azerty]`因为它与模式匹配但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:02:50.363

也许这会有所帮助：

```
(\[[^\[\]]+\])
^ ^^     ^  ^^
| ||     |  ||
| |+-----+  ||
| +---------+|
+------------+ 
```

给定一个字符串，例如`[[azerty]`，它将跳过第一个方括号并匹配`[azerty]`。对于字符串`[[azerty][foobar]]`，它将匹配`[azerty]`和`[foobar]`。[演示在这里](http://regexr.com?30or0)。

# wpf - DataGrid单元内的WPF Stackpanel

> ID：10312120
> 
> 赞同：0
> 
> 时间：2012-04-25T08:35:23.933
> 
> 标签：wpf, wpfdatagrid, wpftoolkit

我有一个 WPF 应用程序，它包含一个窗口，里面有一个 DataGrid。在启动时，DataGrid 是完全空的，它的列是在运行时由代码创建的。

我正在绑定到一个 DataTable。第一列是单个文本字段。我需要每行再显示一个单元格，但作为一个堆栈面板，它本身包含一些用户控件。

实际上，我正在尝试首先插入一个空白列作为我的 StackPanel 的占位符，然后将 StackPanel 从代码插入每个单元格。

不幸的是，由于某些原因，我没有让它运行。我无法将新项目放入单元格。有人可以帮我吗？

最好的祝福，

乔纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:38:22.547

尝试使用 a `DataGridTemplateColumn`，然后您可以在每个单元格中放置一个堆栈面板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:34:12.600

我建议通过 XAML 设计和填充数据网格。

*   YourItems 是您要显示的对象的集合
*   userControlColumn 是您的用户控件的附加列
*   firstColumn 是您的第一个 DataGridTextColumn

    ```
    <DataGrid x:Name="myGrid" ItemsSource="{Binding YourItems}">
        <DataGrid.Columns>
            <DataGridTemplateColumn x:Name="userControlColumn" Header="Column1">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <ns:YourCustomControl/>
                        </StackPanel>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
            <DataGridTextColumn x:Name="firstColumn" Header="Columns2" Binding="{Binding YourDesiredProperty}"/>
        </DataGrid.Columns>
    </DataGrid> 
    ```

# javascript - 在 PhpStorm 中如何更改嵌入式 Javascript 的颜色

> ID：10312123
> 
> 赞同：0
> 
> 时间：2012-04-25T08:35:35.373
> 
> 标签：javascript, settings, coffeescript, background-color, phpstorm

在 PhpStorm 的咖啡脚本文件中，在哪里更改[嵌入式 Javascript的背景颜色？](http://coffeescript.org/#embedded)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:55:49.937

尝试在以下路径更改背景颜色：文件 -> 设置 -> IDE 设置 -> 编辑器 -> 颜色和字体 -> 常规 -> 注入的语言片段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:29:11.603

我们为下一个 PhpStorm 版本[添加了此功能](http://youtrack.jetbrains.com/issue/RUBY-11069)。

# java - 子类化开源库

> ID：10312124
> 
> 赞同：6
> 
> 时间：2012-04-25T08:35:35.543
> 
> 标签：java, maven, open-source, subclass

我正在使用一个大型开源库，需要生成一些类的个人子类。什么是最好的策略？我想保持原始库不变，并且在更新时能够轻松地重新配置。我的代码不太可能值得为该项目做出贡献（尽管我很高兴以允许这样做的方式编写）。

这个问题是一个普遍的问题，但我会用我的例子来说明它。我正在使用[Apache PDFBox](http://pdfbox.apache.org/)，它有一个例程可以写入`java.awt.Graphics2D`. 我已将其替换为 Apache [Batik](http://xmlgraphics.apache.org/batik/)工具包，该工具包提供了 Graphics2D ( `org.apache.batik.svggen.SVGGraphics2D`) 的子类，因此我可以捕获 SVG 表示。我创建一个实例

```
public static org.apache.batik.svggen.SVGGraphics2D createSVG() {
    org.w3c.dom.DOMImplementation domImpl =
    org.apache.batik.dom.GenericDOMImplementation.getDOMImplementation();
        org.w3c.dom.Document document = 
            domImpl.createDocument("http://www.w3.org/2000/svg", "svg", null);
        return new org.apache.batik.svggen.SVGGraphics2D(document);
    } 
```

PDFBox 使用图形的地方是`org.apache.pdfbox.PDFReader`我已经编辑以允许新图形的地方：

```
 protected void showPage(int pageNumber)
{
    try 
    {
        PageDrawer drawer = new PageDrawer();
        PageWrapper wrapper = new PageWrapper( this );
        PDPage page = (PDPage)pages.get(pageNumber);
        wrapper.displayPage( page );
        PDRectangle cropBox = page.findCropBox();
        Dimension drawDimension = cropBox.createDimension();
        svg = PDFPagePanel.createSVG();          // MY EDIT!!!!!!!!!
        drawer.drawPage( svg, page, drawDimension );
        writeSVG(pageNumber);
    }
    catch (IOException exception)
    {
        exception.printStackTrace();
    }
} 
```

我已经让它工作了（这不是问题）。我担心的是，我不得不破解/编辑和重新编译一些分布式 PDFBox 类，只是为了生成和使用子类。我最终在与库相同的包中得到了诸如 PMRPDFReader 之类的类。非常混乱 - 我不记得我在哪里进行了编辑，等等。

我觉得我应该能够按原样使用库并简单地添加/链接我的子类。我使用 maven，所以也许有一种方法可以排除原始类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:27:48.473

如果库没有提供简单的子类钩子，那么你没有太多选择。鉴于他们有一个 git 镜像，我只是分叉它（将您的镜像保存在安全和备份的地方，最好靠近您的正常 SCM）。我通常的策略是将 -companyName 附加到版本号（在 Maven 中），这样我就可以记住它是一个补丁版本。您可以轻松查看所做的编辑，因为它们将在您的修订历史记录中。

您还可以调查使用 maven shade 插件来更改/替换类，但这有点 hackier 恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:32:54.733

这是我将如何做到这一点：

*   创建一个包含源代码更改的单独项目。将其检入源代码/修订控制（SVN、Git，无论您使用什么）。此项目将仅包含您的更改。
*   确保它是一个 Maven 项目。使用与原始开源项目相同的版本号，但在版本中添加一个附录。如果您使用的是*1.2*版本，请创建您的项目以使用*1.2-Peter-1*或类似版本。这样，您将始终知道它基于哪个版本，您还可以提供更改的多个版本/修订。它也不会与官方版本冲突。使用与官方相同的组/工件 ID。
*   将原始项目用作您自己的依赖项。

对于部署，您有两种选择：

*   部署您的 JAR（仅包含您的更改）和原始 JAR，但请确保您的 JAR 在类路径中的第一个。
*   使用 Maven Shade 插件创建一个混合原始类和您自己的类的 jar：[http ://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html](http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html)

# javascript - 如何打印 JavaScript 非对象的所有功能？

> ID：10312126
> 
> 赞同：3
> 
> 时间：2012-04-25T08:35:46.233
> 
> 标签：javascript

如果我有`var foo = 'bar';`，我如何获得所有可调用的函数`foo`，例如`toUpperCase`？它不是一个对象，所以[Object.getOwnPropertyNames(foo)](https://stackoverflow.com/a/2258232/96588)不起作用：

```
$ node
> var foo = 'bar';
undefined
> console.log(Object.getOwnPropertyNames(foo));
TypeError: Object.getOwnPropertyNames called on non-object
    at Function.getOwnPropertyNames (native)
    at repl:1:20
    at REPLServer.eval (repl.js:80:21)
    at repl.js:190:20
    at REPLServer.eval (repl.js:87:5)
    at Interface.<anonymous> (repl.js:182:12)
    at Interface.emit (events.js:67:17)
    at Interface._onLine (readline.js:162:10)
    at Interface._line (readline.js:426:8)
    at Interface._ttyWrite (readline.js:603:14) 
```

[katspaugh 简单、优雅的解决方案](https://stackoverflow.com/a/10312446/96588)：

```
> console.log(Object.getOwnPropertyNames(foo.constructor.prototype));
[ 'constructor',
  'length',
  'toLowerCase',
  ... ]
undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:01:10.913

你想要的方法在`String.prototype`，所有字符串的原型，Valindor 的统治者。

```
Object.getOwnPropertyNames('baz'.constructor.prototype) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:58:23.483

使用可以使用以下：

```
$(document).ready(function () {
    var foo = 'bar';
    var div = '';
    var ob = Object.getOwnPropertyNames(foo.constructor.prototype);
    for (var i = 0; i < ob.length; i++) {
        div += ob[i] + "<br/>";
    }
    $(selector).html(div);
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-25T08:43:45.807

使用日食:)

或者只是看这里：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String)

# javascript - 图像更改时如何调用 jQuery 函数？

> ID：10312127
> 
> 赞同：2
> 
> 时间：2012-04-25T08:35:47.717
> 
> 标签：javascript, jquery, ruby-on-rails-3.1

我有一个包含图像和文字的页面。

用户可以通过模态窗口上传图像。我使用 .js.erb 将页面上的图片替换为用户上传的图片。

```
$('#mailing_body').contents().find("[data-edit-img='<%=escape_javascript(@user_image.location)%>']").attr('src', '<%=escape_javascript(@user_image.image.url(:medium))%>'); 
```

现在我想要一个 jquery 函数在页面上的图像发生变化时触发。

我在我的 js 文件中尝试了以下内容：

```
 $("#mailing_body").contents().find("[data-edit-img='header']").live('change',function(){
      alert('change');
  }); 
```

但它不起作用。我究竟做错了什么？

我正在使用 Ruby 1.9、Rails 3.2.2 jquery1.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:46:54.820

不幸的是， jQuery`Change`仅适用于`INPUT`元素。

您需要做的是创建一个事件处理程序并触发一个触发器。每当上传完成或您希望图像更改时，您都可以使用[jQueries 事件和触发系统](http://api.jquery.com/trigger/)

```
$('#foo').bind('customEvent', function() {
      alert($(this).text());
});

$('#foo').trigger('customEvent'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:40:47.907

Change 是一个事件，只有当它们的值发生变化时才会在输入元素上触发。如果属性发生更改，它不会被触发。你想要的是观察属性变化的东西。这是一个解释如何实现这些事情的链接，基本上它只是使用超时来定期检查属性是否已更改。

[http://darcyclarke.me/development/detect-attribute-changes-with-jquery/](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)

在 IE 中，您可以使用将在这些更改时触发的 propertychange，但这仅适用于 IE。

# jquery - Jquery删除动态创建的可拖动div

> ID：10312131
> 
> 赞同：3
> 
> 时间：2012-04-25T08:36:09.847
> 
> 标签：jquery, html, jquery-ui-draggable

我使用此功能使用按钮动态创建 div

```
var counter = 1;
$("#button1").click(function(){
 $("<div/>", {
   "class": "test" + (counter++),
    text: "",
  }).resizable().draggable()
  .appendTo("body");
}); 
```

我将如何添加另一个按钮以删除这些动态创建的 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:38:20.357

当然，在这种情况下，只需为每个动态添加的元素提供一个通用类`.dynamic`。然后，当按下另一个按钮时，只需删除该类的任何实例。

```
var counter = 1;

$("#button1").click(function(){
 $("<div/>", {
   "class": "dynamic test" + (counter++), // note we're adding a new generic class
    text: "",
  }).resizable().draggable()
  .appendTo("body");
});

$("#button2").click(function(){
 $(".dynamic").remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:42:56.407

```
$("#button1").click(function(){
 $("<div/>", {
   "class": "dynamic test" + (counter++),
    text: "",
  }).append('<div id="button"' + (counter -1) + '">Close</div>').resizable().draggable()
  .appendTo("body");

  $("#button" + (counter -1)).click(function(){
      $(".test" + (counter-1)).remove();
   });
}); 
```

您还可以在每个创建的 div 上附加关闭按钮以关闭该 div

# sql - Heroku - 清理数据库，使用新项目运行迁移

> ID：10312140
> 
> 赞同：1
> 
> 时间：2012-04-25T08:36:51.653
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, heroku, migration

我在 Heroku 上有一个应用程序，需要在那里清理数据库，再次使用新的默认行运行所有（编辑的）迁移（在迁移中将默认行添加到表中）。

我跑了

```
heroku run rake db:reset 
```

此命令清除了数据库，但没有将新行添加到表中。我正在尝试以这种方式添加新行：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      ...columns definitions...

      t.timestamps
    end
  end

  def self.up
    Users.new(:name => 'my name', :password => 'super-secret-pass')
  end
end 
```

但是没有添加新用户。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T08:55:50.557

迁移应具有以下条件之一：

1.  一种`change`方法。
2.  `up`和`down`方法（最好是 3+ 中的实例方法，但类方法也可以）。

你有一个`change`方法*和*一个`self.up`方法。迁移系统[首先](https://github.com/rails/rails/blob/565bfb9cd49285ebaa170141b4996c22ba81de43/activerecord/lib/active_record/migration.rb#L391)[查找`change`](https://github.com/rails/rails/blob/565bfb9cd49285ebaa170141b4996c22ba81de43/activerecord/lib/active_record/migration.rb#L391)：

```
ActiveRecord::Base.connection_pool.with_connection do |conn|
  @connection = conn
  if respond_to?(:change)
    #...
  else
    time = Benchmark.measure { send(direction) }
  end
  @connection = nil
end 
```

所以你`self.up`永远不会跑。

两种解决方案立即出现：

1.  使用单独`up`的和`down`方法。您可能需要查看指南的“[在您的迁移中使用模型”](http://guides.rubyonrails.org/migrations.html#using-models-in-your-migrations)部分。
2.  使用两个单独的迁移：一个用于创建表，另一个用于创建您的用户。

我可能会选择**2**。

# android - 如何在 android 绘图应用程序中添加撤消/重做功能？

> ID：10312143
> 
> 赞同：0
> 
> 时间：2012-04-25T08:36:58.477
> 
> 标签：android

我想为手指画添加撤消和重做功能，有人有想法吗？它适用于 android API 演示的手指画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:51:04.797

您想记录您的绘图步骤，例如每次绘制新路径时使用一个路径数组。当按下撤消按钮时，您将“绘图计数器”减一并重新绘制所有路径，直到您的“绘图计数器”。当你重做时，将你的“绘制计数器”增加一并重新绘制所有路径到计数器（或数组的末尾，自然！）。在撤消并重新绘制之后，从绘制数组中删除后面的条目。

# facebook - Facebook 内嵌音乐播放器

> ID：10312146
> 
> 赞同：0
> 
> 时间：2012-04-25T08:37:07.367
> 
> 标签：facebook, api, streaming

我创建了一个应用程序，允许用户共享歌曲预览及其状态并将其发布到他们的墙上。就在昨天，该帖子将有一个内嵌 Flash 播放器，允许其他人播放它。但是当我今天检查时，内联播放器被删除，歌曲文件成为其他人下载的链接。

facebook 是否删除了内联播放器？或者他们已经改变了他们的音乐流 API？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:07:31.273

可能 FB 已经删除了嵌入式音频播放器。看到这个错误。 [http://developers.facebook.com/bugs/267716143318745](http://developers.facebook.com/bugs/267716143318745)

# c - typedef 的范围

> ID：10312147
> 
> 赞同：9
> 
> 时间：2012-04-25T08:37:09.753
> 
> 标签：c

我不在电脑前，所以目前无法测试，但有一些代码要查看。不幸的是，我仍然在某种程度上处于 C++ 思维框架中。

那么，当在 C 源文件中声明 typedef 时，它的作用域是什么？我知道要使函数和变量仅在同一个翻译单元中可用，您需要将它们设为静态，我想知道这对于 typedefs 是否相同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-25T08:40:36.417

Typedef 是声明。如果您在 C 文件中有 typedef，则其他 C 文件将不会意识到这一点，因为它们是相互独立编译的。

对于标头中的 typedef，它当然会在包含它的所有 C 文件中可见。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T08:40:06.883

`typedef`与 C/C++ 中的常规变量具有相同的范围

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-19T23:47:40.193

这是一个显示 typedef 和范围的示例：

```
typedef int foo_t;

foo_t x = 1;

double bar(double x) {
    typedef double foo_t;
    foo_t y = 2.0;
    return y + 3.14156;
}

foo_t z = 1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T16:18:25.387

我不知道这个复杂句子的含义是什么，但这就是 C 标准如何定义 typedefs 的范围：

> 作为一种特殊情况，类型名称（不是标识符的声明）被认为具有一个范围，该范围紧邻类型名称中出现省略的标识符的位置（如果没有省略）。

PS有人请解释一下。

# java - 使用 JAXB 从 DTD 文件生成 Java 类 - 如何修改 DTD？

> ID：10312159
> 
> 赞同：5
> 
> 时间：2012-04-25T08:37:53.343
> 
> 标签：java, xml, jaxb, dtd

我想使用 JAXB 从 dtd 文件生成 Java 类。

dtd 看起来像这样：

```
<!--Contents-->
    <!ELEMENT persons (header, content) >
    <!ELEMENT groups (header, content) >

<!--Header-->
    <!ELEMENT header (version) >
    <!ELEMENT version(#PCDATA) >

<!--Content-->
    <!ELEMENT content(person, group)* >

<!--Person-->
    <!ELEMENT person(p_id, p_name) >
    <!ELEMENT p_id (#PCDATA) >
    <!ELEMENT p_name (#PCDATA) >    

<!--Group-->
    <!ELEMENT group(g_id) >
    <!ELEMENT g_id(#PCDATA) > 
```

使用 JAXB 生成类时，我得到以下内容：

*   对象工厂
*   内容
*   人
*   人
*   团体
*   团体

在 Content 类中，检索所有人员和组的方法是

```
public List<Object> getPersonOrGroup() {
    if (personOrGroup == null) {
        personOrGroup = new ArrayList<Object>();
    }
    return this.personOrGroup;
} 
```

我可以在 dtd 文件中更改什么，以便 Java 类的生成将在 java 类中进行`persons`和`groups`分隔`Content`，因此检索所有人员和组将分别调用`Content.getPersons()`和调用`Content.getGroups()`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T22:59:08.813

```
xjc -dtd -d generatedsrc -p com.examples log4j.dtd 
```

将在目录 generatedsrc 中生成类，使用的包是 com.examples。

你可以在这里找到更多信息： [http ://www.javaworld.com/community/node/7622](http://www.javaworld.com/community/node/7622)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T12:24:46.430

在他的回答中，mavrav 似乎表明使用 DTD 是不可能的。我不太清楚如何使用DTD。但是，如果可以，请将您的 DTD 转换为 XML 模式。

我试过这个shema：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:hr="http://mycompany.com/schema"
        elementFormDefault="qualified"
        targetNamespace="http://mycompany.com/schema">
    <!-- Contents -->
    <xs:element name="persons">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="header" />
                <xs:element name="content" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element name="groups">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="header" />
                <xs:element name="content" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <!-- Header -->
    <xs:element name="header">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="version" type="xs:string" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <!-- Content -->
    <xs:element name="content">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="person" maxOccurs="unbounded" />
                <xs:element name="group" maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <!-- Person -->
    <xs:element name="person">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="p_id" type="xs:integer" />
                <xs:element name="p_name" type="xs:string" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <!-- Group -->
    <xs:element name="group">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="g_id" type="xs:integer" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

在我使用以下 cmd 生成 Java 类之后：

```
xjc -p com.mypackage schema.xsd 
```

它为我提供了 Content 类的以下代码：

```
@XmlRootElement(name = "content")
public class Content {

    @XmlElement(required = true)
    protected List<Object> person;
    @XmlElement(required = true)
    protected List<Object> group;

    public List<Object> getPerson() {
        if (person == null) {
            person = new ArrayList<Object>();
        }
        return this.person;
    }

    public List<Object> getGroup() {
        if (group == null) {
            group = new ArrayList<Object>();
        }
        return this.group;
    }
} 
```

# android - 在网格视图中显示图像的最佳方式是平滑滚动

> ID：10312167
> 
> 赞同：5
> 
> 时间：2012-04-25T08:38:09.393
> 
> 标签：android, performance, bitmap

首先，我已经做了一些事情来在gridview中显示图像，使滚动时平滑

**1.在后台线程从互联网加载图像**

```
AsyncTask acyncTask ;
HandlerThread handlerThread ;

 URL imageUrl = new URL(link);<br>
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            final Bitmap bitmap = BitmapFactory.decodeStream(is); 
```

**2.将位图制作成样本大小以节省内存**

```
final BitmapFactory.Options option = new BitmapFactory.Options();
    option.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(mFile.getPath(),
            option);
    option.inSampleSize = calculateInSampleSize(option , mSize , mSize);
    option.inJustDecodeBounds = false;
    option.inPurgeable = true ;
    option.inDither = false ;
    option.inScaled = false ;
    option.inPreferredConfig = Bitmap.Config.ARGB_8888; 
```

**3.做缓存保存解码的位图**

```
LruCache lruCache = new LruCache<String , Bitmap>(); 
```

在`baseadapter getView();` 我将`lruCache.get(key)`采取解码的位图

**4.通过handler解码位图时的延迟加载**

```
 Handler handler = new Handler();
        handler.post(new Runnable(){
           public void run(){
              imageView.setimageBitmap(bitmap);
          }
      }); 
```

现在我面临一个大问题，当我滚动时它仍然有点滞后我有谷歌关于可以使**滚动更好**的东西，不知道真的有什么可以改进或者问题出在我检查每个的地方getView() 只花了我大约**2~6 毫秒**，它会调用我的代码来**异步加载图像表单工作线程**，所以我真的不知道为什么**有些应用程序可以加载非常流畅**？我的情况是**滚动**屏幕时看起来不太流畅，是否可以应用一些建议？

编辑：当我滚动时，在缓存中找到的位图并显示在屏幕上，如果我快速滚动，它看起来就像没有足够的滚动来显示图像，它会使我的滚动不太流畅，即使我有缓存下来缓存中的位图

这是适配器代码：

```
if (convertView == null) {
        convertView = layoutInflater.inflate(
                R.layout.row_display_image_grid, null);
        viewHolder = new DisplayImageGridViewHolder();
        viewHolder.background = (RelativeLayout) convertView
                .findViewById(R.id.background);
        viewHolder.image = (ImageView) convertView.findViewById(R.id.image);
        viewHolder.text = (TextView) convertView.findViewById(R.id.text);
        viewHolder.position = position;
        viewHolder.text.setEllipsize(TruncateAt.END);
        viewHolder.text.setTypeface(typeFace);
        viewHolder.image.setOnClickListener(this);
        viewHolder.image.setOnLongClickListener(this);
        convertView.setTag(viewHolder);
    } else {
        viewHolder = (DisplayImageGridViewHolder) convertView.getTag();
    }

viewHolder.position = position;
imageLoader.loadImage(imageLinkList.get(position), viewHolder.image);
return convertView; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:23:15.570

下面是我使用的 LazyLoader 的示例。注意我正在为位图使用 SoftReferences，现在使用`LruCache`.

这将从 web / sdcard / memory 异步加载图像，并从占位符图像创建淡入效果。

```
public class ImageLoader {

private static MemoryCacheNew memoryCache=new MemoryCacheNew();
private static FileCache fileCache;

private static BitmapFactory.Options bitmapOptions;

private static int mInSampleSize;

public ImageLoader(Context context, int inSampleSize){

    fileCache=new FileCache(context);        

    context = null;

    bitmapOptions = new BitmapFactory.Options();
    bitmapOptions.inSampleSize = mInSampleSize = inSampleSize;
    bitmapOptions.inPreferredConfig = Config.RGB_565;
    bitmapOptions.inInputShareable = true;
    bitmapOptions.inDither = false;

}

final static int PLACEHOLDER_IMAGE = R.drawable.store_placeholder;

public void DisplayImage(String url, ImageView imageView,  boolean checkTags){

    try{

    new AsyncPhotoTask(imageView, url, checkTags).execute();

    }catch(Exception e){
        e.printStackTrace();
    }

}

public void DisplayImage(String url, ImageView imageView)
{
      DisplayImage(url, imageView, true); 

}

private static Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    if(f!= null){
    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;
    }

    //from web
    try {
        Bitmap bitmap=null;

        URL imageUrl;

            imageUrl = new URL(url);

        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        is.close();
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex){
       ex.printStackTrace();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private static Bitmap decodeFile(File f){
    try {
        return BitmapFactory.decodeStream(new FileInputStream(f), null, bitmapOptions);

    } catch (FileNotFoundException e) {

    } catch (OutOfMemoryError err){
        System.gc();
    } 

    return null;
}

private static class AsyncPhotoLoad extends AsyncTask<Void, Void, TransitionDrawable>{

    private Bitmap bmp;
    private ImageView imageView;
    private String url;
    private boolean checkTags;

    public AsyncPhotoLoad(ImageView imageView, String url, boolean checkTags
            ){
        this.imageView = imageView;
        this.url = url;
        this.checkTags = checkTags;
    }

    @Override
    protected TransitionDrawable doInBackground(Void... arg0) {

        //check that this is the correct imageview

        TransitionDrawable transition = null;

        try{
            if(checkTags){
            String tag = (String)imageView.getTag();    
            if(!tag.equals(url))
                return null;
            }

        bmp = getBitmap(url);

        if(bmp != null){
            memoryCache.put(url, bmp, mInSampleSize);    

            Drawable oldDrawable = imageView.getDrawable();

            if(!(oldDrawable instanceof TransitionDrawable)){

                Drawable layers[] = new Drawable[2];                    
                layers[0] = imageView.getDrawable();
                layers[1] = new BitmapDrawable(bmp);

               transition = new TransitionDrawable(layers);

            }

        }

        }catch(Exception e){
            e.printStackTrace();
        }

        return transition;
    }

    @Override
    protected void onPostExecute(TransitionDrawable result) {
        if(result != null){
            try{            
                if(checkTags){                      
                        String tag = (String)imageView.getTag();    
                        if(!tag.equals(url)){
                            return;
                        }
                }

                   imageView.setImageDrawable(result);
                   result.startTransition(300);

            } catch(Exception e){
                e.printStackTrace();
            }
        } else {
            if(checkTags){
            try{
                String tag = (String)imageView.getTag();    
                if(!tag.equals(url))
                    return;

            }catch(Exception e){
                e.printStackTrace();
            }
            }

        }
    }

}

private static class AsyncPhotoTask extends AsyncTask<Void, Void, Bitmap>{

    private ImageView imageView;
    private String url;
    private boolean checkTags;

    public AsyncPhotoTask(ImageView imageView, String url, boolean checkTags){

        this.imageView = imageView;
        this.url = url;
        this.checkTags = checkTags;
    } 

    @Override
    protected Bitmap doInBackground(Void... params) {
        try{
        if(checkTags)
            imageView.setTag(url);  

        }catch(Exception e){
            e.printStackTrace();
        }

        return memoryCache.get(url, mInSampleSize);
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        try{
        if(result!=null && !result.isRecycled()){

            imageView.setImageBitmap(result);   
        }
        else
        {   

            imageView.setImageResource(PLACEHOLDER_IMAGE);            
            new AsyncPhotoLoad(imageView, url, checkTags).execute();      

        }    

        }catch(Exception e){
            e.printStackTrace();
        }
    }

}

public static void clearCache() {
    memoryCache.clear();
    fileCache.clear();
}

public static void clearMemory(){
    memoryCache.clear();
}

public static class MemoryCacheNew {
    private HashMap<String, CachedBitmap> cache=new HashMap<String, CachedBitmap>();

    public Bitmap get(String id, int sampleSize){
        if(!cache.containsKey(id))
            return null;

        if(cache.get(id) == null)
            return null;

        if(cache.get(id).sampleSize != sampleSize)
            return null;

        SoftReference<Bitmap> ref = cache.get(id).softBitmap;
        return ref.get();
    }

    public void put(String id, Bitmap bitmap, int sampleSize){
        cache.put(id, new CachedBitmap(bitmap, sampleSize));
    }

    public void clear() {
        cache.clear();
    }

    private static class CachedBitmap {
        public SoftReference<Bitmap> softBitmap;
        public int sampleSize;

        public CachedBitmap(Bitmap bitmap, int sampleSize){
            this.softBitmap = new SoftReference<Bitmap>(bitmap);
            this.sampleSize = sampleSize;
        }
    }
}

}

public class FileCache {

private File cacheDir;

public FileCache(Context context){
    //Find the dir to save cached images
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir=new File(context.getExternalCacheDir(),Consts.STORE_CACHE);
    else
        cacheDir=context.getCacheDir();
    if(!cacheDir.exists())
        cacheDir.mkdirs();
}

public File getFile(String url){
    //I identify images by hashcode. Not a perfect solution, good for the demo.
    String filename=String.valueOf(url.hashCode());
    File f = new File(cacheDir, filename);
    return f;

}

public void clear(){
    File[] files=cacheDir.listFiles();
    for(File f:files)
        f.delete();
}

} 
```

你这样称呼它：

```
imageLoader.DisplayImage(url, holder.image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T14:21:55.403

尝试确保每个位图的大小都是最佳的……它们应该与容器的大小差不多。在通过 RemoteViews 发送它们之前，尽可能地缩小它们。您可以使用 onAppWidgetOptionsChanged 计算小部件大小。

此外，尝试使用 setImageViewUri（带有内容提供程序）而不是 setImageViewBitmap 以获得最佳性能。

# java - 如何实现@RequestMapping 自定义属性

> ID：10312177
> 
> 赞同：20
> 
> 时间：2012-04-25T08:38:37.710
> 
> 标签：java, spring, servlets, spring-mvc

以子**域映射****为例**。

 **本文：[在 Google App Engine 上为同一应用程序管理多个域和子域](http://techsravi.blogspot.com/2011/05/managing-multiple-domain-and-sub-domain.html) 建议在过滤器上解析子域并将变量分配给 ServletRequest 标头。

然后映射将如下所示：

```
@RequestMapping(value = "/path", headers="subdomain=www")
 public String subsiteIndexPage(Model model,HttpServletRequest request) { ... } 
```

如果我们想创建自定义 @RequestMapping 属性，例如子域，例如。像这样创建映射：

```
@RequestMapping(value = "/some/action", subdomain = "www")
public String handlerFunction(){ ... } 
```

我们应该用我们自己的实现覆盖`@RequestMapping @interface`定义并**覆盖受保护的 RequestMappingHandlerMapping**
方法 （如 JIRA 中所述：“[允许自定义请求映射条件 SPR-7812](https://jira.springsource.org/browse/SPR-7812) ”）。

这样对吗？任何人都可以提供提示，如何实现此功能？

* * *

**想法1**：
正如原始jira线程所建议的那样，是创建自己的实现`RequestCondition`

github上有一个使用此解决方案的项目：[https ://github.com/rstoyanchev/spring-mvc-31-demo/](https://github.com/rstoyanchev/spring-mvc-31-demo/)

以及相关的 SO 问题：[在 Spring mvc 3.1 中添加自定义请求条件](https://stackoverflow.com/questions/10073695/adding-custom-requestconditions-in-spring-mvc-3-1)

`@Subdomain("www")`也许像类型和方法这样的映射，是可能的解决方案吗？

* * *

[链接到 forum.springsource.com 上的相同问题](http://forum.springsource.org/showthread.php?125780-RequestMapping-custom-properties&p=410574)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-26T15:40:41.923

我创建了基于引用[spring-mvc-31-demo 的解决方案](https://github.com/rstoyanchev/spring-mvc-31-demo/)

> 到目前为止，此解决方案仅可用于映射单个 RequestCondition。我创建了两个要通知的问题，应该更改：
> [https ://github.com/rstoyanchev/spring-mvc-31-demo/issues/5](https://github.com/rstoyanchev/spring-mvc-31-demo/issues/5)
> [https://jira.springsource.org/browse/SPR-9350](https://jira.springsource.org/browse/SPR-9350)

**此解决方案使用 Spring 3.1.1.RELEASE 平台的自定义 @RequestCondition 功能**

**用法**

示例 1：

```
@Controller
@SubdomainMapping(value = "subdomain", tld = ".mydomain.com")
class MyController1 {
    // Code here will be executed only on address match:
    // subdomain.mydomain.com
} 
```

示例 2：

```
@Controller
class MyController2 {

    @RequestMapping("/index.html")
    @SubdomainMapping("www")
    public function index_www(Map<Object, String> map){
        // on www.domain.com
        // where ".domain.com" is defined in SubdomainMapping.java
    }

    @RequestMapping("/index.html")
    @SubdomainMapping("custom")
    public function index_custom(Map<Object, String> map){
        // on custom.domain.com
        // where ".domain.com" is defined in SubdomainMapping.java
    }
} 
```

我们需要三个文件

*   子域映射.java
*   SubdomainRequestCondition.java
*   SubdomainRequestMappingHandlerMapping.java

**子域映射.java**

```
import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
public @interface SubdomainMapping {

    /**
    * This param defines single or multiple subdomain
    * Where the Method/Type is valid to be called
    */
    String[] value() default {};
    /**
    * This param defines site domain and tld
    * It's important to put the leading dot
    * Not an array, so cannot be used for mapping multiple domains/tld
    */
    String tld() default ".custom.tld";
} 
```

**SubdomainRequestCondition.java**

```
import java.net.URL;
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.HashSet;
import java.util.LinkedHashSet;
import java.util.Set;

import javax.servlet.http.HttpServletRequest;

import org.springframework.web.servlet.mvc.condition.RequestCondition;

public class SubdomainRequestCondition implements
        RequestCondition<SubdomainRequestCondition> {

    private final Set<String> subdomains;
    private final String tld;

    public SubdomainRequestCondition(String tld, String... subdomains) {
        this(tld, Arrays.asList(subdomains));
    }

    public SubdomainRequestCondition(String tld, Collection<String> subdomains) {
        this.subdomains = Collections.unmodifiableSet(new HashSet<String>(
                subdomains));
        this.tld = tld;
    }

    @Override
    public SubdomainRequestCondition combine(SubdomainRequestCondition other) {
        Set<String> allRoles = new LinkedHashSet<String>(this.subdomains);
        allRoles.addAll(other.subdomains);
        return new SubdomainRequestCondition(tld, allRoles);
    }

    @Override
    public SubdomainRequestCondition getMatchingCondition(
            HttpServletRequest request) {
        try {
            URL uri = new URL(request.getRequestURL().toString());
            String[] parts = uri.getHost().split(this.tld);
            if (parts.length == 1) {
                for (String s : this.subdomains) {
                    if (s.equalsIgnoreCase(parts[0])) {
                        return this;
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace(System.err);
        }
        return null;
    }

    @Override
    public int compareTo(SubdomainRequestCondition other,
            HttpServletRequest request) {
        return org.apache.commons.collections.CollectionUtils.removeAll(other.subdomains, this.subdomains).size();
    }

} 
```

**SubdomainRequestMappingHandlerMapping.java**

```
import java.lang.reflect.Method;

import org.springframework.core.annotation.AnnotationUtils;
import org.springframework.web.servlet.mvc.condition.RequestCondition;
import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;

public class CustomRequestMappingHandlerMapping extends
        RequestMappingHandlerMapping {

    @Override
    protected RequestCondition<?> getCustomTypeCondition(Class<?> handlerType) {
        SubdomainMapping typeAnnotation = AnnotationUtils.findAnnotation(
                handlerType, SubdomainMapping.class);
        return createCondition(typeAnnotation);
    }

    @Override
    protected RequestCondition<?> getCustomMethodCondition(Method method) {
        SubdomainMapping methodAnnotation = AnnotationUtils.findAnnotation(
                method, SubdomainMapping.class);
        return createCondition(methodAnnotation);
    }

    private RequestCondition<?> createCondition(SubdomainMapping accessMapping) {
        return (accessMapping != null) ? new SubdomainRequestCondition(
                accessMapping.tld(), accessMapping.value()) : null;
    }

} 
```

**安装**

> 重要提示：到目前为止，无法将此解决方案与 XML 元素
> **<mvc:annotation-driven />**一起使用，请参阅 JIRA [https://jira.springsource.org/browse/SPR-9344](https://jira.springsource.org/browse/SPR-9344)了解说明

*   您必须注册自定义 MappingHandler bean，指向这个自定义实现`SubdomainRequestMappingHandlerMapping`类
*   您必须将其顺序设置为低于默认值`RequestMappingHandlerMapping`
    **或**
    替换已注册的`RequestMappingHandlerMapping`（可能在 order=0 上）

**有关实施此解决方案的更广泛说明，请参阅相关的 github 项目**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:00:58.163

这是正确的，但这太复杂了。您最好检查`Host`标题，它是否包含给定的子域。

但是你不应该真的需要超过一次或两次，所以你也可以在方法体中手动完成。如果你真的在很多地方都需要它，那将是一个奇怪的要求。**

# node.js - node.js 是否准备好用于中/大型企业 Web 应用程序？

> ID：10312180
> 
> 赞同：4
> 
> 时间：2012-04-25T08:38:53.340
> 
> 标签：node.js, symfony, express

我致力于研究用于热线的中型 Web 应用程序的开发。所以我有实时、并发访问、大数据模型和 CTI 约束。

最初我是一名 php 和 Java EE 开发人员，但像我们许多人一样，我已经阅读了很多关于 node.js 的新闻，并且我用小应用程序对其进行了测试。node.js 的可能性很棒，但我觉得仅在中/大型 Web 应用程序中使用该技术非常困难。与 symfony、play 或 ROR 等生产性框架相比，express 等框架确实是极简的。此外，node.js 生态系统发展非常快，可能难以维护。

我对nodejs的经验不够，所以我想知道；是否只选择 node.js 来开发具有一些实时问题的中型/大型企业 Web 应用程序是否疯狂？您不认为仅针对特定功能（实时）将生产性框架与 nodejs 耦合是更好的方法吗？

谢谢，问候埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:43:45.497

在问题结束之前，我将快速回答这个问题，因为只能通过意见而不是事实来回答。

所以，我将用我的观点来回答；）

我认为 node.js 目前的重点是构建响应速度非常快的小东西。我感觉到节点社区对“过于复杂的抽象”有很多反对意见。（我可能误读了社区，但我不这么认为）。

对我来说，构建一个商业应用程序（例如：我过去的一些 Rails 项目已经用了 10 多个人*年*）的努力。

除非有什么变化（例如，当他们的代码库变得太大时，节点社区会遇到问题）并用它做小事）等等......不是为了构建一个完整的大型业务工作流应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T17:20:03.707

我正在开发一个需要一些实时交互的大型实时业务 Web 应用程序，我们正在做的是使用 django 来处理几乎所有事情，并使用 now.js 库处理实时内容。最初我们计划在所有事情上都使用 node.js，但为了缓解一些时间限制，我们决定使用 django 会更快。

自从我们开始以来，我们注意到的一件事是有很多变化，其中一些变化破坏了我们所做的事情。在大多数情况下，跟上变化并没有真正使维护变得困难，但是它使遵循教程等变得困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T02:05:07.800

现在是 2016 年。最近我决定使用 Sails / Node 而不是 CakePHP。今天我决定回到 CakePHP。幸运的是，我只编写了一个小模块（有点像在数据库中索引一些文件系统内容）。回调和承诺的数量这对我来说很烦人。获取文件元数据的简单任务，在 Postgres 上搜索它，仅在它不存在时创建记录，花费我 20 多行代码，我几乎要喝一瓶 Dramamine 哈哈

这一次我下定决心要保持一个极端层的分离。所以我的前端是完全静态的 html/js/css，用 Angular 编码。Postgres DB 也不需要任何更改。而且 CakePHP 3 几乎已经准备好轻松地提供 json/xml 服务。

也有可能是我有点愚蠢……哈哈

# php - PHP - 显示输出而不切断文字

> ID：10312187
> 
> 赞同：1
> 
> 时间：2012-04-25T08:39:22.180
> 
> 标签：php, split, word, word-wrap

我有一个搜索结果，它在截断完整字符串时严格计算 SEARCH TERM 前后的字符数。不幸的是，这会导致输出切断中间的单词。（......计数前后都有一个椭圆）

我试图让搜索结果仅在空白处与单词中间截断完整的字符串。

这是功能：

```
private function _highlight_results(){

    $GLOBALS['_SEARCH_SUMMARY_LENGTH'] = 24;

    foreach($this->results as $url => &$this_result){
        if(!$this_result['url_display'] && $this_result['url']){
            $this_result['url_display'] = $this_result['url'];
        }
        foreach($this_result['search_term'] as $search_term){
            $search_term = preg_quote($search_term,'/');

            foreach(array('title','summary','url_display') as $highlight_item){
                if($this_result[$highlight_item] && preg_match('/'.$search_term.'/i',$this_result[$highlight_item])){
                    if($highlight_item != 'url_display' && strlen($this_result[$highlight_item]) > $GLOBALS['_SEARCH_SUMMARY_LENGTH']){
                        $boobs = ceil(($GLOBALS['_SEARCH_SUMMARY_LENGTH']-strlen($this->_search_term))/2);
                        preg_match('/(.{0,'.$boobs.'})('.$search_term.')(.{0,'.$boobs.'})/i',$this_result[$highlight_item],$matches);
                        // want to even out the strings a bit so if highlighted term is at end of string, put more characters infront.
                        $before_limit = $after_limit = ($boobs - 2);
                        if(strlen($matches[1])>=$before_limit && strlen($matches[3])>=$after_limit){
                            // leave limit alone.
                        }else if(strlen($matches[1])<$before_limit){
                            $after_limit += $before_limit - strlen($matches[1]);
                            $before_limit = strlen($matches[1]);
                            preg_match('/(.{0,'.($before_limit+2).'})('.$search_term.')(.{0,'.($after_limit+2).'})/i',$this_result[$highlight_item],$matches);
                        }else if(strlen($matches[3])<$after_limit){
                            $before_limit += $after_limit - strlen($matches[3]);
                            $after_limit = strlen($matches[3]);
                            preg_match('/(.{0,'.($before_limit+2).'})('.$search_term.')(.{0,'.($after_limit+2).'})/i',$this_result[$highlight_item],$matches);
                        }
                        $this_result[$highlight_item] = (strlen($matches[1])>$before_limit) ? '...'.substr($matches[1],-$before_limit) : $matches[1];
                        $this_result[$highlight_item] .= $matches[2];
                        $this_result[$highlight_item] .= (strlen($matches[3])>$after_limit) ? substr($matches[3],0,$after_limit).'...' : $matches[3];

                    }

                }else if(strlen($this_result[$highlight_item]) > $GLOBALS['_SEARCH_SUMMARY_LENGTH']){
                    $this_result[$highlight_item] = substr($this_result[$highlight_item],0,$GLOBALS['_SEARCH_SUMMARY_LENGTH']).'...';
                }
            }
        }

        foreach($this_result['search_term'] as $search_term){
            $search_term = preg_quote($search_term,'/');

            foreach(array('title','summary','url_display') as $highlight_item){
                $this_result[$highlight_item] = preg_replace('/'.$search_term.'/i','<span id="phpsearch_resultHighlight">$0</span>',$this_result[$highlight_item]);
            }
        }
    }
} 
```

这就是我的想法......在显示字符串输出之前，脚本应该使用“查找”椭圆和立即字符的函数循环字符串，然后在之后删除字符并继续循环直到出现空格成立。然后，下一个循环将“查找”一个字符，然后是一个椭圆，然后删除该字符并继续循环，直到在椭圆之前找到一个空格。

这是我上面描述的一些非常可悲的伪代码：

```
WHILE (not the end of the string) {
 // NOT SURE IF I NEED A FOREACH LOOP HERE TO CHECK EACH CHAR
    IF ( ^ ('...' and an immediate char are found) ) {
           delete chars until a white space is found;

            // if '...' is deleted along with the chars, then put the '...' back in:
            //string .= '...' . string;
    }
    IF ( $ (a char and an immediate '...' are found) ) {
           delete chars until a white space is found;

            // if '...' is deleted along with the chars, then put the '...' back in:
            //string .= string . '...';
    }
}
PRINT string; 
```

我认为您可以从上面的内容中了解我在寻找什么。我已经研究并测试了 wordwrap() 但仍然没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:59:05.037

这是一种应该可以正常工作并且性能也很好的方法。唯一的缺点是它只在空格上打断单词，而且这不能轻易解决，因为没有`strrspn`可以补充的功能[`strspn`](http://php.net/manual/en/function.strspn.php)（但可以很容易地编写并用于扩展此解决方案）。

```
function display_short($str, $limit, $ellipsis = '...') {
    // if all of it fits there's nothing to do
    if (strlen($str) <= $limit) {
        return $str;
    }

    // $ellipsis will count towards $limit
    $limit -= strlen($ellipsis);

    // find the last space ("word boundary")
    $pos = strrpos($str, ' ', $limit - strlen($str));

    // if none found, prefer breaking into the middle of
    // "the" word instead of just giving up
    if ($pos === false) {
        $pos = $limit;
    }

    return substr($str, 0, $pos).$ellipsis;
} 
```

测试：

```
$string = "the quick brown fox jumps over the lazy dog";
for($limit = 10; $limit <= strlen($string); $limit += 10) {
    print_r(display_short($string, $limit));
} 
```

**[看到它在行动](http://ideone.com/uA6r6)**。

# date - 如何在 SINGLE DATE CLICK 上生成两个网格视图

> ID：10312191
> 
> 赞同：-1
> 
> 时间：2012-04-25T08:39:59.740
> 
> 标签：date, gridview

是否可以在 SINGLE DATE CLICK 上生成两个网格视图。如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:50:02.947

如果您使用的是 ASP.NET。添加到 gridviews 两个您的页面在代码隐藏事件处理程序中为日期单击设置它们的属性可见 =“false”，通过设置它们的数据源来填充网格视图，调用它们的数据绑定方法并设置它们的属性可见 = true。

# scala - 是否可以从 scala 脚本中使用 scalap？

> ID：10312195
> 
> 赞同：6
> 
> 时间：2012-04-25T08:40:16.783
> 
> 标签：scala, reflection, case-class, scalap

我`scalap`用来读出一些案例类的字段名称（如[本问题](https://stackoverflow.com/q/2224251/109942)所述）。案例类和`scalap`用于分析它们的代码都已编译并放入类路径上的 jar 文件中。

现在我想运行一个使用此代码的脚本，所以我按照[说明操作](http://www.scala-lang.org/docu/files/tools/scala.html)并想出了类似的东西

```
::#!
@echo off
call scala -classpath *;./libs/* %0 %*
goto :eof
::!#
//Code relying on pre-compiled code that uses scalap 
```

这不起作用：

> java.lang.ClassCastException: scala.None$ 不能在 scala.tools.nsc.interpreter.ByteCode$.caseParamNamesForPath(ByteCode.scala:45) 在 scala.tools.nsc.interpreter.ProductCompletion.caseNames( ProductCompletion.scala:22)

但是，当我编译所有内容时，代码工作得很好。我尝试了其他`scala`选项，例如`-savecompiled`，但这没有帮助。这是一个错误，还是原则上不能工作？（如果是这样，有人可以解释为什么不这样做吗？正如我所说，要分析的案例类`scalap`是编译的。）

*注意：我使用 Scala 2.9.1-1。*

**编辑**

这是我本质上想要做的（提供一种创建案例类的多个实例的简单方法）：

```
//This is pre-compiled:
import scala.tools.nsc.interpreter.ProductCompletion
//...
trait MyFactoryTrait[T <: MyFactoryTrait[T] with Product] {
  this: T =>

  private[this] val copyMethod = this.getClass.getMethods.find(x => x.getName == "copy").get

  lazy val productCompletion = new ProductCompletion(this)

  /** The names of all specified fields. */
  lazy val fieldNames = productCompletion.caseNames //<- provokes the exception (see above)

  def createSeq(...):Seq[T] = {
    val x = fieldNames map { ... } // <- this method uses the fieldNames value
    //[...] invoke copyMethod to create instances
  }   
 // ...
}

//This is pre-compiled too: 
case class MyCaseClass(x: Int = 0, y: Int = 0) extends MyFactoryTrait[MyCaseClass]

//This should be interpreted (but crashes):
val seq = MyCaseClass().createSeq(...) 
```

*注意：我继续使用 Scala 2.9.2，错误保持不变（所以可能不是错误）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:31:09.003

这是编译器中的一个错误：

*   如果您在 ide 中运行程序，例如 Intellij IDEA，则代码可以正常执行，但是找不到字段名称。
*   如果您使用 scala 从命令行运行它，则会收到您提到的错误。

类型安全不可能编译并抛出运行时 ClassCastException。

[请在https://issues.scala-lang.org/secure/Dashboard.jspa](https://issues.scala-lang.org/secure/Dashboard.jspa)打开一个错误

# iphone - iAds 有时在应用程序中显示为白框？

> ID：10312196
> 
> 赞同：0
> 
> 时间：2012-04-25T08:40:21.040
> 
> 标签：iphone, objective-c, iad

所以，我有一个需要互联网的应用程序，并且一开始，如果用户没有互联网功能，该应用程序会显示一个带有错误警报的空白屏幕。因此，iAd 应该始终出现，因为使用该应用程序的用户应该始终具有 Internet 功能，否则视图不会加载。但有时，当我测试应用程序时，每 4-5 次 iAd 中就有一个会以白盒的形式出现。有时，在应用程序的中间，当我将 iAd 移动到不同的位置时，它也会变成一个白框。我实际上对此并没有太大的问题，但我想知道这种奇怪的行为是否会让我的应用程序被拒绝。

注意：我已经包含了方法：

```
-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error{
    if (self.bannerIsVisible) {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0, -50);
        [UIView commitAnimations];
        self.bannerIsVisible = NO; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:13:10.497

如果未成功加载，您的方法会将 iAd 横幅向上移动 50 像素。因此，如果您的横幅最初放置在屏幕底部，它只会向上移动（在未成功加载时） - 因此它仍然可见（作为一个白框）。

您最好为加载/卸载的横幅提供固定位置。

请参阅 xcode 4.3 上已接受的答案[- 故事板 - iAd 不断发展](https://stackoverflow.com/questions/9820872/xcode-4-3-storyboard-iad-keeps-moving/9821394#9821394)

# web-services - 用于验证参数、REST 还是其他的 Web 服务 API？

> ID：10312201
> 
> 赞同：1
> 
> 时间：2012-04-25T08:40:49.060
> 
> 标签：web-services, api, rest

我打算制作一个 API（作为 Web 服务）来验证用户输入。

API 从用户那里获取 3 个参数作为输入，检查所有参数是否有效，然后将结果（例如：真或假）返回给用户。

这是 API 的粗略草图（我怀疑这是 RESTful）：

```
URL: http://my.domain.com/validate/v1 (POST)
Required parameter: param1, param2, param3
Result: To response body (XML/JSON) or response header (HTTP status) 
```

但是在谷歌搜索 API 设计和 REST 之后，我发现这个 API 设计有问题。

根据[Wikipedia](http://en.wikipedia.org/wiki/Representational_state_transfer)，请求和响应是围绕**资源**表示的传输构建的。但我正在制作的 API 与资源无关。它不会 CRUD 任何资源。API 所做的只是接受输入、验证它们并返回结果。而且我一直坚持按照这个要求设计 API。

欢迎对此问题提出任何建议/更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:52:56.247

你是对的，你的问题更适合 RPC 风格，但它仍然可以很容易地映射到 REST。这是我的做法：

POST 方法在 REST 中经常用于创建新资源。这个新资源的表示被发布到一个表示相同类型资源集合的 URL。如果操作成功，则返回 HTTP 状态代码“201 Created”以及 repose 正文中的表示（与 post 中发送的消息正文基本相同）。返回的 Content-Location 标头显示分配给新资源的 URL。如果操作失败，则会在消息正文中显示“400 Bad Request”状态代码和更详细的人类可读错误描述。

如您所见，验证已经成为这种常见 REST 模式的一部分。据我了解，您的唯一区别是您不想在服务器上创建（记住）此资源。所以不要。REST 并没有说你必须。如果您发现它更容易，想象一下资源确实是临时创建的，但之后立即被删除。如果参数通过验证，则返回状态码“200 OK”，并在消息体中返回参数。否则返回“400 Bad Request”。

如果动词“验证”在 URL 中打扰您（它不应该），请将 URL 命名为其他名称，也许是由三个参数组成的对象的合适名称。

希望这可以帮助

Ferenc Mihaly [http://theamiableapi.com](http://theamiableapi.com)

# python - 计算图的退化？

> ID：10312204
> 
> 赞同：3
> 
> 时间：2012-04-25T08:41:29.090
> 
> 标签：python, graph

我正在寻找一种方法来计算给定图的退化。维基[百科文章](http://en.wikipedia.org/wiki/Degeneracy_%28graph_theory%29)概述了一种方法，但它也存储了简并排序，我想我几周前在网上的某个地方看到了一个更简单的算法，但现在找不到了。如果我对存储图的简并排序不感兴趣，我想知道是否有更有效的方法来计算图的简并？

如果重要的话，我正在使用 networkx 和 Python。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:09:56.790

NetworkX 有 Batagelj 和 Zaversnik 的 O(m) 核心算法，我认为您可以将其用于您的目的 `degeneracy(G) = max(networkx.core_number(G).values())`： [http://networkx.lanl.gov/reference/algorithms.core.html](http://networkx.lanl.gov/reference/algorithms.core.html)

# java - 带有记录表的 Java 调用 PL/SQL 过程

> ID：10312213
> 
> 赞同：1
> 
> 时间：2012-04-25T08:42:21.020
> 
> 标签：java, plsql

我在 PL/SQL 包中定义了记录类型和过程（作为 IN 参数接收记录表）如何在 Java 代码中调用此过程？

避免这种类型的 IN 参数会更好吗？也许是参考光标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:37:35.847

通常的做法是使用临时表。

0 必要时关闭自动提交（默认关闭）

1 用一些值填充一个临时表。

2 调用您的程序。从临时表中读取值。（IN参数中没有记录）

3 提交

```
//A function to put a value in temporary table
public void addValueToTmp(Connection conn, String value)  throws NamingException, SQLException {
  CallableStatement cs = conn.prepareCall("{call plsql_function_put_value_in_tmp(?)}");
  ....... other code .......
  ....... other code .......
  ....... other code .......
}

//A function to do something whit a data in temporary table
public void doAllWork(Connection conn)  throws NamingException, SQLException {
  CallableStatement cs = conn.prepareCall("{call plsql_function_do_something_whith_tmp}");
  ....... other code .......
  ....... other code .......
  ....... other code .......
}

public void mainFunction() throws NamingException, SQLException {
  ....... other code .......
  //Get connection
  Connection conn = anyFunctionToGetConnection();
  //Fill temporary table
  addValueToTmp(conn, value1);
  addValueToTmp(conn, value2);
  addValueToTmp(conn, value3);
  //Do something whith data
  doAllWork(conn);
  //Commit
  conn.commit;
  ....... other code .......
} 
```

# java - 通过拖动角来调整 gui 元素的大小

> ID：10312215
> 
> 赞同：0
> 
> 时间：2012-04-25T08:42:31.487
> 
> 标签：java, swing, user-interface, layout

我有一个摇摆项目，注意到 JFrame 内的元素静态位于 JFrame 内，我无法根据需要调整元素的大小。

我在设计器窗口中的 gui 应用程序如下所示：

![](../Images/6037910afb0c47cd98cd689dbb563c26.png)

我想通过拖动按钮的角来调整按钮的大小（例如），但我不允许这样做？

正如您在下图中看到的那样，不允许按像素拖动，而只能按 JFrame 中的每个部分进行拖动：

![](../Images/5a1b4825a714f7d49f0e817d7d44d4a6.png)

如何禁用元素的静态放置/启用设计器窗口内元素的自拖动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:51:17.387

您很可能需要禁用`LayoutManager`. 在 Netbeans 上，将其设置为`null`可以让您完全控制子元素的位置和尺寸，所以我假设类似的东西应该在这里工作（尽管您似乎使用的是 Eclipse，如果是这种情况，请说明什么插件您正在使用）。

***但是要注意的是，通常您希望有一个布局管理器来处理您的组件的渲染方式。***我建议您在完全删除布局管理器之前[查看这里以获取有关布局管理器的更多信息。](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T08:53:20.787

在 GUI 中设置组件的大小和位置应在运行时留给 JRE，使用：

*   组件的首选大小（具有当前内容，在当前 PLAF 中）。
*   为组件设置的边框/填充/插图。
*   使用的布局。
*   布局构造函数中定义的组件间距。
*   向布局添加组件时使用的布局约束（对于例如`BorderLayout`和备受诟病的`GridBagLayout`布局以及许多第 3 方布局尤其重要）。

通常，复杂的效果是通过使用[嵌套布局](https://stackoverflow.com/a/5630271/418556)创建的。

![](../Images/f9e492eec81701d836e83834a893afb0.png)

# java - 使用接收列表的 Web 服务在 Java 中填充 JTable

> ID：10312216
> 
> 赞同：1
> 
> 时间：2012-04-25T08:42:39.830
> 
> 标签：java, web-services, swing, collections, jtable

您好，我有一个学校项目，我们在其中使用带有普通`.asmx`文件的 Web 服务创建了 Web 方法。

我在 .Net C# 中制作的程序在返回为 .Net C# 时没有问题`List<Project>`。但是，我尝试让 Java 工作，我尝试`Object[][] = wws.SelectAllProject()`了等等。

这是网络方法：

```
 [WebMethod]//Ska vara collection
    public List<Project> SelectAllProjects()
    {
        Controller contr = new Controller();
        List<Project> project = contr.SelectAllProjects();
        return project;
    } 
```

这是 Project.cs 文件：

```
public class Project
{
public string pId { get; set; }
    public string pName { get; set; }
    public string pDescript { get; set; }

    public Project()
    {
        this.pId = pId;
        this.pName = pName;
        this.pDescript = pDescript;
    }
} 
```

那么在Java中我该如何调用该方法？ **我可以调用其他无效的方法，即添加/删除项目...**

```
public void SelectAllProjects () {
    WebService webService = new WebService();
    wws = webService.getWebServiceSoap12();
    //Anropar webservice och får en Collection av Project
    String[] columnNames = {"Project ID:", "Project Name:", "Project Description:"};
    Object[][] = wws.selectAllProjects();
    //Array[]test = wws.selectAllProjects();
} 
```

现在我想从这个方法中返回一些东西（它不应该是无效的），我可以用来在我的视图类中填写一个 JTable（使用 MVC）。您看到的 web 方法并返回项目列表。我该如何用Java制作这个？尝试谷歌搜索，但我似乎没有找到任何与我的项目接近的东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:49:24.137

`TableModel`使用您的参考来编写您的`List<Project>`，并使用该模型来构建您的`JTable`. 例如，您的表格可能会显示三个项目属性中的两个，并且您的行数将取决于列表的`size()`.

```
@Override
public int getColumnCount() {
    return 2;
}

@Override
public int getRowCount() {
    return project.size();
} 
```

作为参考，此[示例](https://stackoverflow.com/a/9134371/230513) `extends AbstractTableModel`说明了`getValueAt()`使用`Map<String, String>`. 另请参阅[*如何使用表格：创建表格模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。

# java - Android服务多次从列表中调用数据

> ID：10312223
> 
> 赞同：0
> 
> 时间：2012-04-25T08:43:06.683
> 
> 标签：java, android

***1.你好，我已经为计划消息创建了服务，但问题是我在我的服务方法中设置了循环，但它发送的消息是列表中设置的所有消息。***

***2.我想设置循环，发送列表上的消息将至少发送一次。***

***3.已经发送的消息不再发送。***

//***这是我的代码。*** //我的服务类

```
import java.util.ArrayList;
import java.util.List;
import android.app.Activity;
import android.app.PendingIntent;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.IBinder;
import android.telephony.gsm.SmsManager;
import android.util.Log;
import android.widget.Toast;
public class SchedulerMsgService extends Service {
    private static final String TAG = "MyService";
    private DatabaseHelper mDbHelper;
    private ArrayList<schedulerDetails> myschedule = new ArrayList<schedulerDetails>();
    private String phoneNo, message, sDate, curTime;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");
    }
    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
    }
    @Override
    public void onStart(Intent intent, int startId) {
        Log.d(TAG, "oNsTART IS rEADY ");
        mDbHelper = new DatabaseHelper(this);
        final List<schedulerDetails> ScheduleList = mDbHelper.selectAllNumbers();
        for (int j = 0; j < ScheduleList.size(); j++) {
            myschedule.add(ScheduleList.get(j));
            phoneNo = myschedule.get(j).num;
            message = myschedule.get(j).textMessage;
            sDate = myschedule.get(j).date;
            curTime = myschedule.get(j).time;

            sendSMS(phoneNo, message, sDate, curTime);
        }

        Toast.makeText(this, "condition Matched", Toast.LENGTH_LONG).show();

        // Toast.makeText(this, "condition Not Matched",
        // Toast.LENGTH_LONG).show();
    }
    public void sendSMS(String phoneNo, String message, String sDate,
            String curTime) {
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";
        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);
        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS Sent",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic Failure",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "Null Service",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio Off",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(SENT));
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS Delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not Delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(DELIVERED));
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNo, null, message, sentPI, deliveredPI);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:03:03.223

如果消息已发送，则从数据库中删除该号码或在数据库中添加消息已发送的一些信息。然后`mDbHelper.selectAllNumbers()`可以只返回需要接收消息的号码。

# ubuntu - 服务器找不到 10.1.168.192.in-addr.arpa(NXDOMAIN)

> ID：10312226
> 
> 赞同：0
> 
> 时间：2012-04-25T08:43:53.020
> 
> 标签：ubuntu

当我在服务器上使用命令`nslookup`时 - 它适用于 IP 和 DNS。但是在客户端（客户端从服务器（dhcp）获取所有信息）我在使用时遇到了这样的错误`nslookup 192.168.1.10`

```
 server can't find 10.1.168.192.in-addr.arpa:NXDOMAIN 
```

客户端 IP - 192.168.1.10 服务器 IP - 192.168.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:47:48.850

尝试明确指定 DNS 服务器。这样，您就可以排除`nslookup`服务器上查询的名称服务器与客户端上的名称服务器不同的可能性。

您将名称服务器指定为 的第二个参数`nslookup`。（见`man nslookup`。）

# blackberry - 如何将视频从黑莓流式传输到浏览器

> ID：10312228
> 
> 赞同：-1
> 
> 时间：2012-04-25T08:44:02.513
> 
> 标签：blackberry, video-streaming

我正在创建一个应用程序，它将黑莓屏幕的实时提要从黑莓设备流式传输到网络浏览器。这应该允许用户从浏览器查看黑莓的屏幕。有人可以建议一个逐步的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:21:03.653

检查这个方法，[public static void screenshot(Bitmap bitmap)](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/Display.html#screenshot%28net.rim.device.api.system.Bitmap%29)。

文档说，如果 IT 策略和/或应用程序控制支持，它会截取整个屏幕并将其保存到[Bitmap中。](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/Bitmap.html)如果该方法有效，则可以通过以下方式广播设备的截屏：

*   连续截图（保持可行区间）和
*   将它们发送到某个服务器/目的地（可以在发送之前应用图像压缩）。

* * *

> 多部分帖子/图像上传问题 - 以下链接可能会有所帮助。
> 
> [BlackBerry Multipart POST 演示 - Github](https://github.com/cleverua/blackberry_multipart_post)
> 
> [JavaME 中的 HTTP POST 多部分文件上传 - Nokia Developer](http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME)
> 
> [在 BlackBerry 中上传图像 - 堆栈内存溢出](https://stackoverflow.com/questions/3447872/upload-image-using-blackberry)
> 
> [从 Blackberry 通过 Http 发布数据](http://blog.copyninja.info/2009/09/posting-data-via-http-from-blackberry.html)

# security - IIS 无法启动：错误 BC2000

> ID：10312229
> 
> 赞同：0
> 
> 时间：2012-04-25T08:44:03.910
> 
> 标签：security, iis-7.5

当我尝试在 IIS 7.5 上启动 ASP.net 站点时，出现以下错误

```
BC2000: compiler initialization failed unexpectedly: 0x80070005 
```

环顾四周，我找到了一个可能的解决方案：转到 C:\Windows\Temp 文件夹的安全设置，并为用户“NETWORK SERVICE”和 IIS_IUSRS 添加完全控制权限。

但我这样做了，错误还在继续。

在我的机器中 %temp% 指向 C:\Users\sp\AppData\Local\Temp ，它也具有这些权限。

我还尝试使用实用程序“aspnet_regiis”重新安装 ASP。

这是完整的事件日志条目（应用程序警告 1310）：

```
Event code: 3007 
Event message: A compilation error has occurred. 
Event ID: 733bee25fcbe4f0ab74b7fc56ce833d7 
Event sequence: 3 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/5/ROOT-1-129798160562503533 
    Trust level: Full 
    Application Virtual Path: / 

Process information: 
    Process ID: 8040 
    Process name: w3wp.exe 
    Account name: IIS APPPOOL\myapp 

Exception information: 
    Exception type: HttpCompileException 
    Exception message: vbc : Fatal (0): error BC2000: compiler initialization failed unexpectedly: 0x80070005 

Request information: 
    User host address: ::1 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: sp-PC\sp 

Thread information: 
    Thread ID: 8 
    Thread account name: sp-PC\sp 
    Is impersonating: False 
    Stack trace:    at System.Web.Compilation.AssemblyBuilder.Compile()
   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   at System.Web.Compilation.CodeDirectoryCompiler.GetCodeDirectoryAssembly(VirtualPath virtualDir, CodeDirectoryType dirType, String assemblyName, StringSet excludedSubdirectories, Boolean isDirectoryAllowed)
   at System.Web.Compilation.BuildManager.CompileCodeDirectory(VirtualPath virtualDir, CodeDirectoryType dirType, String assemblyName, StringSet excludedSubdirectories)
   at System.Web.Compilation.BuildManager.CompileCodeDirectories()
   at System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled()
   at System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters) 
```

所以我所做的工作是将应用程序池的用户更改为机器管理员（IIS 管理器 > 应用程序池 > 高级设置 > 身份）。但这似乎不太安全。

所以我的问题是：为什么它不能使用“内置帐户”（我尝试了 ApplicationPoolIdentity 和 NetworkService）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-21T07:06:46.950

尝试以下步骤-

1.  如果您在 x64 机器上运行，请为您的默认应用程序池设置真正的“启用 32 位应用程序”。

2.  授予**NETWORK SERVICE**和**IIS_IUSRS**的完全访问权限

> C:\Windows\Temp\

3.  授予**NETWORK SERVICE**和**IIS_IUSRS**的完全访问权限

> C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:52:04.853

授予用户“网络服务”对文件夹 C:\Windows\Temp 的完全访问权限

# php - 在 PHP 中提取 JQuery POST 参数

> ID：10312233
> 
> 赞同：2
> 
> 时间：2012-04-25T08:44:27.507
> 
> 标签：php, javascript, jquery, checkbox

我正在尝试使用 JQuery 将一组复选框传递给 PHP。我正在使用[使用 JSON 将多个复选框项传递给 PHP 文件并查询数据库](https://stackoverflow.com/questions/4880958/passing-multiple-checkbox-items-to-php-file-using-json-and-querying-a-db)中的代码我应该在那个问题下发布这个吗？

复选框对应于日历中月份中的每一天。值是一个月中的整数天

```
<td><input name="check[]" value="4" type="checkbox">4</td>
<td><input checked="yes" name="check[]" value="7" type="checkbox">7</td> 
```

复选框位于表格中的表格中。

```
<form id="checkboxes">
<table id="calendarId" class="calendar"> 
```

我使用 Jquery 将复选框传递给 PHP：

```
 $("#calendarId").load($.post("calendar.php",{check: $("form#checkboxes").serialize()})); 
```

Firebug 显示在 post 参数中有一个复选框列表。我检查生成此示例的两天是 7 天和 21 天，这在代码中是可辨别的。

```
check   check%5B%5D=7&check%5B%5D=21
Source
check=check%255B%255D%3D7%26check%255B%255D%3D21 
```

我的问题是我无法在 PHP 中提取这些值。

```
parse_str($_POST['check'], $checkboxes); 
```

返回一个空字符串，就像在 POST 数组上循环一样：

```
foreach($_POST as $key=>$val){
    $test .= $key . "; " . $value . "; ";
} 
```

试图循环 $_POST['check'] 会产生一个错误，我认为这意味着 $_POST['check'] 是空的。

完整页面位于[http://www.genomics.liv.ac.uk/shereMuseum/calendar1.html](http://www.genomics.liv.ac.uk/shereMuseum/calendar1.html)

在发布之前，我还尝试将复选框打包到数据结构“复选框”中：

```
 var checkboxes = new Array();
        $("input[name='check[]']:checked").each(function(){checkboxes.push($(this).val());}); 
```

或者

```
 $.each($("input[name='check[]']:checked"),function() {
                checkboxes.push($(this).val());
        }); 
```

但随后 Firebug 将 POST 参数报告为：

```
undefined   undefined
undefined   undefined
Source
undefined=undefined&undefined=undefined 
```

我将非常感谢任何建议。哈利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:02:39.357

试着看看这个： http: [//files.nette.org/109/jquery.ajaxform.js](http://files.nette.org/109/jquery.ajaxform.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:20:54.057

不知道你为什么使用 $('#calendarId').load(...)，但你有没有尝试过这样做

```
$.ajax({
    type: 'POST',
    url: 'calendar.php',
    data: $('#checkboxes').serialize(),
    success: function(response) {
        // handle the response here
    }
}); 
```

# sql - 将 MS SQL 2008 .mdf 文件转换为 .bak 文件

> ID：10312237
> 
> 赞同：0
> 
> 时间：2012-04-25T08:44:58.980
> 
> 标签：sql, visual-studio-2010

我尝试将 .mdf 文件转换为 .bak 文件，我一直在阅读本指南：[http ://forums.asp.net/p/1448416/3870094.aspx](http://forums.asp.net/p/1448416/3870094.aspx)

```
BACKUP DATABASE [NameOfDatabase] TO DISK = N'D:\path\filename.bak' WITH NOFORMAT, NOINIT, NAME = N'NameOfDatabase-Full Database Backup', SKIP, NOREWIND, NOUNLOAD, STATS = 10 
```

将 NameOfDatabase 替换为 .... 数据库的名称。

将 D:\path\filename.bak 替换为您要备份的位置

出于美观的索引原因，替换名称 = N 数据库名称...

但是当我运行它时会收到一条错误消息。

在服务器资源管理器的 Visual Studio 2010 中，我选择 Data Connection/myDatabase.mdf 并右键单击存储过程并选择“添加新存储过程”。我在那里写：

```
BACKUP DATABASE [myDatabase] TO DISK = N'C:\db\dbCopy.bak' WITH NOFORMAT, NOINIT, NAME = N'dbCopy-Full Database Backup', SKIP, NOREWIND, NOUNLOAD, STATS = 10 
```

当我选择文本并运行选择时，我收到以下错误消息：

从 mssql 执行选定的脚本：://Home\e1d5110c-dd6f-4d/C:\USERS\myHome\DESKTOP\myPage\APP_DATA\MYDATABASE.MDF/dbo/Stored Procedure/dbo/StoredProcedure1

```
Database 'myDatabase' does not exist. Make sure that the name is entered correctly.
BACKUP DATABASE is terminating abnormally.
No rows affected.
(0 row(s) returned) 
```

我究竟做错了什么？如果我将 'myDatabase' 更改为 'C:\USERS\myHome\DESKTOP\myPage\APP_DATA\MYDATABASE.MDF' 我会收到以下消息：

```
Database 'C:\USERS\myHome\DESKTOP\myPage\APP_DATA\MYDATABASE.MDF' does not exist. Make sure that the name is entered correctly.
BACKUP DATABASE is terminating abnormally.
No rows affected.
(0 row(s) returned) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:17:32.433

您需要先附加数据库，然后才能备份它。你也有LDF文件吗？您可能需要一个，或者它可能很乐意重新构建自己的 - 我不确定。

完成这一切的最简单方法是通过 SQL Server Management Studio。如果您没有它（例如，您使用的是 SQL Server Express），那么您绝对应该下载并安装它。然后在 Management Studio 中登录到您的 SQL Server 实例

*   右键单击“用户数据库”，“附加”，然后选择您的 MDF 文件
*   右键单击附加的数据库和“任务”，“备份”；如果要更改文件名，请在目标框中使用“删除”和“添加”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T05:11:21.467

我知道这篇文章已经有很长时间了，但我想也有人可能仍然需要一个对我有用的答案，所以 bak 文件只是你的 SQL Server 数据库的备份文件。

您可以下载 MS SQL Server Express 管理控制台（适用于您的 SQL Server 或 SQL Server Express 版本）并执行此操作

[http://msdn.microsoft.com/en-us/library/ms187510.aspx](http://msdn.microsoft.com/en-us/library/ms187510.aspx)

# c# - 使用 Lambda 表达式比较两个 IEnumurable 集合

> ID：10312248
> 
> 赞同：-1
> 
> 时间：2012-04-25T08:45:35.200
> 
> 标签：c#, linq, lambda

我想知道如何使用*Lambda Expressions*比较两个 IEnumerable 集合值。

我已经发布了这个通过 LINQ 获取，但它应该通过 Lambda 表达式实现。

我实现此目的的 LINQ 代码是：

```
var result = from ap in AvailablePacks 
             join rp in RecommendedPacks
             on ap.PackID equals rp.PackID
             select new 
             {  
                  PackQuantity =ap.Quantity
             }; 
```

现在我想通过使用 Lambda 表达式来实现这一点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:48:50.797

那么您真正需要的是从查询表达式转换为 lambda 表达式形式？在这种情况下，您可以使用：

```
var result = AvailablePacks.Join(RecommendedPacks,
                                 ap => ap.PackID,
                                 rp => rp.PackID,
                                 (ap, rp) => new { PackQuantity = ap.Quantity }); 
```

有关查询表达式翻译的更多信息，请参阅[我的 Edulinq 博客系列的第 41 部分。](https://msmvps.com/blogs/jon_skeet/archive/2011/01/28/reimplementing-linq-to-objects-part-41-how-query-expressions-work.aspx)

# c# - 在 json.net 中转换为 DateTime

> ID：10312254
> 
> 赞同：3
> 
> 时间：2012-04-25T08:46:14.370
> 
> 标签：c#, .net, json, datetime, json.net

我正在尝试反序列化以下内容：

```
{"ts":"2012-04-22 04:14:50,669", "msg":"Hello"} 
```

进入

```
public class LogEntry
{
    public DateTime Ts { get; set; }
    public string Msg { get; set; }
} 
```

使用

```
var logEntry = JsonConvert.DeserializeObject<LogEntry>(line); 
```

但是得到一个 JsonSerializationException 说“{”错误转换值 \”2012-04-22 04:14:28,478\”以键入“System.DateTime”。第 1 行，位置 31."}。我无法更改日志格式。

我想我可能需要自己使用转换器解析日期字符串。但是，我找不到任何`JsonConverter`似乎相关的例子。具体如何从方法中读取`reader`值`ReadJson`。

有没有我应该看的简单例子？还是我以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:02:53.780

DateTime 字符串的格式使用逗号作为小数分隔符 ( `,478`)。您可以使用适当的 初始化`JsonSerializerSettings`对象（[在此处记录](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_JsonSerializerSettings.htm)）`Culture`，然后使用`DeserializeObject<T>(value, settings)`（[在此处记录](http://james.newtonking.com/projects/json/help/html/M_Newtonsoft_Json_JsonConvert_DeserializeObject__1_2.htm)）进行反序列化。这将使用您指定的文化而不是默认的文化来反序列化`InvariantCulture`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T08:58:44.830

我怀疑这个问题是因为你得到的值是使用逗号作为小数分隔符，这表明它是在使用逗号的语言环境中创建的（例如，除了英语之外的许多欧洲语言）。您可以尝试更改您的语言环境以匹配，以便解析工作？

# groovy - 停止 Gradle 构建的推荐方法

> ID：10312259
> 
> 赞同：183
> 
> 时间：2012-04-25T08:46:47.503
> 
> 标签：groovy, build, gradle

检测到问题后如何停止 Gradle 构建？我可以使用断言、抛出异常、执行 System.exit（坏主意）或在 Gradle 中使用专用函数（但我找不到）。Gradle 的最佳方式是什么（为什么？）。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-04-25T09:09:36.457

[`org.gradle.api`我通常会从包](https://docs.gradle.org/current/javadoc/org/gradle/api/package-summary.html "见")中抛出相关的异常，例如[`InvalidUserDataException`](http://gradle.org/docs/current/javadoc/org/gradle/api/InvalidUserDataException.html)当有人输入无效的内容时，或者[`GradleScriptException`](http://gradle.org/docs/current/javadoc/org/gradle/api/GradleScriptException.html)更一般的错误。

如果你想停止当前的任务或动作，然后继续下一个，你也可以抛出一个[`StopActionException`](http://gradle.org/docs/current/javadoc/org/gradle/api/tasks/StopActionException.html)

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-05-12T02:35:51.153

如果要停止构建，请抛出：

```
throw new GradleException('error occurred') 
```

或抛出上述异常的子类。一些子类异常实际上只会使当前任务失败，但会继续构建。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-04-25T09:32:20.167

目前没有专门的方法，尽管已经讨论过要添加一个。

停止 Gradle 构建的推荐方法是引发异常。由于 Groovy 没有检查异常，并且 Gradle 默认不打印异常类型，因此抛出哪个异常并不重要。在构建脚本中，经常使用 GradleException，但 Groovy 断言也似乎是合理的（取决于环境和受众）。重要的是提供明确的信息。添加原因（如果可用）有助于调试 ( `--stacktrace`)。

Gradle 提供了专用的异常类型`StopExecutionException`/`StopActionException`用于停止当前任务/任务操作但继续构建。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-06-13T16:13:10.067

如果您以后不想捕获异常，另一种选择是调用 ant fail 任务。在我看来，它更容易阅读，并且您可以在不使用 --stacktrace 的情况下向用户发送一个很好的消息。

```
task (tarball, dependsOn: warAdmin) << {
    ant.fail('The sky is falling!!')
} 
```

给你一个消息，如：

```
* What went wrong:
Execution failed for task ':tarball'.
> The sky is falling!! 
```

可能你***可以***抓住这个（也许它会抛出 ant 的 BuildException？），但如果这是一个目标，那么我不会使用 ant.fail。我只想通过抛出 tim_yates 建议的标准 gradle 异常来轻松查看要捕获的异常。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-10-03T19:51:20.397

抛出一个简单的 GradleException 可以停止构建脚本。这对于检查所需的环境设置非常有用。

```
GradleException('your message, why the script is stopped.') 
```

例子：

```
if(null == System.getenv()['GRADLE_USER_HOME']) {
    throw new GradleException('Required GRADLE_USER_HOME environment variable not set.')
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-07-01T00:51:34.157

这是一个尝试模拟 Gradle javac 任务如何引发错误的代码片段：

```
task myCommand(type:Exec) {

    ... normal task setup ....

    ignoreExitValue true
    standardOutput = new ByteArrayOutputStream()
    ext.output = { standardOutput.toString() }
    doLast {
        if (execResult.exitValue) {
            logger.error(output())
            throw new TaskExecutionException( it,
                new Exception( "Command '${commandLine.join(' ')}' failed; "
                              + "see task output for details." )
            )
        }
    }
} 
```

当命令返回`0`时，没有输出。任何其他值都将打印标准输出并停止构建。

注意：如果您的命令也写入 errorOutput，您可能需要将其包含在错误日志中。

# .net - 为什么是 String.ToString()？

> ID：10312264
> 
> 赞同：2
> 
> 时间：2012-04-25T08:47:19.233
> 
> 标签：.net, vb.net

> **可能重复：**
> [C#：为什么字符串类型有 .ToString() 方法](https://stackoverflow.com/questions/2778827/c-why-does-the-string-type-have-a-tostring-method)

为什么类（VB.NET）`ToString`中存在方法？`String`

```
String.ToString() 
```

如果像这样使用会不会是开销

```
TextBox.Text.ToString() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T08:49:39.847

该`ToString`方法在继承`Object`自其上找到。`String`的实现`Object.ToString`是打印类型名。

```
public virtual string ToString() {
    return this.GetType().ToString();
} 
```

该类型 `String`会覆盖此方法以返回自身。

```
public override string ToString() {
    return this;
} 
```

该代码`TextBox.Text.ToString()`对 进行了不必要的调用`ToString`，但这样做不太可能对性能产生任何明显的影响。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T08:48:59.663

*所有*对象都有`ToString()`，因此对于任何对象：

*   您可以`obj.ToString()`在不知道类型的情况下调用`obj`

*   您可以调用`obj.ToString()`而不必担心方法不存在（通用日志记录代码是您可能执行此操作的常见示例）

调用字符串的开销`ToString()`只是调用单行函数，因此几乎可以肯定可以忽略不计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T08:49:15.413

`ToString()`存在于从`System.Object`. 是的，这也包括在内`System.String`。

那里可能有点多余，[文档](http://msdn.microsoft.com/en-us/library/8tc6ws5s.aspx)指出它将返回完全相同的实例。所以除了方法调用之外没有性能开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T08:49:41.293

一切都是对象（或可以装箱为对象）。`object`定义了方法`ToString`，所以，string 有一个 ToString 方法，因为它是一个对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T08:53:38.950

因为`System.String`该类与任何其他类一样是从该类派生的`System.Object`，所以它会自动继承各种方法，例如：

```
public virtual bool Equals(Object obj)
public virtual int GetHashCode()
public virtual string ToString() 
```

从而使您能够比较，用对象填充表格，并将对象转换为人类友好的字符串。

# asp.net - 在美国服务器上存储 GMT 日期

> ID：10312271
> 
> 赞同：3
> 
> 时间：2012-04-25T08:48:03.033
> 
> 标签：asp.net, sql-server, shared-hosting, gmt

我来自英国，最近在 WinHost 的[Basic Package](http://www.winhost.com/windows-hosting-plans-basic.aspx)上部署了一个网站。

`DateTime.Now()`在 C# 或SQL 中使用时`GETDATE()`，它们都返回类似的东西`GMT-8`（因为服务器托管在美国）。

我认为我在服务器上的权限方面有点受限（例如，我无法更改我的 SQL 登录语言）。

在 GMT 中存储这些日期的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T08:51:36.293

使用`DateTime.UtcNow`和存储，因为它是数据库。从数据库读取时假设并使用类`UTC`转换为时间。请注意，SQL 不应包含有关时区偏移的任何信息。`UK``TimeZoneInfo`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T08:51:26.750

在 SqlServer 中使用 getUtcDate() 来存储您的所有日期时间值。您可以在 .NET 应用程序中将其转换为所需的时区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T08:51:28.500

### 描述

我认为您应该将 DateTimes 存储在 UTC 中。然后，您可以使用 TimezoneInfo 类简单地将其转换为另一个时区。

*   保存`DateTime.UtcNow`到您的数据库或`getUtcDate`在 sql中使用
*   让用户选择他的时区并将它们保存到您的数据库中
*   使用将您保存的 UTC 时间转换为用户时区`TimeZoneInfo.ConvertTimeFromUtc`

### 样本

```
TimeZoneInfo cstZone = TimeZoneInfo.FindSystemTimeZoneById(/* destination timezone (users timezone)  */);
DateTime cstTime = TimeZoneInfo.ConvertTimeFromUtc(YourDateTimeFromDatabase, cstZone); 
```

### 更多信息

*   [如何做时区？在 asp.net mvc 中](https://stackoverflow.com/questions/1320048/how-to-do-timezones-in-asp-net-mvc)
*   [MSDN - TimeZoneInfo 类](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)

# android - 布局权重在 ScrollView 中不起作用

> ID：10312272
> 
> 赞同：53
> 
> 时间：2012-04-25T08:48:15.327
> 
> 标签：android, android-layout

我想将布局权重分配`LinearLayout`给`ScrollView`. 但是，`ScrollView`忽略`LinearLayout` `weightSum`.

我的目标是将布局划分为 2、1、1 的权重（总和为 4），但这在`ScrollView`.

我该如何解决这个布局问题？

**主要的.xml**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" 
        android:weightSum="4">

        <LinearLayout android:id="@+id/logo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" 
            android:layout_weight="2"
            android:background="#FFFFFF" />

        <LinearLayout android:id="@+id/logo1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" 
            android:layout_weight="1"
            android:background="#000000" />

        <LinearLayout android:id="@+id/logobutton"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" 
            android:layout_weight="1" 
            android:background="#4B4B4B" />

    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-04-25T09:12:49.873

我以前遇到过这个问题。只需`android:fillViewport="true"`在您的 ScrollView 中使用，它就会填满屏幕。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:08:17.853

这不会像你所做的那样工作。[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)的子视图应设置为`wrap_content`. 如果将其设置为`fill_parent`，它将填充[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)的区域并且从不滚动，因为它不会大于[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)。

的想法`layout_weight`是按比例填充特定区域。

您应该将所有子[LinearLayouts](http://developer.android.com/reference/android/widget/LinearLayout.html) `layout_height`设置为任`wrap_content`一或特定大小（以 dp 为单位），并将父[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html) `layout_height`设置为`wrap_content`

如前所述，您需要删除额外的

> xmlns:android="http://schemas.android.com/apk/res/android"

如果它不是布局的根（第一个）元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-10T08:50:14.020

以我的经验，`fillviewport=true`工作有点奇怪。

我通过`LinearLayout`使用另一个布局（如`FrameLayout`.

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-07T09:37:55.617

在您的 ScrollView 中添加以下行，它将正常工作。

**ScrollView 必须只有一个孩子**

```
android:fillViewport="true" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-12T09:15:44.623

只需将其放在您的滚动视图中：

`android:fillViewport="true"`

# jquery - 保护ajax jquery

> ID：10312273
> 
> 赞同：0
> 
> 时间：2012-04-25T08:48:21.490
> 
> 标签：jquery, ajax, codeigniter

如果电子邮件已经存在于我的数据库中，我会使用它来检查我的注册页面：

```
$('#email').blur(function() {
  var email = $(this).val();
  $.post('ajax/get_request/check',{key:"email",value:email},function(data) {
    alert(data);
  });
}); 
```

它确实工作正常。但是，我注意到，如果我通过浏览器的 URL 地址栏访问 ajax 路径`http://example.com/ajax/get_request/check`，则显示为空白。`value`如果为空，我尝试使用此脚本进行重定向。

```
//controller.php
public function check($key=NULL,$value=NULL)
{
  if(is_null($value)) redirect(base_url(),'refresh');
  // ... more scripts below ...
} 
```

但这会影响我在注册时的 ajax 请求响应。我想在这里实现的是检测用户是否通过注册表单而不是直接在 URL 浏览器上键入路径时访问 ajax。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:08:48.790

你可以用这个

```
$this->input->is_ajax_request() 
```

检查传入的请求是否是 ajax 请求。这在 codeigniter2 中可用

在您的控制器中，

```
if($this->input->is_ajax_request()){
    //do your stuffs
}else{
  die("Access Prohibited.");
} 
```

# iphone - 如何设置另一个项目的目标

> ID：10312274
> 
> 赞同：-1
> 
> 时间：2012-04-25T08:48:23.140
> 
> 标签：iphone, xcode, ipad, ipod

在我的项目中，我将 RESTkit 集成到我的应用程序中，我遵循下面的帖子 url

[http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/](http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/)

在为设置另一个应用程序的目标设置的那个屏幕中。

但是在我使用 xcode 4.3.1 时，本教程制作了 xcode 3，

**所以我的问题是如何在我们的项目中设置另一个应用程序的目标来做什么**

下图显示了在 xcode3 中设置应用程序的目标，然后如何将 taget 设置到 xcode4 中。

![在此处输入图像描述](../Images/b575023668ed360d380d7b66b876491f.png)

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:21:02.677

经过一番研发，终于找到了问题所在。

以下是将目标添加到 xcode 4.3.1 的步骤

![在此处输入图像描述](../Images/28ef6b3df1055f1135a62b2a22efe34a.png)

![在此处输入图像描述](../Images/55249c89d2f0f4045b665f12390322df.png)

![在此处输入图像描述](../Images/c6d6fb2afe795d48605567fa7a76ca98.png)

![在此处输入图像描述](../Images/e177f6ea25fffcc37c91af3b9409de94.png)

![在此处输入图像描述](../Images/ea27cab39ba7f1710572121a809af5fb.png)

# java - 光标关闭

> ID：10312275
> 
> 赞同：1
> 
> 时间：2012-04-25T08:48:26.600
> 
> 标签：java, oracle, hibernate, stored-procedures

我正在使用struts框架。我收到“光标已关闭”错误。我检查了我的存储过程，它在 oracle 中运行良好，但我仍然收到“光标已关闭”错误。

```
    造成的：
java.sql.SQLException：光标已关闭。
    在 oracle.jdbc.driver.T4CResultSetAccessor.getCursor(T4CResultSetAccessor.java:323)
    在 oracle.jdbc.driver.ResultSetAccessor.getObject(ResultSetAccessor.java:85)
    在 oracle.jdbc.driver.OracleCallableStatement.getObject(OracleCallableStatement.java:1401)

```

你能帮我理解是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:27:15.557

由于您没有提供代码，但根据我的假设，您通过打开它从过程中返回一个游标，但同时您可能在同一个过程中关闭游标。

```
PROCEDURE S_S_TEST( 
  test_OUT OUT OAS_TYPES.REFCURSOR
) 
AS
BEGIN
  OPEN test_OUT FOR      
      SELECT *
      FROM table_p;
   CLOSE test_OUT;
END S_S_TEST; 
```

调用存储过程的客户端负责关闭游标。请删除代码：`CLOSE test_OUT`;

参考：[光标关闭](https://stackoverflow.com/questions/1241512/cursor-is-closed-error-when-trying-to-execute-an-oracle-sp-using-jdbc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T05:51:08.067

一段时间后会出现以下问题

前任：

```
while (rs.next()) {

            registartionServices.add(new RegistrationServices(rs.getString(1), rs.getString(2), rs.getString(3),
                    rs.getString(4), rs.getString(5), rs.getString(7), rs.getString(6), rs.getString(9)));
            noti[i] rs.getString(1);
            //System.out.println("amountList-" + rs.getString(7));
            //amountList.add(rs.getString(7));
            //serviceList.add(rs.getString(6));
            //serviceListAR.add(rs.getString(6));
            i++;
        } 
```

在上面的示例中 (rs.getString(1) ) 尝试访问两次。

而不是将 (rs.getString(1)) 分配给一个变量并使用该值。

前任：

```
while (rs.next()) {
                notid=rs.getString(1);
                registartionServices.add(new RegistrationServices(notid, rs.getString(2), rs.getString(3),
                        rs.getString(4), rs.getString(5), rs.getString(7), rs.getString(6), rs.getString(9)));
                noti[i] =notid;
                //System.out.println("amountList-" + rs.getString(7));
                //amountList.add(rs.getString(7));
                //serviceList.add(rs.getString(6));
                //serviceListAR.add(rs.getString(6));
                i++;
            } 
```

希望你得到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-12T12:46:30.300

希望您可以将过程输出参数作为光标返回到调用位置，但您可能会错过在过程中打开/添加输出参数光标（**`OPEN RESULT FOR SELECT * FROM TABLE_NAME`**）。

```
Example:
PROCEDURE TEST(RESULT OUT SYS_REFCURSOR) 
AS
BEGIN
  --your all codes
  OPEN RESULT FOR  SELECT * FROM TABLE_NAME;
END TEST; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-02T02:31:49.317

最初，REF_CURSOR 处于关闭状态，直到您打开特定 SQL 查询的游标。当您在打开游标之前由于某些条件而从未打开过游标时，您可能会收到此**Cursor is closed SQL 错误。**如果不满足该条件，则如果您不故意为某些虚拟值打开游标，则游标将永远不会打开。下面是一个例子：

```
IF condition = TRUE THEN
    OPEN CURSOR cursor_name FOR
    SELECT * FROM table_name;
END IF; 
```

但在这里，条件是假的。因此，该过程返回一个未打开的游标。在这种情况下，我更喜欢从调用程序中捕获这个特定的异常。例如，以下是捕获特定类型异常并保持沉默的 Java 代码。

```
try
{
    cursor = (ResultSet) stmt.getObject(x);
}
catch(SQLException e)
{
    if (!e.getMessage().toLowerCase().contains("cursor is closed")) {
        e.printStackTrace();
    }
} 
```

而不是做

```
try
{
    cursor = (ResultSet) stmt.getObject(x);
}
catch(SQLException e)
{
    e.printStackTrace();
} 
```

# c# - 如何在 ASP.Net MVC Web 应用程序中渲染建筑物的 3D 模型/图形

> ID：10312279
> 
> 赞同：0
> 
> 时间：2012-04-25T08:48:35.723
> 
> 标签：c#, asp.net-mvc-3, unity3d, direct3d, opentk

我正在研究从 ASP.Net MVC Web 应用程序 (C#) 中的数据描述的建筑物中渲染 3D 模型或图形的可能性。

我发现的大多数论坛和 stackoverflow 上的帖子以及博客和网站上的文章都是旧的（2006 年及之前）。

据我所知，共有三种选择：Direct3D、OpenGL 和 Unity 3D。

Direct3D 来自 MS，但我不知道这是否适合 web 应用程序。有人有经验吗？但如前所述，谷歌排名最高的文章来自 2006 年或更早（它仍在开发/维护/使用吗？）。

OpenTK (www.opentk.com) 看起来很可能使用 OpenGL，但最新版本是 2006 年 10 月发布的（尽管他们的网站上有最近的博客文章）。

Unity 3D 看起来非常先进、现代且最近维护，但我不确定渲染简单的建筑物 3D 模型是否体积庞大。

我欢迎任何建议，无论其中一个或另一个更适合该任务，最好是实施示例。

干杯，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:55:34.520

我想你可能误解了这个过程是如何工作的。

我假设您想在客户端上呈现对象？

在这种情况下，您需要查看客户端技术。ASP.Net 或任何其他服务器端平台可以将数据传递给客户端，但您需要使用客户端技术来做到这一点。

我不知道它现在的确切位置，但我希望您需要使用 Silverlight、Flash 或可能的 HTML5 来显示。

HTML5 符合标准，但不太成熟，据我所知，您需要一个相当新的浏览器才能访问它： http: [//msdn.microsoft.com/en-us/library/hh535759(v=vs.85) .aspx](http://msdn.microsoft.com/en-us/library/hh535759(v=vs.85).aspx)

Silverlight 更成熟，应该与您的 Microsoft 工具集自然集成，但需要用户安装插件才能使用您的工具。我不知道它有多普遍，但这对你来说可能是个问题。如果您想要更快/更可实现的开发时间，我仍然可能会喜欢这个：[http ://forums.silverlight.net/t/225673.aspx/1](http://forums.silverlight.net/t/225673.aspx/1)

Flash 非常普遍，但您需要专有工具来开发它，我不知道它如何/是否会与 Microsoft 堆栈集成。我认为他们更喜欢你使用他们自己的东西。如果您想要在大多数当前浏览器上可用的东西，那很好，但我的感觉（如果我说实话，我希望）是随着 HTML5 的接管，它将失去货币。

当然，如果你是 1998 年的老派，你应该完全选择 VRML。

至于您使用的服务器平台，这基本上与渲染和显示无关。它的作用是传递数据。如果您使用的是 Windows 服务器，那么您可能希望查看 WCF 以将数据传递给您的客户端。

如果您想在服务器上渲染您的对象，然后使用这些渲染在客户端上创建图像或视频，这又是另一回事了。

# java - 在运行时更改 JMeter 中测试计划的线程数

> ID：10312281
> 
> 赞同：10
> 
> 时间：2012-04-25T08:48:43.513
> 
> 标签：java, jmeter, load-testing

我想在运行时更改 JMeter 测试计划的线程数。

我用谷歌搜索了我的问题并找到了使用 JMeter 插件的建议解决方案。但是在这个解决方案中，我必须在运行测试计划之前安排线程组，这是我不想要的。我还发现[了另一种可能的解决方案](http://www.havecomputerwillcode.com/blog/?p=518) ，它可以更改属性，但不会影响运行时的测试计划行为。

最终，我想要做的是更改线程组中给定的线程数，并让它立即增加或减少当前正在运行的测试计划中的线程数。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T09:13:35.080

恕我直言，这只是一个花哨的功能，在进行适当的性能测试时没有真正的好处。为了生成相关的测试输出（报告），您需要[可重复性](http://en.wikipedia.org/wiki/Repeatability)，以及明确定义的测试方法和场景。为了比较任何应用程序/服务器/基础架构更改的影响，您需要可重复性。

你是什​​么意思

> 我们无法预测我们网站的用户

这就是我们首先进行性能测试的原因。找出我们的应用程序/基础设施限制是什么。
即，您可以产生的最重要的指标是当并行用户数量发生变化时，您的应用程序响应时间如何变化。但不要在运行时无规律地改变。

使用[jMeter 插件的 Ultimate 线程组](http://jmeter-plugins.org/wiki/UltimateThreadGroup)，您可以涵盖任何可以想象的场景。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T16:27:06.033

简短的回答是：不，您不能在运行时动态更改线程数。每个线程计数值仅在第一次编译测试计划时读取一次，此后不再解析，因此它保持固定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-21T10:57:56.127

这个特性确实很有用，而且即使使用诸如 Loadrunner 之类的商业工具也难以实现。我会将其与找到扬声器的最大音量进行比较。您可以手动调高音量，直到它开始噼啪作响，然后稍微调低音量以保持最大音量。同样，要找到应用程序的峰值容量，您希望控制“调高音量”直到出现错误，然后稍微降低音量以查看它是否稳定。然后，您可以保持该负载以找到瓶颈所在。

无论如何，要回答这个问题，我过去所做的是使用外部影响，例如文件名或类似名称。然后将其与线程唯一引用结合起来，您可以控制哪些线程运行以及哪些线程被保持（通过暂停或类似方式）。

例如，如果您从 100 个线程开始，然后在特定位置创建一个名为“5.txt”的文件，您可以添加代码，这样如果线程看到它自己的引用等于或低于该数字，那么它可以跑。如果不是，那么它会暂停。在这个示例开始时，5 个线程将运行，95 个线程将暂停。然后您可以将文件重命名为“25.txt”，线程 6 到 25 将开始运行。它也会以另一种方式工作，将其更改为“20.txt”将意味着线程 21-25 再次暂停。

关键是启动足够多的线程以超过您的预期峰值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-09T19:36:06.380

您可以根据在启动线程中设置的变量对其进行更改。见下文。

[在 Jmeter 中，如何使用 beanshell 采样器变量设置可变数量的线程？](https://stackoverflow.com/questions/27828042/in-jmeter-how-do-i-set-a-variable-number-of-threads-using-a-beanshell-sampler-va)

但是，一旦线程组启动，您就无法对其进行修改。对于说这个功能没有用的人，我不同意。有许多类型的负载测试，并且它们在持续时间内运行的用户数量并不相同。以下是我们在我工作的银行进行的两种企业负载测试示例：

*   持续时间测试 - 相同数量的用户在整个时间内运行（可能有很短的启动期）
*   断点测试 - 逐渐增加用户数量，直到应用程序中断
*   尖峰测试 - 使用固定数量的用户运行，但偶尔
    会引入大量用户

断点测试会增加用户数量，直到应用程序中断（重点是查看您的应用程序可以扩展多高）。您可以使用线程组的“加速期”属性来完成此操作。如果将加速时间设置为 1000 并将线程数设置为 100，它将每 10 秒添加 1 个线程。

尖峰测试类似于持续时间测试，但在某些时间间隔会有大量用户登录。这用于衡量高峰时段的应用程序响应时间，或者如果您突然获得大量用户（非常真实场景）。

我发现 Jmeter 不能处理企业负载测试所需的所有负载测试场景。我正在考虑的一项工作是启动所有线程，但找到一种方法让其中一些线程进入睡眠状态。因此，您可以将线程数设置为 1000，但以某种方式使其中的 980 个处于休眠状态或什么也不做。然后也许当 time_in_seconds%5==0 （每 5 分钟）你允许其他线程运行 - 模拟尖峰测试。这个想法是您可以将线程硬编码为 1000，并且将始终有 1000 个线程在运行 - 但它们不必一直都在做某事。

（换句话说，你可能会找到一种方法，但你必须要有创意）

更新：我刚刚发现这个插件允许不同类型的测试。还没有尝试过，但看起来很有希望：http: [//jmeter-plugins.org/wiki/ThroughputShapingTimer/](http://jmeter-plugins.org/wiki/ThroughputShapingTimer/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T12:08:19.433

您可以使用命令行选项在运行时设置/更改线程数...

您可以使用函数调用，或对用户参数（又可以是函数）的变量引用，或对测试早期函数设置的变量的变量引用。有不止一种方法可以做到这一点。

假设您希望能够改变测试计划中的线程数。选择一个合适的属性名称，比如 group1.threads。用以下函数调用替换 GUI（或 JMX，如果你觉得勇敢的话！）中的线程数：

请在 JMeter 线程组中设置以下属性，如下所示 ${__property(group1.threads)}

然后，在启动 JMeter 时，在命令行中定义属性：

jmeter -Jgroup1.threads=10

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-22T14:01:40.807

> 我们无法预测我们网站的用户。

你当然可以。这就是您现有站点的 HTTP 日志的用途。您还可以使用来自 Omniture 或 CDN 日志等工具的日志。如果您在日志中查看实际用户 IP 地址、请求和引用者标签的组合，您将能够在您的站点上构建单个用户的遍历图。您将能够分析给定业务流程的高点击率唯一叶节点页面，以了解特定业务流程每小时发生的次数。您将能够通过查看 Omniture 等工具中的漏斗来检查放弃情况。如果您需要用于此分析的工具，我推荐 Splunk。它易于安装和配置。实现价值的时间非常快。

您用于分析的日志数据越多，您就越能接近用户在一天/周/月/现货销售/季度末/年末等期间所做的事情......您需要将某个时间点的实际值与较早时间点的实际值相结合，以预测随时间的增长，因为您需要允许性能测试模型的增长。

如果你没有得到正确的值，那么你的测试作为预测生产中将会/可能发生的事情的价值将非常低。这不是任何给定工具的失败，而是作为测试要求的一部分使用的实际负载模型的规划前端过程中的失败。如果您无法构建这些模型，那么您需要将可以的人拉入您的团队。

这种产生独立于工具的有效负载模型的能力是降低风险和抛负载测试之间的区别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-15T10:53:32.293

通过启用[BeanShell 服务器](http://jmeter.apache.org/usermanual/best-practices.html#beanshell_server)，您可以在运行时改变属性。只需启用它并在端口 9001 上 telnet（警告：不安全！）根据我所做的测试，不幸的是，它似乎没有在运行时应用线程数。但是，您仍然可以通过其他方式操纵测试的负载，例如应用使用名为“吞吐量”的属性参数化的[成本吞吐量计时器，并在运行时改变它，如下所示：](http://jmeter.apache.org/usermanual/component_reference.html#Constant_Throughput_Timer)

```
setprop("throughput","2000"); 
```

指南中对此进行了很好的解释。

# c# - LINQ vs sql - 带回太多行

> ID：10312282
> 
> 赞同：1
> 
> 时间：2012-04-25T08:48:48.863
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在尝试转换此查询

```
select top(10) *
from SOMETABLE
where Name = 'test' 
```

进入 linq 所以我认为它应该看起来像这样

```
 var c =
  (from l
  in db.SOMETABLE
  where l.Name= 'test'
  select l).take(10); 
```

但是当我查看服务器探查器时，我可以看到 linq 从表中获取所有数据，并且可能应用 WHERE 并从数据库中获取池数据。

问题是 SOMETABLE 有大约 10 000 000 条记录并且它不能快速工作。

我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T08:53:54.720

您发布的代码至少有 3 个错误，所以我认为这不是您的*实际*代码。要获得您描述的症状，最可能的原因是您在某处使用过，并且正在**从**`IEnumerable<T>`该处进行创作。要获得端到端查询组合（即在数据库中执行），您需要使用. 例如，以下内容已损坏：**`TOP``IQueryable<T>`**

 **```
IEnumerable<SomeType> data = db.SomeTable;

var c = (from l in data
         where l.Name == "test"
         select l).Take(10); 
```

但以下内容绝对没问题，请注意只有第一行发生了变化：

```
IQueryable<SomeType> data = db.SomeTable;

var c = (from l in data
         where l.Name == "test"
         select l).Take(10); 
```

注意到这也等同于：

```
IQueryable<SomeType> data = db.SomeTable;

var c = data.Where(l => l.Name == "test").Take(10); 
```

所以：确保你没有`IEnumerable<T>`过早地强迫它（或类似的，如列表）。

最后一点，如果您正在应用跳过/获取，IIRC 实体框架要求订购（如果您不应用则会出错） - 这进一步支持了我的猜测，即您已经`IEnumerable<T>`过早地下降，但是：如果您需要，请不要感到惊讶也指定一个`order by`。**

# mysql - 获取MYSQL的最后一行

> ID：10312285
> 
> 赞同：0
> 
> 时间：2012-04-25T08:49:11.307
> 
> 标签：mysql, sql, database

我有这个查询：

```
SELECT 
    s.last_spread, s.sd, s.mean, s.id
    ,c.id_ticker, c.coef
    ,t.ticker
    ,/*p.last,*/ p.price

FROM (SELECT * FROM spreads WHERE spreads.id_check=1 LIMIT 60,896) as s 

    INNER JOIN coef as c 
        ON c.id_spread = s.id

    INNER JOIN tickers AS t
            ON t.id = c.id_ticker

    LEFT JOIN (SELECT prices.id_ticker, MAX(prices.date) as last, prices.price FROM prices GROUP BY prices.id_ticker) AS p
            ON p.id_ticker = t.id

ORDER BY s.id, c.id 
```

最后一个 JOIN 没有返回正确的值....我需要获取代码的最后价格（所以每个代码的最后一行）。

在它返回第一个价格的那一刻，我如何更改整个查询以获取每个 ticker.id 的最后价格？( `p.id_ticker = t.id`)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:52:38.603

向此子查询添加 order by：

```
SELECT prices.id_ticker, MAX(prices.date) as last, prices.price 
FROM prices GROUP BY prices.id_ticker 
order by prices.id_ticker desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:55:55.250

使用 Ahaving 子句会很优雅：

```
LEFT JOIN (SELECT prices.id_ticker, prices.date as last, prices.price FROM prices GROUP BY prices.id_ticker HAVING prices.date = MAX(prices.date) ) 
```

**编辑：**但它不起作用**......**（见下面的评论）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:56:08.510

我会说 use`ORDER BY`和 a`LIMIT`只得到一个价格（最后一个价格）。

# android - 按屏幕大小而不是密度对可绘制对象进行分组

> ID：10312286
> 
> 赞同：0
> 
> 时间：2012-04-25T08:49:14.860
> 
> 标签：android

我已经阅读了这篇文章[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)，但仍然没有得到任何东西并需要建议。

我有 3 个 psd 文件，其中包含 240x320、480x800 和 720x1280 屏幕分辨率的设计。

由于我不知道密度，看起来我应该按屏幕尺寸对可绘制对象进行分组。我是正确的？我很困惑，因为应用程序应该支持平板电脑（通常是 mdpi）和 hdpi 手机。或者它不是正确的设计文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:55:07.047

您可以按屏幕尺寸或屏幕密度或两者进行分组。这一切都在该链接中进行了解释。

屏幕尺寸为：

> ```
> xlarge screens are at least 960dp x 720dp
> large screens are at least 640dp x 480dp
> normal screens are at least 470dp x 320dp
> small screens are at least 426dp x 320dp 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:05:53.703

您不应该使用屏幕分辨率，因为

1.  你几乎不可能覆盖所有的屏幕尺寸，例如我的手机是 320x480 而我朋友的平板电脑是 480x960。我敢打赌还有十几种不同的分辨率；正如大卫斯科特在他的回答中指出的那样，有什么是“小/普通/大/超大屏幕”的定义，但是这些定义中的关键词**至少**是：470x320 是普通屏幕，但 480x320 和 560x480 也是如此；甚至如果今天没有具有特定分辨率的设备，明天可能会有一个。

2.  即使分辨率相同，不同的像素密度也可能使您的设计在不同设备上看起来不同。

因此，我建议您坚持像素密度并避免静态设计。

# python - Python如何将关系数据放入mongodb+gridfs

> ID：10312291
> 
> 赞同：3
> 
> 时间：2012-04-25T08:49:27.380
> 
> 标签：python, mongodb, gridfs

如何将 1.000.000 个带有 css、js、img 文件的网页保存到 mongodb+gridfs 中？如何定义页面和html文件之间的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:06:17.143

GridFS 使用两个集合来存储包含对象元数据的数据**文件**和包含二进制数据的**块。**只要不干扰现有字段，您可以以任何方式扩展文件中的元数据，因此您可以“标记”您的对象，以您认为合适的任何方式描述它们，并以任何您想要的方式分隔它们 -文件类型、内容类型、语言等。

GridFS 规范中甚至提到了此功能：[http ://www.mongodb.org/display/DOCS/GridFS+Specification](http://www.mongodb.org/display/DOCS/GridFS+Specification)

或者，您可以自己创建一个完全独立的集合并以这种方式引用对象（可能通过存储文件_id）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:53:30.513

一般sql见这里-> mongodb： [http ://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart](http://www.mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart)

以及具体的嵌入和链接： [http ://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)

您也应该能够将其应用于 GridFS。

# java - 理解逻辑

> ID：10312295
> 
> 赞同：0
> 
> 时间：2012-04-25T08:49:43.870
> 
> 标签：java, logic

我有以下作业问题：

> 给定一个分数数组，如果数组中相邻的分数为 100，则返回 true。数组长度至少为 2。

这个问题是否意味着数组中的数字应该能被 100 整除？那么1如果在数组中也会让程序返回true吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T08:51:06.077

我相信你应该检查是否有两个值完全等于 100。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T08:57:36.297

问题是检查数组中是否连续出现数字“100”。

```
12 45 100 100 65 45 .... 
```

这个数组有 100 个彼此相邻

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T08:57:34.040

至于这个问题对我来说有意义，你应该检查数组中是否有任何值是 100。为此，一个简单的循环就足够了。

```
for (int i=0;i<score.length-1;i++){
    if (score[i]==100&&score[i+1]==100)
        return true;
}
return false; 
```

如果您想检查 100 的整除性，只需使用这个 if 语句而不是上面的那个。然而，这不是问题所要求的

```
if (score[i]%100==0&&score[i+1]%100==0) 
```

这一切都假设数组是一个整数数组

# .net - 为什么 try/catch 不能捕获访问冲突？

> ID：10312296
> 
> 赞同：4
> 
> 时间：2012-04-25T08:49:47.820
> 
> 标签：.net, vb.net, exception, exception-handling

我在一些偶尔会抛出预期异常的代码周围放置了一个 try/catch 块，但不是捕获它并显示消息框，而是停止调试器并提醒我该异常未处理。

如何处理此异常，以便我的代码在异常发生时不会停止？

![在此处输入图像描述](../Images/4513b14f4997200497837344a751de65.png)

```
Friend myDevInfo As New devInfo

        ''' <summary>
        ''' Closes the device handle obtained with CreateFile and frees resources.
        ''' </summary>
        ''' 
        Friend Sub CloseDeviceHandle()

            Try
                WinUsb_Free(myDevInfo.winUsbHandle)

                If Not (myDevInfo.deviceHandle Is Nothing) Then
                    If Not (myDevInfo.deviceHandle.IsInvalid) Then
                        myDevInfo.deviceHandle.Close()
                    End If
                End If

            Catch ex As System.AccessViolationException
                MsgBox("System.AccessViolationException")
            Catch ex As Exception
                Throw
            End Try

        End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:55:45.270

`try...catch`当没有附加调试器时，该块应该按预期工作。
您可以在 Debug -> Exceptions 下定义调试器中断的异常，我相信默认是 break on `AccessViolationException`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T13:47:09.837

访问冲突异常属于称为“损坏状态异常”的一类异常。在 .Net 4 中，Microsoft 决定不再使用 try .. catch 块来捕获这些内容。他们的理由是，在不造成更多损害的情况下，从损坏的状态异常中恢复需要理解和小心，并且如果应用程序关闭，用户的数据会更安全。

MSDN 会告诉你[如何扭转这个变化](https://msdn.microsoft.com/en-us/library/dd638517%28v=vs.110%29.aspx "<legacyCorruptedStateExceptionsPolicy> 元素")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-07T01:45:39.267

在您正在使用的函数的顶部使用此属性。

```
 [HandleProcessCorruptedStateExceptions()] 
```

只有不安全或受保护的内存才会发生此异常。未分配的内存。如果您使用此属性，则 clr 将检测到它，并且 try-catch 块工作正常，存在于：

```
System.Runtime.ExceptionServices; 
```

# java - 如何从命令行读取数组并使用 JAVA 中的泛型方法显示它们？

> ID：10312301
> 
> 赞同：0
> 
> 时间：2012-04-25T08:50:09.267
> 
> 标签：java, arrays, generics

我正在研究与 java 中的泛型相关的东西，我在互联网上找到了这个[例子](http://www.tutorialspoint.com/java/java_generics.htm)。这可能是一个简单的问题，但我想从使用泛型的人那里找到正确的答案。此通用方法将不同类型的数组作为输入参数并显示它们。现在我想通过从命令行读取这些数组来做到这一点。你能帮我找到正确的方法吗？谢谢。

```
public class GenericMethodTest
    {
       // generic method printArray                         
       public static < E > void printArray( E[] inputArray )
       {
          // Display array elements              
             for ( E element : inputArray ){        
                System.out.printf( "%s ", element );
             }
             System.out.println();
        }

        public static void main( String args[] )
        {
            // Create arrays of Integer, Double and Character
            Integer[] intArray = { 1, 2, 3, 4, 5 };
            Double[] doubleArray = { 1.1, 2.2, 3.3, 4.4 };
            Character[] charArray = { 'H', 'E', 'L', 'L', 'O' };

            System.out.println( "Array integerArray contains:" );
            printArray( intArray  ); // pass an Integer array

            System.out.println( "\nArray doubleArray contains:" );
            printArray( doubleArray ); // pass a Double array

            System.out.println( "\nArray characterArray contains:" );
            printArray( charArray ); // pass a Character array
        } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:03:24.050

我认为您必须将数据类型包含在命令行中，或者有一个通过启发式检测类型的例程。就像是

```
java GenericMethodTest "doubleArray" "1.1 2.2" 
```

你有两个参数，类型和数组。然后您将需要一个构造函数，它将第二个参数从字符串转换为数组，例如

```
public DoubleArray (String sin) {
    String[] ss = sin.split(" ")'
    double dd[] = new Double[ss.length];
    for (String s : ss) {
        dd[i++] = new Double(s);
    }
} 
```

我在科学编程中经常做这种事情，而且我通常会遇到数据类型的特殊情况。程序如何知道什么是整数、字符串或双精度数？你要么必须告诉它，要么必须给它一个猜测的机会。

# javascript - 在数据表中填充自定义下拉框

> ID：10312302
> 
> 赞同：0
> 
> 时间：2012-04-25T08:50:09.570
> 
> 标签：javascript, jquery, html, datatable

我正在尝试填充我在 JQuery 的数据表插件中创建的下拉框。我使用的代码是：

```
var oTable = $('#reqAllQueriesTable')
.dataTable(
{
 "sDom": '<"H"<"tools">lfrt>',
});
$("div.tools").html('Organize by Teams: <select id="booking_status"><option value="">Teams</option><option value="team1">Team 1</option><option value="team2">Team 2</option></select>'); 
```

我想用我的 Java 代码中的对象`select`的内容替换 HTML 中的静态内容。`List`这可以通过替换现有代码来实现吗？如果是，如何在这段代码中使用 Java 对象。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:51:51.757

得到了答案。我从调用 JSP 的 java 代码中传递了一个模型属性：

```
model.addAttribute("userTeams",userTeams); 
```

然后在 jQuery 数据表中，我覆盖 DOM 以调用`div`命名`myTools`：

```
var oTable = $('#reqAllQueriesTable')
.dataTable(
{
 "sDom": '<"H"<"myTools">lfrt>',
}); 
```

创建下拉列表的 div 如下所示：

```
$("div.myTools").html('Organize by Teams: <select id="teams"><option value="">Team</option><c:forEach var="userTeams" items="${userProjectTeams}"><option value="${userTeams.teamId}" onClick="javascript:takeAction(this.value)"> ${userTeams.teamtName}</option></c:forEach></select>'); 
```

# html - 相同的css代码但不同的输出

> ID：10312304
> 
> 赞同：0
> 
> 时间：2012-04-25T08:50:18.750
> 
> 标签：html, css

我这里有一个文件。

我的 html 看起来像这样：

```
<div id="banner">
<div id="bannerTextBlue"> <h1> lorem ipsum </h1> </div> 
<div id="bannerTextYellow"> <h1> dolor sit amet. </h1> </div>
</div> 
```

我的CSS是这样的：

```
#banner{
  background: #FFF;
  width: 1140px;
  margin:30px auto 0;
  border: 12px solid #323232;
  height: 448px;
  position:relative;
}

#bannerTextBlue{
  height: 90px;
  background: #027cd6;
  width: 600px;
  right: 0px;
  position: absolute;
  padding-left: 90px;
}

#bannerTextBlue h1{
  color: #FFFFFF;
  font-size: 88px;
  line-height: 50px;
  padding-right: 30px;
  text-transform: uppercase;
}

#bannerTextYellow{
  height: 60px;
  background: #f4b437;
  width: 500px;
  right: 0px;
  top: 100px;
  position: absolute;
  padding-left: 10px;
}

#bannerTextYellow h1{
  color: #FFFFFF;
  font-size: 50px;
  line-height: 35px;
  padding-right: 30px;
  text-transform: uppercase;
} 
```

但是输出不一样。它应该在 Chrome 中看起来不错，但在 Firefox 中它被破坏了。不知道这里的故障在哪里。请帮忙？我的css结构有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:00:18.917

有时，浏览器之间存在差异。检查 Firefox 的版本。我不确定这是否可行，但请尝试安装更新版本的 Firefox。或者为了确保它可以随时随地工作，任何浏览器都有一个浏览器数据包（我不确定这个术语），但它会确定用户的浏览器，它会自动调整到用户的浏览器。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:57:15.720

你确定你想要一个`font-size`比 更大的`line-height`吗？

这使得第二行（*在蓝色框中*）与第一行重叠......（*如果这就是你的意思**破坏***）

（*但在所有浏览器中都会发生相同的情况..*）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:18:20.810

Differences between browsers can be caused by the default settings in those browsers.

You're not specifying a font, so if FF has a different default font than Chrome, the result will be different.

There is also the minimum font size, but I guess that won't be a problem with your example here.

# python - 在 n 次函数调用后自动停止 scipy.optimize.fmin_bfgs（不是 BFGS 迭代！）

> ID：10312305
> 
> 赞同：1
> 
> 时间：2012-04-25T08:50:24.720
> 
> 标签：python, optimization, scipy, regression

我使用逻辑回归和**scipy.optimize.fmin_bfgs**来最小化成本函数。对于我的特定数据集，成本函数保持不变，并且 BFGS 不收敛，所以我想应用 lasso+ridge 正则化。

现在，我想尝试优化正则化参数 lambda1/2 的各种值的成本，以找到最佳组合：

```
for lambda1 in range(...):
    for lambda2 in range(..):
        scipy.optimize.fmin_bfgs(...) # Optimize cost with lambda1 and lambda2 
```

问题是，因为 BFGS 没有收敛，它在调用 lambda1/2 的第一个值时“永远”保持不变。

有没有办法在一段时间后自动停止 fmin_bfgs？maxiter参数对**我**没有帮助，因为我有 1000 个样本和大量特征/样本，所以它甚至没有在可接受的时间内完成一次这样的迭代。

在 scipy 0.11 中，fmin_bfgs 有一个**maxfun**参数——可以在 scipy 0.10 中以某种方式模拟吗？

**编辑：根据大众的需求，这里有一些相关的代码片段：**

计算成本的函数（应用通常的符号）：

```
def computeCost(theta, X, y):
    h = sigmoid(X.dot(theta.T))
    J = y.T.dot(log(h)) + (1.0 - y.T).dot(log(1.0 - h))
    J_reg2 = theta[1:]**2
    J_reg1 = theta[1:]
    cost = (-1.0 / m) * (J.sum() + LAMBDA2 * J_reg2.sum() + LAMBDA1 * J_reg1.sum())
    return cost 
```

调用 fmin_bfgs 函数：

```
initial_thetas = numpy.zeros((len(train_X[0]), 1))
myargs = (train_X, train_y)
theta = scipy.optimize.fmin_bfgs(computeCost, x0=initial_thetas, args=myargs) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:56:05.103

您的问题不在于迭代次数。lambda 数字没有改变的原因是优化不起作用。Scipy 应该为您计算出这些数字，而不是您通过 for 循环提供它们。

也许如果您可以包含更多代码，则更容易看到如何修复它。

# perl - Perl 的文件测试运算符 -f 对符号链接返回 true

> ID：10312309
> 
> 赞同：18
> 
> 时间：2012-04-25T08:50:45.857
> 
> 标签：perl, shell, unix, find

我曾经认为`-f`测试一个文件是为了看它是否是一个普通文件，而不是其他任何东西。但是 Perl 的行为似乎有所不同。我查了[perldoc](http://perldoc.perl.org/functions/-X.html) entry ，它说：

```
-f  File is a plain file. 
```

假设我有一个目录，其中包含一个名为 的文件`file1`和 5 个符号链接`1 2 3 4 5`，每个链接都指向`file1`，如下所示：

```
-rw-r--r-- file1
lrwxrwxrwx 1 -> file1
lrwxrwxrwx 2 -> file1
lrwxrwxrwx 3 -> file1
lrwxrwxrwx 4 -> file1
lrwxrwxrwx 5 -> file1
drwxr-xr-x ../
drwxr-xr-x ./ 
```

如果我使用过滤器在此目录上运行 find `-type f`，它会按预期提供输出：

```
%  find . -type f
./file1 
```

但是当我使用 -f 运算符运行 perl 脚本时，它会给出以下输出：

```
%  ls | perl -e 'while(<>) { chomp; print "$_\n" if -f $_ }'
1
2
3
4
5
file1 
```

当我添加测试时`-l`，它按预期工作：

```
%  ls | perl -e 'while(<>) { chomp; print "$_\n" if -f $_ and not -l $_}'
file1 
```

符号链接也被视为普通文件吗？如果是这样，为什么？我对文件测试的使用不正确吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-25T09:25:49.407

测试符号链接时，除非您使用符号链接测试，否则将对符号链接指向的事物进行`-l`测试。

这与行为相似的`stat`Linux`lstat`系统调用相似。也就是说，如果您`stat`是符号链接，您将获得符号链接目标的结果，而如果您`lstat`是符号链接，您将获得符号链接本身的结果。这种行为是有意的，因此天真的程序不必关心符号链接，符号链接将按预期工作。

您应该会发现，如果您的符号链接指向一个目录，则`-f`测试为假而`-d`测试为真。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T15:19:47.077

## 快速解决方案

```
$ ls | perl -lne '打印如果 stat && -f _'
1
2
3
4
5
文件 1

$ ls | perl -lne '打印如果 lstat && -f _'
文件 1
```

## 符号链接和查找

默认情况下，GNU`find`从不取消引用或遵循符号链接，但[`find`文档](http://www.gnu.org/software/findutils/manual/html_node/find_html/Symbolic-Links.html#Symbolic-Links)描述了更改此策略的开关。

> 控制 find 相对于链接的行为的选项如下：-
> 
> `-P`
> `find`根本不取消引用符号链接。这是默认行为。此选项必须在命令行上的任何文件名之前指定。
> 
> `-H`
> `find`不取消引用符号链接（命令行上的文件名被取消引用的情况除外）。如果无法取消引用符号链接，则使用符号链接本身的信息。此选项必须在命令行上的任何文件名之前指定。
> 
> `-L`
> `find`在可能的情况下取消引用符号链接，在不可能的情况下，它使用符号链接本身的属性。此选项必须在命令行上的任何文件名之前指定。使用此选项也意味着与该选项相同的行为`-noleaf`。如果您稍后使用`-H`or`-P`选项，这不会关闭`-noleaf`。
> 
> `-follow`
> 此选项构成“表达式”的一部分，必须在文件名之后指定，但在其他方面等价于`-L`. 该`-follow`选项仅影响出现在命令行上的那些测试。此选项已弃用。在可能的情况下，您应该`-L`改用。

## 将查找命令转换为 Perl

标准发行版附带一个与旧 Unix 系统[`find2perl`](http://search.cpan.org/~flora/perl-5.14.2/x2p/find2perl.PL)兼容的实用程序。`find`

```
$ find2perl 。-类型 f | perl
./file1
```

相反，我们可以要求文件本身是纯文件或指向纯文件的链接。

```
$ find2perl 。-follow -type f | perl
./1
./2
./3
./4
./5
./file1
```

在代码生成中，[从 File::Find 模块](http://search.cpan.org/~flora/perl-5.14.2/lib/File/Find.pm#find)传递给`find2perl`的默认子是`wanted`[`find`](http://search.cpan.org/~flora/perl-5.14.2/lib/File/Find.pm#find)

```
sub wanted {
    my ($dev,$ino,$mode,$nlink,$uid,$gid);

    (($dev,$ino,$mode,$nlink,$uid,$gid) = lstat($_)) &&
    -f _
    && print("$name\n");
} 
```

但是有了`-follow`，我们得到

```
sub wanted {
    my ($dev,$ino,$mode,$nlink,$uid,$gid);

    (($dev,$ino,$mode,$nlink,$uid,$gid) = stat($_)) &&
    -f _
    && print("$name\n");
} 
```

请注意，唯一的区别是`wanted`调用[`stat`](http://perldoc.perl.org/functions/stat.html)还是[`lstat`](http://perldoc.perl.org/functions/lstat.html)，后者被记录为

> **`lstat *EXPR*`**
> **`lstat`**
> 
> 与函数执行相同的操作[`stat`](http://perldoc.perl.org/functions/stat.html)（包括设置特殊`_`文件句柄），但统计符号链接而不是符号链接指向的文件。如果您的系统上未实现符号链接，则正常运行[`stat`](http://perldoc.perl.org/functions/stat.html)。有关更多详细信息，请参阅[`stat`](http://perldoc.perl.org/functions/stat.html).
> 
> 如果省略*EXPR*`$_` ，则为 stats 。

正如示例输出所示，您可以使用 filetest 运算符表达您的意图，但可以通过选择vs`find2perl`来精确了解符号链接的语义。`stat``lstat`

## 那个有趣的`_`令牌

上述`_`快速解决方案的末尾是[`lstat`文档](http://perldoc.perl.org/functions/lstat.html)提到的特殊文件句柄。它保存了最新结果的副本，`stat`或者`lstat`作为避免重复进行那些昂贵的系统调用的一种方式。[Filetest 操作符](http://perldoc.perl.org/functions/-X.html)，例如`-f`, `-r`, `-e`,`-l`也填充这个缓冲区：

> 如果任何文件测试（或`stat`or`lstat`运算符）被赋予由单独下划线组成的特殊文件句柄，则使用前一个文件测试（或`stat`运算符）的 stat 结构，保存系统调用。（这不适用于`-t`，您需要记住这一点，`lstat`并将`-l`值保留在符号链接的 stat 结构中，而不是真正的文件中。）（此外，如果 stat 缓冲区被`lstat`调用填充，`-T`并将`-B`重置它的结果`stat _`）。例子：
> 
> ```
> print "Can do.\n" if -r $a || -w _ || -x _;
> 
> stat($filename);
> print "Readable\n" if -r _;
> print "Writable\n" if -w _;
> print "Executable\n" if -x _; 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T16:12:49.467

默认情况下，所有文件测试运算符（除了`-l`）都`stat()`用于测试，这意味着它们对符号链接是透明的。`-f`在常规文件上返回 true，或在常规文件上返回符号链接。

为了使用它`lstat()`，您应该首先`lstat`在特殊文件句柄上使用文件测试，该`_`文件句柄存储最近`stat`或`lstat`操作的结果。

```
perl -e 'while(<>) { chomp; print "$_\n" if lstat $_ && -f _ }' 
```

# x11 - Gdk-WARNING **: /build/....../gdkdrawable-x11.c:952 drawable 不是像素图或窗口

> ID：10312312
> 
> 赞同：1
> 
> 时间：2012-04-25T08:51:03.337
> 
> 标签：x11, ubuntu-11.10, sublimetext, gdk, pixmap

我的操作系统是Ubuntu 11.10，我从终端启动Sublime Text 2，每次操作终端都会出现这个Gdk-warning，很烦人。如何解决？

```
$ subl . &
[1] 4294
$ 
(subl:4294): Gdk-WARNING **: /build/buildd/gtk+2.0-2.24.6/gdk/x11/gdkdrawable-x11.c:952 drawable is not a pixmap or window
(subl:4294): Gdk-WARNING **: /build/buildd/gtk+2.0-2.24.6/gdk/x11/gdkdrawable-x11.c:952 drawable is not a pixmap or window
(subl:4294): Gdk-WARNING **: /build/buildd/gtk+2.0-2.24.6/gdk/x11/gdkdrawable-x11.c:952 drawable is not a pixmap or window 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:18:59.777

要解决此问题，您必须查看应用程序的源代码，对其进行修复并重新编译。Gdk 发出警告，但这可能是因为应用程序滥用了该库。

不幸的是，在 Gtk+ 应用程序上看到这些错误有点常见......太糟糕了，一些开发人员不关心修复它们......

另一种解决方案是启动应用程序，将其重定向`stdout`和/或重定向`stderr`到其他地方：`subl . > /dev/null 2>&1 &`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-28T12:41:34.470

我知道的老问题，但万一其他人被这个错误刺痛了。这是因为该程序使用了 gtk 的[输入法](http://developer.gimp.org/api/2.0/gtk/GtkIMContext.html)api，它大致允许您将中文和日文字符输入到输入小部件中。api不好用，有很多坑。见[http://lists.maemo.org/pipermail//maemo-developers/2006-January/002337.html](http://lists.maemo.org/pipermail//maemo-developers/2006-January/002337.html)

在这种情况下，程序很可能不会`gtk_im_context_set_client_window`使用已实现的 gdk 窗口进行调用。正确使用 api 是一项要求，但文档对此并不十分清楚。然后，您在每次按键时都会收到上述警告，但前提*是*您实际上运行了[IBus](https://wiki.archlinux.org/index.php/IBus)守护程序。大多数人没有任何用处，因为他们不需要输入亚洲字符，所以他们永远不会看到警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-02T09:25:04.010

一个非常古老的问题的另一个答案，但在从 wxpython 2.8 升级到 wxpython 3.0 之后，我遇到了同样的问题。
这个问题似乎源于 gtk.gtk.Drawable() 可能稍微改变了它处理窗口身份的方式或 wxpython 3.0 如何处理对窗口 ID 的请求。
要访问曾经工作的窗口 ID（在 Linux 上）`GetHandle()`，它不再起作用，而是在上面的问题中出现错误。您现在必须使用`GetId()`.

引用`gtk`手册：

```
Attributes
"handle"    Read    The handle of the MS Windows window associated with the drawable. Not supported on X11.
"xid"   Read    The id of the X window available with the drawable. Not supported on MS Windows 
```

我很欣赏这不是 wxpython 问题，但如果`gtk`以其他方式使用，同样的规则将适用。

# c - 让我的 LAN 中的主机在特定端口上侦听

> ID：10312322
> 
> 赞同：0
> 
> 时间：2012-04-25T08:51:46.367
> 
> 标签：c, linux

我正在Linux下用C语言开发一个网络游戏，这样局域网内的用户就可以互相玩了。因此，每台主机上都运行着一个服务器，监听一个特定的端口。

所以客户端必须实现对同一个局域网内所有监听端口的主机的扫描。我可以使用 nmap，但是 nmap 会产生太多我必须用管道计算的信息，不是吗？

请让我知道您是否认为以下想法合适。

如果我知道我自己的 IP 地址，我就会知道 IP 地址的类型，AB 或 C，而且我也会知道 IP 中针对主机的部分。因此，使用套接字系统调用“连接”到指定端口，我能够知道我的网络中提供此服务的所有主机。

你觉得什么更好？？

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:06:48.227

用自己的ip做一个广播，让其他人用他们的ip回复你，就这么简单。您可以为此使用 avahi (zeroconf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:24:26.117

使用广播或多播-多播是一种特殊类型的广播数据，仅对感兴趣的客户端。在这里查看：http: [//www.ibiblio.org/pub/linux/docs/howto/other-formats/html_single/Multicast-HOWTO.html](http://www.ibiblio.org/pub/linux/docs/howto/other-formats/html_single/Multicast-HOWTO.html)

# php - 包含 & 时获取 youtube 视频 ID

> ID：10312324
> 
> 赞同：0
> 
> 时间：2012-04-25T08:52:05.320
> 
> 标签：php, html, forms, youtube

这是网址：

[http://www.youtube.com/watch?src_vid=1OO30GoDSxg&feature=iv&annotation_id=annotation_787245&v=lsTEFZXJy28](http://www.youtube.com/watch?src_vid=1OO30GoDSxg&feature=iv&annotation_id=annotation_787245&v=lsTEFZXJy28)

目前我正在使用此代码获取 ID

```
$url = $video.'&';
$pattern = '/v=(.+?)&+/';
preg_match($pattern, $url, $matches);
echo $matches[1]; 
```

如果我在没有 html POST 表单的情况下对其进行测试，它就可以工作，因为它看起来像 html 表单将链接更改为[http://www.youtube.com/watch?src_vid=1OO30GoDSxg](http://www.youtube.com/watch?src_vid=1OO30GoDSxg)

//编辑

我有一个简单的 html 表单，当单击提交按钮时，我将使用 ajax 的数据发送到 php 页面。如果我回显 $_POST['video']; 我得到[http://www.youtube.com/watch?src_vid=1OO30GoDSxg](http://www.youtube.com/watch?src_vid=1OO30GoDSxg)但插入的网址是[http://www.youtube.com/watch?src_vid=1OO30GoDSxg&feature=iv&annotation_id=annotation_787245&v=lsTEFZXJy28](http://www.youtube.com/watch?src_vid=1OO30GoDSxg&feature=iv&annotation_id=annotation_787245&v=lsTEFZXJy28) .. soo 为什么会这样正在发生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:55:45.003

```
$parts = parse_url($url);
parse_str($parts['query'], $query);
echo $query['src_vid']; 
```

[`parse_url()`](http://php.net/manual/en/function.parse-url.php)
[`parse_str()`](http://php.net/manual/en/function.parse-str.php)

# firefox - 由于内容大，Firefox 中的浮动 div 转到下一行

> ID：10312326
> 
> 赞同：0
> 
> 时间：2012-04-25T08:52:08.697
> 
> 标签：firefox, html, newline, css-float

我遇到了一些不正常的情况，使用 html 标记。当前使用两个浮动 div

```
 .navigation 
 {
     width: 200px;
     float: left;
 }

 .content
 {
     float: left;
 } 
```

问题是Firefox将第二个div移动到下一行，只有它的内容大于页面宽度-200px。如何解决此问题以适应没有 max-width 属性的页面空间的第二个 div 其余部分，因为我的内容显示在从 1024 到 1980 像素宽度的不同分辨率监视器中。目前仅在 Firefox 中发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:23:26.457

如果你有一个父容器，你可以给它`padding-left: 200px`和`.navigation { margin-left: -200px; }`. 这样你就可以摆脱`float: left;`内容，因为它总是由父母填充。

# javascript - Google Closure 将代码划分为编译单元

> ID：10312327
> 
> 赞同：0
> 
> 时间：2012-04-25T08:52:13.647
> 
> 标签：javascript, google-closure-compiler

我的 JavaScript 库变得相当大而且用 Closure 编译起来很慢。我想创建一个只编译更改模块的生成文件。但是，出于大小和安全原因，我仍然想使用 ADVANCED_OPTIMIZATIONS 重命名模块内容，以及从其他模块调用的那些函数。有没有合理的方法来做到这一点？

基本上我想编译模块 A 并将从实际类成员名称到缩小版本的映射存储在某处。然后在编译模块 B 时，它应该翻译访问模块 A 的代码以使用正确的缩小名称，就像我一次编译整个东西一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:15:44.993

最终，您无法获得全局死代码删除和单独编译。您必须以某种方式导出某种接口，让编译器知道您对要保留的代码有外部使用。

# xslt - 在 XSLT 中获取当前的 unix 时间戳

> ID：10312328
> 
> 赞同：1
> 
> 时间：2012-04-25T08:52:38.423
> 
> 标签：xslt, datetime, timestamp, xslt-1.0

如何在 XSLT 中获取当前的 unix 时间戳？

我需要 XSLT 1.0 解决方案，但如果您知道 XSLT 2.0 解决方案，请随意提及。

我需要 unix 时间戳，而不仅仅是任何格式的日期和时间 - 这个问题之前以[最简单的方式被问过，以通过 XSL 获取当前的 unix 时间戳，](https://stackoverflow.com/questions/2867114/easiest-way-to-get-current-unix-timestamp-via-xsl)但接受的答案不是 unix 时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:52:34.377

Plain XSLT/XPath 1.0 不提供任何日期/时间函数，但如果[EXSLT](http://www.exslt.org/)是一个选项，您可以使用它的[date 模块](http://www.exslt.org/date/index.html)。我还没有测试过，但应该可以通过这种方式获取当前的 Unix 时间戳：

```
date:seconds(date:difference('1970-01-01T00:00:00', date:date-time())) 
```

# c# - 在从客户端到业务层的调用之间将数据保存在列表中

> ID：10312331
> 
> 赞同：1
> 
> 时间：2012-04-25T08:52:48.377
> 
> 标签：c#, web-services, silverlight, windows-phone-7

我有一个 Windowsphone 客户端，它通过 Web 服务调用业务层类（C# 类）。

在我的业务层类中，它是一个 C# 类，而不是我拥有的 silverlightclass`List<int> numbers = new List<int>()` 并且从业务层类中的一个方法中，列表中充满了数字。在此方法用数字填充列表后，再次调用客户端层并调用我的客户端中的一个新方法，我们再次回到业务层。这是问题所在，我想`List<int> numbers`在从客户端层到业务层的调用之间保持填充。现在每次调用业务层时`List<int> numbers`都会变空。

在 silverlight 类中，我可以使用隔离存储在应用程序级别保持数据活动。在 asp.net 中，我可以使用应用程序状态、会话或其他任何内容。

如何将此列表存储在 C# 类中以在调用之间将数据保存在列表中？

第一次调用
Client -> webservice -> businesslayer =`List<int> numbers`获取值
第二次调用（问题）
Client -> webservice -> businesslayer = `List<int> numbers`我希望列表保留第一次调用的值，但它是空的，因为我无法将列表保存到ApplicationState 或独立存储之类的东西。

这是我关于这个问题的代码

```
 public class TimereportDataAccess
    {
        TimereportDBEntities1 context = new TimereportDBEntities1();

        List<int> dayId = new List<int>(); // Used in sendDays() and sendWeeks()
        bool submitStatus = true; // Used in sendDays() and sendWeeks()

        public List<int> sendDays(List<Common.Day> days, bool status)
         {
            TimereportMappers mapper = new TimereportMappers();

             foreach(var item in mapper.dayMap(days))
             {
                context.Days.AddObject(item);
                context.SaveChanges();
                dayId.Add(item.Id);
             }

            if (status == true)
            {
                 submitStatus = true;
            }
            else
             {
                 submitStatus = false;
             }

              return dayId;
         }

         public void sendWeeks(List<Common.Week> weeks)
        {
            TimereportMappers mapper = new TimereportMappers();

             foreach (var item in mapper.weekMap(weeks))
             {              
                  context.Weeks.AddObject(item);
             }
             context.SaveChanges();

             int firstday;
             firstday = dayId.FirstOrDefault();
             if (submitStatus == true )
             {
                int reportId = (from u in context.Users
                                join r in context.Reports on u.Id equals r.UserId
                                join w in context.Weeks on r.Id equals w.ReportId
                                join d in context.Days on w.DayId equals d.Id
                                where d.Id.Equals(firstday)
                                select r.Id).SingleOrDefault();

                Reports report = context.Reports.SingleOrDefault(i => i.Id == reportId);
                report.Status = "submitted";
                context.SaveChanges();
             }

             dayId.Clear();            
         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:03:26.657

为了使您的对象持久保存在内存中，首先您需要确保您的 wcf 服务不在每次调用模式下工作。如果是这种情况，每次调用服务时，都会生成一个带有新对象的新线程。我假设您已根据会话标记了您的服务。

然后您可以将对象标记为静态，并在第一次调用时，您可以从数据库中获取数据；当服务收到另一个呼叫时，您可以检查您的列表是否已填充并发送回内存列表。

另一方面，这种方法存在问题；如果数据库发生变化怎么办？即使数据库发生变化，列表也保持不变。因此，您需要使用某种脏机制并将您的列表标记为脏。每当它变脏时，您都需要从数据库中再次获取它。

如果您认为您的列表没有改变，那么您不需要将它存储在数据库中，您可以使用一个 XML 文件。

# objective-c - 两个 UIScrollview

> ID：10312334
> 
> 赞同：-3
> 
> 时间：2012-04-25T08:53:01.817
> 
> 标签：objective-c, ios, cocoa-touch

我能够在我的应用程序中运行一个 UIScrollview，我的目标是在一个视图中运行两个 UIScrollview。我如何能够将两个 UIScrollview 实例放入我的 nib 文件中，并将它们的两个数据源/委托都绑定到视图控制器正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:55:12.723

你试过这样做吗？当时出现了哪些问题？您只需将它们添加到您的 xib 中，一切都可以正常工作。在您的委托中，您只需检查确切的名称`scrollview`并相应地执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:55:55.407

是的，你可以这么做。如果您查看[UIScrollViewDelegate 参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)，您将看到所有委托方法都接受`UIScrollView`触发调用的实例作为参数。这样当多个`UIScrollView`实例共享一个委托对象（这是您正在尝试做的事情）时，委托仍然可以确定哪个`UIScrollView`触发了每个事件/委托回调。

# cursor - 带有自定义光标适配器和“空”选择的微调器

> ID：10312335
> 
> 赞同：1
> 
> 时间：2012-04-25T08:53:06.293
> 
> 标签：cursor, spinner, adapter

我有光标，它从我的 CarProfile 表中选择记录，并使用自定义适配器在微调器选择中显示品牌、型号和 linenceplate。我的问题是我想为第一个项目选择“全部”，所以如果选择我可以显示所有汽车的信息。我的代码是：

```
 // spinner 1
        mDbAdapter.open();
        Cursor cursorCP = mDbAdapter.fetchAllProfiles();
        startManagingCursor(cursorCP);
        mDbAdapter.close();

        MyCustomAdapter ad = new MyCustomAdapter(this, cursorCP);
        spinCP.setAdapter(ad);

    public class MyCustomAdapter extends CursorAdapter {

    public MyCustomAdapter(Context context, Cursor c) {
        super(context, c);

    }
    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        TextView nameTextView = (TextView) view
                .findViewById(android.R.id.text1);

        String brand = cursor.getString(cursor
                .getColumnIndex(DefaxedDbAdapter.KEY_BRAND));
        String model = cursor.getString(cursor
                .getColumnIndex(DefaxedDbAdapter.KEY_MODEL));
        String licence = cursor.getString(cursor
                .getColumnIndex(DefaxedDbAdapter.KEY_LICENCEPLATE));
        nameTextView.setText(brand + "-" + model + "-" + licence);
    }
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View view = View.inflate(context,
                android.R.layout.simple_spinner_dropdown_item, null);
        return view;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:52:46.387

好的，我最后的解决方法是在 hashmap 的帮助下使用数组适配器来存储 id。这是我使用的代码

```
 ArrayList<String> arr = new ArrayList<String>();
    arr.add(DefaxedDbAdapter.ALL_LABEL);

    hm = new HashMap<String, Integer>();

    while (!cursorProfiles.isAfterLast()) {
        int rowId = cursorProfiles.getInt(cursorProfiles
                .getColumnIndex(DefaxedDbAdapter.KEY_ROWID));
        String brand = cursorProfiles.getString(cursorProfiles
                .getColumnIndex(DefaxedDbAdapter.KEY_BRAND));
        String model = cursorProfiles.getString(cursorProfiles
                .getColumnIndex(DefaxedDbAdapter.KEY_MODEL));
        String licencePlate = cursorProfiles.getString(cursorProfiles
                .getColumnIndex(DefaxedDbAdapter.KEY_LICENCEPLATE));
        arr.add(brand + "-" + model + "-" + licencePlate);
        hm.put(brand + "-" + model + "-" + licencePlate, rowId);
        cursorProfiles.moveToNext();
    }

    ArrayAdapter<String> adapterProfiles = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_dropdown_item, arr);
    profilesSpinner.setAdapter(adapterProfiles); 
```

然后从微调器中选择一个项目后，您可以获得这样的 id

```
 if (profilesSpinner.getSelectedItemId() != 0) {

                String tmp = profilesSpinner.getSelectedItem().toString();
                carId = hm.get(tmp);

                if (alreadySet) {
                    SQLquery += " AND expenses.carId =" + carId;
                } else {
                    SQLquery += " WHERE expenses.carId =" + carId;
                }
            } 
```

# html - 这是什么图形？

> ID：10312337
> 
> 赞同：-3
> 
> 时间：2012-04-25T08:53:14.593
> 
> 标签：html, animation, css

[http://googleblog.blogspot.in/](http://googleblog.blogspot.in/)

当您将鼠标移到球上时，球会反弹。谁能告诉这是怎么做到的。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:11:16.260

每个球都是这样制作的 div：

```
<div style="position: absolute; z-index: -1; border-top-left-radius: 400px; border-top-right-radius: 400px; border-bottom-right-radius: 400px; border-bottom-left-radius: 400px; background-color: rgb(68, 134, 197); -webkit-transform: translate(0.13934886012209222px, 15.280991621327088px); width: 40.078411732250885px; height: 40.078411732250885px; "></div> 
```

圆形是由于`-webkit-transform:matrix()`;

移动是用普通的 javascript 进行的，捕获鼠标按钮和数学公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:45:04.687

它带有圆角 div 和一些 CSS3 技巧的纯 CSS

# networking - 为什么 traceroute 发送 UDP 数据包而不是 ICMP 数据包？

> ID：10312344
> 
> 赞同：16
> 
> 时间：2012-04-25T08:53:39.763
> 
> 标签：networking, udp, icmp, traceroute

根据 Stevens (TCP/IP Illustrated) 的说法，**traceroute**程序将 UDP 数据包发送到具有增量 TTL（1、2、3 等）的目标主机，以从**ICMP TTL EXPIRED**消息中获取中间跃点信息。
“*目的地已到达*”条件是**ICMP PORT UNREACHABLE**消息，因为 traceroute 寻址一个具有高数字的随机端口（即：不太可能有人在那里监听）
所以我的问题是：是否存在技术原因（缺点、RFC 等？ ) 使用 UDP 数据包而不是使用例如**ICMP 回显请求**消息（具有增加的 TTL）并使用**回显答复**作为结束条件？
我知道 ICMP 回显回复可能会被中间的防火墙或其他网络设备过滤掉，但我想这也可能发生在 UDP 数据包中；）

非常感谢
塞尔吉奥

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T10:59:01.140

这实际上是进行跟踪路由的“旧”方法。我想主要的动机是发送普通的 UDP 数据包不需要特殊权限，就像发送 ICMP 数据包一样（原始套接字或等效的）。这就是为什么 eg`ping`通常将 setuid 设置为 root 的原因，这在安全方面是一个很大的风险。

现在`traceroute`还支持 ICMP 和 TCP 探测数据包，因此您更有可能偷偷通过防火墙，而这些防火墙很可能在没有考虑的情况下部署。这也意味着`traceroute`您的系统上可能也是 setuid root。请参阅其手册页，尤其是有关可用方法的部分：http: [//linux.die.net/man/8/traceroute](http://linux.die.net/man/8/traceroute)

# .htaccess - 我无法浏览我的网站

> ID：10312345
> 
> 赞同：0
> 
> 时间：2012-04-25T08:53:40.243
> 
> 标签：.htaccess, codeigniter, http-status-code-404

我刚刚托管了我的网站，但遇到了一些困难。我使用了codeigniter框架。问题是这样的，当我尝试加载我的网站时，它可以很好地加载索引页面，但是当我尝试浏览到其他页面时，它会出现这个错误，

> 未找到
> 
> 在此服务器上找不到请求的 URL /home。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

我的 htaccess 文件错误，这是正确的配置。希望这可以帮助任何陷入同样混乱的人。感谢所有付出时间的人。:-)

RewriteCond 上的 RewriteEngine $1 !^(index.php|(.*).swf|user_guide|profiles|images|min|assets|robots.txt) RewriteRule ^(.*)$ index.php/$1 [L]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:58:53.117

如果您使用的是 apache，则必须安装和配置 mod_rewrite 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T21:46:02.587

通常情况下，CodeIgniter 不能`uri_protocol`正确检测到。这导致索引页面加载，但其他页面 404ing。检查您`uri_protocol`的 config.php。我很幸运将其设置为`PATH_INFO`而不是`AUTO`.

在大多数共享共享主机上，`mod_rewrite`默认启用。检查 phpinfo()。此外，您的`.htaccess`文件应如下所示：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [NC,L,QSA] 
```

# c# - 使用 ASP.Net 中的 SOAP API 将购物车项目发送到 Paypal

> ID：10312347
> 
> 赞同：2
> 
> 时间：2012-04-25T08:53:57.477
> 
> 标签：c#, asp.net, paypal

我在使用 PayPal SOAP API 时有点发疯。实际流程运行良好，我的意思是我重定向到 Paypal，流程重定向回来，我无法接受订单并处理它。

我遇到的问题是我似乎无法将购物车中的内容发送到贝宝页面，以概述他们所支付的费用。我尝试使用 PaymentDetails 数组，这种方法适用于一个项目，但多个项目（和多个 paymentDetail 对象）失败了，因为我认为我正试图从多个卖家那里收取款项，这是有道理的，但我不是。

有谁知道这如何与.Net一起工作，或者对我应该将这些物品放在哪里有任何想法，我找到了一些关于自定义 espress 结帐流程的文档，但这是针对 NVP API 的，我似乎无法找到相同的信息SOAP API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:27:07.487

我正在寻找正确的区域，错误的焦点。PaymentDetails 对象包含项目所在的 PaymentDetailsItem 数组，代码需要整理，但如果其他人需要它，应该给出总体思路。

```
 PaymentDetailsType[] pmtDetails = new PaymentDetailsType[1];
    pmtDetails[0] = new PaymentDetailsType();
    var pmtIndex = 0;

    PaymentDetailsItemType[] items = new PaymentDetailsItemType[cartItems.Count];

    foreach (var item in cartItems)
    {
        var i = new PaymentDetailsItemType()
        {
            Name = item.productName,
            Number = item.productID.ToString(),
            Quantity = item.quantity.ToString(),
            Amount = new BasicAmountType(){ currencyID = CurrencyCodeType.GBP, Value = item.productPrice.ToString() }
        };
        items[pmtIndex] = i;
        pmtIndex++;
    }
    //reqDetails.p
    //reqDetails.PaymentDetails = pmtDetails;
    //hOrderTotal.Value
    // 
    pmtDetails[0].PaymentDetailsItem = items;
    pmtDetails[0].OrderTotal = new BasicAmountType() { currencyID = CurrencyCodeType.GBP, Value = HttpContext.Current.Session["_OrderTotalLessShippingAmount"].ToString() };
    reqDetails.PaymentDetails = pmtDetails; 
```

# php - php中的简单登录系统

> ID：10312350
> 
> 赞同：0
> 
> 时间：2012-04-25T08:54:16.847
> 
> 标签：php, session, session-variables

我有一个用 php-html-mysql 设计的网站。有一个用户登录系统。用户类型为 3。

1.  行政
2.  用户
3.  访客

这 3 种类型的用户在页面中具有不同类型的访问权限。MENU 项目不同。比如说，管理员可以编辑、删除、更新一些信息，但免费用户不能。

我已经创建了页面。但是我怎样才能区分每个页面的访问权限？我的意思是，我必须在每个页面中加载菜单。但是对于管理员来说，菜单项会有所不同，而不是用户，而且访问者也会有所不同。

我正在尝试使用 SESSION，但不确定如何使用它。以及我如何申请我的方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:58:15.047

您需要在用户表中的数据库中创建“user_level”或另一个字段，具有 0 或 1 个可能的值...如果用户级别为 0，则用户为简单用户，否则为 1，则用户为管理员。在用户登录时，从“user_level”字段保存会话“user_level”。

然后在每一页检查：

```
<?
if($_SESSION['user_level'] == 1) { display_menu_for_admin(); }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:03:57.537

您需要首先创建访问级别。首先，请为处理会话、菜单创建单独的文件。创建一个将确定对文件的访问权限的类。在每一页上，调用这个类函数，你就完成了访问级别。

例如，创建一个用于处理菜单项的文件。如果它们完全不同，则根据访问级别，在文件之间切换。另外，如果菜单有细微的变化，只需添加 if else 条件。这样，您将获得更简单的菜单系统。将此应用于其他站点功能。例如管理站点变量等。仅授予管理员用户访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:56:31.830

在任何页面中检查用户。因此，如果您有一个**edit.php**脚本，请在顶部检查它：

```
<?php

if ($_SESSION['user']['user_type'] != 'admin') {
    die('You do not have permission to view this page.');
}

// continue showing edit form 
```

我不知道您存储用户的会话结构或数据库结构的设置，因为您没有提供它们，所以这是我或任何人可以提供的最好的。

# mysql - 在 mySQL 中检查多个表

> ID：10312355
> 
> 赞同：6
> 
> 时间：2012-04-25T08:54:58.700
> 
> 标签：mysql

# 问题：

我对 mySQL 相当陌生，我什至不知道从哪里开始。我想知道如何编写一个简单的函数，该函数根据分布在许多表中的值返回真或假。

# 细节：

这是我的表格的相关部分（所有引擎都是`innodb`）。当您继续阅读时，您将看到数据库只是存储用户、组、文件以及这些用户/组的这些文件的权限。

**用户表**：

```
CREATE TABLE IF NOT EXISTS USER
(
   ID                 INT NOT NULL auto_increment,

   PRIMARY KEY(ID)
) 
```

**组表：**

```
CREATE TABLE IF NOT EXISTS GROUP
(
   ID           INT NOT NULL AUTO_INCREMENT,

   PRIMARY KEY(ID)
) 
```

**组成员表：**

```
CREATE TABLE IF NOT EXISTS GROUPMEMBERSHIP
(
   ID           INT NOT NULL AUTO_INCREMENT,
   USERID       INT NOT NULL,
   GROUPID      INT NOT NULL,

   UNIQUE ( USERID, GROUPID ),
   PRIMARY KEY(ID),
   FOREIGN KEY (USERID) REFERENCES USER(ID),
   FOREIGN KEY (GROUPID) REFERENCES GROUP(ID)
) 
```

**FILE 表：**（R、W、X，用于`other`）

```
CREATE TABLE IF NOT EXISTS FILE
(
   ID                 INT NOT NULL AUTO_INCREMENT,
   READ               BOOLEAN DEFAULT FALSE,
   WRITE              BOOLEAN DEFAULT FALSE,
   EXECUTE            BOOLEAN DEFAULT FALSE,

   PRIMARY KEY(ID)
) 
```

**文件用户权限表：**

```
CREATE TABLE IF NOT EXISTS FILEUSERPERMISSIONS
(
   ID           INT NOT NULL AUTO_INCREMENT,
   FILEID       INT NOT NULL,
   USERID       INT NOT NULL,
   READ         BOOLEAN DEFAULT FALSE,
   WRITE        BOOLEAN DEFAULT FALSE,
   EXECUTE      BOOLEAN DEFAULT FALSE,

   UNIQUE (FILEID, USERID),
   PRIMARY KEY(ID),
   FOREIGN KEY (FILEID) REFERENCES FILE(ID),
   FOREIGN KEY (USERID) REFERENCES USER(ID)
) 
```

**文件组权限表：**

```
CREATE TABLE IF NOT EXISTS FILEGROUPPERMISSIONS
(
   ID           INT NOT NULL AUTO_INCREMENT,
   FILEID       INT NOT NULL,
   GROUPID      INT NOT NULL,
   READ         BOOLEAN DEFAULT FALSE,
   WRITE        BOOLEAN DEFAULT FALSE,
   EXECUTE      BOOLEAN DEFAULT FALSE,

   UNIQUE (FILEID, GROUPID),
   PRIMARY KEY(ID),
   FOREIGN KEY (FILEID) REFERENCES FILE(ID),
   FOREIGN KEY (GROUPID) REFERENCES GROUP(ID)
) 
```

**hasPermission函数：**

```
DELIMITER $$
DROP FUNCTION IF EXISTS hasPermission$$
CREATE FUNCTION hasPermission(fileID INT, userID INT)
RETURNS BOOLEAN
BEGIN
   ???
END$$
DELIMITER ; 
```

我将如何进行，或者至少我从哪里开始编写`hasPermission`函数，以便在这样查询时：

```
SELECT hasPermission( 123, 456) 
```

它执行以下操作：

1.  检查文件 123 是否可读`other`
2.  检查用户 456 是否对文件 123 具有读取权限
3.  检查用户 456 是否在对文件 123 具有读取权限的某个组中

第一个是~~微不足道~~三者中最琐碎的。第二个把我难住了。第三个对我来说是一个概念障碍。除此之外，我显然必须检查用户和/或文件是否存在。

请善待，因为我是 MySQL 的新手。

谢谢先进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:07:17.057

1.  **检查文件 123 是否可读`other`**

    你说这很简单，但为了完整起见：

    ```
    SELECT READ
    FROM FILE
    WHERE ID = 123; 
    ```

2.  **检查用户 456 是否对文件 123 具有读取权限**

    您可以通过表中的类似查找来执行此操作`FILEUSERPERMISSIONS`：

    ```
    SELECT READ
    FROM FILEUSERPERMISSIONS
    WHERE FILEID = 123 AND USERID = 456; 
    ```

3.  **检查用户 456 是否在对文件 123 具有读取权限的某个组中**

    为此，您需要加入[和](http://www.google.co.uk/search?q=sql+join)表：`GROUP MEMBERSHIP``FILE GROUP PERMISSIONS`

    ```
    SELECT READ
    FROM FILEGROUPPERMISSIONS JOIN GROUPMEMBERSHIP USING (GROUPID)
    WHERE FILEID = 123 AND USERID = 456; 
    ```

* * *

要将这些组合在一起，您可以执行以下操作：

```
SELECT
   (SELECT READ FROM FILE WHERE ID = 123)
OR (SELECT READ FROM FILEUSERPERMISSIONS WHERE FILEID = 123 AND USERID = 456)
OR (SELECT READ FROM FILEGROUPPERMISSIONS JOIN GROUPMEMBERSHIP USING (GROUPID)
    WHERE FILEID = 123 AND USERID = 456); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:23:29.957

检查文件的权限。我可能会这样做：

```
SELECT
    (
        CASE WHEN EXISTS
            (
                SELECT
                    NULL
                FROM
                    FILE
                WHERE EXISTS
                    (
                        SELECT
                            NULL
                        FROM
                            USER
                            JOIN GROUPMEMBERSHIP
                                ON GROUPMEMBERSHIP.USERID=USER.ID
                            JOIN FILEUSERPERMISSIONS
                                ON FILEUSERPERMISSIONS.USERID=GROUPMEMBERSHIP.USERID
                            JOIN FILEGROUPPERMISSIONS
                                ON FILEGROUPPERMISSIONS.GROUPID=GROUPMEMBERSHIP.GROUPID
                        WHERE 
                            FILEUSERPERMISSIONS.FILEID=FILE.ID
                            AND FILEGROUPPERMISSIONS.FILEID=FILE.ID
                            AND FILEUSERPERMISSIONS.READ=FILE.READ
                            AND FILEGROUPPERMISSIONS.READ=FILE.READ
                            AND USER.ID=userID
                    )
                WHERE
                    FILE.READ=1
                    AND FILE.ID=fileID
            )
        THEN CAST(1 AS BIT)
        ELSE CAST(0 AS BIT)
        END
    ) AS hasRights 
```

但是，如果您真的想重视您的功能。我建议使用表函数并只提供`userid`. 这样您就可以获得用户有权访问的所有文件。这看起来像这样：

```
SELECT
    ID
FROM
    FILE
WHERE EXISTS
    (
        SELECT
            NULL
        FROM
            USER
            JOIN GROUPMEMBERSHIP
                ON GROUPMEMBERSHIP.USERID=USER.ID
            JOIN FILEUSERPERMISSIONS
                ON FILEUSERPERMISSIONS.USERID=GROUPMEMBERSHIP.USERID
            JOIN FILEGROUPPERMISSIONS
                ON FILEGROUPPERMISSIONS.GROUPID=GROUPMEMBERSHIP.GROUPID
        WHERE 
            FILEUSERPERMISSIONS.FILEID=FILE.ID
            AND FILEGROUPPERMISSIONS.FILEID=FILE.ID
            AND FILEUSERPERMISSIONS.READ=FILE.READ
            AND FILEGROUPPERMISSIONS.READ=FILE.READ
            AND USER.ID=userID
    )
WHERE
    FILE.READ=1 
```

顺便说一下。这个问题很好。这应该是一个如何提问的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:29:42.963

为了完整起见，我还发布了我如何解决这个问题的解决方案。我最初的动机是创建一个函数来查看一个 linux 用户（即。`user1`）是否有权访问另一个 linux 用户（即。`user2`）的主文件夹（即。是否`user1`具有读取权限`/home/user2`）。然后，我将在使用该函数`VIEW`为每个 mysql 用户构造 a 时使用此`user()`函数（假设 mysql 用户名和 linux 用户名是一对一的）。感谢 Arion 的建议，我现在改为使用连接创建视图。

请注意，就本示例而言，主*文件夹*存储在`FILE`表中。

**USER_VIEW 视图：**

```
CREATE VIEW USER_VIEW
AS
SELECT 
   U.ID
FROM 
   USERS AS U
   LEFT JOIN FILES AS F
      ON U.ID = F.USER_ID
   LEFT JOIN FILE_USER_PERMISSIONS AS P
      ON F.ID = P.FILE_ID
   LEFT JOIN USERS AS S
      ON P.USER_ID = S.ID
WHERE
(
   U.USERNAME = SUBSTR( USER(), 1, POSITION( '@' IN USER() ) - 1 )
)
OR
(
   F.R = TRUE
)
OR
(
   U.HOME = F.PATH AND P.R = TRUE AND S.USERNAME = SUBSTR( USER(), 1, POSITION( '@' IN USER() ) - 1 )
)
UNION
SELECT 
   U.ID
FROM 
   USERS AS U
   LEFT JOIN FILES AS F
      ON U.ID = F.USER_ID
   LEFT JOIN FILE_GROUP_PERMISSIONS AS P
      ON F.ID = P.FILE_ID
   LEFT JOIN GROUP_MEMBERSHIP AS G
      ON P.GROUP_ID = G.ID
   LEFT JOIN USERS AS S
      ON G.USER_ID = S.ID
WHERE
(
   U.HOME = F.PATH AND P.R = TRUE AND S.USERNAME = SUBSTR( USER(), 1, POSITION( '@' IN USER() ) - 1 )
) 
```

**编辑：**我相信而不是发出类似的命令

```
CREATE VIEW USER_VIEW
AS
SELECT 
   U.ID
FROM 
    ... 
```

我只能做

```
CREATE VIEW USER_VIEW
AS
SELECT 
   U.*
FROM 
    ... 
```

如果您想复制 10+ 列，这会派上用场

# nhibernate - 将模式前缀添加到 Nhibernate 表命名约定

> ID：10312356
> 
> 赞同：1
> 
> 时间：2012-04-25T08:54:59.703
> 
> 标签：nhibernate, fluent-nhibernate

我正在为各种公司使用多租户应用程序。我还没有成功。但是我的情况是我有一个带有不同公司（租户）的表集的单个 sql server 数据库。

所以我想要做的是为表添加一个约定，该约定将根据多租户应用程序概念在表中使用其模式前缀访问表。我没有使用每个租户的数据库，而是使用每个租户的架构。数据库文件是单个文件。

我想做的是我的桌子是这样的`Sachin Sales & Service Pvt Ltd$Web User Setup Header`。所以我希望在生成表查询时，他们应该`Sachin Sales & Service Pvt Ltd`在查询之前动态添加前缀。前缀可能会根据要求更改。它不是静态的。所以我想到了覆盖默认情况下看起来像这样的 IClassConvention

```
 public class TableNameConvention : IClassConvention
{
    public void Apply(IClassInstance instance)
    {
        instance.Table( instance.EntityType.Name);
    }
} 
```

无论如何我可以传递像这样的另一个参数`string schemaname`来生成带有模式前缀的所需表名吗？我的想法是做这样的事情：

```
public class TableNameConvention : IClassConvention
{
    public void Apply(IClassInstance instance, string schemaname )
    {
        instance.Table(schemaname + instance.EntityType.Name);
    }
} 
```

如果是这样，我的问题是这样的。如果我能够达到上面提到的点，它会解决我的每个租户的架构问题吗？其次，即使上面在编译时没有给出任何错误（技术上不应该）我应该如何将模式名传递给那个覆盖？我的意思是我应该怎么打电话，因为这只是一个约定，我不能即时操纵它（我实际上想要这样做）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:24:51.223

您可以在配置 nhibernate 时为所有表设置架构使用，例如

```
Fluently.Configure().Database(MsSqlConfiguration.MsSql2005.DefaultSchema(sometenantsSchema)) 
```

# cvs - 项目签出不当 - CVS

> ID：10312359
> 
> 赞同：0
> 
> 时间：2012-04-25T08:55:12.193
> 
> 标签：cvs, vcs-checkout

我有一个项目，其结构如下：

```
ProjectA/: within this directory:

Sub-ProjectA1/  Sub-ProjectA2/ 
```

`Sub-ProjectA1``ProjectA`为了重用某些代码，已单独签出。给出了以下命令：
`cvs checkout -d Sub-ProjectA1 ProjectA1`

现在，当我`checkout` `ProjectA`单独尝试时，`Sub-ProjectA1`并没有得到检查。换句话说，`cvs checkout ProjectA`导致以下目录结构：
`ProjectA/:
Sub-ProjectA2/`

该模块`Sub-ProjectA1`需要单独签出。如何确保单个结帐命令获取所有子目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:38:06.053

您可以在 CVS 服务器上定义“模块”。这通常会定义一个新的“SmartPorejct1”，其中包含指向您的 ProjectA 和 Sub-ProjectA1 的链接。一旦您调用“cvs checkout SmartPorejct1”，它将检查所有相关模块。

有关详细信息，请参阅[http://www.cs.utah.edu/dept/old/texinfo/cvs/cvs_6.html#SEC26](http://www.cs.utah.edu/dept/old/texinfo/cvs/cvs_6.html#SEC26)。

# c# - C# Winform 关闭程序后进程仍在 Windows 任务列表管理器中

> ID：10312364
> 
> 赞同：0
> 
> 时间：2012-04-25T08:55:39.430
> 
> 标签：c#, winforms, login, kill-process

为什么关闭程序后进程仍在 Windows 任务列表管理器上？

我使用登录 Form.cs

```
 [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Login());
        } 
```

用户成功登录后，我重定向到另一个 Masterpage

```
 this.Hide();
            Main_Usr oMainUsr = new Main_Usr();                    
            oMainUsr.Visible = true; 
```

我的伪母版页是这样的：

```
public Main_Usr()
        {
            InitializeComponent();
            this.IsMdiContainer = true;
        } 
```

当我关闭母版页时，该进程仍在 Windows 任务列表管理器上。但是当我关闭登录页面时，它会终止 Windows 任务列表管理器上的进程。

这是否意味着因为我只是隐藏了登录页面？我必须关闭所有窗口才能真正退出/终止进程吗？

提前谢谢你，史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:23:50.843

在 winforms 进程将被杀死，当主应用程序窗体关闭时。主应用程序表单是在 Application.Run 调用中指定的表单。在您的情况下，它是登录表单：

```
Application.Run(new Login()); 
```

要关闭表单，您应该调用`Close`方法。当您调用`Hide`或设置`Visibility`为 false 时，表单会保留在内存中。它只是对用户隐藏。

因此，要实现所需的功能，您应该将主应用程序表单更改为 Main_Usr：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Main_Usr()); // change main form
} 
```

然后订阅`Load`Main_User 表单的事件。在事件处理程序中执行以下操作：

```
private void Main_User_Load(object sender, EventArgs e)
{
    using (var loginForm = new Login())
    {
        Hide(); // hide main form

        if (loginForm.ShowDialog() != System.Windows.Forms.DialogResult.OK)
        {
            Close(); // close main form and kill process
            return;
        }

        Show(); // show main form if user logged in successfully 
    }
} 
```

更新：您可以在 Main 方法中完成这一切，就像这样

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    using(var loginForm = new Login())
         if (loginForm.ShowDialog() != System.Windows.Forms.DialogResult.OK)
             return;
    Application.Run(new Main_Usr()); // change main form
} 
```

但通常我不会隐藏主表单并将其显示在登录表单下方。因此，在这种情况下，您应该使用`Load`事件处理程序。由你决定。

顺便说一句，winforms 中没有母版页和页面。这一切都适用于 ASP.NET。在这里你有表单:) 还可以考虑像 LoginForm、MainForm 等命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:59:42.070

这是因为应用程序消息循环与您的`Login`表单相关联（`Application.Run(new Login())`这样做），因此您需要关闭启动应用程序的表单以结束进程。

或者，您可以调用`LoginForm.Show()`, before `Application.Run`，将凭据存储在某处，然后调用`Application.Run(new Main_Usr)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:59:10.180

因为`Login`是关闭应用程序的最后一种形式，所以您`Main_User`只能在此之后加载 - 即使`Login`隐藏它实际上仍然存在。Windows 窗体应用程序默认配置为在最后一个窗体关闭时退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T09:05:09.820

```
this.Hide() 
```

不会杀死窗户。

所以它仍然是隐藏的，进程保留在内存中。this.Close() 关闭窗口并从内存中删除它的对象。

最好做这样的事情：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    var l = new Login();
    l.ShowDialog();
    if(l.Passed)
       Application.Run(new Login());
} 
```

并在登录窗口内实现 Passed 属性。

顺便问一下，你里面有多线程吗？这是此类错误的另一个来源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T09:24:25.413

我找到了，我只是使用 dizlog。

```
 [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Login oLogin = new Login();
            oLogin.ShowDialog();
            Application.Run(new Main_Usr());
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T08:01:20.503

我遵循@lazyberezovsky 的代码并将其添加到我的 Login.cs

```
 private void simpleButton_Valider_Click(object sender, EventArgs e)
        {
       .....
          DialogResult = DialogResult.OK;
                    return;
       .....
   } 
```

# sql-server - 在 SQL Server 2008 上向用户授予有限权限

> ID：10312373
> 
> 赞同：1
> 
> 时间：2012-04-25T08:56:03.120
> 
> 标签：sql-server, permissions

您如何授予用户对特定数据库的权限，以便他可以对这些数据库执行所有操作，包括备份和恢复。但是这个用户应该不能访问服务器上的一些其他数据库。并且该用户还应该有权在服务器上创建新数据库、创建/更改链接服务器以及在工作代理中创建/更改工作。

我应该分配什么权限和服务器角色来实现上述所有功能？实际上，如果我为这个用户分配一个服务器角色 Sysadmin，那么他可以创建/更改链接服务器和 SQL 作业，但同时他可以访问服务器上的所有数据库，这是我不希望的。

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:33:04.617

看起来您想要以下权限。您可能应该查看提供的链接以确保它是您需要的。

正如所指出的，这更像是一个 DBA 而不是 SQL 问题。还有很多关于如何执行此操作的文档，其中邀请了 RTFM 响应。下次遇到此类问题时，您可能需要先查看文档，制定计划，然后询问您的计划是否可行。

特定数据库的所有权利：该数据库的 db_owner。

创建/更改链接服务器：在服务器上创建链接服务器。服务器上的 ALTER LINKED SERVER。

创建数据库，但不能删除/更改您不拥有的数据库：在服务器上创建任何数据库。（dbcreator 让您删除/更改其他人）

[http://www.mssqltips.com/sqlservertip/1714/server-level-permissions-for-sql-server-2005-and-sql-server-2008/](http://www.mssqltips.com/sqlservertip/1714/server-level-permissions-for-sql-server-2005-and-sql-server-2008/)

创建/更改作业：msdb 上的 SQLAgentUser 角色。

[http://msdn.microsoft.com/en-us/library/ms188283(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms188283(v=sql.90).aspx)

# php - PHP 搜索/过滤功能

> ID：10312377
> 
> 赞同：2
> 
> 时间：2012-04-25T08:56:25.730
> 
> 标签：php, mysql, wordpress, search, filter

我的页面上有一个过滤器/搜索功能，最多包含 4 个下拉列表，下拉列表显示取决于最后一个下拉列表是什么...

在我的下拉列表中，我有 4 个潜在场景

***车辆类型***

```
<select name="vehicleType" id="vehicleType">
    <option value="choose" selected="selected">Please choose</option>
    <option value="hgv">HGV</option>
    <option value="psv">PSV</option>
    <option value="lgv">LGV</option>
    // MORE OPTIONS AVAILABLE
</select> 
```

***覆盖区域***

```
<select name="coverageRegion" id="coverageRegion">
    <option value="choose" selected="selected">Please choose</option>
    <option value="national">National</option>  
    <option value="international">International</option>
</select> 
```

***首选网站类型***

```
<select name="locationType" id="locationType">
    <option value="choose" selected="selected">Please choose</option>
    <option value="truckstops">Truck stops at lowest price</option>  
    <option value="motorway">Branded motorway sites</option>
</select> 
```

对于我的搜索功能，我目前使用“IF”语句，如果“vehicleType = X 和 Coverage Region = X”显示这些结果。

但是，我现在需要为县添加第四个下拉列表。在我的县部分中，将有大约 50 个县，我实际上无法为每种可能的情况提供 IF 声明，因为这将花费很长时间，最好的方法是什么？

我目前用我的 PHP 做的一个例子是......

```
 if ($_POST['vehicleType'] == 'car' && $_POST['pricing'] == 'pump' ) {             

             $customkey = 'vehicleType';
             $customvalue = 'car'; 

             $customkey1 = 'pricing'; 
             $customvalue1 = 'pump'; 

             $args = array('orderby' => 'meta_value_num', 'meta_key' => 'order', 'order' => 'ASC',
            'meta_query' => array(
            array(
                'key' => $customkey,
                'value' => $customvalue,
                'compare' => '='
            ),
            array(
                'key' => $customkey1,
                'value' => $customvalue1,
                'compare' => '='
            )
            )
            );

            $query = new WP_Query( $args );// The Loop
                $i = 0; $i = -1;

while ( $query->have_posts() )
{
    $i++;
    $query->the_post();
    if ( $keys = get_post_custom_keys() )
    {
        echo "<div class='clearfix card-prod ".($i==0?'first':'')."'><div class='top-dets'><span class='card-title'>";
        echo the_title();
        echo "</span>";

    // Network query 
        $network_value = get_post_custom_values('srchnetwork');
        foreach ( $network_value as $key => $value ) {
        echo '<span class="srch-val-">'. $value . '</span>'; }// Pricing Query
        $pricing_value = get_post_custom_values('srchpricing');
        foreach ( $pricing_value as $key => $value ) {
        echo '<span class="srch-val-1">'. $value . '</span>'; }

    // Setup Query
        $setup_value = get_post_custom_values('srchsetupfee');
        foreach ( $setup_value as $key => $value ) {
        echo '<span class="srch-val-2">'. $value . '</span>'; }

    // Services Query
        $services_value = get_post_custom_values('srchservices');
        foreach ( $services_value as $key => $value ) {
        echo '<span class="srch-val-3">'. $value . '</span></div>'; }

    // Big Card Query
        $bigcard_value = get_post_custom_values('bigcard');
        foreach ( $bigcard_value as $key => $value ) {
             echo '<a href="/" class="cardclick"><img src="/wp-content/themes/CAFC/images/cards/'. $value . '" alt="'; }
         echo the_title() . '" /></a>';

    echo '<img src="wp-content/themes/CAFC/images/top-choice.jpg" alt="Top Choice" class="topchoice">';
echo the_excerpt()."</div>";    

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:16:13.647

您是否要求 Switch 声明？

我不认为那是要走的路。

我假设这只是生成一个查询？使用这些参数。

可以这样做吗

```
$args = array('orderby' => 'meta_value_num', 'meta_key' => 'order',
'order'=>'ASC','meta_query' => array());

if (isset($_POST['vehicleType'])){
 $args['meta_query'][]=array(
        'key' => 'vehicleType',
        'value' => $_POST['vehicleType'],
        'compare' => '=');
}

if(isset($_POST['another'])){
$args['meta_query'][]=array(
        'key' => 'vehicleType',
        'value' => $_POST['vehicleType'],
        'compare' => '=');
}

 if(isset($_POST['another'])){
 $args['meta_query'][]=array(
        'key' => 'vehicleType',
        'value' => $_POST['vehicleType'],
        'compare' => '=');
}

 if(isset($_POST['another'])){
  $args['meta_query'][]=array(
        'key' => 'vehicleType',
        'value' => $_POST['vehicleType'],
        'compare' => '=');
} 
```

如果设置了 post 变量（或者不为空），则基本上将变量添加到数组中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:35:10.213

相反，有一个简单的方法。搜索后您必须获得密钥。把它的价值。

```
<option = "<?php echo $value;?>">Blah blah</option> 
```

现在只需在更改时发送此键并根据此外键获取结果。

# perl - 使用 Perl 解析 XML

> ID：10312381
> 
> 赞同：-2
> 
> 时间：2012-04-25T08:56:38.373
> 
> 标签：perl, xml-parsing

> **可能重复：**
> [在 perl 中使用嵌套标签进行 XML 解析](https://stackoverflow.com/questions/10295506/xml-parsing-with-nested-tags-in-perl)

在以下 xml 结构中。我需要在 perl 中解析大小值的下限值和上限值，并且需要解析子标签中的 type 属性

```
<definition>
    <attributes>
        <children>
            <attributes>
                <children xsi:type="C_COMPLEX_OBJECT" >
                    <attributes>
                        <children>
                            <attributes>
                                <children><list><magnitude><lower>100</lower><upper>200</upper></magnitude></list></children>
                                <children><list><magnitude><lower>200</lower><upper>400</upper></magnitude></list></children>
                                <children><list><magnitude><lower>400</lower><upper>750</upper></magnitude></list></children>
                                <children><list><magnitude><lower>250</lower><upper>500</upper></magnitude></list></children>
                                <children><list><magnitude><lower>350</lower><upper>1000</upper></magnitude></list></children>
                            </attributes>
                        </children>
                    </attributes>
                </children>
               <children></children>
            </attributes>
        </children>
    </attributes>
</definition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:12:20.080

这是一个使用 LibXML 解析此 xml 并获取所需值的小代码。

```
use XML::LibXML;
my $parser = XML::LibXML->new();
my $xml = $parser->parse_file('test.xml');

my @lower = $xml->find('//lower');
my @upper = $xml->find('//upper');

my $type = $xml->find('//children/@type'); 
```

@lower、@upper、$type 是节点。要提取字符串，请调用 to_lietral 子。例如 $type->to_literal。

# google-maps - 点击地图时的信息窗口

> ID：10312382
> 
> 赞同：0
> 
> 时间：2012-04-25T08:56:45.283
> 
> 标签：google-maps

我只想要一张地图，当点击地图时会出现一个 infoWindow 但没有标记。此外，在 infoWindow（使用反向地理编码）内，还显示了用户在地图上单击的地址。我已经研究并尝试对其进行编码，但是当我单击地图时，不会出现 infoWindow。哪里可能是错误或有其他方法吗？任何帮助将不胜感激。这是托管地图的站点；

[http://urloritdidnthappen.appspot.com/186002](http://urloritdidnthappen.appspot.com/186002)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:10:04.163

问题是这里

```
infoWindow.open(map); 
```

`map`未定义。那是因为这条线

```
var map = new google.maps.Map(document.getElementById("map"), options); 
```

设置`map`为函数的*本地。*`initialize()`

**修复**：`var`从行中删除，`var map =...`以便为全局变量分配一个值。

# android - 如何使用默认的 android 联系人 ui 显示私人联系人信息

> ID：10312383
> 
> 赞同：1
> 
> 时间：2012-04-25T08:56:45.690
> 
> 标签：android, contacts

我正在编写一个应用程序，允许用户创建不会存储在 android 的默认联系人应用程序中的私人联系人。有没有办法我可以重用默认的 android 联系人 UI 来显示这些私人联系人？

# python - 如果发生错误，nosetests 会重新启动测试

> ID：10312385
> 
> 赞同：2
> 
> 时间：2012-04-25T08:56:50.637
> 
> 标签：python, unit-testing, nose

我在我的 python 项目中使用鼻子的 TestSuite 进行单元测试。

问题是我的项目与第三方沙箱链接并通过 api 进行通信，但有时，错误来自他们一方。因此，如果由于特定错误而失败，我正在尝试找到一种重新启动测试的方法。

是否有人已经在 TestSuite 中完成了这项工作？或者有一个想法怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:47:49.713

*1）我经常在*测试中重试远程代码，而不是重新运行整个测试。

2）但是，如果您真的想重复所有失败的测试，并且没有人提出更好的解决方案，您可以编写一个自定义测试运行程序，使用 api 之类的

```
#in unittest.TestCase
retryManager.logFailure(test=self, error)

#where you run tests
for test in retryManager.failedTests
    suite = unittest.TestLoader().loadTestsFromTestCase(testclass)
    testResult = unittest.TextTestRunner(verbosity=2).run(suite) 
```

如果您不想捕获异常，您还可以查看测试是否成功`testResult.wasSuccessful()`

RetryManager 只是一种存储库/故障日志。

3）使用pytest，它内置了这个功能：http: [//pytest.org/latest/xdist.html#looponfailing](http://pytest.org/latest/xdist.html#looponfailing)

# java - 为什么 JRE 下载大小变化如此之大？

> ID：10312387
> 
> 赞同：1
> 
> 时间：2012-04-25T08:57:06.857
> 
> 标签：java

[jre-6u31 下载页面](http://www.java.com/de/download/manual.jsp)上的 JRE 下载文件大小 因平台而异。由于它们提供基本相同的功能，因此我预计它们的大小大致相同。为什么他们如此不同？

```
Windows          16.1 MB 
Solaris (32-Bit) 25.2 MB 
Solaris (64-Bit) 11.2 MB + 25.2 MB 32-bit Solaris 
Solaris x86      20.3 MB
Solaris x64       7.5 MB
Linux RPM        20.2 MB
Linux            20.7 MB
Linux x64        20.3 MB 
Linux x64 RPM    19.7 MB 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:24:56.503

我会说它们大致相同。不同的是平台附带的以及需要添加的库的数量。例如，JRE 可以使用操作系统附带的 LZM 库还是需要提供自己的库。（只是一个例子）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:05:14.490

由于 JRE 不使用 jvm，因此 JRE 源代码因平台而异。

# arrays - Powershell 数组和刷新

> ID：10312393
> 
> 赞同：1
> 
> 时间：2012-04-25T08:57:27.013
> 
> 标签：arrays, powershell

我目前正在编写一个使用 get-service | 的脚本 选择显示名称以显示正在运行的内容。

但是，我遇到了麻烦。

我正在使用这个：

```
function Getcurrent-AD 
{
  $Script:current_active_d = get-service | select Displayname
  $array = New-Object System.Collections.ArrayList
  $array.AddRange($current_active_d)
  $current_output.DataSource = $array
  $objForm.refresh()
} 
```

和

```
$moveright.Add_Click({

$selectedRow = $current_output.CurrentRowIndex
  if (($procid=$Script:current_active_d["$selectedRow"].displayname)) {
              write-host $procid
        }

}
) 
```

创建一个数组并将其放入数据表单网格中，然后写入我单击的主机，但我只能让它工作，以便它在控制台中显示选择的第一个项目。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:27:02.033

试试这个：

```
$current_output.Add_Click({
    $value = $current_output.Rows[$current_output.CurrentRow.Index].Cells['DisplayName'].Value
    Write-Host $value
}) 
```

# python - 如何通过 AJAX 设置 Django 表单值

> ID：10312394
> 
> 赞同：0
> 
> 时间：2012-04-25T08:57:29.650
> 
> 标签：python, ajax, django, modelform, inline-formset

我正在尝试将 Django 生成的表单与 AJAX 调用一起用于数据填充。我只有一个普通的 ModelForm 工作，但是当我向它添加一个 inlineformset 时，我不知道应该在一些隐藏的 id 字段中填充什么值。每个提交都在创建一个新实例。对于有地址的学校，我的保存视图中有这个：

```
... get school logic here ...
if school_form.is_valid():
    school = school_form.save(commit=False)
    address_formset = AddressFormSet(request.POST, instance=school)
    if address_formset.is_valid():
        school_form.save()
        address_formset.save()
... redirection logic here ... 
```

这是填充我的表单的 JS。`#id_address_set-0-school`并且`#id_address_set-0-id`是 2 个 Django 生成的字段。

```
$('a[name^="editSchool"]').click( function(e) {
  e.preventDefault();
  $.ajax({
    url: '/schooljson/' + this.getAttribute('schoolid') + '/'
  }).done( function(data) {
    $('#id_school_code').val(data.school_code);
    $('#id_full_name').val(data.school_name);
    $('#id_student_count').val(data.school_students);
    $('#id_school_pk').val(data.school_pk);
    $('#id_address_set-0-address_line_1').val(data.address_line_1);
    $('#id_address_set-0-address_city').val(data.address_city);
    $('#id_address_set-0-address_state').val(data.address_state);
    $('#id_address_set-0-address_zip').val(data.address_zip);
    $('#id_address_set-0-school').attr('value', data.school_pk);
    $('#id_address_set-0-id').attr('value', data.address_pk);
    $('#addSchoolModal').modal('show');
  }); 
```

有什么想法我应该放在那里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:17:28.950

如果您已经有一个可用的学校实例，那么将数据绑定到视图中的表单集似乎会更容易。下面的代码应该让您不必担心 id、隐藏字段等，因为 formset 已经处理了所有这些。

当您发布表单集时，您已经有了代码

```
school = school_form.save(commit=False)
address_formset = AddressFormSet(request.POST, instance=school) 
```

所以不要用 json 数据填充，为什么不呢？

```
views.py
def school_address(request, school_id):
    school = School.objects.get(pk=school_id)
    address_formset = AddressFormSet(instance=school)
    return render(request, "school/school_address.html",
                  {'address_formset': address_formset}) 
```

在原始模板（school.html）中？使用编辑学校的链接，您将拥有一个表单集所在位置的元素。（大概你已经将学校对象传递给模板，并且有一个提交按钮等）

学校.html

```
<form>
<a href="" id="edit_school" schoolid="{{ school.id }}">Edit</a>
{{ school_form }}
<div id="school_address"></div>
</form> 
```

school_address.html 可以很简单

```
{{ address_formset }} 
```

现在在 javascript 中，success 函数将把 school_address.html 放置在学校表单中，里面填满了你需要的一切。

```
$("#edit_school").click(function(e){
  e.preventDefault();
  $.ajax({
    url: '/school_address/' + this.getAttribute('schoolid') + '/'
    success: function(data){
      $("#school_address").html(data);
    }
  });
}); 
```

旁注 - 我不认为 schoolid 作为锚标记属性将验证为适当的属性，但我理解，“它有效”。我通常将类似 schoolid 的东西存储在隐藏的输入中以在 js 中访问它，尽管可能有更优雅的方式

```
<input type="hidden" id="schoolid" value="{{ school.id }} /> 
```

# javascript - 如何检测用户登录为页面，FB.getLoginStatus 不起作用？

> ID：10312395
> 
> 赞同：1
> 
> 时间：2012-04-25T08:57:31.273
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我们有一段代码：

```
 checkStatus: function() {

            var self = this;

            FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {

                    self.isPage = false;
                    dojo.publish('fb/loginStatus/connected', response.authResponse);

                    if (self.UserRecord === null) {

                        self.buildAll(response.authResponse);

                    } else if (self.UserRecord.user_fid !== response.authResponse.userID){

                        self.clearAll();
                        setTimeout(function(){ self.buildAll(); }, 100);
                    }

                } else {

                    if (response.status === 'not_authorized') {
                        dojo.publish('fb/loginStatus/logged', response);
                    } else {

                        dojo.publish('fb/loginStatus/notLogged', response);
                    }
                }
            },true);
        }, 
```

一切正常，直到用户输入我们登录为 facebook 页面的应用程序，Fb.getLoginStatus 不会触发它的回调。

我的问题是，如何在应用程序中检测或做其他事情来处理这种情况？

干杯，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:21:42.090

我打赌这是一个错误。去年当用户处于沙盒模式时，FB.getLoginStatus 也存在类似问题。无论如何，您可以让用户切换回他们的普通用户：

```
FB.login(function(response) {
    // response handler
}); 
```

它将显示一条提示“您正在以不同用户身份使用 Facebook”，并要求您切换回标准用户。

另一种选择是在特定超时后显示其中一个 facebook 社交小部件（例如，喜欢按钮）。它没有显示一个喜欢的按钮，而是提供了一个链接，上面写着“切换回普通用户以使用这个社交小部件”。

希望这些建议有所帮助。

# java - 为什么我会收到“可能的空指针取消引用”警告？

> ID：10312399
> 
> 赞同：1
> 
> 时间：2012-04-25T08:57:36.953
> 
> 标签：java, nullpointerexception, findbugs

为什么 FindBugs 会向我提出以下警告：*[可能的空指针取消引用](http://findbugs.sourceforge.net/bugDescriptions.html#NP_NULL_ON_SOME_PATH)*。

```
current = myService.getCategoryParent(current);
if (current != null) { // The warning appears here 
```

我不明白如何针对 null 测试变量可以取消引用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:00:17.297

我怀疑错误/警告实际上在您指示的行*上方。*

```
//                   here ------------v
current = myService.getCategoryParent(current);
if (current != null) { 
```

# iphone - Dynamic custom fonts loader in iOS

> ID：10312401
> 
> 赞同：3
> 
> 时间：2012-04-25T08:57:45.807
> 
> 标签：iphone, objective-c, ios, uifont

i already know how to load a custom font to my project in iPhone App from [here](http://kgriff.posterous.com/45359635) I want to ask if there is a way to do this from code? My problem is that I have a resource folder in my app, i have a font file name, lets call it "*myfont.ttf*".

I want to grab a ttf file and put it to plist file **from code**, and what's more i want to know the display name for *fontWithName:size:* method. There is a way to achieve this?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T04:21:26.973

This is an older question but here is a way to do this anyway in case someone else comes across this.

```
 + (void)loadFontAtPath:(NSString*)path{
    NSData *data = [[NSFileManager defaultManager] contentsAtPath:path];
    if(data == nil){
        NSLog(@"Failed to load font. Data at path is null");
        return;
    }
    CFErrorRef error;
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((CFDataRef)data);
    CGFontRef font = CGFontCreateWithDataProvider(provider);
    if(!CTFontManagerRegisterGraphicsFont(font, &error)){
        CFStringRef errorDescription = CFErrorCopyDescription(error);
        NSLog(@"Failed to load font: %@", errorDescription);
        CFRelease(errorDescription);
    }
    CFRelease(font);
    CFRelease(provider);
} 
```

This will load the font at the path specified at runtime then you can use it in the same way as normal without adding it to the plist.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T09:32:34.847

Yes you can. But you've to work a lot with CoreText and/or CoreGraphics.

There's a nice class from Zynga that could help you in doing this: [https://github.com/zynga/FontLabel](https://github.com/zynga/FontLabel)

The example project shows how to load .ttf files from the bundle without using the .plist and use these fonts inside the application.

The code is valid and is a good point from start.

Edit: The previous approach uses CoreGraphics, that is good, but use Core Text is much better. I found an interesting answer to this question: [How can you load a font (TTF) from a file using Core Text?](https://stackoverflow.com/questions/2703085/how-can-you-load-a-font-ttf-from-a-file-using-core-text)

If you don't have experience with CoreText framework, please read the [official introduction inside the Apple documentation](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-10T11:33:34.157

IF you are downloading a TTF file then you can do following to register your custom fonts with iOS Font Manager, this piece of code also takes care of TTF file updates (font updates):

```
 +(void)registerFontsAtPath:(NSString *)ttfFilePath
    {
        NSFileManager * fileManager = [NSFileManager defaultManager];

        if ([fileManager fileExistsAtPath:ttfFilePath] == YES)
        {
            [UIFont familyNames];//This is here for a bug where font registration API hangs for forever.

            //In case of TTF file update : Fonts are already registered, first de-register them from Font Manager
            CFErrorRef cfDe_RegisterError;
           bool fontsDeregistered = CTFontManagerUnregisterFontsForURL((__bridge CFURLRef)[NSURL fileURLWithPath:ttfFilePath], kCTFontManagerScopeNone, &cfDe_RegisterError);

            //finally register the fonts with Font Manager,
            CFErrorRef cfRegisterError;
            bool fontsRegistered= CTFontManagerRegisterFontsForURL((__bridge CFURLRef)[NSURL fileURLWithPath:ttfFilePath], kCTFontManagerScopeNone, &cfRegisterError);
         }
     } 
```

You can check for booleans and errors for registration and de-registration status.

# ios - 更改 UITableView 部分标题的颜色

> ID：10312404
> 
> 赞同：0
> 
> 时间：2012-04-25T08:58:08.043
> 
> 标签：ios, core-data

我有带部分的 TableView，这些部分是国家，我从我的核心数据实体中获取它们。我为我的表格视图设置了背景图像，现在我想更改该部分的标题颜色。我怎样才能做到这一点？到目前为止，这是我的代码。

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections]objectAtIndex:section];

    NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];
    if (sectionTitle == nil) {
        return nil;
    }

    // Create label with section title
    UILabel *label = [[UILabel alloc] init];
    label.frame = CGRectMake(20, 6, 300, 30);
    label.backgroundColor = [UIColor clearColor];
    label.textColor = [UIColor whiteColor];
    label.shadowColor = [UIColor blackColor];
    label.shadowOffset = CGSizeMake(0.0, 1.0);
    label.font = [UIFont boldSystemFontOfSize:16];
    //label.text = sectionTitle;
    label.text=[sectionInfo name];
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width,tableView.bounds.size.height)];

    [view addSubview:label];

    return [sectionInfo name];

} 
```

当我尝试我的代码时出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:18:26.957

您只需要在该方法中返回一个字符串（标题）。查看：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

那是您应该自定义外观的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:18:46.770

如果要更改 UITableView 中部分的颜色，则应使用 UITableViewDelegate 中的此[方法](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aviewForHeaderInSection%3a)：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

# svg - 覆盖两个相同的 SVG 矩形时的小边框

> ID：10312414
> 
> 赞同：1
> 
> 时间：2012-04-25T08:59:04.113
> 
> 标签：svg

我对 SVG 中两个相同矩形的可视化有疑问。它们的大小和位置都相同，底部是黑色的，顶部是白色的：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC  "-//W3C//DTD SVG 1.1//EN" 
                      "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [
    <!ENTITY ns_svg   "http://www.w3.org/2000/svg">
    <!ENTITY ns_xlink "http://www.w3.org/1999/xlink">
]>
<svg  version="1.1" xmlns="&ns_svg;" xmlns:xlink="&ns_xlink;" width="34.017"
      height="70.877" viewBox="0 0 34.017 70.877">
<g id="top_x5F_middle">
    <rect x="11" y="10" fill="black" width="11" height="31"/>
    <rect x="11" y="10" fill="white" width="11" height="31"/>
</g>
</svg> 
```

在查看器（Firefox 浏览器或 Inkscape 编辑器）中查看它们时，会有一个小边框。不同缩放级别的边框不同，所以看起来浮动精度有问题。

![在 Inkscape 中查看时的边框](../Images/e532d93b8f5d1734a18421821dc4ca2d.png) ![在Firefox中查看时的边框](../Images/6e962d6a24ae70cea96596e2478f2fa9.png)

**这个边界的原因是什么？如何删除它？**

*PS：我对黑客不感兴趣，因为让底部矩形更小等。这只是一个例子，真正的用例要复杂得多，不能通过调整大小来解决。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:06:37.967

这取决于抗锯齿。绘制第一个矩形时，它与背景混合，略微涂抹它。与第二个相同，因此您会得到灰色轮廓。

如果你想避免这种情况，一种方法是使用 shape-rendering="crispEdges"禁用[抗锯齿](http://www.w3.org/TR/SVG/painting.html#ShapeRenderingProperty)

# r - 使用 Windows 快捷方式运行 R 脚本

> ID：10312417
> 
> 赞同：8
> 
> 时间：2012-04-25T08:59:13.800
> 
> 标签：r

我正在尝试在我的桌面（Windows 操作系统）上创建一个图标。通过单击此图标，将执行一个 R 脚本，该脚本启动一个 GUI 应用程序 ( `gWidgets`)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T17:17:32.117

阅读帮助文件 ?Startup 了解 R 在启动过程中经历的细节以及如何自动化运行代码。

我为客户做了类似的事情，我为特定的演示创建了一个 GUI（我使用 tcltk，但一切都应该工作相同）。我为他们创建了一个桌面快捷方式并修改了快捷方式以在特定文件夹中启动（但运行标准 Rgui 程序），然后在该文件夹中保存一个 .Rdata 文件，其中包含演示所需的所有代码和数据以及函数命名为 .First 开始演示。

然后客户端不需要知道任何关于 R 的东西，只需双击快捷方式，R 启动，我的演示会自动为他们启动，他们输入一些数字，单击一些选项，滑动一些滑块等，然后单击“确定”查看根据他们的情况定制的图表或其他输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:04:40.617

我认为您正在寻找批处理文件来启动文件？

如果是这样，请检查一下，此注释列出了如何在命令提示符下执行此操作，将其转换为批处理文件。

[https://stat.ethz.ch/pipermail/r-help/2002-March/019950.html](https://stat.ethz.ch/pipermail/r-help/2002-March/019950.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T10:10:12.683

您是否尝试过使用 RScript 命令？我不知道它在 Windows 上是如何工作的，但在 Linux 上我会做类似的事情：

```
Rscript --vanilla -e 'source("abc.R")' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-29T11:05:51.107

我在 Windows 7 中完成的基本版本是；

1.  找到 RScript.exe（例如 C:\Users\USERNAME\Documents\R\R-3.3.2\bin\x64\RScript.exe）
2.  右键单击并选择“固定到任务栏”

R 图标应出现在屏幕底部的任务栏上

3.  找到您的脚本（例如 C:\Users\USERNAME\Documents\MyScript.R）并将其拖到任务栏上的 R 图标上
4.  右键单击图标，“MyScript”应该固定在那里。
5.  单击“MyScript”运行脚本。

# inno-setup - 由 Inno Setup 和 UAC 窗口上的 SPAWNWND、NOTIFYWND 参数构建的安装程序

> ID：10312418
> 
> 赞同：6
> 
> 时间：2012-04-25T08:59:21.727
> 
> 标签：inno-setup, uac

程序路径中的参数是`SPAWNWND`什么？`NOTIFYWND`

![在此处输入图像描述](../Images/c05e5e603bef28f4bf71ff244c3d9cff.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T09:10:07.103

这两个参数用于`...AsOriginalUser`功能、退出代码等设置的提升部分和非提升部分之间的通信。
您可能可以在[Inno 源代码本身](https://github.com/jrsoftware/issrc)中找到更多详细信息。

请注意，这些是实现细节，您不应依赖它们或对这些值做任何事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-11-18T02:31:04.887

`spawn()`是一个 c 函数组，它执行子进程，但不通过分叉！有`spawnvl()`-vl 代表参数的“变量列表”（如`spawnvl(arg1, arg2, arg3,...arg n, NULL);`）。`spawnl()`我猜想在列表中执行一个具有固定数量参数的程序。还有`spawnvle()`-`spawnle()`这些类似于`(int argc, char **argV)`-`e`环境的代表，这意味着`argv-char`数组，并且它们再次与可变和固定数量的列表参数一起存在。Linux 等效项是`exec -function`组。

我猜这些函数（调用的进程）通过`signals`它们的父母进行通信

# java - 需要帮助 Java 中的 Bubblesort multiD

> ID：10312420
> 
> 赞同：0
> 
> 时间：2012-04-25T08:59:25.657
> 
> 标签：java, bubble-sort

我想对多维字符串数组进行冒泡排序，但它似乎不起作用

```
public class Array {
    public static void main( final String args[] ) {
        final String[][] arrDataIn = 
        {
            { "abc", "9", "5" },
            { "xyz", "3", "4" },
            { "lmn", "7", "3" },
            { "hij", "1", "3" }
        };

        final Array bs = new Array();

        final String arrSorted[][] = bs.sort( arrDataIn, 0, 1 );
        for ( int y = 0; y < arrSorted.length; y++ ) {
            System.out.println( "Printing Row Number :" + y );

            for ( int z = 0; z < arrSorted[y].length; z++ )
                System.out.println( "Value : " + arrSorted[y][z] );
        }
    }

    public String[][] sort( final String arrDataIn[][], final int iCol, final int iOrder ) {
        final String arrTmp[] = new String[ arrDataIn[0].length ];

        for ( int z = 0; z < arrDataIn.length; z++ ) {
            for ( int i = 0; i < arrDataIn.length - ( z + 1 ); i++ ) {
                if ( arrDataIn[i].compareTo( arrDataIn[i + 1] ) < 0 ) {
                    for ( int j = 0; j < arrDataIn[i].length; j++ ) {
                        arrTmp[j] = arrDataIn[i][j];
                        arrDataIn[i][j] = arrDataIn[i + 1][j];
                    }

                    for ( int m = 0; m < arrTmp.length; m++ )
                        arrDataIn[i + 1][m] = arrTmp[m];
                } else if ( arrDataIn[i].compareTo( arrDataIn[i + 1] ) < 0 ) {
                    for ( int j = 0; j < arrDataIn[i].length; j++ ) {
                        arrTmp[j] = arrDataIn[i][j];
                        arrDataIn[i][j] = arrDataIn[i + 1][j];
                    }

                    for ( int m = 0; m < arrTmp.length; m++ )
                        arrDataIn[i + 1][m] = arrTmp[m];
                }
            }

        }

        return arrDataIn;
    }
} 
```

输出错误显示：

```
error: cannot find symbol
if (arrDataIn[i].compareTo(arrDataIn[i+1])<0)
                ^
  symbol:   method compareTo(String[])
  location: class String[]
error: cannot find symbol
else if (arrDataIn[i].compareTo(arrDataIn[i+1])<0)
                     ^
  symbol:   method compareTo(String[])
  location: class String[] 
```

我尝试将其更改为：

```
if (arrDataIn[i][iCol] > arrDataIn[i+1][iCol] && (iOrder == 0))

else if (arrDataIn[i][iCol] < arrDataIn[i+1][iCol] && (iOrder == 1)) 
```

它仍然是同样的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:11:40.067

`arrDataIn[i]``compareTo()`是一个字符串数组，并且数组对象上没有方法

首先，你必须意识到你想做什么。可能您想按[字典顺序对数组进行排序](http://en.wikipedia.org/wiki/Lexicographical_order#Ordering_of_sequences_of_various_lengths)

```
from:
  {
    { "2", "4", "5" }, // if possible
    { "3", "1" },
    { "2", "4" }
  }
to:
  {
    { "2", "4" },
    { "2", "4", "5" },
    { "3", "1" }
  } 
```

您只需要`compareTo( String[] sa1, String[] sa2 )`根据[compareTo() 描述](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html#compareTo%28T%29)实现方法。

# javascript - 对象文字和事件侦听器，最佳实践？

> ID：10312427
> 
> 赞同：7
> 
> 时间：2012-04-25T08:59:48.473
> 
> 标签：javascript, jquery, oop, jquery-events

假设我有一个具有一些属性和方法的对象：

```
var Form = {
    name: 'sign-up',

    show: function() {...},
    hide: function() {...},
    validate: function() {...},
    updateCurrency: function() {...},
    handleCheckBox: function() {...}
} 
```

现在我想在我的表单中发生某些事件时调用不同的方法，如下所示：

```
$('#country-select').bind('change', function() {
    Form.updateCurrency();
});

$("input[type='checkbox']").bind('change', function() {
    Form.handleCheckBox();
}); 
```

我有很多这样的事件监听器，坦率地说，我发现它们很难像那样一一列出，并且与它们相关的对象没有直接关系。有没有更优雅的方式将它们封装在我的对象文字中`Form`？有最佳实践吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T20:57:59.040

我喜欢`@gillesc`答案，它在正确的轨道上。但是，我认为我们可以做得更好。

答案的主要问题`@gillesc`是它缺少事物的动态方面（例如事件处理程序），它还迫使您定义丑陋的回调函数。

所以我认为你应该如何解决你的问题。

```
// Test object
var testObj = {
    // Our event handlers. 
    // Notice how we must only define the callback function name here. 
    // Not the function itself. The callback function must be defined in testObj.
    handlers: {
        '#form submit': 'onSubmit'
    },
    // Method that will register all handlers to some selector
    registerHandlers: function() {
        var that = this;
        // Go through the handlers list.
        $.each(this.handlers, function(k, v) {
            // Parsing the event to two different parts. 
            // 1\. trigger event
            // 2\. selector
            var split = k.split(" "),
                el = split[0],
                trigger = split[1];

            // Delegating the trigger to selector
            $(document).delegate(el, trigger, that[v]);
        });
    },
    // Our actual callback function
    onSubmit: function(evt) {
        evt.preventDefault();
        alert("submit");
    }
}; 
```

这一切将如何运作？这很容易！我们只需要打电话`testObj.registerHandlers()`。

[JSFiddle 演示](http://jsfiddle.net/E3xyz/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:05:02.123

更好地组织您的标记并将类添加到与事件处理程序方法匹配的元素，以便您可以轻松创建处理程序列表并遍历它们以将它们绑定到目标元素。

```
Var Form = {
    ....,
    handlers: {
        country: function() {},
        checkbox: function() {}
    }
};

$.each(FORMS.handlers, function(k, v) {
    $('.' + k).on('change', v);
});

<select class="country">....</select>
<input class="checkbox" type="checkbox" /> 
```

然后你所要做的就是添加类和处理程序来扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:52:44.657

好吧，您不需要一开始就将您的函数包装在更多函数中。难道你不能：

```
$('#country-select').bind('change', Form.updateCurrency);
$("input[type='checkbox']").bind('change', Form.handleCheckBox); 
```

# android - 关闭以前的布局并膨胀另一个

> ID：10312428
> 
> 赞同：0
> 
> 时间：2012-04-25T08:59:52.617
> 
> 标签：android, layout

我有两个布局，我一个接一个地膨胀它，我想关闭前一个视图并膨胀另一个，但是视图转移到背景，因此两个对话框都存在。我想关闭背景中的对话框.
我尝试了以下修复：

1.dialog.dismiss(); --- 不工作

2.view.setVisibility(View.GONE); --- 对话框的标题仍然与对话框一起保留。

我附上了整个代码。请让我知道如何解决这个问题。谢谢。

菜单项目.java

```
 package com.menuproject;

        import android.app.Activity;
        import android.app.AlertDialog;
        import android.os.Bundle;
        import android.view.LayoutInflater;
        import android.view.Menu;
        import android.view.MenuItem;
        import android.view.View;
        import android.view.View.OnClickListener;
        import android.widget.Button;

        public class menuproject extends Activity {
            /** Called when the activity is first created. */

            AlertDialog.Builder dialog;
            AlertDialog.Builder dialog2;
            private AlertDialog alert = null;
            private AlertDialog alert2 = null;
            View updatedialog;
            View updatedialog2;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

            }

            protected void layoutsecond() {
                // TODO Auto-generated method stub
                this.dialog2 = new AlertDialog.Builder(this);
                this.dialog2.setTitle("Update");

                LayoutInflater layoutInflater = LayoutInflater.from(this);
                updatedialog2 = layoutInflater.inflate(R.layout.updatedialog2, null);

                this.dialog2.setView(updatedialog2);
                alert2 = this.dialog2.create();
                this.dialog2.show();

            }

            @Override
            public boolean onCreateOptionsMenu(Menu menu) {
                // TODO Auto-generated method stub
                MenuItem mi = menu.add(1, 1, 1, "My Menu1");
                mi.setIcon(getResources().getDrawable(R.drawable.icon));

                return super.onCreateOptionsMenu(menu);
            }

            @Override
            public boolean onOptionsItemSelected(MenuItem item) {

                switch (item.getItemId()) {
                case 1:

                    layoutfirst();

                    Button b = (Button) updatedialog.findViewById(R.id.Button11);
                    b.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {
                            // TODO Auto-generated method stub

                            // updatedialog.setVisibility(View.GONE);

                            // alert.dismiss();

                            layoutsecond();

                        }
                    });

                    break;

                }
                return super.onOptionsItemSelected(item);
            }

            private void layoutfirst() {
                // TODO Auto-generated method stub

                this.dialog = new AlertDialog.Builder(this);
                this.dialog.setTitle("Update");
                // this.dialog.setMessage("");

                LayoutInflater layoutInflater = LayoutInflater.from(this);
                updatedialog = layoutInflater.inflate(R.layout.updatedialog, null);

                this.dialog.setView(updatedialog);
                alert = this.dialog.create();
                this.dialog.show();

            }

        } 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/hello"
        />
    </LinearLayout> 
```

更新了对话框.xml

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ScrollView02" android:layout_width="fill_parent" 
        android:layout_height="fill_parent" android:fillViewport="true">

<LinearLayout
    android:id="@+id/liner1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >
        <requestFocus></requestFocus>

        <Button
            android:id="@+id/Button11"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableLeft="@android:drawable/ic_menu_call"
            android:text="Update Tel" />

        <Button
            android:id="@+id/Button10"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableLeft="@android:drawable/ic_menu_call"
            android:text="Update Address" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    </View>

</LinearLayout>
</ScrollView> 
```

更新了dialog2.xml

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ScrollView021" android:layout_width="fill_parent" 
        android:layout_height="fill_parent" android:fillViewport="true">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >
        <requestFocus></requestFocus>

        <Button
            android:id="@+id/Button01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:drawableLeft="@android:drawable/ic_menu_call"
            android:text="Update Mobile" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    </View>

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:36:30.633

您是否尝试过 alert.setContentView(inflated_layout) 而不是 dialog.setView(view_name)

# sql - 动态 SQL 查询

> ID：10312433
> 
> 赞同：0
> 
> 时间：2012-04-25T09:00:12.177
> 
> 标签：sql, stored-procedures

假设我有一个房地产网站，并且在默认页面中，我想让用户获得符合他的参数的帖子数量

我添加 [了一个示例图像的链接](http://cantrolfreak.com/default.aspx?word=Myrealastate)

计数器应该对每次更改做出反应并自动向用户显示数字（这将在 ajax jquery 中执行）

我写了一个查询，但只有在填写了所有参数后它才会起作用，并且我希望能够填写一些并且仍然让计数器工作

这是查询

```
ALTER PROCEDURE shahar30_nadlan.CountPropertyResultsByquery 

@AreaID         int,
@DealID        int,
@PropertyTypeId int,
@FieldMax      int,
@FieldMin      int,
@RoomsMax      decimal,
@RoomsMin      decimal,
@PriceMax      int,
@PriceMin      int,
@ParkingSpace  bit,
@Elevator      bit,
@Aircondition  bit,
@Furniture     bit,
@Warehouse     bit,
@Balkony       bit,
@handicapped  bit, 
@Immediate    bit,
@Description  NVARCHAR(MAX)

AS
BEGIN

select count(*) from Tbl_Property
where AreaID        = @AreaID         and 
  DealID        = @DealID         and
  PropertyTypeId= @PropertyTypeId and
  Field  <= @FieldMax        and
  Field  >= @FieldMin        and
  Rooms  <= @RoomsMax        and
  Rooms  >= @RoomsMin        and
  Price  <= @PriceMax        and
  Price  >= @PriceMin       and
  ParkingSpace = @ParkingSpace   and
  Elevator = @Elevator       and
  Aircondition = @Aircondition   and
  Furniture = @Furniture      and
  Warehouse = @Warehouse      and
  Balkony = @Balkony        and
  handicapped = @handicapped    and
  [Immediate] = @Immediate      and
  Description like  '%' + @Description + '%' 

END 
```

谢谢你，沙哈尔·纳迪亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:04:16.733

**并非** 所有参数都应填写

如果未提供值，则其为空（除非它具有默认值），然后：

您应该使用的模式是：

```
select * from myTable where 

(  @companyId  IS NULL  OR ( companyId = @companyId ))
and
 ( @Name IS NULL  OR ( Name  = @Name ))
and
... 
```

* * *

或者

```
 (   companyId  = isnull(@companyId,companyId ))
      and
  (    Name = isnull(@Name ,Name ))
      and

    ... 
```

这里也可以使用 coalesce - 但速度较慢。（比为空）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:09:40.253

你试过可选参数吗？这是一个例子：

```
@PriceMin      int = 1, 
```

您可以像这样设置默认值，然后只传递您想要的参数，其余的则采用默认值。

# asp.net - 如何为分层数据建立自引用模型

> ID：10312434
> 
> 赞同：-4
> 
> 时间：2012-04-25T09:00:16.610
> 
> 标签：asp.net, database, linq

我正在尝试从名为的 db 表中获取数据

## 部门

Id 名称 ParentId

我想在下拉列表中创建分层视图以在部门之间进行选择我想使用 linq 检索数据并将其绑定到下拉列表有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:55:19.260

[http://www.scip.be/index.php?Page=ArticlesNET18](http://www.scip.be/index.php?Page=ArticlesNET18)

为我工作

好文章

GetEmployeesHierarchy() 方法

我首先开始创建一个新的 EmployeeHierarchy 类。此类包含一个 Employee 实体（老板）和一组子雇员。

```
public class EmployeeHierarchy
{
  public Employee Employee { get; set; }
  public IEnumerable<EmployeeHierarchy> Employees { get; set; }
} 
```

在 .NET 3.5 中，我们可以使用 LINQ。因此，我创建了一个递归 GetEmployeesHierachy 函数，该函数将从主管（不必向任何人报告，ReportsTo = null）开始并查询为他工作的所有员工（ReportsTo == 老板的 EmployeeId）。这将递归地重复。最后，此函数将返回 EmployeeHierarchy 对象的集合。

```
public IEnumerable<EmployeeHierarchy> GetEmployeesHierachy(IEnumerable<Employee> allEmployees, Employee parentEmployee)
{
  int? parentEmployeeId = null;

  if (parentEmployee != null)
    parentEmployeeId = parentEmployee.EmployeeID;

  var childEmployees = allEmployees.Where(e => e.ReportsTo == parentEmployeeId);

  Collection<EmployeeHierarchy> hierarchy = new Collection<EmployeeHierarchy>();

  foreach (var emp in childEmployees)
    hierarchy.Add(new EmployeeHierarchy() { Employee = emp, Employees = GetEmployeesHierachy(allEmployees, emp) });

  return hierarchy;
} 
```

可以在 LINQ to SQL 或 LINQ to Entities（实体框架）查询之后调用此函数。确保调用 ToList() 扩展方法。首先从数据库中加载所有数据，然后将其转换为层次结构，这样的性能要高得多。通过调用 ToList() 方法，所有对数据库的引用都将被删除。

```
NorthWindDataContext dc = new NorthWindDataContext();

var employeesHierarchy = GetEmployeesHierachy(dc.Employees.AsEnumerable(), null);

treeViewEmployees.ItemsSource = employeesHierarchy; 
```

# sql - 我安装了哪个版本的 tSQLt（数据库测试框架）？

> ID：10312438
> 
> 赞同：2
> 
> 时间：2012-04-25T09:00:27.700
> 
> 标签：sql, tsqlt

有什么方法可以找到安装在数据库上的[tSQLt的版本号？](http://tsqlt.org)

请注意，tSQLt 是 SQL Server 的测试框架，而不是 T-SQL。（请不要投票关闭作为无关内容的重复项。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:07:27.657

从源代码来看，似乎有一个返回版本号的 info 函数。
尝试

```
SELECT * FROM tSQLt.Info() 
```

# api - GDATA 和 youtube，获取播放列表中的所有视频

> ID：10312439
> 
> 赞同：0
> 
> 时间：2012-04-25T09:00:32.240
> 
> 标签：api, gdata

有谁知道如何从播放列表中获取所有视频？

例如来自这个播放列表

[https://gdata.youtube.com/feeds/api/playlists/454A0274C1223C90?v=2](https://gdata.youtube.com/feeds/api/playlists/454A0274C1223C90?v=2)

它限制在 10 个结果

我试过 &max-results=1000 但是那个 404'ed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:33:20.720

尝试一次询问 50 个结果（最多允许）

```
GET /feeds/api/playlists/454A0274C1223C90?v=2&&max-results=100&fields=entry/id,entry/title&key=4{your-key} HTTP/1.1
Host: gdata.youtube.com
Authorization: OAuth ya29.AHES6ZQMwDjrUKh8RLysv-ZzF3DaUmg0XmG0jtVcWdSA0A
HTTP/1.1 400 Bad Request
status: 400
content-length: 246
x-xss-protection: 1; mode=block
x-content-type-options: nosniff
expires: Sat, 28 Apr 2012 16:29:01 GMT
x-google-cache-control: remote-fetch
server: GSE
via: HTTP/1.1 GWA
x-gdata-user-country: US
cache-control: private, max-age=0
date: Sat, 28 Apr 2012 16:29:01 GMT
x-frame-options: SAMEORIGIN
content-type: application/vnd.google.gdata.error+xml
-content-encoding: gzip
<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain><code>InvalidRequestUriException</code><internalReason>Max-results value is too high. Only up to 50 results can be returned per query.

GET /feeds/api/playlists/454A0274C1223C90?v=2&&max-results=50&fields=entry/id,entry/title&key=${key} HTTP/1.1
Host: gdata.youtube.com
Authorization: OAuth ya29.AHES6ZQMwDjrUKh8RLysv-ZzF3DaUmg0XmG0jtVcWdSA0A
HTTP/1.1 200 OK
status: 200
gdata-version: 2.1
content-length: 6703
via: HTTP/1.1 GWA
content-location: https://gdata.youtube.com/feeds/api/playlists/454A0274C1223C90?v=2&&max-results=50&fields=entry/id,entry/title&key=w1Q
x-content-type-options: nosniff
expires: Sat, 28 Apr 2012 16:32:08 GMT
vary: Accept, X-GData-Authorization, GData-Version
x-google-cache-control: remote-fetch
server: GSE
last-modified: Sat, 28 Apr 2012 10:46:07 GMT
x-xss-protection: 1; mode=block
etag: W/"A04CRn47eCp7I2A9WhVWFk0."
cache-control: private, max-age=300, no-transform
date: Sat, 28 Apr 2012 16:32:08 GMT
x-frame-options: SAMEORIGIN
content-type: application/atom+xml; charset=UTF-8; type=feed
-content-encoding: gzip
x-gdata-user-country: US 
```

# c++ - 使用 CUBLAS 找到最大值和最小值

> ID：10312440
> 
> 赞同：4
> 
> 时间：2012-04-25T09:00:32.327
> 
> 标签：c++, c, cuda, cublas

我无法理解为什么使用 CUBLAS 在一系列双打中找到最大值和最小值的函数不能正常工作。

代码如下：

```
void findMaxAndMinGPU(double* values, int* max_idx, int* min_idx, int n)
{
    double* d_values;
    cublasHandle_t handle;
    cublasStatus_t stat;
    safecall( cudaMalloc((void**) &d_values, sizeof(double) * n), "cudaMalloc     (d_values) in findMaxAndMinGPU");
    safecall( cudaMemcpy(d_values, values, sizeof(double) * n, cudaMemcpyHostToDevice), "cudaMemcpy (h_values > d_values) in findMaxAndMinGPU");
    cublasCreate(&handle);

    stat = cublasIdamax(handle, n, d_values, sizeof(double), max_idx);
    if (stat != CUBLAS_STATUS_SUCCESS)
        printf("Max failed\n");

    stat = cublasIdamin(handle, n, d_values, sizeof(double), min_idx);
    if (stat != CUBLAS_STATUS_SUCCESS)
        printf("min failed\n");

    cudaFree(d_values);
    cublasDestroy(handle);
} 
```

其中 values 是要在其中搜索的值。max_idx 和 min_idx 是值中找到的数字的索引。CUBLAS 调用的结果似乎相当随机并且输出错误的索引。

有人对我的问题有很好的答案吗？我现在有点难过:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T09:21:42.520

您对 the`cublasIdamax`和`cublasIdamin`调用的一个论点是错误的。BLAS 1 级调用中的`incx`参数应该始终是输入的步幅，以字为单位，而不是字节。所以我怀疑你想要更多类似的东西：

```
stat = cublasIdamax(handle, n, d_values, 1, max_idx);
if (stat != CUBLAS_STATUS_SUCCESS)
    printf("Max failed\n");

stat = cublasIdamin(handle, n, d_values, 1, min_idx);
if (stat != CUBLAS_STATUS_SUCCESS)
    printf("min failed\n"); 
```

通过使用`sizeof(double)`，您告诉例程使用 8 的步幅，这将使调用超出输入数组的分配存储空间并进入未初始化的内存。我想你实际上有 1 英寸的步幅`d_values`。

* * *

编辑：这是一个完整的可运行示例，它可以正常工作。注意我将代码切换为单精度，因为我目前无法访问支持双精度的硬件：

```
#include <cuda_runtime.h>
#include <cublas_v2.h>
#include <cstdio>
#include <cstdlib>
#include <sys/time.h>

typedef float Real;

void findMaxAndMinGPU(Real* values, int* max_idx, int* min_idx, int n)
{
    Real* d_values;
    cublasHandle_t handle;
    cublasStatus_t stat;
    cudaMalloc((void**) &d_values, sizeof(Real) * n);
    cudaMemcpy(d_values, values, sizeof(Real) * n, cudaMemcpyHostToDevice);
    cublasCreate(&handle);

    stat = cublasIsamax(handle, n, d_values, 1, max_idx);
    if (stat != CUBLAS_STATUS_SUCCESS)
        printf("Max failed\n");

    stat = cublasIsamin(handle, n, d_values, 1, min_idx);
    if (stat != CUBLAS_STATUS_SUCCESS)
        printf("min failed\n");

    cudaFree(d_values);
    cublasDestroy(handle);
}

int main(void)
{
    const int vmax=1000, nvals=10000;

    float vals[nvals];
    srand ( time(NULL) );
    for(int j=0; j<nvals; j++) {
       vals[j] = float(rand() % vmax);
    }

    int minIdx, maxIdx;
    findMaxAndMinGPU(vals, &maxIdx, &minIdx, nvals);

    int cmin = 0, cmax=0;
    for(int i=1; i<nvals; i++) {
        cmin = (vals[i] < vals[cmin]) ? i : cmin;
        cmax = (vals[i] > vals[cmax]) ? i : cmax;
    }

    fprintf(stdout, "%d %d %d %d\n", minIdx, cmin, maxIdx, cmax);

    return 0;
} 
```

在编译和运行时会给出：

```
$ g++ -I/usr/local/cuda/include -L/usr/local/cuda/lib cublastest.cc -lcudart -lcublas
$ ./a.out
273 272 85 84 
```

请注意，CUBLAS 遵循 FORTRAN 约定并使用 1 索引，而不是零索引，这就是 CUBLAS 和 CPU 版本之间存在 1 差异的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T16:13:02.763

来自描述：最大幅度的元素：http: [//docs.nvidia.com/cuda/cublas/index.html#topic_6_1](http://docs.nvidia.com/cuda/cublas/index.html#topic_6_1)

```
if you have { 1, 2, 3, -33, 22, 11 } 
```

结果将是 4！不是 5

```
abs(-33) > 22 
```

# solr - Solr 查询值是否匹配多个区间之一

> ID：10312441
> 
> 赞同：2
> 
> 时间：2012-04-25T09:00:34.563
> 
> 标签：solr, range

我正在寻找一种构建“反向”范围查询的方法，即而不是定义一个字段

```
<field name="myfield" type="int" ...> 
```

然后在查询中指定一个间隔

```
myfield:[x TO y] 
```

我宁愿在我的模式中定义一个“间隔字段”

```
<field name="myfield" type="<whatever_fits_here>" multivalued="true" ...> 
```

例如，该字段的值可能是

```
[100 TO 250], [460 TO 800], [970 TO 1040] 
```

然后，查询将包含该字段的精确值，因此如果该值包含在其任何间隔中，则记录将匹配。

注意：将区间中的所有可能值收集到一个多值字段中不是一个选项，这在许多情况下会导致每条记录大约 10000 个值（即区间的上限和下限因该数字而异）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:29:40.293

[本博](http://lucene.grantingersoll.com/2009/12/24/complex-fields-aka-poly-fields-in-apache-solr/)文中描述的 Poly 字段必须是您要查找的内容。

它包括一个`location(Double,Double)`类型的模式定义：

```
<fieldType name=”location” class=”solr.PointType” dimension=”2″ subFieldType=”double”/>
<field name=”store” type=”location” indexed=”true” stored=”true”/> 
```

和一个查询：

```
q=store:[44,-90 TO 46,-94] 
```

* * *

因此，您可以创建一个 range(Int,Int) 字段类型和一个使用它的多值字段。

```
q=myfield:[75,* TO *,75] //a range that includes 75
q=myfield:[50,* TO *,100] //a range that includes 50-100 
```

**免责声明：**我自己从未使用过 poly 字段。我不知道这些查询如何在多值字段上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:34:17.543

我会在[UpdateProcessor](http://www.google.es/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCoQFjAA&url=http://wiki.apache.org/solr/UpdateRequestProcessor&ei=sMSXT4L3NMaFhQfcvuyWBg&usg=AFQjCNGW_wkeNXMoi7KWBwmC4HryYf9ddw&sig2=2enE87DcPUDdoien3g7e1g)上执行此操作，您可以查看该字段的值，并根据其所属的位置将另一个 field2 设置为“range1”、“range2”等，然后查询 field2。

# java - 如何在java中以相同的方式洗牌两个列表？

> ID：10312442
> 
> 赞同：0
> 
> 时间：2012-04-25T09:00:51.303
> 
> 标签：java

我想以相同的方式洗牌两个列表。假设我有两个问题和答案列表。我想以相同的方式对它们进行洗牌，以使问题答案对保持不变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-07-01T17:10:42.540

Java Collections 对这个问题有一个（令人惊讶的）简单的解决方案：`Collections.shuffle(Collection<?>, Random)`使用`Random`具有相同种子的种子。

```
 List<Integer> quests = Arrays.asList(1, 2, 3, 4, 5);
    List<Integer> answers = Arrays.asList(10, 20, 30, 40, 50);

    long seed = System.nanoTime();
    Collections.shuffle(quests, new Random(seed));
    Collections.shuffle(answers, new Random(seed));

    System.out.println(quests);
    System.out.println(answers); 
```

## 笔记：

*额外的优化是危险的。* **这不起作用：**

```
 long seed = System.nanoTime();
    Random rnd = new Random(seed);
    Collections.shuffle(quests, rnd);
    Collections.shuffle(answers, rnd); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:03:46.330

您应该将问答对保存在 a`Map<YourQuestionType, YourAnswerType>`或 a中，而不是两个单独的列表`List<YourQuestionAnswerPair>`。

对于后者的通用解决方案，[此线程](https://stackoverflow.com/questions/521171/a-java-collection-of-value-pairs-tuples)也可能有用。

# c++ - 什么是未定义符号：X509_EXTENSION_free？

> ID：10312445
> 
> 赞同：0
> 
> 时间：2012-04-25T09:01:03.740
> 
> 标签：c++, openssl

我试图在 linux 上创建一个使用 openssl 的库。当我尝试加载此 dll（Linux 上的 *.so）时，我收到“未定义符号：X509_EXTENSION_free”错误。我有点困惑是 Openssl 还是我的代码实现的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:09:10.530

`-lcrypto`创建共享库时，您可能会丢失 a 。

# bamboo - 竹墙板平面图顺序

> ID：10312450
> 
> 赞同：5
> 
> 时间：2012-04-25T09:01:21.883
> 
> 标签：bamboo

我们为我们的构建环境设置了一个竹子设置，每次我们构建一些东西时，竹子墙板都会根据构建结果进行更新（就像它在[http://confluence.atlassian.com/display/BAMBOO40/中显示的那样）显示+the+墙板](http://confluence.atlassian.com/display/BAMBOO40/Displaying+the+Wallboard)）。这是正常行为。我想更改竹墙板中物品的顺序，以便将最后建造的物品的计划放在墙上的第一个位置。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:40:43.017

抱歉，但就目前而言，没有办法在最后构建时间之前订购墙板上的构建。

# java - 如何使用其他应用程序从内存中读取 pdf 文件？

> ID：10312453
> 
> 赞同：3
> 
> 时间：2012-04-25T09:01:41.333
> 
> 标签：java, android, pdf

在我的应用程序中，我正在内部应用程序文件（数据/数据/包/文件）中创建一个 pdf 文件，我希望这些文件在使用以下代码读取它们时是可读的：

```
 Uri path = Uri.fromFile(pdfFile); 
 Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
 pdfIntent.setDataAndType(path, "application/pdf");
 pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

我已阅读有关使用 openOutputStream() 方法的信息，但我不知道如何通过此阅读它们。有人可以帮助我吗？

**编辑**

pdf文件--

```
 File    directory=getFilesDir();
    pdfFile=new File(directory,filename+".pdf"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:50:27.360

将 PDF 写入内部存储时传递`MODE_WORLD_READABLE`给。`openOutputStream()`理论上，这将允许第三方应用程序读取它。

或者，`ContentProvider`为这个文件实现一个，例如我在[这个示例项目](https://github.com/commonsguy/cw-advandroid/tree/master/ContentProvider/Files)中演示的那个（在这里，将 PDF 从复制`assets/`到内部存储中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T01:11:18.533

添加这个：
pdfFile.setReadable(true, false);

# drupal - drupal 6：创建最后 10 个节点的下拉列表

> ID：10312455
> 
> 赞同：0
> 
> 时间：2012-04-25T09:01:48.390
> 
> 标签：drupal, views

这听起来很简单，但我就是无法理解......

我需要显示 X 类型的最后 10 个节点的简单下拉列表。我似乎无法用简单的视图创建它，它只能让我创建节点的静态列表，而不是下拉列表。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:07:38.967

好的，首先创建一个简单的视图，其中行样式为字段，样式为未格式化。使用节点标题作为字段并确保去除 HTML 标记。这应该为您提供纯文本的节点标题列表。这些将用作 HTML 选择元素的选项。

接下来我们需要创建一个模板来主题化输出。您可以通过覆盖默认视图模板来做到这一点。

单击主题旁边的信息：以显示您的模板选项。您想要为整个结果集设置主题，因此我们需要覆盖样式输出（未格式化的模板）。样式输出旁边是我选择的这个示例的模板建议列表：

视图-视图-未格式化--下拉-test.tpl.php

选择粗体后的建议（这适用于所有显示）。

把它放在文件中：

`

```
<select>

  <?php foreach ($rows as $id => $row): ?>

  <option value="<?php print $id; ?>">

    <?php print $row; ?>

  </option>

<?php endforeach; ?>

</select> 
```

`

将文件粘贴在您的主题文件夹中，然后单击重新扫描模板文件，您的模板应该被拾取并在视图界面中显示为粗体。

点击预览，现在您的结果将出现在一个光荣的下拉列表中。

# jquery - 如何最小化我的 jQuery 脚本

> ID：10312456
> 
> 赞同：1
> 
> 时间：2012-04-25T09:01:55.577
> 
> 标签：jquery

我正在研究 jQuery 库中的简单操作。

 `````
$('#hasAccount').click(function() {
        $('.authForm').slideDown(500, function() {
            if ($('.shippingAddress').is(':visible')) {
                $('.shippingAddress').slideUp(250);
            }
        });
});

$('#hasNotAccount').click(function() {
        $('.shippingAddress').slideDown(500, function() {
            if ($('.authForm').is(':visible')) {
                $('.authForm').slideUp(250);
            }
        });
}); 
````  `这是代码工作：http: [//jsfiddle.net/6tZQ2/2/](http://jsfiddle.net/6tZQ2/2/)

这很简单，但我想知道是否有任何解决方案可以将此脚本最小化为 1 个动作？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:34:24.510

也许这个？

[http://jsfiddle.net/6tZQ2/16/](http://jsfiddle.net/6tZQ2/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:03:32.777

您可以使用 slideToggle 并丢失 if 语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:05:29.700

来吧-尽管有数百万种方法可以做得更好/更好/更紧凑...这是我心目中最快的...：/

[http://jsfiddle.net/neuroflux/6tZQ2/3/](http://jsfiddle.net/neuroflux/6tZQ2/3/)

[编辑]虽然 - 这是`name`基于属性的 - 所以最好用另一种方式来做:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T09:07:53.753

试试看，我不是 jquery 专家：

```
$('input[name="account"]').click(function(e) {
    if(e.target.id == 'hasAccount') {
        $('.authForm').slideDown(500, function() {
            if ($('.shippingAddress').is(':visible')) {
                $('.shippingAddress').slideUp(250);
            }
        });
    } else {
        $('.shippingAddress').slideDown(500, function() {
            if ($('.authForm').is(':visible')) {
                $('.authForm').slideUp(250);
            }
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T09:08:00.143

如何在更一般的 dom 中包含这两个功能。``

# wcf - 使 TFS 在发布版本中包含已发布的 WCF 服务

> ID：10312458
> 
> 赞同：2
> 
> 时间：2012-04-25T09:02:31.723
> 
> 标签：wcf, tfs, build, tfsbuild

我们有一个发布版本，我们希望将所有 WebApps 和 WCF 服务作为单独的 zipfile 包含在构建中。

发布版本包括我们所有的解决方案在构建过程页面上的“要构建的项目”中。

我们在 Process 页面上使用以下“MSBuild Arguments”：

```
"/p:CreatePackageOnPublish=True /p:DeployOnBuild=True" 
```

这对 Web 应用程序项目非常有用，它们被压缩并包含在内，因此我们可以从 Powershell 脚本中解压缩它们并将它们部署在服务器上。

但是，“WCF 服务库”项目和“WCF 服务应用程序”项目不包括在内。

我也试过设置

```
<DeployOnBuild>True</DeployOnBuild> 
<CreatePackageOnPublish>True</CreatePackageOnPublish> 
```

在 csproj 文件中，但它没有被包含（如[http://vishaljoshi.blogspot.com/2010/11/team-build-web-deployment-web-deploy-vs.html](http://vishaljoshi.blogspot.com/2010/11/team-build-web-deployment-web-deploy-vs.html)中所述）

有人知道如何使 MSBuild 还包含“WCF 服务库”项目吗？

我们使用 TFS 2011，但它应该与 TFS 2010 兼容

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-21T20:38:20.660

这样做的一种方法是拥有一个 Asp.net 网站，该网站在同一解决方案中充当 WCF 服务库的主机，该解决方案仅引用 WCF 服务库并具有其 .svc 文件。

因此，现在当您触发 TFS 构建时，您将能够在“_PublishedWebsites”文件夹中拥有 Asp.net 网站，这实际上意味着您已经成功地使用 TFS 发布了 WCF 服务。

# ios - 选择允许外部存储时，iPhone 核心数据迁移会导致二进制数据丢失

> ID：10312460
> 
> 赞同：5
> 
> 时间：2012-04-25T09:02:37.433
> 
> 标签：ios, core-data, migration

我正在尝试添加一个新模型。新模型将具有一个新实体以及从当前实体到新实体的关系。我创建了新模型并将其设置为当前模型。尽管一切正常并且我可以访问新实体，但一些“二进制数据”条目是零。

我尝试添加映射模型然后迁移，但结果是一样的。存储的“二进制数据”是 UIImage。正在迁移一些小缩略图。没有迁移完整尺寸的 UIImage。

我在想可能不会迁移自动存储在外部的实体（由于它们的大小）。

**更新**

我构建了一个存储图像集合的小项目。我尝试创建一个新模型，一切正常。然后我将新项目与旧项目进行比较，唯一的区别是“允许外部存储”。我在新项目中选择了这个选项，创建了一个新模型，但图片丢失了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-09T14:22:32.997

> 我在想可能不会迁移自动存储在外部的实体（由于它们的大小）。

这正是发生的事情。这是一个苹果的错误。Core Data 将超过一定大小的二进制数据存储在 Documents 文件夹内的外部支持文件夹中。出于某种原因，在迁移期间，Core Data 只是擦除了该外部存储文件夹 - gulp！因此，缩略图数据可以正常迁移，因为它没有存储在 SQLite DB 的外部，但更大的外部二进制文件只是被删除了。

我提出的解决方案是，当您的代码为您的 Core Data 模型初始化持久存储协调器时，在尝试自动迁移之前运行一些检查。检查新模型是否与当前存储的模型兼容。如果不是，那么您知道 Core Data 即将将您的旧模型迁移到新版本，这样做会擦除外部存储文件夹。在此之前，只需将外部存储文件夹移动到临时位置。迁移完成后，替换 Core Data 生成的新的空外部存储文件夹。

我在这篇博文中记录了完整的解决方案和源代码：

[http://www.nickkuh.com/iphone/core-data-migration-woes-with-binary-data-and-external-storage-data-loss/2012/06/](http://www.nickkuh.com/iphone/core-data-migration-woes-with-binary-data-and-external-storage-data-loss/2012/06/)

# android - 从 Android 使用 Google Drive SDK

> ID：10312468
> 
> 赞同：8
> 
> 时间：2012-04-25T09:02:52.863
> 
> 标签：android, google-drive-api

我花了几个小时试图弄清楚如何使用 SDK。它看起来很冗长，并且有大约 20 个依赖项，但绝对没有使用示例。

有谁知道我在哪里可以找到一些可以学习的例子。Dropbox 只是下载 SDK 并使用它的一个例子。谷歌驱动器似乎只有 javadoc，如果您已经知道自己在做什么，它只会作为参考有用。

我正在尝试做我认为最简单的操作。上传、下载、删除、创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:53:38.320

我最初遇到了同样的问题，找到了一个真正适用于 Google Docs 的 SDK。

最后，我最终使用原始 HTTP 请求自己实现了它，正如 Alain 链接的另一个答案中所建议的那样。我的实现只处理文件传输和文件管理，但它实现起来非常简单，并且也适用于 Google Drive 文件。我基本上只是从此处找到的 Google Documents List API 3.0 版中实现了我需要的东西：[https ://developers.google.com/google-apps/documents-list/](https://developers.google.com/google-apps/documents-list/)

这花了一点时间，但非常值得，而且更轻量级，因为我不必包含各种 Google API 的所有依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T06:36:34.967

Google 现在有一个名为[Quickstart: Run a Drive App on Android](https://developers.google.com/drive/quickstart-android)的教程。

Drive API 位于[https://developers.google.com/drive/v2/reference/](https://developers.google.com/drive/v2/reference/)

如果您的目标是让用户使用您的应用直接从适用于 Android 的 Drive 应用打开文件，请参阅[与 Android Drive 应用集成](https://developers.google.com/drive/integrate-android-ui)。

# javascript - 当用户在浏览器中选择文本时，有没有办法改变背景颜色（对于 IE9 以下版本）

> ID：10312472
> 
> 赞同：0
> 
> 时间：2012-04-25T09:03:00.707
> 
> 标签：javascript, jquery, html, css, cross-browser

我们都知道，当我们在浏览器中选择一个文本部分时，它的背景颜色会变为蓝色。我使用 ::selection 伪元素来更改背景颜色，如下面的代码。

```
::selection {
    background: pink;color: yellow;
}
::-moz-selection {
    background: pink;color: yellow;
} 
```

[请在此处](http://jsfiddle.net/Mh5As/1/)查看我的示例， 但 ::selection 不支持以下版本的 IE9。请检查[此页面提供的](https://developer.mozilla.org/En/CSS/%3a%3aselection)**浏览器兼容性**表一次。我需要在以下版本的 IE9 中应用相同的属性。谁能告诉我做这个的另一种方法。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:38:49.633

你可以用jquery做到这一点的一种方法

```
<script type="text/javascript">
$('document').ready(function(){
$("#textfield").focus(function () {
$('.class').css(' background-color','#ffe823');
});
}); 
```

```
<input type="text" class="class" name="textfield" id="textfield" > 
```

# java - 使用 null 参数调用重载的构造函数

> ID：10312474
> 
> 赞同：2
> 
> 时间：2012-04-25T09:03:05.203
> 
> 标签：java

无参数构造函数会抛出错误，因为编译器不知道要调用哪个构造函数。解决办法是什么？

```
private Test() throws Exception {
    this(null);//THIS WILL THROW ERROR, I WAN'T TO CALL A SPECIFIC CONSTRUCTOR FROM THE TWO BELOW. HOW TO DO??
}
private Test(InputStream stream) throws Exception {

}

private Test(String fileName) throws Exception {

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:03:57.297

类型转换`null`：

```
private Test() throws Exception {
    this((String)null); // Or of course, this((InputStream)null);
} 
```

但是你想要打电话`Test(String)`或争论似乎`Test(InputStream)`有点奇怪......`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:11:26.130

我不明白为什么所有这些精心制作的构造函数都是私有的。

我会这样做：

```
private Test() throws Exception {
    this(new PrintStream(System.in);
}

private Test(InputStream stream) throws Exception {
    if (stream == null) {
        throw new IllegalArgumentException("input stream cannot be null");
    }   
    // other stuff here.
}    

private Test(String fileName) throws Exception {
    this(new FileInputStream(fileName));
} 
```

# java - 开发远程数据库驱动的 android 应用程序的更好方法？

> ID：10312478
> 
> 赞同：0
> 
> 时间：2012-04-25T09:03:19.697
> 
> 标签：java, android

我在我的个人共享主机上托管了一个 wordpress 博客。现在我想为该博客开发一个 android 应用程序，以便用户可以使用移动应用程序查看我在博客上写的内容。

例如，您可以使用 mashable.com android 应用程序。

所以基本上我有编程android aap的经验，但我只是问这个，所以我可以用更好的方式编码。

我现在有 3 个想法：

1.使用我博客的rss feed并解析并显示内容，但它存在rss只显示最新内容的问题。所以我是否需要将feed内容及时存储在android设备上以便用户可以查看以前的大部分内容还。

但我认为这不是一个好主意，因为它会不必要地增加数据库的大小并在每台设备上制作差异副本。

2.只需简单地使用完整的java代码根据用户请求从我的web mysql数据库中提取数据，并将其显示在屏幕上，而无需将其本地存储在android设备上。

3.在我的 Web 服务器上开发某种 API 解决方案，然后以 json 或 xml 格式发送数据，这样我就可以在我的 android 设备（通过 java）上使用它，而无需将连接到 mysql 服务器作为核心部分，因为该部分已经完成通过在网络服务器上，我的 api 已经以所需的格式发送数据。

所以这些是我现在有的 3 个想法。所以请给我建议一个更好的形式，这三个或者你可以给出任何其他的想法。

我问这个问题是因为以前我从未编写过这种需要从远程服务器提取数据的移动 aap。

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:33:35.253

您可以简单地安装[WordPress Mobile Pack](http://wordpress.org/extend/plugins/wordpress-mobile-pack/screenshots/)以显示您的 wordpress 博客/网站的移动网站，或者您可以查看此链接以查找其他插件：[创建移动友好 WordPress 网站的 11 种方法](http://www.wpbeginner.com/wp-tutorials/11-ways-to-create-a-mobile-friendly-wordpress-site/)

现在，如果你想创建一个应用程序，那么你可以简单地使用**WebView**来实现它。

# android - android中活动的全局指示

> ID：10312480
> 
> 赞同：0
> 
> 时间：2012-04-25T09:03:24.873
> 
> 标签：android

在我的应用程序中，我正在上传一些可能需要几分钟的文件。我正在考虑一种通过在我的自定义标题栏中添加进度条来通知用户被动进行的活动的方法。我想要做的是让每个使用自定义标题的活动都与进度条一起出现，直到线程完成并执行回调，这将使进度条不可见。这样的事情可以完成吗？

似乎使这不可能的是，如果用户在加载视图的活动中，线程完成回调将不得不操纵加载的视图资源以禁用似乎不可行的进度条。是否有任何建议来完成此或替代解决方案，以保持全局和被动地指示后台发生的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:23:25.753

您可以使用服务来实现这一点。[服务](http://developer.android.com/guide/topics/fundamentals/services.html)

基本上它是如何工作的，是在创建活动时绑定到每个活动中的服务。您使用此服务来启动您的上传方法。

当您绑定到服务时，您会传递一个处理程序，然后使用该处理程序在该特定活动中更新您的 UI。该服务永远不会直接影响 UI（它将在单独的线程上运行），而是处理程序将消息传递回 UI 线程，其中包含 Bundle 中的数据，例如上传进度，或表示已完成的布尔值。

# java - Mac OSX 上的 Java 进程不释放套接字

> ID：10312488
> 
> 赞同：12
> 
> 时间：2012-04-25T09:03:36.943
> 
> 标签：java, eclipse, macos, parallels

我时不时地遇到一个奇怪的问题（实际上经常遇到）。

我正在运行一个服务器应用程序，它为自己绑定一个套接字。

但是偶尔，套接字并没有被释放。尽管 Eclipse 报告 Terminate 失败，但该进程终止，但是它从“ps”和 JConsole/JVisualVM 中正确消失。'lsof' 也不再显示该端口的任何内容。但是，当我尝试再次将服务器启动到同一端口时出现此错误：

```
Caused by: java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind(Native Method)
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126)
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) 
```

这个问题在我的单元测试中最严重，它永远不会完全运行，因为这肯定会发生在其中一个测试之后（所有测试都重新创建了服务器）。

我正在运行 MacOSX 10.7.3

Java(TM) SE 运行时环境（内部版本 1.6.0_31-b04-415-11M3635） Java HotSpot(TM) 64 位服务器 VM（内部版本 20.6-b01-415，混合模式）

我也有 Parallels，而且问题通常看起来是由 Parallels 网络适配器引起的，但我不确定它是否与这个问题有关（到目前为止，我已经联系了他们的支持，但没有任何帮助）。

唯一有助于解决这种情况的是重新启动 OSX。

有任何想法吗？

--

这是打开套接字的相关代码：

```
channel = (ServerSocketChannel) ServerSocketChannel.open().configureBlocking(false);
 channel.socket().bind( addr, 0 ); 
```

它被关闭

```
 channel.close(); 
```

但我假设该过程被卡在这里，然后 Eclipse 将其杀死。

--

netstat -an（用于端口 6007）：

```
tcp4      73      0  127.0.0.1.6007         127.0.0.1.51549        ESTABLISHED
tcp4       0      0  127.0.0.1.51549        127.0.0.1.6007         ESTABLISHED
tcp4      73      0  127.0.0.1.6007         127.0.0.1.51544        CLOSE_WAIT 
tcp4       0      0  127.0.0.1.6007         127.0.0.1.51543        CLOSE_WAIT 
tcp4       0      0  10.37.129.2.6007       *.*                    LISTEN     
tcp4       0      0  10.211.55.2.6007       *.*                    LISTEN     
tcp4       0      0  127.0.0.1.6007         *.*                    LISTEN     
tcp4       0      0  10.50.100.236.6007     *.*                    LISTEN 
```

--

现在，在为每个测试打开套接字后，我得到了这个异常（这种情况下的 netstat 输出）：

```
Caused by: java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at java.net.SocketInputStream.read(SocketInputStream.java:182) 
```

--

从 Eclipse 中停止进程我得到“终止失败”，但 lsof -i TCP:6007 没有显示任何内容，并且“ps”不再找到该进程。netstat 输出没有改变...

我可以在不重新启动的情况下以某种方式杀死套接字吗（这已经有点帮助了）？

--

更新 5.5.12：

我现在在 Eclipse 调试器中运行了测试。这次测试在 18 种方法后卡住了。我在主线程卡住了大约 15 分钟后停止了它。这是堆栈：

```
Thread [main] (Suspended)   
    FileDispatcher.preClose0(FileDescriptor) line: not available [native method]    
    SocketDispatcher.preClose(FileDescriptor) line: 41  
    ServerSocketChannelImpl.implCloseSelectableChannel() line: 208 [local variables unavailable]    
    ServerSocketChannelImpl(AbstractSelectableChannel).implCloseChannel() line: 201 
    ServerSocketChannelImpl(AbstractInterruptibleChannel).close() line: 97  
... 
```

--

嗯，看起来进程并没有被杀死，毕竟 - 也不会杀死 -9 （我注意到进程 712 和可能还有 710 是 TestNG 进程）：

```
$ kill -9 712
$ ps xa | grep java
  700   ??  ?E     0:00.00 (java)
  712   ??  ?E     0:00.00 (java)
  797 s005  S+     0:00.00 grep java 
```

-- 编辑：10.5.12：

上面 ps 输出中的 ?E 表示进程正在退出。我找不到任何方法可以在不重新启动的情况下完全终止这样的进程。其他一些应用程序也注意到了同样的问题。未找到解决方案：

[http://www.google.com/search?q=ps+process+is+exiting+osx](http://www.google.com/search?q=ps+process+is+exiting+osx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:35:26.217

[尝试在每次测试后使用http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#close](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#close) ()关闭套接字 ，如果您还没有在拆解中.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T19:07:21.433

这里只是在黑暗中拍摄，但要确保等待 Selector.select() 的任何线程都已被唤醒并退出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T15:24:30.243

因此，问题似乎在于 Mac 版本的 JDK 6 中 Selector 的实现。安装新的 Oracle JDK 7u4 解决了这个问题，与 Selector 的使用方式无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:17:32.143

> 我也有 Parallels，而且通常问题看起来是由 Parallels 网络适配器引起的....

如果这个问题没有在其他平台上出现，我会说这是一个公平的赌注。你做了什么来排除 Parallels 作为罪魁祸首？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T19:49:30.860

如果您认为资源没有正确释放，您可以尝试在shutdownhook中进行释放。像这样至少在它关闭时资源将被释放（如果你硬杀则不会）

一个非常基本的shutdownhook示例：

```
public void shutDownProceedure(){
    Runtime.getRuntime().addShutdownHook(new Thread() {
        public void run() {
            /* my shutdown code here */
        }
    });
} 
```

这帮助我释放了以前没有完全释放的资源。我不知道这是否也适用于套接字，我认为应该。

它还让我看到了我以前从未见过的日志

# c++ - 使用 __except 分析故障转储

> ID：10312492
> 
> 赞同：0
> 
> 时间：2012-04-25T09:03:52.497
> 
> 标签：c++, c, winapi, windbg, crash-dumps

假设我有以下代码

```
main()
{

   __try 
  {

   //---> SEH EXCEPTION HAS HAPPENED HERE

  }
   __finally
  {

   //---> CRASH DUMP WAS TAKEN HERE

  }

} 
```

故障转储是在“--->”标记的地方进行的。我可以从 userdump 中知道将我们带到那里的原始异常是什么。我在堆栈跟踪中找不到任何信息（看起来就像没有异常处理程序的正常执行）

UPD：抱歉，似乎异常不在此线程中，否则最终处理程序将在展开阶段从 __except_handler 明确调用。需要关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:07:18.193

你只是做错了。崩溃转储应该在 __except 过滤器中进行。现在 .excr 和 !analyze 将在调试器中正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:14:47.610

使用 WinDbg 并遵循此博客文章中的详细信息：http: [//blogs.msdn.com/b/slavao/archive/2005/01/30/363428.aspx](http://blogs.msdn.com/b/slavao/archive/2005/01/30/363428.aspx) WinDbg 可以从这里下载：http: [//msdn.microsoft .com/en-us/windows/hardware/gg463009](http://msdn.microsoft.com/en-us/windows/hardware/gg463009)

# ruby-on-rails - Rmagick 已安装：`require'：没有要加载的文件 -- RMagick (LoadError)

> ID：10312493
> 
> 赞同：2
> 
> 时间：2012-04-25T09:03:53.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我在 rails 的 lib 文件夹中运行命令 ruby​​ billede.rb 时，出现错误：

```
C:\Rails\myapp\lib>ruby billede.rb
C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':
no such file to load -- RMagick (LoadError)
        from C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from billede.rb:2:in `<main>' 
```

我的 Billede.rb：

```
class Billede
require 'rubygems'
require 'RMagick'

if !ARGV[0]
    puts "Usage: watermark /image.png"
    exit
end

image = Magick::Image.read(ARGV[0]).first

mark = Magick::Image.new(image.columns, image.rows)

gc = Magick::Draw.new
gc.gravity = Magick::CenterGravity
gc.pointsize = 32
gc.font_family = "Helvetica"
gc.font_weight = Magick::BoldWeight
gc.stroke = 'none'
gc.annotate(mark, 0, 0, 0, 0, "Watermark\nby\nRMagick")

mark = mark.shade(true, 310, 30)

image.composite!(mark, Magick::CenterGravity, Magick::HardLightCompositeOp)

out = ARGV[0].sub(/\./, "-wm.")
puts "Writing #{out}"
image.write(out)
end 
```

我已经安装了 RMagick。

安装 gem 时更新。

在我的 gemfile 中，我有：

```
gem "rmagick", :require => 'RMagick' 
```

运行捆绑安装时：

```
C:\Rails\myapp>bundle install
Fetching source index for http://rubygems.org/
Using rake (0.9.1)
Using abstract (1.0.0)
Using activesupport (3.0.9)
Using builder (2.1.2)
Using i18n (0.5.0)
Using activemodel (3.0.9)
Using erubis (2.6.6)
Using rack (1.2.4)
Using rack-mount (0.6.14)
Using rack-test (0.5.7)
Using tzinfo (0.3.30)
Using actionpack (3.0.9)
Using mime-types (1.16)
Using polyglot (0.3.2)
Using treetop (1.4.10)
Using mail (2.2.19)
Using actionmailer (3.0.9)
Using arel (2.0.10)
Using activerecord (3.0.9)
Using activeresource (3.0.9)
Using addressable (2.2.6)
Using bundler (1.0.18)
Using multipart-post (1.1.4)
Using faraday (0.7.6)
Using friendly_id (4.0.0)
Using hashie (1.2.0)
Using json (1.6.1)
Using multi_json (1.0.4)
Using mysql (2.8.1)
Using oauth2 (0.5.2)
Using omniauth (1.0.2)
Using omniauth-oauth2 (1.0.0)
Using omniauth-facebook (1.2.0)
Using rdoc (3.10)
Using thor (0.14.6)
Using railties (3.0.9)
Using rails (3.0.9)
Using rest-client (1.6.7)
Installing rmagick (2.13.1) with native extensions C:/Ruby192/lib/ruby/site_ruby
/1.9.1/rubygems/installer.rb:552:in `rescue in block in build_extensions': ERROR
: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError)

        C:/Ruby192/bin/ruby.exe extconf.rb
checking for Ruby version >= 1.8.5... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for snprintf() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdin
t.h,sys/types.h,wand/MagickWand.h... yes
checking for AcquireImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,s
tdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AffinityImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,
stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AffinityImages() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h
,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AutoGammaImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h
,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for AutoLevelImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h
,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for BlueShiftImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h
,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for ConstituteComponentTerminus() in assert.h,ctype.h,stdio.h,stdlib.h,
math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DeskewImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,st
dint.h,sys/types.h,wand/MagickWand.h... yes
checking for EncipherImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,
stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for EqualizeImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,
time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for FloodfillPaintImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,t
ime.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for FunctionImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,
time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetAuthenticIndexQueue() in assert.h,ctype.h,stdio.h,stdlib.h,math.
h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetAuthenticPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,ti
me.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetImageAlphaChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,
time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for GetVirtualPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time
.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LevelImageColors() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time
.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LevelColorsImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math
.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LevelizeImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,
time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for LiquidRescaleImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,ti
me.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for MagickLibAddendum() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,tim
e.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for OpaquePaintImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math
.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for QueueAuthenticPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,
time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for RemapImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,std
int.h,sys/types.h,wand/MagickWand.h... yes
checking for RemoveImageArtifact() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,t
ime.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SelectiveBlurImageChannel() in assert.h,ctype.h,stdio.h,stdlib.h,ma
th.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SetImageAlphaChannel() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,
time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SetImageArtifact() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time
.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SetMagickMemoryMethods() in assert.h,ctype.h,stdio.h,stdlib.h,math.
h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SparseColorImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time
.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for SyncAuthenticPixels() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,t
ime.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for TransparentPaintImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h
,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for TransparentPaintImageChroma() in assert.h,ctype.h,stdio.h,stdlib.h,
math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for QueryMagickColorname() new signature... yes
checking for Image.type in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdin
t.h,sys/types.h,wand/MagickWand.h... yes
checking for DrawInfo.kerning in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h
,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DrawInfo.interline_spacing in assert.h,ctype.h,stdio.h,stdlib.h,mat
h.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DrawInfo.interword_spacing in assert.h,ctype.h,stdio.h,stdlib.h,mat
h.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for DitherMethod in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,std
int.h,sys/types.h,wand/MagickWand.h... yes
checking for MagickFunction in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,s
tdint.h,sys/types.h,wand/MagickWand.h... yes
checking for ImageLayerMethod in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h
,stdint.h,sys/types.h,wand/MagickWand.h... yes
checking for long double in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdi
nt.h,sys/types.h,wand/MagickWand.h... yes
checking for AlphaChannelType.CopyAlphaChannel... yes
checking for AlphaChannelType.BackgroundAlphaChannel... yes
checking for CompositeOperator.BlurCompositeOp... yes
checking for CompositeOperator.DistortCompositeOp... yes
checking for CompositeOperator.LinearBurnCompositeOp... yes
checking for CompositeOperator.LinearDodgeCompositeOp... yes
checking for CompositeOperator.MathematicsCompositeOp... yes
checking for CompositeOperator.PegtopLightCompositeOp... yes
checking for CompositeOperator.PinLightCompositeOp... yes
checking for CompositeOperator.VividLightCompositeOp... yes
checking for CompressionType.DXT1Compression... yes
checking for CompressionType.DXT3Compression... yes
checking for CompressionType.DXT5Compression... yes
checking for CompressionType.ZipSCompression... yes
checking for CompressionType.PizCompression... yes
checking for CompressionType.Pxr24Compression... yes
checking for CompressionType.B44Compression... yes
checking for CompressionType.B44ACompression... yes
checking for DistortImageMethod.BarrelDistortion... yes
checking for DistortImageMethod.BarrelInverseDistortion... yes
checking for DistortImageMethod.BilinearForwardDistortion... yes
checking for DistortImageMethod.BilinearReverseDistortion... yes
checking for DistortImageMethod.DePolarDistortion... yes
checking for DistortImageMethod.PolarDistortion... yes
checking for DistortImageMethod.PolynomialDistortion... yes
checking for DistortImageMethod.ShepardsDistortion... yes
checking for DitherMethod.NoDitherMethod... yes
checking for FilterTypes.KaiserFilter... yes
checking for FilterTypes.WelshFilter... yes
checking for FilterTypes.ParzenFilter... yes
checking for FilterTypes.LagrangeFilter... yes
checking for FilterTypes.BohmanFilter... yes
checking for FilterTypes.BartlettFilter... yes
checking for FilterTypes.SentinelFilter... yes
checking for MagickEvaluateOperator.PowEvaluateOperator... yes
checking for MagickEvaluateOperator.LogEvaluateOperator... yes
checking for MagickEvaluateOperator.ThresholdEvaluateOperator... yes
checking for MagickEvaluateOperator.ThresholdBlackEvaluateOperator... yes
checking for MagickEvaluateOperator.ThresholdWhiteEvaluateOperator... yes
checking for MagickEvaluateOperator.GaussianNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.ImpulseNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.LaplacianNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.MultiplicativeNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.PoissonNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.UniformNoiseEvaluateOperator... yes
checking for MagickEvaluateOperator.CosineEvaluateOperator... yes
checking for MagickEvaluateOperator.SineEvaluateOperator... yes
checking for MagickEvaluateOperator.AddModulusEvaluateOperator... yes
checking for MagickFunction.ArcsinFunction... yes
checking for MagickFunction.ArctanFunction... yes
checking for MagickFunction.PolynomialFunction... yes
checking for MagickFunction.SinusoidFunction... yes
checking for ImageLayerMethod.FlattenLayer... yes
checking for ImageLayerMethod.MergeLayer... yes
checking for ImageLayerMethod.MosaicLayer... yes
checking for ImageLayerMethod.TrimBoundsLayer... yes
checking for VirtualPixelMethod.HorizontalTileVirtualPixelMethod... yes
checking for VirtualPixelMethod.VerticalTileVirtualPixelMethod... yes
checking for VirtualPixelMethod.HorizontalTileEdgeVirtualPixelMethod... yes
checking for VirtualPixelMethod.VerticalTileEdgeVirtualPixelMethod... yes
checking for VirtualPixelMethod.CheckerTileVirtualPixelMethod... yes
checking for ruby/io.h... yes
checking for rb_frame_this_func() in ruby.h,ruby/io.h... yes
creating extconf.h
creating Makefile

======================================================================
Wed 25Apr12 14:10:35
This installation of RMagick 2.13.1 is configured for
Ruby 1.9.2 (i386-mingw32) and ImageMagick 6.7.6
======================================================================

make

Gem files will remain installed in C:/Ruby192/lib/ruby/gems/1.9.1/gems/rmagick-2
.13.1 for inspection.
Results logged to C:/Ruby192/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1/ext/RMagick
/gem_make.out
        from C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:530:in `b
lock in build_extensions'
        from C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:505:in `e
ach'
        from C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:505:in `b
uild_extensions'
        from C:/Ruby192/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:180:in `i
nstall'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/sour
ce.rb:101:in `block in install'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/ruby
gems_integration.rb:78:in `preserve_paths'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/sour
ce.rb:91:in `install'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/inst
aller.rb:58:in `block (2 levels) in run'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/ruby
gems_integration.rb:93:in `with_build_args'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/inst
aller.rb:57:in `block in run'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/inst
aller.rb:49:in `run'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/inst
aller.rb:8:in `install'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/cli.
rb:220:in `install'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/vend
or/thor/task.rb:22:in `run'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/vend
or/thor/invocation.rb:118:in `invoke_task'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/vend
or/thor.rb:263:in `dispatch'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/lib/bundler/vend
or/thor/base.rb:386:in `start'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.18/bin/bundle:13:in
 `<top (required)>'
        from C:/Ruby192/bin/bundle:19:in `load'
        from C:/Ruby192/bin/bundle:19:in `<main>'

C:\Rails\myapp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:20:40.280

如果您使用 Bundler（当您使用 Rails 时，您也在使用 Bundler），您需要将 RMagick 添加到您的 Gemfile。Bundler 仅将捆绑的 gem 加载到您的环境中。

宝石文件

```
source :rubygems

# loads of other stuff

gem 'rmagick' 
```

然后运行

```
bundle install 
```

你应该很高兴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T21:35:49.600

您需要先安装 imagemagic：

```
sudo apt-get install libmagickwand-dev imagemagick 
```

然后将 ruby​​ 包装器添加到您的 gemfile 中：

```
gem 'rmagick' 
```

最后告诉 Bundler 下载 rmagic：

```
bundle install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:20:15.390

External scripts in your rails project should be run as follows:

```
bundle exec lib/billede.rb <params> 
```

(make sure you have `gem 'RMagick'` in the Gemfile)

this way in case of any dependency issues you'll get more descriptive output.

# android - Android自定义键盘shift键

> ID：10312495
> 
> 赞同：1
> 
> 时间：2012-04-25T09:03:55.407
> 
> 标签：android

我如何实现`Shift`android自定义键盘的键功能，我想在单击`Shift`键时将键从大写更改为小写和小写到大写，对我来说它即将到来，但在输入消息时文本只是小写，而且我每个键都需要单独的背景，为此我实现`android:keyicon`了而不是`android:keylabel`属性，但是在这样做时，通过按他键从大写变为小时会出现问题`Shift`，任何想法请帮助，非常感谢您的努力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:07:01.657

查看Hackerskeyboard的[这个项目](http://code.google.com/p/hackerskeyboard/source/checkout)。

它完全实现了

# php - Jquery 移动 php 站点和 phonegap

> ID：10312501
> 
> 赞同：0
> 
> 时间：2012-04-25T09:04:07.697
> 
> 标签：php, jquery, mobile, cordova

我试图通过使用phonegap在线转换工具将我使用jquery的网站及其包含一些`PHP`页面的网站转换为Android应用程序，该应用程序可以在导航上工作，但`PHP`页面将无法相应工作，那么有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:15:05.960

您不能在手机上运行 php 脚本，您可以将所有 php 脚本转换为 html 页面，或者您可以在 webview 中加载整个网站。

放置`window.location = 'example.com'`在您的 deviceLoad 事件中，并确保您在 config.xml 中将您的网站列入白名单

可以在此处找到在 config.xml 中放置的内容。 [https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

但是，您需要互联网连接才能运行该应用程序，而 html 页面不需要互联网。

# php - PHP 仅从 UNC 路径中提取文件名

> ID：10312502
> 
> 赞同：1
> 
> 时间：2012-04-25T09:04:08.120
> 
> 标签：php

我正在尝试创建一个 Intranet 页面，该页面在 UNC 路径中查找所有 pdf 文档，并将它们作为在新窗口中打开的超链接在列表中返回。我快到了，但是下面的代码显示了完整的 UNC 路径-我的问题是如何只显示文件名（最好也没有 .pdf 扩展名）。我已经尝试过*basename*函数，但似乎无法得到正确的结果。

```
//path to Network Share
$uncpath = "//myserver/adirectory/personnel/";
//get all files with a .pdf extension.
$files = glob($uncpath . "*.pdf");
//print each file name
foreach ($files as $file) 
{
echo "<a target=_blank href='File:///$file'>$file</a><br>"; 
} 
```

链接工作正常，只是显示文本`//myserver/adirectory/personnel/document.pdf`而不是`document`. 请注意，上面的代码取自我在研究时发现的另一个示例。如果有一个全新的更好的方法，那么我愿意接受建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:05:50.197

```
echo basename($file); 
```

[http://php.net/basename](http://php.net/basename)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:14:55.647

像这样修改你的代码：

```
<?
$uncpath = "//myserver/adirectory/personnel/";
//get all files with a .pdf extension.
$files = glob($uncpath . "*.pdf");
//print each file name
foreach ($files as $file) 
{
echo "<a target=_blank href='File:///$file'>".basename($file)."</a><br>"; 
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:11:12.727

如果 basename() 由于某种原因不起作用，您可以试试这个：

```
$file_a = explode('/',$file);
if (trim(end($file_a)) == '')
    $filename = $file_a[count($file_a)-2];
else
    $filename = end($file_a); 
```

# header - OData 从响应中获取标头值

> ID：10312504
> 
> 赞同：1
> 
> 时间：2012-04-25T09:04:14.627
> 
> 标签：header, response, odata

我将 OData 与 JQuery 一起使用。我的问题是我需要检索 Header 因为我需要 Header 值。你们知道语法吗？

我的代码如下：

```
 OData.request( {headers: { "X-CSRF-Token" :"Fetch" }, requestUri:queryserviceUriNew, user: uname, password: pword }, 
      function (data, response) 
     { 
        //Success Callback (received data is a Feed): 
   alert("Retrieved.");

   alert(response);
        // This is the object that hold the response, I need to capture the header value for "x-csrf-token"

      } 
```

谢谢各位专家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:53:47.690

如果有人在寻找答案，语法是：

var header_value; // 变量 = variable_hold_httpResponse.headers['header_item_that_you_want_to_get']; header_value = **response.headers['x-csrf-token'];**

干杯!

# visual-studio - 将代码片段分配给 Visual Studio 中的键盘快捷键

> ID：10312507
> 
> 赞同：24
> 
> 时间：2012-04-25T09:04:25.077
> 
> 标签：visual-studio, code-snippets

任何人都知道如何将快捷键分配给特定的代码片段？

例如，我想分配`CTRL+K,CTRL+J`给一个`#region`片段。

因此，能够：

1.  选择文字，
2.  按`CTRL+K,CTRL+J`=>
3.  选定的文本将被`#region`...`#endregion`包围

我讨厌我不得不把手从键盘上移开超过必要的时间:)。

编辑：为了更多的理解，我问如何将快捷键直接绑定到特定的片段。打开片段选择器对我不起作用。如果我必须搜索所有片段才能找到#region 片段，那比自己编写所有代码更糟糕。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-03-11T09:09:35.197

键入 a`<`然后键入您的代码段快捷方式（您的 XML 文件名），然后按`tab`。

您可以从此链接获取更多信息 [https://docs.microsoft.com/en-us/visualstudio/xml-tools/how-to-use-xml-snippets?view=vs-2017](https://docs.microsoft.com/en-us/visualstudio/xml-tools/how-to-use-xml-snippets?view=vs-2017)

例如，我有一个代码片段，我设置了 xml 文件名及其快捷方式`flog`

当我想直接将它用于我的代码时，我会这样做：

`<flog`并按下`tab`它的作品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T02:52:44.110

我为此找到的最接近的解决方案是将预期的片段复制到您的本地片段目录。

例如对于 VS-2015：%Userprofile%\Documents\Visual Studio 2015\Code Snippets\Visual C#\My Code Snippets

然后在文本编辑器中打开它并将快捷方式更改为快速简单的内容，例如“1”。

现在要使用它，您只需按 Ctrl+K+S > Enter > 1 > Enter

此外，您可以通过更改环绕命令的热键来使其更快。（工具 > 选项 > 键盘 > Edit.SurroundWith）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-17T13:10:19.020

对我来说，最快的解决方案是导入一个名为“1”的文件夹，然后添加片段（我的名字是“block”）并将其标记在 1-Folder 中。

然后我可以通过 <Ctrl+K,X> + <Enter> + <Enter> 插入片段

第一个 Enter 选择 1（带有我的片段的文件夹），第二个 Enter 选择我最常用的片段（必须按字母顺序排列）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-03-04T07:40:29.283

我认为您可能想尝试在文件中添加`<Shortcut>`标签`MySnippet.snippet`

```
<Header>
   <Title>Square Root</Title>
   <Author>Myself</Author>
   <Description>Calculates the square root of 16.</Description>
   <Shortcut>sqrt</Shortcut>
 </Header> 
```

有关详细信息，请查看：[https ://docs.microsoft.com/en-us/visualstudio/ide/walkthrough-creating-a-code-snippet?view=vs-2019#description-and-shortcut-fields](https://docs.microsoft.com/en-us/visualstudio/ide/walkthrough-creating-a-code-snippet?view=vs-2019#description-and-shortcut-fields)

> 要添加快捷方式，请在 Header 元素中添加 Shortcut 元素

# .net - 以编程方式创建 Excel 实例并加载所有加载项

> ID：10312511
> 
> 赞同：3
> 
> 时间：2012-04-25T09:04:35.347
> 
> 标签：.net, excel, interop, marshalling, unmanaged

我在 .NET 应用程序中创建了一个 Microsoft Excel 实例（如果重要，则为 WPF），并且我将它嵌入其中，如下所示：

```
 var excelType = Type.GetTypeFromProgID("Excel.Application");
        var excelObj = Activator.CreateInstance(excelType);
        excelType.InvokeMember("Visible", BindingFlags.SetProperty, null, excelObj, new object[] { true }, ComCulture);
        var excelHwnd = new IntPtr((int)excelType.InvokeMember("Hwnd", BindingFlags.GetProperty, null, excelObj, new object[0], ComCulture));
        var managedWindowHwnd = new WindowInteropHelper(Application.Current.MainWindow).Handle;
        SetParent(excelHwnd, managedWindowHwnd);
        MoveWindow(excelHwnd, 0, 0, Convert.ToInt32(Width), Convert.ToInt32(Height), true); 
```

除 Excel 外的所有作品都不会加载已安装的加载项。如果我通过开始菜单运行 Excel，它会加载加载项。

**我想我需要为 Excel 指定一些参数以启用加载项加载。但我不知道什么/如何...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:08:28.903

您可以使用互操作手动执行此操作，您可以参考我在[从 UDF 获取 excel 单元格地址](https://stackoverflow.com/questions/8708030/get-the-excel-cell-address-from-a-udf/8708200#8708200)以获取 excel 应用程序对象的句柄的帖子。拥有应用程序后，您可以通过循环遍历 application.AddIns 和 application.ComAddIns 并将每个项目的安装/连接属性设置为 true 来手动启用插件

# ios - iCloud 和 Core Data 预填充数据库

> ID：10312513
> 
> 赞同：11
> 
> 时间：2012-04-25T09:04:45.140
> 
> 标签：ios, core-data, icloud

我有一个带有预填充 .sqlite 文件的应用程序，该文件在首次打开应用程序时被复制到用户的 Documents 目录中。该文件为 12.9MB。现在有两次，我的应用程序在将目标更改为 iOS5 后被拒绝，并带有以下拒绝说明：

> 二进制拒绝 2012 年 4 月 24 日上午 10:12
> 
> 拒绝理由：
> 
> 2.23 应用程序必须遵循 iOS 数据存储指南，否则将被拒绝
> 
> 2012 年 4 月 24 日上午 10:12。来自苹果。
> 
> 2.23
> 
> 我们发现您的应用未遵循 App Store 审核指南所要求的 iOS 数据存储指南。
> 
> 特别是，我们发现在内容下载时，您的应用程序存储了 12.81 MB。要检查您的应用存储了多少数据：
> 
> *   安装并启动您的应用
> *   转到设置 > iCloud > 存储和备份 > 管理存储
> *   如有必要，点击“显示所有应用”
> *   检查您应用的存储空间
> 
> iOS 数据存储指南指出，只有用户使用您的应用程序创建的内容，例如文档、新文件、编辑等，可以存储在 /Documents 目录中 - 并由 iCloud 备份。
> 
> 您的应用程序使用的临时文件应仅存储在 /tmp 目录中；请记住在用户退出应用程序时删除存储在此位置的文件。
> 
> 可以重新创建但必须保留以使您的应用程序正常运行的数据 - 或者因为客户希望它可以离线使用 - 应该使用“不备份”属性进行标记。对于 NSURL 对象，添加 NSURLIsExcludedFromBackupKey 属性以防止相应文件被备份。对于 CFURLRef 对象，使用相应的 kCFURLIsExcludedFromBackupKey 属性。
> 
> 有关更多信息，请参阅技术问答 1719：如何防止文件备份到 iCloud 和 iTunes？。
> 
> 有必要修改您的应用程序以满足 iOS 数据存储指南的要求。

我已尝试按照数据存储指南中的建议设置“不备份”属性，但再次被拒绝。

我没有在我的应用程序中使用 iCloud，设置 > iCloud > 等根本没有使用。

我不能使用`Caches`or`tmp`目录，因为数据库在创建后被用户修改。

我似乎处于困境和艰难的境地，Apple 根本不允许这种应用程序运行。

有没有人遇到过这个问题并设法克服它？

**编辑 17-5-12** 我还没有设法让这个应用程序获得批准。有没有人设法做到这一点？

**编辑 1-7-12** 我的应用程序刚刚因为同样的原因再次被拒绝。我不知道在这里做什么，因为它肯定是一个常见的使用场景。

**编辑 11-9-12** 应用程序现已批准 - 请参阅下面的解决方案。我希望它可以帮助别人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T15:30:53.113

好的，这是我设法获得批准的解决方案（终于！）

这是设置 Skip Backup 属性的代码 - 请注意，对于 5.0.1 及更低版本和 5.1 及更高版本，它是不同的。

```
#include <sys/xattr.h>
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
        const char* filePath = [[URL path] fileSystemRepresentation];

        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    } else { // iOS >= 5.1
        NSError *error = nil;
        [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
        return error == nil;
    }
} 
```

这是我的`persistentStoreCoordinator`

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"store.sqlite"];

    NSError *error;

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *storePath = [[[self applicationDocumentsDirectory] path] stringByAppendingPathComponent:@"store.sqlite"];

    // For iOS 5.0 - store in Caches and just put up with purging
    // Users should be on at least 5.0.1 anyway
    if ([[[UIDevice currentDevice] systemVersion] isEqualToString:@"5.0"]) {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
        NSString *cacheDirectory = [paths objectAtIndex:0];
        NSString *oldStorePath = [storePath copy];
        storePath = [cacheDirectory stringByAppendingPathComponent:@"store.sqlite"];
        storeURL = [NSURL URLWithString:storePath];

        // Copy existing file
        if ([fileManager fileExistsAtPath:oldStorePath]) {
            [fileManager copyItemAtPath:oldStorePath toPath:storePath error:NULL];
            [fileManager removeItemAtPath:oldStorePath error:NULL];
        }
    }
    // END iOS 5.0

    if (![fileManager fileExistsAtPath:storePath]) {
        // File doesn't exist - copy it over
        NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"store" ofType:@"sqlite"];
        if (defaultStorePath) {
            [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];
        }
    }

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    [self addSkipBackupAttributeToItemAtURL:storeURL];

    return __persistentStoreCoordinator;
} 
```

请注意，我决定只`Caches`为 iOS 5.0 用户存储并忍受清除。

这是苹果本月批准的。

请不要在没有先阅读和理解的情况下复制和粘贴此代码 - 它可能不完全准确或优化，但我希望它可以指导某人找到对他们有帮助的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T11:40:19.730

```
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)
#include <sys/xattr.h>

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

//Put this in your method

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSURL *pathURL= [NSURL fileURLWithPath:documentsDirectory];

    iOS5 = NO;
    if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"5.0.1")) {
        iOS5 = YES;
    }

    // Set do not backup attribute to whole folder
    if (iOS5) {
        BOOL success = [self addSkipBackupAttributeToItemAtURL:pathURL];
        if (success) 
            NSLog(@"Marked %@", pathURL);
        else
            NSLog(@"Can't marked %@", pathURL);
    }
}

- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    const char* filePath = [[URL path] fileSystemRepresentation];
    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;
    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:13:19.053

你说你不使用 iCloud。在这种情况下，您只需将`sqlite`文件移动到带有 suffix 的目录即可`.nosync`。应该这样做！

```
NSString *dataFileName = @"my.sqlite";
NSString *dataFileDirectoryName = @"Data.nosync";
NSString *documentsDirectoryPath = [self applicationDocumentsDirectory];
NSFileManager *fileManager = [NSFileManager defaultManager];

if ([fileManager fileExistsAtPath:[documentsDirectoryPath stringByAppendingPathComponent:dataFileDirectoryName]] == NO) {
    NSError *fileSystemError;
    [fileManager createDirectoryAtPath:[documentsDirectoryPath stringByAppendingPathComponent:dataFileDirectoryName]
           withIntermediateDirectories:YES
    attributes:nil
         error:&fileSystemError];

    if (fileSystemError != nil) {
        NSLog(@"Error creating database directory %@", fileSystemError);
    }
}

NSString *dataFilePath = [[documentsDirectoryPath
                           stringByAppendingPathComponent:dataFileDirectoryName]
                          stringByAppendingPathComponent:dataFileName];

// Move your file at dataFilePath location! 
```

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:06:15.747

我一直在研究这个，发现这篇关于这个主题的非常有趣的文章：http: [//iphoneincubator.com/blog/data-management/local-file-storage-in-ios-5](http://iphoneincubator.com/blog/data-management/local-file-storage-in-ios-5)

我相信如果您尝试使用 /Documents 文件夹来存储您的 DB 文件，您将继续被拒绝。

我建议你硬着头皮使用 /Cache。最糟糕的用户情况是他们的设备内存不足，并且应用程序在删除数据库文件时被清理。在这种情况下，当您的应用程序再次启动时，它应该将捆绑的数据库文件复制到 /Cache 中，并且用户将同步以从远程服务器获取多余的数据。假设这是您的应用程序的工作方式。

要让您的应用程序将您的数据库文件从 /Documents 移动到 /Cache，您只需告诉 NSFileManager 为您执行此操作...

```
#define FILE_MANAGER     [NSFileManager defaultManager]
#define DOCUMENTS_PATH   [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex: 0]
#define CACHES_PATH      [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex: 0]
#define DB_DOCS_PATH     [DOCUMENTS_PATH stringByAppendingPathComponent: @"database.db"]
#define DB_PATH          [CACHES_PATH stringByAppendingPathComponent: @"database.db"]

if([FILE_MANAGER moveItemAtPath: DB_DOCS_PATH toPath:DB_PATH error:&error])
    {
        NSLog(@"SUCCESSFULLY MOVED %@ to %@",DB_DOCS_PATH,DB_PATH);
    } 
```

这将防止您的现有用户不必要地使用他们的 iCloud 存储。

# java - 创建 QName 时本地部分不能为“null”

> ID：10312514
> 
> 赞同：5
> 
> 时间：2012-04-25T09:04:46.623
> 
> 标签：java, websphere

我们正在尝试追踪一个错误。我们在日志中得到上述错误。

谁能解释这条消息的含义？收到此消息是否有任何典型原因？

堆栈跟踪是：

```
org.apache.axiom.om.OMException: java.lang.IllegalArgumentException: local part cannot be "null" when creating a QName
            at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:206)
            at org.apache.axiom.om.impl.llom.OMNodeImpl.build(OMNodeImpl.java:318)
            at org.apache.axiom.om.impl.llom.OMElementImpl.build(OMElementImpl.java:618)
            at org.apache.axis2.jaxws.message.util.impl.SAAJConverterImpl.toOM(SAAJConverterImpl.java:147)
            at org.apache.axis2.jaxws.message.impl.XMLPartImpl._convertSE2OM(XMLPartImpl.java:77)
            at org.apache.axis2.jaxws.message.impl.XMLPartBase.getContentAsOMElement(XMLPartBase.java:203)
            at org.apache.axis2.jaxws.message.impl.XMLPartBase.getAsOMElement(XMLPartBase.java:255)
            at org.apache.axis2.jaxws.message.impl.MessageImpl.getAsOMElement(MessageImpl.java:464)
            at org.apache.axis2.jaxws.message.util.MessageUtils.putMessageOnMessageContext(MessageUtils.java:202)
            at org.apache.axis2.jaxws.core.controller.AxisInvocationController.prepareRequest(AxisInvocationController.java:370)
            at org.apache.axis2.jaxws.core.controller.InvocationController.invoke(InvocationController.java:120)
            at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:317)
            at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:148) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-27T06:07:11.190

在尝试从字符串构造 org.w3c.dom.Document 时，我收到了相同的错误消息（创建 QName 时本地部分不能为“null”）。在 DocumentBuilderFactory 上调用 setNamespaceAware(true) 后问题就消失了。工作代码片段如下。

```
private static Document getDocumentFromString(final String xmlContent)
  throws Exception
{
    DocumentBuilderFactory documentBuilderFactory =
                                DocumentBuilderFactory.newInstance();
    documentBuilderFactory.setNamespaceAware(true);
    try
    {
        return documentBuilderFactory
                    .newDocumentBuilder()
                    .parse(new InputSource(new StringReader(xmlContent)));
    }
    catch (Exception e)
    {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:06:58.460

这意味着您正在使用其中一种命名空间方法创建 DOM 元素或属性，如下[`createElementNS`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Document.html#createElementNS%28java.lang.String,%20java.lang.String%29)所示

```
document.createElementNS(namespace, null) 
```

or `createElementNS`or`setAttrbuteNS` 和第二个参数，qname 是`null`， or 包括一个前缀但没有本地部分，如 in `"foo:"`。

编辑：

我会尝试通过验证器运行它正在解析的 XML。根据 XML 命名空间引入的附加限制，可能有一些标记或属性名称，如`foo:`或是有效的 XML 标识符，但无效。`foo:bar:baz`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T07:57:10.320

虽然这是一个旧线程，但我希望这个答案能帮助其他人搜索这个错误。当我尝试使用 maven-enunciate-cxf-plugin:1.28 构建 Web 应用程序时，我遇到了同样的错误。

对我来说，这是在我向我的 Web 服务签名添加检查异常后引起的：

```
 @WebMethod(operationName = "enquirySth")
    public IBANResponse enquirySth(String input) throws     I 
   InvalidInputException { ... 
```

我使用[JAX-WS Spec](http://download.oracle.com/otn-pub/jcp/jaxws-2.2-mrel3-evalu-oth-JSpec/jaxws-2_2-mrel3-spec.pdf)进行异常抛出，但没有成功。最后我在 Enunciate 问题跟踪系统中发现[了这个问题](http://jira.codehaus.org/browse/ENUNCIATE-463)，这表明这个问题在当前版本中已解决，但我认为它仍然存在。

最后，我完成了以下解决方法来解决我的问题：将 @XmlRootElement 添加到我的 FaultBean。

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "FaultBean",propOrder = {"errorDescription", "errorCode"})
public class FaultBean implements Serializable {
@XmlElement(required = true, nillable = true)
protected String errorDescription;
@XmlElement(required = true, nillable = true)
protected String errorCode;

public FaultBean() {
}

public String getErrorDescription() {
    return this.errorDescription;
}

public void setErrorDescription(String var1) {
    this.errorDescription = var1;
}

public String getErrorCode() {
    return this.errorCode;
}

public void setErrorCode(String var1) {
    this.errorCode = var1;
}
} 
```

就是这样。希望能帮助到你。

# php - 我怎样才能下载这个文件？

> ID：10312517
> 
> 赞同：0
> 
> 时间：2012-04-25T09:05:10.140
> 
> 标签：php, file-get-contents

此代码适用于大多数网站，如 google、youtube、facebook 等，但不适用于一些网站，如 technorati：

```
<?php
$favicon="http://technorati.com/favicon.ico";
$content = file_get_contents($favicon);
file_put_contents('favicon/icon.ico', $content);  

echo "<img src=\"http://localhost/test/favicon/icon.ico\" />";

?> 
```

//输出：

> 警告：file_get_contents（[http://technorati.com/favicon.ico](http://technorati.com/favicon.ico)）[function.file-get-contents]：打开流失败：HTTP 请求失败！HTTP/1.1 403 Forbidden in /opt/lampp/htdocs/test/simple.php 第 3 行
> 
> [http://localhost/test/favicon/icon.ico](http://localhost/test/favicon/icon.ico)

如何下载 technorati 的网站图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:14:44.153

尝试模仿浏览器并将用户代理设置为 technorati.com 喜欢的东西:)

```
ini_set('user_agent', 'Name of your bot'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:18:41.547

看看当你发出请求时会发生什么，例如使用 Fiddler 或 Wireshark。

我的猜测是 Technorati 网络服务器被配置为拒绝自动请求，它可能使用爬虫发送的用户代理检测到。

使用[cURL](http://php.net/manual/en/book.curl.php)您可以更改用户代理。

# git - 如何获取所有 Git 分支

> ID：10312521
> 
> 赞同：1959
> 
> 时间：2012-04-25T09:05:26.403
> 
> 标签：git, branch, git-branch

我克隆了一个 Git 存储库，其中包含大约五个分支。但是，当我这样做时，`git branch`我只看到其中一个：

```
$ git branch
* master 
```

我知道我可以`git branch -a`查看**所有**分支，但是我将如何在本地拉所有分支，所以当我这样做时`git branch`，它会显示以下内容？

```
$ git branch
* master
* staging
* etc... 
```

* * *

## 回答 #1

> 赞同：2667
> 
> 时间：2012-04-25T09:10:23.977

### TL;DR 答案

```
git branch -r | grep -v '\->' | sed "s,\x1B\[[0-9;]*[a-zA-Z],,g" | while read remote; do git branch --track "${remote#origin/}" "$remote"; done
git fetch --all
git pull --all 
```

（似乎 pull 会从所有遥控器中获取所有分支，但我总是先获取以确保。）

仅当服务器上存在本地分支未跟踪的远程分支时才运行第一个命令。

### 完整答案

您可以像这样从所有遥控器获取所有分支：

```
git fetch --all 
```

这基本上是一个[权力的举动](https://www.atlassian.com/git/tutorials/syncing/git-fetch)。

`fetch`更新远程分支的本地副本，因此这对您的本地分支始终是安全的，**但是**：

1.  `fetch`不会**更新**本地分支（**跟踪**远程分支）；如果你想更新你的本地分支，你仍然需要拉每个分支。

2.  `fetch`不会**创建**本地分支（**跟踪**远程分支），您必须手动执行此操作。如果要列出所有远程分支： `git branch -a`

要**更新**跟踪远程分支的本地分支：

```
git pull --all 
```

然而，这仍然是不够的。它仅适用于跟踪远程分支的本地分支。要跟踪所有远程分支，请执行此 oneliner **BEFORE** `git pull --all`：

```
git branch -r | grep -v '\->' | sed "s,\x1B\[[0-9;]*[a-zA-Z],,g" | while read remote; do git branch --track "${remote#origin/}" "$remote"; done 
```

PS AFAIK`git fetch --all`并且`git remote update`是等效的。

* * *

* * *

Kamil Szot 的[评论](https://stackoverflow.com/questions/10312521/how-to-fetch-all-git-branches#comment27984640_10312587)，人们发现这很有用。

> 我不得不使用：
> 
> ```
> for remote in `git branch -r`; do git branch --track ${remote#origin/} $remote; done 
> ```
> 
> 因为您的代码创建了名为的本地分支`origin/branchname`，而每当我提到它时，我得到的“refname 'origin/branchname' 是模棱两可的。

* * *

## 回答 #2

> 赞同：987
> 
> 时间：2012-04-25T10:00:53.240

列出远程分支：

```
git branch -r 
```

您可以通过以下方式将它们作为本地分支机构签出：

```
git checkout -b LocalName origin/remotebranchname 
```

* * *

## 回答 #3

> 赞同：212
> 
> 时间：2014-01-17T15:33:05.593

您将需要创建本地分支来跟踪远程分支。

假设您只有一个远程调用`origin`，此代码段将为所有远程跟踪创建本地分支：

```
for b in `git branch -r | grep -v -- '->'`; do git branch --track ${b##origin/} $b; done 
```

之后，`git fetch --all`将更新远程分支的所有本地副本。

此外，`git pull --all`将更新您的本地跟踪分支，但取决于您的本地提交以及“合并”配置选项的设置方式，它可能会创建合并提交、快进或失败。

* * *

## 回答 #4

> 赞同：138
> 
> 时间：2012-04-25T13:52:31.690

如果你这样做：

```
git fetch origin 
```

然后他们将都在当地。如果您随后执行：

```
git branch -a 
```

你会看到它们被列为远程/来源/分支名称。由于他们在当地，您可以随心所欲地对待他们。例如：

```
git diff origin/branch-name 
```

或者

```
git merge origin/branch-name 
```

或者

```
git checkout -b some-branch origin/branch-name 
```

* * *

## 回答 #5

> 赞同：90
> 
> 时间：2012-04-25T09:07:34.263

```
$ git remote update
$ git pull --all 
```

这假设所有分支都被跟踪。

如果不是，您可以在 Bash 中触发：

```
for remote in `git branch -r `; do git branch --track $remote; done 
```

然后运行命令。

* * *

## 回答 #6

> 赞同：75
> 
> 时间：2013-10-28T20:02:23.060

Bash`for`循环对我不起作用，但这正是我想要的。我的所有分支都在本地镜像为同名。

```
git checkout --detach
git fetch origin '+refs/heads/*:refs/heads/*' 
```

请参阅下面的[Mike DuPont](https://stackoverflow.com/users/3939046/mike-dupont)的评论。我想我试图在 Jenkins 服务器上执行此操作，使其处于分离头模式。

* * *

## 回答 #7

> 赞同：57
> 
> 时间：2014-05-08T16:14:20.797

使用`git fetch && git checkout RemoteBranchName`.

它对我来说效果很好......

* * *

## 回答 #8

> 赞同：43
> 
> 时间：2015-12-06T20:12:42.853

当您克隆存储库时，实际上会下载分支的所有信息，但分支是隐藏的。用命令

```
$ git branch -a 
```

您可以显示存储库的所有分支，并使用命令

```
$ git checkout -b branchname origin/branchname 
```

然后，您可以一次手动“下载”它们。

* * *

但是，有一种更清洁、更快捷的方法，尽管它有点复杂。您需要三个步骤来完成此操作：

1.  第一步

    在您的机器上创建一个新的空文件夹并从存储库中克隆 .git 文件夹的镜像副本：

    ```
    $ cd ~/Desktop && mkdir my_repo_folder && cd my_repo_folder
    $ git clone --mirror https://github.com/planetoftheweb/responsivebootstrap.git .git 
    ```

    文件夹 my_repo_folder 中的本地存储库仍然是空的，现在只有一个隐藏的 .git 文件夹，您可以从终端使用“ls -alt”命令查看。

2.  第二步

    通过将 git 配置的布尔值“bare”切换为 false，将此存储库从空（裸）存储库切换到常规存储库：

    ```
    $ git config --bool core.bare false 
    ```

3.  第三步

    获取当前文件夹中的所有内容并在本地计算机上创建所有分支，因此使其成为正常的存储库。

    ```
    $ git reset --hard 
    ```

因此，现在您只需键入命令`git branch`即可看到所有分支都已下载。

这是您可以一次克隆包含所有分支的 git 存储库的快速方法，但您不想以这种方式为每个项目执行此操作。

* * *

## 回答 #9

> 赞同：36
> 
> 时间：2016-10-11T20:04:07.083

您可以通过以下方式获取所有分支：

```
git fetch --all 
```

或者：

```
git fetch origin --depth=10000 $(git ls-remote -h -t origin) 
```

^(`--depth=10000`如果您已浅化存储库，该参数可能会有所帮助。)

* * *

要拉出所有分支，请使用：

```
git pull --all 
```

* * *

如果上面不起作用，那么在上面的命令之前加上：

```
git config remote.origin.fetch '+refs/heads/*:refs/remotes/origin/*' 
```

因为在`remote.origin.fetch`获取时只能支持特定的分支，尤其是当您使用`--single-branch`. 通过以下方式检查：`git config remote.origin.fetch`。

之后，您应该能够签出任何分支。

也可以看看：

*   [如何获取所有远程分支？](https://stackoverflow.com/q/39957760/55075)
*   [如何克隆 Git 中的所有远程分支？](https://stackoverflow.com/q/67699/55075)

* * *

要将所有分支推送到远程，请使用：

```
git push --all 
```

最终`--mirror`镜像所有参考。

* * *

如果您的目标是复制存储库，请参阅：在 GitHub 上[复制存储库文章。](https://help.github.com/articles/duplicating-a-repository/)

* * *

## 回答 #10

> 赞同：28
> 
> 时间：2014-07-07T14:42:30.143

我通常只使用这样的命令：

```
git fetch origin
git checkout --track origin/remote-branch 
```

稍微短一点的版本：

```
git fetch origin
git checkout -t origin/remote-branch 
```

* * *

## 回答 #11

> 赞同：27
> 
> 时间：2020-02-04T11:46:47.830

## 您看不到远程分支，因为您没有跟踪它们。

1.  确保您正在跟踪所有远程分支*（或任何您想要跟踪的分支）*。
2.  更新您的本地分支以反映远程分支。

* * *

## 跟踪所有远程分支：

*跟踪远程仓库中存在的所有分支。*

**手动执行：**

*您将替换`<branch>`为从输出中显示的分支`git branch -r`。*

```
git branch -r
git branch --track <branch> 
```

**使用 bash 脚本执行此操作：**

```
for i in $(git branch -r | grep -vE "HEAD|master"); do git branch --track ${i#*/} $i; done 
```

**懒惰的方式（由于合并冲突，这可能会造成混乱，请小心）：**

```
git checkout master
git pull 
```

## 更新有关本地计算机上远程分支的信息：

*这会从您在本地存储库中跟踪的远程存储库中获取分支上的更新。这不会改变您当地的分支机构。您的本地 git repo 现在知道远程 repo 分支上发生的事情。一个例子是，一个新的提交已经被推送到远程主控，现在做一个提取会提醒你你的本地主控落后了 1 个提交。*

```
git fetch --all 
```

## 在本地计算机上更新有关远程分支的信息并更新本地分支：

*对从远程分支到本地分支的所有分支进行提取，然后合并。一个例子是，一个新的提交已经被推送到远程 master，执行 pull 将更新你的本地 repo 关于远程分支中的更改，然后它将这些更改合并到你的本地分支中。由于合并冲突，这可能会造成相当混乱。*

```
git pull --all 
```

* * *

## 回答 #12

> 赞同：22
> 
> 时间：2014-02-05T23:55:03.320

如果您在这里寻求一种解决方案来获取所有分支，然后将所有内容迁移到另一个 Git 服务器，我将以下过程放在一起。如果您只想在本地更新所有分支，请在第一个空行处停止。

```
git clone <ORIGINAL_ORIGIN>
git branch -r | awk -F'origin/' '!/HEAD|master|main/{print $2 " " $1"origin/"$2}' | xargs -L 1 git branch -f --track 
git fetch --all --prune --tags
git pull --all

git remote set-url origin <NEW_ORIGIN>
git pull
<resolve_any_merge_conflicts>
git push --all
git push --tags
<check_NEW_ORIGIN_to_ensure_it_matches_ORIGINAL_ORIGIN> 
```

* * *

## 回答 #13

> 赞同：18
> 
> 时间：2016-09-23T10:06:51.263

我相信您已经通过以下方式克隆了存储库：

```
git clone https://github.com/pathOfrepository 
```

现在使用 cd 转到该文件夹​​：

```
cd pathOfrepository 
```

如果您键入`git status`，您可以看到所有内容：

```
 On branch master
Your branch is up-to-date with 'origin/master'.
nothing to commit, working directory clean 
```

查看所有隐藏的分支类型：

```
 git branch -a 
```

它将列出所有远程分支。

现在，如果您想在任何特定分支上结帐，只需键入：

```
git checkout -b localBranchName origin/RemteBranchName 
```

* * *

## 回答 #14

> 赞同：15
> 
> 时间：2017-09-19T08:43:21.473

确保所有远程分支都可以在`.git/config`文件中获取。

在此示例中，只有`origin/production`分支是可获取的，即使您尝试什么`git fetch --all`也不做，只会获取`production`分支：

```
[origin]
fetch = +refs/heads/production:refs/remotes/origin/production 
```

此行应替换为：

```
[origin]
fetch = +refs/heads/*:refs/remotes/origin/* 
```

然后运行`git fetch`等...

* * *

## 回答 #15

> 赞同：13
> 
> 时间：2014-02-10T08:50:58.193

克隆主存储库后，您只需执行

```
git fetch && git checkout <branchname> 
```

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2019-04-26T18:06:51.817

## **如何获取跟踪单个远程的所有 Git 分支。**

这已经在 Windows 10 上的 Red Hat 和 Git Bash 上进行了测试和功能。

* * *

**TLDR：**

```
for branch in `git branch -r|grep -v ' -> '|cut -d"/" -f2`; do git checkout $branch; git fetch; done; 
```

**解释：**

一个班轮签出，然后获取除 HEAD 之外的所有分支。

列出远程跟踪分支。

```
git branch -r 
```

忽略头。

```
grep -v ' -> ' 
```

从遥控器中取出分支名称。

```
cut -d"/" -f2 
```

结帐跟踪单个遥控器的所有分支机构。

```
git checkout $branch 
```

获取已签出的分支。

```
git fetch 
```

* * *

从技术上讲，新的本地分支不需要获取。

这可以用于新的并且在远程有变化的一个`fetch`或`pull`多个分支。

只需确保仅在准备合并时才拉动。

* * *

## **测试设置**

使用 SSH URL 查看存储库。

```
git clone git@repository.git 
```

**前**

检查当地的分支机构。

```
$ git branch
* master 
```

**执行命令**

执行一个班轮。

```
for branch in `git branch -r|grep -v ' -> '|cut -d"/" -f2`; do git checkout $branch; git fetch; done; 
```

**后**

检查本地分支是否包括远程分支。

```
$ git branch
  cicd
  master
* preprod 
```

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2013-12-04T05:09:33.563

循环似乎对我不起作用，我想忽略起源/主人。这对我有用。

```
git branch -r | grep -v HEAD | awk -F'/' '{print $2 " " $1"/"$2}' | xargs -L 1 git branch -f --track 
```

之后：

```
git fetch --all
git pull --all 
```

* * *

## 回答 #18

> 赞同：10
> 
> 时间：2015-08-27T01:27:33.663

只需这三个命令即可获取所有分支：

```
git clone --mirror repo.git  .git     (gets just .git  - bare repository)

git config --bool core.bare false

git reset --hard 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2017-07-15T23:43:09.453

对于使用 PowerShell 的 Windows 用户：

```
git branch -r | ForEach-Object {
    # Skip default branch, this script assumes
    # you already checked-out that branch when cloned the repo
    if (-not ($_ -match " -> ")) {
        $localBranch = ($_ -replace "^.*?/", "")
        $remoteBranch = $_.Trim()
        git branch --track "$localBranch" "$remoteBranch"
    }
}; git fetch --all; git pull --all 
```

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2020-05-21T10:56:50.370

设置别名：（根据置顶答案）

```
git config --global alias.track-all-branches '!git fetch --all && for remote in `git branch -r`; do git branch --track ${remote#origin/} $remote; done && git fetch --all' 
```

现在跟踪所有分支：

`git track-all-branches`

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2014-06-13T20:05:03.023

我写了一个小脚本来管理克隆一个新的 repo 并为所有远程分支创建本地分支。

[您可以在这里](https://gist.github.com/tstone2077/8380f7862b00b6234963)找到最新版本：

```
#!/bin/bash

# Clones as usual but creates local tracking branches for all remote branches.
# To use, copy this file into the same directory your git binaries are (git, git-flow, git-subtree, etc)

clone_output=$((git clone "$@" ) 2>&1)
retval=$?
echo $clone_output
if [[ $retval != 0 ]] ; then
    exit 1
fi
pushd $(echo $clone_output | head -1 | sed 's/Cloning into .\(.*\).\.\.\./\1/') > /dev/null 2>&1
this_branch=$(git branch | sed 's/^..//')
for i in $(git branch -r | grep -v HEAD); do
  branch=$(echo $i | perl -pe 's/^.*?\///')
  # this doesn't have to be done for each branch, but that's how I did it.
  remote=$(echo $i | sed 's/\/.*//')
  if [[ "$this_branch" != "$branch" ]]; then
      git branch -t $branch $remote/$branch
  fi
done
popd > /dev/null 2>&1 
```

要使用它，只需将它复制到您的 git bin 目录中（对我来说就是`C:\Program Files (x86)\Git\bin\git-cloneall`），然后在命令行上：

```
git cloneall [standard-clone-options] <url> 
```

它像往常一样克隆，但为所有远程分支创建本地跟踪分支。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2018-09-14T15:47:14.390

这是我认为可靠的东西：

*   不更新现有分支机构的远程跟踪
*   不尝试更新`HEAD`以跟踪`origin/HEAD`
*   允许远程命名为`origin`
*   正确引用外壳

```
for b in $(git branch -r --format='%(refname:short)'); do
  [[ "${b#*/}" = HEAD ]] && continue
  git show-ref -q --heads "${b#*/}" || git branch --track "${b#*/}" "$b";
done
git pull --all 
```

没有必要将这个选项`git fetch --all`传递`-all`给internal 。`git pull``fetch`

归功于[这个答案](https://stackoverflow.com/a/10312587/5353461)。

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2020-06-10T01:19:10.943

```
|‾‾‾‾‾‾‾‾‾‾‾‾‾fetch/clone‾‾‾‾‾‾‾‾‾‾‾‾↓   |‾‾‾‾‾‾‾‾‾‾‾‾checkout‾‾‾‾‾‾‾‾‾‾↓   
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾pull‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾↓
Remote repository (`origin`) <=> Local repository <=> Index <=> Workspace
↑_________________push_______________|   ↑____commit____|  ↑____add_____| 
```

```
# 拉取远程仓库所有分支信息 → 本地仓库
# fetch all remote repository branch meta → local repository
git remote set-branches origin '*'
git fetch -v

# 把所有远程分支数据搞到本地
# fetch all remote repository branch data → local repository
git branch -r | grep -v '\->' | while read remote; do git branch "${remote#origin/}" "$remote"; done
git fetch --all
git pull --all 
```

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2021-03-09T15:12:15.193

您可以通过这一行命令获取所有分支，如下所示：

```
git fetch --all && git pull --all && git branch -r | grep -v '\->' | while read remote; do git branch --track "${remote#origin/}" "$remote"; done 
```

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2018-11-07T10:34:19.700

如果您遇到问题，`fetch --all`请跟踪您的远程分支：

```
git checkout --track origin/%branchname% 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-07-05T04:32:19.857

我们可以将所有分支或标签名称放在一个临时文件中，然后为每个名称/标签执行 git pull：

```
git branch -r | grep origin | grep -v HEAD| awk -F/ '{print $NF}' > /tmp/all.txt
git tag -l >> /tmp/all.txt
for tag_or_branch in `cat /tmp/all.txt`; do git checkout $tag_or_branch; git pull origin $tag_or_branch; done 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-10-26T19:04:05.467

这是接受的答案中提供的单行代码的 Perl 版本：

`git branch -r | perl -e 'while(<>) {chop; my $remote = $_; my ($local) = ($remote =~ /origin\/(.*)/); print "git branch --track $local $remote\n";}' > some-output-file`

如果您愿意，可以将输出文件作为 Shell 脚本运行。

我们无意中删除了我们的 Stash 项目存储库。幸运的是，有人在意外丢失之前创建了一个分叉。我将叉子克隆到我的本地（将省略我如何做到这一点的细节）。一旦我将叉子完全放在本地，我就跑了一个单线。我修改了远程的 URL（在我的例子中是源）指向我们正在恢复的目标存储库：

`git remote set-url origin <remote-url>`

最后将所有分支推到原点，如下所示：

`git push --all origin`

我们又开始营业了。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2019-03-16T02:31:02.527

为避免错误消息**“致命：名为 'origin/master' 的分支已存在。”** ，你可以试试我的解决方案：

```
git branch -r | grep -v '\->'  | grep -v `git branch | awk '/\*/ { print $2; }'`| while read remote; do git branch --track "${remote#origin/}" "$remote"; done 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2019-06-12T02:37:55.913

尝试了很多方法，只有这个简单并且对我有用。

```
for branch in $(git ls-remote -h git@<your_repository>.git | awk '{print $2}' | sed 's:refs/heads/::')
do
  git checkout "$branch"
  git pull
done 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2015-07-02T15:23:33.680

根据 Learath2 的回答，这是我在创建目录后执行`git clone [...]`的操作：`cd`

`git branch -r | grep -v master | awk {print\$1} | sed 's/^origin\/\(.*\)$/\1 &/' | xargs -n2 git checkout -b`

为我工作，但我不知道它会为你工作。当心。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2016-04-20T12:43:08.067

```
git remote add origin https://yourBitbucketLink

git fetch origin

git checkout -b yourNewLocalBranchName origin/requiredRemoteBranch (use tab :D) 
```

现在在本地你`yourNewLocalBranchName`就是你的`requiredRemoteBranch`.

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2019-05-27T16:30:59.000

对于 Visual Studio 用户，在包管理器控制台上：

```
git branch | %{ git fetch upstream; git merge upstream/master} 
```

# php - 在 PHP 脚本运行时添加加载图像

> ID：10312531
> 
> 赞同：1
> 
> 时间：2012-04-25T09:05:57.893
> 
> 标签：php, javascript, html, ajax

我有一个 PHP 脚本（粘贴在下面），它从 URL 列表中提取元数据，问题是加载可能需要一段时间，并且用户永远不知道它何时完全完成（除非他们密切关注加载图标他们的浏览器标签）

我在网上找了很长时间，但找不到解决方案，我读过我可以使用 Ajax，但我究竟如何在这个脚本上使用它？

谢谢您的帮助！

```
<script type="text/javascript">
function showContent(vThis)
{
    // http://www.javascriptjunkie.com
    // alert(vSibling.className + " " + vDef_Key);
    vParent = vThis.parentNode;
    vSibling = vParent.nextSibling;
    while (vSibling.nodeType==3) { // Fix for Mozilla/FireFox Empty Space becomes a TextNode or         Something
        vSibling = vSibling.nextSibling;
    };
    if(vSibling.style.display == "none")
    {
        vThis.src="collapse.gif";
        vThis.alt = "Hide Div";
        vSibling.style.display = "block";
    } else {
        vSibling.style.display = "none";
        vThis.src="expand.gif";
        vThis.alt = "Show Div";
    }
    return;
}

</script>

<form method="POST" action=<?php echo "'".$_SERVER['PHP_SELF']."'";?> >
<textarea name="siteurl" rows="10" cols="50">
<?php //Check if the form has already been submitted and if this is the case, display the   submitted content. If not, display 'http://'.
echo (isset($_POST['siteurl']))?htmlspecialchars($_POST['siteurl']):"http://";?>
</textarea><br>
<input type="submit" value="Submit">
</form>
</div>

<div id="nofloat"></div>
<div style="margin-top:5px;">
<h4><img src="expand.gif" alt="Show Div" border="0" style="margin-right:6px; margin-  top:3px; margin-bottom:-3px; cursor:pointer;" onclick="showContent(this);" />Show me the    script working!</h4>
<div style="margin-top:5px; display:none;">
<table class="metadata" id="metatable_1">
<?php
ini_set('display_errors', 0);
ini_set( 'default_charset', 'UTF-8' );
error_reporting(E_ALL);
//ini_set( "display_errors", 0);
function parseUrl($url){
    //Trim whitespace of the url to ensure proper checking.
    $url = trim($url);
    //Check if a protocol is specified at the beginning of the url. If it's not,     prepend 'http://'.
    if (!preg_match("~^(?:f|ht)tps?://~i", $url)) {
            $url = "http://" . $url;
    }
    //Check if '/' is present at the end of the url. If not, append '/'.
    if (substr($url, -1)!=="/"){
            $url .= "/";
    }
    //Return the processed url.
    return $url;
}
//If the form was submitted
if(isset($_POST['siteurl'])){
    //Put every new line as a new entry in the array
    $urls = explode("\n",trim($_POST["siteurl"]));
    //Iterate through urls
    foreach ($urls as $url) {
            //Parse the url to add 'http://' at the beginning or '/' at the end if not   already there, to avoid errors with the get_meta_tags function
            $url = parseUrl($url);
            //Get the meta data for each url
            $tags = get_meta_tags($url);
            //Check to see if the description tag was present and adjust output    accordingly
            $tags = NULL;
$tags = get_meta_tags($url);
if($tags)
echo "<tr><td>$url</td><td>" .$tags['description']. "</td></tr>";
else 
echo "<tr><td>$url</td><td>No Meta Description</td></tr>";
    }
}
?>
</table>
</div>
<script type="text/javascript">
        var exportTable1=new ExportHTMLTable('metatable_1');
    </script>
<div>
        <input type="button" onclick="exportTable1.exportToCSV()"   value="Export to CSV"/>
        <input type="button" onclick="exportTable1.exportToXML()"   value="Export to XML"/>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:20:08.003

主意：

将php代码添加到不同的文件

显示加载图像

然后调用这个函数

```
function Load()
{
    var xmlhttp;
    var url;

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {           
            //(optional)do something with response: xmlhttp.responseText
            document.getElementById("area").innerHTML=xmlhttp.responseText;
            document.getElementById("loadingimage").src = "afterloading.gif";
        }
    }

    xmlhttp.open("GET","phpfile.php",true);
    xmlhttp.send();
} 
```

此函数转到您的 javascript 位置，然后在文档完成加载后使用 jquery 调用它，或者

```
<body onload="Load()"> 
```

并在身体的地方像

```
<img id="loadingimage" src="loading.gif"/>
<div id="area">...</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:14:40.283

提取完成工作的部分 ( `<?php ini_set [...] ?>`)，将其存储在单独的文件中（例如 GetMetaData.php）并使其返回 JSON 或 XML。

然后，您可以捕获提交事件并使其将用户输入的 URL 异步发布到 GetMetaData 脚本。当该调用返回时，您可以使用脚本返回的数据填充您的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:32:39.977

正如我在评论中提到的，这里基本上有两种选择。第一个依赖于 javascript 工作，第二个依赖于输出缓冲来提供关于正在发生的事情的“运行评论”，并且取决于脚本中可以输出进度报告的合理点。

AJAX 方法只涉及获取执行繁重工作的代码并将其放置在可以通过 AJAX 参与的自己的 PHP 脚本中。然后，主页只是一个加载屏幕和一个 javascript，它调用通过 AJAX 完成工作的脚本。当 AJAX 脚本完成时，可以触发回调函数以将返回的结果格式化为 HTML 并显示在加载屏幕的位置。

另一种方法涉及在脚本的主循环中使用输出缓冲和刷新。

```
while ($task_not_complete)
{
    do_some_more_work ();
    echo ('<p>Something indicating how much progress has been made goes here</p>');
    ob_flush ();
    flush ();
} 
```

这种方法不需要 javascript，但它有其自身的缺点。首先，取决于如何在 Web 服务器或客户端和服务器之间可能存在的任何代理中设置缓冲，它可能根本无法工作并且在脚本完成之前根本不返回任何输出。`</html>`其次，在服务器上的脚本完成并且浏览器接收到结束标记之前，DOM 树将无效。这意味着页面使用的任何 javascript 都无法可靠地进行 DOM 操作，直到正在执行的进程完成。

# jquery - jquery 方向传递给 animate()

> ID：10312533
> 
> 赞同：2
> 
> 时间：2012-04-25T09:06:04.187
> 
> 标签：jquery, function, jquery-animate, direction

我从 div click 和 a 获得方向，试图将其传递给 animate 函数

```
var direction = $(this).attr('class').split(' ')[1];
var scrollAmount = 285;
$('#slider').animate({direction:'-=' + scrollAmount}, 'slow'); 
```

怎么了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:13:04.473

animate 函数的第一个参数接受 CSS 属性，说明动画结束的最终属性。你不能那样传递方向。听起来您要么想要设置 left 或 scrollLeft 数量并改变方向，那么您应该查看方向的值，并根据您想要的方式使用 -= 或 += 。

```
var sign;

if (direction == 'left') sign = '-=';
else sign = '+=';

$('#slider').animate({left:sign + scrollAmount}, 'slow'); 
```

或者，如果它是您试图传递的属性

```
var prop = {};
prop[direction] = scrollAmount;
$('#slider').animate(prop, 'slow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:10:18.333

没有这样的属性`animate`称为方向，因此错误。检查[文档](http://api.jquery.com/animate/)。

根据评论编辑

然后你应该在css中将left或right作为第一个参数传递给动画

来自 jQuery animate API 文档的示例代码

> ```
> <!DOCTYPE html>
> <html>
> <head>
>   <style>
> div {
>   position:absolute;
>   background-color:#abc;
>   left:50px;
>   width:90px;
>   height:90px;
>   margin:5px;
> }
> </style>
>   <script src="http://code.jquery.com/jquery-latest.js"></script>
> </head>
> <body>
>   <button id="left">&laquo;</button> <button id="right">&raquo;</button>
> <div class="block"></div>
> 
> <script>
> $("#right").click(function(){
>   $(".block").animate({"left": "+=50px"}, "slow");
> });
> 
> $("#left").click(function(){
>   $(".block").animate({"left": "-=50px"}, "slow");
> });
> 
> </script>
> 
> </body>
> </html> 
> ```

# c++ - 如何在 linux C 中解除对 recv() 或 recvfrm() 函数的阻塞

> ID：10312535
> 
> 赞同：2
> 
> 时间：2012-04-25T09:06:12.750
> 
> 标签：c++, c, sockets, networking

当 PC 从睡眠状态恢复时，我想从 PC 向相机发送一个 UDP 数据包。由于 PC 恢复后网络接口需要一些时间（未知）才能激活，所以我一直循环向相机发送数据包。当相机接收到数据包时，它会向 PC 发送一个确认信号。我的问题是“为了从摄像机接收 UDP 数据包（确认信号），我使用了阻止循环的 recvfrm() 函数。我如何解除阻止这个函数，以便它只有在接收到来自摄像机的确认信号时才退出循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:10:29.437

使用`MSG_DONTWAIT`传递给`recvfrom`函数的标志。它启用非阻塞模式。如果操作会阻塞此调用返回`EAGAIN`或`EWOULDBLOCK`错误代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:23:51.350

对 maverik 的答案（否则是正确的）的更便携的解决方案是将`fcntl`套接字连接到`O_NONBLOCK`.

`MSG_DONTWAIT`，虽然在 Linux 和 BSD 下可用，并且大多数 Unices 仅在 SUSv4 中标准化用于发送（为什么，我不知道......但 M. Kerrisk 这么说）。一个不支持它的值得注意的平台是 Winsock（至少它没有在 MSDN 中记录）。

或者，如果您不想篡改晦涩的标志和`fcntl`，则可以`select`使用准备就绪描述符（使用零超时，甚至使用非零超时来限制您发送的数据包 - 最好不要淹没网络堆栈）。继续发送，直到`select`说可以读取某些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:23:16.720

最简单的方法（但不是最好的代码）是等待一段时间的回复是在调用 recvfrom() 之前使用[select 。](http://linux.die.net/man/2/select)

# sqlite - sqlite - 如何在完成插入之前检查表是否存在？

> ID：10312538
> 
> 赞同：23
> 
> 时间：2012-04-25T09:06:19.270
> 
> 标签：sqlite

SQLite 数据库可以有效执行的最佳 SQL 是什么：

```
If Database Table Exists then
  - create table
  - insert row
  - insert row (i.e. for startup data)
end 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-25T09:40:27.363

要检查您的表是否存在，您可以使用：

```
SELECT * FROM sqlite_master WHERE name ='myTable' and type='table'; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-25T16:53:51.460

您可以让 Sqlite 自己为您检查：

```
CREATE TABLE IF NOT EXISTS <table_name> ...; 
```

按照链接获取文档： [https ://sqlite.org/lang_createtable.html](https://sqlite.org/lang_createtable.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-20T09:29:19.323

使用此代码

```
SELECT name FROM sqlite_master WHERE type='table' AND name='yourTableName'; 
```

如果返回数组计数等于 1，则表示表存在，否则不存在。

# wpf - 在 WPF 中拖放多个用户控件实例

> ID：10312539
> 
> 赞同：0
> 
> 时间：2012-04-25T09:06:21.560
> 
> 标签：wpf

给定的代码可以很好地拖放一个控件实例。如果我再次尝试删除相同的实例，则会引发异常：

> 指定元素已经是另一个元素的逻辑子元素。先断开它。

如何在 Canvas 上放置多个用户控件实例，类似于 Visual Studio 工具箱的做法？

```
public MainWindow()
{
    InitializeComponent();
    LoadUsercontrols();
}

private void LoadUsercontrols()
{
    List<string> userControlKeys = new List<string>();
    userControlKeys.Add("testCtrl1");
    userControlKeys.Add("testCtrl2");

    Type type = this.GetType();
    Assembly assembly = type.Assembly;
    foreach (string userControlKey in userControlKeys)
    {
        userControlFullName = String.Format("{0}.TestControls.{1}", type.Namespace, userControlKey);
        UserControl userControl = new UserControl();
        userControl = (UserControl)assembly.CreateInstance(userControlFullName);
        _userControls.Add(userControlKey, userControl);
    }
}

private void TreeViewItem_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    startPoint = e.GetPosition(null);
}

private void TreeViewItem_PreviewMouseMove(object sender, MouseEventArgs e)
{
    // Get the current mouse position
    System.Windows.Point mousePos = e.GetPosition(null);
    Vector diff = startPoint - mousePos;

    if (e.LeftButton == MouseButtonState.Pressed &&
     Math.Abs(diff.X) > SystemParameters.MinimumHorizontalDragDistance &&
     Math.Abs(diff.Y) > SystemParameters.MinimumVerticalDragDistance)
    {
        TreeView treeView = sender as TreeView;
        TreeViewItem treeViewItem = FindAnchestor<TreeViewItem>((DependencyObject)e.OriginalSource);

        if (treeViewItem != null)
        {
            Type type = this.GetType();
            Assembly assembly = type.Assembly;
            DataObject dragData = new DataObject("myFormat", _userControls[((System.Windows.Controls.HeaderedItemsControl)(treeViewItem)).Header.ToString()]);
            DragDrop.DoDragDrop(treeViewItem, dragData, DragDropEffects.Copy);
        }
    }
}

private static T FindAnchestor<T>(DependencyObject current) where T : DependencyObject
{
    do
    {
        if (current is T)
        {
            return (T)current;
        }
        current = VisualTreeHelper.GetParent(current);
    }
    while (current != null);
    return null;
}

private void MyDesignerCanvas_DragEnter(object sender, DragEventArgs e)
{
    if (!e.Data.GetDataPresent("myFormat") || sender == e.Source)
    {
        e.Effects = DragDropEffects.None;
    }
}

private void MyDesignerCanvas_Drop(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent("myFormat"))
    {
        if (treeItem != null)
        {
            UserControl myCanvasItem = e.Data.GetData("myFormat") as UserControl;
            UserControl newCanvastItem = new UserControl
            {
                Content = _userControls[((System.Windows.Controls.HeaderedItemsControl)(treeItem)).Header.ToString()]
            };
            Point position = e.GetPosition(MyDesignerCanvas);
            DesignerCanvas.SetLeft(newCanvastItem, position.X);
            DesignerCanvas.SetTop(newCanvastItem, position.Y);
            DesignerCanvas.SetZIndex(newCanvastItem, 1);
            MyDesignerCanvas.Children.Add(newCanvastItem);
        }
    }
} 
```

**在 XAML 代码中：**

```
<TreeView x:Name="presetTreeView4" Grid.Row="1" >
    <TreeViewItem Header="testCtrl1" Selected="TreeViewItem_Selected" PreviewMouseLeftButtonDown="TreeViewItem_PreviewMouseLeftButtonDown" PreviewMouseMove="TreeViewItem_PreviewMouseMove"/>
    <TreeViewItem Header="testCtrl2" Selected="TreeViewItem_Selected" PreviewMouseLeftButtonDown="TreeViewItem_PreviewMouseLeftButtonDown" PreviewMouseMove="TreeViewItem_PreviewMouseMove"/>
</TreeView>
<s:DesignerCanvas x:Name="MyDesignerCanvas" AllowDrop="True" Drop="MyDesignerCanvas_Drop" DragEnter="MyDesignerCanvas_DragEnter"  Background="#A6B0D2F5" DockPanel.Dock="Bottom" Margin="0" >
</s:DesignerCanvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:15:25.023

您不能将相同的控件添加到不同的容器中 - 一个控件只能在可视树中出现一次。

而不是提前加载用户控件，您应该构造它们`MyDesignerCanvas_Drop`（即使用`Activator`与您现在在 中使用它相同的方式`LoadUsercontrols`）并将生成的控件分配给`UserControl.Content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:08:23.140

我认为你必须克隆控制`_userControls[((System.Windows.Controls.HeaderedItemsControl)(treeItem)).Header.ToString()]`权`MyDesignerCanvas_Drop`

# excel - 在 Excel 中使用数据透视表进行计算

> ID：10312540
> 
> 赞同：1
> 
> 时间：2012-04-25T09:06:46.450
> 
> 标签：excel, pivot-table, excel-2010

真是愚蠢的问题，但似乎无法找到答案。我有一个包含列名称、报告、成功的工作表。名称和报告为文本，成功为 1 或 0。

我制作了一个数据透视表来总结结果。再次三列：名称、报告数（报告计数）、成功数（成功总和）。

现在我想要一个成功百分比。所以成功的总和除以报告的数量。如何动态地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:36:00.387

按平均值而不是计数总结成功列会解决您的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:44:40.097

我通过在源数据中添加一个额外的列（填充，所有值 1）并创建一个计算字段（成功/填充）找到了解决方案。

# xml - 如何声明一个保存 xslt 中元素的全局变量？

> ID：10312546
> 
> 赞同：0
> 
> 时间：2012-04-25T09:07:12.287
> 
> 标签：xml, xslt

如何声明一个包含完整元素的全局变量。例如：您好，您声明的变量应该包含数据元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:16:17.500

就像放一样简单：

```
<xsl:variable name="myvariable" /> 
```

在 XSLT 脚本的顶部（或底部，我想这并不重要）。

您可以设置一个初始值

```
<xsl:variable name="myvariable" select="'somevalue'" /> 
```

如果你想。查看[http://www.w3schools.com/xsl/el_variable.asp](http://www.w3schools.com/xsl/el_variable.asp)了解更多信息。

# android - 在 Android 中使用 Html5 播放视频

> ID：10312547
> 
> 赞同：0
> 
> 时间：2012-04-25T09:07:14.077
> 
> 标签：android

是否可以使用 Html5 播放视频，如果可以，请 te；；我的过程。我尝试过使用视频标签，但它没有在模拟器中播放。视频格式为 Mp4。

如果有人知道，请帮助解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:54:45.193

在 WebView 上设置 WebChromeClient。它应该能够读取它（Froyo 和更高版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:13:22.150

可以，大多数移动浏览器都支持 html5（也支持视频标签），我建议您还为旧手机添加一个 .3gp 文件，您可以在此处查看[http://developer.android.com/guide/appendix/media -formats.html](http://developer.android.com/guide/appendix/media-formats.html) 解码 3gp 得到广泛支持，您可能要注意编解码器，因为旧手机不支持解码使用 H.264/AVC 编码的 mp4 或 3gp。

# php - 更新数组中的值

> ID：10312556
> 
> 赞同：1
> 
> 时间：2012-04-25T09:08:03.647
> 
> 标签：php, arrays, loops

我正在尝试将每个数组上的 reviewCount 更新为 1。我很困惑为什么我的 foreach 循环不会更新它。任何帮助将不胜感激

$输出：

```
Array(
    [1] => Array(
        [category] => Category 1
        [country] => USA
        [date] => 2012-04-07 23:50:49
        [name] => Product 1
        [reviewCount] => 
    )
    [2] => Array(
        [category] => Category 1
        [country] => USA
        [date] => 2012-04-07 23:50:49
        [name] => Product 1
        [reviewCount] => 
) 
```

代码：

```
foreach ($output as $row) {
    $row['reviewCount'] = 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:09:33.190

它不会在内部更新它，因为您正在对行的*副本*`$output`设置评论计数。改为这样做：

 *```
foreach ($output as &$row) { // <-- added &
    $row['reviewCount'] = 1;
} 
```

这样，您对行的引用进行操作，这与对原始行本身进行操作具有相同的效果。有关详细信息，请参阅[此页面。](http://php.net/manual/en/control-structures.foreach.php)

另一种做同样事情的方法（可能更直观，虽然技术上“更糟”）是

```
foreach ($output as $key => $row) {
    $output[$key]['reviewCount'] = 1;
} 
```

这样您就可以再次对原始行进行操作——显然，因为您是使用其键从数组内部手动获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:11:00.777

不使用参考的替代方式：（`&`）

```
foreach($output as $i => $row) {
   $output[$i]['reviewCount'] = 1;
} 
```*

# scope - SSAS 多维数据集计算以更粗略地总结另一个度量

> ID：10312559
> 
> 赞同：1
> 
> 时间：2012-04-25T09:08:18.767
> 
> 标签：scope, ssas, mdx, measure

我在使用 SQL Server 2008 R2 对摘要报告进行 MDX 度量计算时遇到了性能问题。

我有一个 Person 维度，以及一个包含每人多条记录的相关事实表。（资格）

例如 [Measures].[Other Qual Count] 会给我某种类型的资格数量。每个人可以有多个，因此 [Measures].[Other Qual Count] > 1 对于一个人。

但是，在我的总结报告中，我想将此表示为每人仅 1 个。（注明具有其他资格的人数。）

摘要报告针对一些其他维度汇总值，包括未知区域层次结构（它可以是 3 个层次结构之一）。

我这样做如下：

```
MEMBER [Measures].[Other Count2]
AS
SUM(
    EXISTING [Person].[Staff Code].[Staff Code].Members,
    IIF([Measures].[Other Count] > 0, 1, NULL)
) 
```

但是，我必须创建更多派生措施 - 相互派生，并且都在 Person 级别，以避免不必要的多重计数。查询从 <1 秒减慢到 1min+（我的目标是 <3s）。

所有推导的原因是很多逻辑来确定一个人将在 6 个互斥列中的哪一个列中报告。

我也尝试过创建一个 Cube Calculation，但这给了我与 [Other Count] 相同的值。

```
SCOPE (({[Person].[Staff Code].[Staff Code].MEMBERS}, [Measures].[Has Other Qual]));
    THIS = ([Person].[Staff Code].[Staff Code], [Measures].[Has Other Qual]).Count;
END SCOPE; 
```

有没有更好的 MDX/Cube 计算可以使用，或者有什么提高性能的建议？

不幸的是，这是我第一次使用 MDX 并在接近截止日期时遇到了这个问题，所以我试图在不更改多维数据集的情况下尽可能完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:10:18.900

我通过更改立方体解决了这个问题，这比预期的要简单。

在数据源视图中，我创建了一个命名查询，它总结了个人级别的现有事实表。我还派生了报告中需要的所有列。

将此命名查询视为单独的事实表，我为它添加了一个度量值组，这解决了我的所有问题。

# javascript - 将外部纯文本内容读入字符串

> ID：10312561
> 
> 赞同：1
> 
> 时间：2012-04-25T09:08:24.680
> 
> 标签：javascript, http, url

我有一个简单的 CGI 脚本，可以按需生成纯文本内容。例如，`http://1.2.3.4/hello.cgi?name=Joe`将返回`Hello Joe!`.

如何将其读入 Javascript 中的字符串？

```
name     = "Joe";
url      = "http://1.2.3.4/hello.cgi?name=" + name;
greeting = loadThis(url); 
```

我是 Javascript 新手，所以即使是幼稚的方法（即不需要 URL 转义......）也会对我有所帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:46:28.850

基于[JavaScriper.net 上的这个常见问题解答](http://www.javascripter.net/faq/xmlhttpr.htm)，我找到了适合我的解决方案。但是，被调用的脚本必须与调用者在同一台机器上，否则我会从浏览器收到安全错误。

显然这就是@Makkes 提到的。但是，我现在对在同一台机器上拥有 hello.cgi 感到非常满意。

这是代码：

```
function loadThis(localuri) {
    var oRequest = new XMLHttpRequest();

    var sURL = 'http://'
        + self.location.hostname
        + localuri;

    oRequest.open('GET',sURL,false);
    oRequest.setRequestHeader('User-Agent',navigator.userAgent);
    oRequest.send(null);

    if (oRequest.status==200) return(oRequest.responseText);
    else alert('Error executing XMLHttpRequest call!');
}

name        = "Joe";
localuri    = "/hello.cgi?name=" + name;
greeting    = loadThis(localuri); 
```

（当然，这不会正确处理带有空格或特殊字符的名称，但这是另一回事。）

# jquery - Rails 3 应用程序中的 Jquery 库

> ID：10312563
> 
> 赞同：1
> 
> 时间：2012-04-25T09:08:49.790
> 
> 标签：jquery, ruby-on-rails-3

我对 rails 和 Jquery 还很陌生，我正在寻找一些关于我应该保留哪些库和不需要哪些库的指导。问题的另一部分是我已经读过我应该使用 min.js 文件，因为它们加载速度更快？这个对吗？如果我想修改库（在将来我变得更有能力时）或者不需要修改 jquery 库怎么办，因为它无论如何都需要做所有事情。

无论如何，目前我的javascript库中有以下内容

```
admin.js.coffee 
application.js  
bootstrap-alert.js  
calendar.js 
documents.js.coffee 
folders.js.coffee   
fullcalendar.js
gcal.js 
jquery-1.7.min.js   
jquery-ui-1.8.9.custom.min.js   
jquery-ui.js    
jquery-ui.min.js    
jquery.bookshelfslider.js   
jquery.bookshelfslider.min.js   
jquery.easing.1.3.js    
jquery.js   
jquery.rest.js  
jquery.ticker.js    
jquery_ujs.js   
rails.js    
site.js 
stickybar.jquery.min.js
stickysidebar.jquery.js 
turn.js 
```

我的 application.js 文件看起来像这样

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

有没有人可以看到会引起我任何问题的东西？如果我在 application.js 中调用一个库，我是否需要我的 Javascript 目录中的库？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:27:05.013

1.  您永远不应修改原始库文件。扩展功能。
2.  在生产中使用 Min 并在开发中使用未压缩，但如果您不认为要查看库代码，则将所有库都作为 min.js 不是问题。
3.  rails.js 是旧的，删除它。它被替换为 jquery_ujs.js
4.  我会直接调用 js 文件而不是使用 require_tree 。

# java - 尝试导入在 JAR 中找到的类

> ID：10312569
> 
> 赞同：0
> 
> 时间：2012-04-25T09:09:22.107
> 
> 标签：java, eclipse, jar, export

我已经构建了一个名为 LibTest 的简单项目，它有一个包含以下代码的类：

```
 public class MainTest
    {
        public static tclass l;
    } 
```

在二级简单项目中，我定义了类 tclass：

```
 public class tclass
    {
        int i;
    } 
```

然后我将 tclass 导出到一个 JAR 文件。在 LibTest->Properties->BuildPath 我单击 AddExternalJar 并选择 tclass.jar （我还尝试在 Order 和 Export 中检查 JAR），但在 MainTest “tclass 无法解析为类型”时仍然出现错误。

我看不出缺少什么。

谢谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:21:10.253

包含您的 jar 文件后，您还需要使用 MainTest 类中的完整路径导入您的类。例如：

```
import com.package.tclass; 
```

# facebook - 不再支持 Locale=nl_BE（荷兰比利时）（在 iframe 之类的按钮中）？

> ID：10312579
> 
> 赞同：7
> 
> 时间：2012-04-25T09:09:49.407
> 
> 标签：facebook, facebook-like, locale, facebook-iframe

我们是位于比利时的网站。我们将“locale=nl_BE”参数添加到我们的 iframe like 按钮中，所以它说的是荷兰语（=“vind ik leuk”）。

这不再有效。当我们将语言环境更改为 nl_NL（也是荷兰语）时，like 按钮再次起作用。

当我查看 Facebook 国际化文档时，我似乎找不到比利时或 nl_BE，很奇怪吧？这工作了几个月，直到昨天。[http://www.facebook.com/translations/FacebookLocales.xml](http://www.facebook.com/translations/FacebookLocales.xml)

jsFiddle：http: [//jsfiddle.net/Jeroenvdb/cw6js/1/](http://jsfiddle.net/Jeroenvdb/cw6js/1/)

nl_NL（工作）：[https ://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.hln.be%3Futm_source%3Dfacebook%26utm_medium%3Dweb&locale=nl_NL&send=false&layout=box_count&width=0&show_faces =false&action=like&colorscheme=light&font&height=85](https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.hln.be%3Futm_source%3Dfacebook%26utm_medium%3Dweb&locale=nl_NL&send=false&layout=box_count&width=0&show_faces=false&action=like&colorscheme=light&font&height=85)

nl_BE（不工作）：[https ://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.hln.be%3Futm_source%3Dfacebook%26utm_medium%3Dweb&locale=nl_BE&send=false&layout=box_count&width= 0&show_faces=false&action=like&colorscheme=light&font&height=85](https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.hln.be%3Futm_source%3Dfacebook%26utm_medium%3Dweb&locale=nl_BE&send=false&layout=box_count&width=0&show_faces=false&action=like&colorscheme=light&font&height=85)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:49:04.073

Facebook 刚刚关闭了我发布的关于 nl_BE 问题的错误报告。

“当前不支持此语言环境。但即使不支持语言环境，您也应该能够加载插件，它将回退到 en_US 语言环境。”

[http://developers.facebook.com/bugs/442881812429427](http://developers.facebook.com/bugs/442881812429427)

这简直是​​愚蠢的。与几个月前相比，我看到的变化是（正如关于错误的评论中所述）当您传递不受支持的语言环境但回退到 en_US 时，共享按钮不再中断。

他们应该让他们的语言/区域设置一起行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T20:00:06.063

必须是 Facebook 的新错误或代码更改。同样，以前有效的**en_EN**不再有效。 **en_US**确实有效。

# regex - 在正则表达式中查找文本

> ID：10312580
> 
> 赞同：1
> 
> 时间：2012-04-25T09:09:51.043
> 
> 标签：regex

我有以下文字。[Account].&[1] 我只想从此字符串中检索 Account。我这样写正则表达式。

```
var rexp =  /\[[a-z][A-Z]\]/g;
var matchStr = id.match(rexp); 
```

但它不起作用。这有什么不对吗？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:12:46.993

`/\[[a-z][A-Z]\]/`精确匹配*一个*小写字符 ( `a-z`) 后跟*一个*大写字符 ( `A-Z`)。相反，请考虑`/\[[a-zA-Z]+\]/`哪个评估为“一个或多个小写或大写字符”。

`i`标志（不区分大小写）可以与`[a-z][A-Z]`:执行相同的操作`/\[[a-z]+\]/gi`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:12:01.057

您需要将其更改为：`\[[a-zA-Z]+\]/g`.

在您当前的正则表达式中，您希望匹配一个小写字符串，后跟一个大写字符串。由于您要匹配的字符串以大写字母开头，后跟更多小写字母，因此您的正则表达式将不起作用。

我建议的正则表达式应该匹配由一个或多个（`+`运算符）字母（小写和大写`[a-zA-Z]`）组成的任何字符串，这些字母位于方括号`[`和`]`.

# xcode - MonoMac：文件 jit.h 中的错误：找不到“mono/metadata/appdomain.h”文件

> ID：10312585
> 
> 赞同：1
> 
> 时间：2012-04-25T09:10:15.293
> 
> 标签：xcode, macos, mono

我在我的项目中添加了 Mono 作为链接二进制 Mono.framework。

但是当我尝试包含 Mono 框架的类时，我收到错误：'mono/metadata/appdomain.h' file not found

```
#import <Mono/mono-2.0/mono/jit/jit.h> 
```

但在标题 appdomain.h 中存在。

我使用 OS X 10.7.3、XCode 4.3.1、Mono 2.10.8。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:37:08.713

You need to install the Mono Framework MDK (you likely installed the runtime-only).

# java - 在不使用任何 API 的情况下从 Java 中的 LinkedList 中删除特定项目

> ID：10312591
> 
> 赞同：0
> 
> 时间：2012-04-25T09:10:44.357
> 
> 标签：java, data-structures, linked-list

我正在尝试从 java 中的 LinkedList 中删除一个项目。这个列表是由我实现的，我没有使用任何 java API。我面临的主要问题是递归，因为我总是迷失在递归编码中。

```
class List{

    int N;
    List next;
    List current;
    List(int N){
        this.N =N;
        this.next = null;
    }

    @Override
    public String toString() {
        String o = "";
        List curr = this;
        while(curr != null){
            o += curr.N+"-->";
            curr = curr.next;
        }

        return o+"TAIL";
    }
} 
```

实现的方法：

```
private static List Remove(List L,int N){
    if(L == null || L.next == null)
        return L;

    List current = L;
    List previous = null;

    while(current != null){
        if(current.N == N){
            current = current.next;
            if(previous == null)previous = current;
            else{
                previous.next = current;
            }
            break;
        }else{
            previous = current;
            current = current.next;             
        }   
    }
    return previous;
} 
```

输入 -

```
List list1 = new List(1);
        list1.next = new List(2);
        list1.next.next = new List(3);
        list1.next.next.next  = new List(4);
        list1.next.next.next.next  = new List(5);
        list1.next.next.next.next.next  = new List(6);
        list1.next.next.next.next.next.next  = new List(7);
System.out.println("Before Removal "+list1.toString());
        System.out.println("After Removal "+Remove(list1,3)); 
```

我得到的输出是 -

*   去除前 1-->2-->3-->4-->5-->6-->7-->TAIL
*   去除后2-->4-->5-->6-->7-->TAIL

在这里，当我设置`current = current.next`or 参考被设置为下一个值时，我失去了值 1。所以肯定我在展示存储在不同参考中的数据时遇到了一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:17:51.597

The mistake is here:

```
return previous; 
```

You should return the original head of the list if it was not removed. To show it graphically:

```
N == 3
List Before Removal: 1-->2-->3-->4-->5-->6-->7-->TAIL
At start of iteration 1:
L                    ^
previous      (null)
current              ^
No match -> iteration 2:
L                    ^
previous             ^
current                  ^
No match -> iteration 3:
L                    ^
previous                 ^
current                      ^
Match -> remove current:
List After Removal:  1-->2-->4-->5-->6-->7-->TAIL
L                    ^
previous                 ^
current                      ^ 
```

At this point by returning `previous`, you lose the former head element `L`.

For the case when the head element is to be removed, you should add a separate check before the loop.

Btw your `Remove` method is not recursive - it is never calling itself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:23:44.650

这只是因为您没有返回头部 - 而是指向您刚刚“删除”的节点的前一个指针：

```
static List Remove(final List L, final int N) {
    // Base case for null head pointer  
    final List head = L;
    if (head == null)
        return head;

    // Base case for removing the head
    if (head.N == N)
       return head.next;

    List current = head.next;
    List previous = head;

    while (current != null) {
        if (current.N == N) {
            current = current.next;
            if (previous == null) {
                previous = current;
            }
            else {
                previous.next = current;
            }

            break;
        } else {
            previous = current;
            current = current.next;
        }
    }

    return head;
} 
```

另外-澄清一下-这不是递归解决方案。

# java - 如何使用Struts2将图像保存在我的sql中的blob类型列中？

> ID：10312593
> 
> 赞同：0
> 
> 时间：2012-04-25T09:10:50.627
> 
> 标签：java, mysql, struts2, blob

我有一个 Struts2 jsp 页面，我正在发送一个图像，临时文件路径在表单提交后正在发送到我的 java 类，但我不知道如何通过将其更改为 Blob 类型来将该路径保存在 db 中。请考虑此图像列在我的数据库表中是 blob 类型的..

这是表单提交后在我的 Javaclass 中得到的输出：

我的图片路径：

F:\Documents and Settings\software.netbeans\7.0\apache-tomcat-7.0.11_base\work\Catalina\localhost\AIGSA\upload__214d4f3e_136e8b74d9c__7fff_00000021.tmp 105542

文件名：* Winter.jpg

代码：

```
for (File u: repImage) 
{
    System.out.println("*** "+u+"\t"+u.length());
}

int saveToDb= mo.addMembers(memberName, repImage); 
```

我怎样才能将我的表单图像发送到这个`{repImage Name`，这样就可以很容易地保存它所以我的数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:52:30.297

如果我正确理解您的问题，您希望将二进制数据存储在数据库中。我会说这首先是一个坏主意，原因有很多。更好的方法是引用一个相对路径，然后您可以直接在 Web 应用程序或文件系统中使用该相对路径。更好的是，只需将引用存储在您想要保存/使用它的 Amazon/S3 中的位置。

无论如何，要回答您的问题，您需要使用[ByteArrayOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:14:09.813

我不确定，但请尝试：

```
int saveToDb= mo.addMembers( memberName, repImage.getBytes() ); 
```

# android - Android - 检查返回活动

> ID：10312595
> 
> 赞同：0
> 
> 时间：2012-04-25T09:10:57.870
> 
> 标签：android, android-activity

我已经实现了一个下载器，下载完成后，我需要在列表中显示上传。下载完成后，在我返回的单独活动中列出。有什么方法可以检查我从哪里进入活动？因为我需要更新 List 而我不知道要更新。我已经在 onResume 中尝试过，但这也是在 onCreate 之后调用的，所以这并不能解决我的问题。

谢谢

**编辑：**

我这样调用下载：

```
 mProgressDialog.setTitle("Downloading");
                  mProgressDialog.setMessage("Downloading data...");
                  mProgressDialog.setIndeterminate(false);
                  mProgressDialog.setMax(100);
                  mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                  DownloadFilesTask downloadFile = new DownloadFilesTask(DownloaderMap.this);
                  downloadFile.execute(myUrl);
                  mProgressDialog.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:16:18.420

如果您使用 启动下载活动[`startActivityForResult()`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)，您将返回到该`onActivityResult()`方法，您还可以在该方法中查看下载（或其他操作）是否成功（[`setResult()`](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)用于此）。

更新：当您使用 an时，`AsyncTask`您可以将完成后需要运行的任何代码放入它的`onPostExecute()`-method 中。如果您`Activity`需要`AsyncTask`执行`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:20:55.787

如果我正确理解您的问题，您想知道如何从特定活动中分辨出它是什么？

我不确定是否有其他解决方案，但我能想到的最简单的方法是在触发活动时在意图上添加额外内容，然后在 onCreate 中读出。

例如，在构建您的意图时，您会有一条线，例如

```
newIntent.putExtra("callingActivity", this.getClass().getName()); 
```

在 onCreate 你会读到

```
this.getIntent().getStringExtra("callingActivity"); 
```

# jquery-mobile - jQuery Mobile 标签栏 - 隐藏在标签上

> ID：10312603
> 
> 赞同：0
> 
> 时间：2012-04-25T09:11:16.660
> 
> 标签：jquery-mobile, tabbar

我用标签栏创建了一个 JQuery 移动页面。如果我单击页脚/页眉消失的内容，我该如何禁用它？

目前两个酒吧都是固定的。

一个快速的样本将是完美的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:52:25.050

使用 JQM 1.1.0 有几种方法可以实现这一点

第一个也是最简单的方法是在固定工具栏中设置**data-tap-toggle="false"**

`<div data-role="header" data-position="fixed" data-tap-toggle="false">`

我喜欢第二种方式，因为它允许您在每个页面和每个固定工具栏中禁用此功能。这样你就不会一遍又一遍地输入 data-tap-toggle="false" 让自己发疯。

```
$(document).on('pageinit','[data-role=page]', function(){
    $('[data-position=fixed]').fixedtoolbar({ tapToggle:false});
}); 
```

以下将禁用 JQM 1.0.1 中的点击切换

```
$(document).delegate('[data-role=page]','pageinit', function(){
    $.mobile.fixedToolbars.setTouchToggleEnabled(false);
}); 
```

# cakephp - Cake PHP 表单的灵活性

> ID：10312604
> 
> 赞同：1
> 
> 时间：2012-04-25T09:11:22.947
> 
> 标签：cakephp, twitter-bootstrap

我想复制 cakephp 表单助手创建的 html，所以我可以添加它并将其集成到我的引导程序前端。基本上 cakephp 表单助手不会生成我需要的 html。

其他人使用蛋糕形式构建了应用程序，我不想重写后端。

我认为这只是包括正确的输入名称、表单类等并以此为基础的情况。然而，似乎即使是 html 表单的精确复制/粘贴也不会触发 cakephp 表单错误。

它向 cake 发送相同的标头， [http](http://pastebin.com/JZyCk6cv) ://pastebin.com/JZyCk6cv 所以我只能假设 cakephp 表单助手在模板中构建时会做一些诡计多端的操作，以触发验证错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:22:05.383

我认为最好的解决方案是创建一个自定义的 CakePHP-Helper。如果你使用 twitter-bootstrap，我推荐这个 Helper，打包为插件：

[https://github.com/loadsys/twitter-bootstrap-helper](https://github.com/loadsys/twitter-bootstrap-helper)

表单验证应该可以工作，因为它使用 CakePHP 的核心表单助手来创建输入和标签。

`$this->Form->input`如果您使用搜索和替换（替换为） ，也许您不必重写或编辑太多`$this->TwitterBootstrap->input`。

# csv - 从 Struts2 创建和下载 CSV

> ID：10312605
> 
> 赞同：1
> 
> 时间：2012-04-25T09:11:25.927
> 
> 标签：csv, struts2, web

我的 jsp“导出到 CSV”上有一个链接。

点击这个链接我想做的是

*   发送请求以采取行动。
*   操作填充 A 数据列表
*   结果被分派给jsp。
*   Jsp 遍历数据列表并生成 csv 格式的输出。
*   下载文件弹出窗口打开，生成名为“myFile.csv”的 CSV 文件

我想我在 Struts.xml 中遗漏了一些东西。我试过

```
<action name="csvAction" class="demo.csvAction">
     <result>csvPage.jsp<result>
</action> 
```

它运行良好，但下载弹出窗口显示文件名“csvAction.go”。

然后我尝试了

```
<action name="csvAction" class="demo.csvAction">
     <result type="stream">
         <param name="location">csvPage.jsp</param>
         <param name="contentType">application/csv</param>
         <param name="contentDisposition">filename="myFile.csv"</param>
     <result>
</action> 
```

但它忽略了 location 属性，并期望这里有一个输入流。

谁能指导我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:05:48.120

> Jsp 遍历数据列表并生成 csv 格式的输出。

在这种情况下，jsp 还应该默认提供文件名，其给出的动作名称。

for the second method you pass the inputStream and then use this inputstream to create the CSV(which means you prepare the csv from datalist in Struts) and then return it as attachment.

Just for Info : If you create excel then you can use jxl or poi.

# ios - iOS 上的 OpenGL ES 2.0 对象拾取（使用颜色编码）

> ID：10312607
> 
> 赞同：1
> 
> 时间：2012-04-25T09:11:39.017
> 
> 标签：ios, opengl-es-2.0

这可能显示为相关问题：

[iOS 上的 OpenGL ES 2.0 对象拾取](https://stackoverflow.com/questions/6774197/opengl-es-2-0-object-picking-on-ios)

其中说颜色选择器是一个很好的解决方案，并且在阅读后确实：

[http://www.lighthouse3d.com/opengl/picking/index.php?color1](http://www.lighthouse3d.com/opengl/picking/index.php?color1)

这似乎是一个非常简单的解决方案，所以这让我想到了这个问题

[iPhone 上的 OpenGL ES 颜色拾取](https://stackoverflow.com/questions/3652692/opengl-es-color-picking-on-the-iphone)

不幸的是使用opengl es 1.0，我试图在2.0中做到这一点，所以我无法访问该问题中描述的功能。

但是这个理论似乎很简单，这就是我认为我应该做的：

在触摸开始时，我用独特的颜色渲染我的对象。

在触摸结束时，我从该位置获取像素并检查它的颜色以获取我的对象。（可能使用 glReadPixels）

问题是我不知道如何执行“渲染到后台缓冲区并从中读取”。

到目前为止，我的代码仅使用“Draw”，我怀疑我必须执行 glBind*另一个缓冲区之*类的操作，但我将不胜感激。

我的绘图代码是这样的：

```
glClearColor(0, 0, 0, 0.0); 
glClear(GL_COLOR_BUFFER_BIT);

// Set the Projection Matrix
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(60), 2.0/3.0, 0, 50);

glUseProgram(_programHD);

glBindVertexArrayOES(_vao);

glActiveTexture(GL_TEXTURE1); 
glBindTexture(GL_TEXTURE_2D, _textureBuffer[1]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glUniform1i(uniforms[UNIFORM_TEXTURE_HD], 1);

// Drawing starts here //

// Pass the Model View Matrix to Open GL
_modelViewProjectionMatrix = GLKMatrix4Multiply(projectionMatrix,rotationMatrix);

glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX_HD], 1, GL_FALSE, _modelViewProjectionMatrix.m);

// Change texture coordinates to draw a different image

glUniform2fv(uniforms[TEXTURE_OFFSET_HD], 1, offSet.v);

glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, 0);

//glUniform2i(uniforms[TEXTURE_OFFSET], 7, -5);
glUniform2fv(uniforms[TEXTURE_OFFSET_HD], 1, borderHD.v);

glDrawElements(GL_LINE_STRIP, 6, GL_UNSIGNED_SHORT, 0);

glBindVertexArrayOES(0);
glUseProgram(0); 
```

我已经剥离了绘图计算以使其更易于理解。关键是我没有看到我指定“在哪里”绘制的任何地方。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:43:42.433

实际上，我刚刚使用 openGL ES 2.0 在我的 iPhone 游戏中实现了颜色选择功能，使用的灯塔教程很有趣。

您应该绘制到帧缓冲区。

如果您想从帧缓冲区中读取，那么您想使用 glReadPixels 是正确的。更多信息在这里：

[http://www.opengl.org/sdk/docs/man/xhtml/glReadPixels.xml](http://www.opengl.org/sdk/docs/man/xhtml/glReadPixels.xml)

与灯塔教程唯一不同的是您还想存储 alpha 值。这是获取特定像素颜色的快速函数。随意改进或改变它，但它确实有效。

```
+ (void) ProcessColourPick : (GLubyte*) out : (Float32) x : (Float32) y
{
    GLint viewport[4];
    //Get size of screen
    glGetIntegerv(GL_VIEWPORT,viewport);

    GLubyte pixel[4];
    //Read pixel from a specific point
    glReadPixels(x,viewport[3] - y,1,1,
             GL_RGBA,GL_UNSIGNED_BYTE,(void *)pixel);

    out[0] = pixel[0];
    out[1] = pixel[1];
    out[2] = pixel[2];
    out[3] = pixel[3];
} 
```

希望这可以帮助。

# php - 对象是否应在设置属性时保存到数据库（例如博客文章对象）

> ID：10312610
> 
> 赞同：1
> 
> 时间：2012-04-25T09:11:41.360
> 
> 标签：php, wordpress, unit-testing

我开始接触更多的 OO PHP 并为这些对象编写测试。我的主要问题是：如果我有一个`Blog_Post`对象，并且我调用了`$post->setCategory( 'Foo' )`，是否应该直接保存到数据库中？

我问的原因是为了进行单元测试，我经常不想将数据库用于这类事情，因为那不是我要测试的。

我看到人们建议做类似的事情

```
function __construct( PDO $db ) 
```

传入要使用的数据库对象，然后在测试时使用mock。但是，我真的不喜欢总是通过调用 Blog_Post 类来实例化我的数据库对象的想法。

这是 WordPress 的范围，它从根本上没有 OO 方法 - 对于我当前的 Blog_Post，setter 方法只会调用数据库（通过全局 $wpdb ！！（我知道！））。

真的我想知道，像这样的东西阻力最小的路径的一般模式是什么。Blog_Post 会只写它自己，还是可能会使用“save()”方法将所有设置的属性实际推送到数据库？或者在调用 setter 之前在对象“setSaveToDB(false)”上设置一个标志。

谢谢，希望这有点道理！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:33:31.440

简短回答：不。委托加载，保存到另一层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:20:21.747

如果您希望获得任何类型的性能，那么在对象上使用 ->save() 函数比在设置属性时保存更可取。如果每次设置属性时都写入数据库，则具有 7 个属性的对象将向数据库写入 7 次，如果您有保存功能，则所有 7 个属性仅使用一次写入。由于打开数据库连接是数据库中最慢的功能，因此您需要尽量减少单独的读/写次数。一般而言，打开与数据库的连接并写入一行与打开连接并写入 100000 行所花费的时间大致相同。SQL 在处理大型数据集时速度很快，但打开连接并找到正确的读/写位置非常慢。

希望这可以帮助 ：-）

# asp.net-mvc - VB.NET 中的 LINQ 连接返回具体类型而不是匿名

> ID：10312612
> 
> 赞同：0
> 
> 时间：2012-04-25T09:11:44.367
> 
> 标签：asp.net-mvc, linq, entity-framework

我在 VB.NET 中有以下 LINQ 查询

```
Using db As New ReablementLSQLDataContext
                query = (From b In db.Visits
                             Join c In db.LinkStaffToVisits On b.ID Equals c.VisitID
                             Where c.StaffID = staffid And b.StartEpoch = newepochdatetime).ToList()

            End Using 
```

当我运行它时，它会返回一个匿名类型的列表，这意味着如果我想访问其中的任何数据，它就毫无用处。如何运行此连接语句并返回具体类型的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:25:23.533

作为查询结果的匿名类型并不是那么“无用”，因为您总是`foreach`可以（本地）覆盖它们。不过，如果你想要一个具体的类型，你可以在最后添加一个 select 语句并将匿名结果投影到你的类型中（假设你创建了这个类型并且知道在哪里使用哪些字段），比如（C# 语法）

```
var newQuery = query.Select(anon_x => new YourType(anon_x.field1, anon_x.field2, ...)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:22:48.277

您可以使用通用版本的`ToList`方法。我是一名`C#`开发人员，可以提供与以下相关的语法`C#`：

`.ToList<YourType>();`

`VB.Net`阅读版本： http : [//msdn.microsoft.com/en-us/library/bb342261.aspx#Y0](http://msdn.microsoft.com/en-us/library/bb342261.aspx#Y0)

# java - 我在哪里可以放肥皂行动？

> ID：10312613
> 
> 赞同：2
> 
> 时间：2012-04-25T09:11:46.683
> 
> 标签：java, web-services, soap

```
public class SimpleHTTPRequest {
    String envelope1="<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
    "<soap:Envelope xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:tns=\"urn:insertdata\"" +
    " targetNamespace=\"urn:insertdata\">"+
    "<soap:Body>"+
    "<insertdata>"+
    "<name xsi:type=\"xsd:string\">ghjghj</name>"+
    "<phone xsi:type=\"xsd:string\">1111</phone>"+
    "<email xsi:type=\"xsd:string\">ascom</email>"+
    "<score xsi:type=\"xsd:string\">12</score>"+
    "</insertdata>"+
    "</soap:Body>"+
    "</soap:Envelope>";
    /**
     * @param args
     */
    public static void main(String[] args) {
         String url="http://url/iphone_soap_server.php/insertdata";
          String soapAction="http://urkl/iphone_soap_server.php/insertdata/insertdata";
    HttpURLConnection connection = null;
    OutputStreamWriter wr = null;
    BufferedReader rd  = null;
    StringBuilder sb = null;
    String line = null;
    URL serverAddress = null;
    String data = "width=50&height=100";
    try {
        serverAddress = new URL("http://url/soap-server.php?wsdl");

        connection = null;

        //Set up the initial connection
        connection = (HttpURLConnection)serverAddress.openConnection();

        connection.setRequestMethod("POST");
        connection.setDoOutput(true);

        connection.setDoOutput(true);
        OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());

        writer.write(data);
        writer.flush();

        rd  = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        sb = new StringBuilder();

        while ((line = rd.readLine()) != null)
        {
            sb.append(line + '\n');
        }

        System.out.println(sb.toString());

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (ProtocolException e1) {
        e1.printStackTrace();
    } catch (IOException e2) {
        e2.printStackTrace();
    }
    finally
    {
        //close the connection, set all objects to null
        connection.disconnect();
        rd = null;
        sb = null;
        wr = null;
        connection = null;
    }
}
} 
```

我想从 Java 中使用肥皂网络服务，我可以在哪里将肥皂动作放在这段代码中......在此先感谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:27:24.430

当使用 SOAP over HTTP 时，通常 SOAP Action 被插入`SOAPAction`到请求的 HTTP 标头中。请参阅此处的标准：http: [//www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383528)

> SOAPAction HTTP 请求标头字段可用于指示 SOAP HTTP 请求的意图。该值是标识意图的 URI。SOAP 对 URI 的格式或特殊性或者它是可解析的没有任何限制。HTTP 客户端在发出 SOAP HTTP 请求时必须使用这个头域。

所以你想要的是（假设`soapAction`设置为正确的值）：

```
connection.setRequestProperty("SOAPAction", soapAction); 
```

# html - 设置音量的ie9 html5音频播放

> ID：10312614
> 
> 赞同：1
> 
> 时间：2012-04-25T09:11:59.687
> 
> 标签：html, audio, volume

我想播放设置音量 = 0.2 的 html5 音频，以便稍后在播放音频时更改音量。

它适用于所有 html5 浏览器，但 ie9：Internet Explorer 开始播放音量为 1 的音频，1/2 秒后音量设置生效。

```
<audio id="mytrack" preload="auto" metadata>
    <source src="audio/audio2.ogg" type="audio/ogg" />
    <source src="audio/audio2.mp3" type="audio/mp3" />
</audio>

<div id="play">play</div>

 <script src="javascript/jquery.1.7.2.min.js"></script>
 <script type="text/javascript">
 $(document).ready(function(){
    var track = $('#mytrack').get(0);

    $('#play').click(function(){
        track.volume="0.2",
        track.play();
    });
 }); 
```

# jquery - 当生成的 jQuery 元素附加到 DOM 时如何触发事件（自定义或非自定义）

> ID：10312617
> 
> 赞同：0
> 
> 时间：2012-04-25T09:12:19.763
> 
> 标签：jquery, events, dom, custom-event

当 jQuery 动态创建的元素被添加到 DOM 的任何部分时，是否会触发一个事件。仅当脚本中的任何部分代码将元素附加到页面或任何其他页面子级时，这对于对元素执行高度计算很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:46:18.713

对不起我之前的回答，我没有足够注意你问的问题。

您真正追求的是[DOM Mutation Events](https://developer.mozilla.org/en/DOM/Mutation_events)，*它已被弃用*，将来会被 DOM Level 4 [Mutation Observers](http://www.w3.org/TR/dom/#mutation-observers)取代，它看起来很有希望，但在当前浏览器中没有实现。[这是一篇](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)关于该主题的历史和未来的精彩文章。

同时，如果您对插入新节点的内容没有任何实际访问权限（例如，不会触发所需事件的 3 ^(rd)方插件），那么您最好的选择就是轮询容器以获取其`children().length`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:28:16.313

有一个名为[livequery](http://docs.jquery.com/Plugins/livequery)的 jQuery 插件可以提供您需要的功能。

例如 ：

```
$('.something').livequery(function() { 
    $(this).trigger('event');
}); 
```

上面的代码将在类的 DOM 元素`something`添加到 DOM时执行

# findbugs - FindBugs 无法启动

> ID：10312625
> 
> 赞同：1
> 
> 时间：2012-04-25T09:12:41.217
> 
> 标签：findbugs

当我尝试使用命令行启动 findbugs 工具时，出现以下错误

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at edu.umd.cs.findbugs.DetectorFactoryCollection.getCoreResource(DetectorFactoryCollection.java:360)
    at edu.umd.cs.findbugs.SystemProperties.loadPropertiesFromConfigFile(SystemProperties.java:72)
    at edu.umd.cs.findbugs.SystemProperties.<clinit>(SystemProperties.java:55)
    at edu.umd.cs.findbugs.Project.<clinit>(Project.java:91)
    at edu.umd.cs.findbugs.FindBugsCommandLine.<init>(FindBugsCommandLine.java:59)
    at edu.umd.cs.findbugs.FindBugsCommandLine.<init>(FindBugsCommandLine.java:78)
    at edu.umd.cs.findbugs.gui2.GUI2CommandLine.<init>(GUI2CommandLine.java:49)
    at edu.umd.cs.findbugs.gui2.Driver.<clinit>(Driver.java:47)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:164)
    at edu.umd.cs.findbugs.LaunchAppropriateUI.launch(LaunchAppropriateUI.java:109)
    at edu.umd.cs.findbugs.LaunchAppropriateUI.main(LaunchAppropriateUI.java:195)
Caused by: java.lang.RuntimeException: Unable to load parent plugins [edu.umd.cs.findbugs.plugins.webCloud] in order to load [edu.umd.cs.findbugs.plugins.findbugsCommunalCloud]
    at edu.umd.cs.findbugs.PluginLoader.finishLazyInitialization(PluginLoader.java:265)
    at edu.umd.cs.findbugs.PluginLoader.loadInitialPlugins(PluginLoader.java:1393)
    at edu.umd.cs.findbugs.PluginLoader.<clinit>(PluginLoader.java:155)
    ... 12 more 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-21T05:15:37.560

您应该使用 jar 的绝对路径。

例如：C:\findbugs-2.0.3-rc2>java -jar ./lib/findbugs.jar

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:49:01.163

[从http://findbugs.sourceforge.net/downloads.html](http://findbugs.sourceforge.net/downloads.html)下载禁用 cloudplugin 的 findbug 存档

另外不要忘记将 %FINDBUGS_HOME% 环境变量设置为指向 findbugs 目录。

# jquery - jQuery 不允许“图像另存为”

> ID：10312630
> 
> 赞同：-1
> 
> 时间：2012-04-25T09:12:48.530
> 
> 标签：jquery, image, drupal

我正在使用 Drupal 7 和 Galleria 全屏主题。

我保护我的图像以供 jQuery 拖放。

现在，我希望这些图像不允许像 jQuery 那样右键单击保存图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:18:00.983

尝试：

```
 //disable right click
$('img').bind('contextmenu', function(e){
    return false;
}); 
```

# xml - 如何使用 JAXB 抑制 XSI

> ID：10312632
> 
> 赞同：4
> 
> 时间：2012-04-25T09:12:54.957
> 
> 标签：xml, jaxb

JAXB2 的默认 XML 输出如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<TEST2 xmlns="http://projects/open/2012/UniformProxySystem">
    <XXX1 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
    <XXX2>17:02:26</XXX2>
    <XXX3 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
</TEST2> 
```

但我希望它像下面这样：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<TEST2 xmlns="http://projects/open/2012/UniformProxySystem" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <XXX1 xsi:nil="true"/>
    <XXX2>17:01:08</XXX2>
    <XXX3 xsi:nil="true"/>
</TEST2> 
```

寻求帮助，我正在使用带有 JAXB 2.1 的 JDK6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:38:17.820

您可以尝试使用`@XmlSchema`注释并执行以下操作：

**包信息.java**

```
@XmlSchema(
    elementFormDefault=XmlNsForm.QUALIFIED,
    namespace="http://projects/open/2012/UniformProxySystem",
    xmlns={@XmlNs(prefix="xsi",
                  namespaceURI="http://www.w3.org/2001/XMLSchema-instance")}
)
package com.example;

import javax.xml.bind.annotation.XmlNs;
import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:21:05.477

这行得通！

```
@javax.xml.bind.annotation.XmlSchema(
    namespace = "http://projects/open/2012/UniformProxySystem", 
    elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED
    ,
            xmlns={@XmlNs(prefix="xsi",
            namespaceURI="http://www.w3.org/2001/XMLSchema-instance"),
            @XmlNs(prefix="",
            namespaceURI="http://projects/open/2012/UniformProxySystem")}
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T00:09:47.567

您还可以参考[此处的答案](https://stackoverflow.com/questions/2252028/jaxb-how-to-avoid-repeated-namespace-definition-for-xmlnsxsi)以获得替代解决方案，特别是如果您的程序中已经有前缀名称空间映射器（如果您从 XSD 生成 JAXB 类也很有用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T01:45:41.413

我将 SCHEMA_LOCATION 属性添加到 marsheller，这有效，但生成另一个 attr xsi:schemaLocation="..."，所以我在生成的 Docuemnt 对象中手动删除了这个 attr。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-28T11:31:28.567

在java中，也许你使用

```
 Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
        Marshaller ms = JAXBContext.newInstance(CreateGPSRequest4RAS.class).createMarshaller();

        ms.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        ms.setProperty(Marshaller.JAXB_FRAGMENT, true);
        ms.setProperty(Marshaller.JAXB_NO_NAMESPACE_SCHEMA_LOCATION, "");
        ms.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");

        ms.marshal(gpsRequest, document); 
```

# java - 没有 JSP 的 Java Servlet 环境（GAE/J）上的 http://xxxxx.com/username

> ID：10312635
> 
> 赞同：0
> 
> 时间：2012-04-25T09:13:03.260
> 
> 标签：java, html, google-app-engine, servlets

我想开发一个网站，例如

[http://xxxxx.com/username](http://xxxxx.com/username)（如 facebook URL 样式）在 Java Servlet 环境（GAE/J）上，并且不想使用 JSP 的东西，因为我用 JQuery 开发了一个丰富的 html5 站点。

我已经用 HTML5 框架完成了客户端结构，不想从头开始使用 JSP 的东西。

我可以通过 web.xml 控制 URI 请求

```
<servlet>
    <servlet-name>SubDirRouter</servlet-name>
    <servlet-class>com.myproject.SubDirRouter</servlet-class>
</servlet> 
<servlet-mapping>
    <servlet-name>SubDirRouter</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

是否可以从 SubDirRouter servlet“转发”而不是“重定向”（因为[http://xxxxx.com/username](http://xxxxx.com/username) URL 消失）到 member.html（HTML5 应用程序）文件？

或者

只需将 url-pattern-> /* 映射到 member.html 文件？？

如果可能的话，请告诉我如何。示例代码或包含该代码的站点将不胜感激。

谢谢你。同样，我的最后一个选择是使用 JSP 并丢弃 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:34:59.263

是的，您可以通过以下方式在内部“转发” [`getRequestDispatcher(path).forward(..)`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)：

```
request.getRequestDispatcher("/yourHtm5page.html").forward(request, response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:46:05.030

出色地，

通常临时重定向（307）不应更改原始请求网址（在您的情况下为/用户名）。

# google-maps - 在 Google 地图上绘制一组给定坐标附近的坐标

> ID：10312643
> 
> 赞同：1
> 
> 时间：2012-04-25T09:13:33.617
> 
> 标签：google-maps, geolocation

这是场景......我有一组存储在数据库表中的纬度/经度数据[id，lat，long，location]。我正在使用地理位置来获取用户当前的物理位置（纬度和经度）。当这个用户访问应用程序，允许共享他的位置时，我想获取他当前坐标周围的坐标，并将它们绘制在谷歌地图上。如何才能做到这一点？

示例：我将某个城市的酒店坐标存储在我的数据库表中。当用户访问这个城市并访问我的应用程序时，我想从我的数据库中获取并在地图上仅绘制他周围某个半径内的那些坐标。

注意：我将 PHP 用于服务器端的东西。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:50:23.580

您描述了一个商店定位器：在特定点周围的半径内查找 POI。商店定位器在某个位置周围的半径内查找 POI。谷歌示例中的细节有所不同（您通过浏览器地理位置找到中心点并且半径相当小）但原理完全相同。

谷歌的文章：developers.google.com/maps/articles/phpsqlajax_v3

# jquery - jQuery 嵌套 ul 下拉菜单

> ID：10312644
> 
> 赞同：1
> 
> 时间：2012-04-25T09:13:40.697
> 
> 标签：jquery

我[这里](http://www.ttmt.org.uk/forum/nav/index1.html)有一个带有嵌套 ul 的简单 ul 菜单

我希望嵌套菜单在单击链接时向下滑动，并在第二次单击时再次向上滑动。这是有效的。

当单击另一个链接时，我还需要关闭任何其他打开的嵌套菜单。这是行不通的。

在打开我想要的嵌套菜单之前，我尝试使用它来关闭任何打开的嵌套菜单，但是当单击嵌套菜单中的链接时，这也会关闭嵌套菜单。

```
$(document).ready(function () {
    $('#nav ul.children').slideUp();
    $('#nav li').click(function (e) {
        $('ul.children').slideUp();
        $('ul', this).slideToggle();
        e.stopPropagation();
    });
}); 
```

[http://www.ttmt.org.uk/forum/nav/index2.html](http://www.ttmt.org.uk/forum/nav/index2.html)

如何在单击其父级时滑动切换嵌套菜单并在单击另一个链接时关闭任何打开的嵌套菜单。

```
<ul id="nav">
   <li><a href="#">One</a>
     <ul class="children">
        <li><a href="http://www.google.com">One/One</a></li>
        <li><a href="http://www.bbc.com">One/Two</a></li>
        <li><a href="#">One/Three</a></li>
     </ul>
   </li>
   <li><a href="#">Two</a></li>
   <li><a href="#">Three</a>
     <ul class="children">
        <li><a href="#">Three/One</a></li>
        <li><a href="#">Three/Two</a></li>
     </ul>
   </li>  
 </ul> 
```

```
 $(document).ready(function(){
   $('#nav ul.children').slideUp();
   $('#nav li').click(function(e){
     //$('ul.children').slideUp();
     $('ul', this).slideToggle();
     e.stopPropagation();
   });
 }); 
```

**编辑**

我的代码还有另一个主要问题，因为我一开始就关闭了嵌套的 ul

```
$('#nav ul.children').slideUp(); 
```

单击链接并重新加载页面时，所有菜单都将关闭。如何在页面重新加载时保持嵌套菜单打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:33:01.790

要防止单击子项时的操作，请使用以下命令：

```
$('#nav > li').click(function(e){ ... 
```

'>' 字符选择一个 li，它是一个与任何*后代相反的**孩子*

 *...因此`$('ul.children').slideUp();`单击子菜单中的链接时不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:12:54.907

首先隐藏所有嵌套的 ul 标签，在页面加载时使用 css 样式隐藏，以解决您的第二个问题（页面加载）

```
 li ul
 {
   display:none;
 } 
```

把这个脚本

```
 $("#nav li").click(function(){
    $(this).parent().find("li ul:visible").slideUp(); //this helps to slideUp visible uls
    //then your code
 }); 
```*

# ms-access - Microsoft Access 自动舍入数字

> ID：10312645
> 
> 赞同：0
> 
> 时间：2012-04-25T09:13:43.307
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

在具有数字数据类型的列下。我正在尝试输入数字 11.50，但系统会自动将其更改为 12.00。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:16:55.980

because this type `numbers` can handle only numbers with out any fractions

you must change this datatype to be `double`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:20:08.363

There are two settings for Number fields Field Size and Decimal Places. At first, you should change Field Size from Integer to either single, double.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T23:19:51.790

当您在设计模式下打开表格时，单击相关字段。在下部窗格中，您将看到数字的属性，将字段大小更改为 Single 或 Double。

# php - 如何使用php检查用户在网站上是否空闲

> ID：10312646
> 
> 赞同：3
> 
> 时间：2012-04-25T09:14:00.753
> 
> 标签：php

如何使用 php 检查用户是否空闲 10 分钟或更长时间？

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:15:41.547

每次用户做某事时，更新数据库中该用户的时间戳。要查找空闲用户，请查询时间戳超过 10 分钟的每个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:18:00.563

利用会话变量，在其中存储时间戳。对于每个请求更新时间戳。

# mysql - Mysql：如何查看 mysql 二进制文件的编译时配置

> ID：10312652
> 
> 赞同：0
> 
> 时间：2012-04-25T09:14:25.160
> 
> 标签：mysql, configuration, compilation

我最近在本地机器上使用 apt-get 安装了 mysql。它继续使用默认的 my.cnf。我想看看这个二进制文件的编译时配置是什么。

有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:43:30.993

安装 mysql-server 源。

```
apt-get source mysql-server # root access not needed 
```

这将在当前目录中创建一些存档文件。在我的 debian lenny 中，它创建了以下目录。在你的 Ubuntu 中它几乎是一样的。

```
 mysql-dfsg-5.0-5.0.51a
 mysql-dfsg-5.0_5.0.51a-24+lenny5.diff.gz
 mysql-dfsg-5.0_5.0.51a-24+lenny5.dsc
 mysql-dfsg-5.0_5.0.51a.orig.tar.gz 
```

现在检查`debian/rules`提取源中的文件。我是这样做的，

```
 less mysql-dfsg-5.0-5.0.51a/debian/rules 
```

您可以使用其他编辑器（`nano`, `vi`，`gedit`都可以）。环绕线`68`你会看到配置选项

要了解有关如何重新编译 debian 源包的更多信息，请阅读

*   [如何重新编译 debian 软件包](http://www.ducea.com/2008/03/06/howto-recompile-debian-packages/)
*   [编译 Debian 或 Ubuntu 源代码包](http://blog.cachemiss.com/articles/Compiling%20Debian%20or%20Ubuntu%20Source%20Packages.pod)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:21:46.490

尝试使用这个：

```
shell> mysql_config 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T16:24:00.707

```
grep CONFIG $(which mysqlbug) 
```

[来源](http://www.commandlinefu.com/commands/view/3595/determine-configure-options-used-for-mysql-binary-builds)

# linux - 在 Perl 中写入串行端口

> ID：10312654
> 
> 赞同：1
> 
> 时间：2012-04-25T09:14:33.680
> 
> 标签：linux, perl, serial-port, expect

我需要与 Perl 脚本中的串行端口通信。我需要发送字符并读取输入并搜索字符串。

实现这一目标的最简单方法是什么？通过使用“期望”或通过在 Perl 本身中打开 /dev/ttys0 设备？还是其他方法？

我更喜欢使用 perl，但我不知道它是否简单且功能符合预期。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:27:56.613

```
my $port = new Device::SerialPort("/dev/ttyS0"); 
$port->user_msg(ON); 
$port->baudrate(9600); 
$port->parity("none"); 
$port->databits(8); 
$port->stopbits(1); 
$port->handshake("xoff"); 
$port->write_settings;

$port->lookclear; 
$port->write("some command to com-port");

my $answer = $port->lookfor;
# or my $answer=$port->read(255); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:18:57.677

你可以试试`Win32::SerialPort`Win32 和`Device::SerialPort`linux。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:18:53.940

*   [IO::Termios](http://p3rl.org/IO%3a%3aTermios)
*   [设备::串行端口](http://p3rl.org/Device%3a%3aSerialPort)

# php - cakePHP 从自定义数组构建一个选择框

> ID：10312658
> 
> 赞同：1
> 
> 时间：2012-04-25T09:14:53.590
> 
> 标签：php, cakephp, controller, components, formhelper

所以我们有各种各样的搜索页面，每个页面都有不同的搜索条件，所以我决定编写一个组件，该组件将从控制器获取传递给它的参数，收集必要的数据并返回一个数组，然后我可以将其设置为在我的查看文件以填充下拉框以过滤条件。

我已经设法将所有内容写到我必须使用 cakePHP 帮助器构建动态选择框的地方。我确信我做错了什么，如果有更简单的方法可以做到这一点并且仍然保持动态，请尽可能提供帮助：

```
// COMPONENT METHOD:
 public function filterQueries($parameters) {

    // Get defaults from the user:
    $criteria = $parameters["custom"];
    $defaults = $parameters["defaults"];

    // Validate the defaults the user may want and assign them to the return array:
    if($defaults != "false") {
        foreach($defaults as $key => $value) {
            if(array_key_exists($value, $this->defaults)) {
                $this->returnArray["defaults"][$value] = $this->defaults[$value];
            }
        }
    }

    // Get all data for the custom requested form fields:
    if($criteria != false) {
        foreach($criteria as $model => $arguments) {
            $fields = $arguments["fields"];
            $conditions = $arguments["conditions"];
            $recursive = $arguments["recursive"];
            if(!in_array($model,$this->uses)) {
                $useModel = ClassRegistry::init($model);
            } else {
                $useModel = $this->$$model;
            }
            $array = $useModel->find("all",array("conditions" => $conditions, "fields" => $fields, "recursive" => $recursive));
            $this->returnArray["custom"][$model] = $array;
        }
    }

    return $this->returnArray;
} 
```

上面的函数将得到一个分解自定义搜索或默认值的数组（上面没有包含，但一切正常，它完全按照我的预期返回数组。

```
 // The code within my action to get the content from above:
// Load the Filters component to search data:
        $search = $this->Components->load("Filter");

        // Tell search what you want:
        $searchBoxes = array(
            "defaults" => array("statuses", "survey_type"),
            "custom" => array(
              "User" => array(
                  "fields" => array("User.id","User.first_name", "User.last_name"),
                  "conditions" => array("User.user_group_id" => "4f847c63-1840-446e-88be-3e4d29566cf0"),
                  "recursive" => -1
              )  
            )
        );

       $filterResults = $search->filterQueries($searchBoxes);
       $this->set("filters",$filterResults); 
```

所以现在我在我的视图文件中得到了这个多关联数组（一切都很好），但我现在想根据上面创建的数组构建一个用户下拉列表示例，但结果与我预期的完全不同：

```
echo $this->Form->input('user_id',
                        array(
                            "type" => "select",
                            "options" => $filters["custom"]["User"]
                        )
                     ); 
```

HTML 输出被破坏并显示如下：

```
<option value="last_name">Doe</option>
<option value="first_name">Jihn</option>
<optgroup label="User"> </optgroup>
<optgroup label="1"> </optgroup>
<option value="last_name">Marilyn</option>
<option value="first_name">Monroe</option> 
```

我承认我没有很多蛋糕经验，但不明白如何获得结果：

```
 <option value='USERID'>NAME</option> // Yes I know the names and surnames must be concatinated still 
```

任何关于如何做的建议帮助或指导，并以正确的方式做，将不胜感激:)

**VARDUMP ON $filters['custom']['users']**

```
 array
   0 => 
     array
       'User' => 
         array
            'id' => string '4f84840e-cda8-4704-8fdf-210729566cf0' (length=36)
            'first_name' => string 'Name' (length=4)
            'last_name' => string 'Surname' (length=11)
    1 => 
      array
        'User' => 
          array
            'id' => string '4f8488cb-53e0-4f72-af73-3de229566cf0' (length=36)
            'first_name' => string 'Name' (length=6)
            'last_name' => string 'Surname' (length=6) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T11:17:14.417

您可以通过执行以下操作来增强输出：

1）对于一个表的两个字段的组合，可以`"virtualfields"` 在模型中使用，如下：比如你有用户模型，可以定义如下：

```
 public $virtualFields = array(
  'full_name' => 'CONCAT(first_name, " ",last_name)'
 ); 
```

`find`所以现在只要你调用User 模型的方法，就会得到“full_name”字段。

2）对于选择框从表中获取数据，您可以使用该`find('list')`方法。例如对于 User 模型，如果您需要`id,full_name (last and first name combined using the virtual fields)`table，可以按如下方式完成：

```
$this->User->find('list',array('fields'=>array('id','full_name'),'conditions'=>$conditions)) 
```

我希望这有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:31:27.070

好吧，我猜你想要做的实际上是创建另一个带有格式化选项的数组。

```
foreach ($filters["custom"]["User"] as $arr)
{
    $options[$arr['id']] = $arr['first_name'] . ' ' . $arr['last_name'];
} 
```

然后

```
echo $this->Form->select('user_id', $options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:56:10.130

我认为你需要这样的东西：

```
$result = Set::combine($filters["custom"]["User"], 

                       '{n}.User.id', // this is the value of select box

                         array(
                               '{0} {1}', 
                               '{n}.User.first_name', 
                               '{n}.User.last_name'
                              ) // this is the text of select box
                      );

pr($result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T13:22:36.197

$this->form->input('inputname', array('label' => false, 'options' => array('Select optionstype','a','b'), 'class'=>array( 'form-a', 'b'), 'id' => 'bacid', 'style' => 'width:280px;','value'=>$abc['model']['array_attribute']) );

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-12T13:13:07.107

在 cakePHP 3 上，我还不能使用“virtualFields”，但我可以使用如下：

```
//In PostsController
$users = $this->Posts->Users->find('list', 
['keyField'   => 'id', 
 'valueField' => 'full_name', //Don't forget to call concatened field here
 'conditions' => $conditions, 
 'order'      => $orderBy 
]);

//here the magic happens
$concat = $users->func()->concat(
['Users.first_name' => 'identifier', 
 ' ', 
 'Users.last_name' => 'identifier'
]);

//selecting fields
$users->select(['id', 'full_name' => $concat]);

//sending to view
$this->set('users', $users->toArray()); 
```

我希望这对 CakePHP 3 开发人员有所帮助

# java - 从 DB2 中选择给出 [SQL0501] Cursor CRSR0001 not open

> ID：10312659
> 
> 赞同：1
> 
> 时间：2012-04-25T09:14:54.613
> 
> 标签：java, sql, jdbc, db2, ibm-midrange

我正在使用 JDBC 连接到 DB2 并执行 SQL 语句。运行一个简单的：

```
SELECT * FROM myview 
```

我得到一个：

> 状态 : 24501
> 
> 消息：[SQL0501] 游标 CRSR0001 未打开。原因 。. . . . : 在 FETCH 或 CLOSE 语句中指定了游标 CRSR0001，但游标未打开。光标 CRSR0001 具有以下条件之一： -- 光标 CRSR0001 从未打开。-- 游标 CRSR0001 在另一个程序或该程序的另一个调用中打开，并且该程序是用 CLOSQLCSR(*ENDPGM) 创建的。-- 游标 CRSR0001 在另一个模块或该模块的另一个调用中打开，并且该模块是用 CLOSQLCSR(*ENDMOD) 创建的。-- 游标CRSR0001在该程序的另一次调用中被打开，运行SQL语句的程序已经结束，该程序是用CLOSQLCSR(*ENDSQL)创建的。-- 光标CRSR0001在本模块的另一个调用中打开，激活组在调用之间结束。该模块是使用 CLOSQLCSR(*ENDACTGRP) 创建的。-- 游标被 CLOSE、COMMIT 或 ROLLBACK 语句关闭。-- 游标 CRSR0001 在与当前事务不同的事务下打开。恢复 。. . : 执行以下操作之一并再次预编译： -- 在 FETCH 或 CLOSE 语句中使用游标之前，确保游标 CRSR0001 在同一程序或模块调用中打开。-- 在预编译应用程序时指定 CLOSQLCSR(*ENDSQL)、CLOSQLCSR(*ENDJOB) 或 CLOSQLCSR(*ENDACTGRP)。-- 如果游标被 COMMIT 或 ROLLBACK 关闭，请在 COMMIT 或 ROLLBACK 语句上指定 HOLD 以保留任何打开的游标、准备好的语句和表上的锁。执行下列操作之一并再次预编译： -- 在 FETCH 或 CLOSE 语句中使用游标之前，确保游标 CRSR0001 在同一程序或模块调用中打开。-- 在预编译应用程序时指定 CLOSQLCSR(*ENDSQL)、CLOSQLCSR(*ENDJOB) 或 CLOSQLCSR(*ENDACTGRP)。-- 如果游标被 COMMIT 或 ROLLBACK 关闭，请在 COMMIT 或 ROLLBACK 语句上指定 HOLD 以保留任何打开的游标、准备好的语句和表上的锁。执行以下操作之一并再次预编译： -- 在 FETCH 或 CLOSE 语句中使用游标之前，确保游标 CRSR0001 在同一程序或模块调用中打开。-- 在预编译应用程序时指定 CLOSQLCSR(*ENDSQL)、CLOSQLCSR(*ENDJOB) 或 CLOSQLCSR(*ENDACTGRP)。-- 如果游标被 COMMIT 或 ROLLBACK 关闭，请在 COMMIT 或 ROLLBACK 语句上指定 HOLD 以保留任何打开的游标、准备好的语句和表上的锁。
> 
> 错误：-501

这发生在我调用时从结果集中获取最后一行之后

```
rs.next() 
```

如果我在 select 语句中添加 where 子句，它可能会或可能不会出现相同的错误（取决于我过滤的内容）。不过，似乎与任何特定行无关。

我已经能够通过例如：*将连接字符串中的“块大小”参数更改为 2 的任意幂，除了 32（这是默认值）

或通过更改最初创建语句的方式：

```
// Get a statement from the connection
stmt = conn.createStatement(); // doesn't work
stmt = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY); // doesn't work
stmt = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_UPDATABLE); // works
stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE, ResultSet.CLOSE_CURSORS_AT_COMMIT);  // works
stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE, ResultSet.HOLD_CURSORS_OVER_COMMIT);  // works
stmt = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_READ_ONLY); // works
stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY); // works
stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); // works
stmt = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY, ResultSet.CLOSE_CURSORS_AT_COMMIT); // doesn't work
stmt = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY, ResultSet.HOLD_CURSORS_OVER_COMMIT); // doesn't work 
```

我测试了各种 JDBC 版本的 JT Open（6.4、6.6、7.4）。都显示相同的问题，所以它可能不是驱动程序问题。

此外，可能最奇怪的部分是，如果我使用相同的底层 SQL 创建另一个视图（不同的名称），那么它每次都可以正常工作。删除旧视图并重新创建它并不能解决问题。

最后，最近对 AS400 机器进行了修补（大约在我们开始注意到问题的时候）。这段代码之前已经运行了很长时间。

有任何想法吗？

PS。编码：

```
Driver d = new com.ibm.as400.access.AS400JDBCDriver();
DriverManager.registerDriver(d);
conn = DriverManager.getConnection("jdbc:as400://1.1.1.1/MYLIB;prompt=false;keep alive=true;errors=full", "user", "pass");
stmt = conn.createStatement();          
rs = stmt.executeQuery(sql);
while (rs.next()) {
    System.out.println(rs.getString(1));
} 
```

PS：跟踪的输出：

```
Toolbox for Java - Open Source Software, JTOpen 7.4, codebase 5770-SS1 V7R1M0.05 2011/04/25 @CA
java.home=C:\Program Files\Java\jdk1.6.0_27\jre java.vm.version=20.2-b06 java.version=1.6.0_27 os.name=Windows 7 os.version=6.1
Thread[main,5,main]  on maj 2 14:48:05:287 CEST 2012  as400: Properties  (1026683572) : access = "all".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : block size = "32".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : block criteria = "2".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : date format = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : date separator = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : decimal separator = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : errors = "full".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : extended dynamic = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : libraries = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : naming = "sql".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package add = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package cache = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package clear = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package error = "warning".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package library = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : password = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : prefetch = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : prompt = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : remarks = "system".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : sort = "hex".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : sort language = "ENU".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : sort table = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : sort weight = "shared".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : time format = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : time separator = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : trace = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : transaction isolation = "read uncommitted".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : translate binary = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : user = "myuser".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package criteria = "default".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : lob threshold = "32768".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : secure = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : data truncation = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : proxy server = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : secondary URL = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : data compression = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : big decimal = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : thread used = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : cursor hold = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : lazy close = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : driver = "toolbox".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : bidi string type = "5".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : key ring name = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : key ring password = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : full open = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : server trace = "2".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : database name = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : extended metadata = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : cursor sensitivity = "asensitive".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : behavior override = "0".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : package ccsid = "13488".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : minimum divide scale = "0".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : maximum precision = "31".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : maximum scale = "31".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : translate hex = "character".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : toolbox trace = "all".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : qaqqinilib = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : login timeout = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : true autocommit = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : bidi implicit reordering = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : bidi numeric ordering = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : hold input locators = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : hold statements = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : rollback cursor hold = "false".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : variable field compression = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : query optimize goal = "0".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : keep alive = "true".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : receive buffer size = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : send buffer size = "".
Thread[main,5,main]  on maj 2 14:48:05:303 CEST 2012  as400: Properties  (1026683572) : XA loosely coupled support = "0".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : translate boolean = "true".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : metadata source = "-1".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : query storage limit = "-1".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : decfloat rounding mode = "half even".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : autocommit exception = "false".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : auto commit = "true".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : ignore warnings = "".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : secure current user = "true".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : concurrent access resolution = "0".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : jvm16 synchronize = "false".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : socket timeout = "".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : use block update = "false".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Properties  (1026683572) : maximum blocked input rows = "32000".
Thread[main,5,main]  on maj 2 14:48:05:318 CEST 2012  as400: Driver AS/400 Toolbox for Java JDBC Driver (493939748) : Using IBM Toolbox for Java JDBC driver implementation.
...
Thread[main,5,main]  on maj 2 14:48:07:050 CEST 2012  as400: static method Connection VPAASXXX (1241535332) : Throwing exception, id: 1 error class: 1 return code: -501 reason: [SQL0501] Cursor CRSR0001 not open. Cause . . . . . :   The cursor CRSR0001 was specified in a FETCH or CLOSE statement, but the cursor is not open. Cursor CRSR0001 has one of the following conditions: -- Cursor CRSR0001 was never opened. -- The cursor CRSR0001 was opened in another program or another call of this program and the program was created with CLOSQLCSR(*ENDPGM). -- The cursor CRSR0001 was opened in another module or another call of this module and the module was created with CLOSQLCSR(*ENDMOD). -- The cursor CRSR0001 was opened in another call of this program and programs which have run SQL statements have ended and the program was created with CLOSQLCSR(*ENDSQL). -- The cursor CRSR0001 was opened in another call of this module and the activation group ended between calls. The module was created with CLOSQLCSR(*ENDACTGRP). -- The cursor was closed by a CLOSE, COMMIT, or ROLLBACK statement. -- The cursor CRSR0001 was opened under a transaction which is different than the current transaction. Recovery  . . . :   Do one of the following and precompile again: -- Make certain that cursor CRSR0001 is opened in the same program or module call prior to using the cursor in an FETCH or CLOSE statement. -- Specify either CLOSQLCSR(*ENDSQL), CLOSQLCSR(*ENDJOB), or CLOSQLCSR(*ENDACTGRP) when precompiling the application. -- If the cursor was closed by a COMMIT or ROLLBACK, specify HOLD on the COMMIT or ROLLBACK statement to preserve any open cursors, prepared statements, and locks on tables. state: 24501.java.sql.SQLException: [SQL0501] Cursor CRSR0001 not open. Cause . . . . . :   The cursor CRSR0001 was specified in a FETCH or CLOSE statement, but the cursor is not open. Cursor CRSR0001 has one of the following conditions: -- Cursor CRSR0001 was never opened. -- The cursor CRSR0001 was opened in another program or another call of this program and the program was created with CLOSQLCSR(*ENDPGM). -- The cursor CRSR0001 was opened in another module or another call of this module and the module was created with CLOSQLCSR(*ENDMOD). -- The cursor CRSR0001 was opened in another call of this program and programs which have run SQL statements have ended and the program was created with CLOSQLCSR(*ENDSQL). -- The cursor CRSR0001 was opened in another call of this module and the activation group ended between calls. The module was created with CLOSQLCSR(*ENDACTGRP). -- The cursor was closed by a CLOSE, COMMIT, or ROLLBACK statement. -- The cursor CRSR0001 was opened under a transaction which is different than the current transaction. Recovery  . . . :   Do one of the following and precompile again: -- Make certain that cursor CRSR0001 is opened in the same program or module call prior to using the cursor in an FETCH or CLOSE statement. -- Specify either CLOSQLCSR(*ENDSQL), CLOSQLCSR(*ENDJOB), or CLOSQLCSR(*ENDACTGRP) when precompiling the application. -- If the cursor was closed by a COMMIT or ROLLBACK, specify HOLD on the COMMIT or ROLLBACK statement to preserve any open cursors, prepared statements, and locks on tables.
    at com.ibm.as400.access.JDError.createSQLExceptionSubClass(JDError.java:819)
    at com.ibm.as400.access.JDError.throwSQLException(JDError.java:699)
    at com.ibm.as400.access.JDError.throwSQLException(JDError.java:669)
    at com.ibm.as400.access.JDServerRowCache.fetch(JDServerRowCache.java:358)
    at com.ibm.as400.access.JDServerRowCache.fetch(JDServerRowCache.java:269)
    at com.ibm.as400.access.JDServerRowCache.next(JDServerRowCache.java:792)
    at com.ibm.as400.access.AS400JDBCResultSet.next(AS400JDBCResultSet.java:1830)
    at com.mycompany.jdbctest.Main.runsql(Main.java:65)
    at com.mycompany.jdbctest.Main.main(Main.java:20)

SQL Exception:
  SQL    : SELECT * FROM transfersearchview where status in (1, 4)
  State  : 24501
  Message: [SQL0501] Cursor CRSR0001 not open. Cause . . . . . :   The cursor CRSR0001 was specified in a FETCH or CLOSE statement, but the cursor is not open. Cursor CRSR0001 has one of the following conditions: -- Cursor CRSR0001 was never opened. -- The cursor CRSR0001 was opened in another program or another call of this program and the program was created with CLOSQLCSR(*ENDPGM). -- The cursor CRSR0001 was opened in another module or another call of this module and the module was created with CLOSQLCSR(*ENDMOD). -- The cursor CRSR0001 was opened in another call of this program and programs which have run SQL statements have ended and the program was created with CLOSQLCSR(*ENDSQL). -- The cursor CRSR0001 was opened in another call of this module and the activation group ended between calls. The module was created with CLOSQLCSR(*ENDACTGRP). -- The cursor was closed by a CLOSE, COMMIT, or ROLLBACK statement. -- The cursor CRSR0001 was opened under a transaction which is different than the current transaction. Recovery  . . . :   Do one of the following and precompile again: -- Make certain that cursor CRSR0001 is opened in the same program or module call prior to using the cursor in an FETCH or CLOSE statement. -- Specify either CLOSQLCSR(*ENDSQL), CLOSQLCSR(*ENDJOB), or CLOSQLCSR(*ENDACTGRP) when precompiling the application. -- If the cursor was closed by a COMMIT or ROLLBACK, specify HOLD on the COMMIT or ROLLBACK statement to preserve any open cursors, prepared statements, and locks on tables.
  Error  : -501
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  send(): send request...
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Cursor CRSR0001 (1338396376) : Closing with reuse flag = 241.
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Cursor CRSR0001 (1338396376)  closed.
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: ResultSet CRSR0001 (1242359702)  closed.
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  send and receive(): ...
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  send(): send request...
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  Data stream sent (connID=1399560387) ...
00 00 00 28 00 00 E0 04 00 00 00 00 00 00 00 34 
00 14 1D 02 80 04 00 00 00 00 00 00 00 01 00 01 
00 00 00 01 00 00 00 00 
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  AS400Server.receive
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  receive(): Reply not found. Waiting...
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:065 CEST 2012  Data stream data received (connID=1399560387) ...
00 00 00 28 00 00 E0 04 00 00 00 00 00 00 00 34 
00 14 28 00 
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:065 CEST 2012  Data stream data received (connID=1399560387) ...
80 04 00 00 00 00 00 00 00 01 1D 02 1D 02 00 00 
00 00 00 00 
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:065 CEST 2012  run(): Adding reply:  52
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:065 CEST 2012  run(): Notifying threads.
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:065 CEST 2012  run(): Threads notified.
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:065 CEST 2012  run(): Waiting for reply...
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  receive(): Valid reply found:  52
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  send(): send request...
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  Data stream sent (connID=1399560387) ...
00 00 00 28 00 00 E0 04 00 00 00 00 00 00 00 35 
00 14 1F 01 00 04 00 00 00 00 00 00 00 01 00 01 
00 00 00 01 00 00 00 00 
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (1091981526)  closed.
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190)  open. Parent: Connection VPAASXXX (1241535332) .
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Escape processing = "true".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Fetch direction = "1000".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Fetch size = "0".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Max field size = "0".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Max rows = "0".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Query timeout = "0".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Result set concurrency = "1007".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Result set holdability = "1".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Result set type = "1003".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Behavior Override = "0".
Thread[main,5,main]  on maj 2 14:48:07:065 CEST 2012  as400: Statement STMT0001 (2142386190) : Data to correlate statement with cursor Cursor CRSR0001 (226386081) .
...
Thread[main,5,main]  on maj 2 14:48:07:096 CEST 2012  as400: Statement STMT0001 (2142386190) : Executed immediately STMT0001*, SQL Statement -->[CALL QSYS.QCMDEXC('QSYS/ENDDBMON', 0000000013.00000)].
Thread[main,5,main]  on maj 2 14:48:07:096 CEST 2012  as400: Statement STMT0001 (2142386190) : Update count = 0.
Thread[main,5,main]  on maj 2 14:48:07:096 CEST 2012  as400: Statement STMT0001 (2142386190) : Result set = false.
Thread[main,5,main]  on maj 2 14:48:07:096 CEST 2012  as400: Statement STMT0001 (2142386190) : Number of result sets = 0.
Thread[main,5,main]  on maj 2 14:48:07:096 CEST 2012  send and receive(): ...
Thread[main,5,main]  on maj 2 14:48:07:096 CEST 2012  send(): send request...
... 
Thread[main,5,main]  on maj 2 14:48:07:112 CEST 2012  as400: Statement STMT0001 (2142386190)  closed.
Thread[main,5,main]  on maj 2 14:48:07:112 CEST 2012  Sending end job request...
...
Thread[main,5,main]  on maj 2 14:48:07:112 CEST 2012  forceDisconnect calling readDaemon_.interrupt
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:112 CEST 2012  run(): Caught SocketException during disconnect:
java.net.SocketException: socket closed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at com.ibm.as400.access.DataStream.readFromStream(DataStream.java:52)
    at com.ibm.as400.access.ClientAccessDataStream.construct(ClientAccessDataStream.java:52)
    at com.ibm.as400.access.AS400ThreadedServer.run(AS400ThreadedServer.java:357)
    at java.lang.Thread.run(Thread.java:662)
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:112 CEST 2012  run(): Notifying threads after IOException.
Thread[AS400 Read Daemon [system:10.20.28.2;job:564820/QUSER/QZDASOINIT],5,main]  on maj 2 14:48:07:112 CEST 2012  run(): Threads notified after IOException.
Thread[main,5,main]  on maj 2 14:48:07:112 CEST 2012  Server disconnected
Thread[main,5,main]  on maj 2 14:48:07:112 CEST 2012  as400: Connection VPAASXXX (1241535332)  closed. 
```

WRKPTFGRP 的输出：

```
PTF-grupp              Nivå  Status                         
SF99626                   6  Installerad                    
SF99626                   7  Installerad                    
SF99616                   8  Installerad                    
SF99616                  11  Installerad                    
SF99610               10215  Installerad                    
SF99610               11256  Installerad                    
SF99609                 102  Installerad                    
SF99609                 114  Installerad                    
SF99608                  23  Installerad                    
SF99608                  28  Installerad                    
SF99601                  21  Installerad                    
SF99601                  24  Installerad                    
SF99562                  17  Installerad                    
SF99562                  18  Installerad     
SF99356                  21  Installerad     
SF99356                  22  Installerad     
SF99354                   8  Installerad     
SF99354                  13  Installerad     
SF99350                   6  Installerad     
SF99350                   9  Installerad     
SF99349                  14  Installerad     
SF99187                  23  Installerad     
SF99187                  24  Installerad     
SF99144                   3  Installerad     
SF99144                   4  Installerad     
SF99115                  22  Installerad     
SF99115                  23  Installerad 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:01:44.930

我建议运行跟踪以获取更多信息。

请参阅 IBM 软件技术文档：[The All-In-One Toolbox Tracing Guide](http://www-912.ibm.com/s_dir/SLKBase.nsf/82a337f562831d2986256839005c83c7/7b59c352358eff49862574560072cc0e?OpenDocument)。

* * *

还要检查连接作业日志以获取诊断消息。您可以从跟踪或使用连接对象上的[getServerJobIdentifier()](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahh/javadoc/com/ibm/as400/access/AS400JDBCConnection.html#getServerJobIdentifier%28%29)方法获取作业编号、用户和名称。

```
String serverJobIdentifier = 
  ((AS400JDBCConnection)conn).getServerJobIdentifier(); 
```

* * *

一些可能有用的附加信息：

*   这是本地运行还是远程运行？
*   您使用的是哪个 JVM？
*   你检查过 cume 和 group PTF 水平吗？
*   你能包括`WRKPTFGRP`命令的输出吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:32:54.507

在我们的场景中，`'[SQL0501] Cursor CRSR0001 not open'`错误是由底层 AS400 作业被另一个线程关闭引起的。我们能够通过创建一个跟踪与每个线程关联的 AS400 作业编号的 ConcurrentHashMap 来证明这一点，然后用多个线程真正地打击服务器......

这是我们的日志提取...

> CONNECTION SHARING DETECTED
> 与 jobNumber [QZDASOINITQUSER 198049] 的连接给线程 [124] 和 [11616]
> 当前连接信息 [job=QZDASOINITQUSER 198049，threadId=124，connHashCode=11404926]
> 以前的连接信息[job=QZDASOINITQUSER 198049，threadId=11616， connHashCode=11404926]

通过对日志的分析，很明显，一旦第二个线程尝试使用由第一个线程关闭的连接（具有相同的底层 JobNumber），它就会失败并显示`SQL0501`.

为了降低出现此错误的可能性，我们发现 Glassfish Application Server 2.1.1 [使用 JT400 6.7 的 DB2 连接池（jdbc 驱动程序版本 8.11）] 有以下帮助：

*   增加连接池大小
*   减少连接重用次数

# javascript - 函数返回正确的值和“未定义”

> ID：10312661
> 
> 赞同：1
> 
> 时间：2012-04-25T09:14:56.053
> 
> 标签：javascript, function, return

我有以下代码：

```
module = {

        submodule: {

            value: 'foo',

            init: function(){
                console.log(module.submodule.value);
            }

        }

    }; 
```

当我通过控制台测试这段代码时，我得到了正确的值，`undefined`但是当我 在函数`return`内使用带有语句的相同代码时，`init`我只能得到正确的值。我想这是那些常见的初学者和微不足道的问题之一，但我目前无法解决这个问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:16:57.780

控制台返回未定义，因为您的方法不返回任何值，并且控制台在从控制台调用时始终输出函数的返回。

如果您添加`return true`init 方法，它将输出值和 true。

这只是控制台的行为，您没有看到任何错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:23:54.833

您的函数没有返回任何内容。控制台只显示函数的返回值。您的函数不需要返回某些内容，但是如果您希望控制台最终显示“值”，请使用

```
module = {

        submodule: {

            value: 'foo',

            init: function(){
                return module.submodule.value;
            }

        }

    }; 
```

发生的事情是每个函数“返回”一些东西。这东西可以用作其他地方的输入。例如，

```
function getName(){
return "Manish";
}

alert(getName()) //will display "Manish" sans quotes 
```

你可以做类似的事情

```
function sin(theta){
//do some math voodoo, store result in "result"
return result;
}
alert((sin(theta)*sin(theta)-5)/Math.sqrt(1-sin(theta)*sin(theta))//random thingy 
```

但是，如果你决定不让你的函数返回一些东西（或者`return;`因为它可以立即退出函数而使用），它将返回一个未定义的值，因为，好吧，你*没有定义你想要它返回*的东西。哪个很好，只要您不尝试使用返回值。

# asp.net-mvc - 自定义 Telerik 图表

> ID：10312668
> 
> 赞同：0
> 
> 时间：2012-04-25T09:15:26.270
> 
> 标签：asp.net-mvc, telerik, telerik-charting

我正在尝试向 Telerik MVC Q3 图表添加一个功能（我需要图表来显示一些汇总线，例如最小、最大或平均线）。我从 codeplex 下载了 Visual Studio 解决方案，但是很难进行任何更改，因为我找不到有关此项目的任何文档。我以某种方式设法添加了服务器端配置部分，但现在我真的坚持使用 javascript 部分。有人可以建议我如何获取文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:31:16.110

Telerik 没有广泛的客户端 API。可以在他们的文档中找到什么。

*   [Telerik Extensions for ASP.NET MVC 手册](http://www.telerik.com/help/aspnet-mvc/introduction.html)

    在 Telerik UI 组件下，每个组件都有一个名为“客户端 API 和事件”的部分。例如，[网格客户端 API 和事件](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html)。

*   [用于 ASP.NET MVC 演示的 Telerik 扩展](http://demos.telerik.com/aspnet-mvc/)

    这些演示都有一个客户端事件的小演示。例如，[网格客户端事件](http://demos.telerik.com/aspnet-mvc/grid/clientsideevents)。

*   另一个可能对[ASP.NET Wiki](http://www.aspnetwiki.com/)有用的资源是 John DeVight 的一篇名为“ [Telerik MVC：扩展客户端 API](http://www.aspnetwiki.com/page%3aextending-the-telerik-mvc-client-api) ”的文章。[Telerik MVC 系列](http://www.aspnetwiki.com/telerik-mvc)也可能有用。

# django - Django：错误的语言偏好

> ID：10312669
> 
> 赞同：2
> 
> 时间：2012-04-25T09:15:33.723
> 
> 标签：django, internationalization

我使用 Django 以两种语言创建一个 Web 项目：英语和德语。文档的默认语言是英语，我自己将其翻译成德语并创建了一个 .po 文件。

我的想法是，如果有人说德语并且浏览器的语言环境设置为“de”，Django 应该切换到德语（我提供的翻译）。但在其他情况下，它应该切换到英语。

**问题是它完全相反，我不知道为什么！**

现状：如果浏览器的区域设置为英文，则网站显示为英文。但在任何其他情况下，它都以德语显示。

```
LANGUAGE_CODE = 'en-us'

_ = lambda s: s
LANGUAGES = (
      ('en', _('English')),
      ('de', _('German')),
) 
```

中间件设置正确，语言环境路径也是如此！当我测试网站时，我会清除所有 cookie 和缓存。我尝试提供两种翻译（德语和英语，即使它已经用英语编写），但效果仍然相同。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:25:25.607

如果您希望您的用户能够指定语言，请确保启用 LocaleMiddleware：

```
MIDDLEWARE_CLASSES = (
   ...
   'django.middleware.locale.LocaleMiddleware',
   ...
) 
```

然后 Django 将按该顺序查找用户的语言偏好：

因此，在 Django 会话中显式设置语言的最直接方法是重写 request.session['django_language']：

```
def someview (request):
    ...
    request.session['django_language'] = 'en'
    ... 
```

# c++ - cvLoadimage stops working during run time

> ID：10312676
> 
> 赞同：0
> 
> 时间：2012-04-25T09:16:41.077
> 
> 标签：c++, linux, opencv

I have been working on an image recognition program for a while now, but suddenly I noticed that when I test my program for a longer amount of time the function cvLoadImage stops returning an image sometimes. I see no clear pattern or time this occurs, but after it fails once it will keep failing for the rest of the program untill I restart again. The piece of code only runs once in a while to update my user interface.

My code:

```
IplImage* UIframe = cvLoadImage("../images/background.jpg", CV_LOAD_IMAGE_COLOR);
if(UIframe) {
 //do stuff
} else {
 cout<<"Image not loaded"<<endl;
}
cvReleaseImage(&UIframe); 
```

There are a couple of reasons I already found for cvLoadImage failing that I checked:

*   The path is static and is working earlier on in the program so the file is there
*   I release the image and there are no other memory leaks to cause this
*   The .jpg is not being updated while trying to load it
*   I have all the right libraries installed as cvLoadImage is working earlier on

One solution is to only load the image once and keep updating it from memory, but I'd like to find out why this is happening and how to fix this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:25:10.750

您使用的是最新的 OpenCV (2.3.1) 吗？

要注意的另一件事是，其中的任何内容都`//do stuff`可能会产生内存泄漏，并且在一段时间后会`cvLoadImage()`失败，因为您的系统根本没有足够的内存来加载新图像。

事实是，有一个**简单的测试可以发现问题是在 OpenCV 中**还是在您的代码中：编写一个最小的应用程序来加载相同的图像 N 次。`cvLoadImage()`除了调用后跟.之外，不要在循环内执行任何操作`cvReleaseImage()`。

如果这个简单的应用程序失败，则可能是 OpenCV 方面的问题。如果没有，你就知道你的代码做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:44:43.230

您还应该在释放 UIframe 后将其设置为 NULL。释放它很好，但甚至可能存在一个在 NULL 赋值之前确实会导致问题的错误，谁知道呢？:)

这将确保您的文件没有任何保留，以防万一。阅读关于 SO 的这个[问题](https://stackoverflow.com/questions/1025589/setting-variable-to-null-after-free)以获得更多解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:20:29.363

当你决定使用相对路径时要小心，你最好仔细检查你的工作目录。那是你的 .exe 被执行的地方。或者说您的程序在运行时是否更改了工作目录？

# c# - 如何为asp.net中的每个Treenode存储唯一索引？

> ID：10312679
> 
> 赞同：0
> 
> 时间：2012-04-25T09:16:53.333
> 
> 标签：c#, asp.net, asp.net-mvc, c#-4.0

我在 asp.net 中创建了一个 TreeView。我想为 TreeView 中创建的每个树节点存储唯一索引。我正在使用 ValuePath。但它可能是重复的情况。

所以，请指导我为每个树节点存储唯一索引......

谢谢和问候， P.SARAVANAN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:30:40.940

如果您的意思是每个 Treenode 的唯一值，那么您可以使用`GUID`类使用方法生成一个新值`Guid.NewGuid()`。`GUID`在你喜欢的地方使用生成的。

# java - java.lang.NoSuchMethodException: Unknown property ' activePackage'

> ID：10312683
> 
> 赞同：2
> 
> 时间：2012-04-25T09:17:24.283
> 
> 标签：java, spring, jasper-reports, ireport

I am giving the Fieldname in the ireport as the attribute name in the entity class. But I am getting the following Exception.

```
java.lang.NoSuchMethodException: Unknown property 'activePackage'
    at org.apache.commons.beanutils.PropertyUtilsBean.getSimpleProperty(PropertyUtilsBean.java:1122)
    at org.apache.commons.beanutils.PropertyUtilsBean.getNestedProperty(PropertyUtilsBean.java:686)
    at org.apache.commons.beanutils.PropertyUtilsBean.getProperty(PropertyUtilsBean.java:715)
    at org.apache.commons.beanutils.PropertyUtils.getProperty(PropertyUtils.java:290)
    at net.sf.jasperreports.engine.data.JRAbstractBeanDataSource.getBeanProperty(JRAbstractBeanDataSource.java:111)
    at net.sf.jasperreports.engine.data.JRAbstractBeanDataSource.getFieldValue(JRAbstractBeanDataSource.java:96)
    at net.sf.jasperreports.engine.data.JRBeanCollectionDataSource.getFieldValue(JRBeanCollectionDataSource.java:100)
    at net.sf.jasperreports.engine.fill.JRFillDataset.setOldValues(JRFillDataset.java:895)
    at net.sf.jasperreports.engine.fill.JRFillDataset.next(JRFillDataset.java:860)
    at net.sf.jasperreports.engine.fill.JRFillDataset.next(JRFillDataset.java:837)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.next(JRBaseFiller.java:1434)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:126)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:836)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:765)
    at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:84)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:624)
    at org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.fillReport(AbstractJasperReportsView.java:669)
    at org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.renderMergedOutputModel(AbstractJasperReportsView.java:559)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

The following is my jrxml code

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <field name="activePackage" class="java.lang.String">
        <fieldDescription><![CDATA[activePackage]]></fieldDescription>
    </field>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="27" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[activePackage]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="26" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{activePackage}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

The below one is my entity class code:

```
@Entity
@JsonAutoDetect
@Table(name = "ra_bdr_rating")
public class RaBdrRating extends BaseModel {
@Column(name="active_package")
    private String activePackage;
 public String getActivePackage() {
        return activePackage;
    }
 public void setActivePackage(String activePackage) {
        this.activePackage = activePackage;
    }
} 
```

This is the code in my controller class

```
public ModelAndView generateHtmlReport(@ModelAttribute("reports") RaReports     model,ModelAndView modelAndView) throws Exception{

    Map<String,Object> parameterMap = new HashMap<String,Object>();

    List<RaBdrRating> packagesList = reportsDao.retrieveAllPackages(model);

    JRDataSource JRdataSource = new JRBeanCollectionDataSource(packagesList);

    parameterMap.put("datasource", JRdataSource);

    //htmlReport bean has ben declared in the jasper-views.xml file
    modelAndView = new ModelAndView("htmlReport", parameterMap);

    return modelAndView;

} 
```

Here `activePackage` I have declared as private variable of string type in my entity class. So in my jrxml I am giving the same name with `fieldDescription`. If I click on preview in iReport there also I am getting the same problem. I am using ***iReport 4.5.0***. Here retrieveAllPackages(model) has a jpa query which retrieves all the packages and returning in the form of list of type RaBdrRating.RaBdrRating is my entity class the one i posted earlier.I am passing that list to the JRBeanCollectionDatasource and placing the datasource in the map.Now i want to display the list in my report.So i am designing a report in iReport in such a way that the field name must match with the attribute name in the entity class.I think now you will get some idea on this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:28:10.190

从字段中删除 fileDescription

```
<fieldDescription><![CDATA[activePackage]]></fieldDescription> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-04T05:34:23.530

添加这个“**假**”对我有用

```
JRDataSource JRdataSource = new JRBeanCollectionDataSource(packagesList, **false**); 
```

# java - 奇怪的用户崩溃报告：肯定存在的东西的空指针异常

> ID：10312684
> 
> 赞同：1
> 
> 时间：2012-04-25T09:17:32.240
> 
> 标签：java, android, android-layout, nullpointerexception, google-play

所以我的[小应用程序可以在谷歌“Play”上](https://play.google.com/store/apps/details?id=com.epublica.android.kidsmusicplayerfree)找到，到目前为止已经下载了一些。现在开发者控制台报告了崩溃。

这个崩溃报告很奇怪。

首先，开发者控制台给了我一个堆栈跟踪和崩溃的原因，一个空指针异常。但是没有关于 Android 版本或硬件的信息，所以我无法创建模拟器设置来重新创建错误。

这是违规行：

```
((TextView) findViewById(R.id.speechbubble)).setText(getResources().getString(R.string.welcome_nomusic)); 
```

在我测试过的所有设备和模拟器上，这都有效，并产生了一个很好的[语音气泡消息](https://lh5.ggpht.com/tbkV7zOw1k7o5HFS4ZFU7SZcUmvmc4T72JOffXNYDSKW56AdChrS-x6ZDLXEuRfL_DQ)。

为什么它不工作？我*知道*布局包含一个名为“speechbubble”的视图，并且字符串资源包含“welcome_nomusic”的文本消息。

那么，知道这里发生了什么以及如何解决它吗？

* * *

**已修复，谢谢解答。**我的错误是为不同的屏幕分辨率添加了额外的布局，并且在我上次更改代码后没有测试所有这些布局。：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:25:19.933

只需记录涉及的每个对象：

```
log("R: " + R);
log("R.id: " + R.id);
log("R.id.speechbubble: " + R.id.speechbubble);
log("textView: " + findViewById(R.id.speechbubble));
log("getResources(): " + getResources());
log("R.string: " + R.string);
log("R.string.welcome_nomusic: " + R.string.welcome_nomusic);
log("text: " + getResources().getString(R.string.welcome_nomusic)); 
```

在此块中的某处，您将有一个空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:28:44.793

可能发生的情况是您尝试调用的资源可能不存在于某个设备上，或者它正在努力寻找它。

检查所有布局/字符串/资源在不同大小等方面是否相同。ADT 17 + 中的新 Lint 工具应该会有所帮助

# jsp - How to set DATE in object, JSP SERVLET

> ID：10312693
> 
> 赞同：0
> 
> 时间：2012-04-25T09:18:03.633
> 
> 标签：jsp, date, servlets, illegalargumentexception

I've had this time for about quite sometime now and i've run out of resources for research.

In my servlet, i have this code:

```
 comment.setDateadded(Date.valueOf(request.getParameter("date"))); 
```

The code basically gets data from a JSP page then is set as one of the object's values.

The problem is:

When the servlet is called and run returns this error:

```
WARNING: StandardWrapperValve[add_comment]: PWC1406: Servlet.service() for servlet add_comment threw exception
java.lang.IllegalArgumentException
    at java.sql.Date.valueOf(Date.java:117)
    at Controller.Leader.add_comment.processRequest(add_comment.java:50)
    at Controller.Leader.add_comment.doPost(add_comment.java:96) 
```

What i've tried: I'm not sure what the problem is anymore. I imported

```
import java.sql.Date; 
```

in the servlet ofor the line to work. I've also tried manually putting in the date instead of putting automatically the current date but it still does not work. Ive tried yyyy/mm/dd format and the yyyy-mm-dd but it still wont work.

For those who will comment, thank you very much! If you need more details, please post.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:24:24.130

对于大多数情况，您需要`java.util.Date`而不是`java.sql.Date`

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Date.html#valueOf%28java.lang.String%29)_`java.sql.Date`

> 抛出：IllegalArgumentException - 如果给定的日期不是 JDBC 日期转义格式 (yyyy-mm-dd)

这意味着来自 jsp 的日期不是格式的`yyyy-mm-dd`形式。

如果要使用 java.sql.Date 对象，则`yyyy-mm-dd`在使用`valueOf`API 之前将传入的日期格式化为格式化。

对于转换，您可以使用`SimpleDateFormat`将传入值格式化为`yyyy-mm-dd`.

编辑：

最好不要使用 Date 对象，而是应该使用[Calendar](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)进行大部分操作。

编辑：

根据评论：

假设我来自 JSP 的传入日期是 dd-MMM-yyyy 格式。

```
try {
    String date = "25-Apr-2012";
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MMM-yyyy");
    java.util.Date parsedDate = dateFormat.parse(date);
    dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    date = dateFormat.format(parsedDate);
    System.out.println(date);
    java.sql.Date sqlDate = java.sql.Date.valueOf(date);
    System.out.println(sqlDate);
    } catch (ParseException e) {
       e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:26:28.847

使用 java.sql.Date 的示例

```
public class A
{
    public static void main(String [] args)
    {
        java.sql.Date jsqlD = java.sql.Date.valueOf( "2010-01-31" );    
        System.out.println(jsqlD);
    }
} 
```

# java-native-interface - Check JNI calls correctness in Compile time

> ID：10312694
> 
> 赞同：2
> 
> 时间：2012-04-25T09:18:10.383
> 
> 标签：java-native-interface, verification, compile-time

We use a banch of JNI calls (C++ -> Java) in our project. Sometimes me rename methods, do refactoring, etc. So it's will be nice to check every call in **compile time**. Calls looks like

```
m_getDeviceIdMid = getEnv()->GetMethodID(jAdapterClass, "getDeviceId",  " ()Ljava/lang/String;");
getEnv()->CallObjectMethod(m_jAdapter, m_getDeviceIdMid) 
```

Do you know a way to do it? (Maybe with annotations or something similar)

# sql-server - 在sql server中将空字符串的默认值更改为日期时间转换

> ID：10312695
> 
> 赞同：0
> 
> 时间：2012-04-25T09:18:10.743
> 
> 标签：sql-server, asp.net-mvc

我有一个网站，其中有一些文本框，这些文本框仅在特定条件下可见。这些文本框绑定到日历扩展器。但是，只要不可见，这些文本框就会将空字符串传递给数据库。它们在表中对应的数据类型是`datetime`. 在存储这些空字符串时，它们被转换为`1/1/1900 12:00:00 AM`. 我怎样才能在这里存储一个空值？

我需要将数据类型更改为其他内容吗？

我正在使用`datetime`，因为我需要稍后执行一些比较操作。

相关代码在这里。

```
public class Asset
{ 

public string dbStatus { get; set; }
public string wtyEndDate { get; set; }
public string amcEndDate { get; set; }

 public Asset()
 {
    dbStatus = default(String);
    wtyEndDate = default(String);
    amcEndDate = default(String);
 }
}

 protected void btnSaveAsset_Click(object sender, EventArgs e)
  { 
    Asset a = new Asset();
    a.wtyEndDate = txtWtyEndDate.Text;
    a.amcEndDate = txtAmcEndDate.Text;
    string msg = "";
    if (a.dbStatus == "INSERT")
    {
      try
       {
           msg = (ab.EXE_Assets_Master(a).Rows.Count>0) ? "Record Inserted"; : "Error"
        }
        catch (Exception)
        {
            msg = "Record with this service tag already exists in the database";
        }
    }
 }

 protected DataTable _EXE_Asset_Details(Asset a)
  {
    Parameters.Clear();

    AddParameter("@wtyEndDate", a.wtyEndDate);
    AddParameter("@amcEndDate",a.amcEndDate);
    AddParameter("@DBStatus", a.dbStatus);

    return ExecuteDataSet("[Asset_Details]").Tables[0];
    }

// Asset_Details

CREATE PROCEDURE [Asset_Details]
@wtyEndDate datetime = NULL, 
@amcEndDate datetime =null, 
@dbStatus nvarchar(50)

AS
IF(@DBStatus='INSERT')
BEGIN
 INSERT INTO [assetsMaster]
       ([warrantyEndDate],[amcEndDate])
  VALUES
       ( @wtyEndDate,@amcEndDate)
  SELECT @@rowcount

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:20:49.673

仅当其中有数据时才添加可选`DateTime`参数。

例如：

```
if(!string.IsNullOrWhiteSpace(a.wtyEndDate))
{
    AddParameter("@wtyEndDate", a.wtyEndDate);
} 
```

# jquery - 如何在窗口调整大小时调用jQuery中的函数？

> ID：10312696
> 
> 赞同：21
> 
> 时间：2012-04-25T09:18:16.593
> 
> 标签：jquery, function

我有这个代码：

```
<script>
            $(document).ready(function larg(){
            var larghezza = $(document).width();
            $("p.width").text("The width for the " + larghezza + 
                " is px.");
            });

            $(window).resize(function() {
            larg(); 
            });
            </script> 
```

我想在窗口调整大小时调用函数“大”，但它不起作用..怎么做？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-25T09:20:53.790

你不能那样声明函数，像这样使用它。

```
<script>
 $(document).ready(larg);

 $(window).resize(larg);

 function larg(){
  var larghezza = $(document).width();
  $("p.width").text("The width for the " + larghezza + " is px.");
 }
</script> 
```

编辑：稍微更改了代码，感谢评论者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T14:20:17.640

请调用以下方法：

```
window.dispatchEvent(new Event('resize')); 
```

# php - 将 CURL 用于 SOAP 是一种不好的做法吗？

> ID：10312697
> 
> 赞同：0
> 
> 时间：2012-04-25T09:18:18.357
> 
> 标签：php, python, soap, curl

我公司有一个软件使用 PHP 中的 curl 通过 SOAP 协议定期与一些 Web 服务连接。有时这会失败，整个系统非常不稳定。看到 curl 作为与这些 web 服务对话的主要工具，我有点惊讶，因为我认为大多数语言（包括 PHP 和 python）都存在健壮和成熟的高级库，并且 curl 相对低级并且不提供任何错误处理。我对吗？通过 SOAP 进行通信的最佳解决方案是什么？我可以遵循一些企业标准吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:01:41.690

SOAP 客户端中构建的 PHP 已经非常健壮，并且抽象了许多常用的东西：

```
$this->soapClient = new SoapClient($wsdl_url);
// What interface is available, which function can you call?
var_dump($this->soapClient->__getFunctions());

// Call
$result = $this->soapClient->someMethodExposedByTheApi();

// Soap Elements (Tags in the XML) are available as properties:
echo $result->someProperty;

// Nested Tags are available as object chain:
echo $result->someNestedTags->nestedTag; 
```

我无法想象它怎么能更简单......

如果您需要设置 SOAP 服务，您可能需要使用 Zend_Soap，它是 Zend 框架中的一个独立组件，它会自动构建基于 wsdl 的 Web 服务。它还在 PHP 的 SoapClient 之上有一个包装器，但这主要用于将命名和编码约定收敛到 Zend 框架，并且不提供太多附加功能。

但是：如果您有非常具体的要求，Curl 是可以的。如果它不时出现故障并且您的系统不稳定，那么这不是 curl 的问题。这可能是服务或系统的错误配置。

基本上，SoapClient 构建基于标准的 XML。如果您为自己构建 XML（无论出于何种原因），curl 都可以。

# c# - 日历日渲染在服务器端不起作用

> ID：10312703
> 
> 赞同：-2
> 
> 时间：2012-04-25T09:18:37.503
> 
> 标签：c#, asp.net, calendar

我创建了一个带有渲染选项的日历。它在我的本地机器上完美运行，但在服务器上不起作用。我在日历中展示了员工时间表，它在本地机器上工作正常。但现在我在服务器上发布它不在那里工作。

我的部分代码在这里：

```
if (e.Day.Date.Month == DateTime.Now.Month - 1)
{
    if ((lblfromdate.Text != "") && (lbltodate.Text != ""))
    {
        if (e.Day.Date < Convert.ToDateTime(lblfromdate.Text))
        {
            e.Cell.Text = string.Empty;
            e.Cell.BorderColor = System.Drawing.Color.White;
        }
        else
        {
            DataSet4TableAdapters.sp_getallholidayinfoTableAdapter TA = new DataSet4TableAdapters.sp_getallholidayinfoTableAdapter();
            DataSet4.sp_getallholidayinfoDataTable DS = TA.GetData();
            if (DS.Rows.Count > 0)
            {
                DataView DV = new DataView();
                DV = DS.DefaultView;
                string fromdate = Convert.ToString(lblfromdate.Text.Substring(5, 2) + "-" + lblfromdate.Text.Substring(8, 2) + "-" + lblfromdate.Text.Substring(0, 4));
                string todate = Convert.ToString(lbltodate.Text.Substring(5, 2) + "-" + lbltodate.Text.Substring(8, 2) + "-" + lbltodate.Text.Substring(0, 4));
                DV.RowFilter = "fldfromdate >=#" + fromdate + "# and fldfromdate <=#" + todate + "#";
                if (DV.Count > 0)
                {
                    string indate = Convert.ToString(DV[0]["fldfromdate"]);
                    string input = indate.Substring(6) + "-" + indate.Substring(0, 2) + "-" + indate.Substring(3, 2);
                    if (Convert.ToString(e.Day.Date.ToShortDateString()) == input)
                    {
                        e.Cell.Controls.Clear();
                        e.Cell.Text = "Holiday";
                        e.Cell.BackColor = System.Drawing.Color.BlueViolet;
                    }
                }
            }
        }
    }
} 
```

我的设计代码：

```
<asp:Calendar ID="Calendar2" runat="server" BackColor="White"
    BorderColor="Black" BorderWidth="2px" Enabled="False"
    Font-Names="Verdana" Font-Size="9pt" ForeColor="Black"
    Height="183px" NextPrevFormat="FullMonth" ShowGridLines="True"
    Width="659px" OnDayRender="Calendar2_DayRender" ShowNextPrevMonth="False">

    <DayHeaderStyle BackColor="#6699FF" BorderStyle="Solid"
        Font-Bold="True" Font-Size="8pt" />

    <NextPrevStyle Font-Bold="True" Font-Size="8pt"
        ForeColor="#333333" VerticalAlign="Bottom" />

    <OtherMonthDayStyle ForeColor="#999999" />

    <SelectedDayStyle ForeColor="White" />

    <TitleStyle BackColor="White" BorderColor="Black" BorderStyle="None"
        Font-Bold="True" Font-Size="12pt" ForeColor="#333399" />

</asp:Calendar> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:53:57.720

与您的开发服务器相比，仔细检查服务器上的区域设置。

通常，当您将日期构建为字符串中的字符串，然后您的服务器从一个区域更改为另一个区域时，日期格式会出现问题

因此，如果您正在为“dd-MM-yyyy”构建一个字符串，那么服务器可能正在寻找“MM-dd-yyyy”

# ruby-on-rails - Checking if there is a URL for the Back button

> ID：10312705
> 
> 赞同：0
> 
> 时间：2012-04-25T09:18:40.473
> 
> 标签：ruby-on-rails, jquery-mobile

I've a little problem with a jQuery Mobile app I'm building. I have page where a back button using `data-rel="back`. It works well except in one case :

These page can be access by a link from an e-mail. So, when you come from the e-mail, the back button will not work.

So, is there a way to test if there is a previous URL or if the user comes from an e-mail ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:24:05.763

好的，也许这是一个更好的选择。

```
$(document).ready(function(){
    $('a[data-rel="back"]').hide();
})

$('a').on('click', function(){
    $('a[data-rel="back"]').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:41:39.927

你能检查一下 data-rel='back' 属性吗？

```
$("a:jqmData(rel='back')").length 
```

例子：

*   [http://jsfiddle.net/KHhv4/4/](http://jsfiddle.net/KHhv4/4/)（正常加载）
*   [http://jsfiddle.net/KHhv4/5/](http://jsfiddle.net/KHhv4/5/)（首先加载page2以模仿电子邮件）

# javascript - 自动完成 (jQuery UI) 和本地存储

> ID：10312711
> 
> 赞同：3
> 
> 时间：2012-04-25T09:19:00.850
> 
> 标签：javascript, html, jquery-ui, local-storage

使用这两个工具时，我遇到了一个奇怪的错误。我正在对 API 进行 AJAX 查询，然后检索存储在 localStorage 中并显示到自动完成面板中的 JSON 数据。问题是根据自动完成源的来源，面板会做出不同的反应。

这是 AJAX 成功调用的回调函数：

```
function _company_names(data)
{
    localStorage.setItem('ac_source', JSON.parse(data).Result);

    // Works fine
    $("#search_input").autocomplete( "option", "source", JSON.parse(data).Result);
    // Send an AJAX request
    $("#search_input").autocomplete( "option", "source", localStorage.getItem('ac_source'));
} 
```

如果我将 JSON.parse(data).Result 作为结果传递给自动完成源，那就没问题了。但是，如果我通过 localStorage.getItem('ac_source')，ac 小部件将随风发送一个 AJAX 请求（不使用我自己的函数）（我的 node.js 将尝试解析它等）。

我正在使用 localstorage 从我的代码的其他部分访问这些数据（存储它以与其他用户研究进行比较并在请求相同时显示它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:57:02.323

您只能在本地存储中存储字符串数据：

```
localStorage.setItem('ac_source', '{"key":"data","key1":"data1"}');

$("#search_input").autocomplete( "option", "source", JSON.parse(localStorage.getItem('ac_source')).Result); 
```

# google-analytics - 谷歌分析下载链接跟踪

> ID：10312713
> 
> 赞同：1
> 
> 时间：2012-04-25T09:19:02.400
> 
> 标签：google-analytics, escaping

以下js中的url是否需要对url进行转义？

```
onclick="javascript: pageTracker._trackPageview('/internet/xyz/de/privatkunden.-Slot1-0113-File.File.FileRef.pdf/äü&.pdf');" href="/internet/xyz/de/privatkunden.-Slot1-0113-File.File.FileRef.pdf/äü&.pdf" 
```

在我将它写在页面上以确保我的 JS 仍然可以工作之前，我对其进行了 JS 转义，但我不确定 google 是否需要 URL 转义。

我在文档和这个板上找不到任何说是或否的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:22:47.387

您不需要转义您的 URL，ga 脚本会为您完成。

`äü&.pdf`将被转义为`%25C3%25A4%25C3%25BC%26.pdf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:29:57.597

是的，它有效，但如果可以的话，你应该使用它：

使用 Async Snippet 然后这个：

```
<a onclick="_gaq.push(['_trackPageview', '/internet/xyz/de/privatkunden.-Slot1-0113-File.File.FileRef.pdf/äü&.pdf']);" href="/internet/xyz/de/privatkunden.-Slot1-0113-File.File.FileRef.pdf/äü&.pdf" target="_blank">pdf file name link</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:12:10.023

跟踪下载链接的正确方法是使用事件跟踪。 [https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

它与您所做的非常相似 - 这是代码 - _trackEvent(category, action, opt_label, opt_value, opt_noninteraction)

例如：

```
<a href="https://github.com/Soomla/AndroidStore/zipball/master" onclick="_gaq.push(['_trackEvent', 'immediate_goals', 'android_code_download', 'Someone wants our ZIP !']);">Download <strong>ZIP File</strong></a> 
```

# sql-server-2008 - #temporary table Microsoft SQL 似乎迷路了

> ID：10312716
> 
> 赞同：2
> 
> 时间：2012-04-25T09:19:16.793
> 
> 标签：sql-server-2008

我有一个小练习，我需要从视图中访问数据并将其打印在报告中。我创建了一个#temporary 表来存储数据，并使用while 循环检索它并在报告中显示它。

问题是临时表似乎“丢失”了。

```
--Creating my report
USE PetShopDataBase
CREATE PROCEDURE spPetShopReport 
@customerID INT

SELECT *
INTO #temporary
FROM vwPetshop
WHERE customerID = @customerID
GO

ALTER TABLE #temporary
ADD Printed SMALLINT
GO 
```

那么从这一点开始该对象被认为是无效的

```
UPDATE #temporary
SET Printed = 0
GO 
```

运行代码时收到的错误消息是

```
Msg 4902, Level 16, State 1, Line 2
Cannot find the object "#temporary" because it does not exist or you do not have 
permissions. 
```

这是为什么？

亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:54:28.113

不要在存储过程中使用 GO。Go 结束批处理，从而结束存储过程。

顺便说一句，所有这些代码都可以压缩成一个语句

```
SELECT * INTO #temporary 
FROM vwPetshop 
WHERE customerID = @customerID   

ALTER TABLE #temporary 
ADD Printed SMALLINT 

UPDATE #temporary 
SET Printed = 0 
```

试试这个：

```
SELECT *, CAST(0 AS SMALLINT) AS Printed
  INTO #temporary 
FROM vwPetshop 
WHERE customerID = @customerID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:37:37.890

在这种情况下，您可以使用全局临时表（只需两个 ## 而不是一个 #）..

```
SELECT *
INTO ##temporary
FROM vwPetshop
WHERE customerID = @customerID 
```

本地临时表在创建它的过程之外不可见..

# javascript - Unable to read nodeValue using XPath when namespace is present

> ID：10312720
> 
> 赞同：0
> 
> 时间：2012-04-25T09:19:47.587
> 
> 标签：javascript, xml, xpath

```
<?xml version="1.0" encoding="UTF-8" ?>
<BO xmlns="http://hg.com/bo" 
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
             xsi:schemaLocation="http://hg.com/bo http://hg.com/bo.xsd">
<b>Harsh</b>
</BO> 
```

I am trying to read **Harsh** present inside tag using XPath.

When the namespace is not present, I can use this javascript line

```
var path = "/BO/b";
var nodes=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null); 
```

What change should I make in the path so that I am able to fetch the node b?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:12:40.970

为了在（默认）命名空间中定义的 XML 内容上使用 XPath 表达式，您需要指定命名空间前缀映射。您需要某种方式在您的 XPath 表达式中指定您正在查找 'http://hg.com/bo' 命名空间中的所有 'b' 元素。

在您的情况下，您可以使用“ex”前缀并将此前缀映射到“http://hg.com/bo”命名空间 URI。这将导致以下 XPath 表达式应返回在“http://hg.com/bo”命名空间中声明的所有“b”元素：“//ex:/BO/b”。

# c# - 我的winform请求之间的时间变化

> ID：10312722
> 
> 赞同：-2
> 
> 时间：2012-04-25T09:19:52.090
> 
> 标签：c#, winforms, http-post

我有从文件中读取的 winform 并向 web 发出 post 请求。一切正常，但我想要一个文本框，我可以在每个请求之间放置时间。

例如：

我运行我的应用程序并使用（1000rows）读取整个文件，并在每一行之后等待 2 秒。如果我想要不同的值，我每次使用 Thread.Sleep() 必须在代码端更改它......最好有选项从我的表单中更改它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:22:12.027

这是你想要的吗？

Thread.Sleep(int.Parse(TextBoxTime.Text));

# java - 从android调用PHP函数？

> ID：10312728
> 
> 赞同：4
> 
> 时间：2012-04-25T09:20:17.380
> 
> 标签：java, android

我想从 Android 应用程序调用服务器上的特定 php 函数并发送一些参数。到目前为止，我已经实现了可以使用 HttpClient 打开 php 文件并将数据传输到 Json 并在我的应用程序中显示出来。所以，现在我希望能够调用特定的函数并向它发送参数，我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:55:49.903

这是我为使用 JSON 注册新用户名而编写的一段代码：

```
 public static boolean register(Context myContext, String name, String pwd) {

            byte[] data;
            HttpPost httppost;
            StringBuffer buffer;
            HttpResponse response;
            HttpClient httpclient;
            InputStream inputStream;
            List<NameValuePair> nameValuePairs;

            try {
                    httpclient = new DefaultHttpClient();
                    httppost = new HttpPost(
                                    "http://X.X.X.X/register.php");
                    // Add your data
                    nameValuePairs = new ArrayList<NameValuePair>(2);
                    nameValuePairs.add(new BasicNameValuePair("User", name.trim()));
                    nameValuePairs.add(new BasicNameValuePair("Password", pwd.trim()));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    // Execute HTTP Post Request
                    response = httpclient.execute(httppost);
                    inputStream = response.getEntity().getContent();

                    data = new byte[256];

                    buffer = new StringBuffer();
                    int len = 0;
                    while (-1 != (len = inputStream.read(data))) {
                            buffer.append(new String(data, 0, len));
                    }

                    inputStream.close();
            }

            catch (Exception e) {
                    Toast.makeText(myContext, "error" + e.toString(), Toast.LENGTH_LONG)
                                    .show();
                    return false;
            }

            if (buffer.charAt(0) == 'Y') {

                    return true;
            } else {

                    return false;
            }

    } 
```

如果您注意到：

```
 nameValuePairs = new ArrayList<NameValuePair>(2);
                    nameValuePairs.add(new BasicNameValuePair("User", name.trim()));
                    nameValuePairs.add(new BasicNameValuePair("Password", pwd.trim()));
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

在该部分中，您可以发送参数。

该方法只是将用户和密码发送到 register.php。如果 User 已经被占用，则返回“N”；否则创建用户并返回“Y”。

在服务器端，您将它们视为 POST 信息，因此：

```
 $user = $_POST['User']; 
```

它应该适合你的情况:)

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:23:51.410

将这些特定的 php 函数与您所需的参数一起呈现或包装在 Web 服务中，并调用该 Web 服务，包括来自您的 android 的输入参数以完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T09:25:05.367

您需要使用 WebServices 来完成这项工作。 [http://www.php.net/manual/en/book.soap.php](http://www.php.net/manual/en/book.soap.php)

# jquery - jquery隐藏显示使用索引

> ID：10312729
> 
> 赞同：0
> 
> 时间：2012-04-25T09:20:18.737
> 
> 标签：jquery

我有多个链接可以在同一页面显示相关内容显示我使用了这个，

```
$("#option .link").click(function(){
    Options=$("#option .link").index(this);
    $("#content").hide();
    $("#content:eq("+Options+")").show();
}) 
```

但这不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:24:20.203

只有一个元素可以具有`id`等于`content`，因为 id 是唯一的。您可能需要像使用`.link`.

另一方面，`Index`在您的代码中是一个全局变量。应避免使用全局变量，实际上不需要全局变量，因此使用`var Index`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:24:30.717

你的想法是对的..但是你不应该为一个以上的元素使用相似的ID。在这里，你使用#content（似乎）来表示一个以上的元素..

上课试试。。

```
$("#option .link").click(function(){
    Options=$("#option .link").index(this);
    $(".content").hide();
    $(".content:eq("+Options+")").show();
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T09:36:10.100

您使用`#content`id 作为元素，但您应该在一页中只使用一个 id，因此您应该将所有`#content`id 更改为 class`.content`

```
$("#option .link").click(function(){
   Options=$("#option .link").index(this);
   $(".content").hide();
   $(".content:eq("+Options+")").show();
}); 
```

进行此更改并尝试...

# wcf - 从 Delphi 2010 客户端使用 C# WCF 服务：数据绑定和实体框架

> ID：10312731
> 
> 赞同：2
> 
> 时间：2012-04-25T09:20:22.090
> 
> 标签：wcf, entity-framework, interop, delphi-2010, odata

我正在将用 Delphi 2010 编写的 win32 Delphi VCL 应用程序迁移到多层架构。
该应用程序广泛使用 devexpress 的 ExpressGrids (TcxGrid) 进行数据绑定。

*   我设计了基于实体框架的数据层，使用 dbContext 和数据传输对象。
*   我已经使用基于实体数据模型的 T4 模板通过 WCF 公开了 CRUD 操作。

一切正常，Delphi 客户端成功与 WCF 服务通信，交换数据传输对象。

问题是，**我如何维护数据绑定功能**？我倾向于编写一个返回通用数据表或数据集的服务方法。我可以将 linq 语句结果转换为数据集、表或视图吗？我不确定是否可以将 Expressgrids 绑定到对象数组（WCF 返回实体集合，但 Delphi 看到数组）。有没有人有过这种互操作性的经验？

**编辑**

我有返回数据集的数据服务，但你猜怎么着？来自 .net 的 xml 数据集与 Delphi（至少 2010 年）不兼容。我已经设法使用[Gekko example (modified)](http://www.gekko-software.nl/DotNet/Art08.htm)使其工作，但由于我们需要从客户端运行的查询的复杂性，它并不实用。我们现在的选择是让网格保持原样，直到 BLL 完成并启动一个新项目以用 C# 重新编写客户端（作为 Web 或 Windows 应用程序），或者使用 RemObjects Hydra 编写一个通用网格插件，以嵌入带有网格的表格中-现在试图弄清楚。

**更新** 我已经放弃了 Gekko DataSet 实现，转而通过研究 Delphi 中 TClientDataSet 所需的 xml 格式来编写我自己的实现。在服务器端，我实现了一个服务，它以字节数组的形式返回符合 TClientDataSet 的 xml。在客户端上，我将其加载到 TStringStream 中，然后将流加载到 TclientDataSet 组件中。在我们推出 Hydra 解决方案时，我将它用于小型集合以提供查找和数据绑定。

xml大致遵循这种格式：

```
"2.0">
  <METADATA>
    <FIELDS>
      <FIELD attrname="ID" fieldtype="i4"/>
      <FIELD attrname="Status" fieldtype="string" WIDTH="10"/>
      <FIELD attrname="Created" fieldtype="date"/>

<ROWDATA>
    <ROW RowState="4" ID="1" Status="Code1" Created="20130707" Made="20130707T21:37:55341" Stopped="00:00:00000" Volume="1174" IsReady="TRUE"/>
    <ROW RowState="4" ID="2" Status="Code2" Created="20130707" Made="20130707T21:37:55341" Stopped="00:00:00000" Volume="2149" IsReady="FALSE"/> 
```

[这](http://www.webdbtips.com/260680/)是有关 xml 格式的少数信息来源之一。

我知道这个问题很老，但我会很感激任何关于互操作性和遗留代码迁移的见解。

谢谢

# sql-server - 外键数据删除应显示主键错误

> ID：10312740
> 
> 赞同：1
> 
> 时间：2012-04-25T09:21:07.600
> 
> 标签：sql-server

我有两个表 Table1 和 Table2。其中 table1 列主键被称为 table2 列作为外键。

现在，当我从表 2 中删除具有表 1 外键列的记录时，我必须显示一条违反约束的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:39:10.160

如果我做对了，表 1 中的 A 列（比如说）引用了表 2 中的 B 列（比如说）。你可以做的是，如果它的任何子项仍然存在于表中，则将其设置`ON DELETE`为将阻止从表 2 中删除记录`NO ACTION`1.

您可以通过以下方式做到这一点：

```
ALTER TABLE TABLE1 ADD FOREIGN KEY (A) REFERENCES TABLE2 (B) ON DELETE NO ACTION; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:46:23.383

如果您从子表而不是父表中删除记录，则不会违反约束。删除子记录是正常的。例如，如果我有一个 user 表和一个包含 users 表中的 userid 的 photos 表，如果我想删除照片，为什么要停止该操作并抛出错误？删除子记录不会同时删除父记录。

如果您真的想这样做，那么您必须通过触发器来完成（确保处理多个记录删除），或者如果 FK 是必填字段，那么根本不授予删除表的权限。请注意，这可能意味着即使您尝试删除，也永远无法删除任何记录。一个简单的方法可能是在应用程序中不提供删除功能。

我怀疑您真正需要什么才能更好地定义需求文档中的需求。在处理数百个数据库的 30 多年中，我从未见过有人需要此功能。

# php - joomla 2.5中的'article'，'Id'模块

> ID：10312749
> 
> 赞同：0
> 
> 时间：2012-04-25T09:21:49.737
> 
> 标签：php, joomla, joomla2.5

我需要一次在菜单中链接的每个“文章”、“Id”输出，全部在一个页面中，每个都在一个 div id=articleID 中。输出可以是带有模块的句柄，我可以在 joomla 2.5 中安装和更新这个模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:38:13.890

下面的代码应该做：

```
//  init
$searchBase = 'index.php?option=com_content&view=article&id=';
$articles = array();

//  get all menu items and find links to articles
$menu = JFactory::getApplication()->getMenu()->getItems('type', 'component');
foreach ($items  as $item) {
    $id = str_replace($searchBase, '', $item->link, $count);
    if ($count){
        $articles[] = (int) $id;
    }
}

//  build query for articles info
$csvIds = implode(',', $articles);
$sql = "select id, title from #__content WHERE published=1 AND id IN ($csvIds)";
// TODO: query and process 
```

# c# - String.Replace() 不起作用

> ID：10312750
> 
> 赞同：0
> 
> 时间：2012-04-25T09:21:51.723
> 
> 标签：c#, string, windows-phone-7

我想知道为什么我的 string.replace 不起作用，它不会改变我的字符串的路径。

这是我正在使用的代码：

```
WebBrowserTask browser = new WebBrowserTask();
File theFile = new File();
theFile = (File)listBoxFiles.SelectedItem;

var newPath = theFile.Path;
newPath = newPath.Replace("C://inetpub//wwwroot//", "http://,mywebsite.com//Files//");
browser.URL = newPath;
browser.Show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:23:47.073

`String.Replace`几乎可以肯定*确实*有效。很可能是你弄错了。

检查`newPath.Contains("C://inetpub//wwwroot//")`- 如果它是 false 的值，那是因为您的字符串不包含您要替换的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:23:29.023

这听起来可能很愚蠢，但是您是否首先调试并检查了 newpath 实际上等于什么，因为如果您没有并且您尝试替换的字符串不存在，则不是它不起作用，而是没有工作要做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T09:32:51.480

[`string.Replace()`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)必须工作。我认为`newPath`不包含`"C://inetpub//wwwroot//"`. 因此，在调试时，请尝试逐步检查字符串的值。

也许没有`"C://inetpub//wwwroot//"`但是`"C://inetpub//wwwroot"`。所以这取决于。

# stored-procedures - 如何将引用新旧对象传递到存储过程中？

> ID：10312751
> 
> 赞同：1
> 
> 时间：2012-04-25T09:21:52.967
> 
> 标签：stored-procedures, triggers, informix

我有一个如下所示的触发器：

```
create trigger theTrig
insert on table_A referencing new as n
for each row(
   execute procedure proc_A();
); 
```

我可以知道如何将新/旧参考对象传递到触发器内的存储过程中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:12:59.493

```
CREATE TRIGGER theTrig
    INSERT ON table_A REFERENCING NEW AS n
    FOR EACH ROW
    (
        EXECUTE PROCEDURE proc_A(n.col2, n.col3, n.col5, n.col7, n.col11);
    ); 
```

我通常写 'REFERENCING NEW AS NEW' 和/或 'REFERENCING OLD AS OLD' 并且 Informix 很乐意遵守重言式规范。

# ios - iOS 应用的用户注册和认证服务

> ID：10312753
> 
> 赞同：1
> 
> 时间：2012-04-25T09:22:00.703
> 
> 标签：ios, iphone, objective-c

我已经完成了我的 iOS 应用程序，现在想要拥有用户注册和身份验证功能。

当用户打开应用程序时，它必须要求他们注册或登录，然后当应用程序关闭时它会注销。我想将他们的基本信息发送到我的服务器，例如姓名、位置。

这是否允许我的 Apple 使用，有没有人知道我可以用来重新发明轮子的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:33:50.540

这是苹果公司允许的。

App Store 上有一些应用程序没有实现自己的注册/登录机制。这些应用程序要求其用户通过 Facebook 登录。因此，任何拥有 Facebook 帐户的用户都可以使用他们的 FB 凭据登录您的应用程序。您必须使用 Facebook 提供的 iOS SDK。

为您的应用用户提供多个登录选项总是更好，而不是仅仅依赖 Facebook 或任何其他提供商。例如，允许用户通过 GMail 登录。

添加对[OpenID](http://en.wikipedia.org/wiki/OpenID)的支持是另一个不错的选择。OpenID 是一个开放标准，它描述了如何以去中心化的方式对用户进行身份验证，从而无需服务来提供自己的 ad hoc 系统，并允许用户整合他们的数字身份。用户可以使用他们首选的 OpenID 身份提供者创建帐户，然后使用这些帐户作为登录任何接受 OpenID 身份验证的网站的基础。

# c# - 如何在 MVC Asp.Net 中注册自定义 JavaScriptSerializer

> ID：10312754
> 
> 赞同：1
> 
> 时间：2012-04-25T09:22:04.973
> 
> 标签：c#, json, asp.net-mvc-3

我有一个自定义对象，它有一个抽象类类型的数组。

为了反序列化它，我制作了一个自定义 JavaScriptSerializer，它将 Json 字符串更改为抽象类的特定类型。

现在，当我注册 JavaScriptSerializer 时，我收到一个错误“无法将对象图反序列化为类型”。

我班级的结构类似于

```
class main {
  public int FirstProp {get;set;}
  public List<abstractClass> items {get;set;}
}

class abstractClass 
{
  public int FirstProp {get;set;}
}

class DerviedFirst : abstractClass 
{
  public int CustomProp {get;set;}
}

class DerviedSecond : abstractClass 
{
  public int INeedTHis {get;set;}
} 
```

我应该如何尝试实现这一目标？即我想将列表转换为单独的类对象类型

# jquery - 使用 Jquery 进行精美的背景移动

> ID：10312763
> 
> 赞同：0
> 
> 时间：2012-04-25T09:22:30.627
> 
> 标签：jquery, ajax, html

我想做一些类似于 CSS/JQUERY 效果的东西，您可以在以下错误链接中看到：

```
http://new.livestream.com/error 
```

我想知道的是如何使背景图像根据鼠标位置和使用 JQUERY 移动。我已经看到了一些可以帮助我的代码，但是由于我对 JQUERY 不是很热衷，所以我寻求一些帮助。我发布代码：

```
$(document).ready(function(){
  $('#home a')
   // On mouse over, move the background on hover
   .mouseover(function(){
     $(this).stop().animate({backgroundPosition: "0 -54px"}, 500);
   })
   // On mouse out, move the background back
   .mouseout(function(){
      $(this).stop().animate({backgroundPosition: "0 0"}, 500);
   })
 }); 
```

我想我必须根据当前鼠标位置将静态“0 -54px”值更改为动态值，对吧？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:29:25.767

没错，您可能会想收听该`mouseMove()`事件

[有关 mouseMove 的 jQuery 文档，请参阅此链接](http://api.jquery.com/mousemove/)

```
$("#target").mousemove(function(event) {
    var mouseX = event.pageX;
    var mouseY = event.pageY;
    // you can now use mouseX and mouseY to calculate and set the background position or offset
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T21:55:56.657

我没有时间让代码工作，但是对于那些想要我所说的效果的人来说可以使用这个教程:)

[http://webdev.stephband.info/parallax.html](http://webdev.stephband.info/parallax.html)

最好的问候，愿力量与你同在！

# c# - 为单元测试创 建非法参数类的抽象方法

> ID：10312764
> 
> 赞同：1
> 
> 时间：2012-04-25T09:22:34.983
> 
> 标签：c#, .net, unit-testing

我们基于列的数据库的数据字段映射到 DataField 类。在每个数据字段对象上`GetValue<T>()`都可以调用该方法。

如果`T`是非法类型，则会引发异常。我应该在我的单元测试中通过什么类型，如果我通过非法类型，我会测试是否抛出异常？我想到的下一个已知的非法类型？还是有更抽象的方法？

```
public object GetValue<T>()
{
    if (typeof(T) == typeof(string)) return ValueString;
    if (typeof(T) == typeof(int?)) return ValueInt;
    if (typeof(T) == typeof(double?)) return ValueDouble;
    if (typeof(T) == typeof(DateTime?)) return ValueDateTime;
    if (typeof(T) == typeof(bool)) return ValueBoolean == true;

    var ex = new Exception("Following type is not supported: " + typeof(T));
    Log.Error(ex);
    throw ex;
} 
```

因此，除了那些之外的所有类型，如果它们被通过，都应该抛出这个异常。所以我需要一种虚拟类型，对吧？

目前我的单元测试如下所示：

```
[Fact]
public void If_T_is_illegal_type_an_exception_gets_thrown()
{
    _dataField = new DataField(_params);
    Assert.Throws<Exception>(() => _dataField.GetValue<Type>());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:44:41.240

请记住，单元测试试图通过所有代码路径并确保正确的行为。您总共应该有 6 个测试：一个针对 5 种有效类型中的每一个，一个针对**任何其他类型**（如您当前所拥有的）以涵盖最终的代码路径。不知道为什么你需要更抽象的东西。

您可能更喜欢使用显式转换和强制转换，以便这成为编译时测试而不是运行时：http: [//msdn.microsoft.com/en-us/library/xhbhezf4 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/xhbhezf4(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:07:01.090

如上所述，对每种支持的类型进行一次测试，对不支持的类型进行一次测试就足够了。

我确实注意到的一件事是异常不是错误的唯一预期结果。您如何验证错误是否已记录？
你有办法做到这一点吗？
如果没有，你想要/需要一个吗？

此外，一个完全不请自来的代码审查点......为什么

```
if (typeof(T) == typeof(bool)) return ValueBoolean == true; 
```

代替

```
if (typeof(T) == typeof(bool)) return ValueBoolean; 
```

艾伦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:04:41.963

目前，如果您调用`GetValue<bool>()`您的代码将调用`typeof(T)`五次并进行 5 次比较。然后它将返回装箱的布尔值作为对象。最糟糕的是，这个方法的签名没有说明哪些类型是允许的，哪些会抛出异常。我可以打电话`GetValue<decimal>()`吗？不知道。如果不允许，我应该尝试运行时异常。

考虑为所需类型创建重载方法：

```
bool GetBooleanValue()
decimal GetDecimalValue() 
```

这完美地描述了它可以返回的类型。里面没有长链。调用者不会收到对象。您将毫无疑问地对每种方法进行测试。

# javascript - 使用 Rhino 在 Eclipse 中调试 Javascript

> ID：10312766
> 
> 赞同：3
> 
> 时间：2012-04-25T09:22:39.023
> 
> 标签：javascript, eclipse, debugging, rhino

我已经为 Eclipse 安装了 JavaScript 开发工具插件，但我无法运行或调试 JavaScript 项目。

我想使用内置的 Rhino Interpreter 进行调试，而不是使用 Web 浏览器。

我创建了一个 JavaScript 项目，当我尝试创建运行配置时，它显示“请选择一个有效的项目”并且运行按钮显示为灰色。

请查看随附的快照。![](../Images/30d27d0d71cc64aeab177775b860e7e1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T05:29:49.150

你用的是哪个版本的eclipse？安装 Eclipse 3.7 Java EE 版本，您可以直接右键单击 javascript 文件（.js 扩展名）和 Debug As -> Rhino JavaScript。请看附图。

![调试 JavaScript](../Images/65ab454e398cdec9d5ad10eca93febf4.png)

调试配置将如下所示。项目不会有任何浏览，您需要直接浏览 javascript 文件，如下图所示（您可以浏览整个工作区中的所有 javascript 文件）。

![调试配置](../Images/58fb1569a4df00e355610202765ca860.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T20:10:43.253

显然您没有创建有效的 javascript 项目。根据您的 Eclipse 版本，这适用于 Juno，转到 File - New - Javascript Project。

Javascript 项目没有与它们相关联的“性质”，可以让您在 Project Explorer 中了解。Spring、Java，甚至 Perl 项目在 eclipse 中都有这个。它是分配给项目的符号，让 Eclipse 知道它是什么类型的项目。Java 项目有一个“J”，Spring 项目有一个“S”。

# xmpp - Rhomobile 中的聊天应用程序与 asp.net 服务器

> ID：10312767
> 
> 赞同：0
> 
> 时间：2012-04-25T09:22:41.473
> 
> 标签：xmpp, chat, rhomobile

我想将聊天应用程序集成到 Rhomobile (ruby) 中的现有应用程序中，并且我的服务器是 RESTful asp.net mvc 服务器。关于如何使用 Rhomobile 完成它，我没有找到太多有用的信息。

我已经做了一些研究，发现很多人使用 xmpp/jabber。但是我真的不知道如何开始以及在有消息等待时如何通知用户（如果用户不在“聊天页面”上）。

我可以进行轮询，但这需要为每个用户打开连接，我担心移动设备的电池。

一些问题：

1.  ruby 客户端和 asp.net mvc 服务器如何使用？
2.  由于 asp.net mvc 是无状态的，我应该将聊天数据保存在中央服务器的数据库中吗？
3.  如果有人知道一个好的指南或教程来帮助我完成这个，那就太好了 - 我是这方面的敌人

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:05:29.720

这就是 RhoMobile 在其网站上的内容。

[http://docs.rhomobile.com/rhodes/connect-to-web-services](http://docs.rhomobile.com/rhodes/connect-to-web-services)

我还认为你可以使用任何你想要的 ruby​​ 和 JavaScript/Jquery 代码。

# c# - 如何在渲染前获取网格行的实际高度

> ID：10312771
> 
> 赞同：3
> 
> 时间：2012-04-25T09:22:51.420
> 
> 标签：c#, .net, wpf

在我的项目中有许多嵌套网格。大多数行和列的宽度在 XAML 中定义为“*”。

我试图通过将其他行的高度设置为 0 来扩展特定的行（比如说 Row1），并且我正在使用 .ActualHeight 属性来获取 Row1 的宽度，然后它没有给我实际的高度。

据我所知，这是因为网格行和列的高度和宽度是在渲染时间设置的。
我在网上搜索，有人建议使用 UpdateLayout() 方法..但这对我也不起作用。
我不能发布代码片段，因为它是很长的代码。
我在 c#.net wpf 中的项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:47:12.760

您需要进行完整的布局更新，即您需要调用 Measure、Arrange 和 UpdateLayout：

```
 //Make the framework (re)calculate the size of the element
    _Element.Measure(new Size(Double.MaxValue, Double.MaxValue));
    Size visualSize = _Element.DesiredSize;
    _Element.Arrange(new Rect(new Point(0, 0), visualSize));
    _Element.UpdateLayout(); 
```

_Element 是一个 FrameworkElement（Grid 是一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T10:25:32.003

基于狒狒帖子的解决方案对我有用。我需要为折叠的 FrameworkElement 设置动画，这是不知道 ActualHeight 值的类似问题。

```
 element.Visibility = Visibility.Visible;
    element.InvalidateArrange();
    element.UpdateLayout();

    double elementHeight = element.DesiredSize.Height;
    DoubleAnimation animation = new DoubleAnimation(0, elementHeight, TimeSpan.FromMilliseconds(animMilisec));
    element.BeginAnimation(Rectangle.HeightProperty, animation); 
```

现在在渲染元素之前，我可以访问它的最终高度；

# django - Django 自定义用户模型认证

> ID：10312772
> 
> 赞同：4
> 
> 时间：2012-04-25T09:22:53.313
> 
> 标签：django, django-admin, django-authentication

因为我没有使用来自 Django 的 Auth User，所以我有自己的模型 CustomUser，我想通过这个模型在现场进行身份验证（CustomUser 不从 User 模型继承，并且根本不相关）。

```
class CustomUser(models.Model):
    password = models.CharField(max_length = 40)
    email = models.EmailField(max_length = 72, unique = True)
    #stuff... 
```

我检查了[https://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend](https://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend)，我不明白的主要是：

```
from django.contrib.auth.models import User 
```

如果我想使用我的 CustomUser，我需要导入 Django 用户吗？

我找不到一个很好的教程来解释如何在没有标准身份验证用户的情况下使用 Django。

***编辑：我知道我可以使用 User 进行扩展。但我就是不想那样。问题不在于：使用用户和存储附加信息等的最佳方式是什么。不过我很感激。但是我如何在不使用身份验证用户的情况下使用自定义用户。即使我没有理由这样做。***

如果可能的话，我想知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:34:46.950

整个 Django 身份验证系统与 紧密耦合`django.contrib.auth.models.User`，因此您应该在后端使用它。引用[Django 文档](https://docs.djangoproject.com/en/dev/topics/auth/#writing-an-authentication-backend)

> > 目前，处理这个问题的最好方法是为后端存在的每个用户创建一个 Django User 对象

但这里的主要问题是：你的有什么特别之处`CustomUser`以至于你不能用普通`User`模型实现（可以扩展）？在 99% 的情况下，使用`User`是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T19:04:55.390

也许这回答了你的问题：

来自“ [https://docs.djangoproject.com/en/1.6/topics/auth/customizing/#substituting-a-custom-user-model](https://docs.djangoproject.com/en/1.6/topics/auth/customizing/#substituting-a-custom-user-model) ”：

> 替换自定义用户模型 Django 1.5 中的新功能。某些类型的项目可能有身份验证要求，而 Django 的内置用户模型并不总是合适的。例如，在某些网站上，使用电子邮件地址而不是用户名作为您的标识令牌更有意义。
> 
> Django 允许您通过为引用自定义模型的 AUTH_USER_MODEL 设置提供值来覆盖默认用户模型：
> 
> AUTH_USER_MODEL = 'myapp.MyUser' 这个点对描述了 Django 应用程序的名称（必须在您的 INSTALLED_APPS 中），以及您希望用作用户模型的 Django 模型的名称。

当然，需要考虑一些必要的警告（可在上面的链接中找到），但这看起来是您问题的一个很好的答案：[https ://docs.djangoproject.com/en/1.6/ref/settings/#auth-用户模型](https://docs.djangoproject.com/en/1.6/ref/settings/#auth-user-model)

还有一些自定义模型合规性期望需要考虑（这里列出的太多了）：[https ://docs.djangoproject.com/en/1.6/topics/auth/customizing/#specifying-a-custom-user-model](https://docs.djangoproject.com/en/1.6/topics/auth/customizing/#specifying-a-custom-user-model)

除非 AUTH_USER_MODEL 可以有多个值（我怀疑这是理智的），否则我认为我需要构建自己的自定义身份验证后端：[https ://docs.djangoproject.com/en/1.6/topics/auth/定制/#writing-an-authentication-backend](https://docs.djangoproject.com/en/1.6/topics/auth/customizing/#writing-an-authentication-backend)

我希望这可以帮助任何其他需要不同用户和设备身份验证方案的迷失灵魂（可能是因为一些预先存在的规范使本来可以很容易的事情变得混乱）。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:01:20.307

看看这篇文章。

> 除了 contrib.auth.models.User 模型保存的标准名称和电子邮件地址之外，我从事的大多数 Django 项目都需要存储有关每个用户的信息。
> 
> 如果您使用修订版 7477（2008 年 4 月 26 日）的主干，您的模型类可以从现有模型类继承。附加字段存储在一个单独的表中，该表链接到基本模型的表。当您检索模型时，查询使用连接从它和基本模型中获取字段。

[http://scottbarnham.com/blog/2008/08/21/extending-the-django-user-model-with-inheritance/](http://scottbarnham.com/blog/2008/08/21/extending-the-django-user-model-with-inheritance/)

还有这个帖子。

> 将 auth 应用程序复制到您自己的项目中并根据您的需要进行修改。这避免了一些维护麻烦，但首先删除了 Django 捆绑身份验证系统的实用程序。它还可能导致与期望 User 模型位于 django.contrib.auth 中的其他应用程序的兼容性问题。

[http://www.b-list.org/weblog/2006/jun/06/django-tips-extending-user-model/](http://www.b-list.org/weblog/2006/jun/06/django-tips-extending-user-model/)

# php - CodeIgniter 500 内部服务器错误和空白页

> ID：10312773
> 
> 赞同：2
> 
> 时间：2012-04-25T09:23:01.780
> 
> 标签：php, codeigniter, iis, iis-7

我刚刚将我的 CodeIgniter 应用程序部署到实时 Windows ISS7 服务器上，尝试访问我的根页面，但我得到的只是空白。Firebug 告诉我这是一个“500 内部服务器错误”。

该站点在我的开发服务器（linux）上运行良好。

当我在 index.php 中回显“hello”时，它会显示文本，这表明服务器不会加载控制器。

不幸的是，我没有使用 Windows 服务器的经验，使用它不是我的选择！如何访问某种错误日志？

关于我如何至少看到问题所在的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:25:55.417

使用以下行查找 php 错误日志文件所在的位置：

```
phpinfo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:38:29.417

**回答**

对不起，这太荒谬了。我关闭了 PHP 错误，感谢 adrien 的灵感来查看 PHP 信息。

错误是一个 SVN 冲突，它在我的数据库文件中写入了 < < < mine etc。

对不起，这么简单的错误。谢谢。

# c# - Rest API 基本认证

> ID：10312775
> 
> 赞同：0
> 
> 时间：2012-04-25T09:23:10.780
> 
> 标签：c#, rest, asp.net-web-api

当客户端尝试使用基本身份验证登录 API 时，服务器返回 API 密钥和共享密钥是否可以？例如，如果用户输入此链接[http://api.example.com/authorize?auth=some_encoded_Base64_string](http://api.example.com/authorize?auth=some_encoded_Base64_string)，则响应将是：

```
Content-Type: application/xml
Date: Fri, 10 Nov 2006 20:04:45 GMT    
Transfer-Encoding: chunked
Authorization: apiKey;secretKey 
```

使用这种方法会有问题吗？我想成为这样，因为 API 核心方法将只接受 APIKey 哈希，并且为了获得它们需要使用基本身份验证，因为它们是第一步。我暂时不会在这里使用 OAuth。

我正在为这个项目试用新的 ASP.NET Web API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:52:34.063

HTTP 没有`Authorization`在响应中定义标头，因此如果您需要定义自定义标头，请使用`X-`前缀。

同样从设计角度来看，HTTP 标头将传递与调用*正交的数据。*您似乎正在尝试传递需要在有效负载中的一段数据，因此我会避免使用标头。

我会在有效载荷中传递这些数据。

如果您使用 SSL 并在 URL、HTTP 标头或有效负载中传递数据，它将是安全的。

# c# - 如何忽略构造函数中的调用函数？

> ID：10312776
> 
> 赞同：0
> 
> 时间：2012-04-25T09:23:13.010
> 
> 标签：c#, unit-testing, rhino-mocks

我有构造函数调用构造函数中的函数的类。当我为这个类创建模拟时，函数会从构造函数中调用。我想阻止函数调用。我可以做吗？

示例代码：

```
public class Foo
{
    public Foo()
    {
        Initialize();
    }

    private void Initialize()
    {
        //some code
    }
}

[TestFixture]
public class Test
{
    [Test]
    public void Test_Foo()
    {
        Foo foo = MockRepository.GenerateMock<Foo>(); 

        //some test
    }
} 
```

笔记：

1.  我不想添加接口，比如`Foo : IFoo`.
2.  我不想添加第二个构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:15:15.390

当你模拟一个类时，会创建一个代理（Rhino 使用 Castle.DynamicProxy.DefaultProxyBuilder），它继承自你的类。继承的工作方式与 C# 中的任何地方完全一样。创建派生类型的实例时，会调用所有基类型的构造函数（直到对象）。

因此，当创建代理实例时（通过 Activator.CreateInstance(typeof(proxy))），Foo 的构造函数也将被调用。你无法避免这一点。您可以使用接口模拟，或向构造函数提供一些参数来禁用初始化。

顺便说一句，模拟抽象类或具体类会扼杀模拟的所有优势——您的测试变得依赖于未模拟的*东西*（构造函数、非虚拟方法和默认实现）。您的 SUT（被测系统）不再单独进行测试。损坏的测试可能是抽象类或具体类中的一些更改的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:34:09.057

如何添加布尔标志

布尔标志 = 假；

[测试]

```
public void Test_Foo()
{
     if(flag == true)
     {
      Foo foo = MockRepository.GenerateMock<Foo>(); 

     }
    //some test
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:32:15.723

通常，您只能创建接口或抽象类的模拟。

你要测试什么？如果它是 Foo 类，那么创建它的模拟是完全错误的。

通常，您创建测试类的那些难以设置或需要很长时间运行的依赖项的模拟。这种依赖关系的最常见示例是存储库或 Web 服务。

# linux - 为命令运行设置 LD_PRELOAD 环境变量而无需输入完整路径

> ID：10312787
> 
> 赞同：4
> 
> 时间：2012-04-25T09:23:48.617
> 
> 标签：linux, bash, environment-variables, ld-preload

我正在使用 LD_PRELOAD 并生成了一个库，该库仅将 puts() 包装在一个函数中，该函数在打印之前将要打印的字符串转换为大写。然后我像这样导出 LD_PRELOAD 变量

```
$ export LD_PRELOAD=/home/adrian/test/myputs.so 
```

现在运行命令时行为按预期工作

```
$ /bin/pwd
/HOME/ADRIAN/TEST 
```

但是这样运行时不起作用

```
$ pwd
/home/adrian/test 
```

在这种情况下导致 LD_PRELOAD 环境变量被忽略的机制是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:27:40.657

因为`pwd`is `shell builtin command`-see`man bash`或[docs here](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Builtins)。所以如果你写

```
$ pwd 
```

然后启动内置命令。如果你告诉它路径，它将执行 ELF 二进制文件并使用 LD_PRELOAD。

# java - java：字符串索引超出范围

> ID：10312794
> 
> 赞同：2
> 
> 时间：2012-04-25T09:24:16.913
> 
> 标签：java, eclipse, sockets

我正在尝试学习如何使用套接字，我写了一个小型回声服务器。我在 eclipse 上运行代码，然后我转到命令提示符并 telnet 到端口，它应该回显，但它却给了我这个错误：

```
Exception in thread "Thread-0" java.lang.StringIndexOutOfBoundsException: String index out of range: 20
    at java.lang.String.getChars(Unknown Source)
    at java.io.BufferedWriter.write(Unknown Source)
    at echoserver.run(echoserver.java:40) 
```

这是我的代码：

```
public final class echoserver extends Thread {
private static final int PORT = 8889;
public static void main(String args[]){
    echoserver Echoserver = new echoserver();
    if (Echoserver != null){
        Echoserver.start();
    }
}
public void run (){
    try {

    ServerSocket server = new ServerSocket(PORT , 1);
    while (true) {
        Socket client =server.accept();
        System.out.println("Client connected");
        while (true){
            BufferedReader reader =
                    new BufferedReader(new InputStreamReader(
                        client.getInputStream()));
            System.out.println("Read from client");
            String textLine = reader.readLine() + "\n";
            if (textLine.equalsIgnoreCase("Exit\n")){
                System.out.println("exit invoked, closing client");
                break;
            }
            BufferedWriter writer = new BufferedWriter(
                    new OutputStreamWriter(
                            client.getOutputStream()));
            System.out.println("Echo input to client");
            writer.write("echo from server:"
                    + textLine, 0 , textLine.length() + 18);
            writer.flush();
        }
        client.close();
    }
}   catch(IOException e){
        System.err.println(e);
    }
}
} 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:26:07.363

这就是问题：

```
writer.write("echo from server:" + textLine, 0 , textLine.length() + 18); 
```

您的“额外文本”实际上是*17 个*字符，而不是 18 个。您不需要指定偏移量和长度 - 您可以使用：

```
writer.write("echo from server:" + textLine); 
```

# javafx-2 - 提交后台作业并使用结果更新阶段

> ID：10312796
> 
> 赞同：3
> 
> 时间：2012-04-25T09:24:23.427
> 
> 标签：javafx-2

我是 JavaFX 2 的完全菜鸟 - （今天早上开始使用我正在适应的 HelloWorld）。

我需要使用后台线程的结果更新文本节点。JavaFX2 有什么特别需要注意的吗，或者提交一个可调用文件并更新文本就足够了。指向教程的指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T11:13:39.583

计算结果后，运行

```
 Platform.runLater(new Runnable() {
            @Override
            public void run() {
                // Update the text node with calculated results
            }
       }); 
```

在正常情况下，在同一后台线程结束时就足够了。此链接也可能有帮助：
[Execute task in background in JavaFX](https://stackoverflow.com/q/9165251/682495)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:03:43.347

`Platform.runLater()`稍后将在 JavaFX 应用程序线程上运行 - 如果执行的内容是一个快速运行的任务（例如，没有 I/O 的廉价计算或只是更新 UI 的调用），这很好。将[时间轴](http://docs.oracle.com/javafx/2.0/api/javafx/animation/Timeline.html)用于基于动画或计时器的事物。否则，基于[任务](http://docs.oracle.com/javafx/2.0/api/javafx/concurrent/Task.html)或[服务](http://docs.oracle.com/javafx/2.0/api/javafx/concurrent/Service.html)的解决方案，有一个[教程](http://docs.oracle.com/javafx/2.0/threads/jfxpub-threads.htm)。永远不要从 JavaFX 应用程序线程之外的活动场景图（甚至是由绑定触发的更新）中读取或写入对象。[此论坛主题](https://forums.oracle.com/forums/thread.jspa?threadID=2308759)中有一些进一步的讨论和示例。

# excel - 隐藏模块中的编译错误

> ID：10312800
> 
> 赞同：0
> 
> 时间：2012-04-25T09:24:28.953
> 
> 标签：excel, excel-2007, vba

当我尝试在启用宏的工作表上进行一些活动时，我遇到了这个问题。

```
Error: Compile error in Hidden Module: SHEET 7 
```

有人可以指导应该做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T16:07:56.077

我刚刚解决了这个问题，也许它也会帮助你：

转到文件夹“C:\Program Files (x86)\Microsoft Office\Office12\XLSTART”并确保该文件夹内没有任何内容。

我的情况是Office12，也许你的情况是Office14或其他号码，做同样的事情，如果没有这个文件夹，你不在乎。

希望它有效。

# java - JAVA JSch与CISCO设备65XX路由器连接

> ID：10312802
> 
> 赞同：2
> 
> 时间：2012-04-25T09:24:42.563
> 
> 标签：java, rsa, aes, cisco, jsch

我想使用 JSch 构建一个远程程序来远程 CISCO 设备。但我现在面临一个问题，无法打开与 session.connect() 的连接。从日志中它说我的 RSA 必须有 512 长。但我不知道怎么做。我在网上找到了很多例子。但我仍然找不到任何参考。有人可以帮我吗？

## 下面是我的代码

```
public static boolean registerKeyPair(JSch jSch) {             
    new File("c:\\hehe" + "/.ssh").mkdirs();

    File privateKey = new File("c:\\hehe" + "/.ssh/id_rsa");
    File publicKey = new File("c:\\hehe" + "/.ssh/id_rsa.pub");
    if (!privateKey.exists() || !publicKey.exists()) {          
        try {

            KeyPair keyPair = KeyPair.genKeyPair(jSch, KeyPair.RSA,512);
            //KeyPair.
            keyPair.writePrivateKey(privateKey.getAbsolutePath());
            keyPair.writePublicKey(publicKey.getAbsolutePath(), "hehekey");
            return true;
        } catch (JSchException e) {
            System.out.println("genKeyPair(RSA)");
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            System.out.println("genKeyPair(RSA)");
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("genKeyPair(RSA)");
            e.printStackTrace();
        }
        return false;           
    }       

    try {
        jSch.addIdentity(privateKey.getAbsolutePath());
        return true;
    } catch (JSchException e) {
        System.out.println("jSch.addIdentity");
        e.printStackTrace();
        return false;           
    }

}
public static void test() {
    JSch jsch = new JSch();
    JSch.setLogger(new Logger() {
        public boolean isEnabled(int i) {
            return true;
        }
        public void log(int i, String s) {
            System.out.println("Log(jsch," + i + "): " + s);
        }});
    registerKeyPair(jsch);
    String privateKey = "c:\\hehe" + "/.ssh/id_rsa";
    @SuppressWarnings("unused")
    String publicKey = "c:\\hehe" + "/.ssh/id_rsa.pub";
    try {

        Session session = jsch.getSession("cisco", "10.20.30.129", 22);

        jsch.addIdentity(privateKey,"cisco");

        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);

        session.connect(30000);

        System.out.println("A4");
        ChannelShell channel = (ChannelShell) session.openChannel("shell");
        System.out.println("A5");

        System.out.println("A6");
        channel.connect();
    } catch (JSchException ex) {
        System.out.println(ex.getMessage() + "\n");
        ex.printStackTrace();
    } catch (Exception e) {

    }
} 
```

* * *

控制台输出如下

```
Log(jsch,1): Connecting to 172.22.96.129 port 22
Log(jsch,1): Connection established
Log(jsch,1): Remote version string: SSH-2.0-Cisco-1.25
Log(jsch,1): Local version string: SSH-2.0-JSCH-0.1.47
Log(jsch,1): CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256
Log(jsch,1): aes256-ctr is not available.
Log(jsch,1): aes192-ctr is not available.
Log(jsch,1): aes256-cbc is not available.
Log(jsch,1): aes192-cbc is not available.
Log(jsch,1): arcfour256 is not available.
Log(jsch,1): CheckKexes: diffie-hellman-group14-sha1
Log(jsch,1): diffie-hellman-group14-sha1 is not available.
Log(jsch,1): SSH_MSG_KEXINIT sent
Log(jsch,1): SSH_MSG_KEXINIT received
Log(jsch,1): kex: server: diffie-hellman-group1-sha1
Log(jsch,1): kex: server: ssh-rsa
Log(jsch,1): kex: server: aes128-cbc,3des-cbc,aes192-cbc,aes256-cbc
Log(jsch,1): kex: server: aes128-cbc,3des-cbc,aes192-cbc,aes256-cbc
Log(jsch,1): kex: server: hmac-sha1,hmac-sha1-96,hmac-md5,hmac-md5-96
Log(jsch,1): kex: server: hmac-sha1,hmac-sha1-96,hmac-md5,hmac-md5-96
Log(jsch,1): kex: server: none
Log(jsch,1): kex: server: none
Log(jsch,1): kex: server: 
Log(jsch,1): kex: server: 
Log(jsch,1): kex: client: diffie-hellman-group1-sha1,diffie-hellman-group-exchange-sha1
Log(jsch,1): kex: client: ssh-rsa,ssh-dss
Log(jsch,1): kex: client: aes128-ctr,aes128-cbc,3des-ctr,3des-cbc,blowfish-cbc
Log(jsch,1): kex: client: aes128-ctr,aes128-cbc,3des-ctr,3des-cbc,blowfish-cbc
Log(jsch,1): kex: client: hmac-md5,hmac-sha1,hmac-sha1-96,hmac-md5-96
Log(jsch,1): kex: client: hmac-md5,hmac-sha1,hmac-sha1-96,hmac-md5-96
Log(jsch,1): kex: client: none
Log(jsch,1): kex: client: none
Log(jsch,1): kex: client: 
Log(jsch,1): kex: client: 
Log(jsch,1): kex: server->client aes128-cbc hmac-md5 none
Log(jsch,1): kex: client->server aes128-cbc hmac-md5 none
Log(jsch,1): SSH_MSG_KEXDH_INIT sent
Log(jsch,1): expecting SSH_MSG_KEXDH_REPLY
Log(jsch,1): Disconnecting from 10.20.30.129 port 22
Session.connect: java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: RSA keys must be at least 512 bits long

com.jcraft.jsch.JSchException: Session.connect: java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: RSA keys must be at least 512 bits long
    at com.jcraft.jsch.Session.connect(Session.java:525)
    at jsch_test.test(jsch_test.java:82)
    at jsch_test.main(jsch_test.java:11) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-06T11:43:51.330

您必须在客户端和 CISCO 端创建大于 512 位的密钥

客户端：

```
ssh-keygen -b 1024 
```

思科方面：

```
crypto key generate rsa general-keys label SSH-KEYS exportable modulus 1024
ip ssh rsa keypair-name SSH-KEYS 
```

# php - 编码用户选择日期重复出现的界面

> ID：10312803
> 
> 赞同：3
> 
> 时间：2012-04-25T09:24:42.977
> 
> 标签：php, jquery, calendar, frequency, frequency-distribution

我需要创建一个界面，用户需要选择他的杂志/报纸分发多少次。一些杂志/报纸得到分发

*   一周几次。
*   一个月几次：--按天（例如每隔一个星期二）或按日期（例如在 1 日、10 日和 28 日）
*   一年几次。

选择频率后，我需要为每个频率项添加附加信息。例如，如果用户在星期一和星期五选择每周，我需要为星期一添加附加信息，并为星期五添加单独的信息。

有人对如何做到这一点有任何想法吗？或者我可以在哪里阅读更多内容或获取一些示例？

我为此应用程序使用 PHP 和 javascript/jquery。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:21:58.107

您需要向最终用户询问一系列问题，并使用 jquery 显示下一组问题以获取下一组结果等

# python - 如何在pydot或networkx中的一组节点周围绘制一个框

> ID：10312804
> 
> 赞同：4
> 
> 时间：2012-04-25T09:24:43.310
> 
> 标签：python

我使用 pydot 和 networkx 来构建和显示我的图表。我有两个问题：

1.  如何区分具有相似名称的节点？例如，有两个具有不同值的节点，但我想在我的图中用“node_x”显示它们。

2.  如何在图表中的一组节点周围绘制一个矩形？

# javascript - 如何防止在 HTML5 网页中滚动？

> ID：10312809
> 
> 赞同：1
> 
> 时间：2012-04-25T09:25:08.187
> 
> 标签：javascript, ios, html

如何停止在 HTML5 网页中滑动和滚动？我没有为此使用任何脚本，但仍然可以滚动。如果重要的话，我正在使用 jQuery。这是我正在使用的 HTML 代码：

```
<!DOCTYPE HTML>  
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>BRD</title>
        <link rel="shortcut icon" type="image/ico" href="images/favicon.gif" /> 
        <link rel="apple-touch-icon" href="icon.png"/>
        <link type="text/css" href="newstyle.css" rel="stylesheet" />
        <script src="js/jquery-1.7.2.min.js"></script>
        <script src="js/jquery-ui-1.8.18.custom.min.js"></script>

        <script language="javascript" type="text/javascript">  
            function showHideDiv() { 
                document.getElementById("one").style.visibility = "visible"; 
                document.getElementById("two").style.visibility = "visible"; 

                document.getElementById("three").style.visibility = "hidden"; 
                document.getElementById("four").style.visibility = "hidden"; 

                document.getElementById("radioone").style.visibility = "visible";
                document.getElementById("radiotwo").style.visibility = "hidden";
            } 
        </script>    

        <script language"javascript" type="text/javascript">
            $(document).ready(function(){
                $(".text_paragraph").fadeIn();
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:58:51.913

你是说翻页吗？下面的 JavaScript 应该做到这一点：

```
document.ontouchmove = function(event){
             event.preventDefault();
} 
```

# objective-c - 将对象从一个应用程序转移到另一个应用程序

> ID：10312811
> 
> 赞同：2
> 
> 时间：2012-04-25T09:25:15.403
> 
> 标签：objective-c, macos

有没有办法将对象从一个应用程序转移到另一个应用程序？我的意思是这样的：

//第一个应用程序：

```
- (void)someFunction{
myClass *myObj = [[myClass alloc] init]

//do some work...

[self runSecondAppWithObj:myObj];
} 
```

//第二个应用程序：

```
int main (int argc, const char * argv[])
{
    @autoreleasepool {
        myClass *obj = //get obj from firstApp
        //do some another work...
    }
    return 0;
} 
```

myClass 不是那么简单，为什么我不能用 NSString -> char 传输所有信息。我也需要第二个应用程序中的第一个对象，而不是它的副本。

我想它像：第一个应用程序启动第二个应用程序，然后第一个应用程序与第二个应用程序交谈：“嘿，#adr 是变量（指针）的地址，去拿它”。之后，第二个应用程序获取变量（指针）及其地址。但我不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:04:31.780

我立即想到了两个选项（我建议实施第一个选项）：

1.  **使`myClass`可序列化**：这里的基本思想是您实现`NSCoding`协议，然后将`NSKeyedArchiver`其用于将其序列化为`NSDictionary`. 然后可以轻松地将字典转换为可互换的格式，例如 plist (XML)。然后，您将 XML 文本传递给您的第二个应用程序，并在那里使用`NSDictionary`and反序列化它`NSKeyedUnarchiver`。您可以在 Apple 的开发人员文档中找到有关[Cocoa 中归档和序列化的](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)良好指南和示例。

2.  **使用一些进程间通信机制传递对象**：这有点复杂，我宁愿将它推荐给持续相互通信的应用程序——而不是仅仅在启动时将对象传递给另一个应用程序。一种方法是使用[分布式对象](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DistrObjects/DistrObjects.html)。这使您能够在进程之间甚至在不同的物理机器之间共享对象，就好像它们是本地的一样（有一些限制）。例如，要在您的第一个应用程序中共享对象，您可以这样做：

    ```
    NSConnection *connection = [[NSConnection connectionWithReceivePort:[NSPort port]] sendPort:nil];
    [connection setRootObject:theObject];
    [connection registerName:@"com.example.whatever"]; 
    ```

    然后在第二个应用程序中，您将调用：

    ```
    id theObject = (id)[NSConnection rootProxyForConnectionWithRegisteredName:@"com.example.whatever" host:nil];
    [theObject someMethod]; 
    ```

# python - 尝试通过 easy_install 安装 mercurial

> ID：10312812
> 
> 赞同：0
> 
> 时间：2012-04-25T09:25:15.430
> 
> 标签：python, review-board

我在 Windows XP（所有 x86）上使用 Active Python 2.5.1、Mercurial 1.8.1 和 TortoiseHg 1.1.0 我正在尝试在评论板中配置一个 mercurial 存储库。为此，它需要 mercurial python 模块所以当我尝试通过 easy_install 安装 mercurial 时，出现以下错误

```
C:\>easy_install mercurial==1.8.1
Searching for mercurial==1.8.1
Reading http://pypi.python.org/simple/mercurial/
Reading http://mercurial.selenic.com/
Reading http://www.selenic.com/mercurial
Reading http://mercurial.selenic.com/release/
Best match: mercurial 1.8.1
Downloading http://mercurial.selenic.com/release/mercurial-1.8.1.tar.gz
Processing mercurial-1.8.1.tar.gz
Running mercurial-1.8.1\setup.py -q bdist_egg --dist-dir c:
\docume~1\username\locals~1\temp\easy_install-7l0ykf
\mercurial-1.8.1\egg-dist-tmp-egcnt6

cc1.exe: error: unrecognized command line option '-mno-cygwin'
error: Setup script exited with error: command 'gcc' failed with exit
status 1 
```

我已经通过 MinGW 安装了 gcc

* * *

谢谢 shu zOMG chen，1.8.1 是一个要求，所以不能真正改变它。第二个链接确实有帮助，但现在还有另一个问题。从 distutils\cygwinccompiler.py 中删除 -mno-cygwin 出现后，我运行了 easy_install mercurial==1.8.1。跟踪如下：

```
C:\>easy_install mercurial==1.8.1
Searching for mercurial==1.8.1
Reading http://pypi.python.org/simple/mercurial/
Reading http://mercurial.selenic.com/
Reading http://www.selenic.com/mercurial
Reading http://mercurial.selenic.com/release/
Best match: mercurial 1.8.1
Downloading http://mercurial.selenic.com/release/mercurial-1.8.1.tar.gz
Processing mercurial-1.8.1.tar.gz
Running mercurial-1.8.1\setup.py -q bdist_egg --dist-dir c:\docume~1\username\locals~1\temp\easy_install-05el_6\mercurial-1.8.1\egg-dist-tmp-zsfye0

gcc: error: CreateProcess: No such file or directory
error: Setup script exited with error: command 'gcc' failed with exit status 1

C:\> 
```

请帮助问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:29:20.617

在[https://www.mercurial-scm.org/downloads](https://www.mercurial-scm.org/downloads)也有适用于 Windows 的 exe 和 msi 安装程序。

在我看来，TortoiseXXX 改变了包装器背后的心理图景。当使用 TortoiseCVS 时，我很难向我的同事解释如何正确使用 CVS。

题外话：为了您自己的其他目的，也可以尝试使用 Git ( [http://git-scm.com/](http://git-scm.com/) ) 这个想法非常相似。我猜 Git 会在统计上获胜。

msysgit (Windows) 不错，功能与原始 Linux 相当，包含的 Git Gui 和 gitk 可能看起来很奇怪（Tcl/Tk），但它们非常适合基本的 Git 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:18:26.917

从您的输出看来，easy_install 正在尝试使用需要一些 cygwin 部件的选项来构建 mercurial。如果您使用的是 mingw gcc，您可能需要查看[https://www.mercurial-scm.org/wiki/BuildingOnWindows](https://www.mercurial-scm.org/wiki/BuildingOnWindows)以获取有关如何在 Windows 中构建的说明。

您使用 1.8.1 有什么原因吗？最新版本是 2.1.2。

谷歌搜索，[用 cython 和 mingw 编译会产生 gcc: error: unrecognized command line option '-mno-cygwin'](https://stackoverflow.com/questions/6034390/compiling-with-cython-and-mingw-produces-gcc-error-unrecognized-command-line-o)也可以帮助你。

# ios - 是否可以在 iOS 中使用带有插件的应用程序？

> ID：10312816
> 
> 赞同：0
> 
> 时间：2012-04-25T09:25:23.350
> 
> 标签：ios, plugins

我只想知道我可以制作一个包含一些插件的应用程序，当用户安装该应用程序时，一些插件也会安装吗？例如，我制作了一个包含一些表情符号的插件，当我打开 Facebook 应用程序时，所有表情符号都可以在该应用程序和我的应用程序中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:27:16.043

我仍然研究的是，您不能为想要更改或访问操作系统级别的 iphone 做任何事情。所以这对 iOS 来说是不可能的。但这对于 JailBreak 来说是有可能的

# .net - 具有“无效”值的 WPF 控件

> ID：10312820
> 
> 赞同：1
> 
> 时间：2012-04-25T09:25:32.670
> 
> 标签：.net, wpf, .net-4.0, dependency-properties

我正在创建一个自动完成框，它使用有效值列表（对象，而不是字符串）。对象直接绑定，框（文本框和下拉部分）使用 DisplayMemberPath 来确定要显示为文本的内容。

我希望用户能够输入文本 - 如果文本与有效值之一不匹配，我希望它保留在框中并在视觉上被标记为无效。

现在，当我绑定到视图模型时，显然我需要为这个无效值设置一些东西。我尝试将值设置为 DependencyProperty.UnsetValue。这将作为 null 返回给 VM。

如果我以后想“清除”我的表单，我将 VM 属性设置为 null，但当然这不会过滤到控件，因为值没有改变。

我本来希望 Property 系统注意到新值为 null 而旧值为 UnsetValue 并因此触发该事件。

我错过了什么明显的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:28:23.383

您可以为无效值创建自己的标记对象，而不是设置对 WPF 框架具有特殊含义的 DependencyProperty.UnsetValue，例如

```
public static Object Dummy = new Object(); 
```

您可能应该使用与有效值相同的类，而不是 Object。现在，当您重置 VM 时，该值将真正改变，WPF 会注意到差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:59:46.860

一种简单且独立于验证框架的方法是让 VM 完成工作。

例如

```
public class MyVM : MyBaseVM
{
    private ObservableCollection<Object> _items
        = new ObservableCollection<Object>();
    public ObservableCollection<Object> Items
    {
        get
        {
            return _items;
        }
    }

    private string _text;
    public string Text
    {
        get
        {
            return _text;
        }
        set
        {
            _text = value;
            Validate();

            if (_isValid)
                _model.Text = value;

            NotifyPropertyChanged("Text");
        }
    }

    private bool _isValid = true;
    public bool IsValid
    {
        get
        {
            return _isValid;
        }
        private set
        {
            _isValid = value;
            NotifyPropertyChanged("IsValid");
        }
    }

    private void Validate()
    {
        IsValid = _items.Any(i =>
            i.ToString().ToLower() == _text.ToLower().Trim());
    }
} 
```

# linux - 如何在Linux上使用while检查2个条件

> ID：10312822
> 
> 赞同：0
> 
> 时间：2012-04-25T09:25:35.010
> 
> 标签：linux

当我做：

```
while [ $choice != 'X' ]
do 
```

它有效，但当我这样做时

```
while [ $choice != 'x' ] || [ $choice != 'X' ]
do 
```

它们都不起作用。

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:27:35.067

`man test`

> ```
>  EXPRESSION1 -o EXPRESSION2
>       either EXPRESSION1 or EXPRESSION2 is true 
> ```

```
 while [ $choice != 'x' -o $choice != 'X' ] 
```

请注意，此表达式始终为真，您想要`and`:`-a`吗？

如果你用它替换`||`它`&&`也会工作..

# html - 如何在窗口托管中将文件夹更改为子域？

> ID：10312829
> 
> 赞同：1
> 
> 时间：2012-04-25T09:25:50.217
> 
> 标签：html, .htaccess

我必须通过谷歌博客点创建一个博客。但现在我必须创建一个 word press 博客……现在我必须删除 blog spot 帐户……并且还要创建一个同名的子域“blog”，但目前 Google blog spot 无法正常工作正在显示。

我还以其他名称创建了一个文字新闻博客……现在我想要任何人打开……

> www.domain-name.com/文件夹名

那么这将自动将 URL 更改为

> 文件夹名称.域名.com

# iphone - 如何从 iPhone 测试用户网络速度？

> ID：10312832
> 
> 赞同：6
> 
> 时间：2012-04-25T09:25:58.550
> 
> 标签：iphone, objective-c, networking

> **可能重复：**
> [计算连接/下载速度](https://stackoverflow.com/questions/370641/calculating-connection-download-speed)

我将数据放在 3 个服务器上以供应用程序使用。我想用户根据他们的网络连接从最快的服务器加载数据。所以我需要测试用户到我的服务器的网络连接速度。有什么方法可以测试 iPhone 的用户网络速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:35:15.530

最后，我找到了一个解决方案，并且效果很好。

我在每台服务器上放了一个小的静态文件，例如[https://www.google.com/images/icons/product/chrome-48.png](https://www.google.com/images/icons/product/chrome-48.png)，然后从每台服务器下载文件并计算花费的时间（[计算连接/下载速度](https://stackoverflow.com/questions/370641/calculating-connection-download-speed)是计算速度的好方法，感谢@Antonio MG），然后将最快的服务器主机保存为`NSUserDefaults`. 在应用程序从服务器加载数据之前，将请求 url 主机替换为最快的主机。

当应用程序启动时`applicationWillEnterForeground:`，执行网络速度测试。现在，每次应用程序加载数据都使用刚刚计算的最快的服务器。

希望这可以帮助那些需要它的人。

# javascript - 设置 jQuery UI 对话框按钮 ID？

> ID：10312835
> 
> 赞同：22
> 
> 时间：2012-04-25T09:26:18.790
> 
> 标签：javascript, jquery, jquery-ui

是否可以在 jQuery UI 对话框中设置按钮的 ID，以便稍后通过 jQuery 引用它们？例如，触发事件、禁用等？

```
... in the dialog setup ...
buttons: {               
    "Sök": function () {
        var bValid = true;
    },
    "OK": function () {
        if (OK()) {
            getStuffNoteringar($("#txtStuffId").val());
            $(this).dialog("close");
        }
    }

.... later on in some javascript code....

$('#OK').click(); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-25T09:33:24.623

```
$("#myDialog").dialog({
  buttons :  { 
     "MyButton" : {
         text: "OK",
         id: "okbtnid",
         click: function(){
             var bValid = true;
         }   
      } 
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:36:16.793

或者您可以将其作为数组进行：

```
$("#myDialog").dialog({
   buttons :  [{ 
     text: "OK",
     id: "ok",
     click: function(){
         alert("clicked");
     }   
   }]
}); 
```

[http://docs.jquery.com/UI/Dialog](http://docs.jquery.com/UI/Dialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:33:08.723

不是通过您想要的方式，因为 API 不提供这些选项，但是如果您查看对话框生成的标记，您应该能够获取您需要的任何元素并根据需要绑定它们或向它们添加 id。这是文档页面 (http://jqueryui.com/demos/dialog/) 中的标记

```
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable">
   <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
      <span id="ui-dialog-title-dialog" class="ui-dialog-title">Dialog title</span>
      <a class="ui-dialog-titlebar-close ui-corner-all" href="#"><span class="ui-icon ui-icon-closethick">close</span></a>
   </div>
   <div style="height: 200px; min-height: 109px; width: auto;" class="ui-dialog-content ui-widget-content" id="dialog">
      <p>Dialog content goes here.</p>
   </div>
</div> 
```

如果它是模态内容中的按钮，那么您可以在模态元素上下文中进行 CSS 查询并以这种方式访问​​它们。

# android - 在android安装过程中扫描应用程序

> ID：10312838
> 
> 赞同：0
> 
> 时间：2012-04-25T09:26:38.867
> 
> 标签：android

我只想要一个可以扫描安装应用程序并根据包名称决定是否拒绝安装过程的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:48:27.313

幸运的是，出于明显的安全原因，这是不可能的。如果恶意软件作者可以阻止安装其他应用程序，他们会非常喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:50:48.423

您想要一个可以自我检查完整性的应用程序吗？或检查任何其他新应用程序的应用程序？

在前者上，我建议在检查这一点的主要活动上放置一些代码。但是，如果您试图拥有某种“反黑客”功能，那将毫无意义，因为只需要删除这些行。

在后者上，这会更复杂，而且，你怎么知道“正确的”包名？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T07:31:06.553

Lookout、McAfee、Avast 等第三方安全应用程序与任何其他 Android 应用程序具有相同的有限权限和功能。也就是说，任何 Android 应用程序都不可能“在中间人”安装应用程序以进行安全检查或任何其他目的。正如其他人所提到的，这会产生负面的安全影响，因为它会允许任何应用程序修改或拒绝安装其他应用程序。

作为第三方应用程序，您可以做的最好的事情是使用广播接收器监视已安装的包，该接收器侦听 android.intent.action.PACKAGE_ADDED 意图，或者在应用程序写入文件系统后使用 FileObserver 触发安全审查。此时，如果您检测到要卸载的应用程序，您仍然需要征求用户的同意才能卸载该应用程序。

FWIW，设备制造商有能力进行低级修改以提供此功能，但我认为这超出了您的情况。

# facebook - 图形 API 返回空白 1x1 像素图像

> ID：10312842
> 
> 赞同：2
> 
> 时间：2012-04-25T09:26:55.623
> 
> 标签：facebook, json, encoding

当我使用 Graph API 从页面获取帖子列表时，包含图像 URL 的图片字段返回一个空白的 1x1 像素图像。

例如，这是它返回的 URL 之一：http: [//www.facebook.com/l.php? u=http%3A%2F%2Fexternal.ak.fbcdn.net%2Fsafe_image.php%3Fd%3DAQBj9y7r5zdKLsTF %26w%3D90%26h%3D90%26url%3Dhttp%5Cu00253A%5Cu00252F%5Cu00252Fwww.thisislondon.co.uk%5Cu00252Fincoming%5Cu00252Farticle7630373.ece%5Cu00252FBINARY%5Cu00252Foriginal%5Cu00252FTZerry-Departmenth.jpg&](http://www.facebook.com/l.php?u=http%3A%2F%2Fexternal.ak.fbcdn.net%2Fsafe_image.php%3Fd%3DAQBj9y7r5zdKLsTF%26w%3D90%26h%3D90%26url%3Dhttp%5Cu00253A%5Cu00252F%5Cu00252Fwww.thisislondon.co.uk%5Cu00252Fincoming%5Cu00252Farticle7630373.ece%5Cu00252FBINARY%5Cu00252Foriginal%5Cu00252FTerry-Deary.jpg&h=GAQEzRMSC)

我还使用页面中的 RSS 提要看到了这一点：[https](https://www.facebook.com/feeds/page.php?id=128931583879163&format=rss20) ://www.facebook.com/feeds/page.php?id=128931583879163&format=rss20除了 URL 的编码略有不同。

我对 stackoverflow 有很好的了解，但没有看到其他人遇到同样的问题。你能告诉我我需要做什么来解码它以获得适当的 URL 吗？

谢谢，格雷戈尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:29:22.413

据 Facebook 开发者网站报道，这是一个错误，适用于[图片](https://developers.facebook.com/bugs/352719024770077)和[视频](https://developers.facebook.com/bugs/358888337475544)。该问题仍在等待 Facebook 的修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-15T02:36:10.243

(MacBook)-我也收到了这个，但只是在我在仪表板页面上时。几秒钟后，仪表板页面会滑到空白的 Facebook 像素页面。这让我抓狂。我终于通过使用代码并在终端上运行它删除了我的仪表板页面，我真的没有使用它。（来自“如何隐藏或禁用仪表板页面）。停靠页面消失了，1x1 像素页面也消失了。我可以随时使用第二个代码恢复停靠页面。

# iphone - 聊天 iOS 应用程序如何通信？

> ID：10312847
> 
> 赞同：8
> 
> 时间：2012-04-25T09:27:09.287
> 
> 标签：iphone, ios, networking, xamarin.ios

Whatsapp 和 Skype 等应用程序中的文本聊天如何通信？具体来说，如何实时*接收消息？*

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T09:32:46.803

这与 iOS 中所谓的 Socket 编程有关。你可以参考苹果开发者文档或者[这个链接](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)可以帮助你解决这个问题。

以下链接实际上会非常有帮助：

[http://blog.scriptico.com/08/iphone-chat-native-rtmp-library-for-ios-in-action/](http://blog.scriptico.com/08/iphone-chat-native-rtmp-library-for-ios-in-action/)

[http://mobile.tutsplus.com/series/building-a-jabber-client-for-ios/](http://mobile.tutsplus.com/series/building-a-jabber-client-for-ios/)

使用 XMPP 的 Whatsapp 也基于套接字编程。

谢谢

# jquery - Jquery onclick 防止默认行为

> ID：10312848
> 
> 赞同：1
> 
> 时间：2012-04-25T09:27:12.530
> 
> 标签：jquery, preventdefault

我正在写一个函数：

```
(function($) {
    $.fn.openBox = function(theId) {
    // do something
    };
})(jQuery); 
```

和几个像这样调用我的函数的链接：

```
<a href="#" onclick="$(this).openBox('#theBoxId');">Open the box !</a> 
```

我知道我可以通过***return false***来防止默认行为：

```
<a href="#" onclick="$(this).openBox('#theBoxId'); return false">Open the box !</a> 
```

但我想把它放在我的 jQuery 函数中......我已经用 event.target 进行了测试，但它似乎不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:29:12.557

您可以`return false;`在插件内部，并在属性*中*`openBox`返回该值；*`onclick`*

 *```
(function($) {
    $.fn.openBox = function(theId) {
        return false;
    };
})(jQuery); 
```

接着：

```
<a href="#" onclick="return $(this).openBox('#theBoxId');">Open the box !</a> 
```

然而，这**远非**理想。jQuery 应该是可链接的；但是通过返回`false`而不是`this`，你不能再做：`$('foo').openBox().trigger('change')`等等。

您***应该做的是以***[*jQuery 方式*](http://api.jquery.com/on)附加事件，捕获[事件对象](http://api.jquery.com/category/events/event-object/)并调用[`preventDefault()`](http://api.jquery.com/event.preventDefault/)：

```
jQuery.fn.openBox = function (id) {
    return this.on('click', function (e) {
        e.preventDefault();

        // now open your box `id`.
    });
}

$('a').openBox('#theBoxId'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:36:21.507

不要`onclick`在元素中使用，而是将选择器放在数据属性中：

```
<a href="#" data-openbox="#theBoxId">Open the box !</a> 
```

然后为具有该数据的所有链接绑定一个点击事件：

```
$(function(){
  $('a[data-openbox]').click(function(e){
    e.preventDefault();
    var selector = $(this).data('openbox');
    // do something
  });
}); 
```

演示：http: [//jsfiddle.net/Guffa/EjLsQ/](http://jsfiddle.net/Guffa/EjLsQ/)*

# iphone - 修复 iphone sdk 中的 uiview 位置

> ID：10312849
> 
> 赞同：0
> 
> 时间：2012-04-25T09:27:14.333
> 
> 标签：iphone, objective-c, ios, uiinterfaceorientation

在我的应用程序中，我想根据 iPhone 的主页按钮方向设置 UIView 方向。我使用以下方式完成了它：

```
/* I handled view orientation in shouldAutorotate method*/
    -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
            viewForBarButtons.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
        else if (interfaceOrientation == UIInterfaceOrientationLandscapeRight)
            viewForBarButtons.autoresizingMask = UIViewAutoresizingFlexibleRightMargin;
        else if (interfaceOrientation == UIInterfaceOrientationPortrait)
            viewForBarButtons.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin;
        else if (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
            viewForBarButtons.autoresizingMask = UIViewAutoresizingFlexibleTopMargin;
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    } 
```

其中 viewForBarButtons 是 viewController 中的 UIView。

但是如果我设置 return Yes 而不是 return (interfaceOrientation == UIInterfaceOrientationPortrait); 然后它不起作用。

如何解决这个问题。如果有人知道，请帮助我。LifeCards 应用程序中实现了类似的功能。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:47:06.947

上述方法是在设备方向改变时决定是否将视图旋转到特定方向。

```
return (interfaceOrientation == UIInterfaceOrientationPortrait); 
```

指定仅支持纵向。

```
return YES; 
```

将支持所有方向。

但是，如果您将视图控制器放在 TabBarController 中，那么只有当所有视图控制器都支持该特定方向时，它才会旋转。

而不是将上面的代码放在 willRotateToInterfaceOrientation 中自动调整对象的大小。

但是你需要知道一件事，通过指定

> UIViewAutoresizingFlexibleLeftMargin

您只是指定视图可以在对象和左边距之间放置尽可能多的空间。但它会在方向更改期间保持其他方面的先前位置，因此您可能需要在物理上更改对象的原点（viewForBarButtons）

**行。我猜你说的是你想要homeButton旁边的viewForBarButtons，并且需要相应地定位/旋转它的子视图。**

首先注册 devie rotaion 或使用 didRotateInterfaceOrientation 来启动 viewForBarButtons 的旋转子视图。

```
#define degreesToRadians(x) (M_PI * x / 180.0) 
```

旋转子视图：用子视图对象替换 self

```
UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;

    if (animated)
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.3];
    }

    if (orientation == UIInterfaceOrientationPortraitUpsideDown)
        self.transform = CGAffineTransformRotate(CGAffineTransformIdentity, degreesToRadians(180)); 

    else if (orientation == UIInterfaceOrientationLandscapeRight)
        self.transform = CGAffineTransformRotate(CGAffineTransformIdentity, degreesToRadians(90));  

    else if (orientation == UIInterfaceOrientationLandscapeLeft)
        self.transform = CGAffineTransformRotate(CGAffineTransformIdentity, degreesToRadians(-90));
    else 
        self.transform=CGAffineTransformIdentity;

    if (animated)
        [UIView commitAnimations]; 
```

# symfony - 除了来自 symfony2 中数据库的内容之外，还添加自定义值

> ID：10312850
> 
> 赞同：2
> 
> 时间：2012-04-25T09:27:15.933
> 
> 标签：symfony, formbuilder

我的问题如下。

我在表单生成器中有一个下拉列表，它成功地从数据库中检索数据。

```
 public function buildForm(FormBuilder $builder, array $options) {
            $builder->add('Statusname', 'entity', array('empty_value' => 'All','class' => 'MyProject\EntityBundle\Entity\IssueStatusType', 'property' => 'name', 'required' => false,'query_builder' => function ($repository) { return $repository->createQueryBuilder('es')->orderBy('es.name', 'ASC'); },)) 
} 
```

它工作正常。但是当我添加我的自定义数据时

```
'not closed' => 'Not closed' 
```

进入下拉列表，即

```
public function buildForm(FormBuilder $builder, array $options) {
            $builder->add('Statusname', 'entity', array('empty_value' => 'All','not closed' => 'Not closed','class' => 'MyProject\EntityBundle\Entity\IssueStatusType', 'property' => 'name', 'required' => false,'query_builder' => function ($repository) { return $repository->createQueryBuilder('es')->orderBy('es.name', 'ASC'); },)) 
} 
```

这没用。有人能告诉我为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:25:24.537

FormBuilder::add() 方法的第三个参数是一个关联的选项数组。“未关闭”不是一个有效的选项，因此它不起作用。

在您的情况下，您必须手动创建自定义集合并使用“选择”类型。为了使其工作，您必须将实体管理器注入您的表单类型。这是一个极简主义的例子：

```
class IssueType extends AbstractType
{
    private $entityManager;

    public function __construct(EntityManager $entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('Statusname', 'choice', array(
            'empty_value' => 'All',
            'required'    => false,
            'choices'     => $this->buildStatusNames(),
        )
    }

    private function buildStatusNames()
    {
        $choices = array();
        $types = $this
            ->entityManager
            ->getRepository('MyProject\EntityBundle\Entity\IssueStatusType')
            ->createQueryBuilder('es')
            ->orderBy('es.name', 'ASC')
            ->getQuery()
            ->getResult();

        foreach ($types as $type) {
            // I assume key is retrieved by getId
            $choices[$type->getId()] = $type->getName();
        }

        $choices['not closed'] = 'Not closed';

        return $choices;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T16:25:19.920

实体关系在实体中进行管理，在这里您正在为一个视图构建一个表单，该表单将包含您的用户的 id 和可读名称。

提交表单后，使用上面 JF Simon 提到的 id 获取对象并提交，前提是您在实体中正确设置了所有内容，Symfony 将处理其余的事情。

# php - 如何在 Symfony2 中解析获取 url？

> ID：10312851
> 
> 赞同：0
> 
> 时间：2012-04-25T09:27:16.057
> 
> 标签：php, symfony

```
// route
TestTestAppBundle_foobar:
    pattern:  /foobar
    defaults: { _controller: TestTestAppBundle:Default:fooar }

//controller

public function foobarAction(Request $request)
    {
        $request = $this->getRequest();
        $method = $request->getMethod();
        $var =  $request->query->keys();
        $response = new Response('Content', 200, array('content-type' => 'text/html'));
        $response->setContent($var);
        return $response;
    } 
```

当我调用 URL 时

> /foobar?foo=bar

然后它返回空数组。相反，它应该返回 GET 参数。

如何在 symfony 中处理 GET 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:22:57.197

它永远不会像这样工作，原因有两个：

*   据我所见，它正在获取应有的查询字符串，但`setContent`有点混乱。第一个参数不应该是数组，而是字符串。所以`$var[0]`将工作并将内容设置为`foo`.

*   另外，您的路由有点错误。您的模式是`/foobar`，但您尝试打开`/foobar/`的模式不一样。如果设置`pattern: /foobar/`，则可以同时使用`/foobar/`and `/foobar`（实际上重定向到`/foobar/`）。

但是，`query->keys()`在这种情况下，这将只返回键。如果你想同时获取键和值，你应该只使用`query->all()`or`query->get('foo')`的值`foo`。

此外，您不需要使用请求，`$request = $this->getRequest();`因为请求已经是您操作中的第一个参数。你可以直接使用它。

`setContent`在这种情况下也有点没用，因为`Response`已经调用它的第一个参数，所以你可以在那里设置它而不使用额外的函数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T11:03:24.053

`pattern`尝试在例如添加斜杠

```
pattern:  /foobar/ 
```

它还将确保路由匹配`/foobar`和`/foobar/`模式。

# android - 如何通过android中的OnClickListener将递增的变量传递给意图

> ID：10312855
> 
> 赞同：0
> 
> 时间：2012-04-25T09:27:30.810
> 
> 标签：android, android-emulator

我在这里使用 android 应用程序我有 2 个按钮。第一个 1 个按钮是活动模式，2 个按钮是非活动模式。如果我单击 1 个按钮一次意味着我需要激活 2 个按钮，如果我单击 1 个按钮 2 个时间意味着 2按钮处于非活动模式。我在 onclick 侦听器中使用 i count 变量然后根据我给出条件但它不起作用的计数值增加该变量，你能建议我吗...

```
 public class Home extends Activity implements OnClickListener{
Button b1,b2;
          int countk3;
        int countk4=0;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.home1);
    b1=(Button)findViewById(R.id.button1);
    b2=(Button)findViewById(R.id.button2);
    b1.setOnClickListener(this);
    b2.setOnClickListener(this);
    b2.setEnabled(false);
    countk3 = getIntent().getIntExtra("k3", 0); 

    if(countk3==10 && countk4==1)
    {
           b2.setEnabled(true);
b2.setBackgroundResource(R.color.yellow);

    }
    else  if(countk3==10&&countk4!=1)
    {
         b2.setEnabled(false); 
b2.setBackgroundResource(R.color.red);
    }

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v==b1)
    {
        countk4++;
    Log.i("value....",""+countk4);

        Intent i=new Intent(Home.this,GalleryActivity.class);
        i.putExtra("k", 1);
        i.putExtra("k1", 13);

        startActivity(i);
    }
    if(v==b2)
    {
        Intent i=new Intent(Home.this,GalleryActivity.class);
        i.putExtra("k", 2);
        i.putExtra("k1", 16);
        startActivity(i);
    }

}
   }

       public class GalleryActivity extends Activity implements
   AdapterView.OnItemSelectedListener, ViewSwitcher.ViewFactory{
private TextSwitcher mSwitcher;
 int count=10;
private TextSwitcher mSwitcher1;
Gallery g;
static int nextbtn = 0;
static int prebtn = 0;
ImageAdapter iadapter;
int galpos;
  int countk1=0;
 int countk2;
public int ht;
    public int wt;
       String s;
          int l11;
  public static int motiongal = 3000;   
LinearLayout l1;
Integer length=0;
int length1;
ImageView i ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    ht = displaymetrics.heightPixels;
    wt = displaymetrics.widthPixels;
 l1=(LinearLayout)findViewById(R.id.linear);
    mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
    mSwitcher.setFactory(this);
    mSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
    mSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));
    mSwitcher.startLayoutAnimation();

    mSwitcher1 = (TextSwitcher) findViewById(R.id.switcher1);
    mSwitcher1.setFactory(this);
    mSwitcher1.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
    mSwitcher1.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));
    mSwitcher1.startLayoutAnimation();
    try
    {
    g = (Gallery) findViewById(R.id.gallery);
    g.setAdapter(new ImageAdapter(this));
    g.setHorizontalScrollBarEnabled(false);
    Bundle bundle = getIntent().getExtras();
    galpos = bundle.getInt("GALPOS");
    g.setSelection(galpos);        
    g.setAnimationDuration(motiongal);
   countk1 = getIntent().getIntExtra("k", 0); 
   } catch(Exception e){
       }
    g.setOnItemSelectedListener(this);
    ImageButton nextButton = (ImageButton) findViewById(R.id.nextimage);
    nextButton.setOnClickListener(nextButtonOnClick);

    ImageButton preButton = (ImageButton) findViewById(R.id.preimage);
    preButton.setOnClickListener(preButtonOnClick);

}
public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
    if(countk1==1)
    {
        mSwitcher.setText(mTextNames[position]);
    }
    if(countk1==2)
    {
         mSwitcher1.setText(mTextNames1[position]);
    }
   if(position==10)
   {
        Intent i=new Intent(GalleryActivity.this,Home.class);
       i.putExtra("k3", count);
       startActivityForResult(i, 0);
   }
    nextbtn = position;
}

public OnClickListener nextButtonOnClick = new OnClickListener(){
    public void onClick(View v) {           
        if(countk1==1)
        {
            mSwitcher1.setVisibility(View.INVISIBLE);
        if(nextbtn < (mTextNames.length-1))
        {     
            try
            {               
            mSwitcher.setText(mTextNames[nextbtn+1]);
            mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(nextbtn+1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);  

            }
            catch(Exception e)
            {}

        }else
        {
            try
            {               
            mSwitcher.setText(mTextNames[0]);   
            mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(0);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);                  
            }
            catch(Exception e)
            {}
        }
        }

        if(countk1==2)
        {
            mSwitcher.setVisibility(View.INVISIBLE);
        if(nextbtn < (mTextNames1.length-1))
        {     
            try
            {               
            mSwitcher1.setText(mTextNames1[nextbtn+1]);
            mSwitcher1.startLayoutAnimation();              
            mSwitcher1.getDrawingTime();
            g.setSelection(nextbtn+1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);  

            }
            catch(Exception e)
            {}

        }else
        {
            try
            {               
            mSwitcher1.setText(mTextNames1[0]);   
            mSwitcher1.startLayoutAnimation();              
            mSwitcher1.getDrawingTime();
            g.setSelection(0);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);                  
            }
            catch(Exception e)
            {}
        }
        }

      } 
};   

public OnClickListener preButtonOnClick = new OnClickListener(){
    public void onClick(View v) {           
            if(countk1==1)
            {
        if(nextbtn > 0)
        {
            try
            {               
        mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(nextbtn-1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);

            }
            catch(Exception e)
            {}

        }else
        {
            try
            {               
            mSwitcher.setText(mTextNames[mTextNames.length-1]);
            mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(mTextNames.length-1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);                  
            }
            catch(Exception e)
            {}

        }
            }

            if(countk1==2)
            {
        if(nextbtn > 0)
        {
            try
            {               
            mSwitcher1.startLayoutAnimation();              
            mSwitcher1.getDrawingTime();
            g.setSelection(nextbtn-1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);

            }
            catch(Exception e)
            {}

        }else
        {
            try
            {               
            mSwitcher1.setText(mTextNames1[mTextNames1.length-1]);
            mSwitcher1.startLayoutAnimation();              
            mSwitcher1.getDrawingTime();
            g.setSelection(mTextNames1.length-1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);                  
            }
            catch(Exception e)
            {}

        }
            }
      } 
};    

public void onNothingSelected(AdapterView<?> parent) {
}

public View makeView() {
    TextView i = new TextView(this);
    i.setTextSize(18);

    i.setGravity(1);
    return i;
}

public class ImageAdapter extends BaseAdapter {
    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getView() {
        // TODO Auto-generated method stub
        return 0;
    }

    public int getCount() {

          countk2 = getIntent().getIntExtra("k1", 0); 
        return  countk2;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
         i = new ImageView(mContext);

        if(countk1==1)
        {
            mSwitcher1.setVisibility(View.INVISIBLE);
            i.setImageResource(mPhotos.get(position));
        }
        if(countk1==2)
        {
            mSwitcher.setVisibility(View.INVISIBLE);
            i.setImageResource(mPhotos1.get(position));
            }

        i.setScaleType(ImageView.ScaleType.FIT_XY);
        if(wt >= 480){
            if(wt == 480 && ht > 320) {
                i.setLayoutParams(new Gallery.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            } else {
                i.setLayoutParams(new Gallery.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            }

        }else{              

            i.setLayoutParams(new Gallery.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        }

        return i;
    }

    private Context mContext;

}

private boolean isScrollingLeft(MotionEvent e1, MotionEvent e2){
      return e2.getX() > e1.getX();
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY){
      int kEvent;
      if(isScrollingLeft(e1, e2)){ //Check if scrolling left
        kEvent = KeyEvent.KEYCODE_DPAD_LEFT;
      }
      else{ //Otherwise scrolling right
        kEvent = KeyEvent.KEYCODE_DPAD_RIGHT;
      }
      onKeyDown(kEvent, null);
      return true;  
    }

private Integer[] mImageIds = {
         R.drawable.bokstavslottet01,
         R.drawable.bokstavslottet02,
         R.drawable.bokstavslottet03,
         R.drawable.bokstavslottet04,
         R.drawable.bokstavslottet05,
         R.drawable.bokstavslottet06,
         R.drawable.bokstavslottet07,
         R.drawable.bokstavslottet08,
         R.drawable.bokstavslottet09,
         R.drawable.bokstavslottet10,
         R.drawable.bokstavslottet11,
         R.drawable.bokstavslottet12,
         R.drawable.bokstavslottet13
        };
private Integer[] mImageIdsf = {
        R.drawable.f1,
        R.drawable.f2,
        R.drawable.f3,
        R.drawable.f4,
        R.drawable.f5,
        R.drawable.f6,
        R.drawable.f7,
        R.drawable.f8,
        R.drawable.f9,
        R.drawable.f10,
        R.drawable.f11,
        R.drawable.f12,
        R.drawable.f13,
        R.drawable.f14,
        R.drawable.f15,
        R.drawable.f16,

 };
private static String[] mTextNames = {
"BOOKSTOVEN1", "BOOKSTOVEN2", "BOOKSTOVEN3", "BOOKSTOVEN4", "BOOKSTOVEN5", "BOOKSTOVEN6", "BOOKSTOVEN7", "BOOKSTOVEN8", "BOOKSTOVEN9", "BOOKSTOVEN10", "BOOKSTOVEN11", "BOOKSTOVEN12", "BOOKSTOVEN13"};

private static String[] mTextNames1 = {
    "BOOKSTOVEN1", "BOOKSTOVEN2", "BOOKSTOVEN3", "BOOKSTOVEN4", "BOOKSTOVEN5", "BOOKSTOVEN6", "BOOKSTOVEN7", "BOOKSTOVEN8", "BOOKSTOVEN9", "BOOKSTOVEN10", "BOOKSTOVEN11", "BOOKSTOVEN12", "BOOKSTOVEN13", "BOOKSTOVEN14", "BOOKSTOVEN15", "BOOKSTOVEN16"};

private ArrayList<Integer> mPhotos = new ArrayList<Integer>(Arrays.asList(mImageIds));
private ArrayList<Integer> mPhotos1 = new ArrayList<Integer>(Arrays.asList(mImageIdsf));
   } 
```

# html - 蓝色和紫色默认链接，如何删除？

> ID：10312857
> 
> 赞同：18
> 
> 时间：2012-04-25T09:27:31.613
> 
> 标签：html, css

这是我导航中的链接之一：

```
<li><a href="#live-now" class="navBtn"><span id="navLiveNow" class="white innerShadow textShadow">Live Now</span></a></li> 
```

我的css中也有以下内容：

```
a { text-decoration: none; }
a:visited { text-decoration: none; }
a:hover { text-decoration: none; }
a:focus { text-decoration: none; }
a:hover, a:active { text-decoration: none; } 
```

但是链接仍然显示在可怕的蓝色/紫色访问/悬停html默认值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-25T09:30:21.390

您需要覆盖颜色：

```
a { color:red } /* Globally */

/* Each state */

a:visited { text-decoration: none; color:red; }
a:hover { text-decoration: none; color:blue; }
a:focus { text-decoration: none; color:yellow; }
a:hover, a:active { text-decoration: none; color:black } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-22T18:47:35.543

**删除默认链接解决** 了 :visited 的事情是 css.... 你只需转到你的 HTML 并添加一个简单的

> <a href="" style="text-decoration: none" **>** </a>

...这就是 html 页面过去的方式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-11T19:32:55.620

```
<a href="https://www." style="color: inherit;"target="_blank"> 
```

对于 CSS 内联样式，这对我来说效果最好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T09:38:54.670

嘿，像你一样定义颜色`#000`并像这样修改你的css

```
.navBtn { text-decoration: none; color:#000; }
.navBtn:visited { text-decoration: none; color:#000; }
.navBtn:hover { text-decoration: none; color:#000; }
.navBtn:focus { text-decoration: none; color:#000; }
.navBtn:hover, .navBtn:active { text-decoration: none; color:#000; } 
```

或这个

```
 li a { text-decoration: none; color:#000; }
 li a:visited { text-decoration: none; color:#000; }
 li a:hover { text-decoration: none; color:#000; }
 li a:focus { text-decoration: none; color:#000; }
 li a:hover, .navBtn:active { text-decoration: none; color:#000; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T09:39:22.330

如果您想以自己选择的颜色显示锚点，则应在**CSS**中的锚点标记属性中定义颜色，如下所示：-

```
a { text-decoration: none; color:red; }
a:visited { text-decoration: none; }
a:hover { text-decoration: none; }
a:focus { text-decoration: none; }
a:hover, a:active { text-decoration: none; } 
```

看演示：- [http://jsfiddle.net/zSWbD/7/](http://jsfiddle.net/zSWbD/7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-19T07:00:09.817

默认情况下，链接颜色为**蓝色**，**访问**颜色为**紫色**。此外，文本装饰**带有下划线**，颜色为**blue**。如果您想为已访问、悬停和聚焦保持相同的颜色，然后按照以下代码进行操作-

例如颜色是：**#000**

```
a:visited, a:hover, a:focus {
    text-decoration: none;
    color: #000;
} 
```

如果您想为悬停、访问和聚焦使用不同的颜色。例如**悬停**颜色：红色**访问**颜色：绿色和**焦点**颜色：黄色然后按照下面的代码

```
 a:hover {
        color: red;
    }
    a:visited {
        color: green;
    }
    a:focus {
        color: yellow;
    } 
```

注意：好的做法是使用颜色代码。

# android - 在 Android 中以编程方式锁定设备

> ID：10312861
> 
> 赞同：0
> 
> 时间：2012-04-25T09:27:42.513
> 
> 标签：android, locking, device-admin

单击按钮时，我必须锁定模拟器。我使用这个代码 -

我不明白什么是 active 和 securemeAdmin

我使用此链接-> [以编程方式锁定 android 设备](https://stackoverflow.com/questions/4545079/lock-the-android-device-programmatically)

```
public class adminActivity extends DeviceAdminReceiver
{
   public static class Test extends Activity
   {
      Button btn;
      DevicePolicyManager mDPM;
      ComponentName mDeviceAdminSample;

      @Override
      protected void onCreate(Bundle savedInstanceState) 
      {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

     mDPM = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
         mDeviceAdminSample = new ComponentName(Test.this,
                adminActivity.class);

         Intent intent = new   Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);  
         intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, securemeAdmin);

         btn=(Button)findViewById(R.id.btn);

         btn.setOnClickListener(new OnClickListener() 
         {
        @Override
        public void onClick(View v) 
        {
           if (active) 
           {
            mDPM.lockNow();
           }
        }
         });
      }
   }
} 
```

我也使用键盘保护管理器，但它也不起作用。有人可以给我一个锁定电话的例子吗？

```
public class Keyguard extends Activity 
{
    Button btn;
    KeyguardLock lock;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btn=(Button)findViewById(R.id.btn);

        KeyguardManager mgr = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE); 
        lock = mgr.newKeyguardLock(KEYGUARD_SERVICE);

        btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            lock.reenableKeyguard();
        }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:13:47.750

此代码将为您工作..

```
WindowManager.LayoutParams lp = getWindow().getAttributes();
lp.screenBrightness = 0;
getWindow().setAttributes(lp);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T05:21:46.343

要锁定 android 设备，您必须需要管理员权限。您必须处理三件事 1) DeviceAdminReceiver 类 2)Manifest 文件 3) 调用 DevicePolicyManager 的锁定方法的活动类。请参阅此链接[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

# android - Android：关于 Crash Handler 通过使用 Thread.UncaughtExceptionHandler

> ID：10312864
> 
> 赞同：1
> 
> 时间：2012-04-25T09:27:57.483
> 
> 标签：android, exception-handling

我描述了我的项目背景。它有很多活动，并且有登录活动，这意味着我需要保存一些消息。

*   **我需要：**

    捕获所有未捕获的异常，保存异常信息。而不是恢复活动，如果可以的话。如果不能恢复活动，我们应该关闭应用程序友好并使用loginInfo重新启动。</p>

*   **我已经做好了**

    我用的是Thread.UncaughtExceptionHandler，可以捕捉到异常，但是无法恢复活动或关闭应用友好。</p>

*   **试过**

    我用

*   1.ActiviryManager.restartPackage

    可以有效关闭应用，但不能重启。

*   2.android.os.Process.kill(android.os.Process.myPid())

    它无法有效关闭我的应用程序。与 System.exit(0) 相同

*   3.我尝试完成所有活动，

    关闭App有效，我使用闹钟重启App，但我发现我的应用似乎无法完成关闭。

我的英语很差，在这里表示由衷的歉意。如果你有什么想法，请告诉我，非常感谢你。</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:46:50.860

对于完成活动，请使用“Finish()”。

我的建议是，不要直接重新启动应用程序，而是不要完成主要活动并使用简单的意图进行下一个活动。

每当您想“重新启动”应用程序时，您只需完成当前活动而不使用任何意图；通过这样做，堆栈中唯一的活动将是主要活动（唯一你还没有完成的活动）。

只需在 'onRestart()' 方法上添加任何额外的代码，你就可以开始了！

PS。我希望我理解正确。

# android - 我可以知道在不使用 android 中的 activityManager 的情况下打开了哪些应用程序吗？

> ID：10312865
> 
> 赞同：1
> 
> 时间：2012-04-25T09:28:01.800
> 
> 标签：android

有什么方法可以让我知道在不使用 activityManager 的情况下打开了哪些应用程序？

我想记录每个应用程序打开了多少次。例如，当用户打开网络浏览器时，网络浏览器的计数器将增加 1。我可以通过创建一个线程并使用 activityManager 来做到这一点；但是，如果我想使用线程来监听事件，它可能会浪费大量的电池电量！？那么，我可以使用意图/广播接收器之类的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:22:37.807

您可以使用 UsageStatsService，它是一个框架服务。包含所有这些信息。

# python - 读取 Unicode 文件 - Python3.2

> ID：10312866
> 
> 赞同：3
> 
> 时间：2012-04-25T09:28:08.087
> 
> 标签：python, unicode, file-io, python-3.x

我正在尝试使用 Python3.2 读取一些文件，其中一些文件*可能*包含 unicode，而其他文件则不包含。

当我尝试：

```
file = open(item_path + item, encoding="utf-8")
for line in file:
    print (repr(line)) 
```

我得到错误：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 13-16: ordinal not in range(128) 
```

我在这里关注文档：http: [//docs.python.org/release/3.0.1/howto/unicode.html](http://docs.python.org/release/3.0.1/howto/unicode.html)

为什么 Python 会在这段代码的任何时候尝试编码为 ascii？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:49:15.553

问题是`repr(line)`在 Python 3 中也返回 Unicode 字符串。它不会将上述 128 个字符转换为 ASCII 转义序列。

`ascii(line)`如果您想查看转义序列，请改用。

实际上，`repr(line)`期望返回的字符串如果放在源代码中会产生具有相同值的对象。这样，Python 3 的行为就很好了，因为源文件中不需要 ASCII 转义序列来表达超过 ASCII 字符的字符串。如今，使用 UTF-8 或其他一些 Unicode 编码是很自然的。事实上，Python 2 为这些字符生成了转义序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:32:12.047

你的输出编码是什么？如果您删除对 的调用`print()`，它会开始工作吗？

我怀疑你有一个非 UTF-8 语言环境，所以 Python 正在尝试将其编码`repr(line)`为 ASCII 作为打印它的一部分。

要解决此问题，您必须对字符串进行编码并打印字节数组，或者将默认编码设置为可以处理您的字符串的编码（UTF-8 是显而易见的选择）。

# ssl - Apache2 转发代理，仅端口 443 (SSL) 的 DNS 查找失败

> ID：10312872
> 
> 赞同：2
> 
> 时间：2012-04-25T09:28:31.800
> 
> 标签：ssl, apache2, mod-proxy

我不得不使用转发代理来限制对有限站点的访问。我之前在 Apache 1 上试过这个，一切都很好。

最近，我设置了一个 RHEL6 Linux 机器并尝试使用 Apache 2 来做同样的事情。但是，它总是为任何 SSL 站点报告以下内容。

例如，它可以解析访问ibank.standardchartered.com.hk的IP，但不能解析ibank.standardchartered.com.hk:443

似乎它在本地代理服务器中而不是在主代理中进行 DNS 查找。但是当我手动将 ibank.standardchartered.com.hk 添加到本地服务器主机表时，它可以工作。

```
 - - [25/Apr/2012:17:44:00 +0800] "GET http://www.standardchartered.com.hk/_images/zh/menu1_sub.gif HTTP/1.1" 304 -
 - - [25/Apr/2012:17:44:00 +0800] "GET http://www.standardchartered.com.hk/_images/zh/menu2_sub.gif HTTP/1.1" 304 -
 - - [25/Apr/2012:17:44:00 +0800] "GET http://www.standardchartered.com.hk/_images/zh/menu5_sub.gif HTTP/1.1" 304 -
 - - [25/Apr/2012:17:44:00 +0800] "GET http://www.standardchartered.com.hk/_images/zh/menu6_sub.gif HTTP/1.1" 304 -
 - - [25/Apr/2012:17:44:00 +0800] "GET http://www.standardchartered.com.hk/_images/zh/menu7_sub.gif HTTP/1.1" 304 -
 - - [25/Apr/2012:17:44:00 +0800] "GET http://www.standardchartered.com.hk/_images/zh/menu8_sub.gif HTTP/1.1" 304 -

V2.12
[Wed Apr 25 16:52:34 2012] [error] [client ] proxy: DNS lookup failure for: ibank.standardchartered.com.hk returned by ibank.standardchartered.com.hk:443
[Wed Apr 25 16:53:29 2012] [error] [client ] proxy: DNS lookup failure for: www.google.com returned by www.google.com:443
[Wed Apr 25 17:47:04 2012] [error] [client ] proxy: DNS lookup failure for: ibank.standardchartered.com.hk returned by ibank.standardchartered.com.hk:443
[Wed Apr 25 17:47:04 2012] [error] [client ] proxy: DNS lookup failure for: ibank.standardchartered.com.hk returned by ibank.standardchartered.com.hk:443

v2.4
[Wed Apr 25 16:36:53.387721 2012] [proxy:error] [pid 8024:tid 140494533285632] [client ] AH00898: DNS lookup failure for: ibank.standardchartered.com.hk returned by ibank.standardchartered.com.hk:443
[Wed Apr 25 16:36:53.387932 2012] [proxy:error] [pid 8024:tid 140494533285632] [client ] AH00898: DNS lookup failure for: ibank.standardchartered.com.hk returned by ibank.standardchartered.com.hk:443 
```

这是我的配置：

```
# LoadModule foo_module modules/mod_foo.so
LoadModule headers_module modules/mod_headers.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
....

ProxyRequests On
ProxyVia On

ProxyRemote * http://proxy.main.com:8080

<Proxy *>
Order deny,allow
Deny from none
Allow from all
</Proxy> 
```

将所有互联网 ssl 条目都放入主机表是不可能的。有谁可以解决这个问题？

谢谢

4 月 26 日更新：最后，我没有找到解决方案并更改为使用 Squid。

# wcf - 将 WCF 托管为 Windows 服务“服务已启动和停止”

> ID：10312873
> 
> 赞同：1
> 
> 时间：2012-04-25T09:28:32.000
> 
> 标签：wcf, self-hosting

我使用 net.tcp 将 WCF 作为 Windows 服务托管。在我启动服务时安装 Windows 服务后，我得到该服务已启动和停止。

错误说为了向服务“MYService”添加端点，必须指定一个非空的合同名称。在 System.ServiceModel.Description.ConfigLoader.LookupContract（字符串合同名称，字符串服务名称）

我的 OnStart 函数如下

```
 protected override void OnStart(string[] args)
        {
            try
            {
                if (myServiceHost != null)
                {
                    myServiceHost.Close();
                }
                myServiceHost = new ServiceHost(typeof(MYservice));
                myServiceHost.Open();

            }
            catch (Exception ex)
            {
                log.Error("ONStart", ex);
                throw;
            }

        } 
```

配置文件如下：

```
<serviceHostingEnvironment minFreeMemoryPercentageToActivateService="10" />
<services>
  <service behaviorConfiguration="myServiceBehavior"
    name="myNamespace.myTestService">
    <endpoint binding="netTcpBinding" bindingConfiguration="netTCPBindingConfig" contract="myNamespace.ServiceInterface.ImyTestService" />
    <endpoint binding="mexTcpBinding" bindingConfiguration="" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://10.1.3.69:8523/TestService" />
      </baseAddresses>
      <timeouts closeTimeout="10:00:10" openTimeout="10:01:00" />
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="myServiceBehavior">
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:52:34.673

在您的配置文件中，有：

```
<endpoint binding="netTcpBinding" bindingConfiguration="netTCPBindingConfig" contract="myNamespace.ServiceInterface.ISomeService" /> ` 
```

而不是`ISomeService`，您必须指定由 实现的任何接口`MYService`。

*编辑*

此外，mex 绑定必须有一个指定的合同，即`contract="IMetadataExchange"`

*再次编辑*

为方便起见，mex 绑定应如下所示：

```
<endpoint binding="mexTcpBinding" address="mex" bindingConfiguration="" contract="IMetadataExchange" /> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-25T09:43:00.233

请试试这个：

```
 protected override void OnStart(string[] args)
        {
            try
            {
                myServiceHost = new ServiceHost(typeof(MYservice));
                myServiceHost.Open();
                Console.ReadKey();
            }
            catch (Exception ex)
            {
                log.Error("ONStart", ex); throw;
            }
            finally
            {
                myServiceHost.Close();

            }
        } 
```

# objective-c - Objective-C：如何对一系列字符串常量进行分组？

> ID：10312874
> 
> 赞同：10
> 
> 时间：2012-04-25T09:28:33.327
> 
> 标签：objective-c, ios, nsstring

我以宏的方式定义了一系列字符串常量，如下所示，

```
#define EXT_RESULT_APPID  @"appid"
#define EXT_RESULT_ERROR_CODE  @"errorcode"
#define EXT_RESULT_PROGRESS  @"progress"
... 
```

所有这些常量都应该在相同的上下文中使用，所以**我想将它们限制在同一个命名空间中，并且我不想让它们成为 global**，就像这篇[文章](https://stackoverflow.com/questions/6653320/how-are-string-constants-in-objective-c-stored-retrieved)所说的那样。

另一方面，我可以将所有数字常量放在一个枚举中，但它不适用于字符串。那么我该如何对这些相关的字符串常量进行分组呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-25T10:04:24.677

这是一种方法：

**MONExtResult.h**

```
// add __unsafe_unretained if compiling for ARC
struct MONExtResultStruct {
    NSString * const AppID;
    NSString * const ErrorCode;
    NSString * const Progress;
};

extern const struct MONExtResultStruct MONExtResult; 
```

**MONExtResult.m**

```
const struct MONExtResultStruct MONExtResult = {
    .AppID = @"appid",
    .ErrorCode = @"errorcode",
    .Progress = @"progress"
}; 
```

正在使用：

```
NSString * str = MONExtResult.AppID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:31:10.820

创建一个头文件，在其中声明字符串并在需要时将其导入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:45:29.247

您可以创建一个名为“Constants.h”的头文件。然后你需要在你想使用这些常量的地方导入这个头文件，比如：

```
#import "Constants.h" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:18:26.260

创建一个头文件说`Constants.h`

在此文件中添加所有常量。这些可以是您想在项目的不同类中使用的常量。

```
#define EXT_RESULT_APPID  @"appid"
#define EXT_RESULT_ERROR_CODE  @"errorcode"
#define EXT_RESULT_PROGRESS  @"progress" 
```

现在，不是`Constants.h`在每个类中都导入它，而是转到`<project name>-Prefix.pch`文件并在此处导入文件。

```
#import "SCConstants.h" 
```

现在您可以轻松地在项目的任何类中使用常量。

# php - 这个javascript函数可以放入ajax吗？如何？

> ID：10312879
> 
> 赞同：0
> 
> 时间：2012-04-25T09:28:49.350
> 
> 标签：php, javascript, mysql, ajax

我正在尝试将其放入 ajax 中，因此每次有人单击 jquery 中的按钮时，它都会创建一个 php 会话。可以只使用这个吗？

```
var milisec=00;
var seconds=60; 
function display(){ 
    if (milisec<=0){ 
       milisec=9 
       seconds-=1 
    } 
    if (seconds<=-1){ 
       milisec=0 
       seconds+=1
    } 
    else {
       milisec-=1 
       document.getElementById('counter').innerHTML= seconds+":"+"0"+milisec+"s";
       setTimeout(display,100) 
    }
    if (seconds < 10) {
       document.getElementById('counter').innerHTML=  "0"+seconds+":"+"0"+milisec+"s";
    }
} 
display() 
```

我需要使用 ajax 使用 Php 会话发布他们进入下一页所花费的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:11:44.847

```
 var seconds = 60;
  var milisec = 0;
  var stop_counter = false;    

  function display(){ 

    if(milisec == 0)      
      seconds = seconds - 1;

    milisec = milisec - 1;

    if(milisec == -1)
      milisec = 10;        

    $('#counter').html((seconds < 10 ? "0" : "") + seconds + ":0" +milisec+ "s");        

    if( (seconds == 0 && milisec == 0 && stop_counter == true) == false )
      setTimeout(function(){ display(); }, 100);

  }     

  $(document).ready(function(){

    display();

    $('#button').click(function(){

      $.post('myphpfile.php', {time : $('#counter').text()}, function(data){

        alert('Data from myphpfile.php: ' + data);
        stop_counter = true; //stop counter now

      });

    });

  }); 
```

我的php文件.php

```
echo 'you clicked button when counter was ' . $_POST['time'];
//you can do any php stuff here 
```

这段代码应该做你想做的，但我没有测试它。

[来自jQuery 库](http://docs.jquery.com)的函数 $.post()会将您的数据传递给 php 脚本，并且还可以检索一些您可以在您的网站或其他东西上显示的数据。

顺便说一句，一秒有 1000 毫秒，而不是 100

> 对不起我的英语不好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:20:22.857

是的，您可以通过将`"seconds" and "milisec"`ajax 调用中的值传递给

```
$(document).ready(function(){  
    $('#button').click(function(){
      $.post('session_file.php', {secs : seconds,millisecs:milisec}, function(data){
      });
     });
 }); 
```

`secs and millisecs` 因此，在 session_file.php 中，您可以在会话中写入变量的值

# google-drive-api - 使用 Google Drive SDK 仅将二进制差异下载到客户端

> ID：10312880
> 
> 赞同：3
> 
> 时间：2012-04-25T09:28:53.233
> 
> 标签：google-drive-api

我想问您是否可以仅下载旧本地文件和服务器上较新文件版本之一之间的二进制差异，并将它们应用于客户端上的文件？

场景如下： 驱动器上有单个文件的多个修订版。

具有过时文件版本的客户端连接到驱动器并希望将文件更新为一些较新的版本。但是，它只想传输尽可能少的数据并将这些更改在本地应用到其修订版中。

是否有任何 API 调用可用于此？我对基于 Java 的功能特别感兴趣。

Dropbox 的客户端支持这一点，但它的 API 不支持。还有可以以类似方式使用的 BUP，尽管它缺乏云后端和适当的 Windows/Java 支持。

谢谢你和亲切的问候彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:06:19.733

目前 Google Drive API 不支持差异上传。尽管我们可能会在未来的版本中考虑这一点。感谢您的功能请求:)

# objective-c - gdb vs lldb 哪个更适合 object-c 中的 new

> ID：10312883
> 
> 赞同：1
> 
> 时间：2012-04-25T09:29:12.997
> 
> 标签：objective-c, xcode, gdb, lldb

我是 Objective-C 的新手，没有使用 Xcode4.2 的 gdb 或 lldb 经验，哪个更适合我学习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:00:15.737

我会建议GDB。我们已经测试了 LLDB，它应该会好得多，但就我们的使用而言，它会产生很多错误 -> 错误就像您正在调试代码并且您已经看到它工作，使用 GDB 它符合预期，使用 LLDB看到一些非常奇怪的值，它可能会导致不需要甚至错误的戏剧性重构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-27T06:35:44.543

我来自未来。
LLDB 现在（2016 年）不是 Xcode 的未来，而只是与 LLVM 一起出现。

以下是 Apple 官方链接中关于此主题的引用：

> 关于 LLDB 和 Xcode
> 
> 随着 Xcode 5 的发布，LLDB 调试器成为在 OS X 上调试体验的基础。
> 
> LLDB 是 Apple 对 GDB 的“从头开始”替代品，它与 LLVM 编译器密切合作开发，为您提供最先进的调试，并具有广泛的流量控制和数据检查功能。从 Xcode 5 开始，所有新的和预先存在的开发项目都会自动重新配置为使用 LLDB。
> 
> 标准 LLDB 安装为您提供了广泛的命令集，旨在与熟悉的 GDB 命令兼容。除了使用标准配置外，您还可以轻松自定义 LLDB 以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:58:47.873

LLDB 作为最后一个 XCode 版本 4.3.2 使用它

# regex - 从字符串中删除 XML 属性

> ID：10312887
> 
> 赞同：0
> 
> 时间：2012-04-25T09:29:27.493
> 
> 标签：regex, string

A 有一个字符串，如`'<node attr="some_value">'`. 如何`attr="some_value"`从此字符串中删除？我只知道`attr`属性名称，不知道`"some_value"`值。
PS 我正在使用 JavaScript，但任何语言的解决方案都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:39:32.813

试试这个：需要 jquery。

```
var xml = '<node attr="some_value">';
var newXml = $(xml).removeAttr('attr'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:36:00.363

使用正则表达式来处理 XML 是在乞求灾难。我会使用内置的 Xml 功能来执行此操作。

来自[w3schools.com](http://www.w3schools.com/dom/met_element_removeattribute.asp)

```
xmlDoc=loadXMLDoc("books.xml");

x=xmlDoc.getElementsByTagName('book');

document.write(x[0].getAttribute('category')); document.write("<br />");

x[0].removeAttribute('category');

document.write(x[0].getAttribute('category')); 
```

XML 在哪里

```
<bookstore>
<book category="cooking">
<title lang="en">Everyday Italian</title>
<author>Giada De Laurentiis</author>
<year>2005</year>
<price>30.00</price>
</book>
<book category="children">
<title lang="en">Harry Potter</title>
<author>J K. Rowling</author>
<year>2005</year>
<price>29.99</price>
</book>
<book category="web">
<title lang="en">XQuery Kick Start</title>
<author>James McGovern</author>
<author>Per Bothner</author>
<author>Kurt Cagle</author>
<author>James Linn</author>
<author>Vaidyanathan Nagarajan</author>
<year>2003</year>
<price>49.99</price>
</book>
<book category="web" cover="paperback">
<title lang="en">Learning XML</title>
<author>Erik T. Ray</author>
<year>2003</year>
<price>39.95</price>
</book>
</bookstore> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:35:06.327

经典解决方案：使用字符串函数，例如：

```
str = str.substring(0,str.indexOf("attr")-1) + ">" 
```

# mysql - mysql 更新日期时间列 - 将 10 年 3 个月 22 天 10 小时 30 分钟添加到现有数据

> ID：10312888
> 
> 赞同：2
> 
> 时间：2012-04-25T09:29:31.907
> 
> 标签：mysql

我有很多这样的专栏：

```
select when from t1 where when LIKE '2002-01-02 %'\G
*************************** 1\. row ***************************
when: 2002-01-02 02:13:14
*************************** 2\. row ***************************
when: 2002-01-02 02:15:31
*************************** 3\. row ***************************
when: 2002-01-02 02:19:42 
```

我正在尝试将日期和时间增加 10 年 3 个月 22 天和 13 小时 10 分钟，使其看起来像：

```
2012-04-24 15:23:14
2012-04-24 15:25:31
2012-04-24 15:29:42 
```

搜索并找到仅增加年份或月份的方法（添加）......但是我该怎么做所有年份、月份、日期和时间？

如果它可以在单个查询中完成，那就太好了，但一切都很好..感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:33:46.463

你可以使用这样的东西 -

```
SELECT datetime + INTERVAL 10 YEAR + INTERVAL 3 MONTH + INTERVAL 22 DAY
       + INTERVAL 10 HOUR + INTERVAL 30 MINUTE AS new_date_time FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:48:12.830

如果您的服务器是 5.5 或更高版本，您可以将 TO_SECONDS 与 UNIX_TIMESTAMP 和 FROM_UNIXTIME 结合使用：

```
SELECT FROM_UNIXTIME(UNIX_TIMESTAMP(when) + TO_SECONDS('0010-03-22 13:10:00')) new_when 
FROM t1
WHERE when LIKE '2002-01-02 %' 
```

# android - 如何在android中以“YYYY-MM-DD”格式获取日期对象

> ID：10312889
> 
> 赞同：21
> 
> 时间：2012-04-25T09:29:32.217
> 
> 标签：android, date, datetime

我有一个要求，我需要比较两个日期。一个日期将来自数据库，它是“YYYY-DD-MM”公司中的字符串，我需要将此字符串日期与当前日期进行比较。

为此，我将日期字符串转换为日期对象。

现在我还需要“YYYY-MM-DD”格式的当前日期，它应该是日期对象，以便我可以使用.compareTo() 方法比较两个日期..

请帮助我如何做到这一点...

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-25T09:41:19.323

```
 Date cDate = new Date();
 String fDate = new SimpleDateFormat("yyyy-MM-dd").format(cDate); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T09:51:31.530

```
Calendar c = Calendar.getInstance();
SimpleDateFormat tf = new SimpleDateFormat("yyyy-MM-dd");
String time=DB time;
Date parseTime= tf.parse(time);
Integer dayNow=c.getTime().getDate();
Integer dayDb=parseTime.getDate(); 
```

然后你可以比较`dayNow`和`dayDb`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T06:10:16.430

You can do it in following way

```
// pick current system date

    Date dt = new Date();

// set format for date

   SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

 // parse it like

        String check = dateFormat.format(dt);

        System.out.println("DATE TO FROM DATEBASE   " + 
                arrayOfStringDate[d].toString());
        System.out.println("CURRENT DATE   " + check); 
```

// and compare like

```
System.out.println("compare    "+ 
        arrayOfStringDate[d].toString().equals(check)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-25T09:32:07.943

如果您当前的日期实际上是`java.util.Date`该类的一个实例，则无需为其指定格式；它只是一个代表特定时刻的毫秒值。

您可以像这样获取当前日期：

```
Date currentDate = new Date(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-25T09:37:47.587

您可以使用 2 种方式：

1.  [日期格式](http://developer.android.com/reference/java/text/DateFormat.html#parse%28java.lang.String%29)对象。使用解析方法。

2.  制作您自己的日期解析器。我的意思是，您将年、月和日分别转换为一个整数，然后使用[Date](http://developer.android.com/reference/java/util/Date.html)构造函数来获取 Date。

# jquery - jsp中的jquery按钮

> ID：10312890
> 
> 赞同：0
> 
> 时间：2012-04-25T09:29:41.353
> 
> 标签：jquery, jsp

嗨，我项目中的朋友们，他们的要求是，如您所见，我想将锚标签转换为按钮外观。这是我的jsp代码，纠正我的错误，css链接是完美的。单击锚标记后，它应该切换。提前谢谢

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<%@taglib uri="/struts-tags" prefix="s" %>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="css/styles.css"/>
    <link rel="stylesheet" href="css/fotorama.css"/>

    <title>Islam WedLock</title>
    <script  type="text/javascript" src="js/fotorama.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.6.custom.min.js"></script>
    <link type="text/css" href="css/south-street/jquery-ui-1.8.18.custom.css" rel="stylesheet" />   
    <s:head />
    <sj:head jqueryui="true" />

    <script type="text/javascript">
        $(function() {
            // set effect from select menu value

           $("#button").button();

           $( "#button" ).click(function() {
                $( "#effect" ).toggle("blind");
                return false;
            });

           $.subscribe('hideTarget', function(event, data) {
                $('#'+event.originalEvent.targets).hide("blind");
                $( "#effect" ).hide();
            });

        });
    </script>
</head>
<body>
    <div class="wrapper">
        <%@include file="header.jsp"%>

        <!-- content -->
        <div>
            <table>
                <tr>
                    <td>
                        <div class="demo">
                            <a href="#" id="button">Upload Files</a>
                        <div id="effect" style="display:none;">
                            <s:form action="fileUpload" method="post" theme="xhtml" enctype="multipart/form-data" >
                                <s:file name="userImage" id="fileinput" label="User Image" />
                                <sj:submit targets="result" effect="blind" effectMode="show" onEffectCompleteTopics="hideTarget" value="Upload" button="true" />
                            </s:form>
                            <br/>
                            <img id="indicator" src="progressbar.gif" style="display:none" alt="loading"/> 
                        </div>
                       </div>     
                    </td>
                </tr>
                <tr>
                    <td>
                        <sj:div onEffectCompleteTopics="hideTarget" cssClass="ajaxdiv" cssStyle="display:none;" id="result"></sj:div>
                    </td>
                </tr>
        </table>
   </div>

      <!-- End -->
        <%@include file="footer.jsp"%>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-25T09:46:10.283

尝试使用喜欢，

```
< a href="#" id="button"
style="background: #ddd; color: black; border: 2px outset #555">
Upload Files< /a> 
```

你的锚标签看起来像按钮......

# linux - 虚拟内存和 sbrk

> ID：10312893
> 
> 赞同：5
> 
> 时间：2012-04-25T09:30:03.973
> 
> 标签：linux, virtual-memory

在 32 位 Linux 系统上，一个进程最多可以访问 4 GB 的虚拟地址空间；然而，在保留任何这些方面，流程似乎在不同程度上是保守的。因此，使用 malloc 的程序偶尔会通过系统调用 sbrk/brk 来扩展其数据段。甚至这些页面还没有在物理内存中声明。我不完全理解的是为什么我们首先需要 sbrk，为什么不给我 4 GB 地址空间以避免任何 sbrk 调用，因为在我们触摸/声明这些块之前，它本质上是一个免费操作，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:42:17.860

如果您对文件进行内存映射（在 Linux 下很常见），会发生什么？它必须位于地址空间中的某个位置，因此必须有一些方法来定义“使用”和“未使用”部分。
共享内存（实际上只是映射没有实际文件的文件）是相同的。它必须去某个地方，并且操作系统必须确保它可以放置它而不会覆盖某些东西。

此外，出于明显（和不太明显）的效率原因，最好保持参考的局部性。如果您被允许在您的地址空间中的任何位置写入和读取，您可以打赌有些人会这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T09:45:26.557

我想到了几个原因：

*   访问未映射的内存时不再出现段错误
*   [翻译后备缓冲区](http://en.wikipedia.org/wiki/Translation_lookaside_buffer)( TLB) 会更大，可能需要更多时间来设置它
*   如果您在新的共享库或 mmap() 中加载某些内容，则无论如何都必须取消映射其中的一些内存

# c# - 获取嵌套在列表中的最大计数列表

> ID：10312894
> 
> 赞同：3
> 
> 时间：2012-04-25T09:30:14.647
> 
> 标签：c#, linq, c#-4.0, linq-to-objects

我有一个员工列表，所有员工都有另一个嵌套列表，称为 DisplayList。

现在，并非所有员工都拥有相同数量的 DisplayField。因此，我希望获得具有最高 DisplayFields 的那些，以便我可以将每个人都纳入显示中。

目前我有以下内容： -

```
 int iMaxDisplayCount = 0;
        foreach (Employee employee in employeeList)
        {
            int iDisplayCount = employee.EmployeeDisplayCollection.Count;
            if (iDisplayCount > iMaxDisplayCount)
                iMaxDisplayCount = iDisplayCount;
        }

        var employees = employeeList.GroupBy(p => p.EmployeeDisplayCollection.Count == iMaxDisplayCount).Select(g => g.ToList());  
        foreach(var employeeHighList in employees)
        {
            foreach (var employee in employeeHighList) 
            {         

            }         
        } 
```

但是由于某种原因，我得到了employeeHighList 中的所有员工，而不仅仅是显示数量最多的员工。

我认为 GroupBy 不正确，但不知道它有什么问题。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T09:34:43.470

```
var max = employeeList.Max(e=>e.EmployeeDisplayCollection.Count);

var maxEmp = employeeList.Where(e=>e.EmployeeDisplayCollection.Count == max)
                         .ToList() 
```

# sql - ASP SQL 查询抛出错误

> ID：10312903
> 
> 赞同：1
> 
> 时间：2012-04-25T09:30:55.300
> 
> 标签：sql, asp-classic

我在以下 sql 中有错误。

```
 (SELECT shorthand, display, larry_ranking, site_url
FROM larrydb_site_list lsl JOIN larrydb_review lr on
lsl.sid = lr.sid 
WHERE display=true AND niche='regular' 
ORDER BY larry_ranking DESC Limit 2)

UNION

(SELECT shorthand, display, larry_ranking, site_url
FROM larrydb_site_list lsl JOIN larrydb_review lr on
lsl.sid = lr.sid 
WHERE display=true AND niche='regular' AND shorthand='sexier') 
```

我把它放在一行中：

```
 dim rsFav
sSQL = "(SELECT shorthand, display, larry_ranking, site_url FROM larrydb_site_list lsl JOIN larrydb_review lr on lsl.sid = lr.sid WHERE display=true AND niche='regular' ORDER BY larry_ranking DESC Limit 2) UNION (SELECT shorthand, display, larry_ranking, site_url FROM larrydb_site_list lsl JOIN larrydb_review lr on lsl.sid = lr.sid WHERE display=true AND niche='regular' AND shorthand='sexier')"
Set rsFav = objConn.Execute(sSQL) 
```

我得到这个错误..

> ```
> ADODB.Recordset error '800a0cc1' Item cannot be found in the collection corresponding to the requested name or ordinal. 
> ```
> 
> /sandbox/inc_fav_sites.asp，第 29 行

我认为问题出在 sql 字符串中......不是在 asp 代码中......因为我没有碰它

这条线 29`<a href="http://livecamdeals.com/review.asp?sitename=<%=LCase(rsFav(""))%>"></a>`

对不起，我不知道asp编程但是sql ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:39:49.977

您的问题是，在 ASP 中，您向 RecordSet（即从 SQL 返回的结果）询问名为`""`(empty-string) 的列。

很明显，你的SQL没有返回这样的列！！

解决方法是更改​​ ASP 代码以选择正确的列。例如选择`site_url`列：

```
LCase(rsFav("site_url") 
```

# sql - 甲骨文 - Excel 视图

> ID：10312904
> 
> 赞同：1
> 
> 时间：2012-04-25T09:30:56.657
> 
> 标签：sql, oracle, excel

我使用 Oracle XE11g 和 Excel 2007。我在 SQL Developer 中创建了一个视图，它从多个表中选择字段。目的是允许 Excel 使用 ODBC 导入此视图。问题是视图没有按照我在 Excel 中想要的方式提供数据

如果我在 Excel 中使用我创建的视图，我会得到如下信息：

```
personname - testname    - time     - objectname   - result - date
Edward     - RunningTest - 15:22:01 - Speed (km/h) - 12     - 24-04-2012
Edward     - RunningTest - 15:22:01 - Heart Rate   - 98     - 24-04-2012
Edward     - RunningTest - 15:22:01 - Power        - 50     - 24-04-2012
Edward     - RunningTest - 15:22:02 - Speed (km/h) - 13     - 24-04-2012
Edward     - RunningTest - 15:22:02 - Heart Rate   - 99     - 24-04-2012
Edward     - RunningTest - 15:22:02 - Power        - 12     - 24-04-2012
Edward     - RunningTest - 15:22:03 - Speed (km/h) - 12     - 24-04-2012
Edward     - RunningTest - 15:22:03 - Heart Rate   - 100    - 24-04-2012
Edward     - RunningTest - 15:22:03 - Power        - 12     - 24-04-2012 
```

这是我使用的视图的查询：

```
select psn.naam personname
, tst.name testname
, tms.seconds time
, obj.name objectname
, trt.result result
, dtm.days date
from persons psn
, results rst
, times tms
, tests tst
, objects obj
, dates dts
where psn.id=trt.persons_id
and obj.id=trt.objects_id
and obj.tests_id=tst.id
and trt.date_id=dts.id
and rst.times_id=tms.id
and tst.name='RunningTest' 
```

请注意，查询被翻译成英文字段名，因此其中可能存在一些错误。

我希望在 Excel 中表示数据的方式是这样的：

```
Personname
Edward

Date
24-04-2012

    Time     - Speed (km/h) - Heart Rate - Power
    15:22:01 - 12           - 98         - 50
    15:22:02 - 13           - 99         - 52
    15:22:03 - 12           - 100        - 51
    etc------------ 
```

有什么方法可以构建视图，以便显示上面的数据？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:44:43.803

你有两个问题。首先是您的查询没有提供您在 Excel 中需要的数据。这是由于使用键值对而不是正确的模式而引起的经典问题。

这是一种可能的解决方案：

```
select psn.naam personname 
      , tst.name testname 
      , tms.seconds time 
      , rst1.result speed
      , rst2.result heartrate
      , rst3.result power
      , dtm.days date 
from persons psn 
     , results trt1 
     , results trt2 
     , results trt3 
     , times tms 
     , tests tst
     , objects obj 
     , dates dts 
where psn.id=trt.persons_id 
and obj.tests_id=tst.id 
and trt1.date_id=dts.id 
and trt2.date_id=dts.id 
and trt3.date_id=dts.id 
and trt1.times_id=tms.id 
and trt2.times_id=tms.id 
and trt3.times_id=tms.id 
and  ( ( obj.name = 'Speed (km/h)' and obj.id=trt1.objects_id )
       or  ( obj.name = 'Heart Rate' and obj.id=trt2.objects_id )
       or   ( obj.name = 'Power' and obj.id=trt3.objects_id )
      )
 and tst.name='RunningTest' 
```

警告：您的别名在翻译中被破坏了，所以这可能不起作用，但基本原则是您需要 RESULTS 表的三个实例，一个用于您从 OBJECTNAMES 表中调用的每个不同属性。

第二个问题是您的布局与结果集不匹配。这是另一个经典问题，这一次与使用错误的工作工具有关。电子表格并不是真正的 GUI 演示工具。Excel 的强大之处在于处理列矩阵和行矩阵。所以通常它非常适合使用数据库，因为查询返回列和行。

您处于泡菜状态，因为您想一次显示不同的某些列，并多次显示某些列。有许多不同的方法来处理这个问题。

1.  使用[内联游标表达式](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:7866466844558)返回锯齿状结果集。虽然坦率地说我不知道​​ ODBC 是否支持这一点以及 Excel 是否能够呈现它。
2.  使用两种查询，一种用于返回“主数据”——PersonName、Date——另一种用于检索详细信息——其他所有信息。
3.  使用您现有的查询将完整的结果集检索到一个工作表中，但向用户提供一个不同的工作表，该工作表使用引用来实现您需要的布局。
4.  使用适当的 GUI 开发工具来构建您的客户端应用程序。市场上有任何数量的。Apex 可能是一个不错的选择：[了解更多](http://apex.oracle.com/i/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:33:37.003

下面的 PIVOT 查询应该接近你想要的，但是如果没有数据可以玩，我不能 100% 确定 - 但它应该为你提供一个起点：

```
SELECT * FROM
  (SELECT * FROM
    (SELECT psn.NAAM PERSONNAME,
            tst.NAME TESTNAME,
            tms.SECONDS TIME,
            obj.NAME OBJECTNAME,
            rst.RESULT RESULT,
            dts.DAYS DATE
       FROM PERSONS psn,
            RESULTS rst,
            TIMES tms,
            TESTS tst,
            OBJECTS obj,
            DATES dts
       WHERE psn.ID = rst.PERSONS_ID AND
             obj.ID = rst.OBJECTS_ID AND
             obj.TESTS_ID = tst.ID AND
             trt.DATE_ID = dts.ID AND
             rst.TIMES_ID = tms.ID AND
             tst.NAME = 'RunningTest') t
   PIVOT(SUM(RESULT)
         FOR OBJECTNAME IN ('Speed (km/h)', 'Heart Rate', 'Power'))); 
```

分享和享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T17:52:20.450

您可以测试和使用现有的答案，并使用下面插入行尾

```
Select name || chr(10) || chr(13) || date || chr(10) || chr(13)|| other select columns in your view 
```

在 Windows 操作系统中达到预期的效果

采用 Bob 的答案并获得您想要的结果

```
SELECT PERSONNAME || chr(10) || chr(13) as PERSONNAME,
       DATE || chr(10) || chr(13) as DATE,
       chr(10) || chr(13) ||TESTNAME,
       OBJECTNAME,
       RESULT
  FROM (SELECT *
      FROM (SELECT psn.NAAM    PERSONNAME,
               tst.NAME    TESTNAME,
               tms.SECONDS TIME,
               obj.NAME    OBJECTNAME,
               rst.RESULT  RESULT,
               dts.DAYS    DATE
          FROM PERSONS psn,
               RESULTS rst,
               TIMES   tms,
               TESTS   tst,
               OBJECTS obj,
               DATES   dts
         WHERE psn.ID = rst.PERSONS_ID
           AND obj.ID = rst.OBJECTS_ID
           AND obj.TESTS_ID = tst.ID
           AND trt.DATE_ID = dts.ID
           AND rst.TIMES_ID = tms.ID
           AND tst.NAME = 'RunningTest') t PIVOT(SUM(RESULT) 
           FOR OBJECTNAME IN ('Speed (km/h)', 'Heart Rate', 'Power'))); 
```

# winforms - “调用的目标已抛出异常”

> ID：10312910
> 
> 赞同：0
> 
> 时间：2012-04-25T09:31:29.123
> 
> 标签：winforms, visual-studio-2010, exception

### 背景资料

我正在使用 VS2010 在 C# 中维护一个 Winforms 应用程序。主窗体有一个带有几个选项卡的 TabControl。启动对象是一个具有 Main 函数的类（这里没有什么新东西），它除了触发主窗体之外什么也不做。该表单创建一个 Datastore 对象，该对象从静态 Settings 类获取其到 DB 服务器的连接字符串。这个类有一个静态初始化块：

```
static Settings()
    {
        IniReader reader = new IniReader("config.ini");
        //...
    } 
```

配置文件位于主项目文件夹中（与启动对象相同）（也位于 bin 和 debug 文件夹中）。

### 问题

在解决方案资源管理器中，当我在设计器中双击主窗体以将其打开时，VS 会崩溃，并出现此问题标题中提到的异常，但还会出现错误，指出它在“找不到 config.ini 文件” C:\Program 文件 (x86)\Microsoft Visual Studio 10.0\Common7\IDE"。可以通过将配置文件复制到该位置来解决该问题，但我认为这不是一个真正的解决方案。 **为什么 VS 会在该位置搜索文件？** 奇怪的是，我上次打开解决方案时，并没有这个问题。从那以后，我没有安装新的 Windows 更新。

### *评论*

*应用程序的架构和其他设计决策不是我的。我只是在扩展程序，在这样做的同时，我正在尝试改进架构。但这不是这个问题的主题。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:11:55.367

我想你已经明白 VS 设计器创建了它试图显示的表单的一个实例，这意味着它将调用构造函数和任何静态构造函数。

我见过的避免此类问题的最常见模式是将任何重要的初始化逻辑移动到单独的 Initialise 方法中。在那里，除了构造函数之外的任何方法中，您都可以使用...

```
if (!DesignMode)
{
    //your code here
} 
```

...围绕在设计器中正确呈现表单实际上不需要的任何代码。我意识到这意味着对代码进行一些重构，您可能不想这样做，但我使用了这种方法，它很好地避免了这种问题。

# objective-c - 使用复选框启用/禁用日期选择器

> ID：10312913
> 
> 赞同：0
> 
> 时间：2012-04-25T09:31:50.270
> 
> 标签：objective-c, xcode, nsbutton, nsdatepicker

我正在尝试使用复选框启用和禁用日期选择器，但我不能。怎么了？

```
if ([checkBox state]==NSOnState) {
        [datePicker isEnabled];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:48:15.017

该`-isEnabled`方法询问是否启用了日期选择器。它不会改变任何东西。你`-setEnabled:`用来改变状态。例如：

```
[datePicker setEnabled:([checkBox state]==NSOnState)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:36:26.823

使用 $(object).attr('id','new_id') 将您的 Datepicker 输入 ID 更改为另一个 ID，因此 Datepicker 无法检测到输入框。前任 ：

这将是最简单的方法：D *或者这将是愚蠢的方法:)，但它有效

# iphone - rootViewController addSubview，键盘不工作IOS 4（工作在iOS5），为什么？

> ID：10312917
> 
> 赞同：0
> 
> 时间：2012-04-25T09:32:09.013
> 
> 标签：iphone, objective-c, ipad, ios5, ios4

我在 iOS4 上的应用程序（ipad）有问题。键盘不起作用，在第一个视图（登录视图）之后不会显示在我的 web 视图上。

应用程序：

```
AppDelegate.h 
    @class RootViewController;
    @interface StandardFacileAppDelegate : NSObject <UIApplicationDelegate> {
        UIWindow *window;
        RootViewController *rootViewController;
    }
    @property (nonatomic, retain) IBOutlet UIWindow *window;
    @property (nonatomic, retain) IBOutlet RootViewController *rootViewController;

AppDelegate.m
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    rootViewController = [[RootViewController alloc] init];                
     window.rootViewController = rootViewController;
    //[window addSubview:rootViewController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

根视图控制器：

```
- (void)viewDidLoad {
[super viewDidLoad];
[self loadViewController];
[self.view addSubview:viewController.view];
}
- (void)loadViewController {
ViewController *viewControllertemp = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
self.viewController = viewControllertemp;
[viewControllertemp release];} 
```

viewController 是我请求后的登录视图，我调用了更改视图的方法（我的 webview）：

```
- (void)changeViewToIpadTheWebView:(UIViewController *)fromView{

UIViewController *currentView = (UIViewController*)fromView;
NSLog(@"currentView =>%@",currentView);
if(!ipadTheWebView)
    [self loadipadTheWebView];
[currentView.view removeFromSuperview];
for (UIView *view in [self.view subviews]) {
    [view removeFromSuperview];
}
[self.view addSubview:ipadTheWebView.view]; 
```

NSURL *url = [NSURL URLWithString:@"http://www.google.com/"];

```
NSURLRequest *requestURL = [NSURLRequest requestWithURL:url];
[ipadTheWebView.webView loadRequest:requestURL]; 
```

我的 webview 没问题，但如果我想在 google 中搜索单词，当文本字段获得焦点时，键盘不会显示（视图滚动）。

有什么问题，这段代码适用于 iOS5 而不是 ios4？

谢谢你的帮助 ;）

编辑：谢谢马修，

```
RootViewController.h

#import <UIKit/UIKit.h>

@class ViewController;
@class IpadTheWebView;

@interface RootViewController : UIViewController {
    ViewController *viewController;
    IpadTheWebView *ipadTheWebView;

}
@property (nonatomic,retain) ViewController *viewController;
- (void)loadViewController;
- (void)changeViewToViewController:(UIViewController *)fromView;

@property (nonatomic,retain) IpadTheWebView *ipadTheWebView;
- (void)loadipadTheWebView;
- (void)changeViewToIpadTheWebView:(UIViewController *)fromView;

- (void)keyboardWillShow:(NSNotification *)notification;
- (void)keyboardWillHide:(NSNotification *)note;

@end 
```

# ruby-on-rails-3 - Rails 3.2 使用 content_tag 生成带有 twitter-bootstrap 图标的“删除”按钮

> ID：10312922
> 
> 赞同：7
> 
> 时间：2012-04-25T09:32:18.373
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, link-to, content-tag

我正在尝试使用 Rails 3 content_tag 方法复制此示例中的删除按钮图标，在嵌套表单中并使用 jQuery 不显眼（或者至少我希望如此）。

[Twitter-Bootstrap 删除按钮图标（示例）](http://www.w3resource.com/twitter-bootstrap/example-icon-buttons.html#)

使用 Firebug 检查时生成的 html 如下。

```
<a class="btn btn-danger" href="#">
  <i class="icon-trash icon-white"></i>
  Delete
</a> 
```

我正在使用以下内容生成带有图标的按钮，但无法向其中添加“删除成分”，也没有获得 href 的“#”。

这是我在部分成分中的代码：

```
<%= link_to content_tag(:a, content_tag(:i, '', class: "icon-trash icon-white"), class: "btn btn-danger remove_fields") %> 
```

这会产生：

```
<a class="btn btn-danger remove_fields">
  <i class=icon-trash icon-white"></i>
</a> 
```

这是基于来自 [Api 码头的信息 - content_tag](http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag)

其中有以下代码示例：

```
content_tag(:div, content_tag(:p, "Hello world!"), :class => "strong")
# => <div class="strong"><p>Hello world!</p></div> 
```

### 有人可以指出我正确的方向吗？为什么我错过了上面提到的细节？

注意我可以让它与一个 link_to 块一起工作，但想知道这是否可以在没有 do..end 的情况下在一行中完成，更重要的是在 content_for 方法中。

```
<%= link_to('#', class: "btn btn-danger remove_fields") do %>
  <i class: "icon-trash icon-white"></i>
  Delete
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:25:27.317

```
<%= link_to(body, url, html_options = {}) %> 
```

因此，您在 1 行中的请求是：

```
<%= link_to content_tag(:i, "", class: "icon-trash icon-white") + "Delete", path_to_stuff, method: :delete, class: "btn btn-danger remove_fields" %> 
```

最复杂的部分是“身体”。您只需要记住所有这些 content_tag 帮助器（包括 link_to 和其他）都返回一个字符串。

但是，这很丑陋。而且很长。并且难以维护。因此，您提出的解决方案要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:18:44.620

为什么不创建一个视图辅助方法

```
def link_to_delete
  link_to %{<i class="icon-trash icon-white"></i> Delete}, '#', class: "btn btn-danger remove_fields" 
end 
```

然后在你的视图中调用它`link_to_delete`

虽然你为什么需要你的它作为一个链接

```
def delete_button
  %{<span class="btn btn-danger remove_fields"><i class="icon-trash icon-white"></i> Delete</span>}
end 
```

我不太喜欢 content_for 但是：

```
content_tag(:span, %{#{content_tag(:i, nil, :class => "icon-trash icon-white")} Delete}.html_safe, :class => "btn btn-danger remove_fields") 
```

如果你想要它带有一个标签，只需更改`:span`为`:a`

# iphone - UITableView 分组显示每个部分的新信息

> ID：10312924
> 
> 赞同：1
> 
> 时间：2012-04-25T09:32:21.890
> 
> 标签：iphone, objective-c, ios, uitableview, parse-platform

我有一组评论，我将它们输出到一个分组表中。当我将sections 方法发送到[array count] 时，我希望每条评论都在它自己的tableview 部分中，它只是重复相同的组，因为数组中有许多项目。知道我该怎么做吗？我希望这是有道理的。谢谢

- 编辑 -

添加了我想要实现的图片和 cellForRow/Section/DidSelectRowMethod 的图片，我希望这能澄清一切

![在此处输入图像描述](../Images/a696e4c08ecf977e48501561fc2ccc0a.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object 
{

    static NSString *CellIdentifier = @"Cell";
    CustomCell * cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[CustomCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];

    }

    cell.primaryLabel.text = [object objectForKey:@"comment"];

    if([[object objectForKey:@"rating"] isEqualToString:@"0"])
    {
        cell.myImageView.image = [UIImage imageNamed:@"rating_0.png"];
    }
    if([[object objectForKey:@"rating"] isEqualToString:@"1"])    {
        cell.myImageView.image = [UIImage imageNamed:@"rating_1.png"];
    }
    if([[object objectForKey:@"rating"] isEqualToString:@"2"])
    {
        cell.myImageView.image = [UIImage imageNamed:@"rating_2.png"];
    }
    if([[object objectForKey:@"rating"] isEqualToString:@"3"])
    {
        cell.myImageView.image = [UIImage imageNamed:@"rating_3.png"];
    }
    if([[object objectForKey:@"rating"] isEqualToString:@"4"])
    {
        cell.myImageView.image = [UIImage imageNamed:@"rating_4.png"];
    }
    if([[object objectForKey:@"rating"] isEqualToString:@"5"])
    {
        cell.myImageView.image = [UIImage imageNamed:@"rating_5.png"];
    }

    return cell;

}

// Override if you need to change the ordering of objects in the table.
- (PFObject *)objectAtIndex:(NSIndexPath *)indexPath 
{ 
    return [self.objects objectAtIndex:indexPath.row];
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PFObject *object = [self.objects objectAtIndex:indexPath.row];
    Review *review = [[Review alloc] initWithNibName:@"Review" bundle:nil];
    review.Name = [object objectForKey:@"userId"];
    NSLog(@"%@",[object objectForKey:@"userId"]);
    review.rating = [object objectForKey:@"rating"];
    review.comments = [object objectForKey:@"comment"];

    [self.navigationController pushViewController:review animated:YES];

    [review release];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    return [self.objects count];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:46:57.807

只需为每个部分的 numberOfRowsFor 返回 1。在您的代码中添加我给定的代码

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
   return 1;
 } 
```

这意味着每个部分只有 1 个单元格或行。我希望这是您想要实现的目标。（每条评论现在都有自己的部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:10:18.757

由于您希望每个评论都在一个单独的组中，因此您必须使用索引路径的部分而不是数组索引的行（该行将始终为 0，因为每个部分只有一行）：

```
// Override if you need to change the ordering of objects in the table.
- (PFObject *)objectAtIndex:(NSIndexPath *)indexPath 
{ 
    return [self.objects objectAtIndex:indexPath.section];
} 
```

# .net - 如何在 Silverlight 中显示 X.509 证书详细信息？

> ID：10312926
> 
> 赞同：1
> 
> 时间：2012-04-25T09:32:28.747
> 
> 标签：.net, silverlight, x509certificate

在 .NET 4 后端中，我们有一个 X.509 证书，其形式为[`X509Certificate2`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.aspx)or的实例[`X509Certificate`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate.aspx)。在其 Silverlight 前端，我们希望显示该证书的详细信息。

在 .NET 中，我们可以简单地使用[`X509Certificate2UI`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2ui.aspx)它，这会打开标准的 Windows 证书详细信息对话框。（**更新：**此对话框可以显示任何`X509Certificate2`实例，无论它来自何处。）但该类在 Silverlight 中不可用。（请注意，`X509Certificate2`Silverlight 中也没有，但[`X509Certificate`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate%28VS.95%29.aspx)可以。）

我目前看到的唯一方法是将 的实例发送`X509Certificate`到前端（**更新**：我知道该怎么做），并在该信息之上构建我们自己的 Silverlight UI。

我的问题：有没有更简单的方法，或者这样的用户界面已经从某个地方可用了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T19:18:33.597

您可以在 .Net 中创建一个调用 X509Certificate2UI 的 Com 自动化对象，运行您的 Silverlight 应用程序完全信任，并使用 AutomationFactory.CreateObject 来调用该对象。

注意：调用 com 对象的安全上下文可能与用户的安全上下文不同；您可能需要适当地为证书设置安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:44:37.777

我记得 X509Certificate2UI 向您显示 Windows 证书对话框，也可以通过“证书”中的 microsoft 管理控制台 snap 访问该对话框。

我猜它只能显示本地证书。而且由于 silverlight 安全限制，我还猜测该事件是不可能的（作为 web 应用程序运行时）。

但是，如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:43:40.693

您从托管 silverlight 对象的 asp.net 应用程序中获取您想要显示的信息，并通过该对象的 InitParams 传递您想要显示的信息，然后在 App.xaml.cs 文件中检索它们。我正在使用这种方法来传递 Web 服务端点配置。您可以传递键/值的任意组合。

如果您不熟悉，请参阅此 msdn 链接以获取有关该方法的更多详细信息。

[http://msdn.microsoft.com/en-us/library/cc189004%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc189004%28v=vs.95%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T13:17:13.920

[`X509Certificate`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate%28VS.95%29.aspx)由于缺乏积极响应，我得出结论，最简单的选择是在实例之上构建我们自己的 UI 。对于一个*非常*简单的实现，调用[`X509Certificate.ToString(true)`](http://msdn.microsoft.com/en-us/library/s62tkfx8%28v=vs.95%29.aspx)（或服务器端上的等效`X509Certicate2`项）并将结果文本显示给用户。结果并不是真正的用户友好，但至少所有信息都在那里。

# mysql - MySQL查询：选择组中值最高的记录

> ID：10312928
> 
> 赞同：1
> 
> 时间：2012-04-25T09:32:31.283
> 
> 标签：mysql

我有一个这样的 MySQL 表。

```
| season_id | round_1 | names  | score_round_1
| 5         | 10      | John1  | 5  
| 5         | 10      | John2  | 3
| 5         | 11      | John3  | 2
| 5         | 11      | John4  | 5 
```

我想在每个 round_1(10,11) 组中选择 score_round_1 最高的记录。

在这种情况下，将选择第一行和最后一行。

我尝试使用 GROUP BY round_1 但只返回两者中的第一行。

有什么建议吗？

佐尔卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:57:18.880

这很简单

```
select max(score_round_1),
       name
from score
group by round_1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:37:08.867

使用聚合函数[MAX](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)

```
SELECT names, MAX(score_round_1) GROUP BY round_1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:41:20.460

```
SELECT *
FROM table p1
WHERE score_round_1 = (
SELECT MAX( p2.score_round_1 )
FROM table p2
WHERE p1.round_1  = p2.round_1  ) ANDround_1 !=0 
```

# apache - Tomcat子域关联

> ID：10312933
> 
> 赞同：2
> 
> 时间：2012-04-25T09:32:41.463
> 
> 标签：apache, tomcat, configuration, subdomain, mod-proxy

我有一个 Spring 应用程序，可以在 Amazon AWS 上作为 www.mydomain.com 访问。现在我希望在 mysubdomain.mydomain.com 下可以访问同一个 Amazon 实例下的另一个 Spring 应用程序（因此使用同一个 tomcat）。我的 tomcat 前面是 Apache。

www.mydomain.com对应的App位于：

> /env/tomcat/apache-tomcat-7.0.26/webapps / **ROOT**

为了在 mysubdomain.mydomain.com 上可以访问该应用程序，我在以下位置创建了另一个文件夹：

> /env/tomcat/apache-tomcat-7.0.26/ **mysubdomainapps** /ROOT

下面是 server.xml 和 httpd.conf 的内容

**服务器.xml**

```
 http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port="8005" shutdown="SHUTDOWN">
  <!-- Security listener. Documentation at /docs/config/listeners.html
  <Listener className="org.apache.catalina.security.SecurityListener" />
  -->
  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />
  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container",
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-"
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="80" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />
    -->
    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">
    -->
    <Engine name="Catalina" defaultHost="localhost">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->

      <!-- Use the LockOutRealm to prevent attempts to guess user passwords
           via a brute-force attack -->
      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key "UserDatabase".  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  -->
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
               resourceName="UserDatabase"/>
      </Realm>

      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern="common" -->
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />

      </Host>
        **<Host name="mysubdomain.mydomain.com" appBase="mysubdomainapps" unpackWARs="true" autoDeploy="true"></Host>**

    </Engine>
  </Service>
</Server> 
```

**httpd.conf**

```
<VirtualHost *:80>
  ServerName localhost

  ProxyRequests Off
  ProxyPreserveHost On

  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  ProxyPass / http://localhost:8080/
  ProxyPassReverse / http://localhost:8080/
</VirtualHost>

<VirtualHost *:80>
  ServerName mysubdomain.mydomain.com

  ProxyRequests Off
  ProxyPreserveHost On

  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>

  ProxyPass / http://localhost:8080/
  ProxyPassReverse / http://localhost:8080/
</VirtualHost> 
```

我试图解决它已经好几个小时了，但没有成功。
我真的很感谢你的帮助。

谢谢，
詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:14:38.607

有效！对于 DNS，我之前创建了一个 CNAME。我试过A-record，效果很好！

# python - 从 Python SimpleCookie 中检索值并在 SELECT 查询中使用它

> ID：10312936
> 
> 赞同：0
> 
> 时间：2012-04-25T09:32:52.223
> 
> 标签：python, cookies, cgi

我昨天发布了一个问题： [将 python 脚本重定向到另一个 python 脚本以验证登录凭据](https://stackoverflow.com/questions/10294473/redirect-python-script-to-another-python-script-for-validation-of-login-credenti)

在我完成了那一点之后，我遇到了另一个与 cookie 有关的问题。我从 python 脚本代码中发送了标头中的 cookie：

```
 #Create Cookie
        C= Cookie.SimpleCookie()
        #take the value of usernameLogin into the variable username
        username= form.getvalue('usernameLogin')
        #Set-Cookie header with the usernameLogin key
        C['usernameLogin'] = username 
```

这段代码在前面的 python 脚本**validate.py中**

我想将 cookie 发送到下一个脚本**page1.py** 这是我的**page1.py**代码：

```
import cgi
import cgitb
import sqlite3
import Cookie
import os

user_name=""
user_id=""
useridDb=""
resultid=""
resultname=""
idUser=""
if os.environ.has_key("HTTP_COOKIE"):
    C= Cookie.SimpleCookie(os.environ.get("HTTP_COOKIE",""))
    if C.has_key("usernameLogin"):
        user_name= C['usernameLogin'].value
        print user_name

form= cgi.FieldStorage()
cgitb.enable()

#Open connection
conn= sqlite3.connect("manager.db")

page1head= """

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Excursions</title>
    <link rel='stylesheet' type='text/css' href='/page1.css/' />
    <script lang="javascript" type="text/javascript" src="/suggestions.js/"> </script>

</head><body>

    <div id="container">
        <div id="header">
            <h1>Field Note Manager</h1>
            <p class="description">Observe...Record...Save!</p>
        </div>

        <!-- Content Section -->
        <div id="wrapper">
        <!-- Main Content Section -->
            <div id="content">

                <h2>Excursions</h2>

                    <table CELLPADDING="10" ><tr><th> <strong> Location </strong> </th><th> <strong> Date </strong> </th> <th> Time </th></tr>"""

page2head="""</table>

            </div>
        </div>

        <!-- Logout Section -->
        <div id="navigation">

             <input type="hidden" name="greeting"/>
                         <form action="http://localhost:8000/cgi-bin/logout.py">
             <p><input type="submit" name="logoutBtn" value="Logout" /> </p>
            </form>
        </div>

        <!-- Extra Section for Queries -->
        <div id="extra">
            <h2>Quick Links</h2>            

            <dl> <dd><a href="http://localhost:8000/cgi-bin/query.py"/>Query the Database</a> </dd></dl>
            <dl> <dd><a href="http://localhost:8000/cgi-bin/addFieldNote.py"/>Add Field Note</a> </dd></dl>

        </div>

        <!-- Footer -->
        <div id="footer">
            <p>Copyright  42578647, 2012</p>
        </div> 
    </div>
"""

page1foot= """

</body>
</html>
"""

print "Content_type: text/html\n\n"
print page1head

#print excursion details
cur=conn.cursor()
resultid= cur.execute("SELECT userid FROM login WHERE username=?",[user_name])
cur.fetchone()
for data in resultid:
    idUser= int(data)
resultname= cur.execute("""SELECT location,excurDate,excurTime FROM excursion WHERE user=?""",[idUser])
cur.fetchall()
for record in resultname:
    print"<tr><td>",record[0],"</td><td>",record[1],"</td><td>",record[2],"</td></tr>"
print page2head
print page1foot 
```

它打印页面，但不生成查询。是因为 cookie 没有被检索和解析，还是 SELECT 语句有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:51:37.733

我找到了答案。在之前的 validate.py 中的 header 之前没有设置 cookie

# spring - 数据库配置参数的数据源与persistence.xml

> ID：10312939
> 
> 赞同：0
> 
> 时间：2012-04-25T09:32:59.683
> 
> 标签：spring, jpa, datasource, persistence.xml

在我的项目中，我将 spring 与 jpa 一起使用，当我到达配置文件时，我的意思是 appContext.xml 和 persistence.xml，我遇到了以下情况：当我将 db 配置放在 persistence.xml 中时从 appContext.xml 中删除数据源**没有任何作用**，但是当我将 bd 配置移动到 appContext 到应用程序正在运行的 dataSource 标记（带有属性）中时，有人可以解释一下吗？提前致谢！

持久性.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
version="1.0">
<persistence-unit name="test" transaction-type="RESOURCE_LOCAL">
    <class>ma.persistence.dto.Subscriber</class>
    <class>ma.persistence.dto.Profile</class>
    <class>ma.dto.Title</class>
</persistence-unit>
</persistence> 
```

AppContext.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:p="http://www.springframework.org/schema/p"  xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="ma.persistence"/>
<context:annotation-config />
<tx:annotation-driven />
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource"
    p:driverClassName="com.mysql.jdbc.Driver"  p:url="jdbc:mysql://localhost:3306/MyDB"
    p:username="username" p:password="password" />

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
    p:dataSource-ref="dataSource" p:jpaVendorAdapter-ref="jpaAdapter">
    <property name="loadTimeWeaver">
        <bean
             class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="databasePlatform"
                value="org.hibernate.dialect.MySQLInnoDBDialect" /> 
        </bean>
    </property>
</bean>
<bean  id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
    p:entityManagerFactory-ref="entityManagerFactory" />
<bean id="jpaAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
    p:database="MYSQL" p:showSql="true" /> 
```

# unit-testing - WP7 3 层架构单元测试

> ID：10312944
> 
> 赞同：2
> 
> 时间：2012-04-25T09:33:18.967
> 
> 标签：unit-testing, windows-phone-7, azure

我有一个 WP7 应用程序，它使用 3 层架构，中间有一个 Azure 服务来执行所有数据库操作，但是在尝试为此编写单元测试时遇到了困难。

任何人都可以建议我如何测试我的系统的任何方法

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:31:53.560

通常的单元测试解决方案在这种情况下可以正常工作。在 Windows Phone 端，您可以创建一个模拟服务。也就是说，您实际上并没有连接到 Windows Azure，但您有一个与 Windows Azure 服务接口相同的接口。该接口返回一些模拟数据。您针对这个模拟接口进行测试。在 Windows Azure 端，您需要对数据访问层以及服务层进行一些单元测试。我假设你使用实体框架，你可以创建一个单元测试来测试 CRUD 操作而不引入服务。至于服务层，你需要在另一个单元测试中添加一个服务引用（假设你使用的是SOAP或OData），然后进行测试。

# jquery - 为什么 twitter bootstrap.js 在 jQuery 插件中使用 $.Event 对象？

> ID：10312947
> 
> 赞同：2
> 
> 时间：2012-04-25T09:33:25.477
> 
> 标签：jquery, events, twitter-bootstrap

对于 twitter bootstrap.js 插件中的[模式](http://twitter.github.com/bootstrap/javascript.html#modals) [代码](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-modal.js)，我看到了这个：

```
e = $.Event('show')
this.$element.trigger(e) 
```

他们为什么不这样做`$.element.show()`？

为什么要使用[jQuery Event 构造函数](http://api.jquery.com/category/events/event-object/)？

以下是源代码中的 show 方法：

```
show: function () {
   var that = this
      , e = $.Event('show')

    this.$element.trigger(e)

    if (this.isShown || e.isDefaultPrevented()) return

    $('body').addClass('modal-open')

    this.isShown = true

    escape.call(this)
    backdrop.call(this, function () {
      var transition = $.support.transition && that.$element.hasClass('fade')

      if (!that.$element.parent().length) {
        that.$element.appendTo(document.body) //don't move modals dom position
      }

      that.$element.show()

      if (transition) {
         that.$element[0].offsetWidth // force reflow
      }

      that.$element.addClass('in')

      transition ?
        that.$element.one($.support.transition.end, function () { that.$element.trigger('shown') }) :
        that.$element.trigger('shown')

    })
  } 
```

有人可以向我解释清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:38:51.453

那是因为它让我们有机会对事件做出反应。

多亏了这一点，如果您想在模式打开时做出反应，您只需添加一个事件侦听器：

```
$("#myModal").on("show", function () {
    console.log("Do stuff on 'show'");
}); 
```

只是要清楚。他们创建了一个名为“show”的事件，但可以是任何名称，因为它仅用于该插件。即使他们叫“showme-the-money”，你也应该只听那个事件：

```
$("#myModal").on("showme-the-money", function () {
    console.log("Sorry i'm poor :(");
}); 
```

# java - 为什么警告框一次又一次地出现？

> ID：10312948
> 
> 赞同：0
> 
> 时间：2012-04-25T09:33:25.633
> 
> 标签：java, javascript, jsp

在成功尝试上传文件后，请求被转发到他的主页，即他上传文件的同一页面。如果上传成功，在转发请求之前，会设置一个属性，告知“是的，文件已成功上传！”。

执行用户主页中的以下代码，旨在检查是否必须告知用户上传尝试成功。如果用户曾经看到过提示框形式的成功信息，下次上传另一个文件成功时应该会看到成功信息。但是在我重新加载/刷新页面的第一次尝试之后，我再次看到警告框告诉用户成功上传尝试，即使我已经从请求列表中删除了该属性。

**文件上传尝试成功后向用户显示成功消息的片段**

```
<script>
        window.onload = function() {
        <% message = (String)request.getAttribute("SuccessMessage");
           AttemptToUploadFile = (Boolean)request.getAttribute("UploadAttempt");
           request.removeAttribute("SuccessMessage"); // Remove the attribute so that alert box doesn't pop every time the page is refreshed
              if(message != null) {%>
                      alert("File successfully uploaded !");
                          <% } %>

        }
    </script> 
```

为什么即使我删除了特定属性，我还是会一次又一次地看到警告框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:15:10.447

您对 HTTP 的工作原理以及“服务器端”和“客户端”概念存在概念性误解。

每当与特定 HTTP 请求关联的 HTTP 响应完成将响应主体（在这种特殊情况下为 JSP 生成的 HTML 源代码）发送到客户端的工作时，请求属性就**已经被丢弃/垃圾。**

在浏览器中刷新/重新加载页面（并忽略浏览器关于数据将被重新发送的警告！）将导致原始 HTTP 请求数据重新发送到服务器，因此服务器将再次处理整个 HTTP 请求并设置再次请求属性。显式删除该属性不会解决它，并且它本身没有完全的意义。

我不确定功能要求是什么。您要允许最终用户再次重新发送上传的文件吗？为什么不再显示该消息？不应该警告最终用户他/她正试图再次重新发送文件，这首先是错误的吗？在这种情况下，在方法中添加一个额外的检查，在该`doPost()`方法中，您根据磁盘上已存储的文件或会话范围内的某些映射来验证文件名，并让它忽略请求并引发一些异常或显示不同的消息.

```
String filenameOfUploadedFile = getItSomehow();

if (isAlreadyUploaded(filenameOfUploadedFile)) {
    request.setAttribute("message", "Error, the file is already uploaded!");
}
else {
    // Process.
    // ...

    request.setAttribute("message", "File upload is successfully processed!");
} 
```

然后您的 JSP 代码可以简化为：

```
<script>
    <c:if test="${not empty message}">
        window.onload = function() {
            alert('${message}');
        }
    </c:if>
</script> 
```

*（虽然我个人不同意通过 90 年代风格警报提供反馈的方式）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:37:17.307

在随后的页面加载中，消息可能仍然不为空。也许您需要检查未定义的消息或其他内容。您是否在调试器中查看过消息的值？Firebug 对此有好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:57:13.540

你的消息是在请求级别。所以jsp的removeAttribute没有做任何事情，每次你重新加载/刷新时都会重新出现消息。这是因为每次刷新/重新加载时，都会创建一个新请求。

您将需要检查您在控制器端设置消息和处理逻辑的确切位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T10:20:30.257

在客户端修改请求是没有用的，因为当您刷新页面时，我猜您的 Servlet 会再次被调用并重新创建属性。

您应该在服务器端删除属性（使用标志或其他东西）并避免修改 JSP 中的请求对象。

# iphone - 我在哪里可以免费在线存储我的 plist 并且我的应用程序可以下载它？

> ID：10312959
> 
> 赞同：0
> 
> 时间：2012-04-25T09:34:04.940
> 
> 标签：iphone, ios, ios5, hosting, plist

我有一个应用程序，它可以从 URL 下载最新的 .plist。有没有一个网站可以免费上传我的 plist 文件，当用户使用我的应用程序时，它会毫不费力地下载 plist？

目前我的应用程序正在本地查看 plist。我想在线存储我的文件，以便我所做的任何更改都可以由我上传，然后在使用应用程序时下载。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:39:53.143

您可以使用免费的托管网站在线存储它，例如[**en.altervista.org**](http://en.altervista.org/)提供的网站：该网站看起来像一个子域（例如 bigsman.altervista.org），它具有 FTP 访问和其他功能，全部免费。在我看来，这是最好的免费解决方案。我已经在我的一些项目中使用了它，一切都很顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:38:04.030

您可以使用 Dropbox 或新的谷歌存储之类的东西，但您需要检查条款和条件以查看是否允许。

但是，如果您想发布您的应用程序，最好的地方是您的支持站点，您必须在此过程中创建该站点

# java - 如何使用 Java 代码查看 JTextPane 中的段落符号？

> ID：10312961
> 
> 赞同：4
> 
> 时间：2012-04-25T09:34:09.143
> 
> 标签：java, swing, applet, jtextpane, japplet

如何在使用 Java中查看[*pilcrow*](http://en.wikipedia.org/wiki/Pilcrow) ¶ `JTextPane`请告知我或向我发送任何示例代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T10:04:52.710

在[*你*](http://www.fileformat.info/info/unicode/char/b6/index.htm)的`JTextArea`. 例如，

```
textArea.append("\u00B6"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T10:06:06.307

使用这个[http://java-sl.com/showpar.html](http://java-sl.com/showpar.html)

# javascript - 带和不带引号和括号的 setTimeout 之间的区别

> ID：10312963
> 
> 赞同：244
> 
> 时间：2012-04-25T09:34:15.317
> 
> 标签：javascript, settimeout

我正在学习 JavaScript，最近我了解了 JavaScript 计时事件。`setTimeout`当我在[W3Schools](http://www.w3schools.com/js/js_timing.asp)了解时，我注意到一个我以前没有遇到过的奇怪人物。他们使用双引号，然后调用该函数。

例子：

```
setTimeout("alertMsg()", 3000); 
```

我知道 JavaScript 中的双引号和单引号表示字符串。

我也看到我可以这样做：

```
setTimeout(alertMsg, 3000); 
```

带括号的是引用，不带括号的是复制。当我使用引号和括号时，它变得疯狂。

如果有人可以向我解释这三种使用方式之间的区别，我会很高兴`setTimeout`：

带括号：

```
setTimeout("alertMsg()", 3000); 
```

没有引号和括号：

```
setTimeout(alertMsg, 3000); 
```

第三个是只使用引号：

```
setTimeout("alertMsg", 3000); 
```

* * *

注意：更好的`setTimeout`参考来源是[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)。

* * *

## 回答 #1

> 赞同：384
> 
> 时间：2012-04-25T09:39:08.067

## 使用`setInterval`或`setTimeout`

您应该传递对函数的引用作为`setTimeout`or的第一个参数`setInterval`。该参考可能采用以下形式：

*   匿名函数

    ```
    setTimeout(function(){/* Look mah! No name! */},2000); 
    ```

*   现有函数的名称

    ```
    function foo(){...}

    setTimeout(foo, 2000); 
    ```

*   指向现有函数的变量

    ```
    var foo = function(){...};

    setTimeout(foo, 2000); 
    ```

    [请注意，我将“函数中的变量”与“函数名”分开设置。变量和函数名称占用相同的命名空间并且可以相互破坏并不明显。]

## 传递参数

要调用函数并传递参数，您可以在分配给计时器的回调中调用该函数：

```
setTimeout(function(){
  foo(arg1, arg2, ...argN);
}, 1000); 
```

还有另一种方法可以将参数传递给处理程序，但[它不是跨浏览器兼容的](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Callback_arguments)。

```
setTimeout(foo, 2000, arg1, arg2, ...argN); 
```

## 回调上下文

默认情况下，回调的上下文（`this`定时器调用的函数内部的值）是全局对象`window`。如果您想更改它，请使用`bind`.

```
setTimeout(function(){
  this === YOUR_CONTEXT; // true
}.bind(YOUR_CONTEXT), 2000); 
```

## 安全

尽管有可能，但您不应[将字符串传递](https://developer.mozilla.org/en/DOM/window.setTimeout#Passing_string_literals)给`setTimeout`or `setInterval`。传递字符串会产生`setTimeout()`或`setInterval()`使用类似于将字符串作为脚本执行的功能[`eval()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)，[从而](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)使任意且可能有害的脚本执行成为可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:44:28.017

我认为您编写的 setTimeout 函数没有运行。如果您使用 jquery，则可以通过执行以下操作使其正确运行：

```
 function alertMsg() {
      //your func
    }

    $(document).ready(function() {
       setTimeout(alertMsg,3000); 
       // the function you called by setTimeout must not be a string.
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T09:44:02.290

完全同意约瑟夫。

这是一个测试这个的小提琴：http: [//jsfiddle.net/nicocube/63s2s/](http://jsfiddle.net/nicocube/63s2s/)

在小提琴的上下文中，字符串参数不起作用，在我看来，因为该函数未在全局范围内定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-27T19:19:09.493

如果您将字符串作为函数的第一个参数传递，实际会发生什么

> 设置超时( `'string'`, `number`)

是在运行时间（经过`number`几毫秒之后）评估第一个参数的值。基本上等于

> 设置超时( `eval('string')`, `number`)

这是

> 另一种语法允许您包含字符串而不是函数，该函数在计时器到期时编译并执行。不建议使用此语法，原因与使用 eval() 存在安全风险的原因相同。

所以你提到的样本不是好的样本，可能会在不同的上下文中给出，或者只是简单的错字。

如果你像这样调用`setTimeout(something, number)`，第一个参数不是字符串，而是指向一个名为`something`. 再次如果`something`是字符串 - 那么它将被评估。但如果它是函数，那么函数将被执行。 [jsbin 示例](https://jsbin.com/gaqeqihade/edit?js,console)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-29T12:20:49.943

```
 ##If i want to wait for some response from server or any action we use setTimeOut.

    functionOne =function(){
    console.info("First");

    setTimeout(()=>{
    console.info("After timeOut 1");
    },5000);
    console.info("only setTimeOut() inside code waiting..");
    }

    functionTwo =function(){
    console.info("second");
    }
    functionOne();
    functionTwo();

## So here console.info("After timeOut 1"); will be executed after time elapsed.
Output:
******************************************************************************* 
First
only setTimeOut() inside code waiting..
second
undefined
After timeOut 1  // executed after time elapsed. 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-19T19:54:46.397

带括号：

```
setTimeout("alertMsg()", 3000); // It work, here it treat as a function 
```

没有引号和括号：

```
setTimeout(alertMsg, 3000); // It also work, here it treat as a function 
```

第三个是只使用引号：

```
setTimeout("alertMsg", 3000); // It not work, here it treat as a string 
```

```
function alertMsg1() {
        alert("message 1");
    }
    function alertMsg2() {
        alert("message 2");
    }
    function alertMsg3() {
        alert("message 3");
    }
    function alertMsg4() {
        alert("message 4");
    }

    // this work after 2 second
    setTimeout(alertMsg1, 2000);

    // This work immediately
    setTimeout(alertMsg2(), 4000);

    // this fail
    setTimeout('alertMsg3', 6000);

    // this work after 8second
    setTimeout('alertMsg4()', 8000);
```

> 在上面的示例中，第一个 alertMsg2() 函数立即调用（我们给出了 4S 的超时时间，但它不打扰），然后 alertMsg1()（等待 2 秒）然后 alertMsg4()（等待 8 秒）但是 alertMsg3() 不起作用，因为我们将它放在引号中而没有参与方，因此它被视为字符串。

# delphi - 将可写虚拟字段添加到可更新的 TClientDataset

> ID：10312966
> 
> 赞同：2
> 
> 时间：2012-04-25T09:34:30.947
> 
> 标签：delphi, delphi-7, tclientdataset

我有一个数据库表，我需要在其中插入记录。我正在使用可更新的 TClientDataset，一切正常。

现在，我需要添加一个虚拟字段；不是经过计算的。我可以在其中写入行状态的一个字段（只是我将在 ApplyUpdates 之前使用的一些信息），但这不是数据库表的一部分。

我看过[这篇很有启发性的帖子](https://stackoverflow.com/questions/4934103/how-can-i-add-fields-to-a-clientdataset-at-runtime)，但是添加的字段是计算出来的，无法更新和保留信息。这对我来说不好。

我试图从数据库选择中添加一个“虚拟字段”并修复 ProviderFlags 以删除 pfUpdate。

```
cds.CommandText := 'SELECT 1 AS DUMMY , CUSTOMERS.* FROM CUSTOMERS';
cds.Open;
cds.FieldByName('DUMMY').ProviderFlags := []; 
```

我在 Provider.pas 中看到，在构建插入 sql 之前，会检查 ProviderFlags。这确实应该有效，问题是 ProviderFlags 似乎没有从我上面的声明中更新。

请问，你知道如何动态添加一个字段，它是可写的，但被delphi数据库更新过程忽略了？

我正在使用德尔福 7。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T10:13:11.653

将该字段设为*InternalCalc*字段并将其*ProviderFlags*设置为*[]*。这使该字段对您的应用程序可写，但在更新底层数据库时会跳过该字段。

# java - java逆大整数？

> ID：10312970
> 
> 赞同：1
> 
> 时间：2012-04-25T09:34:47.500
> 
> 标签：java

我知道：p，b，g，

```
(g^(a*b)) mod p = X 
```

b,p,g 是大整数

现在我想要计算：`g^a mod p`

```
{X^(b^-1)} mod p = g^(a*b*(b^-1))) mod p = g^a mod p 
```

在java`BigInteger`中只 `modInverse(BigInteger m)` 返回一个`BigInteger`其值为`(this^-1 mod m).`

`b^-1`java中如何计算`BigInteger`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:53:27.957

使用`modInverse`方法

```
BigInteger bInverse = b.modInverse(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:39:06.623

调用[modPow](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#modPow%28java.math.BigInteger,%20java.math.BigInteger%29)怎么样？

来自文档：`Returns a BigInteger whose value is (thisexponent mod m)`。这听起来像`g^a mod p`我。

# ios - 在 RKManagedObjectMapping 中，我可以使用核心数据实体的“关系”作为 primaryKeyAttribute 吗？

> ID：10312972
> 
> 赞同：0
> 
> 时间：2012-04-25T09:35:04.877
> 
> 标签：ios, core-data, restkit

说，我的核心数据结构是这样的......

* * *

班级

*   classID <- RestKit 主键属性
*   姓名
*   时间
*   学生（关系一对多）

学生（嵌套在班级中）

*   学生卡
*   姓名
*   类（反向关系）<- RestKit primaryKeyAttribute **** 这不起作用？！****

* * *

我指定了映射的primaryKeyAttribute，如上所示。当我使用 restkit 发送加载请求时，它会正确更新具有相同主键的对象。RestKit 似乎可以正确更新班级，但对于学生来说，它只是添加新班级并取消旧学生的班级关系。所以现在我在 db 中有不需要的学生实体，没有参考类。

有没有办法可以使用 RestKit 正确更新学生关系？顺便说一句，我考虑过使用 studentID 作为 primaryKeyAttribute，但如果在新更新中删除了一些学生，它可能无法正常工作。可能是我必须在更新之前清除所有学生的班级，但我也不知道如何在 RestKit 中做到这一点。因为在调用 RKObjectLoader didLoadObject 时，似乎所有内容都已保存到 managedObjectContext。有任何想法吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:01:34.623

仍然找不到 RestKit 方式的解决方案，而且看起来没有人可以回答这个问题：-\ 所以我发布了我能想到的最佳方法。

我目前的工作是遍历班级的学生并在`objectLoader:willMapData:`. 我必须在这里（不是在`objectLoader:didLoadObject:`），因为它是新数据尚未保存到 MOC 的地方。

您也可以完全删除 Class 实体，但这种方式实际上不会更新旧实体。它使用新的“核心数据内部_pk”（主键）创建一个新的（是的，我确实关心它）。

# c++ - 在需要定义时避免循环类依赖

> ID：10312975
> 
> 赞同：1
> 
> 时间：2012-04-25T09:35:45.113
> 
> 标签：c++, templates

```
template <class T=A>
struct B {
   T a;
};

struct A {
    B<A> foo(){
       B<A> result;
       return result;
    }
}; 
```

如何避免使用模板（注意默认参数以查看其用法）。问题是这两个类都需要彼此的定义。但是正如模板解决方案所示，没有“真正的”循环依赖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T09:39:56.793

您可以利用这样一个事实，即在您按值返回的情况下，前向声明就足够了（就像 的情况一样`A::foo`）：

```
struct B;

struct A {
  B foo();
};

struct B {
  A a;
};

B A::foo() {
  B result;
  return result;
} 
```

# java - 如何限制一个函数，使其不能抛出任何类型的异常

> ID：10312979
> 
> 赞同：1
> 
> 时间：2012-04-25T09:36:00.453
> 
> 标签：java, exception, exception-handling

如何限制函数使其不能抛出任何异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:38:56.200

捕获方法中的所有异常。

```
public void myMethod() {
    try {
       // do something
    } catch (Exception e) {
       e.printStackTrace();
    }
} 
```

如果您想捕获任何类型的异常或错误，包括 OutOfMemoryError 或 ThreadDeath 等，请使用

```
 } catch (Throwable t) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T09:38:27.137

只需将所有代码包装在 try catch 块中即可。

```
public void someMethod(){
 try{
  //your code
 }catch (Exception e){
   //do nothing
 }
} 
```

在 Java 教程中阅读有关异常和 Try/Catch 的更多信息：http: [//docs.oracle.com/javase/tutorial/essential/exceptions/index.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/index.html)

# mysql - MySQL like 语句错误

> ID：10312981
> 
> 赞同：0
> 
> 时间：2012-04-25T09:36:02.087
> 
> 标签：mysql, sql-like

我正在尝试选择一个申请者 ID 等于“Staff01”的数据，并且我正在使用这个条件：

```
WHERE
IF (c.use_id_as_emp_no = '0', ccal.applicant_id, cc.contractor_idPK) LIKE '%staff01%' 
```

发生的情况是，当我执行查询时，没有结果。但是，如果我删除 LIKE 语句中字符串的第一个字母（即 s），则会显示结果。

另一件事是，当我删除上述条件的 IF 语句时，它看起来像这样：

```
WHERE
ccal.applicant_id LIKE '%staff01%' 
```

显示了带有申请者 ID Staff01 的数据。

是 IF 语句导致 LIKE 功能发生故障吗？请帮我。我在这方面很难过。非常感谢。

编辑：在比较中使用 LCASE() 解决

```
WHERE
IF (c.use_id_as_emp_no = '0', LCASE(ccal.applicant_id), cc.contractor_idPK) LIKE LCASE('%staff01%') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:40:09.663

尝试

```
where IF (c.use_id_as_emp_no = '0', ccal.applicant_id, cc.contractor_idPK) 
COLLATE latin1_general_ci LIKE '%staff01%' 
```

# ios - 构建时 Xcode 和 Qt4iOS 错误

> ID：10312982
> 
> 赞同：0
> 
> 时间：2012-04-25T09:36:08.390
> 
> 标签：ios, xcode, macos, qt

当我想构建使用 Qt4iOS 和 Xcode 4.2 的项目时出现此错误。

![在此处输入图像描述](../Images/8cdece26db32960aaba23bd24f420645.png)

问题是当我在 Qt 中构建项目时，我的 GCC 编译器设置为 x86。

我拥有 Xcode 的系统是 x64，但昨天一切正常。现在突然我得到了这个错误。我试图用 x64 编译器构建我的 Qt 项目，但我仍然遇到同样的错误。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:50:21.063

根据您的评论，您似乎没有使用 x86 编译器为模拟器构建应用程序（您的库是 armv7 atm）。

`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/g++`尝试将模拟器编译器作为新工具链添加到 Qt Creator（位于

您可以再次使用 lipo 检查生成的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:18:56.047

也许只是按照说明进行操作会有所帮助？当您不跟随他们时，您会浪费每个人的时间。具体来说，这个问题的答案是：

“Qt4iOS SDK 已构建为‘通用二进制’，包含 ARM（设备）和 x86（模拟器）目标的可链接目标代码。在构建应用程序项目时，需要为设备或模拟器构建它. 为模拟器构建时，需要在运行 qmake 时指定 mkspec，例如。

**Xcode 4.2.x（及更早版本）：**
/Developer/Qt4iOS/qt-everywhere-ios-gles2-4.8.1/bin/qmake animatedtiles.pro –spec qpa/macx-iossimulator-clang-legacy

**Xcode 4.3.x（及更高版本）：**
/Developer/Qt4iOS/qt-everywhere-ios-gles2-4.8.1/bin/qmake animatedtiles.pro –spec qpa/macx-iossimulator-clang"

# jquery - 在 RoR 中一键隐藏链接

> ID：10312984
> 
> 赞同：1
> 
> 时间：2012-04-25T09:36:16.060
> 
> 标签：jquery, ruby-on-rails, ajax

我正在使用 ryanb 的 simple_nested_form 并且我有以下代码

```
<%= f.link_to_add "Shipping Address", :shipping_addresses %> 
```

我希望这个链接只执行一次，然后它应该隐藏。我相信我应该使用 jquery 或 ajax，但我对 ajax/jquery 了解不多。谁能建议我如何让这个链接只执行一次？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:12:06.920

要在使用该`hide`方法时实际触发链接，您必须在方法中包含一个回调`hide()`以返回 true，这将冒泡到原始事件回调。我在 main 函数中只返回 true 的测试不起作用，所以我认为该`hide`方法必须使任何事件传播短路。由于您希望它仅在他们第二次单击它后触发，因此您希望将`click`事件绑定两次，第一次单击调用将该元素上的任何后续单击事件绑定到该`hide`方法的函数。基本上只是第二层。

```
$("a").on('click', function(e) {
    $(this).on('click', function() {
        $(this).hide();
    });
}); 
```

如果您不希望第二次单击实际上第二次触发主要事件（例如，如果您让它显示文本，但在第二次单击时，您不希望文本重新显示），您应该取消绑定主要事件，如下所示：

```
$("a").on('click', function(e) {
    $(this).unbind(e);
    $(this).on('click', function() {
        $(this).hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:44:05.863

首先从 www.jquery.com 下载 jQuery。接下来将 JS 文件添加到您的页面。接下来的事情应该是这样的：

```
<script type="text/javascrip>
    $(document).ready(function() {
        $("#your_link_id").click(function() {
            $(this).hide();
        });
    });
</script> 
```

就是这样。如果要隐藏单击的每个锚点，请将 #your_link_id 替换为 $("a") 中的 a。另外，如果你的锚标签有一些类，你可以根据它的类隐藏它，比如 $("a.myClass")。

更新：

关于您的评论，代码可能如下所示：

```
$(document).ready(function() {
    $("a:not(.clickedOnce)").click(function() {
        $(this)
            .addClass("clickedOnce")   
            .on("click", function()     
                { 
                    $(this).hide();   
                });
       });
}); 
```

基本上，当您单击链接时，将添加一个名为*clickedOnce的类。*之后，您使用 .on() 告诉此链接在第二次单击时隐藏自身。

希望这可以帮助。

编辑：这是它的工作原理示例：http: [//jsfiddle.net/rvQ4w/23/](http://jsfiddle.net/rvQ4w/23/)

# javascript - 如何在javascript中获取数组数组

> ID：10312989
> 
> 赞同：1
> 
> 时间：2012-04-25T09:36:28.163
> 
> 标签：javascript, jquery

**我正在创建图表，为此我需要 javascript 中这种形式的数据：**

```
var currYear = [["2011-08-01",796.01], ["2011-08-02",510.5], ["2011-08-03",527.8], ["2011-08-04",308.48]] 
```

**数据来自 JSON**

```
var total_click = JSON.parse(<%=raw @report.to_json %>);
var i=0;
var graph_type = "";
var graph_typ = new Array();
while(i < total_click.length){
graph_typ.push("['"+total_click[i].report_date+"',"+total_click[i].clicks+"]");
i++;
} 
```

**我从中得到的数据如下**

```
['2012-03-19',48],['2012-03-20',14],['2012-03-21',934] 
```

**我如何获得这种格式**

```
[['2012-03-19',48],['2012-03-20',14],['2012-03-21',934]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:40:04.560

将数组推送到数组中，而不是创建字符串：

```
var total_click = JSON.parse(<%=raw @report.to_json %>);
var graph_type = [];
for(var i = 0; i < total_click.length; i++){
  graph_type.push([ total_click[i].report_date, total_click[i].clicks ]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T09:39:26.927

```
graph_typ.push("['"+total_click[i].report_date+"',"+total_click[i].clicks+"]"); 
```

不是您将数组添加到另一个数组中的方式。在这里，您正在构建一个字符串数组。

```
while(i < total_click.length){
var arr = [];
arr.push(total_click[i].report_date);
arr.push(total_click[i].clicks);
graph_typ.push(arr);
i++;
} 
```

# plagiarism-detection - 如何检查源代码作业是否存在抄袭？

> ID：10312991
> 
> 赞同：21
> 
> 时间：2012-04-25T09:36:35.173
> 
> 标签：plagiarism-detection

我如何判断两个源代码（独立于它们的语言 C、Java、Lisp ......）有强烈的迹象表明它们可能是互相抄袭的？

**背景：**我将举办我的第一次计算机语言研讨会。我们为主要的编程语言准备了一些小练习，例如 C/C++、Python、Java……以及 OCaml、Haskell……给学生一些实用的介绍（也包括编程范式）。我们估计有大​​约 300 名学生每人有超过 50 个编程任务。所以一个人不能检查所有的作业。

我想用于自然语言（论文、论文、书籍章节等）的反抄袭技术不适用于源代码，对吧？由于所需的接口，这些编程任务的解决方案也将具有固有的相似性。

我做了一些搜索，发现：[MOSS](http://theory.stanford.edu/~aiken/moss/)在：[Checking for code plagiarism with JavaScript](https://stackoverflow.com/questions/2581759/javascript-code-plagiarism-checker) and [Variable renaming for plagiarism detection for C/C++](https://stackoverflow.com/questions/5876576/variable-renaming-for-plagiarism-detection-for-c-c)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T10:06:06.297

奖励一个小奖来发现它。考虑到喝几杯啤酒的可能性，学生们将在网上倾注数小时，从其他学生提交的作品中寻找匹配。

对违法行为处以巨额罚款，这是自筹资金并奖励那些做自己工作的学生——他们想要啤酒，并且不会让自己通过抄袭自己的作品来报复！

# java - 使用 JDBC 准备语句插入时出错

> ID：10312993
> 
> 赞同：0
> 
> 时间：2012-04-25T09:36:51.793
> 
> 标签：java, jdbc

我正在尝试使用以下 JDBC 语句将一些值从 Java 插入 Oracle DB：

```
String SQL_PREP_INSERT = "INSERT INTO ABC.TEST (LOG_ID, SESSION_ID,USER_ID) VALUES"
            + " (ABC.logid_seq.nextval, ?, ?)";

stmt = con.prepareStatement(SQL_PREP_INSERT);
stmt.setString(1, sessionId);
stmt.setString(2, userid);
stmt.execute();
stmt.close(); 
```

序列创建如下：

```
create sequence  ABC.logid_seq
minvalue 1 maxvalue 9999999999999999999999 
increment by 10 start with 10 cache 20 noorder  nocycle ; 
```

我收到以下错误，

```
java.sql.SQLException: ORA-00942: table or view does not exist 
```

但是当我尝试手动插入表格时，它是成功的。

```
insert into ABC.test(LOG_ID,SESSION_ID,USER_ID) values 
    (VZPPTL.logid_seq.nextval,'test_session', '001'); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:29:38.990

可能查看了错误的表或数据库。您确定从代码中查看正确的数据库吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:26:19.267

在准备语句中不需要给出模式名称（在这种情况下是 ABC）。

试试这个，它可能会起作用。

String SQL_PREP_INSERT = "INSERT INTO TEST (LOG_ID, SESSION_ID,USER_ID) VALUES" + " (logid_seq.nextval, ?, ?)";

# android - 无法从活动发送广播：android

> ID：10312995
> 
> 赞同：5
> 
> 时间：2012-04-25T09:37:00.630
> 
> 标签：android

嗨朋友们，我无法将广播从一项活动发送到其他活动，请参阅下面的代码并提供帮助：

```
 public class SendBroadcast extends Activity {
  public static String BROADCAST_ACTION =  "com.unitedcoders.android.broadcasttest.SHOWTOAST";

/*     }
    });
}

   public void sendBroadcast(){

    Intent broadcast = new Intent("com.unitedcoders.android.broadcasttest.SHOWTOAST");
    this.sendBroadcast(broadcast);
    //startActivity(broadcast);

} 
```

}

接收方代码：

```
 public class ToastDisplay extends Activity {

private BroadcastReceiver mReceiver;

@Override
protected void onResume() {

    // TODO Auto-generated method stub
    super.onResume();
    Log.i("!!!!!!!InchooTutorial@@@@@@@$$$$","%%%%%%% msg_for_me"); 
```

ent // String msg_for_me = intent.getStringExtra("some_msg"); //记录我们的消息值 Log.i("!!!!!!!InchooTutorial@@@@@@@$$$$","%%%%%%% msg_for_me");

```
 }
    };
    //registering our receiver
    this.registerReceiver(mReceiver, intentFilter);
}

    @Override
    protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    //unregister our receiver
    this.unregisterReceiver(this.mReceiver);
}

} 
```

Manifest.xml 是：

```
 <?xml version="1.0" encoding="utf-8"?>
   <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.unitedcoders.android.broadcasttest"
    android:versionCode="1"
     android:versionName="1.0">
    <uses-sdk android:minSdkVersion="4" />
     <uses-permission android:name="android.permission.BROADCAST_STICKY"/>
    <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".SendBroadcast"
              android:label="@string/app_name">
           <intent-filter>
          nitedcoders.android.broadcasttest.SHOWTOAST" />
   </application>     </manifest> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T09:42:03.263

由于当您发送广播时其他活动未运行，您将不会收到它。如果你想在活动没有运行时接收广播。在 xml 中声明它。

这是给你的代码。我希望这是你想要的。

```
package com.pdd.Receiver;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ReceiverActivity extends Activity implements OnClickListener{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button b=(Button) findViewById(R.id.button1);
        b.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent i =new Intent("com.pdd.receiver.myaction");
        sendBroadcast(i);
    }
} 
```

接收器类

```
package com.pdd.Receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class MyReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub

        //Intent i=new Intent(MyReceiver.class,Second.class);
        Intent i=new Intent(arg0,Second.class);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        arg0.startActivity(i);

    }

} 
```

显示 Toast 的第二个 Activity

```
package com.pdd.Receiver;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class Second extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        Toast.makeText(getApplicationContext(), "This is second activity", 5000).show();
    }
} 
```

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pdd.Receiver"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <receiver android:name="com.pdd.Receiver.MyReceiver">
             <intent-filter>
                 <action android:name="com.pdd.receiver.myaction"></action>
             </intent-filter>
         </receiver>
        <activity
            android:name=".ReceiverActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".Second"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:42:22.220

如果您的 SendBroadcast 活动已创建，则将发送广播。

然后开始第二个活动，称为 ToastDisplay，并在 onResume 中注册 BroadcastReceiver。但这已经晚了，广播已经发送了，它不会留在系统中！

尝试发送粘性广播，例如：

```
sendStickyBroadcast(Intent) 
```

或者在清单中声明广播接收器，但是您需要创建一个扩展广播接收器类的单独类，这不能被继承。