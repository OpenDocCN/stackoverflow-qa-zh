# StackOverflow 问答 000882000-000882999

# regression - 有没有回归模型的工具？

> ID：882009
> 
> 赞同：-2
> 
> 时间：2009-05-19T10:40:22.640
> 
> 标签：regression, model-fitting

我需要从一组示例中推导出线性/二次方程。有没有可用的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:20:17.303

有许多工具可以帮助您做到这一点。我在下面开始了一个列表：

1.  [Excel 分析工具包](http://www.add-ins.com/Analysis_ToolPak.htm)
2.  [八度](http://www.gnu.org/software/octave/)
3.  [自由垫](http://freemat.sourceforge.net/)
4.  [项目](http://www.r-project.org/index.html)

# c# - 在c#中从同一个流中多次读取

> ID：882015
> 
> 赞同：2
> 
> 时间：2009-05-19T10:42:09.453
> 
> 标签：c#, process

我想多次阅读我的程序的输出。一些事情，比如如果我通过 X，我得到输出并显示它，然后如果我通过 Y，我再次得到输出并显示它。无需重新启动该过程。尝试一下，我制作了交流程序

```
#include<stdio.h>
int main()
{
    int i;
    int j;
while(scanf("%d", &i))
{
    for(j = 0; j<=i;j++)
    printf("%d\n",j);
}
return 0;
} 
```

现在我将它与 C# 交互，当我在文本框中输入文本时，它会通过重定向标准输入（streamwriter）传递到程序并读取我称之为标准输出（streamreader）的输出。readtoend() .

但这对我不起作用。因为它进入等待状态，直到流返回一些指示结束已被读取。

我怎样才能做到这一点？

我也尝试了异步读取，我调用了 beginoutputread 方法，但是我不知道读取何时完成！一种方法是在我的原始程序中添加一个标记，以指示当前输入的输出结束。我还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T10:56:53.947

如果流支持搜索（`CanSeek`），您可以通过设置“倒带”它

```
stream.Position = 0; 
```

因此开始重新阅读它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T12:39:22.743

如果流不支持查找但流中的数据不是很大，您可以将该流读取和写入 MemoryStream，并从 MemoryStream 读取任意次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:04:27.260

Quck and Dirty：这个有一些小故障。尝试改进它，因为我要离开办公室 :)

```
 ProcessStartInfo psi = new ProcessStartInfo(@"c:\temp\testC.exe");
        psi.CreateNoWindow = true;
        psi.RedirectStandardError = true;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardOutput = true;
        psi.UseShellExecute = false;

        Process p = Process.Start(psi);
        string input = "";

        ConsoleColor fc = Console.ForegroundColor;

        StreamWriter sw = p.StandardInput;
        StreamReader sr = p.StandardOutput;

        char[] buffer = new char[1024];
        int l = 0;

        do
        {
            Console.Write("Enter input: ");
            input = Console.ReadLine();

            int i = Convert.ToInt32(input);

            sw.Write(i);
            sw.Write(sw.NewLine);

            Console.ForegroundColor = ConsoleColor.Yellow;

            Console.Write(">> ");

            l = sr.Read(buffer, 0, buffer.Length);

            for (int n = 0; n < l; n++)
                Console.Write(buffer[n] + " ");

            Console.WriteLine();

            Console.ForegroundColor = fc;
        } while (input != "10");

        Console.WriteLine("Excution Finished. Press Enter to close.");
        Console.ReadLine();
        p.Close(); 
```

PS：- 我在 vs2008 中创建了控制台 exe，并将其复制到名为 testC.exe 的 c:\temp 文件夹中。

# shell - 如何每天在 Mac Os X 中运行 shell 脚本或设置时间？

> ID：882016
> 
> 赞同：2
> 
> 时间：2009-05-19T10:42:24.240
> 
> 标签：shell

如何在特定时间在 Mac Os X 中运行 shell 脚本？我知道这与 cron 有关，但我无法弄清楚。有人可以帮助我提供相关代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T10:48:06.930

**crontabs**是 cron 守护进程读取的文件。他们告诉它在不同时间执行操作（例如运行 shell 脚本）。更多信息在这里。

[http://www.macdevcenter.com/pub/a/mac/2001/12/14/terminal_one.html](http://www.macdevcenter.com/pub/a/mac/2001/12/14/terminal_one.html)

在 Linux 终端中，我键入：

```
crontab -e 
```

一个例子是

```
30  4   *   *   6   root    sh /etc/weekly  2>&1 | tee /var$ … 
```

每周 4:30 跑步

```
.---------------- minute (0 - 59) 
|  .------------- hour (0 - 23)
|  |  .---------- day of month (1 - 31)
|  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ... 
|  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7)  OR sun,mon,tue,wed,thu,fri,sat 
|  |  |  |  |
*  *  *  *  *  command to be executed 
```

所以每天，在 2:00 运行 foo 将是......

```
0  2  *  *  *  foo 
```

上面的教程包含编辑 crontab 文件的 OSX 指令！

**祝你好运**

另请参阅：http: [//developer.apple.com/documentation/Darwin/Reference/Manpages/man5/crontab.5.html](http://developer.apple.com/documentation/Darwin/Reference/Manpages/man5/crontab.5.html) OSX crontab 手册页

和

[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

# asp.net - 高速缓存存储器

> ID：882019
> 
> 赞同：0
> 
> 时间：2009-05-19T10:43:56.437
> 
> 标签：asp.net

缓存数据存储在 Asp.Net 应用程序中的什么位置（堆或内存）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T10:58:32.883

好吧（这完全简化了）

类（即引用类型）存储在堆上，指向该引用类型的指针存储在该堆栈上。

结构/简单类型（即值类型）直接存储在堆栈上。

但是关于缓存，这个想法是您存储的值存储在应用程序内存中。

这样做的好处是，如果你有一些经常使用的值，它存储在数据库中，那么你可以检索一次，将它放在缓存内存中，并在每次后续使用时直接从内存中检索它，而不必去返回您的数据库（或文件系统或其他相对较慢的检索存储介质）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T11:03:21.267

Eoin 是绝对正确的！缓存仅意味着将辅助内存或硬盘（数据库、文件等）中的数据存储到主内存或应用程序内存中。它加快了执行速度，因为从 app mem 读取比从磁盘读取要快。因此，如果说一个文件存储在缓存中，您可以比没有的情况更快地读取它，而您必须从磁盘读取它。

有关在 asp.net 中缓存的更多详细信息，请访问此[链接](http://msdn.microsoft.com/en-us/library/ms178597.aspx)

[可以在此处](http://en.wikipedia.org/wiki/CPU_cache)找到有关高速缓存的一般想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T10:46:11.487

你认为堆在哪里？这一切都在 RAM 或页面文件中结束 :)

这个问题，访问时间等还有其他特定的内容吗？

# screen - 以编程方式检测和设置外部屏幕？

> ID：882023
> 
> 赞同：0
> 
> 时间：2009-05-19T10:45:09.383
> 
> 标签：screen, external, vga

是否可以在 Java（或任何其他语言）中检测是否有可用的外部屏幕（在 VGA 或 DVI 上）、启动屏幕并向其发送图形（文本和内容）？

例如：在 Powerpoint 中，如果您连接了外部屏幕，并且您“直播”或开始演示，它将显示在外部屏幕上。

我正在开发一个应用程序，它应该可以在外部屏幕上显示不同的值和信息（随时间变化）。我敢肯定还有其他程序可以做到这一点，但无论如何我都快完成了，我所需要的只是添加外部屏幕功能。

这在 Windows、Linux 和 OSX 上是否有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T12:02:21.990

可能有一些您无法控制的特定于硬件的问题，所以我的猜测是，不可能对所有类型的机器都做到这一点，但对某些甚至大多数机器来说可能是可行的。

一些支持外部 vga 屏幕的笔记本电脑会在启动过程中禁用（或不启用）它，除非已经连接了显示器（我假设是为了省电）。因此，如果您稍后想连接显示器，则将没有信号，您将被迫重新启动以使用额外的显示器。非常烦人，但没有其他解决方法。这可能是低端笔记本电脑特有的问题（？）。

所以为了检查你必须

*   检测第二个显示输出（应该不是主要问题）。
*   确保它已启用（可能并不总是可行？）。
*   检测两个显示器是否支持显示不同的输出（我想这应该是可能的，但我不知道有多难或有多难）。许多笔记本电脑不会。

# .net - Oracle 连接和 nls_lang

> ID：882027
> 
> 赞同：0
> 
> 时间：2009-05-19T10:45:43.673
> 
> 标签：.net, oracle, oracleclient

我有一个旧数据库集，其中 NLS_LANG 设置为 IW8ISO8859P8。这是我无法改变的。

我有另一个应用程序，它不适用于 unicode，它适用于我的应用程序所处理的相同数据。在某些字段中，有时，用户会插入代表 NIS 货币符号的字符 161 作为字符串的一部分。当我尝试使用 oledb 从 .Net 读取这些数据时，一切都很好，但是当我尝试使用 oracle 客户端读取这些数据时，却得到了垃圾数据。当我在 .Net 中插入 NIS simble 时，它​​也会被保存为垃圾。

我知道我可以在获得数据后对其进行操作，但我正在寻找 .Net 中的 oracle 客户端的一些配置以使其正常工作。

我已经为此工作了几个星期，任何帮助都会得到帮助。Tnx诺姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T16:18:41.613

您看过 Oracle 的[NLS_LANG 常见问题解答](http://www.oracle.com/technetwork/database/database-technologies/globalization/nls-lang-099431.html#_Toc110410546)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T18:58:47.963

您是否检查了客户端上的 nls_lang 设置？对 nls 设置的任何更改都可以被客户端（注册表和环境）上的设置覆盖。也许这是您的问题的原因。验证您在客户端上没有任何其他 nls 设置，并且您的任何功能都没有明确更改它。您可以运行登录后触发器来更改会话格式。这将确保服务器设置将影响所有客户端。此外，请确保已设置 nls_territory。它应该设置为 nls_lang 的一部分，但以防万一您的意思是 nls_language。我相信货币符号会受此影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-23T12:06:56.460

在一天结束时，我使用辅助 nvarchar 列解决了它。并触发它们之间的转换。

我在 plsql 中编写了函数，使用由许多 if 语句实现的自定义编码来执行与 Unicode 的字节转换。

对于有问题数据的每一列，我添加了带有 nvarchar 存储的第二列，并使用该函数来转换有问题的数据的触发器。

因此，遗留应用程序使用和更新 varchar 列，触发器将其转换为 Unicode 列。.Net 代码使用 Unicode 列，触发器再次将信息转换为遗留应用程序中使用的有问题的编码。

如果您需要更多信息，请随时与我联系以获取更多信息

# nested - 在 Movable Type 的“管理页面”视图中嵌套页面

> ID：882030
> 
> 赞同：0
> 
> 时间：2009-05-19T10:46:08.320
> 
> 标签：nested, movabletype

在`Manage Pages`Movable Type 管理区域的屏幕上，是否可以嵌套页面，或者实现任何类型的页面层次结构？本质上我需要镜像站点结构。

我还想订购页面，不是按发布日期，而是按有意义的顺序 - 即我需要它们在网站上显示的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-10-21T01:29:14.917

是的，在 Movable Type 中创建“文件夹”，然后将页面放入文件夹中。

确保`index`在每个文件夹中放置一个带有文件名或索引模板（或其他模板）的页面，以便在没有文件名的情况下访问该文件夹时，会显示一个页面。

我希望 MT 摆脱“文件夹”功能，并且将来在页面之间建立父子关系。

# java - 在 Java 中取消转义 JavaScript 转义值

> ID：882036
> 
> 赞同：5
> 
> 时间：2009-05-19T10:46:45.323
> 
> 标签：java, javascript, cookies, escaping

在我们的网络服务中，我们通过 JavaScript 设置了一个 cookie，我们在 Java (Servlet) 中再次读取该 cookie

但是，我们需要转义 cookie 的值，因为它可能包含诸如“&”之类的非法字符，这会弄乱 cookie。

是否有一种透明的方式来转义（JavaScript）和再次转义（Java）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T10:51:43.740

在 java 中，您从[Commons Lang获得了](http://commons.apache.org/lang)[StringEscapeUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html)来转义/取消转义。

[在 Javascript 中，您可以通过encodeURIComponent](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)进行转义，但我认为我给您的 Commons 组件将满足您的需求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-02-23T11:03:03.607

客户端 JavaScript/ECMAScript：

```
encodeURIComponent(cookie_value) // also encodes "+" and ";", see http://xkr.us/articles/javascript/encode-compare/ 
```

服务器 Java：

```
String cookie_value = java.net.URLDecoder.decode(cookie.getValue()); 
```

我将在[我的博客条目](http://ceestimmerman.blogspot.com/2012/02/handling-webbrowser-cookies.html)中添加更多发现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-28T14:34:06.803

最准确的方法是使用您的 java 代码执行 javascript。希望下面的代码有所帮助。

```
ScriptEngineManager factory = new ScriptEngineManager();
   ScriptEngine engine = factory.getEngineByName("JavaScript");
   ScriptContext context = engine.getContext();
   engine.eval("function decodeStr(encoded){"
             + "var result = unescape(encoded);"
             + "return result;"
             + "};",context);

     Invocable inv;   

    inv = (Invocable) engine;
    String res =  (String)inv.invokeFunction("decodeStr", new Object[]{cookie.getValue()}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-29T09:25:32.103

Common lang 的 StringEscapeUtils 对我不起作用。

您可以简单地使用 javascript nashorn 引擎对转义的 javascript 字符串进行转义。

```
private String decodeJavascriptString(final String encodedString) {
    ScriptEngine engine = new ScriptEngineManager().getEngineByName("nashorn");
    Invocable invocable = (Invocable) engine;
    String decodedString = encodedString;
    try {
        decodedString = (String) invocable.invokeFunction("unescape", encodedString);

    } catch (ScriptException e) {
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    }

    return decodedString;
} 
```

# vb6 - 禁用组合框中的项目

> ID：882051
> 
> 赞同：2
> 
> 时间：2009-05-19T10:49:55.583
> 
> 标签：vb6, combobox

我有一个组合框，我需要根据外部事件以编程方式禁用项目。外部事件已完成，我只需要禁用该项目的选择并将其显示为灰色（如某些选项不可用时的上下文菜单）。

决定让项目简单地消失会让用户感到困惑，但让它们像菜单项一样变灰会很熟悉。

你如何在VB6中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T10:56:04.587

使用股票 VB6 组合框无法做到这一点。您可以在任何支持所有者绘图的第三方组合框中对其进行模拟。[vbAccelerator 的版本](http://vbaccelerator.com/home/VB/Code/Controls/Combo_and_List_Boxes/ComboBoxEx/article.asp)支持这一点并且是开源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:52:46.827

这不能用组合框来完成。不过，您可以使用列表框获得类似的结果。

# visual-studio - Visual Studio 2008 在开始调试时崩溃

> ID：882052
> 
> 赞同：7
> 
> 时间：2009-05-19T10:50:11.450
> 
> 标签：visual-studio, crash, debugging

当我按 F5 时，一切编译正常，但是当应用程序启动时，VS 崩溃，显示“及时调试器”对话框。

不止一个（类似的）解决方案有这个问题。仅包含一个表单的新解决方案有效。这个问题突然出现，据我所知，我没有对环境进行任何更改。

我可以在不调试的情况下启动应用程序（ctrl+F5），然后附加调试器。

我正在使用 VS 2008 sp 1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T10:53:50.613

没见过这个问题，你试过关掉所有的插件，比如reSharper、CodeRush等吗？

* * *

**更新：**当最坏的情况发生时，我通常会尝试这个命令行。

```
devenv.exe /ResetSettings
devenv.exe /ResetSkipPkgs 
devenv.exe /Setup 
```

尝试所有这些，您可以一次全部完成，也可以单独完成，这取决于您。但请注意，您将删除在 Visual Studio 中自定义的所有设置，因此您可能需要备份它们。

您可以尝试的最后一件事是，看看问题是否与正在运行的奇怪东西有关。

```
devenv.exe /SafeMode 
```

*以安全模式启动 Visual Studio，并仅加载默认环境和服务，以及第三方包的随附版本。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T12:02:33.127

我现在发现了问题。我启用了“Step framework source”，它以某种方式破坏了调试器（虽然很奇怪，因为它通常可以工作）。关闭它，让我再次像往常一样调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:05:05.003

如果您在调试布局中有未停靠的窗口，请在 code.msdn.microsoft.com 上搜索 KB960075（无法添加 href）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T10:58:43.227

你有 CLI.exe 错误问题吗？检查您的事件日志。我也遇到了同样的问题，因为我离最后期限太近了，所以我只是出于恐慌而重新安排了我的机器。我认为这是注册表的问题，找不到答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T11:00:10.070

尝试修复或重新安装，不要浪费时间寻找问题的原因

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-03-16T10:40:14.020

这件事刚刚发生在我身上，昨晚我的电脑重新启动后。当我按 F5 时，应用程序启动但立即关闭，VS IDE 崩溃。修复它：`Debug->Delete All Breakpoints`. 它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T19:55:02.980

我遇到了同样的问题，当我开始调试时，IDE 突然崩溃了。发生在我打开的任何现有项目中，甚至是视觉工作室样本。我创建了一个新项目，只是一个空白对话框，运行它，一切都很好。之后，问题就消失了，我可以再次调试。

# build - 重新（构建|部署|开始）时你会做什么？

> ID：882061
> 
> 赞同：6
> 
> 时间：2009-05-19T10:51:35.703
> 
> 标签：build, build-process

花时间等待我的项目重建/重新部署/重新启动的好方法是什么？

我对如何缩短这些等待时间的建议不感兴趣。我知道有许多工具、原则和做法可以避免无休止的等待时间。但我仍然每天必须等待其中一些事情发生。

建议是：

*   访问堆栈溢出...
*   从书中读一点
*   扫描邮件
*   与同事聊天
*   喝点咖啡

在我看来，并非所有这些都是真正有帮助的。从实际工作中分心，以至于错过重要细节并犯错误总是有危险的，这可能会导致额外的等待周期。

什么适合你？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-19T10:56:03.560

强制性：

[![编译](https://imgs.xkcd.com/comics/compiling.png "“你在偷那些液晶显示器吗？”  “是的，但我是在我的代码编译时这样做的。”")](http://xkcd.com/303/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T10:56:23.247

实际上，我在构建期间会使用 stackoverflow。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T11:07:48.060

使构建更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T10:55:28.083

我在右侧的监视器和左侧的 stackoverflow.com 上查看构建进度。如果它是一个大体型，我可能会去拿一杯咖啡。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T10:53:31.350

推特。你在河里学到了很多东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T10:55:59.893

我割开手腕。老实说 - 这里的一个团队为他们的项目启用了代码分析；他们不注意任何警告。你知道 VS 解析这些警告需要多长时间（总共大约 24 000 - 需要 3 分钟）？

诚实地：

*   抽根烟
*   获取食物
*   访问
*   在另一个项目上做点什么（通常是一个宠物项目）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T10:56:11.110

计划你的下一步。绘制图表、书写、绘制草图、填写您的待办事项清单。为下一步行动做好准备。

并放松一点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T10:56:49.750

实际上 Stackoverflow 和 IRC，无论是否在构建期间！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-19T11:03:37.413

检查你的代码，想想你可以改进的问题，然后再修改它。没有返工的程序员一天几乎是迷失的一天。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-19T11:50:25.273

检查 CPU 的温度、天气预报、Eve 中的最新技能培训 - 通常使用 Mac 仪表板上的小部件。

永远不要去浏览，因为我会忘记我在做什么......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-19T10:53:57.743

等待，如果可能的话考虑下一个问题。

如果您处于开发周期的早期，就会出现需要修复的错误。

稍后 - 除非你正在做一个完整的重建 - 编译时间不应该花那么长时间。

其他任何事情都会让人分心。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-19T10:59:23.007

我经常按照您的建议去做（尤其是访问 Stackoverflow 并阅读一本书）。

但是，因为构建和部署需要时间，所以无论您做什么，当您返回时，您可能已经失去了思路。所以你不需要尽量减少做这些事情所花费的时间，而是你需要尽可能少地做这些事情。考虑问题/错误比实际运行系统进行调试更有效率。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-19T10:59:51.290

网络黑客或爬行。占用很少的 CPU，而且两者都是回合制的，所以当我的实际工作准备好再次工作时，我可以保存并退出。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-08-07T15:15:32.607

我遵循 GTD 风格的任务管理。当我专注于编码时，我不会查看电子邮件、处理文书工作（物理或数字）、计划或接听电话（如果很重要，他们会留言让我检查）。我选择非常具体的时间间隔，一天中的时间来做这些活动。

话虽如此，我建议您花时间等待构建来执行这些活动。不要将它们与您的开发时间混在一起。使等待建立您的时间间隔来进行收件箱处理和计划。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-19T11:53:57.810

我在一台显示器上运行它并在另一台显示器上进行一些编码或阅读。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-19T11:57:19.487

看着窗外，放松眼睛……你也可以闭上眼睛，但不要睡着

# opencv - OpenCV 需要将 IPL_DEPTH_32S 转换为 IPL_DEPTH_32F

> ID：882066
> 
> 赞同：-1
> 
> 时间：2009-05-19T10:53:36.513
> 
> 标签：opencv

我有一个 IPL_DEPTH_32S 图像（意味着我使用 32 位整数来表示像素），我需要将其转换为 IPL_DEPTH_32F，以便我可以应用模板匹配。有谁知道将整数转换为浮点数的公式，或者 OpenCV 内置的任何可以做到这一点的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-02T06:38:20.867

您可以简单地使用“cvConvertImageScale()”将 IPL_DEPTH_32S 更改为 IPL_DEPTH_32F。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T09:49:44.060

我不认为opencv有这样的功能。

最简单的方法是创建一个与 IPL_DEPTH_32S 图像大小完全相同的新 IPL_DEPTH_32F 图像。然后遍历两个图像中的所有像素以及每个像素副本，并将整数像素转换为浮点像素。

# ruby - 按对象属性对Ruby中的对象数组进行排序？

> ID：882070
> 
> 赞同：142
> 
> 时间：2009-05-19T10:54:11.863
> 
> 标签：ruby, sorting, object

我在 Ruby on Rails 中有一组对象。我想按对象的属性对数组进行排序。可能吗？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2009-05-20T13:55:45.933

我建议改用 sort_by：

```
objects.sort_by {|obj| obj.attribute} 
```

特别是如果可以计算属性。

或者更简洁的方法：

```
objects.sort_by(&:attribute) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-05-19T10:56:49.470

是的，使用[`Array#sort!`](http://www.ruby-doc.org/core/classes/Array.html#M002209)它很容易。

```
myarray.sort! { |a, b|  a.attribute <=> b.attribute } 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-08-04T19:04:23.217

升序：

```
objects_array.sort! { |a, b|  a.attribute <=> b.attribute } 
```

或者

```
objects_array.sort_by{ |obj| obj.attribute } 
```

降序排列 ：

```
objects_array.sort! { |a, b|  b.attribute <=> a.attribute } 
```

或者

```
objects_array.sort_by{ |obj| obj.attribute }.reverse 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-02-16T10:03:40.160

如果您需要按两个属性排序，其中第一个比第二个更重要（意味着仅当第一个参数相等时才考虑第二个参数），那么您可以这样做

```
myarray.sort{ |a,b| (a.attr1 == b.attr1) ? a.attr2 <=> b.attr2 : a.attr1 <=> b.attr1 } 
```

或者在数组数组的情况下

```
myarray.sort{ |a,b| (a[0] == b[0]) ? a[1] <=> b[1] : a[0] <=> b[0] } 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-05-19T23:08:23.947

您可以通过覆盖 <=> 方法使任何类可排序：

```
class Person

  attr_accessor :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  def <=>(other)
    @last_name + @first_name <=> other.last_name + other.first_name
  end

end 
```

现在一个 Person 对象数组将可按 last_name 排序。

```
ar = [Person.new("Eric", "Cunningham"), Person.new("Homer", "Allen")]

puts ar  # => [ "Eric Cunningham", "Homer Allen"]  (Person objects!)

ar.sort!

puts ar  # => [ "Homer Allen", "Eric Cunningham" ] 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-10-17T07:54:46.327

更优雅，如果需要切换顺序`objects.sort_by(&:attribute)`可以加一个。`.reverse`

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2009-05-19T11:35:31.170

Array#sort 效果很好，如上所示：

```
myarray.sort! { |a, b|  a.attribute <=> b.attribute } 
```

但是，您需要确保为该`<=>`属性实现了运算符。如果它是 Ruby 原生数据类型，这不是问题。否则，编写您自己的实现，如果 a < b 返回 -1，如果它们相等则返回 0，如果 a > b 返回 1。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-06T13:23:40.057

```
@model_name.sort! { |a,b| a.attribute <=> b.attribute } 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-05-19T10:56:17.833

是的，有可能

[http://ariejan.net/2007/01/28/ruby-sort-an-array-of-objects-by-an-attribute/](http://ariejan.net/2007/01/28/ruby-sort-an-array-of-objects-by-an-attribute/)

# javascript - YAHOO.lang 的 jQuery 版本（isUndefined、isNull、isString 等）

> ID：882073
> 
> 赞同：4
> 
> 时间：2009-05-19T10:55:19.473
> 
> 标签：javascript, jquery, yui

有谁知道一个 jQuery 插件，它具有像[YAHOO.lang 命名空间](http://developer.yahoo.com/yui/yahoo/#lang)中的“助手”或扩展名？

我想到了以下功能：

```
isNull
isDefined
isString
isFunction 
```

对于字符串和数组，我也很感激，例如 Contains、StartsWith（我知道这些很容易编写，我只是在寻找一个包含所有这些的插件）。

它不在 YAHOO.lang 命名空间中，但也与表单相关的扩展 - 确定单选框的值（从选中的值），友好名称中表单元素的类型。

特别是具有流畅 API 的插件，而不是基于选择器的插件，例如

```
$("input[@type=radio][@checked]") 
```

我再次意识到它们很容易实现，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T12:59:00.020

[jQuery 1.3.2](http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js)已经内置（参见下面的代码片段）`isFunction`。`isArray`isString 的代码是直截了当的 ( `typeof obj === "string"`)，isNull ( `obj === null`) 和 isDefined ( `obj !== undefined`) 也是如此 - 所以我将只编写内联代码而不是使用函数。

```
// See test/unit/core.js for details concerning isFunction.
// Since version 1.3, DOM methods and functions like alert
// aren't supported. They return false on IE (#2968).
isFunction: function( obj ) {
    return toString.call(obj) === "[object Function]";
},

isArray: function( obj ) {
    return toString.call(obj) === "[object Array]";
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-04-04T20:05:38.930

Underscore.js 或 _.js，如果您愿意，是包含这些函数的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T22:14:31.217

我决定自己写两个新插件。这是两个项目：

# [表单扩展](http://www.bitbucket.org/mrshrinkray/jquery-extensions/)

**例子：**

```
// elementExists is also added
if ($("#someid").elementExists())
  alert("found it");

// Select box related
$("#mydropdown").isDropDownList();

// Can be any of the items from a list of radio boxes - it will use the name
$("#randomradioboxitem").isRadioBox("myvalue");
$("#radioboxitem").isSelected("myvalue"); 
```

# [一般扩展](http://www.bitbucket.org/mrshrinkray/jquery-extensions/)

这些以 Prototype/Mochikit 函数为模型，例如 isNull。

**例子：**

```
$.isNumber(42);

var x;
$.isUndefined(x);
$.isNullOrUndefined(x);
$.isString(false);

$.emptyString("the quick brown fox");
$.startsWith("the quick brown fox","the");
$.formatString("Here is the {0} and {2}","first","second"); 
```

两者都有超过 50 个单元测试作为下载的一部分。希望它们对查找此页面的人有用。

# iphone - UIAlertView 不等待

> ID：882075
> 
> 赞同：4
> 
> 时间：2009-05-19T10:55:28.303
> 
> 标签：iphone, objective-c

我在我的代码中使用了多个 UIAlertViews，如下所示

```
-(void) myfunc
{ 
    myAlertView1 = [[UIAlertView alloc] initWithTitle:@"Message" message:[list objectAtIndex:1] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [myAlertView1 show];
    [myAlertView1 release], myAlertView1 = nil;
    {
        do something
    }
    myAlertView = [[UIAlertView alloc] initWithTitle:@"Error" message:[list          objectAtIndex:1] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [myAlertView show];
    [myAlertView release], myAlertView = nil;
} 
```

当我在模拟器中运行程序时，我`myAlertView1`短暂看到（消息）并且它不等待确定按钮单击然后我看到`myAlertView`（错误）等待确定按钮单击，之后我再次看到 myAlertView1（消息）并等待确定按钮被点击。

从逻辑上讲，我想查看 `myAlertView1`(Message) 并等待单击 Ok 按钮，然后查看`myAlertView`(Error ) 并等待单击按钮。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T10:58:36.830

`UIAlertView`不像人们想象的那样是模态的。`alertView:didDismissWithButtonIndex:`在创建和显示第二个之前，您应该等待您的代表收到`UIAlertView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-20T18:52:08.760

在这里，您可以按以下方式进行：

```
-(void) myfunc
{  
    myAlertView1 = [[UIAlertView alloc] initWithTitle:@"Message" message:[listobjectAtIndex:1] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [myAlertView1 show];
    [myAlertView1 release], myAlertView1 = nil;
    {
        do something
    }
} 
```

当您获得警报视图时，您可以单击“确定”按钮调用另一种方法来打开另一个警报视图。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex==0)
    {
        [self open_secondAlert];
    }
}

-(void)open_secondAlert
{
    myAlertView = [[UIAlertView alloc] initWithTitle:@"Error" message:[list objectAtIndex:1] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [myAlertView show];
    [myAlertView release], myAlertView = nil;
} 
```

如果您还有任何问题，请告诉我。

谢谢， 最好的问候， Gurprit

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-26T17:27:45.637

这是使对话框模态化的方法。

我在研究 MonoTouch/C# 用户的类似问题时遇到了这个问题，所以我为他编写了这个示例。相同的示例可以很容易地移植到 Objective-C。

为此，您可以手动运行主循环。我没有设法直接停止主循环，所以我改为运行主循环 0.5 秒并等待用户响应。

以下函数显示了如何使用上述方法实现模态查询：

```
int WaitForClick ()
{
    int clicked = -1;
    var x = new UIAlertView ("Title", "Message",  null, "Cancel", "OK", "Perhaps");
    x.Show ();
    bool done = false;
    x.Clicked += (sender, buttonArgs) => {
        Console.WriteLine ("User clicked on {0}", buttonArgs.ButtonIndex);
    clicked = buttonArgs.ButtonIndex;
    };    
    while (clicked == -1){
        NSRunLoop.Current.RunUntil (NSDate.FromTimeIntervalSinceNow (0.5));
        Console.WriteLine ("Waiting for another 0.5 seconds");
    }

    Console.WriteLine ("The user clicked {0}", clicked);
    return clicked;
} 
```

# javascript - Javascript - 如何对数字求平方？

> ID：882080
> 
> 赞同：4
> 
> 时间：2009-05-19T10:56:01.563
> 
> 标签：javascript, 32-bit

使用 javascript 函数

```
function squareIt(number) {
   return number * number;
} 
```

当给定数字 4294967296 时，函数返回 18446744073709552000 返回

每个人都知道真正的答案是 18446744073709551616 :-)

我想这与我的 32 位机器上的舍入有关。但是，这个脚本会在 64 位机器上给出正确的答案吗？有没有人试过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T11:06:50.400

ChrisV-[看到这篇文章](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-to)。通过在浏览器 URL 文本框中直接键入以下 JavaScript，人们还可以更轻松地评估您的问题：

```
javascript:4294967296*4294967296 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T11:02:10.567

那这个呢

```
function squareIt(number){
return Math.pow(number,2)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T11:00:05.220

Javascript 在内部使用 64 位浮点算法进行数值计算 - 您看到的结果反映了这一点，并且无论底层架构如何都会发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-07T14:26:55.960

这是另一个基于**[BigInteger.js](https://github.com/peterolson/BigInteger.js#square)**的示例。

```
alert(bigInt(4294967296).square());
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/big-integer/1.6.40/BigInteger.min.js"></script>
```

# css - 固定底部对齐的 Div

> ID：882104
> 
> 赞同：1
> 
> 时间：2009-05-19T11:01:25.653
> 
> 标签：css

我需要页面底部的页脚，它与任何使页面滚动的内容重叠。此外，向下滚动时，页脚仍然需要留在那里。

这对于仅适用于 IE6+ 的 css 是否可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T12:05:25.477

最近我使用了以下样式：

```
div.BottomDisclaimer
{
  z-index:100;
  position:fixed;
  bottom:0px;
  border-top-style: solid;
  border-top-width: 1pt;
  padding-top: 4px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T11:29:59.170

快速谷歌搜索 CSS 页脚，你会找到很多解决方案。但大多数解决方案似乎都是这样工作的：

```
<body>
  <div id="wrapper">
     Main content
  </div>
  <div id="footer">
     Footer content
  </div>
</body> 
```

然后应用css：

```
body, html { height: 100% }
#wrapper { height: 100% }
#footer {
  height: 150px;
  margin-top: -150px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:55:45.883

对于 IE6，无法使用`position:fixed`. 如果需要，您可以使用 Dean Edwards 的[IE7 库](http://dean.edwards.name/ie7/)来获得该行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T11:21:44.363

编辑：因为 IE6 不支持 position:fixed;，所以这是[一个很好的解决方法](http://www.cssplay.co.uk/layouts/fixed.html)。

# linux - 大师们说 LD_LIBRARY_PATH 不好 - 有什么选择？

> ID：882110
> 
> 赞同：25
> 
> 时间：2009-05-19T11:03:42.093
> 
> 标签：linux, linker

我阅读了一些关于使用 LD_LIBRARY_PATH 的问题的文章，即使是作为包装脚本的一部分：

[http://linuxmafia.com/faq/Admin/ld-lib-path.html](http://linuxmafia.com/faq/Admin/ld-lib-path.html)

[http://blogs.oracle.com/ali/entry/avoiding_ld_library_path_the](http://blogs.oracle.com/ali/entry/avoiding_ld_library_path_the)

在这种情况下 - 推荐的替代方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T11:45:15.097

您可以尝试添加：

```
-Wl,-rpath,path/to/lib 
```

到链接器选项。这将使您无需担心`LD_LIBRARY_PATH`环境变量，并且您可以在**编译时**决定指向特定的库。

对于相对于二进制文件的路径，您可以使用 $ORIGIN，例如

```
-Wl,-rpath,'$ORIGIN/../lib' 
```

（使用 ld 静态链接到共享库时，$ORIGIN 可能不起作用，请使用 -Wl,--allow-shlib-undefined 来解决此问题）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T11:16:39.757

我一直设置 LD_LIBRARY_PATH，从来没有遇到过问题。

引用您的第一个链接：

> 我应该什么时候设置 LD_LIBRARY_PATH？简短的回答是永远不会。为什么？**由于其他用户的错误建议或他们不知道如何修复的错误链接代码，一些用户似乎设置了此环境变量。**

这**不是**我所说的明确的问题陈述。事实上，它让人想起[我不喜欢它](http://www.youtube.com/watch?v=D4tZRZSGxcE)。[YouTube，但 SFW]。

* * *

第二个博客条目（[http://blogs.oracle.com/ali/entry/avoiding_ld_library_path_the](http://blogs.oracle.com/ali/entry/avoiding_ld_library_path_the)）在问题的性质上更加即将到来......简而言之，这似乎是库版本冲突ThisProgram需要Foo1。 2，但 ThatProgram 需要 Foo1.3，因此您不能（轻松地）运行这两个程序。请注意，大多数这些问题都可以通过一个简单的包装脚本来解决，该脚本仅为正在执行的 shell 设置 LD_LIBRARY_PATH，它（几乎总是）是交互式 shell 的单独子进程。

另请注意，替代方案在帖子中得到了很好的解释。

我只是很困惑为什么你会发布一个包含文章链接的问题，这些文章显然回答了你的问题......你有没有在其中任何一篇文章中涵盖（足够清楚）的特定问题？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-19T11:20:38.330

答案在您引用的第一篇文章中。

> 在 UNIX 中，可以使用编译器的 -L dir 选项指定库的位置。.... 作为使用 -L 和 -R 选项的替代方法，您可以在编译代码之前设置环境变量 LD_RUN_PATH。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-11T01:41:44.537

我发现现有的答案实际上并没有以直接的方式回答这个问题：

1.  `LD_RUN_PATH`在链接软件时由链接器使用（请参阅 参考资料`ld`）。仅当您`-rpath ...`在命令行上没有（`-Wl,rpath ...`在 gcc 命令行上）时才使用它。该变量中定义的路径将添加到`RPATH`ELF 二进制文件中的条目中。（你可以看到`RPATH`使用`objdump -x binary-filename`— 在大多数情况下它不存在！它出现在我的开发二进制文件中，但是一旦安装了最终版本就会`RPATH`被删除。）

2.  `LD_LIBRARY_PATH`在运行时使用，当您想要指定动态链接器（请参阅 参考资料`ldd`）搜索库所需的目录时。指定错误的路径可能会导致加载错误的库。这是在`RPATH`二进制文件中定义的值之外使用的（如 1.）

`LD_RUN_PATH`除非您是程序员并且不知道如何使用它，否则确实不会造成安全威胁。当我使用 CMake 来构建我的软件时，`-rpath`一直在使用。这样我就不必安装所有东西来运行我的软件。`ldd`可以自动找到所有的 .so 文件。（automake 环境也应该这样做，但相比之下它不是很擅长。）

`LD_LIBRARY_PATH`是一个运行时变量，因此你必须小心它。话虽如此，如果我们没有这个特殊功能，许多共享对象将很难处理。无论是安全威胁，都可能不是。如果黑客控制了您的计算机，`LD_LIBRARY_PATH`该黑客无论如何都可以访问。可能发生的情况是您在该变量中使用了错误的路径，您的二进制文件可能无法加载，但如果它加载，您最终可能会得到一个崩溃的二进制文件，或者至少是一个不能正常工作的二进制文件。一个问题是，随着时间的推移，您会获得新版本的库，并且您可能会忘记删除`LD_LIBRARY_PATH`它，这意味着您可能正在使用不安全的库版本。

另一种安全性的可能性是，如果黑客安装了一个与二进制文件搜索的名称相同的虚假库，该库包含所有相同的功能，但其中一些功能被偷偷摸摸的代码替换了。他可以通过更改`LD_LIBRARY_PATH`变量来加载该库。然后它最终会被黑客执行。同样，如果黑客可以将这样的库添加到您的系统中，那么他已经进入并且可能一开始就不需要做任何类似的事情（因为他已经进入了他无论如何都可以完全控制您的系统。）因为实际上，如果黑客只能将库放在他的帐户中，他不会做任何事情（除非您的 Unix 机器总体上不安全......）如果黑客可以替换您的一个`/usr/lib/...`库，他已经可以完全访问您的系统。所以`LD_LIBRARY_PATH`不需要。

# asp.net-mvc - 检查 MVC.net 是从 Web 安装项目安装的

> ID：882111
> 
> 赞同：3
> 
> 时间：2009-05-19T11:03:53.433
> 
> 标签：asp.net-mvc, setup-project, web-setup-project

有谁知道一种优雅的方式来检查目标机器上是否安装了 MVC.net 的 Web 设置项目（可能是前提条件？）？注册表是最好的方法吗？还是 Windows 安装程序搜索？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:21:17.397

1) MVC 在技术上不需要安装。如果你有 .NET 3.5（没有 SP1），它可以被 bin 部署。

2) 但是，要查看它是否已安装，请[测试 .NET 3.5 SP1](https://stackoverflow.com/questions/198931/how-do-i-tell-if-net-3-5-sp1-is-installed)。

# java - 奇怪的 Clojure Box - 库（dll）问题

> ID：882118
> 
> 赞同：1
> 
> 时间：2009-05-19T11:06:53.223
> 
> 标签：java, dll, clojure, slime, jacob

我正在尝试使用 Clojure Box 将 JACOB 库与 Clojure 一起使用。

我已将此添加到我的 .emacs 中：

```
(setq swank-clojure-library-paths (list "c:/dev/dlls")) 
```

`C:/dev/dlls/`包含`jacob-1.14.3-x86.dll`.

我在`.clojure`我的目录中添加了一个目录`~/`，其中包含 `jacob.jar`.

在 Clojure Box REPL 中，`(System/getProperty "java.class.path")`产生：

```
"c:/Program Files/Clojure Box/clojure/clojure.jar;c:/Program Files/Clojure Box/clojure-contrib/clojure-contrib.jar;;c:/Documents and Settings/mac009/Application Data/.clojure/jacob.jar" 
```

和

```
"Settings/mac009/Application Data/.clojure/jacob.jar" 
```

和`(System/getProperty "java.library.path")`产量：

```
"c:/dev/dlls" 
```

如果我启动 Clojure Box 并发出问题`(import '(com.jacob.com Dispatch ComThread))`，REPL 就会挂起。

现在是奇怪的部分。如果我杀死 REPL 并执行“Alt-X slime”并对“创建一个额外的*劣质 lisp*？（y 或 n）”回答否并发出“（import '（com.jacob.com Dispatch ComThread））”它可以工作！更奇怪的是，如果我首先发出“（import '（com.jacob.com Dispatch ComThread））”并让REPL挂起，这只会“有效”。如果我只是启动 Clojure Box 并杀死/重新启动 REPL 而没有先发出“（import '（com.jacob.com Dispatch ComThread））”，它就会挂起。

任何帮助是极大的赞赏。

雅各布：http : [//sourceforge.net/projects/jacob-project/](http://sourceforge.net/projects/jacob-project/)

Clojure 盒子： [http ://clojure.bighugh.com/](http://clojure.bighugh.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-03-27T23:04:54.330

您还需要将 swank-clojure.jar 复制到 ~/clojure。

1.  把它放在 ~/.emacs 中：

    (setq swank-clojure-library-paths '("c:\dev\dlls"))

2.  创建目录 C:\dev\dlls。

3.  将 Jacob DLL 复制到 C:\dev\dlls。
4.  创建目录 ~/clojure.
5.  将 clojure.jar、clojure-contrib.jar 和 swank-clojure.jar 复制到 ~/clojure。
6.  启动 ClojureBox。

版本：

*   ClojureBox 1.2.0
*   雅各布-1.15-M4

# windows - 在启动时为所有用户启动应用程序，但也允许按用户设置 (Windows)

> ID：882123
> 
> 赞同：2
> 
> 时间：2009-05-19T11:08:51.457
> 
> 标签：windows, installation, desktop, registry

我需要我的应用程序安装程序将程序设置为为所有用户自动启动。然后每个单独的用户应该能够修改这个选项而不影响其他人。

目前我用安装程序写信给 HKLM/../Run，它完成了第一个任务。但是我不能为当前用户禁用自动运行，因为删除 HKLM/../Run 条目会为每个人禁用它。

有没有办法做到这一点，而不使用 Autostart 文件夹中的快捷方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T11:14:03.880

始终为所有用户启动它，但检查 HKLU 中的配置变量以查看它是否应立即退出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T23:08:18.617

有什么理由不首先使用 HKCU Run 键吗？

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run] 
```

# sharepoint - 在编辑和创建模式下隐藏 SharePoint 自定义字段类型

> ID：882124
> 
> 赞同：0
> 
> 时间：2009-05-19T11:09:01.597
> 
> 标签：sharepoint, moss, wss, sharepoint-2007

我正在尝试在 SharePoint 中创建自定义字段类型。

此控件的值基于同一列表中的另一个字段设置。由于此要求，此字段应仅在显示模式下显示，而不应在编辑或创建模式下显示。

我如何确保这一点？

如果我只是将 ASCX 控件编码为不呈现字段，则该字段将在“编辑和创建”模式下显示为这样。

[替代文字 http://www.mannsoftware.com/blog/Lists/Photos/121308_0204_CrossSiteLo6.png](http://www.mannsoftware.com/blog/Lists/Photos/121308_0204_CrossSiteLo6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:30:31.087

通常，您将 SPField.ReadOnlyField 属性设置为 True 以实现任何字段的所需行为。（不要忘记相应地进行 SPField.Update！）我相信列表定义有一个等效的 CAML 属性。

也就是说，在派生自 BaseFieldControl 的控件类中，您可能只是重写 RenderFieldForInput() 方法而不调用基本实现以确保在创建或编辑期间不呈现任何内容。但是，这仍然会在表单中呈现字段的表格行，这可能不是您想要的。因此，要强制执行所需的行为，请在您的 SPField（不是字段控件）类中使用 ReadOnlyField 并覆盖 Update() 以始终将其设置为 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:55:43.447

`Advanced`通过转到 的部分`List Settings`，设置`Allow management of content types?`为`Yes`，然后编辑您的内容类型以将字段的值更改为“ ”，逐个列表地更改它可能会更容易`hidden`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T17:45:08.363

看看这篇博文。我想它会给你一些想法。该概念根据模式使用不同的渲染模板。

[http://sharepoint.nailhead.net/2008/04/creating-rendering-template-that.html](http://sharepoint.nailhead.net/2008/04/creating-rendering-template-that.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T21:04:07.760

您是否尝试将字段设置为隐藏？ [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfield.hidden.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfield.hidden.aspx)

新项目和编辑项目（NewForm.aspx 和 EditForm.aspx）的自定义表单页面将是实现此目的的另一种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-07-05T20:08:34.263

设置 ShowInEditForm 和 ShowInNewForm 属性为我解决了这个问题。

# javascript - 将值从弹出窗口（子）发送到父

> ID：882128
> 
> 赞同：0
> 
> 时间：2009-05-19T11:10:40.800
> 
> 标签：javascript, asp.net, asp.net-2.0

我想在一个文本框中的弹出页面上获取一个值，并将其发送到父窗口，发送到另一个文本框。

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T11:27:46.007

您的问题尚不清楚，但根据我的推断，您想从子窗口的父窗口中获取文本框的值。

你可以做这样的事情 -

```
var win = window.open('<Window URL>');
win.contentWindow.SetValueOfTextBox(parentWindowTextBoxValue); 
```

这`win`是您打开的窗口的实例。

您必须`SetValueOfTextBox`在打开的新窗口中定义功能。此函数将接受一个字符串并将该值设置为该页面上的文本框。您只需从父窗口调用该函数，将文本框的值传递给它。

# c# - 问题传递私钥和公钥？

> ID：882130
> 
> 赞同：0
> 
> 时间：2009-05-19T11:11:27.367
> 
> 标签：c#, bouncycastle

我需要以字符串格式传递公钥和私钥，以便在 pgp 中进行加密和解密。我已经生成了这样的密钥，但我无法使用它们。那么谁能告诉我如何从中获取字符串格式的公钥和私钥。而且 rsakeygenerator 也没有给出私钥的密码。那么我在哪里获得私钥的密码？

```
private void button2_Click(object sender, EventArgs e)
{
    // keyPair = createASymRandomCipher();
    //CipherPublicKey publicKey = getCipherPublicKey(keyPair);
    AsymmetricCipherKeyPair keyPair = createASymRandomCipher();
    Org.BouncyCastle.Crypto.Parameters.RsaKeyParameters pubkey = (Org.BouncyCastle.Crypto.Parameters.RsaKeyParameters)keyPair.Public;
    Org.BouncyCastle.Crypto.Parameters.RsaPrivateCrtKeyParameters privkey = (Org.BouncyCastle.Crypto.Parameters.RsaPrivateCrtKeyParameters)keyPair.Private;
    CipherPublicKey pbkey = getCipherPublicKey(pubkey);
    CipherPrivateKey prvkey = getCipherPrivateKey(privkey);

}

private static AsymmetricCipherKeyPair createASymRandomCipher() 
{
    RsaKeyPairGenerator r = new RsaKeyPairGenerator();
    r.Init(new KeyGenerationParameters(new SecureRandom(),
          1024));
    AsymmetricCipherKeyPair keys = r.GenerateKeyPair();
    return keys;
}

[Serializable]
private struct CipherPrivateKey
{
    public byte[] modulus; 
    public byte[] publicExponent; 
    public byte[] privateExponent; 
    public byte[] p; 
    public byte[] q; 
    public byte[] dP; 
    public byte[] dQ; 
    public byte[] qInv;
}

[Serializable]
private struct CipherPublicKey 
{ 
    public bool isPrivate; 
    public byte[] modulus; 
    public byte[] exponent;
}

private static CipherPublicKey getCipherPublicKey(Org.BouncyCastle.Crypto.Parameters.RsaKeyParameters cPublic) 
{ 
    CipherPublicKey cpub = new CipherPublicKey(); cpub.modulus = cPublic.Modulus.ToByteArray(); 
    cpub.exponent = cPublic.Exponent.ToByteArray(); 
    return cpub; 
}

private static CipherPrivateKey getCipherPrivateKey(Org.BouncyCastle.Crypto.Parameters.RsaPrivateCrtKeyParameters cPrivate)
{
    CipherPrivateKey cpri = new CipherPrivateKey(); 
    cpri.dP = cPrivate.DP.ToByteArray(); 
    cpri.dQ = cPrivate.DQ.ToByteArray(); 
    cpri.modulus = cPrivate.Modulus.ToByteArray(); 
    cpri.p = cPrivate.P.ToByteArray(); 
    cpri.privateExponent = cPrivate.Exponent.ToByteArray(); 
    cpri.publicExponent = cPrivate.PublicExponent.ToByteArray(); 
    cpri.q = cPrivate.Q.ToByteArray(); 
    cpri.qInv = cPrivate.QInv.ToByteArray(); 
    return cpri;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T11:16:06.013

您需要向用户询问密码。*拥有*密码短语的全部意义在于，没有它你将无法计算出私钥，只有用户才能提供它。

（我没有看过你的其余代码，不熟悉 BouncyCastle API。我确实质疑具有大量字节数组的可变结构的智慧......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T04:57:07.467

您的转换问题的答案是将它们转换为 Base64Strings

如果您希望它以十六进制表示（以便用户可以更轻松地输入），您可以使用 System.Runtime.Remoting.Metadata.W3cXsd2001 命名空间来转换为十六进制代表/从十六进制代表转换。这是[C# 中的一个示例](http://jasonrshaver.com/blog/easiest-way-to-convert-a-byte-to-a-hex-string/)。

我还要说你的过程中可能存在安全漏洞，但我不确定我是否有资格解决它。（见乔恩的帖子）

# iphone - 有没有一种简单的方法来确定两个变换是否相同？

> ID：882131
> 
> 赞同：3
> 
> 时间：2009-05-19T11:11:28.583
> 
> 标签：iphone, core-animation

我试过这个，但这不起作用：

```
CATransform3D currentTransform = self.layer.transform;
CATransform3D identityTransform = CATransform3DIdentity;
if (currentTransform == identityTransform)
    NSLog(@"the same"); 
```

我真的很想比较矩阵中的每个字段；）我可以以某种方式将其作为一个整体进行比较，还是我必须提取每个值进行比较？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-19T11:35:34.430

[`CATransform3DEqualToTransform`](http://developer.apple.com/documentation/Cocoa/Reference/CoreAnimation_functions/Reference/reference.html#//apple_ref/c/func/CATransform3DEqualToTransform)

# c# - 向 XML 节点添加属性

> ID：882143
> 
> 赞同：58
> 
> 时间：2009-05-19T11:17:17.620
> 
> 标签：c#, xml

如何动态创建具有以下结构的 xml 文件？

```
<Login>
  <id userName="Tushar" passWord="Tushar">
      <Name>Tushar</Name>
      <Age>24</Age>
  </id>
</Login> 
```

我无法在`id`标签内创建属性（即 userName="" 和 passWord=""）。

我在 Windows 应用程序中使用 C#。

您可能需要的一些重要命名空间是

```
using System.Xml;
using System.IO; 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-05-19T11:21:57.640

那么`id`不是真正的根节点：`Login`是。

它应该只是使用指定属性（不是标签，顺便说一句）的情况[`XmlElement.SetAttribute`](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.setattribute.aspx)。不过，您尚未指定如何创建文件 - 无论您是使用 XmlWriter、DOM 还是任何其他 XML API。

如果您可以举一个您所拥有的代码不起作用的示例，那将有很大帮助。同时，这里有一些代码可以创建您描述的文件：

```
using System;
using System.Xml;

class Test
{
    static void Main()
    {
        XmlDocument doc = new XmlDocument();
        XmlElement root = doc.CreateElement("Login");
        XmlElement id = doc.CreateElement("id");
        id.SetAttribute("userName", "Tushar");
        id.SetAttribute("passWord", "Tushar");
        XmlElement name = doc.CreateElement("Name");
        name.InnerText = "Tushar";
        XmlElement age = doc.CreateElement("Age");
        age.InnerText = "24";

        id.AppendChild(name);
        id.AppendChild(age);
        root.AppendChild(id);
        doc.AppendChild(root);

        doc.Save("test.xml");
    }
} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-05-14T09:22:06.510

还有一种向`XmlNode`对象添加属性的方法，在某些情况下可能很有用。

[我在msdn.microsoft.com](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.attributes.aspx)上找到了另一种方法。

```
using System.Xml;

[...]

//Assuming you have an XmlNode called node
XmlNode node;

[...]

//Get the document object
XmlDocument doc = node.OwnerDocument;

//Create a new attribute
XmlAttribute attr = doc.CreateAttribute("attributeName");
attr.Value = "valueOfTheAttribute";

//Add the attribute to the node     
node.Attributes.SetNamedItem(attr);

[...] 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-05-19T14:46:20.817

构造 XML 的最新且被认为是最好的方法是使用 LINQ to XML：

```
using System.Xml.Linq

       var xmlNode =
            new XElement("Login",
                         new XElement("id",
                             new XAttribute("userName", "Tushar"),
                             new XAttribute("password", "Tushar"),
                             new XElement("Name", "Tushar"),
                             new XElement("Age", "24")
                         )
            );
       xmlNode.Save("Tushar.xml"); 
```

假设这种编码方式应该更容易，因为代码与输出非常相似（上面 Jon 的示例没有）。但是，我发现在编写这个相对简单的示例时，我很容易在你必须在其中导航的大量逗号之间迷路。Visual Studio 的代码自动间距也无济于事。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-09-09T10:31:20.160

您可以使用 Class **XmlAttribute**。

例如：

```
XmlAttribute attr = xmlDoc.CreateAttribute("userName");
attr.Value = "Tushar";

node.Attributes.Append(attr); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-26T15:25:26.580

如果您序列化您拥有的对象，您可以通过在您希望在模型中指定为属性的每个属性上使用“ *System.Xml.Serialization.XmlAttributeAttribute* ”来执行类似的操作，我认为这要容易得多：

```
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public class UserNode
{
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string userName { get; set; }

    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string passWord { get; set; }

    public int Age { get; set; }
    public string Name { get; set; }         
 }

 public class LoginNode 
 {
    public UserNode id { get; set; }
 } 
```

然后，您只需将一个名为“Login”的 LoginNode 实例序列化为 XML，就是这样！

[在这里](https://stackoverflow.com/questions/4123590/serialize-an-object-to-xml)，您有一些示例来序列化和反对 XML，但我建议创建一个扩展方法以便可重用于其他对象。

# eclipse - 将tomcat web项目从eclipse ganymede移植到intellij 8.1

> ID：882145
> 
> 赞同：1
> 
> 时间：2009-05-19T11:18:47.583
> 
> 标签：eclipse, tomcat, maven-2, intellij-idea

我有一个使用 eclipse IDE 开发的标准（我认为）Web 项目。我希望将它移植到 Intellij idea 8.1 - 我认为，除其他外，它具有更好的 taglib 支持。

我的项目结构如下：

```
Project Folder
./src  [java source files etc.]
./conf [configuration files - log4j, spring beans...]
./buid [ant files]
./WebContent
./WebContent/images [image files]
./WebContent/META-INF
./WebContent/META-INF/context.xml
./WebContent/pages [.jsp+.html files]
./WebContent/scripts [.js files]
./WebContent/skins [.css files]
./WebContent/WEB-INF
./WebContent/WEB-INF/classes [.class files]
./WebContent/WEB-INF/lib [.jar files]
./WebContent/WEB-INF/tags [.tag files]
./WebContent/WEB-INF/web.xml 
```

我似乎无法用我的本地 tomcat 服务器（版本：apache-tomcat-6.0.18）配置这个项目。

我认为一个好的答案将是一个标准的、逐步的、关于如何移植（以及如何在 intellij idea 中正确定义 tomcat Web 应用程序）的食谱答案。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-29T18:27:16.820

我认为第一步是创建一个独立的构建文件，它将产生一个 WAR。在尝试将项目导入 InteliJ 之前执行此操作。

我会使用[Maven](http://maven.apache.org/)。 [创建一个 Maven POM 文件](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)来[创建一个 WAR](http://maven.apache.org/plugins/maven-war-plugin/usage.html)几乎是微不足道的，您可以轻松地覆盖您的 src、conf 和 web 内容的默认位置以匹配您现有的 src 目录。然后通过将新的 Maven 创建的 WAR 部署到 Tomcat 来测试构建。我认为第一项任务不会超过半天（最多一整天）。

IntelliJ 具有[用于导入 Maven 项目的内置实用程序](http://www.jetbrains.com/idea/webhelp/index.jsp?maven-support.html)。然后你应该下车并运行......

无论您最终选择哪种 IDE，从长远来看，您的项目对于 Maven 迁移都会好得多。

你最初的 Maven POM 文件看起来*像*这样......

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.yourcompany.yourapp</groupId>
  <artifactId>yourapp</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>Your project name here</name>
  <url>http://maven.apache.org</url>
  <dependencies>
     <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
      </dependency>
      <dependency>
        *** other dependencies here ***
      </dependency>
  </dependencies>
  <build>
     <sourceDirectory>src</sourceDirectory>
     <resources>
        <resource>
           <directory>conf</directory>
           <includes>
              <include>**/*.xml</include>
           </includes>
        </resource>
     </resources>
     <plugins>
        <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-war-plugin</artifactId>
           <version>2.0</version>
           <configuration>
              <webResources>
                 <resource>
                    <!-- this is relative to the pom.xml directory -->
                    <directory>WebContent</directory>
                 </resource>
              </webResources>
           </configuration>
        </plugin>
     </plugins>
  </build>
</project> 
```

*** 这只是一个示例 POM...它只是为了让您入门，可能无法“按原样”工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-02T07:51:05.567

首先在 IntelliJ 中为 tomcat 创建一个空的 Web 应用程序 - 并确保它正确部署 这将生成一个目录结构，然后您应该能够将源文件/Web 资产复制到该目录结构中。

您可能需要以不同方式处理的事情是 lib 文件 - 不要将它们直接存储在 WEB-INF 目录中，因为将它们保存在单独的“库”区域中，并允许 IDE 将它们包含在 WAR 中在构建时通常是一种更好的方法，因为它促进了跨项目的重用。

目标的关键是不要尝试将您的项目设置为完全镜像 tomcat 应用程序，因为构建过程会为您整合各个部分。这一切都分为3个部分......

1.  静态资产 - 图像、配置文件和 jsp 文件（好吧，我知道 JSP 文件有点动态）
2.  Java 类 - 您自己编写的源代码（IDE 将编译这些并将它们放置在适当的位置）
3.  Java 库 - 您编译的第三方代码（IDE 将再次将它们放置在适当的位置）

项目文件中有一些配置，您需要根据需要进行调整，但通常很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:43:43.200

1.  默认情况下，log4j 将从应用程序的类路径中查找它的配置文件（log4j.xml 或 log4j.properties）。所以这意味着你应该把它放在里面`WEB-INF\classes`，或者你可以用环境变量指定一个不同的位置`log4j.configuration`。请参阅[log4j 手册](http://logging.apache.org/log4j/1.2/manual.html#defaultInit)。
2.  当应用程序部署到 servlet 容器时，您使用的 IDE 应该不会影响应用程序的结构。听起来您可能依赖 Eclipse 以特定方式打包文件——这可能是一种不好的做法。您使用的是实际的构建脚本吗？

# php - 不能通过 php 在事务中使用准备好的语句吗？

> ID：882146
> 
> 赞同：0
> 
> 时间：2009-05-19T11:19:48.863
> 
> 标签：php, postgresql, transactions, pdo, prepared-statement

我在 LAPP 环境（linux apache postgresql php）上工作，我只是想了解如何在事务中使用准备好的语句（如果可能的话）。

我希望代码能比文字更好地解释：

示例1，简单交易：

```
BEGIN;
INSERT INTO requests (user_id, description, date) VALUES ('4', 'This dont worth anything', NOW());
UPDATE users SET num_requests = (num_requests + 1) WHERE id = '4';
--something gone wrong, cancel the transaction
ROLLBACK;
UPDATE users SET last_activity = NOW() WHERE id = '4'
COMMIT; 
```

在上面的例子中，如果我没有正确理解事务，数据库中唯一的影响将是 last_activity 的更新......是吗？

如果我尝试在 php 中使用该事务（使用 PDO 或 pg_ 方法），则代码应如下所示（示例 2）：

```
/* skip the connection */
pg_query($pgConnection, "BEGIN");
pg_query($pgConnection, "INSERT INTO requests (user_id, description, date) VALUES ('$id_user', 'This dont worth anything', NOW())");
pg_query($pgConnection, "UPDATE users SET num_requests = (num_requests + 1) WHERE id = '$id_user'");
//something gone wrong, cancel the transaction
pg_query($pgConnection, "ROLLBACK");
pg_query($pgConnection, "UPDATE users SET last_activity = NOW() WHERE id = '$id_user'");
pg_query($pgConnection, "COMMIT"); 
```

这很好用。也许难看，但*似乎*有效（建议总是受欢迎的）

无论如何，当我尝试将示例 2 与准备好的语句结合起来时，我的问题就来了（我知道在示例 2 中使用准备好的语句不是很有用）

示例 3：

```
/* skip the connection */
pg_prepare($pgConnection, 'insert_try', "INSERT INTO requests (user_id, description, date) VALUES ('$1', '$2', $3)");
pg_query($pgConnection, "BEGIN");
pg_execute($pgConnection, 'insert_try', array($user_id, 'This dont worth anything', date("Y-m-d")));
/* and so on ...*/ 
```

好吧，示例 3 根本不起作用，如果事务在回滚中到期，则准备好的语句将有效。

那么，准备好的语句不能在事务中使用，还是我走错了路？

**编辑：**

在尝试了 PDO 之后，我到了这一点：

```
<?php
$dbh = new PDO('pgsql:host=127.0.0.1;dbname=test', 'myuser', 'xxxxxx');

$rollback = false;

$dbh->beginTransaction();

//create the prepared statements
$insert_order = $dbh->prepare('INSERT INTO h_orders (id, id_customer, date, code) VALUES (?, ?, ?, ?)');
$insert_items = $dbh->prepare('INSERT INTO h_items (id, id_order, descr, price) VALUES (?, ?, ?, ?)');
$delete_order = $dbh->prepare('DELETE FROM p_orders WHERE id = ?');

//move the orders from p_orders to h_orders (history)
$qeOrders = $dbh->query("SELECT id, id_customer, date, code FROM p_orders LIMIT 1");
while($rayOrder = $qeOrders->fetch(PDO::FETCH_ASSOC)){
    //h_orders already contain a row with id 293
    //lets make the query fail
    $insert_order->execute(array('293', $rayOrder['id_customer'], $rayOrder['date'], $rayOrder['code'])) OR var_dump($dbh->errorInfo());
    //this is the real execute
    //$insert_order->execute(array($rayOrder['id'], $rayOrder['id_customer'], $rayOrder['date'], $rayOrder['code'])) OR die(damnIt('insert_order'));
    //for each order, i move the items too
    $qeItems = $dbh->query("SELECT id, id_order, descr, price FROM p_items WHERE id_order = '" . $rayOrder['id'] . "'") OR var_dump($dbh->errorInfo());
    while($rayItem = $qeItems->fetch(PDO::FETCH_ASSOC)){
        $insert_items->execute(array($rayItem['id'], $rayItem['id_order'], $rayItem['descr'], $rayItem['price'])) OR var_dump($dbh->errorInfo());
    }
    //if everything is ok, delete the order from p_orders
    $delete_order->execute(array($rayOrder['id'])) OR var_dump($dbh->errorInfo());
}
//in here i'll use a bool var to see if anythings gone wrong and i need to rollback,
//or all good and commit
$dbh->rollBack();
//$dbh->commit();
?> 
```

上面的代码失败，输出如下：

> array(3) { [0]=> string(5) "00000" [1]=> int(7) [2]=> string(62) "错误：重复键违反唯一约束 "id_h_orders"" }
> 
> array(3) { [0]=> string(5) "25P02" [1]=> int(7) [2]=> string(87) "错误：当前事务被中止，命令被忽略直到事务块结束" }
> 
> 致命错误：在第 23 行的 /srv/www/test-db/test-db-pgsql-08.php 中的非对象上调用成员函数 fetch()

因此，似乎当第一次执行失败（id 为 293 的那个）时，事务会自动中止...... PDO 是自动回滚还是其他？

我的目标是完成第一个大的 while 循环，最后，使用 bool var 作为标志，决定是回滚还是提交事务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:31:11.117

你应该使用

```
pdo_obj->beginTransaction()
pdo_obj->commit()
pdo_obj->prepare() 
```

此外，您在第一个示例结束时有一个随机提交。

```
begin
// do all your stuff
// check for errors through interface
commit OR not

pg_query($pgConnection, "ROLLBACK"); // end of tx(1)
// start new transaction after last rollback = tx(2)
pg_query($pgConnection, "UPDATE users SET last_activity = NOW() WHERE id = '$id_user'");
// commit tx(2) or don't here
// this isn't needed pg_query($pgConnection, "COMMIT"); 
```

如果您没有提交，并且需要手动调整内容，请使用另一个事务。准备查询（如果我记得的话）是事务的一部分，因为它可能会失败。您实际上不能只是手动获取一条 SQL 语句并将其转换为查询。PDO 接口有抽象是有原因的。:)

[http://uk3.php.net/pdo](http://uk3.php.net/pdo) <-- PHP/Postgre 使用 PDO 的可靠示例

**祝你好运**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T11:31:48.067

使用 PostgreSQL，如果任何语句在事务期间产生服务器错误，则该事务被标记为中止。这并不意味着它实际上已经回滚了——只是你几乎不能做任何事情，*除了*回滚它。我假设 PDO 不会自动发出回滚，它会等待您调用“回滚”方法。

为了实现我认为你想要的，你可以使用保存点。您可以回滚到保存点并继续事务，而不是回滚整个事务。我将给出一个使用 psql 的示例：

```
srh@srh@[local] =# begin;
BEGIN
srh@srh@[local] *=# insert into t values(9,6,1,true);
INSERT 0 1
srh@srh@[local] *=# savepoint xyzzy;
SAVEPOINT
srh@srh@[local] *=# insert into t values(9,6,2,true);
ERROR:  duplicate key value violates unique constraint "t_pkey"
srh@srh@[local] !=# insert into t values(10,6,2,true);
ERROR:  current transaction is aborted, commands ignored until end of transaction block
srh@srh@[local] !=# rollback to savepoint xyzzy;
ROLLBACK
srh@srh@[local] *=# insert into t values(10,6,2,true);
INSERT 0 1
srh@srh@[local] *=# commit;
COMMIT
srh@srh@[local] =# 
```

所以在这个例子中，t 的第一列是主键。我试图在 t 中插入两行，id 为 9，并且得到了唯一性约束。我不能只用正确的值重做插入，因为现在任何语句都会得到“当前事务被中止......”错误。但我可以执行“回滚到保存点”，这使我回到了执行“保存点”时的状态（“xyzzy”是保存点的名称）。然后我可以发出正确的插入命令并最终提交事务（提交两个插入）。

因此，在您的情况下，我怀疑您需要做的是在 UPDATE 语句之前创建一个保存点：如果它给出错误，请执行“回滚到保存点”并设置您的标志。您需要为保存点生成唯一名称：例如，使用计数器。

我不完全确定我理解你为什么要做这一切。确定要在知道要回滚事务后立即停止处理？或者循环中是否还有其他一些必须发生的处理？

# c# - 执行时间计算

> ID：882149
> 
> 赞同：4
> 
> 时间：2009-05-19T11:20:19.437
> 
> 标签：c#, algorithm

如何计算 C#、Windows 应用程序的执行时间。

有没有行业认可的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T11:33:44.857

[`System`](http://msdn.microsoft.com/en-us/library/system.aspx). [`Diagnostics`](http://msdn.microsoft.com/en-us/library/system.diagnostics.aspx). [`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx). [`GetCurrentProcess()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getcurrentprocess.aspx). [`TotalProcessorTime`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.totalprocessortime.aspx)- 进程使用的处理器时间（用户模式和内核模式）。使用[`UserProcessorTime`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.userprocessortime.aspx)和[`PrivilegedProcessorTime`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.privilegedprocessortime.aspx)作为单独的值。

[`System`](http://msdn.microsoft.com/en-us/library/system.aspx). [`Diagnostics`](http://msdn.microsoft.com/en-us/library/system.diagnostics.aspx). [`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx). [`GetCurrentProcess()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getcurrentprocess.aspx). [`StartTime`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.starttime.aspx)- 结合[`DateTime`](http://msdn.microsoft.com/en-us/library/system.datetime.aspx). [`Now`](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)进程的运行时间。

使用[`System`](http://msdn.microsoft.com/en-us/library/system.aspx). [`Diagnostics`](http://msdn.microsoft.com/en-us/library/system.diagnostics.aspx). [`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)分析孤立的任务。

对于高级任务，您可以使用[`System`](http://msdn.microsoft.com/en-us/library/system.aspx). [`Diagnostics`](http://msdn.microsoft.com/en-us/library/system.diagnostics.aspx). [`PerformanceCounter`](http://msdn.microsoft.com/de-de/library/system.diagnostics.performancecounter(VS.80).aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T18:26:23.633

您可能还对 PostSharp ( [http://www.postsharp.org/](http://www.postsharp.org/) ) 感兴趣。您可以让它在任何方法启动或停止时运行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T11:47:42.440

当您进入 Main() 并在您即将退出时再次使用 GetTickCount() API 函数，并获取它们之间的差值以获得您的程序所用的毫秒数。

# iphone - 我可以用 CALayer 代表做什么？

> ID：882154
> 
> 赞同：2
> 
> 时间：2009-05-19T11:22:02.617
> 
> 标签：iphone, cocoa-touch, uikit, core-animation

似乎有一个委托可以设置为 myView.layer.delegate = anObject

文档只是说：

> 代表
> 
> 指定接收者的委托对象。
> 
> @property(assign) id 委托

我想知道委托将实现什么样的方法，以及何时调用它们。可以解决presentationLayer的一些大问题，它不会按预期返回当前值。

更新：刚刚在另一个 Apple 文档中找到了这个：

> 警告：由于视图是图层的代理，因此您永远不应将视图设置为另一个 CALayer 对象的代理。此外，您永远不应更改此层的委托。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T18:07:16.160

委托由 CALayers 使用。在 UIVIew 的情况下，视图本身就是委托，就像您发现的那样，不应更改。

如果您创建自己的 CALayer，则可以使用委托提供内容或手动绘制到图层。

有关更多信息，请参阅核心动画指南。

# fxcop - FxCop 和 IComparable/IComparable

> ID：882156
> 
> 赞同：2
> 
> 时间：2009-05-19T11:22:15.143
> 
> 标签：fxcop, icomparable, icomparablet

我目前正在调查在我们现有的一个项目中使用 FxCop 并得到一个奇怪的结果。

输出显示了少量违反“可比较类型上的覆盖方法”规则的情况，说明“'Log' 应该覆盖 Equals，因为它实现了 IComparable。”

这有两个问题：

1.  我以为只有在实现的`CompareTo`时候才需要实现`IComparable`（MSDN自己证实了这一点）
2.  该类未实现`IComparable`，但`IComparable<T>`确实将 CompareTo 隐含为强类型。

所以 FxCop (1.36) 摇摇晃晃，还是我的理解在这里不正常..？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T16:51:17.603

FxCop 是一个非常偏执的工具......在这种情况下，我想，它试图警告您，您正在以某种方式更改比较逻辑，如果需要，您不应该忘记更改相等逻辑。你看，CompareTo 方法有时会返回 0，这应该与使用 Equals 一致。

如果这不是您的实际情况，并且您确定不需要任何重载（[MSDN 中的一个示例](http://msdn.microsoft.com/en-us/library/ms182163(VS.80).aspx)表明您还需要覆盖所有其他等式运算符）......然后只需抑制警告或禁用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-02-17T08:58:35.683

我会覆盖 Equals，

*   只需在您的方法中调用 base.Equals
*   并添加一条评论，解释为什么只需要以上内容

这样 FxCop 会很高兴，下一个查看您的代码的程序员也会很高兴。（在极少数情况下，由于语言问题，您无法执行上述操作，但这些天很少见。

# svn - Subversion 存储库统计信息，不是 StatSVN？

> ID：882160
> 
> 赞同：43
> 
> 时间：2009-05-19T11:23:08.590
> 
> 标签：svn, project-management, statsvn

是否有其他开源/免费软件包可用于为 Subversion 存储库生成存储库统计信息？

我尝试过 StatSVN，但它似乎与 Subversion 1.5 及更高版本的日志文件不兼容。

请注意，我知道 TortoiseSVN 在其对话框和存储库浏览代码中内置了一些统计信息，但这不是我想要的。

我正在寻找的是一种可以分析存储库及其日志并生成如下统计信息的工具：

*   谁签入的代码最多
*   代码随时间增长
*   繁忙的文件（经常更改）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-19T22:59:56.887

[StatSVN](http://www.statsvn.org/)确实适用于 Subversion 1.5 及更高版本。请参阅我 [在 SourceForge 论坛上](https://sourceforge.net/forum/message.php?msg_id=7400116)关于今天在 StatSVN 论坛上报告的类似问题的评论。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-12-22T04:40:33.940

试试[SVNPlot](http://code.google.com/p/svnplot)。

它是用 python 编写的，不需要“结帐工作副本”。这将很容易修改。

披露：我是 SVNPlot 的开发者。所以可能我的观点有些偏颇。:-)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-01T17:53:38.170

似乎有些**SVN 工具不再更新**：

*   [我的 Python SVN 统计信息](http://sourceforge.net/projects/mpy-svn-stats.berlios/)。2007 年最新版本。
*   [统计SVN](http://www.statsvn.org/)。最后发布 2010-01-01。
*   [SvnCrawler](http://svncrawler.sourceforge.net/)。2010 年最新版本。
*   [SvnStat](http://sourceforge.net/projects/svnstat/)。最新版本 2014-09-19。
*   [VCS 报告](http://vcsreport.sourceforge.net/)。2006 年最新版本。

一个原因可能是这些工具“足够好”。

似乎有**一个积极维护的工具**：

*   [SVN 绘图](https://bitbucket.org/nitinbhide/svnplot/wiki/Home)。最新版本 2016-05-13。

> “现代”的方式是[将 repo 转换为 git](https://stackoverflow.com/questions/79165/how-to-migrate-svn-with-history-to-a-new-git-repository/3972103#3972103)，然后使用[git 统计工具](https://stackoverflow.com/questions/1828874/generating-statistics-from-git-repository)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T20:10:59.763

我刚刚遇到了 MPY SVN STATS：

[https://sourceforge.net/projects/mpy-svn-stats.berlios/](https://sourceforge.net/projects/mpy-svn-stats.berlios/)

它工作得很好，但图表有点难看。

![来自 MPY SVN STATS 的一些统计数据](https://i.stack.imgur.com/X4U1n.png)

2017/1/10：将原始下载链接替换为更新的 sourceforge。MPY-SVN 非常容易设置（在 win10 上使用 bash 脚本称为 python）。与 statsvn.org 不同，它不需要工作副本，从存储库 url 工作。与 svnplot 不同，我能够在不到 5 分钟的时间内在 3 个存储库上运行它。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2009-07-13T16:59:22.947

你可以试试[programeter.com](http://programeter.com)。如果您需要，它有免费的包装。

# seo - 如何告诉图像搜索哪个图像很重要？

> ID：882165
> 
> 赞同：2
> 
> 时间：2009-05-19T11:24:50.177
> 
> 标签：seo

在我运行的网站上，谷歌图像搜索似乎在识别页面上的哪些图像应该被索引方面做得很差。此外，它似乎没有将该图像与大量相关数据联系起来。

是否有任何方法可以将蜘蛛的注意力集中在特定图像和相关数据上，它们是否需要在相同的标签内，或者在页面上相邻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-21T16:08:07.923

一些提示：

*   使用描述性名称，即“tabby-cat.jpg”而不是“img02396.jpg”。
*   在图像上使用 alt 标签。
*   在页面上和图像周围使用描述性文本。
*   确保图像在生成的源代码中，即如果您在浏览器中单击“查看源代码”，您会看到`<img>`标签。
*   [在http://validator.w3.org](http://validator.w3.org)验证您的站点也很有用，以防出现诸如缺少括号等可能阻止蜘蛛解析页面的重大错误。（注意：我不会担心让所有内容都 100% 有效，因为 Google 可以处理无效代码）
*   CSS 中的图像（即背景）没有索引 AFAIK。但是，我建议使用 CSS 背景来“设计”图像（一种让 Google 忽略站点标题、自定义边框、阴影等的微妙方法）。
*   也不是从 Javascript 生成的任何图像。
*   确保您没有通过 robots.txt 屏蔽图片。我知道 Joomla 默认会这样做。
*   在 Google 网站管理员工具上注册，添加您的网站，然后将其用于 Google 的“图像标注器”游戏中，该游戏应该有助于标记图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T11:30:44.160

页面上的所有图像都应编入索引。如果不是，则改进您的 alt 标签并可能重命名图像文件。由于搜索引擎不会读取图像本身的任何其他上下文（除了大小），因此您确实无能为力。如果谷歌认为图像是重复的，它也不会索引它。

当然，如果图像确实从周围页面继承上下文，那么您可以使用更少的图像或将它们移动到 CSS 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T02:04:43.860

我认为搜索机器人不能像我们一样阅读图像，所以你应该对图像做的简单且必须做的事情是使用描述性名称，这样蜘蛛就可以知道这张图片的全部内容。第二个是在图像上使用 ALT 标签，输入与图像相关的关键字。这些都是我做的。

# c# - 映射包含列表的字典

> ID：882167
> 
> 赞同：0
> 
> 时间：2009-05-19T11:25:22.690
> 
> 标签：c#, nhibernate, nhibernate-mapping

我正在尝试映射包含列表的字典。

我有以下一组表：

```
CREATE TABLE Item(id)

CREATE TABLE Filter(id)

CREATE TABLE FilterType(id)

CREATE TABLE ItemFilter(
 item REFERENCES Item(id),
 filter REFERENCES Filter(id),
 filterType REFERENCES FilterType(id)
) 
```

我想做这个映射：

```
class Item{
 public IDictionary<long, IList<ItemFilter>> ItemFiltersByType; 
} 
```

是的`long`id `filterType`。

我正在使用此映射，但它不起作用：

任何帮助将不胜感激：P. Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T21:10:48.240

我不认为你可以在这里做你想做的事情。最接近的可用映射模式是三元关联。这实际上是您所拥有的，但您没有唯一索引。NHibernate 仅支持不支持单个键的多个值的原始 IDictionary 接口。如果您有一个 FilterType 的唯一索引值（从名称来看，您正确地没有），您可以这样做：

```
<map name="ItemFiltersByType">
    <key column="Item_id" />
    <index-many-to-many class="FilterType" column="FilterType_id" />
    <many-to-many class="Filter" column="Filter_id" />
</map> 
```

我认为在这种情况下最好的解决方案是使用以下方法将操作移动到存储库：

```
IEnumerable<Filter> GetItemFiltersByType(FilterType type); 
```

# winforms - 组合框下拉缓存

> ID：882169
> 
> 赞同：4
> 
> 时间：2009-05-19T11:25:25.870
> 
> 标签：winforms, caching, combobox, drop-down-menu

我们有一个 VB.Net 应用程序，它有大约 80 个独特的组合框，分布在 15 个 Windows 上。当前，当加载 Window 时，ComboBoxes 直接从 SQL 数据库中检索其内容。

这是非常低效的，因为 ComboBox 的内容很少更改，因此在程序第一次运行时检索所有 ComboBox 下拉值是有意义的。

我一直在努力在这方面的最佳实践网络上找到工作示例。所以为了避免我重新发明轮子，有没有人有任何智慧之言或代码片段来指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T11:33:46.133

缓存绝对是要走的路，使用哈希表或类似的东西。如果您可以将所有查询合并到一个返回多个表的 SQL 请求中，并在一次调用中获取所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T11:38:58.730

可以将数据序列化为您在启动时加载并填写组合框的 xml 文件。然后，您可以向数据库添加一个具有单个值的表，即您更新数据库的最后日期，如果它在当前日期之后，则运行数据库查询以填写组合框，然后更新 xml 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T11:52:27.173

这与我正在开发的应用程序中的 reqd 非常相似。我创建了一个静态类，每个组合框都有静态 DataTables。当应用程序加载时，它会填充所有静态数据表。

样本：

```
static public class GlobalDropdownData
    {
        static private DateTime Combo1Table;

        static private DataTable Combo1Table;

        static private DataTable Combo1Table;
 } 
```

Vb.net 会是这样的：

```
Public Class GlobalDropDownData
    Shared Combo1DT As DataTable
    Shared Combo2DT As DataTable
    Shared Combo3DT As DataTable
End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T11:54:48.247

是的，您可以在应用程序启动时加载所有查找数据，一次调用返回多个结果集。我继承的一个 Winforms 应用程序就是这样做的，但代价是启动时间非常慢，因为从数据库中获取查找数据以返回所有缓存的结果集的 Web 服务调用需要几秒钟才能完成。执行。如果这是一个问题，您将需要异步启动数据库/Web 服务调用，以便在执行数据库代码时可以进行更多的初始化工作。如果您需要确保在用户执行某项任务之前数据已返回，例如单击按钮以显示带有一个或多个需要缓存数据的组合框的屏幕，则可以使用一个或多个 Winforms 计时器也有帮助。

提高性能的另一个选项可能是在单独的线程中执行数据访问调用，尽管在我正在处理的项目中，我发现其他选项足以将启动时间从大约 10 秒减少到 3 秒以下，而无需处理具有多线程的复杂性。

# git - 在 windows 和网络上设置、发布和备份 git 存储库

> ID：882172
> 
> 赞同：7
> 
> 时间：2009-05-19T11:25:45.137
> 
> 标签：git

我正在为我的嵌入式项目使用 msysgit。本地仓库很棒，但我也喜欢在我们的网盘上有仓库：

*   它提供每日备份
*   我的更改对所有人可见

我一直在尝试通过执行以下操作来两全其美：

*   在我的本地磁盘上处理 repo（更快的构建，总是和我一起使用最新的未提交文件）
*   经常提交（总是很好的细粒度）
*   将本地仓库克隆到网盘
*   不时地从网络存储库中获取（在每次启动时借助批处理文件，在我不重新启动时每隔几次提交）。

我很想知道其他用户如何设置他们的 msysgit 存储库、他们如何发布、他们如何备份等等。

当然，我很感激有人告诉我我做错了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:28:46.207

我们在一个在线 ruby​​ on rails 项目上使用[github已经有一段时间了。](http://github.com/)

我们克隆、更改、提交到我们的本地存储库，一旦确定我们推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-21T20:21:45.520

我们使用[GitHub](http://www.github.com/)进行托管源代码控制。对于私人存储库（使用他们的付费计划）来说，它实际上非常安全——它使用 SSH 和密钥进行验证，因此一切都以安全的方式传输。

我们将 GitHub 上的存储库视为我们所有存储库的“原始”副本，在那里提交所有更改，然后在本地开发机器上运行“ [git pull ”以获取代码的最新副本。](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)

我们仍在使用 git 完善我们的部署策略，但目前的计划是有一个名为“stable”的标签，我们将在适当的时候将它拉到我们的登台和生产服务器。

对于备份，除了在不同位置克隆存储库之外，您还应该查看[git-bundle](http://www.kernel.org/pub/software/scm/git/docs/git-bundle.html)。[在此处](https://stackoverflow.com/questions/1251713/backup-of-github-repo)查看相关问题。

# wpf - WPF ListView 千位分隔符

> ID：882177
> 
> 赞同：2
> 
> 时间：2009-05-19T11:28:38.063
> 
> 标签：wpf, data-binding, string-formatting

我想以千位分隔格式显示数字。数字显示在 ListView 控件的 Column 中。我有以下 xaml 代码，但它甚至没有编译！

```
<GridViewColumn Header="Total" DisplayMemberBinding="{Binding PaidValue, StringFormat={0:0,0}}" />

```

从我的 c# 角度来看，{0:0,0} 是执行此操作的正确格式，对吗？这有什么问题？

该错误完全不相关：“未知的构建错误，'密钥不能为空'指向同一行 xaml 代码。如果尝试了相同格式的其他变体而没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T05:46:24.803

好的，我找到了一种方法来做到这一点。我需要说的是，事实上我确实安装了 SP1，所以很多博客文章都暗示 {0:c} 应该可以工作，但它不能并且最终会产生相同的编译时错误！我是这样做的：

```
 <GridViewColumn DisplayMemberBinding="{Binding Path=PaidValue, StringFormat='0,0'}" /> 

```

编译和工作没有问题。我想知道其他绑定的 StringFormat 值是否仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T12:24:36.797

```
<GridViewColumn Header="Total" 
DisplayMemberBinding="{Binding PaidValue, StringFormat={0:c}}" /> 
```

将数字格式化为本机字符串货币。

[您可以从此站点](http://www.java2s.com/Code/CSharp/Development-Class/NumericFormattingCustomFormatStringsSectionSeparator.htm)找到更多数字格式

# c++ - 从文件中读取文本

> ID：882184
> 
> 赞同：0
> 
> 时间：2009-05-19T11:29:51.010
> 
> 标签：c++, string, parsing, file-io

我想从文件中读取文本。例如：嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿嘿

我想计算每 5 个符号有多少个“E”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T11:39:27.527

一步一步来。

你需要：

1.  打开一个文件
2.  从文件中读取数据
3.  每 5 个符号检索一次
4.  如果该符号是 E，则增加一个计数器。

所以先解决第一部分，然后解决第二部分，依此类推。如果您在给定阶段有任何问题，请在此处发布一些代码，概述您希望看到的内容和您正在看到的内容，我们将为您提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T11:37:05.723

是的，我认为是作业。如果你必须问这个问题，那么你真的需要从基础开始。当你遇到更难的话题时，问其他人怎么做会让你瘫痪。对不起，这是我能给出的最好答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T11:39:31.660

因为这听起来像是家庭作业，所以它只是我的算法。

您需要将位置变量和计数变量都初始化为 0，然后开始逐字符读取（每个字符递增位置变量）。

读取字符意味着打开文件一次，然后为每次读取执行一个循环，然后在检测到文件结尾时关闭文件。

只要字符是“E”*并且*位置变量是五的倍数，就增加计数。

读取完所有字符后，输出计数。

**更新：**

根据要求，这里有一些代码可以说明我的意思。由于您没有提供任何表明您自己尝试过的迹象，因此我使用标准 C 而不是 C++ 完成了它，并且我没有添加任何评论。

但是我已经投入了足够多的调试内容，因此您可以在输出中看到我的意思（见下文）。您仍然需要做一些工作来理解它，但是，如果您发布自己的尝试，您将获得更多帮助。

请不要试图把这项工作当作你自己的。毫无疑问，您的教育工作者将能够像您一样看到此代码（因此，如果这确实是课堂作业，您*将失败）并且您应该使用 C++ 构造进行输入和输出（iostreams 而不是 stdio.h）。*

```
#include <stdio.h>

char buff0[1000];
char buff1[1000];

int main (int argc, char *argv[]) {
    FILE *fin;
    int chPos;
    int chVal;
    int count;

    fin = fopen ("qq.in", "r");
    if (fin == NULL) {
        fprintf (stderr, "Cannot open qq.in\n");
        return 1;
    } 
```

```
 *buff0 = '\0';
    *buff1 = '\0';
    count = 0;
    chVal = fgetc (fin);
    chPos = 0;
    while (chVal != EOF) {
        putchar (chVal);
        sprintf (&(buff1[strlen(buff1)]),"%c",chPos+'1');
        if ((chPos == 4) && (chVal == 'E')) {
            sprintf (&(buff0[strlen(buff0)]),"%c",'*');
            count++;
        } else {
            if (chPos == 4) {
                sprintf (&(buff0[strlen(buff0)]),"%c",'|');
            } else {
                if (chVal == 'E') {
                    sprintf (&(buff0[strlen(buff0)]),"%c",'-');
                } else {
                    sprintf (&(buff0[strlen(buff0)]),"%c",' ');
                }
            }
        }            chVal = fgetc (fin);
        chPos = (chPos + 1) % 5;
    }
    printf ("%s\n",buff0);
    printf ("%s\n",buff1);

    fclose (fin);

    printf ("There were %d occurrence(s)\n", count);

    return 0;
} 
```

这是输出：

```
HHEEHEHHEEHHHEEEHHHEEHEHHEHEEEEEEHHHHEEE
  --|-  -*   -*-   *- - |- --*--- |  --*
12345123451234512345123451234512345123451
There were 5 occurrence(s) 
```

这有一个名为的文件`qq.in`，其中包含您的输入字符串`"HHEEHEHH..."`。第二行的符号是：

*   `"-"`对于`E`不在第 5 个字符位置的情况。
*   `"|"`对于不是 . 的第 5 个字符位置`E`。
*   `"*"`对于一个`E`在第 5 个字符的位置。
*   `" "`对于其他一切。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-19T11:46:15.033

```
#!/bin/ksh
E=`echo "HHEEHEHHEEHHHEEEHHHEEHEHHEHEEEEEEHHHHEEE" | cut -c 5,10,15,20,25,30,35,40 | sed 's/[^E]//g'`
echo ${#E} 
```

这将让你学会提出一个**具体**的问题。

;-) 基思。

# testing - 如何在功能上测试在给定时间应该发生的事情？

> ID：882187
> 
> 赞同：0
> 
> 时间：2009-05-19T11:30:14.003
> 
> 标签：testing, selenium, acceptance-testing

我正在编写一个包含一种时间表的 Web 应用程序。在某个操作之后，计划会更新，当用户访问该页面时会发生一些事情。

任何想法如何为这种功能编写功能（验收）测试？

我正在使用 Selenium 编写这些端到端测试。我唯一的想法是可以通过访问 URL 来强制服务器使用给定日期`/set-fixed-time?time=...`，然后在测试访问之后`/set-real-time`。

在服务器上，我将使用自定义对象来获取当前时间，并且在访问其中一个 URL 时交换该对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T12:19:22.267

我认为它可以用于开发人员测试，但是验收测试应该在没有模拟的情况下完成（你的模拟代码中可能有错误）。如果它必须等待 3 天而不是验收测试应该等待那些树天，否则他们可以通过更改服务器时间来绕过它。我认为留下后门只是为了测试是个坏主意（一些测试人员可以手动测试它而不是忘记 /set-real-time）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-24T22:57:47.330

我同意猴子，这最好由开发人员处理。

您也可以尝试混合动力车。没有理由您的所有验收测试都必须在未更改的生产站点模拟上运行，或者只允许使用 Web 界面，或者不能以管理员身份更改内容或无法执行代码。您也不必更改整个服务器的时间，这是全球性的，可能会产生意想不到的后果。您可以改为更改用户上次更新的时间。

您可以从程序中驱动 Selenium，因此混合 Selenium 和代码测试可以使用代码设置用户的“上次更新时间是什么时候”数据，然后执行 Selenium 测试以检查结果。在它从未运行过时尝试它，就在时间用完之前，恰好在时间用完时和之后。

# design-patterns - 这里建议什么设计模式？

> ID：882192
> 
> 赞同：0
> 
> 时间：2009-05-19T11:30:49.993
> 
> 标签：design-patterns, oop

我有 2 个表，现在以 ClientOrder 和 Products 表为例。使用 Linq，我已经能够编写我想要运行的所有查询 1\. 按客户订单搜索 2\. 按客户名称搜索 3\. 按产品名称搜索 4\. 按产品 ID 搜索

我想为上述每个查询创建方法。这 ？是，这里适合什么模式？工厂模式似乎不符合要求，因为我知道我的每个对象都将使用相同的数据上下文。

用 4 个静态方法创建一个静态类是否更明智？

注意：我在编程世界和新手 5 个月

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-12-31T23:18:05.617

首先，让我们回顾一下工厂方法模式的意图：

> 定义一个用于创建对象的接口，但让子类决定要实例化哪个类。工厂方法允许类将实例化推迟到子类。

它适用于您的问题吗？您更关心如何管理查询而不是创建域对象。

恕我直言，我会避免任何涉及静态类/方法的实现替代方案：您不能从静态类继承，因此您限制了模型的可扩展性。非静态类中的静态方法也是如此：它们不能在子类中被覆盖。

我也不会将这些查询方法添加到您的域对象中。请记住，您正在使用 OOP 对现实世界进行建模，让订单搜索另一个订单是否有意义？

让我们想一想：在现实世界中，您使用订单从中获取特定信息（其日期、客户名称或涉及的产品）。当您想查找订单时，您可以去任何存放它们的地方并查找它（例如，在文件柜中）。也就是说，您不使用订单来搜索其他订单。

考虑到这一点，您需要在软件中对这种情况进行建模。您已经拥有为订单和产品建模的对象。您缺少的是一个对象，该对象对您用来存储订单和搜索订单的地方进行建模。

通常，这些类型的对象（保存或检索其他对象）称为存储库。在您的情况下，它可以命名为 ClientOrderRepository。这个对象会做什么？好吧，您已经提到过：执行您需要的四个不同的查询。让我们看看它的接口的可能定义：

```
public interface IClientOrderRepository {
    ClientOrder FindOrderWithIdMatching(int anOrderId);
    ClientOrder FindOrderWithClientNameMatching(string aClientName);
    ClientOrder FindOrderWithProductNameMatching(string aProductName);
    ClientOrder FindOrderWithProductIdMatching(string aProductId);
} 
```

如果你只需要一个类的实例来实现这个接口，你可以使用单例模式。不要依赖以后可能难以更改的实现选择（如静态方法之一）。

最后，即使您找到了解决问题的特定模式，考虑对象以及它们协作完成任务的方式也是一个很好的做法。使用现实生活中的隐喻来帮助您找到需要履行的缺失对象或责任。最后，这一切都与面向对象范式的本质有关。

有关存储库模式的更深入信息，这里有一些资源可以帮助您入门：

*   [http://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)
*   [http://blog.lowendahl.net/?p=249](http://blog.lowendahl.net/?p=249)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T13:20:28.150

我发现 Martin Fowler 的[企业应用程序架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)有助于了解人们如何构建对数据库表的访问。[此处](http://www.martinfowler.com/eaaCatalog/)列出了其中一些模式。

对于您更简单的任务，具有四个静态方法的单个类听起来非常合理。但是您应该考虑 Fowler 的表数据网关模式，其中您将对每个表的所有访问打包在其自己的静态方法类中（并使用标准命名约定）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T11:35:07.427

如果您不知道应该使用哪种设计模式，最好不要使用！在这个非常简单的情况下，我想不出任何设计模式可以提供的任何有用的补充。也许您只是想知道如何实现函数来控制这四个查询及其结果？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T12:01:44.270

我建议使用静态方法扩展类。类似于以下内容。

```
IEnumerable<Client> Client.GetByName(String Name) { }

IEnumerable<Product> Product.GetByName(String Name) { }

Product Product.GetById(Guid Id) { } 
```

我假设您使用 LINQ to SQL 或 LINQ to Entity，因此您可以简单地扩展生成的部分类。如果您返回集合或实例，并且您选择`IEnumerable`、`IQueryable`、`IList`、`List`或其他取决于您的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T11:38:09.603

我可能会选择一个简单的类（可能是一个单例），将方法作为实例方法，并将其称为数据访问层。针对所需的数据库进行实例化，并在适当的方法中只对我需要的内容进行 LINQ。

# jquery - 如何使用 Jquery 进行更新状态（ajax）？

> ID：882194
> 
> 赞同：0
> 
> 时间：2009-05-19T11:31:18.247
> 
> 标签：jquery, ajax, status

如何使用 Jquery 更新状态，比如你现在在做什么（facebook + ajax）？

我找到了一个与此非常相似的教程，但他们使用 mootools，是否有使用 Jquery 的教程？

我是 javascript 和 jquery 的新手，我需要你们的帮助和建议

编辑：

可以从这里找到 mootool 示例：

[http://nettuts.com/tutorials/php/twitter-emulation-using-mootools-12-and-php/](http://nettuts.com/tutorials/php/twitter-emulation-using-mootools-12-and-php/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T11:51:16.067

基本上你想要做的是用你的表单的内容向服务器发出一个[jQuery`POST`](http://docs.jquery.com/ajax)请求。（仔细查看示例以了解其工作原理...）将发布的数据存储在数据库中，向客户端发送响应并使用回调函数通过重新加载应加载的特定字段来更新页面更新。

我还没有看到任何教程来创建这个特定的功能，但是如果你使用 jQuery 和你选择的服务器端语言你应该能够很快地弄清楚它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T11:36:27.517

[这是一个很好的例子，用 PHP 做一些简单的 jquery-ajax](http://www.webresourcesdepot.com/dynamic-dragn-drop-with-jquery-and-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T12:00:25.020

你可能想这样做..

```
$("div").html("<span class='red'>Hello <b>Again</b></span>"); 
```

或者

```
$("p").text("<b>Some</b> new text."); 
```

结帐 [JQuery 文档](http://docs.jquery.com/Attributes/html#val)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T12:03:16.870

@Tomas 和 @Natrium 基本上已经告诉了您需要了解的内容。

既然您说您是 javascript 和 jQuery 的新手，我建议您查看[http://docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page)

有关 Ajax 特定文档，请查看[http://docs.jquery.com/Ajax](http://docs.jquery.com/Ajax)

要学习 jQuery 的基础知识（即使你不太了解 javascript），我推荐《学习 jQuery》这本书[http://www.packtpub.com/learning-jquery-1.3/book/mid/220409c024ep](http://www.packtpub.com/learning-jquery-1.3/book/mid/220409c024ep)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T17:51:58.883

如果您要完全按照 mootools 示例进行操作，则只需将 javascript 代码更改为此即可在 jQuery 中工作（基本上以相同的方式）：

```
$(function() {
    //make the ajax call to the database to save the update
    $.ajax({
        url: '<?php echo $_SERVER['PHP_SELF']; ?>',
        method: 'POST',
        beforeSend: function() {
            $('submit').attr('disabled','disabled');
        },
        complete: function(xhr,status) {
            $('submit').disabled = 0;
            $('#message').removeClass('success').removeClass('failure');
            $('#message').fadeIn(3000);
        },
        success: function(data,status) {
            //update message
            $('#message').text('Status updated!').addClass('success').fadeIn('medium');

            //store value, clear out box
            var status = $('#status').val();
            $('#status').val('');

            //add new status to the statuses container
            var element = $('<div class="status-box">');
            element.html(status + '<br /><span class="time">A moment ago</span>');
            $('#statuses').prepend(element);

            //place the cursor in the text area
            $('#status').focus();

        },
        error: function(xhr, status, error) {
            //update message
            $('#message').text('Status could not be updated.  Try again.').addClass('failure').fadeIn('medium');
        }
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-02-09T11:31:02.763

不要自我推销太多，但我写了一个关于这件事的教程。很容易做到：[http ://blog.twostepmedia.co.uk/dynamic-jquery-twitter-status/](http://blog.twostepmedia.co.uk/dynamic-jquery-twitter-status/)

# sql-server - TOP 1 在 sql 查询中是什么意思？

> ID：882195
> 
> 赞同：3
> 
> 时间：2009-05-19T11:31:21.833
> 
> 标签：sql-server

TOP 1 在 sql 查询中是什么意思？

```
SELECT TOP 1 RequestId 
FROM PublisherRequests 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T13:15:20.393

我不同意“将根据该表中的聚集键定义顺序。”

[SQL Server Books Online 非常明确](http://msdn.microsoft.com/en-us/library/ms189463.aspx)：如果查询没有 ORDER BY 子句，则行的顺序是任意的

一个证明并非总是如此的重现：[没有 ORDER BY，就没有默认的排序顺序。](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/05/20/without-order-by-there-is-no-default-sort-order.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-19T11:33:12.733

它将从`PublisherRequests`表中选择第一行。

编辑：[订单将根据该表中的聚集键定义 - 此语句不正确]。实际上，根据 Alex 的发现，并且根据 BOL，行的顺序是任意的。

参考可以在[这里](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/05/20/without-order-by-there-is-no-default-sort-order.aspx "亚历克斯的博客")找到。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-19T11:39:23.753

示例中的查询将返回`RequestID`表中的第一个`PublisherRequests`。没有子句
的结果顺序是任意的。`Order By`因此，您的示例将返回一个任意值`RequestID`（即`RequestID`任意排序的`RequestID`s 列表中的第一个）。
您可以通过定义`Order By`.
例如，要获取最后输入的 ID，您可以编写

```
Select Top 1 RequestID
From PublisherRequests
Order By RequestID Desc 
```

*更新以包含来自[@Kirtan Gor](https://stackoverflow.com/questions/882195/what-does-top-1-mean-in-an-sql-query/882202#882202)和[@AlexK的更正订单信息](https://stackoverflow.com/questions/882195/what-does-top-1-mean-in-an-sql-query/882690#882690)*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-19T11:38:59.010

TOP 可用于根据需要返回尽可能多的行或包含的总行数的百分比 - 有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms189463.aspx](http://msdn.microsoft.com/en-us/library/ms189463.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T11:33:13.810

这意味着只返回前1行，即第一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T11:40:57.807

它将查询返回的行数限制为 1。它与 MySQL 中的 Limit 1 相同。

# php - 如何在 Flash 中显示带有奇怪 URL 的 Twitter 图像？

> ID：882199
> 
> 赞同：0
> 
> 时间：2009-05-19T11:33:00.333
> 
> 标签：php, actionscript-3, url, twitter

我正在从 twitter 解析公共时间线 xml，并希望在状态旁边显示图像。

问题是一些图片网址包含奇怪的字符：

例如

```
http://s3.amazonaws.com/twitter_production/profile_images/68803670/Gryn_i_h%E4ngmattan_normal.jpg 
```

一些字符可以替换为[`urlencode()`](http://php.net/urlencode)，但我不知道如何处理亚洲文本或其他奇怪的 url。

如果没有提供有效的图像 url，我想要的只是返回默认的 twitter 个人资料 png。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T11:49:20.160

我相信您应该改用 UTF-8 编码。正确的 URL 将是： [http ://s3.amazonaws.com/twitter_production/profile_images/68803670/Gryn_i_h%C3%A4ngmattan_normal.jpg](http://s3.amazonaws.com/twitter_production/profile_images/68803670/Gryn_i_h%C3%A4ngmattan_normal.jpg)

当您从 utf-8 编码的公共时间线 xml 中读取字符串时，flash 不会自动执行此操作吗？如果您只是输出链接[http://s3.amazonaws.com/twitter_production/profile_images/68803670/Gryn_i_hängmattan_normal.jpg](http://s3.amazonaws.com/twitter_production/profile_images/68803670/Gryn_i_h%C3%A4ngmattan_normal.jpg)浏览器应该负责编码，不是吗？

编辑：看起来SO代码在url中也有非ascii字符的问题:)

# java - 将多个 jar 合并到一个 jar

> ID：882204
> 
> 赞同：13
> 
> 时间：2009-05-19T11:33:24.093
> 
> 标签：java, jar

我的应用程序需要多个 jar 才能工作。由于它是一个桌面应用程序，我不能让用户负责安装。因此，在我的构建脚本中，我将 jars 内容解压缩到我的构建目录中，删除清单文件，编译我的软件并再次 jar。一切正常，我的问题是这个过程是否有任何长期的副作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T11:38:57.810

过去，有些 JAR 的内容很奇怪（比如 DB2 驱动程序包含`com.ibm`和`com.IBM`; 在 Windows 文件系统中解压缩后，这两个包会合并）。

您需要注意的唯一问题是 META-INF 中的签名 jar 和其他文件，它们可能在多个源 JAR 中具有相同的名称。

所有这些问题的一个简单解决方案是使用[One-JAR](http://one-jar.sourceforge.net/)。首先，它允许将多个 JAR 打包成一个而无需解包。并阅读此答案：[将发布合并到一个 JAR 文件中的最简单方法](https://stackoverflow.com/questions/81260/java-easiest-way-to-merge-a-release-into-one-jar-file)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-02-23T09:08:56.673

一个更简单的解决方案 (IMO) 是使用[Maven 的程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)，这也在对另一个问题的答案之一中进行了描述，该问题与[之前的问答](https://stackoverflow.com/questions/81260/java-easiest-way-to-merge-a-release-into-one-jar-file)有关。前提是您使用 Maven（它本身就是一个推荐的工具）作为构建工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T12:52:07.177

如果您想让最终用户轻松启动具有多个 jar 依赖项的程序，您可能需要查看[Launch4j](http://launch4j.sourceforge.net/)或[Jsmooth](http://jsmooth.sourceforge.net/)（我更喜欢 Launch4j）。两者都是创建将 jar(s) 和 JRE 包装在一起的可执行文件的程序，因此对于最终用户来说，它看起来与任何其他可执行文件没有什么不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T05:36:01.713

另一个不错的选择是[ProGuard](http://proguard.sourceforge.net)，它也*可以*缩小和/或混淆代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T11:37:23.617

如果某些罐子已签名，您会因拆包/重新包装而丢失签名。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T05:42:55.027

如果您的主要目标平台是 Windows 桌面，那么您还可以考虑从应用程序的 jar 中生成 Windows 本机 exe

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T11:38:51.180

那么你正在扔掉你的第三方罐子的清单，所以这可能会给你带来问题。例如，您可能会因为丢弃“密封”属性而导致安全问题。

为什么不创建一个简单的安装程序和一个脚本来启动正确设置 CLASSPATH 的应用程序？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-07-17T07:09:47.573

One-JAR 将完成这项工作，并且有一个新版本 (0.97)，它支持 Spring 和 Guice 等框架，用户现在正在将其打包到 One-JAR 档案中。 [http://one-jar.sourceforge.net](http://one-jar.sourceforge.net)

Ference Hechler 还在 Eclipse 中使用 Eclipse 导出向导做了一些出色的工作：我们一起开发了 Eclipse 工作的 FatJar/One-JAR，我可以推荐它作为一种方法，尽管我不知道它处理得如何框架。

# documentation - 处理大量业务逻辑规则时的项目文档。如何组织它？

> ID：882207
> 
> 赞同：0
> 
> 时间：2009-05-19T11:33:58.600
> 
> 标签：documentation, communication, wiki

就业务逻辑数量和组件数量而言，我正在从事相当复杂的项目。

每个开发人员主要在“他自己的”组件上工作。我知道这不是很跨功能，但不可能知道每个组件的详细信息。

团队 sostav 不时更改。因此，我们会遇到一个人必须处理“其他人的组件”的情况。这可以在定期地下室，所以你可以在一个月后回到这个问题 - 在那个时候你可以一次又一次地向组件业务逻辑的所有者询问相同的问题，因为你可能会忘记一个月内一些微小但重要的细节之后。

这种情况有时很烦人。

我们**每天都有站立会议**，当人们讲述他已经做了什么和打算做什么时。我们有项目的**wiki FAQ**页面——我们提取了最常见的问题。

你怎么看这个问题？

你会建议我们如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T11:52:29.140

鉴于我要使用的组件性质：

1.) 指定应用程序目的、设置、要求等的框架文档。 2.) 每个组件的模块文档采用通用格式并按名称索引。

查看[http://docs.python.org](http://docs.python.org)以获得一般文档的好示例，查看[http://docs.python.org/modindex.html](http://docs.python.org/modindex.html)以获得模块/组件文档的好示例

哦，日常会议通常很糟糕，它们会占用大量时间并且会忘记答案。新人或生病的人错过了会议，必须重新听取简报。除非需要讨论/反馈，否则将所有内容写下来并保留纸质/电子邮件记录会好 100 倍。

# c# - 数据绑定动态数据

> ID：882214
> 
> 赞同：28
> 
> 时间：2009-05-19T11:35:35.443
> 
> 标签：c#, winforms, data-binding

我有一组需要绑定到 GridControl 的“动态数据”。到目前为止，我一直在使用属于 System.Data 命名空间的标准 DataTable 类。这工作得很好，但我被告知我不能使用它，因为它对于客户端和服务器之间的网络序列化来说太重了。

所以我认为我可以通过简单地使用 List 表示行集合的类型来轻松复制 DataTable 类的“缩减”版本，`List<Dictionary<string, object>>`每个 Dictionary 表示一行，其中列名和值作为 KeyValuePair 类型。我可以设置 Grid 以使列 DataField 属性与 Dictionary 中的键匹配（就像我为 DataTable 的列名所做的那样。

然而做完之后

```
gridControl.DataSource = table;
gridControl.RefreshDataSource(); 
```

网格没有数据...

我想我需要实施`IEnumerator`- 对此的任何帮助将不胜感激！

示例调用代码如下所示：

```
var table = new List<Dictionary<string,object>>();

var row = new Dictionary<string, object>
{
    {"Field1", "Data1"},
    {"Field2", "Data2"},
    {"Field3", "Data3"}
};

table.Add(row);

gridControl1.DataSource = table;
gridControl1.RefreshDataSource(); 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-05-19T11:43:46.957

欢迎来到 System.ComponentModel 的精彩世界。.NET 的这个黑暗角落非常强大，但也非常复杂。

一句警告；除非你有足够的时间来做这件事——你最好以任何你喜欢的机制简单地序列化它，但`DataTable`在每一端将它重新水化为 a ......接下来的事情不适合胆小的人;-p

首先 - 数据绑定（对于表格）适用于*列表*（`IList`/ `IListSource`） - 所以`List<T>`应该没问题（编辑：我误读了一些东西）。但它不会理解你的字典实际上是列......

要让一个类型假装有列，您需要使用自定义`PropertyDescriptor`实现。有几种方法可以做到这一点，这取决于列定义是否始终相同（但在运行时确定，即可能来自配置），或者它是否随使用而变化（例如每个`DataTable`实例如何具有不同的列）。

对于“每个实例”的自定义，您需要查看`ITypedList`- 这个野兽（*除了*实现`IList`）具有呈现表格数据属性的有趣任务......但它并不孤单：

对于“每种类型”的定制，您可以查看`TypeDescriptionProvider`- 这可以建议类的动态属性......

...或者您可以实现`ICustomTypeDescriptor`- 但这仅在**非常**偶然的情况下使用（用于列表）（对象索引器（`public object this[int index] {get;}`“）和绑定点列表中的至少一行）。（此接口更有用绑定离散对象时 - 即不是列表）。

实施`ITypedList`和提供`PropertyDescriptor`模型是一项艰巨的工作......因此只是偶尔进行。我对它相当熟悉，但我不会只是为了笑……

* * *

这是一个**非常非常简化**的实现（所有列都是字符串；没有通知（通过描述符），没有验证（`IDataErrorInfo`），没有转换（`TypeConverter`），没有额外的列表支持（`IBindingList`/ `IBindingListView`），没有抽象（`IListSource`），没有其他其他元数据/属性， ETC）：

```
using System.ComponentModel;
using System.Collections.Generic;
using System;
using System.Windows.Forms;

static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        PropertyBagList list = new PropertyBagList();
        list.Columns.Add("Foo");
        list.Columns.Add("Bar");
        list.Add("abc", "def");
        list.Add("ghi", "jkl");
        list.Add("mno", "pqr");

        Application.Run(new Form {
            Controls = {
                new DataGridView {
                    Dock = DockStyle.Fill,
                    DataSource = list
                }
            }
        });
    }
}
class PropertyBagList : List<PropertyBag>, ITypedList
{
    public PropertyBag Add(params string[] args)
    {
        if (args == null) throw new ArgumentNullException("args");
        if (args.Length != Columns.Count) throw new ArgumentException("args");
        PropertyBag bag = new PropertyBag();
        for (int i = 0; i < args.Length; i++)
        {
            bag[Columns[i]] = args[i];
        }
        Add(bag);
        return bag;
    }
    public PropertyBagList() { Columns = new List<string>(); }
    public List<string> Columns { get; private set; }

    PropertyDescriptorCollection ITypedList.GetItemProperties(PropertyDescriptor[] listAccessors)
    {
        if(listAccessors == null || listAccessors.Length == 0)
        {
            PropertyDescriptor[] props = new PropertyDescriptor[Columns.Count];
            for(int i = 0 ; i < props.Length ; i++)
            {
                props[i] = new PropertyBagPropertyDescriptor(Columns[i]);
            }
            return new PropertyDescriptorCollection(props, true);            
        }
        throw new NotImplementedException("Relations not implemented");
    }

    string ITypedList.GetListName(PropertyDescriptor[] listAccessors)
    {
        return "Foo";
    }
}
class PropertyBagPropertyDescriptor : PropertyDescriptor
{
    public PropertyBagPropertyDescriptor(string name) : base(name, null) { }
    public override object GetValue(object component)
    {
        return ((PropertyBag)component)[Name];
    }
    public override void SetValue(object component, object value)
    {
        ((PropertyBag)component)[Name] = (string)value;
    }
    public override void ResetValue(object component)
    {
        ((PropertyBag)component)[Name] = null;
    }
    public override bool CanResetValue(object component)
    {
        return true;
    }
    public override bool ShouldSerializeValue(object component)
    {
        return ((PropertyBag)component)[Name] != null;
    }
    public override Type PropertyType
    {
        get { return typeof(string); }
    }
    public override bool IsReadOnly
    {
        get { return false; }
    }
    public override Type ComponentType
    {
        get { return typeof(PropertyBag); }
    }
}
class PropertyBag
{
    private readonly Dictionary<string, string> values
        = new Dictionary<string, string>();
    public string this[string key]
    {
        get
        {
            string value;
            values.TryGetValue(key, out value);
            return value;
        }
        set
        {
            if (value == null) values.Remove(key);
            else values[key] = value;
        }
    }
} 
```

# python - 在 Ajax 调用之后使用 Django 模板呈现 JSON 对象

> ID：882215
> 
> 赞同：67
> 
> 时间：2009-05-19T11:36:21.480
> 
> 标签：python, ajax, django, json, templates

我一直试图了解在[Django中执行](http://en.wikipedia.org/wiki/Django_%28web_framework%29)[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)的最佳方法是什么。通过阅读这里和那里的东西，我收集到常见的过程是：

1.  [使用一些JavaScript](http://en.wikipedia.org/wiki/JavaScript)库（例如，[jQuery](http://en.wikipedia.org/wiki/JQuery) ）制定您的 Ajax 调用，在 Django 中设置一个 URL 模式来捕获调用并将其传递给视图函数

2.  在[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)视图函数中检索您感兴趣的对象并将它们以 JSON 格式或类似格式发送回客户端（通过使用内置的序列化程序模块或[simplejson](http://code.google.com/p/simplejson/)）

3.  在 JavaScript 中定义一个回调函数，接收 JSON 数据并解析它们，以便创建需要显示的任何 HTML。最后，JavaScript 脚本将 HTML 放在它应该保留的任何位置。

现在，我仍然不明白*Django 模板与这一切有什么关系？*显然，我们根本没有利用模板的力量。理想情况下，我认为传回 JSON 对象和模板名称会很好，这样可以迭代数据并创建 HTML 块。但也许我在这里完全错了......

我发现的唯一资源是[这个片段（769）](http://www.djangosnippets.org/snippets/769/)，但我还没有尝试过。显然，在这种情况下将发生的事情是所有生成的 HTML 都是在服务器端创建的，然后传递给客户端。JavaScript 回调函数只需要在正确的位置显示它。

这会导致性能问题吗？如果没有，即使不使用上面的代码片段，为什么不直接在后端使用 Python 而不是前端格式化 HTML？

非常感谢！

**更新：请使用[代码片段 942](http://www.djangosnippets.org/snippets/942/)，因为它是上述代码的增强版本！**我发现继承支持这样工作得更好..

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-19T18:29:24.517

嘿，谢谢 vikingosegundo！

我也喜欢使用装饰器:-)。但与此同时，我一直在遵循我上面提到的片段建议的方法。只有一件事，使用[片段 n。942](http://www.djangosnippets.org/snippets/942/)因为它是原始版本的改进版本。以下是它的工作原理：

想象一下，您有一个包含可以重用的有用块的任何大小的模板（例如，'subtemplate.html'）：

```
 ........
    <div id="results">          
        {% block results %}
            {% for el in items %}
                   <li>{{el|capfirst}}</li>
            {% endfor %}
        {% endblock %}      
    </div><br />
     ........ 
```

通过在您的视图文件中导入上面的代码片段，您可以轻松地引用模板中的任何块。一个很酷的功能是考虑到模板之间的继承关系，所以如果你引用一个包含另一个块的块等等，一切都应该正常工作。因此，ajax 视图如下所示：

```
from django.template import loader
# downloaded from djangosnippets.com[942]
from my_project.snippets.template import render_block_to_string

def ajax_view(request):
    # some random context
    context = Context({'items': range(100)})
    # passing the template_name + block_name + context
    return_str = render_block_to_string('standard/subtemplate.html', 'results', context)
    return HttpResponse(return_str) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-19T16:19:13.297

下面是我如何使用相同的模板进行传统渲染和 Ajax 响应渲染。

模板：

```
<div  id="sortable">

{% include "admin/app/model/subtemplate.html" %}
</div> 
```

包含的模板（又名：子模板）：

```
<div id="results_listing">
{% if results %}
    {% for c in results %}
        .....
    {% endfor %}
{% else %} 
```

Ajax 视图：

```
@login_required
@render_to('admin/app/model/subtemplate.html')#annoying-decorator
def ajax_view(request):
    .....

    return { 
        "results":Model.objects.all(),
    } 
```

当然你可以使用 render_to_response。但我喜欢那些烦人的装饰器：D

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-19T13:06:40.207

没有理由不能使用 Ajax 返回呈现的 HTML 部分，并将其插入到现有页面中所需的位置。显然，如果你愿意，你可以使用 Django 的模板来呈现这个 HTML。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-19T11:43:22.510

当您使用 Ajax 时，我认为您对模板没有任何用处。模板在那里，您可以轻松地在服务器端生成动态 HTML，因此它在 HTML 中提供了很少的编程钩子。

在 Ajax 的情况下，您传递的是 JSON 数据，您可以在 Python 中根据需要对其进行格式化。并且 HTML/文档元素将在客户端使用 JSON 由一些 JavaScript 库生成，例如客户端的 jQuery。

也许如果你有一个从服务器端 HTML 替换一些内部 HTML 的非常具体的情况，那么也许你可以使用模板，但在那种情况下你为什么需要 JSON？您可以通过 Ajax 查询 HTML 页面并更改内部或外部或任何 HTML。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-19T11:47:12.240

模板用于*演示*。响应格式 X（JSON、[JSONP](http://en.wikipedia.org/wiki/JSON#JSONP)、XML、[YAML](http://en.wikipedia.org/wiki/YAML)、*ml 等）的数据不是演示，因此您不需要模板。只需将您的数据序列化为 X 格式并在 HttpResponse 中返回即可。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-09-09T07:36:48.037

虽然模板确实只是用于演示目的，但无论您是在服务器端还是客户端执行它都无关紧要。这一切都归结为将执行操作的控制逻辑与仅负责创建标记的视图逻辑分开。如果您的 javascript 控制逻辑必须处理您如何渲染或显示 HTML，那么您可能做错了，但是如果您将该渲染逻辑隔离到另一个对象或函数，并且只是将渲染所需的数据传递给它，那你应该没问题；它反映了我们如何在服务器端分离控制器、模型和视图。

看看github项目：http: [//github.com/comolongo/Yz-Javascript-Django-Template-Compiler](http://github.com/comolongo/Yz-Javascript-Django-Template-Compiler)

它将 django 模板编译为优化的 javascript 函数，这些函数将使用您传递的数据生成您的演示文稿 html。编译后的函数是纯 javascript，因此不依赖其他库。由于模板是在运行时编译而不是解析的，字符串和变量都已经放入只需要连接的 javascript 字符串中，因此与需要您进行 dom 操作或脚本解析的技术相比，您可以获得*巨大*的速度提升得到最终的演示文稿。现在只有基本的标签和过滤器，但对于大多数事情来说应该足够了，随着人们开始对它们提出请求或开始为项目做出贡献，将会添加更多标签。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-03-03T02:30:34.050

您可以使用`jquery.load()`或类似的方法，在服务器上生成 HTML 并使用 JavaScript 将其加载到 DOM 中。我想有人称它为*AJAH*。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-06-18T06:15:13.823

不幸的是，Django 模板被设计为仅在服务器端执行。[至少有一个项目可以使用 Javascript 渲染](http://ajaxian.com/archives/django-template-language-in-javascript)Django模板，但我没有使用它，所以我不知道它有多快、支持得好还是最新。除此之外，您必须要么在服务器上使用 Django 模板，要么在客户端生成动态元素而不使用模板。

# firebird - Firebird 需要手动重新索引吗？

> ID：882223
> 
> 赞同：14
> 
> 时间：2009-05-19T11:38:10.307
> 
> 标签：firebird

我同时使用 Firebird Embedded 和 Firebird Server，有时我需要使用如下过程重新索引表：

```
CREATE PROCEDURE MAINTENANCE_SELECTIVITY 
ASDECLARE VARIABLE S VARCHAR(200);
BEGIN
FOR select RDB$INDEX_NAME FROM RDB$INDICES INTO :S DO
BEGIN
S = 'SET statistics INDEX ' || s || ';';
EXECUTE STATEMENT :s;
END
SUSPEND;
END 
```

我想这使用嵌入式是正常的，但真的需要使用服务器吗？有没有办法将服务器配置为在需要时自动执行或定期执行？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-19T11:51:01.403

首先，让我指出我不是 Firebird 专家，所以我根据 SQL Server 的工作原理来回答。

在这种情况下，答案是肯定的，也不是。

索引当然会在 SQL Server 上更新，从某种意义上说，如果您插入新行，该表的所有索引都将包含该行，因此会找到该行。因此，基本上，您不需要为该部分工作重新索引表。那是“不”的部分。

然而，问题不在于索引，而在于统计数据。您是说您需要重新索引表，但随后您显示了操纵统计数据的代码，这就是我要回答的原因。

简短的回答是，随着时间的推移，统计数据会慢慢失控。它们可能不会恶化到无法使用的程度，但是当您重新创建/重新计算它们时，它们会从它们所处的完美水平下降。那是“是”的部分。

陈旧统计信息的主要问题是，如果索引中键的分布发生剧烈变化，则统计信息可能不会立即获取，因此查询优化器将根据旧的、陈旧的统计数据选择错误的索引它手头上有。

例如，假设您的一个索引的统计数据表明键在值空间的一端聚集在一起（例如，具有大量 0 和 1 的 int-column）。然后，您插入大量行，这些行的值使该索引包含分布在整个范围内的值。

如果您现在执行一个查询，该查询使用来自另一个表的连接，在一个具有低选择性（也有很多 0 和 1）的列上针对您的这个索引的表，查询优化器可能会推断这个索引是好的，因为它将获取将同时使用的许多行（它们在同一个数据页上）。

但是，由于数据发生了变化，它会跳过索引来查找相关的部分，因此毕竟不是那么好。

重新计算统计信息后，查询优化器可能会发现该索引对于该查询来说是次优的，并选择另一个更适合的索引。

基本上，如果您的数据不断变化，您需要定期重新计算统计数据。如果您的数据很少更改，您可能不需要经常这样做，但我仍然会添加一个定期执行此操作的维护工作。

至于是否可以请火鸟自己做，我又如履薄冰，但我怀疑有。在 SQL Server 中，您可以按计划设置执行此操作的维护作业，并且至少您应该能够从 Windows 计划程序启动批处理文件来执行类似的操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-19T11:52:25.007

这不会重新索引，它会重新计算索引的权重，优化器使用这些权重来选择最佳索引。除非索引大小发生很大变化，否则您不需要这样做。如果在添加数据之前创建索引，则需要重新计算。

Embedded 和 Server 除了流程模型外，应该具有完全相同的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-09T22:00:34.413

我想为更新的火鸟更新这个答案。这是更新的 dsql。

```
SET TERM ^ ;
CREATE OR ALTER PROCEDURE NEW_PROCEDURE 
AS
DECLARE VARIABLE S VARCHAR(300);
begin
  FOR select  'SET statistics INDEX ' || RDB$INDEX_NAME || ';' 
  FROM RDB$INDICES 
  WHERE RDB$INDEX_NAME <> 'PRIMARY' INTO :S 
  DO BEGIN
     EXECUTE STATEMENT :s;
  END
end^
SET TERM ; ^

GRANT EXECUTE ON PROCEDURE NEW_PROCEDURE TO SYSDBA; 
```

# delphi - 如何使用 PUCHAR 调用 API？

> ID：882230
> 
> 赞同：0
> 
> 时间：2009-05-19T11:39:08.760
> 
> 标签：delphi, api

我正在尝试在 Delphi 下使用 API。这是API文档

```
OKERR ENTRY SCardCLMifareStdAuthent 
    (IN SCARDHANDLE ulHandleCard,IN ULONG ulMifareBlockNr,
    IN UCHAR ucMifareAuthMode,IN UCHAR ucMifareAccessType,IN UCHAR ucMifareKeyNr,
    IN PUCHAR pucMifareKey,IN ULONG ulMifareKeyLen); 
```

而 pucMifareKey: `A pointer to the six byte Mifare key`。到目前为止我一直在尝试的代码；

```
function Auth():Integer;
type
  TSCardCLMifareStdAuthent = function(SCARDHANDLE: cardinal; ulMifareBlockNr: ULONG;
   ucMifareAuthMode, ucMifareAccessType, ucMifareKeyNr: byte; pucMifareKey: puchar;
   ulMifareKeyLen: cardinal):LONG;
var
  SCardCLMifareStdAuthent: TSCardCLMifareStdAuthent;
  hDLL: Integer;
  CardHandle: cardinal;
  i: integer;
  Key: array of UCHAR;
begin
  Result:=1;
  //CardHandle is defined here
  SetLength(Key, 6);
  for i := low(key) to high(key) do
    Key[i] := $FF;
  hDLL := LoadLibrary('scardsyn.dll');
  @SCardCLMifareStdAuthent := GetProcAddress(hDLL, 'SCardCLMifareStdAuthent');
  if @SCardCLMifareStdAuthent <> nil then
    Result:=SCardCLMifareStdAuthent(CardHandle, $00, 96, 0, 0, ^Key, 6);
  FreeLibrary(hDLL);
end; 
```

我得到的错误是`Incompatible types: 'Byte' and 'Char'`在`Result:=SCardCL....`到期 ^Key 指针的行。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T12:05:12.157

```
type
  TSCardCLMifareStdAuthent = function(SCARDHANDLE: cardinal; ulMifareBlockNr: ULONG;
    ucMifareAuthMode, ucMifareAccessType, ucMifareKeyNr: byte; pucMifareKey: puchar;
    ulMifareKeyLen: cardinal):LONG; 
```

我认为你应该用'UCHAR'替换'byte'：

```
ucMifareAuthMode, ucMifareAccessType, ucMifareKeyNr: byte; 
```

将“字节”视为“字符”是一种不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T11:51:21.870

您不会碰巧在 Delphi 2009 中吗？如果是这样，“char”被定义为 2 个字节。改用“AnsiChar”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T12:22:13.900

试试这个：

1.  为 UCHAR 数组引入新类型。
2.  引入新的指针类型的局部变量。
3.  将此变量设置为指向您的 Key 数组的指针
4.  在函数调用中使用这个指针

    ```
    type 
      TArrayOfUchar = array of UCHAR;

    var 
      ...
      Key  : TArrayOfUchar;
      PKey : ^TArrayOfUchar; 
    begin
      ...
      PKey = @Key;
      if @SCardCLMifareStdAuthent <> nil then
        Result:=SCardCLMifareStdAuthent(CardHandle, $00, 96, 0, 0, PKey, 6); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T12:28:24.667

我不知道有问题的 DLL，但对于 2009 年之前的 Delphi，我会执行以下操作：

```
function Auth: integer;
type
  TSCardCLMifareStdAuthent = function(SCARDHANDLE: cardinal;
    ulMifareBlockNr: ULONG; ucMifareAuthMode, ucMifareAccessType,
    ucMifareKeyNr: byte; pucMifareKey: PAnsiChar;
    ulMifareKeyLen: Cardinal): longint;
var
  SCardCLMifareStdAuthent: TSCardCLMifareStdAuthent;
  hDLL: Integer;
  CardHandle: Cardinal;
  Key: string;
begin
  Result := 1;
  //CardHandle is defined here...
  Key := StringOfChar(Chr($FF), 6);
  hDLL := LoadLibrary('scardsyn.dll');
  if hDLL <> 0 then begin
    @SCardCLMifareStdAuthent := GetProcAddress(hDLL, 'SCardCLMifareStdAuthent');
    if @SCardCLMifareStdAuthent <> nil then begin
      Result := SCardCLMifareStdAuthent(CardHandle, $00, 96, 0, 0,
        PChar(Key), Length(Key));
    end;
    FreeLibrary(hDLL);
  end;
end; 
```

您得到的访问冲突可能来自未以 0 结尾的 C 字符串。使用字符串并将其转换为 PChar 会使事情变得更容易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T12:51:10.567

您说密钥是一个 6 字节 (uchar) 数组。您正在声明要传递的动态数组，为什么不只声明一个数组？

```
var
  {...}
  MyKey: array[0..5] of UCHAR;
begin
  {...}
  Result:=SCardCLMifareStdAuthent(CardHandle, $00, 96, 0, 0, @MyKey, 6); 
```

# apache-flex - 弹性拖放

> ID：882235
> 
> 赞同：0
> 
> 时间：2009-05-19T11:39:34.250
> 
> 标签：apache-flex, drag-and-drop, air, flexbuilder

我正在尝试进行弹性拖放。它与第一个示例非常相似。[http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_7.html](http://livedocs.adobe.com/flex/3/html/help.html?content=dragdrop_7.html)

问题是 event.currentTarget.mouseX,mouseY 显示的是我放下鼠标的位置，而不是我完成拖动的位置。

我只是想知道为什么会这样？如果有一个简短的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T00:58:33.413

值得注意的是，Flex-on-AIR 和 Flex-in-Browser 应用程序具有不同的 DragManager 实现，并且这两种环境之间的行为并不完全一致。

# c# - nHibernate：在创建子对象时保存新的父对象

> ID：882239
> 
> 赞同：2
> 
> 时间：2009-05-19T11:40:35.450
> 
> 标签：c#, nhibernate, nhibernate-mapping, entity-relationship

我正在尝试保存具有多对一属性映射的记录。我尝试在此处分配一个新创建的父对象（或使用现有的，但效果很好），但是当它尝试将父对象的 ID 添加到子表时出现错误。说它不能将 NULL 添加到表中，这是真的，但我认为 nHibernate 足够聪明，可以先保存父对象，即使我正在添加子对象。

映射：

孩子：

```
 <many-to-one name="parent" class="ParentClass" column="parentID" cascade="all"/> 
```

家长：

```
<bag name="DataList" table="ChildTable" lazy="false" inverse="true" cascade="all-delete-orphan">
      <key column="parentID" />
      <one-to-many class="ChildClass" />
    </bag> 
```

基本上，这是 nHibernate 可以做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:54:11.257

我看不到你的父映射，但我敢打赌，如果你有 inverse = true 并且在那里为一组子对象打开了级联，并且你允许在你的子对象的 parentID 列中使用空值，当父母四处走动时保存它会正确更新子对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-11T09:17:52.077

这种行为可能是由于您的主键被“分配”而不是由 Nhibernate 生成的。

# objective-c - 高效访问众多 Cocoa 控件

> ID：882244
> 
> 赞同：1
> 
> 时间：2009-05-19T11:42:52.793
> 
> 标签：objective-c, cocoa, user-interface

我有一个包含大量控件的界面，请参见下图。

[接口 http://www.richardstelling.com/hosted/cocoainterface.png](http://www.richardstelling.com/hosted/cocoainterface.png)

访问这些的最佳方法是什么，`IBOutlets`在我的`AppController`课堂上创建 288 并将它们全部链接起来似乎效率低下。

我查看了表格，但它们似乎过于简单。

这是一个概念验证，不会发货，所以我对任何想法持开放态度。需要注意的是，我必须使用 Objective-C，因为最终产品将使用 Objective-C/Cocoa 编写。

注意：

1.  界面是静态的
2.  较小的盒装将容纳整数 (0-255)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T11:55:21.537

你应该看看[NSMatrix](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMatrix_Class/Reference/Reference.html)。这正是它旨在解决的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T12:31:47.343

[NSTableView](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html)看起来像您需要的 UI。视觉渲染会有些不同，但看起来更像“Mac”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T12:28:23.997

要么`NSMatrix`，正如 Rob 所建议的那样，要么重新考虑 UI，这样你就可以减少对它的控制 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T05:28:44.160

您可以以编程方式构建整个界面，只需循环几行代码：

```
const int numRows = 11;
const int rowWidth = 400;
const int rowHeight = 20;
const int itemSpacing = 5;
const int nameFieldWidth = 120;
const int smallFieldWidth = 30;

NSMutableArray * rowList = [[NSMutableArray alloc] initWithCapacity:numRows];

int rowIndex;
NSRect rowFrame = [controlView bounds];
rowFrame.origin.y = rowFrame.size.height - rowHeight;
rowFrame.size.height = rowHeight;
NSRect itemRect
for (rowIndex = 0; rowIndex < 11; rowIndex++)
{
    // create a new controller for the current row
    MyRowController * rowController = [[MyRowController alloc] init];
    [rowList addObject:rowController];
    [rowController release];

    // create and link the checkbox
    itemRect = rowFrame;
    itemRect.size.width = 20;
    NSButton * checkBox = [[NSButton alloc] initWithFrame:itemRect];
    [controlView addSubview:checkBox];
    [rowController setCheckBox:checkBox];
    [checkBox release];

    // create and link the name field
    itemRect.origin.x += itemRect.size.width + itemSpacing;
    itemRect.size.width = nameFieldWidth;
    NSTextField * nameField = [[NSTextField alloc] initWithFrame:itemRect];
    [controlView addSubview:nameField];
    [rowController setNameField:nameField];
    [nameField release];

    // create and link the smaller fields
    itemRect.origin.x += itemRect.size.width + itemSpacing;
    itemRect.size.width = smallFieldWidth;
    NSTextField * smallField_1 = [[NSTextField alloc] initWithFrame:itemRect];
    [controlView addSubview:smallField_1];
    [rowController setSmallField_1:smallField_1];
    [smallField_1 release];

    //.. continue for each item in a row ..

    // increment the main rectangle for the next loop
    rowFrame.origin.y -= (rowFrame.size.height + itemSpacing);
} 
```

# c++ - 在 C++ 中打开常量是否合法？

> ID：882249
> 
> 赞同：4
> 
> 时间：2009-05-19T11:46:04.957
> 
> 标签：c++, switch-statement

我刚刚意识到我引入的一个错误，令我惊讶的是它编译了，打开常量是否合法？

Visual Studio 8 和[Comeau](http://www.comeaucomputing.com/tryitout/)都接受它（没有警告）。

```
switch(42) { // simplified version, this wasn't a literal in real life
    case 1:
        std::cout << "This is of course, imposible" << std::endl;  
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-19T11:52:54.927

开启一个常数是有道理的，这并非不可能。考虑：

```
void f( const int x ) {
   switch( x ) {   
   ...
   }
} 
```

然而，打开一个字面常量几乎没有意义。但这是合法的。

**编辑：**考虑一下，在某些情况下打开文字非常有意义：

```
int main() {
    switch( CONFIG ) {
           ...
    }
} 
```

程序编译的地方：

```
g++ -DCONFIG=42 foo.cpp 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-19T11:49:36.557

并非所有对编译器有意义的东西都是有意义的！

以下内容也将编译但没有意义：

```
if (false)
{
   std::cout << "This is of course, imposible" << std::endl;
} 
```

作为开发人员，我们有责任发现这些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T12:15:18.033

这是合法的一个很好的理由是编译器很可能能够在编译时解析该值，具体取决于您所处的开发阶段。

例如，你可能会使用这样的东西来调试东西：

```
int glyphIndex;
...
#if CHECK_INVALID_GLYPH
glyphIndex = -1;
#endif

switch (glyphIndex)
    ... 
```

编译器肯定知道 glyphIndex 在这里是 -1，所以它和常量一样好。或者，您可以这样编码：

```
#if CHECK_INVALID_GLYPH
const int glyphIndex = -1;
#else
int glyphIndex = GetGlyph();
#endif 
```

你不会真的想改变你的 switch 语句的主体，这样你就可以做一些小的改变，并且编译器完全有能力使代码合理化，以消除无论如何永远不会执行的部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T11:48:23.267

是的，这是合法的。​​​​​​​​​​​​​​​​​​​​​​

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T11:48:38.570

是的，打开任何整数表达式都是完全合法的。它与对函数返回的整数值进行 ing 相同`switch`- 一种经常使用的构造。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-19T11:50:09.050

是的，但你为什么想要（除非调试）是另一回事。

它类似于`if (0)`or `while (true)`。

# linux - 在 Linux 上使用静态链接的应用程序有什么缺点吗？

> ID：882252
> 
> 赞同：2
> 
> 时间：2009-05-19T11:46:36.123
> 
> 标签：linux, dynamic, static, linker

我在这里看到了关于这个主题的几个讨论，但想问一下我的具体情况：

如果我有一些我的应用程序正在使用的第 3 部分库，并且我想将它们链接在一起以便为自己省去 LD_LIBRARY 等的麻烦，那么它在 Linux 上是否有任何缺点，除了更大的文件大小？

另外，是否可以只静态链接一些库，而其他（标准 Linux 库）动态链接？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T22:19:38.483

确实可以动态链接到某些库并静态链接到其他库。

听起来您真正想要做的是动态链接到系统库，并静态链接到用户可能没有安装的非标准库（或者不同的用户可能有不同的安装）。

这是完全合理的。

静态链接到系统库，尤其是 libc，通常不是一个好主意。

静态链接不随操作系统提供且不会随应用程序分发的库通常是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T11:59:06.647

有一些 libc - 那些使用 nsswitch - 需要动态加载库。如果您想生成完全静态的二进制文件，这可能会导致问题。

将您的 3rd 方库静态链接到您的应用程序应该完全没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:40:55.147

静态链接不仅会影响库的文件大小，还会影响应用程序的内存占用和启动时间。无论有多少程序使用动态链接库，它们都会被加载一次。每个使用静态链接库的程序都必须加载一次（因为它们现在是该程序的一部分）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T11:50:29.487

静态链接的二进制文件将比使用共享库时更大，但我发现如果我控制所有涉及的库的分布，则缺点超过了库路径的麻烦。如果您依赖于特定的发行版共享库，那么您别无选择，只能使用动态链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T11:55:26.683

要回答您的第二个问题，是的，可以将动态库和静态库链接到同一个应用程序。请注意避免库间依赖关系，这样您就不会遇到库顺序问题。您应该能够以任意顺序列出库。在我工作的地方，我们更喜欢按字母顺序列出它们。

**编辑**：要链接静态库，请使用标志 -lfoo。要将目录添加到库搜索路径，请使用 -L/path/to/libfoo。

**编辑**：您不必链接动态库。您的程序可以使用编译器提供的函数在运行时打开动态库，或者您可以在编译时链接它，编译器将解析符号但不将它们包含在二进制文件中。请参阅下面的 pjc50 评论。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T12:00:42.493

我看到的主要缺点是您的应用程序丢失了可能应用于共享库的任何自动错误修复。另一方面，您不会遇到新的错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T12:23:37.080

静态链接会使您的二进制文件变得庞大，但您不需要在目标运行时环境中拥有该库的共享版本。在开发嵌入式应用程序时尤其如此。

# javascript - 如何在不使用的情况下制作带有闪烁光标和可编辑文本的 div?

> ID：882256
> 
> 赞同：11
> 
> 时间：2009-05-19T11:48:01.877
> 
> 标签：javascript, css, html, input

我需要制作一个 div 层，这样当你点击它时，你的光标会在那里闪烁，你可以像插入/删除文本一样插入/删除文本`<input type="text">`，除了我不想使用它，因为它有点太受限于我的情况.

我绝对可以使用 JavaScript。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-19T11:52:52.540

DIV 元素具有（以及其他元素）`contentEditable`属性，您可以在 Javascript 中将其设置为 true。

```
getElementById('YourDiv').contentEditable = true; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T11:58:48.237

`contentEditable`您可以通过将 div 的属性/属性设置为 来使 div 可编辑`true`。但是，对于任何比非常基本的编辑更强大或更灵活的东西，您可能需要查看现有的解决方案，例如：

*   [TinyMCE](http://tinymce.moxiecode.com/)
*   [凯文·罗斯的 RTE](http://kevinroth.com/rte/)
*   [YUI 编辑器](http://developer.yahoo.com/yui/editor/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T11:52:45.640

Jquery 可以这样使用：

```
$.('#yourDiv').click(function() {
    $(this).attr('contenteditable', 'true');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T11:52:56.877

我建议您使用 textarea，如果这还不够，请使用诸如 tinyMCE 或 FCKeditor 之类的所见即所得编辑器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T05:10:46.573

**contenteditable**属性可用于此目的。以下代码行已在 IE7 和 Firefox 3.0.10 中进行了测试。一方面，我注意到这个属性应该只用小写；否则它将无法在 Firefox 中运行。

```
<div id="Div_ID" contenteditable="true" tabindex="0">
   Enter text here
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T05:36:26.660

据我了解您的问题，您可以通过添加`textarea`到您的`div`. 让这个`textarea`autosize 占据整个`div`区域非常简单，看起来像这样`div`。

至于`contentEditable`，我见过一些浏览器，支持`div`-element 的此功能，但不支持。无论如何，你可以`iframe`在你的 div 中使用。它的`document`-element 可以有`contentEditable`.

# msbuild - 是否有编写自定义 NAnt、Ant 或 MSBuild 任务的最佳实践？

> ID：882262
> 
> 赞同：3
> 
> 时间：2009-05-19T11:49:28.817
> 
> 标签：msbuild, ant, nant

我正在为 NAnt 编写自定义任务。我一直基于我在 Internet 上找到的一些示例以及查看 NAnt 和 Ant 的其他一些任务的来源来编写代码。

话虽如此，对于为 NAnt、Ant 或 MSBuild 等构建管理器编写好的任务，是否有任何指南或最佳实践？我正在寻找这样的异常处理和模块化（即，如果我的任务对文件结构做了一些事情，我应该删除并重新创建我的任务的输出文件/目录或以某种方式备份它，等等）。

**编辑：**我正在寻找有关自定义任务创建的指南。如果我想为 NUnit 或 Selenium 创建自己的任务或编译 F#（我知道它们已经存在，但只是说这些任务不在大多数构建管理器的原始核心中），编写自己的任务有哪些最佳实践. 我对构建文件没有任何问题。只是查看编写新编译任务的指南。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T18:02:23.110

对于 MSBuild，我写了 2 篇可能对您有所帮助的文章。

[MSBuild：创建可靠构建的最佳实践，第 1 部分](http://msdn.microsoft.com/en-us/magazine/dd419659.aspx)

[MSBuild：创建可靠构建的最佳实践，第 2 部分](http://msdn.microsoft.com/en-us/magazine/dd483291.aspx)

赛义德·易卜拉欣·哈希米

我的书：[Microsoft Build Engine 内部：使用 MSBuild 和 Team Foundation Build](https://rads.stackoverflow.com/amzn/click/com/0735626286)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:05:38.300

基本上你可以拆分文件并将它们作为参考包含在文件中，这样你就可以更好地管理它们。

# html - 将 SVG 嵌入 HTML（特定于 Opera）

> ID：882272
> 
> 赞同：4
> 
> 时间：2009-05-19T11:51:16.800
> 
> 标签：html, svg, embed, opera

我想将 SVG 图像嵌入到 Opera 的 UserJS 脚本中。问题是如何在加载的页面上显示此图像？

我使用 显示 PNG 图像`<img src='data://image/png;base64,...'>`，但未显示以这种方式使用 SVG 图像。使用外部 SVG 文件是可以的，但不是 'data://image/svg+xml,...'。

我不能将 SVG 代码直接嵌入 HTML，因为不是每个页面都是 XHTML。我可以使用`<object type='image/svg+xml' data='data://image/svg+xml,.../>`，但是 'click' 事件对它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T13:33:28.093

单击事件在 中可以正常工作`<object>`，但是您必须在 svg 中而不是在`<object>`元素上捕获事件。您可以从那里轻松获取嵌入元素：`window.frameElement`.

但我不明白为什么它不应该在`<img>`元素中工作，除非 svg 本身有问题。我在 Opera 10 build 1497 (WinXP) 中测试了一个简单的示例（尽管不是在 userJS 脚本中），它运行良好：

```
<!DOCTYPE html>
<img src="data:image/svg+xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxMi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDUxNDQ4KSAgLS0+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiIFsNCgk8IUVOVElUWSBuc19zdmcgImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCgk8IUVOVElUWSBuc194bGluayAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQpdPg0KPHN2ZyAgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9IiZuc19zdmc7IiB4bWxuczp4bGluaz0iJm5zX3hsaW5rOyIgd2lkdGg9IjMwOC4wMTEiIGhlaWdodD0iMzYyLjQ3OSINCgkgdmlld0JveD0iMCAwIDMwOC4wMTEgMzYyLjQ3OSIgb3ZlcmZsb3c9InZpc2libGUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMwOC4wMTEgMzYyLjQ3OSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8Zz4NCgkJPHBhdGggZD0iTTI3MS44OTMsMTQyLjAwNGMtMS42MDgsNi44MjEtMy45MDUsMTMuODI5LTYuODc0LDIxLjAwN2MtMi45NzMsNy4xNzgtNi40NDMsMTMuNzA0LTEwLjQwNSwxOS41NzgNCgkJCWMtMy45NzIsNS44NjgtNy44NTYsMTAuMjE1LTExLjY3NSwxMy4wNWwxMi42NTgsMzkuOTA2YzAuMDYsMC43NDktMC42MjksMy4yNzMtMi4wNiw3LjU0OWMtMS40MzUsNC4yOC0yLjQ2MSw3LjIwNS0zLjA5Niw4Ljc2Nw0KCQkJYy0yLjk2MywwLjk5My01LjAzOSwyLjgwNi02LjIxOSw1LjQyN2MtMS4xODQsMi42MTctMS42MTgsNS45MjgtMS4yOTgsOS45NDZjMC4yNTgsMy4yNiwxLjQzOCw4LjU5NiwzLjU1NSwxNi4wMDUNCgkJCWMxLjEwNiw0LjQ2LDEuNzI5LDcuNDQyLDEuODQ5LDguOTQ2YzAuMTM3LDEuNzcyLDAuMDgsNC4yNTctMC4xNjcsNy40NTZjLTAuMjU4LDMuMTk5LTAuNzI5LDUuMjA5LTEuNDI1LDYuMDI0DQoJCQljMC4yODEsMy41NDEsMC4xOTQsOC43NjQtMC4yNjgsMTUuNjY3Yy0wLjU5NSw1LjM5LTAuNzcxLDkuNDc2LTAuNTUxLDEyLjI1NGMwLjI2NCwzLjI5LDEuMTI2LDYuMTQyLDIuNTg0LDguNTcybC00Ljk5NSw4Ljc4Ng0KCQkJYy02LjYxMywyLjk1Ni0xMi42OTEsNS4yNjYtMTguMjQ4LDYuOTI4Yy01LjU3LDEuNjU4LTExLjc0OSwyLjc1OC0xOC41MzIsMy4yOTdsLTI2LjEwMiwxLjMxMQ0KCQkJYy0yLjY5MS0yLjA1My03LjE3Mi00LjIyOS0xMy40MjctNi41MDNjLTYuNzQ3LTItMTEuNDc3LTQuMjc2LTE0LjIxNi02LjgzOGwtNy41NTEsMC42MDVjLTMuNDI3LTEuNzU1LTYuNDU5LTQuMTA1LTkuMTA0LTcuMDU1DQoJCQljLTIuNjMzLTIuOTQyLTUuNTMzLTYuODItOC43LTExLjYxOGwtMS42OTgtMi4xNDZsLTAuNTA4LTYuNDA5Yy0wLjEyLTEuNTAxLTAuOTkzLTQuNTg3LTIuNjMzLTkuMjYxDQoJCQljLTAuOTUxLTIuNDUxLTEuNjA4LTQuMjkzLTEuOTU2LTUuNTMzbC0zLjExMS0wLjg4M2wtMTUuNjUtMjQuOTE4bC00LjM2LTIuMzA0bC01LjQyMSwzLjQ2NA0KCQkJYy05LjUyOS0yLjAyNi0xOC42NTgtNC42NDEtMjcuMzk5LTcuODY3Yy04LjcyOC0zLjIxNi0xNi45NzEtNy4zMDYtMjQuNzAxLTEyLjI0N2MtNy43NDEtNC45NDEtMTQuMTAxLTEwLjk0Ni0xOS4wODktMTguMDExDQoJCQljLTQuOTktNy4wNjEtNy44NjItMTUuMjMyLTguNTk3LTI0LjUyM2MtMC43NzctOS43OTMsMC4zMTctMTcuNTIyLDMuMjc4LTIzLjE5MmMyLjk3NC01LjY2NCw3Ljg0NC0xMi4wNTMsMTQuNjIxLTE5LjE2OA0KCQkJYzcuNDk2LTcuNjY5LDEyLjc5Mi0xNC4yNzksMTUuODktMTkuODNsMS41MTQtMC4xMmw0Ljg2My01LjY5N2MtNS4yODgtOS4xODgtMTMuMDI5LTIzLjc2MS0yMy4yMjMtNDMuNzAxDQoJCQlDMjAuMTUsOTAuNDc5LDEyLjg0NSw3Ni42MzEsNy41MzIsNjcuMTczbC03LjUyLTEzLjQ1Yy0wLjE1NS0yLjAwOSwxLjEwNy00LjQ1LDMuNzgyLTcuMzI5YzIuNjkxLTIuODY1LDYuMDExLTUuNjY0LDkuOTcxLTguMzc4DQoJCQljMy45Ni0yLjcyMiw3Ljg4Ni01LjEyOSwxMS43NjItNy4yMDhjMy44OTUtMi4wNzYsNi43MTItMy4xODksOC40NzctMy4zMjdjMS4xNTMtMS4zNjEsMy40MzgtMi45MzIsNi44MzctNC43MjENCgkJCWMzLjM5OC0xLjc5NSw1Ljc5MS0zLjUsNy4xOTEtNS4xMzJjNy41NDItMC41OTgsMTguNDQ5LTMuNDksMzIuNzIzLTguNjc2YzE0LjI2OC01LjE4NiwyNS4xNzQtOC4wNzQsMzIuNzIzLTguNjczDQoJCQljNC43ODYtMC4zNzgsMTEuMDUtMC4zNzEsMTguNzk2LDAuMDE3YzcuNzYsMC40MDgsMTUuNzM5LDEuMzQ4LDIzLjk2NiwyLjg0OWM4LjIyMSwxLjQ5NSwxNS41OSwzLjUxMSwyMi4xMjMsNi4wMjUNCgkJCWM2LjUyNSwyLjUxOCwxMS4wODYsNS43MDcsMTMuNjc0LDkuNTQyYzAuODMzLDAuOTU2LDEuNTM4LDMuNTUsMi4xMzMsNy44MWMwLjU4OSw0LjI1NiwxLjIyNCw5LjAxNywxLjg5MywxNC4yNzkNCgkJCWMwLjQ2Miw1Ljc4OCwwLjg2OSw5LjI5MiwxLjIxNywxMC41MzVsMC42MjIsMi45ODVsLTAuNjA0LDEuOTQ2bC0wLjQzOC0wLjcxOWMyLjAyOSw2LjQxMyw0LjMxOSwxNi4xMTIsNi44NjcsMjkuMDY3DQoJCQljMi43MTgsMTEuOTM2LDUuMjEyLDIxLjgwOSw3LjQ4MiwyOS42MDJjMi4yNiw3Ljc5LDUuMzIzLDE1LjMxOSw5LjIwNCwyMi42MDFjMS42NjktMS4xNDMsNC4xODMtMi45ODUsNy41MzMtNS41MjMNCgkJCWM3LjYyNi01LjkyMSwxNC4zMjktMTAuODE2LDIwLjEtMTQuNjkxYzUuNzYxLTMuODc4LDEwLjY1OS01Ljk3OCwxNC42ODItNi4yOTlsMTAuOTgyLDEzLjkzOA0KCQkJQzI3NC4xMTIsMTI5LjI2MywyNzMuNTA0LDEzNS4xOSwyNzEuODkzLDE0Mi4wMDR6IE0xNy45MDcsMjE2LjY4MmwtMC43NjEsMC4wNjFsMC4zMyw0LjE0NmwwLjc1OS0wLjA2MUwxNy45MDcsMjE2LjY4MnoNCgkJCSBNMjEuNDg5LDE5OS42ODhjLTAuNjQxLDEuNTYyLTAuOTMzLDIuNjA3LTAuODkxLDMuMTA5Yy0xLjg5MSw0Ljk1NC0yLjczMyw4LjY4OS0yLjUzMSwxMS4yMDcNCgkJCWMyLjA3Ny01LjczLDMuNzYzLTEwLjA0NCw1LjA1LTEyLjkzNkMyMi41MywyMDAuMTEyLDIxLjk5MiwxOTkuNjUsMjEuNDg5LDE5OS42ODh6IE0xOS4xMzksMjEzLjE2MWwtMC4zNzEsMC4wM2wwLjY5NCw4LjY4Ng0KCQkJbDAuMzY0LTAuMDNMMTkuMTM5LDIxMy4xNjF6IE0yMC45MDQsMjIwLjk5OGwtMC4zNzcsMC4wM2wwLjY4OCw4LjY3OWwwLjM3Ni0wLjAzTDIwLjkwNCwyMjAuOTk4eiBNMjIuMDA0LDIzMC4wMjVsLTAuMzgzLDAuMDI5DQoJCQlsMC4wOSwxLjEzN2wwLjM4My0wLjAyOUwyMi4wMDQsMjMwLjAyNXogTTIxLjcxNiwyMjEuNjk2bC0wLjM3MSwwLjAzbDAuMDksMS4xM2wwLjM3MS0wLjAyOUwyMS43MTYsMjIxLjY5NnogTTI0Ljg4MSwyMzIuNDQ1DQoJCQlsLTAuNzI0LDAuNDQ1bC0wLjcxNy05LjA1OGMwLjAxOCwwLjI1MS0wLjA5LDAuNTE1LTAuMzE4LDAuNzg5Yy0wLjIzMiwwLjI2OC0wLjM0MSwwLjUyNS0wLjMyMiwwLjc3OQ0KCQkJYzAuMDE4LDAuMjUsMC4yMjEsMS4xMjMsMC41OTIsMi42MTFjMC4xMDIsMS4yNTcsMC4xNjcsMi4xNDMsMC4yMSwyLjY0MWwwLjExOSwxLjUxOWMtMC4yNTEsMC4wMTctMC41MTUtMC4wOTgtMC43ODktMC4zMjUNCgkJCWMwLjIzMi0wLjI2NywwLjQ3OC0wLjQyNCwwLjcyOS0wLjQ0Yy0wLjU2OC0wLjcxMy0wLjkxNS0xLjk0OS0xLjA1OC0zLjcwOGMtMC4wMTktMC4yNTQtMC4wOS0xLjEzNC0wLjIwOS0yLjYzOQ0KCQkJYy0wLjA3OS0xLjAxMy0wLjEzMi0xLjY0MS0wLjE1LTEuODkybDAuMDksMS4xM2MtMC4xOTIsMC43NzktMC4yNzUsMS4yOTQtMC4yNTIsMS41NDVsMC4yOTksMy43NjgNCgkJCWMwLjAxOSwwLjI1MSwwLjIwNCwxLDAuNTUyLDIuMjM2YzAuMTAyLDEuMjU4LDAuMTYxLDIuMDE3LDAuMTg2LDIuMjcxYy0wLjA0Mi0wLjUwNSwwLjE2Ny0xLjAyOSwwLjYzNC0xLjU4MWwwLjUyNiwxLjg2Mg0KCQkJbC0wLjc4OS0wLjMxMmMwLjAyMywwLjI1MSwwLjIwMiwwLjg3MywwLjUzMiwxLjg1M2MwLjQzMSwyLjI0MywwLjkyOCwzLjcyMSwxLjQ5Niw0LjQzOUwyNC44ODEsMjMyLjQ0NXogTTI1LjM2NiwyMzMuNTUyDQoJCQlsLTAuNzU0LDAuMDYxbDAuMTUsMS44OTNsMC43NTQtMC4wNjFMMjUuMzY2LDIzMy41NTJ6IE04OS4yNTEsMTU0LjA3N2wtMS4xMywwLjA5Yy0wLjUwMywwLjAzNy0wLjg4NiwwLjA3My0xLjEzLDAuMDkNCgkJCWMtNi4wMzcsMC40NzgtMTIuOTQ2LDIuNjI1LTIwLjczNiw2LjQzNmMtMS4wNTMtMC40MDQtMi4wNzYtMC41NzUtMy4wNzQtMC40OTVjLTIuNzcsMC4yMjEtNi41MDksMS42ODItMTEuMjI5LDQuMzkNCgkJCWMtNC43MjEsMi43MTItOS4zMjYsNi4wMjUtMTMuODI3LDkuOTQzYy00LjQ5OSwzLjkxMi04LjI5Miw3LjkwNC0xMS4zODQsMTEuOTUzYy0zLjA5OCw0LjA0OS00LjY2LDcuNTQ5LTQuNjc3LDEwLjQ5MWwyLjA2MywyLjEyDQoJCQlsLTAuMDU5LTAuNzU2Yy0wLjA5Ny0xLjI2MSwwLjMyMy0zLjEyNiwxLjI2Ny01LjYwNGMwLjkzOS0yLjQ4NCwyLjMxMS01LjEyOSw0LjExNi03LjkyN2MxLjgwNy0yLjc5OSwzLjU3OC01LjA5OSw1LjM0My02Ljg4MQ0KCQkJYzEuNzUzLTEuNzg5LDMuMjYtMi43MjksNC41MjMtMi44MjlsMS43MjktMi4wMzNsMC44NDMsMS4wN2wxLjY4Mi0yLjc4OWwxLjE1NSwwLjI4OGwyLjk5LTAuNjE1DQoJCQljLTAuMDc4LTEuMDEzLDAuNzEyLTIuMjEzLDIuMzY5LTMuNjE0bDAuMzc4LTAuMDNsMi4zNTcsMC45NTZsMS4xLTAuNDcxbC0wLjg3My0xLjQ0MWwwLjMxMS0wLjc5MmwxLjg4OS0wLjE0N2wxLjU2OCwwLjYzOA0KCQkJYzAuODQ0LTIuMSwyLjAyMy0zLjE5OSwzLjUzNi0zLjMybDAuMzc4LTAuMDNsMC4wODMsMS4xM2MwLjk2My0wLjU3OSwxLjY3NS0xLjI2NywyLjExMS0yLjA2Mw0KCQkJYzAuNDQ4LTAuNzQ5LDAuOTIxLTEuMTM3LDEuNDI0LTEuMThjMC4yNTEtMC4wMTcsMC42NCwwLjA3NCwxLjE2NSwwLjI2NGMxLjI3NSwwLjEzNCwyLjE2LDAuMTgxLDIuNjcsMC4xMzdsMS44LTEuMmwwLjQ1OSwxLjAyMw0KCQkJbDQuNzMzLTIuNTAxbDAuMzc2LTAuMDNsMC4zNTQtMC4zNzhjMS4yNDktMC4xMDEsMi40MjIsMC4yODEsMy40OTksMS4xMzdsMi41MDEtMS45NjlsMS41NjgsMC41ODJsMS4wNzYtMC43ODlsLTAuODA3LTAuNjQ4DQoJCQlsMC42NjQtMS4xMWMwLjI2OSwwLjIwNywwLjY3NSwwLjUzOCwxLjIyLDAuOTYzYzAuNzg5LDAuNDExLDEuMjAyLDAuODQ5LDEuMjM5LDEuMzE0Qzg3Ljg3LDE1Ny4zNzQsODguNjY2LDE1Ni4yNSw4OS4yNTEsMTU0LjA3Nw0KCQkJeiBNMzkuMDA1LDI1Ny4xNTNjLTEuODg0LTEuMzcxLTMuODI4LTMuNjE4LTUuODQ5LTYuNzQ3bC0wLjQzOC0wLjcyOWMtMC4wMjMtMC4yNTUtMC4yOTktMC42MDUtMC44NDMtMS4wNzMNCgkJCWMtMC41NDUtMC40NTgtMC45NTEtMC44LTEuMjItMS4wNGwtMC40MDgtMC4zNDhsLTAuMDMtMC4zODJjLTAuMjkyLTAuNDgxLTAuNDUzLTAuODQ2LTAuNDcxLTEuMTAzDQoJCQljLTEuNDktMi45MTktMi43NjUtNC41ODgtMy44MTItNS4wMTJsLTAuMDMtMC4zNzFsMC4zMTEtMC43ODlsLTAuMDMtMC4zNzFsMC40NDMsMC43MTljMC4wNDIsMC41MDEsMC4wNzIsMC44ODMsMC4wOSwxLjEzNw0KCQkJYy0wLjEyMS0xLjUxNS0wLjUxNS0zLjI1LTEuMTc5LTUuMjI5Yy0wLjIxNiwwLjUyNS0wLjI3NiwxLjI5MS0wLjE5MiwyLjI5N2MwLjAzNywwLjUwMiwwLjEwOSwxLjM4OCwwLjIxMSwyLjYzOA0KCQkJYzAuMzQ2LDEuMjQ0LDAuNTczLDIuNDg4LDAuNjc1LDMuNzUyYzAuMjUtMC4wMjEsMi4wNTMsMS45ODUsNS40MTUsNi4wMjRjMS42NjMsMS44ODksMy4xODgsMy41NDEsNC41NjMsNC45NTENCgkJCWMxLjM4MywxLjQwOCwyLjMzOSwyLjM1MSwyLjg4NCwyLjgxMkwzOS4wMDUsMjU3LjE1M3ogTTI3LjAxMSwyNDQuNDI4bC0wLjExOS0xLjUxOGwwLjM3Ni0wLjAzbDAuMTIxLDEuNTE5TDI3LjAxMSwyNDQuNDI4eg0KCQkJIE02My40MDEsMTEwLjUyNmMtMC4yNSwwLjAyMy0wLjQ5NywwLjE3NC0wLjcyOSwwLjQ0MWwtMC4zOTYtMC4zNTFjMC40OC0wLjI4OCwwLjcxMi0wLjU2MiwwLjY4OS0wLjgwOWwtMS4xOS0wLjY2OQ0KCQkJYy0xLjM0MS0wLjkwOS0yLjEzNi0xLjM0Ny0yLjM4Ny0xLjMyN2MtMC4yNSwwLjAxNy0wLjc0MiwwLjE4NC0xLjQ3MSwwLjQ5NWwtMC4zNTQsMC40MDhjMC43NzksMC4xOSwxLjgzNywwLjc0MiwzLjE2NiwxLjY1MQ0KCQkJYzAuNzk0LDAuNDQxLDEuNDUzLDAuNzY2LDEuOTczLDAuOTczYzAuMDI1LDAuMjUsMC4wNDMsMC41MDgsMC4wNiwwLjc2MmwwLjc2MS0wLjA2N0w2My40MDEsMTEwLjUyNnogTTU4LjcxNywxMDQuMDY3DQoJCQlsLTAuNzU5LDAuMDU3bDAuMTE5LDEuNTA4bDAuNzYxLTAuMDYxTDU4LjcxNywxMDQuMDY3eiBNNjQuNjc1LDExMi4zMjJsLTEuNTAxLDAuMTJsMC4wMywwLjM4MWwxLjUwOC0wLjEyMUw2NC42NzUsMTEyLjMyMnoNCgkJCSBNNzcuMzE2LDEyOC4wMzJjLTEuMDQ2LTAuNDIxLTEuODM3LTAuNzM5LTIuMzU3LTAuOTUzbDAuNjctMS4xOTdjLTAuMzExLTAuNzM1LTEuMDc3LTEuNjIyLTIuMzA0LTIuNjY4DQoJCQljLTEuMjItMS4wMzMtMi4yMi0xLjY1MS0yLjk5MS0xLjg0OWwtMC4wOS0xLjEzYy0wLjU4Ni0wLjk2My0xLjQxNy0xLjkwOS0yLjUtMi44NDJjLTEuMzk5LTEuNjUxLTIuMzkyLTIuOTY1LTIuOTcyLTMuOTM1DQoJCQlsMC4xMTksMS41MTFjMS45NDQsMi4xMjYsMy42NDksNC41ODMsNS4xMzksNy4zNzljMS40ODksMi43ODgsMi4zNDUsNS41NywyLjU2OCw4LjMzMmMwLjI1NSwzLjI4LTEuNjI4LDUuMDc1LTUuNjQ5LDUuMzk2DQoJCQljMC44MTQsMC42ODksMS40NzMsMS4wMTcsMS45NzQsMC45NzdjMS41MDgtMC4xMjEsMy4yMi0wLjg4Niw1LjEzNC0yLjMwNGMxLjE5NS0wLjg1NiwyLjAzMy0xLjQzMSwyLjUxOC0xLjcxOA0KCQkJYzAuOTYzLTAuNTc5LDIuNTgtMC45NjYsNC44NC0xLjE0N2MwLjk4MS0wLjMzMSwxLjg1NS0wLjUyOCwyLjYwOS0wLjU4OEM4Mi42NzEsMTMwLjEzMiw4MC40MzQsMTI5LjA0OSw3Ny4zMTYsMTI4LjAzMnoNCgkJCSBNODQuOTc5LDI2Mi42MDljLTEuMzUxLTQuMTg2LTIuMjI1LTcuMjg1LTIuNjM4LTkuMjg0Yy0wLjA2MS0wLjc0OS0wLjI1MS0xLjQ4OC0wLjU2Mi0yLjIzDQoJCQljLTAuNDMxLTIuMjQzLTAuODE0LTMuOTI1LTEuMTU1LTUuMDM4Yy0wLjM0MS0xLjExMy0wLjc2Ni0xLjYzOS0xLjI2OS0xLjYwNWwxLjc5NSw4LjIxNWMyLjM2OSwxMC42OTksNC4yNTMsMTguNTIyLDUuNjU5LDIzLjQ3MQ0KCQkJbDEuMTMyLTAuMDljMC4yMzItMC4yNzEsMC4zMjktMC42NTksMC4yOTItMS4xNkM4OC4wMTQsMjcyLjExNCw4Ni45MjQsMjY4LjAyMiw4NC45NzksMjYyLjYwOXogTTgxLjg4MiwyNDIuNzI5bC0wLjc2MSwwLjA2MQ0KCQkJbDAuMTIxLDEuNTE1TDgyLDI0NC4yNDRMODEuODgyLDI0Mi43Mjl6IE04NC40NTksMjMyLjI3MWMwLjAyMywwLjI1NC0wLjA2NSwwLjc2Ni0wLjI1LDEuNTM4DQoJCQljLTAuMjE2LDAuNTM1LTAuNTI3LDEuNDM4LTAuOTI4LDIuNzM1Yy0wLjU3NSwyLjMyNi0xLjIwOSwzLjg5NS0xLjg5Niw0LjcxNGwwLjA4OSwxLjEyM2MwLjUwMy0wLjAzMywwLjczLTAuMzExLDAuNjg4LTAuODEyDQoJCQljMC4yNzQsMC4yMzQsMC40MzcsMC41OTksMC40NzMsMS4xMDFjLTAuMDE4LTAuMjUxLDAuMDc3LTAuNTA5LDAuMzExLTAuNzgyYy0wLjA2LTAuNzQ5LDAuMDMtMS4yNjgsMC4yNjItMS41MzhsLTAuMDMtMC4zNzgNCgkJCWMtMC4wNi0wLjc1MywwLjEzNy0xLjM5NywwLjU5OS0xLjk0OWMwLjAyMywwLjI1MSwwLjE3NCwwLjQ5NSwwLjQ0MywwLjcyOWwtMC4wOS0xLjEzN2wwLjQwOCwwLjM0OA0KCQkJYzAuMDc3LDEuMDEtMC4xMzksMS41MzEtMC42NCwxLjU3NWMtMC4yMjcsMC4yNjgtMC4zMzYsMC41MzEtMC4zMTIsMC43ODJsMC43MjYtMC40MzhsMC4zNzYtMC4wMjYNCgkJCWMtMC4wNi0wLjc1NiwwLjEwMi0xLjkwOSwwLjQ4NS0zLjQ2YzAuNDI1LTEuMDQsMC42MDQtMS45NDMsMC41NDMtMi43MDJDODUuMTcyLDIzMy4yMzEsODQuNzUyLDIzMi43NTcsODQuNDU5LDIzMi4yNzF6DQoJCQkgTTgxLjY0MSwyMzkuNzE0bC0wLjMxNiwwLjc4NmwwLjQwNiwwLjM0OGwwLjMxMS0wLjc4Nkw4MS42NDEsMjM5LjcxNHogTTEwNS4wODIsMTMzLjQzOGMtMC41MDMsMC4wNDMtMS4xMiwwLjIyMS0xLjg2MSwwLjUzMg0KCQkJYy0wLjc0OSwwLjA2LTEuMjUsMC4xMDQtMS41MDIsMC4xMmMtMS43NjQsMC4xNDQtNC4yMDUtMC4yOTctNy4zMjItMS4zMzRjLTMuMTA0LTAuNzcyLTUuNDA4LTEuMS02LjkxNi0wLjk3Ng0KCQkJYy0xLjI1NSwwLjA5Ny0yLjc5MywwLjY2NS00LjYwNSwxLjcwMmMtMS44MTksMS4wNC0yLjY4NywyLjA2My0yLjYwMywzLjA3M2MwLjEwMiwxLjI3MywwLjc3NywxLjg1NSwyLjA0LDEuNzU1DQoJCQljMC4yNTItMC4wMiwwLjk3LTAuNDYxLDIuMTY3LTEuMzI0bDAuNzI0LTAuNDM1YzEuMjItMC42MDUsMy4zMzItMS4wMjMsNi4zNTItMS4yNzFjMi4wMTYtMC4xNTQsNC43MDksMC4yNjQsOC4wODMsMS4yNzENCgkJCWMzLjEsMC43NjksNS40MDMsMS4xLDYuOTA0LDAuOTc5YzEuNTItMC4xMjEsMi4yMTgtMC44MTIsMi4xMTgtMi4wODNDMTA4LjUzOSwxMzMuOTM3LDEwNy4zNDIsMTMzLjI1OCwxMDUuMDgyLDEzMy40Mzh6DQoJCQkgTTEyOC4yNDQsMTUyLjQ5OWwtMC43NTksMC4wNmwtMC43MjQsMC40MzVsMC4xMTksMS41MDhjLTAuNzcxLTAuMTktMS42OTMtMC42MjItMi43NTgtMS4yOTcNCgkJCWMtMS44NjYtMS4xMi0zLjc5OC0xLjU5OC01LjgxNC0xLjQzNWwtMjYuNDczLDEuMzM3Yy0xLjI1NSwwLjEwNC0xLjg2LDAuNTM1LTEuOCwxLjI4N2wwLjEyMSwxLjUxNWwzLjAyMS0wLjI0MQ0KCQkJYzAuMjUxLTAuMDIzLDAuNTAzLTAuMDQsMC43NjEtMC4wNmwwLjA4OCwxLjEzYzAuNzMtMC4zMTEsMS41NjgtMS4wMSwyLjQ4OS0yLjFsLTAuNDY2LTEuMTA2DQoJCQljMC44MTQsMC43MDIsMS43ODIsMS43NjUsMi45MDcsMy4xODljMC4yNS0wLjAyMywwLjczNS0wLjMxMSwxLjQ1NC0wLjg3M2MwLjcxNy0wLjU2MiwxLjMyMi0wLjg2MywxLjgzMS0wLjkwMw0KCQkJYzAuMjUtMC4wMiwwLjYzMywwLjA3NywxLjE2LDAuMjg4bDAuODE0LDAuNjk5YzEuMTUzLTEuMzY0LDIuMTExLTIuMDc2LDIuODY1LTIuMTNjMC41MDEtMC4wNDMsMC43ODksMC40NDEsMC44NzMsMS40NDgNCgkJCWwwLjA2MSwwLjc0OWwxLjEzLTAuMDljMC45MjgtMS4wODMsMS44ODYtMS43OTUsMi44NjctMi4xMjNsMC40MTMsMC4zNTFsLTAuMjU3LDEuNTMxYzAuMjQ0LTAuMDE3LDAuNjIyLTAuMTY3LDEuMS0wLjQ2MQ0KCQkJYzAuNzE5LTAuNTU1LDEuMzIyLTAuODY2LDEuODMtMC45MDNjMC4yNTItMC4wMjMsMC42MzUsMC4wNzQsMS4xNTUsMC4yODFjMC4yNjksMC4yMzQsMC41MzgsMC4zNDgsMC43OTYsMC4zMjRsMC43MTctMC40NDENCgkJCWwwLjc1NC0wLjA2YzAuNzU0LTAuMDYxLDEuMTg2LDAuNTQyLDEuMjg4LDEuNzkybDEuMS0wLjQ2NWMxLjIyLTAuNTk5LDIuMDc2LTAuOTI2LDIuNTc4LTAuOTYzDQoJCQljMC41MDMtMC4wNDMsMC44OTMsMC4wNiwxLjE2NywwLjI5MWMwLjI3LDAuMjI3LDAuNTM5LDAuMzM3LDAuNzkxLDAuMzE0YzAuMjQ0LTAuMDIsMC42MTUtMC4wNSwxLjEyMy0wLjA5DQoJCQljMC40ODUtMC4yODcsMC45NzctMC40NTUsMS40NzgtMC40OThsMS4yMjcsMS4wNDZsMS4xNiwwLjI4MWMwLjQ3OS0wLjI4NCwwLjg0NC0wLjU3MiwxLjA3MS0wLjg0Mw0KCQkJYzAuOTI4LTEuMDgzLDEuODkxLTEuNjYyLDIuOS0xLjc0MmwwLjQxMywwLjMzN2wwLjc0OS0wLjA2QzEzMi40NDMsMTUyLjc5NiwxMjkuOTk4LDE1Mi4zNTUsMTI4LjI0NCwxNTIuNDk5eiBNMTE0LjQ4NSwyMzcuNDg0DQoJCQljLTAuNzg5LTAuNDM4LTEuNjU3LTEuNzY2LTIuNTk2LTMuOTY2Yy0wLjkyOC0yLjIxLTEuNDM2LTMuODEyLTEuNTEzLTQuODI0Yy0wLjAyNS0wLjI1MSwwLjA2NS0wLjc2NiwwLjI1LTEuNTM0bC0wLjA5LTEuMTM0DQoJCQlsLTEuMTMsMC4wOWMtMC40NzgsMC4yODgtMS4yMDIsMC43MzItMi4xNzgsMS4zMTFjLTIuNDM0LDEuMjA0LTMuNjAxLDIuNDM1LTMuNTA1LDMuNjk4YzAuMTQ0LDEuNzU5LDEuNjkzLDMuNzg4LDQuNjY3LDYuMDg1DQoJCQlsMC40MzcsMC43MjlsMC4zNzYtMC4wM2MwLjIzNC0wLjI3MywwLjQ3My0wLjQyNCwwLjczLTAuNDRjMC4yNDYtMC4wMjcsMC42NDYsMC4yLDEuMTksMC42NjFjMC4zMTEsMC43NDIsMC41OTksMS4wOSwwLjg0OSwxLjA3DQoJCQljMC4yNTEtMC4wMjMsMC43NDItMC4xNzgsMS40NzgtMC40ODhjMC40NzgtMC4yOTQsMC44NDQtMC40NTUsMS4wOTUtMC40NzVMMTE0LjQ4NSwyMzcuNDg0eiBNMTA4Ljc1NCwyMzIuMjMxDQoJCQljLTAuNDI1LDEuMDQ3LTAuNjE3LDEuODI1LTAuNTc1LDIuMzJsLTEuMTMsMC4wOTFjLTAuMDIzLTAuMjQ0LTAuMDYxLTAuNzQ5LTAuMTIxLTEuNTE1bC0wLjQ2Ni0xLjA5NGwtMC4wODgtMS4xMzcNCgkJCWMtMC4wMjUtMC4yNDQsMC4xOS0wLjc3MiwwLjYzMy0xLjU2OGwwLjMxOC0wLjc3OGMxLjA0NiwwLjQyMSwxLjU4OSwwLjg4MywxLjYyNiwxLjM4NA0KCQkJQzEwOC45OTMsMjMwLjQzNywxMDguOTIxLDIzMS4yMDksMTA4Ljc1NCwyMzIuMjMxeiBNMjQyLjYwNCwyOTcuNDhsLTAuODAzLDQuMjQzbC0xLjM0NC0yLjU1MWwtMS41MDUsMC4xMmwtMy41OTEsMi41NjENCgkJCWwtMi42MjQsMC4yMTFsLTIuOTg2LDAuNjE1bC0xLjUzMS0wLjI1OGwtMS40NzEsMC40OThjLTAuMjUxLDAuMDE4LTAuNjM1LDAuMDQ3LTEuMTM3LDAuMDg3Yy0wLjUyMS0wLjIwNy0wLjg5Ni0wLjMwNC0xLjE1LTAuMjg3DQoJCQljLTIuMjY3LDAuMTgxLTQuMzIyLDEuMjMzLTYuMTg1LDMuMTUzbC0wLjc2LDAuMDZsLTIuMDkzLTIuNDk0Yy0zLjUyMSwwLjI4MS01LjYzLDAuODMzLTYuMzI5LDEuNjU4DQoJCQljLTAuNjg4LDAuODE5LTEuMTQ5LDMuMDM5LTEuMzY0LDYuNjQxYy0wLjMxNy0wLjc4OS0wLjc5NS0xLjk2My0xLjQyNC0zLjUzOGMtMC45NjMtMi42MDctMi45NjItMy43OTgtNS45NzgtMy41NTdsLTQuMzQ3LDIuNjIxDQoJCQljLTAuNjIyLTEuNDY4LTIuODIyLTIuMDUzLTYuNi0xLjc1NmMtMi4wMTMsMC4xNjQtMy4yNjcsMC4yNjUtMy43NzEsMC4zMDFsLTMuNTM0LDMuMzJsLTAuOTkzLTIuOTYybC03LjM3NS0yLjA2OWwtMy4yODMsMS43NzUNCgkJCWwtMC43NDksMC4wNmwxLjMyNy0yLjM3NGwtMC44MTktMC42OThjLTEuNzU4LDAuMTM3LTQuNDI3LTAuMDI3LTguMDExLTAuNTA1bC0wLjc4Mi0wLjMxN2wtMS44MDIsMS4yODdsLTYuNTYzLTEuMzgxbC0zLjMwMiwxLjQNCgkJCWMwLjA2LDAuNzU5LDAuMDQ4LDIuMjc3LTAuMDIzLDQuNTU4Yy0wLjA5NywxLjk0OS0wLjEwOCwzLjQwMy0wLjAzLDQuMzU2YzAuMDM1LDAuNDcxLDAuMjAyLDAuOTQyLDAuNDksMS4zOTQNCgkJCWMwLjAzNywwLjUwOSwwLjA3OSwxLjAxLDAuMTIsMS41MTJsLTIuMjY4LDAuMTgxYy0wLjM4OC0xLjc0OS0xLjIxNC00LjA4Ni0yLjQ1My03LjAzMWMtMS4yNS0yLjkzNi0yLjc3LTYuMTEyLTQuNTUyLTkuNTE2DQoJCQljLTEuNTYxLTMuNjc0LTIuNDk0LTUuODgxLTIuODA1LTYuNjE2bDAuNjMzLTEuNTY4bDEuNjAzLDEuMDFsMC43MDYtNS4zNzNsLTAuMDMtMC4zNzRjLTEuNjUtMS42NDYtMy4wMjEtMi45ODUtNC4xMjEtNC4wMzkNCgkJCWMtMS4wOS0xLjA2LTIuMjY4LTEuNTMxLTMuNTIzLTEuNDMxbC0zLjQxNyw0LjgyNGwyLjA5NSwyLjQ5OGwtMS43OTYsMS4yOGMtMi43NywwLjIyNC00LjMwMS0xLjU2Mi00LjYtNS4zMzYNCgkJCWMtMC4wNDItMC40OTUsMC4wNTUtMC44OSwwLjI5NC0xLjE2bC0wLjA2LTAuNzUzbC00LjgzNC0zLjQxYy0xLjc2NCwwLjEzOC0zLjU2NCwxLjM1Mi01LjQxMywzLjY1NA0KCQkJYy0xLjgzNywyLjMwNC0yLjgsNC40NzEtMi44OSw2LjQ5NmwxLjE5LDAuNjY2YzAuMjEtMC41MjEsMC41MjEtMS4zMDQsMC45NTEtMi4zNTFjMS4wMTgtMy4xMjMsMi40MDUtNC43NTgsNC4xNjQtNC44OTUNCgkJCWwwLjgxOSwwLjY5NWwtMC45ODEsMS45NzlsMS4xOTIsMC42NjJsLTEuNjUyLDMuMTczbDIuMjA3LTAuOTM0bC0wLjU0MywyLjY5MWwxLjE5NywwLjY2OWwwLjY0NiwzLjM3bDEuNDQ3LTAuODc2bDAuOTYzLDIuNTgxDQoJCQlsLTEuMzg3LDEuNjI1bC0yLjI5Mi0wLjE5bC0wLjUwMS0xLjQ3OGwtMS4xMzcsMC4wOWwtMy40NjQtNS40MjZsLTEuMzg5LDEuNjMxYzAuMTYyLDIuMDk3LDIuMTEzLDQuMzEsNS44NDYsNi42NDQNCgkJCWMxLjMzOSwwLjk0MiwyLjI4NSwxLjY1NSwyLjgyMywyLjE0bDEuMTA2LTAuNDg0bDEuMjU3LDEuNDc4bDEuMDQtMS4yMjhjMC43OTEsMC40NTIsMS44NzMsMS4yNDEsMy4yMzEsMi4zOTUNCgkJCWMxLjMzNCwwLjg5MywyLjE0MiwxLjQ1NCwyLjQxMSwxLjY4MmwtMS4zMzQsMi4zNjNsMi4yMDctMC45MjlsLTEuMjQ0LDMuNDc3bDEuODMxLTAuODkzbDAuNDAxLDAuMzQ4bDAuMDYsMC43NDINCgkJCWMtMC4yMzQsMC4yNTgtMC4zMjQsMC42MjItMC4yODgsMS4xYzAuMTQ5LDEuODk2LDAuNzQ3LDMuMDMzLDEuNzgyLDMuNDMxbC00LjE5Myw0LjUxMWwtMC4zNzgsMC4wMjkNCgkJCWMtMC40MjktMi4yNDMtMS44MTItNS4zMDMtNC4xNDYtOS4xNjdsMC45ODEtMS45NzlsLTEuMjg1LTEuNzk1bC0wLjE4MS0yLjI2OGwtMi41NDIsMS4zNDFsMC40NjEsMS4xMDYNCgkJCWMyLjk4NSw4Ljg4NCw0LjY3NywxNS44MzEsNS4wNzgsMjAuODY2YzAuMTIxLDEuNTAxLDIuNjI2LDQuMzM3LDcuNTA4LDguNTEzYzMuMzAzLDMuMjc5LDUuMzc5LDUuNTEsNi4yMzMsNi43MmwzLjQ4OSwwLjg1OQ0KCQkJYzAuMjI3LTAuMjY4LDAuODM3LTAuNTc4LDEuODI0LTAuOTA5YzIuMTgzLTEuMTg0LDMuNjA3LTIuMzA4LDQuMjktMy4zNzRsMC40MDYsMC4zNDJsMS40NzgtMC40OTVsMi43MDUsMC41NDhsLTEuMjA5LDMuODg5DQoJCQljMy45MDUsMS40NjEsOS43MDIsNC4yODksMTcuMzc5LDguNDg1YzIuOTA5LDEuNTEyLDUuODA0LDIuOTAyLDguNjg3LDQuMTYybDEuMTMtMC4wOWM0LjYzLDAuOTAyLDEwLjA4NywxLjEsMTYuMzc2LDAuNjA1DQoJCQljMy4wMTktMC4yNDEsNS4xNzktMSw2LjQ2Ni0yLjI4YzEuMjktMS4yOCwyLjM2LTIuOTAyLDMuMjIzLTQuODY1YzAuNjE1LTEuODIxLDEuNDI1LTIuNzY4LDIuNDMxLTIuODUyDQoJCQljMC43NTItMC4wNjEsMS44MTUsMC42MTUsMy4yLDIuMDIyYzEuMzc3LDEuMzgxLDIuODQ5LDIuNDQ3LDQuNDI2LDMuMmMxLjU3OCwwLjczNSwzLjg3MiwwLjk5Myw2LjkwMSwwLjc1Ng0KCQkJYzMuMDAyLTAuMjQxLDYuNzg3LTEuNzM1LDExLjM3MS00LjQ4N2M0LjU3LTIuNzU1LDYuNzQzLTUuNjIzLDYuNTA5LTguNjIyYy0wLjEyLTEuNTA4LTAuNjY1LTMuNDg3LTEuNjE4LTUuOTQxDQoJCQljLTEuMTg0LTIuMTktMS44MzUtNC4wMzItMS45NTItNS41NGMtMC4xNjQtMi4wMSwxLjAxLTQuNzYxLDMuNTE3LTguMjU1bDAuMzQ1LTAuNDA4Yy0wLjQyNS01LjMwNi0wLjY2OS05LjE2NC0wLjcyOS0xMS41ODENCgkJCWMtMC4wNy0yLjQwNCwwLjA5LTQuNTE3LDAuNDQ4LTYuMzI5TDI0Mi42MDQsMjk3LjQ4eiBNMjQ0Ljc0NCwyMTguMzk0bC02LjgxNCw1LjEwNWMyLjU0OC0yLjk4Niw0LjE5My02LjA5OSw0Ljk1NS05LjMyMQ0KCQkJYzAuNzYtMy4yMiwxLjIwNy03LjEyMiwxLjM1Mi0xMS42OTJjLTYuNDUzLTExLjEzMy0xMS4zMDgtMTkuNjAyLTE0LjU1MS0yNS40MjNsLTMuMDQ5LTAuMTM3DQoJCQljLTIuODA2LTAuMjgxLTQuOTY1LTAuMzY4LTYuNDc5LTAuMjQ4Yy02LjI4NiwwLjQ5OC0xMi42OTUsMS44OTktMTkuMjIyLDQuMTg5Yy02LjUyNSwyLjI5LTExLjQwNyw1LjMzNS0xNC42NTcsOS4xNA0KCQkJYy0xLjk4NSwwLjQxMS01LjQwNiwyLjAxLTEwLjI0Nyw0LjgwNWMtNC44NDIsMi43ODItNy44Myw0Ljk4MS04Ljk2Nyw2LjU5M2MtNC4wMjUsMC4zMjEtNi4xMTgtMC41MjEtNi4yODItMi41MzdsLTEuNjIyLTEuMzk1DQoJCQlsLTEuMDc2LDAuODVjLTIuMDUxLTAuMzQxLTcuMzY0LTAuMjk4LTE1LjkzNiwwLjEzYy01LjAzNywwLjM5OC04Ljg3MiwwLjYzNi0xMS41MjgsMC43MjZjLTIuNjUxLDAuMDg0LTQuMzc0LTAuMS01LjE2NC0wLjUzOA0KCQkJbC0xLjI3NCwzLjEzM2wtMS4xNi0wLjI5MWMtMi42MDgsMi4yMzctNS4xNzUsNS43OTgtNy43LDEwLjY4NmMtMi41MTgsNC44ODItMy42NjEsOC44MzMtMy40MTUsMTEuODU1bDIuODk1LTEuNzU5bDAuMzc2LTAuMDI5DQoJCQlsLTMuNzMzLDUuNjE2bDIuNzkzLDEuNjY5YzAuNywyLjQ4MywyLjgxMiw1LjIyOSw2LjM0Nyw4LjIzN2wtMi4wODEsMi40NDdsLTIuODI0LTIuMDU2bC0xLjczNSwyLjAzMmwtMS4wODgsNS40MDNsMy44NCw1LjM5Ng0KCQkJbDEuNzcyLTEuNjY1bC0wLjk4MSwxLjk3OWwwLjkzMywyLjIwM2wyLjE3OC0xLjMxN2wwLjQzLDAuNzM1bC0xLjcwNSwyLjQxYzEuNjI4LDEuMzkyLDIuNjA5LDIuNTg1LDIuOTQ0LDMuNTY3bC0wLjk0NCwyLjM1MQ0KCQkJbDEuODg0LTAuMTVsLTAuMjM0LDEuOTE2bDIuMzU3LDAuOTU2bDEuODU1LTAuNTMxbDIuMzg3LDEuMzM0bDUuMTkyLTEuNTU1bDAuODA4LDAuNjkxbDIuMTQ4LTEuNjg1bDAuNDcxLDEuMWwxLjgyNi0wLjkwOQ0KCQkJbDAuNzc3LDAuMzI0bDMuOTQyLTIuOTc5bDEuOTIxLDAuMjNsMi45MDItMS43NDVsMi42NjgsMC4xNjdjLTAuMDQyLTAuNTAyLDAuMDY1LTAuNzY2LDAuMzE4LTAuNzgyDQoJCQljMS4wMDQtMC4wOCwxLjU0OCwwLjM4MSwxLjYyNiwxLjM4MWMwLjIzMi0wLjI3MSwxLjE4My0xLjEwMSwyLjgzNS0yLjUwMWMzLjA2OC0yLjc3NSw1LjMwNi00Ljk3OSw2LjY4Ny02LjYxbDAuODU1LDEuMDcNCgkJCWMtMS42NDUsMS42NTgtMi44NjEsMy43NzQtMy42NjQsNi4zNzJjLTAuMzc0LDEuNzk5LTEuMDE3LDMuMjQzLTEuOTM5LDQuMzNjLTAuOTM1LDEuMDktMi44NDIsMi41MDEtNS43NDQsNC4yNmwwLjQzNiwwLjcxOQ0KCQkJbC03LjA5NCw2LjI2MmwwLjAxOCw0LjkzNWMxLjE0MiwxLjY4OCwxLjgxOSwzLjc4MiwyLjAxNiw2LjI5NmMwLjAxOSwwLjI1MS0wLjM3NywxLjY3NS0xLjE3OCw0LjI3bC0wLjI2NCwxLjU0NWw4LjA3OCwxLjI1Nw0KCQkJbDIuMjA2LTAuOTMzbC0xLjY0NS02LjMyOWwxLjA3Ni0wLjg1M2MxLjEyNSwxLjQzOCwxLjg4NSw0LjY2NywyLjI4NSw5LjY5OWw2LjI3NSwyLjUzN2MxLjc2Ni0wLjEzNywyLjUwOC0xLjk2OSwyLjIzNC01LjQ5Mw0KCQkJbDAuODA2LDAuNjk5bDAuOTczLDcuNTE2bDEuNDUxLTAuOTE2YzAuODEyLDAuNzM1LDEuNDc4LDEuMDgzLDEuOTc5LDEuMDRjMC40OTQtMC4wMzMsMS4zNy0wLjIzLDIuNjE0LTAuNTg1DQoJCQljMC45ODItMC4zMjgsMS43MjUtMC41MjEsMi4yMzMtMC41NjJsMS4yOTctMi43NTFsMi4xNTMsMy4yNDNsMC4wODcsMS4xM2MwLjUwNS0wLjAzNywwLjg5OSwwLjA2MSwxLjE3LDAuMjg3DQoJCQljMi4wNTMsMC4zNDIsMy41ODQsMC40NzIsNC41ODcsMC4zOTVsMy4zNzQtMC42NDJsMi4yMi01LjQxM2wzLjgxNCw0LjkyOWM0Ljc3NC0wLjM3NSw2Ljk5NS0yLjcxNSw2LjY1My03LjAwNQ0KCQkJYy0wLjAzMy0wLjUwMS0wLjI2OC0xLjc0NS0wLjY4Mi0zLjczN2MtMC40MDgtMi0wLjY1NS0zLjYyOC0wLjc1OS00Ljg4MmwxLjA0Ni0xLjIyMWMyLjMxMSwzLjcyMiw0LjA3Miw4LjM5Myw1LjI4OSwxNC4wMjkNCgkJCWw2LjAzOS0wLjQ4MWwzLjU1Ny0yLjk0Mmw3LjQxMiwyLjA2OWwyLjYwNC0wLjk2OWwwLjMwMi01LjczN2MwLjU1MSwwLjQ5OCwxLjE0OSwxLjY2NSwxLjgwMiwzLjUNCgkJCWMxLjAxMywzLjA3NiwyLjM5Nyw0LjU0Nyw0LjE2OSw0LjQwM2MxLjg5My0xLjQyNCwyLjk4Mi0zLjQ4NywzLjI3LTYuMjA5bDMuMDUsNS4zMjNsMi4yNzMsMC4yMDRsMC41MjQsMS44NTUNCgkJCWMtMC4xLTEuMjU4LDAuMDU3LTIuNTM4LDAuNDYyLTMuODM1YzAuMTY3LTEuMDQzLDAuMjM3LTEuNjg4LDAuMjIxLTEuOTQ2bC0yLjAxLTI1LjI3NWMtMC4xMzctMS43NjItMC43MDUtNC4xMTktMS43MDUtNy4wODENCgkJCWMtMC45MTYtMS45NDktMS4zODgtMy4xNzctMS40MzEtMy42ODVjLTEuMDQzLTAuNDIyLTIuNjE1LTEuMDU0LTQuNzA4LTEuOTA5Yy0zLjg4OC0xLjIwNC02LjcxNy0yLjU2Mi04LjQ4MS00LjA2Mg0KCQkJYy0xLjc2Ni0xLjUwOC0yLjgwNi00LjI3Mi0zLjEzLTguMjk4Yy0xLjA0Ni0wLjQyNS0yLjc4NS0xLjY3NS01LjIyNi0zLjc2MmMtMi43MDEtMi4wNjYtNC43MDQtMy40MjMtNi4wMjEtNC4wODJsMy43NDgtMC42NzYNCgkJCWMxLjc2OS0wLjE0NCw0LjIwOSwwLjE3NSw3LjMyOCwwLjkzNGwxLjcxOSwyLjUzbDAuNzM1LTAuNDQxbDAuOTA2LDEuODE5bDAuNjM5LTEuNTYybDAuNDQxLDAuNzIzbDAuMTgxLDIuMjY3bDEuMTMtMC4wOTENCgkJCWwtMC4xODgsMi4yODdsMS44ODYtMC4xNWwwLjM2OCw0LjUzbDEuMTIzLTAuMDlsMS4zMTEsMi4xNzZsMC4xMiwxLjUxNWw1LjU1NywzLjM1MWMyLjg4My0xLjc0OSw2LjMzNi0yLjc4MiwxMC4zNDUtMy4xMDYNCgkJCWw0LjA3OS0xNS41MDdMMjQ0Ljc0NCwyMTguMzk0eiBNMTY1LjkyOCwyMjUuNDA0Yy0xLjc0NSwzLjQzNC0zLjMxNiw2LjAyNC00LjY5NCw3Ljc3NmMtMS4zNzgsMS43NTYtMy4zMjgsMi43NDItNS44NDEsMi45MzkNCgkJCWMtMS41MTMsMC4xMi0zLjczMywwLjgwMi02LjY3LDIuMDQ2Yy0zLjE3OCwxLjUxOC01LjUxNywyLjM0MS03LjAyNCwyLjQ1N2MtMS41MDYsMC4xMjEtMy42MzYtMC40MDQtNi4zODktMS41ODQNCgkJCWMtMi43NTEtMS4xNzQtNS42MDUtMi43NzUtOC41NTQtNC44MjFjLTIuOTQ0LTIuMDQ2LTUuNDUtNC4xMjktNy41MTQtNi4yNDZjLTIuMDYzLTIuMTA1LTMuMTU4LTMuOTI1LTMuMjc4LTUuNDI2DQoJCQljLTAuMTYtMi4wMTYsMS4zMjItNS41NDcsNC40NjktMTAuNjA1YzMuMTQ3LTUuMDYyLDUuNTgyLTcuNzksNy4zMjktOC4xNzhjMi43MDUtMC45NzcsNS41Ny0xLjU4OCw4LjU5MS0xLjgyNQ0KCQkJYzEtMC4wNzcsMi41MzEsMC4wNTQsNC41ODIsMC4zOTVjMS44MjUsMC42MTUsMy4yMzYsMC44NzksNC4yNDMsMC44MDJjMC41MDEtMC4wNDMsMS4xMTgtMC4yMTcsMS44NTQtMC41MjcNCgkJCWMwLjc0Mi0wLjMxMiwxLjIzMi0wLjQ3MiwxLjQ4NC0wLjQ5NWMxLjc1OS0wLjEzOCw0LjU3LDAuMTQ0LDguNDE3LDAuODQzYzIuODI4LDAuNTQ1LDQuNzU4LDAuODk2LDUuNzg0LDEuMDYyDQoJCQljMC4yOTQsMC40ODEsMS4zNTQsMS44NTUsMy4xNzYsNC4xMTljMS44MTgsMi4yNTQsMi44NzksMy42MzEsMy4xNzMsNC4xMDljMC4wMTcsMC4yNTcsMC4yMjgsMS4yNSwwLjYyMiwyLjk5NQ0KCQkJYzAuMDk0LDEuMjUxLDAuMTg0LDIuMzgxLDAuMjY4LDMuMzk0QzE2OS4wMjYsMjE5LjcyMSwxNjcuNjg2LDIyMS45NzgsMTY1LjkyOCwyMjUuNDA0eiBNMTI1LjczMiwyOTcuNzA4bC0wLjM3NiwwLjAzDQoJCQlsMC42NjktMS4xODRsMC4zNjYtMC4wM0wxMjUuNzMyLDI5Ny43MDh6IE0xMjIuMjc1LDIzOS44OTVsMC4wODgsMS4xM2wtMC43NDcsMC4wNjFsLTAuMzgzLDAuMDNsLTAuMTIxLTEuNTE1DQoJCQljLTAuMDIzLTAuMjUxLDAuMzQ4LTAuNDA0LDEuMTAyLTAuNDY1bDAuMDMsMC4zNzhMMTIyLjI3NSwyMzkuODk1eiBNMTI2LjI5MywyOTAuNDUzbC0wLjQxMS0wLjM0OGwwLjMyMy0wLjc4OWwwLjQxMywwLjM1MQ0KCQkJTDEyNi4yOTMsMjkwLjQ1M3ogTTEzMC4yMTIsMjQ0LjE5N2MtMC4yNTYsMC4wMTctMC45MzMtMC41NjQtMi4wNC0xLjczNWMtMS4zMzQtMC45MDktMi4xMjktMS4zNi0yLjM4LTEuMzM0bC0xLjEzMiwwLjA4Nw0KCQkJYy0wLjQ4MywwLjI5NS0wLjg1NCwwLjQ1Mi0xLjEsMC40NjlsLTAuMDktMS4xMzFjLTAuMDQyLTAuNTAxLDAuMzExLTAuNzg1LDEuMDcxLTAuODQyYzAuNTAxLTAuMDM3LDEuODA3LDAuNTU1LDMuOTM3LDEuNzc1DQoJCQljMi4xMjMsMS4yMjcsMy4zMzIsMi4wNzYsMy42MTksMi41NjFMMTMwLjIxMiwyNDQuMTk3eiBNMTMyLjc2NywzMjQuMTIxbC0xLjEzLDAuMDlsLTAuMDYtMC43NjNsLTAuNDA2LTAuMzQ0bC0wLjE0OS0xLjg5Mw0KCQkJYy0wLjA2LTAuNzQ1LDAuNjI3LTEuNTY4LDIuMDg2LTIuNDM0bDEuMDk1LTAuNDcyYzAuMDc5LDEuMDAzLDAuMzgzLDEuNjE1LDAuOTEsMS44MjJsMC4wOSwxLjEzM0wxMzIuNzY3LDMyNC4xMjF6DQoJCQkgTTEzNC43NzEsMzI1LjQ3MmMtMC4yNSwwLjAyLTAuMzUzLDAuMjg3LTAuMzE2LDAuNzg5bDAuNDA2LDAuMzQxYzAuMjkyLDAuNDkxLDAuNDQ4LDAuODU1LDAuNDY2LDEuMTA2DQoJCQljMC4wMTksMC4yNTQtMC4zMTcsMC43ODYtMS4wMTEsMS41OTlsLTEuMTMsMC4wOWMtMC4wMTktMC4yNTEtMC4wNjUtMC44NzktMC4xNDktMS44ODZjLTAuMzE3LTAuNzM1LTAuNDczLTEuMjI0LTAuNDk3LTEuNDc4DQoJCQljLTAuMDM3LTAuNTAyLDAuNDI1LTEuMDQ3LDEuMzg4LTEuNjMybDAuNzI0LTAuNDMybDAuNDY2LDEuMDk3TDEzNC43NzEsMzI1LjQ3MnogTTEzOC4wMzIsMzA0LjMzMQ0KCQkJYy0wLjAxOS0wLjI1MS0wLjI5OS0wLjQ4NC0wLjgyMS0wLjY5NWMtMC41NjItMC43MTItMC44NTQtMS4xOTctMC44NzMtMS40NTRjLTAuMDIzLTAuMjUxLDAuMjk5LTEuMDMzLDAuOTUxLTIuMzUxbDAuMzIyLTAuNzg5DQoJCQljMC44NjgsMS40NjEsMS4zMjksMi40MzEsMS4zNzEsMi45MzNsMC4xNzksMi4yNjdMMTM4LjAzMiwzMDQuMzMxeiBNMTM2LjE3NywyODUuODc2bC0wLjA4OS0xLjEzN2wwLjc1OS0wLjA2MWwwLjA5LDEuMTMNCgkJCUwxMzYuMTc3LDI4NS44NzZ6IE0xMzguNDYyLDI5MC42MjNjLTAuNDksMC4yODgtMC43MTcsMC41NjgtMC42OTksMC44MTZjLTAuNTM4LTAuNDYyLTAuODQ0LTEuMDY2LTAuOTA0LTEuODMybC0wLjA4OC0xLjEzMQ0KCQkJYy0wLjA3OS0wLjk5OSwwLjExNC0xLjc3MSwwLjU3My0yLjMybDEuMTMyLTAuMDljMC4yNzQsMC4yNDEsMC40MjQsMC40NzksMC40NDEsMC43MjlsMC4xNSwxLjg4Ng0KCQkJQzEzOS4xMDgsMjg5LjE3NiwxMzguODk5LDI4OS44MzQsMTM4LjQ2MiwyOTAuNjIzeiBNMTM5LjI4MiwzMDUuNzU2bC0wLjEyLTEuNTE1bDAuNzU0LTAuMDYxbDAuMTIxLDEuNTE1TDEzOS4yODIsMzA1Ljc1NnoNCgkJCSBNMTQzLjYxOSwzMjIuMTE0bC0wLjc4NC0wLjMybC0wLjAzLTAuMzc4bDEuMTYyLDAuMjg3TDE0My42MTksMzIyLjExNHogTTE0NS45NDEsMzMyLjE4NWMtMC41NTItMC40NjEtMS4xMzItMS40MzEtMS43NDctMi45MDENCgkJCWMtMC42MjgtMS40NjUtMC45NTgtMi40NTQtMS0yLjk1NmMtMC4wMTktMC4yNTEsMC4wNjUtMC43NTksMC4yNTctMS41NDVjMC4xNjctMS4wMiwwLjI1LTEuNjY4LDAuMjI4LTEuOTEyDQoJCQljMC44MzEsMC45NDYsMS42NzUsMi4wMTcsMi41MzEsMy4yMmMwLjg2MSwxLjE5LDEuMzE1LDIuMTc3LDEuMzc2LDIuOTI2QzE0Ny42ODgsMzMwLjI3LDE0Ny4xMzYsMzMxLjMyOSwxNDUuOTQxLDMzMi4xODV6DQoJCQkgTTEzNS42MjIsMTU0LjUyNWMtMC4yNTIsMC4wMi0wLjYxNywwLjMwMS0xLjA3OCwwLjg1M2wtMC4zNTMsMC4zOThsMS41Mi0wLjExN0wxMzUuNjIyLDE1NC41MjV6IE0xNDQuMzE5LDI0NC45NjdsLTAuMzcxLDAuMDI5DQoJCQlsMC42MzQtMS41NjFsMC4zODMtMC4wM0wxNDQuMzE5LDI0NC45Njd6IE0xMzguNTQ1LDE1My4xNTFsLTAuNjY0LDEuMTk3bDAuNDA4LDAuMzUxbDAuNjY4LTEuMTk3TDEzOC41NDUsMTUzLjE1MXoNCgkJCSBNMTQ3LjY1OCwyNDMuOTQzYy0wLjIyOCwwLjI3Ny0wLjQ3MywwLjQyMS0wLjcxOSwwLjQzOGwtMS4xNjctMC4yODhjLTAuMDc3LTEsMC4zODQtMS41NDUsMS4zODktMS42MjgNCgkJCWMwLjI1MS0wLjAxNywwLjY0LDAuMDgsMS4xNjcsMC4yODdsMC4zNzYtMC4wM2wwLjA2LDAuNzU2QzE0OC41MywyNDMuNzUzLDE0OC4xNTksMjQzLjkxLDE0Ny42NTgsMjQzLjk0M3ogTTI2Ny44ODcsMTE1LjM2OA0KCQkJYy0xLjAwMy0xLjMzMS0yLjI0Ny0xLjkyOS0zLjc1OC0xLjgwOWMtMS41MTIsMC4xMjEtNi4wOTIsMy4wMjItMTMuNzM0LDguNjkzYy0xMS40ODEsOC41MDUtMjIuNTU1LDE1LjcxNy0zMy4yMjcsMjEuNjI1DQoJCQljLTEwLjY2OSw1LjkxNy0yMS43ODksOS4zMjgtMzMuMzU0LDEwLjI0NGwtMC43ODItMC4zMTFsLTEuNzcyLDEuNjU1bC0yLjAwOS0xLjM1N2wtNS42MjQsMC44MjYNCgkJCWMtNC41MzcsMC4zNTctMTAuNTEyLDAuMDczLTE3LjkxNy0wLjg1Yy02LjY0Ni0wLjc0OS0xMS42LTAuOTc5LTE0Ljg2Ni0wLjcyMmwtMS4xMzIsMC4wODdsMi4wMDQsMS4zNjFsLTAuNjMzLDEuNTc4bDQuMDMyLTEuODQ5DQoJCQlsMS45NzQsMC45ODZsMS40MTctMS4yNTdsMC43ODksMC4zMjRsMC4xMiwxLjUwMWw0LjQzNC0xLjQ4NWwxLjIyNiwxLjAzN2wxLjQ3OC0wLjQ5MWwwLjQxMywwLjM0MWwtMC4yMzIsMS45MjJsMy42ODUtMS40MzgNCgkJCWwxLjU5OCwxLjAxNmwyLjIzNi0wLjU1NWwwLjE1MSwxLjg4NmwzLjY3Ny0xLjQzOGwxLjIyOCwxLjA0NmwyLjkyNi0xLjM3NGwwLjg0MiwxLjA3bDIuOTMzLTEuMzcxbDEuMjIxLDEuMDQzbDEuODMyLTAuODk5DQoJCQlsMS41NjQsMC42MjlsMi41NTUtMS4zNDFsMS4xODksMC42NjZsMi4yMzMtMC41NTVsMC4xNDcsMS44ODJsMi44NDItMi41MDdsMC43ODYsMC4zMjRsMC4xMTYsMS41MDFsMC43NTYtMC4wNmwyLjQ2OC0yLjQ2NA0KCQkJbDAuODY5LDEuNDQ4bDIuNDkxLTIuMDkzbDIuMDM5LDEuNzM1bDIuODA1LTIuODg2bDEuMzQ4LDIuNTUxbDUuMjkzLTQuOTcybDAuODc2LDEuNDQ4bDMuNTg0LTIuNTU0bDEuMTU2LDAuMjg4bDYuMTIyLTMuODkyDQoJCQlsMC45MzMsMi4xOWwzLjQ5LTMuNjc4bDEuMjExLDEuMDRsMy4xODMtMy4yNzZsMC44MzksMS4wNjNsMy45MDktMy43NDVsMS41NDEsMC4yNTdjMC40NjUtMC41MzgsMS4wNDYtMS4yMiwxLjc0OC0yLjA0Ng0KCQkJYzAuNzE2LTAuNTYyLDEuMzExLTEuMTIsMS43NzUtMS42NjJsMC44NjYsMS40NDhsMy40ODMtNC4wNzZsMC41MjEsMS44NTVjMC45My0xLjAzNywyLjM0NC0yLjM0Nyw0LjI0Ni0zLjk0Mg0KCQkJYzEuNjY1LTEuMzQxLDIuNzI5LTIuMjY3LDMuMi0yLjc4MmwwLjgwOSwwLjY1MmwzLjE3LTMuMTM2bDEuMTM0LTAuMDlsMi40ODctMi4xMDZsMS4xNiwwLjI4MWwxLjcwNS0yLjQxbDEuNjMxLDEuMzk0DQoJCQlsMy4xNTMtMy4zMDdsMC44MjIsMC42OTlsMS4wNy0wLjg0OWwxLjE2LDAuMjg4QzI2OS40MjgsMTE4LjA5OSwyNjguODY2LDExNi42NzUsMjY3Ljg4NywxMTUuMzY4eiBNMTY4LjAxNCwyMzIuNDUyDQoJCQljLTEuMjk3LDIuODk2LTIuMjgsNC44NzUtMi45NDksNS45MzVjLTEuMDEsMC4wNzctMi4yMiwwLjgxMi0zLjYxNywyLjE4NGMtMS42MjgsMS45MDgtMy42OTIsMi45NTUtNi4yMSwzLjE1MmwtNC45MDcsMC4zOTINCgkJCWwtMC4wNTgtMC43NTZjLTAuMDI1LTAuMjUxLDAuMTk3LTAuNjM5LDAuNjYzLTEuMTljMC40ODUtMC4yODcsMC43MTItMC41NjgsMC42OTQtMC44MTJsMS4yMiwxLjA0DQoJCQljMC40NjItMC41NDUsMy4wMDMtMi4wMSw3LjYyOC00LjM5NmMyLjY2OC0xLjQ5MSw0LjM2Ni0yLjM4MSw1LjA5Ni0yLjY4OGMwLjcxOS0wLjU2MiwxLjM2NC0yLjAwOSwxLjkzOC00LjMyOQ0KCQkJYzAuNTM1LTIuODI5LDEuNDA0LTQuNjc0LDIuNTk1LTUuNTI3YzAuMjcxLDAuMjMxLDAuNDM1LDAuNjAzLDAuNDc1LDEuMTA3QzE2OS45MDYsMjI3LjYxOCwxNjkuMDQzLDIyOS41ODcsMTY4LjAxNCwyMzIuNDUyeg0KCQkJIE0xNTcuODU2LDI4MS40ODljLTIuMDkzLTAuODQ5LTMuMTc2LTEuNzY5LTMuMjYtMi43ODFjLTAuMDYtMC43NTMsMC4yNzYtMS4yODcsMS4wMTctMS41OTJjMC4yNywwLjIyOCwwLjY4OCwwLjcwMiwxLjI1LDEuNDExDQoJCQljMC41NjMsMC43MjYsMC45ODEsMS4xOTMsMS4yNTgsMS40MjRMMTU3Ljg1NiwyODEuNDg5eiBNMTYxLjUyNCwzMTguMDI5bC0xLjEzNywwLjA5Yy0wLjU4NS0wLjk2My0wLjg5OS0xLjY5MS0wLjkzMy0yLjINCgkJCWMtMC4xMDEtMS4yNTcsMC4zODEtMy4xOTYsMS40MzgtNS44MTFsMC4wODcsMS4xM2MwLjA2LDAuNzU2LDAuMjU3LDEuNjI5LDAuNTg4LDIuNjExYzAuMTAxLDEuMjYxLDAuMTYxLDIuMDE3LDAuMTc4LDIuMjY3DQoJCQlDMTYxLjgyOCwzMTcuMTIsMTYxLjc1MiwzMTcuNzYyLDE2MS 
```

# objective-c - 如何在 iPhone 上进行 Base64 编码

> ID：882277
> 
> 赞同：36
> 
> 时间：2009-05-19T11:52:42.320
> 
> 标签：objective-c, iphone, encoding, base64

如何在 iPhone 上进行 Base64 编码？

我发现了一些看起来很有希望的例子，但永远无法让它们中的任何一个在电话上工作。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-06-28T15:56:18.207

[你可以在这里](http://iosdevelopertips.com/core-services/encode-decode-using-base64.html)看到一个例子。

这适用于 iOS7+。

我在这里复制代码，以防万一：

```
// Create NSData object
NSData *nsdata = [@"iOS Developer Tips encoded in Base64"
  dataUsingEncoding:NSUTF8StringEncoding];

// Get NSString from NSData object in Base64
NSString *base64Encoded = [nsdata base64EncodedStringWithOptions:0];

// Print the Base64 encoded string
NSLog(@"Encoded: %@", base64Encoded);

// Let's go the other way...

// NSData from the Base64 encoded str
NSData *nsdataFromBase64String = [[NSData alloc]
  initWithBase64EncodedString:base64Encoded options:0];

// Decoded NSString from the NSData
NSString *base64Decoded = [[NSString alloc] 
  initWithData:nsdataFromBase64String encoding:NSUTF8StringEncoding];
NSLog(@"Decoded: %@", base64Decoded); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-08-05T04:01:55.003

我也很难找到我能理解的 iPhone 工作代码。

我终于写了这个。

```
-(NSString *)Base64Encode:(NSData *)data;

-(NSString *)Base64Encode:(NSData *)data{

    //Point to start of the data and set buffer sizes
    int inLength = [data length];
    int outLength = ((((inLength * 4)/3)/4)*4) + (((inLength * 4)/3)%4 ? 4 : 0);
    const char *inputBuffer = [data bytes];
    char *outputBuffer = malloc(outLength+1);
    outputBuffer[outLength] = 0;

    //64 digit code
    static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    //Start the count
    int cycle = 0;
    int inpos = 0;
    int outpos = 0;
    char temp;

    //Pad the last to bytes, the outbuffer must always be a multiple of 4.
    outputBuffer[outLength-1] = '=';
    outputBuffer[outLength-2] = '=';

    /* http://en.wikipedia.org/wiki/Base64

        Text content     M         a         n
        ASCII            77        97        110
        8 Bit pattern    01001101  01100001  01101110

        6 Bit pattern    010011    010110    000101    101110
        Index            19        22        5         46
        Base64-encoded   T         W         F         u
    */

    while (inpos < inLength){
        switch (cycle) {

            case 0:
                outputBuffer[outpos++] = Encode[(inputBuffer[inpos] & 0xFC) >> 2];
                cycle = 1;
                break;

            case 1:
                temp = (inputBuffer[inpos++] & 0x03) << 4;
                outputBuffer[outpos] = Encode[temp];
                cycle = 2;
                break;

            case 2:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xF0) >> 4];
                temp = (inputBuffer[inpos++] & 0x0F) << 2;
                outputBuffer[outpos] = Encode[temp];
                cycle = 3;
                break;

            case 3:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xC0) >> 6];
                cycle = 4;
                break;

            case 4:
                outputBuffer[outpos++] = Encode[inputBuffer[inpos++] & 0x3f];
                cycle = 0;
                break;

            default:
                cycle = 0;
                break;
        }
    }
    NSString *pictemp = [NSString stringWithUTF8String:outputBuffer];
    free(outputBuffer);
    return pictemp;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-07T10:45:12.820

使用[此](https://github.com/nicklockwood/Base64/)库对 Base64 进行编码。

它还支持`ARC`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-02T06:27:32.003

试试这个......这对我来说非常有效。创建一个类别 Base64.h 和 Base 64.m，导入到您要使用的任何类并使用单行调用它以进行 base 64 编码。

```
//
//  Base64.h
//  CryptTest
//  Created by SURAJ K THOMAS  on 02/05/2013.

#import <Foundation/Foundation.h>

@interface Base64 : NSObject {

}
+ (void) initialize;
+ (NSString*) encode:(const uint8_t*) input length:(NSInteger) length;
+ (NSString*) encode:(NSData*) rawBytes;
+ (NSData*) decode:(const char*) string length:(NSInteger) inputLength;
+ (NSData*) decode:(NSString*) string;
@end

#import "Base64.h"

@implementation Base64
#define ArrayLength(x) (sizeof(x)/sizeof(*(x)))

static char encodingTable[] = 
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
static char decodingTable[128];

+ (void) initialize {
if (self == [Base64 class]) {
    memset(decodingTable, 0, ArrayLength(decodingTable));
    for (NSInteger i = 0; i < ArrayLength(encodingTable); i++) {
        decodingTable[encodingTable[i]] = i;
    }
}
}

+ (NSString*) encode:(const uint8_t*) input length:(NSInteger) length {
NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
uint8_t* output = (uint8_t*)data.mutableBytes;

for (NSInteger i = 0; i < length; i += 3) {
    NSInteger value = 0;
    for (NSInteger j = i; j < (i + 3); j++) {
        value <<= 8;

        if (j < length) {
            value |= (0xFF & input[j]);
        }
    }

    NSInteger index = (i / 3) * 4;
    output[index + 0] =                    encodingTable[(value >> 18) & 0x3F];
    output[index + 1] =                    encodingTable[(value >> 12) & 0x3F];
    output[index + 2] = (i + 1) < length ? encodingTable[(value >> 6)  & 0x3F] : '=';
    output[index + 3] = (i + 2) < length ? encodingTable[(value >> 0)  & 0x3F] : '=';
}

return [[NSString alloc] initWithData:data
                              encoding:NSASCIIStringEncoding];
}

+ (NSString*) encode:(NSData*) rawBytes {
return [self encode:(const uint8_t*) rawBytes.bytes length:rawBytes.length];
}

+ (NSData*) decode:(const char*) string length:(NSInteger) inputLength {
if ((string == NULL) || (inputLength % 4 != 0)) {
    return nil;
}

while (inputLength > 0 && string[inputLength - 1] == '=') {
    inputLength--;
}

NSInteger outputLength = inputLength * 3 / 4;
NSMutableData* data = [NSMutableData dataWithLength:outputLength];
uint8_t* output = data.mutableBytes;

NSInteger inputPoint = 0;
NSInteger outputPoint = 0;
while (inputPoint < inputLength) {
    char i0 = string[inputPoint++];
    char i1 = string[inputPoint++];
    char i2 = inputPoint < inputLength ? string[inputPoint++] : 'A'; /* 'A' will   
decode to \0 */
    char i3 = inputPoint < inputLength ? string[inputPoint++] : 'A';

    output[outputPoint++] = (decodingTable[i0] << 2) | (decodingTable[i1] >> 4);
    if (outputPoint < outputLength) {
        output[outputPoint++] = ((decodingTable[i1] & 0xf) << 4) |   
(decodingTable[i2] >> 2);
    }
    if (outputPoint < outputLength) {
        output[outputPoint++] = ((decodingTable[i2] & 0x3) << 6) |   
decodingTable[i3];
    }
}

return data;
}

+ (NSData*) decode:(NSString*) string {
return [self decode:[string cStringUsingEncoding:NSASCIIStringEncoding]   
length:string.length];
} 
```

@结尾

```
now import the above category to any class and convert the string like below

 NSString *authString = [[NSString stringWithFormat:@"OD0EK819OJFIFT6OJZZXT09Y1YUT1EJ2"]   
stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSData *inputData = [authString dataUsingEncoding:NSUTF8StringEncoding];

NSString *finalAuth =[Base64 encode:inputData];
NSLog(@"Encoded string =%@", finalAuth); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-23T10:47:32.140

[从GitHub](https://github.com/nicklockwood/Base64/tree/master/Base64)下载以下两个文件

```
Base64.h
Base64.m 
```

将这些文件添加到您的项目中

在所需文件中导入头文件

```
#import "Base64.h" 
```

并使用 as 进行编码

```
NSString *plainText = @"Your String";

NSString *base64String = [plainText base64EncodedStringWithWrapWidth:0]; 
```

您也可以将其解码为

```
NSString *plainText = [base64String base64DecodedString]; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-31T20:29:50.793

[参考](http://www.ios-blog.co.uk/tutorials/objective-c/base64-decoding-in-ios-7-objective-c-and-ios8-swift/)

```
NSString *plainString = @"foo"; 
```

编码

```
NSData *plainData = [plainString dataUsingEncoding:NSUTF8StringEncoding];
NSString *base64String = [plainData base64EncodedStringWithOptions:0];
NSLog(@"%@", base64String); // Zm9v 
```

解码

```
NSData *decodedData = [[NSData alloc] initWithBase64EncodedString:base64String options:0];
NSString *decodedString = [[NSString alloc] initWithData:decodedData encoding:NSUTF8StringEncoding];
NSLog(@"%@", decodedString); // foo 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-04T20:31:50.580

似乎从 iOS 7 开始，您不再需要任何库以使用 Base64 进行编码。[NSData](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)上的以下方法可用于 Base64 编码：

*   base64EncodedDataWithOptions: – base64EncodedStringWithOptions:

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-07T10:55:33.373

`NSData`类别中的方法

```
- (NSString*)encodeBase64 {    
    static char* alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    unsigned int length = self.length;
    unsigned const char* rawData = self.bytes;

    //empty data = empty output
    if (length == 0) {
        return @"";
    }

    unsigned int outputLength = (((length + 2) / 3) * 4);

    //let's allocate buffer for the output
    char* rawOutput = malloc(outputLength + 1);

    //with each step we get 3 bytes from the input and write 4 bytes to the output
    for (unsigned int i = 0, outputIndex = 0; i < length; i += 3, outputIndex += 4) {
        BOOL triple = NO;
        BOOL quad = NO;

        //get 3 bytes (or only 1 or 2 when we have reached the end of input)
        unsigned int value = rawData[i];
        value <<= 8;

        if (i + 1 < length) {
            value |= rawData[i + 1];
            triple = YES;
        }

        value <<= 8;

        if (i + 2 < length) {
            value |= rawData[i + 2];
            quad = YES;
        }

        //3 * 8 bits written as 4 * 6 bits (indexing the 64 chars of the alphabet)
        //write = if end of input reached
        rawOutput[outputIndex + 3] = (quad) ? alphabet[value & 0x3F] : '=';
        value >>= 6;
        rawOutput[outputIndex + 2] = (triple) ? alphabet[value & 0x3F] : '=';
        value >>= 6;
        rawOutput[outputIndex + 1] = alphabet[value & 0x3F];
        value >>= 6;
        rawOutput[outputIndex] = alphabet[value & 0x3F];
    }

    rawOutput[outputLength] = 0;

    NSString* output = [NSString stringWithCString:rawOutput encoding:NSASCIIStringEncoding];

    free(rawOutput);

    return output;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-18T09:28:20.967

我做了自己的实现，其中已删除循环内的所有检查。因此，在大量数据上，它的工作速度更快。您可以将其作为自己解决方案的基础。

```
static char *alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

+ (NSString *)encodeString:(NSString *)data
{
    const char *input = [data cStringUsingEncoding:NSUTF8StringEncoding];
    unsigned long inputLength = [data length];
    unsigned long modulo = inputLength % 3;
    unsigned long outputLength = (inputLength / 3) * 4 + (modulo ? 4 : 0);
    unsigned long j = 0;

    // Do not forget about trailing zero
    unsigned char *output = malloc(outputLength + 1);
    output[outputLength] = 0;

    // Here are no checks inside the loop, so it works much faster than other implementations
    for (unsigned long i = 0; i < inputLength; i += 3) {
        output[j++] = alphabet[ (input[i] & 0xFC) >> 2 ];
        output[j++] = alphabet[ ((input[i] & 0x03) << 4) | ((input[i + 1] & 0xF0) >> 4) ];
        output[j++] = alphabet[ ((input[i + 1] & 0x0F)) << 2 | ((input[i + 2] & 0xC0) >> 6) ];
        output[j++] = alphabet[ (input[i + 2] & 0x3F) ];
    }
    // Padding in the end of encoded string directly depends of modulo
    if (modulo > 0) {
        output[outputLength - 1] = '=';
        if (modulo == 1)
            output[outputLength - 2] = '=';
    }
    NSString *s = [NSString stringWithUTF8String:(const char *)output];
    free(output);
    return s;
} 
```

# javascript - 所有 AJAX 框架与 AJAX 有什么关系？

> ID：882290
> 
> 赞同：0
> 
> 时间：2009-05-19T11:55:23.937
> 
> 标签：javascript, xml, ajax, frameworks, xmlhttprequest

随着 Web 上 AJAX 应用程序的兴起，我编写了一些自己的代码来了解它的含义。我知道肯定有比直接处理 XMLHttpRequest 对象更简单的方法，我认为这就是创建所有 AJAX 框架的原因。

但是，当我查看其中的一些时，我主要发现了有关如何创建视觉效果以及如何轻松操作 DOM 树的文档。我不明白他们为什么称自​​己为 AJAX 框架，因为我认为 AJAX 框架可以帮助我管理发送 HTTP 请求和处理响应。

我错过了重点吗？这些框架是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T12:01:06.110

从服务器取回数据后，您将希望以某种方式显示它。明智的做法是通过 DOM 操作。大多数使用 AJAX 的人这样做是因为他们想将静态网页变成动态的可视化应用程序。因此注重视觉效果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-19T12:02:53.970

YUI 说：

> YUI 库是一组用 JavaScript 编写的实用程序和控件，用于使用 DOM 脚本、DHTML 和 AJAX 等技术构建丰富的交互式 Web 应用程序。

jQuery 说：

> jQuery 是一个快速而简洁的 JavaScript 库，它简化了 HTML 文档遍历、事件处理、动画和 Ajax 交互，以实现快速的 Web 开发。

MooTools 说：

> MooTools 是一个紧凑、模块化、面向对象的 JavaScript 框架，专为中高级 JavaScript 开发人员设计。

Prototype.js 说：

> Prototype 是一个 JavaScript 框架，旨在简化动态 Web 应用程序的开发。

因此，我想到的前四个框架都没有将自己描述为“Ajax 框架”。

听起来中国耳语效应刚刚导致无知的第三方向您错误地描述它们。与 DHTML 一样，Ajax 一词已经吸引了大量使用它来表示“JavaScript”而不是其实际含义的人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T12:06:21.733

**不是 Ajax 框架，而是 Javascript 库，**
我想你写错了他们的名字。与其说“Ajax 框架”，不如说“Javascript（或客户端）库”，因为它们提供的不仅仅是纯粹的 XHR 处理。多少？取决于图书馆。所有通用库都支持 DOM 遍历/操作和 Ajax。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T12:03:24.093

在“AJAX”一词被发明后不久，它的定义就扩大到了“使用 HTML 和 JavaScript 创建的丰富用户界面”的意思。这是错误的，但它就在那里。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T12:04:15.513

大多数框架，如[Prototype](http://www.prototypejs.org/ "原型")、[JQuery](http://jquery.com/ "jQuery")基本上都是“JavaScript 框架”而不是“Ajax 框架”。它们提供了包装方法，可以更轻松、更优雅地执行 Ajax 操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T12:03:13.050

没有开发任何 AJAX 框架，我只能说 AJAX 本身并不能成为一个非常有用的客户端应用程序。当您开始添加代码以支持自动填充来自 AJAX 调用的响应时，为什么要停在那里？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T12:08:19.077

不能代表其他框架，但 YUI deos 使使用 AJAX 变得容易 - 请参阅此页面 [http://developer.yahoo.com/yui/connection/](http://developer.yahoo.com/yui/connection/)

# xslt - 防止 xslt 处理器删除两个 XSLT 元素之间的空格

> ID：882292
> 
> 赞同：1
> 
> 时间：2009-05-19T11:55:27.510
> 
> 标签：xslt, whitespace

我的问题与其他问题有点不同..

我有一个这样的 xsl 代码：

```
<xsl:value-of select="..."/>    <xsl:value-of select="..."> 
```

我想要的结果是：

```
result_of_select_1    result_of_select_2 
```

我得到的是：

```
result_of_select_1result_of_select_2 
```

我怎样才能防止这种情况？（例如任何 xsl:output 选项？）

我发现的所有其他解决方案都是专门针对同一个问题的，但是在 XML-Source 文档中，而不是在 XSLT 文档中，比如这个......

顺便提一句。像“插入元素而不是空格”这样的解决方案对我来说不是一个可能的解决方案，因为 xslt 代码是动态生成的

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:17:33.223

你所拥有的空白是微不足道的，会被丢弃。如果不是这种情况，那么您在 XSLT 代码中的*最后一点*空白都会出现在结果文档中。您必须明确说明结果中所需的空白。

用户：

```
<xsl:value-of select="concat(..., '    ', ...)" /> 
```

或者：

```
<xsl:value-of select="..." />
<xsl:text>    </xsl:text>
<xsl:value-of select="..." /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T12:02:16.217

利用：

```
<xsl:value-of select="..."/><xsl:text>&#32;</xsl:text><xsl:value-of select="..."> 
```

编辑：

有关其他符号，请参阅此[ASCII 表](http://www.asciitable.com/)

# vim - 用 sed 或 awk 枚举替换

> ID：882293
> 
> 赞同：3
> 
> 时间：2009-05-19T11:55:28.820
> 
> 标签：vim, sed, awk, enumeration, substitution

给定带有行的纯文本文件

```
bli foo bla
 abc
 dfg
bli foo bla
 hik
 lmn 
```

sed 或 awk 魔法将其转换为什么

```
bli foo_01 bla
 abc
 dfg
bli foo_02 bla
 hik
 lmn 
```

这样每次出现的 'foo' 都会被 'foo_[occurence number]' 替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T13:31:50.653

```
awk '!/foo/||sub(/foo/,"&_"++_)' infile 
```

在*Solaris*上使用*gawk*、*nawk*或*/usr/xpg4/bin/awk*。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T12:17:52.270

这可能不是您所需要的，但它可能会在正确的方向上给出一些想法。

```
Administrator@snadbox3 ~
$ cd c:/tmp

Administrator@snadbox3 /cygdrive/c/tmp
$ cat <<-eof >foo.txt
> foo
>  abc
>  dfg
> foo
>  hik
>  lmn
> eof

Administrator@snadbox3 /cygdrive/c/tmp
$ awk '/^foo$/{++fooCount; print($0 "_" fooCount);} /^ /{print}' foo.txt
foo_1
 abc
 dfg
foo_2
 hik
 lmn 
```

* * *

**编辑：**

我又迟到了一天，又少了一分钱；-(

* * *

**编辑2：**

字符编码是另一件需要注意的事情...Java 源代码不一定是系统默认编码...它退出 UTF-8 编码，以允许任何嵌入的“高阶实体”;-) 许多 *nix 实用程序仍然不支持字符集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T19:47:45.010

这是表达 radoulov 答案的另一种方式

```
awk '/foo/ {sub(/foo/, "&_" sprintf("%02d",++c))} 1' infile 
```

在查找“foo”时，您应该注意不要匹配“foobar”：

```
gawk '/\<foo\>/ {sub(/\<foo\>/, "&_" sprintf("%02d",++c))} 1' 
```

# maven-2 - maven编译错误：重复的类

> ID：882295
> 
> 赞同：19
> 
> 时间：2009-05-19T11:57:08.647
> 
> 标签：maven-2, maven-plugin

在我的 maven2 项目中，我有一个目录`${basedir}/autogen`，其中包含一些由`wsdl2java`.

运行时`mvn compile`，由于存在重复的类，我得到一个编译错误`${basedir}/autogen`。这是真实的。但是编译阶段在做什么`${basedir}/autogen`呢？我没有告诉 maven 将此目录添加为源目录。而且似乎没有办法告诉 maven 忽略该目录。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2011-09-19T08:04:21.230

我在使用maven-processor-plugin的时候遇到了同样的问题，发现解决方法是配置maven-compiler插件如下：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArgument>-proc:none</compilerArgument>
            </configuration>
        </plugin> 
```

-proc:none 表示编译发生时没有注释处理，因此没有重复的类（通常在 generate-sources 阶段生成）

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T20:48:06.030

我已经看过几次了。在几乎所有情况下，这是由于生成的类被添加到主 src 树然后检查到版本控制中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-18T12:03:11.813

就我而言，它在我更改源目录时起作用。

新的 POM 看起来像，

```
<build>
        <sourceDirectory>src</sourceDirectory> 
```

仅指向带有 sourceDirectory 标记的 src 文件夹。

早些时候是

```
 <build>
    <sourceDirectory>.</sourceDirectory> 
```

请注意，之前它在 IntellIJ 中工作，但不在 cmd 上。现在它适用于两者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-12T16:33:54.300

我有完全相同的问题。就我而言，问题是我用`-f=./pom.xml`. 我不知道为什么这会导致不同的结果（如果有人可以解释会很好）但可能很高兴知道其他人是否有同样的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-11-19T07:33:06.077

JPA 模型生成器也有类似的问题。它发生在这种依赖关系上：

```
<dependency>
    <groupId>org.eclipse.persistence</groupId>
    <artifactId>org.eclipse.persistence.jpa.modelgen</artifactId>
    <version>2.1.1</version>
</dependency> 
```

我错误地添加了 scope=provided 并导致：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on project mocker: Compilation failure: Compilation failure:
[ERROR] \Projects\entity\MockVehicle_.java:[10,7] duplicate class: entity.MockVehicle_ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-24T14:03:15.743

我通过从我的 pom.xml 中删除 generateAsync 来解决它，GWT 插件看起来像

```
 <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>${gwtVersion}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>test</goal>
                            <!-- <goal>i18n</goal> -->

                        </goals>
                    </execution>
                </executions> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T12:04:39.410

很难更改默认的 maven 行为，我认为最好使用它 - 您可以使用 maven [wsdl2java-maven-plugin生成这些文件](http://mojo.codehaus.org/wsdl2java-maven-plugin/howto.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-27T13:49:44.750

这里的所有答案都没有帮助。这可能是正确的答案：

另一位 StackOverflow 用户写道：

> 我发现 JetBrains 团队成员的评论指出：
> 
> > IDEA 会自动排除 build 'target' 文件夹，前提是它下面没有生成的源，否则它会排除除生成的所有子文件夹之外的所有子文件夹。

`generated-sources`文件夹中的标准 Avro 。maven 不会忽略此文件夹，因为其中生成的类将被视为重复。默认情况下，Maven 只会忽略该`target`文件夹。

要修复在以下添加此行`pom.xml`：

```
 <sourceDirectory>${project.basedir}/src/main/target/resources/avro</sourceDirectory> 
```

语境：

```
 <groupId>org.apache.avro</groupId>
                <artifactId>avro-maven-plugin</artifactId>
                <version>${avro.version}</version>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>schema</goal>
                            <goal>protocol</goal>
                            <goal>idl-protocol</goal>
                        </goals>
                        <configuration>
                            <sourceDirectory>${project.basedir}/src/main/target/resources/avro</sourceDirectory>
                            <stringType>String</stringType>
                            <createSetters>false</createSetters>
                            <outputDirectory>${project.basedir}/target/</outputDirectory><enableDecimalLogicalType>true</enableDecimalLogicalType>
                            <fieldVisibility>private</fieldVisibility>
                        </configuration>
                    </execution>
                </executions> 
```

这会将文件夹放在`generated-resources`文件夹下`target`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-03T11:00:53.797

我的情况对此有所帮助：

```
<!-- https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api -->
<dependency>
    <groupId>javax.annotation</groupId>
    <artifactId>javax.annotation-api</artifactId>
    <version>1.3.2</version>
</dependency> 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-04-01T13:29:09.433

我解决了同样的问题

> 1.  清洁 Maven 项目：-`mvn clean`
> 2.  从 src 中删除 com 文件夹然后编译
> 3.  将 com 从生成的复制到 src->main-->java
> 4.  再次编译

希望这个帮助..

# wpf - 我想要一个 wpf 应用程序在我插入时检测 USB 或 cd 驱动器

> ID：882298
> 
> 赞同：0
> 
> 时间：2009-05-19T11:57:22.110
> 
> 标签：wpf, c#-3.0

我创建了带有一些图像的列表框的 wpf 应用程序。现在我想要的是，如果我将 USB 或 cd 插入具有一些图像的系统中，我的应用程序必须在我插入具有图像的 USB 或 cd 后自动启动，并且应用程序必须询问是否默认将这些 USB 或 cd 图像添加到应用程序中.

任何源代码请...任何建议也...

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T12:02:55.983

您可以调查：

1.  [SharpUSBLib](http://www.icsharpcode.net/OpenSource/SharpUSBLib/default.aspx)

2.  [用于 C# 的 USB HID 组件](http://www.codeproject.com/KB/cs/USB_HID.aspx)

3.  [检测 CD-ROM 插入](http://en.csharp-online.net/Detect_CD-ROM_Insertion)

4.  [如何在 C# 中检测 CD 驱动器？](http://www.discussweb.com/c-programming/4201-how-detect-cd-drive-c.html)

# css - CSS display:block 问题，谁是 IE 或 Firefox 的罪魁祸首？

> ID：882304
> 
> 赞同：0
> 
> 时间：2009-05-19T11:58:42.403
> 
> 标签：css

我很难弄清楚为什么 IE 和 Firefox 看起来如此不同。这是一个CSS类

```
.logo { width: 224px; height: 120px; position: relative;
    display:block; left: -1px; background-image: url(logo.png);} 
```

在 IE 中，这按预期工作，但在 Firefox 中，它表现得像个醉汉！我在页面的不同位置看到 3 个 logo.png。如果我删除 display:block，那么我在任一浏览器中都看不到图像。

任何意见表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T12:00:27.250

您可能需要添加

```
background-repeat: none; 
```

到你的 CSS 类。为了将来参考，总是 IE 搞砸了；）

**编辑：**如果这不能解决您的问题，请在我们可以查看并进行一些实验的地方放置一个示例站点。此外，[Firebug](https://addons.mozilla.org/en-US/firefox/addon/1843)可能会有所帮助。

**EDIT2：**删除了这个，因为我注意到了萤火虫和我通过右键单击并选择“查看源代码...”得到的 src 之间的区别

**EDIT3：**史蒂夫发现了你的问题：你不能自我关闭锚。改变

```
<a href="/" id="logo" /> 
```

至

```
<a href="/" id="logo"></a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T12:36:08.800

您的问题出在 HTML 中。你不能自己关闭A标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T12:04:34.543

正确，问题始终是IE。如果 Firefox 有问题，通常是 w3c 规范的问题。不是粉丝，事情就是这样。

我猜你的问题是背景重复的默认值在浏览器之间是不同的。您应该尝试设置 background-repeat:no-repeat 编辑：也许不是，所有浏览器都默认重复。

了解您将徽标应用于哪个元素会很有用。不管它是什么，当不是一个块时，它可能会塌陷到 0px 的高度。在它上面加上一个边框，看看那里发生了什么。

# java - Swing：如何读取组件下方的图形信息？

> ID：882307
> 
> 赞同：1
> 
> 时间：2009-05-19T11:59:31.043
> 
> 标签：java, user-interface, swing, graphics, effects

我如何“读取”**组件下方的**图形信息 （比如说**BufferedImage**）？

我想让该组件半透明（已经完成）并对底层内容应用图形效果，例如模糊该组件下的所有元素（**但不是组件本身**）。

我的方法可能是错误的：我尝试从**Paint(...)**
方法 中提供给我的 Graphics2D 实例获取图形信息，但它是空的，对吗？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:02:29.330

问题：您的组件是顶层的（即，您想知道 JFrame 下的桌面上有什么），还是只想知道组件下方的组件？

[`java.awt.Robot`](http://java.sun.com/javase/6/docs/api/java/awt/Robot.html)如果是1)，那么用方法截屏就很简单了[`createScreenCapture(Rectangle)`](http://java.sun.com/javase/6/docs/api/java/awt/Robot.html#createScreenCapture(java.awt.Rectangle))；在这种情况下，`Rectangle`应该是你的窗口边界。

如果是 2)，那么如果你有一个对下面组件的引用，你可以利用[`paint(Graphics)`](http://java.sun.com/javase/6/docs/api/java/awt/Component.html#paint(java.awt.Graphics))不关心`Graphics`对象来自哪里的事实。您可以创建一个`BufferedImage`，调用[`createGraphics()`](http://java.sun.com/javase/6/docs/api/java/awt/image/BufferedImage.html#createGraphics())（如果需要 a `Graphics2D`），并将结果传递给`paint(Graphics)`您要捕获的组件的方法。
注意，如果组件是一个容器，它也会绘制它的孩子；这可能是也可能不是你想要的。

# wmi - WMI 事件 Win32_VolumeChangeEvent 是否适用于 Windows XP

> ID：882326
> 
> 赞同：0
> 
> 时间：2009-05-19T12:03:16.263
> 
> 标签：wmi, usb

我正在尝试使用以下 c# 代码来检测 USB 大容量存储设备的附加/删除事件。我正在使用 Win32_VolumeChangeEvent。

```
 // Initialize an event watcher and subscribe to events that match this query            
var _watcher = new ManagementEventWatcher("select * from Win32_VolumeChangeEvent");
_watcher.EventArrived += OnDeviceChanged;
_watcher.Start(); 
```

```
 void OnDeviceChanged(object sender, EventArrivedEventArgs args)
{
    Console.WriteLine(args.NewEvent.GetText(TextFormat.Mof));
} 
```

问题是这在 Vista 上运行良好，但在 XP 上根本无法运行（没有收到任何事件）。微软文档说这应该可以工作（[http://msdn.microsoft.com/en-us/library/aa394516(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa394516(VS.85).aspx)）。我用谷歌搜索了一段时间，发现其他也有这个问题。但我也发现了几篇文章声称这种查询（主要在 vbscript 中）适用于 XP。但是我无法从微软那里找到一些关于这个问题的官方信息，而且我不敢相信微软已经忽略了三个服务包的这个问题。

所以我的问题是：是否有人在 XP 上成功使用了 Win32_VolumeChangeEvent，或者可以提供链接/解释为什么它不应该在 XP 上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-21T13:33:42.950

正如您在自己的[链接](http://msdn.microsoft.com/en-us/library/aa394516%28VS.85%29.aspx)中看到的那样，支持的最低客户端版本`Win32_VolumeChangeEvent`是 Windows Vista。无论如何，正如[这里](http://go4answers.webhost4life.com/Example/registered-event-detect-usb-insertion-85299.aspx)所建议的，您可以在范围内的间隔内执行查询`root\\CIMV2`。这是我的代码中的一个示例：

```
WqlEventQuery query;
ManagementScope scope;
ManagementEventWatcher watcher;
public void DoWork()
{
    // Check if OS Version is earlier than Windows Vista
    if (USBHandlerWorker.OSVersion() <= 6)
    {
        scope = new ManagementScope("root\\CIMV2");
        scope.Options.EnablePrivileges = true;

        query = new WqlEventQuery();
        query.EventClassName = "__InstanceCreationEvent";
        query.WithinInterval = new TimeSpan(0, 0, 1);
        query.Condition = @"TargetInstance ISA 'Win32_USBControllerdevice'";

        watcher = new ManagementEventWatcher(scope, query);
        watcher.EventArrived += watcher_EventArrived;
        watcher.Start();  
    }
    else
    {
        watcher = new ManagementEventWatcher();
        // The event types 2 and 3 are for plug and unplug events
        query = new WqlEventQuery("SELECT * FROM Win32_VolumeChangeEvent " +
            "WHERE EventType = 2 OR EventType = 3");
        watcher.EventArrived += watcher_EventArrived;
        watcher.Query = query;
        watcher.Start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:26:30.443

“Win32_VolumeChangeEvent .. 仅在 Windows Server 2003 上找到”-[来源](http://www.microsoft.com/technet/scriptcenter/resources/qanda/feb06/hey0213.mspx)

# c# - 对象池框架

> ID：882336
> 
> 赞同：2
> 
> 时间：2009-05-19T12:05:24.043
> 
> 标签：c#, multithreading, object-pooling

对 C# 对象池框架有什么建议吗？要求是多线程支持和池大小限制，当一个线程请求一个对象但没有可用的对象时，它会被阻塞，直到其他对象之一被释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T12:21:46.600

我不认为有一个框架可以为你做到这一点。

不过，您可以用少量代码自己实现。（1 类，约 20 行代码）

[在此处](http://blogs.msdn.com/toub/archive/2006/04/12/blocking-queues.aspx)查看 MSDN 文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-14T22:35:47.867

尝试企业服务命名空间：

[http://msdn.microsoft.com/en-us/library/system.enterpriseservices.aspx](http://msdn.microsoft.com/en-us/library/system.enterpriseservices.aspx)

根据您的需要，这可能会为您解决问题。

# java - 休眠“PreInsertEvent.getSource()”NoSuchMethodError

> ID：882338
> 
> 赞同：2
> 
> 时间：2009-05-19T12:05:29.050
> 
> 标签：java, hibernate, maven-2

我在尝试插入时收到以下错误：

> java.lang.NoSuchMethodError : org.hibernate.event.PreInsertEvent.getSource()Lorg/hibernate/event/EventSource；

由于休眠罐子不兼容，我见过[其他](http://drglennn.blogspot.com/2008/10/hibernate-preinserteventgetsource.html)人遇到同样的问题，但我相信我做对了（根据[兼容性矩阵](https://www.hibernate.org/6.html#A3)）

这是我的 pom.xml 中的相关部分：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.4.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.3.0.ga</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>3.1.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.4.0.GA</version>
    </dependency> 
```

任何人都可以建议吗？

问候

马蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T17:48:16.363

我找到了一个解决方案，但我不确定它是否正确——任何有更好的人，请指教：

添加了对 cglib 的引用，并明确排除了 hibernate（包括 3.2）

```
 <dependencies>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.3</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.4.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.3.0.ga</version>
        <exclusions>
            <exclusion>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>3.1.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.4.0.GA</version>
    </dependency>

    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.3</version>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-08-17T15:12:18.047

这是一个已知的错误：[https](https://hibernate.onjira.com/browse/HVAL-81) ://hibernate.onjira.com/browse/HVAL-81 。当您引用比核心版本更旧的休眠验证器时，就会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:35:41.643

发生此错误时对我来说的实际问题是

1.  Hibernate-core 依赖项不在我的 EAR 包装中。

2.  默认情况下，它选择 jboss.4.2.3/.../lib 的 hibernate3.jar。

3.  只需将 hibernate-core-3.3.1.GA 添加到我在 EAR 打包中的依赖项列表中。

4.  已经在 jboss-app.xml 中设置了加载程序的覆盖。

5.  从 hibernate-entitymanager-3.4.0.GA 中排除了 hibernate-core（不要认为这是必需的，因为提供的核心将是 3.3.0.SP1 并且无论如何都会被省略）。

它可以排除一些已经存在的 xml-apis、ejb3-persistence 等来自 hibernate-core 的依赖项。

最后核心依赖看起来像这样。

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.1.GA</version>
          <exclusions>
            <exclusion>
                <artifactId>ejb3-persistence</artifactId>
                <groupId>org.hibernate</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jta</artifactId>
                <groupId>javax.transaction</groupId>
            </exclusion>
            <exclusion>
                <artifactId>persistence-api</artifactId>
                <groupId>javax.persistence</groupId>
            </exclusion>
            <exclusion>
                <groupId>xml-apis</groupId>
                <artifactId>xml-apis</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

*注意：我认为不需要 cglib，因为它与此上下文无关。*

希望这对某人有用。

# oop - 在基类中实现 Clone() 方法

> ID：882339
> 
> 赞同：0
> 
> 时间：2009-05-19T12:05:32.623
> 
> 标签：oop, constructor, clone, platform-agnostic

这是`Clone()`我的班级的一个实现：

```
 MyClass^ Clone(){
        return gcnew MyClass(this->member1, this->member2);
    } 
```

现在我有大约 10 个类派生自`MyClass`. 每种情况下的实现都是相同的。由于`gcnew`在每种情况下我都需要使用实际的类名进行调用，因此我需要创建 10 个几乎相同的`Clone()`.

`Clone()`有没有办法在基类中编写一个方法来服务所有 10 个派生类？

**编辑：**有没有办法通过其中一个对象调用类的构造函数？以某种方式调用实际的派生类构造函数。就像是：

```
MyClass ^obj2 = obj1->Class->Construct(arg1, arg2); 
```

我在 C++/CLI 上执行此操作，但欢迎使用其他语言的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T12:46:13.557

在普通的旧 C++ 中，您可以使用编译时多态性（奇怪地重复出现的模板模式）来做到这一点。假设您的派生类是可复制的，您可以编写：

```
 class Base
{
public:
    virtual Base* Clone() const = 0;
//etc.
};
template <typename Derived>
class BaseHelper: public Base
{
    //other base code here

    //This is a covariant return type, allowed in standard C++
    Derived * Clone() const
    {
         return new Derived(static_cast<Derived *>(*this));
    }
}; 
```

然后像这样使用它：

```
 class MyClass: public BaseHelper<MyClass>
{
    //MyClass automatically gets a Clone method with the right signature
}; 
```

请注意，您不能再次从类派生并使其无缝工作 - 您必须“设计”选项以通过模板中间类再次派生，或者重新开始重写`Clone`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:27:57.553

我建议改用复制构造函数（因为派生类也可以调用基实现的复制构造函数）——也很方便，因为它是 C++ 程序员熟悉的领域。

在此实例中，您也许可以创建一个使用反射调用自身复制构造函数的克隆方法。

可能还值得注意的是，Jeffrey Richter 在《框架设计指南》一书中说：“ICloneable 接口是一个非常简单的抽象示例，它带有一个从未明确记录过的契约。某些类型实现了这个接口的`Clone`方法，以便它执行一个浅拷贝对象，而一些实现执行深度复制。因为这个接口的`Clone`方法应该做的事情从来没有完全记录，当使用具有实现类型的对象时`ICloneable`，你永远不知道你会得到什么。**这使得接口无用**“ （强调我的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:12:09.677

不是我知道的C++。正如您所说，您需要在 Clone() 的每个实现中创建不同类的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T12:19:19.693

嗯，我想你可以在这里使用工厂模式。IE：

```
MyClass Clone(){
    return MyClassFactory.createInstance(this.getClass(), this.member1, this.member2, ...);
} 
```

在工厂中，您必须根据传递的类类型创建子类的实例。因此，它可能与您的方法具有相同的缺点。

# ubuntu - 在 EC2 上运行 apt-get 无需支付大量带宽费用

> ID：882341
> 
> 赞同：11
> 
> 时间：2009-05-19T12:05:43.760
> 
> 标签：ubuntu, amazon-ec2, apt-get

我在 EC2 上运行 Ubuntu（使用 alestic 社区 AMI），并且在启动时我的新实例会占用大量运行 apt-get upgrade 等的带宽。EC2 实例之间的带宽是免费的......任何人都知道是否有镜像我可以在 EC2 上的某个地方使用 Ubuntu 软件包吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-19T12:16:26.330

我不确定是否有官方的，但 Right Scale 为 ec2 的其他用户提供了一个存储库：

[http://www.rightscale.com/](http://www.rightscale.com/)

**ec2-hardy-sources.list**

```
deb http://ec2-us-east-mirror.rightscale.com/ubuntu hardy main restricted universe multiverse 
deb http://ec2-us-east-mirror.rightscale.com/ubuntu hardy-updates main restricted universe multiverse 
deb http://security.ubuntu.com/ubuntu hardy-security main restricted universe multiverse 
```

**ec2-intrepid-sources.list**

```
deb http://ec2-us-east-mirror.rightscale.com/ubuntu intrepid main restricted universe multiverse 
deb http://ec2-us-east-mirror.rightscale.com/ubuntu intrepid-updates main restricted universe multiverse 
deb http://security.ubuntu.com/ubuntu intrepid-security main restricted universe multiverse **strong text** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T12:14:20.267

结帐[http://ec2-us-east-mirror.rightscale.com/ubuntu/](http://ec2-us-east-mirror.rightscale.com/ubuntu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T20:20:56.147

Alestic.com 上发布的 Ubuntu Hardy、Intrepid 和（很快）Jaunty 镜像已经在 EC2 内部使用了 Ubuntu 存档镜像。

# html - 网页中心内容

> ID：882344
> 
> 赞同：5
> 
> 时间：2009-05-19T12:06:38.283
> 
> 标签：html, css

我想将网页的文本和内容“居中”。现在我不想将文本居中对齐，我仍然想要左对齐，但我想要在左右两边留出明显的边距，这样一切看起来都相对居中。你能告诉我实现这一目标的 HTML/CSS 吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T12:09:42.163

```
<html>
<head>
<style type="text/css">

body {
   text-align: center; /* Center in IE */
}

#content {
   text-align: left; /* reset text-align for IE */
   margin: 0 auto; /* Center in other browsers */
   width: 800px;
}

html {
   overflow: -moz-scrollbars-vertical; /* Force vertical scrollbar in FF */
}

</head>
<body>
<div id="content">

   content here

</div>
</body>
</html> 
```

***更新：**根据下面的一些评论，我添加了一些在 FF 中强制垂直滚动条的 CSS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T12:09:37.560

在您的页面上创建 3 列。您的所有文本都在中心列中，并且可以左对齐。

看看这里的例子[http://matthewjamestaylor.com/blog/perfect-3-column.htm](http://matthewjamestaylor.com/blog/perfect-3-column.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T12:08:41.213

```
#wrapper {
    width: 800px;
    margin: 0 auto; 
 }

<div id="wrapper">
     <p>This will appear in a centered container</p>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T12:09:01.243

我相信[这](http://simplebits.com/notebook/2004/09/08/centering.html)可能会对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T12:09:25.547

CSS：

```
#container {
    max-width: 800px;
    margin: 0 auto;
} 
```

在 HTML 中，将所有内容包装在：

```
<div id='container'>
...
</div> 
```

（请注意，这个答案与 meep 的不同之处在于我`max-width`用来提供 800 像素以下的流畅布局，而他`width`用来提供固定布局。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T12:09:41.773

尝试

```
#div {
  margin:0 auto
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T12:10:21.257

有一个容器 div，您可以在其中放置所有内容：

```
<html>
<head>
    <title>a sample</title>
</head>
<body>
    <div id="container">
         <h1>this is it</h1>
         <p>all content goes here</p>
    </div>
</body> 
```

然后添加一些 css 指定容器 div 的宽度和边距：

```
#container {
    width: 750px;
    margin: 0 auto;
} 
```

# jquery - JQuery：如果另一个标签为空，则显示/隐藏html标签

> ID：882347
> 
> 赞同：1
> 
> 时间：2009-05-19T12:07:30.217
> 
> 标签：jquery

这是我第一次在这里发帖，我有一个问题，我从高处和低处搜索过，但到目前为止找不到有效的答案。

HTML 将如下所示：

`<span class="label">Label:</span>`
`<span class="value">{{Value}}</span>`

基本上，{{Value}} 是通过 php/mysql 插入（或不插入）的变量。
当然，如果 {{Value}} 为空，则在呈现页面时会得到以下信息：

`<span class="label">Label:</span>`
`<span class="value"></span>`

这个想法是标签：如果 {{Value}} 中没有任何内容，则隐藏。

我尝试了使用 $(.value:empty) & if 语句的各种示例，但无论如何它都隐藏了 .label 。

欢迎任何建议。
在此先感谢，
罗布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:21:53.573

```
$(".value").each(function(){
  var value = $.trim($(this).text())
  if(value == ""){
    $(this).prev(".label").hide()
  }
}) 
```

PS。一个好主意是将 .label .value 对封装到某种 LI 或 DIV 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:12:01.487

尝试

```
if ($('.value').text() == '') { $('.label').hide(); } 
```

# actionscript-3 - 以 Flash 8 为目标的 Flash 电影可以加载到 Flash 10 电影中吗？这 2 个可以传递变量和调用方法吗？

> ID：882349
> 
> 赞同：1
> 
> 时间：2009-05-19T12:07:50.277
> 
> 标签：actionscript-3, migration, flash, actionscript-2

我有现有的 flash 8 AS2 工作，我想更新到 Flash 10。我可以只更新那些我需要成为 Flash 10 的元素并将它们作为外部 swf 加载到 Flash 8 电影中并传递变量和调用方法吗？这是一个好的选择吗？需要注意哪些问题？例如，播放器低于 10 的用户是否能够加载 flash 8 电影，然后发现它因 flash 10 无法加载而中断，或者播放器是否会意识到存在 flash 10 内容并通知用户他们需要升级他们的玩家？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:17:39.307

您*也许*可以将 Flash 8 加载到 Flash 10 中，但如果反过来，我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T15:37:22.967

这里有几个问题重叠。

*   您可以在不更新根目录的情况下更新部分内容，但互操作性变得很棘手。Flash 播放器在播放 SWF 文件时，它会根据文件中的版本标签来执行它，而不是根据加载它的 SWF 的版本标签来执行它。因此，您的 F8 内容可以加载到 F10 SWF 中而不会出现任何特殊问题，但以下几点除外。

*   但是，如果将 AS2 SWF 加载到 AS3 SWF 中（反之亦然），它们之间的通信就会很麻烦。我似乎记得有一些有限的挥手支持在一个或另一个的根中设置变量，但对于任何复杂的推荐方法是使用 LocalConnection。我玩过它，正如我所说，它很毛茸茸。

*   更新到版本 10 的内容是否会在旧版本的 Flash 播放器中播放是与以前的任何一个问题不同的问题，无论是单独的 SWF 还是加载到旧 SWF 中的新 SWF，答案都是相同的。答案是，较旧的播放器会尝试播放内容，但任何较新的功能都不起作用，Flash 不会自动告诉用户升级，或者在他们这样做之前拒绝显示您的内容。

# sql - 删除 SQL 表中的分层数据

> ID：882352
> 
> 赞同：17
> 
> 时间：2009-05-19T12:08:38.793
> 
> 标签：sql, sql-server-2005

我有一个包含分层数据的表。
一列“ParentId”，其中包含其父项的 Id（“ID” - 键列）。

删除一行时，我想删除所有子项（所有级别的嵌套）。

怎么做？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T12:28:04.933

在 SQL Server 上：使用递归查询。给定 CREATE TABLE tmp(Id int, Parent int)，使用

```
WITH x(Id) AS (
    SELECT @Id
    UNION ALL
    SELECT tmp.Id
      FROM tmp
      JOIN x ON tmp.Parent = x.Id
)
DELETE tmp
  FROM x
  JOIN tmp ON tmp.Id = x.Id 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T12:18:04.720

添加外键约束。以下示例适用于 MySQL（[语法参考](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)）：

```
ALTER TABLE yourTable
ADD CONSTRAINT makeUpAConstraintName
FOREIGN KEY (ParentID) REFERENCES yourTable (ID)
ON DELETE CASCADE; 
```

这将在数​​据库级别进行操作，dbms 将确保一旦删除了一行，所有引用的行也将被删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T12:51:55.133

当行数不太大时，erikkallen 的递归方法有效。

这是使用临时表收集所有子项的替代方法：

```
create table #nodes (id int primary key)
insert into #nodes (id) values (@delete_id)
while @@rowcount > 0
    insert into #nodes 
    select distinct child.id 
    from table child
    inner join #nodes parent on child.parentid = parent.id
    where child.id not in (select id from #nodes)

delete
from table
where id in (select id from #nodes) 
```

它从带有@delete_id 的行开始，然后从那里下降。where 语句是为了防止递归；如果你确定没有，你可以把它排除在外。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-19T12:12:45.103

取决于您如何存储层次结构。如果您只有 ParentID，那么它可能不是您采取的最有效的方法。为了便于子树操作，您应该有一个额外的列`Parents`来存储所有父 ID，例如：

```
/1/20/25/40 
```

这样您就可以通过以下方式获取所有子节点：

```
where Parents like @NodeParents + '%' 
```

**第二种方法**您还可以拥有和值
，而不仅仅是 ParentID 。这样做的插入速度较慢，但​​选择操作非常快。特别是在处理子树节点时... [http://en.wikipedia.org/wiki/Tree_traversal](http://en.wikipedia.org/wiki/Tree_traversal)`left``right`

 **如果您使用 SQL 2005+，则**第三种方法检查递归 CTE****

 ****第四种方法**
如果您使用 SQL 2008，请检查 HierarchyID 类型。它为您的情况提供了足够的可能性。 [http://msdn.microsoft.com/en-us/magazine/cc794278.aspx](http://msdn.microsoft.com/en-us/magazine/cc794278.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T12:13:42.310

像这样向表中添加触发器

create trigger TD_MyTable on myTable for delete as -- 删除一级子级 delete M from deleted D inner join myTable M on D.ID = M.ID

每次删除都会在同一张表上调用一次删除，重复调用触发器。在线查看书籍以了解其他规则。触发器可以嵌套的次数可能有限制。

英石

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T14:02:46.520

触发器只能用于 32 级或更深的层次结构：

[http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/05/11/defensive-database-programming-fun-with-triggers.aspx](http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/05/11/defensive-database-programming-fun-with-triggers.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T12:17:14.987

取决于你的数据库。如果您使用的是 Oracle，则可以执行以下操作：

```
DELETE FROM Table WHERE ID IN (
  SELECT ID FROM Table
  START WITH ID = id_to_delete
  CONNECT BY PRIOR.ID = ParentID
) 
```

预计到达时间：

如果没有 CONNECT BY，它会变得有点棘手。正如其他人所建议的那样，触发器或级联删除约束可能是最简单的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-19T12:28:39.613

您想要的是这些表之间的[参照完整性。](https://web.archive.org/web/1/http://blogs.techrepublic%2ecom%2ecom/datacenter/?p=128)

# php - 与支付网关集成

> ID：882356
> 
> 赞同：2
> 
> 时间：2009-05-19T12:09:06.970
> 
> 标签：php, paypal, payment-gateway

如果在贝宝页面或 ccavenue 页面上交易失败，那么我如何回滚 php 中的所有处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T12:12:52.297

如果您在 PayPal 设置中启用 IPN 帖子，您将收到交易状态通知。如果失败，您可以回滚您的更改。

看看这里 - [https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/rec/ipn-techview-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/rec/ipn-techview-outside)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T20:48:58.680

我认为如果付款通过，大多数网关都会进行回调。我通常假设在我收到回调之前没有付款。这意味着在回调之前不会验证订单。

# c# - 编码转换问题

> ID：882361
> 
> 赞同：1
> 
> 时间：2009-05-19T12:09:38.590
> 
> 标签：c#, .net, wcf, unicode, encoding

我在更改字符串的编码时遇到了一点问题。实际上，我从使用代码页 850 编码的 DB 字符串中读取数据，并且我必须准备它们以适用于可互操作的 WCF 服务。

从数据库中，我读取了字符 \x10 和 \x11（三角形），我想将它们转换为 Unicode 格式，以防止 WCF 调用期间出现序列化/反序列化问题。（即使 WCF 序列化它们，根据 XML 规范，字符也是无效的）。

现在，我使用以下代码来隐藏字符串编码，但没有任何反应。结果字符串实际上与原始字符串相同。

我可能错过了一些东西......

请帮我！！！

伊曼纽尔

```
 static class UnicodeEncodingExtension
    {
        public static string Convert(this Encoding sourceEncoding, Encoding targetEncoding, string value)
        {
            string reEncodedString = null;

            byte[] sourceBytes = sourceEncoding.GetBytes(value);
            byte[] targetBytes = Encoding.Convert(sourceEncoding, targetEncoding, sourceBytes);
            reEncodedString = sourceEncoding.GetString(targetBytes);

            return reEncodedString;
        }

    }

    class Program
    {
        private static Encoding Cp850Encoding = Encoding.GetEncoding(850);
        private static Encoding UnicodeEncoding = Encoding.UTF8;

        static void Main(string[] args)
        {
            string value;
            string resultValue;
            value = "\x10";
            resultValue = Cp850Encoding.Convert(UnicodeEncoding, value);

            value = "\x11";
            resultValue = Cp850Encoding.Convert(UnicodeEncoding, value);

            value = "\u25b6";
            resultValue = UnicodeEncoding.Convert(Cp850Encoding, value);

            value = "\u25c0";
            resultValue = UnicodeEncoding.Convert(Cp850Encoding, value);

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T14:02:13.340

我怀疑这条线可能是你的罪魁祸首

```
reEncodedString = sourceEncoding.GetString(targetBytes); 
```

这似乎采用了您的目标编码字节字符串，并要求您的 sourceEncoding 用它们制作一个字符串。我没有机会验证它，但我怀疑以下可能会更好

```
reEncodedString = targetEncoding.GetString(targetBytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:04:52.130

您似乎认为存在基于错误理解的问题。但是 jmservera 是正确的 - .NET 中的所有字符串都在内部编码为 un​​icode。

你没有确切地说你想要完成什么。您在电线的另一端遇到问题吗？

仅供参考，您可以使用配置文件中的[textMessageEncoding 元素](http://msdn.microsoft.com/en-us/library/ms731787.aspx)在WCF 绑定上设置文本编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:38:44.913

string 中存储的所有字符串实际上都是 Unicode.Unicode。阅读：[.Net 和 C# 中的字符串以及](http://www.yoda.arachsys.com/csharp/strings.html)每个[软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

编辑：我想您希望 Convert 函数自动将 \x11 更改为 \u25c0，但这里的问题是 \x11 在几乎任何编码中都有效，差异通常以字符 \x80 开始，因此 Convert 函数将保持它即使你这样做：

```
string reEncodedString = null;
byte[] unicodeBytes = UnicodeEncoding.Unicode.GetBytes(value);
byte[] sourceBytes = Encoding.Convert(Encoding.Unicode,
                                sourceEncoding, unicodeBytes); 
```

您可以在[unicode.org](http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/PC/CP850.TXT)中看到从 CP850 到 Unicode 的映射。因此，要进行这种转换，您必须手动更改这些字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-25T17:39:42.000

你应该试试这个：

```
byte[] sourceBytes = sourceEncoding.GetBytes(value);
var convertedString = Encoding.UTF8.GetString(sourceBytes); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-10T14:13:37.953

1.  `byte[] sourceBytes =Encoding.Default.GetBytes(value)`
2.  `Encoding.UTF8.GetString(sourceBytes)`

此序列对于从服务下载 unicode 文件很有用（例如包含波斯字符的 xml 文件）

# jquery - td colspan 在使用 jquery show/hide() 时不起作用

> ID：882372
> 
> 赞同：4
> 
> 时间：2009-05-19T12:12:27.850
> 
> 标签：jquery

我有一个目录

```
<table>
<thead>
  <tr>
    <th>First Name </th>
    <th>Last Name </th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr class="odd">
    <td>John</td>
    <td>Deo</td>
    <td><a class="personal-checking-more-link">More</a></td>
  </tr>
  <tr><td style="display:none" colspan="3">Description goes for 1st row</td></tr>
  <tr class="odd">
    <td>Jaden</td>
    <td>Aidan</td>
    <td><a class="personal-checking-more-link">More</a></td>
  </tr>
  <tr><td style="display:none" colspan="3">Description goes for 2nd row</td></tr>
</tbody> 
```

当我单击**更多**时，将显示第一行描述。它显示完美，但 colspan 不起作用。

这是我的js代码

```
personalChecking = function () {
        $('a.personal-checking-more-link').click(function() {
            $(this).parent().parent().next().toggle('slow');
        });

    }
$(document).ready(personalChecking); 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:33:01.937

This is the problem with 'display:block'

Please refer the below link [http://thedesignspace.net/MT2archives/000376.html#.UUrg3FfCd1u](http://thedesignspace.net/MT2archives/000376.html#.UUrg3FfCd1u)

If you are hiding tr, then use 'display:table-row' instead of 'display:block' to display that tr,

If you are hiding td, then use 'display:table-cell' instead of 'display:block' to display that td

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T19:40:53.663

问题似乎出在显示元素时应用的样式中。它将样式设置为“显示：块”，这似乎与 colspan 混淆。以下是我想出的一些解决方法，但它们并不完美。

这个有生涩的动画：

```
personalChecking = function () {
    $('a.personal-checking-more-link').click(function() {
        $(this).parent().parent().next().toggle('slow', function() {
            if($(this).css('display') == 'block')
            {
                $(this).css('display', '');
            }               
        });
    });
} 
```

而这个根本没有动画：

```
personalChecking = function () {
    $('a.personal-checking-more-link').click(function() {
        var nextRow = $(this).parent().parent().next();
        if(nextRow.css('display') == 'none')
        {
            nextRow.css('display','');
        }
        else
        {
            nextRow.css('display', 'none');
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-04T19:18:52.693

我发现 Firefox 的“问题”是因为 a 应该有 display:table-row。IE 的故障似乎是正确的，因为它的故障被解释为标准行为。

所以最好的解决方案是使用 addClass("someClass") 和 removeClass("someClass") 来隐藏东西。（使用 CSS 规则：someClass {display:none;}）

这具有不被动画化的缺点。我的解决方案可以解决这个问题。如果不是，您可以以某种方式在 css('display','table-row') 中编写脚本。

-克林特

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-02-04T16:25:58.430

最好的方法是使用回调

```
personalChecking = function () {
    $('a.personal-checking-more-link').click(function() {
        $(this).parent().parent().next().show('slow', function() {           
            $(this).attr("colspan", "3");
        });
    });
} 
```

这样 FireFox 和 Chrome 就会知道如何准确地渲染 td

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T12:22:25.193

在你的代码中试试这个：

```
$('a.personal-checking-more-link').click(function() {
    var descriptionTR = $(this).parent().parent().next();
    $(descriptionTR).toggle('slow').colSpan = 3;
}); 
```

[http://www.nabble.com/IE7:-Setting-ColSpan-as-Attribute-td21252688s27240.html](http://www.nabble.com/IE7:-Setting-ColSpan-as-Attribute-td21252688s27240.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-19T12:30:40.840

问题是您正在切换 TR，而不是其中的 TD

```
$(this).parent().parent().next()
   1      2         3       4 
```

*   1 是 A

*   2 是 1 所在的 TD

*   3 是 2 所在的 TR

*   4 是低于 3 的 TR

但是您的 display:none 在 TD 上。

所以我会推荐：

```
$("td",$(this).parent().parent().next()).toggle('slow'); 
```

其中内部 $ 将为您提供包含 TR，然后您将其用作“td”选择的上下文。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-11-09T13:03:17.107

你试过没有动画吗？即只是切换（）

我遇到了同样的问题，似乎动画切换没有使 COLSPAN 的 TD 出现。我的所有行内容都出现在非 COLSPAN 的列之一中。当我将其更改为普通的 toggle() 时，一切正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-20T03:37:06.877

对不起，这是我的错误。**样式**标签应该放在**TR**而不是**TD**

```
 <tr style="display:none"><td colspan="3">Description goes for 1st row</td></tr>
  <tr style="display:none"><td colspan="3">Description goes for 2nd row</td></tr> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T15:48:44.667

过去我在 jQuery 和显示和隐藏/滑动表格行方面遇到了问题，最后我不得不让 jQuery 将选定的 td 包装在一个 div 中，然后显示/隐藏它，我知道这不是很好，但在紧迫的期限内工作。

如果您对动画有类似问题，请记住一些事情。

# php - 如何在不标记每个帖子的情况下实现相关帖子功能？

> ID：882382
> 
> 赞同：1
> 
> 时间：2009-05-19T12:14:38.720
> 
> 标签：php, mysql

我们的数据库中有 2 个文本字段（“post_text”和“post_slug”）。假设 post_text = "Hello World!"，所以它的 post_slug = "hello-world"。如何在不标记仅操作现有字段的每个帖子的情况下实现相关帖子功能？（PHP，MySQL）

ps 数据库包含很多帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:23:58.110

请注意：您绝对不希望每次显示页面时都即时计算相关帖子，因为在大型数据库中，这将介于太多工作和不可能之间。

您通常会定期运行您正在使用的任何算法，并将信息保存在引用原始表的单独表中。显示帖子将只是一个简单的加入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:03:09.107

查看similar_text函数 [http://jp2.php.net/manual/en/function.similar-text.php](http://jp2.php.net/manual/en/function.similar-text.php)

或者可以用空格分割每个单词并用你自己的算法计算关系。

如果您能够向 mysql 添加一个表，您应该创建一个包含每个帖子的计算关系的表。

```
CREATE TABLE blog_table.`posts_relation` (
`post_id` INT UNSIGNED NOT NULL ,
`related_post_id` INT UNSIGNED NOT NULL ,
`relation` FLOAT UNSIGNED NOT NULL ,
INDEX ( `post_id` , `related_post_id` ) 
) 
```

每次添加帖子时更新，或者每天更新一次。

并通过类似的方式获取您的结果

```
SELECT posts.* FROM posts, posts_relation WHERE posts_relation.post_id = {$post_id} AND posts.post_id = posts_relation.related_post_id ORDER BY posts_relation.relation DESC LIMIT 5 
```

# iphone - 在 iphone 模拟器上访问 plist

> ID：882398
> 
> 赞同：0
> 
> 时间：2009-05-19T12:18:20.583
> 
> 标签：iphone, objective-c, plist

所以我已经开始使用 NSCoder 构建 plist 文件，但是当我正在开发时，我想查看它们并查看正在保存哪些数据。

我如何在模拟器中查找/访问由我的应用程序生成的 plist 文件（当我到达时在设备上）

我看过的地方：

*   应用程序包
*   构建目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:23:53.983

要将它们放入 ~/Library/Application Support/iPhone Simulator/User/Applications/ 子文件夹（如果它们在真实设备上，它们最终会放在该文件夹中），您可以在应用程序中使用以下代码：

```
+ (NSString *)dataFilePath:(NSString *)filename {
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

return [documentsDirectory stringByAppendingPathComponent:filename];
} 
```

这会将文件放在应用程序沙箱的 /Documents/ 文件夹中。然后，您可以在以下位置找到该文件：~/Library/Application Support/iPhone Simulator/User/Applications/ ***Application GUID*** /Documents/

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:20:24.607

哇，这很愚蠢，

在 / 找到它们

这个模拟器根本不能很好地模拟真实的手机环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-27T12:39:36.973

如果您的 plist 在 Document 文件夹中，则将路径指定为

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

否则，如果您的 plist 文件位于资源文件夹中，则将资源文件夹的路径指定为

```
[[NSBundle mainbundle] pathforresources:..........]; 
```

# python - 在哪里保存 Python 单元测试？

> ID：882399
> 
> 赞同：16
> 
> 时间：2009-05-19T12:18:23.940
> 
> 标签：python, unit-testing, code-organization

> **可能重复：**
> [Python 单元测试在哪里？](https://stackoverflow.com/questions/61151/where-do-the-python-unit-tests-go)

单元测试是保存在与代码相同的文件中，还是在同一目录中的单独文件中，还是在完全不同的目录中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-19T12:21:08.940

我总是将我的单元测试放在名为 test 的相关代码的子目录中。

例如：*/libs/authentication*，测试将放在*/libs/authentication/tests*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T12:23:25.880

我更喜欢将它们保存在单独的目录中，通常称为“unittests”或仅称为“tests”。然后我在 Makefile 中玩游戏必须自动处理这个目录，如果它存在的话。

设置起来有点麻烦，但我个人不希望单元测试把功能代码弄得乱七八糟。这样它们就足够“接近”了，可以很明显，但不会一直出现在你的脸上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T12:21:08.690

通常的项目布局是有一个包含测试的单独目录，测试也按它们正在测试的内容进行细分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T12:33:40.587

我们保留一个具有并行类层次结构的单独目录。单元测试类名称为 Test[ClassNameUnderTest]。如果需要多个测试类，它们会以 _ 和附加文本作为后缀。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T14:15:25.917

我保留了一个单独的测试源代码树，它模仿了我的源代码树的包结构。

例子：

```
/src/main/java/com/xyz/MyClass.java
/src/test/java/com/xyz/MyClassTest.java 
```

使用这种结构，您可以测试包级别的方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-19T12:22:16.163

每个项目都有一个测试项目

示例命名

主要项目

*   公司.项目.区域

主要项目测试

*   公司.项目.区域.测试

# asp.net-mvc - asp.net-mvc 中的 Reportviewer 数据源

> ID：882405
> 
> 赞同：7
> 
> 时间：2009-05-19T12:20:31.190
> 
> 标签：asp.net-mvc, reporting-services, reportviewer

我如何集成`ReportViewer`到 asp.net MVC 项目中？

我想添加`MVCProject.Model`命名空间的业务对象。`ReportViewer`允许 DataSet 的业务对象。

是否可以选择其他数据源，例如`LinqDataSource`或 Direct object to LINQ-to-SQL class objects？

在 MVC 项目中添加报告的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-21T10:55:43.757

我有一个未经测试但可能有效的想法。1- 将报表查看器控件放置在标准 ASP.Net Web 表单页面中（例如 ReportViewer.aspx） 2- 在 MVC 下，添加一个引用此 ReportViewer.aspx 页面的 iframe 3- 使用会话或查询字符串将参数传递给页面

让我知道这个是否奏效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-17T21:03:03.673

另一种方法是在报告服务器上生成报告，然后将其作为 PDF 流式传输到 mvc 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T12:38:00.827

会很艰难 首先，您需要 ViewState，因此您需要在常规 WebForms 页面中托管报表。不过这还不错——WebForms 和 MVC 可以很好地并行工作。

困难的部分是绑定到真正的 IEnumerable 对象，而不是那些虚假的对象数据源。

第一步是建立报表数据模型。您可以在代码中使用查询来执行此操作，无论您想要什么。像这样（但显然更大）的结构是典型的：

```
public class ReportSource
{   
   public Floogle[] Floogles { get; set; }
}

public class Floogle
{
    public Doodad[] Doodads { get; set; } 
    public string Text { get; set; }
}

public class Doodad
{
    public int Number { get; set; }
} 
```

诀窍是在报表中使用 BindingSource 控件并将 DataSource 属性设置为`typeof(ReportSource)`- 是的，数据源是报表模型的类型。

在设计报表时，您不会获得很多丰富性，但您可以做到。

就第三方报告解决方案而言，我们发现 Telerik 是最佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-25T03:21:33.993

我有一个小项目，我在 codeplex 上抛出了一个带有报告的 mvc 项目。

[http://mvctaskmanagement.codeplex.com/](http://mvctaskmanagement.codeplex.com/)

基本上，因为我在 XP 机器上进行开发，所以我的 Web 表单必须被推送到一个单独的项目中。因为我有一个服务层项目，所以我把它卡在那里。

从那里我通过 ajax 帖子调用我的报告，将参数拍摄到报告页面，然后将其传递到用于生成预览的同一服务层。

祝你好运！

# jquery - jQuery禁用按钮（不提交）直到字段验证+验证插件

> ID：882406
> 
> 赞同：7
> 
> 时间：2009-05-19T12:20:33.577
> 
> 标签：jquery

我的表单上有 4 个按钮，一个提交、取消、添加和删除按钮。一切都按预期工作，但我想禁用添加按钮，直到输入字段验证。我正在使用验证插件，我认为这可以通过带有回调的所需验证来完成，但我不确定。

有人能指出我正确的方向吗？

更新：

这是一些代码的想法

```
required: function(element) { 
   return($('#chargeamtaddButton').attr('disabled', ? '','disabled');
} 
```

寻找那个真/假选项标志来设置禁用属性

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2011-05-20T13:57:15.327

我实际上已经发现了最好的方法，它`checkForm()`在插件中使用了一种未记录的方法。

将此代码添加到`$(document).ready()`表单所在页面上的函数中。

```
$('#yourform').bind('change keyup', function() {
    if($(this).validate().checkForm()) {
        $('#submitbutton').removeClass('button_disabled').attr('disabled', false);
    } else {
        $('#submitbutton').addClass('button_disabled').attr('disabled', true);
    }
}); 
```

在这种情况下，它将类添加`button_disabled`到按钮，然后添加禁用属性。您可以通过 CSS 将禁用的样式应用于按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T12:56:44.190

[jQuery 验证插件文档：表单方法](http://docs.jquery.com/Plugins/Validation/Validator/form)

验证插件的上述方法允许您检查表单是否有效。因此，如果您无法使回调正常工作，那么我将运行一个计时器并检查表单是否经常有效，如果有效，请启用您的按钮。不过这很糟糕。

我找不到验证插件的成功回调，所以我认为您在使用 submitHandler 方法时遇到了问题。但是，您实际上还没有准备好提交表单，因为您仍想添加字段。因此，我提出的解决方案是始终启用添加按钮，但在单击时让它调用一个函数以查看表单是否有效。如果是这样，则添加您的字段或其他内容，如果没有，则弹出错误。所以：

```
<body onload="formValidator = $('#form').validate();">
...
<input value='add' name='add' onclick='addIsValid();'>
...
<script type='text/javascript' language='javascript'>
function addIsValid() {
   if(formValidator.numberOfInvalids() > 0) {
          formValidator.showErrors();
      } else {
          addElementToFormOrWhatever();
      } 
   }
</script> 
```

或者至少是达到这种效果的东西。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T00:15:24.773

一个更优雅和快速的解决方案是简单地覆盖默认的点击和按键事件添加您需要的代码如下而不是添加另一个监听事件

```
$("#form").validate({
    submitHandler: function(form) {
        form.submit();
    },
    onkeyup: function( element, event ) {
        if ( event.which === 9 && this.elementValue(element) === "" ) {
            return;
        } else if ( element.name in this.submitted || element === this.lastElement ) {
            this.element(element);
        }

        if (this.checkForm()) { // checks form for validity
            $('a.submit').attr('class', 'submit btn btn-success');        // enables button
        } else {
            $('a.submit').attr('class', 'submit btn btn-danger disabled');   // disables button
        }
    },
    onclick: function( element ) {
        // click on selects, radiobuttons and checkboxes
        if ( element.name in this.submitted ) {
            this.element(element);

        // or option elements, check parent select in that case
        } else if ( element.parentNode.name in this.submitted ) {
            this.element(element.parentNode);
        }

        if (this.checkForm()) { // checks form for validity
            $('a.submit').attr('class', 'submit btn btn-success');        // enables button
        } else {
            $('a.submit').attr('class', 'submit btn btn-danger disabled');   // disables button
        }
    }
}) 
```

使用提交触发器的以下 css 代码 - 最初禁用（引导 3 类）：

```
<a onclick="if(!$(this).hasClass('disabled')) { $('#form').submit(); }" class="submit btn btn-danger disabled">button_save</a> 
```

这可以很容易地与 jquery 插件[areYouSure](https://github.com/codedance/jquery.AreYouSure)一起使用，仅在进行实际更改时才启用提交：

```
if (this.checkForm() && $('#form').hasClass('dirty')) { // checks form for validity 
```

使用静默初始化插件：

```
$('#form').areYouSure( {'silent':true} ); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-19T17:35:16.113

我以前使用过验证插件，但我不记得所有的细节。我很确定它是这样的：

```
$(function() {
    $('#myForm').validate(
        rules: {
            'elementToWatch': {
                success: function(element) { 
                    if($("#myform").validate().element("#myselect")) {
                        $('#chargeamtaddButton:disabled').removeAttr('disabled');
                    } else {
                        $('#chargeamtaddButton').attr('disabled','disabled');
                    }
                },
                // etc...
             },
             // etc...
         },
         // etc...
     });
 }); 
```

由于使用验证插件的方法有很多，很难给你完美的建议，但我希望我所展示的内容能让你更好地了解如何继续前进。也许如果您提供更多代码和 HTML，我可以为您提供更多帮助。

# c# - 如何将属性添加到序列化的 XML 节点？

> ID：882407
> 
> 赞同：0
> 
> 时间：2009-05-19T12:21:01.373
> 
> 标签：c#, xml, wcf, xml-serialization

假设我有一个这样的 C# 类：

```
[XmlRoot("floors")]
public class FloorCollection
{
    [XmlElement("floor")]
    public Floor[] Floors { get; set; }

} 
```

我想序列化它并使用 WCF 发送到 REST API。但是在发送之前，我需要以这种方式向 floor 节点添加一个属性：`<floors type="array">...</floors>`

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:40:51.927

只需将 type 属性添加到您的集合类中：

```
[XmlRoot("floors")]
public class FloorCollection
{
    [XmlAttribute("type")]
    public string Type { get; set; }
    [XmlElement("floor")]
    public Floor[] Floors { get; set; }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T12:51:32.187

如果您的意思是在业务代码不知道的情况下添加它，那么您可能必须使用[Message Inspectors](http://msdn.microsoft.com/en-us/library/aa717047.aspx)在发送消息之前对其进行修改。

# iphone - glClearColor() 以 27% 的渲染利用率推动 iPhone

> ID：882408
> 
> 赞同：4
> 
> 时间：2009-05-19T12:21:04.697
> 
> 标签：iphone, performance, opengl-es, rendering

*作为寻找[这个问题](https://stackoverflow.com/questions/872560/512x512-texture-causing-huge-gpu-stress-on-iphone-despite-tiling)的答案的结果，我遇到了一个相当不舒服的发现。*

**似乎仅以`glClearColor()`60 fps 的速度渲染会使 iPhone 的渲染利用率达到 27%。**

这意味着几乎不做任何事情——仅仅刷新屏幕——使得 iPhone 使用了超过四分之一的渲染能力。

**这是可以预料的吗？**

根据文档，POWERVR 至少应该达到 270 兆像素/秒左右。正如下面正确*展开*的那样，60 fps 下的 480×320 等于大约 9.2 兆像素/秒，总性能约为 40 兆像素/秒，这很可疑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:26:31.940

这只是意味着您应该设计渲染以使用实际内容填充每一帧的所有像素，因此您根本不需要清除帧缓冲区。也就是说，至少，清除瓶颈的经典“解决方案”：不要这样做。

例如，在典型的第一人称引擎中，这是通过渲染天空盒和地面“平面”来实现的，它们始终覆盖整个视口。

我还没有阅读 iPhone 渲染子系统的详细信息，但它似乎表明填充率非常低。60 fps 时的 480×320 相当于约 9.2 兆像素/秒，总性能约为 40。听起来很可疑。

# javascript - 使用 xml 使用 jquery 创建一个无序列表

> ID：882412
> 
> 赞同：1
> 
> 时间：2009-05-19T12:21:21.437
> 
> 标签：javascript, jquery, xml

我有一个 xml 文件，我想使用 jquery 将其转换为无序列表。到目前为止，我设法使列表正常工作，除了 xml 的第三级。目前我的代码编写了“Navigation_sub_3”的所有子项。我想弄清楚的是如何只写 level_2 中的子节点，所以输出是

```
Strategy
  Views
     IBM
     etc.

UML
  Development
    Architecure
    etc

Platform
  Model
    BPEL
    OSLO
    etc
  Service
    Google
    Live
    etc. 
```

下面是我的 html/jquery 文件和 xml。谁能帮我看看如何显示第三级？

干杯克里斯

测试.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>

    <script src="js/jquery-1.2.6.js" type="text/javascript"></script>

    <script type="text/javascript">
        function XmlOnLoad(xmlData, strStatus)
        {
            var jData = $(xmlData);
            var jccNav = jData.find("Navigation");
            var jSections = jccNav.children();
            var jList = $("#Navi");

            jSections.each(function(intSectionIndex)
            {
                var jSection = $(this);
                var jTerm = $("<li></li>");
                var jDef2 = $("<ul></ul>");
                var jLevel2 = $("<b></b>");
                var jLevel3 = $("<b></b>");

                jSection.children().children().each(function(intPartIndex)
                {
                    var jPart3 = $(this);
                    var jText3 = $("<li></li>");

                    // Set the li text.
                    jText3.html("<a>" + jPart3.attr("tooltip") + "3.level</a>");

                    // Append to list.
                    jLevel3.append(jText3);
                });

                jSection.children().each(function(intPartIndex)
                {
                    var jPart2 = $(this);
                    var jText2 = $("<li></li>");

                    // Set the li text.
                    jText2.html("<a>" + jPart2.attr("tooltip") + " 2.level </a><ul>" + jLevel3.html());

                    // Append to list.
                    jLevel2.append(jText2);

                });

                jTerm.html("<a>"
                            + $(this).attr("tooltip")
                            + "1.ebene</a>"
                            + "<ul>"
                            + jLevel2.html()
                             );

                jList.append(jTerm);

                $("#homer").html(jList.html());
            });
        };

        $(document).ready(function()
        {
            $.get("content.xml", {}, XmlOnLoad);

        });
    </script>

</head>
<body>
<div id="homer"></div>

</body>
</html> 
```

内容.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Navigation>
    <Navigation_sub_1 tooltip="Strategy">
        <!--1 Button-->
        <level_2 name="Nav1" number="5" tooltip="Views">
            <level_3 name="Nav1_5" number="15" tooltip="IBM" />
            <level_3 name="Nav1_5" number="13" tooltip="Mainframe" />
            <level_3 name="Nav1_5" number="7" tooltip="Novell"     />
            <level_3 name="Nav1_5" number="6" tooltip="Open- Source"/>
            <level_3 name="Nav1_5" number="1" tooltip="Oracle"      />
            <level_3 name="Nav1_5" number="9" tooltip="SAP"         />
            <level_3 name="Nav1_5" number="8" tooltip="Sun"         />
        </level_2>
    </Navigation_sub_1>
    <!--2 Button-->
    <Navigation_sub_2 tooltip="UML">
        <level_2 name="Nav2" number="5" tooltip="Development">
            <level_3 name="Nav2_5" number="10" tooltip="Architecture"/>
            <level_3 name="Nav2_5" number="6" tooltip="Patterns"     />
            <level_3 name="Nav2_5" number="1" tooltip="SOA"          />
        </level_2>
    </Navigation_sub_2 >
    <!--3 Button-->
    <Navigation_sub_3 tooltip="Platform">
        <level_2 name="Nav3" number="1" tooltip="Model">
            <level_3 name="Nav3_1" number="15" tooltip="BPEL" />
            <level_3 name="Nav3_1" number="9" tooltip="BPMN"  />
            <level_3 name="Nav3_1" number="7" tooltip="DSL"   />
            <level_3 name="Nav3_1" number="10" tooltip="Oslo" />
            <level_3 name="Nav3_1" number="1" tooltip="UML"   />
        </level_2>
        <level_2 name="Nav3" number="7" tooltip="Service" >
            <level_3 name="Nav3_7" number="3" tooltip="Azure Services" />
            <level_3 name="Nav3_7" number="11" tooltip="ISB"           />
            <level_3 name="Nav3_7" number="6" tooltip="Live"           />
            <level_3 name="Nav3_7" number="8" tooltip="Live Mesh"      />
            <level_3 name="Nav3_7" number="13" tooltip="REST"          />
            <level_3 name="Nav3_7" number="9" tooltip="Web- services"  />
            <level_3 name="Nav3_7" number="1" tooltip="Windows Azure"  />
        </level_2>
    </Navigation_sub_3>

</Navigation> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:26:38.077

您是否尝试过使用一些递归？您可以编写一个名为`writeSection`. 该函数将在一个部分中写入每个节点，然后如果一个节点有子节点，它将调用自己来写入这些子节点。

# java - Java - 正确获取 jar 依赖项

> ID：882418
> 
> 赞同：4
> 
> 时间：2009-05-19T12:22:22.713
> 
> 标签：java, hibernate, spring, maven-2, jar

我对 Java 和 maven 比较陌生，所以为了了解我的方式，我决定做一个项目作为学习的手段。

我选择了一个非常常见的堆栈：

*   Java 1.6
*   休眠（带注释）
*   Spring（带注释）
*   JUnit 4
*   雄猫
*   Oracle XE / In-mem hsqldb

到目前为止，我遇到的最大问题之一是正确组合 jar 版本以获得稳定的环境。两个多月后，我[仍在努力解决这个问题。](https://stackoverflow.com/questions/882338/hibernate-preinsertevent-getsource-nosuchmethoderror)

我经常抛出 noSuchMethod 或 classNotFound 异常，结果是 Spring 模块 A xxx 与 Hibernate 模块 B yyy 不兼容，甚至，通常，spring 模块 A xxx 与 Spring 模块 B yyy 不兼容

我希望从零开始，版本依赖关系应该是最小的——只需获取最新版本，一切都应该工作......但事实并非如此。

我希望使用 maven 会简化这个过程，毫无疑问它确实做到了。

但这肯定远非无痛。我曾想过，如果模块 A 需要模块 B 的特定版本，那么它会在某个地方强制执行，并且肯定会提供更有意义的消息，而不仅仅是“noSuchMethod”。

此外，我发现这些问题的唯一方法似乎是尝试一个新的方法调用，得到可怕的 noSuchMethod 错误，然后开始谷歌搜索。

在此过程中，我是否错过了一些让自己变得比需要更困难的事情？

作为参考，这是我的 pom 的依赖项部分...如果您发现任何非常不标准的东西，请告诉我！

```
<dependencies>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.5.6</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.6</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.4</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.3</version>
    </dependency>
    <dependency>
        <groupId>ojdbc</groupId>
        <artifactId>ojdbc</artifactId>
        <version>14</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency><!-- java bytecode processor -->
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.8.0.GA</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.7</version>
    </dependency>
    <dependency>
        <groupId>org.dbunit</groupId>
        <artifactId>dbunit</artifactId>
        <version>2.4.4</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
        <version>2.5.6</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>2.5.6</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>2.5.6</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.4.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.3.0.ga</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.1.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>3.1.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.4.0.GA</version>
    </dependency>

    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.3</version>
    </dependency>
</dependencies> 
```

谢谢

马蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T12:59:14.370

我发现具有挑战性的一件事是确定每个包中的内容，尤其是来自 Spring 的。

为此，我发现 Netbeans 对 maven 的支持非常出色，因为它可以让您知道每个需求都引入了哪些库。6.7 Beta 包含一个非常出色的图形树，m2eclipse 也有一个非常漂亮的图形依赖树。你怎么知道 spring-orm 包括 spring-beans、spring-core、spring-context 和 spring-tx？您可以从命令行使用[依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/list-mojo.html)向 maven 询问依赖关系，但图形表示非常方便。[dependency:tree](http://maven.apache.org/plugins/maven-dependency-plugin/examples/resolving-conflicts-using-the-dependency-tree.html)是您要运行的目标。显然，您也可以从 Netbeans 或 Eclipse 运行它。

因此，作为您的一次碰撞的示例：

```
 <dependency>
   <groupId>org.hibernate</groupId>
   <artifactId>hibernate-annotations</artifactId>
   <version>3.4.0.GA</version>
 </dependency> 
```

实际上包括 hibernate-commons-annotations-3.1.0.GA 而不是 3.3。它还包括 hibernate-core-3.3.0.SP1，而不是 3.3.1.GA。

I would start at your "biggest" component, and start to see what parts that already includes and only add what is missing. Even then, double check that you don't have a duplicate dependency and if need be, exclude the duplicate as shown in the answer to [this question](https://stackoverflow.com/questions/816858/maven-remove-a-single-transitive-dependency/816894#816894).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T12:54:12.650

[如果您使用的是 eclipse，那么您应该在http://m2eclipse.sonatype.org/](http://m2eclipse.sonatype.org/)从 sonatype 下载 maven 插件。

这附带了一个有用的依赖关系图形可视化（特别是[传递依赖关系](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)- 您没有在 POM 中明确定义的依赖关系），并且还显示冲突的依赖关系。

更新：从下面的评论中，*您的里程可能会有所不同*。

# java - 在 Java 中以不同的格式将字符串解析为日期

> ID：882420
> 
> 赞同：93
> 
> 时间：2009-05-19T12:22:40.047
> 
> 标签：java, string, date

我想转换`String`成`Date`不同的格式。

例如，

我从用户那里得到，

```
String fromDate = "19/05/2009"; // i.e. (dd/MM/yyyy) format 
```

我想将此转换`fromDate`为`"yyyy-MM-dd"`格式的日期对象

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2009-05-19T12:31:52.087

看看[`SimpleDateFormat`](http://java.sun.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。代码是这样的：

```
SimpleDateFormat fromUser = new SimpleDateFormat("dd/MM/yyyy");
SimpleDateFormat myFormat = new SimpleDateFormat("yyyy-MM-dd");

try {

    String reformattedStr = myFormat.format(fromUser.parse(inputString));
} catch (ParseException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-26T00:18:41.210

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-19T12:31:16.830

使用[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)类：

```
private Date parseDate(String date, String format) throws ParseException
{
    SimpleDateFormat formatter = new SimpleDateFormat(format);
    return formatter.parse(date);
} 
```

用法：

```
Date date = parseDate("19/05/2009", "dd/MM/yyyy"); 
```

为了提高效率，您可能希望将格式化程序存储在哈希图中。hashmap 是 util 类的静态成员。

```
private static Map<String, SimpleDateFormat> hashFormatters = new HashMap<String, SimpleDateFormat>();

public static Date parseDate(String date, String format) throws ParseException
{
    SimpleDateFormat formatter = hashFormatters.get(format);

    if (formatter == null)
    {
        formatter = new SimpleDateFormat(format);
        hashFormatters.put(format, formatter);
    }

    return formatter.parse(date);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-21T07:01:06.933

**将字符串日期转换为 java.sql.Date**

```
String fromDate = "19/05/2009";
DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
java.util.Date dtt = df.parse(fromDate);
java.sql.Date ds = new java.sql.Date(dtt.getTime());
System.out.println(ds);//Mon Jul 05 00:00:00 IST 2010 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-19T12:28:46.290

检查 javadocs[`java.text.SimpleDateFormat`](http://java.sun.com/javase/6/docs/api/java/text/SimpleDateFormat.html)它描述了你需要的一切。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-19T12:45:19.923

虽然[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)确实可以满足您的需求，但您可能还想查看[Joda Time](http://joda-time.sourceforge.net/)，这显然是 Java 7 中重做 Date 库的基础。虽然我没有经常使用它，但我只听到了好东西关于它，如果你在你的项目中广泛地操纵日期，它可能值得研究。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-18T08:16:54.990

假设你有一个这样的字符串：

```
String mDate="2019-09-17T10:56:07.827088" 
```

现在我们想在**Java**和**Kotlin**`String`中更改这种格式，将日期和时间分开。

 ******爪哇：**

我们有一种提取**日期**的方法：

```
public String getDate() {
    try {
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS", Locale.US);
        Date date = dateFormat.parse(mDate);
        dateFormat = new SimpleDateFormat("MM/dd/yyyy", Locale.US);
        return dateFormat.format(date);
    } catch (ParseException e) {
        e.printStackTrace();
    }
    return null;
} 
```

**`Return`这是 : 09/17/2019**

我们有提取**时间**的方法：

```
public String getTime() {

    try {
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS", Locale.US);
        Date date = dateFormat.parse(mCreatedAt);
        dateFormat = new SimpleDateFormat("h:mm a", Locale.US);
        return dateFormat.format(date);
    } catch (ParseException e) {
        e.printStackTrace();
    }
    return null;
} 
```

**`Return`这是 :** **上午 10:56**

**科特林：**

我们有一个提取**日期**的功能：

```
fun getDate(): String? {

    var dateFormat = SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS", Locale.US)
    val date = dateFormat.parse(mDate!!)
    dateFormat = SimpleDateFormat("MM/dd/yyyy", Locale.US)
    return dateFormat.format(date!!)
} 
```

**`Return`这是 : 09/17/2019**

我们有提取**时间**的方法：

```
fun getTime(): String {

    var dateFormat = SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS", Locale.US)
    val time = dateFormat.parse(mDate!!)
    dateFormat = SimpleDateFormat("h:mm a", Locale.US)
    return dateFormat.format(time!!)
} 
```

**`Return`这是 :** **上午 10:56**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-21T05:35:21.457

格式化日期并转换为字符串的简单方法

```
 Date date= new Date();

    String dateStr=String.format("%td/%tm/%tY", date,date,date);

    System.out.println("Date with format of dd/mm/dd: "+dateStr); 
```

> 输出：日期格式为 dd/mm/dd：21/10/2015

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-25T05:05:00.773

`Date`对象**没有格式**，它是一种表示。日期可以用你喜欢`String`的**格式**来表示。

例如“ `yyyy-MM-dd`”、“ `yy-MMM-dd`”、“ `dd-MMM-yy`”等。

为了实现这一点，您可以使用`SimpleDateFormat`

试试这个，

```
 String inputString = "19/05/2009"; // i.e. (dd/MM/yyyy) format

        SimpleDateFormat fromUser = new SimpleDateFormat("dd/MM/yyyy"); 
        SimpleDateFormat myFormat = new SimpleDateFormat("yyyy-MM-dd");

        try {
            Date dateFromUser = fromUser.parse(inputString); // Parse it to the exisitng date pattern and return Date type
            String dateMyFormat = myFormat.format(dateFromUser); // format it to the date pattern you prefer
            System.out.println(dateMyFormat); // outputs : 2009-05-19

        } catch (ParseException e) {
            e.printStackTrace();
        } 
```

**这个输出：2009-05-19**

# perl - *** 检测到 glibc *** perl: 双重释放或损坏 (!prev): 0x0c2b7138 ***

> ID：882422
> 
> 赞同：5
> 
> 时间：2009-05-19T12:23:11.697
> 
> 标签：perl, debugging, glibc

在运行 perl 程序时，我遇到了以下错误

```
*** 检测到 glibc *** perl: 双重释放或损坏 (!prev): 0x0c2b7138 ***
/lib/tls/i686/cmov/libc.so.6[0xb7daea85]
/lib/tls/i686/cmov/libc.so.6(cfree+0x90)[0xb7db24f0]
perl(Perl_pregfree+0x3e)[0x80a004e]
perl(perl_destruct+0xcf1)[0x806b711]
/usr/local/lib/perl/5.8.8/auto/threads/threads.so[0xb79d2dfb]
/usr/local/lib/perl/5.8.8/auto/threads/threads.so[0xb79d2f9b]
/usr/local/lib/perl/5.8.8/auto/threads/threads.so[0xb79d5fbb]
/lib/tls/i686/cmov/libpthread.so.0[0xb7e974fb]
/lib/tls/i686/cmov/libc.so.6(克隆+0x5e)[0xb7e19e5e]

```

我的操作系统是 Ubuntu 8.04，Perl 版本是 5.8.8

我的脚本包含线程......我无法共享代码，但想知道是否有人遇到过此类错误以及您如何解决/接近/分析它。除了解决此类问题外，是否有任何工具/日志可供我参考。

谢谢您的支持。

PS：我知道线程不是任何人的理想朋友。但是我不控制使用 perl 的决定。我只是在维护代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T17:25:04.567

打开您的代码并将其放在问题发生之前的*某个位置：*

```
$DB::single=1; 
```

然后运行

```
PERL5OPT='-dt'  perl yourscript.pl 
```

并击中

```
中央]
```

重复直到问题再次出现。（注意它是否在失败之前停止在您的手动断点处）。

然后迭代地向前/向后移动手动断点，直到您在终止点之前拥有它*（*您也可以使用一堆打印命令找到死亡点），然后从那里尝试工作，可能使用崩溃前的内省。

这将（希望）帮助您生成一个显示问题的测试用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T13:24:09.657

[perl5 porters 邮件列表上的这个线程](http://www.nntp.perl.org/group/perl.perl5.porters/2007/07/msg127119.html)似乎表明这是 5.8.8 和线程的一个已知问题。我认为您的问题可能是由于 perl 未捕获的代码问题。

如果可以的话，我建议将代码精简为一个最小的示例。然后，您应该能够尝试修复代码问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T12:34:32.813

最可能的原因是 glibc 版本不兼容。您需要使用编译它的 glibc 版本运行 Perl

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T12:36:42.390

这看起来像是 Perl 内部的错误。“双重释放或损坏”是指内存被释放两次或损坏。Perl 为您管理内存，因此如果 Perl 工作正常，这种情况永远不会发生。

有可以升级到更新版本的 Perl 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T19:55:54.307

尝试从 CPAN 更新 'threads' 和 'threads::shared' 模块。

# c# - CRM Opportunity 中自动生成的编号

> ID：882427
> 
> 赞同：1
> 
> 时间：2009-05-19T12:24:03.833
> 
> 标签：c#, plugins, dynamics-crm, dynamics-crm-4

假设我在 Account 中添加了一个名为 Acc Code 的字段。在此字段中，用户可以手动输入 2 位字母。示例：用户创建名为“Successful Company Pty Ltd”的账户，用户手动输入“SC”的账户代码。用户创建另一个名称为“Another Company Pty Ltd”的帐户，用户使用“AC”输入帐户代码。

在 Opportunity 上，我添加了一个名为 Opp Code 的字段。该字段包含 5 位数字，2 位来自潜在客户的 Acc Code 字母（由 Opportunity 称为客户的帐户）和 3 位自动编号。自动编号取决于潜在客户。这意味着，对于潜在客户“Successful Company Pty Ltd”，Opp 代码为 SC001，如果再次有新的机会，代码为 SC002。如果商机是为潜在客户“Another Company Pty Ltd”创建的，则起始 Opp 代码为 AC001。

我需要有关如何实施自动编号的建议取决于潜在客户。我想象使用插件，但不确定如何搜索最后一个 Opp Code 编号（因为该编号取决于 Acc Code）。有人介意帮助或举例说明如何做到这一点吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T17:55:50.843

这是一个伪代码解决方案。

*   您可以搜索以获取所有以“Acc Code”开头的“Opp Code”。
*   然后你解析那些“Opp Code”（你知道它是 AA000，所以你删除了这 2 个首字母）并取最大数，然后加 1。
*   然后，您将新的“Opp 代码”设置为您的机会。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T17:59:46.267

插件路线似乎是最好的方法。我会先在白板或纸上画出我的过程。你需要非常清楚什么时候会发生。然后您可以开始编写插件，因为您知道在哪里需要发生什么。

我相信您已经找到了大量有关如何编写 Crm 插件的资源。为 Crm 开发最艰难的事情对于任何类型的开发来说都是最艰难的事情，您必须决定如何做事。例如：

*   可以从 Outlook 客户端创建/修改机会吗？
*   如果我使用的是联系人而不是帐户会怎样？
*   然后它会占用联系人的父帐户吗？
*   创建机会后，是否可以更改帐户？

一旦您非常清楚自己想要做什么，我相信当您遇到特定问题时，社区可以为您提供很多帮助。

基于所有这些问题，将是如何最好地解决这个问题的答案。可能是客户对此的期望很小，并且您必须想出一个可能不是很健壮但比完整插件开发更快的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-28T13:31:17.980

这是我的做法：

1.  在客户实体上创建额外的字段，以应对机会
2.  创建新客户时，将该字段设置为 1，因为这将是下一个编号，该编号将分配给该客户作为潜在客户的机会。
3.  创建新机会时，在帐户字段中查找下一个数字。
4.  将该号码分配给机会 opp 代码
5.  增加帐号。

步骤 3 - 5 应该在插件中。重要的是它们作为原子操作执行，并且一次只有一个。使用 Mutex 类来确保这一点，因为 crm 插件在多个进程中执行。（除非您有农场部署。在这种情况下，互斥锁将不起作用。）

# nunit - 在 nunit-console 中指定路径

> ID：882428
> 
> 赞同：2
> 
> 时间：2009-05-19T12:24:33.863
> 
> 标签：nunit

如果可以，我可以指定要在 nunit-console 中运行的 dll 的路径吗？

我通常做的是在命令提示符下我给 nunit-console testassembly1.dll 在这里测试 assembly1.dll 存在于与 nunit-console.exe 相同的路径中，但我可以在不同的路径中运行 dll .if 那么如何

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-26T10:45:35.787

您可以简单地将路径添加到命令行：

```
nunit-console.exe c:\path\testassembly1.dll 
```

如果您的路径包含空格，请用引号将路径和文件名括起来：

```
nunit-console.exe "c:\path with spaces\testassembly1.dll" 
```

# python - 如何从我的 URL 中隐藏“cgi-bin”、“.py”等？

> ID：882430
> 
> 赞同：12
> 
> 时间：2009-05-19T12:24:38.340
> 
> 标签：python, cgi

全新的网页设计，使用 python。启动并运行 Apache，测试在 cgi-bin 目录中工作的 python 脚本。当我明确输入 URL 时获得有效结果：“.../cgi-bin/showenv.py”

但我不希望 URL 看起来那样。例如，在 stackoverflow 中，我的地址栏中显示的 URL 从来没有显示用于运行它们的脚本的杂乱细节。它们没有 cgi-bin、.py 等扩展。我怎么做？

编辑：感谢您的回复，每一个都有帮助，要学习很多。我现在要进行 URL 重写；文档中的示例看起来非常接近我真正想要做的。但我致力于 python，所以将不得不看看 WSGI。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-19T13:09:58.063

编写web应用程序的python方式不是cgi-bin。这是通过使用[WSGI](http://wsgi.org)。

WSGI 是 Web 服务器和 Python Web 应用程序或框架之间的标准接口。[PEP 0333](http://www.python.org/dev/peps/pep-0333/)对其进行了定义。

使用它代替 CGI 没有缺点。而且你会收获很多。漂亮的 URL 只是您可以轻松完成的巧妙操作之一。

此外，编写 WSGI 应用程序意味着您可以部署在任何支持 WSGI 接口的 Web 服务器上。Apache 通过使用[mod_wsgi](http://code.google.com/p/modwsgi/)来做到这一点。

您可以像这样在apache中配置它：

```
WSGIScriptAlias /myapp /usr/local/www/wsgi-scripts/myapp.py 
```

然后所有请求`http://myserver.domain/myapp`都将转到 myapp.py 的`application`可调用对象，包括`http://myserver.domain/myapp/something/here`.

示例`myapp.py`：

```
def application(environ, start_response):
    start_response('200 OK', [('Content-type', 'text/plain')])
    return ['Hello World!'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T12:27:48.240

我认为您可以通过 Apache 配置重写 URL 来做到这一点。[您可以在此处](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)查看用于重写的 Apache 文档。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T13:11:46.547

您会发现该`ScriptAlias`指令很有帮助。使用

```
ScriptAlias /urlpath /your/cgi-bin/script.py 
```

您可以通过`http://yourserver/urlpath`.

您可能还想研究一下[`mod_passenger`](http://modrails.com)，尽管我上次使用 WSGI 时，它是库中的一种“二等公民”——如果它用于服务整个域，它可以检测 WSGI 脚本，但除此之外还有没有指令让它运行 WSGI 应用程序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-19T12:28:22.937

您必须使用 URL 重写。

这不是一个菜鸟问题，它可能非常棘手:)

[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

希望你觉得它有帮助

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-19T12:28:23.967

只需使用一些好的 Web 框架，例如 django，您就可以拥有比 URL 更多的此类 URL，您将拥有更好的基础架构、模板、db orm 等

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-19T12:39:56.843

这是我用来实现这样的事情的 .htaccess 的摘录，例如，这会将所有不指向 index.php 的请求重定向到该文件，当然您必须检查您重定向的文件中的服务器变量去看看，要求什么。

或者您只需制定一个重写规则，您可以在其中使用 RegExp`^.*\/cgi-bin\/.*\.py$`来确定何时以及重写什么。这样的 RegExp 必须非常仔细地制作，以便仅在需要时进行重写。

```
<IfModule mod_rewrite.c>
    RewriteEngine On   #activate rewriting
    RewriteBase /      #url base for rewriting
    RewriteCond %{REQUEST_FILENAME} !index.php #requested file is not index.php
    RewriteCond %{REQUEST_FILENAME} !^.*\.gif$ #requested file is no .gif
    RewriteCond %{REQUEST_FILENAME} !^.*\.jpg$ #requested file is no .jpg
    RewriteCond %{REQUEST_FILENAME} !-d        #is not a directory
    RewriteRule . /index.php [L]               #send it all to index.php
</IfModule> 
```

上面的示例使用`RewriteCond`itions 来确定何时重写（.gif's、.jpeg's 和 index.php 被排除在外）。

嗯，那已经是很长的文本了。希望它对您有所帮助，但您将无法避免学习 Apache RewriteEngine 的语法。

# refactoring - 避免输入验证中的重复代码

> ID：882433
> 
> 赞同：3
> 
> 时间：2009-05-19T12:26:01.380
> 
> 标签：refactoring, user-interface, validation

假设您有一个执行某种工作的子系统。它可以是任何东西。显然，在这个子系统的入口点，输入会有一定的限制。假设这个子系统主要由 GUI 调用。子系统需要检查它收到的所有输入以确保它是有效的。如果输入无效，我们不想 FireTheMissles()。UI 也对验证感兴趣，因为它需要报告哪里出了问题。也许用户忘记指定目标或将导弹瞄准发射台本身。当然，你可以只返回一个空值或抛出一个异常，但这并不能具体告诉用户出了什么问题（当然，除非你为每个错误编写一个单独的异常类，我可以接受 if这是最好的做法）。

当然，即使有例外，你也有问题。在单击“发射导弹！”之前，用户可能想知道输入是否有效。按钮。您可以编写一个单独的验证函数（当然 IsValid() 并没有太大帮助，因为它不会告诉您出了什么问题），但是您将从按钮单击处理程序中调用它，然后再次从 FireTheMissles( ) 函数（我真的不知道它是如何从一个模糊的子系统变成一个导弹发射程序的）。当然，这不是世界末日，但是在没有任何更改的情况下连续调用两次相同的验证函数似乎很愚蠢，特别是如果这个验证函数需要计算一个 1gb 文件的哈希值。

如果函数的前提条件明确，GUI 可以进行自己的输入验证，但我们只是在复制输入验证逻辑，其中一个的更改可能不会反映在另一个中。当然，我们可以在 GUI 中添加检查以确保导弹目标不在同盟国内，但是如果我们忘记将其复制到 FireTheMissles() 例程，当我们切换到时，我们会意外炸毁我们的盟友一个控制台界面。

因此，简而言之，您如何实现以下目标：

1.  输入验证不仅可以告诉您出了什么问题，还可以告诉您具体出了什么问题。
2.  无需调用依赖它的函数即可运行此输入验证的能力。
3.  没有双重验证。
4.  没有重复的代码。

另外，我只是想到了这一点，但错误消息不应该写在 FireTheMissles() 方法中。GUI 负责挑选适当的错误消息，而不是 GUI 调用的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:38:43.773

“子系统需要检查它收到的所有输入以确保它是有效的”

将输入与其说是参数列表，不如将其视为消息，之后会变得更容易。

消息类有一个 IsValid 成员函数，它记住是否调用了 IsValid 以及结果是什么。它还记得它的状态，如果状态改变，那么它需要重新验证。此消息类还保留验证错误列表。

现在，UI 构建了一个 TargetMissiles 消息，UI 可以对其进行验证，或者将其直接传递给 MissileFiring 子系统，它会检查消息是否经过验证，如果没有，则验证它，并根据情况进行/失败。UI 会返回消息，其中已经填充了验证列表。

带有验证的消息位于单独的库中。没有重复的代码。

这个好听吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T12:33:20.413

这就是[模型-视图-控制器](http://en.wikipedia.org/wiki/Model-view-controller)的全部意义所在。

您建立一个模型（由坐标、导弹类型和导弹数量组成的发射），该模型有一个 validate 方法，该方法返回错误/警告列表。当您更新模型时（在按键、<ENTER>、按钮按下时），您调用 validate 方法并向用户显示任何警告、错误等。（Eclipse 在对话框中的工具栏下方有一个小区域，这样做，你可能想看看那个。）

当模型有效时，您激活发射导弹按钮，以便用户知道他们可以发射导弹。如果您有一个更新事件被特别频繁地调用或验证的一部分成本特别高，您可以在模型上使用一个 validate_light 方法，用于仅验证易于执行的部分。

当您切换到基于控制台的 UI 时，您从命令行参数构建模型，调用相同的 validate 方法（并向 stderr 报告错误），然后发射导弹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T12:40:10.867

加倍验证。在许多情况下，验证是三倍的（例如，数据库中的 FK 和非空字段）。根据您的平台，可能可以对验证规则进行一次编码。例如，您的前端和后端代码可以共享 C# 业务类。或者，您可以将验证规则存储为后端和前端都可以访问应用的元数据。

实际上，您需要对验证问题做出不同的响应（例如，在其他输入有效之前，甚至不应该启用 Fire Missile 按钮），将有不同的代码与相同的规则相关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T12:33:40.990

我建议使用一个输入验证类，它在其构造函数中采用输入类型（枚举），并提供一个公共 IsValid 方法。

IsValid 方法应返回布尔值 TRUE 表示有效，FALSE 表示无效。它还应该有一个 OUT 参数，该参数接受一个字符串并将状态消息分配给该字符串。如果调用者愿意，它可以自由地忽略该消息，或者如果这适合上下文，则将其报告给 GUI。

因此，在伪代码中（请原谅类似 Delphi 的语法，但它应该对任何人都可读）：

```
//different types of data we might want to validate
TValidationType = (vtMissileLaunchCodes, vtFirstName, 
  vtLastName, vtSSN);  

TInputValidator = class
public
  //call the constructor with the validation type
  constructor Create(ValidationType: TValidationType);

  //this should probably be ABSTRACT, implemented by descendants
  //if you took that approach, then you'd have 1 descendant class
  //for each validation type, instead of an enumeration
  function IsValid(InputData: string; var msg: string): boolean; 
```

然后要使用它，你会做这样的事情：

```
procedure ValidateForm;
var
  validator: TInputValidator;
begin
  validator := TInputValidator.Create(vtSSN);
  if validator.IsValid(edtSSN.Text,labelErrorMsg.Text) then 
    SaveData;  //it's valid, so save it!
  //if it wasn't valid, then the error msg is in the GUI in "labelErrorMsg".
end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T12:34:28.320

每条数据都有自己的元数据（类型、格式、单位、掩码、范围等）。不幸的是，这并不总是指定的。

GUI 控件需要使用元数据检查输入，并在数据无效时给出警告/错误。

示例：一个数字有一个范围。范围由元数据提供，但范围检查由控件提供。

# google-app-engine - Google App Engine URL Fetch 为 X-Forwarded-For 标头设置的值是多少？

> ID：882443
> 
> 赞同：1
> 
> 时间：2009-05-19T12:28:23.450
> 
> 标签：google-app-engine, urlfetch, request-headers

文档说（[http://code.google.com/appengine/docs/java/urlfetch/overview.html#Request_Headers](http://code.google.com/appengine/docs/java/urlfetch/overview.html#Request_Headers)）：

> 这些标头由 App Engine 酌情设置为准确的值

X-Forwarded-For 的值是否包含 gae 应用程序的某些身份？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T14:18:47.097

目前，URLFetch 发出的请求中似乎未设置 X-Forwarded-For。

您可以通过访问[http://shell.appspot.com/并为响应 HTTP 请求的站点（例如](http://shell.appspot.com/)[http://www.showhttprequest.com/](http://www.showhttprequest.com/)）执行 URLFetch来验证这一点。App Engine 将用户代理字符串设置为“AppEngine-Google; (+ [http://code.google.com/appengine](http://code.google.com/appengine) )”，但根本没有设置 X-Forwarded-For。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-06-02T08:49:59.803

如果您访问 shell.appspot.com 并运行以下代码：

```
from google.appengine.api import urlfetch
url = 'http://www.showhttprequest.com/'
result = urlfetch.fetch(url)
print result.content 
```

您将看到（截至 2009 年底的某个时间）AppEngine 现在将 appid 放入用户代理标头中。所以你的用户代理最终看起来像：

```
AppEngine-Google; (+http://code.google.com/appengine; appid: shell) 
```

# python - 是否有可以在 Google App Engine 上运行的免费 wiki 源代码？

> ID：882454
> 
> 赞同：0
> 
> 时间：2009-05-19T12:29:34.010
> 
> 标签：python, google-app-engine, open-source, wiki

我发现示例代码[cccwiki](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/cccwiki)很好，但我想要一个 wiki，它可以跟踪页面的所有修订并让用户显示差异并恢复到以前的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T18:20:23.650

有人指点我[pickywiki](http://bitbucket.org/ianb/pickywiki/)。我会试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:11:58.753

您可以从[http://code.google.com/p/google-app-engine-samples/downloads/detail?name=cccwiki_20080409.tar.gz&can=2&q=](http://code.google.com/p/google-app-engine-samples/downloads/detail?name=cccwiki_20080409.tar.gz&can=2&q=)开始，这正是“一个简单的 Google App Engine wiki 应用程序”供您下载、试用和修改。您还可以通过[http://code.google.com/p/google-app-engine-samples/source/browse/trunk/cccwiki/](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/cccwiki/)在线浏览其来源。

# .net - 是否有 2.0 SP2 .NET 可再发行版？

> ID：882456
> 
> 赞同：1
> 
> 时间：2009-05-19T12:30:05.617
> 
> 标签：.net

我对.net“可再发行文件”有点困惑......

我们的 C# 代码使用了一些需要 .net 2.0 sp2 的 API 调用。**由于各种原因，我们不想要求用户在安装时下载任何东西**（这是一个带有安装程序的 Winforms 应用程序）。我们目前包括 2.0 可再发行组件，当然还有需要 sp2 throws 的函数。

是否可以在某处找到 2.0 SP2 的可再发行包？

如果没有，最好的选择是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T12:34:21.490

[.NET 2.0 SP2](http://www.microsoft.com/downloads/details.aspx?familyid=5B2C0358-915B-4EB5-9B1D-10E506DA9D0F&displaylang=en) 或 [.NET 3.5 SP1](http://www.microsoft.com/downloads/details.aspx?FamilyId=AB99342F-5D1A-413D-8319-81DA479AB0D7&displaylang=en)

# c# - 在中等信任下重置 ASP.Net 中的更改密码控制

> ID：882458
> 
> 赞同：1
> 
> 时间：2009-05-19T12:30:44.867
> 
> 标签：c#, asp.net, medium-trust

ChangePassword 控件不允许我们连续多次更改密码。

该控件在第一次之后从不显示其文本框。我在这里找到了一个修复程序（[http://msmvps.com/blogs/egoldin/archive/2007/10/30/reseting-changepassword-control.aspx](http://msmvps.com/blogs/egoldin/archive/2007/10/30/reseting-changepassword-control.aspx)），但它在中等信任下无法工作。

任何想法如何在中等信任下重置我的 ChangePassword 控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-03-25T11:57:24.267

使用反射器通常比反射更好；）

IControlDesignerAccessor 控件 = (IControlDesignerAccessor)ChangePassword; 哈希表 = 新哈希表（1）；表[“当前视图”] = 0; control.SetDesignModeState(table);

# design-patterns - 中介者模式或责任过多

> ID：882459
> 
> 赞同：3
> 
> 时间：2009-05-19T12:31:08.233
> 
> 标签：design-patterns, language-agnostic, mediator

在我的应用程序中，我有几个必须相互了解的组件，例如菜单栏和工具栏，它们都需要了解表格以添加或删除作业并找出选择了哪个作业。

因此，我创建了一个名为的对象`guiMediator`，我将其传递给每个对象，并且他们使用它注册自己，以便他们可以使用该对象相互联系。它还负责在添加新工作或后台工作人员完成工作时触发事件。

既然对系统了解很多，那么这种用法是不是在一个地方责任太大了，还是这个模式的正确用法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:40:46.343

通常我会使用命令模式来做类似的事情：

1.  用户单击菜单栏上的“Foo”按钮，该按钮执行 FooButtonClickedCommand。
2.  FooButtonClickedCommand 做它应该做的任何事情，然后适当地修改视图（菜单栏、表格等）。

所以你的命令知道你所有的视图组件，但你的视图组件唯一需要知道的是当用户完成给定动作时要执行哪个命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T12:49:59.397

我会使用被动视图，您可以在[此处](http://www.martinfowler.com/eaaDev/)阅读。

*   您会将每个表单放在一个界面后面
*   每个表单都会使用一个或多个 UI 对象注册自己
*   UI 对象应该是自然组织的，如 Setup、Entry、Display 等。文字处理器可能只有一个 UI 对象用于每个文档。而机器控制器可能对每个屏幕有多个对象。
*   该接口被实现为将事件传递给 UI 对象并公开表示控件、向 UI 对象绘制表面的薄壳。
*   UIObject 然后接受输入并计算出要执行的命令对象
*   命令对象将更新模型，然后告诉一个或多个 UI 对象更新视图。
*   UIObjects 更新视图。

请注意，除了 UI 界面之外，其他任何地方都不知道按钮、复选框等。您使用接口抽象出实际的实现。

这会给你带来几个优势。首先，它将记录您的代码如何与 UI 交互，为您提供一个实现模拟对象以用于自动化测试的地方，最后为更改 UI 提供更大的自由度。

例如替换可点击面板而不是命令按钮。然后表单将开始从面板而不是按钮传递点击事件。表单可能不知道每个小部件应该执行的实际命令。UI 对象负责处理这些。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2009-05-19T12:33:54.873

听起来比另一种更好......但是，嘿，我嫁给了最不丑的妹妹;-)

# sql-server - sql server 2005：使用@@identity 安全吗？

> ID：882460
> 
> 赞同：3
> 
> 时间：2009-05-19T12:31:11.573
> 
> 标签：sql-server, identity, unsafe

我有一个程序，我在员工表中插入记录。使用@@identity 获得empid？当这个程序将被多个用户同时调用时，它可能会返回同时插入的其他员工的身份。因为系统没有对身份进行锁定？

--code --identity on for empid column
insert into employee (name) values ('sahil'); 返回@@身份

参考[sql server 2005：使用@@identity 是否安全？](https://stackoverflow.com/questions/882460/sql-server-2005is-it-safe-to-use-identity) 锁定身份问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T12:32:53.147

您应该改用 SCOPE_IDENTITY() 。但是，@@IDENTITY 指的是当前连接，因此其他用户不会影响您，但还有其他问题需要考虑。

更多信息[在这里](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T18:12:11.380

@@identity 使用起来不安全。如果表有一个触发器，该触发器插入到另一个表，其标识是将返回的值。永远不要使用它来获取您刚刚插入的 idnetity 值。您可能认为我现在没有触发器，但您永远不知道什么时候可以添加触发器，并且您可能需要很长时间才能意识到您的数据已经无可救药地混乱了。

# oracle - 如何确定 PL/SQL 参数值是否为默认值？

> ID：882466
> 
> 赞同：3
> 
> 时间：2009-05-19T12:31:59.637
> 
> 标签：oracle, plsql, parameters, default

假设我有一个 PL/SQL 存储过程，如下所示：

```
PROCEDURE do_something(foo VARCHAR2 DEFAULT NULL) IS
BEGIN
    /* Do something */
END; 
```

现在，假设`do_something`有两种不同的调用方式：

```
/* Scenario 1: The 'foo' parameter defaults to NULL */
do_something();

/* Scenario 2: The 'foo' parameter is explicitly set to NULL */
do_something(foo => NULL) 
```

如何定义`do_something`过程以确定调用它的场景？

编辑：澄清我对此过程的意图：

```
FUNCTION find_customer(name VARCHAR2 DEFAULT NULL, number VARCHAR2 DEFAULT NULL) RETURN NUMBER IS
BEGIN
    /* Query the "customer" table using only those parameters provided */
END; 
```

以下是此过程与所需的关联 SQL 子句的示例用法：

```
/* SELECT * FROM customer WHERE customer.name = 'Sam' */
find_customer(name => 'Sam')

/* SELECT * FROM customer WHERE customer.name = 'Sam' AND customer.number = '1588Z' */
find_customer(name => 'Sam', number => '1588Z')

/* SELECT * FROM customer WHERE customer.name = 'Sam' AND customer.number IS NULL */
find_customer(name => 'Sam', number => NULL)

/* SELECT * FROM customer WHERE customer.name IS NULL */
find_customer(name => NULL)

/* SELECT * FROM customer WHERE customer.name IS NULL AND customer.number IS NULL */
find_customer(name => NULL, number => NULL) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T13:15:20.813

与其默认为 null，不如将省略的参数值默认为您在现实世界中永远不会使用的值，怎么样？您使用的值应该属于某个域，因此请选择该域之外的值。

例如

过程 do_something(foo VARCHAR2 DEFAULT '*#@') 是

```
l_foo  VARCHAR2(32000); -- local copy of foo parm 
```

开始

```
IF foo = '*#@' THEN

-- I know the parm was omitted

   l_foo := NULL;

ELSE

   l_foo := foo;

END IF; 
```

结尾;

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T12:45:28.237

您可以重载该过程而不是使用默认值：

```
PROCEDURE do_something(foo VARCHAR2) IS
BEGIN
    /* Do something */
END;

PROCEDURE do_something IS
BEGIN
    /* here you know: no argument. Then call do_something(null) */
END; 
```

# jquery - jquery 简单菜单翻转（无动画队列）

> ID：882467
> 
> 赞同：3
> 
> 时间：2009-05-19T12:32:02.833
> 
> 标签：jquery, animation, queue, hover

我有一个简单的无序列表，其中列表项作为菜单项我创建了 jquery 只是为了有一个有趣的翻转效果：

```
$('#nav ul ul li').hover(function(){
$(this).animate({ 
        marginLeft: "20px",
      }, 300 );
}, function(){
$(this).animate({ 
        marginLeft: "0px",
      }, 300 );
}); 
```

这个脚本的问题是，如果你多次冲过菜单，动画队列就会建立起来。我尝试在两者之间使用 .stop() ，但随后它也会停止其他列表项的动画，在任何情况下都应返回默认状态。有没有办法停止（）每个项目的队列？但不是整个列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:39:40.650

我不明白为什么 $(this) **.stop()** .animate(...) 不适合你，但你也可以尝试这种方法：

```
$(":not(:animated)", this).animate(...) 
```

这只会触发当前没有动画的元素上的动画

# asp.net - jQuery 中的 web 服务返回集合类型

> ID：882470
> 
> 赞同：1
> 
> 时间：2009-05-19T12:32:56.983
> 
> 标签：asp.net, jquery

我有一个返回 List 对象的 ASP.NET WebService

```
public class Students
{
    public string StudentName { get; set; }
    public int Age { get; set; }
} 
```

我正在使用这个 jQuery 代码访问这个网络服务

```
$.ajax({
    type: "POST",
    url: "/Students.asmx/GetStudents",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        $("#myDiv").html(msg.d);
    }
}); 
```

但我得到的只是对象对象。

如何获取该对象中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:45:18.393

jQuery 中的一切都是 [Object object]（当您检查 jQuery 对象时）。

您实际上得到了一组 Student 对象；你可以像这样遍历结果

```
for (x = 0; x < msg.length; x++) {
    alert(msg[x].StudentName);
} 
```

# pdf - 生成自定义文档的最佳方法？

> ID：882477
> 
> 赞同：0
> 
> 时间：2009-05-19T12:33:59.727
> 
> 标签：pdf, latex, printing, postscript, truetype

我正在生成用于打印的文档。它应该使用特定的 TTF 字体，并且所有内容都必须使用矢量图形打印（为了质量）。一些文本应该被自动替换（例如当前时间）。它还应该包括一个带有图表的自定义生成的 EPS 图像。

理想情况下，我希望有某种可以轻松替换文本的文档模板，如果它可以通过路径导入图像会很好。但我不确定哪种格式对此有好处。我能想到的最好的是LaTeX，但我不喜欢将它与TTF一起使用需要大量的手动工作......还有其他想法吗？

顺便说一句，我正在使用 OS X ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T14:40:34.887

回忆录包对于您的特殊布局非常灵活。Xetex 使用您的系统字体（与 TexLive 一起安装）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T14:10:06.817

有几种产品可以以编程方式为您构建 PDF。我自己只使用过 Coldfusion Report Builder，这对于您的应用程序可能不实用/不实惠。如果您的预算允许，我会研究商业报告产品。我知道 Adob​​e 有几个可以生成 Flash、FlashPaper 或 PDF 输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:41:37.357

您可以使用 imagemagick 或 gimp script-fu 将大部分元素混合到 EPS

# c++ - C++ 部分特化（函数指针）

> ID：882478
> 
> 赞同：1
> 
> 时间：2009-05-19T12:34:02.783
> 
> 标签：c++, specialization, partial-specialization

任何人都可以告诉，下面是否是合法的c++？

```
template < typename s , s & (*fn) ( s * ) > 
class c {}; 
```

// 部分特化

```
template < typename s , s & (*fn) ( s * ) > 
class c < s*, s* & (*fn)(s**)  {}; 
```

> g++ (4.2.4) 错误：函数调用不能出现在常量表达式错误中：模板参数 2 无效

尽管它确实适用于显式专业化

```
int & func ( int * ) { return 0; }
template <> class c < int , func> class c {}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T12:54:49.433

我想你的意思是

```
template < typename s , s & (*fn) ( s * ) > 
class c {};

// partial specialization
template < typename s , s & (*fn) ( s * ) > 
class c < s*, fn >  {}; 
```

# asp.net - ASP.NET：Gridview 行内的中继器控件

> ID：882485
> 
> 赞同：1
> 
> 时间：2009-05-19T12:35:06.853
> 
> 标签：asp.net, gridview, repeater

我想要一个 Gridview 行内的 Repeater 控件。那么如何分配Repeater控件的DataSource，使其使用的数据是GridView行的具体数据呢？

我试过这个： DataSource='<%# Eval(Container, "DataItem.InnerVal")

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T12:40:32.490

您将需要[`GridView.RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)在代码隐藏中处理该事件。这将允许您动态创建 a`Repeater`并将其绑定到您所在行的数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2010-01-05T11:22:33.633

通过这个： http: [//www.codeproject.com/KB/database/repeater_in_gridview.aspx](http://www.codeproject.com/KB/database/repeater_in_gridview.aspx) 希望它对你有所帮助。

# events - Gridview 服务器事件停止触发

> ID：882488
> 
> 赞同：0
> 
> 时间：2009-05-19T12:35:59.973
> 
> 标签：events, gridview, datagridtemplatecolumn

有通常的带有模板列的 Gridview

```
<ItemTemplate>
    "lbOpen" Text='Select' runat="server" OnCommand="lbOpen_Command"
    CommandName="open" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "OrderID") %>'  /> 
```

出乎意料地，由于未知原因，“lbOpen_Command”停止了射击。在页面 OnInit() 停止后，“lbOpen_Command”处的断点未命中。.aspx 页面和事件执行链甚至没有任何变化。

可能是什么原因？有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T12:43:23.327

在页面执行时间线的哪个时间点将数据绑定到数据网格？如果您在触发 lbOpen_Command 事件之前这样做，那么您可能正在清除该事件。

# c# - 如何决定在哪里存储每个用户的状态？注册表？应用程序数据？隔离存储？

> ID：882490
> 
> 赞同：23
> 
> 时间：2009-05-19T12:36:34.307
> 
> 标签：c#, wpf, windows, winforms, registry

什么时候应该将 Windows 注册表用于每个用户的状态，什么时候应该使用文件系统，尤其是用户的 AppData 文件夹？（例如，C:\Users\USERNAME\AppData）。隔离存储从何而来？

是否有一个相当严格的规则，或者只是一个模糊的东西，比如“使用注册表，直到它变得太多数据无法存储在注册表中”。或“使用任何你喜欢使用的东西。”

是否存在影响决定的 Windows 徽标要求？

如果我使用 AppData 目录，如何在 Local、Roaming 和 LocalLow 之间进行选择？

编辑：我刚刚注意到这些类似的问题：

*   [何时以及为何应将数据存储在注册表中？](https://stackoverflow.com/questions/268424/when-and-why-should-you-store-data-in-the-windows-registry)
*   [用于存储用户可配置应用程序设置的注册表与 Ini 文件](https://stackoverflow.com/questions/6607/registry-vs-ini-file-for-storing-user-configurable-application-settings)。

我会总结回复。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-19T14:34:41.543

如果您有少量的键/值对并且值不大，则注册表很棒-并且您不关心 xcopy 部署-然后使用注册表（我知道这不准确，但通常很明显当使用注册表变得很痛苦时）。

如果您想要 xcopy 部署，数据显然必须与程序位于同一文件夹中 - 但程序可以位于 AppData 文件夹下的某个位置，它不必位于“程序文件”下。

仅在需要或必须使用时才使用隔离存储 - 例如 ClickOnce。

否则，请使用 AppData\Roaming，仅在有充分理由的情况下使用 Local 或 LocalLow。

编辑：这是漫游、本地和 LocalLow 之间的区别：

Windows 有一个鲜为人知的功能，称为“漫游配置文件”，总体思路是在启用此功能的企业环境中，任何用户都可以使用任何计算机。

当用户登录时，他的私人设置会从服务器下载，当他注销时，他的设置会上传回服务器（实际过程显然更复杂）。

Vista 中用户的“漫游”文件夹或 XP 中的“应用程序数据”中的文件随用户移动 - 因此任何设置和数据都应存储在那里。

vista 中的“Local”和“LocalLow”下的文件以及 XP 中的“Local Settings”下的文件没有，因此它是临时文件、与特定计算机相关联的东西或可以重新计算的数据的好地方。

在 Vista 中，作为我们都知道和喜爱的新安全功能的一部分，您可以让程序以“低完整性模式”运行（例如 IE 处于保护模式），这些程序以降低的权限运行并且无法访问其中的文件用户的个人资料 - “LocalLow”文件夹下的文件除外。

因此，总而言之，存储在“LocalLow”中的文件本质上是不安全的，并且“Local”/“Local Settings”中的文件可能在某些大公司中不可用 - 所以除非你有充分的理由并且确切地知道你在做什么“漫游”/“应用程序数据”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T15:43:36.680

Don't clutter up my Registry thank you.

Use isolated storage, thats what it's for.

See [Was The Windows Registry a Good Idea?](http://www.codinghorror.com/blog/archives/000939.html) On Jeffs Blog...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T12:37:39.733

您可能需要考虑[独立存储](http://msdn.microsoft.com/en-us/library/3ak841sy(VS.80).aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T13:55:42.947

我不知道是否有一个固定的规则，但要考虑的一件事是注册表是事务的——并发读/写操作更安全。因此，如果您的用户数据可能在运行时由多个线程写入（或者如果您的产品包中有多个 exe），请考虑使用注册表。

历史：MS 从 .ini 文件转到注册表的一个原因（据我所知）正是为了尝试处理并发访问问题。

.Net（有点）以 xml .config 文件的形式回到 .ini 文件，但是这些配置文件不应该在运行时写入（或者至少如果有并发写入者/读取者的机会则不写入） .

更多信息：http: [//blogs.msdn.com/oldnewthing/archive/2007/11/26/6523907.aspx](http://blogs.msdn.com/oldnewthing/archive/2007/11/26/6523907.aspx)

# msbuild - MSBuild 是否知道项目是否需要重新编译？

> ID：882497
> 
> 赞同：1
> 
> 时间：2009-05-19T12:37:44.103
> 
> 标签：msbuild, build-process

首先，通过观察 Visual Studio 使用其默认的 .*proj 文件编译事物，我有一个基本假设，如果您连续两次构建相同的解决方案，它会检测到没有任何变化，并且似乎会通过解决方案构建。这是否意味着它知道项目中没有任何更改并且不必生成新的 DLL 输出？

如果是这样，我有一个问题。假设我有一个包含多个类库的解决方案，并且每个项目中有一个 MSBuild 任务，它通过修改 AssemblyInfo.cs 自动增加构建的版本。事情是（如果我之前的假设是正确的）它每次都会这样做并触发每个类库的新重建。MSBuild 中是否有可以判断项目是否需要重新编译的目标或属性，如果需要，则跳过我的版本控制步骤？

我问是因为假设我更新了项目 A，而不是解决方案中的项目 B。如果我在解决方案上运行构建，我希望它更新项目 A 的版本，但由于项目 B 没有更改，我想不理会它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:31:18.770

是否在开发人员框中增加并不重要——重要的是您的每日/CI 构建仅在需要时增加。所以，我过去所做的是让一些小的 XML 文件包含下一个内部版本号，并让一个 MSBuild 任务获取这个 xml 文件并创建一个名为 Version.cs 的文件（包含您通常会在组装信息.cs）。

Version.cs 永远不会检查到您的源控制中 - 它是由构建生成的。

开发人员将同步当前的 XML 文件，构建他们的二进制文件，并获得当前的版本号。持续集成构建也可以做同样的事情。但是每日/官方构建会签出 XML 文件，增加版本信息，然后签入。从那一刻起，版本号已正式更改。

这个主题有一些变化，但总体思路是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:21:00.863

找到了一些东西：http: [//msdn.microsoft.com/en-us/library/ms171483.aspx](http://msdn.microsoft.com/en-us/library/ms171483.aspx)

> MSBuild 可以将输入文件的时间戳与输出文件的时间戳进行比较，并确定是跳过、构建还是部分重新构建目标。在以下示例中，如果 @(CSFile) 项目集合中的任何文件比 hello.exe 文件新，则 MSBuild 将运行目标；否则将被跳过：
> 
> ```
> <Csc
>     Sources="@(CSFile)" 
>     OutputAssembly="hello.exe"/> </Target> 
> ```

……那行得通。但后来我开始思考，如果有人在没有程序集的情况下从源代码控制中提取代码怎么办（我们就是这样做的）？由于它没有可比较的输出，因此无论如何它都会编译并增加版本。我认为复杂性可能会导致我放弃这种方法。

# windows - 我应该在哪个操作系统上试用 vs2010 beta1？哪个模拟器更快？

> ID：882498
> 
> 赞同：1
> 
> 时间：2009-05-19T12:37:52.853
> 
> 标签：windows, visual-studio, virtualization

我刚刚下载了 VS 2010 Beta1 Pro，我想设置一个 vm 来尝试新的 devenv。我应该尝试哪个操作系统和哪个模拟器软件以获得最佳性能？（目前我有 XP sp3、Win 7 RC、Win 2008）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T12:49:50.927

嗯....Win 7 或 2008。虽然我会说 Win 7，因为它更好地反映了 Microsoft 最新的开发环境....您不会在 2008 年真正进行开发....尽管您可以。

就我个人而言，我会双启动，特别是因为 Win 7 RC 是免费的，并在本机运行它。

否则，我肯定会确保您可以使用完整的硬件加速进行虚拟化。

[吉布森的这款软件](http://www.grc.com/securable.htm)将帮助您确定您的硬件是否支持全硬件加速。

如果是这样，显然您需要一个可以利用它的 VM 解决方案，例如 VMWare 或 MS HyperV

# asp.net-mvc - asp.net(mvc) 服务器应该如何将错误返回给 jquery ajax 调用以被错误回调捕获？

> ID：882499
> 
> 赞同：26
> 
> 时间：2009-05-19T12:37:56.787
> 
> 标签：asp.net-mvc, ajax, callback

假设我的控制器中有一个通过 jQuery AJAX 调用调用的方法。例如，我想删除一个用户。当一切正常时，我返回 new Content('ok') 并退出该方法。

发生错误时该怎么办？我想通过适当的状态代码来表示它，以便调用我的错误回调。为什么是状态码？阅读此处： [如何使用 ASP.NET MVC 在 jQuery AJAX 调用中触发“错误”回调？](https://stackoverflow.com/q/407651/61654)

但是，该方法不起作用，因为 IIS7 返回它自己的消息（错误请求）插入我的自定义错误消息。

除此之外还有另外两个陷阱：

1.  它也必须与 IIS6 一起使用
2.  IE8 不返回“错误请求”字符串。在错误回调中，属性 request.responseTest 为空。

错误回调可能如下所示：error: function(request) { alert(request.responseText);}

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-19T14:43:00.870

设置 Response.StatusCode 是正确的做法。要修复 IIS 的“有用”错误处理，请设置[HttpResponse.TrySkipIisCustomErrors](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.tryskipiiscustomerrors.aspx)属性。[您可以在此处](http://west-wind.com/weblog/posts/745738.aspx "IIS 7 错误页面超过 500 个错误")阅读有关此内容的更多信息。

# logging - 滴滴涕。域模型和日志记录

> ID：882509
> 
> 赞同：7
> 
> 时间：2009-05-19T12:39:51.680
> 
> 标签：logging, domain-driven-design

领域模型应该是无依赖的。因此 - 它不能包含对日志记录机制的任何引用。我知道记录基础设施和应用层没有任何问题，但是如果我想记录域模型怎么办？它不应该被记录，只是从外部（基础设施/应用程序）进行单元测试和记录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-20T16:02:49.533

您的域对象可以具有通知外部内部正在发生的事情的事件。

您的基础架构可以附加到这些事件以记录所需内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-24T05:21:50.627

试试[Log4PostSharp](http://code.google.com/p/postsharp-user-plugins/wiki/Log4PostSharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:43:29.427

如果您需要记录值，您可以使用反射来构建对象的字符串描述。许多平台都有[现成的库](http://commons.apache.org/lang/api/org/apache/commons/lang/builder/ReflectionToStringBuilder.html)，可以为你做这样的事情。

我真的看不到从域模型内部进行日志记录的许多明智用例。实际上，具有良好的测试覆盖率的日志记录技术用例并不*多*。我想可能有一些不错的合法的。

# .net - Microsoft 安全应用程序块的替代方案？

> ID：882512
> 
> 赞同：3
> 
> 时间：2009-05-19T12:40:15.877
> 
> 标签：.net, security, application-blocks

我们需要在具有 asp.net、winforms 和 Web 服务入口点的解决方案中实施基于角色的安全性。我们还需要一些前端来配置它。我真的不想自己动手，因为我以前做过几次，而且很乏味。

从历史上看，我一直不是 MS AB 的粉丝，因为我发现它们的架构过度且单元测试不足，但我已经有几年没有接触过它们了。

安全 AB 值得一看，还是我应该使用替代方案？你会推荐什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T13:53:35.877

现在还处于早期阶段，但我现在已经调查了 Security AB 和另一个名为 NetSqlAzMan 的解决方案。我发现后者要优越得多——事实上，这绝对是太棒了。

[http://netsqlazman.codeplex.com/](http://netsqlazman.codeplex.com/)

编辑：一两年后，我们对 NetSqlAzMan 非常满意。

# linux - 使用 suid 调试 Linux 进程

> ID：882515
> 
> 赞同：0
> 
> 时间：2009-05-19T12:40:32.850
> 
> 标签：linux, unix, permissions

我开发了一个需要 root 权限的应用程序。我使用 Code:Blocks 通过`sudo codeblocks`命令启动。问题是在 root'ed Code::Blocks 中开发会导致使用 root 所有者创建源文件和 CB 配置文件。

我以为我可以在代码块可执行文件上使用 setuid，但 GTK 应用程序不允许这样做。

是否有其他方法可以提升被调试程序的有效 UID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:55:20.090

我认为调试需要root权限的程序最简单的解决方案是以root身份运行调试器。

# visual-studio - 带有 Windows 7 RC1 的 Visual Studio 2010 的问题

> ID：882519
> 
> 赞同：0
> 
> 时间：2009-05-19T12:41:17.043
> 
> 标签：visual-studio, beta

是否有人遇到错误，您将针对 .NET 3.5 的 VS2008 项目升级到 VS2010，并且错误消息指出您没有安装 .NET 3.5？

以下错误消息的片段

“目标是“.NETFramework, Version=v3.5, Profile=Full”，这台机器上没有安装”

我知道同时运行多个未发布的产品会增加我对失败的更改，但我仍然想尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T13:24:00.180

好吧，此时，这个错误似乎是VSTS2010中的一个错误。

[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=453802](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=453802)

如果您也遇到此问题，请为 MS Connect 中的错误投票。

# c++ - Opencv MPEG7 描述符

> ID：882521
> 
> 赞同：5
> 
> 时间：2009-05-19T12:41:37.947
> 
> 标签：c++, image-processing, opencv, mpeg

我正在研究比较图像的系统。MPEG-7 标准提供了一些描述符，例如：主色、颜色布局、边缘直方图、颜色相干向量。你知道我在哪里可以获得其中一些方法的源代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-04-19T07:51:09.727

您还可以使用为 BilVideo-7 视频索引和检索系统开发的 Windows 和 Linux 可执行文件，或基于 OpenCV 库的易于使用的 API：[http ://www.cs.bilkent.edu.tr/~bilmdg/ bilvideo-7/Software.html](http://www.cs.bilkent.edu.tr/~bilmdg/bilvideo-7/Software.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-23T11:20:02.540

ISO 分发[参考软件](http://standards.iso.org/ittf/PubliclyAvailableStandards/c035364_ISO_IEC_15938-6%28E%29_Reference_Software.zip)作为 MPEG-7 标准的一部分，其中包括视觉描述符的特征提取代码。该 zip 文件包含另一个名为 XMWin.zip 的 zip 文件，其中包含源代码。（尽管名称为“Win”，但它包含在 windows 和 unix 上编译的说明。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T10:02:03.877

希望这对其他程序员有所帮助：

*   [在这里](http://chatzichristofis.info/?page_id=19)您可以找到**C#上的一种实现**
*   [这里是](http://www.semanticmetadata.net/lire/)**Java**中的另一个实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-01T14:30:02.730

对于未来的读者，这里有一个声称易于使用的 CPP 库。 [https://github.com/mubastan/mpeg7fex](https://github.com/mubastan/mpeg7fex)

这已经在 OpenCV 3 上进行了测试，所以这是最新的。

# ruby - Ruby <=> 组合器的实现

> ID：882524
> 
> 赞同：6
> 
> 时间：2009-05-19T12:42:29.710
> 
> 标签：ruby, combinators, spaceship-operator

经常有人想要`<=>`在产品数据类型上实现（比较，或“宇宙飞船”）运算符，即具有多个字段的类（所有这些（我们希望！）已经`<=>`实现），比较某个字段中的字段命令。

```
def <=>(o)
    f1 < o.f1 && (return -1)
    f1 > o.f1 && (return  1)
    f2 < o.f2 && (return -1)
    f2 > o.f2 && (return  1)
    return 0
end 
```

这既乏味又容易出错，尤其是对于很多领域。它很容易出错，以至于我经常觉得我应该对该函数进行单元测试，这只会增加乏味和冗长。

Haskell 提供了一种特别好的方法：

```
导入 Data.Monoid (mappend)
导入 Data.Ord（比较）

-- 来自标准库：
-- 数据排序 = LT | 情商 | 燃气轮机

数据 D = D { f3 :: Int, f2 :: Double, f1 :: Char } 推导 Show

compareD :: D -> D -> 排序
compareD = foldl1 mappend [比较 f1，比较 f2，比较 f3]

```

（对于那些不熟悉的人`fold`，以上扩展为

```
comparing f1 `mappend` comparing f2 `mappend` comparing f3 
```

它产生一个可应用于两个`D`s 的函数，以产生一个`Ordering`.)

的定义`compareD`非常简单，显然是正确的，即使没有静态类型检查，我也不觉得需要对其进行单元测试。

实际上，这个问题可能比这更有趣，因为我可能不想只使用标准`<=>`运算符，而是在不同的时间以不同的方式排序，例如：

```
sortByOrderings :: [a -> a -> 排序] -> [a] -> [a]
sortByOrderings = sortBy 。foldl1 映射

sortByF3F1 = sortByOrderings [比较 f3，比较 f1]
sortByF2F3 = sortByOrderings [比较 f2，比较 f3]

```

所以，问题：

1.  在 Ruby 中实现这类事情的典型方法是什么？
2.  仅使用标准库中定义的内容最好的方法是什么？
3.  相比之下，与上面的 Haskell 代码有多接近，它的可靠性如何？如有必要，如何确保字段具有正确实施的`<=>`or`<`和`>`运算符？

顺便说一句，虽然这是一个 Ruby 问题，但如果该站点的长辈们同意，我很高兴考虑讨论有关 Haskell 技术的主题。请随时评论这是否合适，如果合适，请将此帖子标记为“haskell”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T14:08:03.843

以下是我为使自定义排序规则更易于管理所做的工作：在我需要排序的所有类中，我定义了返回数组的“to_sort”方法，然后覆盖 <=> 以使用 to_sort：

```
class Whatever
  def to_sort
    [@mainkey,@subkey,@subsubkey]
  end

  def <=>(o)
    self.to_sort <=> o.to_sort
  end
end 
```

因此，对任意数组的排序（包括任意数组、任意其他数组和 Whathaveyours 的异构数组，所有这些数组都实现了特定于类型的 to_sort 函数和相同的 <=> 覆盖）只是在内部转移到对数组数组进行排序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T15:00:22.497

这是您的想法的即兴表演。它不定义任何额外的常量，允许您使用实例变量和方法的任意组合来比较两个对象，在不相等时提前退出，并包括 Comparable 定义的所有方法。

```
class Object
    def self.compare_by(*symbols)
        include Comparable
        dispatchers = symbols.map do |symbol|
          if symbol.to_s =~ /^@/
            lambda { |o| o.instance_variable_get(symbol) }
          else
            lambda { |o| o.__send__(symbol) }
          end
        end
        define_method('<=>') do |other|
          dispatchers.inject(0) do |_,dispatcher|
            comp = dispatcher[self] <=> dispatcher[other]
            break comp if comp != 0
            comp
          end
        end
    end
end

class T
    def initialize(name,f1,f2,f3)
      @name,@f1, @f2, @f3 = name,f1, f2, f3;
    end

    def f1
      puts "checking #@name's f1"
      @f1
    end
    def f3
      puts "checking #@name's f3"
      @f3
    end

    compare_by :f1, :@f2, :f3
end

w = T.new('x',1,1,2)
x = T.new('x',1,2,3)
y = T.new('y',2,3,4)
z = T.new('z',2,3,5)

p w < x   #=> checking x's f1
          #   checking x's f1
          #   true
p x == y  #=> checking x's f1
          #   checking y's f1
          #   false
p y <= z  #=> checking y's f1
          #   checking z's f1
          #   checking y's f3
          #   checking z's f3
          #   true 
```

如果您愿意，您可以在其中插入一些额外的错误检查，以确保用于比较的值实际响应`<=>`（使用`respond_to? '<=>'`），并尝试在它们不响应的情况下给出更清晰的错误消息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-03-09T19:28:13.253

我采用了与 rampion 类似的方法，但**想处理属性可能是`nil`.**

```
module ComparableBy
  def comparable_by(*attributes)
    include Comparable

    define_method(:<=>) do |other|
      return if other.nil?
      attributes.each do |attribute|
        left  = self.__send__(attribute)
        right = other.__send__(attribute)
        return -1 if left.nil?
        return 1 if right.nil?
        comparison = left <=> right
        return comparison unless comparison == 0
      end
      return 0
    end
  end
end 
```

**示例用法：**

```
SomeObject = Struct.new(:a, :b, :c) do
  extend ComparableBy
  comparable_by :a, :b, :c
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T12:59:01.407

好吧，这里有一个扩展的快速破解，以一种`Object`似乎相当不错的方式实现这一点。

```
class Object

    def self.spaceship_uses(*methods)
        self.const_set(:SPACESHIP_USES, methods)
    end

    def <=>(o)
        raise(NoMethodError, "undefined method `<=>' for #{self.inspect}") \
            unless self.class.const_defined?(:SPACESHIP_USES)
        self.class.const_get(:SPACESHIP_USES).each { |sym|
            self.send(sym) < o.send(sym) && (return -1)
            self.send(sym) > o.send(sym) && (return  1)
        }
        return 0
    end

end

class T

    def initialize(f1, f2) @f1, @f2 = f1, f2; end

    attr_reader    :f1, :f2
    spaceship_uses :f1, :f2

end 
```

`<`这当然不处理任何类型问题，以确保`>`正确实现`SPACESHIP_USES`. 但是，作为 Ruby，这可能很好，不是吗？

简短的评论可以对此发表评论，但我有兴趣在其他答案中看到详细的讨论和扩展。

# scripting - 编写 Websphere 7 RAD 脚本

> ID：882525
> 
> 赞同：0
> 
> 时间：2009-05-19T12:42:34.327
> 
> 标签：scripting, websphere, ear, ibm-rad

我们需要为部署准备部分 EAR，我们通常通过将其加载到 RAD 中来完成此操作，右键单击 EJB 并选择“准备部署”选项。然后我们导出 EAR。

是否有 IBM RAD 7 应用程序的脚本接口或从命令行运行准备，因此我们不必手动完成这些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:44:17.133

您可以使用 RAD 的捆绑`ejbDeploy`Ant 任务，如下所述：http: [//publib.boulder.ibm.com/infocenter/radhelp/v7r0m0/topic/com.ibm.etools.ant.tasks.doc/topics/tantejbd.html](http://publib.boulder.ibm.com/infocenter/radhelp/v7r0m0/topic/com.ibm.etools.ant.tasks.doc/topics/tantejbd.html)

这最终会运行与“准备部署”完全相同的功能，只是它在无头（非 GUI）模式下运行。

（对于 RAD 8.0 及更高版本，使用`prepForDeploy`封闭 EAR 上的任务：http: [//publib.boulder.ibm.com/infocenter/radhelp/v8/topic/com.ibm.ant.tasks.doc/topics/tpreparefordeploy.html](http://publib.boulder.ibm.com/infocenter/radhelp/v8/topic/com.ibm.ant.tasks.doc/topics/tpreparefordeploy.html) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-15T06:17:31.200

您可以使用 ejbdeploy 命令生成部署代码。它与 RAD 和 WAS 捆绑在一起。

请参阅[WAS 信息中心的“从命令行生成 EJB 部署代码”](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.etools.ejbdeploy.doc/topics/tegenc.html)。

# .net - 覆盖 .net 中的默认日期分隔符

> ID：882526
> 
> 赞同：5
> 
> 时间：2009-05-19T12:43:03.453
> 
> 标签：.net, date, localization, globalization

我有一个位于瑞士的网络服务器，它旨在为美国地区和欧洲地区提供服务。从美洲显示日期时，日期由句点而不是斜线分隔。

在某些情况下，如果他们是欧洲人，我想使用句号，在其他情况下，我想使用斜杠。如果我指定格式字符串使用斜杠，它将根据计算机设置转换为句点。我需要做什么来为每个用户指定区域设置（用户必须登录，我知道他来自哪个区域）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T12:50:17.727

ASP.NET 中的全球化几乎可以为您做所有事情。请参阅[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bz9tc508.aspx)，标题为**如何：为 ASP.NET 网页全球化设置文化和 UI 文化**。这应该正是您想要的，因为您只需要在用户登录时为当前线程设置当前（UI）文化。然后您可以调用`date.ToString()`它，它将以正确的格式返回文本表示。

等效地，您可以执行以下操作：

```
var culture = System.Globalization.CultureInfo.GetCultureInfo("en-GB");
var dateString = date.ToString(culture.DateTimeFormat); 
```

但它实际上只是手动做同样的事情，而且远没有那么优雅。您不妨在这里使用 ASP.NET 全球化框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T12:48:07.950

如果当前区域性使用句点作为日期分隔符，则可以使用斜杠显示

C＃

```
date.ToString(@"dd\/MM\/yyyy"); 
```

VB

```
date.ToString("dd\/MM\/yyyy") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T12:46:51.900

使用带有 的格式字符串`DateTime.ToString()`，如下所示：

```
 DateTime.Now.ToString("MM/dd/yyyy"); 
```

在这种情况下，/ 字符表示“使用当前区域性的日期分隔符。”。更好的是，您可以调用`DateTime.Now.ToShortDateString()`以使用本地系统的短日期格式。

命名空间中的本地化有更多帮助`System.Globalization`。

现在的诀窍是：您的“本地”系统就是您的网络服务器，这意味着它几乎总是会使用瑞士格式。所以你还想通过一个`IFormatProvider`告诉系统使用什么文化。看起来像这样：

```
DateTime.Now.ToString(System.Globalization.CultureInfo.GetCultureInfo("en-US")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T12:50:23.187

我不需要使用它，但 DateTime 具有您可以使用的内置文化信息：

```
DateTime dt = DateTime.Now;
dt.ToString(System.Globalization.CultureInfo.GetCultureInfo("fr-CH")); 
```

[在 MSDN 上](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)看到这个。只需记录您用户的文化（“fr-CH”、“en-US”等），那么您可以做的不仅仅是美国诉瑞士。

或者，我相信您可以创建自己的文化信息来正确格式化日期，但我从来没有这样做过。

# opengl - GLSL 片段着色器语法错误

> ID：882527
> 
> 赞同：3
> 
> 时间：2009-05-19T12:43:15.480
> 
> 标签：opengl, glsl, shader

以下简单的片段着色器代码失败，在日志中留下一条无意义的消息： `ERROR: 0:1: 'gl_Color' : syntax error syntax error`

```
void main()
{
  vec4 myOutputColor(gl_Color);
  gl_FragColor = myOutputColor;
} 
```

而以下一个有效：

```
void main()
{
  glFragColor = gl_Color;
} 
```

这让我大吃一惊，因为在[Lighthouse3D 的教程](http://www.lighthouse3d.com/opengl/glsl/index.php?color)中 gl_Color 据说是 vec4。为什么我不能将它分配给另一个 vec4？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T13:15:45.447

尝试正常分配。像这样：

```
void main()
{
  vec4 myOutputColor = gl_Color;
  gl_FragColor = myOutputColor;
} 
```

编辑：

第二个答案确实是正确的，但是没有任何必要使用 vec4() 构造函数，因为它们都是相同的类型。如果你有一个 (r,g,b,w) 元组，你可以这样写：

```
vec4 myOutputColor = vec4(r, g, b, w); 
```

或者

```
// assuming myRgbColor is a vec3
vec4 myOutputColor = vec4(myRgbColor, w); 
```

ETC

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T13:37:30.970

显然你应该使用稍微不同的语法

（请参阅[OpenGL 着色语言规范](http://www.opengl.org/registry/doc/GLSLangSpec.Full.1.20.8.pdf)）

```
vec4 myOutputColor = vec4(gl_Color);
gl_FragColor = myOutputColor; 
```

这与您的示例不同，在我的机器上编译得很好（Windows，Nvidia 卡）

# visual-studio-2008 - VS2008中如何使用集成单元测试测试抽象类

> ID：882532
> 
> 赞同：2
> 
> 时间：2009-05-19T12:43:47.383
> 
> 标签：visual-studio-2008, unit-testing, abstract-class

我找不到任何关于它是否可以做到这一点的信息。

我在抽象类中有几个受保护的方法，想测试它们。

我不想从类继承并测试它的实现（除了技术上不是严格的单元测试，VS2008 也不会让你测试继承的方法）。

我想在集成单元测试的上下文中解决这个问题......我知道例如 nUnit 将允许你这样做。

有什么想法吗？建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T12:47:03.600

试试[RhinoMocks](http://ayende.com/projects/rhino-mocks.aspx)。他们可以动态创建派生类（所谓的部分模拟），您可以在其中调用您的方法。

无论如何，您都需要一个模拟框架来编写好的单元测试。这里有[一些文档](http://ayende.com/Wiki/Rhino+Mocks+3.5.ashx)，可以给你一个印象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T16:53:38.947

VS2008 可以测试从基类继承的私有和保护方法，甚至是抽象方法。

如果您喜欢以这种方式进行测试，请右键单击要测试的代码并创建单元测试。

下面是一段代码示例，我用它来测试来自抽象类的私有继承函数：

```
 [TestMethod()]
    [DeploymentItem("PA Manager.dll")]
    public void GetNextScheduledTimeTest4()
    {
        TimeWheel timeWheel = new TimeWheel(1000, null);
        AnnouncementSchedule schedule = new AnnouncementSchedule();
        schedule.StartDate = DateTime.UtcNow.Date - TimeSpan.FromDays(1);
        schedule.StartTime = DateTime.Parse("09:00:00");
        schedule.EndDate = DateTime.UtcNow.Date;
        schedule.EndTime = DateTime.Parse("14:30:00");
        schedule.Interval = DateTime.MinValue + TimeSpan.Parse("01:00:00");
        schedule.DaysValid.ValidDay = new Day[7];
        schedule.DaysValid.ValidDay[0] = Day.Monday;
        schedule.DaysValid.ValidDay[1] = Day.Tuesday;
        schedule.DaysValid.ValidDay[2] = Day.Wednesday;
        schedule.DaysValid.ValidDay[3] = Day.Thursday;
        schedule.DaysValid.ValidDay[4] = Day.Friday;
        schedule.DaysValid.ValidDay[5] = Day.Saturday;
        schedule.DaysValid.ValidDay[6] = Day.Sunday;

        //// test for the next interval time NOT being valid, but the time period and day for the schedule is.

        PaAnnouncementSchedule paAnnouncementSchedule = new PaAnnouncementSchedule(timeWheel, schedule);
        PrivateObject param0 = new PrivateObject(paAnnouncementSchedule); 
        PaAnnouncementSchedule_Accessor target = new PaAnnouncementSchedule_Accessor(param0); 
        DateTime currentTime = DateTime.Parse("14:07:00");
        DateTime actual;
        DateTime expected = DateTime.MaxValue;
        actual = target.GetNextScheduledTime(currentTime);
        Assert.AreEqual(expected, actual, "Expected time to be DateTime.MaxValue");
    } 
```

其中最重要的部分是：

```
PaAnnouncementSchedule paAnnouncementSchedule = new PaAnnouncementSchedule(timeWheel, schedule);
PrivateObject param0 = new PrivateObject(paAnnouncementSchedule); 
PaAnnouncementSchedule_Accessor target = new PaAnnouncementSchedule_Accessor(param0); 
```

这允许我访问私有继承函数“GetScheduledTime”

# asp.net-mvc - 属性和 DotNetOpenID 有问题

> ID：882533
> 
> 赞同：2
> 
> 时间：2009-05-19T12:44:22.637
> 
> 标签：asp.net-mvc, dotnetopenauth

我正在尝试设置我的代码以向 OpenID 服务提供商请求一些属性。同时，我希望返回一个 ActionResult。

这是 OpenId 示例 MVC 项目中的代码（直接来自 DotNetOpenId / DotNetOpenAuth 网站）...

```
try
{
    return openid.CreateRequest(Request.Form["openid_identifier"])
        .RedirectingResponse
        .AsActionResult();
 }
 catch (ProtocolException ex)
 { ... } 
```

这很好，但它没有显示我请求任何可选或必需的属性。所以，我尝试了以下（我自己的，未经测试的伪代码）....

```
var fetch = new FetchRequest();
fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
fetch.Attributes.AddRequired(WellKnownAttributes.Name.FullName);
fetch.Attributes.AddRequired(WellKnownAttributes.Name.Alias);
fetch.Attributes.AddRequired(WellKnownAttributes.Preferences.Language);
fetch.Attributes.AddRequired(WellKnownAttributes.Preferences.TimeZone);
fetch.Attributes.AddRequired(WellKnownAttributes.Person.Gender);

openId.CreateRequest(identifier.ToString()).AddExtension(fetch); 
```

这似乎也很好。但是...我现在不知道如何要求结果是 ActionResult()...

如何创建一个 openId.CreateRequest 允许我定义一些必需的属性并返回一个 ActionView ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T23:26:49.267

你做得很好。只需将这两种方法结合起来。

在你调用`IAuthenticationRequest.AddExtension`所有你想要的之后，只需调用`IAuthenticationRequest.RedirectingResponse.AsActionResult()`.

```
try
{
    var request = openid.CreateRequest(Request.Form["openid_identifier"]);

    var fetch = new FetchRequest();
    fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
    fetch.Attributes.AddRequired(WellKnownAttributes.Name.FullName);
    fetch.Attributes.AddRequired(WellKnownAttributes.Name.Alias);
    fetch.Attributes.AddRequired(WellKnownAttributes.Preferences.Language);
    fetch.Attributes.AddRequired(WellKnownAttributes.Preferences.TimeZone);
    fetch.Attributes.AddRequired(WellKnownAttributes.Person.Gender);
    request.AddExtension(fetch);

    return request.RedirectingResponse.AsActionResult();
}
catch (ProtocolException ex)
{ ... } 
```

# ruby-on-rails - 根据 Rails 中的环境设置配置常量

> ID：882543
> 
> 赞同：8
> 
> 时间：2009-05-19T12:46:59.903
> 
> 标签：ruby-on-rails

我想根据环境定义一个常量（如管理员电子邮件地址）。最简单的方法是什么？

我想要类似的东西，在 development.rb （或 test 或 production.rb ）中：

```
ADMIN_EMAIL = "foo@bar.com" 
```

并且能够通过调用类似的东西来访问它

```
ADMIN_EMAIL 
```

有没有简单的方法或者我必须做一些事情，比如创建一个模块并初始化它和其他东西（如果你想知道我是否对此有任何想法，不幸的是：我没有）

> 它以这种方式工作，但必须重新启动服务器才能使常量生效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T12:49:16.420

在`config/environments/`中，有一些配置文件会根据您当前所处的环境执行。尝试在其中一个中定义一个常量。

# java - 如何将 Java 文本字段传递给数组列表？

> ID：882566
> 
> 赞同：-3
> 
> 时间：2009-05-19T12:50:57.633
> 
> 标签：java, eclipse, swing

伙计们，请帮助我如何在不替换现有元素的情况下将我的 JTextField(ID,LastName,FirstName,Course,Year) 中的输入值传递到我的 ArrayList 中。同时，我将使用我的 ArrayList 存储值附加到我的 JTextArea(summary)

```
////// PALOS TEXTFIELD

List<Form> myList = new ArrayList<Form>();

        id = new JTextField(20);

        id.addKeyListener(new KeyAdapter()
        {
            public void keyTyped(KeyEvent ke){
                char char1 = ke.getKeyChar();
                if((!(Character.isDigit(char1))) && (char1 != '\b') ){ 
                        ke.consume(); 
                    }
                } 
            }); 
            id.addActionListener(handler);
            fname = new JTextField(20);
            fname.setFont(new Font("TimesRoman", Font.PLAIN,14));
            fname.setHorizontalAlignment(JTextField.CENTER);
            fname.setBorder(BorderFactory.createEtchedBorder(3, Color.green, Color.white));

            fname.addKeyListener(new KeyAdapter()
            {
                public void keyTyped(KeyEvent ke){
                    char char1 = ke.getKeyChar();
                    if((!(Character.isLetter(char1))) && 
                            (char1 != '\b') ) 
                            { 
                            ke.consume(); 
                            } 
                            } 
                            public void keyReleased(KeyEvent e){} 
                            public void keyPressed(KeyEvent e){} 
                            }); 
            fname.addActionListener(handler);

    lname = new JTextField(20);

    lname.addKeyListener(new KeyAdapter()
        {
            public void keyTyped(KeyEvent ke){
                char char1 = ke.getKeyChar();
                if((!(Character.isLetter(char1))) && 
                    (char1 != '\b') ) 
                    { 
                        ke.consume(); 
                    } 
                } 
                    public void keyReleased(KeyEvent e){} 
                    public void keyPressed(KeyEvent e){} 
                            }); 
    lname.addActionListener(handler);

    year = new JTextField(20);

    year.addKeyListener(new KeyAdapter()
        {
        public void keyTyped(KeyEvent ke){
            char char1 = ke.getKeyChar();
                if((!(Character.isDigit(char1))) && 
                    (char1 != '\b') ) 
                    { 
                        ke.consume(); 
                    } 
                } 
                public void keyReleased(KeyEvent e){} 
                public void keyPressed(KeyEvent e){} 
                    }); 
    year.addActionListener(handler);

    course = new JTextField(20);

        course.addKeyListener(new KeyAdapter()
        {
            public void keyTyped(KeyEvent ke){
            char char1 = ke.getKeyChar();
                if((!(Character.isLetter(char1))) && 
                    (char1 != '\b') ) 
                    { 
                        ke.consume(); 
                    } 
                } 
                    public void keyReleased(KeyEvent e){} 
                    public void keyPressed(KeyEvent e){} 
                }); 
        course.addActionListener(handler); 

////PALOS BUTTONS

    addB = new JButton(namesB[1]);
        addB.setHorizontalAlignment(JTextField.CENTER);
        addB.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            id.selectAll();
            fname.selectAll();
             lname.selectAll();
             course.selectAll();
             year.selectAll();                    
             String textID = id.getSelectedText();
             String textFName = fname.getSelectedText();
             String textLName = lname.getSelectedText();
             String textCourse = course.getSelectedText();
             String textYear = year.getSelectedText();

                     summary.setCaretPosition(summary.getDocument().getLength());

                 } 
             });

/////pALOS TEXTAREA

    summary = new JTextArea(11,31);
            summary.setBorder(BorderFactory.createEmptyBorder(0, 3, 0, 5));
            summary.setText("ID" + newtab + "FirstName " + newtab +  "LastName" + newtab + "Course" + newtab + "Year" + newline);
            summary.setEditable(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:08:26.397

我会尝试一下，但我必须在这里做一些假设。

```
// Obviously no public fields, but I cant be bothered to make constructor
// or get/set methods
public class Form
{
    public String id;
    public String lastName;
    public String firstName;
    public String course;
    public String year;
} 
```

因此，您希望每次按下该按钮时都将一个新的 Form 实例添加到您的表单列表中：

```
public class MyGui
{
    private List<Form> forms = new ArrayList<Form>();
    private JTextField fname;
    private JTextField id;
    private JTextField lname;
    private JTextField course;
    private JTextField year;
    // build gui ....
} 
```

这是您的“保存/添加”按钮的动作监听器

```
public void actionPerformed(ActionEvent e)
{
    Form form = new Form();
    form.id = id.getText();
    form.lastName = lname.getText();
    form.firstName = fname.getText();
    form.course = course.getText();
    form.year = year.getText();
    forms.add(form);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-16T03:31:24.197

The pertinent part in your posted code is in your `ActionListener`, where you handle the button click. First off, You can maintain the `ArrayList` model you have requested as a List of Lists of Strings (List<List<String>>) - or of types defined in @willcodejavaforfood's Form structure. This way you will have an easy time of retaining previous rows. Each time the button is clicked, you can grab the data from the text fields as you have already coded and now simply add it to the model as a new row. Then you can iterate over the model and replace the data in the JTextArea.

The declaration of your model would look like this:

```
List<List<String>> model = new ArrayList<List<String>>(); 
```

and your updated action listener would look something like this:

```
addB.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        id.selectAll();
        fname.selectAll();
        lname.selectAll();
        course.selectAll();
        year.selectAll();
        String textID = id.getSelectedText();
        String textFName = fname.getSelectedText();
        String textLName = lname.getSelectedText();
        String textCourse = course.getSelectedText();
        String textYear = year.getSelectedText();

        List<String> line = Arrays.asList(new String[]{textID,textFName,textLName,textCourse,textYear});
        model.add(line);

        StringBuilder sb = new StringBuilder();
        sb.append("ID\tFirst\tLast\tCourse\tYear\n");
        for(List<String> input : model) {
            for (String item : input) {
                sb.append(item);
                if (input.indexOf(item) == input.size()-1) {
                    sb.append("\n");
                } else {
                    sb.append("\t");
                }
            }
        }
        summary.setText(sb.toString());
    }
}); 
```

It is a little brute-force, but it gets the job done. There is more that can be done to ensure proper column alignment and a prettier way to ensure a newline at the end of a line, etc, but that, as they say, is left as an exercise for the reader.

# iphone - Opengl ES - z 轴上的渲染不正确？

> ID：882576
> 
> 赞同：3
> 
> 时间：2009-05-19T12:52:56.660
> 
> 标签：iphone, opengl-es

我有一个从 .obj 文件加载的雪人模型。一切正常，除了当我使用 glRotatef() 旋转模型时，雪人的头部将始终呈现在身体前面。雪人的鼻子也会一直渲染到脑后。这会产生雪人在旋转时改变方向的效果，但实际上这些部件并未以正确的 z 顺序渲染。为什么会出现这种情况？

注意：雪人的所有部分都来自使用搅拌机创建的同一个 .obj 文件。

像这样渲染模型（在绘制循环中）

```
glVertexPointer(3 ,GL_FLOAT, 0, model_verts);
glEnableClientState(GL_NORMAL_ARRAY);
glNormalPointer(GL_FLOAT, 0, model_normals);
glDrawElements(GL_TRIANGLES, num_model_indices*3, GL_UNSIGNED_SHORT, &model_indices); 
```

像这样旋转（在 touchesMoved 中）

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
 UITouch *touch = [touches anyObject];
 touchBeginPos = [touch locationInView:self];

}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
 CGPoint touchEndPos = [[touches anyObject] locationInView:self];
 glMatrixMode(GL_MODELVIEW_MATRIX);
 glRotatef(10, (touchBeginPos.y - touchEndPos.y)/4, -(touchBeginPos.x - touchEndPos.x)/4, 0.0f);
 touchBeginPos = touchEndPos;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T13:07:08.753

检查您是否（错误地）对场景应用了负（镜像）比例。还要检查你是否使用了 Z 缓冲，也许你没有。

[与另一个 3D 系统相比，此页面](http://wiki.blender.org/index.php/Extensions:Uni-Verse/BlenderVsVerse)讨论了 Blender 的坐标系，并且作为参考可能是半模糊的，但我对它有一定的信心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-03T06:13:59.013

纹理的 UIKit 坐标是颠倒的，所以你有两个选择：

1.  将纹理映射的 V 坐标调整为 (1-vcoord)
2.  在绘制到您稍后将加载到 gl.contex 中的上下文之前翻转图像。

如果你使用 CG 来加载这样的纹理，你可以添加 ScaleCTM：

```
CGContextRef context = CGBitmapContextCreate( imageData, ....
CGContextClearRect( context, ...
CGContextScaleCTM( context, 1.0, -1.0);  // flip the texture vertically
CGContextDrawImage( context, CGRectMake( 0, 0, width, height ), image.CGImage );
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, imageData); 
```

# php - “命名空间”、常量和多个 PHP 包括

> ID：882590
> 
> 赞同：2
> 
> 时间：2009-05-19T12:55:47.840
> 
> 标签：php, namespaces, include

我有一些类似于以下的 PHP 代码：

```
foreach ($settingsarray as $settingsfile)
{
    include ($settingsfile);
    // do stuff here
} 
```

$settingsarray 是来自特定文件夹的文件名数组。

问题是，每个 $settingsfile 都定义了常量（具有相同的名称），当然不能重新定义。

有哪些可能的方法来防止在这种情况下发生错误？

我能想到的两个选项包括，将所有常量更改为变量并使用 PHP 命名空间。

但是，我不确定如何使用命名空间，它需要在每个 $settingsfile 的开头声明？有没有一种方法可以在不使用命名空间的情况下隔离常量、变量和函数？

我真正喜欢的是能够做一些简单的事情：

```
foreach ($settingsarray as $settingsfile)
{
    {//added braces to indicate where the isolation is
        include ($settingsfile);
        // do stuff here
    }//what happens in here does not affect what happens outside of here
} 
```

我应该注意，这是新功能的一部分，并且是加载所有 $settingsfiles 的代码的唯一部分。其余代码一次只加载一个文件。我使用常量的一个原因是我不必担心定义“全局”变量以便能够在函数内部访问它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T18:34:32.247

我的回答有点复杂，但应该很适合你。我假设您有大量这些设置文件，因为您非常不愿意单独更改每个设置文件。

如果您能够使用命名空间，我假设您已经升级到 PHP 5.3RC2。将以下内容复制到 .php 文件中，并根据自己的喜好更改命名空间：

```
<?php
namespace myapp\config;

function define($key, $val) {
    Config::set($key, $val);
}

class Config {
    private $vars = array();

    // This class should not be instantiated
    private function __construct() {}

    public function set($key, $val) {
        self::$vars[$key] = $val;
    }

    public function get($key) {
        return isset(self::$vars[$key]) ? self::$vars[$key] : NULL;
    }
}

?> 
```

将它包含在您的代码中，现在让一切正常工作是一个简单的问题，只需更改

```
<?php 
```

在您的设置文件中

```
<?php namespace myapp\config; 
```

如果你有很多，你的终端中的快速“sed”命令应该可以很好地处理它，一举一动。

如果我不知道如何使用我的代码，这里有一个例子：

```
<?php
require_once('the_php_file_i_just_gave_you.php');
use \myapp\config\Config;

foreach ($settingsarray as $settingsfile) {
    include ($settingsfile);
    $varname = 'key';
    echo "In this file, '$varname' equals: " . Config::get($varname);
}

?> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:00:01.280

好的，所以如果我对您的理解正确，那么在该循环中，您想使用每个内部定义的常量做一些事情，`$settingsfile`然后在每个循环之后基本上摆脱它们？

> 与变量不同，常量是一个值，一旦设置，就不能在脚本 [[src执行期间更改或取消设置]](http://www.webreference.com/programming/php/by_example3/)

您唯一的选择是将`define()`声明更改为变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:30:13.607

不容易，但您可以使用 file_get_contents($settingsfile) 读取 php 文件，然后重写常量并评估代码。

```
$settingsstr = file_get_contents($settingsfile);
$settingsstr = preg_replace('/<\?\w*(.*)/', '\\1', $settingsstr);//get rid of the php open tag
$settingsstr = preg_replace('/define\("(\w+)"/', 'define("NAMESPACE_\\1"', $settingsstr);
eval($settingsstr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T13:30:39.253

你有几个选择：

**使用 PHP 命名空间**

令人惊讶的是，PHP 实际上确实支持[命名空间](http://us2.php.net/manual/en/language.namespaces.php)。我很惊讶地发现这一点，因为我已经在 PHP 中工作多年并且从未听说过此功能。它可能是一个较新的功能并且不常用，所以我建议不要使用这种方法

**使用类常量**

您可以使用类和[类常量](http://php.net/manual/en/language.oop5.constants.php)来加载您的设置。类常量是定义类的本地常量，因此您无需担心类中的名称冲突。您可能需要做的不仅仅是包含文件，但您可以在每个类上调用一个方法，例如定义应用程序常量的 defineConstants() 或 loadConfiguration()，保留类常量以供内部使用。

**使用功能扩展设置**

另一个想法是创建一个设置数组和单独的函数来“扩展”这些设置。这样您就可以在后续函数中覆盖任何配置而不会导致错误。最后，如果你想把它们放在常量中，你可以遍历数组并使用 define() 来定义常量。

还有许多其他方法可以完成您正在尝试做的事情，但这些只是一些想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T13:54:24.230

**设置文件不应包含 PHP 代码。** 它应该是某种“标准”格式。 [http://www.php.net/parse_ini_file](http://www.php.net/parse_ini_file)

*   在第一步（在你的 foreach 中）你阅读所有文件
*   将变量收集到临时数组中
*   在此数组的另一个循环中，您可以将它们定义为常量。

如果您经常觉得需要“重新定义常量”，那么应用程序设计中就有一些问题。

# iphone - “变换”和“仿射变换”之间的区别在哪里？

> ID：882597
> 
> 赞同：6
> 
> 时间：2009-05-19T12:56:50.007
> 
> 标签：iphone, uikit, core-animation

有一个类似的功能：

> CATransform3DGetAffineTransform
> 
> 返回由 't' 表示的仿射变换。如果“t”不能准确表示为仿射变换，则返回值未定义。

我不是那么以数学为导向，所以一个易于理解的描述会非常好。维基百科在这里没有太大帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T15:23:32.817

仿射变换是不会“过度扭曲”几何形状的变换，即：

*   之前在一条线上的点在变换之后仍然在一条线上
*   点之间的相对距离保持不变（因此正方形可能不再是正方形，但边长仍然相等）

所以旋转和缩放是仿射的——例如，投影不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-05-03T06:18:55.067

Affine transformations are transformations, but transformations need not be Affine. For example, a shear of the plane is not Affine because it doesn't send lines to lines.

Affine transformations are by definition those transformations that preserve ratios of distances and send lines to lines (preserving "colinearity"). In finite-dimensional Euclidean geometry, these act by a linear transformation followed by a translation i.e. `x -> Ax + b` where `x` is a vector, `A` is a linear transformation and `b` is a vector.

Affine transformations are great for changing co-ordinate systems, perhaps from one that is fairly hard to visualise back to the usual co-ordinates.

The Affine transformations you're likely to come across in practice are translations, dilation (i.e. scaling), rotation and reflection. If you're developing for iOS, say, check out the `CGAffineTransform` sections of the developer documentation. These will explain how to create Affine transformations using several convenience methods, and how to apply these to UIView instances with the `-setTransform` message.

Last, an important point about Affine transformations is that they're not commutative under composition: Applying transform `T1` followed by transform `T2` is in general different from applying `T2` followed by `T1`. That is, the order in which you apply these matters.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:59:31.873

CoreAnimation 使用 3D 变换。仿射变换是那些 3D 变换的 2D 子集。它们只允许在 X、Y 平面中平移、旋转和缩放。

# wpf - 新项目 - webforms v silverlight v wpf

> ID：882598
> 
> 赞同：1
> 
> 时间：2009-05-19T12:57:13.643
> 
> 标签：wpf, silverlight, xbap

嗨，刚刚让开发团队开始研究基于 CRM 类型 SOA 的应用程序的下一个版本，应用程序前端的棘手问题出现了。

目前，该应用程序是一个复合应用程序，使用

*   网络表单 (.net2)
*   共享点 2003
*   信息路径 *
*   商谈

*虽然不是 FormsServer - 是在 FormServer 之前，因为我们在 HTTP 中破解 ProgID 以启动基于服务器的 InfoPath XSD 并在加载时将数据打入其中。

我们正在考虑迁移到 MVC 或 MVVM 模型，因为我们有 Web 服务和与之交互的数据库，我们可以看到迁移到该架构是一个很好的 3.5 和 Linq（尽管我们有用于管理一对多关系的 keyTables这似乎不适用于 LinqToSQL 或 EF ......但我离题了）

因此，我们正在研究什么对联络中心有好处

1.  我们必须有一个用于部署的 Web 服务器版本（？）XBAP 可能会减少这个
2.  可视化 v 速度（WPF/SilverLight v WebForms 和网格）

所以想知道是否还有其他人面临这种​​困境，提示提示以及根据您的经验您会选择哪个？

编辑感谢您提供到 Prism 和 EP 网站的链接——已经在关注它——希望获得一些现实生活中的经验……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T13:06:04.543

xbap（可以部署在网络服务器上）或 wpf

1.  [模式和实践：复合 WPF 和 Silverlight](http://www.codeplex.com/CompositeWPF)
2.  [棱镜](http://www.codeplex.com/Release/ProjectReleases.aspx?ProjectName=CompositeWPF&ReleaseId=11615)

选择 Xceed WPF 网格 (xbap)

# vb.net - 如何在 vb.net 中将 char a 变成 b

> ID：882602
> 
> 赞同：4
> 
> 时间：2009-05-19T12:58:22.143
> 
> 标签：vb.net, char, increment

嗨，我正在尝试在 vb.net 中增加一个字符，例如：Dim letter As Char = "a"c。我想把它变成b，等等。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T13:03:58.357

您可以获取 ascii 代码、递增并转换回 Char：

```
Chr(Asc(letter) + 1) 
```

它的 Unicode 版本是：

```
ChrW(AscW(letter) + 1) 
```

编辑：

正如格伦指出的那样，如果您尝试增加“z”c，则需要小心

# java - 将 grails 集成到现有的 Spring 应用程序中？

> ID：882603
> 
> 赞同：8
> 
> 时间：2009-05-19T12:58:33.903
> 
> 标签：java, spring, grails

如果您不想为 grails 启动一个单独的项目，而是将其潜入现有的 web 应用程序中怎么办？

我必须为一些新实体构建一个管理界面/crud，并认为这将是学习 grails 的完美方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T08:24:11.557

我正在尝试使用 Grails 应用程序和 Spring 应用程序制作一个应用程序。

我试图将 Grails 应用程序偷偷带入 Spring 应用程序，但这是“不可能的”。将 Spring 应用程序潜入 Grails 应用程序更容易。Grails 知道 Spring 是什么，但 Spring 不知道 Grails 是什么。

在[本文](http://www.ibm.com/developerworks/java/library/j-grails07158/index.html?S_TACT=105AGX02&S_CMP=EDU)中，您可以找到有关如何在 Grails 中使用 hibernate 映射文件或注释的有用信息，因此您不必重新映射所有内容。您也可以使用所有的 java 类（将它们放入 src/java）。您可以将 ApplicationContext.xml 中定义的 bean 放在 conf/spring/resources.xml 中。您可以将它们留在 ApplicationContext 中，但我遇到了一些问题。我还没有结束工作（几乎），看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:29:12.860

除非现有应用程序具有正确的 dir 结构来准确映射到 grails 的喜好，否则很难“潜入”——毕竟，约定优于配置是 grails 的强大之处。

您可以尝试将管理界面作为原始/现有 spring 应用程序的“单独”应用程序，并将现有数据库映射到 grails 域对象。尽管我不确定如果没有有关现有应用程序的更多信息，您将如何轻松地并排运行它们。不过绝对有可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T18:12:00.707

我同意构建您的管理界面是学习 Grails 的一个很好的练习，并且也同意之前的答案，即 Grails 很难与现有的 Spring 应用程序集成，如果不是不可能的话。您可能可以完成它，但头痛不值得。

Grails 建立在 Hibernate 之上的 ORM，所以如果您已经在这个 Spring 应用程序中使用 Hibernate，那么您可以利用它来发挥自己的优势。将 Grails 应用程序配置为使用预先存在的 Hibernate 模型并不难，这在 Grails 文档中有很好的解释。

因此，我建议将您的管理控制台构建为独立的 Grails 应用程序，但如果实际上您已经使用过 Hibernate，请使用您已经拥有的 Hibernate 模型。

# sql - SQL -- 使用 Order by 选择 Top 1？

> ID：882604
> 
> 赞同：0
> 
> 时间：2009-05-19T12:58:38.087
> 
> 标签：sql

**这已解决。该语句位于存储过程的另一部分。**

我正在编写的存储过程不允许我这样做：

```
 declare @dtTopDate datetime
  select top 1 @dtTopDate  = date_build
    from database..table
   where database..table.parent = @Parent
     and database..table.child = @Child
   order by date_build desc 
```

给我这个错误：

> 列“database..table.date_build”在 ORDER BY 子句中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

我究竟做错了什么？

[编辑] 这里没有 group by 声明。SQL2005。

以下是更多上下文：

```
if @Notify = 0
begin
     declare @dtTopDate datetime
      select top 1 @dtTopDate  = date_build
        from database..table
       where database..table.parent = @Parent
         and database..table.child = @Child
       order by date_build desc

      insert 
        into database2..table
             (parent, child, notification_date, change_date)
      values (@Parent, @Child, @dtTopDate, getdate())
     return 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T13:16:11.047

这对我有用，但我不确定这是否是你试图做的 b/c 你的例子有一些错误。

```
use Test
go
CREATE TABLE [dbo].[MyTable]
(
    [MyTableId] [uniqueidentifier] NOT NULL,
    [MyDate] [datetime] NOT NULL,
    CONSTRAINT [PK_MyTable] PRIMARY KEY CLUSTERED([MyTableId] ASC,[MyDate] ASC)
)
GO
CREATE PROCEDURE ProcTopDate
(
    @MyDate datetime OUT
)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT TOP 1
        @MyDate = [MyDate]
    FROM [Test].[dbo].[MyTable]
    order by MyDate
END
GO

insert into MyTable(MyTableId, MyDate)
values(newid(), getdate())
go

declare @MyDate datetime
exec ProcTopDate @MyDate OUT
print @MyDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T14:01:20.550

而不是 SELECT TOP 1 ... ORDER BY ...

为什么不试试 SELECT MAX(..

```
DECLARE @dtTopDate datetime
SELECT @dtTopDate = MAX(date_build)
 from database..table 
 where database..table.parent = @Parent
 and database..table.child = @Child 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:04:24.300

您使用的是什么版本的 SQL？它在 MS SQL Server 2005 上对我来说很好（一旦我修复了声明）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T13:05:09.943

老实说，我唯一能看到的错误是 @dtTopDate =/= @dtLatestDate 除此之外，您的 SQL 语句中没有**GROUP BY**子句。

我刚刚运行了它，它运行良好。

```
declare @OrderDate datetime

select top 1 @OrderDate = OrderDate
from Orders
where Orders.CustomerID = 'ALFKI'
 and Orders.EmployeeID = 4
order by OrderDate desc

SELECT @OrderDate 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T13:11:26.797

尝试正确限定列以避免任何歧义或 x 数据库架构问题

```
declare @dtTopDate datetime

select top 1 
    @dtTopDate  = [database]..[table].date_build
FROM
    [database]..[table]
where
    [database]..[table].parent = @Parent
    and [database]..[table].child = @Child
order by
    [database]..[table].date_build desc 
```

或者给它起别名

```
declare @dtTopDate datetime

select top 1
    @dtTopDate  = foo.date_build
FROM
    [database]..[table] foo
where
    foo.parent = @Parent
    and foo.child = @Child
order by
    foo.date_build desc 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T13:27:27.747

问题出在存储过程的另一部分。我在其他地方使用了 count(*)，它需要 group by。谢谢您的帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T13:05:06.387

尝试 SELECT @dtLatestDate = TOP 1 date_build...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T14:13:55.890

如果你想变得非常棘手，在 T-SQL 中你可以尝试使用 row_number() 方法和内部选择：

```
select * from
(
    select 
        db.groupId
        , db.date_build
        , date_build_rank = row_number() over ( partition by db.groupId order by db.date_build desc)
    from
        #date_build_tbl db
) as a 
where a.date_build_rank < 2; 
```

# c++ - 如何检查系统上是否安装了特定的网络浏览器？

> ID：882605
> 
> 赞同：2
> 
> 时间：2009-05-19T12:58:49.240
> 
> 标签：c++, windows, firefox, google-chrome, registry

如何检查系统上是否安装了特定的网络浏览器（chrome、firefox、opera）？（C++/Windows 平台）。也许这可以在注册表的某个地方签入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:35:34.563

就像安德烈说的，没有办法检测到一切

您可能应该从查找特定于浏览器的注册表项开始：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\Mozilla Firefox
HKEY_CURRENT_USER\Software\Opera Software 
```

然后继续

```
<HKEY_CURRENT_USER|HKEY_LOCAL_MACHINE>\SOFTWARE\Clients\StartMenuInternet 
```

最后

```
HKEY_CLASSES_ROOT\HTTP and HKEY_CLASSES_ROOT\.htm[l] 
```

# wpf - 我正在尝试将图像保存在 wpf 应用程序中，但是在保存了一些微红色调之后，图像上出现了

> ID：882615
> 
> 赞同：1
> 
> 时间：2009-05-19T12:59:53.590
> 
> 标签：wpf, image-processing, c#-3.0

我正在尝试将图像保存在 wpf 应用程序中，但是在保存了一些微红色调后，图像上出现了一些红色，并且也失去了这些图像的清晰度。我为此使用 PNGBitmapEncoder 并以 PNG 格式保存图像。我不知道发生了什么。

任何人请给我解决方案..我正在尝试这么多天。请帮助我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T13:03:26.437

您需要发布您的代码，并可能发布错误图像的示例。

最可能的解释是内存中红绿和蓝像素的顺序与预期的文件格式之间存在不匹配，或者以某种方式以牺牲绿蓝为代价增加了红色值.

您是否也尝试调整图像大小？这或许可以解释这种模糊性。

# asp.net-mvc - 我如何起订量一个 ISingleResult？我是不是该？还是有更好的方法？

> ID：882616
> 
> 赞同：6
> 
> 时间：2009-05-19T12:59:56.133
> 
> 标签：asp.net-mvc, moq

我的控制器中有这样的操作方法

```
public ActionResult Index()
{
    using (NorthwindDataContext db = new NorthwindDatacontext())
    {
        var results = db.GetRecordSets(arg1, ....).ToList();
        // use results as list
    }

    return View();
} 
```

我想开始对其进行测试（是的，在它建成之后，而不是之前......但是代码是在我开始使用 TDD 之前编写的，所以......）

我发现将诸如此类的属性添加到控制器

```
public delegate NorthwindDatacontext ContextBuilderDelegate();

public ContextBuilderDelegate ContextBuilder { get; set; } 
```

我可以在构造函数中添加这样的东西......

```
ContextBuilder = () => new NorthwindDatacontext(); 
```

然后我可以使用 NorthwindDatacontext 的模拟来测试设置 ContextBuilder 属性的 ActionMethod

```
var controller              = new MyController();
var mockDataContext         = new Mock<NorthwindDatacontext>();
controller.ContextBuilder   = () => mockDataContext.Object; 
```

但是......我发现没有办法使用它，因为 NorthwindDatacontext 的所有方法都使用 ISingleResult 作为 returnType 并且我找不到使用该接口创建对象的方法。我试过这个

```
var theResult                  = new List<GetRecordSetsResult>();
// fill the data structure here with the provided result...

mockDataContext.Setup(c => c. GetRecordSets()).Returns(theResult as
                                            ISingleResult<GetRecordSetsResult>); 
```

但它不起作用，因为转换为 ISingleResult 时 theResult 为空。

有没有办法创建一个 ISingleResult 对象来测试这种方式，或者我在这里做的事情不正确？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T16:37:13.000

`ToList()`是IEnumerable的扩展方法，很容易mock，因为它只有一个成员方法——`GetEnumerator()` .

如果它的方法不是虚拟的，你仍然可能在模拟 NorthwindDataContext 类时遇到问题......

无论如何，这就是我在沙盒中解决类似问题的方法，希望对您有所帮助：

```
public class MyType
{
    public virtual ISingleResult<int> ReturnSomeResult() { throw new NotImplementedException(); }
}

[TestMethod]
public void TestMethod1()
{
    var mockMyType = new Mock<MyType>();
    var mockSingleResult = new Mock<ISingleResult<int>>();
    IEnumerable<int> someEnumerable = new int[] {1,2,3,4,5};
    mockSingleResult.Setup(result => result.GetEnumerator()).Returns(someEnumerable.GetEnumerator());
    mockMyType.Setup(myType => myType.ReturnSomeResult()).Returns(mockSingleResult.Object);

    Assert.AreEqual(15, mockMyType.Object.ReturnSomeResult().ToList().Sum());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-12-07T20:10:57.797

我创建了一个实现 ISingleResult 的类，并在其中放入了一个 List。我对这种类型的编码相当陌生，所以虽然这对我有用，但使用风险自负（如果你看到漏洞发表评论）。

```
class SingleResult<T>:ISingleResult<T>
{
    readonly List<T> _list = new List<T>();

    public void Add(T item)
    {
        _list.Add(item);
    }

    #region Interface Items

    public IEnumerator<T> GetEnumerator()
    {
        return _list.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public object ReturnValue { get { return _list; } }

    public void Dispose() { }

    #endregion
} 
```

然后可以使用它来返回模拟的一部分。这就是我最终将它与 Rhino Mocks 一起使用的方式：

```
[TestMethod]
public void TestSomething()
{
    //Arrange
    // Make a data context and DAL
    var _ctx = MockRepository.GenerateMock<IDataClassesDataContext>();
    var someDALClass = new SomeDALClass(_ctx);

    User testUser = UserObjectHelper.TestUser();
    SingleResult<User> userList = new SingleResult<User> { testUser };

    // Indicate that we expect a call the to sproc GetUserByUserID
    _ctx.Expect(x => x.GetUserByUserID(testUser.UserID)).Return(userList);

    //Act
    someDALClass.UpdateUser(testUser);

    //Assert
    Assert.IsTrue(SomeTestCondition());
} 
```

# c# - ImageList / Image OutOfMemoryException

> ID：882619
> 
> 赞同：4
> 
> 时间：2009-05-19T13:00:30.827
> 
> 标签：c#, winforms, image, out-of-memory

从 ImageList 获取图像时，我遇到了 OutOfMemoryException 我一直无法找到问题的适当解决方案。

我有一个自定义 ListView 控件，它附加了一个用于绘制 ListViewItems 的事件。然后这会调用一个静态方法，该方法旨在绘制项目。

对于大约 300 个项目的 ListView，每次滚动 ListView 时，我们都会使内存增加大约 100Mb。违规代码已被追踪到以下内容：

```
Image image = item.ImageList.Images[item.ImageKey];
if (image != null)
{
    Size imageOffset = new Size((bounds.Width - image.Width) / 2, 2); 
    Point imagePosition = bounds.Location + imageOffset;
    graphics.DrawImageUnscaled(image, imagePosition);
} 
```

似乎（当然在 WinXP 上）垃圾收集工作不正常，导致内存呈螺旋状上升。我们尝试在代码块之后直接添加 image.Dispose() 来解决问题，但这没有任何效果。

到目前为止，我设法找到的唯一解决方案是在调用 GC.Collect() 的静态方法的末尾。然而，问题在于它会导致 ListView 缓慢地重新绘制自身，并且在它尝试重新绘制时最终会在屏幕上出现伪影。

有没有其他人经历过这个？或者知道解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T04:42:56.187

你在处置`graphics`吗？此外，如果您像您提到的那样处理您的图像，那么您需要确保将其从 ImageList 中取出，否则您将导致更多问题。图片是什么格式的？

通常，当您在涉及图像时出现内存不足问题时，您的问题将是某些方法不喜欢某些图像格式，或者 9/10 次，您误解了其中一个图形对象的生命周期。

*   检查所有`Graphics`使用情况并将它们放在`using`块中。
*   检查你的`Image`生命周期并小心复制它们、处理它们、关闭底层流等。
*   加载一个内存管理器（VS2008 内置了一个），看看有什么没有得到很好的清理。

编辑：

这是我能找到的最佳选择，使用`[ImageList.Draw](http://msdn.microsoft.com/en-us/library/aa335209(VS.71).aspx)(graphics, x, y, width, height, index)`. 这将使用内部句柄而不是创建图像的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-11T19:08:40.187

我已经设法在我的应用程序中解决了这个问题。

杰森有答案，你必须确保你使用“使用”块，或者它们的等价物。

我使用 VB，等效于使用 Try...Catch... 最后，每当我创建一个新位图时，调用 BitMap.Dispose 并在“Finally”部分设置 Bitmap = nothing。

这似乎是一个非常普遍的问题，从我在谷歌上花费的时间来看。下面的代码还允许任何图像在缩小为缩略图时保持其纵横比，这是 Google 似乎很难解决的另一个问题！

代码：

```
Private Function AspectedImage(ByVal ImagePath As String, ByVal SizeWanted As Integer) As Image

    Dim myBitmap, WhiteSpace As System.Drawing.Bitmap
    Dim myGraphics As Graphics
    Dim myDestination As Rectangle
    Dim MaxDimension As Integer
    Dim ReductionRatio As Double

    Try

        'create an instance of bitmap based on a file
        myBitmap = New System.Drawing.Bitmap(ImagePath)

        'create a new square blank bitmap the right size
        If myBitmap.Height >= myBitmap.Width Then MaxDimension = myBitmap.Height Else MaxDimension = myBitmap.Width
        ReductionRatio = SizeWanted / MaxDimension
        WhiteSpace = New System.Drawing.Bitmap(SizeWanted, SizeWanted)

        'get the drawing surface of the new blank bitmap
        myGraphics = Graphics.FromImage(WhiteSpace)

        'find out if the photo is landscape or portrait
        Dim WhiteGap As Double

        If myBitmap.Height > myBitmap.Width Then 'portrait
            WhiteGap = ((myBitmap.Width - myBitmap.Height) / 2) * -1
            myDestination = New Rectangle(x:=CInt(WhiteGap * ReductionRatio), y:=0, Width:=Int(myBitmap.Width * ReductionRatio), Height:=Int(myBitmap.Height * ReductionRatio))
        Else 'landscape
            WhiteGap = ((myBitmap.Width - myBitmap.Height) / 2)
            'create a destination rectangle
            myDestination = New Rectangle(x:=0, y:=CInt(WhiteGap * ReductionRatio), Width:=Int(myBitmap.Width * ReductionRatio), Height:=Int(myBitmap.Height * ReductionRatio))
        End If

        'draw the image on the white square
        myGraphics.DrawImage(image:=myBitmap, rect:=myDestination)
        AspectedImage = WhiteSpace

    Catch ex As Exception
        myBitmap = New System.Drawing.Bitmap("")
        AspectedImage = New System.Drawing.Bitmap(4, 4)
        ImageBufferExceeded = True
        MsgBox("Image Buffer exceeded, too many images in memory. If the one(s) you want can't be seen, please restart the application and navigate straight to your images")
    Finally
        myBitmap.Dispose()
        myBitmap = Nothing
        WhiteSpace = Nothing
    End Try

End Function 
```

# embedded - 嵌入式手机代码

> ID：882620
> 
> 赞同：1
> 
> 时间：2009-05-19T13:00:50.797
> 
> 标签：embedded

大多数手机使用什么来运行硬件？C？

我只是在谈论“普通手机”，而不是智能手机/安卓的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T05:32:39.957

我为无线半导体芯片供应商工作，我们致力于从 ULC（超低成本）细分市场到智能手机的各种手机平台。

在我们的参考手机设计中，整个代码（包括协议栈、内核、中间件、应用程序和 MMI）完全用 C 编写。AFAIK 甚至第一层客户也使用 C 语言作为他们的框架，至少对于 ULC 和中型手机，因为内存大小往往是一个很大的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:01:57.597

运行各种[Symbian](http://www.symbian.org/index.php)操作系统的手机很可能具有用 C++ 编写的所有核心操作系统功能，因为那是 Symbian 的“原生”语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T13:26:10.870

在谈论手机时，其中通常有两个处理器组件。

1.  覆盖用户界面的“主”处理器。
2.  为蜂窝调制解调器供电的“基带”处理器。它处理低级无线电接口、交换塔等。

#1 的代码往往是更高级别的（C、C++、Java 等）。使用的语言实际上取决于它运行的操作系统（Windows Mobile、Symbian、Linux、本土开发的东西等）。当然，几乎总是有一些用于引导加载程序的低级程序集。

#2 的代码非常低级。基带处理器往往只是微控制器。主要是汇编语言和 C。在这里很难找到更高级别的东西。（虽然我见过一些内置 Python 解释器的单元调制解调器。）

通常基带处理器运行某种最小的 RTOS，或者在某些情况下无 OS。他们经常运行 Mentor Graphics 的名为 Nucleus 的 RTOS。

在一些低成本手机上，#1 和#2 结合在一起以降低成本（系统中只有一个处理器和操作系统）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T13:07:52.263

硬件方面的事情，比如设置寄存器和处理中断以运行无线电，都是用 C 语言完成的。

在我看来，C++ 的两个问题是

1.  在其中设计高效的程序更加困难。CPU可能只有几百MHz。
2.  更奇特的 CPU 的编译器几乎不能在 C 中工作，因此在 C++ 中运行它们将是一个奇迹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-26T05:44:16.707

运行 Android 的手机在 java 机器下将主要使用 C，而在顶层使用 Java。

但是，如果您查看大多数手机，它们就像嵌入式市场的其余部分一样，其中**有很多 c**，在某些项目中还有一些 c++。

它们越小，您会发现的 c 越多​​。

/约翰

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-27T12:37:51.943

大多数手机都有不同的软件层，我们可以将其分为三个部分。

1.应用层：BREW、C++ 或 Android 之类的任何东西

2.中间层：由实时操作系统代码组成：C代码[主要是我所看到的]

3.Lower-Layer：设备驱动程序：用C编写。

请注意：大多数普通手机可能使用 C++ 作为应用层，Brew 主要用于 CDMA 手机作为应用层

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-19T13:44:43.093

诺基亚收购了 Qt 的制造商 Trolltech——一种用于桌面和移动应用程序的跨平台应用程序和 UI 框架。大概这包括手机。Qt 是用 C++ 编写的。 [http://www.qtsoftware.com/developer/getting-started](http://www.qtsoftware.com/developer/getting-started)

# c - 在 C 中读取 PPM 图像

> ID：882621
> 
> 赞同：3
> 
> 时间：2009-05-19T13:01:16.240
> 
> 标签：c, image-processing

有谁知道如何使用 C 将 PPM 图像读入数组？

谢谢。此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:10:05.707

[从文件](http://www.cs.unr.edu/~bebis/CS308/Code/RGB/ReadImage.cpp)中读取 PPM（彩色）图像的 C++ 例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:32:03.370

几年前，我用 C 语言编写了一个[PPM 阅读器。](http://vips.svn.sourceforge.net/viewvc/vips/vips7/trunk/libsrc/format/im_ppm2vips.c?view=markup)如果您愿意，欢迎您对其中的一部分进行删减。

# tsql - SQL 从组中选择

> ID：882628
> 
> 赞同：1
> 
> 时间：2009-05-19T13:03:09.933
> 
> 标签：tsql, sql-server-2008

假设我们有下表数据：

```
ID   parent    stage     submitted
1      1         1           1
2      1         2           1
3      1         3           0
4      1         4           0
5      5         1           1
6      5         2           1
7      5         3           1
8      5         4           1 
```

如您所见，我们有 2 个组（具有相同的父组）。我想选择提交的后期阶段。在上面的示例中，我想选择 ID 的 2 和 8。我完全迷失了，所以如果有人能提供帮助，将不胜感激。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T13:12:04.033

```
SELECT T.ID, T.PARENT, T.STAGE 
from
   T, 
   (
      select PARENT, MAX( STAGE) MAX_STAGE 
      from T
      where SUBMITTED = 1
      GROUP BY PARENT 
   ) M
where 
   T.STAGE = M.MAX_STAGE 
   AND T.PARENT = M.PARENT 
```

说明：首先，将每个组的最大阶段隔离为提交 = 1（内部选择）。然后，将结果与真实表连接起来，过滤掉没有最大阶段的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:12:27.777

```
Select Parent, max(Id)
From tbl t
Inner Join
(
    Select Parent, max(Stage) as Stage
    from tbl t
    Where Submitted = 1
    Group by Parent
) submitted
on t.Parent = submitted.parent and
    t.stage = submitted.stage
Group by Parent 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:13:15.280

这应该这样做：

```
SELECT
     T1.id,
     T1.parent,
     T1.stage,
     T1.submitted
FROM
     Some_Table T1
LEFT OUTER JOIN Some_Table T2 ON
     T2.parent = T1.parent AND
     T2.submitted = 1 AND
     T2.stage > T1.stage
WHERE
     T1.submitted = 1 AND
     T2.id IS NULL 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-19T13:08:22.230

```
SELECT * FROM Table WHERE ID = 2 OR ID = 8 
```

这是你想要的吗？

# build-process - 在源代码管理中管理存储构建的最佳方法是什么？

> ID：882630
> 
> 赞同：0
> 
> 时间：2009-05-19T13:03:37.203
> 
> 标签：build-process

我正在使用 Perforce，如果这完全改变了答案的调子。

我想实现一个构建过程，当解决方案以“发布”模式构建时，用标签标记整个源树并将构建的输出（DLL、网页）推送到 /build/release 目录在源代码控制中。该目录应始终包含最新的完整构建，仅此而已，因此我可以将该目录完整地拉到生产服务器上，然后就可以使用了。

现在假设我在以前的版本中有一个新版本不应该包含的 DLL。这是否意味着更新 /build/release 文件夹的最佳做法是检查整个内容，删除其中的所有内容，添加*新*的构建文件并同步它？听起来像是一个显而易见的答案，但我想确保我不会错过其他一些可能是更好的方法的巫毒教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T14:30:50.303

我认为你错过了简单的巫术:) 你应该考虑只使用一个普通的旧文件系统来进行构建。源代码控制旨在管理变更、版本控制和协作，实际上不需要任何与构建相关的内容。构建系统的全部意义在于能够重现源代码并立即创建应用程序，因此我将专注于能够做到这一点，而不是依赖于输出文件的永久存储。请务必像备份源代码控制数据库一样备份构建放置文件夹结构。使用在文件名中包含内部版本号的文件夹命名方案。我会存储所有构建（至少返回几个），因为有时 QA 想要恢复旧构建进行测试，以便比较功能或恢复错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:07:51.983

我会说“是” - 您应该从构建的空白文件夹结构开始（无论源代码控制系统如何）。

# xml - XSD发生指标的使用

> ID：882631
> 
> 赞同：6
> 
> 时间：2009-05-19T13:03:42.567
> 
> 标签：xml, xsd

XML Schema 指定“发生指标”（maxOccurrence、minOccurrence）。是否存在应该使用这些指标的元素（xsd:element、xsd:sequence 或 xsd:all）的“最佳实践”？

例子：

任何一个

```
 <xsd:element name="XList">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="X" type="xsd:token" minOccurs="1" maxOccurs="unbounded" />
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 

```

或者

```
 <xsd:element name="XList">
    <xsd:complexType>
        <xsd:sequence minOccurs="1" maxOccurs="unbounded">
            <xsd:element name="X" type="xsd:token" />
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 

```

我想到达：

```
 <XList>
    <X>First</X>
    <X>Second</X>
    <X>Third</X>
    <X>Fourth</X>
    <X>Fifth</X>
...
</XList> 

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T14:28:17.280

我自己发现了。

乍一看，我的示例之间的区别并不是很明显，但是如果示例稍微复杂一点，那将是有意义的。

以下扩展阐明了差异：

```
 <xsd:element name="XList">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="X" type="xsd:token"
                         minOccurs="1" maxOccurs="1"/>
            <xsd:element name="Y" type="xsd:token"
                         minOccurs="1" maxOccurs="1"/>   
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 

```

导致

```
 <XList>
    <X>Only X</X>
    <Y>Only Y</Y>
</XList> 

```

然而

```
 <xsd:element name="XList">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="X" type="xsd:token"
                         minOccurs="1" maxOccurs="unbounded"/>
            <xsd:element name="Y" type="xsd:token"
                         minOccurs="1" maxOccurs="unbounded"/>   
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 

```

导致

```
 <XList>
    <X>First X</X>
    <X>Second X</X>
    <X>Third X</X>
    ...
    <Y>First Y</Y>
    <Y>Second Y</Y>
    ...
</XList> 

```

和

```
 <xsd:element name="XList">
    <xsd:complexType>
        <xsd:sequence minOccurs="1" maxOccurs="unbounded" >
            <xsd:element name="X" type="xsd:token"
                         minOccurs="2" maxOccurs="2"/>
            <xsd:element name="Y" type="xsd:token"
                         minOccurs="1" maxOccurs="1"/>   
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 

```

导致

```
 <XList>
    <X>First X</X>
    <X>Second X</X>
    <Y>First Y</Y>
    <X>Third X</X>
    <X>Fourth X</X>
    <Y>Second Y</Y>
    ...
</XList> 

```

和

```
 <xsd:element name="XList">
    <xsd:complexType>
        <xsd:sequence minOccurs="1" maxOccurs="unbounded" >
            <xsd:element name="X" type="xsd:token"
                         minOccurs="1" maxOccurs="unbounded"/>
            <xsd:element name="Y" type="xsd:token"
                         minOccurs="1" maxOccurs="unbounded"/>   
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 

```

导致

```
 <XList>
    <X>First X</X>
    <X>Second X</X>
    <X>Third X</X>
    ...
    <Y>First Y</Y>
    <Y>Second Y</Y>
    ...
    <X>Fourth X</X>
    <X>Fifth X</X>
    <X>Sixth X</X>
    ...
    <Y>Third Y</Y>
    <Y>Fourth Y</Y>
    ...
</XList> 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:27:55.577

如果您的序列只包含一个孩子，我想它不会产生太大的影响。不过，我会将其放在 xsd:element 上：如果序列中有多个元素，我通常会将它们放在此处。

# ios - 如何在 UITableViewsFooter 部分中显示两个或多个按钮？

> ID：882646
> 
> 赞同：0
> 
> 时间：2009-05-19T13:06:22.703
> 
> 标签：ios, objective-c, uitableview, cocoa-touch

我正在创建一个应用程序，我有一个主屏幕。在那个主屏幕上，我有一个标题为“继续”的按钮。
现在我想通过单击该按钮加载一个新视图。我已经成功地做到了这一点。在那个新视图上，我有一个 UITable 和一个导航栏。现在我想要表格视图下方的 2 或 3 个按钮。
我不创建自定义单元格。我想通过页脚视图完成此操作并从该按钮加载新视图。

我还创建了一个自定义按钮，我像这个单元格一样替换它：`accessaryView = mycustombutton`，但我想在单元格的最后设置按钮。牢房里还有一些空间。如何创建一个完全隐藏辅助视图的方形按钮，并且按钮在表格单元结束的地方结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:25:21.837

据我了解，您在这里问了两个问题。（您可能想稍微清理一下您的问题。）

第一个：您可以将 UITableView 的属性更改`tableFooterView`为自定义 UIView，您可以在其中添加两个或三个 UIButton。例如，如果您有一个带有按钮的页脚视图`fView`，并且您的表格视图被称为`tview`：

```
tview.tableFooterView = fview;
```

对于第二个：您必须使用自定义框架创建自己的 UIView，将其设置为 UITableViewCell's `accessoryView`，然后将按钮添加到该视图而不是附件视图。使用 UIView 的`initWithFrame:`方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:37:13.783

TableView 有一种方法可以返回表/节的页脚而不是纯文本的视图。

您可以实现此方法并使用 2 个按钮创建自己的视图。然后返回视图。

这些是您应该考虑实施的为部分创建页脚的方法

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section 
```

tableView 的这个属性用于为整个表格创建页脚

```
@property(nonatomic, retain) UIView *tableFooterView

[tableView setTableFooterView:yourViewWithBtns]; 
```

至于配件，默认情况下，创建的配件最后会留下一些空间，即使使用自定义配件也是如此。另一种方法是将自定义按钮添加到单元格的内容视图中，而不是将其设置为附件

```
yourButton.frame = CGRectMake(260.0, 10.0, 40.0, 20.0);
[cell.contentview addSubview:yourButton]; 
```

但是，如果您允许可编辑的单元格，这将产生问题（您必须在表格编辑时更改按钮的位置或隐藏它 - 使用附件视图会自动为您处理）

# asp.net-mvc - 是否可以在 VS 2010 B1 中创建 ASP.NET MVC 应用程序？

> ID：882652
> 
> 赞同：0
> 
> 时间：2009-05-19T13:07:55.070
> 
> 标签：asp.net-mvc, visual-studio-2010

是否可以在 VS 2010 中创建 ASP.NET MVC 应用程序？我应该怎么做才能启用“创建视图”、“创建控制器”魔术？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T13:16:53.557

Phil Haack 在他最新的博文中谈到了这一点。

[http://haacked.com/archive/2009/05/18/aspnetmvc-vs2010-beta1.aspx](http://haacked.com/archive/2009/05/18/aspnetmvc-vs2010-beta1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:15:55.197

不幸的是，您必须[等待](http://haacked.com/archive/2009/05/18/aspnetmvc-vs2010-beta1.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T13:17:57.470

即使有可能，使用未发布的产品也没有任何意义。从 MVC 迁移到 beta，然后到 RC1 的工作已经足够多。谁知道VS的发布会带来什么变化？

我听说他们承诺在 Beta 2 中提供支持。

[用于 Visual Studio 2010 Beta 1 的 ASP.NET MVC](http://haacked.com/archive/2009/05/18/aspnetmvc-vs2010-beta1.aspx)

# environment-variables - 如何从 gvim 中获取环境变量

> ID：882658
> 
> 赞同：5
> 
> 时间：2009-05-19T13:08:33.650
> 
> 标签：environment-variables, vim

当我从终端启动*gvim时，我可以访问我的所有环境变量。*

但是，如果我从菜单或“运行应用程序”启动器启动*gvim ，我的所有环境变量都无法访问。*

*如果gvim*不是从终端启动的，我如何访问在我的 bashrc 中定义的环境变量？

这些变量在 ~/.bashrc 中定义

发行版：Ubuntu Intrepid

注意1：“运行应用程序”启动器可通过按 ALT+<F2> 访问

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T10:09:03.897

您应该能够读取所有实际的环境变量，例如

```
:!echo $PATH 
```

您的问题与个人环境变量有关。

你为什么要在 gvim 中读取环境变量？可能有更好的做事方式。

**环境变量的范围**
当您登录到您的计算机时，bash 获取 .bash_profile 文件。
当您运行终端时，它会获取 .bashrc 文件，因此您的个人环境变量可在该终端和任何子 shell 中使用。

除非您从 .bashrc 中导出变量，否则这些变量在一般环境中不可用，并且只有在您运行终端后才能导出它们。

由于您是通过应用程序启动器运行 gvim，因此无需读取 .bashrc 文件来为您创建这些环境变量。

有关 bourne shell 环境变量的一些[信息](http://www.fnal.gov/docs/UNIX/unix_at_fermilab/htmldoc/rev1997/uatf-62.html)，请参阅第 9.1.2 节

所以一个放置的好地方：

```
MYENVIRONMENTVARIABLE=new value of environment variable
export MYENVIRONMENTVARIABLE 
```

位于 .bash_profile 中，然后如果要对变量进行任何更改，请确保再次导出它们（如果您希望更改是永久性的，请编辑 .bash_profile）。

请注意，此环境变量的值可用于任何新的 shell，但现有的 shell 可能不会重新读取环境变量。

# tdd - 测试驱动开发和结对编程

> ID：882661
> 
> 赞同：5
> 
> 时间：2009-05-19T13:08:56.100
> 
> 标签：tdd, extreme-programming, pair-programming

我在一个团队中，我试图说服我的队友采用 TDD（正如我在以前的团队中看到的那样，并且设置相似）。另外，我个人的看法是，至少在开始时，如果同时完成 TDD 和结对编程，它确实很有帮助。这样，两个没有经验的（在 TDD 中）开发人员可以互相帮助，讨论编写什么样的测试并取得良好的进展。

另一方面，我的经理认为，如果我们同时在团队中引入两种新的开发实践，很有可能两者都会失败。所以，他想保守一点，介绍任何一个。

我如何说服他这两者是互补的而不是正交的。还是我错了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T13:17:24.477

我不确定让更多不知道他们在 TDD 中做什么的人会有所帮助。它会很快降临到你们俩用谷歌搜索这个主题，或者你们俩都在争论 TDD 到底是什么/不是什么。

我认为你最好让团队中的某个人成为给定技术的传播者（有人去阅读 TDD，有人去阅读结对编程），然后让这些人推广和试用这些东西。是的，两者可以同时发生，但它们不必在整个项目团队中使用。您可以让您的团队中的一小部分人进行结对编程，然后报告他们的经验。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-22T16:11:57.493

**结对编程在学习新实践时非常有效，尤其是 TDD**

因此，您可以通过妥协来兼顾两者。以敏捷的方式逐步执行此操作。首先进行结对编程。这是两者中较容易的。结对编程之后的所有实践都将变得更容易学习，并且将更快地被团队采用，并且具有更高的一致性。结对编程是第一个（如果不是第一个）应该采用的工程实践之一。确保它有效地完成。下面是如何进行结对编程的描述。

结对编程是开发团队在开发软件时可以使用的最有效的实践之一。配对发生在两个开发人员使用单个计算机和键盘积极开发故事卡的情况下。管理人员担心使用配对编程会使他们的编程成本翻倍。乍一看，他们为什么会认为——毕竟——要求两个开发人员一起完成同一个任务，这是可以理解的。然而，在实践中，使用这种开发技术的敏捷团队发现初始开发成本的小幅增加（根据犹他大学的一项研究显示为 15%）被缺陷的减少、更短且更便宜的测试所抵消。周期并减少对生产支持的需求。

虽然让程序员结伴工作可以提高生产力似乎有悖常理，但这种技术确实有效的原因有很多（想想那句老话，“两个脑袋总比一个脑袋好。”）原因如下：

*   提高质量——配对鼓励代码审查。许多错误在输入时就会被发现。结对编程意味着由两个致力于代码质量的人进行持续的代码审查，并始终共同努力识别和修复错误。犹他大学进行的一项研究发现，对于成对编写的代码，在代码中发现的最终缺陷数量平均减少了 15%。
*   更少的“卡住”时间——编程很难。开发人员通常很难找到解决方案，花费的时间超出了他们应该“卡住”的程度。与合作伙伴一起集思广益，并同意在必要时寻求帮助，可以减少在试图找到解决方案时花费的非生产性时间。
*   花在分心上的时间更少——开发人员在与合作伙伴一起工作时，不太可能花时间在打私人电话、上网或电子邮件假期上。
*   解决问题有两种视角——不同的经验水平、不同的解决问题的方式、不同的辅助技能都会增加更快解决问题的机会。犹他大学所做的研究还确定了成对编写的软件更好的整体设计和更短的代码长度。
*   减少对未知的恐惧——与其他开发人员合作时，解决问题或尝试掌握新技术比单独工作时更容易。随着时间的推移，他们还可以更好地了解整个应用程序。最后，由于结对，该项目以多人了解系统的每个部分而告终。
*   不太可能在范围内构建——开发人员通常愿意添加需求中未解决的功能。与一对开发人员一起工作时，第二个开发人员更有可能让他/她的合作伙伴完成任务。
*   改进的团队动力——由于结对的方法，人们学会了一起工作。他们更频繁地交谈并体验到更好的信息流。结果，团队动力得到改善。事实上，我们发现最好的团队建设体验就是一起合作开发让客户感到兴奋的软件。每个人都喜欢成为成功团队的一员。
*   消除知识孤岛——领域知识、代码知识或实践知识通过团队和开发人员轮流配对迅速传播。

一旦团队对配对感到满意，然后再进行 TDD。说明如下：

测试驱动开发 (TDD) 是一种软件开发工程实践，由短时间的开发组成，首先编写涵盖所需改进或新功能的新测试用例，然后实现通过测试所需的生产代码，最后软件被重构以适应变化。在实际开发之前测试的可用性确保了任何更改后的快速反馈。从业者强调测试驱动开发是一种设计软件的方法，而不仅仅是一种测试方法。测试驱动开发是一种强大的实践，是减少生命周期后期发现的缺陷的主要贡献者。强烈鼓励新团队与经验丰富的 TDD 从业者配对或以其他方式接受 TDD 指导。e

测试驱动开发要求在代码本身的每个方面之前编写一个自动化的单元测试，定义代码的需求。这些测试包含真或假的断言。随着代码的发展和重构，运行测试可以快速确认正确的行为。基于 xUnit 概念的测试框架提供了一种用于创建和运行自动化测试用例集的机制。测试驱动开发周期：以下序列基于示例测试驱动开发一书，许多人认为这本书是现代形式的概念的规范源文本。

1.  写一个测试。在测试驱动开发中，每张新的故事卡都从编写测试开始。此测试将失败，因为它是在功能实现之前编写的。为了编写测试，开发人员必须清楚地了解特性的规范和要求。这可以通过带有验收标准的故事卡来完成，以指定何时满足要求。这也可能意味着现有测试的不变或修改。这是测试驱动开发与在编写代码后编写单元测试的区别特征：它使开发人员在编写代码之前专注于需求，这是一个微妙但重要的区别。
2.  运行所有测试，看看新的测试是否失败。这可以验证测试工具是否正常工作，并且新测试不会在不需要任何新代码的情况下错误地通过。由于预期的原因，新测试也应该失败。这一步测试测试本身是否定的：它排除了新测试总是通过的可能性，因此一文不值。
3.  写一些代码。下一步是编写一些代码以使测试通过。在这个阶段编写的新代码不会是完美的，例如，可能会以一种不优雅的方式通过测试。这是可以接受的，因为后面的步骤会改进和磨练它。编写的代码只为通过测试而设计，这一点很重要；在任何阶段都不应预测和“允许”进一步的（因此未经测试的）功能。
4.  运行自动化测试并看到它们成功。如果所有测试用例现在都通过了，程序员可以确信代码满足所有测试的要求。这是开始循环最后一步的好点。
5.  重构代码。现在可以根据需要清理代码。通过重新运行测试用例，开发人员可以确信重构不会破坏任何现有功能。删除重复的概念是任何软件设计的一个重要方面。然而，在这种情况下，它也适用于删除测试代码和生产代码之间的任何重复项——例如在两者中重复的幻数或字符串，以使测试在步骤 3 中通过。

重复

从另一个新测试开始，然后重复循环以推进功能。步骤的大小可以像开发人员喜欢的那样小，或者如果她/他感觉更自信，可以变大。如果为满足测试而编写的代码不能很快完成，那么步长可能太大了，也许应该使用较小的可测试步长。使用外部库时，重要的是不要进行小到仅仅有效地测试库本身的增量，除非有理由相信该库有错误或功能不够完整，无法满足所有需求正在编写的主程序。

开发风格 使用测试驱动开发有很多方面，例如“保持简单，愚蠢”（KISS）和“你不需要它”（YAGNI）的原则。通过只专注于编写通过测试所需的代码，设计可以比其他方法通常实现的更清晰、更清晰。测试驱动开发要求程序员首先使测试用例失败。这个想法是为了确保测试真正有效并且可以捕获错误。一旦显示，正常循环将开始。这被创造了“测试驱动的开发口头禅”，称为红色/绿色/重构，其中红色表示失败，绿色表示通过。测试驱动开发不断重复添加失败的测试用例、通过测试用例和重构的步骤。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-19T13:14:56.447

建议他们阅读这些关于 TDD 的书籍：

[Michael Feather 有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)
[Kent Beck 的经典测试驱动开发 - 示例](https://rads.stackoverflow.com/amzn/click/com/0321146530)
[Gerard Meszaros 的 xUnit 测试模式 -](https://rads.stackoverflow.com/amzn/click/com/0131495054)
[在 Microsoft .NET 中重构测试代码测试驱动开发](https://rads.stackoverflow.com/amzn/click/com/0735619484)

或结对编程的这些网站：

[结对编程（维基百科）](http://en.wikipedia.org/wiki/Pair_programming)
[Corey Haines 结](http://www.coreyhaines.com/)
[对编程发光](https://rads.stackoverflow.com/amzn/click/com/0201745763)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T13:15:55.680

你是绝对正确的，结对编程在学习新东西时会有很大帮助。我同意你的观点，你应该努力做到这两点。

或许向你的经理展示它的最佳方式不是建议你要求同时介绍这两个新事物。相反，建议您觉得开始实施 TDD 最有效的方法是，在完成工作的同时，只让两个开发人员作为“TDD 调查小组”，让他们一起工作以设置适当的工具，学习技术，测试它们，并弄清楚你需要做什么才能在你的环境中应用它们。一旦你完成了这项工作，并让两个人有一点经验，然后让他们分开，每个人与另一个开发人员坐下来几天，让另一个开发人员快速掌握新技术。重复直到所有开发人员都学会了 TDD。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T13:14:59.597

你没有说服力。告诉他你认为两者协同工作的原因，也许提供一些证实这一点的数据，然后让他决定。如果你需要让所有人相信这是一个好主意，我敢打赌没有人会接受它。自然反对。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T13:58:43.690

就我个人而言，我发现结对编程最适合一个有经验的人和一个没有经验的人。

即，我的目标是在程序员的技能/经验上有所不同，而不是试图匹配熟练的技能。

更有经验的人从解释中得到更多，并被迫构建思想，而没有经验的人有机会反弹想法并获得“最佳实践”。

至于TDD，我是个大粉丝。exp 再次帮助没有经验的人，因为它有助于真正带出测试的重点。即您不想绝对测试所有内容......它增加了焦点。我经常发现人们在编写测试时没有关注他们想要达到的目标。

单元测试是必不可少的 imo ... 毕竟，有些员工不会在 2 年内出现。如果没有任何东西可以验证它的功能，你怎么能改变现有的代码呢？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T13:17:34.850

好吧，取决于经理，您可以指出 XP 文献中的一些论点，即这些实践是相互依赖的。例如，如果您没有可靠的单元测试，请不要无情地重构。

我建议您逐步进行，因为配对只是为了解决 TDD，就像针对新难题的任何协作努力一样，而不是“所有产品开发都将成对完成”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T13:21:28.117

虽然一种做法不需要另一种做法，但有一种“偷偷摸摸”的方式一次介绍两者。

从使用可用的 xUnit 框架之一实现 TDD 的目标开始。找一个兼容的同事，询问他们是否愿意每天花一个小时和你一起工作。“肖恩，我正在尝试这个新工具，你能帮我确保我做得对吗？” 效果很好。

和肖恩待了几天后，再和苏珊一起重复……

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T13:25:48.733

无论如何都要这样做。如果经理发现您结对，请说出“代码审查”这个神奇的词
*假设：显然，这对结对者应该有足够的纪律/专注，并在会议结束时产生工作代码*

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-11T03:10:49.810

Write some tests that bring attention to existing bugs in the code base - then show them to your boss, I think he might suddenly agree TDD is a good idea!

# iphone - 如何在单个视图中创建超过 40-50 个文本字段和标签？

> ID：882662
> 
> 赞同：0
> 
> 时间：2009-05-19T13:09:15.100
> 
> 标签：iphone, xcode, interface-builder

How do I create more than 40-50 textfields and labels in a single view and when the textfield selected the keyboard should not hide the textfield?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:12:12.427

您可能希望以编程方式创建它们 - 使用 Interface Builder 制作 40-50 个文本字段将非常耗时。

至于键盘，您可以使主 UIView 可滚动，然后每当显示键盘时，检查选择了哪个文本字段并将其滚动到屏幕的上半部分。（如果您的应用程序是可旋转的，请确保“屏幕的上半部分”根据您的方向更改定义。）

这个想法的一些示例代码：

```
// Determine some basic info
int numberOfTextfields = 50;
int textfieldHeight = 40;
int textfieldWidth = 200;

// Create the UIScrollView
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:
                                   CGRectMake(0, 0, 
                                              numberOfTextfields*textfieldHeight,
                                              textfieldWidth)];

// Create all the textfields
NSMutableArray *textfields = [NSMutableArray arrayWithCapacity:
                                   (NSUInteger)numberOfTextfields];
for(int i = 0; i < numberOfTextfields; i++) {
    UITextField *field = [[UITextField alloc] initWithFrame:
                                CGRectMake(0,
                                           i*textFieldHeight,
                                           textFieldHeight,
                                           textFieldWidth)];
    [scrollView addSubview:field];
    [textfields addObject:field];
} 
```

在这段代码中，我们首先设置了一些变量来确定文本字段的行为（它们的位置、外观和数量），然后创建主 UIScrollView。完成后，我们创建一堆具有先前指定尺寸的 UITextField，同时将它们添加为滚动视图的子视图，并将它们保存在一个数组中以供以后参考（如果需要）。

稍后，您将需要覆盖`becomeFirstResponder:`UITextFields 的方法（此处可能是 UITextField 的子类），以便当文本字段成为第一响应者并显示键盘时，它会调用`setContentOffset:animated:`滚动视图以显示自身。

# zip - SharpZipLib - 该产品的状态如何？

> ID：882667
> 
> 赞同：1
> 
> 时间：2009-05-19T13:10:37.873
> 
> 标签：zip, unzip, sharpziplib

我去[下载 SharpZipLib 程序集](http://www.icsharpcode.net/OpenSource/SharpZipLib/Download.aspx)，但它看起来不在 SourceForge 上。这是他们网站的问题还是该项目不再可用？有人还在做这个项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T13:19:19.323

您可能遇到了 SourceForge 的临时问题。下载对我有用。看起来最新版本是在 2008 年 8 月 11 日，所以似乎还有一些最近的工作正在进行中。

总体来说是一个不错的图书馆。我过去用过它，它做得很好。

祝你好运！

# php - 在轻量级购物网站中，数据库相对于 XML 的优势？

> ID：882668
> 
> 赞同：2
> 
> 时间：2009-05-19T13:10:56.750
> 
> 标签：php, xml, database, jsp

我有一个基于 JSP 和 XML 的轻量级在线购物网站，我想知道这个系统与 PHP 和 MySQL 相比有什么特别的弱点？

我知道 JSP 可以使用 Java API，但我觉得 PHP 与 HTML 的关系更“自然”，并且还具有动态类型的优点，并且更加广泛和需求。是否有一个原因？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T13:15:34.323

我想说 XML 解决方案相对于数据库的主要缺点是：

1.  搜索速度
2.  更新速度
3.  可扩展性
4.  并发（感谢乔纳森）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T14:47:23.297

轻量级是相对的。寻求数据库解决方案。您永远不知道您的“轻量级”网站何时变为“关键任务”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T13:21:26.853

PHP 通常更广泛且需求量更大，因为它的学习曲线非常短，并且对于临时开发人员来说很容易上手并开始使用。它通常与大多数基于 linux 的服务器上的 Apache 安装捆绑在一起，这也没有什么坏处。

由于上述原因，有更多好的（和坏的！）资源可用于帮助刚起步的 PHP 开发人员，而不仅仅是现有的任何语言，这会产生滚雪球效应。

要回答您关于 XML 的原始问题，使用您描述的架构可能不会在商品很少的小批量商店上实现基本购物车实现，但是搜索商品数据库、跟踪库存等操作是最好留给数据库。

也就是说，如果您已经在使用 JSP，那么更改为数据库并不意味着您需要离开 JSP。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-08-04T16:35:06.183

> 我有一个基于 JSP 和 XML 的轻量级在线购物网站，我想知道这个系统与 PHP 和 MySQL 相比有什么特别的弱点？

JSP 和 PHP 都是视图技术。JSP 的优势在于得到 Java (EE) 的支持，这是一种强大的语言和平台。PHP 的优势是成为有史以来最简单、最受公众接受的 Web 编程语言。缺点不言而喻。

要遵循 OO 思想开发一个健壮的 Web 应用程序，请选择 JSP（只要您不使用 90 年代使用[*scriptlets*](https://stackoverflow.com/questions/3177733/howto-avoid-java-code-in-jsp-files)的方式将原始 Java 代码嵌入其中）。如果您赶时间和/或不关心未来的可维护性并想在一天内开发一个电子商务网站，那么选择 PHP。

XML 和 RDBMS 都是存储数据的方式。然而，RDBMS 反过来提供了使用 SQL 作为语言来选择和操作特定数据的能力，这可以比使用 XML 更高效地完成。

比较 JSP+XML 和 PHP+MySQL 有点像比较苹果和橘子。然而，作为数据存储，XML 对你的影响更大，所以你真的更喜欢 MySQL“尽管”它与 PHP 一起使用。但是，您可以使用 Java 访问数据库。首先，您有[JDBC API](http://download.oracle.com/javase/tutorial/jdbc/basics/index.html)。总之，我更喜欢 JSP+SQL。

> 我知道 JSP 可以使用 Java API，但我觉得 PHP 与 HTML 的关系更“自然”，并且还具有动态类型的优点，并且更加广泛和需求。是否有一个原因？

对于对编程一无所知的人来说，这是最容易上手的。您只需要一个简单的网络服务器和一个文本编辑器。使用 PHP 进行开发非常快，因为它具有即时反馈，并且网络上提供了无数的教程和代码片段。此外，您还可以选择更多*免费*的PHP Web 托管，而您必须为可靠的 JSP/Servlet 托管支付更多费用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T13:24:11.153

如果您处于预期实体之间存在关系的情况，我发现 XML 比关系数据库更难处理。不仅确定存在哪些关系会导致问题（要求您在内存中维护这些关系的映射或重复读取大量文件），而且维护引用完整性对于 XML 来说是一个可怕的痛苦。即使像根据某种分类法对项目进行分类这样简单的事情（X 是割草机是一种户外设备是一种......）也会成为 XML 的问题，因为您必须开发一些外部工具来确保您是使用一致的词汇。使用 RDBMS，您只有一个包含父 ID 和子 ID 的术语表。商店中的任何商品都可以仅引用分类 ID。

当我尝试使用 XML 做太多事情时，我发现自己粗鲁地重新创建了 RDBMS 的一些最有用的特性，并使用了一些草率的外部工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T13:20:26.310

使用 XML 作为电子商务的数据存储并不常见，因为存在性能问题，而且，因为 (My)SQL 运行良好。如果您想尝试新的东西，请将 XML 与 MySQL 交换。我看不出改变编程语言有什么真正的好处，事实上，我认为如果你改变语言，你会注意到生产力的显着下降。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T13:22:44.357

相关但离题：你说的是“轻量级”吗？在这种情况下，sqlite 可以击败 XML 和数据库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-02T05:50:45.363

如果您只存储事务数据，那么您不会遇到任何 RDB 无法解决的问题。但是，如果您的数据更面向文档（更混乱），您可能希望查看几个本机 xml DB 及其 XQuery 接口中的任何一个。

eXist、Documentum xDB、Oracle Berkeley、MarkLogic（用于大数据）只是其中的一小部分。您可能还对[http://en.wikibooks.org/wiki/XRX感兴趣](http://en.wikibooks.org/wiki/XRX)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-08-02T12:14:04.940

在不同的策略上，您可以查看 couchdb 中的 json。

# java - 如何在 JList 中的组件上启用事件

> ID：882675
> 
> 赞同：1
> 
> 时间：2009-05-19T13:12:19.243
> 
> 标签：java, user-interface, swing

我在 JList 上使用自定义渲染器，但渲染的组件都不可访问。

```
list.setCellRenderer(new ListCellRenderer() {

    public Component getListCellRendererComponent(JList list, Object value,
            int index, boolean isSelected, boolean cellHasFocus) {

        JCheckBox c = new JCheckBox();
        JButton b = new JButton("My Button!");

        JPanel p = new JPanel(new FlowLayout());
        p.add(c);
        p.add(b);

        if (isSelected) {
            p.setBackground(Color.LIGHT_GRAY);
        }
        return p;
    }
}); 
```

单击复选框或按钮不会执行任何操作。我也尝试将 ActionListener 添加到按钮，但单击时它没有触发。唯一有效的是选定项目时的背景颜色（见截图）。

单击按钮时甚至没有“单击动画”。

[替代文字 http://foto.darth.cz/pictures/2009-05-19_151057.png](http://foto.darth.cz/pictures/2009-05-19_151057.png)

所以我的问题是，我是否必须做其他事情才能在渲染组件上启用偶数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T13:22:36.710

真的和表格一样。渲染器组件实际上并不是真正的组件。它就像一个用于绘制假组件的模板。您为什么不尝试将组件粘贴在 JScrollPane 中或将它们放入单列 JTable 并实现适当的渲染器/编辑器？

# language-agnostic - 我可以通过立体声信号获得更高的频域分辨率吗？

> ID：882680
> 
> 赞同：4
> 
> 时间：2009-05-19T13:13:06.933
> 
> 标签：language-agnostic, audio, signal-processing

**背景**

我承认，这个问题源于对数字信号处理所涉及的基础数学缺乏深入的理解。我还在学习。

我想获取一组幅度样本，比如 1024（单通道），并将它们带入频域。显然，这需要 FFT；那里没问题。问题是这只给了我高达奈奎斯特频率或 1024/2 的频率。

**问题**

如果我有立体声信号，我可以合并信号以产生 2048 个幅度样本，从而返回 1024 个频率值吗？我希望在频域中获得更高的分辨率。

那么，这可以做到**并**返回有意义的频率数据吗？有没有其他方法可以获取立体声信号并最终在频域中获得更高的分辨率？

**到目前为止我发现了什么**

我遇到了一篇文章，它建议将左信号设为实数值，将右信号设为 FFT 复数值的虚数值。这对我来说没有意义，也许是因为我不懂数学。我确实尝试过，它似乎工作，但我有信号泄漏。所以我应用了一个汉宁窗，但处理后只有 512 个可用值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T13:28:51.287

一般来说，没有。您的立体声信号当然是 2048 个幅度样本，但这些是来自两个独立通道的样本，每个通道都经过过滤，以在 A/D 转换之前删除高于 Nyquest 频率的所有信息。

考虑涉及一对 48 KHz 通道的两种情况：

1.  一个 1000 Hz 信号向左平移，一个 2000 Hz 信号向右平移。这些之间没有任何关系，相反通道中也不存在任何信号，因此将它们组合起来毫无意义。

2.  一个 50 KHz 的信号向左平移。右声道中没有任何内容，并且假设有适当的截止滤波器，左声道中也没有任何内容。没有过滤，你在左声道有废话。

也就是说，也许您在想，如果一对麦克风正在记录房间中的环境信号，并且您移除了截止滤波器，那么两个麦克风之间的相位差可能会为您提供有关实际信号的更多信息。这将是一个引人入胜的研究领域，但据我所知，目前距离实际实施还有很长的路要走。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T13:30:02.250

如果您正在分析的信号是从物理信号中获得的，那么您将无能为力。将信号合并到一个包含 2048 个样本的大数组中就足以进行数学运算，但结果将毫无意义。

例如，创建一个包含 2048 个单元格的数组并像这样填充它：

原始= int [1024]；
新 = int[2048]
新[2*n] = 原始[n]；
新的[2*n+1] = 原[n];

这样你会得到更大的数组和更高的频率，但是由于你的初始数据是一样的，你得到的结果不会有任何帮助，它会和原来的 FFT 一样。

如果您只需要更高的频率分析，您可以做两件事，将采样率（我想您在插孔中使用声音线）更改为您的音板可以做的最大值（通常为 48kHz）。或者其次，将采集板更改为某些特定的硬件（任何专用的 USB 采集板都可以轻松达到 1MHz）。

Ps：频率为采样频率的1024/2倍。不要忘记乘以采样频率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:51:57.183

## 特例：

可以想象一个声音的单点源的安排，以及安排立体声输入以获得两个通道之间的半波长偏移。

然后，您将能够组合这些通道以获取高频数据。

可能会做一个可爱的演示，但它不是一个实际的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T22:48:28.983

有一种可能性是您可以从两个频道获得更高的费率。模数系统通常是多路复用的，也就是说，它们对两个通道使用一个模数转换器，在它们之间交替使用。如果您的录音是这种情况，*并且*两个通道具有几乎相同的输入，*并且*其他变量对您有利，那么您实际上可能具有两倍的基本采样率。

这是一个很长的镜头，但也许值得一试。如果是这种情况，您可以通过简单地将两个通道以正确的顺序交错来重构更高的频率。（我看不出有任何理由将其纳入复杂频道的想法。）

要检查是否是这种情况，您可以简单地检查交错通道图，或者互相关图可能有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-10T23:39:20.213

不行，做不到！

左右声道组合成一个图像。number (left[i] + right[i]*j) 形成一个包含两个不同音频通道的信号。这种信号可以混合并通过介质（空气、水、RF）传输。它只是一种将两个真实通道复用为一个具有相似带宽的复杂信号的方法。

# c# - Watin - 使用 ConfirmDialogHandler 处理确认对话框

> ID：882683
> 
> 赞同：15
> 
> 时间：2009-05-19T13:13:51.580
> 
> 标签：c#, asp.net, watin

使用 Watin，我正在尝试处理确认对话框并告诉 watin 按“确定”。这在互联网上有很好的记录 - 你使用 a`ConfirmDialogHandler`和`UseDialogOnce`方法.. 除非它对我不起作用。我收到以下错误：

`WatiN.Core.Exceptions.WatiNException: Dialog not available within 5 seconds`

我使用的是 watin 2.0 beta atm，但我之前使用的是 1.X 的早期版本，它有同样的问题。在运行 64 位 Vista 的同事机器上测试，我正在运行 64 位 Windows 7。

代码如下所示：

```
 using (IE ie = new IE("http://localhost/TestApp/TestConfirmPage.asp"))
        {
            var approveConfirmDialog = new ConfirmDialogHandler();

            using (new UseDialogOnce(ie.DialogWatcher, approveConfirmDialog))
            {
                ie.Button(Find.ByName("btn")).ClickNoWait();
                approveConfirmDialog.WaitUntilExists(5);
                approveConfirmDialog.OKButton.Click();
            }
            ie.WaitForComplete();
        } 
```

ASP 页面非常简单，它由一个强制确认按钮组成，如下所示：

```
<input type="button" name="btn" id="btn" value="Click me" onclick="ConfirmApp()"  /> 
```

并且`ConfirmApp`已被剥离以进行测试，因此现在它包含的只是：

```
 bOK = confirm("You clicked a popup. Did you mean to?");
 return bOK; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-27T09:54:50.523

代码对我来说看起来不错，我认为它应该可以工作。我唯一不同的想法是使用 Dialog 块将 Wait for Complete 放在里面。不知道为什么，但在我这样做之前我也遇到了一些问题，有时它有效，有时它不起作用。而且我不使用等待直到存在的时间限制。但是您可能已经尝试过那个。

例如：

```
using (new UseDialogOnce(ie.DialogWatcher, approveConfirmDialog))
        {
            ie.Button(Find.ByName("btn")).ClickNoWait();
            approveConfirmDialog.WaitUntilExists();
            approveConfirmDialog.OKButton.Click();
            ie.WaitForComplete();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T16:41:46.567

我遇到了同样的问题并尝试了很多事情，但只是忽略了我正在调用的一部分 .Click() 然后将其更改为 .ClickNoWait() 并进行了排序。希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-19T11:09:56.230

我遇到了同样的问题，无论我做什么，它都不起作用，直到我找到了一个需要时间但对我有用的解决方法。

默认时间为`WaitUntilExists()` **30 秒**，因此在 IE9 中使用时，请提供如下延长时间限制。

`handler.WaitUntilExists(40); // or whatever time suits you above 30`

这当然需要时间，但它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T16:51:42.887

Just spent a couple of hours with variations on the dialog watcher solution. Nothing worked for me in IE9\.

I ended up with a one-liner that works for me, hope it helps somebody else! This approach completely avoids trying to deal with the dialog by using user key presses instead.

*   For OK. Do all steps leading up to button ClickNoWait, then:

SendKeys.SendWait("{ENTER}");

*   For CANCEL. Do all steps leading up to element ClickNoWait, then: SendKeys.SendWait("{TAB}"); SendKeys.SendWait("{ENTER}");

nb: using System.Windows.Forms

# ejb - 关于 EJB 和资源注入的问题

> ID：882685
> 
> 赞同：2
> 
> 时间：2009-05-19T13:14:33.810
> 
> 标签：ejb, code-injection

我在让 JBoss 将环境变量值注入 bean 时遇到问题。这是我的豆类：

```
包 com.topcoder.test；

导入 java.util.ArrayList；
导入 java.util.List；

导入 javax.annotation.Resource；
导入 javax.ejb.EJBContext；
导入javax.ejb.Remote；
导入 javax.ejb.SessionContext；
导入 javax.ejb.Stateless；
导入 javax.ejb.TransactionManagement；
导入 javax.ejb.TransactionManagementType；
导入 javax.naming.Context；
导入 javax.naming.InitialContext；
导入 javax.naming.NamingException；
导入 javax.persistence.EntityManager；
导入 javax.persistence.PersistenceContext；
导入 javax.persistence.PersistenceContextType；

导入 org.jboss.annotation.ejb.RemoteBinding；

导入 com.topcoder.test.Test；

公共@Stateless（名称=“TestBean”）
类TestBean实现测试{

    @Resource(name="managerFile")
    私有字符串管理器文件；

    公共字符串 getManagerFile() {
        返回管理器文件；
    }

    公共字符串测试方法（）{
        String ret = "testMethod()中managerFile的值为" + getManagerFile();
        返回 ret;
    }

    @PersistenceContext(unitName = "persistenceUnit", type = PersistenceContextType.TRANSACTION)
    私人 EntityManager 经理；

    @PersistenceContext(unitName = "persistenceUnit", type = PersistenceContextType.TRANSACTION)
    公共无效 setEntityManager（EntityManager 管理器）{
        this.manager = 经理；
    }

    公共实体管理器 getEntityManager() {
        如果（经理==空）{
            throw new IllegalStateException("EntityManager 在使用前没有在 DAO 上设置");
        }

        退货经理；
    }

    @SuppressWarnings("未选中")
    公共列表retrieveAll（）抛出异常{
        实体管理器 em = getEntityManager();

        列表结果 = em.createQuery("FROM TestEntity").getResultList();

        如果（结果==空）{
            结果 = 新的 ArrayList();
        }

        返回结果；
    }

}

```

我希望 JBoss 注入 managerFile 值。这是我的 ejb-jar.xml：

```
<enterprise-beans>
    <session>
        <ejb-name>Test</ejb-name>
        <ejb-class>com.topcoder.test.TestBean</ejb-class>
        <env-entry>
            <env-entry-name>managerFile</env-entry-name>
            <env-entry-type>java.lang.String</env-entry-type>
            <env-entry-value>com/topcoder/test/TestBean.properties</env-entry-value>
        </env-entry>
    </session>
</enterprise-beans> 
```

但是当我将耳朵部署到 JBoss 时，我收到了以下错误消息：

09:07:40,495 WARN [ResourceHandler] 未注入 managerFile，未找到匹配的 enc 注入器 env/managerFile

我正在运行 JBoss 4.2。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:19:26.877

确保 ejb-jar.xml 在您的 EJB 所在的 JAR 的 META-INF/ 中，而不是在 EAR 的 META-INF 中。

与您的问题无关，您可以删除：

```
@PersistenceContext 
```

从您的 setEntityManager() 方法（您不需要同时注释它和 entityManager 字段）

# c# - C#中的非阻塞文件复制

> ID：882686
> 
> 赞同：85
> 
> 时间：2009-05-19T13:14:36.663
> 
> 标签：c#, asynchronous

如何在 C# 中复制文件而不阻塞线程？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-05-10T02:22:53.747

异步编程的想法是允许调用线程（假设它是线程池线程）在异步 IO 完成时返回线程池以用于其他任务。在后台，调用上下文被填充到数据结构中，并且 1 个或多个 IO 完成线程监视等待完成的调用。当 IO 完成时，完成线程调用回线程池来恢复调用上下文。这样，只有完成线程和几个线程池线程处于闲置状态，而不是 100 个线程阻塞。

我能想到的最好的是：

```
public async Task CopyFileAsync(string sourcePath, string destinationPath)
{
  using (Stream source = File.Open(sourcePath))
  {
    using(Stream destination = File.Create(destinationPath))
    {
      await source.CopyToAsync(destination);
    }
  }
} 
```

不过，我还没有对此进行广泛的性能测试。我有点担心，因为如果它那么简单，它已经在核心库中了。

await 做了我在幕后描述的事情。如果您想大致了解它的工作原理，了解 Jeff Richter 的 AsyncEnumerator 可能会有所帮助。它们可能不完全一致，但想法非常接近。如果您曾经从“异步”方法查看调用堆栈，您会在其上看到 MoveNext。

就移动而言，如果它真的是“移动”而不是复制然后删除，则不需要异步。移动是针对文件表的快速原子操作。如果您不尝试将文件移动到不同的分区，它只会以这种方式工作。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-02-17T20:51:14.190

这是一个异步文件复制方法，它向操作系统提示我们正在按顺序读取和写入，以便它可以在读取时预取数据并为写入做好准备：

```
public static async Task CopyFileAsync(string sourceFile, string destinationFile)
{
    using (var sourceStream = new FileStream(sourceFile, FileMode.Open, FileAccess.Read, FileShare.Read, 4096, FileOptions.Asynchronous | FileOptions.SequentialScan))
    using (var destinationStream = new FileStream(destinationFile, FileMode.CreateNew, FileAccess.Write, FileShare.None, 4096, FileOptions.Asynchronous | FileOptions.SequentialScan))
        await sourceStream.CopyToAsync(destinationStream);
} 
```

您也可以试验缓冲区大小。这是 4096 字节。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-04-28T21:27:28.543

我通过@DrewNoakes 稍微增强了代码（性能和取消）：

```
 public static async Task CopyFileAsync(string sourceFile, string destinationFile, CancellationToken cancellationToken)
  {
     var fileOptions = FileOptions.Asynchronous | FileOptions.SequentialScan;
     var bufferSize = 4096;

     using (var sourceStream = 
           new FileStream(sourceFile, FileMode.Open, FileAccess.Read, FileShare.Read, bufferSize, fileOptions))

     using (var destinationStream = 
           new FileStream(destinationFile, FileMode.CreateNew, FileAccess.Write, FileShare.None, bufferSize, fileOptions))

        await sourceStream.CopyToAsync(destinationStream, bufferSize, cancellationToken)
                                   .ConfigureAwait(continueOnCapturedContext: false);
  } 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-08-04T01:55:35.457

虽然在某些情况下您想避免`Task.Run`,`Task.Run(() => File.Move(source, dest)`会起作用。这是值得考虑的，因为当一个文件被简单地移动到同一个磁盘/卷中时，它几乎是一个即时的操作，因为标题改变了，但文件内容没有移动。各种“纯”异步方法总是复制流，即使没有必要这样做，因此在实践中可能会慢很多。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-19T13:34:48.123

您可以使用异步委托

```
public class AsyncFileCopier
    {
        public delegate void FileCopyDelegate(string sourceFile, string destFile);

        public static void AsynFileCopy(string sourceFile, string destFile)
        {
            FileCopyDelegate del = new FileCopyDelegate(FileCopy);
            IAsyncResult result = del.BeginInvoke(sourceFile, destFile, CallBackAfterFileCopied, null);
        }

        public static void FileCopy(string sourceFile, string destFile)
        { 
            // Code to copy the file
        }

        public static void CallBackAfterFileCopied(IAsyncResult result)
        {
            // Code to be run after file copy is done
        }
    } 
```

您可以将其称为：

```
AsyncFileCopier.AsynFileCopy("abc.txt", "xyz.txt"); 
```

这个[链接](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)告诉你异步编码的不同技术

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-19T13:42:58.557

您可以按照[本文](http://msdn.microsoft.com/en-us/magazine/cc337900.aspx)的建议进行操作：

```
public static void CopyStreamToStream(
    Stream source, Stream destination,
    Action<Stream, Stream, Exception> completed)
    {
        byte[] buffer = new byte[0x1000];
        AsyncOperation asyncOp = AsyncOperationManager.CreateOperation(null);

        Action<Exception> done = e =>
        {
            if(completed != null) asyncOp.Post(delegate
                {
                    completed(source, destination, e);
                }, null);
        };

        AsyncCallback rc = null;
        rc = readResult =>
        {
            try
            {
                int read = source.EndRead(readResult);
                if(read > 0)
                {
                    destination.BeginWrite(buffer, 0, read, writeResult =>
                    {
                        try
                        {
                            destination.EndWrite(writeResult);
                            source.BeginRead(
                                buffer, 0, buffer.Length, rc, null);
                        }
                        catch(Exception exc) { done(exc); }
                    }, null);
                }
                else done(null);
            }
            catch(Exception exc) { done(exc); }
        };

        source.BeginRead(buffer, 0, buffer.Length, rc, null); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-09-02T22:22:00.470

AFAIK，没有高级异步 API 来复制文件。但是，您可以构建自己的 API 来使用`Stream.BeginRead/EndRead`和`Stream.BeginWrite/EndWrite`API 完成该任务。或者，您可以使用`BeginInvoke/EndInvoke`此处答案中提到的方法，但您必须记住，它们不会是非阻塞异步 I/O。他们只是在单独的线程上执行任务。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-05T08:55:15.817

我实现了这个用于复制大文件（备份文件）的解决方案，它非常慢！对于较小的文件，这不是问题，但对于大文件，只需使用 File.Copy 或带有参数 /mt（多线程）的 robocopy 实现。

请注意，复制文件异步仍然是 .net 开发的一个未解决问题： [https ://github.com/dotnet/runtime/issues/20695](https://github.com/dotnet/runtime/issues/20695)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-07-30T14:47:39.213

我建议 .Net 编程语言中可用的文件复制 IO 功能在任何情况下都是异步的。在我的程序中使用它来移动小文件后，后续指令似乎在实际文件复制完成之前开始执行。我猜测可执行文件会赋予 Windows 执行复制的任务，然后立即返回执行下一条指令——而不是等待 Windows 完成。这迫使我在调用 copy 之后构建 while 循环，直到我可以确认复制完成为止。

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2009-05-19T13:20:41.537

正确的复制方法：使用单独的线程。

以下是您可能会做的事情（同步）：

```
//.. [code]
doFileCopy();
// .. [more code] 
```

以下是异步执行此操作的方法：

```
// .. [code]
new System.Threading.Thread(doFileCopy).Start();
// .. [more code] 
```

这是一种非常幼稚的做事方式。做得好，解决方案将包括一些事件/委托方法来报告文件副本的状态，并通知重要事件，如失败、完成等。

干杯，jrh

# teamcity - 如何设置 Teamcity 以使用 SQL Server 2005 Express？

> ID：882689
> 
> 赞同：0
> 
> 时间：2009-05-19T13:15:17.083
> 
> 标签：teamcity, sql-server-express

这可能吗？

我已按照此处的说明进行操作（[http://www.jetbrains.net/confluence/display/TCD4/Setting+up+an+External+Database#SettingupanExternalDatabase-MicrosoftSQLServer2005](http://www.jetbrains.net/confluence/display/TCD4/Setting+up+an+External+Database#SettingupanExternalDatabase-MicrosoftSQLServer2005)），但尝试访问时不断收到 404 错误团队城市。

我使用以下语法来配置 jTDS：connectionUrl=jdbc:jtds:sqlserver://[host]\sqlexpress:1433/[database name]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T16:34:09.617

我已经成功了。

我发现这个[链接](http://www.acceptedeclectic.com/2008/05/visualsvn-teamcity-nant-sql-server.html)指向微软的[这个](http://msdn.microsoft.com/en-us/data/aa937724.aspx)JDBC 驱动程序。

我在 database.properties 文件中添加了以下条目：

> driverName=com.microsoft.sqlserver.jdbc.SQLServerDriver connectionUrl=jdbc:sqlserver://localhost:1433;database=TeamCity; connectionProperties.user=teamcityuser connectionProperties.password=密码

我没有在任何地方提到 SQL 实例名称 (SQLEXPRESS)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T16:58:30.230

我发现阅读 JetBrains 文档并与这篇博文进行交叉引用对我有用：

[http://www.tellingmachine.com/post/Migrating-TeamCity-database-to-Microsoft-SQL-Server-2008-R2.aspx](http://www.tellingmachine.com/post/Migrating-TeamCity-database-to-Microsoft-SQL-Server-2008-R2.aspx)

我必须在命令提示符中清除所有 JAVA* 环境变量，我正在使用运行 maintainDB 工具，否则它会选择错误的 JRE 版本或其他东西，并抱怨没有一些 JVM 配置文件 - 我没有不知道，Java 完全让我感到困惑。

此外，我必须使用 JetBrains 记录的 (CS) 区分大小写的排序规则重新制作我的 SQL 数据库，因为我们是一个跨平台团队。

TCP/IP 需要启用和静态端口集。

![启用 TCP 并为 Express 设置静态端口 1433](https://i.stack.imgur.com/WtAVT.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T13:20:22.580

该 URL 存在一些问题。首先是正斜杠之后的反斜杠。那不应该在那里。

此外，请确保您可以从 TeamCity 服务器 ping sqlexpress。最后，确保您的 SQLExpress 配置为侦听端口 1433 - 默认情况下不是。事实上，默认情况下 TCPIP 连接通常是禁用的。

# c# - 捕获鼠标事件时的透明背景？

> ID：882706
> 
> 赞同：3
> 
> 时间：2009-05-19T13:18:52.943
> 
> 标签：c#, windows, winforms, transparency

这里似乎有一个与此类似的问题，但存在“相反”问题（他不希望捕获鼠标事件）。

我有一个带面板的表格。窗口是无边界的，并设置为面板的确切大小（出于所有意图和目的，就好像面板是“自由浮动的”）。我可以将面板的 BackColor 设置为 SystemColors.Control，然后将窗口的 TransparencyKey 设置为相同。这样做是因为它达到了预期的效果（透明度），但面板无法再捕获鼠标事件（这对功能至关重要）！

是否有另一种解决方法，或者重新启用鼠标捕获的方法？

我已经尝试覆盖 OnPaintBackground 并执行 noop，但这并没有实现真正的透明度，因为它不会在每次滴答后更新背景（因此无论您是否移动面板，初始绘制时面板后面的任何内容都会保留在那里或以其他方式更新它）。但是，它确实允许面板捕获鼠标事件。

在项目的这个阶段，这并不是那么麻烦，但我在快速原型期间偶然发现了这个问题，现在它开始让我烦恼。如果有人有任何指示，他们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:36:46.733

如果您使用的是 VC++，我会说您需要一个消息泵来处理 WM_ 鼠标事件消息。

快速搜索会发现此线程可能对您有所帮助：

[捕获所有鼠标事件](https://stackoverflow.com/questions/804374/capturing-mouse-events-from-every-component-on-c-winform)

我希望您已经尝试过使用以下内容：

```
/// <summary>
/// A transparent control.
/// </summary>
public class TransparentPanel : Panel
{
    public TransparentPanel()
    {
    }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams createParams = base.CreateParams;
            createParams.ExStyle |= 0x00000020; // WS_EX_TRANSPARENT
            return createParams;
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
        // Do not paint background.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:46:31.920

我真的没有给你答案，但我确实有另一种（也许有点“hacky”）方式让你完成你想做的事情。

将 Forms Opacity 属性设置为 1%（不要弄乱透明度键），现在它将捕获事件。该表单将不可见（至少在我的机器上 1% 我根本看不到它），您仍然可以捕获所有鼠标点击。

# iphone - 目标 C 中的寻址和指针

> ID：882708
> 
> 赞同：0
> 
> 时间：2009-05-19T13:19:06.547
> 
> 标签：iphone, objective-c, memory

所以这就是问题所在。

我有一个方法（或在 obj-C 中调用的消息）我正在传递一个指向对象的指针。

在该方法中，我将更改该指针指向的内容，并释放旧对象。我希望实例变量（正在传递给方法）现在引用分配给它的新值。基本上让变量像 C# 等语言中的 OUT 参数一样运行

```
-(NSDictionary *) GetListWithCommand:(NSString*) command andCache:(CachedMutableDictionary*) cache  
{  
    CachedMutableDictionary* Dictionary = [Getfrom somesource];
    CachedMutableDictionary* temp = cache;  
    cache = [Dictionary retain];  
    [temp release];  
} 
```

所以我相信我需要发送缓存变量的地址引用，然后能够在地址级别或对象级别引用它。

在 CachedMutableDictionary 类上创建复制方法也可能更明智/更容易。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T13:29:09.863

你只需要在这里和那里添加一些星星：

```
-(NSDictionary *) GetListWithCommand:(NSString*) command
                            andCache:(CachedMutableDictionary**) cache  
{  
    CachedMutableDictionary* Dictionary = [Getfrom somesource];
    CachedMutableDictionary* temp = *cache;  
    *cache = [Dictionary retain];  
    [temp release];  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:26:54.690

是的，听起来这个方法需要一个 CachedMutableDictionary**，调用者将 &cache 传递给它。该方法的最后三行变为：

```
CachedMutableDictionary *temp = *cache;
*cache = [Dictionary retain];  
[temp release]; 
```

不过这对我来说很有趣。缓存最初来自哪里？它总是对象的实例变量吗？为什么不直接传入对象？

# python - 使用 Python 发送 HTML 电子邮件

> ID：882712
> 
> 赞同：308
> 
> 时间：2009-05-19T13:20:18.463
> 
> 标签：python, email, html-email

如何使用 Python 在电子邮件中发送 HTML 内容？我可以发送简单的文本。

* * *

## 回答 #1

> 赞同：487
> 
> 时间：2009-05-19T13:30:55.570

来自[Python v2.7.14 文档 - 18.1.11。电子邮件： 示例](https://docs.python.org/2/library/email-examples.html#id5)：

> 下面是一个如何使用替代纯文本版本创建 HTML 消息的示例：

```
#! /usr/bin/python

import smtplib

from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

# me == my email address
# you == recipient's email address
me = "my@email.com"
you = "your@email.com"

# Create message container - the correct MIME type is multipart/alternative.
msg = MIMEMultipart('alternative')
msg['Subject'] = "Link"
msg['From'] = me
msg['To'] = you

# Create the body of the message (a plain-text and an HTML version).
text = "Hi!\nHow are you?\nHere is the link you wanted:\nhttp://www.python.org"
html = """\
<html>
  <head></head>
  <body>
    <p>Hi!<br>
       How are you?<br>
       Here is the <a href="http://www.python.org">link</a> you wanted.
    </p>
  </body>
</html>
"""

# Record the MIME types of both parts - text/plain and text/html.
part1 = MIMEText(text, 'plain')
part2 = MIMEText(html, 'html')

# Attach parts into message container.
# According to RFC 2046, the last part of a multipart message, in this case
# the HTML message, is best and preferred.
msg.attach(part1)
msg.attach(part2)

# Send the message via local SMTP server.
s = smtplib.SMTP('localhost')
# sendmail function takes 3 arguments: sender's address, recipient's address
# and message to send - here it is sent as one string.
s.sendmail(me, you, msg.as_string())
s.quit() 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2014-10-14T19:59:15.230

这是已接受答案的[Gmail](http://en.wikipedia.org/wiki/Gmail)实现：

```
import smtplib

from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

# me == my email address
# you == recipient's email address
me = "my@email.com"
you = "your@email.com"

# Create message container - the correct MIME type is multipart/alternative.
msg = MIMEMultipart('alternative')
msg['Subject'] = "Link"
msg['From'] = me
msg['To'] = you

# Create the body of the message (a plain-text and an HTML version).
text = "Hi!\nHow are you?\nHere is the link you wanted:\nhttp://www.python.org"
html = """\
<html>
  <head></head>
  <body>
    <p>Hi!<br>
       How are you?<br>
       Here is the <a href="http://www.python.org">link</a> you wanted.
    </p>
  </body>
</html>
"""

# Record the MIME types of both parts - text/plain and text/html.
part1 = MIMEText(text, 'plain')
part2 = MIMEText(html, 'html')

# Attach parts into message container.
# According to RFC 2046, the last part of a multipart message, in this case
# the HTML message, is best and preferred.
msg.attach(part1)
msg.attach(part2)
# Send the message via local SMTP server.
mail = smtplib.SMTP('smtp.gmail.com', 587)

mail.ehlo()

mail.starttls()

mail.login('userName', 'password')
mail.sendmail(me, you, msg.as_string())
mail.quit() 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2009-05-19T14:55:23.887

您可以尝试使用我的[邮件](http://pypi.python.org/pypi/mailer/)模块。

```
from mailer import Mailer
from mailer import Message

message = Message(From="me@example.com",
                  To="you@example.com")
message.Subject = "An HTML Email"
message.Html = """<p>Hi!<br>
   How are you?<br>
   Here is the <a href="http://www.python.org">link</a> you wanted.</p>"""

sender = Mailer('smtp.example.com')
sender.send(message) 
```

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2015-08-20T22:52:22.930

这是发送 HTML 电子邮件的简单方法，只需将 Content-Type 标头指定为“text/html”：

```
import email.message
import smtplib

msg = email.message.Message()
msg['Subject'] = 'foo'
msg['From'] = 'sender@test.com'
msg['To'] = 'recipient@test.com'
msg.add_header('Content-Type','text/html')
msg.set_payload('Body of <b>message</b>')

# Send the message via local SMTP server.
s = smtplib.SMTP('localhost')
s.starttls()
s.login(email_login,
        email_passwd)
s.sendmail(msg['From'], [msg['To']], msg.as_string())
s.quit() 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2019-10-10T08:07:52.043

对于 python3，改进[@taltman 的答案](https://stackoverflow.com/a/32129736/7499223)：

*   使用`email.message.EmailMessage`而不是`email.message.Message`构建电子邮件。
*   使用`email.set_content`func，分配`subtype='html'`参数。而不是低级功能`set_payload`并手动添加标题。
*   使用`SMTP.send_message`func 而不是`SMTP.sendmail`func 来发送电子邮件。
*   使用`with`块自动关闭连接。

```
from email.message import EmailMessage
from smtplib import SMTP

# construct email
email = EmailMessage()
email['Subject'] = 'foo'
email['From'] = 'sender@test.com'
email['To'] = 'recipient@test.com'
email.set_content('<font color="red">red color text</font>', subtype='html')

# Send the message via local SMTP server.
with smtplib.SMTP('localhost') as s:
    s.login('foo_user', 'bar_password')
    s.send_message(email) 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2009-05-19T13:37:02.080

这是示例代码。这灵感来自[Python Cookbook](http://code.activestate.com/recipes/langs/python/)网站上的代码（找不到确切的链接）

```
def createhtmlmail (html, text, subject, fromEmail):
    """Create a mime-message that will render HTML in popular
    MUAs, text in better ones"""
    import MimeWriter
    import mimetools
    import cStringIO

    out = cStringIO.StringIO() # output buffer for our message 
    htmlin = cStringIO.StringIO(html)
    txtin = cStringIO.StringIO(text)

    writer = MimeWriter.MimeWriter(out)
    #
    # set up some basic headers... we put subject here
    # because smtplib.sendmail expects it to be in the
    # message body
    #
    writer.addheader("From", fromEmail)
    writer.addheader("Subject", subject)
    writer.addheader("MIME-Version", "1.0")
    #
    # start the multipart section of the message
    # multipart/alternative seems to work better
    # on some MUAs than multipart/mixed
    #
    writer.startmultipartbody("alternative")
    writer.flushheaders()
    #
    # the plain text section
    #
    subpart = writer.nextpart()
    subpart.addheader("Content-Transfer-Encoding", "quoted-printable")
    pout = subpart.startbody("text/plain", [("charset", 'us-ascii')])
    mimetools.encode(txtin, pout, 'quoted-printable')
    txtin.close()
    #
    # start the html subpart of the message
    #
    subpart = writer.nextpart()
    subpart.addheader("Content-Transfer-Encoding", "quoted-printable")
    #
    # returns us a file-ish object we can write to
    #
    pout = subpart.startbody("text/html", [("charset", 'us-ascii')])
    mimetools.encode(htmlin, pout, 'quoted-printable')
    htmlin.close()
    #
    # Now that we're done, close our writer and
    # return the message body
    #
    writer.lastpart()
    msg = out.getvalue()
    out.close()
    print msg
    return msg

if __name__=="__main__":
    import smtplib
    html = 'html version'
    text = 'TEST VERSION'
    subject = "BACKUP REPORT"
    message = createhtmlmail(html, text, subject, 'From Host <sender@host.com>')
    server = smtplib.SMTP("smtp_server_address","smtp_port")
    server.login('username', 'password')
    server.sendmail('sender@host.com', 'target@otherhost.com', message)
    server.quit() 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-04-17T22:18:14.390

实际上，[yagmail](https://github.com/kootenpv/yagmail)采取了一些不同的方法。

**默认情况下**，它将发送 HTML，并为无能力的电子邮件阅读器自动回退。现在已经不是 17 世纪了。

当然，它可以被覆盖，但这里是：

```
import yagmail
yag = yagmail.SMTP("me@example.com", "mypassword")

html_msg = """<p>Hi!<br>
              How are you?<br>
              Here is the <a href="http://www.python.org">link</a> you wanted.</p>"""

yag.send("to@example.com", "the subject", html_msg) 
```

有关安装说明和更多强大功能，请查看[github](https://github.com/kootenpv/yagmail)。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-02-07T20:38:48.003

`smtplib`这是一个使用CC 和 BCC 选项从 Python 发送纯文本和 HTML 电子邮件的工作示例。

[https://varunver.wordpress.com/2017/01/26/python-smtplib-send-plaintext-and-html-emails/](https://varunver.wordpress.com/2017/01/26/python-smtplib-send-plaintext-and-html-emails/)

```
#!/usr/bin/env python
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

def send_mail(params, type_):
      email_subject = params['email_subject']
      email_from = "from_email@domain.com"
      email_to = params['email_to']
      email_cc = params.get('email_cc')
      email_bcc = params.get('email_bcc')
      email_body = params['email_body']

      msg = MIMEMultipart('alternative')
      msg['To'] = email_to
      msg['CC'] = email_cc
      msg['Subject'] = email_subject
      mt_html = MIMEText(email_body, type_)
      msg.attach(mt_html)

      server = smtplib.SMTP('YOUR_MAIL_SERVER.DOMAIN.COM')
      server.set_debuglevel(1)
      toaddrs = [email_to] + [email_cc] + [email_bcc]
      server.sendmail(email_from, toaddrs, msg.as_string())
      server.quit()

# Calling the mailer functions
params = {
    'email_to': 'to_email@domain.com',
    'email_cc': 'cc_email@domain.com',
    'email_bcc': 'bcc_email@domain.com',
    'email_subject': 'Test message from python library',
    'email_body': '<h1>Hello World</h1>'
}
for t in ['plain', 'html']:
    send_mail(params, t) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-15T17:27:25.827

这是我使用 boto3 对 AWS 的回答

```
 subject = "Hello"
    html = "<b>Hello Consumer</b>"

    client = boto3.client('ses', region_name='us-east-1', aws_access_key_id="your_key",
                      aws_secret_access_key="your_secret")

client.send_email(
    Source='ACME <do-not-reply@acme.com>',
    Destination={'ToAddresses': [email]},
    Message={
        'Subject': {'Data': subject},
        'Body': {
            'Html': {'Data': html}
        }
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-27T10:22:12.747

**从 Office 365 中的组织帐户发送电子邮件的最简单解决方案：**

```
from O365 import Message

html_template =     """ 
            <html>
            <head>
                <title></title>
            </head>
            <body>
                    {}
            </body>
            </html>
        """

final_html_data = html_template.format(df.to_html(index=False))

o365_auth = ('sender_username@company_email.com','Password')
m = Message(auth=o365_auth)
m.setRecipients('receiver_username@company_email.com')
m.setSubject('Weekly report')
m.setBodyHTML(final_html_data)
m.sendMessage() 
```

> 这里**df**是一个转换为 html Table 的数据框，正在被注入到 html_template

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-18T17:37:39.580

我可能迟到在这里提供答案，但问题询问了一种发送 HTML 电子邮件的方法。使用像“电子邮件”这样的专用模块是可以的，但我们可以在不使用任何新模块的情况下获得相同的结果。这一切都归结为 Gmail 协议。

下面是我仅使用“smtplib”发送 HTML 邮件的简单示例代码，仅此而已。

```
```
import smtplib

FROM = "....@gmail.com"
TO = "another....@gmail.com"
SUBJECT= "Subject"
PWD = "thesecretkey"

TEXT="""
<h1>Hello</h1>
""" #Your Message (Even Supports HTML Directly)

message = f"Subject: {SUBJECT}\nFrom: {FROM}\nTo: {TO}\nContent-Type: text/html\n\n{TEXT}" #This is where the stuff happens

try:
    server=smtplib.SMTP("smtp.gmail.com",587)
    server.ehlo()
    server.starttls()
    server.login(FROM,PWD)
    server.sendmail(FROM,TO,message)
    server.close()
    print("Successfully sent the mail.")
except Exception as e:
    print("Failed to send the mail..", e)
``` 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-15T19:05:20.993

如果您想要更简单的东西：

```
from redmail import EmailSender
email = EmailSender(host="smtp.myhost.com", port=1)

email.send(
    subject="Example email",
    sender="me@example.com",
    receivers=["you@example.com"],
    html="<h1>Hi, this is HTML body</h1>"
) 
```

[Pip 从PyPI](https://pypi.org/project/redmail/)安装 Red Mail ：

```
pip install redmail 
```

Red Mail 很可能拥有您发送电子邮件所需的一切，它具有许多功能，包括：

*   [附件](https://red-mail.readthedocs.io/en/latest/tutorials/attachments.html)
*   [模板（使用 Jinja）](https://red-mail.readthedocs.io/en/latest/tutorials/jinja_support.html)
*   [嵌入图像](https://red-mail.readthedocs.io/en/latest/tutorials/body_content.html#embedded-images)
*   [美化表](https://red-mail.readthedocs.io/en/latest/tutorials/body_content.html#embedded-tables)
*   [以 cc 或 bcc 形式发送](https://red-mail.readthedocs.io/en/latest/tutorials/sending.html#sending-email-with-cc-and-bcc)
*   [Gmail 预配置](https://red-mail.readthedocs.io/en/latest/tutorials/config.html#gmail)

文档：[https ://red-mail.readthedocs.io/en/latest/index.html](https://red-mail.readthedocs.io/en/latest/index.html)

源代码：[https ://github.com/Miksus/red-mail](https://github.com/Miksus/red-mail)

# asp.net - 具有所有 CSS 选项的优秀 CSS 图形编辑器

> ID：882722
> 
> 赞同：2
> 
> 时间：2009-05-19T13:21:55.747
> 
> 标签：asp.net, css

我在哪里可以找到一个好的 CSS 编辑器来帮助我使用 CSS 的所有选项？

我不知道所有的 CSS 标签。我需要该软件在创建 CSS 时向我展示可供选择的选项。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T13:26:15.237

看看[Aptana](http://www.aptana.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T16:40:30.220

如果您正在寻找建议，请尝试 Aptana 或[Eclipse](http://www.eclipse.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T17:55:48.817

您正在寻找的软件是 Stylizer (google it)。它将“向您展示可供选择的选项”，但最新版本现在还为您实现了一些 CSS 设计结构（图像替换、清晰修复等）。它要花钱，但值得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T13:24:21.327

你看过 Visual Studio 和/或 Expression Web 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T13:36:00.630

我为此使用[NetBeans](http://www.netbeans.org/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T16:37:14.920

如果您有很多钱或者是学生，您也可以使用 Adob​​e 的 Dreamweaver。

# jquery - 如何使用 jQuery 按顺序添加列表项？

> ID：882726
> 
> 赞同：9
> 
> 时间：2009-05-19T13:22:59.003
> 
> 标签：jquery, list, html-lists

有谁知道如何将项目添加到列表中，但这样做是为了使用 jQuery 按字母顺序排列？我有以下代码，它只是将下拉列表中的一个项目添加到列表末尾：

```
$("#projectList").append(
    "<li>"
    + $("#Projects :selected").text()
    + " <span class='removeProject' projectId='" + $("#Projects").val() + "'>Remove</span>"
    + "</li>"
); 
```

但我希望能够将它插入到适当的位置，而不是仅仅附加到现有列表的末尾。

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T13:35:20.740

我认为这会起作用：

```
var new = $(
    "<li>"
    + $("#Projects :selected").text()
    + " <span class='removeProject' projectId='" + $("#Projects").val() + "'>Remove</span>"
    + "</li>"
);

var firstafteritem = $("#projectList").children().filter( function () {
    return ($(this).text() > $("#Projects :selected").text())
} ).eq(0);

if (firstafteritem.length > 0) firstafteritem.before(new);
else                           $("#projectList").append(new); 
```

的值`firstafteritem`将是您添加的列表项之后具有文本值的第一个列表项。（或者如果它是最后一个则没有。）然后 if/else 将在该项目之前或列表末尾插入它。

（当然，这假设您的列表中的值已经按顺序排列。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-24T12:47:07.333

```
<script type="text/javascript">
     $(document).ready(function(){
     $("#doctype li:first").before("<li><a href='intranet/library'>All documents</a></li>");
     });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T13:40:32.447

我认为至少核心 jQuery 没有简单的方法。

在我的脑海中，未经测试，如果您的列表很短（因为它的 O(N) ），这样简单的事情可能会起作用

```
var liArr=$("#projectList li").get();
var newText=$("#Projects :selected").text();
var newEle=$("<li>"
    + newText
    + " <span class='removeProject' projectId='" + $("#Projects").val() + "'>Remove</span>"
    + "</li>");
for(var li=0; li<liArr.length; li++) {
  if(newText<liArr[li].innerHTML) {
     $("#projectList").get(0).insertBefore(newEle,liArr[li]);
     newEle=null;
     break;
     } 
  }
if(newEle) { $("#projectList").append(newEle); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T13:42:19.637

您可以解析列表以查看应将项目添加到何处，然后使用 after() jquery 函数将您的项目添加到位。

# javascript - 有没有办法在 JavaScript 对象文字中使用变量键？

> ID：882727
> 
> 赞同：102
> 
> 时间：2009-05-19T13:23:58.143
> 
> 标签：javascript

我有这样的代码。

```
var key = "anything";   
var object = {   
    key: "key attribute"  
}; 
```

我想知道是否有办法`key`用“任何东西”代替它。

像

```
var object = {  
    "anything": "key attribute"     
}; 
```

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2015-03-16T12:48:04.923

在 ES6 中，使用**[计算属性名称](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)**。

```
const key = "anything";   

const object = {   
    [key]: "key attribute"
//  ^^^^^  COMPUTED PROPERTY NAME
}; 
```

注意 周围的方括号`key`。您实际上可以在方括号中指定任何表达式，而不仅仅是变量。

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2009-05-19T13:27:39.807

是的。您可以使用：

```
var key = "anything";
var json = { };
json[key] = "key attribute"; 
```

或者，如果您在编写程序时手头有值，则只需使用第二种方法。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-05-17T13:52:03.497

在现代 Javascript (ECMAScript 6) 上，您可以用方括号将变量括起来：

```
var key = "anything";

var json = {
    [key]: "key attribute"
}; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-05-19T13:31:56.910

这应该可以解决问题：

```
var key = "anything";

var json = {};

json[key] = "key attribute"; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-25T19:45:28.850

解决方案：

```
var key = "anything";

var json = {};

json[key] = "key attribute"; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-08-06T17:52:21.517

闭包对此非常有用。

```
function keyValue(key){
  return function(value){
    var object = {};
    object[key] = value;
    return object;
  }
}

var key = keyValue(key);
key(value); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-01-11T11:24:07.547

最近需要一个解决方案，如何设置传递动态 json 键值的 cookie。使用[https://github.com/js-cookie/js-cookie#json](https://github.com/js-cookie/js-cookie#json)，可以轻松完成。希望将用户的每个选择的选项值存储在 cookie 中，以便在选项卡或浏览器关闭的情况下不会丢失。

```
var json = { 
        option_values : {}
    };
    $('option:selected').each(function(index, el) {
        var option = $(this);
        var optionText = option.text();
        var key = 'option_' + index;
        json.option_values[key] = optionText;
        Cookies.set('option_values', json, { expires: 7 } );
    }); 
```

**然后，您可以使用在每个页面加载时检索每个 cookie 键值**

```
Cookies.getJSON('option_values'); 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2009-05-19T13:30:10.877

好吧，没有“直接”的方法可以做到这一点......

但这应该这样做：

```
json[key] = json.key;
json.key = undefined; 
```

它有点棘手，但是，嘿，它有效！

# windows-mobile - 是否可以在 Windows CE 上运行 java 程序？

> ID：882732
> 
> 赞同：1
> 
> 时间：2009-05-19T13:24:35.787
> 
> 标签：windows-mobile

是否可以在 Windows CE 上运行 java 程序？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T14:57:21.153

询问并回答：

*   [Windows Mobile 上的 Java (ME)](https://stackoverflow.com/questions/517906/java-me-on-windows-mobile)
*   [我可以在 Windows Mobile 6 设备上运行 java 程序吗？](https://stackoverflow.com/questions/699841/can-i-run-java-programs-in-a-windows-mobile-6-device)
*   [Windows Mobile 6 J2SE 规模的 JVM 实现](https://stackoverflow.com/questions/76214/windows-mobile-6-j2se-scale-jvm-implementation)
*   [Windows Mobile 上的 JVM 选择..](https://stackoverflow.com/questions/55322/jvm-choices-on-windows-mobile)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T13:49:04.083

有[CrEme](http://www.cremejvm.com/) VM，非常稳定，但需要付费。

还有 IBM 的 J9 JVM，但我现在找不到它的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T13:27:18.247

你可以运行 J2ME 使用这个：

[http://www.windowsfordevices.com/news/NS2454472990.html](http://www.windowsfordevices.com/news/NS2454472990.html)

不知道完全成熟的Java。不过我对此表示怀疑。

# asp.net - 构建 ASP.Net 网站时，“验证网站”步骤有什么作用？

> ID：882733
> 
> 赞同：1
> 
> 时间：2009-05-19T13:24:50.217
> 
> 标签：asp.net, visual-studio, compiler-construction, web

每次调试我的应用程序都需要一些时间。我可以加快或跳过它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T13:29:31.753

验证网站通常意味着针对您正在使用的 HTML/XHTML 类型的 W3C 验证设置的所有规则运行它。如果有任何验证问题，它们通常会在您的错误列表中显示为警告。

# visual-studio - 颠覆：乌龟+AnkhSVN

> ID：882734
> 
> 赞同：1
> 
> 时间：2009-05-19T13:24:52.197
> 
> 标签：visual-studio, svn, version-control, tortoisesvn, ankhsvn

Open Ankh 似乎使用的是 Subversion 1.6.2，而 Tortoise 使用的是 Subversion 1.6.0。

使用 Tortoise 创建存储库后，我无法看到它。

下载 subversion 并执行 svn admin -create --pre-1.6-compatible z:\......\etc.. 现在 ankh 可以看到它。这是我第一次使用版本控制，也许我不需要乌龟，但是 windows 资源管理器集成听起来不错。

我使用的是 file:/// 而不是 svnserve 或 apache。

我是否可以在 ankh 旁边使用乌龟，还是会继续遇到问题或可能损坏存储库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T13:32:42.183

只要这两个工具都在同一个主要/次要版本的 Subversion（即 1.6.any）上，那么它们应该能够一起工作。

你说的是 AnkhSVN 吗？如果是这样，您可能需要获得每日构建，因为他们的页面提到使用最新的每日版本来支持 Subversion 1.6。 [http://ankhsvn.open.collab.net/](http://ankhsvn.open.collab.net/)

如果您更新了一个客户端但没有更新另一个客户端并且存在较小的版本差异（即 1.6 与 1.5），则较新的客户端将更新工作副本，您将无法在较旧的客户端中使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T13:54:39.203

我遇到了类似的问题，但通过安装 AnkhSVN 的最新版本（每日 2.1 版本）解决了这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:28:29.320

~~最新版本的 TortoiseSVN 是针对 SVN 1.6.2 构建的，请[在此处](http://tortoisesvn.net/downloads)获取。这可能会解决您的问题。~~

原发帖人更正了他的帖子，以上行不再适用。

您应该可以毫无问题地同时使用两者。我用了一段时间，没有遇到任何问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T13:42:33.940

我也遇到了 Ankh 的问题，但是在安装了 subversion 1.6.2 之后它就可以工作了！！所以可能你需要将你的颠覆更新到 1.6.2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T18:33:58.937

来自[http://ankhsvn.open.collab.net/downloads](http://ankhsvn.open.collab.net/downloads)

**如果某些项目没有显示字形** - 检查项目是否在**File -> Subversion -> Change Source Control**中连接 确保至少解决方案和缺少字形的项目已连接（许多项目类型不需要显式绑定） *

# ms-access - 如何制作一个Access TextBox，一个数字值，等于以TextBox为条件的DLookup

> ID：882739
> 
> 赞同：0
> 
> 时间：2009-05-19T13:25:35.380
> 
> 标签：ms-access, textbox, lookup

我真的不知道为什么这不起作用，但我试图让以下工作：

```
If Me.Text1 = DLookup("Field1", "Test1_Table", "Test1_Table.Field1= _
     & Me.Text1") Then
   MsgBox "It works"
Else
End If 
```

上面的代码是我正在做的一个较大项目的测试代码，所以表和字段名只是为了测试。此外，Field1 是一个数字字段。基本上，当我在 Text1 中输入 1 时，我希望 DLookup 功能在 Test1_Table.Field1 中找到 1 并给我一条消息，说明它有效。我能够让它与字符串值一起使用，例如：

```
If Me.Text1 = DLookup("Field1", "Test1_Table", "Test1_Table.Field1='" _
    & Me.Text1 & "'")Then 
```

同样，当在 Text1 中输入 1 时：

```
If 1 = DLookup("Field1", "Test1_Table", "Test1_Table.Field1= _
    & Me.Text1") Then 
```

但是，我尝试过：

```
If Me.Text1 = DLookup("Field1", "Test1_Table", "Test1_Table.Field1= _
    & Forms!TestSearch_Form!Text0)Then 
```

和

```
If Me.Text1 = DLookup("Field1", "Test1_Table", "Test1_Table.Field1= _
    & Forms!TestSearch_Form!Text0)Then 
```

ETC...

我尝试了许多不同的组合，在处理数值时似乎无法使两者相等。有谁知道我错过了什么或有什么想法？

谢谢，

达米恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T17:12:29.450

怎么样：

```
 If Not IsNull(DLookup("Field1", "Test1_Table", "Field1=" & Me.Text1)) Then 
```

这仅在 Field1 被定义为数字字段时才有效，如果它是日期时间或文本字段，则需要分隔符。

编辑：

上述语句要么等于 Me.Text1 的值，要么为空。使用 DllookUp 的另一种方法是：

```
 SomeVar=DLookup("Field1", "Test1_Table", "Field1=" & Me.Text1) 
```

SomeVar 要么为 null，即未找到，要么返回值或 Field1，它等于 Me.Text1，因为这是我们在 Where 语句中要求的。从中可以看出，返回Field1的值是没有意义的，要么找到且等于text1，要么未找到，为null。获取 DlookUp 值的唯一原因是您在表中查找其他值或计算。

在此之后，重要的是要记住您正在寻找精确匹配，并且小数点在小数点右侧可能有很大不同，您不太可能在此处查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T15:43:06.257

```
Dim sWhere as String
sWhere = "Test1_Table.Field1=" & Me.Text1
If CInt(Me.Text1)=DLookup("Field1", "Test1_Table", sWhere) Then         
     MsgBox "It works" 
Else
   'do something else
End If 
```

Trying to do too much vba inside the DLookup could be an issue?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T00:02:57.850

如果 CInt(Me.Text1) = DLookup("Field1", "Test1_Table", "Test1_Table.Field1=" & Me.Text1) 那么...

上面的代码完美运行。感谢吉尼斯，我能够利用我的原始代码并将 CInt 添加到 if 语句中。

另外，谢谢大家的意见。

DFM

# iphone - AVAudioPlayer currentTime 问题

> ID：882753
> 
> 赞同：1
> 
> 时间：2009-05-19T13:28:08.930
> 
> 标签：iphone, audio-player

我正在尝试使用`AVAudioPlayer`滑块来寻找轨道（没什么复杂的）。

但我有一个奇怪的行为......对于`currentTime`（0和trackDuration之间）的某个值，播放器停止播放曲目，并`audioPlayerDidFinishPlaying:successfully:` 成功进入NO。它没有进入`audioPlayerDecodeErrorDidOccur:error:`

就好像它无法读取我给它的时间。

例如，曲目的持续时间是：295.784424 秒，我将其设置`currentTime`为 55.0s（即：54.963878 或 54.963900 或 54.987755 等......当打印为 %f 时）。“崩溃”总是在`currentTime`54.987755 时发​​生......我真的不明白为什么......

所以如果你有任何想法...^^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-05-26T20:06:22.477

我还努力让音频跳过与“AVAudioPlayer setCurrentTime:”一起正常工作：

经过大量实验，我发现了一个在模拟器和设备上可靠运行的序列：（在 OS3.1+ 上测试）

```
// Skips to an audio position (in seconds) of the current file on the [AVAudioPlayer* audioPlayer] class instance
// This works correctly for a playing and paused audioPlayer
//
- (void) skipToSeconds:(float)position
{
    @synchronized(self) 
    {
        // Negative values skip to start of file
        if ( position<0.0f )
            position = 0.0f;

        // Rounds down to remove sub-second precision
        position = (int)position;

        // Prevent skipping past end of file
        if ( position>=(int)audioPlayer.duration )
        {
            NSLog( @"Audio: IGNORING skip to <%.02f> (past EOF) of <%.02f> seconds", position, audioPlayer.duration );
            return;
        }

        // See if playback is active prior to skipping
        BOOL skipWhilePlaying = audioPlayer.playing;

        // Perform skip
        NSLog( @"Audio: skip to <%.02f> of <%.02f> seconds", position, audioPlayer.duration );

        // NOTE: This stop,set,prepare,(play) sequence produces reliable results on the simulator and device.
        [audioPlayer stop];
        [audioPlayer setCurrentTime:position];
        [audioPlayer prepareToPlay];

        // Resume playback if it was active prior to skipping
        if ( skipWhilePlaying )
            [audioPlayer play];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-07T00:03:52.600

出于某种原因，当我收到此错误时，标志仍设置为 YES。我设法通过检查 currentTime 与持续时间并在 currentTime 不是 0.0（声音结束）时立即重新启动播放器来找到解决方法。我所有的测试都是在模拟器上完成的，因为我还没有在我的手机上测试的许可证。希望这可以帮助。查看几个怪癖的编辑。

```
-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    if ([_player currentTime] != [_player duration] && [_player currentTime] != 0.0f) {
        [_player play];
        return;
    }
... 
```

编辑：不幸的是，我在寻找声音的开头或结尾时仍然发现错误（或两者的一个非常小的增量）。我发现如果您创建处理这两个实例的特殊情况，您通常会被覆盖。您应该停止播放器，将 currentTime 设置为 0.0，然后在寻找开始时重新启动播放器，或者在寻找结束时手动调用完成委托（如果您实现了它）。

如果我找到更好的解决方案或在实际设备上运行它获得更多反馈，我会更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T14:52:24.863

我已经尝试过使用设备，这是仅在模拟器中出现的问题。我所有的文件都可以在设备上很好地播放，我可以轻松地在其中查找。

我试过 mp3、aac 和 wav。

# c++ - 在 C++ 应用程序中嵌入 Rake？或者有 LUA 的湖吗？

> ID：882764
> 
> 赞同：3
> 
> 时间：2009-05-19T13:29:59.880
> 
> 标签：c++, ruby, lua, rake

我发现了一些关于在 C++ 应用程序中嵌入 Ruby 的问题。几乎所有投票最多的答案都建议使用 Lua。

鉴于我想到的一个项目会更好地使用 Rake 中已经表达的语法（它是一个规则引擎），是否有任何简单的方法可以将 Rake 嵌入到 C++ 应用程序中，或者是否有类似 Rake 的 Lua 模块？

澄清一下：如果可能的话，我希望这是一个独立的应用程序。它应该具有最少的先决条件，因为它将在相当简陋的 (Windows) 操作系统上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T21:20:27.190

有许多构建系统可以使用 Lua，它们强烈基于 Lua，甚至在 Lua 中实现。其中一些列在[Lua User's Wiki](http://lua-users.org/wiki/LuaBuildSystems)中。

在 wiki 中列出的那些中，[Bou](http://lua-users.org/wiki/LuaBuildBou)明确地受到了 Rake 的启发。它的作者观察到，在项目开始时，另一个构建系统已经使用了“湖”这个名称，但没有提供链接，所以我不知道这个名称可能与什么有关。从那时起，Bou 已更名为[Lake](https://github.com/stevedonovan/Lake)并搬到了新家。

Lake 是 Lua 社区的定期贡献者史蒂夫·多诺万 (steve donovan) 的创作。和 Bou 一样，它是在几乎纯 Lua 中实现的（它确实依赖[LuaFileSystem](http://keplerproject.github.com/luafilesystem/)进行文件系统访问）。它不是充当过滤器来创建 Makefile 或 IDE 项目文件，而是直接基于用 Lua 编写的项目描述驱动编译器。构建项目以 DSL（领域特定语言）描述，包括访问所有 Lua 以处理特殊情况。

Lua的“官方”[二进制版本](http://luabinaries.luaforge.net/)都来自一个名为[tecmake](http://www.tecgraf.puc-rio.br/tecmake/)的系统，该系统起源于 Tecgraf，就像 Lua 本身一样。Tecmake 是在 make 之上实现的，通过一个包装 shell 脚本和一组通用的 Makefile 规则来实现其约定。它对他们来说效果很好，但就我个人而言，我从来没有能够让它在我的系统上运行。正在努力使 LuaBinaries 构建远离 techmake 的怪癖。

[LuaRocks](http://www.luarocks.org/)使用 Lua 来描述构建需求，几乎完全用 Lua 编写，旨在与分布式应用程序集成，以便应用程序可以自我更新。据我了解，LuaRocks 的目标之一是使项目构建能够使用其独立于平台的“rock”文件，并且使用 LuaRocks 构建个人项目肯定会更容易发布它以便以后更广泛地分发。

作为一种后备，总是可以使用 Lua 作为另一种工具来扩展 makefile 驱动的构建。我已经以这种方式将它用于预处理任务，否则我可能会委托给 awk 或 perl，例如从当前[化石](http://www.fossil-scm.org/)修订版中收集详细信息到我构建的项目中。

**更新：**

随着时间的流逝，知识会提高。正如[Victor T](https://stackoverflow.com/users/234175/victor-t)在评论中所观察到的，Steve's Lake 实际上是同一个名为 Bou 的项目。显然，对“Lake”这个名字的反对意见已经消退，我根本没有注意到它们是同一个工具。我已经编辑了原始答案及其更新，以更好地反映我目前的理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T23:20:28.623

至少有两个不同的项目叫做“Lua Make”（你可以用谷歌搜索），还有一些与[Lua Rocks](http://www.luarocks.org/)相关的构建系统。目前尚不清楚 Lua Rocks 是否有用，但其他两个似乎值得一试。

# vb.net - 有没有办法检查是否正在使用 For Each 循环访问 IEnumerable？

> ID：882766
> 
> 赞同：1
> 
> 时间：2009-05-19T13:30:09.333
> 
> 标签：vb.net, multithreading, collections, ienumerable

假设我有一个 IEnumerable，例如 List(TValue)，并且我想跟踪是否正在访问该列表（以防止出现问题，例如，在不同线程上迭代列表时添加到列表）；我总是可以编写如下代码：

```
Dim List1 As New List(Of Integer)
Dim IteratingList1 As Boolean = False

' ... some code ... '

Private Function getSumOfPositivesFromList1() As Integer
    If IteratingList1 Then Return -1

    IteratingList1 = True

    Dim SumOfPositives As Integer = 0

    For Each x As Integer In List1
        If x > 0 Then SumOfPositives += x
    Next

    IteratingList1 = False

    Return SumOfPositives
End Function 
```

（我意识到这段代码非常随意，但它说明了我在说什么。）

我的问题是是否有比手动更新和访问布尔值更好/更清洁的方法来执行此检查，如上所述。我觉得必须有，但据我所知，没有任何 IEnumerable 类具有内置的“我正在迭代”方法或属性。编写一个实现 IEnumerable 并包含这样一个属性的新类对我来说似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T13:32:15.600

Afaik，在 VB.NET 中，您可以`SyncLock`在访问对象时使用 锁定对象，以防止其他线程同时对其进行处理。

```
Public Shared objStorageLock As New Object

Private Function getSumOfPositivesFromList1() As Integer

    Dim SumOfPositives As Integer = 0

    SyncLock objStorageLock 

    For Each x As Integer In List1
        If x > 0 Then SumOfPositives += x
    Next

    End SyncLock

    Return SumOfPositives
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:37:42.810

这取决于你在做什么，如果你担心对列表的多次写入访问`Synclock`是要走的路。

如果您在枚举期间消除了异常，那么有时最好获取一个副本并枚举，例如

```
For Each Num as Integer in SumOfPositives.ToArray()
...
Next Num 
```

显然，您可能需要考虑您的 RAM 使用情况和性能等，但通常这工作得很好而且很快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-01T15:45:59.290

如果存在合适的函数，VB.net 将使用 GetEnumerator 函数，而不是使用 IEnumerable 接口。因此可以实现 IEnumerable 但调用为实现 IEnumerable.GetEnumerator 的方法提供了一些其他名称。由于大多数其他枚举某些东西的例程将使用 IEnumerable 而不是鸭式 GetEnumerator，因此 GetEnumerator 方法本身被调用的事实表明它被 for-each 循环所使用。

# java - 调用 Runtime.exec 时捕获标准输出

> ID：882772
> 
> 赞同：55
> 
> 时间：2009-05-19T13:31:34.400
> 
> 标签：java, shell, runtime

在客户端机器上遇到网络问题时，我希望能够运行一些命令行并将结果通过电子邮件发送给自己。

我发现 Runtime.exec 将允许我执行任意命令，但将结果收集到字符串中更有趣。

我意识到我可以将输出重定向到一个文件，然后从文件中读取，但我的蜘蛛侠感觉告诉我有一种更优雅的方式来做这件事。

建议？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-05-19T13:35:16.060

您需要在此过程中同时捕获标准输出和标准错误。然后，您可以将标准输出写入文件/邮件或类似文件。

有关更多信息，请参阅[本文](https://www.infoworld.com/article/2071275/when-runtime-exec---won-t.html)，并特别注意`StreamGobbler`在单独的线程中捕获 stdout/err 的机制。这对于防止阻塞至关重要，如果您没有正确执行，则会导致许多错误！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-19T13:33:51.430

使用[ProcessBuilder](http://java.sun.com/javase/6/docs/api/java/lang/ProcessBuilder.html)。调用 start() 后，您将获得一个[Process](http://java.sun.com/javase/6/docs/api/java/lang/Process.html)对象，您可以从中获得 stderr 和 stdout 流。

更新：ProcessBuilder 为您提供更多控制；您不必使用它，但从长远来看，我发现它更容易。尤其是将 stderr 重定向到 stdout 的能力，这意味着您只需吸入一个流。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-19T13:42:11.023

使用[Plexus Utils](http://plexus.codehaus.org/plexus-utils/apidocs/org/codehaus/plexus/util/cli/package-summary.html)，Maven 使用它来执行所有外部进程。

```
Commandline commandLine = new Commandline();
commandLine.setExecutable(executable.getAbsolutePath());

Collection<String> args = getArguments();

for (String arg : args) {
    Arg _arg = commandLine.createArg();
    _arg.setValue(arg);
}

WriterStreamConsumer systemOut = new WriterStreamConsumer(console);
WriterStreamConsumer systemErr = new WriterStreamConsumer(console);

returnCode = CommandLineUtils.executeCommandLine(commandLine, systemOut, systemErr, 10);
if (returnCode != 0) {
    // bad
} else {
    // good
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-06-24T22:10:27.413

对于不会产生太多输出的进程，我认为这个利用[Apache IOUtils](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html)的简单解决方案就足够了：

```
Process p = Runtime.getRuntime().exec("script");
p.waitFor();
String output = IOUtils.toString(p.getInputStream());
String errorOutput = IOUtils.toString(p.getErrorStream()); 
```

警告：但是，如果您的流程生成大量输出，则此方法可能会导致问题，如[Process 类 JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)中所述：

> 创建的子进程没有自己的终端或控制台。它所有的标准io（即stdin、stdout、stderr）操作都会通过三个流（getOutputStream()、getInputStream()、getErrorStream()）重定向到父进程。父进程使用这些流向子进程提供输入并从子进程获取输出。由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-23T09:08:53.183

这是我多年来一直使用的助手类。一个小班。它有 JavaWorld streamgobbler 类来修复 JVM 资源泄漏。不知道对于 JVM6 和 JVM7 是否仍然有效，但不会受到伤害。助手可以读取输出缓冲区供以后使用。

```
import java.io.*;

/**
 * Execute external process and optionally read output buffer.
 */
public class ShellExec {
    private int exitCode;
    private boolean readOutput, readError;
    private StreamGobbler errorGobbler, outputGobbler;

    public ShellExec() { 
        this(false, false);
    }

    public ShellExec(boolean readOutput, boolean readError) {
        this.readOutput = readOutput;
        this.readError = readError;
    }

    /**
     * Execute a command.
     * @param command   command ("c:/some/folder/script.bat" or "some/folder/script.sh")
     * @param workdir   working directory or NULL to use command folder
     * @param wait  wait for process to end
     * @param args  0..n command line arguments
     * @return  process exit code
     */
    public int execute(String command, String workdir, boolean wait, String...args) throws IOException {
        String[] cmdArr;
        if (args != null && args.length > 0) {
            cmdArr = new String[1+args.length];
            cmdArr[0] = command;
            System.arraycopy(args, 0, cmdArr, 1, args.length);
        } else {
            cmdArr = new String[] { command };
        }

        ProcessBuilder pb =  new ProcessBuilder(cmdArr);
        File workingDir = (workdir==null ? new File(command).getParentFile() : new File(workdir) );
        pb.directory(workingDir);

        Process process = pb.start();

        // Consume streams, older jvm's had a memory leak if streams were not read,
        // some other jvm+OS combinations may block unless streams are consumed.
        errorGobbler  = new StreamGobbler(process.getErrorStream(), readError);
        outputGobbler = new StreamGobbler(process.getInputStream(), readOutput);
        errorGobbler.start();
        outputGobbler.start();

        exitCode = 0;
        if (wait) {
            try { 
                process.waitFor();
                exitCode = process.exitValue();                 
            } catch (InterruptedException ex) { }
        }
        return exitCode;
    }   

    public int getExitCode() {
        return exitCode;
    }

    public boolean isOutputCompleted() {
        return (outputGobbler != null ? outputGobbler.isCompleted() : false);
    }

    public boolean isErrorCompleted() {
        return (errorGobbler != null ? errorGobbler.isCompleted() : false);
    }

    public String getOutput() {
        return (outputGobbler != null ? outputGobbler.getOutput() : null);        
    }

    public String getError() {
        return (errorGobbler != null ? errorGobbler.getOutput() : null);        
    }

//********************************************
//********************************************    

    /**
     * StreamGobbler reads inputstream to "gobble" it.
     * This is used by Executor class when running 
     * a commandline applications. Gobblers must read/purge
     * INSTR and ERRSTR process streams.
     * http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=4
     */
    private class StreamGobbler extends Thread {
        private InputStream is;
        private StringBuilder output;
        private volatile boolean completed; // mark volatile to guarantee a thread safety

        public StreamGobbler(InputStream is, boolean readStream) {
            this.is = is;
            this.output = (readStream ? new StringBuilder(256) : null);
        }

        public void run() {
            completed = false;
            try {
                String NL = System.getProperty("line.separator", "\r\n");

                InputStreamReader isr = new InputStreamReader(is);
                BufferedReader br = new BufferedReader(isr);
                String line;
                while ( (line = br.readLine()) != null) {
                    if (output != null)
                        output.append(line + NL); 
                }
            } catch (IOException ex) {
                // ex.printStackTrace();
            }
            completed = true;
        }

        /**
         * Get inputstream buffer or null if stream
         * was not consumed.
         * @return
         */
        public String getOutput() {
            return (output != null ? output.toString() : null);
        }

        /**
         * Is input stream completed.
         * @return
         */
        public boolean isCompleted() {
            return completed;
        }

    }

} 
```

这是一个从 .vbs 脚本读取输出的示例，但类似的作品适用于 linux sh 脚本。

```
 ShellExec exec = new ShellExec(true, false);
   exec.execute("cscript.exe", null, true,
      "//Nologo",
      "//B",            // batch mode, no prompts
      "//T:320",        // timeout seconds
      "c:/my/script/test1.vbs",  // unix path delim works for script.exe
      "script arg 1",
      "script arg 2",
   );
   System.out.println(exec.getOutput()); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-02T15:45:23.677

[`VerboseProcess`](http://www.jcabi.com/jcabi-log/apidocs-0.7.5/com/jcabi/log/VerboseProcess.html)[jcabi-log 的](http://www.jcabi.com/jcabi-log/threads-VerboseProcess.html)实用程序类可以帮助您：

```
String output = new VerboseProcess(
  new ProcessBuilder("executable with output")
).stdout(); 
```

您需要的唯一依赖项：

```
<dependency>
  <groupId>com.jcabi</groupId>
  <artifactId>jcabi-log</artifactId>
  <version>0.7.5</version>
</dependency> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T13:33:56.983

Runtime.exec() 返回一个 Process 对象，您可以从中提取您运行的任何命令的输出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T13:37:10.550

使用 Runtime.exec 为您提供了一个过程。您可以使用[getInputStream](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Process.html#getInputStream())来获取此过程的标准输出，并将此输入流放入 String，例如通过 StringBuffer。

# c++ - 哪些 C++ 开源项目的代码质量非常高？

> ID：882781
> 
> 赞同：11
> 
> 时间：2009-05-19T13:33:15.207
> 
> 标签：c++, open-source

我想列出一些开源 C++ 世界中质量最好的项目。我知道这个问题非常广泛，但它可以作为从高质量示例中学习的良好资源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T18:43:10.253

[升压](http://www.boost.org/)，[FastFormat](http://www.fastformat.org/)，[洛基](http://loki-lib.sourceforge.net/)，[Pantheios](http://www.pantheios.org/)，[POCO](http://www.pocoproject.org/)，[Qt](http://qt.nokia.com/)，[STLSoft](http://www.stlsoft.org/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T13:39:12.840

[Boost](http://www.boost.org/)（是）应该非常好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T13:39:29.703

尝试[STL](http://www.sgi.com/tech/stl/)、[Boost](http://www.boost.org)和[Loki](http://loki-lib.sourceforge.net/)作为开始。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T13:43:08.463

我建议看看 Inkscape - 不是说它一定是最好的质量，而是相当大和稳定。取决于你真正追求的是什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T13:39:26.973

升压库:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T13:52:01.473

[KDE](http://techbase.kde.org)是目前最大的开源 C++ 项目之一。作为开源，代码质量取决于贡献者，但是编写核心库的人在技术上非常好，所以你会在那里找到一些非常好的代码。

[Qt](http://qt.nokia.com/)是 C++ 的一大块，可移植到许多嵌入式和非嵌入式平台，由一家公司提供支持。你也应该在那里找到一些优秀的代码。

# java - 如何在构建之前删除 Hudson 工作区？

> ID：882782
> 
> 赞同：11
> 
> 时间：2009-05-19T13:33:16.003
> 
> 标签：java, build, hudson

我想有一种方法来教 hudson 在结帐和构建之前删除整个工作区。有没有一个插件可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T13:48:06.630

在源代码管理下，展开高级属性并取消选中“使用更新”（CVS 为我提供了此选项，不确定所有其他 SCM 工具）。此选项控制 Hudson 是否使用“更新”命令来简单地从 SCM 中获取更改的文件，或者是否从源代码管理中检出新的/干净的副本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-07-16T17:22:04.160

目前，每个 SCM 插件都提供工作区清理功能。很快，核心 Hudson 将拥有此功能，SCM 插件会将设置迁移到该核心功能： [问题 3966](http://issues.hudson-ci.org/browse/HUDSON-3966)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T14:42:43.363

有一个选项`Advanced Project Options`：在构建之前清理工作空间。

它完全符合您的要求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T16:39:16.430

取消选中 SCM 选项下的使用更新并**在**命令中使用调用 maven 的清理阶段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-23T23:51:27.073

我还没有使用它们，但是 AFAIK 有可用的 hudson-plugins 允许批处理脚本作为构建前和构建后的步骤运行，这可能会删除目录。查看：管理 Hudson -> 管理插件 -> 可用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-02-25T10:22:42.473

Hudson 的 Subversion 插件现在有一个切换到“Emulate Checkout”的开关——它会在恢复和更新之前删除未版本化的文件。

# c# - 为什么我的 SqlCommand 当它应该是一个 int 时返回一个字符串？

> ID：882784
> 
> 赞同：4
> 
> 时间：2009-05-19T13:33:49.293
> 
> 标签：c#, sql-server, linq-to-sql, ado.net

我有一个应该*始终*返回单个 int 的查询。我现在已经记录它返回一个与它应该是什么完全无关的字符串。

我们已经得到了一些随机的 FormatExceptions，我们已经追踪到了几个数据库查询。经过一些额外的记录后，我发现，今天早上，下面的查询返回了字符串“gladiator”。Website.PkID 是一个 int 列，大部分时间都可以工作，但有时它会失败并返回一个 waaaay 的 int（比任何有效的 WebsiteID 都大）或一个随机字符串。

每次会话开始都会命中一次此特定查询。它没有使用共享连接，所以我很难理解它是如何得到如此混乱的结果的。连接池中是否存在某种损坏？

我不认为这个问题是孤立的。我也看到了来自 LINQ 查询的类似 FormatExceptions（由于意外结果）。我们也在同一时间发现了其中一些错误：

> 向服务器发送请求时发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。

会不会是连接问题？或者，也许我们在 db 服务器和 web 服务器之间混合了结果集？这真的让我摸不着头脑。

违规查询：

```
public static int GetActiveWebSiteID(string storeID, string statusID)
{
    int retval;

    string sql = @"SELECT isnull(MAX(PkID),0) FROM WebSite 
                   WHERE StoreID = @StoreID 
                   AND WebSiteStatusID = @WebSiteStatusID";

    SqlConnection conn = new SqlConnection(Settings.ConnString);
    SqlCommand cmd = new SqlCommand(sql, conn);
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@StoreID", (object)storeID ?? DBNull.Value);
    cmd.Parameters.AddWithValue("@WebSiteStatusID", (object)statusID ?? DBNull.Value);

    conn.Open();
    using(conn)
    {
        var scalar = cmd.ExecuteScalar(); // <-- This value returned here should only ever be an int, but randomly is a string

        retval = Convert.ToInt32(scalar);
    }
    return retval;
} 
```

直到最近，上述查询多年来一直运行良好。我们现在在应用程序中有一堆额外的 LINQ 查询（不确定这是否会有所不同）。我们正在运行.Net 3.5。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-09-22T18:18:32.777

在忽略这个问题几个月后，随着流量逐渐增加，它开始达到临界点。我们增加了日志记录并发现了许多确定的实例，在这些实例中，在重负载下，完全不同的结果集将返回到不相关的查询中。

我们在 Profiler 中观察了查询，并且能够看到错误的结果总是与同一个 spid 相关联，并且每个错误的结果总是在被查询的实际 sql 语句后面的一个查询。就像丢失了一个结果集，并且返回了 spid 中的下一个结果集（来自同一池中的另一个连接）。疯狂的。

通过反复试验，我们最终找到了一些 SqlCommand 或 LINQ 查询，它们的 SqlConnection 在使用后没有立即关闭。相反，由于对 LINQ 连接的误解导致的一些草率编程，DataContext 对象仅在请求结束时而不是立即被释放（并关闭连接）。

一旦我们重构这些方法以立即使用 C#“使用”块关闭连接（为下一个请求释放该池），我们就不再收到错误。虽然我们仍然不知道连接池如此混乱的根本原因，但我们能够阻止所有此类错误。这个问题与我发布的另一个类似错误一起解决，在这里找到：[什么导致“内部连接致命错误”？](https://stackoverflow.com/questions/1155263/what-causes-internal-connection-fatal-errors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:58:03.660

ExecuteScalar() 函数的返回类型是`object`，并且您使用`var`关键字声明结果变量。这并不是一个很好的组合，因为你给系统施加了很大的压力来正确地进行类型推断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:25:24.587

我认为您正在考虑`sqlCommand.ExecuteNonQuery`返回 int 值中受影响的行数...

这是 ExecuteScalar 方法的定义：

```
public override object ExecuteScalar()
Member of System.Data.SqlClient.SqlCommand 
```

**概括：**

执行查询，并返回查询返回的结果集中**第一行的第一列。**其他列或行将被忽略。

**回报：**

结果集中第一行的第一列，如果结果集为空，则为空引用（在 Visual Basic 中为 Nothing）。

所以，我认为返回该列的常用方法是作为列值的字符串表示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T17:09:46.783

我最近看到了一个代码意外切换连接字符串的案例。出于诊断目的，请对连接字符串进行硬编码并查看问题是否消失。

另外，为了理智起见，请使用嵌套 using 块，例如：

```
using(SqlConnection conn = new SqlConnection("hard-coded connection string"))
{
    using (SqlCommand cmd = new SqlCommand(sql, conn))
    {
        // more init
        object scalar = cmd.ExecuteScalar();

        // process result
    }
 } 
```

发现有两个数据库实例，我不会感到惊讶，其中一个 PkID 是一个 int，另一个是 varchar。

* * *

用 SQL Profiler 看看你是否能赶上“角斗士”的回归。在我使用的另一种情况下，SQL Profiler 什么也没显示，这表明实际查询将转到另一个数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T14:46:06.340

字段“PkID”是“WebSite”表中的 varchar/char。

如果查询的“ISNULL”部分为真，那么它将返回一个整数 (0)，否则它将返回一个值为“PkID”的字符串

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T15:56:58.970

可能有多个网站表。您可以使用架构名称限定表：

SELECT isnull(MAX(PkID),0) 从 YourSchema.WebSite WHERE StoreID = @StoreID AND WebSiteStatusID = @WebSiteStatusID

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T16:59:30.980

当它无法返回 int 时有什么共同点吗？

由于您的查询只返回单行中的单列，如果您使用更安全的 ExecuteReader 并获取第一列的值，您会得到什么？

它总是返回一行吗？如果该`WHERE`子句导致它不返回任何行（假设您的参数不是您认为的那样），那么您的参数不会`ISNULL`生效 - 根本没有行，并且 ExecuteScalar 应该返回 NULL。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T17:12:27.000

我认为您发布的查询和 LINQ 都不是问题。

你真的确定你正在寻找正确的来源吗？方法是怎么调用的？日志记录是如何完成的？

[选择没有损坏。](http://www.codinghorror.com/blog/archives/001079.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T16:45:32.240

我假设从 Web.Config 或注册表中读取 Settings.ConnString 并重新使用其他静态例程。是否可能存在时间问题，即在您的例程中调用 cmd.ExecuteScalar() 之前执行第二个方法，从而修改连接上的 cmd.CommandText？

希望这可以帮助，

账单

# version-control - Free RCS/SCM/VCS 系统是否有可用的流行度/使用情况统计数据？

> ID：882788
> 
> 赞同：38
> 
> 时间：2009-05-19T13:34:11.273
> 
> 标签：version-control, survey, popularity

是否有任何调查报告使用各种免费版本控制系统的项目和/或人数？

同样有趣的是，如果随着时间的推移进行类似的调查，看看事情发生了怎样的变化。

显然，这种事情很难完全准确地测量出来，但应该仍然可以得到合理的估计。

由于标签令人讨厌地限制为五个项目，而且我不想偏向/反对任何系统，为了搜索目的，我将添加以下内容： bazaar bzr cvs git hg mercurial rcs scm svn subversion vcs scm vcs流行度调查统计
*更新：*到目前为止，视图很少，所以我循环标签以包含每个软件的主要标签，这可能会引起更多关注。如果我能把所有的标签放在一起就好了！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-19T23:14:02.973

Git 用户调查（[2006](http://git.or.cz/gitwiki/GitSurvey2006)、[2007](http://git.or.cz/gitwiki/GitSurvey2007)和[2008](http://git.or.cz/gitwiki/GitSurvey2008)）确实包含有关其他 SCM 的版本......但这当然是有偏见的。[您可以在Ohloh](http://www.ohloh.net)开源软件度量站点上查看有多少人在堆栈中提供了 SCM ，但我认为您只能查看当前状态。还有[Debian Popularity Contest](http://popcon.debian.org) (popcon) 的结果；你甚至可以在某处找到一些popcon图；在这里我不确定是否可以获得历史信息。

这些来源都不是一个好的解决方案，但我认为这是一个开始......

***2009 年 5 月 20 日添加：*** Elijah Newren 的博客（DVCS = 分布式版本控制系统）上
还有[GNOME DVCS 调查结果分析（带有原始数据链接）。](http://blogs.gnome.org/newren/2009/01/03/gnome-dvcs-survey-results/)

***2009 年 5 月 28 日添加：***萨斯喀彻温大学计算机科学系的 Brian de Alwis
正在[对分散式版本控制系统进行调查](http://www.cs.usask.ca/~bsd178/research/dvcs-survey/)**（**请参阅Mercurial 和 Git 邮件列表上的[此公告）。](http://permalink.gmane.org/gmane.comp.version-control.mercurial.general/14179)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-04-10T17:52:39.330

维基百科对流行的版本控制*托管*站点上的项目和人员进行了[总结。](http://en.wikipedia.org/wiki/Comparison_of_open_source_software_hosting_facilities#Popularity)虽然这不是 1:1 的版本控制，也不是一切，但我相信它确实涵盖了高知名度项目。

 **   Github 的项目数量是其他项目的 7 倍！然而，这个数字是作弊的一半：[约 40% 是 gists](http://techcrunch.com/2010/07/24/github-one-million/)，我怀疑他们将分叉视为单独的项目（？）
*   Sourceforge，然后是 Launchpad 的用户比其他用户多得多。Launchpad 用户包括仅注册 ubuntu 错误和翻译的人。

# cakephp - 在 CakePHP 中处理多个 URL 值

> ID：882794
> 
> 赞同：0
> 
> 时间：2009-05-19T13:35:15.983
> 
> 标签：cakephp

我正在使用 CakePHP 框架开发一个站点。我有一个显示实体列表的表单，每个实体都有一个复选框，允许您选择它。然后，您按下表单底部的一个按钮，显示“编辑已选择”。

我通常的做法是为每个复选框输入相同的名称（例如`row_id`），并使用主 ID 作为输入的`value`. 但是，当您提交表单时，CakePHP 似乎只将复选框的值*之一*`$this->params['url']`返回给控制器 in ，而不是像我期望的任何类型的列表。

有关处理此问题的正确方法的任何提示，以便我可以找出勾选了哪些行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:52:25.480

如果您使用 FormHelper，最简单的方法是创建如下字段：

```
echo $form->input('ModelName.0.row_id', /* snip */)
echo $form->input('ModelName.1.row_id', /* snip */) 
```

等等..你明白了。如果它是一个动态列表，那么总会有`for`循环。

当表单被发布时，这应该给你一个像这样的服务器端数组（$this->data）：

```
array
(
    ['ModelName'] => array
    (
        [0] => array
        (
            [row_id] => value
        ),
        [1] => array
        (
            [row_id] => value
        )
    )
) 
```

然后您可以使用 Set 实用程序类来提取您的 ID（并弄乱您的数据:)）

# javascript - 如何从点击事件中分配子元素

> ID：882796
> 
> 赞同：4
> 
> 时间：2009-05-19T13:35:17.683
> 
> 标签：javascript, jquery

有人可以帮我解决这个问题。有HTML代码：

```
<h3>
    <label>
        <input type="checkbox" name="country" value="us" /> United States
    </label>
</h3>
<p>Some content goes here</p> 
```

我想通过单击**h3标签来切换****p元素，但如果我单击****标签**，我不想切换

 ****```
$('h3').click(function() {
   // Does something goes here?
   $(this).next('p').toggle();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T13:49:55.877

您需要检查动作的目标

```
$('h3').click(function(e) {
   // if they clicked the h3 only
   if (this == e.target) {
     $(this).next('p').toggle();
   }
} 
```

altCognito 的建议也可以，但它是更多代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T13:41:17.750

你想 stopPropagation()

```
$('h3').click(function() {
   // Does something goes here?
   $(this).next('p').toggle();
}
$('label').click(function(e) {
   e.stopPropagation();
} 
```

# winforms - MS Office PIA“向后兼容性”

> ID：882799
> 
> 赞同：6
> 
> 时间：2009-05-19T13:35:59.353
> 
> 标签：winforms, ms-office, office-pia

我已经成功完成了一个带有 MS Word 集成的 Windows Forms 应用程序 - 该应用程序写入 Word 模板中的合并字段。我使用 MS Word 2007 制作了模板，但以兼容模式将其保存为 97-2003 '.dot' 文件。由于我安装了 Office 2007，我使用的是 MS Word 对象库 PIA 12.0 版。如果我要部署此应用程序，其他使用 Office XP 或 2003 的人是否能够使用它，因此我询问兼容性？

我已将 PIA DLL 复制到应用程序的输出目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T13:45:19.973

您可以使用使用旧 PIA 编译的应用程序来自动化 Word 2007，但不能使用使用 Office 2007 PIA 编译的应用程序来自动化 Word 的早期版本。

有些事情可能会奏效，但通常不支持。

问题是，较新版本的 Word 具有新功能，而较新的 PIA 支持这些新功能。您可以轻松构建利用新 PIA 中的新功能的应用程序。当您针对旧版本的 Word 运行该应用程序时 - 谁知道会发生什么。

您需要担心的不仅仅是新的“外部”功能。PIA 中可能存在仅与较新版本的 Office 应用程序兼容的新实现。

所以，你提议做的事情是不安全的，不推荐。

您可以[下载其他版本的 PIA](http://search.live.com/results.aspx?q=download+office+pias)。

# cocoa - 获取到达数据包的IP地址

> ID：882802
> 
> 赞同：0
> 
> 时间：2009-05-19T13:36:42.407
> 
> 标签：cocoa, networking

所以我正在使用创建一个输入套接字

`CFSocketCreateWithSocketSignature (NULL, &signature, kCFSocketDataCallBack, receiveData, &socket_context);`

在 receiveData 函数（被正确调用）中，我试图使用`CFDataRef address`参数来找出这个“包”的发件人地址。

发送方 PC 的 IP 地址为 192.168.1.2。

我正在使用

`char buffer[INET_ADDRSTRLEN]; NSLog([NSString stringWithFormat:@"incoming connection from: %s", inet_ntop(AF_INET, address, buffer, INET_ADDRSTRLEN)]);`

但是，我总是从日志中取出 192.6.105.48。是什么赋予了？我对 Cocoa/C 中的网络真的不是很感兴趣，所以非常感谢任何帮助/解释。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-24T18:53:33.673

这是我为我的一个项目实现的 NSData 类别类。使用 CFDataRef 和 NSData 之间的免费桥接，您可以使用以下类。

```
@implementation NSData (Additions)

- (int)port
{
    int port;
    struct sockaddr *addr;

    addr = (struct sockaddr *)[self bytes];
    if(addr->sa_family == AF_INET)
        // IPv4 family
        port = ntohs(((struct sockaddr_in *)addr)->sin_port);
    else if(addr->sa_family == AF_INET6)
        // IPv6 family
        port = ntohs(((struct sockaddr_in6 *)addr)->sin6_port);
    else
        // The family is neither IPv4 nor IPv6\. Can't handle.
        port = 0;

    return port;
}

- (NSString *)host
{
    struct sockaddr *addr = (struct sockaddr *)[self bytes];
    if(addr->sa_family == AF_INET) {
        char *address = 
          inet_ntoa(((struct sockaddr_in *)addr)->sin_addr);
        if (address)
            return [NSString stringWithCString: address];
    }
    else if(addr->sa_family == AF_INET6) {
        struct sockaddr_in6 *addr6 = (struct sockaddr_in6 *)addr;
        char straddr[INET6_ADDRSTRLEN];
        inet_ntop(AF_INET6, &(addr6->sin6_addr), straddr, 
            sizeof(straddr));
        return [NSString stringWithCString: straddr];
    }
    return nil;
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:01:24.980

可能是网络流量在到达接收端的途中被 NAT/伪装。您为发件人 PC 提供的 IP 地址位于 RFC 1918 专用/未路由网络之一中，而您看到的 IP 地址位于路由网络块上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T13:51:15.653

好吧，除非编程错误并假设 Mac 平台，检查两台机器上的输出，`ifconfig`检查两台机器的路由`route get <IP>`；一直到`tcpdump`。

顺便说一句，在 Mac 上拥有 BSD 层真的很划算——如果你不知道如何使用`man`它，比如`man tcpdump`.

# html - 元标题/描述/关键字内容中的转义字符

> ID：882807
> 
> 赞同：1
> 
> 时间：2009-05-19T13:37:10.097
> 
> 标签：html, search-engine

是否有任何搜索引擎 [spiders] 对页面元标记中的转义特殊字符提出质疑，还是它们通常都正确解释它们？我想一个典型的例子是：

```
&amp; => & 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T13:39:42.277

不，搜索引擎非常擅长理解 HTML 编码的字符，例如`&amp;`和`&lt;`。您可以使用这些值感到安全，因为任何值得其盐分的蜘蛛（换句话说，任何可能会为您的网站带来流量的蜘蛛）都会很好地抓住这些字符。

# iphone - 存储数据 iPhone 应用程序的最佳实践

> ID：882809
> 
> 赞同：2
> 
> 时间：2009-05-19T13:37:14.310
> 
> 标签：iphone, cocoa-touch

我有一个严重依赖 TableViews 和 SQLite 数据库的 iPhone 应用程序。您将数据存储在哪里？就我而言，我在 App Delegate 中从 Web 中提取数据并将其存储在 AppDelegate 中，并定期将其保存到 DB 中。

rootviewcontroller 是一个 tableview，它读取 appdelegate 对象并自行填充。

但是，根据 Evan Doll（斯坦福讲座）的说法，在 AppDelegate 中存储数据似乎是一个糟糕的设计。我不想以后为此付出代价。有人可以建议这个解决方案的更好替代方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T14:13:32.257

为了我自己的使用，我创建了某种 MVC 结构。我有一个 DataManager（一个单例），它在数组或字典中保存所有必需的数据（主要以模型表示；普通 NSObjects）。

视图（Nib 文件和 ViewControllers）与 DataManager 对话以通过 get 函数获取它们的数据。如果数据已经存在于 DataManager 中，它会返回数据（通过通知）。如果不; 它将调用转发给控制器，然后控制器获取它。

在那个控制器中，我以离线/在线方式（可能对您不重要）分离调用，如果在线，调用是 XML 请求，如果离线，调用是对 SQLite 数据库的调用。

然后，Controller 可以在 DataManager 上设置数据，并向 View 发送 Notification。

然后循环再次开始，视图可以通过 DataManager 访问数据。所有这些都发生在异步调用中，因此通知（如果我让 DataManager 或控制器弄乱视图，它就不是线程安全的）。

我的 AppDelegate 只对主视图、控制器和 DataManager 进行第一次初始化，然后由它们接管。

将模型（数据）放在一个中心位置是一件好事，这样您就可以在每个类中轻松访问它，而无需创建太多类依赖项。

我还将大多数类型的功能拆分为单独的类，例如用于数据的 DataManager、用于异步 URL 请求的 DownloadManager、XML 解析器、从 NSDictionaries 构建模型的工厂、DatabaseConnector 等。

# asp.net - 更新进度条和更新面板

> ID：882810
> 
> 赞同：1
> 
> 时间：2009-05-19T13:37:24.247
> 
> 标签：asp.net, vb.net, ajax, asp.net-ajax, updatepanel

我有一个 grideview，它显示将通过单击网格页脚中的删除按钮跨服务器删除的行。这个删除需要很长时间，所以我想要一个更新进度条。我对它不是很熟悉，所以我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T13:40:33.367

查看[asp.net 视频教程](http://www.asp.net/learn/ajax-videos/)部分。您正在寻找的是：[使用 ASP.NET AJAX UpdateProgress 控件](http://www.asp.net/learn/ajax-videos/video-123.aspx)

# .net - 对象数据源或代码隐藏：哪个更好？

> ID：882817
> 
> 赞同：10
> 
> 时间：2009-05-19T13:38:26.430
> 
> 标签：.net, asp.net, data-binding

我知道这是一个会引起很多争论的话题，但我想知道人们认为使用对象数据源的各种利弊是什么。我现在正在和另一个程序员一起做一个项目，他的经验和舒适度都植根于经典的 ASP，我不确定哪种方式会
a) 快速完成工作 b) 用最少的时间完成工作大惊小怪的

我们有一个很好的存储库层，其中包含能够自我验证的域对象，因此可以使用这些方法来执行 ODS 绑定或代码隐藏绑定。

出于大多数显而易见的原因，我不喜欢 ODS，但如果它确实让我不必手动编码分页/排序/选择/插入/更新/删除场景，那么它真的会那么糟糕吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-19T13:43:40.973

对象数据源非常适合小型项目，但它们不能很好地扩展，因为您将数据层信息嵌入应用程序的 UI 层。我建议您仅将它们用于非常小的应用程序和便笺式测试的东西。如果您做出使用它们的设计决定，请准备好在未来解决扩展和维护问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-11-17T23:12:10.753

DataSourceControls 的最大好处是它们抽象了对 .NET 生命周期的几个关注点，同时提供了对完整 CRUD 和双向数据绑定表达式的支持，即 <%# Bind("FirstName") %>（但是 2 向数据绑定确实有点糟糕，所以你可能不会错过任何东西）。作为一种设计模式，使用平庸的实现（很像 WebForms 本身）是一个非常好的主意。

如果您禁用视图状态并发现自己试图弄清楚为什么您的回发没有被处理，或者您最终不得不在多个地方调用 DataBind()，数据源可以消除一些令人头疼的问题，因为 DataBoundControls 足够聪明知道他们什么时候需要数据，而他们只是从数据源中需要它。不需要 DataBind() 调用。

数据源还提供了一种处理排序、过滤和分页的好方法。大多数开发人员在使用代码隐藏时通常不会进行分页，而是最终从数据库返回大量结果集。

数据源的缺点是没有很多好的实现。通常你最终将你的 Web UI 绑定到你的持久性实现（即 SqlDataSource、LinqDataSource 等），或者你最终使用 ObjectDataSource，这很糟糕，因为它非常有限，需要你将类名和方法名硬编码到你的 ASPX ，并且使用反射有些低效。因此，它对使用依赖注入或静态 DAO 类的人没有用处。这是一门构思拙劣的课程，似乎是 MS 的事后才想到的。

就我个人而言，我更喜欢使用 DataSources 和代码隐藏。使用 DataSource 消除生命周期/视图状态问题，然后在代码隐藏中为其提供“选择”事件/委托。不幸的是 ObjectDataSource 只能使用反射，但是您可以轻松编写自己的实现。我有我自己的一个，但它不公开。但是在我写之前我使用了这个，它弥补了 ObjectDataSource 的一些不足：

[http://mikeoff.blogspot.com/2006/06/objectdatasource-working-alternative.html](http://mikeoff.blogspot.com/2006/06/objectdatasource-working-alternative.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T13:47:41.327

您对所使用的底层 ADO.NET 框架越熟悉，就越会越来越少地依赖与 Visual Studio 一起打包的数据源控件。在我从事的前几个 .NET 项目中，我虔诚地使用它们，但我很快发现，与依赖 .NET 来实现它相比，仅使用连接和检索数据库上的数据的基础知识会好得多为我做这件事的最佳尝试。

我或多或少地将它们视为训练轮，以使您或多或少地熟悉数据绑定的生命周期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T13:45:18.350

就个人而言，我认为这取决于项目。如果它是一个带有几页的小型 CRUD 应用程序，那么绑定到对象数据源可能会快速、简单并且几乎没有什么后果。

如果它是具有定制需求的大型应用程序，那么您可能会发现试图使对象数据源满足这些特定需求会令人沮丧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T13:49:14.987

在我看来，两者都有自己的位置，优势和劣势。节省编码你提到的元素的时间，特别是分页和排序，有很大的帮助，但如果你想用它们做任何有趣的事情，它们很快就会变得难以处理。

当数据将严格仅用于显示时，我使用 ODS。插入数据网格、ODS，就完成了。但是，如果需要以任何方式处理这些数据，我会远离所有内置部件，没有网格，没有 ODS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T13:51:52.550

我认为一般来说，后面的代码更有用，因为它为自定义数据层连接提供了一个中心位置。只要你把动作分成不同的层，后面的代码就可以非常可扩展。

另一方面，自定义对象数据源非常有用，因为它允许与 GridView 控件进行固有绑定。自定义对象数据源提供的数据集便于排序和分页。自定义对象还为数据层访问提供了一个中心位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-05T20:58:54.340

与 WebForms 中的任何其他 xxxDatasource 一样，ObjectDatasource 是大型应用程序上的业务层（或较小应用程序上的数据访问层）和控件本身之间的协调器。

它只是为应用程序的可视化部分提供数据和其他功能，用户界面由数据存储中的视图驱动。

人们应该将这些控件视为对 UI 内容的请求和响应，并停止滥用它们或完全丢弃它们。它们不是 DAL，它们不是邪恶的，它们只是与您的数据源的连接，控制知道如何非常有效地与之对话。

例如，如果您有一个基于决策改变其源的数据网格，则应配置两个 ObjectDatasource，并且该决策应驻留在页面中，而不是 ObjectDatasource。这是使用它们并避免人们试图在其他响应中提及的问题的首选方式。

# .net - 您是如何在自己的代码中使用 IContainer/ISite/IComponent 的？

> ID：882818
> 
> 赞同：13
> 
> 时间：2009-05-19T13:38:27.287
> 
> 标签：.net, architecture, containers, system.componentmodel

> **可能重复：**
> [何时以及为什么应该实现 IComponent、IContainer 和 ISite？](https://stackoverflow.com/questions/273615/when-and-why-should-i-implement-icomponent-icontainer-and-isite)

有各种关于使用 IContainer 和 ISite 的在线文档（例如[http://www.theserverside.net/tt/blogs/showblog.tss?id=pluginArchitectures](http://www.theserverside.net/tt/blogs/showblog.tss?id=pluginArchitectures)），并且有一些模糊的例子，但我没有遇到过实际有用的真实实例（winforms 除外）。我真的不知道它到底可以用来做什么，这无济于事。有没有人在他们自己的代码中使用 .NET 容器接口和相应的类，独立于 winforms，你是如何使用它们的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T16:48:36.053

这些是面向组件的软件方法中的面向组件的元素。例如，视觉设计师使用它们。

如果您希望构建可重用的软件组件 (IComponent)，并有能力将各个域中的组件调整 (ISite) 作为规范程序集 (IContainer)，特别是在设计时/运行时框架 (visualstudio) 的上下文中那么你就在那里......

# regex - 使用 ISAPI-Rewrite 排除目录

> ID：882819
> 
> 赞同：1
> 
> 时间：2009-05-19T13:38:32.793
> 
> 标签：regex, mod-rewrite, isapi-rewrite

我正在尝试使用 ISAPI-Rewrite 排除目录（注意：这是 mod-rewrite 的 windows/iis 端口）。

我要排除的目录是“api”，当它位于站点的根目录时。

这是我的规则：

RewriteRule ^(/api/)(.+)$ $1$2 [NC, L]

请求看起来像这样：/api/v2/users?usernames=scottw

不幸的是，querstring 值总是被排除在外，并且 url 被重写为 /api/v2/users。

我在假设 (.+) 会捕获其他所有内容的情况下进行攻击。

有什么建议么？还是排除目录的更好方法？

谢谢

**更新**：我也简化了规则，但这也没有改变任何东西：

重写规则 ^(/api/.+)$ $1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:54:56.057

事实证明这里发生了两件事：

1.  正则表达式应该是 ^(api/) 而不是 ^(/api)。第一个“/”被排除在外。
2.  ISAPI_Rewrite 附带的正则表达式解析器工具似乎无法正确处理查询字符串。

最终似乎起作用的规则是：

```
RewriteRule ^(api/.+) $1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:58:18.807

我有时看到'.+' 的工作很奇怪，你可能会尝试切换到'..*' 我并不是说它会工作，但它可能值得一试。

# c# - Fluent NHibernate 连接子类问题

> ID：882820
> 
> 赞同：3
> 
> 时间：2009-05-19T13:39:07.787
> 
> 标签：c#, nhibernate, inheritance, fluent-nhibernate

我有这门课

```
public class Address:Entity {
    public virtual string Address1 { get; set; }
    public virtual string Address2 { get; set; }
    public virtual string City { get; set; }
    public virtual string State { get; set; }
    public virtual string Zip { get; set; }
    public virtual string Phone { get; set; }
    public virtual string Fax { get; set; }
    public virtual string TaxId { get; set; }
} 
```

作为基类

```
public class Location:Address {
    public virtual string OfficeHours { get; set; }
    public virtual string PatientAgeRestrictions { get; set; }
    public virtual bool WheelchairAccess { get; set; }
    public virtual string ContactPerson { get; set; }
} 
```

然后我用它来构建我的模式。

```
Fluently.Configure()
.Mappings(m => {
    m.AutoMappings.Add(
        AutoPersistenceModel.MapEntitiesFromAssemblyOf<Provider>()
        .Where(t => t.Namespace == "Entities")
        .ConventionDiscovery.AddFromAssemblyOf<UnderscoreIdDelimiter>()
        .WithSetup(s => {
            s.IsBaseType =
                type => type == typeof(Credentialing.Data.Entity);
        })
    );
})
.ExposeConfiguration(BuildSchema)
.BuildSessionFactory(); 
```

当我这样做时，列命名和表命名的约定不会应用于我的位置表。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T13:51:45.710

似乎在修订版 531 中已修复。

# java - 如何更改 Java 应用程序进程的名称？

> ID：882826
> 
> 赞同：43
> 
> 时间：2009-05-19T13:40:01.653
> 
> 标签：java, process, argv

执行 Java 应用程序时，赋予它的进程名称通常是`java.exe`或`javaw.exe`。但是我怎样才能让它被我的应用程序的名称调用呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-19T15:01:24.577

这些方法适用于运行大量 java 进程的服务器，并且您需要一种快速找到正确 jvm（不使用 jps）的方法。对于应用程序，我认为 launch4j 或其他包装器是可行的方法。

在 unix 上，如果您从 shell 脚本启动（至少对于 bash 并且可能对于其他体面的 shell），您可以使用：

```
exec -a goodname java ... 
```

启动`java`并传递“goodname”作为第 0 个参数，它将显示为`ps`等中的进程名称。

一个可能更好的选择（似乎也适用于`top`）是创建一个符号链接：`ln -s /usr/bin/java /usr/local/bin/kallekula`。

windows 中的快捷方式无法解决问题，但 windows vista/7 支持使用`mklink`. 这可能有效，但我没有测试过。我不确定是否`exec -a`也适用于 Windows 上的 cygwin bash。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-19T13:42:30.383

查看[launch4j](http://launch4j.sourceforge.net/)，它是一个可执行包装器，允许您分配可执行名称。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-19T13:43:33.563

除非您在自定义构建的可执行文件中通过 JNI 启动 Java，否则进程名称将始终为 java.exe。

有几个 java 启动器/包装器可以为您生成这个可执行文件。

*   [Launch4j](http://launch4j.sourceforge.net/)，看起来是最新的和最新的
*   [JS平滑](http://jsmooth.sourceforge.net/)
*   [install4J](http://www.ej-technologies.com/products/install4j/overview.html)，商业，比你需要的更多

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-12-05T12:16:08.013

这是特定于 Windows 的。
我遇到了同样的问题，我必须使用***taskkill***杀死特定的 java 程序。当我运行 java 程序时，***tasklist***显示图像名称设置为**java.exe**的相同程序。但是使用***taskkill /F java.exe***杀死它会停止所有其他 Java 应用程序，而不是不需要的预期应用程序。

所以我使用以下方法运行相同的 java 程序：

***启动“MyProgramName”java java-program..***

这里的**start**命令将打开一个新窗口并运行窗口标题设置为**MyProgramName**的 java 程序。

现在要杀死这个 java 程序，请使用以下 taskkill 命令：

***taskkill /fi "我的程序名"***

您的 Java 程序只会被杀死。休息不受影响。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-19T14:52:32.363

如果您使用的是 Sun JDK，您还可以使用“jps”命令行工具来获取机器上运行的 Java 进程的详细列表。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-21T03:09:20.320

您可以使用`LD_PRELOAD`shim 执行此操作：[https ://github.com/airlift/procname](https://github.com/airlift/procname)

shim 只是`prctl()`在进程启动时调用特定于 Linux 的：

```
static void __attribute__ ((constructor)) procname_init()
{
   prctl(PR_SET_NAME, "myname");
} 
```

调用必须发生在主线程上，因此不可能从 Java 甚至使用 JVMTI 代理执行此操作，因为这些发生在不同的线程上。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-06-05T12:03:15.047

假设您真正追求的是一种稍后终止正确过程的方法，那么另一种解决方案是：

运行`ps -ef | grep java`，你应该得到一个看起来像这样的列表：

```
 mruser    7518  7505  4 11:37 pts/3    00:00:00 /usr/bin/java -classpath MRD3030_Linked.jar peralex.MyApp 
```

然后`pkill -f peralex.MyApp`将杀死正确的进程。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-12-16T21:52:07.107

并非所有的 exec 风格都支持 -a 标志。如果你没有，[argv0](http://cr.yp.to/ucspi-tcp/argv0.html)程序会做类似的事情。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-29T23:49:28.363

我需要在 Windows 中解决此问题，以使我能够停止特定的 java 进程。我已经决定使用 .bat 文件来运行不同的 .jar 文件，.bat 文件的第一行是 TITLE “Name to give the cmd window”，然后当我查看不同的 cmd 窗口时，我可以看到哪个是我想要停止的那个，然后通过那个 cmd 窗口按 Ctrl-C。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-21T13:19:07.073

[WinRun4J](http://winrun4j.sourceforge.net/)

在许多 Java exe 包装器中，自定义 exe 只是一个启动器，并且该进程仍然像通常的 java(w).exe 一样运行。另一方面，在[WinRun4J](http://winrun4j.sourceforge.net/)中，自定义 exe 是运行您的应用程序的进程，因此例如在任务管理器中，您的自定义 exe 就是出现的内容。它支持 32 位和 64 位、控制台和无控制台（以及许多配置选项）。

# c# - ASP.NET HTTPS 和 RelativeUrls

> ID：882827
> 
> 赞同：0
> 
> 时间：2009-05-19T13:40:02.543
> 
> 标签：c#, asp.net, url, https

我有一个带有 www.foo.com 的 SSL 证书的网站。将请求重定向到 https:// 前缀的最干净的方法是什么？我是否必须在服务器端构建链接，而不是依赖于使用相对路径解析 url，~/？

另外，假设我重定向到 https:// 页面，页面上的链接都是在母版页中创建的，并使用相对路径解析。如果用户单击任何导航元素，他们基本上会停留在 https:// 路径上，那么清理它的最佳方法是什么？

这些路径都需要在开发（本地主机）、登台和生产环境中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:57:30.930

不，你不需要做任何事情，

除非您发出完全限定的 url，否则您的每个相对 url 重定向和路径总是与 https:// 一起考虑，例如，

您的页面 url 是[https://mysite/folder1/page.aspx](https://mysite/folder1/page.aspx)，如果您发出 Response.Redirect("/folder2/page2.aspx") 则 Web 服务器仅发出相对 url "/folder2/page2.aspx" 但客户端（IE/FF2/Safari）他们在 url 前附加“ [https://mysite ”。](https://mysite)

因此，只要您在项目中使用相对 url，您就是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:45:39.160

您可以在 html 中设置 <base> 标记，这意味着所有内容都将与该基本 url 相关。

# silverlight - 降级为 html 的 Silverlight

> ID：882828
> 
> 赞同：5
> 
> 时间：2009-05-19T13:40:14.587
> 
> 标签：silverlight, accessibility, datasource, graceful-degradation

我有兴趣完全用silverlight（个人原因）创建一个网站，但我不希望还没有silverlight（很多）的人必须安装插件才能查看我的网站。我倾向于的解决方案是从网站的平面 html/css 版本开始，只向已经安装它的人展示 silverlight 版本。

我的问题是这样的：

我的推理是不是被误导了。有没有更好的方法来解决这个问题。避免在网站的两个版本之间重复内容的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:00:03.657

我个人喜欢网站的优雅降级。我想在我的网站上安装 Silverlight，但我在 Twitter 上看到有人来到 Silverlight 网站并说 - 我绝不会安装那个插件。因此，这些人也必须得到容纳。

我写了关于 Silverlight Islands，如何使用 JQuery 来实现。这种方法提供了搜索引擎素材，它为非 Silverlight 爱好者提供了一种使用该网站的方式，它为您提供了一种随心所欲地享受您的网站的方式。

但这是更多的工作。 [http://www.faxt.com/blog/post/2008/09/Show-Multiple-Silverlight-Controls-in-the-Same-Page-with-jQuery.aspx](http://www.faxt.com/blog/post/2008/09/Show-Multiple-Silverlight-Controls-in-the-Same-Page-with-jQuery.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:53:03.500

这取决于您所说的“内容”。

如果“内容”是指驱动网站的代码，那么您将需要将所有内容编写两次，而我看不出有任何解决办法。

如果“内容”是指代码呈现的内容，那么可以做一些事情来减少重复。如果您以 XML 等已知格式存储内容，则可以在 HTML/CSS 端使用 XSLT 将 XML 转换为 HTML 以进行呈现。然后在 Silverlight 端，您还可以解析 XML 并以您想要的任何格式显示它。使用这种技术，您只需重写框架以显示内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T13:56:01.510

进行快速搜索，我发现此页面可能有用： http: [//www.adefwebserver.com/DotNetNukeHELP/Misc/Silverlight/DetectSilverlight/Default.html](http://www.adefwebserver.com/DotNetNukeHELP/Misc/Silverlight/DetectSilverlight/Default.html) 也许使用该方法检测 Silverlight，您可以使用 Silverlight 将用户重定向到您的真正的 Silverlight 页面和/或将其他用户重定向到常规 html 页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T13:58:22.693

查看 unobtrusify.com，它适用于不显眼的 javascript，但同样的道理也成立。

另外，请查看 Scott Guthrie 关于未安装 Silverlight 的博客：weblogs.asp.net/scottgu/archive/2007/10/30/optimizing-the-silverlight-install-experience.aspx

如果您不想复制，我会说在给定的 div 标签中包含 HTML 并将它们拉入您的 Silverlight 应用程序，有效地将其用作不同的表示层。您可以使用 Javascript 库根据用户是否安装了 Silverlight 来显示/隐藏该 HTMl。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T15:07:32.990

我建议阅读有关[SilverSpine](http://spatacoli.com/tech.aspx?cat=Silverlight&page=2)的文章，这是 McCann 开发的一种用于管理此类 Silverlight/XHTML 集成的技术。

迈克尔

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T15:16:41.927

首先，为没有 Silverlight 插件的用户提供低级体验是一个非常好的做法。它还将为您的网站提供更好的 SEO。如果您有能力使用 Silverlight 3 和 ASP.NET，那么 .NET RIA 服务对于跨 Silverlight 和 ASP .NET 重用代码来说是一个非常有吸引力的选择。Ria 服务和教程可在此处获得：

[http://code.msdn.microsoft.com/RiaServices](http://code.msdn.microsoft.com/RiaServices)

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2009-05-19T13:51:59.087

好吧，您可以使用 Flash，然后 99.9% 的访问者将拥有该插件。

# c++ - 在 C++ 中找到最大两个浮点数的最快方法是什么？

> ID：882834
> 
> 赞同：3
> 
> 时间：2009-05-19T13:40:59.263
> 
> 标签：c++

找到最大两个浮点数的最快方法是什么：

一个）

```
y = std::max(x1, x2); 
```

b)

```
if (x1 > x2)
    y = x1;
else
    y = x2; 
```

C）

```
y = x1 > x2 ? x1 : x2; 
```

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-19T13:44:51.270

这是一个不同的问题

> 为什么您认为如此小的优化在您的程序的更大范围内会很重要？

我发现像这样的微优化不太可能对您的程序产生明显的影响**。**除非分析器明确表明这是一个问题，否则您永远不应该像这样进行微优化。

**编辑**在评论中添加一些澄清

这个问题没有很好的答案的原因是该代码的性能高度依赖于......

1.  在你的程序中使用它的方式
2.  您正在使用的特定编译器
3.  传递给编译器的优化标志
4.  您正在运行代码的特定架构
5.  问题中未包含的许多其他非常微小的东西

即使所有这些信息都包括在内，我们的答案充其量也只是猜测。回答这个问题的唯一方法是使用分析器并找出哪个更快。

然而，这几乎肯定不值得付出努力。微优化程序的一小部分几乎肯定不会为您的代码增加任何显着的性能优势。一般来说，优化这样的代码是一个非常糟糕的主意，除非分析器明确告诉你这是一个问题。否则，您将花费大量时间优化某些东西而没有明显的好处。

是的，在某些情况下，这种优化可能很重要。但这只是在**非常特殊**的情况下，代码是非常紧密的高度调用循环的一部分。然而，识别此类代码的唯一方法是使用分析器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T13:45:45.917

您可以在系统上自行检查。

我在 gcc - redhat 上为你做的。我系统上的结果，100,000 次执行，x1 = 432943.5 和 x2 = 434232.9

a) ~1200 微秒 b) ~600 微秒 c) ~600 微秒

编辑：使用**-O2**优化，我在所有 3 种情况下都得到了相同的结果：~110 uSec。

当然，实际结果取决于您的具体问题和系统中的许多因素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T13:45:13.280

它是特定于编译器的，但我怀疑结果是一样的。看看编译器的汇编输出。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-19T15:03:45.040

-O3 双核 Macbook pro 2.4ghz

> std::max(x1, x2) 时间：4.19488 RMAx's : 4.19613 如果时间：4.18775 ？时间：4.18831
> 
> std::max(x1, x2) 时间：4.1836 RMAax：4.18274 如果时间：4.18603？时间：4.18857
> 
> std::max(x1, x2) 时间：4.18714 RMAx's : 4.18759 如果时间：4.19752 ？时间：4.19797
> 
> std::max(x1, x2) 时间：4.1926 RMAx's : 4.19293 如果时间：4.19334 ？时间：4.19626
> 
> std::max(x1, x2) 时间：4.18963 RMAx's : 4.19628 如果时间：4.19253 ？时间：4.19107

```
#include <iostream>

using namespace std;

int main (int argc, char * const argv[]) {

    uint64_t iterations = 10000000000;
    float x1 = 3455.232;
    float x2 = 7456.856;
    float y = 0;

    for (int count = 0; count < 5; ++count)
    {       
        clock_t begin_time = clock();
        for (uint64_t ii = 0; ii < iterations; ++ii)
        {
            y = std::max(x1, x2);
        }

        std::cout << "std::max(x1, x2) Time: " << float( clock () - begin_time ) /  CLOCKS_PER_SEC << endl;

        begin_time = clock();
        for (uint64_t ii = 0; ii < iterations; ++ii)
        {
            y = x1;
            if (y < x2)
                y = x2;
        }

        std::cout << "RMAAx's : " << float( clock () - begin_time ) /  CLOCKS_PER_SEC << endl;

        begin_time = clock();
        for (uint64_t ii = 0; ii < iterations; ++ii)
        {
            if (x1 > x2)
                y = x1;
            else
                y = x2;
        }

        std::cout << "if Time: " << float( clock () - begin_time ) /  CLOCKS_PER_SEC << endl;

        begin_time = clock();
        for (uint64_t ii = 0; ii < iterations; ++ii)
        {
            y = x1 > x2 ? x1 : x2;
        }

        std::cout << "? Time: " << float( clock () - begin_time ) /  CLOCKS_PER_SEC << endl;
    }

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-19T19:24:04.683

Intel x86 具有提供浮点值快速比较的[指令(FCOMI/FCOMIP/FUCOMI/FUCOMIP)。](http://www.intel.com/software/products/documentation/vlin/mergedprojects/analyzer_ec/mergedprojects/reference_olh/mergedProjects/instructions/instruct32_hh/vc90.htm)你的 CPU 也可能有这样的指令。诀窍是弄清楚要编写什么 C++，以便最大限度地提高编译器使用这些指令的机会，而不是做一些更慢但更通用的事情。

乐观的建议是使用 std::max(float, float) 以希望其他人忽略那些嘲弄“微基准”和“过早优化”的人，并进行必要的研究以提供 std::max(float , float) 将使用您的硬件的专用指令。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-19T15:44:19.080

First, as others have said, profile your code and make absolute sure that this is something worth optimizing. If it is, read on: you can do it without branching. See [Down with fcmp: Conditional Moves For Branchless Math](http://assemblyrequired.crashworks.org/2009/01/04/fcmp-conditional-moves-for-branchless-math/) for more details.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-19T13:42:52.100

B 和 C 至少在理论上会编译相同的。我选择这些是因为除非`std::max`不是函数调用（例如宏），*否则*它们将是最快的。

**编辑**显然，`std::max`是一个模板函数调用，如您的表单 C. [http://www.cplusplus.com/reference/algorithm/max/](http://www.cplusplus.com/reference/algorithm/max/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-19T13:45:18.723

当谈到“最快”时，与往常一样的观察。您是否测量了最大计算的执行时间，并报告给流程的其余执行时间？这个“优化”决定是否对您的应用程序的执行时间有重大影响？

我 99% 确定您的提案之间的差异不值得考虑。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-19T13:45:59.207

真正知道的唯一方法是测量它们。它们可能因编译器而异，也可能因平台而异。

对每个循环运行 100,000 或 500,000 次迭代，并比较总执行时间。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-19T13:46:18.100

对它们进行基准测试并找出答案。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-19T13:48:26.083

而这种方式可能会更好？

```
y = x1;
if (y < x2)
    y = x2; 
```

编译器可能会更好地解释删除 else 条件。

Edit1：如果基准测试不要忘记做一半的测试，x1 大于 x2，另一半 x2 更大。否则结果将无法反映真实案例。

编辑 2：如果您在具有 1 或 2k 内存的嵌入式系统中工作，那么微优化在某种程度上很有用。而且，思考为什么每种情况下的时间不同，这是一个有趣的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-19T13:48:19.920

*b*`#define`或*c*作为宏很常见，并在整个代码中使用它。请注意，这仅在大多数情况下有效，并且如果您传入一个由非幂等运算符或具有副作用的函数调用修改的*x*或*y参数，它将失效。*例如：

 ***```
#define MAX(x,y) (((x) < (y)) ? (y) : (x))
...
MAX(i++, ++j); //won't work properly, the ++'s will get executed twice.
MAX(changeKSomehow(k), changeLSomehow(L)); //won't work, the functions will get called twice. 
```

事实证明，至少对于 GNU libstdc++，std::max 的实现几乎相同，并且使用了`inline`提示。编译器应该能够在适当的时候得到提示（当 < 操作符使用足够少的指令时，如果内联不会导致大量的 I$ 压力）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-19T21:51:34.917

在存在体面的优化器的情况下，它们是等价的。

# .net - 如何将 VS2005 的 Crystal Reports 重新分发到 Vista？

> ID：882843
> 
> 赞同：2
> 
> 时间：2009-05-19T13:42:45.313
> 
> 标签：.net, deployment, visual-studio-2005, crystal-reports

我有一个使用 Visual Studio 2005 构建的 WinForms 应用程序，包括 VS2005 附带的用于运行和查看报表的水晶报表。我的安装程序使用合并模块 CrystalDecisionsRedist2005_x86 来安装 Crystal。这一切都很好，直到我尝试在 Vista 上安装，当我注册 Crystal dll 时出错。似乎这是一个众所周知的问题，正如在[此处](http://community.installshield.com/showthread.php?t=176271&highlight=Crystal+Reports+Vista)、[此处](http://social.msdn.microsoft.com/forums/en-US/vscrystalreports/thread/bac40364-61c2-4074-9358-a159aa9cc8e7)和[此处](http://community.installshield.com/showthread.php?t=168446&page=2)等论坛中所报告的那样，但是对于这些事情，我找不到普遍接受的解决方案，并且移动其站点的业务对象也无济于事。（需要stackoverflow的问题的完美示例）。

那么如何将 Crystal Reports for VS2005 应用程序部署到 Vista 中呢？

**更多信息**：

记录到事件日志的 Vista 错误成对出现，如下所示：

> “C:\Program Files\Common Files\Business Objects\2.7\bin\ExportModeller.dll”的激活上下文生成失败依赖程序集 Microsoft.VC80.ATL，processorArchitecture="x86".... 找不到。请使用 sxstrace.exe 进行详细诊断。

然后

> 产品：错误 1904。模块“C:\Program Files\Common Files\Business Objects\2.7\bin\ExportModeller.dll”注册失败。HRESULT -217010895。请联系您的支持人员。

等等各种其他的dll。

我的安装程序包括 ATL 的合并模块，但我猜它们没有被首先应用。在我的 Wise Installer Edition 中无法指定首先应用哪些合并模块。

我尝试安装 Crystal Reports X1 合并模块，但徒劳地希望它向后兼容 10。但是，虽然安装工作正常，但当我尝试运行报告时出现异常，并出现参考错误，因为它找不到合适的程序集。不会太令人惊讶。

我还尝试使用 Business Objects 支持软件下载站点提供的 CrystalReports10_NET_EmbeddedReporting.msm 合并模块（文件标题为“用于 CR 10 .NET 部署的合并模块 -En”）

我将继续从各种线程中尝试的事情列表，但如果有人有“答案”，我会喜欢它。

谢谢。

**当前解决方案**

我当前的方法/解决方法是在安装我的 MSI 之前在 Vista 机器上安装[Microsoft Visual C++ 2005 SP1 Redistributable Package (x86) 。](http://www.microsoft.com/downloads/details.aspx?familyid=200B2FD9-AE1A-4A14-984D-389C36F85647&displaylang=en)这允许我的普通 MSI 在 Vista 上正常工作，但并不理想，因为我只想分发单个 exe。

我也在 SAP/CrystalReports 论坛上提出了这个[问题](https://www.sdn.sap.com/irj/scn/thread?forumID=314&threadID=1344939)。

**更多信息**

.NET SP1 的 CR的[发行说明指出](http://file:///C:/Program%20Files/Common%20Files/Business%20Objects/Patches/Crystal%20Reports%20for%20Visual%20Studio%20.NET%202005%20Service%20Pack%201/Backup%20of%20CRNET20WIN32X86_SP1/11.0.25.5000_5-21-20091700/readme.pdf)存在此问题，现在已解决：

> ADAPT00738607
> 
> 说明：在 Vista 上使用 Crystal Reports for Visual Studio 2005 合并模块 (.msm) 安装自定义安装项目时，多个 COM 组件无法注册。例如“模块 C:\Program Files\Common Files\Business Objects\2.7\bin\ExportModeller.dll 注册失败。HRESULT -2147010895。请联系您的支持人员。” 如果再次运行 setup.exe 并选择修复，安装将继续，没有任何错误，并且可以注册组件。
> 
> 新行为：此问题已解决

但是，我仍然没有找到任何更新的合并模块，所以我不清楚这个问题在哪里得到了解决。如果您不想单独安装 C++ 包，他们建议的解决方法（修复安装）值得考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-09T22:24:12.407

我今天遇到了这个问题。似乎应该有一种更简单的方法来让 msi 文件安装其先决条件。

谷歌搜索给出了解释问题的以下[博客。](http://blogs.msdn.com/astebner/archive/2007/01/09/problems-with-custom-actions-that-depend-on-the-visual-c-8-0-runtime-files-on-windows-vista.aspx)它列出了以下解决方案：

1.  通过 setup chainer 使用可再发行包安装 VC 8.0 运行时
2.  安装 VC 8.0 运行时文件的私有副本。
3.  在构建二进制文件时静态链接到 VC 8.0 运行时，这样它们就不会依赖于全局程序集
4.  使用在 InstallFinalize 之后安排的提交自定义操作或自定义操作。
5.  将自注册信息转换为标准 MSI 创作并停止使用自注册。

我不能使用选项 1，因为我想要一个 MSI 文件。
我不能使用选项 3 或 5，因为它是第三方库。
我不想使用选项 2，因为我不想处理文件的私人副本。

这留下了选项 4。这似乎不是最好的方法，但它对我有用。我编辑了 CrystalDecisionsRedist2005_x86 合并模块（使用 InstallShield）并删除了 SelfReg 表中的条目。然后，我创建了一个计划在 Commit 上的自定义操作来注册我删除的文件。

# windows - 将文件拖到 .exe 会设置不同的工作目录

> ID：882850
> 
> 赞同：5
> 
> 时间：2009-05-19T13:43:59.600
> 
> 标签：windows, command-line, windows-explorer

如果我有一个常规的控制台应用程序（或任何其他应用程序）并使用 Windows 资源管理器将文件拖到 .exe 文件上（以便将该文件用作“命令行输入”），则设置当前目录到其他目录（我的主文件夹？），而不是应用程序所在的目录。如果我通过双击启动应用程序，则当前目录设置正确。

这是什么原因？有没有办法将应用程序的文件夹用作当前目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T14:01:34.120

寻找一个原因，我在[autoitscript.com](http://www.autoitscript.com/forum/index.php?showtopic=40026)上找到了这个：

> [应用程序] 简单地继承 Explorer 的工作目录

这与我自己的观察一致，例如键盘上的可编程键。

我的解决方法是重置工作目录。在 C# 中，您可以这样做：

```
System.Environment.CurrentDirectory = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location); 
```

当您在 Linux 上不使用命令行启动单声道应用程序时，您也必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-16T00:25:24.770

这正是为什么您的应用程序一开始不应该依赖工作目录的原因。文件的完整路径将在命令行中指定。如果需要，解析它的路径。

# c# - 在哪里声明接口？

> ID：882853
> 
> 赞同：3
> 
> 时间：2009-05-19T13:44:35.667
> 
> 标签：c#, .net

我正在处理一个具有不同组件的项目（想象一个打印机模块、一个成像模块等）。在这个项目中，所有接口都在一个接口程序集中声明（想象 Interfaces.dll 与接口 IPrinterModule、IImagingModule 等）。

因为我是一名牛仔编码员；）我必须询问 SO 社区这是否真的是最佳实践，或者如何以更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T13:46:57.223

这对我来说听起来不错——有一个单独的接口程序集是很常见的，特别是对于有很多插件的系统。

您很可能正在使用这些接口在正交组件之间创建松散耦合的桥梁（顺便说一下，这对您有好处）。以真正模块化的方式做到这一点的唯一方法是为这些接口使用单独的程序集，以便实现接口或引用它的每个类型实际上都使用相同的接口类型。实际上，您唯一的其他选择是将整个系统中的所有内容编译到一个程序集中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T13:49:18.593

我们采用了类似的方法。您肯定希望将接口与其（当前）实现分开，因此将来很容易提供不同的实现。Martin Fowler 将其描述为[分离接口](http://www.martinfowler.com/eaaCatalog/separatedInterface.html)模式。

如果接口相互依赖（IPrinter 是否返回 IImageXXX？），那么您确实需要它们在同一个程序集中以避免循环构建依赖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:48:47.343

如果存在循环引用，那么将所有接口保存在单独的程序集中将对您有所帮助。最近几天我在学习工作流时阅读了许多代码示例（来自 microsoft、codeproject 和其他站点），接口是在实现它的程序集中声明的。

就像 IPrinterModule 将在实现的程序集中声明

# powershell - 使用 PowerShell 查看全局程序集缓存 (GAC) 的内容

> ID：882854
> 
> 赞同：17
> 
> 时间：2009-05-19T13:44:36.340
> 
> 标签：powershell, gac

有没有办法使用 PowerShell 查看 GAC 的内容？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-19T16:42:34.337

另一种选择是[PowerShell 社区扩展](http://pscx.codeplex.com)安装 GAC 提供程序，因此您可以这样做：

```
dir gac: 
```

如果您使用的是 PowerShell V2，请务必获取 1.2 Beta。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-14T11:25:27.437

如[文档中所述](https://msdn.microsoft.com/en-us/library/yf1d93sz%28v=vs.110%29.aspx)：

> 从 .NET Framework 4 开始，全局程序集缓存的默认位置是 %windir%\Microsoft.NET\assembly。在早期版本的 .NET Framework 中，默认位置是 %windir%\assembly。

您可能希望在适当的子目录中搜索，甚至在它们两者中搜索。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-19T14:32:01.907

列出 GAC 中的条目；

```
gacutil -l 
```

在 powershell 中，您可以解析上面的文本输出。我不知道检查 GAC 的托管接口。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-03T22:04:32.147

我有同样的问题。这个问题在 .Net 4.0 中变得更加突出，并且没有可用于查看内容的 Windows Explorer shell 插件。GacUtil 可以工作，但不够灵活，需要大量安装。PowerShell Community Extensions 选项的功能受到限制，并且包含我不需要的许多其他 CmdLet。因此，我编写了自己的 PowerShell 模块来查看和更改 GAC。它可以在[http://powershellgac.codeplex.com上找到](http://powershellgac.codeplex.com)

该项目已移至 GitHub。您现在可以在以下位置找到它：

[https://github.com/LTruijens/powershell-gac](https://github.com/LTruijens/powershell-gac)

它也可以在 PowerShell 库中找到：

[https://www.powershellgallery.com/packages/Gac/1.0.1](https://www.powershellgallery.com/packages/Gac/1.0.1)

```
# Show the assemblies in the GAC, including the file version
Get-GacAssembly SomeCompany* | Format-Table -View FileVersion 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T13:46:51.437

您可以仅从命令提示符处执行此操作：

```
cd C:\Windows\assembly
dir 
```

GAC 具有特定的目录结构，您不应使用命令提示符移动或删除其中的内容 - 而应使用 windows explorer (gui) 或 gacutil (cli)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-05T14:06:19.680

如果要在 GAC 中搜索特定程序集。

另请注意，由于 MS 已更改 GAC 结构，您可以从根目录使用 -Recurse 选项来搜索所有 GAC。

```
CD C:\Windows\assembly 
ls -Recurse | ?{$_.Name -like "*log4net*"} 
```

# java - Java 和 C++ 中的迭代器有什么区别？

> ID：882855
> 
> 赞同：4
> 
> 时间：2009-05-19T13:44:37.447
> 
> 标签：java, c++, iterator

Java 中 Iterator 的实现与 C++ 中的实现有何不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T14:07:27.527

在当前的 C++ (98) 标准库（特别是以前称为 STL 的部分）中定义了一种非常接近 C 指针（包括算术）的迭代器形式。因此，他们只是指向某个地方。为了有用，您通常需要两个指针，以便您可以在它们之间进行迭代。我了解 C++0x 引入了更像 Java 迭代器的范围。

Java 在 1.2 中引入了`Iterator`(and `ListIterator`) 接口，很大程度上取代了更冗长的 Enumerable。Java 没有指针算法，所以没有必要表现得像一个指针。他们有一种`hasNext`方法来查看他们是否已经走到了尽头，而不是需要两个迭代器。缺点是它们不太灵活。系统需要方法，`subList`而不是在两个迭代器之间迭代是包含列表中的特定点。

风格上的一个普遍差异是 C++ 通过模板使用“静态多态”，而 Java 使用接口和常见的动态多态。

迭代器的概念是提供粘合剂以允许分离“算法”（真正的控制流）和数据容器。这两种方法都做得相当好。在理想情况下，“正常”代码应该几乎看不到迭代器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T13:47:13.977

C++ 没有指定迭代器是如何实现的。然而，它确实指定了它们的接口和它们必须提供的最小行为，以便与其他标准库组件一起工作。

例如，对于输入迭代器，标准规定迭代器必须可以通过 * 运算符取消引用。但是，它没有指定如何实现该运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T17:52:41.567

在 C++ 中，您会看到人们一直在传递迭代器。C++ 迭代器“指向”容器的特定元素。您可以取消引用迭代器来获取元素（您可以一遍又一遍地这样做）。您可以有效地擦除迭代器引用的元素。您还可以制作迭代器的副本（通过分配给另一个变量，或将迭代器按值传递给函数）以同时跟踪多个位置。C++ 中的迭代器可能会因容器上的某些操作而“无效”，具体取决于容器。当迭代器失效（其规则可能很复杂）时，使用迭代器的操作具有未定义的行为，并且可能（不一致地）使您的程序崩溃或返回不正确的结果；尽管在某些数据结构中（例如`std::list`)，迭代器通过容器的大多数修改保持有效。

在 Java 中，您看不到这种用法。Java 中的迭代器指向两个元素“之间”，而不是“在”一个元素。使用迭代器获取元素的唯一方法是将其向前移动以获取移动过的元素。当然这会改变迭代器的状态，而且你不能返回；除非你有`ListIterator`在这种情况下，您可以向前和向后移动（但是为了保持静止而必须向前和向后移动仍然很烦人）。你不能复制一个迭代器，因为接口没有公开一个公共的复制方法；因此，例如，您不能只将特定位置的标记传递给函数，而不向该函数提供对您拥有的相同迭代器的引用，从而允许它们更改迭代器的状态。在Java 中，迭代器将被容器的任何修改（至少在标准容器中）无效，除非通过迭代器自己的`add()`或`remove()`方法，这是过于保守的（例如，对 a 的大多数修改`LinkedList`不应该影响迭代器）。当您尝试使用无效的迭代器时，它会引发`ConcurrentModificationException`（混淆命名是因为它与并发无关）而不是可能导致未定义的行为，这很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T13:50:30.197

C++ 迭代器 (STL) 尝试通过运算符重载尽可能多地模仿指针语法。

标准规范定义了各种迭代器概念（如前向、双向、随机访问、输入、输出）。每个概念都应该匹配一个特定的接口（例如，++ 运算符用于前向迭代器以按顺序转到下一个元素，-- 用于双向，+、+= 用于随机访问等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T13:49:25.283

*实现*完全由标准库供应商/JRE 供应商分别用 C++/Java 定义。只要他们的行为符合各自的标准，他们就可以自由地实现他们想要的任何东西。

# visual-studio - 如何在测试运行期间将额外的测试信息写入屏幕？

> ID：882866
> 
> 赞同：0
> 
> 时间：2009-05-19T13:45:59.223
> 
> 标签：visual-studio, unit-testing

我想输出一些关于测试运行的附加信息，我可以快速查看这些信息。它不影响测试的结果。

我很熟悉，`Assert.Inconclusive(String)`但我希望测试自己通过/失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:01:53.917

在我看来，在调用 Assert 方法之前，最好使用 Trace.Write() 来发出信息性消息。这确实是一个偏好问题，但 Trace.Write() 似乎是完成这项工作的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:13:30.050

您还可以使用`TestContext.WriteLine()`编写有关测试运行的信息。

此信息将出现在测试运行结果窗口的“附加信息”标题下。

# c# - 记录 AD 用户操作（已删除用户）

> ID：882870
> 
> 赞同：3
> 
> 时间：2009-05-19T13:46:14.590
> 
> 标签：c#, .net, logging, active-directory

我们即将将 Intranet Web 应用程序从使用基于表单的专有安全性迁移到 Active Directory。该应用程序记录了各种用户操作，并且有大量与用户帐户相关的数据。我们的计划是迁移各种表中的所有这些 UserId 列：从链接专有系统的外键到 Active Directory GUID。两个系统之间的登录名相同，因此迁移不是问题。

但是，我们发现了一个主要问题：我们的安全策略规定必须从 Active Directory 中删除非活动用户。我们安全日志中的孤立 GUID 使这些条目对任何查看它们的人来说都毫无意义。

**应用程序如何维护关于已从 Active Directory 中删除的 GUID 的人类可读的基本信息（名称、登录名等）？**

我们考虑了以下选项。这些选项之一可能最终成为最佳选择，但我们希望做得更好：

*   非规范化日志表并存储名称/登录名而不是 GUID（对于日志来说还可以，对于活动数据来说不是那么多。）
*   维护 AD 对象信息的“缓存”，其中条目永远不会被删除
*   保留 AD 帐户但停用/锁定它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T14:07:06.963

正如 Tim 所说，我不会完全非规范化日志表，而是将相关的 AD 信息存储在 GUID 旁边。但是，如果您在其他区域需要此 AD 信息，请将其缓存在您的用户表中。我建议不要更改您的安全策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T13:52:21.113

对于日志记录，我赞成非规范化方法，但要保留 id。我将用户的 ID 与其他人类可读的识别信息一起存储。对于活跃用户，我仍然可以在连接中使用 id（如有必要）。对于非活动（已删除）用户，我有供审计员使用的可读表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T19:14:30.673

我们决定使用“缓存”表来存储映射到友好用户信息的 GUID 字典。这将需要一个抽象 AD 用户列表的视图，并从缓存中合并丢失的条目。

# c# - 有没有办法知道谁拥有一个对象的引用？

> ID：882884
> 
> 赞同：2
> 
> 时间：2009-05-19T13:48:07.847
> 
> 标签：c#, .net, memory-leaks, garbage-collection

有没有办法知道谁拥有一个对象的引用？

在我调用 GC.Collect 之后，我看到我的对象没有被 d'tor 最终确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T13:52:35.777

没有办法在代码中有效地做到这一点。追踪此类泄漏的最佳方法是使用 WinDbg 之类的工具。SOS 扩展有几个专门用于帮助追踪内存泄漏的命令。

Rico 就这个主题写了一篇详尽的博客文章：

*   [http://blogs.msdn.com/ricom/archive/2004/12/10/279612.aspx](http://blogs.msdn.com/ricom/archive/2004/12/10/279612.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T13:57:29.480

您应该调用[`GC.WaitForPendingFinalizers`](http://msdn.microsoft.com/en-us/library/system.gc.waitforpendingfinalizers.aspx)after`GC.Collect`以允许垃圾收集器清除 freachable 队列。由于 GC 在不同的线程中运行，因此您的应用程序可能在 GC 尝试终结任何需要终结的对象时继续运行。通过调用[`GC.WaitForPendingFinalizers`](http://msdn.microsoft.com/en-us/library/system.gc.waitforpendingfinalizers.aspx)，您将强制当前线程等到 GC 完成清除 freachable 队列（需要完成的项目的队列），然后再恢复执行。

不过话虽如此，我同意 Joel Coehoorn 的评论 - 当您不理会 GC 时，它的效果最好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T14:01:45.760

除了 Windbg，您还可以使用 .net 分析器。我已经做到了这两种方式 - 配置文件不会告诉你 Windbg 不能告诉你的任何事情，但是一个好的分析器会更友好一点。

Windbg 除了来自 JaredPar 的链接之外，Tess Ferrandez 还提供了一些关于在 .net 中使用 Windbg 的精彩文章。这是一篇内存泄漏文章：http: [//blogs.msdn.com/tess/archive/2006/01/23/516139.aspx](http://blogs.msdn.com/tess/archive/2006/01/23/516139.aspx)

Profiler：我对 SciTech 的 profiler 很幸运（不过，我不隶属于任何关系，这是一个很棒的工具）： http: [//memprofiler.com/](http://memprofiler.com/)

他们的网站上也有一些很棒的操作视频。

# smalltalk - 如何在吱吱声中动态更改方法的名称？

> ID：882885
> 
> 赞同：2
> 
> 时间：2009-05-19T13:48:12.680
> 
> 标签：smalltalk, squeak

我有一个类，我想在运行时更改特定方法的名称。我猜“行为”类中有一个方法可以做到这一点。但我就是找不到。有什么帮助吗？[吱吱声]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T17:36:21.197

用户执行此操作的正常方式是修改方法源并“接受”，然后删除旧版本。所以基本的 Squeak 不太可能包含一个单一的方法来做到这一点，尽管我可能是错的。

但是，例如，如果您安装 OmniBrowser，则有一种称为“重命名”的重构方法，您可以检查并找到执行此重构的代码。这是相当复杂的，首先因为重构是使用命令模式完成的，这涉及到一些重定向来解决，其次因为这是一个相当复杂的重构，其中包括修改调用站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T20:28:37.363

你的建议给我带来了巨大的危险。你想用这个来完成什么？

你的意思是你想改变你在运行时调用的方法的名称吗？如果是这样，那很容易。

做类似的事情：

```
|methodName|
methodName :=  self useMethod1 ifTrue: [#method1 ] ifFalse:[ #method2 ].
self perform: methodName. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-20T12:29:02.457

你最好使用重构

```
r := RenameMethodRefactoring 
    renameMethod: #foo:foo: 
    in: Foo
    to: #bar:bar:
    permutation: (1 to: #foo:foo: numArgs). 
r execute. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-18T06:31:11.533

尽可能避免在实际代码中使用巫术魔法。

话虽如此，您可以通过动态操作方法来做一些非常有趣的事情。

例如，Etoys 中的代码块被翻译成 Smalltalk 方法。其他[DSL](http://en.wikipedia.org/wiki/Domain-specific_language)实现也可以从类似的元编程技巧中受益。

经过一番试验后，我想出了以下代码来重命名一元方法：

```
renameMethod: oldMethod inClass: class to: newMethod
| oldSelector newSelector source parser |

oldSelector := oldMethod asSymbol.
newSelector := newMethod asSymbol.
oldSelector = newSelector ifTrue: [^self].

"Get method category"
category := (LocatedMethod location: class selector: oldSelector) category.

"Get method source code"
source := class sourceCodeAt: oldSelector.

"Replace selector in method source" 
(parser := class parserClass new) parseSelector: source.
source := (newSelector asString), (source allButFirst: parser endOfLastToken).

"Compile modified source"
class compile: source classified: category.

"Remove old selector"
class removeSelector: oldSelector 
```

如果您浏览 Squeak 代码的时间比我长一点，您可能会找到一种更简单的方法来执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-01T07:21:02.380

You can't change a method's name, really, because it doesn't have one.

An object's method dictionary maps Symbols to CompiledMethods. "Change the name of a method" means "move the CompiledMethod value from this key to that key".

# business-objects - BO 中的日期提示

> ID：882904
> 
> 赞同：0
> 
> 时间：2009-05-19T13:51:50.070
> 
> 标签：business-objects

我有一个接受日期输入的 webi 报告。我需要以“dd-Mmm-YYYY”格式从用户那里接收数据；然而，BO 呈现给用户用于日期选择的日历控件始终显示为 M/DD/YYYY HH:MM:SS AM/PM。

有没有办法控制这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-11T18:24:31.500

您是否尝试过将 Universe 设计器中的所有日期字段更改为您想要的格式？您可以在“对象属性”的选择语句框中使用 SQL 对其进行格式化，也可以通过右键单击并选择“对象格式...”来更改字段的格式

我很确定这会影响最终用户看到它的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-02T09:23:08.093

您可以在 cms 中的每个用户的用户设置的位置参数上设置日期格式（和所有其他格式），只需通过每个用户的 infoview 首选项。

中央管理主屏幕 -> 首选项 -> 首选查看区域设置 + 本地时区。或 infoview 的主屏幕 -> 首选项 -> 首选查看区域设置 + 本地时区。

这也将设置日期提示格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T23:29:21.163

还有另一种选择。

在 BO 服务器上有一个用于创建日历弹出窗口的 javascript 文件。

```
..\Tomcat55\webapps\AnalyticalReporting\viewers\cdz_adv\lib\calendar.js 
```

在这个文件中，有一个函数调用`CTFB_setFormatInfo`，如果传递一个日期格式，则使用它......如果没有，似乎有一个硬编码的默认值“MM/dd/yyyy hh:mm:ss a”。

我很确定这不会被其他十几种设置 BO 中找到的日期格式的方法（用户首选项、prn 文件、对象属性等）更新。

```
function CTFB_setFormatInfo(format,arrDays,arrMonth,AM,PM)
{
var o=this
o.arrMonthNames=arrMonth?arrMonth:_month
o.arrDayNames=arrDays?arrDays:_day
o.format=format?format:"MM/dd/yyyy hh:mm:ss a"
o.AM=AM?AM:_AM
o.PM=PM?PM:_PM
} 
```

我刚刚更新了这个文件——现在我得到了一致的 dd/mm/yyyy——当偏好没有通过时，没有讨厌的 mm/dd/yyyy 随机出现。

# web - 开发网站的资源

> ID：882913
> 
> 赞同：1
> 
> 时间：2009-05-19T13:52:40.487
> 
> 标签：web

任何人都可以推荐资源来学习如何开发网站，而不是 Web 应用程序？

我正在为一家咨询公司开发一个网站。我会对创建网站布局的最佳实践更感兴趣（用户吸引力，眼睛糖果，而不是眼睛疼痛）

谢谢

-M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T13:55:00.093

这是您的[第一个停靠港](http://www.opera.com/company/education/curriculum/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T13:55:58.937

这实际上取决于您要使用的语言、您当前的技能、谁将维护该站点、该站点将托管在什么操作系统上等等。

我怀疑你需要缩小你的问题。

*您*所说的网站而不是网络应用程序是什么意思？您是在谈论内容的动态性质还是其他内容？

**更新**

如果您正在寻找有关网站设计（视觉设计、UX 等）的讨论，那么我是 Smashing Magazine 的忠实粉丝。

[http://www.smashingmagazine.com/](http://www.smashingmagazine.com/)

它不经常谈论 MS 技术（ASP.NET 等），但它是查看有关“什么是伟大的网站”的讨论和论文的好地方。最近的一些例子：

[http://www.smashingmagazine.com/2009/05/15/optimizing-conversion-rates-its-all-about-usability/](http://www.smashingmagazine.com/2009/05/15/optimizing-conversion-rates-its-all-about-usability/)

[http://www.smashingmagazine.com/2009/05/14/non-profit-website-design-examples-and-best-practices/](http://www.smashingmagazine.com/2009/05/14/non-profit-website-design-examples-and-best-practices/)

订阅他们的 RSS 提要，看看那些涂色的人在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:17:05.743

除非您有艺术倾向，否则我建议您将模板设计购买或承包给该领域的熟练人员。

每年 60 美元，您可以在以下站点无限下载和无限使用所有模板： [http ://www.dreamtemplate.com/](http://www.dreamtemplate.com/)

这里还有更多： [http ://www.templatemonster.com/website-templates.php](http://www.templatemonster.com/website-templates.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T13:56:02.977

简直是我见过的最好的。

我也会 - 因为我刚刚被提醒使用它

[http://www.webmonkey.com/](http://www.webmonkey.com/)

[http://w3schools.com/](http://w3schools.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T13:57:09.840

[http://www.w3schools.com/](http://www.w3schools.com/)

对于纯粹的信息网站，html 和 css 可能会很多，但如果你只是想把内容放到互联网上，我想我会推荐使用[wordpress](http://wordpress.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-19T14:24:36.930

如果您说德语或法语，[http://www.selfhtml.org](http://selfhtml.org)是一个很好的资源。

否则，我会推荐[http://www.w3schools.com/](http://www.w3schools.com/)或[http://htmldog.com/](http://htmldog.com/)。两者都非常好，因为他们真正深入了解此事并从一开始就讲述标准。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T14:26:14.523

sitepoint.com

他们最好的内容包含在他们的书中，但他们的文章也很好。涵盖设计最佳实践和网络标准，但也有关于网页设计业务和管理客户的好技巧。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T14:57:45.660

您可能想查看[alistpart](http://www.alistapart.com/)网站。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-19T13:56:50.433

[http://www.w3schools.com/](http://www.w3schools.com/)是一个好的开始。

# iphone - 如何从 UIAlertView 获取输入？

> ID：882915
> 
> 赞同：12
> 
> 时间：2009-05-19T13:53:33.980
> 
> 标签：iphone, objective-c, cocoa, uikit

我想使用 UIAlertView 将玩家姓名作为输入。是否可以在 UIAlertView 上添加 textField？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-02-28T02:35:29.737

从 iOS 5 开始，UIAlertView 提供了：将 alertViewStyle 属性更改为以下之一：

```
UIAlertViewStylePlainTextInput (1 text field)
UIAlertViewStyleSecureTextInput (1 password field)
UIAlertViewStyleLoginAndPasswordInput (both a text field and password field) 
```

然后使用`textFieldAtIndex:`获取您想要的文本字段。这样，您甚至可以使用`alertViewShouldEnableFirstOtherButton:`委托方法来启用按钮。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-19T17:27:19.697

是的，这绝对是可能的，而且它不是黑客攻击。您需要继承 UIAlertView 并将控件放入其中。由于它是一个子类，它将保持相同的外观和感觉等。

有关完整的详细信息，请参阅Jeff LaMarche（Apress 的《Beginning iPhone Development》的合著者）的[本教程。](http://iphonedevelopment.blogspot.com/2009/02/alert-view-with-prompt.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T13:57:38.107

是的，但并非没有一些黑客行为，请参阅[上一个问题。](https://stackoverflow.com/questions/551530/customizing-uialertview) 您必须直接操作 UIAlertView 的子视图并添加 UITextField，然后调整 UIAlertView 框架的大小。你最好创建自己的视图。

# asp.net-mvc - 在 BaseController 的 OnActionExecuting 之前调用 FilterAttribute 的 OnActionExecuting

> ID：882916
> 
> 赞同：6
> 
> 时间：2009-05-19T13:53:36.837
> 
> 标签：asp.net-mvc, action-filter

我有一个通过覆盖`BaseController`将一些数据放入集合中的.`ViewData``OnActionExecuting`

现在我有一个`ChildController`不需要该视图数据的操作。

为此，我创建了一个`DontPopulateViewData`ActionFilterAttribute，它在 上设置了一个布尔值，以`BaseController`防止`BaseController`填充 viewdata。

问题：ActionFilters`OnActionExecuting`方法是在一个 in 之后`BaseController`而不是之前调用的。

ActionFilters 是否总是`OnActionExecuting`在基本控制器中被覆盖之前被调用，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-19T20:42:19.893

除了 Marwan Aouida 发布和建议的内容（在基类上使用 ActionFilter）之外，我认为您无法创建在基类上的 OnActionExecuting() 重载之前执行的 ActionFilter。以下代码：

```
 [MyActionFilter(Name = "Base", Order = 2)]
 public class MyBaseController : Controller
 {
     protected override void OnActionExecuting(ActionExecutingContext filterContext)
     {
        Response.Write("MyBaseController::OnActionExecuting()<br>");
        base.OnActionExecuting(filterContext);
     }

     protected override void Execute(System.Web.Routing.RequestContext requestContext)
     {
        requestContext.HttpContext.Response.Write("MyBaseController::Execute()<br>");
        base.Execute(requestContext);
     }

    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        Response.Write("MyBaseController::OnActionExecuted()<br>");
        base.OnActionExecuted(filterContext);
    }
 }

 public class MyActionFilter : ActionFilterAttribute
 {
    public string Name;

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        filterContext.HttpContext.Response.Write("MyActionFilter_" + Name + "::OnActionExecuted()<br>");
        base.OnActionExecuted(filterContext);
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.HttpContext.Response.Write("MyActionFilter_" + Name + "::OnActionExecuting()<br>");
        base.OnActionExecuting(filterContext);
    }
 }

 public class MyTestController : MyBaseController
 {
     [MyActionFilter(Name = "Derived", Order = 1)]
     public void Index()
     {
        Response.Write("MyTestController::Index()<br>");
     }
 } 
```

产生这个输出：

```
MyBaseController::Execute()
MyBaseController::OnActionExecuting()
MyActionFilter_Derived::OnActionExecuting()
MyActionFilter_Base::OnActionExecuting()
MyTestController::Index()
MyActionFilter_Base::OnActionExecuted()
MyActionFilter_Derived::OnActionExecuted()
MyBaseController::OnActionExecuted() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T16:32:09.650

ActionFilterAttribute 类有一个名为“Order”的属性，您可以使用它来设置动作过滤器的执行顺序。
在您的情况下，您必须将 BaseController 中的过滤器属性的顺序设置为 2，并将 DerivedController 中的过滤器属性的顺序设置为 1：

```
[MyFilter(Order=2)]
public class BaseController:Controller
{

  public ActionResult MyAction() {

  }

}

[MySecondFilter(Order=1)]
public class DerivedController:BaseController
{

  public ActionResult AnotherAction() {

  }

} 
```

阅读本文了解更多信息：http: [//msdn.microsoft.com/en-us/library/dd381609.aspx](http://msdn.microsoft.com/en-us/library/dd381609.aspx)

注意：我没有测试这个。

# .net - Crystal XI R2 Server SP5...哪个 msi 文件？

> ID：882924
> 
> 赞同：1
> 
> 时间：2009-05-19T13:55:04.197
> 
> 标签：.net, crystal-reports, business-objects

由于在寻找答案时对 BO 和 Crystal 的支持非常糟糕，我想我会尝试在此处发布此内容。我们在服务器上遇到了 Crystal Reports 的一些问题，我想将其修补到 SP5。我终于找到了一个下载（即使这样我也很困惑是使用 SP5 还是 FP 5.2，所以我想我会先放 SP5，然后再尝试另一个。关于我的问题......当你解压缩 SP5文件您最终会得到两个 .msi 文件（CrystalReports11_5_Net.msi 和 CrystalReports11_5_Net_2005.msi）。

我们目前安装了 Crystal Reports XI Release 2 .Net 2005 Server。看着那我猜它会是 _2005.msi 文件，但我仍然想知道这两个文件的区别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T16:08:04.337

看起来您以某种方式获得了完整的安装程序（包括 SP5），但是是的，VS 2005 版本是 _2005 文件，而另一个版本是 VS.NET 2002 或 2003。有关更多信息，请参见[此处](http://devlibrary.businessobjects.com/businessobjectsxir2/en/en/CrystalReports_dotNET_SDK/crsdk_net_doc/doc/crsdk_net_doc/html/crconcrystalreportsdeploymentwindowsinstallerxir2.htm)。

我似乎找不到独立或增量 SP5 下载（令我惊讶的是），因此您可能需要使用找到的文件卸载/重新安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-21T06:54:03.993

FP 代表 Fix Pack，与 Windows 的累积更新非常相似。更新 BO 时，您将运行 SP5 安装程序，然后运行 ​​FP。

谢谢，

马特

# c - 将无符号整数存储到结构中

> ID：882926
> 
> 赞同：2
> 
> 时间：2009-05-19T13:55:27.130
> 
> 标签：c

我已经编写了这段代码，其中我将一个无符号整数分配给了两个不同的结构。实际上它们是相同的，但其中一个具有 __attribute__((packed))。

```
 #include 
  #include 

  struct st1{
    unsigned char opcode[3];
    unsigned int target;
  }__attribute__((packed));

  struct st2{
    unsigned char opcode[3];
    unsigned int target;
  };

  void proc(void* addr) {
    struct st1* varst1 = (struct st1*)addr;
    struct st2* varst2 = (struct st2*)addr;
    printf("opcode in varst1: %c,%c, %c\n",varst1->opcode[0],varst1->opcode[1],varst1->opcode[2]);
    printf("opcode in varst2: %c,%c,%c\n",varst2->opcode[0],varst2->opcode[1],varst2->opcode[2]);
    printf("target in varst1: %d\n",varst1->target);
    printf("target in varst2: %d\n",varst2->target);

  };

  int main(int argc,char* argv[]) {
    unsigned int* var;
    var =(unsigned int*) malloc(sizeof(unsigned int));
    *var = 0x11334433;

    proc((void*)var);

    return 0;
  } 
```

输出是：

```
opcode in varst1: 3,D,3
opcode in varst2: 3,D,3
target in varst1: 17
target in varst2: 0 
```

鉴于我正在存储这个数字 0x11334433 == 00010001001100110100010000110011

我想知道为什么这是我得到的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T14:07:08.557

这与数据对齐有关。大多数编译器会在地址边界上对齐数据，这有助于提高一般性能。因此，在第一种情况下，具有打包属性的结构，在 char [3] 和 int 之间有一个额外的字节，以在四字节边界上对齐 int。在缺少填充字节的打包版本中。

```
byte  :      0       1         2         3      4   5   6   7
st1   : opcode[0] opcode[1] opcode[2] padding |----int------|
st2   : opcode[0] opcode[1] opcode[2] |-------int--------| 
```

您分配一个 unsigned int 并将其传递给函数：

```
byte  :      0       1         2         3      4   5   6   7
alloc :   |-----------int------------------| |---unallocated---|
st1   : opcode[0] opcode[1] opcode[2] padding |----int------|
st2   : opcode[0] opcode[1] opcode[2] |-------int--------| 
```

如果您使用的是小端系统，那么最低八位（最右边）存储在字节 0 (0x33)，字节 1 有 0x44，字节 2 有 0x33，字节 4 有 0x11。在 st1 结构中，int 值映射到超出分配数量末尾的内存，而 st2 版本 int 的最低字节映射到字节 4，0x11。所以 st1 产生 0 而 st2 产生 0x11。

您很幸运，未分配的内存为零，并且您没有进行内存范围检查。在这种情况下，写入 st1 和 st2 中的 int 最坏的情况可能会损坏内存，产生内存保护错误或什么也不做。它是未定义的并且依赖于内存管理器的运行时实现。

一般来说，避免`void *`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T14:01:51.640

您的字节如下所示：

00010001 00110011 01000100 00110011

虽然很明显你的字节顺序是错误的，实际上它们是这样的：

00110011 01000100 00110011 00010001

如果您的结构被打包，那么前三个字节与操作码相关联，第四个字节是目标 - 这就是为什么打包数组的目标为 17 - 0001001 二进制。

解压后的数组用零填充，这就是为什么 varst2 中的 target 为零的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T14:00:32.220

*   %c 将参数解释为字符的 ascii 代码并打印该字符
*   3的ASCII码是0x33
*   D的ASCII码是0x44
*   17 是 0x11

根据处理器体系结构，int 存储小端或大端 - 您不能依赖它按顺序进入结构的字段。

解压版本中的 int 目标超过了 int 的位置，所以它保持为 0。

# asp.net - ASP.NET - 脚本和 css 压缩

> ID：882937
> 
> 赞同：6
> 
> 时间：2009-05-19T13:56:51.557
> 
> 标签：asp.net, javascript, css, compression

ASP.NET 中是否有任何本机压缩（用于 javascript/css 文件）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-06-14T23:50:47.493

试试唧唧喳喳。它可以混合、缩小和验证您的 javascript、样式表和无点文件。您可以使用 YUI Compressor 或 Google Closure Compiler。

[http://chirpy.codeplex.com/](http://chirpy.codeplex.com/)

或者，有关更多信息，请查看：

[http://www.weirdlover.com/2010/05/22/visual-studio-add-in-for-dotless-js-and-css-files/](http://www.weirdlover.com/2010/05/22/visual-studio-add-in-for-dotless-js-and-css-files/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-19T14:10:28.410

你可以使用[Packer](http://smallsharptools.com/Projects/Packer/)。

此实用程序支持 JavaScript 压缩和/或“缩小”，以及 CSS“缩小”。

它可用作命令行实用程序或 MSBuild 任务。通过这种方式，您可以将其集成到您的构建过程/Visual Studio 项目中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-19T14:10:47.690

在[Professional ASP.NET 3.5](https://rads.stackoverflow.com/amzn/click/com/0470187573)的附录中， Scott Hanselman 谈到了[Packer for .NET](http://svn.offwhite.net/trac/SmallSharpTools.Packer/wiki)。这将与 MSBuild 集成并打包用于生产部署等的 javascript 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T14:04:56.843

IIS 中支持 Gzip/Deflate 压缩，兼容除 IE6 之外的所有现代浏览器。对于 IIS 7，请查看此页面：[http ://www.iis.net/ConfigReference/system.webServer/httpCompression](http://www.iis.net/ConfigReference/system.webServer/httpCompression)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T21:53:54.787

除了其他答案和评论，您可以使用 Yahoo! 的[YUI Compressor](http://developer.yahoo.com/yui/compressor/)并将其设置为[MSBuild 任务](http://www.coderjournal.com/2008/05/how-to-create-a-yui-compressor-msbuild-task/)，以将其集成到您的构建和部署过程中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-01-16T15:08:04.077

尝试使用[StyleManager](http://www.gstylemanager.com)进行 CSS 组合和缩小。它在引擎盖下使用 YUI Compressor。

它的用法很像 asp.net 的 ScriptManager，所以很快就习惯了。添加到您的项目中也很容易，只需一分钟。

最重要的是——它也结合了你的 CSS 文件。因此，与其下载 10 个 CSS 文件，不如将其下载为 1 个，这些文件也将被压缩等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-10T03:14:04.063

我已经为我写了一些东西，你可以在这里下载： [http ://www.picnet.com.au/blogs/Guido/post/2009/12/10/Javascript-runtime-compilation-using-AspNet-和-Googles-Closure-Compiler.aspx](http://www.picnet.com.au/blogs/Guido/post/2009/12/10/Javascript-runtime-compilation-using-AspNet-and-Googles-Closure-Compiler.aspx)

它使用 Google 的闭包编译器，非常棒。

谢谢

圭多

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-12-12T19:36:38.900

这是我的方式：使用 MVC。通过 MVC 控制器的操作处理 js|css 内容。将多个文件合并为一个。在将脚本存储在缓存中之前，即时缩小和混淆脚本|css。缓存结果。使用缓存依赖。为动态内容启用 gzip。在缓存功能之前启用 gzip。

一切都可以通过使用[ASP.NET MVC Js/Css Composer/Compressor](http://compose.codeplex.com)在操作方法上添加自定义属性来完成。

样本：

```
public class JsController : Controller
{
    [Utility.Processors.JsCompress]
    [OutputCache(Duration = 3600)]
    public ActionResult Jquery()
    {
        return View();
    }
} 
```

您可以从 CustomTextPostProcessingAttribute 派生并根据需要对任何类型的文本内容进行自己的后处理。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-18T20:59:38.333

我今天刚学到一些东西：你可以[通过 windows 控制台运行 JavaScript](http://www.phpied.com/cssminjs-in-windows-shell/)。我是 cssmin.js 的粉丝；所以，这个加上windows控制台=赢！您所要做的就是下载 cssmin.js，将其放在您的 Web 项目的文件夹中，然后在 Visual Studio 中添加以下构建后事件：

```
type "$(ProjectDir)css\*.css" | cscript //NoLogo "$(SolutionDir)tools\cssmin.js" > "$(ProjectDir)css\core.min.css" 
```

这样做使您不必[像 ajaxmin 那样](https://ajaxcontroltoolkit.codeplex.com/wikipage?title=Quick%20Start)编辑您的项目。

# c - 从高级语言过渡到 C 的最佳方法是什么？

> ID：882943
> 
> 赞同：1
> 
> 时间：2009-05-19T13:57:47.153
> 
> 标签：c, language-features

我是一名网络编码员：我目前喜欢 AS3 并处理 PHP。我拥有一台 Nintendo DS，想试试 C。

从更高的层面来看，哪些基本的东西/生物舒适会消失？我找不到 [for... in] 循环，所以我认为它们不存在。看起来我将不得不虔诚地声明事情，并且我假设我没有对象（我之前在 PHP 中处理过）。

哈希表？有趣的数据类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T15:12:48.750

总结一下，你基本上会得到：

*   类型变量
*   职能
*   指针
*   标准库

然后，你做剩下的——这可能有点太简单了，但这是一个关于要面对什么的粗略想法。

开始可能会令人生畏，并且可能需要克服学习曲线。以下是您可能会遇到的一些减速带：

**细绳？什么字符串？**

要习惯的一件大事是字符串。在 C中没有 a 这样的东西`string`。字符串是一个“`null`终止字符数组”（有时称为[C 字符串](http://en.wikipedia.org/wiki/C_string)），这基本上意味着一个类型的数组，`char`最后一个元素是 a `\0`( `char`value `0`)。

在内存中，`char`长度为 4 的数组包含`Hi!`如下所示：

```
char[0] == 'H'
char[1] == 'i'
char[2] == '!'
char[3] == '\0' 
```

此外，字符串不知道它们自己的长度（在 C 中没有免费提供的“对象”之类的东西），因此需要使用标准库调用`strlen`，这或多或少是一个`for`遍历字符串的循环，直到它击中了一个`\0`角色。（这意味着它是一个 O(N) 操作——字符串越长，查找长度所需的时间就越长，这与`string`现代语言中大多数实现的 O(1) 操作不同。）

**垃圾收集？**

C 中没有垃圾收集器这样的东西。实际上，您需要自己分配和释放内存：

```
/* Allocate enough memory for array of 10 int values. */
int* array_of_ints = malloc(sizeof(int) * 10);

/* Done with the array? Don't forget to free the memory! */
free(array_of_ints); 
```

在分配内存后未能清理可能会导致称为[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)的事情，我相信您以前听说过。

**指点！**

和往常一样，当我们谈论 C 时，我们不能忘记[指针](http://en.wikipedia.org/wiki/Pointer_(computing))。对变量的引用和取消引用指针的整个概念可能是一个令人头疼的概念，但是一旦你掌握了它，它实际上并不算太糟糕。

除了你期望它以一种方式工作的时候，但你发现你对指针的理解不够好，它实际上做了其他事情——正如他们所说，去过那里，做过那个。

哦，指针可能是您第一次真正看到程序崩溃到足以让操作系统对您大喊大叫的情况。计算机不太[喜欢](http://xkcd.com/371/)[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)。

**类型**

C 中的所有变量都有类型。C 是一种[静态类型语言](http://en.wikipedia.org/wiki/Static_typing#Static_typing)，这意味着将在编译时检查变量类型。一开始这可能需要一些时间来适应，但也可以看作是一件好事，因为它可以减少运行时错误，例如尝试将数字分配给字符串的类型错误。

但是，可以执行[类型转换](http://en.wikipedia.org/wiki/Type_conversion)，因此可以将`int`类型（整数值）转换为`double`类型（浮点类型值）。但是，无法尝试将 an`int`直接转换为类似`char*`.

因此，例如，在某些语言中，允许以下内容：

```
// Example of a very weakly-typed pseudolanguage with implicit typecasts:
number n = 42
string s = "answer: "
string result = s + n  // Result: "answer: 42" 
```

在 C 中，必须调用一个[`itoa`](http://en.wikipedia.org/wiki/Itoa)函数来获取一个 的`char*`表示`int`，然后使用它[`strcat`](http://en.wikipedia.org/wiki/Strcat)来连接两个字符串。

**结论**

话虽如此，从一门高级语言学习 C 语言可能会让人大开眼界，而且一开始可能很有挑战性，但是一旦你掌握了它，使用起来会很有趣。

我建议开始尝试使用 C 编译器，并拥有一本好书或参考书。

我想很多人都会推荐[K&R这本书](http://en.wikipedia.org/wiki/The_C_Programming_Language_(book))，这确实是一本很棒的书。

起初，我不认为推荐 K&R 作为第一本 C 书是一个好主意，因为它可能有点困难，但仔细想想，我认为这是一本非常全面且写得很好的书，如果您已经有一些编程经验，那么对于进入 C 语言可能会有好处。

祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T14:01:05.993

嗯......你可能会受到文化冲击。[这些](http://www-user.tu-chemnitz.de/~anhe/DOCU/C/C/////SYNTAX/keywords.html)是 C 语言中的 32 个标准关键字，其中包括基本类型。

C 的标准库非常实用（可能超出人们的预期），但与高级语言所提供的相比非常非常薄。看不到哈希表，您可以正确地假设 C 没有对对象的句法或语义支持。

无论如何都可以编写漂亮的面向对象的代码，但是您将不得不跳过一些障碍，并且由于该语言对您没有帮助，因此需要手动完成更多工作。例如，请参阅[GTK+](http://www.gtk.org/) UI 工具包，了解精心设计的面向对象的 C 库/API 示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T14:24:47.083

> 我是一名网络编码员：我目前喜欢 AS3 并处理 PHP。我拥有一台 Nintendo DS，想试试 C。

你为什么想做C编程？你的理由是什么，你希望达到什么目的？是为了给任天堂DS写软件吗？

> 从更高的层面来看，哪些基本的东西/生物舒适会消失？

鉴于您的背景，我认为您个人会错过缺乏动态类型支持的情况，换句话说，您必须在 C 程序中非常明确，您的数据必须使用正确的类型指定，以便编译器知道什么类型您正在使用的数据。这也适用于任何类型的内存管理，即基本上任何一旦你开始使用非 POD 的数据结构。

例如，您将在 php 中执行以下操作：

```
function multiply(x) {
 return (x*x);
} 
```

你必须在 C 中做这样的事情：

```
int multiply(int x) {
 return (x*x);
} 
```

虽然这些看起来很相似，但有很大的不同，即类型限制：php 版本也适用于浮点值，而在 C 中，您必须显式提供不同类型和值范围的版本（C 类型被限制为一定范围）。

> 我找不到 [for... in] 循环，所以假设它们不存在

在 C 中，它看起来更像以下内容：

诠释 c; for (c=0;c<=10;c++) { // 循环体 }

> 看来我将不得不虔诚地宣布事情

是的，非常如此——远远超过你所欣赏的

> 我假设我没有对象（我之前在 PHP 中处理过）。

正确，没有对象-但仍然可以使用其他方式模拟 OOP，例如 function(struct obj)

根据您的目标和动机，我认为您可能会发现 C 是一种非常令人沮丧的语言来开始认真的编程，您可能想研究一些相关的替代方案，例如 Java。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T14:02:43.400

动态数组和垃圾收集。它不是内置于 C 语言中的，因此您需要自行开发或使用预先存在的解决方案。

标准程序是您自己管理内存，这听起来可能很可怕，但实际上并非如此。例如，在 AS3 和 PHP 中，您可以创建一个数组并在完成后忘记它。在 C 中，您必须确保自己释放它，否则内存会泄漏并且可能/将会发生坏事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T14:26:32.353

你会特别想念自动内存管理和语义上有意义的数据类型，如字符串、表格等。然而，学好 C 是很有启发性的，即使你可能不想将它用于应用程序级编程，所以我建议你拿一本“K&R”（Kernighan 和 Ritchie 的开创性书籍）并试一试——你'会在网络上找到大量免费库供您使用和学习，尽管您必须训练自己使用正确的内存管理启发式......快乐学习！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T15:37:56.710

我只是在网上做一些研究，似乎有可能使用 lua 在“nintendo DS”上进行开发，这实际上可能是熟悉高级语言的人开始进行嵌入式开发的最简单方法，无需从 HLL 迁移到 C: [microlua](http://microlua.risike.com/)时，牺牲了太多的 HLL 功能并且没有经历不可避免的文化冲击，这里是[API 文档](http://docs.google.com/Doc?id=dhhg3sq4_25dbbj2qtn&hl=en)。

因此，您可能想试一试，可能使用模拟器作为初学者。

随时通知我们！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T14:21:31.833

我很确定你想看 C++，而不是 C。C++ 基本上是面向对象的 C。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T14:29:23.083

您**真正**怀念的是快速原型化和测试更改的能力。您不能只更改一行代码并运行。即使使用诸如“make”之类的构建工具，重新编译通常也需要几分钟时间。当您考虑到在 C/C++ 中很容易出错时，情况就更糟了。在大型项目中，我认为我花在编译而不是实际编码上的时间更多。作为脚本语言的长期用户，这是我使用 C 的最大问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T14:38:49.180

直接从运行在具有无限资源的机器上的高级语言转移到 DS 将是一个挑战，而不仅仅是因为语言。

Nintendo DS 只有 4MB 的 RAM、66MHz 的 ARM-7，没有操作系统，可用的开发库（例如 libnds）仅提供对硬件本身的薄抽象。

因此，除了必须处理手动内存管理、更简单的语言、更少的生物舒适、静态类型、缺少对​​象以及需要运行编译步骤才能看到任何更改之外，您还必须处理内存碎片化，按照现代标准来说是一个非常慢的 CPU，并且需要直接与硬件交互才能做任何有用的事情。

为 DS 编写代码，唯一的其他选择是 C++。在这样一个有限的系统上，你不能使用许多使 C++ 有价值的高级特性。您将使用 C++ 编译器编写 C 代码。

也就是说，这很有趣。您可以随心所欲地使用硬件，并且不需要与操作系统接口，因为没有操作系统。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-19T14:45:52.223

C 是直接汇编程序之上的下一个级别，允许您在金属附近进行操作。这使您有能力做令人惊奇的事情，但也可以轻松地击中自己的脚！

一个这样的例子是直接内存访问以及指针运算的危险和奇迹。指针非常强大、快速且方便，但需要仔细管理。有关示例，请参见此[SO 问题。](https://stackoverflow.com/questions/851023/c-pointer-arithmetic-snippet)

正如其他回答者所提到的，您必须自己进行内存管理。再次强大而痛苦。

我建议学习一[本好的教科书](https://rads.stackoverflow.com/amzn/click/com/0131103628)并找到一些高质量的示例代码。关键是要学习使所有这些东西正确而优雅地组合在一起的模式（嗯，尽可能多）。一个好的调试器也将真正帮助并熟悉标准 C 库。

您可能会注意到您的应用程序一开始就崩溃了，但坚持 C 绝对值得至少涉足。您将了解高级语言提供的一些惊人的抽象以及幕后实际发生的事情。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-24T14:31:25.150

我们需要更多的自制软件开发人员。我是 GBA/NDS 和许多其他嵌入式平台开发人员，希望看到您继续这样做。我会说跳到 arm 汇编器，然后回到 C 或任何其他你喜欢的语言，一旦你知道处理器是如何工作的，语言只是语法。

我假设您之前的经验涵盖了编程思维，将事物分解成小块，然后编写代码来执行这些块。然后是另一个将它们链接在一起的模块，依此类推。那么C只是另一种语言，一种非常非常简单的语言，不需要钻到它的角落里，从中间往下走。声明变量等是一个好习惯，在这里你必须这样做。当您忘记某些内容时，编译器会告诉您。你不需要大概念，大结构，语言魔法，这是嵌入式的，你是资源有限的，在这里写一些字节，在那里读一个寄存器，从数据中提取一点来看看是否按下了按钮，写响应移动精灵等的寄存器

我想一开始你会发现 NDS 比 C 更难，有两个处理器和一些基础设施来获得最简单的工作二进制文件。当然，那里也有很多例子。我通常（并且仍然这样做）建议从 GBA 开始，然后毕业到 NDS。一口大小的块。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-05-19T14:29:38.480

OOP 的很多东西在 PHP 和 C# 中是相同或几乎相同的。

你不会在 C# 中使用指针（与 C++ 相比），所以如果你想使用 C，我肯定会推荐使用 C#。

你在说什么C？

C＃

```
foreach(string item in itemsCollection)
{
...
} 
```

PHP

```
foreach($itemsCollection as $key=>$value)
{
...
} 
```

等等

我喜欢 C#，因为它是强类型的，并且在您编写代码时会自动检查您的类型...与可以将任何内容保存到任何内容的 PHP 相比，尝试将整数保存到字符串或反之亦然的可能性为零...

# sql-server - 在 SQL Server 中删除表中的所有记录是一种不好的做法吗？

> ID：882946
> 
> 赞同：6
> 
> 时间：2009-05-19T13:58:04.113
> 
> 标签：sql-server

我正在将系统从 VB/Access 应用程序移动到 SQL 服务器。访问数据库中的一件常见事情是使用表格来保存正在计算的数据，然后将这些数据用于报告。
例如。

```
delete from treporttable
insert into treporttable (.... this thing and that thing)
Update treportable set x = x * price where (...etc) 
```

然后从 treporttable 运行报告

我听说当删除表中的所有记录时，SQL Server 不喜欢它，因为它会创建大量日志等。我尝试了临时 sql 表，但它们的持续时间不够长，无法让处于不同进程中的报告运行和报告。

有许多地方可以对应用程序中的不同报告表执行此操作。报告每天可以运行多次，并且在报告表中创建了大量记录。

谁能告诉我是否有最佳实践，或者我关于日志的信息是否不正确，并且此代码在 SQL Server 中会很好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-19T13:59:49.897

如果您不需要记录删除活动，您可以使用 truncate table 命令。

来自网络书籍：

> TRUNCATE TABLE 在功能上与没有 WHERE 子句的 DELETE 语句相同：两者都删除表中的所有行。但是 TRUNCATE TABLE 比 DELETE 更快，并且使用更少的系统和事务日志资源。

[http://msdn.microsoft.com/en-us/library/aa260621(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa260621(SQL.80).aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-19T14:02:20.327

```
delete from sometable 
```

将允许您回滚更改。因此，如果您的表非常大，那么这可能会导致大量内存使用和时间。

但是，如果您不惧怕失败，那么：

```
truncate sometable 
```

几乎可以立即执行，并且内存要求最低。虽然没有回滚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T14:25:25.197

致内森·费格：

您*可以*从 TRUNCATE 回滚。你自己看：

创建表 dbo.Test(i INT); 去插入 dbo.Test(i) SELECT 1; GO BEGIN TRAN TRUNCATE TABLE dbo.Test; 从 dbo.Test 中选择我；ROLLBACK GO SELECT i FROM dbo.Test; 去

## 一世

（0 行受影响）

## 一世

1

（1 行受影响）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-19T15:19:05.960

您也可以删除表，然后重新创建它......如果没有关系。

[DROP table] 语句是事务安全的，而 [TRUNCATE] 不是。

所以这取决于你的模式你想去哪个方向！！

此外，使用 SQL Profiler 分析您的执行时间。测试一下，看看哪个最好！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-19T14:02:30.953

答案取决于您的数据库的恢复模式。如果您处于完全恢复模式，那么当您删除大量数据时，您的事务日志可能会变得非常大。但是，如果您定期备份事务日志以释放空间，您可能不必担心。

一般来说，如果事务日志对您来说根本不重要，您应该改为 TRUNCATE 表。但是，请注意任何关键种子，因为 TRUNCATE 将重新设置表的种子。

编辑：请注意，即使恢复模式设置为简单，您的事务日志也会在批量删除期间增长。事务日志将在之后被清除（不释放空间）。这个想法是 DELETE 甚至会临时创建一个事务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T14:10:25.227

考虑使用临时表。他们的名字以#开头，当没有人提到他们时，他们被删除。例子：

```
create table #myreport (
    id identity,
    col1,
    ...
) 
```

临时表是用来扔掉的，这非常有效。

另一种选择是使用 TRUNCATE TABLE 而不是 DELETE。截断不会增加日志文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T14:06:31.660

我认为您的示例可能存在并发问题。如果多个进程同时使用该表怎么办？如果您添加一`JOB_ID`列或类似的内容，您可以清除此表中的相关条目，而不会破坏另一个进程正在使用的数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-19T14:28:48.310

实际上，诸如 treporttable 之类的表不需要恢复到某个时间点。因此，它们可以使用简单的恢复模式存在于单独的数据库中。这减轻了记录的负担。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T15:19:09.067

有很多方法可以处理这个问题。首先，您可以将数据的创建移至报表本身的运行。我觉得这是最好的处理方式，然后您可以使用临时表来临时暂存您的数据，如果多人同时尝试运行报告，任何人都不会遇到并发问题。根据我们讨论的报告数量，这可能需要一些时间，因此您可能还需要另一个短期解决方案。

其次，您可以将所有报告表移动到设置为简单模式的不同数据库，并在运行查询以填充之前截断它们。这最接近您当前的流程，但如果多个用户尝试运行相同的报告可能会出现问题。

第三，您可以设置一个作业来填充表（仍然在单独的数据库中设置为简单恢复），每天一次（当时截断）。然后，当天运行报告的任何人都会看到相同的数据，并且不会出现并发问题。但是，数据不会是最新的。您也可以建立一个报告数据感知室，但在您的情况下这可能是矫枉过正。

# javascript - UIWebView 加载图像缓慢--干扰滚动到锚点

> ID：882952
> 
> 赞同：2
> 
> 时间：2009-05-19T13:58:43.877
> 
> 标签：javascript, iphone, cocoa, uiwebview

我们在 iPhone 应用程序中使用加密网页，并在 webView:shouldStartLoadWithRequest: 方法中拦截这些调用（例如单击链接时）以获取文件路径，将数据解密为原始 html 字符串，然后在webView（显然在 webView:shouldStartLoadWithRequest: 中返回 YES）。

我们目前遇到的问题（在解决了其他问题之后，比如必须实现我们自己的后退/前进状态机、负责滚动到最后一个位置等）是 webView在调用 webViewDidFinishLoad:*之后*似乎加载了图像：是我们向下滚动到#anchor（如果有）的地方（我们必须实现的另一件事，因为当我们使用 loadHTMLString: 解密后它不能正常工作）。

当我们使用 javascript 调用 ("window.scrollTo(0, document.getElementById('%@').offsetTop") 向下滚动时，它通常会超出应有的高度；看起来就像它计算了 .加载图像*之前*的y 距离。

有没有办法回到 webView 完全加载页面的方式，*然后*滚动到 #anchors 或以前的 .y 位置？

这有点难以解释，可能与 UIWebView 加载、缓存和呈现页面的方式中的复杂细节有关。对此的一些启示和一些清晰的思考将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T10:59:50.140

我已经成功使用了锚标签，例如：

```
<a name='top'></a>
   ...
<a name='chap1'></a>
<a href='#top'>
   <h1>
      <img style='position:relative; top:2px; padding-right:5px;' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHVQTFRFAgICwMDAAwMDpKSk9/f3+/v7cHBwZmZmZGRkERER/v7+p6ensrKy0tLSXl5eVlZWaGhoW1tbYGBglpaWxsbGvb29sbGxY2NjcXFxVVVVwcHBtLS0bW1tWlpacnJyDw8P/f39GhoaCwsLAQEBycnJ////AAAA7TukbQAAAGxJREFUeNpkz+kSgjAMBODYVi6VG1FUrjR5/0dE1ME27M9vMrMbIBEg9rLBPQUPSkOBCxElR7r9oaVzbTX1+IOXuQ6PZtZjiB+A52nig+W4yuF7oRS/ARnBqV3B27GDToK9iOlZIcB5TmQRYAB6fSF0/d87AgAAAABJRU5ErkJggg==' alt='arrow-up.png' />
      Chapter 1
   </h1>
</a>... 
```

您的图像是否以 Base64 编码并直接嵌入到您刚刚未加密的图像中`NSString*`？

# algorithm - 如何按字典顺序对数字进行排序？

> ID：882954
> 
> 赞同：13
> 
> 时间：2009-05-19T13:59:09.867
> 
> 标签：algorithm, sorting, big-o

这是场景。

我得到一个整数数组'A'。数组的大小不是固定的。我应该编写的函数可能会用一个只有几个整数的数组调用一次，而另一次，它甚至可能包含数千个整数。此外，每个整数不需要包含相同数量的数字。

我应该对数组中的数字进行“排序”，以使生成的数组具有按字典顺序排列的整数（即，它们根据它们的字符串表示进行排序。这里的“123”是 123 的字符串表示）。请注意，输出应该只包含整数，而不是它们的字符串等价物。

**例如：**如果输入是：

[ 12 | 第2434章 23 | 1 | 第654章 222 | 56 | 100000]

那么输出应该是：

[ 1 | 100000 | 12 | 222 | 23 | 第2434章 56 | 第654章]

**我最初的方法：**我将每个整数转换为其字符串格式，然后在其右侧添加零以使所有整数包含相同数量的数字（这是一个混乱的步骤，因为它涉及跟踪等使得解决方案效率非常低）然后做了基数排序。最后，我删除了填充的零，将字符串转换回它们的整数并将它们放入结果数组中。这是一个非常低效的解决方案。

我一直相信该解决方案不需要填充等，并且有一个简单的解决方案，您只需以某种方式处理数字（一些位处理？）即可获得结果。

您能想到的空间方面最有效的解决方案是什么？浪费时光？

如果您要提供代码，我更喜欢 Java 或伪代码。但如果这不适合你，任何这样的语言都应该没问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-19T14:02:46.600

可执行伪代码（又名 Python）`thenumbers.sort(key=str)`：. 是的，我知道使用 Python 有点像作弊——它**太**强大了；-)。但严肃地说，这也意味着：如果您可以按字典顺序对字符串数组进行排序，就像 Python 的排序本质上可以那样，那么只需将“关键字符串”从每个数字中取出并对该辅助数组进行排序（然后您可以通过以下方式重构所需的数字数组str->int 转换，或通过间接等方式对索引进行排序）；这被称为 DSU（装饰、排序、取消装饰），这就是`key=`Python 排序的参数所实现的。

更详细（伪代码）：

1.  分配一个 char** 的数组，`aux`只要`numbers`数组
2.  对于 i 从 0 到`length of numbers-1`,`aux[i]=stringify(numbers[i])`
3.  `indices`分配一个相同长度的 int 数组
4.  对于 i 从 0 到`length of numbers-1`,`indices[i]=i`
5.  排序`indices`，使用 as`cmp(i,j)` `strcmp(aux[i],aux[j])`
6.  `results`分配一个相同长度的 int 数组
7.  对于 i 从 0 到`length of numbers-1`,`results[i]=numbers[indices[i]]`
8.  memcpy`results`结束`numbers`
9.  释放每个`aux[i]`, 还有`aux`, `indices`,`results`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-19T14:25:55.193

由于您提到Java是有问题的实际语言：

您不需要在字符串之间进行转换。相反，定义您自己的比较器并在排序中使用它。

具体来说：

```
Comparator<Integer> lexCompare = new Comparator<Integer>(){
   int compareTo( Integer x, Integer y ) {
      return x.toString().compareTo( y.toString() );
   }
}; 
```

然后你可以像这样对数组进行排序：

```
int[] array = /* whatever */;
Arrays.sort( array, lexCompare ); 
```

（注意：`int`/`Integer`不匹配通过自动装箱自动工作）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T14:08:46.960

我只是将它们转换为字符串，然后使用 strcmp 进行排序，然后进行 lex 比较。

或者，您可以编写一个“lexcmp”函数，使用 % 10 和 /10 比较两个数字，但这与多次调用 atoi 基本相同，所以不是一个好主意。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-19T14:15:22.690

实际的排序可以通过你喜欢的任何算法来完成。这个问题的关键是找到能够正确识别哪些数字应该“小于”其他数字的比较函数，根据这个方案：

```
bool isLessThan(int a, int b)
{
    string aString = ToString(a);
    string bString = ToString(b);

    int charCount = min(aString.length(), bString.length())
    for (charIndex = 0; charIndex < charCount; charIndex++)
    {
        if (aString[charIndex] < bString[charIndex]) { return TRUE; }
    }

    // if the numbers are of different lengths, but identical
    // for the common digits (e.g. 123 and 12345)
    // the shorter string is considered "less"
    return (aString.length() < bString.length());
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-19T14:08:04.670

我的想法是说 int 到字符串的转换将发生在比较器代码中，而不是批量发生。尽管从代码的角度来看这可能更优雅，但我不得不说执行工作量会更大，因为每个数字可能会被比较多次。

我倾向于创建一个包含 int 和字符串表示形式的新数组（不确定您是否需要填充字符串版本以进行字符串比较以产生您给出的顺序），在字符串上对其进行排序然后复制int 值返回到原始数组。

我想不出一种聪明的数学方法来排序，就像你自己的语句一样，你想按字典顺序排序，所以你需要将数字转换为字符串来做到这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-19T14:14:18.293

你绝对不需要填充结果。它不会改变字典比较的顺序，它会更容易出错，而且只会浪费 CPU 周期。最“节省空间”的有效方法是在比较数字时将它们转换为字符串。这样，您就不需要分配额外的数组，这些数字将在适当的位置进行比较。

只需根据需要将它们转换为字符串，就可以快速获得相当好的实现。对数字进行字符串化并不是特别昂贵，而且由于您一次只处理两个字符串，它们很可能会一直保留在 CPU 缓存中。因此，比较将比将整个数组转换为字符串的情况快得多，因为它们不需要从主内存加载到缓存中。人们往往会忘记 CPU 具有缓存，并且在较小的本地内存区域中完成大量工作的算法将从更快的缓存访问中受益匪浅。在某些架构上，缓存比内存快得多，以至于您可以在从主内存加载数据的时间内对数据执行数百次操作。因此，在比较函数中做更多的工作实际上可能比预处理数组快得多。特别是如果你有一个大数组。

尝试在比较器函数中进行字符串序列化和比较并对其进行基准测试。我认为这将是一个很好的解决方案。示例 java-ish 伪代码：

```
public static int compare(Number numA, Number numB) {
    return numA.toString().compare(numB.toString());
} 
```

我认为你可以做的任何花哨的位比较都必须大致相当于将数字转换为字符串所涉及的工作。所以你可能不会得到显着的好处。你不能只做一个直接的位比较，这会给你一个不同于字典排序的顺序。无论如何，您都需要能够找出数字的每个数字，因此将它们设为字符串是最简单的。可能有一些巧妙的技巧，但我能想到的每条途径都是棘手的，容易出错的，而且工作量远远超过它的价值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-19T14:35:17.750

伪代码：

```
sub sort_numbers_lexicographically (array) {
    for 0 <= i < array.length:
        array[i] = munge(array[i]);
    sort(array);  // using usual numeric comparisons
    for 0 <= i < array.length:
        array[i] = unmunge(array[i]);
} 
```

那么，什么是`munge`和`unmunge`？

`munge`因整数大小而异。例如：

```
sub munge (4-bit-unsigned-integer n) {
    switch (n):
        case 0:  return 0
        case 1:  return 1
        case 2:  return 8
        case 3:  return 9
        case 4:  return 10
        case 5:  return 11
        case 6:  return 12
        case 7:  return 13
        case 8:  return 14
        case 9:  return 15
        case 10:  return 2
        case 11:  return 3
        case 12:  return 4
        case 13:  return 5
        case 14:  return 6
        case 15:  return 7
} 
```

基本上 munge 正在做的是说当按字典顺序排序时，4 位整数的顺序是什么。我相信您可以看到这里有一个模式 --- 我不必使用开关 --- 并且您可以编写一个`munge`相当容易地处理 32 位整数的版本。如果您不能立即看到模式，请考虑如何编写`munge`5、6 和 7 位整数的版本。

`unmunge`是 的倒数`munge`。

因此，您可以避免将任何内容转换为字符串——您不需要任何额外的内存。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T15:24:15.560

如果您想尝试更好的预处理-排序-后处理，请注意 int 最多为 10 个十进制数字（暂时忽略有符号性）。

因此，它的二进制编码十进制数据适合 64 位。映射数字 0->1、1->2 等，并使用 0 作为 NUL 终止符（以确保“1”小于“10”）。依次移动每个数字，从最小的开始，到长的顶部。对 long 进行排序，这将按字典顺序显示原始整数。然后通过将数字从每个 long 的顶部一次移回一个来转换回来：

```
uint64_t munge(uint32_t i) {
    uint64_t acc = 0;
    while (i > 0) {
        acc = acc >> 4;
        uint64_t digit = (i % 10) + 1;
        acc += (digit << 60);
        i /= 10;
    }
    return acc;
}

uint32_t demunge(uint64_t l) {
    uint32_t acc = 0;
    while (l > 0) {
        acc *= 10;
        uint32_t digit = (l >> 60) - 1;
        acc += digit;
        l << 4;
    }
} 
```

或类似的东西。由于 Java 没有无符号整数，因此您必须对其进行一些修改。它使用了大量的工作内存（输入大小的两倍），但这仍然比您最初的方法少。它可能比在比较器中动态转换为字符串更快，但它使用更多的峰值内存。但是，根据 GC，它可能会通过更少的内存总量来搅动，并且需要更少的收集。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-02T16:38:18.517

该问题并未说明如何按字典排序顺序处理负整数。前面介绍的基于字符串的方法通常会将负值排在前面；例如，{ -123, -345, 0, 234, 78 } 将按该顺序保留。但如果应该忽略减号，则输出顺序应为 { 0, -123, 234, -345, 78 }。可以采用一种基于字符串的方法，通过有些繁琐的附加测试来生成该顺序。

在理论和代码上，使用比较两个整数的常用对数的小数部分的比较器可能更简单。也就是说，它将比较两个数字的以 10 为底的对数的尾数。基于对数的比较器将比基于字符串的比较器运行得更快或更慢，这取决于 CPU 的浮点性能规范和实现的质量。

此答案末尾显示的 java 代码包括两个基于对数的比较器： `alogCompare`和`slogCompare`. 前者忽略符号，因此会从 { -123, -345, 0, 234, 78 } 产生 { 0, -123, 234, -345, 78 }。

接下来显示的数字组是 java 程序产生的输出。

“dar rand”部分显示生成的随机数据数组`dar`。它读取然后向下读取，每行 5 个元素。请注意，数组`sar`、`lara`和`lars`最初是 的未排序副本`dar`。

“dar 排序”部分是`dar`在通过排序之后`Arrays.sort(dar);`。

“sar lex”部分显示`sar`用 排序后的数组`Arrays.sort(sar,lexCompare);`，其中`lexCompare`类似于`Comparator`Jason Cohen 的答案中所示。

“lar s log”部分显示`lars`了按 排序后的数组，说明了一种基于对数的方法，它给出与 do和其他基于字符串的方法`Arrays.sort(lars,slogCompare);`相同的顺序。`lexCompare`

“lar a log”部分显示`lara`了排序后的数组`Arrays.sort(lara,alogCompare);`，说明了一种忽略减号的基于对数的方法。

```
dar rand    -335768    115776     -9576    185484     81528
dar rand      79300         0      3128      4095    -69377
dar rand     -67584      9900    -50568   -162792     70992

dar sort    -335768   -162792    -69377    -67584    -50568
dar sort      -9576         0      3128      4095      9900
dar sort      70992     79300     81528    115776    185484

 sar lex    -162792   -335768    -50568    -67584    -69377
 sar lex      -9576         0    115776    185484      3128
 sar lex       4095     70992     79300     81528      9900

lar s log    -162792   -335768    -50568    -67584    -69377
lar s log      -9576         0    115776    185484      3128
lar s log       4095     70992     79300     81528      9900

lar a log          0    115776   -162792    185484      3128
lar a log    -335768      4095    -50568    -67584    -69377
lar a log      70992     79300     81528     -9576      9900 
```

Java 代码如下所示。

```
// Code for "How can I sort numbers lexicographically?" - jw - 2 Jul 2014
import java.util.Random;
import java.util.Comparator;
import java.lang.Math;
import java.util.Arrays;
public class lex882954 {
// Comparator from Jason Cohen's answer
    public static Comparator<Integer> lexCompare = new Comparator<Integer>(){
        public int compare( Integer x, Integer y ) {
            return x.toString().compareTo( y.toString() );
        }
    };
// Comparator that uses "abs." logarithms of numbers instead of strings
    public static Comparator<Integer> alogCompare = new Comparator<Integer>(){
        public int compare( Integer x, Integer y ) {
            Double xl = (x==0)? 0 : Math.log10(Math.abs(x));
            Double yl = (y==0)? 0 : Math.log10(Math.abs(y));
            Double xf=xl-xl.intValue();
            return xf.compareTo(yl-yl.intValue());
        }
    };
// Comparator that uses "signed" logarithms of numbers instead of strings
    public static Comparator<Integer> slogCompare = new Comparator<Integer>(){
        public int compare( Integer x, Integer y ) {
            Double xl = (x==0)? 0 : Math.log10(Math.abs(x));
            Double yl = (y==0)? 0 : Math.log10(Math.abs(y));
            Double xf=xl-xl.intValue()+Integer.signum(x);
            return xf.compareTo(yl-yl.intValue()+Integer.signum(y));
        }
    };
// Print array before or after sorting
    public static void printArr(Integer[] ar, int asize, String aname) {
        int j;
        for(j=0; j < asize; ++j) {
            if (j%5==0)
                System.out.printf("%n%8s ", aname);
            System.out.printf(" %9d", ar[j]);
        }
        System.out.println();
    }
// Main Program -- to test comparators
    public static void main(String[] args) {
        int j, dasize=15, hir=99;
        Random rnd = new Random(12345);
        Integer[] dar = new Integer[dasize];
        Integer[] sar = new Integer[dasize];
        Integer[] lara = new Integer[dasize];
        Integer[] lars = new Integer[dasize];

        for(j=0; j < dasize; ++j) {
            lara[j] = lars[j] = sar[j] = dar[j] = rnd.nextInt(hir) * 
                rnd.nextInt(hir) * (rnd.nextInt(hir)-44);
        }
        printArr(dar, dasize, "dar rand");
        Arrays.sort(dar);
        printArr(dar, dasize, "dar sort");
        Arrays.sort(sar, lexCompare);
        printArr(sar, dasize, "sar lex");
        Arrays.sort(lars, slogCompare);
        printArr(lars, dasize, "lar s log");
        Arrays.sort(lara, alogCompare);
        printArr(lara, dasize, "lar a log");
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-27T14:41:17.497

如果所有数字都小于 1E+18，您可以将每个数字转换为 UINT64，乘以 10 并加 1，然后乘以 10，直到它们至少为 1E+19。然后对它们进行排序。要取回原始数字，请将每个数字除以 10，直到最后一位数字非零（应该是 1），然后再除以 10。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-19T14:12:06.893

如果您要提高空间效率，我会尝试在排序的比较功能中进行工作

```
int compare(int a, int b) {
   // convert a to string
   // convert b to string
   // return -1 if a < b, 0 if they are equal, 1 if a > b
} 
```

如果它太慢（肯定比预处理慢），请在某处跟踪转换，以便比较函数不必继续执行它们。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-19T14:19:10.107

可能的优化：而不是这个：

> 我将每个整数转换为其字符串格式，然后在其右侧添加零以使所有整数包含相同的位数

您可以将每个数字乘以 (10^N - log10(number))，N 是大于任何数字的 log10 的数字。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-19T14:20:02.960

```
#!/usr/bin/perl

use strict;
use warnings;

my @x = ( 12, 2434, 23, 1, 654, 222, 56, 100000 );

print $_, "\n" for sort @x;

__END__ 
```

一些时间......首先，空@x：

```
C:\Temp> timethis s-empty
TimeThis :  Elapsed Time :  00:00:00.188 
```

现在，有 10,000 个随机生成的元素：

```
TimeThis :  Elapsed Time :  00:00:00.219 
```

这包括生成 10,000 个元素所用的时间，但不包括将它们输出到控制台的时间。输出增加了大约一秒钟。

所以，节省一些程序员时间;-)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-19T16:13:48.763

一种非常 hacky 的方法（使用 C）是：

*   生成一个包含所有转换为浮点数的值的新数组
*   使用尾数（有效位）位进行排序以进行比较

在 Java 中（从[这里](http://www.daniweb.com/forums/thread21094.html#)）：

```
long bits = Double.doubleToLongBits(5894.349580349);

boolean negative = (bits & 0x8000000000000000L) != 0; 
long exponent = bits & 0x7ff0000000000000L >> 52;
long mantissa = bits & 0x000fffffffffffffL; 
```

所以你会在这里排序`mantissa`。

# c - 从 C 中的大结构中获取子结构

> ID：882956
> 
> 赞同：3
> 
> 时间：2009-05-19T13:59:25.187
> 
> 标签：c, data-structures, struct, bit-fields

我`struct`在现有程序中有一个非常大的。该结构包含大量位域。

我希望保存其中的一部分（例如，150 个字段中的 10 个）。

我用来保存子类的示例代码是：

```
typedef struct {int a;int b;char c} bigstruct;
typedef struct {int a;char c;} smallstruct;
void substruct(smallstruct *s,bigstruct *b) {
    s->a = b->a;
    s->c = b->c;
}
int save_struct(bigstruct *bs) {
    smallstruct s;
    substruct(&s,bs);
    save_struct(s);
} 
```

我也希望选择它的哪一部分不会太麻烦，因为我希望时不时地改变它。我之前提出的幼稚方法非常脆弱且无法维护。当扩展到 20 个不同的字段时，您必须同时更改`smallstruct`和`substruct`函数中的字段。

我想到了两种更好的方法。不幸的是，两者都需要我使用一些外部[CIL 之](http://hal.cs.berkeley.edu/cil/)类的工具来解析我的结构。

第一种方法是自动生成`substruct`函数。我将只设置 的结构`smallstruct`，并有一个程序来解析它并`substruct`根据 中的字段生成函数`smallstruct`。

第二种方法是构建（使用 C 解析器）关于 的元信息`bigstruct`，然后编写一个库，允许我访问结构中的特定字段。这就像 Java 类反射的临时实现。

例如，假设没有结构对齐，对于 struct

```
struct st {
    int a;
    char c1:5;
    char c2:3;
    long d;
} 
```

我将生成以下元信息：

```
int field2distance[] = {0,sizeof(int),sizeof(int),sizeof(int)+sizeof(char)}
int field2size[] = {sizeof(int),1,1,sizeof(long)}
int field2bitmask[] =  {0,0x1F,0xE0,0};
char *fieldNames[] = {"a","c1","c2","d"}; 
```

我将使用此函数获取第`i`^(th字段：)

```
long getFieldData(void *strct,int i) {
    int distance = field2distance[i];
    int size = field2size[i];
    int bitmask = field2bitmask[i];
    void *ptr = ((char *)strct + distance);
    long result;
    switch (size) {
        case 1: //char
             result = *(char*)ptr;
             break;
        case 2: //short
             result = *(short*)ptr;
        ...
    }
    if (bitmask == 0) return result;
    return (result & bitmask) >> num_of_trailing_zeros(bitmask);
 } 
```

这两种方法都需要额外的工作，但是一旦解析器在您的 makefile 中 - 更改子结构是轻而易举的事。

但是，我宁愿在没有任何外部依赖的情况下这样做。

有没有人有更好的主意？在我的想法有什么好处的地方，我的想法在互联网上是否有一些可用的实施方式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-19T14:14:54.703

根据您的描述，您似乎可以访问并可以修改您的原始结构。我建议您将子结构重构为一个完整的类型（就像您在示例中所做的那样），然后将该结构作为大结构上的一个字段，将原始结构中的所有这些字段封装到较小的结构中。

扩展您的小示例：

```
typedef struct 
{
  int a;
  char c;
} smallstruct;

typedef struct 
{
  int b;
  smallstruct mysub;
} bigstruct; 
```

访问 smallstruct 信息的方式如下：

```
/* stack-based allocation */
bigstruct mybig;
mybig.mysub.a = 1;
mybig.mysub.c = '1';
mybig.b = 2;

/* heap-based allocation */
bigstruct * mybig = (bigstruct *)malloc(sizeof(bigstruct));
mybig->mysub.a = 1;
mybig->mysub.c = '1';
mybig->b = 2; 
```

但是您也可以传递指向小结构的指针：

```
void dosomething(smallstruct * small)
{ 
  small->a = 3;
  small->c = '3';
}

/* stack based */    
dosomething(&(mybig.mysub));

/* heap based */    
dosomething(&((*mybig).mysub)); 
```

好处：

*   没有宏
*   没有外部依赖
*   没有记忆顺序铸造技巧
*   更干净、更易于阅读和使用的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-19T14:11:54.210

如果更改字段的顺序不是不可能的，您可以重新排列 bigstruct 字段，使 smallstruct 字段在一起，然后只需从一个转换到另一个（可能添加偏移量） . 就像是：

```
typedef struct {int a;char c;int b;} bigstruct;
typedef struct {int a;char c;} smallstruct;

int save_struct(bigstruct *bs) {
    save_struct((smallstruct *)bs);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:13:55.173

宏是你的朋友。

一种解决方案是将大结构移出到它自己的包含文件中，然后有一个宏派对。

与其正常定义结构，不如提出一些宏选择，例如 BEGIN_STRUCTURE、END_STRUCTURE、NORMAL_FIELD、SUBSET_FIELD

然后，您可以多次包含该文件，为每次传递重新定义这些结构。第一个会将定义转换为正常结构，两种类型的字段都正常输出。第二个将定义 NORMAL_FIELD 什么都没有，并将创建您的子集。第三个将创建适当的代码来复制子集字段。

您最终将获得结构的单一定义，这使您可以控制子集中的字段并自动为您创建合适的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T14:17:54.760

只是为了帮助您获取元数据，您可以参考 offsetof() 宏，它还具有处理您可能拥有的任何填充的好处

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T14:45:55.013

我建议采取这种方法：

1.  诅咒那个写大结构的人。找一个巫毒娃娃，玩得开心。
2.  以某种方式标记您需要的大结构的每个字段（宏或注释或其他）
3.  编写一个读取头文件并提取标记字段的小工具。如果您使用注释，您可以为每个字段指定优先级或对其进行排序。
4.  为子结构编写一个新的头文件（使用固定的页眉和页脚）。
5.  编写一个新的 C 文件，其中包含一个函数，该函数`createSubStruct`接受一个指向大结构的指针并返回一个指向子结构的指针
6.  在函数中，循环收集和发出`ss.field = bs.field`的字段（即一一复制字段）。
7.  将小工具添加到您的 makefile 并将新的头文件和 C 源文件添加到您的构建中

我建议使用`gawk`或任何您喜欢的脚本语言作为工具；这应该需要半个小时来构建。

[编辑]如果你真的想尝试反射（我建议反对；在 C 中工作需要做很多工作），那么`offsetof()`宏就是你的朋友。此宏返回结构中字段的偏移量（通常*不是*之前字段大小的总和）。见[这篇文章](http://www.embedded.com/columns/technicalinsights/18312031?_requestid=141188)。

[EDIT2] 不要编写自己的解析器。让你自己的解析器正确需要几个月的时间；我知道，因为我一生中写过很多解析器。而是标记原始头文件中需要复制的部分，然后依赖您知道可以工作的一个解析器：您的 C 编译器之一。以下是一些如何使这项工作的想法：

```
struct big_struct {
    /**BEGIN_COPY*/
    int i;
    int j : 3;
    int k : 2;
    char * str;
    /**END_COPY*/
    ...
    struct x y; /**COPY_STRUCT*/
} 
```

只需让您的工具复制 和 之间的任何`/**BEGIN_COPY*/`内容`/**END_COPY*/`。

Use special comments like `/**COPY_STRUCT*/` to instruct your tool to generate a `memcpy()` instead of an assignment, etc.

This can be written and debugged in a few hours. It would take as long to set up a parser for C without any functionality; that is you'd just have something which can read valid C but you'd still have to write the part of the parser which understands C, and the part which does something useful with the data.

# linq-to-sql - 将 Linq-to-Sql 实体映射到自定义域实体

> ID：882983
> 
> 赞同：2
> 
> 时间：2009-05-19T14:03:16.007
> 
> 标签：linq-to-sql, mapping, dns, domain-driven-design

如何将我的 Linq-to-Sql 生成的实体 (DTO) 映射到我的域实体？问题是我无法映射关联，因为它们不是同一类型。DTO 使用 EntitySet 和 EntityRef，而我的域实体使用 IList 和 T。

我看过一些博客文章：Ian Cooper 的*architecture-linq-to-sql-applications-part-5*和 digital_ruminations *linq-to-sql-poco-support*但它们不符合我的需求。我喜欢某种通用转换器类来处理映射。

现在我做这样的事情：

```
public IList<Entities.Customer> GetAll()
    {
        try
        {
            return _custConverter.Convert(base.GetEntities());
        } 
```

但是 Convert 方法只转换基本属性而不是关联。有什么想法可以以最好的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:36:34.317

您可能想查看[AutoMapper](http://www.codeplex.com/AutoMapper)。它在开箱即用地自动映射属性方面做得很好，并支持广泛的自定义，例如自定义转换器，我认为它可以用来从你的 EntitySets 中制作列表。

* * *

更新：

*   官方项目站点和编译版本可在[CodePlex](http://www.codeplex.com/AutoMapper)中找到（与上面的链接相同）。
*   代码是托管在[Google Code上的 SVN](http://code.google.com/p/automapperhome/)
*   讨论组托管在[Google 网上论坛](http://groups.google.com/group/automapper-users)
*   [Jimmy Bogart 博客文章](http://www.lostechies.com/blogs/jimmy_bogard/archive/2009/01/22/automapper-the-object-object-mapper.aspx)中的功能介绍和概述

# jquery - 为什么这不验证（jquery 问题）？

> ID：882990
> 
> 赞同：3
> 
> 时间：2009-05-19T14:05:46.267
> 
> 标签：jquery, validation, xhtml-1.0-strict, xhtml

在我的网站上，我使用 jquery 循环插件来制作带有寻呼机的幻灯片。这个例子： http: [//malsup.com/jquery/cycle/pager.html](http://malsup.com/jquery/cycle/pager.html)

因此，在我的文档的开头，我有一个类似于以下内容的脚本：

```
<script type="text/javascript">
$('#s4').before('<div id="nav">').cycle({ 
    fx:     'turnDown', 
    speed:  'fast', 
    timeout: 3000, 
    pager:  '#nav' 
});
</script> 
```

我的文档类型是 XHTML Strict。

当我尝试验证页面时，我收到以下错误：“文档类型不允许此处的元素“div””和“省略了“div”的结束标记，但指定了 OMITTAG NO”，因为 div 标记未关闭.

有没有办法使用 jquery 并让它验证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-19T14:23:12.127

如果您将 HTML 注释标签放入您的脚本块，验证器将忽略该代码块并正确验证。

```
<script type="text/javascript">
<!--
$('#s4').before('<div id="nav">').cycle({ 
    fx:     'turnDown', 
    speed:  'fast', 
    timeout: 3000, 
    pager:  '#nav' 
});
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-19T20:30:25.020

实际上，您的代码未验证的原因是某些字符不允许出现`XHTML`（例如“ `<`”等），因此必须将它们包装在`CDATA`部分中`XHTML`（由于`XML`解析规则的严格性质）。`HTML`评论标记（特别是双破折号“ `--`”）也是不允许的，也不应该出现在`SCRIPT`块中，因为它们不是~~有效的~~可理解的 JavaScript。`HTML`因此，您应该将代码包装在“CDATA 标记部分”中，而不是使用注释标记，以通过验证器而不是混淆 JavaScript 引擎：

```
<script type="text/javascript">
//<![CDATA[
$('#s4').before('<div id="nav">').cycle({ 
    fx:     'turnDown', 
    speed:  'fast', 
    timeout: 3000, 
    pager:  '#nav' 
});
//]]>
</script> 
```

请查看以下页面以获取更多信息：

1.  [XHTML 1.0 推荐：4.8。脚本和样式元素](http://www.w3.org/TR/xhtml1/#h-4.8)
2.  [在 XHTML 文档中正确使用 CSS 和 JavaScript](https://developer.mozilla.org/en/properly_using_css_and_javascript_in_xhtml_documents)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T14:13:01.320

您可以通过执行以下操作来消除错误：

```
$('#s4').before('<' + 'div id="nav">').cycle({ ... 
```

这应该可以防止验证器检测到您的脚本标签中的任何 HTML。我 - 我会忍受这个错误，因为我知道这是验证器的问题，而不是我的代码。

# unix - 在 Mac 中找不到程序 >>

> ID：882997
> 
> 赞同：0
> 
> 时间：2009-05-19T14:06:52.533
> 
> 标签：unix, find, append

我想搜索附加到文件的程序“>>”。

我在 Mac 中运行代码失败

```
find . -print0 | xargs -0 grep " >> " 
```

我得到的结果太多，无法找到正确的应用程序。该程序不在 /bin 的其他电传打字机中。

**如何找到程序“>>”？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-19T14:08:06.807

没有名为“>>”的程序——它只是 shell 语法的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T14:08:17.947

这是一个 shell 操作符，根本不是一个程序。

阅读代码`bash`。或者找到一个更简单的 Bourne Shell 实现。网上应该有好几个。这是一个[http://heirloom.sourceforge.net/sh.html](http://heirloom.sourceforge.net/sh.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-19T14:08:50.423

这不是一个程序，这是一个 shell 结构。试试`man bash`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-19T14:18:07.613

正如其他人所提到的，它只是语法的一部分。像 + 和 - 是数学语法的一部分。如果要覆盖文件，请使用单个 >，追加使用双 >>。它是双向的。因此，如果您想使用文件作为输入，只需使用 <。文件的每一行都将传递给命令。命令<文件.txt

# multithreading - 如何在 web 应用程序中使用 Winforms WebBrowser 控件？

> ID：882998
> 
> 赞同：1
> 
> 时间：2009-05-19T14:07:04.017
> 
> 标签：multithreading, webbrowser-control

我已经开发了一个库来使用 WebBrowser 控件来操作 HTML 以符合我们的需求，但是我需要这个库来处理 web 应用程序而不是 winforms 应用程序。我得到的主要问题是：

*“ActiveX 控件 '8856f961-340a-11d0-a96b-00c04fd705a2' 无法实例化，因为当前线程不在单线程单元中。”*

我理解这是因为 WebBrowser 控件需要在 STA 线程中运行，但显然 Web 应用程序不是 STA 环境。它是一个服务器端进程，所以它不在页面本身中。关于如何解决这个问题的任何想法？我考虑在隐藏页面的*Page标记上设置**AspCompat="true"*属性并从中运行它，但我宁愿使用更优雅的解决方案。

 *干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-05-18T11:39:34.307

在您已通过[SetApartmentState()](http://msdn.microsoft.com/en-us/library/system.threading.thread.setapartmentstate.aspx)显式设置 ApartmentState 的新线程中实例化并执行您的工作。******************