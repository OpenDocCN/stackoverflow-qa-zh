# StackOverflow 问答 11168000-11168999

# c# - WPF DataGrid、模板列和虚拟化

> ID：11168003
> 
> 赞同：1
> 
> 时间：2012-06-23T08:26:31.200
> 
> 标签：c#, wpf

我为`DataGrid`项目（行和单元格）创建了 VM 类。Cell 的 VM 类如下所示：

```
public class ListGridCell : INotifyPropertyChanged 
{
    public ListGridCell(string Name)
    {
        // Init properties
        this.Name = Name;
        this.DataValue = null;
        this.DataEditor = null;
    }

    public string Name { get; private set; }

    private object _DataValue;
    public object DataValue
    {
        get { return _DataValue; }
        set { _DataValue = value; NotifyPropertyChanged("DataValue"); }
    }

    private FrameworkElement _DataEditor;
    public FrameworkElement DataEditor
    {
        get { return _DataEditor; }
        set { _DataEditor = value; NotifyPropertyChanged("DataEditor"); }
    }
    ...
} 
```

`DataGrid`列和 VM 完全由代码动态构建。我创建模板列 ( `DataGridTemplateColumn`) 并将其设置`CellTemplate`为以下模板（通过 XAML 说明）：

```
<StackPanel>
    <TextBlock Text="{Binding Path=DataValue}" />
    <ContentControl Content="{Binding Path=DataEditor}" />
</StackPanel> 
```

`DataGrid`最初填充和显示时，一切正常且符合预期。现在，如果我尝试滚动网格，则会发生以下异常：

> 指定元素已经是另一个元素的逻辑子元素。先断开它。

此异常与网格的行虚拟化和绑定`Content`到`DataEditor`内部单元格模板有关。如果我关闭行虚拟化，一切正常，但网格性能变得非常糟糕，所以它不是一个选项。

您是否知道`DataGrid`虚拟化在幕后工作，加载/卸载行时会发生什么以及可能导致此错误的原因是什么？有什么解决方法吗？

*注意：我不能`ContentTemplate`在单元格模板中使用绑定单元格数据编辑器（在许多地方都建议作为解决方法），因为我必须手动创建和初始化这个单元格编辑器。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:42:58.663

解决了。

当结合`ContentControl`使用绑定和虚拟化时，这显然是一个错误。`Content``DataGrid`

一旦我切换到`ContentPresenter`一切正常工作。

工作单元模板是：

```
<StackPanel>
    <TextBlock Text="{Binding Path=DataValue}" />
    <ContentPresenter Content="{Binding Path=DataEditor}" />
</StackPanel> 
```

# iis - 为什么此帮助台系统将我重定向到旧服务器？

> ID：11168010
> 
> 赞同：-1
> 
> 时间：2012-06-23T08:27:20.397
> 
> 标签：iis, windows-server-2008-r2

我正在使用[Liberum 帮助台](http://www.liberum.org/)作为服务请求系统。它位于运行 Windows Server 2008 R2 32 位的服务器上。我使用 Access 数据库对其进行了配置。它运作良好。现在，我正试图将它转移到另一台运行 Windows Server 2008 R2 64 位的服务器上。一开始我的 JET 驱动程序出错，因为 64 位机器没有 JET 驱动程序。我通过在应用程序池的高级设置中启用 32 位选项来修复它。但是，我仍然面临一个奇怪的问题，如下所示：当我尝试浏览新服务器（64 位）上的系统时，它会将我重定向到旧服务器（32 位）上托管的系统我不知道为什么。我检查了代码以查看是否有任何链接或将我重定向到旧服务器的东西，我确实找到了任何东西。

**那么如何解决这个问题呢？它的原因是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:35:02.843

最后，我找到了解决方案。问题出在 Access 数据库上；有一个名为 config 的表，其中有一个用于确定链接的列。我在那里更改了链接，一切正常。

# login - 密码保护网站的登录例程

> ID：11168013
> 
> 赞同：2
> 
> 时间：2012-06-23T08:27:40.280
> 
> 标签：login, password-protection

您正在为受密码保护的网站编写登录例程。给出您可能想要捕获的特定用户输入错误的示例，以及您可能如何处理它们。

这是一道面试题

我回答如下

我们应该同时添加客户端错误和服务器端错误。

客户端错误：检查用户是否在用户名字段中没有输入任何内容。我们可以使用 javascript 显示“未输入用户名”的消息 服务器端错误：我们可以检查用户名是否在数据库中不存在并且可以抛出错误消息。我们可以检查输入用户名的密码是否与数据库中的密码不匹配。

任何人都可以建议。这些是我们能捕捉到的唯一错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T09:35:00.527

我会考虑语法上无效的用户名（空；太短或太长；包含无效字符，如可能的空格、引号或 shell/SQL 元字符；结构上无效，即以点或数字开头）和语法上无效的密码（太短甚至是空的，太“简单”，或者等于用户名）。在所有这些情况下，您都可以使用 JS 验证客户端，为“创建新用户，选择用户和密码”视图回收相同的代码。

服务器端，您可能有后端连接错误（即无法判断用户是否存在——不完全是用户错误，但我们可能希望在这里管理它）、找不到用户、密码不匹配，并且可能“禁用登录”（这在自动创建用户网站上很常见：登录存在，但必须通过单击通过电子邮件发送的链接来验证。再说一次，人们可能希望将这些“尚未用户”放在存储分开以避免在真实用户数据库上阻塞/搅动）。当然，您可能还想添加一个特殊的禁用状态和消息（“您的会员费已过期”）。此处可能会添加其他额外的“错误”和“警告”，例如“您没有从通常的 IP 块登录 [，您介意回答这个安全问题吗？]”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:34:56.793

IMO，主要问题（假设[SQL](http://en.wikipedia.org/wiki/SQL)作为用户和密码的数据库）是[SQL](http://xkcd.com/327) [Injection](http://en.wikipedia.org/wiki/SQL_injection)，例如添加特定用户作为管理员访问权限。

可以使用服务器端的库来处理所有用户输入来处理它——而不是尝试自己做。

# java - Java如何在使用命令行编译时添加库或API？

> ID：11168015
> 
> 赞同：3
> 
> 时间：2012-06-23T08:28:14.973
> 
> 标签：java, api, compilation, compiler-errors

这个问题说明了一切，我试图在我的代码中使用一个外部库，但它告诉我我引用的包不存在，所以我猜测导入不起作用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T08:30:58.467

使用[javac 注释](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#options)`-cp`中描述的选项。

> 指定在哪里可以找到用户类文件，以及（可选）注释处理器和源文件。此类路径覆盖`CLASSPATH`环境变量中的用户类路径。如果既未指定`CLASSPATH`，`-cp`也未`-classpath`指定，则用户类路径由当前目录组成。..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:31:07.407

在编译和运行时都使用 --classpath 。如果你使用 eclipse，你可以去 properties->Java buildpath->add external jars。你完成了。

# sharepoint - SPContext.Current.Site.SystemAccount.UserToken 拒绝访问

> ID：11168026
> 
> 赞同：2
> 
> 时间：2012-06-23T08:30:28.950
> 
> 标签：sharepoint, sharepoint-2010

当我在添加到子站点的 Web 部件中使用**SPContext.Current.Site.SystemAccount.UserToken**时，有权访问子站点但不访问顶级站点的用户会收到拒绝访问错误。只有在我授予他们对顶级站点的读取权限后，他们才不会收到拒绝访问错误。

谁能让我知道我哪里出错了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:03:32.153

对于具有受限权限的用户来说，受限访问**SPContext.Current.Site.SystemAccount.UserToken**似乎是一种正常行为 。只是图像属性**SystemAccount**是站点集合**SPContext.Current.Site**的成员，子站点中的当前用户没有权限。

但是，如果您希望获得**SPContext.Current.Site.SystemAccount.UserToken**无论如何都可以使用[SPSecurity.RunWithElevatedPriviliges](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)

# objective-c - 正确加载自定义类

> ID：11168029
> 
> 赞同：0
> 
> 时间：2012-06-23T08:31:55.727
> 
> 标签：objective-c, xcode, class, instance

我有一个自定义类，我想在 firstViewController 中“加载”它，然后通过 segues 从其他类访问它。我的问题是，我什至无法访问和更改 firstViewController 中的实例变量。不知何故，我“加载”它是错误的。这是我到目前为止使用的代码：

在 viewController.h 里面

```
@property (strong, nonatomic) myClass *newClass; 
```

在 viewController.m 里面

```
@synthesize newClass; 
```

然后我尝试通过以下方式访问它：

```
self.newClass.string = @"myString";
if(newClass.string == @"myString"){
  NSLog(@"didn't work");
} 
```

好吧，我得到“没有工作”。这是为什么？当我写

```
myClass *newClass = [myClass new]; 
```

它确实有效。但是每次 ViewController 再次加载时，类及其属性都会被覆盖。

你会推荐什么？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:06:19.917

就像 Kaan 说的，你忘了初始化你的类，你只声明并为它创建了一个指针，而不是实际的对象，在你的 ViewDidLoad 添加

```
self.newClass = [[myClass alloc] init]; 
```

> 它确实有效。但是每次 ViewController 再次加载时，类及其属性都会被覆盖。

那是因为每次加载特定的 Viewcontroller 时，您都在重新初始化该类。

如果您希望在所有程序中都有一个持久类，请寻找单例模式。

这用于当您只想拥有某个对象的 1 个实例的情况下，如果您尝试初始化该对象的另一个实例，您只会收到您已经拥有的那个。

PD：newClass.string == @"myString" 是错误的。

比较字符串时使用 isEqualToString 方法。

# java - 将打印的行存储到字符串中？

> ID：11168034
> 
> 赞同：-1
> 
> 时间：2012-06-23T08:32:31.150
> 
> 标签：java

我想知道是否有任何方法可以将使用 System.out.print 打印的一系列文本存储到特定的字符串中，以便将来可以用来调用该行。

例如 ：

```
String oldLine=null;
int x = 4;
for (int i=0; i<10; i++) {
int result = x+i;
System.out.print(result+"\t"); } 
```

结果将是这样的：

```
4   5  6  7  9  10 .... 
```

现在我想知道我是否可以将此行存储到：

```
String oldLine; 
```

因此，每当我打印 oldLine 时，我都可以打印与以下内容相同的行：

```
4   5  6  7  9  10 .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:36:08.323

您可以`StringBuilder`为此使用 a：

```
String oldLine = null;
StringBuilder sb = new StringBuilder ();
int x = 4;
for (int i = 0; i < 10; i++)
{
    int result = x + i;
    sb.append (String.valueOf (result));
    sb.append ('\t');
}

oldLine = sb.toString ();
System.out.println (oldLine); 
```

## [演示](http://ideone.com/bjWt6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:35:29.203

使用`StringBuilder`.

```
StringBuilder sb = new StringBuilder();
sb.append(String.valueOf(result)); 
```

然后最后将您的转换`StringBuilder`为`String`.

```
oldLine = sb.toString(); 
```

如需更多信息，请阅读[此](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)和[此](http://docs.oracle.com/javase/tutorial/java/data/buffers.html)。

# php - 添加附加数据以选择查询结果

> ID：11168036
> 
> 赞同：1
> 
> 时间：2012-06-23T08:33:00.040
> 
> 标签：php, zend-framework, zend-db-table

我正在从 Articles 表中获取数据，但我想用另一个表中的一些数据扩展返回的结果。例如：

```
public function getArticlesByCategoryId($category_id = 0) { 
    $select = $this->_db->select()
            ->from($this->_name)
            ->limit(5)
            ->order("pubDate DESC");

    $result = $this->_db->fetchAll($select);

    $mCategories = new Model_Categories();

    foreach($result as $row) { // as &$row doesn't work
        $category_name = $mCategories->getNameById($row["category_id"]);
        $row["category_name"] = $category_name; // this to add to $result but dunno how 
        // blah blah...
    } 

    return $result; // the new one with ...->category_name in it.
} 
```

我希望你能明白我在找什么。或者最好编写一个查询（使用连接，不知道如何）并一次获取所有需要的数据而不调用另一个模型的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:15:45.547

这确实看起来你应该使用`join`. 这绝对是解决您的问题的最简单方法。以下查询可以解决问题：

```
$select = $this->_db->select()
        ->from($this->_name)
        ->join('category_table', 'category_table.id = ' . $this->_name . '.category_id', array('category_name'))
        ->limit(5)
        ->order("pubDate DESC"); 
```

这会将类别名称添加到行中。

* * *

如果您不想使用联接，您可以使用自定义行类将自定义字段添加到您的行。然而，这需要更多的工作。创建类如下：

```
class MyApp_Model_Row_MyRow extends Zend_Db_Table_Row_Abstract 
{
     public $categoryName;
} 
```

然后你应该在你的 DbTable 类中指出你想使用这个新的行类：

```
class MyApp_Model_DbTable_Articles extends Zend_Db_Table_Abstract
{
    ...
    protected $_rowClass = 'MyApp_Model_Row_MyRow';
} 
```

然后，您可以在获取的行中设置类别名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:17:06.810

要从您的类别表中获取所有包含数据的文章，您的查询可能如下所示：

```
 $select = $this->_db->select()
            ->from($this->_name)
            ->joinLeftUsing('category','category_id', array('category_name'))
            ->order("pubDate DESC"); 
```

另见： http: [//framework.zend.com/manual/en/zend.db.select.html](http://framework.zend.com/manual/en/zend.db.select.html)

# apache - Apache 302 重定向

> ID：11168038
> 
> 赞同：2
> 
> 时间：2012-06-23T08:33:28.543
> 
> 标签：apache, redirect

我读[了这篇](http://httpd.apache.org/docs/2.0/mod/mod_alias.html)文章，在这里我正在尝试使用 apache 进行 302 重定向。我使用的是 OSX 10.7 附带的默认 Apache：

```
Server version: Apache/2.2.21 (Unix)
Server built:   Nov 15 2011 15:12:57 
```

我试过了：

创建一个`.htaccess`文件并放在里面：

```
Redirect temp /old.html http://localhost/new.html 
```

或者

```
Redirect 302 /old.html http://localhost/new.html 
```

或者

```
Redirect /old.html http://localhost/new.html 
```

在`httpd.conf`修改以下部分（请注意，在我也看到的 conf 文件中`LoadModule alias_module libexec/apache2/mod_alias.so`）：

```
<IfModule alias_module>
  Redirect /old.html http://localhost/new.html
</IfModule> 
```

我停止/启动了几次 Apache，但没有运气。怎么了？

谢谢！

*编辑：*不工作我的意思是我得到了 404！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:28:47.990

1.  使用[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)指令需要[`mod_alias`](http://httpd.apache.org/docs/current/mod/mod_alias.html)加载。
2.  在里面使用`Redirect`指令`.htaccess`要求至少`FileInfo`可以被[覆盖](http://httpd.apache.org/docs/current/mod/directive-dict.html#Override)。您需要`AllowOverride FileInfo`在适当的部分中添加`httpd.conf`（可能不止一个）。
3.  当您进行更改时，`httpd.conf`您需要重新启动 Apache。这可能是主要问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:39:16.677

在 httpd.conf 中找到以下行并更改它，从

```
AllowOverride None 
```

到

```
AllowOverride All 
```

# graphics - VisualOcaml 想写一个排雷器（而不是使用 Ocaml 的图形库）

> ID：11168042
> 
> 赞同：1
> 
> 时间：2012-06-23T08:34:19.300
> 
> 标签：graphics, ocaml

在 Ocaml 中，是否有更简单的方法来编写像 deminer 这样的基于图形的玩具程序（如 Windows 95 附带的那个）？我发现唯一的方法是使用 Ocaml 的图形库从头开始。必须有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:49:12.040

有与 SDL 库的绑定，它提供了比图形更多的功能。实际上有几个，我不确定哪个是最好的：

*   [SdlCaml](http://glcaml.sourceforge.net/)是 [GLcaml] 项目的一部分
*   [OcamlSDL](http://ocamlsdl.sourceforge.net/home.html)库_

我认为 SdlCaml 更裸机（可能部分自动生成），而 OCamlSDL 是一个较旧（但仍偶尔更新）的库，具有更大的用户群。

但是请注意，Graphics 一开始就很容易使用，以后您仍然可以转向更复杂的东西。如果遇到渲染速度问题，则必须使用双缓冲，如[手册中所述](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Graphics.html#6_Doublebuffering)。

# mongodb - 如何将结果推送到数据库中？

> ID：11168043
> 
> 赞同：0
> 
> 时间：2012-06-23T08:34:50.090
> 
> 标签：mongodb, elasticsearch

我需要一些帮助...我想将来自 Elasticsearch 的查询结果存储在 mongodb 中。那我在写吗？代码来源取自[这篇文章](https://stackoverflow.com/questions/11120060/how-to-store-query-output-in-temp-db/11168302#11168302)

```
 var elastic_results = [{'elasticresult'}];
forEach(elastic_results){db.results_collection.insert();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:14:53.820

```
for(var i = 0; i < elastic_results.length; i++){
    db.results_collection.insert(elastic_results[i]);
} 
```

顺便说一句，如果您要从我发布的另一篇文章中窃取我的代码，您至少可以链接它而不是调用您自己的代码吗？

# java - 休眠不保存数据

> ID：11168048
> 
> 赞同：2
> 
> 时间：2012-06-23T08:35:19.533
> 
> 标签：java, hibernate

我从一开始就学习休眠。我从 RoseIndia 下载了休眠演示。为特定数据库设置 hibernate.cfg.xml 的配置。并运行以下代码。此处指定的表“联系人”是自动创建的，但下面的代码无法保存新记录。下面的代码有什么问题吗？

```
package roseindia.tutorial.hibernate;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

/**
 * @author Deepak Kumar
 *
 * http://www.roseindia.net
 * Hibernate example to inset data into Contact table
 */
public class FirstExample {
    public static void main(String[] args) {
        Session session = null;

        try{
            // This step will read hibernate.cfg.xml and prepare hibernate for use
            SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
             session =sessionFactory.openSession();
                //Create new instance of Contact and set values in it by reading them from form object
                System.out.println("Inserting Record");
                Contact contact = new Contact();
                //contact.setId(6);
                contact.setFirstName("Deepak");
                contact.setLastName("Kumar");
                contact.setEmail("deepak_38@yahoo.com");
                System.out.println("Before Save");
                session.save(contact);
                System.out.println("After Save");
                System.out.println("Done");
        }catch(Exception e){
            System.out.println(e.getMessage());
        }finally{
            // Actual contact insertion will happen at this step
            session.flush();
            session.close();

            }

    }
} 
```

**我的输出如下**

```
log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
log4j:WARN Please initialize the log4j system properly.
Inserting Record
Before Save
After Save
Done
Hibernate: insert into CONTACT (FIRSTNAME, LASTNAME, EMAIL, ID) values (?, ?, ?, ?) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T08:51:09.447

您需要将代码包装在事务中：

```
session = sessionFactory.openSession();
Transaction transaction = session.beginTransaction();
// your code
transaction.commit(); 
```

# objective-c - 在游戏活动源上发帖

> ID：11168054
> 
> 赞同：1
> 
> 时间：2012-06-23T08:35:59.870
> 
> 标签：objective-c, ios, facebook-ios-sdk

有没有办法在用户的 iOS 游戏活动提要上发布？似乎没有API，但有权限

```
user_games_activity 
```

在[https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms](https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms)

我注意到 Facebook 游戏本身有活动供稿，但我没有遇到有关 iOS 应用程序的活动供稿。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:01:51.523

`publish_actions`您可以通过获取扩展权限从 iOS 发布用户操作/成就，但您需要后端服务器支持。对于每个对象/成就，您需要一个带有开放图形标签的公共 URL。

[发布操作](https://developers.facebook.com/docs/authentication/permissions/#open_graph_perms)

> 允许您的应用使用内置操作、成就、分数或自定义操作发布到 Open Graph。您的应用还可以发布其他活动，这些活动在 Publishing Permissions 文档中有详细说明。注意：此权限的用户提示将显示在增强身份验证对话框的第一个屏幕中，并且不能作为身份验证流程的一部分撤销。但是，用户稍后可以在其帐户设置中撤销此权限。如果您想在发生这种情况时收到通知，您应该订阅 Realtime API 中的权限对象。

如果您想发布成就，这里是基本信息。有关更多信息，请参阅以下链接。

> 成就的 Graph API 允许游戏开发者在他们的游戏中发布用户成就，以提供更有意义和相关的故事。
> 
> 注意：此 API 仅适用于归类为“游戏”的应用程序。您可以通过导航到关于 > 基本信息并在类别字段的下拉菜单中选择“游戏”，在开发者应用中将您的应用分类为“游戏”。

仅供参考：[https ://developers.facebook.com/docs/achievements/](https://developers.facebook.com/docs/achievements/)

仅供参考：[改善应用程序分发](https://developers.facebook.com/blog/post/2012/02/21/improving-app-distribution-on-ios/)

# c# - 我应该缓存使用密集型的简单类吗？

> ID：11168061
> 
> 赞同：0
> 
> 时间：2012-06-23T08:37:51.263
> 
> 标签：c#

我正在编写高频交易软件。我正在尝试优化它。我发现每一秒我都会创建几千个`Instrument`对象，这个类的源代码如下：

```
public class Instrument
{

    public int GateId { get; set; }
    public string Ticker { get; set; }
    public override string ToString()
    {
        return "GateID: " + GateId + " Ticker: " + Ticker + '.';
    }

    public override bool Equals(object obj)
    {
        if (obj == null)
        {
            return false;
        }
        Instrument instrument = obj as Instrument;
        if (instrument == null)
        {
            return false;
        }
        return (GateId.Equals(instrument.GateId)) && (Ticker.Equals(instrument.Ticker));
    }

    public override int GetHashCode()
    {
        int hash = 13;
        hash = (hash * 7) + GateId;
        hash = (hash * 7) + Ticker.GetHashCode();
        return hash;
    }
} 
```

仪器的实际数量非常有限。总共大约100个。但我每秒多次创建相同的 Instrument 对象，如下所示：

```
new Instrument { GateId = 0, Ticker = "MSFT" } 
```

即我有许多“MSFT”仪器实例，但我可以在 HashSet/HashMap 或任何地方使用它们，这要归功于覆盖`Equals`和`GetHashCode`方法。

`Instrument`但现在我认为在运行时拥有 10 或 100 个“MSFT”对象（它们彼此相等）是否有意义。

所以我想创建这样的东西：

```
interface InstrumentFactory {

    public Instrument GetInstrument(int GateId, string Ticker);

} 
```

每次我需要一些乐器时，我只想问问 InstrumentFactory。InstrumentFactory 将在内部将我的 100 个仪器存储在 HashSet 中，并且只会返回缓存的副本。此外，我现在可以删除`Equals`和`GetHashCode`方法，因为`Instrument`每个 gateId + 股票代码对都有一个。

问题：

*   采用新方法，我的性能会有显着提升吗？
*   你对新设计有什么看法？当我经常需要相同的对象时，最好使用`factory`而不是每次使用重写的 Equals 和 GetHashCode 方法创建新对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:44:03.227

您目前无法缓存这些，因为它们是可变的 -`Ticker`并且`GateID`具有公共设置器。

我会让它不可变（并密封类），但可能保留`Equals`and`GetHashCode`方法。添加一个构造函数来获取参数，而不是将它们设置为属性。

在这一点上，*无论如何*，它是一个更好的类IMO（更容易推理不可变类型）并且缓存值是完全合理的。它会让您的应用程序明显更快吗？我们不可能说出来——但你应该能够说出来，假设你已经进行了性能测试。至少这样做是有意义的。

编辑：请注意，您不仅可以`HashSet`在工厂中使用 a 。您可能需要类似的东西`Dictionary<int, Dictionary<string, Instrument>>`- 从第一本字典中查找门，然后从门中查找乐器。如果你有一个从 0 开始的已知的、固定数量的门，你甚至可能想要使用一个数组。您还应该*考虑*创建一个`Gate`类型。

用于`Dictionary.TryGetValue`检查门或门内是否存在仪器，然后添加然后懒惰地创建门/仪器，如果之前不存在，则将其放入字典中。

如果您在单个工厂中使用多个线程，则需要*使用*锁定，或者如果您使用的是 .NET 4，则可以使用`ConcurrentDictionary`. 当然，这是假设您事先并不了解所有仪器。如果您在开始之前*就*知道一切，那真的很容易 - 只需填充工厂以开始，如果您被要求提供不存在的仪器，则抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:05:01.853

如果您只有 100 个不同的对象，但需要数千个实例，那么工厂可能是一种可行的方法，但性能不会改变，除非您有一些策略来改变构造。想到原型模式，但这些对象似乎很容易创建，因此性能不会受到影响。也许一些对象池可以成为一个解决方案。预先创建大量您需要的对象，然后从池中取出实例。让你的对象是不可变的，这是先决条件。拥有一个池，您可以轻松获得对象，如果您不再需要它们，只需将它们放回池中即可。

以下是关于对象池的一些想法： [CodeProject on object pooling](http://www.codeproject.com/Articles/3112/ObjectPool-a-library-for-pooling-NET-objects)

# sql - Postgresql触发器功能不起作用

> ID：11168064
> 
> 赞同：0
> 
> 时间：2012-06-23T08:38:15.393
> 
> 标签：sql, database, postgresql, triggers

我对触发功能很陌生。实际上这是我第一次使用它，我不能忽略一个问题。这是我的代码：

```
CREATE OR REPLACE FUNCTION altitude()
  RETURNS trigger AS $$
DECLARE
 maxaltimeter DOUBLE PRECISION;

BEGIN

  SELECT max(altitude) INTO maxaltimeter FROM waypoints WHERE flight_id = OLD.id;
  RETURN NEW;
  UPDATE flights SET max_altimeter = NEW.maxaltimeter WHERE id=OLD.id;

END;
$$
LANGUAGE plpgsql VOLATILE
COST 100;

CREATE TRIGGER set_altitude
  AFTER UPDATE OF status
  ON flights
  FOR EACH ROW
  EXECUTE PROCEDURE altitude(); 
```

在“航班”表（状态列）上运行 UPDATE 时，我没有得到任何结果（但也没有错误）。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:55:29.480

你得到的陈述顺序错误。将`RETURN NEW`终止触发器，因此不会运行更新。

它应该是：

```
SELECT max(altitude) INTO maxaltimeter FROM waypoints WHERE flight_id = OLD.id;
UPDATE flights SET max_altimeter = NEW.maxaltimeter WHERE id=OLD.id;
RETURN NEW; 
```

但我希望你知道这不会是一个可扩展的解决方案。

通常最好不要将计算/聚合值存储在数据库中，而是在检索数据时计算它们。为方便起见，您可能希望创建一个视图，为每个航班返回 max() 值。

预先计算这样一个值的唯一原因是，如果检索**真的很**昂贵，并且与更新相比，您必须经常这样做，*并且*检索性能比更新性能更重要。

# gwt - GWT 细胞选择

> ID：11168065
> 
> 赞同：1
> 
> 时间：2012-06-23T08:38:23.833
> 
> 标签：gwt

我希望在 GWT 中进行拖动并选择应用程序，我希望在其中拥有 20*100 列*行的单元格表或网格。我想添加一个事件，这样我就可以用鼠标拖动矩形之类的东西，然后选择该区域中的所有单元格，或者我可以为每个单元格触发一个事件并为每个单元格分配一个相同的 ID。这件事背后的主要思想是通过拖动然后将所有选定的单元格分组为一个来执行选择，例如Excel工作表选择。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:25:21.413

我曾经实现过允许“选择”表格的某些矩形区域的 GWT 小部件。基本上，这个想法是继承一个[Grid](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/Grid.html)或[FlexTable](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/FlexTable.html)并在各种鼠标事件处理程序（鼠标按下、鼠标抬起、鼠标移出、鼠标悬停）中执行所有逻辑。

我必须介绍的唯一小技巧是获取任何鼠标事件的单元格的方法。有一种方法[HTMLTable#getCellForEvent](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLTable.html#getCellForEvent%28com.google.gwt.event.dom.client.ClickEvent%29)适用于单击事件，但是当我研究此方法的实现时，我发现它实际上可以适用于任何事件，所以我只是实现了自己的方法来获取基于任何鼠标事件的单元格在提到的实施。

也许也可以使用[HTMLTable#getEventTargetCell来实现](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLTable.html#getEventTargetCell%28com.google.gwt.user.client.Event%29)

# zend-framework - 如何以zend形式填充多数组

> ID：11168069
> 
> 赞同：0
> 
> 时间：2012-06-23T08:39:32.603
> 
> 标签：zend-framework, zend-form, zend-form-element, zend-form-sub-form

我正在尝试将所有结果从 DB 填充到 zend 表单，但无法正常工作。

这是我的表格

```
 $configsForm= new Zend_Dojo_Form_SubForm();

    $configsForm->setAttribs(array(
        'name'          => 'mandatory',
        'legend'        => 'mandatory',
        'dijitParams'   => array(
            'title'     => $this-> view -> __ ( 'Configs' ),
        )
    ));
    $configsForm->addElement(
        'FilteringSelect',
        'group_id',
        array(
            'label' => $this-> view -> __ ( 'Configs_Group Key' ),
            'required'  => true,
            'value'     => '',
            'multiOptions' => $this->_getConfigOptions(),
            'id'        => 'group_id',
        )
    );
    $configsForm->addElement(
        'ValidationTextBox',
        'option_type',
        array(
            'label'     => $this-> view -> __ ( 'Configs_Option Type If Exist' ),
            'trim'      => true,
            'required'  => false,
            'name'      => 'option_type',
            'id'        => 'option_type',
            'class'     => 'lablvalue jstalgntop',
        )
    );    
    $configsForm->addElement(
        'ValidationTextBox',
        'option_title',
        array(
            'label'     => $this-> view -> __ ( 'Configs_Option Title' ),
            'trim'      => true,
            'required'  => true,
            'class'     => 'lablvalue jstalgntop',
        )
    );
    $configsForm->addElement(
        'ValidationTextBox',
        'option_value',
        array(
            'label'     => $this-> view -> __ ( 'Configs_Option Value' ),
            'trim'      => true,
            'required'  => true,
            'class'     => 'lablvalue jstalgntop',
        )
    );
    $configsForm->addElement(
        'select',
        'option_status',
        array(
            'label'         => $this-> view -> __('Configs_Option Status'),
            'required'      => true,
            'value'         => '',
            'multiOptions'  => array('' => $this -> view -> __('Root'), 0 => 'Disabel', 1 => 'Enabel'),
        )
    );
    $configsForm->addElement(
        'FilteringSelect',
        'locale_id',
        array(
            'label' => $this-> view -> __ ( 'Configs_Locale' ),
            'class' => 'lablvalue jstalgntop',
            'autocomplete'=>false,
            'required'  => true,
            'multiOptions' => $this->_getLocaleOptions(),
            'id' => 'locale_id',
        )
    );
    $configsForm->addElement(
        'ValidationTextBox',
        'option_hint',
        array(
            'label'     => $this-> view -> __ ( 'Configs_Option Hint' ),
            'trim'      => true,
            'required'  => false,
            'class'     => 'lablvalue jstalgntop',
        )
    );
    $configsForm->addElement(
        'ValidationTextBox',
        'option_description',
        array(
            'label'     => $this-> view -> __ ( 'Configs_Option Description' ),
            'trim'      => true,
            'required'  => false,
            'class'     => 'lablvalue jstalgntop',
        )
    );
    $configsForm->addElement(
        'ValidationTextBox',
        'comments',
        array(
            'label'     => $this-> view -> __ ( 'Configs_Option Comments' ),
            'trim'      => true,
            'class'     => 'lablvalue jstalgntop',
            )
    );
    $configsForm->addElement(
        'hidden',
        'id'
    );

    $configsForm->addElement(
        'SubmitButton',
        'submit',
        array(
            'value'     => 'submit',
            'label'     => $this-> view -> __ ( 'Object_Save' ),
            'type'      => 'Submit',
            'ignore'    => true,
            'onclick'   => 'dijit.byId("add-edit").submit()',
        )
    );
    $configsForm->addElement(
        'reset', 
        'reset',
        array(
            'label' => 'Reset',
            'id'    => 'reset',
            'ignore'=> true,
        )
    );

    $configsForm ->setDecorators ( array ('FormElements', array ('HtmlTag', array ('tag' => 'table', 'class'=>'formlist' ) ), 'ContentPane' ) );
    $configsForm->setElementDecorators(array(
    'DijitElement',
    'Errors',
        array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class' => 'lable jstalgntop')),
        array('Label', array('tag' => 'td', 'class' => 'lable jstalgntop')),
        array(array('row' => 'HtmlTag'), array('tag' => 'tr')),
    ));

    $this->addSubForm($configsForm, 'configs');
} 
```

我控制器中的代码看起来像

```
$form -> populate($configsObjResults); 
```

`$configsObjResults`包含_

```
Array
(
    [0] => Array
    (
        [id] => 11
        [group_id] => 2
        [group_key] => advanced
        [option_title] => advanced.iptable.status
    )

    [1] => Array
    (
        [id] => 12
        [group_id] => 2
        [group_key] => advanced
        [option_title] => advanced.memchache.iptable
    )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:40:02.943

将您的子表单代码放在表单代码中调用的方法`addConfigSubForm()`中，如下所示：

```
class myForm extends Zend_Dojo_Form
{
    ...

    // $number - 1st, 2nd, 3rd... subform
    // $data - data to populate
    public function addConfigSubForm($number, $data)
    {
        [ Create your subform here ]

        // populate it with $data
        $configsForm->populate($data);

        // add it to the form
        $this->addSubForm($configsForm, 'configs' . $i);
    }
} 
```

然后在您的控制器中，执行以下操作：

```
$myform = new myForm();
foreach ($configsObjResults as $i=>$config) {
    $myform->addConfigSubForm($i, $config);
} 
```

这将为数组中的每个配置对象添加一个子表单。

# android - combine text(or char) with user input in edittext for android

> ID：11168070
> 
> 赞同：1
> 
> 时间：2012-06-23T08:39:41.433
> 
> 标签：android, android-edittext

To All. Right now i am working on App which launches a dialog(containing EditText) on any alphanumeric key pressed from keyboard. Now i want that whatever user type should appear in EditText box, which is working properly the only issue that i have is, i want the char key which was 1st pressed to open dialog in EditText Box. I am missing the 1st char key which is obviously right. But I retrieve that char as string separately. Now wanted to attach(show) that char key to inputted EditText from user as 1st letter. I tried this,

```
 {
final EditText search_d_text = (EditText) dialog
                    .findViewById(R.id.search_text1);
search_d_text.setText(s1);// si is the 1st char key launch dialog(containing edittext).
            search_d_text.setInputType(InputType.TYPE_NULL);
            search_d_text
                    .setOnEditorActionListener(new OnEditorActionListener() {
                        @Override
                        public boolean onEditorAction(TextView v, int actionId,
                                KeyEvent event) {

                            if (event != null
                                    && event.getAction() == KeyEvent.ACTION_DOWN) {
                                // Handle enter key
                                return true;
                            }
                            if (actionId == EditorInfo.IME_ACTION_NEXT) {
                                // Handle IME NEXT key
                                return true;
                            }
                            if (actionId == EditorInfo.IME_ACTION_DONE) {
                                // Handle IME DONE key
                                return true;
                            }
                            return false;
                        }
                    });
            search_string = search_d_text.getText().toString();
            enterd_text = search_d_text.getText();
                        // collecting  input text.
} 
```

What i am getting is eg. when i type MASK, It shows ASKM.

The setText(s1) is always act as last letter. I want to show the word or whatever user input starting from 1st key. Thank You.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:10:22.773

找到解决方案，只是移动了编辑文本光标位置。通过 search_d_text.setSelection(s1.length()); 即到下一个位置。

# command-line - Access "Start up" folder from CMD?

> ID：11168074
> 
> 赞同：2
> 
> 时间：2012-06-23T08:40:11.853
> 
> 标签：command-line, batch-file

How can I get the path of the start up folder from a batch file? The only way I found was to look in the registry but I don't think thats possible with CMD.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:58:11.663

这将设置`STARTUP`为启动文件夹的位置：

```
for /F "skip=4 tokens=3*" %%j in ('reg query "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders" /v "Common Startup"') do set STARTUP=%%k 
```

（`skip=4`适用于 XP，`skip=2`适用于 Windows 7。我没有 vista 来尝试那里的命令）
也可用（更改 /v 之后的值）
`Common AppData`
`Common Programs`
`Common Documents`
`Common Desktop`
`Common Start Menu`
`CommonPictures`
`CommonMusic`
`CommonVideo`
`Common Templates`
`Common Favorites`
`Common Startup`
`Common Administrative Tools`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:54:22.130

在windows xp中你可以这样访问

导入的CountToMainTable

```
CD %HOMEDRIVE%%HOMEPATH%\Start Menu\Programs\Startup 
```

# python - Why can't I end a raw string with a backslash?

> ID：11168076
> 
> 赞同：10
> 
> 时间：2012-06-23T08:40:31.853
> 
> 标签：python, string, rawstring

I am confused here, even though raw strings convert every `\` to `\\` but when this `\` appears in the end it raises error.

```
>>> r'so\m\e \te\xt'
'so\\m\\e \\te\\xt'

>>> r'so\m\e \te\xt\'
SyntaxError: EOL while scanning string literal 
```

**Update:**

This is now covered in [Python FAQs](http://docs.python.org/2/faq/design.html) as well: [Why can’t raw strings (r-strings) end with a backslash?](http://docs.python.org/2/faq/design.html#why-can-t-raw-strings-r-strings-end-with-a-backslash)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T08:42:19.047

You still need `\` to escape `'` or `"` in raw strings, since otherwise the python interpreter doesn't know where the string stops. In your example, you're escaping the closing `'`.

Otherwise:

```
r'it wouldn\'t be possible to store this string'
r'since it'd produce a syntax error without the escape' 
```

Look at the syntax highlighting to see what I mean.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-23T14:13:50.687

由于解析器的工作方式，原始字符串不能以单个反斜杠结尾（尽管没有实际的转义）。解决方法是在之后添加反斜杠作为非原始字符串文字：

```
>>> print(r'foo\')
  File "<stdin>", line 1
    print(r'foo\')
                 ^
SyntaxError: EOL while scanning string literal
>>> print(r'foo''\\')
foo\ 
```

不漂亮，但它有效。您可以添加加号以使正在发生的事情更清楚，但这不是必需的：

```
>>> print(r'foo' + '\\')
foo\ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T12:49:47.920

Python 字符串分两步处理：

1.  首先，标记器查找结束引号。它在执行此操作时识别反斜杠，但不解释它们 - 它只是查找后跟右引号的字符串元素序列，其中“字符串元素”是（不是反斜杠、右引号或换行符 - 除了换行符允许在三引号中），或（反斜杠，后跟任何单个字符）。

2.  然后根据字符串的类型来解释字符串的内容（处理反斜杠转义）。`r`字符串文字前的标志仅影响此步骤。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-17T03:51:28.380

引用[https://docs.python.org/3.4/reference/lexical_analysis.html#literals](https://docs.python.org/3.4/reference/lexical_analysis.html#literals)：

> 即使在原始文字中，引号也可以用反斜杠转义，但反斜杠仍保留在结果中；例如，**r"\"" 是由两个字符组成的有效字符串文字：反斜杠和双引号；** r"\" 不是有效的字符串文字（即使原始字符串也不能以奇数个反斜杠结尾）。具体来说，原始文字不能以单个反斜杠结尾（因为反斜杠会转义后面的引号字符）。另请注意，单个反斜杠后跟换行符被解释为这两个字符作为文字的一部分，而不是作为续行.

所以在原始字符串中，反斜杠不会被特殊处理，***除非***在`"`or之前`'`。因此，`r'\'`or`r"\"`不是有效的字符串，因为右引号被转义，从而使字符串文字无效。在这种情况下，是否`r`存在没有区别，即`r'\'`等价于`'\'`和`r"\"`等价于`"\"`.

# xpath - XPath for overview values of emma report

> ID：11168078
> 
> 赞同：0
> 
> 时间：2012-06-23T08:41:24.217
> 
> 标签：xpath, emma

I generate EMMA reports during my build, they look like this

```
<report>
  <stats>
    <packages value="110"/>
    <classes value="1762"/>
    <methods value="12617"/>
    <srcfiles value="962"/>
    <srclines value="61320"/>
  </stats>
  <data>
    <all name="all classes">
      <coverage type="class, %" value="2%   (42/1762)"/>
      <coverage type="method, %" value="2%   (302/12617)"/>
      <coverage type="block, %" value="3%   (6849/258033)"/>
      <coverage type="line, %" value="3%   (1592.9/61320)"/> 
```

I need to get the percentage from the value attributes of the /report/data/all/coverage nodes. Currently getting these:

```
Invalid XPath expression: "/report/data/all/coverage[starts-with(@type,'block')]@value": Unexpected '@'
Invalid XPath expression: "substring-before(/report/data/all/coverage[starts-with(@type,'block']@value,'%')": Expected: ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:45:48.073

**您在@value**属性之前缺少来自 XPath 的正斜杠。**您的开头**函数中还缺少一个括号

尝试以下

```
/report/data/all/coverage[starts-with(@type,'block')]/@value

substring-before(/report/data/all/coverage[starts-with(@type,'block')]/@value,'%') 
```

# java - How to get a data authenticated page using web client

> ID：11168079
> 
> 赞同：4
> 
> 时间：2012-06-23T08:42:06.927
> 
> 标签：java, httpclient, webclient, httpurlconnection

I am using web client for getting page source. I have logged in successfully. After that, I use same object for getting page source using different URL but it's showing an Exception like:

```
java.lang.ClassCastException: com.gargoylesoftware.htmlunit.UnexpectedPage cannot be cast to com.gargoylesoftware.htmlunit.html.HtmlPage 
```

This is the code which i am using.

```
 forms = (List<HtmlForm>) firstPage.getForms();
        form = firstPage.getFormByName("");

        HtmlTextInput usernameInput = form.getInputByName("email");
        HtmlPasswordInput passInput = form.getInputByName("password");
        HtmlHiddenInput redirectInput = form.getInputByName("redirect");
        HtmlHiddenInput submitInput = form.getInputByName("form_submit");

        usernameInput.setValueAttribute(username);
        passInput.setValueAttribute(password);

        //Create Submit Button
        HtmlElement button = firstPage.createElement("button");
        button.setAttribute("type", "submit");
        button.setAttribute("name", "submit");
        form.appendChild(button);
        System.out.println(form.asXml());
        HtmlPage pageAfterLogin = button.click();

        String sourc = pageAfterLogin.asXml();

        System.out.println(pageAfterLogin.asXml());

    ///////////////////////////////////////////////////////////////////////// 
```

above code running successfully and login After that i am using this code

```
 HtmlPage downloadPage = null;       
downloadPage=(HtmlPage)webClient.getPage("url"); 
```

But i am getting Exception

```
java.lang.ClassCastException: com.gargoylesoftware.htmlunit.UnexpectedPage cannot be cast to com.gargoylesoftware.htmlunit.html.HtmlPage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:12:14.337

UnexpectedPage的[JavaDoc内](http://www.netlikon.de/docs/javadoc-htmlunit/htmlunit-2.1/com/gargoylesoftware/htmlunit/UnexpectedPage.html)他们声明

> 每当服务器返回意外的内容类型时返回的通用页面。

我建议您检查内容类型`webClient.getPage("url");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T10:48:36.427

而不是使用

```
HtmlPage downloadPage = null;       
downloadPage=(HtmlPage)webClient.getPage("url"); 
```

利用

```
UnexpectedPage downloadPage = null;       
downloadPage=(HtmlPage)webClient.getPage("url"); 
```

它对我很好。

# google-maps - jQuery Google Maps Adding a Marker on Click

> ID：11168084
> 
> 赞同：1
> 
> 时间：2012-06-23T08:42:26.930
> 
> 标签：google-maps, google-maps-api-3

i am using gmaps.js (https://github.com/hpneo/gmaps)

I want to add a Marker on the map on clicking a location on the map. If a user clicks on a second location the previous marker should move to the new place or be removed and replaced with a new marker.

Now sure if this is supported by the Lib.

[http://bakasura.in/startupsradar/add.html](http://bakasura.in/startupsradar/add.html)

```
$(document).ready(function () {
    var map = new GMaps({
        div: '#map',
        lat: 13.00487,
        lng: 77.576729,
        zoom: 13
    });

    map.addMarker({
        lat: 13.00487,
        lng: 77.576729,
        title: 'Mink7',
        infoWindow: {
            content: 'HTML Content'
        }
    });
    /*
    GMaps.geolocate({
        success: function (position) {
            map.setCenter(position.coords.latitude, position.coords.longitude);
        },
        error: function (error) {
            alert('Geolocation failed: ' + error.message);
        },
        not_supported: function () {
            alert("Your browser does not support geolocation");
        },
        always: function () {
            //alert("Done!");
        }
    });
    */
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:08:14.700

```
google.maps.event.addListener(_map, "click", function(event) {
    if(_marker) {
        _marker.setPosition(event.latLng);
    } else {  
        _marker = new google.maps.Marker({
            position: event.latLng,
            map: _map,
            title: "myTitle"
        });
    }
}); 
```

刚刚看到另一个答案，如果您不想每次都创建标记，请使用它...... `_marker`应该是一个全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:55:47.077

就个人而言，我使用标记的全局变量（或者如果我需要更多标记并且我想稍后访问它们，则使用数组），以便我可以删除它并在其他地方重新创建它。

```
// instantiate your var map
// ...

google.maps.event.addListener(map, "click", function(event) {
    if(markermap) {
        markermap.setMap(null);
    }

    markermap = new google.maps.Marker({
        position: event.latLng,
        map: myMap,
        title: "myTitle"
    });
}); 
```

# java - Java calling object in method outside of main

> ID：11168088
> 
> 赞同：2
> 
> 时间：2012-06-23T08:42:47.800
> 
> 标签：java, variables, object, syntax

I have a simple problem that I've been stuck on for some time and I can't quite find the answer to. Basically, I'm creating an object and trying to access the variables without using static variables as I was told that is the wrong way to do it. Here is some example code of the problem. I receive an error in the first class that can not be resolved to a variable. What I would like to be able to do is access `t.name` in other methods outside of the main, but also in other classes as well. To get around this previously I would use `Test2.name` and make the variable static in the `Test2` class, and correct me if I'm wrong but I believe that's the wrong way to do it. Any help would be greatly appreciated =)

```
public class Test {
  public static void main(String[] args) {
    Test2 t = new Test2("Joe");         
  }

  public void displayName() {
    System.out.println("Name2: " + t.name);
  }
}

public class Test2 {
  String name;

  public Test2 (String nm) {
    name = nm;
  } 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T08:51:05.173

我看到其他人已经发布了代码片段，但他们实际上并没有发布为什么这些工作（在撰写本文时）。

您收到编译错误的原因是您的方法

```
public static void main(String[] args) {

    Test2 t = new Test2("Joe");         
} 
```

变量 t 的作用域就是那个方法。您定义`Test2 t`为仅在`main(String[] args)`方法中，因此您只能在该方法中使用变量`t`。但是，如果您要将变量设置为字段，就像这样，并创建 Test 类的新实例，

```
public class Test {
Test2 t;
public static void main(String[] args) {
    Test test = new Test();
    test.t = new Test2("Joe");  
   test.displayName();
}

public void displayName() {
    System.out.println("Name2: " + t.name);
}
} 
```

那么您应该不再遇到任何编译错误，因为您将变量 t 声明为在类`Test`范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:45:17.277

You may give the reference to your test object as an argument to method `displayName`:

```
public class Test {

    public static void main(String[] args) {    
        Test2 t = new Test2("Joe");         
        displayName(t);
    }

    public static void displayName(Test2 test) {
        System.out.println("Name2: " + test.name);
    }
} 
```

Note: I also made `displayName` a static method. From within your `main` method you can only access static methods without reference.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T08:45:55.410

将Test类修改为此

```
public class Test {
  private static Test2 t;

  public static void main(String[] args) {
    t = new Test2("Joe");         
  }

  public void displayName() {
    System.out.println("Name2: " + t.name);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T08:48:24.830

将 a`getter`用于您的目的。这是您的问题的一个侧面解决方案，但通常这是您应该使用`getter`s 检索实例变量的方式。

```
public class Test {

public static void main(String[] args) {

    Test2 t = new Test2("Joe");         
    displayName(t);
}

public static void displayName(Test2 test) {
    System.out.println(test.getName());
}
}

public class Test2 
{
private String name;

public Test2 (String nm)
{
    name = nm;
}   

public String getName()
{
     return name;
}
} 
```

永远记住，你的类中的变量应该是`private`. 这可以保护它免受类外的访问。因此，`getter`s 是访问它们的唯一方法。和`setter`s 或`constructor`s 来初始化它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T08:49:58.840

我认为静力学越少越好。
我将实例化 Test 并在它的实例上调用 displayName，然后将 Test2 的实例传递给 displayName。但这确实取决于总体目标是什么

# css - How do I find the image URL to, in order to place a background image?

> ID：11168091
> 
> 赞同：0
> 
> 时间：2012-06-23T08:43:34.077
> 
> 标签：css, image, placement

I've found instruction on where to place this image body { background-image: url(example1.jpg); }

BUT Cant figure out how to format or get the "url"( ) it's looking for. Do i need to save it in a different place, or format my image differently...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:17:49.973

你可以使用这个 CSS：

```
body {
    background: transparent url(http://mydomain/content/image.jpg) no-repeat 0 0;
} 
```

或者当然：

```
body {
    background-image:   url(content/content/image.jpg);
} 
```

您的 URL 可以是**absolute**，如第一个示例中一样 - 或**relative**，如第二个示例中。您必须注意，放置相对路径时，它是相对于您的样式表定义的，而不是您的 HTML 文档。目录示例：

```
- webroot
    index.html
    img/image.jpg
    css/main.css 
```

当您将上面的定义放入**index.html**时，URL 将是：

```
url(img/image.jpg) 
```

但是当你把它放在**main.css**里面时

```
url(../img/image/jpg) 
```

最后一个想法：如果路径中有**空格/空格**，则必须将 url 用单引号或双引号括起来，例如：

```
url('image/my image.jpg') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:47:51.947

您可以使用任何标准 url，例如 [http://example.com/xx.jpg](http://example.com/xx.jpg) 或来自您的目录 /images/xx.jpg 这就是您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:01:09.527

您将 url 相对于样式表，而不是站点根目录。例如，如果你有这个结构：

```
root
- images/
  - image.gif
- css/
   - styles.css
- index.html 
```

您的网址路径将是`url('../images/image.gif');`

在不相关的注释上（只是因为前几天我发现了这一点），如果您使用的是 .htc 文件（例如用于 IE 圆角的 PIE.htc），那么行为 url 需要相对于根和不是样式表。

# android - webview is not taking full screen

> ID：11168093
> 
> 赞同：0
> 
> 时间：2012-06-23T08:43:59.733
> 
> 标签：android, android-layout, android-scrollview

![enter image description here](../Images/2b0cbc84c6a7795568718331d011bf67.png)

i have simple layout with two buttons as you can see in the image , when i click on google button it opens google website in the webview as you see it is not opening google website on full screen it is showing those buttons two ,but when i remove scrollbar from my main layout, then webview shows google website on the full screen, how can i fix this problem because i want to user scrollview in my main layout.. here is my main.xml

**xml**

```
<?xml version="1.0" encoding="utf-8"?> 
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <Button 
            android:id="@+id/btn_click_login"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
            android:layout_weight="2"
            android:text="Google"/>

    <Button 
            android:id="@+id/btn_gmail"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
            android:layout_weight="2"
            android:text="Gmail"/>

  <WebView 
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        >
 </WebView>

</LinearLayout>      
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:50:59.380

> 当我单击 google 按钮时，它会在 webview 中打开 google 网站，因为您看到它没有全屏打开 google 网站

这是因为您可能正在使用相同布局`Activity`的相同`XML`布局，而另一个`widgets`. 但解决方案并不难。

**1.**首先用一个小部件创建类似 web.xml 的东西`WebView`。

**2.**然后创建另一个从 Activity 扩展的类，例如`WebBrowser.java`

**3.**将其添加到您的`Manifest.xml`as `<activity android:name=".WebBrowser"></activity>`

**4.**在您​​的 WebBrowser 类中，将设置您的布局`setContentView(R.layout.web)`并初始化您的`WebView`.

**5.**点击`Google Button`新建`Intent`并开始新的`Activity`。

```
Intent i = new Intent(this, WebBrowser.class);
startActivity(i); 
```

你的`web.xml`罐头看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    >

    <WebView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        />

</LinearLayout> 
```

**注意：**为了支持全屏，您可以使用

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# oauth-2.0 - Google Api Php 客户端的刷新令牌

> ID：11168098
> 
> 赞同：8
> 
> 时间：2012-06-23T08:45:20.673
> 
> 标签：oauth-2.0, access-token, google-analytics-api

我正在使用 Google API 客户端访问 Google Analytics。我想在离线模式下访问数据，所以我需要一个刷新令牌。如何获得 refresh_token？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T17:30:27.150

尝试使用以下代码：

```
 <?php
        require_once 'apiClient.php';

        const REDIRECT_URL = 'INSERT YOUR REDIRECT URL HERE';
        const CLIENT_ID = 'INSERT YOUR CLIENT ID HERE';
        const CLIENT_SECRET = 'INSERT YOUR CLIENT SECRET';
        const ANALYTICS_SCOPE = 'https://www.googleapis.com/auth/analytics.readonly';

        // Build a new client object to work with authorization.
        $client = new apiClient();
        $client->setClientId(CLIENT_ID);
        $client->setClientSecret(CLIENT_SECRET);
        $client->setRedirectUri(REDIRECT_URL);
        $client->setScopes(array(ANALYTICS_SCOPE));
        $client->setAccessType('offline');
        $auth = $client->authenticate();

        if ($client->getAccessToken()) {
           $token = $client->getAccessToken();
           $authObj = json_decode($token);
           $refreshToken = $authObj->refresh_token;
        }
        ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-04T09:15:13.367

对于 Google Client v2 的 PHP SDK：

```
php composer.phar require google/apiclient:^2.0 
```

您可以尝试使用 PHP 代码来刷新 accessToken，如下所示：

```
<?php

require_once __DIR__ . '/vendor/autoload.php';

define('CLIENT_SECRET_PATH', __DIR__ . '/client_secret.json');
define('SCOPES', implode(' ', array(
  Google_Service_Analytics::ANALYTICS_READONLY)
));

$client = new Google_Client();
$client->setApplicationName('YOUR APPLICATION NAME');
$client->setScopes(SCOPES);
$client->setAuthConfig(CLIENT_SECRET_PATH);
$client->setAccessType('offline');

// Input AccessToken from such as session or database 
$accessToken = json_decode('YOUR CURRENT ACEESS TOKEN');

$client->setAccessToken($accessToken);

// Refresh the token if it's expired.
if ($client->isAccessTokenExpired()) {
    $client->fetchAccessTokenWithRefreshToken($client->getRefreshToken());
    // Get RefreshToken as json which can be reused
    $refreshToken = json_encode($client->getAccessToken());
} 
```

* * *

### 离线访问问题

另外，如果你想在你的服务器端应用程序中保留现有的行为，你需要设置`approval_prompt`为`force`，否则你可能会得到从 getRefreshToken() 返回的 NULL，Google 文档没有提到：

```
$client->setApprovalPrompt('force'); 
```

> 参考[OAuth 2.0 端点即将发生的变化](http://googlecode.blogspot.tw/2011/10/upcoming-changes-to-oauth-20-endpoint.html)

# magento - Editing Magento Checkout Form

> ID：11168102
> 
> 赞同：0
> 
> 时间：2012-06-23T08:45:34.973
> 
> 标签：magento, checkout

On clicking "place order" in Magento, I want to capture some of its values and feed them to the following form:

```
<form method="post" action="https://www.jambopay.com/JPExpress.aspx" target="_blank">
<input type="hidden" name="jp_item_type" value="cart"/>
<input type="hidden" name="jp_item_name" value="test shop"/>
<input type="hidden" name="order_id" value="455879"/>
<input type="hidden" name="jp_business" value="business@yourdomain.com"/>
<input type="hidden" name="jp_amount_1" value="51"/>
<input type="hidden" name="jp_amount_2" value="0"/>
<input type="hidden" name="jp_amount_5" value="0"/>
<input type="hidden" name="jp_payee" value="email@yourcustomer.com"/>
<input type="hidden" name="jp_shipping" value="company name"/>
<input type="hidden" name="jp_rurl" value="http://www.yourwebsite.com/testpost/Result.aspx?ii=0"/>
<input type="hidden" name="jp_furl" value="http://www.yourwebsite.com/testpost/Result.aspx?ii=1"/>
<input type="hidden" name="jp_curl" value="http://www.yourwebsite.com/testpost/Result.aspx?ii=2"/>
<input type="image" src="https://www.jambopay.com/jambohelp/jambo/rsc/paymentsbyJamboPay.jpg"/>
</form> 
```

The values include: Order Number, Total Amount, Customers Email Address,

How do i do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:08:48.457

您可以在调用保存订单后获取订单值，
`$orderId = Mage::getSingleton('checkout/session')->getLastOrderId();` 一旦您有订单 ID，您可以从此方法获取最后一个订单 ID，然后像这样加载订单 `$order = Mage::getModel('sales/order')->load($orderId);` ，您可以获得订单的所有详细信息

# java - 带有 iaik 的 Java PKCS11

> ID：11168110
> 
> 赞同：1
> 
> 时间：2012-06-23T08:46:34.050
> 
> 标签：java, applet, smartcard, pkcs#11

我使用它创建了一个小程序，`iaik libraries`它在我的小程序查看器中完美运行，但在我的网络浏览器中我得到了这个：受信任的加载程序试图加载沙盒资源有什么想法吗？

好的，所以我让它工作，但我也想知道为什么......我正在使用netbeans......在我设置自签名选项后，我编译并在我的dist文件夹中创建了一个带有我的类的jar文件。 ..之后我复制了我的jar文件，libs ...等。到带有我的小程序的文件夹......并运行它......那么沙盒是什么，我为什么不再得到它......我还将那个PKCS11Wrapper复制到我的jdk / bin文件夹......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:23:48.520

出现问题是因为您的小程序尝试访问本机库并且您的小程序必须进行签名，但是您已经编写了您对其进行签名的内容，因此，如果您将代码放在 jre/lib/ext 目录中，请对代码进行签名不是必需的，尝试从小程序创建控制台应用程序并尝试启动它。我想您会看到一切正常，而您的 IDE 签名不起作用。[如何从 main 方法启动小程序](http://java.sun.com/developer/technicalArticles/Programming/TurningAnApplet/)

# vb.net - 这个 VB.net/COM dll 中的执行线程发生了什么？

> ID：11168112
> 
> 赞同：0
> 
> 时间：2012-06-23T08:46:37.780
> 
> 标签：vb.net, multithreading, dll, com

根据[另一个问题](https://stackoverflow.com/questions/11155628/visual-basic-net-how-to-create-a-thread-to-update-the-ui/11155681)的答案，如果创建它的线程很忙，则无法更新 VB 用户界面：因此为什么大型计算作业通常必须进入后台任务。

这就是神秘的东西。我有以下代码。它在进程内 COM 上调用，像这样

1.  客户来电`showform()`
2.  客户端做了大量的工作，在这个过程中冻结了自己的 UI
3.  客户端完成工作，返回更新自己的 UI

在第 2 步，VB 表单在那里但被冻结 - 您无法与之交互。在第 3 步，VB 表单变得可用。但这是为什么呢？执行线程肯定已经返回给客户端了吗？如果客户端以某种方式处理表单的事件，它通过什么魔法知道要处理哪些事件以及将它们发送到哪里？

```
<ComClass(ComClass1.ClassId, ComClass1.InterfaceId, ComClass1.EventsId)> _
Public Class ComClass1

  Public Sub New()
      MyBase.New()
  End Sub

  Private f1 As Form1

  Public Sub showform()
      f1 = New Form1()
      f1.Show()
  End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:16:36.893

你所说的*魔法*是 Windows 编程的基础。我对您上一个问题的回答解释了为什么以及如何解决此问题。当进行 COM 调用时，客户端应用程序只需将您的过程导入到他们的应用程序中。无论他们是通过自己键入代码来创建表单，还是使用您键入的代码来创建表单，都不会改变对象/所有者关系的性质。对您的 COM 调用`showForm`仍将`f1`属于进行调用的线程（客户端 UI 线程）。该窗口的窗口句柄仍将由创建它的 UI 线程（客户端）负责。

创建一个表单只会创建一个邮箱（窗口句柄）。UI 线程是一个邮递员（消息泵循环）。您没有为客户提供一个新的邮递员，而只是一个带有邮箱的新对象。当客户端程序通过对您的过程进行 COM 调用来创建窗口时，它（客户端 UI 线程）负责将消息传递到新表单的邮箱（将其窗口句柄注册到主 UI 线程）。他们的邮递员仍然需要向您发送消息以使您的视觉对象正常工作。如果他正忙于将 pi 计算到小数点后一万亿位，那么您的对象就会像他的邮件路线上的其他所有东西一样冻结。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:59:34.920

检查 form.load 事件。表单加载并运行代码......这就是它冻结的地方。

# android - Android 覆盖的方法从不调用

> ID：11168114
> 
> 赞同：0
> 
> 时间：2012-06-23T08:46:45.847
> 
> 标签：android, overriding

这是来自 Activity 类的示例代码，我尝试通过调用实现 OnListGestureDetectorTest 接口的 setOnListGestureDetectorTest 方法来覆盖 ListGestureDetector 类中的方法（下面的第二个示例代码）。深入调试器，我意识到从未调用过 onRTLFling、onLTRFling 和 customOnItemClick 的覆盖函数。只有 ListGestureDetector 类调用了原始的空函数。我做错了什么以及为什么覆盖的函数从不调用？

```
 ListGestureDetector listGestureDetectorListener = new ListGestureDetector(
            this, mEarningsListView);

    listGestureDetectorListener
            .setOnListGestureDetectorTest(new ListGestureDetector.OnListGestureDetectorTest() {

                @Override
                public void onRTLFling(int pos) {
                    Log.d(TAG,"onRTLFling");

                }

                @Override
                public void onLTRFling(int pos) {
                    Log.d(TAG,"onLTRFling");

                }

                @Override
                public void customOnItemClick(int position) {
                    Log.d(TAG,"onLTRFling");
                }
            });

    final GestureDetector gestureDetector = new GestureDetector(
            listGestureDetectorListener);
    View.OnTouchListener gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    };

    mEarningsListView.setOnTouchListener(gestureListener); 
```

这是 ListGestureDetector 类

```
public class ListGestureDetector extends SimpleOnGestureListener {

private int REL_SWIPE_MIN_DISTANCE;
private int REL_SWIPE_MAX_OFF_PATH;
private int REL_SWIPE_THRESHOLD_VELOCITY;
private ListView mList;

// Detect a single-click and call my own handler.
@Override
public boolean onSingleTapUp(MotionEvent e) {
    int pos = mList.pointToPosition((int) e.getX(), (int) e.getY());
    customOnItemClick(pos);
    return false;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    if (Math.abs(e1.getY() - e2.getY()) > REL_SWIPE_MAX_OFF_PATH)
        return false;
    if (e1.getX() - e2.getX() > REL_SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) {
        int pos = mList.pointToPosition((int) e1.getX(),
                (int) e1.getY());
        onRTLFling(pos);
    } else if (e2.getX() - e1.getX() > REL_SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) {
        int pos = mList.pointToPosition((int) e1.getX(),
                (int) e1.getY());
        onLTRFling(pos);
    }
    return false;
}

public ListGestureDetector(Context c, ListView list) {
    super();
    mList = list;
    // Density-aware measurements
    DisplayMetrics dm = c.getResources().getDisplayMetrics();
    REL_SWIPE_MIN_DISTANCE = (int) (120.0f * dm.densityDpi / 160.0f + 0.5);
    REL_SWIPE_MAX_OFF_PATH = (int) (250.0f * dm.densityDpi / 160.0f + 0.5);
    REL_SWIPE_THRESHOLD_VELOCITY = (int) (200.0f * dm.densityDpi / 160.0f + 0.5);
}

interface OnListGestureDetectorTest {
    void customOnItemClick(int position);
    void onRTLFling(int pos);
    void onLTRFling(int pos);
}

public void customOnItemClick(int position) {
}

public void onRTLFling(int pos) {       
}

public void onLTRFling(int pos) {       
}

public void setOnListGestureDetectorTest(OnListGestureDetectorTest ogd) {       
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:07:43.173

我找到了如何在链接[http://tseng-blog.nge-web.net/blog/2009/02/17/how-implement-your-own-listener-android-java/上正确实现监听器的解决方案](http://tseng-blog.nge-web.net/blog/2009/02/17/how-implement-your-own-listener-android-java/)

我根据上面的链接 ListGestureDetector 类进行了更改：

```
public class ListGestureDetector extends SimpleOnGestureListener {

private int REL_SWIPE_MIN_DISTANCE;
private int REL_SWIPE_MAX_OFF_PATH;
private int REL_SWIPE_THRESHOLD_VELOCITY;
private ListView mList;

OnListGestureDetector onListGestureDetector = null;

// Detect a single-click and call my own handler.
@Override
public boolean onSingleTapUp(MotionEvent e) {
    int pos = mList.pointToPosition((int) e.getX(), (int) e.getY());
    onListGestureDetector.customOnItemClick(pos);
    return false;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    if (Math.abs(e1.getY() - e2.getY()) > REL_SWIPE_MAX_OFF_PATH)
        return false;
    if (e1.getX() - e2.getX() > REL_SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) {
        int pos = mList.pointToPosition((int) e1.getX(),
                (int) e1.getY());
        onListGestureDetector.onRTLFling(pos);
    } else if (e2.getX() - e1.getX() > REL_SWIPE_MIN_DISTANCE
            && Math.abs(velocityX) > REL_SWIPE_THRESHOLD_VELOCITY) {
        int pos = mList.pointToPosition((int) e1.getX(),
                (int) e1.getY());
        onListGestureDetector.onLTRFling(pos);
    }
    return false;
}

public ListGestureDetector(Context c, ListView list) {
    super();
    mList = list;
    // Density-aware measurements
    DisplayMetrics dm = c.getResources().getDisplayMetrics();
    REL_SWIPE_MIN_DISTANCE = (int) (120.0f * dm.densityDpi / 160.0f + 0.5);
    REL_SWIPE_MAX_OFF_PATH = (int) (250.0f * dm.densityDpi / 160.0f + 0.5);
    REL_SWIPE_THRESHOLD_VELOCITY = (int) (200.0f * dm.densityDpi / 160.0f + 0.5);
}

interface OnListGestureDetector {
    public abstract void customOnItemClick(int position);
    public abstract void onRTLFling(int pos);
    public abstract void onLTRFling(int pos);
}

public void setOnListGestureDetector(OnListGestureDetector ogd) {   
    onListGestureDetector = ogd;
}

} 
```

# http - Express.js 在控制器中获取 http 方法

> ID：11168115
> 
> 赞同：77
> 
> 时间：2012-06-23T08:47:05.707
> 
> 标签：http, node.js, express

我正在构建一个注册表单（本地护照作为身份验证，表单作为表单助手）。

因为注册只知道 GET 和 POST 我想在一个函数中完成整个处理。

换句话说，我正在寻找类似的东西：

```
exports.register = function(req, res){
    if (req.isPost) {
       // do form handling
    }
    res.render('user/registration.html.swig', { form: form.toHTML() });
}; 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-06-24T10:54:52.207

答案很简单

```
exports.register = function(req, res) {
    if (req.method == "POST") {
       // do form handling
    }
    res.render('user/registration.html.swig', { form: form.toHTML() });
}; 
```

但是我在快速指南中搜索了很长时间。

最后节点文档有这样的详细信息： [http ://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2018-05-16T21:34:28.253

现在你可以在 npm => "method-override" 中使用一个包，它提供了一个覆盖 "req.method" 属性的中间件层。

基本上，您的客户端可以发送带有修改后的“req.method”的 POST 请求，例如`/registration/passportID?_method=PUT`.

这

> ?_method=XXXXX

部分是让中间件识别这是一个秘密 PUT 请求。

流程是客户端向您的服务器端发送一个带有数据的 POST 请求，中间件翻译请求并运行相应的“app.put...”路由。

我认为这是一种妥协的方式。更多信息：[方法覆盖](https://www.npmjs.com/package/method-override)

# php - PHP 服务器端打印 Ubuntu 服务器

> ID：11168116
> 
> 赞同：4
> 
> 时间：2012-06-23T08:47:14.160
> 
> 标签：php, printing, lamp, intranet, cups

我一直在寻找执行此操作所需的内容，并最终感到有些困惑。

让我们直截了当地说，这是一个基于本地的 Intra-net，我知道 PHP 是服务器端的。

我在基于 Web 的 PHP、JAVA、Jquery Idea 上运行公司管理解决方案。我们想直接从“LINUX”服务器打印报告和收据等。

我已经在服务器上安装了 cups 并且服务器打印正常，我现在只是坚持是否真的可以让服务器打印我们直接从 PHP 代码生成的 pdf 文件。

即使我们有一个 bash 脚本来运行并检查一个目录打印 pdf 然后删除它，我也会很高兴，即使我暂时认为这是一种解决方法。

就像我说的，我确实明白，如果这是在 WWW 上完成的，那么就会有某些可以利用的漏洞。如果我要在 www 上运行该系统，我将拥有一个完全不同的站点，该站点不允许打印，并且不需要此功能。

先感谢您

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:39:54.223

如果 CUPS 配置正确，从 shell 打印 PDF 就像

```
lpr myfile.pdf 
```

因此，一旦您将 PDF 写入临时文件，您就可以使用任何可用的 PHP 函数来执行该 shell 命令：`exec()`、、、`shell_exec()``system()`

您甚至可以在不编写临时文件的情况下执行此操作，并`lpr`通过 STDIN 直接将数据提供给（尝试`cat myfile.pdf | lpr`作为 shell 上的示例）。

如果您使用`proc_open()`. [PHP 手册](http://de3.php.net/manual/en/function.proc-open.php)中的第一个示例可以适应如下内容：

```
<?php
$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
);

$process = proc_open('lpr', $descriptorspec, $pipes);

if (is_resource($process)) {
    // $pipes now looks like this:
    // 0 => writeable handle connected to child stdin
    // 1 => readable handle connected to child stdout
    // Any error output will be appended to /tmp/error-output.txt

    fwrite($pipes[0], $pdf_data);
    fclose($pipes[0]);
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-02T13:28:33.263

使用[PHP::PRINT::IPP](http://www.nongnu.org/phpprintipp/)

这是使用 PHP 从 Web 打印的最安全和最简单的方法。在这里，您不必启用可利用的 php 函数`exec()`，例如`shell_exec()`等。

基本用法

```
 <?php
  require_once(PrintIPP.php);

  $ipp = new PrintIPP();                        
  $ipp->setHost("localhost");
  $ipp->setPrinterURI("/printers/epson");
  $ipp->setData("./testfiles/test-utf8.txt"); // Path to file.
  $ipp->printJob();                                                          
?> 
```

[参考](http://www.nongnu.org/phpprintipp/usage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:05:17.430

明智地使用 php`shell_exec()`应该允许您在创建 PDF 后立即同步打印 PDF，从而避免使用 bash。

我没有用于`shell_exec()`打印，因此无法提供详细信息，但本质上，如果您可以成功编写 UNIX 打印命令，那么您可以编写`shell_exec()`指令。

# android - 如何在弹出窗口中使用scrollfview

> ID：11168117
> 
> 赞同：0
> 
> 时间：2012-06-23T08:47:37.407
> 
> 标签：android, xml, popupwindow

我正在尝试在弹出窗口中使用滚动视图，它在一定程度上可以工作，但是当我向下滚动时，文本仍然可见 - 如何在弹出窗口中使用此代码？

```
 <ScrollView 
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content"
 android:layout_height="fill_parent"
 android:orientation="vertical"
 android:background="#333333">
 <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:padding="10dp"     >
     <TextView 
        android:id="@+id/popupView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/helpmenu"
        android:textSize="1600pt"  />
     <Button
        android:id="@+id/close"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center"
        android:text="Close"    />
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:35:19.043

jcw 我找到了解决这个问题的方法，我知道它为时已晚，但仍可供将来使用。使用任何父布局，如 Frame 或线性，相对于滚动视图上方，您面临的问题将消失。

# c# - 多线程服务器可以处理多少个客户端？

> ID：11168119
> 
> 赞同：1
> 
> 时间：2012-06-23T08:47:49.913
> 
> 标签：c#

我正在使用多线程服务器来处理客户端通信，我不知道该服务器可以处理多少个客户端。如果客户数量增加，它是否能够处理它们？我在 core2duo 处理器上使用它。如果我将一半客户端重定向到具有另一个端口的新服务器，在不同端口上启动服务器会解决问题吗？

这是我的服务器代码

 ````
Public void ListenForClients()
        {
            this.tcpListener.Start();

            while (true)
            {      
                try
                {
                    TcpClient client = this.tcpListener.AcceptTcpClient();
                    NetworkStream clientStream = client.GetStream();   //create networkstream for connected client                         
                    Console.WriteLine(((IPEndPoint)client.Client.RemoteEndPoint).Address.ToString());//client ipaddress
                    Console.WriteLine("connecting..");
                    Thread clientThread = new Thread(new ParameterizedThreadStart(updatedb));                    
                    clientThread.Start(client);

                }
                catch (Exception ex)
                {
                    Console.WriteLine("exception" + ex.ToString());
                    Console.ReadLine();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T16:53:19.333

我建议你阅读作者的[这篇博客文章](http://blogs.msdn.com/b/tmarq/archive/2010/04/14/performing-asynchronous-work-or-tasks-in-asp-net-applications.aspx)和类似的文章。他在那里详细解释了 IIS / ASP.NET 如何使用多线程。
您必须记住的是，即使您可以创建更多线程（例如，按照您的建议，通过运行您的应用程序的另一个实例），这并不意味着您的应用程序将更具响应性/更快地向客户返回预期的答案，因为在任何给定时刻，运行线程的数量只能与服务器的 CPU 数量一样多。
我认为您不需要编写代码以期望崩溃，而是朝着更多异步处理的方向工作，就像 ISS 服务器（实际上也在做同样的事情 - 服务 TCP 连接）正在做的那样。没有理由不使用 .NET 提供的线程池，让它在每个给定时刻处理真实数量的共存线程，并让其他请求排队，直到一个线程变得可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:44:12.067

没有实际尝试，其他一切都是猜测。正如 Hans Passant 所说，为每个请求创建一个新线程的策略不会很好地扩展。一开始可能看起来没问题，但你应该会看到性能在数百个同时用户的情况下严重下降。此外，看起来工作将与数据库（updatedb）进行通信，所以您创建的这些线程只是将数据发送到外部进程并等待回复？这是线程最糟糕的用途。看看是否可以使用[异步 sql 更新](http://msdn.microsoft.com/en-us/library/ff664464%28v=pandp.50%29.aspx)。`

# php - PHP获取文件行数并将文件指针移动到指定行的方法？

> ID：11168122
> 
> 赞同：3
> 
> 时间：2012-06-23T08:47:53.560
> 
> 标签：php, filesystems, flat-file

有没有办法：

1.  计算我的 small_db.php 中的行数（1 行 = 数据行）
2.  告诉 PHP 将文件指针准确地移动到第 322 行的开头。（所以我可以从这一行获取 fgets() 数据）
3.  告诉 PHP 返回行号或出现文本“Quick brown fox”的行的全部内容？

我知道还有另一种方法可以将文件的所有内容放在一个字符串中，但是如您所知，如果文件很大，那么该方法的时间和内存效率都会低下。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-23T16:12:11.273

首先，这里有一些基本变量：

```
$filename = 'small_db.php';
$linenum  = 322;
$needle = 'Quick brown fox'; 
```

1.  > 如何计算文件中的行数？

    要快速轻松地执行此操作，请在使用[`count()`](http://php.net/count)以下命令打开文件后使用[`file()`](http://php.net/file)：

    ```
    $count = count( file( $filename)); 
    ```

    但是，如果您的文件很大，**这将使用大量内存**，因为它必须将整个文件加载到内存中才能计算`file()`. 或者，您可以使用标准文件函数 、、 [`fopen()`](http://php.net/fopen)和,打开文件并逐行读取，同时保持计数，如下所示：[`feof()`](http://php.net/feof)[`fgets()`](http://php.net/fgets)[`fclose()`](http://php.net/fclose)

    ```
    $count = 0;
    $fp = fopen( $filename, 'r');

    while( !feof( $fp)) {
        fgets( $fp);
        $count++;
    }

    fclose( $fp); 
    ```

2.  > 如何将文件指针移动到特定行号的开头？

    这最好使用[`SplFileObject`](http://us2.php.net/splfileobject)类来实现。您使用正在打开的文件的文件名创建此类的新对象，然后用于[`seek()`](http://php.net/splfileobject.seek)查找您选择的行号。然后，您可以使用[`key()`](http://splfileobject.key)显示行号和[`current()`](http://php.net/splfileobject.current)（或[`getCurrentLine()`](http://php.net/splfileobject.getcurrentline)或[`fgets()`](http://php.net/splfileobject.fgets)）来获取该行的内容，如下所示：

    ```
    // Create a new object for the file
    $file = new SplFileObject( $filename);

    // Seek to to the specific line number
    $file->seek( $linenum);  

    // Print that line:
    echo 'Line #' . $file->key() . ' contains: ' . $file->current(); 
    ```

3.  > 如何返回出现特定针的行号或行的全部内容？

    据我所知，没有内置的 PHP 函数/方法可以做到这一点。您将需要使用类似于此函数的东西自己解析它，该函数检查文件中的每一行，由其文件指针给出`$fp`，针对特定的区分大小写的`$needle`使用[`strpos()`](http://php.net/strpos)（您可以[`stripos()`](http://php.net/stripos)用于不区分大小写的搜索）：

    ```
    function find_in_file( $fp, $needle) {
        rewind( $fp); // Or: fseek($fp, 0);

        $line_number = 0;

        while( !feof( $fp)) {
            $line = fgets( $fp);
            if( !( strpos( $line, $needle) === false)) {
                break;
            }
            $line_number++;
        }

        return feof( $fp) ? null : array( 
            'line_number' => $line_number,
            'line' => fgets( $fp)
        );
    } 
    ```

    您需要像这样调用此函数：

    ```
    $fp = fopen( $filename, 'r');
    $return = find_in_file( $fp, $needle);
    if( !is_null( $return)) {
        echo 'Found ' . $needle . ' in line #' . $return['line_number'] . "\n";
        echo 'That line contains: ' . $return['line'];
    }
    fclose( $fp); 
    ```

# php - 使用 PHP 解析需要用户登录的页面

> ID：11168130
> 
> 赞同：0
> 
> 时间：2012-06-23T08:50:19.293
> 
> 标签：php, parsing, curl, login

我试图使用 php 的 Curl 登录到一个页面.. 然后在登录后解析数据.. 我使用 Curl 发布了所有变量的值.. bt amnt 能够登录到该页面.. 请帮助..

这是我的代码：

```
<?php
$fields_string=array();
$url = '`http://data.bsnl.in/wps/portal/!ut/p/c5/04_SB8K8xLLM9MSSzPy8xBz9CP0os3hnd0cPE3!MfAwMLFzcLAyMnUzPPQAMXAwNfM_1wkA6zeAMcwNFA388jPzdVP1I_yhynOa4G-iH6kU76Bdl55QaOiooAzstUAA!!/dl3/d3/L2dBISEvZ0FBIS9nQSEh/`';

$fields = array(
            "userID"=>"xxxxxxxx",
    "password"=>"xxxxxxx"
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) 
{ 
$fields_string .= $key.'='.$value.'&'; 
}
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields);

//execute post
$result = curl_exec($ch);
echo $result;

//close connection
curl_close($ch);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:55:41.550

代替

```
$fields = array(
    "userID"   => "xxxxxxxx",
    "password" => "xxxxxxxx"
); 
```

尝试

```
$fields = array(
    "wps.portlets.userid" => "xxxxxxxx",
    "password"            => "xxxxxxxx"
); 
```

# ruby-on-rails - 将 Rails 应用程序部署到两个域

> ID：11168131
> 
> 赞同：1
> 
> 时间：2012-06-23T08:50:19.817
> 
> 标签：ruby-on-rails, deployment

我想将我的 rails 应用程序部署到两个域

```
lab.mysitename.com
mysitename.com 
```

实验室站点应具有与主站点不同的数据库。基本上我想在实验室网站上做一些实验，我想授予特定用户访问权限。

我正在使用 cap deploy:cold 部署到主应用程序（mysitename.com）。

我想要一些遵循这种情况的东西

```
-- do something risky or fun to have 
--> deploy to lab.mysitename.com
-- users play with the site and modify a sandboxed database (not the main database). everything looks great and the team loved it 
--> deploy to the main site (mysitename.com) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:43:06.487

一种常见的方法是通过 capistrano 的[多级](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)扩展。

这允许您将一些 capistrano 设置（例如要部署到哪些主机，或者如果您希望同一服务器中的所有内容都部署到磁盘上的哪个位置）到单独的文件中。

然后你做

```
cap production deploy 
```

使用您的生产阶段的设置进行部署，并且

```
cap labs deploy 
```

将其部署到您的实验室阶段。

究竟是什么阶段取决于你。例如，您可以让它使用不同的 database.yml 或部署存储库的特定分支。

# php - php 函数不再识别在其外部定义的变量

> ID：11168132
> 
> 赞同：-1
> 
> 时间：2012-06-23T08:50:23.293
> 
> 标签：php, function, variables

我对php比较陌生，遇到了一个非常奇怪的问题。让我举一个非常简单的代码示例

```
$test = 'test';

function test(){
    echo $test;
}

test(); 
```

在上面的示例中，它过去工作得非常好，作为调用 test() 函数的结果返回“test”。但是，就在今天它开始返回错误，说变量 $test 未定义。我 100% 确信它以前工作得很好。这是php中的一些更新吗？还是我在这里做错了什么？我正在使用 wamp 并在我的本地主机上进行测试。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:51:56.810

这是预期的行为，称为“可变范围”

阅读： http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

“陷阱”之一是：

> 您可能会注意到这与 C 语言有点不同，因为 C 中的全局变量自动可用于函数，除非被局部定义特别覆盖。这可能会导致一些问题，因为人们可能会无意中更改全局变量。在 PHP 中，如果要在函数中使用全局变量，则必须在函数中声明它们为全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:53:01.573

这是因为它超出了功能范围。要访问在函数外部定义的变量，您必须使用 global 关键字。

```
$test = 'test';

function test(){
    global $test
    echo $test;
}

test(); 
```

请在此处阅读有关 php 手册链接的变量范围：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T08:54:18.110

在函数内部，需要声明`global $test;`函数 test 中的变量 test 才有意义。此外，在大括号 {} 中声明的任何变量都将在离开大括号范围时被取消设置，而不仅仅是在函数内。

# git - 查找当前在 Git 中签出的提交

> ID：11168141
> 
> 赞同：207
> 
> 时间：2012-06-23T08:51:38.843
> 
> 标签：git

我正在`git bisect`开会。

找出我当前正在进行的提交（SHA1 哈希）的命令是什么？`git status`不提供这个。

编辑：我想打电话`git log`和看第一个条目有效吗？

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2013-08-10T08:46:01.067

在会话期间，您至少有 5 种不同的方式来查看您当前已签出到工作副本中的提交`git bisect`（**请注意，选项 1-4 在您不进行 bisect 时也可以使用**）：

1.  `git show`.
2.  `git log -1`.
3.  Bash 提示。
4.  `git status`.
5.  `git bisect visualize`.

我将在下面详细解释每个选项。

### 选项 1：git 显示

正如[this answer](https://stackoverflow.com/questions/11168141/git-which-commit-am-i-on-have-checked-out/11168148#11168148) to the general question of how to determine which commit you current has check-out (不仅仅是 during `git bisect`) 中所解释的那样，您可以使用`git show`选项`-s`来抑制补丁输出：

```
$ git show --oneline -s
a9874fd Merge branch 'epic-feature' 
```

### 选项 2： git log -1

您也可以简单`git log -1`地找出您当前正在进行的提交。

```
$ git log -1 --oneline
c1abcde Add feature-003 
```

### 选项 3：Bash 提示符

在 Git 版本 1.8.3+（或者它是更早的版本？）中，如果您将 Bash 提示配置为显示您已签出到工作副本中的当前分支，那么它还会显示您已检查的当前提交在平分会话期间或当您处于“分离 HEAD”状态时。在下面的示例中，我目前已`c1abcde`签出：

```
# Prompt during a bisect
user ~ (c1abcde...)|BISECTING $

# Prompt at detached HEAD state 
user ~ (c1abcde...) $ 
```

### 选项 4：git 状态

同样从 Git 版本 1.8.3+（可能更早，再次不确定）开始，运行`git status`还将显示您在 bisect 期间以及处于分离 HEAD 状态时签出的提交：

```
$ git status
# HEAD detached at c1abcde <== RIGHT HERE 
```

### 选项 5：git bisect 可视化

最后，当你在做 a`git bisect`时，你也可以简单地使用[`git bisect visualize`](https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html#_bisect_visualize)或者它的内置别名`git bisect view`来启动`gitk`，这样你就可以以图形方式查看你正在进行的提交，以及到目前为止你标记为坏和好的提交。我很确定这在 1.8.3 版本之前就已经存在了，我只是不确定它是在哪个版本中引入的：

```
git bisect visualize 
git bisect view # shorter, means same thing 
```

![在此处输入图像描述](../Images/b5f8fa579b1a2967a43ac57a19e99e29.png)

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2012-06-23T08:53:32.713

你可以这样做：

```
git rev-parse HEAD 
```

进一步解释一下：`git rev-parse`是 git 的基本命令，用于解释[您可以指定提交名称的任何奇异方式，](http://git-scm.com/docs/git-rev-parse#_specifying_revisions)并且`HEAD`是对当前提交或分支的引用。（在`git bisect`会话中，它直接指向提交（“分离的 HEAD”）而不是分支。）

或者（更容易记住）就是这样做：

```
git show 
```

...默认显示`HEAD`指向的提交。对于更简洁的版本，您可以执行以下操作：

```
$ git show --oneline -s
c0235b7 Autorotate uploaded images based on EXIF orientation 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-06-23T08:53:06.733

```
$ git rev-parse 头
273cf91b4057366a560b9ddcee8fe58d4c21e6cb

```

更新：

或者（如果您有标签）：

（适合命名版本，不太适合传回 git。）

```
$ git描述
v0.1.49-localhost-ag-1-g273cf91

```

或者（正如 Mark 建议的那样，为了完整起见，请在此处列出）：

```
$ git show --oneline -s
c0235b7 根据 EXIF 方向自动旋转上传的图像

```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-03-02T07:37:12.213

如果您只想提取一条简单的信息，您可以使用`git show`选项`--format=<string>`...并要求它不要给您与`--no-patch`. 这意味着您可以获得任何您想要的 printf 样式的输出，通常可能是单个字段。

例如，要获得缩短的哈希 ( `%h`)，您可以说：

```
$ git show --format="%h" --no-patch
4b703eb 
```

如果您希望将其保存到 bash 中的环境变量中（人们可能想要做的事情），您可以使用以下[`$()`语法](https://stackoverflow.com/a/4651495/211160)：

```
$ GIT_COMMIT="$(git show --format="%h" --no-patch)"

$ echo $GIT_COMMIT
4b703eb 
```

[您可以执行的操作`git show --help`](https://git-scm.com/docs/git-show)的完整列表位于. 但这里有一个可能有用的属性的简短列表：

*   `%H`提交哈希
*   `%h`缩写提交哈希
*   `%T`树哈希
*   `%t`缩写树哈希
*   `%P`父哈希
*   `%p`缩写的父哈希
*   `%an`作者姓名
*   `%ae`作者电子邮件
*   `%at`作者日期，UNIX 时间戳
*   `%aI`作者日期，严格的 ISO 8601 格式
*   `%cn`提交者姓名
*   `%ce`提交者电子邮件
*   `%ct`提交者日期，UNIX 时间戳
*   `%cI`提交者日期，严格的 ISO 8601 格式
*   `%s`学科
*   `%f`净化的主题行，适合文件名
*   `%gD`reflog 选择器，例如 refs/stash@{1}
*   `%gd`缩短的 reflog 选择器，例如 stash@{1}

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-23T10:37:21.073

使用`git show`，它还会向您显示提交消息，并且在不给定参数时默认为当前提交。

# c# - StorageFile.OpenAsync 中的 UnauthorizedAccessException

> ID：11168143
> 
> 赞同：4
> 
> 时间：2012-06-23T08:52:06.800
> 
> 标签：c#, io, windows-runtime, file-access

我使用以下代码下载/保存图像并稍后打开它，但在稍后的 OpenAsync 中，它抛出了 UnauthorizedAccessException，似乎文件没有关闭，但实际上 IRandomAccessStream/DataWriter 已被释放。

```
HttpClient httpClient = new HttpClient();
HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, "http://www.silverlightshow.net/Storage/Users/nikolayraychev/Perspective_Transforms_4.gif");
HttpResponseMessage response = await httpClient.SendAsync(request, HttpCompletionOption.ResponseHeadersRead);

//Write Image File
StorageFile imageFile = await ApplicationData.Current.LocalFolder.CreateFileAsync("test.gif", CreationCollisionOption.ReplaceExisting);
using (IRandomAccessStream fs = await imageFile.OpenAsync(FileAccessMode.ReadWrite))
{
    using (DataWriter writer = new DataWriter(fs.GetOutputStreamAt(0)))
    {
        writer.WriteBytes(await response.Content.ReadAsByteArrayAsync());
        await writer.StoreAsync();
        writer.DetachStream();
        await fs.FlushAsync();
    }
 }

 StorageFile imageFile1 = await ApplicationData.Current.LocalFolder.GetFileAsync("test.gif");
 //Exception is throwed here
 using (IRandomAccessStream stream = await imageFile1.OpenAsync(FileAccessMode.Read))
 {
     BitmapImage img = new BitmapImage();
     img.SetSource(stream);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T11:27:05.717

我遇到了同样的问题，必须在完成之前显式处理流和文件对象。

```
 var file = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, Windows.Storage.CreationCollisionOption.ReplaceExisting);
    using (var fs = await file.OpenAsync(Windows.Storage.FileAccessMode.ReadWrite))
    {
        var outStream = fs.GetOutputStreamAt(0);
        var dataWriter = new Windows.Storage.Streams.DataWriter(outStream);
        dataWriter.WriteString("Hello from Test!");
        await dataWriter.StoreAsync();
        dataWriter.DetachStream();
        await outStream.FlushAsync();
        outStream.Dispose(); // 
        fs.Dispose();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:15:09.960

当您使用“等待”时，您不能“使用”。原因是编译器如何将您的 C# await/async 转换为 IL。你可以反编译看看。

当处理器到达时：

```
await writer.StoreAsync(); 
```

实际上它会立即返回给调用者（参见 IL）。由于你使用的是“using”，所以`Dispose`调用了`IRandomAccessStream fs的接口并释放了资源。在“StoreAsync”中启动的线程需要这些资源。

因此，您必须`Dispose`在 await 之后显式调用。

同样的问题出现在 try/exception/catch 块中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T10:48:16.587

在我看来，您正在泄漏传递给的流

```
 using (DataWriter writer = new DataWriter(fs.GetOutputStreamAt(0))) 
```

如果流是引用计数的（毕竟是winRT），那么一个引用将由传递给构造函数的临时对象持有，并由DataWriter中的构造函数递增。

临时对象将等待垃圾回收。

如果您改为这样做，它是否有效：

```
using (var st0 = fs.GetOutputStreamAt(0))
    using (DataWriter writer = new DataWriter(st0)) 
```

# android - Mysql查询对应的Sqlite查询语法

> ID：11168147
> 
> 赞同：1
> 
> 时间：2012-06-23T08:53:27.333
> 
> 标签：android, mysql, sqlite

请帮助我找到与以下查询等效的 sqlite。尝试搜索了很多。

```
 SET @rownum := 0;
SELECT * FROM (
SELECT @rownum := @rownum+1 AS rank, id
FROM tbl_flight
ORDER BY id DESC
) AS tbl_flight WHERE id = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:12:09.903

您不能在单个查询中执行此操作，但您可以使用临时表和每个表的 rowid 属性：

[http://sqlfiddle.com/#!5/f0a1b/8](http://sqlfiddle.com/#!5/f0a1b/8)（你不能运行小提琴两次，你必须总是先重建架构，然后再运行它）

```
DROP TABLE IF EXISTS tmp;

CREATE TEMPORARY TABLE tmp AS 
  SELECT id
  FROM tbl_flight
  ORDER BY id DESC;

SELECT tmp.rowid AS rank, tmp.id FROM tmp WHERE id=2; 
```

# c# - 无法在 Visual Studio 2010 IDE 中添加启用 HTTPS 的 WCF 服务作为服务参考

> ID：11168154
> 
> 赞同：5
> 
> 时间：2012-06-23T08:55:08.373
> 
> 标签：c#, wcf

通过 Visual Studio 2010 IDE 添加启用 HTTPS 的 WCF 服务作为服务引用时，发生以下异常

> 下载“https://abc.cloudapp.net/DataService.svc”时出错。请求失败，HTTP 状态为 403：禁止。元数据包含无法解析的引用：“https://abc.cloudapp.net/DataService.svc”。客户端身份验证方案“匿名”禁止 HTTP 请求。远程服务器返回错误：(403) Forbidden。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

请为此建议我一个解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-12T01:12:02.470

另一种可能的解决方案是通过在凭据管理器中设置它来确保 Visual Studio 知道要使用哪个证书。

打开凭据管理器并在基于**证书的凭据**下单击添加基于证书的凭据。

输入您的服务参考的 URL 并从商店中选择证书。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T17:57:36.833

问题是元数据绑定。您必须允许 https GET 对元数据和服务本身使用相同的 URL。

```
<serviceMetadata httpsGetEnabled="true" /> 
```

这将允许 WCF 通过 HTTPS 提供元数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:37:44.340

我之前遇到过这个问题，尝试添加[http://abc.cloudapp.net/DataService.svc](http://abc.cloudapp.net/DataService.svc)（没有 https 是正确的），一旦添加了服务，将 web.config 文件从 http 更改为 https。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T18:08:07.880

您可以在 IE 上访问基于 https 的 URL 并获取 WSDL 吗？如果您可以在 IE 中毫无问题地获取 WSDL，那么您的机器中确实安装了证书，而 VS 不知何故无法使用客户端证书并返回此错误。如果您无法在您的机器中获取 WSDL，那么您需要先在您的机器中安装客户端证书，然后重试。

如果您想使用 Visual Studio 解决此问题，您可以使用 IE 获取 HTTPS WCF 服务元数据 wsdl 页面并将 WSDL 保存在本地计算机上。之后打开 VS2010，当你选择“添加服务引用”时，路由到你机器上保存的 WSDL 元数据文件，这样会为你的 Secure WCF 服务生成一个代理类，你仍然可以使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-16T05:51:28.543

通过将我的证书添加到浏览器中，我的问题得到了解决。

打开 Internet Explorer --> Internet 选项 --> 转到内容 --> 单击证书 --> 将您的证书导入个人或受信任的发布者

然后尝试使用 WCF 服务，它会警告您一条消息，但单击确定，这将解决问题。

如果没有解决，请在“个人”或“受信任的人”下的“服务器”中导入相同的证书

# php - PHP基础：打印 重新阅读了一些关于 php 基础知识的内容，以刷新一些内容并在编码时更准确，我尝试 等字符，除非您使用特定序列，否则无法打印。要在 HTML/XML 输出页面中打印以下内容，您必须使用以下字符替换它 < = < > = > ETC... 于 2012-06-23T08:58:37.687 回答 This answer is useful 2 HTML 与用于定义标签元素的字符作斗争。尝试这个： print 'No space between <? and php if you want to avoid errors!'; 此外，如果您想以编程方式转义这些字符，您可以使用 function htmlentities()。 于 2012-06-23T08:58:37.370 回答 Related 2 javascript - 点击按钮睡一会儿 2 mysql - 即使使用 Distinct，MySQL 也会多次返回相同的结果 1 terminal - 覆盖 tmux 快捷方式 2 html - 使用 Perl 从 MySQL 填充下拉列表 3 mysql - 查询：这段代码看不懂 1 android - Android 开发 - 用户壁纸作为应用背景 2 php - php错误地将base 16转换为base 2 1 c# - 使用 JsConfig.ExcludeTypeInfo 时，ServiceStack 会话不起作用 2 ios - 为什么 6.1 模拟器中不显示自定义 drawRect？ 1 php - 安装 Traq 后 XAMPP localhost 返回对象未找到 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11168155
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, string, escaping

重新阅读了一些关于 php 基础知识的内容，以刷新一些内容并在编码时更准确，我尝试`<?`使用 print 函数打印字符串，但发现我找不到方法。

我有点困惑，因为阅读了单引号和双引号之间的区别，我认为在单引号字符串中唯一需要特殊处理的字符是反斜杠和单引号（如 O'Reilly 文献中所示）。

当然，这`<?`不是任何类型的字符串，但我想知道如何在字符串中打印它。

我试图逃避它，把它放在一个变量中，在这里使用文档，但没有任何成功。实际上查看 Firefox 中的源代码，我可以看到这些字符，但它们只是没有显示。

这是我的测试字符串：

```
print 'No space between <? and php if you want to avoid errors!'; 
```

我怀疑它是非常基础的，但我仍然认为完全正确地掌握所有基础知识是要走的路，所以我来了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T08:58:55.660

这不是 PHP 问题。HTML 将其解释为标签的分层并将其呈现为 HTML。查看页面的来源。

## 解决方案

*   要么替换`<`为`&lt;`
*   或使用**[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:58:37.687

存在空格、<、> 等字符，除非您使用特定序列，否则无法打印。要在 HTML/XML 输出页面中打印以下内容，您必须使用以下字符替换它

```
< = &lt;
> = &gt; 
```

ETC...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T08:58:37.370

HTML 与用于定义标签元素的字符作斗争。尝试这个：

```
print 'No space between &lt;? and php if you want to avoid errors!'; 
```

此外，如果您想以编程方式转义这些字符，您可以使用 function [`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)。

# java - 如何替换数组适配器字符串中的特殊字符？

> ID：11168159
> 
> 赞同：0
> 
> 时间：2012-06-23T08:55:39.763
> 
> 标签：java, android

我从 RSS 提要中获取标题并使用数组适配器显示它。如何用空格替换特殊字符？有人可以帮忙吗？

```
ArrayAdapter<String> itemList = new ArrayAdapter<String>(this, R.layout.cricketlist, item); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:02:51.860

假设`str`是你的`String`.

```
str = str.replace("&quot;", " "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:01:12.350

尝试[String.replaceAll(String regex, String replacement)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29) 和 [String.replace(char oldChar, char newChar)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)从字符串中重新定位字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:04:31.183

尝试这个：

```
 str = str.replaceAll("[^a-zA-Z 0-9]+"," ") 
```

还

```
public string deleteSpecialChar(string text)
        {
            StringBuilder sb = new StringBuilder();
            var lastWasInvalid = false;
            for(int i=0;i<text.length();i++)
            {
                if (Character.isLetterOrDigit(text.charAt(i)))
                {
                    sb.Append(c);
                    lastWasInvalid = false;
                }
                else
                {
                    if (!lastWasInvalid)
                        sb.Append(" ");
                    lastWasInvalid = true;
                }
            }

            return sb.ToString().Trim();

        } 
```

# asp.net - GridView 空数据模板

> ID：11168163
> 
> 赞同：3
> 
> 时间：2012-06-23T08:56:26.843
> 
> 标签：asp.net, gridview

我有一个使用 EmptyDataTemplate 的 ASP.NET GridView。此模板用于在我的数据源中不存在任何记录的情况下收集数据。我的 GridView 源代码如下所示：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="Lecturer" CellPadding="4"
ForeColor="#333333" GridLines="None" style="text-align: center" allowsorting="True">
<AlternatingRowStyle BackColor="White" ForeColor="#284775" />
<Columns>
    <asp:BoundField DataField="name" HeaderText="Name" SortExpression="name" />
    <asp:HyperLinkField HeaderText="URL" SortExpression="url" DataNavigateUrlFields="url" Text="Link"  ItemStyle-Width="100" />  
</Columns>

<EmptyDataTemplate>
    No data found!
</EmptyDataTemplate>

<EditRowStyle BackColor="#999999" />
<FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
<HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
<PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
<RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
<SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
<SortedAscendingCellStyle BackColor="#E9E7E2" />
<SortedAscendingHeaderStyle BackColor="#506C8C" />
<SortedDescendingCellStyle BackColor="#FFFDF8" />
<SortedDescendingHeaderStyle BackColor="#6F8DAE" /> 
```

这里的问题是我希望在单击按钮搜索后显示空数据模板，但现在每次我打开页面时，即使我还没有进行任何搜索，它也会显示空数据模板。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T09:09:53.980

使用：

`EmptyDataText="No data found!"`

在网格中，如：

```
<asp:GridView ID="GridView1" EmptyDataText="No data found!" ....> 
```

你的方法不对。`EmptyDataTemplate`不用于此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:26:52.647

听起来您将 GridView 绑定在 Page_Load 事件中，而不是单击“搜索”按钮。将您的绑定代码移动到一个单独的方法中，并在其单击事件中单击搜索按钮时调用该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T09:09:01.507

删除`EmptyDataTemplate`，当您搜索时，如果没有与搜索匹配的记录`EmptyDataText`，您的 gridview 集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T09:10:12.077

尝试这个：

```
private DataTable GetDataTable(Boolean blnIsReturnNull)
{
        DataTable tblReturnTable = new DataTable();
        tblReturnTable.Columns.Add("name");
        tblReturnTable.Columns.Add("URL");
        if (blnIsReturnNull)
        {
            return tblReturnTable;
        }
        for (int intCounter = 0; intCounter < 10; intCounter++)
        {
            //Build of tblReturnTable
        }
        return tblReturnTable;
}

 protected void cmdEmptyGridView_Click(object sender, EventArgs e)
    {
        GridView1.DataSource = GetDataTable(true);
        GridView1.DataBind();
    }

<asp:Button ID="cmdEmptyGridView" runat="server" Text="Empty GridView" OnClick="cmdEmptyGridView_Click"
                            CssClass="Button" /></td> 
```

# c++ - 需要有关编程方法的建议

> ID：11168167
> 
> 赞同：1
> 
> 时间：2012-06-23T08:56:38.373
> 
> 标签：c++, multithreading, tcp, embedded, beagleboard

我需要为一个家庭自动化项目编写一个程序，该项目将在运行 Ubuntu 12.04 的 Beagle Board 上运行。以下是该程序的功能：

1.  从串行端口获取数据，在我的例子中，它是一个使用 Linux 版本中预先存在的 FTDI 驱动程序的虚拟 COM 端口。XBEE 模块连接到 USB 端口，该端口通过 Zigbee 协议接收数据并将其串行发送到 Beagle 板。

2.  将上述数据转储到 MySQL 数据库中。

3.  听从通过 TCP/IP 协议发送命令并通过 TCP/IP 发送请求信息的平板电脑的指令。在某些情况下，它可能只是一个小数据，而在某些情况下，它可能是连续的数据流。

我已经实现了上述功能，具体如下：

1.  我用于串口读写的代码使用了以下网站[http://www.teuniz.net/RS-232/](http://www.teuniz.net/RS-232/)提供的头文件。它使用 while(1) 循环连续读取串行端口以获取值。我为此创建了一个单独的线程。

2.  我创建了一个单独的线程，用于将数据转储到 MySQL 数据库中。

3.  TCP/IP 服务器的另一个线程。当将来添加接受多个客户端连接的功能时，该线程可能会产生更多线程。

我的问题是：

1.  **考虑到它在具有 1GhZ ARM 7 内核的嵌入式平台上运行时，这种产生多个线程的编程方法是否是一种好的编程方法？**

2.  **有没有更好的方法来做到这一点？**

3.  **你能建议我一种方法，以便我可以同时通过串口进行读写。我是否需要再次将读写功能放在单独的线程中才能做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:52:59.017

> 考虑到它在具有 1GhZ ARM 7 内核的嵌入式平台上运行时，这种产生多个线程的编程方法是否是一种好的编程方法？

你说你目前有三个线程：一个用于串口的监听线程、一个数据库管理线程和一个用于 TCP/IP 的线程。

这里的答案是，这真的取决于你想从硬件中挤出的性能。每个线程消耗多少 CPU 资源？

在我看来，线程简化了软件的设计和外观（在大多数情况下）。然而，它们是有代价的：

*   它们需要[上下文切换](http://en.wikipedia.org/wiki/Context_switch)。如果过于频繁，则会导致性能显着下降。
*   它们使调试变得更加困难。

如果您不打算接近平台的性能限制，我未受过教育的猜测是您现在应该可以使用三个线程。

> 有没有更好的方法来做到这一点？

这与您之前的问题非常相关。我不熟悉您项目的瓶颈和限制。也许有几个，也许根本没有，所以很难说是否有*更好*的方法来做到这一点。这也取决于您真正想要实现的目标。当然，还有*其他*方法可以做到这一点。

例如，您可以实现多个进程，而不是多个线程。多处理有其自身的[优点和缺点](http://www.electronicsweekly.com/blogs/open-source-linux/2009/03/multi-thread-or-multi-process.html)：

*   它在上下文中更重。此外，通常[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)更复杂。
*   它更稳定。一个进程中的错误不会导致另一个进程崩溃。

> 你能建议我一种方法，以便我可以同时通过串口进行读写。我是否需要再次将读写功能放在单独的线程中才能做到这一点？

可以将串行通信线程实现为一个平面`while(1)`旋转循环，处理读取和写入（读取数据块，写入数据块，读取数据块，写入数据块，等等。 .)。

也就是说，我认为将串行通信线程分成两个单独的线程（Rx 和 Tx）是一个有效（且正确）的建议。我参与了许多这样实现的项目，随着串行协议变得越来越复杂，它通常被证明是有益的。
我不明白你的串口是USB还是RS-232。

无论如何，我希望我的回答对您有所帮助和有见地。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:09:11.463

多线程的替代方案是多状态机。

多个状态机背后的理论是单个线程轮询多个状态机，因此对状态机的每次调用都必须“运行到完成”并尽快返回。

状态机比多线程更容易测试和调试。

这确实意味着它总是消耗一个内核 100% 的时间，除非轮询循环可以休眠一小段时间。

因此，您可以为 RS232 读取、RS232 写入、DB 访问和 TCP 轮询中的每一个设置一个状态机。

此外，这不会阻止您为程序的其他部分使用其他线程，或者实际上其他程序正在运行。

# android - 无法从 AsyncTask 启动服务

> ID：11168172
> 
> 赞同：0
> 
> 时间：2012-06-23T08:57:14.820
> 
> 标签：android, service, android-asynctask

我正在尝试从 AsyncTask 启动服务，但看不到它的启动。我还在 manefast 文件上添加了服务。

这里的代码：

```
protected Integer  doInBackground(Void... values) throws InterruptedException {
    //starts service number activite
    Intent serviceIntent = new Intent();
    serviceIntent.setAction("services.conServise");
    context.startService(serviceIntent); 
```

和清单文件：

```
 <service android:name="services.conServise"></service>

  </application> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:58:35.777

`services.conServise` 应该在该服务声明的`<action>`标签内的`<intent-filter>`标签中，请将*servicesclassname*替换为适当的包名称，例如*org.mypkg.foo.bar*。

```
<service android:name="<servicesclassname>">
    <intent-filter>
        <action android:name="services.conServise"/>
    </intent-filter>
</service> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:00:26.120

通过 AsyncTask 类中的 onPostExecute() 方法进行尝试。谢谢

# javascript - javascript 中的 ASP.NET MVC 标签？

> ID：11168173
> 
> 赞同：0
> 
> 时间：2012-06-23T08:57:26.533
> 
> 标签：javascript, asp.net-mvc, variables

**你好，**

我需要为 AJAX 调用提取正确的 URL，这就是我在 js 文件中添加的内容：

```
var GetLocationByParentPath = '<%= Url.Content("~/Location/GetLocationsByParent") %>'; 
```

但是 ASP.NET MVC 标记不会运行，所以现在的问题是，如何用正确的值填充 GetLocationByParentPath？

**最好的祝福**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:06:53.240

你的问题是你试图完成不支持的事情，你不能在 js 文件中使用 C# 代码。

但是，您可以在您的 aspx 文件（或 cshtml）中执行此操作，并且 js 文件可以与这些文件进行通信，因此您有 3 个选项：

1\. 在接受 url 的 js 文件中向函数添加一个参数

在js里面：

```
function yourfunction(url)
{
    var GetLocationByParentPath = url;
} 
```

在你的aspx里面：

```
<script>
    yourfunction('<%= Url.Content("~/Location/GetLocationsByParent") %>');
</script> 
```

2\. 添加一个包含此 url 的全局 js 变量：

在你的aspx里面：

```
<script>
    var getLocationsUrl = '<%= Url.Content("~/Location/GetLocationsByParent") %>'
    yourfunction();
</script> 
```

在 js 内部（确保在函数运行之前定义 getLocationsUrl）：

```
function yourfunction()
{
    var GetLocationByParentPath = getLocationsUrl ;
} 
```

3\. 使用完整的硬编码 url（不利于重构但简单的解决方案：

在 js 内部（确保在函数运行之前定义 getLocationsUrl）：

```
 var GetLocationByParentPath = '/Location/GetLocationsByParent'; 
```

希望这会有所帮助

# java - 具有可中止的长时间操作的 Java 控制台应用程序

> ID：11168174
> 
> 赞同：0
> 
> 时间：2012-06-23T08:57:51.177
> 
> 标签：java, windows, console

我正在用 Java 编写一个控制台应用程序，可用于监控某个网站。此操作可以是无限的，直到它被中止。仅按 CTRL + C 中止它不起作用，因为应用程序仍在后台运行。（我使用的是 Windows，但它应该是可移植的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:21:00.087

如果用户输入某个单词，为什么不能等待用户输入并终止程序？

看起来[http://www.devdaily.com/java/edu/pj/pj010005](http://www.devdaily.com/java/edu/pj/pj010005)可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:30:44.827

你注册了一个shutdownhook吗？当你中断它时，它会被 JVM 调用。在那里你可以干净地终止你的应用程序。

要记住的一件事：您启动的任何（后台）线程都应标记为守护线程，`Thread.setDaemon(true)`否则 JVM 将不会终止，因为它仅在所有非守护线程都完成时才会终止。也许这就是为什么即使您按下 Ctrl-C，您的应用程序也会“在后台”停留的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:31:16.170

试试这个，

1.有一个布尔变量来确定用户何时想要杀死程序。

2.创建一个无限循环来监控网站，并在其中检查布尔变量的状态。

例如：

```
boolean isGoing = true;

   String s = null;

    public void monitor(){

    while(isGoing){

       if(s.compareToIgnoreCase(new Scanner(System.in).nextLine()) == 0){

        break;
    }

   // monitor here..................

  }
} 
```

# python - 如何使用 Sphinx 标记引用记录在案的 Python 函数参数？

> ID：11168178
> 
> 赞同：45
> 
> 时间：2012-06-23T08:58:10.933
> 
> 标签：python, python-sphinx, docstring

我想在 Python 文档字符串的其他地方引用先前记录的函数参数。考虑以下（诚然完全人为的）示例：

```
def foo(bar):
    """Perform foo action
    :param bar: The bar parameter
    """

    def nested():
        """Some nested function that depends on enclosing scope's bar parameter.
        I'd like to reference function foo's bar parameter here
        with a link, is that possible?"""
        return bar * bar

    # ...
    return nested() 
```

有没有一种简单的方法可以使用 Sphinx 标记嵌入参数引用，或者这会自动发生吗？

（我是一个完整的 Sphinx 新手。我一直在扫描 Sphinx 文档，但没有找到这个问题的答案，也没有找到演示正确标记的示例。）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-24T15:33:27.503

There is no simple way to get a direct reference to a parameter of a function with `sphinx` and I don't know an extension for this problem.

The [documentation of the python domain](https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#cross-referencing-python-objects) explains which objects can be cross referenced.

A possible way to give the user a reference to parameter `bar` of function `foo` would be

```
See parameter ``bar`` in :func:`foo`. 
```

Maybe a direct reference would be possible by writing an extension.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-12-30T18:30:39.207

我刚刚构建了一个扩展来完成这项任务。到目前为止，它似乎正在使用独立的 HTML 构建以及另外的 readthedocs（经过更多调整）。

该扩展程序位于：[https](https://pypi.python.org/pypi/sphinx-paramlinks/) ://pypi.python.org/pypi/sphinx-paramlinks/ 。

我现在正在为 Alembic 和 SQLAlchemy 项目推出它。（[样本](http://alembic.zzzcomputing.com/en/latest/ops.html#alembic.operations.Operations.drop_column)）。

我不同意链接到参数意味着文档太长的建议。Python 标准库在这里是一个糟糕的例子，因为 stdlib 函数必须是细粒度和简单的。完成更粗粒度任务的软件，其中单个函数骑在要解决的复杂问题之上，通常会有需要更多解释的参数；这种解释通常作为对其他地方特定问题的解决方案非常有价值，因此能够链接到它非常重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-05T14:47:45.527

对于那些想要在这里使用`sphinx-paramlinks`的人`sphinx.ext.napoleon`来说是一个补丁。只需在源代码中找到正确的片段`sphinx-paramlinks`（sphinx_paramlinks\sphinx_paramlinks.py，第 50 行左右）并将其替换为：

```
def cvt(m):
    directive, modifier, objname, paramname = (
        m.group(1), m.group(2) or '', name, m.group(3))
    if directive == 'param':
        refname = _refname_from_paramname(paramname, strip_markup=True)
        item = ('single', '%s (%s parameter)' % (refname, objname),
                '%s.params.%s' % (objname, refname), '')
        if LooseVersion(__version__) >= LooseVersion('1.4.0'):
            item += (None,)
        doc_idx.append(item)
    return ":%s %s_sphinx_paramlinks_%s.%s:" % (
        directive, modifier, objname, paramname)
return re.sub(r'^:(param|type) ([^:]+? )?([^:]+?):', cvt, line) 
```

注意：记住正确的缩进。

我不是狮身人面像专家，但这似乎可以完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-09T11:49:49.323

并不是说[sphinx-paramlinks](https://pypi.python.org/pypi/sphinx-paramlinks/)不是一个很好的解决方案，但我对于为我的项目添加*更多*扩展有点固执。

您不会获得视觉突出显示或锚图标的好处，这是一个无赖，但该部分之前的 reStructuredText[超链接目标](https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#hyperlink-targets)至少可以让您关闭：

```
 def from_existing_id(cls, jobid, **kwargs):
        """Instantiates a new :class:`Job` object from an existing job ID.

        :param jobid: the ID of the previous job
        :param kwargs: keyword arguments supported by :meth:`deserialize`,
            *e.g.*, :ref:`ignore_missing <deserialize_params>`.
        """
        ⋮

    # elsewhere
    def deserialize(self, filename, copy_inputs=False, ignore_missing=False):
        """Reads a disk file into the current :class:`Job` object's config.

        .. _deserialize_params:

        :param filename: the filename to read from to disk
        :param copy_inputs: copy input files to output directory
        :param ignore_missing: don't bail if input files are missing
        """
        ⋮ 
```

但是，您的参数列表越长，它的用处就越小。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-23T10:08:50.660

如果您正在寻找一种直接链接到`bar`定义的方法，`foo`那么您的文档太长，或者您要求您的读者忽略一棵树或两者的某种组合的森林。

以[defaultdict 示例为例](http://docs.python.org//library/collections.html#defaultdict-examples)：

```
Setting the :attr:`default_factory` to :class:`int` makes the
:class:`defaultdict` useful for counting (like a bag or multiset in other
languages): 
```

如果我懒得将五个句子读入[collections.defaultdict](http://docs.python.org//library/collections.html#defaultdict-objects)以找到`default_factory`我可能不值得被引导到那里的意思。

请注意，属性引用语法与上一节中的相同：

```
The first argument provides the initial value for the :attr:`default_factory`
attribute; it defaults to ``None``. 
```

但看起来 Sphinx 没有超出当前部分范围，因此将稍后的引用呈现为样式文本而不是锚点。如果这是故意的，我不会感到惊讶。

# apache-flex - 在数据网格中使用时无法限制组合框高度

> ID：11168181
> 
> 赞同：0
> 
> 时间：2012-06-23T08:58:23.040
> 
> 标签：apache-flex, actionscript

我正在使用项目渲染器在 flex 数据网格中使用组合框，并且在组合框的高度等于行高之前一切都很好。现在我多了一个高度大于数据网格行高的项目渲染器。我面临的问题是组合框试图填充整个行高！..我尝试在组合框 itemrenderer 中设置 maxheight、explicit maxheight、explicitheight 但没有任何效果。一种解决方案是使用 VBox 作为组合框单元的 itemrenderer，但这是一个糟糕的解决方案，因为它很重并且增加了更多的复杂性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:22:52.223

我最终在 VBox 中使用了一个组合框......一个单元格渲染器将渲染整个单元格......所以如果单元格的高度为 20 像素，那么组合框的高度也将是 20 像素......所以我使用了一个 Vbox 和然后限制组合框的高度（我添加为 VBox 的子项）

# magento - Magento 管理面板中系统配置的空白屏幕

> ID：11168187
> 
> 赞同：6
> 
> 时间：2012-06-23T08:58:46.423
> 
> 标签：magento, configuration

我们的网站遇到了问题。

系统 > 配置屏幕仅显示菜单、侧面菜单和页脚。当我们点击侧边菜单选项时，屏幕仍然黑屏，相关信息也没有出现。请看 [这个链接](http://www.featuredeco.co.uk/media/config_screen.jpg)。这就是出现的情况。当我们点击任何侧面菜单选项时，屏幕是空白的

这导致了一个重大问题，因为我们无法访问配置站点的信息。

亲切的问候保罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T16:16:49.780

有时会忘记的一个问题是，安装新模块后可能需要重新编译，也就是说，如果您在 System/Tools/Compilation 中启用了编译。在重新编译之前，整个配置页面可能会保持空白。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T11:55:44.160

首先，刷新缓存（**系统 > 缓存管理**）。

如果这不能解决您的问题，并假设您有一个暂存实例可以工作，您应该停用所有自定义模块，一次添加一个，直到您隔离所涉及的模块。自定义模块*应该*在`app/code/local/*`和 中找到`app/code/community/*`。为此，请在**系统 > 缓存管理**中关闭配置缓存（或准备在每次配置更改时刷新此屏幕）。您可以通过`<disable_local_modules>`在`app/etc/local.xml`. 社区模块没有相应的功能。您将需要刷新系统配置视图以查看这是否解决了问题。如果没有，请恢复`app/etc/local.xml`，然后`app/etc/modules`开始更改每个社区模块的`<active>`标记为“false”，每次刷新配置面板，直到您的问题得到解决。如果禁用本地模块确实有效，请遵循相同的过程，但仅适用于本地代码池中的文件。

如果上述方法不起作用，您将需要将您的核心文件与您的 Magento 版本的 vigin 副本进行比较。要区分的核心文件：

1.  `app/code/core/*`
2.  `lib/*`
3.  `app/design/adminhtml/*`

另外，验证and下没有`Mage`命名空间。如果有，请暂时移动它以排除其内容为罪魁祸首。`app/code/local``app/code/community`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T16:39:34.743

我有同样的问题。故事的结尾是一个有错误的magento扩展，我停用了它，它又可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T22:44:36.150

问题：在管理面板中，如果您进入系统->配置，您会发现（内容部分）页面为空（页眉、菜单和页脚可见）。

在进行任何检查之前，请检查 /var/log/ 中的日志。

尝试刷新所有magento缓存（系统->管理缓存）如果它不起作用编辑/app/etc/local.xml并禁用本地模块，将“disable_local_modules”设置为true - true。在重新加载系统->配置页面或执行任何其他操作之前，请记住“刷新 magento 缓存”（系统->管理缓存）或禁用缓存。如果出现“拒绝访问”消息，您没有足够的权限访问特定模块。要解决，请转到系统->权限。>角色（选择管理员）并单击“保存角色”并选择“全部”权限。在旧版本的 magento 中，或者如果您没有（或不能）重建，您需要将 system->permissions->roles（选择管理员）设置为“自定义”，然后在选择所有内容后，

对于永久修复（选择“all/everything”），您需要修改 /app/etc/config.xml 文件并添加缺少的用户组。

它为我工作....谢谢

# .net - 如果客户端和服务都在同一服务器上的同一帐户下运行，是否可以避免指定 servicePrincipalName？

> ID：11168188
> 
> 赞同：4
> 
> 时间：2012-06-23T08:58:47.103
> 
> 标签：.net, wcf, exception-handling, wcf-security, net.tcp

我有一个配置了 net.tcp 绑定的 WCF 服务：

```
<netTcpBinding>
    <binding >
        <security mode="Transport">
            <transport clientCredentialType="Windows" />
            <message clientCredentialType="None" />
        </security>
    </binding>
</netTcpBinding> 
```

我有一个客户端 - Web 应用程序。两者都在同一台服务器上的 NT AUTHORITY\NETWORK SERVICE 下运行，只是端口不同。

当客户端尝试连接到服务时，会产生错误：

> System.ComponentModel.Win32Exception：登录尝试失败

这可以通过在客户端指定 servicePrincipalName 来解决：

```
<endpoint>
    <identity>
        <servicePrincipalName value="NT AUTHORITY\NETWORK SERVICE" />
    </identity>
</endpoint> 
```

但我可以避免吗？我希望客户端使用其当前用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T09:34:13.413

客户端配置的 servicePrincipalName 值 int endpoint/identity 部分没有指定客户端的身份，而是指定了预期的服务身份。请记住，WCF 身份验证是相互的（客户端也识别服务）

在这种情况下，客户端希望服务在“网络服务”帐户下运行。

```
<endpoint>
    <identity>
        <servicePrincipalName value="NT AUTHORITY\NETWORK SERVICE" />
    </identity>
</endpoint> 
```

如果客户端和服务位于同一台机器上，则可以替换为

```
<endpoint>
    <identity>
        <servicePrincipalName value="host/localhost" />
    </identity>
</endpoint> 
```

服务身份验证现在取决于 dns 名称 (localhost)

# ruby-on-rails - Rails 多态输入

> ID：11168190
> 
> 赞同：2
> 
> 时间：2012-06-23T08:59:00.107
> 
> 标签：ruby-on-rails, input, polymorphic-associations

我有模型公司、人员和任务。公司有很多任务，人有很多任务，任务属于公司，任务属于人。所以它们之间存在多态关联。我想创建一个用于添加新任务的表单，我可以在其中选择公司或个人作为任务所属的。我正在寻找与多态关联一起使用的自动完成输入之类的东西。有没有普遍使用的解决方案？

**更新**

我现在正在尝试使用 TokenInput。但是它有一个非常奇怪的问题。我为 Company 和 Person 模型写过：

```
def token
  "#{id}_#{self.class.name}"
end 
```

然后我像这样渲染contacts.json

```
[
    {"name":"My company","token":"1_Company"},
    {"name":"The Person","token":"1_Person"}
] 
```

然后我初始化 TokenInput：

```
$('.token-input').tokenInput '/contacts.json'
    tokenLimit: 1
    tokenValue: "token" 
```

自动完成工作得很好，但它发送到 params 空字符串！最奇怪的是：当我将它添加到 tokenInput 选项时：

```
propertyToSearch: "token" 
```

有用！我的意思是，值“联系人：1_Person”出现在参数中。但它破坏了我输入的外观，因为自动完成中有“1_Person”、“1_Company”值而不是“My company”、“The Person”。也许有人知道如何解决它？

**更新 2**

哦哇！我从 github 下载了 TokenInput 的最新版本（我之前从 loopj.com 下载过），它可以工作了！

尽管如此，知道其他解决方案会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:27:42.483

我不知道任何通用解决方案，但我的 2 美分用于：[TokenInput](http://loopj.com/jquery-tokeninput/)。服务器返回类似：

```
[
   {"id":"3", "name":"Mark", "item_type": "Person" },
   {"id":"34", "name":"IBM",  "item_type": "Task"}
] 
```

客户端您必须构建一个隐藏的输入字段来存储 item_type。那就是。如果 Person 和 Company 具有相同的 id，则存在一些问题，但可以通过在 id 字段中使用*前缀*并在发送之前使用 javascript 剥离该前缀来解决（**BIG HACK**）。

或者，也许您可​​以简单地使用两个不同的输入字段。

在 github 上搜索我发现了这个插件[Rails-token-input](https://github.com/vredniy/rails-token-input)但我不知道。

但

# java - 如何在 Eclipse Juno 中打开 OSGi 控制台？

> ID：11168195
> 
> 赞同：7
> 
> 时间：2012-06-23T09:00:06.230
> 
> 标签：java, osgi

```
$ eclipse -console 
```

上面的命令在不同的窗口中打开 OSGi 控制台和 Eclipse IDE。是否有任何选项可以在 Eclipse 的控制台视图中引入 OSGi 控制台？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-23T09:12:40.543

您可以在控制台视图中选择[“Host OSGi 控制台” 。](http://archive.eclipse.org/eclipse/downloads/drops/R-3.6-201006080911/eclipse-news-part4.html)（您可能必须安装 PDE 才能使其存在。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:06:51.523

就在这里。转到`Run Configuration...`Eclipse。双击 OSGi 框架将为您添加一个新的运行项目。在第一个视图中，您可以添加要运行的所有包。但现在取消全选并单击运行。然后将在 Eclipse 中打开一个 OSGi 控制台。

# php-5.3 - 数组和引用

> ID：11168202
> 
> 赞同：0
> 
> 时间：2012-06-23T09:00:42.133
> 
> 标签：php-5.3

```
<?php 
  /* Assignment of array variables */
  $arr = array(1);
  $a =& $arr[0]; //$a and $arr[0] are in the same reference set
  $arr2 = $arr; //not an assignment-by-reference!
  $arr2[0]++;
?> 
```

输出为`$a == 2`, `$arr == array(2)`。的内容`$arr`已更改，即使它不是参考！

谁能告诉这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:03:16.247

在 PHP 中，所有的数组复制都是通过引用进行的。如果你想要一个浅拷贝，你需要显式地复制一些东西。

因此，即使您没有`$arr2`通过引用分配，因为`$arr`是一个数组，它们最终都会引用同一个数组对象。

# magento - 属性过滤器不能应用于 Mage_Catalog_Model_Resource_Product_Link_Product_Collection

> ID：11168203
> 
> 赞同：3
> 
> 时间：2012-06-23T09:00:58.310
> 
> 标签：magento

在 Magento 中检索相关产品集合时：

```
 $this->_itemCollection = $product->getRelatedProductCollection()
            ->addAttributeToSelect('required_options')
            ->setPositionOrder()
            ->addStoreFilter()
        ; 
```

按产品属性过滤该集合的方法是什么？

我已经尝试过几种不同的方式，我通常会过滤集合。但我对收藏的理解一定是欠缺的。

有人可以告诉我如何过滤这个集合，例如，说我想过滤掉一个特定的产品和“TEST-SKU”的sku。

我通常会使用`->addAttributeToFilter('sku', array('neq' => 'TEST-SKU'))`: 但这种类型的过滤不适用于以下类型的集合：`Mage_Catalog_Model_Resource_Product_Link_Product_Collection`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:07:36.307

尝试使用 addFieldToFilter，例如：

```
->addFieldToFilter('sku', array('neq' => 'TEST-SKU')) 
```

# php - php日期函数查找当前星期几

> ID：11168204
> 
> 赞同：0
> 
> 时间：2012-06-23T09:01:00.230
> 
> 标签：php, date

> **可能重复：**
> [将天数增加到 php current Date()](https://stackoverflow.com/questions/277247/increase-days-to-php-current-date)

我想知道我怎样才能看一下，这将在今天和接下来 7 天的所有日子里打印出来。我正在使用像这样的东西`date("m.d.y")+1;``date("m.d.y")+2;`我怎样才能制作一个循环，以一种像样的格式写出来？感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:05:41.857

```
for ($i=1; $i<=7; $i++) echo date("m.d.y", time() + (86400 * $i)); 
```

# android - 可扩展的listview android json

> ID：11168211
> 
> 赞同：1
> 
> 时间：2012-06-23T09:02:45.707
> 
> 标签：android, expandablelistview, expandablelistadapter

您好我正在尝试创建一个自定义的可扩展列表视图，但是适配器上的文档非常混乱和多样化。像往常一样，我有一个 hashmap 来读取 json 数组，然后我把它放在列表中。每个孩子的组在最后一个位置的键“GRUPO”中的相同数组中发送。有人可以给我适配器实现吗？来自 json 的代码如下：

```
 if (tipopergunta.contentEquals("BOOLEANO") || tipopergunta.contentEquals("ESCMULTIPLA") || tipopergunta.contentEquals("ESCUNICA")){
                    HashMap<String,String> childdados = new HashMap<String,String>();
                    childdados.put("GRUPO", "Dados");
                    childdados.put("TIPOPERGUNTA", tipopergunta);
                    childdados.put("PERGUNTA", pergunta);
                    childdados.put("BREVEDESIGNACAO", brevedesc);
                    childdados.put("ESTADO",estado);
                    childdados.put("INSTRUCOES",instrucoes);
                    childdados.put("IDPERGUNTA",idpergunta);
                    Log.d("childdados",""+childdados.toString());
                    list.add(childdados);
                }

             if (tipopergunta.contentEquals("OPINIAO")){
                        HashMap<String,String> childdados = new HashMap<String,String>();
                        childdados.put("GRUPO", "Opinião");
                        childdados.put("TIPOPERGUNTA", tipopergunta);
                        childdados.put("PERGUNTA", pergunta);
                        childdados.put("BREVEDESIGNACAO", brevedesc);
                        childdados.put("ESTADO",estado);
                        childdados.put("INSTRUCOES",instrucoes);
                        childdados.put("IDPERGUNTA",idpergunta);

                        Log.d("opiniaolist",childdados.toString());
                        list.add(childdados);
            }  

           if (tipopergunta.contentEquals("FOTOGRAFIA")){
                        HashMap<String,String> childdados = new HashMap<String,String>();
                        childdados.put("GRUPO", "Fotografia");
                        childdados.put("TIPOPERGUNTA", tipopergunta);
                        childdados.put("PERGUNTA", pergunta);
                        childdados.put("BREVEDESIGNACAO", brevedesc);
                        childdados.put("ESTADO",estado);
                        childdados.put("INSTRUCOES",instrucoes);
                        childdados.put("IDPERGUNTA",idpergunta);

                        Log.d("fotolist",childdados.toString());
                        list.add(childdados);
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:10:10.077

[这](http://about-android.blogspot.pt/2010/04/steps-to-implement-expandablelistview.html)是帮助我理解可扩展列表视图适配器的原因。

在可扩展的列表视图中，您始终拥有父母和孩子。当您单击父项时，您会看到其子项。

所以适配器主要需要三样东西。父母名单。一个孩子列表（例如可以是一个数组）如何绘制孩子以及如何绘制父母。

你应该有一个父母数组：`String[] parents = {"parent1, "parent2");` 和一个孩子数组的数组，每个数组都是一个父母的孩子。

```
String [][] children = {{child_A_Parent1, child_B_Parent1}, {child_A_Parent2, child_B_parent2}}; 
```

在 getGroup 方法上，您应该返回给定行所需的父级：

```
public Object getGroup(int groupPosition) {
        return parents[groupPosition];
    } 
```

在方法 getChild 你应该返回你想要的孩子：

```
public Object getChild(int groupPosition, int childPosition) {

        return children[groupPosition][childPosition];
    } 
```

在 getChildView() 方法上，您应该扩展您想要的布局（例如带有 textview 的 xml）并使用相应的子项设置文本。请注意，在这里您不必担心它已经传递给哪个子参数：

```
public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
   //inflate a the layout and get the text view
   tv.setText(children[grouposition][childPosition];
..} 
```

父方法也可以这样说：

```
 public View getGroupView(int groupPosition, boolean isExpanded,
                View convertView, ViewGroup parent) {
        //inflate a the layout and get the text view

       tvParent.setText(parents[groupPosition];

} 
```

您可以为父母和孩子设置各种布局。只需使用充气机从布局文件夹中充气 xml。然后使用资源 ID 用您的小部件填充视图。

希望这可以帮助您使数据适应此代码段。

# java - 上传文件时出现fatalExceptionError，但文件仍然可以正常上传

> ID：11168216
> 
> 赞同：1
> 
> 时间：2012-06-23T09:03:33.157
> 
> 标签：java, android

我正在上传图像并发送一些参数。这样做时，我的 logcat 中出现错误。

这是我的代码

```
public class Camera extends Activity {
ImageView ivUserImage;
Button bUpload;
Intent i;
int CameraResult = 0;
Bitmap bmp;
public String globalUID;
UserFunctions userFunctions;
String photoName;
InputStream is;

int serverResponseCode = 0;
ProgressDialog dialog = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);

    userFunctions = new UserFunctions();
    globalUID = getIntent().getExtras().getString("globalUID");
    Toast.makeText(getApplicationContext(), globalUID, Toast.LENGTH_LONG).show();
    ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
    bUpload = (Button)findViewById(R.id.bUpload);
    openCamera();
}

private void openCamera() {
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(i, CameraResult);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode == RESULT_OK) {
        //set image taken from camera on ImageView
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        ivUserImage.setImageBitmap(bmp);

        //Create new Cursor to obtain the file Path for the large image
         String[] largeFileProjection = {
                 MediaStore.Images.ImageColumns._ID,
                 MediaStore.Images.ImageColumns.DATA
         };

         String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
         //final String photoName = MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME;
         Cursor myCursor = this.managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);

         try {
             myCursor.moveToFirst();
             //This will actually give you the file path location of the image.
             final String largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
             //final String photoName = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME));
             //Log.e("URI", largeImagePath);

             File f = new File("" + largeImagePath);

             photoName = f.getName();

             bUpload.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        dialog = ProgressDialog.show(Camera.this, "", "Uploading file...", true);
                         new Thread(new Runnable() {
                                public void run() {
                                     runOnUiThread(new Runnable() {
                                        public void run() {
                                            //tv.setText("uploading started.....");
                                            Toast.makeText(getBaseContext(), "File is uploading...", Toast.LENGTH_LONG).show();
                                        }
                                     });
                                 if(imageUpload(globalUID, largeImagePath)) {
                                     Toast.makeText(getApplicationContext(), "Image uploaded", Toast.LENGTH_LONG).show();
                                 } else {
                                     Toast.makeText(getApplicationContext(), "Error uploading image", Toast.LENGTH_LONG).show();
                                 }
                                 //Log.e("Response: ", response);
                                 //System.out.println("RES : " + response);
                                }
                              }).start();
                        }
                });
         } finally {
             myCursor.close();
         }
         //Uri uriLargeImage = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, String.valueOf(imageId));
         //String imageUrl = getRealPathFromURI(uriLargeImage);
    }
}

public boolean imageUpload(String uid, String imagepath) {
    boolean success = false;
    //Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    Bitmap bitmapOrg = BitmapFactory.decodeFile(imagepath);
    ByteArrayOutputStream bao = new ByteArrayOutputStream();
    bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);

    byte [] ba = bao.toByteArray();
    String ba1=Base64.encodeToString(ba, 0);

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("image",ba1));
    nameValuePairs.add(new BasicNameValuePair("uid", uid));

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.example.info/androidfileupload/index.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        if(response != null) {
            success = true;
        }
        is = entity.getContent();
    } catch(Exception e) {
        Log.e("log_tag", "Error in http connection "+e.toString());
    }
    dialog.dismiss();
    return success;
} 
```

这是我的日志猫

```
06-23 11:54:48.555: E/AndroidRuntime(30601): FATAL EXCEPTION: Thread-11
06-23 11:54:48.555: E/AndroidRuntime(30601): java.lang.OutOfMemoryError
06-23 11:54:48.555: E/AndroidRuntime(30601):    at java.lang.String.<init>(String.java:513)
06-23 11:54:48.555: E/AndroidRuntime(30601):    at java.lang.AbstractStringBuilder.toString(AbstractStringBuilder.java:650)
06-23 11:54:48.555: E/AndroidRuntime(30601):    at java.lang.StringBuilder.toString(StringBuilder.java:664)
06-23 11:54:48.555: E/AndroidRuntime(30601):    at org.apache.http.client.utils.URLEncodedUtils.format(URLEncodedUtils.java:170)
06-23 11:54:48.555: E/AndroidRuntime(30601):    at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:71)
06-23 11:54:48.555: E/AndroidRuntime(30601):    at com.zafar.login.Camera.imageUpload(Camera.java:155)
06-23 11:54:48.555: E/AndroidRuntime(30601):    at com.zafar.login.Camera$1$1.run(Camera.java:119)
06-23 11:54:48.555: E/AndroidRuntime(30601):    at java.lang.Thread.run(Thread.java:1019)
06-23 11:54:53.960: E/WindowManager(30601): Activity com.zafar.login.DashboardActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405db540 that was originally added here
06-23 11:54:53.960: E/WindowManager(30601): android.view.WindowLeaked: Activity com.zafar.login.DashboardActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405db540 that was originally added here
06-23 11:54:53.960: E/WindowManager(30601):     at android.view.ViewRoot.<init>(ViewRoot.java:266)
06-23 11:54:53.960: E/WindowManager(30601):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:174)
06-23 11:54:53.960: E/WindowManager(30601):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:117)
06-23 11:54:53.960: E/WindowManager(30601):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
06-23 11:54:53.960: E/WindowManager(30601):     at android.app.Dialog.show(Dialog.java:241)
06-23 11:54:53.960: E/WindowManager(30601):     at android.app.ProgressDialog.show(ProgressDialog.java:107)
06-23 11:54:53.960: E/WindowManager(30601):     at android.app.ProgressDialog.show(ProgressDialog.java:90)
06-23 11:54:53.960: E/WindowManager(30601):     at com.zafar.login.Camera$1.onClick(Camera.java:110)
06-23 11:54:53.960: E/WindowManager(30601):     at android.view.View.performClick(View.java:2538)
06-23 11:54:53.960: E/WindowManager(30601):     at android.view.View$PerformClick.run(View.java:9152)
06-23 11:54:53.960: E/WindowManager(30601):     at android.os.Handler.handleCallback(Handler.java:587)
06-23 11:54:53.960: E/WindowManager(30601):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-23 11:54:53.960: E/WindowManager(30601):     at android.os.Looper.loop(Looper.java:130)
06-23 11:54:53.960: E/WindowManager(30601):     at android.app.ActivityThread.main(ActivityThread.java:3691)
06-23 11:54:53.960: E/WindowManager(30601):     at java.lang.reflect.Method.invokeNative(Native Method)
06-23 11:54:53.960: E/WindowManager(30601):     at java.lang.reflect.Method.invoke(Method.java:507)
06-23 11:54:53.960: E/WindowManager(30601):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
06-23 11:54:53.960: E/WindowManager(30601):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
06-23 11:54:53.960: E/WindowManager(30601):     at dalvik.system.NativeStart.main(Native Method)
06-23 11:54:55.190: I/Process(30601): Sending signal. PID: 30601 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:43:06.117

**解决方案**

添加`try and catch`内部线程后，它可以工作。这是我添加 try catch 的地方

```
public void run() {
       try {
                //Toast.makeText(getBaseContext(), "File is uploading...", Toast.LENGTH_LONG).show();
                if(imageUpload(globalUID, largeImagePath)) {
                     Toast.makeText(getApplicationContext(), "Image uploaded", Toast.LENGTH_LONG).show();
                } else {
                     Toast.makeText(getApplicationContext(), "Error uploading image", Toast.LENGTH_LONG).show();
                }
        } catch (Exception e) {

        }

} 
```

# ios5 - 在 iOS 上打印在 80 毫米纸（收据）上

> ID：11168219
> 
> 赞同：0
> 
> 时间：2012-06-23T09:04:09.020
> 
> 标签：ios5

我想问一下如何在 iOS 上的 80 毫米宽的纸上打印一组 html 字符串。我计划使用airprint和收据打印机将它打印在热敏纸上。对不起，如果我不能提供代码，因为我还没有开始创建它，但我想就如何以正确的方式做到这一点征求意见。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:26:08.957

在 iOS 中，您可以使用 Core Graphics 将 html 呈现为图像上下文或 PDF 文档。如果是 PDF，请在 中指定纸张尺寸`UIGraphicsBeginPDFPageWithInfo`。您需要进行一些计算，因为打印分辨率为 72 dpi（80 毫米 = 3.15 英寸 -> 72*3.15 = 226.8 点）。

将结果保存在文件（或 a`NSData`或`UIImage`）中。然后您可以通过空中打印打印此文档：

```
UIPrintInteractionController* pic = [UIPrintInteractionController sharedPrintController];
NSURL* fileURL = [NSURL fileURLWithPath:self.pdfPath];
UIPrintInfo *printInfo = [UIPrintInfo printInfo];
printInfo.jobName = @"Receipt";
pic.printInfo = printInfo;
pic.printingItem = fileURL; // single NSData, NSURL, UIImage or ALAsset

[pic presentAnimated:YES
   completionHandler:^(UIPrintInteractionController *printInteractionController, BOOL completed, NSError *error) {
           // ...
   }]; 
```

当然，您的打印设备需要以某种方式支持空中打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:19:52.107

Star Micronics 有一个收据打印机 iOS SDK，您可以在这里获取：http: [//www.starmicronics.com/support/SDKDocumentation.aspx](http://www.starmicronics.com/support/SDKDocumentation.aspx)

该软件包提供了一个打印 API，用于处理您的基本状态、打开/关闭端口和打印机通信，以及大量用于自定义收据输出和文档的示例。

# scala - anorm 的 Pk 的目的是什么？

> ID：11168222
> 
> 赞同：15
> 
> 时间：2012-06-23T09:04:52.400
> 
> 标签：scala, types, playframework-2.0, anorm

我正在使用 Scala 和 Anorm 编写 Playframework 2.0 应用程序来访问数据库。

目前我正在使用`Pk[Long]`字段`id`，我担心需要额外`get`调用才能访问实际值。所以我开始使用普通`Long`字段`id`，一切仍然完美。

有什么`Pk`用，我应该使用它而不是普通类型吗？是否`Pk`为我提供了比普通类型更多的功能/好处？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T18:07:09.297

`Pk`允许您指定键入的主键。

另外，假设你有一个这样的人为模型：

```
case class MyModel(id: Pk[Long], foo: String) 
```

您可以通过以下方式构建模型的实例：

```
MyModel(anorm.NotAssigned, "notKnownAtRuntime") 
```

...如果您的数据库负责生成您的密钥，或者以其他方式：

```
MyModel(anorm.Id(123L), "knownAtRuntime") 
```

# eclipse - 复制行时关闭eclipse自动格式化

> ID：11168224
> 
> 赞同：1
> 
> 时间：2012-06-23T09:05:15.680
> 
> 标签：eclipse, editor

复制行时如何关闭eclipse自动格式？例如，当我尝试复制以下代码时：

```
Object d = new Object(
    45, 45, 45
); 
```

我希望复制时完全一样：

```
Object d = new Object(
    45, 45, 45
); 
```

通常我会得到：

```
Object d = new Object(
        45, 45, 45
    ); 
```

它们不一样，一些选项卡已自动添加：<。你能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:16:37.573

这适用于 Eclipse 3.7.2。转到菜单`Window/Preferences`，然后转到`Java/Editor/Typing`。

在那里，取消选中类别`Adjust identation`中的选项。`When pasting`

# model - 如何通过适配器从 EMF 模型及其 GEF 编辑器中删除模型对象

> ID：11168225
> 
> 赞同：2
> 
> 时间：2012-06-23T09:05:39.397
> 
> 标签：model, controller, adapter, eclipse-emf, eclipse-gef

[这个问题主要是我关于 EMF 监听机制](https://stackoverflow.com/questions/9820510/how-to-extend-an-emf-based-model-with-listeners-for-use-in-a-gef-editor)的问题的后续。

所以，我有一个基于通用图模型的第三方 EMF 模型（不可编辑）。结构如下：

```
 Project
      |
  ItemGraph
      |
    Item
      |
   Document
      |
  DocumentGraph
 /       |     \
Tokens Nodes   Relations(Edges) 
```

我有一个 GEF 编辑器，它适用于`DocumentGraph`（即，**不是**根对象，也许这是一个问题？）`getGraphicalViewer().setContents(documentGraph)`：。编辑器具有以下编辑部分结构：

```
 DocumentGraphEP
     /        \
Primary      Connection
 LayerEP     LayerEP
  /     \        |
TokenEP NodeEP RelationEP 
```

`PrimaryLayerEP`并且`ConnectionLayerEP`两者都有简单`String`的 s 作为模型，在 EMF（域）模型中没有表示。它们仅用于向`ShortestPathConnectionRouter`编辑器添加一个主要（即节点）层和一个连接层（带有 ）。

**问题**：我试图让自己进入 EMF 适配器的工作，并尝试利用可用的教程，主要是[EMF-GEF Eclipse 教程](http://www.eclipse.org/articles/Article-GEF-EMF/gef-emf.html#)、[vainolo 的博客](http://www.vainolo.com/2011/07/10/creating-a-gef-editor-%E2%80%93-part-8-delete-undo-and-redo/)和[vogella 的教程](http://www.vogella.com/articles/EclipseEMFNotification/article.html)。我以为我会从一件简单的事情开始，所以尝试从图中删除一个节点，看看我是否让它工作。我没有，我看不出问题出在哪里。

我可以选择一个节点，并`Action`在我的工具栏中进行通用删除，但是当我单击它时，什么也没有发生。这是不同负责部分的相应源代码。请您指出我能找到的任何错误（思考、编码错误、你有什么）。

**节点编辑部分**

```
public class NodeEditPart extends AbstractGraphicalEditPart implements Adapter {

    protected IFigure createFigure() {
        return new NodeFigure();
    }

    protected void createEditPolicies() {
            ....
        installEditPolicy(EditPolicy.COMPONENT_ROLE, new NodeComponentEditPolicy());
    }

    protected void refreshVisuals() {
        NodeFigure figure = (NodeFigure) getFigure();
        SNode model = (SNode) getModel();
        PrimaryLayerEditPart parent = (PrimaryLayerEditPart) getParent();

        // Set text
        figure.getLabel().setText(model.getSName());

             ....
    }

    public void activate() {
        if (isActive()) return;

        // start listening for changes in the model
        ((Notifier)getModel()).eAdapters().add(this);

        super.activate();
}

public void deactivate() {
    if (!isActive()) return;

    // stop listening for changes in the model
    ((Notifier)getModel()).eAdapters().remove(this);

    super.deactivate();
}

private Notifier getSDocumentGraph() {
      return ((SNode)getModel()).getSDocumentGraph();
}

@Override
public void notifyChanged(Notification notification) {
    int type = notification.getEventType();
    switch( type ) {
        case Notification.ADD:
        case Notification.ADD_MANY:
        case Notification.REMOVE:
        case Notification.REMOVE_MANY:
            refreshChildren();
            break;
        case Notification.SET:
            refreshVisuals();
            break;
    }
}

@Override
public Notifier getTarget() {
    return target;
}

@Override
public void setTarget(Notifier newTarget) {
    this.target = newTarget;
}

@Override
public boolean isAdapterForType(Object type) {
    return type.equals(getModel().getClass());
}

} 
```

**节点组件编辑策略**

```
public class NodeComponentEditPolicy extends ComponentEditPolicy {

    public NodeComponentEditPolicy() {
        super();
    }

    protected Command createDeleteCommand(GroupRequest deleteRequest) {
        DeleteNodeCommand cmd = new DeleteNodeCommand();
        cmd.setSNode((SNode) getHost().getModel());
        return cmd;
    }
} 
```

**删除节点命令**

```
public class DeleteNodeCommand extends Command {

  private SNode node;
  private SDocumentGraph graph;

  @Override
  public void execute() {
    node.setSDocumentGraph(null);
  }

  @Override
  public void undo() {
    node.setSDocumentGraph(graph);
  }

  public void setSNode(SNode node) {
    this.node = node;
    this.graph = node.getSDocumentGraph();
  }
} 
```

一切**似乎**都正常：当在编辑器中选择一个节点时，工具栏中的删除符号被激活，但是当它被单击时，编辑器中没有任何反应。

我会非常感谢任何指针:)。

**编辑**

好的，我猜模型对象的删除应该由`DocumentGraphEditPart`（父）而不是对象本身来处理。所以我也修改了前者以实现`Adapter`，但直到没有任何反应。

**DocumentGraphEP 的 notifyChanged 方法**

```
public void notifyChanged(Notification notification) {
        System.out.println("I'm in the graph EP");// DELETE_SYSO
        int type = notification.getEventType();
        switch( type ) {
            case Notification.ADD:
            case Notification.ADD_MANY:
            case Notification.REMOVE:
                System.out.println("I'm in graph remove");// DELETE_SYSO
                refreshChildren();
                ((PrimaryLayerEditPart)getChildren().get(0)).refresh();
                ((PrimaryLayerEditPart)getChildren().get(0)).refreshVisuals();
                refreshVisuals();
                break;
            case Notification.REMOVE_MANY:
                refreshChildren();
                break;
            case Notification.SET:
                refreshVisuals();
                break;
        }
    } 
```

所以也许整个事件毕竟是图层的非模型编辑部分的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:51:41.747

这确实是一个`EditPart`不代表任何现有模型元素的 s 的问题。一旦我编辑了`EditPart`s 的结构，它就可以正常工作了。

# asp.net - 在asp.net的文本框中显示日历控件？

> ID：11168237
> 
> 赞同：1
> 
> 时间：2012-06-23T09:07:31.987
> 
> 标签：asp.net

如何在asp.net的文本框控件中显示日历控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:15:35.207

```
<ajaxToolkit:Calendar runat="server"
TargetControlID="YourTextBoxID"
Format="MMMM d, yyyy"
PopupButtonID="Image1" /> 
```

有关更多详细信息，您可以从以下链接中查看一些示例：
[Calendar Demonstration](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)
[ASP.NET Calendar Demo - Date picker - DatePicker/First look](http://demos.telerik.com/aspnet-ajax/calendar/examples/datepicker/custompopup/defaultcs.aspx)
[Telerik Extensions for ASP.NET MVC Demos](http://demos.telerik.com/aspnet-mvc/datepicker/edittemplate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:16:51.900

您想使用`ASP.NET AJAX Control Toolkit`：

```
<ajaxToolkit:Calendar runat="server"
TargetControlID="TextBoxControl"
Format="MMMM d, yyyy"
PopupButtonID="Image1" /> 
```

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

或者，您可以使用 jQuery 或其他一些 JavaScript 库，例如 MooTools。

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-05T21:28:15.787

如果您有 2012 或更高版本，则使用本机 .Net 工具会更好：使用任何文本框，转到属性并将 TextMode 更改为 DateTimeLocal。这将创建一个非常好的下拉日历。注意：如果您的 IE 太旧，它不会显示日历，因此请尝试在 Chrome 和 Firefox 上调试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-29T11:16:19.163

```
<cc1:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="Label5"
                                        Format="MM-dd-yyyy">
                                    </cc1:CalendarExtender> 
```

# haskell - Haskell - 生成节点之间的所有路径

> ID：11168238
> 
> 赞同：4
> 
> 时间：2012-06-23T09:07:40.807
> 
> 标签：haskell

我需要构建一个函数，它返回某些节点之间的所有路径。

`connect :: Int -> Int-> [[(Int,Int)]]`

Data.Graph 库为我提供了有用的函数“buildG”，它为我构建图形。如果我打电话

`let g = buildG (1,5) [(1,2),(2,3),(3,4),(4,5),(2,5)]`,

我将得到一个数组，其中每个节点都映射到他的邻居。一个例子：

```
g!1 = [2]
g!2 = [3,5] 
..
g!5 = [] 
```

我试图使用列表推导来做到这一点，但我在 haskell 中不是很好，而且我遇到了无法修复的输入错误。

```
connect x y g 
    | x == y = []
    | otherwise = [(x,z) | z <- (g!x), connect z y g] 
```

我现在不需要担心周期。这是我想要得到的：

```
connect 1 5 g = [[(1,2),(2,3),(3,4),(4,5)],[(1,2),(2,5)]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T09:26:47.873

递归思考。从`s`到的路径`e`由第一条边`(s,t)`和从`t`到的路径组成`e`，除非`s == e`，在这种情况下路径应该是空的。所以第一次尝试是

```
connect x y g
    | x == y    = [[]]
    | otherwise = [(x,t):path | t <- g!x, path <- connect t y g] 
```

从一个节点到它自己的所有合格路径的列表是具有单个元素的列表`[]`，在其他情况下，我们通过上述逻辑获得所有合格路径的列表，选择第一条边并从其末端找到路径。

问题是循环会导致它挂起。为避免这种情况，您必须记住您已经访问过哪些节点，而不是从中探索路径：

```
connect x y g = helper x y g [x]
  where
    helper a b g visited
        | a == b    = [[]]
        | otherwise = [(a,c):path | c <- g!a, c `notElem` visited, path <- helper c b g (c:visited)] 
```

# c - 如何将流 (FILE *) 与标准输出相关联？

> ID：11168244
> 
> 赞同：3
> 
> 时间：2012-06-23T09:08:26.593
> 
> 标签：c, io, stream

现在每个模块都在写入标准错误，因此我无法关闭单个模块的输出。有谁知道我如何将流与标准输出相关联，因此每个模块都将写入独立的流，以便我可以将其关闭。例如：

```
fprintf(newStdout, "hello"); 
```

`newStdout`正在写入屏幕。我不知道如何`newStdout`与屏幕关联。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T09:13:47.270

来自[http://www.cplusplus.com/reference/clibrary/cstdio/freopen/](http://www.cplusplus.com/reference/clibrary/cstdio/freopen/) - 它是一个 C++ 参考，但应该对 C 有效。

```
include <stdio.h>

int main ()
{
  freopen ("myfile.txt","w",stdout);
  printf ("This sentence is redirected to a file.");
  fclose (stdout);
  return 0;
} 
```

我不认为你可以在每个模块的基础上做到这一点，因为`stdout`和`stderr`是全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T00:48:59.067

如果您的目标是在某些时候`newStdout`表现得像`stdout`某些时候并在某些时候使其保持沉默，您可以执行以下操作：

```
// Global Variables
FILE * newStdout;
FILE * devNull;

int main()
{
  //Set up our global devNull variable
  devNull = fopen("/dev/null", "w");

  // This output will go to the console like usual
  newStdout = stdout;
  call_something_that_uses_newStdout();

  //This will have no output
  newStdout = devNull;
  call_something_that_uses_newStdout();

  //This will log to a file
  newStdout = fopen("log.txt","w");
  call_something_that_uses_newStdout();
  fclose( newStdout ); // -- If we don't close it here we'll never be able to close it;)

  //Clean up our global devNull
  fclose( devNull );
} 
```

# php - 我的重写规则不起作用

> ID：11168247
> 
> 赞同：1
> 
> 时间：2012-06-23T09:09:03.300
> 
> 标签：php, .htaccess, url-rewriting

我需要为页面制定重写规则，但它不起作用。我确实为 apache 启用了 mod_rewrite

这是我的 .htacces 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteRule ^gameofthrones/(full|house|characters)\.(all|Stark|Lannister)\.(html|xml|json)$ index.php?output=$3&house=$2&info=$1
</IfModule> 
```

但是当我输入这个网址时：localhost/school/str-webservices/eindopdracht/index.php?output=html&house=all&info=full

它保持这种状态，但它应该类似于：localhost/school/str-webservices/eindopdracht/gameofthrones/full/all/html

我究竟做错了什么？

提前致谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:12:50.230

您误解了 URL 重写的概念。

假设我重写`/hello`为`index.php?get=hello`. 这意味着它`index.php?get=hello`仍然可以工作，但是如果我写`/hello`，它会在引擎盖下将它映射到`index.php?get=hello`.

因此，当用户的地址栏阅读`/hello`时，他实际上是在查看`index.php?get=hello`。

这不会取消`index.php?get=hello`，这并不意味着如果有人通过该 URL 访问该页面，它会将用户重定向到`/hello`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:16:36.627

添加另一条规则，它实际上将您的非重写 URL 重定向到重写的表单：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /school/str-webservices/eindopdracht/

    RewriteCond %{REQUEST_URI} ^school/str-webservices/eindopdracht/index\.php
    RewriteCond %{QUERY_STRING} ^output=([^&]*)&house=([^&]*)&info=([^&]*)$
    RewriteRule ^(.*)$ gameofthrones/%3.%2.%1? [R=301,L]

    RewriteRule gameofthrones/(full|house|characters)\.(all|Stark|Lannister)\.(html|xml|json)$ index.php?output=$3&house=$2&info=$1 [PT,NC,L]
</IfModule> 
```

然后调用：`localhost/school/str-webservices/eindopdracht/index.php?output=html&house=all&info=full`它应该将您重定向到：`localhost/school/str-webservices/eindopdracht/gameofthrones/full.all.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:33:09.633

我认为这可能是一个目录问题：

*   ***.htaccess***文件位于目录树中的什么位置？
*   ***index.php***文件在哪里？

如果***index.php***文件位于同一目录中（我假设相同的 ./school/str-webservices/eindopdracht/），您只需添加：

```
RewriteBase /school/str-webservices/eindopdracht/

after RewriteEngine On 
```

如果我不明白这个问题，我很抱歉。

再见。

# ado.net - 从强类型数据集中删除一行后抛出异常？

> ID：11168255
> 
> 赞同：0
> 
> 时间：2012-06-23T09:10:38.223
> 
> 标签：ado.net, datagridview, linq-to-objects, strongly-typed-dataset, delete-row

我正在使用 .NET 4.0 和 SQL Server 2008 R2。

我有三张桌子：

```
Companies (PK CompanyID) 
Addresses (PK AddressID, FK CompanyID) 
ContactPersons (PK ContactPersonID, FK CompanyID) 
```

CompanyID 由用户手动分配。其他 ID 是自动生成的。公司与 ContactPerson 具有一对多的关系。我已将任何更改设置为级联。

我在 DataGridView 中显示公司中的所有记录，当单击一行时，ContactPersons 中的相应记录显示在第二个 DataGridView 中。

然后我从表 ContactPersons 中删除一行：

```
DataRow row = m_SoldaCompaniesFileDataSet.ContactPersons.Rows.Find(this.m_CurrentContactPerson.ContactPersonID);
row.Delete(); 
```

当我尝试查询表以创建数据源来填充 DataGridView 时：

```
var dataRows_ContactPersons = from row in this.m_SoldaCompaniesFileDataSet.ContactPersons
                              where row.CompanyID == companyID
                              select new
                              {
                                 ContactPersonID = row.ContactPersonID,
                                 CompanyID = row.CompanyID,
                                 NameFirst = row.NameFirst,
                                 NameLast = row.NameLast,
                                 PhoneNumber = row.PhoneNumber,
                                 EmailAddress = row.EmailAddress,
                                 Position = row.Position
                              }; 
```

我收到 DeletedRowInaccessibleException。有什么想法我在这里做错了吗？

实际上，异常来自类型化 DataSet 的自动生成代码：

```
[global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")]
            public int CompanyID {
                get {
                    try {
                        return ((int)(this[this.tableContactPersons.CompanyIDColumn])); // <<<--- DeletedRowInaccessibleException
                    }
                    catch (global::System.InvalidCastException e) {
                        throw new global::System.Data.StrongTypingException("The value for column \'CompanyID\' in table \'ContactPersons\' is DBNull.", e);
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:51:59.597

我在写完上述问题后不久就弄清楚了（尽管我花了一天多的时间）：

```
var dataRows_ContactPersons = from row in this.m_SoldaCompaniesFileDataSet.ContactPersons
                              where row.RowState != DataRowState.Deleted && row.CompanyID == companyID
                              select new
                              {
                                   ContactPersonID = row.ContactPersonID,
                                   CompanyID = row.CompanyID,
                                   NameFirst = row.NameFirst,
                                   NameLast = row.NameLast,
                                   PhoneNumber = row.PhoneNumber,
                                   EmailAddress = row.EmailAddress,
                                   Position = row.Position
                              }; 
```

有必要通过执行以下检查从 Linq 查询中排除已删除的行：

```
row.RowState != DataRowState.Deleted 
```

# ajax - XAgent - Domino 单点登录

> ID：11168256
> 
> 赞同：3
> 
> 时间：2012-06-23T09:10:48.017
> 
> 标签：ajax, rest, xpages, lotus-domino

我们在我们公司的服务器上使用“单点登录”。在浏览器中打开 xpage 应用程序时，会向用户显示服务器登录掩码。

现在我们请求为其他非多米诺应用程序实现 REST 服务。我们使用 xagent 模式来实现这个服务。客户端如何在一个简单的 ajax 调用中针对该服务进行身份验证？

谢谢马里奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T09:42:54.697

马里奥，你有选择：

1.  Domino 目录中的 Internet 站点配置允许指定接受基本 HTTP(s) 身份验证的异常 URL。调用客户端只需要根据 HTTP 标准提供用户名/密码。如果您的调用客户端是 Java，那么[Apache HTTP 客户端](http://hc.apache.org/)是一个不错的选择，因为它会为您处理所有这些。
2.  如果其他系统有权访问共享密钥（例如 WebSphere 服务器或 F1 负载平衡器），您可以生成一个 LTPA 令牌并将其作为 cookie 提供。再次，Apache HTTP 客户端是一个不错的选择
3.  您使用可以根据 IP 地址对客户端进行身份验证的[SecureDomino](http://www.timetoact.de/ttacms.nsf/id/secdomen)插件（商业）
4.  您使用[Tivoli Access Manager](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/create-a-transparent-ltpa-junction-with-tivoli-access-manager-6.1) (TAM) 作为代理并从 Kerberos 或 NTML 生成 LTPA。[Puakma Webbooster SSO](http://www.puakma.net/puakma/website.pma/BoosterESSO)是 TAM 的业务合作伙伴替代方案
5.  您稍微拖动项目直到 8.5.4 出来并使用 OAuth
6.  您允许匿名访问，但需要 XML Post 中的凭据（如 Domino Blogsphere 中的 MetaWebLog API 实现）

**“如果任何给定问题都没有至少少数解决方案，那么它就不是 IBM”™**

# javascript - html中的多级选择

> ID：11168257
> 
> 赞同：1
> 
> 时间：2012-06-23T09:11:02.340
> 
> 标签：javascript, html, html-select

我有一个选择框，它在选项更改时运行 JavaScript。现在我想要多级选择，比如菜单和子菜单等。

我想要的就像我有选择国家的选项。一旦鼠标在国家/地区单击，该国家/地区的城市就会被横向带入表格，并且在单击城市时可能会进入第三个列表。

我在这个论坛上看到提到并解决了 Country-City-Street 类型选择，但我想要的是选择的值应该来自选择的最后一件事（来自子下拉列表），而不是国家 - >城市 - >地区

还要保持那个onchange的东西完好无损。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:21:09.153

Giva Labs 有一个名为 mcDropdown jQuery Plug-in v1.3.1 的 jQuery 插件，它有类似的用途。

[http://www.givainc.com/labs/mcdropdown_jquery_plugin.htm](http://www.givainc.com/labs/mcdropdown_jquery_plugin.htm)

另一种选择是：[http ://www.filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/](http://www.filamentgroup.com/lab/jquery_ipod_style_and_flyout_menus/)

看看它。

# mysql - 清理 MySQL Wordpress wp_postmeta 表中的一些值

> ID：11168258
> 
> 赞同：0
> 
> 时间：2012-06-23T09:11:07.137
> 
> 标签：mysql, sql, database, wordpress

在我的 wordpress mysql 数据库中，我的`wp_postmeta`表中大多数行都带有`meta_key='price'`.

在该行中 meta_value 应该是一个数字，但我有不同的东西：

1.  10.000（表示一万，因为在欧洲，点代表千）
2.  100,00（表示一百）
3.  免费（或其他文本）
4.  100-500（表示价格从100到500）
5.  100/500（同上）

我想通过以下方式清理这种情况：

*   从数字中删除所有点，以获得纯数字
*   删除所有逗号，因为我不需要小数
*   删除所有单词，除了“免费”
*   从具有范围的值中删除第二个值（如第 4 点和第 5 点中的值），也可以通过删除 / 或 -

怎么可能做到这一点？预先感谢您的帮助。

# user-interface - Windows 商店应用程序原型

> ID：11168262
> 
> 赞同：1
> 
> 时间：2012-06-23T09:11:47.957
> 
> 标签：user-interface, windows-8, windows-store-apps, user-experience, prototyping

我已经环顾了这里和整个互联网，但似乎这个问题还没有得到任何答案。那么，有没有专门针对 Windows 商店应用程序的优秀原型设计工具？只要有 W8Metro 布局和组件，任何工具都可以。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:18:11.470

Microsoft 拥有用于原型设计的[Expression Blend](http://msdn.microsoft.com/en-us/windows/apps/br229516.aspx)，它包含在 Windows 8 开发包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T04:20:00.600

Visual Studio 2012 你可以[用 PowerPoint 做故事板](http://msdn.microsoft.com/en-us/library/tfs/hh409276%28v=vs.110%29.aspx)。有[一个控件、图标和东西的画廊](http://visualstudiogallery.msdn.microsoft.com/site/search?f%5B0%5D.Type=RootCategory&f%5B0%5D.Value=StoryboardShapes&f%5B0%5D.Text=Storyboard%20Shapes)。

# html - 100% 宽度的 div 滚动条

> ID：11168265
> 
> 赞同：0
> 
> 时间：2012-06-23T09:12:29.167
> 
> 标签：html, internet-explorer

我正在制作一个具有固定背景和可滚动居中文本的网页。

我首先设置了html和body样式：

```
html, body {
margin: 0;
padding: 0;
height: 100%;
width: 100%;
} 
```

然后是页面：

```
<body>
<div style="position:absolute; top:0; left:0; right:0; bottom:0; width:100%; height:100%; z-index:0;">
<img src="background.jpg" align="center" width="100%" height="100%" />
</div>
<div style="position:absolute; left:0; top:0; right:0; bottom:0; width:100%; height:100%; overflow:auto; z-index:1;"> 
```

在 Safari、Chrome、Firefox 和 Opera 下运行良好。在 IE8 下（我没有机会，我也没有真正想要在 IE7、IE9 等下测试...）显示两个垂直滚动条并排：

![在此处输入图像描述](../Images/9359a683919714adb2d291644348e055.png)

有没有办法解决这个废话？

# objective-c - 尽管启用了 ARC，但应用程序崩溃

> ID：11168269
> 
> 赞同：0
> 
> 时间：2012-06-23T09:13:08.190
> 
> 标签：objective-c, ios, debugging, automatic-ref-counting

我一直在开发一个 iOS 应用程序，现在几乎可以提交了。但是，当我将其提供给少数人进行测试时（运行 iOS 5）..他们报告了应用程序崩溃并且手机上显示主屏幕或出现冻结的应用程序屏幕而没有任何响应的情况

该应用程序启用了 ARC，并且 Xcode 不显示任何警告。所以，我对出了什么问题感到非常紧张。我以下列方式声明了属性：

```
@property (nonatomic) IBOutlet UILabel *devCountLabel;

@property (nonatomic) IBOutlet UIView *splashView; 
```

同样，声明了其他属性。任何人都可以提供解决方案吗？它主要是一个基于网络的应用程序，因此，CoreData 的使用最少。

PS：该应用程序在模拟器中不会崩溃，所以我猜它与内存有关。而且崩溃是随机的。因此，重复一组步骤来重现崩溃也无济于事。例如。当我单击一个按钮时，modalViewControllerAnimation 会导致正常情况。现在这在大多数情况下都会按预期发生，并在其他时候冻结应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:32:10.840

崩溃日志会有所帮助，但这是我的猜测：

Interface Builder Outlet 属性应该是`weak`，所以它们`nil`在发布后变为。

在您的代码中，它们的语义是`assign`（默认情况下，因为您只编写`nonatomic`了），它用于原始类型。当它被释放时，你会得到一个悬空指针，当你使用它时，应用程序会崩溃。

试试这个：

```
@property (weak, nonatomic) IBOutlet UILabel *devCountLabel;
@property (weak, nonatomic) IBOutlet UIView *splashView; 
```

# c# - 通过蓝牙在 C# 应用程序和 Android 应用程序之间进行通信

> ID：11168270
> 
> 赞同：1
> 
> 时间：2012-06-23T09:13:11.073
> 
> 标签：c#, android

在这种情况下，android 应用程序充当服务器。我有一个主要活动，它创建一个线程来处理 serverSocket 和一个不同的线程来处理套接字连接。我正在使用 C# 和 android 通用的 uuid。

我正在为 C# 使用 32 英尺蓝牙库。

我面临的错误是

1) 我的 logcat 显示了这个调试日志

执行 socket.connect()1
java.io.IOException 时出错：文件描述符处于错误状态
消息：文件描述符处于错误状态
本地化消息：文件描述符处于错误状态
接收：测试
线程的连接计数为：1

2）当我尝试第二次通过 C# 应用程序发送内容时，会引发此异常：

```
A first chance exception of type 'System.InvalidOperationException' occurred in System.dll
System.InvalidOperationException: BeginConnect cannot be called while another asynchronous operation is in progress on the same Socket.
   at System.Net.Sockets.Socket.DoBeginConnect(EndPoint endPointSnapshot, SocketAddress socketAddress, LazyAsyncResult asyncResult)
   at System.Net.Sockets.Socket.BeginConnect(EndPoint remoteEP, AsyncCallback callback, Object state)
   at InTheHand.Net.Bluetooth.Msft.SocketBluetoothClient.BeginConnect(BluetoothEndPoint remoteEP, AsyncCallback requestCallback, Object state)
   at InTheHand.Net.Sockets.BluetoothClient.BeginConnect(BluetoothEndPoint remoteEP, AsyncCallback requestCallback, Object state)
   at InTheHand.Net.Sockets.BluetoothClient.BeginConnect(BluetoothAddress address, Guid service, AsyncCallback requestCallback, Object state)
   at BTSyncClient.Form1.connect() in c:\users\----\documents\visual studio 2010\Projects\TestClient\TestClient\Form1.cs:line 154 
```

我只知道 android 应用程序编程，我通过学习一点点设计了 C# 应用程序。仅供参考，我的 android 手机是运行 ICS 的galaxy s。请指出我的错误..

源代码：

C# 代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.Net.Sockets;
using InTheHand.Net.Bluetooth;
using InTheHand.Windows.Forms;
using InTheHand.Net.Sockets;
using InTheHand.Net;
namespace BTSyncClient
{
    public partial class Form1 : Form
    {
        BluetoothClient myself;
        BluetoothDeviceInfo bTServerDevice;         
        private Guid uuid = Guid.Parse("00001101-0000-1000-8000-00805F9B34FB");
        bool isConnected;
        public Form1()
        {
            InitializeComponent();              
            if (BluetoothRadio.IsSupported)
            {
                myself = new BluetoothClient();
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }           
        private void button1_Click(object sender, EventArgs e)
        {
            connect();
        }
        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            try
            {
                myself.GetStream().Close();
                myself.Dispose();
            }
            catch (Exception ex) { Console.Out.WriteLine(ex); }
        }
        private void button2_Click(object sender, EventArgs e)
        {
            SelectBluetoothDeviceDialog dialog = new SelectBluetoothDeviceDialog();
            DialogResult result = dialog.ShowDialog(this);
            if(result.Equals(DialogResult.OK)){
                bTServerDevice = dialog.SelectedDevice;                
            }
        }
        private void callback(IAsyncResult ar)
        {
            String msg = (String)ar.AsyncState;
            if (ar.IsCompleted)
            {
                isConnected = myself.Connected;
                if (myself.Connected)
                {
                    UTF8Encoding encoder = new UTF8Encoding();
                    NetworkStream stream = myself.GetStream();
                    if (!stream.CanWrite)
                    {
                        MessageBox.Show("Stream is not Writable");
                    }
                    System.IO.StreamWriter mywriter = new System.IO.StreamWriter(stream, Encoding.UTF8);
                    mywriter.WriteLine(msg);
                    mywriter.Flush();                    
                }
                else                    
                    MessageBox.Show("Damn thing isnt connected");

            }
        }
        private void connect()
        {
            try
            {
                if (bTServerDevice != null)
                {                    
                    myself.BeginConnect(bTServerDevice.DeviceAddress, uuid, new AsyncCallback(callback)
                    , message.Text);
                }
            }
            catch (Exception e) { Console.Out.WriteLine(e);  }
        }
    }
} 
```

服务器线程

```
import java.io.IOException;
import java.util.UUID;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.util.Log;

public class ServerSocketThread extends Thread {
    private static final String TAG = "TestApp"; 
    private BluetoothAdapter btAdapter;
    private BluetoothServerSocket serverSocket;
    private boolean stopMe;
    private static final UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    //private static final UUID uuid = UUID.fromString("6e58c9d5-b0b6-4009-ad9b-fd9481aef9b3");
    private static final String SERVICE_NAME = "TestService";
    public ServerSocketThread() {
        stopMe = false;
        btAdapter = BluetoothAdapter.getDefaultAdapter();
        try {
            serverSocket = btAdapter.listenUsingRfcommWithServiceRecord(SERVICE_NAME, uuid);            
        } catch (IOException e) {
            Log.d(TAG,e.toString());
        }
    }
    public void signalStop(){
        stopMe = true;      
    }
    public void run(){
        Log.d(TAG,"In ServerThread");
        BluetoothSocket socket = null;
        while(!stopMe){
            try {
                socket = serverSocket.accept();
            } catch (IOException e) {               
                break;
            }
            if(socket != null){             
                AcceptThread newClientConnection = new AcceptThread(socket);
                newClientConnection.start();
            }
        }
        Log.d(TAG,"Server Thread now dead");
    }

    // Will cancel the listening socket and cause the thread to finish
    public void cancel(){
        try {
            serverSocket.close();
        } catch (IOException e) {
        }
    }
} 
```

接受线程

```
import java.io.IOException;
import java.io.InputStream;
import java.util.Scanner;
import android.bluetooth.BluetoothSocket;
import android.util.Log;

public class AcceptThread extends Thread {
    private BluetoothSocket socket;
    private String TAG = "TestApp";
    static int count = 0;
    public AcceptThread(BluetoothSocket Socket) {
        socket = Socket;
    }

    volatile boolean isError;
    String output;
    String error;

    public void run() {
        Log.d(TAG, "AcceptThread Started");
        isError = false;

        try {
            socket.connect();
        } catch (IOException e) {           
            Log.d(TAG,"Error while doing socket.connect()"+ ++count);
            Log.d(TAG, e.toString());
            Log.d(TAG,"Message: "+e.getLocalizedMessage());
            Log.d(TAG,"Localized Message: "+e.getMessage());
            isError = true;
        }
        InputStream in = null;
        try {
            in = socket.getInputStream();
        } catch (IOException e) {
            Log.d(TAG,"Error while doing socket.getInputStream()");
            Log.d(TAG, e.toString());
            Log.d(TAG,"Message: "+e.getLocalizedMessage());
            Log.d(TAG,"Localized Message: "+e.getMessage());
            isError = true;
        }
        Scanner istream = new Scanner(in);
        if (istream.hasNextLine()) {        
            Log.d(TAG, "Received : "+istream.nextLine());           
            Log.d(TAG,"Count of Thread is : " + count);
        }
        istream.close();
        try {
            in.close();
        } catch (IOException e) {
            Log.d(TAG,"Error while doing in.close()");
            Log.d(TAG, e.toString());
            Log.d(TAG,"Message: "+e.getLocalizedMessage());
            Log.d(TAG,"Localized Message: "+e.getMessage());
            isError = true;
        }
        try {
            socket.close();
        } catch (IOException e) {
            Log.d(TAG,"Error while doing socket.close()");
            Log.d(TAG, e.toString());
            Log.d(TAG,"Message: "+e.getLocalizedMessage());
            Log.d(TAG,"Localized Message: "+e.getMessage());
            isError = true;
        }
    }
} 
```

# entity-framework - 列表 分页 asp.net

> ID：11168271
> 
> 赞同：0
> 
> 时间：2012-06-23T09:13:11.823
> 
> 标签：entity-framework, list, gridview, data-paging

使用三层架构，我有一个对象列表

```
 List<object> careerList = new List<object>();
            ModuleDTO module = new ModuleDTO();
            careerList = module.getDegreeCodeByQualification(qualificationCode); 
```

然后我将其添加到 gridview 中，如下所示：

```
 gridViewMaster.DataSource = careerList;
            gridViewMaster.DataBind(); 
```

然后我想做的是在gridview上启用分页。到目前为止，我的网格视图是：

```
 <asp:GridView ID="gridViewMaster" runat="server" 
        AutoGenerateColumns="False" GridLines="None"
        BorderWidth="1px" CellPadding="2" DataKeyNames="Grouping" 
        ForeColor="Black"
            onrowdatabound="gridViewMaster_RowDataBound" CssClass="mGrid" PagerStyle-CssClass="pgr"  
AlternatingRowStyle-CssClass="alt" OnPageIndexChanging="gridView_PageIndexChanging" 
                AllowPaging="True" > 
```

是否可以在列表上启用分页而不必将该列表更改为 Datatable 或 Dataview？如果有办法，这将有很大帮助。

到目前为止，我的活动如下：

```
protected void gridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        gridViewMaster.PageIndex = e.NewPageIndex;
        List<object> careerList = new List<object>();
            ModuleDTO module = new ModuleDTO();
            careerList = module.getDegreeCodeByQualification(qualificationCode);
            ModalProgress.Show();
            System.Threading.Thread.Sleep(1000);
            JobPanel.Visible = true;
            gridViewMaster.DataSource = careerList.Distinct();
            gridViewMaster.DataBind();
    } 
```

有人请帮帮我！！！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:23:26.413

我有你的代码工作，从列表数据绑定的 GridView 分页。如果您在尝试以下检查后还有任何问题，请给我留言：

1.  确保此代码返回具有名为“Grouping”的属性的项目列表，因为您已将其列为 GridView 中的 DataKeyName，如下所示：

    CareerList = module.getDegreeCodeByQualification(qualificationCode);

2.  我的 GridView 代码如下所示：

    ```
     <asp:GridView ID="GridView1" runat="server" GridLines="None" BorderWidth="1px" CellPadding="2" DataKeyNames="Grouping" 
        ForeColor="Black" AllowPaging="True" 
        onpageindexchanging="GridView1_PageIndexChanging" AutoGenerateColumns="true" PageSize="2">
    </asp:GridView> 
    ```

...请注意我添加的新“PageSize”和“AutoGenerateColumns”属性。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:17:53.397

我修好了它！感觉像个白痴，但我绑定到了错误的gridview，但你的回答非常有帮助！非常感谢你。

这是我所做的，对于其他有同样问题的人：

```
<asp:GridView ID="GridQualifications" runat="server"
    CssClass="mGrid" PagerStyle-CssClass="pgr"  
AlternatingRowStyle-CssClass="alt" AutoGenerateColumns="false" 
    onselectedindexchanged="GridQualifications_SelectedIndexChanged" 
    AllowPaging="True" PageSize="2" OnPageIndexChanging="gridView_PageIndexChanging">
 <AlternatingRowStyle CssClass="alt" />

protected void gridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridQualifications.PageIndex = e.NewPageIndex;
        BindData();
    } 
```

我使用 List 作为我的数据源，以与任何人相同的方式绑定我的数据。

非常感谢您刚刚缓解的所有压力 :D :D

# java - 如何在 Java 中将 ASCII 字符串转换为 UTF-8 字符串？

> ID：11168276
> 
> 赞同：4
> 
> 时间：2012-06-23T09:13:58.827
> 
> 标签：java, string, utf-8

如标题所示，如何在 Java 中将 ASCII 字符串转换为 UTF-8 字符串？

谢谢！

编辑：我的情况真的是我读的是中文字符串，当我输出它时，都是乱码。我认为问题可能出在编码上。那么，如何正确地将字符串从乱码转换为正确的语言集字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T09:17:06.810

Java 中没有“ASCII 字符串”或“UTF-8 字符串”之类的东西。当你得到一个`String`对象时，它只是一个 UTF-16 代码单元的序列。没有关于它最初是使用 ASCII 还是 UTF-8 从字节数组中解码来解释字节的记录。

另请注意，UTF-8 与 ASCII 向后兼容，因为如果您有任何表示 ASCII 编码文本的有效字节序列，那将是用于表示 UTF-8 中相同文本的相同字节*序列*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T09:18:06.017

Java 中没有 ASCII 字符串或 UTF-8 字符串之类的东西。ASCII 和 UTF-8 是编码 - 字节数组。

您无需进行任何转换即可从字符串的 ASCII 编码转换为字符串的 UTF-8 编码。任何有效的 ASCII 也是相同字符串的有效 UTF-8 编码。（反之则不然）。

# robots.txt - robots.txt 排除包含特定部分的网址

> ID：11168277
> 
> 赞同：0
> 
> 时间：2012-06-23T09:14:10.540
> 
> 标签：robots.txt

我有这样的网址：

*   www.wunderwedding.com/weddingvenues/share-weddingvenue/175/beachclub-all-good
*   www.wunderwedding.com/weddingvenues/share-weddingvenue/2567/castle-rock

由于这些网址不再存在，我想禁止 googlebot 通过 robots.txt 访问包含“/share-weddingvenue/”的网址

这会实现这一目标吗？

```
User-agent: *
Disallow: */share-weddingvenue/* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:25:16.390

不，可能这行不通。[在这里](http://www.robotstxt.org/robotstxt.html)，您将找到一个很好的概述，了解您可以在 a 中执行的操作`robots.txt`：

> 另请注意，在 User-agent 或 Disallow 行中不支持通配符和正则表达式。

如果内容消失了，您最好确保返回[状态 410](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:34:02.540

由于这里只允许很少的正则表达式，代码将是：

```
Disallow: weddingvenues/share-weddingvenue/ 
```

可以在此处找到有关此主题的更多信息：http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

# c++ - 使用 Lua 解释器创建新进程，传递参数失败

> ID：11168278
> 
> 赞同：0
> 
> 时间：2012-06-23T09:14:14.270
> 
> 标签：c++, windows, multithreading, process, lua

我需要帮助在 CreateProcess() //Windows 中传递参数

我想要：

```
BOOL status = CreateProcess(L"C:\\Program Files (x86)\\Lua\\lua52.exe", 
NULL, NULL, NULL, FALSE, NULL, NULL, NULL, &si, &pi); 
```

但是通过一些论点....

Lua解释器接受带有lua-scripts的文件，所以我已经准备好了并想做：

```
lua52 C:\1.lua 
```

例如...

我有一些 lua 脚本的路径，并希望 Lua 的解释器对其进行解释，然后从 Created 进程中获取 Lua 上程序的结果。

我已经尝试了一些方法来做到这一点，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:50:33.863

```
static STARTUPINFO si;
static PROCESS_INFORMATION pi;

int main ()
{
    ZeroMemory (&si, sizeof si);
    ZeroMemory (&pi, sizeof pi);

    si.cb = sizeof si;

    wсhar_t command [] = L"\"C:\\Program Files (x86)\\Lua\\lua52.exe\" C:\\1.lua";

    BOOL status = CreateProcess (0, command, 0, 0, FALSE, 0, 0, 0, &si, &pi);

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T13:04:45.790

不要忘记：

> 此函数的 Unicode 版本 CreateProcessW 可以修改此字符串的内容。因此，此参数不能是指向只读内存的指针（例如 const 变量或文字字符串）。如果此参数是一个常量字符串，该函数可能会导致访问冲突。

# heroku - git push heroku master 给出错误 ssh: connect to host heroku.com port 22: Connection denied

> ID：11168279
> 
> 赞同：3
> 
> 时间：2012-06-23T09:14:15.153
> 
> 标签：heroku

我正在尝试运行 heroku-django 教程（使用 ubuntu 12.04），但由于某种原因，我似乎无法进入 heroku。这是发生的事情：

```
yeinhorn@ubuntu:~/hellodjango$ git init
Reinitialized existing Git repository in /home/yeinhorn/hellodjango/.git/
yeinhorn@ubuntu:~/hellodjango$ git add .
yeinhorn@ubuntu:~/hellodjango$ git commit -m "my first commit"
# On branch master
nothing to commit (working directory clean)
yeinhorn@ubuntu:~/hellodjango$ heroku create
Creating high-dusk-6308... done, stack is cedar
http://high-dusk-6308.herokuapp.com/ | git@heroku.com:high-dusk-6308.git
 !    New default stack: Cedar. To use Bamboo, run `heroku create -s bamboo`.
yeinhorn@ubuntu:~/hellodjango$ git remote -v
heroku  git@heroku.com:blazing-dusk-8587.git (fetch)
heroku  git@heroku.com:blazing-dusk-8587.git (push)
yeinhorn@ubuntu:~/hellodjango$ git push heroku master
ssh: connect to host heroku.com port 22: Connection refused
fatal: The remote end hung up unexpectedly
yeinhorn@ubuntu:~/hellodjango$ git push -f heroku
ssh: connect to host heroku.com port 22: Connection refused
fatal: The remote end hung 
```

出乎意料地起来

当我跑步时

```
$telnet heroku.com 22 
```

我明白了

```
Trying 50.19.85.132...
Trying 50.19.85.154...
Trying 50.19.85.156...
telnet: Unable to connect to remote host: Connection refused 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T00:03:13.860

基于[这个问题](https://stackoverflow.com/questions/2444643/git-access-on-heroku-deployment-and-others-connection-refused)和[这个问题](https://stackoverflow.com/questions/4049900/cannot-push-git-to-remote-repository-ssh-error)，我建议您检查您没有运行任何防火墙或端口阻止软件（如 PeerGaurdian），并且您不会阻止系统上任何地方的 Amazon/EC2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T11:23:40.470

执行以下步骤：1。检查 sshd 服务：

```
$ ssh-keygen -t rsa   # created ssh key
$ heroku keys:add   # upload ssh key
$ heroku keys  # lists keys 
```

2.找一个正常的代理节点

```
$ ssh -vvv heroku.com  # debug ssh connection
$ vim ~/.ssh/config   # setup usefull proxy node
  Host heroku.com
  Hostname 107.21.95.3     # trans by ip
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/id_rsa
  port 22 
```

# ruby-on-rails - 当您调用 Collection.create 时，Backbone.js 中究竟何时调用 .save？

> ID：11168281
> 
> 赞同：0
> 
> 时间：2012-06-23T09:14:42.013
> 
> 标签：ruby-on-rails, backbone.js

我在这里有这个工作代码。

我之前在下划线模板中有一个错误，我注意到，模型没有被保存到数据库中，因为由于模板错误，渲染无法正常工作。这应该意味着 model.save() 在渲染后被调用。或者，collections.create() 完成了所有的保存工作，而 model.save() 根本没有被调用？

下面的代码究竟是如何将模型数据保存在数据库中的？

```
$(function(){
Todos = new TodoList.Collections.Todos;
TodoList.Views.TodoView = Backbone.View.extend({
    tagName: "li",
    events: {},
    initialize: function(){},
    template: _.template('<li> <%= task %></li>'),
    render: function(){
        var todo = this.model.toJSON();
        //alert("render: " + JSON.stringify(todo));
        return this.template(todo);
    }
});

TodoView = TodoList.Views.TodoView;

TodoList.Views.AppView = Backbone.View.extend({
    el: $("#todo_app"),
    events: {
        "submit form#new_todo": "createTodo",
        "click div.new-todo-btn" : "showFormNew"
    },
    showFormNew: function(){
        $(".new-todo-form").toggle();
    },
    initialize: function(){
        _.bindAll(this, 'addOne', 'addAll','render');
        Todos.bind("add", this.addOne);
        Todos.bind("reset", this.addAll);
        Todos.bind("all", this.render);
        Todos.fetch();
    },

    addOne: function(todo){
        var view = new TodoView({model: todo});
        this.$("#todo_list").append(view.render());
    },

    addAll: function(){
        Todos.each(this.addOne);
    },

    newAttributes: function(event){
        var new_todo_form = $(event.currentTarget).serializeObject();
        return {
                'task': new_todo_form["todo[task]"],
                'done': new_todo_form["todo[done]"]
        };
    },

    createTodo: function (e){
        e.preventDefault();
        var params = this.newAttributes(e);
        Todos.create(params);
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:22:08.290

完全不确定上面的代码是否成功保存了模型数据。您没有附加到模型上的“同步”事件，该事件是在服务器上成功创建模型时调用的。您也没有附加到“错误”事件，如果保存模型有任何问题，该事件将被触发。

Collection.create 直接调用 Model.save 顺便说一句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:48:28.600

如果您想知道任何特定的backbone.js 方法中发生了什么，那么带注释的源代码真的很有用。Backbone 源非常小，而且很容易理解。

[http://documentcloud.github.com/backbone/docs/backbone.html#section-99](http://documentcloud.github.com/backbone/docs/backbone.html#section-99)

您可以看到它`Collection.create`确实调用了该`model.save`方法，除非模型验证失败。

这里的事件顺序是（如果没有错误）：

*   用户填写`new_todo`表格并提交。
*   该`createTodo`方法被调用，该方法调用 TodoList.create。
*   `Collection.create`来电`model.save`。
*   传递给的成功回调`model.save`会将新模型添加到集合中。
*   该`add`事件在集合上触发，导致`TodoList.addOne`调用创建新的`TodoView`.

# wpf - 如何使用两个用户控件作为主控 - 详细信息

> ID：11168283
> 
> 赞同：0
> 
> 时间：2012-06-23T09:14:55.550
> 
> 标签：wpf, user-controls, master-detail

我现在已经创建了两个用户控件，我想将一个用作主用户控件，另一个用作详细信息用户控件，如下所示：

```
1 Parent Control
  1.1 - User Control 1 as Master Control
  1.2 - User Control 2 as Details Control 
```

主控件有一个列表框，我在其中选择项目的名称，详细信息控件显示库存中所有可用的项目。我在父控件中添加了 ItemId 并将其绑定到主控件和详细信息控件（两个控件都有 ItemId 作为 DP）。当我从 Master 中选择项目时，详细信息网格不会刷新。

当我从主用户控制中选择项目时，如何确保？详细用户控件应该向我显示详细信息？

家长控制

```
 <Grid>
        <StackPanel Orientation="Horizontal"
                    Width="650"
                    HorizontalAlignment="Left"
                    Margin="10,10,0,0">
             <UC:ItemDetailUC ItemId="{Binding ElementName=MainWindowName,Path=ItemId,Mode=TwoWay}" />
             <UC:StockItemDetailsUC ItemId="{Binding ElementName=MainWindowName,Path=ItemId,Mode=TwoWay}"/>
        </StackPanel>
    </Grid> 
```

.

```
public partial class MainWindow : Window, INotifyPropertyChanged
        {

       private int _ItemId;
            public int ItemId
            {
                get
                {
                    return _ItemId;
                }
                set
                {
                    if (_ItemId == value)
                        return;
                    _ItemId = value;
                    OnPropertyChanged("ItemId");
                }
            }

            public MainWindow()
            {
                InitializeComponent();            
                this.DataContext = this;
            }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    } 
```

1.1 - 用户控件 1 作为主控件 - ItemDetailUC.XAML

```
 <UserControl x:Class="LearnWPF.ItemDetailUC"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             Name="ItemDetailUCName"
             d:DesignHeight="100" d:DesignWidth="350">
    <Grid Background="Aqua">
        <StackPanel Orientation="Vertical" Margin="10,10,0,0" >
            <Label Content="Master Control:" Width="350" HorizontalContentAlignment="Center"/>
            <StackPanel Orientation="Horizontal" Width="200" HorizontalAlignment="Left" Margin="10,10,0,0">
                <Label Content="Item :" Width="80"/>
                <ComboBox Name="ItemListComboBox" Width="100"
                          DisplayMemberPath="ItemName"
                          SelectedValuePath="ItemId"
                          SelectedValue="{Binding ElementName=ItemDetailUCName, Path=ItemId}" />
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="10,10,0,0">
                <Label Content="Available Qty :" Width="80"/>
                <TextBox Width="100" Text="{Binding ElementName=ItemListComboBox, Path=SelectedItem.AvailableQty}" />
                 <Label Content="MaxQty :" Width="60"/>
                <TextBox Width="80" Text="{Binding ElementName=ItemListComboBox, Path=SelectedItem.MaxQty}" />
           </StackPanel>
        </StackPanel>
    </Grid>
</UserControl> 
```

.

```
 public static readonly DependencyProperty ItemIdProperty = DependencyProperty.Register("ItemId", typeof(int), typeof(ItemDetailUC));
 public int ItemId
    {
        get
        {
            return (int)GetValue(ItemIdProperty);
        }
        set
        {
            SetValue(ItemIdProperty, value);
        }
    }

       public ItemDetailUC()
    {
        InitializeComponent();
        ItemListComboBox.ItemsSource = Data.GetItemList();
        this.DataContext = this;
    } 
```

1.2 - 用户控件 2 作为细节控件

```
<UserControl x:Class="LearnWPF.StockItemDetailsUC"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="200" d:DesignWidth="300">
    <Grid>

        <StackPanel Orientation="Vertical" Background="Aquamarine">
             <Label Content="Details Control:" Width="300" HorizontalContentAlignment="Center"/>

        <DataGrid Name="StockItemDetailsDataGrid" Background="Aquamarine"
                  AutoGenerateColumns="False">

             <DataGrid.Columns>
                <DataGridTextColumn Header="Location Name"  Binding="{Binding LocationName}"/>
                <DataGridTextColumn Header="RowNo" Binding="{Binding RowNo}" />
                 <DataGridTextColumn Header="ColumnNo" Binding="{Binding ColumnNo}" />
                 <DataGridTextColumn Header="Qty" Binding="{Binding Qty}" />               
            </DataGrid.Columns>

        </DataGrid>
</StackPanel>
    </Grid>
</UserControl> 
```

.

```
 public static readonly DependencyProperty ItemIdProperty = DependencyProperty.Register("ItemId", typeof(int), typeof(StockItemDetailsUC));

        public int ItemId
        {
            get
            {
                return (int)GetValue(ItemIdProperty);
            }
            set
            {
                SetValue(ItemIdProperty, value);
            }
        }

        public StockItemDetailsUC()
        {
            InitializeComponent();
            Loaded += new RoutedEventHandler(StockItemDetailsUC_Loaded);

        }

        void StockItemDetailsUC_Loaded(object sender, RoutedEventArgs e)
        {
            if (ItemId != 0)
            {
                StockItemDetailsDataGrid.ItemsSource = Data.GetItemLocaitonDetails(ItemId);
            }
            this.DataContext = this; 
        }
.

       public class ItemDetailsVO: INotifyPropertyChanged
    {
        private int _ItemId;
        public int ItemId
        {
            get
            {
                return _ItemId;
            }
            set
            {
                if (_ItemId == value)
                    return;
                _ItemId = value;
                OnPropertyChanged("ItemId");
            }
        }

        private String _ItemName;
         private int _AvailableQty;
         private int _MaxQty;
    }

   public class StockItemDetails : INotifyPropertyChanged
    {
        private int _ItemId;
        public int ItemId
        {
            get
            {
                return _ItemId;
            }
            set
            {
                if (_ItemId == value)
                    return;
                _ItemId = value;
                OnPropertyChanged("ItemId");
            }
        }

        private String _LocationName;
        private int _Qty;
        private int _RowNo;
        private int _ColumnNo;
        /..... all properties are implemented
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:25:37.963

不要只使用 ItemID 作为依赖属性，而是使用项目本身。以下场景应满足您的要求：

假设 CItem 是您的主/详细视图中的一条记录的类型。在托管您的主控件和详细控件的视图中，使用公开的视图模型，`List<CItem>`或者如果您动态地想要添加/删除`ObservableCollection<CItem>`您设置为主列表的绑定目标的项目`ItemsSource`。此外，在视图模型中创建 CItem 类型的依赖属性“SelectedObject”。在 SelectedItem 的主列表中，创建一个与“SelectedObject”属性的双向绑定。在详细信息视图中，还绑定到“SelectedObject”的属性，例如

```
<TextBox Text="{Binding SelectedObject.MyProperty, Mode=TwoWay}" /> 
```

现在，当主视图中的用户选择不同的记录时，SelectedObject 属性将被更新，因此，其上的所有详细信息绑定也将得到更新。

编辑：因此，如果您需要其他逻辑，请考虑在依赖项属性 ItemID 的值更改时使用回调函数。注册依赖项属性时，将[PropertyMetadata](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata.aspx)与[PropertyChangedCallback 构造函数一起使用。](http://msdn.microsoft.com/en-us/library/ms557327.aspx)每次依赖属性的值发生变化时都会调用回调函数。在此回调函数中，您可以触发您提到的用于加载/准备项目以用于详细信息视图的附加逻辑。

# java - 带有 Eclipse 链接结果列表的 JPA 迭代到无穷大

> ID：11168285
> 
> 赞同：0
> 
> 时间：2012-06-23T09:15:24.117
> 
> 标签：java, jpa, jpa-2.0

我的命名查询：

```
@NamedQuery(name = "EmsDetails.findAll", query = "SELECT e FROM EmsDetails e") 
```

* * *

```
private static Logger logger = Logger.getLogger(EmsDetailsDTO.class);
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("Employee_Mangement_SystemPU");
    EntityManager em = emf.createEntityManager();
    EntityTransaction tx = em.getTransaction();

    public List<EmsDetails> getAllEMSDetails() {
        List<EmsDetails> emsDetails = em.createNamedQuery("EmsDetails.findAll").getResultList();
        logger.info(emsDetails.size());
        for(EmsDetails e : emsDetails){
            logger.info(e.getAddress());
        }

        return getAllEMSDetails();
    }

    public boolean addEmployee(EmsDetails detail){
        tx.begin();
        em.persist(detail);
        tx.commit();
        return true;        
    }

    public void closeEM(){
        em.close();
        emf.close();

    }

    public static void main(String[] args) {
        EmsDetailsDTO e = new EmsDetailsDTO();
        e.getAllEMSDetails();
    } 
```

* * *

结果：

```
4:55:36,660  INFO EmsDetailsDTO:28 - 1
14:55:36,670  INFO EmsDetailsDTO:30 - I 
14:55:36,670  INFO EmsDetailsDTO:28 - 1
14:55:36,670  INFO EmsDetailsDTO:30 - I 
14:55:36,670  INFO EmsDetailsDTO:28 - 1
14:55:36,670  INFO EmsDetailsDTO:30 - I 
```

使用 JPA (eclipselink) 时，结果循环到无穷大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:24:41.573

不，List 不会迭代到无穷大。正如您从日志中看到的，`logger.info(emsDetails.size())`for 循环之外的 也被一次又一次地执行。

原因是在getAllEMSDetails 方法的最后调用了getAllEMSDetails。它自称。所以改为当前的返回语句：

```
return getAllEMSDetails(); 
```

以下效果更好：

```
return emsDetails; 
```

# c++ - 错误：未定义 ID3D11Texture2D。

> ID：11168287
> 
> 赞同：0
> 
> 时间：2012-06-23T09:15:48.407
> 
> 标签：c++, directx, directx-11

我包含了 d3d11.h 标头，但是当我声明这种类型的指针时：

```
ID3D11Textrue2D* pDepthStencilBuffer = 0; 
```

它说 ID3D11Texture2D 没有定义。

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:20:42.373

你拼错`ID3D11Textrue2D`了，应该是`ID3D11Texture2D`。

# unicode - 这个方法（chr（））不支持水晶报表中的unicode..那么如何在水晶中使用unicode？

> ID：11168290
> 
> 赞同：0
> 
> 时间：2012-06-23T09:16:27.180
> 
> 标签：unicode, crystal-reports

我在水晶报表中使用了 chr(252) 作为刻度线，这个刻度线显示在 chrome 中，IE Firefox 除外 .. Firefox 不支持绕组字体，所以我必须使用 unicode ..

这些是刻度线 (U+2713 Hex) 和 (10003D) 的 unicode，现在，我可以通过哪种方法或方式或技术使用这些 un​​icode？

请尽快回复我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:36:12.273

我没有得到任何使用 unicode 作为参数的方法.. 但我得到了我的解决方案......

在水晶报表公式中，我使用了 html tag( `<font> &#10003; </font>`) 并通过 Format Object 选项将此字段设置为 HTML Text。

现在，它的工作......

# sql - Oracle 的更新花费了太多时间

> ID：11168299
> 
> 赞同：2
> 
> 时间：2012-06-23T09:17:02.960
> 
> 标签：sql, oracle

我使用 oracle 10。我有这样的更新语句：

```
update table1 t1 
   set v_value=(select v_value 
                from table2 t2 
                where t2.user_id=t1.user_id  
                  and t2.item_id=t1.item_id  ) 
```

它有效，但需要太多时间。我该如何优化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:20:33.517

您可以尝试合并语句：

```
merge into table1 t1
using
(
   select user_id,
          item_id,
          v_value
   from table2
) t2 ON (t1.user_id = t1.user_id and t1.item_id = t1.item_id)
when matched then update
  set v_value = t2.v_value; 
```

（您可能需要检查语法，MERGE 中的哪些部分是强制性的，哪些部分不在 10 到 11 之间 - 很长时间没有使用 10g）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-24T00:48:23.073

仅通过查看语句来调整语句几乎是不可能的。获取解释计划，它会告诉您是否正在使用全表扫描（设置自动跟踪）。我还建议使用免费工具，我刚刚发布了 - odbtools.com。它允许您分析您的语句并生成解释计划，它将显示您是否进行了全表扫描并且您的选择部分不使用索引。

# android - 由于不包括大地水准面高度，Android 的 GPS 高度是否不正确？

> ID：11168306
> 
> 赞同：6
> 
> 时间：2012-06-23T09:18:15.897
> 
> 标签：android, geolocation, gps, altitude

我正在测试一个记录位置 (lat/long/alt) 的 Android 应用程序。我正在运行 Android 2.2.1 的三星 GTS5830 手机上运行该应用程序

我在这里和那里读到 GPS 高度通常是不正确的，因为地球不是完美的球形。例如，在我的位置，[大地水准面的高度](http://earth-info.nga.mil/GandG/wgs84/gravitymod/wgs84_180/intptW.html)是 52 米。

我的理解是，这个高度将从“纯”GPS 高度中减去。这对我的位置是有意义的：

```
 - altitude from GPS phone: 535 m
 - geoid altitude: 52 m 
 - altitude from phone's GPS minus geoid height: 482m

 - correct atlitude: 478 m 
```

482 足够接近真实的东西，让我在远足时跟踪海拔高度

1.  GPS高度减去大地水准面高度的上述公式是否正确？
2.  我是否正确假设在返回 GPS 高度时 android 没有考虑大地水准面的高度？
3.  如果上述情况属实，是否适用于所有版本的 Android？

这是我用来获取 GPS 坐标的代码：

```
public class HelloAndroid extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d("main", "onCreate");
        setupGps();
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    LocationListener locationListener;
    LocationManager lm;

    void setupGps() {
        Log.d("gps", "Setting up GPS...");
        locationListener = new MyLocationListener();
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 20000, 5,
                locationListener);

        Log.d("gps",
                "GPS supports altitude: "
                        + lm.getProvider(LocationManager.GPS_PROVIDER)
                                .supportsAltitude());
        Log.d("gps", "Finished setting up GPS.");
    }

    static class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            Log.d("gps", "long: " + location.getLongitude() + ", lat: "
                    + location.getLatitude() + ", alt: "
                    + location.getAltitude());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T12:05:52.920

你所有三个问题的答案都是肯定的。

从 GPS 获得的高度是 WGS84 椭球上方的高度（以米为单位），这是地球表面的近似值。我知道这一点，因为我一直在开发 Android 软件来使用它。

必须应用校正将数字转换为平均海平面以上的高度，或通常已知的高度。请注意，这可能与设置为平均海平面当前压力的高度计报告的高度不同，因为高度计实际上测量的是气压，但气压不仅仅是高度的函数；它也是空气密度和温度的函数，因此高度计显示的是近似值。GPS 看不到这种效果。

地球引力模型 2008 (EGM2008) 将平均海平面的差异与椭球映射为经度和纬度的函数。详情在这里：

[http://earth-info.nga.mil/GandG/wgs84/gravitymod/egm2008/egm08_wgs84.html](http://earth-info.nga.mil/GandG/wgs84/gravitymod/egm2008/egm08_wgs84.html)

还可以使用一种使用较少数据的不太准确的模型，称为 EGM96。谷歌这两个以更好地理解这些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T15:16:36.150

这不是那么简单——`Android API`要么发生了变化，要么有错误。我有两部 Android 设备——一部“通用”手机 ( `Android 2.3.6`) 和一部`Nexus 7`( `Android 4.x`)。

在电话中，`getAltitude()`给出与我的实际高度一致的答案`AMSL`（即，修正为`geoid`）。在 上`Nexus 7`，返回的高度未校正。的文档`API`没有指定返回哪个 - 所以在某种意义上两者都是“正确的”。

两种设备似乎都不错`GPS modules`——`$GPGGA NMEA`消息显示了正确的高度和大地水准面校正。所以看起来好像必须自己解析消息才能得到正确的高度，这种`getAltitude()`方法是不可信的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T07:29:13.227

高度误差很可能不归咎于 GPS 和大地水准面高度分离。

任何 GPS 接收器返回的高度值始终是最不准确的值。我经常看到我的办公楼报告说它的高度在 -200 到 +750 米之间移动。一个根本原因是不可能在高度方向上均匀分布卫星。它们将始终在您上方，如果在低海拔地区有任何遮蔽天空，它们将位于您上方的锥形中。在 X 和 Y 方向上，假设天空视野良好，总会有左右散布的卫星；在接收器的前面和后面。这种扩展提高了位置解决方案的准确性。

# mod-rewrite - mod_rewrite 但跳过一个目录

> ID：11168307
> 
> 赞同：1
> 
> 时间：2012-06-23T09:18:17.020
> 
> 标签：mod-rewrite, directory

我试图避免这样的网址：

图片/

或者

图像/有效文件名.png

或者

图像/无效文件名.png

从被重写

我已经检查了其他示例问题，例如[根目录上的 .htaccess mod_rewrite 但需要它跳过所有其他目录](https://stackoverflow.com/questions/1328118/htaccess-mod-rewrite-on-root-directory-but-need-it-to-skip-all-other-directorie)和[.htaccess mod_rewrite 豁免](https://stackoverflow.com/questions/7717637/htaccess-mod-rewrite-exemptions)以及这个[https://stackoverflow.com/questions/7209746/can-mod-rewrite-skip -a-folder](https://stackoverflow.com/questions/7209746/can-mod-rewrite-skip-a-folder)但我没有设法获得实现我所追求的规则。

这是我现在所拥有的：

```
# Enable URL Rewriting
Options -Indexes
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule ^(scripts|styles|images)(/.*|$) - [L]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/robots.txt
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  # This solved the problem
  # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  RewriteCond %{REQUEST_URI} !images/.* [NC]
  RewriteRule ^(.*)$ index.php [L,QSA]
</IfModule> 
```

如果我导航到**www.site.com/images/**，我会被重定向到 www.site.com

如果我导航到**www.site.com/images/invalid-filename.png**，我会被重定向到 www.site.com

但**www.site.com/images/valid-filename.png**正确加载。

有人可以帮助解释如何实现上述重写行为吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:48:26.780

尝试添加这个 RewriteCond：`RewriteCond %{REQUEST_URI} !images/.* [NC]`
它将检查 URI 是否以开头，`images/`如果是，则不符合规则。

# visual-studio-2010 - 从数据库中保存数据

> ID：11168308
> 
> 赞同：1
> 
> 时间：2012-06-23T09:18:23.377
> 
> 标签：visual-studio-2010, silverlight, visual-studio-lightswitch

我用内部数据库 LightSwitch 创建了一个应用程序。

现在我想发布我的应用程序，我还想发布我的内部数据库的数据。我该怎么办？

例如：我有一个应用程序 Fantacalcio，我在我的 lightswitch 内部数据库中创建了一些播放器。现在当我发布我的应用程序并将它安装在我的电脑中时，我的应用程序中没有数据。我希望当我安装我的应用程序必须有我之前创建的播放器..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:57:52.747

一种可能的方法是执行以下操作：

1.  将电灯开关内部数据库附加到 SQL 服务器
2.  将所有数据导出到 SQL 脚本中，[这里是说明](http://www.beletsky.net/2011/02/how-to-export-sql-data-script-for-sql.html)
3.  在您拥有 sql 脚本（主要是 INSERT 语句）之后，然后在您指定的数据库上运行该脚本。
4.  现在应该在那里填充完全相同的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:49:30.190

您可以在 Application_Initialize 或 SQL 脚本中以编程方式执行此操作。

LS 没有“内置”方法来预填充数据，因此需要选择一种解决方法。

# php - 如何安装学说 2.2 ORM

> ID：11168309
> 
> 赞同：3
> 
> 时间：2012-06-23T09:18:28.700
> 
> 标签：php, doctrine-orm

我已经下载了学说 2.2 orm。我已经阅读了它的安装指南，但我无法正确理解它的文档。有人可以指导我完成学说的设置过程。我以前一直在使用 java 中的 Hibernate ORM 框架。他们有优秀的文档，对于初学者来说很容易理解。我发现教义的文档没有达到那个水平。有人可以提供一些关于教义的示例项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:03:37.890

有几种方法可以将教义安装到您的网站项目中。我将向您展示一个简单的替代方案：

*   在您的服务器中下载学说包并解压缩。现在您的目录如下所示：

    localhost/Doctrine
    localhost/Doctrine/Common
    localhost/Doctrine/ORM
    localhost/Doctrine/DBAL

*   您需要创建两个附加文件夹以存储您的**模型**（持久性实体）和**代理**：

    本地主机/模型
    本地主机/代理

*   创建一个类，该类将负责创建**EntityManager**对象和与数据库的连接。让我们创建一个名为 Doctrine 的魔法类：

    本地主机/doctrine.php

设置属性：

```
<?php
use Doctrine\Common\ClassLoader,
    Doctrine\ORM\Configuration,
    Doctrine\ORM\EntityManager,
    Doctrine\Common\Cache\ArrayCache,
    Doctrine\DBAL\Logging\EchoSQLLogger;

class Doctrine{

  public $em = null;

  public function __construct()
  {

    require_once 'Doctrine/Common/ClassLoader.php';

    $doctrineClassLoader = new ClassLoader('Doctrine',  '/');
    $doctrineClassLoader->register();
    $entitiesClassLoader = new ClassLoader('models', '/models/');
    $entitiesClassLoader->register();
    $proxiesClassLoader = new ClassLoader('Proxies', '/proxies/');
    $proxiesClassLoader->register();

    // Set up caches
    $config = new Configuration;
    $cache = new ArrayCache;
    $config->setMetadataCacheImpl($cache);
    $driverImpl = $config->newDefaultAnnotationDriver(array('/models/Entities'));
    $config->setMetadataDriverImpl($driverImpl);
    $config->setQueryCacheImpl($cache);

    $config->setQueryCacheImpl($cache);

    // Proxy configuration
    $config->setProxyDir('/proxies');
    $config->setProxyNamespace('Proxies');

    // Set up logger
    $logger = new EchoSQLLogger;
    //$config->setSQLLogger($logger);

    $config->setAutoGenerateProxyClasses( TRUE );

    // Database connection information
    $connectionOptions = array(
        'driver' => 'pdo_mysql',
        'user' =>     'USER',
        'password' => 'PASS',
        'host' =>     'HOST',
        'dbname' =>   'DB_NAME'
    );

    // Create EntityManager
    $this->em = EntityManager::create($connectionOptions, $config);
  }
} 
```

现在，一旦包含它，您就可以在您的网站中使用 entityManager。

```
$doctrine = new Doctrine();
$user = new models\User;
$doctrine->em->persist($user);
$doctrine->em->flush(); 
```

至少这篇文章可以帮助您了解如何安装和使用学说

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T11:59:39.153

**多特林 2.5.4**

使用命名空间

```
namespace DB;

use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;

class Doctrine
{
    public $em;

    public function __construct()
    {
        $paths = array("src/Application/Models/Entity");
        $isDevMode = false;

        // the connection configuration
        $dbParams = array(
            'driver' => 'pdo_mysql',
            'user' =>     'USER',
            'password' => 'PASS',
            'host' =>     'HOST',
            'dbname' =>   'DB_NAME',
        );

        $config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode, null, null, false);

        $this->em = EntityManager::create($dbParams, $config);

    }
} 
```

在 src\Application\Models\Entity 中创建文章实体

```
namespace Application\Models\Entity;

use Doctrine\ORM\Mapping as ORM;
/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks()
 * @ORM\Table(name="article")
 * @ORM\Entity(repositoryClass="Application\Models\Entity\ArticleRepository")
 */
class Article
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue
     */
    private $id;

    /**
     * @var string $title
     *
     * @ORM\Column(type="text", length=255, nullable=true)
     */
    protected $title;

    /**
     * @var text $body
     *
     * @ORM\Column(type="text", nullable=true)
     */
    protected $body;

    /**
     * @var datetime $createdAt
     *
     * @ORM\Column(type="datetime", name="created_at")
     */
    private $createdAt; 
```

现在从您的类中调用实体管理器：

```
$doctrine = new Doctrine();
$article = $doctrine->em->find('Application\Models\Entity\Article', 1); 
```

# c# - c# mvc jquery live chat

> ID：11168310
> 
> 赞同：3
> 
> 时间：2012-06-23T09:18:35.750
> 
> 标签：c#, jquery, ajax, asp.net-mvc-3, chat

我想创建一个基于服务器的聊天应用程序。我一直在阅读有关他们如何做到这一点的文章，但我对他们如何做到这一点不满意。

1.  我看到他们在他们的数据库中取了最后（比如说）20 行，其中包含新消息。但是如果新插入的消息是 50 条，那么其他 30 条消息肯定不会显示。在 c#mvc3 中，在我的控制器操作中，如何在 LINQ 中（或者如果有任何其他方式）我可以获取新插入的行...有没有一种聪明的方法，当每次在数据库中插入新行时，你的 c# 代码可以自动获取它并将其作为 json 对象传递给您的视图吗？

2.  我知道我们应该使用 ajax 在视图中发布新消息，但据我所知，在 jquery 中.. 在调用 ajax 函数之前必须有一个事件，例如：

    ```
    <script>
    $('#btn').click(function(){ call ajax and post data which is a new message to the view});
    </script> 
    ```

    如何在不刷新页面的情况下连续调用 ajax 函数发布新消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:38:36.297

你试过[SignalR](http://signalr.net/)吗？

[网上](https://github.com/moberg/SignalRChat)有[很多](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx) [关于](http://geekswithblogs.net/jeroenb/archive/2011/12/14/signalr-starter-application.aspx) 使用它构建 MVC 聊天应用程序的信息。

# objective-c - 在 NSPopUpButton 中维护子菜单

> ID：11168314
> 
> 赞同：0
> 
> 时间：2012-06-23T09:19:27.560
> 
> 标签：objective-c, cocoa

我正在使用以下绑定对 NSPopUpButton 进行排序：

```
[arrayController bind:@"contentArray" toObject:self withKeyPath:@"displayElements" options:nil];
[popUpButton bind:@"content" toObject:arrayController withKeyPath:@"arrangedObjects" options:nil];
[popUpButton bind:@"contentValues" toObject:arrayController withKeyPath:@"arrangedObjects.title" options:nil]; 
```

其中**displayElements**是 NSMenuItem 的 NSMutable 数组

```
displayElements = [[NSMutableArray alloc] initWithObjects:[[NSMenuItem alloc]initWithTitle:@"one" action:nil keyEquivalent:@""],
                                                              [[NSMenuItem alloc]initWithTitle:@"two" action:nil keyEquivalent:@""],
                                                              [[NSMenuItem alloc]initWithTitle:@"three" action:nil keyEquivalent:@""],
                                                              nil]; 
```

并且排序工作得很好。

现在的问题是，如果我将子菜单添加到任何菜单项，然后我将新的 NSMenuItem 添加到数组控制器，则先前添加的子菜单会消失，如下图所示：

添加新项目之前：

![在此处输入图像描述](../Images/28544af27178e897dcd1191e20350a37.png)

添加新项目后：

![在此处输入图像描述](../Images/c51c8272544cd3b38eca6118ba3209e2.png)

我正在使用以下语句添加一个新的 NSMenuItem：

```
[arrayController addObject:[[NSMenuItem alloc]initWithTitle:[newItemTextField stringValue] action:nil keyEquivalent:@""]]; 
```

当我们对元素进行排序时，会显示相同的行为。有关解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:24:41.757

如果不添加它，而是将它`forItem:[popUpButton itemAtIndex:[indexValue intValue]]`添加到 arrayController 中的项目，会发生什么？

我怀疑当您稍后在 ArrayController 中添加菜单项时，绑定会导致 NSPopUpMenu 本身从 NSArrayController 中的值创建新的 NSMenuItems。数组控制器中的这些项目没有子菜单，因为您直接在 PopUp 按钮中创建了它。

就像您在 Array Controller 中添加新项目一样，我想您应该为 Array Controller 中的项目添加子菜单。

如果当您将子菜单添加到数组控制器中的项目时，您没有看到子菜单出现在按钮本身中，这可能意味着您需要再次触发绑定，以便弹出按钮将重建其菜单。您可以通过包装将子菜单添加到数组控制器的代码来做到这一点： `[arrayController willChangeValueForKey:@"arrangedObjects"];`和 `[arrayController didChangeValueForKey:@"arrangedObjects"];`

# mysql - 创建外键约束时出现语法错误

> ID：11168315
> 
> 赞同：0
> 
> 时间：2012-06-23T09:19:30.990
> 
> 标签：mysql, sql, foreign-keys

我正在创建一个具有外键的表，以便将其链接到另一个表，但它让我一直给出这个错误，我已经检查了 w3schools 上的语法，但我仍然不断收到错误，知道为什么吗？这是我的 SQL 脚本

```
CREATE TABLE user_profile
(
user_Id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
accnt_id INT,
first_name varchar(255),
last_name varchar(255),
biography TEXT,
date_joined DATETIME,
date_of_birth DATE,
email varchar(255),
gender varchar(255),
screenname varchar(255)
country varchar(255),
FOREIGN KEY (accnt_Id) REFERENCES accounts(accnt_Id)
) 
```

这是错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'country varchar(255), FOREIGN KEY (accnt_Id) REFERENCES accounts(accnt_Id) )' at line 13 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:30:35.107

您缺少`,`后面`screenname varchar(255)`将其更改为

```
screenname varchar(255), 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:31:51.333

您在“屏幕名称”列后缺少逗号

```
CREATE TABLE user_profile
(
    user_Id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    accnt_id INT,
    first_name varchar(255),
    last_name varchar(255),
    biography TEXT,
    date_joined DATETIME,
    date_of_birth DATE,
    email varchar(255),
    gender varchar(255),
    screenname varchar(255),
    country varchar(255),
    FOREIGN KEY (accnt_Id) REFERENCES accounts(accnt_Id)
) 
```

# jquery - Stop refresh page after remote form is loaded via jquery ajax

> ID：11168318
> 
> 赞同：0
> 
> 时间：2012-06-23T09:19:58.743
> 
> 标签：jquery, ajax

I have a div on a page where I load a div from another php page (of the same website) by using the jquery .load() and setTimeout() to refresh it. This div though contains a form with two radio buttons that have random names and id's. After the submit button is pressed the page gets redirected to the form page which contains other options. What I want to do is submit the form without redirecting to the default form page.

p.s. the div containing the form "disappears" after submission and another div with other options appears. I just want it to dissappear from the destination div. I don't have control over the source page and cannot change anything there.

```
<div id="destinationdiv">
//source form that doesn't have id goes here
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:27:49.850

You can delegate a submit handler to the form on page load, even though it won't exist until it is ajax loaded. Since form has no identifiers, will use it's parent element and the form tag as selector

[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).on('submit', '#destinationdiv form', function() { /* "this" will be the form element*/

    /* serialize all fields for ajax submittal*/
    var data = $(this).serialize();

    /* ajax post data */
    $.post(url, data, function(data) { 
       /* do something with return data, or local html on success here*/
    });

    /* prevent browser default submit*/

    return false;
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:24:34.790

Maybe you can make your own "submit", by serializing the form (see JQuery's `.serialize()`) and sending it via AJAX (with `$.get()` or `$.post`):

```
$('#myform').submit(function() {

  $.post("pageThatUsesTheFormData.php", $(this).serialize();

  return false;
}); 
```

(I assume it's a php page that uses the form data but can also be ASP.NET, doesn't matter).

This way the form won't be actually "submitted" as in common HTML sense (that's because of `return false;`), but you can still send the data to the page that will process it.

Use `$.get("url?"+$(this).serialize());` if you have to use GET method instead of POST.

# asp.net-mvc - 无法使用 ASP.net MVC 中的实体框架将文件上传到 SQL Server

> ID：11168321
> 
> 赞同：0
> 
> 时间：2012-06-23T09:20:31.093
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我正在使用 ASP.NET MVC 和实体框架代码优先方法。我想将文件（`.doc`或`.pdf`）上传到 SQL Server。我搜索并浏览了许多论坛，但找不到使用实体框架代码优先方法将文件上传到 SQL Server 的明确解决方案。

我编写了以下代码来上传文件，但在将文件保存到数据库时出现错误。

这是以下代码

控制器是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.IO;
using FileuploadEF.Models;
namespace FileuploadEF.Controllers
{
    public class HomeController : Controller
    {
        FileEntities db = new FileEntities();

        public ActionResult Index()
        {
             return View();
        }

        public ActionResult About()
        {
            return View();
        }

        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult upload()
        {
            foreach (string file in Request.Files)
            {
                var PostedFile = Request.Files[file];
                string filetype = Request.Files[file].ContentType;
                int filelength = Request.Files[file].ContentLength;
                Stream filestream = Request.Files[file].InputStream;
                byte[] filedata = new byte[filelength];
                string filename= Path.GetFileName(Request.Files[file].FileName);
                filestream.Read(filedata, 0, filelength);
                var data = new FileDump
                {
                    FileName = filename,
                    FileType = filetype,
                    FileContent = filedata
                };

                  db.FileDumps.Add(data);

                db.SaveChanges();
            }

            return View();
        }

    }
} 
```

创建数据库的类`filedump`是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace FinaleuploadEF.Models
{
    public class FileDump
    {
        public int Id { get; set; }
        public string FileName { get; set; }
        public string FileType { get; set; }
        public byte[] FileContent { get; set; }
    }
} 
```

实体类是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace FinaleuploadEF.Models
{
    public class FinalEntities : DbContext
    {
        public DbSet<FileDump> FileDumps { get; set; }

    }
} 
```

连接字符串：

```
 <connectionStrings>
      <add name="FinalEntities"
       connectionString="Data Source=|DataDirectory|FinaleuploadEF.sdf"
       providerName="System.Data.SqlServerCe.4.0"/>
    </connectionStrings> 
```

将文件保存到数据库时出现以下错误：

[www.freeimagehosting.net/kmwts](http://freeimagehosting.net/kmwts)

任何人都可以为上述问题提出解决方案吗？或者上述代码中需要进行任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:13:07.397

您应该尝试隔离问题。

尝试首先运行代码而不保存文件的内容。

如果可行，请提取保存数据的代码，并编写一个单元测试来保存您在代码中构建的字节数组。

如果可行，请编写一个单元测试来保存您通过从磁盘读取文件构建的字节数组。

如果可行，请尝试使用您的代码将上传的文件保存到磁盘。

通过执行上述操作，您应该能够确定问题的根本原因。

# sql-server - 使用联接时 DELETE 查询中的错误是什么

> ID：11168330
> 
> 赞同：2
> 
> 时间：2012-06-23T09:21:35.017
> 
> 标签：sql-server, sql-delete

注释 DELETE 语句并尝试使用 SELECT 语句时，代码运行良好。请帮忙

```
DELETE FROM 
--select * from 
Site as s
join 
(select SiteID,Code, Name, Dense_rank() over (partition by Code order by SiteID ) as Rank from Site
) as t 
on s.SiteID = t.SiteID
WHERE t.Rank != 1 
```

收到以下错误消息

```
Msg 156, Level 15, State 1, Line 5
Incorrect syntax near the keyword 'as'.
Msg 156, Level 15, State 1, Line 8
Incorrect syntax near the keyword 'as'. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T09:22:58.627

您不能为`delete`表设置别名，但`delete`可以引用别名。而不是这个：

```
delete from Site as s
... 
```

尝试：

```
delete from s
from Site as s
... 
```

# jquery - 如何在加载页面上重现文本效果

> ID：11168331
> 
> 赞同：1
> 
> 时间：2012-06-23T09:22:22.810
> 
> 标签：jquery, html, css

我正在尝试重现我们的朋友@Dr 的效果。Molle 在此[链接](https://stackoverflow.com/questions/6538546/jquery-animated-text/6538963#)上告诉我们。我有一个这样的div：

```
<div id="start_palmira">
    <span>Palmira Interiores</span>
</div> 
```

我想在窗口加载时重现。我们的朋友向我们介绍了该特定 div 的 onclick 事件，而我正在尝试在页面的**onload**事件上执行此操作。

我用jquery试过这个：

```
/* Start animation */
$("#start_palmira").ready(
    function fx(o)
    {

      var $o=$(o);
      $o.html($o.text().replace(/([\S])/g,'<span>$1</span>'));
      $o.css('position','relative');
      $('span',$o).stop().css({position:'relative',
      opacity:0,
      fontSize:84,
      top:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);},
      left:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);}
   }).animate({opacity:1,fontSize:12,top:0,left:0},1000);
}); 
```

在 - 的里面

```
$(document).ready(function()  { ... things happening .... }); 
```

方法。但如果我这样做，我的浏览器不会加载，最后它要求我停止让我的浏览器运行缓慢的脚本。

我还想在 body 的**onload**事件上触发该事件，但我对如何处理有疑问。

**注意：** 这是我们朋友的 div 的 onclik 事件的链接。我希望它是一个 onload 事件：[onclick 事件！](http://jsfiddle.net/doktormolle/dNXVx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:29:16.233

我想你想要这样的东西：http: [//jsfiddle.net/dNXVx/288/](http://jsfiddle.net/dNXVx/288/)

有负载

如果您想在整个页面上应用此事件，请注意这部分：

```
var $o=$('span'); 
```

这部分可帮助您获取要设置动画的文本。

# javascript - jquery bbq 从 url 中删除哈希 b

> ID：11168342
> 
> 赞同：1
> 
> 时间：2012-06-23T09:24:17.200
> 
> 标签：javascript, jquery, jquery-ui, jquery-bbq

我是 jquery bbq 的新手，到目前为止我已经弄清楚了大部分设置，但我有一个小问题。这是设置。

右侧带有主导航链接的页面每次导航链接单击都会将页面的正文内容更改为其相应的数据（显示和隐藏 div）（使用 bbq）其中一个链接显示带有另一组链接的 div，单击时将在 url 中设置哈希 B

所以第一个链接点击 domain.com/dir/#A=page1

第二个链接点击 domain.com/dir/#A=page1&B=set1

如果我按下后退按钮，它会返回到以前的 A 哈希，但是 B 哈希仍保留在 url 中。

有没有办法在不在特定页面上时删除 B peram？

```
$(window).bind('hashchange', function(e) {
    var state = $.bbq.getState('p');
    var graphState = $.bbq.getState('n');

    var base_title = '{/literal}{$smarty.const.SITE_TITLE}{literal} | Dashboard | ';
    $('.profile-nav a').each(function() {
        if (!state) {
            $('.profile-nav a').each(function() {
                $('#' + this.id).removeClass('live active');
                document.title = base_title + 'Message Center';
            });
            $('#m').addClass('live active');
        } else if (state == this.id) {
            $('#' + this.id).addClass('live active');
            document.title = base_title + $(this).text();
        } else {
            $('#' + this.id).removeClass('live active');
        }
    });

    if (!state) {
        $('.tab-content').fadeOut('fast');
        $('.message-content').fadeIn('slow');
    } else {
        $('.tab-content').fadeOut('fast');
        clicked = $('#' + state).attr('rel').split(' ')[0];
        $('.' + clicked).fadeIn('slow');
    }

    if (state == 'r') {
        if (graphState) {
            $('.nick-breakdown').fadeOut('fast');
            $('#' + graphState).fadeIn('slow');
            document.title = base_title + 'Reports | ' + $('#' + graphState).attr('rel');
        } else {
            $('.item-breakdown').fadeOut('fast');
            $('.nick-breakdown').fadeIn('slow');
            document.title = base_title + 'Reports';
        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T15:52:36.280

我使用 jsbbq.pushState 和 merge_mode = 2 完成了同样的事情，而不仅仅是在锚点上设置 # 。

在此处查看文档：http: [//benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html#jQuery.bbq.pushState](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html#jQuery.bbq.pushState)

> merge_mode(Number) ：如果未指定 merge_mode，则合并行为默认为 0（除非指定了以 # 开头的哈希字符串，在这种情况下，合并行为默认为 2），如下所示：
> 
> *   0：params 参数中的参数将覆盖当前状态的任何参数。
> *   1：当前状态的任何参数都将覆盖 params 参数中的参数。
> *   2：params 参数将完全取代当前状态。

因此，如果您的链接如下所示：

mysite.com#A=page1&B=page2 你可以打电话

$.bbq.pushState({'A' : 'pageXYZ'}, 2);

然后您的文档位置将是：

mysite.com#A=pageXYZ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-31T12:32:31.967

**我有一种更简单的方法，不需要插件：**

将当前哈希参数复制到虚拟 URL AS searchParameters。现在您可以像搜索参数一样处理散列参数，使用搜索参数的所有功能（developer.mozilla.org/en-US/docs/Web/API/URLSearchParams）编辑它们，然后将它们复制回来作为 hasparameters，

例如设置和更新参数的简单函数，您也可以使用 '.delete()' 而不是 '.set' 来删除参数：

```
function setOrUpdateHashParameter( hashParameterName, hashParameterValue ) {
	let theURL				= new URL('https://dummy.com');				// create dummy url
	theURL.search			= window.location.hash.substring(1);		// copy current hash-parameters without the '#' AS search-parameters
	theURL.searchParams.set( hashParameterName, hashParameterValue );	// set or update value with the searchParams-API
	window.location.hash	= theURL.searchParams;						// Write back as hashparameters
}
```

如果有人知道如何正确格式化这些帖子，请随时编辑，谢谢！

# magento - Magento - 添加到购物车后保持查询字符串完整

> ID：11168343
> 
> 赞同：1
> 
> 时间：2012-06-23T09:24:27.007
> 
> 标签：magento

我将商店配置为在添加到购物车后留在产品页面上。当页面重新加载时，我需要能够保持查询字符串的完整性，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T15:27:06.983

我不认为这是方法。我会编写一个事件观察器来将东西添加到购物车（add_to_cart_after）并将您需要的信息写入会话。

# c# - C# 中的 Convert.ToInt32

> ID：11168346
> 
> 赞同：3
> 
> 时间：2012-06-23T09:24:36.427
> 
> 标签：c#

我的问题是，当我想转换`(result[i].JobOrder)`为 int 时。我有一个字符串 120100 in `(result[i].JobOrder)`。作为回报，我得到的不是整数，而是像“0x0001d524”这样的东西。我不明白为什么。

```
for (int i = 0; i < result.Count; i++)
{
    if (Convert.ToInt32(result[i].JobOrder) > maxJobOrder)
    {
        maxJobOrder = Convert.ToInt32(result[i].JobOrder);
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T09:25:44.317

您的代码有效，但您已将调试器设置为以十六进制显示整数。值 0x0001d524 是整数 120100 的十六进制表示。

这不是程序中的错误，而是您的 IDE 的配置选项。如果您使用 Visual Studio，您可以通过按“调试”工具栏中的“十六进制”按钮来更改此设置。

![六角按钮](../Images/06ab61da6987d535f7b81b44a1e6b95c.png)

* * *

[顺便说一句，如果您使用的是 C# 3 或更高版本，您可以通过使用该[`Max`](http://msdn.microsoft.com/en-us/library/bb535031)方法来简化代码来查找最大值而不是循环：]

```
maxJobOrder = result.Max(x => int.Parse(x.JobOrder)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:27:07.260

尝试使用 Int32.TryParse 参见 [http://msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T09:27:12.743

尝试替换`Convert.ToInt32`为`int.parse()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T09:10:22.013

使用 int.parse 的建议略有缺陷。

**每当失败时， int.parse**都会抛出以下异常之一。它只接受字符串作为转换的输入。

```
ArgumentNullException
FormatException 
OverflowException 
```

**Convert.ToInt32**将在失败时抛出以下异常之一。此外，它允许传递空值，但这意味着它返回 0 作为输出值，并且它还处理要转换为整数的多种数据类型。

```
FormatException 
OverflowException 
```

**int.TryParse**不会抛出任何异常，但是，它会返回 0 作为输出值，因为该方法返回 false，并且它只接受字符串作为转换的输入。

您应该为工作选择正确的工具，以防止解决方案的完整性出现任何问题。

# iphone - 文本字段的背景透明度

> ID：11168347
> 
> 赞同：1
> 
> 时间：2012-06-23T09:24:39.393
> 
> 标签：iphone, xcode, uitextfield

我有一个包含文本字段的应用程序。

有没有办法在代码中更改此文本字段的背景透明度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:25:02.947

是的，你可以做到。

您可以通过设置透明度来设置透明度。您可以使用数字色度计（它是 mac 中的内置应用程序）来绘制颜色代码。

如果你设置 alpha 1 那么就不会有透明度。根据您的需要设置透明度（设置 alpha 小于 1）。

尝试这个：

```
textfield.backgroundColor=[[UIColor colorWithRed:208.0/255.0 green:15.0/255.0 blue:202.0/255.0 alpha:0.6] CGColor]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-25T05:01:26.000

您可以在 Xamarin 中使用下面提到的代码进行设置

```
txtNumber.BackgroundColor = UIColor.White;
txtNumber.Alpha = 0.5f; 
```

参考1：[透明UITextView](https://stackoverflow.com/questions/3428498/transparent-uitextview) 参考2：[如何创建透明的UITextField？](https://stackoverflow.com/questions/4603084/how-do-i-create-a-transparent-uitextfield)

相似之处：

txtNumber.BackgroundColor = UIColor.Clear;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T09:30:15.910

只需为白色背景输入波纹管代码

```
[yourTextField setBackgroundColor:[UIColor whiteColor]]; 
```

或者如果想清除颜色然后下面的代码

```
 [yourTextField setBackgroundColor:[UIColor clearColor]]; 
```

很简单

:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T09:34:25.950

使用[自定义 UITextField](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)

```
UITextField *yourTextField= [[UITextField alloc] initWithFrame:frame];
yourTextField.borderStyle = UITextBorderStyleNone;
[yourTextField setBackgroundColor:[UIColor clearColor]]; 
```

# c# - 每个包含 ObservableCollection 的对象的 ObservableCollection 不更新，即使同一个对象在更多的 OC 中

> ID：11168348
> 
> 赞同：0
> 
> 时间：2012-06-23T09:24:50.703
> 
> 标签：c#, wpf, observablecollection

我希望标题是可以理解的，但无论如何我会尽力描述这个问题。我有一个 ObservableCollection GroupList，其中包含 Group 类型的对象。类 Group 非常简单：

```
public class Group
{
    public Group()
    {
        Members = new ObservableCollection<Member>();
    }

    public Group(string name)
    {
        Members = new ObservableCollection<Member>();
        GroupName = name;
    }
    public ObservableCollection<Member> Members { get; set; }
    public string GroupName { get; set; }
} 
```

GroupList 是我在视图中拥有的 ComboBox 的 ItemsSource，它决定了要在 ListBox 中显示哪些 ObservableCollection 成员。然后将 ListBox 中 SelectedItem 的属性绑定到一些 TextBox 以显示每个成员的名称、年龄等。

我的问题是我有一个名称=“所有成员”的组和其他成员也存在的组。组 A 包含成员 A+B，组 B 包含成员 B+C，但组所有成员包含 A+B+C。但是，如果我更改 Group A 中说 Member A 的属性，它不会反映在 Group All 成员中。我花了几天时间试图找出问题所在，因为如果我在一个新项目中测试它（注销内存），它就像一个魅力：

```
ObservableCollection<Member> MembersA = new ObservableCollection<Member>;
ObservableCollection<Member> MembersA = new ObservableCollection<Member>;
Member newMember = new Member("TestMember",1986);
MembersA.Add(newMember);
MembersB.Add(newMember);
MembersA.First().Name="TestMemberChanged"; 
```

这会更新两个 OC 中的成员，但不会更新我的项目中的成员，我不知道出了什么问题。我是否还需要为成员和组实现像 INotifyPropertyChanged 这样的接口？（它已经在 VM 中为 GroupList 实现了）。还是我需要手动更新 OnPropertyChanged 或 CollectionChanged 事件中的所有 OC？

```
private ObservableCollection<Group> _groupList;
    public ObservableCollection<Group> GroupList
    {
        get
        {
            return _groupList;
        }
        set
        {
            _groupList = value;
            Notify("GroupList");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void Notify(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

我意识到我的架构可能效率低下，因此非常欢迎提出任何改进它的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:29:39.303

是的，您已经说过答案：您还需要为 Member 类实现 INotifyPropertyChanged，并在诸如“Name”之类的 Member 属性更改其值时引发该事件。这是因为 ObservableCollection 仅在从列表中添加/删除/重新排序项目时通知用户界面，而不是在列表中一项的属性值发生更改时通知用户界面。

# jquery - jQuery 移动背景

> ID：11168367
> 
> 赞同：0
> 
> 时间：2012-06-23T09:27:27.107
> 
> 标签：jquery, html, css, jquery-mobile

我有一个在 jQuery Mobile 中构建的页面，我正在尝试使用 css 插入背景，但是那里已经有了这个灰色背景。

我该如何摆脱它？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, target-densityDpi=device-dpi" />
<title>GeoBird</title>
<link href="jquery-mobile/jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css" />
<link href="jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css" />
<script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>
 <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
</head>
<body>
<div data-role="page" id="home">
  <div data-role="header">
    <h1>SketchUp</h1>
  </div>

<style>
#buttons {
position: absolute;
top: 200px;
left: 175px;}

body {
    background: url(background.jpg);
    background-repeat:repeat-y;
    background-position:center center;
    background-attachment:scroll;
    background-size:100% 100%;
}
</style>

<script language="javascript" type="text/javascript">
$(document).ready(function() {
    $("#quitbutton").click(function() {
        alert("clicked");
        navigator.app.exitApp();
    });
});
  </script>

<div id="buttons"> 
 <a  href="game.html" data-role="button" data-iconpos="bottom">Start</a>
 <a  href="" data-role="button" data-iconpos="bottom">Options</a>
  <a  href="" data-role="button" data-iconpos="bottom">Credits</a>
   <a  id="quitbutton" data-role="button" data-iconpos="bottom">Quit</a>
   </div>
</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:37:53.160

在 JSfiddle 中，由于路径问题，它没有拍摄背景图像。请检查 css 中的图像路径是否正确。

我试图从谷歌图片添加背景图片，它工作正常。

```
<style>  
body {
      background: url('http://colorvisiontesting.com/plate%20with%205.jpg');
     background-repeat:repeat-y;
    background-position:center center;
    background-attachment:scroll;
    background-size:100% 100%;
    }
</style> 
```

它工作正常。因此，请检查您的图像路径是否正确。

谢谢

# javascript - 如何计算 DIV 或 P 中的行框数

> ID：11168368
> 
> 赞同：2
> 
> 时间：2012-06-23T09:27:42.637
> 
> 标签：javascript, dom, caret

```
<div><span>aaaaaa</span> ... (many other span here) ... <span>zzzzzz</span></div> 
```

在这种情况下，框跨度放置在 div 内的几个行框上。（跨度元素可以使用不同的字体大小。）

1）我们如何知道行框的数量？

2）我们能知道元素跨度放置在哪个行框上吗？

3）我们可以知道插入符号放置在哪个行框上（内容可编辑）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:03:48.627

我假设您示例中的 DOM 是您的 DOM 实际复杂性的一个有效示例，并且“line-boxe”只是一行文本。

1-2）对于每个`<span>`内部`<div>`，您可以计算它们跨越的行数，如下所示：

```
var spans = div.getElementsByTagName("span"), spandata = [];
for (var i = 0; i < spans.length; i++) {
    var rects = spans[i].getClientRects();
    if (i > 0)
        if (rects[0].bottom > obj.rects[obj.rects - 1].bottom)
            var inirow = obj.lastRow + 1;
        else var inirow = obj.lastRow;
    var obj = {
        element: spans[i],
        rects: rects,
        iniRow: inirow,
        lastRow: inirow + rects.length - 1
    };
    spandata.push(obj);
} 
```

现在`spandata`是您想要的有关`<span>`元素的所有数据的列表。我还假设它们中的每一个都可能跨越不止一条线。

请记住，`getClientRects`在 IE<8 中存在一些问题。

3）在现代浏览器中，该`getSelection`方法可以帮助您：

```
var sel = window.getSelection();
if (sel.type === "Caret")
    var span = sel.anchorNode.parentNode; 
```

关于线路位置，我必须说这不是一件容易的事。您无法轻松获取插入符号的页面位置。您可以做的最简单的事情是在插入符号的位置放置一个虚拟内联元素：

```
var text = sel.anchorNode.nodeValue;
sel.anchorNode.nodeValue = text.substring(0, sel.anchorOffset);
var dummy = document.createElement("i");
span.appendChild(dummy);
var pos = dummy.getBoundingClientRect();
sel.anchorNode.nodeValue = text;
span.removeChild(dummy); 
```

`pos`包含插入符号位置的信息。现在您必须将它们与有关跨度的 rect 信息进行比较：

```
var rects = span.getClientRects();
for (var i = 0; i < rects.length; i++)
    if (rects[i]].bottom === pos.bottom) break;

if (i < rects.length) {
   for (var i = 0; i < spandata.length; i++) {
       if (spandata[i].element === span) {
           var line = spandata[i].iniRow + i;
           break;
       }
   }
} 
```

最后，如果`line != null`，它包含插入符号的行。

人，这很复杂……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:00:42.250

假设您`div`在`el`变量中：

```
el.children.length; // Number of direct children

// You have one of the children in the "child" variable, to know its index:
[].indexOf.call( el.children, child ); // Index of child in el.children 
```

我没有提到那里的跨浏览器问题，但`Array.prototype.indexOf`只能从 IE9 开始使用（因此它适用于所有现代浏览器）。

# xml - Atom 和 RSS，哪个更好

> ID：11168370
> 
> 赞同：0
> 
> 时间：2012-06-23T09:28:39.160
> 
> 标签：xml, rss

我打算制作一个 iPhone 应用程序，从网站上提取信息并将其列在 iPhone 上。数据以 Atom 或 RSS 形式接收。我很想知道关于这些标准哪一个更好：

```
Stability
Flexibility
Longevity
Expandability 
```

最重要的是，我更愿意将我的工作投入到一种在未来 5 年内仍将使用的格式上。那么哪一个似乎更好呢？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:04:55.417

这两种格式仍然很流行，并且将在 5 年内出现，您会发现 100 种用于生成和使用这两种格式的工具。但是，如果您不受传统选择的约束，我会选择 Atom，因为它更灵活。Atom 在 RFC 中得到了更好的规范，并且还有一个为更新资源而设计的官方姊妹协议 (AtomPub)。

原子规范：[http ://www.ietf.org/rfc/rfc4287.txt](http://www.ietf.org/rfc/rfc4287.txt)

AtomPub 规范：[http ://www.ietf.org/rfc/rfc5023.txt](http://www.ietf.org/rfc/rfc5023.txt)

所以这两种格式在：稳定性和寿命方面大致相同，但 Atom（与 AtomPub）擅长：灵活性和可扩展性

# security - 微软更新中的火焰病毒和MD5校验和的作用

> ID：11168373
> 
> 赞同：1
> 
> 时间：2012-06-23T09:29:03.593
> 
> 标签：security, encryption, cryptography

最近听说Flame使用[MD5校验和碰撞](http://en.wikipedia.org/wiki/MD5#Collision_vulnerabilities)来[篡改微软更新](http://www.forbes.com/sites/richardstiennon/2012/06/14/flames-md5-collision-is-the-most-worrisome-security-discovery-of-2012/)。

我的问题是 MD5 校验和在哪里发挥作用？

从微软网站上的[这个来源：](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CGYQFjAA&url=http://download.microsoft.com/download/a/9/4/a94af289-a798-4143-a3f8-77004f7c2fd3/Windows%2520Update%2520Explained.docx&ei=c4nlT4G-J4OurAfTu8CKCQ&usg=AFQjCNHeRlY5qoISxRJbfBxSq-_lEtbJaw&sig2=tTExlrAiFGkZRweUT9gDPw)

1.  Windows 更新使用安全套接字层 (SSL) 协议来发送和接收信息。

2.  每个更新都使用安全散列算法 (SHA-1) 单独签名。

那么MD5在哪里使用，是用来验证更新站点的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:09:44.570

在 FLAME 的上下文中，MD5 哈希冲突被利用来伪造以 Micosoft 为根的 PKI 中的中间证书。客户端依靠此类 PKI 来验证更新文件是否真的来自 Microsoft。

与实际虚假更新文件关联的证书可能已使用 SHA-1 或任何其他强哈希算法进行签名。问题是现有的真正中间 PKI CA 实体的证书使用 MD5 签名。攻击者利用这种算法的弱点来伪造第二个 PKI CA 证书，他们可以用它来进一步签署他们喜欢的任何东西。

攻击中没有直接使用 SSL（Windows 更新机制也允许来自非 SSL 站点的包）。

# c++ - C++ 无法通过 ODBC 连接到 mysql/mssql

> ID：11168377
> 
> 赞同：0
> 
> 时间：2012-06-23T09:29:28.723
> 
> 标签：c++, mysql, sql-server, visual-studio-2010, odbc

```
#include <iostream>
#include <windows.h>
#include <sqlext.h>
#include <sqltypes.h>
#include <sql.h>

int main()
{
    SQLHENV     hEnv;
    SQLHDBC     hDbc;
    //SQLCHAR*  pwszConnStr = (SQLCHAR*)"Driver={MySQL ODBC 5.1 Driver};Server=127.0.0.1;Port=3306;Database=test;Uid=root;Pwd=xxxx;";
    SQLCHAR*    pwszConnStr = (SQLCHAR*)"Driver={SQL Server Native Client 11.0};Server=127.0.0.1,1433;Database=master;Uid=sa;Pwd=xxxx;";

    SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &hEnv);    
    SQLSetEnvAttr(hEnv, SQL_ATTR_ODBC_VERSION, (SQLPOINTER)SQL_OV_ODBC3, 0);    
    SQLAllocHandle(SQL_HANDLE_DBC, hEnv, &hDbc);    
    RETCODE rc = SQLDriverConnect(hDbc, NULL, pwszConnStr, SQL_NTS, NULL, 0, NULL, SQL_DRIVER_PROMPT);

    if (rc == SQL_SUCCESS)
    {
        system("pause");
    }
} 
```

我遵循从谷歌搜索的任何代码。但是 RETCODE 一直返回 -1 有什么办法解决这个问题吗？

PS：

*   我已经安装了所有必要的驱动程序（32/64）
*   服务器在线
*   防火墙已关闭
*   没有freetds，sqlapi++

# jquery - jQuery.ajax() - IE9 中返回的未定义数据

> ID：11168378
> 
> 赞同：8
> 
> 时间：2012-06-23T09:29:29.187
> 
> 标签：jquery, ajax, internet-explorer-9

我有一个非常简单的代码：

```
$.ajax({
  cache: false,
  dataType: 'html',
  complete: function(jqXHR){
    console.log(jqXHR.responseText);
  },
  success: function(data){
    console.log(data);
  },
  url: 'http://follows.pl/pages/ajaxtest'
}); 
```

它在 ff、chrome 和 IE8 中返回一些文本，但在 IE9 中它显示两次“未定义”。

我查看了 IE9 中的开发人员工具，它显示正常响应，因此请求工作正常，响应正常，但变量未定义

响应标头：

```
Response    HTTP/1.1 200 OK
Cache-Control   no-cache
Content-Type    text/html; charset: UTF-8
Pragma  no-cache 
```

回复

```
string(4) "test" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T13:07:08.537

我怀疑这是你的问题：

```
Content-Type    text/html; charset: UTF-8 
```

该值的格式不正确（字符集后的“：”是错误的）并且 IE9 不喜欢它，但会默默地失败，而不是说一些有用的东西。尝试这个：

```
Content-Type:    text/html;charset=utf-8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T13:09:59.343

我尝试了一切来解决在 IE 浏览器上发布 ajax 的问题（例如，添加到 jquery ajax 对象没有缓存、dataType、configType 等），但最终问题不在 ajax/javascript 中，而是在 PHP 文件中：仅**对于 IE 浏览器，PHP 文件必须以以下标头开头**：

```
header("Content-type: text/html; charset=utf-8"); 
```

所以，你必须**明确指出内容类型**您通过 ajax 调用获得的 php 页面的内容类型。

*例如，假设一个名为one.html*的 html 页面放置您的 javascript 和一个名为的 php 页面*的 html 页面和一个名为two.php*

在 one.html 中将 javascript 设置为

```
var url = 'two.php';
$.ajax({
url: url,
type: "POST",
success: function(response){
alert(response)
}
}); 
```

在两个.php页面中设置如下：

```
<?php
header("Content-type: text/html; charset=utf-8");
echo ('stuff to do');
?> 
```

这样对我来说，它就像一个魅力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:31:31.493

尝试这个 ：

```
$.ajax({
  cache: false,
  dataType: 'html',
  complete: function(data){
    console.log(data);
  },
  success: function(data){
    console.log(data);
  },
  url: 'http://follows.pl/pages/ajaxtest'
}); 
```

# 注意

在成功函数中

```
 success: function (data, textStatus, jqXHR) 
```

对象是`third`论据。

您实际上通过访问那里不存在的属性来响应数据。

也在完整的功能中

```
 complete: function (jqXHR, complete_textStatus) 
```

这里的对象是`first`地方！

你必须记住地点。

# c - 将文件中的单词读入简单链表

> ID：11168381
> 
> 赞同：2
> 
> 时间：2012-06-23T09:30:16.157
> 
> 标签：c, pointers, file-io, linked-list

我需要编写一个程序来读取文件，然后将单词保存到链表中以供进一步使用。我决定使用 fgetc 逐个字符地读取文本，然后在每次检测到换行符 ( `'\n'`) 或空格 ( `' '`) 时将所有内容保存到列表中，表示一个单词。对不起，我是文件指针的新手，这是我到目前为止所得到的：

```
struct list { //global
char string[30];
struct list *next;
};

int main(void) {

    FILE *filePtr;
    char file[] = "text.txt";
    char tempStr[30];
    list *curr, *header;
    char c;
    int i = 0;
    curr = NULL;
    header = NULL;

    if((filePtr = fopen(file, "r")) == NULL) {
        printf("\nError opening file!");
        getchar();
        exit(101);
    }
    printf("\nFile is opened for reading.\n");

    while(!EOF) {
        while((c = fgetc(filePtr) != ' ') && (c = fgetc(filePtr) != '\n')) {
            curr = (list*)malloc(sizeof(list));
            //c = fgetc(filePtr);
            tempStr[i] = fgetc(filePtr);
            i++;
            }

        tempStr[i] = '\0';

        strcpy(curr->string, tempStr);
        curr->next = header;
        header = curr;

        i = 0;
    }

    while(curr!=NULL) {
        printf("%s - ", curr->string); //This will not print.
        curr = curr->next;
    }

    if(fclose(filePtr) ==  EOF) {
        printf("\nError closing file!");
        getchar();
        exit(102);
    }
    printf("\nFile is closed.\n");

    getchar();
    getchar();

} 
```

如果是文本文件：

```
have a nice day 
```

期望的输出：

```
have - a - nice - day 
```

但是，除了打开和关闭的文件之外，我无法打印出任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:03:34.293

宏`EOF`的值为`-1`，是定义在 中的系统宏`stdio.h`。文件读取 API( `fgetc`, `fread`, `fscanf`) 将在到达文件末尾时返回 -1。因此，在您的程序中，`while(!EOF)`这将始终为假，因为始终为 0。`NOT`将用 2 的补码表示，因此该变量的所有位都将为 1。（如果大小为 2，将存储为变量）。`-1``-1``int``-1``0xFFFF``int`

使用下面的示例代码。

```
while(EOF != (c = fgetc(filePtr))) 
{

    if ((c == ' ') || (c == '\n'))
    {
        if (i == 0)
        {
            continue;
        }

        tempStr[i] = '\0';
        i = 0;

        //here do your linklist node creation and insertion operation

           continue;
    }

    tempStr[i] = c;
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:39:00.710

*   这总是错误的：

    ```
    while(!EOF) 
    ```

*   查看您的内存分配代码。

    ```
    curr = (list*)malloc(sizeof(list)) 
    ```

*   文件的末尾可能没有换行符。

    ```
    while((c = fgetc(filePtr) != ' ') && (c = fgetc(filePtr) != '\n')) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:39:39.243

```
while(!EOF) { 
```

这是一个始终为假的恒定条件，因此您永远不会阅读任何内容。

你的代码还有其他问题，比如做

```
curr = (list*)malloc(sizeof(list)); 
```

在一个循环中，但在循环外使用 curr 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T09:46:55.267

你应该用你用来读取文件的任何函数替换 while 条件 - 你确定 fgets 没有比这更有效吗？

IE 将字符串读取到比您预期的要大得多的缓冲区中，然后将其复制到适当大小的缓冲区中并将其附加到节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T14:10:38.867

剧透：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct list {
    struct list *next;
    char string[30];
    };

int main(void) {

    FILE *fp;
    char file[] = "llist4.c";
     /* in C you CANNOT omit the "struct keyword" from a declaration or definition. */
    struct list *head=NULL, **pp= &head;
    int ch; /* getc() returns an int */
    size_t len ;
    char buff[30];

    fp = fopen(file, "r");
    if (!fp) {
        fprintf(stderr, "\nError opening file!");
        exit(EXIT_FAILURE);
    }
    printf("\nFile has been opened for reading.\n");

    for (len=0; len < sizeof buff;   ) {
        ch = fgetc(fp);
        if (ch == EOF && !len) break;
        if (ch == ' ' || ch ==  '\n' || ch == EOF) {
            if (!len) continue;
            buff[len] = '\0';
            *pp = malloc(sizeof **pp);
            if (!*pp) break;
            strcpy((*pp)->string, buff);
            (*pp)->next = NULL;
            pp = &(*pp)->next ;
            len=0; continue;
            }

        buff[len++] = ch;
    }

    if (len) {
        fprintf(stderr, "\nWord was too large, or out of memory\n");
        }

    for( ;head; head= head->next) {
        printf("%s - ", head->string);
    }

    if (fclose(fp) ==  EOF) {
        fprintf(stderr, "\nError closing file!\n");
        exit(EXIT_FAILURE);
    }
    printf("\nFile has been closed.\n");
exit(EXIT_SUCCESS);
} 
```

# javascript - 我如何在 jquery 中获得约会时间（从时间到时间）

> ID：11168382
> 
> 赞同：0
> 
> 时间：2012-06-23T09:30:34.507
> 
> 标签：javascript, jquery

我在拖动时隙单元时选择时隙。选择时间段后，我在文本框中输入患者姓名，然后单击选择按钮，然后患者姓名进入选定的时间段。用户可以为多个患者姓名选择多个时间段，然后单击分配按钮我必须将患者姓名与时间段（从时间到时间）插入数据库。

我在获得分配的时间段时遇到问题，即 jquery 中的从时间和到时间。

```
$("#btnAllot").click(function () {
    //how i get alloted time here.
    $('tr').each(function () {
        $(this).find('td').each(function () {
            if ($(this).hasClass('yell')) {
                alert($(this).closest('tr').find('td:eq(0)').text());

            };
        });
    });
} 
```

[请参阅 jsbin 上拖动时隙单元格](http://jsbin.com/udimuq/edit#javascript,html,live)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:00:06.063

好的，这是一种方法：

您遍历第三个单元格具有`rowspan`属性的每一行。这表示新约会的开始。您可以通过检查兄弟姐妹（有点）来获取开始时间，并通过获取`rowspan - 1`元素行来获取结束时间。

可能有更好的方法，但这可能会给你一个开始。

例如：

```
var find_closest_hour = function($row) {
    var $cell = $row.children('td:first-child'),
        hour = "";
    // probably add something here
    while($cell.length && !(hour = $.trim($cell.text()))) {
        $cell = $cell.parent().prev().children('td:first-child');
    }
    return hour;
};

var $all_tds = $('#tableAppointment tr td:nth-child(3)'),
    $tds = $all_tds.filter('[rowspan]'); 

// will contain a list of objects [{patient: name, start: time, end: time},...]
var appointments = $tds.map(function() {
    var $this = $(this),
        $row = $this.parent(),
        $cells =  $row.children('td'),
        patient = $.trim($this.text()),
        start = find_closest_hour($row).split(':', 1) + ":" + $.trim($cells.eq(1).text()),
        $end_row, end;

    if(this.rowspan == 1) {
        end = start;
    }
    else {
        $end_row = $all_tds.eq($all_tds.index(this) + this.rowSpan - 1).parent();
        end = find_closest_hour($end_row).split(':', 1) + ":" + $.trim($end_row.children('td').eq(1).text());
    }

    return {patient: patient, start: start, end: end};
}).get(); 
```

[**演示**](http://jsbin.com/udimuq/4/edit)

我会让你弄清楚如何正确地格式化时间；）

**注意：**这在很大程度上取决于您当前的表结构，如果您更改它可能会中断。为了使事情更加灵活，您可以向包含重要信息的单元格添加类，例如`hour`向每个包含一天中的小时的第一个`appointment_start`单元格和约会的单元格添加类。然后你可以搜索/过滤这些。

# android - 应用程序配置文件

> ID：11168384
> 
> 赞同：0
> 
> 时间：2012-06-23T09:30:38.790
> 
> 标签：android

我需要一个可以以 XML 或任何其他体面的格式存储基本应用程序配置（URI、DB 名称、外部存储文件夹名称等）的地方。

是 /assets 文件夹吗？如果是这样 - 给出一个将它与 XML 文件结合使用的基本示例。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:34:09.583

是的，有：资源文件夹：res/values/strings。

在那里你可以放置你想要的所有字符串。要使用特定于区域设置的字符串，请创建多个以区域设置后缀结尾的值文件夹。值文件夹（默认）：

```
<string name="app_name">My android app name</string>
<string name="email">myemail@gmail.com</string>
<string name="contact_me">Contact me</string> 
```

values-PT 文件夹（葡萄牙语字符串）：

```
<string name="app_name">My android app name in PT</string>
<string name="email">myemail@gmail.com</string>
<string name="contact_me">pt string for contact me</string> 
```

然后将它们用作：`yourPackage.R.string.email`在您的课程中。

# drupal - Drupal 5 CCK 字段未显示在节点中

> ID：11168385
> 
> 赞同：0
> 
> 时间：2012-06-23T09:30:41.380
> 
> 标签：drupal, cck

我有一个 Drupal 5.1 站点。我安装了 cck 模块版本 cck 5.x-1.8。然后转到模块并激活所有复选框：内容等。然后创建一个新的内容类型，添加一个新字段，用于年龄的文本整数。然后继续创建新内容，命名为say news。编辑时显示新的cck字段，但是当我转到创建的节点时，只显示标题和正文，新字段：年龄没有出现。年龄应该与标题和正文一起显示，但事实并非如此。在数据库中，我看到表 content_type_news_content 具有我输入的值。

显示编辑 ![销售](../Images/7c1eb45751b9a295beac6094e84812c2.png)

不显示视图 ![鼻涕](../Images/7278f4a6c4a4f5b5bd72672c161caaf4.png)

# javascript - 单个正则表达式匹配范围（1999-2010）还是单个值（2010）？

> ID：11168389
> 
> 赞同：0
> 
> 时间：2012-06-23T09:31:16.147
> 
> 标签：javascript, regex

一般来说，我认为我没有遇到过这个问题的通用解决方案。如何匹配可以是范围或单个值的字符串？

假设我想匹配 [复杂] 日期：

*   1999 - 2010
*   公元前 323 年 - 公元 100 年
*   公元前323年
*   1995-99
*   公元前 323 - 322 年

可以解析这两种情况的通用正则表达式“模板”是什么：

1.  开始/结束日期（如果存在）
2.  否则，只有一个日期

要匹配“1999 - 2010”，您可以这样做

```
/(\d+\s*)-(\s*\d+)/ // where $1 and $2 are start and end 
```

要匹配更复杂的“323 BCE - 100 CE”，您可以这样做

```
/(\w+\s*\w+)\s*-\s*(\w+\s*\w+)/ 
```

为了匹配更简单的“323 BC”，你可以做

```
/\w+\s*\w+/ 
```

但是如何编写一个表达式首先检查*范围*（公元前 323 年 - 公元 100 年），如果不存在，检查单个值（公元前 323 年），它也可以处理上面列表中的其他示例?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:43:43.997

通过使匹配的后半部分成为可选。

```
/(\w+\s*\w+)(?:\s*-\s*(\w+\s*\w+))?/ 
```

**示例**(JavaScript)

```
"1900 - 2000".match(/(\w+\s*\w+)(?:\s*-\s*(\w+\s*\w+))?/);
//["1900 - 2000", "1900", "2000"]

"1900 BC".match(/(\w+\s*\w+)(?:\s*-\s*(\w+\s*\w+))?/);
//["1900 BC", "1900 BC", undefined] 
```

请注意，外部的可选部分是不匹配的，因此结果数组仅包含您感兴趣的子匹配项。

在效率方面加强模式也是一个想法，例如寻找数字而不是任何字母数字，并且只允许单个空格（如果这是可以接受的）而不是零或更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:39:12.120

您可能正在寻找这样的东西：

```
var pattern = /(\d+)(\s*(\w+))?(\s*-\s*(\d+)(\s*(\w+))?)?/;
var strings = [
    '1999 - 2010',
    '323 BCE - 100 CE',
    '323 BC',
    '1995-99',
    '323 - 322 BC'
];

for (var i=0, s; s = strings[i]; i++) {
    var m  = s.match(pattern);
    console.log(
        m[1], // beginning year
        m[3], // beginning b/c/e
        m[5], // end year
        m[7]  // end b/c/e
    );
} 
```

哪个输出

```
1999  undefined  2010       undefined
323   BCE        100        CE
323   BC         undefined  undefined
1995  undefined  99         undefined
323   undefined  322        BC 
```

* * *

这里的诀窍是理解这`(group)?`使得`(group)`可选。与此类似，`(foo)+`可`(foo){3}`用于使组匹配至少一次或恰好三次。

`(foo)`默认情况下，组是捕获组。这意味着它们的结果将包含在 String#match() 返回的数组中。您可以像这样将组标记为非捕获：`(?:wont-be-captured)`. 有了这个，我们可以进一步修改上述模式：

```
var pattern = /(\d+)(?:\s*(\w+))?(?:\s*-\s*(\d+)(?:\s*(\w+))?)?/;
for (var i=0, s; s = strings[i]; i++) {
    var m  = s.match(pattern);
    console.log(m[1], m[2], m[3], m[4]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:48:34.477

只是加入另一种可能按照您想要的方式工作的模式；

`((\d+)( [A-Za-z]+|))((-| - )\d+( [A-Za-z]+|)|)`

与 Utkanos 的模式一样，这可能需要一些收紧才能与其他任何东西*不匹配。*

# node.js - 使用 node.js 代理二进制文件而不重定向流量？

> ID：11168393
> 
> 赞同：1
> 
> 时间：2012-06-23T09:31:48.233
> 
> 标签：node.js, proxy, xmlhttprequest, reverse-proxy

是否可以使用 node.js 代理二进制文件（在我的情况下为音频/mpeg）并仅修改一些标头，但不通过代理服务器重定向文件的流量？

因为我基本上只想将 CORS 标头添加到远程音频文件，以便能够通过 XHttpRequest 打开它，所以这个代理似乎是一个很好的解决方案：[https ://github.com/gr2m/CORS-Proxy](https://github.com/gr2m/CORS-Proxy)

但是是否可以同时**添加**标头并“重定向”到远程服务器上的二进制文件，以便实际文件不会通过代理传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:18:56.690

> 是否可以使用 node.js 代理二进制文件（在我的情况下为音频/mpeg）并仅修改一些标头，但不通过代理服务器重定向文件的流量？

不，这是我听过的最异端的事情。我会称之为胡说八道。你不能用 node.js 或任何其他服务器端技术做这种事情。

# google-api - 为什么使用 Google Books API 返回的“pageCount”不正确？

> ID：11168395
> 
> 赞同：5
> 
> 时间：2012-06-23T09:31:57.153
> 
> 标签：google-api, google-data-api, google-books

当我调用“books.volumes.get”API 时，我得到的“pageCount”与为完全相同的书调用“books.volumes.list”API 不同。

以“加密解密”书名为例，使用 Google API Explorer 我将获得“pageCount”的以下值：

*   [book.volumes.get](https://developers.google.com/apis-explorer/#s/books/v1/books.volumes.get?volumeId=wNFQAAAAMAAJ&_h=7&)：“pageCount”=392

*   [book.volumes.list](https://developers.google.com/apis-explorer/#p/books/v1/books.volumes.list?q=isbn%253A%209780201616477&_h=10&)：“pageCount”= 352

请注意，两个查询结果中的卷 ID 完全相同。("id"=wNFQAAAAMAAJ)

对这种奇怪的行为有什么建议吗？任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:25:34.343

比较响应 - 它们是不同的。

第一个出版商是“Addison-Wesley”，第二个是“Addison-Wesley Professional”。

这是一团糟。根据书的[页面](http://books.google.com.ua/books/about/Cryptography_decrypted.html?hl=&id=wNFQAAAAMAAJ&redir_esc=y)在第一个请求是正确的出版商，但页数是错误的..

在我看来，最好发送两封描述这种情况的信。一位是 API 的所有者，其次是 Addison-Wesley（请求关于 Professional 的解释）。不确定您是否从第二个收到答案..无论如何..

# python - WTForms 在下拉列表中显示外键字段的名称

> ID：11168398
> 
> 赞同：2
> 
> 时间：2012-06-23T09:32:13.463
> 
> 标签：python, google-app-engine, jinja2, webapp2, wtforms

我使用 appengine webapp2 作为 wsgihandler，jinja2 作为模板引擎，wtforms 作为表单模块，以支持应用引擎模型。

以下是我的简单模型：

```
class TaskCategory(db.Model):
    title = db.StringProperty()
    description = db.TextProperty()

class TaskList(db.Model):
    title = db.StringProperty()
    description = db.TextProperty()
    category = db.ReferenceProperty(TaskCategory)
    start_date = db.DateProperty()
    target_finish_date = db.DateProperty() 
```

在我的处理程序中，我编写如下内容：

```
from wtforms.ext.appengine.db import model_form

model_dict = {'category': TaskCategory,
          'task': TaskList}

class CreateForm(webapp2.RequestHandler):
    def get(self, slug):
        form = model_form(model_dict[slug]) # slug can either be category or task.
        self.render_template('index.html', {'form': form()}) 
```

以下是我的模板：

```
<form method="POST" action""> 
  <table>
  {% for field in form %}   

    <tr>{{ field.label }}</tr>
    <tr>{{ field()|safe }}</tr>

  <tr>
    {% if field.errors %}
    <td>
      <ul class=errors>
        {% for error in field.errors %}
        <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </td>
    {% endif %}
    {% endfor %}
    </table>
    <input type="submit" class="btn"  value="Submit Form"/>
</form> 
```

一切都在模板中完美呈现，除了外键的下拉列表，其中列出的值类似于：

```
 <tr><label for="category">Category</label></tr>
     <tr><select id="category" name="category"><option selected value="__None"></option><option value="ahhkZXZ-bmV3LXByb2plY3QtdGVtcGxhdGVyEgsSDFRhc2tDYXRlZ29yeRgCDA">&lt;models.TaskCategory object at 0xb22d74c&gt;</option>

<option value="ahhkZXZ-bmV3LXByb2plY3QtdGVtcGxhdGVyEgsSDFRhc2tDYXRlZ29yeRgDDA">&lt;models.TaskCategory object at 0xb22dbec&gt;</option>

<option value="ahhkZXZ-bmV3LXByb2plY3QtdGVtcGxhdGVyFgsSDFRhc2tDYXRlZ29yeSIEdGVzdAw">&lt;models.TaskCategory object at 0xb22d74c&gt;</option></select></tr> 
```

可见，类别的名称没有显示，而是显示了对象，我该如何以通用方式纠正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:10:00.753

好吧，这与 WTForm 或 jinja 或 webapp2 无关。更改您的数据库文件以在您的情况下返回标题，而不是使用`repr`如下对象：

```
class TaskCategory(db.Model):
    title = db.StringProperty()
    description = db.TextProperty()

    def __repr__(self):
        return unicode(self.title) 
```

# winforms - 错误 C3861：“ShowWindow”：未找到标识符

> ID：11168400
> 
> 赞同：0
> 
> 时间：2012-06-23T09:32:26.260
> 
> 标签：winforms, c++-cli

我正在尝试编写一个简单的 CLR-Windows 窗体应用程序。它将显示一个带有按钮的窗口。一旦您单击该按钮，它将隐藏其中一个打开的 Windows。为此，我调用 ShowWindow(00050214, false);，其中 00050214 是我隐藏的窗口的句柄。

但它给出了错误：

```
Error   1   error C3861: 'ShowWindow': identifier not found c:\users\afnan
\documents     \visual studio 2010\projects\winformtest\winformtest\Form1.h 80 
```

请查看下面给出的 .h 文件的最后几行，以了解我如何使用上述功能。

**WinformTest.cpp：主项目文件。**

```
#include "stdafx.h"
#include "Form1.h"
#include"windows.h"

using namespace WinformTest;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
// Enabling Windows XP visual effects before any controls are created
Application::EnableVisualStyles();
Application::SetCompatibleTextRenderingDefault(false); 

// Create the main window and run it
Application::Run(gcnew Form1());
return 0;
} 
```

**这是.h文件**

```
#pragma once

namespace WinformTest {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::Button^  button1;
protected: 

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->button1 = (gcnew System::Windows::Forms::Button());
        this->SuspendLayout();
        // 
        // button1
        // 
        this->button1->Location = System::Drawing::Point(91, 51);
        this->button1->Name = L"button1";
        this->button1->Size = System::Drawing::Size(75, 23);
        this->button1->TabIndex = 0;
        this->button1->Text = L"button1";
        this->button1->UseVisualStyleBackColor = true;
        this->button1->Click += gcnew System::EventHandler(this,    
&Form1::button1_Click);
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(284, 262);
        this->Controls->Add(this->button1);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->ResumeLayout(false);

    }
#pragma endregion
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

             ShowWindow(00050214, false );

         }
};
} 
```

**更新**

我现在将 windows.h 放在 form.h 文件中，并使用 ShowWindow((HWND)0x00050214, SW_HIDE); 但现在我得到：

```
Error   1   error LNK2028: unresolved token (0A000011) "extern "C" int __stdcall 
ShowWindow(struct HWND__ *,int)" (?ShowWindow@@$$J18YGHPAUHWND__@@H@Z) referenced in function 
"private: void __clrcall WinformTest::Form1::button1_Click(class System::Object ^,class 
System::EventArgs ^)" 
(?button1_Click@Form1@WinformTest@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)    
C:\Users\Afnan\Documents\Visual Studio 2010\Projects\WinformTest\WinformTest\WinformTest.obj

Error   2   error LNK2019: unresolved external symbol "extern "C" int __stdcall 
ShowWindow(struct HWND__ *,int)" (?ShowWindow@@$$J18YGHPAUHWND__@@H@Z) referenced in function 
"private: void __clrcall WinformTest::Form1::button1_Click(class System::Object ^,class 
System::EventArgs ^)" 
(?button1_Click@Form1@WinformTest@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)    
C:\Users\Afnan\Documents\Visual Studio 2010\Projects\WinformTest\WinformTest\WinformTest.obj

Error   3   error LNK1120: 2 unresolved externals   C:\Users\Afnan\Documents\Visual  
Studio 2010\Projects\WinformTest\Debug\WinformTest.exe  1 
```

怎么放句柄？我使用 spy++ 工具得到了这个句柄。它还显示与以数字表示的句柄相对应的标题。在我的例子中，对应的句柄是： **WinformTest - Microsoft Visual Studio**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:34:35.720

您的头文件不包含`windows.h`，因此它不知道该符号`ShowWindow`。

你打电话的方式`ShowWindow`也是错误的。第二个参数是 an`int`并且您要传递`SW_HIDE`。我敢打赌，您的窗口句柄实际上是一个十六进制数字。

```
ShowWindow((HWND)0x00050214, SW_HIDE); 
```

* * *

顺便说一句，我不确定你为什么在头文件中放了这么多代码。通常你会在头文件中声明类，然后在 cpp 文件中定义实现。

# ruby - TextMate 和 Cucumber：自动完成 (Opt-Esc) 导致 Ruby 错误“在寻找匹配的 ''' 时出现意外的 EOF”

> ID：11168401
> 
> 赞同：1
> 
> 时间：2012-06-23T09:32:37.103
> 
> 标签：ruby, autocomplete, cucumber, textmate

我真的很想在 TextMate 中自动完成步骤，但是当我的光标位于某个步骤中并按 Opt-Esc 时，它会导致以下结果：

```
/Library/Ruby/Gems/1.8/gems/bundler-1.0.0/lib/bundler/spec_set.rb:87:in /bin/bash: -c: line 0: unexpected EOF while looking for matching `''
/bin/bash: -c: line 2: syntax error: unexpected end of filemap!'
  from /Library/Ruby/Gems/1.8/gems/bundler-1.0.0/lib/bundler/spec_set.rb:81:in /bin/bash: -c: line 0: unexpected EOF while looking for matching `''
/bin/bash: -c: line 2: syntax error: unexpected end of filespecs'
  from /Library/Ruby/Gems/1.8/gems/bundler-1.0.0/lib/bundler/definition.rb:137:in /bin/bash: -c: line 0: unexpected EOF while looking for matching `''
/bin/bash: -c: line 2: syntax error: unexpected end of filerequested_specs'
  from /Library/Ruby/Gems/1.8/gems/bundler-1.0.0/lib/bundler/environment.rb:23:in /bin/bash: -c: line 0: unexpected EOF while looking for matching `''
/bin/bash: -c: line 2: syntax error: unexpected end of filesetup'
  from /Library/Ruby/Gems/1.8/gems/bundler-1.0.0/lib/bundler.rb:100:in /bin/bash: -c: line 0: unexpected EOF while looking for matching `''
/bin/bash: -c: line 3: syntax error: unexpected end of filerequire'
  from /Users/josh/Library/Application Support/TextMate/Pristine Copy/Bundles/Cucumber.tmbundle/Support/lib/cucumber/mate/feature_helper.rb:1
  from /tmp/temp_textmate.gE2STt:3:in 
```

有人搞定这个吗？我正在使用 Ruby 1.9.3-p0 和最新版本的 Rails 和 Cucumber。

# mysql - MYSQL，将选定字段从一个表复制到另一个表

> ID：11168402
> 
> 赞同：38
> 
> 时间：2012-06-23T09:32:44.393
> 
> 标签：mysql, mysql-workbench

在 MySQL 中，如何将包含所有记录的字段复制`TABLE1`到`TABLE2`对应于主键的字段，即：`EMPLOYEE no.`？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-23T10:30:57.997

如果您的意思是要使用另一个表的列*更新*一个表的列，那么这里有一些选项：

1.  一个连接：

    ```
    UPDATE table1 AS t1
      INNER JOIN table2 AS t2 ON t1.EmpoyeeNo = t2.EmployeeNo
    SET t1.SomeColumn = t2.SomeColumn 
    ```

    或者，它可以是左连接：

    ```
    UPDATE table1 AS t1
      LEFT JOIN table2 AS t2 ON t1.EmpoyeeNo = t2.EmployeeNo
    SET t1.SomeColumn = t2.SomeColumn 
    ```

    这将基本上清空（设置为 NULL）没有匹配的值。

2.  子查询：

    ```
    UPDATE table1
    SET SomeColumn = (
      SELECT SomeColumn
      FROM table2
      WHERE EmployeeNo = table1.EmployeeNo
    ) 
    ```

    这相当于#1 中的左连接解决方​​案。

请注意，在所有情况下，都假定 in 中的一行`table1`只能匹配 中的一行`table2`。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-06-23T09:48:15.063

尝试这个

```
INSERT INTO `table2` (`field_name2`) SELECT `field_name` FROM `table1` 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-12-26T12:17:23.877

将数据从一个表复制到另一个表的查询是：

```
INSERT INTO `table2` (`field1`, `field2`)
    SELECT `field1`, `field2` FROM `table1` 
```

如果只想复制选定的值，请在查询中使用 where 子句

```
INSERT INTO `table2` (`field1`, `field2`)
    SELECT `field1`, `field2` FROM `table1`
    WHERE `field1` = condition 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-27T09:01:57.987

```
update
  table1 t1
  join table2 t2 on t2.field = t1.field
set
  t1.field1 = t2.matchingfield
where
  t1.whatever = t2.whatever 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-01T12:15:52.400

You can use this to copy all the records from `table1` into `table2` with a condition.

```
Insert into table2  select  * from table1 where field1=condition 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-09T07:14:49.033

假设表结构如下。

表 A - Col1、Col2 、Col3 表 B - Col1、Col2 、Col3

无需选择表的所有列即可将数据从一个表传输到同一数据库中的另一个表。您可以将 TableA 中的行复制（插入）到 TableB。

代码如下 -

```
Insert into TableB (Col1, Col2 ,Col3)
Select Col1, Col2 ,Col3 from TableA 
```

你也可以这样做——

```
Insert into TableB (Col1, Col2, Col3) 
Select * from TableA 
```

两种代码都有效，您需要查看您的要求。

通用代码 -

```
INSERT INTO table2 (column1, column2, column3, ...)
SELECT column1, column2, column3, ...
FROM table1
WHERE condition; 
```

如果需要，您可以添加“Where”条件。

谢谢！！！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-11-05T00:58:51.543

INSERT INTO `table_1`( `column-1`, `column-2`) SELECT column-1, column-2 FROM table_2;

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-10-23T09:10:54.770

`Insert into Delivery (DeliveredDate, appid, DownloadSize, UploadSize) select Delivered, Appid, DownloadSize,UploadSize from Delivery_Summary;`

# c++ - Stl multimap - 如何获取多图中所有键的值列表

> ID：11168403
> 
> 赞同：0
> 
> 时间：2012-06-23T09:32:50.573
> 
> 标签：c++, multimap

> **可能重复：**
> [stl::multimap - 我如何获取数据组？](https://stackoverflow.com/questions/247818/stlmultimap-how-do-i-get-groups-of-data)

我想要做的是计算存储在多图中的每个键的值列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:35:48.277

使用[`equal_range()`](http://en.cppreference.com/w/cpp/container/multimap/equal_range)；它返回一对迭代器，描述具有指定键的项目范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T10:53:12.237

通用问题的通用答案是：

```
template<class KEY, class VALUE>
std::vector<VALUE> getValues(const std::multimap<KEY,VALUE>& aMap){
    std::vector<VALUE> values;
    for(multimap<KEY,VALUE>::const_iterator it=aMap.begin(), end=aMap.end();it!=end;++it){
        values.push_back((*it).second);
    }
    return values;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:37:27.227

像这样的东西应该工作

```
multimap<string, int> m;
vector<int> values;

for (multimap<string, int>::iterator it = m.begin(); it != m.end(); ++it)
{
    values.push_back((*it).second);
} 
```

# sql - 索引通常使用什么方法，是升序还是降序？

> ID：11168404
> 
> 赞同：3
> 
> 时间：2012-06-23T09:32:52.223
> 
> 标签：sql, indexing

我正在对新数据库应用索引（大多数表上没有记录）

除了考虑过滤条件之外，我应该使用什么方法。我是否应该按降序索引记录，因为任何使用数据的窗口/Web 应用程序大部分时间都会访问新创建的记录。

我应该按升序保留主数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:41:53.160

这取决于您将如何访问您的数据。

如果您要按 DESC 比 ASC 更频繁地对其进行排序，那么请创建您的聚集索引 DESC。将索引视为快速参考 - 将其设置为尽可能接近您最常查询表的方式以获得最佳结果。

# mysql - Rubyonrails mysql 数据库连接问题

> ID：11168415
> 
> 赞同：0
> 
> 时间：2012-06-23T09:34:44.050
> 
> 标签：mysql, ruby-on-rails

我有一个域名和我的 rails 应用程序。

有没有办法在不提供该主机名的 IP 地址的情况下连接数据库？

我需要在我的 database.yml 文件中进行哪些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:44:39.750

你看到了什么错误？

如果您询问如何在不使用 IP 地址的情况下连接到数据库，这取决于您的数据库是否在托管您的 rails 应用程序的同一台机器上运行？

如果您的数据库与您的 rails 应用程序在同一台机器上，您可以将`localhost`其用作数据库主机名，这应该可以工作（假设您的数据库使用默认配置运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:12:55.000

您看到的错误几乎可以肯定是因为您的 mysql 数据库中没有 root@localhost 用户。它与数据库配置文件无关。

您需要将 root@localhost 用户添加到您的 mysql 数据库中。

不言而喻，您不应该在生产中使用您的 root 用户，而且最好不要在 dev 中使用它，因为它的权限级别可能会隐藏一些问题。

# android - 如何在 TableRow android 之间设置边距

> ID：11168425
> 
> 赞同：2
> 
> 时间：2012-06-23T09:36:07.540
> 
> 标签：android

我找到了很多关于 TableRow 边距的解决方案，但是当我尝试行时根本没有边距。

这是我的代码：

```
 TableLayout table = (TableLayout)findViewById(R.id.myTableLayout);

        for (int i = 0; i < 3; i++) {
            TableRow tr = new TableRow(this);
            LayoutParams layoutParams = new LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
            int leftMargin=110;
            int topMargin=100;
            int rightMargin=100;
            int bottomMargin=100;
            layoutParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);
            tr.setLayoutParams(layoutParams);
            tr.setBackgroundResource(R.drawable.shelf_bar);

            table.addView(tr, new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT,
                    LayoutParams.FILL_PARENT));
        } 
```

这是我的预期结果：

![在此处输入图像描述](../Images/bb81dc4cc416f2afcad1c4a96923b541.png)

请任何人指出我的错误。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-20T15:11:04.827

这是有效的：

```
TableRow tr = new TableRow(...);
TableLayout.LayoutParams lp = 
new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,
                             TableLayout.LayoutParams.WRAP_CONTENT);

lp.setMargins(10,10,10,10);             
tr.setLayoutParams(lp);

------

// the key is here!
yourTableLayoutInstance.addView(tr, lp); 
```

您需要将您的 TableRow 添加到 TableLayout 再次传递布局参数！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:38:23.027

用这个可能

```
TableRow tr = new TableRow(this);  
TableLayout.LayoutParams tableRowParams=
  new TableLayout.LayoutParams
  (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.FILL_PARENT);

        int leftMargin=10;
        int topMargin=2;
        int rightMargin=10;
        int bottomMargin=2;

tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

tr.setLayoutParams(tableRowParams); 
```

# hadoop - 在hadoop中查看文件的块数

> ID：11168427
> 
> 赞同：23
> 
> 时间：2012-06-23T09:36:15.870
> 
> 标签：hadoop, hdfs

在 Hadoop 文件系统中，如何查看文件被分成了多少块？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-23T11:03:33.130

我们可以使用 hadoop 文件系统检查命令来了解特定文件的块。

下面是命令：

```
hadoop fsck [path] [options] 
```

查看特定文件的块：

```
hadoop fsck /path/to/file -files -blocks 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-16T20:57:30.663

**hadoop fsck 文件路径**

在 CDH 5 中使用了上述命令。得到以下错误。

hadoop-hdfs/bin/hdfs：第 262 行：执行：：未找到

使用下面的命令，效果很好

**hdfs fsck 文件路径**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-04T15:35:11.427

使用 hdfs 而不是 hadoop 总是一个好主意，因为不推荐使用“hadoop”版本。

这是带有 hdfs 的命令，要在根目录中查找名为“test.txt”的文件的详细信息，您可以编写

`hdfs fsck /test.txt -files -blocks -locations`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-05-29T11:54:18.710

这应该工作..

```
hadoop fs -stat "%o" /path/to/file 
```

# python - 在Python中递归搜索目标字符串中的键字符串

> ID：11168428
> 
> 赞同：0
> 
> 时间：2012-06-23T09:36:16.530
> 
> 标签：python, string, search, python-3.x

*以下适用于 Python 3.2.3。*

* * *

我想编写一个带有两个参数的函数，一个键字符串和一个目标字符串。这些函数是**递归**确定（必须是递归的）关键字符串在目标字符串中的位置。

目前，我的代码如下。

```
def posSubStringMatchRecursive(target,key):
    import string
    index=str.rfind(target, key)
    if index !=-1:
        print (index)
        target=target[:(index+len(key)-1)]
        posSubStringMatchRecursive(target,key) 
```

这样做的问题是，没有办法将目标字符串中的键字符串的所有位置存储在列表中，因为指示位置的数字只会被打印出来。

所以，我的问题是，*有没有办法改变代码，以便目标字符串中键字符串的位置可以存储在列表中*？

* * *

## 示例输出

```
countSubStringMatchRecursive ('aatcgdaaaggraaa', 'aa')

13
12
7
6
0 
```

* * *

## 编辑

以下代码似乎在 Ashwini 的代码中没有问题。谢谢，列夫。

```
def posSubStringMatchRecursive(target,key):
    import string
    index=str.rfind(target, key)
    if index ==-1:
        return []
    else:
        target=target[:(index+len(key)-1)]
        return ([index] + posSubStringMatchRecursive(target,key)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:49:06.670

由于它可疑地类似于家庭作业问题，因此这是一个返回列表的递归函数的示例：

```
In [1]: def range_rec(limit):
    if limit == 0:
        return []
    else:
        return ([limit-1] + range_rec(limit-1)[::-1])[::-1]
   ...: 

In [2]: range_rec(10)
Out[2]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:49:11.727

```
def posSubStringMatchRecursive(target,key,res):
    import string
    index=str.rfind(target, key)
    if index !=-1:

        target=target[:(index+len(key)-1)]
        res.append(index) #append the index to the list res, 
        return posSubStringMatchRecursive(target,key,res) #Use return here when calling recursively else your program will return None, and also pass res to the function
    else:
        return res

 print(posSubStringMatchRecursive('aatcgdaaaggraaa', 'aa',[]))#pass a empty list to the function
print(posSubStringMatchRecursive('aatcgdaaaggraaa', 'a',[])) 
```

**输出：** `

```
[13, 12, 7, 6, 0]`
[14, 13, 12, 8, 7, 6, 1, 0] 
```

# android - 动态设置线性布局的相对尺寸

> ID：11168431
> 
> 赞同：0
> 
> 时间：2012-06-23T09:36:52.583
> 
> 标签：android, android-layout

我想将我的 LinearLayout（或视图）调整为相对于父级或自身的尺寸。例如，我希望宽度为父宽度的 1/3。或者，高度应该与它自己的宽度相同。我不想使用任何常量，以便它适用于所有设备。

添加代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >

    <LinearLayout android:id="@+id/ll_board"
        android:gravity="center_horizontal"
        android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    </LinearLayout> 
        ...
</LinearLayout> 
```

代码：

```
public class GMActivity extends Activity {
  public void onCreate(Bundle savedInstanceState) {
    LinearLayout board_layout = (LinearLayout)findViewById(R.id.ll_board);
    // I wanted to resize board_layout here ..
    // getParent().getWidth() returns 0
    Log.d("gm", "layout: " + ((LinearLayout) board_layout.getParent()).getWidth());
    // ..
  }
} 
```

getWidth() 给出 0。现在调用这个还为时过早吗？如果是，那么正确的称呼是什么？

基本上我的目的是使布局的宽度成为屏幕尺寸宽度的一小部分，并且高度与它自己的宽度相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:49:28.513

考虑布局您的 LinearLayout 并且它的父级是另一个 LinearLayout：

获取父级的宽度：

```
int parentWidth = ((LinearLayout) layout.getParent()).getWidth(); 
```

获取视图的宽度：

```
int viewWidth = ((LinearLayout) layout).getWidth(); 
```

设置

```
view.setHeight(viewWidth );
view.setWidth(parentWidth / 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:20:21.683

[我在 Square Form 中的 LinearLayout 中](https://stackoverflow.com/questions/5803017/linearlayout-in-square-form)找到了 height=width 解决方案（方形布局）

# javascript - 单击时将具有相同类的每个 div 移动到新位置

> ID：11168433
> 
> 赞同：0
> 
> 时间：2012-06-23T09:37:18.713
> 
> 标签：javascript, jquery, css

这是我的代码的一部分。每当我单击一个 div 时，我都希望发生一些事情。函数 xyz 存在一些问题，因为 alert("good") 没有显示。

```
$("#subarea").click(function(e)
  {
     $('.pointer').removeClass("pointer").addClass("hiddenpointer");
     $('.visible').css('z-index','1');   
     $('.hiddenimg').css('z-index','2'); 
     $('#closeit').css('z-index','4');
     $('.popupbox').css('display','none');
     alert("hey");
     xyz();
     alert("good");

   }); 
```

我的代码中有一些带有“pointer1”类的链接。我想通过单击我正在使用此功能的鼠标将它们移动到新位置。

```
function xyz()
{
     alert("idiot");
     var elem = document.getElementsByClassName('pointer1');
     for (var i = 0;i < elem.length; i++)
     {
     top1=elem[i].css('top');
     alert(top1);
     left1=elem[i].css('left');
     top1=top1*4;
     left1=left*5/3;
     elem[i].css({left:left1,top:top1}).show();
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:23:20.057

在这里工作的是小提琴[http://jsfiddle.net/pgBcW/34/](http://jsfiddle.net/pgBcW/34/)，您的代码包含许多错误

1.  使用了错误的变量名。
2.  初始化变量时未使用 var。
3.  使用 elem[i] 而不是 $(elem[i])。
4.  使用 show() 而不是 animate()。它已经显示，因此您需要使用 animate() ，因为它的定位属性正在发生变化。
5.  javascript 中不存在 getElementByClassName 函数，对其进行了更改并使用了 $(".pointer1")。

注意：下次编码时要小心。

# ruby - Rails has_many 关联导致“没有这样的列”错误

> ID：11168436
> 
> 赞同：2
> 
> 时间：2012-06-23T09:37:59.370
> 
> 标签：ruby, ruby-on-rails-3, has-many

我正在遵循[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)上的指南， 并创建了

```
class Customer < ActiveRecord::Base
  has_many :orders, :dependent => :destroy
end

class Order < ActiveRecord::Base
  belongs_to :customer
end 
```

但执行`@order = @customer.orders.create()`结果

> 未知属性：customer_id

你知道为什么会出现这个错误吗？更重要的是，has_many 的所有指南是否有一个隐藏的原因让你在展示这个例子时发疯，但没有一个真正起作用:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T10:15:59.390

您需要将 customer_id 列添加到订单表。

为此，您必须运行迁移 -

rails g 迁移 add_customer_id_to_orders customer_id:integer

然后

耙分贝：迁移

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:10:27.743

您将不得不在`customer_id`您的订单表中添加一列。

ActiveRecord 不知道要为相关订单获取哪个客户。

尝试`rails g migration AddCustomerIdToOrders customer_id:integer`（不要忘记 db:migrate）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:47:17.410

听起来您忘记运行迁移了。从控制台和您的 rails 项目的根目录中，运行`rake db:migrate`以确保 rails 已为您的关联和模型生成所有支持表和列。

# delphi - 我可以在 Delphi IDE 上显示之前中断表单的设置吗？

> ID：11168437
> 
> 赞同：1
> 
> 时间：2012-06-23T09:38:03.233
> 
> 标签：delphi, toolsapi

当我打开 Delphi 表单的 pas 文件时，它将显示 GUI 表单设计器。有什么方法可以在 IDE 中显示表单之前通过工具 API 获得通知并让我修改表单的属性？当我在“以文本形式查看”之后执行“以表格形式查看”时，是否还有类似的通知程序？

# jquery - jquery自动完成触发器下拉输入：焦点

> ID：11168446
> 
> 赞同：7
> 
> 时间：2012-06-23T09:39:33.190
> 
> 标签：jquery, autocomplete, jquery-ui-autocomplete

我正在使用下面流行的 JQuery Autocomplete 插件。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

目前，如果您键入一个短语，则会出现下拉菜单，但当您点击离开时，它会隐藏。这可以。但是，恢复下拉菜单的唯一方法是单击输入字段并输入更多字符或按下 keydown。

当用户单击输入字段时如何触发结果下拉列表的任何想法？我试图触发输入字段的焦点事件，但这不起作用。当输入字段聚焦时，我不知何故需要手动调用自动完成下拉事件。谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-23T09:48:48.750

**工作演示** [http://jsfiddle.net/CNYCS/](http://jsfiddle.net/CNYCS/)

凉爽的; 因此，您需要做的就是使用自动完成来`bind`聚焦事件，其余的自动完成将从那里接管，正如您在演示中看到的那样。

有用的链接：http: [//forum.jquery.com/topic/how-to-bind-focus-input-to-trigger-autocomplete](http://forum.jquery.com/topic/how-to-bind-focus-input-to-trigger-autocomplete) **&** [http://docs.jquery.com/UI/Autocomplete#method-search](http://docs.jquery.com/UI/Autocomplete#method-search)

希望这可以帮助，

其余代码在 jsfiddle 中。

**代码**

```
 $( "#tags" ).autocomplete({
        source: availableTags,
        minLength:0
    }).bind('focus', function(){ $(this).autocomplete("search"); } ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T09:46:27.770

根据文档，没有明显的方法可以这样做。但是您可以尝试在enabled上使用`focus`(or `click`or `keyup`) 事件：`autocomplete``textbox`

```
$('#autocomplete').trigger("keyup"); 
```

或者

```
$('#autocomplete').trigger("focus"); 
```

或者

```
$('#autocomplete').trigger("click"); 
```

正如**@Tats_innit**提到的代码，之后您只需添加该行

```
$('#tags').trigger("focus"); // as @Tats_innit's solution bind focus
                             // so you need to trigger focus 
```

**[演示](http://jsfiddle.net/CNWj8/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T03:59:19.253

添加到上面给出的代码。在我的情况下，availableTags 是从服务器值加载的。因此，我只想在值为空白的情况下打开弹出窗口 - 这为服务器节省了不必要的触发器，以便再次在焦点上加载标签。

```
$( "#tags" ).autocomplete({
        source: availableTags,
        minLength:0
    }).bind('focus', function () {
            if ($(this).val().length == 0) {
                $(this).autocomplete("search", "");
            }
        }); 
```

# asp.net-mvc-3 - 在 Controller.cs 文件中找到 @HTML.EditorFor(model => model.Username) 控制器

> ID：11168448
> 
> 赞同：0
> 
> 时间：2012-06-23T09:39:47.623
> 
> 标签：asp.net-mvc-3, razor

我使用了 HTMLEditor 代码，如下所示。

我只想通过单击清除一个 HTMLEditor。如何在 controller.cs 文件中找到特定的 HTML 编辑器控件？

```
@model Blog.Models.User
@{
    ViewBag.Title = "Register New User";
}
@using Microsoft.Web.Mvc;
@using MVC3MultiSubmitButtonExtension;
<h2>
    Register New User</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm("Create", "Home", FormMethod.Post))
{

    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Fill User Details</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Username)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Password)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Password)
            @Html.ValidationMessageFor(model => model.Password)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.EmailAddress)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EmailAddress)
            @Html.ValidationMessageFor(model => model.EmailAddress)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.MobileNumber)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.MobileNumber)
            @Html.ValidationMessageFor(model => model.MobileNumber)
        </div>
        <p>
            @*  <input type="submit" value="Create" />*@ @*@Html.MultiSubmitButton(Url.Action("Create"), "btnCreate", "Create")*@
            @*  @Html.MultiSubmitButton(Url.Action("Cancel"), "btnCancel", "Cancel", new { @class = "cancel" })*@
            <input type="submit" id="btnSubmit" name="btnSubmit" value="Submit" />
            <input type="submit" id="btnReset" name="btnReset"  value="Reset"
                class="cancel" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Click here to go Login Page", "Index")
</div> 
```

我只想为 EmailAddress HTML 编辑器设置 string.empty。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:27:06.813

如果您想在单击按钮时重置完整的表单，您可以将按钮的类型设置为`type="reset"`.

```
<input type="reset" id="btnReset" name="btnReset"  value="Reset" /> 
```

如果要清除特定字段，例如`EmailAddress`单击按钮，则必须侦听单击事件。首先，您必须为该按钮设置一个唯一的 ID。

```
<input id="clearEmailAddress" type="button" value="Clear Email Address" />

<script type="text/javascript>

$("#clearEmailAddress").click(function(){
     $(this).closest('form').find("input[name='EmailAddress']").val("");
});

</script> 
```

# java - 计算行数，标记化

> ID：11168451
> 
> 赞同：0
> 
> 时间：2012-06-23T09:40:23.377
> 
> 标签：java, count, tokenize

我想计算文件中的行数，并将其拆分为标记。我似乎无法让我的代码工作，有人可以提供建议。提前致谢

```
import java.util.*;
import java.io.*;

public class kup
{
    public static void main(String args[]) throws Exception
    {
        FileReader fileInput = new FileReader("C:\\save\\input.txt");
        BufferedReader readInput = new BufferedReader(fileInput);

        FileWriter fileOutput = new FileWriter("C:\\save\\output.txt");
        PrintWriter outFile = new PrintWriter(fileOutput);

        Scanner scanLine = new Scanner(readInput);
        String textInput = scanLine.nextLine();
        StringTokenizer stringtokenizer = new StringTokenizer(textInput);

        int tokenCount = stringtokenizer.countTokens();
        int lineCount = 0;

        while(scanLine.hasNextLine())
        {
            while(stringtokenizer.hasMoreTokens())
            {
                String string = stringtokenizer.nextToken();
                outFile.println(string);
            }
                lineCount++;
        }

        outFile.println("Number of words: " +tokenCount);
        outFile.println("Number of lines: " +lineCount);

        readInput.close();
        outFile.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T09:43:11.487

您只使用第一行初始化标记器。我怀疑你想要类似的东西：

```
int tokenCount = 0;
int lineCount = 0;

while (scanLine.hasNextLine())
{
    String line = scanLine.nextLine();
    StringTokenizer tokenizer = new StringTokenizer(line);

    while (tokenizer.hasMoreTokens())
    {
        String string = tokenizer.nextToken();
        outFile.println(string);
        tokenCount++;
    }
} 
```

就我个人而言，我可能会坚持`BufferedReader`“逐行阅读”——你并没有真正使用`Scanner`这里的任何细节。所以：

```
String line;
while ((line = readInput.readLine()) != null)
{
    StringTokenizer tokenizer = new StringTokenizer(line);

    while (tokenizer.hasMoreTokens())
    {
        String string = tokenizer.nextToken();
        outFile.println(string);
        tokenCount++;
    }
} 
```

请注意，您也应该关闭您的 reader/writers/streams finally 块，或者如果您使用的是 Java 7，则使用 try-with-resources 语句。

# python - 为什么在 Dialog.run() 结束之前运行打印

> ID：11168460
> 
> 赞同：0
> 
> 时间：2012-06-23T09:42:00.100
> 
> 标签：python, gtk, pygtk

好的，我编辑我的问题，尝试更清楚地解释它：

我有一个带有 on 按钮（addButton）的主窗口，如果我点击它，它会显示带有两个按钮（ok_btn、cancel_btn）、一个标签（errorLabel）和一个条目的 AddDialog。请看代码：

代码链接： http: [//pastebin.com/ketGWctN](http://pastebin.com/ketGWctN)

如果我单击 btn_ok 但条目未填写，为什么要在 AddDialog.run() 之后打印消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:57:45.750

`Dialog.run()`循环运行，直到对话框关闭或单击底部的按钮之一。因此，当您单击确定时，循环退出并且`Dialog.run()`函数返回。

如果条目未填写，请尝试禁用 OK 按钮。

# sql - 用逗号分隔的列值

> ID：11168461
> 
> 赞同：1
> 
> 时间：2012-06-23T09:42:00.903
> 
> 标签：sql, sql-server, sql-server-2008, multiple-select-query

我在 SQL Server 中有 3 个表，`Table1`其中一列具有其他两个表的逗号分隔值。`Table2``Table3``Table1``PK`

现在我想将列中的值分开，`Table1`并使用它根据找到的值从其他两个表中选择数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:50:17.813

尝试这个

```
Select Table1PkValue,Table2PKValue
From
(
    Select SubString(PKColumn, 0,CharIndex(PKColumn, ',')) As    
    Table1PkValue,SubString(PKColumn, 
    CharIndex(PKColumn,',')+1,Len(PKColumn)-CharIndex(PKColumn,',')+1) As Table2PKValue
    From Table1
 )
As T
INNER JOIN Table2 ON Table2.PkColumn=T.Table1PkValue
INNER JOIN Table3 ON Table3.PKColumn=T.Table2KValue 
```

请注意，您的 PKColumn 的 Table1 应该有逗号分隔的值。表 2 中的第一个值和表 3 中的第二个值。

如果有任何语法错误，则忽略

# java - 是否可以使用 Java 捕获正在播放的音频？

> ID：11168465
> 
> 赞同：2
> 
> 时间：2012-06-23T09:42:39.333
> 
> 标签：java, audio, capture, outputstream, javasound

我想知道是否可以使用简单的 Java 程序在音频输出硬件上捕获正在播放的音频，然后将其写入输出流。

是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:27:30.550

如果您希望使用 java 应用程序（如 audiohijackpro）将所有程序的输出记录到给定的音频设备，那么简短的回答是否定的，如果没有本机代码，这是不可能的。事实上，用任何语言都很难做到。据我所知，没有任何平台能让这一切变得简单。

在某些环境中，有一种解决方法，例如[http://cycling74.com/soundflower-landing-page/](http://cycling74.com/soundflower-landing-page/)，但它需要您的最终用户配合。

# c# - 映射项目时 AutoMapper 中的事件

> ID：11168466
> 
> 赞同：2
> 
> 时间：2012-06-23T09:42:45.717
> 
> 标签：c#, .net, automapper

我已经为许多类设置了映射，但是在某些情况下，我会想要应用一些自定义映射或将值应用于不会映射的其他属性，我不能集中执行此自定义映射的原因是因为它是上下文相关，因此变量/属性将不可用。

是否有我可以在 AutoMapper 中绑定的事件，以便在调用 Mapper.Map 后填充某些属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:05:06.737

您可以创建如下映射：

```
Action<object,object> beforeMap = (src, dst) => { Console.WriteLint("BeforeMap"); };
Mapper.CreateMap<Src, Dst>().BeforeMap((src, dst) =>
    {
                  if(beforeMap!=null)
                       beforeMap(src,dst);
    });

Mapper.Map(new Src(), new Dst()); // - output: BeforeMap 
```

并在您需要上下文相关的 BeforeMap 处理程序时设置新的 beforeMap。如果您不需要其他操作，只需将 beforeMap 设置为 null。

```
beforeMap = (src, dst) => { Console.WriteLint("NEW BeforeMap") };

Mapper.Map(new Src(), new Dst()); // - output: NEW BeforeMap 
```

您可以使用 AfterMap 执行相同的操作。

# ajax - 找不到文件（ajax）

> ID：11168468
> 
> 赞同：1
> 
> 时间：2012-06-23T09:42:57.683
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3

我有以下代码：

```
svg = $("#rsr").svg({ loadURL: '@Url.Content("~/Content/images/svg_curv.svg")', onLoad: svgLoaded }); 
```

此代码加载 svg 文件（Jquery SVG 插件）。在本地网络服务器上一切正常。但在生产网络服务器中，我收到以下错误：`404 Not Found`. 该文件存在于服务器上： ![在此处输入图像描述](../Images/e93a1954469005a1150e26ec10b33c9a.png)

另外，如果我通过浏览器（`mysite.com/content/images/svg_curv.svg`）打开文件，则找不到，但`images`找到了文件夹中的其他文件。

哪里有问题？
谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:47:34.977

我不太了解你的环境。但您需要在您的网络服务器上添加/允许 svg **MIME**类型

[在 IIS 中允许 MIME TYPE](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/cd72c0dc-c5b8-42e4-96c2-b3c656f99ead.mspx?mfr=true)

[添加新的 MIME 类型](http://www.hosting.com/support/dedicated/IIS/newmime/)

# jquery - 如何使用 jquery 从局部视图中调用警报消息

> ID：11168471
> 
> 赞同：1
> 
> 时间：2012-06-23T09:43:03.517
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-partialview

我有一个操作方法 Save() 来保存我的表单数据，并且我想在警报消息中显示运行时发生的异常，警报类型为错误。

我创建了一个错误模型以及一个用于重定向和呈现错误的部分视图。

但是异常不会出现在警告框中。如何编写一个通用操作来显示我的所有异常类型？任何人都可以帮忙。

这是我的代码：

调用 Save 操作的 Jquert：

```
 $("#save-icon").click(function (event) {
         event.preventDefault();
         if ($('#Code').val() != '' && $('#Name').val() != '') {
             $.post('@Url.Action("Save")', $("#form1").serialize());
         }
     }); 
```

保存操作：

```
 public override ActionResult Save()
    {
        try
        {
            ....
            regionClient.Save(ct);
            return Json(new { result = ct });
        }
        catch (Exception Ex)
        {
            return RedirectToAction("ShowError", new { ErrType="I", ErrMessage=Ex.Message });
        }
    } 
```

显示错误操作：

```
 public ActionResult ShowError(string ErrType,string ErrMessage)
    {
        Error Err = new Error(ErrType, ErrMessage);
        return PartialView(Err);
    } 
```

错误模型：

公共类错误{公共字符串类型{获取；放; } 公共字符串消息 { 获取；放; }

```
 public Error(string ErrType, string ErrMessage)
    {
        Type = ErrType;
        Message = ErrMessage;
    }
} 
```

和部分观点：

```
@model iBoxV5.Models.Error
@section Scripts
{
    $(document).ready(function() {
      var message='@Model.Message';
      alert("Error:"+message);
    });
} 
```

在此先感谢.. 快乐编码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:39:37.990

我认为您想在 ajax 调用中发生某些异常时在警报框中显示错误。如果我是正确的，你可以按照这个。

每当在正常请求和 AJAX 请求中发生异常时， ASP.NET MVC 的内置错误处理机制总​​是返回`Error`位于共享文件夹中的错误视图 ( )。该`Error`视图也不会显示异常，它只显示纯文本。尽管如果您仍想在`Error`视图中显示错误，则直接向用户显示错误不是一个好主意，但您可以这样做。

**共享/Error.cshtml**

```
@model System.Web.Mvc.HandleErrorInfo

<h2>Exception details</h2>
<p>
    Controller: @Model.ControllerName <br>
    Action: @Model.ActionName
    Exception: @Model.Exception
</p> 
```

您必须强烈键入`Error`要建模的视图才能在视图`HandleErrorInfo`中显示异常消息。

当回到 ajax 调用而不是返回`Error`视图时，最好返回一个`JSON`包含错误详细信息的对象。为此，您必须`custom handle error filter`如下所述创建一个，

```
public class CustomHandleErrorAttribute : HandleErrorAttribute
{
    private readonly ILog _logger;

    public CustomHandleErrorAttribute()
    {
        _logger = LogManager.GetLogger("MyLogger");
    }

    public override void OnException(ExceptionContext filterContext)
    {
        if (filterContext.ExceptionHandled || !filterContext.HttpContext.IsCustomErrorEnabled)
        {
            return;
        }

        if (new HttpException(null, filterContext.Exception).GetHttpCode() != 500)
        {
            return;
        }

        if (!ExceptionType.IsInstanceOfType(filterContext.Exception))
        {
            return;
        }

        // if the request is AJAX return JSON else view.
        if (filterContext.HttpContext.Request.Headers["X-Requested-With"] == "XMLHttpRequest")
        {
            filterContext.Result = new JsonResult 
            { 
                JsonRequestBehavior = JsonRequestBehavior.AllowGet, 
                Data = new
                { 
                    error = true,
                    message = filterContext.Exception.Message
                } 
            };
        }
        else
        {
            var controllerName = (string)filterContext.RouteData.Values["controller"];
            var actionName = (string)filterContext.RouteData.Values["action"];
            var model = new HandleErrorInfo(filterContext.Exception, controllerName, actionName);

            filterContext.Result = new ViewResult
            {
                ViewName = View,
                MasterName = Master,
                ViewData = new ViewDataDictionary<HandleErrorInfo>(model),
                TempData = filterContext.Controller.TempData
            };
        }

        // log the error using log4net.
        _logger.Error(filterContext.Exception.Message, filterContext.Exception);

        filterContext.ExceptionHandled = true;
        filterContext.HttpContext.Response.Clear();
        filterContext.HttpContext.Response.StatusCode = 500;

        filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;      
    }
} 
```

您必须替换`HandleErrorAttribute`注册`Global.asax.cs`到的，`CustomHandleErrorAttribute`然后您就完成了。现在，如果在 AJAX 调用中发生异常，您将获得一个 JSON 对象，其中包含异常详细信息。

有关异常处理的更多信息，请参阅这篇[文章](http://prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:48:23.837

这样做是不可能的，因为`$.post`是 AJAX 请求，您必须返回错误消息，例如`JSON`格式并从您的内部警告它`$.post`：

```
$("#save-icon").click(function (event) {
     event.preventDefault();
     if ($('#Code').val() != '' && $('#Name').val() != '') {
         $.post('@Url.Action("Save")', $("#form1").serialize(), function(data) {
             if(data.type == 'error') {
                 alert(data.result);
             }
         });
     }
 }); 
```

您的操作方法可能是这样的：

```
public override ActionResult Save()
{
    try
    {
        // ....
        regionClient.Save(ct);
        return Json(new { type="success", result = ct });
    }
    catch (Exception e)
    {
        return Json(new { type="error", result = e.Message });
    }
} 
```

# android - 使用 android 连接到蓝牙音频适配器

> ID：11168475
> 
> 赞同：1
> 
> 时间：2012-06-23T09:43:32.920
> 
> 标签：android, audio, bluetooth, device, connect

我的平板电脑（android 3.2.2）与罗技音频蓝牙设备连接。如果我离开音频设备，它就不再连接，如果我回来也不会重新连接。

我的媒体播放器应用程序的声音现在正在使用内置扬声器播放音乐，我想使用应用程序中的按钮重新连接到配对的罗技蓝牙设备，就像在 android 操作系统设置中点击设备一样用于连接设备。

-discovering，-listing，-walk trough配对设备，获取蓝牙地址工作，但它没有连接到它。

是否可以通过点击按钮重新连接到我自己的应用程序中的设备？

# drupal - 带有标准的单页drupal 7 profile2

> ID：11168478
> 
> 赞同：2
> 
> 时间：2012-06-23T09:44:37.400
> 
> 标签：drupal, drupal-7, profile

我如何使用 drupal 用户配置文件表单在一个页面中添加 profile2 表单？我试试这个钩子，但它对我不起作用:(

```
 function MY_MODULE_form_user_profile_form_alter(&$form, &$form_state) {
  if (($type = profile2_get_types('profile')) && $type->userCategory) {
    if (empty($form_state['profiles'])) {
      $profile = profile2_load_by_user($form['#user'], 'profile');
      if (empty($profile)) {
        $profile = profile_create(array('type' => 'profile', 'uid' => $form['#user']->uid));
      }
      $form_state['profiles'][$profile->type] = $profile;
    }
    profile2_attach_form($form, $form_state);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:18:46.653

您的意思是当您编辑个人资料或您的用户在网站上注册时？如果你的意思是以前，它不会！这是一个不同的实体，因此它始终在您的个人资料编辑页面上有一个选项卡。如果您有多个与您的帐户关联的个人资料，则每个个人资料都会有一个单独的选项卡。如果您想完全避免这种情况，请使用管理员 > 配置页面上“帐户设置”上的“管理字段”页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T12:46:12.280

[https://drupal.org/project/account_profile](https://drupal.org/project/account_profile) en D7 版本确实有效。

# c# - 从 double[] 创建位图

> ID：11168482
> 
> 赞同：1
> 
> 时间：2012-06-23T09:44:50.840
> 
> 标签：c#, wpf, bitmap, brightness, contrast

目前我正在开发一个程序，让我以图像的形式处理数据。假设我有对应于图像的数据点（可能是 300 x 300），值范围从 0 到 10000，我想以灰度值显示图像。如果我只是将值范围（0-10000）分成 256 个部分并根据位图形式的灰度值分配它们（我通过将所有颜色设置为相等来使用 rgb），那一切都很好。

然而，用户必须能够改变对比度和亮度。我的意思是：假设对应于黑色的值是 3000（显然下面的所有值也是黑色），对应于白色的值是 5000+。两者之间的值应该与灰色具有线性相关性。用户将有两个滑块，一个用于更改可观察值的范围（在本例中为 2000），另一个用于将范围从 3000-5000 转移到 5000-7000。问题实际上是让滑块实时工作。我试图为每个像素使用一个矩形来模拟图像，但是循环遍历所有矩形并更改它们的颜色实在是太慢了。有谁知道，如何让它工作得又好又顺利？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:17:11.590

首先，您需要将值数组转换为`double`值数组`byte`。然后，您可以将此值数组写入`byte`a `WriteableBitmap`。如果您不需要重复更新 的内容`WriteableBitmap`，您还应该将其冻结以提高性能：

```
public static ImageSource GetImage(byte[] rawImageBytes, int width, int height)
{
    int channels = 1;
    int stride = width * channels;
    var image = new WriteableBitmap(width, height, 96, 96, PixelFormats.Gray8, null);
    image.WritePixels(new Int32Rect(0, 0, width, height), rawImageBytes, stride, 0);
    image.Freeze();
    return image;
} 
```

如果要更新 的内容`WriteableBitmap`，可以只调用`WritePixels`同一个实例而不冻结对象实例。

要`WriteableBitmap`在 WPF 应用程序中显示，只需将其分配给控件的`Source`属性`Image`。

# android - 如何在 Android 中使用后台线程在 onDestroy 之前监控活动中的网络状态？

> ID：11168483
> 
> 赞同：0
> 
> 时间：2012-06-23T09:44:52.267
> 
> 标签：android

嗨，我是 Android 的新手。我需要检查整个应用程序的网络连接，并在状态改变时通知用户网络状态。请告诉我如何处理一些示例代码。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:10:55.313

您可以使用`runOnUiThread`和`ConnectivityManager` 在固定时间后检查网络状态并向用户显示消息：

```
private boolean mNetworkRunning=false;
private  ConnectivityManager connMgr; 
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView (R.layout.main);
 mClockRunning=true;
 NetworkStatusThread();
 }
   @Override
    protected void onDestroy() {
        super.onDestroy();
        // Stop Thread Here.
        mNetworkRunning=false;
    }  
 public void NetworkStatusThread(){
     Thread th=new Thread(){
    @Override
    public void run(){
     try
      {
       while(mNetworkRunning)
       {
         Thread.sleep(1000L);// set time here for refresh time in show update to user
        NetworkActivity.this.runOnUiThread(new Runnable() { 
         @Override
         public void run() {
         // TODO Auto-generated method stub
          if(mNetworkRunning)
           {
             boolean statu=isMobileNetworkAvailable();
             if(statu==true)
            Toast.makeText(YourCurrentActivity.this, "Network Available",Toast.LENGTH_LONG).show();
             else
             Toast.makeText(YourCurrentActivity.this, "Network Not Available",Toast.LENGTH_LONG).show();
           } 
          };
    }
    }catch (InterruptedException e) {
        // TODO: handle exception
    }
   }
 };
 th.start();
}

public  boolean isMobileNetworkAvailable(Context con){  
    if(null == connMgr){  
     connMgr = (ConnectivityManager)con.getSystemService(Context.CONNECTIVITY_SERVICE);  
    }  
    NetworkInfo wifiInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);  
    NetworkInfo mobileInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);  
    if(wifiInfo.isAvailable()){  
        return true;  
    }else if(mobileInfo.isAvailable()){  
        return true;  
    }else{  
        return false;  
    }  
  } 
```

第二个选项不使用线程，那么您可以将`CONNECTIVITY_CHANGE`Manifest.xml 的接收器注册为：

```
< !-- Needed to check when the network connection changes -->   
< uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>   
< receiver android:name="you_package_name.ConnectionChangeReceiver"   
  android:label="NetworkConnection">   
< intent-filter>   
      < action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>   
< /intent-filter>   
< /receiver> 
```

在代码中：

```
public class ConnectionChangeReceiver extends BroadcastReceiver {  

    private static final String TAG =ConnectionChangeReceiver.class.getSimpleName();  

    @Override   
    public void onReceive(Context context, Intent intent) {   
    boolean success = false;   
    ConnectivityManager connManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);    
    State state = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState();   
    //WIFI
    if (State.CONNECTED == state) {  
    success = true;   
    }   
    //GPRS
    state = connManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState();  
    if (State.CONNECTED != state) {   
    success = true;   
    }   
    if (!success) {   
    Toast.makeText(context, "SHOW STATUS HERE", Toast.LENGTH_LONG).show();   
    }    
    } 
```

# http - 通过 HTTP 向服务器发送键盘命令

> ID：11168487
> 
> 赞同：1
> 
> 时间：2012-06-23T09:45:30.817
> 
> 标签：http, networking, keyboard

我希望能够从浏览器向同一网络上运行 XAMPP 的 Mac 发送键盘命令。

我在设置之前使用了 arduino，并使用了充当 USB 键盘的以太网屏蔽，但这次我正在寻找软件解决方案。

有谁知道指向我的方向吗？

# python - django queryset values() 方法字段顺序与返回的不同

> ID：11168488
> 
> 赞同：3
> 
> 时间：2012-06-23T09:45:31.160
> 
> 标签：python, django, django-queryset

我有一个字段列表可供选择，如下所示：

```
field_names = [u'name', u'mobile', u'address', u'email', u'sex'] 
```

使用以下内容渲染模板：

```
return render_to_string('templatetags/index.html', {
   'objects':User.objects.all().values(*field_names)
}) 
```

但是返回的结果字段顺序与输入字段顺序不同：

带有 {{ objects }} 的模板中的输出：

```
{u'mobile': u'18680868047', u'email': u'', u'sex': u'U', u'name': u'\u4f55\u667a\u5f3a', u'address': u'\u8944\u9633\u5357\u8def175\u53f7 \u73af\u4e2d\u5546\u53a6 410\u5ba4'} 
```

这是我的模板：

```
<table>
{% for object in objects %}
<tr>
{% for key,value in object.items %}
   <td class="{{key}}">{{ value }}</td>{% endfor %}
</tr>
{% endfor %}
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T10:52:03.510

`queryset.values()`返回字典列表，并且字典不会以任何特定顺序返回其项目。

如果您希望您的值按顺序排列，请使用`queryset.values_list`它返回一个元组列表。

（您需要将列列表保存在单独的上下文变量中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:17:59.437

我正在使用 OrderedDict 集合对象来解决字段排序问题。

```
objects_list = []
for row in queryset:
    ordered_dict = collections.OrderedDict()
    for col in self.field_names:
        ordered_dict[col] = row[col]  
    objects_list.append(ordered_dict) 
```

# google-app-engine - 在 JSP 中设置 Facebook 频道文件的到期日期

> ID：11168490
> 
> 赞同：1
> 
> 时间：2012-06-23T09:45:51.237
> 
> 标签：google-app-engine, jsp, facebook-graph-api, facebook-javascript-sdk

我正在开发一个使用 Javascript SDK 集成 Facebook Graph API 的 HTML 应用程序。Facebook 建议在 PHP 的帮助下使用频道文件，但我使用的是 Google App Engine，因此不知道如何使用 JSP 来实现这一点。

是的，我正在寻找 JSP 代码片段来执行此操作。是否可以仅使用 HTML 来完成此操作，因为我想尽可能多地依赖客户端编程？

“尽可能长时间地缓存频道文件很重要。在提供此文件时，您必须发送具有较长有效期的有效 Expires 标头。这将确保频道文件被浏览器缓存，这对于一个重要的流畅的用户体验。如果没有适当的缓存，跨域通信将变得非常缓慢，用户体验将严重下降。在 PHP 中实现此目的的一个简单方法是："

```
<?php
 $cache_expire = 60*60*24*365;
 header("Pragma: public");
 header("Cache-Control: max-age=".$cache_expire);
 header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
 ?>
 <script src="//connect.facebook.net/en_US/all.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:17:56.333

您可以通过在 JSP 中设置自己的 HTTP 响应标头`response.setHeader(name, value)`。

如果没有任何实际编程可能取决于Google App Engine是否让您在其服务器配置中为某些文件配置此类内容。我不知道他们使用的是哪种类型的网络服务器，所以你必须在他们的文档中查找。

# python - Sqlalchemy 中的复合键

> ID：11168492
> 
> 赞同：13
> 
> 时间：2012-06-23T09:45:57.930
> 
> 标签：python, sqlalchemy, primary-key

我正在使用`flask-sqlalchemy`构建 webapp，并且我有以下模型：

```
class Post(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), unique=True)
    candidates = db.relationship('Candidate', backref='post', lazy='dynamic')

    def __init__(self, name):
        self.name = name

    def __repr__(self):
        return "<Post %r>" % self.name

class Candidate(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), primary_key=True)
    post_id = db.Column(db.Integer, db.ForeignKey('post.id'))
    hostel = db.Column(db.String(80))
    yes_no = db.Column(db.Boolean)
    #votes = db.relationship('Vote', backref='vote', lazy="dynamic")

    def __init__(self, name, hostel, post_id, yes_no):
        self.name = name
        self.hostel = hostel
        self.post_id = post_id
        self.yes_no = yes_no

    def __repr__(self):
        return "<Candidate: %r, Post: %r>" % (self.name, self.post.name) 
```

在数据库设计方面我完全是菜鸟，所以我非常感谢一些关于我有的一些基本查询的指针

*   `id`柱子有必要吗？我见过的大多数教程都将其作为一列（特别是主键）。我可以没有它吗？特别是在我有另一个主键的情况下？

*   鉴于 post_id 是外键，我如何对 Candidate#Name 和 Candidate#post_id 列进行复合键约束。

*   如何“刷新”我的数据库。在对模型进行更改后，如何确保这些更改反映在实际表中？我需要`drop_all`手动`create_all`吗？

*   最后，`sqlalchemy`文档是否也适用`flask-sqlalchemy`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-23T11:22:45.780

> id 列是必需的吗？我见过的大多数教程都将其作为一列（特别是主键）。我可以没有它吗？特别是在我有另一个主键的情况下？

对于 post 表，是的。对于另一个，没有。有些人可能会争辩说，由于名称是唯一的，请将其作为主键，但这意味着在需要引用该帖子的**任何地方**使用名称，这意味着更多的空间（名称的长度与 int）（不一定是问题）和想想“如果候选人名字改变了怎么办？”。但是，您当然不需要两者。

> 鉴于 post_id 是外键，我如何对 Candidate#Name 和 Candidate#post_id 列进行复合键约束。

你是怎么做的，每个帖子都分配给一个帖子：

```
candidates = db.relationship('Candidate', backref='post', lazy='dynamic') 
```

因此，该字段不应该被调用`candidates`，而是`candidate`有意义的。

为了回答您的问题，我将引用[文档](http://docs.sqlalchemy.org/en/latest/core/schema.html#sqlalchemy.schema.Column.__init__)：

> 要在约束/索引中指定多个列或指定显式名称，请显式使用 UniqueConstraint 或 Index 构造。

您需要将其添加到模型定义中：

```
__table_args__ = (
        UniqueConstraint("id", "candidate_id"),
    ) 
```

虽然我认为它在这里没用（你为什么需要它？如果 id 是唯一的（主键），那么包含它的任何其他组合都是唯一的）......

> 如何“刷新”我的数据库。在对模型进行更改后，如何确保这些更改反映在实际表中？我需要手动 drop_all 和 create_all 吗？

您需要对`commit`数据库进行更改。从[flask-sqlalchemy 的文档中](http://packages.python.org/Flask-SQLAlchemy/queries.html#inserting-records)：

```
db.session.add(post)
db.session.commit() 
```

> 最后，sqlalchemy 文档是否也适用于 flask-sqlalchemy？

**注意**这是我自己发现的，没有“官方”来源，只是通过阅读 flask-sqlalchemy 的来源。

是的，不同的是您访问模型、会话和引擎的方式以及......例如，在 sqlalchemy 中：

```
from sqlalchemy.orm import sessionmaker
Session = sessionmaker()
session = session()
session.commit() 
```

在烧瓶 sqlalchemy 中：

```
db.session.commit() 
```

对于“模型”：

```
# In sqlalchemy
Base = declarative_base()
class Post(Base):
    # ...

# In flask-sqlalchemy
class Post(db.Model):
    # ... 
```

ETC...

无论如何，你用 sqlalchemy 的方式做的事情，你做一次，flask-sqlalchemy 会在后台为你做。

希望它有所帮助:)（这不仅仅是关于 sqlalchemy 中复合键的一个问题......）

# .net - 如何在.net中调试测试

> ID：11168496
> 
> 赞同：4
> 
> 时间：2012-06-23T09:46:34.903
> 
> 标签：.net, visual-studio-2010, unit-testing, nunit

我想调试我的测试，检查每个测试以查看失败的确切位置。我使用的是很棒的工具 coderush，但我的试用期 1 个月已过期。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T09:51:09.117

正如马克所说，如果你发现一个工具真的很有用，那就买吧。我个人使用 ReSharper 来运行我的测试，但这是个人选择。

我*也*使用[NCrunch](http://www.ncrunch.net/)，它是免费的（而且很棒）。我相信你也可以用它来调试。

但是，您可以使用 NUnit GUI 进行调试 - 只需将调试器附加到进程、设置断点并运行测试。

但是，我通常会尽量*不*要求使用调试器来修复测试。当一个断言在精心设计的测试中失败时，经过一番思考，*通常会提供足够的信息来修复实现。*如果不是，则表明这是一个复杂的场景 - 有时建议添加更多测试来处理场景的每个部分。但是，是的，偶尔你会需要调试器......

# jquery - 谷歌浏览器中的jquery ajax响应慢

> ID：11168497
> 
> 赞同：12
> 
> 时间：2012-06-23T09:46:50.833
> 
> 标签：jquery, ajax, google-chrome

我正在用 Java 开发我的网站。我正在使用 jquery、ajax，如下所示：

```
$.ajax({
    dataType: "json",
    url : 'getWords.htm',
    type: 'post',
    async : false,
    data : {dataJSON : JSON.stringify(dataJSON)},
    success : function(words) {
        .....
    }
}); 
```

它运行良好，但在 Chrome 中它的运行速度比 Firefox、IE 和 Opera 慢。在 Chrome 中我有一点延迟（大约 0.8 秒）。当我每次单击有四个 ajax 查询时，它真的很慢。我该如何解决？

在萤火虫中我看到：发送 5 毫秒，等待 512 毫秒，接收 3 毫秒，但在其他浏览器中都很快。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T10:42:31.953

如果您没有`.post()`在动态生成的元素上加载 的内容，请尝试将其放入`window.onload`而不是`$(document).ready`，这对我有用。希望能帮助到你！

**更新**

作为`post()`一个 click() 事件的触发，父元素需要准备好。但是，如果您在`post()`外部调用该函数`$(document).ready`并将结果保存到`javascript`变量中，您可能会赢得一些时间。`initialValue`从用户第二次单击您的元素时起，您​​就需要对其进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:52:56.683

使用`async: 'true'`.

这是默认设置，除非您有充分的理由这样做，否则您不应切换到同步请求。首先，它将使浏览器能够并行下载文件，而第二个同步请求可能会阻塞浏览器线程。

顺便说一句：*“从 jQuery 1.8 开始，不推荐使用 async: false 。”* （来自[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)文档）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:40:50.413

前段时间我也发生过类似的事情，调用 AJAX、POST 或 GET 时，每个浏览器的响应时间都不同。结果是我从 url 传递的大量数据，在你的例子中是“getWords.htm”。有几个问题可以帮助确定您的案例出了什么问题：

1.  您要发回多少数据，格式是什么？尝试 JSON 并在“SUCCESS”函数中解析它以生成 HTML 代码/页面。
2.  您尝试一次生成多少个 DOM 对象？它有助于即时解析您需要的任何内容，一旦您在客户端拥有 JSON 并从那里动态生成 HTML，这很容易做到。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-21T14:32:50.670

有时最好在机器上使用 jquery 而不是存储在 google 中的 jquery。取决于您拥有的互联网连接

当地的

```
<script type="text/javascript" src="/js/jQuery.min.js"></script> 
```

来自谷歌的 API

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

# php - Symfony 1.4 - 在检查凭据之前做一些事情

> ID：11168503
> 
> 赞同：1
> 
> 时间：2012-06-23T09:47:38.870
> 
> 标签：php, symfony1, symfony-1.4

我在 security.yml 中对我的模块有一些凭据要求。在检查完成之前如何运行方法？有什么活动可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T10:45:18.003

[过滤器](http://www.symfony-project.org/book/1_1/06-Inside-the-Controller-Layer#chapter_06_filters)可能是您需要的。
每次应用程序运行时，都会首先运行过滤器。

*只需在apps/(front|back)end/config/filters.yml*文件中添加一个过滤器：

```
myFilter:
  class: myFilter 
```

*并在lib/*中创建类：

```
class myFilter extends sfFilter
{
  public function execute($filterChain)
  {
    // write your code here...

    // execute the next filter
    $filterChain->execute();
  }
} 
```

# entity-framework-4 - 首先使用 EF 代码审核表

> ID：11168505
> 
> 赞同：1
> 
> 时间：2012-06-23T09:47:53.230
> 
> 标签：entity-framework-4, ef-code-first, entity-framework-mapping

我有一堂课说`Message`如下：

```
public class Message
{
    public int Id{get;set;}
    public string MessageText{get;set;}
    public int Sender{get;set;}
    public DateTime CreatedOn{get;set;}

    //EDIT:2
    public virtual Message RepliedTo{get;set;}
    public virtual IList<Message> Replies{get;set;}
    public virtual IList<MessageStatusHistory> History{get;set;}
    //so on and so forth
} 
```

现在我想保留 Message 对象的状态，例如用户将其标记为已读以及何时。我创建了一个类`MessageStatusHistory`，如：

```
public class MessageStatusHistory
{
    public int Id{get;set;}
    public string Status{get;set;}
    public DateTime StatusDate{get;set;}
    public int UserId{get;set;}
    public int MessageId{get;set;}//EDIT:2
    public Message Message{get;set;}
} 
```

我对如何设置`Message`和类的映射感到困惑，以便我可以从对象本身`MessageStatusHistory`获取 a 的所有历史记录。`Message`

此外，在某些用户将其标记为已读之前，状态历史表不会有条目。

**编辑：2**我配置映射`Message`如下：

```
ToTable("Messages");
HasOptional(x => x.RepliedTo).WithMany(x => x.Replies)
    .Map(n => n.ToTable("Messages")); 
```

对于`MessageStatusHistory`映射是：

```
HasRequired(x => x.Message).WithMany(n => n.History)
       .HasForeignKey(x => x.MessageId) 
```

现在，当我运行以下测试时：

```
using (IKernel ker = new StandardKernel())
{    
    ker.Rebind<IDbContext>().To<MessageDbContext>();
    ker.Rebind<IRepository<Message>>().To<EFRepository<Message>>();
    ker.Rebind<IRepository<MessageStatusHistory>>()
                   .To<EFRepository<MessageStatusHistory>>();

    var svc = ker.Get<MessageService>();
    var message = svc.Create("hello world", 1, "user2@example.com");
    var nn = svc.AddReplyToMessage(message, "Message 2", 1, "user2@example.com");
    var nnn = svc.AddReplyToMessage(nn, "Message 3", 2, "user1@example.com");

    var nhs = ker.Get<MessageStatusHistoryService>();

    nhs.Create(message, Status.MarkedRead, 2, "user1@example.com");
    nhs.Create(message, Status.MarkedRead, 1, "user2@example.com");
    nhs.Create(nnn, Status.MarkedRead, 2, "user1@example.com");
    nhs.Create(nn, Status.MarkedRead, 1, "user2@example.com");
    nhs.Create(nn, Status.MarkedRead, 2, "user1@example.com");
} 
```

创建状态历史对象的行是重新插入`Message`对象:(我认为这是因为`HasRequired(x=>x.Message)`映射中的东西。但不确定。请帮助解决这个问题。

# java - 如何将列表呈现为模板？

> ID：11168506
> 
> 赞同：5
> 
> 时间：2012-06-23T09:47:54.903
> 
> 标签：java, playframework, render, playframework-2.0

我想显示数据库中存在的所有用户。我想将所有用户放在一个列表中，然后将该列表呈现给一个模板。

然后我想遍历在`<p>`标签中显示每个用户的列表

```
For u in users:
 <p>u.username</p>
Endfor 
```

我想知道如何从数据库中检索用户。

```
Public static Result render_f() {
  List<String> users = ask in db;
return ok(template.render(users)); 
```

上述方法合理吗？如果没有，我能得到一些关于从这里去哪里的指示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T11:01:44.680

这是基本语法，通常在[文档](http://www.playframework.org/documentation/2.0.1/Home)和[示例中](https://github.com/playframework/Play20/tree/master/samples/java)显示（检查即`computer-database`示例

`app/models/User.java`

```
@Entity
public class User extends Model{

    @Id
    public Long id;
    public String name;

    public static Finder<Long,User> find = new Finder<Long,User>(Long.class, User.class);

} 
```

`app/controllers/Application.java`

```
Public static Result render_f() {
    List<User> users = User.find.all();
    return ok(template.render(users));
} 
```

`template.scala.html`

```
@(users: List[User])

@for(user <- users){
   <p>user.id</p>
   <p>user.name</p>
   etc...
} 
```

# php - XSLT 转义所有实体，除了

> ID：11168507
> 
> 赞同：0
> 
> 时间：2012-06-23T09:47:56.903
> 
> 标签：php, xml, xslt, xslt-1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:19:04.907

如果您将 post_content 放入属性值中，您将很难使用 XSLT 执行此操作，因为该属性将包含一个大长字符串。如果用户输入了无效的 HTML 会发生什么？

如果您将 xml 直接放入名为“post_content”的元素中，则可以使用以下模板：

```
<xsl:template match="post_content">
  <xsl:apply-templates mode="post" />
</xsl:template>

<xsl:template match="*" mode="post">
  <xsl:value-of select="concat('&lt;',name(),'&gt;')" />
  <xsl:apply-templates mode="post"/>
  <xsl:value-of select="concat('&lt;/',name(),'&gt;')" />
</xsl:template>

<xsl:template match="p | br | b | a" mode="post">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()" mode="post"/>
    </xsl:copy>
</xsl:template> 
```

这有点粗略，但基本上，这个想法是任何`p`, `br`,`b`或`a`元素都被最后一个模板拾取并“按原样”复制，其他任何东西都由`*`模板拾取，而不是使用实际元素，它改为输出转义文本。第一个模板只是为了确保其中的任何元素都使用“发布”模式进行处理，因此这些模板不会意外处理它们不应该处理的任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:52:26.897

XSLT 并不是真正为此而设计的，虽然您可以使用 XSLT 2.0 使用[正则表达式](http://www.xml.com/pub/a/2003/06/04/tr.html)来做到这一点，但这不是您正在使用的 XSLT 版本，并且 PHP 目前默认不使用 XSLT 2。你最好用你的后端编程语言（比如 PHP）来做。

我意识到你说你不想使用[`strip_tags`](http://php.net/manual/en/function.strip-tags.php)它有什么理由吗？它确实允许您指定可以保留的标签。

# python - 如何删除两个文件中相同的单词？

> ID：11168517
> 
> 赞同：1
> 
> 时间：2012-06-23T09:50:03.540
> 
> 标签：python, python-2.7

我有两个文本文件。

**file1.txt**有：

```
gedit
google chrome
git
vim
foo
bar 
```

**file2.txt**有：

```
firefox
svn
foo
vim 
```

如何编写一个脚本，在执行时（使用*file1.txt*和*file2.txt*作为参数）检查**每行**中的文本重复（我的意思是它应该逐行处理），删除两个文件中的重复文本。

所以经过处理后，*file1.txt*和*file2.txt*都应该有以下内容：

```
gedit
google chrome
git
bar
firefox
svn 
```

*请注意`foo`和`vim`已从两个文件中删除。*

有什么指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:25:00.323

```
with open('file1.txt','r+') as f1 ,open('file2.txt','r+') as f2:
    file1=set(x.strip() for x in f1 if x.strip())
    file2=set(x.strip() for x in f2 if x.strip())
    newfile=file1.symmetric_difference(file2) #symmetric difference removes those values which are present in both sets, and returns a new set.
    f2.truncate(0) #truncate the file to 0 bytes
    f1.truncate(0)
    f2.seek(0) # to push the cursor back to the starting pointing in the file.
    f1.seek(0)
    for x in newfile:
        f1.write(x+'\n')
        f2.write(x+'\n') 
```

**现在两个文件都包含：**

```
svn
git
firefox
gedit
google chrome
bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:59:39.937

您会将过滤后的文件另存为第三个文件吗？

无论如何，对每个文件进行 2 次循环，并将每个循环索引值与另一个进行比较，如果它们相等，则删除并相应地移动。伪代码：

```
Def func(File a, File b):
 for i in a: 
    for j in b:
      if a[i]==b[j]:
        copy and move
      endif
     endfor
  endfor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:00:45.917

如果我正确理解了您的问题，那应该很容易。

```
alist = []
for i in ifile1:
    alist.append(i)

for i in ifile2:
    if i in alist:
        alist.remove(i)
    else:
        alist.append(i)

for i in alist:
    print i 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T10:28:30.307

如果文件相当小以适合内存，这将完成这项工作：

```
with open("file1.txt", "r") as f1, open("file2.txt", "r") as f2:
    # create a set from the bigger file 
    result = set(x.strip() for x in f1.readlines())
    # remove duplicates or add unique values from 2nd file
    for line in f2:
        line = line.strip()
        if line in result:
            result.remove(line)
        else:
            result.add(line)
result = "\n".join(result)

# for debug, don't replace original files
with open("file1_out.txt", "w") as f1, open("file2_out.txt", "w") as f2:
    f1.write(result)
    f2.write(result)

# if not inside a function, free memory explicitly  
del result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T10:33:30.513

对于 Python 2.7+[`Counter`](http://docs.python.org/library/collections.html#counter-objects)的介绍

```
>>> from collections import Counter
>>> file_1 = ['gedit','google chrome','git','vim','foo','bar']
>>> file_2 = ['firefox','svn','foo','vim']
>>> de_dup = [i for i,c in Counter(file_1+file_2).itertimes() if c == 1]
>>> de_dup
['svn', 'git', 'bar', 'gedit', 'google chrome', 'firefox'] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-23T10:26:23.667

让我们从输入文件名开始：

```
files = ('raz.txt','dwa.txt') 
```

还有一些辅助功能。这是一个从文件中读取所有单词的生成器，

```
def read(filename):
    with open(filename) as f:
        for line in f:
            if len(line)>0:
                yield line.strip() 
```

这会将一个序列写入文件。

```
def write(filename, lines):
    with open(filename, 'w') as f:
        f.write('\n'.join(lines)) 
```

所以让我们创建两个生成器 - 每个输入文件一个

```
words = [read(filename) for filename in files] 
```

然后，让我们将生成器列表转换为集合列表

```
wordSets = map(set, words) 
```

现在我们有一个包含 2 个集合的列表，其中仅包含每个文件中的唯一单词。

让我们通过相交它们的集合来创建另一个包含所有输入文件中存在的单词的集合：

```
commonWords = set.intersection(*wordSets) 
```

以及重写的时间。

```
for filename in files: 
```

由于我们想保存到完全相同的文件，不幸的是，我们需要先将其全部内容读入内存，然后再从那里写入。（如果您希望在不同文件中输出，则不必缓冲文件。

让我们创建一个阅读器生成器，然后通过包装将其全部读取到内存中`list()`：

```
 lines = list(read(filename)) 
```

然后按顺序将单词写回给定文件，但前提是它们不在 commonWords

```
 write(filename, (word for word in lines if word not in commonWords)) 
```

* * *

输入：

raz.txt

```
gedit
google chrome
git
vim
foo
bar 
```

dwa.txt

```
firefox
svn
foo
vim 
```

输出：

raz.txt

```
gedit
google chrome
git
bar 
```

dwa.txt

```
firefox
svn 
```

重复从两者中删除。

# mysql - MySQL：我应该将表中的所有列都编入索引吗？

> ID：11168518
> 
> 赞同：5
> 
> 时间：2012-06-23T09:50:04.680
> 
> 标签：mysql, sql, indexing

我有一个数据透视表，当然每一行都将包含在查询中：

```
mysql> select * from blog_posts as bp 
       join blog_joins as bj 
       on bj.post_id=1 
       and bj.taxonomy_id=10
       and bj.type = 1; 
```

这是我的表结构：

![](../Images/9dd59406712cd532c8d01f285fe8db45.png)

是否建议为每一列建立索引？如果不是，为什么以及您会推荐什么？

```
mysql > alter table blog_joins add index pid (post_id);
mysql > alter table blog_joins add index tid (taxonomy_id);
mysql > alter table blog_joins add index tp (type); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T09:53:32.413

对于该特定查询，您可能会受益于多列索引：

```
alter table blog_joins add index pid_tid_tp (post_id,taxonomy_id,type); 
```

我建议分析您的代码。尝试将真实数据添加到您的测试数据库并尝试一些不同的索引。用于`EXPLAIN`查看 MySQL 实际用于每个查询的索引。

完成测试后，删除所有未使用的索引，因为虽然索引可以加快查询速度，但它们也会减慢对表的修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T09:57:41.517

您需要所有 3 列的索引

```
create index bjind on blog_joins (post_id, taxonomy_id, `type`); 
```

# c - Fscanf 还是 Fgets？逐行读取文件

> ID：11168519
> 
> 赞同：8
> 
> 时间：2012-06-23T09:50:13.140
> 
> 标签：c, fgets, scanf

我必须用 C 编写一个程序来读取包含多行文本的文件，每行包含两个变量：一个数字 (%f) 和一个字符串：

```
EX: file.txt
============
24.0 Torino
26.0 Milano
27.2 Milano
26.0 Torino
28.0 Torino
29.4 Milano 
```

有我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char *argv[])
{
    int r, line = 0, found = 0;
    float temp, t_tot = 0;
    char loc[32];

    FILE *fp;

    fp = fopen(argv[1], "r");

    if (fp == NULL)
    {
        printf ("Error opening the file\n\n'");
        exit(EXIT_FAILURE);
    }

    if (argc == 3)
    {
        r = fscanf(fp, "%f %s\n", &temp, loc);

        while (r != EOF)
        {
            line++;

            if (r == 2)
            {
                if(strcmp(argv[2], loc) == 0)
                {
                    t_tot += temp;
                    found++;
                }
            }
            else
                printf ("Error, line %d in wrong format!\n\n", line);
        }

        printf ("The average temperature in %s is: %.1f\n\n", argv[2], (t_tot/found);
    }

} 
```

该程序需要阅读所有行并找到我写的城市`argv[2]`。它会告诉我那个城市的平均温度，如果文件中的一行格式错误，它会通知我。

该程序正在正确编译给我，但它没有在屏幕上输出任何内容......我该如何解决？在这种情况下使用是正确`fscanf`的还是更好`fgets`？

我是一名学生，所以请给我一个“学术”的方法来解决它:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T10:25:09.093

有几件事。

首先，你必须使用 fclose()。
其次，您的代码需要 fscan() 文件中的每一行。不仅在 while() 循环之前，而且在每个 while 循环内，您都必须 fscan() 进行下一次迭代。
第三，您不是在计算平均温度，而是在计算找到的所有温度的总和。通过在最后一个 printf() 中将“t_tot”更改为“(t_tot / found)”来解决此问题。

最后，我不确定你为什么没有得到任何输出。你的输入就像“myprogram file.txt Milano”对吗？为我工作。无论如何，这是您的（编辑过的）代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char *argv[])
{
    int r, line = 0, found = 0;
    float temp, t_tot = 0;
    char loc[32];

    FILE *fp;
    fp = fopen(argv[1], "r");

    if (fp == NULL)
    {
        printf ("Error opening the file\n\n'");
        exit(EXIT_FAILURE);
    } else {

        if (argc == 3)
        {
            r = fscanf(fp, "%f %s\n", &temp, loc);
            while (r != EOF)
            {
                line++;
                if (r == 2)
                {
                    if(strcmp(argv[2], loc) == 0)
                    {
                        t_tot += temp;
                        found++;
                    }
                }
                else
                    printf ("Error, line %d in wrong format!\n\n", line);
                r = fscanf(fp, "%f %s\n", &temp, loc);
            }
            printf ("The average temperature in %s is: %.1f\n\n", argv[2], (t_tot / found));
        }

    fclose(fp);

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T10:05:18.180

您的代码不会`fscanf`像应有的那样在循环中调用：读取完成一次，然后如果文件为空，程序要么立即存在，要么无限循环。

您应该在循环`fscanf`内移动调用。`while`一种典型的编码方式是将赋值放在循环头中，如下所示：

```
while ((r = fscanf(fp, "%f %s\n", &temp, loc)) != EOF) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T10:13:57.877

您必须将 fscanf 行放在 while 循环内

```
 while (1)
    {
        r = fscanf(fp, "%f %s\n", &temp, loc);
        if( r == EOF ) 
           break;
        .........................
    } 
```

最后关闭文件

如果您使用 fgets 更改如下

```
 char s[256];
  while( fgets( s, 256, fp) != NULL )
  {
     sscanf( s, "%f %s", &temp, loc);
     .............
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T10:12:14.097

像这样修改代码......只需在while语句中放入另一个fscanf。

```
if (argc == 3)
{
 r = fscanf(fp, "%f %s\n", &temp, loc);
  while(r != EOF )

    {
        r = fscanf(fp, "%f %s\n", &temp, loc);  
        line++;

        if (r == 2)
        {
            if(strcmp(argv[2], loc) == 0)
            {
                t_tot += temp;
                found++;
            }
        }
        else
            printf ("Error, line %d in wrong format!\n\n", line);
    }

    printf ("The average temperature in %s is: %.1f\n\n", argv[2], t_tot);
}

} 
```

# delphi - 如果 Delphi 库使用 Random，是否应该避免调用 Randomize 本身？

> ID：11168522
> 
> 赞同：4
> 
> 时间：2012-06-23T09:50:19.177
> 
> 标签：delphi, random

从文档中：

> 不要将循环中对 Randomize 的调用与对 Random 函数的调用结合使用。通常，在对 Random 的所有调用之前，**仅调用一次Randomize。**

*（我强调“只有一次”）*

最佳实践问题：

如果 Delphi 库使用`Random`，它是否应该只记录初始化调用的要求`Randomize`，并将 Randomize 的调用留给库的用户？

或者图书馆应该负责初始化，比如

```
if System.RandSeed = 0 then Randomize; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T10:13:15.620

在我看来，这完全取决于您图书馆的结构和目的。

如果用户永远不会看到随机调用，那么我建议让库始终对其进行初始化。没有必要将其放入文档中。

另一方面，如果用户实际上通过使用您的库（我猜这是您的库的工作方式）直接调用 Random 或它的某个包装器，那么用户将（应该）知道他正在使用某种随机 -需要初始化的生成函数，因为大多数语言中的随机序列实际上是基于种子的伪随机序列。

可能是用户需要对随机序列进行多次初始化，或者他/她可能会对只初始化一次感到满意。这完全取决于用户的需求。

我不会强迫它，而是让用户可以使用 Randomize 调用，并可能让用户有可能告诉库要么处理初始化，要么把它留给他/她。在这种情况下，所有内容都应记录在案。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T14:33:19.407

如果您不确定，请始终调用 randomize()。
让代码依赖于它被调用的事实比依赖于它*未被*调用的事实要好。

这是因为`random`和`randomize`对您的应用程序来说是全局的，您无法确定其他单元或代码段是否在某个时候调用了 randomize()。

拥有这些全局函数很方便，但它并不是一个真正干净的设计。TRandomizer 类可能更好，您可以在其中为特定范围设置种子，而不会影响应用程序的其余部分。

我想这是 DOS 时代的遗留物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T11:09:43.017

您始终可以为库初始化例程提供布尔参数，让用户选择调用或不调用库中的 Randomize()。还值得注意的是，自 Delphi XE(?) RTL 源以来，Randomize() 被多次调用。

您可以使用自定义 RNG - 例如，您可以[使用 XorShift 拉动您的随机数](http://delphitools.info/2011/12/13/pimp-your-random-numbers-with-xorshift/)。即使是简单的 XorShift 似乎也比 Delphi 内部的伪 RNG 更好：|

# php - PHP，排序，sort_flags

> ID：11168523
> 
> 赞同：5
> 
> 时间：2012-06-23T09:50:41.407
> 
> 标签：php, sorting, flags

我正在`sort_flags`这个[页面](http://php.net/manual/en/function.sort.php)上学习 PHP 手册。

而且我不明白这些标志中的每一个代表什么区别。

只有 6 个标志，有人可以帮我理解它们之间的区别。也许有一些例子。我将非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T10:43:16.373

用于测试的数组：

```
$toSort = array(2, 1, "img1", "img2", "img10", 1.5, "3.14", "2.72"); 
```

注意`3.14 & 2.72`是字符串。

使用`SORT_REGULAR`标志（正常比较项目）：

```
Array
(
    [0] => 2.72
    [1] => 3.14
    [2] => img1
    [3] => img10
    [4] => img2
    [5] => 1
    [6] => 1.5
    [7] => 2
) 
```

使用`SORT_NUMERIC`标志（以数字方式比较项目，因此`3.14`排序为数字而不是字符串）：

```
Array
(
    [0] => img10
    [1] => img1
    [2] => img2
    [3] => 1
    [4] => 1.5
    [5] => 2
    [6] => 2.72
    [7] => 3.14
) 
```

使用`SORT_STRING`标志（`SORT_LOCALE_STRING`工作方式类似，但取决于当前的语言环境，所有值都被视为字符串）：

```
Array
(
    [0] => 1
    [1] => 1.5
    [2] => 2
    [3] => 2.72
    [4] => 3.14
    [5] => img1
    [6] => img10
    [7] => img2
) 
```

使用`SORT_NATURAL`标志（注意`img*`字符串的顺序，很*自然*）：

```
Array
(
    [0] => 1
    [1] => 1.5
    [2] => 2
    [3] => 2.72
    [4] => 3.14
    [5] => img1
    [6] => img2
    [7] => img10
) 
```

`SORT_FLAG_CASE`可以与`SORT_STRING`或`SORT_NATURAL`进行不区分大小写的排序结合使用，例如：

```
// works like SORT_NATURAL but is case-insensitive
sort($toSort, SORT_NATURAL | SORT_FLAG_CASE); 
```

# asp.net - 如何制作 100% 宽度的 asp.net 菜单

> ID：11168528
> 
> 赞同：4
> 
> 时间：2012-06-23T09:51:33.683
> 
> 标签：asp.net

我正在构建一个 asp.net 网站，我需要一个水平的 asp 菜单作为全屏宽度，每个项目有 10% 的宽度。

请提出一个解决方案，因为当我将菜单宽度设置为 100% 并将`li`宽度设置为 10% 时，它不是全宽。

但是，当我将菜单宽度设置为 1280（我的分辨率）并将`li`宽度设置为 128 时，它工作正常。方法的问题不是每个人都有相同分辨率的 asp.net 菜单的 Html 代码：

```
<div>
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" 
                EnableTheming="False" EnableViewState="False" 
                IncludeStyleBlock="False" Orientation="Horizontal" Width="1280px">
                <Items>
                        <asp:MenuItem Text="HOME" Value="ADD CITY" NavigateUrl="~/Content.aspx"></asp:MenuItem>
                        <asp:MenuItem NavigateUrl="~/addcity.aspx" Text="NEW CITY" Value="ADD CITY">
                        </asp:MenuItem>
                        <asp:MenuItem Text="NEW DATA" Value="SUBMIT DATA" NavigateUrl="~/adddata.aspx"></asp:MenuItem>
                        <asp:MenuItem Text="SHOPING" Value="SHOPING">
                        </asp:MenuItem>
                        <asp:MenuItem Text="OFFERS" Value="OFFERS"></asp:MenuItem>
                        <asp:MenuItem Text="BUSINESS" Value="BUSINESS"></asp:MenuItem>
                        <asp:MenuItem Text="CLASSIFIED" Value="CLASSIFIED"></asp:MenuItem>
                        <asp:MenuItem Text="EDUCATION" Value="EDUCATION"></asp:MenuItem>
                        <asp:MenuItem Text="ISSUES" Value="ISSUES"></asp:MenuItem>
                        <asp:MenuItem Text="SERVICES" Value="SERVICES"></asp:MenuItem>
                </Items>
            </asp:Menu>
        </div> 
```

我试图使其格式正确。现在请帮忙​​。

这是我的CSS

```
 {
    div.menu
    {
        margin:0px 0px 0px 0px;
        padding: 0px 0px 0px 0px;
        min-width:100%;
    }

    div.menu ul
    {
        margin:0px 0px 0px 0px;
        list-style: none;
        margin: 0px;
        padding: 0px;
        min-width:100%;
    }

    div.menu ul li a
    {
        background-color:Black;
        border: 0px Gray solid;
        color: White;
        display:table-cell;
        padding: 10px 10px;
        text-decoration:none;
        margin:0px 0px 0px 0px;

    }
    div.menu li
    {
        text-align:center;
    }

    div.menu ul li a:hover
    {
        background-color: #B5B5B5;
        color: Black;
        text-decoration: none;
    }

    div.menu ul li a:active
    {
        background-color: Gray;
        color: Black;
        text-decoration: none;
    }
    div.menu ul li .selected
    {
        background-color: #646464;
        color: Black;
        text-decoration: none;
    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:57:58.120

您可以像这样定义一个 Css 类：

```
.Menu
{  
  width:100%; 
}

.Menu ul li
{

    width:10%;
} 
```

之后将菜单控件的以下属性设置为 aspx 中的 CSS 类的名称。

```
CssClass="Menu" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T06:23:57.500

我知道现在回答这个问题已经很晚了，但可能仍然有人想知道答案。我对这个问题的解决方案很简单，适用于两级菜单：

```
 ul.level1 {
    width:100% !important;

}
    .level1 li {
        width:10%;
    }
ul.level2 {
    width:100% !important;
}
    .level2 li {
        width:100%;
    } 
```

请注意，`!important`用于否决菜单生成的内联 CSS

# java - 我更新了java并且eclipse不起作用

> ID：11168529
> 
> 赞同：24
> 
> 时间：2012-06-23T09:51:56.887
> 
> 标签：java, eclipse, ide

我今天 23.06.2012 更新了我的 JRE，之后日食将不再开始。当我双击启动 Eclipse 时，启动画面看起来像相机闪光灯，然后什么也没有发生。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-04-17T21:19:23.413

这对我有用：删除行：

```
-vmargs
-Dosgi.requiredJavaVersion=1.5 
```

添加这两行：

```
-vm
C:\Program Files\Java\jdk1.7.0_03\bin\javaw.exe 
```

编辑路径以匹配您的安装。ini 文件一般存在于`$ECLIPSE_HOME/eclipse.ini` [Eclipse ini 文件中](https://wiki.eclipse.org/Eclipse.ini)

注意：您需要更改 Windows 安全设置才能获得访问权限。我建议您不要在记事本中编辑此类文件（使用记事本++）。在编辑之前备份文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-23T11:00:22.630

我刚刚将这一行添加到 eclipse.ini 文件中

```
-vm
C:\Program Files\Java\jdk1.7.0_03\bin\javaw.exe 
```

[我博客上的解决方案](http://mobappsdevnotes.blogspot.com/2012/06/i-updated-java-and-eclipse-does-not.html) 现在运行成功。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T09:57:46.153

检查路径中是否添加了 java\bin 路径，并且在 eclipse 安装文件夹中，有一个名为 eclipse.ini 的文件，并检查是否添加了 vmargs，如下所示。

```
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx1024m 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-12T20:04:17.197

验证您是否安装了与 Eclipse 不同的 JDK/JRE 版本。如果你安装了 64 位的 JDK 版本，而你的 Eclipse 版本是 32 位的，它就不能工作。他们必须是平等的。

要验证您的 java 版本是什么，请在命令行窗口中键入：

```
java -d64 -version 
```

如果出现：“Error: This Java instance does not support a 64-bit JVM. Please install the desired version.”，说明你的java版本是32位。

要验证您的 Eclipse 版本是什么，请参阅[这篇文章](https://stackoverflow.com/questions/5103366/how-to-find-out-if-an-installed-eclipse-is-32-or-64-bit-version)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-25T16:03:04.807

从 java 更新后，我遇到了同样的挑战。在网上搜索后。我使用了这个简单的解决方案。找到你的eclipse安装方向。我的在 C:\Users\adefemi\eclipse\jee-neon\eclipse 下

然后打开ecliipse.ini，到C:/Program Files/Java/jre1.8.0_144/bin这一行

相应地更改版本名称。例如我以前是 C:/Program Files/Java/jre1.8.0_121/bin

这就是我所要做的，日食又开始打开了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-22T09:25:42.547

正确的方法是替换以下行：

```
-vmargs
-Dosgi.requiredJavaVersion=1.5 
```

有以下两行：

```
-vm
C:\Program Files\java\jdk1.8.0_102\bin\javaw.exe 
```

您必须编辑路径以匹配您的安装。

即使这还不够。您必须从工作区中删除“.metadata”文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-23T10:27:32.437

检查您的 JAVA_HOME 环境变量。它是否指向新位置。另请参阅由于崩溃而生成的日志文件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-19T06:08:10.480

如果遇到 Eclipse 有关 java 的问题，请在您的机器上手动安装 Java ( [http://java.com/en/download/manual.jsp](http://java.com/en/download/manual.jsp) )。

如果您使用的是 64 位机器，那么您需要将 java 安装到`c:\program files\java (Default Path)`而不是`c:\program files (x86)\java`.

设置环境变量路径为`c:\program files\java\bin;`

这将解决您的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-24T16:24:48.753

在您的机器上安装 Java 更新后，编辑该`eclipse.ini`文件以更新最新的 jdk 位置。

在 MacOS 中，

1.  右键单击 Eclipse 应用程序图标。
2.  单击`Show Package Contents`。
3.  去`Contents/Eclipse`。
4.  打开`eclipse.ini`文件。
5.  编辑`-vm /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/bin`指向最新的。
6.  保存并关闭`eclipse.ini`。

现在启动 Eclipse 应用程序并修复错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-13T10:52:57.293

使用最新的 JAVA 更新工具。

假设您通过[http://java.com/en/download/installed8.jsp](http://java.com/en/download/installed8.jsp)进行了更新，然后您只是通过 Java 的更新过程跑下来，接下来是 Java 的更新过程，然后打开 Eclipse，您在这里遇到了同样的问题.

要解决此问题，请转到 Windows 的环境变量并检查“路径”变量，您可能会注意到 Java 更新过程添加了一个类似这样的条目“C:\ProgramData\Oracle\Java\javapath”删除它并添加“JAVA_HOME”如果你有一个或你的 Java 的位置。另请注意，您必须在“路径”环境的开头输入。

这发生在我身上，删除添加的 Java 更新条目解决了问题，并在 eclipse.ini 中添加了 Java 的 -vm 和路径。

{抱歉没有截图证明}

# graphics - Ocaml 的 Graphics.open_graph 不起作用

> ID：11168532
> 
> 赞同：1
> 
> 时间：2012-06-23T09:52:54.630
> 
> 标签：graphics, ocaml

我正在尝试按照[ocaml 手册](http://caml.inria.fr/pub/docs/manual-ocaml/manual039.html)绘制一些东西。但这是来自 Ocaml 顶层的奇怪回应。有人知道为什么吗？谢谢。

```
# #load "graphics.cma";;
# Graphics.open_graph "foo:0";;
_X11TransSocketINETConnect() can't get address for foo:6000: nodename nor servname provided, or not known
Exception: Graphics.Graphic_failure "Cannot open display foo:0". 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T11:17:47.963

我使用`Graphics.open_graph " 600x400"`，它的工作原理。请注意分辨率规范前的空格。

至于为什么`foo:0`会或不会起作用，这不是 OCaml 特定的，而是关于 X11 服务器的。您可能不需要，因此也不想使用这种专门的功能（在另一个显示器上打开一个窗口）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:08:00.080

[foo](https://secure.wikimedia.org/wikipedia/en/wiki/Foo)术语是一种常用方法来指定应由用户替换以匹配本地环境的示例部分。在您的情况下，您可能想阅读下面的 3 行并打开默认显示：

> Graphics.open_graph ""
> 
> > 连接到默认显示并使用默认几何图形创建一个窗口。

# html - 如何在不同的浏览器中调整相同分辨率的应用程序？

> ID：11168534
> 
> 赞同：-3
> 
> 时间：2012-06-23T09:53:19.420
> 
> 标签：html, css

我正在使用 html 和 css 技术开发应用程序。当我在不同的浏览器中查看应用程序时，我没有得到正确的输出。所以，请任何人都可以告诉我如何在不同的浏览器中以相同的分辨率调整应用程序......

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style type="text/css">
 body{
     width:100%;
  margin:0;
padding:header-<length> 0 footer-<length> 0;
overflow:hidden;
 }
 div#header{
    background-image:url(abc.jpg);

  position:fixed;
  top:0;
  left:0;
  width:110%;
  height:20%;
 }
 div#footer{
     background-image:url(mnp.png);
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:5%;
 }
 @media screen{
  body>div#header{
   position:absolute;
  }
  body>div#footer{
     margin-left:16%;
     margin-right:17%;
     width:65%;
     color:#666;
     position:absolute;
  }
 }
 * html body{
  overflow:hidden;
 } 
 * html div#content{
  height:100%;
  overflow:auto;
 }
#menu{
    position:absolute;

    top:20%;
    width:100%;
    height:5.78%;
    }

#footermenu ul,li
{
    display:inline-block;

}
a#items:hover 
{
    background-image:url(hover.png);
    color:#FFFFFF;
}
ul,li
{
    display:inline;
    /*padding:0%;*/
    padding-left:.5%;
    }
    #list
    {
        position:absolute;
        top:25%;
        margin-left:13.7%;
        }
a:link
{
    text-decoration:none;
    color:black;
    }
a#footeritems:link
{
    text-decoration:none;
    color:#666;

    }

</style>
</head>

<body>
<div id="header"></div>
<div id="menu" style="background-image:url('menu.png');"><img src="logo.png" style="float:right;margin-right:14%;margin-top:-7.8%"  /><img src="search.png" style="float:right;margin-right:-28%;margin-top:.3%;" />
<div id="list">
<ul>
<a href="#" id="items"><li>HOME</li></a>
<a href="#" id="items"><li>FORUM</li></a>
<a href="#" id="items"><li>MARKETS</li></a>
<a href="#" id="items"><li>NEWS</li></a>
<a href="#" id="items"><li>SERVICES</li></a>
<a href="#" id="items"><li>ABOUT</li></a>
<a href="#" id="items"><li>LOGIN</li></a>
</ul>
</div>
</div>

<div id="content"> </div>
<div id="footer">
  <div id="footeConten" style="float:left; padding-bottom:10%; padding-left:45px; font-size:12px;"><p> "Powered by beginners" </p></div>
<div id="footerlist" style="float:right; padding-top:11px; font-size:12px;">
<ul>
<a href="#" id="footeritems"><li>Sitemap</li></a>|<a href="#" id="footeritems"><li>Help</li></a>|<a href="#" id="footeritems"><li>Disclaimer</li></a>|<a href="#" id="footeritems"><li>Privacy statements</li></a>|<a href="#" id="footeritems"><li>Terms fo use</li></a>|<a href="#" id="footeritems"><li>Contact</li></a>
</ul>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:08:29.683

最好以百分比使用所有 css 数量。例如，在为表格提供宽度时，提供 as`width: 10%;`而不是 as `width: 100px;`。

但我想，每个不同的浏览器总会有所不同......因为每个浏览器都有自己的处理 html 和 css 内容的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:00:52.127

没有任何例子很难说。如果您还没有这样做，请尝试[normalize.css 。](http://necolas.github.com/normalize.css/ "规范化.css")

# android - RadioGroup 无法正常工作

> ID：11168538
> 
> 赞同：3
> 
> 时间：2012-06-23T09:53:43.290
> 
> 标签：android, android-layout, radio-group, android-event

我想给用户四个选择，第一个和第二个选择在一行，第三个和第四个选择在另一行。我的问题是当应用程序启动时，我可以选择多个选项，但我不希望这样。这是我的 xml 布局：

```
<RadioGroup
        android:id="@+id/rgAnswerQuestionChoices"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/rAnswerQuestonChoic1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:visibility="invisible" />

            <RadioButton
                android:id="@+id/rAnswerQuestionChoice2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:visibility="invisible" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/rAnswerQuestionChoice3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:visibility="invisible" />

            <RadioButton
                android:id="@+id/rAnswerQuestionChoice4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="RadioButton"
                android:visibility="invisible" />
        </LinearLayout>
    </RadioGroup> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T10:04:15.040

如果您在`RadioButtons`和 父级之间放置其他布局`Radiogroup`（就像您对那些 所做的那样`LinearLayouts`），那么互斥将不再起作用。

要将它们`RadioButtons`放在一个两行表中，您可以自己制作您想要的`RadioGroup`位置，或者您可以尝试通过让两个表现得像一个来模拟该布局（例如，[具有两列的 RadioGroup 有十个 RadioButtons](https://stackoverflow.com/questions/10425569/radiogroup-with-two-columns-which-have-ten-radiobuttons)）。`RadioButtons``RadioGroups`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-13T09:37:26.643

我知道为时已晚，但我将其发布给在 android 中遇到此问题的任何人。如果您在 android 中使用，除了没有层次结构深度的确切孩子之外`RadioGroup`，您不能放置任何您想要的地方。因此，如果您想将其放入或在网格中管理它，按钮的行为不像它们属于该组（如果用户检查组中的另一个，它们将保持选中状态）。`RadioButtons``RadioGroup``RadioButtons``LinearLayout``RadioButton`

### 我的解决方案

我写了一个名为的类`RadioGroupCheckListener.java`，并简单地使用这行代码来声明一个组：

```
RadioGroupCheckListener.makeGroup(radioButton1, radioButton2, radioButton3, radioButton4); 
```

你可以`RadioGroupCheckListener.java`在我的 github [RadioGroupCheckListener中找到](https://github.com/farzinlize/RadioGroupCheckListener)

```
import android.widget.CompoundButton;

public class RadioGroupCheckListener implements CompoundButton.OnCheckedChangeListener {

    private CompoundButton[] allies;

    /**
     * public generator - indicate allies
     * @param allies all other buttons in the same RadioGroup
     */
    public RadioGroupCheckListener(CompoundButton... allies){
        this.allies = allies;
    }

    /**
     * listener for a button to turn other allies unchecked when it turn checked
     * @param buttonView change check occur with this button
     * @param isChecked result of changing
     */
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if(isChecked){
            for (CompoundButton aly : allies) {
                aly.setChecked(false);
            }
        }
    }

    /**
     * inner private function to remove one element from Buttons array
     * @param buttons all the buttons in RadioGroup
     * @param me the index that we want to remove from array
     * @return an array of CompoundButtons except the index of me
     */
    private static CompoundButton[] exceptMe(CompoundButton[] buttons, int me){
        CompoundButton[] result = new CompoundButton[buttons.length-1];
        for(int i=0,j=0;i<buttons.length;i++){
            if(i==me){
                continue;
            }
            result[j]=buttons[i];
            j++;
        }
        return result;
    }

    /**
     * static function to create a RadioGroup
     * if a button turn to checked state all other buttons is group turn unchecked
     * @param buttons the buttons that we want to act like RadioGroup
     */
    public static void makeGroup(CompoundButton... buttons){
        for(int i=0;i<buttons.length;i++){
            buttons[i].setOnCheckedChangeListener(new RadioGroupCheckListener(exceptMe(buttons, i)));
        }
    }
} 
```

# php - PHP Minify 在子目录中崩溃 - WAMP

> ID：11168540
> 
> 赞同：0
> 
> 时间：2012-06-23T09:54:10.510
> 
> 标签：php, apache, wamp, minify

[我按照此页面](http://code.google.com/p/minify/wiki/AlternateFileLayouts)上列出的 PHP Minify 说明使用子目录，但它只是在我的测试 URL 处返回 400 bad request 错误。关于如何解决这个问题的任何想法或线索？

**我遵循的步骤**

1.  将 min 文件夹相对于我的“演示站点”根目录
2.  [按照说明页面](http://code.google.com/p/minify/wiki/AlternateFileLayouts)上的指示在下面添加了代码片段。
3.  运行 URL 测试，返回 400 错误请求错误。

**更多信息**

服务器：Wamp PHP v5.3

服务器上的位置：var/www/demo-site

给出 400 错误的 URL：[http://localhost/demo-site/min/f=min/quick-test.js](http://example.com)

代码放在 config.php

```
// Set the document root to be the path of the "site root"
$min_documentRoot = substr(__FILE__, 0, -15);

// Set $sitePrefix to the path of the site from the webserver's real docroot
list($sitePrefix) = explode('/min/index.php', $_SERVER['SCRIPT_NAME'], 2);

// Prepend $sitePrefix to the rewritten URIs in CSS files
$min_symlinks['//' . ltrim($sitePrefix, '/')] = $min_documentRoot; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:04:12.210

在我正在使用的 Minify 版本中，您必须通过搜索找到以下行（如下面的代码示例所示）并将它们替换为 config.php。只需将此代码复制并粘贴到 config.php 中，一切都会搞砸。这是出乎意料的，因为在撰写本文时的文档几乎说复制并粘贴代码片段......

```
// Search for...
$min_documentRoot = '';
// Replace with...
$min_documentRoot = pathinfo(pathinfo(__FILE__, PATHINFO_DIRNAME), PATHINFO_DIRNAME);

// Search for...
$min_symlinks = array();
// Replace with...
list($sitePrefix) = explode('/min/index.php', $_SERVER['SCRIPT_NAME'], 2); 
$min_symlinks['//' . ltrim($sitePrefix, '/')] = $min_documentRoot; 
```

# eclipse - 部署到 App Engine 时出错

> ID：11168542
> 
> 赞同：1
> 
> 时间：2012-06-23T09:54:22.127
> 
> 标签：eclipse, google-app-engine, gwt, google-eclipse-plugin

我有一个 GWT 应用程序，它广泛使用代码拆分和国际化，因此生成许多单独的文件 (1000+)。我想使用 Google Plugin for Eclipse 将我的 GWT 应用程序部署到 App Engine，但是当我尝试时，我在 Eclipse 控制台上收到以下错误：

```
Deploying:
    Uploading 1187 files.
     on backend null.
java.io.IOException: Error writing to server

Debugging information may be found in C:\Users\Chania\AppData\Local\Temp\appengine-deploy3688011582342735160.log

Contents of appengine-deploy3688011582342735160.log:
Unable to update:
java.io.IOException: Error writing to server
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1491)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1485)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:318)
    at com.google.appengine.tools.admin.AbstractServerConnection.send1(AbstractServerConnection.java:277)
    at com.google.appengine.tools.admin.AbstractServerConnection.send(AbstractServerConnection.java:245)
    at com.google.appengine.tools.admin.AbstractServerConnection.post(AbstractServerConnection.java:211)
    at com.google.appengine.tools.admin.AppVersionUpload.send(AppVersionUpload.java:611)
    at com.google.appengine.tools.admin.AppVersionUpload.access$300(AppVersionUpload.java:33)
    at com.google.appengine.tools.admin.AppVersionUpload$UploadBatcher.addToBatch(AppVersionUpload.java:910)
    at com.google.appengine.tools.admin.AppVersionUpload.uploadFile(AppVersionUpload.java:510)
    at com.google.appengine.tools.admin.AppVersionUpload.doUpload(AppVersionUpload.java:129)
    at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:328)
    at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:52)
    at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:400)
    at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.io.IOException: Error writing to server
    at sun.net.www.protocol.http.HttpURLConnection.writeRequests(HttpURLConnection.java:578)
    at sun.net.www.protocol.http.HttpURLConnection.writeRequests(HttpURLConnection.java:590)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1193)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
    at com.google.appengine.tools.admin.AbstractServerConnection.connect(AbstractServerConnection.java:131)
    at com.google.appengine.tools.admin.AbstractServerConnection.send1(AbstractServerConnection.java:275)
    ... 13 more 
```

有没有人知道什么可能去了南方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:46:15.257

[UnzipperServlet](https://github.com/gvaish/gae-utils)可用于在上传所有静态文件之前对其进行压缩。因此，您无需上传数百个静态文件，而是上传单个 zip 文件。

UnzipperServlet 是专门为解决 GAE 的“文件过多”问题而创建的。

**编辑：**似乎文件限制已从 1000 提高到 3000 个文件。所以你可能会忽略我的“解决方案”。

# cron - 运行 cron 作业会在寻找匹配的 ``' 时创建一个错误的意外 EOF

> ID：11168544
> 
> 赞同：10
> 
> 时间：2012-06-23T09:54:32.637
> 
> 标签：cron, crontab, cron-task

我可以看到这是“常见”错误，但在我的情况下找不到解决方案......

运行 crontab 作业：

```
expr `date +%W` % 2 > /dev/null && curl https://mysite.com/myscript 
```

它会导致错误：

```
/bin/sh: -c: line 0: unexpected EOF while looking for matching ``'
/bin/sh: -c: line 1: syntax error: unexpected end of file 
```

你能帮我如何避免它们吗？非常感谢您！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-22T16:44:45.013

你必须逃避这个`%`角色。`man 5 crontab`说：

```
 Percent-signs (%) in the command, unless  escaped  with  backslash  (\),
   will be changed  into  newline  characters, and all data after the first %
   will be sent to the command as standard input. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T17:35:04.517

尝试转义`%`并且不要使用反引号来包含`date`-command。请附上`$()`：

```
expr $(date +\%W) % 2 > /dev/null && curl https://mysite.com/myscript 
```

或者

```
expr $(date +\%W % 2) > /dev/null && curl https://mysite.com/myscript 
```

# php - PHP，通过网址发布变量

> ID：11168546
> 
> 赞同：0
> 
> 时间：2012-06-23T09:55:48.717
> 
> 标签：php, parsing

```
<?php
    echo "<a href='display_emp.php?employee_id=$rs['emp_id']; onClick=\"return confirm('Are you  that you` `want to DELETE this Data?')\" ><FONT COLOR='#F00'>Click To Delete</FONT></a>";
?> 
```

`error: Parse error: parse error, expecting T_STRING or T_VARIABLE or T_NUM_STRING'`

我是PHP新手，谁能教我如何解决这个错误？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:58:59.633

尝试类似：

```
echo "<a href='display_emp.php?employee_id=".$rs['emp_id']."' onClick='return confirm(\"Are you  that you want to DELETE this Data?\")' ><FONT COLOR='#F00'>Click To Delete</FONT></a>"; 
```

让我说：那是你在那里使用的一些可怕的 html...FONT...真的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:05:35.013

只需删除 emp_id ($rs[emp_id]) 周围的引号

```
echo "<a href='display_emp.php?employee_id=$rs[emp_id]; onClick=\"return confirm('Are you that you want to DELETE this Data?')\" ><FONT COLOR='#F00'>Click To Delete</FONT></a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:58:08.990

您在字符串中使用双引号 (")，这会使字符串过早结束并导致错误。

```
onClick=\"return 
```

那是你的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T09:59:58.203

这应该有效：

```
<?php
echo "<a href=\"display_emp.php?employee_id=" . $rs['emp_id'] . "\" onClick=\"return confirm('Are you  that you want to DELETE this Data?');\"><FONT COLOR=\"#FF0000\">Click To Delete</FONT></a>";
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T10:02:22.160

当你放置一个带有字母索引的数组变量时，你不应该使用另一个引号。

在这里，这个是正确的：

```
echo "<a href='display_emp.php?employee_id=$rs[emp_id];' onClick=\"return confirm('Are you  that you` `want to DELETE this Data?')\" ><FONT COLOR='#F00'>Click To Delete</FONT></a>"; 
```

或如 Sammaye 建议的那样，连接字符串的不同部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T10:02:50.477

这是解决方案

```
$test = $rs['emp_id'];
$msg = "Are you  that you want to DELETE this Data?";
echo "<a href=display_emp.php?employee_id=".$test." onClick='return confirm(\"".$msg."\")' ><FONT COLOR='#F00'>Click To Delete</FONT></a>"; 
```

# c# - 在 Windows Mobile 6.5 中禁用 Internet

> ID：11168548
> 
> 赞同：2
> 
> 时间：2012-06-23T09:56:23.193
> 
> 标签：c#, windows-mobile

我需要以编程方式禁用网络连接。

这在 Windows Mobile 6.5 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:44:31.287

查看[SystemState](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.status.systemstate_properties.aspx)变量。您可以从中读取、连接事件并对其进行设置。

定义一个`SystemState`变量，例如`ncs`：

```
 SystemState ncs= new SystemState(SystemProperty.ConnectionsCount, false);
  ncs.Changed += new ChangeEventHandler(network_Changed); 
```

现在，处理事件：

```
void network_Changed(object sender, ChangeEventArgs args) {
  int connections = (int)args.NewValue;
  Console.WriteLine(connections);
} 
```

一个简单的 Microsoft 示例是[>>HERE<<](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.status.systemstate.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:47:41.223

你可以试试[IOCTL_NDIS_UNBIND_ADAPTER](http://msdn.microsoft.com/en-us/library/ee482250.aspx)

# javascript - 小胡子，使用外部模板

> ID：11168554
> 
> 赞同：6
> 
> 时间：2012-06-23T09:57:47.413
> 
> 标签：javascript, jquery, mustache

我正在阅读有关使用 Mustache.js 进行模板化的内容。我不明白的是如何放置模板。我不会将它们放在同一个文件中。

```
$.get('test.htm', function(templates) {
    // Fetch the <script /> block from the loaded external
    // template file which contains our greetings template.
    var template = $(templates).filter('#tpl-greeting').html();
    $('body').append(Mustache.render(template, templateData));
});

//test.htm 
<script id="tpl-greeting" type="text/html">
<dl>
    <dt>Name</dt>
    <dd>{{name}}</dd>
    <dt>Time</dt>
    <dd>{{timeNow}}</dd>
</dl>
</script> 
```

我必须创建一个控制器来返回我的模板还是可以引用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T13:31:51.257

有几种方法可以做到这一点。

1.  如果您使用像 PHP 这样的服务器端脚本语言，只需将它们包含`.mst`在 JS 中的单独文件中（扩展名可能是您实际想要的任何内容）。例如， `var _templateName = <?= JS::mustache('content/templateName.mst') ?>;`。因此，当实际渲染 JS 时，它会使用标记进行渲染，但代码仍然是可维护的。此外，通过这种方法，如果您使用的是 CDN，您的网站将受益于缓存的 JS。
2.  `$.get`另一种方法是使用任何 jQuery 的、等方法加载外部 HTML 文件`$.getJSON`。[这里给出了](http://jonnyreeves.co.uk/2012/using-external-templates-with-mustachejs-and-jquery/)更详细的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:22:51.443

You may put templates in separate files like you do with CSS and JS. You can use [Chevron](https://github.com/surdu/jquery-chevron) to load external templates from files like so:

You add in you template a link to your template file:

```
<link href="path/to/template.mustache" rel="template" id="templateName"/> 
```

Then, in you JS you can render your template like so:

```
$("#templateName").Chevron("render", {name: "Slim Shady"}, function(result){
    // do something with 'result'
    // 'result' will contain the result of rendering the template
    // (in this case 'result' will contain: My name is Slim Shady)
}); 
```

The docs of Chevron will give more examples

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-23T05:51:06.653

2018 年使用 fetch 而不是 jQuery 的替代方案：

```
fetch('template.mst')
.then(response => response.text())
.then(template => {
    Mustache.parse(template);
    var output = Mustache.render(template, data);
    return document.getElementById('target').innerHTML = output;
}).catch(error => console.log('Unable to get the template: ', error.message)); 
```

# c# - 在不创建位图对象的情况下获取图像宽度和高度

> ID：11168558
> 
> 赞同：1
> 
> 时间：2012-06-23T09:58:24.450
> 
> 标签：c#, .net, image, gdi+

我想获取图像的高度和宽度。目前我正在做的是

```
Bitmap b=new Bitmap(path);
w=b.width;h=b.height; 
```

有没有更好的方法来做到这一点，而无需创建和处置 Bitmap 对象，从而不浪费内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:07:25.307

从下面的参考资料看来，.NET 2.0 类库中没有它的功能。下面的代码块应该可以工作，

目前没有错误检查或任何其他验证，它通常不会从图像中读取超过 6K，具体取决于 EXIF 数据量。

## 示例代码

```
using System;
using System.IO;

namespace Test
{

    class Program
    {

        static bool GetJpegDimension(
            string fileName,
            out int width,
            out int height)
        {

            width = height = 0;
            bool found = false;
            bool eof = false;

            FileStream stream = new FileStream(
                fileName,
                FileMode.Open,
                FileAccess.Read);

            BinaryReader reader = new BinaryReader(stream);

            while (!found || eof)
            {

                // read 0xFF and the type
                reader.ReadByte();
                byte type = reader.ReadByte();

                // get length
                int len = 0;
                switch (type)
                {
                    // start and end of the image
                    case 0xD8: 
                    case 0xD9: 
                        len = 0;
                        break;

                    // restart interval
                    case 0xDD: 
                        len = 2;
                        break;

                    // the next two bytes is the length
                    default: 
                        int lenHi = reader.ReadByte();
                        int lenLo = reader.ReadByte();
                        len = (lenHi << 8 | lenLo) - 2;
                        break;
                }

                // EOF?
                if (type == 0xD9)
                    eof = true;

                // process the data
                if (len > 0)
                {

                    // read the data
                    byte[] data = reader.ReadBytes(len);

                    // this is what we are looking for
                    if (type == 0xC0)
                    {
                        width = data[1] << 8 | data[2];
                        height = data[3] << 8 | data[4];
                        found = true;
                    }

                }

            }

            reader.Close();
            stream.Close();

            return found;

        }

        static void Main(string[] args)
        {
            foreach (string file in Directory.GetFiles(args[0]))
            {
                int w, h;
                GetJpegDimension(file, out w, out h);
                System.Console.WriteLine(file + ": " + w + " x " + h);
            }
        }

    }
} 
```

参考：[在不读取整个文件的情况下获取图像尺寸](https://stackoverflow.com/a/113323/468718)

## 更新

[读取图像标题以获取宽度和高度](http://www.codeproject.com/Articles/35978/Reading-Image-Headers-to-Get-Width-and-Height)适用于 JPG、GIF、PNG 和 BMP 图像类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-13T11:19:38.760

这可能会有所帮助，使用 System.Drawing 命名空间

```
 System.Drawing.Image objImage = System.Drawing.Image.FromFile(Filepath);
            imageWidth = objImage.Width;
            imageHeight = objImage.Height; 
```

# java-me - j2me 转到下一个 midlet

> ID：11168562
> 
> 赞同：1
> 
> 时间：2012-06-23T09:58:53.657
> 
> 标签：java-me, midp, lcdui

我有 2 个 midlet A 和 B。当 midlet A 中的按钮单击时如何转到 midlet B？

我需要在用户注册时显示注册屏幕。

```
 public void commandAction(Command cmd, Item item) {
        System.out.println(cmd.getCommandType());
        if (cmd.getCommandType() == 2)
        {}
        else
        { SignupMidlet signupScreen = new SignupMidlet();
        Display.getDisplay(signupScreen).setCurrent(signupScreen);
        }
    } 
```

我的 midlet B 构造函数：

```
public class SignupMidlet extends MIDlet {

    public SignupMidlet(MainMidlet mc) {
        Form a=new Form("a");
        Display.getDisplay(mc).setCurrent(a);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:31:42.010

您正在寻找的是[JSR 211](http://www.jcp.org/en/jsr/detail?id=211)。它并非在所有 J2ME 手机上都可用，但通常首先实现的部分是允许从一个 MIDlet 切换到另一个 MIDlet 的部分。

但是，从您发布的代码来看，您似乎将扩展 MIDlet 类与实现 Displayable 接口混淆了。

一个 MIDlet 可以从一个 Displayable 切换到另一个。

如果您想共享代码以便一个 MIDlet 可以访问为另一个 MIDlet 编写的代码，您应该将代码拆分到一个单独的 jar 中，不幸的是，在编译时将 jar 包含在两个 MIDlet 中。

# android - 在android中创建动态xml

> ID：11168567
> 
> 赞同：0
> 
> 时间：2012-06-23T09:59:38.757
> 
> 标签：android, xml

在我的应用程序中，我希望动态创建 xml，因为根据某些输入数据，我需要不同的元素。所以我从这个例子开始，创建一个 TextView 和 Spinner 的简单动态 xml。问题是我在模拟器中看不到任何东西。

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout top = new LinearLayout(this);
        top.setOrientation(LinearLayout.VERTICAL);

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.HORIZONTAL);
        top.addView(ll);

        TextView tv = new TextView(this);
        tv.setText("Dynamic layouts ftw!");
        ll.addView(tv);

        String signs[]={"+","-"};
        Spinner spinner = new Spinner(this);
        ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, signs);
        spinner.setAdapter(spinnerArrayAdapter);

        ll.addView(spinner, new LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.WRAP_CONTENT,
        LinearLayout.LayoutParams.WRAP_CONTENT));

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:05:30.923

你不打电话`setContentView(yourRootLayout);`这就是为什么你在屏幕上什么都没有

# jquery - Twitter boostrap / jQuery警报触发两次-我做错了什么

> ID：11168568
> 
> 赞同：1
> 
> 时间：2012-06-23T09:59:39.863
> 
> 标签：jquery, twitter-bootstrap, ruby-on-rails-3.2

我正在构建我的第一个 Ruby on Rails 应用程序（不是教程），它是旧 VB6 应用程序的一个端口。我有一个文本框，在退出时（失去焦点）需要计算一个人的年龄，如果 text_box 不为空，则需要禁用一些单选按钮。我可以让它工作，但是当我对此进行原型设计时，我收到了一条警告消息。当 text_box 失去焦点时，警报会触发两次。我做错了什么，和/或是什么导致了这种情况。

虽然我可以删除警报，但我担心如果我调用脚本来计算人员年龄，那么它也会触发两次。

这是我的代码：

部分*(_person_registration.html.erb)*

```
<fieldset>
  <legend id="age_calcs">Age</legend>

      <div class="span12">
        <div class="span1">

          <%= text_field_tag :age %>
          <%= label_tag :age, "Age" %>

        </div>
        <div class="span10 form-inline">

          <%= f.radio_button :age_unit, "years"  %> <!-- #, :checked => true, :disabled => true -->
          <%= f.label :age_unit_years, "Years" %>
          <%= f.radio_button :age_unit, "months" %>
          <%= f.label :age_unit_months, "Months" %>

        </div>
      </div>
      <div class="span12">
        <div class="form-inline">
<!--         <fieldset> -->
            <%= label_tag :age_group, "Age Group" %>
            <%= f.radio_button(:age_group, 0, :checked => true ) %>
            <%= f.label(:age_group_adult, "Adult", :value => '0' ) %>          
            <%= f.radio_button(:age_group, 1) %>
            <%= f.label(:age_group_child, "Child", :value => '1') %>
            <%= f.radio_button(:age_group, 2) %>
            <%= f.label(:age_group_infant, "Infant", :value => '2' ) %>

<!--         </fieldset> -->

        </div>
      </div>
</fieldset> 
```

*人.js*

```
$(document).ready(function() {
    $("input[type='text']#age").bind('focusout', function() {
        {alert ('Age calculation - Not yet delivered')}
        if ($(this).val().length != 0 ) {
            $('input#patient_patient_detail_attributes_age_group_0').attr('disabled', true);
            $('input#patient_patient_detail_attributes_age_group_1').attr('disabled', '');
            $('input#patient_patient_detail_attributes_age_group_2').attr('disabled', '');      
            $('input#patient_patient_detail_attributes_age_group_child_3').attr('disabled', 'true');
            // alert ('Age calculations');
        }
        else {
            // alert ('Else portion');
            $('input#patient_patient_detail_attributes_age_group_0').attr('disabled', false);
            $('input#patient_patient_detail_attributes_age_group_1').attr('disabled', false);
            $('input#patient_patient_detail_attributes_age_group_2').attr('disabled', false);       
        }
        event.preventDefault();
    })
}); 
```

另外，当焦点丢失时我可以调用 ruby​​ 方法来执行年龄计算，还是必须在 javascript 中进行计算？

# php - 检查链接是否有效，如果没有直观地识别为已损坏

> ID：11168570
> 
> 赞同：3
> 
> 时间：2012-06-23T09:59:45.007
> 
> 标签：php, mysql, hyperlink, file-sharing, link-checking

我正在开展一个项目，该项目列出了来自 Oron、filepost、depositfiles 等公司的文件共享 url，该项目向我的网络中已识别的内容所有者和权利持有者报告了受版权保护的材料的共享。

为了更好地改进服务，该服务目前位于从 MySQL 数据库填充的表中，并在 php 中内置了一些过滤器，我希望能够识别已停止运行的链接。

我的想法是，当从 MySQL 数据库中检索数据时，将检查下载 URL 列条目（文件或文件主机页面的 url）以查看它们是否链接到允许用户开始下载的实际文件共享页面进程，如果他们正在工作并提供下载文件的能力，他们应该留下，链接文本或单元格颜色变为绿色，如果文件站点显示文件未找到或类似，链接文本或单元格背景颜色应变为红色。

目前没有活动或非活动链接的快速和简单的视觉表示。

我根据是否收到 404 错误对 url 进行了简单的验证，但很快意识到，鉴于这些网站没有 404 或重定向，它们将无法正常工作，它们会更改动态生成的页面以说明文件不可用或文件已被删除等。

我还合并了一个使用第三方文件共享链接检查服务的链接检查器脚本，但这需要手动检查和手动更新数据库。

我还检查了是否可以在页面上找到特定的字段或单词，但是给定的网站范围和网站上使用的更广泛的术语已被证明是准确的，并且难以在所有链接上实施.

如果可以根据活动状态过滤掉 url，这也会很有帮助。我猜如果颜色变化是由链接类或单元类样式管理的，我可以根据类过滤列，例如：链接死或链接活动。我想我可以做到这一点，因此不一定需要对基于类的过滤提供最后一点帮助。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:54:35.770

由于您要检查的网站是由不同的人创建的，因此不可能有一个单一的线路来检测大量网站上的链接是否损坏。

我建议您为每个站点创建一个简单的函数，以检测该特定站点的链接是否损坏。当您要检查链接时，您将根据域名决定在外部站点的 HTML 上运行哪个函数。

You can use [parse_url()](http://php.net/manual/en/function.parse-url.php) to extract the domain/host from the file links:

```
// Get your url from the database. Here I'll just set it:
$file_url_from_database = 'http://example.com/link/to/file?var=1&hello=world#file'

$parsed_link = parse_url($file_url_from_database);
$domain = $parsed_link['host']; // $domain now equals 'example.com' 
```

You could store the function names in an associative array and call them that way:

```
function check_domain_com(){ ... }
function check_example_com(){ ... }

$link_checkers = array();
$link_checkers['domain.com'] = 'check_domain_com';
$link_checkers['example.com'] = 'check_example_com'; 
```

or store the functions in the array (PHP >=5.3).

```
$link_checkers = array();
$link_checkers['domain.com'] = function(){ ... };
$link_checkers['example.com'] = function(){ ... }; 
```

and call these with

```
if(isset($link_checkers[$domain]))
    // call the function stored under the index 'example.com'
    call_user_func($link_checkers[$domain]); 
else
    throw( new Exception("I don't know how to check the domain $domain") ); 
```

Alternatively you could just use a bunch of if statements

```
if($domain == 'domain.com')
    check_domain_com();
else if($domain == 'example.com')
    check_example_com(); // this function is called 
```

The functions could return a boolean (true or false; 0 or 1) to use, or call another function themselves if needed (for example to add an extra CSS class to broken links).

I did something similar recently, though I was fetching metadata for stock photography from multiple sites. I used an abstract class because I had a few functions to run for each site.

As a side note, it would be wise to store the last checked date in your database and **limit the checking rate** to something like 24 or 48 hours (or further apart depending on your needs).

* * *

**Edit to clarify implementation a little:**

As making HTTP requests to other websites is potentially very slow, you will want to check and update link statuses independently of page loads. You could achieve this like this:

*   A script could run every 12 hours and check all links from the database that were last checked more than 24 hours ago. For each 'old' link, it would update the `active` and `last_checked` columns in your database appropriately.
*   When someone requests a page, your script would read from the `active` column in your database instead of downloading the remote page to check every time.
*   (extra thought) When a new link is submitted, it is checked immediately in the script, or added to a queue to be checked by the server as soon as possible.

As people can easily click a link to check it's current state, it would be redundant to allow them to click a button to check from your page (nothing against the idea though).

Note that the potentially resource-heavy update-all script should *not* be executable (accessible) via web.

# php - Postgres 兼容的 Joomla 组件

> ID：11168573
> 
> 赞同：1
> 
> 时间：2012-06-23T10:00:04.097
> 
> 标签：php, postgresql, joomla

由于 Joomla 2.5 原生支持 PostgreSQL，我们非常赞成那个。当我为我们的系统开发一个组件时，我想知道使它兼容的确切语义是什么？

对于 MySQL，我的安装脚本位于`admin/sql/install.mysql.utf8.sql`. PostgreSQL 会是什么？我也可以使用`#_`数据库前缀吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T01:22:42.997

额外的数据库支持旨在尽可能透明，以便您可以保持大部分代码相同。

如果您一直在使用 Joomla! 的 JDatabase 类，您应该在 PHP 中构建这样的查询：

```
 /* (example php may not actually work)
       Get the factory DB object */
    $db = JFactory::getDbo();
    // Get a new JDatabaseQuery object
    $query = $db->getQuery(true);
    // Build our query...
    $query->select('id');
    $query->from('#__mycomponents_table');
    $query->where('id=99');
    // Attach the query to the DB object
    $db->setQuery($query);
    // Run it and check the result...
    if (!$db->loadResult()){...} 
```

正如您已经确定的那样，安装/卸载 SQL 脚本之类的东西需要特定于数据库。这也意味着对您的清单 XML 进行小更新......这是一个示例。

```
<install>
    <sql>
        <file charset="utf8" driver="mysql">sql/install.mysql.sql</file>
        <file charset="utf8" driver="postgresql">sql/install.postgresql.sql</file>
    </sql>
</install> 
```

我建议查看`com_finder`代码，因为它确实有一个为 Postgres 安装/卸载 SQL 的特定示例。

# java - 适用于 Android 的媒体文件格式转换器 API

> ID：11168574
> 
> 赞同：2
> 
> 时间：2012-06-23T10:00:12.363
> 
> 标签：java, android, converter, codec

我正在寻找可以将媒体文件转换为任何其他格式的 API，例如：- .3gp 到 java 中的 .avi。我四处搜索并遇到了 ffmpeg，但仍然不知道它是否可用于实现 android 项目的功能。

如果您可以分享有关您使用过的任何 API 的更多信息，那将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:33:50.397

它在较新的 API 中可用。

[http://developer.android.com/reference/android/media/MediaCodec.html](http://developer.android.com/reference/android/media/MediaCodec.html)

PS：如果你得到这个工作，让我知道，我有一个打算使用它的项目。

# php - 为什么md5仍然被广泛使用

> ID：11168575
> 
> 赞同：8
> 
> 时间：2012-06-23T10:00:33.277
> 
> 标签：php, md5, security, hash

首先，我应该说我对编程比较陌生，所以如果这是一个幼稚或愚蠢的问题，请对我温柔一点。

好的，所以我正在编写一个小应用程序，其中一部分将涉及散列用户密码。在研究了执行此操作的最佳方法之后，md5 作为建议出现，几乎与批评其使用的文章中出现的次数一样多。

替代品是 SHA-1 等，它们更强大且不太可能被破解。这很有意义。

言归正传：

1.  为什么 md5 仍然广泛用于散列
2.  我应该自动为哈希密码打折 md5，还是在特定用例中它的使用实际上比其他哈希机制更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T10:03:13.837

MD5 和 SHA-1 都不能用于散列密码。它们旨在快速计算，这正是您不想要的。如果人们使用这些散列算法来散列密码，很可能是因为他们不知道替代方案。

相反，您应该使用专门为此目的设计的[bcrypt之类的东西。](http://en.wikipedia.org/wiki/Bcrypt)它可以配置为您需要的难以计算。随着计算机变得更快，您可以在计算中添加更多轮次以使其花费更长的时间。这将减慢获取哈希值并尝试使用暴力破解或基于字典的攻击来获取密码的攻击者。

**有关的**

*   [如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:05:27.663

出于同样的原因`mysql_*`，使用函数，网络上的大多数资源和教程都已过时，导致新手程序员盲目使用它们（因为教程是这样说的！）。

我不怪新程序员，我怪教程制作者没有更新他们的教程。谷歌的搜索算法通常也会考虑年龄，并**在搜索结果中显示较旧的条目**。

至于替代方案，我相信马克拜尔斯说得比我好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:10:31.540

> 为什么 md5 仍然广泛用于散列？

它不是。甚至 Wordpress 几年前也放弃了它。并且 Wordpress 被广泛使用。

> 我应该自动打折它，还是在特定的用例中它的使用实际上比其他散列机制更好？

我不知道你的意思。使用适合密码散列的散列算法，您不必太担心。

*   [如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T10:11:55.203

在大多数情况下，MD5 仍然可以安全使用 [*]，只要您在加密之前使用良好的“盐”与实际密码混合即可。

除了暴力破解之外，还没有其他已知的方法来完成对 MD5 的“第一次预映像攻击”，即给定一个哈希值，找出原始密码是什么。

上面提到的“盐”对于确保您的加密密码不能在“彩虹表”或其他现有的“要消化的字符串”列表中轻松查找是必要的。

最近的链接密码泄露就是一个很好的例子，说明为什么盐很重要。他们未能对用户的密码进行加盐，因此许多密码都被简单地反转了，因为这些密码的哈希值已经被计算过（并且在许多情况下是通过谷歌找到的）。

你仍然不应该做的是让盐本身很容易确定。如果攻击者可以算出盐是什么，那么所有的赌注都没有了，因为这样弗洛里安发布的文章中描述的蛮力机制就会再次可用。一个好的盐应该是长的，你不应该为每个用户使用相同的盐。

迄今为止，在 MD5 本身中发现的唯一真正的弱点是生成一个新文件的方法，当您*已经知道原始文件的内容时，该*文件设法产生与另一个文件相同的 MD5 摘要。这被称为“第二次原像攻击”，在考虑使用散列算法进行密码加密时无关紧要。

综上所述，如果有更好的算法（SHA-2、bcrypt）可用，您不妨使用它！

[*] 不过，我不会将 MD5 用于与电子商务相关的任何事情！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T10:04:42.533

> 为什么 md5 仍然广泛用于散列

如果你想检查一个程序的有效性（md5 你的 ISO），这很好。有些人将它用于（不再）不应该用于的东西不应该是你关心的问题，而且是无法回答的:)

> 我应该自动打折它，还是在特定的用例中它的使用实际上比其他散列机制更好？

是的。如果您将其用于密码，请打折。你已经发现了弱点，但是看看@markbyers 是怎么说你*应该*使用的，例如 bcrypt

# extjs - sencha touch form - 单击提交时如何获取字段值

> ID：11168578
> 
> 赞同：0
> 
> 时间：2012-06-23T10:00:51.720
> 
> 标签：extjs

我是 sencha touch 的新手，我制作了一个简单的登录表单，它接受用户的用户名和密码。当我点击提交时，表单的字段值将以 JSON 格式在 javascript 警报中查看。我在视图应用程序中创建我的表单。这是我的代码：

```
var formPanel = Ext.define('GS.view.Login', {
    extend: 'Ext.form.Panel',
    xtype: 'loginform',

    requires: [
        'Ext.form.FieldSet'],

    config: {
        title: 'Login',
        iconCls: 'home',
        url: 'authenticate_page.php',
        items: [{
            xtype: 'fieldset',
            title: 'Login',

            items: [{
                xtype: 'textfield',
                name: 'txt_username',
                label: 'Username'
            }, {
                xtype: 'passwordfield',
                name: 'txt_password',
                label: 'Password'
            }]
        }, {
            xtype: 'button',
            text: 'Allow me in',
            ui: 'confirm',
            handler: function () {
                var values = this.getValues();
                alert(values);
            }
        }]
    }
}); 
```

我尝试了一些方法，但它不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T14:34:22.293

在你的按钮`handler`

```
var values = this.getValues();
alert(values); 
```

指的`this`是您的按钮，当然您的按钮不包含任何表单值。

要获取表单值，请执行以下操作：

```
handler: function() {
    var values = this.up('form').getValues();
    //or:
    //var values = formPanel.getValues();
    console.log(values);
} 
```

查看 Ext.form.Panel[的文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.form.Panel)。它有足够的例子来指导你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T06:53:51.370

嗨，如果您想从特定字段中获取值意味着始终使用

```
 Ext.getCmp('Username').getValue(),   // id of the field

     Ext.getCmp('Password').getValue(), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T06:50:23.307

您需要为表单元素添加“id”

```
 items: [
                {
                    xtype: 'textfield',
                    name: 'txt_username',
                    label: 'Username',
                    id: 'Username'
                },
                {
                    xtype: 'passwordfield',
                    name: 'txt_password',
                    label: 'Password'
                    id: 'Password'
                }
        ] 
```

在此之后，您可以使用方法 Ext.get(id); 获取值

例如

```
Ext.get('Username')
Ext.get('Password') 
```

# jquery - jQuery 拖动选择，约束到元素，而不是典型的拖动框

> ID：11168580
> 
> 赞同：3
> 
> 时间：2012-06-23T10:00:54.623
> 
> 标签：jquery, drag-and-drop

我想使用拖动来选择功能，而不是选择屏幕上的一个正方形区域，然后选择该正方形内的任何内容，我想选择我最初的选择和我释放点击之间的任何元素。

这是最好的视觉解释。我**不想**这样做：

![我不想做的事](../Images/8f8be912e730d66a01552d11a14f6ec6.png)

相反，我想这样做：

![我想做的事](../Images/32d062a6d52299a1bc489d012c60577b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:12:18.777

如果您的框位于列表结构（ul 或 ol）内，您可以检测鼠标拖过的第一个和最后一个框，并使用它们的标识符作为第一个和最后一个索引来遍历集合，以便在必要时突出显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:20:17.167

After the previous failed attempt I've now come up with a working solution. It would appear that jQuery UI selectable is not suitable, as it uses that rectangular selection, so I've had to roll my own.

In the example below (see [jsFiddle](http://jsfiddle.net/nSk9t/3/) for full code), the selectable elements are `a.date`. These elements should have `position: relative` set.

Firstly, I append a child element with class `.drag-proxy`. This is positioned absolutely, and covers the same area as the child. It's got no content so it sits transparently above.

These proxy elements are made draggable and droppable.

When the element is dragged and dropped onto another element, it is moved back to its starting point (so that subsequent selections work).

Then we cycle through all the proxy elements, indentifying the elements in the selection range, and then setting a class on the parent `a.date` element.

```
$(function() {
  $('a.date').each(function() {
  $(this).append('<a href="' + $(this).attr('href') + '" class="drag-proxy" id="proxy_' + $(this).attr('id') + '"></a>');
  });

  var $currentlyDragged;

  $('.drag-proxy').draggable({
    start: function() {
      $currentlyDragged = $(this);
    },
    // Once drag has finished, return the drag-proxy to its original position
    stop: function() { 
      $(this).css('top', 0).css('left', 0);
      $currentlyDragged = null;
    }
  });

  $('.drag-proxy').droppable({
    over: function(e, ui) {
      var from_id = $currentlyDragged.attr('id');
      var to_id = $(this).attr('id');

      $('.date').removeClass('selected');

      var started = selecting = false;
      $('.drag-proxy').each(function() {
        var $this = $(this);
        var this_id = $this.attr('id');
        if (started === false && (this_id == from_id || this_id == to_id)) {
          selecting = true;
        }
        if (selecting) {
          $this.parent().addClass('selected');
          if (started === true && (this_id == from_id || this_id == to_id)) {
            selecting = false;
          }
        }
        if (started === false && (this_id == from_id || this_id == to_id)) {
          started = true;
        }
      });
    },

    drop: function(e, ui) {
      // do whatever you need to do once selection ends
    }
  });

});
​ 
```

See the [jsFiddle](http://jsfiddle.net/nSk9t/3/) for the full example.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:56:08.930

**请注意 - 这个答案是不正确的，但我将其保留，因为它显示了 jQuery UI 可选可以做的程度，以及为什么它不起作用。请参阅已接受的答案以获取自定义滚动的有效解决方案。**

感谢 Frédéric Hamidi 提供指向[该论坛主题](http://forum.jquery.com/topic/how-can-i-make-selectable-widget-work-with-continues-ranges)的指针，我已经解决了这个问题，如下所示。我在问题中没有提到的额外要求是可选元素必须位于多个容器中（最终这将是日历中的日期，包含在各个月份中）。

给定以下 HTML：

```
<div id="selectable">
  <div>
    <span id="a1">1</span>
    <span id="a2">2</span>
    <span id="a3">3</span>
    <span id="a4">4</span>
    <span id="a5">5</span>
    <span id="a6">6</span>
    <span id="a7">7</span>
    <span id="a8">8</span>
    <span id="a9">9</span>
    <span id="a10">10</span>
  </div>

  <div>
    <span id="b1">1</span>
    <span id="b2">2</span>
    <span id="b3">3</span>
    <span id="b4">4</span>
    <span id="b5">5</span>
    <span id="b6">6</span>
    <span id="b7">7</span>
    <span id="b8">8</span>
    <span id="b9">9</span>
    <span id="b10">10</span>
  </div>
</div> 
```

然后这个javascript解决了它。请注意，链接的帖子使用`slice(start, end)`，但由于我的多个容器要求，我不能这样做。所以我用 , 遍历了所有可排序的元素，并根据我们是否到达第一个元素和尚未到达最后一个元素进行`each()`切换。`selecting`

我设置`filter: 'span'`是为了防止其他子元素`#selectable`变得可选。

```
$(function() {
  var rangeSelecting = function(event, ui) {
    var start = $(".ui-selecting", this).first();
    var end = $(".ui-selecting", this).last();
    var selecting = false;
    $(this).find('span').removeClass("range-selecting").each(function() {
      var $this = $(this);
      var this_id = $this.attr('id');
      if (start.attr('id') === this_id) selecting = true;
      if (selecting) $this.addClass('range-selecting');
      if (end.attr('id') === this_id) selecting = false;
    });
  }
  $("#selectable").selectable({
    filter: 'span',
    selecting: rangeSelecting, 
    unselecting: rangeSelecting,
    stop: function(event, ui) { $(".range-selecting", this).addClass("ui-selected").removeClass("range-selecting"); }
  }); 
```

});​</p>

有关工作示例，请参阅此[jsfiddle 。](http://jsfiddle.net/3JUvV/)

# android - 使用 Phonegap 构建适用于 iOS 、 Android 和 Windows 平台的应用程序

> ID：11168581
> 
> 赞同：3
> 
> 时间：2012-06-23T10:01:16.723
> 
> 标签：android, ios, windows-phone-7, cordova

我们是 phonegap 新手，计划使用 phonegap 构建适用于 iOS、Android 和 Windows 平台的应用程序，

有以下问题，

1 -- 我相信 phonegap 框架会帮助开发者用 HTML/Javascript , CSS 编写代码，它可以在任何机器上编写

2 - 一旦我们有了基本的用户界面，或者几乎我们可以使用phonegap做的任何事情都完成了，将会有一些本地处理应该是特定于本地的，即使用Xcode for iOS，使用Ecllipse for Andoird等......

3 -- 在各种平台上运行Phonegap应用程序是否有任何兼容性，我听说如果设备浏览器不兼容HTML 5，phonegap应用程序可能无法运行，我可以在iPhone3上使用Phonegap应用程序吗，（第一个iOS版本可能是3）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T23:55:23.357

1.  PhoneGap 提供了一个 API（适用于每个平台）和 JavaScript 库，可在您的 HTML/JavaScript/CSS 与设备的本机功能之间架起一座桥梁。API 和 JavaScript 库实际上被调用`Cordova`（由于公司被收购并且 API 和库是开源的）。

2.  您将需要为 UI 使用 JavaScript / CSS 库 - 您正在构建一个 Web 应用程序。如果需要，您确实可以构建本机 UI 并为应用程序的另一部分启动 PhoneGap Web 应用程序，但这意味着您必须在每个平台上重复此 UI 并且没有自定义代码（我想，如果我是，请纠正我错误）你不能从 Web App 回到原生 UI。

3.  这取决于您的要求，如果您需要它在旧设备上运行，您可能会遇到问题。对于所有现代/最新的设备，您应该可以使用 HTML5（以及像 Sencha Touch 和 jQuery Mobile 这样的体面的 UI 库）。

如果您正在考虑使用该`PhoneGap Build`服务，您将失去在不同平台上自定义代码的灵活性，并且仅限于纯 Web App。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-23T11:34:57.167

1.  phonegap 是一个 javascript 库，它可以帮助您为任何平台构建应用程序，无需使用原生的东西，所有电话功能都可以在 phoneGap 中使用

2.  phoneGap 不适用于移动 UI，因为您可以使用 Sencha Touch 或 Jquery Mobile

3.  当您完成构建应用程序时，phonegap 正在提供构建服务，该服务将提供可安装的应用程序，例如用于 android .apk 文件

# jquery - 在悬停/单击时设置背景内部 div

> ID：11168582
> 
> 赞同：1
> 
> 时间：2012-06-23T10:01:18.197
> 
> 标签：jquery, html, css

我有两个 div：

```
<div class="outer">
    <div class="inner">Example</div>
</div> 
```

我有一个 jQuery 函数：

```
$(function(){
    $('.outer').mouseout(function () {
        $('.outer).attr("style", "background-color: white");
    });

    $('.outer').mouseover(function () {
        $('.outer).attr("style", "background-color: red");
    });

    $('.inner').mouseout(function () {
        $('.inner).attr("style", "background-color: white");
    });

    $('.inner').mouseover(function () {
        $('.inner).attr("style", "background-color: red");
    });
}); 
```

当我将鼠标悬停在“外部”上时，外部的背景是红色的（好！）。当我将内部悬停时，内部和外部都是红色的……不好。

这个想法也适用于点击事件。当我向 jQuery 函数添加一些单击功能并单击内部 div 时，脚本会单击内部和外部 div。

我只希望将一个 div 设置为红色，而不是在我将鼠标悬停在内部时都设置为红色。同样对于未来，我想将此功能用于点击事件。

我认为这真的很简单，但我无法以某种方式弄清楚:(

谁能帮我？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:04:45.753

我认为您正在寻找[`stopPropagation`](http://api.jquery.com/event.stopPropagation/)事件方法，它：

> 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

所以解决方案可以如下：

```
$(".inner").hover(function(e) {
    e.stopPropagation();
    $(this).attr("style", "background-color: red");
}, function(e) {
    e.stopPropagation();
    $(this).attr("style", "background-color: white");
}); 
```

**演示：http:** [//jsfiddle.net/TZjpT/](http://jsfiddle.net/TZjpT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:07:28.507

@Zoltan Toth：我是手动输入的，所以我可能忘记了一些引号 :)

对于所有其他人：我关闭了 stackoverflow，并且有一个网页可能会在后台解决该问题。我没有看到它......它解决了我的问题：

（元素 = 一个 div）

```
 $(element).bind("click", function (event) {
     $(this).attr("style", "background-color: red");
     event.stopPropagation();
 }); 
```

带来不便敬请谅解

# java - 位图大小超过模拟器上的 VM 预算错误，但设备上没有

> ID：11168583
> 
> 赞同：1
> 
> 时间：2012-06-23T10:01:19.163
> 
> 标签：java, android, memory, android-emulator

每当我在模拟器上测试时，我都会收到上述错误，但在我测试过的任何设备上都没有。谁能建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:26:39.970

您可能正在测试可能具有 32Mb 或更多堆大小内存的高端设备。模拟器可能正在使用 24Mb，这就是崩溃的原因。

转到 AVD（Android 虚拟设备）编辑器，并将“最大 VM 应用程序堆大小”添加到您的虚拟设备硬件属性中。将该值设置为 32Mb 并重新启动您的模拟器。

这应该足够了。

如果您想了解有关堆内存的更多信息，我建议您阅读[此](https://stackoverflow.com/questions/2298208/how-to-discover-memory-usage-of-my-application-in-android)问题。

# visual-studio - autoexp.dat 中简单 typedef 类型的可视化工具（将fourcc DWORD显示为字符）

> ID：11168585
> 
> 赞同：2
> 
> 时间：2012-06-23T10:01:47.353
> 
> 标签：visual-studio, typedef, visualizer, fourcc

我们在代码中使用了很多fourCC自定义类型，例如：

```
typedef unsigned int fourcc;
fourcc flag;
if (flag=='add') ...;
else if (flag=='del') ...;
etc... 
```

我们希望能够在 autoexp.dat 中添加一个可视化工具来将这些显示为四个字符。

不幸的是，autoexp.dat 的可视化工具似乎忽略了 typedef，并且不想触及基本类型（正如这里确认[的在 autoexp.dat 中创建一个简单的 VS2008 可视化工具（转换问题）](https://stackoverflow.com/questions/2584228/creating-a-simple-vs2008-visualizer-inside-autoexp-dat-problem-with-casting)）

是否有任何已知的解决方法，对代码的性能没有任何影响，能够在调试器中将这些fourcc视为字符？

# php - 在 PHP 中回显时，提交按钮在 Chrome 中有效，但在 Firefox 中无效

> ID：11168587
> 
> 赞同：0
> 
> 时间：2012-06-23T10:01:53.893
> 
> 标签：php, internet-explorer, firefox, google-chrome

我创建了一个登录和注册按钮，为它们分配了链接，但它们在 Firefox 和 IE 中都不起作用，但在 Chrome 和 Safari 中却很好。代码放在 php 中的 echo 中，以便它们仅在用户未登录时显示。

```
<form>
<?php if(!$videosite->CheckLogin())
{
echo('<a href="Login.php">
<input name="submit" type="submit" class="g-button g-button-green" value="Sign in"   width= 100% /></a>
<a href="register.php">
<input name="submit" type="submit" class="g-button g-button-red" value="Create an Account" width=100% /></a>');
}
else
{
?>
<a href="#"><input name="submit" type="submit" class="g-button g-button-submit" value="     <?php echo($videosite->UserFullName()); ?>" width=100% /></a>
<a href="logout.php"><input name="submit" type="submit" class="g-button g-button-white"    value="Logout" width=100% /></a>;
<?php 
}
?>
</form> 
```

当用户根据他们按下的按钮单击他们进入登录或注册页面的按钮时，Chrome 和 Safari 中会发生什么。在 Firefox 和 IE 的情况下，他们没有转到所需的页面，而是在登录时显示在 url- ***“http://localhost/project/?submit=Sign+in”***中！，类似于注册。

它有什么问题？为什么它不能在 IE 和 Firefox 中运行？如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:09:15.870

如果您希望用户进入登录/注册屏幕或只是删除输入元素并仅使用纯文本，请使用`type="button"`代替。`type="submit"`

如果元素当前在表单中，则删除元素周围的锚标记。如果您使用 type="submit"，则包装此元素的表单将被提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:08:05.307

`<input>`是一个**表单元素**，但您在表单之外使用它。

它应该如下所示：

```
<form action="login.php">
<input type="submit" name="submit" value="Sign in">
</form> 
```

或者，只需使用该`a`元素创建链接并按照您想要的方式设置样式...

```
<a href="login.php" class="..." style="...">Sign in</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:28:19.183

你编码： -

```
<input name="submit" type="submit" class="g-button g-button-green" value="Sign in"   width= 100% />; 
```

将其更改为：-

```
<input type ="button" class="g-button g-button-green" value="Sign in" width= 100% /> 
```

或者，只需更改为：-

```
<a href="Login.php"> LOGIN </a> 
```

# android - android设备屏幕左侧的textview中的文本被截断

> ID：11168598
> 
> 赞同：3
> 
> 时间：2012-06-23T10:03:25.457
> 
> 标签：android, textview

我在 android 设备（LG optimus P970）中遇到阿拉伯语文本问题，文本在设备左侧被截断，我尝试使用填充，减小 textview 的宽度......没有任何效果，什么我应该怎么做？

![在此处输入图像描述](../Images/ddb5f94cc03cc3e3e9ae11386aaf2a61.png)

```
And this is the layout :
             <?xml version="1.0" encoding="utf-8"?>
              <LinearLayout
              xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:background="@color/white" >

    <LinearLayout
android:layout_height="413dip"
android:layout_width="fill_parent"
android:orientation="vertical"
android:paddingTop="10dip"
android:paddingBottom="10dip"
android:paddingLeft="20dip"
android:paddingRight="20dip" 
android:id="@+id/details_page">

 <ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:scrollbars="vertical"
    android:paddingTop="10dip" 
    >

     <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/details_text_id"
        android:gravity="right"         
        android:paddingRight="10dip"
        android:scrollbars="vertical"
        android:lineSpacingExtra="8dp"
        android:textColor="@color/iqraa_green" 

        />

  </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T08:05:29.660

尝试让 textview 的宽度小于显示宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:20:04.623

我发现你的问题是 textview`android:gravity="right"`

试试下面的xml

```
 <?xml version="1.0" encoding="utf-8"?>
                  <LinearLayout
                  xmlns:android="http://schemas.android.com/apk/res/android"
                  android:orientation="vertical"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:background="@color/white" >

   <LinearLayout
    android:layout_height="413dip"
    android:layout_width="fill_parent"
    android:orientation="vertical"
    android:paddingTop="10dip"
    android:paddingBottom="10dip"
    android:paddingLeft="20dip"
    android:paddingRight="20dip" 
    android:id="@+id/details_page">

     <ScrollView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:scrollbars="vertical"
        android:paddingTop="10dip" 
        >

         <TextView 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/details_text_id"
            android:gravity="left"         
            android:paddingRight="10dip"
            android:scrollbars="vertical"
            android:lineSpacingExtra="8dp"
            android:textColor="@color/iqraa_green" 

            />

      </ScrollView> 
```

我将 textview 重力从右到左更改，如下面的代码：

```
android:gravity="right" 
```

代替

```
android:gravity="left" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T23:51:30.333

我知道这是几年后的事了，但是对于遇到这种情况的任何人，您都可以通过添加来做到这一点

```
android:scrollbarStyle="outsideOverlay" 
```

到你的 TextView

```
<TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/details_text_id"
        android:gravity="left"         
        android:paddingRight="10dip"
        android:scrollbars="vertical"
        android:lineSpacingExtra="8dp"
        android:textColor="@color/iqraa_green"
        android:scrollbarStyle="outsideOverlay" 

        /> 
```

这是因为样式告诉滚动条在填充之外绘制，而不是在内部绘制默认值。您也可以使用 outsideInset 样式。

更多[在这里](http://developer.android.com/reference/android/view/View.html#attr_android:scrollbarStyle)

# asp.net - 在 IIS 上安装后无法使用浏览器浏览 asp.net Web 服务 (.asmx)

> ID：11168599
> 
> 赞同：5
> 
> 时间：2012-06-23T10:03:27.003
> 
> 标签：asp.net, web-services

**什么**

我使用 .NET 框架 3.5 创建了一个非常简单的 asp.net Web 服务，当我使用单元测试对其进行测试时，它运行良好。现在我想将它托管在 IIS 上，为此我已经为它准备了一个**Web 设置**项目。

并添加了 Web 服务项目的内容文件和主要输出，在 iis 上安装和测试后。

**问题**

当我尝试使用浏览器运行 web 服务时，出现以下错误

***HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。***

**我试过什么？** 我尝试更改 IIS_Users 的安全权限以允许全部读写，尝试更改应用程序池版本，现在我正在尝试使用默认的 .NET Framework 4 版本。

**代码**我认为 web.config 是罪魁祸首，因此我将其粘贴在这里...

```
 <?xml version="1.0"?>
   <configuration>

  <connectionStrings>
    <add name="cString" connectionString ="Data Source=VRAKSH-YASSER;Initial Catalog=uGraphDB;Persist Security Info=True;User ID=sa;Password=data#123;MultipleActiveResultSets=True" />
  </connectionStrings>    

    <!--<configSections>
      <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
            <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
            <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
            <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          </sectionGroup>
        </sectionGroup>
      </sectionGroup>
    </configSections>-->  
    <appSettings/>
    <!--<connectionStrings/>-->
    <system.web>

        <compilation debug="true" >
          <assemblies>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
          </assemblies>
        </compilation>
    <!--
      The <authentication> section enables configuration 
      of the security authentication mode used by 
      ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows" />
    <!--
       The <customErrors> section enables configuration 
       of what to do if/when an unhandled error occurs 
       during the execution of a request. Specifically, 
       it enables developers to configure html error pages 
       to be displayed in place of a error stack trace.

       <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm" />
         <error statusCode="404" redirect="FileNotFound.htm" />
       </customErrors>
    -->
      <pages>
        <controls>
          <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
          <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </controls>
      </pages>

      <httpHandlers>
        <remove verb="*" path="*.asmx"/>
        <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
      </httpHandlers>
      <httpModules>
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </httpModules>
    </system.web>
    <system.codedom>
      <compilers>
        <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
                  type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
          <providerOption name="CompilerVersion" value="v3.5"/>
          <providerOption name="WarnAsError" value="false"/>
        </compiler>
      </compilers>
    </system.codedom>
    <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
    <system.webServer>
      <validation validateIntegratedModeConfiguration="false"/>
      <modules>
        <remove name="ScriptModule" />
        <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </modules>
      <handlers>
        <remove name="WebServiceHandlerFactory-Integrated"/>
        <remove name="ScriptHandlerFactory" />
        <remove name="ScriptHandlerFactoryAppServices" />
        <remove name="ScriptResource" />
        <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
             type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
             type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </handlers>
    </system.webServer>
    <runtime>
      <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
          <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
          <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
        <dependentAssembly>
          <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
          <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
      </assemblyBinding>
    </runtime>

</configuration> 
```

**浏览器截图**

![在此处输入图像描述](../Images/0e8a27e7f55e6b393139086c3003b939.png)

**IIS 版本**：Windows 7 上的 IIS 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:57:28.763

请参阅错误页面上的配置错误行。由于应用程序正在使用`WindowsAuthentication`，您的用户对部署应用程序的目录没有权限，请在您的配置中添加以下`<authentication>`标记，以拒绝匿名用户。

```
 <authorization>
     <deny users="?" /> 
     <allow users ="*" />
  </authorization> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:07:00.277

您是否尝试向**应用程序池用户**授予对该`c:\inetpub\wwwroot\DiciplaAdministration`文件夹的权限

显然它也可能与**App Pool用户**的密码有关，请仔细检查密码是否仍然有效

如果这不能解决您的问题，请尝试以下答案：

*   [如何解决 IIS7.0 上的“HTTP 错误 500.19 - 内部服务器错误”](https://stackoverflow.com/q/929131/1268570)

本文显示了您可能会收到此错误的几种情况：

[http://blogs.msdn.com/b/webtopics/archive/2010/03/08/troubleshooting-http-500-19-errors-in-iis-7.aspx](http://blogs.msdn.com/b/webtopics/archive/2010/03/08/troubleshooting-http-500-19-errors-in-iis-7.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:02:57.380

尝试禁用

WSUS（Windows 服务器更新服务）压缩。您可以通过在服务器上运行以下命令来禁用 WSUS 压缩

> %windir%\system32\inetsrv\appcmd.exe 设置配置-section:system.webServer/httpCompression /-[name='xpress']

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:45:38.417

不幸的是，不得不重新安装 IIS，然后再次安装 Web 服务，但是这次我需要启用目录浏览，并且 Web 服务现在可以正常工作了！

# android - Android Listview 项目选择

> ID：11168603
> 
> 赞同：2
> 
> 时间：2012-06-23T10:04:10.497
> 
> 标签：android

在 Listview 的适配器类中，我为每个列表项添加了 setOnClickListener 事件。但是每当我们点击列表项时，这些项都不会突出显示。如果我删除 setOnClickListener 事件，我将能够轻松地看到列表项选择。请告诉我，如何解决问题

在 listAdapter 的 getview 中，如果我添加这部分，listview 项目选择颜色将不会出现

```
holder.ContactNumber.setText(fitems.get(position).getContactName());

                convertView.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {

                        // TODO Auto-generated method stub

                        setSelectedItem(i);
                         Intent intent = 
                              new Intent(context, preview_screen.class);

                        context.startActivity(intent);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T10:13:21.557

在 re/drawable 文件夹中为您的列表视图项 row_selector.xml 创建一个选择器，将此选择器添加为您的背景 listview_item.xml 这是 android 使用的默认选择器，您可以自定义一个：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_pressed_yellow"
          android:state_pressed="true" />
    <item android:drawable="@drawable/button_focused_orange"
          android:state_focused="true" />
    <item android:drawable="@drawable/button_normal_green" />
</selector> 
```

使用 OnItemClickListener() 回调来处理列表视图项目上的点击事件

```
listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                Toast.makeText(getApplicationContext(),
                ""+position, Toast.LENGTH_SHORT).show();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:08:13.753

您必须使用 xml 文件为行设置背景...

[请参阅此示例](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

**可绘制->bg_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/white" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@color/blue" android:state_pressed="true" android:state_selected="false"/>
    <item android:drawable="@color/blue" android:state_pressed="true" android:state_selected="true"/>

</selector> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-21T09:21:32.833

```
 // ListView Item Click Listener
            listView.setOnItemClickListener(new OnItemClickListener() {

                  @Override
                  public void onItemClick(AdapterView<?> parent, View view,
                     int position, long id) {

                   // ListView Clicked item index
                   int itemPosition     = position;

                   // ListView Clicked item value
                   String  itemValue    = (String) listView.getItemAtPosition(position);

                    // Show Alert 
                    Toast.makeText(getApplicationContext(),
                      "Position :"+itemPosition+"  ListItem : " +itemValue , Toast.LENGTH_LONG)
                      .show();

                  }

             }); 
```

在列表视图侦听器中，您使用该[示例](http://androidexample.com/Create_A_Simple_Listview_-_Android_Example/index.php?view=article_discription&aid=65&aaid=90)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T10:20:14.833

给 convertView 一个 onClickListener 的想法不是 ListView 的工作方式。不要设置这个监听器。相反，将 onItemClickListener 或 onItemSelectListener （取决于您想要做什么）设置到列表视图并将代码放在那里。

# windows-phone-7 - 使用 MVVM 从 ListBox 中删除项目

> ID：11168607
> 
> 赞同：2
> 
> 时间：2012-06-23T10:04:30.517
> 
> 标签：windows-phone-7, mvvm, mvvm-light, windows-phone-7.1.1

我正在尝试从 ListBox 中删除一个项目。该命令已正确触发，并且该项目已从数据库中正确删除，但未刷新列表。

这是视图模型。我正在使用 MVVM Light 4.1

```
public class ViewAllViewModel : ViewModelBase
{
    public ViewAllViewModel()
    {
        NavigateToAddNew = new RelayCommand(() => NavigationController<Views>.Current.NavigateTo(Views.AddNew));
        Remove = new RelayCommand<int>(DeleteMeasure);

        using (var repository = App.ServiceLocator.Get<IRepository>())
        {
            Measures = new ObservableCollection<Measure>(repository.Measures);
        }
    }

    private void DeleteMeasure(int measureId)
    {
        Measure measure;

        using (IRepository repository = App.ServiceLocator.Get<IRepository>())
        {
            measure = repository.Measures.Single(m => m.Id == measureId);
            repository.Measures.Delete(measure);
            repository.SaveChanges();
        }

        measure = Measures.Single(m => m.Id == measureId);
        if (Measures.Remove(measure))
        {
            RaisePropertyChanged(() => Measures);
        }
    }

    public RelayCommand NavigateToAddNew { get; set; }
    public RelayCommand<int> Remove { get; set; }

    private ObservableCollection<Measure> _measures;
    public ObservableCollection<Measure> Measures
    {
        get { return _measures; }
        set { Set(() => Measures, ref _measures, value); }
    }
} 
```

谢谢您的帮助。

PS：我知道有类似的问题，但没有一个被接受的答案对我有用:(

**编辑 1** 这是我在 XAML 页面中用于将 ListBox 绑定到项目列表的代码：

```
<ListBox Grid.Row="1" DataContext="{Binding Path=Measures}" ItemsSource="{Binding}" /> 
```

这是 ViewModel 到主容器的绑定

```
<Grid DataContext="{Binding Source={StaticResource Locator}, Path=ViewAll}" x:Name="LayoutRoot" /> 
```

**编辑 2** 这是 ViewModel 的完整代码

```
public class ViewAllViewModel : ViewModelBase
{
    public ViewAllViewModel()
    {
        NavigateToAddNew = new RelayCommand(() => NavigationController<Views>.Current.NavigateTo(Views.AddNew));
        Remove = new RelayCommand<int>(DeleteMeasure);

        LoadMeasures();

        Messenger.Default.Register<PropertyChangedMessage<ObservableCollection<Measure>>>(this, message => LoadMeasures());
    }

    private void LoadMeasures()
    {
        using (var repository = App.ServiceLocator.Get<IRepository>())
        {
            Measures = new ObservableCollection<Measure>(repository.Measures.OrderByDescending(m => m.MeasureDate).ThenByDescending(m => m.Id).Take(20));
        }
    }

    private void DeleteMeasure(int measureId)
    {
        Measure measure;

        using (IRepository repository = App.ServiceLocator.Get<IRepository>())
        {
            measure = repository.Measures.Single(m => m.Id == measureId);
            repository.Measures.Delete(measure);
            repository.SaveChanges();
        }

        measure = Measures.Single(m => m.Id == measureId);
        Measures.Remove(measure);

        RaisePropertyChanged("LastMeasure", null, measure, true);
    }

    public RelayCommand NavigateToAddNew { get; set; }
    public RelayCommand<int> Remove { get; set; }

    private ObservableCollection<Measure> _measures;
    public ObservableCollection<Measure> Measures
    {
        get { return _measures; }
        set { Set(() => Measures, ref _measures, value); }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:23:34.987

我看不出有什么明显的错误。我只能建议尝试将您简化`ListBox`为：

```
<ListBox Grid.Row="1" ItemsSource="{Binding Path=Measures}" /> 
```

并删除调用的代码`RaisePropertyChanged(() => Measures);`（因为不需要它）。

如果这些都不起作用，我会测试看看如果你完全重置你的`Measures`财产会发生什么，如：

```
private void DeleteMeasure(int measureId)
{
    using (IRepository repository = App.ServiceLocator.Get<IRepository>())
    {
        var measure = repository.Measures.Single(m => m.Id == measureId);
        repository.Measures.Delete(measure);
        repository.SaveChanges();
    }

    Measures = repository.Measures;
} 
```

如果这导致 . 成功刷新`ListBox`，则意味着`ObservableCollection`.

# c# - c# web浏览器url更新

> ID：11168610
> 
> 赞同：-1
> 
> 时间：2012-06-23T10:04:47.210
> 
> 标签：c#, visual-studio-2010, browser

我在 C# 中创建了一个网络浏览器 ![在此处输入图像描述](../Images/1105d28e484b71b6cd9b4797ebfeb5b1.png)

这是我打开网络浏览器并输入谷歌时得到的。然后我在谷歌搜索结果是这样的 ![在此处输入图像描述](../Images/52fd1a1b9d6e1349bfffeecbadce1dfc.png)

但是地址栏中的 url 没有更新。当用户在我的网络浏览器中单击任何网站上的链接时如何更新地址栏 在第一张图片中，网址是 google.com 在第二张图片中，网址是[https://www.google.co.in/#hl= en&output=search&sclient=psy-ab](https://www.google.co.in/#hl=en&output=search&sclient=psy-ab)类似的东西，但它没有更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:09:44.253

`webBrowser1_Navigating`您必须使用事件使用 WebBrowserControl 的 URL 更新顶部的文本框。

```
private void webBrowser1_Navigating(object sender, WebBrowserNavigatingEventArgs e)
    {
      textbox1.text = webBrowser1.Url.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T20:43:34.440

Form_Load 必须包含以下内容：

```
private void Form1_Load(object sender, EventArgs e)
        {
            web = new WebBrowser();
            web.Navigated += web_Navigated;
        } 
```

这个功能：

```
private void web_Navigated(object sender, WebBrowserNavigatedEventArgs e)
        {
            textBox1.Text = web.Url.ToString();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:09:13.443

检查[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser_events](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser_events)。我认为您可以使用 Navigating 事件来检测用户何时开始搜索或导航到另一个页面。

# c# - 使用 ASP.NET 实体数据处理复杂关系

> ID：11168617
> 
> 赞同：0
> 
> 时间：2012-06-23T10:05:44.080
> 
> 标签：c#, asp.net, database, entity-framework

我的数据库中有一个复杂的关系。

```
Packages (packageID, package_name , .... )
VariantPackage (packageID, variantID)
Variant (variantID, variant_name, .... )
ProductVariant (variantID, productID)
Product (productID, product_name, .... ) 
```

（我认为您可以假设 ID 字段分别是 Primary 或 Foreign？）

实体框架优雅地接受了这一点，因为如果这样做：

```
Package newPackage = new Package()
{
 packageID = Guid.NewGuid()
 etc . . .
};

Variant newVariant = new Variant()
{
 variantID = Guid.NewGuid()
 etc . . .
}; 
```

在下面执行此行时，我可以选择将变体添加到该包

```
newPackage.Variant.AddObject(newVariant);
_db.Package.AddObject(newPackage);
_db.SaveChanges(); 
```

现在，当我 SaveChanges 会在这两行中创建所有 3 个表中的条目吗？如果我正确设置了模型？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:20:25.147

每个表都应该有一个插入方法（为表调用 addobject）。并安排表相关的插入方法的调用非常重要。使用此代码将 Variant 插入 DB：

```
public void InsertVariant(Variant entry)
{
            var t = _db.Variant.CreateObject();
            t.variant_name = entry.variant_name;
// and copy all field ...
// then
            _db.Variant.AddObject(t);
            _db.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:44:33.027

我现在使用 CodeFirst 实体框架：

```
public abstract class DbEntity
{
    [Key, DatabaseGenerated(DatabaseGenerated.Identity)]
    [HiddenInput(DisplayValue = false)]
    public Guid Id { get; set; }
}

public class Package : DbEntity
{
    public string Name { get; set; }
    public List<Variant> Variants { get; set; }
}

public class Variant : DbEntity
{
    public string Name { get; set; }
    public List<Product> Products { get; set; }
}

public class Product : DbEntity
{
    public string Name { get; set; }
} 
```

然后，当它被创建时，它应该创建适当的表和约束。

# scorm - 本地目标与共同的全球目标

> ID：11168623
> 
> 赞同：1
> 
> 时间：2012-06-23T10:06:33.237
> 
> 标签：scorm, scorm2004

请参阅以下清单。Activity_1 的主要目标有 mapInfo 引用了目标 id = gObj-OB01a 的共享全局目标，但没有目标 id = gObj-OB01a 的任何目标。这个清单是否正确？

```
<organization identifier = "Course_1">
     <title>Course 1 </title>
     <item identifier = "activity_1" identifierref = "SEQ01">
        <title>Activity 1</title>
        <imsss:sequencing>
           <imsss:objectives>
              <imsss:primaryObjective objectiveID = "PRIMARYOBJ_1" >
                 <imsss:mapInfo targetObjectiveID = "gObj-OB01a" writeSatisfiedStatus = "true" />
              </imsss:primaryObjective>
           </imsss:objectives>
        </imsss:sequencing>
     </item>
     <item identifier = "activity_2" identifierref = "SEQ01">
        <title>Activity 2</title>
        <imsss:sequencing>
           <imsss:sequencingRules>
              <imsss:preConditionRule>
                 <imsss:ruleConditions>
                    <imsss:ruleCondition condition = "satisfied"/>
                 </imsss:ruleConditions>
                 <imsss:ruleAction action = "skip"/>
              </imsss:preConditionRule>
           </imsss:sequencingRules>
           <imsss:objectives>
              <imsss:primaryObjective objectiveID = "PRIMARYOBJ_2" >
                 <imsss:mapInfo targetObjectiveID = "gObj-OB01a" />
              </imsss:primaryObjective>
           </imsss:objectives>
        </imsss:sequencing>
     </item>
     <item identifier = "activity_3" identifierref = "SEQ01">
        <title>Activity 3</title>
     </item>
     <imsss:sequencing>
        <imsss:controlMode choice = "false" flow = "true"/>
     </imsss:sequencing>
  </organization> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:37:41.680

是的，这是正确的。请注意，主要目标“PRIMARYOBJ_2”映射到全局目标“gObj-OB01a”，这意味着“PRIMARYOBJ_1”和“”PRIMARYOBJ_2”在满意状态方面具有相同的跟踪数据。

# java - 如何快速学习 Java Swing 并制作 GUI？

> ID：11168627
> 
> 赞同：7
> 
> 时间：2012-06-23T10:07:30.020
> 
> 标签：java, swing, user-interface

过去一年我一直在用 Java 编码，我认为我有扎实的 OO 和基本的 OOD 技能。我希望在不复杂的现有项目之上构建一个 Java GUI，但我想尽快完成它。因此，我正在寻找一种 API，它可以抽象出所有细节的实现，让我专注于我的最小可行产品的核心。

我真的更喜欢使用 Eclipse 进行编码，而不是浪费时间尝试学习习惯另一个 IDE。你会建议我做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T19:46:24.940

这是秋千的速成课程。

首先要学习的是[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)。这是最大的障碍，它们是挑剔的东西，你必须掌握它们。

其次是听众，没有他们什么都不会发生。

第三是JComponents本身，你会慢慢学习。我建议使用 NetBeans GUI builder 来玩弄它们并感受一下它们。

请注意，大多数 JComponent 都有不同的模型可供您使用，而不是默认模型。

此外，我能找到的 JPanel 和 JComponents 之间的唯一区别是 JPanel 具有布局管理器。

各种挥杆技巧和教程的好地方在这里：

```
 http://www.java2s.com/Tutorial/Java/0240__Swing/Catalog0240__Swing.htm

 http://www.java2s.com/Code/Java/Swing-Components/CatalogSwing-Components.htm 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T10:12:15.093

嗯，实际上 Netbeans 中的 GUI Builder 是您快速制作 GUI 的最佳选择。如果您脑海中有关于它应该是什么样子的图片，您可以在几分钟内完成。之后，唯一要做的就是将其绑定到您的应用程序；更具体地说：例如让按钮的 ActionListeners 做他们应该做的任何事情。

这当然取决于应用程序的大小。如果它很小，那么为它制作一个 GUI 很容易。另一方面，如果它有 2000 个类，那么它可能会更复杂，因为 GUI 可能会更复杂。

如果应用程序可以建模为模型-视图-控制器架构，那将对您有很大帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T15:14:03.540

我想你会发现在 Java 中并没有真正的 GUI 方式。每种方法都是（*）中的痛苦。即使您使用可视化 GUI 构建器，在 (*) 中仍然会很痛苦。作为对技能的长期投资，我建议您硬着头皮学习以编程方式构建 GUI。无论如何，这就是每个有经验的 Swing 开发人员都会做的事情，所以最好直接朝着那个目标前进。您也可以从 SWT/JFace 开始，但 APi 比 Swing 更难、更古怪。RCP 在 SWT/JFace 之上又增加了一层古怪和复杂性，所以当我还是初学者时，我会远离它，事实上，除了制作大型 GUI 应用程序之外，我一直都在远离它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T10:13:38.170

在我看来，eclipse RCP 可能是您的朋友（如果您正在寻找富客户端解决方案）。只需获取用于插件开发的 Eclipse 发行版（比将插件安装到现有副本要快得多），创建一个示例项目并开始 hacking。

对于 Web 应用程序，我建议使用 playframework。它与 eclipse 集成得很好。

# css - 在css中使用多个伪元素可以吗？

> ID：11168629
> 
> 赞同：18
> 
> 时间：2012-06-23T10:07:43.013
> 
> 标签：css, pseudo-element, pseudo-class

我想制作一个菜单，其中每个项目都用·分隔。为了实现这一点，我使用

```
menu li:before {
    content: "· ";
} 
```

这很膨胀，但它也会在第一项之前生成一个点。因此，我也想使用`:first-child`伪类。我可以这样做吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T10:12:07.107

当然可以 - [http://jsfiddle.net/WQBxk/](http://jsfiddle.net/WQBxk/)

```
p:before {
    content: "BEFORE ";
    display: block;
}

p:first-child:before {
    content: "1ST";
    display: block
}
​ 
```

不好的 - 它在 IE7 及以下版本中不起作用。不是因为多个伪选择器，而是因为不支持`:before`- [http://kimblim.dk/css-tests/selectors/](http://kimblim.dk/css-tests/selectors/)

刚刚在 IE8 中测试过 - 效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:19:24.820

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/zRrLF/](http://jsfiddle.net/surendraVsingh/zRrLF/)

```
<ul>
<li>lorem</li>
<li>lorem</li>
<li>lorem</li>
<li>lorem</li>
<li>lorem</li>
<li>lorem</li>

</ul>​ 
```

**CSS：**

```
li:before{content:'. ';}
li:first-child:before{content:'@ ';} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-23T10:21:38.360

当然你可以使用伪类。IE8 及更高版本都很好地支持它们。你可以在这里检查你将要使用的任何伪类的兼容性[http://caniuse.com/#search=after](http://caniuse.com/#search=after)

如果您不想要一个点，只需在内容中使用空逗号，然后 display:block 并指定高度和宽度。

```
menu li:before {
    content: "";

    display:block;
    width:50px;
    height:50px;
    background:red;

} 
```

# delphi - 在 developer express 组件 cxTreeView 中存储额外数据

> ID：11168634
> 
> 赞同：3
> 
> 时间：2012-06-23T10:07:52.363
> 
> 标签：delphi, treeview, devexpress

我在显示某些文件描述的表单上有一个 cxTreeView。我希望能够选择单击描述之一并返回文件名。为了做到这一点，我需要在树视图中存储一些额外的数据，这就是我的问题。

我该怎么做：存储文件名和描述，只显示描述但通过双击获取文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:53:55.600

如果没有紧急需要使用 TcxTreeView，我认为您可以使用 TcxTreeList 来完成此任务（如果可能）。在 TcxTreeList 中，您可以添加一个新列并将文件名存储在其中。然后使该列不可见。

如果您必须依赖 TcxTreeView，则无法在 TTreeNodes 中直接存储数据（如字符串）。您可以将指向任何对象的指针存储到 TTreeNode 的属性“数据”中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T02:25:58.993

在这两个答案中都提到了`TcxTreeView`使用标准[`TTreeNode`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TTreeNode)，正如沃伦[`his answer`](https://stackoverflow.com/a/11169007/960757)首先指出的那样，您可以使用该[`TTreeNode.Data`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TTreeNode.Data)属性来存储您的数据。我将通过一个例子来完成这些想法。

***更新：***

这篇文章的先前版本仅适用于自动为其分配空间的常量字符串。如果您需要将变量传递给[`TTreeNode.Data`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TTreeNode.Data)您必须自己分配和释放内存。这是使用简单辅助函数的示例。

`AddFileNode`辅助函数将节点添加到`Items`具有`ParentNode`名称的 中，`FileDesc`并分配空间并使用该函数复制传递`FileName`给 的。[`TTreeNode.Data`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TTreeNode.Data)[`StrNew`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.StrNew)

当您需要修改数据时，您应该释放（或者更好，但有点复杂的是重新分配）分配的内存并分配空间并复制新值。为此，您可以使用`ChangeFileName`which 处理之前分配的字符串内存并分配空间并复制传递的`FileName`值。

正如我之前提到的，您需要自己处理内存处理，为此，`OnDeletion`事件是最好的地方。因此，为此事件编写处理程序，您将在其中释放添加项目时分配的内存。

```
function AddFileNode(Items: TTreeNodes; ParentNode: TTreeNode;
  const FileName, FileDesc: string): TTreeNode;
begin
  Result := Items.AddChildObject(ParentNode, FileDesc, StrNew(PChar(FileName)));
end;

function ChangeFileName(TreeNode: TTreeNode; const FileName: string): Boolean;
begin
  Result := False;
  if Assigned(TreeNode.Data) then
  begin
    Result := True;
    StrDispose(PChar(TreeNode.Data));
    TreeNode.Data := StrNew(PChar(FileName));
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  S: string;
begin
  S := 'C:\FileName 1.xxx';
  AddFileNode(cxTreeView1.Items, nil, S, 'File 1');
  S := 'C:\FileName 2.xxx';
  AddFileNode(cxTreeView1.Items, nil, S, 'File 2');
end;

procedure TForm1.cxTreeView1Deletion(Sender: TObject; Node: TTreeNode);
begin
  if Assigned(Node.Data) then
    StrDispose(PChar(Node.Data));
end;

procedure TForm1.cxTreeView1DblClick(Sender: TObject);
var
  CurrentPos: TPoint;
  CurrentNode: TTreeNode;
begin
  CurrentPos := cxTreeView1.ScreenToClient(Mouse.CursorPos);
  if (htOnItem in cxTreeView1.GetHitTestInfoAt(CurrentPos.X, CurrentPos.Y)) then
  begin
    CurrentNode := cxTreeView1.GetNodeAt(CurrentPos.X, CurrentPos.Y);
    if Assigned(CurrentNode) and Assigned(CurrentNode.Data) then
      ShowMessage(PChar(CurrentNode.Data));
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:08:02.220

如果节点是常规的 TTreeNode，则可以使用 Node 对象中的 Data:Pointer 值。

如果树中的节点是 type `TcxTreeListNode`，它们包含存储您想要的任何数据值的能力。当我查看源代码时，我在节点级别看到了这些属性：

```
property ValueCount: Integer read GetValueCount;
property Values[Index: Integer]: Variant read GetValue write SetValue; 
```

# segue - 如何在 Modal Segue 的过渡中添加完整的卷曲效果？

> ID：11168635
> 
> 赞同：4
> 
> 时间：2012-06-23T10:07:56.030
> 
> 标签：segue, xcode-storyboard

我想要像 iBook 页面这样的卷曲效果。

如何使用带有故事板的 Segue 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:02:03.710

你应该使用 UIPageViewController。

这使您可以准确地利用类似 iBook 的卷曲效果，但是恕我直言，它必须以编程方式完成。

您可以使用本教程作为一个良好的开端：

[http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)

# php - PHP 睡眠() 函数

> ID：11168638
> 
> 赞同：1
> 
> 时间：2012-06-23T10:08:07.183
> 
> 标签：php

当我运行以下 php 脚本时，该脚本使用 sleep() 方法在一段时间后执行代码。当我运行脚本时，它会在完成循环时立即提供所有输出。我需要它在每次执行循环后显示输出。

```
<?php
$count=0;
$n=10;

set_time_limit(2000);

while($count<$n)
{
    sleep(30);
    echo time();
    echo "Timer Run....".$count."<br>";
    $count++;
}
?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T10:09:17.723

每次您希望 PHP 将输出发送到您需要调用的客户端时

```
flush(); 
```

因为默认情况下 PHP 将在脚本末尾发送它的所有输出。

有关 PHP 如何处理其输出的更多信息：http: [//php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

# c++-cli - 具有本机和 CLI 代码的混合 C++ DLL 项目

> ID：11168641
> 
> 赞同：2
> 
> 时间：2012-06-23T10:08:17.980
> 
> 标签：c++-cli, clr, mixed

我创建了 C++ DLL 项目，这个 dll 主要包含本机 C++ 代码，但它有 1 个用 C++ 编写并使用一些 .NET 类型的混合类。此类在头文件中声明并在 .cpp 中实现

我可以从所有 *.cpp 文件中使用它，但是当我尝试在某些 c++ 头文件中声明对 C++/CLI 类的引用时，我收到大量关于项目不支持 CLR 的错误（项目设置中的 CLR 支持，因为 /clr 已设置)，看起来头文件不支持指向托管类的链接。

这适用于 .CPP 完美，但从 .H 使用时失败并出现错误

```
#include "NativeBitmap.h"
using namespace Native; 
```

NativeBitmap.H:

```
#pragma once
namespace Native
{
    using namespace System;
    using namespace System::Drawing;
    using namespace System::Collections::Generic;
    using namespace System::Runtime::InteropServices;

    public ref class NativeBitmap
    {
    }
} 
```

NativeBitmap.CPP：

```
#include "stdafx.h"
#include "NativeBitmap.h"

using Native::NativeBitmap;

using namespace System;
using namespace System::Drawing;
using namespace System::Collections::Generic;
using namespace System::Runtime::InteropServices;

void NativeBitmap::Create(...)
{
...
}

and so on ... 
```

# scala - 如何使编译任务依赖于 sbt 中的其他任务？

> ID：11168643
> 
> 赞同：2
> 
> 时间：2012-06-23T10:08:22.550
> 
> 标签：scala, sbt

比如我需要在编译前对源文件做一些预处理。我如何确保 sbt 在被请求之前总是运行这个`compile`任务`compile`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:45:55.207

以下是我为确保在本地发布之前运行测试而采取的措施：

```
publishLocal <<= publishLocal dependsOn (test in Test) 
```

对于你，我认为你需要类似的东西

```
compile <<= compile dependsOn (myTask in myContext) 
```

# c++ - C++ 打开与 ShellExecute 的链接

> ID：11168646
> 
> 赞同：2
> 
> 时间：2012-06-23T10:08:55.200
> 
> 标签：c++, url, hyperlink, shellexecute

如果我这样写：

```
 ShellExecute(NULL, "open", "www.google.com", NULL, NULL, SW_SHOWNORMAL); 
```

一切都很好，而且必须如此。

但我希望用户可以输入他想去的链接。

```
std::cout<<"Enter the link: ";
            char link;
            std::cin>>link;
        ShellExecute(NULL, "open", link, NULL, NULL, SW_SHOWNORMAL); 
```

在这种情况下，我得到一个`invalid conversion from 'char' to 'const CHAR*`错误。

那么，有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T10:23:23.533

您的代码仅获取一个字符作为链接。您需要使链接成为能够保存链接值并读取 stdio 的类型。使链接成为 std::string 将执行此操作，但是您需要注意如何将其传递给 ShellExecute

```
std::cout<<"Enter the link: ";
std::string link;
std::cin>>link;
ShellExecute(NULL, "open", link.c_str(), NULL, NULL, SW_SHOWNORMAL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:20:47.983

您应该将输入声明为 char*

```
char *link = new char[2048];

...
delete[] link; 
```

ShellExecute 中的 const char* 只是一个承诺，它不会更改输入。更改声明后，一切都应按预期工作。

# ruby-on-rails - 即使服务器中存在 ssh 密钥，Cap deploy 也会要求输入密码

> ID：11168647
> 
> 赞同：2
> 
> 时间：2012-06-23T10:09:06.093
> 
> 标签：ruby-on-rails, capistrano, setup-deployment

当我尝试 ssh 到服务器时，我可以这样做，因为我的`id_rsa.pub`密钥已添加到服务器中的授权密钥中。

现在，当我尝试通过 Capistrano 将代码从本地项目文件夹部署到服务器时，服务器会要求输入密码。

如果我能够 ssh 并且无法部署到同一台服务器，我无法理解可能是什么问题。

$上限部署：设置

```
"no seed data"
triggering start callbacks for `deploy:setup'
* 13:42:18 == Currently executing `multistage:ensure'
*** Defaulting to `development'
* 13:42:18 == Currently executing `development'
* 13:42:18 == Currently executing `deploy:setup'
triggering before callbacks for `deploy:setup'
* 13:42:18 == Currently executing `db:configure_mongoid'
* executing "mkdir -p /home/deploy/apps/development/flyingbird/shared/config"
 servers: ["dev1.noob.com", "176.9.24.217"]
 Password: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:58:37.567

我遇到了问题，每当尝试在不同的环境中部署应用程序时，staging.rb、development.rb 文件都会覆盖我的 cap 脚本凭据。

# ruby - 找不到与 gems 一起安装的 ramaze

> ID：11168651
> 
> 赞同：1
> 
> 时间：2012-06-23T10:09:18.363
> 
> 标签：ruby, ramaze

我有 Ramaze 版本 2012.04.14、Rubygems 1.3.6 和 Ruby 1.8.6，所以我有最新版本。我的控制台识别 Ramaze 和所有相关的命令。（我可以跑`ramaze --version`）

我`www/`在 localhost 环境中的文件夹中创建了一个文件夹，用于存放公共文件。

`www/demo/hello_ramaze.rb`使用[教程中解释的代码作为](http://ramaze.net/documentation/index.html#Quick_Example)文件。

```
require 'ramaze'

class MyController < Ramaze::Controller
  map '/'

  def index
    return "Hello, Ramaze!"
  end
end

Ramaze.start 
```

我尝试执行`ruby hello_ramaze.rb`并收到此错误。

> hello_ramaze.rb:1:in `require': 没有要加载的文件——来自 hello_ramaze.rb:1 的 ramaze (LoadError)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:12:44.347

我升级到 Ruby 1.9.3，问题就解决了。

如果您使用 Windows，请使用[Rubyinstaller](http://rubyinstaller.org)。

# c - 二进制搜索中的返回语句

> ID：11168652
> 
> 赞同：1
> 
> 时间：2012-06-23T10:09:31.523
> 
> 标签：c, recursion, return-value

我对以下两个陈述有点困惑。

下面的程序是`finds the index of an element out of a sorted array[no duplicates] using binary search.`

```
int bin(int *arr,int l,int h,int k)
{
    int mid;
    if(l>h)
            return -1;
    if(l==h)
    {
            return arr[l]==k?l:-1;
    }
    else
    {
            mid=(l+h)>>1;
            if(arr[mid]==k)
                    return mid;
            else if(k>arr[mid])
                    bin(arr,mid+1,h,k);
            else
                    bin(arr,l,mid-1,k);
    }
} 
```

我在程序中没有任何问题[工作完美]：

我对以下两个陈述感到困惑：

bin(arr,l,mid-1,k); [http://ideone.com/p1o5U](http://ideone.com/p1o5U)
返回 bin(arr,l,mid-1,k); [http://ideone.com/lMhgB](http://ideone.com/lMhgB)

使用上述任何语句都会给出正确的结果。
**哪个语句在时间方面更有效？**
`How the program is working fine even without return statement?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:15:23.003

该程序在使用不同的编译器编译时会产生不同的结果：

```
#include <stdio.h>

int bin(int *arr,int l,int h,int k)
{
    int mid;
    if(l>h)
            return -1;
    if(l==h)
    {
            return arr[l]==k?l:-1;
    }
    else
    {
            mid=(l+h)>>1;
            if(arr[mid]==k)
                    return mid;
            else if(k>arr[mid])
                    bin(arr,mid+1,h,k);
            else
                    bin(arr,l,mid-1,k);
    }
}

int arr[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

int main(void)
{
  int i;
  for (i = 0; i <= 11; i++)
    printf("bin(%d): %d\n", i, bin(arr, 0, 9, i));
  return 0;
} 
```

输出（编译器：打开 Watcom C/C++ 1.9）：

```
>nrv.exe
bin(0): 0
bin(1): 1
bin(2): 2
bin(3): 3
bin(4): 4
bin(5): 4
bin(6): 6
bin(7): 7
bin(8): 8
bin(9): 9
bin(10): 10
bin(11): 11 
```

输出（编译器：MinGW gcc 4.6.2）：

```
$ nrv.exe
bin(0): -1
bin(1): 0
bin(2): 1
bin(3): 2
bin(4): 3
bin(5): 4
bin(6): 5
bin(7): 6
bin(8): 7
bin(9): 8
bin(10): 9
bin(11): -1 
```

我不敢说*我​​在程序中没有任何问题[工作完美]*。您的`bin()`函数调用未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:41:34.217

> 即使没有返回语句，程序如何正常工作？

在这种情况下，我想说在实践中没有区别，因为递归结束于 return 语句，与你给它的参数无关（是的，即使你没有在最后两个调用中指定它）。然而，这是一个编译器特定的细节，你不应该依赖它！

> 哪个语句在时间方面更有效？

您可能会认为带有 return 语句的那些更有效，因为在这种情况下它不需要阅读“else”检查，但是差异非常小。

* * *

但是请注意，如果没有 return 语句，它被认为是“不正确的”，即使它“有效”，并且 -Wall 应该给你警告。

另见这个[类似的问题](https://stackoverflow.com/questions/10772906/recursive-functions-in-c-is-return-always-necessary)。从那个答案复制：

> 您看到的可能是由于某些架构上的函数通过将众所周知的寄存器设置为该值（i386 上的 eax）返回的实现细节（整数值）引起的。因此，如果最底层的递归调用确实返回并设置了这个寄存器，并且中间的调用没有踩到那个寄存器，你会看到它有点工作。但是，您不能依赖它。

编辑：更改了措辞，以不暗示该行为是故意优化。不知道是不是。无论如何，有些编译器会做而有些则不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T13:05:23.437

题外话：如果你无论如何都要使用递归，你可以通过消除下边界来大大简化程序，并用指针代替。

```
#include <stdio.h>

int bin(int *arr, int n, int k);
int bin(int *arr, int n, int k)
{
    int mid;
    if (n <= 0) return -1;

    mid = n / 2;
    if (arr[mid] == k) return mid;
    if (k < arr[mid]) return bin(arr, mid, k);

    n = bin(arr+mid+1, n-(mid+1), k);
    return (n<0) ? n : mid+1+n;
}

int main(void)
{
    int array[] = {0,1,2,3,4,5,6,7,8,9,10,11};
    int result, val;

    for (val= -2; val < 15; val++) {
        result = bin(array, 10, val);
        printf("Val=%d -> %d\n", val, result);
        }
return 0;
} 
```

# iphone - 为什么此 GLView 屏幕截图代码返回空白/黑色 UIImage？

> ID：11168653
> 
> 赞同：5
> 
> 时间：2012-06-23T10:09:41.813
> 
> 标签：iphone, objective-c, ios, xcode, opengl-es

我正在使用以下代码截取`GLView`. 问题是，它返回一个完全黑色的`UIImage`。这段代码被调用，`LineDrawer.m`这是`GLView`代码的核心——所以它是从正确的 .m 文件中调用的。如何保存实际的屏幕截图而不是黑色图像？

```
- (UIImage*) getGLScreenshot {

NSLog(@"1");

float scale = 0.0;
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
{
    // scale value should be 1.0 on 3G and 3GS, and 2.0 on iPhone 4.
    scale = [[UIScreen mainScreen] scale]; 
}

// these are swapped since the screen is rotatey
float h = 768 * scale;
float w = 924 * scale;

NSInteger myDataLength = w * h * 4;

// allocate array and read pixels into it.
GLubyte *buffer = (GLubyte *) malloc(myDataLength);
glReadPixels(0, 0, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

// gl renders "upside down" so swap top to bottom into new array.
// there's gotta be a better way, but this works.
GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
for(int y = 0; y <h; y++)
{
    for(int x = 0; x <w * 4; x++)
    {
        buffer2[(((int)h-1) - y) * (int)w * 4 + x] = buffer[y * 4 * (int)w + x];
    }
}

// make data provider with data.
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

// prep the ingredients
int bitsPerComponent = 8;
int bitsPerPixel = 32;
int bytesPerRow = 4 * w;
CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

// make the cgimage
CGImageRef imageRef = CGImageCreate(w, h, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

// then make the uiimage from that
UIImage *myImage = [UIImage imageWithCGImage:imageRef];
return myImage;

}

- (void)saveGLScreenshotToPhotosAlbum {
UIImageWriteToSavedPhotosAlbum([self getGLScreenshot], nil, nil, nil);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:59:47.690

不久前我不得不在 Sparrow 框架中做类似的事情，你应该能够从这个论坛回复中的代码中提取你需要的部分：http: [//forum.sparrow-framework.org/topic/spdisplayobjectscreenshot](http://forum.sparrow-framework.org/topic/spdisplayobjectscreenshot)

编辑：还有这篇文章[http://forum.sparrow-framework.org/topic/taking-screenshots](http://forum.sparrow-framework.org/topic/taking-screenshots)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T10:24:46.163

更改您的可绘制属性

eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:

```
 [NSNumber numberWithBool:YES],  
                kEAGLDrawablePropertyRetainedBacking, 
                kEAGLColorFormatRGB565, 
                kEAGLDrawablePropertyColorFormat, nil]; 
```

kEAGLDrawablePropertyRetainedBacking 为 YES

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T05:59:53.430

试试这个我经历了很多事情，终于找到了解决方案。

```
-(UIImage*)renderImg{
        GLint backingWidth = 0;
        GLint backingHeight = 0;
        glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &backingWidth);
        glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &backingHeight);
        GLubyte *buffer = (GLubyte *) malloc(backingWidth * backingHeight * 4);
        GLubyte *buffer2 = (GLubyte *) malloc(backingWidth * backingHeight * 4);

        glReadPixels(0, 0, backingWidth, backingHeight, GL_RGBA, GL_UNSIGNED_BYTE,
                     (GLvoid *)buffer);
        for (int y=0; y<backingHeight; y++) {
            for (int x=0; x<backingWidth*4; x++) {
                buffer2[y * 4 * backingWidth + x] =
                buffer[(backingHeight - y - 1) * backingWidth * 4 + x];
            }
        }
        free(buffer);
        CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2,
                                                                  backingWidth * backingHeight * 4,
                                                                  myProviderReleaseData);
        // set up for CGImage creation
        int bitsPerComponent = 8;
        int bitsPerPixel = 32;
        int bytesPerRow = 4 * backingWidth;
        CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
        // Use this to retain alpha
        CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
        CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;
        CGImageRef imageRef = CGImageCreate(backingWidth, backingHeight,
                                            bitsPerComponent, bitsPerPixel,
                                            bytesPerRow, colorSpaceRef,
                                            bitmapInfo, provider,
                                            NULL, NO,
                                            renderingIntent);
        // this contains our final image.
        UIImage *newUIImage = [UIImage imageWithCGImage:imageRef];
        CGImageRelease(imageRef);
        CGColorSpaceRelease(colorSpaceRef);
        CGDataProviderRelease(provider);

        return newUIImage;
    } 
```

我认为它应该可以完美运行。

# c# - Windows phone 应用程序和桌面应用程序之间的通信方式

> ID：11168655
> 
> 赞同：2
> 
> 时间：2012-06-23T10:09:48.007
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone

我希望我的 Windows 手机应用程序与桌面应用程序（在 Windows 中）通信，基本上我想发送在手机中捕获的图片以发送到桌面应用程序并从桌面应用程序获取反馈。

最优雅、最模块化和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:14:11.993

如果您可以强制您的用户通过 wifi 连接，以便他与桌面位于同一本地网络上，您可以在更高的端口上侦听电话的连接，并直接通过 TCP 将数据传输到/从它传输。

否则，目前最好的方法是通过互联网，使用您的服务器在两个设备之间同步文件和消息。

# c# - Worksheet.CustomProperites OpenXML

> ID：11168663
> 
> 赞同：2
> 
> 时间：2012-06-23T10:10:50.580
> 
> 标签：c#, excel, openxml, epplus

我需要阅读[Worksheet.CustomProperies](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.customproperties%28v=vs.80%29.aspx)。有没有办法读取这个属性？

我也尝试过使用获取工作簿和工作表的 XmlDocument

```
 XmlDocument xlDoc =  ws.WorksheetXml; 
```

给我：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
<dimension ref="A3:K24" />
<sheetViews>
<sheetView tabSelected="1" workbookViewId="0"><selection activeCell="H14" sqref="H14" /></sheetView>
</sheetViews>
<sheetFormatPr defaultRowHeight="15" />
<cols></cols><sheetData />
<pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />
<pageSetup orientation="portrait" horizontalDpi="4294967293" verticalDpi="4294967293" r:id="rId2" />
**<customProperties><customPr name="My_CustomProperty" r:id="rId3" /></customProperties>**
</worksheet> 
```

我可以在那里看到一个 CustomProperty，但看不到 CustomProperty 值。当我转到 CustomProperty bin 文件（压缩 xlsx 并提取内容）时，值就在那里。

我在[这里上传了文件](https://www.dropbox.com/s/ljph3nnbmddycyn/Users_Template_12_22_Template.xlsx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:56:35.973

我不熟悉这些自定义属性，但这是使用最新版本的 EPPlus 从示例文档中提取 customProperty1.bin 文件内容的一种方法：

```
using (ExcelPackage p = new ExcelPackage(new FileInfo(@"C:\Users_Template_12_22_Template.xlsx")))
{
    var parts = p.Package.GetParts();
    foreach (var part in parts)
    {
        if (part.ContentType == "application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty")
        {
            using (var stream = part.GetStream())
            {
                byte[] data = new byte[stream.Length];
                stream.Read(data, 0, (int)stream.Length);
                stream.Close();

                string customPropertyInfo = System.Text.Encoding.Unicode.GetString(data);
            }
        }
    }
} 
```

如果您知道 customProperty1.bin 文件的名称/位置，您可以使用 GetPart() 而不是 GetParts() 来访问它：

```
var u = new Uri("/xl/customProperty1.bin", UriKind.Relative);
var part = p.Package.GetPart(u); 
```

请注意，您需要添加对 WindowsBase.dll 的引用（在添加引用中的 .NET 选项卡下）才能使用与打包相关的方法。

# css - z-index 在下拉菜单的 Wordpress 主题中不起作用

> ID：11168667
> 
> 赞同：0
> 
> 时间：2012-06-23T10:11:30.307
> 
> 标签：css, wordpress, drop-down-menu, z-index, buddypress

我正在为 Buddypress 默认主题开发一个子主题。我已经定制了很多导航栏的外观，现在我正在尝试让下拉菜单正常工作。它们在默认主题中工作正常。在默认主题中，添加了一个类来列出导航栏中悬停在 .sfhover 上的项目，并且此 div 类具有 CSS 'position:relative;z-index:1000'。下拉菜单应位于顶部的#container div 具有 CSS 'position:relative' 并且没有设置 z-index。大概这意味着 z-index 是默认值 0。最后，包含导航栏的 #header div 具有 CSS 'position:relative;z-index:1000'。

我检查了在我的子主题中，这三个 div 的所有 CSS 都是相同的，确实如此，但下拉菜单并未显示在 #container div 上方，而是在 #container div 的位置被切断开始。

[如果您访问此页面](http://soteriabrighton.co.uk/)，您会明白我的意思，并将鼠标悬停在导航栏中的“链接”项目上。您需要以下凭据才能查看该页面，因为它受密码保护：

用户名：guest 密码：stackoverflow

也许有人可以发现为什么这对我的孩子主题没有按预期工作？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:44:04.133

您的 z-index 没有任何问题。您已`#header`设置为`overflow: hidden`，这意味着您的导航子菜单中不会流出任何内容。删除它，你会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:43:22.130

问题出在`<div id="header">`具有属性的块中`overflow: hidden`，它隐藏了超出其维度的所有内容。您必须将其删除，如果您将其用于清除浮动，请尝试另一种方法：样板 clearfix 或仅在`clear:both`之后添加 div`<div id="header">`

# c# - ASP.NET 页面未加载 CSS 样式

> ID：11168668
> 
> 赞同：15
> 
> 时间：2012-06-23T10:11:41.640
> 
> 标签：c#, asp.net, css, visual-studio-2010

这是一个在 ASP.NET 中使用 VS 2010 使用 C# 的简单网站。我对该项目有以下目录结构：

![在此处输入图像描述](../Images/d152bb0bad05de27d4124ce726e48248.png)

起始页面是`Default.aspx`并且它加载完美。但是当我`Interface/SystemAdminLogin.aspx`从默认页面打开页面时，它加载时没有 CSS 样式。我在母版页中导入了 CSS 样式表。这是我在两个 .aspx 文件中引用 MasterPage 文件的方式：

`Default.aspx`：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %> 
```

`SystemAdminLogin.aspx`：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="SystemAdminLogin.aspx.cs" Inherits="_Default" %> 
```

我没有看到我的代码有任何错误，但为什么界面文件夹中的页面没有加载 CSS 样式？请帮忙。

这是我要导入 css 文件的母版页代码：

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="SiteMaster" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Facial Recognition Bank System</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="Styles/style.css" rel="stylesheet" type="text/css" media="screen" />
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head> 
```

这是CSS文件代码的一部分：

```
body {
margin: 0;
padding: 0;
background: #fff url(../images/img01.jpg) repeat-x left top;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
color: #000;
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-23T10:18:14.027

母版页中包含的样式表使用相对路径。

`runat=server`使用虚拟 Web 根路径 ( )指定样式表链接并为其添加前缀`~`：

```
<link href="~/Styles/style.css" rel="stylesheet" type="text/css" media="screen" runat="server" /> 
```

或者：

```
<link href="/Styles/style.css" rel="stylesheet" type="text/css" media="screen" runat="server" /> 
```

但请记住，建议使用第一个选项。**当您在虚拟目录**中发布您的站点时，第二个将不起作用。

最后评论后...

CSS 中的图像 URL 也应该更新，以便不使用相对路径或进行任何**路径遍历**(../)。

> 背景：#fff url(images/img01.jpg) 重复-x 左上角；

对于此选项，您需要将图像文件夹移动到 Styles 文件夹中（这样做是一个好习惯）。

**最终更新：**

看起来该`head`元素还需要`runat=server`为 ASP.NET 相对路径 (~) 在`link`带有`runat=server`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T15:34:09.123

这适用于我的母版页：

```
<asp:content ID="xContent" ContentPlaceHolderID="headContent" runat="server">
<link rel="stylesheet" type="text/css" href="<%=Request.ApplicationPath%>Folder/Folder/Filename.css" />
</asp:Content>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:25:15.937

尝试使用（〜在您的路径中）：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="SiteMaster" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Facial Recognition Bank System</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="~/Styles/style.css" runat="server" rel="stylesheet" type="text/css" media="screen" />
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T11:49:39.927

添加`runat="server"`到 head 属性并确保链接以根为目标，如 ("~/path to css")

```
<head runat="server">
    <title>Page Title Here</title>
    <link href="~/css/main.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server" />
</head> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-08T15:17:04.763

我发现它是 ASPNETCORE_ENVIRONMENT 设置为开发进行调试。在 _Layout.cshtml 中，我缺少 asp-append-version。

```
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>@ViewData["Title"] - SALUS UAV</title>

<environment include="Development">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="~/css/site.css" />
</environment>
<environment exclude="Development">
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css"
          asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
          asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute" />
    <link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />
</environment> 
```

我解决了这个问题，一切都很好：

```
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>@ViewData["Title"] - SALUS UAV</title>

<environment include="Development">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</environment>
<environment exclude="Development">
    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css"
          asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
          asp-fallback-test-class="sr-only" asp-fallback-test-property="position" asp-fallback-test-value="absolute" />
    <link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />
</environment> 
```

# php - 动态构建表单

> ID：11168672
> 
> 赞同：1
> 
> 时间：2012-06-23T10:12:09.260
> 
> 标签：php, javascript, jquery, ajax

我有一个下拉菜单，用户根据表单构建的标准从中选择一个标准。

我现在要做的是确保他们不能构建相同的两次，例如，如果用户从下拉列表中选择外观，我不希望他们能够从下拉列表中选择外观，而该表单是建成。

那有意义吗？目前这是我的代码，

```
$('img.toggleadd').live({
    click: function() {
        var rowCount = $("#advanced_search > table > tbody > tr").length;

        f(rowCount < 3) {
            $.ajax({
                url: site_url + 'ajax/row/empty',
                success: function(data) {
                    console.log($(this));
                    $('#advanced_search table').append(data);
                }
            });
        }
    }
}); 
```

和 PHP

```
public function row($name) {
    if ($this->input->is_ajax_request()) {
        return $this->load->view('search/rows/'.$name);
    }
} 
```

`$name`与包含所选值的相应表单元素的视图的名称有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:49:26.857

正如[Jared](https://stackoverflow.com/questions/11168672/building-a-form-dynamically#comment14650046_11168672)所提到的，解决方案可以是一个简单的布尔值，指示请求是否正在进行中......

以这段代码为例 -

```
var request_in_progress = false;

$("#selector").on('change',function(){
  if (!request_in_progress){
    request_in_progress = true;
    $.ajax('/path_to_ajax_module.php',{'data':data},function(response){
      // handle the AJAX response
      request_in_progress = false;    // AJAX request complete.      
    },'json');
  }
}); 
```

# linux - gdb：当 fglrx_dri.so 段错误时如何获得完整的回溯？

> ID：11168676
> 
> 赞同：4
> 
> 时间：2012-06-23T10:12:57.960
> 
> 标签：linux, debugging, gdb, backtrace, ati

在运行我自己的基于 Qt 的 OpenGL 应用程序时，我在 fglrx dri 库中遇到分段错误。我从 gdb 获得的回溯（为 Qt 和我自己的应用程序安装了 dbg 符号）：

```
Thread 1 (Thread 0xb7fd9720 (LWP 1809)):
#0  0x06276705 in ?? () from /usr/lib/fglrx/dri/fglrx_dri.so
#1  0x000020dc in ?? ()
#2  0x000020d9 in ?? ()
#3  0x00000000 in ?? () 
```

我无法从我的代码中看到我调用导致分段错误的 fglrx 函数的位置。如何扩展此回溯以将其完全从 main() 函数向下查看到 fglrx dri 库？

编辑：确认我自己的应用程序是用调试符号构建的：

```
Reading symbols from /home/user/fglrx crash/crashtest-build-desktop-Qt_4_8_1__Qt-4_8_1__Debug/crashtest...done.
(gdb) br main
Breakpoint 1 at 0x804996d: file ../program/main.cpp, line 21.
(gdb) run
Starting program: /home/user/fglrx crash/crashtest-build-desktop-Qt_4_8_1__Qt-4_8_1__Debug/crashtest  [Thread debugging using libthread_db enabled]

Breakpoint 1, main (argc=1, argv=0xbffff2a4) at ../program/main.cpp:21
21      QApplication a(argc, argv);
(gdb) bt
#0  main (argc=1, argv=0xbffff2a4) at ../program/main.cpp:21
(gdb) n
[New Thread 0xb7d2bb70 (LWP 2475)]
[New Thread 0xb752ab70 (LWP 2476)]
22      QMainWindow w;
(gdb) bt
#0  main (argc=1, argv=0xbffff2a4) at ../program/main.cpp:22
(gdb) s
QFlags<Qt::WindowType>::QFlags (this=0xbffff164) at /usr/local/Trolltech/Qt-4.8.1/include/QtCore/qglobal.h:2284
2284        Q_DECL_CONSTEXPR inline QFlags(Zero = 0) : i(0) {}
(gdb) bt
#0  QFlags<Qt::WindowType>::QFlags (this=0xbffff164) at /usr/local/Trolltech/Qt-4.8.1/include/QtCore/qglobal.h:2284
#1  0x080499a4 in main (argc=1, argv=0xbffff2a4) at ../program/main.cpp:22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:16:55.063

您还必须为自己的二进制文件生成调试符号。`-g`使用 GCC 的选项编译您的应用程序。调试时也建议关闭优化；`-O0`为此目的使用 GCC 的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T21:08:54.753

The simple and awful answer is you can't. [According to Graham Sellers of AMD](https://twitter.com/grahamsellers/status/410504765676613632), the driver is compiled with the [`-fomit-frame-pointer` flag](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-fomit-frame-pointer-785), which confuses gdb if it's deeper down the stack.

# ruby - Ruby Net::FTP gettextfile 无法在本地保存文件

> ID：11168677
> 
> 赞同：0
> 
> 时间：2012-06-23T10:12:59.167
> 
> 标签：ruby, net-ftp

我正在尝试从 ftp 站点检索文件 (.csv) 并将它们全部保存在本地同一文件夹中。我的代码如下所示：

```
#! /usr/bin/ruby

require 'logger'
require 'fileutils'
require 'net/ftp'
require 'rubygems'
require 'mysql2'
require 'roo'
require 'date'

# logging setup
log = Logger.new("/path_to_logs/ftp_log.log", 10, 1024000)
log.level = Logger::INFO

export_ftp_path = '/Receive/results/'
export_work_path ='/Users/pierce/results_exports/'

Net::FTP.open('host', 'username', 'password') do |ftp|
    log.info("Logged into FTP")
    ftp.passive = true
    ftp.chdir("#{export_ftp_path}")
      ftp.list.each do |file|
        log.info("Found file #{file}")
        new_file = file[56..115]  #take part of the file name and remove spaces and periods
        new_file = new_file.gsub(/[.]+/, "") 
        new_file = new_file.gsub(/\s/, "0") 
        ftp.gettextfile(file,"#{new_file}")
        log.info("Downloaded file #{new_file}")
      end
end 
```

这是我收到的错误：

```
/Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/net/ftp.rb:560:in `initialize': No such file or directory -  (Errno::ENOENT)
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/net/ftp.rb:560:in `open'
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/net/ftp.rb:560:in `gettextfile'
    from ftp_test.rb:44:in `block (2 levels) in <main>'
    from ftp_test.rb:33:in `each'
    from ftp_test.rb:33:in `block in <main>'
    from /Users/pierce/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/net/ftp.rb:116:in `open' 
```

正如所建议的，这是我对 puts file 和 puts new_file 的值。

```
file = -rwxr-xr-x    1 1130419  114727       9546 May 17 08:11 results_Wed. 16 May 2012.csv
new_file = results_Wed0230May02012csv 
```

关于在 gettextfile 或我的脚本中更改什么以正确保存文件的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:35:40.447

当您只需要目录中的文件列表时，您应该使用[`nlst`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-nlst)而不是。`list`的输出`list`需要正确解析，否则。

当您请求文件时，它必须是原始文件名，包括所有空格。当您保存文件时，它可以是您想要的任何内容（包括空格或不包括空格）。错误是因为您请求了错误的文件。请改为在您的情况下使用`nlst`。它将使它更容易（无需转换或解析）。

# python - 当beautifulsoup中的属性为中文时如何获取标签

> ID：11168687
> 
> 赞同：1
> 
> 时间：2012-06-23T10:14:50.600
> 
> 标签：python, beautifulsoup

我不熟悉beautifulsoup 的编码。

当我处理一些页面时，一些属性是中文的，我想用这个中文属性来提取标签。

例如，如下所示的 html：

```
<P class=img_s>
<A href="/pic/93/b67793.jpg" target="_blank" title="查看大图">
<IMG src="/pic/93/s67793.jpg">
</A>
</P> 
```

我想提取'/pic/93/b67793.jpg'所以我所做的是：

```
img_urls = form_soup.findAll('a',title='查看大图') 
```

并遇到：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xb2 in position 0: ordinalnot in range(128) 
```

为了解决这个问题，我做了两种方法，都失败了：一种方法是：

```
import sys
reload(sys)
sys.setdefaultencoding("utf-8") 
```

另一种方法是：

```
response = unicode(response, 'gb2312','ignore').encode('utf-8','ignore') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T10:18:09.233

您需要将 unicode 传递给 findAll 方法：

```
# -*- coding: utf-8
... 
img_urls = form_soup.findAll('a', title=u'查看大图') 
```

请注意标题值前面的[`u`unicode 文字标记。](http://docs.python.org/reference/lexical_analysis.html#string-literals)您确实需要[在源文件上指定编码](http://www.python.org/dev/peps/pep-0263/)才能使其正常工作（`coding`文件顶部的注释），或者改用 unicode 转义码：

```
img_urls = form_soup.findAll('a', title=u'\u67e5\u770b\u5927\u56fe') 
```

在内部，BeautifulSoup 使用 unicode，但您传递给它的是一个包含非 ascii 字符的字节字符串。BeautifulSoup 尝试将其解码为 un​​icode 并失败，因为它不知道您使用的编码。通过为它提供现成的 unicode，您可以回避这个问题。

工作示例：

```
>>> from BeautifulSoup import BeautifulSoup
>>> example = u'<P class=img_s>\n<A href="/pic/93/b67793.jpg" target="_blank" title="<A href="/pic/93/b67793.jpg" target="_blank" title="\u67e5\u770b\u5927\u56fe"><IMG src="/pic/93/s67793.jpg"></A></P>'
>>> soup = BeautifulSoup(example)
>>> soup.findAll('a', title=u'\u67e5\u770b\u5927\u56fe')
[<a href="/pic/93/b67793.jpg" target="_blank" title="查看大图"><img src="/pic/93/s67793.jpg" /></a>] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:42:38.647

Beautiful Soup 4.1.0[会自动从 UTF-8 转换属性值](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-string)，从而解决了这个问题：

# c - 有人可以告诉我哪里出错了，如何替换 C 中的字符串

> ID：11168692
> 
> 赞同：1
> 
> 时间：2012-06-23T10:16:02.283
> 
> 标签：c

我正在编写以下代码以找出给定字符串中存在所需的字符串，如果发现我想用所需的替换它们。我尝试如下，但是对于替换我还没有做有人可以帮助我

```
#include <stdio.h>
#include <string.h>
int main(void)
{
char *str;
   const char text[] = "Hello atm adsl";
   const char *arr[] = {"atm", "f/r", "pc","adsl"}; // If found I would like to replace them with Atm, F/R,PC,ADSL
int i=strlen(*arr);
for(int j=0;j<i;j++)
{
    str=arr[j];
   const char *found = strstr(text, arr[j]);
switch(str)
{
    case "Atm":
    break;
}

   puts(found ? "found it" : "didn't see nuthin'");
   return 0;

}
} 
```

我收到以下错误

`invalid conversion from const char* to char*`和`switch quantity not an integer`

有人能帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:23:18.967

`C cannot do switch with string.`

这可能会回答您的问题：[在 C 中打开字符串的最佳方法](https://stackoverflow.com/questions/4014827/best-way-to-switch-on-a-string-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:03:55.123

试试这个！！！

```
 #include <stdio.h>
#include <string.h>

int main(void) {
    char *token;
    char text[] = "Hello atm adsl";
    char *arr[] = {"atm", "f/r", "pc","adsl"}; // If found I would like to replace them with Atm, F/R,PC,ADSL

    char textTmp[500] ="";

    token = strtok (text, " "); // catch single words
    while(token != NULL) {

        printf("%s\n", token);
        if (strncmp(token, arr[0], strlen(arr[0])) == 0) {
            token[0] = 'A';
        }else if (strncmp(token, arr[1], strlen(arr[1])) == 0) {
            token[0] = 'F';
            token[1] = '/';
            token[2] = 'R';
        } else if (strncmp(token, arr[2], strlen(arr[2]))== 0) {
            token[0] = 'P';
            token[1] = 'C';
        } else if (strncmp(token, arr[3], strlen(arr[3]))== 0) {
            token[0] = 'A';
            token[1] = 'D';
            token[2] = 'S';
            token[3] = 'L';
        }
        strncat(textTmp, token, strlen(token));
        strncat(textTmp, " ", 1);
        token = strtok (NULL, " ");
    }

    textTmp[strlen(textTmp)-1] = '\0';

    strncpy(text, textTmp, strlen(textTmp));
    printf("%s\n", text);

    return 0;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:22:15.613

1.  在 C 中，switch 只能用于整数情况——因此会出现错误。

2.  您的分配`str=arr[j]`无效，因为您将 a 分配`const char*`给 a `char *`。C不会在赋值时按值复制...如果您想从其中复制值`const char*`然后*对其进行更改*，那么您需要`malloc`自己的记忆和`strcpy`那里。

# jquery - 悬停时的jQuery“扩展”和“合同”图像-“合同”失败

> ID：11168694
> 
> 赞同：0
> 
> 时间：2012-06-23T10:16:09.997
> 
> 标签：jquery, html, css

我的目标是在鼠标悬停时将图像设置为新尺寸，并临时添加一个新的 css 类，并在鼠标悬停时将其返回到其原始尺寸（并删除添加的类）。

我的代码在鼠标悬停时工作正常。鼠标移出时，添加的类被删除，但图像尺寸不会恢复到原始宽度和高度。

HTML：

```
<img src='img.jpg' alt='' class='pulse'> 
```

jQuery：

```
$(function() {
  // set global img width and height
  var width_pulse_img = 0;
  var height_pulse_img = 0;
  $('img.pulse').hover(function () {
    // onMouseOver: read original width and height on FIRST mouseover
    if (!width_pulse_img) width_pulse_img = $(this).css('width');
    if (!height_pulse_img) height_pulse_img = $(this).css('height');
    // set img expansion ratio and compute new dimensions
    var float_exp = 1 + 0.1;
    var ww = (float_exp*parseInt(width_pulse_img, 10)).toString();
    var hh = (float_exp*parseInt(height_pulse_img, 10)).toString();
    // animate to new dimensions
    $(this).addClass('hover').stop().animate({
      width: ww + 'px',
      height: hh + 'px'
    }, 200);
  }, function () {
    // onMouseOut: animate back to original dimensions: 
    $(this).removeClass('hover').stop().animate({
      // THIS IS THE PART THAT DOES NOT WORK
      width: width_pulse_img + 'px',
      height: height_pulse_img + 'px'
    }, 400);
  });
}); 
```

我已经在 Firefox 12.0、Chrome 和 IE 9.0 中进行了测试，并且行为是相同的。

这是一个演示问题的[jsFiddle](http://jsfiddle.net/z6zvg/)。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:25:26.173

使用`.width()`and`.height()`而不是`.css(..)`可以解决问题。所以像这样使用它

```
width_pulse_img = $(this).width();
height_pulse_img = $(this).height(); 
```

它会正常工作。

**演示：http:** [//jsfiddle.net/joycse06/z6zvg/1/](http://jsfiddle.net/joycse06/z6zvg/1/)

关于它失败的原因，我仍然不确定为什么会发生这种情况。但是在使用`.css()`时它总是保留`width and height`.

**更新：背后的原因**

正如文档中所说的[.width()](http://api.jquery.com/width/)

> .css(width) 和 .width() 之间的区别在于后者返回一个无单位的像素值（例如，400），而前者返回一个**单位完整的值（例如，400px）**。

所以在这两条线的第一次分配之后

```
width_pulse_img = $(this).css('width');   // 220px
height_pulse_img = $(this).css('height'); // 237px 
```

所以他们`px`已经和你一样了`.css(`。

他们稍后在您使用时

```
 width: width_pulse_img + 'px',   // becoming 220pxpx
  height: height_pulse_img + 'px'  // 237pxpx 
```

所以它忽略了整个事情而不是收缩图像。但正如你所使用`parseInt` `expanding`的那样工作正常。

**使用 .css() 的工作版本：http:** [//jsfiddle.net/joycse06/z6zvg/4/](http://jsfiddle.net/joycse06/z6zvg/4/)

# python - 如何在不询问密码的情况下运行 Python 脚本？

> ID：11168696
> 
> 赞同：0
> 
> 时间：2012-06-23T10:16:20.967
> 
> 标签：python

我正在尝试在需要时打开系统电源。所以我正在使用以下命令，这些命令运行成功。但是当我运行代码时，它会询问我的密码，我每次都必须手动提供密码。

```
os.system('sudo sh -c "echo 0 > /sys/class/rtc/rtc0/wakealarm"' % locals())     
os.system('sudo sh -c "echo %(turnontime)s > /sys/class/rtc/rtc0/wakealarm"' % locals()) 
```

如何在不询问我的密码的情况下运行此代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:14:33.790

在脚本文件中包含您的 root 密码简直是愚蠢的。*不要这样做*，有更好的选择。[本页](http://www.tuxation.com/setuid-on-shell-scripts.html)介绍了如何使用[setuid](http://en.wikipedia.org/wiki/Setuid)位设置来制作 shell 脚本，以及如何规避大多数现代 Linux 发行版对 shell 脚本的 setuid 的限制。

我将在这里总结突出部分以符合 stackoverflow 指南。首先使用以下内容创建一个`.c`文件（假设它被称为`runscript.c`）：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
   setuid( 0 );
   system( "/path/to/script.sh" ); 

   return 0;
} 
```

安装 gcc（`apt-get install gcc`在基于 debian 的发行版上），然后输入

```
gcc -o runscript runscript.c 
```

现在，以 root 身份输入

```
chown root:root runscript script.sh
chmod 4755 runscript script.sh 
```

现在任何用户都应该能够运行`runscript`，并且它会`script.sh`像用户是 root 一样执行。

只要这两个文件都由 root 拥有并且除 root 之外的任何其他人都不能写入，这是*相当*安全的，并且比在脚本文件中以纯文本形式嵌入 root 密码更安全。

`script.py`由于某种原因，我没有成功地使这个文件工作，所以如果你*真的*想运行一个 python 脚本，让`script.sh`文件间接运行它。如果您这样做，请记住也为 python 脚本设置所有者和权限，使用`chown`和`chmod`如上所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T10:36:07.077

`sudo`使用`-S`选项运行时将从标准输入读取密码。

在这种情况下，您可以在如下脚本中使用它：

```
#!/bin/bash
echo my_awesome_password | sudo -S python awesome_script.py 
```

正如@david 正确所说，你为什么使用 python 来执行系统调用？你可能有同样的脚本做同样的事情。

# java - 图片上传成功后不显示 Toast 消息

> ID：11168697
> 
> 赞同：0
> 
> 时间：2012-06-23T10:16:21.140
> 
> 标签：java, android

我当前的代码成功上传了图像，但仍然没有显示 Toast 消息`Image uploaded successfully`。图片上传成功后如何显示 toast 消息？

这是我的代码

```
 public void onClick(View v) {
                        dialog = ProgressDialog.show(Camera.this, "", "Uploading file...", true);
                        new Thread() {
                            public void run() {
                                try {
                                    //Toast.makeText(getBaseContext(), "File is uploading...", Toast.LENGTH_LONG).show();
                                    if(imageUpload(globalUID, largeImagePath)) {
                                         Toast.makeText(getApplicationContext(), "Image uploaded", Toast.LENGTH_LONG).show();
                                     } else {
                                         Toast.makeText(getApplicationContext(), "Error uploading image", Toast.LENGTH_LONG).show();
                                     }
                                } catch (Exception e) {

                                }

                            }
                        }.start(); 
```

这是 imageUpload 方法

```
public boolean imageUpload(String uid, String imagepath) {
    boolean success = false;
    //Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    Bitmap bitmapOrg = BitmapFactory.decodeFile(imagepath);
    ByteArrayOutputStream bao = new ByteArrayOutputStream();
    bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);

    byte [] ba = bao.toByteArray();
    String ba1=Base64.encodeToString(ba, 0);

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("image",ba1));
    nameValuePairs.add(new BasicNameValuePair("uid", uid));

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.example.info/androidfileupload/index.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        if(response != null) {
            Toast.makeText(getApplicationContext(), "File uploaded successfully", Toast.LENGTH_LONG).show();
            success = true;
        }
        is = entity.getContent();
    } catch(Exception e) {
        Log.e("log_tag", "Error in http connection "+e.toString());
    }
    dialog.dismiss();
    return success;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T10:17:40.240

> 您正在尝试在非 UI 线程中显示 Toast，因此看不到 Toast

Task 完成后使用 [Handler显示 Toast.its 更好地使用](http://developer.android.com/reference/android/os/Handler.html)[AsyncTask。](http://developer.android.com/reference/android/os/AsyncTask.html)

使用 AsyncTask，添加你的`imageUpload code in DoinBackground(...) method and return boolean to onPostExxecute(),and You can display Toast in OnPostExecute Method.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T10:28:24.353

我建议你实现[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ，它在 android中被称为**Painless Threading 。**

在您的情况下，您可以在方法内部调用 imageUpload() `doInBackground()`，从方法中显示 Toast `onPostExecute()`，无需关心线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T10:35:09.747

我不知道这是对还是错。你可以这样试试——

```
public void onClick(View v)
{
    ProgressDialog dialog = ProgressDialog.show(DummyUsageActivity.this, "", "Uploading file...", true);
    this.runOnUiThread(new Runnable() {
        public void run() {
            try {
                //Toast.makeText(getBaseContext(), "File is uploading...", Toast.LENGTH_LONG).show();
                if(imageUpload(globalUID, largeImagePath)) {
                     Toast.makeText(DummyUsageActivity.this, "Image uploaded", Toast.LENGTH_LONG).show();
                 } else {
                     Toast.makeText(DummyUsageActivity.this, "Error uploading image", Toast.LENGTH_LONG).show();
                 }
            } catch (Exception e) {

            }
        }
    });
} 
```

我认为这会奏效。根据用户 - [Paresh](https://stackoverflow.com/users/379693/paresh-mayani) Mayani和[Samir Mangroliya](https://stackoverflow.com/users/776244/samir-mangroliya)对[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的建议也更好地做到这一点。

# r - 具有两个预测变量的 R 多元回归

> ID：11168698
> 
> 赞同：0
> 
> 时间：2012-06-23T10:16:31.017
> 
> 标签：r

我有一个 data.frame (X,Y,a,b,c,d,e) 是否有一个包可以同时预测 X 和 Y？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:03:23.660

试试包车，?linearHypothesis，例子

```
a multivariate linear model for repeated-measures data
see ?OBrienKaiser for a description of the data set used in this example. 
```

但是，它可能不适合您拥有的真实 XY。

# express - ExpressJS 显示登录用户和未登录用户的不同视图部分

> ID：11168704
> 
> 赞同：0
> 
> 时间：2012-06-23T10:17:24.693
> 
> 标签：express

如何根据用户是否登录向用户显示不同的内容。一个非常简单的用例：

*   显示未登录用户的登录按钮
*   显示欢迎 {用户名} | 否则注销

我相信我应该检查会话但是我怎么能这样做而不每次都将会话（或只是用户名/ID）传递到视图中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:07:11.583

1）创建一个动态助手“用户”，例如：

```
app.dynamicHelpers({
  user: function(req, res){
    var roles, name;

    if (req.session && req.session.auth == true) {
      roles = ['member'];
      name = (req.session.user) ? req.session.user.name : 'Registered member';
      id = (req.session.user) ? req.session.user.id : null;
    }
    else {
      roles = ['guest'];
      name = 'Guest';
      id = null;
    }

    return {
      name: name, 
      id: id,
      roles: roles,
      isGuest: roles.indexOf('guest') !== -1,
      isMember: roles.indexOf('member') !== -1,
      isAdmin: roles.indexOf('admin') !== -1
    }
  }
}); 
```

2) 在视图中（如果您使用 Jade）使用以下条件符号：

```
if user.isGuest
  h2 Please register!
if user.isMember
  h2 Hello, member! 
```

# c# - 如何将视频从相机流式传输到

> ID：11168705
> 
> 赞同：0
> 
> 时间：2012-06-23T10:17:27.160
> 
> 标签：c#, windows-phone-7, xaml

我正在制作一个应用程序，该应用程序应该让用户在我的应用程序（300x300）的一个小框架中看到来自手机背面摄像头的视频

但是我在获取流时遇到了一些问题。我尝试了 CameraCaptureTask，但在我的手机上不起作用。我似乎打开了视频应用程序，他们将其关闭，立即返回应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:34:07.657

从此处查看基本相机示例：[Windows Phone 的代码示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=VS.92%29.aspx#BKMK_CameraAndPhotos)

这是一个出色的、功能齐全的示例，可能包含您项目所需的一切。

如果您有兴趣，这里是“演练”版本：[如何：为 Windows Phone 创建基本相机应用程序](http://msdn.microsoft.com/en-us/library/hh202956%28v=vs.92%29.aspx)

# php - 用户头像如何在 wordpress 中工作？

> ID：11168708
> 
> 赞同：3
> 
> 时间：2012-06-23T10:17:42.707
> 
> 标签：php, wordpress, buddypress, avatar-generation

我正在为一个网站迁移到 WordPress，在该网站上，旧网站的所有用户图像都必须在 WordPress buddypress 个人资料中设置为头像。

我编写了一个 PHP 脚本来迁移所有用户以及密码并且工作正常。

我的问题是如何使用 PHP 代码（不是 WordPress 代码）设置用户头像。我不明白它是如何存储的以及它在表中的存储位置。我知道它存储的位置是这样的格式，

> wp_content/uploads/avatars/userid/randomtext.jpg

这`randomtext.jpg`是如何产生的以及这些信息保存在哪里？

谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T10:28:25.993

就是这样，您不必创建任何随机文本。只需在“头像”文件夹中创建一个以用户 ID 作为名称的目录并保存两个图像，例如用户 ID (22)，

wp_content/uploads/avatars/22/22-bpfull.jpg (150x150px) wp_content/uploads/avatars/22/22-bpthumb.jpg (50x50px)

或 wp_content/uploads/avatars/22/anyname-bpfull.jpg wp_content/uploads/avatars/22/anyname-bpthumb.jpg

而已。无需存储在任何表中。只需在各自的目录中创建图像。

# javascript - Javascript removeChild内存泄漏？

> ID：11168714
> 
> 赞同：3
> 
> 时间：2012-06-23T10:18:03.823
> 
> 标签：javascript, memory-leaks

以下 javascript 代码似乎泄漏了内存，但我不知道为什么。我在 chrome 19 和 firefox 12 中试过这个。代码如下：

```
<body>
    <input id="add" type="button" value="add" onclick="add()" />
    <input id="remove" type="button" value="remove" onclick="remove()" />
    <div id="content">
    </div>
</body>

<script>
    var count = 0;

    function add() {
        var i = 0,
            newdiv;

        for (i = 0; i < 10000; i++) {
            newdiv = document.createElement('div');
            document.getElementById("content").appendChild(newdiv);
            newdiv.setAttribute('id', "div" + count);
            newdiv.innerHTML = "section " + count;
            newdiv = null;

            count = count + 1;
        }
    }

    function remove() {
        var i = 0;
        for (i = 0; i < count; i++) {
            document.getElementById("content").removeChild(document.getElementById("div" + i));
        }
        count = 0;
    }

</script> 
```

当您继续单击**添加**按钮，然后单击**删除按钮时，** **Windows 任务管理器**中的内存不断增加。我预计当垃圾收集开始时内存会减少，但这似乎永远不会发生。

所以，我的问题是：**这段代码中是否存在内存泄漏？**如果是这样**，我该如何重构代码来修复泄漏？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:28:25.237

我已经用 Chrome 19.0 对此进行了测试，是的，你是对的，内存增加了。但大约 30 秒后，垃圾收集开始并恢复正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:44:25.730

我不能真正证明存在内存泄漏......但想象一下你想在一场精彩的体育比赛后清理 10000 个瓶子，需要一些时间和资源；）

除了一些有用的注释：使用闭包来封装来自窗口对象的代码。使用对文档的本地引用来避免范围链演练，使用一个片段来附加所有新的 div，而不是每次都访问文档，避免函数开销（这些都只是建议，不一定是您正在寻找的东西，但无论如何都是好的东西并且至少应该减少一点问题:)

注意：这些示例可能无法完全跨浏览器工作

```
<body>
  <input id="add" type="button" value="add">
  <input id="remove" type="button" value="remove">
  <div id="content"></div>
</body>
<script>
  (function(DOC) {
    var count = 0, getById = DOC.getElementById, createFragment = DOC.createDocumentFragment;

    getById("add").addEventListener("click", function() {
      var i = 0,
          newdiv,
          fragment = createFragment();

      for (; i < 10000; i++) {
        newdiv = document.createElement('div');
        newdiv.id = "div" + count;
        newdiv.innerHTML = "section " + count;

        fragment.appendChild(newdiv);
        delete newdiv;
      }
      getById("content").appendChild(fragment);
      count = i;
    }, false);

    getById("remove").addEventListener("click", function() {
      var element, i = 0;
      for (; i < count; i++) {
        element = getById("div" + i);
        element.parentNode.removeChild(element);
      }
      count = 0;
    }, false);

  })(document);
</script> 
```

我希望这有助于解决或至少减少泄漏。=)

# jquery - 如何通过使用从其类中获取的鼠标悬停元素的 id 来获取前一个元素的 id

> ID：11168719
> 
> 赞同：-1
> 
> 时间：2012-06-23T10:18:25.570
> 
> 标签：jquery

我这样做了，但没有用。谁能帮我？谢谢。

```
$('.current_element').mouseover(function() {
   var currentElementId = $(this).attr('id');
   var previousElementId = $('#' + currentElementId).prev('.previous_element').attr('id');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:21:40.477

您可以执行以下操作：

```
$('.current_element').mouseover(function() {
   var currentElementId = $(this).attr('id'); // if you don't need for any future
                                              // use then you can remove this line

   // $(this) refer to the hovered element
   var previousElementId = $(this).prev('.previous_element').attr('id');
}); 
```

# sql - 在 SQL Server 中检测客户端的断开连接

> ID：11168720
> 
> 赞同：5
> 
> 时间：2012-06-23T10:18:38.543
> 
> 标签：sql, sql-server, triggers, client

当与 SQL Server（从**客户端**）的客户端连接被切断时，如何在 SQL Server（2008 或 2012）中检测到这种断开连接？

我可以用**服务器触发器**解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:48:36.780

You can create an [event notification](http://technet.microsoft.com/en-us/library/ms186376.aspx) for the [Audit Logout](http://msdn.microsoft.com/en-us/library/ms175827.aspx) event. The notification can launch an [activated procedure](http://msdn.microsoft.com/en-us/library/ms171617%28v=sql.105%29.aspx). Consider though that event notifications are asynchronous.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T10:35:13.183

您可以查询其中一张`sys`表 ( `sysprocesses`)

```
SELECT 
   DB_NAME(dbid) AS Database, 
   loginame AS LoginName
FROM  sys.sysprocesses 
```

您还可以运行以下存储过程来查看谁处于活动状态：

```
 sp_who2 
```

您必须让 SQL 作业或活动代理检查谁退出了。

# wpf - WPF Metro 样式列表框

> ID：11168721
> 
> 赞同：2
> 
> 时间：2012-06-23T10:18:40.140
> 
> 标签：wpf, silverlight, xaml, microsoft-metro

我在设置 ListBox 选择背景的样式时遇到问题。我最初使用 ListView，样式问题较少，但将其移至 Silverlight 应用程序，我发现它没有 ListView，所以我只使用了 ListBox。

我希望我的应用程序可以轻松移植到 Silverlight 和 Windows Phone 中，所以我使用了 ListBox，但现在在样式上遇到了问题。

我的 Metro 应用程序有深色主题，我有自定义 ListBoxItem，但不知道为什么当我点击它时，它看起来像这样 ![在此处输入图像描述](../Images/68e77ff1b15c13297e93b5720859ad38.png)

原来使用ListView的时候是这样的 ![在此处输入图像描述](../Images/f7b93432390fc16c7b4e8e2418a7211e.png)

在我的自定义 ItemsTemplate 中添加背景颜色使其看起来像这样 ![在此处输入图像描述](../Images/32bca87bab03f2684af2e1a033441ce3.png)

如何摆脱白色背景并在悬停时重新设置项目的样式，因为它看起来像这样 ![在此处输入图像描述](../Images/6cbc8ef458ded8a8a7dae64007ed0fa4.png) ![在此处输入图像描述](../Images/1bb711c75ac988310a0f78a1a59d440a.png)

到目前为止，这是我的列表框的 XAML

```
<ListBox Grid.Row="3" Name="lvSubmeters" VerticalAlignment="Top" HorizontalAlignment="Stretch" SelectedItem="{Binding Path=SelectedListViewItem, Mode=TwoWay}" SelectedIndex="{Binding Path=SelectedListViewIndex, Mode=TwoWay}"  ItemTemplate="{StaticResource SubmeterItems}" ItemsSource="{Binding Path=Store.AllItems}" Background="{x:Null}" Foreground="White">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Margin" Value="0" />
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

如果你想要我的自定义 ItemsTemplate

```
<DataTemplate x:Name="SubmeterItems">
    <Grid VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="5,5,5,5">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="166"/>
            <ColumnDefinition Width="100*"/>
            <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" VerticalAlignment="Top">
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding MeterID}" FontSize="24"  FontWeight="Bold" Foreground="#FF429AA3" />
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding Fullname}" FontSize="16"  />
        </StackPanel>
        <StackPanel Grid.Column="1" VerticalAlignment="Top" Height="95">
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text=" " FontSize="24"  FontWeight="Bold" Foreground="#FF429AA3" />
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="29*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock Grid.Column="0" VerticalAlignment="Top" Text="Last Reading:" FontSize="14" Margin="0,0,5,5"  />
                    <TextBlock Grid.Column="0" VerticalAlignment="Top" Text="New Reading:" FontSize="14" Margin="0,0,5,5"  />
                    <TextBlock Grid.Column="0" VerticalAlignment="Top" Text="KW/H Used:" FontSize="14" Margin="0,0,5,5"  />
                </StackPanel>
                <StackPanel Grid.Column="1">
                    <TextBlock Grid.Column="1" VerticalAlignment="Top" Text="{Binding LastReading}" FontSize="14" Margin="0,0,5,5" FontWeight="Bold"  />
                    <TextBlock Grid.Column="1" VerticalAlignment="Top" Text="{Binding NewReading}" FontSize="14" Margin="0,0,5,5" FontWeight="Bold"  />
                    <TextBlock Grid.Column="1" VerticalAlignment="Top" Text="{Binding KwHUsed}" FontSize="14" Margin="0,0,5,5" FontWeight="Bold"  />
                </StackPanel>
            </Grid>
        </StackPanel>

        <StackPanel Grid.Column="2" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Background="Black">
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding KwhUsedAmount}" FontSize="20"  FontWeight="Bold" Foreground="Red" TextAlignment="Right" Margin="0,0,5,0" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="+" FontSize="20" Foreground="#99FF0000" TextAlignment="Right"  Margin="0,0,5,0"/>
                <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding AdditionalCharges}" FontSize="20" Foreground="#99FF0000" TextAlignment="Right"  Margin="0,0,5,0"/>
            </StackPanel>
            <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Top" Text="{Binding TotalAmount}" FontSize="34" FontWeight="Bold" Foreground="Green" TextAlignment="Right"  Margin="0,0,5,0" />
        </StackPanel>
    </Grid>
</DataTemplate> 
```

我试着把它带到 Blend 4，但我找不到办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:47:12.857

在我看来，您上面的屏幕截图与您提供的 XAML 不太匹配，但我想我可以回答您的问题。

1.  对于每个项目周围的白色边框 - 从选择项目时边框变为紫色的方式，您可以看出它是 ItemContainer 的一部分（因为这是被选中的内容）。ItemContainer 将包含每个 ListBoxItem 的内容。使用 DataTemple（或 ItemTemplate 属性）呈现内容。在您的 DataTemplate 中，最上面的网格周围有 5 个边距，这意味着当使用该 DataTemplate 呈现内容时，内容的外部将有一个边距。这似乎是你在每个项目周围的白色边框所得到的，所以我很确定这就是发生的事情。去掉 DataTemplate 最顶部网格中的边距，白色边框将消失。如果这不正确，

2.  更改 ListBoxItem 的颜色/样式非常简单，并且有几种方法可以做到。最简单的方法（在我看来）是向 ItemContainerStyle 添加一个触发器，用于调整 MouseOver 上的背景颜色。这是一个简单的示例，扩展了现有的 ItemContainerStyle（如果您愿意，触发器可以更高级）：

    ```
    <ListBox.ItemContainerStyle>
      <Style TargetType="ListBoxItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="White" />
        <Setter Property="Margin" Value="5" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Green"/>
            </Trigger>
        </Style.Triggers>
      </Style>
    </ListBox.ItemContainerStyle> 
    ```

希望有帮助。

# iphone - 我的标签无法从 pickerview 中获取价值

> ID：11168722
> 
> 赞同：-1
> 
> 时间：2012-06-23T10:18:57.860
> 
> 标签：iphone, ios5, xcode4.3

我的 numberOfComponentsInPickerView ：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 3;
} 
```

我的 numberOfRowsInComponent ：

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if (component == 0)
        return 100;
    if (component == 1)
        return 100;
    if (component == 2)
        return 100;

    return 0;
} 
```

我的 titleForRow 是这样的：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{    
    if (component == 0)
        return [NSString stringWithFormat:@"%d", row];
    if (component == 1)
        return [NSString stringWithFormat:@"%d", row];
    if (component == 2)
        return [NSString stringWithFormat:@"%d", row];

    return 0;
} 
```

我的 didSelectRow **在像 Paras Joshi 所说的那样编辑之后：**

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    int year = [picker selectedRowInComponent:0];
    int month = [picker selectedRowInComponent:1];
    int day = [picker selectedRowInComponent:2];
    if(viewPicker.tag == 1)
        labelDate1.text = [year stringByAppendingFormat:@" : %d : %d", month, day];
    else
        labelDate2.text = [year stringByAppendingFormat:@" : %d : %d", month, day];
} 
```

它仍然给我错误“错误的接收器类型'int'”，我仍然不知道如何解决它。我的标签如何从 titleForRow 获取数据？

**年月日的输入都是数字（从 0 到 99），所以我写了 -> return [NSString stringWithFormat:@"%d", row];**

我没有将我的pickerview 的数据放在**- (void)viewDidLoad**，因为我希望我的 labelDate1 或 labelDate2 从pickerview 获取数据。我的标签是否有可能像我上面写的那样从pickerview获取数据？或者我必须将我的数据写入**- (void)viewDidLoad**吗？

寻求帮助，感谢您观看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:40:50.800

你好@Piyo Piyo 你的

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

方法完全错误，您将 NSInteger 分配给 NSString。这就是为什么你会出错。您应该使用 NSArray 将数据放入选取器视图行并从此处选取数据。在这里，我将制作一个小示例代码。

这是您的 viewController.h 文件...

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UIPickerViewDelegate, UIPickerViewDataSource>
{
    UIPickerView *myPickerView;

    NSMutableArray *arrayYear;
    NSMutableArray *arrayMonth;
    NSMutableArray *arrayDay;

    UILabel *lblDay;
    UILabel *lblMonth;
    UILabel *lblYear;
}

@end 
```

有三个数组分别包含日、月和年的数据，三个 UILabel 用于显示数据。显然是一个pickerview。

现在来看看你的 viewController.m 部分。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

   // UIPickerView declaration by coding 
    myPickerView = [[UIPickerView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 216.0)];
    myPickerView.delegate = self;
    myPickerView.showsSelectionIndicator = YES;
    [self.view addSubview:myPickerView];

    // add some day number to day array
    arrayDay = [[NSMutableArray alloc]init];
    for(int i=1;i<6;i++)
    {
        NSString *string = [NSString stringWithFormat:@"%d",i];
        [arrayDay addObject:string];
    }

    // add some month string to month array
    arrayMonth = [[NSMutableArray alloc]init];
    [arrayMonth addObject:@"June"];
    [arrayMonth addObject:@"July"];
    [arrayMonth addObject:@"August"];
    [arrayMonth addObject:@"September"];
    [arrayMonth addObject:@"October"];

    // add some year number to year array
    arrayYear = [[NSMutableArray alloc]init];
    for(int i=2006;i<2011;i++)
    {
        NSString *string = [NSString stringWithFormat:@"%d",i];
        [arrayYear addObject:string];
    }

     //set initially text to day label
     lblDay = [[UILabel alloc]initWithFrame:CGRectMake(10.0, 250.0, 90.0, 50.0)];
    [lblDay setText:[arrayDay objectAtIndex:0]];
    [self.view addSubview:lblDay];

    //set initially text to month label
    lblMonth = [[UILabel alloc]initWithFrame:CGRectMake(110.0, 250.0, 90.0, 50.0)];
    [lblMonth setText:[arrayMonth objectAtIndex:0]];
    [self.view addSubview:lblMonth];

    //set initially text to year label
    lblYear = [[UILabel alloc]initWithFrame:CGRectMake(210.0, 250.0, 90.0, 50.0)];
    [lblYear setText:[arrayYear objectAtIndex:0]];
    [self.view addSubview:lblYear];

    //set initially selection to each component of UIPickerView
    [myPickerView selectRow:1 inComponent:0 animated:NO];
    [myPickerView selectRow:1 inComponent:1 animated:NO];
    [myPickerView selectRow:1 inComponent:2 animated:NO];
}

//here you are returning the number of component, which are 3 in this case
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 3;
}

//this is your didSelectRow method and here you are assigning a new text to 
//label accordingly to if condition
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

    if(component == 0)
    {
        lblDay.text = [arrayDay objectAtIndex:row];
    }
    if(component == 1)
    {
        lblMonth.text = [arrayMonth objectAtIndex:row];
    }

    if(component == 2)
    {
        lblYear.text = [arrayYear objectAtIndex:row];
    }

}

 //this is your numberOf row in component in this case each component have 5 
 //rows thats why i wrote only return 5; here you can put if condition here for 
 //returning different rows for each component
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
     return 5;
}

 // and this is showing title on rows
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
{
    if (component == 0)
    return [arrayDay objectAtIndex:row];
    else if (component == 1)
    return [arrayMonth objectAtIndex:row];
    else if (component == 2)
    return [arrayYear objectAtIndex:row];
    else
        return 0;
} 
```

我希望本教程对您有所帮助。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:29:45.773

你设置了 UIPickerView 的委托吗？我的意思是，你的 pickerView:didSelectRow:inComponent 被调用了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:44:32.750

In your program you are appending string to an integer that is the issue. This code makes the issue. Because `year` is an integer.

```
labelDate1.text = [year stringByAppendingFormat:@" : %d : %d", month, day]; 
```

Please check with this code.

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    int year = [picker selectedRowInComponent:0];
    int month = [picker selectedRowInComponent:1];
    int day = [picker selectedRowInComponent:2];
    NSString *date = @"";
    if(viewPicker.tag == 1)
        labelDate1.text = [date stringByAppendingFormat:@" %d : %d : %d",year, month, day];
    else
        labelDate2.text = [date stringByAppendingFormat:@"%d : %d : %d", year, month, day];
} 
```

# asp.net - 是否可以为 Web 服务请求输入参数分配默认值

> ID：11168723
> 
> 赞同：0
> 
> 时间：2012-06-23T10:19:05.087
> 
> 标签：asp.net, web-services, input-parameters

我想知道是否可以为 Web 服务请求输入参数分配默认值。这是我在 wsdl 中的输入参数：

```
<element name="pensionType" default="0" type="int"> 
```

在代码方面，我像这样检查pensionType 的值：

```
if (pensionType!=0)
{ TODO code here}
else
{ return warning that no data found} 
```

我在 Mozilla Poster 中对此进行了测试。因此，据此我预计，如果我没有为 pennmentType 提供任何价值，我会收到该警告。我收到一个很长的错误：

```
System.Web.Services.Protocols.SoapException：服务器无法读取请求。--->  
    System.InvalidOperationException：XML 文档中存在错误 (13, 39)。---> System.FormatException：输入字符串的格式不正确。在  
    System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) at  
    System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info) at System.Xml.XmlConvert.ToInt32(String s) at  
    Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReader1.Read44_getFileTypesRequest(Boolean isNullable, Boolean checkType) 在  
    Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReader1.Read45_getFileTypes(Boolean isNullable, Boolean checkType) 在  
    Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReader1.Read62_getFileTypes() 在  
    Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer24.Deserialize（XmlSerializationReader 阅读器）在  
    System.Xml.Serialization.XmlSerializer.Deserialize（XmlReader xmlReader，字符串 encodingStyle，XmlDeserializationEvents 事件）
--- 内部异常堆栈跟踪结束 --- 在  
    System.Xml.Serialization.XmlSerializer.Deserialize（XmlReader xmlReader，字符串 encodingStyle，XmlDeserializationEvents 事件）在  
    System.Xml.Serialization.XmlSerializer.Deserialize（XmlReader xmlReader，字符串 encodingStyle）在  
    System.Web.Services.Protocols.SoapServerProtocol.ReadParameters()   
--- 内部异常堆栈跟踪结束 --- 在  
    System.Web.Services.Protocols.SoapServerProtocol.ReadParameters() 在  
    System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest(

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:22:52.417

你可以这样做：

```
if(pensionType != null)
{
    if (pensionType!=0)
    { TODO code here}
    else
    { return warning that no data found}
} 
```

这可能会帮助你..!!

# c - 优化程序 (c)

> ID：11168732
> 
> 赞同：0
> 
> 时间：2012-06-23T10:21:05.430
> 
> 标签：c, optimization

我有我的程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char *argv[])
{
    int r, line = 0, found = 0;
    float temp, t_tot = 0;
    char loc[32];

    FILE *fp;

    fp = fopen(argv[1], "r");

    if (fp == NULL)
    {
        printf ("Error opening the file\n\n'");
        exit(EXIT_FAILURE);
    }

    if (argc == 3)
    {
        while ((r = fscanf(fp, "%f %s\n", &temp, loc)) != EOF)
        {
            line++;

            if (r == 2)
            {
                if(strcmp(argv[2], loc) == 0)
                {
                    t_tot += temp;
                    found++;
                }
            }
            else
                printf ("Error, line %d in wrong format!\n\n", line);
        }

        printf ("The average temperature in %s is: %.1f\n\n", argv[2], (t_tot/found));
    }

    fclose(fp)

    return 0;

} 
```

该程序需要阅读所有行并找到我在 argv[2] 上写的城市。它会告诉我那个城市的平均温度，如果文件中的一行格式错误，它会通知我。

我想知道如何“优化”此代码以提高效率并以更“紧凑”的方式编写相同的内容。我是学生，所以所有建议都被接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:01:14.053

**获取**像 GNU GProf 或 AMD CodeAnalyst 这样的分析器。

另请参阅[适用于 Windows 的最佳免费 C++ 分析器是什么？](https://stackoverflow.com/questions/67554/whats-the-best-free-c-profiler-for-windows-if-there-are)

然后以最高优化编译您的程序，并尝试检查哪些部分往往需要很多时间。

通常应避免在没有分析器的情况下进行优化。

* * *

当我们这样做时，您的程序实际上并没有进行任何需要花费大量时间的计算，并且它的性能可能会受到 I/O 的限制（我的猜测）。

您可以做的另一件事，而不是优化，是**让它安全和正确**- 例如，如果输入文件中的字符串长度超过 32 个字符，它就不会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:31:03.243

您还可以使用编译器优化选项优化目标代码。对于 gcc，只需添加`-O3`（或`-O1`或`-O2`，取决于优化级别）参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:24:44.587

改了怎么办

```
if (r == 2)
{
    if(strcmp(argv[2], loc) == 0)
    {
        t_tot += temp;
        found++;
    }
} else {
    printf ("Error, line %d in wrong format!\n\n", line);
} 
```

进入这一点，以避免嵌套的 if 块：

```
if (r == 2 && strcmp(argv[2], loc) == 0) {
    t_tot += temp;
    found++;
} else if (r != 2) {
    printf ("Error, line %d in wrong format!\n\n", line);
} 
```

对我来说看起来干净多了！

# reporting-services - 参数缺少值 ssrs 2008

> ID：11168738
> 
> 赞同：18
> 
> 时间：2012-06-23T10:22:06.207
> 
> 标签：reporting-services, ssrs-2008

我有一个隐藏的整数数据类型参数。当我运行报告时，报告给我一个错误

> 参数 X 缺少值

但是，如果我使参数可见，它就可以工作。我尝试提供默认值 0 但这不足以满足我的要求，因为我的子报告（Drill-dowm）取决于此参数。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T18:01:29.363

确保您没有为参数指定可用值。内部和隐藏参数的可用值应为“无”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-29T09:46:28.050

*首先，*

通过报告参数属性检查该参数的 -**可用值。**

不得指定任何值。所以我们应该将它设置为**无**

*第二个解决方法是，*

只需在报告参数属性内的**默认值中的****指定值**处添加一个空格。

 **这肯定会奏效。希望它能节省您的时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-10T16:18:54.553

我必须做一个“如果存在”声明才能消失。它对我有用，因为它使它始终返回一个值，即使我的查询不需要该值。

```
 if exists (my select query)
    my select query
    else 
    select '2' 
    // '2' would never be used, but it made ssrs stop giving me
    // the stupid error and execute the rest of the query 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-04T08:51:02.303

如果您从查询中指定可用值，则默认值必须在可用值列表中。（可用）中的默认值 = true。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-04T11:43:47.400

如果您有一个参数依赖于另一个参数，而数据集查询中没有“默认值”并且不接受空值，也会出现问题。

例如：

**参数 1**有一个默认值：来自数据集“EmployeeSearch”的 NameEmployee

但是数据集“EmployeeSearch”在名为@Month 的查询中有一个过滤器或一个参数，用于指示月份的编号。所以如果@Month 的值为空，SSRS 会说“参数缺少值”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-02T11:54:42.747

只需添加 1 个默认值即可绕过此错误（即使永远不会使用该默认值）。

- 在该特定参数的“报告参数属性”下，转到“默认值”页面。

-切换“指定值”

- 添加一个值（我添加了：“just_a_filler_to_get_around_hidden_​​value_error”，所以当我稍后回顾它时，我记得我为什么要这样做）

- 单击确定

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T15:23:45.850

假设您遇到与我相同的问题，尝试使用 ReportViewer 组件在网页上运行报告，我设法通过`null`在呈现报告之前添加一个参数来解决该问题：

**C#代码：**

```
var parameters = new List<ReportParameter>();
parameters.Add(new ReportParameter("ParameterName", (string)null));
ReportViewer1.ServerReport.SetParameters(parameters); 
```

希望这会有所帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-19T17:09:36.423

我想添加到 dmbreth 的正确答案。

我错过了参数的值仍然需要与某些东西相关联的概念。最初，我通过使用参数属性的可用值部分来绑定数据集的输出，但根据 dmbreth 的回答，情况并非如此。最后，我将输出相关性设置从“**可用**值”部分移至“**默认**值”部分，这样就成功了。

因此，总而言之，在参数属性对话框中：

常规页面 - 允许选中多个值（此选项特定于我的应用程序），参数可见性设置为内部

可用值页面 - 无

默认值页面 - 从查询中获取值，[适当的数据集，此处的值]

高级页面 - 这里没有意义

希望这足以让其他有同样问题的人受益......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-30T01:57:54.563

我有一个类似的问题，SSRS 设置的默认值为 ，`(Null)`但是我的报告不需要该参数；我发现它对测试过滤列表很有用，所以我保留了它，我想我可以在数据集配置的 SSRS 中删除它。但是我将其更改为`=System.DBNull.Value`（我想这可能是任何表达式），这对我有用，所以如果需要，我仍然可以传入一个值并设置可用值（必须确保将 NULL 值添加到我的数据集），如果我决定在以后取消隐藏。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-15T04:04:58.570

这里还有另一种潜力。我遇到过报表设计器工作但服务器报表对象没有工作的情况。解决方案是删除服务器对象，然后从设计器中重新保存。**

# django - Django 和 Post to Facebook（无身份验证）

> ID：11168741
> 
> 赞同：1
> 
> 时间：2012-06-23T10:22:17.353
> 
> 标签：django, facebook

好的，我需要一些帮助来了解 Facebook 网站集成过程背后的过程以及如何将其集成到我的网络应用程序中......

在其最基本的形式中，我的网站存储并显示用户对产品的评论（不仅如此，但这就是与此问题相关的全部内容）。我想做的是让他们通过单击按钮将评论连同产品名称（和我的网站）一起发布到他们的 Facebook 墙上。

我根本不需要用户登录我的网站，无论是使用 Facebook 还是任何其他身份验证系统，发布到 Facebook 部分是可选的。

显然，如果他们决定将他们的评论发布到 Facebook，那么他们将需要登录，但我宁愿暂时将他们从页面上移开以登录、发布，然后再回到我的网站。

我需要知道的是，我实际上需要集成多少 Facebook 的 API、Open Graph 和 Auth 系统？

我曾希望我可以生成一个简单的 Facebook 链接，并将他们的评论嵌入为 POST 元素......？

如果有人能指出我正确的方向，我将不胜感激！

（PS 我需要一个类似的 Twitter 解决方案，但我认为这更容易！？！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:41:48.410

Feed 对话框不再允许包含预设消息，因此如果您想预先填写消息，则必须通过 Graph API 发布该帖子（即使那样，您也应该这样做，如果您允许用户先编辑预先填写的消息）。

请参阅此处了解如何通过 Graph API 代表用户发帖，[https://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)

[如果您将JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)嵌入到您的页面中，您可以在所有客户端执行此操作。

您需要在 FB 上设置一个应用程序，然后让用户连接到它（使用 FB.login），同时请求必要的权限（publish_stream），并在成功登录后使用 FB.api 进行 Graph API 调用.

# jquery - 不能将两个文本字段值放在一起

> ID：11168743
> 
> 赞同：0
> 
> 时间：2012-06-23T10:22:58.517
> 
> 标签：jquery

我有两个`textfield`在本地填写，另一个从`ajax`查询中获取它的值。我需要将两个文本字段值放在一起。本地的值`textfield`被读取，但另一个似乎是`undefined`。

```
var firstname = $("#id_of_textfield_with_local_value").val();
var lastname = $("#id_of_textfield_with_remote_value").val();
var combined = firstname + "-" + lastname;

$("#combined").val(combined); 
```

`textfiled`上面的代码在with中打印以下内容`id=combined`：`reza-` 实际上`lastname`必须出现在破折号之后！

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:24:05.233

你的代码似乎很好。

### 根据问题

**“从 ajax 查询中获取它的值”**

当您尝试在 中设置第二个文本字段的值时，您应该在该回调中`ajax`尝试上述代码。`ajax`在回调之外，`ajax`您可以获得第一个文本字段值，但不能获得第二个值。

# python - cpanel中的python库

> ID：11168747
> 
> 赞同：0
> 
> 时间：2012-06-23T10:23:24.370
> 
> 标签：python, django, web-hosting, cpanel

我正在使用 heliohost 的免费服务来测试我的 django 应用程序。但是 Heliohost 没有为我提供 shell 访问权限。无论如何要在主机上安装python库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:30:55.150

您可以尝试将它们放入您的`PYTHONPATH`. 通常，您当前的工作目录位于您的`PYTHONPATH`. 如果情况发生变化，您可能需要为其添加路径（可能在每个文件中，您应该检查，或者始终包含一个公共文件），并将库放在那里。你可以这样做`import sys;sys.path.append(the_path)`

我不确定所有的库都可以工作，但是那些是纯 python 的，你应该能够将源代码复制/粘贴到一个目录中，我认为它们会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T07:23:01.127

你应该通知 heliohost 的支持。这个服务器有很好的支持，可以帮助你或安装你想要的任何包

# sql - 如何查找一年中所有月份的第一个日期

> ID：11168749
> 
> 赞同：2
> 
> 时间：2012-06-23T10:23:54.807
> 
> 标签：sql, oracle

大家好，我正在尝试获取一年中所有月份的 Ist 日期，例如 Curretn 年份是 2012 年，我想从查询中获得以下结果

```
1-JAN-2012
1-FEB-2012
1-APR-2012
.
.
.
.
.
.
1-DEC-2012 
```

有没有人可以解决我的问题提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T02:47:43.057

只是为了完整性 - 这是一个更简单的版本：

```
select ADD_MONTHS(TRUNC(SYSDATE,'Y'),ROWNUM-1)
from dual connect by level <= 12; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T11:25:33.527

日历表更易于使用。例如，在我工作的地方，您只需运行此查询。

```
select cal_date
from calendar
where year_of_date = 2012
  and day_of_month = 1; 
```

对于一个*明显*的查询，有很多话要说。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T10:40:48.173

请尝试以下方法。您可能需要调整日期格式/时区

```
select to_date('2012/'||l||'/01', 'yyyy/mm/dd') 
from (select level l from dual connect by level < 13) 
```

编辑：正如评论中的操作所提供的，需要采用当前年份而不是对其进行硬编码。更新后的查询是

```
SELECT L || '/01/' || TO_CHAR (SYSDATE, 'YYYY') DATESS FROM 
(SELECT LEVEL L FROM DUAL CONNECT BY LEVEL < 13) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T10:57:19.437

如果您只想使用日期函数来获取特定年份的值，您可以使用以下语句，[也可以使用 SQL](http://www.sqlfiddle.com/#!4/20160/12) *Fiddle'd*：

```
select add_months(trunc(last_day(add_months(trunc(to_date('2011'
                                                         ,'yyyy')
                                                  , 'y')
                                            , -1)
                                 ) + 1
                        )
                 , level - 1) 
  from dual
connect by level <= 12 
```

这会将您的“年”转换为日期，将其截断为 1 月 1^日，因为默认情况下`to_date('2011', 'yyyy')`会返回该年的当前日期。然后它会删除一个月，将我们带到 2010 年 12 月 1^日。获取该月的最后一天，即 12 月 31^日并添加一天，所以回到 1 月 1 日，但我也做了一个`connect by level`并添加`level - 1`，即0 一月返回正确的日期。

不幸的是，Oracle 没有`first_day`功能，这会使这变得容易得多。

今年大致相同：

```
select add_months(trunc(last_day(add_months(trunc(sysdate,'y'),-1)) + 1), level - 1) 
  from dual
 connect by level <= 12 
```

# c++ - 在 OpenGL 中绘制立方体。带有迭代的更短代码，但不起作用

> ID：11168753
> 
> 赞同：0
> 
> 时间：2012-06-23T10:24:51.083
> 
> 标签：c++, opengl

我是 OpenGL 的新手。我已经成功绘制了立方体，并尝试改进代码，想出了这个，但这只是绘制立方体的第一面：

```
glPushMatrix();
glColor3d(1,0,0);
glRotatef(45,0,1,0);
glTranslatef(0,0,3);

for(int i=0;i<6;i++){
   glBegin(GL_QUADS);
   glVertex3f(0,0,0);
   glVertex3f(3,0,0);
   glVertex3f(3,3,0);
   glVertex3f(0,3,0);
   glEnd();
   if(i<4)
    glRotatef(90,0,1,0);
   if(i=4)
    glRotatef(90,1,0,0);
   if(i=5)
    glRotatef(180,1,0,0);
}

glRotatef(90,1,0,0);

glPopMatrix(); 
```

迭代似乎根本不起作用！我是否缺少有关 OpenGL 工作方式的基本知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:49:04.990

第一个答案是：您使用的是过时版本的 OpenGL。现在你不会一个一个地发送顶点，而是：

*   创建一个包含一些顶点的内存缓冲区
*   将该缓冲区发送到 GPU 内存中的缓冲区 (VBO)
*   `glDrawArrays`使用or直接从那里渲染`glDrawElements`。

有时间试试，工作得更快:-)

* * *

你的例子有什么问题 - 你是不是这个意思......？

```
if (i == 4) 
```

和

```
if (i == 5) 
```

请启用您的编译器警告，以便您了解它。（顺便说一句，我也没有看到 - 我的编译器做到了:-)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:49:33.223

您的方法的问题是，一旦旋转结束，您必须在 z 轴上平移，绘制四边形，然后平移回原点。

您正在尝试的一般方法是：

```
glPushMatrix();

<initial-setup>

for i = 0 to 5
    translate on z-axis +(width/2) units
    draw the quad
    translate on z-azis -(width/2) units
    if i<=3
        rotate 90 about y-axis
    elif i == 4
        rotate 90 about x-axis
    else
        rotate 180 about x-axis
glPopMatrix(); 
```

正如@kos 正确指出的那样，将下一个语句替换`if(i=4)`为`if (i==4)`和类似。

# javascript - 使用 jquery 动态对表列进行对角编号

> ID：11168760
> 
> 赞同：5
> 
> 时间：2012-06-23T10:25:53.270
> 
> 标签：javascript, jquery

嗨，各位程序员，

我正在寻找一种方法来填充预先构建的动态空白表，其中包含编号（如果可能，还包括着色），如下所示：

![5x5 网格](../Images/b7c4ef46bda5f1c3bec25e4423772d5b.png)
如您所见，编号是对角线升序。我知道可能有某种方法可以根据表 td 索引计算数字，但不能完全弄清楚如何对对角线的每一列执行此操作。任何帮助，将不胜感激。

**更新：**好的，从我的假期回来。感谢所有聪明人的回复。我敢肯定，你们都必须经历过客户颈部的痛苦，我被告知规格已经改变（再次）。在这种情况下，我不得不将网格/矩阵放入数据库并使用数据透视表输出。每个正方形都必须是可定制的颜色。

尽管我从你以前不知道的回复中学到了很多漂亮的新 javascript/jquery 技巧，但没有什么会浪费的，所以谢谢，我一定会付钱的 :)

这就是我最后想出的。

![自定义网格](../Images/1fd2627867eafcc17f2e29621c0436cf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T12:10:01.007

鉴于您说“尽可能着色”，我将提供一个示例解决方案，它不会按照您想要的方式进行颜色处理（它以一种我发现更容易编码和更有吸引力的方式来处理）但确实可以处理对于不同的表格大小，所有编号都正确。

下面的函数假设表已经存在；在[这个演示](http://jsfiddle.net/7NZt3/2)中，我包含了代码，该代码可以生成您指定的任何大小的表格，然后调用下面的函数来进行编号和颜色。

```
function numberDiagonally(tableId) {
    var rows = document.getElementById(tableId).rows,
        numRows = rows.length,
        numCols = rows[0].cells.length,
        sq = numRows + numCols - 1,
        d, x, y,
        i = 1,
        dc,
        c = -1,
        colors = ["green","yellow","orange","red"];

    diagonalLoop:
    for (d = 0; d < sq; d++) {
        dc = "diagonal" + d;
        for (y = d, x = 0; y >= 0; y--, x++) {
            if (x === numCols)
                continue diagonalLoop;
            if (y < numRows)
                $(rows[y].cells[x]).html(i++).addClass(dc);
        }
    }
    for (d = 0; d < sq; d++)
        $(".diagonal" + d).css("background-color", colors[c=(c+1)%colors.length]);
} 
```

演示：http: [//jsfiddle.net/7NZt3/2](http://jsfiddle.net/7NZt3/2)

我想出的一般想法是想象一个正方形是 x 和 y 尺寸中较大的一个的两倍大，然后使用循环从该边界正方形的左边缘向上和向右创建对角线 - 即，按照你想要的数字的顺序。**编辑：**为什么是长边的两倍？因为这是我开始编写代码时首先想到的事情并且它起作用了（请注意，`i`保存所显示数字的变量不会为虚构单元格增加）。现在我有时间思考了，我意识到我的`sq`变量可以精确地设置为比行数加上列数小一——对于非方形表来说，这个数字最终会变得相当小。上面的代码和小提琴相应地更新。

请注意，背景颜色可以直接在第一个循环中设置，但我选择分配类并稍后为每个类设置循环。当时似乎是个好主意，因为这意味着可以在 jQuery 中使用单个类选择器轻松选择单个对角线。

准确解释其余部分的工作原理留给读者作为练习......

更新 - 这个版本的颜色更像你要求的：http: [//jsfiddle.net/7NZt3/1/](http://jsfiddle.net/7NZt3/1/)（在我看来不是那么漂亮，但每个人都有他自己的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:09:44.270

这个[小提琴](http://jsfiddle.net/rodneyrehm/mSbXQ/)用数字和颜色填充现有的表格。它不仅限于 5x5 表。我不明白`15`橙色而不是黄色的逻辑，所以我只是将对角线单元格分组为颜色区域。

* * *

```
// we're assuming the table exists
var $table = $('table'),
    // cache the rows for quicker access
    $rows = $table.find('tr'),
    // determine number of rows
    _rows = $rows.length,
    // determine number of cells per row
    _cols = $rows.first().children().length,
    // determine total number of cells
    max = _rows * _cols,
    // current diagonal offset (for coloring)
    d = 1,
    // current row
    r = 0,
    // current cell
    c = 0;

for (var i=1; i <= max; i++) {
    // identify and fill the cell we're targeting
    $rows.eq(r).children().eq(c)
        .addClass('d' + d)
        .text(i);

    if (i < max/2) {
        // in the first half we make a "line-break" by 
        // moving one row down and resetting to first cell
        if (!r) {
            r = c + 1;
            c = 0;
            d++;
            continue;
        }
    } else {
        // in the second half our "line-break" changes to
        // moving to the last row and one cell to the right
        if (c + 1 == _cols) {
            c = 1 + r;
            r = _rows -1;
            d++;
            continue;
        }
    }

    r--;
    c++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T12:47:00.070

这是一个 jsFiddle，可以满足您的要求 - [http://jsfiddle.net/jaspermogg/MzNr8/8/](http://jsfiddle.net/jaspermogg/MzNr8/8/)

我冒昧地让它有点用户可定制；看看浏览器使用这种方法渲染 1000x1000 表需要多长时间很有趣：-D

假设每个单元格的id`[column]x[row]`为`sidelength`

```
//populate the cells with numbers according to the spec
function nums(){

    var xpos = 0
    var ypos = 0     
    var cellval = 1

        for(i=0;i<2*sidelength;i++){

            if(i >= sidelength){

                ypos = sidelength - 1
                xpos = 1 + i - sidelength
                $('td#' + xpos + 'x' + ypos).text(cellval)
                cellval = cellval + 1        

                while(xpos + 1 < sidelength){
                    ypos = ypos-1
                    xpos = xpos+1
                    $('td#' + xpos + 'x' + ypos).text(cellval)
                    cellval = cellval + 1
                }

            } else {

                ypos = i
                xpos = 0        
                $('td#' + xpos + 'x' + ypos).text(cellval)
                cellval = cellval + 1

                while(!(ypos-1 < 0)){
                    ypos = ypos-1
                    xpos = xpos+1
                    $('td#' + xpos + 'x' + ypos).text(cellval)
                    cellval = cellval + 1
                }        

            }

        }

} 
```

在这里，它们是关于如何给臭虫上色的。

```
// color the cells according to the spec
function cols(){
        if(+$('td#0x0').text() === 99){
        return false
        } else {
            $('td').each(function(index, element){
                if(+$(this).text() > 22)
                {
                    $(this).attr("bgcolor", "red")
                } 
                if(+$(this).text() <= 22)
                {
                    $(this).attr("bgcolor", "orange")
                }
                if(+$(this).text() <= 14)
                {
                    $(this).attr("bgcolor", "yellow")
                }
                if(+$(this).text() <= 6)
                {
                    $(this).attr("bgcolor", "green")
                }
            })
        }
} 
```

享受吧？:-)

# hibernate - Hibernate中的多1：多关系

> ID：11168763
> 
> 赞同：0
> 
> 时间：2012-06-23T10:26:36.320
> 
> 标签：hibernate, orm, mapping, one-to-many

如何为同一个实体配置多个一对多关系？

考虑两个班级 Boy 和 Toy。它们看起来如下所示

```
class Boy {
    @OneToMany(mappedBy='ownedBy',fetch=FetchType.EAGER, cascade=CascadeType.ALL)
    private List<Toy> bikes;
    ...
    @OneToMany(mappedBy='ownedBy',fetch=FetchType.EAGER, cascade=CascadeType.ALL)
    private List<Toy> cars;
    ... 
```

* * *

```
class Toy {
    @ManyToOne
    private Boy ownedBy;
    ... 
```

我知道这个配置是错误的。但是我不知道这里需要配置什么。两边的`@OneToMany`和注解应该做什么样的配置？`@ManyToOne`

在将“mappedBy”添加到注释之前，我收到了以下异常消息

```
java.sql.SQLException: Field 'cars_Id' doesn't have a default value
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2444)
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1997) 
```

* * *

但是当注释中没有添加“mappedBy”时，会创建一个像“boy_toy”这样的连接表。添加后，我看不到在数据库中创建的表。

*   更新

boy_toy 表也有三列，即 boy_id、cars_id 和 bikes_id。但理想情况下，它应该像 boy_id 一个 not null 和其他可为空的列。但是生成的所有列都不可为空。我试图从注释中删除“mappedBy”并手动编辑表结构以使cars_id 和bikes_id 可以为空。它就像一个奇迹。

## 所以现在，我唯一剩下的问题是

我们如何指示 hibernate 配置一个带有可空列和不可空列的连接表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:20:32.063

使用继承，在 BOY 和 TOY 之间建立 1-N 关系，采用继承策略 SINGLE_TABLE。要仅检索连接到 Boy 的 Bikes 或 Cars，请使用多态查询。

奖励：即使自行车和汽车是不同的类别，上述设置也不起作用。原因是，您不能使用 fetch=FetchType.EAGER 建立多个 1-N 关系。在我的博客中了解更多信息：[MultipleBagFetchException 和 Java 平等](http://www.istvandevai.com/2012/06/multiplebagfetchexception-and-java.html)

编辑：多态查询

简单的：

entityManager.createQuery("从玩具玩具中选择玩具"); // 返回所有 Toy 实例，无论是自行车还是汽车

entityManager.createQuery("SELECT bike FROM Bike bike"); // 只返回 Bike 类型的玩具实例

在上述表达式中，您显然可以使用所有其他 JPQL 构造，例如 WHERE、连接等。

如果您碰巧使用 JPA2.0，则有一些关于多态性的新功能，例如类型检查和类型转换，请参见此处：[http ://wiki.eclipse.org/EclipseLink/Release/2.1.0/JPAQueryEnhancements](http://wiki.eclipse.org/EclipseLink/Release/2.1.0/JPAQueryEnhancements)

# php - formlabels 的翻译 FOSUserBundle 的注册表不会被覆盖，但登录表单会

> ID：11168765
> 
> 赞同：1
> 
> 时间：2012-06-23T10:26:40.120
> 
> 标签：php, symfony

我的页面上有 2 个表格。一个是 FOSUserBundle 的登录表单，另一个是 FOSUserBundle 的注册表单。

我想更改表单标签的一些默认值。例如，我喜欢像这样更改“fos_user_registration_form_plainPassword_first”

```
fos_user_registration_form_plainPassword_first: "Password:" 
```

我的登录表单有这个（在同一个 FOSUserBundle.en.yml 文件中）

```
security:
    login:
        username: "Username"
        password: "Password"
        remember_me: Remember mee
        submit: Loginn 
```

为什么登录表单有更改的标签，但注册表没有？我看到的唯一区别是注册表单呈现为

```
{{ form_widget(form) }} 
```

并且登录表单具有手动呈现的每个字段，例如：

```
<label for="username">{{ 'security.login.username'|trans({}, 'FOSUserBundle') }}</label> 
```

// 编辑

我已经覆盖了RegistrationForm。此外，我注意到表单甚至没有显示原始 FOSUserBundle.en.yml 文件中配置的标签。我看到标签为“用户名”，而在 yml 文件中它被放置为“用户名：”（带有双点符号）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:01:01.073

解决了。FOSUserBundle/Resources/Views 中的 form.html.twig 中有一个小的表单主题化技巧，它将为每个标签调用 trans 函数。我只需要把这一行放在我覆盖的 register_content.html.twig 文件中

```
{% form_theme form theme %} 
```

# shell - 读取目录文件

> ID：11168766
> 
> 赞同：2
> 
> 时间：2012-06-23T10:26:43.737
> 
> 标签：shell, command-line, cat

我们都知道在linux目录中是一个特殊的文件，包含文件名和组成文件的inode号。我想使用标准命令行实用程序读取此目录文件的内容。

猫 。给出我无法打开目录的错误。但是，显然 vim 可能使用 readdir 可以理解该文件的内容。它以格式化的方式显示目录文件的内容。我想要文件的原始内容。这怎么可能 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:04:33.847

据我所知，这是做不到的。我很确定`dd`会这样做，然后我发现了以下内容

> 'directory' 失败，除非文件是目录。大多数操作系统不允许对目录进行 I/O，因此该标志的实用性有限。

[http://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html](http://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html)

所以我想你在那里有你的答案。dd 支持它，可能还有许多其他实用程序，但这并不意味着 linux 允许它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:55:55.910

我想`stat`可能是你正在寻找的命令。

# cocoa-touch - ViewController.h 和 ViewController.m 前缀

> ID：11168767
> 
> 赞同：0
> 
> 时间：2012-06-23T10:26:51.157
> 
> 标签：cocoa-touch, cocoa, xcode4, uiviewcontroller, viewcontroller

好的，所以我刚刚开始在 Xcode 4.3 中编程。我用来练习 Xcode 编码的所有书籍的示例都显示 ViewController.h 和 ViewController.m 以项目名称作为前缀。例如...如果书名为应用程序“计算器”，在示例中，视图控制器都命名为“CalculatorViewController.h”和“CalculatorViewController.m”。我在这里做错了吗？如果这是一个新手问题，我深表歉意，但我已经尝试了几乎所有事情来解决这个问题！

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:12:29.960

当您将文件添加到项目（.h 和 .m 类文件）中时，没有自动机制根据您的产品名称为您添加这些文件的前缀。您必须手动完成。

您在书中看到这种模式的原因是，一种常见的做法是在文件前面加上一些首字母，以便[命名](http://cocoadevcentral.com/articles/000082.php#2)它们并避免在使用其他人的代码时发生冲突（这就是 Apple 的类以“NS”为前缀的原因）。

Xcode 4 甚至允许您在创建新项目时选择该前缀，因此如果您在此处输入应用程序名称（例如“计算器”），Xcode 最初为您创建的文件将相应地添加前缀（所以您例如`CalculatorViewController`），但是对于您添加的任何其他文件，您必须根据需要显式地为它们添加前缀。我希望这是有道理的。

* * *

**更新：** ![在此处输入图像描述](../Images/a46934a0e8217b9fa61f50e5c1a00f9e.png)

# core-data - 加载以前的模型版本

> ID：11168770
> 
> 赞同：18
> 
> 时间：2012-06-23T10:27:52.140
> 
> 标签：core-data, object-model

我正在使用 initWithContentsOfURL: 构造函数加载 NSManagedObjectModel 模型，如下所示：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"MyDocument" withExtension:@"momd"];
NSManagedObjectModel *mom = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]; 
```

但是，这只让我可以访问模型的最新/当前版本。*是否可以使用相同的momd*文件加载以前的版本？如何？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-12T14:59:46.097

实际上，您可以使用以下命令加载旧版本：

```
- (NSManagedObjectModel *)managedObjectModelForVersion:(NSString *)version
{
        NSURL *modelURL = [[NSBundle mainBundle] URLForResource:[NSString stringWithFormat:@"AppModel.momd/AppModel %@",version] withExtension:@"mom"];
        NSManagedObjectModel *model = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
        return model;
 } 
```

只需将 AppModel 替换为您的模型名称即可。

我正在使用它来摆脱涉及 iCloud 的棘手手动迁移情况。搜索了高低，在任何地方都找不到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T15:46:57.057

如果您只想加载与特定现有商店兼容的模型版本，请尝试：

```
NSError *error = nil;
NSDictionary *storeMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType 
                                                                                         URL:storeURL 
                                                                                       error:&error];
NSManagedObjectModel *oldManagedObjectModel = [NSManagedObjectModel mergedModelFromBundles:[NSArray arrayWithObject:[NSBundle mainBundle]] 
                                                                          forStoreMetadata:storeMetadata]; 
```

请注意，如果您对数据模型版本使用 XCode 版本标识符，则可以通过存储元数据字典中的 NSStoreModelVersionIdentifiersKey 条目访问持久存储的当前版本标识符。

就加载特定的任意版本而言，mom 文件通常位于应用程序包中的 momd 目录下，因此您可以使用 NSFileManager 枚举它们。我相信要找到具有特定版本标识符的版本，您必须使用 NSManagedObjectModel 的 initWithContentsOfURL: 初始化程序，然后检查 versionIdentifiers 属性，或使用 isConfiguration:compatibleWithStoreMetadata: 实例方法来确定兼容性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-29T23:09:21.283

将@Schoob 提供的[解决方案归为一类，因为它们很摇滚。](https://stackoverflow.com/a/12391097/285694)

```
@interface NSManagedObjectModel (version)
+ (NSManagedObjectModel *)modelFromBundle:(NSBundle *)bundle name:(NSString *)modelName version:(NSString *)version;
@end

@implementation NSManagedObjectModel (version)
+ (NSManagedObjectModel *)modelFromBundle:(NSBundle *)bundle name:(NSString *)modelName version:(NSString *)version
{
    if(!bundle)
        bundle = [NSBundle mainBundle];

    NSString *resource = [[modelName stringByAppendingPathExtension:@"momd"] stringByAppendingPathComponent:version];
    NSURL *modelURL = [bundle URLForResource:resource withExtension:@"mom"];
    NSAssert(modelURL,@"Unable to find MOM - %@",resource);
    NSManagedObjectModel *model = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    NSAssert(model,@"Unable to load MOM at URL- %@",modelURL);
    return model;
}
@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T09:17:16.157

斯威夫特版本。替换文件名。

```
import CoreData

extension NSManagedObjectModel
{
    class func model(forVersion version: Int) -> NSManagedObjectModel?
    {
        if let fileUrl = Bundle.main.url(forResource: "Model.momd/Model \(version)", withExtension: "mom")
        {
            return NSManagedObjectModel(contentsOf: fileUrl)
        }
        return .none
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-23T11:45:48.647

不，无法预见这是可能的。`NSManagedObjectModel` [我从文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003610)中推断出，它说讨论属性`versionIdentifiers`：

> 此值旨在用作调试提示，以帮助您确定组合以创建合并模型的模型。

因此，您似乎不应该为您的程序逻辑使用以前的模型版本。

# wifi - Xamarin Monodroid 中的 Android.Net.Wifi.P2p？

> ID：11168771
> 
> 赞同：2
> 
> 时间：2012-06-23T10:28:03.583
> 
> 标签：wifi, xamarin.android, p2p, xamarin

android.net.wifi.p2p 是否计划包含到 xamarin monodroid 中？它确实存在于文档中：

[http://docs.monodroid.net/?link=N%3aAndroid.Net.Wifi.P2p](http://docs.monodroid.net/?link=N%3aAndroid.Net.Wifi.P2p)

但我在 Mono.Android.dll (v2.0.50727) 中看不到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-16T13:46:30.133

如果您正在寻找使用 Xamarin 的 WiFiDirect 示例，这里是[https://github.com/Cheesebaron/WiFiDirectSample](https://github.com/Cheesebaron/WiFiDirectSample)

这是调用和查找周围 WiFiDirect 设备的基本示例。希望能帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:32:50.627

在 API 级别 14 中添加了 Android.Net.Wifi.P2p 命名空间（请参阅[相应的 Android 文档](http://developer.android.com/reference/android/net/wifi/p2p/package-summary.html)）。

如果您将应用设置为面向 Android 4.0 或更高版本，您将能够访问此命名空间。

# java - 如何从spring jms中清除jms队列？

> ID：11168773
> 
> 赞同：2
> 
> 时间：2012-06-23T10:28:20.720
> 
> 标签：java, spring, ibm-mq

如何从spring jms中清除jms队列？像 MQ Explorer 中的“干净”命令？或者我应该收到消息直到它们结束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:50:32.270

您不能轻易地从 JMS 发出 clean 命令，因为这需要完整的 MQI api。正如您所说，一个好方法是一个接一个地阅读所有消息并丢弃它们。在 MQ 资源管理器中清除队列时，您甚至可以选择执行此操作

# vb.net - 使用 VB.NET 发布 ClickOnce 安装错误“从清单读取异常”

> ID：11168778
> 
> 赞同：3
> 
> 时间：2012-06-23T10:28:41.190
> 
> 标签：vb.net, visual-studio-2010, clickonce, vb.net-2010

我正在使用 Visual Studio 2010 和[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)。我的目标环境是[.NET](http://en.wikipedia.org/wiki/.NET_Framework) Framework 4.0。

`Setup.exe`因此，当我使用提供的文件发布我的项目时，我遇到了这个问题。验证应用程序要求弹出后，弹出一个带有文本的警报：

> 无法继续。应用程序格式不正确。请联系应用程序供应商寻求帮助。

当我单击“详细信息”按钮时，它向我显示了此错误：

```
PLATFORM VERSION INFO
Windows                 : 6.1.7601.65536 (Win32NT)
Common Language Runtime : 4.0.30319.239
System.Deployment.dll   : 4.0.30319.1 (RTMRel.030319-0100)
clr.dll                 : 4.0.30319.239 (RTMGDR.030319-2300)
dfdll.dll               : 4.0.30319.1 (RTMRel.030319-0100)
dfshim.dll              : 4.0.31106.0 (Main.031106-0000)

SOURCES
Deployment URL          : file:///I:/ProjectBMTRelease/ProjectBMT.application

IDENTITIES
Deployment Identity     : ProjectBMT.application, Version=1.0.0.6, Culture=neutral, PublicKeyToken=7439f62500c0364d, processorArchitecture=x86

APPLICATION SUMMARY
* Installable application.

ERROR SUMMARY
Below is a summary of the errors, details of these errors are listed later in the log.
* Activation of I:\ProjectBMTRelease\ProjectBMT.application resulted in exception. Following failure messages were detected:
    + Exception reading manifest from file:///I:/ProjectBMTRelease/Application%20Files/ProjectBMT_1_0_0_6/ProjectBMT.exe.manifest: the manifest may not be valid or the file could not be opened.
    + Parsing and DOM creation of the manifest resulted in error. Following parsing errors were noticed:
        -HRESULT:       0x80070c81
         Start line:    0
         Start column:  0
         Host file:
    + Exception from HRESULT: 0x80070C81

COMPONENT STORE TRANSACTION FAILURE SUMMARY
No transaction error was detected.

WARNINGS
There were no warnings during this operation.

OPERATION PROGRESS STATUS
* [6/23/2012 5:21:36 PM] : Activation of I:\ProjectBMTRelease\ProjectBMT.application has started.
* [6/23/2012 5:21:36 PM] : Processing of deployment manifest has successfully completed.
* [6/23/2012 5:21:36 PM] : Installation of the application has started.

ERROR DETAILS
Following errors were detected during this operation.
* [6/23/2012 5:21:36 PM] System.Deployment.Application.InvalidDeploymentException (ManifestParse)
    - Exception reading manifest from file:///I:/ProjectBMTRelease/Application%20Files/ProjectBMT_1_0_0_6/ProjectBMT.exe.manifest: the manifest may not be valid or the file could not be opened.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
        at System.Deployment.Application.DownloadManager.DownloadApplicationManifest(AssemblyManifest deploymentManifest, String targetDir, Uri deploymentUri, IDownloadNotification notification, DownloadOptions options, Uri& appSourceUri, String& appManifestPath)
        at System.Deployment.Application.ApplicationActivator.DownloadApplication(SubscriptionState subState, ActivationDescription actDesc, Int64 transactionId, TempDirectory& downloadTemp)
        at System.Deployment.Application.ApplicationActivator.InstallApplication(SubscriptionState& subState, ActivationDescription actDesc)
        at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
        at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
    --- Inner Exception ---
    System.Deployment.Application.InvalidDeploymentException (ManifestParse)
    - Parsing and DOM creation of the manifest resulted in error. Following parsing errors were noticed:
        -HRESULT:       0x80070c81
         Start line:    0
         Start column:  0
         Host file:
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.Manifest.AssemblyManifest.LoadCMSFromStream(Stream stream)
        at System.Deployment.Application.Manifest.AssemblyManifest..ctor(FileStream fileStream)
        at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
    --- Inner Exception ---
    System.Runtime.InteropServices.COMException
    - Exception from HRESULT: 0x80070C81
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Internal.Isolation.IsolationInterop.CreateCMSFromXml(Byte[] buffer, UInt32 bufferSize, IManifestParseErrorCallback Callback, Guid& riid)
        at System.Deployment.Application.Manifest.AssemblyManifest.LoadCMSFromStream(Stream stream)

COMPONENT STORE TRANSACTION DETAILS
No transaction information is available. 
```

我检查了我的项目的清单文件，但我还不够好，无法在那里找到任何问题。对于其他信息，我创建了简单的“Hello World！” 应用程序，看看它是否会很好地发布，它确实做到了。

解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:48:52.237

检查以下内容：

*   用户的计算机上是否安装了 .NET 4？

*   你是如何发布应用程序的，你在使用 Visual Studio 吗？

*   发布后您是否对部署进行了任何更改？

*   如果您手动将文件移动到部署位置，结构是否与原始结构相同？

尝试启用详细日志记录，看看是否能提供更多信息。*[ClickOnce 部署](http://robindotnet.wordpress.com/2010/05/31/enhanced-logging-in-clickonce-deployment/)*中的增强日志记录一文向您展示了如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:14:26.390

我得到了同样的错误。在我重命名应用程序属性下第一个选项卡上的程序集名称后，问题得到解决。似乎有一个带有空格的程序集名称会创建一个带有空格的清单文件名，并且似乎会产生问题。我的应用程序集名称被命名为“Capital Manager”。在我将其更改为“Capital_Manager”（我将空格替换为下分“_”）后，问题得到了解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T14:25:12.983

在尝试运行 ClickOnce 安装程序时，我收到了与您的几乎相同的错误报告和调用堆栈。到目前为止，我的发现可能对其他到达这里的人有所帮助，因此我将发布详细信息，但我感觉同样的错误报告可能是由一系列不同的问题引起的。

我注意到的第一件事是我的应用程序清单（列出了应用程序的所有文件 + 每个文件的签名哈希）包含具有无效 publicKeyToken 的程序集的条目，例如，

```
<asmv1:assembly xsi:schemaLocation="urn:schemas-microsoft-com:asm.v1 assembly.adaptive.xsd" manifestVersion="1.0" xmlns:asmv3="urn:schemas-microsoft-com:asm.v3" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" xmlns="urn:schemas-microsoft-com:asm.v2" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:co.v1="urn:schemas-microsoft-com:clickonce.v1">
  <asmv1:assemblyIdentity name="foo.exe" version="1.2.3.4" publicKeyToken="0000000000000000" language="neutral" processorArchitecture="msil" type="win32" /> 
```

在文件的下方，而不是看到程序集的**dependentAssembly**元素，一些程序集被列为纯内容文件（**文件**元素）。

这些问题肯定会使 ClickOnce 部署无效，原因是使用的[Mage](http://msdn.microsoft.com/en-us/library/acz3y3te%28v=vs.80%29.aspx)版本是针对旧版本的[.NET](http://en.wikipedia.org/wiki/.NET_Framework)编译的，而不是它试图为其创建清单的程序集。创建应用程序清单时，Mage 将尝试读取程序集，如下所示：

```
AssemblyIdentity.FromFile(fileName); 
```

对于针对 .NET 3.5 ( [CLR](http://en.wikipedia.org/wiki/Common_Language_Runtime) 2.0) 编译的 Mage，尝试加载 .NET 4.0 程序集会导致处理的[BadImageFormatException](http://msdn.microsoft.com/en-us/library/system.badimageformatexception%28v=vs.110%29.aspx)异常，并且后备行为是将这些文件视为内容文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-26T16:04:57.013

您的应用程序文件夹是否有子文件夹？昨天我得到了同样的 HRESULT，根本原因是库 (EntityFramework.dll) 位于顶层和子文件夹中。（有一个关于此的 MAGE 警告，但未将其作为错误处理。）我更新了我的脚本以从子文件夹中删除 EntityFramework.dll，现在 ClickOnce 很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-10T18:17:30.360

只是另一种可能性 - 在将 dpiAware 添加到新创建的 app.manifest 文件时，我遇到了类似的错误。ClickOnce 立即开始失败。

我在这里遵循了建议：[安装 ClickOnce 发布的 DPI 感知应用程序](https://stackoverflow.com/questions/8864672/installing-clickonce-published-dpi-aware-application)

所以如果你一直在做 dpi 的事情，也许看看那里。

# c# - 使用 Reactive Extensions 同时处理流时如何限制缓冲

> ID：11168779
> 
> 赞同：4
> 
> 时间：2012-06-23T10:29:35.080
> 
> 标签：c#, multithreading, system.reactive

我有一个交错流，我将其[拆分为单独的顺序流](https://stackoverflow.com/questions/11135968/how-to-read-interleaved-file-concurrently-using-reactive-extensions)。

**制片人**

```
int streamCount = 3;

new MyIEnumerable<ElementType>()
.ToObservable(Scheduler.ThreadPool)
.Select((x,i) => new { Key = (i % streamCount), Value = x })
.Subscribe(x => outputs[x.Key].OnNext(x.Value)); 
```

`outputs[]`下面定义了处理流的主题在哪里。用于同时`.ObserveOn()`处理流（多线程）。

**消费者**

```
var outputs = Enumerable.Repeat(0, streamCount).Select(_ => new Subject<char>()).ToArray();                                                                                                     

outputs[0].ObserveOn(Scheduler.ThreadPool).Subscribe(x => Console.WriteLine("stream 0: {0}", x));
outputs[1].ObserveOn(Scheduler.ThreadPool).Subscribe(x => Console.WriteLine("stream 1: {0}", x));
outputs[2].ObserveOn(Scheduler.ThreadPool).Subscribe(x => Console.WriteLine("stream 2: {0}", x)); 
```

这段代码的问题是它会尽可能快地读取整个枚举，即使输出流无法赶上。在我的情况下，可枚举是一个文件流，所以这可能会导致使用大量内存。因此，如果缓冲区达到某个阈值，我希望阻止读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:46:45.243

我已经通过在生产者和消费者上使用信号量来解决这个问题，如下所示。但是，我不确定这是否被认为是一个好的解决方案（就 Rx 合同、编程风格等而言）。

```
var semaphore = new SemaphoreSlim(MAX_BUFFERED_ELEMENTS);

// add to producer (before subscribe)
.Do(_ => semaphore.Wait());

// add to consumer (before subscribe)
.Do(_ => semaphore.Release())) 
```

`CancelationToken`将 a 传递给调用`Wait()`并确保在流异常停止时将其取消可能是个好主意？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T22:49:43.700

我认为您的解决方案非常合理。最大的问题（对上一个问题有一些背景）是您的解决方案的“内部”目前无处不在。只需确保在正确编码时清理以下内容：

*   将所有内容包装到一个公开单个方法的类中：`IDisposable Subscribe(<index>, Action)`或者`IObservable<element> ToObservable(<index>))`. 返回的订阅或返回的 observable 都已经完成了所有的“工作”，即添加的`Do`操作等等。它下面有一个字典或列表的事实应该与用户完全无关，否则对您的代码的任何更改都需要在整个地方进行更改。

*   A`CancelationToken`是个好主意，请确保在`OnCompleted`或上取消它`OnError`，您可以使用重载来做到这一点`Do`。

# drupal-7 - 在 Drupal 7 中设置视图样式

> ID：11168783
> 
> 赞同：2
> 
> 时间：2012-06-23T10:30:27.037
> 
> 标签：drupal-7, drupal-views

我开发了一种“销售汽车”的内容类型。现在我正在开发它的视图，以显示一个简短的汽车广告列表，其中包含一些相互内联的基本字段（汽车、型号、颜色、价格、完整广告的链接），如下所示：

**宝马，120 d**                            $X,xxx,xxx.xx 宝
**蓝色，自动，**         查看广告

我想知道我怎样才能实现这种风格？我应该使用什么样式格式：表格、网格或其他？还是我需要通过编码来完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:36:40.310

您想要创建一个包含字段列表的视图。

完成此操作后，将相关字段添加到视图中，您就应该完成了。

从格式链接中选择相关格式，检查预览，您应该有自己的看法。

创建视图结构：

```
Node 1                Node 2
Field 1 Field 2       Field 1 Field 2
Field 3 Field 4       Field 3 Field 4 
```

将所有四个字段添加到视图中。在每一个上选择“从视图中排除”。在字段列表的底部，添加一个新的“自定义文本”字段。

不过，请务必从视图中排除这一点，这很重要。

进入自定义字段，在文本区域中您可以输入 HTML 代码并使用替换模式来输出该字段。

例如：

```
<h2>[title]</h2>
<ul>
    <li>[field_one_name]</li>
    <li>[field_two_name]</li>
</ul>

<ul>
    <li>[field_three_name]</li>
    <li>[field_four_name]</li>
</ul> 
```

从文本区域下的替换模式框中获取名称。

然后选择您认为正确的任何格式。我想你是在网格之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T06:43:48.750

Drupal 提供了一种设置视图样式的方法。

1.  去你的视野。
2.  单击右侧的“高级”链接。
3.  单击标签“主题”后的链接。
4.  您将获得用于设置视图样式的模板列表。
5.  使用特定字段列表中的给定名称之一创建您自己的模板。例如views-view--VIEWNAME.tpl.php
6.  你会看到自己的风格。

这就是 Drupal 视图样式的工作原理。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-03T10:17:17.877

Drupal 7 中的样式视图：

1.  添加字段（要显示的）并选中“从显示中排除”选项。

2.  现在转到“重写结果”并选中“重写该字段的输出”选项，下面有一个名为“替换模式”的部分，其中所有添加的字段都显示为变量（为了便于理解而说变量）喜欢：

> [标题] == 内容：
> 
> 标题[field_event_date] == 内容：
> 
> 活动日期[正文] == 内容：
> 
> Body[body-value] == 原始值

1.  上面有一个名为“文本”的文本区域，您可以在其中自定义该字段的样式（不好的做法是按照步骤 4 更好）并单击“全部应用”。

2.  现在再添加一个名为“全局：自定义文本”的字段（这是一个额外的字段），不要选中“从显示中排除”，在名为“TEXT”的文本区域下方是我们将编写 HTML 代码以设置视图样式的区域在“替换模式”选项下使用所有可用作标记的字段。

3.  单击“全部应用”，是的，它完成了。如此简单和酷呐？

# gwt - GWT 的 Twitter 引导程序不起作用

> ID：11168790
> 
> 赞同：4
> 
> 时间：2012-06-23T10:32:57.707
> 
> 标签：gwt, twitter-bootstrap

[我正在尝试将 Twitter Bootstrap 用于 GWT，并获得与此处](http://nyao.github.com/bootstrap4gwt/)展示相同的漂亮视图 ，这就是我所做的：

1-从[git下载模块](https://github.com/nyao/bootstrap4gwt)

2- 在 pom.xml 中运行包任务

3-在我的项目类路径中包含创建的 jar。

4-继承了我的 project.gwt.xml 文件中的模块

```
<inherits name="com.github.nyao.bootstrap4gwt.Bootstrap"/> 
```

5-将模块包含在我的根 xml 中

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:g='urn:import:com.google.gwt.user.client.ui'
             xmlns:m='urn:import:com.clouway.exreport.client.accountcreation.view'
             xmlns:t='urn:import:com.github.nyao.bootstrap4gwt.client.ui'
        >

  <ui:style src="newRegistrationStyle.css"/>
  <g:HTMLPanel addStyleDependentNames="{style.mainPanel}">
    <div class="{style.headdistance}"/>
    <div class="{style.container}">

      <g:DecoratorPanel addStyleDependentNames="{style.decoratorPanel}">

        <g:VerticalPanel addStyleDependentNames="{style.verticalPanel}}">

          <m:AccountEditor ui:field="accountEditor"/>

          <!--<g:Button ui:field="create" text="create"/>-->
         <t:Button type="Success"   text="sing in"/>
          <g:Label ui:field="errorsLabel"/>
...

</ui:UiBinder> 
```

但是什么也没发生。我有普通的文本框和普通的按钮。

![在此处输入图像描述](../Images/75cabe8d167d8c4015a5b8c4af601541.png) 我看了一下[这个](http://www.aceevo.com/gwt-2-x-tutorial-with-mongodb-morphia-requestfactory-activities-and-places-editors-cell-tablelist-and-twitter-bootstrap-part-1/)非常好的教程，这个人做对了，他的应用程序看起来非常漂亮。我查看了他的代码，但没有找到任何理由说明我的外观仍然正常，而且他的视野很好。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T11:33:41.237

而不是使用 bootstrap4gwt 尝试使用[gwtbootstrap](http://gwtbootstrap.github.com/)，它比前者好得多并且具有更多的组件。该论坛在 gwtbootstrap 中也非常活跃。

# java - HtmlUnit - 获取返回信息

> ID：11168793
> 
> 赞同：0
> 
> 时间：2012-06-23T10:33:13.900
> 
> 标签：java, html, htmlunit

我在 HtmlUnit 项目的最后一部分苦苦挣扎。我已成功填写表单详细信息并单击提交按钮，但这会返回一个页面对象

```
Page submitted = button.click(); 
```

页面接口的 API 可以在这里找到 - [http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/Page.html](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/Page.html)。我花了一段时间浏览 API 来尝试查看如何根据单击按钮后返回的页面访问结果页面上的 html 表。

谁能帮助我完成我需要使用的适当方法调用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:34:58.483

如果返回的页面是真正的 HTML（而不是例如 zip 文件），您可以这样做：

```
HtmlPage htmlPage = (HtmlPage) button.click();
DomNodeList<HtmlElement> nodes = htmlPage.getElementsByTagName("table");
...
HtmlTable table = getTheTableIWant(nodes);
doSomethingWith(table); 
```

# php - 如果存在自定义字段值则显示，如果不存在则显示另一个自定义字段值

> ID：11168804
> 
> 赞同：0
> 
> 时间：2012-06-23T10:36:33.617
> 
> 标签：php, wordpress, if-statement, custom-fields

[我在http://www.urbanvision.org.uk/](http://www.urbanvision.org.uk/)有一个由 Wordpress 管理的网站.

我被困在本周初的一个请求上。

我们有一个待售物业页面 (http://www.urbanvision.org.uk/services/property-services/properties-for-sale/) 此页面上的项目链接到 PDF 下载计划和物业详细信息。但是，我们现在需要添加许多属性，这些属性不是链接 PDF，而是链接到外部链接。

我遇到的问题是页面模板依赖于由插件高级自定义字段管理的自定义字段，上传 PDF 的字段是一个文件上传字段，它将采用 PDF 但不是指向另一个页面或站点的 URL。

我试图将自定义字段切换到 URL 而不是上传屏幕，但出于 2 个原因不热衷于此，1）我将返回其他属性并将 url 复制到更改的字段中，2）它变成同事更新有点困难。

我还尝试引入一个单独的 a 字段并确定应该拉入哪个自定义字段：

如果在 property_details 中存在 PDF 文件，请拉入 PDF 的 URL。如果 URL 存在于 property_details_url 中，则拉入输入的 URL。

每个帖子的两个部分需要链接到更多详细信息（PDF 或外部 URL）。它们是缩略图和查看详细信息链接。

**我之前的代码（只是链接到PDF）：**

```
<?php
$featuredPosts = new WP_Query();
$featuredPosts->query('showposts=20&cat=13');
while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>

<div class="literaturedescription">
<a href="<?php the_field('property_details'); ?>" title="<?php the_field('property_title'); ?>">
<img src="<?php the_field('property_thumbnail'); ?>" width="220px" height="150px" alt="<?php the_field('property_title'); ?>" /></a>
<p><strong><?php the_field('property_title'); ?></strong><br /><?php the_field('property_excerpt'); ?> <span style="color:red;font-weight:bold;"><?php the_field('property_status'); ?></span>

<br /><a href="<?php the_field('property_details'); ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br /> 
```

**我已将其更改为的代码（仍然无法使其工作）：**

```
 <?php $featuredPosts = new WP_Query(); 
$featuredPosts->query('showposts=20&cat=12');
while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>

<div class="literaturedescription">
<a href="<?php the_field('property_details'); ?>" title="<?php the_field('property_title'); ?>">
<img src="<?php the_field('property_thumbnail'); ?>" width="220px" height="150px" alt="<?php the_field('property_title'); ?>" /></a>
<p><strong><?php the_field('property_title'); ?></strong><br /><?php the_field('property_excerpt'); ?> <span style="color:red;font-weight:bold;"><?php the_field('property_status'); ?></span>

<?php if(get_field('property_details_url')){ ?>

<br /><a href="<?php the_field('property_details_url'); ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } else { ?>

<br /><a href="<?php the_field('property_details'); ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } ?> 
```

我还查看了直接从 Wordpress 正在使用的 MySQL 数据库中提取数据，但确实很难让页面正确显示。

与往常一样，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T13:24:28.367

你在正确的轨道上，但要做的是将你的自定义字段分配给一个变量。

IE：

```
<?php
$prop_det_url = get_field('property_details_url');
if($prop_det_url!=''){ ?>

<br /><a href="<?php echo $prop_det_url; ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } else { ?>

<br /><a href="<?php the_field('property_details'); ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } ?> 
```

希望检查应该没问题，property_details_url 有其他东西，它会显示链接，如果没有，它会显示另一段代码？

马蒂

# php - Codeigniter+PhpBB函数重新声明

> ID：11168805
> 
> 赞同：2
> 
> 时间：2012-06-23T10:36:36.297
> 
> 标签：php, codeigniter, codeigniter-2, phpbb3

我正在尝试将 phpbb 集成到 codeigniter。我不希望用户注册论坛。站点登录/注册控制器也应该处理论坛部分，所以我正在编写一个 ci 库来注册/登录到 phpbb。

我收到了一个错误，因为我在 ci 库中包含了 phpbb 函数和库：

> 致命错误：无法重新声明 redirect()（之前在 E:\xampp\htdocs\ci\system\helpers\url_helper.php:535 中声明）

知道如何解决这个最快的方法吗？

我包含在我的 ci 库中的 phpbb 文件是：

*   常见的.php
*   包括/functions_user.php
*   包括/functions_modul.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:20:46.050

我要做的只是将 PHPBB 文件`application/`适当地复制到 CI 目录中，然后根据需要删除/重命名 PHPBB 函数，同时使它们成为适当的助手或模型。

该`common.php`文件可能会在`application/helpers`as中找到一个主页`phpbb_helper`，依此类推。

您显然不能在核心 PHPBB 安装中重命名函数，否则它会中断。同样，重命名常见的 CI 辅助函数也会很糟糕，因为它会破坏您使用 spark 和其他常见库的能力。

这并不完全“快速”，但如果您坐下来下定决心这样做，应该在几个小时内就可以使用。而且，您最终会得到体面的可重用代码，这些代码应该不难维护，因此您再也不必担心它了。

# php - 你知道任何用 JSON 格式编写日志的 PHP 库吗？

> ID：11168808
> 
> 赞同：1
> 
> 时间：2012-06-23T10:37:18.950
> 
> 标签：php, json, logging

我阅读了这篇关于如何使用 JSON 格式记录 NodeJS 应用程序的文章[http://journal.paul.querna.org/articles/2011/12/26/log-for-machines-in-json/ 。](http://journal.paul.querna.org/articles/2011/12/26/log-for-machines-in-json/)

我认为这很有趣，我正在为 PHP 搜索类似的东西，但是关键字“PHP”、“Logs”和“JSON”在 Google 中不能很好地协同工作^^u

您知道或使用任何东西在您的 PHP 应用程序中以 JSON 格式记录吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:41:33.670

你可以检查[独白](https://github.com/Seldaek/monolog)。它也是 symfony2 的默认日志库。

并检查 json 格式化程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T18:15:20.007

我也推荐Monologo，这里有monolog的基本用法：

[https://github.com/Seldaek/monolog/blob/master/doc/usage.md](https://github.com/Seldaek/monolog/blob/master/doc/usage.md)

在你的情况下使用 JsonFormatter

# android - 如果 Asynctask 不用于进行长时间的后台处理，那么我应该使用什么方法

> ID：11168810
> 
> 赞同：4
> 
> 时间：2012-06-23T10:37:24.910
> 
> 标签：android

我大部分时间都在使用 Asynctask，但是在当前应用程序中下载的数据太大，所以我可以使用什么其他方法进行后台下载，我实际上不确定处理程序是否用于此目的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T10:43:21.670

> 但是在当前应用程序中下载的数据太大所以我可以使用其他方法进行后台下载，

我不同意您的标题，因为这`doInBackground`是一种完全用于长时间任务的方法。所以`AsyncTask`非常强大的工具也是类型安全的。

但还有另一种解决方案。
另一种干净有效的方法是使用`IntentService`with `ResultReceiver`。

当您决定使用`IntentService`with 时`ResultReceiver`，这里是基本示例

* * *

只需创建扩展自的类`IntentService`，然后您必须实现其方法`onHandleIntent`

```
protected void onHandleIntent(Intent intent) {  
   String urlLink = intent.getStringExtra("url");
   ResultReceiver receiver = intent.getParcelableExtra("receiver");
   InputStream input = null;
   long contentLength;
   long total = 0;
   int downloaded = 0;
   try {
      URL url = new URL(urlLink);
      HttpURLConnection con = (HttpURLConnection) url.openConnection();
      // ...
      Bundle data = new Bundle();
      data.putInt("progress", (int) (total * 100 / contentLength));
      receiver.send(PROGRESS_UPDATE, data);
   }
   //...
} 
```

并执行`onReceiveResult`from `ResultReceiver`：

```
@Override
public void onReceiveResult(int resultCode, Bundle resultData) {
   super.onReceiveResult(resultCode, resultData);
   if (resultCode == DownloadService.PROGRESS_UPDATE) {
      int progress = resultData.getInt("progress");
      pd.setProgress(progress);
      pd.setMessage(String.valueOf(progress) + "% was downloaded sucessfully.");
   }
} 
```

为了开始你的`Service`使用

```
Intent i = new Intent(this, DownloadService.class);
i.putExtra("url", <data>); // extra additional data
i.putExtra("receiver", new DownloadReceiver(new Handler()));
startService(i); 
```

所以在你`IntentService`的工作中

```
receiver.send(PROGRESS_UPDATE, data); 
```

您可以简单地发送有关您的进度的信息以进行更新`UI`。

**注意：**但请参阅有关[IntentService 和](http://developer.android.com/reference/android/app/IntentService.html)[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T10:39:51.947

快速建议：

1.  如果数据是独立的，您可以执行多个 AsyncTask。
2.  您可以利用 onProgressUpdate() 方法。

# php - PHP - 输入提示或不输入提示

> ID：11168811
> 
> 赞同：0
> 
> 时间：2012-06-23T10:37:29.170
> 
> 标签：php

> **可能重复：（**
> [何时）我应该在 PHP 中使用类型提示？](https://stackoverflow.com/questions/536514/when-should-i-use-type-hinting-in-php)

当使用 PHP 编程时，应该尽可能地使用类型提示，还是只是接受并接受 PHP 是一种松散类型的语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:43:00.343

类型提示将为您提供来自 IDE 的更多帮助，这很好。

如果一个函数在没有给出适当的对象的情况下会/可能崩溃，您最好键入提示，以便及早发现错误并拥有更多的自我文档代码。

# entity-framework - EF/ CodeFirst 关系映射

> ID：11168812
> 
> 赞同：0
> 
> 时间：2012-06-23T10:37:41.390
> 
> 标签：entity-framework, code-first

我有一种情况，我有课`JobDescription` 和 `Image`. 我想建立一到零或多的关系。如果 JobDescription 存在，它可能有图像集合或根本没有任何图像。Image 和 ImageSection 也是如此。我的课程做得对吗？

```
public class JobDescription
        {
            public int JobDescriptionID { get; set; }

           // Other attributes and navigations

            public int? ImageID { get; set; }

            [ForeignKey("ImageID")]
            public virtual List<Image> Image { get; set; }

         }

      public class Image
        {
            public int ImageID { get; set; }

            public string ImageName { get; set; }

            public int? ImageSectionID { get; set; }

            [ForeignKey("ImageSectionID")]
            public virtual ImageSection ImageSection { get; set; }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:35:15.337

外键属性属于关系的“一”方，而不是“多”方。您的模型类应如下所示：

```
public class JobDescription
{
    public int JobDescriptionID { get; set; }

    // Other attributes and navigations

    public virtual List<Image> Image { get; set; }
}

public class Image
{
    public int ImageID { get; set; }

    public string ImageName { get; set; }

    public int? JobDescriptionID { get; set; }

    [ForeignKey("JobDescriptionID")]
    public virtual JobDescription JobDescription { get; set; }
} 
```

和同类的关系为`ImageSection`。如果一个图像总是*必须*有一个`JobDescription`in`JobDescriptionID`必须`Image`是 type `int`，not `int?`。在此示例中，该`ForeignKey`属性不是必需的，因为 EF 将通过命名约定识别 FK 属性。

# php - 多个用户试图一次购买物品，锁定行？

> ID：11168813
> 
> 赞同：0
> 
> 时间：2012-06-23T10:37:47.407
> 
> 标签：php, mysql

假设我要向多个用户提供一个项目，任何用户最多可以进行 10 次购买，直到该项目被“停用”。这些项目取自 mainitems 表并过滤给特定用户。

对于每次购买，商品行中的计数都会增加，以指示购买的数量。我怎样才能控制说 11 个用户都试图购买这个项目@一次？通过简单地锁定该行直到购买完成然后进行比较来实现这一目标的最佳方法是什么？或者有没有一种方法可以做到这一点，而不必不断地从其他用户那里删除结果然后重新激活它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:50:23.823

您应该使用 sql 事务，在 php 中您应该使用`try{} catch(){}`语句

```
try
{
//mysql begin transaction

//the code that does what you said it would do

//mysql commit transaction
}
catch(Exception $ex)
{
//mysql rollback

/return false
} 
```

这样，我认为不会出现两个用户同时要求该项目的情况，交易被视为先进先出。

# c++ - 在网格游戏中找到所有可射击的单元格

> ID：11168814
> 
> 赞同：2
> 
> 时间：2012-06-23T10:38:01.947
> 
> 标签：c++, algorithm, game-engine

我正在制作简单的网格，如游戏（网格是矩阵 128x128）并且矩阵填充了 0 和 1（1 颗子弹可以通过，0 颗子弹不能穿过不能继续旅行，我的子弹射程 32 个单元格）。例如，我站在位置 (32,89)。谁能建议我任何计算所有可射击场的有效算法？（我知道通过简单检查范围内的每个文件以简单的方式进行计算，但我想知道有没有更好的主意）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:18:46.460

不幸的是，没有更好的方法。

如果您要拍摄的点在列表中的位置是可能的。在这种情况下，您可以通过从列表中删除其他元素来消除一些检查。

如果您的网格没有改变，您可以为每个位置评估它并保存以备后用。这将使用大约 4MB 的 128*128*(2pi*range) 内存。如果是这种情况，您可以为每个可能的角度保存它，从而产生最多 2pi*range=202 个位置，然后进行 202 次检查而不是之前需要的 1024(32*32) 次检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T11:26:28.550

有一个更有效的算法。Eric Lippert 撰写了关于网格游戏中阴影投射的优秀系列文章。如果我理解正确，这正是您所需要的。

*   [C# 中的 Shadowcasting，第 1 部分](http://blogs.msdn.com/b/ericlippert/archive/2011/12/12/shadowcasting-in-c-part-one.aspx)
*   [C# 中的阴影投射，第二部分](http://blogs.msdn.com/b/ericlippert/archive/2011/12/15/shadowcasting-in-c-part-two.aspx)
*   [C# 中的 Shadowcasting，第三部分](http://blogs.msdn.com/b/ericlippert/archive/2011/12/19/shadowcasting-in-c-part-three.aspx)
*   [C# 中的阴影投射，第四部分](http://blogs.msdn.com/b/ericlippert/archive/2011/12/22/shadowcasting-in-c-part-four.aspx)
*   [C# 中的 Shadowcasting，第五部分](http://blogs.msdn.com/b/ericlippert/archive/2011/12/27/shadowcasting-in-c-part-five.aspx)
*   [C# 中的 Shadowcasting，第六部分](http://blogs.msdn.com/b/ericlippert/archive/2011/12/29/shadowcasting-in-c-part-six.aspx)

# jaxb - 动态moxy中枚举中的ClassNotFound异常

> ID：11168819
> 
> 赞同：3
> 
> 时间：2012-06-23T10:38:51.167
> 
> 标签：jaxb, xsd, eclipselink, classnotfoundexception, moxy

我正在为 jaxb 使用 EclipseLink 动态 moxy。当我尝试设置枚举值时，我得到一个 ClassNotFound 异常。谁能指出我做错了什么？

架构：

```
<xs:element name="customer" type="customerType"> </xs:element>

 <xs:complexType name="customerType">
    <xs:sequence>
        <xs:element name="number" type="numberEnum"/>
        <xs:element name="name" type="xs:string"/>
    </xs:sequence>
</xs:complexType>

<xs:simpleType name="numberEnum">
    <xs:restriction base="xs:string">
        <xs:enumeration value="1"/>
        <xs:enumeration value="2"/>
        <xs:enumeration value="3"/>
    </xs:restriction>
</xs:simpleType> 
```

Java代码：

```
 package uic;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;

import javax.xml.bind.JAXBException;

import org.eclipse.persistence.dynamic.DynamicEntity;
import org.eclipse.persistence.jaxb.dynamic.DynamicJAXBContext;
import org.eclipse.persistence.jaxb.dynamic.DynamicJAXBContextFactory;

public class test{

DynamicJAXBContext context;

test() {
    try{
        context = DynamicJAXBContextFactory.createContextFromXSD(new FileInputStream(new File("sample/NewXMLSchema1.xsd")), null, null, null);
    } catch(JAXBException e) {
        e.printStackTrace();
    } catch(FileNotFoundException e){
        e.printStackTrace();
    }

    DynamicEntity root = context.newDynamicEntity("CustomerType");

    root.set("name", "tom");

    Object enumValue = null;
    try {
        enumValue = context.getEnumConstant("uic.NumberEnum", "2");
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JAXBException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    root.set("Number", enumValue);
}

public static void main(String args[]) {
    new test();
}
} 
```

当我使用 createContextFromXSD() 创建上下文时我会出错吗？我遵循了这个例子：[EclipseLink dynamic MOXy access enum values](https://stackoverflow.com/questions/5181374/eclipselink-dynamic-moxy-accessing-enum-values/5183847#5183847)

我在访问其他 JAXB 生成的类时没有问题。问题仅适用于枚举类。它们是否放置在与其他生成的类不同的包中？

编辑：在主程序中，我收到一个 xml 模式文件作为输入。我使用 xsom 解析器来检索元素和类型声明，然后使用 JAXB 生成的类进行编组，以获取输出，即 XML 文件。因此，我需要对模式进行的任何更改都必须动态完成。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:39:42.547

我是 EclipseLink 产品的开发人员，一直在研究您的问题。未生成 NumberEnum 类，因为枚举值都是数字，这对于 Java 枚举无效。如果您要通过`xjc`命令行工具运行架构，您还会看到没有生成枚举类。

如果您可以灵活地更改架构，一种解决方案是将枚举值更改为一、二、三。

否则，解决此问题的标准方法是使用 JAXB 绑定文件来自定义枚举值：

```
 <jxb:bindings
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
        version="2.1">
        <jxb:bindings schemaLocation="schema.xsd">

            <jxb:bindings node="//xs:simpleType[@name='numberEnum']/xs:restriction/xs:enumeration[@value='1']">
                <jxb:typesafeEnumMember name="ONE"/>
            </jxb:bindings>

            <jxb:bindings node="//xs:simpleType[@name='numberEnum']/xs:restriction/xs:enumeration[@value='2']">
                <jxb:typesafeEnumMember name="TWO"/>
            </jxb:bindings>

            <jxb:bindings node="//xs:simpleType[@name='numberEnum']/xs:restriction/xs:enumeration[@value='3']">
                <jxb:typesafeEnumMember name="THREE"/>
            </jxb:bindings>

        </jxb:bindings>
    </jxb:bindings> 
```

但是，我们目前在 EclipseLink Dynamic JAXB 中有一个错误，并且没有考虑到这个枚举自定义。我们正在为我们的 2.4.1 版本开发此功能，您可以在此处跟踪此错误的进度：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=383575](https://bugs.eclipse.org/bugs/show_bug.cgi?id=383575)

谢谢，

瑞克

# c++ - 脚本头过早结束：C++ cgi

> ID：11168828
> 
> 赞同：1
> 
> 时间：2012-06-23T10:39:55.020
> 
> 标签：c++, apache, netbeans, windows-7, cgi

我希望有人可以帮助我处理这个 HelloWorld CGI C++ 程序。我在 localhost 上运行 Xamp 服务器，并在 /xamp 内的 cgi-bin 文件夹中编译了这段代码。文件名为_1.exe

```
#include <iostream>

using namespace std;

int main(int argc, char** argv) {
    cout <<"Content-Type: text/html\n\n";                                       

    cout << "<?xml version = \"1.0\" encoding=\"ISO-8859-1\"?>" <<endl;          
    cout <<"<!DOCTYPE html Public \"-//W3C//DTD XHTML 1.1//EN\" "<<endl;
    cout << " \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">"<<endl;

    cout <<"<html xmlns = \"http://www.w3.org.1999/xhtml\lang=\"en\" xml:lang=\"en\"\">"<<endl;
    cout <<"<head><title>Helloworld</title></head>"<<endl;                          

    cout <<"<body><h1>Hello world!!</h1></body></html>";
    return 0;
} 
```

可执行文件从 Windows 运行，但如果我从服务器调用它，我会得到：

```
Error message:
Premature end of script headers: _1.exe 
```

我正在使用 Netbeans 和 cygwin 工具进行编译。

我也尝试重命名文件_1.cgi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:41:12.570

知道了。_1.exe 存在权限问题。

# html - 如何在将旧框架拆分为多个框架时限制页面内容变大？

> ID：11168836
> 
> 赞同：1
> 
> 时间：2012-06-23T10:41:53.287
> 
> 标签：html, firefox, frameset

我有这样的框架，

索引.html

```
<frameset rows="137px,*" border="0" >
<frame src="first.html" scrolling="no" noresize="noresize"/>
<frame src="second.html" noresize="noresize" name="show"/>
</frameset> 
```

第一个.html

```
<a href="home.html" target='show'>Home</a> 
```

主页.html

```
<frameset rows="20%,*" border="0" >
<frame src="third.html" scrolling="no" noresize="noresize"/>
<frame src="fouth.html" noresize="noresize" name="newshow"/>
</frameset> 
```

当我单击first.html 中的**主页链接时。**它将加载到显示框架（home.html）上。

home.html 有另外两个框架。它将被分成两帧。当这种拆分发生时，所有页面内容都会变大。如何摆脱这个问题。

我正在使用 Firefox 3.0.8。在谷歌浏览器中，它工作正常。

谢谢

# javascript - 如何与 iFrame 中的标签进行交互

> ID：11168837
> 
> 赞同：0
> 
> 时间：2012-06-23T10:42:40.760
> 
> 标签：javascript, dom, iframe, browser

假设我有这样的代码：

```
<html>
   <head>
   </head>
 <body>
      <iframe>
          <script>
   //execute javascript here to append another piece of javascript in parent body tag
          </script>
      </iframe>
 </body>
</html> 
```

现在我想在该 iFrame 中执行一些 javascript 以在父 body 标记中附加另一段 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:18:43.563

如果 iframe 属于主窗口的同一个域，你可以简单地做

```
top.functionToBeCalled(argument); 
```

# html - iframe 标记阻止页面的其他内容

> ID：11168838
> 
> 赞同：4
> 
> 时间：2012-06-23T10:42:51.133
> 
> 标签：html, xhtml

我是 html 的初学者。`iframe`我有一个包含标签的网页。如果标签像关闭

```
<iframe src="http://mysite.com/l/5042/2012-06-21/9pb4y" width="100%" height="500" frameborder="0" style="border: 0" /> 
```

`iframe`不显示标签后面的 html 内容。但是如果标签像关闭一样

```
<iframe src="http://mysite.com/l/5042/2012-06-21/9pb4y" width="100%" height="500" frameborder="0" style="border: 0" > </iframe> 
```

一切正常。

不知道为什么我有这个奇怪的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T01:37:26.973

将此代码复制到[W3C 标记验证服务](http://validator.w3.org/)：

```
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> //-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title></title>
</head>
<body>

    <iframe src="http://mysite.com/l/5042//2012-06-21/9pb4y" width="100%" height="500" frameborder="0" style="border: 0" ></iframe>

    <iframe src="http://mysite.com/l/5042//2012-06-21/9pb4y" width="100%" height="500" frameborder="0" style="border: 0" />

</body>
</html> 
```

酌情评论和取消评论以测试两个不同`DOCTYPE`的 s。

您将看到`iframe`您的`DOCTYPE`. 要么改变要么`DOCTYPE`不使用`iframes`。（当然，您可以使用`iframe`显式关闭的标签，但由于这不会验证，如果您想在尽可能多的浏览器中工作，我会说这是一个冒险的选择。）

我并不是要暗示它`iframe`已被弃用。[在W3C 网站](http://lists.w3.org/Archives/Public/www-html-editor/2008AprJun/0053.html)上查看这个毫无争议的帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:51:16.760

iframe 被标记为在您的示例中有效的 iframe

`<iframe src=... attributes=...></iframe>`

但是在您的示例中，打开和关闭标签之间有一个空格，只需将其删除即可。

# objective-c - 表的 didselect 方法不会调用另一行，直到一个行动作没有完全执行

> ID：11168847
> 
> 赞同：0
> 
> 时间：2012-06-23T10:43:25.887
> 
> 标签：objective-c, uitableview, uipickerview

给我与表格视图选择操作相关的建议。

我有一个视图，其中有 2 个部分的表有 2 行和 3 行。当第一部分第 2 行选择时，选择器视图用于选择一个值。同样，第二部分每行都有其选择器视图用于选择值。因此，当我选择一行时，选择器视图来了，我想让其他行 didselect 方法不会调用行，同时选择器视图显示在视图中并在选择后再次按下值和完成按钮，用户可以选择一行，然后选择器视图出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:59:47.857

用于`willDeselectRowAtIndexPath` 返回**nil**或**NSIndexPath**。像这样 ：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    if ([myPickerView isHidden]) return indexPath;
    return nil;
} 
```

# android - 为什么我在我的测试项目中看不到数据库中的记录？

> ID：11168848
> 
> 赞同：0
> 
> 时间：2012-06-23T10:43:45.673
> 
> 标签：android, robotium, android-testing

嘿！

我已经为我的应用程序编写了测试。我需要通过UI界面（使用robotium）将项目添加到数据库，然后我想使用SQLiteDatabase检查数据库中是否存在项目。

项目已成功添加（测试完成后我在数据库中看到新记录），但我的测试类中的 isExistsInDb 返回 false。我不明白为什么。请你帮助我好吗。谢谢！

活动类：

```
public abstract class EditActivity {

   // Some code .....

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        initButtonCancelOk();
    }

    protected void validateAndSave() {
        try {
            formValidator.validateAll();
            if (formValidator.isFormValid()) {
                DatabaseOpenHelper doh = new DatabaseOpenHelper(this);
                Dao d = new Dao(doh);
                d.add(fetchObjectFromUi());
                finish(); // destroy this activity
            } else {
                ToastImage.makeImageText(context,
                        R.drawable.warning,
                        formValidator.getMessages(),
                        Toast.LENGTH_SHORT
                    ).show();
            }
        } catch (Exception e) {
            Toast.makeText(context, " Error during validate form ", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        }
    }

    private void initButtonCancelOk() {
        btnOk = (Button) findViewById(R.id.btn_ok);
        btnOk.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                validateAndSave();
            }
        });
    }    
} 
```

测试类：

```
public class AddItemSmokeTest extends extends ActivityInstrumentationTestCase2<EditActivity> {

    protected Activity activity;
    protected Solo solo;

    public AddItemSmokeTest() {
        super("com.myapp", EditActivity.class);
        Intent i = createIntent(2);
        setActivityIntent(i);
        activity = getActivity();
        solo = new Solo(getInstrumentation(), activity);
        solo.sleep(1000); // interval between tests
    }

    protected Intent createIntent(long transType) {
        Intent i = new Intent();
        i.putExtra(INTENT_VALUE_MODE_NAME, MODE_INSERT_TRANSACTION);
        i.putExtra(INTENT_VALUE_TYPE_ID_NAME, transType);
        return i;
    }

    @Override
    protected void tearDown() throws Exception {

    }

    protected void setIncomExpenseData(AbsTransIncomeExpenseTestData testData) {
        solo.pressSpinnerItem(CATEGORY_SPN_INDEX, testData.getCategorySpinnerPos());
        solo.pressSpinnerItem(ACCOUNT_SPN_INDEX, testData.getAccountSpinnerPos());
        solo.typeText((EditText) activity.findViewById(com.rirdev.moneycounter.R.id.et_sum), testData.getSum());
        solo.typeText((EditText) activity.findViewById(com.rirdev.moneycounter.R.id.et_comment), testData.getComment());
    }

    @Smoke
    public void testAddIncomeTransaction() throws Exception {
        initForType(TransactionType.INCOME);
        AbsTransIncomeExpenseTestData testData = new IncomeTestData();
        setIncomExpenseData(testData);
        solo.clickOnButton(OK);
        //solo.getActivityMonitor();
        assertTrue( 
                    "Item" + testData.getComment() + " was not added ",
                    isExistsInDb(activity, Transactions.TABLE_NAME, Transactions.DESCRIPTION, testData.getComment())
                  );
    }

    protected static boolean isExistsInDb(Context context, String tableName, String commentFieldName, String comment) {

        DatabaseOpenHelper doh = new DatabaseOpenHelper(context);
        SQLiteDatabase db = doh.getDatabaseReadable();
        Cursor cursor = null;
        try {
            String query = "SELECT COUNT(*) FROM " + tableName + " WHERE " + commentFieldName + " = \"" + comment + "\"";
            cursor = db.rawQuery(query, null);
            cursor.moveToFirst();
            if (cursor.getInt(0) > 1) {
                return true;
            }
            return false;
        } finally {
            if (cursor != null) {
                cursor.close();
            }
            db.close();
            doh.close();
        }

    }

} 
```

**更新：**

如果我第二次运行测试它会通过，因为在数据库中存在先前测试添加的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:46:46.333

在 where clasue 中使用“string”而不是“string”.....

```
"SELECT COUNT(*) FROM " + tableName + " WHERE " + commentFieldName + " = '" + comment + "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:41:03.723

我建议使用 use `parametrized statement`，你的方法很危险而且不太清楚。`getCount()`使用方法也更好。

```
String query = "SELECT COUNT(*) FROM " + tableName + " WHERE columnName = ?";
cursor = db.rawQuery(query, new Sring[] {comment});
int count = 0;
if (cursor.getCount() > 0) {
   cursor.moveToFirst();
   count = cursor.getInt(0);
}
if (count > 0) {
   return true;
}
else {
   return false;
} 
```

# gwt - GWT 编辑器错误？

> ID：11168849
> 
> 赞同：0
> 
> 时间：2012-06-23T10:43:52.797
> 
> 标签：gwt

这是我的开发环境：

*   Ubuntu 12.04 LTS
*   Eclipse 版本：3.7.2（靛蓝）
*   Eclipse 3.7 的谷歌插件
*   谷歌网络工具包 2.4.0
*   GWT 设计器核心 2.5.0
*   GWT 设计师 GPE 2.5.0
*   WindowBuilder 核心 1.3.0
*   WindowBuilder CSS 支持 1.2.0
*   WindowBuilder XML 核心 1.3.0

我用“App Engine Connected Android Project”创建了一个 gwt/app engine 项目，并做了很多修改（只是重构了几个名字）。

当我单击我的“ui.xml”gwt 文件时，我可以在 Eclipse 编辑器窗口的“XML Source”选项卡中显示它。

但是当我单击“设计”选项卡时，出现以下错误：

```
Internal Error

encountered unexpected internal error.

This could be caused by a bug or by a misconfiguration issue, conflict, partial update, etc.

java.lang.NoClassDefFoundError: net/sf/cglib/proxy/Callback 
```

堆栈跟踪：

```
java.lang.ClassNotFoundException: net.sf.cglib.proxy.Callback
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.eclipse.wb.internal.core.xml.model.EditorContext.<init>(EditorContext.java:59)
at com.google.gdt.eclipse.designer.uibinder.parser.UiBinderContext.<init>(UiBinderContext.java:89)
at com.google.gdt.eclipse.designer.uibinder.editor.UiBinderDesignPage.parse(UiBinderDesignPage.java:101)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.internal_refreshGEF(XmlDesignPage.java:451)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.access$2(XmlDesignPage.java:443)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage$7$1.run(XmlDesignPage.java:417)
at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
at org.eclipse.swt.widgets.Display.syncExec(Display.java:4330)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage$7.run(XmlDesignPage.java:414)
at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.internal_refreshGEF_withProgress(XmlDesignPage.java:435)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.internal_refreshGEF(XmlDesignPage.java:388)
at org.eclipse.wb.internal.core.xml.editor.UndoManager.refreshDesignerEditor(UndoManager.java:252)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.updateGEF(XmlDesignPage.java:361)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.refreshGEF(XmlDesignPage.java:354)
at org.eclipse.wb.internal.core.xml.editor.actions.RefreshAction.run(RefreshAction.java:47)
at org.eclipse.wb.internal.core.xml.editor.actions.DesignPageAction.run(DesignPageAction.java:35)
at org.eclipse.wb.internal.core.xml.editor.XmlExceptionComposite.doRefresh(XmlExceptionComposite.java:65)
at org.eclipse.wb.internal.core.editor.errors.ExceptionComposite$3.widgetSelected(ExceptionComposite.java:129)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3588)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3209)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

完整的上下文堆栈跟踪：

```
java.lang.NoClassDefFoundError: net/sf/cglib/proxy/Callback
at org.eclipse.wb.internal.core.xml.model.EditorContext.<init>(EditorContext.java:59)
at com.google.gdt.eclipse.designer.uibinder.parser.UiBinderContext.<init>(UiBinderContext.java:89)
at com.google.gdt.eclipse.designer.uibinder.editor.UiBinderDesignPage.parse(UiBinderDesignPage.java:101)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.internal_refreshGEF(XmlDesignPage.java:451)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.access$2(XmlDesignPage.java:443)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage$7$1.run(XmlDesignPage.java:417)
at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
at org.eclipse.swt.widgets.Display.syncExec(Display.java:4330)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage$7.run(XmlDesignPage.java:414)
at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.internal_refreshGEF_withProgress(XmlDesignPage.java:435)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.internal_refreshGEF(XmlDesignPage.java:388)
at org.eclipse.wb.internal.core.xml.editor.UndoManager.refreshDesignerEditor(UndoManager.java:252)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.updateGEF(XmlDesignPage.java:361)
at org.eclipse.wb.internal.core.xml.editor.XmlDesignPage.refreshGEF(XmlDesignPage.java:354)
at org.eclipse.wb.internal.core.xml.editor.actions.RefreshAction.run(RefreshAction.java:47)
at org.eclipse.wb.internal.core.xml.editor.actions.DesignPageAction.run(DesignPageAction.java:35)
at org.eclipse.wb.internal.core.xml.editor.XmlExceptionComposite.doRefresh(XmlExceptionComposite.java:65)
at org.eclipse.wb.internal.core.editor.errors.ExceptionComposite$3.widgetSelected(ExceptionComposite.java:129)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3588)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3209)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386)
Caused by: java.lang.ClassNotFoundException: net.sf.cglib.proxy.Callback
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 48 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:32:23.167

堆栈跟踪中的重要行是：

> java.lang.ClassNotFoundException：net.sf.cglib.proxy.Callback

显然，在您的 GWT 代码中的某处，您从包中引用了`Callback`该类。`net.sf.cglib.proxy`如果您在 GWT 代码中引用任何包或类，您必须拥有源代码，以便 GWT 编译器能够将其转换为 javascript。

然而，这个`net.sf.cglib.proxy`包属于 cglib.jar，它是一个字节码操作库。GWT 不支持此库。
检查您的源代码以获取对`net.sf.cglib.proxy.Callback`.
我假设您导入了错误的包。

# php - 日期、月份和年份下拉框

> ID：11168865
> 
> 赞同：0
> 
> 时间：2012-06-23T10:46:59.530
> 
> 标签：php, javascript, html

我正在创建一个注册，我需要在其中获取用户的出生日期，我的问题是，如何在 html 中创建月、年和日的下拉框，然后将这些天处理成一个 php 脚本来插入它到数据库？某月的月、年和日在哪里应该有有效天数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:06:03.987

**编辑：** [现场演示](http://jsfiddle.net/7A9jf/)

这个怎么样：

```
<select name="year"></select>
<select name="month">
    <option value="1">January</option>
    ...
</select>
<select name="day"></select> 
```

和 JS 部分：

```
var ysel = document.getElementsByName("year")[0],
    msel = document.getElementsByName("month")[0],
    dsel = document.getElementsByName("day")[0];
for (var i = 2000; i >= 1950; i--) {
    var opt = new Option();
    opt.value = opt.text = i;
    ysel.add(opt);
}
ysel.addEventListener("change", validate_date);
msel.addEventListener("change", validate_date);

function validate_date() {
    var y = +ysel.value, m = msel.value, d = dsel.value;
    if (m === "2")
        var mlength = 28 + (!(y & 3) && ((y % 100)!==0 || !(y & 15)));
    else var mlength = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][m - 1];
    dsel.length = 0;
    for (var i = 1; i <= mlength; i++) {
        var opt = new Option();
        opt.value = opt.text = i;
        if (i == d) opt.selected = true;
        dsel.add(opt);
    }
}
validate_date(); 
```

我会让你处理 PHP 部分。

一些警告：

1.  我用过`addEventListener`。请记住，IE<9`attachEvent`改为使用。您可以使用该`onchange`属性（已弃用）或依赖一些 JS 框架（如 jQuery）来完成这项工作：`$(msel).change(validate_date);`.
2.  在旧版本的 Firefox 中，元素的`add`方法`<select>`是愚蠢的，需要第二个`null`参数。
3.  当脚本计算`mlength`2 月时，它添加一个布尔值（一个简单的闰年检查），它被转换为 0 或 1，到 28。这在 ECMAScript 5 严格模式下引发和异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T12:54:51.267

只需给他们一个纯文本输入。如果您不相信人们可以通过键入正确地输入生日，那么为什么使用选择元素会有任何不同呢？只需告诉他们您期望的格式即可。

例如

```
<script>
function validateDate(v) {
  var bits = v.split('/');
  var d = new Date(bits[2], --bits[1], bits[0]);
  return d.getFullYear() == bits[2] && d.getMonth() == bits[1];
}

function validateForm(form) {
  if (!validateDate(form.birthday.value)) {
    alert('Birthday date is not a valid date');
    return false;
  }
}
</script>

<form onsubmit="return validateForm(this);" action="">
  <div>Birthday (day/month/year): <input type="text" name="birthday"> 
    <input type="submit">
  </div>
</form> 
```

您可以包含一个脚本版本，将普通输入替换为选择，但要涵盖合理的时间段，您将在年份选择中拥有大约 100 个条目，然后您需要等到他们同时选择年份和月份才能输入在那些日子里。至少上面为您提供了一个简单的算法来验证日期。

# android - Android开机时启动后台服务

> ID：11168869
> 
> 赞同：8
> 
> 时间：2012-06-23T10:47:50.420
> 
> 标签：android, service, background

我需要始终有一个后台服务来同步我的 Android 应用程序和服务器。我知道如何通过我的应用程序启动它，但是当 Android 关闭时，后台服务就会死掉。

如何保持后台服务始终运行？（即使设备关闭然后打开......）

我需要将我的后台服务添加到 Android 的启动程序中。有什么提示吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-23T10:50:40.283

用于 `<action android:name="android.intent.action.BOOT_COMPLETED" />` 在设备打开时启动您的服务。

在`AndroidManifest.xml`：

```
 <receiver android:name=".BootBroadcastReceiver" >   
            <intent-filter>   
                <action android:name="android.intent.action.BOOT_COMPLETED" />   
            </intent-filter>   
        </receiver> 
```

在您的 as 添加权限`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED">
</uses-permission> 
```

在代码部分`BootBroadcastReceiver`：

```
public class BootBroadcastReceiver extends BroadcastReceiver {     
    static final String ACTION = "android.intent.action.BOOT_COMPLETED";   
    @Override   
    public void onReceive(Context context, Intent intent) {   
        // BOOT_COMPLETED” start Service    
        if (intent.getAction().equals(ACTION)) {   
            //Service    
            Intent serviceIntent = new Intent(context, StartOnBootService.class);       
            context.startService(serviceIntent);   
        }   
    }    
} 
```

**编辑：**如果您正在谈论设备屏幕开/关，那么您需要注册`<action android:name="android.intent.action.USER_PRESENT" />`并`<action android:name="android.intent.action.SCREEN_ON" />`在用户在场或屏幕开启时启动您的服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T10:49:50.577

```
(Even when the device turns off and then turns on.. 
```

操作系统在完成启动后会广播 ACTION_BOOT_COMPLETED。您的应用可以通过在清单中请求权限来请求接收此通知：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED">
</uses-permission> 
```

[http://blog.gregfiumara.com/archives/82](http://blog.gregfiumara.com/archives/82)

[http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)

# php - 为什么 Zend_Form 最适合“RAD 和原型设计”？

> ID：11168872
> 
> 赞同：0
> 
> 时间：2012-06-23T10:49:02.480
> 
> 标签：php, zend-framework

有人可以解释为什么它最好用于原型设计吗？它不应该在生产应用程序中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:57:03.540

Zend_Form 可以而且我确信在许多站点的生产中都使用过。
您可能听说 Zend_Form 最适合用于原型设计的原因是因为使用当前装饰器的方式很难获得许多人想要的外观或代码。
此外，对多页表单和非常复杂的表单的支持可能会受到限制或需要大量工作才能正确完成。
让 Zend_Form 更简单的诀窍是学习*viewScript*装饰器，它并不完美，但确实有帮助。

# c# - 网站架构

> ID：11168875
> 
> 赞同：0
> 
> 时间：2012-06-23T10:49:15.087
> 
> 标签：c#, asp.net, architecture

我在想一个网络项目，它的架构是这样的，

网站将有两层

**数据访问层**

这将是一个包含 Web 服务的项目，并且将像表示层和数据库之间的中介一样工作。

**表示层**

它将是一个仅由 HTML、JavaScript 和 CSS 构建的简单网站，并将与数据访问层通信以获取和/或向数据库发布数据。

现在的问题：是否有可能在我的表示层中创建一个类似于 Asp.net 会话的功能，只使用 HTML、JavaScript、Cookies 是我首先想到的，但它不是很安全，是否有人有更相关、更安全和合乎逻辑的解决方案这个 ？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:08:19.810

使用 HTML 或动态页面并不重要。根据您使用的服务器端环境，每次客户端请求页面时，都会创建会话。这意味着即使您使用 AJAX 来更新页面内容，无论如何 AJAX 都会请求服务器并且将能够在服务器上使用 Session 对象。在 ASP.NET WebServices（AJAX 将调用它们）中，您可以配置 WebMethod 以允许或不允许使用 Session。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:56:30.917

我猜你的意思可能是 REST 和 Ajax 的功能。表示层是视图，数据访问层是控制器，模型是数据库将访问的地方，控制器将调用模型中定义的函数

# jquery - 在下拉菜单中处理父 ul 宽度的更好方法

> ID：11168881
> 
> 赞同：0
> 
> 时间：2012-06-23T10:49:59.153
> 
> 标签：jquery, css, drop-down-menu

我见过很多水平菜单，其中下拉菜单具有固定宽度，例如[http://www.dubspot.com/](http://www.dubspot.com/)它可以工作，但是……</p>

我尝试制作一个合乎逻辑的大小，宽度像父级或更多。我的解决方案[http://jsfiddle.net/m2ry3/](http://jsfiddle.net/m2ry3/)但它有点令人毛骨悚然（重复将使用 jQuery）：

```
<ul>
<li><a href="#">very long item like this</a>
<ul>
    <li><a href="#">small item 1</a></li>
    <li><a href="#">small item 2</a></li>
    <li><a href="#">small item 3</a></li>
    <!--duplicate and hidden -->
    <li class="hack"><a href="#">very long item like this</a></li>
</ul>
</li>
<li><a href="#">small</a>
<ul>
    <li><a href="#">a long item 1</a></li>
    <li><a href="#">a various item 2</a></li>
    <li><a href="#">small 3</a></li>
</ul>
</li> 
```

```
ul li{
    float:left;
}
ul li a{
    display:block;
    padding:10px;
    text-decoration:none;
    border:1px solid #eee;

}
ul ul{
 position:absolute;       
 background:#ddd;
 display:block;   
}

.hack{
visibility:hidden;
height:0;    
}
ul li ul li {
    display:block;  
    clear:both;
    width:100%;
} 
```

在 jQuery 中具有悬停效果（我知道如何）。是否可以在没有 js (jQuery) 的情况下调整宽度？还是有 CSS 提示？

我尝试不重复li，不容易处理li outerwidth(border, padding)……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:40:52.350

如果要在 li 的固定宽度内调整文本，则可以使用 css 属性 -

word-wrap：断词；

这样，您可以在固定宽度内调整长文本。

我想这会对你有所帮助

# jquery - 如何让 jQuery 移动魔术在“pageshow”事件处理程序中工作？(JQM 1.1.0)

> ID：11168889
> 
> 赞同：1
> 
> 时间：2012-06-23T10:50:43.430
> 
> 标签：jquery, jquery-mobile

嘿，我在“pageshow”事件中将 ICanHaz.js 模板插入 jquery 移动文档时遇到问题。HTML 可以很好地插入 DOM 并显示正常，但没有应用任何 jQuery Mobile UI 类等。以下代码是咖啡脚本：

```
 $('#trailRewards').live 'pageshow', (event, ui) =>
        html = ich.t_reward_list()
        $(html).trigger('create')
        $('#trailRewards').html(html) 
```

我是在错误的时间调用“创建”事件，还是触发了错误的事件？

如果 html 已经在 div 中并且我只是使用常规的 jquery 选择器来更新它可以工作的内容位，但是我当然不能使用模板，这很烦人！

干杯:)

编辑：修正错别字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:27:53.850

我最终通过使用“pagebeforecreate”事件找到了最佳解决方案。有关更多信息，请参见此处：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

```
 $('#trailRewards').live 'pagebeforecreate', (event, ui) =>
        html = ich.t_reward_list()
        $(html).trigger('create')
        $('#trailRewards').html(html) 
```

希望对和我有同样问题的人有所帮助:)

# regex - sed 在正则表达式周围添加文本

> ID：11168890
> 
> 赞同：0
> 
> 时间：2012-06-23T10:51:14.307
> 
> 标签：regex, unix, sed

我希望能够去：

```
sed "s/^\(\w+\)$/leftside\1rightside/" 
```

并让匹配的组`(\w+\)`出现在“左侧”和“右侧”之间。

但似乎我必须用管道传输两次，一次用于文本的左侧，另一次用于右侧。如果有人知道一次性完成的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:01:34.160

它不起作用的原因是您可能指定了错误的正则表达式。**在您的情况下，仅**当文本仅包含**单词**字符（假设您的版本`sed`支持`\w`符号）时，才会在行尾和行首添加文本。如果不使用该选项，您也没有逃避`+`应该做的事情。`-r`

尝试从`sed "s/^\(.*\)$/leftside\1rightside/"`或只是`sed "s/.*/leftside&rightside/"`从那里开始工作。

# php - 我如何使用 in_array() 而不是 foreach 循环？

> ID：11168896
> 
> 赞同：0
> 
> 时间：2012-06-23T10:51:45.977
> 
> 标签：php, arrays, codeigniter

在 codeigniter 中，在我的控制器文件中，我从模型中获取数据。为了验证结果，我使用了 foreach 循环，没有问题。但不是使用 foreach 我想使用 in_array() 来控制变量是否在数据库结果数组中。这是代码：

```
function _remap($method,$params = array()){ 

//in construct, I use $this->model
if (isset($params[0])) {

    $this->db->distinct('*****');
    $this->db->from('*****');
    $this->db->where('****',****);

    $query = $this->db->get();

    if (in_array($params[0],$query->results())) {
        echo "in_array works";
    }
} 
```

但没有呼应任何东西。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:57:55.203

根据[手册](http://codeigniter.com/user_guide/database/results.html)，您可以使用`result_array()`. 否则你会取回一个对象。当然，您不能`in_array`用于对象。

另外根据手册，您可以将代码更改为

```
if (in_array($params[0], $query->first_row('array')) {
  // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:00:07.887

**[in_array](http://php.net/manual/en/function.in-array.php)**仅用于检查值列表中的值，例如
array("Mac", "NT", "Irix", "Linux");

**[in_array 不适](http://php.net/manual/en/function.in-array.php)**用于您的情况，因为它返回对象数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T16:16:36.880

我建议编写一个辅助方法，它可以完成您想要的工作并返回 True 或 False。[可以在此处](http://codeigniter.com/user_guide/general/helpers.html)找到有关如何操作的信息

# database - factory 和 dao 用 spring 支持一些数据库

> ID：11168901
> 
> 赞同：0
> 
> 时间：2012-06-23T10:52:33.637
> 
> 标签：database, spring, dao, factory-pattern

目前我们有一个使用支持mysql的spring的应用程序。有些人更喜欢使用 Oracle。所以我用spring搜索了一种方法来为每个数据库建立一个抽象工厂，每个数据库都有一个dao。如何在所有这些组件之间放置胶水？组件如何知道需要使用的数据源？春天有什么好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:04:36.967

不清楚您的问题到底是什么，但 Spring 配置文件可以解决所有问题。首先，您需要`DataSource`为每个支持的数据库定义两个 s：

```
<bean id="oracleDataSource" class="..." profile="oracle">
    <!-- -->
</bean>

<bean id="mysqlDataSource" class="..." profile="mysql">
    <!-- -->
</bean> 
```

注意`profile`属性。实际上，您可能会使用不同的 JDBC URL 和驱动程序简单地对一个数据源进行参数化，但这并不重要。

现在您定义了每个 DAO 的两个版本：一个用于 Oracle，一个用于 MySQL：

```
interface MonkeyDao {
    //...
}

@Repository
@Profile("oracle")
class OracleMonkeyDao implements MonkeyDao {
    //...
}

@Repository
@Profile("mysql")
class MySqlMonkeyDao implements MonkeyDao {
    //...
} 
```

如您所见，您定义了两个实现相同接口的 bean。如果您在没有配置文件的情况下执行此操作，然后自动装配它们：

```
@Resource
private MonkeyDao monkeyDao; 
```

由于未解决的依赖关系，Spring 启动将失败。但是，如果您启用配置文件之一（`mysql`或`oracle`），Spring 只会实例化并创建匹配配置文件的 bean。

# asp.net - 异步页面和处理程序

> ID：11168903
> 
> 赞同：0
> 
> 时间：2012-06-23T10:53:05.563
> 
> 标签：asp.net

异步页面和处理程序的主要好处是什么？是您将负载卸载到单独的线程吗？这并不是说用户可以在页面处理时做其他事情 - 对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:01:24.160

是的，这不是用户会看到的东西。

这样您就不会占用等待长时间运行的任务完成的工作线程。普通服务器上的小型站点可能看不到太多好处，但当负载开始增加时，它确实有帮助。

# solr - Windows Server 2008 R2 上 TomCat 中的 Solr - Solr 不会自动启动

> ID：11168906
> 
> 赞同：0
> 
> 时间：2012-06-23T10:53:17.177
> 
> 标签：solr, tomcat7, windows-server-2008-r2

我已按照本指南在 Windows Server 2008 R2 上运行的 TomCat 中安装 Solr。

[http://drupal.org/node/1359598](http://drupal.org/node/1359598)

如指南第 6 步所述，我可以使用以下命令从命令行运行 Solr：

```
java -Dsolr.solr.home=c:/solr/ -jar start.jar 
```

正如预期的那样，我现在可以看到 Solr`http://localhost:8983/solr/`

如果我重新启动服务器 Solr 不会自动启动。如上所示，我必须通过命令行运行 start.jar 文件。

我尝试将以下内容添加到配置 TomCat UI 中的 Java 选项中。

```
-Dsolr.solr.home=c:\solr 
```

这行不通。我可以运行 Solr 的唯一方法是使用命令行。我确信这是一个很容易解决的问题，但我无法解决。有谁知道我配置不正确？

我的技术栈是：

*   JRE 7
*   汤姆猫 7.0
*   索尔 3.6.0
*   Windows Server 2008 R2 (IIS 7.5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T13:12:29.027

solr 中的默认 servlet 容器是 jetty，而不是 tomcat。因此，当您运行 java -jar start.jar 时，您正在启动码头。

请参阅以下有关使用 tomcat 运行[solr](http://wiki.apache.org/solr/SolrTomcat)的文档。

完成此操作后，要启动 tomcat 作为自动重新启动的服务，请遵循此文档[http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html)

# objective-c - iOS – 子类 UITableViewCell 以模仿 UITableViewCellStyleValue1

> ID：11168911
> 
> 赞同：0
> 
> 时间：2012-06-23T10:54:20.857
> 
> 标签：objective-c, uitableview

我想要看起来，`UITableViewCellStyleValue1`但不仅仅是在左侧有文本，我想要一个小图像，然后在它的右侧显示文本。我将如何子类`UITableViewCell`化以获得默认外观`UITableViewCellStyleValue1`但我的小调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:38:06.047

例如，当您继承 UITableViewCell 时，您可以创建自己的 init 方法：

```
@implementation BIDCell {
UITableViewCellStyle style1;
}

- (id)init:(NSString *)reuseIdentifier
{
    style1 = UITableViewCellStyleValue1;
    self = [super initWithStyle:style1 reuseIdentifier:reuseIdentifier];
    if (self) {
    //your code
    }
return self;
} 
```

当你初始化你的单元格时，你只需要`reuseIdentifier`，单元格样式已经设置好了。

# sql - 如何在 SQL 中选择所有值并隐藏 NULL 值？

> ID：11168914
> 
> 赞同：1
> 
> 时间：2012-06-23T10:54:47.237
> 
> 标签：sql, sqlite

所以在我的数据库中，有些行有 NULL 值，当我从表中选择 * 时，NULL 值也显示为文本“null”。所以我想隐藏所有 NULL 值。有没有人有查询的想法？谢谢！

这是我在 DB 中的输入：

```
db.execSQL("CREATE TABLE IF NOT EXISTS table (name VARCHAR, kg VARCHAR,   pod                 VARCHAR,reps VARCHAR, time VARCHAR );");
  db.execSQL("INSERT INTO table VALUES('name 1',NULL,NULL , NULL , '"+s+"');");
 db.execSQL("INSERT INTO table VALUES(NULL,'S 1','"+ee5+"' , '"+ee+"' , '"+s+"');");
 db.execSQL("INSERT INTO table VALUES(NULL,'S 2','"+ee6+"' , '"+ee2+"', '"+s+"');");
 db.execSQL("INSERT INTO table VALUES(NULL,'S 3','"+ee7+"' , '"+ee3+"', '"+s+"');");
 db.execSQL("INSERT INTO table VALUES(NULL,'S 4','"+ee8+"' , '"+ee4+"', '"+s+"');"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:26:32.097

这取决于列的数据类型。

```
-- If the data type is integer:
SELECT COALESCE(the_column, 0)
FROM the_table;

-- or, if the column is a char or varchar type:
SELECT  COALESCE(the_column, 'some text here')
FROM the_table;

-- or, if it is a date:
SELECT  COALESCE(the_column, '1900-01-01')
FROM the_table; 
```

顺便说一句：某些数据库具有执行相同操作的 IFNULL() 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T11:14:58.797

这就是您要查找的内容：

```
SELECT x, y, etc, CASE WHEN field IS NOT NULL THEN field ELSE '' END AS hehe FROM table; 
```

**编辑**：添加到您的评论中，一旦您知道如何为一列执行此操作，这将非常简单。对所有列应用相同的内容。所以不要指望家庭作业能完成，而是期待帮助解决你的问题，最终你自己必须做。

顺便说一句，这是如何..

```
SELECT COALESCE(name, ''), COALESCE(kg, ''), COALESCE(pod, ''), COALESCE(reps, ''), 
       COALESCE(time, '') 
FROM   table 
```

你在这个线程中有三个很好的方法（包括我的），我个人觉得另外两个更直观。通过应用与我展示的相同的逻辑来使用 any。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T11:18:44.167

在 SQLite 中，您应该能够执行以下操作：

```
SELECT col1, col2, ..., ifnull(coln, '') FROM TABLE 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-23T11:09:04.303

```
SELECT* FROM TableName
WHERE ValueCol IS NOT NULL 
```

[http://www.w3schools.com/sql/sql_null_values.asp](http://www.w3schools.com/sql/sql_null_values.asp)

如果您正在使用 sqlite for android

看这篇[文章](http://www.sqlite.org/nulls.html)

# c# - 如何知道复选框列表项（动态）是否被选中？

> ID：11168915
> 
> 赞同：0
> 
> 时间：2012-06-23T10:54:51.727
> 
> 标签：c#, asp.net

我在 asp.net c# 中创建了一个 2 chekboxlist，这个 chek 框列表的列表项是从数据库中填充的（动态）然后我想检查这些复选框列表是否被选中？请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:06:12.907

或者您可以使用此代码

```
IEnumerable<int> allChecked = (from item in chkBoxList.Items.Cast<ListItem>() 
                               where item.Selected 
                               select int.Parse(item.Value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:56:47.580

试试这个代码：

```
 String values = "";
    for (int i=0; i< cbl.Items.Count; i++)
    {
            if(cbl.Items[i].Selected)
            {
                    values += cbl.Items[i].Value + ",";
            }
    }

    values = values.TrimEnd(','); 
```

或者您可以使用此代码（Linq）

```
 IEnumerable<int> allChecked = (from item in chkBoxList.Items.Cast<ListItem>() 
                               where item.Selected 
                               select int.Parse(item.Value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:59:40.433

尝试这个

```
string ids=string.Empty;

foreach (ListItem item in checkboxlist1.Items)
        { 
            if(item.Selected)
ids+=item.Value+",";
        }

ids=ids.Trim(','); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T11:02:21.480

您可以使用`SelectedIndex`检查清单是否已检查：

```
if( ckl.SelectedIndex != -1 )
{
// Do Something
} 
```

# ios - IBOutlet 和其他的弱或强

> ID：11168916
> 
> 赞同：31
> 
> 时间：2012-06-23T10:55:01.870
> 
> 标签：ios, ios5, automatic-ref-counting, weak-references, strong-references

我已将我的项目切换到 ARC，但我不明白我是否必须使用`strong`IBOutlets `weak`。Xcode 这样做：在界面生成器中，如果创建一个`UILabel`例如，我将它与助手编辑器连接到我的`ViewController`，它会创建这个：

```
@property (nonatomic, strong) UILabel *aLabel; 
```

它使用`strong`，而不是我在 RayWenderlich 网站上阅读了一个教程，上面写着：

> 但是对于这两个特定的属性，我有其他计划。而不是 `strong`，我们将它们声明为`weak`。

```
@property (nonatomic, weak) IBOutlet UITableView *tableView;
@property (nonatomic, weak) IBOutlet UISearchBar *searchBar; 
```

> `Weak`是所有*出口*属性的推荐关系。这些视图对象已经是视图控制器的视图层次结构的一部分，不需要保留在其他地方。声明你的 outlet 的一大好处`weak`是它可以节省你编写 viewDidUnload 方法的时间。
> 
> 目前我们的`viewDidUnload`样子是这样的：

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    self.tableView = nil;
    self.searchBar = nil;
    soundEffect = nil;
} 
```

> 您现在可以将其简化为以下内容：

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    soundEffect = nil;
} 
```

所以使用`weak`, 而不是,`strong`并在.`videDidUnload``strong``self... = nil``viewDidUnload`

我的问题是：我什么时候必须使用`strong`，什么时候`weak`？我还想用于部署目标 iOS 4，所以我什么时候必须使用`unsafe_unretain`？任何人都可以通过一个小教程帮助我很好地解释我，什么时候使用`strong`，`weak`以及`unsafe_unretain`使用 ARC？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-23T14:35:51.100

**经验法则**

*当父对象具有对子对象的引用时，您应该使用`strong`引用。当子对象具有对其父对象的引用时，您应该使用一个`weak`引用或一个引用 `unsafe_unretained`（如果前者不可用）。一个典型的场景是当您与代表打交道时。例如， a`UITableViewDelegate`不保留包含表视图的控制器类。*

![在此处输入图像描述](../Images/6275c8e8d9df60d07aa77fa6a6d0f9ff.png)

这里有一个简单的模式来展示主要概念。

假设第一个 A、B 和 C 是`strong`引用。特别是，C 有一个`strong`对其父级的引用。当 obj1 被释放（某处）时，A 引用不再存在，但您有泄漏，因为 obj1 和 obj2 之间存在循环。就保留计数而言（**仅用于解释目的**），obj1 的保留计数为 2（obj2 对其有`strong`引用），而 obj2 的保留计数为 1。如果 obj1 被释放，它的保留计数现在为 1，并且它的`dealloc`方法没有被调用。obj1 和 obj2 仍然保留在内存中，但没有人引用它们：**Leak**。

相反，如果只有 A 和 B 是`strong`refs 并且 C 是合格的，因为`weak`一切都很好。你没有泄漏。事实上，当 obj1 被释放时，它也释放了 obj2。就保留计数而言，obj1 的保留计数为 1，obj2 的保留计数为 1。如果 obj1 被释放，则其保留计数现在为 0，并`dealloc`调用其方法。obj1 和 obj2 从内存中删除。

**一个简单的建议：在处理 ARC 时开始考虑对象图。**

关于您的第一个问题，当您处理 XIB 时，这两种解决方案都有效。通常`weak`，在处理内存周期时会使用参考。关于 XIBs 文件，如果你使用`strong`你需要设置`nil`，`viewDidUnload`因为如果你不这样做，在内存不足的情况下，你可能会导致意外泄漏。你不会释放它们，`dealloc`因为 ARC 会为你做。 `weak`相反，不需要这种处理，因为当目标对象被销毁时，这些值会`nil`自动设置。不再有悬空指针。

如果您有兴趣，我真的建议您阅读**Mike Ash**的[friday-qa-2012-04-13-nib-memory-management](http://www.mikeash.com/pyblog/friday-qa-2012-04-13-nib-memory-management.html)。

 **关于你的第二个问题，如果你需要支持 iOS 4，而不是`weak`你必须使用`unsafe_unretained`.

在 SO 中有很多问题/答案。这里主要的：

[使用 ARC 并针对 iOS 4.0 时如何替换弱引用？](https://stackoverflow.com/questions/6893038/how-do-i-replace-weak-references-when-using-arc-and-targeting-ios-4-0)

[Objective-C 中的自动引用计数不能防止或最小化什么样的泄漏？](https://stackoverflow.com/questions/6260256/what-kind-of-leaks-does-automatic-reference-counting-in-objective-c-not-prevent/)

[使用 ARC、lifetime qualifier assign 和 unsafe_unretained](https://stackoverflow.com/questions/8397511/using-arc-lifetime-qualifier-assign-and-unsafe-unretained)

[强 / 弱 / 保留 / unsafe_unretained / 分配](https://stackoverflow.com/questions/9784762/strong-weak-retain-unsafe-unretained-assign)

希望有帮助。

**更新**

根据 shaunlim 的评论，从 iOS 6 开始，`viewDidUnload`方法已被弃用。在这里我真的建议看看 Rob 的回答：[iOS 6 - viewDidUnload migrate to didReceiveMemoryWarning?](https://stackoverflow.com/questions/12674268/ios-6-viewdidunload-migrate-to-didreceivememorywarning) .

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-23T11:08:44.687

您可以对通过 IBOutlets 连接到 IB 中的对象的对象使用弱，因为在这种情况下，只要超级视图存在，对象就会存在。这是因为父视图有一个指向其子视图的强指针。

如果您定义的指针是指向对象的唯一指针，则应将其声明为强指针。

如果您是注册开发者，我强烈建议您查看来自 WWDC11 和 WWDC12 的视频。另一个很好的资源是[斯坦福的 iOS 开发播客。](http://itunes.apple.com/de/course/ipad-iphone-app-development/id495052415)**

# android - 如何在滚动时强制 Android ListView 不更新？

> ID：11168917
> 
> 赞同：0
> 
> 时间：2012-06-23T10:55:07.867
> 
> 标签：android, listview, scroll, reload

我有`ListView`一个自定义适配器，每个项目都有一个动画`getView()`。关键是，我想为每个项目设置一次动画，但每次项目出现在屏幕上时都会发生这种情况（我向下滚动，更多项目出现动画，但是当我向后滚动时，它发生在我之前看到的项目上） .

我想知道是否有杀死 ListView 更新的方法？这更烦人，因为它还会重新加载我从网络上获取的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:02:15.187

> 关键是，我想为每个项目设置一次动画，但每次项目出现在屏幕上时都会发生这种情况

然后跟踪您之前为哪些动画制作过动画，并且不再为它们制作动画。

> 我想知道是否有杀死 ListView 更新的方法？

不。

> 更烦人的原因是它还会重新加载我从网络上获取的图像。

将这些图像缓存到内存和/或磁盘，因此不会多次下载图像。

# facebook - 是否可以在新闻源中显示用户提要的帖子？

> ID：11168918
> 
> 赞同：0
> 
> 时间：2012-06-23T10:55:13.800
> 
> 标签：facebook, oauth

用户通过 Facebook 对我的网页进行身份验证。我得到了一个访问令牌，似乎可以在她的墙上发帖。我可以成功地做到这一点。但是，该帖子与用户直接使用常规 Facebook 页面添加到墙上的内容有所不同。

后一种帖子出现在用户的新闻提要和用户朋友的新闻提要中。前一种帖子不会出现在新闻提要中。它也被挂在墙上，因为它是由我的应用程序编写的，并且可以选择分享它。它似乎被视为应用程序编写的内容，而不是代表用户编写的内容。用户必须共享它才能使其可见。这违背了我页面上的操作要点。我希望用户能够决定他们在我的页面上发布的帖子是他们也想在 Facebook 上发布的帖子，而无需访问两个页面。

我设置了权限值：EVERYONE（我已经尝试过 ALL_FRIENDS 和 PUBLIC）。

有没有办法解决这个问题，比如获取一个访问令牌，使应用程序能够*代表*用户发布，而不是在用户*许可*的情况下 - 在所有用户都登录到我的页面和Facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:07:53.563

> 它也被挂在墙上，因为它是由我的应用程序编写的，并且可以选择分享它。它似乎被视为应用程序编写的内容，而不是代表用户编写的内容。

通过 Graph API 发布的帖子总是显示“通过 appname”，这是没有办法的。

# javascript - 如何使用 jquery 或 javascript 验证输入框的内容

> ID：11168920
> 
> 赞同：0
> 
> 时间：2012-06-23T10:55:28.687
> 
> 标签：javascript, jquery

如何验证输入框的内容？例如，当用户在该收件箱 `http://www.example.com`输入框中写入时，将其转换为 `www.example.com`. 换句话说，它的有效第一个 http 如果存在，则自动将其删除并插入正确并在该输入框中显示正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:10:00.563

一个班轮：

```
$('input').keyup(function(){ $(this).val() === 'http://' && $(this).val(''); }); 
```

或者：

```
$('#validate').click(function(){ 
  var i = $('input');
  (/http:\/\//).test(i.val()) && i.val(i.val().replace('http://',''));
}); 
```

# c# - NumericUpDown ValueChanged 事件会立即产生后果吗？

> ID：11168922
> 
> 赞同：7
> 
> 时间：2012-06-23T10:55:54.493
> 
> 标签：c#, event-handling, numericupdown

我正在用 C# (.NET 4.0) 编写一个小应用程序。我想在 numericUpDown 中的值更改时触发一个事件，但似乎 numericUpDown ValueChanged 在控件失去焦点或有多个更改时触发。

**详细描述：** 我将（OnPropertyChanged）numericUpDown 与对象的属性绑定，以便立即反映更改。但我还需要使用这个新更改的 numericUpDown 值来计算一些东西（全局/与对象无关）。但是如果我使用 ValueChanged 事件，它触发得太晚了。

**简短的介绍：**

**我需要一个与 OnPropertyChanged 功能相似的事件。**

我能做些什么？

**编辑：** 在 ValueChanged 事件处理程序中，我对对象进行了一些计算，但已更改的值尚未提交给对象属性，因此我认为 ValueChanged 事件落后了。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T13:04:50.770

ValueChanged 是您需要使用的。我检查了，当控件失去焦点时它没有触发，我不能像你声称的那样输入多个更改。如果我真的快速点击三下，消息框会显示第一次点击的预期值，这就是你想要的。我不明白你说 ValueChanged 触发得太晚了。即使在屏幕上重新绘制之前，它也会在消息框中显示新值。

```
 private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
        MessageBox.Show("Value changed to " + numericUpDown1.Value.ToString());
    } 
```

# client - 有多少客户端连接到指定的端口号

> ID：11168924
> 
> 赞同：4
> 
> 时间：2012-06-23T10:56:05.813
> 
> 标签：client, freebsd, ports

如何计算连接到我的（远程）服务器上指定端口的所有连接（客户端）？

假设端口号是：`3306`（MySQL 端口），那么如何计算同时连接到该端口的客户端数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T11:00:13.820

看，我知道我会在 linux 中这样做： `netstat -anp | grep ":3306.*ESTABLISHED" | wc -l`

我希望它也能在 FreeBSD 中工作......让我知道结果！

# java - 如何保持方法在后台连续运行直到程序结束？

> ID：11168925
> 
> 赞同：2
> 
> 时间：2012-06-23T10:56:21.637
> 
> 标签：java, multithreading, swing

我想知道，如何让方法在后台运行。IE。此方法在程序启动时开始，并一直执行其语句，直到程序关闭。例如。假设我有一个方法“gravity()”，它在程序运行时不断递减某个值。现在尝试使用以下程序尝试此操作，其中我试图在未按下任何键时将公爵拉下（重力）。但没有发生。

```
 import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.*;
import java.util.HashMap;
import java.util.Map;
import javax.imageio.ImageIO;
import javax.swing.*;

public class MoveIcon extends JPanel {

    private static final long serialVersionUID = 1L;
    private static final String IMAGE_PATH = "http://duke.kenai.com/misc/Bullfight.jpg";
    private static final String IMAGE_PATH_PLAYER = "http://duke.kenai.com/iconSized/duke4.gif";
    public static final int STEP = 3;
    private static final int TIMER_DELAY = STEP * 8;
    private BufferedImage bkgrndImage = null;
    private BufferedImage playerImage = null;
    private Map<Direction, Boolean> directionMap = new HashMap<Direction, Boolean>();
    private int playerX = 0;
    private int playerY = 0;

    enum Direction {

        UP(KeyEvent.VK_UP, 0, -1), DOWN(KeyEvent.VK_DOWN, 0, 1),
        LEFT(KeyEvent.VK_LEFT, -1, 0), RIGHT(KeyEvent.VK_RIGHT, 1, 0);
        private int keyCode;
        private int xDirection;
        private int yDirection;

        private Direction(int keyCode, int xDirection, int yDirection) {
            this.keyCode = keyCode;
            this.xDirection = xDirection;
            this.yDirection = yDirection;
        }

        public int getKeyCode() {
            return keyCode;
        }

        public int getXDirection() {
            return xDirection;
        }

        public int getYDirection() {
            return yDirection;
        }
    }

    public MoveIcon() {
        try {
            URL bkgrdImageURL = new URL(IMAGE_PATH);
            URL playerImageURL = new URL(IMAGE_PATH_PLAYER);
            bkgrndImage = ImageIO.read(bkgrdImageURL);
            playerImage = ImageIO.read(playerImageURL);
            setPreferredSize(new Dimension(bkgrndImage.getWidth(), bkgrndImage.getHeight()));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        for (Direction direction : Direction.values()) {
            directionMap.put(direction, false);
        }
        setKeyBindings();
        Timer timer = new Timer(TIMER_DELAY, new TimerListener());
        timer.start();
    }

    private void setKeyBindings() {
        InputMap inMap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap actMap = getActionMap();
        for (final Direction direction : Direction.values()) {
            KeyStroke pressed = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, false);
            KeyStroke released = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, true);
            inMap.put(pressed, direction.toString() + "pressed");
            inMap.put(released, direction.toString() + "released");
            actMap.put(direction.toString() + "pressed", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, true);
                }
            });
            actMap.put(direction.toString() + "released", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, false);
                }
            });
        }

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (bkgrndImage != null) {
            g.drawImage(bkgrndImage, 0, 0, null);
        }
        if (playerImage != null) {
            g.drawImage(playerImage, playerX, playerY, null);
        }
    }

    private class TimerListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            boolean moved = false;
            for (Direction direction : Direction.values()) {
                if (directionMap.get(direction)) {
                    playerX += STEP * direction.getXDirection();
                    playerY += STEP * direction.getYDirection();
                    moved = true;
                }
            }
            if (moved) {
                int x = playerX - 2 * STEP;
                int y = playerY - 2 * STEP;
                int w = playerImage.getWidth() + 4 * STEP;
                int h = playerImage.getHeight() + 4 * STEP;
                MoveIcon.this.repaint(x, y, w, h); // !! repaint just the player
            }
        }
    }

    private static void createAndShowUI() {
        JFrame frame = new JFrame("MoveIcon");
        frame.getContentPane().add(new MoveIcon());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T12:11:22.667

以最简单的方式，你可以有这样的东西：

```
import javax.swing.JFrame;

public class TestBackgroudMethod {

    public static void main(final String[] args) {

        MyBackgroudMethod thread = new MyBackgroudMethod();
        thread.setDaemon(true);
        thread.start();

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                JFrame jFrame = new JFrame();
                jFrame.setSize(200, 200);
                jFrame.setVisible(true);
            }
        });
    }

    public static class MyBackgroudMethod extends Thread {

        @Override
        public void run() {
            while (true) {
                System.out.println("Executed!");
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

    }

} 
```

**编辑**

* * *

添加了带有摇摆工人的样本：

```
import javax.swing.JFrame;
import javax.swing.SwingWorker;

public class TestBackgroudMethod {

    public static void main(final String[] args) {

        new SwingBackgroupWorker().execute();

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                JFrame jFrame = new JFrame();
                jFrame.setSize(200, 200);
                jFrame.setVisible(true);
            }
        });
    }

    public static class SwingBackgroupWorker extends SwingWorker<Object, Object> {

        @Override
        protected Object doInBackground() throws Exception {
            while (true) {
                java.awt.EventQueue.invokeLater(new Runnable() {
                    public void run() {
                        System.out.println("executed");
                        // here the swing update
                    }
                });
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T09:51:50.663

正如您可能在 Java Docs 中看到的那样，“SWING 不是线程安全的”。

最好的方法是使用[SwingWorker 类](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。它提供了计算执行时间较长的任务的结果或性能的功能。

# node.js - 如何在不中断服务的情况下部署更改？

> ID：11168927
> 
> 赞同：4
> 
> 时间：2012-06-23T10:56:39.120
> 
> 标签：node.js, deployment, express

我即将开始一个使用**Node**、 Express 和 Mongo 的项目，但我必须首先解决一个重要问题。

假设我有一个**正在运行的应用程序**。迟早，我会再次编码并想要**部署更改**。到目前为止，我只在开发模式下工作，所以执行 ^C 并重新启动服务器不是问题。

在生产中怎么样？显然，我不能一次丢弃服务器和所有用户。有**没有办法在不中断服务的情况下部署更改？**

我已经研究过像 upstart 和类似的系统，但它并没有解决问题（或者我错过了什么？）。我目前正在考虑建立一种故障转移，但一定有人在我之前做过......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:29:18.167

好吧，我可能会使用像 nginx 这样的反向代理：内存占用少，能够处理大量同时连接，并且当我最终拥有多个服务器时支持故障转移。

使用这个 nginx 反向代理，我可以使用更新的源启动一个新的节点进程，让 nginx 切换到新节点并丢弃旧版本。

这也将允许我将以前版本的应用程序保留在服务器上，以防新版本过早崩溃......

链接： http: [//nginx.org/en/docs/control.html](http://nginx.org/en/docs/control.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:54:31.183

NodeJits 的Checkout [Forever](https://github.com/nodejitsu/forever/ "永远")。它守护进程并在出现故障时自动重新启动服务器。它还有一个选项来监视你的 CWD，所以如果你在你的 repo 中执行“git pull”，你的服务器将使用新代码重新启动。

我已经在生产中使用它作为基于拉的服务器模型一年多了，几乎没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:23:57.290

如果您关心可用性，那么您必须在多台服务器上运行您的服务，最好是在不同的物理位置。除了部署之外的许多事件都可能使单个服务器脱机。所以没有问题，您将每台服务器脱机，部署到它，然后将其重新联机。

如果您不关心可用性，那么仍然没有问题。

# php - php分页，每页限制

> ID：11168930
> 
> 赞同：3
> 
> 时间：2012-06-23T10:57:11.357
> 
> 标签：php, pagination

任何人都可以帮助我使用此代码来限制每页的数量，

```
function PageMain() {
    global $TMPL;

    $text = $_GET['a'];
    $name = urldecode(htmlEntities($_GET['q']));
    // pagination
    $per_page = 10;
    $page_query = mysql_query("SELECT COUNT(genres) from table WHERE genres LIKE '%%$name%'");
    $pages = @ceil(mysql_result($page_query, 0) / $per_page);

    $page = (isset($_GET['page']) AND (int)$_GET['page'] > 0) ? (int)$_GET['page'] : 1;
    $start = ($page - 1) * $per_page;

    $skin = new skin('shared/pagination'); $pagination = '';
    if ($pages >= 1 && $page <= $pages) {   
        for ($x=1; $x<=$pages; $x++) {
            $TMPL['pagination'] = ($x == $page) ? '<a class="active" href="/index.php?a=genre&q='.urlencode($name).'&page='.$x.'">'.$x.'</a> ' : '<a href="/index.php?a=genre&q='.urlencode($name).'&page='.$x.'">'.$x.'</a> ';
                $pagination .= $skin->make();
            }
        }
    $TMPL['pagination'] = $pagination;
} 
```

现在看起来像这张照片：

![http://i.imgur.com/7Y0tF.png](../Images/6b432dca44023ad4d90d433f94c3b9ea.png)

我需要做这样的事情，下一页和最后一页：

![http://i.imgur.com/7Oqfn.gif](../Images/661e96a112e15bb15ffc87eaff7a2df0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:05:41.950

对于大量页面，请考虑使用“对数”分页，请参见此处：

[如何为很多很多页面进行页面导航？对数页面导航](https://stackoverflow.com/q/7835752/999120)

# php - 如何在页面中包含 CSS 和 JS？

> ID：11168932
> 
> 赞同：1
> 
> 时间：2012-06-23T10:57:22.480
> 
> 标签：php, html, include

我知道如何`<link type="stylesheet" href=".." />`工作`<script type="text/javascript" src=".." />`。但是我对它们应该在 W3C 的上下文中以及在良好的编程实践的上下文中的位置有一些明确的理解。我有很多例子，这些都在标题中。我不知道为什么，但似乎合法。但是，当它们位于 HTML 代码的其他位置时会产生什么影响？

以 PHP 包含在网站所有页面中的文件为例`header`，该头文件有自己的 CSS\JS 文件。所以它们可以要么包含在头文件本身中，然后在包含头文件的页面的 HTML 正文中间会有一个`link`和一个`script`标签。另一种选择是将这些放在`head`每个文件的部分中，但是必须在每个页面中进行更改。

我的问题：

1.  根据 W3C ， `link`and标签应该在哪里？`script`
2.  如果它们像上面的示例一样位于 HTML 正文的中间，会有什么影响？
3.  就良好的编程实践而言，最佳解决方案是什么？
4.  如何`include`在拥有符合 W3C 的页面的同时进行以下操作，并且在更改 CSS\JS 文件时不必更新每个页面。
    *   考虑包含的代码片段独立于包含页面。

**只是为了清楚起见，一个简短的例子：（**考虑同样的情况也适用于 JS 文件）

header.html：

```
 <link rel="stylesheet" href="header.css" />     <!--- Should this be here? --->
<nav>
   <ul>
     <li>Menu item1</li>
     <li>Menu item2</li>
   </ul>
</nav> 
```

索引.php：

```
<html>
   <head>
      <link rel="stylesheet" href="header.css" />     <!--- Or should it be here? --->
   </head>
   <body>
      <?php include('header.html'); ?>
      <!--- Some HTML code ---->
   </body>
</html> 
```

header.css：

```
nav{ color: #00FF00; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:01:39.933

简单的

```
Put Scripts at the Bottom.
Put Stylesheets at the Top 
```

> [HTML 规范](http://www.w3.org/TR/html4/struct/links.html#h-12.3)明确规定样式表将包含在页面的 HEAD 中：“与 A 不同，[LINK] 只能出现在文档的 HEAD 部分，尽管它可能出现多次。” 这两种选择，空白的白屏或无样式内容的闪烁，都不值得冒险。最佳解决方案是遵循 HTML 规范并将样式表加载到文档 HEAD 中。

对于javascipts

> 脚本引起的问题是它们会阻止并行下载。[HTTP/1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4)建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

仅供参考： http: [//developer.yahoo.com/performance/rules.html#css_top](http://developer.yahoo.com/performance/rules.html#css_top)
[http://developer.yahoo.com/performance/rules.html#js_bottom](http://developer.yahoo.com/performance/rules.html#js_bottom)

**[编辑]**
对于你的新问题，

*   将该 header.html 设置为动态页面。
*   当包含这些内容时，使用 ob_get_contents 从输出缓冲区读取数据（假设您没有将其刷新）。
*   然后您可以将 css 文件注入到头部。
*   回应它。
*   使用 ob_end_clean() 清理缓冲区；

一些框架，比如 zend 允许你用[helpers](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headscript)来控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:00:53.003

样式表应始终位于标题中。根据 W3C 规范，样式标签不允许在正文中。你应该放在正文中的唯一 CSS 是内联 CSS，尽管我通常避免使用内联样式。

Head 设计用于（引用 W3C）：

> “有关当前文档的信息，例如其标题、可能对搜索引擎有用的关键字以及其他不被视为文档内容的数据”通过：[http ://www.w3.org/TR/html401/struct/global .html#h-7.4.1](http://www.w3.org/TR/html401/struct/global.html#h-7.4.1)

当您需要在用户加载页面之前加载它们时，您将 JS 放在 Header 中。GoogleAnalytics 或其他服务或 UI 元素可以加载到正文中。互联网连接速度慢的人会感谢你。您大小的内容将首先加载，而不是 nice2have 您网站的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:23:06.087

```
<html>
  <head>

     <link type="stylesheet" href=".." />
     <script type="text/javascript" src=".." />

  </head>
  <body>

     <!-- here html codes -->

  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T13:29:20.800

您必须在 head 部分示例代码中使用 Link 和 script 标签：

```
<html>
    <head>
    <link href="YOUR URL" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="YOUR URL"></script>
</head>
<body>
    <!--HTML tags-->
</body>
</html> 
```

# html - HTML。单行中的列

> ID：11168933
> 
> 赞同：0
> 
> 时间：2012-06-23T10:57:22.913
> 
> 标签：html, css

如何在一行中建立一列？

现在这些列是一个接一个垂直的。

例子：

█</p>

█</p>

█</p>

但我需要水平构建它们。

█ █ </p>

这是源代码的[链接。](http://jsfiddle.net/52u4W/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:04:17.220

我建议您将它们包装到一些外部`<div>`并`float: left`为`<div>`.

这是如何做到这一点的基本示例。

`​HTML`代码：

```
<div class="column"​​​​​​​​​&gt;
   <span>Simply dummy text</span>
</div>

<div class="column">
   <span>Simply dummy text</span>
</div>

<div class="column">
   <span>Simply dummy text</span>
</div> 
```

并且`CSS`：

```
.column {
   width: 160px;
   height: 200px;
   background-color: #eeeeee;
   float: left;
   margin-left: 5px;
   text-align: center;
}​ 
```

**注意：**这是[jsfiddle](http://jsfiddle.net/GGbvN/2/)中的工作示例。

**注意 2：**另外，如果您只想将其`class`用于`<div>`元素，请将其声明为`div.column`. 更新

**：** 感谢**@poncha**的建议。答案已更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:11:32.020

几种可能的解决方案。

1）`float: left`在您需要在同一行排列的每个 s 上使用。（可选）为每个内容添加宽度以避免内容混乱。在父容器中包含所有 <div>

2）使用水平平铺每个 s`display: inline`

3）实际上这是从早期的SO答案中复制的，我已经多次使用它......

```
<style>
 #whatever div {
  display: inline
  margin: 0 1em 0 1em
  width: 30%
}
</style>

<div id="whatever">
 <div>content</div>
 <div>content</div>
 <div>content</div>
</div> 
```

[https://stackoverflow.com/a/226261/608170](https://stackoverflow.com/a/226261/608170)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T11:12:03.620

在我看来，语义上更像是一个列表。你真的要关心IE7吗？如果不是，我建议你渲染一个标记，如

```
<ul class="inline-list">
  <li>my content</li>
  <li>my content</li>
  <li>my content</li>
</ul> 
```

然后通过 CSS 使用

```
.inline-list li {
  display: inline-block;
} 
```

这是[小提琴](http://jsfiddle.net/ALNTA/)

列表条目的行为类似于块元素（例如简单的 div），因此您可以应用宽度和高度等...很好的是它会自动换行。（这对于浮动恕我直言并不容易）

对于 IE7：如果显示为块元素，则优雅降级，但取决于用例（也许你可以通过使用 display: inline 解决这个问题；但我现在无法证明这一点）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T11:08:14.983

将 float:left 添加到 div 并使用 overflow:hidden 属性固定宽度

```
div { 
    -webkit-column-width: 300px;
    -webkit-column-height: 300px;    
    height: 300px;
    width:300px;
    float:left;
    -webkit-column-gap:0px;
    overflow:hidden;
} 
```

演示：http: [//jsfiddle.net/surendraVsingh/52u4W/1/](http://jsfiddle.net/surendraVsingh/52u4W/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T11:08:30.363

尝试这个

```
 <div>
        <div id="one" class="clhr">
             <h3>Column1</h3>
        </div>
        <div id="two" class="clhr" >
             <h3>Column2</h3>
        </div>
        <div id="three" class="clhr">
             <h3>Column3</h3>
        </div>
    </div> 
```

* * *

```
 .clhr {
    border: 1px solid red;
    float: left;
    height: 300px;
    margin-right: 16px;
    width: 200px;
} 
```

# titanium - 以当前位置居中地图 - Titanium

> ID：11168937
> 
> 赞同：0
> 
> 时间：2012-06-23T10:57:59.230
> 
> 标签：titanium, mkmapview, currentlocation

我在模拟器上运行我的应用程序，我有两个问题：1）默认的“用户当前位置”位于旧金山。我可以在不使用“区域：”的情况下更改它并将增量设置为长纬度吗？2）如何将地图居中在当前位置（我希望当前位置在地图的中心）提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:42:54.567

您不能在模拟器中使用当前位置，这只能在设备上使用。

# javascript - “函数调用很昂贵”与“保持函数小”

> ID：11168939
> 
> 赞同：54
> 
> 时间：2012-06-23T10:58:20.820
> 
> 标签：javascript, performance

一方面，我读到或听说“函数调用很昂贵”并且它们会影响效率（例如，[在 Nicholas Zakas 的 Google 技术谈话](http://www.youtube.com/watch?v=mHtdZgou0qU)中）。

然而，另一方面，似乎可以接受函数/方法最好保持简短，并且应该只真正执行一项任务，正如在[此处](https://stackoverflow.com/questions/406760/whats-your-most-controversial-programming-opinion)普遍接受的那样。

我在这里遗漏了什么，或者这两条建议不是相互矛盾的吗？是否有一些经验法则可以让人们保持禅宗般的平衡？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-23T11:13:26.030

适用于所有语言的一般规则是：使函数（方法、过程）尽可能小。当您添加正确的命名时，您将获得非常易于维护和可读的代码，您可以轻松地专注于一般图片并*深入*了解有趣的细节。使用一种巨大的方法，您总是在查看细节，而大局被隐藏了。

这条规则特别适用于聪明的语言和编译器，它们可以进行花哨的优化，例如[内联](http://en.wikipedia.org/wiki/Inline_function)或发现哪些方法不是真正的虚拟方法，因此不需要双重分派。

回到 JavaScript——这在很大程度上依赖于 JavaScript 引擎。在某些情况下，我希望体面的引擎能够内联函数，从而避免执行成本，尤其是在紧密循环中。但是，除非您有性能问题，否则更喜欢较小的函数。可读性更为重要。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-23T11:23:31.963

在一个完美的世界里，没有错误（因为代码只是神奇地自我修复），并且从一开始就冻结了需求，也许可以忍受巨大的无所不能的功能。

但在这个世界上，它变得太昂贵了——而且不仅仅是在“人月”方面。Nicholas Zakas 写[了一篇精彩的文章](http://www.nczonline.net/blog/2012/06/12/the-care-and-feeding-of-software-engineers-or-why-engineers-are-grumpy/)，描述了软件开发人员如今面临的大部分挑战。

这种转变可能看起来有些人为，但我的观点是，“一个功能 - 一项任务”方法更易于维护和灵活 - 换句话说，最终让开发人员和客户都感到高兴。

但是，这并不意味着您不会努力使用尽可能少的函数调用：请记住，这不是首要任务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T13:37:10.653

我的经验法则是，如果一个函数的行长超过一个屏幕，那么是时候将它分解成更小的部分了，尽管我的许多函数最终会自然而然地比它小一些，而不会被“人为”分割。而且我通常会留下足够的空白，即使是全屏也不是很多代码。

我尝试让每个函数只执行一项任务，但随后一项任务可能是“重绘屏幕”，这将涉及在单独的函数中实现的一系列子任务，而这些子任务又可能在单独的函数中具有自己的子任务。

从（对我来说）可读性（因此易于维护）感觉自然的东西开始，我不担心函数调用会很昂贵，除非特定代码在测试时表现不佳 - 然后我会考虑把东西带回来-line（特别是在循环中，从嵌套循环开始）。虽然曾经说过，有时您只知道某段特定的代码不会很好地执行并在进行测试之前重写它......

我会避免“过早的优化”，尤其是使用智能编译器的语言，这些编译器可能会在幕后进行相同的优化。当我第一次开始使用 C# 时，有人告诉我，由于 JIT 编译器的工作方式，将代码分解为更小的函数在运行时成本会*更低。*

回到我的一个全屏规则，在 JavaScript 中，嵌套函数很常见（由于 JS 闭包的工作方式），如果我使用另一种语言，这会使包含函数比我想要的更长，所以有时最终结果是妥协。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-27T01:04:51.250

函数调用总是很昂贵（尤其是在循环中），并且内联并不像您想象的那样经常发生

Node.js（任何版本）附带的 V8 引擎应该进行广泛的内联，但实际上这种能力受到很大限制。

以下（微不足道的）代码片段证明了我的观点（Win10x64 上的节点 4.2.1）

```
"use strict";

var a = function(val) {
  return val+1;
}

var b = function(val) {
  return val-1;
}

var c = function(val) {
  return val*2
}

var time = process.hrtime();

for(var i = 0; i < 100000000; i++) {
  a(b(c(100)));
}

console.log("Elapsed time function calls: %j",process.hrtime(time)[1]/1e6);

time = process.hrtime();
var tmp;
for(var i = 0; i < 100000000; i++) {
  tmp = 100*2 + 1 - 1;
}

console.log("Elapsed time NO function calls: %j",process.hrtime(time)[1]/1e6); 
```

结果

```
Elapsed time function calls: 127.332373
Elapsed time NO function calls: 104.917725 
```

+/- 20% 的性能下降

人们会期望 V8 JIT 编译器内联这些函数，但实际上`a`，`b`或者`c`可能在代码中的其他地方被调用，并且不适合您使用 V8 获得的容易实现的内联方法。

我已经看到大量代码（Java、Php、Node.js）由于方法或函数调用**滥用**而在生产中表现不佳：如果您编写代码 Matryoshka 风格，运行时性能将**随着调用堆栈大小线性下降**，尽管在概念上看起来很干净。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-30T01:37:18.730

致所有人：这更有“评论”的感觉。承认。我选择使用“答案”的空间。请忍耐。

@StefanoFratini：请把我的笔记作为你工作的*基础。*我想避免批评。

以下是进一步改进帖子中代码的两种方法：

*   使用来自 process.hrtime() 的元组的两半。它返回一个数组 [秒，纳秒]。您的代码使用元组的纳秒部分（元素 1），我找不到它使用秒部分（元素 0）。
*   明确单位。

我能配得上我的咆哮吗？不知道。这是 Stephano 代码的开发。它有缺陷；如果有人告诉我这件事，我不会感到惊讶。那没关系。

```
"use strict";

var a = function(val) { return val+1; }

var b = function(val) { return val-1; }

var c = function(val) { return val*2 }

var time = process.hrtime();

var reps = 100000000

for(var i = 0; i < reps; i++) { a(b(c(100))); }

time = process.hrtime(time)
let timeWith = time[0] + time[1]/1000000000
console.log(`Elapsed time with function calls: ${ timeWith } seconds`);

time = process.hrtime();
var tmp;
for(var i = 0; i < reps; i++) { tmp = 100*2 - 1 + 1; }

time = process.hrtime(time)
let timeWithout = time[0] + time[1]/1000000000
console.log(`Elapsed time without function calls: ${ timeWithout } seconds`);

let percentWith = 100 * timeWith / timeWithout
console.log(`\nThe time with function calls is ${ percentWith } percent\n` +
    `of time without function calls.`)

console.log(`\nEach repetition with a function call used roughly ` +
        `${ timeWith / reps } seconds.` +
    `\nEach repetition without a function call used roughly ` +
        `${ timeWithout / reps } seconds.`) 
```

它显然是 Stephano 代码的后代。结果完全不同。

```
Elapsed time with function calls: 4.671479346 seconds
Elapsed time without function calls: 0.503176535 seconds

The time with function calls is 928.397693664312 percent
of time without function calls.

Each repetition with a function call used roughly 4.671479346e-8 seconds.
Each repetition without a function call used roughly 5.0317653500000005e-9 seconds. 
```

和 Stephano 一样，我使用了 Win10 和 Node（对我来说是 v6.2.0）。

我承认以下论点

*   “从角度来看，在一纳秒内（十亿分之一，1e-9），光传播大约 12 英寸。”
*   “我们只谈论少量纳秒（47 到 5），那么谁在乎百分比呢？”
*   “有些算法每秒会进行无数次函数调用，所以它会为它们加起来。”
*   “我们大多数开发人员不使用这些算法，因此担心函数调用的数量对我们大多数人来说适得其反。”

我会在经济论点上挂上帽子：我的电脑和之前的电脑每台都不到 400 美元（美国）。如果一个软件工程师每小时挣 90 到 130 美元，那么他们对老板的时间价值就是一台像我这样的计算机与他们三四个小时的工作的比率。在那种环境下：

这与公司需要的软件停止工作时每小时损失的美元相比如何？

当付费客户暂时无法使用业务合作伙伴生产的收缩包装软件时，这与失去的商誉和声望相比如何？

还有很多其他这样的问题。我将省略它们。

当我解释答案时：可读性和可维护性支配着计算机性能。我的建议？相应地编写代码的第一个版本。我尊敬的许多人都说短函数有帮助。

完成代码并且不喜欢性能后，请找到瓶颈。我尊敬的许多人说，这些点*从来都不*是你所期望的。当你了解他们时，工作他们。

所以双方都是对的。一些。

我？我猜我在某个地方。两分钱。

# magento - Magento：计算集合的首选语法

> ID：11168940
> 
> 赞同：0
> 
> 时间：2012-06-23T10:58:24.517
> 
> 标签：magento

这似乎是一个愚蠢的问题，因为最终结果是相同的，但我看到了框架的混合使用，并想知道是否存在差异，无论是性能、语法、风格，还是只是简单的程序员偏好。

当计算一个集合时，我们应该使用 $collection->count() 还是 count($collection)

我知道为什么我们可以两者都做，因为集合实现了交错，所以我只是问要使用哪个以及出于什么原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:45:39.063

我从未对其进行基准测试，但 using`$collection->count()`可能会比 性能略高`count($collection)`，因为它缺少 PHP 检测`Countable`接口所需的开销。

但是，由于我们在这里讨论的是*纳秒*，所以这根本不重要。

我会说，使用任何你喜欢的东西，如果你是一个人的表演。但是，如果您在一个团队中工作，请选择其中一个，将其作为编码约定并坚持下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T09:19:24.067

`$collection()->count()`并`count($collection)`具有相同的性能。他们加载整个集合并计算项目......

了解集合中项目数的更好方法是`$collection->getSize()`.

# javascript - jQuery - 调用函数 onmouseout 但前提是光标没有移动到某个区域

> ID：11168944
> 
> 赞同：0
> 
> 时间：2012-06-23T10:59:15.477
> 
> 标签：javascript, jquery

我有这个链接：

```
<a class='itemshow'>Show Details</a> 
```

当此链接悬停在上方时，会在其下方打开一个 div，其中包含一些内容。这很好用。现在，我需要一个 .mouseout() 事件来关闭打开的 div（div 的 id 是 gen_details），但前提是光标没有向下移动到 div 本身。

我已经编写了一个关闭 div 的函数（见下文，slideToggle 执行此操作），我只需要修改 - 检查光标是否在 div 的边界内的条件，如果不是则只执行代码。

```
 $('a.itemshow').mouseleave(function()
        { 
//if(condition here to check if cursor is out of the div's boundaries){
        if($('#gen_details').hasClass("open")){
            $('#gen_details').slideToggle(300);
            $('#gen_details').removeClass("open");
                return false;
            }
//}
        }); 
```

不应该太复杂，但如果没有任何复杂的黑客，我无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:03:20.820

这种事情通常通过一个小的超时来解决，如果鼠标进入某个元素，这个超时就会被清除。就像是：

```
var timer;

$('a.itemshow, #gen_details').on({
    mouseenter: function() {
        clearTimeout(timer);
        $("#gen_details").slideDown(300);
    },
    mouseleave: function() {
        timer = setTimeout(hideGen, 200);  
    }
});

function hideGen() {
    $("#gen_details").slideUp(300);
} 
```

​<a href="http://jsfiddle.net/vuqjy/" rel="nofollow">FIDDLE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T10:41:10.363

不需要计时器或类似的东西。您只需将鼠标悬停功能设置为同时选择链接和 div。因此，如果您将鼠标悬停在包含的 div 上，它会执行默认操作并远离 div 或链接，然后调用 mouseout 处理程序，不确定您是否明白我的意思。

小提琴：http: [//jsfiddle.net/avukonke/fcSUH/](http://jsfiddle.net/avukonke/fcSUH/)

```
<a href="www.twitter.com" class="tester"><img src="https://blog.twitter.com/sites/all/themes/gazebo/img/twitter-bird-white-on-blue.png" /></a>

<div style="width:200px; height: 100px; background-color:black; clear:none;" class="myblock"></div> 
```

# php - MySQL 服务器在“读取初始通信数据包”，系统错误：111

> ID：11168945
> 
> 赞同：8
> 
> 时间：2012-06-23T10:59:36.177
> 
> 标签：php, sql

我将我的网站移动到**Godaddy 服务器**，但 SQL 连接即使进行了足够的更改，也无法正常工作，之前工作得非常好

```
<?php
$link = mysql_connect('www.xxxxx.com', 'phpadminusername', 'phpadminpasswor');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
/*echo 'Connected successfully';*/
echo "DB CONNECTION :<font color='green'>ACTIVE</font>";

?> 
```

它显示一个错误

> 警告：mysql_connect() [function.mysql-connect]：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：/home/content/58/9508458/html/psychiatric/private.php 中的 111 在第 196 行无法连接：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：111

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T12:37:36.517

通过在 Godaddy.com 专门提供的帐户管理器中更新主机名来修复 .. 不仅仅是域名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:57:03.640

这可能意味着 mySQL 被配置为仅列出来自特定主机（或主机）的请求。您可以告诉 MySQL 只接受来自特定 IP 地址的数据包（通常是 localhost，但在 GoDaddy 上可能更宽 - 不确定，因为我不使用它们）。

检查您的连接字符串 - 特别是“www.xxxxx.com”位。这可能需要是“localhost”或特定的 IP 地址。

# html - 3使用div的列布局，文字去哪了？

> ID：11168947
> 
> 赞同：0
> 
> 时间：2012-06-23T10:59:42.950
> 
> 标签：html

我在这里看到了很多关于使用 div 标签的 3 列布局的问题，这是我想要实现的。

但是我不知道在哪里输入文本和其他内容，例如我希望第 1 列与婚纱摄影相关，第 2 列与人像摄影相关，第 3 列具有可点击的社交媒体按钮（我有这些代码）和关于它们的几句话。

我习惯于模板网站，但我想自定义我的 zenfolio 网站，而不是他们非常过时的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:48:28.670

试试这个网站，它会即时生成结构化的 CSS 代码。

1.  [http://www.zurb.com/playground/css-grid-builder](http://www.zurb.com/playground/css-grid-builder)（我的选择）
2.  [http://www.thenoodleincident.com/tutorials/box_lesson/boxes.html](http://www.thenoodleincident.com/tutorials/box_lesson/boxes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:42:42.283

试试这个，它使用引导程序[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)，你可以很容易地实现这个并且可以使用引导程序的很多组件。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Demo Layout with 3 columns</title>
    <link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css">
    <style type='text/css'>
        .container-fluid > .sidebar
        {
            position: relative;
            top: 0;
            left: auto;
            width: 220px;
        }
        .left
        {
            float: left;
        }
        .right
        {
            float: right;
        }
        .fixed-fluid
        {
            margin-left: 240px;
        }
        .fluid-fixed
        {
            margin-right: 240px;
            margin-left: auto !important;
        }
        .fixed-fixed
        {
            margin: 0 240px;
        }
    </style>
    <style type="text/css">
        body
        {
            padding-top: 60px;
        }
    </style>
</head>
<body>
    <div class="topbar">
        <div class="topbar-inner">
            <div class="container-fluid">
                <a class="brand" href="#">My Demo Layout</a>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="sidebar left">
            <div class="well">
                <h5>
                    Left Siderbar Menu</h5>
                <ul>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Product</a></li>
                </ul>
            </div>
        </div>
        <div class="sidebar right">
            <div class="well">
                <h5>
                    News</h5>
                <p>
                    News About Project !! About Project !! About Project !!</p>
            </div>
        </div>
        <div class="content fixed-fixed">
            <!-- Main block center -->
            <div class="hero-unit">
                <h1>
                    About Project!!</h1>
                <p>
                    About Project !! About Project !! About Project !! About Project !! About Project
                    !! About Project !! About Project !! About Project !!</p>
                <p>
                    <a class="btn primary large">More &raquo;</a></p>
            </div>
            <footer>
          <p>&copy; Company 2012</p>
        </footer>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:11:23.760

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<style type="text/css">

#left_wrapper {
  width: 33%;
  float: left;
  position: relative;
}

#middle_wrapper {
  width: 33%;
  float: left;
  position: relative;
}

#right_wrapper {
  width: 33%;
  float: left;
  position: relative;
}

#left {
  padding: 10px 60px;
}

#right {
  padding: 10px 60px;
}

#middle {
  padding: 10px 60px;
}
</style>
</head>
<body>
  <div id="left_wrapper"> 
  <div id="left">
  <p>This is the left text :  This is the left text : 
    This is the left text :  This is the left text :
    This is the left text :  This is the left text :
    This is the left text :  This is the left text :
  </p>
  </div>
  </div>
  <div id="middle_wrapper"> 
  <div id="middle">
  <p>This is the middle text : this is the middle text 
    This is the middle text : this is the middle text 
    This is the middle text : this is the middle text 
    This is the middle text : this is the middle text 
    This is the middle text : this is the middle text 
  </p> 
  </div>
  </div>
  <div id="right_wrapper">
    <div id="right"> 
   <p>This is the right text : This is the right text 
     This is the right text : This is the right text 
    This is the right text : This is the right text 
    This is the right text : This is the right text 
   </p>
   </div>
   </div>
</body>
</html> 
```

包装器定义树列，但其他 div（左、右、中间）允许更轻松的操作。

您可以使用填充在列之间添加间距（正如我在代码示例中添加的那样），但填充将在新的 div 上，而不是包装器上。

还有另一种方法，它实际上将一个 div 划分为列。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css"> 
.newspaper
{
-moz-column-count:3; /* Firefox */
-webkit-column-count:3; /* Safari and Chrome */
column-count:3;
}
</style>
</head>
<body>

<p><b>Note:</b> Internet Explorer does not support the column-count property.</p>

<div class="newspaper">
Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Typi non habent claritatem insitam; est usus legentis in iis qui facit eorum claritatem. Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius.
</div>

</body>
</html> 
```

（很高兴我帮了忙）

# java - 摆动执行

> ID：11168949
> 
> 赞同：2
> 
> 时间：2012-06-23T11:00:03.023
> 
> 标签：java, swing

嗨，我刚刚使用菜单栏为 Swing 编写了代码。但是问题出现在运行中。我输入：

```
javac Menu.java
java Menu 
```

它没有给出错误，但没有显示 GUI。这是我的源代码供参考：

```
import javax.swing.*;
class Menu extends JFrame
{
    JMenuBar mb;
    JMenu m1,m2,m3;
    JMenuItem mn1,mn2,mn3;
    JCheckBoxMenuItem chk1,chk2,chk3;
    JRadioButtonMenuItem rd1,rd2,rd3;
    JSeparator sp1,sp2,sp3;
    Menu()
    {
        setTitle("MenuBar Demo");
        mb = new JMenuBar();
                m1 = new JMenu("File");
                m2 = new JMenu("Edit");
                m3 = new JMenu("View");
                mn1 = new JMenuItem("New");
                mn2 = new JMenuItem("Open");
                mn3 = new JMenuItem("Close");
                chk1 = new JCheckBoxMenuItem("Cut");
                chk2 = new JCheckBoxMenuItem("Copy");
                chk3 = new JCheckBoxMenuItem("Paste");
                rd1 = new JRadioButtonMenuItem("Find");
                rd2 = new JRadioButtonMenuItem("Find Next");
                rd3 = new JRadioButtonMenuItem("Replace");
                sp1 = new JSeparator();   
                sp2 = new JSeparator();   
                sp3 = new JSeparator();   
                m1.add(mn1);
                m1.add(mn2);
                m1.add(sp1);
                m1.add(mn3);
                m2.add(chk1);
                m2.add(chk2);
                m2.add(sp2);
                m2.add(chk3);
                m3.add(rd1);
                m3.add(rd2);
                m3.add(sp3);
                m3.add(rd3);
                mb.add(m1);
                mb.add(m1);
                mb.add(m2);
                mb.add(m3);
                getContentPane().add(mb);
                mb.setSize(300, 300);
                mb.setVisible(true);
    }
        public static void main(String[] args)
        {
            new Menu();
        }

} 
```

为什么没有出现 GUI？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:06:44.583

使用类似的东西：

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            Menu app = new Menu();
            app.setVisible(true);
        }
    }); 
```

}

我建议重命名您的课程，因为这是一个应用程序/框架而不是菜单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T11:05:26.443

在构造函数的最后，调用`this.setVisible(true);`

## 一般提示

*   不要扩展框架，而是保留对框架的引用。
*   不要调用`setVisible(true)`组件，而是将它们添加到一个可见的容器中。菜单栏似乎没有添加到任何东西。添加它使用[`setJMenuBar(JMenuBar)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setJMenuBar%28javax.swing.JMenuBar%29)
*   不要设置组件的大小。使用适当的布局、填充和边框，然后`pack()`使用 GUI。
*   对代码块使用一致且合乎逻辑的缩进。它有助于可读性。
*   & 正如 Puce 提到的，在 EDT 上启动和更改 GUI。

这些更改将在屏幕上生成一个小的 GUI。

```
// ...
//getContentPane().add(mb);
setJMenuBar(mb);
//mb.setSize(300, 300);
//mb.setVisible(true);
setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
pack();
setVisible(true); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T11:04:21.420

默认情况下，JFrame 可见性是`false`

你忘了显示框架`this.setVisible(true);`

所以构造函数结束添加

```
mb.setSize(300, 300);
mb.setVisible(true);
this.setVisible(true);<<<Add here 
```

**代码：**

```
import javax.swing.*;

class Menu extends JFrame {
    JMenuBar mb;
    JMenu m1, m2, m3;
    JMenuItem mn1, mn2, mn3;
    JCheckBoxMenuItem chk1, chk2, chk3;
    JRadioButtonMenuItem rd1, rd2, rd3;
    JSeparator sp1, sp2, sp3;

    Menu() {
        setTitle("MenuBar Demo");
        mb = new JMenuBar();
        m1 = new JMenu("File");
        m2 = new JMenu("Edit");
        m3 = new JMenu("View");
        mn1 = new JMenuItem("New");
        mn2 = new JMenuItem("Open");
        mn3 = new JMenuItem("Close");
        chk1 = new JCheckBoxMenuItem("Cut");
        chk2 = new JCheckBoxMenuItem("Copy");
        chk3 = new JCheckBoxMenuItem("Paste");
        rd1 = new JRadioButtonMenuItem("Find");
        rd2 = new JRadioButtonMenuItem("Find Next");
        rd3 = new JRadioButtonMenuItem("Replace");
        sp1 = new JSeparator();
        sp2 = new JSeparator();
        sp3 = new JSeparator();
        m1.add(mn1);
        m1.add(mn2);
        m1.add(sp1);
        m1.add(mn3);
        m2.add(chk1);
        m2.add(chk2);
        m2.add(sp2);
        m2.add(chk3);
        m3.add(rd1);
        m3.add(rd2);
        m3.add(sp3);
        m3.add(rd3);
        mb.add(m1);
        mb.add(m1);
        mb.add(m2);
        mb.add(m3);
        getContentPane().add(mb);
        mb.setSize(300, 300);
        mb.setVisible(true);
        this.setVisible(true);
    }

    public static void main(String[] args) {
        new Menu();
    }

} 
```

# php - 如何在没有处理时间的情况下从命令行调用 url

> ID：11168955
> 
> 赞同：1
> 
> 时间：2012-06-23T11:00:35.130
> 
> 标签：php, centos, exec

我需要从应该在后台运行的命令行调用一个 url（不能是路径）我需要从 php exec 函数调用一个页面，该页面需要 10 多秒才能加载，所以我只需要调用该页面以便负载不会影响他的用户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:12:25.483

PHP 不支持多线程，但您可以使用[fork](http://php.net/manual/en/function.pcntl-fork.php)执行后台任务（仅在 Linux/*nix 上） 。你会这样使用它：

```
// some logic here
if( pcntl_fork() == 0 ) {
    // initialise cURL here
    curl_exec("http://the.uri.I/want/toCall");
    exit(0);
}
// continue with your original processing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:23:10.880

通过“从命令行调用 URL”，我假设您将执行`curl`. 在那个使用`at`可以做的伎俩：

```
`echo "curl yourUrl.com/path" | at now`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:13:07.787

一种方法是使用 fsockopen() 打开一个 url 来执行这里是[完整的教程](http://robert.accettura.com/blog/2006/09/14/asynchronous-processing-with-php/)

# php - 为什么收件人没有收到我使用 PHP 发送的 HTML 格式（仅文本）的电子邮件？

> ID：11168961
> 
> 赞同：0
> 
> 时间：2012-06-23T11:01:30.413
> 
> 标签：php, html, email

无论我做什么，无论我详细说明什么标题，它都不起作用。即使我在标题中插入了内容类型（在消息本身内）。我会发疯的...

php版本：5.2.17

机器：Linux

内核版本：2.6.32-46.1.BHsmp（如果这很重要）

```
<?php
$headers = "From: <sender@mydomain.com>" . "\n";
$headers .= "MIME-Version: 1.0" . "\n";
$headers .= "http-equiv='Content-Type' content='text/html; charset=iso-8859-1'\r\n";
$emailBody="<html>";
$emailBody .= "<head>";
$emailBody .= "<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'>";
$emailBody .= "</head>";
$emailBody .= "<body>";
$emailBody .= "Hello Dear, <br><b>Bla Bla</b><br> See you later. <br>Bye.";
$emailBody .= "</body>";
$emailBody .= "</head>";
$emailBody .= "</html>";
mail("<recipient@gmail.com>", "Testing some HTML mail", $emailBody, $headers);
?> 
```

等待 PHP/HTML 专家查看上面的代码。

任何帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:06:34.610

尝试以这种格式设置标题：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T11:12:14.857

**这将工作简单..**

```
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = 'Birthday Reminders for August';

$message = '
<html>
<head>
  <title>Birthday Reminders ...';

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T11:08:21.153

如果您愿意使用 PHPMailer 之类的库，它会使发送 HTML 消息变得更加容易。您不必担心边界字符串、标题等。

这是一些示例代码：

```
$mailer = new PHPMailer();
$mailer->IsHTML(true);
$mailer->ContentType = 'text/html';
$mailer->FromName = $from;
$mailer->Subject = $subject;
$mailer->Body = $yourHtmlContent;
$mailer->AddAddress($someRecipientAddress);
$mailer->Send(); 
```

# java - 在 Heroku 上使用 Play with Memcached 而不存储硬编码的配置详细信息

> ID：11168965
> 
> 赞同：3
> 
> 时间：2012-06-23T11:02:08.097
> 
> 标签：java, heroku, playframework, memcached, playframework-1.x

我想在 Heroku 上配置一个 Play Framework 来使用 Memcached。

[该线程](https://groups.google.com/forum/?fromgroups#!topic/play-framework/kUZpxlSIlbE)建议我使用硬编码的配置值。[Heroku 的文档](https://devcenter.heroku.com/articles/memcache)指出用户/密码/主机作为环境变量公开......有没有办法告诉 Play 直接加载这些，而不使用硬编码值？

这是我尝试过的：

```
%prod.memcached=enabled
%prod.memcached.host=%MEMCACHE_SERVERS
%prod.memcached.user=%MEMCACHE_USERNAME
%prod.memcached.password=%MEMCACHE_PASSWORD 
```

但它似乎不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:44:40.240

我为您找到了解决问题的方法。在 Heroku 中，当您配置“Memcache Add On”时，它会为您提供以下环境变量。

```
${MEMCACHE_PASSWORD}       
${MEMCACHE_SERVERS}   
${MEMCACHE_USERNAME} 
```

但是在设置 %prod.memcached.host=${MEMCACHE_SERVERS} 时，它还需要默认端口才能正常运行（即 ${MEMCACHE_SERVERS}:11211）。

因此，您可以通过执行以下操作添加额外的环境变量

1.  `heroku config:add MEMCACHE_SERVER=${MEMCACHE_SERVERS}:11211`在您的控制台中
2.  `%prod.memcached.host=${MEMCACHE_SERVER}`在你的 conf 文件中设置
3.  重启你的应用

- -或者 - -

找出一种将端口（11211）附加到`${MEMCACHE_SERVERS}`conf文件中环境变量末尾的方法。我不知道该怎么做，因为“：”字符会在启动时引发异常。

我在 play 2.x 中遇到了同样的错误，但应该适用于 play 1.x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:58:45.887

尝试：

```
%prod.memcached.host=${MEMCACHE_SERVERS}
%prod.memcached.user=${MEMCACHE_USERNAME}
%prod.memcached.password=${MEMCACHE_PASSWORD} 
```

# java - JSP 项目结构 - 文件放置

> ID：11168966
> 
> 赞同：0
> 
> 时间：2012-06-23T11:02:12.867
> 
> 标签：java, file, jsp, netbeans, placement

我正在 Netbeans 中开发一个 JSP 项目。我正在使用一些 JSP 文件和一些 java 文件。项目结构如下：

```
root
-Web Pages
  --Jsp files
-Source Packages
  --myPacakge
    ---Java files
  --myIndex (it's a folder) 
```

**所以，我的问题是：我想从一个 java 文件中引用 myIndex，该文件放在 myPackage.xml 中。**

我首先假设java文件将“源包”视为root。所以，我认为索引的路径只是**"myIndex"**，但通过调试器我发现它正在查看***C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.14\bin\myIndex'***

然后我尝试了以下路径：**"\myIndex"**，但它现在正在查看***"C:\myIndex"***

你能帮我解决这个问题，myIndex 的正确路径应该是怎样的，或者我是否应该把它放在项目中的某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:29:04.327

您展示的是源项目的结构。当您运行已部署的 web 应用程序时，不再有源项目。一切都捆绑在一个war文件中，包含JSP文件、其他Web资源、.下的类文件和.下`WEB-INF/classes`的jar文件`WEB-INF/lib`。如果你想访问生成的war文件里面的文件`WEB-INF/classes`，那么你应该使用类加载器访问它，使用

```
InputStream in = SomeClassOfTheWebApp.class.getResourceAsStream("/myIndex/someFile.txt"); 
```

如果你打算在`myIndex`目录中存储一些东西，那就忘了它：war 文件是只读的。在 webapp 之外的文件系统上配置一些绝对目录，并使用这个绝对位置来存储新文件。不要使用相对位置，因为它取决于服务器的物理位置、它的启动方式、它的 JVM 的当前目录是什么等。如果服务器移动，一切都会中断。

# c - 用链表表示稀疏矩阵

> ID：11168969
> 
> 赞同：-2
> 
> 时间：2012-06-23T11:02:22.850
> 
> 标签：c

正如我的大学老师所问的那样，我在用多列表表示 C 中的稀疏矩阵时遇到了很大的麻烦。

![图片](../Images/e9543a0dff7bfb711d4b3f094953dd3e.png)

据我了解，有几种列表：

*   主要的包含指向下一行和列的指针
*   一个用于列和行
*   元素之一。

任何有关如何实现这一点的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:34:57.167

（如果您要问的话，我将解释如何表示图片）
从您的图片中，我了解到您有 3 种类型的节点和一些规则：

*   a) 1 为行数和列数（带 2 个指针）
*   b）一个用于矩阵的大小（2个指针以及witdh和height）
*   c）一个元素的值不为零（带有2个指针，元素和元素的列值和行值）

规则：

1.  b) 元素有一个指向第一个行元素和第一个列元素的指针
2.  每个行元素都有一个指向下一行元素的指针（最后一个元素有一个指向 b) 元素的指针）
3.  每个列元素都有一个指向下一个列元素的指针，最后一个列有一个指向 b) 元素的指针
4.  每行都有第二个指针指向其行上的第一个 c) 元素
5.  每个列都有第二个指针指向其列上的第一个 c) 元素
6.  每个元素都指向：下一个 c) 行上的元素和下一个 c) 列上的元素（如果行上没有下一个元素，则指向行元素，如果列上没有下一个元素，则指向列元素）

对于每条规则，如果您无法应用，您只需跳过它并将指针留空
希望它有所帮助。
您可以创建一些自定义[链接列表](http://en.wikipedia.org/wiki/Linked_list) 并应用规则
[在这里](http://www.cprogramming.com/tutorial/c/lesson15.html)您有一个简单的教程

# android - 如何将字符串转换为类名

> ID：11168973
> 
> 赞同：4
> 
> 时间：2012-06-23T11:02:59.127
> 
> 标签：android, class

我正在尝试将字符串转换为类名。我的代码是：

```
app.actNum = "third.class";
        in.close();
                //on test
                   //  Intent intent = new Intent(this.context,Class.forName(app.actNum));

Intent dialogIntent = new Intent(getBaseContext(), Class.forName(app.actNum)); 
```

但得到

```
 get ClassNotFoundException on Class.forName android 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-23T11:06:03.067

调用时`Class.forName()`，您应该使用不带扩展名的类名。因此，如果您的**类**被调用`Test`并且在**package** `mypackage.tests`中，那么您应该使用：

```
Class.forName("mypackage.tests.Test") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:07:05.630

我认为你的路径有一些问题。

首先，尝试获取完整路径：

```
String completePath = PathForClass.class.getResource(app.actNum).toString(); 
```

然后，您所要做的就是像以前一样调用它：

```
 Class.forName(completePath.replace(".class","") 
```

（如其他答案所述，您必须删除`.class`. ）

# jquery - 为 JQuery 添加不同的“打开”和“如果已经打开”效果

> ID：11168975
> 
> 赞同：2
> 
> 时间：2012-06-23T11:03:23.427
> 
> 标签：jquery, html, effects

我找到并定制了这个 JQuery 脚本，当按下不同的链接时，它会显示不同的内容。

但是，当 targetDiv 已经可见时，我希望改变效果是淡入淡出的，所以当你打开和关闭 targetDiv 时它只是滑动效果。

此外，我无法弄清楚为什么内容在页面加载大约半秒后就可以看到。我可以避免吗？

这是在 JSFiddle 上：http: [//jsfiddle.net/XwN2L/179/](http://jsfiddle.net/XwN2L/179/)

jQuery（最新版本）：

```
jQuery(function(){
    jQuery('.targetDiv').hide();

    jQuery('#close').click(function(){
              jQuery('.targetDiv').slideUp();
    });

        jQuery('.showSingle').click(function(){
              jQuery('.targetDiv').hide();
              jQuery('#div'+$(this).attr('target')).slideDown();
        });
}); 
```

HTML：

```
<div class="buttons">
<a  class="showSingle" target="1">Div 1</a>
<a  class="showSingle" target="2">Div 2</a>
<a  class="showSingle" target="4">Div 4</a>
<a id="close">Close</a>
</div>

<br><br><br><br>
Lorem Ipsum<br>

<div id="div1" class="targetDiv">
<iframe width="420" height="315" src="http://www.youtube.com/embed/c1_LON8Ib2o" frameborder="0" allowfullscreen></iframe>
</div>

<div id="div2" class="targetDiv">
<iframe width="420" height="315" src="http://www.youtube.com/embed/s4GbpG-PypM" frameborder="0" allowfullscreen></iframe>
</div>

<div id="div4" class="targetDiv">
<iframe width="560" height="315" src="http://www.youtube.com/embed/DHef3iAjxiM" frameborder="0" allowfullscreen></iframe>
</div>
Lorem Ipsum 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T11:09:31.740

**工作演示** [http://jsfiddle.net/efgFL/2/](http://jsfiddle.net/efgFL/2/)

使用`is(':visible')`链接：[http ://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

对于第二部分，`blah`文本不在任何显示/隐藏发生的容器中，这就是原因。

希望这可以帮助，

**代码**

```
jQuery(function(){
    jQuery('.targetDiv').hide();

    jQuery('#close').click(function(){
              jQuery('.targetDiv').slideUp();
    });

        jQuery('.showSingle').click(function(){
            if( jQuery('.targetDiv').is(':visible')){
                jQuery('.targetDiv').hide();
               jQuery('#div'+$(this).attr('target')).fadeIn();
            }else{
              jQuery('.targetDiv').hide();
              jQuery('#div'+$(this).attr('target')).slideDown();
            }
        });
});​ 
```

# php - 通过 PHP 在 Asychromous 队列中将 Curl 自定义操作发布到 Facebook

> ID：11168979
> 
> 赞同：1
> 
> 时间：2012-06-23T11:03:47.167
> 
> 标签：php, facebook, curl, queue

我已经成功创建了一个自定义 Facebook 打开图形操作，并且能够从我的 facebook 应用程序中发布它。但是，Facebook 要发布的 API 降低了我的用户体验，所以我创建了一个队列表，我想在用户体验之外从 cron 执行。

该表包含一个包含完整发布请求的字段，如下所示：

```
https://graph.facebook.com/me/mynamespace:my_action?custom_item=https://www.mysite .com/thefolder/&access_token=XXXXXXX 
```

所以我的 cron 工作人员将每 2 分钟运行一次。我如何让 PHP 在上面异步运行 CURL（或其他东西），即不等待 facebook 响应，所以我可以在一分钟内说 100 个（我应该真幸运）？

哦，b）我应该`"/me/"`用人的 fb 用户 ID 替换吗？

注意，我不是 linux 人。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:26:52.557

> 但是，要发布的 Facebook API 正在降低我的用户体验

首先，它是如何减慢速度的？您是在对 API 进行服务器端还是客户端调用？

如果你在客户端做，它已经是异步的，所以不应该有太多的减速会影响用户体验。

> 我如何让 PHP 在上面异步运行 CURL（或其他东西），即不等待 facebook 响应，所以我可以在一分钟内说 100 个（我应该这么幸运吗）？

我还没有“异步”使用 cURL，但是一个快速的谷歌搜索建议你可以尝试将 CURLOPT_TIMEOUT 或在最新系统上甚至 CURLOPT_TIMEOUT_MS 设置为 1。但我不能告诉你这有多可靠会的；如果客户端（在这种情况下是您的服务器）快速关闭连接等，Facebook 的 API 是否会正确处理它。

我不确定通过 cron 执行此操作是否是个好主意。

如果您不能按照上面的建议在客户端执行 API 调用，因为您需要发送应用访问令牌才能发布您的操作，那么我建议您仍然在服务器端执行此操作，但不要通过 cron ，但由用户自己触发，通过将 IMG 或 SCRIPT 元素嵌入到您的页面中（如果您将用户引导到新页面，则由 PHP 输出，或者通过 JavaScript 创建并放入 DOM 客户端） ，它的源设置为发布操作的 PHP 脚本的地址。如果您使用 SCRIPT 元素，您甚至可以通过在响应中返回适当的 JavaScript 代码来控制操作的结果并在客户端对其做出反应。

我认为这种方法不应该显着降低用户体验，而且我还猜想它可能比由 cron 调用脚本触发的数百个“异步”cURL 请求更可靠。

> 哦，b）我应该用个人fb用户ID替换“/me/”吗？

通过调用中提供的用户访问令牌，API 可以自己解决这个问题。

但是，如果您使用的是应用程序访问令牌，则必须使用用户 ID，否则 API 无法知道调用中指的是哪个用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:26:05.913

您应该将用户会话存储在某处（数据库等）。然后，只要用户会话处于活动状态，您就可以通过 cron worker 发送。并在发布操作时使用令牌。（您应该只使用属于用户的令牌:)）

> b) 我应该用个人 fb 用户 ID 替换“/me/”吗？

那么你可以使用 /me 或 /id

要进行 aynbchronus http 调用，请参阅这篇文章 [异步 PHP 调用？](https://stackoverflow.com/questions/124462/asynchronous-php-calls)

但是有速率限制，这将阻止您基于此条件发布（每 600 秒 600 次调用，每个令牌和每个 IP 是关于他们阻止您的位置）
来源：[http ://www.quora.com/Whats- the-Facebook-Open-Graph-API-rate-limit](http://www.quora.com/Whats-the-Facebook-Open-Graph-API-rate-limit)

# c# - 在运行时将数据模板分配给列表框

> ID：11168986
> 
> 赞同：0
> 
> 时间：2012-06-23T11:04:34.517
> 
> 标签：c#, wpf, xaml

在我的 xaml 代码中，在该`Window.Resources`部分内，我定义了一个带有`x:key`.

```
<Window.Resources>
    <DataTemplate x:key>
     ...
    </DataTemplate>
</Window.Resources> 
```

我有一个列表框，我必须在 .xaml.cs 代码中将此数据模板分配给该列表框。这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:06:58.370

使用 ItemTemplate 在 XAML 中以声明方式将数据模板分配给列表中的每个项目

```
<ListBox ItemTemplate="{StaticResource YourResourceKey}"> 
```

假设您的 DataTemplate 被称为 YourResourceKey

```
<DataTemplate x:Key="YourResourceKey"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:49:36.573

在窗口的代码隐藏中，您可以这样做：

```
myListBox.ItemTemplate = (DataTemplate)Resources["resourceKey"]; 
```

除非您有理由使用代码隐藏，否则我会坚持使用 XAML 并使用 @Charleh 的方法。

# java - 如何从列表中删除空对象（不是值）

> ID：11168988
> 
> 赞同：1
> 
> 时间：2012-06-23T11:04:46.670
> 
> 标签：java

我有一个列表中的类 Choice 的对象。

选择看起来像这样。

```
public class Choice extends MorphiaModel{   
    public String name;
    public Double price;
} 
```

其中一些是空的，即名称为“”，价格为空。

我想删除这些空值。

我尝试遍历列表并删除它们为空的 Choice 对象，但我得到了 ConcurrentModificationException 然后我这样做了（在实现 equals 和哈希码之后），但它不起作用，空值仍然存在。

注意：option.choices 是 Choice 对象的列表

```
Choice emptyChoice = new Choice();
    emptyChoice.name = "";
    emptyChoice.price = null;

    option.choices.remove(emptyChoice); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T11:08:42.927

发生这种`ConcurrentModificationException`情况是因为您试图删除`Iterator`迭代列表之外的元素。

像这样的工作：

```
Iterator<Choice> iterator = option.choices.iterator(); // or use option.choices.listIterator()

while (iterator.hasNext()) {
    if (emptyChoice.equals(iterator.next())) {
        iterator.remove();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T11:15:13.257

> 然后我做了这个（在实现了equals和hashcode之后），但它不起作用，空值仍然存在

`List.remove()`仅删除第一个匹配的元素（索引最低的元素）。要将它们全部删除，您可以将其放入循环中（如果成功则`remove()`返回布尔值）：`true`

```
while ( option.choices.remove(emptyElement) ); 
```

# iphone - 强IBOutlets和弱IBOutlets之间的区别

> ID：11168992
> 
> 赞同：7
> 
> 时间：2012-06-23T11:05:58.687
> 
> 标签：iphone, ios, xcode, ios5

`strong`Xcode iOS 5.1 SDK和`weak`IBOutlets 有什么区别？

我之前使用的是 4.3 SDK，其中不存在强大的 IBOutlets。此外，(auto)release 在 iOS 5.1 SDK 中不可用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T11:15:36.350

`Strong`意思是只要这个属性指向一个对象，那个对象就不会被自动释放。在非 ARC 中，它是`retain`

> 指定与目标对象存在强（拥有）关系。

`Weak`相反，意味着属性指向的对象可以自由释放，但前提是它将属性设置为 NULL。在 ARC 中，您使用 weak 来确保您不拥有它指向的对象

> 指定与目标对象存在弱（非拥有）关系。如果目标对象被释放，属性值会自动设置为 nil。

`Nonatomic`意味着如果多个线程尝试一次读取或更改属性，则可能会发生错误。后果是会有部分写入的值或过度释放的对象 = CRASH。

还可以[在这里查看 Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)。

从那里，例子是

```
@property (weak) IBOutlet MyView *viewContainerSubview;
@property (strong) IBOutlet MyOtherClass *topLevelObject; 
```

还要检查[这个](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)以了解更多关于`strong`and的信息`weak`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T11:25:07.720

在 ARC（自动引用计数）`Strong`中，告诉编译器属性-所有者关系是“强”的。它相当于`retain`在自动释放池内存方案中。[Apple 在此处](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)有一篇关于过渡到 ARC 的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T14:26:53.360

您声明为 strong 的属性，它拥有该对象，编译器将处理任何对象分配此属性的内容。当我们设置为 nil 时，该属性将被销毁。

当您不想要控制生命周期时，您可以声明为周属性。

# linux - myslqdump shell 命令错误

> ID：11168993
> 
> 赞同：0
> 
> 时间：2012-06-23T11:05:59.833
> 
> 标签：linux, shell, command, mysqldump

```
mysqldump -S /opt/lampp/var/mysql/mysql.sock -u root -h localhost -p gihan mistoria wp_posts |  gzip -9 >/opt/lampp/htdocs/mistoria/wp-content/backups/backup_table.sql.gz 
```

这是我的命令，一旦插入此命令，它就会返回以下错误，请帮助我。

```
mysqldump: Got error: 1049: Unknown database 'gihan' when selecting the database 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T11:14:58.680

删除“-p”和密码之间的空格。

```
mysqldump -S /opt/lampp/var/mysql/mysql.sock -u root -h localhost -pgihan mistoria wp_posts |  gzip -9 >/opt/lampp/htdocs/mistoria/wp-content/backups/backup_table.sql.gz 
```

# tridion - 组件中的 iframe 标记在发布时提供不完整的页面

> ID：11168999
> 
> 赞同：6
> 
> 时间：2012-06-23T11:06:36.450
> 
> 标签：tridion, tridion-2011, tridion2009

在 Tridion 中，我有一个附加组件的页面，该页面具有一个文本字段，其中有一个`iframe`类似`<iframe src="http://mysite.com/l/5042/2012-06-21/9pb4y" width="100%" height="500" frameborder="0" style="border: 0" > </iframe>`. 我确保这个标签在被处理时保持原样`C# & DWT template building blocks`。但是在页面发布的最后，在页面的源代码中，标签变为`<iframe src="http://mysite.com/l/5042/2012-06-21/9pb4y" width="100%" height="500" frameborder="0" style="border: 0" />`. `iframe`因此，页面源在标记后不显示任何内容。因此，在包含标签的组件之后附加到页面的任何组件`iframe`都不会显示在页面上。知道为什么结束标签`</iframe>`被自结束标签代替`/>`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T16:29:10.010

正如弗兰克所说，您可以使用将 XML 转换为 HTML TBB

```
(OR) 
```

您还可以考虑 Chris 在此线程中提供的解决方案。[使用 SDL Tridion 2011 SP1 在富文本字段中创建锚链接](https://stackoverflow.com/questions/10537656/creating-anchor-links-in-rich-text-fields-with-sdl-tridion-2011-sp1)

您将 xslt 应用于架构字段定义。虽然 TBB 选项适用于完整的 CT/PT，具体取决于您使用它的位置，但使用 XSLT，您可以在现场级别使用它，并且当您将 CoreService 用于任何其他用例时，也可以获得相同的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T17:47:38.517

我询问了这个问题，Jamie Santos 帮助我解决了这个问题。

我已经在使用**Convert XML to HTML TBB**，但这不起作用，因为结束标记已经放置在输出变量中。

因此，下面的 TBB 使用参数 Schema [Tags] 我们传递一个标签列表（逗号分隔），我们想用关闭标签（例如）更改自关闭标签（例如 />）

```
 [TcmTemplateTitle("Remove Selft Closing Tag")]
    public class RemoveSelfClosingTag : ITemplate
    {
        public override void Transform(Engine engine, Package package)
        {
            var outputItem = package.GetByName(Package.OutputName);

```
 //if not  Output in package, return
        if (outputItem == null) return;

        var output = outputItem.GetAsString();
        var tagsCsv = package.GetValue("Tags"); //TBB parameter [tags using CSV] : 'iframe'
        if (string.IsNullOrEmpty(tagsCsv)) return;

        var tags = tagsCsv.Split(',');
        foreach (var tag in tags)
        {
            RemoveSelftTag(tag, ref output);
        }
        outputItem.SetAsString(output);
    }

    //ref because string is immutable.
    private void RemoveSelftTag(string tagName, ref string output)
    {
        var pattern = string.Format("(?'fistPart'<(?'tag'{0})[^>]+?)/>", tagName);
        output = Regex.Replace(output, pattern, @"${fistPart}></${tag}>");
    }
} 
``` 
            回答 #3

赞同：0

时间：2014-06-27T14:30:06.817

我认为这是由于“清理”TBB。我会尝试在标签之间放置一个“空白”空间，如下所示：

```
<iframe src="YOUR_URL_HERE" width="100%" height="500" frameborder="0" style="border: 0" > &nbsp;</iframe> 
```

这应该保持标记不变，并将显示带有结束标记的 iframe。

```