# StackOverflow 问答 10108000-10108999

# mongodb - 尝试通过 db.XYZ.update 更新和忽略重复键失败

> ID：10108001
> 
> 赞同：1
> 
> 时间：2012-04-11T14:29:30.247
> 
> 标签：mongodb

我有一些奇怪的行为试图修复我的 MongoDB 中的一些对象。我正在尝试将语言代码 ( `lc`) 从更改`may`为`msa`并且我有一个关于文本和语言代码的唯一索引，例如`{t:1, lc:1}`

首先我得到计数​​：

```
db.Unit.count({lc: "may"}); 
```

我尝试：

```
db.Unit.find({lc: "may"}, {"t":1}).limit(1000).forEach(function(obj) {
    try {
         db.Unit.update({ _id: obj._id }, {$set : { "lc": "msa"}} );
         print('Changed :' + obj.t + '#' + obj._id);
    } catch (err) {
        print(err);
    }
}); 
```

这似乎可以打印出很多对象，然后失败：

```
E11000 duplicate key error index: jerome5.Unit.$t_1_lc_1  dup key: { : "laluan", : "msa" } 
```

现在我预计失败之前的匹配将被正确更新，但计数返回完全相同的数字。

我的 Javascript 是否遗漏了一些明显的东西？

**更新**：看起来一些没有抛出异常的打印出来的对象也是重复的。所以看起来在引发错误之前有一些延迟（我启用了日记功能）。这是正常行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T19:42:12.360

简短的回答是问题出在 JS 代码上。

Mongo 中的更新默认是触发后忘记的，因此即使单个更新由于重复键而失败，“try”语句仍然会成功完成，并且“catch”部分中的代码将永远不会执行。可能看起来“catch”代码正在执行，因为当 forEach 循环结束时，JS shell 返回 db.getLastError()，如果操作成功，它将返回 null。GetLastError 在此处的文档中进行了解释： [http ://www.mongodb.org/display/DOCS/getLastError+Command](http://www.mongodb.org/display/DOCS/getLastError+Command)

这也许最好通过示例来解释：

让我们创建一个简单的集合和一个唯一索引：

```
> db.unit.save({_id:0, lc: "may", t:0})
> db.unit.ensureIndex({t:1, lc:1}, {unique:true})
> for(var i=1; i<10; i++){db.unit.save({_id:i, lc: "may", t:i})}
> db.unit.find()
{ "_id" : 0, "lc" : "may", "t" : 0 }
{ "_id" : 1, "lc" : "may", "t" : 1 }
{ "_id" : 2, "lc" : "may", "t" : 2 }
{ "_id" : 3, "lc" : "may", "t" : 3 }
{ "_id" : 4, "lc" : "may", "t" : 4 }
{ "_id" : 5, "lc" : "may", "t" : 5 }
{ "_id" : 6, "lc" : "may", "t" : 6 }
{ "_id" : 7, "lc" : "may", "t" : 7 }
{ "_id" : 8, "lc" : "may", "t" : 8 }
{ "_id" : 9, "lc" : "may", "t" : 9 }
> 
```

我们将运行一个脚本来将所有“may”值更改为“msa”。在此之前，让我们进行一些更改，因此将“may”的某些值更改为“msa”将在索引中创建重复值：

```
> db.unit.update({_id: 3}, {"lc" : "msa", "t" : 4 })
> db.unit.update({_id: 6}, {"lc" : "msa", "t" : 5 })
> db.unit.find()
{ "_id" : 0, "lc" : "may", "t" : 0 }
{ "_id" : 1, "lc" : "may", "t" : 1 }
{ "_id" : 2, "lc" : "may", "t" : 2 }
{ "_id" : 3, "lc" : "msa", "t" : 4 }
{ "_id" : 4, "lc" : "may", "t" : 4 }
{ "_id" : 5, "lc" : "may", "t" : 5 }
{ "_id" : 6, "lc" : "msa", "t" : 5 }
{ "_id" : 7, "lc" : "may", "t" : 7 }
{ "_id" : 8, "lc" : "may", "t" : 8 }
{ "_id" : 9, "lc" : "may", "t" : 9 }
> 
```

现在，当我们的脚本命中文档 _id:4 和 _id:5 时，它将无法将“lc”的值更改为“may”，因为这样做会在索引中创建重复条目。

让我们运行脚本的一个版本。我添加了一些额外的行以使其更详细：

```
db.unit.find({lc: "may"}, {"t":1}).limit(1000).forEach(function(obj) {
    try {
        print("Found _id: " + obj._id );
        db.unit.update({ _id: obj._id }, {$set : { "lc": "msa"}} );
        if(db.getLastError() == null){
            print('Changed t :' + obj.t + ' _id : ' + obj._id);
        }
        else{
            print("Unable to change _id : " + obj.id + " because: " + db.getLastError())
        }
    } catch (err) {
        print("boo");
        print(err);
    }
});

Found _id: 0
Changed t :0 _id : 0
Found _id: 1
Changed t :1 _id : 1
Found _id: 2
Changed t :2 _id : 2
Found _id: 4
Unable to change _id : undefined because: E11000 duplicate key error index: test.unit.$t_1_lc_1  dup key: { : 4.0, : "msa" }
Found _id: 5
Unable to change _id : undefined because: E11000 duplicate key error index: test.unit.$t_1_lc_1  dup key: { : 5.0, : "msa" }
Found _id: 7
Changed t :7 _id : 7
Found _id: 8
Changed t :8 _id : 8
Found _id: 9
Changed t :9 _id : 9
> 
```

如您所见，“boo”从未被打印出来，因为“catch”代码从未被执行，即使两条记录无法更新。从技术上讲，update() 没有失败，它只是因为重复的索引条目而无法更改文档，并生成了一条消息。

所有可以更改的记录都已成功更改。

```
> db.unit.find()
{ "_id" : 0, "lc" : "msa", "t" : 0 }
{ "_id" : 1, "lc" : "msa", "t" : 1 }
{ "_id" : 2, "lc" : "msa", "t" : 2 }
{ "_id" : 3, "lc" : "msa", "t" : 4 }
{ "_id" : 4, "lc" : "may", "t" : 4 }
{ "_id" : 5, "lc" : "may", "t" : 5 }
{ "_id" : 6, "lc" : "msa", "t" : 5 }
{ "_id" : 7, "lc" : "msa", "t" : 7 }
{ "_id" : 8, "lc" : "msa", "t" : 8 }
{ "_id" : 9, "lc" : "msa", "t" : 9 } 
```

如果再次运行该脚本，则会生成以下输出：

```
Found _id: 4
Unable to change _id : undefined because: E11000 duplicate key error index: test.unit.$t_1_lc_1  dup key: { : 4.0, : "msa" }
Found _id: 5
Unable to change _id : undefined because: E11000 duplicate key error index: test.unit.$t_1_lc_1  dup key: { : 5.0, : "msa" }
E11000 duplicate key error index: test.unit.$t_1_lc_1  dup key: { : 5.0, : "msa" }
> 
```

如您所见，最后一条错误消息被打印了两次：一次是我们在脚本中打印它，另一次是脚本完成时。

请原谅此响应的冗长性质。我希望这能提高您对 getLastError 以及如何在 JS shell 中执行操作的理解。

该脚本可以在没有 try/catch 语句的情况下重写，并且只需打印出任何无法更新的文档的 _ids：

```
db.unit.find({lc: "may"}, {"t":1}).limit(1000).forEach(function(obj) {
    print("Found _id: " + obj._id );
    db.unit.update({ _id: obj._id }, {$set : { "lc": "msa"}} );
    if(db.getLastError() == null){
        print('Changed t :' + obj.t + ' _id : ' + obj._id);
    }
    else{
        print("Unable to change _id : " + obj.id + " because: " + db.getLastError())
    }
}); 
```

# c# - 为什么 SubmitChanges 不起作用？

> ID：10108003
> 
> 赞同：2
> 
> 时间：2012-04-11T14:29:50.963
> 
> 标签：c#, sql, winforms, linq

我正在使用自定义存储过程从数据库中检索数据：

```
tbTextBox.Text = db.getSettingValue("PropertyName").First().Value; 
```

（db是一个全局`DataClasses`对象，在`FormLoad`事件中初始化）

这部分工作得很好，并且在循环中重复（定时器间隔 30 秒）

如果用户更改文本框的值，则会触发以下代码：

```
private void tbTextBox_TextChanged(object sender, EventArgs e)
{
    if (tbTextBox.Text != db.getSettingValue("PropertyName").First().Value)
    {
                db.Settings.Where(n => n.Name == "PropertyName").First().Value = tbTextBox.Text;
                db.SubmitChanges();
    }
} 
```

如果我之前创建对象`submitChanges`并更改其值-结果相同。我已经调试过它，它不像它永远不会通过我的 IF 语句；）

为什么它不起作用？没有例外...如果我使用 SQL Server Management Studio 查询设置表，数据库中没有任何更改。

**编辑1：**

```
db.Settings.Where(n => n.Name == "AvailablePeriods").First().Value = tbPeriods.Text;

var a = db.Settings.Where(n => n.Name == "AvailablePeriods");
var b = a.First();
var c = b.Value;

b.Value = tbPeriods.Text;

var d = db.GetChangeSet();

db.SubmitChanges(); 
```

为了正确调试，我将代码分成更小的步骤。一切正常，但是... Changeset 不返回任何更新。对于下一步，我将尝试按照建议使用“附加”。

**EDIT2：** 添加PK解决了这个问题。现在一切都像魅力一样。

经验教训 - 我不应该太相信自己:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:35:39.693

直接更新数据上下文的数据不是更新表的方法。如果数据已经存在，则使用[Attach 方法](http://geekswithblogs.net/michelotti/archive/2007/12/25/117984.aspx)；如果不存在，则使用 InsertOnSumit

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:46:44.813

本记录：

```
db.getSettingValue("PropertyName").First() 
```

可能与此记录不同：

```
db.Settings.Where(n => n.Name == "PropertyName").First() 
```

* * *

您在没有指定顺序的情况下调用 First - 因此数据库可以进行选择，并且不必一致地选择。

* * *

您应该减少一行代码，以便在逐步执行代码时获得更多信息。

* * *

> 它在循环中重复（计时器间隔 30 秒）

那是在不同的线程上吗？tbTextBox.Text 的值在执行 if-criteria 和 if-block 之间是否发生了变化？

# objective-c - 核心绘图栏问题

> ID：10108004
> 
> 赞同：0
> 
> 时间：2012-04-11T14:29:52.470
> 
> 标签：objective-c, ios, xcode, ipad, core-plot

我想修复条形的宽度，每当条形数据动态变化时，条形宽度应该是固定的。但它不起作用。第二件事我想获得条形框架或特定条形的确切位置。但到目前为止还没有找到任何方法。

所以请告诉我如果你知道..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:08:05.257

设置`barWidthsAreInViewCoordinates`为是。这使得绘图以像素为单位解释条形宽度，而不是数据单元的一部分。

您可以使用绘图空间在数据坐标和视图坐标（像素）之间来回转换。

# java - bundle.getLocation() 的可能前缀

> ID：10108011
> 
> 赞同：3
> 
> 时间：2012-04-11T14:30:13.787
> 
> 标签：java, eclipse, eclipse-plugin, osgi

我正在使用 Equinox OSGi 实现。当我检索一个包并询问它的位置（getLocation() 方法）时，返回的字符串以“initial@reference”为前缀。OSGi 4.3 规范没有提到这个前缀。是否有另一个文档指定了此前缀和其他可能的前缀？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:39:43.883

位置几乎可以是任何东西。如果我按如下方式安装捆绑包...

```
InputStream data = ...; // open a stream from wherever
context.installBundle("crazy location huh?", data); 
```

...然后`getLocation()`此捆绑包的方法随后将返回“疯狂的位置吧？”。

如果我尝试调用 的无参数变体，这只会给我带来问题`Bundle.update()`，因为框架将无法解释位置字符串以便从该位置更新包。但我总是可以调用该`Bundle.update(InputStream)`方法从我直接指定的数据中更新包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:40:03.760

这些是 Equinox 特定的 URL 前缀（尽管其他 OSGi 框架也支持 reference: 前缀）。它们不是 OSGi 规范的一部分。从 Eclipse 运行时选项：

> osgi.bundles 以逗号分隔的捆绑包列表，一旦系统启动并运行，它们就会自动安装并可选择启动。每个条目的形式为：

```
 <URL | simple bundle location>[@ [<start-level>] [":start"]] 
```

> start-level 指示捆绑包应该运行的 OSGi 启动级别。如果省略起始级别（>0 整数），则框架将使用捆绑包的默认起始级别。如果添加了“开始”标签，则捆绑包将在安装后标记为已启动。简单的包位置被解释为相对于框架的父目录。如果该位置不是完全限定的路径或 URL，则进行搜索以找到可用的最高版本。请注意，reference:protocol 只能用于引用 file:URL 指定的内容（例如 reference:file:/path/to/mybundle_1.0.0.jar）。如果包是目录包，则不支持使用 file: URL 而不使用 reference: （例如 file:/path/to/myDirectoryBundle_1.0.0/ 必须使用 reference:file:/path/to/myDirectoryBundle_1.0.

[这](http://www.eclipse.org/forums/index.php/t/164404/)是一个描述“初始”和“参考”前缀的线程。

# sql - SQL 查询：根据多个表中的条件检索记录

> ID：10108016
> 
> 赞同：0
> 
> 时间：2012-04-11T14:30:31.820
> 
> 标签：sql, sql-server, join

### 设置

我正在使用 SQL Server DB 来跟踪制造环境中生产中的各种案例。数据库有两个表：

1.  *状态表*：跟踪这些案例的状态，其中一列包含表示案例状态的整数代码。所有代码大于 0 的案例都是“生产中”，而代码小于或等于 0 的案例要么是“完成”，要么是“已取消”。
2.  *日志表*：跟踪特定案例发生的变化以及这些变化发生的时间。“什么”方面被捕获为字符串和代码。“何时”是一个日期时间字段。

### 问题/任务/问题

我想查询所有生产中的案例***以及过去两天内***完成或取消的任何案例*。*在日志中，我有一个日期时间列和一个特定于取消或完成案例的代码。我假设查询可能会来自日志中的任何情况，这些情况具有这些代码中的任何一个，并且日期时间在现在之前的 48 小时内。但我不太确定如何去做。我的查询的第一部分（获取生产中的案例）如下：**`JOIN`**

 **```
SELECT * FROM test.dbo.status WHERE status > 0 
```

任何帮助将不胜感激。提前致谢！

***更新*** 为了澄清，两件事：

1.  我希望查询返回*状态表*中与上述条件匹配的记录的所有列，而不仅仅是 ID 或其他内容。

2.  表结构：

    ```
    CREATE TABLE [dbo].[status](
        [serial] [varchar](10) NOT NULL,
        [type] [varchar](50) NULL,
        [commit_date] [date] NULL,
        [sent_to_prod] [date] NULL,
        [target] [date] NULL,
        [sent_to_mfg] [date] NULL,
        [status] [int] NULL,
        [notes] [bit] NULL,
        [hold] [bit] NULL,
        [canceled] [bit] NULL,
        [priority] [bit] NULL,
        [vendors] [varchar](150) NULL,
        [rework] [varchar](50) NULL,
        [created_on] [datetime] NULL,
        [modified_on] [datetime] NULL
    )

    CREATE TABLE [dbo].[log](
        [serial] [varchar](13) NOT NULL,
        [action] [varchar](200) NOT NULL,
        [who] [varchar](80) NOT NULL,
        [time] [datetime] NOT NULL,
        [code] [varchar](20) NOT NULL
    ) 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:36:28.487

鉴于您没有提供任何结构，我将从类似的内容开始。

查询1：返回的记录数将是LogTable中匹配的记录数

```
SELECT StatusTable.ID, LogTable.When, etc etc etc.
FROM StatusTable INNER JOIN LogTable
  ON StatusTable.ID = LogTable.ID
WHERE StatusTable.status > 0
  OR (LogTable.WhatCode = 97   --Assumes 97 is your desired code.
  AND LogTable.When >= dateadd(hh, -48, GetDate())) 
```

**添加**

查询 2：使用子查询而不是联接从 LogTable 中获取所需的 ID。（您也可以查看`EXISTS`运算符而不是`IN`）

```
SELECT StatusTable.ID, StatusTable.otherField, etc etc
FROM StatusTable
WHERE StatusTable.status > 0 
  OR StatusTable.ID IN (SELECT LogTable.ID FROM LogTable WHERE LogTable.WhatCode = 97   --Assumes 97 is your desired code.
      AND LogTable.When >= dateadd(hh, -48, GetDate())) 
```**

# jquery - 从谷歌地图行车路线中删除开始和结束标记

> ID：10108017
> 
> 赞同：0
> 
> 时间：2012-04-11T14:30:39.033
> 
> 标签：jquery, google-maps

我有一张地图，上面有从纽约到洛杉矶的行车路线。

当我输入起点时效果很好：纽约，纽约和目的地：加利福尼亚州洛杉矶

但我只想使用 lat 和 lng，因为我不想看到谷歌地图放在地图上的标记。我宁愿只看到从一个城市到另一个城市的折线，没有绿色，不是红色标记。

我尝试使用它：

```
new google.maps.LatLng(40.7142, 74.0064); 
```

但它没有用。我把这一切都放在了一个[jsfiddle](http://jsfiddle.net/xtian/6TCQL/)

如果没有这些标记，也许你不能用谷歌地图做行车路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:40:06.637

设置以下属性：

```
directionsDisplay.suppressMarkers = true; 
```

就在这条线之后

```
directionsDisplay = new google.maps.DirectionsRenderer({polylineOptions: polylineOptionsActual}); 
```

[DirectionsRenderer 选项的文档在这里](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRendererOptions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:40:48.393

无法让您的 jsfiddle 工作，而且我不知道是否必须使用标记来创建您正在谈论的方向。也许是，也许不是，我对 Google Maps API 的了解还不够多。

但是，您为什么不按您所说的那样使用标记，而只是给它们一个透明的图像呢？

```
var markerIcon = new google.maps.MarkerImage("img/blank.gif",new google.maps.Size(1, 1),new google.maps.Point(0, 0),new google.maps.Point(0, 0));
new google.maps.Marker({ map: map, position: position, icon: markerIcon }); 
```

`MarkerImage`用指定的图像替换标准的 Google 地图标记图像（红色图钉）。

# javascript - 确认对话框立即返回 false

> ID：10108023
> 
> 赞同：1
> 
> 时间：2012-04-11T14:30:55.153
> 
> 标签：javascript, android, cordova

这是我的代码：

```
index.html:
    ...
      <script type="text/javascript" charset="utf-8" src="main.js"></script>
    </head>
    <body onload="init();"></body>
    ...

main.js:
    function onBackPressed(e) {
        console.log("onBackPressed()");
        var answer = confirm("Do you want to exit?");
        console.log(answer);
        if (answer) {
            navigator.app.exitApp();
        }
    }
    function init() {
        ...
        document.addEventListener("backbutton", onBackPressed, false);
        ...
    } 
```

当我第一次退出应用程序时，一切似乎都很好。问题是当我下次启动应用程序时，确认对话框立即返回 false 并且对话框保持可见。因此，当我单击“确定”时，什么都不会发生。

这是 logcat 的输出：

```
04-11 16:16:26.444: D/PhoneGapLog(18356): onBackPressed()
04-11 16:16:26.444: D/PhoneGapLog(18356): file:///android_asset/www/main.js: Line 49 : onBackPressed()
04-11 16:16:26.444: I/Web Console(18356): onBackPressed() at file:///android_asset/www/main.js:49
04-11 16:16:26.584: D/PhoneGapLog(18356): false
04-11 16:16:26.584: D/PhoneGapLog(18356): file:///android_asset/www/main.js: Line 51 : false
04-11 16:16:26.584: I/Web Console(18356): false at file:///android_asset/www/main.js:51 
```

这是phonegap或android中的错误吗？还是我做错了什么？

我将 Nexus One 与 android 2.3.6 和 phonegap 1.4.1 一起使用（1.5 版有后退按钮事件问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:54:43.817

在 PhoneGap 中，confirm 是一个异步回调。请参阅[api 文档](http://docs.phonegap.com/en/1.5.0/phonegap_notification_notification.md.html#notification.confirm)。

由于立即返回，变量*answer*将始终为 false。

代码应该更像：

```
 // process the confirmation dialog result
function onConfirm(button) {
    alert('You selected button ' + button);
}

// Show a custom confirmation dialog
//
function showConfirm() {
    navigator.notification.confirm(
        'You are the winner!',  // message
        onConfirm,              // callback to invoke with index of button pressed
        'Game Over',            // title
        'Restart,Exit'          // buttonLabels
    );
} 
```

# c# - 访问 aspx.cs 文件中的变量并在文本框中显示

> ID：10108027
> 
> 赞同：0
> 
> 时间：2012-04-11T14:31:14.307
> 
> 标签：c#, asp.net, dynamic-data

这是我的 Emial.Aspx.cs 文件。我有一个名为 loginEmail 的公共变量。

```
public String loginEmail;

protected void Page_Load(object sender, EventArgs e){
loginEmail= Session["Email"].ToString();
} 
```

我想在下面的文本框中显示该变量。但这对我不起作用。

```
<td>
   <asp:TextBox ID="TextBox_name" runat="server" Text = "<%= loginEmail %>";></asp:TextBox>
</td> 
```

错误：

```
Parser Error Message: Server tags cannot contain <% ... %> constructs. 
```

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:34:14.353

在页面加载事件中

```
TextBox_name.Text = loginEmail; 
```

# entity-framework-4 - 如何为 edmx 生成视图以提高性能？

> ID：10108030
> 
> 赞同：0
> 
> 时间：2012-04-11T14:31:28.577
> 
> 标签：entity-framework-4, entity-framework-4.1, edmx

我有数据层、业务层和设计层，其中我的 .edmx 文件放置在数据层中。现在我想为我的 .edmx 文件生成视图以提高性能。我尝试了以下过程：->将 .edmx 文件的**元数据工件处理**属性设置为“**复制到输出目录**”，然后在我的数据层的构建事件中输入以下代码：

```
"%windir%\Microsoft.NET\Framework\v4.0.30319\EdmGen.exe" /nologo /language:CSharp 
```

/mode:ViewGeneration "/inssdl:$(TargetDir)NeoSoftDataEntity.ssdl" "/incsdl:$(TargetDir)NeoSoftDataEntity.csdl" "/inmsl:$(TargetDir)NeoSoftDataEntity.msl" "/outviews:$(ProjectDir)NeoSoftDataEntity. Views.cs”，但在构建解决方案时。我收到以下错误： ****错误 2 命令 ""%windir%\Microsoft.NET\Framework\v4.0.30319\EdmGen.exe" /nologo /language:CSharp /mode:ViewGeneration "/inssdl:D:\NeoSoftWinApp\ NeoSoftWinApp\bin\Debug\NeoSoftDataEntity.ssdl" "/incsdl:D:\NeoSoftWinApp\NeoSoftWinApp\bin\Debug\NeoSoftDataEntity.csdl" "/inmsl:D:\NeoSoftWinApp\NeoSoftWinApp\bin\Debug\NeoSoftDataEntity.msl" "/ outviews:D:\NeoSoftWinApp\NeoSoftWinApp\NeoSoftDataEntity.Views.cs"" 以代码 123 退出。***

 *如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:09:31.560

如果您从 MSDN 站点复制/粘贴，则需要删除命令中的回车符。

```
"%windir%\Microsoft.NET\Framework\v4.0.30319\EdmGen.exe" /nologo /language:CSharp /mode:ViewGeneration "/inssdl:$(TargetDir)MyModel.ssdl" "/incsdl:$(TargetDir)MyModel.csdl" "/inmsl:$(TargetDir)MyModel.msl" "/outviews:$(ProjectDir)MyModel.Views.cs" 
```*

# c# - Telerik 表达式控件

> ID：10108036
> 
> 赞同：0
> 
> 时间：2012-04-11T14:31:47.533
> 
> 标签：c#, linq, lambda, telerik, expression

我希望从 Telerik Expression 控件中获取计算出的结果值。有一个非常有用的链接[https://stackoverflow.com/a/5858922/1181910](https://stackoverflow.com/a/5858922/1181910)，但我无法理解这篇文章中的一点。我的场景与上述帖子中提到的相同，但我的问题是这里的“输入”变量是什么？以下是帖子中的代码（Jon Skeet 解释得很好）：

```
var typeSafe = (Expression<Func<Finance, decimal?>>) ExpressionEditor.Expression;
var compiled = typeSafe.Compile();
var result = compiled(input); 
```

这`ExpressionEditor.Expression`将是来自 Telerik 控件的 LINQ 表达式。我不确定应该输入什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:50:26.227

的类型`ExpressionEditor.Expression`是`Expression<Func<Finance, decimal?>>`。所以输入类型是`Finance`，输出类型是`decimal?`。

变量`input`必须是类型`Finance`。它来自哪里取决于您的应用程序，但必须在使用之前对其进行初始化/设置。

# java-me - 移动应用程序使用“vodafone”sim 连接到服务器，但不使用“idea”sim 连接。

> ID：10108038
> 
> 赞同：0
> 
> 时间：2012-04-11T14:31:50.517
> 
> 标签：java-me, gprs, midp-2.0, cldc, nokia-s40

我正在用 j2me 创建一个移动应用程序。我的配置是**CLDC-1.1，MIDP-2.0。**

我正在通过（https 和 http）向服务器发送请求，并通过 GPRS 从我的应用程序中获得响应。

如果我使用的是**vodafone** sim，那么它会正常工作。但是，如果我使用的是**idea** sim，则请求无法从我的移动应用程序发送到服务器“ **Http 操作**”异常被抛出。

但是如果我输入`the url in the mobile phone browser`正确显示的页面（当我使用idea sim和vodafone sim时）。当我在我的移动应用程序中使用`the url google.com`（[http://www.google.com](http://www.google.com)`idea gprs sim or vodafone gprs sim its work fine` ）时，当我使用.

但是当我`url of my server application`在我的移动应用程序中使用（我的办公室服务器应用程序 url）时，当我使用时`idea gprs sim sim its not work fine`，抛出以下异常“ **java.io.IOException：60 - HTTP 操作错误**”。如果我在移动设备中键入 url手机浏览器然后它正常工作。

我正在使用**“nokia c2-01”**来测试手机。它是**“s40”**设备。所以请给出想法。欢迎大家提出你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:04:24.203

它必须归结为访问点，在某些诺基亚手机上，该访问点可以为浏览器和 Java 应用程序单独配置。

任何其他 Java 应用程序都可以访问网络吗？如果不是，那么它肯定是接入点；您需要深入了解您的配置设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:00:51.377

我找到了解决方案。一些ISP，例如Airtel，Vodafone等。如​​果尝试通过应用程序连接，有时会阻塞网络。因为防止恶意攻击，防止网络流量等。

问题取决于 Isp（互联网服务提供商）。现在它对我有用。

# asp.net - 使用 ASP.NET 的图像处理程序

> ID：10108040
> 
> 赞同：-2
> 
> 时间：2012-04-11T14:31:57.960
> 
> 标签：asp.net, ajax

大家好，希望您能将我引向正确的方向。我想实现一个对图片执行许多不同操作的应用程序。例如，旋转、裁剪、突出显示、柔焦、缩放等。我希望这个应用程序在 ASP 中不经常闪烁页面的情况下尽可能接近 winforms。有人可以指导我正确的方向吗？我开始阅读 AJAX。那是我应该开始的地方吗？我可以购买任何工具来完成这项任务吗？我是 AJAX 和网络图片处理的新手。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:02:51.053

我希望这会给你一些从[http://www.codeproject.com/Articles/6620/ASP-NET-Image-Manipulation-Examples-Adding-Zooming](http://www.codeproject.com/Articles/6620/ASP-NET-Image-Manipulation-Examples-Adding-Zooming)开始的东西，而现在我正在经历这个是免费的个人和商业用途[http://piczard.com/download/](http://piczard.com/download/)

# javascript - jQuery：带有自定义滚动条的垂直新闻自动收录器

> ID：10108043
> 
> 赞同：1
> 
> 时间：2012-04-11T14:32:00.987
> 
> 标签：javascript, jquery, ajax, jquery-plugins

有谁知道任何 jQuery 插件（或插件集：）有一个垂直的新闻行情

喜欢这里： http: [//lifehacker.com/](http://lifehacker.com/)（在页面右侧）

IE

1.  定期轮询数据以将其添加到顶部
2.  具有自定义外观的自动隐藏滚动条
3.  向下滚动时从服务器请求较旧的数据。

# javascript - 当涉及到 innerHTML 操作时，我怎样才能绕过 IE 的“限制”？

> ID：10108045
> 
> 赞同：0
> 
> 时间：2012-04-11T14:32:04.150
> 
> 标签：javascript, internet-explorer, innerhtml

我说的是 IE 不喜欢这样的东西：

```
some_table_element.innerHTML = some_HTML_to_create_dynamic_tables; 
```

有什么办法可以绕过它，这样我就不必为它重新编写一天的代码？也许用jQuery？

我正在研究一种表格结构，它允许通过单击按钮来更改整行甚至表格，但我忘记了 IE 根本不喜欢它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:35:51.140

请参阅 Eric Vasilik 的博客以了解解决方法： [http ://www.ericvasilik.com/2006/07/code-karma.html](http://www.ericvasilik.com/2006/07/code-karma.html)

# c# - 从 C# 到 VB:NET 的 Linq 查询转换

> ID：10108049
> 
> 赞同：-6
> 
> 时间：2012-04-11T14:32:08.693
> 
> 标签：c#, vb.net, linq

我需要转换 Linq 查询的帮助。我试过在线转换工具，但没有运气......查询是这样的：

```
var orderedData =(from d in collezione
              group d by d.Gruppo into g
              orderby g.Key
              from d in g
 select new[] {d}.Union(g.Where(c => c.Owner == d.Comp)) into withChildren
                          from wc in withChildren
                          orderby wc.Pos
                          select wc).Distinct(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:49:37.693

我不确定这是否是您需要的（这是随机拍摄，因为您的问题不完整）：

```
Dim orderedData = From d In collezione
                  Order By d.Gruppo
                  Group d By d.Gruppo Into g = Group
                  From d In g
                  Select New With {
                      .withChildren = {d}.
                          Union(g.Where(Function(c) c.Owner = d.Comp))
                  }
Dim result = (From od In orderedData
              From wc In od.withChildren
              Order By wc.Pos
              Select wc).Distinct 
```

# c - C中浮点数据类型的范围？

> ID：10108053
> 
> 赞同：38
> 
> 时间：2012-04-11T14:32:26.603
> 
> 标签：c, floating-point, ieee-754

我正在读一本C书，谈论浮点范围，作者给出了表格：

```
Type     Smallest Positive Value  Largest value      Precision
====     =======================  =============      =========
float    1.17549 x 10^-38         3.40282 x 10^38    6 digits
double   2.22507 x 10^-308        1.79769 x 10^308   15 digits 
```

我不知道最小正值和最大值列中的数字来自哪里。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-11T14:42:26.600

一个 32 位浮点数有 23 + 1 位尾数和一个 8 位指数（虽然使用了 -126 到 127），所以您可以表示的最大数是：

```
(1 + 1 / 2 + ... 1 / (2 ^ 23)) * (2 ^ 127) = 
(2 ^ 23 + 2 ^ 23 + .... 1) * (2 ^ (127 - 23)) = 
(2 ^ 24 - 1) * (2 ^ 104) ~= 3.4e38 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-11T14:37:19.783

这些数字来自[IEEE-754](http://en.wikipedia.org/wiki/IEEE_754-1985)标准，该标准定义了浮点数的标准表示。链接中的维基百科文章[解释了](http://en.wikipedia.org/wiki/IEEE_754-1985#Range_and_precision)如何在知道用于符号、尾数和指数的位数的情况下达到这些范围。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T15:04:42.850

浮点数据类型的值来自总共 32 位来表示分配的数量，如下所示：

1位：符号位

8 位：指数 p

23 位：尾数

指数存储为`p + BIAS`BIAS 为 127，尾数有 23 位和第 24 个隐藏位，假设为 1。此隐藏位是尾数的最高有效位 (MSB)，必须选择指数以便它是1.

这意味着您可以表示的最小数字`01000000000000000000000000000000`是`1x2^-126 = 1.17549435E-38`。

最大值是`011111111111111111111111111111111`，尾数是 2 * (1 - 1/65536)，指数是 127，给出`(1 - 1 / 65536) * 2 ^ 128 = 3.40277175E38`。

相同的原则适用于双精度，除了位是：

1位：符号位

11位：指数位

52位：尾数位

偏差：1023

所以从技术上讲，限制来自表示浮点数的 IEEE-754 标准，以上是这些限制的产生方式

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-08T09:10:11.723

**无穷大、NaN 和次正规**

这些是迄今为止没有其他答案提到的重要警告。

首先阅读 IEEE 754 和次正规数的介绍：[什么是次正规浮点数？](https://stackoverflow.com/questions/8341395/what-is-a-subnormal-floating-point-number/53203428#53203428)

然后，对于单精度浮点数（32 位）：

*   IEEE 754 规定，如果指数全为 ( `0xFF == 255`)，则它表示 NaN 或 Infinity。

    这就是为什么最大的非无限数有指数`0xFE == 254`而不是`0xFF`。

    然后有了偏差，它变成：

    ```
    254 - 127 == 127 
    ```

*   `FLT_MIN`是最小的*正规*数。但也有更小的不正常的！那些占据了`-127`指数槽。

以下程序的所有断言都在 Ubuntu 18.04 amd64 上传递：

```
#include <assert.h>
#include <float.h>
#include <inttypes.h>
#include <math.h>
#include <stdlib.h>
#include <stdio.h>

float float_from_bytes(
    uint32_t sign,
    uint32_t exponent,
    uint32_t fraction
) {
    uint32_t bytes;
    bytes = 0;
    bytes |= sign;
    bytes <<= 8;
    bytes |= exponent;
    bytes <<= 23;
    bytes |= fraction;
    return *(float*)&bytes;
}

int main(void) {
    /* All 1 exponent and non-0 fraction means NaN.
     * There are of course many possible representations,
     * and some have special semantics such as signalling vs not.
     */
    assert(isnan(float_from_bytes(0, 0xFF, 1)));
    assert(isnan(NAN));
    printf("nan                  = %e\n", NAN);

    /* All 1 exponent and 0 fraction means infinity. */
    assert(INFINITY == float_from_bytes(0, 0xFF, 0));
    assert(isinf(INFINITY));
    printf("infinity             = %e\n", INFINITY);

    /* ANSI C defines FLT_MAX as the largest non-infinite number. */
    assert(FLT_MAX == 0x1.FFFFFEp127f);
    /* Not 0xFF because that is infinite. */
    assert(FLT_MAX == float_from_bytes(0, 0xFE, 0x7FFFFF));
    assert(!isinf(FLT_MAX));
    assert(FLT_MAX < INFINITY);
    printf("largest non infinite = %e\n", FLT_MAX);

    /* ANSI C defines FLT_MIN as the smallest non-subnormal number. */
    assert(FLT_MIN == 0x1.0p-126f);
    assert(FLT_MIN == float_from_bytes(0, 1, 0));
    assert(isnormal(FLT_MIN));
    printf("smallest normal      = %e\n", FLT_MIN);

    /* The smallest non-zero subnormal number. */
    float smallest_subnormal = float_from_bytes(0, 0, 1);
    assert(smallest_subnormal == 0x0.000002p-126f);
    assert(0.0f < smallest_subnormal);
    assert(!isnormal(smallest_subnormal));
    printf("smallest subnormal   = %e\n", smallest_subnormal);

    return EXIT_SUCCESS;
} 
```

[GitHub 上游](https://github.com/cirosantilli/cpp-cheat/blob/55ce88cdc3732702139c11d1448d508eaadfcf21/c/interactive/float_range.c).

编译并运行：

```
gcc -ggdb3 -O0 -std=c11 -Wall -Wextra -Wpedantic -Werror -o subnormal.out subnormal.c
./subnormal.out 
```

输出：

```
nan                  = nan
infinity             = inf
largest non infinite = 3.402823e+38
smallest normal      = 1.175494e-38
smallest subnormal   = 1.401298e-45 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T14:49:44.350

正如 dasblinkenlight 已经回答的那样，这些数字来自 IEEE-754 中浮点数的表示方式，Andreas 对数学进行了很好的分解。

但是 - 请注意，浮点数的精度并不完全是 6 或 15 位有效十进制数字，因为 IEEE-754 数字的精度取决于有效二进制数字的数量。

*   `float`有 24 位有效的二进制数字 - 根据所表示的数字转换为 6-8 位精度的十进制数字。

*   `double`有 53 个有效二进制数字，大约是 15 个十进制数字。

如果您有兴趣[，我的另一个答案有进一步的解释。](https://stackoverflow.com/a/9765831/790070)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T14:40:39.283

这是类型的指数部分大小的结果，例如在 IEEE 754 中。您可以在 float.h 中使用 FLT_MAX、FLT_MIN、DBL_MAX、DBL_MIN 检查大小。

# ruby-on-rails - Capybara：日志中的异常跟踪

> ID：10108056
> 
> 赞同：26
> 
> 时间：2012-04-11T14:32:43.677
> 
> 标签：ruby-on-rails, exception, capybara, stack-trace

在 capybara 中运行集成测试时，让应用程序引发异常（500 错误；在浏览器中呈现）`test.log`文件中没有堆栈跟踪。这是我在那里看到的唯一一行：

```
Completed 500 Internal Server Error in 25ms 
```

我错过了什么吗？如何`test.log`在集成测试期间显示堆栈跟踪？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-11T15:07:05.517

去检查你`config/environments/test.rb`的发现线：

```
config.action_dispatch.show_exceptions = false 
```

并将其更改为`true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-25T18:09:05.467

选择的答案对我不起作用。我正在使用 Cucumber + Capybara + Rails。

[这个相关的答案](https://stackoverflow.com/a/44227556/1248725)帮助我`test.log`在运行 Cucumber 场景后得到了文件中的罪魁祸首错误。

# php - 在 Twig 视图预渲染中设置变量

> ID：10108057
> 
> 赞同：4
> 
> 时间：2012-04-11T14:32:46.383
> 
> 标签：php, twig, silex

我在 silex 应用程序中使用 Twig。在预请求挂钩中，我想检查用户是否已登录以及他们是否将用户对象添加到 Twig（这样我就可以在菜单中呈现登录/注销状态）。

但是，查看源代码后，似乎只能将模板视图变量作为参数提供给 render 方法。我在这里错过了什么吗？

这正是我想要实现的目标：

```
// Code run on every request    

$app->before(function (Request $request) use ($app)
{
    // Check if the user is logged in and if they are
    // Add the user object to the view

    $status = $app['userService']->isUserLoggedIn();

    if($status)
    {
        $user = $app['userService']->getLoggedInUser();

        //@todo - find a way to add this object to the view 
        // without rendering it straight away
    }

}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T19:04:54.350

```
$app["twig"]->addGlobal("user", $user); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-15T11:10:06.763

除了 Maerlyn 说的，你还可以这样做：

```
$app['user'] = $user; 
```

在您的模板中使用：

```
{{ app.user }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T19:29:41.457

您可以使用`twig->offsetSet(key, value)`预渲染值

注册树枝助手时的示例

```
$container['view'] = function ($c) {
    $view = new \Slim\Views\Twig('.templatePath/');

    // Instantiate and add Slim specific extension
    $basePath = rtrim(str_ireplace('index.php', '', $c['request']->getUri()->getBasePath()), '/');
    $view->addExtension(new Slim\Views\TwigExtension($c['router'], $basePath));

    //array for pre render variables
    $yourPreRenderedVariables = array(
       'HEADER_TITLE' => 'Your site title',
       'USER'  => 'JOHN DOE'
    );
    //this will work for all routes / templates you don't have to define again
    foreach($yourPreRenderedVariables as $key => $value){
        $view->offsetSet($key, $value);
    }

    return $view; 
}; 
```

你可以像这样在模板上使用它

```
<title>{{ HEADER_TITLE }}</title>
hello {{ USER }}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T06:29:35.063

[Maerlyn 提供的答案](https://stackoverflow.com/questions/10108057/setting-a-variable-in-twig-view-pre-render#answer-10112287)是错误**的**，因为没有必要使用`addGlobal`，因为该`user`对象已经存在于 twig 的环境全局变量中，如[文档](http://silex.sensiolabs.org/doc/master/providers/twig.html#global-variable)所述：

> **全局变量**
> 
> 当 Twig 桥可用时，全局变量引用`App`Variable 的一个实例。它允许访问以下方法：
> 
> ```
> {# The current Request #}
> {{ global.request }}
> 
> {# The current User (when security is enabled) #}
> {{ global.user }}
> 
> {# The current Session #}
> {{ global.session }}
> 
> {# The debug flag #}
> {{ global.debug }} 
> ```

Aso 根据[文档](http://silex.sensiolabs.org/doc/master/providers/twig.html#customization)，如果你想添加任何其他全局调用`foo`，例如，你应该这样做：

```
$app->extend('twig', function($twig, $app) {
    $twig->addGlobal('foo', 127);                    // foo = 127
    return $twig;
}); 
```

**注册**树枝服务后。

注册 twig 服务很简单：

```
$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path' => __DIR__.'/views',
)); 
```

# php - 如何在另一个变量中渲染一个变量？

> ID：10108059
> 
> 赞同：1
> 
> 时间：2012-04-11T14:32:50.757
> 
> 标签：php

我想将变量 $all 放在 $code 的中间，这是我从另一个文件中收集的 HTML 代码。我现在的代码是这样的。

```
ob_start();
---code here---
$all = ob_get_clean();
$code = file_get_contents("file.txt");
echo $code; 
```

file.txt 看起来有点像这样。

```
<html>
<head>
<title>Title</title>
</head>
<body>
---HTML code here---
$all
---More HTML code---
</body>
</html> 
```

我应该怎么做才能在我回显 $code 时，在其中呈现 $all？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:36:09.597

用于`str_replace`替换`$all`为值。

```
$code = str_replace('$all', $all, $code); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:46:41.273

OP 得到了他的解决方案，但我认为这也值得一提。

如果您在 HTML 文件中没有占位符，但您知道要`$all`在特定内容之后插入，则可以执行以下操作：

```
$all = ob_get_clean();
$code = file_get_contents("file.txt");
$after = "<input type=\"hidden\" value=\"something\" />";

$code = substr_replace($code, $all, strpos($code, $after)+strlen($after), 0); 
```

这将在 中找到`$after`，`$code`移动到它的末尾，然后插入`$all`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T14:37:05.763

尝试使用正则表达式。
你可以用'body'标签+你的var替换'body'标签。
像 ：

```
echo preg_replace('/<body>/',"<body>$all",$code); 
```

但是你必须确保只有一个`<body>`标签存在于`$code`

# c# - WCF 客户端性能问题

> ID：10108060
> 
> 赞同：0
> 
> 时间：2012-04-11T14:32:57.477
> 
> 标签：c#, wcf

我有一个应用程序应该能够向我的 wcf 服务发送数百个并发请求。该服务正在公开 http 联合绑定。

目前我正在使用单个客户端和 TPL 在多个线程上发送请求。我还将 system.net 最大连接数设置更改为 1000，以便 Windows 不会将 wcf 限制为最多 2 个并发请求。

我可以看到初始请求需要更多时间，因为他们正在获取身份验证令牌等，然后请求时间通常开始显着减少，但随后我间歇性地看到一些峰值，这与我拥有的服务器日志无关。

我想知道这是否是接近高吞吐量高度可扩展客户端的最佳方式。

我尝试在多个线程之间使用共享客户端代理并在多个线程之间共享 ChannelFactory。所有线程都使用 TPL 完成。

显示绑定

```
<basicHttpBinding>
        <binding name="Binding1" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:05:00" closeTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
            <message clientCredentialType="UserName" algorithmSuite="Default"/>
          </security>
        </binding>
      </basicHttpBinding> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:58:00.490

您提到您正在使用单个客户端实例，然后使用 TPL 展开工作。WCF 客户端实例在技术上不是线程安全的。创建客户端的成本非常便宜，只要在完成后创建新实例，您就不必害怕创建新实例`Close()`。

接下来，您不应该单独使用 TPL 来获得并发性。当您进行 WCF 调用时，一切都与网络 I/O 和等待来自服务器的响应有关。您需要确保在客户端中使用[异步 WCF 合同](http://msdn.microsoft.com/en-us/library/ms734701.aspx)。然后，您可以将这些与 TPL 结合起来，将`Task.Factory.FromAsync`您在调用返回后可能需要执行的任何其他工作流链接在一起。例如：

```
[ServiceContract]
public interface IMyService
{
    [OperationContract(AsyncPattern=true)]
    IAsyncResult BeginDoSomething();
    SomeResultType EndDoSomething(IAsyncResult result);
}

// Somewhere in the client app you store your channel factory (these are "expensive", these you cache)
ChannelFactory<IMyService> channelFactory = new ChannelFactory<IMyService>();

public void MyClientMethod()
{
   // Create a client channel
   IMyService myServiceChannel = channelFactory.CreateChannel();

   // Use TPL's FromAsync to invoke the async WCF call and wrap that up with the familiar Task API
   Task<SomeResultType>.Factory.FromAsync(myServiceChannel.BeginDoSomething
                                          myServiceChannel.EndDoSomething,
                                          null)
                               .ContinueWith(antecdent =>
                               {
                                    try
                                    {
                                        // NOTE: exception will be thrown here if operation failed
                                        SomeResultType result = antecedent.Result;

                                        // ... continue processing the result ...
                                    }
                                    finally
                                    {
                                        // NOTE: depending on your configuration you might want to watch for errors and .Abort() here too
                                        ((IClientChannel)myServiceChannel).Close();
                                    }
                               });      
} 
```

您所有的可扩展性都将来自在该客户端调用上使用异步 I/O。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:00:26.997

WCF 服务和使用 WCF 客户端（ClientBase 或 ChannelFactory 直接）的一些生产性能问题是由于 .NET 垃圾收集器由于草率的对象处理而被迫做大量工作。我会使用性能监视器在运行时检查 .NET 垃圾收集器的行为，看看这是否导致了峰值。

如果是 GC 问题，那么您需要检查您的服务和客户端代码。在服务上，确保对象实例范围尽可能有限。这有助于确保实例大部分被垃圾收集在 Gen0 中，这最常发生。客户端代码也应该被审查，但它在服务代码中尤为重要。

此外，在服务中，尤其是在客户端上，确保实现 IDisposable 的对象实例正确包装在**WCF 客户端实例除外**`using`的语句中。要正确处理 WCF 客户端，请查看这篇[简短的博客文章](http://omaralzabir.com/do-not-use-using-in-wcf-client/)，了解一个好的模式。如果您使用依赖注入容器，这可能会变得很棘手。您可以搜索“WCF 不使用 using”以获取有关原因的更多详细信息。BasicHttpBinding 和 WsHttpBinding 的一些配置可以处理草率的处理，但任何使用会话的绑定都容易出现 GC 问题。

# mingw - 带有 mingw 的 Vtune 分析器

> ID：10108065
> 
> 赞同：0
> 
> 时间：2012-04-11T14:33:18.350
> 
> 标签：mingw, intel-vtune

我在 64 位平台上使用 MinGW 来编译一个简单的 c++ 测试应用程序：

```
g++ -g3 -c test.cpp
g++ test.o -o test 
```

使用 -g3 标志 test.exe 现在应该包含用于分析它的所有必要符号信息......这是正确的吗？

当我使用 VTune Amplifyer XE 进行热点分析时，它会显示如下调用堆栈：

```
test.exe![test.exe] - [Unknown]
test.exe![test.exe]+0x15fa - [Unknown]
test.exe![test.exe]+0x13cd - [Unknown]
test.exe![test.exe]+0x14e7 - [Unknown]
kernel32.dll!BaseThreadInitThunk+0x1f33c - [Unknown]
ntdll.dll!RtlUserThreadStart+0x32ca0 - [Unknown] 
```

单击其中一项时，它会向我显示汇编代码，并且对于最上面的元素，它会显示：“无法显示源代码和汇编代码”。

如果我在 VTune 项目设置中指定源代码/二进制目录，这不会改变。

我应该如何编译我的程序或设置 VTune 以获得更有意义的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T09:58:51.823

VTune 可以从 2013 Update 7 开始分析 mingw 目标 - [http://software.intel.com/en-us/articles/whats-new-update-7-intel-vtune-amplifier-xe-2013#Update7Anchor3](http://software.intel.com/en-us/articles/whats-new-update-7-intel-vtune-amplifier-xe-2013#Update7Anchor3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:43:49.910

原因是目前只有 linux 版本的 VTune 支持标准调试格式，如 fe dwarf。windows 版本只能理解 microsoft PDB 文件。显然支持 dwarf 是 Windows 版本的功能请求（请参阅[此](http://software.intel.com/en-us/forums/showthread.php?t=104363&o=a&s=lr)线程）。

# python - 在 Python 中重新解释有符号长为无符号

> ID：10108070
> 
> 赞同：2
> 
> 时间：2012-04-11T14:33:34.870
> 
> 标签：python

一个 64 位的数字被[msgpack](http://msgpack.org/)解包为带符号的；我怎样才能将它重新解释为未签名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:35:07.530

怎么样

```
if x < 0:
   x += 2 ** 64 
```

或者，如果你更喜欢玩弄，

```
x &= 2 ** 64 - 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:41:03.150

你的意思是这样的？

```
>>> struct.unpack('L', struct.pack('l', -2235234523))
(18446744071474317093L,) 
```

# continuous-integration - 我应该将集成测试配置为持续构建还是夜间构建？

> ID：10108072
> 
> 赞同：3
> 
> 时间：2012-04-11T14:33:39.093
> 
> 标签：continuous-integration, teamcity

在我的项目中，我们有一组集成测试夹具，与单元测试夹具相比，它们通常很慢。通常，完成集成测试运行需要将近 3 个小时。

我的问题是，我应该将集成测试运行配置为连续构建（这显然取决于我对单元测试装置的持续构建并在此之后运行）还是应该将其配置为每晚构建？

如果我将其配置为每晚构建，那会扩大我的反馈周期吗？

谢谢，-迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:47:40.277

如果您的集成测试运行了 3 个小时，那么这肯定会一直阻塞您的一个代理，否则这些代理可能会用于其他签入构建？

当我们的签入构建开始需要超过 30 分钟时，我们采取措施将其缩短到 10 分钟以下。我们决定的基本原理是：随着这些变化，它可以编译吗？它是否通过了所有单元测试？其他链式构建以相同的方式执行。这使核心错误的反馈周期保持敏锐。其他构建功能被推迟到每晚，然后在早上解决故障。

我个人认为一个需要 3 个小时的任务绝对应该推到一个晚上。除非您有一个不会枯竭的大型代理池。

也许另一种选择是每天启动几次集成测试，也许是中午和晚上。

# r - 绘制无边框和白色背景的图例

> ID：10108073
> 
> 赞同：62
> 
> 时间：2012-04-11T14:33:40.447
> 
> 标签：r, plot, legend

我在一个情节中有一个图例，其中有一条线（来自 abline 语句）穿过它。我怎样才能使 abline 在图例附近变得不可见？这应该可以通过将图例背景设置为白色、无边框来实现，但我该如何实现呢？假设图表应如下所示：

```
windows.options(width=30, height=12)
plot(1:10)
abline(v=seq(1,10,1), col='grey', lty='dotted')
legend(4.8, 3, "This legend text should not be disturbed by the dotted grey lines") 
```

让它更复杂一点：如果图例干扰了点图的点：我怎样才能实现 ablines 在图例附近变得不可见（如上），但点仍然可见？

```
windows.options(width=30, height=12)
plot(1:10)
abline(v=seq(1,10,1), col='grey', lty='dotted')
legend(1, 5, "This legend text should not be disturbed by the dotted grey lines, but the plotted dots should still be visible") 
```

最后：有没有办法在图例语句中引入换行符？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-04-07T13:38:49.620

使用 option `bty = "n"`in`legend`删除图例周围的框。例如：

```
legend(1, 5,
       "This legend text should not be disturbed by the dotted grey lines,\nbut the plotted dots should still be visible",
       bty = "n") 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-11T14:44:19.120

正如`?legend`你所记录的那样：

```
plot(1:10,type = "n")
abline(v=seq(1,10,1), col='grey', lty='dotted')
legend(1, 5, "This legend text should not be disturbed by the dotted grey lines,\nbut the plotted dots should still be visible",box.lwd = 0,box.col = "white",bg = "white")
points(1:10,1:10) 
```

![在此处输入图像描述](../Images/1fa9fdd81b9cef0d21b3d614de2e1ca1.png)

换行符是用换行符来实现的`\n`。只需更改绘图顺序即可使这些点仍然可见。请记住，在 R 中绘图就像在一张纸上绘图：您绘制的每一件事都将放在当前存在的任何内容之上。

请注意，图例文本被截断，因为我使绘图尺寸更小（windows.options 并非在所有 R 平台上都存在）。

# ruby-on-rails-3 - Nginx/Unicorn 在部署时未显示更改

> ID：10108079
> 
> 赞同：1
> 
> 时间：2012-04-11T14:33:59.427
> 
> 标签：ruby-on-rails-3, nginx, unicorn

我有一个奇怪的问题。我们正在运行 Rails 3.2.2、Nginx 和 Unicorn。例如，如果我们对 index.html.erb 进行文本更改，则部署更改不会显示。

如果我查看生产服务器上的文件，我可以看到更改实际上位于“当前”目录中。所以我知道它已正确发布。

就好像独角兽没有更新自己或正确重新启动（即使我在部署时重新启动）。

更奇怪的是——我更改了应用程序的电子邮件 smtp 设置。部署后，我得到 SMTP 535 错误的用户名/密码。但是，如果我刷新 3 次就可以了。再次 - 这可能是某种 nginx/unicorn worker 缓存旧代码吗？

我今天必须部署这个项目，所以我有一定的压力来解决这个问题。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:55:04.263

涉及许多不同的变量。根据您配置 Unicorn 的方式，您可能需要发送`unicorn master`一个[USR2 信号](http://unicorn.bogomips.org/SIGNALS.html)信号来启动一个新的主进程，然后向旧的独角兽主进程发送一个 QUIT 信号以获取它。

根据生产服务器环境和部署机制，您可以利用[工头](http://ddollar.github.com/foreman/)之类的工具在部署时更轻松地管理独角兽。

# asp.net - 将列添加到新的 DataRow

> ID：10108080
> 
> 赞同：4
> 
> 时间：2012-04-11T14:34:01.917
> 
> 标签：asp.net, .net, datarow

是否可以在运行时创建一个新的 DataRow 对象并为其添加列？

```
// How can I specify column names for this data row object?
DataRow row = new DataRow(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T14:37:58.147

不，DataRow 被设计为 DataTable 的子项，DataTable 具有添加列所需的访问器。如果您可以直接操作 DataRows，则可以创建一个“锯齿状表”，其中的行具有不同的列数/顺序。这通常是一件坏事，所以它只是没有完成。

如果您想向 DataRow 添加一列，请将您的 Row 添加到 DataTable，向该 DataTable 添加一列，然后再次查看您的 DataRow。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T14:39:25.223

我不认为您可以将列添加到数据行，但您当然可以添加到数据表中。下面是一些为 VB 执行此操作的代码：

```
Enum enumType
    StringType = 1
    BooleanType = 2
    DateTimeType = 3
    DecimalType = 4
    DoubleType = 5
    IntegerType = 6
    CharType = 7
End Enum

Private Shared ReadOnly Property ColumnDataType(ByVal ThisDataType As enumType) As String
    Get

        'DataType values supported are:
        'System.Byte, System.Char, System.DateTime, System.Decimal, System.Double, System.Int16, System.Int32, System.Int64, 
        'System.SByte, System.Single 

        Select Case ThisDataType
            Case enumType.BooleanType
                Return "System.Boolean"
            Case enumType.DateTimeType
                Return "System.DateTime"
            Case enumType.DecimalType
                Return "System.Decimal"
            Case enumType.DoubleType
                Return "System.Double"
            Case enumType.IntegerType
                Return "System.Int32"
            Case enumType.StringType
                Return "System.String"
            Case enumType.CharType
                Return "System.Char"
            Case Else
                cnst.ErrorDisplay("No such data type as " & ThisDataType.ToString)
                Return Nothing
        End Select

    End Get
End Property
Public Shared Sub AddColumn(ByRef dt As DataTable, ByVal ColumnName As String, ByVal ThisDataType As enumType)

    Dim dc As DataColumn = New DataColumn(ColumnName)
    dc.DataType = System.Type.GetType(ColumnDataType(ThisDataType))
    dt.Columns.Add(dc)

End Sub 
```

该代码使用枚举。[我从这个页面](http://www.startvbdotnet.com/ado/datatable.aspx)得到了一些想法。这个想法是您可以调用 AddColumn 方法将您喜欢的任何列添加到数据表中。

# objective-c - 尝试将 ILColorPicker 移植到 iPad 应用程序

> ID：10108087
> 
> 赞同：1
> 
> 时间：2012-04-11T14:34:15.877
> 
> 标签：objective-c, xcode4

我正在尝试将 ILColorPicker 移植到使用 Storyboard 的 iPad 应用程序中。

我将 UIView 放在 UIViewController 中；在那个 UIView 中我有 3 个其他 UIViews（在下面的灰色中，包含的 UIView 有一个黑色背景，这给了它边框）。 ![在此处输入图像描述](../Images/35c1975b3c91610e30c60edb02035bbf.png)

3 个视图中的每一个都具有与示例匹配的连接。

此连接图像用于顶部 UIView。 ![在此处输入图像描述](../Images/a6fd9f561746205a48c52cdf4ec529a5.png)

这是中间 UIView 的连接图像 ![在此处输入图像描述](../Images/eea51c7d328a9b146b9d015d0e49abc4.png)

这是底部 UIVIew 的连接图像 ![在此处输入图像描述](../Images/497dbaa2e160390a945c1bae484590c5.png)

当我在模拟器中运行应用程序并单击此控制器的菜单选项卡按钮时，我只看到黑屏。此外，我在“viewDidLoad”中放了一个 NSLog，它在那里经历了六 (6) 次！

我已经为此工作了一个多星期，并且已经达到了我的经验和知识可以帮助我的尽头。有人可以帮我弄清楚这里有什么问题吗？我会非常非常感谢它。（如果需要，将提供代码；只是不想在这里写书！）：D

更新：“viewDidLoad”的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"viewDidLoad");
    //  Build a random color to show off setting he color on the iPad
    UIColor *c = [UIColor colorWithRed:(arc4random()%100)/100.0f
                                 green:(arc4random()%100)/100.0f
                                 blue:(arc4random()%100)/100.0f
                                 alpha:1.0];

    colorChip.backgroundColor = c;
    colorPicker.color = c;
    huePicker.color = c;
} 
```

更新 2：“didFinishLaunchingWithOptions”的代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:16:58.477

我不确定您的代表设置为什么，但您应该将它们连接到控制器而不是视图。话虽如此，您确定您的 IBOutlets 已连接，我使用断言进行检查。

从一个带有单个视图 + 视图控制器的空白故事板项目中，我得到了与您所拥有的类似的东西，这就是我得到的：

```
 // ViewController.h
  @protocol MyPickerDelegate <NSObject>
  - (void)myPickerDidPick:(id)sender;
  - (void)myPickerPickColor:(id)sender color:(UIColor*)color;
  @end

  @interface ViewController : UIViewController<MyPickerDelegate>
  @property (weak) IBOutlet __weak UIView *colorBar;
  @property (weak) IBOutlet __weak UIView *saturationBrightnessPicker;
  @property (weak) IBOutlet __weak UIView *huePicker;
  @end 
```

和

```
 // ViewController.m
  @interface ViewController () {
    __weak UIView *colorBar_;
    __weak UIView *saturationBrightnessPicker_;
    __weak UIView *huePicker_;
  }
  @end

  @implementation ViewController

  @synthesize colorBar = colorBar_;
  @synthesize saturationBrightnessPicker = saturationBrightnessPicker_;
  @synthesize huePicker = huePicker_;

  - (void)viewDidLoad {
    [super viewDidLoad];

    NSAssert(colorBar_, @"colorBar not connected");
    NSAssert(saturationBrightnessPicker_, @"saturationBrightnessPicker not connected");
    NSAssert(huePicker_, @"huePicker not connected");

    self.view.backgroundColor = [UIColor blackColor];  
    colorBar_.backgroundColor = [UIColor redColor];
    saturationBrightnessPicker_.backgroundColor = [UIColor greenColor];
    huePicker_.backgroundColor = [UIColor blueColor];
  }

  - (void)myPickerDidPick:(id)sender {
    NSLog(@"Did pick");
  }

  ...

  @end 
```

希望这可以帮助！

# networking - 如何使用 NS-3 模拟一些路由算法？

> ID：10108089
> 
> 赞同：0
> 
> 时间：2012-04-11T14:34:19.177
> 
> 标签：networking, simulator, ns-3

我正在尝试为某些路由算法进行网络模拟，例如

OSPF、RIP、IS-IS、DSR

使用 NS3（网络模拟器 3），因为它是免费的。但是在阅读了 ns3-tutorial 之后，我仍然不知道从哪里开始模拟上述任何路由算法。任何帮助将不胜感激。

我的理解是，因为在 ns3 中，我必须创建将创建流量的节点、通道、netDevices 和应用程序。我认为，由于路由是在路由器中完成的，因此与我想做的事情有关的任何事情都与 netDevices 有关，因为路由器是必须运行算法的设备，而不是主机（节点），而是我必须指定的确切位置我想要模拟的我自己的算法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:17:30.053

试试 ns3 提供的路由示例。您可以在 ns3 的示例/路由目录中找到它们。这应该是一个很好的起点。

# sql - SQL 查询 - 不同的还是唯一的？

> ID：10108091
> 
> 赞同：2
> 
> 时间：2012-04-11T14:34:27.253
> 
> 标签：sql, oracle, unique, distinct

SQL 新手，并且有一个查询通过多个表的多个连接提取一些数据。

样本数据：

```
PERSON_NAME FUNCTION_NAME  FUNCTION_ID  FUNCTION_GROUP

Bob         View Result    1            Editor
Bob         Edit Result    4            Editor
Bob         Delete Result  3            Editor
Bob         Email Result   8            Editor
Mary        Print Letter   45           Admin
Mary        Grant Access   37           Admin 
```

函数有 ID，function_groups 有很多函数。我想查询数据，而不是看起来类似于上面的示例，它看起来像：

```
PERSON_NAME FUNCTION_NAME                             FUNCTION_ID     FUNCTION_GROUP

Bob         View Result,Edit Result, Delete Result   1,4,3,8          Editor
Mary        Print Letter,Grant Access                 45,37           Admin 
```

“Bob 属于编辑器，编辑器具有以下功能”作为一个结果，而不是最初的示例，其中返回多行。

我认为独特或独特的关键字可以帮助我是否正确？谢谢！

编辑：现在有代码

```
select staff_member.person_name, function.function_name,staff_group_function.function_id, staff_group.function_group_name
 from staff_member
 inner join staff_group
 on staff_group.staff_group_id=staff_group_member.staff_group_id
 inner join staff_group_function
 on staff_group_function.staff_group_id=staff_group_member.staff_group_id
 inner join function
 on function.function_id=staff_group_function.function_group_name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:37:31.170

没有。你需要的是[`LISTAGG()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)如果你有 Oracle 11g2。这可能是您的查询：

```
SELECT person_name,
       LISTAGG(function_name, ', ') WITHIN GROUP (ORDER BY 1) function_name,
       LISTAGG(function_id,   ', ') WITHIN GROUP (ORDER BY 1) function_id,
       function_group
FROM my_table
GROUP BY person_name, function_group 
```

或者（根据您的最新评论）：

```
SELECT person_name,
       LISTAGG(function_name,  ', ') WITHIN GROUP (ORDER BY 1) function_name,
       LISTAGG(function_id,    ', ') WITHIN GROUP (ORDER BY 1) function_id,
       LISTAGG(function_group, ', ') WITHIN GROUP (ORDER BY 1) function_group
FROM my_table
GROUP BY person_name 
```

对于 11g2 之前的任何版本，这篇有趣的文章为您提供了解决方案：

[http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:42:41.763

`UNIQUE`并且`DISTINCT`与分组和汇总结果无关。您必须`GROUP BY` `PERSON_NAME`然后`FUNCTION_GROUP`应用您自己的[聚合函数](http://en.wikipedia.org/wiki/Aggregate_function)来对剩余的结果进行分组。

本文准确地告诉您如何通过 Oracle 中的聚合函数[使用](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)`LISTAGG`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:31:43.653

它`10g`的工作原理如下

```
with tab as (
 select 'Bob' PERSON_NAME,'View Result' FUNCTION_NAME,'1' FUNCTION_ID,'Editor' FUNCTION_GROUP      from dual
union all
select 'Bob' PERSON_NAME,'Edit Result' FUNCTION_NAME,'4' FUNCTION_ID,'Editor' FUNCTION_GROUP from    dual
union all
select 'Bob' PERSON_NAME ,'Delete Result'FUNCTION_NAME,'3' FUNCTION_ID,'Editor' FUNCTION_GROUP from dual
union all
select 'Bob' PERSON_NAME,'Email Result' FUNCTION_NAME,'8' FUNCTION_ID,'Editor' FUNCTION_GROUP from dual
union all
select 'Mary' PERSON_NAME,'Print Letter' FUNCTION_NAME,'45' FUNCTION_ID,'Admin' FUNCTION_GROUP from dual
union all
select 'Mary' PERSON_NAME , 'Grant Access' FUNCTION_NAME ,'37' FUNCTION_ID,'Admin' FUNCTION_GROUP from dual
 )
select person_name
      ,wm_concat(function_name) function_name
      ,wm_concat(function_id) function_id
      ,function_group
 from tab
 group by person_name,function_group 
```

**输出** ![输出](../Images/0bd9ef9b152302a133e4f33e610639bc.png)

# xml - Xquery 结果格式不正确

> ID：10108093
> 
> 赞同：1
> 
> 时间：2012-04-11T14:34:28.017
> 
> 标签：xml, formatting, xquery, xqilla

我刚刚开始将 Xquery 与 Xqilla 一起使用。

我希望我的结果以正确的缩进和换行符返回。

我有一个名为 $duplicates 的导演列表，我想在我的退货声明中从这些导演那里获取所有电影标题。

我的退货声明：

```
for $duplicate in $duplicates
return 
    <movie director="{$duplicate}"> 
    {$result/videos/video/title[../director=$duplicate]}</movie> 
```

我想像这样格式化（有点）：

```
<movie director="Coppola">
    <title>The Godfather</title>
    <title>The Godfather pt. 2</title>
    <title>Apocalypse Now</title></movie> 
```

孩子们正确缩进，每个都在一个新的行上。

我得到的是：

```
<movie director="Coppola">
     <title>The Godfather</title><title>The Godfather pt. 2</title><title>Apocalypse Now</title></movie> 
```

所有标题都在一行中。

由于我之前通过简单地返回一个变量成功地返回了一个标题列表，因此我尝试了一个带有 for 循环的嵌套 return 语句，如[wikibooks](http://en.wikibooks.org/wiki/XQuery/Sequences)上所建议的那样。该解决方案还包含明确定义`<title>`的 -tags。

我在 SO 上发现了一个有同样问题的人[。](https://stackoverflow.com/questions/9182349/put-each-xquery-result-on-a-new-line)

那里的答案没有用。当我添加一个命名空间时，我的程序完全停止了输出。如果有一些非杂乱的解决方案，我也更喜欢它（这似乎是因为每个人似乎从一开始就得到了完美的输出）。

问题似乎在于将 XML 和 Xquery 与大括号的使用混合在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:36:26.453

这不是您的查询的问题，而是设置为控制输出序列化的标志和选项的问题。

您可能想要[将 XQilla`format-pretty-print`标志设置为 true](http://xqilla.sourceforge.net/docs/dom3-api/classxercesc_1_1DOMLSSerializer.html)，或者（对于 XQuery 3.0）在 prolog 中使用[XQuery`indent`](http://www.w3.org/TR/xslt-xquery-serialization/#xml-indent)序列[化选项，如下所示：](http://www.w3.org/TR/xslt-xquery-serialization/#xml-indent)

```
declare option output:indent "yes"; 
```

如果这是用于命令行，并且您还没有 XQuery 3.0 支持，您也可以使用不同的漂亮打印工具（如果在 XQilla 中没有明确的方法来设置序列化选项）。例如，管道输出[`xmlstarlet fo`](http://xmlstar.sourceforge.net/doc/UG/xmlstarlet-ug.html#d0e543)将在第二遍中漂亮地打印它。

# c# - GetActiveObject() 与 GetObject() -- MK_E_UNAVAILABLE 错误

> ID：10108098
> 
> 赞同：4
> 
> 时间：2012-04-11T14:34:42.003
> 
> 标签：c#, vba, com, interop

全部：

我在将一些 VBA 代码转换为 C# 时遇到了一些问题。

我们有一个充当本地 COM 服务器的 3rd 方应用程序。

在 VBA 代码中，我们使用*GetObject()*来获取对现有对象的引用

**例如**

```
Set appHandle = GetObject("", ProgId) 
```

这很好用。

我在我们的 c# 代码中添加了对 3rd 方应用程序的引用，并使用 *Marshal.GetActiveObject()*尝试获取对正在运行的实例的引用。

**例如**

```
var appModel = (IAppCoModel)Marshal.GetActiveObject(ProgId); 
```

但我不断收到**MK_E_UNAVAILABLE**错误。

在 C# 代码中创建新对象可以正常工作

**例如**

```
var appModel = new AppCoModel() 
```

这将启动 3rd 方应用程序并允许我与之通信。它只是获取对失败的正在运行的实例的引用。

**我试过的**

*不同的安全上下文*
VS 在管理员模式下运行，第 3 方应用程序不是。我尝试从命令行（非管理员）运行我们的 c# 应用程序。仍然失败。

*检查 ROT 内容*
（由[Marshal.GetActiveObject() 建议在 C# 中引发 MK_E_UNAVAILABLE 异常](https://stackoverflow.com/questions/7736280/marshal-getactiveobject-throws-mk-e-unavailable-exception-in-c-sharp)）
3rd 方应用程序未出现在其中。不知道足够的 COM 以确保它需要。

*检查所有注册表条目*
看起来不错（据我所知），它们足以创建和实例化 3rd 方应用程序并让 VBA 找到它。我应该在这里检查什么具体的东西？

人们可以提出的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T13:20:42.540

全部：

不太清楚结束自己的问题的礼仪是什么，但既然我找到了答案，我想以某种方式将其标记为*“不需要答案”*。

GetActiveObject() 返回 MK_E_UNAVAILABLE 的原因是第 3 方应用程序未注册为自动化服务器。无法获得对正在运行的实例的引用。

这没有在 VBA 代码中显示，因为：

1.  `GetObject("",ProgID)`每次创建一个新实例（[http://msdn.microsoft.com/en-us/library/gg251785.aspx](http://msdn.microsoft.com/en-us/library/gg251785.aspx)）

2.  3rd 方应用程序中的 COM 公开功能会在应用程序未运行时启动该应用程序。因此，在 VBA 中，我们创建了多个对象，它们都指向同一个正在运行的应用程序，而不是附加到正在运行的应用程序。

# jquery - Jquery 如何使用 find 推送数据？

> ID：10108102
> 
> 赞同：0
> 
> 时间：2012-04-11T14:35:00.190
> 
> 标签：jquery

我没有`li`类名为 as 的元素`c_on`，我需要获取所有 this`li`的属性并需要推入数组。为此，我确实喜欢这个，但没有结果，有人知道这样做的好方法吗？

```
var pushEmpl = [];    
pushEmpl.push($('.demographics').find('ul.ocptn').find($('li.c_on')).each(function(){ return $(this).attr('data-ocp')})); 
```

但它没有得到结果。还有其他方法可以推动这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:40:58.243

你必须把`push()`里面的`each()`.

```
var pushEmpl = []; 
$('.demographics').find('ul.ocptn').find($('li.c_on')).each(function(){ pushEmpl.push($(this).attr('data-ocp')); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:42:19.730

我建议从`.each()`函数内部推送。

```
$('.demographics').find('ul.ocptn').find($('li.c_on')).each(function(){pushEmpl.push($(this).attr('data-ocp'))})); 
```

# django-cms - 带有 django-form-designer 的字段集

> ID：10108103
> 
> 赞同：0
> 
> 时间：2012-04-11T14:35:02.613
> 
> 标签：django-cms

我将[django-form-designer](https://github.com/philomat/django-form-designer)用于 django-cms 以允许管理员用户通过管理 UI 创建表单。

对于长表单，我希望能够将字段组织成字段集，以便在呈现表单时在相关字段周围有一个框。是否可以使用 django-form-designer 和管理 UI 将表单字段组织到字段集中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:14:42.720

根据维护者的说法，[字段集尚不支持](https://github.com/philomat/django-form-designer/issues/45)。

# java - Tiles1 - 将属性传递给 jsp 部分

> ID：10108104
> 
> 赞同：1
> 
> 时间：2012-04-11T14:35:05.853
> 
> 标签：java, struts, tiles, struts1

我有一个非常基本的tiles1设置，带有标题、菜单和内容，如下所示：

```
<definition name="Main" path="/WEB-INF/jsp/MainLayout.jsp">
    <put name="header" value="/WEB-INF/jsp/Header.jsp"/>
    <put name="menu" value="/WEB-INF/jsp/Menu.jsp"/>
    <put name="content" value=""/>
</definition> 
```

我所有的子页面都扩展了这个定义，并为内容部分提供了一个 jsp：

```
<definition name="SearchPage" extends="Main">
    <put name="content" value="/WEB-INF/jsp/Search.jsp"/>
</definition> 
```

我正在寻找的是一种让上面的 SearchPage 定义“放置”一个属性以便它可以在 Search.jsp 中使用的方法。我的第一次尝试是：

```
<definition name="SearchPage" extends="Main">
    <put name="content" value="/WEB-INF/jsp/Search.jsp"/>
    <put name="showOptions" value="true" type="string"/>
</definition> 
```

但在这种情况下，showOptions 属性将仅对 MainLayout.jsp 可用，而不会传递给 Search.jsp。我知道有一些方法可以通过布局页面中的 useAttribute 显式传递它，但我非常希望避免布局页面需要了解我可能在子页面中使用的每个变量。

注意在tiles2 中似乎有一个漂亮的cascade="true" 属性，它完全符合我的要求，但不幸的是我认为我被tiles1 卡住了。

* * *

感谢 GriffeyDog 提供了很好的单行修复：

在 MainLayout.jsp 中，将所有图块属性导入请求范围。然后它们可用于所有子页面（注意名称冲突）。

```
<tiles:importAttribute scope="request"/> 
```

我还找到了一种替代方法，它使用具有必要属性的定义作为内容而不是 jsp 页面：[http](http://wiki.apache.org/struts/StrutsDocTiles) ://wiki.apache.org/struts/StrutsDocTiles （解决方案 #1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:58:23.003

您可以使用`tiles:importAttribute`和指定范围，例如`request`. 在您的主布局中执行此操作，然后您应该能够在搜索页面中访问它。

# android - 类之间传递参数

> ID：10108107
> 
> 赞同：1
> 
> 时间：2012-04-11T14:35:09.037
> 
> 标签：android, parameters

我正在尝试将两个参数（fileURL 和 fileNAme）从一个类传递到另一个类，但是我遇到了错误，

```
 04-11 17:19:45.510: E/AndroidRuntime(2958): FATAL EXCEPTION: AsyncTask #1
    04-11 17:19:45.510: E/AndroidRuntime(2958): java.lang.RuntimeException: An error occured while 
executing doInBackground()
04-11 17:19:45.510: E/AndroidRuntime(2958):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.lang.Thread.run(Thread.java:856)
04-11 17:19:45.510: E/AndroidRuntime(2958): Caused by: java.lang.NullPointerException: println needs a message
04-11 17:19:45.510: E/AndroidRuntime(2958):     at android.util.Log.println_native(Native Method)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at android.util.Log.e(Log.java:231)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at com.androidhive.androidlistview.pdfDownload$DownloadFileFromURL.doInBackground(pdfDownload.java:155)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at com.androidhive.androidlistview.pdfDownload$DownloadFileFromURL.doInBackground(pdfDownload.java:1)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-11 17:19:45.510: E/AndroidRuntime(2958):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-11 17:19:45.510: E/AndroidRuntime(2958):     ... 4 more 
```

这里是

**我的第一个将参数传递给另一个类的类**

```
 list.setOnItemClickListener(new ListView.OnItemClickListener() { 
         public void onItemClick(AdapterView<?> parent, View view, 
                  int position, long id) { 
                if (position == 0) { 
                    // pass parameters file name & file url 
                    Intent i = new Intent(ListView_SqliteActivity.this,pdfDownload.class); 
                    i.putExtra("FileName","hello.pdf"); 
                    i.putExtra("FileURL","http://www.gradsch.ohio-state.edu/depo/etd_tutorial/lesson2.pdf"); 
                    startActivity(i); 

                  } 

                    else{
                          Toast.makeText(ListView_SqliteActivity.this,
                                    " toast me " + listItemAdapter.getItem(position),
                                    Toast.LENGTH_SHORT).show();
                    }               }
        });

} 
```

**我的第二个带参数的类**

```
public class pdfDownload extends Activity {

// button to show progress dialog
Button btnShowProgress;

// Progress Dialog
private ProgressDialog pDialog;
ImageView my_image;
// Progress dialog type (0 - for Horizontal progress bar)
public static final int progress_bar_type = 0; 
public static String fileURL;

// File url to download
public static String file_url = fileURL;
public static String fileName;

public static String file_name = fileName;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.download);

    // show progress bar button
    btnShowProgress = (Button) findViewById(R.id.btnProgressBar);
    // Image view to show image after downloading
    my_image = (ImageView) findViewById(R.id.my_image);
    /**
     * Show Progress bar click event
     * */
    btnShowProgress.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) { 
                file_name = getIntent().getStringExtra("fileName");  
                file_url = getIntent().getStringExtra("fileURL"); 
        // starting new Async Task 
        new DownloadFileFromURL().execute(file_url); 

            // starting new Async Task
            new DownloadFileFromURL().execute(file_url);
        }
    });
} 
```

在修复了之前的错误之后，一个新的错误来了，那就是来自这个类的 toast "file not found" 消息

```
protected void onPostExecute(String file_url) {
            // dismiss the dialog after the file was downloaded
            dismissDialog(progress_bar_type);

        }
        File pdfFile = new File("/mnt/sdcard/pass/"+ file_name);{ 
        if(pdfFile.exists()) { 
            Uri path = Uri.fromFile(pdfFile);  
            Intent pdfIntent = new Intent(Intent.ACTION_VIEW); 
            pdfIntent.setDataAndType(path, "application/pdf"); 
            pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
            try { 
               startActivity(pdfIntent); 
            } catch(ActivityNotFoundException e) { 
               Toast.makeText(pdfDownload.this, "No Application available to view pdf", Toast.LENGTH_LONG).show();  
            } 
        } else { 
            Toast.makeText(pdfDownload.this, "File not found", Toast.LENGTH_LONG).show();  
        } 
    }` 
```

带有新的错误消息

```
 04-11 18:06:40.809: E/AndroidRuntime(12884): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3938)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.app.ActivityThread.access$1300(ActivityThread.java:123)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.os.Looper.loop(Looper.java:137)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at java.lang.reflect.Method.invoke(Method.java:511)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at dalvik.system.NativeStart.main(Native Method)
04-11 18:06:40.809: E/AndroidRuntime(12884): Caused by: java.lang.NullPointerException
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
04-11 18:06:40.809: E/AndroidRuntime(12884):    at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
04-11 18:06:40.809: E/AndroidRuntime(12884):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:40:29.210

使用 getApplicationContext() 而不是 ListView_SqliteActivity.this

```
Intent i = new Intent(getApplicationContext(),pdfDownload.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:57:00.827

在您`DownloadFileFromURL`班级的第 155 行，您`Log.e()`使用无效参数调用。标记或消息为空，您可以使用以下代码解决问题：`Log.e("tag",String.valueOf(errormessage));`

# html - 菜单拟合窗口大小

> ID：10108108
> 
> 赞同：1
> 
> 时间：2012-04-11T14:35:10.330
> 
> 标签：html, css, background

我的菜单有问题：我有一个 960 像素的 div，它有一个背景（图 2）。在图 2 的左侧，需要另一个具有适合左侧空间的元素，右侧是一个需要适合右侧空间的 div。

因此，如果我的分辨率为 1024 像素，则左侧需要 32 像素，中心（曾经）960 像素，右侧需要 32 像素。如果分辨率为 2048px，左：544px，中：960px，右：544px。

```
<div id="container-menu">
    <div id="left-bg">// EMPTY, ONLY NEED TO FIT THE WINDOW LEFT //</div>
    <div id="center-bg">// HERE GO MENU AND LOGO //</div>
    <div id="right-bg">// EMPTY, ONLY NEED TO FIT THE WINDOW RIGHT//</div>
</div> 
```

见图片： ![在此处输入图像描述](../Images/0bffae577dda450affe50617fa8005ef.png)

**更新：**

图像 1 和图像 3 具有`1px`宽度并`repeat-x`添加到背景中

图 2 有`960px`宽度

所有图片都是透明png。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:52:57.887

您可以为此使用 CSS3 **Flex**属性。

例如：

**HTML**

```
<div class="parent">
 <div class="left">1</div>
 <div class="middle">2</div>
 <div class="right">3</div>
</div>​ 
```

**CSS**

```
.parent {
    display: -moz-box;
    -moz-box-orient: horizontal;
    display:-webkit-box;
    -webkit-box-orient: horizontal;
    width: 100%;
}

.parent div{
    -moz-box-flex: 1;
    -webkit-box-flex: 1;
    height:40px;
}
.parent .middle{
    width:460px;
    background:yellow;
}
.left{background:red;}
.right{background:blue;} 
```

检查这个[http://jsfiddle.net/pMh97/1/](http://jsfiddle.net/pMh97/1/)

# php - 如何调试仅在（谷歌）机器人请求页面时发生的问题？

> ID：10108109
> 
> 赞同：3
> 
> 时间：2012-04-11T14:35:12.807
> 
> 标签：php, http, zend-framework, httprequest

我的应用程序在从 googlebot 调用时抛出一个`Zend_Locale_Exception`错误消息，其中 ZF 发送以下错误消息：

> 区域设置的自动检测失败！

问题可能是因为未设置默认语言环境，但我该如何调试呢？

由于 google bot 不是实时的，我需要实际伪造 bot 发出的 HTTP 请求，但我如何才能知道这个请求是如何发出的？

尝试使用 curl 发送**Accept-Language**标头不会重现错误：

```
 $ch = curl_init();
   curl_setopt($ch, CURLOPT_URL, 'http://www.mysite.com.br/');
   curl_setopt($ch, CURLOPT_HEADER, true);
   curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept-Language'));
   echo $data = curl_exec($ch);
   curl_close($ch); 
```

**编辑：**

进一步澄清：

*   我知道问题可能是缺少默认语言环境，但**我需要调试它**
*   更改浏览器的用户代理不起作用，它只会更改 UA 字符串，区域设置仍然从我的浏览器发送

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:39:43.497

我的建议是：

*   **始终设置默认语言环境**，因此如果自动检测失败，无论如何都会默认使用语言环境。

为此，您可以添加*application.ini*：

```
resources.locale.default = "en_US" 
```

此外，请确保不要在引导程序中使用检测到的语言环境，如果必须这样做，请始终*确保*`$this->bootstrap('locale');`在使用`Zend_Locale`.

您可以使用终端和浏览器（例如 Lynx）模拟相同的行为，然后您可能需要取消设置一些环境变量（例如*LANG*、*LANGUAGE*）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:18:31.417

Google 网站管理员工具中有一个“Fetch as Googlebot”功能。您也许可以使用它来触发机器人访问您的网站。您甚至可以临时`phpinfo()`向您的站点添加一个页面并使用该功能来点击它，这将列出它向您显示的响应中的所有标题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:13:17.753

您看到异常的原因可能有很多，因此您不能只是“测试”它。当您需要针对 googlebot 请求进行测试时，您必须存储该请求，以便稍后在您的网络服务器上重放它。

但是，正如所写，触发此事件的原因可能有很多，您可以在[`Locale.php`](https://github.com/KnpLabs/zend-locale/blob/master/Locale.php#L1022).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T14:54:15.580

wget --user-agent "googlebot(at)googlebot.com 用户代理：Mozilla/5.0（兼容；Googlebot/2.​​1；+http://www.google.com/bot.html）" "http://www .mysite.com.br/"

# java - 我如何获得 leftNavLibrary？

> ID：10108113
> 
> 赞同：0
> 
> 时间：2012-04-11T14:35:25.057
> 
> 标签：java, android, google-tv

我访问过：http://code.google.com/p/googletv-android-samples/source/browse/，LeftNavBarLibrary 就在我面前，我该如何下载这个库？我在任何地方都看不到下载 zip 或链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:53:23.610

您可以按照[Source Checkout 页面](http://code.google.com/p/googletv-android-samples/source/checkout)上的说明签出 git 存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:53:36.090

您必须克隆 Git 存储库并将项目导入您的 IDE（Eclipse？）。

# php - 标签 朋友 照片

> ID：10108119
> 
> 赞同：2
> 
> 时间：2012-04-11T14:35:56.103
> 
> 标签：php, facebook, tags, photo

我使用此代码，但出现错误

> 致命错误：未捕获的 OAuthException：（#121）在第 1106 行的 /home/a283357/public_html/app/base_facebook.php 中抛出了无效的照片 ID

我的代码用于标签

```
$data = array(array('tag_uid' => $friends, 'x' => rand() % 100, 'y' => rand() % 100 ));
$data = json_encode($data);
//, 'tags' => $data,

$photo_details = array( 'message'=> 'message ', 'tags' => $data, 'image' => '@' . realpath($file) );
$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

我想标记 5 或 10 个朋友

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:17:09.313

您不能在创建照片时指定照片的标签。此外，您为创建照片方法中使用的参数使用了错误的名称。

您应该先创建照片，然后对其进行标记。

创建照片：

```
$photo_details = array(
  'message'=> 'message ',
  'source' => '@' . realpath($file)
);
$uploaded_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

现在标记它：

```
$tags = array(
  array('tag_uid' => $friend_id, 'x' => rand() % 100, 'y' => rand() % 100 )
);
$photo_id = $uploaded_photo['id'];
$facebook->api('/'.$photo_id.'/tags', 'post', array('tags'=>$tags)); 
```

**请注意，** [文档将`to`参数](http://developers.facebook.com/docs/reference/api/photo/#tags)声明为指定标记用户的参数，但事实并非如此（`tag_uid`与您的初始示例一样）。

# vb.net - 来自 dll 的未处理异常 - 仅显示在发布版本中

> ID：10108120
> 
> 赞同：0
> 
> 时间：2012-04-11T14:35:59.940
> 
> 标签：vb.net, dll

我有一个我构建的 dll 库，以帮助减少从项目复制到项目的样板代码量。dll 中运行了一个计时器，以通过 RPC 保持与我们机器的连接。当我调试我的项目并中断 RPC 连接时，我的代码优雅地从 dll 库中抛出一个断开事件，我的主窗体捕获该事件并适当地处理它。

现在，为发布而构建。当我断开 RPC 连接时，会从库中抛出一个未处理的异常，该异常显然没有在其他地方捕获。

奇怪的是，引发异常的代码在计时器中，并且调用都包装在 try/catch 块中，而 catch 块吞下异常并执行其他清理工作。

我不明白在调试模式下一切都很好，但在发布时却不是。那部分对我来说没有意义。我尝试查看异常对象并在其上设置一个已处理的属性，但它不可用。这是我所看到的正常行为吗？

我最近才开始在我的项目中使用大量库，以使我的解决方案更加精简和易于遵循。希望这不是我没有考虑过的库的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:16:13.040

有些类型的异常在 Release 模式下的 Try-Catch 中没有被捕获，例如发生在不同线程中的异常。尝试在主窗体中处理[Application.ThreadException](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)事件。

您还可以处理[Application.CurrentDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)以确保捕获所有未处理的异常。

# java - 如何实例化列表 ?

> ID：10108122
> 
> 赞同：98
> 
> 时间：2012-04-11T14:36:06.520
> 
> 标签：java, generics

我怎样才能让这种事情发挥作用？我可以检查 if`(obj instanceof List<?>)`但不是 if `(obj instanceof List<MyType>)`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-11T14:36:52.920

这是不可能的，因为在泛型的编译时会擦除数据类型。唯一可能的方法是编写某种包装器来保存列表所包含的类型：

```
public class GenericList <T> extends ArrayList<T>
{
     private Class<T> genericType;

     public GenericList(Class<T> c)
     {
          this.genericType = c;
     }

     public Class<T> getGenericType()
     {
          return genericType;
     }
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-07-23T08:46:02.190

```
if(!myList.isEmpty() && myList.get(0) instanceof MyType){
    // MyType object
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-11T14:40:53.027

您可能需要使用反射来检查它们的类型。获取 List 的类型： [获取 java.util.List 的泛型类型](https://stackoverflow.com/questions/1942644/get-generic-type-of-java-util-list)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-01-03T15:57:27.753

如果您想检查它是不是空`object`的实例，则可以使用它：`List<T>`

```
if(object instanceof List){
    if(((List)object).size()>0 && (((List)object).get(0) instanceof MyObject)){
        // The object is of List<MyObject> and is not empty. Do something with it.
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-12-05T13:47:13.800

```
 if (list instanceof List && ((List) list).stream()
                                             .noneMatch((o -> !(o instanceof MyType)))) {} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-07T14:12:07.737

如果这不能用泛型包装（@Martijn 的答案），最好在不强制转换的情况下传递它，以避免冗余列表迭代（检查第一个元素的类型不能保证什么）。我们可以在迭代列表的代码段中强制转换每个元素。

```
Object attVal = jsonMap.get("attName");
List<Object> ls = new ArrayList<>();
if (attVal instanceof List) {
    ls.addAll((List) attVal);
} else {
    ls.add(attVal);
}

// far, far away ;)
for (Object item : ls) {
    if (item instanceof String) {
        System.out.println(item);
    } else {
        throw new RuntimeException("Wrong class ("+item .getClass()+") of "+item );
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-15T02:27:00.400

如果您正在验证 Object 的 List 或 Map 值的引用是否是 Collection 的实例，只需创建所需 List 的实例并获取其类...

```
Set<Object> setOfIntegers = new HashSet(Arrays.asList(2, 4, 5));
assetThat(setOfIntegers).instanceOf(new ArrayList<Integer>().getClass());

Set<Object> setOfStrings = new HashSet(Arrays.asList("my", "name", "is"));
assetThat(setOfStrings).instanceOf(new ArrayList<String>().getClass()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-24T11:09:03.743

您可以使用假工厂来包含许多方法，而不是使用 instanceof：

```
public class Message1 implements YourInterface {
   List<YourObject1> list;
   Message1(List<YourObject1> l) {
       list = l;
   }
}

public class Message2 implements YourInterface {
   List<YourObject2> list;
   Message2(List<YourObject2> l) {
       list = l;
   }
}

public class FactoryMessage {
    public static List<YourInterface> getMessage(List<YourObject1> list) {
        return (List<YourInterface>) new Message1(list);
    }
    public static List<YourInterface> getMessage(List<YourObject2> list) {
        return (List<YourInterface>) new Message2(list);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-20T16:04:16.107

这里的主要问题是集合不保留定义中的类型。这些类型仅在运行时可用。我想出了一个测试复杂集合的函数（虽然它有一个约束）。

检查对象是否是泛型集合的实例。为了代表一个集合，

*   没有课，总是`false`
*   一个类，它不是一个集合并返回`instanceof`评估结果
*   为了表示`List`or `Set`，列表的类型紧随其后，例如**{List, Integer}**表示`List<Integer>`
*   为了表示 a `Map`，接下来是键和值类型，例如 {Map, String, Integer}`Map<String, Integer>`

可以使用相同的规则生成更复杂的用例。例如为了表示`List<Map<String, GenericRecord>>`，它可以被称为

```
 Map<String, Integer> map = new HashMap<>();
    map.put("S1", 1);
    map.put("S2", 2);
    List<Map<String, Integer> obj = new ArrayList<>();
    obj.add(map);
    isInstanceOfGenericCollection(obj, List.class, List.class, Map.class, String.class, GenericRecord.class); 
```

请注意，此实现不支持 Map 中的嵌套类型。因此，键和值的类型应该是类而不是集合。但是添加它应该不难。

```
 public static boolean isInstanceOfGenericCollection(Object object, Class<?>... classes) {
        if (classes.length == 0) return false;
        if (classes.length == 1) return classes[0].isInstance(object);
        if (classes[0].equals(List.class))
            return object instanceof List && ((List<?>) object).stream().allMatch(item -> isInstanceOfGenericCollection(item, Arrays.copyOfRange(classes, 1, classes.length)));
        if (classes[0].equals(Set.class))
            return object instanceof Set && ((Set<?>) object).stream().allMatch(item -> isInstanceOfGenericCollection(item, Arrays.copyOfRange(classes, 1, classes.length)));
        if (classes[0].equals(Map.class))
            return object instanceof Map &&
                    ((Map<?, ?>) object).keySet().stream().allMatch(classes[classes.length - 2]::isInstance) &&
                    ((Map<?, ?>) object).values().stream().allMatch(classes[classes.length - 1]::isInstance);
        return false;
    } 
```

# sql - Substring 函数的复杂使用

> ID：10108125
> 
> 赞同：0
> 
> 时间：2012-04-11T14:36:10.223
> 
> 标签：sql, substring, netezza

我有一个包含这样数据的字符串（带回车）

```
[GBAP_ABC       ] AAAAAAAAAAAAAAA
[GBAP_DEF       ] BBBBBBBBBBBBBBBBBBBBB 
```

我需要做一个子字符串并从数据中只检索 AAAAAAAAAAAAAAA 。你知道我怎么能提到回车吗？我尝试使用 a `SUBSTR(COLUMN,INSTR(COLUMN,'GBAP_ABC') + 20, INSTR(COLUMN,'[',INSTR(T.STRING,'GBAP_ABC') + 20 ,1) - 1)` 但问题是如果找不到下一个 '[' （即如果数据在最后一行），那么我的查询不起作用。因此，如果您能告诉我如何在我的字符串中提及回车，那将会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:39:51.233

您可以在末尾添加一个“[”（在您的表达式中，而不是在数据库中），以便始终找到一个。可能还需要添加回车。

# android - 是否有可能知道当前在android中使用的是哪个相机？

> ID：10108126
> 
> 赞同：0
> 
> 时间：2012-04-11T14:36:12.630
> 
> 标签：android

在我的应用程序中，我想知道摄像头应用程序是否打开以及摄像头的类型（前置摄像头或后置摄像头）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:47:41.923

[相机](http://developer.android.com/reference/android/hardware/Camera.html)类可能会解决您的问题。执行 getCameraInfo 获取信息，然后使用[CameraInfo](http://developer.android.com/reference/android/hardware/Camera.CameraInfo.html)。它有两个常数：

```
int CAMERA_FACING_BACK The facing of the camera is opposite to that of the screen.

int CAMERA_FACING_FRONT The facing of the camera is the same as that of the screen. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:52:42.470

检查

```
Camera.CameraInfo.CAMERA_FACING_BACK; 
```

或者

```
Camera.CameraInfo.CAMERA_FACING_FRONT; 
```

# codeigniter - Codeigniter character_limiter 和 strip_tags

> ID：10108128
> 
> 赞同：0
> 
> 时间：2012-04-11T14:36:17.397
> 
> 标签：codeigniter, strip-tags, character-limit

使用数据库显示带有 html 字符的文章：

$行->文章：

```
<div class="article">
As is usual also in Buenos Aires, is held in that city again the official Asterisk Advanced course with the new agenda <a href="http://www.google.com">google page</a>
</div> 
```

使用：character_limiter($row->article, 160) 短文本，但碰巧剪断了超链接，导致html代码出错，我用函数strip_tags()解决...但是显示如下：

```
<div class="article">
    As is usual also in Buenos Aires, is held in that city again the official Asterisk Advanced course with the new agendagoogle page...
    </div> 
```

如您所见，该函数删除了超链接标签，但也删除了周围的空格。

我读过这篇文章：[Problem using strip_tags in php](https://stackoverflow.com/questions/4482152/problem-using-strip-tags-in-php)

...但使用设置为 2 个文本元素的正则表达式。我想知道你是否可以使用类似但未定义标签的东西。我希望你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:52:24.677

你不应该有你在你的例子中显示的内容，因为你在`<a>`开始标签和字符串之间有一个空格。您链接到的这个问题只会在您的用户正在添加`<div>`或类似的情况下表现出来。诸如此类的东西`<b><a><u>`；当有人打字时会有自然的空间。

您需要执行以下操作：

```
echo character_limiter(strip_tags($row->article), 160); 
```

1.  首先剥离标签
2.  限制字符2。

不要担心奇怪的“空间”问题，如果他们没有在类似的东西之间留出空间，无论如何这将是人为错误的结果`the brown fox<a href="#">jumps over</a> the..`

HTML 的替代方法是也使用降价代码（您在 SO 上使用什么来输入问题/答案）。它很干净恕我直言。

# git - 将配置参数保存到存储库

> ID：10108135
> 
> 赞同：3
> 
> 时间：2012-04-11T14:36:34.727
> 
> 标签：git, ftp

我刚刚开始使用 git-ftp，它允许我将提交推送到 FTP 服务器。

FTP 凭据以这种方式存储在 .git/config 中：

```
[git-ftp]
    user = myusername
    url = ftp.myserver.com/httpdocs/
    password = mypass 
```

我想要的是，任何从我的 git 存储库克隆项目的人，也会自动获得上面的配置。

但是我怎样才能将这个 git 配置“推送”到我的仓库呢？

阅读有关 git-ftp 的更多信息：[https ://github.com/resmo/git-ftp](https://github.com/resmo/git-ftp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:53:06.213

[正如这个 SO answer](https://stackoverflow.com/a/6548056/11343)中所解释的那样，这是不可能的。Git 配置文件始终位于存储库本地，无法推送或获取。最好的解决方案是放置一个包含 git-ftp 参数的文件（**密码除外**），并在 README 中显示说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T01:24:10.730

我认为，一般来说，如果我们谈论的是普通的 Git，你可以专门使用一个特殊的 Git 分支来存储你的配置，比如`git-config`. 可能它将与您在此存储库中的所有其他历史记录断开连接。

并编写特殊程序将您当前的配置保存为该分支中的提交，并从那里检索配置。

然后，如果您将该分支推送到某个地方，并告诉他们使用您的保存和检索程序，他们就会拥有它。如果你也在某个地方克隆你的 repo，你的配置将在特殊分支的新 repo 中可用。您只需要使用脚本从那里检索它。

然后，您甚至可以将不同的配置与 Git 合并。

一些扩展 Git 的程序，如 git-annex 使用这种方法；它们的 per-repo 数据存储在一个特殊的分支中，因此可以由 Git 交换和合并。

（当然，通过 VCS 发布密码是个坏主意。）

# asp.net - 投影机果园 CMS 和小部件

> ID：10108136
> 
> 赞同：1
> 
> 时间：2012-04-11T14:36:34.697
> 
> 标签：asp.net, asp.net-mvc, orchardcms, projector

*I）*想象一下，我创建了一个投影仪，获取内容类型列表（在我的例子中是**Course**）并显示它。

创建新课程应满足3个条件：

1.  我想使用 jQuery AJAX 调用在此列表中添加新元素，包括客户端和服务器端的数据验证，以及在模型中重用数据注释的代码。

2.  在进行 AJAX 调用之前，会出现一个使用 jQuery UI 的弹出对话框，如下图所示： ![弹出创建新课程](../Images/16bedfa883acb6c1c64e1928cd4edf68.png)

3.  但我想在投影仪课程列表的左侧添加一个按钮，这个按钮会弹出一个带有表单的对话框，它会使用 AJAX 为这个投影仪创建一个新元素（如果有效）。

*II）*我们参与该*案例场景*的 3 个不同项目：

*   `Course`- 是我定义**课程内容类型**和部分视图 `CreateCourse.cshtml`文件的地方，您可以在其中找到 HTML 模板以使用 jQuery UI 对话框创建表单。

    在这个项目中，您还可以找到具有调用服务以创建新课程内容类型`CourseController`的操作的控制器。`CreateCourse`

*   `Orchard.Projections`- 是定义投影仪的地方。

*   `Orchard.Web`- 是定义主题的地方，在哪里我可以有这个投影的替代品，只需在其中添加一个**创建项目**按钮，引用`CreateCourse.cshtml`课程项目中的部分视图。

**问题：** 我相信我的大部分问题都是架构问题。

*第一个问题，有没有比II)*中解释的更好的方法。如果是，请告诉我。

考虑到*II)*是最好的方法：

我想知道女巫替代我应该`~\Orchard.Web\Themes\[Theme Name]\Views\[AlternateName].cshtml`在投影仪列表顶部添加按钮吗？

`~\Course/Views/Shared/CreateCourse.cshtml`是否可以从备用调用部分视图？

此致

# django - Django DetailView 模板显示所有字段的 get_FIELDNAME_display() 值

> ID：10108138
> 
> 赞同：0
> 
> 时间：2012-04-11T14:36:42.400
> 
> 标签：django, templates, django-templates, formatting, detailview

我制作了一个模板来显示模型中的所有字段和值，它看起来像这样：

```
## detail_template.html ##
<html>
<body>
{% for name, value in object.get_fields %}
    <p>
        <label>{% trans name %}:</label>
        <span>{{ value|default:"Not available" }}</span>
    </p>
{% endfor %}
</body>
<html> 
```

在类中，您可以看到声明的字段和函数：

```
## models.py ##
Class Object:
    GENDER_CHOICES = (
        ('M', 'Male'),
        ('F', 'Female'),
    )    

    name = models.CharField(verbose_name=u"Full name", max_length=200, blank=True, null=True)
    sex =   models.CharField(verbose_name=u"Sex", max_length=1, choices=GENDER_CHOICES)
    birthdate = models.DateField(verbose_name=u"Birth date", help_text="Format: DD/MM/AAAA", blank=True, null=True)
    status = models.IntegerField(verbose_name=u"Status", db_index=True, default=1)
    #...tons of other fields...

    def get_status_display(self):
        if self.status == 1:
            return "Active"
        else if self.status == 0:
            return "Inactive"
        else:
            return "Dead"

    def get_birthdate_display(self):
        return self.birthdate.strftime("%d/%m/%Y")

    def get_fields(self):
        return [(field.verbose_name, self._get_FIELD_display(field)) for field in self.__class__._meta.fields] 
```

*已经显示的是：
全名：不可用（因为我将其留空）
性别：男（而不是 M）
**出生日期：2012 年 4 月 10 日（不是 get_birthdate_display 返回的格式）
状态：3（不是字符串在 get_status_display 中返回）**

*我要显示的是：
全名：不可用（因为我将其留空）
性别：男（而不是 M）
**出生日期：20/10/1952（格式在 get_birthdate_display 中）
状态：死（在 get_status_display 中返回的字符串）**

所以我想在有 get_FIELDNAME_display 时获取 get_FIELDNAME_display 而无需手动执行以下操作：

```
<p>
    <label>{% trans 'Full name' %}:</label>
    <span>{{ object.name|default:"Not available" }}</span>
</p>    
<p>
    <label>{% trans 'Sex' %}:</label>
    <span>{{ object.get_sex_display|default:"Not available" }}</span>
</p>
<p>
    <label>{% trans 'Birth Date' %}:</label>
    <span>{{ object.get_birthdate_display|default:"Not available" }}</span>
</p>
<p>
    <label>{% trans 'Status' %}:</label>
    <span>{{ object.get_status_display|default:"Not available" }}</span>
</p> 
```

我很感激任何帮助！Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:24:06.063

不是特别漂亮，但您可以将`get_fields`模型中的方法更改为：

```
def get_fields(self):
    pairs = []
    for field in self._meta.fields:
        name = field.name
        try:
            pairs.append((name, getattr(self, "get_%s_display" % name)()))
        except AttributeError:
            pairs.append((name, getattr(self, name)))
    return pairs 
```

# iphone - iPhone：在 applicationWillEnterForeground 上刷新 UIViewController

> ID：10108142
> 
> 赞同：0
> 
> 时间：2012-04-11T14:36:50.330
> 
> 标签：iphone

我的问题与[applicationWillEnterForeground: reload Data from ViewController](https://stackoverflow.com/q/4919950/602011)有关。我想在应用程序进入前台时重新加载视图。但我有很多意见。如何知道要重新加载哪个视图？因为我不想重新加载 applicationWillEnterForeground: 方法中的所有视图。

# windows-phone-7 - Windows phone 7 - 无法在锁定屏幕下播放音频

> ID：10108145
> 
> 赞同：0
> 
> 时间：2012-04-11T14:36:56.990
> 
> 标签：windows-phone-7, video-streaming, mediaelement, lockscreen

我正在为 windows phone 7 开发一个应用程序。有一个媒体元素可以从 url 播放视频。当我锁定手机时，音频和视频停止播放。我已经尝试禁用 ApplicationIdleDetetction 并且我已经处理了 Rootframe Obscured 和 Unobscured。我只是不知道如何在手机锁定时继续播放音频。

非常感谢您对此的任何帮助！

谢谢格雷厄姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:42:46.333

即使手机被锁定，也可以使用[AudioPlayerAgent保持音乐播放！](http://msdn.microsoft.com/en-us/library/microsoft.phone.backgroundaudio.audioplayeragent%28v=vs.92%29.aspx)

[检查Windows Phone 代码示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)上的“背景音频播放器示例” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:14:09.200

屏幕锁定时视频将自动停止播放 - 这是系统内置功能。将其视为通过在后台播放视频会耗尽设备电池电量的应用程序的故障保护，无论如何这是一项不必要的任务 - 谁观看内容？`ApplicationIdleDetection`根本不会帮助完成这项任务。

如果您有单独的音频流，则可以使用[AudioPlayerAgent](http://msdn.microsoft.com/en-us/library/microsoft.phone.backgroundaudio.audioplayeragent%28v=vs.92%29.aspx)，它可用于播放本地和远程音频流。

读这个：

*   [Windows Phone 的背景音频概述](http://msdn.microsoft.com/en-us/library/hh394039%28v=vs.92%29.aspx)

*   [如何：播放 Windows Phone 的背景音频](http://msdn.microsoft.com/en-us/library/hh202978%28v=vs.92%29.aspx)

*   [在 Windows Phone 中流式传输音频](http://msdn.microsoft.com/en-us/magazine/hh852599.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T22:45:27.330

您可以使用调度程序计时器来执行此操作。这是我如何在我的应用程序 Searchler 中执行此操作的示例（此功能尚未在市场中，更新即将推出！）使用可用的 MMP 播放器框架@http: [//smf.codeplex.com/](http://smf.codeplex.com/)

```
namespace Searchler.Views
{
    public partial class PlayerView : PhoneApplicationPage
    {
        bool appUnderLock = false;
        DispatcherTimer dispatcherTimer = new DispatcherTimer();
    }

     public PlayerView()
    {

        InitializeComponent();

        //Hack to enable play under lock screen
        UIThread.Invoke(() => VideoPlayer.PlayStateChanged += VideoPlayer_PlayStateChanged);
        UIThread.Invoke(() => (Application.Current as App).RootFrame.Obscured += RootFrame_Obscured);
        UIThread.Invoke(() => (Application.Current as App).RootFrame.Unobscured += RootFrame_Unobscured);
        dispatcherTimer.Tick += dispatcherTimer_Tick;
        dispatcherTimer.Interval = new TimeSpan(0, 0, 3); 
    }

    void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        if( VideoPlayer.PlaybackPosition == VideoPlayer.EndPosition)
            ((PlayerViewModel)DataContext).Next();  //Custom GetNext Video Method
    }

    void RootFrame_Unobscured(object sender, EventArgs e)
    {
        dispatcherTimer.Stop();
        appUnderLock = false;
    }

    void RootFrame_Obscured(object sender, ObscuredEventArgs e)
    {
        dispatcherTimer.Start();
        appUnderLock = true;
    }
} 
```

# c++ - 不是优先级队列的已排序容器

> ID：10108146
> 
> 赞同：1
> 
> 时间：2012-04-11T14:36:58.333
> 
> 标签：c++, priority-queue

我们需要一个容器，在添加新元素时保持其元素按元素的优先级排序，它能够检索给定 id 的元素。

（优先级队列的问题在于它不能让您根据 id 而不是优先级来检索元素）

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T14:43:31.217

[boost 多索引容器](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/index.html)使您能够获得优先级排序视图和 ID 排序视图。

一个小例子：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/member.hpp>
#include <iostream>
#include <vector>
#include <cstddef>
#include <iterator>

struct elem {
  std::size_t id;
  int priority;
};

int main()
{
  using namespace boost::multi_index;

  typedef multi_index_container<
  elem,
  indexed_by<
    ordered_unique<member<elem,std::size_t,&elem::id> >,
    ordered_non_unique<member<elem,int,&elem::priority> >
    >
  > elem_container;

  // just for show
  std::vector<elem> elems = 
    {{0, 25}, 
     {1, 10}, 
     {2, 100}, 
     {3, 6}
    };
  elem_container elemc(begin(elems), end(elems));
  // by id
  std::cout << "By ID: " << std::endl;
  for(auto& x : elemc.get<0>()) { 
    std::cout << "id: " << x.id << "priority: " << x.priority << std::endl;
  }

  // by priority
  std::cout << "By Priority: " << std::endl;
  for(auto& x : elemc.get<1>()) { 
    std::cout << "id: " << x.id << "priority: " << x.priority << std::endl;
  }
  return 0;
} 
```

# c++ - 有没有办法在 wxWidgets 2.8+ 中保存窗口大小信息

> ID：10108155
> 
> 赞同：2
> 
> 时间：2012-04-11T14:37:22.107
> 
> 标签：c++, wxwidgets

我知道有一种方法可以在 Windows 中保存窗口放置结构，但我想知道是否有另一种方法可以用于跨平台 wxWidgets 应用程序。

此外，在没有平台特定代码的情况下序列化这些数据的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:25:10.373

因此，如果您只想存储窗口的大小和位置，则处理窗口大小调整和移动事件，以便它们将这些数据存储在 wxConfig 中。

[http://docs.wxwidgets.org/2.9.3/overview_config.html](http://docs.wxwidgets.org/2.9.3/overview_config.html)

# c# - Aspx 代码块与 runat 服务器

> ID：10108156
> 
> 赞同：1
> 
> 时间：2012-04-11T14:37:29.237
> 
> 标签：c#, asp.net

我正在学习一些 aspx 并有一个问题。我有以下示例代码：

```
<%@ Page Language="C#" %>
<html>
<body>
    <form id="form1" runat="server">
       Current server time is <% =GetTime()%>.
    </form>
</body>
</html> 
```

现在我不明白的是，如果表单已经在服务器上运行，为什么我们又需要 <% %> 代码块？也许我不理解代码块和页面上服务器上运行的整体之间的区别。谁能澄清我对这里发生的事情的误解？我只是不太了解 aspx 页面的服务器端与客户端术语。

我也看过这样的代码：

```
<script language="VB" runat="server">
Dim ....

Public Sub PageLoad()
...
Response.Write("Hello")
End Sub
</script>

<% If dataExists(whatever) Then %>
HelloWorld 
```

现在为什么不能消除上面的代码块？我的意思是在服务器标签中，该代码已经在服务器端运行并发出一些写入请求。然后你有代码块正在做一些逻辑检查以再次编写。为什么要把这些分开？他们不是相同的功能还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:01:11.330

让我们从头说清楚。您不是在学习***aspx***，除非您想了解此文件扩展名，否则您正在学习**ASP .Net**和更具体的**ASP .Net Web Forms**。

来自 Web 窗体的标记（aspx 文件中的代码）由 ASP .Net 解析，然后将生成一个类，稍后将使用该类来实际创建 HTML。

此标记可以包含纯 html、服务器控件（`<asp:Label />`等）、代码块、DataBinding 表达式、资源表达式[等等](http://msdn.microsoft.com/en-us/library/fy30at8h%28v=vs.71%29.aspx)。

所有这些都只是解析以获得生成的类。生成的类将包含或多或少的指令，供作者编写一些字符串（如果需要，可以使用 html）。

可能您已经看过[这个示例](http://msdn.microsoft.com/en-us/library/ms178135%28v=vs.80%29.aspx)，现在您可以发现这是某种语法糖。

```
 <% { Response.Write(DateTime.Now.ToString()); }%> 
```

对比

```
 <%= DateTime.Now.ToString() %> 
```

它产生相同的东西，但以两种不同的方式编写。该语法只是被解析。

服务器代码和客户端代码之间只有一个区别：服务器代码运行在服务器上，客户端代码运行在客户端。该客户端代码由（或可能）由服务器生成，因此客户端可以在其一侧运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:40:40.817

`<% ... %>`块表示框架代码（在此示例中为 C#），而文档的其余部分是纯 HTML。
所以块用于区分代码和简单标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:40:48.690

当您添加`runat="server"`到 html 元素时，它会将其转换为服务器端对象。这意味着在 Designer 文件`HtmlForm`中创建了一个实例。不包括标签内的内容，除非有其他服务器端控件将添加到控件树中。在标签内，您将重新编写普通的 Html，直到您为 .Net 添加其他内容以供注意，`<% =GetTime()%>`例如。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:40:50.873

代码块只是让处理引擎知道要执行页面的哪些部分（如果不这样做，就很难分辨页面的哪些部分是代码，哪些部分是简单的标记）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:41:04.883

代码块是从 C# 代码中描述严格的 HTML 的方式。

如果你写

```
<form id="form1" runat="server">
    Current server time is GetTime().
</form> 
```

然后你会得到逐字的文本。只有当您添加代码块时，解析器才会理解为 HTML 的特定部分切换到 C# 代码。

而不是重写一个已经很好的答案：[Here is the SO question as what the runat server is for](https://stackoverflow.com/questions/304290/why-does-asp-net-webforms-need-the-runat-server-attribute)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T14:45:10.843

简而言之，浏览器从您的服务器请求页面，然后 ASP.NET 处理任何可执行代码，即`<% ... %>`块内的任何代码，然后将结果发送回浏览器。

另一种看待它的方式是，您想要在服务器端运行的任何代码都应该在`<% ... %>`块内，其他一切都是客户端。

# entity-framework - 实体框架代码优先：使用注释设置一对一的外键关联

> ID：10108160
> 
> 赞同：15
> 
> 时间：2012-04-11T14:37:57.787
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

我有以下两个我试图使用外键关联关联（一对一）的实体。

```
public class StandardRack {
    public int Id {get;set}
    public StandardRelay StandardRelay {get;set} 
}

public class StandardRelay {
    public int Id {get;set} 

    public int StandardRack_Id {get;set;}
    [Required][ForeignKey("StandardRack_Id")]
    public StandardRack StandardRack { get; set; }
} 
```

这会引发 ModelValidationException。为什么无法配置这种看似简单的一对一双向关系的任何想法。

**编辑：**

这是例外：

> 捕获 System.Data.Entity.ModelConfiguration.ModelValidationException 消息=在模型生成期间检测到一个或多个验证错误：
> 
> System.Data.Edm.EdmAssociationEnd: : 多重性在关系“StandardRelay_StandardRack”中的角色“StandardRelay_StandardRack_Source”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是“*”。
> 
> Source=EntityFramework StackTrace：在 System.Data.Entity.ModelConfiguration.Edm.EdmModelExtensions.ValidateCsdl(EdmModel model, XmlWriter writer) 在 System.Data.Entity.Edm.EdmModelExtensions.ValidateAndSerializeCsdl(EdmModel model) .DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo) 在 System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) 在 System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) 在 System.Data.Entity.Internal。 RetryLazy `2.GetValue(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeContext() at System.Data.Entity.Internal.InternalContext.Initialize() at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() 在 System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator() at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator() 在 System.Collections.Generic.List `1..ctor(IEnumerable`1 集合) 在 System.Linq.Enumerable.ToList[TSource](IEnumerable`1 源) 在 TestApplication.MainWindow.Window_Loaded(Object sender , RoutedEventArgs e) 在 D:\RailwayProjects\RelayAnalysis\TestApplication\MainWindow.xaml.cs:line 33 InnerException:

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-11T14:58:25.310

Entity Framework 不支持一对一的外键关联。您必须删除外键并使用共享主键（依赖的主键同时是其对主体的外键）：

```
public class StandardRack {
    public int Id {get;set}
    public StandardRelay StandardRelay {get;set} 
}

public class StandardRelay {
    public int Id {get;set} 
    public StandardRack StandardRack { get; set; }
} 
```

Fluent API 中的映射：

```
modelBuilder.Entity<StandardRack>()
    .HasOptional(rack => rack.StandardRelay)
    .WithRequired(relay => relay.StandardRack); 
```

（我在这里假设 a`StandardRack`有一个可选的中继。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-14T06:53:51.463

Here is how you can specify one-to-one relationship with FK using fluent api.

Note that FK is not explicitly defined in Enitity, but it's defined using fluent api.

```
public class StandardRack {
    public int Id {get;set}
    public StandardRelay StandardRelay {get;set} 
}

public class StandardRelay {
    public int Id {get;set} 
    public StandardRack StandardRack { get; set; }
}

modelBuilder.Entity<StandardRack>()
            .HasOptional(x => x.StandardRelay)
            .WithOptionalPrincipal(y => y.StandardRack)
            .Map(configurationAction: new Action<ForeignKeyAssociationMappingConfiguration>(x => x.MapKey("StandardRack_Id"))); 
```

fluent api will add column `StandardRack_Id` in `StandardRelay`.

Note that method name [WithOptionalPrincipal](https://msdn.microsoft.com/en-us/library/gg679449(v=vs.113).aspx)() is quite ironic. msdn documentation of [WithOptionalDependent](https://msdn.microsoft.com/en-us/library/gg679496(v=vs.113).aspx) shall make it clear.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T15:02:14.577

我认为foreignKey应该是Id，而不是StandardRack_id。此外，您应该使用虚拟，以便能够使用延迟加载。

This works for me

```
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;

namespace Racks
{

    public class StandardRack
    {
        public int Id { get; set; }
        public virtual StandardRelay StandardRelay { get; set; }
    }

    public class StandardRelay
    {
        public int Id { get; set; }

        public int StandardRack_Id { get; set; }

        [ForeignKey("Id")]
        [Required]
        public virtual StandardRack StandardRack { get; set; }
    }

    public class Context : DbContext
    {
        static Context()
        {
            Database.SetInitializer<Context>(null);
        }

        public DbSet<StandardRack> StandardRacks { get; set; }
        public DbSet<StandardRelay> StandardRelays { get; set; }

    }

    class Program
    {
        static void Main(string[] args)
        {
            var context = new Context();
            context.Database.Delete();
            context.Database.Create();

            var standardRack = new StandardRack();
            standardRack.StandardRelay = new StandardRelay();

            context.StandardRacks.Add(standardRack);
            context.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-20T07:59:02.007

You might want to adapt the annotation of ID in StandardRelay. Also see this related question:

[What does principal end of an association means in 1:1 relationship in Entity framework](https://stackoverflow.com/questions/6531671/what-does-principal-end-of-an-association-means-in-11-relationship-in-entity-fr)

```
public class Foo
{
    public string FooId{get;set;}
    public Boo Boo{get;set;}
}

public class Boo
{
    [Key, ForeignKey("Foo")]
    public string BooId{get;set;}
    public Foo Foo{get;set;}
} 
```

# php - 一个困扰我的简单正则表达式

> ID：10108164
> 
> 赞同：1
> 
> 时间：2012-04-11T14:38:06.147
> 
> 标签：php, regex

我有以下文字：

```
<!--:en-->&nbsp;

<!--:--> 
```

我想构造一个模式来从字符串（PHP）中提取它。我尝试：

```
<!--:[a-z]{2}-->(&nbsp;\r\n\s)<!--:--> 
```

但它不起作用，有人知道为什么或可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:40:02.857

[您可能不想使用正则表达式来解析 XML/HTML。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

这有很多[原因](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)。

相反，您通常更愿意使用[为该特定任务制作的工具进行](http://php.net/manual/en/book.dom.php)解析。

* * *

无论如何，您在这里需要的更像是：

```
(&nbsp;|\s)* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:42:42.120

您需要转义特殊字符，例如连字符。尝试这个：

```
/<\!\-{2}\:[a-z]{2}\-\->((&nbsp;|\s)*)<\!\-{2}\:\-{2}>/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:20:58.937

如果我正确理解了你的问题，你必须匹配*整个*文本，包括评论。

所以，严格来说你的具体问题，我会使用类似的东西：

```
$s = "<!--:en-->&nbsp; 

<!--:-->";

$a = array();
preg_match('/<!--:[a-z]{2}-->&nbsp;\\s+<!--:-->/', $s, $a);

for ($i = 0; $i < count($a); $i++) {
  var_dump(htmlentities($a[$i]));
} 
```

一般来说，我不会质疑你是否应该使用正则表达式解析 HTML，但是请注意，当 Colin 说用正则表达式实际解析 HTML 可能*非常*困难（读作“几乎不可能”）时，他是对的，因为他表示状态的帖子。

# android - OrmLite Android，将foreignAutoRefresh设置为true会导致join（self join）查询？

> ID：10108166
> 
> 赞同：1
> 
> 时间：2012-04-11T14:38:08.987
> 
> 标签：android, ormlite

在Android下使用ORMLite，当你设置`foreignAutoRefresh`为true时，这会导致连接查询还是ORMLite一个接一个地发出两个查询——“主查询”并调用外部对象`dao.refresh`？我的意思是这是一个依赖子查询还是发送了两个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:42:07.347

引用[javadocs中的](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/DatabaseField.html#foreignAutoRefresh%28%29)[ORMLite](http://ormlite.com/)文档：[`foreignAutoRefresh`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/DatabaseField.html#foreignAutoRefresh%28%29)

> 将此设置为 true（默认为 false）以在查询对象时自动刷新外部字段。这*不会*自动创建外来对象，但是当查询对象时，将进行**单独的数据库调用**以通过内部 DAO 加载外来对象的字段。默认设置是只检索对象中的 ID 字段，并让调用者在正确的 DAO 上调用刷新。

粗体字是我的。ORMLite 此时不执行任何 JOIN，但会针对任何自动刷新和其他操作发出单独的数据库查询。

# git - 具有严格权限的 git-svn

> ID：10108169
> 
> 赞同：1
> 
> 时间：2012-04-11T14:38:21.793
> 
> 标签：git, git-svn

我正在开发一个我无法控制的 svn 存储库。它使用具有非常严格权限的标准布局。

我没有读取父文件夹的权限。

```
svn://foo.bar/project/
svn://foo.bar/project/branches 
```

但我可以阅读`svn://foo.bar/project/trunk`和`svn://foo.bar/project/branches/x`。

如果我在 git-svn 中使用多个遥控器，我可以获取并提交这些分支。但是 git-svn 不会找到分支的父级。多个遥控器将被视为不同的存储库。

看来我可以修改 git-svn 以更正后续父源。但我不知道perl。是否可以编写脚本修复分支的父哈希。或者我可以使用一个简单的脚本来创建新的远程分支，然后让 git-svn 来获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:03:19.640

I wrote a simple dirty shell script to init the new branch.It will create the first commit for the svn branch. After that the `git-svn fetch --all` will work.

```
#!/bin/bash

branch=$1
prefix=svn-remote.svn-$branch
rooturl=svn://example.com
branchurl=$rooturl/foo/branches
git config $prefix.ignore-paths "^exclude"
git config $prefix.url $branchurl/$branch
git config $prefix.fetch :refs/remotes/$branch

logentry=$(svn log -v -r0:HEAD --stop-on-copy -l 1 --xml $branchurl/$branch)
torev=$(echo "$logentry" |grep revision |grep -o [0-9]*)
fromrev=$(echo "$logentry" |grep copyfrom-rev |grep -o [0-9]*)
frompath=$(echo "$logentry" |grep copyfrom-path | sed -E 's/\s*copyfrom-path="(.*)"/\1/')
author=$(echo "$logentry" |grep "<author>" |sed -E 's#</?author>##g')
author_date=$(echo "$logentry" |grep "<date>" |sed -E 's#</?date>##g')

if [ -z $torev ];then
    exit 1;
fi

if [ -z $fromrev ];then
    exit 2;
fi

if [ -z $frompath ];then
    exit 3;
fi

fromurl=$rooturl$frompath@$fromrev
tourl=$branchurl/$branch@$torev
frombranch=$(basename $frompath )
echo $fromurl
echo $tourl
echo $fromrev
parent=$(git svn log -r $fromrev $frombranch --oneline --show-commit |grep $fromrev |awk '{print $3}')
if [ -z $parent ];then
    exit 4;
fi
uuid=$(git log -1 |grep git-svn-id: | awk '{print $NF}')
tree=$(git cat-file commit $parent |head -1 |cut  -d ' ' -f 2)
echo tree $tree
echo parent $parent
echo uuid $uuid

head=$(GIT_AUTHOR_NAME=$author GIT_AUTHOR_EMAIL=$author@$uuid GIT_AUTHOR_DATE=$author_date git commit-tree $tree -p $parent <<EOF
$logentry

git-svn-id: $tourl $uuid 
EOF
)
echo $head
git update-ref refs/remotes/$branch $head 
```

# node.js - Node.js 重用 MongoDB 参考

> ID：10108170
> 
> 赞同：15
> 
> 时间：2012-04-11T14:38:23.403
> 
> 标签：node.js, mongodb

我无法理解 node.js。

例如，MongoDB 访问，这是我所拥有的（mydb.js）：

```
var mongodb = require('mongodb'),
    server = new mongodb.Server('staff.mongohq.com', 10030, {
        auto_reconnect: true
    }),
    db = new mongodb.Db('mydb', server);

function authenticateAndGo(db, handle) {
    db.authenticate('username', 'password', function(err) {
        if (err) {
            console.log(err);
            return;
        }
        console.log('Database user authenticated');

        var collection = new mongodb.Collection(db, 'test');

        handle(collection);
    });
}

function query(handle) {
    db.open(function(err, db) {
        if( err ) {
            console.log(err);
            return;
        }
        console.log('Database connected');

        authenticateAndGo(db, handle);
    });
};
exports.query = query; 
```

所以，如果我以后想使用它，我会

```
var mydb = require('./mydb');
mydb.query(function(collection) {
    collection.find({}, {
        limit: 10
    }).toArray(function(err, docs) {
        console.log(docs);
    });
}); 
```

但是，如果我打多个电话，像这样：

```
var mydb = require('./mydb');
mydb.query(function(collection) {
    collection.find({}, {
        limit: 10
    }).toArray(function(err, docs) {
        console.log(docs);
    });
});
mydb.query(function(collection) {
    collection.find({}, {
        limit: 10
    }).toArray(function(err, docs) {
        console.log(docs);
    });
}); 
```

我得到一个例外：

```
Error: db object already connecting, open cannot be called multiple times 
```

我认为对于这一切，我确实有一些基本的东西我不明白，而且这个问题很可能是愚蠢的......

无论如何，欢迎所有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T14:47:38.130

`mydb.js`：

```
var mongodb= require('mongodb'),
  server = new mongodb.Server('staff.mongohq.com', 10030, {
    auto_reconnect: true
  }),
  db1 = new mongodb.Db('mydb', server);

// callback: (err, db)
function openDatabase(callback) {
  db1.open(function(err, db) {
    if (err)
      return callback(err);

    console.log('Database connected');

    return callback(null, db);
  });
}

// callback: (err, collection)
function authenticate(db, username, password, callback) {
  db.authenticate(username, password, function(err, result) {
    if (err) {
      return callback (err);
    }
    if (result) {
      var collection = new mongodb.Collection(db, 'test');

      // always, ALWAYS return the error object as the first argument of a callback
      return callback(null, collection);
    } else {
      return callback (new Error('authentication failed'));
    }
  });
}

exports.openDatabase = openDatabase;
exports.authenticate = authenticate; 
```

`use.js`：

```
var mydb = require('./mydb');
// open the database once
mydb.openDatabase(function(err, db) {
  if (err) {
    console.log('ERROR CONNECTING TO DATABASE');
    console.log(err);
    process.exit(1);
  }

  // authenticate once after you opened the database. What's the point of 
  // authenticating on-demand (for each query)?
  mydb.authenticate(db, 'usernsame', 'password', function(err, collection) {
    if (err) {
      console.log('ERROR AUTHENTICATING');
      console.log(err);
      process.exit(1);
    }

    // use the returned collection as many times as you like INSIDE THE CALLBACK
    collection.find({}, {limit: 10})
    .toArray(function(err, docs) {
      console.log('\n------ 1 ------');
      console.log(docs);
    });

    collection.find({}, {limit: 10})
    .toArray(function(err, docs) {
      console.log('\n------ 2 ------');
      console.log(docs);
    });
  });
}); 
```

## 结果：

**成功：**

> ```
>  Database connected
>  Database user authenticated
> 
> ------ 1 ------
> [ { _id: 4f86889079a120bf04e48550, asd: 'asd' } ]
> 
> ------ 2 ------
> [ { _id: 4f86889079a120bf04e48550, asd: 'asd' } ] 
> ```

**失败时：**

> ```
> Database connected
> { [MongoError: auth fails] name: 'MongoError', errmsg: 'auth fails', ok: 0 } 
> ```

* * *

*【原答案】：*

您打开了`db`多次（每次打开一次`query`）。您应该只打开一次数据库，并`db`在回调中使用该对象以供以后使用。

您多次使用相同的变量名，这可能会引起一些混乱。

```
var mongodb = require('mongodb'),
    server = new mongodb.Server('staff.mongohq.com', 10030, {
        auto_reconnect: true
    }),
    db1 = new mongodb.Db('mydb', server);

function authenticateAndGo(db, handle) {
    db.authenticate('username', 'password', function(err) {
        if (err) {
            console.log(err);
            return;
        }
        console.log('Database user authenticated');

        var collection = new mongodb.Collection(db, 'test');

        handle(collection);
    });
}

function query(handle) {
    db1.open(function(err, db2) {
        if( err ) {
            console.log(err);
            return;
        }
        console.log('Database connected');

        authenticateAndGo(db2, handle);
    });
};
exports.query = query; 
```

我对上面的代码做了一些改动（`db1`对于原始数据库，`db2`对于*打开*的数据库）。如您所见，您打开`db1`了多次，这并不好。提取代码以打开另一种方法并使用它一次并将`db2`实例用于所有查询/更新/删除/...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T17:40:45.853

您只能调用一次“打开”。当 open 回调触发时，您可以对它返回的 DB 对象进行查询。因此，处理此问题的一种方法是将请求排队，直到打开完成。例如 MyMongo.js

```
var mongodb = require('mongodb');

function MyMongo(host, port, dbname) {
    this.host = host;
    this.port = port;
    this.dbname = dbname;

    this.server = new mongodb.Server(
                              'localhost', 
                              9000, 
                              {auto_reconnect: true});
    this.db_connector = new mongodb.Db(this.dbname, this.server);

    var self = this;

    this.db = undefined;
    this.queue = [];

    this.db_connector.open(function(err, db) {
            if( err ) {
                console.log(err);
                return;
        }
        self.db = db;
        for (var i = 0; i < self.queue.length; i++) {
            var collection = new mongodb.Collection(
                                 self.db, self.queue[i].cn);
            self.queue[i].cb(collection);
        }
        self.queue = [];

    });
}
exports.MyMongo = MyMongo;

MyMongo.prototype.query = function(collectionName, callback) {
    if (this.db != undefined) {
        var collection = new mongodb.Collection(this.db, collectionName);
        callback(collection);
        return;
    }
    this.queue.push({ "cn" : collectionName, "cb" : callback});
} 
```

然后是一个示例使用：

```
var MyMongo = require('./MyMongo.js').MyMongo;

var db = new MyMongo('localhost', 9000, 'db1');
var COL = 'col';

db.query(COL, function(collection) {
    collection.find({}, {
        limit: 10
    }).toArray(function(err, docs) {
        console.log("First:\n", docs);
    });
});

db.query(COL, function(collection) {
    collection.find({}, {
        limit: 10
    }).toArray(function(err, docs) {
        console.log("\nSecond:\n", docs);
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:10:53.930

我只是在 db init 之后直接调用 open 函数一次：

```
var mongodb = require('mongodb');
var server = new mongodb.Server('foo', 3000, {auto_reconnect: true});
var db = new mongodb.Db('mydb', server);   
db.open(function(){}); 
```

之后我不必再关心这个了，因为 auto_reconnect 是真的。

```
db.collection('bar', function(err, collection) { [...] }; 
```

# petapoco - 将 PetaPoco 属性添加到 POCO 是否有任何负面影响？

> ID：10108171
> 
> 赞同：2
> 
> 时间：2012-04-11T14:38:27.770
> 
> 标签：petapoco

我们当前的应用程序使用智能对象样式来处理数据库。我们正在研究改用 PetaPoco 的可行性。查看我注意到的功能，您可以添加属性以使 CRUD 对象更容易。添加这些属性是否有任何我应该注意的负面影响？

有没有人找到不使用这些装饰器的理由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:33:53.657

一个缺点是它打破了“域”层和“数据”层之间的分离，因为它将 PetaPoco 文件（其中包含数据逻辑）引入了实际上不应该对数据层有任何知识或依赖性的域类。

如果你正在做一个单一项目的 MVC 应用程序或其他东西，那么两者都使用 Models 目录是可以的，但对于非平凡和分离的应用程序，你必须有两个 PetaPoco 文件或玩弄抽象的部分文件以便注释您的模型而不会让它们“了解太多”基础数据，或者让您在整个地方指定表和/或主键名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:07:42.017

直接使用POCO对象实例本身？**没有任何。**

至少我不会意识到。Jon Skeet 应该能够提供更多信息，因为他完全了解编译器的内部工作原理，因此他确切地知道此元数据在编译后会发生什么。

## 与这些间接相关的其他影响

访问这些声明性属性时当然会有影响，因为它们是使用反射读取的，这通常是一个缓慢的过程。

但是这里没有什么好担心的，因为 PetaPoco 是一个智能库，并且只读取一次然后编译和缓存这些东西，所以你只会受到一次惩罚，然后你就会获得惊人的性能。因为它使用编译后的代码。

### 与绩效无关的影响

通过将属性（任何）放在您的类/属性/方法上，您以某种方式将您的代码绑定到将使用此类的特定引擎，因为它们是该特定引擎理解您的代码的指令。

对于 PetaPoco 属性，这意味着您的类可以与 PetaPoco 一起使用，但不能与其他一些 DAL（即 EF）一起使用，除非您也添加该类的属性（EF Code First 使用与属性完全相同的方法）。

第二个含义与后端数据库有关。如果您将 PetaPoco 属性中提供的表、列或任何其他部分重命名为常量*魔术*字符串，您随后也必须更改此字符串。这只是意味着您在进行数据库更改时必须彻底......

# asp.net - 将日期对象绑定到 GridView 标签（DateStringFormat）时获取星期几

> ID：10108172
> 
> 赞同：0
> 
> 时间：2012-04-11T14:38:28.003
> 
> 标签：asp.net

我想从绑定到 gridview 标签的 Date 对象中获取星期几，如下所示：

```
<asp:Label ID="ResourceAvailabilityDayLabel" runat="server" Text='<%# Bind("Date", "{0:d}") %>'></asp:Label> 
```

如果日期是 11-4-2012，{0:d} 仅显示日期，它将发布 11。有没有办法在绑定期间完成此操作？我找不到正确的 DateStringFormat。

编辑

{0:dddd} 解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:43:18.043

要获取星期几使用`ddd`或`dddd` [格式说明符](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)：

```
<asp:Label ID="ResourceAvailabilityDayLabel" runat="server" Text='<%# Bind("Date", "{0:dddd}") %>'></asp:Label> 
```

# java - 缩放组件 java

> ID：10108175
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:38:31.327
> 
> 标签：java, scale, graphics2d

当我将比例设置为 (1.2,1.2) 时，组件会缩放 1.2 .. 但我需要从中心缩放它.. 就像从中心放大一样。如何实现这一点。我知道我必须翻译它，但要翻译多少？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:44:22.440

您总是必须将对象平移到它们的一半大小才能到达它们的中心。因此，如果您将对象缩放 1.2，那么您也有效地将偏移量缩放 1.2。

因此，您可以轻松地执行以下操作（在伪代码中）：

```
obj.x += obj.width * scalingfactor / 2
obj.scaleX = scalingfactor
obj.y += obj.height * scalingfactor / 2
obj.scaleY = scalingfactor 
```

# asp.net-mvc - 我如何映射两列并将其存储在带有 EF 的临时表 MVC3 应用程序中？

> ID：10108179
> 
> 赞同：0
> 
> 时间：2012-04-11T14:38:51.850
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我创建了一个 MVC3 应用程序。我从两个不同的表中选择两个 Id，我需要映射它们并需要临时保存在某个地方并希望在最后显示。

`I have taken two dropdownlist each one populated from one-one table. then i need to select one id from one and other from 2nd table when i clicked on map button it should have to create one temp table will show me two (values)columns what i have mapped just. how can i create temp table? using EF.`

`table1`

`SELECT PriceID FROM Pricing`

```
PriceID
P111
P222
P333 
```

`table2`

`SELECT QueryID FROM QueryTable`

```
QueryID
Q565UUU
Q661YAA
Q421933 
```

现在我不知道如何向他们展示从每个 ID 中选择一个 ID 以将它们映射在一起有任何帮助吗？

映射数据集或任何临时表将有两列

```
 PriceID  QueryID
  P111    Q565UUU 
```

我是 MVC3 的新手，我应该用什么来显示单列？

请帮助需要创建 UI，以便可以轻松地从每个表中选择 SecurityID 和 CUSIP 并相互映射。

我应该用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:55:21.293

创建一个新模型并用您的数据填充它，然后在您的视图中使用该模型：

```
namespace yourProject.ViewModels 
{ 
    public class PriceQueryGroup 
    { 
        public string PriceID { get; set; }      
        public string QueryID { get; set; } 
    } 
} 
```

在你看来：

```
@model IEnumerable<yourProject.ViewModels.PriceQueryGroup> 
```

我希望我已经正确理解了您的问题，并且这会有所帮助。

# javascript - 在添加到主屏幕之前“预加载”apple-touch-precomposed-icon？

> ID：10108180
> 
> 赞同：3
> 
> 时间：2012-04-11T14:38:53.127
> 
> 标签：javascript, html, css, ios, mobile-safari

有没有办法“预加载”apple-touch-precomposed-icon，以便在添加到主屏幕之前已经加载？就目前而言（据我所见），您从 Safari 中点击“添加到主屏幕”，它会使用页面的屏幕截图，直到下载图标。我认为这是为了在页面加载时保留带宽。

我试图将它包含`img`在页面上，希望它被缓存，但这似乎不起作用。还有其他想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-13T12:22:09.553

```
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.tagebisweihnachten.ch/pictures/apple-touch-icon-57x57x.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.tagebisweihnachten.ch/pictures/apple-touch-icon-72x72x.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.tagebisweihnachten.ch/pictures/apple-touch-icon-114x114x.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.tagebisweihnachten.ch/pictures/apple-touch-icon-144x144x.png" /> 
```

设置 4 个不同大小的图标。您的 iDevice 选择图片并将其设置为 App-icon。

例如这是我的页面，我还在工作^^

# excel - EXCEL：Cell.Value 返回前面的“？”

> ID：10108182
> 
> 赞同：0
> 
> 时间：2012-04-11T14:39:03.307
> 
> 标签：excel, cell

我在部分代码中返回了一个单元格值，然后清理数据以删除非法文件名字符。这些字符之一当然是“？” 出于某种原因，我的一些单元格正在返回带有前面的内容？尽管这不是细胞的一部分。

此外，我用来清理字符串的代码没有替换这个前导？像我希望的那样有一个空格。

```
Function Clean(ByVal sFolderName As String) As String

Dim i As Long
Dim sTemp As String

For i = 1 To Len(sFolderName)
      Select Case Mid$(sFolderName, i, 1)
         Case "/", "", ":", "*", "?", "<", ">", "|"
             sTemp = sTemp & ""
         Case Else
             sTemp = sTemp & Mid$(sFolderName, i, 1)
     End Select
 Next i

Clean = sTemp

End Function 
```

例如，单元格中的值将显示为 8324297444，但在尝试检索 cell.value 属性时，它会返回 ?8324297444。那么，当清理函数被调用时，它会保持这个领先？特点。

我正在撕扯头发，试图弄清楚这里发生了什么。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:45:58.623

顺便说一下，问号 (?) 和星号 (*) 是 Excel 特殊字符。尝试使用波浪字符来逃避特殊字符，如下所示：

```
 Case "/", "", ":", "~*", "~?", "<", ">", "|" 
```

编辑：然后尝试使用这样的字符代码：

```
 Case "/", "", ":", CHR(42), CHR(63), "<", ">", "|" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T22:51:26.833

经过几天的故障排除后，这似乎是一个无法纠正的孤立事件。我已经用尽了关于 SO 和网络上其他来源的所有可能的建议。

我能够通过识别受此行为影响的数据并手动重新键入它来纠正这种情况。

这不是最有效的解决方案，但确实解决了问题。

如果您遇到此问题，请注意，这是我能找到的唯一解决方法。

# text - 测试时计算IDF（如TF-IDF）？

> ID：10108184
> 
> 赞同：6
> 
> 时间：2012-04-11T14:39:05.383
> 
> 标签：text, classification, information-retrieval, tf-idf

据我了解，IDF 用于计算有多少文档具有该术语（有点想法）。您可以在训练集中计算 IDF（连同 TF），因为您事先拥有所有文档。但是如果我事先没有测试集并且我以顺序方式获取测试文档（比如从网络爬虫），那么在测试时我将如何计算文档中单词的 IDF ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:54:48.237

对于这种状态，如果您的数据集足够大，您可以只使用 IDF 的训练集。在测试阶段，如果新术语在训练集中，则使用训练的 IDF，如果术语是新术语，则使用训练集文档的数量来计算 IDF。出于某些目的，您可以使用平滑方法来获得更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T20:52:54.250

如果您只在索引/抓取一大堆文档后执行测试，您可以在抓取完成后计算 IDF。当您遇到新文档或新术语时，您不必计算 IDF。当您需要它进行一些 TD-IDF 或其他计算时，您可以即时计算它。

如果这还不够，出于某种原因，您仍然可以使用另一个文档数据集的 IDF，最好是使用相同类型的文档。

# jquery - 用 jQuery 实现“显示更多”按钮的最佳方法是什么？

> ID：10108186
> 
> 赞同：0
> 
> 时间：2012-04-11T14:39:08.567
> 
> 标签：jquery, toggle, show-hide

在回显 PHP/Mysql 的结果列表后。

我想以一种易于管理的方式向用户显示结果。

例子 ：

```
<ul>
<li data-pet="cat"><a href="/black-cat">Black Cat<a></li>
<li data-pet="cat"><a href="/grey-cat">Grey Cat<a></li>
<li data-pet="cat"><a href="/red-cat">Red Cat<a></li>
<li data-pet="dog"><a href="/dog-cat">White Dog<a></li>
</ul> 
```

如果“宠物”有多个结果，我只想显示第一个结果并有“显示更多”按钮，该按钮将显示/切换其余结果。

我认为使用 data 属性是分组/隐藏相似结果的最佳方式。

我真的卡住了，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:42:49.903

[在这里](http://jsfiddle.net/SpYk3/gtD3z/)看到类似的东西，虽然你仍然需要自己实现数据（元素），通过 $.ajax

***HTML***

```
<ul>
    <li data-pet="cat"><a href="javascript:void(0)">Black Cat</a><span>Show More</span></li>
    <li data-pet="cat"><a href="javascript:void(0)">Grey Cat</a></li>
    <li data-pet="cat"><a href="javascript:void(0)">Red Cat</a></li>
    <li data-pet="dog"><a href="javascript:void(0)">White Dog</a></li>
</ul>​ 
```

***jQuery Javascript***

```
$("ul > li:first-child span").on('click', function(e) {
    $(this).parent().nextAll().toggle();
})​ 
```

***CSS***

```
ul > li:not(:first-child) {
    display: none;
}
span {
    background-color: #ffa;
    cursor: pointer;
    margin: 0 .5em;
    padding: 0 .5em;
    color: #aaf;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:45:34.887

```
$('ul > li').hide();

$('ul').children().eq(0).show();

$('ul').append('<button class="close_button">Show More</button>');

$('.close_button').on('click', function(){
    $('ul > li').each(function(){ 
        $(this).slideDown();
    })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:55:57.410

**编辑：**根据您的评论更新代码，

在您的 html 中添加显示更多链接，如下所示，

```
<ul>
  <li data-pet="cat"><a href="/black-cat">Black Cat<a></li>
  <li data-pet="cat"><a href="/grey-cat">Grey Cat<a></li>
  <li data-pet="cat"><a href="/red-cat">Red Cat<a></li>
  <li class="shPets" data-pet="cat">Show More..</li>
  <li data-pet="dog"><a href="/dog-cat">White Dog<a></li>
  <li data-pet="dog"><a href="/dog-cat">Black Dog<a></li>
  <li data-pet="dog"><a href="/dog-cat">Grey Dog<a></li>  
  <li class="shPets" data-pet="dog">Show More..</li>  
  <li data-pet="fish"><a href="/dog-cat">Grey fish<a></li>
</ul> 
```

以上可以通过脚本来完成，但是如果你在你的 HTML 中有它会更好也更容易。

[**演示**](http://jsfiddle.net/skram/9KeJF/1/)

```
var $li = $('ul li');
var $shPets = $('.shPets');

$shPets.each (function () {
    var petType = $(this).data('pet');
    $('ul li[data-pet='+petType+']')
        .not('.shPets') //not shPets
        .not(':first')  //everything except first
        .hide();
});

$('.shPets').click (function () {
    var petType = $(this).data('pet');
    if ($(this).text() == 'Show More..') {
        $(this).text('Hide');
        $('ul li[data-pet='+petType+']').show();
    } else {
        $(this).text('Show More..');
        $('ul li[data-pet='+petType+']')
          .not('.shPets') //not shPets
          .not(':first')  //everything except first
          .hide();
    }
}); 
```

* * *

您可以隐藏除第一个之外的所有内容，然后在单击显示/隐藏文本时切换它们。见下文，

[**演示**](http://jsfiddle.net/skram/9KeJF/)

```
var $ul = $('ul');
var $li_not_first = $('ul li').not(':first').hide();

$ul.append('<li class="shPets">Show More..</li>');

$('.shPets').click (function () {
    if ($(this).text() == 'Show More..') {
        $(this).text('Hide');
        $li_not_first.toggle();
    } else {
        $(this).text('Show More');
        $li_not_first.toggle();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:54:23.973

您可以使用 get() 来获取 li 元素的数量，如果超过 3 个，您可以使用 hide()、fadeIn() 或其他 jquery 技术来显示您的显示更多链接。显示更多可以在带有 id 的跨度中，因此您可以将其隐藏

[获取链接](http://api.jquery.com/get/)

if ($('li').get() => 3) { $(#showMore).fadeIn() }

```
<ul>
<li data-pet="cat"><a href="/black-cat">Black Cat<a></li>
<li data-pet="cat"><a href="/grey-cat">Grey Cat<a></li>
<li data-pet="cat"><a href="/red-cat">Red Cat<a></li>
<li data-pet="dog"><a href="/dog-cat">White Dog<a></li>
</ul>
<span id="showMore">Show more... </span> 
```

我会看看我能不能让小提琴工作

# maven - maven 子项目 - 他们应该有自己的依赖关系

> ID：10108187
> 
> 赞同：0
> 
> 时间：2012-04-11T14:39:12.810
> 
> 标签：maven, maven-2

如果一个项目有很多子项目，并且所有的子项目都有一个共同的父 pom.xml，那么不应该在父 pom.xml 中列出所有依赖项吗？

允许子项目拥有自己的依赖项有什么意义..？它只是打开了一种可能性，一个子项目将使用 apache_xyzlibrary_1.0.jar 而另一个子项目可能使用 _2.0.jar ？

注意：所有 maven 子项目组合成一个 webapp WAR。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:25:24.867

将所有项目依赖项包含到每个子项目中将是非常低效的，因为这样做会有效地将不必要的依赖项引入每个子项目的构建中。另一个问题是，如果您有子项目间的依赖关系，即子项目a 依赖于子项目b，那么您可以很容易地结束一个maven 无法解决的循环依赖关系。

为了在整个项目中保持依赖版本的一致性，maven 的方法是利用项目父 pom 中的依赖管理部分。因此，只在父 pom 的依赖管理部分设置每个依赖的版本。在子项目的 pom 中，只说明了 group Id 和 artefact Id。除非需要，否则不应在子项目的 pom 中使用版本标记（即，当子项目需要与项目其余部分不同的特定版本的依赖项时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:11:29.537

如果所有子项都声明了相同的依赖项，那么最好在父项中声明该依赖项。你是对的，确保所有项目都使用一致版本的依赖项。

至于为什么 Maven 开发人员决定允许在子项目中声明依赖项，如果这样可以使用相同依赖项的不同版本？我想他们正在考虑项目中本地声明的依赖项的优势，当它们与兄弟项目不同时，比限制父项为其所有子项声明所有依赖项更好。

把它想象成在一个类的不同范围内声明的变量。如果您在一个方法中有一个私有变量，您知道它只在一个方法中使用，您可以根据需要更改它，而无需担心您的整个代码库。如果您在一个类中有一个私有字段，您必须知道它在该类中的所有用法，而不是在其他文件中。如果你有一个公共变量，那么你就明白了。依赖项是相同的，如果您为单个项目声明了一个，则可以确定它仅由单个项目使用/需要。此外，如果您正在构建同一父级的不同子项目，则不需要存在它。

至于你构建一个 WAR，你是对的，在不同的子项目中使用相同依赖项的不同版本可能会让你对最终的工件感到悲伤。请注意，在其他项目类型和构建周期中，项目之间的版本号混合可能不是问题，而是实际需要的。

还要记住，maven 父 pom 文件也可以有父文件。这允许层次结构的更多层，而不仅仅是 2 个级别。我认为如果所有子项目都必须在顶级父项目 pom 文件中声明其依赖项，那将是荒谬的。

# c - 不同内存寻址方案的 C 代码可移植性

> ID：10108188
> 
> 赞同：10
> 
> 时间：2012-04-11T14:39:14.993
> 
> 标签：c, dcpu-16

如果我理解正确，0x10c 的DCPU [-](http://0x10c.com/) [16 规范](http://0x10c.com/doc/dcpu-16.txt)描述了一个 16 位地址空间，其中每个偏移量寻址一个 16 位字，而不是大多数其他内存架构中的一个字节。这会产生一些奇怪的后果，例如，我想，并且都会返回。`sizeof(char)``sizeof(short)``1`

在这些不同的内存寻址方案之间保持 C 代码可移植性是否可行？要记住什么问题？

**编辑**：也许我应该举一个更具体的例子。假设您有一些处理字节流的网络代码。您是否通过在每个地址仅放置一个字节来丢弃一半的内存以便代码可以保持不变，或者您是否使用位移来概括所有内容以处理每个偏移量的 N 个字节？

**edit2**：答案似乎集中在数据类型大小的问题上，这不是重点——我什至不应该提到它。问题是如何应对失去使用指针寻址内存中任何字节的能力。期望代码对此不可知是否合理？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T14:43:20.400

这是完全可行的。粗略地说，C 的基本整数数据类型具有支持的大小：

```
sizeof (char) <= sizeof (short) <= sizeof (int) <= sizeof (long) 
```

The above is not exactly what the spec says, but it's close.

As pointed out by awoodland in a comment, you'd also expect a C compiler for the DCPU-16 to have `CHAR_BIT == 16`.

Bonus for not assuming that the DCPU-16 would have `sizeof (char) == 2`, that's a common fallacy.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T19:58:20.547

当您说“失去寻址字节的能力”时，我假设您的意思是“位八位字节”，而不是“字符”。可移植代码应该只假设`CHAR_BIT >= 8`. 在实践中，没有字节寻址的架构通常会定义`CHAR_BIT == 8`，并让编译器生成访问字节的指令。

我实际上不同意答案建议：`CHAR_BIT == 16`作为一个不错的选择。我更喜欢：`CHAR_BIT == 8`，与`sizeof(short) == 2`. 编译器可以处理移位/屏蔽，就像它对许多 RISC 架构所做的那样，在这种情况下进行字节访问。

我想 Notch 会进一步修改和澄清 DCPU-16 规范；已经有中断机制的请求和进一步的说明。这是游戏的美学背景，所以我怀疑很快就会有官方的 ABI 规范。也就是说，*有人*会努力的！

**编辑：**

考虑一个 C 中的数组`char`。编译器在每个本机 16 位`word`DCPU 内存中打包 2 个字节。因此，如果我们访问第 10 个元素（索引`9`），则获取单词 # [9 / 2] = 4，并提取字节 # [9 % 2] = 1。

设“X”为数组的起始地址，“I”为索引：

```
SET J, I
SHR J, 1    ; J = I / 2
ADD J, X    ; J holds word address
SET A, [J]  ; A holds word
AND I, 0x1  ; I = I % 2 {0 or 1}
MUL I, 8    ; I = {0 or 8} ; could use: SHL I, 3
SHR A, I    ; right shift by I bits for hi or lo byte. 
```

寄存器`A`保存“字节” - 它是一个 16 位寄存器，因此可以忽略上半部分。或者，上半部分可以归零：

```
AND A, 0xff ; mask lo byte. 
```

这不是优化的，但它传达了这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:00:43.757

平等是这样的：

```
1 == sizeof(char) <= sizeof(short) <= sizeof(int) <= sizeof(long) 
```

`short`类型可以是，`1`事实上，您甚至可能希望`int`类型`1`太实际（我没有阅读规范，但我假设**普通**数据类型是 16 位）。这些东西是由编译器定义的。

为了实用，编译器可能希望设置`long`为大于`int`即使它需要编译器做一些额外的工作（比如在软件中实现加法/乘法等）。

这不是内存寻址问题，而是粒度问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T20:08:44.407

是的，完全可以移植 C 代码

在数据传输方面，建议将位打包（或使用压缩）或以 16 位字节发送

因为 CPU 几乎完全只与（游戏）内部设备进行通信，这些设备也可能都是 16 位的，这应该不是真正的问题

顺便说一句，我同意`CHAR_BIT`应该是 16，因为（IIRC）每个字符都必须是可寻址的，因此制作`CHAR_BIT ==8`将`sizeof(char*) ==2`需要这将使其他一切变得过于复杂

# android - Android ICS Activity 从淡入/淡出到幻灯片的转换

> ID：10108192
> 
> 赞同：5
> 
> 时间：2012-04-11T14:39:26.487
> 
> 标签：android, transitions

我有一个应用程序，我在标准活动上使用默认的滑入/滑出效果，并在一些特定活动上淡入/淡出。

我注意到新的 Android 4.X (ICS) 有一个不同的默认值，即淡入/淡出。

**如何在标准活动中定义滑入/滑出效果？**

我一直在尝试用以下方式定义它：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    this.overridePendingTransition(0, android.R.anim.slide_in_left);                  
    super.onCreate(savedInstanceState);
}

@Override
public void onPause()
{
    super.onPause();
    overridePendingTransition(android.R.anim.slide_out_right, 0);
} 
```

为了重现我正在使用的淡入/淡出效果：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    this.overridePendingTransition(0, android.R.anim.fade_in);                  
    super.onCreate(savedInstanceState);
}

@Override
public void onPause()
{
    super.onPause();
    overridePendingTransition(android.R.anim.fade_in, 0);
} 
```

但还没有成功地重现它。

另外，我在 onCreate 和 onPause 上使用此代码，这是正确的吗？或者有更好的地方放吗？

谢谢

PS：我已经看到了这个[新的 Android 4.0 活动之间的屏幕转换](https://stackoverflow.com/questions/8654379/new-android-4-0-screen-transitions-between-activities)，但现在已经提供了答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T17:32:35.447

overridePendingTransition() 必须在启动新活动后立即调用，例如，您可以在 startActivity(intent) 之后调用它。要设置默认值，您可以创建一个扩展 Activity 并覆盖 startActivity、onBackPressed() 等的类来覆盖过渡。例如：

```
public class MyActivity extends Activity {

@Override
public void onBackPressed() {
    super.onBackPressed();
    overridePendingTransition(R.anim.slide_in_transition,R.anim.slide_out_transition);
}

@Override
public void startActivity(Intent intent) {
    super.startActivity(intent);
    overridePendingTransition(R.anim.slide_in_transition,R.anim.slide_out_transition);
}

@Override
public void finish() {
    super.finish();
    overridePendingTransition(R.anim.slide_in_transition,R.anim.slide_out_transition);
}

} 
```

然后，只需在您的活动中扩展 MyActivity 而不是 Activity ，并且默认情况下转换应该都是滑动的。

# android - ContactsContract.Data 隐式连接列不起作用？

> ID：10108199
> 
> 赞同：1
> 
> 时间：2012-04-11T14:39:45.617
> 
> 标签：android

抱歉，如果这可能是一个重复的问题，我整个晚上都在试图解决这个问题，而且我似乎找不到其他可能对此有所了解的帖子，所以我希望有一些更多的眼睛可能会发现一些东西。

我从[ContactsContract.Data](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)的 API 文档中得到这样的印象，即当您指定某些字段时，该库会发挥一些作用，并在后台为您执行隐式连接。

似乎不适合我。

```
import android.provider.ContactsContract.CommonDataKinds.Phone;

private Cursor getContacts()
{
    // Run query
    Uri uri = Phone.CONTENT_URI;
    String[] projection = new String[] {
            Phone.DISPLAY_NAME,
            Phone.NUMBER,
            Phone.CONTENT_ITEM_TYPE,
            Phone.HAS_PHONE_NUMBER,
            Phone.IN_VISIBLE_GROUP
    };
    String selection = Phone.HAS_PHONE_NUMBER + " = '1' AND " + Phone.IN_VISIBLE_GROUP + " = '1'";
    String[] selectionArgs = null;
    String sortOrder = Phone.DISPLAY_NAME + " COLLATE LOCALIZED ASC";
    return getContentResolver().query(uri, projection, selection, selectionArgs, sortOrder);
} 
```

当它运行时，它会以：

```
java.lang.IllegalArgumentException: Invalid column vnd.android.cursor.item/phone_v2 
```

从[ContactsContract.CommonDataKinds.Phone](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Phone.html)的文档中，它清楚地指出：

```
You can use all columns defined for ContactsContract.Data as well as the following aliases. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:29:41.550

Phone.CONTENT_ITEM_TYPE 是你的问题。这不是列名，而是 Data.MIME_TYPE 设置为的常量。从您的投影中删除它应该没问题。

# iphone - iPhone iOS NSMutableAttributedString 编辑器示例

> ID：10108201
> 
> 赞同：2
> 
> 时间：2012-04-11T14:39:49.440
> 
> 标签：iphone, objective-c, ios, text-editor, nsattributedstring

我正在查看苹果的 NSMutableAttributedString 示例：http: [//developer.apple.com/library/ios/#samplecode/CoreTextPageViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010699-Intro-DontLinkElementID_2](http://developer.apple.com/library/ios/#samplecode/CoreTextPageViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010699-Intro-DontLinkElementID_2)和看到它们将属性字符串加载为 XML 文件。

有没有关于如何使用文本编辑器在 iPhone/iPad 上创建属性字符串的示例？我不想以编程方式创建属性字符串，但希望用户能够使用文本编辑器创建属性字符串。

这样的工作可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:18:46.353

混合我在这个论坛上读过的三个或四个答案，你可以这样做：

1.  为下划线创建您自己的用户界面按钮，添加颜色...（我建议在情节提要上，但这是您的选择）

2.  子类 UITextView 并使用 CoreText 覆盖用于显示的 drawRect 方法，因为您需要一个可编辑的文本视图。[在这里](http://www.a-coding.com/2012/03/syntax-highlighting-in-ios.html)你有如何做到这一点。

3.  创建一个方法来更改用户在触摸“下划线”按钮后写入的每个字母的属性。

希望对你有帮助！！

# iphone - iPhone中的双重打击检测

> ID：10108203
> 
> 赞同：0
> 
> 时间：2012-04-11T14:39:54.157
> 
> 标签：iphone, ios, avaudiorecorder

我在互联网上看过很多教程来检测 iPhone 中的打击，但我的应用程序的要求是我需要同时检测单次打击和双次打击，以便如果用户单次打击它可以执行动作 a，如果用户一起打击两次然后执行动作 b.

有什么办法可以做到这一点？

谢谢大家，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:50:57.450

当然，如果您知道如何检测单次打击，您可以设置一个带有阈值的计时器并查看在这段时间内是否发生了另一次打击？就像是 -

```
-(void)userDidBlow {

    if (hasBlownOnce) {

        hasBlownOnce = NO;
        [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(singleBlowTimedOut) object:nil];

        // do double-blow stuff

    } else {

        hasBlownOnce = YES;

        [self performSelector:@selector(singleBlowTimedOut) withObject:nil afterDelay:kDoubleBlowTime];

    }

}

-(void)singleBlowTimedOut {

    hasBlownOnce = NO;

    // do single-blow stuff

} 
```

我还没有测试它，但它看起来不错:)

# email - 从 Gmail 垃圾邮件过滤器中删除网站

> ID：10108210
> 
> 赞同：1
> 
> 时间：2012-04-11T14:40:07.870
> 
> 标签：email, gmail, spam

如何确保来自我网站的电子邮件不会出现在 Gmail 的垃圾邮件过滤器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:46:17.923

这些来自您网站的电子邮件是否出现在您的收件箱中？或来自您网站的电子邮件出现在其他人的收件箱中？

如果是第一个，请将电子邮件地址添加到您的联系人列表中。

如果是第二个，请让人们将电子邮件地址添加到他们的联系人中。或者，您可以发送高质量、不烦人且不是垃圾邮件的消息。

另外，请阅读此线程[如何阻止 Gmail 将我的网络应用程序发送的邮件标记为垃圾邮件？](https://stackoverflow.com/questions/370620/how-to-stop-gmail-from-marking-mails-sent-by-my-web-app-as-spam)

# javascript - 如何使用 c# 在 asp.net 的 .aspx 页面中将服务器端处理的数据从代码隐藏添加到 javascript

> ID：10108213
> 
> 赞同：1
> 
> 时间：2012-04-11T14:40:15.617
> 
> 标签：javascript, asp.net, code-behind

我正在 asp.net 中制作一个 Web 应用程序。我需要翻页效果，所以我使用了 turn.js（参考：[http](http://www.turnjs.com/) ://www.turnjs.com/ ）。现在我需要在服务器端处理一些数据，即代码隐藏并将其发送到客户端。我从上面的网站（来自：[https](https://github.com/blasten/turn.js) ://github.com/blasten/turn.js ）下载了这个项目。但问题是我无法弄清楚如何将数据从代码隐藏发送到实际加载动态页面的 .aspx 页面中的 JavaScript。

```
function addPage(page, book) {
        //  First check if the page is already in the book
        if (!book.turn('hasPage', page)) {
            // Create an element for this page
            var element = $('<div />', {'class': 'page '+((page%2==0) ? 'odd' : 'even'), 'id': 'page-'+page}).html('<i class="loader"></i>');
            // If not then add the page
            book.turn('addPage', element, page);
            // Let's assum that the data is comming from the server and the request takes 1s.
            setTimeout(function(){
                    element.html('<div class="data">Data for page '+page+'</div>');
            }, 1000);
        }
    } 
```

这是添加动态页面的 JavaScript 函数。如何在行中添加页面内容`element.html('<div class="data">Data for page '+page+'</div>');`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:09:14.283

in your aspx page element.html('<%=pageData%>')

in your code behind create a public string called pageData and then in your code (parhaps page Load event) put the string of data that you want into pageData

Or you can create a web service or just a simple ashx file, to respond with the required data and use ajax to get the next page data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:17:31.883

有几种方法可以按照您的要求进行操作。

1.  在您的 javascript 函数中添加一个 asp:Literal 控件。在后面的代码中设置它的内容。

    ```
     setTimeout(function(){
                element.html('<div class="data">Data for page '+<asp:Literal runat="server" Id="litPageData"></asp:Literal>+'</div>');
        }, 1000); 
    ```

2.  添加一个隐藏字段，在后面的代码中设置它，然后在您的 Javascript 中访问该值。

    ```
    <asp:Hidden runat="server" id="hidPageData"></asp:Hidden> 
    ```

    （我可能对这个语法有点偏离）

    ```
     setTimeout(function(){
                element.html('<div class="data">Data for page '+$('#<%= hidPageData.ClientId%>').val() +'</div>');
        }, 1000); 
    ```

3.  Symeon 的解决方案，已经发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:50:51.520

在您的代码隐藏中，例如 code.cs 声明一个变量：

```
String strDummyValues = "Dummy value"; 
```

在您的 ASPX 页面中：

使用`<%=strDummyValues%>`手段

```
element.html('<div class="data">Data for page '+<%=strDummyValues%>+'</div>'); 
```

# internet-explorer-8 - html5shim 没有在 IE8 中加载

> ID：10108215
> 
> 赞同：0
> 
> 时间：2012-04-11T14:40:21.063
> 
> 标签：internet-explorer-8

我正在本地测试一个页面，在 IE8 中，html5shim 没有正确加载。

```
<!--[if lt IE 9]>
<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

如果我直接从我的计算机加载“html5.js”，它就可以工作 - src="html5.js"

如果我从我的外部服务器加载“html5.js”，它也可以工作 - src="myserver.com/html5.js"。

如果我在线上传页面并在 IE8 中测试它可以正常工作。

什么可能在本地导致此问题？

# php - 使用会话变量的程序化身份验证

> ID：10108216
> 
> 赞同：0
> 
> 时间：2012-04-11T14:40:23.677
> 
> 标签：php, symfony

我正在尝试在 Symfony2 中进行身份验证。

我的用户在站点的其他地方使用不受 symfony2 控制的登录表单。

我想要的是 Symfony 来检测用户是否已经登录并通过读取会话变量并与数据库进行比较来进行身份验证。

我不想在网站的 symfony 部分重新实现登录表单。

例如，在 symfony 1.x 中，我会简单地重载 BasicSecurityUser 类并使用 setAuthenticated 方法，但是这在 Symfony2 中似乎是不可能的。

有没有达到相同结果的简单方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:06:42.517

知道经过身份验证的用户的用户名后，您可以使用以下命令登录：

```
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;

class MyController {

// Takes either userName or an actual user object
protected function setUser($userName)
{
    if (is_object($userName)) $user = $userName;
    else
    {
        $userProvider = $this->get('zayso_core.user.provider');
        // Need try/catch here
        $user = $userProvider->loadUserByUsername($userName);
    }
    $providerKey = 'secured_area';
    $providerKey = $this->container->getParameter('zayso_area.provider.key'); // secured_area

    $token = new UsernamePasswordToken($user, null, $providerKey, $user->getRoles());
    $this->get('security.context')->setToken($token);
    return $user;
} 
```

# javascript - 将 JSON 映射到对象

> ID：10108217
> 
> 赞同：0
> 
> 时间：2012-04-11T14:40:23.870
> 
> 标签：javascript, json, object, mapping

我有一个从 csv 转换而来的 JSON 文件，并且太大而无法手动编辑。我认为它的语法是一个大数组。数据来自一组路由器，我的目标是构建路由器对象。当前 CSV 到 JSON 文件的方式是按每一行组织的，我想挑选出每个路由器并拥有一个带有路由器名称的对象，即与该路由器相关的所有带宽测量值。

你会如何处理这个问题？当我遍历 JSON 文件并且路由器更改时，我试图处理所有这些，我启动路由器对象的新实例。我不再是一个新手，只是一个学习缓慢的人。那么下一步是使用 js 创建一个路由器类，并用我从巨大的 JSON 数组中提取的内容填充该类，还是可以/应该不使用手写类并动态创建所有对象？（我可以即时创建对象吗？

当前的 JSON（它继续用于页面，每个路由器在 csv 中有几百个条目：

```
[
   {
        "Router": "RouterID1",
        "TimeStamp": "2012/01/01 06:00:00",
        "transferBytes": "23235",
        "ReceivedBytes":  "29903"
   },
   {
        "Router": "RouterID1",
        "TimeStamp": "2012/01/01 06:05:00",
        "transferBytes": "21235",
        "ReceivedBytes":  "22103"
   }
   {
        "Router": "RouterID2",
        "TimeStamp": "2012/01/01 06:00:00",
        "transferBytes": "23235",
        "ReceivedBytes":  "29903"
   },
   {
        "Router": "RouterID2",
        "TimeStamp": "2012/01/01 06:05:00",
        "transferBytes": "21235",
        "ReceivedBytes":  "22103"
   }
] 
```

@amnotiam：路由器类型保证彼此相邻

这可能无效，但这是我认为我要的结构：

```
[
   {
        "Router": "RouterID1"
        "TimeStamp": array of timestamps
        "transferBytes": array of bytes transferred for each timestamp
        "ReceivedBytes":  array of bytes received for each timestamp
   },
   {
        "Router": "RouterID2",
         "TimeStamp": array of timestamps
        "transferBytes": array of bytes transferred for each timestamp
        "ReceivedBytes":  array of bytes received for each timestamp
   }
] 
```

@Bergi我想为每个路由器创建一个对象，其中包含对象中包含的历史数据。知道我每次进入都有一个对象。（我认为）

@Rick 好电话，我会并且可能会在以后问这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:51:14.483

您真的可以即时创建对象。硬编码一组路由器对象不会更快，而且你很可能会因手写而出错。

看看这个：http: [//jsfiddle.net/aSbm6/](http://jsfiddle.net/aSbm6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:01:44.623

我将从将 json 转换为 php 变量开始，以便您可以更轻松地对其进行操作。看起来你的 Json 是一大堆对象，所以它看起来像这样：

```
$routerArray = json_decode($yourJsonString); 
```

然后您可以迭代并获取数据：

```
$newRouterObjectsArray = array();

foreach($routerArray as $routerObject) {
    if (empty($newRouterObjectsArray[$Router])) {
        // instantiate new router here:
        $newRouterObjectsArray[$Router] = new Router([params]);
    }
    // any other logic, assuming that the router does exist
} 
```

如果您直接在 javascript 中执行此操作，它看起来像：

```
var routerArray = JSON.parse([yourJsonString]);
var newRouterObjects = {};

for (routerEntry in routerArray) {
    if ('undefined' == typeof newRouterObjects[routerEntry->Router]) {
        //if this router doesn't exist yet, create it
        newRouterObjects[routerEntry->Router] = new Router([params]);
    }
    // update totals, etc.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:09:40.210

`JSON.parse`- 或您的库的等效项 - 如果给定您的 JSON 文件，将返回一个对象数组，因此您不需要创建对象。

如果我们`data`在您的示例中调用 JSON 字符串，则：

```
var routers = JSON.parse(data);
routers[0].Router === "DWG-350"; // true
routers[1].TimeStamp === "2012/01/01 06:05:00"; // true

routers[0].Router === routers[1].Router; // true
routers[0].TimeStamp === routers[1].TimeStamp; // false 
```

如果您需要进行逻辑或过滤，那么您可以将其中的所有对象`routers`用作 Javascript 对象，因为它们是。

不过，目前尚不清楚您要做什么。

我认为这是您想要的逻辑：

```
var routers = JSON.parse(data), // or jQuery.parseJSON()
    aggregate = {};

for (var i = 0, max = routers.length;
     i < max;
     i++) {

     var router = routers[i];
     if (typeof aggregate[routers[i].Router] === 'undefined') {
         aggregate[router['Router']] = {"TimeStamp": [],
                                         "ReceivedBytes": []}
                                         "TransferredBytes": []};

     }

     aggregate[router['Router']]["TimeStamp"]
         .push(router['TimeStamp']);
     aggregate[router['Router']]["ReceivedBytes"]
         .push(router['ReceivedBytes']);
     aggregate[router['Router']]["TransferredBytes"]
         .push(router['TransferredBytes']);
 } 
```

# c# - 在 PowerShell cmdlet 参数中声明 get 访问器

> ID：10108221
> 
> 赞同：5
> 
> 时间：2012-04-11T14:40:32.357
> 
> 标签：c#, powershell, properties, parameters, pipeline

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714348%28v=vs.85%29.aspx)：

> “必须在公共非静态字段或属性上声明参数。应在属性上声明参数。属性必须具有公共 set 访问器，并且如果指定了 ValueFromPipeline 或 ValueFromPipelineByPropertyName 关键字，则该属性必须具有公共 get 访问器。”

为什么我必须在我的 cmdlet`ValueFromPipeline`参数中声明 get 访问器？据我所知，PowerShell 只需要输入它们的值，而不是读出它们。谢谢（顺便说一句，我只是对这种行为感到好奇:)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:54:15.043

PowerShell在分配从[管道获得的新值](http://powershell.com/cs/blogs/ebook/archive/2008/11/23/chapter-5-the-powershell-pipeline.aspx)*之前，***会读取**标有`ValueFromPipeline`或的参数的默认值`ValueFromPipelineByPropertyName`进行备份。

 *请考虑以下 cmdlet：

```
New-Post -Title <string>
Set-Post -InputObject <Post> -Title <string> 
```

以下情况适用：

*   `New-Post`cmdlet将新创建的对象*返回到**具有*属性的管道`Post`*`Title`*
**   cmdlet 上的`InputObject`属性`Set-Post`标记为`ValueFromPipeline = true`*   cmdlet 上的`Title`属性`Set-Post`标有`ValueFromPipelineByPropertyName = true`。*

 *将它们与以下命令结合使用：

```
New-Post -Title "Foo" | Set-Post 
```

`Set-Post`并在cmdlet属性的 get 访问器上设置断点会`Title`导致以下堆栈跟踪：

![PowerShell 中参数绑定的堆栈跟踪](../Images/da21f501e0b72f715225b25f85fd7aab.png)

如您所见，在将cmdlet 上的属性与来自管道的对象的相应属性的值`CmdletParameterBinderController.GetDefaultParameterValue`绑定的过程中调用该方法。`Title``Set-Post`**

# iphone - 如何在 ZBarReader 项目的 ReaderSample 中使用 pushViewController

> ID：10108233
> 
> 赞同：1
> 
> 时间：2012-04-11T14:40:53.510
> 
> 标签：iphone, ios

我正在研究 ZBarReader 项目的 ReaderSample，而不是使用

> [self presentModalViewController：控制器动画：YES]；

我正在尝试使用

> [self.navigationController pushViewController：控制器动画：YES]；

当我运行应用程序时，什么也没有发生

我想知道为什么我不能使用**pushViewController**

请就这个问题给我建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:26:32.187

**编辑：**

根本原因是苹果不允许堆叠导航栏，而 UIImagePickerController 有它自己的一个，所以你会有两个并且会感到困惑..

ZBarReader 使用 UIImagePickerController 作为其基类（实际上不是，而是在内部某处），并且您可能知道您不能在导航控制器上推送 UIImagePickerController 对象......这就是为什么您必须使用 presentModalViewController

（模态视图控制器用于告诉用户，除了正常的应用程序使用之外，还有一些重要的事情正在发生，点击图片是其中的一部分......它在 HIG 中）......

希望这有帮助..

# wpf - UserControl DependencyProperty.Register 错误

> ID：10108240
> 
> 赞同：0
> 
> 时间：2012-04-11T14:41:20.500
> 
> 标签：wpf, user-controls, dependency-properties

```
public class ImageData
{
    public int ImageIndex { get; set; }
    public ImageSource ImgSource { get; set; }
    public string SourceUrl { get; set; }
    public DateTime CreateTime { get; set; }
    public string ImageTitle { get; set; }
    public string ImageClass { get; set; }
}

public partial class ImageListControl : UserControl
{

    public static readonly DependencyProperty ImageDataListProperty = DependencyProperty.Register("ImageDataList",
            typeof(System.Collections.ObjectModel.ObservableCollection<ImageData>), typeof(ImageListControl),
            new FrameworkPropertyMetadata("NO DATA"));

    public ImageListControl()
    {
        InitializeComponent();

    }

    public System.Collections.ObjectModel.ObservableCollection<ImageData> ImageDataList
    {
        get { return (System.Collections.ObjectModel.ObservableCollection<ImageData>)GetValue(ImageDataListProperty); }
        set { SetValue(ImageDataListProperty, value); }
    }

} 
```

* * *

我使用 UserControl 注册了 DependencyProperty 错误。为什么我不能注册 DependencyProperty ？我不知道出了什么问题。请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:56:04.107

在 DependencyProperty.Register 的第四个参数中，您正在传递属性元数据，该元数据指定“NO DATA”属性的默认字符串值，该属性无法转换为 ObservableCollection。将行更改为：

```
public static readonly DependencyProperty ImageDataListProperty = DependencyProperty.Register("ImageDataList",
        typeof(System.Collections.ObjectModel.ObservableCollection<ImageData>), typeof(ImageListControl),
        new FrameworkPropertyMetadata()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:55:43.743

[FrameworkPropertyMetadata](http://msdn.microsoft.com/en-us/library/ms557298.aspx)的构造函数将对象作为第一个参数。此对象是您的属性的默认值。所以问题是字符串`"NO DATA"`不能转换成`ImageData`. 您可以提供作为参数，也可以提供一些对您来说看起来更有效`null`的适当实例。`ImageData`不过我更喜欢`null`。

# javascript - 悬停固定高度的无序列表时平滑滚动

> ID：10108242
> 
> 赞同：0
> 
> 时间：2012-04-11T14:41:23.947
> 
> 标签：javascript, jquery, html

我有一个固定高度的无序列表`<ul>`，其中包含固定高度的列表项`<li>`

我的 ul 高度是 600px，它包含 200 li 高度为 40px 的项目。

我需要创建一个脚本，当鼠标悬停在列表底部时向下滚动列表，当鼠标悬停在列表顶部时向上滚动。

我试过这个： http: [//archive.plugins.jquery.com/project/hoverscroll](http://archive.plugins.jquery.com/project/hoverscroll) 但它没有应有的流畅，所以我需要创建一个自定义的（可能根本不使用 jQuery）。

有什么想法或例子吗？我怎样才能达到预期的效果？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:44:13.350

为什么不把你的屏幕分成一个网格呢？一旦 mouseX 和 mouseY 击中顶部网格，它将以预定义的整数值向上滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:26:19.713

尝试使用 $wrapper.animate({scrollTop: step}); 例如 JS：

```
var isScroll = false;

    $(document).ready(function () {
        $('#up').hover(function () {
            isScroll = true;
            gotoNext(true);
        }, function () { isScroll = false; });
        $('#down').hover(function () {
            isScroll = true;
            gotoNext(false);
        }, function () { isScroll = false; });
    });

    function gotoNext(dir) {
        if (isScroll) {
            isScroll = true;
            var step = dir ? '-=20' : '+=20';
            $('#wrapper').animate({
                scrollTop: step
            }, 200, "linear");
            setTimeout(function () { gotoNext(dir); }, 200);
        }
    } 
```

HTML：

```
<div style="height:10px; background:green; width:200px;" id="up"></div>
<div style="height:200px; overflow:auto; width:200px;" id='wrapper'>
<ul>
<li style="height:30px;">1</li>
<li style="height:30px;">2</li>
<li style="height:30px;">3</li>
<li style="height:30px;">4</li>
<li style="height:30px;">5</li>
<li style="height:30px;">6</li>
<li style="height:30px;">7</li>
<li style="height:30px;">8</li>
<li style="height:30px;">9</li>
<li style="height:30px;">1</li>
<li style="height:30px;">2</li>
<li style="height:30px;">3</li>
<li style="height:30px;">4</li>
<li style="height:30px;">5</li>
<li style="height:30px;">6</li>
</ul>
</div>
<div style="height:10px; background:green; width:200px;"  id="down"></div> 
```

对我来说看起来不错

# sql - SQL 选择 Where 或 Have

> ID：10108245
> 
> 赞同：0
> 
> 时间：2012-04-11T14:41:31.010
> 
> 标签：sql, sql-server-2005

我试图根据某些因素从表中获取一些记录。

一个因素只是同一张表上的字段，另一个是当加入另一个表时，我想将加入表中的记录数与第一个表上的字段进行比较。下面是一个示例代码。

```
select * from tDestinations D 
left join tLiveCalls LC on LC.DestinationID = D.ID 
where D.ConfigurationID = 1486 
AND (D.Active = 1 AND D.AlternateFail > GETDATE())
-- Having COUNT(LC.ID) = D.Lines 
```

现在从上面的代码中，我不能在 where 子句中使用 Count 函数，并且如果没有在函数中，我也不能在 have 子句中拥有字段。

我可能在这里遗漏了一些非常简单的东西。但我想不通。

任何帮助表示赞赏。

编辑：我很抱歉应该解释表的结构，目的地是单个记录，LiveCalls 表可以根据目的地 ID（外键）保存多条记录。

非常感谢大家的帮助。我的最终代码：

```
select D.ID, D.Description, D.Lines, D.Active, D.AlternateFail, D.ConfigurationID, COUNT(LC.ID) AS LiveCalls from tDestinations D 
left join tLiveCalls LC on LC.DestinationID = D.ID 
where D.ConfigurationID = @ConfigurationID
AND (D.Active = 1 AND D.AlternateFail > GETDATE())
GROUP BY D.ID, D.Description, D.Lines, D.Active, D.AlternateFail, D.ConfigurationID
HAVING COUNT(LC.ID) <= D.Lines 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:43:07.613

您缺少的简单内容[是`GROUP BY`语句](http://msdn.microsoft.com/en-us/library/ms177673.aspx)。

正如 JNK 在下面的评论中提到的，如果您没有子句，则不能使用聚合函数（例如`COUNT`, `AVG`, `SUM`, ），除非您的语句仅引用文字值（并且没有列名）。`MIN``GROUP BY``SELECT`

你的代码可能应该是这样的：

```
SELECT <someFields>
FROM tDestinations D 
LEFT JOIN tLiveCalls LC on LC.DestinationID = D.ID 
WHERE D.ConfigurationID = 1486 
AND (D.Active = 1 AND D.AlternateFail > GETDATE())
GROUP BY <someFields>
HAVING COUNT(LC.ID) = D.Lines 
```

请注意，您必须在 SELECT 和 GROUP BY 语句中明确指定所选字段（`*`不允许）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:49:59.293

您只能使用具有聚合。实际上有聚合的“where子句”，但是你仍然可以在你没有聚合的列上有一个where。

例如：

```
SELECT TABLE_TYPE, COUNT(*)
FROM INFORMATION_SCHEMA.TABLES
where TABLE_TYPE='VIEW'
group by TABLE_TYPE
having COUNT(*)>1 
```

在您的情况下，您需要使用 havving count(*)=1 所以，我认为您的查询将是这样的：

```
select YOUR_COLUMN 
from tDestinations D 
left join tLiveCalls LC on LC.DestinationID = D.ID 
where D.ConfigurationID = 1486 AND (D.Active = 1 AND D.AlternateFail > GETDATE())
group by YOUR_COLUMN
Having COUNT(LC.ID) = value 
```

# html - Opera 中的 HTML5 离线问题

> ID：10108246
> 
> 赞同：1
> 
> 时间：2012-04-11T14:41:34.150
> 
> 标签：html, jquery-mobile

我在 Opera 浏览器中遇到 HTML5 离线问题。

如果 Opera turbo 为 ON，则 window.applicationcache.status 始终为 0。因此不会发生离线下载。如果 turbo 关闭，则离线下载可以正常工作。

谁可以帮我这个事。

# android - 将“Android 库项目”包含的 jar 暴露给引用它们的项目

> ID：10108252
> 
> 赞同：3
> 
> 时间：2012-04-11T14:41:41.737
> 
> 标签：android, library-project

Android 的较新功能之一是能够创建[库项目](http://developer.android.com/guide/developing/projects/projects-eclipse.html)。

这对于在您可能正在开发的许多应用程序之间进行单元测试和共享通用功能非常有用，但我似乎偶然发现了它们的实现中的错误。

当您有以下情况时：

-`LibraryProject`包含`LibraryProject/libs/folder/lib.jar`在它的构建路径中。

-`ReferencingProject`参考资料`LibraryProject`。

从`ReferencingProject`您无法访问内部的任何内容`lib.jar`（例如常量用于与 中的方法进行通信`Library Project`）。

对此的解决方案是将“lib.jar”作为外部库包含在引用项目中，但这种方法开始否定您从拥有自包含库项目中获得的好处，方法是创建多个手动添加的对可能移动/更改的资源的引用在库项目的开发过程中（更不用说导致一些相当混乱的错误）。

有什么方法可以将包含的库类公开给引用项目，而不必手动将它们作为外部 jar 引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:55:26.337

正如@Selvin 所说，

在 Library Project 中，您可以使用以下命令在弹出的窗口中指定要将哪些库标记为“已导出”：`Project properties => Java Build Path => Order and Export`。在此示例中，您将检查`libs/folder/lib.jar`.

清理并构建库项目，“导出”的库现在包含在生成的 jar 中。

**编辑**

这是升级到 ADT 17 的症状 - （Android 团队：当更新破坏现有架构时，也许在您的发行说明中添加一些警告？）

[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

如果您不想将库添加到`"Order and Export"`然后将本地 jar 放在`/libs/` 基本文件夹中，则会自动将其添加到“Android 依赖项”中，这些依赖项会从共享库创建的 jar 中导出。

**编辑2**

最近的 ADT 升级还会让您在 Java 构建路径中手动选择“Android 依赖项”作为“导出”。同样，警告会很好。

# php - PHP cookie时间格式不起作用

> ID：10108257
> 
> 赞同：4
> 
> 时间：2012-04-11T14:41:59.107
> 
> 标签：php, cookies

我有这两个 cookie，它们确实有效，但前提是 cookie 的有效期为 5 小时及以上，没有任何内容。如果我将 cookie 到期时间设置为 0，它也会起作用，但我需要 cookie 在 2 小时内到期。当我将 cookie 设置为 2 小时后过期时，它在 Firefox 中有效，但在 Chrome 或 IE 中无效。

如果到期时间是从现在起五小时或更长时间，我只会看到浏览器 (Chrome) 获取 cookie。或者如果到期设置为 0。我做错了什么？

```
setcookie('expire', 'test', time() + 7200, "/"); 
```

我不知道为什么时间功能不起作用，所以我的 cookie 将在两个小时内过期。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T14:47:24.863

所以——你是在美国中部还是东部时区？您的时间戳很可能被解释为 UTC，因此仅在您超过偏移量时才有效。使用 phpdate 的 C 或 R 之类的格式更安全：

```
$date = new Datetime('+2 hours');
setcookie('expire', 'test', $date->format('C'), "/"); 
```

甚至更好的是，使用预定义的 cookie 日期格式：

```
setcookie('expire', 'test', $date->format(DateTime::COOKIE), "/"); 
```

这些包括字符串中的偏移量，这样浏览器就不会搞砸了。此外，在查看响应标头时，它可以更轻松地进行故障排除，因为它是人类可读的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:45:53.913

如果您在服务器上执行此操作，请仔细检查开发服务器上的时间是否正确 - 我知道我遇到了完全类似的问题，而不稳定的服务器时间最终成为罪魁祸首。

# java - bean 验证中的并发性

> ID：10108259
> 
> 赞同：6
> 
> 时间：2012-04-11T14:42:04.803
> 
> 标签：java, bean-validation

阅读 JSR-303 的规范：

> 约束验证实现实例的生命周期未定义
> 
> 在使用约束实现之前，Bean 验证提供程序会调用 initialize 方法。
> 
> 每次验证给定值时，Bean 验证提供程序都会评估 isValid 方法。如果值无效，则返回 false，否则返回 true。**isValid 实现必须是线程安全的。**

我不太明白。在每次*isValid调用之前调用**initialize*，*isValid*应该是线程安全的吗？这是否意味着我不能在类级别中存储任何东西来初始化以稍后从*isValid*访问它？特别是我需要传递给*初始化*的注释实例。

 ***有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:56:07.663

它并没有说`initialize()`应该在每次调用`isValid()`. `isValid()`在多次调用同一个注解之前只能调用一次。例如，[它的 javadoc](http://docs.oracle.com/javaee/6/api/javax/validation/ConstraintValidator.html)说：

> 初始化验证器以准备 isValid**调用**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T20:43:57.073

该`initialize()`方法对每个约束调用一次，而对约束`isValid()`的每个验证调用一次。

将传递给的注释（或它的单个属性）存储到`isValid()`验证器的字段中并稍后从`isValid()`. [您可以在Hibernate Validator](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-validator)参考指南中找到一个示例。

您只需要确保您的方法可以由多个线程并行调用（例如，您可能无法在没有同步的情况下`isValid()`从内部更改验证器的状态）。`isValid()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-17T16:18:40.663

还想提一下，每个类都使用 initialize() 初始化验证器。

所以如果你有 DummyClassA 和 DummyClassB 使用相同的验证器，初始化将被调用两次。DummyClassB 将初始化它自己的验证器，并且不会使用 DummyClassA 初始化的验证器，反之亦然。DummyClassA 或 DummyClassB 的任何新实例都将使用相同的验证器。因此，如果您有四个 DummyClassA 实例，它们都将使用为 DummyClassA 初始化的相同验证器。

所以...... DummyClassA 与验证器具有多对一关系，而 DummyClassB 也将与验证器具有多对一关系。

这是我的团队和我在阅读您阅读的行并担心它不是线程安全等时很好奇的事情！***

# c++ - 将双精度转换为无符号字符？

> ID：10108260
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:42:06.273
> 
> 标签：c++

我正在尝试将（双精度）矩阵转换为无符号字符，这样我就可以写入 .pmg 文件......但它不起作用。

```
void writePNG(vector<double>& matrix)
{
vector<unsigned char> image;
ofstream myfile;

myfile.open("newFile.txt", ios::out); // writing to .txt file for now for testing.

if(!myfile.is_open())
{
    cout << "Cannot open file";
}
for(int i=0; (i < 512*512); i++)
{
    image[i] = (unsigned char) matrix[i];
}

myfile.close();
} 
```

它不会转换数据。有任何想法吗？？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:08:58.713

*   **错误**：您正在创建一个大小为 0 的向量，然后写入其不存在的元素。
*   **错误**：您永远不会将数据写入文件
*   *style*：您不必要地关闭文件。`fstream`当对象超出范围时它将关闭
*   *style*：您在循环中复制数据。使用`vector::vector`更清楚地显示您的意图。
*   *潜在的错误*：无论输入向量的大小如何，您都会创建一个 512x512 的输出向量。
*   *[SSCCE](http://sscce.org)*您的测试用例不完整。

试试这个：

```
#include <vector>
#include <iostream>
#include <fstream>

void writePNG(const std::vector<double>& matrix)
{
  std::ofstream myfile("newFile.txt", std::ios::out); 

  if(!myfile.is_open())
  {
    std::cout << "Cannot open file";
  }
  std::vector<unsigned char> image (matrix.begin(), matrix.end());
  myfile.write(reinterpret_cast<const char*>(&image[0]), image.size());
}

int main () {
  writePNG({
    72, 101, 108.1, 108.2,
    111, 0x2c, 0x20, 0x77,
    0x6f, 0x72, 0x6c,
    100.3,  10.4});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:51:48.507

您正在`image`使用 的默认构造函数创建`vector`，它将向量初始化为空（不包含任何元素）。下标符号 ( `image[i]`) 不会创建元素，只会分配给已经存在的元素。

你有（至少）两种方法来修复它：

*   使用分配必要大小`image`的 ctor声明：- 这将使用 512*512 个默认值元素（0 表示）填充向量`vector``vector<unsigned char> image(512*512)``unsigned char`
*   `push_back`使用以下方法一一添加元素：`image.push_back((unsigned char) matrix[i]);`

您还必须最终编写 to 的`image`内容`myfile`。

`static_cast<unsigned char>(...)`注意：使用C 风格代替 C 风格是一个好习惯，`(unsigned char) ...`因为前者可以发现后者不会标记的错误；不过，在这种特殊情况下，这不是问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:48:07.657

您的图像矢量大小为零 - 您至少必须执行 push_back 才能添加元素。此外，double 的大小与 char 的大小不同，因此您将丢失信息。

# java - 无法更改 java.io.tmpdir

> ID：10108262
> 
> 赞同：6
> 
> 时间：2012-04-11T14:42:07.800
> 
> 标签：java, linux, properties, command

我正在尝试使用此命令更改 java.io.tmpdir 目录

```
java -Djava.io.tmpdir=/temporary 
```

但这没有成功并显示 java 命令的“用法”。我在 RHEL 机器上执行此操作。

提前致谢

我在 WebLogiv 上部署了一个使用axis2 1.5 版的应用程序。我发现axis2 1.5 使用java.io.tmpdir 来存储它的临时文件。我想要存储这些临时文件的位置。我在 weblogic 中的哪个位置指定 java.io.tmpdir 值

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T14:46:57.153

您需要将该命令用作运行程序的一部分，而不仅仅是`java -Dkey=value`.

```
java -Djava.io.tmpdir=/temporary com.foo.Bar 
```

`com.foo.Bar`包含该`main`方法的类在哪里。

或者，您可以以编程方式执行此操作。

```
System.setProperty("java.io.tmpdir", "/temporary"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T15:01:51.937

看看这个答案[https://stackoverflow.com/a/1924159/594793](https://stackoverflow.com/a/1924159/594793)

具体来说，这部分：

> 调用 Java 虚拟机时，可以为该系统属性赋予不同的值，但不保证对该属性的编程更改对该方法使用的临时目录有任何影响。

# mysql - 数据库：列编码，什么时候重要？

> ID：10108263
> 
> 赞同：2
> 
> 时间：2012-04-11T14:42:08.143
> 
> 标签：mysql, database, character-encoding

我们正在将包含 UTF-8 编码数据的 .sql 脚本中的数据导入 MySQL 数据库：

`mysql ... database_name < script.sql`

稍后，这些数据将再次以 UTF-8 格式显示在我们的 Web 应用程序（连接到该数据库）的页面上。但是在这个过程中的某个地方出了点问题，因为非 ascii 字符显示不正确。

我们第一次尝试解决它是将 mysql 列编码更改为 UTF-8（如此[处](http://codex.wordpress.org/Converting_Database_Character_Sets)所述）：

```
alter table wp_posts change post_content post_content LONGBLOB;`
alter table wp_posts change post_content post_content LONGTEXT CHARACTER SET utf8; 
```

但这没有帮助。

最后，我们通过从带有附加命令行标志的 .sql 脚本导入数据解决了这个问题，我相信这会迫使 mysql 客户端将来自 .sql 脚本的数据视为 UTF-8。

`mysql ... --default-character-set=utf8 database_name < script.sql`

它有所帮助，但后来我们意识到这次我们忘记将列编码更改为 utf8 -`latin1`即使 utf-8 编码的数据正在流经数据库（从 sql 脚本到应用程序），它也被设置为。

**因此，如果即使数据库字符集设置不正确，从数据库获取的数据也能正确显示，那我为什么还要费心设置正确的数据库编码呢？**

特别想知道：

1.  数据库的哪些部分依赖于列编码设置？这个设置什么时候有真正的意义？
2.  在什么情况下进行列编码的隐式转换？
3.  将列转换为二进制格式然后转换为目标编码的技巧如何工作（参见：上面的 sql 代码片段）？我还是不明白。

希望有人帮我清理一下...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:00:49.257

在我看来，最大的原因是它破坏了您的数据库一致性。

*   它经常发生，您需要检查数据库中的数据。如果您不能正确地将来自网页的 UTF-8 字符串输入到您的 MySQL CLI 客户端，那就太可惜了；
*   如果您需要使用 phpMyAdmin 通过“正确的”网络来管理您的数据库，那么您就是在限制自己（尽管可能不是问题）；
*   如果您需要为您的数据构建报告，那么您会受到可能选择的数量的极大限制，因为只有网络会产生正确的输出；
*   如果您需要将部分数据库提取物交付给您的合作伙伴或外部公司进行分析，并且提取物被搞砸了 - 很遗憾。

现在回答你的问题：

1.  当您向数据库询问`ORDER BY`某个字符串数据类型的列时，排序规则会考虑您的列的编码，因为如果您对不同的列有不同的编码，则可以应用一些内部转换。如果您尝试比较字符串，同样适用，编码信息在这里是必不可少的。编码与整理一起出现，尽管大多数人不经常使用此功能。

2.  如前所述，如果您有任何不同编码的列集，数据库将选择将值隐式转换为通用编码，即现在的 UTF8。字符串的隐式编码可能在客户端框架/库中完成，具体取决于客户端的环境编码。通常，数据在发送到服务器时会重新编码为数据库的编码，并在传递结果时重新编码为客户端的编码。

3.  二进制数据没有编码的概念，它只是一组字节。因此，当您转换为二进制时，您是在告诉数据库“忘记”编码，尽管您保持数据不变。稍后，您转换为强制正确编码的字符串。如果您确定数据在*物理*上是 UTF-8 格式，而由于某种意外指定了不同的编码，则此技巧会有所帮助。

Given that you've managed to load in data into the database by using `--default-character-set=utf8` then there was something to do with your environment, I suggest it was not UTF8 setup.

I think the best practice today would be to:

*   have *all* your environments being UTF8 ready, including shells;
*   have *all* your databases defaulting to UTF8 encoding.

This way you'll have less field for errors.

# sql - SQL Server Compact 不允许子选择，但不允许在文本数据类型上使用 groupby 进行内部连接

> ID：10108269
> 
> 赞同：0
> 
> 时间：2012-04-11T14:42:35.023
> 
> 标签：sql, group-by, sql-server-ce, inner-join, subquery

我在数据库查询（SQL Server）中使用了以下 sql 语法

```
SELECT Nieuwsbrief.ID
    , Nieuwsbrief.Titel
    , Nieuwsbrief.Brief
    , Nieuwsbrief.NieuwsbriefTypeCode
    , (SELECT COUNT(*) AS Expr1 
        FROM NieuwsbriefCommentaar 
        WHERE (Nieuwsbrief.ID = NieuwsbriefCommentaar.NieuwsbriefID 
                AND NieuwsbriefCommentaar.Goedgekeurd = 1)) AS AantalCommentaren 
FROM Nieuwsbrief 
```

我现在正在更改为 sql-server-ce （紧凑版），它不允许我有这样的子查询。建议的解决方案：`inner join`。但由于我只需要子表“”的计数，因此`NieuwsbriefCommentaar`我必须在我的基表属性上使用“ `group by`”子句以避免结果集中出现双精度数。

但是“ `Nieuwbrief.Brief`”属性的数据类型为“ `text`”。`text`中的“ ”数据类型不允许使用 Group by 子句`sql-server-ce`。' `Text`' 数据类型已弃用，但`sql-server-ce`还不支持 ' `nvarchar(max)`'...

知道如何解决这个问题吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:30:02.703

我认为解决方案可能更容易。我不确切知道您的元数据如何，但我认为此代码只需使用 LEFT JOIN 即可满足您的要求。

```
 SELECT Nieuwsbrief.ID 
    , Nieuwsbrief.Titel 
    , Nieuwsbrief.Brief 
    , Nieuwsbrief.NieuwsbriefTypeCode 
    , COUNT(NieuwsbriefCommentaar.NieuwsbriefID) AS AantalCommentaren
FROM Nieuwsbrief  
LEFT JOIN NieuwsbriefCommentaar  ON (Nieuwsbrief.ID = NieuwsbriefCommentaar.NieuwsbriefID)
WHERE NieuwsbriefCommentaar.Goedgekeurd = 1 
```

编辑：第二选项

```
SELECT N.ID, N.Titel, N.Brief, N.NieuwsbriefTypeCode, G.AantalCommentaren  FROM Nieuwsbrief as N LEFT JOIN (SELECT NieuwsbriefID, COUNT(*) AS AantalCommentaren FROM NieuwsbriefCommentaar GROUP BY NieuwsbriefID) AS G ON (N.ID = G.NieuwsbriefID) 
```

请让我知道此代码是否有效，以便找到另一种解决方法..

问候，

# c++ - Visual Studio 调试幽灵光标 - 程序进入调试但看不到当前行或变量

> ID：10108276
> 
> 赞同：1
> 
> 时间：2012-04-11T14:42:47.763
> 
> 标签：c++, visual-studio, debugging, visual-studio-2008

我在 Visual Studio 中调试 C++ 应用程序时的奇怪情况。

我在我的文件中设置了一个断点并开始调试，然后运行该场景。应用程序在设置断点处进入 Visual Studio 中的调试模式，但是：

*   我没有看到当前行/光标
*   没有显示调用堆栈
*   Autos 中没有变量
*   在我的断点列表中，我看到我的断点突出显示/粗体（这意味着调试在正确的行上）

任何人 ？希望我已经有点清楚了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:45:40.090

尝试 Visual Studio 命令“Debug.ShowNextStatement”（默认 Alt+Num*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T20:25:28.210

如果您加载到调试器中的文件与编译的版本不完全相同，则可能会发生这种情况。

# xcode - Xcode 4.3：如何创建链接到视图控制器的 nib

> ID：10108280
> 
> 赞同：3
> 
> 时间：2012-04-11T14:43:09.500
> 
> 标签：xcode, uiviewcontroller, xib, nib

抱歉，我对 xcode 很陌生，有一个很大的项目。我将 xcode 升级到 4.3。我有一个项目（不使用情节提要），我需要添加一个带有 nib 文件的视图控制器。

在升级之前，我做了 File --> Ne File --> Cocoa Objective-C subclass 和 xcode 为我创建了 m/h 和它们的 nib 文件。现在该选项消失了，我该如何添加视图控制器？

我创建了 Objective-C 类和一个单独的 nib 文件，但是如何将 H/m 文件链接到 nib？

怎么能m文件调用是nib？？

请问你能帮我吗？这个项目真的很大，我可以用故事板选项重写代码！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:48:34.843

编辑您的 XIB 时，转到 Identity Inspector（它是下图中显示的第三个按钮）。然后在显示类的地方，选择要与 XIB 关联的控制器。

![在此处输入图像描述](../Images/c5e41ce87e9dacb06bd1eba9b8d8518c.png)

# mercurial - 是否有可能在 mercurial 中只有本地分支机构

> ID：10108284
> 
> 赞同：1
> 
> 时间：2012-04-11T14:43:18.643
> 
> 标签：mercurial

是否可以在本地存储库中拥有本地分支而不让它们出现在远程存储库中？

例如

```
Local Repo:

[default]
[fixes] 
```

我想将修复分支合并到默认分支，然后推送到远程存储库**而不**将本地 [修复] 分支推送到远程存储库？

```
Remote Repo:

[default] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:30:27.097

LocalbranchExtension存在，但我从未尝试过[。](http://mercurial.selenic.com/wiki/LocalbranchExtension)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T04:56:46.473

如果你合并`fixes`到`default`，那么`fixes`是`default`历史的一部分，也必须被推送。如果您有两个*单独*的分支头，则可以使用`hg push -r <rev>`.

# css - Div 透明度在 IE8 中不起作用

> ID：10108286
> 
> 赞同：0
> 
> 时间：2012-04-11T14:43:24.570
> 
> 标签：css, cross-browser, styles, sass

我有一个覆盖 div，它是 body 标记的子级 div 的背景应该是透明的白色，我不想用 png 来伪造它。我有以下 sass：

```
.my-overlay
    @include opacity(0.6)
    background: #fff
    position: absolute
    top: 0
    left: 0 
```

这编译为：

```
.my-overlay
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=60);
    opacity: 0.6;
    background: white;
    position: absolute;
    left: 0;
    top: 0; 
```

我也有以下

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

透明度适用于 Chrome、Safari 和 FF，但不适用于 IE8。在 IE8 中，div 的背景呈现不透明的白色（我正在 OS X 上的 XP/IE8/VMWare 中进行测试）。它在兼容模式下也不起作用。

我还尝试手动将过滤器更改为 -ms-filter，但没有效果。

IE8 开发人员工具栏显示过滤器属性已应用到具有正确值的 div，并且 hasLayout 为 -1。我可以忽略什么会阻止 IE8 的透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:10:51.250

[这](http://css-tricks.com/css-transparency-settings-for-all-broswers/)对我有用，即使在 IE7/IE8 中：

```
.transparent {
    zoom: 1;
    filter: alpha(opacity=50);
    opacity: 0.5;
} 
```

# java - JMS MessageConsumer 的messageListener 是推还是拉？

> ID：10108287
> 
> 赞同：7
> 
> 时间：2012-04-11T14:43:29.450
> 
> 标签：java, jms

当我在队列 MessageConsumer 对象上设置 messageListener 时，真正发生了什么。MessageConsumer 对象是否在场景后进行某种轮询，或者这是由 JMS 服务器进行的真正推送？

Java 消息服务（O'Reilly Java 系列），David A. Chappell、Richard Monson-Haefel 和 Mark Richards，第 10 页第 1 章：点对点

*点对点消息传递模型传统上是基于拉取或基于轮询的模型，其中消息从队列中请求，而不是自动推送到客户端*

[http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS4.html#wp79175](http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS4.html#wp79175)

*当消息传递开始时，只要传递了消息，JMS 提供程序就会自动调用消息侦听器的 onMessage 方法。*

谢谢，科德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:52:05.817

这两者并不矛盾。P2P 本质上是基于拉取的，因为一旦消息由生产者发送，接收者负责读取消息。您在第二次引用中提到的 onMessage() 方法是用于启动拉取的*通知机制。*这些变体也称为接收 JMS 消息的同步与异步模式，例如[在 Java 教程的本章中](http://docs.oracle.com/javaee/6/tutorial/doc/bncfa.html)。

# shell - node.js shell环境变量与cakephp冲突

> ID：10108289
> 
> 赞同：0
> 
> 时间：2012-04-11T14:43:32.233
> 
> 标签：shell, cakephp, node.js

我在我的 .profile 文件中设置了 cakes 环境路径，但似乎

```
> cake 
```

已被 node.js 咖啡脚本占用，并输出以下错误

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: Cakefile not found in /Users/Devric
    at /opt/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:96:11
    at /opt/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:95:32
    at /opt/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:95:32
    at Object.run (/opt/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:46:19)
    at Object.<anonymous> (/opt/local/lib/node_modules/coffee-script/bin/cake:7:38)
    at Module._compile (module.js:432:26)
    at Object..js (module.js:450:10)
    at Module.load (module.js:351:31)
    at Function._load (module.js:310:12)
    at Array.0 (module.js:470:10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:09:58.863

修复了这个问题，将 cakephp 的蛋糕壳重命名为 cakes，这样它就不会与 coffeescript cake 文件冲突。

# python - python-pygame中的“for”循环不会在“if”语句下中断

> ID：10108290
> 
> 赞同：0
> 
> 时间：2012-04-11T14:43:34.273
> 
> 标签：python, for-loop, pygame

我正在尝试在 pygame 中制作“太空入侵者”游戏……我已经运行了很多游戏，但是我遇到了一个我无法自己解决的烦人问题（这是我学习的第一门编程课程）。这是有问题的代码：

```
for enemy in enemies:
   if hero.sprite.rect.colliderect(enemy.sprite.rect) or enemy.posy>400:
      hero.health-=1
      initgame()
      break
   else:
      enemy.moveBy(enemyPos, ENEMYVERT)
      enemy.draw() 
```

所以这应该做的是：

1.  检查名为“enemies”的列表中的每个项目（我在其中附加了所有敌人实例）
2.  如果它与英雄精灵碰撞或者他们已经到达屏幕底部
3.  然后从玩家身上移除一条生命，初始化游戏（重新制作敌人列表，重置位置）
4.  并打破“for”循环。
5.  否则，像往常一样移动敌人并攻击他们。

然而，这实际上是从接触到的玩家身上移除所有生命。自从我使用休息后，它不应该停止计算吗？我认为它会一直计算敌人中是否有任何达到 400 像素，从而不断从我的玩家身上移除生命。

这是我的初始化游戏功能

```
def initgame():
    enemies=[]
    createEnemies("1.png", 50, 250)
    createEnemies("2.png", 50, 190)
    createEnemies("3.png", 50, 130)
    createEnemies("4.png", 50, 70)
    createEnemies("5.png", 50, 10)
    enemyPos=0
    enemyDir=-1
    hero.score=0
    restartFlag=False
    for enemy in enemies:
        enemy.draw() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:22:34.490

看起来你没有清空`enemies`，所以旧的加上新的在后面`initgame()`。问题是该行`enemies=[]`正在创建和设置一个局部变量。为了做你想做的事，请尝试：

```
def initgame():
    global enemies
    enemies=[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:23:15.787

试着放

```
global enemies 
```

在 initgame() 中的敌人=[] 之前的行

否则，您不会清除全局敌人变量。一般来说，最好将所有内容放在一个类中并使用 self.enemies 在函数之间共享数据，而不是依赖全局变量。

您将函数放在一个类中，如下所示：

```
class SpaceInvaders:
  def __init__(self):
    self.initgame()

  def initgame(self):
    self.enemies = []
    ...#createEnemies
    self.enemyPos = 0
    self.enemyDir = -1
    #etc

  def run(self):
    #your while loop here 
```

所有应该在函数之间共享的变量现在将被称为 self.. 这将它们与仅在函数内部使用的局部变量（如 for 循环中的“敌人”）区分开来。

您可以通过使对象成为调用运行来使用此类。

```
game = SpaceInvaders()
game.run() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:54:05.853

您的 break 语句应该按预期工作。健康状况一直下降肯定还有另一个原因（除了循环太多）。大概这个原因可以在initgame()中找到。

# android - 有没有办法从网络上获取应用程序图标（通过给定的包）？

> ID：10108292
> 
> 赞同：2
> 
> 时间：2012-04-11T14:43:38.017
> 
> 标签：android, icons, google-play

我知道这不是纯粹的 android 问题，但无论如何我都会尝试。

我正在建立一个网站，我可以在其中获取许多应用程序的包名称（在市场上）。

我需要一种方法来给出包名，并取回它的图标。

有没有办法做到这一点？来自市场？逮捕？或任何其他链接

类似于通过此链接获取网站图标：

[http://g.etfv.co/https://facebook.com](http://g.etfv.co/https://facebook.com)

[http://g.etfv.co/https://google.com](http://g.etfv.co/https://google.com)

* * *

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:55:40.150

使用[条款](http://play.google.com/about/terms.html)禁止使用机器人或其他网络抓取工具：

> Blockquote 3\. 您对 Google Play 的使用 ... 3.3 您同意不通过 Google 提供的界面以外的任何方式访问（或尝试访问）Google Play，除非您在特定情况下被明确允许这样做与谷歌的单独协议。您明确同意不通过任何自动化方式（包括使用脚本、爬虫或类似技术）访问（或试图访问）Google Play，并应确保您遵守网站上任何 robots.txt 文件中的说明谷歌播放网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:48:34.193

你应该看看这个适用于 Android Market 的 API

[http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

或者您可以尝试抓取页面（可能就像这个 api 所做的那样）但是如果它已经完成了，为什么还要这样做......

# html - 具有百分比宽度的跨度

> ID：10108293
> 
> 赞同：3
> 
> 时间：2012-04-11T14:43:41.003
> 
> 标签：html, css-tables

就像桌子一样

```
TD WIDTH 25    TD WIDTH 75 
```

这就是我想通过 DIV/SPAN 实现的目标。我所拥有的：

```
 <span style="background-color: green; width: 25%; display: inline-block;">1</span>
  <span style="background-color: yellow; width: 75%; display: inline-block;">2</span><br />
  <span style="background-color: green; width: 25%; display: inline-block;">a</span>
  <span style="background-color: yellow; width: 75%; display: inline-block;">b</span><br /> 
```

但随后将 span 放到新行。它适用于固定 (px) 大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:48:30.080

使用浮动

```
 <span style="background-color: green; width: 25%; float:left;">1</span>
  <span style="background-color: yellow; width: 75%; float:right;">2</span><br />
  <span style="background-color: green; width: 25%; float:left;">a</span>
  <span style="background-color: yellow; width: 75%; float:right;">b</span><br /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T14:52:39.447

问题在于两个跨度之间的空白。

```
<span style="display:inline:block; width:25%">..</span>
<span style="display:inline:block; width:75%">..</span> 
```

它们之间有一个空间，所以整个东西不会 100% 适合；它是 100% 加上空间宽度的宽度。
如果您删除两个跨度之间的换行符，它将起作用。

```
<span style="display:inline:block; width:25%">..</span><span etc...> 
```

# python - Python：防止字典的键被覆盖

> ID：10108296
> 
> 赞同：1
> 
> 时间：2012-04-11T14:43:48.133
> 
> 标签：python, xml, lxml

我正在尝试将 xml 文档转换为 Python 数据结构。

xml 示例：

```
 <SOFTWARES>
        <PUBLISHER>Microsoft Corporation</PUBLISHER>
        <NAME>Microsoft Office Visio 2010</NAME>
        <VERSION>14.0.6029.1000</VERSION>
        <FOLDER>C:/Program Files/Microsoft Office/</FOLDER>
        <LANGUAGE>Language Neutral</LANGUAGE>
        <INSTALLDATE>2012/03/29</INSTALLDATE>
    </SOFTWARES>
    <SOFTWARES>
        <PUBLISHER>Microsoft</PUBLISHER>
        <NAME>Update for Microsoft Office 2010 (KB2553310) 64-Bit Edition</NAME>
        <INSTALLDATE>0000//0/0/00</INSTALLDATE>
    </SOFTWARES> 
```

lxml.de 有一个很好的例子：[http ://lxml.de/FAQ.html#how-can-i-map-an-xml-tree-into-a-dict-of-dicts](http://lxml.de/FAQ.html#how-can-i-map-an-xml-tree-into-a-dict-of-dicts)

```
def xml_to_dict(element):
    return element.tag, dict(map(xml_to_dict, element)) or element.text 
```

这产生了一个伟大的字典，只有一个缺陷。它将覆盖现有的键。因此，当该过程完成时，我得到：

```
'SOFTWARES': {
    'PUBLISHER': 'Microsoft',
    'NAME': 'Update for Microsoft Office 2010 (KB2553310) 64-Bit Edition',
    'INSTALLDATE': '0000//0/0/00',
}, 
```

哪个是最后一个 SOFTWARES 块，不管它之前有多少。lxml 的功能很好，因为它是递归的，但我想写一些可以处理重复键的东西。最好只是将 SOFTWARES 字典扔到一个列表中，我可以在时机成熟时遍历该列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:51:06.197

针对这种特定情况的最简单解决方案：

```
map(xml_to_dict, xml_document) 
```

这将为您提供字典列表。

# python - 为什么python中没有定义“字典”和“键”？

> ID：10108299
> 
> 赞同：1
> 
> 时间：2012-04-11T14:43:51.167
> 
> 标签：python, json

我很擅长 PHP 并尝试学习 Python。因此，如果我试图按字面意思翻译函数，请原谅我，但这就是我所拥有的：

```
import json
import urllib

url='http://www.example.com/sample.json'
f = urllib.urlopen(url)
data = json.loads(f.read())

for item in data:
    for entry in item:
        print dictionary.keys(entry) 
```

我知道那`item`有 dict 类型，因为我这样做了`print type(item)`。但是当我尝试运行上面的代码时，我得到了`NameError: name 'dictionary' is not defined`——我需要导入一个定义字典函数的库吗？如果是这样，哪个图书馆？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T14:46:03.430

写

```
print entry.keys() 
```

代替

```
print dictionary.keys(entry) 
```

我建议看一下[教程](http://docs.python.org/tutorial/datastructures.html#dictionaries)和[库参考](http://docs.python.org/library/stdtypes.html#mapping-types-dict)。

# sql-server - 将 bcp 放入带有另一个 tsql 语句的事务中

> ID：10108302
> 
> 赞同：3
> 
> 时间：2012-04-11T14:44:09.217
> 
> 标签：sql-server, tsql, transactions, bcp

在来自 tsql 的 bcp 输出命令完成其工作（导出文件）之后，您通常希望随后清理源。这通常涉及截断源表或设置记录确实已处理的标志。

如果你不清理下一个导出当然会包括旧的和已经导出的行。

我的实验表明，您不能在事务中放置 bcp。我的假设是它是一个进程外工具并且不加入发起事务（如果我错了，请纠正我）。

问题是是否有可能以其他方式将这两个动作作为一个**工作单元执行？**要么一起失败，要么一起成功。

我希望有一个“发布操作”可以传递给 bcp，以便 bcp 本身可以保证像 begaviour 这样的交易。

谢谢你的想法，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:53:26.450

怎么样：通过将它们的 PK id 写入处理表来标记所有行。接下来使用 xp_cmdshell 运行 BCP 并检查错误（[参见本文的示例](http://www.sqlservercentral.com/articles/Error+Handling/69196/)）。如果一切运行良好，则使用处理表查找要删除的原始行。否则，请清除该处理表，然后您就可以重试了。

# c# - 制作 WinForms 应用程序 WinForms/Console 混合

> ID：10108310
> 
> 赞同：-2
> 
> 时间：2012-04-11T14:44:25.663
> 
> 标签：c#, winforms, console, hybrid

我有一个 WinForms 应用程序，我也希望它能够作为控制台应用程序运行（带有 2 个命令行参数）。

我尝试了这个问题[Behavior in WinForm/Console Hybrid Application](https://stackoverflow.com/questions/7743387/behavior-in-winform-console-hybrid-application)的方法。但在这种情况下，不能从 Program 类 (Program.cs) 访问 FormMain.cs（FormMain 类）的方法。

我应该如何修改代码才能从 Program.cs 执行 FormMain.cs 方法？

**UPD**

***Program.cs**代码是*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace Feature
{

internal static class NativeMethods
{
    [DllImport("kernel32.dll")]
    internal static extern Boolean AllocConsole();
}

static class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        if (args.Length == 0)
        {
            // run as windows app
            Application.EnableVisualStyles();
            Application.Run(new FormMain(args));
        }
        else
        {
            // run as console app
            NativeMethods.AllocConsole();
            //??? How to access the methods of FormMain here ???
        }
    }
} 
```

}

*FormMain.cs**代码**（我已经减少了一点）是*

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Collections;
using System.Xml.XPath;
using System.Xml;
using Microsoft.Office.Interop.Excel;
using System.Reflection;

namespace Feature
{
public partial class FormMain : Form
{
    public FormMain(string[] Args)
    {
        InitializeComponent();
    }

    public ArrayList Errors = new ArrayList();

    public ArrayList GetDirectoriesRecursively(string startPath)
    {
        string[] oNewDirectories = Directory.GetDirectories(startPath);
        ArrayList oDirectories = new ArrayList();
        ArrayList oDirectoriesNewList;

        foreach (string oCurrent in oNewDirectories)
        {
            oDirectories.Add(oCurrent);
            oDirectoriesNewList = GetDirectoriesRecursively(oCurrent);
            if (oDirectoriesNewList.Count > 0) oDirectories.AddRange(oDirectoriesNewList);
        }
        return oDirectories;
    }

    public ArrayList GetFilesInFolder(string startPath, string pattern)
    {
        string[] oNewFiles = Directory.GetFiles(startPath, pattern);
        ArrayList oFiles = new ArrayList();
        foreach (string oCurrent in oNewFiles)
            oFiles.Add(oCurrent);
        return oFiles;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:55:44.793

您可能会向后看：与其希望访问您在 Form.cs 中找到的有用函数（如果它们很有用的话），不如将它们移动到可以更轻松地控制其可访问性的外部位置.

# asp.net - 如何检查数据表中的字节数组是否为空

> ID：10108313
> 
> 赞同：1
> 
> 时间：2012-04-11T14:44:31.850
> 
> 标签：asp.net, bytearray

```
if(oDataTable.Rows[0]["File"] != null) //byte array
{

} 
```

我表中的文件列似乎为空。但是，当我尝试在代码部分检查它是否为空时，它不会转到其他部分。有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:47:23.117

[我认为您应该使用Convert.IsDBNull](http://msdn.microsoft.com/en-us/library/system.convert.isdbnull.aspx)检查 DBNull ：

```
if(!Convert.IsDBNull(oDataTable.Rows[0]["File"]))
{
} 
```

# javascript - jQuery UI 自动完成功能

> ID：10108317
> 
> 赞同：2
> 
> 时间：2012-04-11T14:44:42.857
> 
> 标签：javascript, jquery

我试图在我的网站上放置一个自动完成输入，我决定只使用 jQuery UI 自动完成小部件，因为我遇到了一些问题。但这并不能解决所有问题！

这是我所做的示例的链接：http: [//jsfiddle.net/Tg7Rt/2/](http://jsfiddle.net/Tg7Rt/2/)

这是我的问题：

*   用户需要点击下拉的 ui-menu 框中的实际单词。我希望用户能够单击同一行，即单词的右侧。

*   假设用户想输入“桃子”这个词，但在自动完成中找不到。我希望用户按“输入”并能够将单词添加到 .list

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:52:16.510

对于第一个请求，请记住还包括 jQuery ui css。对于第二个，添加

```
$('#my_input').keyup(function(e){
    if(e.which === 13){
        $('ul').append("<li>" + this.value + "</li>");
        this.value = '';
    }

}); 
```

[http://jsfiddle.net/Tg7Rt/7/](http://jsfiddle.net/Tg7Rt/7/)

# c# - 远程机器的 Streamwriter 问题

> ID：10108319
> 
> 赞同：3
> 
> 时间：2012-04-11T14:44:50.683
> 
> 标签：c#, streamwriter

我正在尝试在远程机器上创建一个文件，但我收到“找不到网络名称”。我检查了网络路径，并且能够从我的机器访问该路径。你能告诉我有什么问题吗？

这是我的代码。

```
 using (StreamWriter sw = new StreamWriter("\\\\servername\\TEST1\\TEST\\NEWFILE.csv", true))
    {
        sw.WriteLine(sw);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:29:45.240

Go to \servername\TEST1 and give write permission to the user or aspnet (if you have a web application) on ***test*** folder and then re-run your program. It will work.

To give write permissions, just refer to this article:
[How to share a folder/File](http://technet.microsoft.com/en-us/library/bb727008.aspx)

In case it still does not work, replace servername with server IP address and do the same as stated above.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T19:49:10.097

这肯定是一个安全问题。您需要授予远程计算机的写入权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:48:27.477

向运行此应用程序的用户授予访问权限，它是 IIS 池或 Windows 服务等

# ruby - nil:NilClass (NoMethodError) 的未定义方法`>='

> ID：10108320
> 
> 赞同：0
> 
> 时间：2012-04-11T14:44:54.007
> 
> 标签：ruby

我正在尝试用 ruby​​ 编写一个模块，每当我使用比较运算符时，都会出现上述错误。没有一个操作员工作。

```
if self.health >= opponent.health
        [:attack, opponent]
    else
        [:rest]
    end 
```

如果我犯了某种错误，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:47:59.513

`>=`只能与 Comparable 对象一起使用。您的错误消息表明`self.health`是`nil`. 您需要对 和 都有一个 Comparable 对象`self.health`，`opponent.health`并进一步在它们之间定义比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:54:43.300

正如@sawa 所说，您进行比较的原因是引发异常，即`self.health`未定义该`nil`方法（尽管@user1252434 提到，解释并不完全正确。该方法可以在任何类中定义，有或没有模块）。根据您要比较的内容，使用默认值进行此类比较可能很容易。对于对象，您可以调用使用（空字符串）作为比较的默认值： `>=``Comparable``>=``Comparable``String``to_s``""`

```
self.health.to_s >= opponent.health.to_s
#Compares "" >= "" if the attributes are nil 
```

对于 Fixnum 对象（整数），您可以使用`to_i`用作`0`默认值：

```
self.health.to_i >= opponent.health.to_i
#Compares 0 >= 0 if the attributes are nil 
```

对于 Float 对象，您可以使用`to_f`to`0.0`作为默认值：

```
self.health.to_f >= opponent.health.to_f
#Compares 0.0 >= 0.0 if the attributes are nil 
```

# vba - 如何以编程方式在 VBA 中创建格式化文本？

> ID：10108323
> 
> 赞同：1
> 
> 时间：2012-04-11T14:45:04.723
> 
> 标签：vba, ms-word, ms-office

我需要以编程方式创建一个文本（2 行，多种字体），然后将其放置在文档的多个表格（<100）中。

我发现解决这个问题的唯一方法是创建一个`Word.Paragraph`并将其范围复制到单元格中。这种方法的问题是：在创建段落时，它被添加到文档中。

我想创建一个格式化的文本，就像创建一个字符串一样，全部在代码中而不修改文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:48:43.617

我使用的一种方法是使用 HTML 或富文本，它本质上是一个字符串。我相当确定 Word 可以使用正确的 com 对象设置来解释其中任何一个。

我尝试过的另一种方法是使用剪贴板而不是单词对象。你可以这样做：

（进口`system.windows.forms`）

```
Clipboard.SetText(Me.RichTextBox1.Rtf, TextDataFormat.Rtf)
ApplicationName.Selection.Paste() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T00:34:06.347

你能[在隐藏文本](https://stackoverflow.com/questions/20690375/programmatically-inserting-hidden-text-into-a-word-2010-table)和[删除段落上](https://stackoverflow.com/questions/829947/ms-word-macro-delete-paragraphs)使用它吗？

像这样的东西：

```
Sub CreateNewWordDoc()
  Dim para As Word.Paragraph

  Set para = ActiveDocument.Paragraphs.Add
  para.Range.Font.Hidden = True
  ' Do your manipulation
  para.Range.Text = "Hello world"
  para.Range.Font.Name = "Tahoma"
  para.Range.Font.ColorIndex = wdBlue
  ' Now remove the paragraph as if it never existed!
  para.Range.Delete

End Sub 
```

# php - 以编程方式从页面中删除退出弹出窗口？

> ID：10108327
> 
> 赞同：-2
> 
> 时间：2012-04-11T14:45:13.757
> 
> 标签：php, javascript, html, iframe

我有一个页面 A 有退出弹出窗口。我希望它显示在页面 B 上。我使用 iframe 在 B 上显示页面 A。

编辑：页面 A 有一个退出弹出窗口，这是我在第 2 页中不想要的。

但是页面 A 有烦人的弹出窗口。假设我无法编辑页面 A 的代码。我可以在页面 B 中制作一些代码吗？删除退出弹出窗口？

请向我提供示例代码。我希望它在 My Lamp Shared 主机上运行。

如果需要，我可以使用任何东西来代替 iframe。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:51:47.973

我不知道你的意思，但如果你想使用弹出，你可以使用[jQuery fancybox 插件](http://fancybox.net/)

# c++ - gcc 4.7 给我错误信息

> ID：10108328
> 
> 赞同：-3
> 
> 时间：2012-04-11T14:45:16.517
> 
> 标签：c++, gcc

我有 Debian 6.04，包含的最新 gcc 版本是 gcc 4.4，这个版本不支持 C++11，我正在寻找另一个支持 C++11 的版本（某些功能不完全支持），所以我遵循这个[页](http://nosemaj.org/debian-gcc-4-7)

我建议安装它，我的 NetBeans IDE 成功找到 gcc 4.7 并链接它，但是当我使用 std::unique_ptr 使用测试编译代码时，我收到以下错误消息：

***此文件需要对 \ISO C++ 2011 标准的编译器和库支持。此支持目前是实验性的，必须使用 -std=c++11 或 -std=gnu++11 编译器选项启用。***

我找到了错误来源，她是：

**位/c++0x_warning.h**

```
#ifndef _CXX0X_WARNING_H
#define _CXX0X_WARNING_H 1

#ifndef __GXX_EXPERIMENTAL_CXX0X__
#error This file requires compiler and library support for the \
ISO C++ 2011 standard. This support is currently experimental, and must be \
enabled with the -std=c++11 or -std=gnu++11 compiler options.
#endif

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:47:15.483

错误说明了一切。尝试在 NetBeans IDE 中添加`-std=c++11`或`-std=gnu++11`编译器选项。

我没有使用过 Netbeans，但请参阅此[链接](http://forums.netbeans.org/post-95374.html)，其中显示了构建变量的快照，这是您需要添加编译器选项的地方。

# jquery - Firefox jQuery 表单提交不起作用

> ID：10108330
> 
> 赞同：5
> 
> 时间：2012-04-11T14:45:22.843
> 
> 标签：jquery, forms, firefox, form-submit

```
var makeField = function(name, value) {
    return $('<input />').attr({
        type: 'hidden',
        name: name,
        value: value
    });
};

$('.login').on('click', function() {
    var form = $('<form />').attr('method', 'POST');

    form.append(makeField('n0', 'data1'));
    form.append(makeField('n1', 'data2'));
    form.append(makeField('n2', 'data3'));

    $(document).append(form);
    form.submit();
}); 
```

上面的代码在 Safari、Chrome 和 Opera 中运行良好，但 firefox 忽略了`form.submit();`. `console.log('...');`我通过在提交调用的上方和下方添加来测试上面的代码，并且它执行没有错误。我也试过打电话`$(form).submit();`，我得到了同样不想要的结果。

有没有人遇到过这个问题，或者有解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:09:26.120

> Updated with your new code

```
$(function() {
    var makeField = function(name, value) {
        return $('<input />').attr({
            type: 'hidden',
            name: name,
            value: value
        });
    };

     $(document).on('click', '.login', function() {
        var form = $("<form />").attr({ method: "POST" }).append(
                makeField('n0', 'data1'),
                makeField('n1', 'data2'),
                makeField('n2', 'data3')
            );

        // just adding a callback on submit here to show it works
        form.submit(function(e){ alert("Submitting Form"); });

        $("body").append(form);
        form.submit();
    });
}) 
```

See [WORKING jsFiddle in FF HERE](http://jsfiddle.net/YmDG3/5/)

# css - 高度 div 100% 带填充

> ID：10108332
> 
> 赞同：4
> 
> 时间：2012-04-11T14:45:26.893
> 
> 标签：css, html, height

我有一个设置需要一个 div 填充 100% 的屏幕，边距为 10px。在其中，顶部有一个导航窗格，下面是一个带有填充的内容 div 和一个带有填充的内部内容潜水。但是，使用父级的 100% 高度然后添加边距/填充将 div 拉伸到 100% + 边距 + 填充。有解决办法吗？我注意到了绝对定位技巧，但是如果我绝对定位我的内容 div，那会打乱其他 div 的流程。它还使调整大小和流动非液体。有什么方法可以保留这些东西并仍然实现我的目标，最好使用 CSS 而不是 javascript？

下面的代码：

ASPX

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
    <link rel="Stylesheet" href="test.css" />
</head>
<body>
    <div id="wrapper">
        <div id="navigation">
        </div>
        <div id="content">
            <div id="inner">

            </div>
        </div>
    </div>
</body>
</html> 
```

CSS

```
html, body
{
    height:100%;
    width:100%;
    margin:0px;
    padding:0px;
    background-color:Black;
}
#wrapper
{
    height:100%;
    margin:10px;
    background-color:Blue;
}
#navigation
{
    height:100px;
    background-color:Green;   
}
#content
{
    height:100%;
    padding:10px;
    background-color:Orange;
}
#inner
{  
    height:100%;
    width:100%;
    padding:5px;
    background-color:Lime;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-11T14:55:21.007

您可以尝试添加`box-sizing:border-box`到任何想要同时具有 100% 高度和填充的元素。

在IE8+和不错的浏览器下工作，所以浏览器支持其实还不错

[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:52:11.430

你可以试试两个...

1) 将包装、导航、内容和内部的高度更改为 98% 左右。

2）尝试为包装器和其他元素添加一个透明的 1px 实心边框。这通常会改变元素的边距与边距关系。

希望这可以帮助

# sql-server - Sql Server Xml 转表逻辑

> ID：10108335
> 
> 赞同：3
> 
> 时间：2012-04-11T14:45:39.677
> 
> 标签：sql-server, xml, sql-server-2008

我需要查询具有多个 REPORT 标记元素的 Xml 数据。需要对其进行过滤以仅返回 REPORTID 等于给定名称的行。我试图执行这个过滤器，但没有运气。有人可以在这里使用 Sql Server Xml 函数为我指明正确的方向吗？

基本上，我正在寻找我的结果集以表格形式返回，如下所示：

```
ID
------
1
2
3 
```

鉴于以下情况，我将如何在 REPORTID (/TEST/REPORT/TITLE[@ReportId = "Report One"]) 等于“Report One”的 REPORT 行中选择出来？

```
DECLARE @Xml XML, @ReportId VARCHAR(200);
SET @ReportId = 'Report One';

SET @Xml = '
<TEST>
<REPORT ReportType="Type One">
  <TITLE ReportId="Report One">
    <TITLE1>Title One</TITLE1>
  </TITLE>
  <HEADER>
    <Run_Date OrigName="Run Date">4/10/2012</Run_Date>
  </HEADER>
  <BODY>
    <TABLE1>
      <DATA />
      <ROW>
        <ID>1</ID>
      </ROW>
      <ROW>
        <ID>2</ID>
      </ROW>
      <ROW>
        <ID>3</ID>
      </ROW>
    </TABLE1>
  </BODY>
</REPORT>
<REPORT ReportType="Type Two">
  <TITLE ReportId="Report Two">
    <TITLE1>Title Two</TITLE1>
  </TITLE>
  <HEADER>
    <Run_Date OrigName="Run Date">4/10/2012</Run_Date>
  </HEADER>
  <BODY>
    <TABLE1>
      <DATA />
      <ROW>
        <ID>4</ID>
      </ROW>
      <ROW>
        <ID>5</ID>
      </ROW>
      <ROW>
        <ID>6</ID>
      </ROW>
    </TABLE1>
  </BODY>
</REPORT>
</TEST>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:24:07.110

```
select I.N.value('.', 'int') as ID 
from @Xml.nodes('TEST/REPORT') as R(N)
  cross apply R.N.nodes('BODY/TABLE1/ROW/ID') as I(N)
where R.N.exist('TITLE[@ReportId = sql:variable("@ReportId")]') = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T20:04:05.770

我意识到这已经快三岁了，但我无法抗拒。如果在nodes() 中展开XPATH 表达式，则不需要CROSS APPLY。

```
SELECT  ID = c.value('.', 'int')
FROM @Xml.nodes('/TEST/REPORT[TITLE/@ReportId=sql:variable("@ReportId")]/BODY/TABLE1/ROW/ID') x(c) 
```

# c++ - 求二维向量的大小

> ID：10108340
> 
> 赞同：-2
> 
> 时间：2012-04-11T14:45:51.960
> 
> 标签：c++, vector, size

我有一个关于查找 2D 矢量大小的问题。我的简单问题是我有一个向量，其中存储三个“形状”，每个形状都有随机数量的命中点（存储为笛卡尔坐标 {x,y,z}）并且每个命中点都有随机颜色（存储为 RGB）我想知道每个形状有多少生命值。如果我做：

```
VectorOfShapes.size() 
```

我得到答案

```
3 
```

[这是在此处](https://stackoverflow.com/questions/4534830/c-size-of-a-2d-vector)之前提出的类似问题 。但这对我没有帮助。他们的解决方案是

```
VectorOfShapes[1].size() 
```

我试过了，我得到了以下错误“[错误C2228：'.size'的左边必须有类/结构/联合](https://stackoverflow.com/questions/4175971/error-c2228-left-of-size-must-have-class-struct-union) ”。答案很好（点击链接）。它仍然没有帮助我（或者我很愚蠢）......有什么想法吗？

//---------添加信息

```
class World {
public:
vector<Flux*>   VectorOfShapes;
void
containers(int obnum, Ray reflect, RGBColor Ll);
void                    
build(void);
void
add_vectorshape(Flux* vectorshape_ptr)
private:
void
delete_VectorOfShapes
}
inline void
World::add_vectorshape(Flux* vectorshape_ptr){
VectorOfShapes.push_back(vectorshape_ptr);
}

void
World::containers(int obnum, Ray reflect, RGBColor Ll)
{
vectorOfShapes[obnum]->push(reflect);
VectorOfShapes[obnum]->push(Ll);
int sizers = VectorOfShapes[0].size(); //this is where the code is giving me errors
}

void                                                
World::build(void) {
Flux* vectorshape_ptr1 = new Flux;
add_vectorshape(vectorshape_ptr1);
Flux* vectorshape_ptr2 = new Flux;
add_vectorshape(vectorshape_ptr2);
Flux* vectorshape_ptr3 = new Flux;
add_vectorshape(vectorshape_ptr3);
}

void
World::delete_VectorOfShapes(void) {
int num_VectorOfShapes = VectorOfShapes.size();

for (int j = 0; j < num_VectorOfShapes; j++) {
    delete VectorOfShapes[j];
    VectorOfShapes[j] = NULL;
}   

VectorOfShapes.erase (VectorOfShapes.begin(), VectorOfShapes.end());
}

    class Flux{

public:
std::vector<Ray> rays;
std::vector<RGBColor>    L;

void push(Ray ray); 
void push(RGBColor Ls) ;   

};
inline  void 
Flux::push(Ray ray) { 
rays.push_back(ray); 
}

inline void 
Flux::push(RGBColor Ls){ 
L.push_back(Ls); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:12:45.377

根据提供以下声明的评论`fluxs`：

```
vector<Flux*> fluxs; 
```

`fluxs`是一个指针向量，意思是：

```
fluxs[i] 
```

返回 a `Flux*`，而不是 a ，`Flux`因此您必须使用`->`，就像您在发布的代码中设置属性所做的那样。如果没有我的定义，`Flux`我假设有一个 getter 用于获取`hitpoints`and ，如前所述， 中恰好有三个元素`fluxs`，因此要获得其中的总生命值，`fluxs`您可以：

```
int total_hitpoints = fluxs[0]->get_hitpoints() +
                      fluxs[1]->get_hitpoints() +
                      fluxs[2]->get_hitpoints(); 
```

编辑：

如果*命中*点计数是`Flux::rays`(or `Flux::L`) 中的元素数，则：

```
int total_hitpoints = fluxs[0]->rays.size() +
                      fluxs[1]->rays.size() +
                      fluxs[2]->rays.size(); 
```

# php - 将复杂对象从 Flex 发送到 PHP

> ID：10108345
> 
> 赞同：0
> 
> 时间：2012-04-11T14:46:00.860
> 
> 标签：php, actionscript-3, apache-flex

我希望能够将复杂数据从 Flex 发送到 PHP，并能够通过 PHP 脚本解析该数据。我能够发送一个基本的键值对对象，但任何比这更复杂的东西都不会相应地转换。

这有效...

```
ht.send({label:"FOO", label2:"FAA", label3:"FII", label4:"FEE"}); 
```

它按预期翻译

这行不通...

```
ht.send({obj11:{label:"FOO", label2:"FAA"}, obj2:{label3:"FII", label4:"FEE"}}); 
```

它以字符串形式发布`[object][object]`。

是否可以将复杂数据发送到 PHP？我试过了`JSON.encode(object)`。我需要改为发送 XML 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:56:34.167

我相信 Json 没有工作，因为你没有正确设置它

```
var myComplexObject:Object ={obj11:{label:"FOO", label2:"FAA"}, obj2:{label3:"FII", label4:"FEE"}}

var dataToSend:Object = { data: JSON.encode(myComplexObject) }

ht.send(dataToSend);

// on the php side you will have something like so

$data = json_decode(  $_POST['data'] );

echo '<pre>';
print_r( $data ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:21:55.123

我强烈建议使用 AMF 而不是 JSON，因为它在 Flex 中具有原生支持。

如果您使用大型数据集，我发现 AMF 更有效，但归根结底，它归结为您最熟悉的。不过，AMF 在 Flex 中会更容易使用。

有趣的阅​​读：

[http://web.archive.org/web/20090129160211/http://www.5etdemi.com/blog/archives/2006/12/clearing-the-fud-on-amfphps-speed-versus-json-and- xml/](http://web.archive.org/web/20090129160211/http://www.5etdemi.com/blog/archives/2006/12/clearing-the-fud-on-amfphps-speed-versus-json-and-xml/)

[http://web.archive.org/web/20090210160254/http://blogs.adobe.com/mikepotter/2006/07/php_and_flex_js.html](http://web.archive.org/web/20090210160254/http://blogs.adobe.com/mikepotter/2006/07/php_and_flex_js.html)

# javascript - 使用 Python 从包含非 JSON 声明的 .js 文件中提取 JSON？

> ID：10108347
> 
> 赞同：0
> 
> 时间：2012-04-11T14:46:08.283
> 
> 标签：javascript, python, json

我继承了许多 javascript 文件，其中包含 JSON 对象和其他 js 声明（函数、变量）的混合。我正在编写一个 python 脚本来将 JSON 对象中包含的数据移动到另一个系统中。

我想避免在本质上是一次性脚本中复制任何类型的解析器功能，并避免手动梳理文件。

是否有一个很好的（pythonic）解决方案来过滤掉这些文件中的 JSON 并将其传递给 json.loads() ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:23:17.433

您可以使用正则表达式将您感兴趣的 JSON 对象与可用文件隔离开来。这是[一个相关的讨论](https://stackoverflow.com/questions/2583472/regex-to-validate-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:50:28.933

如果数据只包含 json，那么可能，但如果它包含其他 javascript 声明，那么它不会被认为是格式正确的 json

# ninject - 绑定到属性总是返回 null

> ID：10108352
> 
> 赞同：0
> 
> 时间：2012-04-11T14:46:21.300
> 
> 标签：ninject, ninject.web.mvc

我正在尝试使用 Ninject 将存储库绑定到属性，但始终获取绑定对象的空引用。我将使用下面的代码来解释这个问题。

```
 public interface IServiceRepository
    {
        User GetUser(string email);
        IQueryable<Statistic> GetStatisticForCurrentMonth(string ip);
        void InsertStatistic(ConversionModel conversionModel);

class ServiceRepository : IServiceRepository
{
//Implementation of the Interface
} 
```

我想`bind the repository above`在`class below`创建课程时进行。不幸的是，`Repository`对象总是`null`. 也许我误解了 Ninject 的工作原理？如何解决问题？

```
 public class Converter
    {
        [Inject]
        public static IServiceRepository Repository { get; set; }
        private static Converter _converter;

        public static Converter Instance
        {
            get { return _Converter  ?? (_Converter  = new Converter ());
        }
} 
```

Ninject 激活码

```
private static void RegisterServices(IKernel kernel)
{
   kernel.Bind<IServiceRepository>().ToMethod(context => Converter.Repository);
} 
```

**更新**

我试图重写这样的代码

```
 public class Converter
    {
        private readonly IServiceRepository _repository;

        public Converter(IServiceRepository repository)
        {
            _repository = repository;
        }

//skip code
} 
```

考试...

```
 [TestMethod]
    public void ConverterInstanceCreated()
    {           
         using (IKernel kernel = new StandardKernel())
         {                 
             kernel.Bind<IServiceRepository>().To<ServiceRepository>();
             Assert.IsNotNull(kernel.Get<Converter>());
         }
    } 
```

给出例外

```
Test method PC.Tests.NinjectTest.ConverterInstanceCreated threw exception: 
Ninject.ActivationException: Error activating IServiceRepository
No matching bindings are available, and the type is not self-bindable.
Activation path:
  2) Injection of dependency IServiceRepository into parameter repository of constructor of type Converter
  1) Request for Converter 
```

我刚刚输了，我试图了解 Ninject 如何工作了大约一周而没有任何成功。就我而言，为什么会引发此异常？

还请有人将一个存储库注入的工作示例发布到单例类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:48:26.190

Ninject 不注入静力学。将 coynverter 更改为非静态类，并在 ninject 中将其配置为 Singleton。还使用构造函数注入并使 repo 成为私有字段。

现在您可以将转换器注入到您需要它的构造函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:58:37.290

即使您使用的是属性注入而不是构造函数注入，我认为它仍然是

```
private static void RegisterServices(IKernel kernel)
{
  kernel.Bind<IServiceRepository>().To<ServiceRepository>();
} 
```

因为 ninject 仍然只需要知道要映射到接口的具体类型

我还没有测试过，如果错了，我深表歉意。

# ruby-on-rails - Ruby on Rails 中的时间戳图像

> ID：10108353
> 
> 赞同：0
> 
> 时间：2012-04-11T14:46:22.537
> 
> 标签：ruby-on-rails, ruby

我知道 ROR 默认为我的资产附加时间戳。但只有当我使用资产助手时才会出现这种情况吗？如果我手动添加 img src 标签，Rails 是否会附加时间戳，即

```
<img src ="blah.gif"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:50:10.550

把它`blah.gif`放在你的`public`目录中。然后使用`image`标签。

# maven - Maven 构建 - 在项目 /src/main/webapp/WEB-INF/classes 中包含类

> ID：10108355
> 
> 赞同：1
> 
> 时间：2012-04-11T14:46:36.020
> 
> 标签：maven

我们必须在我们没有开发的应用程序之上构建，我们需要从 Jar 的 WEB-INF 目录中包含一些类。我们如何让 Maven 做到这一点？eclipse 部署目录包括本地部署，但构建的战争看起来不同，不包括我们放置在源中的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:16:37.000

您可以使用依赖项插件解包依赖项选项从依赖项中解包并将其输出到您想要的位置。

[http://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html)

或者，您可以使用 maven 程序集插件的解包描述符来实现相同的目的。

# iphone - 如何在字典值中设置参数

> ID：10108360
> 
> 赞同：0
> 
> 时间：2012-04-11T14:46:47.810
> 
> 标签：iphone

我将数据保存在外部类文件中，但在将 Bool 值保存为参数时出现错误。下面是源代码 .savefile.h

```
-(void) saveDecreasedActivity:(NSInteger) bathing
                meal:(NSInteger) meal withTitle:(NSString *)title independentItem:(BOOL)timeItem;

        {
            NSMutableDictionary *lDataObj = [[NSMutableDictionary alloc] init];

           [lDataDict setValue:lSeqCounter forKey:@"seqCounter"];

            [lDataObj setValue:timeItem forKey:@"independentItem"]; 
        } 
```

我已经将数据保存在其他类中

```
 [saver saveDecreasedActivity:[self.bathingControl selectedSegmentIndex]
                              meal:[self.mealControl selectedSegmentIndex] withTitle:lTitle independentItem:YES]; 
```

它正在显示

```
timeItem is incompatible integer to pointer conversion sending "BOOL" (aka singned char) to parameter of type id 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:51:20.983

您不能将原始类型（整数、布尔值等）存储在 an`NSDcitionary`中，它是键值对的集合（[请参阅 docs](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)）。

在您的情况下，您可以使用：

```
[NSNumber numberWithBool: timeItem]; 
```

在：

```
[lDataObj setValue:[NSNumber numberWithBool: timeItem] forKey:@"independentItem"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:51:46.953

您只能将对象存储在字典中，而 BOOL 是一种类型，因此您必须像这样包装它：

```
[dictionary setValue:[NSNumber numberWithBool:aBool] forKey:@"yourKey"]; 
```

并像这样检索它：

```
BOOL aBool = [[dictionary objectForKey:@"yourKey"] boolValue]; 
```

检查 NSNumber 类参考以获取更多信息。

# c# - 使用 Graph API c# unity3d 访问 facebook 以获取帖子等

> ID：10108361
> 
> 赞同：3
> 
> 时间：2012-04-11T14:46:54.207
> 
> 标签：c#, facebook, facebook-graph-api, unity3d

我在 MonoDevelop 中使用 C# 和 Graph API 来与用户的 Facebook 页面进行交互。

不过，我已经完全糊涂了。

这些是正确的步骤吗？

1.  在此处创建 facebook 应用程序：http: [//developers.facebook.com/](http://developers.facebook.com/)
2.  使用 app ID 和 app Secret 以编程方式获取访问令牌。

如果是这样，我该如何从这里发布到用户墙？

我做了很多研究，但找不到任何特别有用的东西。

我试过使用这个[ASP.NET Post to Facebook Wall](https://stackoverflow.com/questions/6024912/asp-net-post-to-facebook-wall)，但墙上什么都没有出现。

有没有教程或其他东西可以让我轻松愉快地完成整个过程？

所有帮助或指针表示赞赏。

如前所述，我正在使用 unity3d、单声道中的 c# 和 facebook graph api。

[编辑] 我希望它可以在 android 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:39:11.470

使用[C# Facebook 库](https://github.com/facebook-csharp-sdk)。有一个名为 facebook-aspnet-sample 的示例项目，它显示了身份验证和登录。此外，请查看本[教程页面](http://www.ifc0nfig.com/accessing-facebook-within-unity/)，该页面涉及如何从 Unity3d 游戏连接到 Facebook。教程很短，但演示项目下载很有用。

还有一些[插件可以](http://gameprefabs.com/products/show/96)让 Unity3d 访问 Facebook。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:48:56.720

在你准备好你的 FB 应用程序之后，你确实需要获得一个令牌。但是，始终在 USER 的上下文中请求令牌 - 因此用户应该在网站上进行身份验证。这意味着应该显示 Facebook 登录对话框 - 这将询问用户他是否确实信任该应用程序。有不同的方法可以做到这一点 - 这是关于 FB 身份验证的通用页面： [https](https://developers.facebook.com/docs/authentication/) ://developers.facebook.com/docs/authentication/ ，这个解释了如何在 Android 中执行此操作：[https://developers.facebook .com/docs/mobile/android/sso/](https://developers.facebook.com/docs/mobile/android/sso/)

如果您想使用 JavaScript 身份验证（我个人在 MVC3 项目中使用），这里有一些来自[https://developers.facebook.com/docs/authentication/client-side/](https://developers.facebook.com/docs/authentication/client-side/)的修改示例。请记住将应用程序 ID 和权限更改为您需要的。

```
<div id="fb-root"></div>
<script>
    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));

    // Init the SDK upon load
    window.fbAsyncInit = function () {
        FB.init({
            appId: '@EventController.FB_APP_ID', // App ID
            channelUrl: '//' + window.location.hostname + '/channel.htm', // Path to your Channel File
            status: false, // check login status
            cookie: false, // enable cookies to allow the server to access the session
            xfbml: false  // parse XFBML
        });

        // listen for and handle auth.statusChange events
        FB.Event.subscribe('auth.statusChange', function (response) {
            if (response.authResponse) {
                // user has auth'd your app and is logged into Facebook
                FB.api('/me', function (me) {
                    // get info about the user, for example
                })
                //document.getElementById('auth-loggedout').style.display = 'none';
            } else {
                // user has not auth'd your app, or is not logged into Facebook
                //document.getElementById('auth-loggedout').style.display = 'block';
            }
        });

        // respond to clicks on the login and logout links
        document.getElementById('auth-loginlink').addEventListener('click', function () {
            FB.login(function (response) {
                // handle the response
                if (response.authResponse != null) {
                    // HERE IS THE TOKEN YOU CAN USE
                    var token = response.authResponse.accessToken;
                } else {

                }
                // AND THESE ARE THE PERMISSIONS YOU WANT YOUR APP TO REQUEST
            }, { scope: 'manage_pages,publish_stream' });
        });
    };
</script> 
```

这里有一个问题 - 您的 FB 应用程序应该在 App -> Settings -> Website URL 字段中有您的网站 URL（即使它是[http://localhost/ ）。](http://localhost/)此外，您应该将 channel.htm 文件放入您网站的根目录，其中包含一行代码：

```
<script src="//connect.facebook.net/en_US/all.js"> 
```

# dotnetopenauth - DotNetOpenAuth2.ResourceServer.VerifyAccess 中的用户名为空

> ID：10108363
> 
> 赞同：0
> 
> 时间：2012-04-11T14:46:58.613
> 
> 标签：dotnetopenauth

我已经基于示例实现了一个授权服务器，并且正在接收一个访问令牌以响应客户端凭据请求。据我了解，此访问令牌的用户名为空，因为它与用户无关。

我也基于示例实现了一个资源服务器。当我尝试在 OAuthAuthorizationManager.VerifyOAuth2 中验证我的 wcf 服务器（资源服务器）中的访问令牌时，我从

```
var error = resourceServer.VerifyAccess(httpRequestInfo, out result); 
```

如何修改 OAuthAuthorizationManager 以允许空用户名？

我是否即时创建通用主体并将其分配给令牌中的范围。即我应该使用

```
var error = resourceServer.VerifyAccess(httpRequestInfo, out userName, out scope); 
```

反而？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:01:37.467

这是 DotNetOpenAuth v4.0 的问题。v4.1 已修复此问题。它尚未发布，但如果您将其指向此频道，您可以从 NuGet 获取副本： [http ://teamcity.dotnetopenauth.net:82/guestAuth/app/nuget/v1/FeedService.svc](http://teamcity.dotnetopenauth.net:82/guestAuth/app/nuget/v1/FeedService.svc)

# ios - 视频录制就像会说话的汤姆应用程序

> ID：10108365
> 
> 赞同：0
> 
> 时间：2012-04-11T14:47:01.680
> 
> 标签：ios, xcode, cocos2d-iphone, video-recording

[我正在开发像会说话的汤姆这样的应用程序。当我们触摸 Iphone 屏幕时会产生一些带有声音的狗动画。为此，我实现了除了 iPhone 屏幕的视频录制之外的所有内容。我基于这里](http://purplelilgirl.tumblr.com/post/10974345146/mini-tutorial-how-to-capture-video-of-iphone-app-in)实现了 iphone 屏幕的视频录制..它记录了没有声音的狗动画。我必须做什么才能在视频文件中包含音频？是否有可用的示例代码？

如果你使用 cocos2D 开发你的应用程序，[这里](http://purplelilgirl.tumblr.com/post/10974345146/mini-tutorial-how-to-capture-video-of-iphone-app-in)的示例代码会很有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:09:08.490

Use AVAudioRecorder in the AVFoundation framework. Import the AVFoundation framework and Conform to the AVAudioRecorderDelegate Create an AVAudioRecorder instance and a NSURL instance **SAMPLE CODE

Recording:

```
 [audioSession setCategory:AVAudioSessionCategoryRecord error:nil]; // assign it to recording session
    [audioSession setActive:YES error:nil]; // activate it!
      NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
       [recordSetting setValue: [NSNumber numberWithInt:kAudioFormatAppleIMA4]    forKey:AVFormatIDKey]; // assign this special hardware component as the function to record
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0]
    forKey:AVSampleRateKey]; //44100 is the sample rate 
   [recordSetting setValue:[NSNumber numberWithInt: 2]
    forKey:AVNumberOfChannelsKey]; // same thing
   tmpFile = [NSURL fileURLWithPath:
      [NSTemporaryDirectory() stringByAppendingPathComponent:
    [NSString stringWithFormat: @"%.0f.%@",
     [NSDate timeIntervalSinceReferenceDate] * 1000.0,
      @"caf"]]]; // how we identify the audio written to the file to play later
      recorder = [[AVAudioRecorder alloc] initWithURL:tmpFile settings:recordSetting
    [recorder setDelegate:self];
   [recorder prepareToRecord];
   [recorder record]; 
```

PLAYING:

```
 AVAudioSession * audioSession = [AVAudioSession sharedInstance];
   [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
       [audioSession setActive:YES error:nil];
      AVAudioPlayer * player =
       [[AVAudioPlayer alloc] initWithContentsOfURL:tmpFile error:nil]; // takes recording data from tmpFile where we wrote the recording in
      [player prepareToPlay];
     [player play]; 
```

Thats just some sample code.... to help you but otherwise read the documentation Im not sure how you could animate the mouth or if you wanted to change the pitch but this is a start to recording

# php - PHP DOM - 如何检索特定元素的 nodeValue 和 href

> ID：10108366
> 
> 赞同：1
> 
> 时间：2012-04-11T14:47:01.960
> 
> 标签：php, dom

我有一个循环，我想推送第一个 div 元素的第一个 a 元素的 nodeValue 和 href。我是 DOM 新手，所以我阅读了几篇文章并提出了以下代码。不幸的是，这不起作用。希望有人可以帮助我解决这个问题。预先感谢您的回复。干杯。马克

下面是 $value 的 html 结构（请参阅下面的循环以了解 $value 是什么）

```
 <body>
        <div>
           <a href="myhreflink">this is my target</a>
           <a href="somehref">sometext</a>
        </div>

        <div></div>
        <div></div>
        <div></div>
    </body> 
```

在我的循环下面：

```
 myarray = array();  
 /* $content is a DOMNodeList Object and $value is a DOMElement Object */

foreach ($content as $value){

    $firstDiv = $value->getElementsByTagName('div')[0];
    $firstA = $firstDiv->getElementsByTagName('a')[0];

    $val = $firstA->nodeValue;
    $link = $firstA->getAttribute('href');

    array_push($myarray, array('val'=>$val, 'href'=>$link));    
} 
```

-> 下面是完整的代码----------

```
<?php
header('Content-Type: text/html; charset=utf-8');
mysql_set_charset('utf8'); 
ini_set('display_errors', 1); error_reporting(E_ALL);

$liste = array();

    $url = 'myurl';
    $path = 'mypath'; 
    $titres = print_url_data($url, $path);

    foreach($titres as $value){
        array_push($liste, $value);
    }

// -> functions ------------------------------------------------------------

function print_url_data($url, $path){
    $content = get_url_data($url, $path);
    $tableau = array();
    foreach ($content as $value){

        $firstDiv = $value->getElementsByTagName('div')->item(0);
        $firstA = $firstDiv->getElementsByTagName('a')->item(0);

        $val = $firstA->nodeValue;
        $link = $firstA->getAttribute('href');

        array_push($myarray, array('val'=>$val, 'href'=>$link));  
    }
    return $tableau;
}

function get_url_data($url, $path){
    $xml_content = get_url($url);
    $dom = new DOMDocument();
    @$dom->loadHTML($xml_content);
    $xpath = new DomXPath($dom);
    $content_title = $xpath->query($path);
    return $content_title;
}

function get_url($url){

    $curl = curl_init();

    $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $header[] = "Accept-Language: en-us,en;q=0.5";
    $header[] = "Pragma: "; // browsers keep this blank.

    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_USERAGENT, 'Googlebot/2.1 (+http://www.google.com/bot.html)');
    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
    curl_setopt($curl, CURLOPT_REFERER, '[url=http://www.google.com]http://www.google.com[/url]');
    curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate');
    curl_setopt($curl, CURLOPT_AUTOREFERER, true);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_TIMEOUT, 10);

    $html = curl_exec($curl); 
    curl_close($curl);
    return $html; 
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:51:01.473

这种类型的数组取消引用在全新 PHP 5.4 之前的 PHP 中无效。

```
// Can't do this unless running PHP5.4 (which seems unlikely)
// Actually without a way to test, I'm not sure that DOMDocument would even
// suppor this under PHP5.4
$firstDiv = $value->getElementsByTagName('div')[0];
$firstA = $firstDiv->getElementsByTagName('a')[0]; 
```

相反，您需要使用`item()`.

```
$firstDiv = $value->getElementsByTagName('div')->item(0);
$firstA = $firstDiv->getElementsByTagName('a')->item(0); 
```

### 更新

我想我现在明白了——因为它`$content`是一个 NodeList，所以你不想迭代它，`foreach`而是直接调用`getElementsByTagName()`它。通过迭代它，您可以获得单个节点，而不是节点列表，并且您不能调用`getElementsByTagName()`我知道的单个节点。

```
function print_url_data($url, $path){
    $content = get_url_data($url, $path);
    $tableau = array();

    // No need to loop. get nodes directly from $content   
    $firstDiv = $content->getElementsByTagName('div')->item(0);
    $firstA = $firstDiv->getElementsByTagName('a')->item(0);

    $val = $firstA->nodeValue;
    $link = $firstA->getAttribute('href');

    // this is not going to work since $myarray isn't initialized
    // you might have meant to use $tableau
    array_push($myarray, array('val'=>$val, 'href'=>$link));  

    return $tableau;
} 
```

# svn - 从标签创建补丁分支并将其与主干合并

> ID：10108367
> 
> 赞同：3
> 
> 时间：2012-04-11T14:47:02.983
> 
> 标签：svn, branching-and-merging

现在我们在**分支机构**执行工作。这些被合并到**主干**中并在它们中的功能完成时被杀死。所以**主干**总是包含最新的稳定代码。

当主干准备好发布时，会在该给定点从**主干创建一个****标签。**现在，我们如何最好地处理需要为先前版本创建补丁的情况？

 **我们有一个**标记**该版本的标签。但是主干现在包含更多新功能。如果我们从旧**标签创建一个****分支**，我们如何干净地将补丁修复放入我们的**主干**，并用新**标签**标记新补丁版本？

 ******我可以**标记**从初始**发布标签**创建的**分支**并**重新集成合并****分支**与我们的主干**吗**？或者这会带来问题吗？我觉得它可能会混淆 Subversion。

 ******这张“图片”试图说明流程。

```
Work branches /-- itter. 1.0 --\      /- 2.0 -\           /------ 3.0 ----------\
             /                  \    /         \         /                   /   \
    ------------trunk----------------------------------------------------------------------  
                                  |                | v2.0 tag              /      | v3.0 tag  
                                  |                                       /
                                  | V1.0 tag----------\                  /
                                                       \-- Branch 1.1 --/
                                                                        |
                                                                        | V1.1 tag 
```

请注意，即使标签和分支在这里位于同一行，它们实际上位于标准的**主干、分支、标签**文件夹布局中。

注意：工作分支不必与给定的版本有任何关系。我只是将它们命名为 1.0 等。但它们可以命名为*foo*、*bar*或其他名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:41:16.510

更常见的方法是保持发布分支（1.x、2.x、...）打开并从那里标记特定版本。

仅当您停止支持该版本时才关闭分支。

```
 1.0     1.1         2.0     2.1         (release tags)
       /       /           /       /
   /----------- 1.x       /----------- 2.x      (release branches)
  /                      / 
----------------------------------------------- trunk 
```

无论这个分支是从哪里分支出来的（主干、标签或其他分支），将修复从这样的发布分支合并到主干是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:26:38.650

我们现在一直在使用从主干标记发布的方法，并在一段时间内需要补丁时从该标记创建一个分支，并且它在单个和多个团队中都可以正常工作。**************

# python - 检测地理集群

> ID：10108368
> 
> 赞同：20
> 
> 时间：2012-04-11T14:47:04.340
> 
> 标签：python, r, geolocation, cran

我有一个 R data.frame 包含跨越整个美国地图的经度、纬度。当 X 个条目都在几个经度和几度纬度的小地理区域内时，我希望能够检测到这一点，然后让我的程序返回地理边界框的坐标。是否有已经这样做的 Python 或 R CRAN 包？如果不是，我将如何确定这些信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T21:33:35.967

我能够将 Joran 的回答与 Dan H 的评论结合起来。这是一个示例输出： ![聚类图](../Images/42a0b10d0ed079693abf00b74b97b788.png)

python 代码为 R 发出函数：map() 和 rect()。此美国示例地图是使用以下内容创建的：

```
map('state', plot = TRUE, fill = FALSE, col = palette()) 
```

然后您可以在 R GUI 解释器中相应地应用 rect()（见下文）。

```
import math
from collections import defaultdict

to_rad = math.pi / 180.0   # convert lat or lng to radians
fname = "site.tsv"        # file format: LAT\tLONG
threshhold_dist=50         # adjust to your needs
threshhold_locations=15    # minimum # of locations needed in a cluster

def dist(lat1,lng1,lat2,lng2):
    global to_rad
    earth_radius_km = 6371

    dLat = (lat2-lat1) * to_rad
    dLon = (lng2-lng1) * to_rad
    lat1_rad = lat1 * to_rad
    lat2_rad = lat2 * to_rad

    a = math.sin(dLat/2) * math.sin(dLat/2) + math.sin(dLon/2) * math.sin(dLon/2) * math.cos(lat1_rad) * math.cos(lat2_rad)
    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1-a)); 
    dist = earth_radius_km * c
    return dist

def bounding_box(src, neighbors):
    neighbors.append(src)
    # nw = NorthWest se=SouthEast
    nw_lat = -360
    nw_lng = 360
    se_lat = 360
    se_lng = -360

    for (y,x) in neighbors:
        if y > nw_lat: nw_lat = y
        if x > se_lng: se_lng = x

        if y < se_lat: se_lat = y
        if x < nw_lng: nw_lng = x

    # add some padding
    pad = 0.5
    nw_lat += pad
    nw_lng -= pad
    se_lat -= pad
    se_lng += pad

    # sutiable for r's map() function
    return (se_lat,nw_lat,nw_lng,se_lng)

def sitesDist(site1,site2): 
    #just a helper to shorted list comprehension below 
    return dist(site1[0],site1[1], site2[0], site2[1])

def load_site_data():
    global fname
    sites = defaultdict(tuple)

    data = open(fname,encoding="latin-1")
    data.readline() # skip header
    for line in data:
        line = line[:-1]
        slots = line.split("\t")
        lat = float(slots[0])
        lng = float(slots[1])
        lat_rad = lat * math.pi / 180.0
        lng_rad = lng * math.pi / 180.0
        sites[(lat,lng)] = (lat,lng) #(lat_rad,lng_rad)
    return sites

def main():
    sites_dict = {}
    sites = load_site_data()
    for site in sites: 
        #for each site put it in a dictionary with its value being an array of neighbors 
        sites_dict[site] = [x for x in sites if x != site and sitesDist(site,x) < threshhold_dist] 

    results = {}
    for site in sites: 
        j = len(sites_dict[site])
        if j >= threshhold_locations:
            coord = bounding_box( site, sites_dict[site] )
            results[coord] = coord

    for bbox in results:
        yx="ylim=c(%s,%s), xlim=c(%s,%s)" % (results[bbox]) #(se_lat,nw_lat,nw_lng,se_lng)
        print('map("county", plot=T, fill=T, col=palette(), %s)' % yx)
        rect='rect(%s,%s, %s,%s, col=c("red"))' % (results[bbox][2], results[bbox][0], results[bbox][3], results[bbox][2])
        print(rect)
        print("")

main() 
```

这是一个示例 TSV 文件 (site.tsv)

```
LAT     LONG
36.3312 -94.1334
36.6828 -121.791
37.2307 -121.96
37.3857 -122.026
37.3857 -122.026
37.3857 -122.026
37.3895 -97.644
37.3992 -122.139
37.3992 -122.139
37.402  -122.078
37.402  -122.078
37.402  -122.078
37.402  -122.078
37.402  -122.078
37.48   -122.144
37.48   -122.144
37.55   126.967 
```

使用我的数据集，我的 python 脚本的输出，显示在美国地图上。为了清晰起见，我更改了颜色。

```
rect(-74.989,39.7667, -73.0419,41.5209, col=c("red"))
rect(-123.005,36.8144, -121.392,38.3672, col=c("green"))
rect(-78.2422,38.2474, -76.3,39.9282, col=c("blue")) 
```

* * *

2013-05-01 对 Yacob 的补充

* * *

这两条线为您提供了总体目标...

```
map("county", plot=T )
rect(-122.644,36.7307, -121.46,37.98, col=c("red")) 
```

如果您想缩小地图的一部分，您可以使用`ylim`和`xlim`

```
map("county", plot=T, ylim=c(36.7307,37.98), xlim=c(-122.644,-121.46))
# or for more coloring, but choose one or the other map("country") commands
map("county", plot=T, fill=T, col=palette(), ylim=c(36.7307,37.98), xlim=c(-122.644,-121.46))
rect(-122.644,36.7307, -121.46,37.98, col=c("red")) 
```

您将要使用“世界”地图...

```
map("world", plot=T ) 
```

我已经很久没有使用我在下面发布的这个python代码了，所以我会尽力帮助你。

```
threshhold_dist is the size of the bounding box, ie: the geographical area
theshhold_location is the number of lat/lng points needed with in
    the bounding box in order for it to be considered a cluster. 
```

这是一个完整的例子。TSV 文件位于 pastebin.com 上。我还包含了一个从 R 生成的图像，其中包含所有 rect() 命令的输出。

```
# pyclusters.py
# May-02-2013
# -John Taylor

# latlng.tsv is located at http://pastebin.com/cyvEdx3V
# use the "RAW Paste Data" to preserve the tab characters

import math
from collections import defaultdict

# See also: http://www.geomidpoint.com/example.html
# See also: http://www.movable-type.co.uk/scripts/latlong.html

to_rad = math.pi / 180.0  # convert lat or lng to radians
fname = "latlng.tsv"      # file format: LAT\tLONG
threshhold_dist=20        # adjust to your needs
threshhold_locations=20   # minimum # of locations needed in a cluster
earth_radius_km = 6371

def coord2cart(lat,lng):
    x = math.cos(lat) * math.cos(lng)
    y = math.cos(lat) * math.sin(lng)
    z = math.sin(lat)
    return (x,y,z)

def cart2corrd(x,y,z):
    lon = math.atan2(y,x)
    hyp = math.sqrt(x*x + y*y)
    lat = math.atan2(z,hyp)
    return(lat,lng)

def dist(lat1,lng1,lat2,lng2):
    global to_rad, earth_radius_km

    dLat = (lat2-lat1) * to_rad
    dLon = (lng2-lng1) * to_rad
    lat1_rad = lat1 * to_rad
    lat2_rad = lat2 * to_rad

    a = math.sin(dLat/2) * math.sin(dLat/2) + math.sin(dLon/2) * math.sin(dLon/2) * math.cos(lat1_rad) * math.cos(lat2_rad)
    c = 2 * math.atan2(math.sqrt(a), math.sqrt(1-a)); 
    dist = earth_radius_km * c
    return dist

def bounding_box(src, neighbors):
    neighbors.append(src)
    # nw = NorthWest se=SouthEast
    nw_lat = -360
    nw_lng = 360
    se_lat = 360
    se_lng = -360

    for (y,x) in neighbors:
        if y > nw_lat: nw_lat = y
        if x > se_lng: se_lng = x

        if y < se_lat: se_lat = y
        if x < nw_lng: nw_lng = x

    # add some padding
    pad = 0.5
    nw_lat += pad
    nw_lng -= pad
    se_lat -= pad
    se_lng += pad

    #print("answer:")
    #print("nw lat,lng : %s %s" % (nw_lat,nw_lng))
    #print("se lat,lng : %s %s" % (se_lat,se_lng))

    # sutiable for r's map() function
    return (se_lat,nw_lat,nw_lng,se_lng)

def sitesDist(site1,site2): 
    # just a helper to shorted list comprehensioin below 
    return dist(site1[0],site1[1], site2[0], site2[1])

def load_site_data():
    global fname
    sites = defaultdict(tuple)

    data = open(fname,encoding="latin-1")
    data.readline() # skip header
    for line in data:
        line = line[:-1]
        slots = line.split("\t")
        lat = float(slots[0])
        lng = float(slots[1])
        lat_rad = lat * math.pi / 180.0
        lng_rad = lng * math.pi / 180.0
        sites[(lat,lng)] = (lat,lng) #(lat_rad,lng_rad)
    return sites

def main():
    color_list = ( "red", "blue", "green", "yellow", "orange", "brown", "pink", "purple" )
    color_idx = 0
    sites_dict = {}
    sites = load_site_data()
    for site in sites: 
        #for each site put it in a dictionarry with its value being an array of neighbors 
        sites_dict[site] = [x for x in sites if x != site and sitesDist(site,x) < threshhold_dist] 

    print("")
    print('map("state", plot=T)') # or use: county instead of state
    print("")

    results = {}
    for site in sites: 
        j = len(sites_dict[site])
        if j >= threshhold_locations:
            coord = bounding_box( site, sites_dict[site] )
            results[coord] = coord

    for bbox in results:
        yx="ylim=c(%s,%s), xlim=c(%s,%s)" % (results[bbox]) #(se_lat,nw_lat,nw_lng,se_lng)

        # important!
        # if you want an individual map for each cluster, uncomment this line
        #print('map("county", plot=T, fill=T, col=palette(), %s)' % yx)
        if len(color_list) == color_idx:
            color_idx = 0
        rect='rect(%s,%s, %s,%s, col=c("%s"))' % (results[bbox][2], results[bbox][0], results[bbox][3], results[bbox][1], color_list[color_idx])
        color_idx += 1
        print(rect)
    print("")

main() 
```

![pyclusters.py / R 图像结果](../Images/05c61fd1e4eae110f8cb443955abf5f8.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T17:27:45.787

我通过首先创建一个距离矩阵然后在其上运行聚类来定期执行此操作。这是我的代码。

```
library(geosphere)
library(cluster)
clusteramounts <- 10
distance.matrix <- (distm(points.to.group[,c("lon","lat")]))
clustersx <- as.hclust(agnes(distance.matrix, diss = T))
points.to.group$group <- cutree(clustersx, k=clusteramounts) 
```

我不确定它是否完全解决了您的问题。您可能想用不同的 k 进行测试，也可能对一些第一个集群进行第二次聚类，以防它们太大，比如在明尼苏达州有一个点，在加利福尼亚州有 1000 个点。当您拥有 points.to.group$group 时，您可以通过查找每个组的最大和最小 lat lon 来获得边界框。

如果您希望 X 为 20，并且您在纽约有 18 分，在达拉斯有 22 分，那么您必须决定是否需要一个小盒子和一个非常大的盒子（每个 20 分），如果拥有达拉斯盒子更好包括 22 分，或者如果您想将达拉斯的 22 分分成两组。在某些情况下，基于距离的聚类可能会很好。但这当然取决于您为什么要对这些点进行分组。

/克里斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:22:37.937

一些想法：

*   即席和近似：“二维直方图”。创建任意“矩形”箱，您选择的度数宽度，为每个箱分配一个 ID。在 bin 中放置一个点意味着“将点与 bin 的 ID 相关联”。每次添加到垃圾箱时，询问垃圾箱它有多少点。缺点：不能正确“看到”跨越 bin 边界的点簇；并且：当您向北移动时，“恒定纵向宽度”的箱实际上（空间上）更小。
*   使用 Python 的“Shapely”库。按照它的“缓冲点”示例，并进行缓冲区的级联联合。寻找特定区域上的球体，或者“包含”一定数量的原始点。请注意，Shapely 本质上不是“地理知识”，因此如果需要，您必须添加更正。
*   使用具有空间处理的真正数据库。MySQL、Oracle、Postgres（带有 PostGIS）、MSSQL（我认为）都有“几何”和“地理”数据类型，您可以对它们进行空间查询（从您的 Python 脚本）。

这些中的每一个都有不同的美元和时间成本（在学习曲线中）......以及不同程度的地理空间准确性。您必须选择适合您的预算和/或要求的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-05T12:04:54.107

如果你使用 shapely，你可以扩展我的[cluster_points 函数](http://sptl.eu/2015/01/03/finding-geographical-clusters/) ，通过 shapely geometry 的 .bounds 属性返回集群的边界框，例如：

```
clusterlist.append(cluster, (poly.buffer(-b)).bounds) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:56:37.607

也许像

```
def dist(lat1,lon1,lat2,lon2):
    #just return normal x,y dist
    return sqrt((lat1-lat2)**2+(lon1-lon2)**2)

def sitesDist(site1,site2):
    #just a helper to shorted list comprehensioin below
    return dist(site1.lat,site1.lon,site2.lat,site2.lon)
sites_dict = {}
threshhold_dist=5 #example dist
for site in sites:
    #for each site put it in a dictionarry with its value being an array of neighbors
    sites_dict[site] = [x for x in sites if x != site and sitesDist(site,x) < threshhold_dist]
print "\n".join(sites_dict) 
```

# java - 设置代理？

> ID：10108371
> 
> 赞同：1
> 
> 时间：2012-04-11T14:47:22.503
> 
> 标签：java, android, proxy

我正在制作一个浏览器类型的应用程序，我只想为此浏览器设置代理

我尝试使用此代码修改全局代理，但它不起作用

```
System.getProperties().put("http.proxyHost", "someProxyURL");
System.getProperties().put("http.proxyPort", "someProxyPort");
System.getProperties().put("http.proxyUser", "someUserName");
System.getProperties().put("http.proxyPassword", "somePassword");
System.getProperties().put("http.proxySet", "true"); 
```

所以我看了`proxySelector`课，我真的不明白如何为我的浏览器设置代理

`ProxySelector`我知道里面有一个隐藏的类`com.android.settings/.ProxySelector`

但我必须手动输入代理。

有什么办法可以让我只为mybrowser（只是一个Webview）配置代理？

请帮忙。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T06:14:53.143

```
System.getProperties().put("http.proxyUser", "someUserName");
System.getProperties().put("http.proxyPassword", "somePassword"); 
```

这些在 JDK 中不起作用，仅在 Apache HTTP 客户端中起作用。

```
System.getProperties().put("http.proxySet", "true"); 
```

这是一个都市神话。它出现在一些早期的 Java 书籍中，但从未在 JDK 中做过任何事情。它是已失效的 HotJavaBean 浏览器 c 的遗物。1998 年。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-12T06:08:53.780

你应该像这样使用它

```
Authenticator.setDefault(
   new Authenticator() {
      public PasswordAuthentication getPasswordAuthentication() {
         return new PasswordAuthentication(
              authUser, authPassword.toCharArray());
     }
   }
);

System.setProperty("http.proxyHost", someProxyURl);
System.setProperty("http.proxyPort", someProxyPort);
System.setProperty("http.proxyUser", someProxyUser);
System.setProperty("http.proxyPassword", someProxyPassword);
.... 
```

# java - Maven：如何从命令行传递参数运行 .java 文件

> ID：10108374
> 
> 赞同：96
> 
> 时间：2012-04-11T14:47:23.327
> 
> 标签：java, maven, arguments

我有以下问题。我想从命令行运行`mvn`文件`Main.java`。`Main.java`接受一个参数。**我该如何从命令行执行此操作？**

我试图找到一个例子，但我没有成功。有人可以给我一个例子来帮助我吗？

我看了[这里](http://www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from-maven/)，但不太明白我应该做什么。

另外，**如何从不同于 Main.java 文件夹的文件夹执行该命令？**

例如`Main.java`位于`my/java/program/Main.java`。我应该放什么

```
mvn exec:java -Dexec.mainClass="what to put here?" -Dexec.args="arg0 arg1 arg2" 
```

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-04-11T15:10:30.517

你可以运行：`mvn exec:exec -Dexec.args="arg1"`.

这会将参数*arg1*传递给您的程序。

您应该指定完全限定的主类，例如，包测试中的 Main.java 需要

```
mvn exec:java  -Dexec.mainClass=test.Main 
```

通过使用[这里](https://stackoverflow.com/questions/6478536/how-to-run-maven-from-another-directory-without-cd-to-project-dir)`-f`描述的参数，您还可以从其他目录运行它。

```
mvn exec:java -Dexec.mainClass=test.Main -f folder/pom.xm 
```

对于多个参数，只需像在命令行中那样用空格分隔它们。

```
mvn exec:java -Dexec.mainClass=test.Main -Dexec.args="arg1 arg2 arg3" 
```

对于以 分隔的参数`space`，您可以`'argument separated with space'` 在引号内使用分组。

```
mvn exec:java -Dexec.mainClass=test.Main -Dexec.args="'argument separated with space' 'another one'" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-06-02T07:25:17.053

添加一个 shell 脚本，例如`run.sh`使它更容易：

```
#!/usr/bin/env bash
export JAVA_PROGRAM_ARGS=`echo "$@"`
mvn exec:java -Dexec.mainClass="test.Main" -Dexec.args="$JAVA_PROGRAM_ARGS" 
```

然后你就可以执行：

```
./run.sh arg1 arg2 arg3 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-12T14:13:45.450

除了运行它`mvn exec:java`，你还可以运行它`mvn exec:exec`

```
mvn exec:exec -Dexec.executable="java" -Dexec.args="-classpath %classpath your.package.MainClass" 
```

# jsf-2 - 使用 PrettyFaces 中的参数重定向

> ID：10108378
> 
> 赞同：3
> 
> 时间：2012-04-11T14:47:47.860
> 
> 标签：jsf-2, friendly-url, prettyfaces

我有这样的映射：

`@URLMapping(id = "edituser", pattern = "/edituser/#{ id: userBean.userId}", viewId = "/faces/pages/users/editUser.xhtml")`

我想从一个动作方法重定向到它，所以我尝试了以下方法：

`return "pretty:edituser/" + userObj.getId();`

但它没有工作，它重新加载当前页面，请告知，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:38:46.580

在你的情况下，这样的事情应该有效：

```
return "/faces/pages/users/editUser.xhtml?faces-redirect=true&id=" + userObj.getId(); 
```

另一种选择是获取`UserBean`，设置 id 属性，然后返回`pretty:editust`。像这样的东西：

```
public class Whatever {

  @Inject
  private UserBean userBean;

  public String action() {

    // do something

    userBean.setUserUd( someId );
    return "pretty:edituser";

  }

} 
```

# grails - Grails Jasper插件，导出到excel时如何禁用白色背景？

> ID：10108379
> 
> 赞同：0
> 
> 时间：2012-04-11T14:47:49.680
> 
> 标签：grails, jasper-reports

我正在使用 Jasper 插件，并希望在导出到 excel 时禁用白色背景。我怎样才能做到这一点？

/马可

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T16:42:18.733

您需要`net.sf.jasperreports.export.xls.white.page.background`在报告 jrxml 中将自定义属性设置为 false。例如：

```
<property name="net.sf.jasperreports.export.xls.white.page.background" value="false" /> 
```

# java - javac -cp : 找不到符号

> ID：10108380
> 
> 赞同：1
> 
> 时间：2012-04-11T13:20:00.537
> 
> 标签：java, command-line

我有 3 个类 CustomerAddress、Customer 和 CustomerMain。

客户有一个进口声明：

```
import org.abc.customers.CustomerAddress; 
```

而 CustomerMain 有一个导入语句：

```
import org.abc.customers.CustomerAddress; 
import org.abc.customers.Customer; 
```

所有这些类的包是

```
package org.abc.customer 
```

现在，该程序在 Eclipse 上运行良好，但是当我尝试在 cmd 提示符下编译和运行时，它无法编译

```
javac CustomerAddress.java 
```

编译得很好

那么由于客户依赖于客户地址

我给

```
javac -cp . Customer.java 
```

但编译器抱怨

```
error cannot find symbol CustomerAddress 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:45:09.757

1.  编译的类必须存在于与其包结构相匹配的文件夹结构中。例如，一个类`com.foo.bar.A`必须存在于文件夹`com/foo/bar/`中。
2.  使用像 ant 或 maven 这样的自动构建工具来做这种事情确实要容易得多。

如果您决定从命令行构建，则需要先编译独立类：

```
javac -d com/abc/customers/ CustomerAddress.java Customer.java CustomerMain.java 
```

它*应该*编译这些类并将它们输出到 javac 能够从中解析它们的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:43:27.057

我知道这不是你要问的，但我可以建议使用 eclipse 的内置导出吗？

右键单击项目->导出->可运行的jar文件->确保您的启动配置正确->选择其余->单击完成->使用您的jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:43:37.857

你试过编译吗，这样

```
javac *.java 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:20:04.063

我不知道它是否是发布问题的人工制品，但是您的包声明`customer`没有“s”，而您的导入语句`customers` *带有*“s”。但是，在同一个包中，您不需要执行`import`.

# android - 检查游标是否有结果

> ID：10108385
> 
> 赞同：6
> 
> 时间：2012-04-11T14:47:53.820
> 
> 标签：android, sqlite

我正在使用数据库来存储日期，并希望根据 where 子句中给出的 id 返回单个列。

```
 public String getPmax(String serial) {

    String[] columns = new String[]{KEY_SERIAL, KEY_PMAX};      
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, "serial = " + serial,
    null, null, null, null);

    String result = "nothing found";

    if(c != null) {

        int iPmax = c.getColumnIndex(KEY_PMAX); 

        c.moveToFirst();
        result = c.getString(iPmax);

    }

    return result;  

} 
```

如果我使用数据库中的序列号，则此代码有效，但当我使用不在数据库中的序列号时，它会给我一个强制关闭！

它说：

```
04-11 16:31:19.423: E/AndroidRuntime(21226): java.lang.RuntimeException: Unable to start activity ComponentInfo{nl.janjanus.solardetect/nl.janjanus.solardetect.DatabaseView}: android.database.sqlite.SQLiteException: no such column: g: , while compiling: SELECT serial, pmax FROM SolareCel WHERE serial = g 
```

所以我的问题是：我如何检查是否有结果？还是我需要检查给定的序列号是否是数据库中的序列号？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-11T14:58:05.497

```
 if (!(mCursor.moveToFirst()) || mCursor.getCount() ==0){
     //cursor is empty
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T15:06:30.610

如果仔细观察，错误是 SQL 有问题。它读取`g`为一列。你必须像这样用撇号把它包起来`'g'`。

在您的情况下，您获得光标的行应该是：

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, "serial = '" + serial + "'",
    null, null, null, null); 
```

至于检查光标是否没有结果，请查看 Samir Mangroliya 的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T14:51:49.543

您可以检查光标是否有元素：

```
boolean isEmpty = cursor.getCount() < 1; 
```

AFAIK，当没有请求条件的行时，Cursor 永远不会返回 null，只返回一个空的 Cursor。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T05:05:31.630

```
int x = cursor.getCount(); //this will return number of records in current cursor
if ( x == 0 ) {
     // there are no records
} else {
    // do your stuff
} 
```

# python - 非套接字上的套接字操作

> ID：10108393
> 
> 赞同：0
> 
> 时间：2012-04-11T14:48:12.113
> 
> 标签：python, windows, winsock

我有以下课程：

```
from socket import *
import select

class UdpListenerPort:
    def __init__(self, socket):
        self.socket = socket
        self.socket.setblocking(0)

    def get_data_to_dispatch(self):
        is_ready = select.select([self.socket],[],[],0.01)
        if is_ready[0]:
            return self.socket.recvfrom(0xffff)[0]
        else:
            return None 
```

它从一个线程内运行。当我退出线程时，出现以下异常：

```
return self.socket.recvfrom(0xffff)[0]
socket.error: [Errno 10038] An operation was attempted on something that is not a socket 
```

我怎样才能避免这种情况，

谢谢，

巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:19:39.353

我发现了问题。我将线程实现为上下文管理器。在退出方法中，我有以下内容：

```
def __exit__(self, type, value, traceback):
    try:
        self.is_alive = False
        while not self.is_finished:
            time.sleep(0.1)
    except:
        self.is_finished = True 
```

以便优雅地退出线程。但是，我忘了导入时间... :)

# javascript - android webview在后台查看以前的内容

> ID：10108396
> 
> 赞同：0
> 
> 时间：2012-04-11T14:48:22.753
> 
> 标签：javascript, android, webview, loading, visual-glitch

不确定这是否是由于使用透明背景而导致的问题，但我正在使用 webview 向用户显示网页，但是如果用户从链接加载另一个 url 或使用 javascript 将新内容动态插入页面渲染似乎出现故障。

故障是指页面保留在后台，而新内容/页面加载到前台。它们最终重叠并使所有内容变得非常不可读。

我在 webview 上关闭了硬件加速以启用透明背景，这会导致问题吗？

它类似于这个问题[Android Webview Content Overlapping While Using Transparent Background](https://stackoverflow.com/questions/6365807/android-webview-content-overlapping-while-using-transparent-background)。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:19:08.993

这是因为我有透明背景，我删除了它，没关系。不是最好的解决方案，而是一种优于具有故障图形的解决方案。我通过将 CSS 背景属性与我的 WebView 所在位置匹配来模仿透明背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:09:32.680

在 Google TV 盒子上遇到了同样的问题，并通过强制 WebKit 从 jQuery 重绘 DOM 来解决这个问题，如下所示：

```
$('<style></style>').appendTo($(document.body)).remove(); 
```

或者（如果你不喜欢 jQuery）：

```
document.body.style.display='none';
document.body.offsetHeight;
document.body.style.display='block'; 
```

您可以从 Android 中动态注入任一代码片段，`webView.loadUrl("javascript:(function(){ /* put the force-redraw-code here */ })()")`也可以在更改 DOM 后直接从 JavaScript 中注入。

更多相关修复在[如何强制 WebKit 重绘/重绘以传播样式更改？](https://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes)

# ruby - 如何使用 Rails 3.2.1 使行为作为可标记的工作

> ID：10108397
> 
> 赞同：0
> 
> 时间：2012-04-11T14:48:23.737
> 
> 标签：ruby, ruby-on-rails-3, gem

当我在 Rails 3.2.1 中使用acts-as-taggable-on 时，它给了我错误：

super: 没有超类方法 `tag_list=' for #

```
activemodel (3.2.1) lib/active_model/attribute_methods.rb:404:in `method_missing'
activerecord (3.2.1) lib/active_record/attribute_methods.rb:126:in `method_missing'
app/models/post.rb:126:in `tag_list='
activerecord (3.2.1) lib/active_record/attribute_assignment.rb:85:in `send'
activerecord (3.2.1) lib/active_record/attribute_assignment.rb:85:in `assign_attributes'
activerecord (3.2.1) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.1) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.1) lib/active_record/base.rb:495:in `initialize'
app/controllers/posts_controller.rb:28:in `new'
app/controllers/posts_controller.rb:28:in `create'
actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:18:in `process_action'
activesupport (3.2.1) lib/active_support/callbacks.rb:414:in `_run__779271071__process_action__567720547__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
activesupport (3.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.1) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal.rb:246:in `action'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'
rack-mobile-detect (0.3.0) lib/rack/mobile-detect.rb:164:in `call'
warden (1.1.1) lib/warden/manager.rb:35:in `call'
warden (1.1.1) lib/warden/manager.rb:34:in `catch'
warden (1.1.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__1545501525__call__4__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'
railties (3.2.1) lib/rails/engine.rb:479:in `call'
railties (3.2.1) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.1) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:53:39.490

我认为 rails 3.2.1 存在问题：github.com/mbleigh/acts-as-taggable-on/issues/249

使用 has_and_belongs_to_many 关联和模型中的几个方法来编写自己的标记功能很容易：

```
has_and_belongs_to_many :tags
attr_accessor :tag_list

def tag_list=value
  value.split(',').each do |tag|
    self.tags.build(:name => tag).save
  end
end

def tag_list
  self.tags.join(',')
end 
```

# javascript - 使用 Chrome 插件为每个帧捕获事件 DOMContentLoaded 和 onload

> ID：10108405
> 
> 赞同：0
> 
> 时间：2012-04-11T14:48:37.047
> 
> 标签：javascript, google-chrome, plugins, dom-events

我需要编写 chrome 插件来拦截事件`DOMContentLoaded`或`onload`收集有关每个帧中元素的统计信息。

我努力了：

```
document.addEventListener ('DOMContentLoaded', onContentLoaded, false); 
```

但它只适用于 background.html。我也试过：

```
chrome.tabs.executeScript (tabId, {file: "ContentLoaded.js", allFrames: true}, null); 
```

ContentLoaded.js 为每个帧创建一个事件侦听器，但它没有帮助。

```
document.onload = contentLoaded; 
```

对于每一帧根本不起作用。我怎样才能捕捉到每一帧的这个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:11:49.980

谢谢罗布·W

据我了解，您的意思如下：

```
var stmt = "document.addEventListener('DOMContentLoaded', function (data){alert('onContentLoaded');}, false); alert('TEST');";
chrome.tabs.executeScript(tab.id,{code: stmt, allFrames: true}, null); 
```

但它不起作用。我看到警报“TEST”，它只是通知我脚本已运行，但我没有看到警报“onContentLoaded”。

我明白你的评论是否正确？

# html - HTML5 视频捕获和流式传输？

> ID：10108410
> 
> 赞同：1
> 
> 时间：2012-04-11T14:49:25.160
> 
> 标签：html, video-streaming, html5-video

我正在开发一个教育网站，那里有世界各地的教师和学生（可能）。由于它是一个非营利性网站，而且我不需要明天完成（有点像更大的副项目），我想知道找出如何做到这一点的最佳方法。我不是专业的程序员，多年来我一直从事系统方面的工作，但我了解大多数技术，这里的问题更多是如何衡量要做什么，以便获得正确的资源。

也就是说......这就是我正在看的东西。我认为未来是 HTML5，这可能是我宁愿花精力的地方，因为它将是跨平台的并且不需要插件。它也可以在移动设备上运行。问题是，HTML5 处理输入媒体的效果如何，比如桌面捕获和摄像头，或者在移动设备上，我想使用用户的手机摄像头等。

第二个问题是动态流媒体……我读过关于 MPEG DASH 的文章，然后是平滑流媒体（我认为考虑到 Silverlight 的发展方式将会消失或无用）之类的技术，还有 Apple 和 Flash，但如果我正在做 HTML5，它对我没有好处。这里的任何想法都会非常有帮助，而且越详细越好！:)

就是这样...那里有免费的聊天服务，比如使用 MSN 网络聊天控件（它们有多好，我不知道，但全世界大多数人都有 Hotmail/MSN 帐户）所以我可以用它来聊天. 我当然不知道它的局限性，但如果人们知道或有建议，那我就全神贯注了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:57:18.703

据我所知，视频标签不支持这样的输入媒体，目前它做得很好的是播放视频文件，如果给定浏览器支持文件格式（不同的浏览器不同的扩展名）我也看到了有一个解决方案，有人将他们自己的网络摄像头流式传输到视频标签中，但这仅在 Mac 上使用，并使用其他技术来提供帮助。

并非所有浏览器都支持 video 标签，最近的现代浏览器支持，但如果您需要支持 IE flash，仍然是在所有平台上提供视频的更好替代方式。

某些浏览器仅部分支持流式传输，实现起来并非易事。

这里有几个链接可能会有所帮助。

[http://ishtml5readyyet.com/](http://ishtml5readyyet.com/)

[http://html5readiness.com/](http://html5readiness.com/)

[https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:00:15.460

实际上有几种可能性可以做到这一点，因为 HTML5 使得使用视频标签流式传输大多数基本输入变得非常容易，但是非常有限，因为您不会像您想要的那样实际访问字节。

但是要将诸如 mp4 之类的基本内容转换为与 html5 兼容的视频，只需使用此转换器工具： [http ://easyhtml5video.com/](http://easyhtml5video.com/)

# java - 动态依赖

> ID：10108415
> 
> 赞同：0
> 
> 时间：2012-04-11T14:49:39.020
> 
> 标签：java, maven, dependency-injection, dependencies

我们有一种情况，我们的一些依赖项具有相互冲突的依赖项。我们依赖于 A 和 B。A 依赖于 X 的版本 a。B 依赖于 X 的版本 b。

是否有任何依赖管理工具可以处理这种情况。感觉好像听说过一些动态加载依赖的依赖管理工具什么的。似乎它避免了遇到上述情况。我认为您可以以某种方式指定在给定瞬间加载哪个版本的 X。

有可能做这样的事情吗？代码中有什么方法可以根据需要加载和卸载依赖项吗？

我已经忘记了大部分编译器理论。而且我还没有处理太多依赖管理。因此，请原谅任何表现出来的无知。应该是正品吧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:00:13.500

1.  您可以使用 OSGi 或其他一些管理多个类加载器的框架，这样冲突的版本就不会出现在同一个类加载器中。

2.  您可以通过创建类加载器尝试在小范围内自己做同样的事情。

3.  您可以使用 maven-shade-plugin 重命名一个或多个副本中的包以避免冲突。

# c# - 将数据写入文件，结果不如预期

> ID：10108417
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:49:48.880
> 
> 标签：c#

我使用此代码将字符串写入文件。

```
var fs = File.Open(path, FileMode.OpenOrCreate, FileAccess.Write);
var sw = new StreamWriter(fs, Encoding.UTF8);
sw.Write(dataString);
fs.Flush();
sw.Flush();
sw.Close(); 
```

当我调试它时，我看到 dataString 是正确的。但是，写入文件后，有些字符串的顺序是错误的。我是否应该在将数据写入文件后添加一个线程睡眠，因为在将数据写入文件后，我将其读回以供其他进程使用。

或者可能有更好的方法将字符串写入文件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:52:05.030

> 或者可能有更好的方法将字符串写入文件？

是的，有一个更简单的方法。使用[`File.WriteAllText`](http://msdn.microsoft.com/en-us/library/ms143376.aspx)或[`File.AppendAllText`](http://msdn.microsoft.com/en-us/library/ms143357.aspx)。

```
File.WriteAllText("output.txt", text, Encoding.UTF8); 
```

除了更简洁之外，另一个优点是即使出现异常，文件也会正确关闭。但是，我怀疑它会改变数据写入文件的顺序。

# actionscript-3 - 从场景中移除对象的一组实例

> ID：10108418
> 
> 赞同：2
> 
> 时间：2012-04-11T14:49:56.263
> 
> 标签：actionscript-3, flash-cs5

我在 ActionScript 3 中有一个项目，我要在图表中输出一堆数据并作为纯文本输出。不过，这不是问题。问题是当用户改变他想要显示的数据类型时。然后，我将删除图中当前显示的列，并添加新列。但是我的代码删除了所有列，因此根本没有图表！

我已经在 Flash CS5 中完成了这一切，列是我刚刚添加到舞台上的一个对象（一个矩形）的实例。所有实例都添加到容器“容器”中。当我想删除它们并添加我使用的新的时：

```
var container = new Sprite(); // The container for my diagram
function emptyContainer() {
if (container.numChildren > 0) {
    container.removeChildAt(0); 
  }
} 
```

哪个有效。

我有 switch 语句，可以根据用户输入添加不同的列。对象（矩形）的名称是“soyle”。实例的名称是“stolpe”（顺便说一句，我是挪威人，所以这就是那些奇怪的词的处理）

```
 function fChange(event:Event) {
textToBeReturned = ""; 

  switch (treCbox.selectedItem.label) {
case "Furu":
    for (var a = 1; a < table.length; a++ ){
        textToBeReturned += "I år: " + table[a][0] + " - " + table[a][1] + " millioner trær." + "\n";
        // Diagram
        var stolpe = new soyle;
        stolpe.width = table[a][1];
        stolpe.x = 20;
        stolpe.y = 100 + (a * 30);
        container.addChild(stolpe);

        // Description for the columns
        var textbox = new TextField;
        textbox.text = "År " + table[a][0];
        textbox.x = stolpe.width + 30;
        textbox.y = stolpe.y;
        container.addChild(textbox);
    }
    break;
case "Gran":
    for (var b = 1; b < table.length; b++ ){
        textToBeReturned += "I år: " + table[b][0] + " - " + table[b][2] + " millioner trær." + "\n" ;

        var stolpe = new soyle;
        stolpe.width = table[b][1];
        stolpe.x = 20;
        stolpe.y = 100 + (b * 30);
        container.addChild(stolpe);

        // Description for the columns
        var textbox = new TextField;
        textbox.text = "År " + table[b][0];
        textbox.x = stolpe.width + 30;
        textbox.y = stolpe.y;
        container.addChild(textbox);
    }
    break;
case "Lauvtre":
    for (var c = 1; c < table.length; c++ ){
        textToBeReturned += "I år: " + table[c][0] + " - " + table[c][3] + " millioner trær." + "\n" ;

        var stolpe = new soyle;
        stolpe.width = table[c][1];
        stolpe.x = 20;
        stolpe.y = 100 + (c * 30);
        container.addChild(stolpe);

        // Description for the columns
        var textbox = new TextField;
        textbox.text = "År " + table[c][0];
        textbox.x = stolpe.width + 30;
        textbox.y = stolpe.y;
        container.addChild(textbox);
    }
    break;
}   
txtReturn.text = textToBeReturned; 
}; 
```

我想知道在哪里放置我的删除所有孩子的功能，只删除之前添加的那些孩子。无论我将函数放在哪里（在 fChange 的开头，在每个案例的开头），都没有显示任何图表，无论是新的还是旧的。

当然有一个包含数据的数组，但我不发布它，因为它无关紧要。

感谢您的宝贵时间，并提前为您提供帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:44:13.880

这里有几个问题。我假设您想在交换机内添加新子代之前从容器 MC 中删除所有子代。（下次提示，尝试只发布您使用的代码。这里的 switch 语句很大而且压倒性的。它也不是真的相关）

您的函数 emptyContainer 实际上并没有删除所有子项，它只删除索引 0 处的一个。这需要在循环内。

```
function emptyContainer() {
   while (container.numChildren > 0) { //changed the if to a while. This will run until there are no children left in container
      container.removeChildAt(0); 
  }
} 
```

您将要在 fChanged 函数中调用这第一件事

```
function fChange(event:Event) {
     emptyContainer()

  /* rest of function */

} 
```

试试这个，让我知道它是如何工作的。

# ruby - 为什么未声明的 Ruby 本地、实例、类和全局变量具有不同的行为？

> ID：10108420
> 
> 赞同：4
> 
> 时间：2012-04-11T14:50:08.150
> 
> 标签：ruby

一些未声明的变量是 nil，一些会抛出错误。怎么来的？

```
$ irb
1.9.3p0 :001 > asdf  # local
NameError: undefined local variable or method `asdf' for main:Object
from (irb):1
from /Users/saizai/.rvm/rubies/ruby-1.9.3-p0/bin/irb:16:in `<main>'
1.9.3p0 :002 >@asdf # instance
=> nil 
1.9.3p0 :003 >@@asdf # class
NameError: uninitialized class variable @@asdf in Object
from (irb):3
from /Users/saizai/.rvm/rubies/ruby-1.9.3-p0/bin/irb:16:in `<main>'
1.9.3p0 :004 > $asdf # global
=> nil 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:46:56.697

必须始终分配类变量，否则`NameError`当您尝试使用它们时它们将返回 a。我目前没有关于为什么会这样的详细信息。

Instance 和 Global 变量`nil`即使没有赋值也会返回。`-w`但是，如果您使用该标志运行脚本，它们会发出警告。

但是，我确实有关于局部变量的答案。局部变量之所以如此，是因为它们前面没有任何标点符号。这意味着变量可以是变量或方法调用（因为 Ruby 不需要`()`在没有参数的方法调用之后）。

```
something # could be a variable named 'something' or a method called 'something()' 
```

如果没有为`something`变量赋值，那么 Ruby 解释器假定它是一个方法调用。如果没有该名称的方法，那么它会引发`NameError`. 这就是您会收到此消息的原因：

```
NameError: undefined local variable or method 'something' for main:Object
     from (irb):1
     from path/to/Ruby/bin/irb:12 in '<main>' 
```

因此，Ruby 解释器以这种方式处理局部变量很重要，以防万一它实际上是您所指的方法。

作为一个有趣的旁注：

> 有一个怪癖——当 Ruby 解释器看到该变量的赋值表达式时，变量就存在了。即使没有实际执行该分配也是如此。存在但尚未被赋值的变量被赋予默认值 nil。

意思就是：

```
if false
   z = "Something"
end

z.nil? #=> true
never_assigned.nil? #=> NameError 
```

上面的引用来自 David Flanagan 和 Yukihiro Matsumoto 的 The Ruby Programming Language 第 4.2 节

# python - 为什么 izip() 的这种实现不起作用？

> ID：10108423
> 
> 赞同：8
> 
> 时间：2012-04-11T14:50:23.720
> 
> 标签：python

为了更好地理解 Python 的生成器，我正在尝试在`itertools`模块中实现设施，并遇到以下问题`izip`：

```
def izip(*iterables):
    its = tuple(iter(it) for it in iterables)
    while True:
        yield tuple(next(it) for it in its)  # ERROR
        # yield tuple(map(next, its))  # OK 
```

我的代码使用 ERROR 行，参考实现（在手册中给出）使用 OK 行，不考虑其他微小差异。有了这个片段：

```
for x in izip([1, 2, 3], (4, 5)):
    print x 
```

我的代码输出：

```
(1, 4)
(2, 5)
(3,)
()
()
...  # indefinite () 
```

，而预期的输出是：

```
(1, 4)
(2, 5) 
```

请问我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T14:54:10.250

您的实现不起作用的原因是由于`StopIteration`一个迭代器被耗尽而导致的异常被抛出*在生成器表达式*中。它只会终止生成器表达式，而不是封闭的生成器函数。

# mysql - Mysql，innodb - 无法创建外键

> ID：10108426
> 
> 赞同：2
> 
> 时间：2012-04-11T14:50:27.713
> 
> 标签：mysql, foreign-keys, innodb

使用默认引擎 (MyIsam)，我可以使用以下语法创建外键：

```
alter table `codes` add constraint foreign key(`associated_code_id`) references ask_codes(code_id)  on update cascade on delete cascade; 
```

但是，当我使用 INNODB 创建表时，我不再能够创建外键（mysql 给我 ERROR 1005 (HY000): Can't create table 'my_table.#sql-3311_16115' (errno: 150) ）。

这是语法问题吗？谢谢您的帮助，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:23:35.660

您的问题是两列的类型不同 - 它们不完全匹配：

> 如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T17:41:50.470

我在@phpGeek 的最佳答案中补充说，您还需要在数值中具有相同的长度，这意味着如果表 A 具有“id INT(11)”表 B 也必须具有“A_id INT(11)”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:58:37.963

如果我没记错的话，当您为 MyISAM 表运行 ALTER 语句时，它会默默地忽略 FK 约束。当您为 InnoDB 运行它时，它会尝试通过将约束应用于表来验证约束。我认为当现有行的 FK 约束失败时会发生此错误 - [InnoDB 错误代码](http://dev.mysql.com/doc/refman/5.0/en/innodb-error-codes.html)

您可以尝试以下查询以查看阻止创建约束的值 -

```
SELECT *
FROM codes
LEFT JOIN ask_codes
    ON codes.associated_code_id = ask_codes.code_id
WHERE ask_codes.code_id IS NULL 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-04-11T14:54:01.913

我相信这只是 InnoDB 的一个限制。它不支持外键。至少上次我遇到这个问题时，我就是这样摆脱了这个问题。

# c# - 如何进行查询以计算特定列中出现最多的字符串？

> ID：10108429
> 
> 赞同：0
> 
> 时间：2012-04-11T14:50:29.777
> 
> 标签：c#, sql-server

我正在编写一个程序，我需要对数据库进行查询，询问在给定列中最常出现的字符串。在这个例子中，它的“stringONE”。

```
----------------------------
|  ID  |  Column (string)  |
----------------------------
|  1   |     stringONE     |
----------------------------
|  2   |     stringTWO     |
----------------------------
|  3   |     stringONE     |
----------------------------
|  4   |     stringONE     |
---------------------------- 
```

现在我需要把出现次数最多的字符串的名字放到一个变量字符串中，例如：

```
string most_appeared_string = sql.ExecuteScalar(); 
```

此外，如果没有出现最多的字符串，而是出现相同次数的 2 个或更多字符串，会发生什么情况，如下所示：

```
----------------------------
|  ID  |  Column (string)  |
----------------------------
|  1   |     stringONE     |
----------------------------
|  2   |     stringTWO     |
----------------------------
|  3   |     stringTWO     |
----------------------------
|  4   |     stringONE     |
---------------------------- 
```

提前谢谢。

* * *

@KeithS

您是否有查询的 sql-server 版本，因为我在那里尝试时遇到了一些错误。这是我想做的一个表格示例。

```
------------------------------------------------
|  ID  |  column1 (string) |  author (string)  |
------------------------------------------------
|  1   |     string-ONE    |       John        |
------------------------------------------------
|  2   |     string-TWO    |       John        |
------------------------------------------------
|  3   |     string-ONE    |      Martin       |
------------------------------------------------
|  4   |     string-ONE    |       John        |
------------------------------------------------

SELECT TOP (1) column1, COUNT(*) FROM table WHERE author='John' ORDER BY ID 
```

它应该返回“string-ONE”，因为它对作者 John 出现的次数最多 (2)。但是，在 MS-SQL Management Studio 中尝试查询时，这是我得到的错误：

```
Column 'table.column1' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause. 
```

* * *

没关系编辑。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:53:26.140

这是一个非常简单的查询（至少在 T-SQL 中）：

```
select top 1 Column, Count(*) from Table group by Column order by Count(*) desc 
```

ExecuteScalar，根据实现细节，将返回字符串值，因为它是结果集中唯一行的第一列，即使有两列。您还可以使用 ExecuteReader 访问该字符串出现的次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:10:04.027

```
select top (1) SomeCol, count(*) as Row_Count
from YourTable
group by SomeCol
order by Row_Count desc 
```

> Also, what happens if there is no string that appears the most, rather 2 or more strings that appear the same amount of times, like this:

In that case, using the above query, you will get **one** arbitrary row. You can add `with ties` to get all rows that has the same highest value.

```
select top (1) with ties SomeCol, count(*) as Row_Count
from YourTable
group by SomeCol
order by Row_Count desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:52:55.890

```
SELECT max(counted) AS max_counted FROM (
   SELECT count(*) AS counted FROM counter GROUP BY date
 ) 
```

这可以解决问题

# sql - 如果一个字段为空，SQL 查询不返回任何内容

> ID：10108431
> 
> 赞同：0
> 
> 时间：2012-04-11T14:50:34.333
> 
> 标签：sql, sql-server

我有以下 SQL 查询：

```
SELECT 
  C.Child_ID,
  C.Child_Name AS Name,
  C.Child_Surname AS Surname,
  C.Birthday AS DOB, 
  C.Location, 
  C.Primary_Image, 
  U.Text AS MostRecentUpdate,   
  U.Update_Date, 
  S.End_Date
FROM Children as C, Sponsors as S, Updates as U 
WHERE 
  S.User_ID=@UserID 
  AND C.Child_ID=S.Child_ID 
  AND C.Child_ID=U.Child_ID 
  AND U.Update_Date = (SELECT 
                         MAX(Update_Date) 
                       FROM Updates as U2 
                       WHERE U2.Child_ID=S.Child_ID) 
  AND S.End_Date>GETDATE()
  ORDER BY C.Child_Name ASC 
```

其中选择了孩子的详细信息和孩子的最新更新（用于赞助网站）。问题是，如果孩子还没有任何更新（更新类似于 facebook 状态），则不会返回任何详细信息。

如果没有更新，是否有办法修改此查询以仅返回子详细信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:54:26.280

使用`left outer join`：

```
SELECT C.Child_ID, C.Child_Name AS Name, C.Child_Surname AS Surname,
       C.Birthday AS DOB, C.Location, C.Primary_Image,
       U.Text AS MostRecentUpdate, U.Update_Date, S.End_Date
FROM Children as C
inner join Sponsors S
on C.Child_ID=S.Child_ID
left outer join Updates U 
on C.Child_ID=U.Child_ID
AND  U.Update_Date=(SELECT MAX(Update_Date) FROM Updates as U2 WHERE U2.Child_ID=S.Child_ID)
WHERE S.User_ID=@UserID AND S.End_Date>GETDATE()
ORDER BY C.Child_Name ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:55:30.193

当没有更新时，您不会得到任何结果，因为您正在执行从子表到更新表的内部联接。

我建议您将其更改为新的兼容 ansi 的连接语法，而不是旧的连接语法。然后，您可以将带有更新的联接更改为左外部联接。

那应该这样做。

祝你好运。

# php - CakePHP 2.0 - 2.1，从控制器查询不同的模型

> ID：10108432
> 
> 赞同：0
> 
> 时间：2012-04-11T14:50:35.220
> 
> 标签：php, mysql, cakephp-2.0, cakephp-2.1

我有一个处理视频文件格式的上传控制器。在上传控制器中，您可以浏览所有上传的视频并观看它们。在函数 watch 中，我有一个 comments 元素，它使用 userid（当前登录的用户留下的评论）uploadid（当前正在观看的上传）和评论（用户的评论）更新评论表。

我的表格工作得很好，但是我不确定如何从评论表中获取信息，例如要实现的必要查询？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:21:40.383

我看到您的另一篇文章[CakePHP Elements not updated table](https://stackoverflow.com/questions/10074897/cakephp-elements-not-updating-table)，所以我对您的情况有所了解。您似乎在用您的 Post 模型表示评论。

您想在 UploadsController 中从 Post 模型中查询数据，对吗？

如果您的 comments 表名为`comments`，您需要确保它与您的 Post 模型相关联。如果模型和数据库表遵循 Cake 的命名约定，Cake 会自动关联它们。但如果它们实际上不同，您可以为您的 Post 模型指定一个自定义数据库表：

```
<?php
class Post extends AppModel {

    var $useTable = "comments" /*Or whatever you named your comments table*/

    ...
}
?> 
```

您还必须确保在 Post 和 Upload 之间设置模型关联：

```
Post belongsTo Upload
Upload hasMany Post 
```

我注意到你有：

```
Post belongsTo Upload
Upload hasAndBelongsToMany Post 
```

它是HABTM有什么原因吗？HABTM 意味着同一个帖子可以属于许多不同的上传。hasMany 意味着一个 Post 只能属于一个 Upload。

最后，既然模型关联已经建立，您可以在控制器中访问相关模型：

```
<?php
class UploadsController extends AppController {

    ...

    function watch ($id = null) {

        $this->Upload->id = $id;      
        $this->set('uploads', $this->Upload->read());

        /* To get related comments (Posts) */
        $related_comments = $this->Upload->Post->find('all', array(
            'conditions' => array(
                'Upload.id' => $id /* This condition makes it so only associated comments are found */
            )
        ));
        $this->set('comments', $related_comments);
    }

    ...

 }
 ?> 
```

# apache - 代理和用户之间是否可以使用 ssl 加密的转发代理？

> ID：10108433
> 
> 赞同：3
> 
> 时间：2012-04-11T14:50:40.330
> 
> 标签：apache, http, ssl, https, proxy

首先，我想明确一点，我不是在谈论访问原始服务器上使用 https 传递的内容，这可以使用模块 mod_proxy_connect 完成。

我想要的是客户端和代理之间的安全连接，当实际请求的源由不安全的标准 http 服务器提供服务时也是如此。

我正在使用 apache 2.2，如果可行的话，我也希望使用 apache 来实现这一点。

我使用wireshark嗅探了一些请求并注意到以下内容：

url [http://example.com/file](http://example.com/file)的普通 http看起来像这样：

在与源服务器的连接上：

```
GET /file HTTP 1.1
Host: example.com 
```

请注意，主机信息已从实际请求中剥离，而是提供主机标头（可以在命名虚拟主机中的服务器端处理）。

当请求通过代理服务器时，它看起来略有不同：

在与代理服务器的连接上：

```
GET http://example.com/file HTTP 1.1
Host: example.com 
```

请注意，请求行现在实际上包含完整的 url，包括协议和主机名。如果我正确阅读了 RFC，则主机标头可能是多余的总线，它是 HTTP 1.1 所要求的。

所以我考虑设置一个监听端口 443 的 apache 网络服务器，启用一个带有 ssl 引擎和证书的虚拟主机，并且不要将它绑定到任何主机名。

我认为这应该让 apache 谈论 ssl，但是证书公用名将与连接行中指定的主机不匹配到代理服务器 ip 地址。

我想用目前的标准实现什么？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T14:11:29.430

是的，当然，这就是 HTTPS 代理。

客户端通过 SSL 连接到代理，以文本形式向代理发送命令。

也可以使用 HTTP CONNECT 在 SSL 连接“内部”与 HTTPS 代理建立 HTTPS 连接，但并非所有客户端都支持此功能：

```
HTTPS connection over HTTPS proxy
client           proxy           server
ssl    \-------/   ssl
connect---------200 OK
ssl  \---------------------------/ ssl
data-------------------------------data
     /---------------------------\
       /-------\

HTTP connection over HTTPS proxy
client           proxy           server
ssl    \-------/   ssl
GET http://server/ ->
                       GET / 
                       Host: server ->
                       <---------OK, data
<--------------OK, data
       /-------\ 
```

# php - 保存 RichText（所见即所得输出）的最佳方法是什么？

> ID：10108434
> 
> 赞同：0
> 
> 时间：2012-04-11T14:50:43.090
> 
> 标签：php, javascript, html

我有一个基于 javascript 的富文本编辑器。

保存它生成的标签最安全的方法是什么？

我使用 MySQL 作为我的数据库。

我不确定使用`mysql_real_escape_string($text);`是否安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:10:34.677

我建议您使用`mysqli`与数据库接口，这样您就不需要转义数据并获得针对 SQL 注入的完整保护。当然，您可能仍然需要防范 HTML 注入。

您不需要将文本字符串写入 JavaScript 文件。如果您需要由 JavaScript 处理它，我建议您使用 XMLHttpRequest 获取数据（这与名称所暗示的相反，不需要您的数据采用 XML 格式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:24:17.910

我想不出在`htmlentities`这里使用的理由。 `mysql_real_escape_string`在这里至关重要，因为它可以防止人们将恶意 SQL 代码注入`';DROP * FROM table foo;--`到您的数据库中。我会尝试不使用`htmlentities`，如果您发现需要转换为实体，那么您可以尝试`htmlspecialchars`仅转换特殊字符。

如果您想限制表单中允许的 HTML，您可能还需要查看该`strip_tags`函数。

相关文档： http:
[//us2.php.net/manual/en/function.htmlentities.php](http://us2.php.net/manual/en/function.htmlentities.php)
[http://us2.php.net/manual/en/function.htmlspecialchars.php](http://us2.php.net/manual/en/function.htmlspecialchars.php)

祝你好运

# objective-c - 如何更改 NSCarbonWindow 的可见性？

> ID：10108435
> 
> 赞同：0
> 
> 时间：2012-04-11T14:50:44.293
> 
> 标签：objective-c, macos, cocoa

我正在使用`::RunAppModalLoopForWindow(WindowPtr)`将碳窗口作为模态运行。但在某些时候，我需要显示/隐藏所有应用程序的窗口：

```
NSArray* windowNumbers = [NSWindow windowNumbersWithOptions:0];

for (NSNumber* windowNumber in windowNumbers)
{
    NSWindow* window = [[NSApplication sharedApplication] windowWithWindowNumber:[windowNumber integerValue]];

        [window setAlphaValue:CGFloat(showFlag)];
} 
```

但是 window`NSCarbonWindow*`不响应`setAlphaValue`，因此，窗口不会改变其可见性。

另外，我不知道在哪里`NSCarbonWindow`定义，所以我可以从`NSWindow`NSCarbonWindow 转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:24:08.060

怎么样：

```
if ([window respondsToSelector: @selector(setAlphaValue:)])
    [window setAlphaValue:CGFloat(showFlag)];
else if (showFlag)
    ShowWindow( [window windowRef] );
else
    HideWindow( [window windowRef] ); 
```

# jquery - $.serializeArray() 不包括表单内的所有字段

> ID：10108437
> 
> 赞同：2
> 
> 时间：2012-04-11T14:50:51.000
> 
> 标签：jquery, forms, serializearray

我`<form>`在单页上有多个，都有唯一的 ID，表单主体如下所示。

```
<form id="form-main">
    <table>
        <tr>
           <td><input type="text" name="field1"/></td>
                . . . . . . .
                . . . . . . .
        </tr>
    </table>
    <table>
        <tr>
           <td><input type="text" name="field2"/></td>
                . . . . . . .
                . . . . . . .
        </tr>
    </table>     
</form>

<form id="form-second">
    <table>
        <tr>
           <td><input type="text" name="field3"/></td>
                . . . . . . .
                . . . . . . .
        </tr>
    </table>
    <table>
        <tr>
           <td><input type="text" name="field4"/></td>
                . . . . . . .
                . . . . . . .
        </tr>
    </table>
</form> 
```

我知道不建议使用表格来对齐表单字段，并且可以使用 CSS 来做到这一点，但实际问题是，当我使用 时`$("#form-main").serializeArray`，我应该在我的数组对象中获取此表单的所有字段，但我在这里仅获取表单中第一个表的字段，其余输入将被忽略。

这是一个有效的行为`serializeArray()`吗？或者我对表格的使用是真正的问题？我可以使用`div`s 代替表格，但那将是我最后的选择。此外，在这些多个表单中，第一个表具有必须填写的字段，因此连同“按您输入验证”的方法，我正在遍历这些必填字段以检查它们是否没有留空，所以这就是数组对象中仅包含每个表单的第一个表的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-05-25T14:39:26.330

我有同样的问题。我有一种有效的形式和一种无效的形式。做 Prestaul 所说的有助于确认仍然有问题。

问题是我有“id”属性，但没有“name”属性。serializeArray 需要所有输入字段的“名称”属性。

抢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:01:53.610

这是对 serializeArray 的完全有效的使用，它也应该与具有相同名称的多个元素一起使用。我刚刚做了一个快速测试（[http://jsfiddle.net/Q5s5V/](http://jsfiddle.net/Q5s5V/)），一切都按预期运行......我认为你的代码还有其他问题。

您可以尝试的一件事是选择输入本身而不是表单，然后查看 1）您是否拥有您期望的所有输入以及 2）该集合是否正确序列化。

```
var $elements = $('#form-main :input');
console.log($elements.length);
console.log($elements.serializeArray()); 
```

我的猜测是有一个标记错误（未封闭的标签或其他）阻止这些元素被选中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-17T00:27:21.590

我知道这是一个老问题，但我很惊讶在这里没有看到正确的答案。问题是页面上有两个表单，而不是一个。

serializeArray() 仅适用于您指定的表单标记内的字段，因此使用 $("#form-main").serializeArray 将仅包括 field1 和 field2。

Field3 和 field4 不包括在内，因为它们不在#form-main 中，它们在#form-second 中。

# c - Axis2C 内存泄漏？

> ID：10108438
> 
> 赞同：0
> 
> 时间：2012-04-11T14:50:55.437
> 
> 标签：c, valgrind, axis2c

我正在使用 Axis2C。我正在使用一个简单的 Web 服务客户端进行一些测试来测试这个框架。

我使用一些示例和 Apache 提供的文档编写了客户端。客户端工作正常，我决定用 valgrind 对其进行测试，以确保内存管理正确。

我使用示例和文档中提到的函数来释放内存（在这种特殊情况下）：

```
// to free the requst struct.
 adb_EncryptRequest_free(request, env);

 // to free the stub.
 axis2_stub_free(stub, env);

 // to free the environment.
 axutil_env_free((axutil_env_t*) env); 
```

我在代码中没有任何“狂野”的 new 或 malloc。

但是，valgrind 报告以下内容：

```
LEAK SUMMARY:
==2287==    definitely lost: 56 bytes in 3 blocks
==2287==    indirectly lost: 156 bytes in 5 blocks
==2287==      possibly lost: 0 bytes in 0 blocks
==2287==    still reachable: 20 bytes in 1 blocks
==2287==         suppressed: 0 bytes in 0 blocks 
```

我使用 --leak-check=full 重新运行 Valgind，但据我所知，内存问题位于 axis2c *.so 文件中。

```
HEAP SUMMARY:
==2292==     in use at exit: 232 bytes in 9 blocks
==2292==   total heap usage: 13,180 allocs, 13,171 frees, 760,422 bytes allocated
==2292== 
==2292== 68 (16 direct, 52 indirect) bytes in 1 blocks are definitely lost in loss record 7 of 9
==2292==    at 0x400677E: malloc (vg_replace_malloc.c:195)
==2292==    by 0x40C2032: axutil_allocator_malloc_impl (in /home/EMBT/Downloads/axis2c-bin-1.6.0-linux/lib/libaxutil.so.0.6.0)
==2292==    by 0x40C5C07: axutil_string_create (in /home/EMBT/Downloads/axis2c-bin-1.6.0-linux/lib/libaxutil.so.0.6.0)
==2292==    by 0x804E024: axis2_stub_start_op_PoCPCIServiceService_GetEncryptedData (axis2_stub_PoCPCIServiceService.c:493)
==2292==    by 0x804E759: main (main.c:59)
==2292== 
==2292== 72 (20 direct, 52 indirect) bytes in 1 blocks are definitely lost in loss record 8 of 9
==2292==    at 0x400677E: malloc (vg_replace_malloc.c:195)
==2292==    by 0x40C2032: axutil_allocator_malloc_impl (in /home/EMBT/Downloads/axis2c-bin-1.6.0-linux/lib/libaxutil.so.0.6.0)
==2292==    by 0x40C74F5: axutil_qname_create (in /home/EMBT/Downloads/axis2c-bin-1.6.0-linux/lib/libaxutil.so.0.6.0)
==2292==    by 0x804D515: axis2_stub_populate_services_for_PoCPCIServiceService (axis2_stub_PoCPCIServiceService.c:91)
==2292==    by 0x804D395: axis2_stub_create_PoCPCIServiceService (axis2_stub_PoCPCIServiceService.c:48)
==2292==    by 0x804E6ED: main (main.c:46)
==2292== 
==2292== 72 (20 direct, 52 indirect) bytes in 1 blocks are definitely lost in loss record 9 of 9
==2292==    at 0x400677E: malloc (vg_replace_malloc.c:195)
==2292==    by 0x40C2032: axutil_allocator_malloc_impl (in /home/EMBT/Downloads/axis2c-bin-1.6.0-linux/lib/libaxutil.so.0.6.0)
==2292==    by 0x40C74F5: axutil_qname_create (in /home/EMBT/Downloads/axis2c-bin-1.6.0-linux/lib/libaxutil.so.0.6.0)
==2292==    by 0x804D64F: axis2_stub_populate_services_for_PoCPCIServiceService (axis2_stub_PoCPCIServiceService.c:111)
==2292==    by 0x804D395: axis2_stub_create_PoCPCIServiceService (axis2_stub_PoCPCIServiceService.c:48)
==2292==    by 0x804E6ED: main (main.c:46) 
```

如果我是对的，有什么办法可以解决吗？

谢谢你的帮助。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T17:28:58.093

不幸的是 Axis2/C 有[很多内存泄漏](https://code.google.com/p/axis2c-unofficial/wiki/MemoryLeaksFixed)。

我们启动了[axis2c-非官方](https://code.google.com/p/axis2c-unofficial/)项目，以提供比原始版本更稳定的Axis2/C。

该项目中有一个[已修复的问题列表](https://code.google.com/p/axis2c-unofficial/wiki/IssuesList)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:51:23.520

没有代码，它只是猜测。我使用了axis2c（来自svn的1.7.x）并且没有注意到任何泄漏（用vc中的[视觉泄漏检测器检查）。](http://vld.codeplex.com/)

我只释放了服务客户端和环境。

```
 axis2_svc_client_free(svc, env);
 axutil_env_free(env); 
```

根据[标题](http://svn.apache.org/repos/asf/axis/axis2/c/core/branches/c/1.7.x/1.7.0/c/include/axis2_svc_client.h)评论员，您与“axis2_svc_client_send_receive”（在生成代码中使用）绑定的数据由服务客户端释放。

# mysql - 组的 MySQL 动态限制

> ID：10108440
> 
> 赞同：0
> 
> 时间：2012-04-11T14:50:58.027
> 
> 标签：mysql, group-by, limit

我有一个似乎无法解决的问题。

我已经看到很多关于在 MySQL 中分组后获取前 x 行的问题。

但是我遇到了一个问题，我表中的每个组都没有我想要获得的不同数量的顶行。

有什么简单的方法可以解决这个问题吗？

我不能只是联合每个有限的组，因为我事先并不知道所有的组，组只是一个 ID。

谢谢，

亚历克斯。

# css - 数据效率：CSS中的图像

> ID：10108447
> 
> 赞同：0
> 
> 时间：2012-04-11T14:51:21.593
> 
> 标签：css, background-image

想知道这是否

```
background:#092542 url('data:image/png;base64, ....') center top no-repeat; 
```

比

```
background:#092542 url('myimage.png') center top no-repeat; 
```

我正在尝试减少加载时间，如果这会有所帮助，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:54:22.643

如果图像只在一个页面上使用一次，那么它可能会在加载（更快）时产生非常轻微（可能不明显）的差异，但这也意味着浏览器无法缓存图像，所以如果它被使用必须再次加载另一个页面，这意味着正在传输数据的两倍（三倍等）。

一般来说，这是不值得的，尽管如果它是一个微型站点，它可能会更容易，但不会太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:07:55.103

数据 URI 图像被缓存。但是，图像的缓存取决于其中包含的文件的缓存方式。如果正在缓存包含数据 URI 图像的样式表，则在重新下载样式表本身之前不会下载该图像。

我还推荐这篇[文章](http://www.nczonline.net/blog/2009/10/27/data-uris-explained/)进一步解释 Data URI，尤其是关于性能的部分。

# php - 转义 php MySQL 内容的游戏计划

> ID：10108455
> 
> 赞同：0
> 
> 时间：2012-04-11T14:51:56.590
> 
> 标签：php, mysql, escaping

我已经阅读了这里关于逃避的每一篇文章，不幸的是，几乎每个人在海报之间都有分歧，所以我只想在我犯下重大错误之前向社区询问我的具体情况，因为我误解了另一篇文章。

我将用户首选项存储在 MySQL 数据库中，我亲自将信息直接放入数据库中，而不是用户提交的输入。

我的问题是：

1.) 如果我正在运行 PHP 查询并将查询结果放入其他 PHP 代码块中，而不是作为 HTML，而是像其他查询一样，即 (SELECT * from $queryresult) 是否不需要转义这个正确的？

2.）如果我直接从数据库将我存储在数据库中的内容作为 html 输出，我是否需要无论如何都要清理这个输出。我的理解是，严格针对用户提交的输入进行清理。需要我真的担心来自我个人填充的数据库字段的数据。

我想我在阅读后知道这里的答案，但我不想在这个问题上留下任何错误的余地。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:55:01.413

## 问题 1 - 为 MySQL 查询转义数据

不，无论来源如何，您都必须**始终**在查询中转义数据。数据转义用于查询解析器。即使数据来自您自己的代码，您也必须对其进行转义。

[学习使用 PDO](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)来避免这个问题。

## 问题 2 - 为 HTML 转义数据

如果要将数据输出到 HTML，则必须**始终**`htmlspecialchars()`使用或等效转义它。这样您就不必担心糟糕的 HTML 代码以及 XSS。

# ms-access - 命令按钮向导无法启动

> ID：10108456
> 
> 赞同：12
> 
> 时间：2012-04-11T14:52:01.827
> 
> 标签：ms-access, ms-access-2010

我想在 Web 表单上创建一个导航按钮。（我使用 MS Access 2010 - Web 数据库）。我拖动了表单上的按钮（选择了控制向导选项），但命令按钮向导没有出现

我双击按钮，但它只是让我编辑按钮名称。我还尝试单击表单上的任意位置 - 仍然没有

如何为我的“Command120”按钮显示命令按钮向导菜单？

![在此处输入图像描述](../Images/7bd43f8529e6dc912a3c92f53d1af44c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T11:07:09.260

您必须先启用控制向导。转到设计功能区上控制组末尾的下拉箭头，然后选择`use control wizards`。然后再次插入按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T11:22:03.040

我遇到过同样的问题。我在设计模式下创建了表单按钮，这似乎让它再次在布局模式下工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-21T16:52:29.723

所以这是一个非常古老的问题，但我已经找到了问题的答案，并将分享希望它可以在未来帮助某人。

如果表单是“Web 表单”，则控件向导不起作用。它必须是标准表格。据我所知，没有任何迹象表明这一点。要查看差异，请参见下图。

![两种类型的表格](../Images/90ae90bcdad9e9f7a33be4224eb26975.png)

顶部的表格是常规表格，而底部带有小地球的表格是 Web 表格。为了创建这种形式，请转到创建选项卡，**不要**选择菜单中的选项。您必须从**客户表格**下拉列表中选择空白表格，如下所示。

![在此处输入图像描述](../Images/678fa48eed44a38b9f1c5ab47b8d4acb.png)

在那里，您可以找到创建没有小地球仪的表单的选项，这些表单可以与控件向导一起使用。希望这对其他人有帮助！这是一个真正痛苦的发现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-05T23:56:40.873

在上面的所有答案之后，我仍然无法让它工作。就我而言，问题似乎是该向导无法在子表单中工作。解决方案是：

*   直接打开子窗体，而不是在父窗体内设计。

或者

*   在父窗体上创建按钮，然后将其剪切或粘贴到子窗体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-24T03:00:20.453

确保下拉箭头中的向导按钮已打开，如果它已关闭，然后重新打开，然后重新创建您的按钮。这在布局视图中对我有用。祝你好运！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-20T03:25:27.633

如果 Sandy 的回答对您不起作用，请先尝试切换到**布局视图**，然后继续。

它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-06T11:35:58.827

在设计工具选项卡中启用“使用控制向导”。

然后将按钮添加到Design are。

就这样

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-20T23:23:48.493

我实际上是在这里寻找解决方案的。虽然我没有在这里找到它，但我确实弄清楚了我做错了什么。

操作向导仅适用于 boundControls。因此，您尝试使用的区域未连接到相关的表或字段。

首先确保您已激活/打开向导，然后继续。

选项 1 [来自 LayoutView]

通过第一次删除按钮，我能够让向导工作。然后删除要放置按钮的单元格。然后我将带有字段名称的单元格拉伸到我想要按钮的右侧。然后我水平拆分字段。最后，我将按钮放在刚刚创建的与字段相邻的单元格上，然后向导出现了。

选项 2 [来自 DesignView]

再次删除第一个不起作用的东西。然后将按钮放在您想要的位置。向导应该会立即弹出。该按钮不会位于您想要的位置，但是一旦设置好，您就可以随时移动它。

我读到您在 DesignView 中尝试过它并且它有效，但是 Access 崩溃并且您丢失了您的宏，所以只是提醒每个人尝试使用副本或测试数据库。

高温高压

我发现有用的链接。
+-------------------------------------------------- -------------------
[https://stackoverflow.com/a/13010098/6158704](https://stackoverflow.com/a/13010098/6158704)
[https://support.office.com/en-us/article/Introduction- to-controls-4a8cf5f2-d739-4ae9-b1e0-510c3f4d6975](https://support.office.com/en-us/article/Introduction-to-controls-4a8cf5f2-d739-4ae9-b1e0-510c3f4d6975)
+------------------------ --------------------------------

# ios - iOS 应用程序在“setupAutoMigratingCoreDataStack”线上启动时冻结 10 秒

> ID：10108459
> 
> 赞同：1
> 
> 时间：2012-04-11T14:52:13.417
> 
> 标签：ios, ios5

首先我不知道是什么导致了这个问题，我只能在设备硬件重启后重现它。在那之后应用程序很好。

*   我使用 MagicalRecords 库。
*   “[MagicalRecordHelpers setupAutoMigratingCoreDataStack]”在“应用程序：didFinishLaunchingWithOptions：”中调用。
*   经过几次内部方法调用后，它会冻结 10-15 秒。

这是来自控制台的日志，您可以在其中查看呼叫的详细信息和时间。我只是注意到它被一些奇怪的（对我来说）低级调用冻结了。

```
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: didFinishLaunchingWithOptions: start
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: didFinishLaunchingWithOptions: DATA > migration
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: --- MR_coordinatorWithAutoMigratingSqliteStoreNamed
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: --- MR_setDefaultStoreCoordinator
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: --- MR_contextWithStoreCoordinator
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: +[NSManagedObjectContext(MagicalRecord) MR_contextWithStoreCoordinator:](0x3ed04728) Creating MOContext  *** On Main Thread ***
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: +[NSManagedObjectContext(MagicalRecord) MR_contextWithStoreCoordinator:](0x3ed04728) Creating context in Context Private Queue Mode
Apr 11 17:39:21 unknown MY_APP[130] <Warning>: --- MR_setDefaultContext
Apr 11 17:39:21 unknown librariand[132] <Notice>: changing log level to 5
Apr 11 17:39:22 unknown com.apple.launchd[1] <Warning>: (com.apple.ubd) Exited with code: 10
Apr 11 17:39:22 unknown com.apple.launchd[1] <Warning>: (com.apple.ubd) Throttling respawn: Will start in 10 seconds
> 
Apr 11 17:39:33 unknown librariand[132] <Error>: client process 130 does not have a valid com.apple.developer.ubiquity-container-identifiers entitlement
Apr 11 17:39:33 unknown librariand[132] <Error>: error in handle_container_path_request: LibrarianErrorDomain/9/The client process does not have a valid com.apple.developer.ubiquity-container-identifiers entitlement
Apr 11 17:39:33 unknown librariand[132] <Error>: client process 130 does not have a valid com.apple.developer.ubiquity-container-identifiers entitlement
Apr 11 17:39:33 unknown librariand[132] <Error>: error in handle_container_path_request: LibrarianErrorDomain/9/The client process does not have a valid com.apple.developer.ubiquity-container-identifiers entitlement
Apr 11 17:39:33 unknown MY_APP[130] <Warning>: --- setupCoreDataStackWithAutoMigratingSqliteStoreNamed END
Apr 11 17:39:33 unknown MY_APP[130] <Warning>: didFinishLaunchingWithOptions: DATA > prefilling
Apr 11 17:39:33 unknown MY_APP[130] <Warning>: didFinishLaunchingWithOptions: UI
Apr 11 17:39:33 unknown librariand[132] <Warning>: items added, refreshing item updates for file://localhost/private/var/mobile/Library/Mobile%20Documents/
Apr 11 17:39:33 unknown MY_APP[130] <Warning>: didFinishLaunchingWithOptions: end 
```

我真的不知道用户是否会遇到这个问题。但是，如果这样做，对于其中许多人来说，它可能会在开始时崩溃。

我知道这个问题很难分析，但是如果您至少有任何相关的想法或只是一个想法，请分享。也请询问任何细节。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:10:37.170

因此，看起来 iCloud 正在尝试在那里进行初始化。我听说这是一个问题，但是，Apple 建议在 NSFileManager 上调用 URLForUbiquityContainerIdentifier:。这就是该方法在幕后发生的事情，但似乎该方法在某些时候也令人窒息......除了在**NSManagedObjectContext**类别方法**MR_observeiCloudChangesInCoordinator**中，不知道该做什么，注释掉调用**isICloudEnabled**的行......这很可能是你现在的解决方案:(

# soa - BPM 与 ESB - 编排？

> ID：10108465
> 
> 赞同：6
> 
> 时间：2012-04-11T14:52:31.493
> 
> 标签：soa, esb, business-process-management, orchestration, eai

我们可以肯定地说，如果 ESB 提供了编排功能，那么它就有资格成为 BPM 的实现吗？

我知道 BPM 有一个不同的目的，那就是对一些业务流程进行建模，这些业务流程的实现可以由任何简单的 Java/J2EE 应用程序、复杂的 SOA 应用程序或一些说我提供 BPM 的应用程序来完成。是对的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T17:54:15.203

第一个问题：

您的陈述对于仅对请求-响应交互进行建模的某些业务流程是有效的。

但是当涉及到复杂的业务流程时，我们需要考虑除编排功能之外的其他一些功能。在这里，我列出了一些这样的场景。

1.  让我们来看一个需要长时间保持其状态的业务流程。我们通常称它们为有状态或长期运行的业务流程。为了支持这类业务流程，应该有一个状态持久化机制。此功能与编排功能无关。
2.  考虑一个业务流程，它需要一些补偿功能。在这种情况下，一些业务流程建模标准（如 WS-BPEL）已经定义了它的[补偿机制](http://www.oasis-open.org/committees/download.php/23964/wsbpel-v2.0-primer.htm#_Toc166509754)。因此，除了编排功能之外，还有一些其他功能需要考虑。

第二个问题：

是的。但是与您提到的实现机制相比，BPM 引擎有几个优点。

一个优点是，不可能从 Java 应用程序实现 BPM 引擎提供的建模抽象级别。假设我们使用 JAVA 应用程序来实现业务流程逻辑并且该业务流程投入生产。假设我们需要更改其合作伙伴服务的端点 URL。在这种情况下，现在需要修改、重新编译并部署回生产系统中的业务流程实现。如果我们使用像[WS-BPEL](http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=wsbpel)这样​​的业务流程语言标准来实现业务流程，我们可以非常轻松地更改业务流程配置并将其推回生产环境。这提高了效率，降低了业务维护成本。还有其他原因，例如易于适应和灵活性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T14:50:18.903

我前段时间创建了这些幻灯片，以准确解释如何同时使用它们以及它们之间的关系： [http ://www.slideshare.net/salaboy/jbpm5-community-training-module-25-bpm-for-开发商](http://www.slideshare.net/salaboy/jbpm5-community-training-module-25-bpm-for-developers)

您需要了解 BPEL/ESB/Orchestration 和 BPMN（面向业务）之间的不同视角，它们具有非常不同的范围。

干杯

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-15T15:27:02.753

通常，ESB 被分配给中间层——将低级服务编排成更大的服务单元，这些服务单元将暴露给业务以用于流程——而 BPM 则在顶层。

因此，BPM 将用于业务流程编排层，而 ESB 将通过在业务服务和服务支持中工作来实现和促进这一点。

换句话说，要在业务流程上取得成功，首先您需要将所有系统和应用程序公开为服务；这就是 ESB 发挥作用的地方。

你可以看到这个链接：http: [//blogs.mulesoft.org/why-bpm-and-esb-need-to-work-together/](http://blogs.mulesoft.org/why-bpm-and-esb-need-to-work-together/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-28T16:41:00.617

让我通过设计模式和规范来区分 BPM、Orchestration 和 ESB，以增加清晰度。

一般而言，“编排”已被定义为采用流程抽象、流程集中化和状态存储库设计模式的复合模式。凭借状态存储库模式的实现，与之前的文章相反，Orchestration 支持长时间运行的同步业务流程，就像 BPM 一样。

两者之间的主要实际区别是编排中间件（例如 WebSphere Process Server、BizTalk、Oracle BPEL Manager 和 Windows Workflow Foundation）支持大多数 WS * 规范。这包括 Ws BPEL、Ws Security、Ws Atomic Transaction、Ws Business Activity、Ws Reliable Messaging 等，而大多数 BPM 工具没有。

因此，您可以在企业级别随意使用编排，但在该范围内使用 BPM 时要非常小心。

在实践中，BPM 和编排工具都支持业务流程的图形表示。区别在于编排可以通过**Vendor-Neutral** BPEL（业务流程执行语言）表示，而 BPM 通过**Vendor Specific** BPMN（业务流程建模符号）表示。这是在 SOA/企业级避免使用 BPM 工具的另一个原因。

在 BPM 工具实现 Ws * 规范的情况下，它是一个用于所有实际目的的编排引擎。区别在于 BPM 工具依赖于 Vendor-Specific BPMN，而编排工具依赖于 Vendor-Neutral BPEL。

在 BPM 和 Orchestration 需要共存的情况下，将 BPM 限制在应用架构（例如 MVC 风格），让 Orchestration 促进企业资产的共享。

ESB 是一种完全不同的动物。它应该用于异步流程，而不是同步流程，并依赖于一组不同的设计模式（即服务代理、异步队列、中间路由和内容丰富模式）

# python - ReportLab - 创建表时出错

> ID：10108467
> 
> 赞同：0
> 
> 时间：2012-04-11T14:52:35.263
> 
> 标签：python, reportlab

这是我第一次使用 ReportLab，我试图编辑一个完全符合我要求的现有脚本，但是当我尝试运行该脚本时出现以下错误。

脚本 -

```
import os, arcgisscripting, datetime, getpass, string

from reportlab.lib.pagesizes import A4
from reportlab.platypus import *
from reportlab.lib import colors
from reportlab.lib.styles import ParagraphStyle

myWorkspace = r"W:\City.gdb"
myReportFolder = r"W:\Reports"
myLogosFolder = r"W:\Logos"
OpenPDF = "true"

gp = arcgisscripting.create(9.3)

#setup geoprocessor
gp.workspace = myWorkspace
gp.toolbox = "analysis"
gp.OverwriteOutput = 1
mySelectedGroupsFC = myWorkspace + os.sep + "SelectedGroups"
myNewBusinessFC = myWorkspace + os.sep + "New_Businesses"
myBufferFC = myWorkspace + os.sep + "Buffer"
myReportTable = myWorkspace + os.sep + "FINAL_TABLE"

#obtain Selected groups
mySelGroupsCursor = gp.searchcursor(mySelectedGroupsFC)
mySelectedGroups = mySelGroupsCursor.next()

#obtain New Business groups
myNewBusinessCursor = gp.searchcursor(myNewBusinessFC)
myNewBusiness = myNewBusinessCursor.next()

#obtain Buffer
myBufferCursor = gp.searchcursor(myBufferFC)
myBuffer = myBufferCursor.next()

#setup PDF doc
Author = getpass.getuser() #gets OS user name
pdf_file_name = myNewBusiness.POSTCODE
pdf_file = myReportFolder + os.sep + pdf_file_name + ".pdf"

doc = SimpleDocTemplate(pdf_file, pagesize=A4)

#array of report elements
parts = []

#
#HEADER
#
parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=12, alignment=1, spaceAfter=20)
p = Paragraph('<b><u>Report</u></b>', parstyle)
parts.append(p)

p = Paragraph('The following community groups are located within <b><u>' + myBuffer.Buffer + 'metres  of -  <b><u>' + myNewBusiness.Postcode + '<\b><\u>.',parstyle)
parts.append(p)

#
#TABLE
#

while myBuffer:
    parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=11, alignment=0, spaceAfter=15, spaceBefore =15)
    p = Paragraph('<b><u>Community groups within ' + myBuffer.Buffer + ' metres of ' + myNewBusiness.Postcode  + '</u><\b>', parstyle)
    parts.append(p)

    data = []
    parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=11, alignment=0)    

    while mySelectedGroups:
        selectedGroups_desc = 'Community ID:'+ '<i>' + mySelectedGroups.Community_ID + '<\i>' + 'Organisation Name :' + mySelectedGroups.Organisation_Name  
        p = Paragraph(selectedGroups_desc, parstyle)
        mySelectedGroups = mySelGroupsCursor.next()

    #build and format table
    t=Table(data, colWidths=(100,100))
    t.setStyle(TableStyle([
        ('ALIGN',(0,0),(-1,-1),'CENTER'),
        ('VALIGN',(0,0),(-1,-1),'TOP'),
        ('INNERGRID', (0,0), (-1,-1), 0.25, colors.black),
        ('BOX', (0,0), (-1,-1), 0.25, colors.black),
        ('TOPPADDING', (0,0), (-1,-1), 10),
        ]))
    parts.append(t)

myBuffer = myBufferCursor.next()

#Footnote
parstyle = ParagraphStyle(name='Title', fontName='Helvetica', fontSize=11, alignment=0, spaceAfter=15, spaceBefore=15)
p = Paragraph('''Should you have any further questions **''', parstyle)
parts.append(p)

#Build document
doc.build(parts)

del mySelGroupsCursor, myNewBusinessCursor, myBufferCursor

#Open document
if OpenPDF == "true":
    os.startfile(pdf_file) 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "C:\Python25\Lib\site-packages\Pythonwin\pywin\framework\scriptutils.py", line 325, in RunScript
    exec codeObject in __main__.__dict__
  File "H:\Report_v2.py", line 100, in <module>
    t=Table(data, colWidths=(100,100))
  File "C:\Python25\Lib\site-packages\reportlab\platypus\tables.py", line 236, in __init__
    raise ValueError("%s must have at least a row and column" % self.identity())
ValueError: <Table@0x010F4710 0 rows x unknown cols>... must have at least a row and column 
```

当我有点挣扎时，我需要做什么的任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T19:04:37.250

从错误和代码来看，问题似乎`data`是空数组`[]`。ReportLab 似乎对此感到窒息，因此您只需要实际向表格提供一些数据`t`，它就可以工作。

# javascript - touchstart 阻塞按钮监听器

> ID：10108470
> 
> 赞同：4
> 
> 时间：2012-04-11T14:52:48.450
> 
> 标签：javascript, jquery, touch, seadragon

我将 Seadragon Ajax 与 jQuery 触摸事件侦听器一起使用。

容器绑定了 touchstart、touchmove 和 touchend，这里是 touch start：

```
.bind('touchstart MSPointerDown', function(e){

            var p = coord(e.originalEvent);
            p.start = true;
            p.scale = 1;
            if(e.originalEvent.pointerType === 4) return;
            else if(e.originalEvent.pointerType !== undefined) e.originalEvent.preventMouseEvent();

            $(this).data(p);            

            e.preventDefault();
            e.stopPropagation();
        }) 
```

在 seadragon 视图中生成了一些按钮。由于其容器 div 上的 touchstart，这些按钮不会在平板电脑上触发。它与鼠标一起工作正常。

```
new Seadragon.Button("Click to go", "", "", "", "", null, moveFunction, null, null, null ); 
```

我需要在 touchstart 功能中的所有内容之前检查触摸是否在按钮上，但真的不确定如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:31:26.980

通过添加 if 语句来检查触摸次数来解决，如下所示：

```
.bind('touchstart MSPointerDown', function(e){
            if (event.touches.length != 1) {
                e.preventDefault();
                e.stopPropagation();
            }

            var p = coord(e.originalEvent);
            p.start = true;
            p.scale = 1;
            if(e.originalEvent.pointerType === 4) return;
            else if(e.originalEvent.pointerType !== undefined) e.originalEvent.preventMouseEvent();

            $(this).data(p);        

        }) 
```

# ruby - Rails，PostgreSQL - 如何计算标签数量？

> ID：10108476
> 
> 赞同：0
> 
> 时间：2012-04-11T14:53:15.493
> 
> 标签：ruby, ruby-on-rails-3, count

我有这些数据库表：

**标签**

```
 id            | integer                     | not null default nextval('taggings_id_seq'::regclass) | plain    | 
 tag_id        | integer                     |                                                       | plain    | 
 taggable_id   | integer                     |                                                       | plain    | 
 taggable_type | character varying(255)      |                                                       | extended | 
 tagger_id     | integer                     |                                                       | plain    | 
 tagger_type   | character varying(255)      |                                                       | extended | 
 context       | character varying(128)      |                                                       | extended | 
 created_at    | timestamp without time zone |                                                       | plain    | 
```

**标签**

```
id      | integer                | not null default nextval('tags_id_seq'::regclass) | plain    | 
 name   | character varying(255) |                                                   | extended | 
```

这些表是由[acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on) gem 创建的。

我正在尝试获取`tags`存储在 table 中的最常用的计数`taggings`，但我不知道如何获取它们...

谁能给我一些提示或链接，如何获得？

# sql - 作为不同的别名，在列上两次加入表是什么意思？

> ID：10108477
> 
> 赞同：1
> 
> 时间：2012-04-11T14:53:16.687
> 
> 标签：sql, database

我只知道基本的 SQL，但我正在处理的项目使用非常复杂的查询。有一个我无法理解的查询。关注的表和字段是`people`和`person_details`更脏的查询的可执行部分是：

```
SELECT people.first_name
    , people.last_name
    , person_statuses.name as person_status
    , companies.name as company_name
    , person_roles.name as role 
    , person_role_memberships.event_name as membership_year
    , person_role_memberships.start_date as start_date
    , person_role_memberships.end_date as end_date
    , person_role_memberships.sponsor_parent_company as sponsor_parent_company
    , person_role_memberships.former_sponsor_parent_company as former_sponsor_parent_company
    , person_role_memberships.workshop as workshop
FROM people
    , *person_details as business_details*
    , *person_details*
    , person_roles
    ,  person_role_memberships
    , companies
    , person_statuses
    , companies as parent_companies
WHERE person_role_memberships.person_id = people.id 
    AND person_role_memberships.person_role_id = person_roles.id 
    AND 
```

 ****```
 business_details.type = 'BusinessDetail' 
    and business_details.person_id = people.id 
    AND person_details.type = 'PersonalDetail' 
    and person_details.person_id = people.id 
```**  **```
 AND people.person_status_id = person_statuses.id 
    AND ifnull(companies.parent_id, companies.id) = parent_companies.id  
    AND people.company_id = companies.id 
    AND companies.name = 'Pak Qatar' 
    AND people.last_name = 'Aslam' 
limit 100; 
```

我想知道该`where`子句的粗体部分创建的逻辑是什么。是不是因为`AND`关键字，只允许那些有 BusinessDetail 和 PersonalDetails 的人是`person_details`表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:55:51.050

应该是自加入吧。当你有一个与自身相关的关系（表）时，通常使用它（`employees <-> boss`），或者当一个关系（表）用于存储某一行的不同类型的信息时。

在您的示例中，表`person_details`用于存储**业务**和**个人**信息。连接是：

```
business_details.person_id = people.id 
AND person_details.type = 'PersonalDetail' 
AND person_details.person_id = people.id 
```

所以我会说该表在表中的同一行的不同行上`person_details`保存业务**和**个人信息。`people.id``people`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:01:52.550

它基本上是在说：

该人必须有一个必须是“BusinessDetails”类型的 business_details 记录，并且该人必须有一个必须是“PersonalDetail”类型的 person_details 记录看起来两者都存储在同一个表中（business_details 是 person_details 的别名表），因此它两次加入表以检查这两个条件。

我不确定这是什么风格的 SQL（SQL Server/Oracle 等），但使用适当的连接语法可能会更简洁地写出查询（尽管使用的语法会在后台创建连接，但它并不容易读作具有显式连接语法的东西）。****

# c# - Linq 在 DataTable 中查找值的方法

> ID：10108481
> 
> 赞同：2
> 
> 时间：2012-04-11T14:53:27.680
> 
> 标签：c#, linq

我可以请人帮我用 LINQ 写这个吗，

```
 DataTable dt = new DataTable();

            DataColumn dcValue = new DataColumn();
            dcValue.ColumnName = "value";

            DataColumn dvDisplay = new DataColumn();
            dvDisplay.ColumnName = "display";

            DataColumn dvIsDefualt = new DataColumn();
            dvIsDefualt.ColumnName = "isDefalt";

            dt.Columns.Add(dcValue,int);
            dt.Columns.Add(dvDisplay,string);
            dt.Columns.Add(dvIsDefualt,bool);

            this.tipRacuna.DataSource = ds.Tables[0];
            this.tipRacuna.ValueMember = "value";
            this.tipRacuna.DisplayMember = "display";

            this.tipRacuna.SelectedValue =  findDefault(dt);//linq to find first value with default = true;    

        }
        private int findDefault(DataTable dtt)
            {
                int i= 0;

            foreach (DataRow  dr in dtt.Rows)
            {
                if (bool.Parse(dr["isDefalt"].ToString()))
                {
                    return int.Parse(dr["value"].ToString());
                }
            }
                return i;
            } 
```

随着我越来越多地参与 C# 和编程，我对 LINQ 查询越来越感兴趣。
一开始我总是跳过 LINQ 的参数，因为我知道 TSQL 不需要另一种查询语言，但是当我看到使用 LINQ 可以节省多少行代码时，我开始学习它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T14:57:04.540

假设您的数据库列是强类型的（最好的）：

```
dtt.AsEnumerable().Where( dr => dr.Field<bool>("isDefault" ) )
    .Select( dr => dr.Field<int>( "value" ) ).FirstOrDefault(); 
```

使用类型转换：

```
dtt.AsEnumerable().Where( dr => Convert.ToBoolean( dr["isDefault"] ) )
    .Select( dr => Convert.ToInt32( dr["value"] ) ).FirstOrDefault(); 
```

通过解析：

```
dtt.AsEnumerable().Where( dr => bool.Parse( dr["isDefault"].ToString() ) )
    .Select( dr => int.Parse( dr["value"].ToString() ) ).FirstOrDefault(); 
```

*请注意，我已将“isDefalt”的拼写更正为“isDefault”。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:58:00.647

我认为这大致是您所追求的：

```
dtt.AsEnumerable()
   // find items that match your 'if' condition
   .Where(dr => bool.Parse(dr["isDefalt"].ToString()))
   // perform your int parse
   .Select(dr => int.Parse(dr["value"].ToString()))
   // take the first result
   .FirstOrDefault(); 
```

# curl - Soundcloud 根据请求使用 json 而不是 xml 回复

> ID：10108482
> 
> 赞同：0
> 
> 时间：2012-04-11T14:53:30.567
> 
> 标签：curl, libcurl, soundcloud

为响应我对授权令牌的请求，Soundcloud 回复了一个 json 字符串，尽管我要求的是 xml。这是一个错误，还是未实现，还是我做错了什么？

我在下面以“详细”模式发布了 libcurl 的输出，显示了“接受”标头，以及以 json 格式返回的字符串。

```
> POST /oauth2/token HTTP/1.1
User-Agent: libcurl-agent/1.0
Host: api.soundcloud.com
Accept: application/xml
Content-Length: 641
Content-Type: multipart/form-data; boundary=----------------------------6d7e62ba13e0

< HTTP/1.1 200 OK
< Server: nginx
< Date: Tue, 10 Apr 2012 21:48:55 GMT
< Content-Type: application/json; charset=utf-8
< Connection: keep-alive
< X-Runtime: 44
< ETag: "62f76a251f0cdc7c41edec20560d2c04"
< Cache-Control: private, max-age=0, must-revalidate
< Access-Control-Allow-Methods: GET, PUT, POST, DELETE
< Access-Control-Allow-Headers: Accept, Authorization, Content-Type, Origin
< Access-Control-Allow-Origin: *
< X-Cacheable: NO:Cache-Control=max-age=0
< Content-Length: 133
< X-Varnish: 3363129842
< Age: 0
< Via: 1.1 varnish
< X-Cache: MISS
< 
* Connection #0 to host api.soundcloud.com left intact 
```

Soundcloud 结果：{"access_token":"1-17690-10631-cea7e4319d85f1XXXX","expires_in":21599,"scope":"*","re​​fresh_token":"50530eb4738f285df48f3694ad49XXX​​X"}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:46:32.240

感谢您指出了这一点。目前，OAuth2 令牌端点支持 on JSON，这与 API 的其余部分不一致。我会提交一个错误，希望我们能解决这个问题。不过你没有做错任何事:-)

# openstreetmap - OpenStreetMap Api 调用返回空集

> ID：10108483
> 
> 赞同：2
> 
> 时间：2012-04-11T14:53:35.750
> 
> 标签：openstreetmap

我正在尝试调用 OpenStreetMap API： [http ://api.openstreetmap.org/api/0.6/map?bbox=43.65,-79.38,43.66,-79.37](http://api.openstreetmap.org/api/0.6/map?bbox=43.65,-79.38,43.66,-79.37)

它不返回错误，但 map 为空：

你有什么想法为什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:21:54.147

我认为对于给定的请求，交付的空数据集实际上是正确的响应。

API[文档](http://wiki.openstreetmap.org/wiki/API_v0.6#Retrieving_map_data_by_bounding_box%3a_GET_.2Fapi.2F0.6.2Fmap)说`api/0.6/map`退货

> *   给定边界框内的所有节点以及引用它们的任何关系。
> *   引用给定边界框内的至少一个节点的所有路径，引用它们的任何关系 [路径]，以及路径可能引用的边界框之外的任何节点。
> *   引用由于上述规则而包含的节点、方式或关系之一的所有关系。（不适用于递归，请参见下面的说明。）

据我所知，您的边界框选择了南极洲。你期待什么数据？

我想，在 OSM 中，南极洲只是一种描述其轮廓的方式（可能还有某处的一些研究站）。如果您现在要求一个偏远地区的区域，则没有数据可获取。这是因为在您的 bbox 中没有节点。仅当至少一个节点位于您的边界框内时，才会获取南极洲轮廓/区域的路径。

PS：如果你想要一块多伦多（有很多数据），交换经度和纬度值:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T22:01:33.000

[https://wiki.openstreetmap.org/wiki/Download#Construct_a_URL_for_the_HTTP_API](https://wiki.openstreetmap.org/wiki/Download#Construct_a_URL_for_the_HTTP_API)

它说边界框只能是 0.5 x 0.5 度。它还说您可能想在这么大的区域尝试 XAPI

# ruby - Capifony 数据库函数因 `require' 失败：无法加载此类文件 -- FileUtils (LoadError)

> ID：10108485
> 
> 赞同：4
> 
> 时间：2012-04-11T14:53:36.670
> 
> 标签：ruby, symfony, rvm, capifony

例如，当我调用任何 Capifony 数据库函数时`cap database:move:to_remote`，我会收到以下 ruby​​ 错误：

```
jeremykendall@isr-thinkpad-420s:~/dev/sites/app$ cap develop database:move:to_remote
    triggering load callbacks
* executing `develop'
    triggering start callbacks for `database:move:to_remote'
* executing `multistage:ensure'
* executing `database:move:to_remote'
* executing `database:dump:local'
/home/jeremykendall/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- FileUtils (LoadError)
        from /home/jeremykendall/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capifony-2.1.5/lib/symfony2.rb:101:in `block (3 levels) in load'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/namespaces.rb:191:in `method_missing'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/namespaces.rb:191:in `method_missing'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/namespaces.rb:110:in `block in define_task'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capifony-2.1.5/lib/symfony2.rb:159:in `block (3 levels) in load'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:46:in `block in execute_requested_actions'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:45:in `each'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:45:in `execute_requested_actions'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/cli/help.rb:19:in `execute_requested_actions_with_help'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:34:in `execute!'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:14:in `execute'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/gems/capistrano-2.11.2/bin/cap:4:in `<top (required)>'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/bin/cap:19:in `load'
        from /home/jeremykendall/.rvm/gems/ruby-1.9.3-p125@interperf/bin/cap:19:in `<main>' 
```

我的部署.rb：

```
set :stage_dir,       'app/config/deploy'
require 'capistrano/ext/multistage'
set :stages,          %w{production testing develop}

default_run_options[:pty] = true

set :application,     "appname"
set :deploy_to,       "/home/isr/sites/app"
set :deploy_via,      :remote_cache

set :scm,             :git
set :repository,      "git@github.com:jeremykendall/redacted.git"
set :user,            "isr"
set :use_sudo,        false

ssh_options[:forward_agent] = true

set :model_manager,   "doctrine"
set :keep_releases,   3
set :update_vendors,  true
set :shared_files,    ["app/config/parameters.yml", "app/config/parameters.ini"]
set :shared_children, [app_path + "/logs", app_path + "/cache", web_path + "/uploads", "vendor"] 
```

我的 app/config/deploy/develop.rb

```
# Deploys to local vagrant box

set  :domain,           "192.168.33.10"
set  :symfony_env_prod, "dev"
set  :deploy_to,        "/home/vagrant/sites/app"
set  :branch,           "develop"
set  :user,             "vagrant"

role :web,              domain                   # Your HTTP server, Apache/etc
role :app,              domain                   # This may be the same as your `Web` server
role :db,               domain, :primary => true # This is where Rails migrations will run 
```

**我试过的**

*   `gem install fileutils`
*   `sudo aptitude install libfileutils-ocaml-dev`（抓住 FileUtils 吸管）
*   `gem update --system`
*   `gem update`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T02:06:15.433

看起来这是[capifony 2.1.5 中的错误](https://github.com/everzet/capifony/pull/109)。尝试 grepping`require "FileUtils"`并替换为`require "fileutils"`. 那还是等待补丁？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T22:24:56.830

你会发现它`require 'FileUtils'`通常可以在 Mac OS X 上运行，但是它应该是小写`fileutils`的。问题是大多数使用 Mac OS X 和不区分大小写的文件系统，因此当您部署或移动到 linux 或其他文件系统（如 ZFS）并打开区分大小写时，它将失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T22:16:03.483

由于 FileUtils 是 corelib 的一部分，因此它应该存在于任何 ruby​​ 安装中，前提是它可以在您使用 RVM 安装 ruby​​ 时编译它。我自己也遇到了类似的问题，其中一些 corelib 不存在，当我使用 RVM 编译 ruby​​ 时，我没有安装一些依赖项。

这些是所有 ruby​​ corelib 功能的全部要求，以及 RVM 所需的一些功能。（发现使用`rvm requirements`

```
apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core  zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev  autoconf libc6-dev ncurses-dev automake libtool bison subversion 
```

现在，完全删除 ruby​​ 和源，然后重新安装。（否则，以前的配置选项可能不会被取消设置并让您留在同一个地方）

```
rvm reinstall 1.9.3-p125 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T15:09:01.827

前几天晚上我在尝试 gem install rails 时遇到了一个类似的错误，结果我错误地信任 apt-get 来获得我需要的一切。

我敢打赌，在安装软件包并确保它们确实是你想要的东西时，你会比我小心一点，但这是我安装的（大致）修复它的东西。

`sudo apt-get install ruby-full build-essential`

`sudo aptitude install ruby build-essential libopenssl-ruby ruby1.8-dev`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T22:02:38.773

您有一个用于 symphony 部署的 gem，它会自动添加到您的部署中：

```
gem uninstall capifony 
```

使用[gemsets](https://rvm.io/gemsets/basics/)或`bundler exec capistrano ...`解决这个问题

# php - MySQL 在 INT UNSIGNED 上计算负值

> ID：10108486
> 
> 赞同：0
> 
> 时间：2012-04-11T14:53:38.147
> 
> 标签：php, mysql

我的表中有一个`start_date_time INT UNSIGNED`列。

我有这样的查询

```
... WHERE (g.start_date_time-$currentTime) > 0 ORDER BY (g.start_date_time-$currentTime) 
```

我得到一个错误`Numeric value out of range: 1690 BIGINT UNSIGNED value is out of range in...`。如果我将它设置为**SIGNED**当然一切正常，但我的问题是有没有办法让它保持**UNSIGNED**但无论如何计算负值（我只需要计算，不需要将它们存储在任何地方），或者我应该重新定义我的查询?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:00:05.963

您可以使用`CAST()`或`CONVERT()`将它们转换为有符号整数以进行计算。但是，如果你有任何大于有符号整数的东西，你会得到不想要的结果。无论如何，您不应该使用整数作为时间戳。使用时间戳或日期时间字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:01:41.770

我认为你应该重新定义如下

```
WHERE g.start_date_time > $currentTime ORDER BY g.start_date_time 
```

这将允许在 g.start_date_time 列上使用索引，您不必按 (g.start_date_time-$currentTime) 排序

# magento - 禁用 Magento 中出现的“价格”

> ID：10108495
> 
> 赞同：2
> 
> 时间：2012-04-11T14:54:09.090
> 
> 标签：magento

如何禁用 Magento 公共端显示的所有价格？

我基本上希望允许我的客户将产品添加到他们的购物车中，但商品价格/总额等是不可见的。

非常感谢您的任何指点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:00:53.773

要么删除呈现价格的模板代码，要么简单地添加一个 CSS 类并使用样式隐藏它！

您应该在目录/导航、目录/产品/视图、结帐/购物车、销售/订单/视图、结帐/评论等中执行此操作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:15:19.413

从 CSS 中隐藏价格框类它会帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T15:08:21.910

一个css（部分？）解决方案：

```
.price-box .price{
    display: none;
}
.price-box:after {
    content: '-'; /*contact us for price*/
}
.cart-price .price {
    display: none;
}
.cart-price:after {
    content: '-';
}
.cart-table-totals {
    display: none;
}
label[for=s_method_flatrate_flatrate] {
    display: none;
}
#checkout-review-table tfoot {
    display: none;
}
#shipping_method-progress-opcheckout .price {
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T15:09:34.340

**编辑这里是一个免费的模块，可以为你做到这一点：http:** [//www.magentocommerce.com/magento-connect/red2black-hideprices.html](http://www.magentocommerce.com/magento-connect/red2black-hideprices.html)

我不确定你有多先进，但这可以作为一个模块来完成。您将向产品添加一个属性，并根据它是否为真，您将在相关模板中隐藏定价。

这是有关如何执行此操作的详细线程：http: [//www.magentocommerce.com/boards/viewthread/22673/](http://www.magentocommerce.com/boards/viewthread/22673/)

如果你有心情花几美元，你可以购买这个模块：

[http://www.magentocommerce.com/magento-connect/bolasevich/extension/2096/hide-product-price-for-non-registered-users](http://www.magentocommerce.com/magento-connect/bolasevich/extension/2096/hide-product-price-for-non-registered-users)

或者如果你有心情花很多钱，你可以买这个：

[http://www.magentocommerce.com/magento-connect/Cart2Quote/extension/5905/not2order_hide_price_disable_ordering](http://www.magentocommerce.com/magento-connect/Cart2Quote/extension/5905/not2order_hide_price_disable_ordering)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T15:50:29.743

这篇文章对我非常有用：

[http://www.magentocommerce.com/boards/viewreply/87901/](http://www.magentocommerce.com/boards/viewreply/87901/)

隐藏价格：

应用程序/设计/前端/默认/默认/模板/目录/产品/price.phtml

在文件的开头插入：

```
<?php if (Mage::getSingleton('customer/session')->isLoggedIn()) { ?> 
```

在文件的最后插入

```
<?php } ?> 
```

# amazon-s3 - Amazon S3 文件名中的特殊字符

> ID：10108506
> 
> 赞同：13
> 
> 时间：2012-04-11T14:54:29.297
> 
> 标签：amazon-s3

用户正在上传名称为“abc #1”、“abc #2”的文件。我正在将这些文件上传到 S3。当我尝试下载这些文件时，我收到一个错误，比如这个 `InvalidArgument` Header 值包含一个开放的引用跨度。

我通过使用“Uri.EscapeUriString”包装文件名来创建链接。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-04-27T12:12:44.987

来自[AWS 文档](https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html#object-keys)：

> 键的名称是 Unicode 字符序列，其 UTF-8 编码长度最多为 1024 个字节。

所以“abc #1”和“abc #2”是有效的键名，那么问题可能出在您的客户端代码中，请检查您的 Http 客户端的文档。

AWS 还警告使用特殊字符：

> 您可以在对象键名中使用任何 UTF-8 字符。但是，在键名中使用某些字符可能会导致某些应用程序和协议出现问题。以下指南可帮助您最大限度地遵守 DNS、Web 安全字符、XML 解析器和其他 API。

*   字母数字字符：`0-9`, `a-z`,`A-Z`
*   特殊字符：`!`, `-`, `_`, `.`, `*`, `'`, `(`,`)`

因此，要么将应用中的可用字符集限制为仅允许推荐的字符集，要么在客户端级别解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T23:37:36.207

您应该使用[Uri.EscapeDataString](https://docs.microsoft.com/en-us/dotnet/api/system.uri.escapedatastring)而不是[Uri.EscapeUriString](https://docs.microsoft.com/en-us/dotnet/api/system.uri.escapeuristring?view=net-6.0)有 3 个原因：

1.  `Uri.EscapeUriString`自 .NET 6 起已弃用 - [https://docs.microsoft.com/en-us/dotnet/api/system.uri.escapeuristring?view=net-6.0](https://docs.microsoft.com/en-us/dotnet/api/system.uri.escapeuristring?view=net-6.0)
2.  `Uri.EscapeUriString`在某些情况下可能会损坏 Uri 字符串
3.  `Uri.EscapeUriString`只转义空格 - 而不是`#`

`Uri.EscapeUriString("abc #1")`返回`"abc%20#1"`，而`Uri.EscapeDataString("abc #1")`返回`"abc%20%231"`更可取。

# php - echo 在函数内部还是外部？从自身调用函数？

> ID：10108508
> 
> 赞同：1
> 
> 时间：2012-04-11T14:54:32.097
> 
> 标签：php, translation

# 翻译模块

## 介绍

到目前为止，我的代码正在运行，但我不知道这是否是实现我想要的正确方法。我有一个小功能可以翻译网页上的字符串。如果我用数字调用它，它会在一个表中搜索 id，并且仅在它用于该页面时才显示它。如果我用字符串调用它，它会在另一个表中搜索该字符串，如果该字符串不存在，该函数会打印传递的字符串，用空格替换“_”并发出警告。

我想知道两件事是否正确实施（如上所述，它们有效，但我不确定它们是否是个好主意）。但首先是代码。

## 编码

```
// Function to output language strings.
function text($Id)
    {
    // Already defined and tested that are valid (sql injection avoided also)
    global $Lang;
    global $FullUrl;

    if (is_int($Id))    // If a number is being passed
        {
        $results = mysql_query("SELECT * FROM translations WHERE id='$Id' AND page='$FullUrl'") or die ('Could not query:' . mysql_error());
        $row = mysql_fetch_assoc($results);
        if (!empty($row[$Lang])) echo $row[$Lang];  // If there is some, echo it
        else error($FullUrl,$Lang); // Else, calls error function
        }

    else    // If a string is being passed
        {
        $results = mysql_query("SELECT * FROM htranslations WHERE keyword='$Id'") or die ('Could not query:' . mysql_error());
        $row = mysql_fetch_assoc($results);
        if (!empty($row[$Lang])) echo $row[$Lang];  // If it exists in the table, echo it
        else    // Else (it doesn't exist)
            {
            $NewId = str_replace("_", " ", $Id);    // Replace the "_" with " "
            echo "<span style='color: red;' title='";   // Set a red color (warning)
            text(Wrong_sentence);   // Call this function and echo "This sentence could be wrong"
            echo "'>".$NewId."</span>"; // Echo the passed string with spaces
            error($FullUrl,$Lang,$Id);
            }
        }
    } 
```

## 1、在函数内回显好还是在函数外回显好？

我已经阅读[了这个](https://stackoverflow.com/questions/3602383/php-echo-function-return-value-vs-echo-inside-function)问题，并且我不打算进一步操纵字符串。所以，从那篇文章中，我猜最好的主意是像我已经做过的那样做，在函数内部呼应，但我想知道你对这个特殊情况的看法，因为我仍然不确定。**返回值并回显该值或从函数回显它会更好吗？为什么？**我的问题集中在性能和使代码友好上。

## 2\. 从函数内部调用这个函数有危险吗？

如您所见，在我写的最后一行中`text(Wrong_sentence);`。我知道你可以从另一个函数调用一个函数，但是**你能从同一个函数调用一个函数吗？**我担心它会进入调用自身的无限循环，例如，如果 table 关键字`Wrong_sentence`被删除或修改。此外，我不知道可能存在其他安全后果。

**欢迎对代码提供任何其他类型的反馈！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:40:58.443

关注点分离是首先要处理的部分。那只是必不可少的。

通常，您所做的是对此有意义的全局函数。它至少应该在视图中可用。虽然我有些担心：

1.  **Globals**：您使用全局变量，只是不喜欢那样。更糟糕的是，你甚至不检查里面有什么。如果您最终开始使用它们，请确保在使用它们之前检查它们。例如，它可能被覆盖或任何会产生模糊错误的东西。

2.  **关注点分离**：这个函数应该只是向模型询问文本。就是这样。该模型可能返回 false/void/error 或仅返回文本。处理

3.  **此函数的位置**：通常，这在 MVC 术语中称为 Helper，因此查看 Helpers 可能会很有趣。例如在 CakePHP 中是这样的： http: [//book.cakephp.org/2.0/en/views/helpers.html](http://book.cakephp.org/2.0/en/views/helpers.html)这样你就可以更标准的方式来设计它，你也可以使用标准，这样就可以很容易地找到其他的开发商。如果我看到一个我知道在哪里寻找它的助手，则可以在系统的任何位置定义一个全局函数。

4.  **从不回声**：回声不是很好，我们更喜欢仅在需要时将它们直接放入视图中。为什么？因为它使调试结果更容易，我们只需要一种方法，但在变量和回显中使用它们。

    回显文本（123）；

它不需要更多的代码或其他东西，但它会生成一个标准。例如，如果您在变量或其他方法中需要它：

```
echo strtotupper(text(123)); 
```

如果您正在测试您需要相同的内容，则需要该函数的响应。显然，可以测试回声，但返回效果更好。

1.  **URL和文本的组合**：一段文本属于其他内容。该 URL 链接到该内容，但似乎不是正确的链接。例如，获取一个标题在 URL 中有错字的页面。URL 得到修复，但您的文本不再链接。

2.  **在一个功能中结合 2 个功能**：当您开始单元测试代码时，您会注意到为什么这会产生更多的复杂性问题。您有 2 个函数，getTextById 和 getTextByKeyword。基本上你已经在这里看到了这个问题：

    “SELECT * FROM htranslations WHERE 关键字='$Id'”

您正在查找似乎是关键字的 $Id。容易出错的代码。选择一种口味并坚持下去。一般来说，我不喜欢硬编码的 id，因为他们什么都不说。所以我建议使用类似的东西：

```
text('CONTACT_ADDRESS') 
```

那种标签是可读的（这在视图中很重要并且很有意义。例如一个坏的：

```
<p><?php text(24234); ?></p>
<p><?php text(96985); ?></p> 
```

你不知道它是什么。但是，如果我在视图中写了这个，那就很清楚了：

```
<p><?php text('ORGANISATION_INTRODUCTION'); ?></p>
<p><?php text('ORGANISATION_FOUNDERS'); ?></p> 
```

这些是 2 段文本，但现在你知道是哪段了。如果您看到页面本身，您也知道在哪里可以找到它们。如您所见，这些简单示例使用页面前缀，但显然也可能存在全局文本。就像侧边栏中的文本。根据您的需要，这里有很多选择。您甚至可以自动添加页面名称等。

1.  **滥用 MySQL 函数**：不要再这样做了：

    $results = mysql_query("SELECT * FROM htranslations WHERE keyword='$Id'") or die ('Could not query:' .mysql_error());

只需创建一些 PDO 语句或其他安全的东西，并确保您捕获错误、验证输入等。由于此类问题，已经看到了很多黑客攻击。

1.  **已有的解决方案**：您不是第一个翻译文本的人。那么您为什么不看一下已经可用的系统，例如支持多语言的 Framework 或[http://www.gnu.org/software/gettext/](http://www.gnu.org/software/gettext/)。已经有这么多花样了，为什么还要开发一个新的呢？

2.  **递归**：如果您当前使用错误的键调用您自己的函数，因为未找到错误，它将一次又一次地调用。只是不太好。将您的错误处理（这是一个开发错误）拆分为一个单独的类。这可以处理它自己的错误处理。这也是关注点分离。

显然，您可以添加更多反馈，但认为这可以让您完全开始重新思考您的方法。不仅有一个好的解决方案，而且可以肯定的是，您可以在第一个概念上进行很多改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:05:56.020

由于从其他答案和评论中可以清楚地看到第二个问题，因此我将回答第一个问题（尽管我认为回答自己很奇怪，但我为我的问题找到了更合适的答案）。我可以两者兼得，同时在室内或室外回响。这是代码：

```
// Function to output language strings.
function text($Id)
    {
    // Already defined and tested that are valid (sql injection avoided also)
    global $Lang;
    global $FullUrl;

    $numargs = func_num_args(); // Get the number of arguments that are being passed.
    if ($numargs == 2)  // If there are actually two
        $Var=func_get_arg(1);   // Set $Var with the second value (1).

    if (is_int($Id))    // If a number is being passed
        {
        $results = mysql_query("SELECT * FROM translations WHERE id='$Id' AND page='$FullUrl'") or die ('Could not query:' . mysql_error());
        $row = mysql_fetch_assoc($results);
        if (!empty($row[$Lang]) && !isset($Var)) echo $row[$Lang];  // If there is some, echo it
    elseif ($Var==1) return $row[$Lang];
        else error($FullUrl,$Lang); // Else, calls error function
        }

    else    // If a string is being passed
        {
        $results = mysql_query("SELECT * FROM htranslations WHERE keyword='$Id'") or die ('Could not query:' . mysql_error());
        $row = mysql_fetch_assoc($results);
        if (!empty($row[$Lang]) && !isset($Var)) echo $row[$Lang];  // If it exists in the table, echo it
        elseif (!empty($row[$Lang]) && isset($Var)) return $row[$Lang];
        else    // Else (it doesn't exist)
            {
            $NewId = str_replace("_", " ", $Id);    // Replace the "_" with " "
            echo "<span style='color: red;' title='";   // Set a red color (warning)
            text(Wrong_sentence);   // Call this function and echo "This sentence could be wrong"
            echo "'>".$NewId."</span>"; // Echo the passed string with spaces
            error($FullUrl,$Lang,$Id);
            }
        }
    } 
```

所以，如果我只想 ECHO 一些文本，我会写`tex(56)`,`text(Existing_string)`或`text(Non_existing_string)`. 但是要将这些相同的文本作为变量返回，我只需要编写`tex(56,1)`,`text(Existing_string,1)`或`"Non existing string"`. 请注意，要使用“非现有字符串”，我不需要传递它并返回自身。

该代码仍然存在许多问题，但正如您所见，我正在学习和改进它。到目前为止，这段代码工作得很好。

# c# - NHibernate 进行过多查询，关于正确使用 idBag 进行映射

> ID：10108509
> 
> 赞同：0
> 
> 时间：2012-04-11T14:54:35.230
> 
> 标签：c#, .net, nhibernate, mapping

我们正在使用 NHibernate、C# .NET 开发应用程序，并且我们遇到了一个关于映射的问题……情况如下：

**首先，我将放置我们的映射文件：**

这是 User.hbm.xml 映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="GLib.GSecurity.Domain" namespace="Geraes.GLib.GSecurity.Domain" >

<typedef class="uNhAddIns.UserTypes.EncryptedString, uNhAddIns" name="Encrypted">
  <param name="encryptor">uNhAddIns.UserTypes.uNHAddinsEncryptor, uNhAddIns</param>
  <param name="encryptionKey">myRGBKey</param>
</typedef>

<class name="User" table="S_User" lazy="false" dynamic-update="true">

<id name="Id" column="Id_User" type="Int64">
  <generator class="Geraes.GLib.GDomainBasis.CustomTableHiLoGenerator, GLib.GDomainBasis" />
</id>

<many-to-one name="Plant" column="Id_Plant" class="Plant"
             foreign-key="fk1_User" cascade="none" fetch="join" not-null="true"/>

<property name="Login" column="Login" type="String" length="16" not-null="true" />

<property name="Password" column="Password" type="Encrypted" />

<property name="Name" column="Name" type="String" length="64" not-null="true" />

<property name="Active" column="Active" type="Char" not-null="true" />

 <idbag name="RightProfiles" table="S_User_Right_Profile" generic="true" lazy="false" cascade="save-update" fetch="join">
   <collection-id type="Int64" column="Id_User_Right_Profile">
     <generator class="Geraes.GLib.GDomainBasis.CustomTableHiLoGenerator, GLib.GDomainBasis" />
   </collection-id>
   <key column="Id_User" />
   <many-to-many column="Id_Right_Profile" class="RightProfile" fetch="join"/>
 </idbag>

  </class>

</hibernate-mapping> 
```

这是 RightProfile.hbm.xml 映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="GLib.GSecurity.Domain" namespace="Geraes.GLib.GSecurity.Domain" >

  <class name="RightProfile" table="S_Right_Profile" lazy="false" dynamic-update="true">

    <id name="Id" column="Id_Right_Profile" type="Int64">
      <generator class="Geraes.GLib.GDomainBasis.CustomTableHiLoGenerator, GLib.GDomainBasis" />
    </id>

    <property name="Name" column="Name" type="String" length="20" not-null="true" />

    <property name="Description" column="Description" type="String" length="60" not-null="true" />

    <idbag name="Resources" table="S_Right_Profile_Resource" generic="true" lazy="false" cascade="save-update" fetch="join">
      <collection-id type="Int64" column="Id_Right_Profile_Resource">
        <generator class="Geraes.GLib.GDomainBasis.CustomTableHiLoGenerator, GLib.GDomainBasis" />
      </collection-id>
      <key column="Id_Right_Profile" />
      <many-to-many column="Id_Resource" class="Resource" fetch="join"/>
    </idbag>

    <idbag name="Users" table="S_User_Right_Profile" generic="true" inverse="true" lazy="false" cascade="save-update" fetch="join">
      <collection-id type="Int64" column="Id_User_Right_Profile">
        <generator class="Geraes.GLib.GDomainBasis.CustomTableHiLoGenerator, GLib.GDomainBasis" />
      </collection-id>
      <key column="Id_Right_Profile" />
      <many-to-many column="Id_User" class="User" fetch="join"/>
    </idbag>

  </class>

</hibernate-mapping> 
```

**现在，我们的实体类：**

User.cs 实体类：

```
public class User : BaseEntityEditable
{
    public virtual Plant Plant { get; set; }

    public virtual String Login { get; set; }

    public virtual String Password { get; set; }

    public virtual String Name { get; set; }

    public virtual Char Active { get; set; }

    public virtual IList<RightProfile> RightProfiles { get; set; }

    public override String ToString()
    {
        return Name + " - " + Login;
    }

    public User()
    {
        RightProfiles = new List<RightProfile>();
        Plant = new Plant();
    }
} 
```

RightProfile.cs 实体类：

```
public class RightProfile : BaseEntityEditable
{
    public virtual String Name { get; set; }

    public virtual String Description { get; set; }

    public virtual IList<Resource> Resources { get; set; }

    public virtual IList<User> Users { get; set; }

    public override String ToString()
    {
        return Name + " - " + Description;
    }

    public RightProfile()
    {
        Resources = new List<Resource>();
        Users = new List<User>();
    }
} 
```

所以，我们的情况是：

我们正在开发一个窗口。在这个窗口中，我们有 2 个网格。用户网格和组网格。当这个窗口被加载时，我们的 viewModel start 会进行必要的查询来带来数据。第一个查询带来所有用户，在用户内部，我们有一个 RightProfile 列表，其中包含填充其他网格所需的所有数据。到目前为止，一切都很好。我们的问题是，nhibernate 开始进行查询，带来所有 RightProfiles 的所有用户。

**他不能那样做！**我们已经拥有了所有需要的数据！

**-- 已编辑 --**

我们的第一部分运行正常，我们搜索用户，搜索 RightProfiles（填充网格），然后，我们在该网格内标记允许的用户。事实上，我的窗户工作得很好。我们的问题是，在 Nhibernate Log 中，他正在为每个关联的具有关联的 Right Profile 的用户进行选择。

一旦数据已经加载，这些选择是不必要的。这是我的问题，nhibernate 正在做更多需要做的选择。

我怎么能改变这个？

**-- 编辑 2: --** 这是 NHibernate Log 生成的 SQL：

这个选择没问题：

```
 SELECT
    this_.Id_Right_Profile as Id1_36_3_,
    this_.Name as Name36_3_,
    this_.Description as Descript3_36_3_,
    resources2_.Id_Right_Profile as Id1_5_,
    resource3_.Id_Resource as Id2_5_,
    resources2_.Id_Right_Profile_Resource as Id3_5_,
    resource3_.Id_Resource as Id1_39_0_,
    resource3_.Name as Name39_0_,
    users4_.Id_Right_Profile as Id1_6_,
    user5_.Id_User as Id2_6_,
    users4_.Id_User_Right_Profile as Id3_6_,
    user5_.Id_User as Id1_42_1_,
    user5_.Id_Plant as Id2_42_1_,
    user5_.Login as Login42_1_,
    user5_.Password as Password42_1_,
    user5_.Name as Name42_1_,
    user5_.Active as Active42_1_,
    plant6_.Id_Plant as Id1_41_2_,
    plant6_.Name as Name41_2_,
    plant6_.Description as Descript3_41_2_ 
FROM
    S_Right_Profile this_ 
left outer join
    S_Right_Profile_Resource resources2_ 
        on this_.Id_Right_Profile=resources2_.Id_Right_Profile 
left outer join
    S_Resource resource3_ 
        on resources2_.Id_Resource=resource3_.Id_Resource 
left outer join
    S_User_Right_Profile users4_ 
        on this_.Id_Right_Profile=users4_.Id_Right_Profile 
left outer join
    S_User user5_ 
        on users4_.Id_User=user5_.Id_User 
left outer join
    S_Plant plant6_ 
        on user5_.Id_Plant=plant6_.Id_Plant 
ORDER BY
    this_.Name asc 
```

在我看来，这个选择是不必要的（**它对每个用户重复**）：

```
SELECT
    rightprofi0_.Id_User as Id2_1_,
    rightprofi0_.Id_Right_Profile as Id1_1_,
    rightprofi0_.Id_User_Right_Profile as Id3_1_,
    rightprofi1_.Id_Right_Profile as Id1_36_0_,
    rightprofi1_.Name as Name36_0_,
    rightprofi1_.Description as Descript3_36_0_ 
FROM
    S_User_Right_Profile rightprofi0_ 
left outer join
    S_Right_Profile rightprofi1_ 
        on rightprofi0_.Id_Right_Profile=rightprofi1_.Id_Right_Profile 
WHERE
    rightprofi0_.Id_User=:p0;
:p0 = 10807 [Type: Int64 (0)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:19:07.593

您是否尝试过在您的 idBag 上设置批量大小？

```
 <idbag batch-size='50' .. > 
```

您可能希望使用实际值来获得最佳性能。

顺便说一句，在您的示例中将 a 设置`batch-size`为 50 会将您的查询减少到 3。

**编辑后编辑** RightProfile xml 中的 idBag 已`fetch="join"`定义。“获取”连接允许使用单个选择来初始化值的关联或集合以及它们的父对象。

如果将 fetch 策略更改为 select 会发生什么？

```
<idbag name="Users" table="S_User_Right_Profile" lazy="true" fetch="select".. . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:48:17.737

解决了！

只需将惰性选项设置为 true，现在 NHibernate 不会执行那些额外的选择

=D

感谢大家！

# android - 单击按钮时应用程序冻结

> ID：10108512
> 
> 赞同：0
> 
> 时间：2012-04-11T14:54:52.813
> 
> 标签：android, eclipse

这是我遵循的 youtube 教程中项目中的所有代码。（主要部分）项目活动：

```
package justinehume.Project;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class ProjectActivity extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button tut1 = (Button) findViewById(R.id.tutorial1);
        tut1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

            startActivity(new Intent("android.intent.action.TUTORIALONE"));

            }
        });

    }
    protected void onPause(){
        super.onPause();
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical">

    <Button android:id="@+id/tutorial1" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:text="Button" />

</LinearLayout> 
```

项目清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="justinehume.Project"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".ProjectActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
               <activity
            android:label="@string/app_name"
            android:name=".Tutorialone" >
            <intent-filter >
                <action android:name="android.intent.action.TUTORIALONE" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

Tutorialone.java

```
package justinehume.Project;

import android.app.Activity;
import android.os.Bundle;

public class Tutorialone extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tutorial1);
    }

} 
```

每次在 SDK 中运行应用程序时单击按钮，应用程序都会崩溃并强制关闭。有任何想法吗？谢谢！

日志猫

```
> 04-11 16:19:54.799: D/AndroidRuntime(344): Shutting down VM 04-11
> 16:19:54.809: W/dalvikvm(344): threadid=1: thread exiting with
> uncaught exception (group=0x4001d800) 04-11 16:19:54.819:
> E/AndroidRuntime(344): FATAL EXCEPTION: main 04-11 16:19:54.819:
> E/AndroidRuntime(344): android.content.ActivityNotFoundException: No
> Activity found to handle Intent {
> act=android.intent.action.TUTORIALONE } 04-11 16:19:54.819:
> E/AndroidRuntime(344):    at
> android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
> 04-11 16:19:54.819: E/AndroidRuntime(344):    at
> android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
> 04-11 16:19:54.819: E/AndroidRuntime(344):    at
> android.app.Activity.startActivityForResult(Activity.java:2817) 04-11
> 16:19:54.819: E/AndroidRuntime(344):  at
> android.app.Activity.startActivity(Activity.java:2923) 04-11
> 16:19:54.819: E/AndroidRuntime(344):  at
> justinehume.Project.ProjectActivity$1.onClick(ProjectActivity.java:23)
> 04-11 16:19:54.819: E/AndroidRuntime(344):    at
> android.view.View.performClick(View.java:2408) 04-11 16:19:54.819:
> E/AndroidRuntime(344):    at
> android.view.View$PerformClick.run(View.java:8816) 04-11 16:19:54.819:
> E/AndroidRuntime(344):    at
> android.os.Handler.handleCallback(Handler.java:587) 04-11
> 16:19:54.819: E/AndroidRuntime(344):  at
> android.os.Handler.dispatchMessage(Handler.java:92) 04-11
> 16:19:54.819: E/AndroidRuntime(344):  at
> android.os.Looper.loop(Looper.java:123) 04-11 16:19:54.819:
> E/AndroidRuntime(344):    at
> android.app.ActivityThread.main(ActivityThread.java:4627) 04-11
> 16:19:54.819: E/AndroidRuntime(344):  at
> java.lang.reflect.Method.invokeNative(Native Method) 04-11
> 16:19:54.819: E/AndroidRuntime(344):  at
> java.lang.reflect.Method.invoke(Method.java:521) 04-11 16:19:54.819:
> E/AndroidRuntime(344):    at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 04-11 16:19:54.819: E/AndroidRuntime(344):    at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 04-11
> 16:19:54.819: E/AndroidRuntime(344):  at
> dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:46:22.463

好的，由于这是一个基本应用程序，因此应您的要求，我将发布完整的代码。

**项目活动.java**

```
package justinehume.Project;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class ProjectActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button tut1 = (Button) findViewById(R.id.tutorial1);
        tut1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Jean-Philippe Roy's correction                  
                startActivity(new Intent(ProjectActivity.this, Tutorialone.class));
            }
        });

    }
} 
```

**Tutorialone.java**

```
package justinehume.Project;

import android.app.Activity;
import android.os.Bundle;

public class Tutorialone extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
         // TODO Auto-generated method stub
         super.onCreate(savedInstanceState);
         setContentView(R.layout.tutorial1);
    }
} 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="justinehume.Project"
     android:versionCode="1"
     android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ProjectActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:label="@string/app_name" android:name=".Tutorialone"/>

</application>

</manifest> 
```

*注意：我已经在模拟器上测试过了，它不会崩溃。我建议您阅读/查看更多教程以更好地理解。祝你好运！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:35:16.553

`Tutorialone`的意图过滤器应该有类别`"android.intent.category.DEFAULT"`而不是`"android.intent.category.LAUNCHER"`

# php - 使用 SimpleXML 时为空的 xml 对象 - 节点不再存在

> ID：10108513
> 
> 赞同：0
> 
> 时间：2012-04-11T14:54:53.900
> 
> 标签：php, xml, simplexml

xml如下：

```
<root>
   <organizations>
        <organization>
          <info>
            <orgID>1234</orgID>
            <orgName>XYZ Company</orgName>
            <address>
                <address1>1 Main Street</address1>
                <city>Somewhere</city>
                <state>MI</state>
                <zip>12334</zip>
            </address>
          </info>
         </organization> 
      </organizations>
</root> 
```

代码如下：

```
$ind = strpos($xmlResponse, "<");
$xml = simplexml_load_string(substr($xmlResponse, $ind));
//echo $xml;
$orgList = $xml->organizations->children();

foreach($orgList as $orgList)
{
    echo $orgList->orgName;
} 
```

我收到以下错误：

`Warning: main() [function.main]: Node no longer exists in...`

违规行是 `foreach($orgList as $orgList)`

谁能告诉我我做错了什么？我尝试通过 50 种不同的方式访问 xml，要么得到那个错误，要么得到一个空的 xml 对象。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:08:48.933

Try using xpath

Put the XML in x.xml file then create php file:

```
<?php
    $xml = simplexml_load_file('x.xml');
    $orgList = $xml->xpath("/root/organizations/organization/info");
    print $orgList[0]->orgName; 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:17:47.877

当您使用 $orgList 作为 $orgList 循环时，您似乎正在覆盖 xml 对象。试试这个：

```
foreach($orgList as $org)
   echo $org->orgName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:18:45.427

尝试以下操作：

```
$xml = simplexml_load_string($xml);

$org = $xml->organizations->children();

foreach($org as $k => $v)
{
    echo $v->info->orgName;
} 
```

# msbuild - 什么可能导致 MSIExec 错误 1619“无法打开此安装包”

> ID：10108517
> 
> 赞同：13
> 
> 时间：2012-04-11T14:55:06.217
> 
> 标签：msbuild, wix, windows-installer, acceptance-testing

我正在尝试从一组示例程序中自动执行一组 MSI 文件（由 WiX 生成）的往返安装和卸载。出于某种原因，一个非常乐意通过双击安装的 .MSI 文件会生成：

> 无法打开此安装包。验证该包是否存在并且您可以访问它，或者联系应用程序供应商以验证这是一个有效的 Windows Installer 包。

当我以下列方式使用 MSIEXEC 调用它时：

```
<ItemGroup>
  <_SampleMsi Include="$(_ArtifactsPathAcceptanceSamples)\**\*.msi" />
</ItemGroup>
<Exec Command="$(WixDir)\smoke &quot;%(_SampleMsi.Identity)&quot;"/>
<!--Guarantee precondition even if cleanup didn't work-->
<Exec Command="msiexec -passive -norestart -x &quot;%(_SampleMsi.Identity)&quot;" IgnoreExitCode="true"  />
<Exec Command="msiexec -norestart -i &quot;%(_SampleMsi.Identity)&quot;"  />
<!--Uninstall of every sample should also always work-->
<Exec Command="msiexec -passive -norestart -x &quot;%(_SampleMsi.Identity)&quot;" /> 
```

当我尝试根据产品 ID GUID 卸载时，也会发生同样的问题：-

```
msiexec -passive -norestart -x FC7445BB-7E1D-4E36-A42A-CFA56263E453 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2019-05-09T12:17:05.897

刚刚删除`.\`了文件名的前缀并且它起作用了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-11T15:04:44.030

1.  不要从字面上理解消息的文本。您应该得出的所有结论是 misexec 将您的命令的某些部分视为文件名，并且它没有加载和处理它的全部内容以使其满意。无论是因为路径太长，权限被拒绝，还是其他任何仅受您想象限制的条件（大多数知识库文章似乎都与安装程序缓存问题有关，这通常是基于 GUID 的语法或修补/升级选项）

2.  你错过了 GUID 中的大括号，傻瓜。我的意思是你确实知道 GUID 上有大括号，即使`msiexec /?`没有告诉你或给你看？！

    即你需要替换`FC7445BB-7E1D-4E36-A42A-CFA56263E453`为`{FC7445BB-7E1D-4E36-A42A-CFA56263E453}`

    （我已经停止信任/读取输出，并且正在考虑 GUID 解析为 msiexec 不满意的缓存 MSI 的可能性，原因与它似乎对所有 KB 文章的安装语法不满意相同在这个空间倾向于谈论。）

3.  您的路径包含相对跳转，尽管净长度 <160 个字符，但总长度 >160 个字符，因此底层文件 API 令人窒息。人们喜欢编写具有误导性的通用错误消息。

    您可以通过在使用的每个批处理表达式中替换`Identity`上面的来修复它。`FullPath`

    另一种补救方法是[使用 a `WorkingDirectory`with the `Exec`of`msiexec`](https://stackoverflow.com/a/3457165/11635)

# c# - 我无法确定两个 c# 字符串是否已排序

> ID：10108526
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:55:41.070
> 
> 标签：c#, string, unit-testing, sorting

我创建了一种确定两个字符串是否已排序的方法。我所有的测试用例都可以工作，除了一个。代码如下。

```
class Program
{
    static void Main(string[] args)
    {
        bool test1 = isSorted("test1", "test2");
        bool test2 = isSorted("4576", "4567");
        bool test3 = isSorted("test10", "test11");
        bool test4 = isSorted("abdc", "abcd");
    }

    public static bool isSorted(string MyFirstString, string MySecondString)
    {
        string MyFirstCutString = MyFirstString.ToLower();
        string MySecondCutString = MySecondString.ToLower();

        if (MyFirstString.Length > MySecondString.Length)
            MyFirstCutString = MyFirstCutString.Substring(0, MySecondString.Length);
        else if (MySecondString.Length > MyFirstString.Length)
            MySecondCutString = MySecondCutString.Substring(0, MyFirstCutString.Length);

        for (int i = 0; i < MyFirstCutString.Length; i++)
        {
            if (getNumberic(MyFirstCutString[i]) > getNumberic(MySecondCutString[i]))
                return false;
        }

        return true;
    }

    public static int getNumberic(char myLetter)
    {
        switch (myLetter)
        {
            case 'a':
                return 1;
            case 'b':
                return 2;
            case 'c':
                return 3;
            case 'd':
                return 4;
            case 'e':
                return 5;
            case 'f':
                return 6;
            case 'g':
                return 7;
            case 'h':
                return 8;
            case 'i':
                return 9;
            case 'j':
                return 10;
            case 'k':
                return 11;
            case 'l':
                return 12;
            case 'm':
                return 13;
            case 'n':
                return 14;
            case 'o':
                return 15;
            case 'p':
                return 16;
            case 'q':
                return 17;
            case 'r':
                return 18;
            case 's':
                return 19;
            case 't':
                return 20;
            case 'u':
                return 21;
            case 'v':
                return 22;
            case 'w':
                return 23;
            case 'x':
                return 24;
            case 'y':
                return 25;
            case 'z':
                return 26;
            case 'O':
                return 27;
            case '1':
                return 28;
            case '2':
                return 29;
            case '3':
                return 30;
            case '4':
                return 31;
            case '5':
                return 32;
            case '6':
                return 33;
            case '7':
                return 34;
            case '8':
                return 35;
            case '9':
                return 36;
            default:
                return 1000;
        }
    }
} 
```

测试结果如下：

```
test1 result is true
test2 result is false
test3 result is false (NOT GOOD!)
test4 result is true 
```

我看不出我的逻辑有任何缺陷。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T14:59:05.210

你混在了交换机上`O`。`0`这意味着`0`获取数值`1000`，并在后面排序`1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:59:28.463

而不是`0`你有`O`getNumberic 方法。

顺便说一句，我至少会这样重写它：

```
 public static int getNumberic( char c )
    {
        if( c >= 'a' && c <= 'z' )
        {
            return c - 'a';
        }
        else if( c >= '0' && c <= '9' )
        {
            return 'z' + c - '0';
        }
        else
        {
            return 1000;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:04:38.577

不是您搜索的答案，而是您对此有何看法？

```
public bool isSorted(string s1, string s2)
{
    return s1.ToLower().CompareTo(s2.ToLower()) < 0;
} 
```

或者

```
public bool isSorted(string s1, string s2)
{
    return String.Compare(s1, s2, true) < 0;
} 
```

# email - 如何自动将电子邮件保存到 ascii 文件？

> ID：10108530
> 
> 赞同：1
> 
> 时间：2012-04-11T14:55:57.200
> 
> 标签：email, outlook, archive

我有一个数据流，它将作为每日电子邮件发送，其中包含来自测量站点的温度和风速。我想从我收到的其他电子邮件中自动过滤掉这些电子邮件，然后将电子邮件正文内容保存到它自己的文本文件中。每个文本文件必须有一个不同的文件名；例如，它可能包括发送或接收电子邮件的时间。所有文件都必须最终位于选定的目录中。理想情况下，该过程将足够强大，可以在无人看管的情况下运行数周。我们的电子邮件系统是 Outlook，但我可以选择将电子邮件发送到我的 gmail 帐户，例如。如何做到这一点的大局是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:06:00.623

**更大的图景：**创建一个在`Items_ItemAdd`事件上运行的 VBA 脚本，该脚本在电子邮件到达时触发。

**细节：**使用[此页面](http://www.vboffice.net/sample.html?mnu=2&lang=en&smp=7&cmd=showitem)上的解决方案，但在 Items_ItemAdd 例程中将 olSaveAsMsg 更改为 olSaveAsTxt 以获得所需的文本格式。
请注意，示例中的文件名格式应符合您的需要，但您需要向 Items_ItemAdd 例程添加条件以检查该消息是否是您要保存的消息。例如，您可以读取`Item.Subject`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:05:05.307

这意味着您正在使用交换，我建议使用 imap 协议来阅读邮件，并且您将能够保存正文。

# c# - wcf 服务中的 Linq

> ID：10108532
> 
> 赞同：1
> 
> 时间：2012-04-11T14:55:57.760
> 
> 标签：c#, linq

所以我从我的 GET 请求中返回一个集合，我注意到我想返回一个基于`anyofthebelow`而不是单独的组：

> 学生卡
> 
> 名
> 
> 姓

我只知道如何在下面的代码中执行此操作，然后必须为每个方法创建不同的 GET 方法，有没有一种方法可以调用`GetStudentCollectionByGroup(string anything)`并从我的客户返回上面的详细信息列表，而不必为每个方法执行以下方法`StudentID, FirstName, LastName`？

```
 public List<Group> GetStudentCollectionByGroup(string studentID)
    {
        List<Group> groups = (from g in Groups
                              where
                                  (from t in g.Groupsz where t.StudentID == studentID select t).Count() > 0
                              select g).ToList();
        return groups;
    }

    public List<Group> GetStudentCollectionByGroup(string firstName)
    {
        List<Group> groups = (from g in Groups
                              where
                                  (from t in g.Groupsz where t.FirstName == firstName select t).Count() > 0
                              select g).ToList();
        return groups;
    } 
```

例如：

```
from t in g.Groupsz where t.StudentID == studentID select t 
```

有 OR 方法吗？就像是：

```
where t.StudentID == anything OR t.FirstName == anything etc 
```

**ps不太清楚如何写这个标题（欢迎编辑）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:57:38.460

当然; 您可以使用`||`运算符：

```
where t.StudentID == studentID || t.FirstName == firstName 
```

# java - JPA：我应该使用 fetch Lazy 将 BLOB 存储在同一个表中，还是应该将其存储到另一个表并通过一对一关系获取惰性

> ID：10108533
> 
> 赞同：6
> 
> 时间：2012-04-11T14:56:00.453
> 
> 标签：java, jpa, blob

我有一个`Image`保存图像信息的表。我也想存储图像本身。我也应该这样

1.将 Blob 存储在同一个图像表中，然后像下面这样惰性地获取它

```
@Basic(optional = false, fetch = FetchType.LAZY)
@Lob
@Column(name = "IMAGE_BLOB", length=100000)    //This will generate MEDIUMBLOB
private byte[] imageBlob; 
```

**或者**

2.创建另一个`ImageBlob`与 有`OneToOne`关系的表`Image`，并获取惰性关系

```
@OneToOne(cascade = CascadeType.ALL, mappedBy = "image", fetch=FetchType.LAZY)
private ImageBlob imageBlob; 
```

这两种技术在性能方面是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:57:18.867

据我所知，第一个不适用于 Hibernate 和 EclipseLink 作为 JPA 提供程序。LAZY 是对提供者的提示，它们会立即加载而不会报告错误或警告。

只有启用类编织时，OneToOne 关联才会是惰性的，否则它也无济于事。

我已经使用一个名为 LazyBlob 的完全独立的表来完成它，它具有属性“entity”和“id”，并编写了一个实用程序类来从该表中懒惰地获取 lob。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T12:47:39.700

两者都应该产生相同的性能，但我建议将第二个用于大斑点。

数据库可能对 blob 很挑剔，最好将它们与自己的对象隔离开来。这将使您能够更好地控制 blob。

# php - Javascript 和 PHP 中的字符串

> ID：10108535
> 
> 赞同：0
> 
> 时间：2012-04-11T14:56:04.643
> 
> 标签：php, javascript, hash

我对 Javascript 和 PHP 中的字符串有疑问。目前，我有一个客户端脚本（显然是在 Javascript 中），它从 html 表单中获取字符串并将其打印出来。截至目前，我只是将它复制到 php 脚本中（显然是在服务器上）。后来，当我知道脚本工作时，我会让 javascript 自动将它发送到服务器，但现在我想确保我编写的代码是正确的。当我复制字符串时，我得到两个不同的 sha1 哈希。我怀疑有不同的空终止符或类似的东西，因为当我打印出来时，它们是相同数量的字符并且完全匹配（至少肉眼）。我想知道是否有人知道如何解决此问题以使其具有相同的哈希值。谢谢。处理 msg 的 Javascript 代码。javascript 从 html 文档中获取 msg。javascript sha1 哈希来自[http://crypto-js.googlecode.com/files/2.5.3-crypto-sha1.js](http://crypto-js.googlecode.com/files/2.5.3-crypto-sha1.js)

```
var msg=document.input.msg.value;
digert = digest + Crypto.SHA1(msg);
digestBytes = Crypto.SHA1(msg, {asBytes: true});
digestString = Crypto.SHA1(msg, {asString: true}); 
```

处理 msg 的代码 php 代码。它从 html 表单中获取消息，然后将消息发布到 php 脚本。

```
//finds the starting point of the message
$start_MSG = stripos($_POST["message"], ' ')+1;
//stores the message in a global variable
$GLOBALS['msg'] = substr($_POST["message"], $start_MSG);
$temp_hash2 =  sha1($_POST["message"], false); 
```

# c# - 显示基于数据绑定视图模型类型的控件？

> ID：10108537
> 
> 赞同：0
> 
> 时间：2012-04-11T14:56:06.007
> 
> 标签：c#, wpf, xaml

我现在正在学习WPF。我发现 xaml 很难使用。我是这样`MainWindow.xaml`定义的：

```
<Window x:Class="Compliance.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ResourceDictionary Source="MainWindow.Resources.xaml"></ResourceDictionary>
    </Window.Resources>
    <Grid>
    </Grid>
</Window> 
```

像这样`MainWindow.Resources.xaml`：

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:Compliance.ViewModel"
    xmlns:vw="clr-namespace:Compliance.View">

    <DataTemplate DataType="{x:Type vm:Entities.AbstractEntityViewModel}">
        <vw:AbstractEntityView></vw:AbstractEntityView>     
    </DataTemplate>        
</ResourceDictionary> 
```

`AbstractEntityView`是这样的：

```
<UserControl x:Class="Compliance.View.AbstractEntityView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <StackPanel>
        <Label Content="ID:"></Label>
        <TextBlock Text="{Binding Path=EntityId}"></TextBlock>
    </StackPanel>
</UserControl> 
```

然后在`App.xaml.cs`我这样覆盖`OnStartup`：

```
MainWindow window = new MainWindow();

    //Model class
Individual ind = new Individual(1,"Name");

    //subclass of AbstractEntityViewModel
var vm = new Entities.IndividualEntityViewModel(ind);

window.DataContext = vm;
window.Show(); 
```

但是，窗口中没有任何内容。

我使用[这个问题](https://stackoverflow.com/questions/5471982/how-can-i-display-my-user-control-in-the-mainwindow)的答案来控制渲染。但是，这需要您从代码中引用视图中的元素，而我不想这样做。

是否有可能让一个窗口根据 ViewModel 设置为它的数据上下文来选择一个要呈现的视图？或者我对 MVVM 应该如何工作有错误的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:04:49.490

你有正确的想法，但你实际上并没有告诉 WPF 在`ViewModel`任何地方显示你的

如果我绑定到单个 ViewModel ，我通常会`ViewModel`在对象中托管`ContentControl`

```
<Window x:Class="Compliance.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ResourceDictionary Source="MainWindow.Resources.xaml"></ResourceDictionary>
    </Window.Resources>
    <Grid>
        <ContentControl Content="{Binding }" />
    </Grid>
</Window> 
```

或的`ContentControl`列表通常不需要，因为该对象会自动作为每个项目的属性插入。例如，将 a绑定到`Models``ViewModels``Content``ContentPresenter``ContentControl``ListBox``ViewModels`

```
<ListBox ItemsSource="{Binding MyCollectionOfViewModel}" /> 
```

# html - 想要设计一个打印友好的网站；我应该记住什么？

> ID：10108538
> 
> 赞同：2
> 
> 时间：2012-04-11T14:56:07.290
> 
> 标签：html, css

我想设计一个包含大量内容的网站，并且我希望这些内容对打印机友好。所以基本上只是内容。没有导航，没有广告，什么都没有。我计划创建两个样式表，一个用于打印机，一个用于屏幕。

**Q1：**这是最好的方法吗？

**Q2：**在设计这个网站时有什么需要注意的吗？我应该使用*宽度：960px；*或者*宽度：95%；*方法更好？

**Q3：**什么字体大小最适合打印？

**Q4：**衬线字体还是无衬线字体更适合打印？

很多问题，请帮助:)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:09:40.460

**Q1：**我会按照你的建议使用两个 CSS 文件。这样 HTML 就被重用了，您不必管理除打印 CSS 样式之外的额外资源。

**Q2：**我会使用相对单位，例如百分比或 EM，而不是像素。（您希望像素如何与打印相关联？）请记住，该页面可能不会打印在 A4 页面上，可能是 A3、A5 - 任何东西。对于宽度，我通常更喜欢 EM，因为通常一行文本的最佳长度在 60 到 80 个字符之间（60em 到 80ems）。更长的时间和眼睛紧跟文字。越短，您最终没有足够的空间容纳更长的单词，并且您会得到不希望的自动换行。相对单位将使页面缩放到它打印到的任何格式。（这就是为什么我也推荐屏幕的相对单位。）

**Q3：**假设 A4 页面，我会选择不低于 10pt，-也许是 12pt。取决于你的内容。最好的方法是打印出一个测试并自己判断它的阅读效果。

**Q4：**通常说无衬线字体在屏幕上效果最好——因为衬线很难在（当前）低分辨率的显示器上很好地表现出来。而衬线字体通常被认为更适合打印。虽然这是一个有趣的领域，但存在一些争议 - 如果您挖掘一些关于此事的阅读材料，您可以很快找到这些争议。我建议的是普遍接受的约定。

# mysql - 使用单个表列出特定的

> ID：10108540
> 
> 赞同：0
> 
> 时间：2012-04-11T14:56:11.427
> 
> 标签：mysql, join, subquery

我有以下消息表：

![在此处输入图像描述](../Images/cef57212cb006c77f240fc1abcf89ad4.png)

我想列出收件箱中的所有消息，例如，
假设我是 1 号用户，所以我的收件箱应该显示
以下内容：

用户 2
的消息 用户 3
的消息 用户 4 的消息

为此构建查询的最佳方法是什么？

我想出了一些奇怪的查询，看起来像：（伪代码）

```
SELECT
    *
FROM
    `message`
WHERE
    (`user_id_sender` = 1 AND `user_id_receiver` NOT 1)
    OR
    (`user_id_sender` NOT 1 AND `user_id_receiver` = 1) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:56:29.560

这很简单

```
SELECT user_id_sender ID,
       (SELECT user_id_reciever 
        FROM messages 
        WHERE user_id_sender NOT IN(ID) 
        GROUP BY user_id_reciever
       )
FROM message 
```

# c++ - 图像深度和通道之间的差异

> ID：10108541
> 
> 赞同：21
> 
> 时间：2012-04-11T14:56:20.583
> 
> 标签：c++, image, image-processing, opencv

我正在尝试学习opencv，但它非常混乱。有人可以知道imagedepth和no之间的区别吗？图像中的通道数。假设图像深度为 8 且没有。通道 R、G、B 为 3。然后，这意味着什么，我很难想象 3d 结构

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-11T15:00:38.667

深度（或更好的颜色深度）是用于表示颜色值的位数。我不是很喜欢 OpenCV，但是 8 的颜色深度*通常*意味着每个通道 8 位（所以你有 256 个颜色值 - 或更好：灰色阴影（见评论） - 每个通道 - 从 0 到 255）和 3 个通道意思是一个像素值由 3*8=24 位组成。

但是，这也取决于命名法。通常你会说

*“颜色深度为每通道 8 位”*

但你也可以说

*“图像的颜色深度为 32 位”*

然后意味着每个 RGBA 通道 8 位或

*“图像的颜色深度为 24 位”*

并且平均每个 R、G 和 B 通道 8 位。

底线：文档（或措辞）在这里必须非常具体；-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-11T15:35:40.190

根据[OpenCV 文档](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#cv-mat-depth)，在 OpenCV 中深度定义为单个通道的位深度。所以如果你有 8 位深度和 3 个通道，这意味着每个图像像素有 24 位

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-11T16:16:22.493

就这样吧。

你有一个只有一个像素的图像。图像的大小为 1x1 像素。

*   如果这是一个灰度图像，那么只需要一个单通道来表示图像。如何？因为灰度图像（假设是 8 位图像）将具有 8 位，即 2 的 8 次幂，即 256 种不同的阴影。从黑到白。[灰度](http://en.wikipedia.org/wiki/Grayscale)
*   灰度一般是黑白图像。
*   现在如果相同的单像素图​​像由颜色组成，那么我们需要三个通道，即红色、绿色和蓝色或 RGB。当我们混合这些通道的色调时，我们会得到不同的颜色。
*   比如，(255,255,255) 是 RGB 中的纯白色，(0,0,0) 是纯黑色
*   所以现在每个通道都有 0-255 的阴影，即 8 位。
*   生成的彩色图像的深度为 8 位，通道数为 3。
*   每个通道可以有超过 8 位，这增加了颜色范围（阴影）
*   对于 1x1 像素图像，每个通道的像素颜色值范围为 0-255。那是`[0 to 255 in R][0 to 255 in G][0 to 255 in B]`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-11T15:00:34.577

图像深度是指每个通道可以具有的值范围。如果您的通道深度为例如 8 位（无符号字符），则一个通道的值可以从 0 到 255。RGB 表示 3 个通道，一个用于**R** ed 值，一个用于一个用于**G** reen 值，一个用于**B** lue价值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T14:59:34.290

图像深度是用于存储图像的实际数据类型的长度（`integer`, `char`, `float`）。在您的情况下，它似乎`char`或`unsigned char`深度为 8 位。

通道数是多个数字，用于描述特定像素的颜色（例如 RGB - 3 个通道）。

# javascript - 下划线模板 - 部分（使用 RequireJS）

> ID：10108542
> 
> 赞同：2
> 
> 时间：2012-04-11T14:56:30.553
> 
> 标签：javascript, requirejs, templating, partials, underscore.js

我正在使用`tpl!`RequireJS 的插件将我的模板导入并编译到我的应用程序中 - 类似于`text!`插件：

```
define([
    "tpl!../templates/newsfeed.html",
    "tpl!../templates/friends.html",
    "tpl!../templates/tag.html",
    "tpl!../templates/tags.html",
], function (renderNewsfeed, renderFriends, renderTag, renderTags) { … }); 
```

这一切都很好，但我已经到了一个理想的阶段，我希望使用某种形式的局部。

目前，如果我想在模板中使用模板，我必须将编译后的部分传递给我正在渲染的模板，如下所示：

```
$('body').append(renderTags({
    tags: tags,
    renderTag: renderTag
})); 
```

然后，在我的模板中：

```
<section class="tags-list">
    <h1 class="h4 hidden">Tags</h1>
    <% _.each(tags, function (tag) { %>
        <%= renderTag({ tag: tag }) %>
    <% }); %>
</section> 
```

如果我没有将编译后的部分传递给模板，那么它就不会找到它。

我的问题是，我怎样才能做得更好？如果我在 RequireJS 定义中定义为依赖项的模板可用于模板本身的变量范围（全局），那么我可能不必将编译后的部分传递给模板？

其次，拥有可用于 RequireJS 但用于模板的相同类型的依赖定义会非常好：

```
define([
    'tpl!../templates/tag.html'
], function (renderTag) {
    // Obviously this can't be straight HTML, but you get the idea
    <section class="tags-list">
        <h1 class="h4 hidden">Tags</h1>
        <% _.each(tags, function (tag) { %>
            <%= renderTag({ tag: tag }) %>
        <% }); %>
    </section>
}); 
```

我可能在一个完全不同的星球上。如果我是，请有人解释一下他们如何使用模板。也许我需要切换模板引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T14:16:14.923

我想出的解决方案是`require()`在模板内部实际使用，以获取所需的部分，例如：

```
<%
require([
    "tpl!../templates/partials/tags.html",
    "tpl!../templates/partials/spotify-search.html",
    "tpl!../templates/partials/popup.html"
], function (renderTags, renderSpotifySearch, renderPopup) { %>
    // Template code goes here
    // Partial example:
    <%= renderTags({ tags: tags }); %>
    <%
}); %> 
```

# c# - 如何将项目（组合框）添加到标签页 - C#

> ID：10108543
> 
> 赞同：2
> 
> 时间：2012-04-11T14:56:34.487
> 
> 标签：c#, tabs, tabpage

这是我第一次使用标签，我遇到了问题。我试图做到这一点，所以每当我按下一个按钮时，组合框都会出现在打开的选项卡内，然后如果再次按下该按钮，它将在第一个下方添加另一个组合框。

这是我的做法：

```
private void buttonLevel4Add_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < 8; i++)
            {

                comboBoxModuleSelect.Add(new ComboBox());
                System.Drawing.Point p = new System.Drawing.Point(176, 114 + i * 25);
                (comboBoxModuleSelect[i] as ComboBox).Location = p;
                (comboBoxModuleSelect[i] as ComboBox).Size = new     System.Drawing.Size(183, 20);

                this.Controls.Add(comboBoxModuleSelect[i] as ComboBox);
            }
        } 
```

但问题是组合框不会在标签页中创建，而是在标签页下方（即在表单上）。标签页不会取代表单区域吗？请如果有人可以帮助我将不胜感激。谢谢

**编辑：**

哦，上帝，对我来说又是一个菜鸟时刻。我改变了这一行：

```
this.Controls.Add(comboBoxModuleSelect[i] as ComboBox); 
```

到：

```
tabpage.Controls.Add(comboBoxModuleSelect[i] as ComboBox); 
```

真的很抱歉，我想它只是帮助我提出问题并思考它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:04:01.517

```
this.Controls.Add(comboBoxModuleSelect[i] as ComboBox); 
```

到：

```
tabpage.Controls.Add(comboBoxModuleSelect[i] as ComboBox); 
```

# c# - Windows Phone 7 - 来自 URL 的图像颜色叠加

> ID：10108544
> 
> 赞同：2
> 
> 时间：2012-04-11T14:56:35.467
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

在我的 Windows Phone 7.1 应用程序中，我有一个功能齐全的功能`ListBox`，可以显示来自 Web 服务的数据。在`ListBox`我能够放置图像并将图像源绑定到使用以下内容从 Web 服务返回的值`xaml`：

```
<Image Source="{Binding WebImageUrl}" Width="60" Height="60" /> 
```

这很好用。但是现在我正在尝试用另一种颜色覆盖图像，为此我正在关注[此处](https://stackoverflow.com/questions/3950750/how-can-i-change-the-color-of-an-image-in-silverlight-wp7-color-mask)发布的 SO 问题。如果图像明确说明，这也很有效。如果我尝试绑定 url，它就不起作用。

例如，代码：

```
<Rectangle Fill="Red" Width="60" Height="60">
  <Rectangle.OpacityMask>
    <ImageBrush ImageSource="http://someurl.com/repository/images/icon100.png"/>
  </Rectangle.OpacityMask>
</Rectangle> 
```

作品。但是，代码：

```
<Rectangle Fill="Red" Width="60" Height="60">
  <Rectangle.OpacityMask>
    <ImageBrush ImageSource="{Binding WebImageUrl}"/>
  </Rectangle.OpacityMask>
</Rectangle> 
```

才不是。代码编译文件，但 Visual Studio 引发解析错误。

**有没有办法让 ImageBrush.ImageSource 绑定到字符串？？？**

任何想法将不胜感激。我已经有一段时间没有运气了。

干杯，布雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:10:33.313

-- Removed --

Your original code seems to be working fine to me, with a string property, so I don't see any issue...

# php - 将数据从 latin1_swedish 转换为 utf-8

> ID：10108550
> 
> 赞同：2
> 
> 时间：2012-04-11T14:56:48.627
> 
> 标签：php, utf

我需要将数据从旧数据库转换为新数据库。旧数据库采用 latin1_swedish_ci 排序规则，并且具有像这样的西里尔语内容

```
<p>ÐÑ€Ñ…Ð¸ÐµÐ¿Ð¸ÑÐºÐ¾Ð¿ Ð¾Ñ…Ñ€Ð¸Ð´ÑÐºÐ¸ Ð¸ Ð¼Ð¸... 
```

页面上以 utf-8 结尾的内容如下所示

```
<p>Архиепископ охридски и митрополит скопски ... 
```

这很好。现在我需要将所有这些数据转换为原生 UTF-8 内容。没有这些经验，任何建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:06:27.730

你可以试试这个

```
ALTER TABLE <tablename> CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci 
```

请注意，这也会影响现有的列排序规则。如果要将默认排序规则更改为`utf8`，则必须更改数据库排序规则。之后，所有新表将`utf8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:07:02.137

从[手册](http://dev.mysql.com/doc/refman/5.0/en/charset-conversion.html)中，

`ALTER TABLE t MODIFY col1 CHAR(50) CHARACTER SET utf8;`

但是，如果您有无法转换的字符，那么您将丢失该数据。首先进行备份并在那里尝试。

# android - 更新安卓数据库

> ID：10108551
> 
> 赞同：2
> 
> 时间：2012-04-11T14:56:50.503
> 
> 标签：android

我正在尝试更新我的 sqlite Android 数据库中的值。我在用：

```
 public void updateName(int id,
                String name) {
            String update = "UPDATE STUDENT SET IS_name = " + "'" + name + "'"
                    + " WHERE ID = " + id;
            database.rawQuery(update , null);
    } 
```

但是数据库没有更新。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:01:58.633

利用

```
db.execSQL(update); 
```

喜欢，，

```
String update = "UPDATE STUDENT SET IS_name = '"+ name +"' WHERE ID = " + id;
db.execSQL(update); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:08:44.547

Use following function to update database.

```
public void updateTipsDetails(int id,String name)
{
    try
    {
        SQLiteDatabase db= this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(COLUMN_TIPS, name);

        db.update(TABLE_NAME, values, id + "=" + COLUMN_ID, null);
        db.close(); 

    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:00:00.117

您没有将任何选择参数传递到原始查询中。您需要创建一个字符串数组并将名称和 id 值添加到其中（按此顺序）。然后将数组作为第二个参数传递给 your`rawQuery`而不是`null`.

# regex - 使用 VIM 的正则表达式将 MM/DD/YYYY 转换为适当的日期（“1999 年 6 月 4 日”）以供最终用户使用

> ID：10108552
> 
> 赞同：2
> 
> 时间：2012-04-11T14:56:51.497
> 
> 标签：regex, vim

这是我的参数：

*   我需要将 MM/DD/YYYY（MM-DD-YYYY、MM.DD.YYYY 等）更改为 MONTH、DAY YEAR。例如：2001 年 1 月 29 日 => 2001 年 1 月 29 日。
*   这是为了人类阅读的输出。我需要在多台计算机上多次进行此更改。以前负责此任务的人一直是手工完成的。
*   我可以依赖 VIM（因为它在拇指驱动器上），但当我使用它时，计算机上没有其他东西。

挑战：在每台计算机上制作一个正则表达式来快速解决这个问题。

这就是我所拥有的（使用#'s 作为分隔符）：

```
%s#\([1-9]\|1[012]\)[- /.]\([1-9]\|[12][0-9]\|3[01]\)[- /.]\([19\|20]\d\d\)#UGLYPART \2, \3#g 
```

搜索部分正常工作，因为我在正确的位置得到了 \2 和 \3。我知道 UGLYPART 将使用 \1，然后进行某种评估，例如：

```
((\1)\=(1\|2\|3\|4\|5\|6\|7\|8\|9\|10\|11\|12)(January\|February\|March\|April\|May\|June\|July\|August\|September\|October\|November\|December)) 
```

除了它会起作用。

有没有人有任何见解？我觉得我大约有 90% 在那里。还是我对 Vim 的正则表达式要求太多了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:07:02.687

是的，您应该使用`\=`，但它以另一种方式使用：

```
%s#\v([1-9]|1[012])[\- /.]([1-9]|[12][0-9]|3[01])[- /.]((19|20)\d\d)#\=strftime('%B', 28*24*60*60*submatch(1)).' '.submatch(2).', '.submatch(3)#g 
```

注意：`[]`是一个集合，因此`[19\|20]`您在此处编写的内容被视为`1`, `9`, `\`, `|`,`2`或`0`. 你应该使用`\(19\|20\)`. 并用于`\v`避免不必要的逃逸。

注2：我不想写月份列表。您可以看到一年中的第 28 天是 1 月，28*2=56 是 2 月，28*3=84 是 3 月等等直到 12 月，所以您可以使用函数和时间戳（以秒为单位）是 1 月 1 日`strftime()`这一事实`0`（不是当年的，但这没关系）。不过这取决于语言环境：在英语语言环境中`strftime('%B', 28*24*60*60*1)`会输出“January”，但在我的系统上会输出“Январь”。

注意 3：`\=`必须始终位于替换字符串的第一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:33:38.130

我认为您可以使用 -e 在“行编辑”（ex）模式下使用 vim。然后给它一个编辑命令**文件**。

假设这些命令在 date.ex 中：

```
g/\([0-9][0-9]*\)[./-]1[./-]\([012][0-9][0-9]*\)/s//January \1, \2/
g/\([0-9][0-9]*\)[./-]2[./-]\([012][0-9][0-9]*\)/s//February \1, \2/
g/\([0-9][0-9]*\)[./-]3[./-]\([012][0-9][0-9]*\)/s//March \1, \2/
... etc ...
w
q 
```

然后调用 vim 作为

```
vim -e -S date.ex foo 
```

其中 foo 是您要编辑的文件。所以 yoy 可以有一个 shell 脚本来跨文件系统中的所有文件运行它。

# php - 将 id 保存到会话

> ID：10108554
> 
> 赞同：1
> 
> 时间：2012-04-11T14:57:02.690
> 
> 标签：php, cakephp

我想在保存产品后将产品 ID 放入会话中，但是当我阅读会话时我得到了错误的 ID。

```
foreach ($this->data['Address'] as $key => $ab) {
    $this->data['Product'][$key]['model'] = 'User';
    $this->data['Product'][$key]['foreign_key'] = $this->User->id;
    $this->Supplier->Brand->Type->create();
    $this->Supplier->Brand->Type->save($this->data['Product'][$key]);
    $this->Session->write('productId', $this->Supplier->Brand->Type->id);
} 
```

如何获取产品 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:13:27.543

尝试使用代码

```
foreach ($this->data['Address'] as $key => $ab) 
 {
$this->data['Product'][$key]['model'] = 'User';
$this->data['Product'][$key]['foreign_key'] = $this->User->id;
$this->Supplier->Brand->Type->create();
$this->Supplier->Brand->Type->save($this->data['Product'][$key]);

$lastid = $this->Supplier->Brand->Type->getLastInsertID()

$this->Session->write('productId', $lastid);
} 
```

# ios - 数据图表的标准规范/描述语言？

> ID：10108556
> 
> 赞同：1
> 
> 时间：2012-04-11T14:57:12.220
> 
> 标签：ios, charts

**动机：**我是一个开发 Intranet Web 应用程序的小型开发团队的一员。一项主要功能是能够查看数据报告。这些报告使用 JavaScript 表格和 Flash 图表。然而，我们最近开始设计一个 iPad 应用程序，它允许用户查看和配置这些报告，而这些图表让我很难过。

**问题：**基本上，我们使用特定于实现的格式将图表配置存储在数据库中。我们有一个用于图表的 JavaScript 库，但它需要我们手动重新创建每个报告上的每个图表。非常耗时。该应用程序的要求之一是性能。它必须比仅使用 Safari 中的现有网络应用程序更快，因此 UIWebView 可能无法正常工作。

似乎最简单的解决方案是使用像 Core Plot 这样的 iOS 图表库。但是，我们不仅必须重新创建每个图表，而且还必须维护每个图表的两个版本。维护噩梦。

我能想到的最理想的解决方案是在数据库中存储一个标准的通用图表规范。对于每个新的图表实现，我们可以使用现有配置动态生成特定于实现的配置。

**问题：**是否有某种现有的标准或图表描述语言我们可以使用而无需开发自己的？如果没有，是否有其他标准/语言可以轻松适应此目的？

**第二个问题：**是否有另一种更好的方法可以在 Web 客户端和 iOS 应用程序中显示图表，而无需仅通过 UIWebView 运行网页，也无需维护多个配置？

编辑：我找到了 Microsoft 报告定义语言 (RDL) 规范，它基本上是我正在寻找的概念。我可能会与我的团队一起调整其中的一部分以满足我们当前的需求。

# .net - Silverlight 中的可序列化键值对或元组

> ID：10108560
> 
> 赞同：0
> 
> 时间：2012-04-11T14:57:28.900
> 
> 标签：.net, wcf, silverlight, serialization

我需要将键值对或元组列表从 WCF 发送到 silverlight 应用程序。我发现 KeyValuePair 类不可序列化，并且元组类在 silverlight 中也不可序列化。

我在这里找到了一篇关于此的博客文章：http: [//davybrion.com/blog/2010/06/more-on-system-tuple-and-serializationdeserialization/](http://davybrion.com/blog/2010/06/more-on-system-tuple-and-serializationdeserialization/)

这也得到了其他博客的一些回应。我去了其中一个发现这里：[http ://www.devvblog.com/?p=5](http://www.devvblog.com/?p=5)

但我真的不明白如何使用它。我希望我能做到`Tuple<double> temp = new Tuple();`。但是，似乎没有默认构造函数。如果有人知道如何使用它，请解释一下。否则，有没有办法可以简单地将对象对列表从 WCF 发送到 silverlight 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:59:24.537

我赞成在这个类似问题中描述的自定义结构解决方案。易于使用且易于理解。

[.NET 中是否有可序列化的通用键/值对类？](https://stackoverflow.com/questions/83232/is-there-a-serializable-generic-key-value-pair-class-in-net)

# c# - 更改 SqlConnection 超时

> ID：10108565
> 
> 赞同：88
> 
> 时间：2012-04-11T14:57:58.830
> 
> 标签：c#, .net, sql-server, sqlconnection

我正在尝试覆盖`SqlConnection`15 秒的默认超时，但收到一条错误消息，提示

> 无法分配属性或索引器，因为它是只读的。

有没有解决的办法？

```
using (SqlConnection connection = new SqlConnection(Database.EstimatorConnection))
{
   connection.Open();

   using (SqlCommand command = connection.CreateCommand())
   {
       command.CommandType = CommandType.StoredProcedure;
       connection.ConnectionTimeout = 180; // This is not working 
       command.CommandText = "sproc_StoreData";
       command.Parameters.AddWithValue("@TaskPlanID", order.Projects[0].TaskPlanID);
       command.Parameters.AddWithValue("@AsOfDate", order.IncurDate);

       command.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-04-11T15:05:12.593

如果您想为特定查询提供超时，那么 CommandTimeout 是前进的方向。

它的用法是：

```
command.CommandTimeout = 60; //The time in seconds to wait for the command to execute. The default is 30 seconds. 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-11T15:00:04.577

您可以在连接字符串中设置超时值，但连接后它是只读的。您可以在[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx阅读更多内容](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)

正如 Anil 所暗示的， ConnectionTimeout 可能不是您所需要的；它控制建立新连接时 ADO 驱动程序将等待多长时间。您的使用似乎表明需要等待比正常情况更长的时间才能执行特定的 SQL 查询，在这种情况下，Anil 是完全正确的；使用 CommandTimeout（即 R/W）更改单个 SqlCommand 的预期完成时间。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-05-27T08:42:42.883

更简洁的方法是在 xml 文件中设置 connectionString，例如`Web.Confing(WepApplication)`或`App.Config(StandAloneApplication)`.

```
 <connectionStrings>
    <remove name="myConn"/>
    <add name="myConn" connectionString="User ID=sa;Password=XXXXX;Initial Catalog=qualitaBorri;Data Source=PC_NAME\SQLEXPRESS;Connection Timeout=60"/>
  </connectionStrings> 
```

通过代码，您可以通过这种方式获得连接：

```
public static SqlConnection getConnection()
{
        string conn = string.Empty;
        conn = System.Configuration.ConfigurationManager.ConnectionStrings["myConn"].ConnectionString;
        SqlConnection aConnection = new SqlConnection(conn);
        return aConnection;
} 
```

您只能设置`ConnectionTimeout`您创建的实例。创建实例时，您不会更改此值。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-04-11T14:59:52.737

您可以随时将其添加到您的连接字符串中：

```
connect timeout=180; 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-12-20T03:53:16.087

您可以添加`Connection Timeout=180;`到您的连接字符串

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-11-15T10:24:30.680

您还可以使用 SqlConnectionStringBuilder

```
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(ConnectionString);
builder.ConnectTimeout = 10;
using (var connection = new SqlConnection(builder.ToString()))
{
    // code goes here
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-05-21T13:14:38.703

旧帖子，但当它出现我正在搜索的内容时，我想我会在这个主题中添加一些信息。我打算添加评论，但我没有足够的代表。

正如其他人所说：

connection.ConnectionTimeout 用于初始连接

command.CommandTimeout 用于单独的搜索、更新等。

但：

connection.ConnectionTimeout**也**用于提交和回滚事务。

是的，这是一个绝对疯狂的设计决定。

因此，如果您在提交或回滚时遇到超时，则需要通过连接字符串增加此值。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-08-31T06:11:45.183

您可以将连接超时设置为连接级别和命令级别。

> 将“Connection Timeout=10”添加到连接字符串中。现在连接超时为 10 秒。

```
var connectionString = "Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;Connection Timeout=10";
using (var con = new SqlConnection(connectionString))
{

} 
```

> 将 CommandTimeout 属性设置为 SqlCommand

```
var connectionString = "Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword";
using (var con = new SqlConnection(connectionString))
{

    using (var cmd =new SqlCommand())
    {
        cmd.CommandTimeout = 10;
    }

}
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-11T15:05:12.343

你需要使用`command.CommandTimeout`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-17T11:35:22.223

我发现了一篇关于这个主题的优秀博文： [https ://improve.dk/controlling-sqlconnection-timeouts/](https://improve.dk/controlling-sqlconnection-timeouts/)

基本上，您可以在连接字符串中设置 Connect Timeout，如下所示：

```
Data Source=server;Initial Catalog=databaseUser Id=username;Password=password;Connect Timeout=30 
```

或者您在命令对象上设置 ConnectionTimeout，如下所示：

```
sqlCommand.CommandTimeout = 30; 
```

请注意，超时时间以秒为单位。

此外，此超时不考虑由于服务器死机或过载等情况而导致的连接丢失。这些最终会触发 TCP 超时。请参阅博客文章以获取一个很好的扩展示例来处理它。

# php - 良好的登录结构

> ID：10108566
> 
> 赞同：2
> 
> 时间：2012-04-11T14:58:00.467
> 
> 标签：php, mysql

你能给我一些好的php登录结构的想法吗？

我在想这样的事情：

**登录页面：**

***如果登录***（检查会话是否存在）（

*   重定向到首页。

*   打开会话，保存用户名、ID、排名到变量

)

***别的***

*   显示登录表单

*   检查输入与数据库记录的比较

*   保存用户名、ID、排名到会话变量

*   展示内容。

**其他页面：**

***如果登录***（检查会话是否存在）（

*   打开会话，保存用户名、ID、排名到变量。

*   显示用户信息

)

***别的***

*   重定向到登录页面，如果允许未登录的访问，则留在页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:02:39.737

这几乎就是我使用的结构。看不出有什么大问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:04:48.180

差不多就是这样。

根据您的应用程序的复杂性和您的需求，如果您不想重新发明轮子，您还可以查看[身份验证框架。](http://pear.php.net/packages.php?catpid=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:18:54.067

根据您的伪结构的字面意义，您可以通过简单地将未经授权的客户端重定向到登录页面来节省一些工作。像这样：

```
if( check_user_login() == false)
{
  header("Location: login.php");
  exit;  // make sure page parsing stops here
}

// the content for authorized clients 
```

# shell - 用于为选定文件创建补丁的 Shell 脚本

> ID：10108570
> 
> 赞同：0
> 
> 时间：2012-04-11T14:58:07.963
> 
> 标签：shell, diff, patch

我有两个目录`new`，并且`old`目录结构几乎相似，如下所示，但有一些区别。

```
old
|----1
|    |-1a.cpp
|    |-1b.cpp
|----2
|    |-2c.cpp
|----3
|    |-3a.cpp
|    |-3b.cpp
|----4
|    |-4a.cpp
|    |-4b.cpp
|----5
|    |-5a.cpp
|    |-5b.cpp

------------

new
|----1
|    |-1a.cpp
|    |-1b.cpp
|----4
|    |-4a.cpp
|----5
|    |-5a.cpp
|    |-5b.cpp 
```

该目录`new`包含修改后的文件。但它维护了`old`.

如何使用和目录的`diff`实用程序编写 shell 脚本来生成补丁。应该只包含目录中那些文件的差异。它不应包含目录中的其他文件。`old``new``patch``new``old`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:38:39.043

```
mkpatch() {
    new=$1
    old=${1/new/old}
    patch=${1}.patch
    diff "$old" "$new" > "$patch"
}
export -f mkpatch

# cd to parent directory of old and new

find new -type f -exec bash -c 'mkpatch/{}' \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:37:21.940

The following should do what you want I think.

```
#!/bin/sh

OLD_DIR=old
NEW_DIR=new

# Make list of files, stripping off first directory in path
find "$OLD_DIR" -type f -print | cut -d/ -f2- | sort > files-old
find "$NEW_DIR" -type f -print | cut -d/ -f2- | sort > files-new

# Get files that are common
comm -1 -2 files-old files-new > files-common

# Create list of files to diff
sed "s/^/$OLD_DIR\//" files-common > files-to-diff-old
sed "s/^/$NEW_DIR\//" files-common > files-to-diff-new

# Do the diff
paste -d ' ' files-to-diff-old files-to-diff-new | xargs -n 2 diff -u

# Cleanup. Temp file handling should probably be done better by using
# mktemp to generate file names and using trap to make sure the files
# always are deleted etc. 
rm -f files-common files-new files-old files-to-diff-new files-to-diff-old 
```

It is just a simple, straight forward approach using several temporarily files. You might get away with some of those if you want to.

# android - 远程检测安卓手机的连接状态

> ID：10108572
> 
> 赞同：1
> 
> 时间：2012-04-11T14:58:20.210
> 
> 标签：android, android-wifi, google-voice

我有一部在 Page Plus 上使用的安卓手机。我正在尝试找出远程检测（从 linux 网络服务器）设备是否连接到 wifi 网络的最佳方法。

我想在未连接到 wifi 时禁用我的谷歌语音帐户上的短信转发，但由于我的手机没有数据连接，因此必须远程触发。我知道如何编写转发设置切换功能，我只需要远程检测android设备的wifi状态。

我提出了一些想法，比如监控手机的 gtalk 状态，以及检测 android 客户端是否在线——我可以让它工作，但这不是世界上最干净的方法。

有什么建议或想法吗？我知道这不完全是一个编程问题，但我希望得到一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:08:53.583

You could run a background service on the Android client which pings the webserver at constant time intervals whenever wifi is connected - whenever the client misses a "scheduled" check-in, the webserver concludes that the phone is disconnected, and executes whatever actions you want in that case.

To ping the server, I would use a simple TCP socket:

```
// you could use IP address instead of the hostname if you don't have a domain name
// PORT_NUM is some value shared between the server and the client e.g. 3456
Socket sock = new Socket("mywebserverurl.com", PORT_NUM);
OutputStream out = sock.getOutputStream();
String data = getDataServerNeeds();
out.write(data.getBytes());
sock.close(); 
```

[This tutorial](http://www.helloandroid.com/tutorials/simple-connection-example-part-ii-tcp-communication) has a more detailed example, including the server-side aspect.

# jquery - jquery一步一步的形式

> ID：10108575
> 
> 赞同：1
> 
> 时间：2012-04-11T14:58:30.117
> 
> 标签：jquery, forms, fadein

在我的演示中，我有一个分步表格，我需要使用**活动**类修复面包屑导航

一切正常，但菜单上的活动似乎不起作用。你能帮我看一下吗？

[http://jsfiddle.net/xSkgH/75/](http://jsfiddle.net/xSkgH/75/)

```
(function () {
    var prevLink = '<input class="button cancel" type="button" value="cancel">';
    var nextLink = '<input class="button continue" type="button" value="Continue">';
    var navHTML = '<div class="prev-next">' + prevLink + nextLink + '</div>';
    var FormData = [];

    $(function() {
        // init
        $('#stepbystep > fieldset').hide().append(navHTML);
        $('#first-step .cancel').remove();
        $('#last-step .continue').remove();

        // show first step
        $('#first-step').show();

        $('input.continue').click(function() {
            var whichStep = $(this).parent().parent().attr('id');
            $('.breadcrumb a').addClass('active');

            if (whichStep == 'first-step') { }
            else if (whichStep == 'second-step') { }
            else if (whichStep == 'third-step') { }
            else if (whichStep == 'fourth-step') { }
            else if (whichStep == 'last-step') { }

            $(this).parent().parent().hide(300).next().show(300);
            $('.breadcrumb a').removeClass('active');
        });

        $('input.cancel').click(function() {
        $(this).parent().parent().hide(300).prev().show(300);

        });
    })
}()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:16:07.100

它不起作用的原因是因为代码是这样的：

```
$('.breadcrumb a').addClass('active');
// other stuff
$('.breadcrumb a').removeClass('active'); 
```

因此，每次单击 Continue 按钮时，都会在面包屑中创建每个链接，`active`然后几乎立即（即在同一功能内）将它们全部设为 not `active`。如果您单步调试调试器，您可以看到它们的样式发生变化，然后又变回来。

如果你想制作一个特定的元素`active`，那么你将不得不以某种方式识别那个特定的元素。本质上，您希望通过以下方式启动该功能：

```
$('.breadcrumb a').removeClass('active'); 
```

这样你就可以“取消激活”任何一个`active`（因为你不关心哪个是活动的，所以只需点击所有这些）。然后，您需要确定要在其上添加`active`类的特定元素。这可能有点棘手。

也许给每个人一个，`id`以便您可以直接引用它们？或者，由于您似乎已经有了“第一步”和“第二步”等概念，您可以这样引用它们：

```
$('.breadcrumb a').eq(2).addClass('active'); 
```

这将引用匹配元素中的第三个元素（索引`2`），因此它适用于“第三步”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:16:49.030

看起来您的目标是所有面包屑链接：

```
 $('.breadcrumb a').addClass('active'); 
```

您可能希望给链接一个 id，然后在 if 语句中添加类。

```
 var whichStep = $(this).parent().parent().attr('id');
   // remove active from all links then add back the to the step you are on    
   $('.breadcrumb a').removeClass('active');

   if (whichStep == 'first-step') { 
     $('.breadcrumb #stepOne').addClass('active');
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:22:06.507

在您的代码中添加以下函数，

[**演示**](http://jsfiddle.net/skram/xSkgH/83/)

```
 function updateBreadCrumb (whichStep, isCancel) {
       var bc = 1;
       if (isCancel) bc = -1;
       $('.breadcrumb a').removeClass('active');

       if (whichStep == 'second-step') {
           bc += 1;
        } else if (whichStep == 'third-step') {
           bc += 2;
        } else if (whichStep == 'fourth-step') {
           bc += 3;
        } else if (whichStep == 'last-step') {
           bc += 4;
        }
        $('.breadcrumb a:eq('+bc+')').addClass('active');
    } 
```

然后相应地调用它们，如下所示，

```
 //Inside Continue click
   updateBreadCrumb ( whichStep, false);

   //Inside Cancel click
   updateBreadCrumb ( whichStep, true); 
```

# css - 如何停止 jQuery mobile 将样式应用于我的特定表单元素

> ID：10108578
> 
> 赞同：49
> 
> 时间：2012-04-11T14:58:39.337
> 
> 标签：css, jquery-mobile

是否可以指示 jQuery Mobile 不设置我的输入框和提交按钮的样式。我对我的自定义 CSS 很满意。jQuery 移动脚本正在将自己的样式应用于我的所有元素。

我尝试的一种解决方法是在我的自定义 CSS 中覆盖这些元素。有没有其他可用的功能我可以做到这一点？像这样的东西

```
$.ignoreStyles("button,text"); 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-04-11T15:28:03.677

jQuery Mobile 将忽略`data-role`属性设置为`none`. 因此，您可以简单地将这些属性添加到您的标记中：

```
<input type="text" name="foo" data-role="none" />
<button type="button" id="bar" data-role="none">Button</button> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T16:50:08.390

这对我有用。

```
$(document).bind("mobileinit", function() {
  $.mobile.ignoreContentEnabled = true;
});

<div data-enhance="false">
    <input type="checkbox" name="chkbox1" id="chkbox1" 
      checked />
    <label for="chkbox1">Checkbox</label>
    <input type="radio" name="radiobtn1" id="radiobtn1" 
      checked />
    <label for="radiobtn1">Radio Button</label>
  </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-08T00:21:57.450

@angelokh 解决方案对我有用。另请查看以下链接：

[http://my.safaribooksonline.com/book/-/9781849517225/7dot-configurations/ch07s06_html](http://my.safaribooksonline.com/book/-/9781849517225/7dot-configurations/ch07s06_html)

此外，关键是**在包含 jquery.mobile.js 之前添加以下脚本：**

```
$(document).bind("mobileinit", function() {
  $.mobile.ignoreContentEnabled = true;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-31T09:24:43.840

试试这个

```
$(document).on('pagebeforecreate', function( e ) {
    $.mobile.ignoreContentEnabled=true;
}); 
```

# java - 将 Java 控制台程序转换为 Webapp

> ID：10108581
> 
> 赞同：7
> 
> 时间：2012-04-11T14:58:47.090
> 
> 标签：java, web-applications

我有一个带有`main()`方法的 Java 类。它包含进行一些数字运算和分析的逻辑。它计划每天运行一次，如果需要可以再次手动运行。该例程使用 Log4j 记录其活动。运行它并检查日志需要远程登录主机箱。

我想将其转换为 Web 应用程序，我可以在其中通过网页触发它并查看日志的输出，最好是在它滚动时。

*最好的方法是什么？*Java 网络应用程序？一个简单的基于 Web 的通用脚本运行器？或我可能不知道的任何其他选项。

**更新：** 有关要求的更多详细信息：

1.  能够从网页启动程序
2.  能够查看 Log4j 的滚动输出
3.  如果我离开页面并再次返回，它应该让我知道上次运行仍在运行并显示日志。*我不需要能够并行运行多个实例。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:05:03.233

您是否考虑过设置 Hudson/Jenkins 服务器来运行任务？因为它具有您描述的功能，所以它是一个 Java Web 应用程序，无需修改您现有的项目即可工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:50:26.177

您可以通过 AJAX 提交表单并使用带有 Spring MVC 的 Ajax 来轮询新的日志条目并将它们添加到页面上的表格中。这是 AJAX 调用的一些快速示例代码，用于使用 JQuery 和 Spring MVC 控制器方法检查新的日志条目来处理它。

JSP：

```
$.getJSON("logs.htm", { lastLogId: logId }, function(response) {
    $('#myTable tr:last').after('<tr><td>' + response + '</td></tr>');
}); 
```

Spring MVC 控制器（返回 JSON）：

```
@Controller
public class LogController {

    @RequestMapping("logs.htm")
    public @ResponseBody String getLogs(@RequestAttribute("lastLogId") Integer lastLogId, HttpSession sess) {
        LogList logs = sess.getAttribute("logs"); // just an example using user-defined class "LogList"
        return logs.getNextLog(lastLogId);
    }
} 
```

有几件我在这里没有提到（当 log4j 记录日志时需要将日志条目存储到会话等），但我希望看到使用 Spring MVC 和 AJAX 执行此操作的方法至少会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:07:14.160

你可以尝试从 jsp / jsf 调用 web-service

# matlab - 结构内字段的逻辑索引

> ID：10108583
> 
> 赞同：-2
> 
> 时间：2012-04-11T14:58:58.803
> 
> 标签：matlab

我有这样的结构：

```
Basis.FieldsBasisType.fieldsBasisComponents 
```

每个基础大约有 13 个组件，包括 6 个资产类别 ID。

所以，例如

字段名（Basis.SalaryIncrease）=

```
'Constant'
'AWeight'
'AAssetClassID'
'ATimeLag'
'BWeight'
'BAssetClassID'
'BTimeLag'
'CWeight'
'CAssetClassID'
'CTimeLag'
'DWeight'
'DAssetClassID'
'DTimeLag'
'EWeight'
'EAssetClassID'
'ETimeLag'
'FWeight'
'FAssetClassID'
'FTimeLag'
'cap'
'floor' 
```

现在我要做的是选择在任何基础上使用的所有独特资产类别。不过，我真的很难做到这一点，目前我正在使用：

```
basisNames = fieldnames(Basis);
requiredSeries=[];
for i = 1:size(fieldnames(Basis),1)
    requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).AAssetClassID)];
    requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).BAssetClassID)];
    requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).CAssetClassID)];
    requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).DAssetClassID)];
    requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).EAssetClassID)];
    requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).FAssetClassID)];
end
requiredSeries = unique(requiredSeries) 
```

在我看来，这真的很丑陋。我想做某种字符串比较以在字段中找到“AssetClassID”，例如：

```
field = fieldnames(Basis.(basisNames{1}));
strfind(field,'AssetClassID'); 
```

然后使用该单元格数组对“字段”进行逻辑索引，并从“AssetClassID”字段中获取数据。但我坚持做这项工作。

```
~cellfun('isempty',strfind(field,'AssetClassID')) 
```

获取我的逻辑索引，我如何将其应用于字段，然后使用它来获取值。

任何想法都将不胜感激，我觉得应该有一种简洁的方法，但我错过了一些东西。硬编码这些字段名似乎是一种短视的解决方案。

#

编辑：我讨厌自己。

对不起，伙计们，我在发布此消息后想出了一个工作变体，为浪费任何人的时间而道歉！

```
basisNames = fieldnames(Basis);
for i = 1:size(fieldnames(Basis),1)
    field = fieldnames(Basis.(basisNames{i}));
    field = cell2mat(field(~cellfun('isempty',strfind(field,'AssetClassID'))));
    for j = 1:size(field,1)
        requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).(field(1,:)))];
    end
    requiredSeries = unique(requiredSeries)
end 
```

我之前错过了一个必要的 cell2mat，导致无法让它流血地工作。无论如何，我总是希望听到对此的改进，否则你可以关闭它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:03:03.270

抱歉，伙计们，我在 30 分钟或发布此内容后想出了一个可行的变体，根据 Michelle 的建议将其弹出作为答案。

```
basisNames = fieldnames(Basis);
for i = 1:size(fieldnames(Basis),1)
    field = fieldnames(Basis.(basisNames{i}));
    field = cell2mat(field(~cellfun('isempty',strfind(field,'AssetClassID'))));
    for j = 1:size(field,1)
        requiredSeries = [requiredSeries;unique(Basis.(basisNames{i}).(a(1,:)))];
    end
    requiredSeries = unique(requiredSeries)
end 
```

我之前错过了一个必要的 cell2mat，导致无法让它流血地工作。无论如何，我总是希望听到对此的改进，但否则你会完全忽略这一点:)

# asp.net-mvc - 最新消息，ObjectContext 实例已被释放

> ID：10108586
> 
> 赞同：0
> 
> 时间：2012-04-11T14:59:12.993
> 
> 标签：asp.net-mvc, objectcontext

我正在尝试从我的数据库中获取最新消息，但我不断收到此错误：`The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.`错误发生在 NewsEntity.GetObject() 方法上。我尝试添加 ToList，启用 LazyLoading，重新排序我创建对象集的方式。我已经删除了作者和图标的加载并且有效，但我需要它们:) 感谢您的帮助。

这是我的 NewsEntity 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Web.Repository.Entity
{
    public class NewsEntity : BaseEntity<News>
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string Summary { get; set; }
        public string Content { get; set; }
        public int Icon { get; set; }
        public DateTime Posted { get; set; }
        public int Author { get; set; }
        public bool Deleted { get; set; }

        public virtual MemberEntity AuthorEntity { get; set; }
        public virtual IconEntity IconEntity { get; set; }

        public override News GetObject()
        {
            return new News
            {
                Id = Id,
                Title = Title,
                Summary = Summary,
                Content = Content,
                IconId = Icon,
                Icon = IconEntity.GetObject(),
                Posted = Posted,
                AuthorId = Author,
                Author = AuthorEntity.GetObject(),
                Deleted = Deleted
            };
        }
    }
} 
```

这是我的 NewsObject 类（用于数据传输）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Web.Repository.Entity
{
    public class News : BaseObject
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string Summary { get; set; }
        public string Content { get; set; }
        public int IconId { get; set; }
        public DateTime Posted { get; set; }
        public int AuthorId { get; set; }
        public bool Deleted { get; set; }

        public Member Author { get; set; }
        public Icon Icon { get; set; }
    }
} 
```

这是我的数据库上下文类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Objects;
using Web.Repository.Entity;

namespace Web.Repository
{
    public class WebModelContext : ObjectContext
    {

        private IObjectSet<MemberEntity> _members;
        private IObjectSet<IconEntity> _icons;
        private IObjectSet<NewsEntity> _news;

        public WebModelContext()
            : base("name=WebRepository", "WebRepository")
        {
            ContextOptions.LazyLoadingEnabled = true;

            _members = CreateObjectSet<MemberEntity>();
            _icons = CreateObjectSet<IconEntity>();
            _news = CreateObjectSet<NewsEntity>();
        }

        public IObjectSet<MemberEntity> Members
        {
            get { return _members; }
        }

        public IObjectSet<IconEntity> Icons
        {
            get { return _icons; }
        }

        public IObjectSet<NewsEntity> News
        {
            get { return _news; }
        }
} 
```

}

这是我的 NewsRepository 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Web.Repository.Entity;

namespace Web.Repository
{
    public class NewsRepository : IDisposable
    {
        private WebModelContext _context;
        private WebModelContext Context
        {
            get
            {
                if (_context == null)
                    _context = new WebModelContext();
                return _context;
            }
        }

        public NewsRepository() { }

        public IEnumerable<News> GetLatestNews()
        {
            return Context.News.Where(news => !news.Deleted).OrderByDescending(news => news.Posted).Take(5).ToList().Select(news => news.GetObject());
        }

        #region Disposing
        private bool disposed;

        protected virtual void Dispose(bool disposing)
        {
            if (!this.disposed)
            {
                if (disposing && _context != null)
                {
                    _context.Dispose();
                }
            }
            this.disposed = true;
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }
        #endregion

    }
} 
```

这是我获取最新消息的班级：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Web.Repository.Entity;
using Web.Repository;

namespace Web.Infrastructure
{
    public static class NewsHelper
    {
        public static IEnumerable<News> GetLatestNews()
        {
            IEnumerable<News> news;
            using (var repository = new NewsRepository())
            {
                news = repository.GetLatestNews();
            }
            return news;
        }
    }
} 
```

这是我的控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Web.Repository.Entity;
using Web.Models;
using Web.Infrastructure;

namespace Web.Controllers
{
    public class HomeController : BaseController
    {
        public ActionResult Index()
        {
            NewsListModel model = new NewsListModel { News = NewsHelper.GetLatestNews().ToList() };
            return View(model);
        }
    }
} 
```

最后这是我的模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Web.Repository.Entity;

namespace Web.Models
{
    public class NewsListModel
    {
        public IEnumerable<News> News { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:38:08.833

我通过确保最新消息实际上是列表而不是集合/可查询来解决此问题

# c# - C#：从文本框转换（识别）数学公式

> ID：10108590
> 
> 赞同：2
> 
> 时间：2012-04-11T14:59:30.677
> 
> 标签：c#, function, math, textbox

我有个问题。例如，在我的应用程序中，我想使用在文本框中键入的函数（比如说`f(x)`，`x`变量在哪里）`sin(x) + x*x - 5`。

我想要的是 C# 将此函数识别为`Math.Sin(x) + x*x - 5`，换句话说，要知道它`x`是变量。

我有 x 一些 2000 个数据，比如说`xi`， where `i = 2000`，所以我想要的只是`f(xi)`值，对于所有`x`数据，`f`文本框中的函数在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:05:58.257

您正在寻找的是一个表达式解析器——即将文本框中的表达式字符串转换为可以执行的东西（通常是语法树）的一段代码。

如果你用谷歌搜索“math expression parser c#”，你会发现各种各样的东西——从像这样的产品到像[这样](http://www.c-sharpcorner.com/UploadFile/patricklundin/MathExpParser12062005062213AM/MathExpParser.aspx)[的](http://www.bestcode.com/html/bcparser_net.html) 简单示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:07:38.997

您或您的用户是否可以提前定义变量名称？

例如，让用户知道他们可以使用“y”、“x”或“n”作为变量名，但不能使用其他任何东西，或者让用户在尝试解析公式之前在程序中定义变量？这将使在文本中识别它们并相应地处理它们变得容易得多。

在实际解析表达式方面，考虑将其转换为“反向波兰表示法”。这是一个示例程序： http: [//www.codeproject.com/Articles/5875/C-Expression-Parser-using-RPN](http://www.codeproject.com/Articles/5875/C-Expression-Parser-using-RPN)

# mysql - 即使由于错误导致插入失败，MySQL 自动增量值也会增加

> ID：10108593
> 
> 赞同：4
> 
> 时间：2012-04-11T14:59:36.887
> 
> 标签：mysql, sql, auto-increment

当我从用户那里接收数据时，我每次都会验证输入的格式（PHP）。我唯一无法验证（或者我不想）是约束（例如外键）违规。我让 DML 引发错误并让数据库驱动程序引发异常。捕捉到它之后，我只是通过 MySQL 的错误代码打印出一些错误消息。

问题是，即使插入失败，我看到`autoincrement`序列仍在增长，增加。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T15:26:56.957

这就是自动递增值和序列的工作方式。当一个值被使用时，如果事务失败，它不会被回收，事务被回滚。

由于您使用的是自动增量值，因此实际值无关紧要，因此除了缺少数字的美感之外，空格应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-17T10:11:30.553

我们应该在插入之前检查是否有错误，通过使用存储过程并为每个错误条件创建一个引发应用程序错误，这样当插入散文中出现错误时，我们的 auto_increment 永远不会增加。这是因为当存储过程内部发生错误时，您可以设置条件何时可以执行插入过程。当错误帐户设置信号状态 = 1 或其他东西并且当信号状态 == 1 结束时，结束存储过程并且不执行插入 stmt。它是那样的。

第二个选项是在发生错误时重置 auto_increment。

```
ALTER TABLE table_name AUTO_INCREMENT = ? 
```

但是我们需要知道 last_id 来设置 auto_increment，如果你不需要知道 last_id 值有 auto_increment 设置等于 1，MySQL 将设置下一个 auto_increment 等于记录的最大键 + 1。

假设在您的数据库中最大 id 为 7，然后您尝试插入两条新记录，但它们都返回错误，然后 auto_increment 将增加并变为 10。然后您执行**ALTER TABLE table_name AUTO_INCREMENT = 1**；auto_increment 将回到 8。

这两种方法都是在发生错误时控制 auto_increment 值的方法，当然，在应用层插入数据库之前，我们应该在验证步骤中处理它，所以当插入数据库时​​，如果我们在应用层小心处理，应该不会有任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-19T02:57:24.227

您可能必须将 innodb_autoinc_lock_mode 设置为 0 或 2。

# xml - 发送文件字节而不是 XML 字符串问题

> ID：10108594
> 
> 赞同：0
> 
> 时间：2012-04-11T14:59:37.823
> 
> 标签：xml, linux, wcf, macos, web-services

我需要使用 WCF 服务向我的一个客户端发送一个 XML 字符串。

但是，客户希望我获取我的 XML 字符串，将其放入文件中，压缩 XML 文件（即使它不是真正的大文件），然后将文件字节提取为字符串，然后使用 WCF 服务上传此字符串.

我有点担心……他不应该只要求 XML 字符串吗？除非他的带宽限制是一个问题（事实并非如此），否则所有这些处理对我来说似乎都是不必要的。

我也关心文件结构本身。所有系统都是为 Windows 环境制作的，但是如果 XML 文件是在不同的操作系统（MacOS / Linux）下创建的呢？文件字节在 Windows 操作系统下是否相同且可用？

我的担忧是否合理？有没有其他论据赞成或反对这种架构？

# jquery - 一种使用 ajax-json 请求优化多个 .each 的方法？

> ID：10108595
> 
> 赞同：0
> 
> 时间：2012-04-11T14:59:38.040
> 
> 标签：jquery, ajax, dom

我有很多图表（hightchart）要在同一个页面中生成，加载我所有的图表至少需要 5-6 秒..

网页：

```
 <div class="graph_score" title="2" >
    <div class="graph_score" title="3" >
    <div class="graph_score" title="4" >
    <div class="graph_score" title="5" >
.... 
```

我的jQuery：

```
 $(".graph_score").each(function() {
      id_graph = $(this).attr("title");

      $.getJSON('http://' + document.domain + '/school/teachers/generate_score/graph' + id_graph, function(data) {
            options = data;
            options.tooltip = {
            formatter: function() {
                var extrafield = this.series.options.extrafield;
                var extrafield2 = this.series.options.extrafield2;
                var extrafield3 = this.series.options.extrafield3;
                return '<b> Note: ' + this.y + ' % <br/>' + '<b>Nom de l\'examen:</b>' + extrafield[this.point.x - 1] + '</b><br/><b>Pondération</b>' + extrafield2[this.point.x - 1] + "<br /><b>Date</b>" + extrafield3[this.point.x - 1];
            }
            }
            chart = new Highcharts.Chart(options);
        });

    }) 
```

我可以做些什么来更快地呈现这个页面吗？

*我知道问题是我的脚本调用 8 次**http://' + document.domain + '/school/teachers/generate_score**所以它的 8 个 DOM 请求......但我不知道如何优化它......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:03:45.580

如果您认为网络传输需要很长时间，那么您可以在服务器上创建一个新函数，该函数获取 ID 列表并返回多个结果。

# php - 美德玛特 2 改变语言原生

> ID：10108598
> 
> 赞同：0
> 
> 时间：2012-04-11T14:59:41.560
> 
> 标签：php, mysql, joomla, virtuemart

[Joomla->2.3.2 Virtuemart 2.1]

大家好，我目前正在开发一个快速的网络服务网络应用程序来连接到 joomla 和美德玛特并插入一个产品。

我在多语言方面遇到困难。

我发送一个产品数组如下：

```
 $product['vmlang'] = 'en-GB';
            $product['product_name'] = 'Red shirt';
            $product['product_description'] = 'Red shirt very nice'; 
```

.....................

然后我想翻译成意大利语，所以我改变并通过：

```
 $product['vmlang'] = 'it-IT';
 $product['product_name'] = 'Maglia Rossa';
 $product['product_description'] = 'Maglia Rossa molto carina'; 
```

.....................

但它不起作用：它会覆盖表 #_virtuemart_product_en_gb 中的第一个值，而不是在 #_virtuemart_product_it_it 中插入新字段

从 joomla 面板查看工作流程，似乎首先更改了 JApplication 和 measuremart 语言，然后使用新语言执行 vmModel('product')->store()。

从后端使用 ->paste 任务调用 VirtuemartControllerTranslate，但它似乎并没有改变应用程序语言。

哪个可能是问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:57:47.403

我自己回答

您应该输入以下内容来更改语言。希望这有帮助

```
$b= VmConfig::set('vmlang','en_gb'); 
```

# visual-studio-2010 - 根据各种标准调整 Thread.Sleep

> ID：10108599
> 
> 赞同：0
> 
> 时间：2012-04-11T14:59:44.873
> 
> 标签：visual-studio-2010, progress-bar, thread-sleep

好的，下面的代码只是我如何推进进度条的一个例子。我一直在调整以下行：（`System.Threading.Thread.Sleep(100)`快速过程）或`System.Threading.Thread.Sleep(2000)`（较慢过程）。

反正有没有即时调整这个？

一些背景信息可能会有所帮助。每天，我创建的 PDF 文件从几百到几千不等。然后，所有 PDF 文件都会被压缩并通过 SFTP 传输。PDF 大小也可能不同。

显然`System.Threading.Thread.Sleep(100)`，如果我只有少量的小型 PDF 文件要处理，我的处境会比较低。

这让我回到了最初的问题，可以根据 PDF 的数量和所有 PDF 的大小即时调整睡眠数吗？

还是我需要处理一次测试运行并找到要使用的神奇数字？

```
Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Dim ZipPDFs As BackgroundWorker = CType(sender, BackgroundWorker)
    Dim i As Integer

    For i = 1 To 10
        If (ZipPDFs.CancellationPending = True) Then
            e.Cancel = True
            Exit For
        Else
            ' Perform a time consuming operation and report progress.
            System.Threading.Thread.Sleep(100)
            ZipPDFs.ReportProgress(i * 10)
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:43:53.713

你拿错例子了！那里的睡眠是为了演示一个真正耗时的操作。你需要把它拿出来，写下你需要执行的实际操作；）

# c - 我应该使用哪种类型的指针？ptrdiff_t 还是 void*？

> ID：10108605
> 
> 赞同：1
> 
> 时间：2012-04-11T15:00:12.143
> 
> 标签：c, pointers, c89

哪一行是定义指针​​的正确（最佳）方式？

```
typedef ptrdiff_t pointer; // pointers are ptrdiff_t.

          -- or --

typedef void* pointer; // pointers are void*.

pointer ptr = malloc(1024); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T15:01:42.797

C 中的指针属于类型`T*`where`T`指向的类型；`void*`是通用指针类型。通常，您让 C 隐式转换`void*`为有用的东西，例如

```
char *buffer = malloc(1024); 
```

`ptrdiff_t`是两个指针相减返回的类型，例如

```
ptrdiff_t d = write_ptr - buffer;
// now you know the write_ptr is d bytes beyond the start of the buffer 
```

`ptrdiff_t`是整数类型，不是指针类型；您不能`*`在其上使用间接运算符。（顺便说一句，你也不能在 a 上有意义地使用它`void*`。）

如果您想以整数类型存储指针，那`uintptr_t`将是合适的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:18:12.417

声明指针的*最佳*方式是

```
T *ptr; 
```

`T`指向的基本类型在哪里-- `int`, `char`, `struct foo`, 等等。 `malloc`返回 a `void *`，它被隐式转换为目标指针类型，因此以下所有内容都同样有效：

```
char *str = malloc(512);                       // allocates space for 512 chars
int *arr = malloc(sizeof *arr * 512);          // allocates space for 512 ints
struct foo *farr = malloc(sizeof *farr * 512); // allocates space for 512 struct foos
int (*arr2)[10] = malloc (sizeof *arr2 * 512); // allocates space for 512x10 ints 
```

等等等等等等。

C中没有*单*指针数据类型；有多种“指向`T`”数据类型的指针。指针运算取决于基类型；`str + 1`将产生一个不同的值`arr + 1`，这将产生一个不同的值`farr + 1`，等等。 `void *`是“通用”指针类型，但你*不想*对所有东西都使用通用指针。

Do not hide pointer types behind typedefs, *unless* the pointer type is meant to be opaque and never dereferenced, and even then it's usually a bad idea.

# php - 在 Codeigniter 中使用带有 .php 扩展名的外部 js

> ID：10108610
> 
> 赞同：2
> 
> 时间：2012-04-11T15:00:28.617
> 
> 标签：php, javascript, codeigniter, fatal-error

我正在使用 codeigniter 2，我的主题文件夹由**js**、**img**、**css**文件夹组成。

在**js**文件夹内，文件名为**js_functions.php**包含：

```
<?php header("Content-type: text/javascript"); ?>
/**
 * GLOBAL VARIABLES & PATHS
 *
 * path definitions for jquery inline usage
 *
 */     
var base_url         = '<?=base_url();?>';
// ------------------------------------------------------------------------

/**
 * jquery.message Global Implementation
 *
 * Shows message if any session flashdata named message is set
 *
 */

<?php if($this->session->flashdata('message')):?>
$(function() { $().message("<?=$this->session->flashdata('message');?>"); });
<?php endif; ?>

// ------------------------------------------------------------------------ 
```

并且，调用它**查看**文件

```
<script type="text/javascript" src="<?=base_url();?>themes/admin/js/js_functions.php"></script> 
```

正确渲染。但它会在 chrome 的检查屏幕中返回：

```
var base_url         = '<br />
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

当您从地址栏调用页面时，在浏览器中：

```
var base_url         = '<br />
<b>Fatal error</b>:  Call to undefined function base_url() in <b>F:\xampp\htdocs\themes\js\js_functions.php</b> on line <b>11</b><br /> 
```

怎么了？这不是在外部 js/php 文件中使用 php 的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:17:05.877

您需要制作一个控制器来获取脚本。可能是`js`。在您的控制器中，您设置内容类型标题并加载包含上述 javascript 的视图。假设您有一个名为的控制器`js`

```
class Js extends CI_Controller{
  public function js_functions(){
    $this->output->set_header('Content-type: text/javascript');
    $data = array( 'messages' => $this->session->flashdata('message'));
    $this->load->view('jsfunc',$data);
  }
} 
```

您可以像这样在主视图中加载脚本

```
<script src="<?php echo base_url('js/js_functions'); ?>"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:15:07.843

如果要生成动态`js`,`css`文件。使用标准的 MVC 方法。在文件夹中创建一个`view`名为 js 或 css 的文件夹。创建 js 或 css 文件作为 php 视图文件。例如：`slider.js.php`。

做一个控制器`themejs.php`。使用路由将所有 js 或 css 文件转发到您需要的控制器。在这个控制器内部进行动态操作，将变量传递给 js、css 视图文件。并用标题打印它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:40:33.200

`base_url()`是 CI url helper 的一个功能部分。如果您想在该文件中使用它并且不想创建 $CI 对象的实例，则必须实现您自己的该函数版本。

# synchronization - 测量单向数据包延迟：需要任何同步吗？

> ID：10108611
> 
> 赞同：1
> 
> 时间：2012-04-11T15:00:31.973
> 
> 标签：synchronization, delay, packet

我有一台机器以恒定的速率（每 x 毫秒一个）向另一台机器发送数据包。我需要测量每个数据包的单向延迟。一个想法可能是第一台机器记录它发送第一个数据包的时刻，一旦所有传输完成，让第二台机器知道它，这样它就可以从该值开始计算每个数据包的延迟。

我需要在这里进行任何特定的同步吗？我不知道这是否会对我的测量产生相当大的误差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:16:23.960

1.  向目的地发送 10k 个单向数据包。
2.  向目的地发送“完成”消息
3.  目的地回复“全部收到”
4.  收到回复后，您知道需要多长时间

由于需要确认信息，您在测量中会有一个微小的系统误差，但这会很小。有了现实世界的延迟，它完全可以工作。计算出的延迟为：`(a*10000+a+b)/(10000+1+1)`. 因为`a`~`b`这个词变成了just `a`。

或者，紧密同步时钟（困难）并发送时间戳。

# html - 高分辨率图像 IE 浏览器渲染

> ID：10108615
> 
> 赞同：6
> 
> 时间：2012-04-11T15:00:43.237
> 
> 标签：html, css, image, resize, image-size

我正在为这些更高分辨率的显示器（尤其是新 iPad）优化我的网站。我已经按照我想要的方式格式化了网站，我只是增加了每个图像的分辨率，但仍将其限制为我目前拥有的 DIV。例如，我有一个分辨率为 483x246 的图像，我让它适合设置大小为 188x96 的 DIV。

这些图像在 Chrome、Firefox 上看起来很棒，最重要的是在新 iPad 上。即使放大它也很漂亮和清晰（与我的旧 188x96 图像在放大时看起来模糊和像素化相反）

当我在 IE 中打开页面时，问题就出现了。它以正确的大小显示图像，但呈锯齿状。请参阅下面的比较链接。我知道这是 IE 动态调整大小和渲染图片的方式的问题。

我的问题是，有没有办法让 IE 很好地显示图片？如果没有，有没有办法可以输入代码，以便如果它检测到 IE，它会显示我的旧低分辨率图像？我到处寻找，但没有发现任何与我的具体问题有关的东西。我知道这是一个小例子，但我更大的图像做同样的事情并且更引人注目。希望大家能帮忙。谢谢。:)

比较： ![在此处输入图像描述](../Images/d0aba56cf47d4e5138977937b337c5f2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:08:18.573

Have you tried putting this in your CSS?

img { -ms-interpolation-mode: bicubic; }

There's also this [https://github.com/adamdbradley/foresight.js](https://github.com/adamdbradley/foresight.js) which looks very interesting

Make sure IE9 isn't in compatibility mode or IE7/8 mode... ![IE9 Mode](../Images/56c9e83dceb074a7582c4a8e6ca8eec5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:05:44.377

发生这种情况的原因是因为位图数据实际上在 IE 浏览器中呈现完全不同，IE 所做的事情是它以设定的比例“削减”像素，所以就像每 5 个像素它拉动一个像素，因此使它看起来像它错过了某些梯度属性。

除了保持纵横比设置外，您对此无能为力，但我想您自己已经知道了

# c++ - C/C++ 中是否有任何称为“hypochecking”的术语？

> ID：10108616
> 
> 赞同：2
> 
> 时间：2012-04-11T15:00:49.310
> 
> 标签：c++, c, function, macros

我刚刚在互联网上遇到以下问题：

> 宏和函数在什么方面相关？
> 
> (a)递归
> 
> (b) 改变论点
> 
> (c) 低位检查
> 
> (d) 类型声明"

我排除了选项 d 导致宏只是进行参数替换。选项 a 不适用于宏。

我在选项 b 和 c 之间权衡。函数和宏都可以有不同数量的参数。所以我的直觉是答案是选项 b，除非有所谓的“低检”。

请你确认一下。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:46:03.700

"*在 C/C++ 中是否有任何称为“hypochecking”的术语*？

**不**

# git - 在 git bisect run 期间运行两个命令

> ID：10108619
> 
> 赞同：41
> 
> 时间：2012-04-11T15:00:56.433
> 
> 标签：git, bisect

我基本上想这样做`git bisect run 'bundle && bundle exec cucumber'`。

我想在命令行上执行此操作 - 我不想编写 shell 脚本。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-11T15:11:16.007

```
git bisect run sh -c 'bundle && bundle exec cucumber' 
```

# c# - 选择时的按钮模板样式

> ID：10108620
> 
> 赞同：0
> 
> 时间：2012-04-11T15:00:58.553
> 
> 标签：c#, wpf, mvvm

我设置了一个 mvvm 设计模式来执行命令和工作区，以便按下按钮并显示正确的工作区。这些按钮有一个模板绑定，可以根据命令为模板提取正确的图像。我在 SelectedTemplateResource 的命令中添加了另一个字段，用于从按钮数组中选择按钮时。DataTemplate 被拉入主窗口以显示按钮。

```
<DataTemplate x:Key="CommandsTemplate">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Command="{Binding Path=Command}" Content="{Binding Path=DisplayName}" Template="{Utilities:BindableResource {Binding Path=TemplateResource}}">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=Command}">
                                    <Setter Property="Template">
                                        <Setter.Value>

                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</DataTemplate> 
```

我想做的是将setter的值设置为SelectedTemplateResource，就像在名为TemplateResource的按钮的模板中一样。这些都是通过 mainwindowviewmodel 处理的，为每个按钮设置适当的模板，效果很好，但我不确定如何完成选定的状态。

此外，我不完全确定是否应该将数据触发器绑定设置为命令路径。

谁能帮我弄清楚如何使用上述设计设置按钮的选定状态？

干杯。

**编辑** 我使用了切换按钮触发器，但是绑定不起作用。这里有一些更多信息，因为出于某种原因，我在 app.xaml.cs 中不断收到 key is null 错误

ToggleButton 是名为 MainWindowResources.xaml ( **ResourceDictionary** ) 的文件中的数据模板。MainWindow.xaml 文件提取此数据模板。我有一个 bindableresource 类来帮助资源文件的静态资源。

```
public class BindableResource : StaticResourceExtension
{
    #region Fields
    private static readonly DependencyProperty dummyProperty;
    #endregion

    #region Properties
    /// <summary>
    /// Gets and sets my binding.
    /// </summary>
    public Binding MyBinding { get; set; }
    #endregion

    #region Constructor
    /// <summary>
    /// Static contruction of the dummy dependency property.
    /// </summary>
    static BindableResource()
    {
        dummyProperty = DependencyProperty.RegisterAttached("Dummy", typeof(string), typeof(DependencyObject), new UIPropertyMetadata(null));
    }

    /// <summary>
    /// Constructor.
    /// </summary>
    public BindableResource()
    {
    }

    /// <summary>
    /// Constructor with binding to set.
    /// </summary>
    /// <param name="binding"></param>
    public BindableResource(Binding binding)
    {
        MyBinding = binding;
    }
    #endregion

    #region External Members
    /// <summary>
    /// Get the resource key to bind to the resource.
    /// </summary>
    /// <param name="serviceProvider"></param>
    /// <returns></returns>
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        var target = (IProvideValueTarget)serviceProvider.GetService(typeof(IProvideValueTarget));
        var targetObject = (FrameworkElement)target.TargetObject;

        MyBinding.Source = targetObject.DataContext;
        var DummyDO = new DependencyObject();
        BindingOperations.SetBinding(DummyDO, dummyProperty, MyBinding);

        ResourceKey = DummyDO.GetValue(dummyProperty);

        return base.ProvideValue(serviceProvider);
    }
    #endregion
} 
```

但是，这不适用于触发器设置器值。

```
<DataTemplate>
                <ToggleButton Command="{Binding Path=Command}" Content="{Binding Path=DisplayName}" Template="{Utilities:BindableResource {Binding Path=TemplateResource}}">
                    <ToggleButton.Style>
                        <Style TargetType="ToggleButton">
                            <Style.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter Property="Template" Value="{Utilities:BindableResource {Binding Path=SelectedTemplateResource}}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ToggleButton.Style>
                </ToggleButton>
            </DataTemplate> 
```

有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:20:50.123

我不确定我是否完全理解你想要什么。如果选择是，您想更改按钮的模板吗？

首先，标准按钮没有“被选中”的概念。你想要一个`ToggleButton`。这样你就可以触发它的`IsChecked`属性来设置你的模板。

```
<DataTemplate x:Key="CommandsTemplate">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <ToggleButton Command="{Binding Path=Command}" Content="{Binding Path=DisplayName}" Template="{Utilities:BindableResource {Binding Path=TemplateResource}}">
                    <ToggleButton.Style>
                        <Style TargetType="ToggleButton">
                            <Style.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter Property="Template" Value="{Utilities:BindableResource {Binding DataContext.SelectedTemplateResource}}">
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </ToggleButton.Style>
                </ToggleButton>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:20:30.657

在发现在纯 xaml 中确实不可能做到这一点后，我拿出了 c# 并创建了一个自定义控件...这是非常基本的，可以改进，我将对其进行一些更改，但最终自定义控件解决了这个问题，以便您可以从资源字典中点击点击事件并即时更改模板。

```
public class TabButton : Button
{
    public static readonly DependencyProperty SelectedTemplateProperty = 
        DependencyProperty.Register("SelectedTemplate", typeof(ControlTemplate), typeof(TabButton));

    public ControlTemplate SelectedTemplate
    {
        get { return base.GetValue(SelectedTemplateProperty) as ControlTemplate; }
        set { base.SetValue(SelectedTemplateProperty, value); }
    }

    public TabButton()
    {
        this.Click += new RoutedEventHandler(TabButton_Click);
    }

    ~TabButton()
    {

    }

    public void TabButton_Click(object sender, RoutedEventArgs e)
    {
        ControlTemplate template = (ControlTemplate)this.FindResource("Environmental Template Selected");
        (sender as TabButton).Template = template;
    }
} 
```

干杯。

# c# - 需要将一列分成两列

> ID：10108623
> 
> 赞同：1
> 
> 时间：2012-04-11T15:01:06.003
> 
> 标签：c#, asp.net, sql-server, wcf

我有 WCF 服务。

我有一个字段（比如名称），现在客户想要将其更改为名字（空格前的前半部分）和姓氏（空格后的所有内容）。

此 WCF 服务正被不同的应用程序使用，我希望在不破坏任何现有客户端的情况下完成此操作。

我可以添加两个新的数据成员，即使它们在数据库中不存在？如何为这两个新数据成员设置或获取值？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:05:39.547

像这样的东西应该工作：

```
DECLARE @FullName VARCHAR(255)
SET @FullName = 'James Johnson'

SELECT SUBSTRING(@FullName, 1, CHARINDEX(' ', @FullName) - 1) AS FirstName,
       SUBSTRING(@FullName, CHARINDEX(' ', @FullName) + 1, LEN(@FullName)) AS LastName 
```

上面的输出如下所示：

```
名字姓氏
------------ ----------------
约翰·多伊

```

要解析代码中的名称，下面的代码示例应该适用于名字和姓氏。如果您需要一个可以处理前缀、后缀和中间名的强大解析器，请查看[这篇文章](http://www.blackbeltcoder.com/Articles/strings/splitting-a-name-into-first-and-last-names)。

```
var names = ("James Johnson").Split(Convert.ToChar(" "));
if (names.Length > 0)  
    Response.Write(string.Format("First: {0}, Last: {1}", names[0], names[1])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:06:20.983

如果新数据成员是字符串，那么这应该没问题，旧版本的服务客户端将忽略其他数据成员。

请参阅此相关问题： [向 WCF 数据合同添加字段会破坏客户端？](https://stackoverflow.com/questions/4272478/adding-field-to-wcf-data-contract-breaks-clients)

# android - 有没有办法强制 Android 平板电脑使用 layout-hdpi 而不是 layout-xlarge？

> ID：10108624
> 
> 赞同：1
> 
> 时间：2012-04-11T15:01:09.163
> 
> 标签：android, android-layout

我不确定我是否遗漏了什么，并且有一种简单的方法可以做到这一点。我可以删除我的 layout-xlarge 文件夹，它会自动使用 layout-hdpi 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:29:02.110

使用一个名为“布局”的文件夹。CommonsWare 是完全正确的。您应该使用相对定位。不要为一个特定的屏幕设计。

# wcf - 活动目录和 Windows 电话 7

> ID：10108627
> 
> 赞同：0
> 
> 时间：2012-04-11T15:01:13.797
> 
> 标签：wcf, windows-phone-7, active-directory

我正在开发一个应用程序，用户可以通过 Active Directory 进行连接。我搜索但显然我必须使用网络服务。这不是问题，因为将来来自不同活动目录的用户将使用此应用程序（如果域列表在 web 服务上，我将不必更新 windows phone 应用程序）所以我必须实现一种通用方式，通过 WCF 与 Active Directory 连接。是否可以实现在 WCF 上使用 Active Directory 的通用方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:08:45.533

假设您正在谈论用户身份验证，您可能需要阅读以下两篇文章：

*   [WCF 中的身份验证、授权和身份](http://msdn.microsoft.com/en-us/library/ff647503.aspx)
*   [在身份解决方案中使用 Active Directory 联合服务 2.0](http://msdn.microsoft.com/en-us/magazine/ee335705.aspx)

# c# - 转换或计算包含括号的公式

> ID：10108629
> 
> 赞同：0
> 
> 时间：2012-04-11T15:01:15.763
> 
> 标签：c#, parentheses

我需要找到一种方法来处理公式（仅使用数字、字母和括号），例如，对于这个输入：' `5(2(a)sz)`'输出应该是：' `aaszaaszaaszaaszaasz`'我以这种方式尝试过：

```
string AddChainDeleteBracks(int open, int close, string input)
    {
        string to="",from="";
        //get the local chain multipule the number in input[open-1]

        //the number of the times the chain should be multiplied
        for (int i = input[open - 1]; i > 0; i--)
        {
            //the content
            for (int m = open + 1; m < close; m++)
            {
                to = to + input[m];
            }
        }

        //get the chain i want to replace with "to"
        for (int j = open - 1; j <= close; j++)
        {
            from = from + input[j];
        }
        String output = input.Replace(from, to);
        return output;
    } 
```

但它不起作用。你有更好的主意来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:09:13.457

You could store the opening parenthesis positions along with the number associated with that parenthesis in a stack (Last-in-First-out, e.g. [System.Collections.Generic.Stack](http://msdn.microsoft.com/en-us/library/3278tedw.aspx)); then when you encounter the first (that is: next) closing parenthesis, pop the top of the stack: this will give you the beginning and ending position of the substring between the (so far most inner) parentheses you need to repeat. Then replace this portion of the original string (including the repetion number) with the repeated string. Continue until you reach the end of the string.

Things to be aware of:

*   when you do the replacement, you will need to update your current position so it now points to the end of the repetiotion string in the new (modified) string
*   depending whether 0 repetion is allowed, you might need to handle an empty repetition -- that is an empty string
*   when you reach the end of the string, the stack should be empty (all opening parentheses were matched with a closing one)
*   the stack might become empty in the middle of the string -- if you encounter a closing parentheses, the input string was malformed
*   there might be a way to escape the opening/cloding parentheses, so they don't count as part of the repetition pattern -- this depends on your requirements

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:03:05.057

这是我的第二个答案。我的第一个答案是快速拍摄。在这里，我尝试通过一件一件地做事情来创建一个解析器。

为了转换表达式，您需要对其进行解析。这意味着您必须分析其语法。在分析其语法时，您也可以生成输出。

# 1 首先要做的是定义所有有效表达式的语法。

在这里，我使用 EBNF 来做到这一点。EBNF 很简单。

`{`并附`}`上重复（可能为零）。
`[`并附`]`上一个可选部分。
`|`分离备选方案。

有关 EBNF的更多详细信息，请参阅维基百科上的[Extended Backus-Naur Form (EBNF) 。](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form)（此处使用的 EBNF 变体删除了连接运算符“，”）。

我们在 EBNF 中的语法

```
表达式 = { 术语}。
术语 = [ 数字 ] 因子。
因子 = 文本 | "(" 表达式 ")" | 学期。

```

例子

```
    5(2(a)sz) => aaszaaszaaszaaszaasz
    5(2a sz) => aaszaaszaaszaaszaasz
    2 3(a 2b)c => abbabbabbabbabbabbc

```

# 2 词法分析

在分析语法之前，我们必须将整个表达式拆分为单个词汇标记（数字、运算符等）。我们使用an`enum`来表示token类型

```
private enum TokenType
{
    None,
    LPar,
    RPar,
    Number,
    Text
} 
```

以下字段用于保存令牌信息和布尔值`_error`，它告诉解析期间是否发生错误。

```
private IEnumerator<Match> _matches;
TokenType _tokenType;
string _text;
int _number;
bool _error; 
```

该方法`ConvertExpression`开始转换。它将表达式拆分为表示为的单个标记`Regex.Matches`。这些被方法使用`GetToken`，然后将其转换`Regex.Matches`为更有用的信息。此信息存储在上述字段中。

```
public string ConvertExpression(string expression)
{
    _matches = Regex.Matches(expression, @"\d+|\(|\)|[a-zA-Z]+")
        .Cast<Match>()
        .GetEnumerator();
    _error = false;
    return GetToken() ? Expression() : "";
}

private bool GetToken()
{
    _number = 0;
    _tokenType = TokenType.None;
    _text = null;
    if (_error || !_matches.MoveNext())
        return false;

    _text = _matches.Current.Value;
    switch (_text[0]) {
        case '(':
            _tokenType = TokenType.LPar;
            break;
        case ')':
            _tokenType = TokenType.RPar;
            break;
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
            _tokenType = TokenType.Number;
            _number = Int32.Parse(_text);
            break;
        default:
            _tokenType = TokenType.Text;
            break;
    }
    return true;
} 
```

# 3 句法和语义分析

现在我们拥有了执行实际解析和表达式转换所需的一切。下面的每个方法都会分析一个 EBNF 语法生成并将转换结果作为字符串返回。将 EBNF 转换为 C# 代码非常简单。语法中的重复将转换为 C# 循环语句。选项转换为`if`语句，备选方案转换为`switch`语句。

```
// Expression = { Term }.
private string Expression()
{
    string s = "";
    do {
        s += Term();
    } while (_tokenType != TokenType.RPar && _tokenType != TokenType.None);
    return s;
}

// Term = [ Number ] Factor.
private string Term()
{
    int n;
    if (_tokenType == TokenType.Number) {
        n = _number;
        if (!GetToken()) {
            _error = true;
            return " Error: Factor expected.";
        }

        string factor = Factor();
        if (_error) {
            return factor;
        }
        var sb = new StringBuilder(n * factor.Length);
        for (int i = 0; i < n; i++) {
            sb.Append(factor);
        }
        return sb.ToString();
    }
    return Factor();
}

// Factor = Text | "(" Expression ")" | Term.
private string Factor()
{
    switch (_tokenType) {
        case TokenType.None:
            _error = true;
            return " Error: Unexpected end of Expression.";
        case TokenType.LPar:
            if (GetToken()) {
                string s = Expression();
                if (_tokenType == TokenType.RPar) {
                    GetToken();
                    return s;
                } else {
                    _error = true;
                    return s + " Error ')' expected.";
                }
            } else {
                _error = true;
                return " Error: Unexpected end of Expression.";
            }
        case TokenType.RPar:
            _error = true;
            GetToken();
            return " Error: Unexpected ')'.";
        case TokenType.Text:
            string t = _text;
            GetToken();
            return t;
        default:
            return Term();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:35:09.010

由于表达式的语法是递归的，我建议使用递归方法。

首先将表达式拆分为单个标记。我曾经`Regex`这样做并删除空条目。

示例：`"5(2(a)sz)"`被拆分为`"5", "(", "2", "(", "a", ")", "sz", ")"`

使用 Enumerator 可以让您一一获取令牌。`tokens.MoveNext()`获得下一个令牌。`tokens.Current`是当前令牌。

```
public string ConvertExpression(string expression)
{
    IEnumerator<string> tokens = Regex.Split(expression, @"\b")
                    .Where(s => s != "")
                    .GetEnumerator();
    if (tokens.MoveNext()) {
        return Parse(tokens);
    }
    return "";
} 
```

这里主要的工作是以递归的方式完成的

```
private string Parse(IEnumerator<string> tokens)
{
    string s = "";
    while (tokens.Current != ")") {
        int n;
        if (tokens.Current == "(") {
            if (tokens.MoveNext()) {
                s += Parse(tokens);
                if (tokens.Current == ")") {
                    tokens.MoveNext();
                    return s;
                }
            }
        } else if (Int32.TryParse(tokens.Current, out n)) {
            if (tokens.MoveNext()) {
                string subExpr = Parse(tokens);
                var sb = new StringBuilder();
                for (int i = 0; i < n; i++) {
                    sb.Append(subExpr);
                }
                s += sb.ToString();
            }
        } else {
            s += tokens.Current;
            if (!tokens.MoveNext())
                return s;
        }
    }
    return s;
} 
```

# java - 如何模拟数据库失败以在 Java 中测试两阶段提交

> ID：10108630
> 
> 赞同：13
> 
> 时间：2012-04-11T15:01:17.157
> 
> 标签：java, database, transactions, websphere, 2phase-commit

我正在实施涉及分布式资源的两阶段提交。如何模拟参与数据库的故障？拔网线不起作用，因为它会导致表死锁。我目前在我的应用程序代码中使用钩子，这些钩子在`StaleConnectionException`查询执行之前和查询执行之后抛出不同的点。我对这种方法的担忧是：

*   有没有更好的方法来模拟数据库故障？
*   当 DB 连接变坏时，连接对象会发生什么？它是保留其价值还是变为空？
*   当应用程序尝试重新连接到数据库时实际发生了什么？连接对象得到什么值？它是否使用连接池中的现有值？

我还想在查询执行期间、提交期间（发送*准备*后等）等中间点进行测试。现在我将应用程序置于调试模式并进入函数调用并在两者之间插入插件。但这种方法是手动的，不适用于规模测试。

有没有模拟器/模拟器或工具可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T06:43:12.213

这是很多问题:) 我将尝试完成以前的答案。

> ```
> Is there a better way to simulate the DB failure? 
> ```

测试所有情况很复杂。测试主要案例的一种方法是创建一个 JCA 连接器（数据库驱动程序*是*一个 JCA 连接器）。您可以从将在事务中登记的连接器（第三个参与者）获取连接。然后连接可能会引发某些错误。

三个部分协同工作：(1) 应用程序，(2) 应用程序。服务器的事务管理器，以及 (3) jca 连接器（所谓的资源适配器）。

![三部分之间的通信](../Images/2500176d1eb74bb5dcc53b859f1b7e52.png)

连接通过 将自身挂钩到事务中`ManagedConnection.getXAResource`。使用自定义 jca 连接器，您可以向应用程序（`Connection`在图片中）或应用程序服务器的事务管理器（`XAResource`通过`ManagedConnection`图片中获得）引发异常。`XAResource.prepare`您可以在和期间抛出异常`XAResource.commit`，这对应于2 阶段提交 *期间的错误。*

请注意，很难控制参与者的入伍顺序（请参阅[此问题](https://stackoverflow.com/questions/2418292/delivery-of-jms-message-before-the-transaction-is-committed)）。所以很容易测试其中一个`prepare`失败（即你的失败），但很难控制它们被调用的顺序。重现 2 阶段提交的所有可能的无效状态是复杂的，尤其是在进行优化时。

（我曾经写过一个 JCA 连接器（[http://code.google.com/p/txfs](http://code.google.com/p/txfs)），如果你想要示例代码，周围还有其他的。）

> ```
> What happens to the connection object when DB connection goes bad? 
> Does it retain its value or does it become null? 
> ```

`ManagedConnection`可以通知事务管理器。其中一个通知是`ConnectionEvent.CONNECTION_ERROR_OCCURRED`通知它在使用此特定连接时发生错误。

如其他答案所述，通常每个事务关联一个托管连接。托管连接抽象了物理连接，你不想用太多。该应用程序仅获得“句柄”（`Connection`在图片中）。在一个给定事务中获得的句柄都指向同一个托管连接。这是大多数应用服务器支持的优化。

如果托管连接无效，则使用它的句柄也会无效。但是手柄不能“刷新”AFAIK。事务必须回滚，托管连接被破坏。当另一个事务启动时，它将与池中的另一个有效托管连接相关联。

> ```
> What actually happens when application tries to reconnect to DB?
> What value does connection object get?
> Does it use an existing value from the connection pool? 
> ```

应用服务器管理一个托管连接池。如上一段所述，使用时可能会变坏。但是一个人也可能在没有被使用的情况下变坏。例如，池中已使用的托管连接可能会因为底层物理连接超时而变得无效。应用服务器通常具有在开始使用托管连接之前测试托管连接是否有效的功能。如果不是，它将尝试从池中创建另一个托管连接，或者创建一个新连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T19:10:52.310

Andrej 回答了问题的一部分，所以让我回答第二部分。

您在应用程序中获得的 Connection 对象只是物理连接的包装器。该包装器在连接池和事务管理中发挥作用。如果数据库出现任何问题，连接包装器将无法使用，您只能回滚。这是有道理的，因为您只能在 2PC 启动之前访问连接，并且在 2PC 启动之前所做的任何事情都无法恢复。

请注意，尝试释放连接并获取新连接不会改变任何事情，因为一旦在事务中使用了来自给定数据源的连接，只要您在该数据源中，您将始终从该数据源获得相同的连接同一笔交易。这意味着您的应用程序无法在不重新启动整个事务的情况下“重新连接”。

另一方面，如果在所有资源都准备好之后但在所有资源提交之前出现问题，则事务管理器有责任恢复事务。但这发生在幕后，您的应用程序无法控制。同样在这一点上，您的应用程序应该已经释放了该事务中使用的所有连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:19:01.023

可能您可以添加自己的资源来参与提交并在第一阶段之后暂停事务。与此同时，您可以“拔掉插头”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T19:27:40.313

您最好的选择可能是在内存数据库中使用。调用失败并检查前后数据源的状态，以确保回滚/提交正确执行。

至于您的其他问题，这些似乎是极高成本/低回报的测试。阅读您的供应商文档并确保您的事务环境配置正确。完成此操作后，您可能应该将其自动化，以便放手。

除非您编写自己的 2PC 协议特定事务管理器 + DB 实现，否则我会将这些功能的测试留给您的供应商。

# android - TextToSpeech：服务没有启动？

> ID：10108631
> 
> 赞同：0
> 
> 时间：2012-04-11T15:01:19.110
> 
> 标签：android, text-to-speech

嘿，我正在创建具有 TextToSpeech 功能的应用程序。我编写代码并运行，但没有生成任何
语音。logcat 中显示一些错误。这是logcat

```
04-11 20:21:30.099: VERBOSE/TtsService(481): TtsService.setLanguage(eng, USA, )
04-11 20:21:30.109: INFO/TextToSpeech.java - speak(849): speak text of length 41
04-11 20:21:30.109: ERROR/TextToSpeech.java - speak(849): service isn't started 
```

我不明白如何解决这个问题......这是我的完整代码。

```
public class ExamAppearingActivity extends Activity implements OnInitListener 
{
 private int MY_DATA_CHECK_CODE = 0;    
 private TextToSpeech tts;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.examquestionscreen);
            if (isVoiceEnabled==1)
        {

            tts = new TextToSpeech(this, this);

            final List<ObjectiveWiseQuestion> QuestionWiseProfile1= db.getOneQuestion(examId);       

            for (final ObjectiveWiseQuestion cn : QuestionWiseProfile1)
            {   
                Intent checkIntent = new Intent();
                checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
                startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

                db=new MySQLiteHelper(getBaseContext());
                db.getWritableDatabase();    
                counter=cn.getCounter();

                String question="Question is "+cn.getQuestion();
                String option1="Option A is "+cn.getOptionA();
                String option2="Option B is "+cn.getOptionB();
                String option3="Option C is "+cn.getOptionC();
                String option4="Option D is "+cn.getOptionD();
                tts.speak(question, TextToSpeech.QUEUE_ADD, null);
                tts.speak(option1, TextToSpeech.QUEUE_ADD, null);
                tts.speak(option2, TextToSpeech.QUEUE_ADD, null);
                tts.speak(option3, TextToSpeech.QUEUE_ADD, null);
                tts.speak(option4, TextToSpeech.QUEUE_ADD, null);
              }
       }
   }

 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // success, create the TTS instance
                tts = new TextToSpeech(this, this);

            } 
            else {
                // missing data, install it
                Intent installIntent = new Intent();
                installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);

               //tts.isLanguageAvailable(Locale.INDIA_HINDI);
                startActivity(installIntent);

            }
        }

    }

    @Override
    public void onInit(int status) 
    {        
        if (status == TextToSpeech.SUCCESS) 
        {
            // tts.setLanguage(Locale.US);

            Locale loc = new Locale ("hi_IN");
            tts.setLanguage(loc);

            Toast.makeText(ExamAppearingActivity.this,"Text-To-Speech engine is initialized", Toast.LENGTH_LONG).show();
        }
        else if (status == TextToSpeech.ERROR) 
        {
            Toast.makeText(ExamAppearingActivity.this, "Error occurred while initializing Text-To-Speech engine", Toast.LENGTH_LONG).show();
        }

    } 
```

此代码仅在我在按钮单击时添加它时运行，但我需要从
onCreate() 方法启动它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:42:36.547

在被调用`tts`之前你不能使用。`onInit`

目前，您创建它并尝试在`onCreate`方法中使用它，但到那时它还没有完成初始化。

您还创建了`tts`两次。in`onActivityResult`最有意义，因为您首先要检查它是否存在。我会在 中摆脱创作`onCreate`，并将所有实际的演讲放入`onInit`.

# php - 爬取网站，获取链接，使用 PHP 和 XPATH 爬取链接

> ID：10108634
> 
> 赞同：7
> 
> 时间：2012-04-11T15:01:26.367
> 
> 标签：php, xpath, hyperlink, web-crawler

我想爬取整个网站，我已经阅读了几个线程，但我无法设法获取第二级数据。

也就是说，我可以从起始页面返回链接，但是我找不到解析链接并获取每个链接内容的方法......

我使用的代码是：

```
<?php

    //  SELECT STARTING PAGE
      $url = 'http://mydomain.com/';
      $html= file_get_contents($url);

     // GET ALL THE LINKS OF EACH PAGE

         // create a dom object

            $dom = new DOMDocument();
            @$dom->loadHTML($html);

         // run xpath for the dom

            $xPath = new DOMXPath($dom);

         // get links from starting page

            $elements = $xPath->query("//a/@href");
            foreach ($elements as $e) {
            echo $e->nodeValue. "<br />";
            }

     // Parse each page using the extracted links?

 ?> 
```

有人可以举个例子帮助我完成最后一部分吗？

我将非常感激！

* * *

好吧，谢谢你的回答！我尝试了一些东西，但我还没有得到任何结果 - 我是编程新手..

下面，您可以找到我的 2 次尝试——第一次尝试解析链接，第二次尝试用 Curl 替换 file_get 内容：

```
 1) 

<?php 
  //  GET STARTING PAGE
  $url = 'http://www.capoeira.com.gr/';
  $html= file_get_contents($url);

  //GET ALL THE LINKS FROM STARTING PAGE

  // create a dom object

    $dom = new DOMDocument();
    @$dom->loadHTML($html);

    // run xpath for the dom

    $xPath = new DOMXPath($dom);

        // get specific elements from the sites

        $elements = $xPath->query("//a/@href");
//PARSE EACH LINK

    foreach($elements as $e) {
          $URLS= file_get_contents($e);
          $dom = new DOMDocument();
          @$dom->loadHTML($html);
          $xPath = new DOMXPath($dom);
          $output = $xPath->query("//div[@class='content-entry clearfix']");
         echo $output ->nodeValue;
        }                           
         ?> 
```

对于上面的代码，我得到警告：file_get_contents() 期望参数 1 是字符串，对象在第 26 行的 ../example.php 中给出

2)

```
 <?php
          $curl = curl_init();
          curl_setopt($curl, CURLOPT_POST, 1);
          curl_setopt($curl, CURLOPT_URL, "http://capoeira.com.gr");
          curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
          $content= curl_exec($curl);
          curl_close($curl);    

          $dom = new DOMDocument();
          @$dom->loadHTML($content);

           $xPath = new DOMXPath($dom);
           $elements = $xPath->query("//a/@href");
            foreach ($elements as $e) {
            echo $e->nodeValue. "<br />";
            }

   ?> 
```

我没有得到任何结果。我试图回显 $content 然后我得到：

您无权访问此服务器上的 /。

此外，在尝试使用 ErrorDocument 处理请求时遇到 413 Request Entity Too Large 错误...

请问有什么想法吗？？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:58:35.477

您可以尝试以下方法。有关更多详细信息，请参阅[此线程](https://stackoverflow.com/questions/2313107/how-do-i-make-a-simple-crawler-in-php)

```
<?php
//set_time_limit (0);
function crawl_page($url, $depth = 5){
$seen = array();
if(($depth == 0) or (in_array($url, $seen))){
    return;
}   
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$result = curl_exec ($ch);
curl_close ($ch);
if( $result ){
    $stripped_file = strip_tags($result, "<a>");
    preg_match_all("/<a[\s]+[^>]*?href[\s]?=[\s\"\']+"."(.*?)[\"\']+.*?>"."([^<]+|.*?)?<\/a>/", $stripped_file, $matches, PREG_SET_ORDER ); 
    foreach($matches as $match){
        $href = $match[1];
            if (0 !== strpos($href, 'http')) {
                $path = '/' . ltrim($href, '/');
                if (extension_loaded('http')) {
                    $href = http_build_url($href , array('path' => $path));
                } else {
                    $parts = parse_url($href);
                    $href = $parts['scheme'] . '://';
                    if (isset($parts['user']) && isset($parts['pass'])) {
                        $href .= $parts['user'] . ':' . $parts['pass'] . '@';
                    }
                    $href .= $parts['host'];
                    if (isset($parts['port'])) {
                        $href .= ':' . $parts['port'];
                    }
                    $href .= $path;
                }
            }
            crawl_page($href, $depth - 1);
        }
}   
echo "Crawled {$href}";
}   
crawl_page("http://www.sitename.com/",3);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T20:05:17.417

```
$doc = new DOMDocument; 
$doc->load('file.htm'); 

$items = $doc->getElementsByTagName('a'); 

foreach($items as $value) { 
    echo $value->nodeValue . "\n"; 
    $attrs = $value->attributes; 
    echo $attrs->getNamedItem('href')->nodeValue . "\n"; 
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-19T11:39:51.367

深度递归地从网站中查找链接

```
<?php

$depth = 1;

print_r(getList($depth));  

function getList($depth)  
{
    $lists = getDepth($depth);
    return $lists; 
 }

function getUrl($request_url)
{
    $countValid = 0;
    $brokenCount =0;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $request_url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // We want to get the respone
    $result = curl_exec($ch);
    $regex = '|<a.*?href="(.*?)"|';
    preg_match_all($regex, $result, $parts);
    $links = $parts[1];
    $lists = array();
    foreach ($links as $link)
    {
        $url = htmlentities($link);
        $result =getFlag($url);
        if($result == true)
        {
            $UrlLists["clean"][$countValid] =$url;
            $countValid++; 
        } 
        else
        {
            $UrlLists["broken"][$brokenCount]= "broken->".$url;
            $brokenCount++;
        }  

    }
    curl_close($ch);
    return $UrlLists;
}
function ZeroDepth($list)
{
    $request_url = $list;
    $listss["0"]["0"] = getUrl($request_url);
    $lists["0"]["0"]["clean"] = array_unique($listss["0"]["0"]["clean"]);
    $lists["0"]["0"]["broken"] = array_unique($listss["0"]["0"]["broken"]);
    return $lists; 
}

function getDepth($depth)
{        
   // $list =OW_URL_HOME;
    $list = "https://example.com";//enter the url of website 
    $lists =ZeroDepth($list);
    for($i=1;$i<=$depth;$i++)
    {
        $l= $i;
        $l= $l-1;
        $depthArray=1;
        foreach($lists[$l][$l]["clean"] as $depthUrl)
        { 
            $request_url = $depthUrl;
            $lists[$i][$depthArray]["requst_url"]=$request_url;
            $lists[$i][$depthArray] = getUrl($request_url);

        }  

    }
    return $lists;   
}

function getFlag($url) 
{
    $url_response = array();
    $curl = curl_init();
    $curl_options = array();
    $curl_options[CURLOPT_RETURNTRANSFER] = true;
    $curl_options[CURLOPT_URL] = $url;
    $curl_options[CURLOPT_NOBODY] = true;
    $curl_options[CURLOPT_TIMEOUT] = 60;
    curl_setopt_array($curl, $curl_options);
    curl_exec($curl);
    $status = curl_getinfo($curl, CURLINFO_HTTP_CODE);
    if ($status == 200) 
    { 
        return true;
    } 
    else 
    {
        return false;
    }
    curl_close($curl);
}
?>` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T08:02:08.147

请检查下面的代码，希望对您有所帮助。

```
<?php
$html = new DOMDocument();
@$html->loadHtmlFile('http://www.yourdomain.com');
$xpath = new DOMXPath( $html );
$nodelist = $xpath->query( "//div[@class='A-CLASS-Name']/h3/a/@href" );
foreach ($nodelist as $n){
    echo $n->nodeValue."\n<br>";
}
?> 
```

谢谢，罗杰

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T12:40:49.003

```
<?php
$path='http://www.hscripts.com/';
$html = file_get_contents($path);
$dom = new DOMDocument();
@$dom->loadHTML($html);
// grab all the on the page
$xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a");
for ($i = 0; $i < $hrefs->length; $i++ ) {
$href = $hrefs->item($i);
$url = $href->getAttribute('href');
echo $url.'<br />';
}
?> 
```

您可以使用上面的代码来获取所有可能的链接

# excel - 工作表上的vbscript，excel 8.0密码

> ID：10108638
> 
> 赞同：2
> 
> 时间：2012-04-11T15:01:38.577
> 
> 标签：excel, vbscript, scheduled-tasks

我用谷歌搜索没有太多运气。基本上每次创建一个 excel 电子表格（基于模板），都需要密码保护。这可以做到吗？

```
'______________________CreateExcel()____________________________________

    Function CreateExcel()    
        SELECT DATA FROM SQL TABLE

If objStructure.BOF = False And objStructure.EOF = False Then
Do While objStructure.EOF = False
                    Call CreateActualExcel()      
objRsExcel.Fields("Field") = objStructure.Fields("Field")

objStructure.MoveNext
            Loop      
     End If
    End Function
'......................End CreateExcel()..................................

'______________________CreateActualExcel()________________________________

Sub CreateActualExcel()

    Dim objSFSO
    Dim strCon, strSQL

        strFile = " Staffing_List_" & Clng(Timer()) & ".xls"
    Set objSFSO = CreateObject("Scripting.FileSystemObject")

    objSFSO.CopyFile conFolder & conTemplate, conFolder & strFile
    Set objSFSO = Nothing
    Set objRsExcel = CreateObject("ADODB.RecordSet")

    strCon = _
              "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & _
              conFolder & strFile & ";" & _
              "Extended Properties=""Excel 8.0;HDR=Yes;maxscanrows=1;"";"

    strSQL = "Select * From [Sheet1$]"

    objRsExcel.Open strSql, strCon, 3, 2

End Sub

'......................End CreateActualExcel()............................ 
```

提前感谢您的帮助。

克莱尔:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:20:21.580

我认为您可以在保存文件时将密码作为附加参数传递。

excelObj.SaveAs "C:\Example.xls",,"your-password"

我没有对此进行测试，但我发现了这篇关于它的博客文章：

[http://qtp.blogspot.co.uk/2010/04/vbscript-excel-password-protect.html](http://qtp.blogspot.co.uk/2010/04/vbscript-excel-password-protect.html)

# ruby-on-rails - （Rails）是否有相当于 Twitter 的考拉？

> ID：10108642
> 
> 赞同：2
> 
> 时间：2012-04-11T15:01:42.673
> 
> 标签：ruby-on-rails, twitter, ruby-on-rails-3.1, koala

[Koala](https://github.com/arsduo/koala)提供了一种非常简单的方法，可以在 Facebook 的用户墙上发布状态更新。我想知道是否有一个 gem 可以用 Twitter 做类似的事情：换句话说，我正在寻找一个 gem，它可以让您的应用程序轻松地为用户发送推文。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:04:43.550

这是有据可查和维护的：

[https://github.com/jnunemaker/twitter](https://github.com/jnunemaker/twitter)

# android - 如何在android中存储少量数据以进行频繁查找？

> ID：10108646
> 
> 赞同：2
> 
> 时间：2012-04-11T15:01:46.673
> 
> 标签：android, storing-data

我有以下数据元组描述我的应用程序的用户：

```
(userID, name, email, contact number) 
```

我想在我的应用程序中经常访问这些数据。我的数据库中有一个联系人表，其中存储了这种类型的元组来描述**其他**联系人。我不想存储描述用户的元组的原因是因为有一个属性来标记哪些数据是“自我”似乎很浪费，而且我直接使用表来*邀请*用户，所以我不想要用户在联系人列表中查看自己！我考虑过使用共享首选项来存储“自我”，但我可能会决定在未来包含更多数据，并且从几个 key:value 查找拼凑一个元组似乎是一个非常混乱的解决方案。存储这些数据“碎片”的最佳方式是什么，以便它们易于访问且不浪费？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:06:24.337

尝试共享首选项

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:14:57.727

以下是您存储数据的选择：

[安卓数据存储](http://developer.android.com/guide/topics/data/data-storage.html)

如果您不想使用共享首选项或数据库，我会尝试使用外部文件。XML 和 JSON 文件都是可以轻松解析的不错选择。如果您尝试使用 JSON 文件，则可以在代码中使用[GSON访问它。](http://code.google.com/p/google-gson/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T15:10:12.260

另一种选择是创建一个 Application 的子类，其中包含变量的字段（和 get/set 方法）。`<application>`在清单的标签中使用此类。然后使用例如`((MyApplication)getApplicationContext()).getUserId()`

如果字段是静态的，您可能会发现它们在应用程序实例中持续存在。我还没有尝试过这个。

# c# - Pdf 与 iText 合并/重叠

> ID：10108652
> 
> 赞同：4
> 
> 时间：2012-04-11T15:01:56.337
> 
> 标签：c#, .net, pdf, itextsharp, itext

我已经将 iText 用于一些不同的实用程序，例如我们成功地合并和编辑 pdf 文件。现在我需要重叠 2 个 pdf 页面：

例如： 输入：PDF#1（1 页） PDF#2（1 页）

输出：PDF#3（1 页：这是 2 个输入页重叠的结果）

我不知道是否可以使用 iText 最新版本来做到这一点。我也在考虑使用 2 个输入 PDF 文件之一作为 PDF 输出文件的背景。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:58:42.797

这实际上很容易做到。该`PdfWriter`对象有一个调用实例方法`GetImportedPage()`，该方法返回一个`PdfImportedPage`对象。这个对象可以传递给`PdfContentByte`'s`AddTemplate()`方法。

`GetImportedPage()`接受一个`PdfReader`对象和您想要获取的页码。您可以从 a的属性`PdfContentByte`实例中获取 a 。`PdfWriter``DirectContent`

下面的代码是一个完整的工作 C# 2010 WinForms 应用程序，目标是 iTextSharp 5.1.2.0，它显示了这一切。它首先在桌面上创建两个文件，第一个文件只有纯红色背景，第二个文件只有一个段落。然后它将这两个重叠的文件合并到第三个文档中。有关其他注释，请参见代码。

```
using System;
using System.IO;
using System.Windows.Forms;
using iTextSharp.text;
using iTextSharp.text.pdf;

namespace WindowsFormsApplication1 {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e) {
            //Folder that we'll work from
            string workingFolder = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
            string pdf1 = Path.Combine(workingFolder, "pdf1.pdf");//PDF with solid red background color
            string pdf2 = Path.Combine(workingFolder, "pdf2.pdf");//PDF with text
            string pdf3 = Path.Combine(workingFolder, "pdf3.pdf");//Merged PDF

            //Create a basic PDF filled with red, nothing special
            using (FileStream fs = new FileStream(pdf1, FileMode.Create, FileAccess.Write, FileShare.None)) {
                using (Document doc = new Document(PageSize.LETTER)) {
                    using (PdfWriter writer = PdfWriter.GetInstance(doc, fs)) {
                        doc.Open();
                        PdfContentByte cb = writer.DirectContent;
                        cb.SetColorFill(BaseColor.RED);
                        cb.Rectangle(0, 0, doc.PageSize.Width, doc.PageSize.Height);
                        cb.Fill();
                        doc.Close();
                    }
                }
            }

            //Create a basic PDF with a single line of text, nothing special
            using (FileStream fs = new FileStream(pdf2, FileMode.Create, FileAccess.Write, FileShare.None)) {
                using (Document doc = new Document(PageSize.LETTER)) {
                    using (PdfWriter writer = PdfWriter.GetInstance(doc, fs)) {
                        doc.Open();
                        doc.Add(new Paragraph("This is a test"));
                        doc.Close();
                    }
                }
            }

            //Create a basic PDF
            using (FileStream fs = new FileStream(pdf3, FileMode.Create, FileAccess.Write, FileShare.None)) {
                using (Document doc = new Document(PageSize.LETTER)) {
                    using (PdfWriter writer = PdfWriter.GetInstance(doc, fs)) {
                        doc.Open();

                        //Get page 1 of the first file
                        PdfImportedPage imp1 = writer.GetImportedPage(new PdfReader(pdf1), 1);
                        //Get page 2 of the second file
                        PdfImportedPage imp2 = writer.GetImportedPage(new PdfReader(pdf2), 1);
                        //Add the first file to coordinates 0,0
                        writer.DirectContent.AddTemplate(imp1, 0, 0);
                        //Since we don't call NewPage the next call will operate on the same page
                        writer.DirectContent.AddTemplate(imp2, 0, 0);
                        doc.Close();
                    }
                }
            }

            this.Close();
        }
    }
} 
```

# ssl - 使用 PFX 文件的两种方式授权

> ID：10108654
> 
> 赞同：2
> 
> 时间：2012-04-11T15:02:04.433
> 
> 标签：ssl, certificate, mutual-authentication

我对双向身份验证有疑问。我使用 tomcat6 作为服务器，作为客户端我尝试 IE、Firefox 和我自己的 java 应用程序。

使用别人给我的 PFX 证书会出现问题。我必须将它们用作客户端证书，所以我只需将其添加到服务器上的受信任证书中，然后在浏览器中的用户证书中使用它。问题是我收到 bad_certificate 警报。

我通过为服务器和客户端生成我自己的证书并在两个密钥库等中添加受信任的公钥，成功地完成了双向 ssl...

当我查看wireshark日志时，我看到该服务器发送了良好的证书请求，但是当我使用自己生成的证书时，客户端发送了空证书（11字节长度的数据包）而不是500多个字节。

可能是什么问题？为什么客户不发送好的证书？:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:52:54.683

仔细查看您的客户端证书，特别是 X509v3 扩展“密钥使用”和“扩展密钥使用”。对于客户端身份验证，它们可能被标记为不受信任。

使用[openssl 命令行工具](http://www.madboa.com/geek/openssl/)：

```
$ openssl pkcs12 -in server-only.pfx -nokeys | openssl x509 -noout -purpose
Enter Import Password:
MAC verified OK
Certificate purposes:
SSL client : No
SSL client CA : No
SSL server : Yes
SSL server CA : No 
```

此证书仅用于服务器身份验证（普通 HTTPS）。有关详细信息，请使用 openssl x509 中的 -text 选项：

```
$ openssl pkcs12 -in server-only.pfx -nokeys | openssl x509 -noout -text
  [..snip..]
        X509v3 Key Usage: 
            Digital Signature, Key Encipherment
        X509v3 Extended Key Usage: 
            TLS Web Server Authentication
  [..snip..] 
```

如果是这种情况，您将不得不要求获取标记为客户端身份验证使用的新签名证书。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T20:11:24.277

嗯，首先要检查的是 Tomcat 是否配置正确，可以从客户端请求相关路径的证书。对于 Tomcat 6，这意味着您应该在 conf/server.xml 中配置一个连接器，如下所示：

```
&lt;Connector port="443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           keystoreFile="${user.home}/.keystore" keystorePass="password"
           truststoreFile="conf/truststore" truststorePass="password"
           clientAuth="true" sslProtocol="TLS" /&gt; 
```

truststoreFile 和 truststorePass 很重要——如果你只添加“clientAuth=true”而不包括这两个参数，你会看到各种奇怪的行为（并且没有警告你做错了什么）。truststoreFile 必须指向一个合法的 JKS 文件，该文件列出了您信任的 CA 来签署客户端证书。如果 Tomcat 配置正确，浏览器应该会向用户弹出一个对话框，内容如下：“网站需要客户端证书”以及已导入浏览器的所有证书的列表。如果您没有看到这一点，则说明您的 Tomcat 设置有问题。

听起来您已正确设置，但值得仔细检查。此外，如果您正确设置了它，如果您在 Wireshark 中跟踪按可分辨名称列出受信任 CA 的连接，您将看到“证书请求”握手消息。同样，如果您没有看到这个，请检查您的 Tomcat 设置，最重要的是检查信任库。

接下来是检查 PKCS12 文件本身。你可以这样做：

```
openssl pkcs12 -in [path-to-pkcs12-file] -nokeys | openssl x509 -noout -subject -issuer 
```

确保颁发者的专有名称与您的信任库中的trustedCaCert 条目之一匹配。使用 Java keytool 有点麻烦，但您可以使用以下命令仔细检查：

```
keytool -exportcert -keystore conf/truststore -alias [alias of trusted cert] | openssl x509 -noout -subject -inform der 
```

如果所有这些都检查了，但仍然无法正常工作，那么值得使用 openssl 的 s_client 进行故障排除，因为您通常会从中获得更多故障排除信息。为此，您必须将密钥与 PKCS12 文件中的证书分开：

```
openssl pkcs12 -in [PKCS12 file] -out [whatever].key
openssl s_client -tls1 -connect localhost:443 -cert [whatever].key -key [whatever].key 
```

（您可以对“-cert”和“-key”参数使用相同的文件，因为 openssl 足够聪明地在源文件中查找“BEGIN CERTIFICATE”和“BEGIN RSA PRIVATE KEY”分隔符）。我遇到了一个令人沮丧的客户端证书问题，直到我使用 s_client 并收到提醒说我的客户端证书已过期（未在其他任何地方记录或输出）之前我都无法弄清楚。

此外，您可能需要强烈考虑将您的配置转变为使用 Apache 而不是 Tomcat - Apache*更加*灵活，并且在 SSL 配置方面比 Tomcat 给您更多的反馈*。*

# javascript - Javascript 属性：由字符串构建

> ID：10108656
> 
> 赞同：2
> 
> 时间：2012-04-11T15:02:07.787
> 
> 标签：javascript, string, javascript-objects

我需要用字符串构建一个对象属性，但我如何使用这个字符串的值作为属性名称？

```
var x = 'a';
var y = 'b';
var xy = x + y;

var z = {
    xy: 'some text'
}; 
```

现在我可以通过`z['xy']`但不能通过`z['ab']`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:03:49.823

你正在尝试写

```
var z = {};
z[xy] = 'some text'; 
```

您不能使用对象文字来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:25:42.763

正如[@SLaks 在这里所说](https://stackoverflow.com/a/10108675/572939)- 它不可能使用对象文字......你可以使用数组：

```
var x = 'a';
var y = 'b';
var xy = x + y;

var z = [];  // define array
z[xy]='some text';​​​
alert(z['ab']); // outputs 'some text'
​ 
```

# java - JPA 2.0：一个实体独有的嵌入式对象

> ID：10108657
> 
> 赞同：0
> 
> 时间：2012-04-11T15:02:09.263
> 
> 标签：java, jpa, jpa-2.0

**JPA 2.0 中是否有可能确保嵌入对象仅嵌入一个对象，而不是多个对象？**

就我而言`Address`，我有一个可以分配给`Customer`. 我希望每个客户都使用自己的地址对象，并希望创建一个约束来确保没有两个客户共享实际相同的对象。

我的代码如下所示：

```
@Entity
public Customer {
    @Id
    @GeneratedValue
    private Long id;

    @Embedded
    private Address address;

    // ..   
}

@Embeddable
public Address {
    private String street;
    private String city;

    // ..
} 
```

目前，如果我创建两个客户并为他们分配相同的`Address`对象，然后持久化并读取它们，他们再次以相同的身份共享对象。我想禁止保存与其他客户共享地址的此类客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:09:36.620

在这种情况下，最简单的方法是`Address`在`Customer.setAddress()`.

另外，我不确定从数据库中检索时不同`Customer`的 s 是否可以共享`Address`相同的身份。也许您从会话缓存中获得了相同的对象，因为您在同一个会话中保存和读取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T14:19:01.733

@Embedded 机制的本质是嵌入类的嵌入实例永远不会在封闭类的不同实例之间共享。如果您在代码中观察到此行为，那一定是因为您在从实体管理器读取期间访问了缓存数据。因此，即使您将可嵌入类的同一实例分配给封闭类的多个实例，然后“persist()”，然后销毁实体管理器和 EntityManagerFactories，或使缓存“entityManager.getEntityManagerFactory().getCache() .evictAll()”，然后创建一个新的 EntityManager 和“find()”封闭对象，即使它们的内容相同，它们中的每一个都应该有自己的（在你的情况下）“地址”对象的实例。

JPA 规范在第 2.5 节中对嵌入式对象进行了以下说明：

> [...] 与实体实例不同，这些类的实例没有自己的持久标识。相反，它们仅作为它们所属实体的状态的一部分而存在。[...]

如果您的 JPA 实现不遵守这一点，那么它实际上并不符合 JPA 标准......

# azure - SQL Azure 意外的数据库删除/重新创建

> ID：10108659
> 
> 赞同：2
> 
> 时间：2012-04-11T15:02:15.840
> 
> 标签：azure, ef-code-first, azure-sql-database, entity-framework-migrations

几个小时以来，我一直在摸不着头脑，但似乎无法弄清楚出了什么问题。

**这是我们的项目基本设置：**

*   具有 ASP.NET 成员资格的 MVC 3.0 项目
*   实体框架 4.3，代码优先方法
*   本地环境：带有 2 个 MDF 数据库文件的本地 SQL Server（aspnet.mdf + entity.mdf）
*   服务器环境：Windows Azure + 2 个 SQL Azure 数据库（aspnet 和实体）

**这是我们所做的：**

*   创建本地和远程数据库，修改 web.config 以在调试模式下使用 SQLEXPRESS 连接字符串，在发布模式下使用 SQL Azure 连接字符串
*   创建了一个类，该类使用种子数据的方法进行`SampleData`扩展。`DropCreateDatabaseAlways<Entities>``Seed`
*   用于将数据播种`System.Data.Entity.Database.SetInitializer(new Models.SampleData());`到`Application_Start`我们的数据库中。
*   在本地运行应用程序 - 表已创建并播种，一切正常。
*   部署，运行远程应用程序 - 表已创建并播种，一切正常。
*   添加了预处理器指令，以在我们的远程 Azure 环境中的每个应用程序启动时停止破坏实体数据库：

    ```
    #if DEBUG
        System.Data.Entity.Database.SetInitializer(new Models.SampleData());
    #else
        System.Data.Entity.Database.SetInitializer<Entities>(null);
    #endif 
    ```

**这就是它变得丑陋的地方**

*   我们使用 NuGet 启用了迁移，使用`AutomaticMigrationsEnabled = true;`
*   一切都运行顺利，很好。我们让它煮了几天
*   今天，我们注意到 Azure 环境中的一个未知错误：

    *   我们有几个派生自超类的类`SuperClass`
    *   相应的实体表将所有这些对象存储在同一个`SuperClass`表中，使用鉴别器来知道在加载各种类时从哪一列提供数据
    *   虽然在今天之前加载还不错，但现在不行了。我们收到以下错误消息：

        ```
        The 'Foo' property on 'SubClass1' could not be set to a 'null' value. You must set this property to a non-null value of type 'Int32'. 
        ```

    *   快速检查后，我们的`SuperClass`表有列`Foo`和`Foo1`。足够合乎逻辑，因为`SuperClass`有 2 个子类`SubClass1`和`SubClass2`，每个子类都有一个`Foo`属性。在我们的例子中，`Foo`是 NULL 但`Foo1`有一个`int32`值。所以问题不在于数据库——相反，我们的模型和数据库之间的链接似乎已经丢失。鉴别器逻辑已损坏。
*   试图找出可能出了什么问题的迹象，我们注意到了几件事：

    *   尽管我们从未对 SQL Azure Entity 数据库执行任何迁移，但该数据库现在有一个`_MigrationHistory`表
    *   该`_MigrationHistory`表有一条记录：

        ```
        MigrationID: 201204102350574_InitialCreate
        CreatedOn: 4/10/2012 11:50:57 PM
        Model: <Binary data>
        ProductVersion: 4.3.1 
        ```

    *   查看其他表，当迁移发生时，它们中的大多数都被清空了。只有最初播种的表`SampleData`保持不变。

    *   使用 SQL Azure 管理门户签入，我们的实体数据库显示以下创建日期：2012 年 4 月 10 日 23:50:55。

**这是我们的理解**

*   出于某种原因，SQL Azure 删除并重新创建了我们的数据库
*   _MigrationHistory 表是在此过程中创建的，它注册了一个起点来测试模型以供将来迁移

**这是我们的问题**

*   谁/什么触发了数据库删除/重新创建？
*   `Application_Start`自从has以来，EF 如何重新播种我们的样本数据`System.Data.Entity.Database.SetInitializer<Entities>(null);`？

* * *

**编辑：**看看可能出了什么问题，我们注意到在这个 SQL Azure[教程](http://blogs.msdn.com/b/adonet/archive/2011/04/13/mvc-code-first-azure-part-1-local-development.aspx "教程")中我们不尊重的一件事：我们没有`PersistSecurityInfo`在创建数据库后从我们的 SQL Azure 实体数据库连接字符串中删除。不明白为什么在地球上它可能会导致问题，但仍然值得一提......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:48:35.127

没关系，找到了我们问题的原因。万一有人想知道：自从添加了预处理器指令以来，我们还没有进行任何 Azure 部署。MS 必须重新启动我们的 VM 所在的机器，并且新的 VM 使用 see data 重新创建了数据库。

经验教训：始终进行频繁的 Azure 部署。

# iphone - 可达性挂起应用程序

> ID：10108665
> 
> 赞同：0
> 
> 时间：2012-04-11T15:02:54.140
> 
> 标签：iphone, ipad, ios5, reachability

目前我正在[关注线程](https://stackoverflow.com/questions/3790957/reachability-guide-for-ios-4)以检查我的互联网是否在我的应用程序中处于活动状态，但由于给出响应需要时间，所以这将冻结我的 UI。

那么有什么方法可以在不冻结 UI（如 NSOperation）的情况下实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:21:07.187

如果互联网确实出现故障，则需要时间。这是Apple API的限制。我们必须忍受它或设置一个计时器以在 30 秒左右后取消操作。但是如果一个真正的响应，特别是通过 GPRS 需要超过 30 秒，如果你设置计时器条件，你也将取消它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:44:16.823

或者，您可以异步检查 Internet 状态并在主线程中显示 ActivityIndi​​cator 或类似内容。这意味着您将创建一个新线程，它将与您的主线程并行运行（在您的情况下，GUI 正在冻结）。

# sas - 使用 9.1.3 的 £ 值的 SAS 信息

> ID：10108666
> 
> 赞同：1
> 
> 时间：2012-04-11T15:02:55.920
> 
> 标签：sas

是否有可用于 9.1.3 版（类似于 9.2 中的 NLMNLGBP）的 SAS 信息来读取英镑值？

例如下面..

```
data;
x='£69';
y=input(x,NLMNLGBP3.);/* need 9.1.3 equivalent */
put y=;
run; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:25:50.153

If you set your locale to 'English_UnitedKingdom', you can use the `NLMNYw.d` informat.

example below:

```
options locale=English_UnitedKingdom;
data _null_;
  format x y best12.;
  x=input('(£69)',nlmny32.2); /* parenthesis represents negative */
  y=input('£69',nlmny32.2);
  put x= y=;
run; 
```

/* On log */

```
x=-69 y=69 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:47:04.017

我不相信这个信息在 9.1.3 中可用（根据谷歌）

你可以试试这个：

```
data _null_;
 x='£69';
 _x=input(compress(x,'£'),8.);
 y=put(_x,NLMNLGBP.);
 put y=;
run; 
```

# uml - 在活动图中显示多个选项选择

> ID：10108671
> 
> 赞同：11
> 
> 时间：2012-04-11T15:03:39.050
> 
> 标签：uml

我有一个对话框，用户可以在其中执行类似的活动

“添加到订单” “全屏显示项目详细信息” “执行滚动”

我如何在活动图中显示此选择用户可以执行任何此任务作为可选。

我虽然使用 Fork/Join，但它不是用于并行活动，这三个似乎不是并行活动，请有人清除它:)

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-10T11:13:26.350

使用决策节点和合并节点。

![多决策](../Images/63413cfed803e1f123b9eb61166cb550.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-11T15:16:30.543

使用`Decision node`和`Merge node`。

它们等价于`if`/ `then`/ `else`(or `switch`) 语句。

对于平行活动，有`Fork`和`Join`

请参阅下面的屏幕截图（来自 VisualParadigm）

![在此处输入图像描述](../Images/9137251b941e61b0865112e8d2b15c99.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T15:03:35.433

我想在这里添加一件事，作为用户探索任何选项的可选选项，这样您就可以从合并节点回到第一个决策节点......作为用户决定是否在探索一个选项后，他想要退出或探索另一个选择

# hadoop - serde2.objectinspector 和 typeinfo 包之间的区别

> ID：10108676
> 
> 赞同：3
> 
> 时间：2012-04-11T15:03:53.120
> 
> 标签：hadoop, hive

这两个包有什么区别：

*   org.apache.hadoop.hive.serde2.objectinspector
*   org.apache.hadoop.hive.serde2.typeinfo

是一种较新的 API 吗？它们都是最新的，但在某种程度上不同吗？他们看起来和我很相似：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:44:49.663

1.  由于这两个包都在说明符 serde2 下，我认为它们都在当前使用中
2.  TypeInfo 存储一种类型的信息，每种类型都有一个对象来表示它。因此，TypeInfo 只是处理对象类型（类别、类型名称等）的只读信息
3.  Hive 对给定类型有多种内存数据格式（例如整数：整数、IntWritable 和 LazyInteger）。数据存储在对象中，格式/操作存储在对象检查器中。所以一个数据对象和objectinspector代表一个数据单元，感觉就像你可以使用objectinspector提供的信息反序列化对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T09:19:56.343

ObjectInspectors 用于序列化对象，例如假设您正在创建 JSON serde 并使用 JSON 库将 java 对象转换为 JSON，反之亦然，那么您收到的 Hive 对象是行的内部表示，这需要转换为将进一步转换为 JSON 的 java 对象。对于 Hive 到 JAVA 的转换，我们需要 objectInspectors，例如 ListObjectInspector。

同样，当您反序列化时，您将 JSON 转换为 Hive 行对象，为此我们使用 TypeInfo 类，例如 ListTypeInfo。

# html - 在 Flex 中嵌入 Google Maps API Javascript

> ID：10108677
> 
> 赞同：2
> 
> 时间：2012-04-11T15:03:54.297
> 
> 标签：html, actionscript-3, apache-flex, google-maps-api-3, dhtml

如何在我的 Flex 应用程序中嵌入 Google Maps API Javascrip？我找到了一些例子，但没有一个对我有用。

[http://javey.net/bike/map/player5/map.html?gpx=http://javey.net/bike/gpx/24-nov-2007.gpx&title=Sheldon.Road.Trail](http://javey.net/bike/map/player5/map.html?gpx=http://javey.net/bike/gpx/24-nov-2007.gpx&title=Sheldon.Road.Trail)

谁能帮我解决这个问题？我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:15:05.757

你试过什么了？你有什么代码可以给我们看吗？

您的第二个链接解释了在 Flex 中使用 HTML 包装器，这对我来说似乎是一个简单的解决方案。您可以通过在浏览器中打开它来确保 HTML 部分正常工作，以确保它正确显示和显示（通常这是真正的问题）。

您提供的链接的海报还链接到评论中的源代码：[Flex + Google Maps](http://note19.googlecode.com/svn/trunk/flex-map/)。尝试修改他们的代码副本以执行您想要的操作。或者尽可能多地删减他们的代码，同时保留你想看看他们如何做的功能，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:24:17.347

我想知道 StageWebView 是否是您所追求的？

[http://blogs.adobe.com/ria/2011/01/10/accessing-the-stagewebview-object/](http://blogs.adobe.com/ria/2011/01/10/accessing-the-stagewebview-object/)

# jquery - 使用 jQuery.getJSON 的 ShopSense API 的 apiSearch 方法

> ID：10108697
> 
> 赞同：0
> 
> 时间：2012-04-11T15:05:08.457
> 
> 标签：jquery, shopping

我正在尝试使用下面的 jQuery.getJSON 调用 ShopSense API ( [https://shopsense.shopstyle.com/shopsense/7268009frtd4rf](https://shopsense.shopstyle.com/shopsense/7268009frtd4rf) ) 的 apiSearch 方法是代码。

```
$(document).ready( function() {
$.getJSON("http://api.shopstyle.com/action/apiSearch?jsoncallback=?",
    {
        pid: "uid3489-4324817-25",
        fts:"red+dress",
        min: 0,
        count: 10,
        format : "json"
    }, function(data) {
        console.log(data);
        $.each(data.products, function(i, product) {
            alert(product.name);
        });
    });
}); 
```

它会在 chrome 中导致错误“Uncaught SyntaxError: Unexpected token :”，在 firebug 中导致“invalid label”。

显然，这似乎是解析错误，但是当我尝试使用 jQuery.parseJSON 方法解析其响应 JSON 时，解析没有问题。

请帮我解决这个问题。

**解决方案：**

最后，我通过更改查询中的几个参数来运行我的代码。

使用回调=？插入 jsoncallback=?

格式 = jsonp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:08:36.063

正确的网址是：

```
http://api.shopstyle.com/action/apiSearch 
```

不是：

```
http://api.shopstyle.com/action/apiSearch?jsoncallback=? 
```

带有 GET 值的有效 url 采用模式：

```
protocol://host/path/file.extension?var1=value1&var2=value2 ... varn=valuen 
```

你不能使用双`?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:27:15.253

最后，我通过更改查询中的几个参数来运行我的代码。

1.  使用回调=？插入 jsoncallback=?

2.  格式 = jsonp

一切正常。

```
$(document).ready( function() {
$.getJSON("http://api.shopstyle.com/action/apiSearch?callback=?",
    {
        pid: "uid3489-4324817-25",
        fts:"red+dress",
        min: 0,
        count: 20,
        format : "jsonp"
    }, function(data) {         
        $.each(data.products, function(i, product) {
            alert(product.name);
    });
}); 
```

感谢您的帮助和时间。

# java - 每次检测到某个字符串时都尝试清除 TextWatcher 并继续阅读 EditText

> ID：10108702
> 
> 赞同：0
> 
> 时间：2012-04-11T15:05:25.133
> 
> 标签：java, android, android-edittext, textwatcher

我有一个 EditText，我希望能够在其中检测用户何时输入标记的单词。当检测到这个词时，一个按钮变得可见，用户有更多的选择。我已经能够使用 TextWatcher 做到这一点。问题是，每次 Textwatcher 检测到它时，我都会存储在数组中使用的标记词。但是一旦单词在 EditText 中，之后输入的每个字符都会导致标记的单词再次输入到数组中，因为标记的单词仍在 EditText 中。我想知道，有没有办法清除 TextWatcher，这样一旦我找到一个标记的单词，它就会开始只关注我之后输入的内容？下面代码中的 word 变量是程序正在检查的标记词的存储位置。

```
 txtMessage.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            // TODO Auto-generated method stub
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

            // TODO Auto-generated method stub
        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            String tmp = s.toString().trim().toLowerCase();
            if (flagged == true) {
                CheckWords.setVisibility(0);
            }
            if (tmp.contains(word.toLowerCase())) {
                flagwordsused[i] = word;
                //txtPhoneNo.setText(""+tmp);

                i++;
                flagged = true;
            }

        }
    }); 
```

您能给我的任何帮助将不胜感激。也许有一些完全不同的方式来完成这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:35:31.187

我知道了。我只需要将 tmp 字符串分解为子字符串，然后查看标志字是否包含在其中一个子字符串中而不是整个 EditText 中。

# c++ - 错误 C2143：语法错误：缺少“；” 在“命名空间”之前

> ID：10108703
> 
> 赞同：4
> 
> 时间：2012-04-11T15:05:27.520
> 
> 标签：c++, syntax, sstream

我对 C++ 和 Open GL 非常陌生，我一直在尝试在场景中显示 3D 对象。它与一个工作正常，但是当我尝试更改我的代码以添加第二个时，我关于显示相机位置的 HUD 文本的代码开始出现错误。显示了上面的错误，它显然在 sstream 文件 (#include) 中。我曾尝试四处寻找并寻求帮助，但没有什么可以帮助/我理解的。当我注释掉#include 行和使用它的代码时，我得到类似的说法“错误C2143：语法错误：缺少';' 在我的 main.cpp 文件中“使用”之前。

我正在运行 Visual Studio 2010，我什至尝试关闭再打开整个系统，并将代码复制到一个新项目中。帮助将不胜感激。

```
#include <Windows.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include "glut.h"
#include "SceneObject.h"
#include <fstream>
#include <sstream>
#include <iostream>
#include <string>
//#include <cmath>
//#include <limits>
//#include <cstdlib>

using namespace std; 
```

...

```
stringstream ss;
ss << "Camera (" << cam.pos.x << ", " << cam.pos.y << ", " << cam.pos.z << ")";
glClear(GL_DEPTH_BUFFER_BIT);
outputText(-1.0, 0.5, ss.str()); 
```

...

```
#ifndef SCENEOBJECT_H
#define SCENEOBJECT_H
#include <string>
#include <iostream>
#include <fstream>

using namespace std;

struct point3D {
    float x;
    float y;
    float z;
};

struct colour{
    float r;
    float g;
    float b;
};

struct tri {
    int a;
    int b;
    int c;
};

class SceneObject {
private:
    int NUM_VERTS;
    int NUM_COL;
    int NUM_TRI;
    point3D  * vertices;
    colour * colours;
    tri  * indices;
    void drawTriangle(int a, int b, int c);
public:
    SceneObject(const string fName) {
        read_file(fName);
    }
    void drawShape()
    {
        // DO SOMETHING HERE
    }
    int read_file (const string fileName)
    {
    ifstream inFile;
    inFile.open(fileName);

    if (!inFile.good())
    {
        cerr  << "Can't open file" << endl;
        NUM_TRI = 0;
        return 1;
    }

    //inFile >> shapeID;

    inFile >> NUM_VERTS;
    vertices = new point3D[NUM_VERTS];

    for (int i=0; i < NUM_VERTS; i++)
    {   
        inFile >> vertices[i].x;
        inFile >> vertices[i].y;
        inFile >> vertices[i].z;
    }

    inFile >> NUM_COL;
    //inFile >> randomCol;
    colours = new colour[NUM_COL];
    /*if (randomCol == 'y')
    {
        for (int i=0; i < NUM_COL; i++)
        {
            colours[i].r = ((float) rand() / (RAND_MAX+1));
            colours[i].g = ((float) rand() / (RAND_MAX+1));
            colours[i].b = ((float) rand() / (RAND_MAX+1));
        }
    }
    else if (randomCol == 'n')
    {*/
        for (int i=0; i < NUM_COL; i++)
        {   
            inFile >> colours[i].r;
            inFile >> colours[i].g;
            inFile >> colours[i].b;
        }
    //}

    inFile >> NUM_TRI;
    indices = new tri[NUM_TRI];

    for (int i=0; i < NUM_TRI; i++)
    {   
        inFile >> indices[i].a;
        inFile >> indices[i].b;
        inFile >> indices[i].c;
    }

    inFile.close();
    return 0;
}
}
#endif 
```

我没有更改代码，据我所知，应该有分号。即使是我已经编程 5 年的朋友也无法解决这个问题。如果需要，我将包含任何其他特定代码。当我说 C++ 和 OpenGL 的新手时，我真的非常非常新。这甚至是我的第一篇文章。我最终会到达那里。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T15:58:34.393

你必须放一个';' 每节课后

这意味着

```
class foo{
public:
   void bar();
}; 
```

我想你错过了最后一个分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:55:58.820

你的班级最后`SceneObject`没有 a `;`。这可能是`;`错误消息所指的缺失。一旦您在代码中包含标头，它很可能会导致您的问题。

这正是 Mat 和 David 之前建议的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:12:55.900

每个包含/函数/调用等都有一个执行一行代码的主体，因为 C++ 忽略空格，当行停止时，您需要告诉程序这将只运行一个动作而不会将其与其他动作混淆，以告诉您的程序当一个动作结束时，你放一个`";"`

因为您需要编译 C++ 应用程序，所以当您不正确执行此操作时会遇到错误。这是你遇到的错误，所以找出你错过的地方`";"`并添加它

我希望这能够帮到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T15:41:20.160

您应该查看包含在此文件中的所有文件。也许在“SceneObject.h”中..似乎缺少“;” 但也验证“{”“}”和“（”“）”，因为错误有时会有点棘手。

# .net - 为什么 MSMQ 会产生大量 LDAP 流量？

> ID：10108705
> 
> 赞同：1
> 
> 时间：2012-04-11T15:05:33.130
> 
> 标签：.net, ldap, msmq

语境：

*   在 Microsoft 消息队列 (MSMQ) 上使用标准 .Net 类/层。

*   实例化 MessageQueue 对象以接收和发送消息，我相信一些 LDAP 在创建 MessageQueue 时参与解析队列路径（取决于路径格式）。

*   尽管重复使用 MessageQueue 对象，但在发送和接收消息时观察到非常高的 LDAP 流量。

*   混合使用私有和公共队列。

目前我不确定 LDAP 流量是否发生在发送和/或接收消息时，或者它是否与公共和/或私有队列有关（我假设公共队列，但不是 100% 肯定）。

谢谢。

# android - 使用 Proxy 在 Android Emulator 中运行应用程序

> ID：10108706
> 
> 赞同：0
> 
> 时间：2012-04-11T15:05:37.140
> 
> 标签：android, eclipse, http-get

有没有人设法让 Android 模拟器在代理后面工作？我尝试了以下解决方案：

*   在 Eclipse 中设置代理。
*   在“设置”->“无线和网络”->“移动网络”->“接入点名称”->“Telkila”中设置模拟器中的代理。
*   还尝试在启动模拟器时传递 --http-proxy 参数。
*   结合上述内容。

但没有什么对我有用。

这个问题的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:22:34.110

使用该`--http-proxy`参数绝对有效（您可以将其添加到 Eclipse 的默认模拟器选项中）。如果您的代理需要身份验证，请检查您是否设置了正确的端口和用户名/密码。

# android - 无法使用 C2DM 意图 (android)

> ID：10108713
> 
> 赞同：0
> 
> 时间：2012-04-11T15:06:05.963
> 
> 标签：android, android-c2dm

我尝试注册到 C2DM，但它不起作用。我在我的项目中包含了 com.google.android.c2dm。当我尝试查找`com.google.android.c2dm.intent.REGISTER`时，它什么也没找到：

```
String action = "com.google.android.c2dm.intent.REGISTER";
final PackageManager packageManager = context.getPackageManager();
final Intent intent = new Intent(action);
List<ResolveInfo> list = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY); 
```

`list.size()`给0。有什么想法吗？

编辑： mu 清单文件包含正确的权限：

```
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:08:38.713

您需要确保您拥有`com.google.android.c2dm.permission.RECEIVE`清单文件中的权限。

另外，我使用以下样板实现了注册

```
Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0)); 
registrationIntent.putExtra("sender", emailOfSender);
startService(registrationIntent); 
```

您可以参考[完整的文档](http://code.google.com/intl/sv-SE/android/c2dm/index.html#writing_apps)了解基本设置。

# c++ - 是什么导致类型不完整？（QGraphicsItem：源或目标的类型不完整）

> ID：10108720
> 
> 赞同：3
> 
> 时间：2012-04-11T15:06:41.117
> 
> 标签：c++, qt, qgraphicsitem, incomplete-type

我有一个自定义的 QGraphicsItem，它（除其他外）使用 Qt 文档中描述的标准过程在单击时将光标更改为张开的手。这在过去两周左右工作得很好。昨天，我在课堂上改变了一些东西。最重要的是，我现在直接从 QGraphicsPixmapItem 而不是 QGraphicsItem 子类化。

在某些时候，我开始收到以下错误（部分是我自己的翻译）：

> C664：无法将参数 1 从“Qt::CursorShape”转换为“const QCursor &”。源或目标的类型不完整。

我现在试图弄清楚为什么我的项目类型不完整。不幸的是，当这个问题开始发生时，我无法追溯。改变的基类是我唯一的猜测，但我真的想不出一种方法，这怎么可能是原因。谷歌搜索错误后，我找到了一些示例，其中类成员的定义有些不明确，但我在声明中找不到错误。所以，这是标题，以防我错过了什么：

```
#include <QGraphicsPixmapItem>
class Collection;
class ItemSource;

class PhotoItem : public QGraphicsPixmapItem
{
public:
    PhotoItem( QString sourceFilePath, Collection *collection =0, QColor color =Qt::white, qreal size = 80.0);

    enum Orientation    { portrait, landscape };

    QPixmap content();
    bool hasContent();
    QColor color();

    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget);
    QRectF boundingRect() const;

    void mousePressEvent(QGraphicsSceneMouseEvent *event);
    void mouseMoveEvent(QGraphicsSceneMouseEvent *event);
    void mouseReleaseEvent(QGraphicsSceneMouseEvent *event);
    void mouseDoubleClickEvent(QGraphicsSceneMouseEvent *event);

private:
    qreal _size;
    Orientation _orientation;
    QPixmap _content;
    QColor _color;
    Collection *_collection;
    ItemSource *_source;
}; 
```

如果这个文件是正确的，那么是否有任何导致我可以检查的未定义类型的常见问题？也许我什至在错误的地方搜索？

谢谢你的时间，路易丝

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:10:49.803

**是什么导致类型不完整？**

当不包含定义类型的头文件时，您添加以下行：

```
class myclass; 
```

它 Forward 声明了 myclass 类，这意味着对于编译器来说它是一个**Incomplete type**。对于不完整类型，不能创建它的对象或做任何需要编译器了解 myclass 布局的事情，而不是 myclass 只是一种类型这一事实。即：编译器不知道它的成员是什么以及它的内存布局是什么。但是由于指向所有对象的指针只需要相同的内存分配，因此您可以在仅将 Incomplete 类型作为指针引用时使用前向声明。

所以简而言之，您正在向前声明一个类，然后执行一些需要编译器知道该类的布局的操作，因为编译器不知道它因此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T15:16:16.893

前向声明通常在您的标题中很好，只需确保您在顶部的相应代码文件中包含类的标题（例如`#include "itemsource.h"`）。

*作为对编辑的回应：*如果我确定我已经正确地包含了我自己的标题并且我仍然收到不完整的类型错误，那么下一步就是更改`#include <QGraphicsPixmapItem>`整个 Qt 包。除非有明显可识别的好处，否则我总是倾向于完全包含该软件包。它只是确保满足该包的内部依赖关系。

最后，在 Qt 4.x 中，QGraphicsPixmapItem 出现在 QtGui 中，但在 5.x 中已移出到 QtWidgets。因此，如果您使用 4 try 替换 `#include <QGraphicsPixmapItem>`为`#include <QtGui>`and for 5 try `#include <QtWidgets>`。

# java - 创建缓冲图像。插值数据

> ID：10108723
> 
> 赞同：0
> 
> 时间：2012-04-11T15:06:48.863
> 
> 标签：java, image, bufferedimage

我必须从浮点数组列表中创建一个 BufferedImage。使用一个浮点数组，我创建了图像的一个像素宽度。总宽度为 500 像素。浮点数组列表的大小可以达到 10000 个浮点数组。

我构建的图像是某种历史，因此它显示在时间长度图中。例如，如果历史记录为 6 分钟，则图形在 x 轴上从 3 变为 -3，并且图像应以 3 和 -3 之间的中间点为中心。标题说“插值”，但我不确定解决方案是否涉及插值。

1.  如果列表大小超过 500，如何从列表中选择浮点数组？
2.  如果列表的大小小于 500，如何拆分列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:53:42.010

1 & 2) 你必须计算 500 像素/大小。这就是您为每个值使用的像素数。如果您有超过 500 个浮点值，则每个值将小于一个像素宽度。如果您的值少于 500 个，则每个值将占用超过一个像素宽度。

假设您有 700 个浮点值。每个值将占用 5/7 个像素。您不能绘制部分像素，但可以求和并舍入以确定要绘制的值。

*   值 1 - 5/7 - 舍入为 1 - 在第一个像素上绘图
*   值 2 - 10/7 - 舍入为 1 - 在第一个像素上绘图（叠加值 1）
*   值 3 - 15/7 - 舍入为 2 - 在第二个像素上绘图
*   值 4 - 20/7 - 舍入到 3 - 在第三个像素上绘图

依此类推，直到您绘制了所有值。

假设您有 300 个浮点值。每个值将占用一个像素的 5/3，或几乎 2 个像素。同样，您求和并四舍五入以确定要绘制的值。

*   值 1 - 5/3 - 舍入为 2 - 在第一个和第二个像素上绘图
*   值 2 - 10/3 - 舍入到 3 - 在第三个像素上绘图
*   值 3 - 15/3 - 舍入到 5 - 在第四个和第五个像素上绘制
*   值 4 - 20/3 - 舍入到 7 - 在第六个和第七个像素上绘制

依此类推，直到您绘制了所有值。

# c# - ListView 控件的设计模式有两种状态？

> ID：10108725
> 
> 赞同：3
> 
> 时间：2012-04-11T15:07:01.273
> 
> 标签：c#, design-patterns, user-interface

我在 Windows 窗体中有 ListView 控件，这是由于在图标视图或详细信息视图中显示项目列表。我想分离 ListView 状态逻辑并创建 2 个状态类 IconsState 和 DetailsS​​tate 从 IState 继承它们，并从 UI 窗口调用所有方法。

在详细视图中有 RetrieveVirtualItem 事件，在图标视图中有 DrawItem 事件。为了从 UI 中存在的 IState 变量调用它们，两个州的后代类都必须实现它们。在 DetailsS​​tate 中拥有 DrawItem 只会返回。IconsState 中的 RetrieveVirtualItem 也是如此。

是否有另一种设计方法可以避免在状态中实现空方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:45:34.447

是的，有更好的方法。强制一个类有一个不应该存在的成员是一种设计气味，即用你的话来说“*在 DetailsS​​tate 中拥有 DrawItem 只会返回*”。

或者，您可以使用 MVP 模式，这将使您具有更高的可测试性。在 MVP 的被动视图变体中，您将拥有一个模型、两个哑视图和一个演示者，该演示者根据用户的选择决定渲染哪个视图。

有关 MVP 的其他资源：
[用于 MVP 的 SO 标记](https://stackoverflow.com/questions/tagged/mvp?sort=votes)
[Passive view sample](http://codebetter.com/jeremymiller/2007/05/31/build-your-own-cab-part-4-the-passive-view/)
[MVP examples for Windows Forms](https://stackoverflow.com/questions/185993/mvp-examples-for-windows-forms)

# wpf - TextBlock MouseDown URL - 如何在我的代码中获取我的 url？

> ID：10108732
> 
> 赞同：0
> 
> 时间：2012-04-11T15:07:27.207
> 
> 标签：wpf, url, textblock, mousedown

我有一个来自 sharepoint 的列表，我从这个列表中收集了一个超链接。因为我希望我的文本框像一个超链接，所以我在 mousedown 上添加了一个事件来打开这个超链接，我关心的是如何在发送者的代码隐藏中收集这个超链接。目前我只是在工具提示中隐藏了这个超链接，也许我可以以不同的方式管理这个，任何建议都会受到赞赏。到目前为止，我的观点是，我不知道如何在后面的代码中获取此工具提示。谢谢

我的 XAML 代码：

```
 <ListBox Name="ListboxTips" ItemsSource="{Binding}" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <StackPanel Orientation="Horizontal">

                        <Image Source="{Binding Path=Picture}"  Height="20"></Image>
                        <TextBlock MouseDown="TextBlock_MouseDown_URL" TextDecorations="Underline" 
                                   Margin="10,10,20,10" Width="160" TextWrapping="Wrap" 
                                   Text="{Binding Path=TitleTip}" 
                                   ToolTip="{Binding Path=URL}"/>
                    </StackPanel>

                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我背后的代码：

```
 foreach (SPSClient.ListItem item in TipsList)
            {

                var tips = new Tips();
                tips.TitleTip = item.FieldValues.Values.ElementAt(1).ToString();
                tips.App = item.FieldValues.Values.ElementAt(4).ToString();

                // get the Hyperlink field URL value 
                tips.URL = ((FieldUrlValue)(item["LinkDoc"])).Url.ToString();

                //should collect the description of the url
                //tips.URLdesc = ((FieldUrlValue)(item["LinkDoc"])).Description.ToString();
                tips.Picture = item.FieldValues.Values.ElementAt(4).ToString();

                colTips.Add(tips);
            }
            ListboxTips.DataContext = colTips; 
```

……

```
 private void TextBlock_MouseDown_URL(object sender, System.Windows.Input.MouseButtonEventArgs e) 
    {
        //string test = (ToolTip)(sender as Control).ToString(); 
        System.Diagnostics.Process.Start("http://www.link.com");
        //System.Diagnostics.Process.Start(test); 
    } 
```

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:13:41.213

您可以直接访问该属性。它并不优雅，但会起作用！

```
private void TextBlock_MouseDown_URL(object sender, MouseButtonEventArgs e) 
{
    TextBlock txtBlock = sender as TexBlock;
    // just access the property
    string url = txtBlock.ToolTip as string;
} 
```

更优雅的方法可能是使用 a或暴露 a 的东西`Button`，以便您可以将“单击”操作绑定到视图模型上执行您希望执行的操作的命令。`Hyperlink``Command`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:14:21.700

通常，您会将要侵入的任何数据粘贴到 Tag 属性中。

```
 <TextBlock .. Tag="{Binding Path=URL}" /> 
```

这很容易作为公共财产检索：

```
private void TextBlock_MouseDown_URL(object sender, System.Windows.Input.MouseButtonEventArgs e) 
{
    var tb = sender as TextBlock;
    if(tb != null) 
    {
       var neededUrl = tb.Tag;
    }
} 
```

# node.js - 为什么猫鼬是这样设计的？

> ID：10108740
> 
> 赞同：4
> 
> 时间：2012-04-11T15:08:08.310
> 
> 标签：node.js, mongodb, model, mongoose, odm

我是猫鼬的新手，
如果我想定义一个模型，我可以使用以下内容：

```
var ArticleSchema = new Schema({
    _id: ObjectId,
    title: String,
    content: String,
    time: { type: Date, default: Date.now }
});
var ArticleModel = mongoose.model("Article", ArticleSchema); 
```

但为什么不直接写这样的代码：

```
var ArticleModel = new Model({ 
    // properties
}); 
```

为什么猫鼬是这样设计的？有没有可以重复使用“ArticleSchema”的情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T19:07:51.480

它是这样设计的，因此您可以为不映射到不同模型的子文档定义架构。请记住，集合和模型之间存在一对一的关系。

来自[猫鼬网站](http://mongoosejs.com/)：

```
var Comments = new Schema({
    title     : String
  , body      : String
  , date      : Date
});

var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , buf       : Buffer
  , date      : Date
  , comments  : [Comments]
  , meta      : {
      votes : Number
    , favs  : Number
  }
});

var Post = mongoose.model('BlogPost', BlogPost); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T15:12:39.783

是的，有时我将架构拆分为单独的文件并做这种事情。

```
// db.js 
var ArticleSchema = require("./ArticleSchema");
mongoose.Model("Article", ArticleSchema); 
```

只有在模型上有一堆静态方法和其他方法并且主模型文件变得混乱时，它才真正有用。

# javascript - 如何在 Meteor 中设置和获取 cookie（服务器端）？

> ID：10108741
> 
> 赞同：14
> 
> 时间：2012-04-11T15:08:13.047
> 
> 标签：javascript, meteor

如何在 Meteor 中设置和获取 cookie（服务器端）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T18:35:56.327

Meteor 目前没有支持在服务器上使用 cookie 的方式。

不过，您可以在客户端上使用 cookie。这是用户第一次访问页面时显示初始屏幕的片段：

```
Meteor.startup(function () {
    if (!document.cookie.match("splash="))      
      $('body').append(Meteor.ui.render(Template.splash));      
});

Template.splash.events = {
    'click .submit': function () {      
        document.cookie = "splash=ack;expires=Sat, 23 Mar 2013 00:00:0 GMT";    
        $('#splash_outer').remove();        
    }   
}; 
```

您可以使用类似的方法并在客户端代码中设置 cookie，然后在方法调用中将结果发送到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T06:37:15.840

2014 年 4 月更新：您现在可以使用[流星用户会话](https://github.com/BenjaminRH/meteor-user-session)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-18T22:59:05.467

看起来我们找到了一个解决方案：ostrio/cookies，它在服务器端和客户端都可以工作：[https ://atmospherejs.com/ostrio/cookies](https://atmospherejs.com/ostrio/cookies)

```
import { Cookies } from 'meteor/ostrio:cookies';

const cookies = new Cookies();

const oldValue = cookies.get("key");
cookies.set("key", "newValue"); 
```

# java - 如何在 Servlet 的上下文中缓存 PDF，itext

> ID：10108746
> 
> 赞同：0
> 
> 时间：2012-04-11T15:08:24.470
> 
> 标签：java, pdf, servlets, pdf-generation, itext

我想在 servlet 的上下文中缓存 PDF 模板。每次有人想要生成报告时，servlet 都会从上下文中获取模板，复制它，然后用动态数据修改副本。这将使应用程序在每次生成报告时都不会碰到硬盘驱动器。

这是我尝试过但似乎不起作用的一种方法。我收到一个空指针错误

```
RandomAccessFileOrArray pdfTemplate = new RandomAccessFileOrArray(
        context.getResourceAsStream("pathToPdf"));

context.setAttribute("pdftemplate", pdfTemplate); 
```

任何建议将不胜感激。我用谷歌搜索了这个，找不到任何关于最好的编码方式的例子。

谢谢你的时间道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:07:24.707

我创建了一些 PDF 模板并将它们存储在 Servlets 上下文中，它工作正常。

# java - Overriding JScrollPane Behavior

> ID：10108747
> 
> 赞同：0
> 
> 时间：2012-04-11T15:08:26.920
> 
> 标签：java, swing, jscrollpane

I have a simple app that allows users to mark up a PDF document by dragging/dropping predefined widgets into a separate layer.

I am using a JScollPane. The viewport size is the equivalent of a single 8.5x11 page. When the VScrollBar is at the minimum position, the top of the page displays; at the maximum position, the bottom displays. I would like to override this behavior. The minimum position should display the top of the first page, and the maximum should display the bottom of the last page.

Among the dead ends I've hit: Replacing the ScrollBar built into the JScrollPane; Intercepting the AdjustmentEvent fired by the VScrollBar; and studying the ScrollDemo example. This seems like a straightforward feature, but I'm stuck at the beginning.

Any suggestions? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:07:21.203

这似乎可以解决问题：

```
class DocumentScroller extends JScrollPane implements ChangeListener {
    Component view ;
    JPanel bookPanel, bookTop ;
    ScrollingDocumentListener listener ;
    Dimension pageSize ;

    public DocumentScroller ( Component view ) {
            this.view = view ;
            }

    public DocumentScroller ( Component view,
                    int vsbPolicy, int hsbPolicy ) {
            super( vsbPolicy, hsbPolicy ) ;
            this.view = view ;
            }

    public void setViewportView ( Component view ) {
            this.view = view ;
            }

    public void setPageCount ( int pagect ) {
            if ( view == null )
                    return ;

            pageSize = view.getPreferredSize() ;
            Dimension bookSize = new Dimension( pageSize ) ;
            bookSize.height *= pagect ;

            bookPanel = new JPanel() ;
            bookPanel.setLayout( new BorderLayout() ) ;
            bookPanel.setPreferredSize( bookSize ) ;
            bookPanel.add( bookTop = new JPanel(),
                            BorderLayout.NORTH ) ;
            bookPanel.add( view, BorderLayout.CENTER ) ;

            super.setViewportView( bookPanel ) ;
            getViewport().addChangeListener( this ) ;
            }

    public void setUnitIncrement ( int unitIncrement ) {
            getVerticalScrollBar().setUnitIncrement( unitIncrement ) ;
            }

    public void setValue ( int value ) {
            getVerticalScrollBar().setValue( value ) ;
            }

    public void setScrollingDocumentListener (
                    ScrollingDocumentListener listener ) {
            this.listener = listener ;
            }

    public void stateChanged ( ChangeEvent e ) {
            try {
                    if ( e.getSource().getClass()
                                    != Class.forName(
                                      "javax.swing.JViewport" ) )
                            return ;
                    }
            catch ( Exception ex ) {
                    return ;
                    }

            Rectangle rect = ( (JViewport) e.getSource()
                            ).getViewRect() ;
            int offset = rect.y %pageSize.height ;
            int pageTop = rect.y -offset ;
            int pos = offset *rect.height /pageSize.height ;

            bookTop.setPreferredSize(
                            new Dimension( 0, pageTop +pos ) ) ;
            bookPanel.doLayout() ;

            if ( listener != null )
                    listener.setPage( pageTop /pageSize.height ) ;
            }
    }

interface ScrollingDocumentListener {
    void setPage ( int pageno ) ;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:17:58.670

您是否希望能够同时显示第一页的下半部分和第二页的上半部分（并将元素从一个页面拖到另一个页面）？还是当时只有一个完整的页面？

首先，您需要一个仅显示所有页面并将其添加到 JScrollPane 的组件。您可能希望让它实现 Scrollable 接口来微调单元/块滚动。

第二，您可以在组件旁边显示一个（垂直）JScrollBar，并根据它的值更改显示的页面。在这种情况下，您使用的滚动条更像是一个滑块控件，并且您的页面组件并不是真正可滚动的（没有使用 JScrollPane）。

# conflict - How to force a version conflict in iCloud

> ID：10108748
> 
> 赞同：1
> 
> 时间：2012-04-11T15:08:29.270
> 
> 标签：conflict, icloud

I have a working implementation of iCloud. Now I want to improve conflict handling by adding some merge functionality. I've been trying to come up with a consistent way of forcing a conflict for testing purposes but I haven't had luck so far, conflicts don't occur consistently when I expect them to occur. This might indicate that I'm doing something wrong, or maybe that I just misunderstood something about how iCloud works (yet another thing, I mean).

I'm using UIDocument and yes, I'm listening to the UIDocumentStateChangedNotification. In fact, I do get some occasional conflict notifications. Also, I only have one file in iCloud.

Having two devices using the same iCloud accout, here is the flow of events I was expecting to always cause a conflict:

*   Open the file on both devices (both devices are now correctly seeing the same content). *Note:* Here is the only time openWithCompletionHandler is called, after this it's never called again.
*   Make some change on device A and call saveToURL.
*   Wait some time to allow the change to propagate.
*   Make some other change on device B and call saveToURL.
*   Wait some time to allow the change to propagate.
*   **EXPECTED:** The app should be getting a conflict notification from iCloud. **OBSERVED:** A conflict does occur very occasionally, but most of the time what happens is simply that the UIDocument gets its UIDocumentStateEditingDisabled flag set and then cleared back after half a second or so (I'd guess editing is being disabled while the iCloud daemon is pulling the version from the other device and saving it in the local ubiquitous directory).

Much like a version control system like SVN, I was expecting the version from device B to cause a conflict because an "update" was required in order to get the version uploaded by device A.

Am I wrong expecting a conflict in the scenario I just described? Why? Is there any other way to consistently force a conflict?

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T12:22:18.480

我本以为引发冲突的更好方法是：

*   确保两台设备都有最新的数据副本
*   将两台设备都置于飞行模式以防止任何 iCloud 更新
*   在两台设备上更改同一位置的数据，每个设备都有不同的新数据
*   重新打开网络
*   等待更改传播

[从文档：](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/iCloud/iCloud.html#//apple_ref/doc/uid/TP40007072-CH5-SW13)

> 当应用程序的两个实例在本地更改文件并且随后将两个更改都传输到 iCloud 时，就会发生冲突。例如，当设备处于飞行模式时进行更改并且无法立即将更改传输到 iCloud 时，可能会发生这种情况。当它发生时，iCloud 会存储文件的两个版本，并通知应用程序的文件提供者发生了冲突并需要解决。

您这样做的方式（允许同步时间，以不同方式更改文档）似乎*不应该*引起冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:59:38.183

iCloud 的工作原理与版本控制系统基本相同——除了您只能访问冲突版本（发生冲突时）。

当`ver_1`从 iCloud 中提取设备、编辑、保存并发现服务器的版本（`ver_2`或更新）与预期不同时，将创建一个冲突的版本。

初始同步后，您可以：

1.  关闭设备 B 上的 wifi，编辑并保存。
2.  在设备 A 上编辑，保存。
3.  在设备 B 上打开 wifi。

很快就会发生冲突。

# jquery - 加载页面后的 jQuery 事件

> ID：10108749
> 
> 赞同：-2
> 
> 时间：2012-04-11T15:08:29.753
> 
> 标签：jquery, asp.net-mvc-3, jquery-events

当第一个更改值第二个更改使用`.change`事件时，我有一个级联下拉列表。我想要的是如果默认选择第一个下拉列表的选定项的值如何调用第二个的更改？在恢复时，如何不仅在更改事件上绑定第一个下拉列表所选项目的第二个下拉列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:12:17.413

选择第一个项目时您正在做什么，也可以在页面加载时执行此操作。

例如：

```
$.ready(function(){
   doStuffOnIndexChange();
   $('selectOne').change(doStuffOnIndexChange);
 }
)

function doStuffOnIndexChange()
{
 // whatever you need to do here.
} 
```

或者正如约翰在他的评论中指出的那样，为初始选择项触发更改事件：

```
$('.ddlOne').change(function(){/*whatever*/}).change(); 
```

# windows - Windows batch script with multiple dependencies and possible asynch

> ID：10108762
> 
> 赞同：0
> 
> 时间：2012-04-11T15:09:09.883
> 
> 标签：windows, batch-file

How can you run a series of commands in windows where some depend on the completion of others and some can be launch at the same time asynchronously. Something like this:

command 1

when command 1 completes, launch commands 2

when command 2 completes, launch commands 3, 4 at the same time

when command 3 completes, launch commands 5, 6 and 7 at the same time

when command 4 completes, launch commands 8, 9 and 10 at the same time

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:47:15.260

您布置的场景非常简单，因为每个步骤都取决于仅完成一个前任。不需要轮询。

你没有说每个命令是什么。首先，我假设它们都是天生同步运行的批处理或控制台命令。换句话说，一个批处理文件在前一个命令完成之前不会继续执行下一个命令。在这种情况下，您只需在想要异步启动命令时使用 START 命令。

您的场景可以使用 2 个批处理脚本轻松实现。stepA.bat 将启动整个过程。

stepA.bat

```
@echo off
command1
start "" stepB.bat
command4
start "" command8
start "" command9
command10 
```

stepB.bat

```
@echo off
command3
start "" command5
start "" command6
command7 
```

如果 command1、command4 或 command3 是批处理脚本，则必须使用 CALL 调用它，否则不会将控制权返回给调用者。例如，如果 command1 是“someScript.bat”，那么您需要使用`call someScript.bat`.

如果 command1、command4 或 command3 不是控制台命令，而是打开自己的窗口的命令（例如 notepad.exe），则默认情况下该命令将异步运行，并且批处理文件将在命令完成之前继续运行。您必须使用 START /WAIT 使其同步。因此，如果 command1 是“notepad.exe”，那么您需要使用`start "" /wait notepad.exe`.

如果 command5、command6、command8 或 command9 不是控制台命令（换句话说，它们本质上是异步的），那么您不需要使用 START，尽管这样做并没有什么坏处。

您可能有一个场景，您希望异步启动 A1、A2 和 A3，然后仅在 A1、A2 和 A3 全部完成后启动 B。这将需要某种形式的轮询来确定所有三个何时完成。每个 A 进程在完成时都必须以某种方式发出信号，而 B 必须反复轮询并等待，直到它收到所有 3 个信号才能继续。一种形式的信号可能是创建文件，但有很多选择。

# java - 如何实现Android ActionBar 后退按钮？

> ID：10108774
> 
> 赞同：145
> 
> 时间：2012-04-11T15:09:57.897
> 
> 标签：java, android, android-3.0-honeycomb

我有一个列表视图的活动。当用户单击项目时，项目“查看器”打开：

```
List1.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {

        Intent nextScreen = new Intent(context,ServicesViewActivity.class);
        String[] Service = (String[])List1.getItemAtPosition(arg2);

        //Sending data to another Activity
        nextScreen.putExtra("data", datainfo);
        startActivityForResult(nextScreen,0);
        overridePendingTransition(R.anim.right_enter, R.anim.left_exit);
    }
}); 
```

这工作正常，但在操作栏上，应用程序图标旁边的后退箭头没有被激活。我错过了什么吗？

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2012-11-20T10:43:33.290

塞尔文已经发布了正确的答案。在这里，漂亮的代码中的解决方案：

```
public class ServicesViewActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // etc...
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }
} 
```

该功能`NavUtils.navigateUpFromSameTask(this)`要求您在 AndroidManifest.xml 文件中定义父活动

```
<activity android:name="com.example.ServicesViewActivity" >
    <meta-data
     android:name="android.support.PARENT_ACTIVITY"
     android:value="com.example.ParentActivity" />
</activity> 
```

请参阅[此处](https://developer.android.com/guide/navigation/navigation-design-graph#up-vs-back)以进一步阅读。

* * *

## 回答 #2

> 赞同：181
> 
> 时间：2012-07-29T14:43:48.720

确保在 Activity 中启用了 ActionBar 主页按钮：

## 安卓，API 5+：

```
@Override
public void onBackPressed() {
     ...
     super.onBackPressed();
} 
```

## ActionBarSherlock 和 App-Compat，API 7+：

```
@Override
public void onCreate(@Nullable Bundle savedInstanceState) {
    ...
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

## 安卓，API 11+：

```
@Override
public void onCreate(@Nullable Bundle savedInstanceState) {
    ...
    getActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

`MainActivity`扩展示例`ActionBarActivity`：

```
public class MainActivity extends ActionBarActivity {
    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Back button
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home: 
            // API 5+ solution
            onBackPressed();
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }
} 
```

这样，您想要的所有活动都可以得到支持。

## 安卓，API 16+：

[http://developer.android.com/training/implementing-navigation/ancestral.html](http://developer.android.com/training/implementing-navigation/ancestral.html)

`AndroidManifest.xml`：

```
<application ... >
    ...
    <!-- The main/home activity (it has no parent activity) -->
    <activity
        android:name="com.example.myfirstapp.MainActivity" ...>
        ...
    </activity>
    <!-- A child of the main activity -->
    <activity
        android:name="com.example.myfirstapp.DisplayMessageActivity"
        android:label="@string/title_activity_display_message"
        android:parentActivityName="com.example.myfirstapp.MainActivity" >
        <!-- The meta-data element is needed for versions lower than 4.1 -->
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.myfirstapp.MainActivity" />
    </activity>
</application> 
```

`MainActivity`扩展示例`ActionBarActivity`：

```
public class MainActivity extends ActionBarActivity {
    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Back button
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        // Respond to the action bar's Up/Home button
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-08-03T02:34:31.627

要启用 ActionBar 后退按钮，您显然需要在 Activity 中使用 ActionBar。这是由您使用的主题设置的。您可以在`AndroidManfiest.xml`. 如果您使用例如`@android:style/Theme.NoTitleBar`主题，您没有ActionBar。在这种情况下，调用`getActionBar()`将返回 null。因此，请确保您首先拥有一个 ActionBar。

下一步是在`android:parentActivityName`按下后退按钮时将 设置为要导航的活动。这也应该完成`AndroidManifest.xml`。

`onCreate`现在您可以在“子”活动的方法中启用后退按钮。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

现在您应该实现后退按钮的逻辑。您只需覆盖`onOptionsItemSelected`“子”活动中的方法并检查后退按钮的 id，即`android.R.id.home`.

现在您可以触发该方法，`NavUtils.navigateUpFromSameTask(this);` **但**如果您没有`android:parentActivityName`在您中指定，`AndroidManifest.xml`这将使您的应用程序崩溃。

有时这就是你想要的，因为它提醒你忘记了“某事”。因此，如果您想防止这种情况发生，您可以使用该`getParentActivityIntent()`方法检查您的活动是否有父级。如果这返回 null，则您没有指定父级。

在这种情况下，您可以触发与`onBackPressed()`用户按下设备上的后退按钮基本相同的方法。一个不会让你的应用崩溃的好的实现是：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            if (getParentActivityIntent() == null) {
                Log.i(TAG, "You have forgotten to specify the parentActivityName in the AndroidManifest!");
                onBackPressed();
            } else {
                NavUtils.navigateUpFromSameTask(this);
            }
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

请注意，用户看到的动画在 和 之间是不同`NavUtils.navigateUpFromSameTask(this);`的`onBackPressed()`。

走哪条路取决于您，但我发现该解决方案很有帮助，尤其是当您为所有活动使用基类时。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-04-17T07:30:59.823

AndroidManifest 文件：

```
 <activity android:name=".activity.DetailsActivity">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="br.com.halyson.materialdesign.activity.HomeActivity" />
    </activity> 
```

添加详细信息活动：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);   
    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
    setSupportActionBar(toolbar);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

这是工作 ：]

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-03-02T21:54:26.547

在`OnCreate`方法中添加：

```
if (getSupportActionBar() != null) {
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

然后添加这个方法：

```
@Override
public boolean onSupportNavigateUp() {
    onBackPressed();
    return true;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-07-22T07:47:18.810

## 安卓注解：

```
@OptionsItem(android.R.id.home)
void homeSelected() {
    onBackPressed();
} 
```

来源：[https ://github.com/excilys/androidannotations](https://github.com/excilys/androidannotations)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-05-12T11:21:25.380

我认为这`onSupportNavigateUp()`是最简单和最好的方法

在下面的 stackoverflow 答案中查看完整的解决方案。链接：[点此查看完整代码](https://stackoverflow.com/questions/15686555/display-back-button-on-action-bar/37185334#37185334)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-24T06:53:35.927

[https://stackoverflow.com/a/46903870/4489222](https://stackoverflow.com/a/46903870/4489222)

要实现这一点，只需两个步骤，

第 1 步：转到 AndroidManifest.xml 并在标签中添加参数 - android:parentActivityName=".home.HomeActivity"

例子 ：

```
 <activity
    android:name=".home.ActivityDetail"
    android:parentActivityName=".home.HomeActivity"
    android:screenOrientation="portrait" /> 
```

第 2 步：在 ActivityDetail 中为上一页/活动添加您的操作

例子 ：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
   switch (item.getItemId()) {
      case android.R.id.home: 
          onBackPressed();
          return true;
   }
   return super.onOptionsItemSelected(item);}
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-10T07:26:53.053

以下步骤足以返回按钮：

**第 1 步：** 此代码应在 Manifest.xml 中

```
<activity android:name=".activity.ChildActivity"
        android:parentActivityName=".activity.ParentActivity"
        android:screenOrientation="portrait">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".activity.ParentActivity" /></activity> 
```

**第2步：** 你不会给

```
finish(); 
```

在启动子活动时在您的父活动中。

**第 3 步：** 如果您需要从子活动返回父活动，那么您只需为子活动提供此代码。

```
startActivity(new Intent(ParentActivity.this, ChildActivity.class)); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-08T18:48:21.017

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

在`onCreated`新 API 的方法中。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-07-13T03:04:58.270

如果您使用的是工具栏，我也面临同样的问题。我按照这两个步骤解决了

1.  在 AndroidManifest.xml

```
<activity android:name=".activity.SecondActivity" android:parentActivityName=".activity.MainActivity"/> 
```

2.  在 SecondActivity 中，添加这些...

```
Toolbar toolbar = findViewById(R.id.second_toolbar);
setSupportActionBar(toolbar);
getSupportActionBar().setDisplayShowTitleEnabled(false);
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-06T04:32:19.487

基于 Jared 的回答，我必须在多个活动中启用并实现操作栏后退按钮行为，并创建此帮助程序类以减少代码重复。

```
public final class ActionBarHelper {
    public static void enableBackButton(AppCompatActivity context) {
        if(context == null) return;

        ActionBar actionBar = context.getSupportActionBar();
        if (actionBar == null) return;

        actionBar.setDisplayHomeAsUpEnabled(true);
    }
} 
```

活动中的用法：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...

    ActionBarHelper.enableBackButton(this);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-11T04:56:38.173

我自己也在尝试，一件事对我有用：

```
 when(item.itemId) {
            R.id.action_signup -> signup() //other menu item
            android.R.id.home -> viewRoot.findNavController().navigateUp() //back 
        }

        return super.onOptionsItemSelected(item)
    } 
```

我正在使用 Jetpack 导航，因此这是获取 NavController 的调用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-04T15:11:18.190

另一种选择是将辅助活动的 parentActivityName 设置为应用程序清单文件中的 MainActifity

```
<activity
        android:name=".ServiceViewActivity"
        android:parentActivityName=".MainActivity"/> 
```

# magento - Magento import error logs

> ID：10108779
> 
> 赞同：0
> 
> 时间：2012-04-11T15:10:30.393
> 
> 标签：magento

I would like to know if magento logs the error rows anywhere when doing an import. If so, where are the logs files, and how do I turn it on?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:16:34.403

查看 app/Mage.php 中的方法定义，您会发现

```
 /**
     * log facility (??)
     *
     * @param string $message
     * @param integer $level
     * @param string $file
     * @param bool $forceLog
     */
    public static function log($message, $level = null, $file = '', $forceLog = false)
    {
        if (!self::getConfig()) {
            return;
        }

        try {
            $logActive = self::getStoreConfig('dev/log/active');
            if (empty($file)) {
                $file = self::getStoreConfig('dev/log/file');
            }
        }
        catch (Exception $e) {
            $logActive = true;
        }

        if (!self::$_isDeveloperMode && !$logActive && !$forceLog) {
            return;
        }

        static $loggers = array();

        $level  = is_null($level) ? Zend_Log::DEBUG : $level;
        $file = empty($file) ? 'system.log' : $file;

        try {
            if (!isset($loggers[$file])) {
                $logDir  = self::getBaseDir('var') . DS . 'log';
                $logFile = $logDir . DS . $file;

                if (!is_dir($logDir)) {
                    mkdir($logDir);
                    chmod($logDir, 0777);
                }

                if (!file_exists($logFile)) {
                    file_put_contents($logFile, '');
                    chmod($logFile, 0777);
                }

                $format = '%timestamp% %priorityName% (%priority%): %message%' . PHP_EOL;
                $formatter = new Zend_Log_Formatter_Simple($format);
                $writerModel = (string)self::getConfig()->getNode('global/log/core/writer_model');
                if (!self::$_app || !$writerModel) {
                    $writer = new Zend_Log_Writer_Stream($logFile);
                }
                else {
                    $writer = new $writerModel($logFile);
                }
                $writer->setFormatter($formatter);
                $loggers[$file] = new Zend_Log($writer);
            }

            if (is_array($message) || is_object($message)) {
                $message = print_r($message, true);
            }

            $loggers[$file]->log($message, $level);
        }
        catch (Exception $e) {
        }
    } 
```

所以记录到你自己的代码，记录变得像

```
Mage::log($variable, null, 'yourfile.log', 1); 
```

作为第四个选项的 1 完全是选项，它取代了在管理员中关闭注销的选项，并将始终强制系统写入您的日志。日志记录的一切都在 HTTP_ROOT/var/log/ 中完成

日志默认是打开的，但是如果你使用自定义扩展并且需要插入日志，你可以做上面的。Magento 的任何日志记录都将始终位于 var/log/exception.log 或 var/log/system.log 中，但大多数事情都会转到 system.log，除非它使用 throwException()，后者会转到 exception.log

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T10:55:20.010

使用直接导入产品，如果屏幕上存在任何错误，您将看到错误行没有.. 其快速导入产品的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:29:40.367

您可以通过开发人员配置菜单激活 Exception.log 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T15:37:20.743

在 magento 中为日志 system.log 文件和 exception.log 文件生成了两个文件，这两个文件都位于 var/log 文件夹中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-15T12:39:19.837

我尝试`$_debugMode = true`在`Mage_ImportExport_Model_Abstract`模型中进行设置，但在我的情况下它没有创建任何日志。我正在使用 DataFlow 方法上传产品。

然后我所做的就是改变`Mage_Adminhtml_System_Convert_ProfileController`一点点。在`batchRunAction()`它内部生成错误为

`try { $importData = $batchImportModel->getBatchData(); $adapter->saveRow($importData); } catch (Exception $e) { $errors[] = $e->getMessage(); continue; }`

我将`$errors`阵列与当前产品 sku 一起记录以获得我需要的东西，即 `Mage::log($importData['sku'].' - '.$e->getMessage())`

# java - How to use a regex replace to correct "Equals avoid Null" from checkstyle

> ID：10108782
> 
> 赞同：0
> 
> 时间：2012-04-11T15:10:36.417
> 
> 标签：java, regex, checkstyle

EDIT : I edited my post at the end to give the regex I used

Having sonar to monitor quality of a code is great, but on the downside, with crappy project, you have to correct a lot. My problem is that I need to correct about 500 "Equals avoid Null" violations from checkstyle ( com.puppycrawl.tools.checkstyle.checks.coding.EqualsAvoidNullCheck ). With one regex to correct it semi automatically would be great.

The goal of this violation is to change

```
myObject.getMyMember().toString().equals("one string") 
```

to

```
"one string".equals(myObject.getMyMember().toString()) 
```

* * *

EDIT : I used this way and it worked well even if I need to check it and not launch a sed on my entire source tree

The regex to match the total line

```
([\(|& \t!])([^\(|& \t!])([a-zA-Z0-9_\[\]\(\)\.]*)\.(equals|equalsIgnoreCase)\(("[^"]*")\) 
```

The regex to replace the line for

```
\1\5.\4(\2\3) 
```

It took me a day to correct the 500 violations. Still a lot of work, but it would have been more painful if I had to do it by hand.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:41:22.390

不确定这是解决方案，但请尝试：

```
final String sTmp = myObject.getMyMember();
    if(null != sTmp) {<br>
    // Test .equals() here <br>
    ..<br> 
```

}

# excel - Excel 简单公式仅适用于过滤结果

> ID：10108783
> 
> 赞同：6
> 
> 时间：2012-04-11T15:10:37.277
> 
> 标签：excel, filter, formula

我有一组包含 1000 多个条目的数据。我可以使用自动过滤器过滤这些。在底部，我有一些简单的公式，例如 AVERAGE() 和 QUARTILE()。我想要实现的是，当我过滤数据时，AVERAGE 的结果应该会发生变化，因此它们应该只考虑可见数据。

我一直在搜索谷歌和这里，但除了使用“小计”之外，似乎找不到类似的东西，但这不是我想要使用的公式。

这可能吗？谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:30:25.047

采用`SUBTOTAL`

```
Function_num    Function_num        Function 
(incl hidden)   (ignores hidden) 
1                   101             AVERAGE 
2                   102             COUNT 
3                   103             COUNTA 
4                   104             MAX 
5                   105             MIN 
6                   106             PRODUCT 
7                   107             STDEV 
8                   108             STDEVP 
9                   109             SUM 
10                  110             VAR 
11                  111             VARP 
```

所以你可以使用：

```
=SUBTOTAL(101, yourRange) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:17:08.640

我认为您应该使用数据透视表。

# android - 制作一个显示随机图像的弹出窗口，然后在单击时关闭

> ID：10108785
> 
> 赞同：0
> 
> 时间：2012-04-11T15:10:46.010
> 
> 标签：android, eclipse, image, button, popup

我正在开发一个程序，我想在其中单击一个按钮并在屏幕中间出现一个弹出窗口，显示随机图像。然后在单击弹出窗口时，它会关闭弹出窗口。

我的问题这可能吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:22:37.043

是的，你不能。为此，您需要创建一个[自定义警报对话框](https://stackoverflow.com/questions/6044793/popupwindow-with-image)，该对话框使用其中的 imageview 填充布局，并在单击所需对象时调用它。您还需要通过向 AlertDialog 添加一个[关闭按钮](https://stackoverflow.com/questions/5713312/closing-a-custom-alert-dialog-on-button-click)来关闭它来设置一个 onlick 侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T23:22:01.263

是的，你可以使用这样的东西：

```
Dialog confirmDeleteDialog = new Dialog(this);
confirmDeleteDialog.setContentView(R.layout.custom_message_dialog);
//This allows dialog to be closed with back button
confirmDeleteDialog.setCancelable(true);
//DisplayMetrics will get the screen dimensions and allow you to 
//declare a center point
DiaplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int screenHeight = displaymetrics.heightPixels; //Divide by 2 to get mid
int screenWidth = displaymetrics.widthPixels; //Divide by 2 to get mid

Button closeButton = (Button) confirmDeleteDialog.findViewById(R.id.close_button);
closeButton.setOnClickListener(this);
confirmDeleteDialog.show(); 
```

custom_message_dialog.xml - 可能看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<Button
android:id="@+id/close_button"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:clickable="true"/>

</RelativeLayout> 
```

点击监听器

```
public void onClick(View v) {
if(v == closeButton){
confirmDeleteDialog.dismiss();
}} 
```

# delphi - 是否有用于文件名排序的比较功能？

> ID：10108789
> 
> 赞同：3
> 
> 时间：2012-04-11T15:11:01.320
> 
> 标签：delphi, file, sorting, delphi-xe2, windows-explorer

> **可能重复：**
> [如何像在 Windows 资源管理器中一样在 Delphi 中获取排序顺序？](https://stackoverflow.com/questions/5134712/how-to-get-the-sort-order-in-delphi-as-in-windows-explorer)

我正在寻找一个可以像 Windows Explorer 一样比较（用于文件排序）的函数。现在我正在使用`CompareText`函数，但它会导致以下结果：

```
---------  /\  ---------
 AFile
 BFile
 _XFile
----------------------- 
```

Windows 资源管理器以这种方式对相同的项目进行排序（这就是我想要得到的）：

```
---------  /\  ---------
 _XFile
 AFile
 BFile
----------------------- 
```

有这种比较的功能还是我应该自己处理？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T15:13:07.513

Windows 资源管理器用于[`StrCmpLogicalW`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759947.aspx)比较文件名。RTL/VCL 没有声明这个函数，所以你需要自己做。

```
function StrCmpLogicalW(psz1, psz2: PWideChar): Integer; stdcall;
    external 'shlwapi.dll'; 
```

# javascript - iPad上的jQuery触发捏合手势

> ID：10108795
> 
> 赞同：1
> 
> 时间：2012-04-11T15:11:46.820
> 
> 标签：javascript, jquery, ipad, mobile-safari

所以我正在为 iPad 开发一个 WEB 应用程序，并且遇到了设备旋转问题。取决于方向改变时的初始方向，页面会放大。现在用户可以简单地捏合以返回可接受的体验，但这还不够好。所以这就是我想要做的。我想用javascript触发一个'pinch'事件，它的行为与真实用户缩小相同。

但是我不确定这是否可能，因为我触发 touchmove 事件的成功率为零。另外，我必须触发 2 个相互靠近的 touchmove 事件。

```
 $('body').trigger('touchmove' ... how would I pass in X and Y? 
```

现在我在 jQuery 的文档中看到了这个例子：

```
var event = jQuery.Event("logged");
event.user = "foo";
event.pass = "bar";
$("body").trigger(event); 
```

这让我认为将数据传递给触发的事件对象是可能的，但是如何触发一个完整的捏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:15:19.840

我可能误解了你的问题，但你不只是试图阻止页面需要被捏吗？

```
<meta name="viewport" content="initial-scale=1, maximum-scale=1"> 
```

这将告诉设备您已经为 iPad 设计了页面并且它不需要缩放！

# mysql - MySQL接受本地，本地网络和外部连接与绑定地址？

> ID：10108799
> 
> 赞同：0
> 
> 时间：2012-04-11T15:12:00.917
> 
> 标签：mysql, linux, sockets, iptables

我想在内部（本地主机）、外部（从机器的外部 ip）以及它的本地网络地址访问 MySQL。这个想法是来自我们的网络服务器的请求，也属于同一网络，不必离开本地网络并返回。

我遇到的问题是让 MySQL 接受对其本地地址的请求，因为 mf.cnf 将“绑定地址”选项设置为机器的外部 IP。

我已经阅读了将绑定地址设置为 0.0.0.0 作为选项，但这是最理想的方法吗？我可能需要设置 iptables 以丢弃任何不是来自我批准的 ip 的对 mysql/3306 的请求。

也就是说，从 web 服务器机器到 mysql 机器的外部 ip 的 tracert 只有两跳，这值得吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:24:04.047

据我了解，您只需要接受来自所有“方向”的 MySQL 连接？`bind 0.0.0.0:3306`就足够了。为什么要使用 iptables？

# firefox - IE、FF 和 Safari 的 Extjs4 拖放区域错误

> ID：10108803
> 
> 赞同：0
> 
> 时间：2012-04-11T15:12:12.087
> 
> 标签：firefox, google-chrome, drag-and-drop, extjs4, cross-browser

我在一个面板中有多个网格。基本网格中包含数据，并且可以在彼此之间拖放。面板中的所有网格都应该能够在彼此之间拖放。这在 chrome 中完美运行，但不适用于 Firefox、IE 或 Safari。

在 IE、FF 和 Safari 中，其中包含数据的网格将在彼此之间拖放而不会出现问题。他们不会在空网格之间。我尝试将数据添加到空网格中，但这不是问题。Firebug 在与 Extjs 一起使用时也会出错，所以我得到的任何错误都来自不同的开发工具。我已经重新安装了所有这些浏览器，但这也不是答案。我卡住了...

**编辑**我在 chrome 中发现我的拖放组的 viewconfig 已设置，但在其他浏览器中未设置

这是我的基础网格，其中包含数据。

```
var rround = "panel-game-"+round;
  var ss = Ext.create('Ext.grid.Panel', {
        stateful: true,
        id: "panel-game-"+round,
        stateId: 'stateGrid',
        autoScroll: false,
        store: store,
        columns: [
            {
                text     : 'Teams',
                flex     : 1,
                sortable : true,
                dataIndex: 'team_name'
            }
        ],
        height: 100,
        width: 150,                                                                            
        title: 'Game ' + round,                                                
        viewConfig: {
            stripeRows: true,
            plugins: {
                ptype: 'gridviewdragdrop',
                dragGroup:  [groups],
                dropGroup:  [groups]
            },
            listeners: {
                drop: function(node, data, dropRec, dropPosition,record,store) {
                    var dropOn = dropRec ? ' ' + dropPosition + ' ' + dropRec.get('name') : ' on empty view';
                    var data = this.store.data.items;
                    var sdata = new Array();
                    data.each(function(e){
                        var bleh = {team_id: e.data.team_id, team_name:e.data.team_name};
                        sdata.push(bleh);
                    })                                                                                      

                    removeDupe(sdata,this.store);
                }
            }
        }
    }); 
```

这是我的空网格，它应该接受下降，并且当其中有数据时也应该拖动。

```
 var rCell = Ext.create('Ext.grid.Panel', {
    stateful: true,
    id: "panel-game-"+i+'-'+a,
    stateId: 'stateGrid',
    autoScroll: false,
    store: rCellStore,
    columns: [
        {
            text     : 'Teams',
            flex     : 1,
            sortable : true,
            dataIndex: 'team_name'
        }
    ],
    viewConfig: {
        plugins: {
            ptype: 'gridviewdragdrop',
            dragGroup:  [groups],
            dropGroup:  [groups]
        },
        listeners: {
            beforedrop: function(node,data,overModel,dropPosition,eOpts){
                console.log(node);
            },
            drop: function(node, data, dropRec, dropPosition, record) {
                console.log("drop");
                var dropOn = dropRec ? ' ' + dropPosition + ' ' + dropRec.get('title') : ' on empty view';
                var f = node.id.replace('-body','');
                var newval = data.records[0].data;

                if(f != undefined && f != ''){
                    var fstore = Ext.getCmp(f).getStore();
                    fstore.add(newval);
                }

                var data = this.store.data.items;
                var sdata = new Array();
                data.each(function(e){
                    var bleh = {team_id: e.data.team_id, team_name:e.data.team_name};
                    sdata.push(bleh);
                })                                                                                      

                removeDupe(sdata,this.store);

            }
        }
    },
    height: 100,
    width: 150,                                                                            
    title: 'Game ',                                                
    viewConfig: {
        stripeRows: true
    }
}); 
```

当我尝试将某些东西拖过来时，它不会提供可用的放置区。可能是这样，但我不确定如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:36:56.793

问题是第二个 viewConfig{stripeRows:true}。Chrome 可以解决这个问题，但其他浏览器正在用第二个 viewConfig 覆盖第一个 viewConfig。

# jquery - 在 page_load 上创建对象并传递给 JQuery

> ID：10108806
> 
> 赞同：0
> 
> 时间：2012-04-11T15:12:23.800
> 
> 标签：jquery, asp.net

我有一个 asp.net 页面和 JQuery 日期选择器。在页面加载时，我想查看一些配置并创建一个不包含的日期对象，然后将其传递给外部 .js 文件中的 JQuery。有没有办法做到这一点？如何？

编辑：我想传递一个 Class 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:32:35.903

如何`AJAX request`在服务调用中执行页面加载并从配置文件中读取值。

# c# - 找到两个部分之间重叠的最佳方法是什么？

> ID：10108809
> 
> 赞同：0
> 
> 时间：2012-04-11T15:12:26.053
> 
> 标签：c#

我有包含 2 个部分的 Segment 类，每个部分包含 2 个点 X 和 Y 坐标。

Point 类有 getX() 和 getX() 方法。

```
public class Segment
{
    private Point pointLeft;
    private Point pointRight;
} 
```

我想找到两个部分之间的重叠（是否存在）：

```
public double overlap (Segment other)
{

} 
```

我怎样才能找到它（只有 X 轴重叠）

平行于 X 轴的 2 个部分（每个部分具有相同的 Y）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:17:22.397

两点可以定义一个矩形。

您在寻找 Rectangle.Intersect 方法吗？

[http://msdn.microsoft.com/en-us/library/y10fyck0.aspx](http://msdn.microsoft.com/en-us/library/y10fyck0.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:24:36.250

我对您的问题的理解是，您首先要在 X 轴上投影两条线，然后找到它们的交点。

![在此处输入图像描述](../Images/1fcf756969ae614fc888229ab0370de0.png)

也就是说，您需要上图中 X 轴上灰色部分的长度。

您需要分 4 个部分执行此操作，如下所示：

```
if (other.pointLeft.X <= pointLeft.X && other.pointRight.X >= pointRight.X)
    return pointRight.X - pointLeft.X;

if (pointLeft.X <= other.pointLeft.X && pointRight.X >= other.pointRight.X)
    return other.pointRight.X - other.pointLeft.X;

if (pointLeft.X <= other.pointLeft.X && pointRight.X <= other.pointRight.X)
    return pointRight.X - other.pointLeft.X;

if (pointLeft.X >= other.pointLeft.X && pointRight.X >= other.pointRight.X)
    return other.pointRight.X - pointLeft.X;

return 0; 
```

请注意，我已经对此进行了编码，并且没有机会对其进行测试。但它应该让您对需要做什么有一个基本的了解。

# clearcase - RTC 源代码控制图标

> ID：10108810
> 
> 赞同：3
> 
> 时间：2012-04-11T15:12:37.600
> 
> 标签：clearcase, rtc

这两个 RTC 源代码控制图标有什么区别？是否确定哪个工作区由哪个组件加载？是否有解释每个 RTC 源代码控制图标的参考？

![在此处输入图像描述](../Images/f91b8f3911f5efc785422e60f3d166e1.png)

![](../Images/ab87cc658a878d09d8d2a35e5836b71d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T21:50:52.323

另请参阅以下链接中名为“Rational Team Concert Source Control 中使用的图标”的部分：http: [//thescmlounge.blogspot.com/2012/11/icons-used-in-rational-team-concert.html](http://thescmlounge.blogspot.com/2012/11/icons-used-in-rational-team-concert.html)

此链接不仅回答了有关组件图标（表示加载和未加载的组件）的问题，还回答了 Jazz SCM 中使用的其他图标的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:18:34.630

每个代表一个组件（RTC 组件，它与[ClearCase UCM 组件](https://stackoverflow.com/questions/1764329/clearcase-ucm-best-practices-using-components/1766662#1766662)具有相同的语义：一组连贯的文件，分支或标记为一个整体）。

*   蓝色代表加载到本地工作区（或沙箱）中的组件
*   白色代表未加载的组件（仅在存储库工作区中声明）

![回购工作区](../Images/ac5c19da07c2622d49fdc78e5686a496.png)

请注意，您总是会看到：

*   项目区域的“组件”部分中的蓝色部分，但仅指定组件本身，而不是其已加载或未加载状态。
*   项目区域的 Stream 部分列出的组件中的白色组件：未加载或未加载 Stream 上声明的组件（在该上下文中没有意义）
*   在流程图中显示的 Stream 中的一个蓝色的（请参见下面的最后一个插图）。同样，这并不意味着组件是否已加载，它只是意味着代码颜色约定在存储库工作区*之外不是很连贯......*

在存储库工作区中，含义很明确：蓝色等于“已加载”，白色等于“未加载”（在沙箱中）。

![溪流](../Images/9656c8273f28ee992cd132c5bad93e8f.png)

您可以使用流程图查看谁加载了哪些内容（请参阅文章“[轻松进入 Jazz 源代码控制](https://jazz.net/library/article/539/)”）：

![流程图](../Images/f727ffe6a530e854a6b51cc853a3fbb9.png)

# facebook - 使用 Facebook Graph API 时限制的最大值是多少？

> ID：10108811
> 
> 赞同：4
> 
> 时间：2012-04-11T15:12:37.703
> 
> 标签：facebook, facebook-graph-api, limit

使用 Facebook Graph API 时，limit 参数的最大值是多少？

[https://graph.facebook.com/me/friends?limit=123](https://graph.facebook.com/me/friends?limit=123)

[https://graph.facebook.com/me/likes?limit=456](https://graph.facebook.com/me/likes?limit=456)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:21:26.690

令人遗憾的是，这是没有记录的，也从未在文档中完整描述过。

顺便说一句，有时使用 Graph Explorer 我注意到分页链接有`5000`指定的限制，有时它的价值要小得多。它在不同的方法和对象之间可能一致，也可能不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T05:05:08.723

我的应用程序中有 5000 个，它工作得很好，但是对于一些用户来说，我遇到了错误。经过几次测试后，一切都开始重新使用 3000。

# css - 带有不规则边框的 CSS 文本突出显示

> ID：10108817
> 
> 赞同：1
> 
> 时间：2012-04-11T15:12:59.517
> 
> 标签：css, canvas

我正在尝试在具有**非矩形背景**的页面上突出显示文本（即边框使用活泼角度的突出显示）。文本是流动的（即它在可用空间中流动）。

[不规则形状的高光 http://mockupserver.com/irregular_example.png](http://mockupserver.com/irregular_example.png)

我一直在网上搜索并绞尽脑汁想出一个解决方案；可能是使用 canvas 元素的东西。这是一个非关键的设计元素；如果它只适用于最现代的浏览器并在旧浏览器中显示矩形边框；那将是相当令人满意的。

有人有想法么？

**更新**：根据以下建议；我尝试使用边框图像样式属性来创建效果。我首先将我的文本放在一个*SPAN*中（而不是一个*P*，它会在文本块周围绘制一个矩形框 - 而不是每个单独的行周围的边框）。然后我尝试使用如下样式属性：

```
-moz-border-image:url("border.png") 5% stretch stretch;
-webkit-border-image:url("border.png") 5% stretch stretch;
border-image:url("border.png") 5% stretch stretch; 
```

这几乎可以工作......除了我在不同的浏览器中得到完全不同的结果。例如; 在 Chrome 中，边框图像在所有文本行中被拉伸一次（即图像的左侧从第一行的开头开始，图像的右侧在最后一行的末尾结束）；而在 FF 中，它会在每一行上拉伸一次（即在每一行上，图像开始和结束）。

还; 设计要求每一行文字与线条有不同的角度；这在任何浏览器中都不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:15:35.043

我不认为它可以做到。但 ！您可以使用 PHP 生成某种具有预定义图像的非矩形形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:15:56.893

如果你有 CSS3 能力，border-image 可能是一个选项。将边框图像设置为您的活泼边缘设置，其背景颜色/图像与边框相同，因此可以很好地融合。我在下面发布了一个链接。我以前没有使用过边框图像，但从我在[这里](http://css-tricks.com/understanding-border-image/)读到的内容来看似乎是一种可能性。

# ruby - 我可以在 RSpec 中存根 STDERR 吗？

> ID：10108820
> 
> 赞同：3
> 
> 时间：2012-04-11T15:13:08.990
> 
> 标签：ruby, rspec, stub

我有一个我想测试的简单功能（也许主要是为了安抚 simplecov）。功能是：

```
module Utils
  extend self

  def blather(msg)
    msg = "=== " + msg
    STDERR.puts(msg)
    Rails.logger.debug(msg)
  end

end 
```

存根的[RSpec 文档](https://www.relishapp.com/rspec/rspec-mocks/docs/method-stubs/stub-on-any-instance-of-a-class)说：

> 消息可以在任何类上存根，包括 Ruby 核心库中的那些。

但以下内容：

```
# file: spec/lib/utils_spec.rb
require 'spec_helper'
describe Utils do
  context "blather" do
    it "should print to STDERR" do
      STDERR.any_instance.should_receive(:puts).with("=== zoo")    
      Utils.blather("zoo")
    end
  end
end 
```

...我收到一个错误

```
undefined method `any_instance' for #<IO:<STDERR>> 
```

抛开这个测试是否有意义的问题，是否可以存根 STDERR（IO 类）？这是因为它是类方法而失败吗？或者这种测试有更明智的策略吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:26:16.607

首先，您通常应该使用`$stderr`而不是`STDERR`.

```
module Utils
  extend self

  def blather(msg)
    msg = "=== " + msg
    $stderr.puts(msg)
    Rails.logger.debug(msg)
  end

end 
```

要回答您的问题，您可以在 RSpec 中执行以下操作：

```
describe Utils do
  context "blather" do
    it "should print to stderr" do
      $stderr.should_receive(:puts).with("=== zoo")
      Utils.blather("zoo")
    end
  end
end 
```

您只需通过`$stderr.should_receive`. 因为`$stderr`它是一个普通对象，所以您可以像普通对象一样在其上存根方法，并对其设置期望值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-27T09:59:58.843

有很多方法可以写入 stderr，因此最好测试生成的字符串，而不是要求`puts`使用特定参数调用一次。

只要您的函数使用`$stderr`（旨在更改）而不是`STDERR`const，您就可以使用 rspec 的漂亮[`output`匹配器](https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/output-matcher)：

```
expect { blather("zoo") }.to output(/=== zoo/).to_stderr 
```

如果您需要更多控制，您可以用一个实例替换`$stderr`（并且可能） ，然后对其进行断言......（这是输出匹配器[在内部所做](https://github.com/rspec/rspec-expectations/blob/v3.6.0/lib/rspec/matchers/built_in/output.rb#L157-L168)的。）`stub_const "STDERR"``StringIO``.string`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:08:46.867

呃。STDIO 不是一个类——它是 IO 的一个实例，所以改变：

```
STDERR.any_instance.should_receive(:puts).with("=== zoo") 
```

到

```
STDERR.should_receive(:puts).with("=== zoo") 
```

使测试通过。

# java - 使用 warble 打包到 jar 中后，带有 Rubeus 和 Swing 的 JRuby 脚本退出

> ID：10108822
> 
> 赞同：2
> 
> 时间：2012-04-11T15:13:15.273
> 
> 标签：java, swing, concurrency, jruby, jframe

我正在尝试将一个简单的 JRuby 脚本打包到一个 jar 文件中。该脚本使用**Rubeus::Swing**并在使用 JRuby 解释器执行时正确运行。

```
require 'rubygems'
require 'rubeus'

class Example01
  extend Rubeus::Swing
  def show
    JFrame.new("Rubeus Swing Example 01") do |frame|
      frame.visible = true
    end
  end
end
Example01.new.show 
```

一旦我将脚本打包到一个 JAR 中`warble`，当我执行时：

```
java -jar jtest.jar 
```

... JFrame 窗口出现并立即关闭。

没有任何错误的迹象。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T18:08:25.400

Warbler 在您的主脚本退出后调用 System.exit()。这会导致 Swing EventThread 退出，关闭您的应用程序。

[https://github.com/jruby/warbler/blob/master/ext/JarMain.java#L131](https://github.com/jruby/warbler/blob/master/ext/JarMain.java#L131)

我通过加入启动脚本底部的事件线程来解决这个问题，如下所示：

```
event_thread = nil
SwingUtilities.invokeAndWait { event_thread = java.lang.Thread.currentThread }
event_thread.join 
```

哈克，但它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T10:50:19.823

只需设置适当的标志：

```
System.setProperty("warbler.skip_system_exit","true"); 
```

# ios5 - IOS 5 中的 AUTimePitch 或 AUPitch

> ID：10108826
> 
> 赞同：1
> 
> 时间：2012-04-11T15:13:26.220
> 
> 标签：ios5, core-audio

我目前正在核心音频部分浏览 ios 文档。

我只是想在不必编写自己的处理回调的情况下进行音高转换，而且我真的对文档告诉我一件事而标题说另一件事感到困惑。

我的第一个问题是关于 kAudioUnitSubType_Pitch

[首先，在这里](https://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/CoreAudioOverview/SystemAudioUnits/SystemAudioUnits.html)文档的 ios 部分中列出了音高单元，但是当我尝试将其添加到代码中时，它未在代码提示和音频单元标题中列出，它说它仅适用于桌面。是否可以在 ios 5 中使用它，或者我正在查看错误的文档。

[其次，也是在这里](http://developer.apple.com/library/ios/#documentation/AudioUnit/Reference/AUComponentServicesReference/Reference/reference.html)文档的 ios 部分，我对 kAudioUnitSubType_TimePitch 感兴趣。它已列出，但说明 ios 2.0 到 ios 2.0。这是否意味着您不能在 ios5 中使用它？

有人能给我澄清一下这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:32:12.267

Apple 的时间音高修改 AU 目前在 iOS 5 中不可用，仅在桌面 Mac OS 中可用。早期的 AU 文档已更正。当前的 iOS 5.x 仅支持音高重采样器单元。

但是，如果您不想自己动手，似乎有一个或多个用于音频时间音高修改的商业 iOS 库解决方案。

稍后添加：只有第一代 iPad 仅限于 iOS 5.x。iOS 7 包括 NewTimePitch 音频单元。但是这个音频单元的质量（目前）低于 OS X TimePitch 音频单元

# facebook-page - 在没有管理页面权限的情况下检索成员的页面 ID

> ID：10108828
> 
> 赞同：1
> 
> 时间：2012-04-11T15:13:35.070
> 
> 标签：facebook-page, accounts

谁能告诉我是否可以在没有管理页面权限的情况下检索成员页面列表？或者是否可以向图形发送一个 facebook 页面 id 并让它返回当前 FB 用户是否管理该页面。

我有一个页面选项卡应用程序，FB 用户可以将其安装到他们的一个页面上，为了在他们的 facebook 页面上从我的网站显示有关当前 FB 用户的相关信息，我需要知道他们给我的页面由他们管理。

因为我不想对页面本身进行任何控制，只知道我收到的页面 id 与当前的 FB 用户相关联，因此请求以任何和所有 facebook 页面的身份登录的权限似乎有点过度权限

# javascript - Javascript 和表达式引擎标签

> ID：10108829
> 
> 赞同：0
> 
> 时间：2012-04-11T15:13:38.643
> 
> 标签：javascript, expressionengine

我有一个 EE 网站，上面有一个 flickrshow 画廊。我想创建一个频道字段来编辑 flickr 集 ID。问题是 ee 标签是用大括号 {ee_tag} 打开和关闭的，所以 js 被破坏了。

有没有办法使用不同的 ee 标签或让 js 从隐藏的（不显示）div 元素中获取集合 id。然后我可以将 ee 标签放在隐藏元素中，允许 cms 管理 id。代码：

```
 <!-- flickrshow -->
<div class="example" id="cesc">
    <p>Please enable Javascript to view this slideshow</p>
</div>

{exp:channel:entries channel='flickr'}

<script src="/js/flickrshow-7.2.min.js"></script>
<script>
    var cesc = new flickrshow('cesc', {
        autoplay:true,
        'set':'{flickr_set}'
    });
</script>

{/exp:channel:entries}

<!-- end flickrshow --> 
```

上面在 js 代码中带有 ee 标签。使用 js 引用隐藏 div 的波纹管：

```
 <!-- flickrshow -->
<div class="example" id="cesc">
    <p>Please enable Javascript to view this slideshow</p>
</div>

<script src="/js/flickrshow-7.2.min.js"></script>
<script>
    var cesc = new flickrshow('cesc', {
        autoplay:true,
        'set':'=(#hidden_div value)'
    });
</script>

<!-- end flickrshow -->

<div id="#hidden_div">
{exp:channel:entries channel='flickr'}

{flickr_set}

{/exp:channel:entries}
</div> 
```

我不知道足够的js来进一步完成第二个例子。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:49:45.833

您的 Flickr 集 ID 在模板中正确输出，但您的`flickr_set`字段在 ExpressionEngine 中设置为 XHTML 格式，因此它被包裹在段落标签中。将字段格式更改为“无”，确保勾选“使用此格式更新所有现有条目”框，然后保存您的字段。

始终在您的页面上查看源代码以找出问题所在！

```
<script>
    var cesc = new flickrshow('cesc', {
        autoplay:true,
        'set':'<p>72157629620181853</p>'
    });
</script> 
```

# javascript - Javascript forEach 不起作用

> ID：10108833
> 
> 赞同：0
> 
> 时间：2012-04-11T15:13:46.453
> 
> 标签：javascript, google-maps, for-loop

我的目标是遍历一组结果并对数据进行处理，但由于某种原因，我无法让 javascript 中的 foreach 循环工作，我似乎无法进行任何类型的枚举工作。

这是我的测试

```
console.debug("I got this far.");
for(var i=0;i< results.length; i++){
    console.debug("Worked.");
}
console.debug("Past.");
console.debug(results); 
```

我也试过

```
results.forEach(function(x) { console.debug("Worked"); }); 
```

和

```
for(var x in results) 
```

似乎没有任何工作，我做错了什么吗？

上面的输出是

```
I got this far.  query.html:39
Past.            query.html:40
[ Object , Object , Object , Object , Object , Object , Object , Object , Object , Object ] 
```

所以我知道结果变量是正确的类型，但它只是没有迭代。在另一个地方 forEach() 工作得很好，但在这里不是，任何关于如何调试和解决这个问题的建议都会有所帮助。

完整代码（工作解决方案）

```
var table;
var request = { query : { match_all : {}}};
var map;
function initialize(results) {
    var myOptions = {
      zoom: 8,
      center: new google.maps.LatLng(41.4, -71.3),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);
    results.forEach(function(x) {
      var markerLoc = new google.maps.LatLng(x.location.lat, x.location.lon);
      var marker = new google.maps.Marker({
        position: markerLoc,
        map: map,
        title: "Hello World!"
        });
      });

};
$(document).ready(function() {
        var results = [];
        $.ajax({
            url: "http://localhost:9200/devices/devices/_search",
            type: "POST",
            data: JSON.stringify(request),
            dataType: "json",
            beforeSend: function(x) {
                if ( x && x.overrideMimeType) {
                    x.overrideMimeType("application/j-son;charset=UTF-8");

                    }
            },
            success: function(data) { 
                data.hits.hits.forEach(function(x) { results.push(x._source); } );
                initialize(results);
            }

        });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:25:59.907

Ajax 请求*一发送*，您就传递`results`给。您无需等待响应返回，因此填充它的代码不会触发，直到为时已晚。`initialize`

 *将调用移动到`initialize`，使其位于`success`处理程序内部。*

# javascript - 单击第一个组件时未显示日期选择器

> ID：10108834
> 
> 赞同：0
> 
> 时间：2012-04-11T15:13:48.210
> 
> 标签：javascript, jquery, datepicker

我的 JSP 中有以下代码，并将变量与淘汰赛 js 绑定。

我的js是

```
 calender: function () {
     console.log("in calender");
     var dates = $("#from1, #to1").datepicker({
     defaultDate: "+1w",
     changeMonth: true,
     numberOfMonths: 1,
     onSelect: function (selectedDate) {
         var option = this.id == "from" ? "minDate" : "maxDate",
             instance = $(this).data("datepicker"),
             date = $.datepicker.parseDate(
             instance.settings.dateFormat || $.datepicker._defaults.dateFormat, selectedDate, instance.settings);
         dates.not(this).datepicker("option", option, date);
     }
 });
 }, 
```

**而jsp是**

```
 <div class="DateRange">
 <label for="from">From</label>
 <input type="text" id="from" name="from" data-bind="click: calender, value:    starDate"/>
 <label for="to">to</label>
 <input type="text" id="to" name="to" data-bind="click: calender, value: endDate"/>
 </div> 
```

当我单击开始日期或结束结束日期时，将调用日历方法，但问题是第一次在第一个组件上单击日期选择器（仅调用方法），无论其 ID 是否。从下一次单击第二个组件开始，只有 datepicker 正常。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:43:37.980

它不会触发，因为输入实际上不是 datapicker()，直到它第一次通过 calendar 方法。第二次单击输入是一个数据选择器，因为它是在日历方法的第一次传递中设置的。

为什么不直接这样做而不是使用日历方法：

```
$("#from1, #to1").datepicker({...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:41:46.177

简而言之 1\. 将数据选择器初始化移出日历方法。2.为每个字段创建两个单独的方法，它们将显示适当的日期选择器，即：

```
 $("#from1, #to1").datepicker({
     defaultDate: "+1w",
     changeMonth: true,
     numberOfMonths: 1,
     onSelect: function (selectedDate) {
         var option = this.id == "from" ? "minDate" : "maxDate",
             instance = $(this).data("datepicker"),
             date = $.datepicker.parseDate(
             instance.settings.dateFormat || $.datepicker._defaults.dateFormat, selectedDate, instance.settings);
         dates.not(this).datepicker("option", option, date);

      }
    });    

    ........

    calenderFrom: function () {
     $("#from1").datepicker("show");
    }
    calenderTo: function () {
     $("#to1").datepicker("show");
    }

<input type="text" id="from" name="from" data-bind="click: calenderFrom, value:    starDate"/>
<input type="text" id="to" name="to" data-bind="click: calenderTo, value: endDate"/> 
```

**UPD** 我假设您使用 jQueryUI 日期选择器。如果是这样，您实际上不需要手动显示它；只需初始化它

# .net - .NET 加密处理密钥的方式是否安全？

> ID：10108839
> 
> 赞同：4
> 
> 时间：2012-04-11T15:14:05.617
> 
> 标签：.net, security, encryption

在生成对称密钥来加密消息时，您会在进程的内存中创建一个字节数组。

接下来，您实例化一个[SymmetricAlgorithm](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.aspx)，例如[AesCryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx)。然后通常将 key 属性设置为内存中的密钥。

然后，您通常通过调用[SymmetricAlgorithm.CreateEncryptor()](http://msdn.microsoft.com/en-us/library/09d0kyb3.aspx)或[CreateDecryptor()](http://msdn.microsoft.com/en-us/library/79w421xb.aspx)创建一个[ICryptoTransform](http://msdn.microsoft.com/en-us/library/system.security.cryptography.icryptotransform.aspx)。您也可以跳过设置上面的 Key 属性并将密钥和 IV 直接传递给[CreateEncryptor(byte[], byte[])](http://msdn.microsoft.com/en-us/library/z565ef9x.aspx)或[CreateDecryptor(byte[], byte[])](http://msdn.microsoft.com/en-us/library/c4yktzw1.aspx)。

1.  一旦创建 ICryptoTransform 以防止流氓软件读取字节数组，是否更安全？在使用字节数组生成加密随机数据并初始化转换时，固定是否提供任何安全性？

2.  如果您设置 SymmetricAlgorithm.Key 属性，是否在某处有额外的副本，或者只是指向您的秘密字节数组的指针？创建转换后立即处理 SymmetricAlgorithm 是否更安全？

3.  创建 ICryptoTransform 时，我假设现在 RAM 中有一个额外的副本。那么在 ICryptoTransform 对象的生命周期内，流氓软件是否可以读取密钥？处理后如何？

    换句话说，如果我有一个流，我的软件会间歇性地向其中写入加密数据，那么最好用一个单独的密钥加密每一点，并销毁/处置我所能做的一切，以尽量减少密钥被盗的时间？

有人可能会说，一旦电脑上出现了流氓软件，就没有什么是安全的，因此担心它是没有用的。我仍然宁愿采取措施，尽量减少因攻击者获得个人数据加密密钥而造成的潜在损害。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:26:12.367

1.  不，这并不安全。

2.  没关系，不，这并不安全。

3.  是的，任何有权限的软件都可以读取它。处理后可能无法读取，因为 .Net 加密中的 Dispose() 通常会将内存归零。

对此有很多宗教争论，但我只是从实际意义上尽可能清楚地给出答案：如果“流氓软件”（即恶意软件）以访问解密程序内存空间的权限运行，它不仅可以读取密钥，还可以读取您解密的数据。当然，这更像是一个问题——毕竟这是密钥所保护的。你不会阻止用户查看他们自己的数据，是吗？因此，您没有添加任何安全性。

换句话说，可计算性的原则是补充而不是取代主机平台上的安全规则。两者相加，两者都是安全所必需的。如果解密机器上没有主机安全性，就无法获得加密安全性。尝试添加它只会增加更多复杂性并增加您引入*真正*错误的可能性（尽管 .NET 会为您进行内存管理，所以这不是问题）。

# node.js - Meteor 支持在 Windows 上开发

> ID：10108840
> 
> 赞同：53
> 
> 时间：2012-04-11T15:14:09.120
> 
> 标签：node.js, meteor

Meteor 是否支持在 Windows 上开发？我没有在文档中看到任何下载或提及 Windows。

“快速入门”假设您使用的是 *Nix OS。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-10T18:52:00.890

Meteor 1.1+：在[https://win.meteor.com/上推出官方 Windows 支持](https://win.meteor.com/)

Meteor 1.0+：有[官方的 Windows 预览版](https://github.com/meteor/meteor/wiki/Preview-of-Meteor-on-Windows)。

Meteor 0.8 及更早版本：见[http://win.meteor.com/](http://win.meteor.com/)

* * *

[![](../Images/06c7a98288ab6c6fd638d264df366aeb.png)](https://i.imgur.com/OPF6h.png)

证明，Meteor 在 Windows 上运行。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-13T04:45:06.613

**编辑：**见[汤姆的回答](https://stackoverflow.com/a/10540448/1269037)。

下面的旧答案。

* * *

不，Windows 尚不支持此功能。如果您尝试安装，您将收到以下错误：

```
Sorry, this OS is not supported yet. 
```

作为一种解决方法，您可以在 VM 中运行 linux 机器并将其用作服务器来运行流星，但仍然可以在 Windows 内进行所有开发。我已经使用 VirtualBox 来运行没有 GUI 的 Ubuntu。以下是步骤：

1.  安装[VirtualBox](https://www.virtualbox.org/wiki/Downloads)
2.  获取[Ubuntu ISO](http://www.ubuntu.com/download/ubuntu/download)
3.  使用 VirtualBox 设置 Ubuntu VM（只需按照向导步骤操作）
4.  在 VM 上安装 samba 以启用 Windows 文件访问。这篇[文章](http://www.7tutorials.com/how-access-ubuntu-shared-folders-windows-7)很有帮助。
5.  使用 Ubuntu 软件中心安装 ssh。[这](http://www.liberiangeek.net/2010/09/connect-ubuntu-10-0410-10-maverick-meerkat-secure-shell-ssh/)很有帮助。
6.  使用 vboxheadless -startvm "VM Name" 关闭 VM 并从 DOS 提示符运行
7.  然后，您可以使用 ssh 客户端（我使用的是 cygwin）连接到盒子以运行命令，例如 ssh user@box_ip_address
8.  可以使用 Windows 文件共享浏览和编辑文件，例如 \\box_ip_address\share
9.  可以在本地浏览器中运行meteor应用程序，只需将meteor分配的地址中的localhost替换为盒子的ip地址。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-17T21:05:29.470

**由于这个问题的现有答案非常过时，因此进行了大量更新。**

* * *

官方 Windows 支持可以在[https://github.com/meteor/meteor/wiki/Preview-of-Meteor-on-Windows找到](https://github.com/meteor/meteor/wiki/Preview-of-Meteor-on-Windows)

可以在[http://win.meteor.com/上找到对 Meteor 的非官方 Windows 支持](http://win.meteor.com)

win.meteor.com 上列出了 3 个解决方案，一个本机 MSI 安装程序，以及 2 个基于 Vagrant 的虚拟化解决方案：

1) 微星安装程序：

> 斯蒂芬·达内尔接续了汤姆·威斯曼优雅地离开的地方。此解决方案是使用提供的 MSI 安装程序在 Windows 上运行 Meteor 的最直接方法。有一些权衡，因为这是一个分支，并且可能落后于最新版本，因为 Stephen 可以更新并测试最新版本。

2) Vagrant Shell 供应

> Gabriel Pugliese 发布了如何使用 Vagrant 的 Shell Provisioning 在 Linux 上配置 Meteor 的指南。熟悉 Linux 和 Shell 脚本的用户可能更容易访问这些脚本。与 Chef 替代方案相比，此解决方案更容易通过直接的 shell 命令进行调整。

3) Vagrant Chef 供应

> Matthew Sullivan 正在维护一组 Vagrant 文件、Chef 食谱和使用 Vagrant 在 Linux 上配置 Meteor 的指南。这个 Chef 解决方案比 shell 解决方案更自动化和可配置，但在提供的配置参数之外进行调整可能不像 shell 解决方案那么简单。

GitHub Repos 和详细信息可以在[win.meteor.com](http://win.meteor.com)上找到。这三位作者对[Meteor-talk Google Group](https://groups.google.com/forum/?fromgroups#!forum/meteor-talk)的反应非常好。

* * *

**一点历史：**

对 Meteor 的非官方 Windows 支持由 Tom Wijsman 发起，并由 Tom 支持到 0.5.9。0.6.0 及更高版本由 Stephen Darnell、Gabriel Pugliese 和 Matt Sullivan 编写。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-11T15:30:36.370

我只是尝试`curl`在 Windows 7 上安装它，并得到：

```
Sorry, this OS is not supported yet. 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-28T21:13:46.273

我没有看到这里提到的[Nitrous.io](http://www.nitrous.io)。

我将 Nitrous.io 与[Nitrous Desktop](https://www.nitrous.io/desktop#windows)一起使用，它允许您使用您最喜欢的文本编辑器（在我的例子中是 Sublime Text）。

[这里](http://youtu.be/Y6WANmBe1Tk)有一个快速教程，[Discover Meteor](https://www.discovermeteor.com/)在第 2 章中也会涉及到这个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-11T16:35:10.497

听起来 Windows 还不支持。如果您想使用它，我建议您使用[VirtualBox](https://www.virtualbox.org/)并在其上安装您最喜欢的 Linux 风格。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-21T19:52:42.607

截至两天前，此处提供了预览版：

[https://github.com/meteor/meteor/wiki/Preview-of-Meteor-on-Windows](https://github.com/meteor/meteor/wiki/Preview-of-Meteor-on-Windows)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-20T11:49:09.697

我发现同样是 Meteor 新手的新编码员可能已经正确安装了它，但在弄清楚如何打开和运行它时遇到了麻烦。所以我将在这篇文章中解决这个问题。

1）我假设你去了这里：[http](http://win.meteor.com/) ://win.meteor.com/并下载了 MSI 安装程序

2）我假设你然后在流星中创建了一个*新应用程序*，然后运行流星

3) 如果步骤 1 和 2 完成，您应该在命令行中看到：

正在初始化 mongo 数据库...这可能需要一点时间。=> Meteor 服务器运行在：`http://localhost:3000/`

4) 打开 Chrome 并输入本地主机地址：`http://localhost:3000/`

5）打开你的*newapp*文件夹 - 应该位于你的Meteor文件夹中，无论它安装在你的硬盘上

6)在你最喜欢的编辑器（如 Sublime Text 2）中打开你的*newapp.html*、*newapp.css*和*newapp.js文件*

7) 按照您的喜好开始编辑这些文件并观察您的页面自动更新，正如 Meteor 设计的那样。

瞧！！您正在使用 Meteor 进行构建。享受！！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-26T17:53:03.687

1.  我下载了上面的 .msi 安装程序并安装到`c:\Meteor`
2.  将刚刚创建的目录添加 `c:\Meteor`到 PATH 环境变量中。
3.  运行以下命令： npm install Meteor-Test-Installer
4.  将刚刚创建的目录添加`C:\Meteor\bin\node_modules\npm\bin`到 PATH 环境变量中。

从我的 DOS 屏幕登录如下：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation. All rights reserved.

C:\Users\mike>cd\

C:\>cd meteor

C:\Meteor>cd C:\Meteor\bin\node_modules\npm\bin

C:\Meteor\bin\node_modules\npm\bin>meteor create try-meteor
try-meteor: created.

To run your new app:
cd try-meteor
meteor

C:\Meteor\bin\node_modules\npm\bin>curl
‘curl’ is not recognized as an internal or external command,
operable program or batch file.

C:\Meteor\bin\node_modules\npm\bin>cd try-meteor

C:\Meteor\bin\node_modules\npm\bin\try-meteor>meteor
[[[[[ C:\Meteor\bin\node_modules\npm\bin\try-meteor ]]]]]

Initializing mongo database… this may take a moment.
Running on: http://localhost:3000/ 
```

在浏览器中打开`http://localhost:3000/`...瞧！

你好世界！

欢迎尝试流星。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-07T08:06:15.997

如果您收到如下错误：

```
{
[[[[[ D:\sms\Apps\Meteor\bin\node_modules\npm\bin\try-meteor ]]]]]

Unexpected mongo exit code 127\. Restarting.
Unexpected mongo exit code 127\. Restarting.
////////////////////////////////////////
////////////////////////////////////////

meteor is out of date. Please run:

     meteor update

////////////////////////////////////////
////////////////////////////////////////
Unexpected mongo exit code 127\. Restarting.
Can't start mongod. Check for other processes listening on port 3002 or other me
teors running in the same project.
} 
```

使用来自 mongodb 站点的最新 mogodb 文件更新 MondoDB 文件夹。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-12T08:34:20.433

Using linux in VM you probably want meteorite which isn't easy if you are as bad as I am to Linux... Here's how (thank you johntday [Unable to install meteorite on Ubuntu VM](https://stackoverflow.com/questions/21067674/unable-to-install-meteorite-on-ubuntu-vm/21068821?noredirect=1#21068821)):

Here are my Install Steps

Update and Upgrade your Ubuntu Depending on how up-to-date your image is, this may take a while. sudo apt-get update && sudo apt-get upgrade

Install curl sudo apt-get install curl

Install node [http://lucidservices.com/2013/09/17/install-node-on-ubuntu/](http://lucidservices.com/2013/09/17/install-node-on-ubuntu/)

Install meteor curl [https://install.meteor.com](https://install.meteor.com) | sh

Install meteorite sudo -H npm install -g meteorite

If you have problems setting a high screen resolution, here's a fix:

[http://youtu.be/t36wXUu1UtQ](http://youtu.be/t36wXUu1UtQ)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-01-22T02:03:44.223

最近查看他们的网站并查看他们的常见问题解答，您会发现 Meteor 开发路线图。他们将其托管在 Trello 上，在 1.0 发布后，您将看到“官方 Windows 支持”。所以，它在地图上 - 现在我们等待！

[https://trello.com/board/meteor-roadmap/508721606e02bb9d570016ae](https://trello.com/board/meteor-roadmap/508721606e02bb9d570016ae)

# objective-c - UiTableCell 保持选中状态

> ID：10108844
> 
> 赞同：1
> 
> 时间：2012-04-11T15:14:23.583
> 
> 标签：objective-c, ios, uitableview

我创建了一个带有表格视图的 ViewController，因为我需要一个标签栏，但是当我选择一个单元格转到详细视图时，我将返回该单元格仍然被选中。（与标签栏相同）

有谁知道如何解决这个问题？我的所有代码都与 Tableviewcontroller 相同

[http://i.imgur.com/f22rT.png](http://i.imgur.com/f22rT.png)

或者; 是否可以将 Tabbar 添加到 Tableviewcontroller？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:22:39.840

我认为您只需要取消选择该行。在视图控制器的*viewWillAppear*方法中添加代码以取消选择选定的 tableview 行。（提示：[indexPathForSelectedRow](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/indexPathForSelectedRow)和[deselectRowAtIndexPath：动画](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/deselectRowAtIndexPath:animated:)：）

此外，关于你的第二个问题，我认为你可以在另一个[SO question](https://stackoverflow.com/questions/5930526/manually-add-uitabbar-to-uitableviewcontroller)中找到一个很好的答案。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:17:02.870

试试这个：

```
- (void)viewWillAppear:(BOOL)animated {
    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:NO];
} 
```

# php - 如果包含短语 PHP MySQL 省略结果

> ID：10108846
> 
> 赞同：0
> 
> 时间：2012-04-11T15:14:37.510
> 
> 标签：php, mysql, sql

我需要一些 PHP 和 MySQL 代码的帮助。目前我有一个 php 文件，它显示我数据库中表的内容。我希望它忽略匹配“未预订”的结果。因此，该文件仅向我显示已预订的插槽。这是我的代码：

```
<link href="../css/pagestyle.css" rel="stylesheet" type="text/css" />
<?php 
include("../config.php");
include("functions.php");
if($logged["level"] == "HDJ" OR $logged["level"] == "SA") {

echo "<div class=\"head\">View Booked Slots</div>
<img src=\"../images/spacer.png\" width=\"5\" height=\"5\">
<div class=\"board\">Here you can view booked slots.</div>
<img src=\"../images/spacer.png\" width=\"5\" height=\"5\">
<table width=\"580px\" class=\"board\" border=\>";
      $order = "SELECT * FROM timetable";
      $result = mysql_query($order);
      while ($row=mysql_fetch_array($result)){
        echo ("<tr><td>$row[username]</td>");

        </tr>");
      }
      echo "
      </table>
"; 

    } else {
echo ("<div class=\"caution\">Access is denied.</div>");
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:16:25.283

修改查询以不首先拉取它们。

```
$order = "SELECT * FROM timetable WHERE <the column> <> 'Not Booked'; 
```

替换为表中出现`<the column>`的正确列名。`Not Booked`

通常不建议像您在此处所做的那样混合数据库逻辑和显示逻辑。相反，您应该在输出表之前进行查询，并将其结果存储在数组中。然后遍历数组以显示您的表格。

```
$order = "SELECT * FROM timetable WHERE somecolumn <> 'Not Booked'";
$result = mysql_query($order);

// Error checking
if (!$result) {
  // output error, take other action
}
else {
  while ($row=mysql_fetch_array($result)){
     // Append all results onto an array
     $rowset[] = $row;
  }
} 
```

稍后，循环遍历数组以输出您的值。不要忘记使用`htmlspecialchars()`.

```
foreach ($rowset as $row) {
  echo "<tr><td>" . htmlspecialchars($row['username']) . "</td></tr>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:17:06.050

在您的 mySQL 代码中：

```
SELECT * FROM timetable WHERE myvariable <> 'Not Booked' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:21:29.263

Michael 的回答只会提取 MATCH 'Not Booked' 的结果，而不是忽略它们。将代码调整为：

```
$order = "SELECT * FROM timetable WHERE <the column> <> 'Not Booked'; 
```

你会得到所有预订的（假设只有两个州）

# version-control - 重命名文件后无法提交代码

> ID：10108853
> 
> 赞同：1
> 
> 时间：2012-04-11T15:15:15.673
> 
> 标签：version-control, cvs, commit

我做了什么：

1.  重命名文件

2.  试图提交

3.  cvs 失败并显示错误消息

    > 文件应该被删除并且仍然存在（或再次返回）

问题是什么，我该如何解决它以便我可以提交？

* * *

附加信息：

*   我正在使用带有 CVS 插件的 Eclipse。
*   在文件所在的目录中执行`ls`显示它**不**存在

谷歌针对这个问题的所有其他点击（包括[这个问题](https://stackoverflow.com/questions/1287401/cvs-file-should-be-removed-and-is-still-there-or-back-again)）似乎都在询问当一个文件被 cvs 删除，然后在 cvs 范围之外恢复时该怎么做。我的问题不同：我只需要重命名一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:52:31.237

这意味着该文件已被 CVS 标记为删除，但随后又出现了。为 CVS 重命名只是删除旧名称的文件并添加新名称的文件。该文件必须以其旧名称再次出现。

你可以做两件事：

1）如果您不需要此文件，则只需将其删除。（使用`cvs -n update`命令找到它的名字。）然后你就可以提交了。

1）如果您需要保留此文件，请转到`.CVS`该文件所在文件夹的子文件夹并编辑`Entries`文件。在您的文件中找到一行并将其删除。然后重命名您的文件（给它一个临时名称），调用`cvs update`，重命名您的文件，覆盖 . 之后出现的新文件`cvs update`。

# automation - 如何将 InDesign IDML 转换为 Tiff？

> ID：10108856
> 
> 赞同：0
> 
> 时间：2012-04-11T15:15:32.087
> 
> 标签：automation, tiff, adobe-indesign, indesign-server

我需要获取客户端提供的 idml 文件，稍微旋转它们以填充一些占位符并生成 TIFF 文件。这需要自动发生，我可以使用 InDesign Server。

我有第一部分下来。我还发现了如何通过 SOAP 连接到 InDesign Server 并将 IDML 文件转换为高分辨率 PDF 或低分辨率 JPG（[这意味着其他一些选项](http://indesignscriptingreference.com/cs3/javascript-cs3/exportformat-enum.htm)）。

我对如何在剩下的过程中生成 TIFF 文件感到有点茫然，[adobe 论坛并没有太多帮助](http://forums.adobe.com/message/4324592)。我的印象是，这种事情正是引入 IDML 格式的原因，所以我假设那里有不错的支持，但到目前为止我能想到的最好的方法就是去`IDML via Indesign Server to PDF (or SVG) via Inkscape Command-line to PNG via System.Drawing to TIFF`，但这似乎太可怕了做作且容易出错（而且我不知道如何处理多个页面）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:01:55.730

我不相信有一种方法可以通过 InDesign Server 导出到 TIFF，但是我确实[在 Adob​​e 论坛上找到了这篇文章，该帖子](http://forums.adobe.com/thread/987386?start=0&tstart=0)建议在从 IDS 将 Tiff 导出为 PDF 后使用 Photoshop 渲染 Tiff。也许这将是一个选择？否则，也许您可​​以使用其中一种可以导出的格式（即 JPG、PDF、EPS）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T23:13:13.060

作为参考，[我最终使用 Ghostscript](https://www.nuget.org/packages?q=ghostscript)来实现结果。

# android - Android下一个/后退按钮检索下一个/上一个记录

> ID：10108857
> 
> 赞同：0
> 
> 时间：2012-04-11T15:15:33.497
> 
> 标签：android, database, button

我正在创建一个应用程序，该应用程序需要在每次单击按钮期间检索单行数据。

我创建了一个 DataBaseHelper 类，一旦实例化活动并通过文本视图显示值，它就会从数据库中调用和检索随机记录。但是，我无法检索下一条或上一条记录，因为我似乎无法访问 DataBaseHelper 类以获取下面提到的按钮规范中的位置值。

```
Button btn_quotes = (Button) findViewById(R.id.btn_random_quote);
btn_quotes.setOnClickListener(new View.OnClickListener() {

   public void onClick(View v) {
   // TODO Auto-generated method stub
                }
            }); 
```

我已经在网上和各种文章中检查过，但找不到任何合适的东西。请帮忙？

此外，

调用数据库类的实例，

```
DataBaseHelper myDbHelper = new DataBaseHelper(this);
myDbHelper = new DataBaseHelper(this); 
```

但是 onCreate 方法中的实例不能在 onClick 方法中引用。这就是我挣扎的地方。

得到错误：

无法在不同方法中定义的内部类中引用非最终变量 myDbHelper

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:19:20.870

`mCursor.moveToNext()`= 下一个和

`mCursor.moveToPrevious()`= 以前的....

# php - 如何编写这个特定的正则表达式

> ID：10108865
> 
> 赞同：0
> 
> 时间：2012-04-11T15:15:59.167
> 
> 标签：php, mysql, regex

如果我需要使用什么正则表达式

需要在玩家列表中选择“10”而不是从组中选择“10”

```
{"group":"10","player":["12","15","13","10","1"]} 
```

抱歉，我应该在编程范围上提供更多信息

json 字符串应该被视为字符串而不是 json 解析，因为我需要在 mysql 中使用查询来选择符合此条件的行。

例如，在上面的例子中......

`Select * from team Where jsondata=(Something to the effect that "10" can be found in player list but will ignore if "10" is found only in group)`

如果我使用：

```
Select * from team Where jsondata LIKE'%"10"%' 
```

那么显然这是错误的，因为如果数据是`{"group":"10","player":[]}`它仍然符合条件

我想运行一个 php 命令`preg_match`来匹配播放器列表中的“10”（如果找到）

感谢到目前为止已经回复的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:26:47.280

尝试这样的事情：`"player":\[.*"(10)"`或`"player":\[("\d+",)*?"(10)"`

取决于你喜欢它的程度。

在 MySQL 中，你可以使用这个：

```
SELECT * FROM team WHERE jsondata REGEXP '"player":.*"10"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:27:03.480

我知道你要求一个正则表达式。但是，如果字符串始终是 Python 字典，那么如何：

```
str = "{\"group\":\"10\",\"player\":[\"12\",\"15\",\"13\",\"10\",\"1\"]}"

"10" in eval( str )["player"] 
```

这将测试键`"10"`中列表的字符串是否存在。`"player"`你可能想要一些稍微不同的东西。**关键是，如果数据始终是一个序列化的 Python 数据结构，那么您将能够更自然地作为 Python 数据结构来处理这些数据。**

请注意，由于我是手动输入字符串，因此我必须将`"`. 如果您从文件中读取此字符串，则不必这样做。

# highcharts - 如何将 Highcharts.StockChart 的 rangeSelector 缩放定位在右侧？

> ID：10108877
> 
> 赞同：3
> 
> 时间：2012-04-11T15:16:42.843
> 
> 标签：highcharts, highstock

我的问题很简单：如何将 Highcharts.StockChart 的 rangeSelector 缩放定位在右侧？

[它的默认值](http://www.highcharts.com/stock/demo/)是左。我找不到任何有关它的文档。仅如何定位[inputBoxStyle的输入文本元素](http://www.highcharts.com/stock/ref/#rangeSelector)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T04:59:10.367

您只能更改输入和标签位置。
如果要更改按钮位置，则必须更改源代码。

# javascript - iPad 上的 JavaScript 错误

> ID：10108878
> 
> 赞同：1
> 
> 时间：2012-04-11T15:16:43.837
> 
> 标签：javascript, ios, ipad, mobile-safari, ios4

我得到了这个代码：

```
function zeroPad(num, places) {
  var zero = places - num.toString().length + 1;
  return Array(+(zero > 0 && zero)).join("0") + num;
}

result = "String begin ...." + zeroPad(o.m,2) + "Month" + ... + "String end ...."; 
```

在所有浏览器/系统上都可以正常工作。它显示如下内容：
**06 个月 26 天 09 小时**

但是在带有 Safari 的 iOS 4.3.2 的 iPAD1 上，它显示：
**NaN Months NaN Days NaN Hours**
(not a number)

这些苹果产品有什么问题，错在哪里？

//编辑（对于 DCoder）：
这是生成整行的代码，我认为这没有多大帮助。

```
h = '<span class="f_normal"><span class="f_bold">' + zeroPad(o.m,2) + '</span> Month' + (o.m == 1 ? '': 's')+ '  <span class="f_bold">' + zeroPad(o.d,2) + '</span> Day' + (o.d == 1 ? '': 's') + '  <span class="f_bold">' + zeroPad(o.h, 2) + '</span> Hour' + (o.h == 1 ? '': 's') + '</span>'; 
```

我搜索的真正问题是这个错误只出现在 iPad 上？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:18:50.373

听起来您需要将字符串转换为整数：

[http://www.javascripter.net/faq/convert2.htm](http://www.javascripter.net/faq/convert2.htm)

# javascript - 获取异步父函数的参数

> ID：10108887
> 
> 赞同：2
> 
> 时间：2012-04-11T15:17:04.513
> 
> 标签：javascript, node.js

我有这个：

```
function change( event, file ) {
  console.log( "filename", file );
  //It should be '_file', not 'file'.
  files.clients( file, function( clientOfFile ) {
    console.log( "for client:", clientOfFile );
    io.sockets.socket( clientOfFile ).emit( "change" );
  } );
}

client.on( "watch", function( file ) {
   _file = base + file; //filename with path
   files.add( _file, client.id );
   fs.watch( _file, change );
} ); 
```

`fs.watch`传递给回调一个没有路径的文件名。所以我希望它得到父函数参数`_file`。我以为我可以使用`.call`，但如何在回调中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:22:30.027

很多可能性，一种是使用`Function.prototype.bind`，如果您不需要`this value`在回调中访问原始文件：

```
fs.watch( _file, change.bind({_file: _file}); 
```

这样你就可以`_file`像访问

```
this._file; 
```

在您的回调方法中。

* * *

提醒一句：请注意，您在回调方法中使用了另一个匿名函数来回调`files.clients`. `this`不在那里引用相同的值。因此，如果您想在那里访问我们新传递的`this`引用，您需要调用另一个`.bind()`调用或将外部引用存储`this`在局部变量中。

# sql - 使用内部查询更新（连接）

> ID：10108892
> 
> 赞同：0
> 
> 时间：2012-04-11T15:17:30.827
> 
> 标签：sql, postgresql

我想我失去了它，谁能解释我为什么会遇到以下问题：这是我的查询：

```
 update financials.operator_summary_daily set
        osm_fos_id = fos_id
    from financials.operator_summary_daily daily
    join (
        select 
            osm_id,
            fos_id
        from financials.operator_summary_daily daily
        join financials.operator_settlement_monthly on daily.osm_opt_id = fos_opt_id and date_trunc('month', daily.osm_timestamp)::timestamp = date_trunc('month', fos_timestamp)::timestamp --and daily.osm_fos_id is null
    ) as result on result.osm_id = daily.osm_id 
```

内部查询返回 1963 条记录，但更新是在整个财务表中执行的。operator_summary_daily 并更新所有 39K 记录。

我在这里想念什么？

表：

```
CREATE TABLE financials.operator_summary_daily
(
  osm_id bigint NOT NULL DEFAULT nextval('financials.operator_summary_monthly_osm_id_seq'::regclass),
  osm_timestamp timestamp without time zone NOT NULL,
  osm_opt_id bigint NOT NULL,
  osm_gam_id bigint NOT NULL,
  osm_cur_id bigint NOT NULL,
  osm_ctt_id bigint NOT NULL,
  osm_turnover double precision NOT NULL,
  osm_revenue double precision NOT NULL,
  osm_timestamp_created timestamp without time zone NOT NULL DEFAULT now(),
  osm_timestamp_updated timestamp without time zone NOT NULL DEFAULT ('now'::text)::date,
  osm_fos_id bigint
);

CREATE TABLE financials.operator_settlement_monthly
(
  fos_id bigserial NOT NULL,
  fos_timestamp timestamp without time zone NOT NULL, -- Monthly timestamp
  fos_opt_id bigint NOT NULL,
  fos_royalties double precision NOT NULL,
  fos_carry_over double precision NOT NULL,
  fos_other_adjustments double precision NOT NULL,
  fos_due double precision NOT NULL,
  fos_collectable double precision NOT NULL,
  fos_balance double precision NOT NULL,
  fos_collected double precision NOT NULL,
  fos_baddebt double precision NOT NULL,
  fos_carryforward double precision NOT NULL,
  fos_ses_id bigint NOT NULL,
  fos_timestamp_created timestamp without time zone NOT NULL DEFAULT now(),
  fos_datetime_updated timestamp without time zone NOT NULL DEFAULT now(),
  fos_prq_id bigint
); 
```

编辑：
感谢您的快速回答，但是不应该需要 where，连接条件不是 LEFT，它是包容性的，并且应该只呈现匹配的行以进行更新。因此，应更新 37K 中的仅 1963 条记录（符合加入条件的记录）。我错了吗？

答案：正确的脚本：

```
 UPDATE financials.operator_summary_daily d
    SET    osm_fos_id = m.fos_id
    FROM   financials.operator_settlement_monthly m
    WHERE  
        m.fos_opt_id = d.osm_opt_id
        AND    date_trunc('month', d.osm_timestamp) = date_trunc('month', m.fos_timestamp)
        AND d.osm_fos_id is null; 
```

谢谢@ErwinBrandstetter。显然，我一直在对 JOIN 使用错误的假设，我的背景是 MS-SQL，它在那里的工作方式不同。从最终解决方案来看，JOIN 被完全删除并通过直接调用辅助表进行交换，这是 T-SQL 中无法做到的。

顺便说一句，以下内容不起作用，并且它确实包含其他评论建议的 where 子句。我仍然对 pgsql 在更新记录时如何处理 JOIN 感到困惑。

```
 update financials.operator_summary_daily set
        osm_fos_id = fos_id
    from financials.operator_summary_daily daily
    join (
        select 
            osm_id,
            fos_id
        from financials.operator_summary_daily daily
        join financials.operator_settlement_monthly on daily.osm_opt_id = fos_opt_id and date_trunc('month', daily.osm_timestamp)::timestamp = date_trunc('month', fos_timestamp)::timestamp 
    ) as result on result.osm_id = daily.osm_id
    where
        daily.osm_id = result.osm_id
        and daily.osm_fos_id is null; 
```

*   复杂的连接是我试图确保内部查询仅返回整个表的子集以用于“调试”目的的结果。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:23:31.570

您的 UPDATE没有`WHERE`条件。

该语句将更新`all`行。

您的陈述可能会像这样工作（非常简化）：

```
UPDATE financials.operator_summary_daily d
SET    osm_fos_id = m.fos_id
FROM   financials.operator_settlement_monthly m
WHERE  m.fos_opt_id = d.osm_opt_id
AND    date_trunc('month', d.osm_timestamp) = date_trunc('month', m.fos_timestamp)
-- AND daily.osm_fos_id is null -- ?? Why is this here / commented out? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:24:34.267

您没有`WHERE`链接到要更新到查询结果的表的子句`FROM`

你需要做类似的事情

```
update financials.operator_summary_daily set
    osm_fos_id = fos_id
from financials.operator_summary_daily daily
join (
    select 
        osm_id,
        fos_id
    from financials.operator_summary_daily daily
    join financials.operator_settlement_monthly on daily.osm_opt_id = fos_opt_id and date_trunc('month', daily.osm_timestamp)::timestamp = date_trunc('month', fos_timestamp)::timestamp --and daily.osm_fos_id is null
) as result on result.osm_id = daily.osm_id
WHERE daily.osm_id = financials.operator_summary_daily.osm_id -- condition to link 
```

# java - Hibernate：如何自动创建具有所有数据库字段的实体类

> ID：10108896
> 
> 赞同：0
> 
> 时间：2012-04-11T15:17:47.840
> 
> 标签：java, hibernate

我正在使用 MySQL、Hibernate、Java、GWT 开发一个项目

我正在创建一个实体类，我正在根据 mysql 中的字段创建每个字段，就像在 MySQL 中有一个包含字段、id、名称、密码和许多其他字段的表 UserInfo

现在，当我在 java/hibernate 中创建实体类时，我必须用手创建每个字段，即 id、name、password 和其他字段

我只是想知道是否有一种方法可以让我的实体类自动检测我的数据库表中的所有字段，并在 java 本身中创建所有字段并将它们与数据库字段链接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:23:11.223

hibernate 有一个名为“hibernate.hbm2ddl.auto”的属性。

> 休眠.hbm2ddl.auto
> 
> 创建 SessionFactory 时自动验证模式 DDL 或将其导出到数据库。使用 create-drop，当 SessionFactory 显式关闭时，数据库模式将被删除。
> 
> 例如验证 | 更新 | 创建 | 创建删除

您可以在开始创建 sessionfactory 时设置正确的值。然后你会看到表是在你的数据存储中创建的，当然，表的创建是基于你的实体类的。

如果你想从你的数据库表中生成 java 类（实体）。您可能需要检查休眠逆向工程：

[http://docs.jboss.org/tools/3.3.0.M5/en/hibernatetools/html/reverseengineering.html](http://docs.jboss.org/tools/3.3.0.M5/en/hibernatetools/html/reverseengineering.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:26:06.333

试试[休眠工具](http://www.hibernate.org/subprojects/tools.html)。

# jquery-ui - 将 Google 地图添加到 jquery ui 选项卡中

> ID：10108903
> 
> 赞同：0
> 
> 时间：2012-04-11T15:18:24.660
> 
> 标签：jquery-ui, google-maps, jquery-ui-tabs

我必须将地图添加到选项卡中，但不起作用：

[http://jsfiddle.net/QLMQH/14/](http://jsfiddle.net/QLMQH/14/)

有人建议我这样做：http: [//jqueryui.com/demos/tabs/#...my_slider.2C_Google_Map.2C_sIFR_etc._not_work_when_placed_in_a_hidden_​​.28inactive.29_tab.3F](http://jqueryui.com/demos/tabs/#...my_slider.2C_Google_Map.2C_sIFR_etc._not_work_when_placed_in_a_hidden_.28inactive.29_tab.3F)

但我得到 resizeMap(); 不存在，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:53:11.340

`resizeMap()`是昨天的代码。打电话`google.maps.event.trigger(map, 'resize')`！

[有用。](http://jsfiddle.net/QLMQH/25/)

# c# - Javascript DATE 和 C# 日期 - 最好的解决方案是什么？

> ID：10108911
> 
> 赞同：7
> 
> 时间：2012-04-11T15:18:34.817
> 
> 标签：c#, javascript, json, datetime

我使用以下代码从服务器端 C# 获取日期：

```
DateTime d1 = new DateTime(1970, 1, 1);
DateTime d2 = (DateTime)c.ccdTimestamp2;
long x = new TimeSpan(d2.Ticks - d1.Ticks).TotalMilliseconds; 
```

当我在 javascript 端获取代码时：

```
function (timestamp) {
    alert("testing :" + new Date(timestamp))
} 
```

这给了我一个完全格式化的日期，但它并没有带来我的时区时间，因为如果这里是 17.15，它为我提供了 19.15 GMT +2 ！

起初我只是尝试传递我的 c# 时间戳，没有上面的任何代码，然后发现了这个问题：[如何格式化 Microsoft JSON 日期？](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)但我不知道 JSON 是什么，也无法推导出我能做什么！使用 JSON 更容易吗？如果是这样，任何人都可以指导我吗？非常感谢你

* * *

编辑：解决方案 - 我没有在服务器端使用通用时间。我保留了服务器端代码。我所做的只是：

```
new Date(timestamp).toUTCString() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T15:27:21.730

你应该做的是：

*   始终在服务器上使用 UTC 时间
*   像现在一样将 UTC 时间作为单位时间戳发送到浏览器
*   在浏览器中将时间戳转换为本地时间

使用的时间戳代表`2012-04-11T15:46:29+00:00`：

```
var d = new Date ( 1334159189000 );
// gives you back 2012-04-11T15:46:29+00:00 in a slightly different format, but the timezone info matches UTC/GMT+0
d.toUTCString();
// gives you back your local time
d.toLocaleString(); 
```

刚刚创建了一个 jsfiddle 来表明它做了它应该做的事情：http:
[//jsfiddle.net/t8hNs/1/](http://jsfiddle.net/t8hNs/1/)

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T15:55:34.207

采用

```
var currentDate = new Date();
//get off set from your browser
var offset = Date.getTimezoneOffset(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T15:26:43.400

你可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
string json = new JavaScriptSerializer().Serialize(DateTime.Now); 
```

# javascript - 获取子属性

> ID：10108913
> 
> 赞同：0
> 
> 时间：2012-04-11T15:18:38.323
> 
> 标签：javascript, function, attributes

我一个接一个地多次使用此 HTML 代码：

```
<li>
   <img src="path/to/my/picture.jpg" alt="my picture" />
   <span>picture title</span>
</li> 
```

我正在尝试获取变量中标记`src`属性内的路径值`img`，以及另一个变量中跨度内的文本。

我试过这段代码，但它不工作：

```
clickedLi.onclick = function() {
    var imgPath = clickedLi.firstChild;
    var pathLi = imgPath.getAttribute("src");

    var imgTitle = clickedLi.lastChild;
    var titleLi = imgTitle.data; 
```

该`clickedLi`变量只是一个循环遍历包含`li`文档中所有标签的数组的变量。

所以这是我拥有的完整的 JavaScript 代码：

```
var myLis = document.getElementsByTagName('li');
var liCnt = myLis.length; 
for(var i = 0; i < liCnt; i++) {
    var currentLi = myLis[i];
    currentLi.onclick = function() {                

        var imgPath = firstElementChild(this);
        var pathLi = imgPath.getAttribute("src");

        var imgTitle = lastElementChild(this);
        var titleLi = imgTitle.firstChild.data;

        var myImgDiv = document.getElementById("test");
        myImgDiv.innerHTML = '<h2>' + titleLi + '</h2>';
        myImgDiv.innerHTML = '<img src="' + pathLi + '" alt="' + titleLi + '">' 

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:21:11.027

使用`.firstElementChild`and`.lastElementChild`来避免空白文本节点。

如果您支持旧版浏览器，则需要 shim。

```
function firstElementChild(el) {
    var child = el.firstElementChild;
    if (!child) {
        child = el.firstChild;
        while (child && child.nodeType !== 1)
            child = child.nextSibling;
    }
    return child;
}

function lastElementChild(el) {
    var child = el.lastElementChild;
    if (!child) {
        child = el.lastChild;
        while (child && child.nodeType !== 1)
            child = child.previousSibling;
    }
    return child;
} 
```

* * *

```
clickedLi.onclick = function() {
    var imgPath = firstElementChild(this); //<-- use "this", not "clickedLi"
    var pathLi = imgPath.getAttribute("src");

    var imgTitle = lastElementChild(this); //<-- use "this", not "clickedLi"
    var titleLi = imgTitle.firstChild.data;

    var myImgDiv = document.getElementById("test");

      // Concatenate the strings to do a single assignment to .innerHTML
    myImgDiv.innerHTML = '<h2>' + titleLi + '</h2>' +
                         '<img src="' + pathLi + '" alt="' + titleLi + '">';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:28:36.933

下面的代码做你想要的：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script>
            var p = {
                onload: function() {
                    var lis = document.getElementsByTagName("li");
                    for(var i = 0, ceiling = lis.length; i < ceiling; i++) {
                        lis[i].onclick = function() {
                            var childNodes = this.childNodes;
                            for(var j = 0, ceiling2 = childNodes.length; j < ceiling2; j++) {
                                if(childNodes[j].nodeType == 1) {
                                    if(childNodes[j].nodeName == "IMG") {
                                        alert(childNodes[j].src);
                                    } else if(childNodes[j].nodeName == "SPAN"){
                                        alert(childNodes[j].innerHTML);
                                    }
                                }
                            }
                        }
                    }
                }
            };
        </script>
    </head>
    <body onload="p.onload()">
        <ul>
            <li>
                <img src="path/to/my/picture1.jpg" alt="my picture" /> <span>picture title1</span>
            </li>
            <li>
                <img src="path/to/my/picture2.jpg" alt="my picture" /> <span>picture title2</span>
            </li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:30:48.430

使用此 HTML：

```
<ul id="mylist">
    <li>
       <img src="path/to/my/picture1.jpg" alt="my picture" />
       <span>picture title 1</span>
    </li>
    <li>
       <img src="path/to/my/picture2.jpg" alt="my picture" />
       <span>picture title 2</span>
    </li>
    <li>
       <img src="path/to/my/picture3.jpg" alt="my picture" />
       <span>picture title 3</span>
    </li>
</ul> 
```

你可以这样做：

```
var listItems = document.getElementById("mylist").getElementsByTagName("li");
for (var i = 0, len = listItems.length; i < len; i++) {
    listItems[i].onclick = function() {
        var spanObj = this.getElementsByTagName("span")[0]; 
        var spanText = spanObj.textContent || spanObj.innerText;
        var imgSrc = this.getElementsByTagName("img")[0].src;
        // now you have imgSrc and spanText here to do with as you please
    };
} 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/ju9uZ/](http://jsfiddle.net/jfriend00/ju9uZ/)

在加载文档后运行此代码。最简单的方法是将此代码放在`</body>`标记之前，内联或包含在 .js 文件中。

# android - 如何从对话框的 onClick 方法中引用主要活动的 onClick ......或者我可以吗？

> ID：10108918
> 
> 赞同：0
> 
> 时间：2012-04-11T15:18:51.323
> 
> 标签：android, dialog, onclick

我正在尝试做一些不寻常的事情。我有一个附加到菜单按钮的菜单的主要活动。菜单中的一项会打开一个对话框以选择添加到主活动的控件。我让它工作，所以它添加了控件，并将其保存在数据库中（因此下次运行时会记住它）。我需要将按钮的 onClickListener 设置为主要活动的 onClick。

```
public class MyMainActivity extends Activity 
    implements View.OnClickListener, View.OnTouchListener
{

private Context mContext;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mContext = this;
    AbsoluteLayout mMainActivityView = new AbsoluteLayout;
    SetContentView(mMainActivityView);
... populate mMainActivityView from database ...

public void onClick(View v) {
    switch (v.id) {
        case NEW_BUTTON_ID:
         // TODO implement click handler
    }
}
...

...
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case NEW_BUTTON_DIALOG_ID:
...
...    
            builder.setPositiveButton(android.R.string.ok,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            int XPos = Integer.valueOf(editXPos.getText().toString());
                            int YPos = Integer.valueOf(editYPos.getText().toString());
                            mDataLayer.AddControl(mScreenID, Width, Height, XPos, YPos, editButtonText.getText().toString());
                            Button button = new Button (mContext);
                            button.setLayoutParams(new AbsoluteLayout.LayoutParams(Width, Height, XPos, YPos));
                            button.setText(editButtonText.getText().toString());
                            mMainActivityView.addView(button);
                // How to set Listeners from main activity?
                            button.setOnClickListener(?????);
                            button.setOnTouchListener(?????);
                            MyMainActivity.this.removeDialog(NEW_BUTTON_DIALOG_ID);
                        }
                    });

            builder.setNegativeButton(android.R.string.cancel,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                    MyMainActivity.this.removeDialog(NEW_BUTTON_DIALOG_ID);
                    }
                });
        AlertDialog NewButtonDialog = builder.create();
        return NewButtonDialog;
    }
    return null;
} 
```

那么，如何`onClick()`使用 AlertDialog 的按钮来尊重主要活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:35:51.420

为什么您需要对该`onClick()`方法的特定访问权限？只需在您的类中创建一个公共方法`main`并从对话框和按钮的`onClick()`方法中调用它。可悲的是 DialogInterface 和 View 不共享超类，但您可以传递 Object 并在必要时进行相应的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:32:50.410

正如 Selvin 在评论中所建议的那样，我需要使用以下方法设置 onClickListener：`MyMainActivity.onClick`

# excel - Excel - 次要过程需要巨大的 Vlookup 连接

> ID：10108920
> 
> 赞同：0
> 
> 时间：2012-04-11T15:19:00.340
> 
> 标签：excel, excel-formula

我有很多 excel 数据以相同的格式分布在 32 个文档中，列出了信息。总行数将超过 600 万行。

我有另一个包含几千行的文档。此新文档中 C、E 和 L 列的 CONCATENTATE 可以与其他 32 个文档中的任何一个中 D、F 和 N 列的 CONCATENTATE 相同。

我想找到相同的信息，并从每个较大的文档中为小文档中的每一行抓取它的漏洞。

目前，这需要我连接每个较大文档的信息，删除所有空格和标点符号，并使用 32 个 IFERROR 计算，每个计算都包含一个 VLOOKUP。最后一个花了整个晚上。所有其他人都崩溃了计算机。

必须是这样做的更好方法？？？

例如。

小文档：

标题1 | 标题2 | 标题3

较大的文档（全部 32 个）

事实1 | 事实2 | 事实3 | 标题1 | 标题2 | 事实4 | 标题3

如果小文档的标题 1,2 和 3 的连接在较大文档的标题 1,2 和 3 的任何连接中找到相同的信息（删除所有空格和标点符号）。我想从较大的文档中复制该行的所有信息，包括与较小文档中的信息行相邻的标题和事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:31:34.133

哎呀呀。Excel 不适合做这样的事情。这只是错误的工具。因此，假设您坚持这一点，我会尝试创建一个 Access 数据库，链接您需要的每个电子表格，然后编写一个查询。我不完全清楚您想对匹配的信息做什么，但您可以将其导出到新的电子表格，或将电子表格链接到该查询。

在 Access (2007+) 中，转到外部数据选项卡，单击导入部分中的 Excel，然后选择链接。如果这仍然太慢，您将需要复制电子表格并执行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:23:25.223

在数据库而不是 Excel 中会好得多，
但要使其在 Excel 中有效工作，您需要使用 VLOOKUP 或 MATCH 的二进制搜索选项（排序近似匹配）。这比线性（未排序）搜索快几个数量级：

1\. 在 32 个工作表和小工作表上创建额外的列进行连接等。
2\. 使用连接列对 32 张表上的数据进行排序
3\. 使用带 IF 的 Double VLOOKUP 将近似匹配转换为精确匹配，如下所示

```
=IF(VLOOKUP(PartNumber,PartsList,1,TRUE)=PartNumber, VLOOKUP(PartNumber,PartsList,4,TRUE), “Missing”) 
```

有关此公式的更详细说明，请参阅[http://fastexcel.wordpress.com/2012/03/29/vlookup-tricks-why-2-vlookups-are-better-than-1-vlookup/](http://fastexcel.wordpress.com/2012/03/29/vlookup-tricks-why-2-vlookups-are-better-than-1-vlookup/) 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:27:54.377

如果有一个结构让您知道需要在哪个工作表中搜索，您可以查看 INDIRECT 功能是否可以帮助您。否则，我建议您将数据导入数据库（例如Access）中，然后查询您的数据。

# html - 小的跨浏览器兼容性 CSS 问题

> ID：10108922
> 
> 赞同：0
> 
> 时间：2012-04-11T15:19:01.737
> 
> 标签：html, css, joomla, cross-browser, joomla-template

任何能够帮助我识别这个跨浏览器 CSS 问题的人

[http://bit.ly/HC1c2u](http://bit.ly/HC1c2u)

在 Firefox 中，“获取连接”区域按预期显示，在其他情况下，它没有任何帮助

影响 HTML

```
 <div style="font-size:14px; width:1000px;" id="yjsg3">
    <div style="width:100%;" class="yjsgxhtml" id="user1">
    <div class="yjsquare">
<div class="yjsquare_in"><div class="on-youevents ltr" id="community-wrap"><!-- js_top --> <!-- begin: #cFrontpageWrapper -->
 <div id="cFrontpageWrapper">
 <div class="greybox">
 <div>
 <div>
 <div class="cFrontpageSignup"><!-- Start the Intro text -->
 <div class="cFrontPageLeft">
 <div class="introduction">
 <h1>Get Connected!</h1>
 <ul id="featurelist">
 <li>Connect and expand your network</li>
 <li>View profiles and add new friends</li>
 <li>Share your photos and videos</li>
 <li>Create your own group or join others</li>
 </ul>
 <div class="joinbutton"><a title="JOIN US NOW, IT'S FREE!" href="/rhythm365/social/register.html" id="joinButton"> JOIN US NOW, IT'S FREE! </a></div>
 </div>
 </div>
 <!-- End Intro text --> <!-- Start the Login Form -->
 <div class="cFrontPageRight">
 <div class="loginform"><form name="login" method="post" action="/rhythm365/social.html" id="form-login">
 <h2>Members Login</h2>
 <label> Username<br> <input type="text" name="username" class="inputbox frontlogin" id="username"> </label> <label> Password<br> <input type="password" name="password" class="inputbox frontlogin" id="password"> </label> <label for="remember"> <input type="checkbox" alt="Remember me" value="yes" name="remember" id="remember"> Remember me      </label>
 <div style="text-align: center; padding: 10px 0 5px;"><input type="submit" value="Login" name="submit" class="button" id="submit"> <input type="hidden" value="com_users" name="option"> <input type="hidden" value="user.login" name="task"> <input type="hidden" value="L3JoeXRobTM2NS9zb2NpYWwvcHJvZmlsZS5odG1s" name="return"> <input type="hidden" value="1" name="b8f1cd79c6f1e95ecd9c177eec53d705"></div>
 <span> <a href="/rhythm365/component/users/?view=reset" class="login-forgot-password">          <span>Forgot your Password?</span></a><br> <a href="/rhythm365/component/users/?view=remind" class="login-forgot-username"><span>Forgot your Username?</span></a> </span>      <br> <a href="/rhythm365/social/register/activation.html" class="login-forgot-username">      <span>Resend activation code?</span> </a></form></div>
 </div>
 <!-- End the Login form -->
 <div class="jsClr">&nbsp;</div>
 </div>
 </div>
 </div>
 </div>
 </div>
 </div></div>
 </div>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:30:34.533

文件'/templates/youevents/css/custom.css'中的导入规则后缺少分号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:49:41.237

这是因为你的 reset.css，你有 font-family: inherit;

删除这个，你应该很高兴......

```
#community-wrap h1, #community-wrap h2, #community-wrap h3, #community-wrap h4, #community-wrap h5, #community-wrap h6 {
border: 0 none;
font-family: inherit;
font-size: 100%;
font-style: inherit;
font-weight: inherit;
margin: 0;
outline: 0 none;
padding: 0;
vertical-align: baseline; 
```

}

你可能只是删除这整个块

Firebug 是一个非常有用的 web 开发工具，我建议你将它添加到 firefox 中，你将能够更快地进行调试

# ruby-on-rails - 我的 facebook 登录按钮使用omniauth，但我没有进入“允许”屏幕

> ID：10108925
> 
> 赞同：0
> 
> 时间：2012-04-11T15:19:17.923
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, omniauth

我使用omniauth-facebook gem 添加了一个facebook 登录按钮。它使用omniauth.auth 哈希和所有用户信息往返于facebook 和返回。但是我没有得到用户允许我的应用程序的中间页面，所以当我尝试从我的应用程序发布到 facebook 时，我得到了错误

```
OAuthException :: (#200) The user hasn't authorized 
the application to perform this action) 
```

我猜这是 facebook 应用程序页面上的设置，但对于我的生活，我没有看到它或在文档中看到提及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:25:55.360

糟糕，我应该更仔细地阅读omni auth-facebook 文档。在文档中：

> 范围：您要向用户请求的权限的逗号分隔列表。有关可用权限的完整列表，请参阅 Facebook 文档：http: [//developers.facebook.com/docs/reference/api/permissions](http://developers.facebook.com/docs/reference/api/permissions)。默认值：电子邮件，offline_access

# php - PHP & CURL 不发送文件，即使带有 @ 前缀

> ID：10108926
> 
> 赞同：0
> 
> 时间：2012-04-11T15:19:18.563
> 
> 标签：php, file-upload, curl, proxy

我正在使用 PHP (WAMPServer) 接收表单提交，然后使用 CURL 将文件传递到另一台服务器进行处理。

这是一个示例来说明（不是实际代码）：

```
$data = array(
  'file' => '@'.$_FILES['key']['tmp_name']
); 
```

这是我用于 CURL 的内容......当我粘贴代码时，我注意到我的代码中仍然存在`http_build_query()`......所以，这一定是问题所在。

```
$CURL = curl_init();
curl_setopt($CURL, CURLOPT_URL, $operation['callback']);
$query_string = http_build_query($arguments);
curl_setopt($CURL, CURLOPT_POSTFIELDS, $query_string);
curl_setopt($CURL, CURLOPT_POST, TRUE);
curl_setopt($CURL, CURLOPT_RETURNTRANSFER, TRUE);
$result = curl_exec($CURL);
curl_close($CURL);
return $result; 
```

我的问题是最后一个服务器没有收到文件。相反，数据作为键值对传递。

```
$_POST contains 'file' => '@c:\wamp\tmp\xyz.tmp' 
```

我更喜欢的是文件被传输，并且 $_FILES 有关于它的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:19:39.093

不要为 CURLOPT_POSTFIELDS 构建 http 查询。Curl 可以直接接受字段数组并进行自己的编码/修改。

通过构建您自己的查询，您“隐藏”了`@`表明文件上传和 CURL 不会触发其上传机制的内容。

换句话说，这将解决问题：

```
$data = array(
  'file' => '@'.$_FILES['key']['tmp_name']
);
curl_setopt($CURL, CURLOPT_POSTFIELDS, $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:44:50.473

如果您添加`CURL`方法代码，我们可以更好地回答您...

尝试将文件作为二进制文件传输，并在 curl 的标题中添加文件大小。

# python - 寻找具有不同三角形的最大路线

> ID：10108929
> 
> 赞同：0
> 
> 时间：2012-04-11T15:19:32.827
> 
> 标签：python

我需要找到三角形的最大路线。我之前[在给定的输入中发布了这个寻找最大路线，](https://stackoverflow.com/questions/10053540/finding-the-maximum-route-in-a-given-input.Now)我正在实现它，以便每次都可以使用不同的值进行多次尝试。我似乎有一个错误..需要一些帮助...我使用的是 Python 3.2.2

代码：

```
numOfTries = raw_input("Please enter the number of tries")
Tries = int(numOfTries)
for count in range(Tries):
    numstr= raw_input("Please enter the height:")
    rows = int(numstr)
    triangle(rows)
    routes(triangle)
    max(routes(triangle),key=sum) 
def triangle(rows):
    for rownum in range (rows):
        PrintingList = list()
        print ("#%d row") % rownum
        for iteration in range (rownum):
            newValue = raw_input("Please enter the %d number:") %iteration
            PrintingList.append(int(newValue))
            print()
def routes(rows,current_row=0,start=0):
           for i,num in enumerate(rows[current_row]): #gets the index and number of each number in the row
                if abs(i-start) > 1:   # Checks if it is within 1 number radius, if not it skips this one. Use if not (0 <= (i-start) < 2) to check in pyramid
                    continue
                if current_row == len(rows) - 1: # We are iterating through the last row so simply yield the number as it has no children
                    yield [num]
                else:
                    for child in routes(rows,current_row+1,i): #This is not the last row so get all children of this number and yield them
                         yield [num] + child 
```

错误：

```
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    numOfTries = raw_input("Please enter the number of tries")
NameError: name 'raw_input' is not defined 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:21:57.267

在 Python3 中`raw_input()`（Python2 版本）现在很简单`input()`

# lua - 如何在不编辑 Lua 头文件或脚本的情况下从 os 库中删除特定函数

> ID：10108933
> 
> 赞同：3
> 
> 时间：2012-04-11T15:19:46.820
> 
> 标签：lua

我已经完成了作业并研究了有关此主题的其他回复，但没有一个解决我的特定问题。

我想完全删除 io 库，只删除部分操作系统（假设我想保留 os.clock() 和其他）

我怎样才能仅通过 C API 实现这一点。

由于项目的性质，我不允许修改 Lua 标头和将发送给我的脚本。这些都不是我能控制的。我唯一可以修改的是解释器。

做这样的事情：

```
lua_pushnil(state_pointer);
lua_setglobal(state_pointer, "os.execute"); 
```

不会有太大帮助，因为在脚本中用户可以调用 os = require('os') 并取回所有函数

我不允许禁用 require 功能，因此这使事情变得更加困难。

有任何想法吗？

PS：更多的好奇心：如果我做类似的事情

```
luaopen_base(L);
luaopen_table(L);
luaopen_string(L);
luaopen_math(L);
luaopen_loadlib(L); (basically i'm loading every library by hand except os and io) 
```

代替

```
luaL_openlibs(L); (this loads all the libraries) 
```

os = require('os') 或 io = require('io') 还能工作吗？

* * *

@Nicol Bolas 不知道我是否做错了什么，但 os = require('os') & require('io') 只是把一切都带回来了。

我的代码：

```
luaL_openlibs(LuaInstance);     /* load the libs        */ 
lua_pushnil(LuaInstance);
lua_setglobal(LuaInstance, "io");
lua_pushnil(LuaInstance);
lua_setglobal(LuaInstance, "os.execute");
lua_pushnil(LuaInstance);
lua_setglobal(LuaInstance, "os.rename");
lua_pushnil(LuaInstance);
lua_setglobal(LuaInstance, "os.remove");
lua_pushnil(LuaInstance);
lua_setglobal(LuaInstance, "os.exit"); 
```

在我的脚本中，我只是做一个

```
os = require('os')
io = require('io') 
```

在此之后 os 函数和 io 函数都可以工作。os.exit 仍然关闭我的应用程序，并且 io.write 照常工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T15:50:24.167

> 不会有太大帮助，因为在脚本中用户可以调用 os = require('os') 并取回所有函数

不，不会的。调用`require(os)`只会返回`os`表格。您将*修改*的同一张表。所以没有问题。

因此，只需在注册后修改表即可。它会起作用，而且测试它确实很容易。

> luaopen_base(L);

请注意：`luaopen_*`不是常规的 C 函数。它们是*Lua* C 函数；它们是期望通过标准 Lua 机制调用的函数。您不能直接从 C 调用它们。

在 Lua 5.1 中，您必须使用将它们压入堆栈并使用`lua_pcall`或类似的调用函数来调用它们。在 Lua 5.2 中，您应该使用`luaL_requiref`，这会将他们的表放入 Lua`require`注册表中。

* * *

您的代码有两个问题。第一的：

```
lua_setglobal(LuaInstance, "io");
lua_pushnil(LuaInstance); 
```

这实际上并没有*改变*表格。它只是删除了对表的*引用*。如果要更改表本身，则必须更改表。您必须获取`io`表格并对其进行修改。走动桌子并将其中的每个值设置为`nil`。简单地替换被调用的全局变量的内容`io`不会做任何事情。

但是，如果你想防止`io`被完全使用，你不应该一开始就注册它。

第二个问题是这样的：

```
lua_pushnil(LuaInstance);
lua_setglobal(LuaInstance, "os.execute"); 
```

这会修改全局表的值 who's key is `["os.execute"]`。它相当于这个 Lua 代码：

```
_G["os.execute"] = nil 
```

这与以下内容*不同*：

```
os.execute = nil; 
```

在Lua中使用`os.execute`时，这意味着获取全局表（`_G``"os"``"execute"``"os"`

当您这样做`_G["os.execute"]`时，您所说的是获取全局表并使用名为 的键查找值`"os.execute"`。

看到不同？

您要做的是获取存储在全局变量中的表`os`并修改*该*表。你不能使用`lua_setglobal`，因为`os`表的成员*不是*全局的；他们是一个表的成员。是的，它们存储的表恰好是一个全局表。但是您不能修改存储在全局中的表的成员 with `lua_setglobal`。

你必须这样做：

```
lua_getglobal(L, "os");
lua_pushnil(L);
lua_setfield(L, -2, "execute");
lua_pushnil(L);
lua_setfield(L, -2, "rename");
lua_pushnil(L);
lua_setfield(L, -2, "remove");
lua_pushnil(L);
lua_setfield(L, -2, "exit");
lua_pop(L, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:37:01.430

我建议使用沙盒。请参阅[“如何创建安全的 Lua 沙箱”](https://stackoverflow.com/questions/1224708/how-can-i-create-a-secure-lua-sandbox)。

对于`require`，请制作自己的包装器，在调用真实版本之前验证参数，并且只将您的包装器包含在沙箱中。

# wpf - 在代码隐藏中创建自定义数据绑定工具提示

> ID：10108936
> 
> 赞同：0
> 
> 时间：2012-04-11T15:20:07.860
> 
> 标签：wpf, tooltip, code-behind

我将如何在后面的代码中创建这样的东西？

```
<Style x:Key="{x:Type ToolTip}" TargetType="ToolTip">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="HasDropShadow" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToolTip">
                        <Border CornerRadius="5" HorizontalAlignment="Center" VerticalAlignment="Top" Padding="1" BorderThickness="1,1,1,1">
                            <Border.Background>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="#F7D073" Offset="0"/>
                                    <GradientStop Color="#F1A62F" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Border HorizontalAlignment="Stretch" BorderThickness="0,0,0,1" BorderBrush="Black" Margin="5" Grid.ColumnSpan="2">
                                    <TextBlock FontSize="14" TextAlignment="Left" Text="{TemplateBinding Content}"/>
                                </Border>
                                <TextBlock Grid.Column="0" Grid.Row="1" Margin="10,0,5,0">Column1:</TextBlock>
                                <TextBlock Grid.Column="1" Grid.Row="1" FontWeight="Bold" Text="{Binding Column1}"  TextAlignment="Left" />
                                <TextBlock Grid.Column="0" Grid.Row="2" Margin="10,0,5,0">Column2:</TextBlock>
                                <TextBlock Grid.Column="1" Grid.Row="2" FontWeight="Bold" Text="{Binding Column2}" TextAlignment="Left" />
                                <TextBlock Grid.Column="0" Grid.Row="3" Margin="10,0,5,0">Column3:</TextBlock>
                                <TextBlock Grid.Column="1" Grid.Row="3" FontWeight="Bold" Text="{Binding Column3}" TextAlignment="Left" />
                                <TextBlock Grid.Column="0" Grid.Row="4" Margin="10,0,5,0">Column4:</TextBlock>
                                <TextBlock Grid.Column="1" Grid.Row="4" FontWeight="Bold" Text="{Binding Column4}" TextAlignment="Left" />
                                <TextBlock Grid.Column="0" Grid.Row="5" Margin="10,0,5,0">Column5:</TextBlock>
                                <TextBlock Grid.Column="1" Grid.Row="5" FontWeight="Bold" Text="{Binding Column5}" TextAlignment="Left" />
                                <TextBlock Grid.Column="0" Grid.Row="6" Margin="10,0,5,0">ColumnX:</TextBlock>
                                <TextBlock Grid.Column="1" Grid.Row="6" FontWeight="Bold" Text="{Binding ColumnX}" TextAlignment="Left" />
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

这个想法是将 DataTable 传递给具有未知列数的控件，并且能够构建一个包含多少列的工具提示。

上面的代码用于构建一个非常具体的案例，但现在我想让它尽可能通用，但是我对 WPF 代码隐藏的了解并不是创建这样的东西所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:09:51.757

所以我不能用工具提示内的网格来做到这一点，但我可以用 stackpanels 做到这一点

解决方案是一个多阶段的方法。首先覆盖 ToolTip 的默认样式

```
 var style = new Style {TargetType = typeof (ToolTip)};
        style.Setters.Add(new Setter {Property = TemplateProperty, Value = GetToolTip(dataTable)});
        style.Setters.Add(new Setter{Property = OverridesDefaultStyleProperty, Value = true});
        style.Setters.Add(new Setter{Property = System.Windows.Controls.ToolTip.HasDropShadowProperty, Value = true});
        Resources.Add(typeof(ToolTip), style); 
```

然后为 TemplateProperty setter 创建模板，GetToolTip() 函数的内容如下所示

```
 private ControlTemplate GetToolTip(DataTable dt) {

        //Create Template where all factories will be assigned to
        var templateTT = new ControlTemplate(typeof (ToolTip));

        //Main border and background of the ToolTip
        var borderFactory = new FrameworkElementFactory(typeof (Border));
        borderFactory.SetValue(Border.CornerRadiusProperty, new CornerRadius(5));
        borderFactory.SetValue(HorizontalAlignmentProperty, HorizontalAlignment.Center);
        borderFactory.SetValue(VerticalAlignmentProperty, VerticalAlignment.Top);
        borderFactory.SetValue(PaddingProperty, new Thickness(1, 1, 1, 1));
        borderFactory.SetValue(BorderThicknessProperty, new Thickness(1,1,1,1));

        //Brush for the background
        var borderBrush = new LinearGradientBrush {EndPoint = new Point(.5, 1), StartPoint = new Point(.5, 0)};
        borderBrush.GradientStops.Add(new GradientStop(Color.FromArgb(255,247,208,115),0));
        borderBrush.GradientStops.Add(new GradientStop(Color.FromArgb(255, 241, 166, 47), .5));

        //Assign the brush to the backgfound property of the border
        borderFactory.SetValue(BackgroundProperty, borderBrush);

        //Main Vertical StackPanel that will contain all the horizontal stackpanels
        var verticalStackFactory = new FrameworkElementFactory(typeof (StackPanel));
        verticalStackFactory.SetValue(StackPanel.OrientationProperty, Orientation.Vertical);

        foreach (DataColumn item in dt.Columns) {

            //ID column is to be igoned and not shown on the tooltip
            if(item.ColumnName.Equals("ID")) continue;

            //Name column will be used as the "Header" of the tooltip
            if (item.ColumnName.Equals("Name")) {
                var headerStackFactory = new FrameworkElementFactory(typeof(StackPanel));
                headerStackFactory.SetValue(StackPanel.OrientationProperty, Orientation.Horizontal);

                //border of the header (to create the underline)
                var headerBorderBrush = new FrameworkElementFactory(typeof (Border));
                headerBorderBrush.SetValue(HorizontalAlignmentProperty, HorizontalAlignment.Stretch);
                headerBorderBrush.SetValue(BorderThicknessProperty, new Thickness(0, 0, 0, 1));
                headerBorderBrush.SetValue(BorderBrushProperty, new SolidColorBrush(Colors.Black));
                headerBorderBrush.SetValue(MarginProperty, new Thickness(5));

                //Text of the header bound to the Name column
                var headerTextBox = new FrameworkElementFactory(typeof (TextBlock));
                headerTextBox.SetValue(FontSizeProperty, 14.0);
                headerTextBox.SetValue(TextBlock.TextAlignmentProperty, TextAlignment.Left);
                headerTextBox.SetValue(ForegroundProperty, new SolidColorBrush(Colors.Black));
                headerTextBox.SetBinding(TextBlock.TextProperty, new Binding("Name"));

                headerBorderBrush.AppendChild(headerTextBox);
                headerStackFactory.AppendChild(headerBorderBrush);
                verticalStackFactory.AppendChild(headerStackFactory);
            }
            else {
                //Horizontal Stack Panel
                var horizontalStackFactory = new FrameworkElementFactory(typeof (StackPanel));
                horizontalStackFactory.SetValue(StackPanel.OrientationProperty, Orientation.Horizontal);

                //Add the TextBlock Label
                var factoryLabel = new FrameworkElementFactory(typeof (TextBlock));
                factoryLabel.SetValue(MarginProperty, new Thickness(10, 0, 5, 0));
                factoryLabel.SetValue(ForegroundProperty, new SolidColorBrush(Colors.Black));
                factoryLabel.SetValue(TextBlock.TextProperty, string.Format("{0}: ", item.ColumnName.Replace("_", " ")));
                horizontalStackFactory.AppendChild(factoryLabel);

                //Add the TextBlock Value bound to the column name
                var factoryText = new FrameworkElementFactory(typeof (TextBlock));
                factoryText.SetValue(FontWeightProperty, FontWeights.Bold);
                factoryText.SetValue(ForegroundProperty, new SolidColorBrush(Colors.Black));
                factoryText.SetValue(TextBlock.TextAlignmentProperty, TextAlignment.Left);
                factoryText.SetBinding(TextBlock.TextProperty, new Binding(item.ColumnName));
                horizontalStackFactory.AppendChild(factoryText);

                verticalStackFactory.AppendChild(horizontalStackFactory);
            }
        }

        borderFactory.AppendChild(verticalStackFactory);
        templateTT.VisualTree = borderFactory;
        return templateTT;
    } 
```

为组合框项创建模板

```
 var template = new DataTemplate();
        var textBlockFactory = new FrameworkElementFactory(typeof (TextBlock));
        textBlockFactory.SetValue(ToolTipService.ShowDurationProperty, 60000);
        textBlockFactory.SetValue(ToolTipService.InitialShowDelayProperty, 0);
        textBlockFactory.SetBinding(TextBlock.TextProperty, new Binding("Name"));
        textBlockFactory.SetBinding(ToolTipProperty, new Binding("Name"));
        template.VisualTree = textBlockFactory;

        InsurancePlanMaster.ItemTemplate = template; 
```

这使我可以创建一个绑定到数据表的自定义组合框，并将自定义工具提示绑定到表中的其他行。

# facebook - Facebook PHP SDK 2.1 到 3.0 迁移指南

> ID：10108937
> 
> 赞同：1
> 
> 时间：2012-04-11T15:20:10.067
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

有人从 2.1 迁移到 3.0。是否有适用于 2.1 到 3.0 的迁移指南

迁移时要注意哪些事项。

3.0 中也存在 OpenGraph 支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:14:07.283

参考[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

迁移非常简单，仅对 access_tokens 和获取用户进行了一些更改。我花了大约一周的时间才完全迁移。

# python - 除了用户名和电子邮件之外没有任何数据被保存

> ID：10108940
> 
> 赞同：0
> 
> 时间：2012-04-11T15:20:21.540
> 
> 标签：python, django

当我进入管理界面时，所有字段都存在，但在我提交表单后，除了用户名和电子邮件之外，它们都没有任何数据。有什么帮助吗？

```
class SignupFormExtra(userena.forms.SignupForm):

first_name = forms.CharField(max_length=20)
last_name = forms.CharField(max_length=20, required=False)
gender = forms.CharField(max_length=3, required=False)
phone = forms.CharField(label=(u'Phone Number'),max_length=10, required=False)
cell = forms.CharField(label=(u'Cell Number'),max_length=10)
address = forms.CharField(label=(u'Dental Practice Address'),max_length=50, required=False)

def save(self):

    self.cleaned_data['username'] = self.cleaned_data['email']

    user = super(SignupFormExtra, self).save()

    user.first_name = self.cleaned_data['first_name']
    user.last_name = self.cleaned_data['last_name']
    #user.birth_date = self.cleaned_data['birth_date']
    user.gender = self.cleaned_data['gender']
    user.phone = self.cleaned_data['phone']
    user.cell = self.cleaned_data['cell']
    user.address = self.cleaned_data['address']
    user.save()

    return user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:42:37.350

`SignupForm.save`返回一个`contrib.auth.User`没有`gender`、`phone`或 字段`cell`的对象。`address`我的猜测是这些在您的个人资料模型上，但在您显示的代码中，这不是您尝试保存它们的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:35:52.757

userena.forms.SignupForm 创建一个 UserenaSignup，该模型没有您指定的字段。

见：[https ://github.com/bread-and-pepper/django-userena/blob/master/userena/models.py#L39](https://github.com/bread-and-pepper/django-userena/blob/master/userena/models.py#L39)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:04:07.450

该问题将在您的 models.py 模块中，而不是在表单中。

# magento - 显示 Magento 静态块 product_list 中的所有产品

> ID：10108941
> 
> 赞同：1
> 
> 时间：2012-04-11T15:20:22.930
> 
> 标签：magento

我在我的 CMS 主页上使用此代码来显示根类别中的所有产品：

{{block type="catalog/product_list" name="home.catalog.product.list" alias="products_homepage" column_count="5" template="catalog/product/list.phtml"}}

它工作正常，但我想将限制设置为“全部”，以显示所有产品而无需分页。

这似乎不起作用： http: [//mydons.com/how-to-show-products-with-toolbar-and-pagination-in-magento-static-block/](http://mydons.com/how-to-show-products-with-toolbar-and-pagination-in-magento-static-block/)

在 Magento 1.6.2 中还有其他方法吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:46:04.013

我不认为你可以通过 xml/magic 变量传递限制。

[来源：设置列和限制产品在网格中显示](http://www.jimcode.org/2011/04/magento-setting-columns-limiting-products-shown-grid/)

以这种方式显示所有产品的最佳选择是创建自己的模块来获取产品集合，依赖于 Layer 类

# java - 如何在 Java 中进行内存配置文件？

> ID：10108942
> 
> 赞同：39
> 
> 时间：2012-04-11T15:20:26.580
> 
> 标签：java, profiling, visualvm

如果对此有明显的答案，我仍在学习 Java 的技巧，很抱歉。我有一个占用大量内存的程序，我想找到一种方法来减少它的使用，但是在阅读了许多 SO 问题之后，我有一个想法，我需要在开始优化它之前证明问题出在哪里。

所以这就是我所做的，我在程序的开头添加了一个断点并运行它，然后我启动了visualVM并让它分析内存（我也在netbeans中做了同样的事情只是为了比较结果并且它们是相同的）。我的问题是我不知道如何阅读它们，我得到的最高区域只是说`char[]`，我看不到任何代码或任何东西（这是有道理的，因为 visualvm 正在连接到 jvm 并且看不到我的源代码，但是netbeans 也没有像在进行 cpu 分析时那样向我显示源代码）。

基本上我想知道的是所有内存都在使用哪个变量（希望有更多细节，比如在哪种方法中），这样我就可以专注于在那里工作。有没有简单的方法可以做到这一点？我现在正在使用 eclipse 和 java 进行开发（并专门安装了用于分析的 visualVM 和 netbeans，但我愿意安装您认为可以完成这项工作的任何其他东西）。

编辑：理想情况下，我正在寻找可以获取所有对象并按大小对它们进行排序的东西（这样我就可以看到哪个对象占用了内存）。目前它返回诸如 string[] 或 int[] 之类的通用信息，但我想知道它指的是哪个对象，以便我可以努力使其大小更加优化。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-11T15:26:42.603

**字符串有问题**

基本上在 Java 中，引用（在幕后`String`使用的东西）将主导大多数*业务*应用程序的内存。它们的创建方式决定了它们在 JVM 中消耗的内存量。`char[]`

 *仅仅因为它们作为一种数据类型对于大多数业务应用程序来说都是如此重要，而且它们也是最需要内存的类型之一。这不仅仅是 Java 的事情，`String`几乎每种语言和运行时库中的数据类型都会占用大量内存，因为至少它们只是每个字符 1 个字节的数组，或者更糟糕的是（Unicode）它们是每个字符多个字节。

有一次，在对同样具有 Oracle JDBC 依赖项的 Web 应用程序的 CPU 使用情况进行分析时，我发现它比所有其他方法调用**组合**`StringBuffer.append()`的 CPU 周期占主导地位许多数量级，更不用说任何其他单个方法调用了。JDBC 驱动程序做了很多很多的操作，有点像使用所有东西的权衡。**`String``PreparedStatements`**

 ****你所关心的你无法控制，反正不是直接**

您应该关注的是您可以控制的内容，这确保您不会保留比您需要的时间更长的引用，并且您不会不必要地重复事物。Java 中的垃圾收集例程经过高度优化，如果您了解它们的算法是如何工作的，就可以确保您的程序以最佳方式运行，以使这些算法能够正常工作。

**Java 堆内存不像其他语言中的手动管理内存，这些规则不适用**

在其他语言中被认为是*内存泄漏*的事情/根本原因与 Java 中的垃圾收集系统不同。

在 Java 中，内存很可能不会被一个正在泄漏的 uber-object 消耗（其他环境中的悬空引用）。

`StringBuffer`由于/`StringBuilder`对象在第一次实例化时大小不合适，因此很可能有很多较小的分配，然后必须自动增长`char[]`数组以保存后续`append()`调用。

由于它们所处的范围以及在运行时可能会发生变化的许多其他因素，这些中间对象可能会比垃圾收集器预期的更长。

**示例：**垃圾收集器可能会确定有候选者，但因为它认为还有大量内存可用，所以在那个时间点将它们刷新出来可能过于昂贵，它会等到内存压力越来越大。

垃圾收集器现在真的很好，但它不是魔法，如果你在做退化的事情，它会导致它不能以最佳方式工作。互联网上有很多关于所有 JVM 版本的垃圾收集器设置的文档。

这些未引用的对象可能只是没有达到垃圾收集器认为需要它们才能从内存中清除它们的时间，或者可能存在对它们的引用由其他对象（`List`）持有，例如你不实现仍然指向该对象。这就是 Java 中最常见的*泄漏*，更具体地讲是引用泄漏。

**示例：**如果您知道需要`String`使用`StringBuilder`创建它而`new StringBuilder(4096);`不是默认值（例如 32）来构建 4K，并且将立即开始创建垃圾，这些垃圾可以代表您认为对象大小的许多倍。

您可以发现使用 VisualVM 实例化了多少类型的对象，这将告诉您您需要了解的内容。不会有一个大的闪光灯指向单个类的单个实例，说“这是大内存消耗者！”，除非只有一个实例`char[]`你正在阅读一些大量的文件到，这也是不可能的，因为许多其他类在`char[]`内部使用；然后你几乎已经知道了。

**我没有看到任何提及`OutOfMemoryError`**

您的代码可能没有问题，垃圾收集系统可能没有承受足够的压力来启动和释放您*认为*应该清理的对象。您**认为**的问题可能不是，除非您的程序因`OutOfMemoryError`. 这不是 C、C++、Objective-C 或任何其他手动内存管理语言/运行时。您无法以您期望的详细程度来决定内存中的内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-15T14:54:49.403

在[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)中，您可以使用 go to the heap walker 并激活最大对象视图。您将看到保留最多内存的对象。“保留”内存是如果您删除了对象，垃圾收集器将释放的内存。

然后，您可以打开对象节点以查看保留对象的引用树。这是最大对象视图的屏幕截图：

![在此处输入图像描述](../Images/d594ecbbcd1391961f457fa23a6d55e8.png)

免责声明：我公司开发JProfiler

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T15:55:21.590

我建议捕获堆转储并使用像[Eclipse MAT](http://www.eclipse.org/mat/)这样的工具来分析它们。有很多[教程](http://scn.sap.com/people/krum.tsvetkov/blog/2007/07/02/finding-memory-leaks-with-sap-memory-analyzer)可用。它提供了[支配树](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.mat.ui.help/concepts/dominatortree.html)的视图，以深入了解堆上对象之间的关系。特别是对于您提到的内容，MAT 的“GC 根路径”功能将告诉您这些 char[]、String[] 和 int[] 对象中的大多数被引用的位置。JVisualVM 在识别泄漏和分配方面也很有用，特别是通过使用带有分配堆栈跟踪的快照。获取快照并比较它们以找到分配点的过程有很多[演练。](http://rejeev.blogspot.com/2009/04/analyzing-memory-leak-in-java.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-01T03:06:40.083

Java JDK 在 bin 文件夹下附带**JVisualVM**，一旦您的应用程序服务器（例如正在运行），您就可以运行 visualvm 并将其连接到您的本地主机，这将为您提供内存分配并使您能够执行堆转储

[![在此处输入图像描述](../Images/3d140d85eb277cbdbefe857f3512b343.png)](https://i.stack.imgur.com/JquYY.png)

有关如何启用的更详细步骤：http: [//sysdotoutdotprint.com/technologies/java/6](http://sysdotoutdotprint.com/technologies/java/6)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T15:32:48.083

如果您使用 visualVM 检查内存使用情况，它会关注数据，而不是方法。也许您的大 char[] 数据是由许多 String 值引起的？除非您使用递归，否则数据不会来自局部变量。因此，您可以专注于将元素插入大型数据结构的方法。要找出导致您的“内存泄漏”的确切语句，我建议您另外

*   阅读[Josh Bloch 的 Effective Java Item 6：（消除过时的对象引用）](https://rads.stackoverflow.com/amzn/click/com/0321356683)
*   使用日志框架在最高详细级别上创建日志实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-08T15:45:42.520

通常有两种不同的方法来分析 Java 代码以了解其内存分配配置文件。如果您尝试测量特定的一小段代码的影响——假设您想比较两个替代实现以确定哪一个提供更好的运行时性能——您将使用微基准测试工具，例如[JMH](https://openjdk.java.net/projects/code-tools/jmh/)。

虽然您可以暂停正在运行的程序，但 JVM 是一个复杂的运行时，它执行各种管理任务，并且很难获得“时间点”快照和准确读取“内存使用水平”。它可能以不直接反映正在运行的 Java 程序的行为的速率分配/释放内存。同样，执行 Java 对象堆转储并不能完全捕获指示实际内存占用的低级机器特定内存布局，因为这可能取决于机器架构、JVM 版本和其他运行时因素。

像 JMH 这样的工具通过重复运行一小段代码并观察多次调用的内存分配的长期平均值来解决这个问题。例如，在[GC 分析示例 JMH 基准测试](https://hg.openjdk.java.net/code-tools/jmh/file/b6f87aa2a687/jmh-samples/src/main/java/org/openjdk/jmh/samples/JMHSample_35_Profilers.java)中，派生的`*·gc.alloc.rate.norm`指标给出了相当准确的每次调用归一化内存成本。

在更一般的情况下，您可以将分析器附加到正在运行的应用程序并获取 JVM 级别的指标，或者执行堆转储以进行离线分析。用于分析完整应用程序的一些常用工具是[Async Profiler](https://github.com/jvm-profiling-tools/async-profiler)和新开源的[Java Flight Recorder 以及 Java Mission Control](https://blogs.oracle.com/javamagazine/java-flight-recorder-and-jfr-event-streaming-in-java-14)以可视化结果。***

# java - launch() 需要时间来运行

> ID：10108943
> 
> 赞同：2
> 
> 时间：2012-04-11T15:20:27.110
> 
> 标签：java, swing, jsr296

嘿伙计们，我今天在我开发的 java swing 应用程序中注意到了一个很大的疑问。

我发现的问题是launch()

当我在本地尝试我开发的应用程序时，它会毫无延迟地运行，但是当我使用 jnlp 从我的 Web 服务器尝试此操作时，我发现执行下一行有 5 秒的延迟......

当我对其进行深入研究时，我发现主类文件中的 launch() 函数需要 5 秒后才开始执行 startup() 函数.. 是否需要进行任何更新...？以及如何减少延迟...？

我正在使用 java 1.6 和 netbeans

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:14:43.180

```
The thread executing within the Runnable object sleeps for 5 seconds   
to simulate a long read over a slow network connection 
```

我知道这是在某些情况下实施的，但您的情况也可能如此！
如果您的情况属实，那么我可以看到这是不可避免的，无法改变。
你可以在[这里找到它](http://java.sun.com/developer/technicalArticles/Threads/swing/)

# c++ - 如何读取包含空格的数据

> ID：10108946
> 
> 赞同：0
> 
> 时间：2012-04-11T15:20:40.560
> 
> 标签：c++, visual-studio-2010, visual-c++

我有一个 txt 文件，其中包含以下信息：

"

杰克

吉姆

比尔的父亲

"

我使用 ifstream 读取所有数据没有问题，例如：

ifstream myReadFile; myReadFile.open(mFilePath);

我的读取文件 >>a>>b>>c;

但我发现最后一个只有“Bill's”而没有“Father”，因为它们是用空格隔开的。所以我想知道是否有一种方法可以在一个数据中包含空格并仅用 \t 或 endl （制表符或新行）分隔它们谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:24:44.727

可以通过以下方式完成`getline`：

```
myReadFile.getline(a,sizeof(a)); 
```

这将从流中读取最多`sizeof(a)`字符，直到行尾。

`ifstream::get`您可以指定所需的分隔符。

```
myReadFile.get(a, sizeof(a), '\t'); 
```

这将从流中读取最多`sizeof(a)`字符，直到找到'\t'。

# linux - Bash 导出命令

> ID：10108950
> 
> 赞同：27
> 
> 时间：2012-04-11T15:20:53.893
> 
> 标签：linux, ubuntu

我的 64 位 Ubuntu 在*导出*命令上遇到了一个奇怪的问题。

基本上，我在 Windows 7 系统上的 Ubuntu 上安装了 VM，我正在尝试使用自定义（由客户端提供）软件将命令从我的 Windows 系统传递到我的 VM 安装。

所以，在我的虚拟机上，当我这样做时：

```
export foo=bar
echo $foo 
```

一切都按预期工作。

但是，当我通过自定义软件（基本上将 Linux 命令作为字符串传递给 bash shell）执行相同操作时，我得到：

```
export: command not found 
```

我尝试查看外壳（使用自定义软件），使用：

```
echo $SHELL > shell.txt 
```

我得到了预期的*/bin/bash ，但我仍然得到**"export: command not found error"*。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-13T16:47:57.003

`export`是 Bash 内置`echo`程序，是您的`$PATH`. 因此`export`，Bash 会按原样解释，而不会产生新进程。

`-c`您需要让 Bash 来解释您的命令，您可以使用以下选项将其作为字符串传递：

```
bash -c "export foo=bar; echo \$foo" 
```

还：

每次调用都`bash -c`从一个新的环境开始。所以像：

```
bash -c "export foo=bar"
bash -c "echo \$foo" 
```

不管用。第二次调用不记得了`foo`。

相反，您需要`;`在一次调用中链接由分隔的命令`bash -c`：

```
bash -c "export foo=bar; echo \$foo" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-20T10:40:21.687

如果您使用的是[C shell](https://en.wikipedia.org/wiki/C_shell) -

```
setenv PATH $PATH":/home/tmp" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-11T08:34:42.473

如果您不能使用“导出”命令，那么*只需*使用：

```
setenv path /dir 
```

像这样

```
setenv ORACLE_HOME /data/u01/apps/oracle/11.2.0.3.0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T15:23:51.710

可能是因为它试图将“导出”作为外部命令执行，而且它是一个内部的 shell。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T15:23:46.663

您确定该软件（而不是您自己，因为您的测试实际上只显示用户默认使用的 shell）使用*/bin/bash*吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T16:50:15.333

`SHELL`是一个环境变量，因此对于您要弄清楚的内容而言，它并不是最可靠的。如果您的工具使用的外壳没有设置它，它将保留其旧值。

用来弄清楚`ps`到底发生了什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-07T10:09:46.577

从 Bash 更改为*sh*脚本使我的脚本工作：

```
!/bin/sh 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2017-07-22T15:31:24.063

按照*以下*步骤*删除*“找不到 bash 导出命令”。终端打开错误修复>>>>>>

打开终端并输入：

```
nano ~/.bashrc 
```

加载纳米后：

删除所有 'export PATH = ...' 行并按`Ctrl`+`O`保存文件并按`Ctrl`+`E`退出。

现在终端打开错误将得到修复......

# glib - glib，（FIFO 管道）fd 泄漏，使用 GMainLoop 和 GSource 超时

> ID：10108958
> 
> 赞同：2
> 
> 时间：2012-04-11T15:21:15.480
> 
> 标签：glib, file-descriptor

在使用 Glibs GMainLoop 时，我遇到了一些文件描述符挂起的问题。我已将其缩小为一个具有一个事件的简单循环。

我在运行程序时正在监视文件描述符，并注意到有几个文件描述符永远不会关闭。

请看这个例子：

```
#include <stdio.h>
#include <glib.h>
#include <gio/gio.h>
#include <string.h>
#include <unistd.h>

static gboolean
timeout(gpointer user_data)
{
    printf("## %s\n", __FUNCTION__);
    g_main_loop_quit((GMainLoop*)user_data);
}

int
main(int argc, char **argv)
{
    g_type_init();

    printf("Check lsof now...\n");
    sleep(10);
    printf("--- time's up ---\n");

    GMainContext *ctx = g_main_context_new();
    GMainLoop *loop = g_main_loop_new(ctx, FALSE);
    g_main_context_push_thread_default(ctx);

    GSource *timer = g_timeout_source_new(2000);
    g_source_set_callback(timer, timeout, loop, NULL);
    g_source_attach(timer, ctx);

    g_main_loop_run(loop);

    g_main_context_pop_thread_default(ctx);
    g_source_unref(timer);
    g_main_loop_unref(loop);
    g_main_context_unref(ctx);

    printf("Check lsof now...\n");
    sleep(10);
    printf("--- time's up ---\n");
    return 0;
} 
```

在代码中标记的地方，我正在检查程序打开的文件描述符的数量。在第一个检查点有 3 个（忽略库等）：

```
a.out   16333 hansm    0u   CHR 136,43      0t0      46 /dev/pts/43
a.out   16333 hansm    1u   CHR 136,43      0t0      46 /dev/pts/43
a.out   16333 hansm    2u   CHR 136,43      0t0      46 /dev/pts/43 
```

在第二个检查点有五个：

```
a.out   16873 hansm    0u   CHR 136,43      0t0        46 /dev/pts/43
a.out   16873 hansm    1u   CHR 136,43      0t0        46 /dev/pts/43
a.out   16873 hansm    2u   CHR 136,43      0t0        46 /dev/pts/43
a.out   16873 hansm    5r  FIFO    0,8      0t0 149228995 pipe
a.out   16873 hansm    6w  FIFO    0,8      0t0 149228995 pipe 
```

为什么这些管道没有关闭？

Valgrind 没有报告错误（除了一些“可能丢失的记忆”）。

fd（上面示例中的 5 和 6）在执行时打开

```
GMainContext *ctx = g_main_context_new(); 
```

而且显然从未关闭。我究竟做错了什么？

# hibernate - Hibernate 无法在删除时将 null 插入审计列

> ID：10108960
> 
> 赞同：1
> 
> 时间：2012-04-11T15:21:23.740
> 
> 标签：hibernate, hibernate-annotations, audit-tables

我最近在我的 user 和 user_audit 表中添加了一个新列“PASSWORD_RESET_REQUIRED”。

不是当我尝试删除用户时，我收到一条错误消息：

无法将 NULL 插入 ("USER_AUD"."PASSWORD_RESET_REQUIRED")

```
@Entity
@Table(name = "sec_user", schema = "RZUL_DATA")
//Override the default Hibernate delete and set the termination date rather than     deleting the record from the db.
@SQLDelete(sql = "UPDATE RZUL_DATA.sec_user SET trmn_dt = sysdate  WHERE user_id = ?")

@Audited
public class User {

@NotEmpty
@Column(name = "password_reset_required", updatable = true, insertable = true)
private String isPasswordResetRequired;

 ... other properties
} 
```

我的 UserDao 删除方法：

```
@Override
public boolean deleteUser(final User user) {
    sessionFactory.getCurrentSession().delete(user);
   NOTE: Till this point I can see the user.isPasswordResetRequired an a non null.
    return true;
} 
```

我可能会遗漏哪一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-12T12:44:32.733

确保您的`*_HISTORY`表没有`NOT NULL`数据列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:16:18.493

当您尝试删除项目时，Hibernate 尝试将 Child 表上的外键列设置为 null，并且因为它不能为 null，您使用的 SQL 技术会出错。尝试

```
@Cascade(value=CascadeType.ALL) 
```

请参阅[不能在一对多关系休眠注释中插入 null](https://stackoverflow.com/questions/3724719/cannot-insert-null-in-one-to-many-relatioship-hibernate-annotation)

# reporting-services - 除非禁用 UAC，否则尝试访问报表管理器 URL 时出现权限错误

> ID：10108965
> 
> 赞同：1
> 
> 时间：2012-04-11T15:21:55.420
> 
> 标签：reporting-services, uac, permission-denied, configurationmanager, reportmanager

如果启用了 UAC，我在尝试访问浏览器中的报表管理器 URL 时收到权限错误。

我从阅读其他帖子中知道，需要禁用 UAC 才能使其正常工作，并且对我也有效。

我现在担心的是，当我在用户计算机上安装带有 Reporting Services 的 SQL Server 时，我还必须禁用 UAC。

有什么方法可以让它工作并同时启用 UAC 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:35:34.557

如果启用了 UAC，您可以使用“以管理员身份运行”上下文菜单选项启动 IE，然后您可以访问本地计算机上的报表管理器。（在开始菜单中右键单击 IE，选择“以管理员身份运行”。然后您需要在 IE 启动时批准 UAC 提示。）

# ruby-on-rails - 使用包含图像的 Prawnto 生成 PDF

> ID：10108970
> 
> 赞同：4
> 
> 时间：2012-04-11T15:22:16.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, prawn, prawnto

我对在我的 RoR 项目中生成 pdf 的最简单/最佳方法进行了一些研究，并决定使用 Prawn + Prawnto。我已经成功地让 Prawnto 使用 .prawn 扩展名生成了一个非常基本的 PDF，但是我也不知道如何显示图像。是否可以使用对虾选项？

将来我想为 pdf 生成一个随机下载链接，并将其包含在电子邮件中。我还希望此 PDF 始终可以访问，并且此链接不会被破坏。

考虑到这一点，Prawnto 是最好的选择，因为文档似乎已经枯竭，但似乎仍然强烈推荐它。它仍然是最好的选择吗？我正在使用 Rails 3.2。

非常欢迎有关此问题的任何帮助、建议或指导

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T22:39:12.140

您可以使用以下代码将图像添加到 prawn 生成的 pdf 中：

```
image "/path/to/image/file.jpg" 
```

在您的 PDF 生成例程中。

在对虾中，有很多用于定位、缩放和处理图像的选项。我建议您查看[Prawn 手册](http://prawn.majesticseacreature.com/manual.pdf)

# .net - 如何在面向公众的网站上跟踪用户浏览信息

> ID：10108971
> 
> 赞同：0
> 
> 时间：2012-04-11T15:22:20.170
> 
> 标签：.net, sql-server, performance, database-design, database-performance

我正在设计一个面向公众的网站，该网站需要跟踪用户通过该网站的路径。每次用户访问网站时，我都需要跟踪该信息并通过多次写入将该路径、浏览器、位置等（有点像分析）放入数据库中，并根据用户的数据执行几次读取正在浏览。我担心企业级别的应用程序性能（每天 100,000 个独立访问者）。话虽如此，我需要知道这对于这种流量水平是否不是一个好的策略，以及我是否应该采取另一种方法来跟踪这些信息。使用 SQL Server 在 .NET 中进行开发工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:25:39.353

通常这是通过批处理 IIS 日志文件来完成的，而不是在每个页面命中时写入数据库。

或者，您可以配置 IIS 为您记录到数据库：http: [//support.microsoft.com/kb/245243](http://support.microsoft.com/kb/245243)

也[http://forums.iis.net/t/1154908.aspx](http://forums.iis.net/t/1154908.aspx)（对于 IIS 7）

# java - 访问 JButton[]

> ID：10108972
> 
> 赞同：3
> 
> 时间：2012-04-11T15:22:21.023
> 
> 标签：java, arrays, swing, jbutton

我在 3 行中有 3 个按钮：绿色、黄色和红色。它们都在一个自己的数组中。
当我单击一个绿色按钮时，同一行中的其他 2 个按钮应该被禁用。但我不确定如何使用数组来处理它。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Test extends JFrame implements ActionListener {

View view = new View();
JButton bGreen[] = new JButton[3];
JButton bYellow[] = new JButton[3];
JButton bRed[] = new JButton[3];

public Test() {
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.setBounds(300, 100, 500, 400);
    this.setVisible(true);
    this.setLayout(new GridLayout(3, 3));

    makeButtons();
}

public void makeButtons() {
    for (int i = 0; i < 3; i++) {
        bGreen[i] = new JButton("Green");
        bYellow[i] = new JButton("Yellow");
        bRed[i] = new JButton("Red");

        bGreen[i].setBackground(Color.green);
        bYellow[i].setBackground(Color.yellow);
        bRed[i].setBackground(Color.red);

        bGreen[i].addActionListener(this);
        bYellow[i].addActionListener(this);
        bRed[i].addActionListener(this);

        this.add(bGreen[i]);
        this.add(bYellow[i]);
        this.add(bRed[i]);
    }
}

@Override
public void actionPerformed(ActionEvent ae) {
    Object source = ae.getSource();
    if (source == bGreen) // e.g. bGreen[1]
    {
        // bYellow[1].setEnabled(false);
        // bRed[1].setEnabled(false);
    }
    if (source == bYellow) // e.g. bYellow[1]
    {
        // bGreen[1].setEnabled(false);
        // bRed[1].setEnabled(false);
    }
    // the same with bRed
}

public static void main(String[] args) {
    Test test = new Test();
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:27:17.467

不。你将重新发明轮子。使用s 并在每行的基础上将`JToggleButton`它们全部分组。`ButtonGroup`

@Hovercraft Full Of Eels 提出的建议是正确的（并且应该是真正的答案）。

# c++ - 预先设置向量的大小是否更有效？

> ID：10108985
> 
> 赞同：4
> 
> 时间：2012-04-11T15:22:46.970
> 
> 标签：c++, stl, vector

如果可以的话，预先设置向量的大小是否更有效？我打算 push_back 值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T15:24:49.793

是的，它通常效率更高一些。不要期望有巨大的改进，但最坏的情况是它是无害的（显然假设你只保留你实际需要的空间）。

对于相当不寻常的情况，它可能会改善所花费的时间*和*消耗的空间量。当你使用`push_back`它时，当你用完空间时，它会将大小增加一些乘法因子，但如果你使用`reserve`它，它可能会准确分配你需要的数量，而不是四舍五入到它使用的任何因子的下一个倍数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T15:42:33.893

如果您`.push_back()`用于存储值，则使用成员函数“预先设置向量的*大小”是***不正确的。**相反，您可以使用成员函数预先设置向量的*容量。**`.resize()`*`.reserve()`**

 **以下是三个正确的方法：

```
// 1) Do nothing initially, use .push_back
std::vector<int> v;
v.push_back(1); v.push_back(2);

// 2) Set the capacity initially, use .push_back
std::vector<int> v;
v.reserve(2);
v.push_back(1); v.push_back(2);

// 3) Set the size initiallly, use subscripts
std::vector<int> v(2); // Set the size in construction
v.resize(2);             // OR set the size by a call to .resize()
v[0] = 1; v[1] = 2; 
```

是的，第二种方法通常比第一种更节省尺寸和时间。

第二种方法有时比第三种更省时。或不。你应该测量它，看看它是否重要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-11T15:24:49.330

是的，它通常会保留空间（容量），因此内存分配和数据移动较少，因为向量保证其数据连续存储。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T15:29:52.583

是的，如果您可以预先保留适量的数据，效率会更高。当向量达到其容量时，它必须分配新的存储空间，然后性能就会受到影响。**

# objective-c - 如何在 UITableView 下保持一个固定的 UITextField ？

> ID：10108986
> 
> 赞同：0
> 
> 时间：2012-04-11T15:22:47.890
> 
> 标签：objective-c, ios, uitextfield, uitableview

我一直在网上阅读有关此内容的信息，但仍然无法理解处理以下内容的正确方法：

我有一个 UIViewController，里面有一个 UITableView。

我想在该 tableview 下方显示一个 FIXED UITextField，它将一直可见（与 tableview 滚动分开）。这是 iphone SMS 应用程序的确切行为。

应该怎么做？

我可以将 UITextField 添加为与 uitableview 完全分开的视图并将其放置在其下方，但随后我必须手动调整各种视图并在键盘出现时移动它们。

这是正确的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:25:13.067

是的。在底部添加另一个 UIView 并在键盘上下移动时调整所有内容。

# css - 对齐图像和文本 标记在同一顶行

> ID：10108987
> 
> 赞同：2
> 
> 时间：2012-04-11T15:22:49.373
> 
> 标签：css, image, html, alignment

我试图在图像旁边放置一个图像和一些文本，它们都在顶部垂直对齐。这是我正在使用的代码，但它似乎没有工作。它在底部对齐文本

```
<img src="http://localhost/wordpress/wp-content/uploads/2012/04/Desktop.png" alt="" style="float:left; margin-right:5px;" />
<div class="box"><a href="#" target="_blank">Click here to take an online demo</a></div> 
```

'box' 在样式表中看起来像这样，

```
.box {
/* border: 0px solid; */
overflow: hidden;
} 
```

这是现在的样子
![它目前的样子](../Images/baf8e613321cc1edd2f231ad19e9e79f.png)

你能建议使它看起来像这样所需的相关更改吗
![我希望它看起来像什么](../Images/07aa0ab4507a937a6aca931f16ebe194.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:56:55.137

使用 vertical-align:top 到 .box css（或）margin-top

示例 CSS

```
 .box {
         /* border: 0px solid; */
             overflow: hidden;
             margin-top:-5px;

                  } 
```

# c# - asp.net 网站 - 我可以判断它是否已预编译吗？

> ID：10108989
> 
> 赞同：2
> 
> 时间：2012-04-11T15:22:57.013
> 
> 标签：c#, asp.net

我有一个有点奇怪的情况。

我的一位客户在专用服务器上拥有一个 Asp.net（框架的 v2）站点。

当他们的开发人员离开时，他们要求我对代码进行一些更改。显然最新版本在服务器上。

我下载了该代码，在VS2010中打开它，转换它，它很好。但是，当我运行代码时，我从 aspx 页面中得到编译时错误，它们正在调用代码中不存在的属性。（根据在文件中查找，整个解决方案，*。*）

所以我做了一些挖掘。在 Bin 文件中有一个网站程序集。在服务器上，这是超过 300k。在我的机器上，这是 180k。

我接受这可能只是后来的编译器更好地打包代码，但如果这显示为 120k 改进，我会感到惊讶。

所以我唯一能想到的是，在某个时候，他做了一些更改并编译了网站，但没有先删除所有旧的 .cs 文件。

这是可能的吗，或者任何人都可以为我看到我正在目睹的行为提出不同的理由吗？

[编辑]

好的，它不是预编译的，所以我真的很难理解现在发生了什么。

*   我有网站上的所有代码。
*   在服务器上，代码有效。

但是，因为我已经回答了我最初的问题，所以我将关闭它，毫无疑问，明天我会更深入地挖掘。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:28:31.967

最简单的方法是查看`aspx`页面：

*   如果他们在指令中有`Assembly=`指定，`@Page`
*   或者页面大小为 1KB，带有一些“占位符”文本

然后是预编译的。

在第一种情况下，它是“部分编译的”（相当于“可更新”，即您可以更改*一些*内容）。在后一种情况下，它是“完全编译的”。

此外，也许最值得注意的是，缺少代码文件（*.vb、*.cs 等）——因为无论编译模式如何（如果完全编译），它们*都会*被编译成二进制文件。如果源文件都在那里，那么你很可能有一个未编译的解决方案——或者一个非常非常奇怪的项目设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:29:34.220

可能还有其他解释。例如，其中一个是以前的开发人员使用了版本控制软件，并且没有将他/她使用的所有文件都添加到其中，这就是您下载的内容，即实际上缺少一些文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T15:27:52.147

在你的位置上，我会通过一些程序集浏览器检查程序集，比如 ILSpy。然后您可以查看其中的内容以及它是否与您的代码文件不同。

# gwt - smart gwt - 是否可以在作为 smart gwt 应用程序一部分的窗口中显示外部 url

> ID：10108990
> 
> 赞同：0
> 
> 时间：2012-04-11T15:23:00.163
> 
> 标签：gwt, smartgwt

我想实现一个场景，当用户第一次访问我的基于智能 gwt 的应用程序时，会显示一个带有另一个 url 的弹出窗口。根据用户在该弹出窗口中的操作，我想稍后删除弹出窗口并将内容添加到应用程序的主窗口。

但是我看不到在窗口/模态窗口中显示外部 url 的任何方法......我所看到的只是向窗口添加表单或其他元素/布局等的方法。

是否可以在 Smart GWT 中实现我上面建议的场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:06:19.667

您可以使用 HTMLPane

```
VLayout yourContentLayout = new VLayout();
HTMLPane htmlPane = new HTMLPane();
htmlPane.setContentsURL("http://www.yourSite.com/");  
htmlPane.setContentsType(ContentsType.PAGE);
yourContentLayout.addMember(htmlPane );
yourModalWindow.addItem(yourContentLayout ); 
```